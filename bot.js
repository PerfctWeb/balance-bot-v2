const _0x227d3a=_0x33f9;(function(_0x1ed4dd,_0x1b332e){const _0x3ce02a=_0x33f9,_0x139770=_0x1ed4dd();while(!![]){try{const _0x3c185f=-parseInt(_0x3ce02a(0x275))/0x1+-parseInt(_0x3ce02a(0x301))/0x2*(parseInt(_0x3ce02a(0x2dd))/0x3)+-parseInt(_0x3ce02a(0x26e))/0x4*(parseInt(_0x3ce02a(0x308))/0x5)+-parseInt(_0x3ce02a(0x27c))/0x6+-parseInt(_0x3ce02a(0x278))/0x7+-parseInt(_0x3ce02a(0x27a))/0x8+parseInt(_0x3ce02a(0x20a))/0x9*(parseInt(_0x3ce02a(0x2f5))/0xa);if(_0x3c185f===_0x1b332e)break;else _0x139770['push'](_0x139770['shift']());}catch(_0x3c29ef){_0x139770['push'](_0x139770['shift']());}}}(_0x3593,0xbe3c8));const _0x5ab5d1=function(){let _0x3e6ecf=!![];return function(_0x48ba78,_0x33b983){const _0x169aee=_0x3e6ecf?function(){const _0x1c4d37=_0x33f9;if(_0x33b983){const _0x3eb877=_0x33b983[_0x1c4d37(0x261)](_0x48ba78,arguments);return _0x33b983=null,_0x3eb877;}}:function(){};return _0x3e6ecf=![],_0x169aee;};}(),_0x3f9a55=_0x5ab5d1(this,function(){const _0x3d3157=_0x33f9;return _0x3f9a55[_0x3d3157(0x249)]()['search'](_0x3d3157(0x22e))[_0x3d3157(0x249)]()[_0x3d3157(0x246)](_0x3f9a55)['search'](_0x3d3157(0x22e));});_0x3f9a55();'use strict';const ccxt=require(_0x227d3a(0x287)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x227d3a(0x2a1)),{WebsocketClient,DefaultLogger}=require(_0x227d3a(0x2ae)),Crypt=require(_0x227d3a(0x29a))[_0x227d3a(0x254)];let exchange,wsClient;global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;function _0x3593(){const _0x582812=['symbol','yyyy-MM-dd\x27T\x27HH:mm:ss','getHours','constructor','getStartingBalances','LIMIT','toString','max','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','coin','EUR','Limit\x20(low-margin)','format','order','ticker','restart','\x20>\x20','Crypt','fromCodePoint','apiKey','success','getMonth','\x20|\x20Error\x20details:\x20','Executed\x20','Order(s)\x20not\x20validated\x20after\x20','cancelOrder','last','running','stringify','reverse','apply','defaults','startnumber','createOrder','Order\x20filled:\x20','number','delta','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','performance','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','progress','push','************','4leSRxn','date','type','WebSockets(','limit-low','sortBy','showname','1377576cVQOWR','spot','realized','4641742XQDbNR','BUSD','4078896ElnAJf','Market','6601716JCAGLC','length','API-key\x20format\x20invalid','log','kline','sell','binanceus','symbols','botID','\x20-\x20','bid','ccxt','-events.json','offset','Bot\x20','event','limit-high','loadSymbols()','HOT/BTC','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','cooldown','wss://stream.binance.com:9443','Performance\x20recreation\x20completed\x20successfully','RequestTimeout','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','apiSecret','cost','function','usd','formattedMessage','hybrid-crypto-js','yyyy/MM/dd','timeout','storeConfiguration','BTCBUSD','send','starting-balances','date-fns','emojisell','sort','startdate','balances','Invalid\x20quantity','parse','orderStatus','getMinutes','DDoSProtection','USDC','OrderNotFound','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','binance','differenceInCalendarDays','\x20order:\x20','eventType','FILLED','portfolio','getSeconds','market','splice','asset','accumulatedQuantity','coin-loading-progress','reduce','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','limit','getDate','./config/','sells','\x20minutes\x20-\x20balancing\x20resumed','assign','parseISO','abs','fetchBalance','getTime','datetime','MIN_NOTIONAL','get','error','differenceInSeconds','availableBalance','getPortfolio','botname','toLowerCase','fee','loadMarkets','Order(s)\x20filled\x20-\x20balancing\x20resumed','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','threshold','BTC/USDT','initws()','BNB','trade','USDT','coins','has','fees','757080CXprBI','initclient','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','ask','round','excluded','placeOrder','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','001','\x20|\x20Unknown\x20error\x20occured','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','executionReport','reconnected','shift','wsKey','getCoins()','wss://stream.binance.us:9443','basecoin','slice','price','Limit\x20(high-margin)','sha256','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','getPortfolio()','25540ToWDwI','data','kill','value','emojibuy','BTC','close','yyyy/MM/dd\x20HH:mm:ss','keys','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','closeWs','exchange','2Kfbale','bot','fetchTickers','configuration','toFixed','AuthenticationError','Order(s)\x20validated\x20-\x20balancing\x20resumed','7184930Rjkenq','buy',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','add','args','remove','bot-','entries','headless','limits','InvalidNonce','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','remainingSymbols','Unfilled\x20order(s)\x20canceled\x20after\x20','bb-settings.json','privateKey',')\x20|\x20Error\x20details:\x20','subscribeSpotKline','write','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','side','amount','currency','isArray','mkdirSync','Binance\x20API\x20key\x20is\x20invalid','fetchOrders','21564LhrLhI','Order:\x20','startprice','padStart','buys','Error:\x20Invalid\x20argument\x20','filter','-results.json','BTC/EUR','Binance\x20API\x20secret\x20is\x20invalid','bb-secure.json','find','InsufficientFunds','ordertype','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','BTCUSDT','valid','\x20orders\x20in\x20less\x20than\x20','distribution','RSA-OAEP','includes','userData','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated',':\x20Bot\x20','message','-performance.json','getFullYear','ExchangeNotAvailable','breakeven','argv','eur','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','emitHistory','exit','timestamp','time','(((.+)+)+)+$','decrypt','forEach','page','cancelLoading','enabled','BTC/BUSD','secure','outboundAccountPosition','orderId','logs','timeshift','wsMarket','target','\x20hour','eachDayOfInterval','filled','event-history','replace','recreate','milliseconds'];_0x3593=function(){return _0x582812;};return _0x3593();}const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')['version'],botID=process['argv'][0x2]||_0x227d3a(0x2e5),pattern=/^[0-9]{3}$/;if(!pattern['test'](botID))return console['log'](_0x227d3a(0x20f)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x227d3a(0x22b)](0x1);const userID=process[_0x227d3a(0x227)][0x3]||'',configpath=userID?_0x227d3a(0x2bf)+userID+'/':'./config/';!fs['existsSync'](configpath)&&fs[_0x227d3a(0x207)](configpath);function _0x33f9(_0x822d84,_0x1191ac){const _0x49fbfe=_0x3593();return _0x33f9=function(_0x3f9a55,_0x5ab5d1){_0x3f9a55=_0x3f9a55-0x1f0;let _0x3593d3=_0x49fbfe[_0x3f9a55];return _0x3593d3;},_0x33f9(_0x822d84,_0x1191ac);}const configfile=configpath+_0x227d3a(0x1f5)+botID+'-config.json',logfile=configpath+'bot-'+botID+_0x227d3a(0x288),performancefile=configpath+_0x227d3a(0x1f5)+botID+_0x227d3a(0x223),coinresultsfile=configpath+'bot-'+botID+_0x227d3a(0x211),settingsfile=configpath+_0x227d3a(0x1fd),securefile=configpath+_0x227d3a(0x214),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x227d3a(0x262)]({'logs':[]})[_0x227d3a(0x201)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x227d3a(0x262)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x227d3a(0x262)]({'bot':[]})[_0x227d3a(0x201)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x227d3a(0x201)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':'BTCEUR','symbol':_0x227d3a(0x212)},'usd':{'coin':_0x227d3a(0x219),'symbol':_0x227d3a(0x2d5)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2a83b5)=>{},'debug':(..._0x151ec1)=>{},'notice':(..._0x4641d6)=>{},'info':(..._0x49f65a)=>{},'warning':(..._0x52ec28)=>{},'error':async function(..._0x720e89){const _0x3fa3dc=_0x227d3a,_0x46d830=new Date()[_0x3fa3dc(0x2c6)]();if(!lastErrorShown||_0x46d830-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3fa3dc(0x2c6)](),logHistory(_0x3fa3dc(0x2ca),_0x3fa3dc(0x271)+consecutivePauses+_0x3fa3dc(0x1f1));let _0x534fe6='';if(_0x720e89[0x0])_0x534fe6+=_0x720e89[0x0];if(_0x720e89[0x1]&&_0x720e89[0x1]['error']&&_0x720e89[0x1][_0x3fa3dc(0x2ca)][_0x3fa3dc(0x222)])_0x534fe6+=_0x3fa3dc(0x285)+_0x720e89[0x1]['error'][_0x3fa3dc(0x222)];logging(_0x3fa3dc(0x271)+consecutivePauses+_0x3fa3dc(0x1ff),''+_0x534fe6),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x227d3a(0x2f2),'rsaStandard':_0x227d3a(0x21d)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x227d3a(0x239)]!=config[_0x227d3a(0x239)]&&updateTimeshift(settings[_0x227d3a(0x239)]);process['send']({'started':_0x227d3a(0x25e)}),initializeProcessListeners();function proxyEmit(_0x4b23b0,_0x2d49ec=null){process['send']({'function':_0x4b23b0,'args':_0x2d49ec});}function initializeProcessListeners(){const _0x24df42=_0x227d3a;process['on'](_0x24df42(0x222),_0x29102f=>{const _0x1d1a66=_0x24df42;switch(Object[_0x1d1a66(0x2fd)](_0x29102f)[0x0]){case _0x1d1a66(0x239):_0x29102f[_0x1d1a66(0x239)]!=undefined&&(settings[_0x1d1a66(0x239)]=_0x29102f['timeshift'],updateTimeshift(settings[_0x1d1a66(0x239)]));break;case _0x1d1a66(0x297):switch(_0x29102f[_0x1d1a66(0x297)]){case _0x1d1a66(0x2de):initclient();break;case _0x1d1a66(0x22a):emitHistory(_0x29102f[_0x1d1a66(0x1f3)]);break;case _0x1d1a66(0x2cd):getPortfolio(_0x29102f[_0x1d1a66(0x1f3)]);break;case _0x1d1a66(0x29d):storeConfiguration(_0x29102f[_0x1d1a66(0x1f3)]);break;case'storeHeadless':storeHeadless(_0x29102f[_0x1d1a66(0x1f3)]);break;case _0x1d1a66(0x247):getStartingBalances();break;case _0x1d1a66(0x2e3):placeOrder(_0x29102f[_0x1d1a66(0x1f3)]);break;case _0x1d1a66(0x232):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x103dbe=_0x227d3a;if(pidBalances)clearTimeout(pidBalances);if(config[_0x103dbe(0x256)]!=''){await initExchange(config['apiKey'],config['apiSecret']);let _0x2a21af=await loadSymbols();_0x2a21af&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0xb9abff,_0x5610ce){const _0x138f7e=_0x227d3a,_0x5afeb2=ccxt[config[_0x138f7e(0x300)]];let _0x17a32d;switch(config[_0x138f7e(0x300)]){case _0x138f7e(0x2ae):_0x17a32d=_0x138f7e(0x291);break;case _0x138f7e(0x282):_0x17a32d=_0x138f7e(0x2ed);break;default:_0x17a32d='wss://stream.binance.com:9443';}exchange=new _0x5afeb2({'apiKey':_0xb9abff,'secret':_0x5610ce,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0xb9abff,'api_secret':_0x5610ce,'beautify':!![],'wsUrl':_0x17a32d},logger),config[_0x138f7e(0x300)]==_0x138f7e(0x282)&&(stablecoins={'eur':{'coin':_0x138f7e(0x29e),'symbol':_0x138f7e(0x234)},'usd':{'coin':_0x138f7e(0x219),'symbol':_0x138f7e(0x2d5)}});}async function loadSymbols(){const _0x172ab3=_0x227d3a;let _0x5c6221;try{markets=await exchange[_0x172ab3(0x2d1)]();const _0x283e57=['DAI/',_0x172ab3(0x28e),'HOT/EUR'];allSymbols=exchange[_0x172ab3(0x283)][_0x172ab3(0x210)](_0x28b776=>{const _0x41d062=_0x172ab3;let _0x2c3dfc=![];return _0x283e57[_0x41d062(0x230)](_0x4af7e3=>{const _0x1075ca=_0x41d062;if(_0x28b776[_0x1075ca(0x21e)](_0x4af7e3))_0x2c3dfc=!![];}),!_0x2c3dfc;}),_0x5c6221=!![];}catch(_0x2d92fd){await handleError(_0x2d92fd,_0x172ab3(0x28d)),_0x5c6221=![];}return _0x5c6221;}async function initbot(){const _0x450ee1=_0x227d3a;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x498c9c=dbCoinResults[_0x450ee1(0x2c9)](_0x450ee1(0x2da))[_0x450ee1(0x2f8)]();if(_0x498c9c[_0x450ee1(0x27d)]==0x0)await resetCoinResults();}async function initclient(){const _0xaddf34=_0x227d3a;proxyEmit(_0xaddf34(0x304),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xaddf34(0x2a5),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5aad27=_0x227d3a;wsinitialized=![];ws1&&(ws1[_0x5aad27(0x230)](_0x51a288=>{try{wsClient['closeWs'](_0x51a288);}catch(_0xa0b59d){}}),ws1=[]);if(ws2){try{wsClient[_0x5aad27(0x2ff)](ws2);}catch(_0x20e3cd){}ws2=null;}}async function initws(){const _0x3adece=_0x227d3a;cleanws();let _0x21101d=[];currentCoins['forEach'](_0x1cae80=>{const _0x52b4da=_0x33f9;if(_0x1cae80[_0x52b4da(0x24c)]!=config[_0x52b4da(0x2ee)])_0x21101d['push'](noslash(_0x1cae80[_0x52b4da(0x243)]));});if(!_0x21101d[_0x3adece(0x21e)](stablecoins[_0x3adece(0x228)][_0x3adece(0x24c)]))_0x21101d['push'](stablecoins[_0x3adece(0x228)][_0x3adece(0x24c)]);if(!_0x21101d[_0x3adece(0x21e)](stablecoins[_0x3adece(0x298)][_0x3adece(0x24c)]))_0x21101d[_0x3adece(0x26c)](stablecoins['usd'][_0x3adece(0x24c)]);if(!_0x21101d[_0x3adece(0x21e)](_0x3adece(0x2d7)+config['basecoin']))_0x21101d[_0x3adece(0x26c)](_0x3adece(0x2d7)+config[_0x3adece(0x2ee)]);try{_0x21101d[_0x3adece(0x230)]((_0x3e13b8,_0xd0fd51)=>{const _0x140027=_0x3adece;ws1[_0xd0fd51]=wsClient[_0x140027(0x200)](_0x3e13b8,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on'](_0x3adece(0x299),_0x1d1cee=>{const _0x54da75=_0x3adece;if(!Array[_0x54da75(0x206)](_0x1d1cee)&&!_0x1d1cee[_0x54da75(0x2eb)][_0x54da75(0x21e)](_0x54da75(0x21f))){if(_0x1d1cee[_0x54da75(0x2b1)]===_0x54da75(0x280)){global[_0x54da75(0x251)][_0x1d1cee['kline']['symbol']]=_0x1d1cee[_0x54da75(0x280)][_0x54da75(0x2fb)];return;}}else{if(!Array['isArray'](_0x1d1cee)&&_0x1d1cee[_0x54da75(0x2eb)][_0x54da75(0x21e)](_0x54da75(0x21f))){if(_0x1d1cee[_0x54da75(0x23a)]['includes'](_0x54da75(0x276))){updateNumberCoins(_0x1d1cee);return;}}}}),wsClient['on'](_0x3adece(0x2e9),async _0x138455=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x32fb21){await handleError(_0x32fb21,_0x3adece(0x2d6));}let _0x3e190c,_0x233073=0x0;loading['remainingSymbols']=[];let _0x1cefa8=0x0;currentCoins['forEach'](_0xcd6924=>{const _0x52c198=_0x3adece;if(_0xcd6924[_0x52c198(0x24c)]!=config['basecoin'])loading[_0x52c198(0x1fb)]['push'](_0xcd6924[_0x52c198(0x243)]);}),loadingCanceled=![];while(_0x3e190c!=currentCoins[_0x3adece(0x27d)]-0x1){_0x3e190c=0x0,currentCoins['forEach'](_0x457355=>{const _0x467fc8=_0x3adece;_0x457355[_0x467fc8(0x24c)]!=config[_0x467fc8(0x2ee)]&&global[_0x467fc8(0x251)][noslash(_0x457355[_0x467fc8(0x243)])]&&(loading['remainingSymbols']=loading[_0x467fc8(0x1fb)][_0x467fc8(0x210)](_0x4f5b5d=>_0x4f5b5d!=_0x457355['symbol']),_0x3e190c++);}),loading[_0x3adece(0x26b)]=Math[_0x3adece(0x2e1)](_0x3e190c/(currentCoins[_0x3adece(0x27d)]-0x1)*0x64);_0x1cefa8>0x1e*0x5&&(loading[_0x3adece(0x29c)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x3e190c!=_0x233073&&(_0x233073=_0x3e190c,emitLoadingProgress()),_0x1cefa8++,await sleep(0xc8);}if(_0x3e190c==currentCoins[_0x3adece(0x27d)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x2eff48=_0x227d3a;proxyEmit(_0x2eff48(0x2b9),loading);}async function getFiat(){const _0x3bb96d=_0x227d3a;let _0x37322a=0x0,_0x553f16=0x0;try{_0x37322a=global[_0x3bb96d(0x251)][stablecoins[_0x3bb96d(0x228)][_0x3bb96d(0x24c)]],_0x553f16=global[_0x3bb96d(0x251)][stablecoins['usd'][_0x3bb96d(0x24c)]];}catch(_0x3a037d){await handleError(_0x3a037d,'getFiat()');}return{'eur':Number(_0x37322a),'usd':Number(_0x553f16)};}async function setStartDatePerformance(_0x36a1f4){const _0x25be47=_0x227d3a,_0x536070=fns[_0x25be47(0x24f)](new Date(_0x36a1f4['startdate']),_0x25be47(0x29b));let _0x119e6d=[];_0x119e6d[stablecoins[_0x25be47(0x228)][_0x25be47(0x24c)]]=await getCloses(stablecoins[_0x25be47(0x228)][_0x25be47(0x243)],new Date(_0x36a1f4['startdate']),0x1),_0x119e6d[stablecoins[_0x25be47(0x298)]['coin']]=await getCloses(stablecoins[_0x25be47(0x298)][_0x25be47(0x243)],new Date(_0x36a1f4['startdate']),0x1);let _0x1215a8,_0x472f35=[];_0x36a1f4[_0x25be47(0x2b3)][_0x25be47(0x230)](_0x1971a0=>{const _0x32dee9=_0x25be47;!_0x1971a0[_0x32dee9(0x2e2)]&&_0x472f35[_0x32dee9(0x26c)]({'coin':_0x1971a0['coin'],'number':_0x1971a0['startnumber'],'price':_0x1971a0['startprice']});}),_0x1215a8={'date':_0x536070,'eur':_0x119e6d[stablecoins[_0x25be47(0x228)][_0x25be47(0x24c)]][0x0],'usd':_0x119e6d[stablecoins[_0x25be47(0x298)][_0x25be47(0x24c)]][0x0],'coins':_0x472f35};let _0x50b70b=dbPerformance[_0x25be47(0x2c9)](_0x25be47(0x2f6))['find']({'date':_0x536070})[_0x25be47(0x2f8)]();_0x50b70b?dbPerformance[_0x25be47(0x2c9)]('data')[_0x25be47(0x215)]({'date':_0x536070})[_0x25be47(0x2c2)](_0x1215a8)[_0x25be47(0x201)]():dbPerformance[_0x25be47(0x2c9)](_0x25be47(0x2f6))['push'](_0x1215a8)[_0x25be47(0x201)](),_0x50b70b=dbPerformance[_0x25be47(0x2c9)](_0x25be47(0x2f6))[_0x25be47(0x273)]('date')[_0x25be47(0x2f8)](),_0x50b70b[_0x25be47(0x230)](_0x8d6d3b=>{const _0x43b246=_0x25be47;_0x8d6d3b[_0x43b246(0x26f)]<_0x536070&&dbPerformance[_0x43b246(0x2c9)](_0x43b246(0x2f6))['remove']({'date':_0x8d6d3b['date']})[_0x43b246(0x201)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x4dd48d){const _0x3b7cc2=_0x227d3a;let _0x4fcab9,_0x66f4f0=[];logHistory(_0x3b7cc2(0x257),_0x3b7cc2(0x294)),_0x4dd48d[_0x3b7cc2(0x2b3)]['forEach'](_0x2076be=>{const _0x1a0e04=_0x3b7cc2;if(_0x2076be['coin']!=config['basecoin']&&!_0x2076be[_0x1a0e04(0x2e2)])_0x66f4f0[_0x1a0e04(0x26c)]({'coin':_0x2076be[_0x1a0e04(0x24c)],'symbol':_0x2076be[_0x1a0e04(0x243)]});});let _0x3eb136=[];try{const _0x186613=fns[_0x3b7cc2(0x24f)](fns['parseISO'](_0x4dd48d[_0x3b7cc2(0x2a4)][_0x3b7cc2(0x240)](/\//g,'-')),_0x3b7cc2(0x244));for(const _0x4b3e57 of _0x66f4f0){if(_0x4b3e57[_0x3b7cc2(0x24c)]!=config['basecoin'])_0x4fcab9=await exchange[_0x3b7cc2(0x209)](_0x4b3e57['symbol'],Date['parse'](_0x186613));_0x4fcab9['forEach'](_0x292aef=>{const _0x3b8d81=_0x3b7cc2,_0x1aa15a=_0x4b3e57['symbol'][_0x3b8d81(0x21e)](config[_0x3b8d81(0x2ee)]+'/'),_0x2ffffd=fns[_0x3b8d81(0x24f)](fns[_0x3b8d81(0x2c3)](_0x292aef[_0x3b8d81(0x2c7)]),_0x3b8d81(0x2fc)),_0x521795=fns[_0x3b8d81(0x24f)](fns['parseISO'](_0x292aef[_0x3b8d81(0x2c7)]),_0x3b8d81(0x29b));let _0x92bd8;if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x1f0)&&_0x1aa15a==![])_0x92bd8=_0x292aef[_0x3b8d81(0x204)];if(_0x292aef['side']==_0x3b8d81(0x1f0)&&_0x1aa15a==!![])_0x92bd8=-_0x292aef[_0x3b8d81(0x204)]*_0x292aef[_0x3b8d81(0x2f0)];if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x281)&&_0x1aa15a==![])_0x92bd8=-_0x292aef[_0x3b8d81(0x204)];if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x281)&&_0x1aa15a==!![])_0x92bd8=_0x292aef['amount']*_0x292aef['price'];_0x3eb136['push']({'timestamp':_0x2ffffd,'date':_0x521795,'coin':_0x4b3e57[_0x3b8d81(0x24c)],'symbol':_0x4b3e57[_0x3b8d81(0x243)],'type':_0x292aef[_0x3b8d81(0x270)],'side':_0x292aef[_0x3b8d81(0x203)],'reverse':_0x1aa15a,'amount':formatResult(_0x292aef[_0x3b8d81(0x23e)],0x8),'filled':formatResult(_0x292aef[_0x3b8d81(0x23e)],0x8),'coinamount':formatResult(_0x92bd8,0x8),'price':formatResult(_0x292aef['price'],0x8)});let _0xb43337;if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x1f0)&&_0x1aa15a==![])_0xb43337=-_0x292aef['amount']*_0x292aef[_0x3b8d81(0x2f0)];if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x1f0)&&_0x1aa15a==!![])_0xb43337=_0x292aef[_0x3b8d81(0x204)];if(_0x292aef[_0x3b8d81(0x203)]==_0x3b8d81(0x281)&&_0x1aa15a==![])_0xb43337=_0x292aef[_0x3b8d81(0x204)]*_0x292aef[_0x3b8d81(0x2f0)];if(_0x292aef[_0x3b8d81(0x203)]=='sell'&&_0x1aa15a==!![])_0xb43337=-_0x292aef[_0x3b8d81(0x204)];_0x3eb136['push']({'date':_0x521795,'coin':config[_0x3b8d81(0x2ee)],'coinamount':formatResult(_0xb43337,0x8)});});}_0x3eb136[_0x3b7cc2(0x2a3)]((_0x3566a5,_0x18a0fc)=>_0x3566a5[_0x3b7cc2(0x22c)]>_0x18a0fc[_0x3b7cc2(0x22c)]?0x1:_0x18a0fc['timestamp']>_0x3566a5['timestamp']?-0x1:0x0),dbLogs['get'](_0x3b7cc2(0x238))[_0x3b7cc2(0x1f4)]()[_0x3b7cc2(0x201)](),_0x3eb136[_0x3b7cc2(0x230)](_0x29352d=>{const _0xad2c43=_0x3b7cc2;let _0x2fd3b5;_0x29352d['coin']!=config['basecoin']&&(_0x2fd3b5={'time':_0x29352d[_0xad2c43(0x22c)],'type':_0xad2c43(0x250),'event':_0xad2c43(0x20b)+_0x29352d[_0xad2c43(0x243)]+'\x20'+_0x29352d[_0xad2c43(0x203)]+'\x20#'+_0x29352d[_0xad2c43(0x204)]+'\x20@'+_0x29352d['price']},dbLogs[_0xad2c43(0x2c9)](_0xad2c43(0x238))[_0xad2c43(0x26c)](_0x2fd3b5)[_0xad2c43(0x201)]());});const _0x5e5c09=fns[_0x3b7cc2(0x23d)]({'start':new Date(_0x4dd48d[_0x3b7cc2(0x2a4)]),'end':new Date()})['map'](_0x209dec=>fns[_0x3b7cc2(0x24f)](_0x209dec,_0x3b7cc2(0x29b)));let _0x5a3159=[];_0x4dd48d[_0x3b7cc2(0x2b3)]['forEach'](_0x2fd086=>{const _0x414d18=_0x3b7cc2;if(!_0x2fd086[_0x414d18(0x2e2)]){_0x5a3159[_0x2fd086[_0x414d18(0x24c)]]=[];let _0x11385a=_0x2fd086[_0x414d18(0x263)];_0x5e5c09['forEach']((_0x57c63a,_0x3029c3)=>{const _0x38dcd1=_0x414d18;let _0xae99eb=_0x3eb136[_0x38dcd1(0x210)](_0x33dbf9=>_0x33dbf9[_0x38dcd1(0x24c)]==_0x2fd086[_0x38dcd1(0x24c)]&&_0x33dbf9[_0x38dcd1(0x26f)]==_0x57c63a);if(_0xae99eb['length']!=0x0){let _0x48ebc7=_0xae99eb[_0x38dcd1(0x2ba)]((_0x3f1194,_0x5b00a1)=>{return _0x3f1194+=_0x5b00a1['coinamount'],_0x3f1194;},0x0);_0x11385a+=_0x48ebc7;}_0x5a3159[_0x2fd086[_0x38dcd1(0x24c)]][_0x57c63a]=_0x11385a;});}});const _0x185f98=[..._0x66f4f0];_0x185f98['push']({'coin':stablecoins[_0x3b7cc2(0x228)][_0x3b7cc2(0x24c)],'symbol':stablecoins['eur'][_0x3b7cc2(0x243)]}),_0x185f98[_0x3b7cc2(0x26c)]({'coin':stablecoins[_0x3b7cc2(0x298)][_0x3b7cc2(0x24c)],'symbol':stablecoins[_0x3b7cc2(0x298)][_0x3b7cc2(0x243)]});let _0xdfc6d6=[];for(const _0x3fc0f1 of _0x185f98){_0xdfc6d6[_0x3fc0f1[_0x3b7cc2(0x24c)]]=await getCloses(_0x3fc0f1[_0x3b7cc2(0x243)],new Date(_0x4dd48d['startdate']));}dbPerformance[_0x3b7cc2(0x2c9)](_0x3b7cc2(0x2f6))[_0x3b7cc2(0x1f4)]()[_0x3b7cc2(0x201)](),_0x5e5c09[_0x3b7cc2(0x230)]((_0x3c0748,_0x34c212)=>{const _0x18518b=_0x3b7cc2;let _0x34431f,_0x480692=[];_0x34c212==0x0?(_0x4dd48d[_0x18518b(0x2b3)]['forEach'](_0x381de8=>{const _0x18ce0a=_0x18518b;!_0x381de8[_0x18ce0a(0x2e2)]&&_0x480692[_0x18ce0a(0x26c)]({'coin':_0x381de8['coin'],'number':_0x381de8[_0x18ce0a(0x263)],'price':_0x381de8[_0x18ce0a(0x20c)]});}),_0x34431f={'date':_0x3c0748,'eur':_0xdfc6d6[stablecoins['eur'][_0x18518b(0x24c)]][_0x34c212],'usd':_0xdfc6d6[stablecoins[_0x18518b(0x298)][_0x18518b(0x24c)]][_0x34c212],'coins':_0x480692}):(_0x4dd48d[_0x18518b(0x2b3)][_0x18518b(0x230)](_0x3a0aa7=>{const _0x2cd52e=_0x18518b;!_0x3a0aa7[_0x2cd52e(0x2e2)]&&_0x480692[_0x2cd52e(0x26c)]({'coin':_0x3a0aa7[_0x2cd52e(0x24c)],'number':_0x5a3159[_0x3a0aa7[_0x2cd52e(0x24c)]][_0x3c0748],'price':_0x3a0aa7[_0x2cd52e(0x24c)]==config['basecoin']?0x1:_0xdfc6d6[_0x3a0aa7['coin']][_0x34c212]});}),_0x34431f={'date':_0x3c0748,'eur':_0xdfc6d6[stablecoins[_0x18518b(0x228)][_0x18518b(0x24c)]][_0x34c212],'usd':_0xdfc6d6[stablecoins[_0x18518b(0x298)][_0x18518b(0x24c)]][_0x34c212],'coins':_0x480692}),dbPerformance['get'](_0x18518b(0x2f6))[_0x18518b(0x26c)](_0x34431f)[_0x18518b(0x201)]();}),emitPerformance(),await resetCoinResults();for(let _0x4a9f84 of _0x3eb136){_0x4a9f84[_0x3b7cc2(0x24c)]!=config[_0x3b7cc2(0x2ee)]&&await updateCoinResults(_0x4a9f84);}logHistory(_0x3b7cc2(0x257),_0x3b7cc2(0x292));}catch(_0x28abee){await handleError(_0x28abee,'recreateHistory()');}}async function getCloses(_0x4afd4b,_0xea11e5,_0x44acff=undefined){const _0x3036dc=_0x227d3a,_0x301494='1d';let _0x2707c6,_0x33f33f;const _0x356320=fns[_0x3036dc(0x2af)](new Date(),_0xea11e5)+0x1;try{const _0xeec327=exchange[_0x3036dc(0x242)]()-_0x356320*0x18*0xe10*0x3e8;_0x2707c6=await exchange['fetchOHLCV'](_0x4afd4b,_0x301494,_0xeec327,_0x44acff),_0x33f33f=await exchange[_0x3036dc(0x303)](_0x4afd4b);}catch(_0x2d43ac){await handleError(_0x2d43ac,'getCloses()');}let _0x3fa89a=ohlcvToCloses(_0x2707c6);return _0x3fa89a[_0x3036dc(0x26c)](_0x33f33f[_0x4afd4b]['last']),_0x3fa89a;}function ohlcvToCloses(_0x1031c9){const _0x406b7b=_0x227d3a;let _0x2a1af2=[];return _0x1031c9[_0x406b7b(0x230)](function(_0x2fad47){const _0xef782e=_0x406b7b;_0x2a1af2[_0xef782e(0x26c)](_0x2fad47[0x4]);}),_0x2a1af2;}function getConfiguration(_0x5ca250){const _0x17eef4=_0x227d3a;let _0x144b77=dbConfig[_0x17eef4(0x2c9)]('bot')[_0x17eef4(0x215)]({'botID':_0x5ca250})[_0x17eef4(0x2f8)]();if(_0x144b77){let _0x46bb8c=![];!_0x144b77[_0x17eef4(0x300)]&&(_0x144b77={..._0x144b77,'exchange':_0x17eef4(0x2ae)},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x2ee)]&&(_0x144b77={..._0x144b77,'basecoin':_0x17eef4(0x2fa)},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x217)]&&(_0x144b77={..._0x144b77,'ordertype':_0x17eef4(0x2b5)},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x29c)]&&(_0x144b77={..._0x144b77,'timeout':0x14},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x2f9)]&&(_0x144b77={..._0x144b77,'emojibuy':''},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x2a2)]&&(_0x144b77={..._0x144b77,'emojisell':''},_0x46bb8c=!![]),!_0x144b77[_0x17eef4(0x274)]&&(_0x144b77={..._0x144b77,'showname':![]},_0x46bb8c=!![]),_0x46bb8c&&(_0x144b77={'botID':_0x144b77[_0x17eef4(0x284)],'exchange':_0x144b77[_0x17eef4(0x300)],'apiKey':_0x144b77[_0x17eef4(0x256)],'apiSecret':_0x144b77[_0x17eef4(0x295)],'basecoin':_0x144b77[_0x17eef4(0x2ee)],'botname':_0x144b77[_0x17eef4(0x2ce)],'showname':_0x144b77['showname'],'threshold':_0x144b77[_0x17eef4(0x2d4)],'ordertype':_0x144b77['ordertype'],'timeout':_0x144b77['timeout'],'startdate':_0x144b77[_0x17eef4(0x2a4)],'recreate':_0x144b77[_0x17eef4(0x241)],'timeshift':_0x144b77['timeshift'],'headless':_0x144b77[_0x17eef4(0x1f7)],'cooldown':_0x144b77[_0x17eef4(0x290)],'emojibuy':_0x144b77[_0x17eef4(0x2f9)],'emojisell':_0x144b77[_0x17eef4(0x2a2)],'portfolio':_0x144b77[_0x17eef4(0x2b3)]},dbConfig[_0x17eef4(0x2c9)](_0x17eef4(0x302))[_0x17eef4(0x1f4)]()[_0x17eef4(0x201)](),dbConfig['get'](_0x17eef4(0x302))[_0x17eef4(0x26c)](_0x144b77)['write']());}else _0x144b77={'botID':_0x5ca250,'exchange':_0x17eef4(0x2ae),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x17eef4(0x28a)+_0x5ca250,'showname':![],'threshold':'3','ordertype':_0x17eef4(0x2b5),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x144b77;}function emittedConfiguration(){const _0x381201=_0x227d3a;let _0x1d159f;return config[_0x381201(0x256)]==''?_0x1d159f=config:_0x1d159f={...config,'apiKey':_0x381201(0x26d),'apiSecret':_0x381201(0x26d)},_0x1d159f;}function getSettings(){return dbSettings['get']('settings')['value']();}function getSecure(){const _0x1fc602=_0x227d3a;return dbSecure[_0x1fc602(0x2c9)](_0x1fc602(0x235))['value']()||{};}function updateTimeshift(_0x208416){const _0x4bf4e2=_0x227d3a;let _0x33b9a6=dbConfig[_0x4bf4e2(0x2c9)](_0x4bf4e2(0x302))['find']({'botID':botID})[_0x4bf4e2(0x2f8)]();_0x33b9a6&&dbConfig[_0x4bf4e2(0x2c9)](_0x4bf4e2(0x302))[_0x4bf4e2(0x215)]({'botID':botID})['assign']({'timeshift':_0x208416})[_0x4bf4e2(0x201)](),config[_0x4bf4e2(0x239)]=_0x208416,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x79227e){const _0x582352=_0x227d3a;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x4f6bfb=dbConfig[_0x582352(0x2c9)](_0x582352(0x302))[_0x582352(0x215)]({'botID':botID})[_0x582352(0x2f8)]();_0x79227e={..._0x79227e,'apiKey':crypt[_0x582352(0x22f)](secure[_0x582352(0x1fe)],_0x79227e['apiKey'])[_0x582352(0x222)],'apiSecret':crypt[_0x582352(0x22f)](secure['privateKey'],_0x79227e['apiSecret'])[_0x582352(0x222)]};if(_0x4f6bfb){if(_0x79227e[_0x582352(0x256)]==_0x582352(0x26d))_0x79227e[_0x582352(0x256)]=config[_0x582352(0x256)];if(_0x79227e[_0x582352(0x295)]=='************')_0x79227e[_0x582352(0x295)]=config['apiSecret'];dbConfig[_0x582352(0x2c9)](_0x582352(0x302))[_0x582352(0x215)]({'botID':botID})['assign'](_0x79227e)['write']();}else dbConfig[_0x582352(0x2c9)](_0x582352(0x302))['push'](_0x79227e)[_0x582352(0x201)](),process[_0x582352(0x29f)]({'status':_0x582352(0x233),'live':_0x582352(0x25e)});config={..._0x79227e};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x582352(0x29f)]({'botname':_0x79227e[_0x582352(0x2ce)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x5f2a44){const _0x296614=_0x227d3a,_0x3391a3={...config,'headless':_0x5f2a44[_0x296614(0x1f7)]};let _0x3193b0=dbConfig[_0x296614(0x2c9)]('bot')[_0x296614(0x215)]({'botID':botID})[_0x296614(0x2f8)]();_0x3193b0&&dbConfig[_0x296614(0x2c9)](_0x296614(0x302))[_0x296614(0x215)]({'botID':botID})[_0x296614(0x2c2)](_0x3391a3)[_0x296614(0x201)](),config={..._0x3391a3},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x39a1e5){const _0x4e0b5b=_0x227d3a;return _0x39a1e5[_0x4e0b5b(0x240)]('/','');}function updateNumberCoins(_0x1f8545){const _0x5a3d89=_0x227d3a;_0x1f8545[_0x5a3d89(0x2b1)]&&_0x1f8545[_0x5a3d89(0x2b1)]==_0x5a3d89(0x236)&&_0x1f8545[_0x5a3d89(0x2a5)]['forEach'](_0x4cff81=>{const _0x2c24bc=_0x5a3d89;let _0x3974fb=currentCoins[_0x2c24bc(0x215)](_0x1487a2=>_0x1487a2[_0x2c24bc(0x24c)]==_0x4cff81[_0x2c24bc(0x2b7)]),_0x14a029=config[_0x2c24bc(0x2b3)][_0x2c24bc(0x215)](_0x3ce6c0=>_0x3ce6c0['coin']==_0x4cff81['asset']);if(_0x3974fb&&_0x14a029)_0x3974fb[_0x2c24bc(0x266)]=Math[_0x2c24bc(0x24a)](Number(_0x4cff81[_0x2c24bc(0x2cc)])+(_0x14a029[_0x2c24bc(0x289)]||0x0),0x0);});if(_0x1f8545['eventType']&&_0x1f8545[_0x5a3d89(0x2b1)]==_0x5a3d89(0x2e8)){if(_0x1f8545['orderType']==_0x5a3d89(0x248)&&_0x1f8545[_0x5a3d89(0x2a8)]==_0x5a3d89(0x2b2)){if(lastOrders)lastOrders[_0x5a3d89(0x230)](_0x3c611c=>{const _0x1ec361=_0x5a3d89;if(_0x3c611c[_0x1ec361(0x237)]==_0x1f8545[_0x1ec361(0x237)]){if(_0x3c611c[_0x1ec361(0x260)])_0x3c611c[_0x1ec361(0x23e)]=_0x1f8545[_0x1ec361(0x2b8)]*_0x3c611c[_0x1ec361(0x2f0)];else _0x3c611c[_0x1ec361(0x23e)]=_0x1f8545[_0x1ec361(0x2b8)];}});}}}async function getCoins(_0x49707f=!![],_0x23fc75=config[_0x227d3a(0x2ee)]){const _0x2bfa5b=_0x227d3a;let _0x4923c3,_0x5ae106=[],_0x6d4b9=[],_0x3cf5f6=[];try{_0x4923c3=await exchange[_0x2bfa5b(0x2c5)](),mybalances=_0x4923c3['total'];if(!_0x49707f)for(const [_0x1d1e35,_0x27c145]of Object[_0x2bfa5b(0x1f6)](mybalances)){_0x3cf5f6[_0x2bfa5b(0x26c)](_0x1d1e35);}else config[_0x2bfa5b(0x2b3)][_0x2bfa5b(0x230)](_0x37ad65=>{const _0x14c626=_0x2bfa5b;if(!_0x37ad65['excluded'])_0x3cf5f6[_0x14c626(0x26c)](_0x37ad65['coin']);});if(_0x23fc75=='')for(const [_0x37c60f,_0x517217]of Object[_0x2bfa5b(0x1f6)](mybalances)){_0x517217['toString']()!=0x0&&_0x6d4b9[_0x2bfa5b(0x26c)]({'coin':_0x37c60f});}else for(const [_0x6da5a6,_0x54dd37]of Object[_0x2bfa5b(0x1f6)](mybalances)){if(_0x3cf5f6[_0x2bfa5b(0x21e)](_0x6da5a6)){const _0x417fb3=config['portfolio'][_0x2bfa5b(0x215)](_0x146a46=>_0x146a46[_0x2bfa5b(0x24c)]==_0x6da5a6);if((_0x54dd37[_0x2bfa5b(0x249)]()!=0x0||_0x417fb3)&&(allSymbols['includes'](_0x6da5a6+'/'+_0x23fc75)||_0x6da5a6==_0x23fc75))_0x6d4b9[_0x2bfa5b(0x26c)]({'coin':_0x6da5a6,'symbol':_0x6da5a6+'/'+_0x23fc75,'reverse':![],'number':Math['max'](_0x54dd37+(_0x417fb3&&_0x417fb3[_0x2bfa5b(0x289)]||0x0),0x0)}),_0x6da5a6!=_0x23fc75&&_0x5ae106[_0x2bfa5b(0x26c)](_0x6da5a6+'/'+_0x23fc75);else(_0x54dd37[_0x2bfa5b(0x249)]()!=0x0||_0x417fb3)&&allSymbols[_0x2bfa5b(0x21e)](_0x23fc75+'/'+_0x6da5a6)&&(_0x6d4b9[_0x2bfa5b(0x26c)]({'coin':_0x6da5a6,'symbol':_0x23fc75+'/'+_0x6da5a6,'reverse':!![],'number':Math[_0x2bfa5b(0x24a)](_0x54dd37+(_0x417fb3&&_0x417fb3[_0x2bfa5b(0x289)]||0x0),0x0)}),_0x6da5a6!=_0x23fc75&&_0x5ae106[_0x2bfa5b(0x26c)](_0x23fc75+'/'+_0x6da5a6));}}}catch(_0x28e789){if(!_0x49707f){if(_0x28e789[_0x2bfa5b(0x249)]()[_0x2bfa5b(0x21e)](_0x2bfa5b(0x27e)))return logHistory(_0x2bfa5b(0x2ca),_0x2bfa5b(0x208)),![];else{if(_0x28e789[_0x2bfa5b(0x249)]()[_0x2bfa5b(0x21e)]('AuthenticationError'))return logHistory(_0x2bfa5b(0x2ca),_0x2bfa5b(0x218)),![];else{if(_0x28e789[_0x2bfa5b(0x249)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory('error',_0x2bfa5b(0x213)),![];else await handleError(_0x28e789,_0x2bfa5b(0x2ec));}}}else await handleError(_0x28e789,_0x2bfa5b(0x2ec));}return _0x6d4b9;}async function getPortfolio(_0x3af5c4){const _0x5954b0=_0x227d3a;let _0x26325a=[],_0xf6961d=[],_0x2dd8d1,_0x6a7fbb=[],_0x49ab31,_0x50ab06;_0x3af5c4[_0x5954b0(0x256)]===_0x5954b0(0x26d)||_0x3af5c4['apiSecret']===_0x5954b0(0x26d)?(_0x49ab31=config[_0x5954b0(0x256)],_0x50ab06=config['apiSecret']):(_0x49ab31=_0x3af5c4[_0x5954b0(0x256)],_0x50ab06=_0x3af5c4[_0x5954b0(0x295)]);await initExchange(_0x49ab31,_0x50ab06);let _0x52c7c2=await loadSymbols();if(_0x52c7c2){_0x6a7fbb=await getCoins(![],_0x3af5c4['basecoin']);if(_0x6a7fbb===![])proxyEmit(_0x5954b0(0x2b3),![]);else{if(_0x3af5c4[_0x5954b0(0x2ee)]=='')proxyEmit(_0x5954b0(0x2b3),_0x6a7fbb);else{_0x6a7fbb[_0x5954b0(0x230)](_0x51a69d=>{const _0x3d3e57=_0x5954b0;_0x26325a[_0x3d3e57(0x26c)](_0x51a69d[_0x3d3e57(0x243)]);});try{_0xf6961d=await exchange[_0x5954b0(0x303)](_0x26325a);}catch(_0xd1cf8){await handleError(_0xd1cf8,_0x5954b0(0x2f4));}_0x6a7fbb[_0x5954b0(0x230)](_0x220eab=>{const _0x344811=_0x5954b0;_0x220eab['coin']!=_0x3af5c4[_0x344811(0x2ee)]?_0x2dd8d1=_0x220eab[_0x344811(0x260)]?0x1/_0xf6961d[_0x220eab[_0x344811(0x243)]][_0x344811(0x25d)]:_0xf6961d[_0x220eab[_0x344811(0x243)]][_0x344811(0x25d)]:_0x2dd8d1=0x1,_0x220eab[_0x344811(0x2f0)]=formatResult(_0x2dd8d1,0x8);}),proxyEmit('portfolio',_0x6a7fbb);}}}else proxyEmit(_0x5954b0(0x2b3),![]);}function checkMinimums(_0x27d821){const _0x3fc0c0=_0x227d3a;let _0x1a5632=!![];const _0x1d6661=!_0x27d821['reverse']?markets[_0x27d821[_0x3fc0c0(0x243)]][_0x3fc0c0(0x1f8)][_0x3fc0c0(0x204)]['min']:markets[_0x27d821[_0x3fc0c0(0x243)]][_0x3fc0c0(0x1f8)][_0x3fc0c0(0x296)]['min'],_0x4afc5e=!_0x27d821['reverse']?markets[_0x27d821[_0x3fc0c0(0x243)]]['limits'][_0x3fc0c0(0x296)]['min']:markets[_0x27d821['symbol']][_0x3fc0c0(0x1f8)][_0x3fc0c0(0x204)]['min'];if(Math[_0x3fc0c0(0x2c4)](_0x27d821[_0x3fc0c0(0x2d8)])<_0x1d6661)_0x1a5632=![];if(Math[_0x3fc0c0(0x2c4)](_0x27d821[_0x3fc0c0(0x2d8)])*_0x27d821['last']<_0x4afc5e)_0x1a5632=![];return _0x1a5632;}async function getBalances(){const _0x33ad0b=_0x227d3a;let _0x4f74f2=0x0,_0x5dadb4;const _0x17bf33=config[_0x33ad0b(0x2d4)];currentCoins[_0x33ad0b(0x230)](_0x3d088d=>{const _0xddb945=_0x33ad0b;if(_0x3d088d['coin']!=config[_0xddb945(0x2ee)]){let _0xb1047=global[_0xddb945(0x251)][noslash(_0x3d088d['symbol'])];_0x5dadb4=_0x3d088d['reverse']?0x1/_0xb1047:_0xb1047;}else _0x5dadb4=0x1;let _0x56276d=_0x3d088d[_0xddb945(0x266)]*_0x5dadb4;_0x4f74f2+=_0x56276d,_0x3d088d[_0xddb945(0x25d)]=formatResult(Number(_0x5dadb4),0x8),_0x3d088d[_0xddb945(0x2f8)]=_0x56276d;}),currentCoins['forEach'](_0x3ff693=>{const _0x48e78b=_0x33ad0b;let _0x4b3948=config[_0x48e78b(0x2b3)]['find'](_0x4cb59d=>_0x4cb59d[_0x48e78b(0x24c)]==_0x3ff693['coin']),_0x2f104b=Number(_0x4b3948['distribution']),_0x391fe7=_0x3ff693[_0x48e78b(0x2f8)]/_0x4f74f2*0x64,_0x5d09c0=_0x2f104b*_0x4f74f2/0x64/_0x3ff693['last']-_0x3ff693[_0x48e78b(0x266)];_0x3ff693[_0x48e78b(0x21c)]=formatResult(_0x391fe7,0x3),_0x3ff693['target']=formatResult(_0x2f104b,0x3),_0x3ff693[_0x48e78b(0x2d8)]=formatResult(_0x5d09c0,0x8),_0x3ff693[_0x48e78b(0x203)]='',_0x3ff693['valid']='';if(_0x3ff693[_0x48e78b(0x24c)]!=config[_0x48e78b(0x2ee)]){if(_0x3ff693[_0x48e78b(0x21c)]>_0x2f104b)_0x3ff693[_0x48e78b(0x203)]=_0x48e78b(0x281),_0x3ff693[_0x48e78b(0x21a)]=checkMinimums(_0x3ff693);else _0x3ff693[_0x48e78b(0x21c)]<_0x2f104b&&(_0x3ff693[_0x48e78b(0x203)]=_0x48e78b(0x1f0),_0x3ff693[_0x48e78b(0x21a)]=checkMinimums(_0x3ff693));}_0x3ff693[_0x48e78b(0x267)]=_0x3ff693[_0x48e78b(0x21c)]/_0x3ff693[_0x48e78b(0x23b)]-0x1;}),currentCoins[_0x33ad0b(0x2a3)]((_0x5e2970,_0x43df02)=>_0x5e2970['delta']<_0x43df02[_0x33ad0b(0x267)]?0x1:_0x43df02['delta']<_0x5e2970[_0x33ad0b(0x267)]?-0x1:0x0);const _0x3a7a0d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3a7a0d[_0x33ad0b(0x228)],'usd':_0x3a7a0d[_0x33ad0b(0x298)],'portfolio':JSON[_0x33ad0b(0x25f)](currentCoins),'threshold':_0x17bf33},proxyEmit(_0x33ad0b(0x2a5),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x33ad0b(0x1f7)])headlessMode({'portfolio':currentCoins,'threshold':_0x17bf33});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x4e93da=_0x227d3a;if(!lastBalances)return;let _0xda4f8a=await getStartingBalances(![]),_0x51d0f1=[],_0x2cb1e1;JSON['parse'](lastBalances[_0x4e93da(0x2b3)])[_0x4e93da(0x230)](_0x1f1d84=>{const _0x591f90=_0x4e93da;let _0x3d558e={'coin':_0x1f1d84[_0x591f90(0x24c)],'number':_0x1f1d84[_0x591f90(0x266)],'price':_0x1f1d84[_0x591f90(0x25d)]};_0x51d0f1[_0x591f90(0x26c)](_0x3d558e);});const _0x55760c=await getFiat();_0x2cb1e1={'date':lastBalances[_0x4e93da(0x22d)]['split']('\x20')[0x0],'eur':_0x55760c[_0x4e93da(0x228)],'usd':_0x55760c[_0x4e93da(0x298)],'coins':_0x51d0f1};let _0x368911=dbPerformance[_0x4e93da(0x2c9)](_0x4e93da(0x2f6))[_0x4e93da(0x215)]({'date':_0x2cb1e1[_0x4e93da(0x26f)]})['value']();_0x368911?dbPerformance[_0x4e93da(0x2c9)](_0x4e93da(0x2f6))[_0x4e93da(0x215)]({'date':_0x2cb1e1[_0x4e93da(0x26f)]})[_0x4e93da(0x2c2)](_0x2cb1e1)[_0x4e93da(0x201)]():dbPerformance['get'](_0x4e93da(0x2f6))[_0x4e93da(0x26c)](_0x2cb1e1)['write'](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x167b67=_0x227d3a;if(dbPerformance[_0x167b67(0x2db)](_0x167b67(0x2f6))[_0x167b67(0x2f8)]()){let _0x48c9c8=dbPerformance[_0x167b67(0x2c9)](_0x167b67(0x2f6))['sortBy'](_0x167b67(0x26f))[_0x167b67(0x2f8)]();proxyEmit(_0x167b67(0x269),_0x48c9c8),lastPerformanceEmitted=getDate();}else proxyEmit(_0x167b67(0x269),[]);}async function getStartingBalances(_0x47b61b=!![]){const _0x342879=_0x227d3a;let _0x16809b=dbPerformance[_0x342879(0x2c9)]('data')[_0x342879(0x215)]({'date':config['startdate']})['value']();config[_0x342879(0x256)]!=''&&!_0x16809b&&(await setStartDatePerformance(config),_0x16809b=dbPerformance[_0x342879(0x2c9)](_0x342879(0x2f6))[_0x342879(0x215)]({'date':config[_0x342879(0x2a4)]})[_0x342879(0x2f8)]());if(config[_0x342879(0x256)]==''||!_0x16809b)return{};let _0x361d3f=0x0,_0x23f2f4=0x0,_0x569d08=0x0,_0x4662e6=[],_0x1e53d4=0x0;config[_0x342879(0x2b3)]['forEach'](_0x263eca=>{const _0x37494f=_0x342879;if(!_0x263eca[_0x37494f(0x2e2)]){_0x4662e6[_0x1e53d4]={'coin':_0x263eca[_0x37494f(0x24c)],'symbol':_0x263eca[_0x37494f(0x243)],'number':_0x263eca[_0x37494f(0x263)],'price':_0x263eca[_0x37494f(0x20c)]},_0x361d3f+=_0x263eca[_0x37494f(0x20c)]*_0x263eca['startnumber'];if(config[_0x37494f(0x2ee)]==_0x37494f(0x2fa))_0x23f2f4+=_0x263eca[_0x37494f(0x20c)]*_0x263eca[_0x37494f(0x263)]*_0x16809b[_0x37494f(0x228)],_0x569d08+=_0x263eca[_0x37494f(0x20c)]*_0x263eca[_0x37494f(0x263)]*_0x16809b[_0x37494f(0x298)];else{if(config[_0x37494f(0x2ee)]==_0x37494f(0x279)||config['basecoin']==_0x37494f(0x2d9)||config['basecoin']==_0x37494f(0x2ab))_0x23f2f4+=_0x263eca[_0x37494f(0x20c)]*_0x263eca[_0x37494f(0x263)]*_0x16809b[_0x37494f(0x228)]/_0x16809b[_0x37494f(0x298)],_0x569d08+=_0x263eca['startprice']*_0x263eca[_0x37494f(0x263)];else config[_0x37494f(0x2ee)]==_0x37494f(0x24d)&&(_0x23f2f4+=_0x263eca[_0x37494f(0x20c)]*_0x263eca['startnumber'],_0x569d08+=_0x263eca[_0x37494f(0x20c)]*_0x263eca[_0x37494f(0x263)]*_0x16809b[_0x37494f(0x298)]/_0x16809b['eur']);}_0x1e53d4++;}});let _0x317a0e={'basecoin':_0x361d3f,'eur':_0x23f2f4,'usd':_0x569d08,'coins':_0x4662e6};if(_0x47b61b)proxyEmit(_0x342879(0x2a0),_0x317a0e);return _0x317a0e;}function headlessMode(_0x1b629a){const _0x325d92=_0x227d3a;let _0x16f836=_0x1b629a[_0x325d92(0x2b3)],_0x3f8bda=_0x1b629a[_0x325d92(0x2d4)],_0x5ec721=[];for(let _0x382c6a of _0x16f836){if(_0x382c6a[_0x325d92(0x24c)]!=config[_0x325d92(0x2ee)]){if(_0x382c6a[_0x325d92(0x21c)]/_0x382c6a[_0x325d92(0x23b)]-0x1>=_0x3f8bda/0x64){if(_0x382c6a[_0x325d92(0x21a)])_0x5ec721[_0x325d92(0x26c)](_0x382c6a);}else{if(_0x382c6a[_0x325d92(0x21c)]/_0x382c6a[_0x325d92(0x23b)]-0x1<=-_0x3f8bda/0x64){if(_0x382c6a[_0x325d92(0x21a)])_0x5ec721[_0x325d92(0x26c)](_0x382c6a);}}}}_0x5ec721['length']>0x0&&placeOrder(_0x5ec721);}function symbolToCoin(_0x2881e2){const _0x1ee29d=_0x227d3a;let _0x3bdac;if(_0x2881e2[_0x1ee29d(0x21e)]('/'+config[_0x1ee29d(0x2ee)]))_0x3bdac=_0x2881e2[_0x1ee29d(0x240)]('/'+config['basecoin'],'');if(_0x2881e2[_0x1ee29d(0x21e)](config[_0x1ee29d(0x2ee)]+'/'))_0x3bdac=_0x2881e2[_0x1ee29d(0x240)](config[_0x1ee29d(0x2ee)]+'/','');return _0x3bdac;}async function validateOrders(_0x4e9e42=0x0){const _0x904aa8=_0x227d3a;let _0x3fb546=[],_0x4b5e71=config[_0x904aa8(0x217)]==_0x904aa8(0x2b5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x904aa8(0x230)](_0x378c8b=>{const _0x27ac94=_0x904aa8;let _0x1bb4af=previousCoins[_0x27ac94(0x215)](_0x1d1f6e=>_0x1d1f6e['coin']==symbolToCoin(_0x378c8b[_0x27ac94(0x243)])),_0x40debb=currentCoins[_0x27ac94(0x215)](_0x292683=>_0x292683[_0x27ac94(0x24c)]==symbolToCoin(_0x378c8b[_0x27ac94(0x243)])),_0x110569,_0x18aa6f;_0x378c8b[_0x27ac94(0x203)]=='buy'&&!_0x378c8b[_0x27ac94(0x260)]||_0x378c8b[_0x27ac94(0x203)]==_0x27ac94(0x281)&&_0x378c8b[_0x27ac94(0x260)]?(_0x110569=_0x1bb4af[_0x27ac94(0x266)]+0.9*_0x378c8b[_0x27ac94(0x23e)],_0x18aa6f=_0x1bb4af[_0x27ac94(0x266)]+1.1*_0x378c8b[_0x27ac94(0x23e)]):(_0x110569=_0x1bb4af[_0x27ac94(0x266)]-1.1*_0x378c8b['filled'],_0x18aa6f=_0x1bb4af['number']-0.9*_0x378c8b['filled']);const _0x559ce6=_0x378c8b[_0x27ac94(0x23e)]!=0x0&&_0x40debb['number']>=_0x110569&&_0x40debb['number']<=_0x18aa6f;_0x3fb546[_0x27ac94(0x26c)](_0x559ce6);if(_0x559ce6&&config[_0x27ac94(0x217)]!=_0x27ac94(0x2b5)){if(_0x378c8b[_0x27ac94(0x260)])logHistory(_0x27ac94(0x250),_0x27ac94(0x265)+_0x378c8b['symbol']+'\x20'+_0x378c8b['side']+'\x20#'+formatResult(_0x378c8b['filled']/_0x378c8b[_0x27ac94(0x2f0)],0x8)+'\x20@'+formatResult(_0x378c8b[_0x27ac94(0x2f0)],0x8));else logHistory(_0x27ac94(0x250),_0x27ac94(0x265)+_0x378c8b[_0x27ac94(0x243)]+'\x20'+_0x378c8b[_0x27ac94(0x203)]+'\x20#'+formatResult(_0x378c8b[_0x27ac94(0x23e)],0x8)+'\x20@'+formatResult(_0x378c8b[_0x27ac94(0x2f0)],0x8));}}),_0x3fb546['forEach']((_0x109e23,_0x22176b)=>{const _0x4e72c6=_0x904aa8;if(_0x109e23)lastOrders[_0x4e72c6(0x2b6)](_0x22176b,0x1);});if(_0x4e9e42<_0x4b5e71&&_0x3fb546['includes'](![])){if(_0x4e9e42==0x0){config[_0x904aa8(0x217)]==_0x904aa8(0x2b5)?logHistory(_0x904aa8(0x2ca),_0x904aa8(0x2fe)):logHistory(_0x904aa8(0x2ca),_0x904aa8(0x2bb));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4e9e42);},0xa*0x3e8);}else{(_0x4e9e42==0x1||_0x4e9e42==Math['round'](_0x4b5e71/0x2)||_0x4e9e42==_0x4b5e71-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4e9e42);},validateOrderInterval);}}else{lockOrders=![];if(_0x4e9e42>0x0&&!_0x3fb546[_0x904aa8(0x21e)](![]))config[_0x904aa8(0x217)]=='market'?logHistory(_0x904aa8(0x257),_0x904aa8(0x307)):logHistory('success',_0x904aa8(0x2d2));else _0x4e9e42>0x0&&_0x3fb546[_0x904aa8(0x21e)](![])&&(config[_0x904aa8(0x217)]==_0x904aa8(0x2b5)?logHistory('success',_0x904aa8(0x25b)+Math['round'](_0x4b5e71*validateOrderInterval/0xea60)+_0x904aa8(0x2c1)):(lastOrders[_0x904aa8(0x230)](async _0x1e82ba=>{const _0x37a034=_0x904aa8;try{const _0x13ed3d=await exchange[_0x37a034(0x25c)](_0x1e82ba[_0x37a034(0x237)],_0x1e82ba[_0x37a034(0x243)]);}catch(_0x3965ee){if(_0x3965ee[_0x37a034(0x249)]()[_0x37a034(0x21e)](_0x37a034(0x2ac))){}else await handleError(_0x3965ee,'cancelOrder()');}}),logHistory(_0x904aa8(0x257),_0x904aa8(0x1fc)+Math[_0x904aa8(0x2e1)](_0x4b5e71*validateOrderInterval/0xea60)+_0x904aa8(0x2c1))));}}async function resetCoinResults(){const _0x1287ee=_0x227d3a;dbCoinResults[_0x1287ee(0x2c9)](_0x1287ee(0x2da))['remove']()[_0x1287ee(0x201)]();let _0xd8ce17=await getStartingBalances(![]);_0xd8ce17['coins'][_0x1287ee(0x230)](_0x2078a1=>{const _0x379988=_0x1287ee,_0x59d5af=_0x2078a1[_0x379988(0x243)]['includes'](config[_0x379988(0x2ee)]+'/');if(_0x2078a1[_0x379988(0x24c)]!=config['basecoin']){let _0x40ca96={'coin':_0x2078a1[_0x379988(0x24c)],'number':_0x2078a1['number'],'breakeven':_0x2078a1[_0x379988(0x2f0)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x379988(0x2c9)](_0x379988(0x2da))[_0x379988(0x26c)](_0x40ca96)['write']();}});}async function updateCoinResults(_0x3651b3){const _0x56528a=_0x227d3a;let _0x9a2e5e,_0x468905,_0x571d9b,_0x169d3d,_0x54be58,_0x208fe4,_0x56881b=dbCoinResults['get'](_0x56528a(0x2da))[_0x56528a(0x215)]({'coin':_0x3651b3[_0x56528a(0x24c)]})[_0x56528a(0x2f8)]();if(!_0x56881b)return;if(_0x3651b3[_0x56528a(0x2d0)]&&_0x3651b3['fee'][_0x56528a(0x205)]==config[_0x56528a(0x2ee)])_0x9a2e5e=_0x3651b3[_0x56528a(0x2d0)]['cost'];else{if(_0x3651b3[_0x56528a(0x2d0)]&&_0x3651b3[_0x56528a(0x2d0)][_0x56528a(0x205)]==_0x56528a(0x2d7))_0x9a2e5e=_0x3651b3['fee'][_0x56528a(0x296)]*global[_0x56528a(0x251)]['BNB'+config['basecoin']];else _0x9a2e5e=0.001*_0x3651b3[_0x56528a(0x23e)];}const _0x1537b1=_0x3651b3[_0x56528a(0x243)]['includes'](config['basecoin']+'/');_0x1537b1&&(_0x208fe4={'coin':_0x3651b3[_0x56528a(0x24c)],'symbol':_0x3651b3['symbol'],'filled':_0x3651b3[_0x56528a(0x23e)]*_0x3651b3['price'],'side':_0x3651b3[_0x56528a(0x203)]==_0x56528a(0x281)?'buy':_0x56528a(0x281),'price':0x1/_0x3651b3[_0x56528a(0x2f0)]},_0x3651b3={..._0x208fe4});_0x3651b3['side']=='buy'?_0x571d9b=(_0x56881b[_0x56528a(0x226)]*_0x56881b[_0x56528a(0x266)]+_0x3651b3[_0x56528a(0x2f0)]*_0x3651b3['filled'])/(_0x56881b[_0x56528a(0x266)]+_0x3651b3[_0x56528a(0x23e)]):_0x571d9b=(_0x56881b[_0x56528a(0x226)]*_0x56881b[_0x56528a(0x266)]-_0x3651b3[_0x56528a(0x2f0)]*_0x3651b3[_0x56528a(0x23e)])/(_0x56881b[_0x56528a(0x266)]-_0x3651b3[_0x56528a(0x23e)]);_0x3651b3['side']=='buy'?_0x169d3d=_0x56881b[_0x56528a(0x277)]:_0x169d3d=_0x56881b[_0x56528a(0x277)]+(_0x3651b3['price']-_0x56881b[_0x56528a(0x226)])*_0x3651b3[_0x56528a(0x23e)];_0x468905=_0x3651b3[_0x56528a(0x203)]==_0x56528a(0x281)?_0x56881b['number']-_0x3651b3[_0x56528a(0x23e)]:_0x56881b['number']+_0x3651b3[_0x56528a(0x23e)],_0x54be58=(_0x3651b3[_0x56528a(0x2f0)]-_0x571d9b)*_0x468905;let _0x45486e={'coin':_0x3651b3['coin'],'number':_0x468905,'breakeven':formatResult(_0x571d9b,0x8),'realized':formatResult(_0x169d3d,0x8),'unrealized':formatResult(_0x54be58,0x8),'fees':formatResult(_0x56881b[_0x56528a(0x2dc)]+_0x9a2e5e,0x8),'sells':_0x3651b3[_0x56528a(0x203)]==_0x56528a(0x281)?_0x56881b[_0x56528a(0x2c0)]+0x1:_0x56881b[_0x56528a(0x2c0)],'buys':_0x3651b3['side']=='buy'?_0x56881b[_0x56528a(0x20e)]+0x1:_0x56881b[_0x56528a(0x20e)]};dbCoinResults[_0x56528a(0x2c9)](_0x56528a(0x2da))[_0x56528a(0x215)]({'coin':_0x3651b3[_0x56528a(0x24c)]})[_0x56528a(0x2c2)](_0x45486e)['write']();}async function placeOrder(_0x1e12ab){const _0x18eb34=_0x227d3a,_0x4e11ab=config['ordertype']=='market'?_0x18eb34(0x2b5):_0x18eb34(0x2bd);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x18eb34(0x2a7)](JSON['stringify'](currentCoins));for(const _0x302126 of _0x1e12ab){let _0x32a470,_0x104800,_0x24e132,_0x15d133,_0x19ed8a,_0x4a6747=_0x302126[_0x18eb34(0x243)];try{const _0x4ab16f=await exchange['fetchTickers'](_0x4a6747),_0x3eb425=_0x4ab16f[_0x4a6747];_0x32a470=_0x3eb425[_0x18eb34(0x25d)],_0x104800=_0x3eb425[_0x18eb34(0x286)],_0x24e132=_0x3eb425[_0x18eb34(0x2e0)];_0x302126['reverse']?(_0x15d133=_0x302126['side']==_0x18eb34(0x1f0)?_0x18eb34(0x281):_0x18eb34(0x1f0),_0x19ed8a=Math[_0x18eb34(0x2c4)](_0x302126['trade'])/_0x32a470):(_0x15d133=_0x302126[_0x18eb34(0x203)],_0x19ed8a=Math['abs'](_0x302126[_0x18eb34(0x2d8)]));_0x4e11ab==_0x18eb34(0x2bd)&&(config['ordertype']==_0x18eb34(0x28c)&&(_0x32a470=_0x15d133==_0x18eb34(0x1f0)?_0x104800:_0x24e132),config[_0x18eb34(0x217)]==_0x18eb34(0x272)&&(_0x32a470=_0x15d133==_0x18eb34(0x1f0)?_0x24e132:_0x104800));_0x19ed8a=formatResult(_0x19ed8a,0x8),_0x32a470=formatResult(_0x32a470,0x8);const _0x1097a4=await exchange[_0x18eb34(0x264)](_0x4a6747,_0x4e11ab,_0x15d133,_0x19ed8a,_0x32a470);lastOrders[_0x18eb34(0x26c)]({'orderId':_0x1097a4['id'],'symbol':_0x4a6747,'side':_0x15d133,'reverse':_0x302126[_0x18eb34(0x260)],'amount':_0x302126[_0x18eb34(0x260)]?_0x1097a4['amount']*_0x1097a4[_0x18eb34(0x2f0)]:_0x1097a4[_0x18eb34(0x204)],'filled':_0x302126['reverse']?_0x1097a4[_0x18eb34(0x23e)]*_0x1097a4[_0x18eb34(0x2f0)]:_0x1097a4['filled'],'price':_0x1097a4[_0x18eb34(0x2f0)]});const _0x11bf8a=_0x15d133==_0x18eb34(0x281)?config['emojisell']?String[_0x18eb34(0x255)]('0x'+config[_0x18eb34(0x2a2)])+'\x20':'':config[_0x18eb34(0x2f9)]?String[_0x18eb34(0x255)]('0x'+config[_0x18eb34(0x2f9)])+'\x20':'',_0x469fc5=_0x4e11ab=='market'?_0x18eb34(0x27b):config[_0x18eb34(0x217)]==_0x18eb34(0x28c)?_0x18eb34(0x2f1):_0x18eb34(0x24e);if(_0x4e11ab==_0x18eb34(0x2b5))logHistory(_0x18eb34(0x250),''+_0x11bf8a+_0x469fc5+_0x18eb34(0x2b0)+_0x4a6747+'\x20'+_0x15d133+'\x20#'+formatResult(_0x1097a4[_0x18eb34(0x23e)],0x8)+'\x20@'+formatResult(_0x1097a4[_0x18eb34(0x2f0)],0x8));else logHistory(_0x18eb34(0x250),''+_0x11bf8a+_0x469fc5+_0x18eb34(0x2b0)+_0x4a6747+'\x20'+_0x15d133+'\x20#'+formatResult(_0x1097a4[_0x18eb34(0x204)],0x8)+'\x20@'+formatResult(_0x1097a4[_0x18eb34(0x2f0)],0x8));_0x1097a4[_0x18eb34(0x24c)]=_0x302126[_0x18eb34(0x24c)],await updateCoinResults(_0x1097a4);if(config[_0x18eb34(0x290)]!=0x0){let _0x34afe3=null;if(cooldownTracker[_0x18eb34(0x27d)]==config[_0x18eb34(0x290)]-0x1)_0x34afe3=cooldownTracker[_0x18eb34(0x2ea)]();const _0x7e5454=getTimeStamp();cooldownTracker[_0x18eb34(0x26c)](_0x7e5454);if(_0x34afe3){const _0xe74812=fns[_0x18eb34(0x2cb)](new Date(_0x7e5454),new Date(_0x34afe3));_0xe74812<cooldownInterval&&(logHistory('error',_0x18eb34(0x25a)+config['cooldown']+_0x18eb34(0x21b)+cooldownInterval/0x3c+_0x18eb34(0x26a)+cooldownPeriod/(0xe10*0x3e8)+_0x18eb34(0x23c)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x9564d9){if(_0x9564d9[_0x18eb34(0x249)]()[_0x18eb34(0x21e)](_0x18eb34(0x2c8)))logHistory(_0x18eb34(0x2ca),_0x18eb34(0x2ad)+_0x4a6747);else{if(_0x9564d9[_0x18eb34(0x249)]()['includes'](_0x18eb34(0x2a6)))logHistory(_0x18eb34(0x2ca),'Order\x20amount\x20is\x20invalid:\x20'+_0x4a6747);else await handleError(_0x9564d9,'placeOrder()');}}}if(lastOrders[_0x18eb34(0x27d)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x18eb34(0x1f7)]&&(config['ordertype']==_0x18eb34(0x2b5)?logHistory(_0x18eb34(0x2ca),_0x18eb34(0x220)):logHistory(_0x18eb34(0x2ca),_0x18eb34(0x2e4)));else coolingDown&&(!config[_0x18eb34(0x1f7)]&&logHistory(_0x18eb34(0x2ca),_0x18eb34(0x202)));}}function logHistory(_0x58fbdd,_0x4d877d,_0x50bc5d=''){const _0x2510ec=_0x227d3a;let _0x12c12f={'time':getTimeStamp(),'type':_0x58fbdd,'event':_0x4d877d,'botname':config[_0x2510ec(0x2ce)],'showname':config['showname']};dbLogs['get'](_0x2510ec(0x238))[_0x2510ec(0x26c)](_0x12c12f)[_0x2510ec(0x201)]();if(_0x50bc5d=='')_0x50bc5d=_0x4d877d;proxyEmit(_0x2510ec(0x28b),{'log':_0x12c12f,'summary':_0x50bc5d}),process[_0x2510ec(0x29f)]({'telegram':_0x12c12f}),logging(''+_0x12c12f['event']);}function emitHistory(_0x17595a={}){const _0x2eaa17=_0x227d3a;Object[_0x2eaa17(0x2fd)](_0x17595a)[_0x2eaa17(0x27d)]==0x0&&(_0x17595a={'type':[_0x2eaa17(0x250),_0x2eaa17(0x28b)],'event':'','page':0x1});if(_0x17595a[_0x2eaa17(0x270)][_0x2eaa17(0x21e)](_0x2eaa17(0x28b)))_0x17595a[_0x2eaa17(0x270)][_0x2eaa17(0x2b6)](_0x17595a[_0x2eaa17(0x270)]['indexOf'](_0x2eaa17(0x28b)),0x1,'error',_0x2eaa17(0x257));if(dbLogs[_0x2eaa17(0x2db)]('logs')[_0x2eaa17(0x2f8)]()){let _0xc87cb3=dbLogs['get'](_0x2eaa17(0x238))[_0x2eaa17(0x210)](_0x20a998=>{const _0x249da0=_0x2eaa17;if(_0x17595a[_0x249da0(0x270)][_0x249da0(0x27d)]==0x0)return![];else return _0x17595a['type'][_0x249da0(0x21e)](_0x20a998[_0x249da0(0x270)]);})['filter'](_0x245110=>{const _0x4a603a=_0x2eaa17;if(_0x17595a[_0x4a603a(0x28b)]=='')return!![];else return _0x245110['event'][_0x4a603a(0x2cf)]()['includes'](_0x17595a[_0x4a603a(0x28b)][_0x4a603a(0x2cf)]());})['sortBy']('time'),_0xf4b838=_0xc87cb3[_0x2eaa17(0x2f8)]()['length'];_0xc87cb3=_0xc87cb3['reverse']()[_0x2eaa17(0x2ef)]((_0x17595a[_0x2eaa17(0x231)]-0x1)*logPageSize,_0x17595a[_0x2eaa17(0x231)]*logPageSize-0x1)[_0x2eaa17(0x260)]()['value'](),proxyEmit(_0x2eaa17(0x23f),{'logs':_0xc87cb3,'total':_0xf4b838});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x18652c){const _0x101988=_0x227d3a,_0x57c0fc=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x101988(0x2c6)](),consecutivePauses=0x1;else{if(_0x57c0fc-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x101988(0x29f)]({'stop':'restart'});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x101988(0x2c6)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x101988(0x2ca),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x18652c),botPaused=![],reset();}}async function handleError(_0x1728c4,_0x5a938c,_0x123912=''){const _0x475a01=_0x227d3a;if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x2aa)))logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x24b)),await pauseBot(pauseBotInterval);else{if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x225)))logHistory('error',_0x5a938c+_0x475a01(0x2d3)),await pauseBot(pauseBotInterval);else{if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x293)))logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x229)),await pauseBot(pauseBotInterval);else{if(_0x1728c4[_0x475a01(0x249)]()['includes'](_0x475a01(0x27e)))logHistory('error',_0x5a938c+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x475a01(0x2ca),_0x475a01(0x2e7)),process[_0x475a01(0x29f)]({'stop':'kill'});else{if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x306)))logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x28f)),logHistory(_0x475a01(0x2ca),_0x475a01(0x2e7)),process['send']({'stop':'kill'});else{if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x268)))logHistory('error',_0x5a938c+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x475a01(0x2ca),_0x475a01(0x2e7)),process[_0x475a01(0x29f)]({'stop':_0x475a01(0x2f7)});else{if(_0x1728c4[_0x475a01(0x249)]()['includes'](_0x475a01(0x2f3)))logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x2bc)),logHistory(_0x475a01(0x2ca),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x475a01(0x29f)]({'stop':_0x475a01(0x2f7)});else{if(_0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x1f9)))logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x1fa)),await pauseBot(pauseBotInterval),process[_0x475a01(0x29f)]({'stop':_0x475a01(0x252)});else _0x1728c4[_0x475a01(0x249)]()[_0x475a01(0x21e)](_0x475a01(0x216))?logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x2df)):(logHistory(_0x475a01(0x2ca),_0x5a938c+_0x475a01(0x2e6)),logging(_0x5a938c+_0x475a01(0x259),_0x1728c4),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x35a161,_0xf1f7d4){const _0x4f1a97=_0x227d3a;return parseFloat(_0x35a161[_0x4f1a97(0x305)](_0xf1f7d4));}function logging(_0x381d13,_0x47f586=''){const _0x5e371c=_0x227d3a;if(config['showname'])console[_0x5e371c(0x27f)](getTimeStamp()+':\x20'+config[_0x5e371c(0x2ce)]+_0x5e371c(0x253)+_0x381d13,_0x47f586);else console[_0x5e371c(0x27f)](getTimeStamp()+_0x5e371c(0x221)+botID+'\x20>\x20'+_0x381d13,_0x47f586);}function getServerTime(){const _0xa8066=_0x227d3a,_0x118fe3=new Date();return _0x118fe3[_0xa8066(0x224)]()+'/'+(_0x118fe3[_0xa8066(0x258)]()+0x1)['toString']()[_0xa8066(0x20d)](0x2,'0')+'/'+_0x118fe3[_0xa8066(0x2be)]()[_0xa8066(0x249)]()[_0xa8066(0x20d)](0x2,'0')+'\x20'+_0x118fe3[_0xa8066(0x245)]()[_0xa8066(0x249)]()[_0xa8066(0x20d)](0x2,'0')+':'+_0x118fe3[_0xa8066(0x2a9)]()[_0xa8066(0x249)]()[_0xa8066(0x20d)](0x2,'0')+':'+_0x118fe3[_0xa8066(0x2b4)]()[_0xa8066(0x249)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x2ad0d8=_0x227d3a,_0x5434d7=shiftedTime();return _0x5434d7[_0x2ad0d8(0x224)]()+'/'+(_0x5434d7['getMonth']()+0x1)[_0x2ad0d8(0x249)]()[_0x2ad0d8(0x20d)](0x2,'0')+'/'+_0x5434d7[_0x2ad0d8(0x2be)]()[_0x2ad0d8(0x249)]()['padStart'](0x2,'0')+'\x20'+_0x5434d7[_0x2ad0d8(0x245)]()[_0x2ad0d8(0x249)]()[_0x2ad0d8(0x20d)](0x2,'0')+':'+_0x5434d7[_0x2ad0d8(0x2a9)]()[_0x2ad0d8(0x249)]()['padStart'](0x2,'0')+':'+_0x5434d7['getSeconds']()[_0x2ad0d8(0x249)]()[_0x2ad0d8(0x20d)](0x2,'0');}function getDate(){const _0x490c4d=_0x227d3a,_0x1b0442=shiftedTime();return _0x1b0442[_0x490c4d(0x224)]()+'/'+(_0x1b0442[_0x490c4d(0x258)]()+0x1)[_0x490c4d(0x249)]()[_0x490c4d(0x20d)](0x2,'0')+'/'+_0x1b0442[_0x490c4d(0x2be)]()[_0x490c4d(0x249)]()['padStart'](0x2,'0');}function getHour(){const _0x3fdc13=_0x227d3a,_0x4035ed=shiftedTime();return _0x4035ed['getHours']()[_0x3fdc13(0x249)]()['padStart'](0x2,'0');}function sleep(_0xe3f14a){return new Promise(_0x5cb87c=>setTimeout(_0x5cb87c,_0xe3f14a));}function shiftedTime(){const _0x5d8cba=_0x227d3a,_0x38578e=new Date();let _0x26938d=_0x38578e;if(config&&config[_0x5d8cba(0x239)]!==0x0)_0x26938d=fns[_0x5d8cba(0x1f2)](_0x38578e,{'hours':config[_0x5d8cba(0x239)]});return _0x26938d;}