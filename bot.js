const _0x281bf6=_0x58d1;(function(_0x58d890,_0x3be8ba){const _0x1db288=_0x58d1,_0x21ff33=_0x58d890();while(!![]){try{const _0x4b5c1f=-parseInt(_0x1db288(0x2b0))/0x1+parseInt(_0x1db288(0x2bb))/0x2*(-parseInt(_0x1db288(0x201))/0x3)+parseInt(_0x1db288(0x222))/0x4+parseInt(_0x1db288(0x2c2))/0x5+-parseInt(_0x1db288(0x1fa))/0x6+parseInt(_0x1db288(0x31b))/0x7*(parseInt(_0x1db288(0x278))/0x8)+-parseInt(_0x1db288(0x208))/0x9*(parseInt(_0x1db288(0x23e))/0xa);if(_0x4b5c1f===_0x3be8ba)break;else _0x21ff33['push'](_0x21ff33['shift']());}catch(_0x5a8b22){_0x21ff33['push'](_0x21ff33['shift']());}}}(_0xd4ee,0x3b690));const _0x4b79d9=function(){let _0x1c3ba5=!![];return function(_0x4cbff0,_0x376eff){const _0x36daf7=_0x1c3ba5?function(){if(_0x376eff){const _0x5b03fd=_0x376eff['apply'](_0x4cbff0,arguments);return _0x376eff=null,_0x5b03fd;}}:function(){};return _0x1c3ba5=![],_0x36daf7;};}(),_0x39e1d7=_0x4b79d9(this,function(){const _0x22c971=_0x58d1;return _0x39e1d7[_0x22c971(0x15f)]()[_0x22c971(0x162)](_0x22c971(0x1c0))[_0x22c971(0x15f)]()['constructor'](_0x39e1d7)[_0x22c971(0x162)](_0x22c971(0x1c0));});_0x39e1d7();'use strict';const ccxt=require('ccxt'),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x281bf6(0x1bc)),forge=require('node-forge'),util=require(_0x281bf6(0x1e6)),argv=require(_0x281bf6(0x180))(process[_0x281bf6(0x2aa)][_0x281bf6(0x28f)](0x2))['argv'],path=require('path'),axios=require('axios');let exchange,gTicker={},gChange={};const usdBasecoins=[_0x281bf6(0x28b),_0x281bf6(0x319),_0x281bf6(0x1f5),'USDT',_0x281bf6(0x1e1),_0x281bf6(0x234)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x281bf6(0x1ef)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x281bf6(0x1d5)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x281bf6(0x1b9)+pauseBotInterval/0xea60+'\x20minutes',maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.003;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x7d0;let enableFiatToggle,prevAmountAtOrder={};const serverversion=require('./version.json')[_0x281bf6(0x2ac)],environment=require(_0x281bf6(0x1d0))[_0x281bf6(0x1f4)]||_0x281bf6(0x242),botID=process[_0x281bf6(0x2aa)][0x2]||_0x281bf6(0x1ce),pattern=/^[0-9]{3}$/;!pattern[_0x281bf6(0x20d)](botID)&&(console[_0x281bf6(0x1e4)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x281bf6(0x170),logspath=userID?_0x281bf6(0x19e)+userID+'/':_0x281bf6(0x19e),loggerfile=fs[_0x281bf6(0x182)](logspath+_0x281bf6(0x1dd),{'flags':'a'});!fs[_0x281bf6(0x1b8)](configpath)&&fs[_0x281bf6(0x282)](configpath);!fs['existsSync'](logspath)&&fs[_0x281bf6(0x282)](logspath);const configfile=configpath+_0x281bf6(0x200)+botID+_0x281bf6(0x2c7),logfile=configpath+_0x281bf6(0x200)+botID+_0x281bf6(0x2c8),performancefile=configpath+'bot-'+botID+_0x281bf6(0x1ff),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x281bf6(0x194),securefile=configpath+_0x281bf6(0x178),configbackuppath=configpath+_0x281bf6(0x1db),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x281bf6(0x2c3)]({'logs':[],'version':serverversion})[_0x281bf6(0x294)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x281bf6(0x2c3)]({'bot':[],'version':serverversion})[_0x281bf6(0x294)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x281bf6(0x2c3)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0,settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4cdb7e=>{const _0x22ebb4=_0x281bf6;console[_0x22ebb4(0x1e4)](_0x4cdb7e);},'simple':_0x3e83f1=>{const _0x3d282c=_0x281bf6;console[_0x3d282c(0x1e4)](_0x3e83f1),loggerfile['write'](util[_0x3d282c(0x235)](_0x3e83f1)+'\x0a');},'full':async(_0x34c894,_0x6914a7='')=>{const _0x28e401=_0x281bf6;let _0x1008ad;if(config[_0x28e401(0x16b)])_0x1008ad=getTimeStamp()+':\x20'+config[_0x28e401(0x31d)]+_0x28e401(0x16c)+_0x34c894;else _0x1008ad=getTimeStamp()+_0x28e401(0x2b9)+botID+'\x20>\x20'+_0x34c894;console[_0x28e401(0x1e4)](_0x1008ad),loggerfile['write'](util[_0x28e401(0x235)](_0x1008ad)+'\x0a'),_0x6914a7&&(console[_0x28e401(0x1e4)](_0x6914a7),loggerfile[_0x28e401(0x294)](util['format'](_0x6914a7)+'\x0a'));},'debug':async(_0x357e7c,_0x29640d='')=>{const _0x23266e=_0x281bf6;let _0x3f93e1;if(config['showname'])_0x3f93e1=getTimeStamp()+':\x20'+config['botname']+_0x23266e(0x31c)+_0x357e7c;else _0x3f93e1=getTimeStamp()+_0x23266e(0x2b9)+botID+'\x20>\x20[DEBUG]\x20'+_0x357e7c;if(debugging)console['log'](_0x3f93e1);loggerfile[_0x23266e(0x294)](util[_0x23266e(0x235)](_0x3f93e1)+'\x0a');if(_0x29640d){if(debugging)console[_0x23266e(0x1e4)](_0x29640d);loggerfile['write'](util[_0x23266e(0x235)](_0x29640d)+'\x0a');}}};process['on'](_0x281bf6(0x1f1),function(_0x2044e2){const _0x3a0c9c=_0x281bf6;handleError(_0x2044e2,_0x3a0c9c(0x1f1));});settings[_0x281bf6(0x281)]!=config[_0x281bf6(0x281)]&&updateTimeshift(settings['timeshift']);settings[_0x281bf6(0x268)]!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);(settings[_0x281bf6(0x275)]&&!config['marketcapApi']||!settings[_0x281bf6(0x275)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x281bf6(0x275)]);process['send']({'started':'running'},_0x56662e=>{}),initializeProcessListeners();function _0xd4ee(){const _0x14fd36=['cost','1\x20-\x20FILLED\x20unknown\x20order:\x20','value','change','Resetting\x20bot\x20history','marketcapApi','cancelLoading','switch-manual','1752LdGsGA','fee','function','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','type','Unknown\x20error\x20-\x20check\x20logs','Avoiding\x20continuous\x20order\x20attempts','InvalidNonce','full','timeshift','mkdirSync','Exception\x20thrown\x20in\x20','timeout','cancelOrder','status\x20code\x20401','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','find','Market','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','USD','market_cap','Binance','Error\x20details\x20(0):','slice','bot','createOrder','logs','offset','write','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','cooldown','red_yellow_blue','symbol','startprice','Cex','UNLOCKING','\x20:\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','Invalid\x20balance\x20for\x20','sort','balances','autoliquidity','\x20|\x20lock\x20orders:\x20','Bot\x20','deleteHistoryAlerts','Invalid\x20trigger:\x20','Error\x20details\x20(1):','AuthenticationError','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','debug','argv','emojibuy','version','entries','/USD','join','258846ypGRLv','2.6.23','push','round','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','fetchBalance()','valid','add','pop',':\x20Bot\x20','shift','4118RHotnn','OnMaintenance','Bybit','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','exec','Initializing\x20exchange:\x20already\x20done','max','664000DaGhYg','defaults','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','sqrt','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','-config.json','-events.json','getFullYear','Pausing\x20for\x20','\x20has\x20a\x2024h\x20drop\x20of\x20','2.6.22','emitHistory','openOrders','keys','must\x20be\x20greater\x20than\x20minimum\x20amount','privateKey','trade','threshold','eur','has','net-basecoin','privateKeyFromPem','getTime','unlinkSync','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','limits','marketcapEnabled','startdate','exchange\x20reload','complete','status','marketcap','PermissionDenied','Saving\x20configuration','initial','stringify','active','coins','apiSecret','code','fees','none','differenceInSeconds','changes','getMonth','limit','enabled','NetworkError','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','getOpenOrders()','portfolio1','no\x20open\x20orders','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','\x20API\x20secret\x20is\x20invalid','2\x20-\x20Orders\x20unlocked','recent20','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','decode64','fiat','padStart','filter','\x20|\x20exchange:\x20','map','Initializing\x20coin\x20results','storeHeadless','.json','recovery','<b>','2\x20-\x20handling\x20FILLED\x20order:\x20','assign','watchTrades()','basecoinvalue','toFixed','watchTrades','%\x20(','padEnd','update-liquidity','amount','secure','storeConfiguration','random','date','heapUsed','parse','ETH','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','BUSD','liquidity','15078ZCdeRe','\x20>\x20[DEBUG]\x20','botname',')\x20|\x20exchange:\x20','isEqual','2\x20-\x20Handled\x20open\x20orders','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','\x20minutes\x20-\x20','performance','target','showConfig','toUpperCase','BNB','side','delta','amountToPrecision','toString',':\x20timer\x20>','getSeconds','search','***','yyyy/MM/dd','final','\x20/\x20','success','datetime','bid','emojisell','showname','\x20>\x20','decrypt','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Exchange','./config/','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','basecoin','pid','realized','startsWith','\x20|\x20','staging','bb-secure.json','Failed\x20to\x20load\x20coin\x20data\x20for\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','balancing\x20resumes\x20when\x20cooldown\x20ends','EUR','\x20metrics:</b>\x20\x0a\x0a','quote','Order\x20is\x20invalid:\x20','yargs/yargs','getStartingBalances','createWriteStream','-results.json','writeFile','RETRY\x20-\x20Problem\x20resolved\x20after\x20','\x20change','2\x20-\x20Validate\x20orders:\x20','Resetting\x20coin\x20results:\x20','Initiating\x20bot\x20restart','includes','memoryUsage','data','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','netoffset','-------------------------------\x0a','sortBy','1\x20-\x20Handle\x20open\x20orders','removed','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','bb-settings.json','placeOrder','resetHistory','\x20|\x20highest\x20fee:\x20','time','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','orderstatus','breakeven','Loading\x20symbols','limit-high','./logs/','order','\x20attempts','forEach','Limit\x20(high-margin)','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','average','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','pro','Invalid\x20symbol:\x20','toLowerCase','min','Resuming\x20(','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','excluded','page','getHours','orderId','getCoinNumber()','portfolio','sell','Invalid\x20quantity','LOCKED','</pre>','remove','2.3.5','existsSync','\x20>\x20pausing\x20bot\x20for\x20','fetchTicker','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','date-fns','set','Reset\x20|\x20','sha256','(((.+)+)+)+$','ask','pki','watchTradesForSymbols()','exchanges','BNB/','no\x20exchange\x20reloaded','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','Symbol(s):\x20','event','ORDERS.UNLOCKED','storeFiat','RETRY\x20-\x20Error\x20in\x20','Manual\x20balancing\x20required','001','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','./version.json','\x20hour','fetchBalance','Fee\x20discount\x20refund\x20detected:\x20','sendMetricsTelegram','UNLOCKED','password','colorscheme','cancelOrders()','reverse','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','/backup/','USDT','/output-000.log','Error\x20details:','last','fetchTickers','USDC','create','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','log','bots','util','fetchTickers()','filled','\x20-\x20','floor','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','buy','Huobi','Unknown\x20error:\x20','freeze','fetchOpenOrders','uncaughtException','settings','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','environment','TUSD','balancing\x20resumed','BTC','\x20-\x20bot\x20not\x20started','\x20minutes','355506cZnPqV','Error\x20in\x20testAPI():\x20','event-history','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','headless','-performance.json','bot-','15qdrKIA','Valid\x20balance\x20for\x20','Order\x20filled:\x20','error','message','timestamp','configuration','9162pRmmFF','distribution','cloneDeep','leftTxt','highest','test','RequestTimeout','\x20|\x20Custom\x20ID:\x20','Bitget','price','getMinutes','usd','API-key\x20format\x20invalid','apiKey','/USDT','Loading\x20completed','token\x20is\x20expired','ORDERS.UNLOCKING','open','closed','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','args','added','Unfilled\x20order(s)\x20canceled\x20after\x20','Network\x20error\x20details:','startnumber','1420272HJOmeW','percentage','remainingSymbols','Exchange\x20error\x20details:','send','length','\x20order:\x20','\x20orders\x20in\x20less\x20than\x20','/EUR','quick','0\x20-\x20EXECUTION:\x20','canceled','\x20network\x20error:\x20','ongoing','RateLimitExceeded','sells','1\x20-\x20FILLED\x20known\x20order:\x20','detectLiquidityChange()','USDP','format','<pre>','getDate','Net\x20effect','InsufficientFunds','coin','InvalidOrder','recreate','Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','3810zEiqPo','buys','starting-balances','slider','production','portfolio2','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Headless:\x20','spot','\x20portfolio:</b>\x20\x0a\x0a','replace','watchOrders','ordertype','<b>Bot\x20','initclient','progress','apiPassword','customId','running','number','Block\x20transaction\x20detection:\x20','change24h','substring','splice','Huobipro','getPortfolio','split','PAXG','Portfolio\x20change\x20detected:\x20','currency','coin-loading-progress','rightTxt','************','No\x20more\x20open\x20orders\x20-\x20','2.5.0','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Insufficient\x20funds\x20to\x20execute\x20order:\x20','exchange','watchOrders()','get','\x20API\x20key\x20is\x20invalid','configuration-stored','onepagemode','abs','market','Cryptocom','Previous\x20amount\x20at\x20order\x20for\x20','net-fiat','Stopped\x20fetching\x20balance\x20after\x20','ExchangeError'];_0xd4ee=function(){return _0x14fd36;};return _0xd4ee();}function proxyEmit(_0x5b191f,_0x3c5d71=null){process['send']({'function':_0x5b191f,'args':_0x3c5d71},_0x2eccfd=>{});}function initializeProcessListeners(){const _0x129cf6=_0x281bf6;process['on'](_0x129cf6(0x205),_0x3a1d89=>{const _0x484394=_0x129cf6;switch(Object['keys'](_0x3a1d89)[0x0]){case _0x484394(0x281):_0x3a1d89[_0x484394(0x281)]!=undefined&&(settings['timeshift']=_0x3a1d89[_0x484394(0x281)],updateTimeshift(settings[_0x484394(0x281)]));break;case _0x484394(0x268):_0x3a1d89[_0x484394(0x268)]!=undefined&&(settings[_0x484394(0x268)]=_0x3a1d89[_0x484394(0x268)],updateOnepagemode(settings[_0x484394(0x268)]));break;case'marketcapApi':_0x3a1d89[_0x484394(0x275)]!=undefined&&(settings[_0x484394(0x275)]=_0x3a1d89[_0x484394(0x275)],updateMarketcapApi(settings['marketcapApi']));break;case'bots':_0x3a1d89[_0x484394(0x1e5)]!=undefined&&(bots=JSON[_0x484394(0x316)](_0x3a1d89[_0x484394(0x1e5)]),proxyEmit('bots',bots));break;case _0x484394(0x27a):switch(_0x3a1d89[_0x484394(0x27a)]){case _0x484394(0x24c):initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x484394(0x2cd):emitHistory(_0x3a1d89[_0x484394(0x21d)]);break;case _0x484394(0x2a4):deleteHistoryAlerts(_0x3a1d89['args']);break;case _0x484394(0x257):getPortfolio(_0x3a1d89['args']);break;case _0x484394(0x312):storeConfiguration(_0x3a1d89['args']);break;case _0x484394(0x303):storeHeadless(_0x3a1d89['args']);break;case _0x484394(0x1cb):storeFiat(_0x3a1d89[_0x484394(0x21d)]);break;case _0x484394(0x196):resetHistory();break;case _0x484394(0x181):getStartingBalances(getNormalizedPerformance());break;case _0x484394(0x195):placeOrder(_0x3a1d89['args']);break;case _0x484394(0x276):cancelLoading();break;case _0x484394(0x159):showConfig();break;case _0x484394(0x1d4):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2ff00b=![]){const _0x425a59=_0x281bf6;logger['debug'](_0x425a59(0x1be)+(_0x2ff00b?_0x425a59(0x2de):_0x425a59(0x1c6))+_0x425a59(0x300)+config[_0x425a59(0x263)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2ff00b)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x425a59(0x215)]!=_0x425a59(0x163)){loadingProgress=0x0;_0x2ff00b&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),proxyEmit(_0x425a59(0x207),emittedConfiguration()),initialPerformanceStored=![]);const _0x4a0bf2=await getCoins();[currentCoins,currentCoinsAll]=_0x4a0bf2,setBlockTransactionDetection(![]),startScheduler(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x425a59(0x217)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x425a59(0x227)]==0x0&&allOpenOrders[_0x425a59(0x227)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x45972d=![]){const _0x18693d=_0x281bf6;logger[_0x18693d(0x2a9)](_0x18693d(0x1aa)+(_0x45972d?_0x18693d(0x22b):_0x18693d(0x2df))+_0x18693d(0x31e)+config[_0x18693d(0x263)]);if(pidBalances)clearTimeout(pidBalances);if(_0x45972d){getBalances();return;}coinsLoaded=![];if(config[_0x18693d(0x215)]!=''&&config['apiKey']!='***'){loadingProgress=0x1;const _0x4913ae=await getCoins();[currentCoins,currentCoinsAll]=_0x4913ae,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x18693d(0x217)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x41cdd0){const _0x52e598=_0x281bf6;let _0x57f6cf=![];if(_0x41cdd0)_0x57f6cf=!![];let _0x5d8134;_0x57f6cf?_0x5d8134=_0x41cdd0['map'](_0x36a71d=>_0x36a71d['coin']):_0x5d8134=currentCoinsAll[_0x52e598(0x301)](_0x4979b6=>_0x4979b6[_0x52e598(0x23a)]);if(!config[_0x52e598(0x275)]||!_0x57f6cf&&!config['marketcapEnabled']||_0x5d8134['length']==0x0)return;let _0x38fcf2=null;try{_0x38fcf2=await axios['get'](_0x52e598(0x27b),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x5d8134[_0x52e598(0x15f)]()}});}catch(_0x2934ce){_0x38fcf2=null,_0x2934ce[_0x52e598(0x15f)]()['includes'](_0x52e598(0x286))?(config[_0x52e598(0x275)]=![],updateConfig(),proxyEmit(_0x52e598(0x207),emittedConfiguration()),logHistory(_0x52e598(0x204),_0x52e598(0x244))):(logHistory(_0x52e598(0x204),_0x52e598(0x2c4)+schedulerInterval/(0x3c*0x3e8)+_0x52e598(0x1f9)),logger[_0x52e598(0x2a9)]('Error\x20details:',_0x2934ce[_0x52e598(0x15f)]()+_0x52e598(0x1e9)+_0x2934ce[_0x52e598(0x2e9)]));}if(_0x38fcf2){let _0x45152e=0x0;const _0x4c060f=_0x38fcf2['data'];_0x5d8134[_0x52e598(0x1a1)](_0x294eee=>{const _0x5ef3fc=_0x52e598;if(_0x4c060f[_0x5ef3fc(0x18c)][_0x294eee][0x0])_0x45152e+=_0x4c060f['data'][_0x294eee][0x0][_0x5ef3fc(0x17e)][_0x5ef3fc(0x28b)]['market_cap'];}),_0x5d8134['forEach'](_0x97a60b=>{const _0x5d693d=_0x52e598,_0x3cadaf=_0x4c060f['data'][_0x97a60b][0x0]?_0x4c060f[_0x5d693d(0x18c)][_0x97a60b][0x0][_0x5d693d(0x17e)]['USD'][_0x5d693d(0x28c)]:0x0;if(_0x57f6cf){const _0x269bfe=_0x41cdd0[_0x5d693d(0x288)](_0x23c8d8=>_0x23c8d8[_0x5d693d(0x23a)]==_0x97a60b);_0x269bfe&&(_0x269bfe[_0x5d693d(0x2e1)]=_0x3cadaf);}else{const _0x71cfaa=currentCoins[_0x5d693d(0x288)](_0x3e2ad6=>_0x3e2ad6[_0x5d693d(0x23a)]==_0x97a60b);_0x71cfaa&&(_0x71cfaa[_0x5d693d(0x2e1)]=_0x3cadaf);const _0x87c006=currentCoinsAll['find'](_0x178554=>_0x178554[_0x5d693d(0x23a)]==_0x97a60b);_0x87c006&&(_0x87c006['marketcap']=_0x3cadaf);}}),!_0x57f6cf&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x545d3c=_0x281bf6,_0x97d651=0x2;let _0x366218=0x0,_0x27d178=0x0,_0x27fcc6=0x0,_0x5036bd=0x0,_0x31455b=0x0;config[_0x545d3c(0x1b1)]['forEach'](_0x3ed016=>{const _0x21c5d6=_0x545d3c;if(!_0x3ed016[_0x21c5d6(0x1ac)]){_0x27fcc6++,_0x366218+=_0x3ed016['slider'];if(_0x3ed016[_0x21c5d6(0x241)]===-0x1){_0x366218++;const _0x40e6b9=currentCoinsAll['find'](_0x32f319=>_0x32f319[_0x21c5d6(0x23a)]==_0x3ed016[_0x21c5d6(0x23a)]);_0x40e6b9&&(_0x5036bd+=_0x40e6b9['marketcap'],_0x31455b+=Math[_0x21c5d6(0x2c5)](_0x40e6b9[_0x21c5d6(0x2e1)]));}if(_0x3ed016[_0x21c5d6(0x241)]!==-0x1)_0x27d178++;}});let _0x9820ad;const _0x556cbb=0x64-_0x366218,_0x1904af=_0x27fcc6-_0x27d178;_0x9820ad=_0x1904af===0x0?_0x366218:Math[_0x545d3c(0x2c1)](0x64,_0x366218),config[_0x545d3c(0x1b1)]['forEach'](_0x1b23a9=>{const _0x5d00d0=_0x545d3c,_0x19e795=currentCoinsAll[_0x5d00d0(0x288)](_0x2cfb69=>_0x2cfb69['coin']==_0x1b23a9[_0x5d00d0(0x23a)]);_0x19e795&&(_0x1b23a9[_0x5d00d0(0x2e1)]=_0x19e795[_0x5d00d0(0x2e1)]);if(!_0x1b23a9['excluded']){if(_0x9820ad<=0x64){if(_0x1b23a9[_0x5d00d0(0x241)]===-0x1){if(_0x5036bd!==0x0&&config[_0x5d00d0(0x2dc)]){if(_0x19e795){if(config[_0x5d00d0(0x2dc)]==_0x5d00d0(0x2e1))_0x1b23a9[_0x5d00d0(0x209)]=(_0x556cbb/(_0x5036bd/_0x19e795[_0x5d00d0(0x2e1)]))[_0x5d00d0(0x30b)](_0x97d651);else config[_0x5d00d0(0x2dc)]=='marketcapsqrt'&&(_0x1b23a9['distribution']=(_0x556cbb/(_0x31455b/Math[_0x5d00d0(0x2c5)](_0x19e795['marketcap'])))[_0x5d00d0(0x30b)](_0x97d651));}}}}}}),updateConfig();}function updateConfig(){const _0x816f58=_0x281bf6;let _0x4cfbe6=dbConfig[_0x816f58(0x265)]('bot')[_0x816f58(0x288)]({'botID':botID})[_0x816f58(0x272)]();_0x4cfbe6&&dbConfig[_0x816f58(0x265)](_0x816f58(0x290))['find']({'botID':botID})[_0x816f58(0x308)](config)['write']();}function logMemory(){const _0x2acfb7=_0x281bf6;if(environment!=_0x2acfb7(0x177))return;const _0x22dfae=process[_0x2acfb7(0x18b)]()[_0x2acfb7(0x315)]/0x400/0x400;logger[_0x2acfb7(0x2a9)]('process\x20'+process[_0x2acfb7(0x173)]+'\x20uses\x20'+formatResult(_0x22dfae,0x1)+'\x20MB');}async function startScheduler(){const _0x165c24=_0x281bf6,_0x121cc2=shiftedTime()[_0x165c24(0x1ae)]();getMarketCap(),_0x121cc2==0x1&&logMemory(),(_0x121cc2==0x2||_0x121cc2==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x258929=![]){const _0xf81537=_0x281bf6;logger[_0xf81537(0x2a9)](_0xf81537(0x189));if(!_0x258929)while(lockOrders!=ORDERS[_0xf81537(0x1d5)]||coolingDown){await sleep(0x3e8);}process[_0xf81537(0x226)]({'stop':'restart'},_0x57d627=>{});}async function initExchange(_0x21650b=config[_0x281bf6(0x263)],_0x1d3d7c=config['apiKey'],_0x45c1fe=config['apiSecret'],_0x3fdddc=config['apiPassword']){const _0x107dea=_0x281bf6;if(exchange){logger[_0x107dea(0x2a9)](_0x107dea(0x2c0));return;}logger[_0x107dea(0x2a9)]('Initializing\x20exchange');!supportedExchanges()[_0x107dea(0x18a)](_0x21650b)&&(logHistory(_0x107dea(0x204),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x21650b+'\x20exchange'),killBot());const _0x40a23a=ccxt[_0x107dea(0x1a6)][_0x21650b[_0x107dea(0x1a8)]()];exchange=new _0x40a23a({'apiKey':_0x1d3d7c,'secret':_0x45c1fe,'options':{'defaultType':'spot'}});if(_0x3fdddc)exchange[_0x107dea(0x1d6)]=_0x3fdddc;}function updateExchange(_0x2e8df8,_0x48957a,_0x1a854f=null){const _0x144336=_0x281bf6;exchange[_0x144336(0x215)]=_0x2e8df8,exchange[_0x144336(0x2e8)]=_0x48957a,exchange[_0x144336(0x24e)]=_0x1a854f,logger[_0x144336(0x2a9)](_0x144336(0x2be));}function setStableCoins(){const _0x360437=_0x281bf6;let _0x1d0ce5=config[_0x360437(0x172)]==_0x360437(0x317)?_0x360437(0x317):config[_0x360437(0x172)]==_0x360437(0x259)?_0x360437(0x259):'BTC',_0x514f76=allSymbols[_0x360437(0x18a)](_0x1d0ce5+_0x360437(0x2ae))?'USD':allSymbols[_0x360437(0x18a)](_0x1d0ce5+_0x360437(0x216))?_0x360437(0x1dc):_0x360437(0x17c),_0x5d40b2=allSymbols[_0x360437(0x18a)](_0x1d0ce5+_0x360437(0x22a))?_0x360437(0x17c):_0x514f76;enableFiatToggle=!![],_0x514f76==_0x360437(0x17c)&&(enableFiatToggle=![],storeFiat(_0x360437(0x17c))),_0x5d40b2!='EUR'&&(enableFiatToggle=![],storeFiat('USD')),stablecoins={'eur':{'coin':''+_0x1d0ce5+_0x5d40b2,'symbol':_0x1d0ce5+'/'+_0x5d40b2},'usd':{'coin':''+_0x1d0ce5+_0x514f76,'symbol':_0x1d0ce5+'/'+_0x514f76}};}async function initwsCcxt(){const _0x1fb960=_0x281bf6;initCycle++;const _0x4d606f=initCycle;let _0x296f4b=[];config[_0x1fb960(0x1b1)][_0x1fb960(0x1a1)](_0xfdbb2f=>{const _0x133ee6=_0x1fb960;if(!_0xfdbb2f[_0x133ee6(0x1ac)]&&_0xfdbb2f['coin']!=config[_0x133ee6(0x172)])_0x296f4b[_0x133ee6(0x2b2)](_0xfdbb2f[_0x133ee6(0x298)]);});if(!_0x296f4b[_0x1fb960(0x18a)](stablecoins['eur']['symbol']))_0x296f4b[_0x1fb960(0x2b2)](stablecoins[_0x1fb960(0x2d4)]['symbol']);if(!_0x296f4b['includes'](stablecoins[_0x1fb960(0x213)][_0x1fb960(0x298)]))_0x296f4b[_0x1fb960(0x2b2)](stablecoins[_0x1fb960(0x213)][_0x1fb960(0x298)]);if(config['exchange'][_0x1fb960(0x175)](_0x1fb960(0x28d))&&config[_0x1fb960(0x172)]!=_0x1fb960(0x259)){if(!_0x296f4b[_0x1fb960(0x18a)](_0x1fb960(0x1c5)+config[_0x1fb960(0x172)]))_0x296f4b[_0x1fb960(0x2b2)](_0x1fb960(0x1c5)+config[_0x1fb960(0x172)]);}loadCoins(_0x296f4b),_0x296f4b=validateSymbols(_0x296f4b);const _0x690f69=async _0x4318fd=>{const _0x8101cc=_0x1fb960;let _0x125d3a;try{const _0x11d3b9=await getTickers(_0x4318fd);Object['entries'](_0x11d3b9)[_0x8101cc(0x1a1)](_0x5e66d1=>{const _0x5b6b3b=_0x8101cc;_0x125d3a=_0x5e66d1[0x1][_0x5b6b3b(0x298)],gTicker[noslash(_0x125d3a)]=_0x5e66d1[0x1][_0x5b6b3b(0x1df)],gChange[_0x125d3a]=_0x5e66d1[0x1]['percentage'];});}catch(_0x3e7937){await handleError(_0x3e7937,'initTickers()',_0x125d3a);}},_0x1045cd=async _0x5d2483=>{const _0x4225a5=_0x1fb960;while(initCycle==_0x4d606f){if(!botPaused)try{const _0xcc02b6=await exchange[_0x4225a5(0x30c)](_0x5d2483);gTicker[noslash(_0xcc02b6[0x0]['symbol'])]=_0xcc02b6[0x0][_0x4225a5(0x211)];}catch(_0x192e88){if(!exchangeStopped)await handleError(_0x192e88,_0x4225a5(0x309),_0x5d2483);}else await sleep(0x64);}},_0xd857d4=async _0x52afdb=>{const _0x174977=_0x1fb960;while(initCycle==_0x4d606f){if(!botPaused)try{const _0x1ef0a4=await exchange['watchTradesForSymbols'](_0x52afdb),_0x100501=_0x1ef0a4[_0x174977(0x2b8)]();gTicker[noslash(_0x100501[_0x174977(0x298)])]=_0x100501['price'];}catch(_0x16a030){if(!exchangeStopped)await handleError(_0x16a030,_0x174977(0x1c3),_0x52afdb[_0x174977(0x15f)]());}else await sleep(0x64);}},_0x521d90=async _0x2344e4=>{const _0xfc7ae1=_0x1fb960;while(initCycle==_0x4d606f){if(!botPaused){let _0x576fa7;try{await sleep(0x3c*0x3e8);const _0x3e8fcf=await getTickers(_0x2344e4);Object['entries'](_0x3e8fcf)['forEach'](_0x588383=>{const _0x1680d3=_0x58d1;_0x576fa7=_0x588383[0x1][_0x1680d3(0x298)],gChange[_0x576fa7]=_0x588383[0x1][_0x1680d3(0x223)];});}catch(_0x3e0b63){if(!exchangeStopped)await handleError(_0x3e0b63,_0xfc7ae1(0x1e7),_0x576fa7);}}else await sleep(0x64);}},_0x5c7bb2=async _0x39f096=>{const _0x2f0308=_0x1fb960;while(initCycle==_0x4d606f){if(!botPaused)try{const _0x1c37f6=await exchange[_0x2f0308(0x249)](_0x39f096);initCycle==_0x4d606f&&_0x1c37f6[_0x2f0308(0x1a1)](_0x5c0465=>{updateNumberCoinsCcxt(_0x5c0465);});}catch(_0xc1686a){if(!exchangeStopped)await handleError(_0xc1686a,_0x2f0308(0x264));}else await sleep(0x64);}};_0x690f69(_0x296f4b),_0x521d90(_0x296f4b),exchange['has']['watchTradesForSymbols']&&!(config[_0x1fb960(0x263)]==_0x1fb960(0x2bd)&&_0x296f4b[_0x1fb960(0x227)]>0xa)?_0xd857d4(_0x296f4b):_0x296f4b[_0x1fb960(0x1a1)](_0x7bb4ca=>{_0x1045cd(_0x7bb4ca);}),_0x296f4b[_0x1fb960(0x1a1)](_0x83c08c=>{_0x5c7bb2(_0x83c08c);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x581160){const _0x3a9328=_0x281bf6;let _0x212a0e={};try{if(config[_0x3a9328(0x263)]!=_0x3a9328(0x26b))_0x212a0e=await exchange[_0x3a9328(0x1e0)](_0x581160);else for(const _0x1dcfec of _0x581160){const _0xef30c9=await exchange[_0x3a9328(0x1ba)](_0x1dcfec);_0x212a0e[_0x1dcfec]=_0xef30c9;}return _0x212a0e;}catch(_0x29d70c){throw _0x29d70c;}}function setBlockTransactionDetection(_0x14005b){const _0x3357a8=_0x281bf6;blockTransactionDetection=_0x14005b,logger[_0x3357a8(0x2a9)](_0x3357a8(0x252)+blockTransactionDetection);}async function detectLiquidityChange(_0x9344cf=0x0){const _0x262de9=_0x281bf6;transactionDetectionOngoing=!![];try{const _0x3a04bf=await getCoins(_0x9344cf),[_0x2ab733,_0x21b51c]=_0x3a04bf;let _0x44ed62=[];currentCoins[_0x262de9(0x1a1)](_0x2911b7=>{const _0x46c843=_0x262de9,_0x585d60=_0x2ab733[_0x46c843(0x288)](_0x5345de=>_0x5345de[_0x46c843(0x23a)]==_0x2911b7[_0x46c843(0x23a)]);if(_0x585d60){if(_0x2911b7['number']!=_0x585d60[_0x46c843(0x251)]){let _0x39726d;if(_0x2911b7[_0x46c843(0x23a)]!=config['basecoin']){const _0x2ac20d=gTicker[noslash(_0x2911b7[_0x46c843(0x298)])];_0x39726d=_0x2911b7[_0x46c843(0x1d9)]?0x1/_0x2ac20d:_0x2ac20d;}else _0x39726d=0x1;_0x44ed62[_0x46c843(0x2b2)]({'coin':_0x2911b7[_0x46c843(0x23a)],'symbol':_0x2911b7['symbol'],'price':_0x39726d,'number':Number(formatResult(_0x585d60[_0x46c843(0x251)]-_0x2911b7[_0x46c843(0x251)],0x8)),'basecoinvalue':_0x39726d*(_0x585d60[_0x46c843(0x251)]-_0x2911b7[_0x46c843(0x251)])});}}});if(_0x44ed62['length']>0x0&&!blockTransactionDetection)for(const _0x9bb73c of _0x44ed62){if(config[_0x262de9(0x2a1)]){logger[_0x262de9(0x2a9)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x9bb73c['basecoinvalue']+_0x262de9(0x197)+lastFees[_0x262de9(0x20c)]);if(lastFees[_0x262de9(0x20c)]==0x0||Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x30a)])>lastFees[_0x262de9(0x20c)]*0x3){if(config['autoliquidity']=='update-liquidity'){delete _0x9bb73c[_0x262de9(0x298)],delete _0x9bb73c['basecoinvalue'];let _0x355458=[],_0xfb5a1a=[...config['liquidity']]||[],_0x4fd031=config[_0x262de9(0x31a)];_0xfb5a1a[_0x262de9(0x29f)]((_0x5f5015,_0xb42e15)=>_0x5f5015['date']>_0xb42e15['date']?-0x1:_0xb42e15[_0x262de9(0x314)]>_0x5f5015[_0x262de9(0x314)]?0x1:0x0);const _0x3a48e6=getDate();if(_0xfb5a1a[0x0]){const _0x49b76b=fns[_0x262de9(0x316)](_0xfb5a1a[0x0][_0x262de9(0x314)],_0x262de9(0x164),new Date()),_0x24204c=fns[_0x262de9(0x316)](_0x3a48e6,_0x262de9(0x164),new Date());if(fns[_0x262de9(0x31f)](_0x49b76b,_0x24204c)){_0x355458=_0xfb5a1a[0x0][_0x262de9(0x2ed)];const _0x4b32b9=_0x355458[_0x262de9(0x288)](_0x178ea1=>_0x178ea1[_0x262de9(0x23a)]==_0x9bb73c[_0x262de9(0x23a)]);_0x4b32b9?(_0x4b32b9[_0x262de9(0x251)]+=_0x9bb73c['number'],_0x4b32b9[_0x262de9(0x251)]==0x0&&(_0x355458=_0x355458[_0x262de9(0x2ff)](_0xcb88dc=>{const _0x13f4ba=_0x262de9;return _0xcb88dc[_0x13f4ba(0x23a)]!=_0x9bb73c[_0x13f4ba(0x23a)];}))):_0x355458[_0x262de9(0x2b2)](_0x9bb73c);const _0x4484e2=_0x4fd031['find'](_0x56578a=>_0x56578a[_0x262de9(0x314)]==_0x3a48e6);_0x4484e2[_0x262de9(0x2ed)]=_0x355458;}else _0x4fd031[_0x262de9(0x2b2)]({'date':_0x3a48e6,'changes':[_0x9bb73c]});}const _0x32b2db=_0x4fd031['find'](_0x18a6a5=>_0x18a6a5[_0x262de9(0x314)]==_0x3a48e6);if(_0x32b2db){let _0x45d822=!![];_0x32b2db['changes'][_0x262de9(0x1a1)](_0x9c55d1=>{const _0xb14515=_0x262de9;if(_0x9c55d1[_0xb14515(0x251)]!=0x0)_0x45d822=![];}),_0x45d822&&(_0x4fd031=_0x4fd031['filter'](_0x4f2743=>{const _0x3fc792=_0x262de9;return _0x4f2743[_0x3fc792(0x314)]!=_0x3a48e6;}));}let _0x2d4966=dbConfig[_0x262de9(0x265)](_0x262de9(0x290))[_0x262de9(0x288)]({'botID':botID})['value']();_0x2d4966&&(dbConfig['get'](_0x262de9(0x290))[_0x262de9(0x288)]({'botID':botID})['assign']({'liquidity':_0x4fd031})[_0x262de9(0x294)](),config['liquidity']=_0x4fd031);logHistory(_0x262de9(0x167),_0x262de9(0x25a)+Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x251)])+'\x20'+_0x9bb73c[_0x262de9(0x23a)]+'\x20'+(_0x9bb73c[_0x262de9(0x251)]>0x0?_0x262de9(0x21e):'removed')+_0x262de9(0x2da)),proxyEmit(_0x262de9(0x207),emittedConfiguration());const _0x15ffc9=getNormalizedPerformance();emitPerformance(_0x15ffc9),getStartingBalances(_0x15ffc9),logger[_0x262de9(0x2a9)](_0x262de9(0x1c7));}else config[_0x262de9(0x2a1)]==_0x262de9(0x277)&&(config[_0x262de9(0x1fe)]?(await storeHeadless({'headless':![]}),logHistory(_0x262de9(0x167),'Portfolio\x20change\x20detected:\x20'+Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x251)])+'\x20'+_0x9bb73c[_0x262de9(0x23a)]+'\x20'+(_0x9bb73c[_0x262de9(0x251)]>0x0?_0x262de9(0x21e):_0x262de9(0x192))+_0x262de9(0x2c6))):logger['debug']('Portfolio\x20change\x20detected:\x20'+Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x251)])+'\x20'+_0x9bb73c[_0x262de9(0x23a)]+'\x20'+(_0x9bb73c[_0x262de9(0x251)]>0x0?_0x262de9(0x21e):_0x262de9(0x192))+_0x262de9(0x1f3)));}else logger[_0x262de9(0x2a9)](_0x262de9(0x1d3)+Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x251)])+'\x20'+_0x9bb73c[_0x262de9(0x23a)]+'\x20'+(_0x9bb73c[_0x262de9(0x251)]>0x0?_0x262de9(0x21e):_0x262de9(0x192)));}else logger[_0x262de9(0x2a9)](_0x262de9(0x25a)+Math[_0x262de9(0x269)](_0x9bb73c[_0x262de9(0x251)])+'\x20'+_0x9bb73c[_0x262de9(0x23a)]+'\x20'+(_0x9bb73c['number']>0x0?_0x262de9(0x21e):_0x262de9(0x192))+_0x262de9(0x28a));}currentCoins=_0x2ab733,currentCoinsAll=_0x21b51c;}catch(_0x2b4146){if(!exchangeStopped)await handleError(_0x2b4146,_0x262de9(0x233));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x796ab0=_0x281bf6;logger[_0x796ab0(0x2a9)](_0x796ab0(0x19c));try{markets=await exchange['loadMarkets']();}catch(_0x20ce75){logger[_0x796ab0(0x2a9)]('Error\x20in\x20loadSymbols():\x20'+_0x20ce75[_0x796ab0(0x15f)]());if(markets){}else logHistory(_0x796ab0(0x204),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory(_0x796ab0(0x204),_0x796ab0(0x2ca)+loadCoinsRetryInterval/0xea60+_0x796ab0(0x193)),logger['debug'](_0x796ab0(0x1de),_0x20ce75),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x796ab0(0x2ad)](markets)[_0x796ab0(0x1a1)](_0x220b4c=>{const _0x54688c=_0x796ab0;_0x220b4c[0x1][_0x54688c(0x2e6)]&&_0x220b4c[0x1][_0x54688c(0x246)]&&allSymbols[_0x54688c(0x2b2)](_0x220b4c[0x0]);});}function validateSymbols(_0x214728){const _0x43c430=_0x281bf6;let _0x5646eb=[];return _0x214728[_0x43c430(0x1a1)](_0x95b6fb=>{const _0x3bec77=_0x43c430;!allSymbols[_0x3bec77(0x18a)](_0x95b6fb)?logHistory(_0x3bec77(0x204),_0x3bec77(0x1a7)+_0x95b6fb+_0x3bec77(0x1ab)):_0x5646eb[_0x3bec77(0x2b2)](_0x95b6fb);}),_0x5646eb;}async function initclient(){const _0x12701d=_0x281bf6;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x12701d(0x1c4),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x12701d(0x2a0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x160aa5=getNormalizedPerformance();emitPerformance(_0x160aa5),getStartingBalances(_0x160aa5);}async function toggleBotMode(){const _0x44b0b9=_0x281bf6;let _0x21af3b=dbConfig[_0x44b0b9(0x265)](_0x44b0b9(0x290))[_0x44b0b9(0x288)]({'botID':botID})['value']();if(_0x21af3b){const _0x3df792=!_0x21af3b[_0x44b0b9(0x1fe)];dbConfig[_0x44b0b9(0x265)](_0x44b0b9(0x290))['find']({'botID':botID})['assign']({'headless':_0x3df792})[_0x44b0b9(0x294)](),config[_0x44b0b9(0x1fe)]=_0x3df792,proxyEmit(_0x44b0b9(0x207),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5c7227=_0x281bf6;process[_0x5c7227(0x226)]({'updatebotmanager':!![]},_0x478421=>{}),logger[_0x5c7227(0x2a9)](_0x5c7227(0x245)+config[_0x5c7227(0x1fe)]);}async function loadCoins(_0x404868){const _0x52a6bb=_0x281bf6;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x387190,_0xcc40d0=0x0,_0x116422=0x0;_0x404868[_0x52a6bb(0x1a1)](_0x527697=>{const _0x3ac546=_0x52a6bb;loading[_0x3ac546(0x224)]['push'](_0x527697);}),loadingCanceled=![];let _0x53f1ec=![];while(_0x387190!=_0x404868[_0x52a6bb(0x227)]+maxLoadingProgress){_0x387190=loadingProgress,_0x404868[_0x52a6bb(0x1a1)](_0x1834da=>{const _0x1a0249=_0x52a6bb;if(gTicker[noslash(_0x1834da)]){loading['remainingSymbols']=loading[_0x1a0249(0x224)][_0x1a0249(0x2ff)](_0x2330e8=>_0x2330e8!=_0x1834da);if(!watchedSymbols['includes'](_0x1834da))watchedSymbols['push'](_0x1834da);_0x387190++;}}),loading['progress']=Math[_0x52a6bb(0x2b3)](_0x387190/(_0x404868['length']+maxLoadingProgress)*0x64);loading[_0x52a6bb(0x24d)]!=0x64&&(_0x116422>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x116422>0x78*0x5&&!_0x53f1ec&&(_0x53f1ec=!![],logHistory(_0x52a6bb(0x204),_0x52a6bb(0x179)+loading[_0x52a6bb(0x224)][_0x52a6bb(0x2af)](',\x20')+_0x52a6bb(0x1f8)),logHistory('error',_0x52a6bb(0x2ca)+loadCoinsRetryInterval/0xea60+_0x52a6bb(0x193)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0xcc40d0!=loading[_0x52a6bb(0x24d)]&&(_0xcc40d0=loading[_0x52a6bb(0x24d)],emitLoadingProgress()),_0x116422++,await sleep(0xc8);}_0x387190==_0x404868[_0x52a6bb(0x227)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x52a6bb(0x2f0),'live':'running'},_0x47d53b=>{}),_0x53f1ec&&logHistory(_0x52a6bb(0x167),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1de18c=_0x281bf6;proxyEmit(_0x1de18c(0x207),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x3b0e94=_0x281bf6;proxyEmit(_0x3b0e94(0x25c),loading);}async function getFiat(){const _0x244c94=_0x281bf6;let _0x28fe47=gTicker[stablecoins[_0x244c94(0x2d4)][_0x244c94(0x23a)]],_0x131958=gTicker[stablecoins[_0x244c94(0x213)]['coin']];return{'eur':Number(_0x28fe47),'usd':Number(_0x131958)};}function capitalize(_0x5e8361){const _0x453359=_0x281bf6;return _0x5e8361[_0x453359(0x254)](0x0,0x1)[_0x453359(0x15a)]()+_0x5e8361[_0x453359(0x254)](0x1);}function supportedExchanges(){const _0x578c74=_0x281bf6,_0x384d37=['ws',_0x578c74(0x1e0),_0x578c74(0x1ba),_0x578c74(0x30c),_0x578c74(0x249),_0x578c74(0x285),_0x578c74(0x291),_0x578c74(0x1f0),_0x578c74(0x1d2)];let _0x2ec9ad=[],_0x5e289b=[],_0x469f65=ccxt[_0x578c74(0x1a6)][_0x578c74(0x1c4)];_0x469f65['forEach'](_0x4a09b2=>{const _0x9a0888=_0x578c74;try{const _0x4284c7=new ccxt[(_0x9a0888(0x1a6))][_0x4a09b2]();_0x5e289b[_0x9a0888(0x2b2)](_0x4284c7);}catch(_0x3ac144){}}),_0x5e289b[_0x578c74(0x1a1)](_0x274e19=>{const _0x20a1a6=_0x578c74;let _0x496b5c=0x0;_0x384d37[_0x20a1a6(0x1a1)](_0x17b5fa=>{const _0x5ef63f=_0x20a1a6;_0x17b5fa in _0x274e19[_0x5ef63f(0x2d5)]&&_0x274e19[_0x5ef63f(0x2d5)][_0x17b5fa]&&_0x496b5c++;}),_0x496b5c==_0x384d37[_0x20a1a6(0x227)]&&_0x2ec9ad[_0x20a1a6(0x2b2)](capitalize(_0x274e19['id']));});let _0x364021=[];return _0x469f65[_0x578c74(0x1a1)](_0x216aad=>{const _0x57e948=_0x578c74;_0x216aad=capitalize(_0x216aad);if(!_0x2ec9ad[_0x57e948(0x18a)](_0x216aad))_0x364021[_0x57e948(0x2b2)](_0x216aad);}),_0x2ec9ad;}function setStartDatePerformance(){const _0x2db619=_0x281bf6;if(config&&config[_0x2db619(0x31a)][0x0][_0x2db619(0x2ed)][_0x2db619(0x227)]!=0x0){const _0x2b61ea=config['liquidity'][0x0][_0x2db619(0x2ed)];dbPerformance[_0x2db619(0x265)](_0x2db619(0x18c))[_0x2db619(0x288)]({'date':config[_0x2db619(0x2dd)]})[_0x2db619(0x308)]({'coins':_0x2b61ea})[_0x2db619(0x294)]();}}async function recreateCoinResults(){const _0x28aa25=_0x281bf6;recreationNeeded=![];let _0x5f41c2,_0x29d7bf=[];try{for(const _0x53992a of currentCoins){if(_0x53992a[_0x28aa25(0x23a)]!=config[_0x28aa25(0x172)]){let _0x4d6ad7=0x0,_0x1fe8cc,_0x5aef01;_0x5f41c2=await getAllEventOrders(_0x53992a[_0x28aa25(0x298)]);if(_0x5f41c2['length']>0x0)_0x5f41c2[_0x28aa25(0x1a1)](_0x222784=>{const _0x2365af=_0x28aa25,_0x2f54ff=_0x53992a[_0x2365af(0x298)][_0x2365af(0x18a)](config['basecoin']+'/');_0x29d7bf[_0x2365af(0x2b2)]({'datetime':_0x222784[_0x2365af(0x168)],'coin':_0x53992a['coin'],'symbol':_0x53992a[_0x2365af(0x298)],'side':_0x222784['side'],'reverse':_0x2f54ff,'amount':formatResult(_0x222784[_0x2365af(0x1e8)],0x8),'filled':formatResult(_0x222784[_0x2365af(0x1e8)],0x8),'price':formatResult(_0x222784[_0x2365af(0x211)],0x8)}),_0x4d6ad7=_0x222784['side']==_0x2365af(0x1ec)?_0x4d6ad7+_0x222784['filled']:_0x4d6ad7-_0x222784[_0x2365af(0x1e8)];if(!_0x5aef01)_0x5aef01=_0x222784[_0x2365af(0x211)];});_0x1fe8cc=_0x53992a[_0x28aa25(0x251)]-_0x4d6ad7;let _0x5cb571;config[_0x28aa25(0x31a)][_0x28aa25(0x1a1)](_0x1759e5=>{const _0x4ff59c=_0x28aa25;!_0x5cb571&&(_0x5cb571=_0x1759e5[_0x4ff59c(0x2ed)][_0x4ff59c(0x288)](_0x2f727b=>_0x2f727b[_0x4ff59c(0x23a)]==_0x53992a[_0x4ff59c(0x23a)]),_0x5cb571&&(_0x1fe8cc=_0x5cb571['number'],_0x5aef01=_0x5cb571['price']));});let _0x20aaf8=dbCoinResults[_0x28aa25(0x265)]('coins')[_0x28aa25(0x288)]({'coin':_0x53992a[_0x28aa25(0x23a)]})['value']();_0x20aaf8={'coin':_0x53992a[_0x28aa25(0x23a)],'number':_0x1fe8cc,'breakeven':_0x5aef01,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x28aa25(0x265)](_0x28aa25(0x2e7))[_0x28aa25(0x288)]({'coin':_0x53992a[_0x28aa25(0x23a)]})[_0x28aa25(0x308)](_0x20aaf8)['write']();}}_0x29d7bf[_0x28aa25(0x29f)]((_0x461a1e,_0x218715)=>_0x461a1e[_0x28aa25(0x168)]>_0x218715['datetime']?0x1:_0x218715[_0x28aa25(0x168)]>_0x461a1e[_0x28aa25(0x168)]?-0x1:0x0);let _0x4244d2=0x0;for(let _0x46325b of _0x29d7bf){await updateCoinResults(_0x46325b,!![]);}}catch(_0x3a2aa8){await handleError(_0x3a2aa8,'recreateCoinResults()');}}async function getAllEventOrders(_0x200cc9){const _0x590bba=_0x281bf6;let _0x267dff=[],_0x255ec8=dbLogs[_0x590bba(0x265)](_0x590bba(0x292))[_0x590bba(0x2ff)](_0x1e34ef=>{const _0x5f0de0=_0x590bba,_0x53ffdd=_0x1e34ef[_0x5f0de0(0x1c9)][_0x5f0de0(0x1a8)]();return _0x53ffdd[_0x5f0de0(0x18a)](_0x200cc9[_0x5f0de0(0x1a8)]())&&(_0x53ffdd[_0x5f0de0(0x18a)]('market')&&_0x53ffdd[_0x5f0de0(0x18a)](_0x5f0de0(0x19f))||_0x53ffdd[_0x5f0de0(0x18a)](_0x5f0de0(0x1e8))&&_0x53ffdd['includes'](_0x5f0de0(0x19f)));})[_0x590bba(0x190)](_0x590bba(0x198))[_0x590bba(0x272)]();return _0x255ec8['forEach'](_0x1be64c=>{const _0x5dd900=_0x590bba,_0x1bfade=_0x1be64c[_0x5dd900(0x1c9)]['includes'](_0x5dd900(0x1b2))?_0x5dd900(0x1b2):_0x5dd900(0x1ec),_0x42c0c8=/#([0-9]|\.)+\s/i,_0x54feae=Number(_0x42c0c8[_0x5dd900(0x2bf)](_0x1be64c[_0x5dd900(0x1c9)])[0x0][_0x5dd900(0x28f)](0x1)),_0x3eb70d=/@([0-9]|\.)+$/i,_0x5dd6c6=Number(_0x3eb70d['exec'](_0x1be64c['event'])[0x0][_0x5dd900(0x28f)](0x1));_0x267dff[_0x5dd900(0x2b2)]({'datetime':_0x1be64c[_0x5dd900(0x198)],'coin':symbolToCoin(_0x200cc9),'symbol':_0x200cc9,'side':_0x1bfade,'amount':_0x54feae,'filled':_0x54feae,'price':_0x5dd6c6});}),_0x267dff;}async function validate24hChanges(){const _0x384173=_0x281bf6;for(const _0x134216 of currentCoins){if(_0x134216[_0x384173(0x23a)]!=config[_0x384173(0x172)]){let _0x14f529;_0x134216['reverse']?_0x14f529=formatResult((0x1/(gChange[_0x134216[_0x384173(0x298)]]/0x64+0x1)-0x1)*0x64,0x3):_0x14f529=gChange[_0x134216['symbol']],_0x14f529<config['change24h']&&(logHistory(_0x384173(0x204),_0x134216[_0x384173(0x23a)]+_0x384173(0x2cb)+_0x14f529+'%'),logHistory(_0x384173(0x204),_0x384173(0x21c)),logHistory(_0x384173(0x204),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x18ed0f,_0x20ac5c){const _0x3bfb7c=_0x281bf6;if(!_0x18ed0f)return!![];const _0x272771=_0x20ac5c[_0x3bfb7c(0x258)]('.'),_0x5eb1c6=_0x18ed0f[_0x3bfb7c(0x258)]('.');for(var _0x5b752c=0x0;_0x5b752c<_0x5eb1c6[_0x3bfb7c(0x227)];_0x5b752c++){const _0x5f4bba=~~_0x5eb1c6[_0x5b752c],_0x89d87c=~~_0x272771[_0x5b752c];if(_0x5f4bba<_0x89d87c)return!![];if(_0x5f4bba>_0x89d87c)return![];}return![];}async function oneTimeMigration(){const _0x16e42f=_0x281bf6;let _0xc7e2ca=dbLogs[_0x16e42f(0x265)](_0x16e42f(0x2ac))[_0x16e42f(0x272)]();if(isOlderVersion(_0xc7e2ca,_0x16e42f(0x1b7))){let _0x552dd0=[];const _0x2419eb=dbLogs[_0x16e42f(0x265)](_0x16e42f(0x292))['value']();_0x2419eb['forEach'](_0x33f00d=>{const _0x4a0300=_0x16e42f;_0x552dd0[_0x4a0300(0x2b2)]({'time':_0x33f00d[_0x4a0300(0x198)],'type':_0x33f00d[_0x4a0300(0x27c)],'event':_0x33f00d[_0x4a0300(0x1c9)]});}),dbLogs[_0x16e42f(0x265)]('logs')['assign'](_0x552dd0)[_0x16e42f(0x294)]();}let _0x25217a=dbConfig[_0x16e42f(0x265)]('version')[_0x16e42f(0x272)]();if(isOlderVersion(_0x25217a,_0x16e42f(0x1b7))){let _0x56f60e=dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})[_0x16e42f(0x272)]();if(_0x56f60e){let _0x394f82=[];_0x56f60e[_0x16e42f(0x1b1)][_0x16e42f(0x1a1)](_0x251f6b=>{const _0x296768=_0x16e42f;_0x394f82['push']({'coin':_0x251f6b[_0x296768(0x23a)],'number':_0x251f6b[_0x296768(0x221)],'price':_0x251f6b[_0x296768(0x299)]}),delete _0x251f6b[_0x296768(0x221)],delete _0x251f6b[_0x296768(0x299)];});if(_0x394f82[_0x16e42f(0x227)]!==0x0)fs[_0x16e42f(0x184)](configbackuppath+('starting-balance-'+botID+_0x16e42f(0x304)),JSON[_0x16e42f(0x2e5)](_0x394f82,null,0x4),function(_0x5a8e5f){if(_0x5a8e5f){}});const _0x5a1d20=(_0x51988d,_0x338eb4)=>{const _0x20e1de=_0x16e42f;let _0x618fb0=[];_0x338eb4[_0x20e1de(0x1a1)](_0x5f555c=>{const _0x3394f3=_0x20e1de,_0x4e4dec=_0x51988d[_0x3394f3(0x288)](_0x535f5f=>_0x535f5f[_0x3394f3(0x23a)]==_0x5f555c[_0x3394f3(0x23a)]);if(!_0x4e4dec)_0x618fb0[_0x3394f3(0x2b2)](_0x5f555c);});let _0x5344c8=[];return _0x51988d[_0x20e1de(0x1a1)](_0x2af748=>{const _0x4684be=_0x20e1de,_0x3a41f8=_0x338eb4[_0x4684be(0x288)](_0x36586a=>_0x36586a[_0x4684be(0x23a)]==_0x2af748[_0x4684be(0x23a)]);if(!_0x3a41f8||_0x3a41f8[_0x4684be(0x251)]==0x0&&_0x2af748[_0x4684be(0x251)]!=0x0)_0x5344c8[_0x4684be(0x2b2)](_0x2af748);}),{'missingDay1':_0x618fb0,'notInDay2':_0x5344c8};},_0x456c60=dbPerformance[_0x16e42f(0x265)]('data')[_0x16e42f(0x20a)]()[_0x16e42f(0x272)]();if(_0x456c60[_0x16e42f(0x227)]>0x1){const {missingDay1:_0x568907,notInDay2:_0x4bdb4e}=_0x5a1d20(_0x394f82,_0x456c60[0x1][_0x16e42f(0x2e7)]);_0x394f82=[..._0x394f82,..._0x568907],_0x4bdb4e[_0x16e42f(0x1a1)](_0x99f302=>{const _0x2ef8ed=_0x16e42f;let _0x499cec=_0x394f82['findIndex'](_0x1eea2b=>_0x1eea2b[_0x2ef8ed(0x23a)]==_0x99f302[_0x2ef8ed(0x23a)]);_0x499cec!=-0x1&&_0x394f82[_0x2ef8ed(0x255)](_0x499cec,0x1);});}_0x394f82['sort']((_0x15faca,_0x1cda8d)=>_0x15faca[_0x16e42f(0x23a)]>_0x1cda8d[_0x16e42f(0x23a)]?0x1:_0x1cda8d['coin']>_0x15faca[_0x16e42f(0x23a)]?-0x1:0x0);let _0x3f78e4=[{'date':_0x56f60e['startdate'],'changes':_0x394f82}];_0x456c60[_0x16e42f(0x227)]>0x2&&_0x456c60['forEach']((_0x5cebea,_0x45d543)=>{const _0x248aa0=_0x16e42f;if(_0x45d543>0x0&&_0x45d543<_0x456c60[_0x248aa0(0x227)]-0x1){const {missingDay1:_0x4021d2,notInDay2:_0x55c41a}=_0x5a1d20(_0x456c60[_0x45d543]['coins'],_0x456c60[_0x45d543+0x1][_0x248aa0(0x2e7)]);_0x394f82=[],(_0x4021d2[_0x248aa0(0x227)]!=0x0||_0x55c41a[_0x248aa0(0x227)]!=0x0)&&(_0x4021d2[_0x248aa0(0x227)]!=0x0&&_0x394f82['push'](..._0x4021d2),_0x55c41a[_0x248aa0(0x227)]!=0x0&&(_0x55c41a['forEach'](_0x416d75=>{const _0x45dd46=_0x248aa0;_0x416d75[_0x45dd46(0x251)]=-_0x416d75['number'];}),_0x394f82[_0x248aa0(0x2b2)](..._0x55c41a)),_0x394f82[_0x248aa0(0x29f)]((_0x58692c,_0x165aac)=>_0x58692c[_0x248aa0(0x23a)]>_0x165aac['coin']?0x1:_0x165aac[_0x248aa0(0x23a)]>_0x58692c[_0x248aa0(0x23a)]?-0x1:0x0),_0x3f78e4[_0x248aa0(0x2b2)]({'date':_0x456c60[_0x45d543+0x1][_0x248aa0(0x314)],'changes':_0x394f82}));}}),dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})['assign']({..._0x56f60e,'liquidity':_0x3f78e4})['write']();}}if(isOlderVersion(_0x25217a,'2.6.0')){let _0x24b5b6=dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})['value']();if(_0x24b5b6){const _0x81dc5f=_0x24b5b6[_0x16e42f(0x263)],_0x5008b0=_0x81dc5f?capitalize(_0x81dc5f):_0x16e42f(0x28d);dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})['assign']({'exchange':_0x5008b0})[_0x16e42f(0x294)]();}}if(isOlderVersion(_0x25217a,_0x16e42f(0x2cc))){let _0x4305f6=dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})[_0x16e42f(0x272)]();if(_0x4305f6){const _0x230544=_0x4305f6[_0x16e42f(0x2dc)],_0x32fbb2=_0x230544?_0x16e42f(0x2e1):![];dbConfig[_0x16e42f(0x265)]('bot')[_0x16e42f(0x288)]({'botID':botID})[_0x16e42f(0x308)]({'marketcapEnabled':_0x32fbb2})[_0x16e42f(0x294)]();}}if(isOlderVersion(_0x25217a,_0x16e42f(0x2b1))){let _0x3e3c28=dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})[_0x16e42f(0x272)]();if(_0x3e3c28){const _0x16d55e=_0x3e3c28['autoliquidity'],_0xb1f61f=_0x16d55e?_0x16e42f(0x30f):![];dbConfig[_0x16e42f(0x265)](_0x16e42f(0x290))[_0x16e42f(0x288)]({'botID':botID})['assign']({'autoliquidity':_0xb1f61f})[_0x16e42f(0x294)]();}}let _0x46f8a8=dbPerformance[_0x16e42f(0x265)](_0x16e42f(0x2ac))['value']();isOlderVersion(_0x46f8a8,_0x16e42f(0x1b7))&&setStartDatePerformance();let _0x3e2a4a=dbCoinResults[_0x16e42f(0x265)](_0x16e42f(0x2ac))[_0x16e42f(0x272)]();if(isOlderVersion(_0x3e2a4a,_0x16e42f(0x260))){let _0x588cb3=dbCoinResults['get']('coins')[_0x16e42f(0x272)]();if(_0x588cb3[_0x16e42f(0x227)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x463e14=_0x281bf6;dbConfig[_0x463e14(0x1bd)](_0x463e14(0x2ac),serverversion)[_0x463e14(0x294)](),dbPerformance['set']('version',serverversion)[_0x463e14(0x294)](),dbLogs[_0x463e14(0x1bd)]('version',serverversion)[_0x463e14(0x294)](),dbCoinResults[_0x463e14(0x1bd)](_0x463e14(0x2ac),serverversion)[_0x463e14(0x294)]();}function getConfiguration(_0x38fabd){const _0x1554f9=_0x281bf6;let _0x4adf4a=dbConfig[_0x1554f9(0x265)](_0x1554f9(0x290))[_0x1554f9(0x288)]({'botID':_0x38fabd})[_0x1554f9(0x272)]();if(_0x4adf4a){let _0x16015c=![];typeof _0x4adf4a['threshold']=='string'&&(_0x4adf4a={..._0x4adf4a,'threshold':Number(_0x4adf4a[_0x1554f9(0x2d3)])},_0x16015c=!![]),_0x4adf4a[_0x1554f9(0x253)]==undefined&&(_0x4adf4a={..._0x4adf4a,'change24h':-0x14},_0x16015c=!![]),_0x4adf4a['fiat']==undefined&&(_0x4adf4a={..._0x4adf4a,'fiat':_0x1554f9(0x28b)},_0x16015c=!![]),_0x4adf4a[_0x1554f9(0x268)]==undefined&&(_0x4adf4a={..._0x4adf4a,'onepagemode':settings['onepagemode']},_0x16015c=!![]),_0x4adf4a['colorscheme']==undefined&&(_0x4adf4a={..._0x4adf4a,'colorscheme':'red_yellow_blue'},_0x16015c=!![]),_0x4adf4a[_0x1554f9(0x2a1)]==undefined&&(_0x4adf4a={..._0x4adf4a,'autoliquidity':_0x1554f9(0x30f)},_0x16015c=!![]),_0x4adf4a[_0x1554f9(0x275)]==undefined&&(_0x4adf4a={..._0x4adf4a,'marketcapApi':settings[_0x1554f9(0x275)]?!![]:![]},_0x16015c=!![]),_0x4adf4a[_0x1554f9(0x2dc)]==undefined&&(_0x4adf4a={..._0x4adf4a,'marketcapEnabled':![]},_0x16015c=!![]),_0x16015c&&(_0x4adf4a={'botID':_0x4adf4a['botID'],'exchange':_0x4adf4a['exchange'],'apiKey':_0x4adf4a['apiKey'],'apiSecret':_0x4adf4a['apiSecret'],'apiPassword':_0x4adf4a[_0x1554f9(0x24e)],'basecoin':_0x4adf4a['basecoin'],'botname':_0x4adf4a[_0x1554f9(0x31d)],'showname':_0x4adf4a[_0x1554f9(0x16b)],'threshold':_0x4adf4a[_0x1554f9(0x2d3)],'ordertype':_0x4adf4a[_0x1554f9(0x24a)],'timeout':_0x4adf4a[_0x1554f9(0x284)],'fiat':_0x4adf4a[_0x1554f9(0x2fd)],'startdate':_0x4adf4a[_0x1554f9(0x2dd)],'recreate':_0x4adf4a[_0x1554f9(0x23c)],'timeshift':_0x4adf4a[_0x1554f9(0x281)],'onepagemode':_0x4adf4a[_0x1554f9(0x268)],'headless':_0x4adf4a[_0x1554f9(0x1fe)],'cooldown':_0x4adf4a[_0x1554f9(0x296)],'change24h':_0x4adf4a[_0x1554f9(0x253)],'emojibuy':_0x4adf4a[_0x1554f9(0x2ab)],'emojisell':_0x4adf4a[_0x1554f9(0x16a)],'colorscheme':_0x4adf4a[_0x1554f9(0x1d7)],'marketcapApi':_0x4adf4a[_0x1554f9(0x275)],'marketcapEnabled':_0x4adf4a[_0x1554f9(0x2dc)],'portfolio':_0x4adf4a[_0x1554f9(0x1b1)],'autoliquidity':_0x4adf4a[_0x1554f9(0x2a1)],'liquidity':_0x4adf4a[_0x1554f9(0x31a)],'openOrders':_0x4adf4a[_0x1554f9(0x2ce)]},dbConfig[_0x1554f9(0x265)](_0x1554f9(0x290))['remove']()['write'](),dbConfig[_0x1554f9(0x265)](_0x1554f9(0x290))['push'](_0x4adf4a)[_0x1554f9(0x294)]());}else _0x4adf4a={'botID':_0x38fabd,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1554f9(0x2a3)+_0x38fabd,'showname':![],'threshold':0x3,'ordertype':_0x1554f9(0x26a),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x1554f9(0x268)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1554f9(0x297),'marketcapApi':settings[_0x1554f9(0x275)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x1554f9(0x30f),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4adf4a;}function emittedConfiguration(){const _0x1a6f9b=_0x281bf6;let _0x137ce7;if(config[_0x1a6f9b(0x215)]=='')_0x137ce7={...config,'configstate':_0x1a6f9b(0x2e4)};else config[_0x1a6f9b(0x215)]=='***'?_0x137ce7={...config,'configstate':_0x1a6f9b(0x305)}:(_0x137ce7={...config,'apiKey':_0x1a6f9b(0x25e),'apiSecret':'************'},config[_0x1a6f9b(0x24e)]&&(_0x137ce7[_0x1a6f9b(0x24e)]=_0x1a6f9b(0x25e)));return _0x137ce7['enableFiatToggle']=enableFiatToggle,_0x137ce7;}function getSettings(){const _0x5befbf=_0x281bf6;return dbSettings[_0x5befbf(0x265)](_0x5befbf(0x1f2))[_0x5befbf(0x272)]();}function getSecure(){const _0x3dc2c0=_0x281bf6;return dbSecure[_0x3dc2c0(0x265)](_0x3dc2c0(0x311))[_0x3dc2c0(0x272)]()||{};}function updateTimeshift(_0x3cfb5f){const _0x2527bb=_0x281bf6;let _0x336f33=dbConfig['get'](_0x2527bb(0x290))[_0x2527bb(0x288)]({'botID':botID})[_0x2527bb(0x272)]();_0x336f33&&dbConfig[_0x2527bb(0x265)]('bot')[_0x2527bb(0x288)]({'botID':botID})['assign']({'timeshift':_0x3cfb5f})[_0x2527bb(0x294)](),config[_0x2527bb(0x281)]=_0x3cfb5f,proxyEmit(_0x2527bb(0x207),emittedConfiguration());}function updateOnepagemode(_0x2104f6){const _0x53c861=_0x281bf6;let _0x3ff77d=dbConfig[_0x53c861(0x265)]('bot')[_0x53c861(0x288)]({'botID':botID})[_0x53c861(0x272)]();_0x3ff77d&&dbConfig[_0x53c861(0x265)](_0x53c861(0x290))[_0x53c861(0x288)]({'botID':botID})['assign']({'onepagemode':_0x2104f6})[_0x53c861(0x294)](),config[_0x53c861(0x268)]=_0x2104f6,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x20c663){const _0x2798ce=_0x281bf6,_0x1b9d07=_0x20c663?!![]:![];let _0x59ea1a=dbConfig[_0x2798ce(0x265)](_0x2798ce(0x290))[_0x2798ce(0x288)]({'botID':botID})['value']();_0x59ea1a&&dbConfig[_0x2798ce(0x265)](_0x2798ce(0x290))[_0x2798ce(0x288)]({'botID':botID})['assign']({'marketcapApi':_0x1b9d07})[_0x2798ce(0x294)](),config[_0x2798ce(0x275)]=_0x1b9d07,getMarketCap(),proxyEmit(_0x2798ce(0x207),emittedConfiguration());}async function storeConfiguration(_0x145000){const _0x188803=_0x281bf6;logger['debug'](_0x188803(0x2e3));if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x5a795a=![],_0x3fecb7=![],_0xb55b5a=[];_0x145000[_0x188803(0x1b1)][_0x188803(0x1a1)](_0x11e8cd=>{const _0x17ce6f=_0x188803;if(!_0x11e8cd[_0x17ce6f(0x1ac)]&&_0x11e8cd[_0x17ce6f(0x23a)]!=_0x145000[_0x17ce6f(0x172)])_0xb55b5a['push'](_0x11e8cd[_0x17ce6f(0x298)]);}),_0xb55b5a[_0x188803(0x1a1)](_0x3b49db=>{const _0x36ccab=currentCoins['find'](_0x316884=>_0x316884['symbol']==_0x3b49db);!_0x36ccab&&(_0x5a795a=!![]);}),currentCoins[_0x188803(0x1a1)](_0x31a907=>{const _0x3cb8f1=_0x188803;if(_0x31a907['coin']!=config[_0x3cb8f1(0x172)]){const _0x7ac4d7=_0xb55b5a[_0x3cb8f1(0x288)](_0x59d2aa=>_0x59d2aa==_0x31a907['symbol']);!_0x7ac4d7&&(_0x5a795a=!![]);}}),_0x145000[_0x188803(0x1b1)]['forEach'](_0x2c974b=>{const _0x572ba9=_0x188803,_0x34d950=config[_0x572ba9(0x1b1)][_0x572ba9(0x288)](_0x37c5ee=>_0x37c5ee[_0x572ba9(0x23a)]==_0x2c974b[_0x572ba9(0x23a)]);if(_0x34d950&&_0x2c974b['offset']!=_0x34d950[_0x572ba9(0x293)])_0x3fecb7=!![];});let _0x575b60=dbConfig[_0x188803(0x265)](_0x188803(0x290))['find']({'botID':botID})['value']();_0x145000={..._0x145000,'apiKey':decryptRSA(secure['privateKey'],_0x145000['apiKey']),'apiSecret':decryptRSA(secure[_0x188803(0x2d1)],_0x145000[_0x188803(0x2e8)])};_0x145000[_0x188803(0x24e)]&&(_0x145000[_0x188803(0x24e)]=decryptRSA(secure[_0x188803(0x2d1)],_0x145000[_0x188803(0x24e)]));let _0x4a6d61=![];if(_0x575b60){_0x145000[_0x188803(0x215)]=='************'?_0x145000[_0x188803(0x215)]=config[_0x188803(0x215)]:_0x4a6d61=!![];_0x145000['apiSecret']==_0x188803(0x25e)?_0x145000[_0x188803(0x2e8)]=config[_0x188803(0x2e8)]:_0x4a6d61=!![];if(_0x145000[_0x188803(0x24e)]==_0x188803(0x25e))_0x145000['apiPassword']=config[_0x188803(0x24e)];else{if(_0x145000['apiPassword'])_0x4a6d61=!![];}dbConfig['get'](_0x188803(0x290))[_0x188803(0x288)]({'botID':botID})[_0x188803(0x308)](_0x145000)[_0x188803(0x294)]();}else dbConfig[_0x188803(0x265)](_0x188803(0x290))[_0x188803(0x2b2)](_0x145000)[_0x188803(0x294)](),_0x4a6d61=!![],process['send']({'status':_0x188803(0x2f0),'live':_0x188803(0x250)},_0x379046=>{});process['send']({'botname':_0x145000[_0x188803(0x31d)]},_0x4e9fd7=>{}),config={..._0x145000},updateBotManager(),proxyEmit(_0x188803(0x267)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4a6d61)!_0x575b60?await reset(!![]):getBalances();else _0x5a795a||_0x3fecb7?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x5026e8){const _0x21400c=_0x281bf6,_0x4bd6f8={...config,'headless':_0x5026e8[_0x21400c(0x1fe)]};let _0x464b22=dbConfig[_0x21400c(0x265)](_0x21400c(0x290))[_0x21400c(0x288)]({'botID':botID})[_0x21400c(0x272)]();_0x464b22&&dbConfig[_0x21400c(0x265)](_0x21400c(0x290))[_0x21400c(0x288)]({'botID':botID})['assign'](_0x4bd6f8)[_0x21400c(0x294)](),config={..._0x4bd6f8},updateBotManager(),proxyEmit(_0x21400c(0x207),emittedConfiguration());}function _0x58d1(_0x517f1f,_0x5bc5f7){const _0x30598f=_0xd4ee();return _0x58d1=function(_0x39e1d7,_0x4b79d9){_0x39e1d7=_0x39e1d7-0x159;let _0xd4ee7d=_0x30598f[_0x39e1d7];return _0xd4ee7d;},_0x58d1(_0x517f1f,_0x5bc5f7);}async function storeFiat(_0x37e760){const _0x419a50=_0x281bf6,_0x100154={...config,'fiat':_0x37e760};let _0x2b71d7=dbConfig['get'](_0x419a50(0x290))[_0x419a50(0x288)]({'botID':botID})['value']();_0x2b71d7&&dbConfig[_0x419a50(0x265)](_0x419a50(0x290))[_0x419a50(0x288)]({'botID':botID})[_0x419a50(0x308)](_0x100154)[_0x419a50(0x294)](),config={..._0x100154},proxyEmit(_0x419a50(0x207),emittedConfiguration());}function resetHistory(){const _0x1d03e8=_0x281bf6;logger['full'](_0x1d03e8(0x274));try{if(fs[_0x1d03e8(0x1b8)](path[_0x1d03e8(0x2af)](configpath,_0x1d03e8(0x200)+botID+'-events.json')))fs[_0x1d03e8(0x2d9)](path[_0x1d03e8(0x2af)](configpath,_0x1d03e8(0x200)+botID+'-events.json'));if(fs['existsSync'](path[_0x1d03e8(0x2af)](configpath,_0x1d03e8(0x200)+botID+_0x1d03e8(0x1ff))))fs[_0x1d03e8(0x2d9)](path[_0x1d03e8(0x2af)](configpath,_0x1d03e8(0x200)+botID+_0x1d03e8(0x1ff)));if(fs[_0x1d03e8(0x1b8)](path['join'](configpath,_0x1d03e8(0x200)+botID+'-results.json')))fs['unlinkSync'](path[_0x1d03e8(0x2af)](configpath,_0x1d03e8(0x200)+botID+_0x1d03e8(0x183)));}catch(_0x153058){if(_0x153058)logger[_0x1d03e8(0x280)]('Error\x20while\x20deleting\x20files:\x20',_0x153058);}const _0x58ddfa=getDate();let _0x359058=[];currentCoins[_0x1d03e8(0x1a1)](_0x272d8d=>{const _0x3106da=_0x1d03e8;_0x359058[_0x3106da(0x2b2)]({'coin':_0x272d8d[_0x3106da(0x23a)],'number':_0x272d8d['number'],'price':_0x272d8d['last']});});let _0x553b36=dbConfig[_0x1d03e8(0x265)](_0x1d03e8(0x290))[_0x1d03e8(0x288)]({'botID':botID})[_0x1d03e8(0x272)]();_0x553b36&&(dbConfig['get'](_0x1d03e8(0x290))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x58ddfa,'changes':_0x359058}]})[_0x1d03e8(0x294)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x3e93bd){const _0x239b9f=_0x281bf6;return _0x3e93bd[_0x239b9f(0x248)]('/','');}function updateHighestFee(_0x2eba38){const _0x4e9743=_0x281bf6;if(_0x2eba38['reverse']){let _0x56d265={'filled':_0x2eba38[_0x4e9743(0x1e8)]*_0x2eba38[_0x4e9743(0x211)],'amount':_0x2eba38[_0x4e9743(0x1e8)]*_0x2eba38[_0x4e9743(0x211)],'side':_0x2eba38['side']=='sell'?_0x4e9743(0x1ec):_0x4e9743(0x1b2),'price':0x1/_0x2eba38[_0x4e9743(0x211)]};_0x2eba38={..._0x2eba38,..._0x56d265};}const _0x7b8000=defaultFee*_0x2eba38[_0x4e9743(0x1e8)]*_0x2eba38[_0x4e9743(0x211)];lastFees['recent20']['length']===0x14&&lastFees[_0x4e9743(0x2fa)][_0x4e9743(0x2ba)](),lastFees['recent20'][_0x4e9743(0x2b2)](_0x7b8000),lastFees[_0x4e9743(0x20c)]=Math[_0x4e9743(0x2c1)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x5db212){const _0x25871f=_0x281bf6;logger['debug'](_0x25871f(0x22c)+_0x5db212['symbol']+_0x25871f(0x176)+_0x5db212[_0x25871f(0x2e0)]+'\x20|\x20'+_0x5db212['filled']+_0x25871f(0x166)+_0x5db212['amount']+'\x20|\x20'+_0x5db212['id']);let _0x1f5bdd=_0x5db212[_0x25871f(0x2e0)],_0x201413=![];currentCoins[_0x25871f(0x1a1)](_0x54678b=>{const _0x3a3d0f=_0x25871f;_0x54678b[_0x3a3d0f(0x298)]==_0x5db212['symbol']&&(_0x201413=!![]);});if(!_0x201413)return;const _0x450943=currentCoins[_0x25871f(0x288)](_0x5651db=>_0x5651db[_0x25871f(0x298)]==_0x5db212[_0x25871f(0x298)]),_0x4df61c=_0x12f3a7=>{const _0x3e8f80=_0x25871f;if(_0x450943)_0x450943[_0x3e8f80(0x19a)]=_0x12f3a7;};let _0x3099b2=![];for(const _0x343040 of lastOrders){const _0x56f002=0x64,_0x260b53=0x1388;let _0x351139=0x0;while(!_0x343040[_0x25871f(0x1af)]&&_0x351139*_0x56f002<_0x260b53){_0x351139++,await sleep(_0x56f002);}if(_0x351139>0x0)logger[_0x25871f(0x2a9)]('Waited\x20'+_0x351139*_0x56f002/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');_0x343040['orderId']==_0x5db212['id']&&(_0x3099b2=!![]);}if(_0x1f5bdd==_0x25871f(0x21a)){_0x4df61c(_0x25871f(0x21a));if(_0x5db212[_0x25871f(0x1e8)]>0x0){if(_0x3099b2){setBlockTransactionDetection(!![]),logger[_0x25871f(0x2a9)](_0x25871f(0x2f7)+_0x5db212['id']);const _0xd5e642=await getCoins(balanceUpdateDelay,undefined,undefined,_0x450943);[currentCoins,currentCoinsAll]=_0xd5e642,setBlockTransactionDetection(![]);}else logger[_0x25871f(0x2a9)](_0x25871f(0x2a8)+_0x5db212['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x1f5bdd==_0x25871f(0x22d)){_0x4df61c(_0x25871f(0x22d));const _0x111d45=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x111d45,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x1f5bdd==_0x25871f(0x21b)){if(lastOrders)for(const _0x2266d1 of lastOrders){if(_0x2266d1[_0x25871f(0x1af)]==_0x5db212['id']){logger[_0x25871f(0x2a9)](_0x25871f(0x232)+_0x5db212['id']),_0x3099b2=!![];if(_0x2266d1[_0x25871f(0x1e8)]==0x0){setBlockTransactionDetection(!![]),logger[_0x25871f(0x2a9)](_0x25871f(0x307)+_0x5db212['id']);if(_0x5db212[_0x25871f(0x1a4)])_0x2266d1[_0x25871f(0x211)]=_0x5db212[_0x25871f(0x1a4)];else{if(_0x5db212[_0x25871f(0x211)])_0x2266d1[_0x25871f(0x211)]=_0x5db212[_0x25871f(0x211)];else{}}_0x2266d1[_0x25871f(0x1e8)]=_0x5db212['filled'],updateHighestFee(_0x2266d1),_0x4df61c(_0x25871f(0x1e8));const _0x1091b9=await getCoins(balanceUpdateDelay,undefined,undefined,_0x450943);[currentCoins,currentCoinsAll]=_0x1091b9,setBlockTransactionDetection(![]),await validateOrders(),_0x2266d1[_0x25871f(0x279)]={'currency':_0x5db212[_0x25871f(0x279)]?_0x5db212[_0x25871f(0x279)][_0x25871f(0x25b)]:null,'cost':_0x5db212[_0x25871f(0x279)]?_0x5db212[_0x25871f(0x279)]['cost']:0x0},await updateCoinResults(_0x2266d1);}}}!_0x3099b2&&(logger[_0x25871f(0x2a9)](_0x25871f(0x271)+_0x5db212['id']),_0x4df61c('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x338bfa=JSON['parse'](lastBalances[_0x25871f(0x1b1)]);const _0x41267a=_0x338bfa['find'](_0x280a48=>_0x280a48[_0x25871f(0x298)]==_0x5db212[_0x25871f(0x298)]);if(_0x41267a){if(_0x1f5bdd==_0x25871f(0x21a))_0x41267a[_0x25871f(0x19a)]=_0x41267a[_0x25871f(0x19a)]==_0x25871f(0x1e8)?_0x25871f(0x1e8):_0x25871f(0x21a);else{if(_0x1f5bdd==_0x25871f(0x22d))_0x41267a[_0x25871f(0x19a)]=_0x41267a[_0x25871f(0x19a)]==_0x25871f(0x1e8)?_0x25871f(0x1e8):_0x25871f(0x22d);else _0x1f5bdd=='closed'&&(_0x41267a[_0x25871f(0x19a)]=_0x25871f(0x1e8));}}lastBalances={...lastBalances,'portfolio':JSON[_0x25871f(0x2e5)](_0x338bfa)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x471e17=_0x281bf6;await getOpenOrders();let _0x49cb2d=![];currentCoins[_0x471e17(0x1a1)](_0x91d5c0=>{const _0x455f15=_0x471e17;_0x49cb2d=allOpenOrders['find'](_0xb4c746=>_0xb4c746[_0x455f15(0x298)]==_0x91d5c0[_0x455f15(0x298)]),_0x91d5c0['orderstatus']=_0x49cb2d?_0x455f15(0x21a):_0x455f15(0x2eb);});}async function fetchBalance(_0x191ef1=!![]){const _0x3043f9=_0x281bf6;let _0x58e7d0;try{return _0x58e7d0=await exchange[_0x3043f9(0x1d2)](),mybalances=_0x58e7d0['total'],!![];}catch(_0x188b0f){return!_0x191ef1?handleErrorNoStop(_0x188b0f,_0x3043f9(0x2b5)):await handleError(_0x188b0f,_0x3043f9(0x2b5)),![];}}async function getCoins(_0x34308c=0x0,_0x22b782=!![],_0x457454=config[_0x281bf6(0x172)],_0x10e9d1){const _0x50e55e=_0x281bf6;let _0x1a770f=[],_0x4a9155=[],_0x490442=[];if(_0x34308c)await sleep(_0x34308c);if(botPaused)return[currentCoins,currentCoinsAll];let _0x22b2fc=![],_0x5b5731=0x0;while(!_0x22b2fc){const _0x2a8c1a=await fetchBalance(_0x22b782);if(_0x2a8c1a){if(_0x10e9d1){if(mybalances[_0x10e9d1['coin']]!=prevAmountAtOrder[_0x10e9d1[_0x50e55e(0x23a)]])logger[_0x50e55e(0x2a9)](_0x50e55e(0x202)+_0x10e9d1[_0x50e55e(0x23a)]+':\x20'+mybalances[_0x10e9d1[_0x50e55e(0x23a)]]+'\x20('+prevAmountAtOrder[_0x10e9d1[_0x50e55e(0x23a)]]+')'),_0x22b2fc=!![];else{logger[_0x50e55e(0x2a9)](_0x50e55e(0x29e)+_0x10e9d1[_0x50e55e(0x23a)]+':\x20'+mybalances[_0x10e9d1[_0x50e55e(0x23a)]]+'\x20('+prevAmountAtOrder[_0x10e9d1[_0x50e55e(0x23a)]]+')'),_0x5b5731++;if(_0x5b5731<0x3)await sleep(balanceUpdateDelay);else{logger['debug'](_0x50e55e(0x26e)+_0x5b5731+_0x50e55e(0x1a0));break;}}}else break;}}for(const [_0x4efe0d,_0x4a8e62]of Object['entries'](mybalances)){_0x490442[_0x50e55e(0x2b2)](_0x4efe0d);}config[_0x50e55e(0x1b1)][_0x50e55e(0x1a1)](_0x21b486=>{const _0x3facc8=_0x50e55e;!_0x490442[_0x3facc8(0x18a)](_0x21b486[_0x3facc8(0x23a)])&&(mybalances[_0x21b486[_0x3facc8(0x23a)]]=0x0);});if(_0x457454=='')for(const [_0x233ee3,_0x19cf94]of Object[_0x50e55e(0x2ad)](mybalances)){_0x19cf94!=0x0&&_0x1a770f[_0x50e55e(0x2b2)]({'coin':_0x233ee3});}else for(const [_0x3e0977,_0x5c2fe9]of Object['entries'](mybalances)){const _0x30fa4f=config[_0x50e55e(0x1b1)][_0x50e55e(0x288)](_0x498a88=>_0x498a88[_0x50e55e(0x23a)]==_0x3e0977),_0x4e4d04=_0x3e0977+'/'+_0x457454,_0x5a2cc8=_0x457454+'/'+_0x3e0977,_0x2c6429=currentCoins[_0x50e55e(0x288)](_0x27d5e7=>_0x27d5e7[_0x50e55e(0x23a)]==_0x3e0977);if((_0x5c2fe9!=0x0||_0x30fa4f)&&(allSymbols[_0x50e55e(0x18a)](_0x4e4d04)||_0x3e0977==_0x457454))_0x2c6429?_0x1a770f[_0x50e55e(0x2b2)]({..._0x2c6429,'number':Math[_0x50e55e(0x2c1)](_0x5c2fe9+(_0x30fa4f&&_0x30fa4f[_0x50e55e(0x293)]||0x0),0x0)}):_0x1a770f[_0x50e55e(0x2b2)]({'coin':_0x3e0977,'symbol':_0x4e4d04,'reverse':![],'number':Math['max'](_0x5c2fe9+(_0x30fa4f&&_0x30fa4f[_0x50e55e(0x293)]||0x0),0x0),'orderstatus':_0x50e55e(0x2eb)});else{if((_0x5c2fe9!=0x0||_0x30fa4f)&&allSymbols[_0x50e55e(0x18a)](_0x5a2cc8))_0x2c6429?_0x1a770f[_0x50e55e(0x2b2)]({..._0x2c6429,'number':Math[_0x50e55e(0x2c1)](_0x5c2fe9+(_0x30fa4f&&_0x30fa4f[_0x50e55e(0x293)]||0x0),0x0)}):_0x1a770f['push']({'coin':_0x3e0977,'symbol':_0x5a2cc8,'reverse':!![],'number':Math['max'](_0x5c2fe9+(_0x30fa4f&&_0x30fa4f[_0x50e55e(0x293)]||0x0),0x0),'orderstatus':_0x50e55e(0x2eb)});else _0x30fa4f&&_0x1a770f['push']({'coin':_0x30fa4f['coin'],'symbol':_0x30fa4f[_0x50e55e(0x298)],'reverse':_0x30fa4f[_0x50e55e(0x1d9)],'number':0x0,'orderstatus':_0x50e55e(0x2eb)});}}return _0x1a770f['sort']((_0x3b6857,_0x371dd0)=>_0x3b6857[_0x50e55e(0x15d)]<_0x371dd0[_0x50e55e(0x15d)]?0x1:_0x371dd0[_0x50e55e(0x15d)]<_0x3b6857[_0x50e55e(0x15d)]?-0x1:0x0),_0x4a9155=cloneDeep(_0x1a770f),_0x1a770f=_0x1a770f[_0x50e55e(0x2ff)](_0x5b4ea0=>{const _0x49f545=_0x50e55e,_0x5b96ef=config[_0x49f545(0x1b1)][_0x49f545(0x288)](_0x5e6cb2=>_0x5e6cb2[_0x49f545(0x23a)]==_0x5b4ea0[_0x49f545(0x23a)]);return _0x5b96ef&&!_0x5b96ef['excluded'];}),[_0x1a770f,_0x4a9155];}async function getCoinNumber(_0x42cb05){const _0x237090=_0x281bf6;let _0x37d5f0;try{const _0xb3e396=await exchange['fetchBalance']();_0x37d5f0=_0xb3e396['total'][_0x42cb05];}catch(_0x28230e){await handleError(_0x28230e,_0x237090(0x1b0));}return _0x37d5f0;}async function getOpenOrders(){const _0x16c0f1=_0x281bf6;let _0x1ba834;allOpenOrders=[];try{for(const _0x6ea78c of config[_0x16c0f1(0x1b1)]){!_0x6ea78c['excluded']&&_0x6ea78c[_0x16c0f1(0x23a)]!=config[_0x16c0f1(0x172)]&&(_0x1ba834=await exchange[_0x16c0f1(0x1f0)](_0x6ea78c[_0x16c0f1(0x298)]),_0x1ba834[_0x16c0f1(0x227)]>0x0&&allOpenOrders[_0x16c0f1(0x2b2)](_0x1ba834[0x0]));}}catch(_0xe17152){await handleError(_0xe17152,_0x16c0f1(0x2f3));}}async function handleOpenOrders(_0x13cbc9=0x0){const _0x3e76d0=_0x281bf6;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x13cbc9==0x0?(logger[_0x3e76d0(0x2a9)](_0x3e76d0(0x191)),_0x13cbc9++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3e76d0(0x2a9)](_0x3e76d0(0x320)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2ad957){const _0x42dd28=_0x281bf6,_0x3b3205=ccxt['pro'][_0x2ad957['exchange'][_0x42dd28(0x1a8)]()],_0x2855d1=new _0x3b3205({'apiKey':_0x2ad957['apiKey'],'secret':_0x2ad957['apiSecret'],'options':{'defaultType':_0x42dd28(0x246)}});if(_0x2ad957[_0x42dd28(0x24e)])_0x2855d1[_0x42dd28(0x1d6)]=_0x2ad957[_0x42dd28(0x24e)];try{await _0x2855d1[_0x42dd28(0x1d2)]();}catch(_0xc1a50e){logger[_0x42dd28(0x2a9)](_0x42dd28(0x1fb)+_0xc1a50e[_0x42dd28(0x15f)]());throw _0xc1a50e;}}function cloneDeep(_0x371001){const _0x353ee7=_0x281bf6;return JSON[_0x353ee7(0x316)](JSON[_0x353ee7(0x2e5)](_0x371001));}async function getPortfolio(_0x37a68c){const _0x2258ea=_0x281bf6;let _0x28b480=[],_0x48e196=[],_0x11a7ff=[],_0x3a2071;_0x37a68c['apiKey']=decryptRSA(secure['privateKey'],_0x37a68c[_0x2258ea(0x215)]),_0x37a68c[_0x2258ea(0x2e8)]=decryptRSA(secure['privateKey'],_0x37a68c[_0x2258ea(0x2e8)]);if(_0x37a68c[_0x2258ea(0x24e)])_0x37a68c[_0x2258ea(0x24e)]=decryptRSA(secure[_0x2258ea(0x2d1)],_0x37a68c[_0x2258ea(0x24e)]);if(_0x37a68c[_0x2258ea(0x215)]!==_0x2258ea(0x25e)||_0x37a68c[_0x2258ea(0x2e8)]!==_0x2258ea(0x25e)||_0x37a68c[_0x2258ea(0x24e)]&&_0x37a68c[_0x2258ea(0x24e)]!=='************'){if(config[_0x2258ea(0x263)]){if(_0x37a68c[_0x2258ea(0x215)]==_0x2258ea(0x25e))_0x37a68c[_0x2258ea(0x215)]=config[_0x2258ea(0x215)];if(_0x37a68c[_0x2258ea(0x2e8)]==_0x2258ea(0x25e))_0x37a68c[_0x2258ea(0x2e8)]=config[_0x2258ea(0x2e8)];if(_0x37a68c[_0x2258ea(0x24e)]==_0x2258ea(0x25e))_0x37a68c[_0x2258ea(0x24e)]=config[_0x2258ea(0x24e)];}try{await testAPI(_0x37a68c);}catch(_0x10367e){if(_0x10367e[_0x2258ea(0x15f)]()['includes']('AuthenticationError')){logHistory(_0x2258ea(0x204),_0x2258ea(0x23d)),proxyEmit(_0x2258ea(0x2f4),![]);return;}else{logHistory('error',_0x2258ea(0x27d)),logger[_0x2258ea(0x2a9)](_0x2258ea(0x28e),_0x10367e),proxyEmit(_0x2258ea(0x2f4),![]);return;}}exchange?updateExchange(_0x37a68c[_0x2258ea(0x215)],_0x37a68c[_0x2258ea(0x2e8)],_0x37a68c[_0x2258ea(0x24e)]):await initExchange(_0x37a68c[_0x2258ea(0x263)],_0x37a68c[_0x2258ea(0x215)],_0x37a68c['apiSecret'],_0x37a68c[_0x2258ea(0x24e)]);await loadSymbols();const _0x3ec00a=await getCoins(0x0,![],_0x37a68c[_0x2258ea(0x172)]);_0x11a7ff=cloneDeep(_0x3ec00a[0x1]);}else{const _0x1e90be=await getCoins();_0x11a7ff=cloneDeep(_0x1e90be[0x1]);}if(_0x37a68c['basecoin']=='')proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x11a7ff);else{_0x11a7ff[_0x2258ea(0x1a1)](_0x248f10=>{const _0xabe20b=_0x2258ea;if(_0x248f10[_0xabe20b(0x23a)]!=_0x37a68c[_0xabe20b(0x172)]&&allSymbols['includes'](_0x248f10[_0xabe20b(0x298)]))_0x28b480['push'](_0x248f10[_0xabe20b(0x298)]);});if(_0x28b480[_0x2258ea(0x227)]==0x0)logHistory(_0x2258ea(0x204),_0x2258ea(0x199));else{try{_0x48e196=await getTickers(_0x28b480);}catch(_0x90cfab){logHistory(_0x2258ea(0x204),_0x2258ea(0x27d)),logger[_0x2258ea(0x2a9)](_0x2258ea(0x2a6),_0x90cfab),proxyEmit(_0x2258ea(0x2f4),![]);return;}_0x11a7ff[_0x2258ea(0x1a1)](_0x4c5904=>{const _0x4aa93c=_0x2258ea;_0x4c5904[_0x4aa93c(0x23a)]!=_0x37a68c[_0x4aa93c(0x172)]?_0x48e196[_0x4c5904['symbol']]?_0x3a2071=_0x4c5904['reverse']?0x1/_0x48e196[_0x4c5904[_0x4aa93c(0x298)]][_0x4aa93c(0x1df)]:_0x48e196[_0x4c5904[_0x4aa93c(0x298)]][_0x4aa93c(0x1df)]:_0x3a2071=0x0:_0x3a2071=0x1,_0x4c5904[_0x4aa93c(0x211)]=formatResult(_0x3a2071,0x8);}),await getMarketCap(_0x11a7ff),proxyEmit(_0x2258ea(0x2f4),!![]),proxyEmit(_0x2258ea(0x243),_0x11a7ff);}}}function truncateTradeAmount(_0xbcebc8,_0x11a128){const _0xa109b8=_0x281bf6;let _0x574c35=0x0;try{_0x574c35=exchange[_0xa109b8(0x15e)](_0xbcebc8,_0x11a128);}catch(_0xb3a411){}return _0x574c35;}function checkMinimums(_0x4657e4){const _0x12d24e=_0x281bf6;let _0x59361d=!![];const _0x14cf45=!_0x4657e4[_0x12d24e(0x1d9)]?markets[_0x4657e4[_0x12d24e(0x298)]][_0x12d24e(0x2db)][_0x12d24e(0x310)][_0x12d24e(0x1a9)]:markets[_0x4657e4[_0x12d24e(0x298)]]['limits'][_0x12d24e(0x270)][_0x12d24e(0x1a9)],_0x73a267=!_0x4657e4[_0x12d24e(0x1d9)]?markets[_0x4657e4[_0x12d24e(0x298)]]['limits'][_0x12d24e(0x270)][_0x12d24e(0x1a9)]:markets[_0x4657e4['symbol']][_0x12d24e(0x2db)][_0x12d24e(0x310)][_0x12d24e(0x1a9)],_0x174c0b=truncateTradeAmount(_0x4657e4[_0x12d24e(0x298)],_0x4657e4[_0x12d24e(0x2d2)]);_0x4657e4[_0x12d24e(0x2d2)]=_0x174c0b;if(Math['abs'](_0x174c0b)<_0x14cf45)_0x59361d=![];if(Math['abs'](_0x174c0b)*_0x4657e4[_0x12d24e(0x1df)]<_0x73a267)_0x59361d=![];if(_0x4657e4[_0x12d24e(0x15c)]=='sell'){let _0x1f79c9=config[_0x12d24e(0x1b1)][_0x12d24e(0x288)](_0x2eaab9=>_0x2eaab9[_0x12d24e(0x23a)]==_0x4657e4[_0x12d24e(0x23a)]);if(_0x1f79c9['offset']>0x0){if(Math[_0x12d24e(0x269)](_0x174c0b)>_0x4657e4[_0x12d24e(0x251)]-_0x1f79c9['offset'])_0x59361d=![];}else{if(Math[_0x12d24e(0x269)](_0x174c0b)>_0x4657e4['number'])_0x59361d=![];}}if(_0x4657e4['side']==_0x12d24e(0x1ec)){let _0x51ba8d=config['portfolio'][_0x12d24e(0x288)](_0x1073de=>_0x1073de[_0x12d24e(0x23a)]==config[_0x12d24e(0x172)]),_0x8ae660=currentCoins[_0x12d24e(0x288)](_0x306711=>_0x306711['coin']==config[_0x12d24e(0x172)]);if(_0x51ba8d[_0x12d24e(0x293)]>0x0){if(Math[_0x12d24e(0x269)](_0x174c0b)*_0x4657e4['last']>_0x8ae660[_0x12d24e(0x251)]-_0x51ba8d[_0x12d24e(0x293)])_0x59361d=![];}else{if(Math[_0x12d24e(0x269)](_0x174c0b)*_0x4657e4[_0x12d24e(0x1df)]>_0x8ae660[_0x12d24e(0x251)])_0x59361d=![];}}return _0x59361d;}async function getBalances(_0x2f1b9b=!![]){const _0x44e2d6=_0x281bf6;let _0x2588ad=0x0,_0x51d5be;const _0x45e511=config[_0x44e2d6(0x2d3)];if(config[_0x44e2d6(0x1fe)]&&config[_0x44e2d6(0x253)]<0x0)await validate24hChanges();currentCoins[_0x44e2d6(0x1a1)](_0x59cce3=>{const _0xa58328=_0x44e2d6;if(_0x59cce3[_0xa58328(0x23a)]!=config[_0xa58328(0x172)]){let _0x8dd695=gTicker[noslash(_0x59cce3[_0xa58328(0x298)])];_0x51d5be=_0x59cce3[_0xa58328(0x1d9)]?0x1/_0x8dd695:_0x8dd695;}else _0x51d5be=0x1;let _0x5da093=_0x59cce3[_0xa58328(0x251)]*_0x51d5be;_0x2588ad+=_0x5da093,_0x59cce3['last']=formatResult(Number(_0x51d5be),0x8),_0x59cce3[_0xa58328(0x272)]=_0x5da093;}),currentCoins['forEach'](_0x2f1c64=>{const _0x958d73=_0x44e2d6;let _0x2b758d=config[_0x958d73(0x1b1)]['find'](_0x12179e=>_0x12179e[_0x958d73(0x23a)]==_0x2f1c64[_0x958d73(0x23a)]),_0x4bdab4=Number(_0x2b758d['distribution']),_0x16e3a6=_0x2f1c64['value']/_0x2588ad*0x64,_0x210473=_0x4bdab4*_0x2588ad/0x64/_0x2f1c64[_0x958d73(0x1df)]-_0x2f1c64[_0x958d73(0x251)];_0x2f1c64[_0x958d73(0x209)]=formatResult(_0x16e3a6,0x3),_0x2f1c64[_0x958d73(0x324)]=formatResult(_0x4bdab4,0x3),_0x2f1c64[_0x958d73(0x2d2)]=formatResult(_0x210473,0x8),_0x2f1c64[_0x958d73(0x15c)]='',_0x2f1c64['valid']=![];if(_0x2f1c64[_0x958d73(0x23a)]!=config[_0x958d73(0x172)]){if(_0x2f1c64[_0x958d73(0x209)]>_0x4bdab4)_0x2f1c64[_0x958d73(0x15c)]=_0x958d73(0x1b2),_0x2f1c64[_0x958d73(0x2b6)]=checkMinimums(_0x2f1c64);else _0x2f1c64[_0x958d73(0x209)]<_0x4bdab4&&(_0x2f1c64['side']=_0x958d73(0x1ec),_0x2f1c64[_0x958d73(0x2b6)]=checkMinimums(_0x2f1c64));}_0x2f1c64[_0x958d73(0x15d)]=_0x2f1c64[_0x958d73(0x209)]/_0x2f1c64[_0x958d73(0x324)]-0x1;if(_0x2f1c64[_0x958d73(0x19a)]==_0x958d73(0x1e8)||_0x2f1c64[_0x958d73(0x19a)]==_0x958d73(0x22d))_0x2f1c64['orderstatus']=_0x958d73(0x2eb);}),currentCoins[_0x44e2d6(0x29f)]((_0x11670c,_0x10e282)=>_0x11670c['delta']<_0x10e282['delta']?0x1:_0x10e282[_0x44e2d6(0x15d)]<_0x11670c['delta']?-0x1:0x0);const _0x573e38=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x573e38[_0x44e2d6(0x2d4)],'usd':_0x573e38[_0x44e2d6(0x213)],'portfolio':JSON[_0x44e2d6(0x2e5)](currentCoins),'threshold':_0x45e511},proxyEmit(_0x44e2d6(0x2a0),{'serverversion':serverversion,'balances':lastBalances});if(_0x2f1b9b){if(config[_0x44e2d6(0x1fe)])headlessMode({'portfolio':currentCoins,'threshold':_0x45e511});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x45e511});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x231c34=getNormalizedPerformance();getStartingBalances(_0x231c34),emitPerformance(_0x231c34);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x16a325=_0x281bf6;if(!lastBalances)return;let _0x270233=[],_0x4545dd,_0x13624b=JSON[_0x16a325(0x316)](lastBalances[_0x16a325(0x1b1)]);_0x13624b['sort']((_0x1fe7c1,_0x180b7e)=>_0x1fe7c1['coin']>_0x180b7e[_0x16a325(0x23a)]?0x1:_0x180b7e[_0x16a325(0x23a)]>_0x1fe7c1[_0x16a325(0x23a)]?-0x1:0x0),_0x13624b[_0x16a325(0x1a1)](_0xb13831=>{const _0x5b52de=_0x16a325;let _0x69b3a3={'coin':_0xb13831[_0x5b52de(0x23a)],'number':_0xb13831[_0x5b52de(0x251)],'price':_0xb13831[_0x5b52de(0x1df)]};_0x270233[_0x5b52de(0x2b2)](_0x69b3a3);});const _0x44cfab=await getFiat();_0x4545dd={'date':lastBalances[_0x16a325(0x198)][_0x16a325(0x258)]('\x20')[0x0],'eur':_0x44cfab[_0x16a325(0x2d4)],'usd':_0x44cfab[_0x16a325(0x213)],'coins':_0x270233};let _0x37c637=dbPerformance[_0x16a325(0x265)](_0x16a325(0x18c))[_0x16a325(0x288)]({'date':_0x4545dd[_0x16a325(0x314)]})['value']();_0x37c637?_0x4545dd['date']!=config[_0x16a325(0x2dd)]&&dbPerformance[_0x16a325(0x265)](_0x16a325(0x18c))['find']({'date':_0x4545dd[_0x16a325(0x314)]})[_0x16a325(0x308)](_0x4545dd)[_0x16a325(0x294)]():dbPerformance['get'](_0x16a325(0x18c))['push'](_0x4545dd)[_0x16a325(0x294)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x36ec8f=_0x281bf6;let _0x510d4f=[];if(dbPerformance['has']('data')[_0x36ec8f(0x272)]()){let _0x27dd89=dbPerformance[_0x36ec8f(0x265)](_0x36ec8f(0x18c))[_0x36ec8f(0x20a)]()[_0x36ec8f(0x2ff)](_0x5bf6b4=>{const _0xd8c518=_0x36ec8f;if(_0x5bf6b4[_0xd8c518(0x2e7)][_0xd8c518(0x227)]==0x0)return![];else return!![];})[_0x36ec8f(0x190)]('date')['value'](),_0xf589bd=[...config[_0x36ec8f(0x31a)]];_0xf589bd[_0x36ec8f(0x29f)]((_0x370e5a,_0x9d1e9e)=>_0x370e5a[_0x36ec8f(0x314)]>_0x9d1e9e['date']?-0x1:_0x9d1e9e[_0x36ec8f(0x314)]>_0x370e5a[_0x36ec8f(0x314)]?0x1:0x0);let _0x38d05d=0x1,_0x37a9ca=[],_0x3a760a=0x0;_0x27dd89[_0x36ec8f(0x28f)]()[_0x36ec8f(0x1d9)]()['forEach']((_0x7e1359,_0x173819)=>{const _0x2ef4c9=_0x36ec8f;if(_0xf589bd[_0x3a760a]){if(_0x27dd89[_0x27dd89[_0x2ef4c9(0x227)]-_0x173819]&&_0xf589bd[_0x3a760a][_0x2ef4c9(0x314)]==_0x27dd89[_0x27dd89[_0x2ef4c9(0x227)]-_0x173819][_0x2ef4c9(0x314)]){if(_0x173819<_0x27dd89['length']){let _0x2e305b=0x0,_0x331893=0x0;_0x27dd89[_0x27dd89[_0x2ef4c9(0x227)]-_0x173819][_0x2ef4c9(0x2e7)][_0x2ef4c9(0x1a1)](_0x598c48=>{const _0x176915=_0x2ef4c9;_0x331893+=_0x598c48['number']*_0x598c48[_0x176915(0x211)];}),_0xf589bd[_0x3a760a][_0x2ef4c9(0x2ed)]['forEach'](_0x4a3b6e=>{const _0xa2cabe=_0x2ef4c9;_0x2e305b+=_0x4a3b6e['number']*_0x4a3b6e[_0xa2cabe(0x211)];}),_0x38d05d*=_0x2e305b/(_0x331893-_0x2e305b)+0x1;}_0x3a760a++;}}let _0x4fbd63=0x0;_0x7e1359['coins'][_0x2ef4c9(0x1a1)](_0x57ef2e=>{const _0x20e48c=_0x2ef4c9;_0x4fbd63+=_0x57ef2e[_0x20e48c(0x251)]*_0x57ef2e[_0x20e48c(0x211)];}),_0x37a9ca[_0x27dd89[_0x2ef4c9(0x227)]-_0x173819-0x1]=_0x4fbd63*(_0x38d05d-0x1);});let _0x4d2cdc=[];_0xf589bd=[...config[_0x36ec8f(0x31a)]]||[];let _0x32214=0x0;_0x3a760a=0x0,_0x27dd89[_0x36ec8f(0x1a1)]((_0x37cb5f,_0x4a2425)=>{const _0x47f89b=_0x36ec8f;if(_0xf589bd[_0x3a760a]){const _0x586a2e=fns['parse'](_0xf589bd[_0x3a760a][_0x47f89b(0x314)],_0x47f89b(0x164),new Date()),_0x5c9e84=fns[_0x47f89b(0x316)](_0x37cb5f['date'],_0x47f89b(0x164),new Date());if(fns[_0x47f89b(0x31f)](_0x586a2e,_0x5c9e84)){let _0x46f357=0x0;_0xf589bd[_0x3a760a][_0x47f89b(0x2ed)][_0x47f89b(0x1a1)](_0x3aebe3=>{const _0x21ad98=_0x47f89b;!_0x4d2cdc[_0x3aebe3['coin']]?_0x4d2cdc[_0x3aebe3['coin']]=_0x3aebe3['number']:(_0x46f357=_0x4d2cdc[_0x3aebe3[_0x21ad98(0x23a)]],_0x4d2cdc[_0x3aebe3[_0x21ad98(0x23a)]]+=_0x3aebe3[_0x21ad98(0x251)]);const _0x43236c=_0x37cb5f[_0x21ad98(0x2e7)][_0x21ad98(0x288)](_0xde43a3=>_0xde43a3[_0x21ad98(0x23a)]==_0x3aebe3[_0x21ad98(0x23a)]);(!_0x43236c||_0x43236c['number']==0x0)&&(_0x32214+=(-_0x3aebe3['number']-_0x46f357)*_0x3aebe3['price']);}),_0x3a760a++;}}_0x37cb5f[_0x47f89b(0x2e7)][_0x47f89b(0x1a1)]((_0xf232ae,_0x56f453)=>{const _0x4fe90f=_0x47f89b;_0x4d2cdc[_0xf232ae[_0x4fe90f(0x23a)]]&&(_0xf232ae[_0x4fe90f(0x2e4)]=_0x4d2cdc[_0xf232ae[_0x4fe90f(0x23a)]]);}),_0x510d4f[_0x47f89b(0x2b2)]({'date':_0x37cb5f[_0x47f89b(0x314)],'eur':_0x37cb5f[_0x47f89b(0x2d4)],'usd':_0x37cb5f['usd'],'offset':_0x37a9ca[_0x4a2425],'netoffset':_0x32214,'coins':_0x37cb5f['coins']});});}return _0x510d4f;}function emitPerformance(_0x3ae230){const _0x299711=_0x281bf6;_0x3ae230[_0x299711(0x227)]!==0x0?(proxyEmit(_0x299711(0x323),_0x3ae230),lastPerformanceEmitted=getDate()):proxyEmit(_0x299711(0x323),[]);}function getPerf(_0x8edc8e,_0x5f16bb){const _0x514efa=_0x281bf6;let _0x4a5967=0x0,_0x410824=0x0,_0x14a987=0x0;_0x8edc8e[_0x514efa(0x2e7)][_0x514efa(0x1a1)](_0x21a72d=>{const _0x56cc0c=_0x514efa;_0x4a5967+=_0x21a72d['number']*_0x21a72d[_0x56cc0c(0x211)];});_0x5f16bb&&(_0x4a5967+=_0x8edc8e['offset']);if(config['basecoin']===_0x514efa(0x1f7)||config[_0x514efa(0x172)]==='ETH'||config[_0x514efa(0x172)]==='PAXG')_0x410824=_0x4a5967*_0x8edc8e[_0x514efa(0x2d4)],_0x14a987=_0x4a5967*_0x8edc8e['usd'];else{if(usdBasecoins[_0x514efa(0x18a)](config[_0x514efa(0x172)]))_0x410824=_0x4a5967*_0x8edc8e[_0x514efa(0x2d4)]/_0x8edc8e['usd'],_0x14a987=_0x4a5967;else config[_0x514efa(0x172)]==='EUR'&&(_0x410824=_0x4a5967,_0x14a987=_0x4a5967*_0x8edc8e[_0x514efa(0x213)]/_0x8edc8e[_0x514efa(0x2d4)]);}return[_0x4a5967,_0x410824,_0x14a987];}function getKPIs(_0x31de53,_0x488403=_0x281bf6(0x17c)){const _0x19bd7f=_0x281bf6,_0x3486f1=config[_0x19bd7f(0x172)],_0x28d81a=lastBalances,_0x1dc209=currentCoins,_0x548f58=getNormalizedPerformance(),_0x48cd7d=_0x31de53===_0x19bd7f(0x172)?_0x3486f1:_0x31de53==='fiat'||_0x31de53==='net-fiat'?_0x488403:'Net\x20'+_0x3486f1,_0x7f86e=_0x31de53==='net-basecoin'?'Net\x20effect':_0x31de53===_0x19bd7f(0x26d)?_0x19bd7f(0x238):_0x48cd7d+'\x20value',_0x44bd39=_0x31de53===_0x19bd7f(0x2d6)||_0x31de53===_0x19bd7f(0x26d)?_0x19bd7f(0x238):_0x48cd7d+_0x19bd7f(0x186);let _0x2d4180=0x0;_0x1dc209[_0x19bd7f(0x1a1)](_0x317a92=>{const _0xebb4d5=_0x19bd7f;_0x2d4180+=_0x317a92[_0xebb4d5(0x251)]*_0x317a92[_0xebb4d5(0x1df)];});if(_0x31de53==='fiat'||_0x31de53==='net-fiat'){if(_0x3486f1==='BTC'||_0x3486f1===_0x19bd7f(0x317)||_0x3486f1===_0x19bd7f(0x259))_0x2d4180=_0x2d4180*(_0x488403===_0x19bd7f(0x17c)?_0x28d81a[_0x19bd7f(0x2d4)]:_0x28d81a[_0x19bd7f(0x213)]);else{if(usdBasecoins['includes'](_0x3486f1))_0x2d4180=_0x2d4180*(_0x488403===_0x19bd7f(0x17c)?_0x28d81a[_0x19bd7f(0x2d4)]/_0x28d81a[_0x19bd7f(0x213)]:0x1);else _0x3486f1===_0x19bd7f(0x17c)&&(_0x2d4180=_0x2d4180*(_0x488403===_0x19bd7f(0x17c)?0x1:_0x28d81a[_0x19bd7f(0x213)]/_0x28d81a[_0x19bd7f(0x2d4)]));}}let _0x44ebfa;if(_0x2d4180!==0x0){if(_0x31de53===_0x19bd7f(0x172))_0x44ebfa=(_0x2d4180/startingBalances[_0x19bd7f(0x172)]-0x1)*0x64;else{if(_0x488403===_0x19bd7f(0x17c))_0x44ebfa=(_0x2d4180/startingBalances[_0x19bd7f(0x2d4)]-0x1)*0x64;else _0x44ebfa=(_0x2d4180/startingBalances[_0x19bd7f(0x213)]-0x1)*0x64;}let _0x3d7ed5=0x0;if(startingBalances[_0x19bd7f(0x2e7)])_0x1dc209['forEach'](_0xade922=>{const _0x142279=_0x19bd7f;let _0x4a09cf=startingBalances[_0x142279(0x2e7)]['find'](_0x5cdf4e=>_0x5cdf4e[_0x142279(0x23a)]===_0xade922[_0x142279(0x23a)]);if(_0x4a09cf&&_0x4a09cf['coin']&&_0xade922[_0x142279(0x251)]!==0x0)_0x3d7ed5+=_0x4a09cf[_0x142279(0x251)]*_0xade922[_0x142279(0x1df)];});let _0x5d80c2=0x0;if(_0x548f58['length']!==0x0){let _0x3875b0=_0x548f58[_0x548f58['length']-0x1];_0x5d80c2=_0x3875b0[_0x19bd7f(0x18e)];}_0x3d7ed5-=_0x5d80c2;_0x31de53===_0x19bd7f(0x2d6)&&(_0x44ebfa=(_0x2d4180-_0x3d7ed5)/startingBalances[_0x19bd7f(0x172)]*0x64,_0x2d4180=_0x2d4180-_0x3d7ed5);if(_0x31de53===_0x19bd7f(0x26d)){let _0x3b7844=_0x488403==='EUR'?startingBalances[_0x19bd7f(0x2d4)]:startingBalances['usd'];if(_0x3486f1===_0x19bd7f(0x1f7)||_0x3486f1===_0x19bd7f(0x317)||_0x3486f1==='PAXG')_0x3d7ed5=_0x488403==='EUR'?_0x3d7ed5*_0x28d81a[_0x19bd7f(0x2d4)]:_0x3d7ed5*_0x28d81a['usd'];else{if(usdBasecoins[_0x19bd7f(0x18a)](_0x3486f1))_0x3d7ed5=_0x488403===_0x19bd7f(0x17c)?_0x3d7ed5*_0x28d81a[_0x19bd7f(0x2d4)]/_0x28d81a[_0x19bd7f(0x213)]:_0x3d7ed5;else _0x3486f1===_0x19bd7f(0x17c)&&(_0x3d7ed5=_0x488403==='EUR'?_0x3d7ed5:_0x3d7ed5*_0x28d81a[_0x19bd7f(0x213)]/_0x28d81a[_0x19bd7f(0x2d4)]);}_0x44ebfa=(_0x2d4180-_0x3d7ed5)/_0x3b7844*0x64,_0x2d4180=_0x2d4180-_0x3d7ed5;}if(_0x44ebfa){if(_0x44ebfa<0x64)_0x44ebfa=_0x44ebfa['toFixed'](0x2);else{if(_0x44ebfa<0x3e8)_0x44ebfa=_0x44ebfa['toFixed'](0x1);else _0x44ebfa=_0x44ebfa[_0x19bd7f(0x30b)](0x0);}}else _0x44ebfa=Number('0')['toFixed'](0x2);if(_0x2d4180){if(Math[_0x19bd7f(0x269)](_0x2d4180)<0.000001)_0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x2);else{if(Math[_0x19bd7f(0x269)](_0x2d4180)<0.1)_0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x6);else{if(Math[_0x19bd7f(0x269)](_0x2d4180)<0x1)_0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x5);else{if(Math[_0x19bd7f(0x269)](_0x2d4180)<0xa)_0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x4);else{if(Math[_0x19bd7f(0x269)](_0x2d4180)<0x64)_0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x3);else{if(Math[_0x19bd7f(0x269)](_0x2d4180)<0x3e8)_0x2d4180=_0x2d4180['toFixed'](0x2);else _0x2d4180=_0x2d4180[_0x19bd7f(0x30b)](0x2);}}}}}}else _0x2d4180=Number('0')[_0x19bd7f(0x30b)](0x2);}else _0x44ebfa=Number('0')['toFixed'](0x2);return{'value':_0x2d4180,'change':_0x44ebfa,'leftTxt':_0x7f86e,'rightTxt':_0x44bd39};}async function getStartingBalances(_0x13d8bf,_0x1e242e=!![]){const _0x4578be=_0x281bf6;if(_0x13d8bf[_0x4578be(0x227)]!==0x0){const [_0x70db3f,_0x573207,_0xfe0022]=getPerf(_0x13d8bf[0x0],!![]);let _0x47109c=[];config['portfolio']['forEach'](_0xe8f6c2=>{const _0x5dd428=_0x4578be;let _0x469c0b=0x0,_0x46e918;config[_0x5dd428(0x31a)][_0x5dd428(0x1a1)](_0xbd63e9=>{const _0x205185=_0x5dd428;let _0x2220a6=_0xbd63e9[_0x205185(0x2ed)][_0x205185(0x288)](_0x206f2b=>_0x206f2b['coin']==_0xe8f6c2[_0x205185(0x23a)]);if(_0x2220a6){_0x469c0b+=_0x2220a6[_0x205185(0x251)];if(!_0x46e918)_0x46e918=_0x2220a6[_0x205185(0x211)];}}),_0x47109c[_0x5dd428(0x2b2)]({'coin':_0xe8f6c2[_0x5dd428(0x23a)],'number':_0x469c0b,'initialprice':_0x46e918});});const _0x576880={'basecoin':_0x70db3f,'eur':_0x573207,'usd':_0xfe0022,'coins':_0x47109c};if(_0x1e242e)proxyEmit(_0x4578be(0x240),_0x576880);startingBalances=_0x576880;}}async function headlessMode(_0x32fd32){const _0x119597=_0x281bf6;let _0x11a685=_0x32fd32[_0x119597(0x1b1)],_0x27e9d8=_0x32fd32[_0x119597(0x2d3)],_0x357ee0=[];for(let _0x2e2568 of _0x11a685){if(_0x2e2568[_0x119597(0x23a)]!=config['basecoin']){if(_0x2e2568[_0x119597(0x15d)]>=_0x27e9d8/0x64){if(_0x2e2568['valid'])_0x357ee0['push'](_0x2e2568);}else{if(_0x2e2568[_0x119597(0x15d)]<=-_0x27e9d8/0x64){if(_0x2e2568[_0x119597(0x2b6)])_0x357ee0[_0x119597(0x2b2)](_0x2e2568);}}}}let _0x3b0437=!![];if(_0x357ee0[_0x119597(0x227)]>0x0){lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x357ee0[_0x119597(0x1a1)](_0x1af288=>{const _0x95ab=_0x119597;_0x1af288[_0x95ab(0x251)]!=prevAmountAtOrder[_0x1af288['coin']]?logger[_0x95ab(0x2a9)]('Valid\x20trigger:\x20'+_0x1af288['coin']+'\x20'+_0x1af288['number']+'\x20'+_0x1af288[_0x95ab(0x1df)]+'\x20'+_0x1af288[_0x95ab(0x209)]+'%\x20'+_0x1af288[_0x95ab(0x324)]+'%\x20'+(0x64*_0x1af288['delta'])[_0x95ab(0x30b)](0x2)+_0x95ab(0x30d)+_0x27e9d8[_0x95ab(0x30b)](0x2)+'%)'):(logger[_0x95ab(0x2a9)](_0x95ab(0x2a5)+_0x1af288['coin']+'\x20'+_0x1af288[_0x95ab(0x251)]+'\x20'+_0x1af288[_0x95ab(0x1df)]+'\x20'+_0x1af288['distribution']+'%\x20'+_0x1af288[_0x95ab(0x324)]+'%\x20'+(0x64*_0x1af288[_0x95ab(0x15d)])['toFixed'](0x2)+'%\x20('+_0x27e9d8['toFixed'](0x2)+'%)'),logger['debug'](_0x95ab(0x26c)+_0x1af288[_0x95ab(0x23a)]+':',prevAmountAtOrder[_0x1af288[_0x95ab(0x23a)]]),_0x3b0437=![]);});if(_0x3b0437)placeOrder(_0x357ee0);else{const _0x4ef9d1=await getCoins();[currentCoins,currentCoinsAll]=_0x4ef9d1;}}}function notifyBalance(_0x203246){const _0x5e96d0=_0x281bf6;let _0x50a94d=_0x203246['portfolio'],_0x4be6c4=_0x203246[_0x5e96d0(0x2d3)],_0x1dc5da=[];for(let _0x1695fe of _0x50a94d){if(_0x1695fe[_0x5e96d0(0x23a)]!=config[_0x5e96d0(0x172)]){if(_0x1695fe['delta']>=_0x4be6c4/0x64){if(_0x1695fe[_0x5e96d0(0x2b6)])_0x1dc5da[_0x5e96d0(0x2b2)](_0x1695fe);}else{if(_0x1695fe[_0x5e96d0(0x15d)]<=-_0x4be6c4/0x64){if(_0x1695fe[_0x5e96d0(0x2b6)])_0x1dc5da['push'](_0x1695fe);}}}}if(_0x1dc5da[_0x5e96d0(0x227)]>0x0){let _0x3cf03c=_0x1dc5da[_0x5e96d0(0x301)](_0x369389=>_0x369389[_0x5e96d0(0x23a)]);_0x3cf03c[_0x5e96d0(0x29f)]();let _0x3673dc=_0x3cf03c[_0x5e96d0(0x2af)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x5e96d0(0x1cd));lastCoinsToBalance=_0x3673dc;}}function symbolToCoin(_0x471e06){const _0x5be9cb=_0x281bf6;let _0x2bdef3;if(_0x471e06['includes']('/'+config[_0x5be9cb(0x172)]))_0x2bdef3=_0x471e06[_0x5be9cb(0x248)]('/'+config['basecoin'],'');if(_0x471e06[_0x5be9cb(0x18a)](config[_0x5be9cb(0x172)]+'/'))_0x2bdef3=_0x471e06['replace'](config[_0x5be9cb(0x172)]+'/','');return _0x2bdef3;}async function unlockOrders(_0x28dee8=![]){const _0x279c6b=_0x281bf6;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger['debug']('1\x20-\x20Unlocking\x20orders'),lockOrders=ORDERS[_0x279c6b(0x29b)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);if(_0x28dee8){const _0x1339f8=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1339f8,setBlockTransactionDetection(![]);}validateOrdersState=_0x279c6b(0x2e4),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x279c6b(0x2a9)](_0x279c6b(0x2f9));}}async function validateOrders(_0x1221ed){const _0x21b60b=_0x281bf6;if(_0x1221ed)validateOrdersState=_0x1221ed;logger[_0x21b60b(0x2a9)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x21b60b(0x2a2)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x21b60b(0x219):_0x21b60b(0x1ca)));let _0x4301ef=[],_0x11816e=config[_0x21b60b(0x24a)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x21b60b(0x284)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x21b60b(0x1b4)])return;logger['debug'](_0x21b60b(0x187)+validateOrdersState),lastOrders[_0x21b60b(0x1a1)](_0x6cbde0=>{const _0x57759a=_0x21b60b;let _0xf2ad1d=![];_0x6cbde0[_0x57759a(0x1e8)]>0x0&&(_0xf2ad1d=!![]),_0x4301ef['push'](_0xf2ad1d),_0xf2ad1d&&config['ordertype']!=_0x57759a(0x26a)&&logHistory(_0x57759a(0x19f),_0x57759a(0x203)+_0x6cbde0[_0x57759a(0x298)]+'\x20'+_0x6cbde0[_0x57759a(0x15c)]+'\x20#'+formatResult(_0x6cbde0[_0x57759a(0x1e8)],0x8)+'\x20@'+formatResult(_0x6cbde0['price'],0x8));}),_0x4301ef[_0x21b60b(0x1a1)]((_0x51307c,_0x515668)=>{const _0x415928=_0x21b60b;if(_0x51307c)lastOrders[_0x415928(0x255)](_0x515668,0x1);}),persistOpenOrders(lastOrders);const _0x5c0535=coolingDown?_0x21b60b(0x17b):_0x21b60b(0x1f6);if(validateOrdersState==_0x21b60b(0x2e4)){validateOrdersState='ongoing';if(_0x4301ef[_0x21b60b(0x18a)](![])){if(config[_0x21b60b(0x24a)]==_0x21b60b(0x26a)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x4301ef[_0x21b60b(0x18a)](![])){}else{if(allOrdersPlaced){if(config[_0x21b60b(0x24a)]==_0x21b60b(0x26a)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x21b60b(0x165))_0x4301ef['includes'](![])&&(config[_0x21b60b(0x24a)]==_0x21b60b(0x26a)?logHistory(_0x21b60b(0x167),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x21b60b(0x2b3)](_0x11816e*validateOrderInterval/0xea60)+_0x21b60b(0x322)+_0x5c0535):(await cancelOrders(),logHistory(_0x21b60b(0x167),_0x21b60b(0x21f)+Math[_0x21b60b(0x2b3)](_0x11816e*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x5c0535))),await unlockOrders(!![]);else{if(validateOrdersState==_0x21b60b(0x2f5)){if(config[_0x21b60b(0x24a)]!=_0x21b60b(0x26a))logHistory(_0x21b60b(0x167),_0x21b60b(0x25f)+_0x5c0535);await unlockOrders(!![]);}}}}}async function cancelOrders(){const _0x2e4d53=_0x281bf6;lastOrders[_0x2e4d53(0x1a1)](async _0xb14ad0=>{const _0x28d090=_0x2e4d53;try{const _0x33663f=await exchange[_0x28d090(0x285)](_0xb14ad0[_0x28d090(0x1af)],_0xb14ad0[_0x28d090(0x298)]);}catch(_0x26edc2){if(_0x26edc2[_0x28d090(0x15f)]()[_0x28d090(0x18a)]('OrderNotFound')){}else await handleError(_0x26edc2,_0x28d090(0x1d8));}});}async function initCoinResults(_0x2ed1f5){const _0x4f8af3=_0x281bf6;_0x2ed1f5?logger['debug'](_0x4f8af3(0x188)+_0x2ed1f5):logger[_0x4f8af3(0x2a9)](_0x4f8af3(0x302)),config[_0x4f8af3(0x1b1)][_0x4f8af3(0x1a1)](_0x3ad88c=>{const _0x334e3f=_0x4f8af3;if(!_0x3ad88c['excluded']&&_0x3ad88c[_0x334e3f(0x23a)]!=config[_0x334e3f(0x172)]){const _0x232be0=currentCoins[_0x334e3f(0x288)](_0x2da7ee=>_0x2da7ee[_0x334e3f(0x23a)]==_0x3ad88c[_0x334e3f(0x23a)]),_0x5ce851=gTicker[noslash(_0x3ad88c[_0x334e3f(0x298)])];let _0x373642=_0x232be0?_0x232be0[_0x334e3f(0x251)]:null,_0x2411b8=_0x3ad88c[_0x334e3f(0x1d9)]?0x1/_0x5ce851:_0x5ce851,_0x39aacd;config[_0x334e3f(0x31a)][_0x334e3f(0x1a1)](_0x322322=>{const _0x25b0a3=_0x334e3f;!_0x39aacd&&(_0x39aacd=_0x322322[_0x25b0a3(0x2ed)][_0x25b0a3(0x288)](_0x26d505=>_0x26d505['coin']==_0x3ad88c['coin']),_0x39aacd&&(_0x373642=_0x39aacd[_0x25b0a3(0x251)],_0x2411b8=_0x39aacd[_0x25b0a3(0x211)]));});let _0x507bd6=dbCoinResults[_0x334e3f(0x265)]('coins')[_0x334e3f(0x288)]({'coin':_0x3ad88c['coin']})[_0x334e3f(0x272)]();if(!_0x507bd6){const _0x2307aa={'coin':_0x3ad88c['coin'],'number':_0x373642,'breakeven':_0x2411b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x334e3f(0x265)](_0x334e3f(0x2e7))[_0x334e3f(0x2b2)](_0x2307aa)[_0x334e3f(0x294)]();}else{if(_0x2ed1f5&&_0x3ad88c[_0x334e3f(0x23a)]==_0x2ed1f5){const _0x317174={'coin':_0x3ad88c[_0x334e3f(0x23a)],'number':_0x373642,'breakeven':_0x2411b8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x334e3f(0x2e7))['find']({'coin':_0x3ad88c[_0x334e3f(0x23a)]})['assign'](_0x317174)[_0x334e3f(0x294)]();}}}});}async function updateCoinResults(_0x105f3c,_0x5b28ca=![]){const _0x2d1e38=_0x281bf6;let _0xd79e6f,_0x49b00f,_0x31c931,_0x372f13,_0x3c2adf,_0x219960,_0x294f74=dbCoinResults['get'](_0x2d1e38(0x2e7))[_0x2d1e38(0x288)]({'coin':_0x105f3c[_0x2d1e38(0x23a)]})[_0x2d1e38(0x272)](),_0x36071f=![];_0x294f74&&Object['entries'](_0x294f74)['forEach'](([_0x515e19,_0x7f5d4c])=>{if(_0x7f5d4c==null)_0x36071f=!![];});(!_0x294f74||_0x36071f)&&(await initCoinResults(_0x105f3c[_0x2d1e38(0x23a)]),_0x294f74=dbCoinResults[_0x2d1e38(0x265)](_0x2d1e38(0x2e7))[_0x2d1e38(0x288)]({'coin':_0x105f3c[_0x2d1e38(0x23a)]})[_0x2d1e38(0x272)]());_0x105f3c[_0x2d1e38(0x1d9)]&&(_0x219960={'filled':_0x105f3c[_0x2d1e38(0x1e8)]*_0x105f3c[_0x2d1e38(0x211)],'amount':_0x105f3c['filled']*_0x105f3c[_0x2d1e38(0x211)],'side':_0x105f3c[_0x2d1e38(0x15c)]==_0x2d1e38(0x1b2)?'buy':'sell','price':0x1/_0x105f3c[_0x2d1e38(0x211)]},_0x105f3c={..._0x105f3c,..._0x219960});_0x5b28ca?_0x49b00f=_0x105f3c[_0x2d1e38(0x15c)]==_0x2d1e38(0x1ec)?_0x294f74[_0x2d1e38(0x251)]+_0x105f3c['filled']:_0x294f74[_0x2d1e38(0x251)]-_0x105f3c[_0x2d1e38(0x1e8)]:_0x49b00f=await getCoinNumber(_0x105f3c[_0x2d1e38(0x23a)]);if(_0x105f3c['fee']&&_0x105f3c['fee'][_0x2d1e38(0x25b)]==config[_0x2d1e38(0x172)])_0xd79e6f=Number(_0x105f3c[_0x2d1e38(0x279)][_0x2d1e38(0x270)]);else{if(_0x105f3c[_0x2d1e38(0x279)]&&_0x105f3c[_0x2d1e38(0x279)][_0x2d1e38(0x25b)]==_0x2d1e38(0x15b)&&!_0x5b28ca&&config['basecoin']!='PAXG')_0xd79e6f=Number(_0x105f3c[_0x2d1e38(0x279)]['cost'])*gTicker[_0x2d1e38(0x15b)+config['basecoin']];else _0xd79e6f=defaultFee*_0x105f3c[_0x2d1e38(0x1e8)]*_0x105f3c['price'];}_0x105f3c[_0x2d1e38(0x15c)]=='buy'?(_0x31c931=_0x49b00f!=0x0?(_0x294f74[_0x2d1e38(0x19b)]*_0x294f74[_0x2d1e38(0x251)]+_0x105f3c[_0x2d1e38(0x211)]*(_0x49b00f-_0x294f74[_0x2d1e38(0x251)])+_0xd79e6f)/_0x49b00f:0x0,_0x372f13=_0x294f74[_0x2d1e38(0x174)]):(_0x31c931=_0x49b00f!=0x0?(_0x294f74[_0x2d1e38(0x19b)]*_0x294f74['number']-_0x105f3c[_0x2d1e38(0x211)]*(_0x294f74['number']-_0x49b00f)+_0xd79e6f)/_0x49b00f:0x0,_0x372f13=_0x294f74[_0x2d1e38(0x174)]+(_0x105f3c[_0x2d1e38(0x211)]-_0x294f74[_0x2d1e38(0x19b)])*_0x105f3c['filled']);_0x3c2adf=(_0x105f3c[_0x2d1e38(0x211)]-_0x31c931-_0xd79e6f/_0x105f3c[_0x2d1e38(0x1e8)])*_0x49b00f;let _0x1c8d81={'coin':_0x105f3c[_0x2d1e38(0x23a)],'number':_0x49b00f,'breakeven':formatResult(_0x31c931,0x8),'realized':formatResult(_0x372f13,0x8),'unrealized':formatResult(_0x3c2adf,0x8),'fees':formatResult(_0x294f74[_0x2d1e38(0x2ea)]+_0xd79e6f,0x8),'sells':_0x105f3c[_0x2d1e38(0x15c)]==_0x2d1e38(0x1b2)?_0x294f74[_0x2d1e38(0x231)]+0x1:_0x294f74[_0x2d1e38(0x231)],'buys':_0x105f3c[_0x2d1e38(0x15c)]==_0x2d1e38(0x1ec)?_0x294f74[_0x2d1e38(0x23f)]+0x1:_0x294f74[_0x2d1e38(0x23f)]};dbCoinResults[_0x2d1e38(0x265)](_0x2d1e38(0x2e7))[_0x2d1e38(0x288)]({'coin':_0x105f3c[_0x2d1e38(0x23a)]})[_0x2d1e38(0x308)](_0x1c8d81)[_0x2d1e38(0x294)]();if(!_0x5b28ca){if(_0x105f3c[_0x2d1e38(0x279)]&&_0x105f3c[_0x2d1e38(0x279)][_0x2d1e38(0x25b)]==_0x2d1e38(0x15b)){const _0x5f3403=currentCoins[_0x2d1e38(0x288)](_0x556c8c=>_0x556c8c[_0x2d1e38(0x23a)]==_0x2d1e38(0x15b));if(_0x5f3403){let _0x5ca158=dbCoinResults['get']('coins')[_0x2d1e38(0x288)]({'coin':_0x2d1e38(0x15b)})['value']();_0x1c8d81={..._0x5ca158,'number':_0x5f3403[_0x2d1e38(0x251)]},dbCoinResults[_0x2d1e38(0x265)]('coins')[_0x2d1e38(0x288)]({'coin':_0x2d1e38(0x15b)})[_0x2d1e38(0x308)](_0x1c8d81)[_0x2d1e38(0x294)]();}}}}async function placeOrder(_0x2b780b){const _0x25ef69=_0x281bf6,_0x3295f9=config[_0x25ef69(0x24a)]==_0x25ef69(0x26a)?_0x25ef69(0x26a):_0x25ef69(0x2ef);if(lockOrders==ORDERS[_0x25ef69(0x1d5)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x25ef69(0x2e4);let _0x1df12b=![];lastOrders=[];for(const _0x11211e of _0x2b780b){let _0x308e66,_0x589cd2,_0x552f76,_0x43822f,_0x39b124,_0x472215=_0x11211e[_0x25ef69(0x298)];try{const _0x452bba=await exchange['fetchTicker'](_0x472215);_0x308e66=_0x11211e[_0x25ef69(0x1d9)]?0x1/_0x11211e['last']:_0x11211e[_0x25ef69(0x1df)],_0x589cd2=_0x452bba[_0x25ef69(0x169)],_0x552f76=_0x452bba[_0x25ef69(0x1c1)];_0x11211e[_0x25ef69(0x1d9)]?(_0x43822f=_0x11211e[_0x25ef69(0x15c)]=='buy'?'sell':_0x25ef69(0x1ec),_0x39b124=Math[_0x25ef69(0x269)](_0x11211e[_0x25ef69(0x2d2)])/_0x308e66):(_0x43822f=_0x11211e[_0x25ef69(0x15c)],_0x39b124=Math['abs'](_0x11211e[_0x25ef69(0x2d2)]));_0x3295f9==_0x25ef69(0x2ef)&&(config[_0x25ef69(0x24a)]==_0x25ef69(0x19d)&&(_0x308e66=_0x43822f=='buy'?_0x589cd2:_0x552f76),config['ordertype']=='limit-low'&&(_0x308e66=_0x43822f=='buy'?_0x552f76:_0x589cd2));_0x39b124=formatResult(_0x39b124,0x8),_0x308e66=formatResult(_0x308e66,0x8);const _0x1d990c=_0x43822f=='sell'?config[_0x25ef69(0x16a)]?String['fromCodePoint']('0x'+config[_0x25ef69(0x16a)])+'\x20':'':config[_0x25ef69(0x2ab)]?String['fromCodePoint']('0x'+config[_0x25ef69(0x2ab)])+'\x20':'',_0x3cce4b=_0x3295f9==_0x25ef69(0x26a)?_0x25ef69(0x289):config[_0x25ef69(0x24a)]==_0x25ef69(0x19d)?_0x25ef69(0x1a2):'Limit\x20(low-margin)',_0x50fa4e=(Math[_0x25ef69(0x1ea)](Math[_0x25ef69(0x313)]()*0x35a4e900)+0x5f5e100)[_0x25ef69(0x15f)]();lastOrders[_0x25ef69(0x2b2)]({'customId':_0x50fa4e,'symbol':_0x472215,'coin':_0x11211e[_0x25ef69(0x23a)],'amount':_0x39b124,'price':_0x308e66,'side':_0x43822f,'reverse':_0x11211e[_0x25ef69(0x1d9)],'filled':0x0});if(_0x3295f9=='market')logHistory(_0x25ef69(0x19f),''+_0x1d990c+_0x3cce4b+_0x25ef69(0x228)+_0x472215+'\x20'+_0x43822f+'\x20#'+formatResult(_0x39b124,0x8)+'\x20@'+formatResult(_0x308e66,0x8));else logHistory(_0x25ef69(0x19f),''+_0x1d990c+_0x3cce4b+_0x25ef69(0x228)+_0x472215+'\x20'+_0x43822f+'\x20#'+formatResult(_0x39b124,0x8)+'\x20@'+formatResult(_0x308e66,0x8));let _0x39a474;_0x3295f9==_0x25ef69(0x26a)?_0x43822f==_0x25ef69(0x1ec)&&[_0x25ef69(0x2bd),_0x25ef69(0x210),_0x25ef69(0x29a),_0x25ef69(0x1ed),_0x25ef69(0x256)]['includes'](config[_0x25ef69(0x263)])?_0x39a474=await exchange[_0x25ef69(0x291)](_0x472215,_0x3295f9,_0x43822f,_0x39b124,_0x308e66):_0x39a474=await exchange[_0x25ef69(0x291)](_0x472215,_0x3295f9,_0x43822f,_0x39b124,undefined):_0x39a474=await exchange[_0x25ef69(0x291)](_0x472215,_0x3295f9,_0x43822f,_0x39b124,_0x308e66);prevAmountAtOrder[_0x11211e[_0x25ef69(0x23a)]]=_0x11211e['number'],logger[_0x25ef69(0x2a9)]('ID:\x20'+_0x39a474['id']+_0x25ef69(0x20f)+_0x50fa4e);const _0x59e439=lastOrders[_0x25ef69(0x227)]-0x1;if(_0x59e439>=0x0&&lastOrders[_0x59e439][_0x25ef69(0x24f)]==_0x50fa4e){lastOrders[_0x59e439][_0x25ef69(0x1af)]=_0x39a474['id'];if(_0x39a474[_0x25ef69(0x310)])lastOrders[_0x59e439]['amount']=_0x39a474[_0x25ef69(0x310)];if(_0x39a474[_0x25ef69(0x211)])lastOrders[_0x59e439]['price']=_0x39a474[_0x25ef69(0x211)];lastOrders[_0x59e439][_0x25ef69(0x279)]=_0x39a474[_0x25ef69(0x279)];}if(config[_0x25ef69(0x296)]!=0x0){let _0x312da0=null;if(cooldownTracker[_0x25ef69(0x227)]==config[_0x25ef69(0x296)]-0x1)_0x312da0=cooldownTracker[_0x25ef69(0x2ba)]();const _0x37152c=getTimeStamp();cooldownTracker[_0x25ef69(0x2b2)](_0x37152c);if(_0x312da0){const _0x3abd0f=fns[_0x25ef69(0x2ec)](new Date(_0x37152c),new Date(_0x312da0));if(_0x3abd0f<cooldownInterval){logHistory(_0x25ef69(0x204),'Executed\x20'+config[_0x25ef69(0x296)]+_0x25ef69(0x229)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x25ef69(0x1d1)),coolingDown=!![];break;}}}}catch(_0xbbdac7){if(_0xbbdac7[_0x25ef69(0x15f)]()['includes']('MIN_NOTIONAL'))lastOrders=lastOrders[_0x25ef69(0x2ff)](_0x268f46=>_0x268f46['symbol']!=_0x472215),logHistory(_0x25ef69(0x204),_0x25ef69(0x2f6)+_0x472215),_0x1df12b=!![];else{if(_0xbbdac7[_0x25ef69(0x15f)]()[_0x25ef69(0x18a)](_0x25ef69(0x1b3)))lastOrders=lastOrders[_0x25ef69(0x2ff)](_0x10d4a2=>_0x10d4a2[_0x25ef69(0x298)]!=_0x472215),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x472215),_0x1df12b=!![];else{if(_0xbbdac7[_0x25ef69(0x15f)]()['includes'](_0x25ef69(0x23b)))lastOrders=lastOrders[_0x25ef69(0x2ff)](_0x41f640=>_0x41f640[_0x25ef69(0x298)]!=_0x472215),logHistory(_0x25ef69(0x204),_0x25ef69(0x17f)+_0x472215),logger[_0x25ef69(0x2a9)](_0xbbdac7),_0x1df12b=!![];else _0xbbdac7['toString']()[_0x25ef69(0x18a)](_0x25ef69(0x2d0))?(lastOrders=lastOrders[_0x25ef69(0x2ff)](_0x4e553b=>_0x4e553b['symbol']!=_0x472215),logHistory('error',_0x25ef69(0x2f6)+_0x472215),_0x1df12b=!![]):(lastOrders=lastOrders[_0x25ef69(0x2ff)](_0x26c8ae=>_0x26c8ae[_0x25ef69(0x298)]!=_0x472215),await handleError(_0xbbdac7,'placeOrder()',_0x472215));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x25ef69(0x227)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x17f2f3=config[_0x25ef69(0x24a)]==_0x25ef69(0x26a)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x17f2f3);}else unlockOrders();_0x1df12b&&config[_0x25ef69(0x1fe)]&&(logHistory(_0x25ef69(0x204),_0x25ef69(0x27e)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x25ef69(0x167),_0x25ef69(0x17a)));}else{if(coolingDown)!config[_0x25ef69(0x1fe)]&&logHistory(_0x25ef69(0x204),_0x25ef69(0x1fd));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x25ef69(0x1fe)]&&(config[_0x25ef69(0x24a)]=='market'?logHistory(_0x25ef69(0x204),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x25ef69(0x204),_0x25ef69(0x1bb))));}}function persistOpenOrders(_0x1be9dd){const _0x1fbc86=_0x281bf6,_0x358ff2={...config,'openOrders':_0x1be9dd};let _0x49ef0c=dbConfig[_0x1fbc86(0x265)](_0x1fbc86(0x290))[_0x1fbc86(0x288)]({'botID':botID})[_0x1fbc86(0x272)]();_0x49ef0c&&dbConfig[_0x1fbc86(0x265)]('bot')['find']({'botID':botID})[_0x1fbc86(0x308)](_0x358ff2)[_0x1fbc86(0x294)]();}function restoreOrders(){const _0xd6769c=_0x281bf6;let _0x198e88;config[_0xd6769c(0x2ce)]&&allOpenOrders[_0xd6769c(0x1a1)](_0x3cb754=>{const _0x433464=_0xd6769c,_0x522274=config['openOrders']['find'](_0x11cb47=>_0x11cb47[_0x433464(0x1af)]==_0x3cb754['id']);_0x522274&&(lastOrders[_0x433464(0x2b2)](_0x522274),_0x198e88=_0x3cb754[_0x433464(0x206)]);});if(lastOrders[_0xd6769c(0x227)]>0x0){lockOrders=ORDERS[_0xd6769c(0x1b4)],validateOrdersState=_0xd6769c(0x22f),allOrdersPlaced=!![];const _0x544d5b=new Date()['getTime'](),_0x35870d=config[_0xd6769c(0x24a)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0xd6769c(0x284)]*0x3c*0x3e8;if(_0x198e88+_0x35870d>_0x544d5b){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x304ab3=_0xd6769c;validateOrders(_0x304ab3(0x165));},_0x198e88+_0x35870d-_0x544d5b);}else validateOrders(_0xd6769c(0x165));}}async function sendMetricsTelegram(){const _0x547844=_0x281bf6;if(!coinsLoaded){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x238338=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x13f25d='';if(config[_0x547844(0x16b)])_0x13f25d=_0x547844(0x306)+config[_0x547844(0x31d)]+_0x547844(0x17d);else _0x13f25d=_0x547844(0x24b)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x1ef1cb=getKPIs(_0x547844(0x172)),_0x176f1e=getKPIs(_0x547844(0x2fd),config[_0x547844(0x2fd)]),_0x15e9eb=getKPIs(_0x547844(0x2d6)),_0x2a51a2=getKPIs(_0x547844(0x26d),config[_0x547844(0x2fd)]);_0x13f25d+=_0x547844(0x236),_0x13f25d+=_0x1ef1cb[_0x547844(0x20b)]+_0x547844(0x29c)+_0x1ef1cb[_0x547844(0x272)]+'\x0a',_0x13f25d+=_0x1ef1cb[_0x547844(0x25d)]+':\x20'+_0x1ef1cb[_0x547844(0x273)]+'%\x0a',_0x13f25d+=_0x176f1e[_0x547844(0x20b)]+_0x547844(0x29c)+_0x176f1e[_0x547844(0x272)]+'\x0a',_0x13f25d+=_0x176f1e['rightTxt']+':\x20'+_0x176f1e[_0x547844(0x273)]+'%\x0a',_0x13f25d+=_0x15e9eb['leftTxt']+':\x20'+_0x15e9eb[_0x547844(0x272)]+'\x20('+config[_0x547844(0x172)]+')\x0a',_0x13f25d+=_0x15e9eb['rightTxt']+':\x20'+_0x15e9eb['change']+_0x547844(0x30d)+config[_0x547844(0x172)]+')\x0a',_0x13f25d+=_0x2a51a2[_0x547844(0x20b)]+':\x20'+_0x2a51a2[_0x547844(0x272)]+'\x20('+config['fiat']+')\x0a',_0x13f25d+=_0x2a51a2[_0x547844(0x25d)]+':\x20'+_0x2a51a2['change']+_0x547844(0x30d)+config[_0x547844(0x2fd)]+')\x0a',_0x13f25d+=_0x547844(0x1b5),process[_0x547844(0x226)]({'telegrammsg':_0x13f25d},_0x585c13=>{});}async function sendPortfolioTelegram(){const _0x53134a=_0x281bf6;if(!coinsLoaded||!currentCoins[0x0][_0x53134a(0x209)]){process[_0x53134a(0x226)]({'telegrammsg':_0x53134a(0x1a3)},_0x3f3825=>{});return;}let _0x244349='';if(config[_0x53134a(0x16b)])_0x244349=_0x53134a(0x306)+config['botname']+_0x53134a(0x247);else _0x244349='<b>Bot\x20'+botID+_0x53134a(0x247);_0x244349+=_0x53134a(0x236),_0x244349+=_0x53134a(0x18f),_0x244349+=_0x53134a(0x2b4),_0x244349+=_0x53134a(0x18f),currentCoins[_0x53134a(0x1a1)](_0x210d89=>{const _0x466275=_0x53134a;_0x244349+=_0x210d89[_0x466275(0x23a)][_0x466275(0x30e)](0x7)+'|\x20'+formatPad(_0x210d89[_0x466275(0x209)],0x2,0x6)+'|\x20'+formatPad(_0x210d89['target'],0x2,0x6)+'|\x20'+formatPad(_0x210d89[_0x466275(0x15d)]*0x64,0x2,0x6)+'\x0a';}),_0x244349+=_0x53134a(0x1b5),process['send']({'telegrammsg':_0x244349},_0x536f83=>{});}function formatPad(_0x54282d,_0x59811a,_0x225dd0){const _0x5f4e03=_0x281bf6,_0x14bf28=formatResultString(_0x54282d,_0x59811a);return _0x14bf28?_0x14bf28[_0x5f4e03(0x2fe)](_0x225dd0):''['padStart'](_0x225dd0);}function logHistory(_0x3fcbfc,_0x470cf1,_0x3e88e1=''){const _0x1e3fb4=_0x281bf6;logger[_0x1e3fb4(0x280)](''+_0x470cf1);let _0x126159={'time':getTimeStamp(),'type':_0x3fcbfc,'event':_0x470cf1};dbLogs[_0x1e3fb4(0x265)](_0x1e3fb4(0x292))['push'](_0x126159)[_0x1e3fb4(0x294)]();if(_0x3e88e1=='')_0x3e88e1=_0x470cf1;proxyEmit(_0x1e3fb4(0x1c9),{'log':_0x126159,'summary':_0x3e88e1}),process[_0x1e3fb4(0x226)]({'telegram':{..._0x126159,'botname':config['botname'],'showname':config[_0x1e3fb4(0x16b)]}},_0x412be7=>{});}function emitHistory(_0x435f13={}){const _0xbce2c6=_0x281bf6;Object[_0xbce2c6(0x2cf)](_0x435f13)[_0xbce2c6(0x227)]==0x0&&(_0x435f13={'type':[_0xbce2c6(0x19f),_0xbce2c6(0x1c9)],'event':'','page':0x1});if(_0x435f13[_0xbce2c6(0x27c)][_0xbce2c6(0x18a)](_0xbce2c6(0x1c9)))_0x435f13[_0xbce2c6(0x27c)][_0xbce2c6(0x255)](_0x435f13[_0xbce2c6(0x27c)]['indexOf'](_0xbce2c6(0x1c9)),0x1,_0xbce2c6(0x204),'warning',_0xbce2c6(0x167));if(dbLogs['has'](_0xbce2c6(0x292))[_0xbce2c6(0x272)]()){let _0x263f97=dbLogs[_0xbce2c6(0x265)]('logs')[_0xbce2c6(0x2ff)](_0x2b923f=>{const _0x5d5ddf=_0xbce2c6;if(_0x435f13[_0x5d5ddf(0x27c)]['length']==0x0)return![];else return _0x435f13[_0x5d5ddf(0x27c)][_0x5d5ddf(0x18a)](_0x2b923f[_0x5d5ddf(0x27c)]);})[_0xbce2c6(0x2ff)](_0x23db0f=>{const _0x55dd3f=_0xbce2c6;if(_0x435f13[_0x55dd3f(0x1c9)]=='')return!![];else return _0x23db0f['event']['toLowerCase']()[_0x55dd3f(0x18a)](_0x435f13['event'][_0x55dd3f(0x1a8)]());})[_0xbce2c6(0x190)](_0xbce2c6(0x198)),_0x567aa6=_0x263f97['value']()['length'];_0x263f97=_0x263f97['reverse']()['slice']((_0x435f13[_0xbce2c6(0x1ad)]-0x1)*logPageSize,_0x435f13[_0xbce2c6(0x1ad)]*logPageSize-0x1)[_0xbce2c6(0x1d9)]()[_0xbce2c6(0x272)](),proxyEmit(_0xbce2c6(0x1fc),{'logs':_0x263f97,'total':_0x567aa6});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2d5105){const _0x148042=_0x281bf6;if(dbLogs['has'](_0x148042(0x292))[_0x148042(0x272)]()){const _0x10a35d=dbLogs[_0x148042(0x265)]('logs')[_0x148042(0x190)](_0x148042(0x198))[_0x148042(0x2ff)](_0x46e75e=>{const _0x2d3a8d=_0x148042;return _0x46e75e[_0x2d3a8d(0x27c)]==_0x2d3a8d(0x19f);})[_0x148042(0x272)]();dbLogs['get'](_0x148042(0x292))[_0x148042(0x1b6)]()[_0x148042(0x294)](),dbLogs[_0x148042(0x265)](_0x148042(0x292))[_0x148042(0x308)](_0x10a35d)[_0x148042(0x294)](),emitHistory(_0x2d5105);}}async function pauseBot(_0x50161a=pauseBotIntervalShort,_0x4b3fde,_0x57091f,_0x1aa0ea=![]){const _0x32de16=_0x281bf6,_0xe7735b=new Date()[_0x32de16(0x2d8)]();if(!lastErrorShown||_0xe7735b-lastErrorShown>=_0x50161a){lastErrorShown=_0xe7735b;if(!lastBotPause)lastBotPause=_0xe7735b,consecutivePauses=0x1;else{if(_0xe7735b-lastBotPause-_0x50161a<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x1aa0ea){logHistory('error',_0x4b3fde+_0x32de16(0x1eb)),await killBot();return;}else logHistory(_0x32de16(0x204),_0x4b3fde+pauseBotMsg),_0x50161a=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0xe7735b;}_0x57091f?logger[_0x32de16(0x2a9)]('('+consecutivePauses+')\x20'+_0x4b3fde+'\x20>\x20details:',_0x57091f):logger[_0x32de16(0x2a9)]('('+consecutivePauses+')\x20'+_0x4b3fde);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x50161a),botPaused=![],_0x50161a==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x4b9b13=_0x281bf6;botPaused=!![],await sleep(0x3e8),process[_0x4b9b13(0x226)]({'stop':'kill'},_0x94d62=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5bba11,_0x1c757a){const _0x581fba=_0x281bf6;if(botPaused)return;const _0x239d20=config[_0x581fba(0x263)]||_0x581fba(0x16f);if(_0x1c757a)logger[_0x581fba(0x2a9)](_0x581fba(0x283)+_0x1c757a);const _0x254e69=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x5bba11['toString']()['includes']('API-key\x20format\x20invalid'))logHistory(_0x581fba(0x204),_0x239d20+_0x581fba(0x2f2)),_0x254e69();else{if(_0x5bba11[_0x581fba(0x15f)]()[_0x581fba(0x18a)](_0x581fba(0x171)))logHistory(_0x581fba(0x204),_0x239d20+_0x581fba(0x1a5)),_0x254e69();else _0x5bba11[_0x581fba(0x15f)]()[_0x581fba(0x18a)](_0x581fba(0x2a7))?(logHistory('error',_0x239d20+_0x581fba(0x1cf)),logHistory(_0x581fba(0x204),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x254e69()):await handleError(_0x5bba11,null);}}async function handleError(_0x45107b,_0x35190b,_0x43cd13=''){const _0x520f58=_0x281bf6;if(botPaused)return;let _0x103f3b;const _0x8f0126=config['exchange']||_0x520f58(0x16f);if(_0x35190b)logger['debug'](_0x520f58(0x283)+_0x35190b);if(_0x45107b[_0x520f58(0x15f)]()['includes']('DDoSProtection'))_0x103f3b=_0x8f0126+_0x520f58(0x318),await pauseBot(undefined,_0x103f3b,_0x45107b);else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)](_0x520f58(0x230)))_0x103f3b=_0x8f0126+_0x520f58(0x1e3),await pauseBot(undefined,_0x103f3b,_0x45107b);else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)]('ExchangeNotAvailable')||_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)](_0x520f58(0x2bc)))_0x103f3b=_0x8f0126+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x103f3b,_0x45107b[_0x520f58(0x15f)]());else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)](_0x520f58(0x20e)))_0x103f3b=_0x8f0126+_0x520f58(0x2fb),await pauseBot(undefined,_0x103f3b,_0x45107b['toString']());else{if(_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x16e)))_0x103f3b=_0x8f0126+_0x520f58(0x1da),await pauseBot(undefined,_0x103f3b,_0x45107b[_0x520f58(0x15f)]());else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x1a8)]()['includes'](_0x520f58(0x206))||_0x45107b['toString']()[_0x520f58(0x1a8)]()['includes']('request-time'))_0x103f3b=_0x520f58(0x321),await pauseBot(undefined,_0x103f3b,_0x45107b[_0x520f58(0x15f)]());else{if(_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x27f)))_0x103f3b=_0x8f0126+'\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)',await pauseBot(undefined,_0x103f3b,_0x45107b[_0x520f58(0x15f)]());else{if(_0x45107b instanceof ccxt[_0x520f58(0x2f1)])_0x103f3b=_0x8f0126+_0x520f58(0x22e)+_0x45107b[_0x520f58(0x15f)](),logger[_0x520f58(0x2a9)](_0x520f58(0x220),_0x45107b),await pauseBot(undefined,_0x103f3b,_0x45107b);else{if(_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x214)))logHistory(_0x520f58(0x204),_0x8f0126+_0x520f58(0x266)),logHistory(_0x520f58(0x204),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)](_0x520f58(0x171)))logHistory('error',_0x8f0126+_0x520f58(0x2f8)),logHistory(_0x520f58(0x204),_0x520f58(0x18d)),await killBot();else{if(_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x2a7))&&_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x218)))_0x103f3b=_0x8f0126+_0x520f58(0x29d),await pauseBot(undefined,_0x103f3b,_0x45107b,!![]);else{if(_0x45107b[_0x520f58(0x15f)]()['includes'](_0x520f58(0x2a7)))config['apiPassword']?_0x103f3b=_0x8f0126+_0x520f58(0x261):_0x103f3b=_0x8f0126+_0x520f58(0x295),logHistory(_0x520f58(0x204),_0x103f3b),logHistory(_0x520f58(0x204),_0x520f58(0x18d)),await killBot();else{if(_0x45107b['toString']()['includes'](_0x520f58(0x2e2)))logHistory(_0x520f58(0x204),_0x8f0126+_0x520f58(0x287)),logHistory(_0x520f58(0x204),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x45107b[_0x520f58(0x15f)]()[_0x520f58(0x18a)](_0x520f58(0x239)))logHistory(_0x520f58(0x204),_0x520f58(0x262)+_0x43cd13);else{if(_0x45107b instanceof ccxt[_0x520f58(0x26f)]){_0x103f3b=_0x8f0126+'\x20exchange\x20error:\x20'+_0x45107b[_0x520f58(0x15f)](),logHistory(_0x520f58(0x204),_0x103f3b),logger['debug'](_0x520f58(0x225),_0x45107b);if(_0x43cd13)logger[_0x520f58(0x2a9)](_0x520f58(0x1c8)+_0x43cd13);await pauseBot(undefined,_0x103f3b,_0x45107b);}else{_0x103f3b=_0x520f58(0x1ee)+_0x45107b[_0x520f58(0x15f)](),logHistory(_0x520f58(0x204),_0x103f3b),logger[_0x520f58(0x2a9)](_0x103f3b+'\x20>\x20details:',_0x45107b);if(_0x43cd13)logger[_0x520f58(0x2a9)](_0x520f58(0x1c8)+_0x43cd13);await pauseBot(undefined,_0x103f3b);}}}}}}}}}}}}}}}}function decryptRSA(_0x1ddb97,_0x1d35ff){const _0x4db1ba=_0x281bf6,_0x35cfaa=forge[_0x4db1ba(0x1c2)][_0x4db1ba(0x2d7)](_0x1ddb97),_0x4db535=_0x35cfaa[_0x4db1ba(0x16d)](forge['util'][_0x4db1ba(0x2fc)](_0x1d35ff),'RSA-OAEP',{'md':forge['md'][_0x4db1ba(0x1bf)][_0x4db1ba(0x1e2)](),'mgf1':{'md':forge['md'][_0x4db1ba(0x1bf)][_0x4db1ba(0x1e2)]()}});return _0x4db535;}async function withRetry(_0x414d8a,_0x576bc6){const _0x3554b4=_0x281bf6;let _0x1b22a5=![],_0x19c8ca=0x0,_0x173a93,_0x20ccdb;while(_0x19c8ca<maxRetries){try{_0x173a93=await _0x576bc6();break;}catch(_0x42826d){_0x20ccdb=_0x42826d,!_0x1b22a5?(_0x1b22a5=!![],logger[_0x3554b4(0x2a9)](_0x3554b4(0x1cc)+_0x414d8a+':',_0x42826d[_0x3554b4(0x15f)]())):await sleep(retryInterval);}_0x19c8ca++;}if(_0x19c8ca==0x0)return _0x173a93;if(_0x19c8ca>=maxRetries)throw _0x20ccdb;else return logger[_0x3554b4(0x2a9)](_0x3554b4(0x185)+_0x19c8ca+_0x3554b4(0x1a0)),_0x173a93;}function formatResult(_0x55b6a4,_0x4c671f){return parseFloat(_0x55b6a4['toFixed'](_0x4c671f));}function formatResultTruncate(_0x44ae05,_0x5a9858){const _0x312e00=_0x281bf6;let _0x3662b1=formatResultString(_0x44ae05,0xa),_0x287db4=_0x3662b1['indexOf']('.');return _0x287db4!=-0x1&&(_0x3662b1=_0x3662b1[_0x312e00(0x28f)](0x0,_0x287db4+_0x5a9858+0x1)),Number(_0x3662b1);}function formatResultString(_0x3baf51,_0x45acc5){const _0x4d34d5=_0x281bf6;let _0xc78f5d;if(!(''+_0x3baf51)[_0x4d34d5(0x18a)]('e'))_0xc78f5d=+(Math[_0x4d34d5(0x2b3)](_0x3baf51+'e+'+_0x45acc5)+'e-'+_0x45acc5);else{let _0x36c676=(''+_0x3baf51)['split']('e'),_0x52e6a3='';+_0x36c676[0x1]+_0x45acc5>0x0&&(_0x52e6a3='+'),_0xc78f5d=+(Math[_0x4d34d5(0x2b3)](+_0x36c676[0x0]+'e'+_0x52e6a3+(+_0x36c676[0x1]+_0x45acc5))+'e-'+_0x45acc5);}return Number(_0xc78f5d)[_0x4d34d5(0x30b)](_0x45acc5);}function getServerTime(){const _0x59b034=_0x281bf6,_0x2630ad=new Date();return _0x2630ad[_0x59b034(0x2c9)]()+'/'+(_0x2630ad[_0x59b034(0x2ee)]()+0x1)[_0x59b034(0x15f)]()[_0x59b034(0x2fe)](0x2,'0')+'/'+_0x2630ad['getDate']()[_0x59b034(0x15f)]()[_0x59b034(0x2fe)](0x2,'0')+'\x20'+_0x2630ad[_0x59b034(0x1ae)]()['toString']()[_0x59b034(0x2fe)](0x2,'0')+':'+_0x2630ad[_0x59b034(0x212)]()['toString']()[_0x59b034(0x2fe)](0x2,'0')+':'+_0x2630ad['getSeconds']()['toString']()[_0x59b034(0x2fe)](0x2,'0');}function getTimeStamp(){const _0x5388eb=_0x281bf6,_0x520b1b=shiftedTime();return _0x520b1b[_0x5388eb(0x2c9)]()+'/'+(_0x520b1b[_0x5388eb(0x2ee)]()+0x1)['toString']()[_0x5388eb(0x2fe)](0x2,'0')+'/'+_0x520b1b['getDate']()[_0x5388eb(0x15f)]()[_0x5388eb(0x2fe)](0x2,'0')+'\x20'+_0x520b1b[_0x5388eb(0x1ae)]()[_0x5388eb(0x15f)]()['padStart'](0x2,'0')+':'+_0x520b1b['getMinutes']()[_0x5388eb(0x15f)]()[_0x5388eb(0x2fe)](0x2,'0')+':'+_0x520b1b[_0x5388eb(0x161)]()[_0x5388eb(0x15f)]()[_0x5388eb(0x2fe)](0x2,'0');}function getDate(){const _0x1f8634=_0x281bf6,_0x5a910b=shiftedTime();return _0x5a910b[_0x1f8634(0x2c9)]()+'/'+(_0x5a910b[_0x1f8634(0x2ee)]()+0x1)[_0x1f8634(0x15f)]()[_0x1f8634(0x2fe)](0x2,'0')+'/'+_0x5a910b[_0x1f8634(0x237)]()['toString']()[_0x1f8634(0x2fe)](0x2,'0');}function getHour(){const _0x53f277=_0x281bf6,_0x28c64f=shiftedTime();return _0x28c64f[_0x53f277(0x1ae)]()['toString']()[_0x53f277(0x2fe)](0x2,'0');}function sleep(_0x2f54a8){return new Promise(_0x1ed72c=>setTimeout(_0x1ed72c,_0x2f54a8));}function shiftedTime(){const _0x2d6b99=_0x281bf6,_0x21bdb1=new Date();let _0x359dcf=_0x21bdb1;if(config&&config[_0x2d6b99(0x281)]!==0x0)_0x359dcf=fns[_0x2d6b99(0x2b7)](_0x21bdb1,{'hours':config[_0x2d6b99(0x281)]});return _0x359dcf;}function timer(_0x18a1e5){const _0x116b86=_0x281bf6,_0xa90f7b=new Date();!lasttime?console[_0x116b86(0x1e4)](getTimeStamp()+_0x116b86(0x160),_0x18a1e5,_0xa90f7b):console[_0x116b86(0x1e4)](getTimeStamp()+_0x116b86(0x160),_0x18a1e5,(_0xa90f7b-lasttime)/0x3e8),lasttime=_0xa90f7b;}