const _0x4a6aab=_0x4a81;(function(_0xd6820b,_0x558595){const _0x20ad24=_0x4a81,_0x2e3eb0=_0xd6820b();while(!![]){try{const _0x166cc7=-parseInt(_0x20ad24(0x31c))/0x1+parseInt(_0x20ad24(0x2d8))/0x2+parseInt(_0x20ad24(0x309))/0x3+-parseInt(_0x20ad24(0x284))/0x4+parseInt(_0x20ad24(0x221))/0x5+parseInt(_0x20ad24(0x1e5))/0x6*(-parseInt(_0x20ad24(0x19e))/0x7)+parseInt(_0x20ad24(0x20e))/0x8*(parseInt(_0x20ad24(0x2f6))/0x9);if(_0x166cc7===_0x558595)break;else _0x2e3eb0['push'](_0x2e3eb0['shift']());}catch(_0x1efd0d){_0x2e3eb0['push'](_0x2e3eb0['shift']());}}}(_0x3d56,0xa5478));const _0x31df1f=function(){let _0x5a3170=!![];return function(_0x269637,_0x21d3a6){const _0x25681e=_0x5a3170?function(){const _0x1f7e2c=_0x4a81;if(_0x21d3a6){const _0x7a1338=_0x21d3a6[_0x1f7e2c(0x323)](_0x269637,arguments);return _0x21d3a6=null,_0x7a1338;}}:function(){};return _0x5a3170=![],_0x25681e;};}(),_0x28f18d=_0x31df1f(this,function(){const _0x457c66=_0x4a81;return _0x28f18d[_0x457c66(0x1dd)]()[_0x457c66(0x22c)](_0x457c66(0x1b5))[_0x457c66(0x1dd)]()[_0x457c66(0x1d5)](_0x28f18d)[_0x457c66(0x22c)](_0x457c66(0x1b5));});_0x28f18d();'use strict';const ccxt=require(_0x4a6aab(0x1c2))[_0x4a6aab(0x2cd)],low=require('lowdb'),FileSync=require(_0x4a6aab(0x212)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x4a6aab(0x1c4))[_0x4a6aab(0x224)],util=require(_0x4a6aab(0x1d6)),argv=require(_0x4a6aab(0x1f8))(process['argv']['slice'](0x2))[_0x4a6aab(0x210)],path=require('path');let exchange;global[_0x4a6aab(0x25d)]={},global[_0x4a6aab(0x26b)]={};const usdBasecoins=['USD',_0x4a6aab(0x2a2),_0x4a6aab(0x1d8),_0x4a6aab(0x320),_0x4a6aab(0x267),_0x4a6aab(0x21d)],exceptions={'binance':[_0x4a6aab(0x1af),'HOT/BTC','XEM/BUSD',_0x4a6aab(0x279),_0x4a6aab(0x2bb)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x4a6aab(0x2d6)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x4a6aab(0x1be)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x4a6aab(0x1c9))[_0x4a6aab(0x268)],environment=require(_0x4a6aab(0x1c9))[_0x4a6aab(0x242)]||_0x4a6aab(0x257),botID=process[_0x4a6aab(0x210)][0x2]||_0x4a6aab(0x1d7),pattern=/^[0-9]{3}$/;!pattern[_0x4a6aab(0x2d4)](botID)&&(console[_0x4a6aab(0x226)]('Error:\x20Invalid\x20argument\x20'+botID+_0x4a6aab(0x2e6)),killBot());const userID=process[_0x4a6aab(0x210)][0x3]||'',configpath=userID?_0x4a6aab(0x290)+userID+'/':_0x4a6aab(0x290),logspath=userID?'./logs/'+userID+'/':_0x4a6aab(0x256),loggerfile=fs[_0x4a6aab(0x2b7)](logspath+_0x4a6aab(0x1a9),{'flags':'a'});!fs[_0x4a6aab(0x232)](configpath)&&fs[_0x4a6aab(0x2e5)](configpath);!fs[_0x4a6aab(0x232)](logspath)&&fs[_0x4a6aab(0x2e5)](logspath);const configfile=configpath+'bot-'+botID+_0x4a6aab(0x298),logfile=configpath+_0x4a6aab(0x28a)+botID+_0x4a6aab(0x252),performancefile=configpath+'bot-'+botID+_0x4a6aab(0x269),coinresultsfile=configpath+_0x4a6aab(0x28a)+botID+_0x4a6aab(0x237),settingsfile=configpath+_0x4a6aab(0x1f4),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x4a6aab(0x25b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x4a6aab(0x327)]({'logs':[],'version':serverversion})[_0x4a6aab(0x1ee)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x4a6aab(0x327)]({'data':[],'version':serverversion})[_0x4a6aab(0x1ee)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x4a6aab(0x1ee)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x4a6aab(0x327)]({'coins':[],'version':serverversion})[_0x4a6aab(0x1ee)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x4a6aab(0x241)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1fd310=>{const _0x419bcb=_0x4a6aab;console[_0x419bcb(0x226)](_0x1fd310);},'simple':_0x322cec=>{const _0xd14daa=_0x4a6aab;console['log'](_0x322cec),loggerfile[_0xd14daa(0x1ee)](util[_0xd14daa(0x2c8)](_0x322cec)+'\x0a');},'full':async(_0x5cd8f6,_0x3108ae='')=>{const _0x263693=_0x4a6aab;let _0x2d870f;if(config['showname'])_0x2d870f=getTimeStamp()+':\x20'+config[_0x263693(0x1c8)]+_0x263693(0x1f3)+_0x5cd8f6;else _0x2d870f=getTimeStamp()+_0x263693(0x25f)+botID+_0x263693(0x1f3)+_0x5cd8f6;console[_0x263693(0x226)](_0x2d870f),loggerfile['write'](util[_0x263693(0x2c8)](_0x2d870f)+'\x0a'),_0x3108ae&&(console[_0x263693(0x226)](_0x3108ae),loggerfile['write'](util[_0x263693(0x2c8)](_0x3108ae)+'\x0a'));},'debug':async(_0x19b350,_0x5bb82c='')=>{const _0x52b8b5=_0x4a6aab;let _0x594f42;if(config[_0x52b8b5(0x263)])_0x594f42=getTimeStamp()+':\x20'+config['botname']+_0x52b8b5(0x270)+_0x19b350;else _0x594f42=getTimeStamp()+':\x20Bot\x20'+botID+_0x52b8b5(0x270)+_0x19b350;if(debugging)console['log'](_0x594f42);loggerfile[_0x52b8b5(0x1ee)](util[_0x52b8b5(0x2c8)](_0x594f42)+'\x0a');if(_0x5bb82c){if(debugging)console[_0x52b8b5(0x226)](_0x5bb82c);loggerfile[_0x52b8b5(0x1ee)](util[_0x52b8b5(0x2c8)](_0x5bb82c)+'\x0a');}}};process['on']('uncaughtException',function(_0x42b819){const _0x496a8b=_0x4a6aab;logger['debug'](_0x496a8b(0x28b),_0x42b819);});settings[_0x4a6aab(0x255)]!=config['timeshift']&&updateTimeshift(settings[_0x4a6aab(0x255)]);settings[_0x4a6aab(0x1df)]!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);process['send']({'started':_0x4a6aab(0x322)},_0x3bca48=>{}),initializeProcessListeners();function proxyEmit(_0x4131f0,_0x3ff5a4=null){const _0x4b6c60=_0x4a6aab;process[_0x4b6c60(0x1a6)]({'function':_0x4131f0,'args':_0x3ff5a4},_0x438797=>{});}function initializeProcessListeners(){const _0x3fa9b3=_0x4a6aab;process['on'](_0x3fa9b3(0x27e),_0x33aa3c=>{const _0x569c25=_0x3fa9b3;switch(Object[_0x569c25(0x1e3)](_0x33aa3c)[0x0]){case _0x569c25(0x255):_0x33aa3c[_0x569c25(0x255)]!=undefined&&(settings[_0x569c25(0x255)]=_0x33aa3c[_0x569c25(0x255)],updateTimeshift(settings[_0x569c25(0x255)]));break;case _0x569c25(0x1df):_0x33aa3c[_0x569c25(0x1df)]!=undefined&&(settings[_0x569c25(0x1df)]=_0x33aa3c[_0x569c25(0x1df)],updateOnepagemode(settings[_0x569c25(0x1df)]));break;case'bots':_0x33aa3c[_0x569c25(0x200)]!=undefined&&(bots=JSON['parse'](_0x33aa3c[_0x569c25(0x200)]),proxyEmit(_0x569c25(0x200),bots));break;case _0x569c25(0x2f2):switch(_0x33aa3c[_0x569c25(0x2f2)]){case _0x569c25(0x236):initclient();break;case _0x569c25(0x2db):toggleBotMode();break;case _0x569c25(0x2a3):emitHistory(_0x33aa3c['args']);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x33aa3c['args']);break;case'getPortfolio':getPortfolio(_0x33aa3c['args']);break;case _0x569c25(0x199):storeConfiguration(_0x33aa3c[_0x569c25(0x25a)]);break;case'storeHeadless':storeHeadless(_0x33aa3c['args']);break;case _0x569c25(0x1aa):storeFiat(_0x33aa3c[_0x569c25(0x25a)]);break;case _0x569c25(0x2b8):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x569c25(0x318):placeOrder(_0x33aa3c[_0x569c25(0x25a)]);break;case _0x569c25(0x1b2):cancelLoading();break;case _0x569c25(0x2c6):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x569c25(0x2f8):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x4f6565=null,_0x347dc4=![]){const _0xbc3a7c=_0x4a6aab;logger[_0xbc3a7c(0x218)]('Reset\x20|\x20'+(_0x4f6565&&_0x4f6565['length']>0x0?_0xbc3a7c(0x1c6)+_0x4f6565[_0xbc3a7c(0x19a)](','):_0xbc3a7c(0x28c))+_0xbc3a7c(0x233)+(_0x347dc4?_0xbc3a7c(0x2ae):'exchange\x20not\x20reloaded')+_0xbc3a7c(0x2e2)+config[_0xbc3a7c(0x31f)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x347dc4)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xbc3a7c(0x1ad)]!=''&&config[_0xbc3a7c(0x1ad)]!=_0xbc3a7c(0x2f1)){if(_0x347dc4){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x361ca2){handleErrorNoStop(_0x361ca2,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x4f6565);const _0x6e9012=await getCoins();[currentCoins,currentCoinsAll]=_0x6e9012,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0xbc3a7c(0x2cb)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x3597ad=_0x4a6aab;exchangeStopped=!![],await exchange[_0x3597ad(0x30d)]();}async function reloadExchange(){const _0x19529a=_0x4a6aab;logger['debug'](_0x19529a(0x22a));while(lockOrders!=ORDERS[_0x19529a(0x1be)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x19529a(0x218)](_0x19529a(0x2c4)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x30e2e0=config[_0x4a6aab(0x31f)],_0x51e327=config['apiKey'],_0x382bf2=config['apiSecret'],_0x204467=config['apiPassword']){const _0x523709=_0x4a6aab;exchange&&await stopExchange();!supportedExchanges()[_0x523709(0x30c)](_0x30e2e0)&&(logHistory(_0x523709(0x28f),'Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x30e2e0+_0x523709(0x31b)),killBot());const _0x4d7ad1=ccxt[_0x30e2e0[_0x523709(0x211)]()];exchange=new _0x4d7ad1({'apiKey':_0x51e327,'secret':_0x382bf2,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x30e2e0==_0x523709(0x1da)&&(exchange[_0x523709(0x2b2)]={'defaultType':_0x523709(0x321)});if(_0x204467)exchange['password']=_0x204467;}function setStableCoins(){const _0x289e78=_0x4a6aab;let _0x451f52=config[_0x289e78(0x22f)]==_0x289e78(0x216)?_0x289e78(0x216):_0x289e78(0x2a4),_0x162c1a=!allSymbols['includes'](_0x451f52+'/USD')?_0x289e78(0x320):_0x289e78(0x29d),_0x26d4e7=!allSymbols[_0x289e78(0x30c)](_0x451f52+'/EUR')?_0x162c1a:_0x289e78(0x206);stablecoins={'eur':{'coin':''+_0x451f52+_0x26d4e7,'symbol':_0x451f52+'/'+_0x26d4e7},'usd':{'coin':''+_0x451f52+_0x162c1a,'symbol':_0x451f52+'/'+_0x162c1a}};}async function initwsCcxt(_0x2d493a){const _0x1d76c9=_0x4a6aab;_0x2d493a==null&&(_0x2d493a=[],config[_0x1d76c9(0x231)][_0x1d76c9(0x2f4)](_0x5a2c1e=>{const _0x54788e=_0x1d76c9;if(!_0x5a2c1e[_0x54788e(0x2c9)]&&_0x5a2c1e[_0x54788e(0x1c3)]!=config[_0x54788e(0x22f)])_0x2d493a['push'](_0x5a2c1e[_0x54788e(0x213)]);}));if(!_0x2d493a[_0x1d76c9(0x30c)](stablecoins[_0x1d76c9(0x1ec)][_0x1d76c9(0x213)]))_0x2d493a[_0x1d76c9(0x1ca)](stablecoins[_0x1d76c9(0x1ec)][_0x1d76c9(0x213)]);if(!_0x2d493a[_0x1d76c9(0x30c)](stablecoins[_0x1d76c9(0x202)][_0x1d76c9(0x213)]))_0x2d493a[_0x1d76c9(0x1ca)](stablecoins['usd'][_0x1d76c9(0x213)]);if(config[_0x1d76c9(0x31f)]['startsWith'](_0x1d76c9(0x19b))){if(!_0x2d493a[_0x1d76c9(0x30c)](_0x1d76c9(0x2bf)+config[_0x1d76c9(0x22f)]))_0x2d493a[_0x1d76c9(0x1ca)]('BNB/'+config[_0x1d76c9(0x22f)]);}loadCoins(_0x2d493a);const _0x5136b5=async _0x5bfe93=>{const _0x499e97=_0x1d76c9,_0x283ce8=await exchange['fetchTicker'](_0x5bfe93);global[_0x499e97(0x25d)][noslash(_0x283ce8['symbol'])]=_0x283ce8[_0x499e97(0x203)];while(!![]){if(!botPaused)try{const _0x20dbce=await exchange[_0x499e97(0x1a0)](_0x5bfe93);global['ticker'][noslash(_0x20dbce[0x0]['symbol'])]=_0x20dbce[0x0]['price'],await sleep(0x3e8);}catch(_0x34222d){if(!exchangeStopped)await handleError(_0x34222d,_0x499e97(0x1a0),_0x5bfe93);}else await sleep(0x64);}},_0x45ad25=async _0x4ef5c5=>{const _0x384bc8=_0x1d76c9;while(!![]){if(!botPaused)try{const _0x3ce283=await exchange[_0x384bc8(0x1c7)](_0x4ef5c5);global['change'][_0x3ce283['symbol']]=_0x3ce283['percentage'],await sleep(0x3c*0x3e8);}catch(_0x3b2ec5){if(!exchangeStopped)await handleError(_0x3b2ec5,'fetchTickers',_0x4ef5c5);}else await sleep(0x64);}},_0x37604c=async()=>{const _0x1c246a=_0x1d76c9;while(!![]){if(!botPaused)try{const _0x3fc13e=await exchange[_0x1c246a(0x2d5)]();_0x3fc13e[_0x1c246a(0x2f4)](_0x4c3151=>{updateNumberCoinsCcxt(_0x4c3151);});}catch(_0x13a1d5){if(!exchangeStopped)await handleError(_0x13a1d5,_0x1c246a(0x2d5));}else await sleep(0x64);}};_0x2d493a[_0x1d76c9(0x2f4)](_0x43c163=>{_0x5136b5(_0x43c163),_0x45ad25(_0x43c163);}),!wsEventsSet&&(wsEventsSet=!![],_0x37604c(),watchTransactions());}async function watchTransactions(){const _0x30123c=_0x4a6aab;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x5aaf54=await getCoins(),[_0x927f63,_0x2a2d8b]=_0x5aaf54;let _0x1e8528=[];currentCoins[_0x30123c(0x2f4)](_0x243820=>{const _0x145553=_0x30123c,_0x45ffd7=_0x927f63[_0x145553(0x1ac)](_0x5e5989=>_0x5e5989['coin']==_0x243820[_0x145553(0x1c3)]);_0x45ffd7&&(_0x243820['number']!=_0x45ffd7[_0x145553(0x1d1)]&&_0x1e8528['push']({'coin':_0x243820[_0x145553(0x1c3)],'symbol':_0x243820[_0x145553(0x213)],'number':Number(formatResult(_0x45ffd7[_0x145553(0x1d1)]-_0x243820[_0x145553(0x1d1)],0x8))}));});if(_0x1e8528[_0x30123c(0x2cb)]==0x1&&!blockTransactionDetection){if(config[_0x30123c(0x24d)]){logger[_0x30123c(0x218)](_0x30123c(0x2ad)+lastFees[_0x30123c(0x2fd)]+_0x30123c(0x26a)+lastFees[_0x30123c(0x27c)]);if(!lastFees[_0x30123c(0x2fd)]||_0x1e8528[0x0][_0x30123c(0x1c3)]!=lastFees[_0x30123c(0x2fd)]||_0x1e8528[0x0][_0x30123c(0x1d1)]>lastFees[_0x30123c(0x27c)]){let _0x1cb058;if(_0x1e8528[0x0]['coin']!=config[_0x30123c(0x22f)]){let _0x4bcd6c=global[_0x30123c(0x25d)][noslash(_0x1e8528[0x0][_0x30123c(0x213)])];_0x1cb058=_0x1e8528[0x0][_0x30123c(0x314)]?0x1/_0x4bcd6c:_0x4bcd6c;}else _0x1cb058=0x1;_0x1e8528[0x0][_0x30123c(0x1f7)]=_0x1cb058,delete _0x1e8528[0x0][_0x30123c(0x213)];let _0x31d684=[],_0x59c6da=[...config[_0x30123c(0x2d3)]]||[],_0x274458=config['liquidity'];_0x59c6da[_0x30123c(0x1d9)]((_0x5d96a0,_0xf317c8)=>_0x5d96a0['date']>_0xf317c8[_0x30123c(0x26c)]?-0x1:_0xf317c8[_0x30123c(0x26c)]>_0x5d96a0[_0x30123c(0x26c)]?0x1:0x0);const _0x5d6933=getDate();if(_0x59c6da[0x0]){const _0x2fc7c4=fns[_0x30123c(0x2eb)](_0x59c6da[0x0][_0x30123c(0x26c)],_0x30123c(0x271),new Date()),_0x96de9f=fns['parse'](_0x5d6933,_0x30123c(0x271),new Date());if(fns['isEqual'](_0x2fc7c4,_0x96de9f)){_0x31d684=_0x59c6da[0x0][_0x30123c(0x1b6)];const _0xde0859=_0x31d684['find'](_0x5169d6=>_0x5169d6[_0x30123c(0x1c3)]==_0x1e8528[0x0][_0x30123c(0x1c3)]);_0xde0859?(_0xde0859[_0x30123c(0x1d1)]+=_0x1e8528[0x0][_0x30123c(0x1d1)],_0xde0859[_0x30123c(0x1d1)]==0x0&&(_0x31d684=_0x31d684[_0x30123c(0x1b4)](_0x562e4c=>{const _0x5d4fef=_0x30123c;return _0x562e4c[_0x5d4fef(0x1c3)]!=_0x1e8528[0x0][_0x5d4fef(0x1c3)];}))):_0x31d684[_0x30123c(0x1ca)](_0x1e8528[0x0]);const _0x243e31=_0x274458['find'](_0x75f54b=>_0x75f54b[_0x30123c(0x26c)]==_0x5d6933);_0x243e31[_0x30123c(0x1b6)]=_0x31d684;}else _0x274458['push']({'date':_0x5d6933,'changes':[_0x1e8528[0x0]]});}const _0x41582f=_0x274458[_0x30123c(0x1ac)](_0x4dbec2=>_0x4dbec2[_0x30123c(0x26c)]==_0x5d6933);if(_0x41582f){let _0x563172=!![];_0x41582f[_0x30123c(0x1b6)][_0x30123c(0x2f4)](_0x33befe=>{const _0x330c20=_0x30123c;if(_0x33befe[_0x330c20(0x1d1)]!=0x0)_0x563172=![];}),_0x563172&&(_0x274458=_0x274458['filter'](_0x2d44de=>{return _0x2d44de['date']!=_0x5d6933;}));}let _0x32a109=dbConfig[_0x30123c(0x266)](_0x30123c(0x243))[_0x30123c(0x1ac)]({'botID':botID})[_0x30123c(0x29c)]();_0x32a109&&(dbConfig[_0x30123c(0x266)](_0x30123c(0x243))[_0x30123c(0x1ac)]({'botID':botID})[_0x30123c(0x19f)]({'liquidity':_0x274458})[_0x30123c(0x1ee)](),config[_0x30123c(0x2d3)]=_0x274458),logHistory(_0x30123c(0x247),_0x30123c(0x1e0)+Math[_0x30123c(0x1a7)](_0x1e8528[0x0][_0x30123c(0x1d1)])+'\x20'+_0x1e8528[0x0][_0x30123c(0x1c3)]+'\x20'+(_0x1e8528[0x0][_0x30123c(0x1d1)]>0x0?_0x30123c(0x1ea):_0x30123c(0x1f9))+_0x30123c(0x27f)),proxyEmit(_0x30123c(0x2f5),emittedConfiguration());}else logger[_0x30123c(0x218)](_0x30123c(0x2ee)+Math[_0x30123c(0x1a7)](_0x1e8528[0x0]['number'])+'\x20'+_0x1e8528[0x0][_0x30123c(0x1c3)]+'\x20'+(_0x1e8528[0x0][_0x30123c(0x1d1)]>0x0?_0x30123c(0x1ea):_0x30123c(0x1f9)));transactionDetected=!![],currentCoins=_0x927f63,currentCoinsAll=_0x2a2d8b;}else logger[_0x30123c(0x218)](_0x30123c(0x1e0)+Math[_0x30123c(0x1a7)](_0x1e8528[0x0][_0x30123c(0x1d1)])+'\x20'+_0x1e8528[0x0][_0x30123c(0x1c3)]+'\x20'+(_0x1e8528[0x0][_0x30123c(0x1d1)]>0x0?'added':_0x30123c(0x1f9))+_0x30123c(0x299)),currentCoins=_0x927f63,currentCoinsAll=_0x2a2d8b;}await sleep(watchTransactionsInterval);}catch(_0x21b732){if(!exchangeStopped)await handleError(_0x21b732,_0x30123c(0x275));}else await sleep(0x64);}}async function loadSymbols(_0x900ec3=config[_0x4a6aab(0x31f)],_0x505b1b=![]){if(allSymbols&&!_0x505b1b)return;try{markets=await exchange['loadMarkets'](),allSymbols=exchange['symbols']['filter'](_0x547cf1=>{const _0x158577=_0x4a81;let _0x25f036=![];const _0x224c5a=exceptions[_0x900ec3[_0x158577(0x211)]()]||[];return _0x224c5a['forEach'](_0x58580a=>{const _0x3e1d9b=_0x158577;if(_0x547cf1[_0x3e1d9b(0x30c)](_0x58580a))_0x25f036=!![];}),!_0x25f036;});}catch(_0x5c730a){throw _0x5c730a;}}async function initclient(){const _0x2b921e=_0x4a6aab;emitLoadingProgress(),proxyEmit(_0x2b921e(0x2f5),emittedConfiguration()),proxyEmit(_0x2b921e(0x303),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2b921e(0x1b7),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});emitHistory();const _0x2a2033=getNormalizedPerformance();emitPerformance(_0x2a2033),getStartingBalances(_0x2a2033);}async function toggleBotMode(){const _0x55ce66=_0x4a6aab;let _0x54e31e=dbConfig[_0x55ce66(0x266)](_0x55ce66(0x243))[_0x55ce66(0x1ac)]({'botID':botID})['value']();if(_0x54e31e){const _0x36da77=!_0x54e31e[_0x55ce66(0x258)];dbConfig[_0x55ce66(0x266)]('bot')[_0x55ce66(0x1ac)]({'botID':botID})[_0x55ce66(0x19f)]({'headless':_0x36da77})['write'](),config[_0x55ce66(0x258)]=_0x36da77,proxyEmit(_0x55ce66(0x2f5),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x268971=_0x4a6aab;process[_0x268971(0x1a6)]({'updatebotmanager':!![]},_0x19b4dc=>{});}async function loadCoins(_0x194b02){const _0x1a17dc=_0x4a6aab;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x3f6409,_0x27ed3d=0x0,_0x5acfe9=0x0;_0x194b02[_0x1a17dc(0x2f4)](_0x35d517=>{const _0x26cb5b=_0x1a17dc;loading[_0x26cb5b(0x23f)][_0x26cb5b(0x1ca)](_0x35d517);}),loadingCanceled=![];let _0x26134a=![];while(_0x3f6409!=_0x194b02[_0x1a17dc(0x2cb)]){_0x3f6409=0x0,_0x194b02['forEach'](_0x5a3d8a=>{const _0xc76e1c=_0x1a17dc;if(global['ticker'][noslash(_0x5a3d8a)]){loading[_0xc76e1c(0x23f)]=loading['remainingSymbols'][_0xc76e1c(0x1b4)](_0x4886d3=>_0x4886d3!=_0x5a3d8a);if(!watchedSymbols[_0xc76e1c(0x30c)](_0x5a3d8a))watchedSymbols[_0xc76e1c(0x1ca)](_0x5a3d8a);_0x3f6409++;}}),loading[_0x1a17dc(0x26e)]=Math[_0x1a17dc(0x324)](_0x3f6409/_0x194b02[_0x1a17dc(0x2cb)]*0x64);loading['progress']!=0x64&&(_0x5acfe9>0x1e*0x5&&(loading[_0x1a17dc(0x2b9)]=!![],emitLoadingProgress()),_0x5acfe9>0x78*0x5&&!_0x26134a&&(loading[_0x1a17dc(0x23b)]=!![],emitLoadingProgress(),_0x26134a=!![],logHistory(_0x1a17dc(0x28f),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x1a17dc(0x19a)](',\x20')+_0x1a17dc(0x20f)),logHistory('error',_0x1a17dc(0x1f2)+loadCoinsRetryInterval/0xea60+_0x1a17dc(0x19c)),pidCoinReloading=setTimeout(()=>{const _0x1c2ab6=_0x1a17dc;process[_0x1c2ab6(0x1a6)]({'stop':_0x1c2ab6(0x2dc)},_0x11684d=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x1a17dc(0x23b)]=!![],emitLoadingProgress();break;}else _0x3f6409!=_0x27ed3d&&(_0x27ed3d=_0x3f6409,emitLoadingProgress()),_0x5acfe9++,await sleep(0xc8);}_0x3f6409==_0x194b02['length']&&(coinsLoaded=!![],process[_0x1a17dc(0x1a6)]({'status':_0x1a17dc(0x1e9),'live':_0x1a17dc(0x322)},_0x4a4734=>{}),_0x26134a&&logHistory('success',_0x1a17dc(0x316)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x48bab0=_0x4a6aab;proxyEmit(_0x48bab0(0x2f5),{...emittedConfiguration(),'configstate':_0x48bab0(0x1b3)});}function emitLoadingProgress(){const _0x358512=_0x4a6aab;proxyEmit(_0x358512(0x2e0),loading);}async function getFiat(){const _0x4b18db=_0x4a6aab;let _0xaaa708=global['ticker'][stablecoins[_0x4b18db(0x1ec)][_0x4b18db(0x1c3)]],_0x170676=global[_0x4b18db(0x25d)][stablecoins[_0x4b18db(0x202)]['coin']];return{'eur':Number(_0xaaa708),'usd':Number(_0x170676)};}function capitalize(_0x26b670){const _0x5b6df4=_0x4a6aab;return _0x26b670[_0x5b6df4(0x311)](0x0,0x1)[_0x5b6df4(0x277)]()+_0x26b670[_0x5b6df4(0x311)](0x1);}function supportedExchanges(){const _0x47ddcf=_0x4a6aab,_0x7bf089=['ws',_0x47ddcf(0x2ff),_0x47ddcf(0x1c7),'watchTrades','watchOrders',_0x47ddcf(0x313),_0x47ddcf(0x1bb),_0x47ddcf(0x2c1),_0x47ddcf(0x1f0),_0x47ddcf(0x1e4)];let _0x12e2c1=[],_0x3e7047=[],_0x56a68f=ccxt['exchanges'];_0x56a68f['forEach'](_0x577ffb=>{const _0x55e02f=_0x47ddcf;try{const _0x4dcdbf=new ccxt[_0x577ffb]();if(_0x4dcdbf[_0x55e02f(0x1c0)]['ws'])_0x3e7047[_0x55e02f(0x1ca)](_0x4dcdbf);}catch(_0x32082f){}}),_0x3e7047[_0x47ddcf(0x2f4)](_0x1dd9f0=>{const _0xb61ee2=_0x47ddcf;let _0x552ab9=0x0;_0x7bf089[_0xb61ee2(0x2f4)](_0x4d8f49=>{const _0x3f5425=_0xb61ee2;_0x4d8f49 in _0x1dd9f0['has']&&_0x1dd9f0[_0x3f5425(0x1c0)][_0x4d8f49]&&_0x552ab9++;}),_0x552ab9==_0x7bf089[_0xb61ee2(0x2cb)]&&_0x12e2c1[_0xb61ee2(0x1ca)](capitalize(_0x1dd9f0['id']));});let _0x35425c=[];return _0x56a68f['forEach'](_0x3a54eb=>{const _0x4631cf=_0x47ddcf;_0x3a54eb=capitalize(_0x3a54eb);if(!_0x12e2c1[_0x4631cf(0x30c)](_0x3a54eb))_0x35425c['push'](_0x3a54eb);}),_0x12e2c1;}function setStartDatePerformance(){const _0xee3c65=_0x4a6aab;if(config&&config[_0xee3c65(0x2d3)][0x0]['changes'][_0xee3c65(0x2cb)]!=0x0){const _0x166c6=config[_0xee3c65(0x2d3)][0x0][_0xee3c65(0x1b6)];dbPerformance[_0xee3c65(0x266)](_0xee3c65(0x287))[_0xee3c65(0x1ac)]({'date':config[_0xee3c65(0x30f)]})['assign']({'coins':_0x166c6})['write']();}}async function recreateCoinResults(){const _0x4d1ca1=_0x4a6aab;let _0x5216e5,_0x12bed3=[];try{const _0x5b0363=fns[_0x4d1ca1(0x2c8)](fns[_0x4d1ca1(0x2e7)](config[_0x4d1ca1(0x30f)][_0x4d1ca1(0x209)](/\//g,'-')),_0x4d1ca1(0x1e7));for(const _0x3d298f of currentCoins){if(_0x3d298f[_0x4d1ca1(0x1c3)]!=config[_0x4d1ca1(0x22f)]){let _0x4d0c84=0x0,_0x5a4966,_0x699d8;_0x5216e5=await getAllEventOrders(_0x3d298f['symbol']);if(_0x5216e5['length']>0x0)_0x5216e5[_0x4d1ca1(0x2f4)](_0x2b8240=>{const _0x1091a8=_0x4d1ca1,_0x5d4f92=_0x3d298f[_0x1091a8(0x213)]['includes'](config['basecoin']+'/');_0x12bed3[_0x1091a8(0x1ca)]({'datetime':_0x2b8240['datetime'],'coin':_0x3d298f[_0x1091a8(0x1c3)],'symbol':_0x3d298f[_0x1091a8(0x213)],'side':_0x2b8240[_0x1091a8(0x2c7)],'reverse':_0x5d4f92,'amount':formatResult(_0x2b8240[_0x1091a8(0x273)],0x8),'filled':formatResult(_0x2b8240[_0x1091a8(0x273)],0x8),'price':formatResult(_0x2b8240[_0x1091a8(0x1f7)],0x8)}),_0x4d0c84=_0x2b8240[_0x1091a8(0x2c7)]==_0x1091a8(0x2b0)?_0x4d0c84+_0x2b8240[_0x1091a8(0x273)]:_0x4d0c84-_0x2b8240[_0x1091a8(0x273)];if(!_0x699d8)_0x699d8=_0x2b8240[_0x1091a8(0x1f7)];});_0x5a4966=_0x3d298f['number']-_0x4d0c84;let _0x1b3ae7;config[_0x4d1ca1(0x2d3)][_0x4d1ca1(0x2f4)](_0x9c367e=>{const _0x1e4670=_0x4d1ca1;!_0x1b3ae7&&(_0x1b3ae7=_0x9c367e['changes'][_0x1e4670(0x1ac)](_0x4551ce=>_0x4551ce[_0x1e4670(0x1c3)]==_0x3d298f['coin']),_0x1b3ae7&&(_0x5a4966=_0x1b3ae7[_0x1e4670(0x1d1)],_0x699d8=_0x1b3ae7[_0x1e4670(0x1f7)]));});let _0x2162e3=dbCoinResults[_0x4d1ca1(0x266)]('coins')[_0x4d1ca1(0x1ac)]({'coin':_0x3d298f['coin']})[_0x4d1ca1(0x29c)]();_0x2162e3={'coin':_0x3d298f[_0x4d1ca1(0x1c3)],'number':_0x5a4966,'breakeven':_0x699d8,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4d1ca1(0x266)](_0x4d1ca1(0x27b))['find']({'coin':_0x3d298f[_0x4d1ca1(0x1c3)]})['assign'](_0x2162e3)[_0x4d1ca1(0x1ee)]();}}_0x12bed3[_0x4d1ca1(0x1d9)]((_0x57c676,_0x2aa69f)=>_0x57c676[_0x4d1ca1(0x20c)]>_0x2aa69f[_0x4d1ca1(0x20c)]?0x1:_0x2aa69f[_0x4d1ca1(0x20c)]>_0x57c676['datetime']?-0x1:0x0);let _0x231792=0x0;for(let _0x2968af of _0x12bed3){await updateCoinResults(_0x2968af,!![]);}}catch(_0x527d21){await handleError(_0x527d21,_0x4d1ca1(0x2ab));}}async function getAllEventOrders(_0x5ae853){const _0xdc3374=_0x4a6aab;let _0xe0fec6=[],_0x464c99=dbLogs[_0xdc3374(0x266)](_0xdc3374(0x21a))[_0xdc3374(0x1b4)](_0x52beb9=>{const _0x23a2b4=_0xdc3374,_0x2a7254=_0x52beb9[_0x23a2b4(0x217)][_0x23a2b4(0x211)]();return _0x2a7254[_0x23a2b4(0x30c)](_0x5ae853[_0x23a2b4(0x211)]())&&(_0x2a7254[_0x23a2b4(0x30c)]('market')&&_0x2a7254[_0x23a2b4(0x30c)](_0x23a2b4(0x25e))||_0x2a7254[_0x23a2b4(0x30c)](_0x23a2b4(0x273))&&_0x2a7254[_0x23a2b4(0x30c)](_0x23a2b4(0x25e)));})[_0xdc3374(0x248)](_0xdc3374(0x2a1))['value']();return _0x464c99[_0xdc3374(0x2f4)](_0x90006a=>{const _0x26b4d5=_0xdc3374,_0x3ca2bc=_0x90006a[_0x26b4d5(0x217)][_0x26b4d5(0x30c)](_0x26b4d5(0x319))?_0x26b4d5(0x319):_0x26b4d5(0x2b0),_0x1a54ae=/#([0-9]|\.)+\s/i,_0x2ba63a=Number(_0x1a54ae[_0x26b4d5(0x1ae)](_0x90006a[_0x26b4d5(0x217)])[0x0][_0x26b4d5(0x325)](0x1)),_0x5e131f=/@([0-9]|\.)+$/i,_0x962d05=Number(_0x5e131f[_0x26b4d5(0x1ae)](_0x90006a['event'])[0x0][_0x26b4d5(0x325)](0x1));_0xe0fec6[_0x26b4d5(0x1ca)]({'datetime':_0x90006a[_0x26b4d5(0x2a1)],'coin':symbolToCoin(_0x5ae853),'symbol':_0x5ae853,'side':_0x3ca2bc,'amount':_0x2ba63a,'filled':_0x2ba63a,'price':_0x962d05});}),_0xe0fec6;}async function getAllOrders(_0x191fa6,_0x15a4ac){const _0x5e799a=_0x4a6aab;let _0x4c6337=[];while(_0x15a4ac<exchange[_0x5e799a(0x31a)]()){const _0x448281=0x1f4,_0x32423b=await exchange[_0x5e799a(0x1f0)](_0x191fa6,_0x15a4ac,_0x448281);if(_0x32423b['length'])_0x15a4ac=_0x32423b[_0x32423b[_0x5e799a(0x2cb)]-0x1][_0x5e799a(0x1f6)]+0x1,_0x4c6337=_0x4c6337[_0x5e799a(0x244)](_0x32423b);else break;}return _0x4c6337;}async function validate24hChanges(){const _0x2ebff2=_0x4a6aab;for(const _0x5c1b3e of currentCoins){if(_0x5c1b3e[_0x2ebff2(0x1c3)]!=config[_0x2ebff2(0x22f)]){let _0x73d87c;_0x5c1b3e[_0x2ebff2(0x314)]?_0x73d87c=formatResult((0x1/(global[_0x2ebff2(0x26b)][noslash(_0x5c1b3e[_0x2ebff2(0x213)])]/0x64+0x1)-0x1)*0x64,0x3):_0x73d87c=global['change'][noslash(_0x5c1b3e[_0x2ebff2(0x213)])],_0x73d87c<config['change24h']&&(logHistory(_0x2ebff2(0x28f),_0x5c1b3e[_0x2ebff2(0x1c3)]+_0x2ebff2(0x2a5)+_0x73d87c+'%'),logHistory('error',_0x2ebff2(0x27d)),logHistory(_0x2ebff2(0x28f),_0x2ebff2(0x1bd)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x375d6f,_0x6ad5cf){const _0x4abadd=_0x4a6aab;if(!_0x375d6f)return!![];const _0x1144fe=_0x6ad5cf[_0x4abadd(0x208)]('.'),_0x41af58=_0x375d6f[_0x4abadd(0x208)]('.');for(var _0xf752e0=0x0;_0xf752e0<_0x41af58[_0x4abadd(0x2cb)];_0xf752e0++){const _0x5e0e82=~~_0x41af58[_0xf752e0],_0x301a47=~~_0x1144fe[_0xf752e0];if(_0x5e0e82<_0x301a47)return!![];if(_0x5e0e82>_0x301a47)return![];}return![];}async function oneTimeMigration(){const _0x38ba87=_0x4a6aab;let _0x32a005=dbLogs['get'](_0x38ba87(0x268))[_0x38ba87(0x29c)]();if(isOlderVersion(_0x32a005,_0x38ba87(0x283))){let _0x22fe6a=[];const _0x5f4ea8=dbLogs['get'](_0x38ba87(0x21a))[_0x38ba87(0x29c)]();_0x5f4ea8[_0x38ba87(0x2f4)](_0x6cf5be=>{const _0x103ffe=_0x38ba87;_0x22fe6a[_0x103ffe(0x1ca)]({'time':_0x6cf5be['time'],'type':_0x6cf5be['type'],'event':_0x6cf5be[_0x103ffe(0x217)]});}),dbLogs['get'](_0x38ba87(0x21a))[_0x38ba87(0x19f)](_0x22fe6a)[_0x38ba87(0x1ee)]();}let _0x45dc93=dbConfig['get'](_0x38ba87(0x268))[_0x38ba87(0x29c)]();if(isOlderVersion(_0x45dc93,'2.3.5')){let _0x5b5dc2=dbConfig[_0x38ba87(0x266)](_0x38ba87(0x243))[_0x38ba87(0x1ac)]({'botID':botID})[_0x38ba87(0x29c)]();if(_0x5b5dc2){let _0x4fba55=[];_0x5b5dc2[_0x38ba87(0x231)][_0x38ba87(0x2f4)](_0x10538c=>{const _0x3abb58=_0x38ba87;_0x4fba55['push']({'coin':_0x10538c[_0x3abb58(0x1c3)],'number':_0x10538c[_0x3abb58(0x1cb)],'price':_0x10538c[_0x3abb58(0x246)]}),delete _0x10538c['startnumber'],delete _0x10538c['startprice'];});if(_0x4fba55[_0x38ba87(0x2cb)]!==0x0)fs['writeFile'](configbackuppath+(_0x38ba87(0x28d)+botID+_0x38ba87(0x2ef)),JSON['stringify'](_0x4fba55,null,0x4),function(_0x525822){if(_0x525822){}});const _0x2662be=(_0x22842a,_0x9d2cd)=>{const _0x39d870=_0x38ba87;let _0x3213ef=[];_0x9d2cd[_0x39d870(0x2f4)](_0xe5d34c=>{const _0x2d802f=_0x39d870,_0x2fa45a=_0x22842a[_0x2d802f(0x1ac)](_0x2251f8=>_0x2251f8[_0x2d802f(0x1c3)]==_0xe5d34c[_0x2d802f(0x1c3)]);if(!_0x2fa45a)_0x3213ef[_0x2d802f(0x1ca)](_0xe5d34c);});let _0x32b67c=[];return _0x22842a[_0x39d870(0x2f4)](_0x29ba00=>{const _0x423831=_0x39d870,_0x2de376=_0x9d2cd[_0x423831(0x1ac)](_0x12a7fc=>_0x12a7fc['coin']==_0x29ba00[_0x423831(0x1c3)]);if(!_0x2de376||_0x2de376[_0x423831(0x1d1)]==0x0&&_0x29ba00[_0x423831(0x1d1)]!=0x0)_0x32b67c['push'](_0x29ba00);}),{'missingDay1':_0x3213ef,'notInDay2':_0x32b67c};},_0x5924ea=dbPerformance[_0x38ba87(0x266)]('data')[_0x38ba87(0x24a)]()[_0x38ba87(0x29c)]();if(_0x5924ea[_0x38ba87(0x2cb)]>0x1){const {missingDay1:_0x27e2a6,notInDay2:_0x4511d1}=_0x2662be(_0x4fba55,_0x5924ea[0x1]['coins']);_0x4fba55=[..._0x4fba55,..._0x27e2a6],_0x4511d1[_0x38ba87(0x2f4)](_0x5e800e=>{const _0x11674a=_0x38ba87;let _0xcbe85=_0x4fba55[_0x11674a(0x23a)](_0x2442ea=>_0x2442ea[_0x11674a(0x1c3)]==_0x5e800e[_0x11674a(0x1c3)]);_0xcbe85!=-0x1&&_0x4fba55['splice'](_0xcbe85,0x1);});}_0x4fba55['sort']((_0x3406d4,_0x18f57)=>_0x3406d4[_0x38ba87(0x1c3)]>_0x18f57[_0x38ba87(0x1c3)]?0x1:_0x18f57[_0x38ba87(0x1c3)]>_0x3406d4['coin']?-0x1:0x0);let _0x160081=[{'date':_0x5b5dc2[_0x38ba87(0x30f)],'changes':_0x4fba55}];_0x5924ea[_0x38ba87(0x2cb)]>0x2&&_0x5924ea[_0x38ba87(0x2f4)]((_0x2094a7,_0x929ba8)=>{const _0x2ef18d=_0x38ba87;if(_0x929ba8>0x0&&_0x929ba8<_0x5924ea[_0x2ef18d(0x2cb)]-0x1){const {missingDay1:_0x378375,notInDay2:_0x17ee9c}=_0x2662be(_0x5924ea[_0x929ba8][_0x2ef18d(0x27b)],_0x5924ea[_0x929ba8+0x1][_0x2ef18d(0x27b)]);_0x4fba55=[],(_0x378375['length']!=0x0||_0x17ee9c[_0x2ef18d(0x2cb)]!=0x0)&&(_0x378375[_0x2ef18d(0x2cb)]!=0x0&&_0x4fba55[_0x2ef18d(0x1ca)](..._0x378375),_0x17ee9c[_0x2ef18d(0x2cb)]!=0x0&&(_0x17ee9c[_0x2ef18d(0x2f4)](_0xbdcdca=>{const _0x5142eb=_0x2ef18d;_0xbdcdca['number']=-_0xbdcdca[_0x5142eb(0x1d1)];}),_0x4fba55['push'](..._0x17ee9c)),_0x4fba55['sort']((_0x3c7294,_0x325f0c)=>_0x3c7294[_0x2ef18d(0x1c3)]>_0x325f0c[_0x2ef18d(0x1c3)]?0x1:_0x325f0c[_0x2ef18d(0x1c3)]>_0x3c7294['coin']?-0x1:0x0),_0x160081[_0x2ef18d(0x1ca)]({'date':_0x5924ea[_0x929ba8+0x1][_0x2ef18d(0x26c)],'changes':_0x4fba55}));}}),dbConfig['get']('bot')['find']({'botID':botID})[_0x38ba87(0x19f)]({..._0x5b5dc2,'liquidity':_0x160081})['write']();}}if(isOlderVersion(_0x45dc93,_0x38ba87(0x2c5))){let _0x30f8bc=dbConfig[_0x38ba87(0x266)]('bot')[_0x38ba87(0x1ac)]({'botID':botID})[_0x38ba87(0x29c)]();if(_0x30f8bc){const _0x356be9=_0x30f8bc[_0x38ba87(0x31f)],_0x20c5f2=_0x356be9?capitalize(_0x356be9):_0x38ba87(0x19b);dbConfig[_0x38ba87(0x266)](_0x38ba87(0x243))[_0x38ba87(0x1ac)]({'botID':botID})[_0x38ba87(0x19f)]({'exchange':_0x20c5f2})[_0x38ba87(0x1ee)]();}}let _0x5498f9=dbPerformance[_0x38ba87(0x266)](_0x38ba87(0x268))[_0x38ba87(0x29c)]();isOlderVersion(_0x5498f9,_0x38ba87(0x283))&&setStartDatePerformance();let _0x3f36d0=dbCoinResults[_0x38ba87(0x266)](_0x38ba87(0x268))[_0x38ba87(0x29c)]();if(isOlderVersion(_0x3f36d0,'2.5.0')){let _0x35bddd=dbCoinResults['get'](_0x38ba87(0x27b))[_0x38ba87(0x29c)]();if(_0x35bddd['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4c302c=_0x4a6aab;dbConfig[_0x4c302c(0x28e)](_0x4c302c(0x268),serverversion)[_0x4c302c(0x1ee)](),dbPerformance[_0x4c302c(0x28e)]('version',serverversion)[_0x4c302c(0x1ee)](),dbLogs[_0x4c302c(0x28e)](_0x4c302c(0x268),serverversion)[_0x4c302c(0x1ee)](),dbCoinResults[_0x4c302c(0x28e)](_0x4c302c(0x268),serverversion)[_0x4c302c(0x1ee)]();}function getConfiguration(_0x5d8554){const _0x95cc90=_0x4a6aab;let _0x5cbe12=dbConfig[_0x95cc90(0x266)](_0x95cc90(0x243))[_0x95cc90(0x1ac)]({'botID':_0x5d8554})[_0x95cc90(0x29c)]();if(_0x5cbe12){let _0x25f5ba=![];typeof _0x5cbe12[_0x95cc90(0x204)]==_0x95cc90(0x2c2)&&(_0x5cbe12={..._0x5cbe12,'threshold':Number(_0x5cbe12['threshold'])},_0x25f5ba=!![]),_0x5cbe12[_0x95cc90(0x2cf)]==null&&(_0x5cbe12={..._0x5cbe12,'change24h':-0x14},_0x25f5ba=!![]),!_0x5cbe12[_0x95cc90(0x326)]&&(_0x5cbe12={..._0x5cbe12,'fiat':_0x95cc90(0x29d)},_0x25f5ba=!![]),!_0x5cbe12[_0x95cc90(0x1df)]&&(_0x5cbe12={..._0x5cbe12,'onepagemode':settings[_0x95cc90(0x1df)]},_0x25f5ba=!![]),!_0x5cbe12[_0x95cc90(0x1c5)]&&(_0x5cbe12={..._0x5cbe12,'colorscheme':_0x95cc90(0x1a2)},_0x25f5ba=!![]),!_0x5cbe12[_0x95cc90(0x24d)]&&(_0x5cbe12={..._0x5cbe12,'autoliquidity':!![]},_0x25f5ba=!![]),_0x25f5ba&&(_0x5cbe12={'botID':_0x5cbe12[_0x95cc90(0x230)],'exchange':_0x5cbe12['exchange'],'apiKey':_0x5cbe12[_0x95cc90(0x1ad)],'apiSecret':_0x5cbe12[_0x95cc90(0x2e9)],'apiPassword':_0x5cbe12[_0x95cc90(0x1fd)],'basecoin':_0x5cbe12['basecoin'],'botname':_0x5cbe12['botname'],'showname':_0x5cbe12[_0x95cc90(0x263)],'threshold':_0x5cbe12[_0x95cc90(0x204)],'ordertype':_0x5cbe12['ordertype'],'timeout':_0x5cbe12[_0x95cc90(0x2b9)],'fiat':_0x5cbe12[_0x95cc90(0x326)],'startdate':_0x5cbe12[_0x95cc90(0x30f)],'recreate':_0x5cbe12[_0x95cc90(0x2cc)],'timeshift':_0x5cbe12[_0x95cc90(0x255)],'onepagemode':_0x5cbe12[_0x95cc90(0x1df)],'headless':_0x5cbe12['headless'],'cooldown':_0x5cbe12[_0x95cc90(0x2b1)],'change24h':_0x5cbe12[_0x95cc90(0x2cf)],'emojibuy':_0x5cbe12['emojibuy'],'emojisell':_0x5cbe12[_0x95cc90(0x250)],'colorscheme':_0x5cbe12[_0x95cc90(0x1c5)],'portfolio':_0x5cbe12[_0x95cc90(0x231)],'autoliquidity':_0x5cbe12[_0x95cc90(0x24d)],'liquidity':_0x5cbe12[_0x95cc90(0x2d3)],'openOrders':_0x5cbe12[_0x95cc90(0x24c)]},dbConfig[_0x95cc90(0x266)](_0x95cc90(0x243))[_0x95cc90(0x240)]()[_0x95cc90(0x1ee)](),dbConfig[_0x95cc90(0x266)]('bot')[_0x95cc90(0x1ca)](_0x5cbe12)[_0x95cc90(0x1ee)]());}else _0x5cbe12={'botID':_0x5d8554,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x5d8554,'showname':![],'threshold':0x3,'ordertype':_0x95cc90(0x262),'timeout':0x14,'fiat':_0x95cc90(0x29d),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x95cc90(0x255)],'onepagemode':settings[_0x95cc90(0x1df)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x95cc90(0x1a2),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5cbe12;}function emittedConfiguration(){const _0x55b253=_0x4a6aab;let _0x259e04;if(config[_0x55b253(0x1ad)]=='')_0x259e04={...config,'configstate':_0x55b253(0x1de)};else config[_0x55b253(0x1ad)]==_0x55b253(0x2f1)?_0x259e04={...config,'configstate':_0x55b253(0x1b0)}:(_0x259e04={...config,'apiKey':_0x55b253(0x2a6),'apiSecret':'************'},config[_0x55b253(0x1fd)]&&(_0x259e04[_0x55b253(0x1fd)]=_0x55b253(0x2a6)));return _0x259e04;}function getSettings(){const _0x4b52af=_0x4a6aab;return dbSettings['get']('settings')[_0x4b52af(0x29c)]();}function getSecure(){const _0x47b41b=_0x4a6aab;return dbSecure['get'](_0x47b41b(0x1b9))[_0x47b41b(0x29c)]()||{};}function updateTimeshift(_0x5c2887){const _0x3a630f=_0x4a6aab;let _0x556a54=dbConfig[_0x3a630f(0x266)](_0x3a630f(0x243))['find']({'botID':botID})[_0x3a630f(0x29c)]();_0x556a54&&dbConfig['get'](_0x3a630f(0x243))['find']({'botID':botID})['assign']({'timeshift':_0x5c2887})[_0x3a630f(0x1ee)](),config['timeshift']=_0x5c2887,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x6b396){const _0x3ed706=_0x4a6aab;let _0x416b97=dbConfig[_0x3ed706(0x266)](_0x3ed706(0x243))['find']({'botID':botID})[_0x3ed706(0x29c)]();_0x416b97&&dbConfig[_0x3ed706(0x266)](_0x3ed706(0x243))[_0x3ed706(0x1ac)]({'botID':botID})[_0x3ed706(0x19f)]({'onepagemode':_0x6b396})[_0x3ed706(0x1ee)](),config[_0x3ed706(0x1df)]=_0x6b396,proxyEmit(_0x3ed706(0x2f5),emittedConfiguration());}async function storeConfiguration(_0x29ecef){const _0x4978a7=_0x4a6aab;logger[_0x4978a7(0x218)](_0x4978a7(0x19d));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4978a7(0x218)]('Transaction\x20detection\x20blocked');let _0x15a1c2=[],_0x39603a=![],_0x4c8e40=![],_0xa636d9=[];_0x29ecef['portfolio']['forEach'](_0x379d5b=>{const _0x5151e4=_0x4978a7;if(!_0x379d5b[_0x5151e4(0x2c9)]&&_0x379d5b['coin']!=_0x29ecef[_0x5151e4(0x22f)])_0xa636d9['push'](_0x379d5b[_0x5151e4(0x213)]);}),_0xa636d9[_0x4978a7(0x2f4)](_0x328d56=>{const _0x20abb1=_0x4978a7,_0x3649e0=watchedSymbols[_0x20abb1(0x30c)](_0x328d56);!_0x3649e0&&_0x15a1c2[_0x20abb1(0x1ca)](_0x328d56);}),_0xa636d9['forEach'](_0x1a7595=>{const _0x163e44=_0x4978a7,_0x2ac894=currentCoins[_0x163e44(0x1ac)](_0x5cab12=>_0x5cab12[_0x163e44(0x213)]==_0x1a7595);!_0x2ac894&&(_0x39603a=!![]);}),currentCoins['forEach'](_0x3c0908=>{const _0x29eb24=_0x4978a7;if(_0x3c0908['coin']!=config['basecoin']){const _0x5ab540=_0xa636d9[_0x29eb24(0x1ac)](_0x4dcf41=>_0x4dcf41==_0x3c0908['symbol']);!_0x5ab540&&(_0x39603a=!![]);}}),_0x29ecef['portfolio']['forEach'](_0x5cb95e=>{const _0x11af97=_0x4978a7,_0x47416c=config['portfolio'][_0x11af97(0x1ac)](_0x19ba54=>_0x19ba54[_0x11af97(0x1c3)]==_0x5cb95e[_0x11af97(0x1c3)]);if(_0x47416c&&_0x5cb95e[_0x11af97(0x234)]!=_0x47416c[_0x11af97(0x234)])_0x4c8e40=!![];});let _0x42deac=dbConfig[_0x4978a7(0x266)](_0x4978a7(0x243))[_0x4978a7(0x1ac)]({'botID':botID})[_0x4978a7(0x29c)]();_0x29ecef={..._0x29ecef,'apiKey':crypt['decrypt'](secure['privateKey'],_0x29ecef['apiKey'])[_0x4978a7(0x27e)],'apiSecret':crypt[_0x4978a7(0x2d2)](secure['privateKey'],_0x29ecef[_0x4978a7(0x2e9)])[_0x4978a7(0x27e)]};_0x29ecef[_0x4978a7(0x1fd)]&&(_0x29ecef['apiPassword']=crypt[_0x4978a7(0x2d2)](secure['privateKey'],_0x29ecef[_0x4978a7(0x1fd)])[_0x4978a7(0x27e)]);let _0x503b39=![];if(_0x42deac){_0x29ecef[_0x4978a7(0x1ad)]==_0x4978a7(0x2a6)?_0x29ecef[_0x4978a7(0x1ad)]=config[_0x4978a7(0x1ad)]:_0x503b39=!![];_0x29ecef[_0x4978a7(0x2e9)]==_0x4978a7(0x2a6)?_0x29ecef[_0x4978a7(0x2e9)]=config['apiSecret']:_0x503b39=!![];if(_0x29ecef[_0x4978a7(0x1fd)]==_0x4978a7(0x2a6))_0x29ecef[_0x4978a7(0x1fd)]=config[_0x4978a7(0x1fd)];else{if(_0x29ecef[_0x4978a7(0x1fd)])_0x503b39=!![];}dbConfig[_0x4978a7(0x266)]('bot')[_0x4978a7(0x1ac)]({'botID':botID})[_0x4978a7(0x19f)](_0x29ecef)[_0x4978a7(0x1ee)]();}else dbConfig['get'](_0x4978a7(0x243))[_0x4978a7(0x1ca)](_0x29ecef)[_0x4978a7(0x1ee)](),_0x503b39=!![],process['send']({'status':_0x4978a7(0x1e9),'live':_0x4978a7(0x322)},_0x35b810=>{});process[_0x4978a7(0x1a6)]({'botname':_0x29ecef[_0x4978a7(0x1c8)]},_0x43b2ac=>{}),updateBotManager(),config={..._0x29ecef},proxyEmit(_0x4978a7(0x1b8)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x503b39)await reset(_0x15a1c2,!![]);else _0x39603a||_0x4c8e40?await reset(_0x15a1c2,![]):getBalances();blockTransactionDetection=![],logger[_0x4978a7(0x218)](_0x4978a7(0x260));}async function storeHeadless(_0x26e1e1){const _0x4cebe9=_0x4a6aab,_0x9942c0={...config,'headless':_0x26e1e1[_0x4cebe9(0x258)]};let _0x2a6113=dbConfig[_0x4cebe9(0x266)](_0x4cebe9(0x243))[_0x4cebe9(0x1ac)]({'botID':botID})['value']();_0x2a6113&&dbConfig[_0x4cebe9(0x266)](_0x4cebe9(0x243))[_0x4cebe9(0x1ac)]({'botID':botID})[_0x4cebe9(0x19f)](_0x9942c0)[_0x4cebe9(0x1ee)](),config={..._0x9942c0},updateBotManager(),proxyEmit(_0x4cebe9(0x2f5),emittedConfiguration());}async function storeFiat(_0x46423f){const _0x33a10b=_0x4a6aab,_0x179433={...config,'fiat':_0x46423f};let _0x4ee393=dbConfig[_0x33a10b(0x266)](_0x33a10b(0x243))['find']({'botID':botID})[_0x33a10b(0x29c)]();_0x4ee393&&dbConfig['get']('bot')[_0x33a10b(0x1ac)]({'botID':botID})['assign'](_0x179433)[_0x33a10b(0x1ee)](),config={..._0x179433},proxyEmit(_0x33a10b(0x2f5),emittedConfiguration());}function resetHistory(){const _0x1e88b0=_0x4a6aab;logger[_0x1e88b0(0x222)](_0x1e88b0(0x1e2));try{if(fs[_0x1e88b0(0x232)](path[_0x1e88b0(0x19a)](configpath,'bot-'+botID+_0x1e88b0(0x252))))fs[_0x1e88b0(0x2df)](path[_0x1e88b0(0x19a)](configpath,'bot-'+botID+_0x1e88b0(0x252)));if(fs[_0x1e88b0(0x232)](path[_0x1e88b0(0x19a)](configpath,_0x1e88b0(0x28a)+botID+_0x1e88b0(0x269))))fs['unlinkSync'](path[_0x1e88b0(0x19a)](configpath,_0x1e88b0(0x28a)+botID+_0x1e88b0(0x269)));if(fs[_0x1e88b0(0x232)](path[_0x1e88b0(0x19a)](configpath,'bot-'+botID+_0x1e88b0(0x237))))fs[_0x1e88b0(0x2df)](path[_0x1e88b0(0x19a)](configpath,_0x1e88b0(0x28a)+botID+'-results.json'));}catch(_0x1f1c48){if(_0x1f1c48)logger[_0x1e88b0(0x222)](_0x1e88b0(0x276),_0x1f1c48);}const _0x53a658=getDate();let _0x2f386b=[];currentCoins[_0x1e88b0(0x2f4)](_0x3892a2=>{const _0x5ebbf3=_0x1e88b0;_0x2f386b[_0x5ebbf3(0x1ca)]({'coin':_0x3892a2[_0x5ebbf3(0x1c3)],'number':_0x3892a2[_0x5ebbf3(0x1d1)],'price':_0x3892a2[_0x5ebbf3(0x203)]});});let _0x185e21=dbConfig[_0x1e88b0(0x266)](_0x1e88b0(0x243))['find']({'botID':botID})['value']();_0x185e21&&(dbConfig[_0x1e88b0(0x266)](_0x1e88b0(0x243))[_0x1e88b0(0x1ac)]({'botID':botID})[_0x1e88b0(0x19f)]({'liquidity':[{'date':_0x53a658,'changes':_0x2f386b}]})[_0x1e88b0(0x1ee)](),config[_0x1e88b0(0x2d3)]=[]),process['send']({'stop':_0x1e88b0(0x2dc)},_0x623fa5=>{});}function noslash(_0x4e3670){return _0x4e3670['replace']('/','');}function updateHighestFee(_0x2fa12b,_0x2c738f){const _0x164899=_0x4a6aab;lastFees[_0x164899(0x2fd)]=_0x2fa12b,lastFees['recent20'][_0x164899(0x2cb)]===0x14&&lastFees[_0x164899(0x22d)][_0x164899(0x296)](),lastFees[_0x164899(0x22d)]['push'](_0x2c738f),lastFees[_0x164899(0x27c)]=Math['max'](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x4793f4){const _0x14ef80=_0x4a6aab;logger[_0x14ef80(0x218)](_0x14ef80(0x2d7)+_0x4793f4[_0x14ef80(0x213)]+_0x14ef80(0x233)+_0x4793f4['status']+_0x14ef80(0x233)+_0x4793f4['id']);let _0x58dbdc=_0x4793f4['status'],_0xb5f20=![];currentCoins['forEach'](_0x1109fb=>{const _0x57e237=_0x14ef80;_0x1109fb[_0x57e237(0x213)]==_0x4793f4[_0x57e237(0x213)]&&(_0xb5f20=!![]);});if(!_0xb5f20)return;const _0x2d54e1=currentCoins[_0x14ef80(0x1ac)](_0x5c6607=>_0x5c6607['symbol']==_0x4793f4['symbol']),_0x193140=_0x5325a8=>{const _0x4dd0d4=_0x14ef80;if(_0x2d54e1)_0x2d54e1[_0x4dd0d4(0x219)]=_0x5325a8;};if(_0x58dbdc==_0x14ef80(0x2ac))_0x193140(_0x14ef80(0x2ac));else{if(_0x58dbdc==_0x14ef80(0x2b5)){_0x193140('canceled');const _0x2a6acc=await getCoins();[currentCoins,currentCoinsAll]=_0x2a6acc,await getOpenOrders(),handleOpenOrders();}else{if(_0x58dbdc==_0x14ef80(0x328)){logger['debug'](_0x14ef80(0x2d0)+_0x4793f4[_0x14ef80(0x213)]+_0x14ef80(0x233)+_0x4793f4[_0x14ef80(0x273)]+_0x14ef80(0x233)+_0x4793f4['id']);let _0x5a0888=![];if(lastOrders)for(const _0x386b6e of lastOrders){const _0x3cbd0d=0xc8,_0x3ed090=0x1388;let _0x4b4d3e=0x0;while(!_0x386b6e['orderId']&&_0x4b4d3e*_0x3cbd0d<_0x3ed090){_0x4b4d3e++,await sleep(_0x3cbd0d);}if(_0x4b4d3e>0x0)logger[_0x14ef80(0x218)](_0x14ef80(0x272)+_0x4b4d3e*_0x3cbd0d/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x386b6e[_0x14ef80(0x23c)]==_0x4793f4['id']){logger[_0x14ef80(0x218)](_0x14ef80(0x214)+_0x4793f4['id']),_0x5a0888=!![];if(_0x386b6e['filled']==0x0){logger[_0x14ef80(0x218)](_0x14ef80(0x2fe)+_0x4793f4['id']);if(_0x4793f4[_0x14ef80(0x2a7)])_0x386b6e[_0x14ef80(0x1f7)]=_0x4793f4[_0x14ef80(0x2a7)];else{if(_0x4793f4[_0x14ef80(0x1f7)])_0x386b6e['price']=_0x4793f4['price'];else{}}_0x386b6e[_0x14ef80(0x273)]=_0x4793f4[_0x14ef80(0x273)],_0x386b6e[_0x14ef80(0x22e)]={'currency':_0x4793f4[_0x14ef80(0x22e)]?_0x4793f4['fee']['currency']:null,'cost':_0x4793f4[_0x14ef80(0x22e)]?_0x4793f4['fee'][_0x14ef80(0x1ff)]:0x0},updateHighestFee(_0x386b6e['fee'][_0x14ef80(0x2fd)],_0x386b6e[_0x14ef80(0x22e)][_0x14ef80(0x1ff)]),_0x193140(_0x14ef80(0x273)),await validateOrders();if(lockOrders==ORDERS[_0x14ef80(0x301)]){const _0x240f18=await getCoins();[currentCoins,currentCoinsAll]=_0x240f18;}await updateCoinResults(_0x386b6e);}}}if(!_0x5a0888){logger['debug'](_0x14ef80(0x2fb)+_0x4793f4['id']),_0x193140(_0x14ef80(0x273));const _0xcf8d47=await getCoins();[currentCoins,currentCoinsAll]=_0xcf8d47,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3ca851=JSON[_0x14ef80(0x2eb)](lastBalances[_0x14ef80(0x231)]);const _0x464bfe=_0x3ca851[_0x14ef80(0x1ac)](_0x1b5743=>_0x1b5743['symbol']==_0x4793f4[_0x14ef80(0x213)]);if(_0x464bfe){if(_0x58dbdc==_0x14ef80(0x2ac))_0x464bfe[_0x14ef80(0x219)]=_0x464bfe[_0x14ef80(0x219)]=='filled'?'filled':'open';else{if(_0x58dbdc=='canceled')_0x464bfe['orderstatus']=_0x464bfe['orderstatus']==_0x14ef80(0x273)?_0x14ef80(0x273):_0x14ef80(0x2b5);else _0x58dbdc==_0x14ef80(0x328)&&(_0x464bfe[_0x14ef80(0x219)]=_0x14ef80(0x273));}}lastBalances={...lastBalances,'portfolio':JSON[_0x14ef80(0x2ca)](_0x3ca851)},proxyEmit(_0x14ef80(0x1b7),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});}}async function updateOpenOrders(){const _0x1bea85=_0x4a6aab;await getOpenOrders();let _0x66a166=![];currentCoins[_0x1bea85(0x2f4)](_0x198a5c=>{const _0x11b596=_0x1bea85;_0x66a166=allOpenOrders[_0x11b596(0x1ac)](_0x5875a8=>_0x5875a8[_0x11b596(0x213)]==_0x198a5c[_0x11b596(0x213)]),_0x198a5c[_0x11b596(0x219)]=_0x66a166?_0x11b596(0x2ac):_0x11b596(0x253);});}async function getCoins(_0x395bd6=!![],_0x5eda19=config[_0x4a6aab(0x22f)]){const _0x5544cb=_0x4a6aab;let _0x4bbc94,_0x2e5e4c=[],_0xb29b4f=[],_0x394b0e=[],_0x83a9e5=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4bbc94=await exchange[_0x5544cb(0x1e4)](),mybalances=_0x4bbc94[_0x5544cb(0x2fa)];for(const [_0x29d356,_0x53555e]of Object['entries'](mybalances)){_0x83a9e5[_0x5544cb(0x1ca)](_0x29d356);}if(_0x5eda19=='')for(const [_0x2778b7,_0x177677]of Object[_0x5544cb(0x1db)](mybalances)){_0x177677!=0x0&&_0xb29b4f['push']({'coin':_0x2778b7});}else{let _0x47f958=![];for(const [_0x45bd23,_0x56e5f7]of Object[_0x5544cb(0x1db)](mybalances)){if(_0x83a9e5[_0x5544cb(0x30c)](_0x45bd23)){const _0x5b2c2c=config['portfolio'][_0x5544cb(0x1ac)](_0x1f1225=>_0x1f1225[_0x5544cb(0x1c3)]==_0x45bd23),_0x9f904=_0x45bd23+'/'+_0x5eda19,_0x2531d3=_0x5eda19+'/'+_0x45bd23,_0x4dfab8=currentCoins['find'](_0x604842=>_0x604842[_0x5544cb(0x1c3)]==_0x45bd23);_0x47f958=![];if((_0x56e5f7!=0x0||_0x5b2c2c)&&(allSymbols[_0x5544cb(0x30c)](_0x9f904)||_0x45bd23==_0x5eda19))_0x45bd23!=_0x5eda19&&_0x2e5e4c[_0x5544cb(0x1ca)](_0x9f904),_0xb29b4f[_0x5544cb(0x1ca)]({'coin':_0x45bd23,'symbol':_0x9f904,'reverse':![],'number':Math[_0x5544cb(0x2dd)](_0x56e5f7+(_0x5b2c2c&&_0x5b2c2c[_0x5544cb(0x234)]||0x0),0x0),'orderstatus':_0x4dfab8?_0x4dfab8[_0x5544cb(0x219)]:_0x5544cb(0x253)});else(_0x56e5f7!=0x0||_0x5b2c2c)&&allSymbols[_0x5544cb(0x30c)](_0x2531d3)&&(_0x45bd23!=_0x5eda19&&_0x2e5e4c[_0x5544cb(0x1ca)](_0x2531d3),_0xb29b4f[_0x5544cb(0x1ca)]({'coin':_0x45bd23,'symbol':_0x2531d3,'reverse':!![],'number':Math[_0x5544cb(0x2dd)](_0x56e5f7+(_0x5b2c2c&&_0x5b2c2c[_0x5544cb(0x234)]||0x0),0x0),'orderstatus':_0x4dfab8?_0x4dfab8[_0x5544cb(0x219)]:_0x5544cb(0x253)}));}}}}catch(_0x52d3c5){if(!_0x395bd6)handleErrorNoStop(_0x52d3c5,_0x5544cb(0x1dc));else await handleError(_0x52d3c5,'getCoins()');}return _0x394b0e=cloneDeep(_0xb29b4f),_0xb29b4f=_0xb29b4f[_0x5544cb(0x1b4)](_0x34338b=>{const _0x576c72=_0x5544cb,_0x121111=config[_0x576c72(0x231)]['find'](_0x91c966=>_0x91c966[_0x576c72(0x1c3)]==_0x34338b[_0x576c72(0x1c3)]);return _0x121111&&!_0x121111[_0x576c72(0x2c9)];}),[_0xb29b4f,_0x394b0e];}async function getCoinNumber(_0x3c60bd){const _0x221adf=_0x4a6aab;let _0x3fee6f;try{const _0x2ab509=await exchange['fetchBalance']();_0x3fee6f=_0x2ab509['total'][_0x3c60bd];}catch(_0x29d56){await handleError(_0x29d56,_0x221adf(0x2b6));}return _0x3fee6f;}async function getOpenOrders(){const _0x69cbf0=_0x4a6aab;let _0x2f24d9;allOpenOrders=[];try{for(const _0x3548d6 of config[_0x69cbf0(0x231)]){!_0x3548d6[_0x69cbf0(0x2c9)]&&_0x3548d6['coin']!=config[_0x69cbf0(0x22f)]&&(_0x2f24d9=await exchange['fetchOpenOrders'](_0x3548d6[_0x69cbf0(0x213)]),_0x2f24d9['length']>0x0&&allOpenOrders[_0x69cbf0(0x1ca)](_0x2f24d9[0x0]));}}catch(_0x4c21a9){await handleError(_0x4c21a9,_0x69cbf0(0x308));}}function _0x3d56(){const _0x2c70a0=['sendPortfolioTelegram','map','total','2\x20-\x20FILLED\x20unknown\x20order:\x20','ID:\x20','currency','3\x20-\x20handling\x20FILLED\x20order:\x20','fetchTickers','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','LOCKED','splice','exchanges','event-history','starting-balances','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20|\x20Custom\x20ID:\x20','getOpenOrders()','1724016TfkisS','Exchange','Order\x20filled:\x20','includes','close','\x20:\x20','startdate','getHours','substring','valid','cancelOrder','reverse','ExchangeNotAvailable','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','random','placeOrder','sell','milliseconds','\x20exchange','30714fCUMqR','ask','\x20metrics:</b>\x20\x0a\x0a','exchange','USDT','spot','running','apply','round','slice','fiat','defaults','closed','fees','indexOf','storeConfiguration','join','Binance','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','Saving\x20configuration','161GirULz','assign','watchTrades','BNB','red_yellow_blue','ORDERS.LOCKED','cancelOrders()','leftTxt','send','abs','target','/output-000.log','storeFiat','<pre>','find','apiKey','exec','DAI/','recovery','padEnd','cancelLoading','loading-canceled','filter','(((.+)+)+)+$','changes','balances','configuration-stored','secure','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','createOrder','amount','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','UNLOCKED','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','has','getSeconds','ccxt','coin','hybrid-crypto-js','colorscheme','additional\x20symbols\x20','fetchTicker','botname','./version.json','push','startnumber','ongoing','toFixed','</pre>','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','performance','number','\x20change','netoffset','1\x20-\x20Handle\x20open\x20orders','constructor','util','001','TUSD','sort','Bybit','entries','getCoins()','toString','initial','onepagemode','Portfolio\x20change\x20detected:\x20','breakeven','Resetting\x20bot\x20history','keys','fetchBalance','289920OXCdbY','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','yyyy-MM-dd\x27T\x27HH:mm:ss','balancing\x20resumes\x20when\x20cooldown\x20ends','enabled','added','1\x20-\x20Unlock\x20orders','eur','<b>Bot\x20','write','InvalidNonce','fetchClosedOrders','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Pausing\x20for\x20','\x20>\x20','bb-settings.json','net-fiat','timestamp','price','yargs/yargs','removed','2\x20-\x20Validate\x20orders:\x20','\x20minutes\x20-\x20','\x20connection\x20problem','apiPassword','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','cost','bots','\x20closed\x20the\x20connection','usd','last','threshold','delta','EUR','No\x20more\x20open\x20orders\x20-\x20','split','replace','getPortfolio(1)','differenceInSeconds','datetime','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','1819832AbRTMj','\x20-\x20bot\x20not\x20started','argv','toLowerCase','lowdb/adapters/FileSync','symbol','2\x20-\x20FILLED\x20known\x20order:\x20','%\x20(','ETH','event','debug','orderstatus','logs','API-key\x20format\x20invalid','Unknown\x20error\x20occured','USDP','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20order:\x20','Avoiding\x20continuous\x20order\x20attempts','990610EzBPkf','full','Resetting\x20coin\x20results:\x20','Crypt','add','log','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','no\x20open\x20orders','1\x20-\x20Validate\x20orders:\x20','Initiating\x20exchange\x20reload','getPortfolio(2)','search','recent20','fee','basecoin','botID','portfolio','existsSync','\x20|\x20','offset','customId','initclient','-results.json','Manual\x20balancing\x20required','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','findIndex','cancel','orderId','getPortfolio(0)','Executed\x20','remainingSymbols','remove','RSA-OAEP','environment','bot','concat','Net\x20effect','startprice','success','sortBy','isEqual','cloneDeep','Net\x20','openOrders','autoliquidity','getFullYear','final','emojisell','min','-events.json','none','UNLOCKING','timeshift','./logs/','production','headless','Order\x20amount\x20is\x20invalid:\x20','args','/backup/','\x20orders\x20in\x20less\x20than\x20','ticker','order',':\x20Bot\x20','Transaction\x20detection\x20unblocked','buys','market','showname','password','Order(s)\x20not\x20validated\x20after\x20','get','USDC','version','-performance.json','\x20|\x20highest:\x20','change','date','emojibuy','progress','\x20minutes','\x20>\x20[DEBUG]\x20','yyyy/MM/dd','Waited\x20','filled','Invalid\x20quantity','watchTransactions','Error\x20while\x20deleting\x20files:\x20','toUpperCase','Cooldown\x20ended\x20-\x20balancing\x20resumed','NANO/','balancing\x20resumed','coins','highest','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','message','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','ORDERS.UNLOCKED','\x20portfolio:</b>\x20\x0a\x0a','trade','2.3.5','3425940ptJyHS','Market','fromCodePoint','data','OrderNotFound','kill','bot-','Uncaught\x20Exception:','no\x20additional\x20symbols','starting-balance-','set','error','./config/',':\x20timer\x20>','realized','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getDate','warning','shift','Order\x20is\x20invalid:\x20','-config.json','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','limit-low','\x20not\x20responding','value','USD','MIN_NOTIONAL','loadMarkets','type','time','BUSD','emitHistory','BTC','\x20has\x20a\x2024h\x20drop\x20of\x20','************','average','Uncaught\x20NetworkError:','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','distribution','recreateCoinResults()','open','Fees\x20|\x20currency:\x20','exchange\x20reloaded','InsufficientFunds','buy','cooldown','options','net-basecoin','sells','canceled','getCoinNumber()','createWriteStream','resetHistory','timeout','rightTxt','YOYOW/','padStart','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','must\x20be\x20greater\x20than\x20minimum\x20amount','BNB/','getTime','fetchOpenOrders','string','getMinutes','Executing\x20exchange\x20reload','2.6.0','showConfig','side','format','excluded','stringify','length','recreate','pro','NetworkError','change24h','1\x20-\x20FILLED:\x20','limit','decrypt','liquidity','test','watchOrders','freeze','0\x20-\x20EXECUTION:\x20','620792vqqQmK','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2\x20-\x20Orders\x20unlocked','toggleBotMode','restart','max','-------------------------------\x0a','unlinkSync','coin-loading-progress','AuthenticationError','\x20|\x20exchange:\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','ordertype','mkdirSync',',\x20must\x20be\x20a\x203\x20digit\x20number','parseISO','Initializing\x20coin\x20results','apiSecret','floor','parse','2\x20-\x20Handled\x20open\x20orders','getMonth','Fee\x20discount\x20refund\x20detected:\x20','.json','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','***','function','limits','forEach','configuration','63AxLOgM','\x20|\x20lock\x20orders:\x20'];_0x3d56=function(){return _0x2c70a0;};return _0x3d56();}async function handleOpenOrders(_0x52d99b=0x0){const _0x567f92=_0x4a6aab;allOpenOrders[_0x567f92(0x2cb)]==0x0&&lockOrders==ORDERS[_0x567f92(0x301)]&&allOrdersPlaced&&(_0x52d99b==0x0?(logger[_0x567f92(0x218)](_0x567f92(0x1d4)),_0x52d99b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x567f92(0x218)](_0x567f92(0x2ec)),validateOrders(_0x567f92(0x228))));}async function testAPI(_0x65185f){const _0x519d3b=_0x4a6aab,_0x3e070a=ccxt[_0x65185f[_0x519d3b(0x31f)][_0x519d3b(0x211)]()],_0x198054=new _0x3e070a({'apiKey':_0x65185f['apiKey'],'secret':_0x65185f[_0x519d3b(0x2e9)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x65185f[_0x519d3b(0x31f)]=='Bybit'&&(_0x198054[_0x519d3b(0x2b2)]={'defaultType':'spot'});if(_0x65185f['apiPassword'])_0x198054[_0x519d3b(0x264)]=_0x65185f[_0x519d3b(0x1fd)];try{await _0x198054[_0x519d3b(0x29f)]();}catch(_0x5b1fbd){throw _0x5b1fbd;}}function cloneDeep(_0xf7de28){const _0x32224c=_0x4a6aab;return JSON[_0x32224c(0x2eb)](JSON[_0x32224c(0x2ca)](_0xf7de28));}async function getPortfolio(_0x2369e1){const _0x18c24b=_0x4a6aab;let _0x7d291f=[],_0x4f850a=[],_0x201886=[],_0x568b69;if(_0x2369e1['apiKey']!==_0x18c24b(0x2a6)||_0x2369e1[_0x18c24b(0x2e9)]!==_0x18c24b(0x2a6)||_0x2369e1[_0x18c24b(0x1fd)]&&_0x2369e1[_0x18c24b(0x1fd)]!=='************'){if(config[_0x18c24b(0x31f)]){if(_0x2369e1['apiKey']=='************')_0x2369e1[_0x18c24b(0x1ad)]=config['apiKey'];if(_0x2369e1[_0x18c24b(0x2e9)]==_0x18c24b(0x2a6))_0x2369e1[_0x18c24b(0x2e9)]=config[_0x18c24b(0x2e9)];if(_0x2369e1['apiPassword']==_0x18c24b(0x2a6))_0x2369e1[_0x18c24b(0x1fd)]=config[_0x18c24b(0x1fd)];try{await testAPI(_0x2369e1);}catch(_0x1a21ef){if(_0x1a21ef[_0x18c24b(0x1dd)]()['includes']('AuthenticationError')){logger[_0x18c24b(0x218)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x18c24b(0x231),![]);return;}else{handleError(_0x1a21ef,_0x18c24b(0x23d));return;}}}await initExchange(_0x2369e1[_0x18c24b(0x31f)],_0x2369e1[_0x18c24b(0x1ad)],_0x2369e1[_0x18c24b(0x2e9)],_0x2369e1[_0x18c24b(0x1fd)]);try{await loadSymbols(_0x2369e1[_0x18c24b(0x31f)],!![]);}catch(_0x200efd){if(_0x200efd[_0x18c24b(0x1dd)]()[_0x18c24b(0x30c)](_0x18c24b(0x2e1))){proxyEmit(_0x18c24b(0x231),![]);return;}else{handleError(_0x200efd,_0x18c24b(0x20a));return;}}const _0x4f4810=await getCoins(![],_0x2369e1[_0x18c24b(0x22f)]);_0x201886=cloneDeep(_0x4f4810[0x1]);}else _0x201886=cloneDeep(currentCoinsAll);if(_0x2369e1['basecoin']=='')proxyEmit(_0x18c24b(0x231),_0x201886);else{_0x201886[_0x18c24b(0x2f4)](_0x1a719e=>{const _0x48cb86=_0x18c24b;if(_0x1a719e[_0x48cb86(0x1c3)]!=_0x2369e1[_0x48cb86(0x22f)])_0x7d291f[_0x48cb86(0x1ca)](_0x1a719e[_0x48cb86(0x213)]);});try{_0x4f850a=await exchange[_0x18c24b(0x2ff)](_0x7d291f);}catch(_0x5b833e){if(_0x5b833e[_0x18c24b(0x1dd)]()[_0x18c24b(0x30c)](_0x18c24b(0x2e1))){proxyEmit('portfolio',![]);return;}else{handleError(_0x5b833e,_0x18c24b(0x22b));return;}}_0x201886[_0x18c24b(0x2f4)](_0xebc7be=>{const _0x1853fe=_0x18c24b;_0xebc7be['coin']!=_0x2369e1[_0x1853fe(0x22f)]?_0x568b69=_0xebc7be[_0x1853fe(0x314)]?0x1/_0x4f850a[_0xebc7be[_0x1853fe(0x213)]]['last']:_0x4f850a[_0xebc7be['symbol']][_0x1853fe(0x203)]:_0x568b69=0x1,_0xebc7be[_0x1853fe(0x1f7)]=formatResult(_0x568b69,0x8);}),proxyEmit(_0x18c24b(0x231),_0x201886);}}function truncateTradeAmount(_0x472fc7,_0x12c401){let _0xbe165b=0x0;try{_0xbe165b=exchange['amountToPrecision'](_0x472fc7,_0x12c401);}catch(_0x52d621){}return _0xbe165b;}function checkMinimums(_0x1f5f4e){const _0xa6104b=_0x4a6aab;let _0x4e5242=!![];const _0x7c6fdb=!_0x1f5f4e[_0xa6104b(0x314)]?markets[_0x1f5f4e[_0xa6104b(0x213)]][_0xa6104b(0x2f3)][_0xa6104b(0x1bc)][_0xa6104b(0x251)]:markets[_0x1f5f4e['symbol']][_0xa6104b(0x2f3)][_0xa6104b(0x1ff)]['min'],_0x4aca84=!_0x1f5f4e[_0xa6104b(0x314)]?markets[_0x1f5f4e['symbol']][_0xa6104b(0x2f3)]['cost'][_0xa6104b(0x251)]:markets[_0x1f5f4e['symbol']]['limits']['amount'][_0xa6104b(0x251)],_0x2825dd=truncateTradeAmount(_0x1f5f4e[_0xa6104b(0x213)],_0x1f5f4e[_0xa6104b(0x282)]);_0x1f5f4e['trade']=_0x2825dd;if(Math[_0xa6104b(0x1a7)](_0x2825dd)<_0x7c6fdb)_0x4e5242=![];if(Math[_0xa6104b(0x1a7)](_0x2825dd)*_0x1f5f4e[_0xa6104b(0x203)]<_0x4aca84)_0x4e5242=![];if(_0x1f5f4e['side']==_0xa6104b(0x319)){let _0x162da1=config[_0xa6104b(0x231)][_0xa6104b(0x1ac)](_0x5e730c=>_0x5e730c[_0xa6104b(0x1c3)]==_0x1f5f4e[_0xa6104b(0x1c3)]);if(_0x162da1[_0xa6104b(0x234)]>0x0){if(Math[_0xa6104b(0x1a7)](_0x2825dd)>_0x1f5f4e[_0xa6104b(0x1d1)]-_0x162da1[_0xa6104b(0x234)])_0x4e5242=![];}else{if(Math[_0xa6104b(0x1a7)](_0x2825dd)>_0x1f5f4e[_0xa6104b(0x1d1)])_0x4e5242=![];}}if(_0x1f5f4e[_0xa6104b(0x2c7)]==_0xa6104b(0x2b0)){let _0x33b2e3=config[_0xa6104b(0x231)][_0xa6104b(0x1ac)](_0x35455e=>_0x35455e[_0xa6104b(0x1c3)]==config['basecoin']),_0x550848=currentCoins[_0xa6104b(0x1ac)](_0x23707e=>_0x23707e[_0xa6104b(0x1c3)]==config['basecoin']);if(_0x33b2e3[_0xa6104b(0x234)]>0x0){if(Math[_0xa6104b(0x1a7)](_0x2825dd)*_0x1f5f4e[_0xa6104b(0x203)]>_0x550848[_0xa6104b(0x1d1)]-_0x33b2e3['offset'])_0x4e5242=![];}else{if(Math['abs'](_0x2825dd)*_0x1f5f4e[_0xa6104b(0x203)]>_0x550848[_0xa6104b(0x1d1)])_0x4e5242=![];}}return _0x4e5242;}async function getBalances(_0xea497d=!![]){const _0x4becbb=_0x4a6aab;let _0x108441=0x0,_0x5925f6;const _0x19342d=config[_0x4becbb(0x204)];if(config[_0x4becbb(0x258)]&&config[_0x4becbb(0x2cf)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2a62c9=>{const _0x865f03=_0x4becbb;if(_0x2a62c9[_0x865f03(0x1c3)]!=config['basecoin']){let _0x48d870=global[_0x865f03(0x25d)][noslash(_0x2a62c9[_0x865f03(0x213)])];_0x5925f6=_0x2a62c9[_0x865f03(0x314)]?0x1/_0x48d870:_0x48d870;}else _0x5925f6=0x1;let _0x48c881=_0x2a62c9[_0x865f03(0x1d1)]*_0x5925f6;_0x108441+=_0x48c881,_0x2a62c9[_0x865f03(0x203)]=formatResult(Number(_0x5925f6),0x8),_0x2a62c9[_0x865f03(0x29c)]=_0x48c881;}),currentCoins[_0x4becbb(0x2f4)](_0x422851=>{const _0xf54f69=_0x4becbb;let _0x54c216=config['portfolio'][_0xf54f69(0x1ac)](_0xc03fba=>_0xc03fba[_0xf54f69(0x1c3)]==_0x422851[_0xf54f69(0x1c3)]),_0x1c8f76=Number(_0x54c216['distribution']),_0x35da60=_0x422851[_0xf54f69(0x29c)]/_0x108441*0x64,_0x3554d5=_0x1c8f76*_0x108441/0x64/_0x422851[_0xf54f69(0x203)]-_0x422851[_0xf54f69(0x1d1)];_0x422851[_0xf54f69(0x2aa)]=formatResult(_0x35da60,0x3),_0x422851[_0xf54f69(0x1a8)]=formatResult(_0x1c8f76,0x3),_0x422851[_0xf54f69(0x282)]=formatResult(_0x3554d5,0x8),_0x422851['side']='',_0x422851[_0xf54f69(0x312)]=![];if(_0x422851['coin']!=config[_0xf54f69(0x22f)]){if(_0x422851[_0xf54f69(0x2aa)]>_0x1c8f76)_0x422851[_0xf54f69(0x2c7)]='sell',_0x422851[_0xf54f69(0x312)]=checkMinimums(_0x422851);else _0x422851[_0xf54f69(0x2aa)]<_0x1c8f76&&(_0x422851[_0xf54f69(0x2c7)]='buy',_0x422851['valid']=checkMinimums(_0x422851));}_0x422851['delta']=_0x422851[_0xf54f69(0x2aa)]/_0x422851[_0xf54f69(0x1a8)]-0x1;if(_0x422851['orderstatus']==_0xf54f69(0x273)||_0x422851[_0xf54f69(0x219)]==_0xf54f69(0x2b5))_0x422851[_0xf54f69(0x219)]=_0xf54f69(0x253);}),currentCoins[_0x4becbb(0x1d9)]((_0x40c05e,_0x3e2768)=>_0x40c05e['delta']<_0x3e2768[_0x4becbb(0x205)]?0x1:_0x3e2768[_0x4becbb(0x205)]<_0x40c05e[_0x4becbb(0x205)]?-0x1:0x0);const _0x536586=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x536586['eur'],'usd':_0x536586['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x19342d},proxyEmit(_0x4becbb(0x1b7),{'serverversion':serverversion,'environment':environment,'balances':lastBalances});if(_0xea497d){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x19342d});else{if(lockOrders==ORDERS[_0x4becbb(0x1be)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x19342d});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x145ddb=getNormalizedPerformance();getStartingBalances(_0x145ddb),emitPerformance(_0x145ddb);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1a3106=getNormalizedPerformance();emitPerformance(_0x1a3106),getStartingBalances(_0x1a3106),logger[_0x4becbb(0x218)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x7b4d74=_0x4a6aab;if(!lastBalances)return;let _0x2711ec=[],_0x528ec5,_0x4623ad=JSON[_0x7b4d74(0x2eb)](lastBalances[_0x7b4d74(0x231)]);_0x4623ad['sort']((_0x31e471,_0x2c8827)=>_0x31e471[_0x7b4d74(0x1c3)]>_0x2c8827['coin']?0x1:_0x2c8827[_0x7b4d74(0x1c3)]>_0x31e471['coin']?-0x1:0x0),_0x4623ad[_0x7b4d74(0x2f4)](_0x4bd618=>{const _0x14f50b=_0x7b4d74;let _0x258914={'coin':_0x4bd618['coin'],'number':_0x4bd618[_0x14f50b(0x1d1)],'price':_0x4bd618[_0x14f50b(0x203)]};_0x2711ec['push'](_0x258914);});const _0x5f5db9=await getFiat();_0x528ec5={'date':lastBalances['time'][_0x7b4d74(0x208)]('\x20')[0x0],'eur':_0x5f5db9[_0x7b4d74(0x1ec)],'usd':_0x5f5db9[_0x7b4d74(0x202)],'coins':_0x2711ec};let _0x2eb6f8=dbPerformance['get'](_0x7b4d74(0x287))['find']({'date':_0x528ec5[_0x7b4d74(0x26c)]})[_0x7b4d74(0x29c)]();_0x2eb6f8?_0x528ec5['date']!=config[_0x7b4d74(0x30f)]&&dbPerformance[_0x7b4d74(0x266)](_0x7b4d74(0x287))['find']({'date':_0x528ec5['date']})[_0x7b4d74(0x19f)](_0x528ec5)['write']():dbPerformance['get'](_0x7b4d74(0x287))['push'](_0x528ec5)[_0x7b4d74(0x1ee)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x225fc1=_0x4a6aab;let _0x57c53a=[];if(dbPerformance[_0x225fc1(0x1c0)](_0x225fc1(0x287))[_0x225fc1(0x29c)]()){let _0x5160a4=dbPerformance[_0x225fc1(0x266)](_0x225fc1(0x287))[_0x225fc1(0x24a)]()[_0x225fc1(0x1b4)](_0xacf329=>{const _0xbf812e=_0x225fc1;if(_0xacf329[_0xbf812e(0x27b)]['length']==0x0)return![];else return!![];})[_0x225fc1(0x248)](_0x225fc1(0x26c))[_0x225fc1(0x29c)](),_0x4a0158=[...config[_0x225fc1(0x2d3)]];_0x4a0158[_0x225fc1(0x1d9)]((_0x28eef2,_0x1fcd3f)=>_0x28eef2[_0x225fc1(0x26c)]>_0x1fcd3f[_0x225fc1(0x26c)]?-0x1:_0x1fcd3f[_0x225fc1(0x26c)]>_0x28eef2[_0x225fc1(0x26c)]?0x1:0x0);let _0x141539=0x1,_0x5d24d8=[],_0x33fcec=0x0;_0x5160a4[_0x225fc1(0x325)]()['reverse']()[_0x225fc1(0x2f4)]((_0x4a0834,_0x1bd9f2)=>{const _0x47e124=_0x225fc1;if(_0x4a0158[_0x33fcec]){if(_0x5160a4[_0x5160a4[_0x47e124(0x2cb)]-_0x1bd9f2]&&_0x4a0158[_0x33fcec][_0x47e124(0x26c)]==_0x5160a4[_0x5160a4[_0x47e124(0x2cb)]-_0x1bd9f2][_0x47e124(0x26c)]){if(_0x1bd9f2<_0x5160a4[_0x47e124(0x2cb)]){let _0x1c9210=0x0,_0x2a2bf6=0x0;_0x5160a4[_0x5160a4[_0x47e124(0x2cb)]-_0x1bd9f2][_0x47e124(0x27b)][_0x47e124(0x2f4)](_0x37588f=>{_0x2a2bf6+=_0x37588f['number']*_0x37588f['price'];}),_0x4a0158[_0x33fcec]['changes']['forEach'](_0x2f6ffe=>{_0x1c9210+=_0x2f6ffe['number']*_0x2f6ffe['price'];}),_0x141539*=_0x1c9210/(_0x2a2bf6-_0x1c9210)+0x1;}_0x33fcec++;}}let _0x5cc094=0x0;_0x4a0834['coins'][_0x47e124(0x2f4)](_0x4adb4a=>{const _0x1eeb16=_0x47e124;_0x5cc094+=_0x4adb4a[_0x1eeb16(0x1d1)]*_0x4adb4a[_0x1eeb16(0x1f7)];}),_0x5d24d8[_0x5160a4[_0x47e124(0x2cb)]-_0x1bd9f2-0x1]=_0x5cc094*(_0x141539-0x1);});let _0x3af3aa=[];_0x4a0158=[...config[_0x225fc1(0x2d3)]]||[];let _0x23fba5=0x0;_0x33fcec=0x0,_0x5160a4['forEach']((_0x4e9299,_0x4781f7)=>{const _0x48a9fb=_0x225fc1;if(_0x4a0158[_0x33fcec]){const _0x2f8ddf=fns[_0x48a9fb(0x2eb)](_0x4a0158[_0x33fcec][_0x48a9fb(0x26c)],_0x48a9fb(0x271),new Date()),_0x35f98c=fns[_0x48a9fb(0x2eb)](_0x4e9299[_0x48a9fb(0x26c)],_0x48a9fb(0x271),new Date());if(fns[_0x48a9fb(0x249)](_0x2f8ddf,_0x35f98c)){let _0x3b33c9=0x0;_0x4a0158[_0x33fcec][_0x48a9fb(0x1b6)][_0x48a9fb(0x2f4)](_0x1c0a1d=>{const _0x381ba7=_0x48a9fb;!_0x3af3aa[_0x1c0a1d[_0x381ba7(0x1c3)]]?_0x3af3aa[_0x1c0a1d['coin']]=_0x1c0a1d[_0x381ba7(0x1d1)]:(_0x3b33c9=_0x3af3aa[_0x1c0a1d[_0x381ba7(0x1c3)]],_0x3af3aa[_0x1c0a1d[_0x381ba7(0x1c3)]]+=_0x1c0a1d['number']);const _0xb4b16=_0x4e9299['coins'][_0x381ba7(0x1ac)](_0x13cd2b=>_0x13cd2b[_0x381ba7(0x1c3)]==_0x1c0a1d[_0x381ba7(0x1c3)]);(!_0xb4b16||_0xb4b16['number']==0x0)&&(_0x23fba5+=(-_0x1c0a1d[_0x381ba7(0x1d1)]-_0x3b33c9)*_0x1c0a1d['price']);}),_0x33fcec++;}}_0x4e9299[_0x48a9fb(0x27b)][_0x48a9fb(0x2f4)]((_0x462d34,_0x1049fe)=>{const _0x2c04bb=_0x48a9fb;_0x3af3aa[_0x462d34['coin']]&&(_0x462d34[_0x2c04bb(0x1de)]=_0x3af3aa[_0x462d34['coin']]);}),_0x57c53a[_0x48a9fb(0x1ca)]({'date':_0x4e9299[_0x48a9fb(0x26c)],'eur':_0x4e9299['eur'],'usd':_0x4e9299[_0x48a9fb(0x202)],'offset':_0x5d24d8[_0x4781f7],'netoffset':_0x23fba5,'coins':_0x4e9299[_0x48a9fb(0x27b)]});});}return _0x57c53a;}function emitPerformance(_0x4c05ac){const _0x2668b3=_0x4a6aab;_0x4c05ac['length']!==0x0?(proxyEmit(_0x2668b3(0x1d0),_0x4c05ac),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x58d91a,_0x39ef61){const _0x2b37f4=_0x4a6aab;let _0x590e0e=0x0,_0x210541=0x0,_0x437e00=0x0;_0x58d91a[_0x2b37f4(0x27b)][_0x2b37f4(0x2f4)](_0x3f2ae1=>{const _0x4510f0=_0x2b37f4;_0x590e0e+=_0x3f2ae1['number']*_0x3f2ae1[_0x4510f0(0x1f7)];});_0x39ef61&&(_0x590e0e+=_0x58d91a['offset']);if(config[_0x2b37f4(0x22f)]===_0x2b37f4(0x2a4)||config[_0x2b37f4(0x22f)]===_0x2b37f4(0x216))_0x210541=_0x590e0e*_0x58d91a[_0x2b37f4(0x1ec)],_0x437e00=_0x590e0e*_0x58d91a[_0x2b37f4(0x202)];else{if(usdBasecoins[_0x2b37f4(0x30c)](config[_0x2b37f4(0x22f)]))_0x210541=_0x590e0e*_0x58d91a['eur']/_0x58d91a['usd'],_0x437e00=_0x590e0e;else config[_0x2b37f4(0x22f)]===_0x2b37f4(0x206)&&(_0x210541=_0x590e0e,_0x437e00=_0x590e0e*_0x58d91a[_0x2b37f4(0x202)]/_0x58d91a['eur']);}return[_0x590e0e,_0x210541,_0x437e00];}function getKPIs(_0x57f83f,_0x2ba9cb=_0x4a6aab(0x206)){const _0x56a8c7=_0x4a6aab,_0x5f5c38=config[_0x56a8c7(0x22f)],_0x3ec727=lastBalances,_0x8205f6=currentCoins,_0x5d01bd=getNormalizedPerformance(),_0x426bf2=_0x57f83f===_0x56a8c7(0x22f)?_0x5f5c38:_0x57f83f==='fiat'||_0x57f83f===_0x56a8c7(0x1f5)?_0x2ba9cb:_0x56a8c7(0x24b)+_0x5f5c38,_0x4357ce=_0x57f83f==='net-basecoin'?_0x56a8c7(0x245):_0x57f83f===_0x56a8c7(0x1f5)?_0x56a8c7(0x245):_0x426bf2+'\x20value',_0x16de71=_0x57f83f===_0x56a8c7(0x2b3)||_0x57f83f===_0x56a8c7(0x1f5)?'Net\x20effect':_0x426bf2+_0x56a8c7(0x1d2);let _0x471d8f=0x0;_0x8205f6[_0x56a8c7(0x2f4)](_0xcdd8b1=>{const _0x18962a=_0x56a8c7;_0x471d8f+=_0xcdd8b1['number']*_0xcdd8b1[_0x18962a(0x203)];});if(_0x57f83f===_0x56a8c7(0x326)||_0x57f83f===_0x56a8c7(0x1f5)){if(_0x5f5c38===_0x56a8c7(0x2a4)||_0x5f5c38==='ETH')_0x471d8f=_0x471d8f*(_0x2ba9cb===_0x56a8c7(0x206)?_0x3ec727[_0x56a8c7(0x1ec)]:_0x3ec727[_0x56a8c7(0x202)]);else{if(usdBasecoins[_0x56a8c7(0x30c)](_0x5f5c38))_0x471d8f=_0x471d8f*(_0x2ba9cb==='EUR'?_0x3ec727['eur']/_0x3ec727[_0x56a8c7(0x202)]:0x1);else _0x5f5c38===_0x56a8c7(0x206)&&(_0x471d8f=_0x471d8f*(_0x2ba9cb===_0x56a8c7(0x206)?0x1:_0x3ec727['usd']/_0x3ec727[_0x56a8c7(0x1ec)]));}}let _0x2228ff;if(_0x471d8f!==0x0){if(_0x57f83f===_0x56a8c7(0x22f))_0x2228ff=(_0x471d8f/startingBalances[_0x56a8c7(0x22f)]-0x1)*0x64;else{if(_0x2ba9cb===_0x56a8c7(0x206))_0x2228ff=(_0x471d8f/startingBalances[_0x56a8c7(0x1ec)]-0x1)*0x64;else _0x2228ff=(_0x471d8f/startingBalances[_0x56a8c7(0x202)]-0x1)*0x64;}let _0xfb5439=0x0;if(startingBalances[_0x56a8c7(0x27b)])_0x8205f6[_0x56a8c7(0x2f4)](_0x11b85f=>{const _0x5bc7da=_0x56a8c7;let _0x2d5d3c=startingBalances[_0x5bc7da(0x27b)][_0x5bc7da(0x1ac)](_0x29495f=>_0x29495f[_0x5bc7da(0x1c3)]===_0x11b85f[_0x5bc7da(0x1c3)]);if(_0x2d5d3c&&_0x2d5d3c[_0x5bc7da(0x1c3)]&&_0x11b85f[_0x5bc7da(0x1d1)]!==0x0)_0xfb5439+=_0x2d5d3c[_0x5bc7da(0x1d1)]*_0x11b85f[_0x5bc7da(0x203)];});let _0x23006a=0x0;if(_0x5d01bd[_0x56a8c7(0x2cb)]!==0x0){let _0x38168a=_0x5d01bd[_0x5d01bd[_0x56a8c7(0x2cb)]-0x1];_0x23006a=_0x38168a[_0x56a8c7(0x1d3)];}_0xfb5439-=_0x23006a;_0x57f83f===_0x56a8c7(0x2b3)&&(_0x2228ff=(_0x471d8f-_0xfb5439)/startingBalances[_0x56a8c7(0x22f)]*0x64,_0x471d8f=_0x471d8f-_0xfb5439);if(_0x57f83f===_0x56a8c7(0x1f5)){let _0x2c484d=_0x2ba9cb===_0x56a8c7(0x206)?startingBalances[_0x56a8c7(0x1ec)]:startingBalances[_0x56a8c7(0x202)];if(_0x5f5c38===_0x56a8c7(0x2a4)||_0x5f5c38===_0x56a8c7(0x216))_0xfb5439=_0x2ba9cb===_0x56a8c7(0x206)?_0xfb5439*_0x3ec727['eur']:_0xfb5439*_0x3ec727['usd'];else{if(usdBasecoins['includes'](_0x5f5c38))_0xfb5439=_0x2ba9cb===_0x56a8c7(0x206)?_0xfb5439*_0x3ec727[_0x56a8c7(0x1ec)]/_0x3ec727[_0x56a8c7(0x202)]:_0xfb5439;else _0x5f5c38===_0x56a8c7(0x206)&&(_0xfb5439=_0x2ba9cb===_0x56a8c7(0x206)?_0xfb5439:_0xfb5439*_0x3ec727[_0x56a8c7(0x202)]/_0x3ec727[_0x56a8c7(0x1ec)]);}_0x2228ff=(_0x471d8f-_0xfb5439)/_0x2c484d*0x64,_0x471d8f=_0x471d8f-_0xfb5439;}if(_0x2228ff){if(_0x2228ff<0x64)_0x2228ff=_0x2228ff[_0x56a8c7(0x1cd)](0x2);else{if(_0x2228ff<0x3e8)_0x2228ff=_0x2228ff[_0x56a8c7(0x1cd)](0x1);else _0x2228ff=_0x2228ff[_0x56a8c7(0x1cd)](0x0);}}else _0x2228ff=Number('0')[_0x56a8c7(0x1cd)](0x2);if(_0x471d8f){if(Math[_0x56a8c7(0x1a7)](_0x471d8f)<0.000001)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x2);else{if(Math[_0x56a8c7(0x1a7)](_0x471d8f)<0.1)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x6);else{if(Math[_0x56a8c7(0x1a7)](_0x471d8f)<0x1)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x5);else{if(Math[_0x56a8c7(0x1a7)](_0x471d8f)<0xa)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x4);else{if(Math['abs'](_0x471d8f)<0x64)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x3);else{if(Math['abs'](_0x471d8f)<0x3e8)_0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x2);else _0x471d8f=_0x471d8f[_0x56a8c7(0x1cd)](0x2);}}}}}}else _0x471d8f=Number('0')[_0x56a8c7(0x1cd)](0x2);}else _0x2228ff=Number('0')['toFixed'](0x2);return{'value':_0x471d8f,'change':_0x2228ff,'leftTxt':_0x4357ce,'rightTxt':_0x16de71};}async function getStartingBalances(_0x5a570f,_0x37171e=!![]){const _0x12de18=_0x4a6aab;if(_0x5a570f[_0x12de18(0x2cb)]!==0x0){const [_0x4035b5,_0x2164fa,_0x1b96c3]=getPerf(_0x5a570f[0x0],!![]);let _0x46898e=[];config['portfolio'][_0x12de18(0x2f4)](_0x43e268=>{const _0x2e272c=_0x12de18;let _0xf9224f=0x0,_0x29a3fe;config['liquidity'][_0x2e272c(0x2f4)](_0x364d6e=>{const _0x3237f2=_0x2e272c;let _0x29bc43=_0x364d6e['changes'][_0x3237f2(0x1ac)](_0x337009=>_0x337009[_0x3237f2(0x1c3)]==_0x43e268[_0x3237f2(0x1c3)]);if(_0x29bc43){_0xf9224f+=_0x29bc43['number'];if(!_0x29a3fe)_0x29a3fe=_0x29bc43[_0x3237f2(0x1f7)];}}),_0x46898e[_0x2e272c(0x1ca)]({'coin':_0x43e268[_0x2e272c(0x1c3)],'number':_0xf9224f,'initialprice':_0x29a3fe});});const _0x2e785d={'basecoin':_0x4035b5,'eur':_0x2164fa,'usd':_0x1b96c3,'coins':_0x46898e};if(_0x37171e)proxyEmit(_0x12de18(0x305),_0x2e785d);startingBalances=_0x2e785d;}}function headlessMode(_0x432d4c){const _0x50699d=_0x4a6aab;let _0x39fef9=_0x432d4c['portfolio'],_0x13ac50=_0x432d4c[_0x50699d(0x204)],_0x13bdda=[];for(let _0x555495 of _0x39fef9){if(_0x555495[_0x50699d(0x1c3)]!=config[_0x50699d(0x22f)]){if(_0x555495['delta']>=_0x13ac50/0x64){if(_0x555495['valid'])_0x13bdda[_0x50699d(0x1ca)](_0x555495);}else{if(_0x555495[_0x50699d(0x205)]<=-_0x13ac50/0x64){if(_0x555495[_0x50699d(0x312)])_0x13bdda['push'](_0x555495);}}}}_0x13bdda['length']>0x0&&placeOrder(_0x13bdda);}function notifyBalance(_0x3cccde){const _0xa34348=_0x4a6aab;let _0x2e0cf7=_0x3cccde[_0xa34348(0x231)],_0x333292=_0x3cccde[_0xa34348(0x204)],_0x541254=[];for(let _0x3bfa5b of _0x2e0cf7){if(_0x3bfa5b['coin']!=config[_0xa34348(0x22f)]){if(_0x3bfa5b[_0xa34348(0x205)]>=_0x333292/0x64){if(_0x3bfa5b[_0xa34348(0x312)])_0x541254[_0xa34348(0x1ca)](_0x3bfa5b);}else{if(_0x3bfa5b[_0xa34348(0x205)]<=-_0x333292/0x64){if(_0x3bfa5b[_0xa34348(0x312)])_0x541254[_0xa34348(0x1ca)](_0x3bfa5b);}}}}if(_0x541254[_0xa34348(0x2cb)]>0x0){let _0x406389=_0x541254[_0xa34348(0x2f9)](_0x1e0871=>_0x1e0871['coin']);_0x406389[_0xa34348(0x1d9)]();let _0x559ace=_0x406389[_0xa34348(0x19a)](',\x20');if(!lastCoinsToBalance)logHistory(_0xa34348(0x295),_0xa34348(0x238));lastCoinsToBalance=_0x559ace;}}function symbolToCoin(_0x20d049){const _0xb53f71=_0x4a6aab;let _0x55a136;if(_0x20d049['includes']('/'+config['basecoin']))_0x55a136=_0x20d049[_0xb53f71(0x209)]('/'+config['basecoin'],'');if(_0x20d049[_0xb53f71(0x30c)](config[_0xb53f71(0x22f)]+'/'))_0x55a136=_0x20d049['replace'](config[_0xb53f71(0x22f)]+'/','');return _0x55a136;}function _0x4a81(_0x354108,_0x346c42){const _0x5640ee=_0x3d56();return _0x4a81=function(_0x28f18d,_0x31df1f){_0x28f18d=_0x28f18d-0x197;let _0x3d56a7=_0x5640ee[_0x28f18d];return _0x3d56a7;},_0x4a81(_0x354108,_0x346c42);}async function unlockOrders(){const _0x634812=_0x4a6aab;if(allOrdersPlaced&&lockOrders==ORDERS[_0x634812(0x301)]){logger[_0x634812(0x218)](_0x634812(0x1eb)),lockOrders=ORDERS[_0x634812(0x254)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x16da39=await getCoins();[currentCoins,currentCoinsAll]=_0x16da39,validateOrdersState=_0x634812(0x1de),persistOpenOrders([]),lockOrders=ORDERS[_0x634812(0x1be)],logger['debug'](_0x634812(0x2da));}}async function validateOrders(_0x423aab){const _0x1ee708=_0x4a6aab;if(_0x423aab)validateOrdersState=_0x423aab;logger['debug'](_0x1ee708(0x229)+validateOrdersState+_0x1ee708(0x2f7)+(lockOrders==0x1?_0x1ee708(0x1a3):lockOrders==0x2?'ORDERS.UNLOCKING':_0x1ee708(0x280)));let _0xa6108d=[],_0x4f8d56=config[_0x1ee708(0x2e4)]==_0x1ee708(0x262)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1ee708(0x2b9)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1ee708(0x301)])return;logger[_0x1ee708(0x218)](_0x1ee708(0x1fa)+validateOrdersState),lastOrders['forEach'](_0x94bf20=>{const _0x2f6de6=_0x1ee708;let _0x3bed81=![];_0x94bf20['filled']>0x0&&(_0x3bed81=!![]),_0xa6108d['push'](_0x3bed81),_0x3bed81&&config[_0x2f6de6(0x2e4)]!=_0x2f6de6(0x262)&&logHistory(_0x2f6de6(0x25e),_0x2f6de6(0x30b)+_0x94bf20[_0x2f6de6(0x213)]+'\x20'+_0x94bf20[_0x2f6de6(0x2c7)]+'\x20#'+formatResult(_0x94bf20[_0x2f6de6(0x273)],0x8)+'\x20@'+formatResult(_0x94bf20[_0x2f6de6(0x1f7)],0x8));}),_0xa6108d[_0x1ee708(0x2f4)]((_0x440f11,_0x57e44a)=>{const _0x2e654e=_0x1ee708;if(_0x440f11)lastOrders[_0x2e654e(0x302)](_0x57e44a,0x1);}),persistOpenOrders(lastOrders);const _0x3ff8bc=coolingDown?_0x1ee708(0x1e8):_0x1ee708(0x27a);if(validateOrdersState==_0x1ee708(0x1de)){validateOrdersState=_0x1ee708(0x1cc);if(_0xa6108d[_0x1ee708(0x30c)](![])){if(config[_0x1ee708(0x2e4)]==_0x1ee708(0x262)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0xa6108d[_0x1ee708(0x30c)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x1ee708(0x262)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0xa6108d['includes'](![])&&(config[_0x1ee708(0x2e4)]==_0x1ee708(0x262)?logHistory(_0x1ee708(0x247),_0x1ee708(0x265)+Math[_0x1ee708(0x324)](_0x4f8d56*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3ff8bc):(await cancelOrders(),logHistory(_0x1ee708(0x247),_0x1ee708(0x2e3)+Math[_0x1ee708(0x324)](_0x4f8d56*validateOrderInterval/0xea60)+_0x1ee708(0x1fb)+_0x3ff8bc))),await unlockOrders();else{if(validateOrdersState==_0x1ee708(0x228)){if(config[_0x1ee708(0x2e4)]!='market')logHistory(_0x1ee708(0x247),_0x1ee708(0x207)+_0x3ff8bc);await unlockOrders();}}}}}async function cancelOrders(){const _0x3671ba=_0x4a6aab;lastOrders[_0x3671ba(0x2f4)](async _0x33f6a0=>{const _0x1ff80e=_0x3671ba;try{const _0x1b50cd=await exchange['cancelOrder'](_0x33f6a0['orderId'],_0x33f6a0[_0x1ff80e(0x213)]);}catch(_0x4f6842){if(_0x4f6842[_0x1ff80e(0x1dd)]()['includes'](_0x1ff80e(0x288))){}else await handleError(_0x4f6842,_0x1ff80e(0x1a4));}});}async function initCoinResults(_0x442354){const _0x29ef54=_0x4a6aab;_0x442354?logger['debug'](_0x29ef54(0x223)+_0x442354):logger[_0x29ef54(0x218)](_0x29ef54(0x2e8)),config['portfolio'][_0x29ef54(0x2f4)](_0x3a87de=>{const _0x5b5642=_0x29ef54;if(!_0x3a87de['excluded']&&_0x3a87de['coin']!=config[_0x5b5642(0x22f)]){const _0x3594d2=currentCoins[_0x5b5642(0x1ac)](_0x3305ae=>_0x3305ae[_0x5b5642(0x1c3)]==_0x3a87de['coin']),_0x261416=global[_0x5b5642(0x25d)][noslash(_0x3a87de[_0x5b5642(0x213)])];let _0x214530=_0x3594d2?_0x3594d2[_0x5b5642(0x1d1)]:null,_0x3264f9=_0x3a87de[_0x5b5642(0x314)]?0x1/_0x261416:_0x261416,_0x47ab46;config[_0x5b5642(0x2d3)][_0x5b5642(0x2f4)](_0x15ce64=>{const _0xb86338=_0x5b5642;!_0x47ab46&&(_0x47ab46=_0x15ce64[_0xb86338(0x1b6)][_0xb86338(0x1ac)](_0x110247=>_0x110247[_0xb86338(0x1c3)]==_0x3a87de['coin']),_0x47ab46&&(_0x214530=_0x47ab46['number'],_0x3264f9=_0x47ab46['price']));});let _0x45b0bb=dbCoinResults[_0x5b5642(0x266)]('coins')[_0x5b5642(0x1ac)]({'coin':_0x3a87de['coin']})[_0x5b5642(0x29c)]();if(!_0x45b0bb){const _0xb9fd0e={'coin':_0x3a87de[_0x5b5642(0x1c3)],'number':_0x214530,'breakeven':_0x3264f9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x5b5642(0x27b))[_0x5b5642(0x1ca)](_0xb9fd0e)['write']();}else{if(_0x442354&&_0x3a87de[_0x5b5642(0x1c3)]==_0x442354){const _0x3dca3d={'coin':_0x3a87de['coin'],'number':_0x214530,'breakeven':_0x3264f9,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5b5642(0x266)](_0x5b5642(0x27b))[_0x5b5642(0x1ac)]({'coin':_0x3a87de[_0x5b5642(0x1c3)]})[_0x5b5642(0x19f)](_0x3dca3d)[_0x5b5642(0x1ee)]();}}}});}async function updateCoinResults(_0x23a0dd,_0x51eb52=![]){const _0x243461=_0x4a6aab;let _0x3dc9f0,_0x407ede,_0x54ed0c,_0x2d8da3,_0x39403f,_0x2c5d08,_0x3a3ad3=dbCoinResults[_0x243461(0x266)](_0x243461(0x27b))['find']({'coin':_0x23a0dd[_0x243461(0x1c3)]})['value'](),_0x352195=![];Object[_0x243461(0x1db)](_0x3a3ad3)[_0x243461(0x2f4)](([_0x22b4c9,_0xfb3cb0])=>{if(_0xfb3cb0==null)_0x352195=!![];});(!_0x3a3ad3||_0x352195)&&(await initCoinResults(_0x23a0dd[_0x243461(0x1c3)]),_0x3a3ad3=dbCoinResults['get'](_0x243461(0x27b))['find']({'coin':_0x23a0dd[_0x243461(0x1c3)]})[_0x243461(0x29c)]());_0x23a0dd[_0x243461(0x314)]&&(_0x2c5d08={'filled':_0x23a0dd['filled']*_0x23a0dd['price'],'amount':_0x23a0dd[_0x243461(0x273)]*_0x23a0dd[_0x243461(0x1f7)],'side':_0x23a0dd['side']==_0x243461(0x319)?_0x243461(0x2b0):_0x243461(0x319),'price':0x1/_0x23a0dd['price']},_0x23a0dd={..._0x23a0dd,..._0x2c5d08});_0x51eb52?_0x407ede=_0x23a0dd[_0x243461(0x2c7)]=='buy'?_0x3a3ad3[_0x243461(0x1d1)]+_0x23a0dd['filled']:_0x3a3ad3['number']-_0x23a0dd[_0x243461(0x273)]:_0x407ede=await getCoinNumber(_0x23a0dd[_0x243461(0x1c3)]);if(_0x23a0dd[_0x243461(0x22e)]&&_0x23a0dd[_0x243461(0x22e)][_0x243461(0x2fd)]==config[_0x243461(0x22f)])_0x3dc9f0=_0x23a0dd[_0x243461(0x22e)][_0x243461(0x1ff)];else{if(_0x23a0dd['fee']&&_0x23a0dd[_0x243461(0x22e)][_0x243461(0x2fd)]=='BNB'&&!_0x51eb52)_0x3dc9f0=_0x23a0dd[_0x243461(0x22e)][_0x243461(0x1ff)]*global[_0x243461(0x25d)][_0x243461(0x1a1)+config[_0x243461(0x22f)]];else _0x3dc9f0=defaultFee*_0x23a0dd[_0x243461(0x273)]*_0x23a0dd[_0x243461(0x1f7)];}_0x23a0dd['side']=='buy'?(_0x54ed0c=_0x407ede!=0x0?(_0x3a3ad3[_0x243461(0x1e1)]*_0x3a3ad3[_0x243461(0x1d1)]+_0x23a0dd[_0x243461(0x1f7)]*(_0x407ede-_0x3a3ad3['number'])+_0x3dc9f0)/_0x407ede:0x0,_0x2d8da3=_0x3a3ad3[_0x243461(0x292)]):(_0x54ed0c=_0x407ede!=0x0?(_0x3a3ad3['breakeven']*_0x3a3ad3[_0x243461(0x1d1)]-_0x23a0dd[_0x243461(0x1f7)]*(_0x3a3ad3[_0x243461(0x1d1)]-_0x407ede)+_0x3dc9f0)/_0x407ede:0x0,_0x2d8da3=_0x3a3ad3[_0x243461(0x292)]+(_0x23a0dd['price']-_0x3a3ad3['breakeven'])*_0x23a0dd[_0x243461(0x273)]);_0x39403f=(_0x23a0dd[_0x243461(0x1f7)]-_0x54ed0c-_0x3dc9f0/_0x23a0dd[_0x243461(0x273)])*_0x407ede;let _0x392184={'coin':_0x23a0dd[_0x243461(0x1c3)],'number':_0x407ede,'breakeven':formatResult(_0x54ed0c,0x8),'realized':formatResult(_0x2d8da3,0x8),'unrealized':formatResult(_0x39403f,0x8),'fees':formatResult(_0x3a3ad3[_0x243461(0x197)]+_0x3dc9f0,0x8),'sells':_0x23a0dd['side']==_0x243461(0x319)?_0x3a3ad3[_0x243461(0x2b4)]+0x1:_0x3a3ad3[_0x243461(0x2b4)],'buys':_0x23a0dd[_0x243461(0x2c7)]==_0x243461(0x2b0)?_0x3a3ad3[_0x243461(0x261)]+0x1:_0x3a3ad3[_0x243461(0x261)]};dbCoinResults[_0x243461(0x266)](_0x243461(0x27b))[_0x243461(0x1ac)]({'coin':_0x23a0dd[_0x243461(0x1c3)]})[_0x243461(0x19f)](_0x392184)[_0x243461(0x1ee)]();if(!_0x51eb52){if(_0x23a0dd['fee']&&_0x23a0dd['fee'][_0x243461(0x2fd)]=='BNB'){const _0x41d59e=currentCoins[_0x243461(0x1ac)](_0xc6d445=>_0xc6d445[_0x243461(0x1c3)]==_0x243461(0x1a1));if(_0x41d59e){let _0x2a90ec=dbCoinResults[_0x243461(0x266)](_0x243461(0x27b))[_0x243461(0x1ac)]({'coin':_0x243461(0x1a1)})[_0x243461(0x29c)]();_0x392184={..._0x2a90ec,'number':_0x41d59e['number']},dbCoinResults[_0x243461(0x266)]('coins')[_0x243461(0x1ac)]({'coin':_0x243461(0x1a1)})[_0x243461(0x19f)](_0x392184)[_0x243461(0x1ee)]();}}}}async function placeOrder(_0x480539){const _0x479fe3=_0x4a6aab,_0x3e4e96=config[_0x479fe3(0x2e4)]==_0x479fe3(0x262)?'market':_0x479fe3(0x2d1);if(lockOrders==ORDERS[_0x479fe3(0x1be)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x479fe3(0x1de);let _0x49f721=![];lastOrders=[];for(const _0x58afae of _0x480539){let _0x632fd3,_0x5aeeba,_0x42b48d,_0x2e3869,_0x39ee8d,_0xe50ad6=_0x58afae[_0x479fe3(0x213)];try{const _0x10ea0b=await exchange[_0x479fe3(0x1c7)](_0xe50ad6);_0x632fd3=_0x58afae['reverse']?0x1/_0x58afae[_0x479fe3(0x203)]:_0x58afae['last'],_0x5aeeba=_0x10ea0b['bid'],_0x42b48d=_0x10ea0b[_0x479fe3(0x31d)];_0x58afae[_0x479fe3(0x314)]?(_0x2e3869=_0x58afae['side']==_0x479fe3(0x2b0)?_0x479fe3(0x319):_0x479fe3(0x2b0),_0x39ee8d=Math[_0x479fe3(0x1a7)](_0x58afae['trade'])/_0x632fd3):(_0x2e3869=_0x58afae['side'],_0x39ee8d=Math[_0x479fe3(0x1a7)](_0x58afae[_0x479fe3(0x282)]));_0x3e4e96==_0x479fe3(0x2d1)&&(config['ordertype']=='limit-high'&&(_0x632fd3=_0x2e3869==_0x479fe3(0x2b0)?_0x5aeeba:_0x42b48d),config[_0x479fe3(0x2e4)]==_0x479fe3(0x29a)&&(_0x632fd3=_0x2e3869==_0x479fe3(0x2b0)?_0x42b48d:_0x5aeeba));_0x39ee8d=formatResult(_0x39ee8d,0x8),_0x632fd3=formatResult(_0x632fd3,0x8);const _0x2da77b=_0x2e3869==_0x479fe3(0x319)?config[_0x479fe3(0x250)]?String[_0x479fe3(0x286)]('0x'+config[_0x479fe3(0x250)])+'\x20':'':config[_0x479fe3(0x26d)]?String[_0x479fe3(0x286)]('0x'+config[_0x479fe3(0x26d)])+'\x20':'',_0x242ee4=_0x3e4e96==_0x479fe3(0x262)?_0x479fe3(0x285):config[_0x479fe3(0x2e4)]=='limit-high'?'Limit\x20(high-margin)':'Limit\x20(low-margin)',_0x1a5bd=(Math[_0x479fe3(0x2ea)](Math[_0x479fe3(0x317)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x479fe3(0x1ca)]({'customId':_0x1a5bd,'symbol':_0xe50ad6,'coin':_0x58afae[_0x479fe3(0x1c3)],'amount':_0x39ee8d,'price':_0x632fd3,'side':_0x2e3869,'reverse':_0x58afae[_0x479fe3(0x314)],'filled':0x0});if(_0x3e4e96=='market')logHistory('order',''+_0x2da77b+_0x242ee4+_0x479fe3(0x21f)+_0xe50ad6+'\x20'+_0x2e3869+'\x20#'+formatResult(_0x39ee8d,0x8)+'\x20@'+formatResult(_0x632fd3,0x8));else logHistory(_0x479fe3(0x25e),''+_0x2da77b+_0x242ee4+'\x20order:\x20'+_0xe50ad6+'\x20'+_0x2e3869+'\x20#'+formatResult(_0x39ee8d,0x8)+'\x20@'+formatResult(_0x632fd3,0x8));const _0x3cd3bf=await exchange['createOrder'](_0xe50ad6,_0x3e4e96,_0x2e3869,_0x39ee8d,_0x632fd3);logger[_0x479fe3(0x218)](_0x479fe3(0x2fc)+_0x3cd3bf['id']+_0x479fe3(0x307)+_0x1a5bd);const _0x1366d4=lastOrders[_0x479fe3(0x2cb)]-0x1;if(_0x1366d4>=0x0&&lastOrders[_0x1366d4][_0x479fe3(0x235)]==_0x1a5bd){lastOrders[_0x1366d4][_0x479fe3(0x23c)]=_0x3cd3bf['id'];if(_0x3cd3bf['amount'])lastOrders[_0x1366d4]['amount']=_0x3cd3bf[_0x479fe3(0x1bc)];if(_0x3cd3bf[_0x479fe3(0x1f7)])lastOrders[_0x1366d4][_0x479fe3(0x1f7)]=_0x3cd3bf['price'];lastOrders[_0x1366d4][_0x479fe3(0x22e)]=_0x3cd3bf[_0x479fe3(0x22e)];}if(config['cooldown']!=0x0){let _0x145ca4=null;if(cooldownTracker[_0x479fe3(0x2cb)]==config[_0x479fe3(0x2b1)]-0x1)_0x145ca4=cooldownTracker[_0x479fe3(0x296)]();const _0x412a34=getTimeStamp();cooldownTracker[_0x479fe3(0x1ca)](_0x412a34);if(_0x145ca4){const _0x231fd8=fns[_0x479fe3(0x20b)](new Date(_0x412a34),new Date(_0x145ca4));if(_0x231fd8<cooldownInterval){logHistory('error',_0x479fe3(0x23e)+config[_0x479fe3(0x2b1)]+_0x479fe3(0x25c)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x3031e0){if(_0x3031e0['toString']()['includes'](_0x479fe3(0x29e)))lastOrders=lastOrders[_0x479fe3(0x1b4)](_0x3f1110=>_0x3f1110['symbol']!=_0xe50ad6),logHistory('error',_0x479fe3(0x20d)+_0xe50ad6),_0x49f721=!![];else{if(_0x3031e0[_0x479fe3(0x1dd)]()[_0x479fe3(0x30c)](_0x479fe3(0x274)))lastOrders=lastOrders[_0x479fe3(0x1b4)](_0x4fd565=>_0x4fd565[_0x479fe3(0x213)]!=_0xe50ad6),logHistory(_0x479fe3(0x28f),_0x479fe3(0x259)+_0xe50ad6),_0x49f721=!![];else{if(_0x3031e0[_0x479fe3(0x1dd)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x479fe3(0x1b4)](_0x27e542=>_0x27e542[_0x479fe3(0x213)]!=_0xe50ad6),logHistory(_0x479fe3(0x28f),_0x479fe3(0x297)+_0xe50ad6),_0x49f721=!![];else _0x3031e0[_0x479fe3(0x1dd)]()[_0x479fe3(0x30c)](_0x479fe3(0x2be))?(lastOrders=lastOrders[_0x479fe3(0x1b4)](_0x5f5166=>_0x5f5166['symbol']!=_0xe50ad6),logHistory(_0x479fe3(0x28f),_0x479fe3(0x20d)+_0xe50ad6),_0x49f721=!![]):(lastOrders=lastOrders[_0x479fe3(0x1b4)](_0x342a3d=>_0x342a3d['symbol']!=_0xe50ad6),await handleError(_0x3031e0,'placeOrder()',_0xe50ad6));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x479fe3(0x2cb)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3b5fec=config[_0x479fe3(0x2e4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x479fe3(0x2b9)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x23583e=_0x479fe3;validateOrders(_0x23583e(0x24f));},_0x3b5fec);}else unlockOrders();_0x49f721&&config[_0x479fe3(0x258)]&&await pauseBot(_0x479fe3(0x220)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x479fe3(0x278)));}else{if(coolingDown)!config[_0x479fe3(0x258)]&&logHistory(_0x479fe3(0x28f),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x479fe3(0x1be)]&&(!config[_0x479fe3(0x258)]&&(config[_0x479fe3(0x2e4)]=='market'?logHistory(_0x479fe3(0x28f),_0x479fe3(0x2d9)):logHistory(_0x479fe3(0x28f),_0x479fe3(0x1cf))));}}function persistOpenOrders(_0x36efee){const _0x15c868=_0x4a6aab,_0x4d76f9={...config,'openOrders':_0x36efee};let _0x13fa9e=dbConfig[_0x15c868(0x266)](_0x15c868(0x243))[_0x15c868(0x1ac)]({'botID':botID})[_0x15c868(0x29c)]();_0x13fa9e&&dbConfig['get'](_0x15c868(0x243))[_0x15c868(0x1ac)]({'botID':botID})['assign'](_0x4d76f9)['write']();}function restoreOrders(){const _0x441cf3=_0x4a6aab;let _0x23bed1;config[_0x441cf3(0x24c)]&&allOpenOrders[_0x441cf3(0x2f4)](_0x49dc8=>{const _0x21a3bc=_0x441cf3,_0x839137=config[_0x21a3bc(0x24c)][_0x21a3bc(0x1ac)](_0x4c2122=>_0x4c2122[_0x21a3bc(0x23c)]==_0x49dc8['id']);_0x839137&&(lastOrders[_0x21a3bc(0x1ca)](_0x839137),_0x23bed1=_0x49dc8[_0x21a3bc(0x1f6)]);});if(lastOrders[_0x441cf3(0x2cb)]>0x0){lockOrders=ORDERS[_0x441cf3(0x301)],validateOrdersState=_0x441cf3(0x1cc),allOrdersPlaced=!![];const _0x50f98d=new Date()[_0x441cf3(0x2c0)](),_0x37ee4e=config[_0x441cf3(0x2e4)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x23bed1+_0x37ee4e>_0x50f98d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3736bc=_0x441cf3;validateOrders(_0x3736bc(0x24f));},_0x23bed1+_0x37ee4e-_0x50f98d);}else validateOrders(_0x441cf3(0x24f));}}async function sendMetricsTelegram(){const _0x2a8bfb=_0x4a6aab;if(!coinsLoaded){process[_0x2a8bfb(0x1a6)]({'telegrammsg':_0x2a8bfb(0x1e6)},_0x529427=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x5dbba6='';if(config[_0x2a8bfb(0x263)])_0x5dbba6='<b>'+config[_0x2a8bfb(0x1c8)]+_0x2a8bfb(0x31e);else _0x5dbba6=_0x2a8bfb(0x1ed)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x2c1728=getKPIs('basecoin'),_0x1770cd=getKPIs(_0x2a8bfb(0x326),config[_0x2a8bfb(0x326)]),_0x1420f7=getKPIs(_0x2a8bfb(0x2b3)),_0x2417fc=getKPIs(_0x2a8bfb(0x1f5),config[_0x2a8bfb(0x326)]);_0x5dbba6+=_0x2a8bfb(0x1ab),_0x5dbba6+=_0x2c1728[_0x2a8bfb(0x1a5)]+_0x2a8bfb(0x30e)+_0x2c1728[_0x2a8bfb(0x29c)]+'\x0a',_0x5dbba6+=_0x2c1728[_0x2a8bfb(0x2ba)]+':\x20'+_0x2c1728[_0x2a8bfb(0x26b)]+'%\x0a',_0x5dbba6+=_0x1770cd['leftTxt']+'\x20:\x20'+_0x1770cd[_0x2a8bfb(0x29c)]+'\x0a',_0x5dbba6+=_0x1770cd['rightTxt']+':\x20'+_0x1770cd[_0x2a8bfb(0x26b)]+'%\x0a',_0x5dbba6+=_0x1420f7['leftTxt']+':\x20'+_0x1420f7[_0x2a8bfb(0x29c)]+'\x20('+config['basecoin']+')\x0a',_0x5dbba6+=_0x1420f7[_0x2a8bfb(0x2ba)]+':\x20'+_0x1420f7[_0x2a8bfb(0x26b)]+_0x2a8bfb(0x215)+config['basecoin']+')\x0a',_0x5dbba6+=_0x2417fc[_0x2a8bfb(0x1a5)]+':\x20'+_0x2417fc[_0x2a8bfb(0x29c)]+'\x20('+config['fiat']+')\x0a',_0x5dbba6+=_0x2417fc[_0x2a8bfb(0x2ba)]+':\x20'+_0x2417fc['change']+_0x2a8bfb(0x215)+config[_0x2a8bfb(0x326)]+')\x0a',_0x5dbba6+=_0x2a8bfb(0x1ce),process['send']({'telegrammsg':_0x5dbba6},_0x2f6324=>{});}async function sendPortfolioTelegram(){const _0x4610de=_0x4a6aab;if(!coinsLoaded){process[_0x4610de(0x1a6)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2091a0=>{});return;}let _0x22d8a1='';if(config[_0x4610de(0x263)])_0x22d8a1='<b>'+config[_0x4610de(0x1c8)]+_0x4610de(0x281);else _0x22d8a1=_0x4610de(0x1ed)+botID+_0x4610de(0x281);_0x22d8a1+=_0x4610de(0x1ab),_0x22d8a1+=_0x4610de(0x2de),_0x22d8a1+=_0x4610de(0x2f0),_0x22d8a1+='-------------------------------\x0a',currentCoins[_0x4610de(0x2f4)](_0x4dae63=>{const _0x479a41=_0x4610de;_0x22d8a1+=_0x4dae63[_0x479a41(0x1c3)][_0x479a41(0x1b1)](0x7)+'|\x20'+formatPad(_0x4dae63[_0x479a41(0x2aa)],0x2,0x6)+'|\x20'+formatPad(_0x4dae63['target'],0x2,0x6)+'|\x20'+formatPad(_0x4dae63['delta']*0x64,0x2,0x6)+'\x0a';}),_0x22d8a1+='</pre>',process[_0x4610de(0x1a6)]({'telegrammsg':_0x22d8a1},_0x10b33b=>{});}function formatPad(_0x52b09c,_0x52e58d,_0x5b71eb){const _0x132feb=_0x4a6aab,_0x216262=formatResultString(_0x52b09c,_0x52e58d);return _0x216262?_0x216262[_0x132feb(0x2bc)](_0x5b71eb):''[_0x132feb(0x2bc)](_0x5b71eb);}function logHistory(_0x1393b8,_0x289204,_0x53e8ab=''){const _0x30d6b1=_0x4a6aab;let _0x3fcdf4={'time':getTimeStamp(),'type':_0x1393b8,'event':_0x289204};dbLogs['get'](_0x30d6b1(0x21a))[_0x30d6b1(0x1ca)](_0x3fcdf4)[_0x30d6b1(0x1ee)]();if(_0x53e8ab=='')_0x53e8ab=_0x289204;proxyEmit(_0x30d6b1(0x217),{'log':_0x3fcdf4,'summary':_0x53e8ab}),process[_0x30d6b1(0x1a6)]({'telegram':{..._0x3fcdf4,'botname':config[_0x30d6b1(0x1c8)],'showname':config['showname']}},_0x9a8fad=>{}),logger[_0x30d6b1(0x222)](''+_0x3fcdf4['event']);}function emitHistory(_0x26514e={}){const _0x3b14ee=_0x4a6aab;Object[_0x3b14ee(0x1e3)](_0x26514e)['length']==0x0&&(_0x26514e={'type':[_0x3b14ee(0x25e),_0x3b14ee(0x217)],'event':'','page':0x1});if(_0x26514e[_0x3b14ee(0x2a0)][_0x3b14ee(0x30c)](_0x3b14ee(0x217)))_0x26514e[_0x3b14ee(0x2a0)]['splice'](_0x26514e['type'][_0x3b14ee(0x198)](_0x3b14ee(0x217)),0x1,_0x3b14ee(0x28f),_0x3b14ee(0x295),_0x3b14ee(0x247));if(dbLogs[_0x3b14ee(0x1c0)](_0x3b14ee(0x21a))[_0x3b14ee(0x29c)]()){let _0x199f05=dbLogs[_0x3b14ee(0x266)](_0x3b14ee(0x21a))[_0x3b14ee(0x1b4)](_0x1b097f=>{const _0x3d1d3f=_0x3b14ee;if(_0x26514e[_0x3d1d3f(0x2a0)][_0x3d1d3f(0x2cb)]==0x0)return![];else return _0x26514e[_0x3d1d3f(0x2a0)][_0x3d1d3f(0x30c)](_0x1b097f[_0x3d1d3f(0x2a0)]);})['filter'](_0x2d1914=>{const _0x2c1fb3=_0x3b14ee;if(_0x26514e[_0x2c1fb3(0x217)]=='')return!![];else return _0x2d1914[_0x2c1fb3(0x217)]['toLowerCase']()[_0x2c1fb3(0x30c)](_0x26514e[_0x2c1fb3(0x217)]['toLowerCase']());})[_0x3b14ee(0x248)](_0x3b14ee(0x2a1)),_0x322ae7=_0x199f05[_0x3b14ee(0x29c)]()[_0x3b14ee(0x2cb)];_0x199f05=_0x199f05[_0x3b14ee(0x314)]()['slice']((_0x26514e['page']-0x1)*logPageSize,_0x26514e['page']*logPageSize-0x1)['reverse']()[_0x3b14ee(0x29c)](),proxyEmit(_0x3b14ee(0x304),{'logs':_0x199f05,'total':_0x322ae7});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0xb6a504){const _0x510551=_0x4a6aab;if(dbLogs[_0x510551(0x1c0)](_0x510551(0x21a))[_0x510551(0x29c)]()){const _0x11d212=dbLogs[_0x510551(0x266)]('logs')['sortBy'](_0x510551(0x2a1))['filter'](_0x36bfc5=>{const _0x23903f=_0x510551;return _0x36bfc5[_0x23903f(0x2a0)]==_0x23903f(0x25e);})[_0x510551(0x29c)]();dbLogs[_0x510551(0x266)](_0x510551(0x21a))[_0x510551(0x240)]()[_0x510551(0x1ee)](),dbLogs[_0x510551(0x266)]('logs')[_0x510551(0x19f)](_0x11d212)[_0x510551(0x1ee)](),emitHistory(_0xb6a504);}}async function pauseBot(_0x30ebf7=''){const _0x5794da=_0x4a6aab,_0x3b2f0c=new Date()[_0x5794da(0x2c0)]();if(!lastErrorShown||_0x3b2f0c-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x3b2f0c;!lastBotPause?(lastBotPause=_0x3b2f0c,consecutivePauses=0x1):(_0x3b2f0c-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x5794da(0x2dc)},_0x5817f9=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x5794da(0x2c0)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x30ebf7)_0x30ebf7+='\x20|\x20';logHistory(_0x5794da(0x28f),_0x30ebf7+_0x5794da(0x1f2)+pauseBotInterval/0xea60+_0x5794da(0x26f)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x2d25d1=_0x4a6aab;process[_0x2d25d1(0x1a6)]({'stop':_0x2d25d1(0x289)},_0x9b5e0d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0xb7a8e6,_0x217be8){const _0x1ca4ad=_0x4a6aab;if(_0xb7a8e6['toString']()['includes'](_0x1ca4ad(0x21b)))return logHistory(_0x1ca4ad(0x28f),config[_0x1ca4ad(0x31f)]+_0x1ca4ad(0x239)),![];else{if(_0xb7a8e6['toString']()['includes'](_0x1ca4ad(0x1ba)))return logHistory(_0x1ca4ad(0x28f),config['exchange']+_0x1ca4ad(0x1fe)),![];else{if(_0xb7a8e6['toString']()['includes']('AuthenticationError'))return logHistory(_0x1ca4ad(0x28f),config[_0x1ca4ad(0x31f)]+_0x1ca4ad(0x2a9)),logHistory(_0x1ca4ad(0x28f),_0x1ca4ad(0x293)),![];else await handleError(_0xb7a8e6,_0x217be8);}}}async function handleError(_0x3f84d7,_0xaeed11,_0x579480=''){const _0x54715c=_0x4a6aab,_0x12d642=config[_0x54715c(0x31f)]||_0x54715c(0x30a);if(_0x3f84d7['toString']()[_0x54715c(0x30c)]('DDoSProtection'))await pauseBot(config[_0x54715c(0x31f)]+_0x54715c(0x300));else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x315)))await pauseBot(config[_0x54715c(0x31f)]+'\x20not\x20available');else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)]('RequestTimeout'))await pauseBot(config['exchange']+_0x54715c(0x29b));else{if(_0x3f84d7['toString']()[_0x54715c(0x30c)](_0x54715c(0x306)))await pauseBot(config[_0x54715c(0x31f)]+_0x54715c(0x201));else{if(_0x3f84d7['toString']()[_0x54715c(0x30c)](_0x54715c(0x2ce)))logger['debug'](_0x54715c(0x2a8),_0x3f84d7),await pauseBot(config[_0x54715c(0x31f)]+_0x54715c(0x1fc));else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x21e)))logHistory(_0x54715c(0x28f),_0xaeed11+_0x54715c(0x227)),logHistory(_0x54715c(0x28f),_0x54715c(0x2bd)),await killBot();else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x1ef)))logHistory(_0x54715c(0x28f),_0xaeed11+'\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory('error',_0x54715c(0x2bd)),await killBot();else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x21b)))logHistory(_0x54715c(0x28f),_0xaeed11+_0x54715c(0x233)+config[_0x54715c(0x31f)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x54715c(0x28f),_0x54715c(0x2bd)),await killBot();else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x1ba)))logHistory(_0x54715c(0x28f),_0xaeed11+_0x54715c(0x233)+config[_0x54715c(0x31f)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x54715c(0x28f),_0x54715c(0x2bd)),await killBot();else{if(_0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)]('AuthenticationError'))logHistory(_0x54715c(0x28f),_0xaeed11+'\x20|\x20'+config[_0x54715c(0x31f)]+_0x54715c(0x1f1)),logHistory(_0x54715c(0x28f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x3f84d7[_0x54715c(0x1dd)]()[_0x54715c(0x30c)](_0x54715c(0x2af))?logHistory(_0x54715c(0x28f),_0xaeed11+_0x54715c(0x1bf)+_0x579480):(logger[_0x54715c(0x222)](_0xaeed11+'\x20|\x20Error\x20details:\x20',_0x3f84d7),await pauseBot(_0x54715c(0x21c)));}}}}}}}}}}function formatResult(_0x5df34c,_0x5b1029){const _0x436e8e=_0x4a6aab;return parseFloat(_0x5df34c[_0x436e8e(0x1cd)](_0x5b1029));}function formatResultTruncate(_0x549018,_0x325c79){const _0x506546=_0x4a6aab;let _0x428242=formatResultString(_0x549018,0xa),_0x4ef7fe=_0x428242[_0x506546(0x198)]('.');return _0x4ef7fe!=-0x1&&(_0x428242=_0x428242[_0x506546(0x325)](0x0,_0x4ef7fe+_0x325c79+0x1)),Number(_0x428242);}function formatResultString(_0x18a67c,_0x35bb98){const _0x318985=_0x4a6aab;let _0x5a6c93;if(!(''+_0x18a67c)['includes']('e'))_0x5a6c93=+(Math[_0x318985(0x324)](_0x18a67c+'e+'+_0x35bb98)+'e-'+_0x35bb98);else{let _0x162056=(''+_0x18a67c)['split']('e'),_0x58c6df='';+_0x162056[0x1]+_0x35bb98>0x0&&(_0x58c6df='+'),_0x5a6c93=+(Math['round'](+_0x162056[0x0]+'e'+_0x58c6df+(+_0x162056[0x1]+_0x35bb98))+'e-'+_0x35bb98);}return Number(_0x5a6c93)[_0x318985(0x1cd)](_0x35bb98);}function getServerTime(){const _0x19bb95=_0x4a6aab,_0x16928c=new Date();return _0x16928c[_0x19bb95(0x24e)]()+'/'+(_0x16928c[_0x19bb95(0x2ed)]()+0x1)[_0x19bb95(0x1dd)]()[_0x19bb95(0x2bc)](0x2,'0')+'/'+_0x16928c[_0x19bb95(0x294)]()[_0x19bb95(0x1dd)]()['padStart'](0x2,'0')+'\x20'+_0x16928c[_0x19bb95(0x310)]()[_0x19bb95(0x1dd)]()[_0x19bb95(0x2bc)](0x2,'0')+':'+_0x16928c[_0x19bb95(0x2c3)]()[_0x19bb95(0x1dd)]()['padStart'](0x2,'0')+':'+_0x16928c[_0x19bb95(0x1c1)]()['toString']()[_0x19bb95(0x2bc)](0x2,'0');}function getTimeStamp(){const _0x35d78d=_0x4a6aab,_0x2e5f7d=shiftedTime();return _0x2e5f7d['getFullYear']()+'/'+(_0x2e5f7d[_0x35d78d(0x2ed)]()+0x1)['toString']()[_0x35d78d(0x2bc)](0x2,'0')+'/'+_0x2e5f7d[_0x35d78d(0x294)]()[_0x35d78d(0x1dd)]()[_0x35d78d(0x2bc)](0x2,'0')+'\x20'+_0x2e5f7d['getHours']()['toString']()[_0x35d78d(0x2bc)](0x2,'0')+':'+_0x2e5f7d['getMinutes']()[_0x35d78d(0x1dd)]()['padStart'](0x2,'0')+':'+_0x2e5f7d['getSeconds']()[_0x35d78d(0x1dd)]()['padStart'](0x2,'0');}function getDate(){const _0x4240e0=_0x4a6aab,_0x9b420a=shiftedTime();return _0x9b420a[_0x4240e0(0x24e)]()+'/'+(_0x9b420a[_0x4240e0(0x2ed)]()+0x1)[_0x4240e0(0x1dd)]()[_0x4240e0(0x2bc)](0x2,'0')+'/'+_0x9b420a[_0x4240e0(0x294)]()[_0x4240e0(0x1dd)]()[_0x4240e0(0x2bc)](0x2,'0');}function getHour(){const _0x32a751=_0x4a6aab,_0x582b43=shiftedTime();return _0x582b43['getHours']()['toString']()[_0x32a751(0x2bc)](0x2,'0');}function sleep(_0x1a7b03){return new Promise(_0x4af5c9=>setTimeout(_0x4af5c9,_0x1a7b03));}function shiftedTime(){const _0x8cbbd7=_0x4a6aab,_0x1c71e7=new Date();let _0x5f48c0=_0x1c71e7;if(config&&config[_0x8cbbd7(0x255)]!==0x0)_0x5f48c0=fns[_0x8cbbd7(0x225)](_0x1c71e7,{'hours':config[_0x8cbbd7(0x255)]});return _0x5f48c0;}function timer(_0x4fe9b9){const _0x5dc8a8=_0x4a6aab,_0x4087fc=new Date();!lasttime?console[_0x5dc8a8(0x226)](getTimeStamp()+':\x20timer\x20>',_0x4fe9b9,_0x4087fc):console[_0x5dc8a8(0x226)](getTimeStamp()+_0x5dc8a8(0x291),_0x4fe9b9,(_0x4087fc-lasttime)/0x3e8),lasttime=_0x4087fc;}