const _0x1dbe6d=_0x5657;(function(_0x1e7dd2,_0x4da370){const _0x40b15c=_0x5657,_0x2ca95a=_0x1e7dd2();while(!![]){try{const _0x464f76=-parseInt(_0x40b15c(0xd4))/0x1*(-parseInt(_0x40b15c(0x106))/0x2)+parseInt(_0x40b15c(0x262))/0x3+parseInt(_0x40b15c(0x1fc))/0x4*(parseInt(_0x40b15c(0x140))/0x5)+parseInt(_0x40b15c(0x267))/0x6*(-parseInt(_0x40b15c(0x239))/0x7)+parseInt(_0x40b15c(0x1ca))/0x8+-parseInt(_0x40b15c(0x23f))/0x9+-parseInt(_0x40b15c(0xad))/0xa*(parseInt(_0x40b15c(0x202))/0xb);if(_0x464f76===_0x4da370)break;else _0x2ca95a['push'](_0x2ca95a['shift']());}catch(_0xe3d813){_0x2ca95a['push'](_0x2ca95a['shift']());}}}(_0x3ab7,0xeb142));const _0xc171ed=function(){let _0x1d0ee6=!![];return function(_0x40fe72,_0x1d435c){const _0xcd9188=_0x1d0ee6?function(){const _0x5d8f31=_0x5657;if(_0x1d435c){const _0x4aa89f=_0x1d435c[_0x5d8f31(0x260)](_0x40fe72,arguments);return _0x1d435c=null,_0x4aa89f;}}:function(){};return _0x1d0ee6=![],_0xcd9188;};}(),_0x396f9f=_0xc171ed(this,function(){const _0x58a7b1=_0x5657;return _0x396f9f[_0x58a7b1(0x1c8)]()[_0x58a7b1(0xa8)](_0x58a7b1(0x171))[_0x58a7b1(0x1c8)]()[_0x58a7b1(0x137)](_0x396f9f)[_0x58a7b1(0xa8)](_0x58a7b1(0x171));});_0x396f9f();'use strict';const ccxt=require(_0x1dbe6d(0xe0)),low=require(_0x1dbe6d(0x20e)),FileSync=require(_0x1dbe6d(0x1e8)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x1dbe6d(0x10a))[_0x1dbe6d(0x1a1)],util=require(_0x1dbe6d(0x24e)),argv=require(_0x1dbe6d(0x17e))(process[_0x1dbe6d(0xb8)][_0x1dbe6d(0x206)](0x2))[_0x1dbe6d(0xb8)],path=require(_0x1dbe6d(0x219)),axios=require(_0x1dbe6d(0x241));let exchange,gTicker={},gChange={};const usdBasecoins=['USD','BUSD',_0x1dbe6d(0x25d),_0x1dbe6d(0x1aa),'USDC',_0x1dbe6d(0x228)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1dbe6d(0x10d)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1dbe6d(0x18e)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1dbe6d(0xda)+pauseBotInterval/0xea60+_0x1dbe6d(0x23d),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1dbe6d(0x158))[_0x1dbe6d(0x135)],botID=process['argv'][0x2]||_0x1dbe6d(0x225),pattern=/^[0-9]{3}$/;!pattern[_0x1dbe6d(0xb1)](botID)&&(console[_0x1dbe6d(0xa9)](_0x1dbe6d(0x195)+botID+_0x1dbe6d(0xc0)),killBot());const userID=process[_0x1dbe6d(0xb8)][0x3]||'',configpath=userID?_0x1dbe6d(0x1a5)+userID+'/':'./config/',logspath=userID?_0x1dbe6d(0x102)+userID+'/':_0x1dbe6d(0x102),loggerfile=fs[_0x1dbe6d(0x265)](logspath+'/output-000.log',{'flags':'a'});!fs[_0x1dbe6d(0x1b0)](configpath)&&fs[_0x1dbe6d(0x15d)](configpath);!fs[_0x1dbe6d(0x1b0)](logspath)&&fs[_0x1dbe6d(0x15d)](logspath);const configfile=configpath+_0x1dbe6d(0x17b)+botID+_0x1dbe6d(0x22d),logfile=configpath+_0x1dbe6d(0x17b)+botID+_0x1dbe6d(0x1a6),performancefile=configpath+'bot-'+botID+_0x1dbe6d(0x20a),coinresultsfile=configpath+_0x1dbe6d(0x17b)+botID+'-results.json',settingsfile=configpath+_0x1dbe6d(0x22b),securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1dbe6d(0x17a),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1dbe6d(0x227)]({'logs':[],'version':serverversion})[_0x1dbe6d(0xa3)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1dbe6d(0x227)]({'data':[],'version':serverversion})[_0x1dbe6d(0xa3)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1dbe6d(0x227)]({'coins':[],'version':serverversion})[_0x1dbe6d(0xa3)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1dbe6d(0x133),'rsaStandard':_0x1dbe6d(0xb9)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3c9f5b=>{const _0x181307=_0x1dbe6d;console[_0x181307(0xa9)](_0x3c9f5b);},'simple':_0x456ea6=>{const _0x5f44d6=_0x1dbe6d;console[_0x5f44d6(0xa9)](_0x456ea6),loggerfile[_0x5f44d6(0xa3)](util[_0x5f44d6(0x17f)](_0x456ea6)+'\x0a');},'full':async(_0x5e8f28,_0x189a25='')=>{const _0x2dcf1f=_0x1dbe6d;let _0x1ed9f9;if(config['showname'])_0x1ed9f9=getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x5e8f28;else _0x1ed9f9=getTimeStamp()+_0x2dcf1f(0xbf)+botID+_0x2dcf1f(0xd3)+_0x5e8f28;console[_0x2dcf1f(0xa9)](_0x1ed9f9),loggerfile[_0x2dcf1f(0xa3)](util[_0x2dcf1f(0x17f)](_0x1ed9f9)+'\x0a'),_0x189a25&&(console[_0x2dcf1f(0xa9)](_0x189a25),loggerfile['write'](util[_0x2dcf1f(0x17f)](_0x189a25)+'\x0a'));},'debug':async(_0x129b5c,_0x50f597='')=>{const _0x21c8e1=_0x1dbe6d;let _0x19781a;if(config[_0x21c8e1(0x1bd)])_0x19781a=getTimeStamp()+':\x20'+config[_0x21c8e1(0xdf)]+_0x21c8e1(0x15f)+_0x129b5c;else _0x19781a=getTimeStamp()+_0x21c8e1(0xbf)+botID+'\x20>\x20[DEBUG]\x20'+_0x129b5c;if(debugging)console[_0x21c8e1(0xa9)](_0x19781a);loggerfile[_0x21c8e1(0xa3)](util[_0x21c8e1(0x17f)](_0x19781a)+'\x0a');if(_0x50f597){if(debugging)console[_0x21c8e1(0xa9)](_0x50f597);loggerfile['write'](util['format'](_0x50f597)+'\x0a');}}};process['on']('uncaughtException',function(_0x57f728){handleError(_0x57f728,'uncaughtException');});settings[_0x1dbe6d(0x258)]!=config[_0x1dbe6d(0x258)]&&updateTimeshift(settings[_0x1dbe6d(0x258)]);settings['onepagemode']!=config[_0x1dbe6d(0x20c)]&&updateOnepagemode(settings['onepagemode']);(settings[_0x1dbe6d(0x177)]&&!config['marketcapApi']||!settings[_0x1dbe6d(0x177)]&&config[_0x1dbe6d(0x177)])&&updateMarketcapApi(settings[_0x1dbe6d(0x177)]);process[_0x1dbe6d(0x25b)]({'started':_0x1dbe6d(0x100)},_0x21c3a5=>{}),initializeProcessListeners();function proxyEmit(_0x44a85c,_0xc5fdb0=null){const _0x30359e=_0x1dbe6d;process[_0x30359e(0x25b)]({'function':_0x44a85c,'args':_0xc5fdb0},_0x54a736=>{});}function initializeProcessListeners(){process['on']('message',_0x34fa9b=>{const _0x48cffa=_0x5657;switch(Object[_0x48cffa(0x170)](_0x34fa9b)[0x0]){case'timeshift':_0x34fa9b[_0x48cffa(0x258)]!=undefined&&(settings[_0x48cffa(0x258)]=_0x34fa9b[_0x48cffa(0x258)],updateTimeshift(settings[_0x48cffa(0x258)]));break;case _0x48cffa(0x20c):_0x34fa9b[_0x48cffa(0x20c)]!=undefined&&(settings['onepagemode']=_0x34fa9b[_0x48cffa(0x20c)],updateOnepagemode(settings['onepagemode']));break;case _0x48cffa(0x177):_0x34fa9b[_0x48cffa(0x177)]!=undefined&&(settings[_0x48cffa(0x177)]=_0x34fa9b[_0x48cffa(0x177)],updateMarketcapApi(settings['marketcapApi']));break;case _0x48cffa(0x17c):_0x34fa9b[_0x48cffa(0x17c)]!=undefined&&(bots=JSON[_0x48cffa(0x159)](_0x34fa9b['bots']),proxyEmit(_0x48cffa(0x17c),bots));break;case _0x48cffa(0x21b):switch(_0x34fa9b[_0x48cffa(0x21b)]){case _0x48cffa(0x12c):initclient();break;case _0x48cffa(0x16a):toggleBotMode();break;case _0x48cffa(0x222):emitHistory(_0x34fa9b[_0x48cffa(0x259)]);break;case _0x48cffa(0x184):deleteHistoryAlerts(_0x34fa9b[_0x48cffa(0x259)]);break;case'getPortfolio':getPortfolio(_0x34fa9b[_0x48cffa(0x259)]);break;case _0x48cffa(0x212):storeConfiguration(_0x34fa9b[_0x48cffa(0x259)]);break;case'storeHeadless':storeHeadless(_0x34fa9b[_0x48cffa(0x259)]);break;case _0x48cffa(0x217):storeFiat(_0x34fa9b[_0x48cffa(0x259)]);break;case _0x48cffa(0x174):resetHistory();break;case _0x48cffa(0x1ff):getStartingBalances(getNormalizedPerformance());break;case _0x48cffa(0xb3):placeOrder(_0x34fa9b['args']);break;case _0x48cffa(0x18d):cancelLoading();break;case _0x48cffa(0x121):showConfig();break;case _0x48cffa(0x1e9):sendMetricsTelegram();break;case _0x48cffa(0x238):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x148417=![]){const _0x5088b0=_0x1dbe6d;logger[_0x5088b0(0x1f9)](_0x5088b0(0x1df)+(_0x148417?'exchange\x20reloaded':_0x5088b0(0xb2))+_0x5088b0(0x1c3)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x148417)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x5088b0(0x23c)]!=''&&config['apiKey']!=_0x5088b0(0x146)){loadingProgress=0x0;if(_0x148417){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x27f391=await getCoins();[currentCoins,currentCoinsAll]=_0x27f391,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug']('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x5088b0(0xd9)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x4e2094=![]){const _0x395911=_0x1dbe6d;logger[_0x395911(0x1f9)](_0x395911(0xe7)+(_0x4e2094?'quick':_0x395911(0xef))+_0x395911(0x12d)+config[_0x395911(0x266)]);if(pidBalances)clearTimeout(pidBalances);if(_0x4e2094){getBalances();return;}coinsLoaded=![];if(config[_0x395911(0x23c)]!=''&&config['apiKey']!=_0x395911(0x146)){loadingProgress=0x1;const _0x165134=await getCoins();[currentCoins,currentCoinsAll]=_0x165134,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x395911(0x1f9)](_0x395911(0x1d1)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x395911(0xd9)]==0x0&&allOpenOrders[_0x395911(0xd9)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x432e57){const _0x40e56a=_0x1dbe6d;let _0x562149=![];if(_0x432e57)_0x562149=!![];let _0x32eb35;_0x562149?_0x32eb35=_0x432e57['map'](_0x442301=>_0x442301['coin']):_0x32eb35=currentCoinsAll[_0x40e56a(0x23b)](_0x50b09d=>_0x50b09d[_0x40e56a(0x16b)]);if(!config[_0x40e56a(0x177)]||!_0x562149&&!config['marketcapEnabled']||_0x32eb35['length']==0x0)return;let _0x1352df=null;try{_0x1352df=await axios[_0x40e56a(0x1a8)](_0x40e56a(0x156),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x40e56a(0x177)]},'params':{'symbol':_0x32eb35[_0x40e56a(0x1c8)]()}});}catch(_0x1af581){_0x1352df=null,_0x1af581[_0x40e56a(0x1c8)]()[_0x40e56a(0x250)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x40e56a(0x1b9),emittedConfiguration()),logHistory(_0x40e56a(0x153),_0x40e56a(0xc3))):(logHistory(_0x40e56a(0x153),_0x40e56a(0x103)+schedulerInterval/(0x3c*0x3e8)+_0x40e56a(0x23d)),logger['debug'](_0x40e56a(0x1dd),_0x1af581[_0x40e56a(0x1c8)]()+_0x40e56a(0xa6)+_0x1af581[_0x40e56a(0x19a)]));}if(_0x1352df){let _0x52ad7b=0x0;const _0x451517=_0x1352df[_0x40e56a(0xe2)];_0x32eb35[_0x40e56a(0x141)](_0x3477f2=>{const _0x10bb95=_0x40e56a;if(_0x451517[_0x10bb95(0xe2)][_0x3477f2][0x0])_0x52ad7b+=_0x451517[_0x10bb95(0xe2)][_0x3477f2][0x0][_0x10bb95(0xec)]['USD'][_0x10bb95(0x190)];}),_0x32eb35[_0x40e56a(0x141)](_0x2d7904=>{const _0x1732a7=_0x40e56a,_0x825fc7=_0x451517[_0x1732a7(0xe2)][_0x2d7904][0x0]?_0x451517[_0x1732a7(0xe2)][_0x2d7904][0x0][_0x1732a7(0xec)]['USD']['market_cap']:0x0;if(_0x562149){const _0x3a2df8=_0x432e57[_0x1732a7(0x14b)](_0x3e9e61=>_0x3e9e61['coin']==_0x2d7904);_0x3a2df8&&(_0x3a2df8[_0x1732a7(0xbb)]=_0x825fc7);}else{const _0x4f01e0=currentCoins[_0x1732a7(0x14b)](_0x55a000=>_0x55a000['coin']==_0x2d7904);_0x4f01e0&&(_0x4f01e0[_0x1732a7(0xbb)]=_0x825fc7);const _0x536506=currentCoinsAll[_0x1732a7(0x14b)](_0x4dd5c4=>_0x4dd5c4[_0x1732a7(0x16b)]==_0x2d7904);_0x536506&&(_0x536506['marketcap']=_0x825fc7);}}),!_0x562149&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3e8344=_0x1dbe6d,_0x4cfcfe=0x2;let _0xa13da8=0x0,_0x3f33ff=0x0,_0x1467df=0x0,_0x3ea91f=0x0,_0x45796d=0x0;config[_0x3e8344(0x10b)]['forEach'](_0x8f252d=>{const _0x5ebaf1=_0x3e8344;if(!_0x8f252d[_0x5ebaf1(0x1ac)]){_0x1467df++,_0xa13da8+=_0x8f252d[_0x5ebaf1(0xf3)];if(_0x8f252d[_0x5ebaf1(0xf3)]===-0x1){_0xa13da8++;const _0x2f856e=currentCoinsAll[_0x5ebaf1(0x14b)](_0x1ab0dd=>_0x1ab0dd[_0x5ebaf1(0x16b)]==_0x8f252d[_0x5ebaf1(0x16b)]);_0x2f856e&&(_0x3ea91f+=_0x2f856e[_0x5ebaf1(0xbb)],_0x45796d+=Math['sqrt'](_0x2f856e[_0x5ebaf1(0xbb)]));}if(_0x8f252d[_0x5ebaf1(0xf3)]!==-0x1)_0x3f33ff++;}});let _0x467604;const _0x33177d=0x64-_0xa13da8,_0x3284ac=_0x1467df-_0x3f33ff;_0x467604=_0x3284ac===0x0?_0xa13da8:Math[_0x3e8344(0x111)](0x64,_0xa13da8),config[_0x3e8344(0x10b)][_0x3e8344(0x141)](_0x434853=>{const _0x28d5d3=_0x3e8344,_0x496947=currentCoinsAll[_0x28d5d3(0x14b)](_0x533e00=>_0x533e00['coin']==_0x434853[_0x28d5d3(0x16b)]);_0x496947&&(_0x434853[_0x28d5d3(0xbb)]=_0x496947['marketcap']);if(!_0x434853['excluded']){if(_0x467604<=0x64){if(_0x434853['slider']===-0x1){if(_0x3ea91f!==0x0&&config[_0x28d5d3(0x15c)]){if(_0x496947){if(config[_0x28d5d3(0x15c)]==_0x28d5d3(0xbb))_0x434853['distribution']=(_0x33177d/(_0x3ea91f/_0x496947['marketcap']))[_0x28d5d3(0x118)](_0x4cfcfe);else config[_0x28d5d3(0x15c)]==_0x28d5d3(0x231)&&(_0x434853[_0x28d5d3(0xf6)]=(_0x33177d/(_0x45796d/Math[_0x28d5d3(0x1e2)](_0x496947[_0x28d5d3(0xbb)])))[_0x28d5d3(0x118)](_0x4cfcfe));}}}}}}),updateConfig();}function updateConfig(){const _0x30f4cf=_0x1dbe6d;let _0x3ffe7d=dbConfig[_0x30f4cf(0x1a8)](_0x30f4cf(0x191))[_0x30f4cf(0x14b)]({'botID':botID})['value']();_0x3ffe7d&&dbConfig[_0x30f4cf(0x1a8)](_0x30f4cf(0x191))[_0x30f4cf(0x14b)]({'botID':botID})[_0x30f4cf(0x117)](config)[_0x30f4cf(0xa3)]();}function logMemory(){const _0x2afca9=_0x1dbe6d,_0x2a184d=process[_0x2afca9(0x25a)]()['heapUsed']/0x400/0x400;logger[_0x2afca9(0x1f9)]('process\x20'+process[_0x2afca9(0x1b5)]+_0x2afca9(0xdd)+_0x2a184d+'\x20MB');}async function startScheduler(){const _0x20bd48=_0x1dbe6d,_0x25efa3=shiftedTime()[_0x20bd48(0x16d)]();getMarketCap(),logMemory(),(_0x25efa3==0x2||_0x25efa3==0xe)&&await loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x225c91=![]){const _0x77bc04=_0x1dbe6d;logger['debug'](_0x77bc04(0x1f7));if(!_0x225c91)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x77bc04(0x25b)]({'stop':_0x77bc04(0xd7)},_0x5e2dee=>{});}async function initExchange(_0x1464b9=config['exchange'],_0x307682=config[_0x1dbe6d(0x23c)],_0x3b29c1=config[_0x1dbe6d(0x213)],_0x2925bd=config[_0x1dbe6d(0x16f)]){const _0xa1ad33=_0x1dbe6d;if(exchange){logger[_0xa1ad33(0x1f9)](_0xa1ad33(0x236));return;}logger[_0xa1ad33(0x1f9)](_0xa1ad33(0xc8));!supportedExchanges()[_0xa1ad33(0x250)](_0x1464b9)&&(logHistory(_0xa1ad33(0x153),_0xa1ad33(0x12b)+_0x1464b9+'\x20exchange'),killBot());const _0x940321=ccxt[_0xa1ad33(0x208)][_0x1464b9[_0xa1ad33(0x254)]()];exchange=new _0x940321({'apiKey':_0x307682,'secret':_0x3b29c1,'options':{'defaultType':'spot'}});if(_0x2925bd)exchange[_0xa1ad33(0x243)]=_0x2925bd;}function updateExchange(_0x3f0c6b,_0x3b0961,_0x34eac7=null){const _0xb2b28a=_0x1dbe6d;exchange[_0xb2b28a(0x23c)]=_0x3f0c6b,exchange['apiSecret']=_0x3b0961,exchange[_0xb2b28a(0x16f)]=_0x34eac7,logger[_0xb2b28a(0x1f9)](_0xb2b28a(0x1d3));}function setStableCoins(){const _0x275687=_0x1dbe6d;let _0x4bea2f=config[_0x275687(0xb5)]=='ETH'?'ETH':config[_0x275687(0xb5)]=='PAXG'?_0x275687(0xdb):_0x275687(0xf9),_0x23bd40=!allSymbols[_0x275687(0x250)](_0x4bea2f+_0x275687(0xe4))?'USDT':_0x275687(0x101),_0x4d1873=!allSymbols[_0x275687(0x250)](_0x4bea2f+_0x275687(0x233))?_0x23bd40:_0x275687(0x144);stablecoins={'eur':{'coin':''+_0x4bea2f+_0x4d1873,'symbol':_0x4bea2f+'/'+_0x4d1873},'usd':{'coin':''+_0x4bea2f+_0x23bd40,'symbol':_0x4bea2f+'/'+_0x23bd40}};}async function initwsCcxt(){const _0x2eb743=_0x1dbe6d;initCycle++;const _0x21717f=initCycle;let _0x1ee3cc=[];config['portfolio']['forEach'](_0x154c6d=>{const _0x1568ad=_0x5657;if(!_0x154c6d[_0x1568ad(0x1ac)]&&_0x154c6d[_0x1568ad(0x16b)]!=config[_0x1568ad(0xb5)])_0x1ee3cc[_0x1568ad(0xeb)](_0x154c6d[_0x1568ad(0x1a9)]);});if(!_0x1ee3cc[_0x2eb743(0x250)](stablecoins[_0x2eb743(0x1c1)][_0x2eb743(0x1a9)]))_0x1ee3cc[_0x2eb743(0xeb)](stablecoins['eur'][_0x2eb743(0x1a9)]);if(!_0x1ee3cc[_0x2eb743(0x250)](stablecoins['usd'][_0x2eb743(0x1a9)]))_0x1ee3cc[_0x2eb743(0xeb)](stablecoins[_0x2eb743(0x160)][_0x2eb743(0x1a9)]);if(config[_0x2eb743(0x266)][_0x2eb743(0xd0)]('Binance')&&config[_0x2eb743(0xb5)]!=_0x2eb743(0xdb)){if(!_0x1ee3cc[_0x2eb743(0x250)](_0x2eb743(0x1e4)+config[_0x2eb743(0xb5)]))_0x1ee3cc['push'](_0x2eb743(0x1e4)+config[_0x2eb743(0xb5)]);}loadCoins(_0x1ee3cc),_0x1ee3cc=validateSymbols(_0x1ee3cc);const _0x2e2fac=async _0x7a62d2=>{const _0x5e1232=_0x2eb743;let _0xbe03eb;try{const _0xb6c586=await getTickers(_0x7a62d2);Object[_0x5e1232(0x129)](_0xb6c586)[_0x5e1232(0x141)](_0x1a8599=>{const _0x4831ce=_0x5e1232;_0xbe03eb=_0x1a8599[0x1][_0x4831ce(0x1a9)],gTicker[noslash(_0xbe03eb)]=_0x1a8599[0x1][_0x4831ce(0x110)],gChange[_0xbe03eb]=_0x1a8599[0x1]['percentage'];});}catch(_0xe1c3a5){await handleError(_0xe1c3a5,_0x5e1232(0x16e),_0xbe03eb);}},_0x5ee8c8=async _0x223246=>{const _0x37df21=_0x2eb743;while(initCycle==_0x21717f){if(!botPaused)try{const _0x1ca67a=await exchange[_0x37df21(0x20f)](_0x223246);gTicker[noslash(_0x1ca67a[0x0][_0x37df21(0x1a9)])]=_0x1ca67a[0x0][_0x37df21(0x255)];}catch(_0x3afcf5){if(!exchangeStopped)await handleError(_0x3afcf5,_0x37df21(0xa4),_0x223246);}else await sleep(0x64);}},_0x5246c0=async _0x1a53fe=>{const _0x494811=_0x2eb743;while(initCycle==_0x21717f){if(!botPaused)try{const _0x3740b8=await exchange[_0x494811(0x163)](_0x1a53fe),_0x423be5=_0x3740b8['pop']();gTicker[noslash(_0x423be5[_0x494811(0x1a9)])]=_0x423be5[_0x494811(0x255)];}catch(_0x3c43b1){if(!exchangeStopped)await handleError(_0x3c43b1,'watchTradesForSymbols()',_0x1a53fe['toString']());}else await sleep(0x64);}},_0x53accb=async _0xba2b5d=>{const _0x47d54b=_0x2eb743;while(initCycle==_0x21717f){if(!botPaused){let _0x5ac825;try{await sleep(0x3c*0x3e8);const _0x477ed8=await getTickers(_0xba2b5d);Object[_0x47d54b(0x129)](_0x477ed8)[_0x47d54b(0x141)](_0x53ad96=>{const _0x16ee06=_0x47d54b;_0x5ac825=_0x53ad96[0x1][_0x16ee06(0x1a9)],gChange[_0x5ac825]=_0x53ad96[0x1]['percentage'];});}catch(_0x21559e){if(!exchangeStopped)await handleError(_0x21559e,_0x47d54b(0xcc),_0x5ac825);}}else await sleep(0x64);}},_0x28565f=async _0x3f2ac4=>{const _0x1f4e6d=_0x2eb743;while(initCycle==_0x21717f){if(!botPaused)try{const _0x21ed54=await exchange[_0x1f4e6d(0x256)](_0x3f2ac4);initCycle==_0x21717f&&_0x21ed54[_0x1f4e6d(0x141)](_0x193def=>{updateNumberCoinsCcxt(_0x193def);});}catch(_0x4a22f7){if(!exchangeStopped)await handleError(_0x4a22f7,_0x1f4e6d(0x1f2));}else await sleep(0x64);}};_0x2e2fac(_0x1ee3cc),_0x53accb(_0x1ee3cc),exchange['has'][_0x2eb743(0x163)]&&!(config[_0x2eb743(0x266)]==_0x2eb743(0x1d9)&&_0x1ee3cc[_0x2eb743(0xd9)]>0xa)?_0x5246c0(_0x1ee3cc):_0x1ee3cc['forEach'](_0x5c8ef2=>{_0x5ee8c8(_0x5c8ef2);}),_0x1ee3cc['forEach'](_0x15b116=>{_0x28565f(_0x15b116);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x302ebd){const _0x3349a4=_0x1dbe6d;let _0x231741={};try{if(config[_0x3349a4(0x266)]!=_0x3349a4(0x1f5))_0x231741=await exchange['fetchTickers'](_0x302ebd);else for(const _0x3ef1cc of _0x302ebd){const _0x5b3247=await exchange[_0x3349a4(0x1e1)](_0x3ef1cc);_0x231741[_0x3ef1cc]=_0x5b3247;}return _0x231741;}catch(_0x5cbaed){throw _0x5cbaed;}}function setBlockTransactionDetection(_0x3858b6){const _0x2898b9=_0x1dbe6d;blockTransactionDetection=_0x3858b6,logger[_0x2898b9(0x1f9)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x5b949f=0x0){const _0x512801=_0x1dbe6d;transactionDetectionOngoing=!![];try{const _0x5733da=await getCoins(_0x5b949f),[_0x5a4479,_0x13ea2c]=_0x5733da;let _0x7dc22f=[];currentCoins[_0x512801(0x141)](_0x138b84=>{const _0x26e159=_0x512801,_0xfcdfbb=_0x5a4479[_0x26e159(0x14b)](_0x45770b=>_0x45770b[_0x26e159(0x16b)]==_0x138b84[_0x26e159(0x16b)]);if(_0xfcdfbb){if(_0x138b84[_0x26e159(0x13a)]!=_0xfcdfbb['number']){let _0x347721;if(_0x138b84['coin']!=config[_0x26e159(0xb5)]){const _0x3cc976=gTicker[noslash(_0x138b84[_0x26e159(0x1a9)])];_0x347721=_0x138b84[_0x26e159(0x172)]?0x1/_0x3cc976:_0x3cc976;}else _0x347721=0x1;_0x7dc22f['push']({'coin':_0x138b84[_0x26e159(0x16b)],'symbol':_0x138b84[_0x26e159(0x1a9)],'price':_0x347721,'number':Number(formatResult(_0xfcdfbb[_0x26e159(0x13a)]-_0x138b84[_0x26e159(0x13a)],0x8)),'basecoinvalue':_0x347721*(_0xfcdfbb['number']-_0x138b84[_0x26e159(0x13a)])});}}});if(_0x7dc22f[_0x512801(0xd9)]>0x0&&!blockTransactionDetection)for(const _0x565d3b of _0x7dc22f){if(config[_0x512801(0x148)]){logger['debug'](_0x512801(0x244)+_0x565d3b['basecoinvalue']+_0x512801(0x168)+lastFees[_0x512801(0x1c0)]);if(lastFees[_0x512801(0x1c0)]==0x0||Math['abs'](_0x565d3b[_0x512801(0x186)])>lastFees[_0x512801(0x1c0)]*1.2){if(config[_0x512801(0x148)]==_0x512801(0xe5)){delete _0x565d3b[_0x512801(0x1a9)],delete _0x565d3b[_0x512801(0x186)];let _0x11c98f=[],_0x4a6995=[...config['liquidity']]||[],_0x1ef286=config['liquidity'];_0x4a6995[_0x512801(0x183)]((_0x4b6f59,_0x4aab38)=>_0x4b6f59[_0x512801(0x224)]>_0x4aab38[_0x512801(0x224)]?-0x1:_0x4aab38[_0x512801(0x224)]>_0x4b6f59[_0x512801(0x224)]?0x1:0x0);const _0x3aa8b6=getDate();if(_0x4a6995[0x0]){const _0xedc085=fns['parse'](_0x4a6995[0x0]['date'],_0x512801(0x161),new Date()),_0x229b0e=fns['parse'](_0x3aa8b6,_0x512801(0x161),new Date());if(fns[_0x512801(0x1e5)](_0xedc085,_0x229b0e)){_0x11c98f=_0x4a6995[0x0][_0x512801(0x246)];const _0x277c60=_0x11c98f['find'](_0x3f2cf9=>_0x3f2cf9[_0x512801(0x16b)]==_0x565d3b['coin']);_0x277c60?(_0x277c60[_0x512801(0x13a)]+=_0x565d3b[_0x512801(0x13a)],_0x277c60[_0x512801(0x13a)]==0x0&&(_0x11c98f=_0x11c98f[_0x512801(0x1fe)](_0x2acf54=>{const _0x58de1c=_0x512801;return _0x2acf54[_0x58de1c(0x16b)]!=_0x565d3b[_0x58de1c(0x16b)];}))):_0x11c98f['push'](_0x565d3b);const _0x1a407a=_0x1ef286[_0x512801(0x14b)](_0x4c2eae=>_0x4c2eae[_0x512801(0x224)]==_0x3aa8b6);_0x1a407a[_0x512801(0x246)]=_0x11c98f;}else _0x1ef286[_0x512801(0xeb)]({'date':_0x3aa8b6,'changes':[_0x565d3b]});}const _0x2b2942=_0x1ef286[_0x512801(0x14b)](_0xc66e7=>_0xc66e7[_0x512801(0x224)]==_0x3aa8b6);if(_0x2b2942){let _0x121c16=!![];_0x2b2942[_0x512801(0x246)]['forEach'](_0x12ca3d=>{if(_0x12ca3d['number']!=0x0)_0x121c16=![];}),_0x121c16&&(_0x1ef286=_0x1ef286[_0x512801(0x1fe)](_0x34d564=>{const _0x46c9a5=_0x512801;return _0x34d564[_0x46c9a5(0x224)]!=_0x3aa8b6;}));}let _0x219f2b=dbConfig[_0x512801(0x1a8)]('bot')['find']({'botID':botID})[_0x512801(0x1f6)]();_0x219f2b&&(dbConfig[_0x512801(0x1a8)](_0x512801(0x191))[_0x512801(0x14b)]({'botID':botID})[_0x512801(0x117)]({'liquidity':_0x1ef286})[_0x512801(0xa3)](),config[_0x512801(0x182)]=_0x1ef286);logHistory(_0x512801(0x13f),_0x512801(0x1be)+Math[_0x512801(0x25e)](_0x565d3b[_0x512801(0x13a)])+'\x20'+_0x565d3b[_0x512801(0x16b)]+'\x20'+(_0x565d3b[_0x512801(0x13a)]>0x0?_0x512801(0x188):_0x512801(0x1c2))+_0x512801(0x108)),proxyEmit(_0x512801(0x1b9),emittedConfiguration());const _0x1521bb=getNormalizedPerformance();emitPerformance(_0x1521bb),getStartingBalances(_0x1521bb),logger[_0x512801(0x1f9)](_0x512801(0xd2));}else config[_0x512801(0x148)]==_0x512801(0x1a7)&&(config[_0x512801(0x1c9)]?(await storeHeadless({'headless':![]}),logHistory('success',_0x512801(0x1be)+Math[_0x512801(0x25e)](_0x565d3b['number'])+'\x20'+_0x565d3b[_0x512801(0x16b)]+'\x20'+(_0x565d3b[_0x512801(0x13a)]>0x0?'added':_0x512801(0x1c2))+_0x512801(0x257))):logger['debug'](_0x512801(0x1be)+Math['abs'](_0x565d3b['number'])+'\x20'+_0x565d3b['coin']+'\x20'+(_0x565d3b[_0x512801(0x13a)]>0x0?_0x512801(0x188):'removed')+_0x512801(0x240)));}else logger[_0x512801(0x1f9)](_0x512801(0x1cc)+Math['abs'](_0x565d3b[_0x512801(0x13a)])+'\x20'+_0x565d3b['coin']+'\x20'+(_0x565d3b[_0x512801(0x13a)]>0x0?_0x512801(0x188):'removed'));}else logger[_0x512801(0x1f9)]('Portfolio\x20change\x20detected:\x20'+Math[_0x512801(0x25e)](_0x565d3b[_0x512801(0x13a)])+'\x20'+_0x565d3b['coin']+'\x20'+(_0x565d3b[_0x512801(0x13a)]>0x0?_0x512801(0x188):_0x512801(0x1c2))+_0x512801(0x18a));}currentCoins=_0x5a4479,currentCoinsAll=_0x13ea2c;}catch(_0xe53159){if(!exchangeStopped)await handleError(_0xe53159,_0x512801(0x107));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x55a427=_0x1dbe6d;try{markets=await exchange['loadMarkets']();}catch(_0x5a545a){logger[_0x55a427(0x1f9)](_0x55a427(0x11e)+_0x5a545a['toString']());if(markets){}else logHistory(_0x55a427(0x153),_0x55a427(0x12e)),logHistory(_0x55a427(0x153),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x55a427(0x119)),logger[_0x55a427(0x1f9)](_0x55a427(0x1dd),_0x5a545a),loading[_0x55a427(0x1dc)]=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object[_0x55a427(0x129)](markets)['forEach'](_0x1eb2d5=>{const _0x4d5427=_0x55a427;_0x1eb2d5[0x1][_0x4d5427(0x189)]&&_0x1eb2d5[0x1][_0x4d5427(0x11c)]&&allSymbols[_0x4d5427(0xeb)](_0x1eb2d5[0x0]);});}function validateSymbols(_0x18bdec){const _0x3cf458=_0x1dbe6d;let _0xc314f5=[];return _0x18bdec[_0x3cf458(0x141)](_0x573852=>{const _0x51cb78=_0x3cf458;!allSymbols['includes'](_0x573852)?logHistory('error',_0x51cb78(0x1ed)+_0x573852+_0x51cb78(0x157)):_0xc314f5[_0x51cb78(0xeb)](_0x573852);}),_0xc314f5;}async function initclient(){const _0x19513b=_0x1dbe6d;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x19513b(0x209),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x19513b(0xce),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x350a38=getNormalizedPerformance();emitPerformance(_0x350a38),getStartingBalances(_0x350a38);}async function toggleBotMode(){const _0x303725=_0x1dbe6d;let _0x2e2d82=dbConfig['get'](_0x303725(0x191))[_0x303725(0x14b)]({'botID':botID})[_0x303725(0x1f6)]();if(_0x2e2d82){const _0x99be64=!_0x2e2d82[_0x303725(0x1c9)];dbConfig[_0x303725(0x1a8)](_0x303725(0x191))['find']({'botID':botID})['assign']({'headless':_0x99be64})[_0x303725(0xa3)](),config[_0x303725(0x1c9)]=_0x99be64,proxyEmit(_0x303725(0x1b9),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x9a2fe=_0x1dbe6d;process['send']({'updatebotmanager':!![]},_0x1d7b8a=>{}),logger['debug'](_0x9a2fe(0x203)+config[_0x9a2fe(0x1c9)]);}async function loadCoins(_0x2174d7){const _0x194ea3=_0x1dbe6d;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x49541b,_0x172485=0x0,_0xfa042b=0x0;_0x2174d7[_0x194ea3(0x141)](_0x5cf96b=>{const _0x51643d=_0x194ea3;loading[_0x51643d(0x1f3)]['push'](_0x5cf96b);}),loadingCanceled=![];let _0x2e3560=![];while(_0x49541b!=_0x2174d7[_0x194ea3(0xd9)]+maxLoadingProgress){_0x49541b=loadingProgress,_0x2174d7['forEach'](_0x258ccf=>{const _0x5dda4c=_0x194ea3;if(gTicker[noslash(_0x258ccf)]){loading[_0x5dda4c(0x1f3)]=loading[_0x5dda4c(0x1f3)][_0x5dda4c(0x1fe)](_0x28494d=>_0x28494d!=_0x258ccf);if(!watchedSymbols[_0x5dda4c(0x250)](_0x258ccf))watchedSymbols[_0x5dda4c(0xeb)](_0x258ccf);_0x49541b++;}}),loading[_0x194ea3(0x1a4)]=Math[_0x194ea3(0x24c)](_0x49541b/(_0x2174d7[_0x194ea3(0xd9)]+maxLoadingProgress)*0x64);loading[_0x194ea3(0x1a4)]!=0x64&&(_0xfa042b>0x1e*0x5&&(loading[_0x194ea3(0xcd)]=!![],emitLoadingProgress()),_0xfa042b>0x78*0x5&&!_0x2e3560&&(_0x2e3560=!![],logHistory('error','Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x194ea3(0x1f3)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x194ea3(0x153),_0x194ea3(0x124)+loadCoinsRetryInterval/0xea60+_0x194ea3(0x119)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x194ea3(0x1dc)]=!![],emitLoadingProgress();break;}else _0x172485!=loading[_0x194ea3(0x1a4)]&&(_0x172485=loading[_0x194ea3(0x1a4)],emitLoadingProgress()),_0xfa042b++,await sleep(0xc8);}_0x49541b==_0x2174d7[_0x194ea3(0xd9)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x194ea3(0x25b)]({'status':_0x194ea3(0x237),'live':_0x194ea3(0x100)},_0x151c25=>{}),_0x2e3560&&logHistory(_0x194ea3(0x13f),_0x194ea3(0xed)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0xafd593=_0x1dbe6d;proxyEmit(_0xafd593(0x1b9),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x232ea7=_0x1dbe6d;proxyEmit(_0x232ea7(0x10c),loading);}async function getFiat(){const _0x3bec6c=_0x1dbe6d;let _0xe498f5=gTicker[stablecoins[_0x3bec6c(0x1c1)][_0x3bec6c(0x16b)]],_0xbad1bc=gTicker[stablecoins[_0x3bec6c(0x160)][_0x3bec6c(0x16b)]];return{'eur':Number(_0xe498f5),'usd':Number(_0xbad1bc)};}function capitalize(_0x17e793){const _0x1ac6e4=_0x1dbe6d;return _0x17e793[_0x1ac6e4(0x1da)](0x0,0x1)['toUpperCase']()+_0x17e793['substring'](0x1);}function supportedExchanges(){const _0x1c404a=_0x1dbe6d,_0x595182=['ws','fetchTickers',_0x1c404a(0x1e1),_0x1c404a(0x20f),'watchOrders',_0x1c404a(0x211),_0x1c404a(0x178),_0x1c404a(0x263),'fetchClosedOrders',_0x1c404a(0x216)];let _0x13e684=[],_0x1b45f0=[],_0x230c1c=ccxt[_0x1c404a(0x208)][_0x1c404a(0x209)];_0x230c1c[_0x1c404a(0x141)](_0x5d5535=>{const _0x39a4a3=_0x1c404a;try{const _0x3ad27c=new ccxt['pro'][_0x5d5535]();_0x1b45f0[_0x39a4a3(0xeb)](_0x3ad27c);}catch(_0x255190){}}),_0x1b45f0[_0x1c404a(0x141)](_0x548dd5=>{const _0x27d5d9=_0x1c404a;let _0x25ff90=0x0;_0x595182[_0x27d5d9(0x141)](_0x29a2da=>{const _0x117506=_0x27d5d9;_0x29a2da in _0x548dd5[_0x117506(0x199)]&&_0x548dd5[_0x117506(0x199)][_0x29a2da]&&_0x25ff90++;}),_0x25ff90==_0x595182[_0x27d5d9(0xd9)]&&_0x13e684[_0x27d5d9(0xeb)](capitalize(_0x548dd5['id']));});let _0x145102=[];return _0x230c1c['forEach'](_0x2760db=>{const _0x270b06=_0x1c404a;_0x2760db=capitalize(_0x2760db);if(!_0x13e684['includes'](_0x2760db))_0x145102[_0x270b06(0xeb)](_0x2760db);}),_0x13e684;}function setStartDatePerformance(){const _0x164bb3=_0x1dbe6d;if(config&&config[_0x164bb3(0x182)][0x0][_0x164bb3(0x246)][_0x164bb3(0xd9)]!=0x0){const _0x14ed09=config[_0x164bb3(0x182)][0x0]['changes'];dbPerformance[_0x164bb3(0x1a8)](_0x164bb3(0xe2))[_0x164bb3(0x14b)]({'date':config['startdate']})[_0x164bb3(0x117)]({'coins':_0x14ed09})[_0x164bb3(0xa3)]();}}async function recreateCoinResults(){const _0x503431=_0x1dbe6d;recreationNeeded=![];let _0x5560b5,_0x29e35f=[];try{for(const _0x591712 of currentCoins){if(_0x591712[_0x503431(0x16b)]!=config[_0x503431(0xb5)]){let _0xfb7b02=0x0,_0xfcd7f,_0x554fea;_0x5560b5=await getAllEventOrders(_0x591712[_0x503431(0x1a9)]);if(_0x5560b5[_0x503431(0xd9)]>0x0)_0x5560b5['forEach'](_0x4b1445=>{const _0x3dd80c=_0x503431,_0x2a2f6b=_0x591712[_0x3dd80c(0x1a9)][_0x3dd80c(0x250)](config[_0x3dd80c(0xb5)]+'/');_0x29e35f['push']({'datetime':_0x4b1445[_0x3dd80c(0xa7)],'coin':_0x591712[_0x3dd80c(0x16b)],'symbol':_0x591712['symbol'],'side':_0x4b1445[_0x3dd80c(0x1cb)],'reverse':_0x2a2f6b,'amount':formatResult(_0x4b1445['filled'],0x8),'filled':formatResult(_0x4b1445[_0x3dd80c(0x114)],0x8),'price':formatResult(_0x4b1445[_0x3dd80c(0x255)],0x8)}),_0xfb7b02=_0x4b1445[_0x3dd80c(0x1cb)]==_0x3dd80c(0x185)?_0xfb7b02+_0x4b1445[_0x3dd80c(0x114)]:_0xfb7b02-_0x4b1445[_0x3dd80c(0x114)];if(!_0x554fea)_0x554fea=_0x4b1445[_0x3dd80c(0x255)];});_0xfcd7f=_0x591712[_0x503431(0x13a)]-_0xfb7b02;let _0x1ab019;config['liquidity'][_0x503431(0x141)](_0x29704d=>{const _0x18ee44=_0x503431;!_0x1ab019&&(_0x1ab019=_0x29704d[_0x18ee44(0x246)][_0x18ee44(0x14b)](_0x387a69=>_0x387a69[_0x18ee44(0x16b)]==_0x591712['coin']),_0x1ab019&&(_0xfcd7f=_0x1ab019[_0x18ee44(0x13a)],_0x554fea=_0x1ab019[_0x18ee44(0x255)]));});let _0x122d66=dbCoinResults['get'](_0x503431(0xd8))['find']({'coin':_0x591712[_0x503431(0x16b)]})[_0x503431(0x1f6)]();_0x122d66={'coin':_0x591712[_0x503431(0x16b)],'number':_0xfcd7f,'breakeven':_0x554fea,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x503431(0x1a8)](_0x503431(0xd8))[_0x503431(0x14b)]({'coin':_0x591712[_0x503431(0x16b)]})['assign'](_0x122d66)['write']();}}_0x29e35f[_0x503431(0x183)]((_0xb6b33d,_0x3751c8)=>_0xb6b33d[_0x503431(0xa7)]>_0x3751c8[_0x503431(0xa7)]?0x1:_0x3751c8[_0x503431(0xa7)]>_0xb6b33d[_0x503431(0xa7)]?-0x1:0x0);let _0xdd47ec=0x0;for(let _0x2684af of _0x29e35f){await updateCoinResults(_0x2684af,!![]);}}catch(_0x130fff){await handleError(_0x130fff,_0x503431(0x249));}}async function getAllEventOrders(_0x57f236){const _0x3dca1b=_0x1dbe6d;let _0x2c5333=[],_0x439b09=dbLogs[_0x3dca1b(0x1a8)](_0x3dca1b(0x196))[_0x3dca1b(0x1fe)](_0x191d65=>{const _0x10720c=_0x3dca1b,_0x304a9e=_0x191d65['event'][_0x10720c(0x254)]();return _0x304a9e['includes'](_0x57f236[_0x10720c(0x254)]())&&(_0x304a9e[_0x10720c(0x250)]('market')&&_0x304a9e[_0x10720c(0x250)](_0x10720c(0x105))||_0x304a9e[_0x10720c(0x250)](_0x10720c(0x114))&&_0x304a9e[_0x10720c(0x250)](_0x10720c(0x105)));})[_0x3dca1b(0x155)]('time')[_0x3dca1b(0x1f6)]();return _0x439b09['forEach'](_0x506a57=>{const _0x183448=_0x3dca1b,_0x1b3b33=_0x506a57[_0x183448(0x251)][_0x183448(0x250)](_0x183448(0x1f4))?'sell':_0x183448(0x185),_0x2e1567=/#([0-9]|\.)+\s/i,_0x199926=Number(_0x2e1567[_0x183448(0x1b4)](_0x506a57['event'])[0x0]['slice'](0x1)),_0x3e4b80=/@([0-9]|\.)+$/i,_0x23707e=Number(_0x3e4b80[_0x183448(0x1b4)](_0x506a57[_0x183448(0x251)])[0x0][_0x183448(0x206)](0x1));_0x2c5333[_0x183448(0xeb)]({'datetime':_0x506a57['time'],'coin':symbolToCoin(_0x57f236),'symbol':_0x57f236,'side':_0x1b3b33,'amount':_0x199926,'filled':_0x199926,'price':_0x23707e});}),_0x2c5333;}async function getAllOrders(_0x454d02,_0x36654c){const _0x2be1a9=_0x1dbe6d;let _0x43476d=[];while(_0x36654c<exchange[_0x2be1a9(0xf8)]()){const _0x2cb34c=0x1f4;try{const _0x513837=await exchange[_0x2be1a9(0xe9)](_0x454d02,_0x36654c,_0x2cb34c);if(_0x513837[_0x2be1a9(0xd9)])_0x36654c=_0x513837[_0x513837[_0x2be1a9(0xd9)]-0x1][_0x2be1a9(0x22e)]+0x1,_0x43476d=_0x43476d[_0x2be1a9(0xb4)](_0x513837);else break;}catch(_0x2cb602){await handleError(_0x2cb602,'getAllOrders()',_0x454d02);}}return _0x43476d;}async function validate24hChanges(){const _0x410d4f=_0x1dbe6d;for(const _0x4ecb0d of currentCoins){if(_0x4ecb0d['coin']!=config['basecoin']){let _0x481c64;_0x4ecb0d[_0x410d4f(0x172)]?_0x481c64=formatResult((0x1/(gChange[_0x4ecb0d[_0x410d4f(0x1a9)]]/0x64+0x1)-0x1)*0x64,0x3):_0x481c64=gChange[_0x4ecb0d[_0x410d4f(0x1a9)]],_0x481c64<config[_0x410d4f(0xa5)]&&(logHistory('error',_0x4ecb0d[_0x410d4f(0x16b)]+_0x410d4f(0x24a)+_0x481c64+'%'),logHistory(_0x410d4f(0x153),_0x410d4f(0x1ea)),logHistory(_0x410d4f(0x153),_0x410d4f(0x1f8)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x246bbc,_0x4ee8e8){const _0xbce18d=_0x1dbe6d;if(!_0x246bbc)return!![];const _0x1d52f9=_0x4ee8e8[_0xbce18d(0x1c4)]('.'),_0x573835=_0x246bbc['split']('.');for(var _0x75672=0x0;_0x75672<_0x573835[_0xbce18d(0xd9)];_0x75672++){const _0x50f4c1=~~_0x573835[_0x75672],_0x4e0da6=~~_0x1d52f9[_0x75672];if(_0x50f4c1<_0x4e0da6)return!![];if(_0x50f4c1>_0x4e0da6)return![];}return![];}async function oneTimeMigration(){const _0x2f3f89=_0x1dbe6d;let _0x5f38da=dbLogs[_0x2f3f89(0x1a8)](_0x2f3f89(0x135))[_0x2f3f89(0x1f6)]();if(isOlderVersion(_0x5f38da,_0x2f3f89(0x1cf))){let _0x2b299e=[];const _0x60aa39=dbLogs[_0x2f3f89(0x1a8)](_0x2f3f89(0x196))[_0x2f3f89(0x1f6)]();_0x60aa39['forEach'](_0x17b60e=>{const _0x153448=_0x2f3f89;_0x2b299e[_0x153448(0xeb)]({'time':_0x17b60e[_0x153448(0x1db)],'type':_0x17b60e[_0x153448(0x1d7)],'event':_0x17b60e['event']});}),dbLogs[_0x2f3f89(0x1a8)](_0x2f3f89(0x196))[_0x2f3f89(0x117)](_0x2b299e)[_0x2f3f89(0xa3)]();}let _0x11807e=dbConfig['get'](_0x2f3f89(0x135))[_0x2f3f89(0x1f6)]();if(isOlderVersion(_0x11807e,_0x2f3f89(0x1cf))){let _0x4f137f=dbConfig['get'](_0x2f3f89(0x191))[_0x2f3f89(0x14b)]({'botID':botID})[_0x2f3f89(0x1f6)]();if(_0x4f137f){let _0x305f10=[];_0x4f137f[_0x2f3f89(0x10b)][_0x2f3f89(0x141)](_0x348127=>{const _0x44b3f8=_0x2f3f89;_0x305f10[_0x44b3f8(0xeb)]({'coin':_0x348127[_0x44b3f8(0x16b)],'number':_0x348127[_0x44b3f8(0x10e)],'price':_0x348127[_0x44b3f8(0xf5)]}),delete _0x348127[_0x44b3f8(0x10e)],delete _0x348127[_0x44b3f8(0xf5)];});if(_0x305f10[_0x2f3f89(0xd9)]!==0x0)fs[_0x2f3f89(0x12a)](configbackuppath+(_0x2f3f89(0x10f)+botID+'.json'),JSON['stringify'](_0x305f10,null,0x4),function(_0x103243){if(_0x103243){}});const _0x259729=(_0x554b4f,_0x35ac33)=>{const _0x4e63d6=_0x2f3f89;let _0x5a8850=[];_0x35ac33[_0x4e63d6(0x141)](_0x561abe=>{const _0x41b020=_0x4e63d6,_0x3c70d0=_0x554b4f[_0x41b020(0x14b)](_0x381792=>_0x381792['coin']==_0x561abe[_0x41b020(0x16b)]);if(!_0x3c70d0)_0x5a8850[_0x41b020(0xeb)](_0x561abe);});let _0x36aec3=[];return _0x554b4f[_0x4e63d6(0x141)](_0x357cfc=>{const _0x2ee8a4=_0x4e63d6,_0xea18df=_0x35ac33['find'](_0xc45979=>_0xc45979[_0x2ee8a4(0x16b)]==_0x357cfc['coin']);if(!_0xea18df||_0xea18df[_0x2ee8a4(0x13a)]==0x0&&_0x357cfc[_0x2ee8a4(0x13a)]!=0x0)_0x36aec3[_0x2ee8a4(0xeb)](_0x357cfc);}),{'missingDay1':_0x5a8850,'notInDay2':_0x36aec3};},_0x2961be=dbPerformance[_0x2f3f89(0x1a8)](_0x2f3f89(0xe2))[_0x2f3f89(0x21a)]()[_0x2f3f89(0x1f6)]();if(_0x2961be[_0x2f3f89(0xd9)]>0x1){const {missingDay1:_0x49e738,notInDay2:_0x5f3fb4}=_0x259729(_0x305f10,_0x2961be[0x1][_0x2f3f89(0xd8)]);_0x305f10=[..._0x305f10,..._0x49e738],_0x5f3fb4[_0x2f3f89(0x141)](_0x116c55=>{const _0x2dd63e=_0x2f3f89;let _0x1bebad=_0x305f10[_0x2dd63e(0x11a)](_0x41faaf=>_0x41faaf[_0x2dd63e(0x16b)]==_0x116c55[_0x2dd63e(0x16b)]);_0x1bebad!=-0x1&&_0x305f10['splice'](_0x1bebad,0x1);});}_0x305f10['sort']((_0x4cd335,_0x37615f)=>_0x4cd335[_0x2f3f89(0x16b)]>_0x37615f[_0x2f3f89(0x16b)]?0x1:_0x37615f['coin']>_0x4cd335[_0x2f3f89(0x16b)]?-0x1:0x0);let _0x1e99cc=[{'date':_0x4f137f['startdate'],'changes':_0x305f10}];_0x2961be[_0x2f3f89(0xd9)]>0x2&&_0x2961be[_0x2f3f89(0x141)]((_0x46ad78,_0x3bbf39)=>{const _0x2d3a69=_0x2f3f89;if(_0x3bbf39>0x0&&_0x3bbf39<_0x2961be['length']-0x1){const {missingDay1:_0x255952,notInDay2:_0x597ded}=_0x259729(_0x2961be[_0x3bbf39][_0x2d3a69(0xd8)],_0x2961be[_0x3bbf39+0x1][_0x2d3a69(0xd8)]);_0x305f10=[],(_0x255952[_0x2d3a69(0xd9)]!=0x0||_0x597ded[_0x2d3a69(0xd9)]!=0x0)&&(_0x255952[_0x2d3a69(0xd9)]!=0x0&&_0x305f10[_0x2d3a69(0xeb)](..._0x255952),_0x597ded[_0x2d3a69(0xd9)]!=0x0&&(_0x597ded['forEach'](_0x141751=>{const _0xd42a62=_0x2d3a69;_0x141751[_0xd42a62(0x13a)]=-_0x141751[_0xd42a62(0x13a)];}),_0x305f10[_0x2d3a69(0xeb)](..._0x597ded)),_0x305f10['sort']((_0x48298b,_0x570b9a)=>_0x48298b[_0x2d3a69(0x16b)]>_0x570b9a[_0x2d3a69(0x16b)]?0x1:_0x570b9a[_0x2d3a69(0x16b)]>_0x48298b['coin']?-0x1:0x0),_0x1e99cc[_0x2d3a69(0xeb)]({'date':_0x2961be[_0x3bbf39+0x1]['date'],'changes':_0x305f10}));}}),dbConfig[_0x2f3f89(0x1a8)](_0x2f3f89(0x191))[_0x2f3f89(0x14b)]({'botID':botID})['assign']({..._0x4f137f,'liquidity':_0x1e99cc})[_0x2f3f89(0xa3)]();}}if(isOlderVersion(_0x11807e,_0x2f3f89(0x218))){let _0x406ea1=dbConfig['get']('bot')['find']({'botID':botID})[_0x2f3f89(0x1f6)]();if(_0x406ea1){const _0x5b51b5=_0x406ea1['exchange'],_0x2cefbb=_0x5b51b5?capitalize(_0x5b51b5):'Binance';dbConfig['get']('bot')[_0x2f3f89(0x14b)]({'botID':botID})[_0x2f3f89(0x117)]({'exchange':_0x2cefbb})[_0x2f3f89(0xa3)]();}}if(isOlderVersion(_0x11807e,'2.6.22')){let _0x4ebc76=dbConfig[_0x2f3f89(0x1a8)](_0x2f3f89(0x191))[_0x2f3f89(0x14b)]({'botID':botID})[_0x2f3f89(0x1f6)]();if(_0x4ebc76){const _0x6c9e5=_0x4ebc76[_0x2f3f89(0x15c)],_0x172e2d=_0x6c9e5?_0x2f3f89(0xbb):![];dbConfig[_0x2f3f89(0x1a8)]('bot')[_0x2f3f89(0x14b)]({'botID':botID})[_0x2f3f89(0x117)]({'marketcapEnabled':_0x172e2d})[_0x2f3f89(0xa3)]();}}if(isOlderVersion(_0x11807e,_0x2f3f89(0x1bb))){let _0x4e186c=dbConfig[_0x2f3f89(0x1a8)](_0x2f3f89(0x191))['find']({'botID':botID})[_0x2f3f89(0x1f6)]();if(_0x4e186c){const _0x392117=_0x4e186c[_0x2f3f89(0x148)],_0xdf7f60=_0x392117?_0x2f3f89(0xe5):![];dbConfig[_0x2f3f89(0x1a8)](_0x2f3f89(0x191))['find']({'botID':botID})[_0x2f3f89(0x117)]({'autoliquidity':_0xdf7f60})[_0x2f3f89(0xa3)]();}}let _0x249cc6=dbPerformance[_0x2f3f89(0x1a8)](_0x2f3f89(0x135))[_0x2f3f89(0x1f6)]();isOlderVersion(_0x249cc6,'2.3.5')&&setStartDatePerformance();let _0x348d9c=dbCoinResults[_0x2f3f89(0x1a8)]('version')[_0x2f3f89(0x1f6)]();if(isOlderVersion(_0x348d9c,_0x2f3f89(0x253))){let _0x269d2f=dbCoinResults[_0x2f3f89(0x1a8)]('coins')[_0x2f3f89(0x1f6)]();if(_0x269d2f[_0x2f3f89(0xd9)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x87f710=_0x1dbe6d;dbConfig[_0x87f710(0x16c)](_0x87f710(0x135),serverversion)[_0x87f710(0xa3)](),dbPerformance[_0x87f710(0x16c)]('version',serverversion)[_0x87f710(0xa3)](),dbLogs[_0x87f710(0x16c)](_0x87f710(0x135),serverversion)['write'](),dbCoinResults[_0x87f710(0x16c)](_0x87f710(0x135),serverversion)['write']();}function getConfiguration(_0x457cae){const _0xcd488c=_0x1dbe6d;let _0x287c4a=dbConfig[_0xcd488c(0x1a8)](_0xcd488c(0x191))[_0xcd488c(0x14b)]({'botID':_0x457cae})[_0xcd488c(0x1f6)]();if(_0x287c4a){let _0x16d458=![];typeof _0x287c4a['threshold']=='string'&&(_0x287c4a={..._0x287c4a,'threshold':Number(_0x287c4a['threshold'])},_0x16d458=!![]),_0x287c4a[_0xcd488c(0xa5)]==undefined&&(_0x287c4a={..._0x287c4a,'change24h':-0x14},_0x16d458=!![]),_0x287c4a['fiat']==undefined&&(_0x287c4a={..._0x287c4a,'fiat':'USD'},_0x16d458=!![]),_0x287c4a[_0xcd488c(0x20c)]==undefined&&(_0x287c4a={..._0x287c4a,'onepagemode':settings[_0xcd488c(0x20c)]},_0x16d458=!![]),_0x287c4a[_0xcd488c(0xfb)]==undefined&&(_0x287c4a={..._0x287c4a,'colorscheme':_0xcd488c(0x15e)},_0x16d458=!![]),_0x287c4a[_0xcd488c(0x148)]==undefined&&(_0x287c4a={..._0x287c4a,'autoliquidity':'update-liquidity'},_0x16d458=!![]),_0x287c4a[_0xcd488c(0x177)]==undefined&&(_0x287c4a={..._0x287c4a,'marketcapApi':settings[_0xcd488c(0x177)]?!![]:![]},_0x16d458=!![]),_0x287c4a[_0xcd488c(0x15c)]==undefined&&(_0x287c4a={..._0x287c4a,'marketcapEnabled':![]},_0x16d458=!![]),_0x16d458&&(_0x287c4a={'botID':_0x287c4a['botID'],'exchange':_0x287c4a[_0xcd488c(0x266)],'apiKey':_0x287c4a[_0xcd488c(0x23c)],'apiSecret':_0x287c4a[_0xcd488c(0x213)],'apiPassword':_0x287c4a[_0xcd488c(0x16f)],'basecoin':_0x287c4a[_0xcd488c(0xb5)],'botname':_0x287c4a[_0xcd488c(0xdf)],'showname':_0x287c4a['showname'],'threshold':_0x287c4a[_0xcd488c(0xe1)],'ordertype':_0x287c4a[_0xcd488c(0xc2)],'timeout':_0x287c4a[_0xcd488c(0xcd)],'fiat':_0x287c4a['fiat'],'startdate':_0x287c4a[_0xcd488c(0xbc)],'recreate':_0x287c4a['recreate'],'timeshift':_0x287c4a['timeshift'],'onepagemode':_0x287c4a[_0xcd488c(0x20c)],'headless':_0x287c4a[_0xcd488c(0x1c9)],'cooldown':_0x287c4a[_0xcd488c(0xe8)],'change24h':_0x287c4a[_0xcd488c(0xa5)],'emojibuy':_0x287c4a[_0xcd488c(0x25c)],'emojisell':_0x287c4a['emojisell'],'colorscheme':_0x287c4a[_0xcd488c(0xfb)],'marketcapApi':_0x287c4a[_0xcd488c(0x177)],'marketcapEnabled':_0x287c4a[_0xcd488c(0x15c)],'portfolio':_0x287c4a['portfolio'],'autoliquidity':_0x287c4a[_0xcd488c(0x148)],'liquidity':_0x287c4a[_0xcd488c(0x182)],'openOrders':_0x287c4a['openOrders']},dbConfig[_0xcd488c(0x1a8)]('bot')[_0xcd488c(0x21f)]()[_0xcd488c(0xa3)](),dbConfig[_0xcd488c(0x1a8)]('bot')['push'](_0x287c4a)[_0xcd488c(0xa3)]());}else _0x287c4a={'botID':_0x457cae,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x457cae,'showname':![],'threshold':0x3,'ordertype':_0xcd488c(0x127),'timeout':0x14,'fiat':_0xcd488c(0x101),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0xcd488c(0x20c)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0xcd488c(0x15e),'marketcapApi':settings[_0xcd488c(0x177)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0xcd488c(0xe5),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x287c4a;}function emittedConfiguration(){const _0x3a158a=_0x1dbe6d;let _0x53c88e;if(config['apiKey']=='')_0x53c88e={...config,'configstate':_0x3a158a(0x22f)};else config[_0x3a158a(0x23c)]=='***'?_0x53c88e={...config,'configstate':_0x3a158a(0x200)}:(_0x53c88e={...config,'apiKey':_0x3a158a(0xf1),'apiSecret':_0x3a158a(0xf1)},config[_0x3a158a(0x16f)]&&(_0x53c88e['apiPassword']=_0x3a158a(0xf1)));return _0x53c88e;}function getSettings(){const _0x3090a5=_0x1dbe6d;return dbSettings[_0x3090a5(0x1a8)](_0x3090a5(0x23a))[_0x3090a5(0x1f6)]();}function getSecure(){const _0x48c152=_0x1dbe6d;return dbSecure[_0x48c152(0x1a8)]('secure')[_0x48c152(0x1f6)]()||{};}function updateTimeshift(_0x100e43){const _0x3a5ced=_0x1dbe6d;let _0x3f4c8b=dbConfig[_0x3a5ced(0x1a8)](_0x3a5ced(0x191))[_0x3a5ced(0x14b)]({'botID':botID})[_0x3a5ced(0x1f6)]();_0x3f4c8b&&dbConfig[_0x3a5ced(0x1a8)]('bot')['find']({'botID':botID})[_0x3a5ced(0x117)]({'timeshift':_0x100e43})['write'](),config[_0x3a5ced(0x258)]=_0x100e43,proxyEmit(_0x3a5ced(0x1b9),emittedConfiguration());}function updateOnepagemode(_0x5a44d1){const _0x174c53=_0x1dbe6d;let _0x4fb45b=dbConfig[_0x174c53(0x1a8)](_0x174c53(0x191))['find']({'botID':botID})[_0x174c53(0x1f6)]();_0x4fb45b&&dbConfig[_0x174c53(0x1a8)](_0x174c53(0x191))[_0x174c53(0x14b)]({'botID':botID})[_0x174c53(0x117)]({'onepagemode':_0x5a44d1})['write'](),config[_0x174c53(0x20c)]=_0x5a44d1,proxyEmit(_0x174c53(0x1b9),emittedConfiguration());}function updateMarketcapApi(_0x11f241){const _0xf98dfa=_0x1dbe6d,_0x417352=_0x11f241?!![]:![];let _0xf08d27=dbConfig[_0xf98dfa(0x1a8)]('bot')[_0xf98dfa(0x14b)]({'botID':botID})[_0xf98dfa(0x1f6)]();_0xf08d27&&dbConfig[_0xf98dfa(0x1a8)]('bot')['find']({'botID':botID})['assign']({'marketcapApi':_0x417352})[_0xf98dfa(0xa3)](),config[_0xf98dfa(0x177)]=_0x417352,getMarketCap(),proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x5ab78c){const _0x474f32=_0x1dbe6d;logger[_0x474f32(0x1f9)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x4bdef7=![],_0x41cfe1=![],_0x488d88=[];_0x5ab78c[_0x474f32(0x10b)][_0x474f32(0x141)](_0x457b68=>{const _0x53b312=_0x474f32;if(!_0x457b68[_0x53b312(0x1ac)]&&_0x457b68['coin']!=_0x5ab78c[_0x53b312(0xb5)])_0x488d88[_0x53b312(0xeb)](_0x457b68[_0x53b312(0x1a9)]);}),_0x488d88[_0x474f32(0x141)](_0x575dc6=>{const _0x4d82f5=_0x474f32,_0x14fed6=currentCoins[_0x4d82f5(0x14b)](_0x3e1b58=>_0x3e1b58[_0x4d82f5(0x1a9)]==_0x575dc6);!_0x14fed6&&(_0x4bdef7=!![]);}),currentCoins[_0x474f32(0x141)](_0x153215=>{const _0x3e9a66=_0x474f32;if(_0x153215[_0x3e9a66(0x16b)]!=config[_0x3e9a66(0xb5)]){const _0x2e6b5c=_0x488d88[_0x3e9a66(0x14b)](_0x1059ee=>_0x1059ee==_0x153215[_0x3e9a66(0x1a9)]);!_0x2e6b5c&&(_0x4bdef7=!![]);}}),_0x5ab78c['portfolio'][_0x474f32(0x141)](_0x259f6e=>{const _0x351cd9=_0x474f32,_0x1c09ba=config[_0x351cd9(0x10b)]['find'](_0x2729de=>_0x2729de[_0x351cd9(0x16b)]==_0x259f6e[_0x351cd9(0x16b)]);if(_0x1c09ba&&_0x259f6e['offset']!=_0x1c09ba['offset'])_0x41cfe1=!![];});let _0x42eb8e=dbConfig['get']('bot')['find']({'botID':botID})['value']();_0x5ab78c={..._0x5ab78c,'apiKey':crypt[_0x474f32(0x21d)](secure['privateKey'],_0x5ab78c[_0x474f32(0x23c)])[_0x474f32(0x1b8)],'apiSecret':crypt[_0x474f32(0x21d)](secure[_0x474f32(0xd1)],_0x5ab78c[_0x474f32(0x213)])[_0x474f32(0x1b8)]};_0x5ab78c[_0x474f32(0x16f)]&&(_0x5ab78c['apiPassword']=crypt['decrypt'](secure[_0x474f32(0xd1)],_0x5ab78c[_0x474f32(0x16f)])[_0x474f32(0x1b8)]);let _0x40eb04=![];if(_0x42eb8e){_0x5ab78c[_0x474f32(0x23c)]==_0x474f32(0xf1)?_0x5ab78c[_0x474f32(0x23c)]=config[_0x474f32(0x23c)]:_0x40eb04=!![];_0x5ab78c[_0x474f32(0x213)]==_0x474f32(0xf1)?_0x5ab78c['apiSecret']=config['apiSecret']:_0x40eb04=!![];if(_0x5ab78c[_0x474f32(0x16f)]==_0x474f32(0xf1))_0x5ab78c['apiPassword']=config[_0x474f32(0x16f)];else{if(_0x5ab78c[_0x474f32(0x16f)])_0x40eb04=!![];}dbConfig[_0x474f32(0x1a8)]('bot')[_0x474f32(0x14b)]({'botID':botID})[_0x474f32(0x117)](_0x5ab78c)[_0x474f32(0xa3)]();}else dbConfig['get'](_0x474f32(0x191))[_0x474f32(0xeb)](_0x5ab78c)[_0x474f32(0xa3)](),_0x40eb04=!![],process[_0x474f32(0x25b)]({'status':_0x474f32(0x237),'live':_0x474f32(0x100)},_0x5cf7f0=>{});process['send']({'botname':_0x5ab78c['botname']},_0x1ea36a=>{}),config={..._0x5ab78c},updateBotManager(),proxyEmit(_0x474f32(0x24d)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x40eb04)!_0x42eb8e?await reset(!![]):getBalances();else _0x4bdef7||_0x41cfe1?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1721a0){const _0x5ba476=_0x1dbe6d,_0x59e729={...config,'headless':_0x1721a0['headless']};let _0x50cd70=dbConfig[_0x5ba476(0x1a8)]('bot')[_0x5ba476(0x14b)]({'botID':botID})[_0x5ba476(0x1f6)]();_0x50cd70&&dbConfig[_0x5ba476(0x1a8)](_0x5ba476(0x191))[_0x5ba476(0x14b)]({'botID':botID})['assign'](_0x59e729)[_0x5ba476(0xa3)](),config={..._0x59e729},updateBotManager(),proxyEmit(_0x5ba476(0x1b9),emittedConfiguration());}async function storeFiat(_0x40dc56){const _0x5aa1ac=_0x1dbe6d,_0x42ee97={...config,'fiat':_0x40dc56};let _0x1fe8fb=dbConfig['get'](_0x5aa1ac(0x191))[_0x5aa1ac(0x14b)]({'botID':botID})[_0x5aa1ac(0x1f6)]();_0x1fe8fb&&dbConfig[_0x5aa1ac(0x1a8)](_0x5aa1ac(0x191))['find']({'botID':botID})['assign'](_0x42ee97)[_0x5aa1ac(0xa3)](),config={..._0x42ee97},proxyEmit(_0x5aa1ac(0x1b9),emittedConfiguration());}function resetHistory(){const _0x1f4d2f=_0x1dbe6d;logger['full'](_0x1f4d2f(0x204));try{if(fs[_0x1f4d2f(0x1b0)](path['join'](configpath,'bot-'+botID+_0x1f4d2f(0x1a6))))fs['unlinkSync'](path[_0x1f4d2f(0x1bf)](configpath,_0x1f4d2f(0x17b)+botID+_0x1f4d2f(0x1a6)));if(fs[_0x1f4d2f(0x1b0)](path['join'](configpath,_0x1f4d2f(0x17b)+botID+_0x1f4d2f(0x20a))))fs[_0x1f4d2f(0x1fa)](path[_0x1f4d2f(0x1bf)](configpath,_0x1f4d2f(0x17b)+botID+_0x1f4d2f(0x20a)));if(fs[_0x1f4d2f(0x1b0)](path[_0x1f4d2f(0x1bf)](configpath,_0x1f4d2f(0x17b)+botID+_0x1f4d2f(0xcb))))fs[_0x1f4d2f(0x1fa)](path[_0x1f4d2f(0x1bf)](configpath,_0x1f4d2f(0x17b)+botID+_0x1f4d2f(0xcb)));}catch(_0x48d5e5){if(_0x48d5e5)logger[_0x1f4d2f(0xd6)](_0x1f4d2f(0x14d),_0x48d5e5);}const _0x464b8b=getDate();let _0x19bffd=[];currentCoins[_0x1f4d2f(0x141)](_0x4cfd81=>{const _0x49ce17=_0x1f4d2f;_0x19bffd['push']({'coin':_0x4cfd81[_0x49ce17(0x16b)],'number':_0x4cfd81['number'],'price':_0x4cfd81['last']});});let _0x3dceb6=dbConfig[_0x1f4d2f(0x1a8)](_0x1f4d2f(0x191))[_0x1f4d2f(0x14b)]({'botID':botID})['value']();_0x3dceb6&&(dbConfig['get']('bot')[_0x1f4d2f(0x14b)]({'botID':botID})[_0x1f4d2f(0x117)]({'liquidity':[{'date':_0x464b8b,'changes':_0x19bffd}]})[_0x1f4d2f(0xa3)](),config[_0x1f4d2f(0x182)]=[]),restartBot(!![]);}function noslash(_0x28c816){const _0x304af3=_0x1dbe6d;return _0x28c816[_0x304af3(0x1d4)]('/','');}function updateHighestFee(_0x3aeacd){const _0x3b4ffc=_0x1dbe6d;if(_0x3aeacd[_0x3b4ffc(0x172)]){let _0x554748={'filled':_0x3aeacd[_0x3b4ffc(0x114)]*_0x3aeacd[_0x3b4ffc(0x255)],'amount':_0x3aeacd[_0x3b4ffc(0x114)]*_0x3aeacd['price'],'side':_0x3aeacd[_0x3b4ffc(0x1cb)]==_0x3b4ffc(0x1f4)?_0x3b4ffc(0x185):_0x3b4ffc(0x1f4),'price':0x1/_0x3aeacd[_0x3b4ffc(0x255)]};_0x3aeacd={..._0x3aeacd,..._0x554748};}const _0x393add=defaultFee*_0x3aeacd[_0x3b4ffc(0x114)]*_0x3aeacd['price'];lastFees[_0x3b4ffc(0x149)][_0x3b4ffc(0xd9)]===0x14&&lastFees[_0x3b4ffc(0x149)][_0x3b4ffc(0x1ee)](),lastFees[_0x3b4ffc(0x149)][_0x3b4ffc(0xeb)](_0x393add),lastFees[_0x3b4ffc(0x1c0)]=Math[_0x3b4ffc(0x111)](...lastFees[_0x3b4ffc(0x149)]);}async function updateNumberCoinsCcxt(_0x47ec9d){const _0xf75b56=_0x1dbe6d;logger[_0xf75b56(0x1f9)](_0xf75b56(0x112)+_0x47ec9d[_0xf75b56(0x1a9)]+'\x20|\x20'+_0x47ec9d[_0xf75b56(0x21e)]+_0xf75b56(0x14a)+_0x47ec9d[_0xf75b56(0x114)]+_0xf75b56(0xdc)+_0x47ec9d[_0xf75b56(0xc9)]+_0xf75b56(0x14a)+_0x47ec9d['id']);let _0x4f158b=_0x47ec9d[_0xf75b56(0x21e)],_0x503526=![];currentCoins[_0xf75b56(0x141)](_0x1df7c7=>{_0x1df7c7['symbol']==_0x47ec9d['symbol']&&(_0x503526=!![]);});if(!_0x503526)return;const _0x555222=currentCoins[_0xf75b56(0x14b)](_0x4cb8e1=>_0x4cb8e1[_0xf75b56(0x1a9)]==_0x47ec9d[_0xf75b56(0x1a9)]),_0x2e29d2=_0x498851=>{const _0x57b4c7=_0xf75b56;if(_0x555222)_0x555222[_0x57b4c7(0x1fb)]=_0x498851;};let _0x113ff3=![];for(const _0x218f23 of lastOrders){const _0x3771c9=0x64,_0xd3a10f=0x1388;let _0x24ee71=0x0;while(!_0x218f23['orderId']&&_0x24ee71*_0x3771c9<_0xd3a10f){_0x24ee71++,await sleep(_0x3771c9);}if(_0x24ee71>0x0)logger[_0xf75b56(0x1f9)](_0xf75b56(0x1bc)+_0x24ee71*_0x3771c9/0x3e8+_0xf75b56(0x1a3));_0x218f23[_0xf75b56(0x179)]==_0x47ec9d['id']&&(_0x113ff3=!![]);}if(_0x4f158b==_0xf75b56(0x22c)){_0x2e29d2('open');if(_0x47ec9d[_0xf75b56(0x114)]>0x0){if(_0x113ff3){setBlockTransactionDetection(!![]),logger[_0xf75b56(0x1f9)](_0xf75b56(0x1ae)+_0x47ec9d['id']);const _0x3b008d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3b008d,setBlockTransactionDetection(![]);}else logger[_0xf75b56(0x1f9)](_0xf75b56(0x123)+_0x47ec9d['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x4f158b==_0xf75b56(0x138)){_0x2e29d2(_0xf75b56(0x138));const _0x363cd4=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x363cd4,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x4f158b==_0xf75b56(0xc4)){if(lastOrders)for(const _0x37fc3c of lastOrders){if(_0x37fc3c[_0xf75b56(0x179)]==_0x47ec9d['id']){logger[_0xf75b56(0x1f9)](_0xf75b56(0x220)+_0x47ec9d['id']),_0x113ff3=!![];if(_0x37fc3c[_0xf75b56(0x114)]==0x0){setBlockTransactionDetection(!![]),logger[_0xf75b56(0x1f9)](_0xf75b56(0x130)+_0x47ec9d['id']);if(_0x47ec9d[_0xf75b56(0x143)])_0x37fc3c[_0xf75b56(0x255)]=_0x47ec9d[_0xf75b56(0x143)];else{if(_0x47ec9d[_0xf75b56(0x255)])_0x37fc3c[_0xf75b56(0x255)]=_0x47ec9d['price'];else{}}_0x37fc3c['filled']=_0x47ec9d[_0xf75b56(0x114)],updateHighestFee(_0x37fc3c),_0x2e29d2(_0xf75b56(0x114)),await validateOrders();if(lockOrders==ORDERS[_0xf75b56(0x23e)]){const _0x18a679=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x18a679,setBlockTransactionDetection(![]);}_0x37fc3c[_0xf75b56(0x1b2)]={'currency':_0x47ec9d[_0xf75b56(0x1b2)]?_0x47ec9d[_0xf75b56(0x1b2)]['currency']:null,'cost':_0x47ec9d['fee']?_0x47ec9d['fee'][_0xf75b56(0x19d)]:0x0},await updateCoinResults(_0x37fc3c);}}}!_0x113ff3&&(logger[_0xf75b56(0x1f9)](_0xf75b56(0x181)+_0x47ec9d['id']),_0x2e29d2(_0xf75b56(0x114)),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x3ec164=JSON[_0xf75b56(0x159)](lastBalances[_0xf75b56(0x10b)]);const _0x327ec2=_0x3ec164[_0xf75b56(0x14b)](_0x1b9b95=>_0x1b9b95['symbol']==_0x47ec9d[_0xf75b56(0x1a9)]);if(_0x327ec2){if(_0x4f158b=='open')_0x327ec2['orderstatus']=_0x327ec2[_0xf75b56(0x1fb)]==_0xf75b56(0x114)?_0xf75b56(0x114):_0xf75b56(0x22c);else{if(_0x4f158b==_0xf75b56(0x138))_0x327ec2['orderstatus']=_0x327ec2['orderstatus']==_0xf75b56(0x114)?_0xf75b56(0x114):_0xf75b56(0x138);else _0x4f158b=='closed'&&(_0x327ec2[_0xf75b56(0x1fb)]='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x3ec164)},proxyEmit(_0xf75b56(0xce),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2130c4=_0x1dbe6d;await getOpenOrders();let _0x32b6eb=![];currentCoins[_0x2130c4(0x141)](_0x4e22c2=>{const _0x3adec9=_0x2130c4;_0x32b6eb=allOpenOrders[_0x3adec9(0x14b)](_0x4f0a7c=>_0x4f0a7c[_0x3adec9(0x1a9)]==_0x4e22c2[_0x3adec9(0x1a9)]),_0x4e22c2[_0x3adec9(0x1fb)]=_0x32b6eb?_0x3adec9(0x22c):_0x3adec9(0xf4);});}function _0x5657(_0x3046eb,_0x223e53){const _0x24d7c3=_0x3ab7();return _0x5657=function(_0x396f9f,_0xc171ed){_0x396f9f=_0x396f9f-0xa3;let _0x3ab754=_0x24d7c3[_0x396f9f];return _0x3ab754;},_0x5657(_0x3046eb,_0x223e53);}async function getCoins(_0xf6f23d=0x0,_0x550338=!![],_0x34b7aa=config[_0x1dbe6d(0xb5)]){const _0x47bff5=_0x1dbe6d;let _0x1632fd,_0xcd1b3=[],_0x3ea34e=[],_0x18da75=[];if(_0xf6f23d)await sleep(_0xf6f23d);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1632fd=await exchange[_0x47bff5(0x216)](),mybalances=_0x1632fd[_0x47bff5(0x165)];for(const [_0x3b9c4c,_0x3b189b]of Object[_0x47bff5(0x129)](mybalances)){_0x18da75[_0x47bff5(0xeb)](_0x3b9c4c);}config['portfolio'][_0x47bff5(0x141)](_0x2bb447=>{const _0x3b4f4b=_0x47bff5;!_0x18da75[_0x3b4f4b(0x250)](_0x2bb447[_0x3b4f4b(0x16b)])&&(mybalances[_0x2bb447[_0x3b4f4b(0x16b)]]=0x0);});if(_0x34b7aa=='')for(const [_0x257c07,_0x3ee2e4]of Object[_0x47bff5(0x129)](mybalances)){_0x3ee2e4!=0x0&&_0xcd1b3[_0x47bff5(0xeb)]({'coin':_0x257c07});}else for(const [_0xd9dd6a,_0x188076]of Object[_0x47bff5(0x129)](mybalances)){const _0x264426=config['portfolio'][_0x47bff5(0x14b)](_0x3006de=>_0x3006de[_0x47bff5(0x16b)]==_0xd9dd6a),_0x4a4bb8=_0xd9dd6a+'/'+_0x34b7aa,_0x19c88a=_0x34b7aa+'/'+_0xd9dd6a,_0x6aa7cb=currentCoins[_0x47bff5(0x14b)](_0x1157f1=>_0x1157f1[_0x47bff5(0x16b)]==_0xd9dd6a);if((_0x188076!=0x0||_0x264426)&&(allSymbols['includes'](_0x4a4bb8)||_0xd9dd6a==_0x34b7aa))_0x6aa7cb?_0xcd1b3[_0x47bff5(0xeb)]({..._0x6aa7cb,'number':Math[_0x47bff5(0x111)](_0x188076+(_0x264426&&_0x264426['offset']||0x0),0x0)}):_0xcd1b3[_0x47bff5(0xeb)]({'coin':_0xd9dd6a,'symbol':_0x4a4bb8,'reverse':![],'number':Math[_0x47bff5(0x111)](_0x188076+(_0x264426&&_0x264426['offset']||0x0),0x0),'orderstatus':_0x47bff5(0xf4)});else{if((_0x188076!=0x0||_0x264426)&&allSymbols[_0x47bff5(0x250)](_0x19c88a))_0x6aa7cb?_0xcd1b3[_0x47bff5(0xeb)]({..._0x6aa7cb,'number':Math[_0x47bff5(0x111)](_0x188076+(_0x264426&&_0x264426[_0x47bff5(0xac)]||0x0),0x0)}):_0xcd1b3['push']({'coin':_0xd9dd6a,'symbol':_0x19c88a,'reverse':!![],'number':Math[_0x47bff5(0x111)](_0x188076+(_0x264426&&_0x264426[_0x47bff5(0xac)]||0x0),0x0),'orderstatus':_0x47bff5(0xf4)});else _0x264426&&_0xcd1b3['push']({'coin':_0x264426['coin'],'symbol':_0x264426[_0x47bff5(0x1a9)],'reverse':_0x264426[_0x47bff5(0x172)],'number':0x0,'orderstatus':'none'});}}}catch(_0x3785b0){if(!_0x550338)handleErrorNoStop(_0x3785b0,_0x47bff5(0x167));else await handleError(_0x3785b0,_0x47bff5(0x167));}return _0xcd1b3[_0x47bff5(0x183)]((_0x3a5615,_0x3d83bc)=>_0x3a5615[_0x47bff5(0x152)]<_0x3d83bc[_0x47bff5(0x152)]?0x1:_0x3d83bc[_0x47bff5(0x152)]<_0x3a5615[_0x47bff5(0x152)]?-0x1:0x0),_0x3ea34e=cloneDeep(_0xcd1b3),_0xcd1b3=_0xcd1b3[_0x47bff5(0x1fe)](_0x22e3ee=>{const _0xc54ac3=_0x47bff5,_0x201ae2=config[_0xc54ac3(0x10b)][_0xc54ac3(0x14b)](_0x45fbae=>_0x45fbae[_0xc54ac3(0x16b)]==_0x22e3ee[_0xc54ac3(0x16b)]);return _0x201ae2&&!_0x201ae2[_0xc54ac3(0x1ac)];}),[_0xcd1b3,_0x3ea34e];}async function getCoinNumber(_0x44fcd9){const _0x8e25a7=_0x1dbe6d;let _0x7205d4;try{const _0x5a1a31=await exchange[_0x8e25a7(0x216)]();_0x7205d4=_0x5a1a31[_0x8e25a7(0x165)][_0x44fcd9];}catch(_0x9ba0a2){await handleError(_0x9ba0a2,_0x8e25a7(0x1b6));}return _0x7205d4;}async function getOpenOrders(){const _0x5e5500=_0x1dbe6d;let _0x5b38c4;allOpenOrders=[];try{for(const _0x18175d of config['portfolio']){!_0x18175d[_0x5e5500(0x1ac)]&&_0x18175d[_0x5e5500(0x16b)]!=config[_0x5e5500(0xb5)]&&(_0x5b38c4=await exchange[_0x5e5500(0x263)](_0x18175d[_0x5e5500(0x1a9)]),_0x5b38c4[_0x5e5500(0xd9)]>0x0&&allOpenOrders[_0x5e5500(0xeb)](_0x5b38c4[0x0]));}}catch(_0x54e5b4){await handleError(_0x54e5b4,_0x5e5500(0x13d));}}async function handleOpenOrders(_0xc11f1f=0x0){const _0x40236b=_0x1dbe6d;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x40236b(0x23e)]&&allOrdersPlaced&&(_0xc11f1f==0x0?(logger['debug']('1\x20-\x20Handle\x20open\x20orders'),_0xc11f1f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x40236b(0x1f9)](_0x40236b(0xf0)),validateOrders(_0x40236b(0xc6))));}async function testAPI(_0x47a370){const _0x5be0d1=_0x1dbe6d,_0x35ced6=ccxt[_0x5be0d1(0x208)][_0x47a370[_0x5be0d1(0x266)][_0x5be0d1(0x254)]()],_0x5b7bfa=new _0x35ced6({'apiKey':_0x47a370[_0x5be0d1(0x23c)],'secret':_0x47a370[_0x5be0d1(0x213)],'options':{'defaultType':'spot'}});if(_0x47a370[_0x5be0d1(0x16f)])_0x5b7bfa[_0x5be0d1(0x243)]=_0x47a370[_0x5be0d1(0x16f)];try{await _0x5b7bfa[_0x5be0d1(0x216)]();}catch(_0x33aa20){logger['debug'](_0x5be0d1(0x104),_0x33aa20[_0x5be0d1(0x1c8)]());throw _0x33aa20;}}function cloneDeep(_0x5240d6){const _0x133c8b=_0x1dbe6d;return JSON[_0x133c8b(0x159)](JSON[_0x133c8b(0xc7)](_0x5240d6));}async function getPortfolio(_0x41fab8){const _0xc9e4a7=_0x1dbe6d;let _0x4a6ac0=[],_0x4fe49d=[],_0x3fe7cc=[],_0x345bd7;if(_0x41fab8[_0xc9e4a7(0x23c)]!==_0xc9e4a7(0xf1)||_0x41fab8[_0xc9e4a7(0x213)]!==_0xc9e4a7(0xf1)||_0x41fab8[_0xc9e4a7(0x16f)]&&_0x41fab8['apiPassword']!==_0xc9e4a7(0xf1)){if(config[_0xc9e4a7(0x266)]){if(_0x41fab8[_0xc9e4a7(0x23c)]=='************')_0x41fab8['apiKey']=config[_0xc9e4a7(0x23c)];if(_0x41fab8[_0xc9e4a7(0x213)]==_0xc9e4a7(0xf1))_0x41fab8['apiSecret']=config[_0xc9e4a7(0x213)];if(_0x41fab8[_0xc9e4a7(0x16f)]==_0xc9e4a7(0xf1))_0x41fab8[_0xc9e4a7(0x16f)]=config[_0xc9e4a7(0x16f)];}try{await testAPI(_0x41fab8);}catch(_0x5b4b68){if(_0x5b4b68[_0xc9e4a7(0x1c8)]()[_0xc9e4a7(0x250)](_0xc9e4a7(0x19b))){logHistory(_0xc9e4a7(0x153),'Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),proxyEmit(_0xc9e4a7(0x1e7),![]);return;}else{handleError(_0x5b4b68,_0xc9e4a7(0x162));return;}}exchange?updateExchange(_0x41fab8['apiKey'],_0x41fab8['apiSecret'],_0x41fab8[_0xc9e4a7(0x16f)]):await initExchange(_0x41fab8[_0xc9e4a7(0x266)],_0x41fab8[_0xc9e4a7(0x23c)],_0x41fab8[_0xc9e4a7(0x213)],_0x41fab8['apiPassword']);await loadSymbols();const _0x6b74c8=await getCoins(0x0,![],_0x41fab8[_0xc9e4a7(0xb5)]);_0x3fe7cc=cloneDeep(_0x6b74c8[0x1]);}else{const _0x1de003=await getCoins();_0x3fe7cc=cloneDeep(_0x1de003[0x1]);}if(_0x41fab8['basecoin']=='')proxyEmit(_0xc9e4a7(0x1e7),_0x3fe7cc),proxyEmit(_0xc9e4a7(0x122),_0x3fe7cc);else{_0x3fe7cc[_0xc9e4a7(0x141)](_0x161412=>{const _0x4cd1f6=_0xc9e4a7;if(_0x161412[_0x4cd1f6(0x16b)]!=_0x41fab8[_0x4cd1f6(0xb5)]&&allSymbols[_0x4cd1f6(0x250)](_0x161412[_0x4cd1f6(0x1a9)]))_0x4a6ac0[_0x4cd1f6(0xeb)](_0x161412['symbol']);});if(_0x4a6ac0[_0xc9e4a7(0xd9)]==0x0)logHistory(_0xc9e4a7(0x153),_0xc9e4a7(0x1ec));else{try{_0x4fe49d=await getTickers(_0x4a6ac0);}catch(_0x80ec0d){if(_0x80ec0d[_0xc9e4a7(0x1c8)]()[_0xc9e4a7(0x250)](_0xc9e4a7(0x19b))){proxyEmit(_0xc9e4a7(0x1e7),![]);return;}else handleError(_0x80ec0d,_0xc9e4a7(0x235));}_0x3fe7cc[_0xc9e4a7(0x141)](_0x16ffcc=>{const _0x46cbb2=_0xc9e4a7;_0x16ffcc[_0x46cbb2(0x16b)]!=_0x41fab8[_0x46cbb2(0xb5)]?_0x4fe49d[_0x16ffcc[_0x46cbb2(0x1a9)]]?_0x345bd7=_0x16ffcc['reverse']?0x1/_0x4fe49d[_0x16ffcc[_0x46cbb2(0x1a9)]][_0x46cbb2(0x110)]:_0x4fe49d[_0x16ffcc['symbol']]['last']:_0x345bd7=0x0:_0x345bd7=0x1,_0x16ffcc[_0x46cbb2(0x255)]=formatResult(_0x345bd7,0x8);}),await getMarketCap(_0x3fe7cc),proxyEmit(_0xc9e4a7(0x1e7),_0x3fe7cc),proxyEmit(_0xc9e4a7(0x122),_0x3fe7cc);}}}function truncateTradeAmount(_0x88f47a,_0x410465){const _0x2c67b9=_0x1dbe6d;let _0x573f6f=0x0;try{_0x573f6f=exchange[_0x2c67b9(0x1cd)](_0x88f47a,_0x410465);}catch(_0x31a388){}return _0x573f6f;}function checkMinimums(_0x40bc9c){const _0x5c4f70=_0x1dbe6d;let _0x4aa0aa=!![];const _0xafb216=!_0x40bc9c[_0x5c4f70(0x172)]?markets[_0x40bc9c['symbol']][_0x5c4f70(0x151)][_0x5c4f70(0xc9)][_0x5c4f70(0x19f)]:markets[_0x40bc9c[_0x5c4f70(0x1a9)]][_0x5c4f70(0x151)][_0x5c4f70(0x19d)][_0x5c4f70(0x19f)],_0x4bbcb4=!_0x40bc9c[_0x5c4f70(0x172)]?markets[_0x40bc9c[_0x5c4f70(0x1a9)]][_0x5c4f70(0x151)][_0x5c4f70(0x19d)][_0x5c4f70(0x19f)]:markets[_0x40bc9c[_0x5c4f70(0x1a9)]]['limits'][_0x5c4f70(0xc9)][_0x5c4f70(0x19f)],_0x5f12b6=truncateTradeAmount(_0x40bc9c[_0x5c4f70(0x1a9)],_0x40bc9c[_0x5c4f70(0x142)]);_0x40bc9c[_0x5c4f70(0x142)]=_0x5f12b6;if(Math[_0x5c4f70(0x25e)](_0x5f12b6)<_0xafb216)_0x4aa0aa=![];if(Math[_0x5c4f70(0x25e)](_0x5f12b6)*_0x40bc9c[_0x5c4f70(0x110)]<_0x4bbcb4)_0x4aa0aa=![];if(_0x40bc9c[_0x5c4f70(0x1cb)]=='sell'){let _0x4ca635=config[_0x5c4f70(0x10b)][_0x5c4f70(0x14b)](_0x2c60d0=>_0x2c60d0[_0x5c4f70(0x16b)]==_0x40bc9c[_0x5c4f70(0x16b)]);if(_0x4ca635[_0x5c4f70(0xac)]>0x0){if(Math[_0x5c4f70(0x25e)](_0x5f12b6)>_0x40bc9c[_0x5c4f70(0x13a)]-_0x4ca635[_0x5c4f70(0xac)])_0x4aa0aa=![];}else{if(Math['abs'](_0x5f12b6)>_0x40bc9c['number'])_0x4aa0aa=![];}}if(_0x40bc9c[_0x5c4f70(0x1cb)]==_0x5c4f70(0x185)){let _0x13eb71=config[_0x5c4f70(0x10b)][_0x5c4f70(0x14b)](_0x5eba97=>_0x5eba97[_0x5c4f70(0x16b)]==config['basecoin']),_0x1a9a51=currentCoins['find'](_0x11b2aa=>_0x11b2aa['coin']==config[_0x5c4f70(0xb5)]);if(_0x13eb71[_0x5c4f70(0xac)]>0x0){if(Math['abs'](_0x5f12b6)*_0x40bc9c['last']>_0x1a9a51['number']-_0x13eb71[_0x5c4f70(0xac)])_0x4aa0aa=![];}else{if(Math[_0x5c4f70(0x25e)](_0x5f12b6)*_0x40bc9c[_0x5c4f70(0x110)]>_0x1a9a51[_0x5c4f70(0x13a)])_0x4aa0aa=![];}}return _0x4aa0aa;}async function getBalances(_0x214f52=!![]){const _0xffcb85=_0x1dbe6d;let _0x48faaa=0x0,_0x31a8a3;const _0x349904=config[_0xffcb85(0xe1)];if(config[_0xffcb85(0x1c9)]&&config[_0xffcb85(0xa5)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x2085a5=>{const _0x8bf963=_0xffcb85;if(_0x2085a5['coin']!=config[_0x8bf963(0xb5)]){let _0x11faae=gTicker[noslash(_0x2085a5[_0x8bf963(0x1a9)])];_0x31a8a3=_0x2085a5[_0x8bf963(0x172)]?0x1/_0x11faae:_0x11faae;}else _0x31a8a3=0x1;let _0x14eb6d=_0x2085a5['number']*_0x31a8a3;_0x48faaa+=_0x14eb6d,_0x2085a5[_0x8bf963(0x110)]=formatResult(Number(_0x31a8a3),0x8),_0x2085a5[_0x8bf963(0x1f6)]=_0x14eb6d;}),currentCoins['forEach'](_0x567fbb=>{const _0xf6abdc=_0xffcb85;let _0x203d5d=config[_0xf6abdc(0x10b)][_0xf6abdc(0x14b)](_0x283f93=>_0x283f93['coin']==_0x567fbb[_0xf6abdc(0x16b)]),_0x42ee2d=Number(_0x203d5d[_0xf6abdc(0xf6)]),_0x4e40d6=_0x567fbb[_0xf6abdc(0x1f6)]/_0x48faaa*0x64,_0x4b6713=_0x42ee2d*_0x48faaa/0x64/_0x567fbb[_0xf6abdc(0x110)]-_0x567fbb[_0xf6abdc(0x13a)];_0x567fbb[_0xf6abdc(0xf6)]=formatResult(_0x4e40d6,0x3),_0x567fbb[_0xf6abdc(0x229)]=formatResult(_0x42ee2d,0x3),_0x567fbb['trade']=formatResult(_0x4b6713,0x8),_0x567fbb[_0xf6abdc(0x1cb)]='',_0x567fbb[_0xf6abdc(0xfe)]=![];if(_0x567fbb[_0xf6abdc(0x16b)]!=config[_0xf6abdc(0xb5)]){if(_0x567fbb[_0xf6abdc(0xf6)]>_0x42ee2d)_0x567fbb[_0xf6abdc(0x1cb)]='sell',_0x567fbb[_0xf6abdc(0xfe)]=checkMinimums(_0x567fbb);else _0x567fbb[_0xf6abdc(0xf6)]<_0x42ee2d&&(_0x567fbb[_0xf6abdc(0x1cb)]='buy',_0x567fbb[_0xf6abdc(0xfe)]=checkMinimums(_0x567fbb));}_0x567fbb[_0xf6abdc(0x152)]=_0x567fbb['distribution']/_0x567fbb[_0xf6abdc(0x229)]-0x1;if(_0x567fbb[_0xf6abdc(0x1fb)]=='filled'||_0x567fbb[_0xf6abdc(0x1fb)]==_0xf6abdc(0x138))_0x567fbb[_0xf6abdc(0x1fb)]=_0xf6abdc(0xf4);}),currentCoins[_0xffcb85(0x183)]((_0x3bb928,_0x18f634)=>_0x3bb928['delta']<_0x18f634[_0xffcb85(0x152)]?0x1:_0x18f634[_0xffcb85(0x152)]<_0x3bb928['delta']?-0x1:0x0);const _0x3e3d5e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x3e3d5e[_0xffcb85(0x1c1)],'usd':_0x3e3d5e[_0xffcb85(0x160)],'portfolio':JSON[_0xffcb85(0xc7)](currentCoins),'threshold':_0x349904},proxyEmit(_0xffcb85(0xce),{'serverversion':serverversion,'balances':lastBalances});if(_0x214f52){if(config[_0xffcb85(0x1c9)])headlessMode({'portfolio':currentCoins,'threshold':_0x349904});else{if(lockOrders==ORDERS[_0xffcb85(0x18e)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x349904});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5a4308=getNormalizedPerformance();getStartingBalances(_0x5a4308),emitPerformance(_0x5a4308);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3dd46e=_0x1dbe6d;if(!lastBalances)return;let _0x37935a=[],_0x1ba449,_0x54abf0=JSON[_0x3dd46e(0x159)](lastBalances[_0x3dd46e(0x10b)]);_0x54abf0[_0x3dd46e(0x183)]((_0x100ff0,_0x3b9e8e)=>_0x100ff0[_0x3dd46e(0x16b)]>_0x3b9e8e['coin']?0x1:_0x3b9e8e[_0x3dd46e(0x16b)]>_0x100ff0['coin']?-0x1:0x0),_0x54abf0[_0x3dd46e(0x141)](_0x4799dd=>{const _0x1af1e6=_0x3dd46e;let _0x5deddb={'coin':_0x4799dd[_0x1af1e6(0x16b)],'number':_0x4799dd['number'],'price':_0x4799dd['last']};_0x37935a['push'](_0x5deddb);});const _0x5eed14=await getFiat();_0x1ba449={'date':lastBalances[_0x3dd46e(0x1db)]['split']('\x20')[0x0],'eur':_0x5eed14[_0x3dd46e(0x1c1)],'usd':_0x5eed14['usd'],'coins':_0x37935a};let _0x515695=dbPerformance[_0x3dd46e(0x1a8)](_0x3dd46e(0xe2))[_0x3dd46e(0x14b)]({'date':_0x1ba449[_0x3dd46e(0x224)]})[_0x3dd46e(0x1f6)]();_0x515695?_0x1ba449[_0x3dd46e(0x224)]!=config[_0x3dd46e(0xbc)]&&dbPerformance[_0x3dd46e(0x1a8)](_0x3dd46e(0xe2))[_0x3dd46e(0x14b)]({'date':_0x1ba449[_0x3dd46e(0x224)]})[_0x3dd46e(0x117)](_0x1ba449)[_0x3dd46e(0xa3)]():dbPerformance[_0x3dd46e(0x1a8)](_0x3dd46e(0xe2))['push'](_0x1ba449)[_0x3dd46e(0xa3)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x56d0a8=_0x1dbe6d;let _0x55ab44=[];if(dbPerformance['has'](_0x56d0a8(0xe2))[_0x56d0a8(0x1f6)]()){let _0x2c8230=dbPerformance['get'](_0x56d0a8(0xe2))[_0x56d0a8(0x21a)]()[_0x56d0a8(0x1fe)](_0xbf38da=>{const _0x4786a2=_0x56d0a8;if(_0xbf38da['coins'][_0x4786a2(0xd9)]==0x0)return![];else return!![];})[_0x56d0a8(0x155)](_0x56d0a8(0x224))[_0x56d0a8(0x1f6)](),_0x4d8fe1=[...config[_0x56d0a8(0x182)]];_0x4d8fe1['sort']((_0x404197,_0x42fffa)=>_0x404197[_0x56d0a8(0x224)]>_0x42fffa[_0x56d0a8(0x224)]?-0x1:_0x42fffa[_0x56d0a8(0x224)]>_0x404197[_0x56d0a8(0x224)]?0x1:0x0);let _0x28f544=0x1,_0x5d4f3f=[],_0x290e0d=0x0;_0x2c8230['slice']()[_0x56d0a8(0x172)]()[_0x56d0a8(0x141)]((_0x4ba41c,_0x4c6ed5)=>{const _0x37e3a8=_0x56d0a8;if(_0x4d8fe1[_0x290e0d]){if(_0x2c8230[_0x2c8230[_0x37e3a8(0xd9)]-_0x4c6ed5]&&_0x4d8fe1[_0x290e0d]['date']==_0x2c8230[_0x2c8230[_0x37e3a8(0xd9)]-_0x4c6ed5][_0x37e3a8(0x224)]){if(_0x4c6ed5<_0x2c8230[_0x37e3a8(0xd9)]){let _0x1d5a9e=0x0,_0x478a89=0x0;_0x2c8230[_0x2c8230[_0x37e3a8(0xd9)]-_0x4c6ed5][_0x37e3a8(0xd8)][_0x37e3a8(0x141)](_0x34d68b=>{const _0x29a3b3=_0x37e3a8;_0x478a89+=_0x34d68b[_0x29a3b3(0x13a)]*_0x34d68b['price'];}),_0x4d8fe1[_0x290e0d][_0x37e3a8(0x246)][_0x37e3a8(0x141)](_0x2142a2=>{const _0x5e0fbe=_0x37e3a8;_0x1d5a9e+=_0x2142a2['number']*_0x2142a2[_0x5e0fbe(0x255)];}),_0x28f544*=_0x1d5a9e/(_0x478a89-_0x1d5a9e)+0x1;}_0x290e0d++;}}let _0x37d579=0x0;_0x4ba41c['coins'][_0x37e3a8(0x141)](_0x567eea=>{const _0x139c78=_0x37e3a8;_0x37d579+=_0x567eea[_0x139c78(0x13a)]*_0x567eea[_0x139c78(0x255)];}),_0x5d4f3f[_0x2c8230[_0x37e3a8(0xd9)]-_0x4c6ed5-0x1]=_0x37d579*(_0x28f544-0x1);});let _0x24e227=[];_0x4d8fe1=[...config['liquidity']]||[];let _0x136af2=0x0;_0x290e0d=0x0,_0x2c8230[_0x56d0a8(0x141)]((_0x3a24e7,_0x5b41b3)=>{const _0x3351f7=_0x56d0a8;if(_0x4d8fe1[_0x290e0d]){const _0x53bf7e=fns['parse'](_0x4d8fe1[_0x290e0d][_0x3351f7(0x224)],_0x3351f7(0x161),new Date()),_0x51a179=fns[_0x3351f7(0x159)](_0x3a24e7[_0x3351f7(0x224)],'yyyy/MM/dd',new Date());if(fns[_0x3351f7(0x1e5)](_0x53bf7e,_0x51a179)){let _0x571778=0x0;_0x4d8fe1[_0x290e0d]['changes'][_0x3351f7(0x141)](_0x53065f=>{const _0xbbe5da=_0x3351f7;!_0x24e227[_0x53065f[_0xbbe5da(0x16b)]]?_0x24e227[_0x53065f[_0xbbe5da(0x16b)]]=_0x53065f[_0xbbe5da(0x13a)]:(_0x571778=_0x24e227[_0x53065f[_0xbbe5da(0x16b)]],_0x24e227[_0x53065f[_0xbbe5da(0x16b)]]+=_0x53065f[_0xbbe5da(0x13a)]);const _0x33bf15=_0x3a24e7['coins'][_0xbbe5da(0x14b)](_0xffa2dd=>_0xffa2dd[_0xbbe5da(0x16b)]==_0x53065f[_0xbbe5da(0x16b)]);(!_0x33bf15||_0x33bf15[_0xbbe5da(0x13a)]==0x0)&&(_0x136af2+=(-_0x53065f[_0xbbe5da(0x13a)]-_0x571778)*_0x53065f[_0xbbe5da(0x255)]);}),_0x290e0d++;}}_0x3a24e7[_0x3351f7(0xd8)][_0x3351f7(0x141)]((_0x41f62a,_0xee76a7)=>{const _0x1330af=_0x3351f7;_0x24e227[_0x41f62a['coin']]&&(_0x41f62a[_0x1330af(0x22f)]=_0x24e227[_0x41f62a['coin']]);}),_0x55ab44['push']({'date':_0x3a24e7[_0x3351f7(0x224)],'eur':_0x3a24e7[_0x3351f7(0x1c1)],'usd':_0x3a24e7[_0x3351f7(0x160)],'offset':_0x5d4f3f[_0x5b41b3],'netoffset':_0x136af2,'coins':_0x3a24e7[_0x3351f7(0xd8)]});});}return _0x55ab44;}function emitPerformance(_0x5dfdc0){const _0x1f10f4=_0x1dbe6d;_0x5dfdc0[_0x1f10f4(0xd9)]!==0x0?(proxyEmit(_0x1f10f4(0x14e),_0x5dfdc0),lastPerformanceEmitted=getDate()):proxyEmit(_0x1f10f4(0x14e),[]);}function getPerf(_0x4a5976,_0x1853c3){const _0x12461d=_0x1dbe6d;let _0xa6c095=0x0,_0x59082a=0x0,_0x3936a3=0x0;_0x4a5976['coins'][_0x12461d(0x141)](_0x116ac7=>{const _0x36f491=_0x12461d;_0xa6c095+=_0x116ac7[_0x36f491(0x13a)]*_0x116ac7['price'];});_0x1853c3&&(_0xa6c095+=_0x4a5976['offset']);if(config[_0x12461d(0xb5)]===_0x12461d(0xf9)||config['basecoin']===_0x12461d(0xee)||config[_0x12461d(0xb5)]===_0x12461d(0xdb))_0x59082a=_0xa6c095*_0x4a5976[_0x12461d(0x1c1)],_0x3936a3=_0xa6c095*_0x4a5976[_0x12461d(0x160)];else{if(usdBasecoins[_0x12461d(0x250)](config[_0x12461d(0xb5)]))_0x59082a=_0xa6c095*_0x4a5976[_0x12461d(0x1c1)]/_0x4a5976[_0x12461d(0x160)],_0x3936a3=_0xa6c095;else config['basecoin']===_0x12461d(0x144)&&(_0x59082a=_0xa6c095,_0x3936a3=_0xa6c095*_0x4a5976['usd']/_0x4a5976[_0x12461d(0x1c1)]);}return[_0xa6c095,_0x59082a,_0x3936a3];}function getKPIs(_0x2686c8,_0x22749d=_0x1dbe6d(0x144)){const _0x20343f=_0x1dbe6d,_0x1f9c27=config[_0x20343f(0xb5)],_0x54fd0b=lastBalances,_0x5280de=currentCoins,_0x4c8928=getNormalizedPerformance(),_0x15a8d9=_0x2686c8===_0x20343f(0xb5)?_0x1f9c27:_0x2686c8==='fiat'||_0x2686c8==='net-fiat'?_0x22749d:_0x20343f(0x1ab)+_0x1f9c27,_0x276cbf=_0x2686c8===_0x20343f(0x1d5)?_0x20343f(0x109):_0x2686c8===_0x20343f(0x18b)?_0x20343f(0x109):_0x15a8d9+_0x20343f(0x134),_0x407afb=_0x2686c8===_0x20343f(0x1d5)||_0x2686c8===_0x20343f(0x18b)?_0x20343f(0x109):_0x15a8d9+_0x20343f(0xe3);let _0x32693e=0x0;_0x5280de[_0x20343f(0x141)](_0x1a9320=>{const _0x6556b6=_0x20343f;_0x32693e+=_0x1a9320['number']*_0x1a9320[_0x6556b6(0x110)];});if(_0x2686c8===_0x20343f(0x13c)||_0x2686c8===_0x20343f(0x18b)){if(_0x1f9c27===_0x20343f(0xf9)||_0x1f9c27===_0x20343f(0xee)||_0x1f9c27==='PAXG')_0x32693e=_0x32693e*(_0x22749d===_0x20343f(0x144)?_0x54fd0b[_0x20343f(0x1c1)]:_0x54fd0b[_0x20343f(0x160)]);else{if(usdBasecoins[_0x20343f(0x250)](_0x1f9c27))_0x32693e=_0x32693e*(_0x22749d===_0x20343f(0x144)?_0x54fd0b[_0x20343f(0x1c1)]/_0x54fd0b['usd']:0x1);else _0x1f9c27===_0x20343f(0x144)&&(_0x32693e=_0x32693e*(_0x22749d===_0x20343f(0x144)?0x1:_0x54fd0b[_0x20343f(0x160)]/_0x54fd0b[_0x20343f(0x1c1)]));}}let _0x50dbfb;if(_0x32693e!==0x0){if(_0x2686c8===_0x20343f(0xb5))_0x50dbfb=(_0x32693e/startingBalances[_0x20343f(0xb5)]-0x1)*0x64;else{if(_0x22749d==='EUR')_0x50dbfb=(_0x32693e/startingBalances[_0x20343f(0x1c1)]-0x1)*0x64;else _0x50dbfb=(_0x32693e/startingBalances[_0x20343f(0x160)]-0x1)*0x64;}let _0x6051ea=0x0;if(startingBalances[_0x20343f(0xd8)])_0x5280de[_0x20343f(0x141)](_0x426745=>{const _0x35fd4b=_0x20343f;let _0x53bbe1=startingBalances[_0x35fd4b(0xd8)][_0x35fd4b(0x14b)](_0x134410=>_0x134410[_0x35fd4b(0x16b)]===_0x426745[_0x35fd4b(0x16b)]);if(_0x53bbe1&&_0x53bbe1[_0x35fd4b(0x16b)]&&_0x426745['number']!==0x0)_0x6051ea+=_0x53bbe1[_0x35fd4b(0x13a)]*_0x426745['last'];});let _0x3e12ca=0x0;if(_0x4c8928[_0x20343f(0xd9)]!==0x0){let _0x31ef09=_0x4c8928[_0x4c8928[_0x20343f(0xd9)]-0x1];_0x3e12ca=_0x31ef09[_0x20343f(0x14c)];}_0x6051ea-=_0x3e12ca;_0x2686c8===_0x20343f(0x1d5)&&(_0x50dbfb=(_0x32693e-_0x6051ea)/startingBalances[_0x20343f(0xb5)]*0x64,_0x32693e=_0x32693e-_0x6051ea);if(_0x2686c8===_0x20343f(0x18b)){let _0x212575=_0x22749d==='EUR'?startingBalances[_0x20343f(0x1c1)]:startingBalances[_0x20343f(0x160)];if(_0x1f9c27===_0x20343f(0xf9)||_0x1f9c27===_0x20343f(0xee)||_0x1f9c27===_0x20343f(0xdb))_0x6051ea=_0x22749d==='EUR'?_0x6051ea*_0x54fd0b[_0x20343f(0x1c1)]:_0x6051ea*_0x54fd0b['usd'];else{if(usdBasecoins[_0x20343f(0x250)](_0x1f9c27))_0x6051ea=_0x22749d===_0x20343f(0x144)?_0x6051ea*_0x54fd0b[_0x20343f(0x1c1)]/_0x54fd0b[_0x20343f(0x160)]:_0x6051ea;else _0x1f9c27===_0x20343f(0x144)&&(_0x6051ea=_0x22749d==='EUR'?_0x6051ea:_0x6051ea*_0x54fd0b[_0x20343f(0x160)]/_0x54fd0b['eur']);}_0x50dbfb=(_0x32693e-_0x6051ea)/_0x212575*0x64,_0x32693e=_0x32693e-_0x6051ea;}if(_0x50dbfb){if(_0x50dbfb<0x64)_0x50dbfb=_0x50dbfb[_0x20343f(0x118)](0x2);else{if(_0x50dbfb<0x3e8)_0x50dbfb=_0x50dbfb[_0x20343f(0x118)](0x1);else _0x50dbfb=_0x50dbfb['toFixed'](0x0);}}else _0x50dbfb=Number('0')[_0x20343f(0x118)](0x2);if(_0x32693e){if(Math[_0x20343f(0x25e)](_0x32693e)<0.000001)_0x32693e=_0x32693e[_0x20343f(0x118)](0x2);else{if(Math[_0x20343f(0x25e)](_0x32693e)<0.1)_0x32693e=_0x32693e[_0x20343f(0x118)](0x6);else{if(Math[_0x20343f(0x25e)](_0x32693e)<0x1)_0x32693e=_0x32693e[_0x20343f(0x118)](0x5);else{if(Math[_0x20343f(0x25e)](_0x32693e)<0xa)_0x32693e=_0x32693e[_0x20343f(0x118)](0x4);else{if(Math[_0x20343f(0x25e)](_0x32693e)<0x64)_0x32693e=_0x32693e[_0x20343f(0x118)](0x3);else{if(Math[_0x20343f(0x25e)](_0x32693e)<0x3e8)_0x32693e=_0x32693e[_0x20343f(0x118)](0x2);else _0x32693e=_0x32693e[_0x20343f(0x118)](0x2);}}}}}}else _0x32693e=Number('0')['toFixed'](0x2);}else _0x50dbfb=Number('0')[_0x20343f(0x118)](0x2);return{'value':_0x32693e,'change':_0x50dbfb,'leftTxt':_0x276cbf,'rightTxt':_0x407afb};}async function getStartingBalances(_0x2ca7ff,_0x42d198=!![]){const _0xa716a9=_0x1dbe6d;if(_0x2ca7ff[_0xa716a9(0xd9)]!==0x0){const [_0x5b24ac,_0x8f26a1,_0x5968bd]=getPerf(_0x2ca7ff[0x0],!![]);let _0x4678f1=[];config[_0xa716a9(0x10b)][_0xa716a9(0x141)](_0x250a74=>{const _0x4e5337=_0xa716a9;let _0x1f1ca4=0x0,_0x1ba10b;config[_0x4e5337(0x182)][_0x4e5337(0x141)](_0x128487=>{const _0x47d9c2=_0x4e5337;let _0xbe5d62=_0x128487[_0x47d9c2(0x246)][_0x47d9c2(0x14b)](_0x544b74=>_0x544b74[_0x47d9c2(0x16b)]==_0x250a74[_0x47d9c2(0x16b)]);if(_0xbe5d62){_0x1f1ca4+=_0xbe5d62[_0x47d9c2(0x13a)];if(!_0x1ba10b)_0x1ba10b=_0xbe5d62[_0x47d9c2(0x255)];}}),_0x4678f1[_0x4e5337(0xeb)]({'coin':_0x250a74['coin'],'number':_0x1f1ca4,'initialprice':_0x1ba10b});});const _0x5551c3={'basecoin':_0x5b24ac,'eur':_0x8f26a1,'usd':_0x5968bd,'coins':_0x4678f1};if(_0x42d198)proxyEmit(_0xa716a9(0x248),_0x5551c3);startingBalances=_0x5551c3;}}function headlessMode(_0x991c5a){const _0x5790b1=_0x1dbe6d;let _0x4418f6=_0x991c5a[_0x5790b1(0x10b)],_0x4f5d33=_0x991c5a[_0x5790b1(0xe1)],_0x5033a4=[];for(let _0x115453 of _0x4418f6){if(_0x115453[_0x5790b1(0x16b)]!=config[_0x5790b1(0xb5)]){if(_0x115453[_0x5790b1(0x152)]>=_0x4f5d33/0x64){if(_0x115453['valid'])_0x5033a4['push'](_0x115453);}else{if(_0x115453[_0x5790b1(0x152)]<=-_0x4f5d33/0x64){if(_0x115453[_0x5790b1(0xfe)])_0x5033a4[_0x5790b1(0xeb)](_0x115453);}}}}_0x5033a4[_0x5790b1(0xd9)]>0x0&&(lockOrders==ORDERS[_0x5790b1(0x18e)]&&!coolingDown&&_0x5033a4[_0x5790b1(0x141)](_0x311712=>{const _0x52ec87=_0x5790b1;logger[_0x52ec87(0x1f9)](_0x52ec87(0x11b)+_0x311712[_0x52ec87(0x16b)]+'\x20'+_0x311712[_0x52ec87(0x13a)]+'\x20'+_0x311712[_0x52ec87(0x110)]+'\x20'+_0x311712[_0x52ec87(0xf6)]+'%\x20'+_0x311712[_0x52ec87(0x229)]+'%\x20'+(0x64*_0x311712[_0x52ec87(0x152)])['toFixed'](0x2)+_0x52ec87(0x176)+_0x4f5d33[_0x52ec87(0x118)](0x2)+'%)');}),placeOrder(_0x5033a4));}function notifyBalance(_0x5eefee){const _0xf43ece=_0x1dbe6d;let _0x43c712=_0x5eefee[_0xf43ece(0x10b)],_0x939e66=_0x5eefee[_0xf43ece(0xe1)],_0x20975c=[];for(let _0x1b1555 of _0x43c712){if(_0x1b1555[_0xf43ece(0x16b)]!=config[_0xf43ece(0xb5)]){if(_0x1b1555[_0xf43ece(0x152)]>=_0x939e66/0x64){if(_0x1b1555[_0xf43ece(0xfe)])_0x20975c[_0xf43ece(0xeb)](_0x1b1555);}else{if(_0x1b1555[_0xf43ece(0x152)]<=-_0x939e66/0x64){if(_0x1b1555[_0xf43ece(0xfe)])_0x20975c[_0xf43ece(0xeb)](_0x1b1555);}}}}if(_0x20975c[_0xf43ece(0xd9)]>0x0){let _0x4e1954=_0x20975c[_0xf43ece(0x23b)](_0x2afb84=>_0x2afb84[_0xf43ece(0x16b)]);_0x4e1954[_0xf43ece(0x183)]();let _0xf0fda7=_0x4e1954[_0xf43ece(0x1bf)](',\x20');if(!lastCoinsToBalance)logHistory(_0xf43ece(0x128),_0xf43ece(0x198));lastCoinsToBalance=_0xf0fda7;}}function symbolToCoin(_0x179b75){const _0x1ad47e=_0x1dbe6d;let _0x153d72;if(_0x179b75[_0x1ad47e(0x250)]('/'+config[_0x1ad47e(0xb5)]))_0x153d72=_0x179b75[_0x1ad47e(0x1d4)]('/'+config[_0x1ad47e(0xb5)],'');if(_0x179b75[_0x1ad47e(0x250)](config['basecoin']+'/'))_0x153d72=_0x179b75['replace'](config[_0x1ad47e(0xb5)]+'/','');return _0x153d72;}async function unlockOrders(){const _0xbeae23=_0x1dbe6d;if(allOrdersPlaced&&lockOrders==ORDERS[_0xbeae23(0x23e)]){logger[_0xbeae23(0x1f9)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0xbeae23(0xae)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x1def9a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1def9a,setBlockTransactionDetection(![]),validateOrdersState=_0xbeae23(0x22f),persistOpenOrders([]),lockOrders=ORDERS[_0xbeae23(0x18e)],logger[_0xbeae23(0x1f9)](_0xbeae23(0x193));}}async function validateOrders(_0x1840f0){const _0x4329e4=_0x1dbe6d;if(_0x1840f0)validateOrdersState=_0x1840f0;logger[_0x4329e4(0x1f9)](_0x4329e4(0x247)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x4329e4(0x187):lockOrders==0x2?_0x4329e4(0x166):_0x4329e4(0x24b)));let _0x14ac6b=[],_0x3f0fe7=config[_0x4329e4(0xc2)]==_0x4329e4(0x127)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4329e4(0xcd)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4329e4(0x23e)])return;logger[_0x4329e4(0x1f9)](_0x4329e4(0xea)+validateOrdersState),lastOrders[_0x4329e4(0x141)](_0xf6c7f=>{const _0x47fcff=_0x4329e4;let _0x5d3ea7=![];_0xf6c7f['filled']>0x0&&(_0x5d3ea7=!![]),_0x14ac6b['push'](_0x5d3ea7),_0x5d3ea7&&config[_0x47fcff(0xc2)]!=_0x47fcff(0x127)&&logHistory('order',_0x47fcff(0x192)+_0xf6c7f[_0x47fcff(0x1a9)]+'\x20'+_0xf6c7f['side']+'\x20#'+formatResult(_0xf6c7f['filled'],0x8)+'\x20@'+formatResult(_0xf6c7f['price'],0x8));}),_0x14ac6b[_0x4329e4(0x141)]((_0x3382d0,_0x510938)=>{if(_0x3382d0)lastOrders['splice'](_0x510938,0x1);}),persistOpenOrders(lastOrders);const _0x3cd515=coolingDown?_0x4329e4(0x242):_0x4329e4(0xaf);if(validateOrdersState==_0x4329e4(0x22f)){validateOrdersState=_0x4329e4(0x169);if(_0x14ac6b[_0x4329e4(0x250)](![])){if(config[_0x4329e4(0xc2)]==_0x4329e4(0x127)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x14ac6b['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x4329e4(0xc2)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x4329e4(0xba))_0x14ac6b[_0x4329e4(0x250)](![])&&(config[_0x4329e4(0xc2)]==_0x4329e4(0x127)?logHistory(_0x4329e4(0x13f),_0x4329e4(0x230)+Math['round'](_0x3f0fe7*validateOrderInterval/0xea60)+_0x4329e4(0x11d)+_0x3cd515):(await cancelOrders(),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x4329e4(0x24c)](_0x3f0fe7*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3cd515))),await unlockOrders();else{if(validateOrdersState==_0x4329e4(0xc6)){if(config[_0x4329e4(0xc2)]!=_0x4329e4(0x127))logHistory('success','No\x20more\x20open\x20orders\x20-\x20'+_0x3cd515);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x45d45a=>{const _0x20dae9=_0x5657;try{const _0x2df8c5=await exchange[_0x20dae9(0x211)](_0x45d45a[_0x20dae9(0x179)],_0x45d45a['symbol']);}catch(_0x31f162){if(_0x31f162[_0x20dae9(0x1c8)]()[_0x20dae9(0x250)]('OrderNotFound')){}else await handleError(_0x31f162,_0x20dae9(0x115));}});}function _0x3ab7(){const _0x101464=['entries','writeFile','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','initclient',')\x20|\x20exchange:\x20','Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started','</pre>','2\x20-\x20handling\x20FILLED\x20order:\x20','ask','\x20orders\x20in\x20less\x20than\x20','sha256','\x20value','version','RETRY\x20-\x20Problem\x20resolved\x20after\x20','constructor','canceled','limit','number','\x20:\x20','fiat','getOpenOrders()','\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','success','5Zinbru','forEach','trade','average','EUR','currency','***','RequestTimeout','autoliquidity','recent20','\x20|\x20','find','netoffset','Error\x20while\x20deleting\x20files:\x20','performance','ExchangeNotAvailable','\x20metrics:</b>\x20\x0a\x0a','limits','delta','error','limit-high','sortBy','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','./version.json','parse','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','\x20order:\x20','marketcapEnabled','mkdirSync','red_yellow_blue','\x20>\x20[DEBUG]\x20','usd','yyyy/MM/dd','getPortfolio(0)','watchTradesForSymbols','Exception\x20thrown\x20in\x20','total','ORDERS.UNLOCKING','getCoins()','\x20|\x20highest\x20fee:\x20','ongoing','toggleBotMode','coin','set','getHours','initTickers()','apiPassword','keys','(((.+)+)+)+$','reverse','openOrders','resetHistory','getFullYear','%\x20(','marketcapApi','createOrder','orderId','/backup/','bot-','bots','RateLimitExceeded','yargs/yargs','format','\x20API\x20key\x20is\x20invalid','1\x20-\x20FILLED\x20unknown\x20order:\x20','liquidity','sort','deleteHistoryAlerts','buy','basecoinvalue','ORDERS.LOCKED','added','active','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','net-fiat','<b>Bot\x20','cancelLoading','UNLOCKED','getMinutes','market_cap','bot','Order\x20filled:\x20','2\x20-\x20Orders\x20unlocked','floor','Error:\x20Invalid\x20argument\x20','logs','<b>','Manual\x20balancing\x20required','has','code','AuthenticationError','sells','cost','Huobipro','min','Huobi','Crypt','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','progress','./config/','-events.json','switch-manual','get','symbol','USDT','Net\x20','excluded','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','existsSync','emojisell','fee','getDate','exec','pid','getCoinNumber()','event-history','message','configuration','DDoSProtection','2.6.23','Waited\x20','showname','Portfolio\x20change\x20detected:\x20','join','highest','eur','removed','\x20|\x20exchange:\x20','split','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','padStart','token\x20is\x20expired','toString','headless','927520ESLKZm','side','Fee\x20discount\x20refund\x20detected:\x20','amountToPrecision','differenceInSeconds','2.3.5','Initializing\x20coin\x20results','Loading\x20completed','\x20attempts','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','replace','net-basecoin','Order\x20amount\x20is\x20invalid:\x20','type','kill','Bybit','substring','time','cancel','Error\x20details:','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Reset\x20|\x20','-------------------------------\x0a','fetchTicker','sqrt','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','BNB/','isEqual','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','portfolio1','lowdb/adapters/FileSync','sendMetricsTelegram','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Resetting\x20coin\x20results:\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Invalid\x20symbol:\x20','shift','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','random','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','watchOrders()','remainingSymbols','sell','Cryptocom','value','Initiating\x20bot\x20restart','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','debug','unlinkSync','orderstatus','1889168MePlrJ','realized','filter','getStartingBalances','recovery','Bitget','8114986uDrpZm','Headless:\x20','Resetting\x20bot\x20history','getTime','slice','rightTxt','pro','exchanges','-performance.json','Market','onepagemode','Symbol(s):\x20','lowdb','watchTrades','padEnd','cancelOrder','storeConfiguration','apiSecret','\x20>\x20details:','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','fetchBalance','storeFiat','2.6.0','path','cloneDeep','function','\x20portfolio:</b>\x20\x0a\x0a','decrypt','status','remove','1\x20-\x20FILLED\x20known\x20order:\x20','change','emitHistory','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','date','001','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','defaults','USDP','target','PermissionDenied','bb-settings.json','open','-config.json','timestamp','initial','Order(s)\x20not\x20validated\x20after\x20','marketcapsqrt',':\x20timer\x20>','/EUR','page','getPortfolio(2)','Initializing\x20exchange:\x20already\x20done','enabled','sendPortfolioTelegram','91ggEuUZ','settings','map','apiKey','\x20minutes','LOCKED','4127472woUUnH','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','axios','balancing\x20resumes\x20when\x20cooldown\x20ends','password','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','changes','1\x20-\x20Validate\x20orders:\x20','starting-balances','recreateCoinResults()','\x20has\x20a\x2024h\x20drop\x20of\x20','ORDERS.UNLOCKED','round','configuration-stored','util','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','includes','event','ExchangeError','2.5.0','toLowerCase','price','watchOrders','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','timeshift','args','memoryUsage','send','emojibuy','TUSD','abs','leftTxt','apply','<pre>','4602777nsAUeB','fetchOpenOrders','fees','createWriteStream','exchange','134646GOiDEX','write','watchTrades()','change24h','\x20-\x20','datetime','search','log','RETRY\x20-\x20Error\x20in\x20','\x20|\x20Custom\x20ID:\x20','offset','10ZhGyHI','UNLOCKING','balancing\x20resumed','Limit\x20(low-margin)','test','exchange\x20not\x20reloaded','placeOrder','concat','basecoin','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','InvalidOrder','argv','RSA-OAEP','final','marketcap','startdate','\x20exchange\x20error:\x20','limit-low',':\x20Bot\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','InsufficientFunds','ordertype','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','closed','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','no\x20open\x20orders','stringify','Initializing\x20exchange','amount','buys','-results.json','fetchTickers()','timeout','balances','ID:\x20','startsWith','privateKey','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','\x20>\x20','25266MZYrAu','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','full','restart','coins','length','\x20>\x20pausing\x20bot\x20for\x20','PAXG','\x20/\x20','\x20uses\x20','Avoiding\x20continuous\x20order\x20attempts','botname','ccxt','threshold','data','\x20change','/USD','update-liquidity','BNB','Resuming\x20(','cooldown','fetchClosedOrders','2\x20-\x20Validate\x20orders:\x20','push','quote','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','ETH','complete','2\x20-\x20Handled\x20open\x20orders','************','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','slider','none','startprice','distribution','breakeven','milliseconds','BTC','getSeconds','colorscheme','Exchange\x20error\x20details:','Order\x20is\x20invalid:\x20','valid','OnMaintenance','running','USD','./logs/','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','testAPI():','order','26sxRCYw','detectLiquidityChange()','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Net\x20effect','hybrid-crypto-js','portfolio','coin-loading-progress','freeze','startnumber','starting-balance-','last','max','0\x20-\x20EXECUTION:\x20','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','filled','cancelOrders()','fromCodePoint','assign','toFixed','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','findIndex','Trigger:\x20','spot','\x20minutes\x20-\x20','loadSymbols():\x20','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Invalid\x20quantity','showConfig','portfolio2','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','Pausing\x20for\x20','Network\x20error\x20details:','Limit\x20(high-margin)','market','warning'];_0x3ab7=function(){return _0x101464;};return _0x3ab7();}async function initCoinResults(_0x131bf9){const _0x3d862=_0x1dbe6d;_0x131bf9?logger[_0x3d862(0x1f9)](_0x3d862(0x1eb)+_0x131bf9):logger['debug'](_0x3d862(0x1d0)),config[_0x3d862(0x10b)][_0x3d862(0x141)](_0xb18525=>{const _0x1c9b97=_0x3d862;if(!_0xb18525[_0x1c9b97(0x1ac)]&&_0xb18525[_0x1c9b97(0x16b)]!=config['basecoin']){const _0x289f28=currentCoins[_0x1c9b97(0x14b)](_0x4e18a8=>_0x4e18a8[_0x1c9b97(0x16b)]==_0xb18525[_0x1c9b97(0x16b)]),_0x37e1c0=gTicker[noslash(_0xb18525['symbol'])];let _0x1d2bae=_0x289f28?_0x289f28[_0x1c9b97(0x13a)]:null,_0x1c6496=_0xb18525[_0x1c9b97(0x172)]?0x1/_0x37e1c0:_0x37e1c0,_0x2fc198;config[_0x1c9b97(0x182)][_0x1c9b97(0x141)](_0x2f6d3a=>{const _0x4bfcff=_0x1c9b97;!_0x2fc198&&(_0x2fc198=_0x2f6d3a[_0x4bfcff(0x246)][_0x4bfcff(0x14b)](_0x10575e=>_0x10575e[_0x4bfcff(0x16b)]==_0xb18525[_0x4bfcff(0x16b)]),_0x2fc198&&(_0x1d2bae=_0x2fc198['number'],_0x1c6496=_0x2fc198[_0x4bfcff(0x255)]));});let _0x2fabbd=dbCoinResults[_0x1c9b97(0x1a8)](_0x1c9b97(0xd8))[_0x1c9b97(0x14b)]({'coin':_0xb18525[_0x1c9b97(0x16b)]})[_0x1c9b97(0x1f6)]();if(!_0x2fabbd){const _0x32c2ec={'coin':_0xb18525[_0x1c9b97(0x16b)],'number':_0x1d2bae,'breakeven':_0x1c6496,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1c9b97(0x1a8)]('coins')[_0x1c9b97(0xeb)](_0x32c2ec)['write']();}else{if(_0x131bf9&&_0xb18525[_0x1c9b97(0x16b)]==_0x131bf9){const _0x396279={'coin':_0xb18525[_0x1c9b97(0x16b)],'number':_0x1d2bae,'breakeven':_0x1c6496,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x1c9b97(0x1a8)]('coins')['find']({'coin':_0xb18525[_0x1c9b97(0x16b)]})[_0x1c9b97(0x117)](_0x396279)[_0x1c9b97(0xa3)]();}}}});}async function updateCoinResults(_0xc4d531,_0x55a3a=![]){const _0x3bc705=_0x1dbe6d;let _0x4c95de,_0x354cdc,_0x4c5981,_0x1d2a47,_0x197906,_0x2311c5,_0x5e02f1=dbCoinResults['get'](_0x3bc705(0xd8))[_0x3bc705(0x14b)]({'coin':_0xc4d531[_0x3bc705(0x16b)]})['value'](),_0x2a4183=![];_0x5e02f1&&Object[_0x3bc705(0x129)](_0x5e02f1)[_0x3bc705(0x141)](([_0x4c6a54,_0x2c5304])=>{if(_0x2c5304==null)_0x2a4183=!![];});(!_0x5e02f1||_0x2a4183)&&(await initCoinResults(_0xc4d531['coin']),_0x5e02f1=dbCoinResults[_0x3bc705(0x1a8)]('coins')['find']({'coin':_0xc4d531[_0x3bc705(0x16b)]})[_0x3bc705(0x1f6)]());_0xc4d531[_0x3bc705(0x172)]&&(_0x2311c5={'filled':_0xc4d531[_0x3bc705(0x114)]*_0xc4d531[_0x3bc705(0x255)],'amount':_0xc4d531[_0x3bc705(0x114)]*_0xc4d531[_0x3bc705(0x255)],'side':_0xc4d531['side']=='sell'?_0x3bc705(0x185):_0x3bc705(0x1f4),'price':0x1/_0xc4d531[_0x3bc705(0x255)]},_0xc4d531={..._0xc4d531,..._0x2311c5});_0x55a3a?_0x354cdc=_0xc4d531[_0x3bc705(0x1cb)]==_0x3bc705(0x185)?_0x5e02f1[_0x3bc705(0x13a)]+_0xc4d531[_0x3bc705(0x114)]:_0x5e02f1[_0x3bc705(0x13a)]-_0xc4d531['filled']:_0x354cdc=await getCoinNumber(_0xc4d531[_0x3bc705(0x16b)]);if(_0xc4d531[_0x3bc705(0x1b2)]&&_0xc4d531[_0x3bc705(0x1b2)][_0x3bc705(0x145)]==config[_0x3bc705(0xb5)])_0x4c95de=Number(_0xc4d531['fee'][_0x3bc705(0x19d)]);else{if(_0xc4d531[_0x3bc705(0x1b2)]&&_0xc4d531[_0x3bc705(0x1b2)]['currency']==_0x3bc705(0xe6)&&!_0x55a3a&&config[_0x3bc705(0xb5)]!=_0x3bc705(0xdb))_0x4c95de=Number(_0xc4d531[_0x3bc705(0x1b2)]['cost'])*gTicker[_0x3bc705(0xe6)+config[_0x3bc705(0xb5)]];else _0x4c95de=defaultFee*_0xc4d531[_0x3bc705(0x114)]*_0xc4d531[_0x3bc705(0x255)];}_0xc4d531[_0x3bc705(0x1cb)]==_0x3bc705(0x185)?(_0x4c5981=_0x354cdc!=0x0?(_0x5e02f1[_0x3bc705(0xf7)]*_0x5e02f1[_0x3bc705(0x13a)]+_0xc4d531[_0x3bc705(0x255)]*(_0x354cdc-_0x5e02f1['number'])+_0x4c95de)/_0x354cdc:0x0,_0x1d2a47=_0x5e02f1['realized']):(_0x4c5981=_0x354cdc!=0x0?(_0x5e02f1[_0x3bc705(0xf7)]*_0x5e02f1[_0x3bc705(0x13a)]-_0xc4d531['price']*(_0x5e02f1[_0x3bc705(0x13a)]-_0x354cdc)+_0x4c95de)/_0x354cdc:0x0,_0x1d2a47=_0x5e02f1[_0x3bc705(0x1fd)]+(_0xc4d531[_0x3bc705(0x255)]-_0x5e02f1[_0x3bc705(0xf7)])*_0xc4d531[_0x3bc705(0x114)]);_0x197906=(_0xc4d531[_0x3bc705(0x255)]-_0x4c5981-_0x4c95de/_0xc4d531[_0x3bc705(0x114)])*_0x354cdc;let _0x3469e5={'coin':_0xc4d531[_0x3bc705(0x16b)],'number':_0x354cdc,'breakeven':formatResult(_0x4c5981,0x8),'realized':formatResult(_0x1d2a47,0x8),'unrealized':formatResult(_0x197906,0x8),'fees':formatResult(_0x5e02f1[_0x3bc705(0x264)]+_0x4c95de,0x8),'sells':_0xc4d531['side']==_0x3bc705(0x1f4)?_0x5e02f1[_0x3bc705(0x19c)]+0x1:_0x5e02f1[_0x3bc705(0x19c)],'buys':_0xc4d531['side']==_0x3bc705(0x185)?_0x5e02f1[_0x3bc705(0xca)]+0x1:_0x5e02f1[_0x3bc705(0xca)]};dbCoinResults['get']('coins')[_0x3bc705(0x14b)]({'coin':_0xc4d531['coin']})[_0x3bc705(0x117)](_0x3469e5)[_0x3bc705(0xa3)]();if(!_0x55a3a){if(_0xc4d531[_0x3bc705(0x1b2)]&&_0xc4d531['fee'][_0x3bc705(0x145)]==_0x3bc705(0xe6)){const _0x4876c0=currentCoins[_0x3bc705(0x14b)](_0x209ddb=>_0x209ddb['coin']==_0x3bc705(0xe6));if(_0x4876c0){let _0x5ac28e=dbCoinResults[_0x3bc705(0x1a8)](_0x3bc705(0xd8))['find']({'coin':_0x3bc705(0xe6)})[_0x3bc705(0x1f6)]();_0x3469e5={..._0x5ac28e,'number':_0x4876c0[_0x3bc705(0x13a)]},dbCoinResults[_0x3bc705(0x1a8)](_0x3bc705(0xd8))[_0x3bc705(0x14b)]({'coin':_0x3bc705(0xe6)})[_0x3bc705(0x117)](_0x3469e5)['write']();}}}}async function placeOrder(_0x5baec4){const _0x246962=_0x1dbe6d,_0x11c29d=config['ordertype']=='market'?_0x246962(0x127):'limit';if(lockOrders==ORDERS[_0x246962(0x18e)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x246962(0x23e)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x246962(0x22f);let _0x2c7258=![];lastOrders=[];for(const _0x126a77 of _0x5baec4){let _0x59de1a,_0x44fbbc,_0x404c7e,_0x54c94d,_0x20c90a,_0x568d5f=_0x126a77['symbol'];try{const _0x4a070f=await exchange['fetchTicker'](_0x568d5f);_0x59de1a=_0x126a77[_0x246962(0x172)]?0x1/_0x126a77[_0x246962(0x110)]:_0x126a77[_0x246962(0x110)],_0x44fbbc=_0x4a070f['bid'],_0x404c7e=_0x4a070f[_0x246962(0x131)];_0x126a77[_0x246962(0x172)]?(_0x54c94d=_0x126a77[_0x246962(0x1cb)]==_0x246962(0x185)?_0x246962(0x1f4):_0x246962(0x185),_0x20c90a=Math[_0x246962(0x25e)](_0x126a77[_0x246962(0x142)])/_0x59de1a):(_0x54c94d=_0x126a77[_0x246962(0x1cb)],_0x20c90a=Math[_0x246962(0x25e)](_0x126a77[_0x246962(0x142)]));_0x11c29d==_0x246962(0x139)&&(config['ordertype']=='limit-high'&&(_0x59de1a=_0x54c94d==_0x246962(0x185)?_0x44fbbc:_0x404c7e),config[_0x246962(0xc2)]==_0x246962(0xbe)&&(_0x59de1a=_0x54c94d==_0x246962(0x185)?_0x404c7e:_0x44fbbc));_0x20c90a=formatResult(_0x20c90a,0x8),_0x59de1a=formatResult(_0x59de1a,0x8);const _0x36f252=_0x54c94d==_0x246962(0x1f4)?config['emojisell']?String[_0x246962(0x116)]('0x'+config[_0x246962(0x1b1)])+'\x20':'':config[_0x246962(0x25c)]?String['fromCodePoint']('0x'+config[_0x246962(0x25c)])+'\x20':'',_0xb44ccd=_0x11c29d==_0x246962(0x127)?_0x246962(0x20b):config['ordertype']==_0x246962(0x154)?_0x246962(0x126):_0x246962(0xb0),_0x1a4a8d=(Math[_0x246962(0x194)](Math[_0x246962(0x1f0)]()*0x35a4e900)+0x5f5e100)[_0x246962(0x1c8)]();lastOrders['push']({'customId':_0x1a4a8d,'symbol':_0x568d5f,'coin':_0x126a77[_0x246962(0x16b)],'amount':_0x20c90a,'price':_0x59de1a,'side':_0x54c94d,'reverse':_0x126a77[_0x246962(0x172)],'filled':0x0});if(_0x11c29d==_0x246962(0x127))logHistory(_0x246962(0x105),''+_0x36f252+_0xb44ccd+_0x246962(0x15b)+_0x568d5f+'\x20'+_0x54c94d+'\x20#'+formatResult(_0x20c90a,0x8)+'\x20@'+formatResult(_0x59de1a,0x8));else logHistory('order',''+_0x36f252+_0xb44ccd+_0x246962(0x15b)+_0x568d5f+'\x20'+_0x54c94d+'\x20#'+formatResult(_0x20c90a,0x8)+'\x20@'+formatResult(_0x59de1a,0x8));let _0x3a42be;_0x11c29d==_0x246962(0x127)?_0x54c94d==_0x246962(0x185)&&['Bybit',_0x246962(0x201),'Cex',_0x246962(0x1a0),_0x246962(0x19e)]['includes'](config[_0x246962(0x266)])?_0x3a42be=await exchange[_0x246962(0x178)](_0x568d5f,_0x11c29d,_0x54c94d,_0x20c90a,_0x59de1a):_0x3a42be=await exchange[_0x246962(0x178)](_0x568d5f,_0x11c29d,_0x54c94d,_0x20c90a,undefined):_0x3a42be=await exchange[_0x246962(0x178)](_0x568d5f,_0x11c29d,_0x54c94d,_0x20c90a,_0x59de1a);logger['debug'](_0x246962(0xcf)+_0x3a42be['id']+_0x246962(0xab)+_0x1a4a8d);const _0x238f91=lastOrders[_0x246962(0xd9)]-0x1;if(_0x238f91>=0x0&&lastOrders[_0x238f91]['customId']==_0x1a4a8d){lastOrders[_0x238f91][_0x246962(0x179)]=_0x3a42be['id'];if(_0x3a42be['amount'])lastOrders[_0x238f91][_0x246962(0xc9)]=_0x3a42be[_0x246962(0xc9)];if(_0x3a42be[_0x246962(0x255)])lastOrders[_0x238f91][_0x246962(0x255)]=_0x3a42be[_0x246962(0x255)];lastOrders[_0x238f91][_0x246962(0x1b2)]=_0x3a42be['fee'];}if(config[_0x246962(0xe8)]!=0x0){let _0x37de21=null;if(cooldownTracker['length']==config[_0x246962(0xe8)]-0x1)_0x37de21=cooldownTracker[_0x246962(0x1ee)]();const _0x284977=getTimeStamp();cooldownTracker[_0x246962(0xeb)](_0x284977);if(_0x37de21){const _0x4bec51=fns[_0x246962(0x1ce)](new Date(_0x284977),new Date(_0x37de21));if(_0x4bec51<cooldownInterval){logHistory(_0x246962(0x153),'Executed\x20'+config['cooldown']+_0x246962(0x132)+cooldownInterval/0x3c+_0x246962(0xd5)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x134472){if(_0x134472['toString']()[_0x246962(0x250)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x22e83c=>_0x22e83c[_0x246962(0x1a9)]!=_0x568d5f),logHistory('error',_0x246962(0x1f1)+_0x568d5f),_0x2c7258=!![];else{if(_0x134472[_0x246962(0x1c8)]()['includes'](_0x246962(0x120)))lastOrders=lastOrders[_0x246962(0x1fe)](_0x50f6fe=>_0x50f6fe[_0x246962(0x1a9)]!=_0x568d5f),logHistory(_0x246962(0x153),_0x246962(0x1d6)+_0x568d5f),_0x2c7258=!![];else{if(_0x134472[_0x246962(0x1c8)]()['includes'](_0x246962(0xb7)))lastOrders=lastOrders[_0x246962(0x1fe)](_0x6dd13b=>_0x6dd13b[_0x246962(0x1a9)]!=_0x568d5f),logHistory('error',_0x246962(0xfd)+_0x568d5f),logger['debug'](_0x134472),_0x2c7258=!![];else _0x134472['toString']()[_0x246962(0x250)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x246962(0x1fe)](_0xc1b8d1=>_0xc1b8d1[_0x246962(0x1a9)]!=_0x568d5f),logHistory('error',_0x246962(0x1f1)+_0x568d5f),_0x2c7258=!![]):(lastOrders=lastOrders[_0x246962(0x1fe)](_0x42a283=>_0x42a283[_0x246962(0x1a9)]!=_0x568d5f),await handleError(_0x134472,'placeOrder()',_0x568d5f));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x246962(0xd9)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4cfe46=config[_0x246962(0xc2)]==_0x246962(0x127)?validateOrderTimeout*0x3c*0x3e8:config[_0x246962(0xcd)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4cfe46);}else unlockOrders();_0x2c7258&&config[_0x246962(0x1c9)]&&(logHistory(_0x246962(0x153),_0x246962(0xde)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success','Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x246962(0x1c9)]&&logHistory(_0x246962(0x153),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x246962(0x18e)]&&(!config[_0x246962(0x1c9)]&&(config['ordertype']==_0x246962(0x127)?logHistory(_0x246962(0x153),_0x246962(0x1e3)):logHistory(_0x246962(0x153),_0x246962(0x223))));}}function persistOpenOrders(_0x5607cd){const _0x335e7d=_0x1dbe6d,_0x46f5c8={...config,'openOrders':_0x5607cd};let _0x11feb4=dbConfig[_0x335e7d(0x1a8)]('bot')[_0x335e7d(0x14b)]({'botID':botID})['value']();_0x11feb4&&dbConfig[_0x335e7d(0x1a8)](_0x335e7d(0x191))['find']({'botID':botID})['assign'](_0x46f5c8)['write']();}function restoreOrders(){const _0x29ab33=_0x1dbe6d;let _0x59ea28;config['openOrders']&&allOpenOrders['forEach'](_0x1b3afa=>{const _0x5c8c53=_0x5657,_0x5ebbe1=config[_0x5c8c53(0x173)][_0x5c8c53(0x14b)](_0x2c2292=>_0x2c2292[_0x5c8c53(0x179)]==_0x1b3afa['id']);_0x5ebbe1&&(lastOrders[_0x5c8c53(0xeb)](_0x5ebbe1),_0x59ea28=_0x1b3afa['timestamp']);});if(lastOrders[_0x29ab33(0xd9)]>0x0){lockOrders=ORDERS[_0x29ab33(0x23e)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x323564=new Date()[_0x29ab33(0x205)](),_0x31f4c5=config['ordertype']==_0x29ab33(0x127)?validateOrderTimeout*0x3c*0x3e8:config[_0x29ab33(0xcd)]*0x3c*0x3e8;if(_0x59ea28+_0x31f4c5>_0x323564){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2e74f1=_0x29ab33;validateOrders(_0x2e74f1(0xba));},_0x59ea28+_0x31f4c5-_0x323564);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0xccdd0a=_0x1dbe6d;if(!coinsLoaded){process[_0xccdd0a(0x25b)]({'telegrammsg':_0xccdd0a(0x226)},_0x270ecc=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x2e1dc1='';if(config[_0xccdd0a(0x1bd)])_0x2e1dc1=_0xccdd0a(0x197)+config[_0xccdd0a(0xdf)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x2e1dc1=_0xccdd0a(0x18c)+botID+_0xccdd0a(0x150);const _0x42c4bc=getKPIs('basecoin'),_0x348027=getKPIs(_0xccdd0a(0x13c),config['fiat']),_0x43649e=getKPIs('net-basecoin'),_0x4db5c=getKPIs('net-fiat',config[_0xccdd0a(0x13c)]);_0x2e1dc1+=_0xccdd0a(0x261),_0x2e1dc1+=_0x42c4bc[_0xccdd0a(0x25f)]+_0xccdd0a(0x13b)+_0x42c4bc['value']+'\x0a',_0x2e1dc1+=_0x42c4bc[_0xccdd0a(0x207)]+':\x20'+_0x42c4bc[_0xccdd0a(0x221)]+'%\x0a',_0x2e1dc1+=_0x348027[_0xccdd0a(0x25f)]+_0xccdd0a(0x13b)+_0x348027['value']+'\x0a',_0x2e1dc1+=_0x348027[_0xccdd0a(0x207)]+':\x20'+_0x348027[_0xccdd0a(0x221)]+'%\x0a',_0x2e1dc1+=_0x43649e['leftTxt']+':\x20'+_0x43649e[_0xccdd0a(0x1f6)]+'\x20('+config[_0xccdd0a(0xb5)]+')\x0a',_0x2e1dc1+=_0x43649e['rightTxt']+':\x20'+_0x43649e[_0xccdd0a(0x221)]+_0xccdd0a(0x176)+config[_0xccdd0a(0xb5)]+')\x0a',_0x2e1dc1+=_0x4db5c[_0xccdd0a(0x25f)]+':\x20'+_0x4db5c[_0xccdd0a(0x1f6)]+'\x20('+config[_0xccdd0a(0x13c)]+')\x0a',_0x2e1dc1+=_0x4db5c[_0xccdd0a(0x207)]+':\x20'+_0x4db5c[_0xccdd0a(0x221)]+_0xccdd0a(0x176)+config[_0xccdd0a(0x13c)]+')\x0a',_0x2e1dc1+=_0xccdd0a(0x12f),process[_0xccdd0a(0x25b)]({'telegrammsg':_0x2e1dc1},_0x35650d=>{});}async function sendPortfolioTelegram(){const _0x532bfc=_0x1dbe6d;if(!coinsLoaded||!currentCoins[0x0][_0x532bfc(0xf6)]){process[_0x532bfc(0x25b)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x5ba71c=>{});return;}let _0x1f90f0='';if(config[_0x532bfc(0x1bd)])_0x1f90f0=_0x532bfc(0x197)+config['botname']+'\x20portfolio:</b>\x20\x0a\x0a';else _0x1f90f0='<b>Bot\x20'+botID+_0x532bfc(0x21c);_0x1f90f0+=_0x532bfc(0x261),_0x1f90f0+='-------------------------------\x0a',_0x1f90f0+=_0x532bfc(0x1af),_0x1f90f0+=_0x532bfc(0x1e0),currentCoins[_0x532bfc(0x141)](_0x3961a3=>{const _0x51e4dc=_0x532bfc;_0x1f90f0+=_0x3961a3[_0x51e4dc(0x16b)][_0x51e4dc(0x210)](0x7)+'|\x20'+formatPad(_0x3961a3['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x3961a3['target'],0x2,0x6)+'|\x20'+formatPad(_0x3961a3[_0x51e4dc(0x152)]*0x64,0x2,0x6)+'\x0a';}),_0x1f90f0+=_0x532bfc(0x12f),process['send']({'telegrammsg':_0x1f90f0},_0x11a206=>{});}function formatPad(_0x4acfb2,_0x17895,_0x29c918){const _0xdaacf7=_0x1dbe6d,_0x47b7b1=formatResultString(_0x4acfb2,_0x17895);return _0x47b7b1?_0x47b7b1[_0xdaacf7(0x1c6)](_0x29c918):''['padStart'](_0x29c918);}function logHistory(_0x5b208e,_0x4f61cd,_0x4e7e74=''){const _0x451f03=_0x1dbe6d;logger[_0x451f03(0xd6)](''+_0x4f61cd);let _0x50995b={'time':getTimeStamp(),'type':_0x5b208e,'event':_0x4f61cd};dbLogs[_0x451f03(0x1a8)](_0x451f03(0x196))[_0x451f03(0xeb)](_0x50995b)[_0x451f03(0xa3)]();if(_0x4e7e74=='')_0x4e7e74=_0x4f61cd;proxyEmit('event',{'log':_0x50995b,'summary':_0x4e7e74}),process['send']({'telegram':{..._0x50995b,'botname':config['botname'],'showname':config[_0x451f03(0x1bd)]}},_0x43d5a5=>{});}function emitHistory(_0x4e3340={}){const _0x45788=_0x1dbe6d;Object['keys'](_0x4e3340)[_0x45788(0xd9)]==0x0&&(_0x4e3340={'type':[_0x45788(0x105),_0x45788(0x251)],'event':'','page':0x1});if(_0x4e3340[_0x45788(0x1d7)][_0x45788(0x250)](_0x45788(0x251)))_0x4e3340[_0x45788(0x1d7)]['splice'](_0x4e3340[_0x45788(0x1d7)]['indexOf'](_0x45788(0x251)),0x1,_0x45788(0x153),_0x45788(0x128),_0x45788(0x13f));if(dbLogs[_0x45788(0x199)]('logs')[_0x45788(0x1f6)]()){let _0x3c22f0=dbLogs[_0x45788(0x1a8)](_0x45788(0x196))['filter'](_0xad184a=>{const _0x2c5c75=_0x45788;if(_0x4e3340[_0x2c5c75(0x1d7)]['length']==0x0)return![];else return _0x4e3340[_0x2c5c75(0x1d7)][_0x2c5c75(0x250)](_0xad184a[_0x2c5c75(0x1d7)]);})['filter'](_0x276467=>{const _0x45df65=_0x45788;if(_0x4e3340[_0x45df65(0x251)]=='')return!![];else return _0x276467['event'][_0x45df65(0x254)]()[_0x45df65(0x250)](_0x4e3340[_0x45df65(0x251)][_0x45df65(0x254)]());})['sortBy']('time'),_0x46fa36=_0x3c22f0[_0x45788(0x1f6)]()[_0x45788(0xd9)];_0x3c22f0=_0x3c22f0[_0x45788(0x172)]()[_0x45788(0x206)]((_0x4e3340[_0x45788(0x234)]-0x1)*logPageSize,_0x4e3340[_0x45788(0x234)]*logPageSize-0x1)[_0x45788(0x172)]()[_0x45788(0x1f6)](),proxyEmit('event-history',{'logs':_0x3c22f0,'total':_0x46fa36});}else proxyEmit(_0x45788(0x1b7),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x527083){const _0x126076=_0x1dbe6d;if(dbLogs[_0x126076(0x199)](_0x126076(0x196))[_0x126076(0x1f6)]()){const _0x2a8432=dbLogs['get'](_0x126076(0x196))[_0x126076(0x155)]('time')[_0x126076(0x1fe)](_0x38793b=>{const _0x4a18dc=_0x126076;return _0x38793b[_0x4a18dc(0x1d7)]=='order';})[_0x126076(0x1f6)]();dbLogs[_0x126076(0x1a8)]('logs')[_0x126076(0x21f)]()[_0x126076(0xa3)](),dbLogs[_0x126076(0x1a8)](_0x126076(0x196))['assign'](_0x2a8432)[_0x126076(0xa3)](),emitHistory(_0x527083);}}async function pauseBot(_0x5e9f46=pauseBotIntervalShort,_0x17a067,_0x422102,_0x469c08=![]){const _0x185728=_0x1dbe6d,_0x5e33f6=new Date()[_0x185728(0x205)]();if(!lastErrorShown||_0x5e33f6-lastErrorShown>=_0x5e9f46){lastErrorShown=_0x5e33f6;if(!lastBotPause)lastBotPause=_0x5e33f6,consecutivePauses=0x1;else{if(_0x5e33f6-lastBotPause-_0x5e9f46<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x469c08){logHistory(_0x185728(0x153),_0x17a067+_0x185728(0xc5)),await killBot();return;}else logHistory(_0x185728(0x153),_0x17a067+pauseBotMsg),_0x5e9f46=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x5e33f6;}_0x422102?logger[_0x185728(0x1f9)]('('+consecutivePauses+')\x20'+_0x17a067+_0x185728(0x214),_0x422102):logger[_0x185728(0x1f9)]('('+consecutivePauses+')\x20'+_0x17a067);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5e9f46),botPaused=![],_0x5e9f46==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x3b58ef=_0x1dbe6d;botPaused=!![],await sleep(0x3e8),process[_0x3b58ef(0x25b)]({'stop':_0x3b58ef(0x1d8)},_0x488e57=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x289b07,_0x432602){const _0x478aa7=_0x1dbe6d;if(botPaused)return;const _0x3eee54=config[_0x478aa7(0x266)]||'Exchange';if(_0x432602)logger['debug'](_0x478aa7(0x164)+_0x432602);const _0x2f5ea6=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x289b07[_0x478aa7(0x1c8)]()[_0x478aa7(0x250)]('API-key\x20format\x20invalid'))logHistory(_0x478aa7(0x153),_0x3eee54+_0x478aa7(0x245)),_0x2f5ea6();else{if(_0x289b07[_0x478aa7(0x1c8)]()[_0x478aa7(0x250)](_0x478aa7(0x1de)))logHistory('error',_0x3eee54+_0x478aa7(0xf2)),_0x2f5ea6();else _0x289b07[_0x478aa7(0x1c8)]()[_0x478aa7(0x250)](_0x478aa7(0x19b))?(logHistory(_0x478aa7(0x153),_0x3eee54+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x478aa7(0x153),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)'),_0x2f5ea6()):await handleError(_0x289b07,null);}}async function handleError(_0x21b2e3,_0x576a1e,_0x1d962d=''){const _0x5340b3=_0x1dbe6d;if(botPaused)return;let _0x1fbc46;const _0x15bd80=config[_0x5340b3(0x266)]||'Exchange';if(_0x576a1e)logger[_0x5340b3(0x1f9)](_0x5340b3(0x164)+_0x576a1e);if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x1ba)))_0x1fbc46=_0x15bd80+_0x5340b3(0x15a),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()['includes'](_0x5340b3(0x17d)))_0x1fbc46=_0x15bd80+_0x5340b3(0x11f),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x14f))||_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0xff)))_0x1fbc46=_0x15bd80+_0x5340b3(0x1a2),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x147)))_0x1fbc46=_0x15bd80+_0x5340b3(0x24f),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x1c5)))_0x1fbc46=_0x15bd80+'\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)',await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x254)]()[_0x5340b3(0x250)](_0x5340b3(0x22e))||_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x254)]()[_0x5340b3(0x250)]('request-time'))_0x1fbc46=_0x5340b3(0x113),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()['includes']('InvalidNonce'))_0x1fbc46=_0x15bd80+_0x5340b3(0x1ef),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3 instanceof ccxt['NetworkError'])_0x1fbc46=_0x15bd80+'\x20network\x20error:\x20'+_0x21b2e3[_0x5340b3(0x1c8)](),logger[_0x5340b3(0x1f9)](_0x5340b3(0x125),_0x21b2e3),await pauseBot(undefined,_0x1fbc46,_0x21b2e3);else{if(_0x21b2e3[_0x5340b3(0x1c8)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x5340b3(0x153),_0x15bd80+_0x5340b3(0x180)),logHistory(_0x5340b3(0x153),_0x5340b3(0x1ad)),await killBot();else{if(_0x21b2e3['toString']()[_0x5340b3(0x250)](_0x5340b3(0x1de)))logHistory(_0x5340b3(0x153),_0x15bd80+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x5340b3(0x153),_0x5340b3(0x1ad)),await killBot();else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x19b))&&_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0x1c7)))_0x1fbc46=_0x15bd80+_0x5340b3(0x1e6),await pauseBot(undefined,_0x1fbc46,_0x21b2e3,!![]);else{if(_0x21b2e3['toString']()[_0x5340b3(0x250)](_0x5340b3(0x19b)))config[_0x5340b3(0x16f)]?_0x1fbc46=_0x15bd80+_0x5340b3(0x13e):_0x1fbc46=_0x15bd80+_0x5340b3(0xb6),logHistory('error',_0x1fbc46),logHistory(_0x5340b3(0x153),_0x5340b3(0x1ad)),await killBot();else{if(_0x21b2e3[_0x5340b3(0x1c8)]()['includes'](_0x5340b3(0x22a)))logHistory('error',_0x15bd80+_0x5340b3(0x215)),logHistory(_0x5340b3(0x153),_0x5340b3(0x1ad)),await killBot();else{if(_0x21b2e3[_0x5340b3(0x1c8)]()[_0x5340b3(0x250)](_0x5340b3(0xc1)))logHistory(_0x5340b3(0x153),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x1d962d);else{if(_0x21b2e3 instanceof ccxt[_0x5340b3(0x252)]){_0x1fbc46=_0x15bd80+_0x5340b3(0xbd)+_0x21b2e3[_0x5340b3(0x1c8)](),logHistory(_0x5340b3(0x153),_0x1fbc46),logger[_0x5340b3(0x1f9)](_0x5340b3(0xfc),_0x21b2e3);if(_0x1d962d)logger['debug'](_0x5340b3(0x20d)+_0x1d962d);await pauseBot(undefined,_0x1fbc46,_0x21b2e3);}else{_0x1fbc46='Unknown\x20error:\x20'+_0x21b2e3['toString'](),logHistory(_0x5340b3(0x153),_0x1fbc46),logger[_0x5340b3(0x1f9)](_0x1fbc46+'\x20>\x20details:',_0x21b2e3);if(_0x1d962d)logger['debug'](_0x5340b3(0x20d)+_0x1d962d);await pauseBot(undefined,_0x1fbc46);}}}}}}}}}}}}}}}}async function withRetry(_0x36d538,_0x20d721){const _0x443052=_0x1dbe6d;let _0x10c6f3=![],_0x1bf8ac=0x0,_0x519f89,_0x525f2c;while(_0x1bf8ac<maxRetries){try{_0x519f89=await _0x20d721();break;}catch(_0x4d184b){_0x525f2c=_0x4d184b,!_0x10c6f3?(_0x10c6f3=!![],logger['debug'](_0x443052(0xaa)+_0x36d538+':',_0x4d184b[_0x443052(0x1c8)]())):await sleep(retryInterval);}_0x1bf8ac++;}if(_0x1bf8ac==0x0)return _0x519f89;if(_0x1bf8ac>=maxRetries)throw _0x525f2c;else return logger['debug'](_0x443052(0x136)+_0x1bf8ac+_0x443052(0x1d2)),_0x519f89;}function formatResult(_0x1a8726,_0x5da7b0){const _0x32bd07=_0x1dbe6d;return parseFloat(_0x1a8726[_0x32bd07(0x118)](_0x5da7b0));}function formatResultTruncate(_0x57f2d5,_0x278ef1){const _0x4704a2=_0x1dbe6d;let _0x1a5ce6=formatResultString(_0x57f2d5,0xa),_0x40348d=_0x1a5ce6['indexOf']('.');return _0x40348d!=-0x1&&(_0x1a5ce6=_0x1a5ce6[_0x4704a2(0x206)](0x0,_0x40348d+_0x278ef1+0x1)),Number(_0x1a5ce6);}function formatResultString(_0x1f8e3d,_0x1bd4bd){const _0x132a5a=_0x1dbe6d;let _0x29251a;if(!(''+_0x1f8e3d)[_0x132a5a(0x250)]('e'))_0x29251a=+(Math['round'](_0x1f8e3d+'e+'+_0x1bd4bd)+'e-'+_0x1bd4bd);else{let _0x4bf0f5=(''+_0x1f8e3d)[_0x132a5a(0x1c4)]('e'),_0x574eeb='';+_0x4bf0f5[0x1]+_0x1bd4bd>0x0&&(_0x574eeb='+'),_0x29251a=+(Math[_0x132a5a(0x24c)](+_0x4bf0f5[0x0]+'e'+_0x574eeb+(+_0x4bf0f5[0x1]+_0x1bd4bd))+'e-'+_0x1bd4bd);}return Number(_0x29251a)[_0x132a5a(0x118)](_0x1bd4bd);}function getServerTime(){const _0x36c74c=_0x1dbe6d,_0x5d5855=new Date();return _0x5d5855['getFullYear']()+'/'+(_0x5d5855['getMonth']()+0x1)[_0x36c74c(0x1c8)]()[_0x36c74c(0x1c6)](0x2,'0')+'/'+_0x5d5855['getDate']()[_0x36c74c(0x1c8)]()[_0x36c74c(0x1c6)](0x2,'0')+'\x20'+_0x5d5855[_0x36c74c(0x16d)]()[_0x36c74c(0x1c8)]()[_0x36c74c(0x1c6)](0x2,'0')+':'+_0x5d5855[_0x36c74c(0x18f)]()[_0x36c74c(0x1c8)]()[_0x36c74c(0x1c6)](0x2,'0')+':'+_0x5d5855[_0x36c74c(0xfa)]()[_0x36c74c(0x1c8)]()[_0x36c74c(0x1c6)](0x2,'0');}function getTimeStamp(){const _0x9c950b=_0x1dbe6d,_0x1ac2b1=shiftedTime();return _0x1ac2b1[_0x9c950b(0x175)]()+'/'+(_0x1ac2b1['getMonth']()+0x1)[_0x9c950b(0x1c8)]()['padStart'](0x2,'0')+'/'+_0x1ac2b1[_0x9c950b(0x1b3)]()[_0x9c950b(0x1c8)]()[_0x9c950b(0x1c6)](0x2,'0')+'\x20'+_0x1ac2b1['getHours']()[_0x9c950b(0x1c8)]()[_0x9c950b(0x1c6)](0x2,'0')+':'+_0x1ac2b1[_0x9c950b(0x18f)]()[_0x9c950b(0x1c8)]()['padStart'](0x2,'0')+':'+_0x1ac2b1[_0x9c950b(0xfa)]()[_0x9c950b(0x1c8)]()[_0x9c950b(0x1c6)](0x2,'0');}function getDate(){const _0x380ac3=_0x1dbe6d,_0x4f46d9=shiftedTime();return _0x4f46d9['getFullYear']()+'/'+(_0x4f46d9['getMonth']()+0x1)[_0x380ac3(0x1c8)]()['padStart'](0x2,'0')+'/'+_0x4f46d9['getDate']()['toString']()[_0x380ac3(0x1c6)](0x2,'0');}function getHour(){const _0x937615=_0x1dbe6d,_0x97c6ef=shiftedTime();return _0x97c6ef[_0x937615(0x16d)]()[_0x937615(0x1c8)]()[_0x937615(0x1c6)](0x2,'0');}function sleep(_0x391ff6){return new Promise(_0x24254a=>setTimeout(_0x24254a,_0x391ff6));}function shiftedTime(){const _0x23104a=_0x1dbe6d,_0x40f74c=new Date();let _0x3d0970=_0x40f74c;if(config&&config[_0x23104a(0x258)]!==0x0)_0x3d0970=fns['add'](_0x40f74c,{'hours':config[_0x23104a(0x258)]});return _0x3d0970;}function timer(_0x457722){const _0x5c8896=_0x1dbe6d,_0x4c2774=new Date();!lasttime?console[_0x5c8896(0xa9)](getTimeStamp()+_0x5c8896(0x232),_0x457722,_0x4c2774):console[_0x5c8896(0xa9)](getTimeStamp()+':\x20timer\x20>',_0x457722,(_0x4c2774-lasttime)/0x3e8),lasttime=_0x4c2774;}