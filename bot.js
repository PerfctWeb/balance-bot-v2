const _0xe22841=_0x4ce9;(function(_0x564ed5,_0x3f6f8d){const _0x51549d=_0x4ce9,_0x286309=_0x564ed5();while(!![]){try{const _0xdd2ccb=-parseInt(_0x51549d(0x204))/0x1+-parseInt(_0x51549d(0x292))/0x2*(-parseInt(_0x51549d(0x1eb))/0x3)+-parseInt(_0x51549d(0x1cc))/0x4+parseInt(_0x51549d(0x144))/0x5*(parseInt(_0x51549d(0x14a))/0x6)+-parseInt(_0x51549d(0x23d))/0x7+-parseInt(_0x51549d(0x10c))/0x8*(parseInt(_0x51549d(0x164))/0x9)+parseInt(_0x51549d(0x168))/0xa;if(_0xdd2ccb===_0x3f6f8d)break;else _0x286309['push'](_0x286309['shift']());}catch(_0x58c9e4){_0x286309['push'](_0x286309['shift']());}}}(_0x4a36,0xd891e));const _0x324831=function(){let _0x3a9ffd=!![];return function(_0x250715,_0x270739){const _0x1d77a7=_0x3a9ffd?function(){const _0x3d86fb=_0x4ce9;if(_0x270739){const _0x2fbc45=_0x270739[_0x3d86fb(0x269)](_0x250715,arguments);return _0x270739=null,_0x2fbc45;}}:function(){};return _0x3a9ffd=![],_0x1d77a7;};}(),_0x59e10d=_0x324831(this,function(){const _0x4654cf=_0x4ce9;return _0x59e10d[_0x4654cf(0x1c3)]()[_0x4654cf(0x1c0)](_0x4654cf(0x1e6))['toString']()['constructor'](_0x59e10d)[_0x4654cf(0x1c0)](_0x4654cf(0x1e6));});_0x59e10d();'use strict';const ccxt=require(_0xe22841(0x208)),low=require(_0xe22841(0x154)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require('hybrid-crypto-js')[_0xe22841(0x1d5)],util=require(_0xe22841(0x226)),argv=require(_0xe22841(0x133))(process['argv']['slice'](0x2))[_0xe22841(0x16c)],path=require(_0xe22841(0x1f5));let exchange;global[_0xe22841(0x17c)]={},global[_0xe22841(0x259)]={};const usdBasecoins=[_0xe22841(0x1cd),_0xe22841(0x17f),'TUSD','USDT','USDC',_0xe22841(0x1b2)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0xe22841(0x230)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0xa*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0xe22841(0x28b)],botID=process['argv'][0x2]||_0xe22841(0x134),pattern=/^[0-9]{3}$/;!pattern[_0xe22841(0x1e2)](botID)&&(console[_0xe22841(0x171)](_0xe22841(0x15c)+botID+_0xe22841(0x1e8)),killBot());const userID=process[_0xe22841(0x16c)][0x3]||'',configpath=userID?_0xe22841(0x17b)+userID+'/':_0xe22841(0x17b),logspath=userID?_0xe22841(0x13e)+userID+'/':_0xe22841(0x13e),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0xe22841(0x221)](configpath);!fs[_0xe22841(0x1f0)](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0xe22841(0x199)+botID+_0xe22841(0x1a5),logfile=configpath+_0xe22841(0x199)+botID+'-events.json',performancefile=configpath+_0xe22841(0x199)+botID+_0xe22841(0x24a),coinresultsfile=configpath+_0xe22841(0x199)+botID+'-results.json',settingsfile=configpath+_0xe22841(0x161),securefile=configpath+_0xe22841(0x191),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xe22841(0x162)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xe22841(0x22d)]({'data':[],'version':serverversion})[_0xe22841(0x162)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xe22841(0x22d)]({'bot':[],'version':serverversion})[_0xe22841(0x162)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xe22841(0x22d)]({'coins':[],'version':serverversion})[_0xe22841(0x162)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xe22841(0x281),'rsaStandard':_0xe22841(0x1ad)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x2b4e68=>{console['log'](_0x2b4e68);},'simple':_0x258d33=>{const _0x2654a2=_0xe22841;console[_0x2654a2(0x171)](_0x258d33),loggerfile[_0x2654a2(0x162)](util[_0x2654a2(0x25f)](_0x258d33)+'\x0a');},'full':async(_0x4a50b2,_0x1ea7a0='')=>{const _0x4a427f=_0xe22841;let _0x40c982;if(config[_0x4a427f(0x13d)])_0x40c982=getTimeStamp()+':\x20'+config[_0x4a427f(0x1e4)]+_0x4a427f(0x284)+_0x4a50b2;else _0x40c982=getTimeStamp()+':\x20Bot\x20'+botID+_0x4a427f(0x284)+_0x4a50b2;console[_0x4a427f(0x171)](_0x40c982),loggerfile['write'](util['format'](_0x40c982)+'\x0a'),_0x1ea7a0&&(console[_0x4a427f(0x171)](_0x1ea7a0),loggerfile[_0x4a427f(0x162)](util[_0x4a427f(0x25f)](_0x1ea7a0)+'\x0a'));},'debug':async(_0x5a59c6,_0x13e741='')=>{const _0x44749d=_0xe22841;let _0x5bd711;if(config[_0x44749d(0x13d)])_0x5bd711=getTimeStamp()+':\x20'+config[_0x44749d(0x1e4)]+_0x44749d(0x1c8)+_0x5a59c6;else _0x5bd711=getTimeStamp()+_0x44749d(0x18f)+botID+_0x44749d(0x1c8)+_0x5a59c6;if(debugging)console['log'](_0x5bd711);loggerfile[_0x44749d(0x162)](util[_0x44749d(0x25f)](_0x5bd711)+'\x0a');if(_0x13e741){if(debugging)console[_0x44749d(0x171)](_0x13e741);loggerfile[_0x44749d(0x162)](util['format'](_0x13e741)+'\x0a');}}};process['on']('uncaughtException',function(_0x3b0dfa){const _0x5539c2=_0xe22841;logHistory(_0x5539c2(0x1e3),_0x5539c2(0x197)),logger[_0x5539c2(0x184)]('Uncaught\x20Exception:',_0x3b0dfa);});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0xe22841(0x19d)]);settings[_0xe22841(0x1b7)]!=config[_0xe22841(0x1b7)]&&updateOnepagemode(settings[_0xe22841(0x1b7)]);process[_0xe22841(0x20e)]({'started':_0xe22841(0x140)},_0x1e35ab=>{}),initializeProcessListeners();function proxyEmit(_0x551555,_0x1168ce=null){const _0xfea057=_0xe22841;process[_0xfea057(0x20e)]({'function':_0x551555,'args':_0x1168ce},_0x5802d6=>{});}function initializeProcessListeners(){const _0x4e9318=_0xe22841;process['on'](_0x4e9318(0x163),_0x4128da=>{const _0x48c92d=_0x4e9318;switch(Object[_0x48c92d(0x1a6)](_0x4128da)[0x0]){case _0x48c92d(0x19d):_0x4128da[_0x48c92d(0x19d)]!=undefined&&(settings[_0x48c92d(0x19d)]=_0x4128da['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x48c92d(0x1b7):_0x4128da[_0x48c92d(0x1b7)]!=undefined&&(settings[_0x48c92d(0x1b7)]=_0x4128da[_0x48c92d(0x1b7)],updateOnepagemode(settings[_0x48c92d(0x1b7)]));break;case _0x48c92d(0x231):_0x4128da[_0x48c92d(0x231)]!=undefined&&(bots=JSON[_0x48c92d(0x122)](_0x4128da[_0x48c92d(0x231)]),proxyEmit(_0x48c92d(0x231),bots));break;case'function':switch(_0x4128da[_0x48c92d(0x1a7)]){case _0x48c92d(0x1cb):initclient();break;case _0x48c92d(0x1b5):toggleBotMode();break;case _0x48c92d(0x123):emitHistory(_0x4128da[_0x48c92d(0x22e)]);break;case _0x48c92d(0x15b):deleteHistoryAlerts(_0x4128da[_0x48c92d(0x22e)]);break;case _0x48c92d(0x194):getPortfolio(_0x4128da['args']);break;case _0x48c92d(0x185):storeConfiguration(_0x4128da['args']);break;case _0x48c92d(0x189):storeHeadless(_0x4128da['args']);break;case _0x48c92d(0x16f):storeFiat(_0x4128da[_0x48c92d(0x22e)]);break;case'resetHistory':resetHistory();break;case _0x48c92d(0x21c):getStartingBalances(getNormalizedPerformance());break;case _0x48c92d(0x19b):placeOrder(_0x4128da[_0x48c92d(0x22e)]);break;case _0x48c92d(0x142):cancelLoading();break;case _0x48c92d(0x243):showConfig();break;case _0x48c92d(0x1f9):sendMetricsTelegram();break;case _0x48c92d(0x253):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x19bc7e=null,_0x333301=![]){const _0x18e832=_0xe22841;logger[_0x18e832(0x184)]('Reset\x20|\x20'+(_0x19bc7e&&_0x19bc7e[_0x18e832(0x26a)]>0x0?_0x18e832(0x183)+_0x19bc7e[_0x18e832(0x12d)](','):_0x18e832(0x28e))+_0x18e832(0x21a)+(_0x333301?_0x18e832(0x19f):_0x18e832(0x179))+_0x18e832(0x285)+config[_0x18e832(0x16a)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x333301)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x18e832(0x17d)]!=_0x18e832(0x1af)){if(_0x333301){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x1be12d){handleErrorNoStop(_0x1be12d,_0x18e832(0x18b));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x19bc7e);const _0x30c8d9=await getCoins();[currentCoins,currentCoinsAll]=_0x30c8d9,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x18e832(0x26a)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x591b07=_0xe22841;exchangeStopped=!![];try{await exchange[_0x591b07(0x252)]();}catch(_0x199e23){await handleError(_0x199e23,_0x591b07(0x1ee));}}async function reloadExchange(){const _0x5327bd=_0xe22841;logger[_0x5327bd(0x184)](_0x5327bd(0x1a2));while(lockOrders!=ORDERS[_0x5327bd(0x135)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x5327bd(0x184)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0xc80c71=config[_0xe22841(0x16a)],_0x439e7d=config[_0xe22841(0x17d)],_0x468676=config['apiSecret'],_0x385d13=config[_0xe22841(0x165)]){const _0x12fb0c=_0xe22841;exchange&&await stopExchange();!supportedExchanges()[_0x12fb0c(0x228)](_0xc80c71)&&(logHistory(_0x12fb0c(0x1e3),_0x12fb0c(0x176)+_0xc80c71+_0x12fb0c(0x297)),killBot());const _0x41e309=ccxt[_0x12fb0c(0x268)][_0xc80c71['toLowerCase']()];exchange=new _0x41e309({'apiKey':_0x439e7d,'secret':_0x468676,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x12fb0c(0x266)}});if(_0x385d13)exchange[_0x12fb0c(0x23a)]=_0x385d13;}function setStableCoins(){const _0x258157=_0xe22841;let _0x3db741=config[_0x258157(0x124)]==_0x258157(0x128)?_0x258157(0x128):_0x258157(0x10f),_0x15a076=!allSymbols[_0x258157(0x228)](_0x3db741+_0x258157(0x153))?_0x258157(0x158):_0x258157(0x1cd),_0x272931=!allSymbols['includes'](_0x3db741+_0x258157(0x238))?_0x15a076:_0x258157(0x151);stablecoins={'eur':{'coin':''+_0x3db741+_0x272931,'symbol':_0x3db741+'/'+_0x272931},'usd':{'coin':''+_0x3db741+_0x15a076,'symbol':_0x3db741+'/'+_0x15a076}};}function _0x4a36(){const _0x3c616c=['Resetting\x20bot\x20history','2.5.0','changes','getMonth','InvalidNonce','\x20API\x20secret\x20is\x20invalid','<b>Bot\x20','close','sendPortfolioTelegram','Cooldown\x20ended\x20-\x20balancing\x20resumed','exec','fetchBalance',':\x20timer\x20>','getFullYear','change','watchTrades(1)','reverse','getPortfolio(0)','\x20metrics:</b>\x20\x0a\x0a','last','format','Fee\x20discount\x20refund\x20detected:\x20','logs','must\x20be\x20greater\x20than\x20minimum\x20amount','getMinutes','getPortfolio(1)','Resetting\x20coin\x20results:\x20','spot','limit-high','pro','apply','length','cancel','canceled','OnMaintenance','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','side','event-history','fetchOpenOrders','no\x20open\x20orders','rightTxt','LOCKED','privateKey','Net\x20','watchOrders','\x20|\x20Error\x20details:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','price','round','recreate','total','Bot\x20','isEqual','kill','sha256','Unknown\x20error\x20occured','Waited\x20','\x20>\x20','\x20|\x20exchange:\x20','bot','timeout','leftTxt','\x20change','-------------------------------\x0a','version','bid','filled','no\x20additional\x20symbols','Invalid\x20quantity','open','.json','1294MFlhmY','get','getTime','Limit\x20(high-margin)','\x20not\x20responding','\x20exchange','data','cloneDeep','push','buy','usd','status','8TVUKWg','slice','Executed\x20','BTC','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getSeconds','getOpenOrders()','balancing\x20resumes\x20when\x20cooldown\x20ends','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','-events.json','emojisell','cancelOrder','Saving\x20configuration','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','openOrders','padStart','abs','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','restart','sort','Uncaught\x20NetworkError:','recovery','parse','emitHistory','basecoin','Pausing\x20for\x20','cost','getCoins()','ETH','distribution','fromCodePoint','configuration','portfolio','join','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','fetchTicker','ORDERS.UNLOCKING','liquidity','concat','yargs/yargs','001','UNLOCKED','offset','page','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','\x20|\x20lock\x20orders:\x20','placeOrder()','ExchangeNotAvailable','showname','./logs/','exchanges','running','coin','cancelLoading','No\x20more\x20open\x20orders\x20-\x20','100550UAGFGZ','settings','symbol','\x20API\x20key\x20is\x20invalid','createOrder','toFixed','36eiGUak','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ORDERS.LOCKED','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','timestamp','EUR','full','/USD','lowdb','\x20network\x20error','secure','Exchange','USDT','realized','startnumber','deleteHistoryAlerts','Error:\x20Invalid\x20argument\x20','min','\x20|\x20Custom\x20ID:\x20','number','find','bb-settings.json','write','message','1255770mtxvnv','apiPassword','has','change24h','28237320IwMTUo','padEnd','exchange','apiSecret','argv','string','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','storeFiat','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','log','Failed\x20to\x20load\x20coin\x20data\x20for\x20','success','Error\x20while\x20deleting\x20files:\x20','floor','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','random','Binance','exchange\x20not\x20reloaded','<pre>','./config/','ticker','apiKey','amountToPrecision','BUSD','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','trade','assign','additional\x20symbols\x20','debug','storeConfiguration','ExchangeError','autoliquidity','milliseconds','storeHeadless','net-fiat','loadSymbols()','2.3.5','fetchClosedOrders','fetchTickers',':\x20Bot\x20','none','bb-secure.json','findIndex','loading-canceled','getPortfolio','market','ID:\x20','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','Limit\x20(low-margin)','bot-','added','placeOrder','InvalidOrder','timeshift','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','exchange\x20reloaded','recent20','limit-low','Initiating\x20exchange\x20reload','breakeven','yyyy-MM-dd\x27T\x27HH:mm:ss','-config.json','keys','function','Portfolio\x20change\x20detected:\x20','event','1\x20-\x20Unlock\x20orders','getCoinNumber()','sell','RSA-OAEP','delta','***','order','\x20hour','USDP','red_yellow_blue','unlinkSync','toggleBotMode','performance','onepagemode','</pre>','removed','indexOf','average','value','\x20:\x20','forEach','\x20not\x20available','search','1\x20-\x20Handle\x20open\x20orders','stringify','toString','\x20minutes\x20-\x20','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','loadMarkets','type','\x20>\x20[DEBUG]\x20','replace','writeFile','initclient','3763368vzYhpz','USD','split','limit','2\x20-\x20Handled\x20open\x20orders','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20portfolio:</b>\x20\x0a\x0a','highest','Order\x20filled:\x20','Crypt','API-key\x20format\x20invalid','fiat','RequestTimeout','\x20-\x20bot\x20not\x20started','BNB','2\x20-\x20FILLED\x20known\x20order:\x20','buys','startprice','Bybit','AuthenticationError','getDate','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','test','error','botname','2\x20-\x20Validate\x20orders:\x20','(((.+)+)+)+$','initial',',\x20must\x20be\x20a\x203\x20digit\x20number','1\x20-\x20Validate\x20orders:\x20','map','2469MUZYat','decrypt','warning','stopExchange()','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','existsSync','active','filter','basecoinvalue','set','path','eur','yyyy/MM/dd','\x20orders\x20in\x20less\x20than\x20','sendMetricsTelegram','toLowerCase','target','getHours','<b>','ongoing','final','orderstatus','net-basecoin','time','Manual\x20balancing\x20required','9357UrDZBj','fee','customId','cooldown','ccxt','\x20closed\x20the\x20connection','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','3\x20-\x20handling\x20FILLED\x20order:\x20','shift','remainingSymbols','send','Order(s)\x20not\x20validated\x20after\x20','datetime','getPortfolio(2)','sortBy','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Net\x20effect','startdate','Unfilled\x20order(s)\x20canceled\x20after\x20','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','coins','max','\x20|\x20','Initializing\x20coin\x20results','getStartingBalances','ask','valid','NetworkError','threshold','mkdirSync','amount','2\x20-\x20FILLED\x20unknown\x20order:\x20','OrderNotFound','watchTrades','util','closed','includes','ORDERS.UNLOCKED','enabled','date','\x20has\x20a\x2024h\x20drop\x20of\x20','defaults','args','sells','freeze','bots','orderId','balances','splice','balancing\x20resumed','excluded','BNB/','/EUR','Transaction\x20detection\x20blocked','password','remove','currency','10500518tcpZRX','entries','fees','ordertype','************','substring','showConfig','configuration-stored','percentage','emojibuy','headless','%\x20(','-results.json','-performance.json'];_0x4a36=function(){return _0x3c616c;};return _0x4a36();}async function initwsCcxt(_0x5d0f79){const _0xad696b=_0xe22841;_0x5d0f79==null&&(_0x5d0f79=[],config[_0xad696b(0x12c)][_0xad696b(0x1be)](_0x37c856=>{const _0x3e254d=_0xad696b;if(!_0x37c856[_0x3e254d(0x236)]&&_0x37c856[_0x3e254d(0x141)]!=config['basecoin'])_0x5d0f79[_0x3e254d(0x29a)](_0x37c856[_0x3e254d(0x146)]);}));if(!_0x5d0f79['includes'](stablecoins[_0xad696b(0x1f6)]['symbol']))_0x5d0f79[_0xad696b(0x29a)](stablecoins['eur'][_0xad696b(0x146)]);if(!_0x5d0f79['includes'](stablecoins[_0xad696b(0x29c)][_0xad696b(0x146)]))_0x5d0f79['push'](stablecoins[_0xad696b(0x29c)]['symbol']);if(config[_0xad696b(0x16a)]['startsWith'](_0xad696b(0x178))){if(!_0x5d0f79['includes']('BNB/'+config[_0xad696b(0x124)]))_0x5d0f79[_0xad696b(0x29a)](_0xad696b(0x237)+config[_0xad696b(0x124)]);}loadCoins(_0x5d0f79);const _0x14dc01=async _0x3c0afa=>{const _0xc63187=_0xad696b;try{const _0x526b50=await exchange[_0xc63187(0x12f)](_0x3c0afa);global[_0xc63187(0x17c)][noslash(_0x526b50[_0xc63187(0x146)])]=_0x526b50['last'];}catch(_0x3d2802){await handleError(_0x3d2802,_0xc63187(0x25a),_0x3c0afa);}while(!![]){if(!botPaused)try{const _0xb7880e=await exchange[_0xc63187(0x225)](_0x3c0afa);global['ticker'][noslash(_0xb7880e[0x0]['symbol'])]=_0xb7880e[0x0][_0xc63187(0x27a)],await sleep(0x3e8);}catch(_0x334420){if(!exchangeStopped)await handleError(_0x334420,'watchTrades(2)',_0x3c0afa);}else await sleep(0x64);}},_0x3d2965=async _0x50270a=>{const _0x56f749=_0xad696b;while(!![]){if(!botPaused)try{const _0x3146b3=await exchange['fetchTicker'](_0x50270a);global['change'][_0x3146b3[_0x56f749(0x146)]]=_0x3146b3[_0x56f749(0x245)],await sleep(0x3c*0x3e8);}catch(_0x3afc4f){if(!exchangeStopped)await handleError(_0x3afc4f,_0x56f749(0x18e),_0x50270a);}else await sleep(0x64);}},_0x191283=async()=>{const _0x47d7ee=_0xad696b;while(!![]){if(!botPaused)try{const _0x56ccdd=await exchange[_0x47d7ee(0x277)]();_0x56ccdd[_0x47d7ee(0x1be)](_0x22370e=>{updateNumberCoinsCcxt(_0x22370e);});}catch(_0x131a04){if(!exchangeStopped)await handleError(_0x131a04,_0x47d7ee(0x277));}else await sleep(0x64);}};_0x5d0f79[_0xad696b(0x1be)](_0x42c06e=>{_0x14dc01(_0x42c06e),_0x3d2965(_0x42c06e);}),!wsEventsSet&&(wsEventsSet=!![],_0x191283(),watchTransactions());}async function watchTransactions(){const _0x48befa=_0xe22841;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x19c1d8=await getCoins(),[_0x5f3045,_0x714a1f]=_0x19c1d8;let _0x2e3072=[];currentCoins['forEach'](_0x1f4c01=>{const _0x3caff8=_0x4ce9,_0x2f89dc=_0x5f3045['find'](_0x4079d7=>_0x4079d7[_0x3caff8(0x141)]==_0x1f4c01[_0x3caff8(0x141)]);if(_0x2f89dc){if(_0x1f4c01[_0x3caff8(0x15f)]!=_0x2f89dc[_0x3caff8(0x15f)]){let _0x16c05c;if(_0x1f4c01[_0x3caff8(0x141)]!=config['basecoin']){const _0xe4430d=global[_0x3caff8(0x17c)][noslash(_0x1f4c01[_0x3caff8(0x146)])];_0x16c05c=_0x1f4c01[_0x3caff8(0x25b)]?0x1/_0xe4430d:_0xe4430d;}else _0x16c05c=0x1;_0x2e3072[_0x3caff8(0x29a)]({'coin':_0x1f4c01[_0x3caff8(0x141)],'symbol':_0x1f4c01[_0x3caff8(0x146)],'price':_0x16c05c,'number':Number(formatResult(_0x2f89dc['number']-_0x1f4c01[_0x3caff8(0x15f)],0x8)),'basecoinvalue':_0x16c05c*(_0x2f89dc[_0x3caff8(0x15f)]-_0x1f4c01[_0x3caff8(0x15f)])});}}});if(_0x2e3072[_0x48befa(0x26a)]==0x1&&!blockTransactionDetection){if(config[_0x48befa(0x187)]){logger['debug'](_0x48befa(0x14c)+_0x2e3072[0x0]['basecoinvalue']+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x48befa(0x1d3)]);if(lastFees[_0x48befa(0x1d3)]==0x0||Math[_0x48befa(0x11c)](_0x2e3072[0x0][_0x48befa(0x1f3)])>lastFees[_0x48befa(0x1d3)]){delete _0x2e3072[0x0][_0x48befa(0x146)],delete _0x2e3072[0x0][_0x48befa(0x1f3)];let _0x4a066f=[],_0x415451=[...config[_0x48befa(0x131)]]||[],_0x1e028d=config[_0x48befa(0x131)];_0x415451[_0x48befa(0x11f)]((_0x33737c,_0x5a54dc)=>_0x33737c[_0x48befa(0x22b)]>_0x5a54dc[_0x48befa(0x22b)]?-0x1:_0x5a54dc[_0x48befa(0x22b)]>_0x33737c['date']?0x1:0x0);const _0x26998d=getDate();if(_0x415451[0x0]){const _0x2608f4=fns[_0x48befa(0x122)](_0x415451[0x0][_0x48befa(0x22b)],_0x48befa(0x1f7),new Date()),_0x4533e8=fns[_0x48befa(0x122)](_0x26998d,'yyyy/MM/dd',new Date());if(fns[_0x48befa(0x27f)](_0x2608f4,_0x4533e8)){_0x4a066f=_0x415451[0x0][_0x48befa(0x24d)];const _0x2f2dba=_0x4a066f['find'](_0x5d95a4=>_0x5d95a4[_0x48befa(0x141)]==_0x2e3072[0x0][_0x48befa(0x141)]);_0x2f2dba?(_0x2f2dba[_0x48befa(0x15f)]+=_0x2e3072[0x0][_0x48befa(0x15f)],_0x2f2dba[_0x48befa(0x15f)]==0x0&&(_0x4a066f=_0x4a066f[_0x48befa(0x1f2)](_0x1057ae=>{const _0x37479c=_0x48befa;return _0x1057ae[_0x37479c(0x141)]!=_0x2e3072[0x0][_0x37479c(0x141)];}))):_0x4a066f[_0x48befa(0x29a)](_0x2e3072[0x0]);const _0x2250d8=_0x1e028d[_0x48befa(0x160)](_0x3baa8e=>_0x3baa8e[_0x48befa(0x22b)]==_0x26998d);_0x2250d8['changes']=_0x4a066f;}else _0x1e028d[_0x48befa(0x29a)]({'date':_0x26998d,'changes':[_0x2e3072[0x0]]});}const _0x46ef1e=_0x1e028d[_0x48befa(0x160)](_0x4760bf=>_0x4760bf[_0x48befa(0x22b)]==_0x26998d);if(_0x46ef1e){let _0x52a4f6=!![];_0x46ef1e[_0x48befa(0x24d)]['forEach'](_0x477a01=>{const _0x19315c=_0x48befa;if(_0x477a01[_0x19315c(0x15f)]!=0x0)_0x52a4f6=![];}),_0x52a4f6&&(_0x1e028d=_0x1e028d['filter'](_0x1fb966=>{const _0x27f055=_0x48befa;return _0x1fb966[_0x27f055(0x22b)]!=_0x26998d;}));}let _0x58e829=dbConfig['get']('bot')[_0x48befa(0x160)]({'botID':botID})['value']();_0x58e829&&(dbConfig['get']('bot')[_0x48befa(0x160)]({'botID':botID})[_0x48befa(0x182)]({'liquidity':_0x1e028d})[_0x48befa(0x162)](),config[_0x48befa(0x131)]=_0x1e028d),logHistory(_0x48befa(0x173),_0x48befa(0x1a8)+Math[_0x48befa(0x11c)](_0x2e3072[0x0][_0x48befa(0x15f)])+'\x20'+_0x2e3072[0x0]['coin']+'\x20'+(_0x2e3072[0x0][_0x48befa(0x15f)]>0x0?_0x48befa(0x19a):_0x48befa(0x1b9))+_0x48befa(0x170)),proxyEmit(_0x48befa(0x12b),emittedConfiguration());}else logger[_0x48befa(0x184)](_0x48befa(0x260)+Math['abs'](_0x2e3072[0x0][_0x48befa(0x15f)])+'\x20'+_0x2e3072[0x0][_0x48befa(0x141)]+'\x20'+(_0x2e3072[0x0][_0x48befa(0x15f)]>0x0?_0x48befa(0x19a):_0x48befa(0x1b9)));transactionDetected=!![],currentCoins=_0x5f3045,currentCoinsAll=_0x714a1f;}else logger['debug'](_0x48befa(0x1a8)+Math['abs'](_0x2e3072[0x0]['number'])+'\x20'+_0x2e3072[0x0][_0x48befa(0x141)]+'\x20'+(_0x2e3072[0x0][_0x48befa(0x15f)]>0x0?_0x48befa(0x19a):_0x48befa(0x1b9))+_0x48befa(0x20a)),currentCoins=_0x5f3045,currentCoinsAll=_0x714a1f;}await sleep(watchTransactionsInterval);}catch(_0x29fe1f){if(!exchangeStopped)await handleError(_0x29fe1f,'watchTransactions');}else await sleep(0x64);}}async function loadSymbols(_0x3144e4=config[_0xe22841(0x16a)]){const _0x42aa42=_0xe22841;try{markets=await exchange[_0x42aa42(0x1c6)](),allSymbols=[],Object[_0x42aa42(0x23e)](markets)[_0x42aa42(0x1be)](_0xbd5d3d=>{const _0x245032=_0x42aa42;_0xbd5d3d[0x1][_0x245032(0x1f1)]&&_0xbd5d3d[0x1][_0x245032(0x266)]&&allSymbols[_0x245032(0x29a)](_0xbd5d3d[0x0]);});}catch(_0x9b8c8f){throw _0x9b8c8f;}}async function initclient(){const _0x46d106=_0xe22841;emitLoadingProgress(),proxyEmit(_0x46d106(0x12b),emittedConfiguration()),proxyEmit(_0x46d106(0x13f),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x46d106(0x233),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x521243=getNormalizedPerformance();emitPerformance(_0x521243),getStartingBalances(_0x521243);}async function toggleBotMode(){const _0xb19183=_0xe22841;let _0x3fa7fa=dbConfig['get']('bot')[_0xb19183(0x160)]({'botID':botID})[_0xb19183(0x1bc)]();if(_0x3fa7fa){const _0xab66ff=!_0x3fa7fa[_0xb19183(0x247)];dbConfig[_0xb19183(0x293)](_0xb19183(0x286))[_0xb19183(0x160)]({'botID':botID})['assign']({'headless':_0xab66ff})[_0xb19183(0x162)](),config[_0xb19183(0x247)]=_0xab66ff,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x548f15=_0xe22841;process[_0x548f15(0x20e)]({'updatebotmanager':!![]},_0x32d87d=>{});}async function loadCoins(_0x4d229e){const _0x3619d9=_0xe22841;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1dad11,_0x135da5=0x0,_0x445dbc=0x0;_0x4d229e[_0x3619d9(0x1be)](_0x4343f4=>{const _0x21cb59=_0x3619d9;loading[_0x21cb59(0x20d)][_0x21cb59(0x29a)](_0x4343f4);}),loadingCanceled=![];let _0x25bdcb=![];while(_0x1dad11!=_0x4d229e[_0x3619d9(0x26a)]){_0x1dad11=0x0,_0x4d229e['forEach'](_0x5faee5=>{const _0x6dfb6b=_0x3619d9;if(global[_0x6dfb6b(0x17c)][noslash(_0x5faee5)]){loading[_0x6dfb6b(0x20d)]=loading[_0x6dfb6b(0x20d)][_0x6dfb6b(0x1f2)](_0x17da6c=>_0x17da6c!=_0x5faee5);if(!watchedSymbols['includes'](_0x5faee5))watchedSymbols[_0x6dfb6b(0x29a)](_0x5faee5);_0x1dad11++;}}),loading['progress']=Math[_0x3619d9(0x27b)](_0x1dad11/_0x4d229e[_0x3619d9(0x26a)]*0x64);loading['progress']!=0x64&&(_0x445dbc>0x1e*0x5&&(loading[_0x3619d9(0x287)]=!![],emitLoadingProgress()),_0x445dbc>0x78*0x5&&!_0x25bdcb&&(loading['cancel']=!![],emitLoadingProgress(),_0x25bdcb=!![],logHistory(_0x3619d9(0x1e3),_0x3619d9(0x172)+loading[_0x3619d9(0x20d)][_0x3619d9(0x12d)](',\x20')+_0x3619d9(0x1d9)),logHistory(_0x3619d9(0x1e3),_0x3619d9(0x125)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),pidCoinReloading=setTimeout(()=>{const _0x47fb8e=_0x3619d9;process['send']({'stop':_0x47fb8e(0x11e)},_0x2fc7ec=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3619d9(0x26b)]=!![],emitLoadingProgress();break;}else _0x1dad11!=_0x135da5&&(_0x135da5=_0x1dad11,emitLoadingProgress()),_0x445dbc++,await sleep(0xc8);}_0x1dad11==_0x4d229e[_0x3619d9(0x26a)]&&(coinsLoaded=!![],process['send']({'status':_0x3619d9(0x22a),'live':'running'},_0x4d0e15=>{}),_0x25bdcb&&logHistory('success',_0x3619d9(0x26e)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5c8573=_0xe22841;proxyEmit(_0x5c8573(0x12b),{...emittedConfiguration(),'configstate':_0x5c8573(0x193)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1fd39d=_0xe22841;let _0xe0acf7=global[_0x1fd39d(0x17c)][stablecoins[_0x1fd39d(0x1f6)]['coin']],_0x5c4997=global['ticker'][stablecoins[_0x1fd39d(0x29c)][_0x1fd39d(0x141)]];return{'eur':Number(_0xe0acf7),'usd':Number(_0x5c4997)};}function capitalize(_0x4c4054){const _0xd4c23b=_0xe22841;return _0x4c4054[_0xd4c23b(0x242)](0x0,0x1)['toUpperCase']()+_0x4c4054[_0xd4c23b(0x242)](0x1);}function supportedExchanges(){const _0x2320ff=_0xe22841,_0x1956ab=['ws',_0x2320ff(0x18e),_0x2320ff(0x12f),_0x2320ff(0x225),'watchOrders',_0x2320ff(0x117),_0x2320ff(0x148),_0x2320ff(0x271),_0x2320ff(0x18d),_0x2320ff(0x256)];let _0x4de8a5=[],_0x5540c7=[],_0x43d18d=ccxt['pro']['exchanges'];_0x43d18d[_0x2320ff(0x1be)](_0x27208d=>{const _0x378c9a=_0x2320ff;try{const _0x596668=new ccxt[(_0x378c9a(0x268))][_0x27208d]();_0x5540c7[_0x378c9a(0x29a)](_0x596668);}catch(_0x1ca484){}}),_0x5540c7[_0x2320ff(0x1be)](_0x3ff226=>{const _0x2778da=_0x2320ff;let _0x42cecc=0x0;_0x1956ab[_0x2778da(0x1be)](_0x2d3695=>{const _0x281b9c=_0x2778da;_0x2d3695 in _0x3ff226[_0x281b9c(0x166)]&&_0x3ff226[_0x281b9c(0x166)][_0x2d3695]&&_0x42cecc++;}),_0x42cecc==_0x1956ab[_0x2778da(0x26a)]&&_0x4de8a5[_0x2778da(0x29a)](capitalize(_0x3ff226['id']));});let _0x334f5e=[];return _0x43d18d['forEach'](_0x2af269=>{const _0x210779=_0x2320ff;_0x2af269=capitalize(_0x2af269);if(!_0x4de8a5[_0x210779(0x228)](_0x2af269))_0x334f5e['push'](_0x2af269);}),_0x4de8a5;}function setStartDatePerformance(){const _0x2a18e4=_0xe22841;if(config&&config[_0x2a18e4(0x131)][0x0][_0x2a18e4(0x24d)][_0x2a18e4(0x26a)]!=0x0){const _0x379eb5=config[_0x2a18e4(0x131)][0x0][_0x2a18e4(0x24d)];dbPerformance['get'](_0x2a18e4(0x298))['find']({'date':config[_0x2a18e4(0x215)]})[_0x2a18e4(0x182)]({'coins':_0x379eb5})[_0x2a18e4(0x162)]();}}async function recreateCoinResults(){const _0x4289eb=_0xe22841;let _0x1c7989,_0x1db17f=[];try{const _0x4cfc96=fns[_0x4289eb(0x25f)](fns['parseISO'](config[_0x4289eb(0x215)][_0x4289eb(0x1c9)](/\//g,'-')),_0x4289eb(0x1a4));for(const _0x121dea of currentCoins){if(_0x121dea[_0x4289eb(0x141)]!=config['basecoin']){let _0x4be4b1=0x0,_0x1bab65,_0x37ce37;_0x1c7989=await getAllEventOrders(_0x121dea[_0x4289eb(0x146)]);if(_0x1c7989[_0x4289eb(0x26a)]>0x0)_0x1c7989[_0x4289eb(0x1be)](_0x1308b9=>{const _0x2786a6=_0x4289eb,_0x5bb4d2=_0x121dea['symbol'][_0x2786a6(0x228)](config[_0x2786a6(0x124)]+'/');_0x1db17f[_0x2786a6(0x29a)]({'datetime':_0x1308b9[_0x2786a6(0x210)],'coin':_0x121dea['coin'],'symbol':_0x121dea[_0x2786a6(0x146)],'side':_0x1308b9[_0x2786a6(0x26f)],'reverse':_0x5bb4d2,'amount':formatResult(_0x1308b9[_0x2786a6(0x28d)],0x8),'filled':formatResult(_0x1308b9[_0x2786a6(0x28d)],0x8),'price':formatResult(_0x1308b9[_0x2786a6(0x27a)],0x8)}),_0x4be4b1=_0x1308b9[_0x2786a6(0x26f)]==_0x2786a6(0x29b)?_0x4be4b1+_0x1308b9[_0x2786a6(0x28d)]:_0x4be4b1-_0x1308b9[_0x2786a6(0x28d)];if(!_0x37ce37)_0x37ce37=_0x1308b9[_0x2786a6(0x27a)];});_0x1bab65=_0x121dea[_0x4289eb(0x15f)]-_0x4be4b1;let _0x4f6520;config[_0x4289eb(0x131)][_0x4289eb(0x1be)](_0x49177e=>{const _0x1d0726=_0x4289eb;!_0x4f6520&&(_0x4f6520=_0x49177e[_0x1d0726(0x24d)][_0x1d0726(0x160)](_0x4f5541=>_0x4f5541[_0x1d0726(0x141)]==_0x121dea['coin']),_0x4f6520&&(_0x1bab65=_0x4f6520[_0x1d0726(0x15f)],_0x37ce37=_0x4f6520[_0x1d0726(0x27a)]));});let _0x559a22=dbCoinResults[_0x4289eb(0x293)](_0x4289eb(0x218))[_0x4289eb(0x160)]({'coin':_0x121dea[_0x4289eb(0x141)]})[_0x4289eb(0x1bc)]();_0x559a22={'coin':_0x121dea[_0x4289eb(0x141)],'number':_0x1bab65,'breakeven':_0x37ce37,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4289eb(0x293)](_0x4289eb(0x218))['find']({'coin':_0x121dea['coin']})['assign'](_0x559a22)[_0x4289eb(0x162)]();}}_0x1db17f[_0x4289eb(0x11f)]((_0x36cdee,_0x3b1168)=>_0x36cdee['datetime']>_0x3b1168[_0x4289eb(0x210)]?0x1:_0x3b1168[_0x4289eb(0x210)]>_0x36cdee[_0x4289eb(0x210)]?-0x1:0x0);let _0x8a17c1=0x0;for(let _0x122813 of _0x1db17f){await updateCoinResults(_0x122813,!![]);}}catch(_0xfc6db4){await handleError(_0xfc6db4,'recreateCoinResults()');}}async function getAllEventOrders(_0x33a324){const _0x554d6d=_0xe22841;let _0x5c0a67=[],_0x1cb661=dbLogs['get']('logs')[_0x554d6d(0x1f2)](_0x3edee0=>{const _0x5b8e48=_0x554d6d,_0x588bf3=_0x3edee0[_0x5b8e48(0x1a9)]['toLowerCase']();return _0x588bf3[_0x5b8e48(0x228)](_0x33a324[_0x5b8e48(0x1fa)]())&&(_0x588bf3[_0x5b8e48(0x228)]('market')&&_0x588bf3[_0x5b8e48(0x228)](_0x5b8e48(0x1b0))||_0x588bf3['includes']('filled')&&_0x588bf3[_0x5b8e48(0x228)](_0x5b8e48(0x1b0)));})['sortBy'](_0x554d6d(0x202))[_0x554d6d(0x1bc)]();return _0x1cb661['forEach'](_0x2480da=>{const _0x39a501=_0x554d6d,_0x1aca45=_0x2480da['event'][_0x39a501(0x228)](_0x39a501(0x1ac))?_0x39a501(0x1ac):_0x39a501(0x29b),_0x48e0ea=/#([0-9]|\.)+\s/i,_0x1f7a4c=Number(_0x48e0ea['exec'](_0x2480da[_0x39a501(0x1a9)])[0x0][_0x39a501(0x10d)](0x1)),_0x37baee=/@([0-9]|\.)+$/i,_0x191ae2=Number(_0x37baee[_0x39a501(0x255)](_0x2480da[_0x39a501(0x1a9)])[0x0]['slice'](0x1));_0x5c0a67[_0x39a501(0x29a)]({'datetime':_0x2480da[_0x39a501(0x202)],'coin':symbolToCoin(_0x33a324),'symbol':_0x33a324,'side':_0x1aca45,'amount':_0x1f7a4c,'filled':_0x1f7a4c,'price':_0x191ae2});}),_0x5c0a67;}async function getAllOrders(_0x5c16fc,_0xc91505){const _0x2930d3=_0xe22841;let _0x2db883=[];while(_0xc91505<exchange[_0x2930d3(0x188)]()){const _0x5025a6=0x1f4;try{const _0x3ecd22=await exchange[_0x2930d3(0x18d)](_0x5c16fc,_0xc91505,_0x5025a6);if(_0x3ecd22[_0x2930d3(0x26a)])_0xc91505=_0x3ecd22[_0x3ecd22[_0x2930d3(0x26a)]-0x1][_0x2930d3(0x150)]+0x1,_0x2db883=_0x2db883[_0x2930d3(0x132)](_0x3ecd22);else break;}catch(_0x379f07){await handleError(_0x379f07,'getAllOrders',_0x5c16fc);}}return _0x2db883;}async function validate24hChanges(){const _0x34aa6f=_0xe22841;for(const _0x5c340b of currentCoins){if(_0x5c340b[_0x34aa6f(0x141)]!=config[_0x34aa6f(0x124)]){let _0x3c72ca;_0x5c340b[_0x34aa6f(0x25b)]?_0x3c72ca=formatResult((0x1/(global[_0x34aa6f(0x259)][noslash(_0x5c340b[_0x34aa6f(0x146)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3c72ca=global[_0x34aa6f(0x259)][noslash(_0x5c340b[_0x34aa6f(0x146)])],_0x3c72ca<config[_0x34aa6f(0x167)]&&(logHistory(_0x34aa6f(0x1e3),_0x5c340b[_0x34aa6f(0x141)]+_0x34aa6f(0x22c)+_0x3c72ca+'%'),logHistory(_0x34aa6f(0x1e3),_0x34aa6f(0x217)),logHistory(_0x34aa6f(0x1e3),_0x34aa6f(0x1e1)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x41a287,_0x57fd83){const _0x406b53=_0xe22841;if(!_0x41a287)return!![];const _0x53ad09=_0x57fd83[_0x406b53(0x1ce)]('.'),_0x55186d=_0x41a287[_0x406b53(0x1ce)]('.');for(var _0x5c127a=0x0;_0x5c127a<_0x55186d[_0x406b53(0x26a)];_0x5c127a++){const _0x387887=~~_0x55186d[_0x5c127a],_0x373e08=~~_0x53ad09[_0x5c127a];if(_0x387887<_0x373e08)return!![];if(_0x387887>_0x373e08)return![];}return![];}async function oneTimeMigration(){const _0x197211=_0xe22841;let _0x3480e6=dbLogs[_0x197211(0x293)](_0x197211(0x28b))[_0x197211(0x1bc)]();if(isOlderVersion(_0x3480e6,_0x197211(0x18c))){let _0x4abec7=[];const _0x29eafc=dbLogs[_0x197211(0x293)]('logs')[_0x197211(0x1bc)]();_0x29eafc[_0x197211(0x1be)](_0x3d1172=>{const _0x5af5d2=_0x197211;_0x4abec7[_0x5af5d2(0x29a)]({'time':_0x3d1172[_0x5af5d2(0x202)],'type':_0x3d1172[_0x5af5d2(0x1c7)],'event':_0x3d1172['event']});}),dbLogs[_0x197211(0x293)](_0x197211(0x261))[_0x197211(0x182)](_0x4abec7)['write']();}let _0xf48797=dbConfig[_0x197211(0x293)](_0x197211(0x28b))[_0x197211(0x1bc)]();if(isOlderVersion(_0xf48797,_0x197211(0x18c))){let _0xeb4210=dbConfig[_0x197211(0x293)]('bot')[_0x197211(0x160)]({'botID':botID})[_0x197211(0x1bc)]();if(_0xeb4210){let _0x2a6f39=[];_0xeb4210[_0x197211(0x12c)][_0x197211(0x1be)](_0x42d5a2=>{const _0x2d2f02=_0x197211;_0x2a6f39[_0x2d2f02(0x29a)]({'coin':_0x42d5a2[_0x2d2f02(0x141)],'number':_0x42d5a2[_0x2d2f02(0x15a)],'price':_0x42d5a2['startprice']}),delete _0x42d5a2[_0x2d2f02(0x15a)],delete _0x42d5a2[_0x2d2f02(0x1dd)];});if(_0x2a6f39['length']!==0x0)fs[_0x197211(0x1ca)](configbackuppath+('starting-balance-'+botID+_0x197211(0x291)),JSON[_0x197211(0x1c2)](_0x2a6f39,null,0x4),function(_0x242c5b){if(_0x242c5b){}});const _0xd64442=(_0x5d0c73,_0x5000ef)=>{const _0x56e982=_0x197211;let _0x266e7f=[];_0x5000ef[_0x56e982(0x1be)](_0x160757=>{const _0x5e9c53=_0x56e982,_0x49628a=_0x5d0c73[_0x5e9c53(0x160)](_0x446e7d=>_0x446e7d[_0x5e9c53(0x141)]==_0x160757['coin']);if(!_0x49628a)_0x266e7f[_0x5e9c53(0x29a)](_0x160757);});let _0x221953=[];return _0x5d0c73[_0x56e982(0x1be)](_0x3da5e6=>{const _0xbd2b9d=_0x56e982,_0x7fa388=_0x5000ef[_0xbd2b9d(0x160)](_0x1582cb=>_0x1582cb[_0xbd2b9d(0x141)]==_0x3da5e6[_0xbd2b9d(0x141)]);if(!_0x7fa388||_0x7fa388[_0xbd2b9d(0x15f)]==0x0&&_0x3da5e6[_0xbd2b9d(0x15f)]!=0x0)_0x221953[_0xbd2b9d(0x29a)](_0x3da5e6);}),{'missingDay1':_0x266e7f,'notInDay2':_0x221953};},_0x44dc67=dbPerformance[_0x197211(0x293)](_0x197211(0x298))[_0x197211(0x299)]()['value']();if(_0x44dc67[_0x197211(0x26a)]>0x1){const {missingDay1:_0x12e8ff,notInDay2:_0x520490}=_0xd64442(_0x2a6f39,_0x44dc67[0x1][_0x197211(0x218)]);_0x2a6f39=[..._0x2a6f39,..._0x12e8ff],_0x520490['forEach'](_0x4fc706=>{const _0x5d52c1=_0x197211;let _0x32022b=_0x2a6f39[_0x5d52c1(0x192)](_0x479f06=>_0x479f06[_0x5d52c1(0x141)]==_0x4fc706['coin']);_0x32022b!=-0x1&&_0x2a6f39[_0x5d52c1(0x234)](_0x32022b,0x1);});}_0x2a6f39[_0x197211(0x11f)]((_0x376b6e,_0x449aa8)=>_0x376b6e[_0x197211(0x141)]>_0x449aa8[_0x197211(0x141)]?0x1:_0x449aa8[_0x197211(0x141)]>_0x376b6e[_0x197211(0x141)]?-0x1:0x0);let _0x8e8419=[{'date':_0xeb4210['startdate'],'changes':_0x2a6f39}];_0x44dc67[_0x197211(0x26a)]>0x2&&_0x44dc67['forEach']((_0x529f89,_0x3d6fa4)=>{const _0x27b705=_0x197211;if(_0x3d6fa4>0x0&&_0x3d6fa4<_0x44dc67['length']-0x1){const {missingDay1:_0x5463ba,notInDay2:_0x33f220}=_0xd64442(_0x44dc67[_0x3d6fa4][_0x27b705(0x218)],_0x44dc67[_0x3d6fa4+0x1][_0x27b705(0x218)]);_0x2a6f39=[],(_0x5463ba[_0x27b705(0x26a)]!=0x0||_0x33f220[_0x27b705(0x26a)]!=0x0)&&(_0x5463ba[_0x27b705(0x26a)]!=0x0&&_0x2a6f39[_0x27b705(0x29a)](..._0x5463ba),_0x33f220[_0x27b705(0x26a)]!=0x0&&(_0x33f220[_0x27b705(0x1be)](_0x3f6919=>{const _0x1f9366=_0x27b705;_0x3f6919['number']=-_0x3f6919[_0x1f9366(0x15f)];}),_0x2a6f39['push'](..._0x33f220)),_0x2a6f39[_0x27b705(0x11f)]((_0x13450a,_0x23150f)=>_0x13450a[_0x27b705(0x141)]>_0x23150f[_0x27b705(0x141)]?0x1:_0x23150f['coin']>_0x13450a['coin']?-0x1:0x0),_0x8e8419['push']({'date':_0x44dc67[_0x3d6fa4+0x1]['date'],'changes':_0x2a6f39}));}}),dbConfig[_0x197211(0x293)]('bot')['find']({'botID':botID})[_0x197211(0x182)]({..._0xeb4210,'liquidity':_0x8e8419})[_0x197211(0x162)]();}}if(isOlderVersion(_0xf48797,'2.6.0')){let _0x253f70=dbConfig[_0x197211(0x293)](_0x197211(0x286))[_0x197211(0x160)]({'botID':botID})[_0x197211(0x1bc)]();if(_0x253f70){const _0x50b993=_0x253f70[_0x197211(0x16a)],_0x204242=_0x50b993?capitalize(_0x50b993):_0x197211(0x178);dbConfig[_0x197211(0x293)]('bot')[_0x197211(0x160)]({'botID':botID})[_0x197211(0x182)]({'exchange':_0x204242})[_0x197211(0x162)]();}}let _0x33f8f5=dbPerformance['get'](_0x197211(0x28b))[_0x197211(0x1bc)]();isOlderVersion(_0x33f8f5,_0x197211(0x18c))&&setStartDatePerformance();let _0x4a31fd=dbCoinResults[_0x197211(0x293)](_0x197211(0x28b))[_0x197211(0x1bc)]();if(isOlderVersion(_0x4a31fd,_0x197211(0x24c))){let _0x28e47b=dbCoinResults['get'](_0x197211(0x218))['value']();if(_0x28e47b['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1c9bb9=_0xe22841;dbConfig[_0x1c9bb9(0x1f4)]('version',serverversion)[_0x1c9bb9(0x162)](),dbPerformance[_0x1c9bb9(0x1f4)](_0x1c9bb9(0x28b),serverversion)[_0x1c9bb9(0x162)](),dbLogs[_0x1c9bb9(0x1f4)]('version',serverversion)['write'](),dbCoinResults[_0x1c9bb9(0x1f4)]('version',serverversion)[_0x1c9bb9(0x162)]();}function getConfiguration(_0x4801b2){const _0x2132e4=_0xe22841;let _0x5613ee=dbConfig[_0x2132e4(0x293)](_0x2132e4(0x286))['find']({'botID':_0x4801b2})[_0x2132e4(0x1bc)]();if(_0x5613ee){let _0x40817e=![];typeof _0x5613ee[_0x2132e4(0x220)]==_0x2132e4(0x16d)&&(_0x5613ee={..._0x5613ee,'threshold':Number(_0x5613ee['threshold'])},_0x40817e=!![]),_0x5613ee['change24h']==undefined&&(_0x5613ee={..._0x5613ee,'change24h':-0x14},_0x40817e=!![]),_0x5613ee[_0x2132e4(0x1d7)]==undefined&&(_0x5613ee={..._0x5613ee,'fiat':_0x2132e4(0x1cd)},_0x40817e=!![]),_0x5613ee[_0x2132e4(0x1b7)]==undefined&&(_0x5613ee={..._0x5613ee,'onepagemode':settings[_0x2132e4(0x1b7)]},_0x40817e=!![]),_0x5613ee['colorscheme']==undefined&&(_0x5613ee={..._0x5613ee,'colorscheme':_0x2132e4(0x1b3)},_0x40817e=!![]),_0x5613ee[_0x2132e4(0x187)]==undefined&&(_0x5613ee={..._0x5613ee,'autoliquidity':!![]},_0x40817e=!![]),_0x40817e&&(_0x5613ee={'botID':_0x5613ee['botID'],'exchange':_0x5613ee[_0x2132e4(0x16a)],'apiKey':_0x5613ee['apiKey'],'apiSecret':_0x5613ee[_0x2132e4(0x16b)],'apiPassword':_0x5613ee[_0x2132e4(0x165)],'basecoin':_0x5613ee[_0x2132e4(0x124)],'botname':_0x5613ee[_0x2132e4(0x1e4)],'showname':_0x5613ee['showname'],'threshold':_0x5613ee[_0x2132e4(0x220)],'ordertype':_0x5613ee[_0x2132e4(0x240)],'timeout':_0x5613ee[_0x2132e4(0x287)],'fiat':_0x5613ee[_0x2132e4(0x1d7)],'startdate':_0x5613ee[_0x2132e4(0x215)],'recreate':_0x5613ee[_0x2132e4(0x27c)],'timeshift':_0x5613ee[_0x2132e4(0x19d)],'onepagemode':_0x5613ee[_0x2132e4(0x1b7)],'headless':_0x5613ee['headless'],'cooldown':_0x5613ee[_0x2132e4(0x207)],'change24h':_0x5613ee[_0x2132e4(0x167)],'emojibuy':_0x5613ee[_0x2132e4(0x246)],'emojisell':_0x5613ee['emojisell'],'colorscheme':_0x5613ee['colorscheme'],'portfolio':_0x5613ee['portfolio'],'autoliquidity':_0x5613ee[_0x2132e4(0x187)],'liquidity':_0x5613ee['liquidity'],'openOrders':_0x5613ee[_0x2132e4(0x11a)]},dbConfig['get'](_0x2132e4(0x286))[_0x2132e4(0x23b)]()['write'](),dbConfig['get'](_0x2132e4(0x286))[_0x2132e4(0x29a)](_0x5613ee)[_0x2132e4(0x162)]());}else _0x5613ee={'botID':_0x4801b2,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2132e4(0x27e)+_0x4801b2,'showname':![],'threshold':0x3,'ordertype':_0x2132e4(0x195),'timeout':0x14,'fiat':_0x2132e4(0x1cd),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2132e4(0x19d)],'onepagemode':settings[_0x2132e4(0x1b7)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2132e4(0x1b3),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5613ee;}function emittedConfiguration(){const _0x18f145=_0xe22841;let _0x2a077c;if(config[_0x18f145(0x17d)]=='')_0x2a077c={...config,'configstate':_0x18f145(0x1e7)};else config[_0x18f145(0x17d)]=='***'?_0x2a077c={...config,'configstate':_0x18f145(0x121)}:(_0x2a077c={...config,'apiKey':_0x18f145(0x241),'apiSecret':'************'},config['apiPassword']&&(_0x2a077c[_0x18f145(0x165)]=_0x18f145(0x241)));return _0x2a077c;}function getSettings(){const _0x3db9bd=_0xe22841;return dbSettings['get'](_0x3db9bd(0x145))[_0x3db9bd(0x1bc)]();}function _0x4ce9(_0x10bbec,_0x43d3c7){const _0x172741=_0x4a36();return _0x4ce9=function(_0x59e10d,_0x324831){_0x59e10d=_0x59e10d-0x10b;let _0x4a3632=_0x172741[_0x59e10d];return _0x4a3632;},_0x4ce9(_0x10bbec,_0x43d3c7);}function getSecure(){const _0x1fc39c=_0xe22841;return dbSecure['get'](_0x1fc39c(0x156))[_0x1fc39c(0x1bc)]()||{};}function updateTimeshift(_0x420b40){const _0x2ae81c=_0xe22841;let _0x5441cb=dbConfig['get'](_0x2ae81c(0x286))['find']({'botID':botID})[_0x2ae81c(0x1bc)]();_0x5441cb&&dbConfig[_0x2ae81c(0x293)](_0x2ae81c(0x286))[_0x2ae81c(0x160)]({'botID':botID})[_0x2ae81c(0x182)]({'timeshift':_0x420b40})[_0x2ae81c(0x162)](),config[_0x2ae81c(0x19d)]=_0x420b40,proxyEmit(_0x2ae81c(0x12b),emittedConfiguration());}function updateOnepagemode(_0x5979c1){const _0x23e303=_0xe22841;let _0x23a61f=dbConfig[_0x23e303(0x293)]('bot')['find']({'botID':botID})[_0x23e303(0x1bc)]();_0x23a61f&&dbConfig[_0x23e303(0x293)]('bot')[_0x23e303(0x160)]({'botID':botID})[_0x23e303(0x182)]({'onepagemode':_0x5979c1})[_0x23e303(0x162)](),config[_0x23e303(0x1b7)]=_0x5979c1,proxyEmit(_0x23e303(0x12b),emittedConfiguration());}async function storeConfiguration(_0x4178d6){const _0x1e5b16=_0xe22841;logger[_0x1e5b16(0x184)](_0x1e5b16(0x118));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x1e5b16(0x184)](_0x1e5b16(0x239));let _0x38b7d1=[],_0x44a726=![],_0x4849da=![],_0x4479e8=[];_0x4178d6[_0x1e5b16(0x12c)]['forEach'](_0x498336=>{const _0x136e26=_0x1e5b16;if(!_0x498336['excluded']&&_0x498336[_0x136e26(0x141)]!=_0x4178d6[_0x136e26(0x124)])_0x4479e8['push'](_0x498336[_0x136e26(0x146)]);}),_0x4479e8[_0x1e5b16(0x1be)](_0x329ddb=>{const _0x4bdfcc=_0x1e5b16,_0x16953c=watchedSymbols[_0x4bdfcc(0x228)](_0x329ddb);!_0x16953c&&_0x38b7d1['push'](_0x329ddb);}),_0x4479e8[_0x1e5b16(0x1be)](_0x11e62f=>{const _0x5395be=_0x1e5b16,_0x5df084=currentCoins[_0x5395be(0x160)](_0x40b243=>_0x40b243[_0x5395be(0x146)]==_0x11e62f);!_0x5df084&&(_0x44a726=!![]);}),currentCoins['forEach'](_0x3e623a=>{const _0x4c8b58=_0x1e5b16;if(_0x3e623a[_0x4c8b58(0x141)]!=config[_0x4c8b58(0x124)]){const _0x22a515=_0x4479e8[_0x4c8b58(0x160)](_0x449f16=>_0x449f16==_0x3e623a['symbol']);!_0x22a515&&(_0x44a726=!![]);}}),_0x4178d6['portfolio'][_0x1e5b16(0x1be)](_0x5ba098=>{const _0x24f949=_0x1e5b16,_0xadd3c9=config[_0x24f949(0x12c)]['find'](_0x5e699c=>_0x5e699c[_0x24f949(0x141)]==_0x5ba098[_0x24f949(0x141)]);if(_0xadd3c9&&_0x5ba098[_0x24f949(0x136)]!=_0xadd3c9[_0x24f949(0x136)])_0x4849da=!![];});let _0x551008=dbConfig['get'](_0x1e5b16(0x286))[_0x1e5b16(0x160)]({'botID':botID})[_0x1e5b16(0x1bc)]();_0x4178d6={..._0x4178d6,'apiKey':crypt[_0x1e5b16(0x1ec)](secure['privateKey'],_0x4178d6[_0x1e5b16(0x17d)])['message'],'apiSecret':crypt[_0x1e5b16(0x1ec)](secure[_0x1e5b16(0x275)],_0x4178d6['apiSecret'])['message']};_0x4178d6['apiPassword']&&(_0x4178d6[_0x1e5b16(0x165)]=crypt['decrypt'](secure[_0x1e5b16(0x275)],_0x4178d6['apiPassword'])[_0x1e5b16(0x163)]);let _0x1fb76a=![];if(_0x551008){_0x4178d6[_0x1e5b16(0x17d)]==_0x1e5b16(0x241)?_0x4178d6[_0x1e5b16(0x17d)]=config['apiKey']:_0x1fb76a=!![];_0x4178d6['apiSecret']==_0x1e5b16(0x241)?_0x4178d6[_0x1e5b16(0x16b)]=config[_0x1e5b16(0x16b)]:_0x1fb76a=!![];if(_0x4178d6[_0x1e5b16(0x165)]==_0x1e5b16(0x241))_0x4178d6[_0x1e5b16(0x165)]=config[_0x1e5b16(0x165)];else{if(_0x4178d6[_0x1e5b16(0x165)])_0x1fb76a=!![];}dbConfig[_0x1e5b16(0x293)]('bot')['find']({'botID':botID})[_0x1e5b16(0x182)](_0x4178d6)[_0x1e5b16(0x162)]();}else dbConfig[_0x1e5b16(0x293)]('bot')[_0x1e5b16(0x29a)](_0x4178d6)[_0x1e5b16(0x162)](),_0x1fb76a=!![],process['send']({'status':_0x1e5b16(0x22a),'live':_0x1e5b16(0x140)},_0x87d732=>{});process[_0x1e5b16(0x20e)]({'botname':_0x4178d6[_0x1e5b16(0x1e4)]},_0x199624=>{}),updateBotManager(),config={..._0x4178d6},proxyEmit(_0x1e5b16(0x244)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1fb76a)await reset(_0x38b7d1,!![]);else _0x44a726||_0x4849da?await reset(_0x38b7d1,![]):getBalances();blockTransactionDetection=![],logger[_0x1e5b16(0x184)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x3a6c15){const _0x555dc3=_0xe22841,_0x3c9563={...config,'headless':_0x3a6c15[_0x555dc3(0x247)]};let _0x488a2c=dbConfig[_0x555dc3(0x293)](_0x555dc3(0x286))[_0x555dc3(0x160)]({'botID':botID})['value']();_0x488a2c&&dbConfig[_0x555dc3(0x293)](_0x555dc3(0x286))[_0x555dc3(0x160)]({'botID':botID})[_0x555dc3(0x182)](_0x3c9563)[_0x555dc3(0x162)](),config={..._0x3c9563},updateBotManager(),proxyEmit(_0x555dc3(0x12b),emittedConfiguration());}async function storeFiat(_0x833294){const _0xd664ab=_0xe22841,_0x3077c1={...config,'fiat':_0x833294};let _0x475edd=dbConfig[_0xd664ab(0x293)](_0xd664ab(0x286))['find']({'botID':botID})[_0xd664ab(0x1bc)]();_0x475edd&&dbConfig[_0xd664ab(0x293)](_0xd664ab(0x286))[_0xd664ab(0x160)]({'botID':botID})[_0xd664ab(0x182)](_0x3077c1)[_0xd664ab(0x162)](),config={..._0x3077c1},proxyEmit(_0xd664ab(0x12b),emittedConfiguration());}function resetHistory(){const _0x5b9eae=_0xe22841;logger[_0x5b9eae(0x152)](_0x5b9eae(0x24b));try{if(fs[_0x5b9eae(0x1f0)](path[_0x5b9eae(0x12d)](configpath,_0x5b9eae(0x199)+botID+_0x5b9eae(0x115))))fs[_0x5b9eae(0x1b4)](path[_0x5b9eae(0x12d)](configpath,_0x5b9eae(0x199)+botID+_0x5b9eae(0x115)));if(fs[_0x5b9eae(0x1f0)](path[_0x5b9eae(0x12d)](configpath,_0x5b9eae(0x199)+botID+'-performance.json')))fs[_0x5b9eae(0x1b4)](path['join'](configpath,_0x5b9eae(0x199)+botID+_0x5b9eae(0x24a)));if(fs[_0x5b9eae(0x1f0)](path[_0x5b9eae(0x12d)](configpath,_0x5b9eae(0x199)+botID+'-results.json')))fs[_0x5b9eae(0x1b4)](path['join'](configpath,'bot-'+botID+_0x5b9eae(0x249)));}catch(_0x27eeb8){if(_0x27eeb8)logger[_0x5b9eae(0x152)](_0x5b9eae(0x174),_0x27eeb8);}const _0x3dc352=getDate();let _0xce07e4=[];currentCoins[_0x5b9eae(0x1be)](_0x5d7b17=>{const _0x425d7f=_0x5b9eae;_0xce07e4[_0x425d7f(0x29a)]({'coin':_0x5d7b17[_0x425d7f(0x141)],'number':_0x5d7b17[_0x425d7f(0x15f)],'price':_0x5d7b17[_0x425d7f(0x25e)]});});let _0x4e3cbd=dbConfig['get'](_0x5b9eae(0x286))[_0x5b9eae(0x160)]({'botID':botID})[_0x5b9eae(0x1bc)]();_0x4e3cbd&&(dbConfig[_0x5b9eae(0x293)](_0x5b9eae(0x286))[_0x5b9eae(0x160)]({'botID':botID})[_0x5b9eae(0x182)]({'liquidity':[{'date':_0x3dc352,'changes':_0xce07e4}]})[_0x5b9eae(0x162)](),config[_0x5b9eae(0x131)]=[]),process[_0x5b9eae(0x20e)]({'stop':'restart'},_0x59a4d2=>{});}function noslash(_0x1d67fe){const _0x259913=_0xe22841;return _0x1d67fe[_0x259913(0x1c9)]('/','');}function updateHighestFee(_0x579548){const _0x3d63b0=_0xe22841;if(_0x579548['reverse']){let _0x272dfa={'filled':_0x579548['filled']*_0x579548[_0x3d63b0(0x27a)],'amount':_0x579548['filled']*_0x579548[_0x3d63b0(0x27a)],'side':_0x579548[_0x3d63b0(0x26f)]==_0x3d63b0(0x1ac)?_0x3d63b0(0x29b):_0x3d63b0(0x1ac),'price':0x1/_0x579548['price']};_0x579548={..._0x579548,..._0x272dfa};}const _0x2cc528=defaultFee*_0x579548['filled']*_0x579548['price'];lastFees[_0x3d63b0(0x1a0)][_0x3d63b0(0x26a)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x3d63b0(0x1a0)][_0x3d63b0(0x29a)](_0x2cc528),lastFees['highest']=Math[_0x3d63b0(0x219)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1ca73d){const _0x47a2a8=_0xe22841;logger[_0x47a2a8(0x184)]('0\x20-\x20EXECUTION:\x20'+_0x1ca73d[_0x47a2a8(0x146)]+_0x47a2a8(0x21a)+_0x1ca73d[_0x47a2a8(0x10b)]+_0x47a2a8(0x21a)+_0x1ca73d['id']);let _0x202e1b=_0x1ca73d[_0x47a2a8(0x10b)],_0x1cff96=![];currentCoins[_0x47a2a8(0x1be)](_0x287a57=>{const _0xb51c9c=_0x47a2a8;_0x287a57[_0xb51c9c(0x146)]==_0x1ca73d[_0xb51c9c(0x146)]&&(_0x1cff96=!![]);});if(!_0x1cff96)return;const _0x20541a=currentCoins[_0x47a2a8(0x160)](_0x5bbec3=>_0x5bbec3[_0x47a2a8(0x146)]==_0x1ca73d[_0x47a2a8(0x146)]),_0x46b262=_0x566afa=>{const _0x12bce6=_0x47a2a8;if(_0x20541a)_0x20541a[_0x12bce6(0x200)]=_0x566afa;};if(_0x202e1b==_0x47a2a8(0x290))_0x46b262('open');else{if(_0x202e1b=='canceled'){_0x46b262(_0x47a2a8(0x26c));const _0x23e5a2=await getCoins();[currentCoins,currentCoinsAll]=_0x23e5a2,await getOpenOrders(),handleOpenOrders();}else{if(_0x202e1b==_0x47a2a8(0x227)){logger[_0x47a2a8(0x184)]('1\x20-\x20FILLED:\x20'+_0x1ca73d[_0x47a2a8(0x146)]+_0x47a2a8(0x21a)+_0x1ca73d[_0x47a2a8(0x28d)]+'\x20|\x20'+_0x1ca73d['id']);let _0x1973f6=![];if(lastOrders)for(const _0x17b9c3 of lastOrders){const _0x38a4a7=0xc8,_0xc78da8=0x1388;let _0x3e002e=0x0;while(!_0x17b9c3[_0x47a2a8(0x232)]&&_0x3e002e*_0x38a4a7<_0xc78da8){_0x3e002e++,await sleep(_0x38a4a7);}if(_0x3e002e>0x0)logger['debug'](_0x47a2a8(0x283)+_0x3e002e*_0x38a4a7/0x3e8+_0x47a2a8(0x119));if(_0x17b9c3['orderId']==_0x1ca73d['id']){logger['debug'](_0x47a2a8(0x1db)+_0x1ca73d['id']),_0x1973f6=!![];if(_0x17b9c3[_0x47a2a8(0x28d)]==0x0){logger[_0x47a2a8(0x184)](_0x47a2a8(0x20b)+_0x1ca73d['id']);if(_0x1ca73d[_0x47a2a8(0x1bb)])_0x17b9c3[_0x47a2a8(0x27a)]=_0x1ca73d[_0x47a2a8(0x1bb)];else{if(_0x1ca73d[_0x47a2a8(0x27a)])_0x17b9c3[_0x47a2a8(0x27a)]=_0x1ca73d[_0x47a2a8(0x27a)];else{}}_0x17b9c3[_0x47a2a8(0x28d)]=_0x1ca73d[_0x47a2a8(0x28d)],updateHighestFee(_0x17b9c3),_0x46b262(_0x47a2a8(0x28d)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x4b6f2f=await getCoins();[currentCoins,currentCoinsAll]=_0x4b6f2f;}_0x17b9c3['fee']={'currency':_0x1ca73d[_0x47a2a8(0x205)]?_0x1ca73d[_0x47a2a8(0x205)][_0x47a2a8(0x23c)]:null,'cost':_0x1ca73d[_0x47a2a8(0x205)]?_0x1ca73d[_0x47a2a8(0x205)][_0x47a2a8(0x126)]:0x0},await updateCoinResults(_0x17b9c3);}}}if(!_0x1973f6){logger[_0x47a2a8(0x184)](_0x47a2a8(0x223)+_0x1ca73d['id']),_0x46b262(_0x47a2a8(0x28d));const _0x5f3ae2=await getCoins();[currentCoins,currentCoinsAll]=_0x5f3ae2,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x39332c=JSON[_0x47a2a8(0x122)](lastBalances['portfolio']);const _0xe9d0e6=_0x39332c[_0x47a2a8(0x160)](_0x50f939=>_0x50f939[_0x47a2a8(0x146)]==_0x1ca73d['symbol']);if(_0xe9d0e6){if(_0x202e1b=='open')_0xe9d0e6[_0x47a2a8(0x200)]=_0xe9d0e6[_0x47a2a8(0x200)]==_0x47a2a8(0x28d)?'filled':_0x47a2a8(0x290);else{if(_0x202e1b==_0x47a2a8(0x26c))_0xe9d0e6[_0x47a2a8(0x200)]=_0xe9d0e6['orderstatus']==_0x47a2a8(0x28d)?_0x47a2a8(0x28d):_0x47a2a8(0x26c);else _0x202e1b==_0x47a2a8(0x227)&&(_0xe9d0e6[_0x47a2a8(0x200)]=_0x47a2a8(0x28d));}}lastBalances={...lastBalances,'portfolio':JSON[_0x47a2a8(0x1c2)](_0x39332c)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0xc89ae2=![];currentCoins['forEach'](_0x33bb5e=>{const _0x4b17c5=_0x4ce9;_0xc89ae2=allOpenOrders[_0x4b17c5(0x160)](_0x338330=>_0x338330[_0x4b17c5(0x146)]==_0x33bb5e[_0x4b17c5(0x146)]),_0x33bb5e[_0x4b17c5(0x200)]=_0xc89ae2?_0x4b17c5(0x290):_0x4b17c5(0x190);});}async function getCoins(_0x160946=!![],_0x52327a=config[_0xe22841(0x124)]){const _0x54265d=_0xe22841;let _0x2d8c6c,_0x36e8a0=[],_0x25cd27=[],_0x54a41a=[],_0x58400c=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2d8c6c=await exchange['fetchBalance'](),mybalances=_0x2d8c6c[_0x54265d(0x27d)];for(const [_0xa7b2a1,_0x12a37b]of Object[_0x54265d(0x23e)](mybalances)){_0x58400c[_0x54265d(0x29a)](_0xa7b2a1);}if(_0x52327a=='')for(const [_0x1f567d,_0x3a809a]of Object[_0x54265d(0x23e)](mybalances)){_0x3a809a!=0x0&&_0x25cd27['push']({'coin':_0x1f567d});}else{let _0x118319=![];for(const [_0x7b762a,_0x3459da]of Object[_0x54265d(0x23e)](mybalances)){if(_0x58400c[_0x54265d(0x228)](_0x7b762a)){const _0x3fb9cc=config[_0x54265d(0x12c)][_0x54265d(0x160)](_0x2d149b=>_0x2d149b['coin']==_0x7b762a),_0x1b2c23=_0x7b762a+'/'+_0x52327a,_0x3bb77d=_0x52327a+'/'+_0x7b762a,_0x1d4811=currentCoins['find'](_0x363512=>_0x363512[_0x54265d(0x141)]==_0x7b762a);_0x118319=![];if((_0x3459da!=0x0||_0x3fb9cc)&&(allSymbols['includes'](_0x1b2c23)||_0x7b762a==_0x52327a))_0x7b762a!=_0x52327a&&_0x36e8a0['push'](_0x1b2c23),_0x25cd27[_0x54265d(0x29a)]({'coin':_0x7b762a,'symbol':_0x1b2c23,'reverse':![],'number':Math[_0x54265d(0x219)](_0x3459da+(_0x3fb9cc&&_0x3fb9cc['offset']||0x0),0x0),'orderstatus':_0x1d4811?_0x1d4811[_0x54265d(0x200)]:_0x54265d(0x190)});else(_0x3459da!=0x0||_0x3fb9cc)&&allSymbols[_0x54265d(0x228)](_0x3bb77d)&&(_0x7b762a!=_0x52327a&&_0x36e8a0[_0x54265d(0x29a)](_0x3bb77d),_0x25cd27[_0x54265d(0x29a)]({'coin':_0x7b762a,'symbol':_0x3bb77d,'reverse':!![],'number':Math['max'](_0x3459da+(_0x3fb9cc&&_0x3fb9cc[_0x54265d(0x136)]||0x0),0x0),'orderstatus':_0x1d4811?_0x1d4811[_0x54265d(0x200)]:'none'}));}}}}catch(_0x9a2bca){if(!_0x160946)handleErrorNoStop(_0x9a2bca,_0x54265d(0x127));else await handleError(_0x9a2bca,_0x54265d(0x127));}return _0x54a41a=cloneDeep(_0x25cd27),_0x25cd27=_0x25cd27[_0x54265d(0x1f2)](_0x3fbd52=>{const _0x214e3f=_0x54265d,_0x2d8221=config[_0x214e3f(0x12c)][_0x214e3f(0x160)](_0x4c0ad1=>_0x4c0ad1[_0x214e3f(0x141)]==_0x3fbd52[_0x214e3f(0x141)]);return _0x2d8221&&!_0x2d8221[_0x214e3f(0x236)];}),[_0x25cd27,_0x54a41a];}async function getCoinNumber(_0x241ec4){const _0x4cc0ac=_0xe22841;let _0x2f8868;try{const _0x11c6d8=await exchange['fetchBalance']();_0x2f8868=_0x11c6d8[_0x4cc0ac(0x27d)][_0x241ec4];}catch(_0x408bf6){await handleError(_0x408bf6,_0x4cc0ac(0x1ab));}return _0x2f8868;}async function getOpenOrders(){const _0x591f6b=_0xe22841;let _0x113568;allOpenOrders=[];try{for(const _0x10ff57 of config[_0x591f6b(0x12c)]){!_0x10ff57['excluded']&&_0x10ff57[_0x591f6b(0x141)]!=config[_0x591f6b(0x124)]&&(_0x113568=await exchange[_0x591f6b(0x271)](_0x10ff57['symbol']),_0x113568[_0x591f6b(0x26a)]>0x0&&allOpenOrders['push'](_0x113568[0x0]));}}catch(_0x4e823e){await handleError(_0x4e823e,_0x591f6b(0x112));}}async function handleOpenOrders(_0x25a12c=0x0){const _0x3d4bf3=_0xe22841;allOpenOrders['length']==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x25a12c==0x0?(logger[_0x3d4bf3(0x184)](_0x3d4bf3(0x1c1)),_0x25a12c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x3d4bf3(0x1d0)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x3daa4c){const _0x390139=_0xe22841,_0x58db7c=ccxt['pro'][_0x3daa4c[_0x390139(0x16a)][_0x390139(0x1fa)]()],_0x4f3f92=new _0x58db7c({'apiKey':_0x3daa4c[_0x390139(0x17d)],'secret':_0x3daa4c[_0x390139(0x16b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x390139(0x266)}});if(_0x3daa4c[_0x390139(0x165)])_0x4f3f92['password']=_0x3daa4c[_0x390139(0x165)];try{await _0x4f3f92[_0x390139(0x1c6)]();}catch(_0x4132b2){throw _0x4132b2;}}function cloneDeep(_0x2c2e49){const _0x245bec=_0xe22841;return JSON[_0x245bec(0x122)](JSON[_0x245bec(0x1c2)](_0x2c2e49));}async function getPortfolio(_0x47d9ea){const _0x32ba39=_0xe22841;let _0xaead7e=[],_0x2931b2=[],_0x2c689e=[],_0x3381fb;if(_0x47d9ea['apiKey']!==_0x32ba39(0x241)||_0x47d9ea['apiSecret']!=='************'||_0x47d9ea[_0x32ba39(0x165)]&&_0x47d9ea[_0x32ba39(0x165)]!==_0x32ba39(0x241)){if(config[_0x32ba39(0x16a)]){if(_0x47d9ea['apiKey']=='************')_0x47d9ea[_0x32ba39(0x17d)]=config['apiKey'];if(_0x47d9ea[_0x32ba39(0x16b)]==_0x32ba39(0x241))_0x47d9ea[_0x32ba39(0x16b)]=config['apiSecret'];if(_0x47d9ea[_0x32ba39(0x165)]==_0x32ba39(0x241))_0x47d9ea['apiPassword']=config['apiPassword'];try{await testAPI(_0x47d9ea);}catch(_0x3f5537){if(_0x3f5537[_0x32ba39(0x1c3)]()[_0x32ba39(0x228)](_0x32ba39(0x1df))){logger[_0x32ba39(0x184)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x32ba39(0x12c),![]);return;}else{handleError(_0x3f5537,_0x32ba39(0x25c));return;}}}await initExchange(_0x47d9ea[_0x32ba39(0x16a)],_0x47d9ea[_0x32ba39(0x17d)],_0x47d9ea[_0x32ba39(0x16b)],_0x47d9ea[_0x32ba39(0x165)]);try{await loadSymbols(_0x47d9ea[_0x32ba39(0x16a)]);}catch(_0x3698e4){if(_0x3698e4['toString']()['includes']('AuthenticationError')){proxyEmit('portfolio',![]);return;}else{handleError(_0x3698e4,_0x32ba39(0x264));return;}}const _0x3fa21e=await getCoins(![],_0x47d9ea[_0x32ba39(0x124)]);_0x2c689e=cloneDeep(_0x3fa21e[0x1]);}else _0x2c689e=cloneDeep(currentCoinsAll);if(_0x47d9ea[_0x32ba39(0x124)]=='')proxyEmit(_0x32ba39(0x12c),_0x2c689e);else{_0x2c689e[_0x32ba39(0x1be)](_0x5c89c7=>{const _0x423213=_0x32ba39;if(_0x5c89c7['coin']!=_0x47d9ea[_0x423213(0x124)])_0xaead7e[_0x423213(0x29a)](_0x5c89c7[_0x423213(0x146)]);});if(_0xaead7e['length']==0x0)logHistory('error',_0x32ba39(0x19e));else{try{_0x2931b2=await exchange['fetchTickers'](_0xaead7e);}catch(_0x35905e){if(_0x35905e['toString']()[_0x32ba39(0x228)](_0x32ba39(0x1df))){proxyEmit(_0x32ba39(0x12c),![]);return;}else{handleError(_0x35905e,_0x32ba39(0x211));return;}}_0x2c689e[_0x32ba39(0x1be)](_0x1a18a3=>{const _0xf14be8=_0x32ba39;_0x1a18a3[_0xf14be8(0x141)]!=_0x47d9ea[_0xf14be8(0x124)]?_0x3381fb=_0x1a18a3[_0xf14be8(0x25b)]?0x1/_0x2931b2[_0x1a18a3['symbol']]['last']:_0x2931b2[_0x1a18a3['symbol']][_0xf14be8(0x25e)]:_0x3381fb=0x1,_0x1a18a3['price']=formatResult(_0x3381fb,0x8);}),proxyEmit('portfolio',_0x2c689e);}}}function truncateTradeAmount(_0x7ccd47,_0x5dba79){const _0x3a451e=_0xe22841;let _0x460c54=0x0;try{_0x460c54=exchange[_0x3a451e(0x17e)](_0x7ccd47,_0x5dba79);}catch(_0x299b28){}return _0x460c54;}function checkMinimums(_0x10879b){const _0x1af084=_0xe22841;let _0x3341f4=!![];const _0x528469=!_0x10879b['reverse']?markets[_0x10879b[_0x1af084(0x146)]]['limits']['amount'][_0x1af084(0x15d)]:markets[_0x10879b[_0x1af084(0x146)]]['limits']['cost']['min'],_0x65101=!_0x10879b['reverse']?markets[_0x10879b['symbol']]['limits'][_0x1af084(0x126)][_0x1af084(0x15d)]:markets[_0x10879b[_0x1af084(0x146)]]['limits'][_0x1af084(0x222)][_0x1af084(0x15d)],_0x507287=truncateTradeAmount(_0x10879b[_0x1af084(0x146)],_0x10879b[_0x1af084(0x181)]);_0x10879b['trade']=_0x507287;if(Math[_0x1af084(0x11c)](_0x507287)<_0x528469)_0x3341f4=![];if(Math[_0x1af084(0x11c)](_0x507287)*_0x10879b['last']<_0x65101)_0x3341f4=![];if(_0x10879b[_0x1af084(0x26f)]==_0x1af084(0x1ac)){let _0x44fb5e=config[_0x1af084(0x12c)][_0x1af084(0x160)](_0x5748c3=>_0x5748c3[_0x1af084(0x141)]==_0x10879b[_0x1af084(0x141)]);if(_0x44fb5e[_0x1af084(0x136)]>0x0){if(Math['abs'](_0x507287)>_0x10879b[_0x1af084(0x15f)]-_0x44fb5e[_0x1af084(0x136)])_0x3341f4=![];}else{if(Math['abs'](_0x507287)>_0x10879b[_0x1af084(0x15f)])_0x3341f4=![];}}if(_0x10879b[_0x1af084(0x26f)]==_0x1af084(0x29b)){let _0x11a224=config[_0x1af084(0x12c)][_0x1af084(0x160)](_0x11e1dc=>_0x11e1dc[_0x1af084(0x141)]==config[_0x1af084(0x124)]),_0x1a46c7=currentCoins[_0x1af084(0x160)](_0x40a560=>_0x40a560[_0x1af084(0x141)]==config[_0x1af084(0x124)]);if(_0x11a224[_0x1af084(0x136)]>0x0){if(Math[_0x1af084(0x11c)](_0x507287)*_0x10879b[_0x1af084(0x25e)]>_0x1a46c7[_0x1af084(0x15f)]-_0x11a224['offset'])_0x3341f4=![];}else{if(Math[_0x1af084(0x11c)](_0x507287)*_0x10879b[_0x1af084(0x25e)]>_0x1a46c7[_0x1af084(0x15f)])_0x3341f4=![];}}return _0x3341f4;}async function getBalances(_0x34c19d=!![]){const _0x3617d0=_0xe22841;let _0x428144=0x0,_0x1db116;const _0x53929c=config[_0x3617d0(0x220)];if(config[_0x3617d0(0x247)]&&config[_0x3617d0(0x167)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x5f4829=>{const _0x1b484c=_0x3617d0;if(_0x5f4829[_0x1b484c(0x141)]!=config[_0x1b484c(0x124)]){let _0x449cfe=global[_0x1b484c(0x17c)][noslash(_0x5f4829[_0x1b484c(0x146)])];_0x1db116=_0x5f4829['reverse']?0x1/_0x449cfe:_0x449cfe;}else _0x1db116=0x1;let _0x44e9ca=_0x5f4829[_0x1b484c(0x15f)]*_0x1db116;_0x428144+=_0x44e9ca,_0x5f4829[_0x1b484c(0x25e)]=formatResult(Number(_0x1db116),0x8),_0x5f4829[_0x1b484c(0x1bc)]=_0x44e9ca;}),currentCoins[_0x3617d0(0x1be)](_0x101334=>{const _0x2fb85d=_0x3617d0;let _0x41664f=config['portfolio'][_0x2fb85d(0x160)](_0x228add=>_0x228add[_0x2fb85d(0x141)]==_0x101334[_0x2fb85d(0x141)]),_0x5838fb=Number(_0x41664f['distribution']),_0x30453f=_0x101334[_0x2fb85d(0x1bc)]/_0x428144*0x64,_0xc35e8=_0x5838fb*_0x428144/0x64/_0x101334[_0x2fb85d(0x25e)]-_0x101334['number'];_0x101334[_0x2fb85d(0x129)]=formatResult(_0x30453f,0x3),_0x101334[_0x2fb85d(0x1fb)]=formatResult(_0x5838fb,0x3),_0x101334['trade']=formatResult(_0xc35e8,0x8),_0x101334[_0x2fb85d(0x26f)]='',_0x101334[_0x2fb85d(0x21e)]=![];if(_0x101334[_0x2fb85d(0x141)]!=config[_0x2fb85d(0x124)]){if(_0x101334['distribution']>_0x5838fb)_0x101334['side']=_0x2fb85d(0x1ac),_0x101334[_0x2fb85d(0x21e)]=checkMinimums(_0x101334);else _0x101334[_0x2fb85d(0x129)]<_0x5838fb&&(_0x101334['side']=_0x2fb85d(0x29b),_0x101334[_0x2fb85d(0x21e)]=checkMinimums(_0x101334));}_0x101334[_0x2fb85d(0x1ae)]=_0x101334[_0x2fb85d(0x129)]/_0x101334[_0x2fb85d(0x1fb)]-0x1;if(_0x101334[_0x2fb85d(0x200)]=='filled'||_0x101334[_0x2fb85d(0x200)]==_0x2fb85d(0x26c))_0x101334[_0x2fb85d(0x200)]=_0x2fb85d(0x190);}),currentCoins[_0x3617d0(0x11f)]((_0x411285,_0x211746)=>_0x411285[_0x3617d0(0x1ae)]<_0x211746[_0x3617d0(0x1ae)]?0x1:_0x211746[_0x3617d0(0x1ae)]<_0x411285[_0x3617d0(0x1ae)]?-0x1:0x0);const _0x6e33eb=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x6e33eb[_0x3617d0(0x1f6)],'usd':_0x6e33eb[_0x3617d0(0x29c)],'portfolio':JSON[_0x3617d0(0x1c2)](currentCoins),'threshold':_0x53929c},proxyEmit(_0x3617d0(0x233),{'serverversion':serverversion,'balances':lastBalances});if(_0x34c19d){if(config[_0x3617d0(0x247)])headlessMode({'portfolio':currentCoins,'threshold':_0x53929c});else{if(lockOrders==ORDERS[_0x3617d0(0x135)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x53929c});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x1e30e9=getNormalizedPerformance();getStartingBalances(_0x1e30e9),emitPerformance(_0x1e30e9);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x5b32b7=getNormalizedPerformance();emitPerformance(_0x5b32b7),getStartingBalances(_0x5b32b7),logger[_0x3617d0(0x184)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xc73ef6=_0xe22841;if(!lastBalances)return;let _0x119221=[],_0x41fce1,_0x186248=JSON[_0xc73ef6(0x122)](lastBalances[_0xc73ef6(0x12c)]);_0x186248[_0xc73ef6(0x11f)]((_0x4d0d8c,_0x150330)=>_0x4d0d8c[_0xc73ef6(0x141)]>_0x150330['coin']?0x1:_0x150330[_0xc73ef6(0x141)]>_0x4d0d8c['coin']?-0x1:0x0),_0x186248[_0xc73ef6(0x1be)](_0x57c2b3=>{const _0x29038b=_0xc73ef6;let _0x19ca00={'coin':_0x57c2b3[_0x29038b(0x141)],'number':_0x57c2b3[_0x29038b(0x15f)],'price':_0x57c2b3['last']};_0x119221[_0x29038b(0x29a)](_0x19ca00);});const _0x1a21b4=await getFiat();_0x41fce1={'date':lastBalances[_0xc73ef6(0x202)]['split']('\x20')[0x0],'eur':_0x1a21b4[_0xc73ef6(0x1f6)],'usd':_0x1a21b4['usd'],'coins':_0x119221};let _0x27831e=dbPerformance[_0xc73ef6(0x293)]('data')['find']({'date':_0x41fce1[_0xc73ef6(0x22b)]})[_0xc73ef6(0x1bc)]();_0x27831e?_0x41fce1[_0xc73ef6(0x22b)]!=config[_0xc73ef6(0x215)]&&dbPerformance['get'](_0xc73ef6(0x298))[_0xc73ef6(0x160)]({'date':_0x41fce1[_0xc73ef6(0x22b)]})[_0xc73ef6(0x182)](_0x41fce1)['write']():dbPerformance['get'](_0xc73ef6(0x298))[_0xc73ef6(0x29a)](_0x41fce1)[_0xc73ef6(0x162)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1f8288=_0xe22841;let _0x1593ec=[];if(dbPerformance['has']('data')[_0x1f8288(0x1bc)]()){let _0x2f2da9=dbPerformance[_0x1f8288(0x293)]('data')['cloneDeep']()['filter'](_0x2d58ef=>{const _0xe66cc2=_0x1f8288;if(_0x2d58ef[_0xe66cc2(0x218)][_0xe66cc2(0x26a)]==0x0)return![];else return!![];})[_0x1f8288(0x212)](_0x1f8288(0x22b))[_0x1f8288(0x1bc)](),_0x234024=[...config[_0x1f8288(0x131)]];_0x234024[_0x1f8288(0x11f)]((_0xa5f27b,_0x99f1eb)=>_0xa5f27b['date']>_0x99f1eb[_0x1f8288(0x22b)]?-0x1:_0x99f1eb[_0x1f8288(0x22b)]>_0xa5f27b[_0x1f8288(0x22b)]?0x1:0x0);let _0x4d0c86=0x1,_0x161b6e=[],_0x5a1da4=0x0;_0x2f2da9[_0x1f8288(0x10d)]()[_0x1f8288(0x25b)]()[_0x1f8288(0x1be)]((_0x3001f9,_0x58f233)=>{const _0x4d138f=_0x1f8288;if(_0x234024[_0x5a1da4]){if(_0x2f2da9[_0x2f2da9[_0x4d138f(0x26a)]-_0x58f233]&&_0x234024[_0x5a1da4][_0x4d138f(0x22b)]==_0x2f2da9[_0x2f2da9[_0x4d138f(0x26a)]-_0x58f233][_0x4d138f(0x22b)]){if(_0x58f233<_0x2f2da9[_0x4d138f(0x26a)]){let _0x561b4c=0x0,_0x2943ca=0x0;_0x2f2da9[_0x2f2da9[_0x4d138f(0x26a)]-_0x58f233]['coins'][_0x4d138f(0x1be)](_0x182397=>{const _0x5afa69=_0x4d138f;_0x2943ca+=_0x182397['number']*_0x182397[_0x5afa69(0x27a)];}),_0x234024[_0x5a1da4][_0x4d138f(0x24d)][_0x4d138f(0x1be)](_0x179583=>{const _0x1c3a97=_0x4d138f;_0x561b4c+=_0x179583['number']*_0x179583[_0x1c3a97(0x27a)];}),_0x4d0c86*=_0x561b4c/(_0x2943ca-_0x561b4c)+0x1;}_0x5a1da4++;}}let _0x56d492=0x0;_0x3001f9[_0x4d138f(0x218)][_0x4d138f(0x1be)](_0x1b658d=>{const _0x144584=_0x4d138f;_0x56d492+=_0x1b658d['number']*_0x1b658d[_0x144584(0x27a)];}),_0x161b6e[_0x2f2da9[_0x4d138f(0x26a)]-_0x58f233-0x1]=_0x56d492*(_0x4d0c86-0x1);});let _0x244ff9=[];_0x234024=[...config[_0x1f8288(0x131)]]||[];let _0x1911ad=0x0;_0x5a1da4=0x0,_0x2f2da9[_0x1f8288(0x1be)]((_0xcd4902,_0x50b3a2)=>{const _0x219385=_0x1f8288;if(_0x234024[_0x5a1da4]){const _0x167eb8=fns[_0x219385(0x122)](_0x234024[_0x5a1da4][_0x219385(0x22b)],_0x219385(0x1f7),new Date()),_0x42704b=fns[_0x219385(0x122)](_0xcd4902['date'],_0x219385(0x1f7),new Date());if(fns[_0x219385(0x27f)](_0x167eb8,_0x42704b)){let _0xe7d088=0x0;_0x234024[_0x5a1da4][_0x219385(0x24d)][_0x219385(0x1be)](_0x31b0e5=>{const _0x571aa1=_0x219385;!_0x244ff9[_0x31b0e5[_0x571aa1(0x141)]]?_0x244ff9[_0x31b0e5[_0x571aa1(0x141)]]=_0x31b0e5['number']:(_0xe7d088=_0x244ff9[_0x31b0e5[_0x571aa1(0x141)]],_0x244ff9[_0x31b0e5[_0x571aa1(0x141)]]+=_0x31b0e5[_0x571aa1(0x15f)]);const _0xc884de=_0xcd4902[_0x571aa1(0x218)]['find'](_0x1f3462=>_0x1f3462[_0x571aa1(0x141)]==_0x31b0e5[_0x571aa1(0x141)]);(!_0xc884de||_0xc884de[_0x571aa1(0x15f)]==0x0)&&(_0x1911ad+=(-_0x31b0e5[_0x571aa1(0x15f)]-_0xe7d088)*_0x31b0e5['price']);}),_0x5a1da4++;}}_0xcd4902[_0x219385(0x218)]['forEach']((_0x4cbdac,_0x3cef34)=>{const _0x1db141=_0x219385;_0x244ff9[_0x4cbdac['coin']]&&(_0x4cbdac[_0x1db141(0x1e7)]=_0x244ff9[_0x4cbdac[_0x1db141(0x141)]]);}),_0x1593ec[_0x219385(0x29a)]({'date':_0xcd4902[_0x219385(0x22b)],'eur':_0xcd4902[_0x219385(0x1f6)],'usd':_0xcd4902[_0x219385(0x29c)],'offset':_0x161b6e[_0x50b3a2],'netoffset':_0x1911ad,'coins':_0xcd4902[_0x219385(0x218)]});});}return _0x1593ec;}function emitPerformance(_0x98ee38){const _0x43b522=_0xe22841;_0x98ee38[_0x43b522(0x26a)]!==0x0?(proxyEmit(_0x43b522(0x1b6),_0x98ee38),lastPerformanceEmitted=getDate()):proxyEmit(_0x43b522(0x1b6),[]);}function getPerf(_0x177b99,_0x11237e){const _0x22926e=_0xe22841;let _0xbf2c12=0x0,_0x48bbb4=0x0,_0x13c7c1=0x0;_0x177b99[_0x22926e(0x218)]['forEach'](_0x3bb717=>{const _0x4db511=_0x22926e;_0xbf2c12+=_0x3bb717['number']*_0x3bb717[_0x4db511(0x27a)];});_0x11237e&&(_0xbf2c12+=_0x177b99[_0x22926e(0x136)]);if(config[_0x22926e(0x124)]===_0x22926e(0x10f)||config[_0x22926e(0x124)]==='ETH')_0x48bbb4=_0xbf2c12*_0x177b99[_0x22926e(0x1f6)],_0x13c7c1=_0xbf2c12*_0x177b99[_0x22926e(0x29c)];else{if(usdBasecoins[_0x22926e(0x228)](config[_0x22926e(0x124)]))_0x48bbb4=_0xbf2c12*_0x177b99[_0x22926e(0x1f6)]/_0x177b99[_0x22926e(0x29c)],_0x13c7c1=_0xbf2c12;else config[_0x22926e(0x124)]===_0x22926e(0x151)&&(_0x48bbb4=_0xbf2c12,_0x13c7c1=_0xbf2c12*_0x177b99[_0x22926e(0x29c)]/_0x177b99[_0x22926e(0x1f6)]);}return[_0xbf2c12,_0x48bbb4,_0x13c7c1];}function getKPIs(_0x3f8b8d,_0x1990e8=_0xe22841(0x151)){const _0x1efab9=_0xe22841,_0x3c80e8=config[_0x1efab9(0x124)],_0x1fcad4=lastBalances,_0x26c269=currentCoins,_0x28fd2a=getNormalizedPerformance(),_0x11d2fd=_0x3f8b8d==='basecoin'?_0x3c80e8:_0x3f8b8d==='fiat'||_0x3f8b8d===_0x1efab9(0x18a)?_0x1990e8:_0x1efab9(0x276)+_0x3c80e8,_0x358089=_0x3f8b8d===_0x1efab9(0x201)?'Net\x20effect':_0x3f8b8d===_0x1efab9(0x18a)?_0x1efab9(0x214):_0x11d2fd+'\x20value',_0x35925c=_0x3f8b8d===_0x1efab9(0x201)||_0x3f8b8d===_0x1efab9(0x18a)?'Net\x20effect':_0x11d2fd+_0x1efab9(0x289);let _0x221169=0x0;_0x26c269[_0x1efab9(0x1be)](_0xb6bbe5=>{const _0x298c3a=_0x1efab9;_0x221169+=_0xb6bbe5[_0x298c3a(0x15f)]*_0xb6bbe5[_0x298c3a(0x25e)];});if(_0x3f8b8d===_0x1efab9(0x1d7)||_0x3f8b8d===_0x1efab9(0x18a)){if(_0x3c80e8==='BTC'||_0x3c80e8==='ETH')_0x221169=_0x221169*(_0x1990e8===_0x1efab9(0x151)?_0x1fcad4[_0x1efab9(0x1f6)]:_0x1fcad4[_0x1efab9(0x29c)]);else{if(usdBasecoins[_0x1efab9(0x228)](_0x3c80e8))_0x221169=_0x221169*(_0x1990e8===_0x1efab9(0x151)?_0x1fcad4[_0x1efab9(0x1f6)]/_0x1fcad4['usd']:0x1);else _0x3c80e8===_0x1efab9(0x151)&&(_0x221169=_0x221169*(_0x1990e8==='EUR'?0x1:_0x1fcad4[_0x1efab9(0x29c)]/_0x1fcad4[_0x1efab9(0x1f6)]));}}let _0x21bf3a;if(_0x221169!==0x0){if(_0x3f8b8d===_0x1efab9(0x124))_0x21bf3a=(_0x221169/startingBalances[_0x1efab9(0x124)]-0x1)*0x64;else{if(_0x1990e8===_0x1efab9(0x151))_0x21bf3a=(_0x221169/startingBalances['eur']-0x1)*0x64;else _0x21bf3a=(_0x221169/startingBalances[_0x1efab9(0x29c)]-0x1)*0x64;}let _0x34574a=0x0;if(startingBalances[_0x1efab9(0x218)])_0x26c269[_0x1efab9(0x1be)](_0x4d91bd=>{const _0xdca57e=_0x1efab9;let _0x5633b1=startingBalances[_0xdca57e(0x218)][_0xdca57e(0x160)](_0xee297f=>_0xee297f[_0xdca57e(0x141)]===_0x4d91bd[_0xdca57e(0x141)]);if(_0x5633b1&&_0x5633b1[_0xdca57e(0x141)]&&_0x4d91bd[_0xdca57e(0x15f)]!==0x0)_0x34574a+=_0x5633b1[_0xdca57e(0x15f)]*_0x4d91bd[_0xdca57e(0x25e)];});let _0x23e085=0x0;if(_0x28fd2a[_0x1efab9(0x26a)]!==0x0){let _0x6d5c9a=_0x28fd2a[_0x28fd2a[_0x1efab9(0x26a)]-0x1];_0x23e085=_0x6d5c9a['netoffset'];}_0x34574a-=_0x23e085;_0x3f8b8d===_0x1efab9(0x201)&&(_0x21bf3a=(_0x221169-_0x34574a)/startingBalances[_0x1efab9(0x124)]*0x64,_0x221169=_0x221169-_0x34574a);if(_0x3f8b8d===_0x1efab9(0x18a)){let _0x4a6f59=_0x1990e8===_0x1efab9(0x151)?startingBalances[_0x1efab9(0x1f6)]:startingBalances[_0x1efab9(0x29c)];if(_0x3c80e8===_0x1efab9(0x10f)||_0x3c80e8===_0x1efab9(0x128))_0x34574a=_0x1990e8===_0x1efab9(0x151)?_0x34574a*_0x1fcad4[_0x1efab9(0x1f6)]:_0x34574a*_0x1fcad4['usd'];else{if(usdBasecoins['includes'](_0x3c80e8))_0x34574a=_0x1990e8===_0x1efab9(0x151)?_0x34574a*_0x1fcad4['eur']/_0x1fcad4[_0x1efab9(0x29c)]:_0x34574a;else _0x3c80e8===_0x1efab9(0x151)&&(_0x34574a=_0x1990e8==='EUR'?_0x34574a:_0x34574a*_0x1fcad4['usd']/_0x1fcad4['eur']);}_0x21bf3a=(_0x221169-_0x34574a)/_0x4a6f59*0x64,_0x221169=_0x221169-_0x34574a;}if(_0x21bf3a){if(_0x21bf3a<0x64)_0x21bf3a=_0x21bf3a[_0x1efab9(0x149)](0x2);else{if(_0x21bf3a<0x3e8)_0x21bf3a=_0x21bf3a[_0x1efab9(0x149)](0x1);else _0x21bf3a=_0x21bf3a[_0x1efab9(0x149)](0x0);}}else _0x21bf3a=Number('0')['toFixed'](0x2);if(_0x221169){if(Math['abs'](_0x221169)<0.000001)_0x221169=_0x221169['toFixed'](0x2);else{if(Math[_0x1efab9(0x11c)](_0x221169)<0.1)_0x221169=_0x221169[_0x1efab9(0x149)](0x6);else{if(Math[_0x1efab9(0x11c)](_0x221169)<0x1)_0x221169=_0x221169[_0x1efab9(0x149)](0x5);else{if(Math[_0x1efab9(0x11c)](_0x221169)<0xa)_0x221169=_0x221169['toFixed'](0x4);else{if(Math[_0x1efab9(0x11c)](_0x221169)<0x64)_0x221169=_0x221169[_0x1efab9(0x149)](0x3);else{if(Math[_0x1efab9(0x11c)](_0x221169)<0x3e8)_0x221169=_0x221169[_0x1efab9(0x149)](0x2);else _0x221169=_0x221169[_0x1efab9(0x149)](0x2);}}}}}}else _0x221169=Number('0')['toFixed'](0x2);}else _0x21bf3a=Number('0')[_0x1efab9(0x149)](0x2);return{'value':_0x221169,'change':_0x21bf3a,'leftTxt':_0x358089,'rightTxt':_0x35925c};}async function getStartingBalances(_0x242028,_0x38191d=!![]){const _0x77d8f=_0xe22841;if(_0x242028[_0x77d8f(0x26a)]!==0x0){const [_0x52b974,_0x2ff333,_0x346dea]=getPerf(_0x242028[0x0],!![]);let _0xf7b69e=[];config[_0x77d8f(0x12c)]['forEach'](_0x547765=>{const _0x5f56d0=_0x77d8f;let _0x5119c8=0x0,_0x23c3c1;config['liquidity'][_0x5f56d0(0x1be)](_0x18d3dc=>{const _0x828e33=_0x5f56d0;let _0x20268f=_0x18d3dc[_0x828e33(0x24d)][_0x828e33(0x160)](_0x2396c0=>_0x2396c0['coin']==_0x547765['coin']);if(_0x20268f){_0x5119c8+=_0x20268f[_0x828e33(0x15f)];if(!_0x23c3c1)_0x23c3c1=_0x20268f[_0x828e33(0x27a)];}}),_0xf7b69e[_0x5f56d0(0x29a)]({'coin':_0x547765[_0x5f56d0(0x141)],'number':_0x5119c8,'initialprice':_0x23c3c1});});const _0x25a1c6={'basecoin':_0x52b974,'eur':_0x2ff333,'usd':_0x346dea,'coins':_0xf7b69e};if(_0x38191d)proxyEmit('starting-balances',_0x25a1c6);startingBalances=_0x25a1c6;}}function headlessMode(_0x1e4950){const _0x4bde80=_0xe22841;let _0x144dc5=_0x1e4950[_0x4bde80(0x12c)],_0x1758f6=_0x1e4950[_0x4bde80(0x220)],_0x25b458=[];for(let _0x5bab27 of _0x144dc5){if(_0x5bab27[_0x4bde80(0x141)]!=config['basecoin']){if(_0x5bab27[_0x4bde80(0x1ae)]>=_0x1758f6/0x64){if(_0x5bab27[_0x4bde80(0x21e)])_0x25b458['push'](_0x5bab27);}else{if(_0x5bab27[_0x4bde80(0x1ae)]<=-_0x1758f6/0x64){if(_0x5bab27[_0x4bde80(0x21e)])_0x25b458[_0x4bde80(0x29a)](_0x5bab27);}}}}_0x25b458[_0x4bde80(0x26a)]>0x0&&placeOrder(_0x25b458);}function notifyBalance(_0x2514a2){const _0x2ecd20=_0xe22841;let _0x2ea6c8=_0x2514a2['portfolio'],_0x20f74d=_0x2514a2[_0x2ecd20(0x220)],_0x1470f1=[];for(let _0x1ff6c2 of _0x2ea6c8){if(_0x1ff6c2[_0x2ecd20(0x141)]!=config[_0x2ecd20(0x124)]){if(_0x1ff6c2['delta']>=_0x20f74d/0x64){if(_0x1ff6c2[_0x2ecd20(0x21e)])_0x1470f1['push'](_0x1ff6c2);}else{if(_0x1ff6c2[_0x2ecd20(0x1ae)]<=-_0x20f74d/0x64){if(_0x1ff6c2[_0x2ecd20(0x21e)])_0x1470f1['push'](_0x1ff6c2);}}}}if(_0x1470f1[_0x2ecd20(0x26a)]>0x0){let _0x42081e=_0x1470f1[_0x2ecd20(0x1ea)](_0x79624a=>_0x79624a['coin']);_0x42081e['sort']();let _0x3f8561=_0x42081e[_0x2ecd20(0x12d)](',\x20');if(!lastCoinsToBalance)logHistory(_0x2ecd20(0x1ed),_0x2ecd20(0x203));lastCoinsToBalance=_0x3f8561;}}function symbolToCoin(_0x55d070){const _0x97b7cd=_0xe22841;let _0x291ea7;if(_0x55d070[_0x97b7cd(0x228)]('/'+config['basecoin']))_0x291ea7=_0x55d070[_0x97b7cd(0x1c9)]('/'+config['basecoin'],'');if(_0x55d070[_0x97b7cd(0x228)](config[_0x97b7cd(0x124)]+'/'))_0x291ea7=_0x55d070[_0x97b7cd(0x1c9)](config['basecoin']+'/','');return _0x291ea7;}async function unlockOrders(){const _0x25757b=_0xe22841;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x25757b(0x184)](_0x25757b(0x1aa)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x260378=await getCoins();[currentCoins,currentCoinsAll]=_0x260378,validateOrdersState=_0x25757b(0x1e7),persistOpenOrders([]),lockOrders=ORDERS[_0x25757b(0x135)],logger[_0x25757b(0x184)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x20754c){const _0x55a4b3=_0xe22841;if(_0x20754c)validateOrdersState=_0x20754c;logger['debug'](_0x55a4b3(0x1e9)+validateOrdersState+_0x55a4b3(0x13a)+(lockOrders==0x1?_0x55a4b3(0x14e):lockOrders==0x2?_0x55a4b3(0x130):_0x55a4b3(0x229)));let _0x3bde85=[],_0x17d96d=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x55a4b3(0x287)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x55a4b3(0x274)])return;logger[_0x55a4b3(0x184)](_0x55a4b3(0x1e5)+validateOrdersState),lastOrders[_0x55a4b3(0x1be)](_0x97b28c=>{const _0x2cc09d=_0x55a4b3;let _0x3f018e=![];_0x97b28c[_0x2cc09d(0x28d)]>0x0&&(_0x3f018e=!![]),_0x3bde85[_0x2cc09d(0x29a)](_0x3f018e),_0x3f018e&&config[_0x2cc09d(0x240)]!=_0x2cc09d(0x195)&&logHistory(_0x2cc09d(0x1b0),_0x2cc09d(0x1d4)+_0x97b28c['symbol']+'\x20'+_0x97b28c['side']+'\x20#'+formatResult(_0x97b28c[_0x2cc09d(0x28d)],0x8)+'\x20@'+formatResult(_0x97b28c['price'],0x8));}),_0x3bde85['forEach']((_0x334531,_0xb76c70)=>{const _0x15ac48=_0x55a4b3;if(_0x334531)lastOrders[_0x15ac48(0x234)](_0xb76c70,0x1);}),persistOpenOrders(lastOrders);const _0x4e06f1=coolingDown?_0x55a4b3(0x113):_0x55a4b3(0x235);if(validateOrdersState=='initial'){validateOrdersState=_0x55a4b3(0x1fe);if(_0x3bde85['includes'](![])){if(config['ordertype']==_0x55a4b3(0x195)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x3bde85[_0x55a4b3(0x228)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x55a4b3(0x195)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x55a4b3(0x1ff))_0x3bde85[_0x55a4b3(0x228)](![])&&(config[_0x55a4b3(0x240)]==_0x55a4b3(0x195)?logHistory(_0x55a4b3(0x173),_0x55a4b3(0x20f)+Math[_0x55a4b3(0x27b)](_0x17d96d*validateOrderInterval/0xea60)+_0x55a4b3(0x1c4)+_0x4e06f1):(await cancelOrders(),logHistory(_0x55a4b3(0x173),_0x55a4b3(0x216)+Math[_0x55a4b3(0x27b)](_0x17d96d*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x4e06f1))),await unlockOrders();else{if(validateOrdersState==_0x55a4b3(0x272)){if(config[_0x55a4b3(0x240)]!=_0x55a4b3(0x195))logHistory('success',_0x55a4b3(0x143)+_0x4e06f1);await unlockOrders();}}}}}async function cancelOrders(){const _0x35bd44=_0xe22841;lastOrders[_0x35bd44(0x1be)](async _0x3d625a=>{const _0x14ecdb=_0x35bd44;try{const _0x392ed0=await exchange[_0x14ecdb(0x117)](_0x3d625a[_0x14ecdb(0x232)],_0x3d625a[_0x14ecdb(0x146)]);}catch(_0x3fd1f8){if(_0x3fd1f8[_0x14ecdb(0x1c3)]()[_0x14ecdb(0x228)](_0x14ecdb(0x224))){}else await handleError(_0x3fd1f8,'cancelOrders()');}});}async function initCoinResults(_0xc62118){const _0x401208=_0xe22841;_0xc62118?logger[_0x401208(0x184)](_0x401208(0x265)+_0xc62118):logger['debug'](_0x401208(0x21b)),config[_0x401208(0x12c)][_0x401208(0x1be)](_0xcbb26b=>{const _0x4a9a99=_0x401208;if(!_0xcbb26b['excluded']&&_0xcbb26b['coin']!=config[_0x4a9a99(0x124)]){const _0x3bfeba=currentCoins[_0x4a9a99(0x160)](_0x4b12f5=>_0x4b12f5['coin']==_0xcbb26b['coin']),_0x361546=global[_0x4a9a99(0x17c)][noslash(_0xcbb26b['symbol'])];let _0xfa72bc=_0x3bfeba?_0x3bfeba[_0x4a9a99(0x15f)]:null,_0x3e7e47=_0xcbb26b[_0x4a9a99(0x25b)]?0x1/_0x361546:_0x361546,_0x3cd531;config['liquidity'][_0x4a9a99(0x1be)](_0x307f60=>{const _0x5c9da1=_0x4a9a99;!_0x3cd531&&(_0x3cd531=_0x307f60[_0x5c9da1(0x24d)]['find'](_0x2b262e=>_0x2b262e['coin']==_0xcbb26b[_0x5c9da1(0x141)]),_0x3cd531&&(_0xfa72bc=_0x3cd531['number'],_0x3e7e47=_0x3cd531[_0x5c9da1(0x27a)]));});let _0xef6e0f=dbCoinResults['get'](_0x4a9a99(0x218))[_0x4a9a99(0x160)]({'coin':_0xcbb26b[_0x4a9a99(0x141)]})[_0x4a9a99(0x1bc)]();if(!_0xef6e0f){const _0x34c8f6={'coin':_0xcbb26b[_0x4a9a99(0x141)],'number':_0xfa72bc,'breakeven':_0x3e7e47,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4a9a99(0x293)](_0x4a9a99(0x218))[_0x4a9a99(0x29a)](_0x34c8f6)['write']();}else{if(_0xc62118&&_0xcbb26b[_0x4a9a99(0x141)]==_0xc62118){const _0x4645dd={'coin':_0xcbb26b[_0x4a9a99(0x141)],'number':_0xfa72bc,'breakeven':_0x3e7e47,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4a9a99(0x293)](_0x4a9a99(0x218))[_0x4a9a99(0x160)]({'coin':_0xcbb26b[_0x4a9a99(0x141)]})['assign'](_0x4645dd)['write']();}}}});}async function updateCoinResults(_0x36f7ce,_0x6c2cf7=![]){const _0x37d0b3=_0xe22841;let _0x53118f,_0x28bdcd,_0x37304f,_0x49333e,_0x330522,_0x3916fd,_0x3df1eb=dbCoinResults[_0x37d0b3(0x293)](_0x37d0b3(0x218))['find']({'coin':_0x36f7ce[_0x37d0b3(0x141)]})[_0x37d0b3(0x1bc)](),_0x3a3ad3=![];_0x3df1eb&&Object['entries'](_0x3df1eb)['forEach'](([_0x290280,_0x2cf969])=>{if(_0x2cf969==null)_0x3a3ad3=!![];});(!_0x3df1eb||_0x3a3ad3)&&(await initCoinResults(_0x36f7ce[_0x37d0b3(0x141)]),_0x3df1eb=dbCoinResults[_0x37d0b3(0x293)](_0x37d0b3(0x218))['find']({'coin':_0x36f7ce[_0x37d0b3(0x141)]})['value']());_0x36f7ce['reverse']&&(_0x3916fd={'filled':_0x36f7ce[_0x37d0b3(0x28d)]*_0x36f7ce[_0x37d0b3(0x27a)],'amount':_0x36f7ce[_0x37d0b3(0x28d)]*_0x36f7ce[_0x37d0b3(0x27a)],'side':_0x36f7ce['side']==_0x37d0b3(0x1ac)?_0x37d0b3(0x29b):_0x37d0b3(0x1ac),'price':0x1/_0x36f7ce[_0x37d0b3(0x27a)]},_0x36f7ce={..._0x36f7ce,..._0x3916fd});_0x6c2cf7?_0x28bdcd=_0x36f7ce['side']=='buy'?_0x3df1eb['number']+_0x36f7ce[_0x37d0b3(0x28d)]:_0x3df1eb[_0x37d0b3(0x15f)]-_0x36f7ce[_0x37d0b3(0x28d)]:_0x28bdcd=await getCoinNumber(_0x36f7ce['coin']);if(_0x36f7ce[_0x37d0b3(0x205)]&&_0x36f7ce['fee'][_0x37d0b3(0x23c)]==config['basecoin'])_0x53118f=_0x36f7ce[_0x37d0b3(0x205)][_0x37d0b3(0x126)];else{if(_0x36f7ce[_0x37d0b3(0x205)]&&_0x36f7ce['fee']['currency']==_0x37d0b3(0x1da)&&!_0x6c2cf7)_0x53118f=_0x36f7ce['fee'][_0x37d0b3(0x126)]*global[_0x37d0b3(0x17c)]['BNB'+config['basecoin']];else _0x53118f=defaultFee*_0x36f7ce[_0x37d0b3(0x28d)]*_0x36f7ce['price'];}_0x36f7ce['side']==_0x37d0b3(0x29b)?(_0x37304f=_0x28bdcd!=0x0?(_0x3df1eb[_0x37d0b3(0x1a3)]*_0x3df1eb[_0x37d0b3(0x15f)]+_0x36f7ce[_0x37d0b3(0x27a)]*(_0x28bdcd-_0x3df1eb[_0x37d0b3(0x15f)])+_0x53118f)/_0x28bdcd:0x0,_0x49333e=_0x3df1eb[_0x37d0b3(0x159)]):(_0x37304f=_0x28bdcd!=0x0?(_0x3df1eb['breakeven']*_0x3df1eb[_0x37d0b3(0x15f)]-_0x36f7ce['price']*(_0x3df1eb[_0x37d0b3(0x15f)]-_0x28bdcd)+_0x53118f)/_0x28bdcd:0x0,_0x49333e=_0x3df1eb[_0x37d0b3(0x159)]+(_0x36f7ce[_0x37d0b3(0x27a)]-_0x3df1eb[_0x37d0b3(0x1a3)])*_0x36f7ce[_0x37d0b3(0x28d)]);_0x330522=(_0x36f7ce[_0x37d0b3(0x27a)]-_0x37304f-_0x53118f/_0x36f7ce[_0x37d0b3(0x28d)])*_0x28bdcd;let _0x1a5009={'coin':_0x36f7ce[_0x37d0b3(0x141)],'number':_0x28bdcd,'breakeven':formatResult(_0x37304f,0x8),'realized':formatResult(_0x49333e,0x8),'unrealized':formatResult(_0x330522,0x8),'fees':formatResult(_0x3df1eb[_0x37d0b3(0x23f)]+_0x53118f,0x8),'sells':_0x36f7ce[_0x37d0b3(0x26f)]==_0x37d0b3(0x1ac)?_0x3df1eb['sells']+0x1:_0x3df1eb[_0x37d0b3(0x22f)],'buys':_0x36f7ce[_0x37d0b3(0x26f)]==_0x37d0b3(0x29b)?_0x3df1eb['buys']+0x1:_0x3df1eb[_0x37d0b3(0x1dc)]};dbCoinResults[_0x37d0b3(0x293)](_0x37d0b3(0x218))[_0x37d0b3(0x160)]({'coin':_0x36f7ce[_0x37d0b3(0x141)]})[_0x37d0b3(0x182)](_0x1a5009)[_0x37d0b3(0x162)]();if(!_0x6c2cf7){if(_0x36f7ce['fee']&&_0x36f7ce[_0x37d0b3(0x205)][_0x37d0b3(0x23c)]=='BNB'){const _0x301ae8=currentCoins['find'](_0x303ab4=>_0x303ab4[_0x37d0b3(0x141)]==_0x37d0b3(0x1da));if(_0x301ae8){let _0x1fcfe3=dbCoinResults[_0x37d0b3(0x293)](_0x37d0b3(0x218))[_0x37d0b3(0x160)]({'coin':_0x37d0b3(0x1da)})[_0x37d0b3(0x1bc)]();_0x1a5009={..._0x1fcfe3,'number':_0x301ae8['number']},dbCoinResults[_0x37d0b3(0x293)](_0x37d0b3(0x218))['find']({'coin':_0x37d0b3(0x1da)})[_0x37d0b3(0x182)](_0x1a5009)[_0x37d0b3(0x162)]();}}}}async function placeOrder(_0x199cab){const _0x1b164c=_0xe22841,_0x15ad05=config['ordertype']=='market'?_0x1b164c(0x195):'limit';if(lockOrders==ORDERS[_0x1b164c(0x135)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1b164c(0x274)],allOrdersPlaced=![],validateOrdersState='initial';let _0x279921=![];lastOrders=[];for(const _0x527bc3 of _0x199cab){let _0xb0bb39,_0xc02f13,_0x5a3c88,_0x10b343,_0x36de01,_0x43e078=_0x527bc3[_0x1b164c(0x146)];try{const _0x30333d=await exchange[_0x1b164c(0x12f)](_0x43e078);_0xb0bb39=_0x527bc3[_0x1b164c(0x25b)]?0x1/_0x527bc3['last']:_0x527bc3['last'],_0xc02f13=_0x30333d[_0x1b164c(0x28c)],_0x5a3c88=_0x30333d[_0x1b164c(0x21d)];_0x527bc3[_0x1b164c(0x25b)]?(_0x10b343=_0x527bc3[_0x1b164c(0x26f)]==_0x1b164c(0x29b)?_0x1b164c(0x1ac):'buy',_0x36de01=Math[_0x1b164c(0x11c)](_0x527bc3[_0x1b164c(0x181)])/_0xb0bb39):(_0x10b343=_0x527bc3[_0x1b164c(0x26f)],_0x36de01=Math[_0x1b164c(0x11c)](_0x527bc3[_0x1b164c(0x181)]));_0x15ad05==_0x1b164c(0x1cf)&&(config[_0x1b164c(0x240)]=='limit-high'&&(_0xb0bb39=_0x10b343==_0x1b164c(0x29b)?_0xc02f13:_0x5a3c88),config['ordertype']==_0x1b164c(0x1a1)&&(_0xb0bb39=_0x10b343==_0x1b164c(0x29b)?_0x5a3c88:_0xc02f13));_0x36de01=formatResult(_0x36de01,0x8),_0xb0bb39=formatResult(_0xb0bb39,0x8);const _0x112acc=_0x10b343==_0x1b164c(0x1ac)?config[_0x1b164c(0x116)]?String[_0x1b164c(0x12a)]('0x'+config[_0x1b164c(0x116)])+'\x20':'':config[_0x1b164c(0x246)]?String[_0x1b164c(0x12a)]('0x'+config['emojibuy'])+'\x20':'',_0x3e8fa0=_0x15ad05==_0x1b164c(0x195)?'Market':config[_0x1b164c(0x240)]==_0x1b164c(0x267)?_0x1b164c(0x295):_0x1b164c(0x198),_0x4b132f=(Math[_0x1b164c(0x175)](Math[_0x1b164c(0x177)]()*0x35a4e900)+0x5f5e100)[_0x1b164c(0x1c3)]();lastOrders[_0x1b164c(0x29a)]({'customId':_0x4b132f,'symbol':_0x43e078,'coin':_0x527bc3[_0x1b164c(0x141)],'amount':_0x36de01,'price':_0xb0bb39,'side':_0x10b343,'reverse':_0x527bc3[_0x1b164c(0x25b)],'filled':0x0});if(_0x15ad05==_0x1b164c(0x195))logHistory('order',''+_0x112acc+_0x3e8fa0+'\x20order:\x20'+_0x43e078+'\x20'+_0x10b343+'\x20#'+formatResult(_0x36de01,0x8)+'\x20@'+formatResult(_0xb0bb39,0x8));else logHistory(_0x1b164c(0x1b0),''+_0x112acc+_0x3e8fa0+'\x20order:\x20'+_0x43e078+'\x20'+_0x10b343+'\x20#'+formatResult(_0x36de01,0x8)+'\x20@'+formatResult(_0xb0bb39,0x8));let _0xf85bde;_0x15ad05==_0x1b164c(0x195)?_0x10b343==_0x1b164c(0x29b)&&config[_0x1b164c(0x16a)]==_0x1b164c(0x1de)?_0xf85bde=await exchange[_0x1b164c(0x148)](_0x43e078,_0x15ad05,_0x10b343,_0x36de01,_0xb0bb39):_0xf85bde=await exchange[_0x1b164c(0x148)](_0x43e078,_0x15ad05,_0x10b343,_0x36de01,undefined):_0xf85bde=await exchange[_0x1b164c(0x148)](_0x43e078,_0x15ad05,_0x10b343,_0x36de01,_0xb0bb39);logger[_0x1b164c(0x184)](_0x1b164c(0x196)+_0xf85bde['id']+_0x1b164c(0x15e)+_0x4b132f);const _0x16e92e=lastOrders['length']-0x1;if(_0x16e92e>=0x0&&lastOrders[_0x16e92e][_0x1b164c(0x206)]==_0x4b132f){lastOrders[_0x16e92e][_0x1b164c(0x232)]=_0xf85bde['id'];if(_0xf85bde[_0x1b164c(0x222)])lastOrders[_0x16e92e]['amount']=_0xf85bde[_0x1b164c(0x222)];if(_0xf85bde['price'])lastOrders[_0x16e92e][_0x1b164c(0x27a)]=_0xf85bde[_0x1b164c(0x27a)];lastOrders[_0x16e92e]['fee']=_0xf85bde['fee'];}if(config['cooldown']!=0x0){let _0x3b3149=null;if(cooldownTracker[_0x1b164c(0x26a)]==config[_0x1b164c(0x207)]-0x1)_0x3b3149=cooldownTracker[_0x1b164c(0x20c)]();const _0x309818=getTimeStamp();cooldownTracker['push'](_0x309818);if(_0x3b3149){const _0x4b5118=fns['differenceInSeconds'](new Date(_0x309818),new Date(_0x3b3149));if(_0x4b5118<cooldownInterval){logHistory(_0x1b164c(0x1e3),_0x1b164c(0x10e)+config[_0x1b164c(0x207)]+_0x1b164c(0x1f8)+cooldownInterval/0x3c+_0x1b164c(0x139)+cooldownPeriod/(0xe10*0x3e8)+_0x1b164c(0x1b1)),coolingDown=!![];break;}}}}catch(_0x2213f1){if(_0x2213f1[_0x1b164c(0x1c3)]()[_0x1b164c(0x228)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x1b2748=>_0x1b2748['symbol']!=_0x43e078),logHistory('error',_0x1b164c(0x14b)+_0x43e078),_0x279921=!![];else{if(_0x2213f1[_0x1b164c(0x1c3)]()[_0x1b164c(0x228)](_0x1b164c(0x28f)))lastOrders=lastOrders[_0x1b164c(0x1f2)](_0x1a54ae=>_0x1a54ae[_0x1b164c(0x146)]!=_0x43e078),logHistory(_0x1b164c(0x1e3),'Order\x20amount\x20is\x20invalid:\x20'+_0x43e078),_0x279921=!![];else{if(_0x2213f1[_0x1b164c(0x1c3)]()[_0x1b164c(0x228)](_0x1b164c(0x19c)))lastOrders=lastOrders[_0x1b164c(0x1f2)](_0x4082ed=>_0x4082ed[_0x1b164c(0x146)]!=_0x43e078),logHistory(_0x1b164c(0x1e3),'Order\x20is\x20invalid:\x20'+_0x43e078),logger[_0x1b164c(0x184)](_0x2213f1),_0x279921=!![];else _0x2213f1['toString']()[_0x1b164c(0x228)](_0x1b164c(0x262))?(lastOrders=lastOrders[_0x1b164c(0x1f2)](_0x17779d=>_0x17779d[_0x1b164c(0x146)]!=_0x43e078),logHistory('error',_0x1b164c(0x14b)+_0x43e078),_0x279921=!![]):(lastOrders=lastOrders[_0x1b164c(0x1f2)](_0x2f8f7a=>_0x2f8f7a[_0x1b164c(0x146)]!=_0x43e078),await handleError(_0x2213f1,_0x1b164c(0x13b),_0x43e078));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1b164c(0x26a)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x80d4d5=config[_0x1b164c(0x240)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x491ce7=_0x1b164c;validateOrders(_0x491ce7(0x1ff));},_0x80d4d5);}else unlockOrders();_0x279921&&config[_0x1b164c(0x247)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x1b164c(0x254)));}else{if(coolingDown)!config[_0x1b164c(0x247)]&&logHistory('error',_0x1b164c(0x114));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x1b164c(0x247)]&&(config['ordertype']=='market'?logHistory(_0x1b164c(0x1e3),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x1b164c(0x1e3),_0x1b164c(0x12e))));}}function persistOpenOrders(_0x25c365){const _0x36122d=_0xe22841,_0x2f61ff={...config,'openOrders':_0x25c365};let _0x51d105=dbConfig['get'](_0x36122d(0x286))[_0x36122d(0x160)]({'botID':botID})[_0x36122d(0x1bc)]();_0x51d105&&dbConfig[_0x36122d(0x293)](_0x36122d(0x286))[_0x36122d(0x160)]({'botID':botID})[_0x36122d(0x182)](_0x2f61ff)['write']();}function restoreOrders(){const _0x8f7950=_0xe22841;let _0x44eb5a;config[_0x8f7950(0x11a)]&&allOpenOrders['forEach'](_0x3f699e=>{const _0x43587f=_0x8f7950,_0x3905ff=config[_0x43587f(0x11a)][_0x43587f(0x160)](_0x16c1b4=>_0x16c1b4['orderId']==_0x3f699e['id']);_0x3905ff&&(lastOrders[_0x43587f(0x29a)](_0x3905ff),_0x44eb5a=_0x3f699e['timestamp']);});if(lastOrders[_0x8f7950(0x26a)]>0x0){lockOrders=ORDERS[_0x8f7950(0x274)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x307a5f=new Date()[_0x8f7950(0x294)](),_0x3b16b0=config[_0x8f7950(0x240)]==_0x8f7950(0x195)?validateOrderTimeout*0x3c*0x3e8:config[_0x8f7950(0x287)]*0x3c*0x3e8;if(_0x44eb5a+_0x3b16b0>_0x307a5f){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x44eb5a+_0x3b16b0-_0x307a5f);}else validateOrders(_0x8f7950(0x1ff));}}async function sendMetricsTelegram(){const _0x1cfbfb=_0xe22841;if(!coinsLoaded){process[_0x1cfbfb(0x20e)]({'telegrammsg':_0x1cfbfb(0x14f)},_0xf1f265=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x42fdf5='';if(config[_0x1cfbfb(0x13d)])_0x42fdf5=_0x1cfbfb(0x1fd)+config[_0x1cfbfb(0x1e4)]+_0x1cfbfb(0x25d);else _0x42fdf5=_0x1cfbfb(0x251)+botID+_0x1cfbfb(0x25d);const _0xac8236=getKPIs(_0x1cfbfb(0x124)),_0x39db1f=getKPIs(_0x1cfbfb(0x1d7),config['fiat']),_0x126809=getKPIs('net-basecoin'),_0x198a7b=getKPIs(_0x1cfbfb(0x18a),config[_0x1cfbfb(0x1d7)]);_0x42fdf5+=_0x1cfbfb(0x17a),_0x42fdf5+=_0xac8236[_0x1cfbfb(0x288)]+_0x1cfbfb(0x1bd)+_0xac8236[_0x1cfbfb(0x1bc)]+'\x0a',_0x42fdf5+=_0xac8236[_0x1cfbfb(0x273)]+':\x20'+_0xac8236[_0x1cfbfb(0x259)]+'%\x0a',_0x42fdf5+=_0x39db1f[_0x1cfbfb(0x288)]+_0x1cfbfb(0x1bd)+_0x39db1f[_0x1cfbfb(0x1bc)]+'\x0a',_0x42fdf5+=_0x39db1f[_0x1cfbfb(0x273)]+':\x20'+_0x39db1f['change']+'%\x0a',_0x42fdf5+=_0x126809[_0x1cfbfb(0x288)]+':\x20'+_0x126809[_0x1cfbfb(0x1bc)]+'\x20('+config[_0x1cfbfb(0x124)]+')\x0a',_0x42fdf5+=_0x126809['rightTxt']+':\x20'+_0x126809[_0x1cfbfb(0x259)]+_0x1cfbfb(0x248)+config['basecoin']+')\x0a',_0x42fdf5+=_0x198a7b['leftTxt']+':\x20'+_0x198a7b['value']+'\x20('+config[_0x1cfbfb(0x1d7)]+')\x0a',_0x42fdf5+=_0x198a7b[_0x1cfbfb(0x273)]+':\x20'+_0x198a7b['change']+_0x1cfbfb(0x248)+config[_0x1cfbfb(0x1d7)]+')\x0a',_0x42fdf5+=_0x1cfbfb(0x1b8),process[_0x1cfbfb(0x20e)]({'telegrammsg':_0x42fdf5},_0x178a76=>{});}async function sendPortfolioTelegram(){const _0x58f017=_0xe22841;if(!coinsLoaded){process['send']({'telegrammsg':_0x58f017(0x14f)},_0x2e1159=>{});return;}let _0x5c3eab='';if(config[_0x58f017(0x13d)])_0x5c3eab=_0x58f017(0x1fd)+config['botname']+_0x58f017(0x1d2);else _0x5c3eab=_0x58f017(0x251)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5c3eab+=_0x58f017(0x17a),_0x5c3eab+=_0x58f017(0x28a),_0x5c3eab+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x5c3eab+=_0x58f017(0x28a),currentCoins[_0x58f017(0x1be)](_0x1614d8=>{const _0x3b79af=_0x58f017;_0x5c3eab+=_0x1614d8[_0x3b79af(0x141)][_0x3b79af(0x169)](0x7)+'|\x20'+formatPad(_0x1614d8['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x1614d8[_0x3b79af(0x1fb)],0x2,0x6)+'|\x20'+formatPad(_0x1614d8[_0x3b79af(0x1ae)]*0x64,0x2,0x6)+'\x0a';}),_0x5c3eab+=_0x58f017(0x1b8),process[_0x58f017(0x20e)]({'telegrammsg':_0x5c3eab},_0x3df09e=>{});}function formatPad(_0x49c913,_0xfffabf,_0x36b895){const _0x3a8679=_0xe22841,_0x30670f=formatResultString(_0x49c913,_0xfffabf);return _0x30670f?_0x30670f[_0x3a8679(0x11b)](_0x36b895):''[_0x3a8679(0x11b)](_0x36b895);}function logHistory(_0x3fd5cd,_0x3c8da7,_0x62971b=''){const _0xa320d4=_0xe22841;let _0x5d9278={'time':getTimeStamp(),'type':_0x3fd5cd,'event':_0x3c8da7};dbLogs[_0xa320d4(0x293)](_0xa320d4(0x261))['push'](_0x5d9278)[_0xa320d4(0x162)]();if(_0x62971b=='')_0x62971b=_0x3c8da7;proxyEmit(_0xa320d4(0x1a9),{'log':_0x5d9278,'summary':_0x62971b}),process[_0xa320d4(0x20e)]({'telegram':{..._0x5d9278,'botname':config[_0xa320d4(0x1e4)],'showname':config[_0xa320d4(0x13d)]}},_0x3e10ad=>{}),logger[_0xa320d4(0x152)](''+_0x5d9278[_0xa320d4(0x1a9)]);}function emitHistory(_0x48e235={}){const _0x47cf85=_0xe22841;Object[_0x47cf85(0x1a6)](_0x48e235)[_0x47cf85(0x26a)]==0x0&&(_0x48e235={'type':[_0x47cf85(0x1b0),_0x47cf85(0x1a9)],'event':'','page':0x1});if(_0x48e235[_0x47cf85(0x1c7)]['includes'](_0x47cf85(0x1a9)))_0x48e235[_0x47cf85(0x1c7)]['splice'](_0x48e235[_0x47cf85(0x1c7)][_0x47cf85(0x1ba)](_0x47cf85(0x1a9)),0x1,'error','warning','success');if(dbLogs[_0x47cf85(0x166)](_0x47cf85(0x261))[_0x47cf85(0x1bc)]()){let _0x449f6c=dbLogs[_0x47cf85(0x293)]('logs')[_0x47cf85(0x1f2)](_0x40270f=>{const _0x39a34c=_0x47cf85;if(_0x48e235['type']['length']==0x0)return![];else return _0x48e235['type'][_0x39a34c(0x228)](_0x40270f[_0x39a34c(0x1c7)]);})[_0x47cf85(0x1f2)](_0x519544=>{const _0x204646=_0x47cf85;if(_0x48e235['event']=='')return!![];else return _0x519544['event']['toLowerCase']()[_0x204646(0x228)](_0x48e235[_0x204646(0x1a9)]['toLowerCase']());})['sortBy'](_0x47cf85(0x202)),_0x562928=_0x449f6c[_0x47cf85(0x1bc)]()['length'];_0x449f6c=_0x449f6c[_0x47cf85(0x25b)]()[_0x47cf85(0x10d)]((_0x48e235[_0x47cf85(0x137)]-0x1)*logPageSize,_0x48e235[_0x47cf85(0x137)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x47cf85(0x270),{'logs':_0x449f6c,'total':_0x562928});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x2a0fd4){const _0x564201=_0xe22841;if(dbLogs[_0x564201(0x166)](_0x564201(0x261))[_0x564201(0x1bc)]()){const _0x5e1679=dbLogs['get']('logs')[_0x564201(0x212)](_0x564201(0x202))[_0x564201(0x1f2)](_0x502446=>{const _0x937162=_0x564201;return _0x502446[_0x937162(0x1c7)]=='order';})[_0x564201(0x1bc)]();dbLogs[_0x564201(0x293)]('logs')['remove']()[_0x564201(0x162)](),dbLogs[_0x564201(0x293)]('logs')['assign'](_0x5e1679)[_0x564201(0x162)](),emitHistory(_0x2a0fd4);}}async function pauseBot(_0x23b8f0=''){const _0x1c7129=_0xe22841,_0x161088=new Date()[_0x1c7129(0x294)]();if(!lastErrorShown||_0x161088-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x161088;!lastBotPause?(lastBotPause=_0x161088,consecutivePauses=0x1):(_0x161088-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x1c7129(0x11e)},_0x2a4a69=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1c7129(0x294)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x23b8f0)_0x23b8f0+=_0x1c7129(0x21a);logHistory(_0x1c7129(0x1e3),_0x23b8f0+'Pausing\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x1de730=_0xe22841;process[_0x1de730(0x20e)]({'stop':_0x1de730(0x280)},_0x2354a6=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5971f9,_0x112614){const _0x57e1e0=_0xe22841;if(_0x5971f9[_0x57e1e0(0x1c3)]()[_0x57e1e0(0x228)](_0x57e1e0(0x1d6)))return logHistory(_0x57e1e0(0x1e3),config[_0x57e1e0(0x16a)]+_0x57e1e0(0x180)),![];else{if(_0x5971f9[_0x57e1e0(0x1c3)]()[_0x57e1e0(0x228)](_0x57e1e0(0x110)))return logHistory(_0x57e1e0(0x1e3),config['exchange']+_0x57e1e0(0x1ef)),![];else{if(_0x5971f9['toString']()['includes']('AuthenticationError'))return logHistory(_0x57e1e0(0x1e3),config[_0x57e1e0(0x16a)]+_0x57e1e0(0x138)),logHistory(_0x57e1e0(0x1e3),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),![];else await handleError(_0x5971f9,_0x112614);}}}async function handleError(_0x52255a,_0x4a3841,_0x496ce7=''){const _0x3f9395=_0xe22841,_0x2d4808=config[_0x3f9395(0x16a)]||_0x3f9395(0x157);if(_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)]('DDoSProtection')||_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)]('RateLimitExceeded'))await pauseBot(config[_0x3f9395(0x16a)]+_0x3f9395(0x11d));else{if(_0x52255a['toString']()[_0x3f9395(0x228)](_0x3f9395(0x13c))||_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)](_0x3f9395(0x26d)))await pauseBot(config[_0x3f9395(0x16a)]+_0x3f9395(0x1bf));else{if(_0x52255a[_0x3f9395(0x1c3)]()['includes'](_0x3f9395(0x1d8)))await pauseBot(config[_0x3f9395(0x16a)]+_0x3f9395(0x296));else{if(_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)](_0x3f9395(0x213)))await pauseBot(config[_0x3f9395(0x16a)]+_0x3f9395(0x209));else{if(_0x52255a[_0x3f9395(0x1c3)]()['includes']('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory(_0x3f9395(0x1e3),_0x4a3841+_0x3f9395(0x16e)),logHistory('error',_0x3f9395(0x279)),await killBot();else{if(_0x52255a[_0x3f9395(0x1c3)]()['includes'](_0x3f9395(0x24f)))logHistory(_0x3f9395(0x1e3),_0x4a3841+_0x3f9395(0x14d)),logHistory(_0x3f9395(0x1e3),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x52255a instanceof ccxt[_0x3f9395(0x21f)])logger['debug'](_0x3f9395(0x120),_0x52255a),await pauseBot(config[_0x3f9395(0x16a)]+_0x3f9395(0x155));else{if(_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)]('API-key\x20format\x20invalid'))logHistory(_0x3f9395(0x1e3),_0x4a3841+_0x3f9395(0x21a)+config[_0x3f9395(0x16a)]+_0x3f9395(0x147)),logHistory(_0x3f9395(0x1e3),_0x3f9395(0x279)),await killBot();else{if(_0x52255a[_0x3f9395(0x1c3)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3f9395(0x1e3),_0x4a3841+_0x3f9395(0x21a)+config[_0x3f9395(0x16a)]+_0x3f9395(0x250)),logHistory(_0x3f9395(0x1e3),_0x3f9395(0x279)),await killBot();else{if(_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)](_0x3f9395(0x1df)))logHistory('error',_0x4a3841+_0x3f9395(0x21a)+config['exchange']+_0x3f9395(0x1c5)),logHistory(_0x3f9395(0x1e3),_0x3f9395(0x279)),await killBot();else{if(_0x52255a[_0x3f9395(0x1c3)]()[_0x3f9395(0x228)]('InsufficientFunds'))logHistory('error',_0x4a3841+_0x3f9395(0x1d1)+_0x496ce7);else _0x52255a instanceof ccxt[_0x3f9395(0x186)]?(logger[_0x3f9395(0x184)]('Uncaught\x20ExchangeError:',_0x52255a),logHistory(_0x3f9395(0x1e3),_0x4a3841+_0x3f9395(0x21a)+config['exchange']+'\x20exchange\x20error')):(logger[_0x3f9395(0x152)](_0x4a3841+_0x3f9395(0x278),_0x52255a),await pauseBot(_0x3f9395(0x282)));}}}}}}}}}}}function formatResult(_0x27bdef,_0x2343d3){return parseFloat(_0x27bdef['toFixed'](_0x2343d3));}function formatResultTruncate(_0x427f25,_0x264f52){const _0x4dbc00=_0xe22841;let _0x259882=formatResultString(_0x427f25,0xa),_0xc74e6c=_0x259882[_0x4dbc00(0x1ba)]('.');return _0xc74e6c!=-0x1&&(_0x259882=_0x259882[_0x4dbc00(0x10d)](0x0,_0xc74e6c+_0x264f52+0x1)),Number(_0x259882);}function formatResultString(_0x279266,_0x31dc43){let _0x3f05c0;if(!(''+_0x279266)['includes']('e'))_0x3f05c0=+(Math['round'](_0x279266+'e+'+_0x31dc43)+'e-'+_0x31dc43);else{let _0x5c0f76=(''+_0x279266)['split']('e'),_0x389783='';+_0x5c0f76[0x1]+_0x31dc43>0x0&&(_0x389783='+'),_0x3f05c0=+(Math['round'](+_0x5c0f76[0x0]+'e'+_0x389783+(+_0x5c0f76[0x1]+_0x31dc43))+'e-'+_0x31dc43);}return Number(_0x3f05c0)['toFixed'](_0x31dc43);}function getServerTime(){const _0x45d2c3=_0xe22841,_0x72d682=new Date();return _0x72d682['getFullYear']()+'/'+(_0x72d682['getMonth']()+0x1)[_0x45d2c3(0x1c3)]()['padStart'](0x2,'0')+'/'+_0x72d682['getDate']()[_0x45d2c3(0x1c3)]()[_0x45d2c3(0x11b)](0x2,'0')+'\x20'+_0x72d682[_0x45d2c3(0x1fc)]()[_0x45d2c3(0x1c3)]()[_0x45d2c3(0x11b)](0x2,'0')+':'+_0x72d682['getMinutes']()[_0x45d2c3(0x1c3)]()[_0x45d2c3(0x11b)](0x2,'0')+':'+_0x72d682[_0x45d2c3(0x111)]()[_0x45d2c3(0x1c3)]()[_0x45d2c3(0x11b)](0x2,'0');}function getTimeStamp(){const _0x5e49cf=_0xe22841,_0x127bad=shiftedTime();return _0x127bad[_0x5e49cf(0x258)]()+'/'+(_0x127bad[_0x5e49cf(0x24e)]()+0x1)[_0x5e49cf(0x1c3)]()[_0x5e49cf(0x11b)](0x2,'0')+'/'+_0x127bad[_0x5e49cf(0x1e0)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x127bad['getHours']()['toString']()[_0x5e49cf(0x11b)](0x2,'0')+':'+_0x127bad[_0x5e49cf(0x263)]()[_0x5e49cf(0x1c3)]()[_0x5e49cf(0x11b)](0x2,'0')+':'+_0x127bad[_0x5e49cf(0x111)]()[_0x5e49cf(0x1c3)]()['padStart'](0x2,'0');}function getDate(){const _0x124c86=_0xe22841,_0x547f4e=shiftedTime();return _0x547f4e[_0x124c86(0x258)]()+'/'+(_0x547f4e[_0x124c86(0x24e)]()+0x1)[_0x124c86(0x1c3)]()['padStart'](0x2,'0')+'/'+_0x547f4e['getDate']()[_0x124c86(0x1c3)]()[_0x124c86(0x11b)](0x2,'0');}function getHour(){const _0x3b0b2e=_0xe22841,_0x167095=shiftedTime();return _0x167095[_0x3b0b2e(0x1fc)]()['toString']()[_0x3b0b2e(0x11b)](0x2,'0');}function sleep(_0x2f6c58){return new Promise(_0x542136=>setTimeout(_0x542136,_0x2f6c58));}function shiftedTime(){const _0x5cbf18=_0xe22841,_0x254a37=new Date();let _0x61164e=_0x254a37;if(config&&config[_0x5cbf18(0x19d)]!==0x0)_0x61164e=fns['add'](_0x254a37,{'hours':config[_0x5cbf18(0x19d)]});return _0x61164e;}function timer(_0x4d1269){const _0x204a6e=_0xe22841,_0x4e4947=new Date();!lasttime?console[_0x204a6e(0x171)](getTimeStamp()+_0x204a6e(0x257),_0x4d1269,_0x4e4947):console[_0x204a6e(0x171)](getTimeStamp()+_0x204a6e(0x257),_0x4d1269,(_0x4e4947-lasttime)/0x3e8),lasttime=_0x4e4947;}