const _0x5331e1=_0x190c;(function(_0x318ded,_0x28cea4){const _0x316d12=_0x190c,_0x32b0d8=_0x318ded();while(!![]){try{const _0x308235=-parseInt(_0x316d12(0x277))/0x1+-parseInt(_0x316d12(0x1fe))/0x2*(-parseInt(_0x316d12(0x288))/0x3)+parseInt(_0x316d12(0x2af))/0x4+parseInt(_0x316d12(0x1e0))/0x5*(-parseInt(_0x316d12(0x1e9))/0x6)+-parseInt(_0x316d12(0x1c2))/0x7+-parseInt(_0x316d12(0x25d))/0x8*(-parseInt(_0x316d12(0x2ae))/0x9)+-parseInt(_0x316d12(0x245))/0xa*(-parseInt(_0x316d12(0x2a0))/0xb);if(_0x308235===_0x28cea4)break;else _0x32b0d8['push'](_0x32b0d8['shift']());}catch(_0x1fbf57){_0x32b0d8['push'](_0x32b0d8['shift']());}}}(_0x2076,0xe3267));function _0x2076(){const _0x1d7fe3=['round','startnumber','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Bot\x20','Binance\x20not\x20available\x20(2)','split','findIndex','6619514mqAxsm','Invalid\x20quantity','excluded','has','privateKey','EUR','fetchClosedOrders','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apply','exec','subscribeSpotUserDataStream','Limit\x20(high-margin)','keys','replace','9KOBChb','4090836bhEiZx','progress','getPortfolio()','RSA-OAEP','Error:\x20Invalid\x20argument\x20','limit','startprice','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','buys','reconnected','sells','balancing\x20resumes\x20when\x20cooldown\x20ends','getHours','string','changes','liquidity','Order(s)\x20validated\x20-\x20','limits','Order(s)\x20not\x20validated\x20after\x20','Limit\x20(low-margin)','\x20portfolio:\x20\x0a\x0a','\x20has\x20a\x2024h\x20drop\x20of\x20','XEM/BUSD','join','2.5.0','toString','getSeconds','precision','./version.json','Order\x20amount\x20is\x20invalid:\x20','wss://stream.binance.us:9443','change24h','commissionAsset','write','sendPortfolioTelegram','OrderNotFound','final','concat','cumulativeQuoteAssetTransactedQty','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','NANO/','Order(s)\x20filled\x20-\x20','splice','symbol','cancel','success','-------------------------------\x0a','exchange','search','coin-loading-progress','indexOf','defaults','storeHeadless','wss://stream.binance.com:9443','order','filter','ticker','spot','(((.+)+)+)+$','timeout','error','send','getFullYear','test','botname','breakeven','remove','total','showname','fetchBalance','bot-','message','toLowerCase','limit-high','./config/','/backup/','page','Cooldown\x20ended\x20-\x20balancing\x20resumed','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','price','parse','sell','coin','HOT/BTC','remainingSymbols','12436984zweCqW','exit','commission','wsMarket','max','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','BTC','-config.json','API-key\x20format\x20invalid','kline','USDT','amount','getPortfolio','ongoing','Binance\x20API\x20blocked','target','ccxt','sha256','eventTime','BNB','distribution','market','YOYOW/','bot','slice','getTime','length','sortBy','cooldown','binanceus','848285OQqzez','event','filled','constructor','.json','bb-settings.json','subscribeSpotKline','************','toFixed','42OCasZs','\x20|\x20Error\x20details:\x20','getStartingBalances','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','initws()','BUSD','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','ask','\x20-\x20bot\x20not\x20started','trade','hybrid-crypto-js','ExchangeNotAvailable','function','format','datetime','find','FILLED','includes','logs','delta','date','2715374mDXJrq','cost','buy','symbols','log','threshold','settings','apiSecret','balances','Order\x20filled:\x20','event-history','botID','no\x20open\x20orders','last','wsKey','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','args','startdate','argv',',\x20must\x20be\x20a\x203\x20digit\x20number','getDate','placeOrder()','\x20|\x20','change','set','running','data','\x20>\x20','eventType','bid','enabled','padStart','initclient','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','MIN_NOTIONAL','lowdb/adapters/FileSync','number','getMonth','2.3.5','API\x20or\x20clock\x20sync\x20issue','milliseconds','entries','cancelOrder','shift','cloneDeep','mkdirSync','getFiat()','coins','<pre>','cancelOrders()','Binance\x20API\x20key\x20is\x20invalid','HOT/EUR','RequestTimeout','emojisell','No\x20more\x20open\x20orders\x20-\x20','offset','map','ordertype','writeFile','configuration','sort','type','getCoins()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','currency','abs','Unknown\x20error\x20occured','forEach','emojibuy','restart','bb-secure.json','10olkipE','fees','-events.json','Unfilled\x20order(s)\x20canceled\x20after\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','BNB/','basecoin','accumulatedQuantity','fetchTickers','\x20order:\x20','padEnd','timeshift','min','parseISO','binance','timestamp','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20orders\x20in\x20less\x20than\x20','Executed\x20','realized','DAI/','recreateCoinResults()','close','orderStatus','11054584mHGHPr','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','InsufficientFunds','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','side','createOrder','\x20minutes\x20-\x20','valid','orderId','loadSymbols()','fromCodePoint','portfolio','placeOrder','AuthenticationError','\x20-\x20','usd','eur','apiKey','lowdb','Crypt','decrypt','get','existsSync','assign','value','isArray','469275BhpPjz',':\x20Bot\x20','push','stringify','reverse','Binance\x20API\x20secret\x20is\x20invalid','Binance\x20not\x20responding','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','headless','userData','initial','\x20|\x20Computer\x27s\x20internal\x20clock\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','formattedMessage','ETH','Market','add','secure','3zSMDrr','time','priceChangePercent','version','differenceInSeconds','Binance\x20not\x20available\x20(1)','cancelLoading','isEqual','fee','date-fns','Pausing\x20for\x20','yyyy/MM/dd',')\x20|\x20Error\x20details:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','balancing\x20resumed','performance','InvalidNonce'];_0x2076=function(){return _0x1d7fe3;};return _0x2076();}const _0x4f448b=function(){let _0xc84ef7=!![];return function(_0x563654,_0x474ea8){const _0x338b39=_0xc84ef7?function(){const _0xccc8e4=_0x190c;if(_0x474ea8){const _0x327fbd=_0x474ea8[_0xccc8e4(0x2a8)](_0x563654,arguments);return _0x474ea8=null,_0x327fbd;}}:function(){};return _0xc84ef7=![],_0x338b39;};}(),_0x3ef33d=_0x4f448b(this,function(){const _0x1360ae=_0x190c;return _0x3ef33d['toString']()['search']('(((.+)+)+)+$')[_0x1360ae(0x2c8)]()[_0x1360ae(0x1e3)](_0x3ef33d)[_0x1360ae(0x2df)](_0x1360ae(0x2e9));});_0x3ef33d();'use strict';const ccxt=require(_0x5331e1(0x1d2)),low=require(_0x5331e1(0x26f)),FileSync=require(_0x5331e1(0x221)),fs=require('fs'),fns=require(_0x5331e1(0x291)),{WebsocketClient,DefaultLogger,isWsFormatted24hrTicker,isWsFormattedKline}=require(_0x5331e1(0x253)),Crypt=require(_0x5331e1(0x1f3))[_0x5331e1(0x270)];let exchange,wsClient;global['ticker']={},global[_0x5331e1(0x215)]={};let ws1=[],ws2=null,ws3=[];const exceptions=[_0x5331e1(0x259),_0x5331e1(0x1c0),_0x5331e1(0x231),_0x5331e1(0x2c5),_0x5331e1(0x2d7),_0x5331e1(0x1d8)];let config,markets,allSymbols,currentCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],validateOrdersState,allOpenOrders,lastOrders=[],allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsinitialized=![],wstriggersset=![],pidBalances,pidOrdersTimeout,botPaused=![],lastCoinsToBalance='',lastOutboundEventTime,recreationNeeded=![],loadingCanceled=![],loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x5331e1(0x2cb))[_0x5331e1(0x28b)],botID=process[_0x5331e1(0x210)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x5331e1(0x2ee)](botID)&&(console['log'](_0x5331e1(0x2b3)+botID+_0x5331e1(0x211)),process[_0x5331e1(0x1c3)](0x1));const userID=process[_0x5331e1(0x210)][0x3]||'',configpath=userID?_0x5331e1(0x1b7)+userID+'/':_0x5331e1(0x1b7);!fs[_0x5331e1(0x273)](configpath)&&fs[_0x5331e1(0x22b)](configpath);const configfile=configpath+_0x5331e1(0x1b3)+botID+_0x5331e1(0x1c9),logfile=configpath+_0x5331e1(0x1b3)+botID+_0x5331e1(0x247),performancefile=configpath+_0x5331e1(0x1b3)+botID+'-performance.json',coinresultsfile=configpath+_0x5331e1(0x1b3)+botID+'-results.json',settingsfile=configpath+_0x5331e1(0x1e5),securefile=configpath+_0x5331e1(0x244),configbackuppath=configpath+_0x5331e1(0x1b8),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x5331e1(0x2e2)]({'logs':[]})[_0x5331e1(0x2d0)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x5331e1(0x2e2)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x5331e1(0x2e2)]({'bot':[]})[_0x5331e1(0x2d0)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x5331e1(0x2e2)]({'coins':[]})[_0x5331e1(0x2d0)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x24daac)=>{},'debug':(..._0x5c3429)=>{},'notice':(..._0x5ceb4e)=>{},'info':(..._0x4ad8b8)=>{},'warning':(..._0x32dce6)=>{},'error':async function(..._0x1036c5){const _0x4d4120=_0x5331e1,_0xd5054=new Date()[_0x4d4120(0x1db)]();if(!lastErrorShown||_0xd5054-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x4d4120(0x1db)]();let _0x4aa63e='';if(_0x1036c5[0x0])_0x4aa63e+=_0x1036c5[0x0];if(_0x1036c5[0x1]&&_0x1036c5[0x1]['error']&&_0x1036c5[0x1][_0x4d4120(0x2eb)][_0x4d4120(0x1b4)])_0x4aa63e+=_0x4d4120(0x26b)+_0x1036c5[0x1]['error'][_0x4d4120(0x1b4)];logging('WebSockets('+consecutivePauses+_0x4d4120(0x294),''+_0x4aa63e),await pauseBot(_0x4d4120(0x28d));}}},crypt=new Crypt({'md':_0x5331e1(0x1d3),'rsaStandard':_0x5331e1(0x2b2)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);settings[_0x5331e1(0x250)]!=config['timeshift']&&updateTimeshift(settings[_0x5331e1(0x250)]);process[_0x5331e1(0x2ec)]({'started':_0x5331e1(0x217)},_0x525f16=>{}),initializeProcessListeners();function _0x190c(_0x2ef71e,_0x4e5675){const _0x568e47=_0x2076();return _0x190c=function(_0x3ef33d,_0x4f448b){_0x3ef33d=_0x3ef33d-0x1b1;let _0x2076bc=_0x568e47[_0x3ef33d];return _0x2076bc;},_0x190c(_0x2ef71e,_0x4e5675);}function proxyEmit(_0x2cf1de,_0x457b4c=null){const _0x10b68a=_0x5331e1;process[_0x10b68a(0x2ec)]({'function':_0x2cf1de,'args':_0x457b4c},_0x53f6f2=>{});}function initializeProcessListeners(){const _0x3f0c78=_0x5331e1;process['on'](_0x3f0c78(0x1b4),_0x1597c5=>{const _0x51cb51=_0x3f0c78;switch(Object[_0x51cb51(0x2ac)](_0x1597c5)[0x0]){case _0x51cb51(0x250):_0x1597c5['timeshift']!=undefined&&(settings[_0x51cb51(0x250)]=_0x1597c5[_0x51cb51(0x250)],updateTimeshift(settings[_0x51cb51(0x250)]));break;case _0x51cb51(0x1f5):switch(_0x1597c5['function']){case _0x51cb51(0x21e):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x1597c5[_0x51cb51(0x20e)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x1597c5[_0x51cb51(0x20e)]);break;case _0x51cb51(0x1ce):getPortfolio(_0x1597c5['args']);break;case'storeConfiguration':storeConfiguration(_0x1597c5[_0x51cb51(0x20e)]);break;case _0x51cb51(0x2e3):storeHeadless(_0x1597c5['args']);break;case _0x51cb51(0x1eb):getStartingBalances(getNormalizedPerformance());break;case _0x51cb51(0x269):placeOrder(_0x1597c5['args']);break;case _0x51cb51(0x28e):cancelLoading();break;case _0x51cb51(0x2d1):sendPortfolioTelegram();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x1ed3d0=_0x5331e1;if(pidBalances)clearTimeout(pidBalances);if(config[_0x1ed3d0(0x26e)]!=''){await initExchange(config[_0x1ed3d0(0x26e)],config[_0x1ed3d0(0x205)]),await initWsEvents();let _0x269614=await loadSymbols();if(_0x269614){currentCoins=await getCoins(!![]),await initws();if(allOpenOrders[_0x1ed3d0(0x1dc)]!=0x0)restoreOrders();initbot();}}}async function initExchange(_0x2427ce,_0x354c82){const _0x1e8f77=_0x5331e1,_0x19fdcc=ccxt[config[_0x1e8f77(0x2de)]];let _0x18c0ff;switch(config[_0x1e8f77(0x2de)]){case _0x1e8f77(0x253):_0x18c0ff='wss://stream.binance.com:9443';break;case _0x1e8f77(0x1df):_0x18c0ff=_0x1e8f77(0x2cd);break;default:_0x18c0ff=_0x1e8f77(0x2e4);}exchange=new _0x19fdcc({'apiKey':_0x2427ce,'secret':_0x354c82,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x2427ce,'api_secret':_0x354c82,'beautify':!![],'wsUrl':_0x18c0ff},logger);let _0x4f049c=config[_0x1e8f77(0x2de)]==_0x1e8f77(0x1df)?_0x1e8f77(0x1cc):_0x1e8f77(0x2a5),_0x3def49=config[_0x1e8f77(0x24b)]==_0x1e8f77(0x284)?_0x1e8f77(0x284):_0x1e8f77(0x1c8);stablecoins={'eur':{'coin':''+_0x3def49+_0x4f049c,'symbol':_0x3def49+'/'+_0x4f049c},'usd':{'coin':_0x3def49+_0x1e8f77(0x1cc),'symbol':_0x3def49+'/USDT'}};}async function initWsEvents(){const _0xbaf500=_0x5331e1;!wstriggersset&&(wstriggersset=!![],wsClient['on'](_0xbaf500(0x283),_0xee3f11=>{const _0x65825d=_0xbaf500;if(isWsFormattedKline(_0xee3f11)){global[_0x65825d(0x2e7)][_0xee3f11[_0x65825d(0x1cb)][_0x65825d(0x2da)]]=_0xee3f11[_0x65825d(0x1cb)][_0x65825d(0x25b)];return;}else{if(isWsFormatted24hrTicker(_0xee3f11)){global[_0x65825d(0x215)][_0xee3f11[_0x65825d(0x2da)]]=_0xee3f11[_0x65825d(0x28a)];return;}else{if(!Array[_0x65825d(0x276)](_0xee3f11)&&_0xee3f11[_0x65825d(0x20c)][_0x65825d(0x1fa)](_0x65825d(0x280))){if(_0xee3f11[_0x65825d(0x1c5)][_0x65825d(0x1fa)](_0x65825d(0x2e8))){updateNumberCoins(_0xee3f11);return;}}}}}),wsClient['on'](_0xbaf500(0x2b8),async _0x5cba59=>{if(!botPaused)currentCoins=await getCoins(!![]);}));}async function loadSymbols(){const _0xec1a42=_0x5331e1;let _0x19a8c1;try{markets=await exchange['loadMarkets'](),allSymbols=exchange[_0xec1a42(0x201)][_0xec1a42(0x2e6)](_0x316051=>{const _0xae8800=_0xec1a42;let _0x21acf6=![];return exceptions[_0xae8800(0x241)](_0x5e2653=>{const _0x33925c=_0xae8800;if(_0x316051[_0x33925c(0x1fa)](_0x5e2653))_0x21acf6=!![];}),!_0x21acf6;}),_0x19a8c1=!![];}catch(_0x272bfa){await handleError(_0x272bfa,_0xec1a42(0x266)),_0x19a8c1=![];}return _0x19a8c1;}async function initbot(){while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();if(recreationNeeded)await recreateCoinResults();}async function initclient(){const _0x43bdc5=_0x5331e1;proxyEmit(_0x43bdc5(0x239),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4d514e=getNormalizedPerformance();emitPerformance(_0x4d514e),await getStartingBalances(_0x4d514e);}async function toggleBotMode(){const _0x2e2704=_0x5331e1;let _0x4d2fb9=dbConfig['get'](_0x2e2704(0x1d9))[_0x2e2704(0x1f8)]({'botID':botID})[_0x2e2704(0x275)]();if(_0x4d2fb9){const _0x5d13b6=!_0x4d2fb9[_0x2e2704(0x27f)];dbConfig['get'](_0x2e2704(0x1d9))[_0x2e2704(0x1f8)]({'botID':botID})[_0x2e2704(0x274)]({'headless':_0x5d13b6})[_0x2e2704(0x2d0)](),config[_0x2e2704(0x27f)]=_0x5d13b6,proxyEmit(_0x2e2704(0x239),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x295b31=_0x5331e1;process[_0x295b31(0x2ec)]({'updatebotmanager':!![]},_0x7f39dd=>{});}function cleanws(){const _0x275b3b=_0x5331e1;wsinitialized=![];ws1&&(ws1[_0x275b3b(0x241)](_0x37a34f=>{const _0x3f3f50=_0x275b3b;try{wsClient[_0x3f3f50(0x25b)](_0x37a34f);}catch(_0x16677b){}}),ws1=[]);if(ws2){try{wsClient[_0x275b3b(0x25b)](ws2);}catch(_0x32f1ef){}ws2=null;}ws3&&(ws3[_0x275b3b(0x241)](_0x52fd39=>{const _0x3e79d2=_0x275b3b;try{wsClient[_0x3e79d2(0x25b)](_0x52fd39);}catch(_0x307aa9){}}),ws3=[]);}async function initws(){const _0x547633=_0x5331e1;cleanws();let _0x1df3ad=[];currentCoins[_0x547633(0x241)](_0x51a8e1=>{const _0x2573a2=_0x547633;if(_0x51a8e1[_0x2573a2(0x1bf)]!=config[_0x2573a2(0x24b)])_0x1df3ad[_0x2573a2(0x279)](_0x51a8e1['symbol']);});if(!_0x1df3ad['includes'](stablecoins[_0x547633(0x26d)][_0x547633(0x2da)]))_0x1df3ad[_0x547633(0x279)](stablecoins['eur'][_0x547633(0x2da)]);if(!_0x1df3ad[_0x547633(0x1fa)](stablecoins[_0x547633(0x26c)][_0x547633(0x2da)]))_0x1df3ad[_0x547633(0x279)](stablecoins[_0x547633(0x26c)]['symbol']);if(!_0x1df3ad[_0x547633(0x1fa)](_0x547633(0x24a)+config[_0x547633(0x24b)]))_0x1df3ad[_0x547633(0x279)](_0x547633(0x24a)+config[_0x547633(0x24b)]);try{_0x1df3ad[_0x547633(0x241)]((_0x3b7d72,_0x23100b)=>{const _0xe9f333=_0x547633;ws1[_0x23100b]=wsClient[_0xe9f333(0x1e6)](noslash(_0x3b7d72),'1m'),ws3[_0x23100b]=wsClient['subscribeSymbol24hrTicker'](noslash(_0x3b7d72),_0xe9f333(0x2e8));}),ws2=wsClient[_0x547633(0x2aa)]();}catch(_0x3ca140){await handleError(_0x3ca140,_0x547633(0x1ed));}let _0x549561,_0x39cd13=0x0;loading['remainingSymbols']=[];let _0x39c416=0x0;_0x1df3ad[_0x547633(0x241)](_0x271405=>{const _0x19d807=_0x547633;loading[_0x19d807(0x1c1)][_0x19d807(0x279)](_0x271405);}),loadingCanceled=![];let _0x161e0a=![];while(_0x549561!=_0x1df3ad[_0x547633(0x1dc)]){_0x549561=0x0,_0x1df3ad['forEach'](_0x3f6564=>{const _0x40cfaa=_0x547633;global[_0x40cfaa(0x2e7)][noslash(_0x3f6564)]&&(loading[_0x40cfaa(0x1c1)]=loading['remainingSymbols'][_0x40cfaa(0x2e6)](_0x47b0a9=>_0x47b0a9!=_0x3f6564),_0x549561++);}),loading[_0x547633(0x2b0)]=Math[_0x547633(0x299)](_0x549561/_0x1df3ad['length']*0x64);loading[_0x547633(0x2b0)]!=0x64&&(_0x39c416>0x1e*0x5&&(loading[_0x547633(0x2ea)]=!![],emitLoadingProgress()),_0x39c416>0x3c*0x5&&!_0x161e0a&&(_0x161e0a=!![],logHistory(_0x547633(0x2eb),_0x547633(0x295)+loading[_0x547633(0x1c1)][_0x547633(0x2c6)](',\x20')+_0x547633(0x1f1))));if(loadingCanceled){loading[_0x547633(0x2db)]=!![],emitLoadingProgress();break;}else _0x549561!=_0x39cd13&&(_0x39cd13=_0x549561,emitLoadingProgress()),_0x39c416++,await sleep(0xc8);}_0x161e0a&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started');if(_0x549561==_0x1df3ad['length'])wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0xcbec8e=_0x5331e1;proxyEmit(_0xcbec8e(0x2e0),loading);}async function getFiat(){const _0x1d5e2b=_0x5331e1;let _0x4868c6=0x0,_0x127ce6=0x0;try{_0x4868c6=global[_0x1d5e2b(0x2e7)][stablecoins[_0x1d5e2b(0x26d)][_0x1d5e2b(0x1bf)]],_0x127ce6=global[_0x1d5e2b(0x2e7)][stablecoins['usd'][_0x1d5e2b(0x1bf)]];}catch(_0x3fff1c){await handleError(_0x3fff1c,_0x1d5e2b(0x22c));}return{'eur':Number(_0x4868c6),'usd':Number(_0x127ce6)};}function setStartDatePerformance(){const _0x44c8e8=_0x5331e1;if(config&&config['liquidity'][0x0]['changes'][_0x44c8e8(0x1dc)]!=0x0){const _0x9b164a=config['liquidity'][0x0][_0x44c8e8(0x2bd)];dbPerformance['get'](_0x44c8e8(0x218))[_0x44c8e8(0x1f8)]({'date':config[_0x44c8e8(0x20f)]})[_0x44c8e8(0x274)]({'coins':_0x9b164a})[_0x44c8e8(0x2d0)]();}}async function recreateCoinResults(){const _0xb31050=_0x5331e1;let _0x227995,_0x40fdee=[];try{const _0x1226a0=fns[_0xb31050(0x1f6)](fns[_0xb31050(0x252)](config['startdate'][_0xb31050(0x2ad)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0xc51151 of currentCoins){if(_0xc51151['coin']!=config[_0xb31050(0x24b)]){let _0x33bc9a=0x0,_0x300c31,_0x320388;_0x227995=await getAllEventOrders(_0xc51151['symbol']);if(_0x227995['length']>0x0)_0x227995['forEach'](_0x3317eb=>{const _0x9bddc0=_0xb31050,_0x206df5=_0xc51151['symbol']['includes'](config[_0x9bddc0(0x24b)]+'/');_0x40fdee[_0x9bddc0(0x279)]({'datetime':_0x3317eb[_0x9bddc0(0x1f7)],'coin':_0xc51151['coin'],'symbol':_0xc51151[_0x9bddc0(0x2da)],'side':_0x3317eb[_0x9bddc0(0x261)],'reverse':_0x206df5,'amount':formatResult(_0x3317eb['filled'],0x8),'filled':formatResult(_0x3317eb[_0x9bddc0(0x1e2)],0x8),'price':formatResult(_0x3317eb['price'],0x8)}),_0x33bc9a=_0x3317eb[_0x9bddc0(0x261)]==_0x9bddc0(0x200)?_0x33bc9a+_0x3317eb[_0x9bddc0(0x1e2)]:_0x33bc9a-_0x3317eb[_0x9bddc0(0x1e2)];if(!_0x320388)_0x320388=_0x3317eb[_0x9bddc0(0x1bc)];});_0x300c31=_0xc51151[_0xb31050(0x222)]-_0x33bc9a;let _0x1e2d1e;config[_0xb31050(0x2be)][_0xb31050(0x241)](_0x435b58=>{const _0x173eda=_0xb31050;!_0x1e2d1e&&(_0x1e2d1e=_0x435b58['changes']['find'](_0x2431d1=>_0x2431d1[_0x173eda(0x1bf)]==_0xc51151[_0x173eda(0x1bf)]),_0x1e2d1e&&(_0x300c31=_0x1e2d1e['number'],_0x320388=_0x1e2d1e[_0x173eda(0x1bc)]));});let _0x27d32c=dbCoinResults[_0xb31050(0x272)](_0xb31050(0x22d))['find']({'coin':_0xc51151[_0xb31050(0x1bf)]})['value']();_0x27d32c={'coin':_0xc51151[_0xb31050(0x1bf)],'number':_0x300c31,'breakeven':_0x320388,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xb31050(0x272)](_0xb31050(0x22d))[_0xb31050(0x1f8)]({'coin':_0xc51151[_0xb31050(0x1bf)]})[_0xb31050(0x274)](_0x27d32c)[_0xb31050(0x2d0)]();}}_0x40fdee[_0xb31050(0x23a)]((_0x1056d4,_0x4f3d26)=>_0x1056d4[_0xb31050(0x1f7)]>_0x4f3d26['datetime']?0x1:_0x4f3d26[_0xb31050(0x1f7)]>_0x1056d4[_0xb31050(0x1f7)]?-0x1:0x0);let _0x11d615=0x0;for(let _0x45ac66 of _0x40fdee){await updateCoinResults(_0x45ac66,!![]);}}catch(_0x4e1413){await handleError(_0x4e1413,_0xb31050(0x25a));}}async function getAllEventOrders(_0x1ab692){const _0x340305=_0x5331e1;let _0x334559=[],_0xcb74ff=dbLogs['get'](_0x340305(0x1fb))[_0x340305(0x2e6)](_0x177cbc=>{const _0x5e5c35=_0x340305,_0x1d78d4=_0x177cbc['event'][_0x5e5c35(0x1b5)]();return _0x1d78d4[_0x5e5c35(0x1fa)](_0x1ab692[_0x5e5c35(0x1b5)]())&&(_0x1d78d4['includes'](_0x5e5c35(0x1d7))&&_0x1d78d4[_0x5e5c35(0x1fa)](_0x5e5c35(0x2e5))||_0x1d78d4[_0x5e5c35(0x1fa)]('filled')&&_0x1d78d4[_0x5e5c35(0x1fa)](_0x5e5c35(0x2e5)));})[_0x340305(0x1dd)](_0x340305(0x289))[_0x340305(0x275)]();return _0xcb74ff[_0x340305(0x241)](_0x4be624=>{const _0x1474ce=_0x340305,_0x1fe3e1=_0x4be624[_0x1474ce(0x1e1)][_0x1474ce(0x1fa)]('sell')?_0x1474ce(0x1be):'buy',_0x501864=/#([0-9]|\.)+\s/i,_0x365026=Number(_0x501864[_0x1474ce(0x2a9)](_0x4be624['event'])[0x0][_0x1474ce(0x1da)](0x1)),_0x24a2d0=/@([0-9]|\.)+$/i,_0x1f086a=Number(_0x24a2d0[_0x1474ce(0x2a9)](_0x4be624[_0x1474ce(0x1e1)])[0x0][_0x1474ce(0x1da)](0x1));_0x334559[_0x1474ce(0x279)]({'datetime':_0x4be624[_0x1474ce(0x289)],'coin':symbolToCoin(_0x1ab692),'symbol':_0x1ab692,'side':_0x1fe3e1,'amount':_0x365026,'filled':_0x365026,'price':_0x1f086a});}),_0x334559;}async function getAllOrders(_0x1cb9ef,_0x2dff12){const _0x3b5838=_0x5331e1;let _0x183d48=[];while(_0x2dff12<exchange[_0x3b5838(0x226)]()){const _0x4dcdf2=0x1f4,_0x462cf7=await exchange[_0x3b5838(0x2a6)](_0x1cb9ef,_0x2dff12,_0x4dcdf2);if(_0x462cf7['length'])_0x2dff12=_0x462cf7[_0x462cf7[_0x3b5838(0x1dc)]-0x1][_0x3b5838(0x254)]+0x1,_0x183d48=_0x183d48[_0x3b5838(0x2d4)](_0x462cf7);else break;}return _0x183d48;}async function validate24hChanges(){const _0x42a1aa=_0x5331e1;let _0x3cf8f5;for(const _0x48163c of currentCoins){if(_0x48163c['coin']!=config['basecoin']){let _0x3dbcc9;_0x48163c[_0x42a1aa(0x27b)]?_0x3dbcc9=formatResult((0x1/(global['change'][noslash(_0x48163c[_0x42a1aa(0x2da)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3dbcc9=global[_0x42a1aa(0x215)][noslash(_0x48163c[_0x42a1aa(0x2da)])],_0x3dbcc9<config[_0x42a1aa(0x2ce)]&&(logHistory('error',_0x48163c[_0x42a1aa(0x1bf)]+_0x42a1aa(0x2c4)+_0x3dbcc9+'%'),logHistory('error',_0x42a1aa(0x1ef)),logHistory(_0x42a1aa(0x2eb),_0x42a1aa(0x20d)),await storeHeadless({'headless':![]}));}}}async function oneTimeMigration(){const _0x2c2159=_0x5331e1;let _0x14bbef=dbLogs[_0x2c2159(0x272)](_0x2c2159(0x28b))[_0x2c2159(0x275)]();if(_0x14bbef!=_0x2c2159(0x224)){dbLogs[_0x2c2159(0x216)](_0x2c2159(0x28b),_0x2c2159(0x224))[_0x2c2159(0x2d0)]();let _0x36333a=[];const _0x113d18=dbLogs[_0x2c2159(0x272)](_0x2c2159(0x1fb))[_0x2c2159(0x275)]();_0x113d18[_0x2c2159(0x241)](_0x4852d1=>{const _0x2f8ca8=_0x2c2159;_0x36333a['push']({'time':_0x4852d1[_0x2f8ca8(0x289)],'type':_0x4852d1[_0x2f8ca8(0x23b)],'event':_0x4852d1[_0x2f8ca8(0x1e1)]});}),dbLogs[_0x2c2159(0x272)](_0x2c2159(0x1fb))[_0x2c2159(0x274)](_0x36333a)[_0x2c2159(0x2d0)]();}let _0x2806b6=dbConfig[_0x2c2159(0x272)]('version')['value']();if(_0x2806b6!=_0x2c2159(0x224)){dbConfig['set']('version',_0x2c2159(0x224))['write']();let _0x4be87f=dbConfig[_0x2c2159(0x272)](_0x2c2159(0x1d9))[_0x2c2159(0x1f8)]({'botID':botID})[_0x2c2159(0x275)]();if(_0x4be87f){let _0x5b99d2=[];_0x4be87f['portfolio']['forEach'](_0x17e83a=>{const _0x5446ed=_0x2c2159;_0x5b99d2['push']({'coin':_0x17e83a[_0x5446ed(0x1bf)],'number':_0x17e83a[_0x5446ed(0x29a)],'price':_0x17e83a['startprice']}),delete _0x17e83a['startnumber'],delete _0x17e83a[_0x5446ed(0x2b5)];});if(_0x5b99d2[_0x2c2159(0x1dc)]!==0x0)fs[_0x2c2159(0x238)](configbackuppath+('starting-balance-'+botID+_0x2c2159(0x1e4)),JSON[_0x2c2159(0x27a)](_0x5b99d2,null,0x4),function(_0x1cdae4){if(_0x1cdae4){}});const _0x1c4deb=(_0x1c0081,_0x5f4e3a)=>{const _0x4e22d4=_0x2c2159;let _0x4023fb=[];_0x5f4e3a[_0x4e22d4(0x241)](_0x3af3eb=>{const _0x4ce79f=_0x4e22d4,_0x1a17f2=_0x1c0081[_0x4ce79f(0x1f8)](_0x37b160=>_0x37b160[_0x4ce79f(0x1bf)]==_0x3af3eb[_0x4ce79f(0x1bf)]);if(!_0x1a17f2)_0x4023fb[_0x4ce79f(0x279)](_0x3af3eb);});let _0x1bed1d=[];return _0x1c0081[_0x4e22d4(0x241)](_0x3a5288=>{const _0x838b3f=_0x4e22d4,_0x54aec5=_0x5f4e3a['find'](_0x9abedd=>_0x9abedd[_0x838b3f(0x1bf)]==_0x3a5288['coin']);if(!_0x54aec5||_0x54aec5['number']==0x0&&_0x3a5288[_0x838b3f(0x222)]!=0x0)_0x1bed1d[_0x838b3f(0x279)](_0x3a5288);}),{'missingDay1':_0x4023fb,'notInDay2':_0x1bed1d};},_0x48a30e=dbPerformance[_0x2c2159(0x272)](_0x2c2159(0x218))[_0x2c2159(0x22a)]()['value']();if(_0x48a30e[_0x2c2159(0x1dc)]>0x1){const {missingDay1:_0x26fe1a,notInDay2:_0x1db5ed}=_0x1c4deb(_0x5b99d2,_0x48a30e[0x1][_0x2c2159(0x22d)]);_0x5b99d2=[..._0x5b99d2,..._0x26fe1a],_0x1db5ed[_0x2c2159(0x241)](_0x4fd760=>{const _0x1fd520=_0x2c2159;let _0x976ae6=_0x5b99d2[_0x1fd520(0x29f)](_0x29028e=>_0x29028e[_0x1fd520(0x1bf)]==_0x4fd760[_0x1fd520(0x1bf)]);_0x976ae6!=-0x1&&_0x5b99d2[_0x1fd520(0x2d9)](_0x976ae6,0x1);});}_0x5b99d2[_0x2c2159(0x23a)]((_0x392632,_0x157d36)=>_0x392632[_0x2c2159(0x1bf)]>_0x157d36[_0x2c2159(0x1bf)]?0x1:_0x157d36[_0x2c2159(0x1bf)]>_0x392632[_0x2c2159(0x1bf)]?-0x1:0x0);let _0x2de8f9=[{'date':_0x4be87f[_0x2c2159(0x20f)],'changes':_0x5b99d2}];_0x48a30e[_0x2c2159(0x1dc)]>0x2&&_0x48a30e['forEach']((_0x59aa7c,_0x52dc8e)=>{const _0x1f76ff=_0x2c2159;if(_0x52dc8e>0x0&&_0x52dc8e<_0x48a30e[_0x1f76ff(0x1dc)]-0x1){const {missingDay1:_0x3c1401,notInDay2:_0x30fc30}=_0x1c4deb(_0x48a30e[_0x52dc8e]['coins'],_0x48a30e[_0x52dc8e+0x1][_0x1f76ff(0x22d)]);_0x5b99d2=[],(_0x3c1401[_0x1f76ff(0x1dc)]!=0x0||_0x30fc30[_0x1f76ff(0x1dc)]!=0x0)&&(_0x3c1401[_0x1f76ff(0x1dc)]!=0x0&&_0x5b99d2[_0x1f76ff(0x279)](..._0x3c1401),_0x30fc30[_0x1f76ff(0x1dc)]!=0x0&&(_0x30fc30[_0x1f76ff(0x241)](_0x5cb6bd=>{const _0x2264c4=_0x1f76ff;_0x5cb6bd[_0x2264c4(0x222)]=-_0x5cb6bd[_0x2264c4(0x222)];}),_0x5b99d2['push'](..._0x30fc30)),_0x5b99d2[_0x1f76ff(0x23a)]((_0x10bf25,_0x4f4eec)=>_0x10bf25[_0x1f76ff(0x1bf)]>_0x4f4eec['coin']?0x1:_0x4f4eec[_0x1f76ff(0x1bf)]>_0x10bf25[_0x1f76ff(0x1bf)]?-0x1:0x0),_0x2de8f9[_0x1f76ff(0x279)]({'date':_0x48a30e[_0x52dc8e+0x1][_0x1f76ff(0x1fd)],'changes':_0x5b99d2}));}}),dbConfig[_0x2c2159(0x272)](_0x2c2159(0x1d9))['find']({'botID':botID})['assign']({..._0x4be87f,'liquidity':_0x2de8f9})[_0x2c2159(0x2d0)]();}}config=getConfiguration(botID);let _0x1528fb=dbPerformance[_0x2c2159(0x272)]('version')[_0x2c2159(0x275)]();_0x1528fb!=_0x2c2159(0x224)&&(dbPerformance[_0x2c2159(0x216)](_0x2c2159(0x28b),_0x2c2159(0x224))['write'](),setStartDatePerformance());let _0x34f2f6=dbCoinResults[_0x2c2159(0x272)](_0x2c2159(0x28b))['value']();if(_0x34f2f6!='2.5.0'){dbCoinResults[_0x2c2159(0x216)](_0x2c2159(0x28b),_0x2c2159(0x2c7))[_0x2c2159(0x2d0)]();let _0x3a0e93=dbCoinResults[_0x2c2159(0x272)](_0x2c2159(0x22d))[_0x2c2159(0x275)]();if(_0x3a0e93[_0x2c2159(0x1dc)]!=0x0)recreationNeeded=!![];}}function getConfiguration(_0x4dcc9c){const _0xa2707e=_0x5331e1;let _0x213c9c=dbConfig[_0xa2707e(0x272)](_0xa2707e(0x1d9))[_0xa2707e(0x1f8)]({'botID':_0x4dcc9c})[_0xa2707e(0x275)]();if(_0x213c9c){let _0x5d5961=![];typeof _0x213c9c[_0xa2707e(0x203)]==_0xa2707e(0x2bc)&&(_0x213c9c={..._0x213c9c,'threshold':Number(_0x213c9c[_0xa2707e(0x203)])},_0x5d5961=!![]),_0x213c9c[_0xa2707e(0x2ce)]==null&&(_0x213c9c={..._0x213c9c,'change24h':-0x14},_0x5d5961=!![]),_0x5d5961&&(_0x213c9c={'botID':_0x213c9c[_0xa2707e(0x209)],'exchange':_0x213c9c['exchange'],'apiKey':_0x213c9c[_0xa2707e(0x26e)],'apiSecret':_0x213c9c[_0xa2707e(0x205)],'basecoin':_0x213c9c[_0xa2707e(0x24b)],'botname':_0x213c9c[_0xa2707e(0x2ef)],'showname':_0x213c9c[_0xa2707e(0x1b1)],'threshold':_0x213c9c[_0xa2707e(0x203)],'ordertype':_0x213c9c['ordertype'],'timeout':_0x213c9c[_0xa2707e(0x2ea)],'startdate':_0x213c9c[_0xa2707e(0x20f)],'recreate':_0x213c9c['recreate'],'timeshift':_0x213c9c[_0xa2707e(0x250)],'headless':_0x213c9c[_0xa2707e(0x27f)],'cooldown':_0x213c9c[_0xa2707e(0x1de)],'change24h':_0x213c9c[_0xa2707e(0x2ce)],'emojibuy':_0x213c9c['emojibuy'],'emojisell':_0x213c9c[_0xa2707e(0x233)],'portfolio':_0x213c9c[_0xa2707e(0x268)],'liquidity':_0x213c9c[_0xa2707e(0x2be)]},dbConfig[_0xa2707e(0x272)]('bot')[_0xa2707e(0x2f1)]()[_0xa2707e(0x2d0)](),dbConfig[_0xa2707e(0x272)](_0xa2707e(0x1d9))[_0xa2707e(0x279)](_0x213c9c)['write']());}else _0x213c9c={'botID':_0x4dcc9c,'exchange':_0xa2707e(0x253),'apiKey':'','apiSecret':'','basecoin':'','botname':_0xa2707e(0x29c)+_0x4dcc9c,'showname':![],'threshold':0x3,'ordertype':_0xa2707e(0x1d7),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0xa2707e(0x250)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','portfolio':[],'liquidity':[{'date':getDate(),'changes':[]}]};return _0x213c9c;}function emittedConfiguration(){const _0x3f99e1=_0x5331e1;let _0x1c6165;return config[_0x3f99e1(0x26e)]==''?_0x1c6165=config:_0x1c6165={...config,'apiKey':'************','apiSecret':'************'},_0x1c6165;}function getSettings(){const _0x47494f=_0x5331e1;return dbSettings[_0x47494f(0x272)](_0x47494f(0x204))['value']();}function getSecure(){const _0x356b3e=_0x5331e1;return dbSecure[_0x356b3e(0x272)](_0x356b3e(0x287))[_0x356b3e(0x275)]()||{};}function updateTimeshift(_0x46aba0){const _0x2e40f8=_0x5331e1;let _0xdd7f42=dbConfig[_0x2e40f8(0x272)](_0x2e40f8(0x1d9))[_0x2e40f8(0x1f8)]({'botID':botID})[_0x2e40f8(0x275)]();_0xdd7f42&&dbConfig['get'](_0x2e40f8(0x1d9))[_0x2e40f8(0x1f8)]({'botID':botID})[_0x2e40f8(0x274)]({'timeshift':_0x46aba0})[_0x2e40f8(0x2d0)](),config[_0x2e40f8(0x250)]=_0x46aba0,proxyEmit(_0x2e40f8(0x239),emittedConfiguration());}async function storeConfiguration(_0x1f70b2){const _0x240a85=_0x5331e1;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x28dca1=dbConfig[_0x240a85(0x272)](_0x240a85(0x1d9))[_0x240a85(0x1f8)]({'botID':botID})[_0x240a85(0x275)]();_0x1f70b2={..._0x1f70b2,'apiKey':crypt[_0x240a85(0x271)](secure[_0x240a85(0x2a4)],_0x1f70b2[_0x240a85(0x26e)])['message'],'apiSecret':crypt[_0x240a85(0x271)](secure[_0x240a85(0x2a4)],_0x1f70b2[_0x240a85(0x205)])[_0x240a85(0x1b4)]};if(_0x28dca1){if(_0x1f70b2[_0x240a85(0x26e)]==_0x240a85(0x1e7))_0x1f70b2[_0x240a85(0x26e)]=config['apiKey'];if(_0x1f70b2[_0x240a85(0x205)]==_0x240a85(0x1e7))_0x1f70b2[_0x240a85(0x205)]=config[_0x240a85(0x205)];dbConfig[_0x240a85(0x272)]('bot')[_0x240a85(0x1f8)]({'botID':botID})['assign'](_0x1f70b2)['write']();}else dbConfig[_0x240a85(0x272)]('bot')[_0x240a85(0x279)](_0x1f70b2)[_0x240a85(0x2d0)](),process['send']({'status':_0x240a85(0x21c),'live':_0x240a85(0x217)},_0x2ea8df=>{});config={..._0x1f70b2},setStartDatePerformance(),process[_0x240a85(0x2ec)]({'botname':_0x1f70b2[_0x240a85(0x2ef)]},_0x49a75a=>{}),updateBotManager();const _0x1445d7=getNormalizedPerformance();getStartingBalances(_0x1445d7),emitPerformance(_0x1445d7),proxyEmit('configuration-stored'),await initCoinResults(),reset();}async function storeHeadless(_0x590499){const _0x38a05d=_0x5331e1,_0x38501a={...config,'headless':_0x590499[_0x38a05d(0x27f)]};let _0x477e97=dbConfig[_0x38a05d(0x272)](_0x38a05d(0x1d9))[_0x38a05d(0x1f8)]({'botID':botID})[_0x38a05d(0x275)]();_0x477e97&&dbConfig[_0x38a05d(0x272)](_0x38a05d(0x1d9))['find']({'botID':botID})[_0x38a05d(0x274)](_0x38501a)['write'](),config={..._0x38501a},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}function noslash(_0x4797d2){const _0x2e406=_0x5331e1;return _0x4797d2[_0x2e406(0x2ad)]('/','');}async function updateNumberCoins(_0x395eeb){const _0x28b887=_0x5331e1;if(_0x395eeb['eventType']&&_0x395eeb[_0x28b887(0x21a)]=='outboundAccountPosition'){if(_0x395eeb[_0x28b887(0x1d4)]!=lastOutboundEventTime){lastOutboundEventTime=_0x395eeb[_0x28b887(0x1d4)],currentCoins=await getCoins(!![]);if(lastBalances){let _0xcdc747=JSON[_0x28b887(0x1bd)](lastBalances[_0x28b887(0x268)]);_0xcdc747[_0x28b887(0x241)](_0x263f4a=>{const _0x4d8f7c=_0x28b887,_0x57a9e6=currentCoins[_0x4d8f7c(0x1f8)](_0x2c09d4=>_0x2c09d4[_0x4d8f7c(0x1bf)]==_0x263f4a[_0x4d8f7c(0x1bf)]);if(_0x57a9e6['order'])_0x263f4a[_0x4d8f7c(0x2e5)]=_0x57a9e6[_0x4d8f7c(0x2e5)];}),lastBalances={...lastBalances,'portfolio':JSON[_0x28b887(0x27a)](_0xcdc747)},proxyEmit(_0x28b887(0x206),{'serverversion':serverversion,'balances':lastBalances});}}}if(_0x395eeb['eventType']&&_0x395eeb[_0x28b887(0x21a)]=='executionReport'){if(_0x395eeb[_0x28b887(0x25c)]==_0x28b887(0x1f9)){if(lastOrders)lastOrders[_0x28b887(0x241)](async _0x2ae29b=>{const _0x3c5e2a=_0x28b887;_0x2ae29b[_0x3c5e2a(0x265)]==_0x395eeb[_0x3c5e2a(0x265)]&&_0x2ae29b[_0x3c5e2a(0x1e2)]==0x0&&(_0x2ae29b[_0x3c5e2a(0x1bc)]=_0x395eeb[_0x3c5e2a(0x2d5)]/_0x395eeb[_0x3c5e2a(0x24c)],_0x2ae29b['filled']=_0x395eeb[_0x3c5e2a(0x24c)],_0x2ae29b[_0x3c5e2a(0x290)]={'cost':_0x395eeb[_0x3c5e2a(0x1c4)],'currency':_0x395eeb[_0x3c5e2a(0x2cf)]},await validateOrders(),await updateCoinResults(_0x2ae29b));});}}}async function getCoins(_0x2cc3b1=![],_0x2e0a73=!![],_0x3653db=config[_0x5331e1(0x24b)]){const _0x57dd40=_0x5331e1;let _0x19ead6,_0x4faa2c=[],_0x181a77=[],_0x316403=[];try{_0x19ead6=await exchange[_0x57dd40(0x1b2)](),mybalances=_0x19ead6[_0x57dd40(0x2f2)];if(!_0x2e0a73)for(const [_0x3eb74a,_0x1b4930]of Object[_0x57dd40(0x227)](mybalances)){_0x316403[_0x57dd40(0x279)](_0x3eb74a);}else config[_0x57dd40(0x268)][_0x57dd40(0x241)](_0x40a1d6=>{const _0x4bd570=_0x57dd40;if(!_0x40a1d6[_0x4bd570(0x2a2)])_0x316403['push'](_0x40a1d6[_0x4bd570(0x1bf)]);});if(_0x3653db=='')for(const [_0x277e84,_0x30d334]of Object['entries'](mybalances)){_0x30d334[_0x57dd40(0x2c8)]()!=0x0&&_0x181a77[_0x57dd40(0x279)]({'coin':_0x277e84});}else{let _0x579d18=![],_0x3c0e06;allOpenOrders=[];for(const [_0x117356,_0x4941c8]of Object['entries'](mybalances)){if(_0x316403['includes'](_0x117356)){const _0x7ccd53=config[_0x57dd40(0x268)][_0x57dd40(0x1f8)](_0x47a714=>_0x47a714[_0x57dd40(0x1bf)]==_0x117356),_0x588bc0=_0x117356+'/'+_0x3653db,_0x34485c=_0x3653db+'/'+_0x117356;_0x579d18=![];if((_0x4941c8[_0x57dd40(0x2c8)]()!=0x0||_0x7ccd53)&&(allSymbols[_0x57dd40(0x1fa)](_0x588bc0)||_0x117356==_0x3653db))_0x117356!=_0x3653db&&(_0x4faa2c['push'](_0x588bc0),_0x2cc3b1&&(_0x3c0e06=await exchange['fetchOpenOrders'](_0x588bc0),_0x3c0e06[_0x57dd40(0x1dc)]>0x0&&(_0x579d18=!![]))),_0x181a77[_0x57dd40(0x279)]({'coin':_0x117356,'symbol':_0x588bc0,'reverse':![],'number':Math[_0x57dd40(0x1c6)](_0x4941c8+(_0x7ccd53&&_0x7ccd53['offset']||0x0),0x0),'order':_0x579d18});else(_0x4941c8['toString']()!=0x0||_0x7ccd53)&&allSymbols['includes'](_0x34485c)&&(_0x117356!=_0x3653db&&(_0x4faa2c['push'](_0x34485c),_0x2cc3b1&&(_0x3c0e06=await exchange['fetchOpenOrders'](_0x34485c),_0x3c0e06[_0x57dd40(0x1dc)]>0x0&&(_0x579d18=!![]))),_0x181a77[_0x57dd40(0x279)]({'coin':_0x117356,'symbol':_0x34485c,'reverse':!![],'number':Math['max'](_0x4941c8+(_0x7ccd53&&_0x7ccd53[_0x57dd40(0x235)]||0x0),0x0),'order':_0x579d18}));}_0x579d18&&allOpenOrders[_0x57dd40(0x279)](_0x3c0e06[0x0]);}_0x2cc3b1&&allOpenOrders[_0x57dd40(0x1dc)]==0x0&&allOrdersPlaced&&(lockOrders&&(await sleep(0x7d0),validateOrders(_0x57dd40(0x20a))));}}catch(_0x144622){if(!_0x2e0a73){if(_0x144622[_0x57dd40(0x2c8)]()[_0x57dd40(0x1fa)](_0x57dd40(0x1ca)))return logHistory(_0x57dd40(0x2eb),_0x57dd40(0x230)),![];else{if(_0x144622[_0x57dd40(0x2c8)]()[_0x57dd40(0x1fa)](_0x57dd40(0x26a)))return logHistory(_0x57dd40(0x2eb),_0x57dd40(0x2d6)),![];else{if(_0x144622[_0x57dd40(0x2c8)]()[_0x57dd40(0x1fa)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x57dd40(0x2eb),_0x57dd40(0x27c)),![];else await handleError(_0x144622,_0x57dd40(0x23c));}}}else await handleError(_0x144622,'getCoins()');}return _0x181a77;}async function getPortfolio(_0x39421c){const _0x484dac=_0x5331e1;let _0x159328=[],_0x510012=[],_0x420eb4,_0x507767=[],_0x4dac40,_0x3525f5;_0x39421c[_0x484dac(0x26e)]===_0x484dac(0x1e7)||_0x39421c[_0x484dac(0x205)]===_0x484dac(0x1e7)?(_0x4dac40=config[_0x484dac(0x26e)],_0x3525f5=config[_0x484dac(0x205)]):(_0x4dac40=_0x39421c[_0x484dac(0x26e)],_0x3525f5=_0x39421c[_0x484dac(0x205)]);await initExchange(_0x4dac40,_0x3525f5);let _0x4d554f=await loadSymbols();if(_0x4d554f){_0x507767=await getCoins(![],![],_0x39421c[_0x484dac(0x24b)]);if(_0x507767===![])proxyEmit(_0x484dac(0x268),![]);else{if(_0x39421c[_0x484dac(0x24b)]=='')proxyEmit(_0x484dac(0x268),_0x507767);else{_0x507767['forEach'](_0x2aed06=>{const _0x107964=_0x484dac;if(_0x2aed06['coin']!=_0x39421c['basecoin'])_0x159328[_0x107964(0x279)](_0x2aed06['symbol']);});try{_0x510012=await exchange[_0x484dac(0x24d)](_0x159328);}catch(_0x1825ad){await handleError(_0x1825ad,_0x484dac(0x2b1));}_0x507767[_0x484dac(0x241)](_0x5a43b3=>{const _0x28d928=_0x484dac;_0x5a43b3[_0x28d928(0x1bf)]!=_0x39421c[_0x28d928(0x24b)]?_0x420eb4=_0x5a43b3[_0x28d928(0x27b)]?0x1/_0x510012[_0x5a43b3[_0x28d928(0x2da)]][_0x28d928(0x20b)]:_0x510012[_0x5a43b3['symbol']]['last']:_0x420eb4=0x1,_0x5a43b3[_0x28d928(0x1bc)]=formatResult(_0x420eb4,0x8);}),proxyEmit(_0x484dac(0x268),_0x507767);}}}else proxyEmit(_0x484dac(0x268),![]);}function checkMinimums(_0x63fd8b){const _0xb8ea33=_0x5331e1;let _0x288054=!![];const _0x171119=!_0x63fd8b[_0xb8ea33(0x27b)]?markets[_0x63fd8b[_0xb8ea33(0x2da)]][_0xb8ea33(0x2c0)][_0xb8ea33(0x1cd)][_0xb8ea33(0x251)]:markets[_0x63fd8b[_0xb8ea33(0x2da)]]['limits']['cost']['min'],_0x2cf778=!_0x63fd8b[_0xb8ea33(0x27b)]?markets[_0x63fd8b[_0xb8ea33(0x2da)]][_0xb8ea33(0x2c0)][_0xb8ea33(0x1ff)][_0xb8ea33(0x251)]:markets[_0x63fd8b[_0xb8ea33(0x2da)]][_0xb8ea33(0x2c0)][_0xb8ea33(0x1cd)][_0xb8ea33(0x251)],_0x553664=markets[_0x63fd8b[_0xb8ea33(0x2da)]][_0xb8ea33(0x2ca)]['amount'];_0x63fd8b[_0xb8ea33(0x1f2)]=formatResultTruncate(_0x63fd8b['trade'],_0x553664);if(Math[_0xb8ea33(0x23f)](_0x63fd8b[_0xb8ea33(0x1f2)])<_0x171119)_0x288054=![];if(Math['abs'](_0x63fd8b[_0xb8ea33(0x1f2)])*_0x63fd8b[_0xb8ea33(0x20b)]<_0x2cf778)_0x288054=![];if(_0x63fd8b[_0xb8ea33(0x261)]==_0xb8ea33(0x1be)){let _0x4f61c5=config[_0xb8ea33(0x268)][_0xb8ea33(0x1f8)](_0x491896=>_0x491896[_0xb8ea33(0x1bf)]==_0x63fd8b[_0xb8ea33(0x1bf)]);if(_0x4f61c5[_0xb8ea33(0x235)]>0x0){if(Math[_0xb8ea33(0x23f)](_0x63fd8b['trade'])>_0x63fd8b[_0xb8ea33(0x222)]-_0x4f61c5[_0xb8ea33(0x235)])_0x288054=![];}else{if(Math[_0xb8ea33(0x23f)](_0x63fd8b[_0xb8ea33(0x1f2)])>_0x63fd8b['number'])_0x288054=![];}}if(_0x63fd8b[_0xb8ea33(0x261)]==_0xb8ea33(0x200)){let _0x2b3d2f=config['portfolio'][_0xb8ea33(0x1f8)](_0x1c565a=>_0x1c565a['coin']==config[_0xb8ea33(0x24b)]),_0x1703a4=currentCoins['find'](_0xd7d189=>_0xd7d189[_0xb8ea33(0x1bf)]==config[_0xb8ea33(0x24b)]);if(_0x2b3d2f[_0xb8ea33(0x235)]>0x0){if(Math[_0xb8ea33(0x23f)](_0x63fd8b[_0xb8ea33(0x1f2)])*_0x63fd8b[_0xb8ea33(0x20b)]>_0x1703a4[_0xb8ea33(0x222)]-_0x2b3d2f[_0xb8ea33(0x235)])_0x288054=![];}else{if(Math[_0xb8ea33(0x23f)](_0x63fd8b['trade'])*_0x63fd8b[_0xb8ea33(0x20b)]>_0x1703a4[_0xb8ea33(0x222)])_0x288054=![];}}return _0x288054;}async function getBalances(){const _0x3ef8de=_0x5331e1;let _0x51bed9=0x0,_0x4f17c7;const _0x15fb61=config[_0x3ef8de(0x203)];if(config['headless']&&config[_0x3ef8de(0x2ce)]<0x0)await validate24hChanges();currentCoins[_0x3ef8de(0x241)](_0x30bf25=>{const _0x23a073=_0x3ef8de;if(_0x30bf25[_0x23a073(0x1bf)]!=config['basecoin']){let _0x317b2c=global[_0x23a073(0x2e7)][noslash(_0x30bf25[_0x23a073(0x2da)])];_0x4f17c7=_0x30bf25[_0x23a073(0x27b)]?0x1/_0x317b2c:_0x317b2c;}else _0x4f17c7=0x1;let _0x434c14=_0x30bf25[_0x23a073(0x222)]*_0x4f17c7;_0x51bed9+=_0x434c14,_0x30bf25['last']=formatResult(Number(_0x4f17c7),0x8),_0x30bf25[_0x23a073(0x275)]=_0x434c14;}),currentCoins[_0x3ef8de(0x241)](_0xa1b336=>{const _0x3bd9a5=_0x3ef8de;let _0x587b2=config[_0x3bd9a5(0x268)][_0x3bd9a5(0x1f8)](_0x15bf09=>_0x15bf09[_0x3bd9a5(0x1bf)]==_0xa1b336['coin']),_0x1cfc86=Number(_0x587b2['distribution']),_0x2fa4e8=_0xa1b336[_0x3bd9a5(0x275)]/_0x51bed9*0x64,_0xd4eb22=_0x1cfc86*_0x51bed9/0x64/_0xa1b336['last']-_0xa1b336[_0x3bd9a5(0x222)];_0xa1b336[_0x3bd9a5(0x1d6)]=formatResult(_0x2fa4e8,0x3),_0xa1b336['target']=formatResult(_0x1cfc86,0x3),_0xa1b336[_0x3bd9a5(0x1f2)]=formatResult(_0xd4eb22,0x8),_0xa1b336[_0x3bd9a5(0x261)]='',_0xa1b336['valid']=![];if(_0xa1b336['coin']!=config[_0x3bd9a5(0x24b)]){if(_0xa1b336[_0x3bd9a5(0x1d6)]>_0x1cfc86)_0xa1b336[_0x3bd9a5(0x261)]=_0x3bd9a5(0x1be),_0xa1b336[_0x3bd9a5(0x264)]=checkMinimums(_0xa1b336);else _0xa1b336['distribution']<_0x1cfc86&&(_0xa1b336[_0x3bd9a5(0x261)]='buy',_0xa1b336[_0x3bd9a5(0x264)]=checkMinimums(_0xa1b336));}_0xa1b336[_0x3bd9a5(0x1fc)]=_0xa1b336['distribution']/_0xa1b336[_0x3bd9a5(0x1d1)]-0x1;}),currentCoins[_0x3ef8de(0x23a)]((_0x1c6d5b,_0xf8dfba)=>_0x1c6d5b[_0x3ef8de(0x1fc)]<_0xf8dfba['delta']?0x1:_0xf8dfba[_0x3ef8de(0x1fc)]<_0x1c6d5b[_0x3ef8de(0x1fc)]?-0x1:0x0);const _0x2624ed=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2624ed[_0x3ef8de(0x26d)],'usd':_0x2624ed['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x15fb61},proxyEmit(_0x3ef8de(0x206),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3ef8de(0x27f)])headlessMode({'portfolio':currentCoins,'threshold':_0x15fb61});else{if(!lockOrders)notifyBalance({'portfolio':currentCoins,'threshold':_0x15fb61});}!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance(getNormalizedPerformance()));lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3a7777=_0x5331e1;if(!lastBalances)return;let _0x5e70e3=[],_0x74d164,_0x5c3cd5=JSON[_0x3a7777(0x1bd)](lastBalances[_0x3a7777(0x268)]);_0x5c3cd5[_0x3a7777(0x23a)]((_0x145911,_0x2fdb78)=>_0x145911['coin']>_0x2fdb78[_0x3a7777(0x1bf)]?0x1:_0x2fdb78[_0x3a7777(0x1bf)]>_0x145911[_0x3a7777(0x1bf)]?-0x1:0x0),_0x5c3cd5[_0x3a7777(0x241)](_0x55fb52=>{const _0x4ccc33=_0x3a7777;let _0x2b9d70={'coin':_0x55fb52['coin'],'number':_0x55fb52['number'],'price':_0x55fb52[_0x4ccc33(0x20b)]};_0x5e70e3[_0x4ccc33(0x279)](_0x2b9d70);});const _0x518bbc=await getFiat();_0x74d164={'date':lastBalances[_0x3a7777(0x289)][_0x3a7777(0x29e)]('\x20')[0x0],'eur':_0x518bbc[_0x3a7777(0x26d)],'usd':_0x518bbc['usd'],'coins':_0x5e70e3};let _0x344088=dbPerformance[_0x3a7777(0x272)](_0x3a7777(0x218))[_0x3a7777(0x1f8)]({'date':_0x74d164[_0x3a7777(0x1fd)]})[_0x3a7777(0x275)]();_0x344088?_0x74d164[_0x3a7777(0x1fd)]!=config[_0x3a7777(0x20f)]&&dbPerformance['get'](_0x3a7777(0x218))[_0x3a7777(0x1f8)]({'date':_0x74d164[_0x3a7777(0x1fd)]})[_0x3a7777(0x274)](_0x74d164)['write']():dbPerformance['get'](_0x3a7777(0x218))[_0x3a7777(0x279)](_0x74d164)[_0x3a7777(0x2d0)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x2810a0=_0x5331e1;let _0x2e8d8b=[];if(dbPerformance['has']('data')[_0x2810a0(0x275)]()){let _0x548d5e=dbPerformance['get'](_0x2810a0(0x218))['cloneDeep']()[_0x2810a0(0x1dd)](_0x2810a0(0x1fd))[_0x2810a0(0x275)](),_0x3aace1=[...config['liquidity']];_0x3aace1[_0x2810a0(0x23a)]((_0x52c28e,_0x51dfbd)=>_0x52c28e[_0x2810a0(0x1fd)]>_0x51dfbd[_0x2810a0(0x1fd)]?-0x1:_0x51dfbd[_0x2810a0(0x1fd)]>_0x52c28e['date']?0x1:0x0);let _0x30873b=0x1,_0x22a1ea=[],_0x59e2e5=0x0;_0x548d5e['slice']()[_0x2810a0(0x27b)]()[_0x2810a0(0x241)]((_0x20cdcb,_0x186367)=>{const _0x22a965=_0x2810a0;if(_0x3aace1[_0x59e2e5]){if(_0x548d5e[_0x548d5e[_0x22a965(0x1dc)]-_0x186367]&&_0x3aace1[_0x59e2e5]['date']==_0x548d5e[_0x548d5e[_0x22a965(0x1dc)]-_0x186367]['date']){if(_0x186367<_0x548d5e[_0x22a965(0x1dc)]){let _0x2ac48f=0x0,_0x446294=0x0;_0x548d5e[_0x548d5e[_0x22a965(0x1dc)]-_0x186367][_0x22a965(0x22d)]['forEach'](_0x5d39c6=>{const _0x539028=_0x22a965;_0x446294+=_0x5d39c6[_0x539028(0x222)]*_0x5d39c6[_0x539028(0x1bc)];}),_0x3aace1[_0x59e2e5][_0x22a965(0x2bd)][_0x22a965(0x241)](_0x2cb973=>{const _0x5d7b3f=_0x22a965;_0x2ac48f+=_0x2cb973[_0x5d7b3f(0x222)]*_0x2cb973[_0x5d7b3f(0x1bc)];}),_0x30873b*=_0x2ac48f/(_0x446294-_0x2ac48f)+0x1;}_0x59e2e5++;}}let _0x5b6251=0x0;_0x20cdcb[_0x22a965(0x22d)][_0x22a965(0x241)](_0x36aca1=>{const _0x3d12a8=_0x22a965;_0x5b6251+=_0x36aca1[_0x3d12a8(0x222)]*_0x36aca1['price'];}),_0x22a1ea[_0x548d5e[_0x22a965(0x1dc)]-_0x186367-0x1]=_0x5b6251*(_0x30873b-0x1);});let _0x37b4eb=[];_0x3aace1=[...config[_0x2810a0(0x2be)]]||[];let _0x5183de=0x0;_0x59e2e5=0x0,_0x548d5e[_0x2810a0(0x241)]((_0x409fe4,_0x290107)=>{const _0x37e43c=_0x2810a0;if(_0x3aace1[_0x59e2e5]){const _0x1afe62=fns[_0x37e43c(0x1bd)](_0x3aace1[_0x59e2e5][_0x37e43c(0x1fd)],_0x37e43c(0x293),new Date()),_0x31e12d=fns['parse'](_0x409fe4[_0x37e43c(0x1fd)],'yyyy/MM/dd',new Date());if(fns[_0x37e43c(0x28f)](_0x1afe62,_0x31e12d)){let _0x23c688=0x0;_0x3aace1[_0x59e2e5][_0x37e43c(0x2bd)][_0x37e43c(0x241)](_0x516b1c=>{const _0x1eb33e=_0x37e43c;!_0x37b4eb[_0x516b1c['coin']]?_0x37b4eb[_0x516b1c[_0x1eb33e(0x1bf)]]=_0x516b1c['number']:(_0x23c688=_0x37b4eb[_0x516b1c[_0x1eb33e(0x1bf)]],_0x37b4eb[_0x516b1c[_0x1eb33e(0x1bf)]]+=_0x516b1c[_0x1eb33e(0x222)]);const _0x41d115=_0x409fe4[_0x1eb33e(0x22d)]['find'](_0x56b3cf=>_0x56b3cf['coin']==_0x516b1c['coin']);(!_0x41d115||_0x41d115[_0x1eb33e(0x222)]==0x0)&&(_0x5183de+=(-_0x516b1c[_0x1eb33e(0x222)]-_0x23c688)*_0x516b1c[_0x1eb33e(0x1bc)]);}),_0x59e2e5++;}}_0x409fe4['coins'][_0x37e43c(0x241)]((_0x14bd1e,_0x1fac2d)=>{const _0x94d0fe=_0x37e43c;_0x37b4eb[_0x14bd1e[_0x94d0fe(0x1bf)]]&&(_0x14bd1e={..._0x14bd1e,'initial':_0x37b4eb[_0x14bd1e[_0x94d0fe(0x1bf)]]}),_0x409fe4['coins'][_0x1fac2d]=_0x14bd1e;}),_0x2e8d8b['push']({'date':_0x409fe4[_0x37e43c(0x1fd)],'eur':_0x409fe4[_0x37e43c(0x26d)],'usd':_0x409fe4['usd'],'offset':_0x22a1ea[_0x290107],'netoffset':_0x5183de,'coins':_0x409fe4[_0x37e43c(0x22d)]});});}return _0x2e8d8b;}function emitPerformance(_0x38f7f5){const _0x287962=_0x5331e1;_0x38f7f5[_0x287962(0x1dc)]!==0x0?(proxyEmit(_0x287962(0x297),_0x38f7f5),lastPerformanceEmitted=getDate()):proxyEmit(_0x287962(0x297),[]);}function getPerf(_0xaf5c83,_0x4d633b){const _0x5fc9eb=_0x5331e1;let _0x111458=0x0,_0x31fec6=0x0,_0x5347af=0x0;_0xaf5c83[_0x5fc9eb(0x22d)][_0x5fc9eb(0x241)](_0x3bdb54=>{const _0xbc7de6=_0x5fc9eb;_0x111458+=_0x3bdb54['number']*_0x3bdb54[_0xbc7de6(0x1bc)];});_0x4d633b&&(_0x111458+=_0xaf5c83[_0x5fc9eb(0x235)]);if(config[_0x5fc9eb(0x24b)]==='BTC'||config[_0x5fc9eb(0x24b)]==='ETH')_0x31fec6=_0x111458*_0xaf5c83[_0x5fc9eb(0x26d)],_0x5347af=_0x111458*_0xaf5c83[_0x5fc9eb(0x26c)];else{if(config[_0x5fc9eb(0x24b)]==='BUSD'||config[_0x5fc9eb(0x24b)]===_0x5fc9eb(0x1cc))_0x31fec6=_0x111458*_0xaf5c83['eur']/_0xaf5c83[_0x5fc9eb(0x26c)],_0x5347af=_0x111458;else config[_0x5fc9eb(0x24b)]==='EUR'&&(_0x31fec6=_0x111458,_0x5347af=_0x111458*_0xaf5c83[_0x5fc9eb(0x26c)]/_0xaf5c83['eur']);}return[_0x111458,_0x31fec6,_0x5347af];}async function getStartingBalances(_0x330937,_0x37e8ad=!![]){const _0x5317d5=_0x5331e1;if(_0x330937[_0x5317d5(0x1dc)]!==0x0){const [_0x496781,_0x2e2abb,_0x5b7092]=getPerf(_0x330937[0x0],!![]);let _0x2dd69a=[];config[_0x5317d5(0x268)][_0x5317d5(0x241)](_0x3c1458=>{const _0x2fee51=_0x5317d5;let _0x27cc92=0x0,_0x267c88;config[_0x2fee51(0x2be)][_0x2fee51(0x241)](_0x1a3c63=>{const _0x13a536=_0x2fee51;let _0x5407a5=_0x1a3c63[_0x13a536(0x2bd)][_0x13a536(0x1f8)](_0x4b04bd=>_0x4b04bd['coin']==_0x3c1458['coin']);if(_0x5407a5){_0x27cc92+=_0x5407a5[_0x13a536(0x222)];if(!_0x267c88)_0x267c88=_0x5407a5[_0x13a536(0x1bc)];}}),_0x2dd69a[_0x2fee51(0x279)]({'coin':_0x3c1458[_0x2fee51(0x1bf)],'number':_0x27cc92,'initialprice':_0x267c88});});const _0x2bce9d={'basecoin':_0x496781,'eur':_0x2e2abb,'usd':_0x5b7092,'coins':_0x2dd69a};if(_0x37e8ad)proxyEmit('starting-balances',_0x2bce9d);return _0x2bce9d;}}function headlessMode(_0x556752){const _0x573ade=_0x5331e1;let _0x31d18e=_0x556752[_0x573ade(0x268)],_0x28ad62=_0x556752[_0x573ade(0x203)],_0x3f4873=[];for(let _0x46b4de of _0x31d18e){if(_0x46b4de[_0x573ade(0x1bf)]!=config[_0x573ade(0x24b)]){if(_0x46b4de[_0x573ade(0x1fc)]>=_0x28ad62/0x64){if(_0x46b4de[_0x573ade(0x264)])_0x3f4873[_0x573ade(0x279)](_0x46b4de);}else{if(_0x46b4de[_0x573ade(0x1fc)]<=-_0x28ad62/0x64){if(_0x46b4de[_0x573ade(0x264)])_0x3f4873['push'](_0x46b4de);}}}}_0x3f4873[_0x573ade(0x1dc)]>0x0&&(allOrdersPlaced=![],placeOrder(_0x3f4873));}function notifyBalance(_0x676a49){const _0x5c6146=_0x5331e1;let _0x54c56f=_0x676a49[_0x5c6146(0x268)],_0x274a28=_0x676a49[_0x5c6146(0x203)],_0x1754ee=[];for(let _0x4955d8 of _0x54c56f){if(_0x4955d8[_0x5c6146(0x1bf)]!=config[_0x5c6146(0x24b)]){if(_0x4955d8[_0x5c6146(0x1fc)]>=_0x274a28/0x64){if(_0x4955d8[_0x5c6146(0x264)])_0x1754ee[_0x5c6146(0x279)](_0x4955d8);}else{if(_0x4955d8[_0x5c6146(0x1fc)]<=-_0x274a28/0x64){if(_0x4955d8[_0x5c6146(0x264)])_0x1754ee['push'](_0x4955d8);}}}}if(_0x1754ee[_0x5c6146(0x1dc)]>0x0){let _0x3af2b7=_0x1754ee[_0x5c6146(0x236)](_0x591eae=>_0x591eae['coin']);_0x3af2b7['sort']();let _0x2025e1=_0x3af2b7[_0x5c6146(0x2c6)](',\x20');if(lastCoinsToBalance!==_0x2025e1)logHistory(_0x5c6146(0x2dc),'Manual\x20balancing\x20required:\x20'+_0x2025e1);lastCoinsToBalance=_0x2025e1;}}function symbolToCoin(_0xc1904d){const _0x274652=_0x5331e1;let _0xd8cec;if(_0xc1904d[_0x274652(0x1fa)]('/'+config[_0x274652(0x24b)]))_0xd8cec=_0xc1904d['replace']('/'+config[_0x274652(0x24b)],'');if(_0xc1904d[_0x274652(0x1fa)](config[_0x274652(0x24b)]+'/'))_0xd8cec=_0xc1904d[_0x274652(0x2ad)](config[_0x274652(0x24b)]+'/','');return _0xd8cec;}async function unlockOrders(){const _0x2e561b=_0x5331e1;currentCoins=await getCoins(),validateOrdersState=_0x2e561b(0x281);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);lockOrders=![];}async function validateOrders(_0x277d93){const _0x42f955=_0x5331e1;if(_0x277d93)validateOrdersState=_0x277d93;let _0x122e6a=[],_0x429cbe=config['ordertype']==_0x42f955(0x1d7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x42f955(0x2ea)]*0x3c*0x3e8/validateOrderInterval;if(!lockOrders)return;lastOrders[_0x42f955(0x241)](_0x379c4e=>{const _0x110cb6=_0x42f955;let _0x28c815=![];_0x379c4e['filled']>0x0&&(_0x28c815=!![]),_0x122e6a[_0x110cb6(0x279)](_0x28c815),_0x28c815&&config[_0x110cb6(0x237)]!=_0x110cb6(0x1d7)&&logHistory(_0x110cb6(0x2e5),_0x110cb6(0x207)+_0x379c4e[_0x110cb6(0x2da)]+'\x20'+_0x379c4e[_0x110cb6(0x261)]+'\x20#'+formatResult(_0x379c4e[_0x110cb6(0x1e2)],0x8)+'\x20@'+formatResult(_0x379c4e['price'],0x8));}),_0x122e6a['forEach']((_0x2f2fab,_0x5d4e57)=>{if(_0x2f2fab)lastOrders['splice'](_0x5d4e57,0x1);});const _0x28423a=coolingDown?_0x42f955(0x2ba):_0x42f955(0x296);if(validateOrdersState==_0x42f955(0x281))validateOrdersState=_0x42f955(0x1cf),_0x122e6a[_0x42f955(0x1fa)](![])?config['ordertype']==_0x42f955(0x1d7)?logHistory(_0x42f955(0x2eb),_0x42f955(0x249)):logHistory(_0x42f955(0x2eb),_0x42f955(0x27e)):await unlockOrders();else{if(validateOrdersState==_0x42f955(0x1cf)){if(_0x122e6a['includes'](![])){}else config[_0x42f955(0x237)]==_0x42f955(0x1d7)?logHistory(_0x42f955(0x2dc),_0x42f955(0x2bf)+_0x28423a):logHistory('success',_0x42f955(0x2d8)+_0x28423a),await unlockOrders();}else{if(validateOrdersState==_0x42f955(0x2d3))_0x122e6a[_0x42f955(0x1fa)](![])?config[_0x42f955(0x237)]==_0x42f955(0x1d7)?logHistory(_0x42f955(0x2dc),_0x42f955(0x2c1)+Math[_0x42f955(0x299)](_0x429cbe*validateOrderInterval/0xea60)+_0x42f955(0x263)+_0x28423a):(await cancelOrders(),logHistory(_0x42f955(0x2dc),_0x42f955(0x248)+Math[_0x42f955(0x299)](_0x429cbe*validateOrderInterval/0xea60)+_0x42f955(0x263)+_0x28423a)):logHistory(_0x42f955(0x2dc),_0x42f955(0x234)+_0x28423a),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config['ordertype']!='market')logHistory('success',_0x42f955(0x234)+_0x28423a);await unlockOrders();}}}}}async function cancelOrders(){const _0x38b4ff=_0x5331e1;lastOrders[_0x38b4ff(0x241)](async _0x57b9c9=>{const _0x133575=_0x38b4ff;try{const _0x5876f2=await exchange[_0x133575(0x228)](_0x57b9c9[_0x133575(0x265)],_0x57b9c9[_0x133575(0x2da)]);}catch(_0x3f5a5c){if(_0x3f5a5c[_0x133575(0x2c8)]()[_0x133575(0x1fa)](_0x133575(0x2d2))){}else await handleError(_0x3f5a5c,_0x133575(0x22f));}});}async function initCoinResults(){const _0xb1aaef=_0x5331e1;let _0x13ea0b=[];config[_0xb1aaef(0x268)][_0xb1aaef(0x241)](_0x14762d=>{const _0x287c66=_0xb1aaef;if(!_0x14762d[_0x287c66(0x2a2)]&&_0x14762d[_0x287c66(0x1bf)]!=config[_0x287c66(0x24b)]){let _0x3f4ee3=dbCoinResults[_0x287c66(0x272)](_0x287c66(0x22d))[_0x287c66(0x1f8)]({'coin':_0x14762d[_0x287c66(0x1bf)]})['value']();if(!_0x3f4ee3){const _0x1aac2a=currentCoins[_0x287c66(0x1f8)](_0x53ee27=>_0x53ee27[_0x287c66(0x1bf)]==_0x14762d[_0x287c66(0x1bf)]),_0x1fe0dd=global[_0x287c66(0x2e7)][noslash(_0x14762d[_0x287c66(0x2da)])];let _0x623de1=_0x1aac2a?_0x1aac2a['number']:null,_0x4efc4f=_0x14762d['reverse']?0x1/_0x1fe0dd:_0x1fe0dd,_0x2c31ae;config[_0x287c66(0x2be)][_0x287c66(0x241)](_0x52531b=>{const _0x560166=_0x287c66;!_0x2c31ae&&(_0x2c31ae=_0x52531b[_0x560166(0x2bd)][_0x560166(0x1f8)](_0x1b5ae8=>_0x1b5ae8[_0x560166(0x1bf)]==_0x14762d[_0x560166(0x1bf)]),_0x2c31ae&&(_0x623de1=_0x2c31ae[_0x560166(0x222)],_0x4efc4f=_0x2c31ae[_0x560166(0x1bc)]));}),_0x13ea0b[_0x287c66(0x279)]({'coin':_0x14762d['coin'],'number':_0x623de1,'price':_0x4efc4f});}}}),_0x13ea0b[_0xb1aaef(0x241)](_0x4f5ec1=>{const _0x8c2e1f=_0xb1aaef,_0x413aad={'coin':_0x4f5ec1[_0x8c2e1f(0x1bf)],'number':_0x4f5ec1['number'],'breakeven':_0x4f5ec1['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x8c2e1f(0x272)]('coins')['push'](_0x413aad)[_0x8c2e1f(0x2d0)]();});}async function updateCoinResults(_0x2bc63f,_0x1df1c7=![]){const _0x5bf231=_0x5331e1;let _0x5c4f64,_0x4a4278,_0x2f29ac,_0x3eaa9a,_0x35c439,_0x29ed58,_0x26e593=dbCoinResults[_0x5bf231(0x272)](_0x5bf231(0x22d))[_0x5bf231(0x1f8)]({'coin':_0x2bc63f[_0x5bf231(0x1bf)]})['value']();!_0x26e593&&await initCoinResults();_0x2bc63f['reverse']&&(_0x29ed58={'filled':_0x2bc63f['filled']*_0x2bc63f['price'],'amount':_0x2bc63f[_0x5bf231(0x1e2)]*_0x2bc63f['price'],'side':_0x2bc63f[_0x5bf231(0x261)]==_0x5bf231(0x1be)?_0x5bf231(0x200):_0x5bf231(0x1be),'price':0x1/_0x2bc63f['price']},_0x2bc63f={..._0x2bc63f,..._0x29ed58});if(_0x1df1c7)_0x4a4278=_0x2bc63f[_0x5bf231(0x261)]==_0x5bf231(0x200)?_0x26e593[_0x5bf231(0x222)]+_0x2bc63f[_0x5bf231(0x1e2)]:_0x26e593[_0x5bf231(0x222)]-_0x2bc63f[_0x5bf231(0x1e2)];else{const _0x369f79=currentCoins[_0x5bf231(0x1f8)](_0x79a519=>_0x79a519[_0x5bf231(0x1bf)]==_0x2bc63f['coin']);_0x4a4278=_0x369f79[_0x5bf231(0x222)];}if(_0x2bc63f[_0x5bf231(0x290)]&&_0x2bc63f[_0x5bf231(0x290)][_0x5bf231(0x23e)]==config[_0x5bf231(0x24b)])_0x5c4f64=_0x2bc63f[_0x5bf231(0x290)][_0x5bf231(0x1ff)];else{if(_0x2bc63f[_0x5bf231(0x290)]&&_0x2bc63f[_0x5bf231(0x290)][_0x5bf231(0x23e)]==_0x5bf231(0x1d5)&&!_0x1df1c7)_0x5c4f64=_0x2bc63f['fee'][_0x5bf231(0x1ff)]*global[_0x5bf231(0x2e7)]['BNB'+config[_0x5bf231(0x24b)]];else _0x5c4f64=defaultFee*_0x2bc63f[_0x5bf231(0x1e2)]*_0x2bc63f['price'];}_0x2bc63f[_0x5bf231(0x261)]==_0x5bf231(0x200)?(_0x2f29ac=_0x4a4278!=0x0?(_0x26e593[_0x5bf231(0x2f0)]*_0x26e593[_0x5bf231(0x222)]+_0x2bc63f[_0x5bf231(0x1bc)]*(_0x4a4278-_0x26e593[_0x5bf231(0x222)])+_0x5c4f64)/_0x4a4278:0x0,_0x3eaa9a=_0x26e593[_0x5bf231(0x258)]):(_0x2f29ac=_0x4a4278!=0x0?(_0x26e593['breakeven']*_0x26e593[_0x5bf231(0x222)]-_0x2bc63f[_0x5bf231(0x1bc)]*(_0x26e593[_0x5bf231(0x222)]-_0x4a4278)+_0x5c4f64)/_0x4a4278:0x0,_0x3eaa9a=_0x26e593[_0x5bf231(0x258)]+(_0x2bc63f[_0x5bf231(0x1bc)]-_0x26e593[_0x5bf231(0x2f0)])*_0x2bc63f['filled']);_0x35c439=(_0x2bc63f['price']-_0x2f29ac-_0x5c4f64/_0x2bc63f[_0x5bf231(0x1e2)])*_0x4a4278;let _0x490d3b={'coin':_0x2bc63f[_0x5bf231(0x1bf)],'number':_0x4a4278,'breakeven':formatResult(_0x2f29ac,0x8),'realized':formatResult(_0x3eaa9a,0x8),'unrealized':formatResult(_0x35c439,0x8),'fees':formatResult(_0x26e593[_0x5bf231(0x246)]+_0x5c4f64,0x8),'sells':_0x2bc63f[_0x5bf231(0x261)]==_0x5bf231(0x1be)?_0x26e593[_0x5bf231(0x2b9)]+0x1:_0x26e593[_0x5bf231(0x2b9)],'buys':_0x2bc63f[_0x5bf231(0x261)]==_0x5bf231(0x200)?_0x26e593[_0x5bf231(0x2b7)]+0x1:_0x26e593[_0x5bf231(0x2b7)]};dbCoinResults[_0x5bf231(0x272)](_0x5bf231(0x22d))['find']({'coin':_0x2bc63f[_0x5bf231(0x1bf)]})[_0x5bf231(0x274)](_0x490d3b)[_0x5bf231(0x2d0)]();if(!_0x1df1c7){if(_0x2bc63f[_0x5bf231(0x290)]&&_0x2bc63f[_0x5bf231(0x290)][_0x5bf231(0x23e)]==_0x5bf231(0x1d5)){const _0x30028d=currentCoins[_0x5bf231(0x1f8)](_0x4978ca=>_0x4978ca[_0x5bf231(0x1bf)]=='BNB');if(_0x30028d){let _0x6c1843=dbCoinResults[_0x5bf231(0x272)](_0x5bf231(0x22d))[_0x5bf231(0x1f8)]({'coin':_0x5bf231(0x1d5)})['value']();_0x490d3b={..._0x6c1843,'number':_0x30028d[_0x5bf231(0x222)]},dbCoinResults['get'](_0x5bf231(0x22d))[_0x5bf231(0x1f8)]({'coin':_0x5bf231(0x1d5)})['assign'](_0x490d3b)[_0x5bf231(0x2d0)]();}}}}async function placeOrder(_0x38638c){const _0x3210d7=_0x5331e1,_0x1521ad=config[_0x3210d7(0x237)]==_0x3210d7(0x1d7)?_0x3210d7(0x1d7):_0x3210d7(0x2b4);if(!lockOrders&&!coolingDown){lastOrders=[];for(const _0x9aa0a4 of _0x38638c){let _0x61ecd2,_0x960bdd,_0x2fd574,_0x18fe23,_0xc77d7b,_0x5c5d18=_0x9aa0a4['symbol'];try{const _0x253126=await exchange[_0x3210d7(0x24d)]([_0x5c5d18]),_0x438117=_0x253126[_0x5c5d18];_0x61ecd2=_0x9aa0a4[_0x3210d7(0x27b)]?0x1/_0x9aa0a4['last']:_0x9aa0a4['last'],_0x960bdd=_0x438117[_0x3210d7(0x21b)],_0x2fd574=_0x438117[_0x3210d7(0x1f0)];_0x9aa0a4[_0x3210d7(0x27b)]?(_0x18fe23=_0x9aa0a4['side']=='buy'?_0x3210d7(0x1be):_0x3210d7(0x200),_0xc77d7b=Math['abs'](_0x9aa0a4[_0x3210d7(0x1f2)])/_0x61ecd2):(_0x18fe23=_0x9aa0a4['side'],_0xc77d7b=Math[_0x3210d7(0x23f)](_0x9aa0a4['trade']));_0x1521ad=='limit'&&(config[_0x3210d7(0x237)]==_0x3210d7(0x1b6)&&(_0x61ecd2=_0x18fe23==_0x3210d7(0x200)?_0x960bdd:_0x2fd574),config[_0x3210d7(0x237)]=='limit-low'&&(_0x61ecd2=_0x18fe23=='buy'?_0x2fd574:_0x960bdd));_0xc77d7b=formatResult(_0xc77d7b,0x8),_0x61ecd2=formatResult(_0x61ecd2,0x8);const _0x45a794=await exchange[_0x3210d7(0x262)](_0x5c5d18,_0x1521ad,_0x18fe23,_0xc77d7b,_0x61ecd2);lastOrders[_0x3210d7(0x279)]({'orderId':_0x45a794['id'],'symbol':_0x5c5d18,'coin':_0x9aa0a4[_0x3210d7(0x1bf)],'side':_0x18fe23,'reverse':_0x9aa0a4['reverse'],'amount':_0x45a794['amount'],'filled':0x0,'price':_0x45a794[_0x3210d7(0x1bc)],'fee':_0x45a794[_0x3210d7(0x290)]});const _0x2eb5a6=_0x18fe23=='sell'?config['emojisell']?String[_0x3210d7(0x267)]('0x'+config[_0x3210d7(0x233)])+'\x20':'':config[_0x3210d7(0x242)]?String['fromCodePoint']('0x'+config[_0x3210d7(0x242)])+'\x20':'',_0x47c336=_0x1521ad==_0x3210d7(0x1d7)?_0x3210d7(0x285):config[_0x3210d7(0x237)]==_0x3210d7(0x1b6)?_0x3210d7(0x2ab):_0x3210d7(0x2c2);if(_0x1521ad==_0x3210d7(0x1d7))logHistory(_0x3210d7(0x2e5),''+_0x2eb5a6+_0x47c336+_0x3210d7(0x24e)+_0x5c5d18+'\x20'+_0x18fe23+'\x20#'+formatResult(_0x45a794[_0x3210d7(0x1e2)],0x8)+'\x20@'+formatResult(_0x45a794['price'],0x8));else logHistory(_0x3210d7(0x2e5),''+_0x2eb5a6+_0x47c336+'\x20order:\x20'+_0x5c5d18+'\x20'+_0x18fe23+'\x20#'+formatResult(_0x45a794[_0x3210d7(0x1cd)],0x8)+'\x20@'+formatResult(_0x45a794[_0x3210d7(0x1bc)],0x8));let _0x5c9bf6=currentCoins[_0x3210d7(0x1f8)](_0x2ffa1e=>_0x2ffa1e[_0x3210d7(0x1bf)]==_0x9aa0a4[_0x3210d7(0x1bf)]);_0x5c9bf6[_0x3210d7(0x2e5)]=!![];if(config['cooldown']!=0x0){let _0x1fb71b=null;if(cooldownTracker[_0x3210d7(0x1dc)]==config[_0x3210d7(0x1de)]-0x1)_0x1fb71b=cooldownTracker[_0x3210d7(0x229)]();const _0x53c0c2=getTimeStamp();cooldownTracker['push'](_0x53c0c2);if(_0x1fb71b){const _0x16d057=fns[_0x3210d7(0x28c)](new Date(_0x53c0c2),new Date(_0x1fb71b));if(_0x16d057<cooldownInterval){logHistory(_0x3210d7(0x2eb),_0x3210d7(0x257)+config['cooldown']+_0x3210d7(0x256)+cooldownInterval/0x3c+_0x3210d7(0x23d)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x4987a4){if(_0x4987a4['toString']()['includes'](_0x3210d7(0x220)))logHistory(_0x3210d7(0x2eb),_0x3210d7(0x1bb)+_0x5c5d18);else{if(_0x4987a4['toString']()['includes'](_0x3210d7(0x2a1)))logHistory(_0x3210d7(0x2eb),_0x3210d7(0x2cc)+_0x5c5d18);else await handleError(_0x4987a4,_0x3210d7(0x213),_0x5c5d18);}}}allOrdersPlaced=!![];if(lastOrders[_0x3210d7(0x1dc)]!=0x0){lockOrders=!![],validateOrdersState=_0x3210d7(0x281),setTimeout(function(){validateOrders();},0x1388);const _0xe0a625=config[_0x3210d7(0x237)]==_0x3210d7(0x1d7)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x40ecf0=_0x3210d7;validateOrders(_0x40ecf0(0x2d3));},_0xe0a625);}coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3210d7(0x1ba)));}else{if(coolingDown)!config[_0x3210d7(0x27f)]&&logHistory(_0x3210d7(0x2eb),_0x3210d7(0x2b6));else lockOrders&&(!config[_0x3210d7(0x27f)]&&(config[_0x3210d7(0x237)]==_0x3210d7(0x1d7)?logHistory(_0x3210d7(0x2eb),_0x3210d7(0x25e)):logHistory(_0x3210d7(0x2eb),_0x3210d7(0x255))));}}function restoreOrders(){const _0x3c8e5d=_0x5331e1;let _0x5a788c;lockOrders=!![],validateOrdersState='ongoing',currentCoins[_0x3c8e5d(0x241)](_0x53d746=>{const _0x5aeb1c=_0x3c8e5d,_0x2ab1bb=allOpenOrders[_0x5aeb1c(0x1f8)](_0x1e5e06=>_0x1e5e06[_0x5aeb1c(0x2da)]==_0x53d746['symbol']);_0x2ab1bb&&(lastOrders[_0x5aeb1c(0x279)]({'orderId':_0x2ab1bb['id'],'symbol':_0x53d746[_0x5aeb1c(0x2da)],'coin':_0x53d746['coin'],'side':_0x2ab1bb[_0x5aeb1c(0x261)],'reverse':_0x53d746[_0x5aeb1c(0x27b)],'amount':_0x2ab1bb[_0x5aeb1c(0x1cd)],'filled':0x0,'price':_0x2ab1bb[_0x5aeb1c(0x1bc)],'fee':_0x2ab1bb[_0x5aeb1c(0x290)]}),_0x53d746[_0x5aeb1c(0x2e5)]=!![],_0x5a788c=_0x2ab1bb[_0x5aeb1c(0x254)]);});const _0xf4a472=new Date()[_0x3c8e5d(0x1db)](),_0x2016ff=config['ordertype']==_0x3c8e5d(0x1d7)?validateOrderTimeout*0x3c*0x3e8:config[_0x3c8e5d(0x2ea)]*0x3c*0x3e8;if(_0x5a788c+_0x2016ff>_0xf4a472){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5a788c+_0x2016ff-_0xf4a472);}else validateOrders(_0x3c8e5d(0x2d3));}function sendPortfolioTelegram(){const _0x1cda9a=_0x5331e1,_0x4c6abb=[_0x1cda9a(0x2a5),_0x1cda9a(0x1ee),'USDT'],_0x1088ed=_0x4c6abb[_0x1cda9a(0x1fa)](config['basecoin'])?0x2:0x8;let _0x346abd='';if(config[_0x1cda9a(0x1b1)])_0x346abd=config['botname']+'\x20portfolio:\x20\x0a\x0a';else _0x346abd='Bot\x20'+botID+_0x1cda9a(0x2c3);_0x346abd+=_0x1cda9a(0x22e),_0x346abd+=_0x1cda9a(0x1ec),_0x346abd+=_0x1cda9a(0x2dd),currentCoins[_0x1cda9a(0x241)](_0xaf677c=>{const _0x5a0f72=_0x1cda9a;_0x346abd+=_0xaf677c['coin'][_0x5a0f72(0x24f)](0x7)+'|\x20'+formatPad(_0xaf677c['distribution'],0x2,0x6)+'|\x20'+formatPad(_0xaf677c[_0x5a0f72(0x1d1)],0x2,0x6)+'|\x20'+formatPad(_0xaf677c['delta']*0x64,0x2,0x6)+'\x0a';}),_0x346abd+='</pre>',process['send']({'telegrammsg':_0x346abd},_0x5f2993=>{});}function formatPad(_0xe155f4,_0x52c61b,_0x99f262){const _0xadf4b6=_0x5331e1,_0x2918aa=formatResultString(_0xe155f4,_0x52c61b);return _0x2918aa?_0x2918aa['padStart'](_0x99f262):''[_0xadf4b6(0x21d)](_0x99f262);}function logHistory(_0x1af312,_0x5f44b2,_0x835565=''){const _0x25b14a=_0x5331e1;let _0x1021c8={'time':getTimeStamp(),'type':_0x1af312,'event':_0x5f44b2};dbLogs[_0x25b14a(0x272)](_0x25b14a(0x1fb))[_0x25b14a(0x279)](_0x1021c8)['write']();if(_0x835565=='')_0x835565=_0x5f44b2;proxyEmit(_0x25b14a(0x1e1),{'log':_0x1021c8,'summary':_0x835565}),process[_0x25b14a(0x2ec)]({'telegram':{..._0x1021c8,'botname':config[_0x25b14a(0x2ef)],'showname':config[_0x25b14a(0x1b1)]}},_0x1e6c77=>{}),logging(''+_0x1021c8[_0x25b14a(0x1e1)]);}function emitHistory(_0x137ce3={}){const _0x1cf793=_0x5331e1;Object[_0x1cf793(0x2ac)](_0x137ce3)[_0x1cf793(0x1dc)]==0x0&&(_0x137ce3={'type':['order',_0x1cf793(0x1e1)],'event':'','page':0x1});if(_0x137ce3[_0x1cf793(0x23b)][_0x1cf793(0x1fa)](_0x1cf793(0x1e1)))_0x137ce3['type'][_0x1cf793(0x2d9)](_0x137ce3[_0x1cf793(0x23b)]['indexOf'](_0x1cf793(0x1e1)),0x1,_0x1cf793(0x2eb),_0x1cf793(0x2dc));if(dbLogs[_0x1cf793(0x2a3)](_0x1cf793(0x1fb))['value']()){let _0xb6bf64=dbLogs['get']('logs')[_0x1cf793(0x2e6)](_0x2efa92=>{const _0x5c8ba9=_0x1cf793;if(_0x137ce3[_0x5c8ba9(0x23b)]['length']==0x0)return![];else return _0x137ce3[_0x5c8ba9(0x23b)][_0x5c8ba9(0x1fa)](_0x2efa92[_0x5c8ba9(0x23b)]);})[_0x1cf793(0x2e6)](_0x307ad7=>{const _0x387b69=_0x1cf793;if(_0x137ce3[_0x387b69(0x1e1)]=='')return!![];else return _0x307ad7[_0x387b69(0x1e1)][_0x387b69(0x1b5)]()[_0x387b69(0x1fa)](_0x137ce3[_0x387b69(0x1e1)][_0x387b69(0x1b5)]());})[_0x1cf793(0x1dd)](_0x1cf793(0x289)),_0x166f34=_0xb6bf64[_0x1cf793(0x275)]()[_0x1cf793(0x1dc)];_0xb6bf64=_0xb6bf64['reverse']()[_0x1cf793(0x1da)]((_0x137ce3[_0x1cf793(0x1b9)]-0x1)*logPageSize,_0x137ce3[_0x1cf793(0x1b9)]*logPageSize-0x1)[_0x1cf793(0x27b)]()['value'](),proxyEmit('event-history',{'logs':_0xb6bf64,'total':_0x166f34});}else proxyEmit(_0x1cf793(0x208),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1b022f){const _0x2b4a3e=_0x5331e1;if(dbLogs[_0x2b4a3e(0x2a3)](_0x2b4a3e(0x1fb))[_0x2b4a3e(0x275)]()){const _0x3c2565=dbLogs['get']('logs')[_0x2b4a3e(0x1dd)](_0x2b4a3e(0x289))['filter'](_0x2b39ee=>{return _0x2b39ee['type']=='order';})['value']();dbLogs[_0x2b4a3e(0x272)](_0x2b4a3e(0x1fb))['remove']()[_0x2b4a3e(0x2d0)](),dbLogs[_0x2b4a3e(0x272)](_0x2b4a3e(0x1fb))[_0x2b4a3e(0x274)](_0x3c2565)['write'](),emitHistory(_0x1b022f);}}async function pauseBot(_0x4cc6e0=''){const _0xc4af14=_0x5331e1,_0x51f6a5=new Date()[_0xc4af14(0x1db)]();if(!lastBotPause)lastBotPause=new Date()[_0xc4af14(0x1db)](),consecutivePauses=0x1;else{if(_0x51f6a5-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x2)process['send']({'stop':_0xc4af14(0x243)},_0x1939b1=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0xc4af14(0x1db)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws();if(_0x4cc6e0)_0x4cc6e0+=_0xc4af14(0x214);logHistory(_0xc4af14(0x2eb),_0x4cc6e0+_0xc4af14(0x292)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset();}}async function killBot(){const _0x5af131=_0x5331e1;process[_0x5af131(0x2ec)]({'stop':'kill'},_0x14c230=>{}),await sleep(0x7d0);}async function handleError(_0x4ba071,_0x4e695e,_0x92aa30=''){const _0x4b685c=_0x5331e1;if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)]('DDoSProtection'))await pauseBot(_0x4b685c(0x1d0));else{if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)](_0x4b685c(0x1f4)))await pauseBot(_0x4b685c(0x29d));else{if(_0x4ba071[_0x4b685c(0x2c8)]()['includes'](_0x4b685c(0x232)))await pauseBot(_0x4b685c(0x27d));else{if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)](_0x4b685c(0x1ca)))logHistory('error',_0x4e695e+'\x20|\x20Binance\x20API\x20key\x20invalid'),logHistory(_0x4b685c(0x2eb),_0x4b685c(0x29b)),await killBot();else{if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)](_0x4b685c(0x26a)))logHistory(_0x4b685c(0x2eb),_0x4e695e+_0x4b685c(0x2a7)),logHistory(_0x4b685c(0x2eb),_0x4b685c(0x29b)),await killBot();else{if(_0x4ba071[_0x4b685c(0x2c8)]()['includes'](_0x4b685c(0x260)))logHistory(_0x4b685c(0x2eb),_0x4e695e+'\x20|\x20Binance\x20API\x20secret\x20invalid'),logHistory(_0x4b685c(0x2eb),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)](_0x4b685c(0x21f)))logHistory(_0x4b685c(0x2eb),_0x4e695e+_0x4b685c(0x282)),logHistory(_0x4b685c(0x2eb),_0x4b685c(0x29b)),await killBot();else{if(_0x4ba071[_0x4b685c(0x2c8)]()[_0x4b685c(0x1fa)](_0x4b685c(0x298)))await pauseBot(_0x4b685c(0x225)),process[_0x4b685c(0x2ec)]({'stop':_0x4b685c(0x243)},_0x145ff6=>{});else _0x4ba071['toString']()['includes'](_0x4b685c(0x25f))?logHistory(_0x4b685c(0x2eb),_0x4e695e+_0x4b685c(0x1c7)+_0x92aa30):(logging(_0x4e695e+_0x4b685c(0x1ea),_0x4ba071),await pauseBot(_0x4b685c(0x240)));}}}}}}}}function formatResult(_0x415352,_0x41bc69){const _0x197074=_0x5331e1;return parseFloat(_0x415352[_0x197074(0x1e8)](_0x41bc69));}function formatResultTruncate(_0xf445d4,_0x5e5247){const _0x17e500=_0x5331e1;let _0x40d57f=formatResultString(_0xf445d4,0xa),_0x2bd9f6=_0x40d57f[_0x17e500(0x2e1)]('.');return _0x2bd9f6!=-0x1&&(_0x40d57f=_0x40d57f[_0x17e500(0x1da)](0x0,_0x2bd9f6+_0x5e5247+0x1)),Number(_0x40d57f);}function formatResultString(_0x679480,_0x238d22){const _0x2074df=_0x5331e1;let _0x47e76e;if(!(''+_0x679480)[_0x2074df(0x1fa)]('e'))_0x47e76e=+(Math['round'](_0x679480+'e+'+_0x238d22)+'e-'+_0x238d22);else{let _0x3525bd=(''+_0x679480)[_0x2074df(0x29e)]('e'),_0x2bdd0d='';+_0x3525bd[0x1]+_0x238d22>0x0&&(_0x2bdd0d='+'),_0x47e76e=+(Math[_0x2074df(0x299)](+_0x3525bd[0x0]+'e'+_0x2bdd0d+(+_0x3525bd[0x1]+_0x238d22))+'e-'+_0x238d22);}return Number(_0x47e76e)[_0x2074df(0x1e8)](_0x238d22);}function logging(_0x113adb,_0x352deb=''){const _0x41b6ad=_0x5331e1;if(config[_0x41b6ad(0x1b1)])console[_0x41b6ad(0x202)](getTimeStamp()+':\x20'+config[_0x41b6ad(0x2ef)]+_0x41b6ad(0x219)+_0x113adb,_0x352deb);else console[_0x41b6ad(0x202)](getTimeStamp()+_0x41b6ad(0x278)+botID+_0x41b6ad(0x219)+_0x113adb,_0x352deb);}function getServerTime(){const _0x598787=_0x5331e1,_0x16d6fa=new Date();return _0x16d6fa[_0x598787(0x2ed)]()+'/'+(_0x16d6fa[_0x598787(0x223)]()+0x1)[_0x598787(0x2c8)]()[_0x598787(0x21d)](0x2,'0')+'/'+_0x16d6fa['getDate']()[_0x598787(0x2c8)]()[_0x598787(0x21d)](0x2,'0')+'\x20'+_0x16d6fa[_0x598787(0x2bb)]()[_0x598787(0x2c8)]()[_0x598787(0x21d)](0x2,'0')+':'+_0x16d6fa['getMinutes']()[_0x598787(0x2c8)]()[_0x598787(0x21d)](0x2,'0')+':'+_0x16d6fa['getSeconds']()['toString']()[_0x598787(0x21d)](0x2,'0');}function getTimeStamp(){const _0x33db3f=_0x5331e1,_0x3ae21f=shiftedTime();return _0x3ae21f[_0x33db3f(0x2ed)]()+'/'+(_0x3ae21f[_0x33db3f(0x223)]()+0x1)[_0x33db3f(0x2c8)]()[_0x33db3f(0x21d)](0x2,'0')+'/'+_0x3ae21f[_0x33db3f(0x212)]()[_0x33db3f(0x2c8)]()['padStart'](0x2,'0')+'\x20'+_0x3ae21f[_0x33db3f(0x2bb)]()[_0x33db3f(0x2c8)]()['padStart'](0x2,'0')+':'+_0x3ae21f['getMinutes']()[_0x33db3f(0x2c8)]()['padStart'](0x2,'0')+':'+_0x3ae21f[_0x33db3f(0x2c9)]()[_0x33db3f(0x2c8)]()[_0x33db3f(0x21d)](0x2,'0');}function getDate(){const _0x19a0c8=_0x5331e1,_0x2cf3e7=shiftedTime();return _0x2cf3e7[_0x19a0c8(0x2ed)]()+'/'+(_0x2cf3e7['getMonth']()+0x1)[_0x19a0c8(0x2c8)]()[_0x19a0c8(0x21d)](0x2,'0')+'/'+_0x2cf3e7[_0x19a0c8(0x212)]()[_0x19a0c8(0x2c8)]()[_0x19a0c8(0x21d)](0x2,'0');}function getHour(){const _0x15eec4=_0x5331e1,_0x2b9573=shiftedTime();return _0x2b9573[_0x15eec4(0x2bb)]()[_0x15eec4(0x2c8)]()['padStart'](0x2,'0');}function sleep(_0x6bc2ee){return new Promise(_0x504074=>setTimeout(_0x504074,_0x6bc2ee));}function shiftedTime(){const _0xc8f5e4=_0x5331e1,_0x452daa=new Date();let _0x5ce8c7=_0x452daa;if(config&&config[_0xc8f5e4(0x250)]!==0x0)_0x5ce8c7=fns[_0xc8f5e4(0x286)](_0x452daa,{'hours':config['timeshift']});return _0x5ce8c7;}