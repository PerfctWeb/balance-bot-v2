const _0x2e3eb5=_0x4eda;(function(_0x827847,_0x35c3fd){const _0x5abfca=_0x4eda,_0x2fa5a9=_0x827847();while(!![]){try{const _0x87e130=-parseInt(_0x5abfca(0x2d7))/0x1+-parseInt(_0x5abfca(0x204))/0x2*(parseInt(_0x5abfca(0x2a2))/0x3)+parseInt(_0x5abfca(0x2fb))/0x4*(parseInt(_0x5abfca(0x267))/0x5)+parseInt(_0x5abfca(0x2cc))/0x6*(parseInt(_0x5abfca(0x2b7))/0x7)+parseInt(_0x5abfca(0x2b3))/0x8+-parseInt(_0x5abfca(0x259))/0x9*(parseInt(_0x5abfca(0x26e))/0xa)+-parseInt(_0x5abfca(0x209))/0xb;if(_0x87e130===_0x35c3fd)break;else _0x2fa5a9['push'](_0x2fa5a9['shift']());}catch(_0x48e941){_0x2fa5a9['push'](_0x2fa5a9['shift']());}}}(_0x4c77,0x7ed3a));const _0x177a4b=function(){let _0x5e89c6=!![];return function(_0xf994c6,_0x5426ba){const _0x285236=_0x5e89c6?function(){const _0x334a6d=_0x4eda;if(_0x5426ba){const _0x33f960=_0x5426ba[_0x334a6d(0x1fa)](_0xf994c6,arguments);return _0x5426ba=null,_0x33f960;}}:function(){};return _0x5e89c6=![],_0x285236;};}(),_0x2a0b51=_0x177a4b(this,function(){const _0x4e084e=_0x4eda;return _0x2a0b51[_0x4e084e(0x2f8)]()[_0x4e084e(0x2c2)](_0x4e084e(0x273))['toString']()[_0x4e084e(0x2e7)](_0x2a0b51)['search'](_0x4e084e(0x273));});_0x2a0b51();'use strict';const ccxt=require(_0x2e3eb5(0x2eb)),low=require(_0x2e3eb5(0x23f)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x2e3eb5(0x2b5)),{WebsocketClient,DefaultLogger}=require(_0x2e3eb5(0x27b)),Crypt=require(_0x2e3eb5(0x2ac))[_0x2e3eb5(0x21d)];let exchange,wsClient;global[_0x2e3eb5(0x2cf)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x2e3eb5(0x286))[_0x2e3eb5(0x28d)],botID=process[_0x2e3eb5(0x1ff)][0x2]||_0x2e3eb5(0x294),pattern=/^[0-9]{3}$/;if(!pattern[_0x2e3eb5(0x27d)](botID))return console[_0x2e3eb5(0x28e)](_0x2e3eb5(0x288)+botID+_0x2e3eb5(0x274)),process[_0x2e3eb5(0x26f)](0x1);const userID=process[_0x2e3eb5(0x1ff)][0x3]||'',configpath=userID?_0x2e3eb5(0x266)+userID+'/':_0x2e3eb5(0x266);!fs[_0x2e3eb5(0x296)](configpath)&&fs[_0x2e3eb5(0x254)](configpath);const configfile=configpath+'bot-'+botID+_0x2e3eb5(0x2b4),logfile=configpath+_0x2e3eb5(0x251)+botID+'-events.json',performancefile=configpath+_0x2e3eb5(0x251)+botID+_0x2e3eb5(0x2cd),coinresultsfile=configpath+_0x2e3eb5(0x251)+botID+'-results.json',settingsfile=configpath+_0x2e3eb5(0x29c),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x2e3eb5(0x2a6)]({'logs':[]})[_0x2e3eb5(0x2b9)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x2e3eb5(0x2a6)]({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x2e3eb5(0x2a6)]({'bot':[]})[_0x2e3eb5(0x2b9)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x2e3eb5(0x2f9),'symbol':_0x2e3eb5(0x1f4)},'usd':{'coin':_0x2e3eb5(0x23e),'symbol':_0x2e3eb5(0x27f)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x494943)=>{},'debug':(..._0x492d5b)=>{},'notice':(..._0x5d1c7d)=>{},'info':(..._0x5dbfe1)=>{},'warning':(..._0x504d61)=>{},'error':async function(..._0x31a955){const _0x5084c2=_0x2e3eb5,_0x4da364=new Date()[_0x5084c2(0x2bc)]();if(!lastErrorShown||_0x4da364-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x5084c2(0x2bc)](),logHistory(_0x5084c2(0x26c),_0x5084c2(0x1f5)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x24d1c4='';if(_0x31a955[0x0])_0x24d1c4+=_0x31a955[0x0];if(_0x31a955[0x1]&&_0x31a955[0x1]['error']&&_0x31a955[0x1]['error'][_0x5084c2(0x2b8)])_0x24d1c4+='\x20-\x20'+_0x31a955[0x1][_0x5084c2(0x26c)][_0x5084c2(0x2b8)];logging(_0x5084c2(0x1f5)+consecutivePauses+_0x5084c2(0x295),''+_0x24d1c4),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x2e3eb5(0x2be),'rsaStandard':_0x2e3eb5(0x25c)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x2e3eb5(0x21f)]!=config[_0x2e3eb5(0x21f)]&&updateTimeshift(settings[_0x2e3eb5(0x21f)]);process[_0x2e3eb5(0x22a)]({'started':_0x2e3eb5(0x2f3)}),initializeProcessListeners();function proxyEmit(_0x20872f,_0x26f93e=null){const _0xb56ee4=_0x2e3eb5;process[_0xb56ee4(0x22a)]({'function':_0x20872f,'args':_0x26f93e});}function initializeProcessListeners(){const _0x219281=_0x2e3eb5;process['on'](_0x219281(0x2b8),_0xd795e5=>{const _0x29bcdb=_0x219281;switch(Object[_0x29bcdb(0x255)](_0xd795e5)[0x0]){case _0x29bcdb(0x21f):_0xd795e5[_0x29bcdb(0x21f)]!=undefined&&(settings['timeshift']=_0xd795e5['timeshift'],updateTimeshift(settings[_0x29bcdb(0x21f)]));break;case _0x29bcdb(0x245):switch(_0xd795e5[_0x29bcdb(0x245)]){case _0x29bcdb(0x261):initclient();break;case _0x29bcdb(0x2ab):emitHistory(_0xd795e5[_0x29bcdb(0x2f0)]);break;case _0x29bcdb(0x2d0):getPortfolio(_0xd795e5['args']);break;case _0x29bcdb(0x2a7):storeConfiguration(_0xd795e5[_0x29bcdb(0x2f0)]);break;case _0x29bcdb(0x224):storeHeadless(_0xd795e5[_0x29bcdb(0x2f0)]);break;case _0x29bcdb(0x2c6):getStartingBalances();break;case _0x29bcdb(0x2f4):placeOrder(_0xd795e5[_0x29bcdb(0x2f0)]);break;case _0x29bcdb(0x24e):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xfd070f=_0x2e3eb5;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0xfd070f(0x26a)],config[_0xfd070f(0x281)]);let _0x546fbe=await loadSymbols();_0x546fbe&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4bee2a,_0x18ec3b){const _0x3dc0e5=_0x2e3eb5,_0x2494fc=ccxt[config[_0x3dc0e5(0x227)]];let _0x337b4d;switch(config[_0x3dc0e5(0x227)]){case _0x3dc0e5(0x27b):_0x337b4d='wss://stream.binance.com:9443';break;case _0x3dc0e5(0x235):_0x337b4d='wss://stream.binance.us:9443';break;default:_0x337b4d=_0x3dc0e5(0x230);}exchange=new _0x2494fc({'apiKey':_0x4bee2a,'secret':_0x18ec3b,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4bee2a,'api_secret':_0x18ec3b,'beautify':!![],'wsUrl':_0x337b4d},logger),config[_0x3dc0e5(0x227)]==_0x3dc0e5(0x235)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':'BTC/BUSD'},'usd':{'coin':_0x3dc0e5(0x23e),'symbol':_0x3dc0e5(0x27f)}});}async function loadSymbols(){const _0x42c543=_0x2e3eb5;let _0x4ae7f0;try{markets=await exchange[_0x42c543(0x226)]();const _0x144d6d=['DAI/',_0x42c543(0x2e1),_0x42c543(0x243)];allSymbols=exchange[_0x42c543(0x257)][_0x42c543(0x262)](_0x25311c=>{let _0x8741c3=![];return _0x144d6d['forEach'](_0x1a4ad0=>{const _0x14070a=_0x4eda;if(_0x25311c[_0x14070a(0x231)](_0x1a4ad0))_0x8741c3=!![];}),!_0x8741c3;}),_0x4ae7f0=!![];}catch(_0x537fe0){await handleError(_0x537fe0,_0x42c543(0x2ae)),_0x4ae7f0=![];}return _0x4ae7f0;}function _0x4c77(){const _0x37f408=['initws()','wss://stream.binance.com:9443','includes','parse','InvalidNonce','format','binanceus','\x20orders\x20in\x20less\x20than\x20','userData','data','configuration','indexOf','date','\x20|\x20Error\x20details:\x20','event','BTCUSDT','lowdb','logs','enabled','emojisell','HOT/EUR','replace','function','getCloses()','AuthenticationError','getCoins()','parseISO','closeWs','eventType','OrderNotFound','basecoin','cancelLoading','sell','getMinutes','bot-','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','progress','mkdirSync','keys','slice','symbols','isArray','18zektkC','coin-loading-progress','getFiat()','RSA-OAEP','************','wsKey','datetime','min','initclient','filter','reduce','placeOrder()','asset','./config/','111630zfsNUP','recreate','BNB','apiKey','timeout','error','subscribeSpotUserDataStream','2335790JWMOpu','exit','balances','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','botname','(((.+)+)+)+$',',\x20must\x20be\x20a\x203\x20digit\x20number','performance','abs','total','distribution','createOrder','Limit\x20(high-margin)','binance','sells','test','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','BTC/USDT','toLowerCase','apiSecret','remainingSymbols','USDC','remove','fetchTickers','./version.json','fromCodePoint','Error:\x20Invalid\x20argument\x20','getHours','Order:\x20','reconnected','\x20|\x20Unknown\x20error\x20occured','version','log','accumulatedQuantity','event-history','startprice','sort','outboundAccountPosition','001',')\x20|\x20Error\x20details:\x20','existsSync','market','order','Binance\x20API\x20secret\x20is\x20invalid','privateKey','usd','bb-settings.json','differenceInCalendarDays','cancel','offset','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','delta','60387Ecpynv','cancelOrder','getMonth','kill','defaults','storeConfiguration','spot','differenceInSeconds','value','emitHistory','hybrid-crypto-js','getFullYear','loadSymbols()','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','side','breakeven','availableBalance','6009816fnOzkS','-config.json','date-fns','yyyy/MM/dd\x20HH:mm:ss','654178YqNORf','message','write','milliseconds','fees','getTime','close','sha256','trade','\x20>\x20','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','search','limit-high','excluded','DDoSProtection','getStartingBalances','filled','yyyy/MM/dd','last','splice','API-key\x20format\x20invalid','66DFBeUg','-performance.json','ordertype','ticker','getPortfolio','Binance\x20API\x20key\x20is\x20invalid','BUSD','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','number','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','619306QwbBYj','BTC','shift','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','success','fee','timestamp','secure','stringify','HOT/BTC','cost','fetchOrders','has','entries','limits','constructor','amount','page','Order(s)\x20not\x20validated\x20after\x20','ccxt','Unfilled\x20order(s)\x20canceled\x20after\x20','sortBy','getPortfolio()','Pausing\x20bot\x20for\x205\x20minutes\x20(','args','formattedMessage','headless','running','placeOrder','threshold','restart','orderStatus','toString','BTCEUR','MIN_NOTIONAL','116hAhcbk','push','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','find','Executed\x20','valid','\x20order:\x20','BTC/EUR','WebSockets(','type','coins','decrypt','FILLED','apply','buy','Order\x20filled:\x20','length','get','argv','limit','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','startnumber','kline','74FNQMmR','eur','cooldown','portfolio','round','835516MMfYkc','symbol','currency','orderId','\x20hour','yyyy-MM-dd\x27T\x27HH:mm:ss','getDate','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','emojibuy','padStart','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','buys','coin','\x20minutes\x20-\x20balancing\x20resumed','price','EUR','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','assign','Market','Crypt','target','timeshift','bot','startdate','showname','realized','storeHeadless','fetchOHLCV','loadMarkets','exchange','wsMarket','reverse','send','map','forEach','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','bid'];_0x4c77=function(){return _0x37f408;};return _0x4c77();}async function initbot(){const _0x108025=_0x2e3eb5;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x56e2c7=dbCoinResults[_0x108025(0x1fe)]('coins')['value']();if(_0x56e2c7['length']==0x0)await resetCoinResults();}async function initclient(){const _0x434a1c=_0x2e3eb5;proxyEmit(_0x434a1c(0x239),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x434a1c(0x270),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x59b16f=_0x2e3eb5;wsinitialized=![];ws1&&(ws1[_0x59b16f(0x22c)](_0x5807b7=>{const _0x59ff04=_0x59b16f;try{wsClient[_0x59ff04(0x24a)](_0x5807b7);}catch(_0x49aeb3){}}),ws1=[]);if(ws2){try{wsClient[_0x59b16f(0x24a)](ws2);}catch(_0x32991f){}ws2=null;}}async function initws(){const _0x114f67=_0x2e3eb5;cleanws();let _0xfa0d6e=[];currentCoins['forEach'](_0x2cc43=>{const _0xf0157a=_0x4eda;if(_0x2cc43[_0xf0157a(0x216)]!=config[_0xf0157a(0x24d)])_0xfa0d6e['push'](noslash(_0x2cc43[_0xf0157a(0x20a)]));});if(!_0xfa0d6e[_0x114f67(0x231)](stablecoins[_0x114f67(0x205)]['coin']))_0xfa0d6e['push'](stablecoins['eur'][_0x114f67(0x216)]);if(!_0xfa0d6e[_0x114f67(0x231)](stablecoins[_0x114f67(0x29b)][_0x114f67(0x216)]))_0xfa0d6e[_0x114f67(0x1ee)](stablecoins[_0x114f67(0x29b)][_0x114f67(0x216)]);if(!_0xfa0d6e[_0x114f67(0x231)](_0x114f67(0x269)+config[_0x114f67(0x24d)]))_0xfa0d6e[_0x114f67(0x1ee)](_0x114f67(0x269)+config['basecoin']);try{_0xfa0d6e[_0x114f67(0x22c)]((_0x1e3a5c,_0x2adafc)=>{ws1[_0x2adafc]=wsClient['subscribeSpotKline'](_0x1e3a5c,'1m');}),ws2=wsClient[_0x114f67(0x26d)](),wsClient['on'](_0x114f67(0x2f1),_0x2f616d=>{const _0x255af5=_0x114f67;if(!Array[_0x255af5(0x258)](_0x2f616d)&&!_0x2f616d[_0x255af5(0x25e)][_0x255af5(0x231)](_0x255af5(0x237))){if(_0x2f616d[_0x255af5(0x24b)]===_0x255af5(0x203)){global[_0x255af5(0x2cf)][_0x2f616d[_0x255af5(0x203)]['symbol']]=_0x2f616d[_0x255af5(0x203)][_0x255af5(0x2bd)];return;}}else{if(!Array[_0x255af5(0x258)](_0x2f616d)&&_0x2f616d[_0x255af5(0x25e)]['includes']('userData')){if(_0x2f616d[_0x255af5(0x228)]['includes'](_0x255af5(0x2a8))){updateNumberCoins(_0x2f616d);return;}}}}),wsClient['on'](_0x114f67(0x28b),async _0x87b3de=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x1f80f7){await handleError(_0x1f80f7,_0x114f67(0x22f));}let _0x19a596,_0x1b3628=0x0;loading[_0x114f67(0x282)]=[];let _0x4a2c50=0x0;currentCoins[_0x114f67(0x22c)](_0x2c82ee=>{const _0x10db08=_0x114f67;if(_0x2c82ee[_0x10db08(0x216)]!=config[_0x10db08(0x24d)])loading[_0x10db08(0x282)]['push'](_0x2c82ee[_0x10db08(0x20a)]);}),loadingCanceled=![];while(_0x19a596!=currentCoins[_0x114f67(0x1fd)]-0x1){_0x19a596=0x0,currentCoins['forEach'](_0x658d87=>{const _0x315667=_0x114f67;_0x658d87['coin']!=config[_0x315667(0x24d)]&&global[_0x315667(0x2cf)][noslash(_0x658d87[_0x315667(0x20a)])]&&(loading['remainingSymbols']=loading[_0x315667(0x282)][_0x315667(0x262)](_0x1a0877=>_0x1a0877!=_0x658d87[_0x315667(0x20a)]),_0x19a596++);}),loading[_0x114f67(0x253)]=Math['round'](_0x19a596/(currentCoins[_0x114f67(0x1fd)]-0x1)*0x64);_0x4a2c50>0x1e*0x5&&(loading[_0x114f67(0x26b)]=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x114f67(0x29e)]=!![],emitLoadingProgress();break;}else _0x19a596!=_0x1b3628&&(_0x1b3628=_0x19a596,emitLoadingProgress()),_0x4a2c50++,await sleep(0xc8);}if(_0x19a596==currentCoins[_0x114f67(0x1fd)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x1e27a2=_0x2e3eb5;proxyEmit(_0x1e27a2(0x25a),loading);}async function getFiat(){const _0x2929e6=_0x2e3eb5;let _0x579e7e=0x0,_0x3454da=0x0;try{_0x579e7e=global['ticker'][stablecoins[_0x2929e6(0x205)][_0x2929e6(0x216)]],_0x3454da=global[_0x2929e6(0x2cf)][stablecoins[_0x2929e6(0x29b)]['coin']];}catch(_0x32e9f1){await handleError(_0x32e9f1,_0x2929e6(0x25b));}return{'eur':Number(_0x579e7e),'usd':Number(_0x3454da)};}async function setStartDatePerformance(_0x1fd13b){const _0x4ec93e=_0x2e3eb5,_0x2e0b6b=fns[_0x4ec93e(0x234)](new Date(_0x1fd13b[_0x4ec93e(0x221)]),_0x4ec93e(0x2c8));let _0x42763f=[];_0x42763f[stablecoins[_0x4ec93e(0x205)][_0x4ec93e(0x216)]]=await getCloses(stablecoins[_0x4ec93e(0x205)][_0x4ec93e(0x20a)],new Date(_0x1fd13b['startdate']),0x1),_0x42763f[stablecoins['usd']['coin']]=await getCloses(stablecoins['usd'][_0x4ec93e(0x20a)],new Date(_0x1fd13b[_0x4ec93e(0x221)]),0x1);let _0x59d5a0,_0xcc4f12=[];_0x1fd13b[_0x4ec93e(0x207)][_0x4ec93e(0x22c)](_0x4fbfc2=>{const _0xe370f8=_0x4ec93e;!_0x4fbfc2[_0xe370f8(0x2c4)]&&_0xcc4f12[_0xe370f8(0x1ee)]({'coin':_0x4fbfc2['coin'],'number':_0x4fbfc2[_0xe370f8(0x202)],'price':_0x4fbfc2[_0xe370f8(0x291)]});}),_0x59d5a0={'date':_0x2e0b6b,'eur':_0x42763f[stablecoins[_0x4ec93e(0x205)][_0x4ec93e(0x216)]][0x0],'usd':_0x42763f[stablecoins[_0x4ec93e(0x29b)][_0x4ec93e(0x216)]][0x0],'coins':_0xcc4f12};let _0x5ad9b0=dbPerformance[_0x4ec93e(0x1fe)](_0x4ec93e(0x238))[_0x4ec93e(0x1f0)]({'date':_0x2e0b6b})[_0x4ec93e(0x2aa)]();_0x5ad9b0?dbPerformance[_0x4ec93e(0x1fe)](_0x4ec93e(0x238))[_0x4ec93e(0x1f0)]({'date':_0x2e0b6b})[_0x4ec93e(0x21b)](_0x59d5a0)[_0x4ec93e(0x2b9)]():dbPerformance['get']('data')[_0x4ec93e(0x1ee)](_0x59d5a0)[_0x4ec93e(0x2b9)](),_0x5ad9b0=dbPerformance[_0x4ec93e(0x1fe)]('data')[_0x4ec93e(0x2ed)](_0x4ec93e(0x23b))['value'](),_0x5ad9b0[_0x4ec93e(0x22c)](_0x47fa58=>{const _0x461228=_0x4ec93e;_0x47fa58['date']<_0x2e0b6b&&dbPerformance[_0x461228(0x1fe)]('data')[_0x461228(0x284)]({'date':_0x47fa58[_0x461228(0x23b)]})[_0x461228(0x2b9)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0xb0b243){const _0x113d1d=_0x2e3eb5;let _0x1d32b5,_0x14ca57=[];logHistory(_0x113d1d(0x2dc),_0x113d1d(0x2a0)),_0xb0b243[_0x113d1d(0x207)][_0x113d1d(0x22c)](_0x2d74f2=>{const _0x15ea1b=_0x113d1d;if(_0x2d74f2[_0x15ea1b(0x216)]!=config['basecoin']&&!_0x2d74f2[_0x15ea1b(0x2c4)])_0x14ca57[_0x15ea1b(0x1ee)]({'coin':_0x2d74f2[_0x15ea1b(0x216)],'symbol':_0x2d74f2[_0x15ea1b(0x20a)]});});let _0x5de959=[];try{const _0x4d44d1=fns['format'](fns[_0x113d1d(0x249)](_0xb0b243['startdate'][_0x113d1d(0x244)](/\//g,'-')),_0x113d1d(0x20e));for(const _0x5c7037 of _0x14ca57){if(_0x5c7037[_0x113d1d(0x216)]!=config[_0x113d1d(0x24d)])_0x1d32b5=await exchange[_0x113d1d(0x2e3)](_0x5c7037[_0x113d1d(0x20a)],Date['parse'](_0x4d44d1));_0x1d32b5[_0x113d1d(0x22c)](_0x22ea2d=>{const _0x547291=_0x113d1d,_0x232701=_0x5c7037[_0x547291(0x20a)][_0x547291(0x231)](config[_0x547291(0x24d)]+'/'),_0x5efc00=fns[_0x547291(0x234)](fns[_0x547291(0x249)](_0x22ea2d['datetime']),_0x547291(0x2b6)),_0x4df945=fns['format'](fns['parseISO'](_0x22ea2d[_0x547291(0x25f)]),_0x547291(0x2c8));let _0x3c522e;if(_0x22ea2d['side']=='buy'&&_0x232701==![])_0x3c522e=_0x22ea2d[_0x547291(0x2e8)];if(_0x22ea2d[_0x547291(0x2b0)]==_0x547291(0x1fb)&&_0x232701==!![])_0x3c522e=-_0x22ea2d[_0x547291(0x2e8)]*_0x22ea2d[_0x547291(0x218)];if(_0x22ea2d[_0x547291(0x2b0)]=='sell'&&_0x232701==![])_0x3c522e=-_0x22ea2d['amount'];if(_0x22ea2d[_0x547291(0x2b0)]==_0x547291(0x24f)&&_0x232701==!![])_0x3c522e=_0x22ea2d[_0x547291(0x2e8)]*_0x22ea2d['price'];_0x5de959[_0x547291(0x1ee)]({'timestamp':_0x5efc00,'date':_0x4df945,'coin':_0x5c7037[_0x547291(0x216)],'symbol':_0x5c7037[_0x547291(0x20a)],'type':_0x22ea2d[_0x547291(0x1f6)],'side':_0x22ea2d[_0x547291(0x2b0)],'reverse':_0x232701,'amount':formatResult(_0x22ea2d[_0x547291(0x2c7)],0x8),'filled':formatResult(_0x22ea2d['filled'],0x8),'coinamount':formatResult(_0x3c522e,0x8),'price':formatResult(_0x22ea2d[_0x547291(0x218)],0x8)});let _0x88911d;if(_0x22ea2d[_0x547291(0x2b0)]==_0x547291(0x1fb)&&_0x232701==![])_0x88911d=-_0x22ea2d[_0x547291(0x2e8)]*_0x22ea2d[_0x547291(0x218)];if(_0x22ea2d['side']==_0x547291(0x1fb)&&_0x232701==!![])_0x88911d=_0x22ea2d[_0x547291(0x2e8)];if(_0x22ea2d['side']==_0x547291(0x24f)&&_0x232701==![])_0x88911d=_0x22ea2d[_0x547291(0x2e8)]*_0x22ea2d['price'];if(_0x22ea2d[_0x547291(0x2b0)]=='sell'&&_0x232701==!![])_0x88911d=-_0x22ea2d[_0x547291(0x2e8)];_0x5de959[_0x547291(0x1ee)]({'date':_0x4df945,'coin':config[_0x547291(0x24d)],'coinamount':formatResult(_0x88911d,0x8)});});}_0x5de959[_0x113d1d(0x292)]((_0x2faa26,_0x36a3d3)=>_0x2faa26[_0x113d1d(0x2de)]>_0x36a3d3[_0x113d1d(0x2de)]?0x1:_0x36a3d3[_0x113d1d(0x2de)]>_0x2faa26[_0x113d1d(0x2de)]?-0x1:0x0),dbLogs[_0x113d1d(0x1fe)](_0x113d1d(0x240))[_0x113d1d(0x284)]()[_0x113d1d(0x2b9)](),_0x5de959['forEach'](_0x1f9e6b=>{const _0x9f59b9=_0x113d1d;let _0xa921af;_0x1f9e6b['coin']!=config[_0x9f59b9(0x24d)]&&(_0xa921af={'time':_0x1f9e6b['timestamp'],'type':'order','event':_0x9f59b9(0x28a)+_0x1f9e6b[_0x9f59b9(0x20a)]+'\x20'+_0x1f9e6b[_0x9f59b9(0x2b0)]+'\x20#'+_0x1f9e6b['amount']+'\x20@'+_0x1f9e6b[_0x9f59b9(0x218)]},dbLogs[_0x9f59b9(0x1fe)](_0x9f59b9(0x240))['push'](_0xa921af)[_0x9f59b9(0x2b9)]());});const _0x50403c=fns['eachDayOfInterval']({'start':new Date(_0xb0b243[_0x113d1d(0x221)]),'end':new Date()})[_0x113d1d(0x22b)](_0x20fa7a=>fns[_0x113d1d(0x234)](_0x20fa7a,_0x113d1d(0x2c8)));let _0x3ed31a=[];_0xb0b243[_0x113d1d(0x207)][_0x113d1d(0x22c)](_0x4e33c9=>{const _0x54612c=_0x113d1d;if(!_0x4e33c9['excluded']){_0x3ed31a[_0x4e33c9[_0x54612c(0x216)]]=[];let _0x2c9371=_0x4e33c9[_0x54612c(0x202)];_0x50403c[_0x54612c(0x22c)]((_0x38018d,_0x346537)=>{const _0x37e142=_0x54612c;let _0x584cc0=_0x5de959['filter'](_0x3e3899=>_0x3e3899['coin']==_0x4e33c9[_0x37e142(0x216)]&&_0x3e3899[_0x37e142(0x23b)]==_0x38018d);if(_0x584cc0['length']!=0x0){let _0x22f9a5=_0x584cc0[_0x37e142(0x263)]((_0x40bf31,_0x2a92a1)=>{return _0x40bf31+=_0x2a92a1['coinamount'],_0x40bf31;},0x0);_0x2c9371+=_0x22f9a5;}_0x3ed31a[_0x4e33c9[_0x37e142(0x216)]][_0x38018d]=_0x2c9371;});}});const _0xac33b8=[..._0x14ca57];_0xac33b8['push']({'coin':stablecoins[_0x113d1d(0x205)]['coin'],'symbol':stablecoins[_0x113d1d(0x205)][_0x113d1d(0x20a)]}),_0xac33b8[_0x113d1d(0x1ee)]({'coin':stablecoins[_0x113d1d(0x29b)]['coin'],'symbol':stablecoins[_0x113d1d(0x29b)][_0x113d1d(0x20a)]});let _0x408ca3=[];for(const _0x18174c of _0xac33b8){_0x408ca3[_0x18174c[_0x113d1d(0x216)]]=await getCloses(_0x18174c[_0x113d1d(0x20a)],new Date(_0xb0b243['startdate']));}dbPerformance[_0x113d1d(0x1fe)](_0x113d1d(0x238))['remove']()[_0x113d1d(0x2b9)](),_0x50403c['forEach']((_0x407d66,_0x95aa10)=>{const _0x5105e1=_0x113d1d;let _0x182d96,_0x38fc3c=[];_0x95aa10==0x0?(_0xb0b243[_0x5105e1(0x207)][_0x5105e1(0x22c)](_0x227d85=>{const _0x10d3c4=_0x5105e1;!_0x227d85[_0x10d3c4(0x2c4)]&&_0x38fc3c[_0x10d3c4(0x1ee)]({'coin':_0x227d85[_0x10d3c4(0x216)],'number':_0x227d85[_0x10d3c4(0x202)],'price':_0x227d85['startprice']});}),_0x182d96={'date':_0x407d66,'eur':_0x408ca3[stablecoins[_0x5105e1(0x205)][_0x5105e1(0x216)]][_0x95aa10],'usd':_0x408ca3[stablecoins[_0x5105e1(0x29b)][_0x5105e1(0x216)]][_0x95aa10],'coins':_0x38fc3c}):(_0xb0b243['portfolio']['forEach'](_0x3a7b9a=>{const _0x348dd2=_0x5105e1;!_0x3a7b9a[_0x348dd2(0x2c4)]&&_0x38fc3c[_0x348dd2(0x1ee)]({'coin':_0x3a7b9a['coin'],'number':_0x3ed31a[_0x3a7b9a[_0x348dd2(0x216)]][_0x407d66],'price':_0x3a7b9a['coin']==config['basecoin']?0x1:_0x408ca3[_0x3a7b9a['coin']][_0x95aa10]});}),_0x182d96={'date':_0x407d66,'eur':_0x408ca3[stablecoins['eur'][_0x5105e1(0x216)]][_0x95aa10],'usd':_0x408ca3[stablecoins[_0x5105e1(0x29b)][_0x5105e1(0x216)]][_0x95aa10],'coins':_0x38fc3c}),dbPerformance['get'](_0x5105e1(0x238))[_0x5105e1(0x1ee)](_0x182d96)[_0x5105e1(0x2b9)]();}),emitPerformance(),await resetCoinResults();for(let _0x4884f6 of _0x5de959){_0x4884f6[_0x113d1d(0x216)]!=config[_0x113d1d(0x24d)]&&await updateCoinResults(_0x4884f6);}logHistory(_0x113d1d(0x2dc),'Performance\x20recreation\x20completed\x20successfully');}catch(_0x54ef6e){await handleError(_0x54ef6e,'recreateHistory()');}}async function getCloses(_0x526034,_0x3eb6d4,_0x3f265a=undefined){const _0x383193=_0x2e3eb5,_0x2e88a2='1d';let _0x2d3f18,_0x2e7c74;const _0x3047c9=fns[_0x383193(0x29d)](new Date(),_0x3eb6d4)+0x1;try{const _0x607a31=exchange[_0x383193(0x2ba)]()-_0x3047c9*0x18*0xe10*0x3e8;_0x2d3f18=await exchange[_0x383193(0x225)](_0x526034,_0x2e88a2,_0x607a31,_0x3f265a),_0x2e7c74=await exchange[_0x383193(0x285)](_0x526034);}catch(_0x260996){await handleError(_0x260996,_0x383193(0x246));}let _0x2dec91=ohlcvToCloses(_0x2d3f18);return _0x2dec91[_0x383193(0x1ee)](_0x2e7c74[_0x526034][_0x383193(0x2c9)]),_0x2dec91;}function ohlcvToCloses(_0x452be6){const _0x2bec57=_0x2e3eb5;let _0xd37a=[];return _0x452be6[_0x2bec57(0x22c)](function(_0x14a812){const _0x17769d=_0x2bec57;_0xd37a[_0x17769d(0x1ee)](_0x14a812[0x4]);}),_0xd37a;}function getConfiguration(_0x4ba521){const _0x14be1f=_0x2e3eb5;let _0xb7483f=dbConfig['get']('bot')[_0x14be1f(0x1f0)]({'botID':_0x4ba521})[_0x14be1f(0x2aa)]();if(_0xb7483f){let _0x3f3abf=![];!_0xb7483f[_0x14be1f(0x227)]&&(_0xb7483f={..._0xb7483f,'exchange':'binance'},_0x3f3abf=!![]),!_0xb7483f[_0x14be1f(0x24d)]&&(_0xb7483f={..._0xb7483f,'basecoin':_0x14be1f(0x2d8)},_0x3f3abf=!![]),!_0xb7483f[_0x14be1f(0x2ce)]&&(_0xb7483f={..._0xb7483f,'ordertype':_0x14be1f(0x297)},_0x3f3abf=!![]),!_0xb7483f[_0x14be1f(0x26b)]&&(_0xb7483f={..._0xb7483f,'timeout':0x14},_0x3f3abf=!![]),!_0xb7483f[_0x14be1f(0x212)]&&(_0xb7483f={..._0xb7483f,'emojibuy':''},_0x3f3abf=!![]),!_0xb7483f[_0x14be1f(0x242)]&&(_0xb7483f={..._0xb7483f,'emojisell':''},_0x3f3abf=!![]),!_0xb7483f['showname']&&(_0xb7483f={..._0xb7483f,'showname':![]},_0x3f3abf=!![]),_0x3f3abf&&(_0xb7483f={'botID':_0xb7483f['botID'],'exchange':_0xb7483f[_0x14be1f(0x227)],'apiKey':_0xb7483f[_0x14be1f(0x26a)],'apiSecret':_0xb7483f[_0x14be1f(0x281)],'basecoin':_0xb7483f[_0x14be1f(0x24d)],'botname':_0xb7483f['botname'],'showname':_0xb7483f[_0x14be1f(0x222)],'threshold':_0xb7483f[_0x14be1f(0x2f5)],'ordertype':_0xb7483f[_0x14be1f(0x2ce)],'timeout':_0xb7483f[_0x14be1f(0x26b)],'startdate':_0xb7483f[_0x14be1f(0x221)],'recreate':_0xb7483f[_0x14be1f(0x268)],'timeshift':_0xb7483f[_0x14be1f(0x21f)],'headless':_0xb7483f['headless'],'cooldown':_0xb7483f[_0x14be1f(0x206)],'emojibuy':_0xb7483f[_0x14be1f(0x212)],'emojisell':_0xb7483f[_0x14be1f(0x242)],'portfolio':_0xb7483f[_0x14be1f(0x207)]},dbConfig[_0x14be1f(0x1fe)](_0x14be1f(0x220))[_0x14be1f(0x284)]()[_0x14be1f(0x2b9)](),dbConfig['get'](_0x14be1f(0x220))[_0x14be1f(0x1ee)](_0xb7483f)[_0x14be1f(0x2b9)]());}else _0xb7483f={'botID':_0x4ba521,'exchange':'binance','apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x4ba521,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x14be1f(0x21f)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0xb7483f;}function emittedConfiguration(){const _0xa800c2=_0x2e3eb5;let _0x1bd690;return config[_0xa800c2(0x26a)]==''?_0x1bd690=config:_0x1bd690={...config,'apiKey':'************','apiSecret':_0xa800c2(0x25d)},_0x1bd690;}function getSettings(){const _0x373b12=_0x2e3eb5;return dbSettings[_0x373b12(0x1fe)]('settings')[_0x373b12(0x2aa)]();}function getSecure(){const _0x34fa1e=_0x2e3eb5;return dbSecure['get'](_0x34fa1e(0x2df))[_0x34fa1e(0x2aa)]()||{};}function updateTimeshift(_0x42aea1){const _0x281c20=_0x2e3eb5;let _0x1d6a16=dbConfig['get'](_0x281c20(0x220))[_0x281c20(0x1f0)]({'botID':botID})['value']();_0x1d6a16&&dbConfig[_0x281c20(0x1fe)](_0x281c20(0x220))[_0x281c20(0x1f0)]({'botID':botID})[_0x281c20(0x21b)]({'timeshift':_0x42aea1})[_0x281c20(0x2b9)](),config['timeshift']=_0x42aea1,proxyEmit(_0x281c20(0x239),emittedConfiguration());}async function storeConfiguration(_0x438495){const _0x506ed1=_0x2e3eb5;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x446dc0=dbConfig['get'](_0x506ed1(0x220))[_0x506ed1(0x1f0)]({'botID':botID})[_0x506ed1(0x2aa)]();_0x438495={..._0x438495,'apiKey':crypt['decrypt'](secure['privateKey'],_0x438495[_0x506ed1(0x26a)])['message'],'apiSecret':crypt[_0x506ed1(0x1f8)](secure[_0x506ed1(0x29a)],_0x438495[_0x506ed1(0x281)])[_0x506ed1(0x2b8)]};if(_0x446dc0){if(_0x438495[_0x506ed1(0x26a)]=='************')_0x438495[_0x506ed1(0x26a)]=config[_0x506ed1(0x26a)];if(_0x438495['apiSecret']==_0x506ed1(0x25d))_0x438495['apiSecret']=config[_0x506ed1(0x281)];dbConfig[_0x506ed1(0x1fe)]('bot')[_0x506ed1(0x1f0)]({'botID':botID})[_0x506ed1(0x21b)](_0x438495)['write']();}else dbConfig[_0x506ed1(0x1fe)](_0x506ed1(0x220))[_0x506ed1(0x1ee)](_0x438495)['write'](),process[_0x506ed1(0x22a)]({'status':_0x506ed1(0x241),'live':_0x506ed1(0x2f3)});config={..._0x438495};if(config[_0x506ed1(0x268)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x506ed1(0x22a)]({'botname':_0x438495[_0x506ed1(0x272)]}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x4ea45a){const _0x16af80=_0x2e3eb5,_0x1796e={...config,'headless':_0x4ea45a[_0x16af80(0x2f2)]};let _0x3a181b=dbConfig['get'](_0x16af80(0x220))[_0x16af80(0x1f0)]({'botID':botID})[_0x16af80(0x2aa)]();_0x3a181b&&dbConfig[_0x16af80(0x1fe)](_0x16af80(0x220))[_0x16af80(0x1f0)]({'botID':botID})[_0x16af80(0x21b)](_0x1796e)['write'](),config={..._0x1796e},proxyEmit(_0x16af80(0x239),emittedConfiguration());}function noslash(_0x2d0bc1){const _0x5487c3=_0x2e3eb5;return _0x2d0bc1[_0x5487c3(0x244)]('/','');}function updateNumberCoins(_0x380099){const _0x407638=_0x2e3eb5;_0x380099[_0x407638(0x24b)]&&_0x380099[_0x407638(0x24b)]==_0x407638(0x293)&&_0x380099[_0x407638(0x270)][_0x407638(0x22c)](_0x46973d=>{const _0x46ce12=_0x407638;let _0x531f62=currentCoins['find'](_0x1666a1=>_0x1666a1['coin']==_0x46973d[_0x46ce12(0x265)]),_0x87c881=config[_0x46ce12(0x207)][_0x46ce12(0x1f0)](_0x1a0747=>_0x1a0747['coin']==_0x46973d[_0x46ce12(0x265)]);if(_0x531f62&&_0x87c881)_0x531f62['number']=Number(_0x46973d[_0x46ce12(0x2b2)])+(_0x87c881[_0x46ce12(0x29f)]||0x0);});if(_0x380099[_0x407638(0x24b)]&&_0x380099[_0x407638(0x24b)]=='executionReport'){if(_0x380099['orderType']=='LIMIT'&&_0x380099[_0x407638(0x2f7)]==_0x407638(0x1f9)){if(lastOrders)lastOrders[_0x407638(0x22c)](_0xeb0152=>{const _0x4a58d0=_0x407638;if(_0xeb0152[_0x4a58d0(0x20c)]==_0x380099['orderId']){if(_0xeb0152[_0x4a58d0(0x229)])_0xeb0152['filled']=_0x380099['accumulatedQuantity']*_0xeb0152[_0x4a58d0(0x218)];else _0xeb0152[_0x4a58d0(0x2c7)]=_0x380099[_0x4a58d0(0x28f)];}});}}}async function getCoins(_0x3c92db=!![],_0x2cb9f7=config['basecoin']){const _0xcd5e8e=_0x2e3eb5;let _0x430d81,_0x240c66=[],_0x3ff723=[],_0x400e31=[];try{_0x430d81=await exchange['fetchBalance'](),mybalances=_0x430d81[_0xcd5e8e(0x277)];if(!_0x3c92db)for(const [_0x109d3e,_0x43aab0]of Object[_0xcd5e8e(0x2e5)](mybalances)){_0x400e31[_0xcd5e8e(0x1ee)](_0x109d3e);}else config[_0xcd5e8e(0x207)][_0xcd5e8e(0x22c)](_0x4e57b9=>{const _0x3f6ca9=_0xcd5e8e;if(!_0x4e57b9['excluded'])_0x400e31[_0x3f6ca9(0x1ee)](_0x4e57b9[_0x3f6ca9(0x216)]);});if(_0x2cb9f7=='')for(const [_0x33edfe,_0x2b0bb1]of Object['entries'](mybalances)){_0x2b0bb1[_0xcd5e8e(0x2f8)]()!=0x0&&_0x3ff723[_0xcd5e8e(0x1ee)]({'coin':_0x33edfe});}else for(const [_0x149755,_0x4195f1]of Object['entries'](mybalances)){if(_0x400e31[_0xcd5e8e(0x231)](_0x149755)){const _0x4aa35f=config[_0xcd5e8e(0x207)]['find'](_0x359f83=>_0x359f83[_0xcd5e8e(0x216)]==_0x149755);if((_0x4195f1[_0xcd5e8e(0x2f8)]()!=0x0||_0x4aa35f)&&(allSymbols['includes'](_0x149755+'/'+_0x2cb9f7)||_0x149755==_0x2cb9f7))_0x3ff723[_0xcd5e8e(0x1ee)]({'coin':_0x149755,'symbol':_0x149755+'/'+_0x2cb9f7,'reverse':![],'number':_0x4195f1+(_0x4aa35f[_0xcd5e8e(0x29f)]||0x0)}),_0x149755!=_0x2cb9f7&&_0x240c66['push'](_0x149755+'/'+_0x2cb9f7);else(_0x4195f1['toString']()!=0x0||_0x4aa35f)&&allSymbols[_0xcd5e8e(0x231)](_0x2cb9f7+'/'+_0x149755)&&(_0x3ff723['push']({'coin':_0x149755,'symbol':_0x2cb9f7+'/'+_0x149755,'reverse':!![],'number':_0x4195f1+(_0x4aa35f[_0xcd5e8e(0x29f)]||0x0)}),_0x149755!=_0x2cb9f7&&_0x240c66['push'](_0x2cb9f7+'/'+_0x149755));}}}catch(_0x35acb5){if(!_0x3c92db){if(_0x35acb5[_0xcd5e8e(0x2f8)]()[_0xcd5e8e(0x231)](_0xcd5e8e(0x2cb)))return logHistory('error',_0xcd5e8e(0x2d1)),![];else{if(_0x35acb5['toString']()[_0xcd5e8e(0x231)](_0xcd5e8e(0x247)))return logHistory(_0xcd5e8e(0x26c),_0xcd5e8e(0x22d)),![];else{if(_0x35acb5[_0xcd5e8e(0x2f8)]()[_0xcd5e8e(0x231)](_0xcd5e8e(0x271)))return logHistory('error',_0xcd5e8e(0x299)),![];else await handleError(_0x35acb5,_0xcd5e8e(0x248));}}}else await handleError(_0x35acb5,'getCoins()');}return _0x3ff723;}async function getPortfolio(_0x3f8c82){const _0x3d7097=_0x2e3eb5;let _0x4ad3be=[],_0x963e6=[],_0x2c1d0b,_0x43a0a8=[],_0x5cd3f8,_0x13f1a4;_0x3f8c82[_0x3d7097(0x26a)]===_0x3d7097(0x25d)||_0x3f8c82[_0x3d7097(0x281)]===_0x3d7097(0x25d)?(_0x5cd3f8=config[_0x3d7097(0x26a)],_0x13f1a4=config[_0x3d7097(0x281)]):(_0x5cd3f8=_0x3f8c82[_0x3d7097(0x26a)],_0x13f1a4=_0x3f8c82[_0x3d7097(0x281)]);await initExchange(_0x5cd3f8,_0x13f1a4);let _0x4c311c=await loadSymbols();if(_0x4c311c){_0x43a0a8=await getCoins(![],_0x3f8c82['basecoin']);if(_0x43a0a8===![])proxyEmit(_0x3d7097(0x207),![]);else{if(_0x3f8c82[_0x3d7097(0x24d)]=='')proxyEmit(_0x3d7097(0x207),_0x43a0a8);else{_0x43a0a8[_0x3d7097(0x22c)](_0x4c3f35=>{const _0x23ce70=_0x3d7097;_0x4ad3be[_0x23ce70(0x1ee)](_0x4c3f35['symbol']);});try{_0x963e6=await exchange[_0x3d7097(0x285)](_0x4ad3be);}catch(_0x5d13a9){await handleError(_0x5d13a9,_0x3d7097(0x2ee));}_0x43a0a8[_0x3d7097(0x22c)](_0x14e05b=>{const _0x4a0a9a=_0x3d7097;_0x14e05b[_0x4a0a9a(0x216)]!=_0x3f8c82[_0x4a0a9a(0x24d)]?_0x2c1d0b=_0x14e05b[_0x4a0a9a(0x229)]?0x1/_0x963e6[_0x14e05b[_0x4a0a9a(0x20a)]]['last']:_0x963e6[_0x14e05b[_0x4a0a9a(0x20a)]][_0x4a0a9a(0x2c9)]:_0x2c1d0b=0x1,_0x14e05b[_0x4a0a9a(0x218)]=formatResult(_0x2c1d0b,0x8);}),proxyEmit(_0x3d7097(0x207),_0x43a0a8);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x7308cc){const _0x2afb6d=_0x2e3eb5;let _0x1b0c5d=!![];const _0x5eebeb=!_0x7308cc['reverse']?markets[_0x7308cc['symbol']][_0x2afb6d(0x2e6)][_0x2afb6d(0x2e8)][_0x2afb6d(0x260)]:markets[_0x7308cc[_0x2afb6d(0x20a)]][_0x2afb6d(0x2e6)][_0x2afb6d(0x2e2)][_0x2afb6d(0x260)],_0x1f1fb0=!_0x7308cc[_0x2afb6d(0x229)]?markets[_0x7308cc['symbol']][_0x2afb6d(0x2e6)]['cost'][_0x2afb6d(0x260)]:markets[_0x7308cc[_0x2afb6d(0x20a)]][_0x2afb6d(0x2e6)][_0x2afb6d(0x2e8)][_0x2afb6d(0x260)];if(Math[_0x2afb6d(0x276)](_0x7308cc[_0x2afb6d(0x2bf)])<_0x5eebeb)_0x1b0c5d=![];if(Math[_0x2afb6d(0x276)](_0x7308cc[_0x2afb6d(0x2bf)])*_0x7308cc[_0x2afb6d(0x2c9)]<_0x1f1fb0)_0x1b0c5d=![];return _0x1b0c5d;}async function getBalances(){const _0x273127=_0x2e3eb5;let _0x1d868b=0x0,_0x3e61ce;const _0x4a9c6f=config[_0x273127(0x2f5)];currentCoins[_0x273127(0x22c)](_0x1424ee=>{const _0x4023c0=_0x273127;if(_0x1424ee[_0x4023c0(0x216)]!=config[_0x4023c0(0x24d)]){let _0x88e1b8=global[_0x4023c0(0x2cf)][noslash(_0x1424ee['symbol'])];_0x3e61ce=_0x1424ee['reverse']?0x1/_0x88e1b8:_0x88e1b8;}else _0x3e61ce=0x1;let _0x3b753c=_0x1424ee[_0x4023c0(0x2d4)]*_0x3e61ce;_0x1d868b+=_0x3b753c,_0x1424ee['last']=formatResult(Number(_0x3e61ce),0x8),_0x1424ee['value']=_0x3b753c;}),currentCoins[_0x273127(0x22c)](_0x3942b3=>{const _0x28cbf1=_0x273127;let _0x2e6e04=config[_0x28cbf1(0x207)][_0x28cbf1(0x1f0)](_0xa25319=>_0xa25319[_0x28cbf1(0x216)]==_0x3942b3[_0x28cbf1(0x216)]),_0x42bc06=Number(_0x2e6e04[_0x28cbf1(0x278)]),_0x3a8caf=_0x3942b3['value']/_0x1d868b*0x64,_0x3effc7=_0x42bc06*_0x1d868b/0x64/_0x3942b3['last']-_0x3942b3['number'];_0x3942b3[_0x28cbf1(0x278)]=formatResult(_0x3a8caf,0x3),_0x3942b3['target']=formatResult(_0x42bc06,0x3),_0x3942b3['trade']=formatResult(_0x3effc7,0x8),_0x3942b3[_0x28cbf1(0x2b0)]='',_0x3942b3[_0x28cbf1(0x1f2)]='';if(_0x3942b3['coin']!=config[_0x28cbf1(0x24d)]){if(_0x3942b3[_0x28cbf1(0x278)]>_0x42bc06)_0x3942b3['side']='sell',_0x3942b3['valid']=checkMinimums(_0x3942b3);else _0x3942b3[_0x28cbf1(0x278)]<_0x42bc06&&(_0x3942b3['side']=_0x28cbf1(0x1fb),_0x3942b3[_0x28cbf1(0x1f2)]=checkMinimums(_0x3942b3));}_0x3942b3[_0x28cbf1(0x2a1)]=_0x3942b3[_0x28cbf1(0x278)]/_0x3942b3[_0x28cbf1(0x21e)]-0x1;}),currentCoins[_0x273127(0x292)]((_0x5cf73a,_0x4a5011)=>_0x5cf73a[_0x273127(0x2a1)]<_0x4a5011[_0x273127(0x2a1)]?0x1:_0x4a5011['delta']<_0x5cf73a[_0x273127(0x2a1)]?-0x1:0x0);const _0x5574a0=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x5574a0[_0x273127(0x205)],'usd':_0x5574a0[_0x273127(0x29b)],'portfolio':JSON[_0x273127(0x2e0)](currentCoins),'threshold':_0x4a9c6f},proxyEmit(_0x273127(0x270),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4a9c6f});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3a018b=_0x2e3eb5;if(!lastBalances)return;let _0x571707=await getStartingBalances(![]),_0x3eed06=[],_0x5cc7e6;JSON['parse'](lastBalances[_0x3a018b(0x207)])[_0x3a018b(0x22c)](_0x5a1172=>{const _0x621648=_0x3a018b;let _0x2bd8c1={'coin':_0x5a1172[_0x621648(0x216)],'number':_0x5a1172[_0x621648(0x2d4)],'price':_0x5a1172[_0x621648(0x2c9)]};_0x3eed06[_0x621648(0x1ee)](_0x2bd8c1);});const _0x49d03d=await getFiat();_0x5cc7e6={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x49d03d[_0x3a018b(0x205)],'usd':_0x49d03d[_0x3a018b(0x29b)],'coins':_0x3eed06};let _0x1deb05=dbPerformance[_0x3a018b(0x1fe)](_0x3a018b(0x238))[_0x3a018b(0x1f0)]({'date':_0x5cc7e6[_0x3a018b(0x23b)]})[_0x3a018b(0x2aa)]();_0x1deb05?dbPerformance['get']('data')[_0x3a018b(0x1f0)]({'date':_0x5cc7e6[_0x3a018b(0x23b)]})[_0x3a018b(0x21b)](_0x5cc7e6)[_0x3a018b(0x2b9)]():dbPerformance[_0x3a018b(0x1fe)](_0x3a018b(0x238))['push'](_0x5cc7e6)[_0x3a018b(0x2b9)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0xa03f45=_0x2e3eb5;if(dbPerformance[_0xa03f45(0x2e4)](_0xa03f45(0x238))[_0xa03f45(0x2aa)]()){let _0x36382c=dbPerformance[_0xa03f45(0x1fe)](_0xa03f45(0x238))[_0xa03f45(0x2ed)](_0xa03f45(0x23b))[_0xa03f45(0x2aa)]();proxyEmit(_0xa03f45(0x275),_0x36382c),lastPerformanceEmitted=getDate();}else proxyEmit(_0xa03f45(0x275),[]);}async function getStartingBalances(_0x241bbc=!![]){const _0x372b25=_0x2e3eb5;let _0x27ed28=dbPerformance['get'](_0x372b25(0x238))[_0x372b25(0x1f0)]({'date':config['startdate']})[_0x372b25(0x2aa)]();config[_0x372b25(0x26a)]!=''&&!_0x27ed28&&(await setStartDatePerformance(config),_0x27ed28=dbPerformance[_0x372b25(0x1fe)](_0x372b25(0x238))[_0x372b25(0x1f0)]({'date':config[_0x372b25(0x221)]})['value']());if(config['apiKey']==''||!_0x27ed28)return{};let _0x25a7ce=0x0,_0x40ab20=0x0,_0xec0e73=0x0,_0x29b283=[],_0x56ee29=0x0;config[_0x372b25(0x207)][_0x372b25(0x22c)](_0x180b66=>{const _0x1926f4=_0x372b25;if(!_0x180b66[_0x1926f4(0x2c4)]){_0x29b283[_0x56ee29]={'coin':_0x180b66[_0x1926f4(0x216)],'symbol':_0x180b66[_0x1926f4(0x20a)],'number':_0x180b66['startnumber'],'price':_0x180b66['startprice']},_0x25a7ce+=_0x180b66[_0x1926f4(0x291)]*_0x180b66[_0x1926f4(0x202)];if(config[_0x1926f4(0x24d)]==_0x1926f4(0x2d8))_0x40ab20+=_0x180b66[_0x1926f4(0x291)]*_0x180b66['startnumber']*_0x27ed28[_0x1926f4(0x205)],_0xec0e73+=_0x180b66[_0x1926f4(0x291)]*_0x180b66['startnumber']*_0x27ed28[_0x1926f4(0x29b)];else{if(config[_0x1926f4(0x24d)]==_0x1926f4(0x2d2)||config[_0x1926f4(0x24d)]=='USDT'||config[_0x1926f4(0x24d)]==_0x1926f4(0x283))_0x40ab20+=_0x180b66[_0x1926f4(0x291)]*_0x180b66[_0x1926f4(0x202)]*_0x27ed28['eur']/_0x27ed28['usd'],_0xec0e73+=_0x180b66[_0x1926f4(0x291)]*_0x180b66[_0x1926f4(0x202)];else config['basecoin']==_0x1926f4(0x219)&&(_0x40ab20+=_0x180b66[_0x1926f4(0x291)]*_0x180b66[_0x1926f4(0x202)],_0xec0e73+=_0x180b66['startprice']*_0x180b66['startnumber']*_0x27ed28[_0x1926f4(0x29b)]/_0x27ed28[_0x1926f4(0x205)]);}_0x56ee29++;}});let _0x103dde={'basecoin':_0x25a7ce,'eur':_0x40ab20,'usd':_0xec0e73,'coins':_0x29b283};if(_0x241bbc)proxyEmit('starting-balances',_0x103dde);return _0x103dde;}function headlessMode(_0x9c49d0){const _0x16c35a=_0x2e3eb5;let _0x303e2e=_0x9c49d0['portfolio'],_0x5ca571=_0x9c49d0['threshold'],_0x44b382=[];for(let _0x5353ab of _0x303e2e){if(_0x5353ab[_0x16c35a(0x216)]!=config[_0x16c35a(0x24d)]){if(_0x5353ab[_0x16c35a(0x278)]/_0x5353ab[_0x16c35a(0x21e)]-0x1>=_0x5ca571/0x64){if(_0x5353ab['valid'])_0x44b382[_0x16c35a(0x1ee)](_0x5353ab);}else{if(_0x5353ab[_0x16c35a(0x278)]/_0x5353ab[_0x16c35a(0x21e)]-0x1<=-_0x5ca571/0x64){if(_0x5353ab[_0x16c35a(0x1f2)])_0x44b382[_0x16c35a(0x1ee)](_0x5353ab);}}}}_0x44b382[_0x16c35a(0x1fd)]>0x0&&placeOrder(_0x44b382);}function symbolToCoin(_0x477e84){const _0x563b90=_0x2e3eb5;let _0x1cd959;if(_0x477e84[_0x563b90(0x231)]('/'+config['basecoin']))_0x1cd959=_0x477e84[_0x563b90(0x244)]('/'+config[_0x563b90(0x24d)],'');if(_0x477e84[_0x563b90(0x231)](config[_0x563b90(0x24d)]+'/'))_0x1cd959=_0x477e84[_0x563b90(0x244)](config[_0x563b90(0x24d)]+'/','');return _0x1cd959;}async function validateOrders(_0x396f1b=0x0){const _0x1d931b=_0x2e3eb5;let _0x55302d=[],_0x5af06c=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1d931b(0x26b)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x1d931b(0x22c)](_0x2614a0=>{const _0x4c15f0=_0x1d931b;let _0x540aaa=previousCoins[_0x4c15f0(0x1f0)](_0x4dfd36=>_0x4dfd36[_0x4c15f0(0x216)]==symbolToCoin(_0x2614a0[_0x4c15f0(0x20a)])),_0x53bb52=currentCoins['find'](_0x52d90a=>_0x52d90a['coin']==symbolToCoin(_0x2614a0[_0x4c15f0(0x20a)])),_0x4582b2,_0x156980;_0x2614a0[_0x4c15f0(0x2b0)]==_0x4c15f0(0x1fb)&&!_0x2614a0[_0x4c15f0(0x229)]||_0x2614a0[_0x4c15f0(0x2b0)]==_0x4c15f0(0x24f)&&_0x2614a0[_0x4c15f0(0x229)]?(_0x4582b2=_0x540aaa['number']+0.9*_0x2614a0[_0x4c15f0(0x2c7)],_0x156980=_0x540aaa[_0x4c15f0(0x2d4)]+1.1*_0x2614a0['filled']):(_0x4582b2=_0x540aaa['number']-1.1*_0x2614a0['filled'],_0x156980=_0x540aaa[_0x4c15f0(0x2d4)]-0.9*_0x2614a0[_0x4c15f0(0x2c7)]);const _0x542be2=_0x2614a0[_0x4c15f0(0x2c7)]!=0x0&&_0x53bb52[_0x4c15f0(0x2d4)]>=_0x4582b2&&_0x53bb52[_0x4c15f0(0x2d4)]<=_0x156980;_0x55302d[_0x4c15f0(0x1ee)](_0x542be2);if(_0x542be2&&config['ordertype']!=_0x4c15f0(0x297)){if(_0x2614a0[_0x4c15f0(0x229)])logHistory(_0x4c15f0(0x298),_0x4c15f0(0x1fc)+_0x2614a0[_0x4c15f0(0x20a)]+'\x20'+_0x2614a0[_0x4c15f0(0x2b0)]+'\x20#'+formatResult(_0x2614a0[_0x4c15f0(0x2c7)]/_0x2614a0['price'],0x8)+'\x20@'+formatResult(_0x2614a0[_0x4c15f0(0x218)],0x8));else logHistory('order',_0x4c15f0(0x1fc)+_0x2614a0['symbol']+'\x20'+_0x2614a0['side']+'\x20#'+formatResult(_0x2614a0[_0x4c15f0(0x2c7)],0x8)+'\x20@'+formatResult(_0x2614a0[_0x4c15f0(0x218)],0x8));}}),_0x55302d[_0x1d931b(0x22c)]((_0x2b9e7e,_0x2113fd)=>{if(_0x2b9e7e)lastOrders['splice'](_0x2113fd,0x1);});if(_0x396f1b<_0x5af06c&&_0x55302d['includes'](![])){if(_0x396f1b==0x0){config['ordertype']==_0x1d931b(0x297)?logHistory(_0x1d931b(0x26c),_0x1d931b(0x211)):logHistory(_0x1d931b(0x26c),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x396f1b);},0xa*0x3e8);}else{(_0x396f1b==0x1||_0x396f1b==Math[_0x1d931b(0x208)](_0x5af06c/0x2)||_0x396f1b==_0x5af06c-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x396f1b);},validateOrderInterval);}}else{lockOrders=![];if(_0x396f1b>0x0&&!_0x55302d[_0x1d931b(0x231)](![]))config[_0x1d931b(0x2ce)]=='market'?logHistory(_0x1d931b(0x2dc),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory('success','Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x396f1b>0x0&&_0x55302d['includes'](![])&&(config[_0x1d931b(0x2ce)]=='market'?logHistory(_0x1d931b(0x2dc),_0x1d931b(0x2ea)+Math[_0x1d931b(0x208)](_0x5af06c*validateOrderInterval/0xea60)+_0x1d931b(0x217)):(lastOrders[_0x1d931b(0x22c)](async _0x504bdf=>{const _0x15e041=_0x1d931b;try{const _0x19b67=await exchange[_0x15e041(0x2a3)](_0x504bdf[_0x15e041(0x20c)],_0x504bdf[_0x15e041(0x20a)]);}catch(_0x2c0ab7){if(_0x2c0ab7[_0x15e041(0x2f8)]()[_0x15e041(0x231)](_0x15e041(0x24c))){}else await handleError(_0x2c0ab7,'cancelOrder()');}}),logHistory('success',_0x1d931b(0x2ec)+Math[_0x1d931b(0x208)](_0x5af06c*validateOrderInterval/0xea60)+_0x1d931b(0x217))));}}async function resetCoinResults(){const _0x40072e=_0x2e3eb5;dbCoinResults[_0x40072e(0x1fe)](_0x40072e(0x1f7))[_0x40072e(0x284)]()[_0x40072e(0x2b9)]();let _0x2f53c2=await getStartingBalances(![]);_0x2f53c2[_0x40072e(0x1f7)][_0x40072e(0x22c)](_0x3fc1ca=>{const _0x3913f5=_0x40072e,_0x4f383d=_0x3fc1ca[_0x3913f5(0x20a)][_0x3913f5(0x231)](config['basecoin']+'/');if(_0x3fc1ca[_0x3913f5(0x216)]!=config[_0x3913f5(0x24d)]){let _0x4d464e={'coin':_0x3fc1ca['coin'],'number':_0x3fc1ca['number'],'breakeven':_0x3fc1ca[_0x3913f5(0x218)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3913f5(0x1fe)]('coins')[_0x3913f5(0x1ee)](_0x4d464e)['write']();}});}async function updateCoinResults(_0x47433c){const _0x13e5d6=_0x2e3eb5;let _0x2d7d63,_0xdf4ff,_0x5e5715,_0x30d20b,_0x40ddb5,_0x1a04e6,_0xf9bab4=dbCoinResults[_0x13e5d6(0x1fe)](_0x13e5d6(0x1f7))[_0x13e5d6(0x1f0)]({'coin':_0x47433c[_0x13e5d6(0x216)]})[_0x13e5d6(0x2aa)]();if(!_0xf9bab4)return;if(_0x47433c[_0x13e5d6(0x2dd)]&&_0x47433c[_0x13e5d6(0x2dd)][_0x13e5d6(0x20b)]==config[_0x13e5d6(0x24d)])_0x2d7d63=_0x47433c[_0x13e5d6(0x2dd)]['cost'];else{if(_0x47433c[_0x13e5d6(0x2dd)]&&_0x47433c[_0x13e5d6(0x2dd)][_0x13e5d6(0x20b)]==_0x13e5d6(0x269))_0x2d7d63=_0x47433c[_0x13e5d6(0x2dd)][_0x13e5d6(0x2e2)]*global['ticker'][_0x13e5d6(0x269)+config[_0x13e5d6(0x24d)]];else _0x2d7d63=0.001*_0x47433c[_0x13e5d6(0x2c7)];}const _0x5457f4=_0x47433c[_0x13e5d6(0x20a)][_0x13e5d6(0x231)](config['basecoin']+'/');_0x5457f4&&(_0x1a04e6={'coin':_0x47433c[_0x13e5d6(0x216)],'symbol':_0x47433c['symbol'],'filled':_0x47433c[_0x13e5d6(0x2c7)]*_0x47433c[_0x13e5d6(0x218)],'side':_0x47433c['side']=='sell'?_0x13e5d6(0x1fb):'sell','price':0x1/_0x47433c[_0x13e5d6(0x218)]},_0x47433c={..._0x1a04e6});_0x47433c['side']==_0x13e5d6(0x1fb)?_0x5e5715=(_0xf9bab4['breakeven']*_0xf9bab4[_0x13e5d6(0x2d4)]+_0x47433c['price']*_0x47433c[_0x13e5d6(0x2c7)])/(_0xf9bab4[_0x13e5d6(0x2d4)]+_0x47433c[_0x13e5d6(0x2c7)]):_0x5e5715=(_0xf9bab4['breakeven']*_0xf9bab4[_0x13e5d6(0x2d4)]-_0x47433c[_0x13e5d6(0x218)]*_0x47433c[_0x13e5d6(0x2c7)])/(_0xf9bab4[_0x13e5d6(0x2d4)]-_0x47433c[_0x13e5d6(0x2c7)]);_0x47433c[_0x13e5d6(0x2b0)]==_0x13e5d6(0x1fb)?_0x30d20b=_0xf9bab4['realized']:_0x30d20b=_0xf9bab4[_0x13e5d6(0x223)]+(_0x47433c[_0x13e5d6(0x218)]-_0xf9bab4[_0x13e5d6(0x2b1)])*_0x47433c[_0x13e5d6(0x2c7)];_0xdf4ff=_0x47433c[_0x13e5d6(0x2b0)]==_0x13e5d6(0x24f)?_0xf9bab4[_0x13e5d6(0x2d4)]-_0x47433c[_0x13e5d6(0x2c7)]:_0xf9bab4[_0x13e5d6(0x2d4)]+_0x47433c[_0x13e5d6(0x2c7)],_0x40ddb5=(_0x47433c[_0x13e5d6(0x218)]-_0x5e5715)*_0xdf4ff;let _0x44bd01={'coin':_0x47433c[_0x13e5d6(0x216)],'number':_0xdf4ff,'breakeven':formatResult(_0x5e5715,0x8),'realized':formatResult(_0x30d20b,0x8),'unrealized':formatResult(_0x40ddb5,0x8),'fees':formatResult(_0xf9bab4[_0x13e5d6(0x2bb)]+_0x2d7d63,0x8),'sells':_0x47433c[_0x13e5d6(0x2b0)]==_0x13e5d6(0x24f)?_0xf9bab4[_0x13e5d6(0x27c)]+0x1:_0xf9bab4[_0x13e5d6(0x27c)],'buys':_0x47433c[_0x13e5d6(0x2b0)]==_0x13e5d6(0x1fb)?_0xf9bab4[_0x13e5d6(0x215)]+0x1:_0xf9bab4[_0x13e5d6(0x215)]};dbCoinResults[_0x13e5d6(0x1fe)](_0x13e5d6(0x1f7))[_0x13e5d6(0x1f0)]({'coin':_0x47433c[_0x13e5d6(0x216)]})[_0x13e5d6(0x21b)](_0x44bd01)[_0x13e5d6(0x2b9)]();}async function placeOrder(_0x3b0df8){const _0x469989=_0x2e3eb5,_0x37b540=config['ordertype']==_0x469989(0x297)?_0x469989(0x297):_0x469989(0x200);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x469989(0x232)](JSON[_0x469989(0x2e0)](currentCoins));for(const _0x2f1607 of _0x3b0df8){let _0x48b9f2,_0x18a399,_0xfbf2a7,_0x3d29ac,_0x3f319e,_0x5c0529=_0x2f1607[_0x469989(0x20a)];try{const _0x32a7a1=await exchange['fetchTickers'](_0x5c0529),_0x28479f=_0x32a7a1[_0x5c0529];_0x48b9f2=_0x28479f[_0x469989(0x2c9)],_0x18a399=_0x28479f[_0x469989(0x22e)],_0xfbf2a7=_0x28479f['ask'];_0x2f1607[_0x469989(0x229)]?(_0x3d29ac=_0x2f1607[_0x469989(0x2b0)]==_0x469989(0x1fb)?'sell':'buy',_0x3f319e=Math[_0x469989(0x276)](_0x2f1607[_0x469989(0x2bf)])/_0x48b9f2):(_0x3d29ac=_0x2f1607[_0x469989(0x2b0)],_0x3f319e=Math[_0x469989(0x276)](_0x2f1607['trade']));_0x37b540==_0x469989(0x200)&&(config[_0x469989(0x2ce)]==_0x469989(0x2c3)&&(_0x48b9f2=_0x3d29ac==_0x469989(0x1fb)?_0x18a399:_0xfbf2a7),config[_0x469989(0x2ce)]=='limit-low'&&(_0x48b9f2=_0x3d29ac==_0x469989(0x1fb)?_0xfbf2a7:_0x18a399));_0x3f319e=formatResult(_0x3f319e,0x8),_0x48b9f2=formatResult(_0x48b9f2,0x8);const _0x1e44f7=await exchange[_0x469989(0x279)](_0x5c0529,_0x37b540,_0x3d29ac,_0x3f319e,_0x48b9f2);lastOrders[_0x469989(0x1ee)]({'orderId':_0x1e44f7['id'],'symbol':_0x5c0529,'side':_0x3d29ac,'reverse':_0x2f1607[_0x469989(0x229)],'amount':_0x2f1607[_0x469989(0x229)]?_0x1e44f7[_0x469989(0x2e8)]*_0x1e44f7[_0x469989(0x218)]:_0x1e44f7[_0x469989(0x2e8)],'filled':_0x2f1607['reverse']?_0x1e44f7[_0x469989(0x2c7)]*_0x1e44f7['price']:_0x1e44f7['filled'],'price':_0x1e44f7['price']});const _0xbdb67=_0x3d29ac==_0x469989(0x24f)?config[_0x469989(0x242)]?String[_0x469989(0x287)]('0x'+config[_0x469989(0x242)])+'\x20':'':config[_0x469989(0x212)]?String['fromCodePoint']('0x'+config[_0x469989(0x212)])+'\x20':'',_0x4faa3e=_0x37b540==_0x469989(0x297)?_0x469989(0x21c):config[_0x469989(0x2ce)]==_0x469989(0x2c3)?_0x469989(0x27a):'Limit\x20(low-margin)';if(_0x37b540=='market')logHistory(_0x469989(0x298),''+_0xbdb67+_0x4faa3e+_0x469989(0x1f3)+_0x5c0529+'\x20'+_0x3d29ac+'\x20#'+formatResult(_0x1e44f7[_0x469989(0x2c7)],0x8)+'\x20@'+formatResult(_0x1e44f7[_0x469989(0x218)],0x8));else logHistory('order',''+_0xbdb67+_0x4faa3e+_0x469989(0x1f3)+_0x5c0529+'\x20'+_0x3d29ac+'\x20#'+formatResult(_0x1e44f7[_0x469989(0x2e8)],0x8)+'\x20@'+formatResult(_0x1e44f7['price'],0x8));_0x1e44f7[_0x469989(0x216)]=_0x2f1607['coin'],await updateCoinResults(_0x1e44f7);if(config[_0x469989(0x206)]!=0x0){let _0x234fdb=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x234fdb=cooldownTracker[_0x469989(0x2d9)]();const _0x572f32=getTimeStamp();cooldownTracker[_0x469989(0x1ee)](_0x572f32);if(_0x234fdb){const _0x477a4d=fns[_0x469989(0x2a9)](new Date(_0x572f32),new Date(_0x234fdb));_0x477a4d<cooldownInterval&&(logHistory(_0x469989(0x26c),_0x469989(0x1f1)+config[_0x469989(0x206)]+_0x469989(0x236)+cooldownInterval/0x3c+_0x469989(0x201)+cooldownPeriod/(0xe10*0x3e8)+_0x469989(0x20d)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x2e0414){if(_0x2e0414[_0x469989(0x2f8)]()['includes'](_0x469989(0x2fa)))logHistory(_0x469989(0x26c),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5c0529);else{if(_0x2e0414[_0x469989(0x2f8)]()['includes']('Invalid\x20quantity'))logHistory(_0x469989(0x26c),'Order\x20amount\x20is\x20invalid:\x20'+_0x5c0529);else await handleError(_0x2e0414,_0x469989(0x264));}}}if(lastOrders[_0x469989(0x1fd)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config['headless']&&(config[_0x469989(0x2ce)]=='market'?logHistory(_0x469989(0x26c),_0x469989(0x2d6)):logHistory(_0x469989(0x26c),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config['headless']&&logHistory('error',_0x469989(0x1ef)));}}function logHistory(_0x482064,_0x4000ce,_0xf81e08=''){const _0x120af4=_0x2e3eb5;let _0x1ab97f={'time':getTimeStamp(),'type':_0x482064,'event':_0x4000ce,'botname':config[_0x120af4(0x272)],'showname':config[_0x120af4(0x222)]};dbLogs[_0x120af4(0x1fe)](_0x120af4(0x240))['push'](_0x1ab97f)[_0x120af4(0x2b9)]();if(_0xf81e08=='')_0xf81e08=_0x4000ce;proxyEmit(_0x120af4(0x23d),{'log':_0x1ab97f,'summary':_0xf81e08}),process[_0x120af4(0x22a)]({'telegram':_0x1ab97f}),logging(''+_0x1ab97f[_0x120af4(0x23d)]);}function _0x4eda(_0x5a33d4,_0x2e7e56){const _0x3cce6d=_0x4c77();return _0x4eda=function(_0x2a0b51,_0x177a4b){_0x2a0b51=_0x2a0b51-0x1ee;let _0x4c77a2=_0x3cce6d[_0x2a0b51];return _0x4c77a2;},_0x4eda(_0x5a33d4,_0x2e7e56);}function emitHistory(_0x226d42={}){const _0x3255c2=_0x2e3eb5;Object[_0x3255c2(0x255)](_0x226d42)['length']==0x0&&(_0x226d42={'type':[_0x3255c2(0x298),_0x3255c2(0x23d)],'event':'','page':0x1});if(_0x226d42[_0x3255c2(0x1f6)][_0x3255c2(0x231)](_0x3255c2(0x23d)))_0x226d42[_0x3255c2(0x1f6)][_0x3255c2(0x2ca)](_0x226d42[_0x3255c2(0x1f6)][_0x3255c2(0x23a)](_0x3255c2(0x23d)),0x1,'error',_0x3255c2(0x2dc));if(dbLogs['has']('logs')[_0x3255c2(0x2aa)]()){let _0x41e6dd=dbLogs['get']('logs')[_0x3255c2(0x262)](_0x5e66c2=>{const _0x4de602=_0x3255c2;if(_0x226d42['type'][_0x4de602(0x1fd)]==0x0)return![];else return _0x226d42[_0x4de602(0x1f6)][_0x4de602(0x231)](_0x5e66c2[_0x4de602(0x1f6)]);})[_0x3255c2(0x262)](_0x406d83=>{const _0x5f078c=_0x3255c2;if(_0x226d42[_0x5f078c(0x23d)]=='')return!![];else return _0x406d83[_0x5f078c(0x23d)][_0x5f078c(0x280)]()[_0x5f078c(0x231)](_0x226d42['event']['toLowerCase']());})[_0x3255c2(0x2ed)]('time'),_0x4fe738=_0x41e6dd[_0x3255c2(0x2aa)]()[_0x3255c2(0x1fd)];_0x41e6dd=_0x41e6dd[_0x3255c2(0x229)]()[_0x3255c2(0x256)]((_0x226d42[_0x3255c2(0x2e9)]-0x1)*logPageSize,_0x226d42['page']*logPageSize-0x1)[_0x3255c2(0x229)]()['value'](),proxyEmit('event-history',{'logs':_0x41e6dd,'total':_0x4fe738});}else proxyEmit(_0x3255c2(0x290),{'logs':[],'total':0x0});}async function pauseBot(_0x4149d6){const _0x45c0a3=_0x2e3eb5,_0x26c49c=new Date()[_0x45c0a3(0x2bc)]();if(!lastBotPause)lastBotPause=new Date()[_0x45c0a3(0x2bc)](),consecutivePauses=0x1;else{if(_0x26c49c-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x45c0a3(0x22a)]({'stop':_0x45c0a3(0x2f6)});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x45c0a3(0x2bc)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x45c0a3(0x26c),_0x45c0a3(0x2ef)+consecutivePauses+')'),await sleep(_0x4149d6),botPaused=![],reset();}}async function handleError(_0x561152,_0x105961,_0x186147=''){const _0x123ee3=_0x2e3eb5;if(_0x561152[_0x123ee3(0x2f8)]()[_0x123ee3(0x231)](_0x123ee3(0x2c5)))logHistory('error',_0x105961+_0x123ee3(0x21a)),await pauseBot(pauseBotInterval);else{if(_0x561152[_0x123ee3(0x2f8)]()[_0x123ee3(0x231)]('ExchangeNotAvailable'))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x2d5)),await pauseBot(pauseBotInterval);else{if(_0x561152[_0x123ee3(0x2f8)]()['includes']('RequestTimeout'))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x210)),await pauseBot(pauseBotInterval);else{if(_0x561152[_0x123ee3(0x2f8)]()[_0x123ee3(0x231)](_0x123ee3(0x2cb)))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x2c1)),logHistory(_0x123ee3(0x26c),_0x123ee3(0x2db)),process[_0x123ee3(0x22a)]({'stop':_0x123ee3(0x2a5)});else{if(_0x561152[_0x123ee3(0x2f8)]()[_0x123ee3(0x231)](_0x123ee3(0x247)))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x2d3)),logHistory(_0x123ee3(0x26c),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x123ee3(0x2a5)});else{if(_0x561152[_0x123ee3(0x2f8)]()[_0x123ee3(0x231)](_0x123ee3(0x271)))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x2da)),logHistory(_0x123ee3(0x26c),_0x123ee3(0x2db)),process['send']({'stop':'kill'});else{if(_0x561152['toString']()[_0x123ee3(0x231)](_0x123ee3(0x214)))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x252)),logHistory(_0x123ee3(0x26c),_0x123ee3(0x2db)),process['send']({'stop':_0x123ee3(0x2a5)});else{if(_0x561152['toString']()[_0x123ee3(0x231)](_0x123ee3(0x233)))logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x27e)),await pauseBot(pauseBotInterval),process[_0x123ee3(0x22a)]({'stop':_0x123ee3(0x2f6)});else _0x561152[_0x123ee3(0x2f8)]()['includes']('InsufficientFunds')?logHistory(_0x123ee3(0x26c),_0x105961+_0x123ee3(0x2af)):(logHistory('error',_0x105961+_0x123ee3(0x28c)),logging(_0x105961+_0x123ee3(0x23c),_0x561152),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x13c3b0,_0x458488){return parseFloat(_0x13c3b0['toFixed'](_0x458488));}function logging(_0x3d3cd6,_0x9e399f=''){const _0x58082c=_0x2e3eb5;if(config['showname'])console['log'](getTimeStamp()+':\x20'+config[_0x58082c(0x272)]+_0x58082c(0x2c0)+_0x3d3cd6,_0x9e399f);else console[_0x58082c(0x28e)](getTimeStamp()+':\x20Bot\x20'+botID+_0x58082c(0x2c0)+_0x3d3cd6,_0x9e399f);}function getServerTime(){const _0x31e500=_0x2e3eb5,_0x5125ed=new Date();return _0x5125ed[_0x31e500(0x2ad)]()+'/'+(_0x5125ed[_0x31e500(0x2a4)]()+0x1)[_0x31e500(0x2f8)]()[_0x31e500(0x213)](0x2,'0')+'/'+_0x5125ed[_0x31e500(0x20f)]()[_0x31e500(0x2f8)]()[_0x31e500(0x213)](0x2,'0')+'\x20'+_0x5125ed['getHours']()[_0x31e500(0x2f8)]()[_0x31e500(0x213)](0x2,'0')+':'+_0x5125ed[_0x31e500(0x250)]()[_0x31e500(0x2f8)]()[_0x31e500(0x213)](0x2,'0')+':'+_0x5125ed['getSeconds']()[_0x31e500(0x2f8)]()[_0x31e500(0x213)](0x2,'0');}function getTimeStamp(){const _0x5e0a30=_0x2e3eb5,_0x56ee6b=shiftedTime();return _0x56ee6b[_0x5e0a30(0x2ad)]()+'/'+(_0x56ee6b['getMonth']()+0x1)[_0x5e0a30(0x2f8)]()['padStart'](0x2,'0')+'/'+_0x56ee6b[_0x5e0a30(0x20f)]()['toString']()[_0x5e0a30(0x213)](0x2,'0')+'\x20'+_0x56ee6b[_0x5e0a30(0x289)]()[_0x5e0a30(0x2f8)]()[_0x5e0a30(0x213)](0x2,'0')+':'+_0x56ee6b['getMinutes']()[_0x5e0a30(0x2f8)]()[_0x5e0a30(0x213)](0x2,'0')+':'+_0x56ee6b['getSeconds']()[_0x5e0a30(0x2f8)]()[_0x5e0a30(0x213)](0x2,'0');}function getDate(){const _0x58ef19=_0x2e3eb5,_0x15cc78=shiftedTime();return _0x15cc78[_0x58ef19(0x2ad)]()+'/'+(_0x15cc78[_0x58ef19(0x2a4)]()+0x1)['toString']()[_0x58ef19(0x213)](0x2,'0')+'/'+_0x15cc78[_0x58ef19(0x20f)]()[_0x58ef19(0x2f8)]()[_0x58ef19(0x213)](0x2,'0');}function getHour(){const _0x2ff657=_0x2e3eb5,_0x53d121=shiftedTime();return _0x53d121[_0x2ff657(0x289)]()[_0x2ff657(0x2f8)]()[_0x2ff657(0x213)](0x2,'0');}function sleep(_0x569de8){return new Promise(_0x341c44=>setTimeout(_0x341c44,_0x569de8));}function shiftedTime(){const _0x2438cb=_0x2e3eb5,_0x4a6aa9=new Date();let _0x4f48bf=_0x4a6aa9;if(config&&config[_0x2438cb(0x21f)]!==0x0)_0x4f48bf=fns['add'](_0x4a6aa9,{'hours':config[_0x2438cb(0x21f)]});return _0x4f48bf;}