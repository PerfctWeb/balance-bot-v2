const _0x23db89=_0x277e;(function(_0x2ff932,_0x4f64a7){const _0x353fe8=_0x277e,_0xd01679=_0x2ff932();while(!![]){try{const _0x4aeeec=-parseInt(_0x353fe8(0x1dd))/0x1*(parseInt(_0x353fe8(0x15c))/0x2)+-parseInt(_0x353fe8(0xaf))/0x3+-parseInt(_0x353fe8(0x1f4))/0x4+parseInt(_0x353fe8(0xc9))/0x5+parseInt(_0x353fe8(0x1b4))/0x6+parseInt(_0x353fe8(0xf5))/0x7*(parseInt(_0x353fe8(0xc8))/0x8)+-parseInt(_0x353fe8(0x1da))/0x9;if(_0x4aeeec===_0x4f64a7)break;else _0xd01679['push'](_0xd01679['shift']());}catch(_0xe55b90){_0xd01679['push'](_0xd01679['shift']());}}}(_0x206e,0x7eca7));const _0x21a21f=function(){let _0x1af3fe=!![];return function(_0x1e1792,_0x158d62){const _0x519266=_0x1af3fe?function(){const _0x4aa5f8=_0x277e;if(_0x158d62){const _0x439b0c=_0x158d62[_0x4aa5f8(0x93)](_0x1e1792,arguments);return _0x158d62=null,_0x439b0c;}}:function(){};return _0x1af3fe=![],_0x519266;};}(),_0x22339a=_0x21a21f(this,function(){const _0x55cf30=_0x277e;return _0x22339a[_0x55cf30(0x214)]()['search']('(((.+)+)+)+$')[_0x55cf30(0x214)]()[_0x55cf30(0x1e4)](_0x22339a)[_0x55cf30(0x1a8)](_0x55cf30(0x18c));});_0x22339a();'use strict';const ccxt=require('ccxt'),low=require(_0x23db89(0x100)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x23db89(0x1a1)),Crypt=require(_0x23db89(0x119))[_0x23db89(0x137)],util=require('util'),argv=require(_0x23db89(0x143))(process[_0x23db89(0x123)][_0x23db89(0x117)](0x2))[_0x23db89(0x123)],path=require(_0x23db89(0x1c0));let exchange;global['ticker']={},global[_0x23db89(0xbd)]={};const usdBasecoins=[_0x23db89(0x156),_0x23db89(0x190),'TUSD',_0x23db89(0x186),_0x23db89(0x140),_0x23db89(0x146)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x23db89(0x173)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x23db89(0x16d)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x23db89(0xab)+pauseBotInterval/0xea60+_0x23db89(0x21e),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x23db89(0x1b6))[_0x23db89(0x1bd)],botID=process[_0x23db89(0x123)][0x2]||_0x23db89(0xdb),pattern=/^[0-9]{3}$/;!pattern[_0x23db89(0x1a7)](botID)&&(console[_0x23db89(0x13a)]('Error:\x20Invalid\x20argument\x20'+botID+_0x23db89(0xf7)),killBot());const userID=process[_0x23db89(0x123)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x23db89(0x10c),logspath=userID?_0x23db89(0x16a)+userID+'/':_0x23db89(0x16a),loggerfile=fs['createWriteStream'](logspath+_0x23db89(0x161),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x23db89(0xf8)](configpath);!fs[_0x23db89(0x223)](logspath)&&fs[_0x23db89(0xf8)](logspath);const configfile=configpath+_0x23db89(0x14b)+botID+_0x23db89(0x1f9),logfile=configpath+'bot-'+botID+_0x23db89(0x211),performancefile=configpath+_0x23db89(0x14b)+botID+_0x23db89(0x20d),coinresultsfile=configpath+'bot-'+botID+_0x23db89(0x98),settingsfile=configpath+_0x23db89(0xf2),securefile=configpath+_0x23db89(0x120),configbackuppath=configpath+_0x23db89(0x1bc),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x23db89(0x1e3)]({'logs':[],'version':serverversion})[_0x23db89(0x95)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x23db89(0x95)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x23db89(0x1e3)]({'bot':[],'version':serverversion})[_0x23db89(0x95)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x23db89(0x1e3)]({'coins':[],'version':serverversion})[_0x23db89(0x95)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x23db89(0x17c),'rsaStandard':_0x23db89(0x1e5)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0xe18733=>{const _0x23562b=_0x23db89;console[_0x23562b(0x13a)](_0xe18733);},'simple':_0x1e4e68=>{const _0x57ee48=_0x23db89;console[_0x57ee48(0x13a)](_0x1e4e68),loggerfile[_0x57ee48(0x95)](util[_0x57ee48(0xe0)](_0x1e4e68)+'\x0a');},'full':async(_0x549ca3,_0x3570df='')=>{const _0x30aef3=_0x23db89;let _0x1c6a3a;if(config['showname'])_0x1c6a3a=getTimeStamp()+':\x20'+config[_0x30aef3(0xa2)]+_0x30aef3(0x153)+_0x549ca3;else _0x1c6a3a=getTimeStamp()+_0x30aef3(0x102)+botID+_0x30aef3(0x153)+_0x549ca3;console['log'](_0x1c6a3a),loggerfile[_0x30aef3(0x95)](util[_0x30aef3(0xe0)](_0x1c6a3a)+'\x0a'),_0x3570df&&(console[_0x30aef3(0x13a)](_0x3570df),loggerfile['write'](util['format'](_0x3570df)+'\x0a'));},'debug':async(_0x238410,_0x46a7b7='')=>{const _0x39ea02=_0x23db89;let _0x3f6d10;if(config[_0x39ea02(0x180)])_0x3f6d10=getTimeStamp()+':\x20'+config[_0x39ea02(0xa2)]+_0x39ea02(0x1bb)+_0x238410;else _0x3f6d10=getTimeStamp()+_0x39ea02(0x102)+botID+_0x39ea02(0x1bb)+_0x238410;if(debugging)console['log'](_0x3f6d10);loggerfile[_0x39ea02(0x95)](util['format'](_0x3f6d10)+'\x0a');if(_0x46a7b7){if(debugging)console[_0x39ea02(0x13a)](_0x46a7b7);loggerfile[_0x39ea02(0x95)](util[_0x39ea02(0xe0)](_0x46a7b7)+'\x0a');}}};process['on'](_0x23db89(0xb9),function(_0x1d0760){const _0x1d2aca=_0x23db89;logHistory(_0x1d2aca(0xb4),_0x1d2aca(0x9b)),logger[_0x1d2aca(0xdc)](_0x1d2aca(0x139),_0x1d0760);});settings[_0x23db89(0x1ff)]!=config[_0x23db89(0x1ff)]&&updateTimeshift(settings[_0x23db89(0x1ff)]);settings[_0x23db89(0x171)]!=config[_0x23db89(0x171)]&&updateOnepagemode(settings['onepagemode']);process[_0x23db89(0x108)]({'started':'running'},_0x29c18b=>{}),initializeProcessListeners();function proxyEmit(_0x7c09da,_0x481906=null){const _0x352a84=_0x23db89;process[_0x352a84(0x108)]({'function':_0x7c09da,'args':_0x481906},_0x557e09=>{});}function initializeProcessListeners(){process['on']('message',_0x55e313=>{const _0x4166dd=_0x277e;switch(Object[_0x4166dd(0x1a4)](_0x55e313)[0x0]){case'timeshift':_0x55e313[_0x4166dd(0x1ff)]!=undefined&&(settings[_0x4166dd(0x1ff)]=_0x55e313[_0x4166dd(0x1ff)],updateTimeshift(settings[_0x4166dd(0x1ff)]));break;case'onepagemode':_0x55e313[_0x4166dd(0x171)]!=undefined&&(settings[_0x4166dd(0x171)]=_0x55e313['onepagemode'],updateOnepagemode(settings['onepagemode']));break;case'bots':_0x55e313[_0x4166dd(0x1a6)]!=undefined&&(bots=JSON[_0x4166dd(0xfa)](_0x55e313[_0x4166dd(0x1a6)]),proxyEmit(_0x4166dd(0x1a6),bots));break;case _0x4166dd(0x1b3):switch(_0x55e313['function']){case _0x4166dd(0xed):initclient();break;case _0x4166dd(0x219):toggleBotMode();break;case _0x4166dd(0x14d):emitHistory(_0x55e313[_0x4166dd(0x1ef)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x55e313[_0x4166dd(0x1ef)]);break;case _0x4166dd(0x1ec):getPortfolio(_0x55e313[_0x4166dd(0x1ef)]);break;case _0x4166dd(0xc1):storeConfiguration(_0x55e313['args']);break;case _0x4166dd(0x92):storeHeadless(_0x55e313[_0x4166dd(0x1ef)]);break;case'storeFiat':storeFiat(_0x55e313[_0x4166dd(0x1ef)]);break;case'resetHistory':resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x4166dd(0x144):placeOrder(_0x55e313['args']);break;case _0x4166dd(0x216):cancelLoading();break;case'showConfig':showConfig();break;case _0x4166dd(0xa8):sendMetricsTelegram();break;case _0x4166dd(0xf6):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x215291=![]){const _0x30021a=_0x23db89;logger['debug']('Reset\x20|\x20'+(_0x215291?'exchange\x20reloaded':'exchange\x20not\x20reloaded')+_0x30021a(0x111)+config[_0x30021a(0x162)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x215291)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x30021a(0xf0)]!=''&&config[_0x30021a(0xf0)]!='***'){loadingProgress=0x0;if(_0x215291){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2212d6){handleErrorNoStop(_0x2212d6,_0x30021a(0xac));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x2e9b38=await getCoins();[currentCoins,currentCoinsAll]=_0x2e9b38,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x30021a(0xdc)](_0x30021a(0x1d1)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x30021a(0x177)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xdabb80=_0x23db89;exchangeStopped=!![];try{await exchange[_0xdabb80(0x204)]();}catch(_0x19fd02){await handleError(_0x19fd02,_0xdabb80(0x221));}}async function reloadExchange(){const _0x31d881=_0x23db89;while(lockOrders!=ORDERS[_0x31d881(0x16d)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x31d881(0xdc)](_0x31d881(0x9d)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3244d1=config[_0x23db89(0x162)],_0x5e229d=config[_0x23db89(0xf0)],_0x897fe5=config[_0x23db89(0x18a)],_0x1883b8=config[_0x23db89(0x9c)]){const _0xbe5281=_0x23db89;exchange&&await stopExchange();!supportedExchanges()[_0xbe5281(0x188)](_0x3244d1)&&(logHistory('error',_0xbe5281(0x1ad)+_0x3244d1+_0xbe5281(0x134)),killBot());const _0xc311bc=ccxt[_0xbe5281(0x209)][_0x3244d1[_0xbe5281(0x1a9)]()];exchange=new _0xc311bc({'apiKey':_0x5e229d,'secret':_0x897fe5,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xbe5281(0xa6)}});if(_0x1883b8)exchange[_0xbe5281(0xd6)]=_0x1883b8;}function setStableCoins(){const _0x4a79d3=_0x23db89;let _0x605a78=config[_0x4a79d3(0x147)]==_0x4a79d3(0x1ee)?_0x4a79d3(0x1ee):'BTC',_0x5a3e57=!allSymbols[_0x4a79d3(0x188)](_0x605a78+_0x4a79d3(0x172))?_0x4a79d3(0x186):_0x4a79d3(0x156),_0x5801a=!allSymbols['includes'](_0x605a78+_0x4a79d3(0x227))?_0x5a3e57:_0x4a79d3(0x158);stablecoins={'eur':{'coin':''+_0x605a78+_0x5801a,'symbol':_0x605a78+'/'+_0x5801a},'usd':{'coin':''+_0x605a78+_0x5a3e57,'symbol':_0x605a78+'/'+_0x5a3e57}};}async function initwsCcxt(){const _0xa63ec0=_0x23db89;initCycle++;const _0x2dac24=initCycle;let _0xa793a0=[];config[_0xa63ec0(0x202)][_0xa63ec0(0x159)](_0x3fdbb8=>{const _0x333c39=_0xa63ec0;if(!_0x3fdbb8[_0x333c39(0x168)]&&_0x3fdbb8[_0x333c39(0xdf)]!=config['basecoin'])_0xa793a0[_0x333c39(0xe3)](_0x3fdbb8['symbol']);});if(!_0xa793a0['includes'](stablecoins[_0xa63ec0(0xae)]['symbol']))_0xa793a0[_0xa63ec0(0xe3)](stablecoins['eur'][_0xa63ec0(0xc0)]);if(!_0xa793a0['includes'](stablecoins[_0xa63ec0(0xc5)][_0xa63ec0(0xc0)]))_0xa793a0[_0xa63ec0(0xe3)](stablecoins[_0xa63ec0(0xc5)][_0xa63ec0(0xc0)]);if(config[_0xa63ec0(0x162)][_0xa63ec0(0x1c8)](_0xa63ec0(0x152))){if(!_0xa793a0[_0xa63ec0(0x188)](_0xa63ec0(0xf9)+config[_0xa63ec0(0x147)]))_0xa793a0[_0xa63ec0(0xe3)](_0xa63ec0(0xf9)+config[_0xa63ec0(0x147)]);}loadCoins(_0xa793a0),_0xa793a0=validateSymbols(_0xa793a0);const _0x47ba2e=async _0x41ff63=>{const _0x2f65ca=_0xa63ec0;let _0x2827ad;try{const _0xc6f180=await getTickers(_0x41ff63);Object[_0x2f65ca(0x126)](_0xc6f180)[_0x2f65ca(0x159)](_0x23d7b4=>{const _0x5474c4=_0x2f65ca;_0x2827ad=_0x23d7b4[0x1]['symbol'],global[_0x5474c4(0x101)][noslash(_0x2827ad)]=_0x23d7b4[0x1][_0x5474c4(0x1d0)],global[_0x5474c4(0xbd)][_0x2827ad]=_0x23d7b4[0x1]['percentage'];});}catch(_0x3a7bfb){await handleError(_0x3a7bfb,_0x2f65ca(0x145),_0x2827ad);}},_0x556a4a=async _0x1f8a4a=>{const _0x39a46f=_0xa63ec0;while(initCycle==_0x2dac24){if(!botPaused)try{const _0xcca693=await exchange[_0x39a46f(0x9e)](_0x1f8a4a);global[_0x39a46f(0x101)][noslash(_0xcca693[0x0][_0x39a46f(0xc0)])]=_0xcca693[0x0]['price'],await sleep(0x3e8);}catch(_0x263fdb){if(!exchangeStopped)await handleError(_0x263fdb,_0x39a46f(0xf3),_0x1f8a4a);}else await sleep(0x64);}},_0xb95cd1=async _0x4e711f=>{const _0x2cc475=_0xa63ec0;while(initCycle==_0x2dac24){if(!botPaused){let _0x4cf4ee;try{await sleep(0x3c*0x3e8);const _0x3f770d=await getTickers(_0x4e711f);Object['entries'](_0x3f770d)[_0x2cc475(0x159)](_0x3dbefa=>{const _0x1c704e=_0x2cc475;_0x4cf4ee=_0x3dbefa[0x1][_0x1c704e(0xc0)],global[_0x1c704e(0xbd)][_0x4cf4ee]=_0x3dbefa[0x1][_0x1c704e(0x1ba)];});}catch(_0x227a13){if(!exchangeStopped)await handleError(_0x227a13,_0x2cc475(0x19e),_0x4cf4ee);}}else await sleep(0x64);}},_0x24746e=async _0x497ced=>{const _0xbd296a=_0xa63ec0;while(initCycle==_0x2dac24){if(!botPaused)try{const _0x428ba6=await exchange[_0xbd296a(0xf1)](_0x497ced);initCycle==_0x2dac24&&_0x428ba6['forEach'](_0x5bbd87=>{updateNumberCoinsCcxt(_0x5bbd87);});}catch(_0xa2a9a){if(!exchangeStopped)await handleError(_0xa2a9a,_0xbd296a(0x195));}else await sleep(0x64);}};_0x47ba2e(_0xa793a0),_0xb95cd1(_0xa793a0),_0xa793a0[_0xa63ec0(0x159)](_0x11093b=>{_0x556a4a(_0x11093b),_0x24746e(_0x11093b);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x1778bc){const _0x2fc5d7=_0x23db89;let _0x2f836e={};try{if(config['exchange']!=_0x2fc5d7(0x213))_0x2f836e=await exchange[_0x2fc5d7(0xb3)](_0x1778bc);else for(const _0x2efe69 of _0x1778bc){const _0x31de70=await exchange[_0x2fc5d7(0x21b)](_0x2efe69);_0x2f836e[_0x2efe69]=_0x31de70;}return _0x2f836e;}catch(_0x39534c){throw _0x39534c;}}async function watchTransactions(){const _0x4c1024=_0x23db89;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2efebb=await getCoins(),[_0x2edcf8,_0x328b55]=_0x2efebb;let _0x505d23=[];currentCoins[_0x4c1024(0x159)](_0x2d59e6=>{const _0x392154=_0x4c1024,_0x2cb637=_0x2edcf8[_0x392154(0xce)](_0x4759a7=>_0x4759a7['coin']==_0x2d59e6[_0x392154(0xdf)]);if(_0x2cb637){if(_0x2d59e6[_0x392154(0xc2)]!=_0x2cb637['number']){let _0x4e599c;if(_0x2d59e6[_0x392154(0xdf)]!=config[_0x392154(0x147)]){const _0x2d28b3=global[_0x392154(0x101)][noslash(_0x2d59e6[_0x392154(0xc0)])];_0x4e599c=_0x2d59e6[_0x392154(0x181)]?0x1/_0x2d28b3:_0x2d28b3;}else _0x4e599c=0x1;_0x505d23[_0x392154(0xe3)]({'coin':_0x2d59e6['coin'],'symbol':_0x2d59e6['symbol'],'price':_0x4e599c,'number':Number(formatResult(_0x2cb637[_0x392154(0xc2)]-_0x2d59e6[_0x392154(0xc2)],0x8)),'basecoinvalue':_0x4e599c*(_0x2cb637[_0x392154(0xc2)]-_0x2d59e6[_0x392154(0xc2)])});}}});if(_0x505d23[_0x4c1024(0x177)]==0x1&&!blockTransactionDetection){if(config[_0x4c1024(0x19c)]){logger[_0x4c1024(0xdc)](_0x4c1024(0xd2)+_0x505d23[0x0][_0x4c1024(0x14e)]+_0x4c1024(0x15f)+lastFees['highest']);if(lastFees[_0x4c1024(0x19d)]==0x0||Math[_0x4c1024(0x1f5)](_0x505d23[0x0][_0x4c1024(0x14e)])>lastFees[_0x4c1024(0x19d)]){delete _0x505d23[0x0]['symbol'],delete _0x505d23[0x0][_0x4c1024(0x14e)];let _0x3228b8=[],_0x2bb3e6=[...config[_0x4c1024(0x194)]]||[],_0xf2b16a=config[_0x4c1024(0x194)];_0x2bb3e6[_0x4c1024(0x225)]((_0x13f5f0,_0x4f9df0)=>_0x13f5f0[_0x4c1024(0x12a)]>_0x4f9df0[_0x4c1024(0x12a)]?-0x1:_0x4f9df0[_0x4c1024(0x12a)]>_0x13f5f0['date']?0x1:0x0);const _0x32db4b=getDate();if(_0x2bb3e6[0x0]){const _0x486ea5=fns[_0x4c1024(0xfa)](_0x2bb3e6[0x0][_0x4c1024(0x12a)],_0x4c1024(0xe9),new Date()),_0x352f10=fns[_0x4c1024(0xfa)](_0x32db4b,'yyyy/MM/dd',new Date());if(fns[_0x4c1024(0xb1)](_0x486ea5,_0x352f10)){_0x3228b8=_0x2bb3e6[0x0]['changes'];const _0x46ad18=_0x3228b8[_0x4c1024(0xce)](_0x3ce9be=>_0x3ce9be['coin']==_0x505d23[0x0][_0x4c1024(0xdf)]);_0x46ad18?(_0x46ad18[_0x4c1024(0xc2)]+=_0x505d23[0x0][_0x4c1024(0xc2)],_0x46ad18[_0x4c1024(0xc2)]==0x0&&(_0x3228b8=_0x3228b8[_0x4c1024(0x165)](_0x5156de=>{const _0x250a4f=_0x4c1024;return _0x5156de[_0x250a4f(0xdf)]!=_0x505d23[0x0][_0x250a4f(0xdf)];}))):_0x3228b8[_0x4c1024(0xe3)](_0x505d23[0x0]);const _0xd8a923=_0xf2b16a[_0x4c1024(0xce)](_0x321343=>_0x321343[_0x4c1024(0x12a)]==_0x32db4b);_0xd8a923['changes']=_0x3228b8;}else _0xf2b16a[_0x4c1024(0xe3)]({'date':_0x32db4b,'changes':[_0x505d23[0x0]]});}const _0x1e69e1=_0xf2b16a[_0x4c1024(0xce)](_0x4137d9=>_0x4137d9['date']==_0x32db4b);if(_0x1e69e1){let _0x39fe4d=!![];_0x1e69e1[_0x4c1024(0x1fe)]['forEach'](_0x535afc=>{const _0x28573b=_0x4c1024;if(_0x535afc[_0x28573b(0xc2)]!=0x0)_0x39fe4d=![];}),_0x39fe4d&&(_0xf2b16a=_0xf2b16a['filter'](_0x2358b7=>{const _0xc46cbf=_0x4c1024;return _0x2358b7[_0xc46cbf(0x12a)]!=_0x32db4b;}));}let _0x3601af=dbConfig[_0x4c1024(0xea)](_0x4c1024(0x1be))[_0x4c1024(0xce)]({'botID':botID})[_0x4c1024(0xd8)]();_0x3601af&&(dbConfig[_0x4c1024(0xea)](_0x4c1024(0x1be))[_0x4c1024(0xce)]({'botID':botID})['assign']({'liquidity':_0xf2b16a})[_0x4c1024(0x95)](),config[_0x4c1024(0x194)]=_0xf2b16a),logHistory(_0x4c1024(0x1d7),_0x4c1024(0x1fb)+Math['abs'](_0x505d23[0x0]['number'])+'\x20'+_0x505d23[0x0]['coin']+'\x20'+(_0x505d23[0x0][_0x4c1024(0xc2)]>0x0?'added':_0x4c1024(0x16f))+_0x4c1024(0x1f0)),proxyEmit(_0x4c1024(0x192),emittedConfiguration());}else logger[_0x4c1024(0xdc)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x505d23[0x0][_0x4c1024(0xc2)])+'\x20'+_0x505d23[0x0][_0x4c1024(0xdf)]+'\x20'+(_0x505d23[0x0]['number']>0x0?_0x4c1024(0x14f):_0x4c1024(0x16f)));transactionDetected=!![];}else logger[_0x4c1024(0xdc)](_0x4c1024(0x1fb)+Math[_0x4c1024(0x1f5)](_0x505d23[0x0][_0x4c1024(0xc2)])+'\x20'+_0x505d23[0x0][_0x4c1024(0xdf)]+'\x20'+(_0x505d23[0x0][_0x4c1024(0xc2)]>0x0?_0x4c1024(0x14f):_0x4c1024(0x16f))+_0x4c1024(0x127));}currentCoins=_0x2edcf8,currentCoinsAll=_0x328b55,await sleep(watchTransactionsInterval);}catch(_0x132f3e){if(!exchangeStopped)await handleError(_0x132f3e,_0x4c1024(0x175));}else await sleep(0x64);}}async function loadSymbols(){const _0x112cb5=_0x23db89;try{markets=await exchange[_0x112cb5(0xd0)](),allSymbols=[],Object[_0x112cb5(0x126)](markets)['forEach'](_0x9e43e5=>{const _0x78d8a5=_0x112cb5;_0x9e43e5[0x1]['active']&&_0x9e43e5[0x1][_0x78d8a5(0xa6)]&&allSymbols[_0x78d8a5(0xe3)](_0x9e43e5[0x0]);});}catch(_0x2bd76c){throw _0x2bd76c;}}function validateSymbols(_0x3afb2e){const _0x43583e=_0x23db89;let _0x2c005f=[];return _0x3afb2e[_0x43583e(0x159)](_0x31cf6e=>{const _0x311751=_0x43583e;!allSymbols[_0x311751(0x188)](_0x31cf6e)?logHistory(_0x311751(0xb4),_0x311751(0x14a)+_0x31cf6e+'\x20-\x20exclude\x20coin\x20in\x20the\x20configuration'):_0x2c005f[_0x311751(0xe3)](_0x31cf6e);}),_0x2c005f;}async function initclient(){const _0x5214dc=_0x23db89;proxyEmit(_0x5214dc(0x192),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xff4f29=getNormalizedPerformance();emitPerformance(_0xff4f29),getStartingBalances(_0xff4f29);}async function toggleBotMode(){const _0x11475b=_0x23db89;let _0x4122e1=dbConfig['get'](_0x11475b(0x1be))[_0x11475b(0xce)]({'botID':botID})['value']();if(_0x4122e1){const _0xcecdf1=!_0x4122e1[_0x11475b(0x11c)];dbConfig[_0x11475b(0xea)]('bot')[_0x11475b(0xce)]({'botID':botID})[_0x11475b(0x167)]({'headless':_0xcecdf1})['write'](),config[_0x11475b(0x11c)]=_0xcecdf1,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x357242=_0x23db89;process[_0x357242(0x108)]({'updatebotmanager':!![]},_0x5d15c1=>{}),logger[_0x357242(0xdc)](_0x357242(0x1de)+config[_0x357242(0x11c)]);}async function loadCoins(_0xe13be8){const _0x5d9e13=_0x23db89;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x3ea3e6,_0x3820bf=0x0,_0x141f86=0x0;_0xe13be8['forEach'](_0x1f12c4=>{const _0x1e0061=_0x277e;loading[_0x1e0061(0x170)][_0x1e0061(0xe3)](_0x1f12c4);}),loadingCanceled=![];let _0x495568=![];while(_0x3ea3e6!=_0xe13be8[_0x5d9e13(0x177)]+maxLoadingProgress){_0x3ea3e6=loadingProgress,_0xe13be8['forEach'](_0x39c6a5=>{const _0xfa8ce8=_0x5d9e13;if(global[_0xfa8ce8(0x101)][noslash(_0x39c6a5)]){loading[_0xfa8ce8(0x170)]=loading['remainingSymbols'][_0xfa8ce8(0x165)](_0x1f76fb=>_0x1f76fb!=_0x39c6a5);if(!watchedSymbols['includes'](_0x39c6a5))watchedSymbols[_0xfa8ce8(0xe3)](_0x39c6a5);_0x3ea3e6++;}}),loading['progress']=Math[_0x5d9e13(0x9a)](_0x3ea3e6/(_0xe13be8[_0x5d9e13(0x177)]+maxLoadingProgress)*0x64);loading[_0x5d9e13(0x1c6)]!=0x64&&(_0x141f86>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x141f86>0x78*0x5&&!_0x495568&&(_0x495568=!![],logHistory(_0x5d9e13(0xb4),_0x5d9e13(0x1eb)+loading[_0x5d9e13(0x170)]['join'](',\x20')+_0x5d9e13(0x1d5)),logHistory(_0x5d9e13(0xb4),_0x5d9e13(0x13b)+loadCoinsRetryInterval/0xea60+_0x5d9e13(0x185)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x344424=_0x5d9e13;process[_0x344424(0x108)]({'stop':_0x344424(0x104)},_0x208939=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5d9e13(0x164)]=!![],emitLoadingProgress();break;}else _0x3820bf!=loading[_0x5d9e13(0x1c6)]&&(_0x3820bf=loading[_0x5d9e13(0x1c6)],emitLoadingProgress()),_0x141f86++,await sleep(0xc8);}_0x3ea3e6==_0xe13be8[_0x5d9e13(0x177)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x5d9e13(0x1fd),'live':_0x5d9e13(0xfd)},_0x41078c=>{}),_0x495568&&logHistory('success',_0x5d9e13(0x11a)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x471b7f=_0x23db89;proxyEmit(_0x471b7f(0x192),{...emittedConfiguration(),'configstate':_0x471b7f(0xd5)});}function emitLoadingProgress(){const _0x4eedab=_0x23db89;proxyEmit(_0x4eedab(0x112),loading);}async function getFiat(){const _0x486cd9=_0x23db89;let _0x5e160e=global['ticker'][stablecoins[_0x486cd9(0xae)][_0x486cd9(0xdf)]],_0x3379ef=global[_0x486cd9(0x101)][stablecoins[_0x486cd9(0xc5)][_0x486cd9(0xdf)]];return{'eur':Number(_0x5e160e),'usd':Number(_0x3379ef)};}function capitalize(_0x3b95c1){const _0x2f8043=_0x23db89;return _0x3b95c1['substring'](0x0,0x1)[_0x2f8043(0x1a2)]()+_0x3b95c1[_0x2f8043(0xee)](0x1);}function supportedExchanges(){const _0x2bdec0=_0x23db89,_0x95b759=['ws',_0x2bdec0(0xb3),'fetchTicker','watchTrades',_0x2bdec0(0xf1),_0x2bdec0(0x12f),_0x2bdec0(0xe6),_0x2bdec0(0x15b),'fetchClosedOrders',_0x2bdec0(0x109)];let _0xba3c79=[],_0x2b752e=[],_0x192aa8=ccxt[_0x2bdec0(0x209)]['exchanges'];_0x192aa8['forEach'](_0x1d5d8c=>{const _0x55946c=_0x2bdec0;try{const _0x3f0999=new ccxt[(_0x55946c(0x209))][_0x1d5d8c]();_0x2b752e[_0x55946c(0xe3)](_0x3f0999);}catch(_0x16b5c8){}}),_0x2b752e[_0x2bdec0(0x159)](_0x3b460d=>{const _0x357142=_0x2bdec0;let _0x23a115=0x0;_0x95b759[_0x357142(0x159)](_0x569df3=>{const _0x117bf6=_0x357142;_0x569df3 in _0x3b460d[_0x117bf6(0x19f)]&&_0x3b460d['has'][_0x569df3]&&_0x23a115++;}),_0x23a115==_0x95b759[_0x357142(0x177)]&&_0xba3c79[_0x357142(0xe3)](capitalize(_0x3b460d['id']));});let _0x24393f=[];return _0x192aa8[_0x2bdec0(0x159)](_0x7d998c=>{const _0x1665ca=_0x2bdec0;_0x7d998c=capitalize(_0x7d998c);if(!_0xba3c79[_0x1665ca(0x188)](_0x7d998c))_0x24393f[_0x1665ca(0xe3)](_0x7d998c);}),_0xba3c79;}function setStartDatePerformance(){const _0x3769a8=_0x23db89;if(config&&config[_0x3769a8(0x194)][0x0][_0x3769a8(0x1fe)][_0x3769a8(0x177)]!=0x0){const _0x4dc898=config['liquidity'][0x0][_0x3769a8(0x1fe)];dbPerformance[_0x3769a8(0xea)](_0x3769a8(0x212))['find']({'date':config[_0x3769a8(0x220)]})['assign']({'coins':_0x4dc898})['write']();}}async function recreateCoinResults(){const _0x242e15=_0x23db89;let _0xefce74,_0x5717bb=[];try{const _0x29dd2e=fns['format'](fns[_0x242e15(0x14c)](config[_0x242e15(0x220)][_0x242e15(0x205)](/\//g,'-')),_0x242e15(0x115));for(const _0xf97426 of currentCoins){if(_0xf97426[_0x242e15(0xdf)]!=config['basecoin']){let _0x43cbd0=0x0,_0x580259,_0xf63419;_0xefce74=await getAllEventOrders(_0xf97426[_0x242e15(0xc0)]);if(_0xefce74['length']>0x0)_0xefce74[_0x242e15(0x159)](_0x5e987a=>{const _0x146e37=_0x242e15,_0x2fa0a0=_0xf97426[_0x146e37(0xc0)]['includes'](config['basecoin']+'/');_0x5717bb[_0x146e37(0xe3)]({'datetime':_0x5e987a[_0x146e37(0xcb)],'coin':_0xf97426[_0x146e37(0xdf)],'symbol':_0xf97426[_0x146e37(0xc0)],'side':_0x5e987a[_0x146e37(0x1cf)],'reverse':_0x2fa0a0,'amount':formatResult(_0x5e987a[_0x146e37(0x1d8)],0x8),'filled':formatResult(_0x5e987a[_0x146e37(0x1d8)],0x8),'price':formatResult(_0x5e987a[_0x146e37(0x12e)],0x8)}),_0x43cbd0=_0x5e987a['side']==_0x146e37(0xcc)?_0x43cbd0+_0x5e987a[_0x146e37(0x1d8)]:_0x43cbd0-_0x5e987a[_0x146e37(0x1d8)];if(!_0xf63419)_0xf63419=_0x5e987a[_0x146e37(0x12e)];});_0x580259=_0xf97426[_0x242e15(0xc2)]-_0x43cbd0;let _0x410707;config['liquidity'][_0x242e15(0x159)](_0x226789=>{const _0x5b5c4f=_0x242e15;!_0x410707&&(_0x410707=_0x226789[_0x5b5c4f(0x1fe)][_0x5b5c4f(0xce)](_0x3a64b7=>_0x3a64b7['coin']==_0xf97426[_0x5b5c4f(0xdf)]),_0x410707&&(_0x580259=_0x410707[_0x5b5c4f(0xc2)],_0xf63419=_0x410707[_0x5b5c4f(0x12e)]));});let _0x97801d=dbCoinResults[_0x242e15(0xea)](_0x242e15(0x17f))[_0x242e15(0xce)]({'coin':_0xf97426[_0x242e15(0xdf)]})[_0x242e15(0xd8)]();_0x97801d={'coin':_0xf97426[_0x242e15(0xdf)],'number':_0x580259,'breakeven':_0xf63419,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x242e15(0xea)](_0x242e15(0x17f))[_0x242e15(0xce)]({'coin':_0xf97426[_0x242e15(0xdf)]})[_0x242e15(0x167)](_0x97801d)[_0x242e15(0x95)]();}}_0x5717bb['sort']((_0x55a286,_0x4caea1)=>_0x55a286['datetime']>_0x4caea1[_0x242e15(0xcb)]?0x1:_0x4caea1[_0x242e15(0xcb)]>_0x55a286[_0x242e15(0xcb)]?-0x1:0x0);let _0x5db0f5=0x0;for(let _0x4d2e35 of _0x5717bb){await updateCoinResults(_0x4d2e35,!![]);}}catch(_0x549909){await handleError(_0x549909,_0x242e15(0x125));}}async function getAllEventOrders(_0x32290d){const _0x2ee3fa=_0x23db89;let _0x4c4c24=[],_0x5b3747=dbLogs[_0x2ee3fa(0xea)]('logs')[_0x2ee3fa(0x165)](_0x563cc2=>{const _0x26322c=_0x2ee3fa,_0x552de8=_0x563cc2[_0x26322c(0x1a0)]['toLowerCase']();return _0x552de8[_0x26322c(0x188)](_0x32290d['toLowerCase']())&&(_0x552de8[_0x26322c(0x188)]('market')&&_0x552de8['includes'](_0x26322c(0xaa))||_0x552de8['includes'](_0x26322c(0x1d8))&&_0x552de8[_0x26322c(0x188)](_0x26322c(0xaa)));})[_0x2ee3fa(0xbc)](_0x2ee3fa(0x1fc))[_0x2ee3fa(0xd8)]();return _0x5b3747['forEach'](_0x27c9f6=>{const _0x9a833f=_0x2ee3fa,_0x2a2b2e=_0x27c9f6[_0x9a833f(0x1a0)][_0x9a833f(0x188)](_0x9a833f(0x203))?_0x9a833f(0x203):'buy',_0x2f328b=/#([0-9]|\.)+\s/i,_0x30d501=Number(_0x2f328b[_0x9a833f(0x10d)](_0x27c9f6[_0x9a833f(0x1a0)])[0x0]['slice'](0x1)),_0x18aa89=/@([0-9]|\.)+$/i,_0x3813b8=Number(_0x18aa89['exec'](_0x27c9f6['event'])[0x0]['slice'](0x1));_0x4c4c24[_0x9a833f(0xe3)]({'datetime':_0x27c9f6[_0x9a833f(0x1fc)],'coin':symbolToCoin(_0x32290d),'symbol':_0x32290d,'side':_0x2a2b2e,'amount':_0x30d501,'filled':_0x30d501,'price':_0x3813b8});}),_0x4c4c24;}async function getAllOrders(_0x59a861,_0x1e1bc5){const _0x2c3211=_0x23db89;let _0x2a07d1=[];while(_0x1e1bc5<exchange['milliseconds']()){const _0x129dc5=0x1f4;try{const _0x29790d=await exchange['fetchClosedOrders'](_0x59a861,_0x1e1bc5,_0x129dc5);if(_0x29790d[_0x2c3211(0x177)])_0x1e1bc5=_0x29790d[_0x29790d[_0x2c3211(0x177)]-0x1][_0x2c3211(0xb5)]+0x1,_0x2a07d1=_0x2a07d1[_0x2c3211(0xe2)](_0x29790d);else break;}catch(_0x2caed8){await handleError(_0x2caed8,_0x2c3211(0xff),_0x59a861);}}return _0x2a07d1;}async function validate24hChanges(){const _0x1b215d=_0x23db89;for(const _0x1903b2 of currentCoins){if(_0x1903b2['coin']!=config[_0x1b215d(0x147)]){let _0x1e3050;_0x1903b2['reverse']?_0x1e3050=formatResult((0x1/(global[_0x1b215d(0xbd)][noslash(_0x1903b2['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x1e3050=global['change'][noslash(_0x1903b2[_0x1b215d(0xc0)])],_0x1e3050<config[_0x1b215d(0x20c)]&&(logHistory(_0x1b215d(0xb4),_0x1903b2['coin']+_0x1b215d(0x1db)+_0x1e3050+'%'),logHistory(_0x1b215d(0xb4),_0x1b215d(0xbf)),logHistory(_0x1b215d(0xb4),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x14d8c0,_0x2e41e3){const _0x855fbe=_0x23db89;if(!_0x14d8c0)return!![];const _0x156322=_0x2e41e3[_0x855fbe(0x1ce)]('.'),_0x55f00b=_0x14d8c0[_0x855fbe(0x1ce)]('.');for(var _0x55fef6=0x0;_0x55fef6<_0x55f00b['length'];_0x55fef6++){const _0x2e0c24=~~_0x55f00b[_0x55fef6],_0x5ea009=~~_0x156322[_0x55fef6];if(_0x2e0c24<_0x5ea009)return!![];if(_0x2e0c24>_0x5ea009)return![];}return![];}async function oneTimeMigration(){const _0x38d0b1=_0x23db89;let _0x1b5e89=dbLogs[_0x38d0b1(0xea)](_0x38d0b1(0x1bd))[_0x38d0b1(0xd8)]();if(isOlderVersion(_0x1b5e89,_0x38d0b1(0x201))){let _0x10f490=[];const _0x3dab5f=dbLogs[_0x38d0b1(0xea)]('logs')['value']();_0x3dab5f[_0x38d0b1(0x159)](_0x58f54a=>{const _0x52ce92=_0x38d0b1;_0x10f490[_0x52ce92(0xe3)]({'time':_0x58f54a[_0x52ce92(0x1fc)],'type':_0x58f54a[_0x52ce92(0x1ed)],'event':_0x58f54a['event']});}),dbLogs[_0x38d0b1(0xea)](_0x38d0b1(0xdd))[_0x38d0b1(0x167)](_0x10f490)[_0x38d0b1(0x95)]();}let _0x4e2d76=dbConfig['get'](_0x38d0b1(0x1bd))[_0x38d0b1(0xd8)]();if(isOlderVersion(_0x4e2d76,_0x38d0b1(0x201))){let _0xe40bbe=dbConfig['get']('bot')['find']({'botID':botID})[_0x38d0b1(0xd8)]();if(_0xe40bbe){let _0x1d27e1=[];_0xe40bbe[_0x38d0b1(0x202)][_0x38d0b1(0x159)](_0xf7818c=>{const _0x13c251=_0x38d0b1;_0x1d27e1[_0x13c251(0xe3)]({'coin':_0xf7818c[_0x13c251(0xdf)],'number':_0xf7818c['startnumber'],'price':_0xf7818c['startprice']}),delete _0xf7818c[_0x13c251(0x20e)],delete _0xf7818c[_0x13c251(0x17e)];});if(_0x1d27e1[_0x38d0b1(0x177)]!==0x0)fs[_0x38d0b1(0x20a)](configbackuppath+(_0x38d0b1(0x107)+botID+'.json'),JSON[_0x38d0b1(0x1e1)](_0x1d27e1,null,0x4),function(_0x242f67){if(_0x242f67){}});const _0x1073aa=(_0x5435f6,_0x496d76)=>{const _0x40e781=_0x38d0b1;let _0x66153c=[];_0x496d76[_0x40e781(0x159)](_0x4ed29a=>{const _0x1e4f88=_0x40e781,_0x222b93=_0x5435f6['find'](_0x31a9b8=>_0x31a9b8[_0x1e4f88(0xdf)]==_0x4ed29a['coin']);if(!_0x222b93)_0x66153c[_0x1e4f88(0xe3)](_0x4ed29a);});let _0x2b70f7=[];return _0x5435f6['forEach'](_0x15a2ac=>{const _0x280b81=_0x40e781,_0xe7b2ec=_0x496d76[_0x280b81(0xce)](_0x2ec8b4=>_0x2ec8b4[_0x280b81(0xdf)]==_0x15a2ac['coin']);if(!_0xe7b2ec||_0xe7b2ec[_0x280b81(0xc2)]==0x0&&_0x15a2ac[_0x280b81(0xc2)]!=0x0)_0x2b70f7[_0x280b81(0xe3)](_0x15a2ac);}),{'missingDay1':_0x66153c,'notInDay2':_0x2b70f7};},_0x1b05d0=dbPerformance['get'](_0x38d0b1(0x212))['cloneDeep']()['value']();if(_0x1b05d0['length']>0x1){const {missingDay1:_0x374218,notInDay2:_0x524bd9}=_0x1073aa(_0x1d27e1,_0x1b05d0[0x1]['coins']);_0x1d27e1=[..._0x1d27e1,..._0x374218],_0x524bd9['forEach'](_0x261221=>{const _0x2012ef=_0x38d0b1;let _0x5e04c6=_0x1d27e1['findIndex'](_0x458950=>_0x458950[_0x2012ef(0xdf)]==_0x261221['coin']);_0x5e04c6!=-0x1&&_0x1d27e1[_0x2012ef(0x1e6)](_0x5e04c6,0x1);});}_0x1d27e1[_0x38d0b1(0x225)]((_0x28ce04,_0x29d46c)=>_0x28ce04['coin']>_0x29d46c[_0x38d0b1(0xdf)]?0x1:_0x29d46c[_0x38d0b1(0xdf)]>_0x28ce04[_0x38d0b1(0xdf)]?-0x1:0x0);let _0xa49a5c=[{'date':_0xe40bbe[_0x38d0b1(0x220)],'changes':_0x1d27e1}];_0x1b05d0[_0x38d0b1(0x177)]>0x2&&_0x1b05d0[_0x38d0b1(0x159)]((_0x295d35,_0x4d46ed)=>{const _0x2073ed=_0x38d0b1;if(_0x4d46ed>0x0&&_0x4d46ed<_0x1b05d0['length']-0x1){const {missingDay1:_0x2da8e6,notInDay2:_0x317baa}=_0x1073aa(_0x1b05d0[_0x4d46ed]['coins'],_0x1b05d0[_0x4d46ed+0x1]['coins']);_0x1d27e1=[],(_0x2da8e6[_0x2073ed(0x177)]!=0x0||_0x317baa[_0x2073ed(0x177)]!=0x0)&&(_0x2da8e6[_0x2073ed(0x177)]!=0x0&&_0x1d27e1[_0x2073ed(0xe3)](..._0x2da8e6),_0x317baa[_0x2073ed(0x177)]!=0x0&&(_0x317baa[_0x2073ed(0x159)](_0x12f5d3=>{const _0x455a16=_0x2073ed;_0x12f5d3[_0x455a16(0xc2)]=-_0x12f5d3['number'];}),_0x1d27e1[_0x2073ed(0xe3)](..._0x317baa)),_0x1d27e1[_0x2073ed(0x225)]((_0xe9153b,_0x448056)=>_0xe9153b['coin']>_0x448056['coin']?0x1:_0x448056[_0x2073ed(0xdf)]>_0xe9153b[_0x2073ed(0xdf)]?-0x1:0x0),_0xa49a5c[_0x2073ed(0xe3)]({'date':_0x1b05d0[_0x4d46ed+0x1][_0x2073ed(0x12a)],'changes':_0x1d27e1}));}}),dbConfig[_0x38d0b1(0xea)](_0x38d0b1(0x1be))[_0x38d0b1(0xce)]({'botID':botID})[_0x38d0b1(0x167)]({..._0xe40bbe,'liquidity':_0xa49a5c})[_0x38d0b1(0x95)]();}}if(isOlderVersion(_0x4e2d76,_0x38d0b1(0x11d))){let _0x4b7bb4=dbConfig[_0x38d0b1(0xea)](_0x38d0b1(0x1be))[_0x38d0b1(0xce)]({'botID':botID})[_0x38d0b1(0xd8)]();if(_0x4b7bb4){const _0x48e609=_0x4b7bb4[_0x38d0b1(0x162)],_0x3e1f48=_0x48e609?capitalize(_0x48e609):_0x38d0b1(0x152);dbConfig['get'](_0x38d0b1(0x1be))['find']({'botID':botID})[_0x38d0b1(0x167)]({'exchange':_0x3e1f48})['write']();}}let _0x61707c=dbPerformance[_0x38d0b1(0xea)](_0x38d0b1(0x1bd))['value']();isOlderVersion(_0x61707c,_0x38d0b1(0x201))&&setStartDatePerformance();let _0x177811=dbCoinResults[_0x38d0b1(0xea)](_0x38d0b1(0x1bd))['value']();if(isOlderVersion(_0x177811,_0x38d0b1(0x11f))){let _0xc5b2c5=dbCoinResults[_0x38d0b1(0xea)](_0x38d0b1(0x17f))[_0x38d0b1(0xd8)]();if(_0xc5b2c5[_0x38d0b1(0x177)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x533764=_0x23db89;dbConfig['set']('version',serverversion)[_0x533764(0x95)](),dbPerformance[_0x533764(0x11b)](_0x533764(0x1bd),serverversion)[_0x533764(0x95)](),dbLogs[_0x533764(0x11b)]('version',serverversion)[_0x533764(0x95)](),dbCoinResults[_0x533764(0x11b)](_0x533764(0x1bd),serverversion)['write']();}function getConfiguration(_0x29177b){const _0x40fc1a=_0x23db89;let _0x5a110c=dbConfig[_0x40fc1a(0xea)](_0x40fc1a(0x1be))[_0x40fc1a(0xce)]({'botID':_0x29177b})['value']();if(_0x5a110c){let _0x21c24b=![];typeof _0x5a110c[_0x40fc1a(0x226)]==_0x40fc1a(0x10f)&&(_0x5a110c={..._0x5a110c,'threshold':Number(_0x5a110c['threshold'])},_0x21c24b=!![]),_0x5a110c[_0x40fc1a(0x20c)]==undefined&&(_0x5a110c={..._0x5a110c,'change24h':-0x14},_0x21c24b=!![]),_0x5a110c[_0x40fc1a(0x116)]==undefined&&(_0x5a110c={..._0x5a110c,'fiat':_0x40fc1a(0x156)},_0x21c24b=!![]),_0x5a110c[_0x40fc1a(0x171)]==undefined&&(_0x5a110c={..._0x5a110c,'onepagemode':settings[_0x40fc1a(0x171)]},_0x21c24b=!![]),_0x5a110c[_0x40fc1a(0x17d)]==undefined&&(_0x5a110c={..._0x5a110c,'colorscheme':_0x40fc1a(0x200)},_0x21c24b=!![]),_0x5a110c[_0x40fc1a(0x19c)]==undefined&&(_0x5a110c={..._0x5a110c,'autoliquidity':!![]},_0x21c24b=!![]),_0x21c24b&&(_0x5a110c={'botID':_0x5a110c[_0x40fc1a(0x154)],'exchange':_0x5a110c[_0x40fc1a(0x162)],'apiKey':_0x5a110c[_0x40fc1a(0xf0)],'apiSecret':_0x5a110c[_0x40fc1a(0x18a)],'apiPassword':_0x5a110c[_0x40fc1a(0x9c)],'basecoin':_0x5a110c['basecoin'],'botname':_0x5a110c[_0x40fc1a(0xa2)],'showname':_0x5a110c[_0x40fc1a(0x180)],'threshold':_0x5a110c[_0x40fc1a(0x226)],'ordertype':_0x5a110c['ordertype'],'timeout':_0x5a110c[_0x40fc1a(0x184)],'fiat':_0x5a110c[_0x40fc1a(0x116)],'startdate':_0x5a110c[_0x40fc1a(0x220)],'recreate':_0x5a110c['recreate'],'timeshift':_0x5a110c[_0x40fc1a(0x1ff)],'onepagemode':_0x5a110c[_0x40fc1a(0x171)],'headless':_0x5a110c['headless'],'cooldown':_0x5a110c['cooldown'],'change24h':_0x5a110c[_0x40fc1a(0x20c)],'emojibuy':_0x5a110c[_0x40fc1a(0xc6)],'emojisell':_0x5a110c[_0x40fc1a(0x1b8)],'colorscheme':_0x5a110c['colorscheme'],'portfolio':_0x5a110c[_0x40fc1a(0x202)],'autoliquidity':_0x5a110c[_0x40fc1a(0x19c)],'liquidity':_0x5a110c[_0x40fc1a(0x194)],'openOrders':_0x5a110c[_0x40fc1a(0x217)]},dbConfig['get'](_0x40fc1a(0x1be))[_0x40fc1a(0xe1)]()[_0x40fc1a(0x95)](),dbConfig['get'](_0x40fc1a(0x1be))[_0x40fc1a(0xe3)](_0x5a110c)[_0x40fc1a(0x95)]());}else _0x5a110c={'botID':_0x29177b,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x29177b,'showname':![],'threshold':0x3,'ordertype':_0x40fc1a(0x1f7),'timeout':0x14,'fiat':_0x40fc1a(0x156),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x40fc1a(0x1ff)],'onepagemode':settings[_0x40fc1a(0x171)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x40fc1a(0x200),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x5a110c;}function emittedConfiguration(){const _0x34268b=_0x23db89;let _0x3a06f6;if(config[_0x34268b(0xf0)]=='')_0x3a06f6={...config,'configstate':'initial'};else config['apiKey']==_0x34268b(0x1dc)?_0x3a06f6={...config,'configstate':'recovery'}:(_0x3a06f6={...config,'apiKey':_0x34268b(0xc3),'apiSecret':_0x34268b(0xc3)},config[_0x34268b(0x9c)]&&(_0x3a06f6[_0x34268b(0x9c)]='************'));return _0x3a06f6;}function getSettings(){const _0x153e4c=_0x23db89;return dbSettings[_0x153e4c(0xea)](_0x153e4c(0x15e))['value']();}function getSecure(){const _0x226a24=_0x23db89;return dbSecure[_0x226a24(0xea)](_0x226a24(0xd1))[_0x226a24(0xd8)]()||{};}function updateTimeshift(_0x124163){const _0x43ce13=_0x23db89;let _0x368c57=dbConfig[_0x43ce13(0xea)](_0x43ce13(0x1be))[_0x43ce13(0xce)]({'botID':botID})[_0x43ce13(0xd8)]();_0x368c57&&dbConfig[_0x43ce13(0xea)]('bot')[_0x43ce13(0xce)]({'botID':botID})[_0x43ce13(0x167)]({'timeshift':_0x124163})[_0x43ce13(0x95)](),config[_0x43ce13(0x1ff)]=_0x124163,proxyEmit(_0x43ce13(0x192),emittedConfiguration());}function updateOnepagemode(_0x500a3f){const _0xb8fe2=_0x23db89;let _0x39f18d=dbConfig[_0xb8fe2(0xea)](_0xb8fe2(0x1be))['find']({'botID':botID})[_0xb8fe2(0xd8)]();_0x39f18d&&dbConfig[_0xb8fe2(0xea)](_0xb8fe2(0x1be))[_0xb8fe2(0xce)]({'botID':botID})['assign']({'onepagemode':_0x500a3f})['write'](),config['onepagemode']=_0x500a3f,proxyEmit(_0xb8fe2(0x192),emittedConfiguration());}async function storeConfiguration(_0xeb95c5){const _0x7978df=_0x23db89;logger[_0x7978df(0xdc)](_0x7978df(0x1cd));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x7978df(0xdc)](_0x7978df(0x114));let _0x11913d=![],_0x4133a2=![],_0x1303ff=[];_0xeb95c5[_0x7978df(0x202)]['forEach'](_0x599fc2=>{const _0x56263b=_0x7978df;if(!_0x599fc2[_0x56263b(0x168)]&&_0x599fc2[_0x56263b(0xdf)]!=_0xeb95c5['basecoin'])_0x1303ff[_0x56263b(0xe3)](_0x599fc2[_0x56263b(0xc0)]);}),_0x1303ff['forEach'](_0x419456=>{const _0x103b83=_0x7978df,_0x54c1a2=currentCoins['find'](_0x1b5e0e=>_0x1b5e0e[_0x103b83(0xc0)]==_0x419456);!_0x54c1a2&&(_0x11913d=!![]);}),currentCoins[_0x7978df(0x159)](_0x431fa8=>{const _0x4c6b25=_0x7978df;if(_0x431fa8['coin']!=config[_0x4c6b25(0x147)]){const _0x543cde=_0x1303ff[_0x4c6b25(0xce)](_0x19aef8=>_0x19aef8==_0x431fa8[_0x4c6b25(0xc0)]);!_0x543cde&&(_0x11913d=!![]);}}),_0xeb95c5[_0x7978df(0x202)][_0x7978df(0x159)](_0xb3ed8d=>{const _0x431901=_0x7978df,_0x256d5b=config[_0x431901(0x202)][_0x431901(0xce)](_0xe321e8=>_0xe321e8['coin']==_0xb3ed8d['coin']);if(_0x256d5b&&_0xb3ed8d[_0x431901(0x12b)]!=_0x256d5b[_0x431901(0x12b)])_0x4133a2=!![];});let _0x5652b3=dbConfig[_0x7978df(0xea)]('bot')[_0x7978df(0xce)]({'botID':botID})['value']();_0xeb95c5={..._0xeb95c5,'apiKey':crypt[_0x7978df(0x1c1)](secure['privateKey'],_0xeb95c5[_0x7978df(0xf0)])[_0x7978df(0x1f8)],'apiSecret':crypt[_0x7978df(0x1c1)](secure[_0x7978df(0x13f)],_0xeb95c5[_0x7978df(0x18a)])[_0x7978df(0x1f8)]};_0xeb95c5['apiPassword']&&(_0xeb95c5[_0x7978df(0x9c)]=crypt[_0x7978df(0x1c1)](secure['privateKey'],_0xeb95c5['apiPassword'])['message']);let _0x48a13e=![];if(_0x5652b3){_0xeb95c5['apiKey']==_0x7978df(0xc3)?_0xeb95c5[_0x7978df(0xf0)]=config[_0x7978df(0xf0)]:_0x48a13e=!![];_0xeb95c5[_0x7978df(0x18a)]==_0x7978df(0xc3)?_0xeb95c5['apiSecret']=config[_0x7978df(0x18a)]:_0x48a13e=!![];if(_0xeb95c5[_0x7978df(0x9c)]==_0x7978df(0xc3))_0xeb95c5[_0x7978df(0x9c)]=config[_0x7978df(0x9c)];else{if(_0xeb95c5[_0x7978df(0x9c)])_0x48a13e=!![];}dbConfig[_0x7978df(0xea)](_0x7978df(0x1be))[_0x7978df(0xce)]({'botID':botID})[_0x7978df(0x167)](_0xeb95c5)[_0x7978df(0x95)]();}else dbConfig['get'](_0x7978df(0x1be))[_0x7978df(0xe3)](_0xeb95c5)['write'](),_0x48a13e=!![],process[_0x7978df(0x108)]({'status':_0x7978df(0x1fd),'live':_0x7978df(0xfd)},_0x10a172=>{});process[_0x7978df(0x108)]({'botname':_0xeb95c5[_0x7978df(0xa2)]},_0x2075ac=>{}),config={..._0xeb95c5},updateBotManager(),proxyEmit(_0x7978df(0x110)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x48a13e)await reset(!![]);else _0x11913d||_0x4133a2?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x1d7fbc){const _0x254780=_0x23db89,_0x172637={...config,'headless':_0x1d7fbc[_0x254780(0x11c)]};let _0x47c2ea=dbConfig[_0x254780(0xea)](_0x254780(0x1be))[_0x254780(0xce)]({'botID':botID})[_0x254780(0xd8)]();_0x47c2ea&&dbConfig[_0x254780(0xea)]('bot')[_0x254780(0xce)]({'botID':botID})['assign'](_0x172637)[_0x254780(0x95)](),config={..._0x172637},updateBotManager(),proxyEmit(_0x254780(0x192),emittedConfiguration());}async function storeFiat(_0x145d59){const _0x385fae=_0x23db89,_0x43bbf8={...config,'fiat':_0x145d59};let _0x5d8536=dbConfig[_0x385fae(0xea)](_0x385fae(0x1be))[_0x385fae(0xce)]({'botID':botID})[_0x385fae(0xd8)]();_0x5d8536&&dbConfig[_0x385fae(0xea)](_0x385fae(0x1be))['find']({'botID':botID})['assign'](_0x43bbf8)[_0x385fae(0x95)](),config={..._0x43bbf8},proxyEmit(_0x385fae(0x192),emittedConfiguration());}function resetHistory(){const _0x1091b4=_0x23db89;logger[_0x1091b4(0x12c)](_0x1091b4(0xd3));try{if(fs[_0x1091b4(0x223)](path['join'](configpath,_0x1091b4(0x14b)+botID+'-events.json')))fs[_0x1091b4(0x1e7)](path[_0x1091b4(0xa4)](configpath,_0x1091b4(0x14b)+botID+'-events.json'));if(fs[_0x1091b4(0x223)](path[_0x1091b4(0xa4)](configpath,_0x1091b4(0x14b)+botID+_0x1091b4(0x20d))))fs[_0x1091b4(0x1e7)](path[_0x1091b4(0xa4)](configpath,_0x1091b4(0x14b)+botID+_0x1091b4(0x20d)));if(fs['existsSync'](path[_0x1091b4(0xa4)](configpath,'bot-'+botID+'-results.json')))fs[_0x1091b4(0x1e7)](path[_0x1091b4(0xa4)](configpath,_0x1091b4(0x14b)+botID+_0x1091b4(0x98)));}catch(_0x1b7cdb){if(_0x1b7cdb)logger[_0x1091b4(0x12c)](_0x1091b4(0x9f),_0x1b7cdb);}const _0x3643e5=getDate();let _0x359f27=[];currentCoins[_0x1091b4(0x159)](_0x6a378e=>{const _0x54e858=_0x1091b4;_0x359f27['push']({'coin':_0x6a378e[_0x54e858(0xdf)],'number':_0x6a378e[_0x54e858(0xc2)],'price':_0x6a378e['last']});});let _0x55bb67=dbConfig[_0x1091b4(0xea)]('bot')['find']({'botID':botID})['value']();_0x55bb67&&(dbConfig[_0x1091b4(0xea)](_0x1091b4(0x1be))[_0x1091b4(0xce)]({'botID':botID})['assign']({'liquidity':[{'date':_0x3643e5,'changes':_0x359f27}]})[_0x1091b4(0x95)](),config['liquidity']=[]),process[_0x1091b4(0x108)]({'stop':_0x1091b4(0x104)},_0x578700=>{});}function noslash(_0x49c6e1){const _0x22a97e=_0x23db89;return _0x49c6e1[_0x22a97e(0x205)]('/','');}function updateHighestFee(_0xc67e7b){const _0x50edb0=_0x23db89;if(_0xc67e7b['reverse']){let _0x3770b8={'filled':_0xc67e7b[_0x50edb0(0x1d8)]*_0xc67e7b[_0x50edb0(0x12e)],'amount':_0xc67e7b[_0x50edb0(0x1d8)]*_0xc67e7b[_0x50edb0(0x12e)],'side':_0xc67e7b['side']==_0x50edb0(0x203)?_0x50edb0(0xcc):_0x50edb0(0x203),'price':0x1/_0xc67e7b['price']};_0xc67e7b={..._0xc67e7b,..._0x3770b8};}const _0x4eab76=defaultFee*_0xc67e7b['filled']*_0xc67e7b['price'];lastFees[_0x50edb0(0x19b)][_0x50edb0(0x177)]===0x14&&lastFees[_0x50edb0(0x19b)][_0x50edb0(0x166)](),lastFees[_0x50edb0(0x19b)][_0x50edb0(0xe3)](_0x4eab76),lastFees['highest']=Math[_0x50edb0(0x16b)](...lastFees[_0x50edb0(0x19b)]);}async function updateNumberCoinsCcxt(_0x2f6cd1){const _0x4b13c3=_0x23db89;logger[_0x4b13c3(0xdc)](_0x4b13c3(0x96)+_0x2f6cd1[_0x4b13c3(0xc0)]+_0x4b13c3(0x1c2)+_0x2f6cd1[_0x4b13c3(0x206)]+_0x4b13c3(0x1c2)+_0x2f6cd1[_0x4b13c3(0x1d8)]+_0x4b13c3(0x1c5)+_0x2f6cd1[_0x4b13c3(0x10e)]+_0x4b13c3(0x1c2)+_0x2f6cd1['id']);let _0x55ac42=_0x2f6cd1[_0x4b13c3(0x206)],_0x58c470=![];currentCoins[_0x4b13c3(0x159)](_0x408c02=>{const _0x2eede6=_0x4b13c3;_0x408c02[_0x2eede6(0xc0)]==_0x2f6cd1[_0x2eede6(0xc0)]&&(_0x58c470=!![]);});if(!_0x58c470)return;const _0xbd774f=currentCoins[_0x4b13c3(0xce)](_0x5e1ebc=>_0x5e1ebc['symbol']==_0x2f6cd1[_0x4b13c3(0xc0)]),_0x18010a=_0x206aec=>{const _0x33dd17=_0x4b13c3;if(_0xbd774f)_0xbd774f[_0x33dd17(0x182)]=_0x206aec;};if(_0x55ac42=='open')_0x18010a(_0x4b13c3(0x141));else{if(_0x55ac42==_0x4b13c3(0x1f3)){_0x18010a(_0x4b13c3(0x1f3));const _0x26313f=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x26313f,await getOpenOrders(),handleOpenOrders();}else{if(_0x55ac42==_0x4b13c3(0x196)){let _0x23ae5e=![];if(lastOrders)for(const _0x597d12 of lastOrders){const _0x2deb37=0xc8,_0x15ba3a=0x1388;let _0x423af8=0x0;while(!_0x597d12[_0x4b13c3(0xe4)]&&_0x423af8*_0x2deb37<_0x15ba3a){_0x423af8++,await sleep(_0x2deb37);}if(_0x423af8>0x0)logger['debug'](_0x4b13c3(0x174)+_0x423af8*_0x2deb37/0x3e8+_0x4b13c3(0x130));if(_0x597d12[_0x4b13c3(0xe4)]==_0x2f6cd1['id']){logger[_0x4b13c3(0xdc)](_0x4b13c3(0x222)+_0x2f6cd1['id']),_0x23ae5e=!![];if(_0x597d12[_0x4b13c3(0x1d8)]==0x0){logger[_0x4b13c3(0xdc)](_0x4b13c3(0x1b5)+_0x2f6cd1['id']);if(_0x2f6cd1[_0x4b13c3(0x198)])_0x597d12[_0x4b13c3(0x12e)]=_0x2f6cd1[_0x4b13c3(0x198)];else{if(_0x2f6cd1[_0x4b13c3(0x12e)])_0x597d12[_0x4b13c3(0x12e)]=_0x2f6cd1['price'];else{}}_0x597d12[_0x4b13c3(0x1d8)]=_0x2f6cd1[_0x4b13c3(0x1d8)],updateHighestFee(_0x597d12),_0x18010a(_0x4b13c3(0x1d8)),await validateOrders();if(lockOrders==ORDERS[_0x4b13c3(0xfb)]){const _0x45f840=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x45f840;}_0x597d12['fee']={'currency':_0x2f6cd1[_0x4b13c3(0x20f)]?_0x2f6cd1[_0x4b13c3(0x20f)][_0x4b13c3(0xc7)]:null,'cost':_0x2f6cd1[_0x4b13c3(0x20f)]?_0x2f6cd1['fee'][_0x4b13c3(0x224)]:0x0},await updateCoinResults(_0x597d12);}}}if(!_0x23ae5e){logger[_0x4b13c3(0xdc)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x2f6cd1['id']),_0x18010a(_0x4b13c3(0x1d8));const _0x103436=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x103436,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x28ea53=JSON[_0x4b13c3(0xfa)](lastBalances[_0x4b13c3(0x202)]);const _0x4aebfb=_0x28ea53[_0x4b13c3(0xce)](_0x19d83d=>_0x19d83d['symbol']==_0x2f6cd1[_0x4b13c3(0xc0)]);if(_0x4aebfb){if(_0x55ac42=='open')_0x4aebfb[_0x4b13c3(0x182)]=_0x4aebfb[_0x4b13c3(0x182)]=='filled'?'filled':_0x4b13c3(0x141);else{if(_0x55ac42==_0x4b13c3(0x1f3))_0x4aebfb[_0x4b13c3(0x182)]=_0x4aebfb[_0x4b13c3(0x182)]==_0x4b13c3(0x1d8)?_0x4b13c3(0x1d8):_0x4b13c3(0x1f3);else _0x55ac42==_0x4b13c3(0x196)&&(_0x4aebfb[_0x4b13c3(0x182)]=_0x4b13c3(0x1d8));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4b13c3(0x1e1)](_0x28ea53)},proxyEmit(_0x4b13c3(0x1b2),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2ad050=_0x23db89;await getOpenOrders();let _0x35aff7=![];currentCoins[_0x2ad050(0x159)](_0x1fa379=>{const _0x237b53=_0x2ad050;_0x35aff7=allOpenOrders[_0x237b53(0xce)](_0x3123d2=>_0x3123d2[_0x237b53(0xc0)]==_0x1fa379['symbol']),_0x1fa379[_0x237b53(0x182)]=_0x35aff7?_0x237b53(0x141):_0x237b53(0xb7);});}async function getCoins(_0x39f6ad=0x0,_0x17a14e=!![],_0x22a098=config['basecoin']){const _0x851699=_0x23db89;let _0x201af5,_0x3f6051=[],_0x54e2b4=[],_0x359d9e=[];if(_0x39f6ad)await sleep(_0x39f6ad);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x201af5=await exchange['fetchBalance'](),mybalances=_0x201af5[_0x851699(0x1ea)];for(const [_0x243664,_0x205079]of Object[_0x851699(0x126)](mybalances)){_0x359d9e[_0x851699(0xe3)](_0x243664);}config[_0x851699(0x202)][_0x851699(0x159)](_0x2d6090=>{const _0xb0f54=_0x851699;!_0x359d9e[_0xb0f54(0x188)](_0x2d6090[_0xb0f54(0xdf)])&&(mybalances[_0x2d6090[_0xb0f54(0xdf)]]=0x0);});if(_0x22a098=='')for(const [_0x32d5ab,_0x216d71]of Object[_0x851699(0x126)](mybalances)){_0x216d71!=0x0&&_0x3f6051[_0x851699(0xe3)]({'coin':_0x32d5ab});}else{let _0x13f82e=![];for(const [_0x4ee332,_0x37eb0e]of Object[_0x851699(0x126)](mybalances)){const _0x38475f=config[_0x851699(0x202)][_0x851699(0xce)](_0x43fe2d=>_0x43fe2d['coin']==_0x4ee332),_0x4a2362=_0x4ee332+'/'+_0x22a098,_0x2a96ef=_0x22a098+'/'+_0x4ee332,_0x5c4f84=currentCoins[_0x851699(0xce)](_0x23de8a=>_0x23de8a[_0x851699(0xdf)]==_0x4ee332);_0x13f82e=![];if((_0x37eb0e!=0x0||_0x38475f)&&(allSymbols[_0x851699(0x188)](_0x4a2362)||_0x4ee332==_0x22a098))_0x3f6051['push']({'coin':_0x4ee332,'symbol':_0x4a2362,'reverse':![],'number':Math['max'](_0x37eb0e+(_0x38475f&&_0x38475f[_0x851699(0x12b)]||0x0),0x0),'orderstatus':_0x5c4f84?_0x5c4f84[_0x851699(0x182)]:_0x851699(0xb7)});else{if((_0x37eb0e!=0x0||_0x38475f)&&allSymbols[_0x851699(0x188)](_0x2a96ef))_0x3f6051[_0x851699(0xe3)]({'coin':_0x4ee332,'symbol':_0x2a96ef,'reverse':!![],'number':Math['max'](_0x37eb0e+(_0x38475f&&_0x38475f[_0x851699(0x12b)]||0x0),0x0),'orderstatus':_0x5c4f84?_0x5c4f84['orderstatus']:'none'});else _0x38475f&&_0x3f6051[_0x851699(0xe3)]({'coin':_0x38475f['coin'],'symbol':_0x38475f[_0x851699(0xc0)],'reverse':_0x38475f[_0x851699(0x181)],'number':0x0,'orderstatus':_0x851699(0xb7)});}}}}catch(_0x47f1b6){if(!_0x17a14e)handleErrorNoStop(_0x47f1b6,'getCoins()');else await handleError(_0x47f1b6,_0x851699(0x208));}return _0x54e2b4=cloneDeep(_0x3f6051),_0x3f6051=_0x3f6051['filter'](_0x4b62b2=>{const _0x109e18=_0x851699,_0xe1122f=config[_0x109e18(0x202)][_0x109e18(0xce)](_0x2c14e9=>_0x2c14e9[_0x109e18(0xdf)]==_0x4b62b2[_0x109e18(0xdf)]);return _0xe1122f&&!_0xe1122f['excluded'];}),[_0x3f6051,_0x54e2b4];}async function getCoinNumber(_0x1c4028){const _0x41d6f5=_0x23db89;let _0x5db4c9;try{const _0x3bf756=await exchange['fetchBalance']();_0x5db4c9=_0x3bf756[_0x41d6f5(0x1ea)][_0x1c4028];}catch(_0x55f3bf){await handleError(_0x55f3bf,_0x41d6f5(0xc4));}return _0x5db4c9;}async function getOpenOrders(){const _0x21a9e0=_0x23db89;let _0x11e1f7;allOpenOrders=[];try{for(const _0x48b0bc of config[_0x21a9e0(0x202)]){!_0x48b0bc['excluded']&&_0x48b0bc[_0x21a9e0(0xdf)]!=config[_0x21a9e0(0x147)]&&(_0x11e1f7=await exchange[_0x21a9e0(0x15b)](_0x48b0bc[_0x21a9e0(0xc0)]),_0x11e1f7['length']>0x0&&allOpenOrders[_0x21a9e0(0xe3)](_0x11e1f7[0x0]));}}catch(_0x12e8ca){await handleError(_0x12e8ca,_0x21a9e0(0x1e0));}}async function handleOpenOrders(_0x5f0c81=0x0){const _0x4d69dc=_0x23db89;allOpenOrders[_0x4d69dc(0x177)]==0x0&&lockOrders==ORDERS[_0x4d69dc(0xfb)]&&allOrdersPlaced&&(_0x5f0c81==0x0?(logger[_0x4d69dc(0xdc)](_0x4d69dc(0x1cb)),_0x5f0c81++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug']('2\x20-\x20Handled\x20open\x20orders'),validateOrders(_0x4d69dc(0x197))));}async function testAPI(_0xa1d38d){const _0x314f17=_0x23db89,_0x39cfeb=ccxt[_0x314f17(0x209)][_0xa1d38d[_0x314f17(0x162)][_0x314f17(0x1a9)]()],_0x33023e=new _0x39cfeb({'apiKey':_0xa1d38d['apiKey'],'secret':_0xa1d38d['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0xa1d38d[_0x314f17(0x9c)])_0x33023e[_0x314f17(0xd6)]=_0xa1d38d[_0x314f17(0x9c)];try{await _0x33023e[_0x314f17(0xd0)]();}catch(_0x34dd5e){throw _0x34dd5e;}}function _0x277e(_0x53c042,_0x55264a){const _0x834edb=_0x206e();return _0x277e=function(_0x22339a,_0x21a21f){_0x22339a=_0x22339a-0x90;let _0x206efb=_0x834edb[_0x22339a];return _0x206efb;},_0x277e(_0x53c042,_0x55264a);}function cloneDeep(_0x5c5592){const _0x26a2e4=_0x23db89;return JSON[_0x26a2e4(0xfa)](JSON['stringify'](_0x5c5592));}async function getPortfolio(_0x2696de){const _0x35e9aa=_0x23db89;let _0x2d3425=[],_0xbbfabf=[],_0x5796a4=[],_0x24dbd5;if(_0x2696de['apiKey']!=='************'||_0x2696de[_0x35e9aa(0x18a)]!==_0x35e9aa(0xc3)||_0x2696de[_0x35e9aa(0x9c)]&&_0x2696de['apiPassword']!=='************'){if(config[_0x35e9aa(0x162)]){if(_0x2696de[_0x35e9aa(0xf0)]==_0x35e9aa(0xc3))_0x2696de[_0x35e9aa(0xf0)]=config[_0x35e9aa(0xf0)];if(_0x2696de[_0x35e9aa(0x18a)]==_0x35e9aa(0xc3))_0x2696de[_0x35e9aa(0x18a)]=config[_0x35e9aa(0x18a)];if(_0x2696de[_0x35e9aa(0x9c)]=='************')_0x2696de['apiPassword']=config['apiPassword'];try{await testAPI(_0x2696de);}catch(_0x730a8b){if(_0x730a8b[_0x35e9aa(0x214)]()[_0x35e9aa(0x188)](_0x35e9aa(0x1b7))){logger['debug'](_0x35e9aa(0x121)),proxyEmit(_0x35e9aa(0x202),![]);return;}else{handleError(_0x730a8b,_0x35e9aa(0x113));return;}}}await initExchange(_0x2696de[_0x35e9aa(0x162)],_0x2696de['apiKey'],_0x2696de['apiSecret'],_0x2696de['apiPassword']);try{await loadSymbols();}catch(_0x2f4905){if(_0x2f4905[_0x35e9aa(0x214)]()[_0x35e9aa(0x188)](_0x35e9aa(0x1b7))){proxyEmit(_0x35e9aa(0x202),![]);return;}else{handleError(_0x2f4905,'getPortfolio(1)');return;}}const _0x47ab13=await getCoins(0x0,![],_0x2696de[_0x35e9aa(0x147)]);_0x5796a4=cloneDeep(_0x47ab13[0x1]);}else _0x5796a4=cloneDeep(currentCoinsAll);if(_0x2696de[_0x35e9aa(0x147)]=='')proxyEmit('portfolio',_0x5796a4);else{_0x5796a4[_0x35e9aa(0x159)](_0x5837e7=>{const _0x330f8a=_0x35e9aa;if(_0x5837e7[_0x330f8a(0xdf)]!=_0x2696de[_0x330f8a(0x147)]&&allSymbols[_0x330f8a(0x188)](_0x5837e7['symbol']))_0x2d3425[_0x330f8a(0xe3)](_0x5837e7[_0x330f8a(0xc0)]);});if(_0x2d3425[_0x35e9aa(0x177)]==0x0)logHistory(_0x35e9aa(0xb4),_0x35e9aa(0x132));else{try{_0xbbfabf=await getTickers(_0x2d3425);}catch(_0x18c61d){if(_0x18c61d[_0x35e9aa(0x214)]()[_0x35e9aa(0x188)](_0x35e9aa(0x1b7))){proxyEmit(_0x35e9aa(0x202),![]);return;}else handleError(_0x18c61d,_0x35e9aa(0x1f2));}_0x5796a4[_0x35e9aa(0x159)](_0x268f9c=>{const _0x4203e3=_0x35e9aa;_0x268f9c[_0x4203e3(0xdf)]!=_0x2696de[_0x4203e3(0x147)]?_0xbbfabf[_0x268f9c[_0x4203e3(0xc0)]]?_0x24dbd5=_0x268f9c[_0x4203e3(0x181)]?0x1/_0xbbfabf[_0x268f9c[_0x4203e3(0xc0)]][_0x4203e3(0x1d0)]:_0xbbfabf[_0x268f9c[_0x4203e3(0xc0)]][_0x4203e3(0x1d0)]:_0x24dbd5=0x0:_0x24dbd5=0x1,_0x268f9c[_0x4203e3(0x12e)]=formatResult(_0x24dbd5,0x8);}),proxyEmit('portfolio',_0x5796a4);}}}function truncateTradeAmount(_0x4eb198,_0x536f35){let _0x5e61e0=0x0;try{_0x5e61e0=exchange['amountToPrecision'](_0x4eb198,_0x536f35);}catch(_0x47a527){}return _0x5e61e0;}function checkMinimums(_0x426359){const _0x3567f0=_0x23db89;let _0x31f7f9=!![];const _0x35080d=!_0x426359['reverse']?markets[_0x426359[_0x3567f0(0xc0)]]['limits'][_0x3567f0(0x10e)][_0x3567f0(0xef)]:markets[_0x426359['symbol']]['limits']['cost'][_0x3567f0(0xef)],_0x4f6613=!_0x426359['reverse']?markets[_0x426359[_0x3567f0(0xc0)]][_0x3567f0(0x1a3)]['cost'][_0x3567f0(0xef)]:markets[_0x426359[_0x3567f0(0xc0)]][_0x3567f0(0x1a3)][_0x3567f0(0x10e)][_0x3567f0(0xef)],_0x22f2ff=truncateTradeAmount(_0x426359[_0x3567f0(0xc0)],_0x426359[_0x3567f0(0x138)]);_0x426359[_0x3567f0(0x138)]=_0x22f2ff;if(Math[_0x3567f0(0x1f5)](_0x22f2ff)<_0x35080d)_0x31f7f9=![];if(Math['abs'](_0x22f2ff)*_0x426359['last']<_0x4f6613)_0x31f7f9=![];if(_0x426359[_0x3567f0(0x1cf)]==_0x3567f0(0x203)){let _0x3ffbf7=config[_0x3567f0(0x202)][_0x3567f0(0xce)](_0x222374=>_0x222374[_0x3567f0(0xdf)]==_0x426359[_0x3567f0(0xdf)]);if(_0x3ffbf7[_0x3567f0(0x12b)]>0x0){if(Math['abs'](_0x22f2ff)>_0x426359['number']-_0x3ffbf7[_0x3567f0(0x12b)])_0x31f7f9=![];}else{if(Math[_0x3567f0(0x1f5)](_0x22f2ff)>_0x426359[_0x3567f0(0xc2)])_0x31f7f9=![];}}if(_0x426359[_0x3567f0(0x1cf)]==_0x3567f0(0xcc)){let _0x23df5f=config[_0x3567f0(0x202)][_0x3567f0(0xce)](_0x3aaeb5=>_0x3aaeb5[_0x3567f0(0xdf)]==config['basecoin']),_0x384122=currentCoins[_0x3567f0(0xce)](_0x2ac967=>_0x2ac967['coin']==config[_0x3567f0(0x147)]);if(_0x23df5f['offset']>0x0){if(Math[_0x3567f0(0x1f5)](_0x22f2ff)*_0x426359[_0x3567f0(0x1d0)]>_0x384122[_0x3567f0(0xc2)]-_0x23df5f['offset'])_0x31f7f9=![];}else{if(Math[_0x3567f0(0x1f5)](_0x22f2ff)*_0x426359[_0x3567f0(0x1d0)]>_0x384122[_0x3567f0(0xc2)])_0x31f7f9=![];}}return _0x31f7f9;}async function getBalances(_0x1a5701=!![]){const _0x3cf152=_0x23db89;let _0x43528b=0x0,_0x37a5d2;const _0x5392c7=config[_0x3cf152(0x226)];if(config[_0x3cf152(0x11c)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x585566=>{const _0x26c9fe=_0x3cf152;if(_0x585566[_0x26c9fe(0xdf)]!=config[_0x26c9fe(0x147)]){let _0x5ec50a=global[_0x26c9fe(0x101)][noslash(_0x585566['symbol'])];_0x37a5d2=_0x585566[_0x26c9fe(0x181)]?0x1/_0x5ec50a:_0x5ec50a;}else _0x37a5d2=0x1;let _0xd06c5b=_0x585566[_0x26c9fe(0xc2)]*_0x37a5d2;_0x43528b+=_0xd06c5b,_0x585566['last']=formatResult(Number(_0x37a5d2),0x8),_0x585566[_0x26c9fe(0xd8)]=_0xd06c5b;}),currentCoins['forEach'](_0x199c14=>{const _0x51b19e=_0x3cf152;let _0x1dfe14=config[_0x51b19e(0x202)][_0x51b19e(0xce)](_0x5069e4=>_0x5069e4['coin']==_0x199c14[_0x51b19e(0xdf)]),_0x3a6b39=Number(_0x1dfe14['distribution']),_0x166d39=_0x199c14[_0x51b19e(0xd8)]/_0x43528b*0x64,_0x40b163=_0x3a6b39*_0x43528b/0x64/_0x199c14[_0x51b19e(0x1d0)]-_0x199c14[_0x51b19e(0xc2)];_0x199c14[_0x51b19e(0x150)]=formatResult(_0x166d39,0x3),_0x199c14[_0x51b19e(0xb8)]=formatResult(_0x3a6b39,0x3),_0x199c14[_0x51b19e(0x138)]=formatResult(_0x40b163,0x8),_0x199c14[_0x51b19e(0x1cf)]='',_0x199c14[_0x51b19e(0x210)]=![];if(_0x199c14[_0x51b19e(0xdf)]!=config[_0x51b19e(0x147)]){if(_0x199c14['distribution']>_0x3a6b39)_0x199c14[_0x51b19e(0x1cf)]=_0x51b19e(0x203),_0x199c14['valid']=checkMinimums(_0x199c14);else _0x199c14[_0x51b19e(0x150)]<_0x3a6b39&&(_0x199c14[_0x51b19e(0x1cf)]=_0x51b19e(0xcc),_0x199c14[_0x51b19e(0x210)]=checkMinimums(_0x199c14));}_0x199c14['delta']=_0x199c14[_0x51b19e(0x150)]/_0x199c14['target']-0x1;if(_0x199c14[_0x51b19e(0x182)]=='filled'||_0x199c14['orderstatus']==_0x51b19e(0x1f3))_0x199c14[_0x51b19e(0x182)]=_0x51b19e(0xb7);}),currentCoins[_0x3cf152(0x225)]((_0x35a8cb,_0xb60cb)=>_0x35a8cb[_0x3cf152(0xbe)]<_0xb60cb[_0x3cf152(0xbe)]?0x1:_0xb60cb[_0x3cf152(0xbe)]<_0x35a8cb[_0x3cf152(0xbe)]?-0x1:0x0);const _0x2768c9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2768c9['eur'],'usd':_0x2768c9[_0x3cf152(0xc5)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5392c7},proxyEmit(_0x3cf152(0x1b2),{'serverversion':serverversion,'balances':lastBalances});if(_0x1a5701){if(config[_0x3cf152(0x11c)])headlessMode({'portfolio':currentCoins,'threshold':_0x5392c7});else{if(lockOrders==ORDERS[_0x3cf152(0x16d)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5392c7});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x38a09d=getNormalizedPerformance();getStartingBalances(_0x38a09d),emitPerformance(_0x38a09d);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x263ba9=getNormalizedPerformance();emitPerformance(_0x263ba9),getStartingBalances(_0x263ba9),logger[_0x3cf152(0xdc)]('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x53dc19=_0x23db89;if(!lastBalances)return;let _0x1b3014=[],_0x5aaabc,_0x4d4bf7=JSON[_0x53dc19(0xfa)](lastBalances[_0x53dc19(0x202)]);_0x4d4bf7['sort']((_0x583f0a,_0xdfb717)=>_0x583f0a[_0x53dc19(0xdf)]>_0xdfb717['coin']?0x1:_0xdfb717['coin']>_0x583f0a[_0x53dc19(0xdf)]?-0x1:0x0),_0x4d4bf7['forEach'](_0x44a9e6=>{const _0x39d984=_0x53dc19;let _0x57397d={'coin':_0x44a9e6['coin'],'number':_0x44a9e6[_0x39d984(0xc2)],'price':_0x44a9e6['last']};_0x1b3014[_0x39d984(0xe3)](_0x57397d);});const _0x46cc73=await getFiat();_0x5aaabc={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x46cc73[_0x53dc19(0xae)],'usd':_0x46cc73[_0x53dc19(0xc5)],'coins':_0x1b3014};let _0x13bbbd=dbPerformance[_0x53dc19(0xea)](_0x53dc19(0x212))['find']({'date':_0x5aaabc[_0x53dc19(0x12a)]})[_0x53dc19(0xd8)]();_0x13bbbd?_0x5aaabc[_0x53dc19(0x12a)]!=config['startdate']&&dbPerformance['get']('data')[_0x53dc19(0xce)]({'date':_0x5aaabc[_0x53dc19(0x12a)]})[_0x53dc19(0x167)](_0x5aaabc)[_0x53dc19(0x95)]():dbPerformance[_0x53dc19(0xea)](_0x53dc19(0x212))[_0x53dc19(0xe3)](_0x5aaabc)[_0x53dc19(0x95)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x5ab92d=_0x23db89;let _0x55d6cb=[];if(dbPerformance[_0x5ab92d(0x19f)](_0x5ab92d(0x212))['value']()){let _0x1be241=dbPerformance['get'](_0x5ab92d(0x212))['cloneDeep']()['filter'](_0x3849f7=>{const _0x235e96=_0x5ab92d;if(_0x3849f7[_0x235e96(0x17f)][_0x235e96(0x177)]==0x0)return![];else return!![];})[_0x5ab92d(0xbc)](_0x5ab92d(0x12a))['value'](),_0x8e1fde=[...config['liquidity']];_0x8e1fde['sort']((_0x2914b0,_0x350d0b)=>_0x2914b0[_0x5ab92d(0x12a)]>_0x350d0b[_0x5ab92d(0x12a)]?-0x1:_0x350d0b[_0x5ab92d(0x12a)]>_0x2914b0['date']?0x1:0x0);let _0x5853e5=0x1,_0xfa29d1=[],_0x3e804e=0x0;_0x1be241['slice']()['reverse']()[_0x5ab92d(0x159)]((_0x4fd7df,_0x56c465)=>{const _0x25a2a9=_0x5ab92d;if(_0x8e1fde[_0x3e804e]){if(_0x1be241[_0x1be241[_0x25a2a9(0x177)]-_0x56c465]&&_0x8e1fde[_0x3e804e][_0x25a2a9(0x12a)]==_0x1be241[_0x1be241[_0x25a2a9(0x177)]-_0x56c465][_0x25a2a9(0x12a)]){if(_0x56c465<_0x1be241[_0x25a2a9(0x177)]){let _0x47888b=0x0,_0x5f53ae=0x0;_0x1be241[_0x1be241[_0x25a2a9(0x177)]-_0x56c465]['coins'][_0x25a2a9(0x159)](_0x27f15b=>{const _0x3d3af9=_0x25a2a9;_0x5f53ae+=_0x27f15b['number']*_0x27f15b[_0x3d3af9(0x12e)];}),_0x8e1fde[_0x3e804e][_0x25a2a9(0x1fe)][_0x25a2a9(0x159)](_0x58e5a0=>{const _0x1fdaa6=_0x25a2a9;_0x47888b+=_0x58e5a0['number']*_0x58e5a0[_0x1fdaa6(0x12e)];}),_0x5853e5*=_0x47888b/(_0x5f53ae-_0x47888b)+0x1;}_0x3e804e++;}}let _0x19e3ec=0x0;_0x4fd7df[_0x25a2a9(0x17f)][_0x25a2a9(0x159)](_0x179eb9=>{const _0xc66ccb=_0x25a2a9;_0x19e3ec+=_0x179eb9['number']*_0x179eb9[_0xc66ccb(0x12e)];}),_0xfa29d1[_0x1be241[_0x25a2a9(0x177)]-_0x56c465-0x1]=_0x19e3ec*(_0x5853e5-0x1);});let _0x209401=[];_0x8e1fde=[...config[_0x5ab92d(0x194)]]||[];let _0x34e398=0x0;_0x3e804e=0x0,_0x1be241[_0x5ab92d(0x159)]((_0x5b940d,_0x5a5422)=>{const _0x10497a=_0x5ab92d;if(_0x8e1fde[_0x3e804e]){const _0x27508e=fns[_0x10497a(0xfa)](_0x8e1fde[_0x3e804e]['date'],'yyyy/MM/dd',new Date()),_0x31a39d=fns[_0x10497a(0xfa)](_0x5b940d[_0x10497a(0x12a)],_0x10497a(0xe9),new Date());if(fns[_0x10497a(0xb1)](_0x27508e,_0x31a39d)){let _0x5e8e7b=0x0;_0x8e1fde[_0x3e804e][_0x10497a(0x1fe)]['forEach'](_0x1a2dee=>{const _0x5e2a0a=_0x10497a;!_0x209401[_0x1a2dee[_0x5e2a0a(0xdf)]]?_0x209401[_0x1a2dee[_0x5e2a0a(0xdf)]]=_0x1a2dee['number']:(_0x5e8e7b=_0x209401[_0x1a2dee[_0x5e2a0a(0xdf)]],_0x209401[_0x1a2dee[_0x5e2a0a(0xdf)]]+=_0x1a2dee['number']);const _0x4ac598=_0x5b940d[_0x5e2a0a(0x17f)][_0x5e2a0a(0xce)](_0x363095=>_0x363095['coin']==_0x1a2dee[_0x5e2a0a(0xdf)]);(!_0x4ac598||_0x4ac598[_0x5e2a0a(0xc2)]==0x0)&&(_0x34e398+=(-_0x1a2dee['number']-_0x5e8e7b)*_0x1a2dee[_0x5e2a0a(0x12e)]);}),_0x3e804e++;}}_0x5b940d[_0x10497a(0x17f)][_0x10497a(0x159)]((_0x1480f3,_0x4937ea)=>{const _0x497731=_0x10497a;_0x209401[_0x1480f3[_0x497731(0xdf)]]&&(_0x1480f3['initial']=_0x209401[_0x1480f3[_0x497731(0xdf)]]);}),_0x55d6cb[_0x10497a(0xe3)]({'date':_0x5b940d['date'],'eur':_0x5b940d['eur'],'usd':_0x5b940d['usd'],'offset':_0xfa29d1[_0x5a5422],'netoffset':_0x34e398,'coins':_0x5b940d[_0x10497a(0x17f)]});});}return _0x55d6cb;}function emitPerformance(_0x169e66){const _0x3a4380=_0x23db89;_0x169e66[_0x3a4380(0x177)]!==0x0?(proxyEmit('performance',_0x169e66),lastPerformanceEmitted=getDate()):proxyEmit(_0x3a4380(0xcd),[]);}function getPerf(_0x13ea0c,_0x26c9c3){const _0x4d15db=_0x23db89;let _0x5585d4=0x0,_0x2638ac=0x0,_0x5c915c=0x0;_0x13ea0c['coins'][_0x4d15db(0x159)](_0x23efe6=>{const _0x43076d=_0x4d15db;_0x5585d4+=_0x23efe6[_0x43076d(0xc2)]*_0x23efe6[_0x43076d(0x12e)];});_0x26c9c3&&(_0x5585d4+=_0x13ea0c[_0x4d15db(0x12b)]);if(config[_0x4d15db(0x147)]==='BTC'||config[_0x4d15db(0x147)]===_0x4d15db(0x1ee))_0x2638ac=_0x5585d4*_0x13ea0c[_0x4d15db(0xae)],_0x5c915c=_0x5585d4*_0x13ea0c[_0x4d15db(0xc5)];else{if(usdBasecoins[_0x4d15db(0x188)](config[_0x4d15db(0x147)]))_0x2638ac=_0x5585d4*_0x13ea0c[_0x4d15db(0xae)]/_0x13ea0c['usd'],_0x5c915c=_0x5585d4;else config[_0x4d15db(0x147)]==='EUR'&&(_0x2638ac=_0x5585d4,_0x5c915c=_0x5585d4*_0x13ea0c[_0x4d15db(0xc5)]/_0x13ea0c[_0x4d15db(0xae)]);}return[_0x5585d4,_0x2638ac,_0x5c915c];}function getKPIs(_0x73b305,_0x57b6bf=_0x23db89(0x158)){const _0x7c8e9a=_0x23db89,_0x3f9848=config['basecoin'],_0x4c5554=lastBalances,_0x465723=currentCoins,_0x42dcf4=getNormalizedPerformance(),_0x35a4f0=_0x73b305===_0x7c8e9a(0x147)?_0x3f9848:_0x73b305===_0x7c8e9a(0x116)||_0x73b305===_0x7c8e9a(0xb2)?_0x57b6bf:_0x7c8e9a(0x155)+_0x3f9848,_0x89cf80=_0x73b305===_0x7c8e9a(0xcf)?_0x7c8e9a(0x160):_0x73b305===_0x7c8e9a(0xb2)?_0x7c8e9a(0x160):_0x35a4f0+_0x7c8e9a(0x11e),_0x157949=_0x73b305===_0x7c8e9a(0xcf)||_0x73b305==='net-fiat'?'Net\x20effect':_0x35a4f0+'\x20change';let _0x15785d=0x0;_0x465723['forEach'](_0x4689c2=>{const _0x41d91d=_0x7c8e9a;_0x15785d+=_0x4689c2[_0x41d91d(0xc2)]*_0x4689c2['last'];});if(_0x73b305===_0x7c8e9a(0x116)||_0x73b305===_0x7c8e9a(0xb2)){if(_0x3f9848===_0x7c8e9a(0x215)||_0x3f9848===_0x7c8e9a(0x1ee))_0x15785d=_0x15785d*(_0x57b6bf===_0x7c8e9a(0x158)?_0x4c5554[_0x7c8e9a(0xae)]:_0x4c5554['usd']);else{if(usdBasecoins[_0x7c8e9a(0x188)](_0x3f9848))_0x15785d=_0x15785d*(_0x57b6bf===_0x7c8e9a(0x158)?_0x4c5554[_0x7c8e9a(0xae)]/_0x4c5554[_0x7c8e9a(0xc5)]:0x1);else _0x3f9848===_0x7c8e9a(0x158)&&(_0x15785d=_0x15785d*(_0x57b6bf===_0x7c8e9a(0x158)?0x1:_0x4c5554[_0x7c8e9a(0xc5)]/_0x4c5554[_0x7c8e9a(0xae)]));}}let _0x49413e;if(_0x15785d!==0x0){if(_0x73b305===_0x7c8e9a(0x147))_0x49413e=(_0x15785d/startingBalances[_0x7c8e9a(0x147)]-0x1)*0x64;else{if(_0x57b6bf===_0x7c8e9a(0x158))_0x49413e=(_0x15785d/startingBalances[_0x7c8e9a(0xae)]-0x1)*0x64;else _0x49413e=(_0x15785d/startingBalances[_0x7c8e9a(0xc5)]-0x1)*0x64;}let _0x567e32=0x0;if(startingBalances['coins'])_0x465723[_0x7c8e9a(0x159)](_0x32f2fb=>{const _0x583389=_0x7c8e9a;let _0x3e6a71=startingBalances[_0x583389(0x17f)]['find'](_0x597d6b=>_0x597d6b['coin']===_0x32f2fb[_0x583389(0xdf)]);if(_0x3e6a71&&_0x3e6a71['coin']&&_0x32f2fb[_0x583389(0xc2)]!==0x0)_0x567e32+=_0x3e6a71[_0x583389(0xc2)]*_0x32f2fb['last'];});let _0x65670e=0x0;if(_0x42dcf4[_0x7c8e9a(0x177)]!==0x0){let _0x3ea19f=_0x42dcf4[_0x42dcf4['length']-0x1];_0x65670e=_0x3ea19f[_0x7c8e9a(0x1b1)];}_0x567e32-=_0x65670e;_0x73b305==='net-basecoin'&&(_0x49413e=(_0x15785d-_0x567e32)/startingBalances['basecoin']*0x64,_0x15785d=_0x15785d-_0x567e32);if(_0x73b305===_0x7c8e9a(0xb2)){let _0x475ca2=_0x57b6bf===_0x7c8e9a(0x158)?startingBalances[_0x7c8e9a(0xae)]:startingBalances[_0x7c8e9a(0xc5)];if(_0x3f9848===_0x7c8e9a(0x215)||_0x3f9848==='ETH')_0x567e32=_0x57b6bf===_0x7c8e9a(0x158)?_0x567e32*_0x4c5554[_0x7c8e9a(0xae)]:_0x567e32*_0x4c5554[_0x7c8e9a(0xc5)];else{if(usdBasecoins[_0x7c8e9a(0x188)](_0x3f9848))_0x567e32=_0x57b6bf==='EUR'?_0x567e32*_0x4c5554[_0x7c8e9a(0xae)]/_0x4c5554[_0x7c8e9a(0xc5)]:_0x567e32;else _0x3f9848===_0x7c8e9a(0x158)&&(_0x567e32=_0x57b6bf==='EUR'?_0x567e32:_0x567e32*_0x4c5554[_0x7c8e9a(0xc5)]/_0x4c5554[_0x7c8e9a(0xae)]);}_0x49413e=(_0x15785d-_0x567e32)/_0x475ca2*0x64,_0x15785d=_0x15785d-_0x567e32;}if(_0x49413e){if(_0x49413e<0x64)_0x49413e=_0x49413e['toFixed'](0x2);else{if(_0x49413e<0x3e8)_0x49413e=_0x49413e['toFixed'](0x1);else _0x49413e=_0x49413e['toFixed'](0x0);}}else _0x49413e=Number('0')['toFixed'](0x2);if(_0x15785d){if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0.000001)_0x15785d=_0x15785d[_0x7c8e9a(0x163)](0x2);else{if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0.1)_0x15785d=_0x15785d[_0x7c8e9a(0x163)](0x6);else{if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0x1)_0x15785d=_0x15785d[_0x7c8e9a(0x163)](0x5);else{if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0xa)_0x15785d=_0x15785d['toFixed'](0x4);else{if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0x64)_0x15785d=_0x15785d[_0x7c8e9a(0x163)](0x3);else{if(Math[_0x7c8e9a(0x1f5)](_0x15785d)<0x3e8)_0x15785d=_0x15785d['toFixed'](0x2);else _0x15785d=_0x15785d[_0x7c8e9a(0x163)](0x2);}}}}}}else _0x15785d=Number('0')[_0x7c8e9a(0x163)](0x2);}else _0x49413e=Number('0')['toFixed'](0x2);return{'value':_0x15785d,'change':_0x49413e,'leftTxt':_0x89cf80,'rightTxt':_0x157949};}async function getStartingBalances(_0x27cea5,_0x318b30=!![]){const _0x967852=_0x23db89;if(_0x27cea5[_0x967852(0x177)]!==0x0){const [_0x475334,_0x395e85,_0x2db540]=getPerf(_0x27cea5[0x0],!![]);let _0x5336bd=[];config[_0x967852(0x202)][_0x967852(0x159)](_0x3f2295=>{const _0x3f8a28=_0x967852;let _0x2849cd=0x0,_0x44f546;config[_0x3f8a28(0x194)][_0x3f8a28(0x159)](_0x137e0f=>{const _0x33171e=_0x3f8a28;let _0x34f676=_0x137e0f[_0x33171e(0x1fe)][_0x33171e(0xce)](_0x476852=>_0x476852[_0x33171e(0xdf)]==_0x3f2295[_0x33171e(0xdf)]);if(_0x34f676){_0x2849cd+=_0x34f676[_0x33171e(0xc2)];if(!_0x44f546)_0x44f546=_0x34f676[_0x33171e(0x12e)];}}),_0x5336bd['push']({'coin':_0x3f2295[_0x3f8a28(0xdf)],'number':_0x2849cd,'initialprice':_0x44f546});});const _0x33a0f6={'basecoin':_0x475334,'eur':_0x395e85,'usd':_0x2db540,'coins':_0x5336bd};if(_0x318b30)proxyEmit('starting-balances',_0x33a0f6);startingBalances=_0x33a0f6;}}function headlessMode(_0x1fd36a){const _0x894947=_0x23db89;let _0xfa3d5a=_0x1fd36a[_0x894947(0x202)],_0x4e5716=_0x1fd36a[_0x894947(0x226)],_0x534397=[];for(let _0x32ea27 of _0xfa3d5a){if(_0x32ea27['coin']!=config[_0x894947(0x147)]){if(_0x32ea27['delta']>=_0x4e5716/0x64){if(_0x32ea27[_0x894947(0x210)])_0x534397[_0x894947(0xe3)](_0x32ea27);}else{if(_0x32ea27[_0x894947(0xbe)]<=-_0x4e5716/0x64){if(_0x32ea27[_0x894947(0x210)])_0x534397[_0x894947(0xe3)](_0x32ea27);}}}}_0x534397['length']>0x0&&(lockOrders==ORDERS[_0x894947(0x16d)]&&!coolingDown&&_0x534397['forEach'](_0x10645c=>{const _0x354bcd=_0x894947;logger[_0x354bcd(0xdc)]('Trigger:\x20'+_0x10645c[_0x354bcd(0xdf)]+'\x20'+_0x10645c['number']+'\x20'+_0x10645c['last']+'\x20'+_0x10645c[_0x354bcd(0x150)]+'%\x20'+_0x10645c['target']+'%\x20'+(0x64*_0x10645c[_0x354bcd(0xbe)])[_0x354bcd(0x163)](0x2)+_0x354bcd(0x128)+_0x4e5716[_0x354bcd(0x163)](0x2)+'%)');}),placeOrder(_0x534397));}function notifyBalance(_0xb3c3ba){const _0x47aac4=_0x23db89;let _0x55c17c=_0xb3c3ba['portfolio'],_0x4d3653=_0xb3c3ba['threshold'],_0x5fb3d4=[];for(let _0x2cd257 of _0x55c17c){if(_0x2cd257[_0x47aac4(0xdf)]!=config[_0x47aac4(0x147)]){if(_0x2cd257[_0x47aac4(0xbe)]>=_0x4d3653/0x64){if(_0x2cd257['valid'])_0x5fb3d4[_0x47aac4(0xe3)](_0x2cd257);}else{if(_0x2cd257['delta']<=-_0x4d3653/0x64){if(_0x2cd257['valid'])_0x5fb3d4[_0x47aac4(0xe3)](_0x2cd257);}}}}if(_0x5fb3d4[_0x47aac4(0x177)]>0x0){let _0x20056d=_0x5fb3d4['map'](_0xf7587f=>_0xf7587f[_0x47aac4(0xdf)]);_0x20056d[_0x47aac4(0x225)]();let _0x4a625d=_0x20056d[_0x47aac4(0xa4)](',\x20');if(!lastCoinsToBalance)logHistory(_0x47aac4(0x149),_0x47aac4(0x13c));lastCoinsToBalance=_0x4a625d;}}function symbolToCoin(_0x25fd4a){const _0x556318=_0x23db89;let _0x1d3c6d;if(_0x25fd4a[_0x556318(0x188)]('/'+config[_0x556318(0x147)]))_0x1d3c6d=_0x25fd4a[_0x556318(0x205)]('/'+config['basecoin'],'');if(_0x25fd4a['includes'](config[_0x556318(0x147)]+'/'))_0x1d3c6d=_0x25fd4a[_0x556318(0x205)](config[_0x556318(0x147)]+'/','');return _0x1d3c6d;}async function unlockOrders(){const _0x5afdba=_0x23db89;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x5afdba(0xdc)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5d63da=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5d63da,validateOrdersState=_0x5afdba(0x176),persistOpenOrders([]),lockOrders=ORDERS[_0x5afdba(0x16d)],logger[_0x5afdba(0xdc)](_0x5afdba(0x191));}}async function validateOrders(_0x407417){const _0x4ba1d8=_0x23db89;if(_0x407417)validateOrdersState=_0x407417;logger['debug'](_0x4ba1d8(0xde)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x4ba1d8(0x1c7):lockOrders==0x2?_0x4ba1d8(0x136):_0x4ba1d8(0xb6)));let _0x303c1b=[],_0x442497=config[_0x4ba1d8(0x90)]==_0x4ba1d8(0x1f7)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x4ba1d8(0x184)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x4ba1d8(0xfb)])return;logger[_0x4ba1d8(0xdc)](_0x4ba1d8(0x124)+validateOrdersState),lastOrders[_0x4ba1d8(0x159)](_0x3a2af0=>{const _0x2d8b06=_0x4ba1d8;let _0x2b400d=![];_0x3a2af0[_0x2d8b06(0x1d8)]>0x0&&(_0x2b400d=!![]),_0x303c1b['push'](_0x2b400d),_0x2b400d&&config[_0x2d8b06(0x90)]!='market'&&logHistory('order','Order\x20filled:\x20'+_0x3a2af0['symbol']+'\x20'+_0x3a2af0['side']+'\x20#'+formatResult(_0x3a2af0['filled'],0x8)+'\x20@'+formatResult(_0x3a2af0[_0x2d8b06(0x12e)],0x8));}),_0x303c1b[_0x4ba1d8(0x159)]((_0x377802,_0x1816a0)=>{if(_0x377802)lastOrders['splice'](_0x1816a0,0x1);}),persistOpenOrders(lastOrders);const _0x3041a5=coolingDown?_0x4ba1d8(0x1ca):_0x4ba1d8(0x135);if(validateOrdersState==_0x4ba1d8(0x176)){validateOrdersState=_0x4ba1d8(0x1d9);if(_0x303c1b['includes'](![])){if(config[_0x4ba1d8(0x90)]==_0x4ba1d8(0x1f7)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x303c1b['includes'](![])){}else{if(allOrdersPlaced){if(config[_0x4ba1d8(0x90)]==_0x4ba1d8(0x1f7)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x303c1b[_0x4ba1d8(0x188)](![])&&(config[_0x4ba1d8(0x90)]==_0x4ba1d8(0x1f7)?logHistory(_0x4ba1d8(0x1d7),_0x4ba1d8(0xa3)+Math[_0x4ba1d8(0x9a)](_0x442497*validateOrderInterval/0xea60)+_0x4ba1d8(0x151)+_0x3041a5):(await cancelOrders(),logHistory(_0x4ba1d8(0x1d7),_0x4ba1d8(0x21f)+Math[_0x4ba1d8(0x9a)](_0x442497*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x3041a5))),await unlockOrders();else{if(validateOrdersState==_0x4ba1d8(0x197)){if(config['ordertype']!=_0x4ba1d8(0x1f7))logHistory('success',_0x4ba1d8(0xbb)+_0x3041a5);await unlockOrders();}}}}}async function cancelOrders(){const _0x301e32=_0x23db89;lastOrders[_0x301e32(0x159)](async _0x87538f=>{const _0x2dd257=_0x301e32;try{const _0x5b19ac=await exchange['cancelOrder'](_0x87538f[_0x2dd257(0xe4)],_0x87538f['symbol']);}catch(_0x45a729){if(_0x45a729[_0x2dd257(0x214)]()['includes'](_0x2dd257(0x18e))){}else await handleError(_0x45a729,_0x2dd257(0x1af));}});}function _0x206e(){const _0x54396f=['2\x20-\x20Validate\x20orders:\x20','recreateCoinResults()','entries','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','%\x20(','getTime','date','offset','full','Market','price','cancelOrder','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Bybit','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Cooldown\x20ended\x20-\x20balancing\x20resumed','\x20exchange','balancing\x20resumed','ORDERS.UNLOCKING','Crypt','trade','Uncaught\x20Exception:','log','Pausing\x20for\x20','Manual\x20balancing\x20required','page','-------------------------------\x0a','privateKey','USDC','open','Cex','yargs/yargs','placeOrder','initTickers()','USDP','basecoin','BNB','warning','Invalid\x20symbol:\x20','bot-','parseISO','emitHistory','basecoinvalue','added','distribution','\x20minutes\x20-\x20','Binance','\x20>\x20','botID','Net\x20','USD','leftTxt','EUR','forEach','Huobi','fetchOpenOrders','206oDbqPM','rightTxt','settings','\x20|\x20highest\x20fee:\x20','Net\x20effect','/output-000.log','exchange','toFixed','cancel','filter','shift','assign','excluded','buys','./logs/','max','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','UNLOCKED','indexOf','removed','remainingSymbols','onepagemode','/USD','freeze','Waited\x20','watchTransactions()','initial','length','getFullYear','\x20order:\x20','</pre>','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','sha256','colorscheme','startprice','coins','showname','reverse','orderstatus','add','timeout','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','USDT','ExchangeNotAvailable','includes','ID:\x20','apiSecret','\x20not\x20responding','(((.+)+)+)+$','InsufficientFunds','OrderNotFound','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','BUSD','2\x20-\x20Orders\x20unlocked','configuration','Bitget','liquidity','watchOrders()','closed','no\x20open\x20orders','average','Unknown\x20error\x20occured','<b>','recent20','autoliquidity','highest','fetchTickers()','has','event','date-fns','toUpperCase','limits','keys','Order\x20is\x20invalid:\x20','bots','test','search','toLowerCase','differenceInSeconds','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','\x20API\x20key\x20is\x20invalid','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','cancelOrders()','Exchange','netoffset','balances','function','4023780hTkSva','2\x20-\x20handling\x20FILLED\x20order:\x20','./version.json','AuthenticationError','emojisell','Limit\x20(high-margin)','percentage','\x20>\x20[DEBUG]\x20','/backup/','version','bot','floor','path','decrypt','\x20|\x20','Avoiding\x20continuous\x20order\x20attempts','\x20closed\x20the\x20connection','\x20/\x20','progress','ORDERS.LOCKED','startsWith','DDoSProtection','balancing\x20resumes\x20when\x20cooldown\x20ends','1\x20-\x20Handle\x20open\x20orders','getMonth','Saving\x20configuration','split','side','last','Loading\x20completed','API-key\x20format\x20invalid','PermissionDenied','Executed\x20','\x20-\x20bot\x20not\x20started','<pre>','success','filled','ongoing','1343925pNTWli','\x20has\x20a\x2024h\x20drop\x20of\x20','***','2509EYWvPX','Headless:\x20','\x20network\x20error','getOpenOrders()','stringify','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','defaults','constructor','RSA-OAEP','splice','unlinkSync','breakeven','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','total','Failed\x20to\x20load\x20coin\x20data\x20for\x20','getPortfolio','type','ETH','args','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Initializing\x20coin\x20results','getPortfolio(2)','canceled','974560AejfHa','abs','fromCodePoint','market','message','-config.json','Huobipro','Portfolio\x20change\x20detected:\x20','time','enabled','changes','timeshift','red_yellow_blue','2.3.5','portfolio','sell','close','replace','status','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','getCoins()','pro','writeFile','padEnd','change24h','-performance.json','startnumber','fee','valid','-events.json','data','Cryptocom','toString','BTC','cancelLoading','openOrders','customId','toggleBotMode','placeOrder()','fetchTicker','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','\x20minutes','Unfilled\x20order(s)\x20canceled\x20after\x20','startdate','stopExchange()','1\x20-\x20FILLED\x20known\x20order:\x20','existsSync','cost','sort','threshold','/EUR','RateLimitExceeded','ordertype','cooldown','storeHeadless','apply','ask','write','0\x20-\x20EXECUTION:\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','-results.json','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','round','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','apiPassword','Executing\x20exchange\x20reload','watchTrades','Error\x20while\x20deleting\x20files:\x20','padStart','\x20API\x20secret\x20is\x20invalid','botname','Order(s)\x20not\x20validated\x20after\x20','join','sells','spot','\x20metrics:</b>\x20\x0a\x0a','sendMetricsTelegram','\x20portfolio:</b>\x20\x0a\x0a','order','\x20-\x20pausing\x20bot\x20for\x20','loadSymbols()','RequestTimeout','eur','2386716vUSwCX','limit','isEqual','net-fiat','fetchTickers','error','timestamp','ORDERS.UNLOCKED','none','target','uncaughtException','event-history','No\x20more\x20open\x20orders\x20-\x20','sortBy','change','delta','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','symbol','storeConfiguration','number','************','getCoinNumber()','usd','emojibuy','currency','2824qHUGLX','1478100kvTbDf','fees','datetime','buy','performance','find','net-basecoin','loadMarkets','secure','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Resetting\x20bot\x20history','\x20|\x20Custom\x20ID:\x20','loading-canceled','password','getHours','value','\x20not\x20available','ExchangeError','001','debug','logs','1\x20-\x20Validate\x20orders:\x20','coin','format','remove','concat','push','orderId','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','createOrder','InvalidOrder','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','yyyy/MM/dd','get','final','<b>Bot\x20','initclient','substring','min','apiKey','watchOrders','bb-settings.json','watchTrades()','limit-high','19831uMhrSe','sendPortfolioTelegram',',\x20must\x20be\x20a\x203\x20digit\x20number','mkdirSync','BNB/','parse','LOCKED','getSeconds','running','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','getAllOrders()','lowdb','ticker',':\x20Bot\x20','Error\x20details:','restart','\x20:\x20','\x20hour','starting-balance-','send','fetchBalance','random','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','./config/','exec','amount','string','configuration-stored','\x20|\x20exchange:\x20','coin-loading-progress','getPortfolio(0)','Transaction\x20detection\x20blocked','yyyy-MM-dd\x27T\x27HH:mm:ss','fiat','slice','getDate','hybrid-crypto-js','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','set','headless','2.6.0','\x20value','2.5.0','bb-secure.json','Invalid\x20API\x20key\x20or\x20secret\x20entered','NetworkError','argv'];_0x206e=function(){return _0x54396f;};return _0x206e();}async function initCoinResults(_0x1afe17){const _0x458746=_0x23db89;_0x1afe17?logger[_0x458746(0xdc)]('Resetting\x20coin\x20results:\x20'+_0x1afe17):logger[_0x458746(0xdc)](_0x458746(0x1f1)),config[_0x458746(0x202)][_0x458746(0x159)](_0x14ed39=>{const _0x55cb23=_0x458746;if(!_0x14ed39[_0x55cb23(0x168)]&&_0x14ed39[_0x55cb23(0xdf)]!=config['basecoin']){const _0x457ef7=currentCoins[_0x55cb23(0xce)](_0x44b928=>_0x44b928[_0x55cb23(0xdf)]==_0x14ed39[_0x55cb23(0xdf)]),_0x3d9170=global['ticker'][noslash(_0x14ed39[_0x55cb23(0xc0)])];let _0x5e9c26=_0x457ef7?_0x457ef7[_0x55cb23(0xc2)]:null,_0x104679=_0x14ed39[_0x55cb23(0x181)]?0x1/_0x3d9170:_0x3d9170,_0x109324;config['liquidity'][_0x55cb23(0x159)](_0x3fed34=>{const _0x3e2339=_0x55cb23;!_0x109324&&(_0x109324=_0x3fed34[_0x3e2339(0x1fe)][_0x3e2339(0xce)](_0x381214=>_0x381214[_0x3e2339(0xdf)]==_0x14ed39[_0x3e2339(0xdf)]),_0x109324&&(_0x5e9c26=_0x109324[_0x3e2339(0xc2)],_0x104679=_0x109324[_0x3e2339(0x12e)]));});let _0x9dde57=dbCoinResults[_0x55cb23(0xea)](_0x55cb23(0x17f))['find']({'coin':_0x14ed39[_0x55cb23(0xdf)]})[_0x55cb23(0xd8)]();if(!_0x9dde57){const _0x455e65={'coin':_0x14ed39[_0x55cb23(0xdf)],'number':_0x5e9c26,'breakeven':_0x104679,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x55cb23(0xea)]('coins')['push'](_0x455e65)[_0x55cb23(0x95)]();}else{if(_0x1afe17&&_0x14ed39[_0x55cb23(0xdf)]==_0x1afe17){const _0xeb5ef0={'coin':_0x14ed39[_0x55cb23(0xdf)],'number':_0x5e9c26,'breakeven':_0x104679,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get']('coins')['find']({'coin':_0x14ed39[_0x55cb23(0xdf)]})[_0x55cb23(0x167)](_0xeb5ef0)[_0x55cb23(0x95)]();}}}});}async function updateCoinResults(_0x42e019,_0x217bf4=![]){const _0x379b18=_0x23db89;let _0x2afda6,_0x329e37,_0xbddb70,_0x36e5e5,_0x4c3706,_0x316fac,_0x2c20c8=dbCoinResults[_0x379b18(0xea)](_0x379b18(0x17f))[_0x379b18(0xce)]({'coin':_0x42e019[_0x379b18(0xdf)]})[_0x379b18(0xd8)](),_0x4d082c=![];_0x2c20c8&&Object[_0x379b18(0x126)](_0x2c20c8)[_0x379b18(0x159)](([_0xb9a095,_0x201066])=>{if(_0x201066==null)_0x4d082c=!![];});(!_0x2c20c8||_0x4d082c)&&(await initCoinResults(_0x42e019[_0x379b18(0xdf)]),_0x2c20c8=dbCoinResults[_0x379b18(0xea)](_0x379b18(0x17f))['find']({'coin':_0x42e019['coin']})[_0x379b18(0xd8)]());_0x42e019[_0x379b18(0x181)]&&(_0x316fac={'filled':_0x42e019[_0x379b18(0x1d8)]*_0x42e019[_0x379b18(0x12e)],'amount':_0x42e019[_0x379b18(0x1d8)]*_0x42e019[_0x379b18(0x12e)],'side':_0x42e019[_0x379b18(0x1cf)]=='sell'?_0x379b18(0xcc):'sell','price':0x1/_0x42e019[_0x379b18(0x12e)]},_0x42e019={..._0x42e019,..._0x316fac});_0x217bf4?_0x329e37=_0x42e019['side']==_0x379b18(0xcc)?_0x2c20c8[_0x379b18(0xc2)]+_0x42e019[_0x379b18(0x1d8)]:_0x2c20c8[_0x379b18(0xc2)]-_0x42e019[_0x379b18(0x1d8)]:_0x329e37=await getCoinNumber(_0x42e019[_0x379b18(0xdf)]);if(_0x42e019[_0x379b18(0x20f)]&&_0x42e019['fee'][_0x379b18(0xc7)]==config[_0x379b18(0x147)])_0x2afda6=_0x42e019['fee'][_0x379b18(0x224)];else{if(_0x42e019[_0x379b18(0x20f)]&&_0x42e019['fee']['currency']==_0x379b18(0x148)&&!_0x217bf4)_0x2afda6=_0x42e019[_0x379b18(0x20f)][_0x379b18(0x224)]*global['ticker'][_0x379b18(0x148)+config['basecoin']];else _0x2afda6=defaultFee*_0x42e019['filled']*_0x42e019[_0x379b18(0x12e)];}_0x42e019[_0x379b18(0x1cf)]==_0x379b18(0xcc)?(_0xbddb70=_0x329e37!=0x0?(_0x2c20c8[_0x379b18(0x1e8)]*_0x2c20c8[_0x379b18(0xc2)]+_0x42e019[_0x379b18(0x12e)]*(_0x329e37-_0x2c20c8[_0x379b18(0xc2)])+_0x2afda6)/_0x329e37:0x0,_0x36e5e5=_0x2c20c8['realized']):(_0xbddb70=_0x329e37!=0x0?(_0x2c20c8[_0x379b18(0x1e8)]*_0x2c20c8[_0x379b18(0xc2)]-_0x42e019['price']*(_0x2c20c8[_0x379b18(0xc2)]-_0x329e37)+_0x2afda6)/_0x329e37:0x0,_0x36e5e5=_0x2c20c8['realized']+(_0x42e019['price']-_0x2c20c8['breakeven'])*_0x42e019[_0x379b18(0x1d8)]);_0x4c3706=(_0x42e019[_0x379b18(0x12e)]-_0xbddb70-_0x2afda6/_0x42e019[_0x379b18(0x1d8)])*_0x329e37;let _0x335607={'coin':_0x42e019[_0x379b18(0xdf)],'number':_0x329e37,'breakeven':formatResult(_0xbddb70,0x8),'realized':formatResult(_0x36e5e5,0x8),'unrealized':formatResult(_0x4c3706,0x8),'fees':formatResult(_0x2c20c8[_0x379b18(0xca)]+_0x2afda6,0x8),'sells':_0x42e019[_0x379b18(0x1cf)]==_0x379b18(0x203)?_0x2c20c8[_0x379b18(0xa5)]+0x1:_0x2c20c8[_0x379b18(0xa5)],'buys':_0x42e019[_0x379b18(0x1cf)]==_0x379b18(0xcc)?_0x2c20c8['buys']+0x1:_0x2c20c8[_0x379b18(0x169)]};dbCoinResults[_0x379b18(0xea)](_0x379b18(0x17f))[_0x379b18(0xce)]({'coin':_0x42e019['coin']})[_0x379b18(0x167)](_0x335607)['write']();if(!_0x217bf4){if(_0x42e019[_0x379b18(0x20f)]&&_0x42e019[_0x379b18(0x20f)]['currency']==_0x379b18(0x148)){const _0x39bdf6=currentCoins[_0x379b18(0xce)](_0x965840=>_0x965840[_0x379b18(0xdf)]=='BNB');if(_0x39bdf6){let _0x25e906=dbCoinResults[_0x379b18(0xea)](_0x379b18(0x17f))['find']({'coin':_0x379b18(0x148)})[_0x379b18(0xd8)]();_0x335607={..._0x25e906,'number':_0x39bdf6[_0x379b18(0xc2)]},dbCoinResults[_0x379b18(0xea)]('coins')[_0x379b18(0xce)]({'coin':_0x379b18(0x148)})[_0x379b18(0x167)](_0x335607)[_0x379b18(0x95)]();}}}}async function placeOrder(_0x3000ff){const _0xbccc32=_0x23db89,_0x34c65f=config[_0xbccc32(0x90)]==_0xbccc32(0x1f7)?_0xbccc32(0x1f7):'limit';if(lockOrders==ORDERS[_0xbccc32(0x16d)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0xbccc32(0xfb)],allOrdersPlaced=![],validateOrdersState=_0xbccc32(0x176);let _0x4289a6=![];lastOrders=[];for(const _0x134258 of _0x3000ff){let _0x547d13,_0x4d4fe7,_0x66aac3,_0x33d416,_0x895973,_0x512331=_0x134258[_0xbccc32(0xc0)];try{const _0x49a1fc=await exchange[_0xbccc32(0x21b)](_0x512331);_0x547d13=_0x134258[_0xbccc32(0x181)]?0x1/_0x134258[_0xbccc32(0x1d0)]:_0x134258['last'],_0x4d4fe7=_0x49a1fc['bid'],_0x66aac3=_0x49a1fc[_0xbccc32(0x94)];_0x134258[_0xbccc32(0x181)]?(_0x33d416=_0x134258['side']==_0xbccc32(0xcc)?'sell':_0xbccc32(0xcc),_0x895973=Math[_0xbccc32(0x1f5)](_0x134258[_0xbccc32(0x138)])/_0x547d13):(_0x33d416=_0x134258[_0xbccc32(0x1cf)],_0x895973=Math[_0xbccc32(0x1f5)](_0x134258['trade']));_0x34c65f==_0xbccc32(0xb0)&&(config[_0xbccc32(0x90)]==_0xbccc32(0xf4)&&(_0x547d13=_0x33d416==_0xbccc32(0xcc)?_0x4d4fe7:_0x66aac3),config[_0xbccc32(0x90)]=='limit-low'&&(_0x547d13=_0x33d416==_0xbccc32(0xcc)?_0x66aac3:_0x4d4fe7));_0x895973=formatResult(_0x895973,0x8),_0x547d13=formatResult(_0x547d13,0x8);const _0x4d5969=_0x33d416==_0xbccc32(0x203)?config[_0xbccc32(0x1b8)]?String[_0xbccc32(0x1f6)]('0x'+config[_0xbccc32(0x1b8)])+'\x20':'':config[_0xbccc32(0xc6)]?String[_0xbccc32(0x1f6)]('0x'+config['emojibuy'])+'\x20':'',_0x4f49a0=_0x34c65f=='market'?_0xbccc32(0x12d):config[_0xbccc32(0x90)]==_0xbccc32(0xf4)?_0xbccc32(0x1b9):'Limit\x20(low-margin)',_0x121453=(Math[_0xbccc32(0x1bf)](Math[_0xbccc32(0x10a)]()*0x35a4e900)+0x5f5e100)[_0xbccc32(0x214)]();lastOrders[_0xbccc32(0xe3)]({'customId':_0x121453,'symbol':_0x512331,'coin':_0x134258[_0xbccc32(0xdf)],'amount':_0x895973,'price':_0x547d13,'side':_0x33d416,'reverse':_0x134258[_0xbccc32(0x181)],'filled':0x0});if(_0x34c65f=='market')logHistory(_0xbccc32(0xaa),''+_0x4d5969+_0x4f49a0+_0xbccc32(0x179)+_0x512331+'\x20'+_0x33d416+'\x20#'+formatResult(_0x895973,0x8)+'\x20@'+formatResult(_0x547d13,0x8));else logHistory('order',''+_0x4d5969+_0x4f49a0+_0xbccc32(0x179)+_0x512331+'\x20'+_0x33d416+'\x20#'+formatResult(_0x895973,0x8)+'\x20@'+formatResult(_0x547d13,0x8));let _0x98dd5c;_0x34c65f==_0xbccc32(0x1f7)?_0x33d416==_0xbccc32(0xcc)&&[_0xbccc32(0x131),_0xbccc32(0x193),_0xbccc32(0x142),_0xbccc32(0x15a),_0xbccc32(0x1fa)][_0xbccc32(0x188)](config[_0xbccc32(0x162)])?_0x98dd5c=await exchange[_0xbccc32(0xe6)](_0x512331,_0x34c65f,_0x33d416,_0x895973,_0x547d13):_0x98dd5c=await exchange[_0xbccc32(0xe6)](_0x512331,_0x34c65f,_0x33d416,_0x895973,undefined):_0x98dd5c=await exchange[_0xbccc32(0xe6)](_0x512331,_0x34c65f,_0x33d416,_0x895973,_0x547d13);logger[_0xbccc32(0xdc)](_0xbccc32(0x189)+_0x98dd5c['id']+_0xbccc32(0xd4)+_0x121453);const _0x3d7f54=lastOrders['length']-0x1;if(_0x3d7f54>=0x0&&lastOrders[_0x3d7f54][_0xbccc32(0x218)]==_0x121453){lastOrders[_0x3d7f54][_0xbccc32(0xe4)]=_0x98dd5c['id'];if(_0x98dd5c[_0xbccc32(0x10e)])lastOrders[_0x3d7f54][_0xbccc32(0x10e)]=_0x98dd5c['amount'];if(_0x98dd5c[_0xbccc32(0x12e)])lastOrders[_0x3d7f54][_0xbccc32(0x12e)]=_0x98dd5c[_0xbccc32(0x12e)];lastOrders[_0x3d7f54][_0xbccc32(0x20f)]=_0x98dd5c[_0xbccc32(0x20f)];}if(config[_0xbccc32(0x91)]!=0x0){let _0x1fddce=null;if(cooldownTracker[_0xbccc32(0x177)]==config[_0xbccc32(0x91)]-0x1)_0x1fddce=cooldownTracker['shift']();const _0x5e3a2b=getTimeStamp();cooldownTracker[_0xbccc32(0xe3)](_0x5e3a2b);if(_0x1fddce){const _0x6c7cb9=fns[_0xbccc32(0x1aa)](new Date(_0x5e3a2b),new Date(_0x1fddce));if(_0x6c7cb9<cooldownInterval){logHistory(_0xbccc32(0xb4),_0xbccc32(0x1d4)+config[_0xbccc32(0x91)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0xbccc32(0xe5)+cooldownPeriod/(0xe10*0x3e8)+_0xbccc32(0x106)),coolingDown=!![];break;}}}}catch(_0x295196){if(_0x295196['toString']()[_0xbccc32(0x188)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0xbccc32(0x165)](_0x19672d=>_0x19672d[_0xbccc32(0xc0)]!=_0x512331),logHistory(_0xbccc32(0xb4),_0xbccc32(0x97)+_0x512331),_0x4289a6=!![];else{if(_0x295196[_0xbccc32(0x214)]()['includes']('Invalid\x20quantity'))lastOrders=lastOrders[_0xbccc32(0x165)](_0x48f4eb=>_0x48f4eb[_0xbccc32(0xc0)]!=_0x512331),logHistory('error','Order\x20amount\x20is\x20invalid:\x20'+_0x512331),_0x4289a6=!![];else{if(_0x295196['toString']()[_0xbccc32(0x188)](_0xbccc32(0xe7)))lastOrders=lastOrders[_0xbccc32(0x165)](_0x50f883=>_0x50f883[_0xbccc32(0xc0)]!=_0x512331),logHistory(_0xbccc32(0xb4),_0xbccc32(0x1a5)+_0x512331),logger[_0xbccc32(0xdc)](_0x295196),_0x4289a6=!![];else _0x295196['toString']()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0xbccc32(0x165)](_0x503c63=>_0x503c63[_0xbccc32(0xc0)]!=_0x512331),logHistory(_0xbccc32(0xb4),_0xbccc32(0x97)+_0x512331),_0x4289a6=!![]):(lastOrders=lastOrders[_0xbccc32(0x165)](_0x330b6e=>_0x330b6e[_0xbccc32(0xc0)]!=_0x512331),await handleError(_0x295196,_0xbccc32(0x21a),_0x512331));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0xbccc32(0x177)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x3c0214=config['ordertype']==_0xbccc32(0x1f7)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x3c0214);}else unlockOrders();_0x4289a6&&config[_0xbccc32(0x11c)]&&(logHistory('error',_0xbccc32(0x1c3)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0xbccc32(0x133)));}else{if(coolingDown)!config[_0xbccc32(0x11c)]&&logHistory(_0xbccc32(0xb4),_0xbccc32(0x21c));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0xbccc32(0x11c)]&&(config[_0xbccc32(0x90)]==_0xbccc32(0x1f7)?logHistory('error',_0xbccc32(0x18f)):logHistory(_0xbccc32(0xb4),_0xbccc32(0x10b))));}}function persistOpenOrders(_0x1d5604){const _0x24d430=_0x23db89,_0x5a21a7={...config,'openOrders':_0x1d5604};let _0x539000=dbConfig[_0x24d430(0xea)]('bot')['find']({'botID':botID})[_0x24d430(0xd8)]();_0x539000&&dbConfig[_0x24d430(0xea)](_0x24d430(0x1be))['find']({'botID':botID})[_0x24d430(0x167)](_0x5a21a7)[_0x24d430(0x95)]();}function restoreOrders(){const _0x351419=_0x23db89;let _0x3c5e29;config[_0x351419(0x217)]&&allOpenOrders[_0x351419(0x159)](_0x43ed71=>{const _0x40c08f=_0x351419,_0x4d0a38=config[_0x40c08f(0x217)][_0x40c08f(0xce)](_0x247bfa=>_0x247bfa[_0x40c08f(0xe4)]==_0x43ed71['id']);_0x4d0a38&&(lastOrders[_0x40c08f(0xe3)](_0x4d0a38),_0x3c5e29=_0x43ed71[_0x40c08f(0xb5)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x351419(0xfb)],validateOrdersState=_0x351419(0x1d9),allOrdersPlaced=!![];const _0x1adc0c=new Date()['getTime'](),_0x3e71b7=config['ordertype']==_0x351419(0x1f7)?validateOrderTimeout*0x3c*0x3e8:config[_0x351419(0x184)]*0x3c*0x3e8;if(_0x3c5e29+_0x3e71b7>_0x1adc0c){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x163e5f=_0x351419;validateOrders(_0x163e5f(0xeb));},_0x3c5e29+_0x3e71b7-_0x1adc0c);}else validateOrders(_0x351419(0xeb));}}async function sendMetricsTelegram(){const _0x2c17d8=_0x23db89;if(!coinsLoaded){process[_0x2c17d8(0x108)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0xa655ce=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x24dc1b='';if(config[_0x2c17d8(0x180)])_0x24dc1b=_0x2c17d8(0x19a)+config[_0x2c17d8(0xa2)]+_0x2c17d8(0xa7);else _0x24dc1b='<b>Bot\x20'+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x3c63ec=getKPIs('basecoin'),_0x5a9e9b=getKPIs(_0x2c17d8(0x116),config['fiat']),_0x29b514=getKPIs(_0x2c17d8(0xcf)),_0x17de37=getKPIs(_0x2c17d8(0xb2),config[_0x2c17d8(0x116)]);_0x24dc1b+=_0x2c17d8(0x1d6),_0x24dc1b+=_0x3c63ec['leftTxt']+_0x2c17d8(0x105)+_0x3c63ec[_0x2c17d8(0xd8)]+'\x0a',_0x24dc1b+=_0x3c63ec['rightTxt']+':\x20'+_0x3c63ec['change']+'%\x0a',_0x24dc1b+=_0x5a9e9b[_0x2c17d8(0x157)]+'\x20:\x20'+_0x5a9e9b['value']+'\x0a',_0x24dc1b+=_0x5a9e9b[_0x2c17d8(0x15d)]+':\x20'+_0x5a9e9b[_0x2c17d8(0xbd)]+'%\x0a',_0x24dc1b+=_0x29b514[_0x2c17d8(0x157)]+':\x20'+_0x29b514[_0x2c17d8(0xd8)]+'\x20('+config[_0x2c17d8(0x147)]+')\x0a',_0x24dc1b+=_0x29b514['rightTxt']+':\x20'+_0x29b514['change']+_0x2c17d8(0x128)+config['basecoin']+')\x0a',_0x24dc1b+=_0x17de37['leftTxt']+':\x20'+_0x17de37[_0x2c17d8(0xd8)]+'\x20('+config[_0x2c17d8(0x116)]+')\x0a',_0x24dc1b+=_0x17de37[_0x2c17d8(0x15d)]+':\x20'+_0x17de37[_0x2c17d8(0xbd)]+_0x2c17d8(0x128)+config[_0x2c17d8(0x116)]+')\x0a',_0x24dc1b+=_0x2c17d8(0x17a),process['send']({'telegrammsg':_0x24dc1b},_0x265ee7=>{});}async function sendPortfolioTelegram(){const _0x43614b=_0x23db89;if(!coinsLoaded){process[_0x43614b(0x108)]({'telegrammsg':_0x43614b(0x21d)},_0x6d8ea2=>{});return;}let _0x4cae36='';if(config[_0x43614b(0x180)])_0x4cae36=_0x43614b(0x19a)+config[_0x43614b(0xa2)]+_0x43614b(0xa9);else _0x4cae36=_0x43614b(0xec)+botID+_0x43614b(0xa9);_0x4cae36+=_0x43614b(0x1d6),_0x4cae36+=_0x43614b(0x13e),_0x4cae36+=_0x43614b(0x1ab),_0x4cae36+=_0x43614b(0x13e),currentCoins[_0x43614b(0x159)](_0x18f4ed=>{const _0x444b37=_0x43614b;_0x4cae36+=_0x18f4ed['coin'][_0x444b37(0x20b)](0x7)+'|\x20'+formatPad(_0x18f4ed[_0x444b37(0x150)],0x2,0x6)+'|\x20'+formatPad(_0x18f4ed[_0x444b37(0xb8)],0x2,0x6)+'|\x20'+formatPad(_0x18f4ed[_0x444b37(0xbe)]*0x64,0x2,0x6)+'\x0a';}),_0x4cae36+=_0x43614b(0x17a),process['send']({'telegrammsg':_0x4cae36},_0x5d9afb=>{});}function formatPad(_0x57e05e,_0x10aa40,_0x5d5616){const _0x1c3ea5=_0x23db89,_0x4a1e8d=formatResultString(_0x57e05e,_0x10aa40);return _0x4a1e8d?_0x4a1e8d[_0x1c3ea5(0xa0)](_0x5d5616):''['padStart'](_0x5d5616);}function logHistory(_0x3f03cc,_0x53b427,_0x178ee2=''){const _0x4dcb5a=_0x23db89;logger[_0x4dcb5a(0x12c)](''+_0x53b427);let _0x3b56ed={'time':getTimeStamp(),'type':_0x3f03cc,'event':_0x53b427};dbLogs['get'](_0x4dcb5a(0xdd))['push'](_0x3b56ed)[_0x4dcb5a(0x95)]();if(_0x178ee2=='')_0x178ee2=_0x53b427;proxyEmit(_0x4dcb5a(0x1a0),{'log':_0x3b56ed,'summary':_0x178ee2}),process[_0x4dcb5a(0x108)]({'telegram':{..._0x3b56ed,'botname':config[_0x4dcb5a(0xa2)],'showname':config[_0x4dcb5a(0x180)]}},_0x31cbba=>{});}function emitHistory(_0x5db9e4={}){const _0x24e399=_0x23db89;Object[_0x24e399(0x1a4)](_0x5db9e4)[_0x24e399(0x177)]==0x0&&(_0x5db9e4={'type':[_0x24e399(0xaa),_0x24e399(0x1a0)],'event':'','page':0x1});if(_0x5db9e4[_0x24e399(0x1ed)]['includes'](_0x24e399(0x1a0)))_0x5db9e4[_0x24e399(0x1ed)][_0x24e399(0x1e6)](_0x5db9e4['type'][_0x24e399(0x16e)](_0x24e399(0x1a0)),0x1,_0x24e399(0xb4),_0x24e399(0x149),_0x24e399(0x1d7));if(dbLogs[_0x24e399(0x19f)](_0x24e399(0xdd))[_0x24e399(0xd8)]()){let _0x2c9319=dbLogs['get'](_0x24e399(0xdd))[_0x24e399(0x165)](_0x31121e=>{const _0x460fea=_0x24e399;if(_0x5db9e4[_0x460fea(0x1ed)]['length']==0x0)return![];else return _0x5db9e4[_0x460fea(0x1ed)][_0x460fea(0x188)](_0x31121e['type']);})[_0x24e399(0x165)](_0x3acf22=>{const _0x2346fe=_0x24e399;if(_0x5db9e4[_0x2346fe(0x1a0)]=='')return!![];else return _0x3acf22['event'][_0x2346fe(0x1a9)]()[_0x2346fe(0x188)](_0x5db9e4[_0x2346fe(0x1a0)][_0x2346fe(0x1a9)]());})[_0x24e399(0xbc)](_0x24e399(0x1fc)),_0xc019b=_0x2c9319['value']()[_0x24e399(0x177)];_0x2c9319=_0x2c9319[_0x24e399(0x181)]()['slice']((_0x5db9e4[_0x24e399(0x13d)]-0x1)*logPageSize,_0x5db9e4['page']*logPageSize-0x1)[_0x24e399(0x181)]()['value'](),proxyEmit(_0x24e399(0xba),{'logs':_0x2c9319,'total':_0xc019b});}else proxyEmit(_0x24e399(0xba),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x1d3864){const _0x1c1a98=_0x23db89;if(dbLogs[_0x1c1a98(0x19f)](_0x1c1a98(0xdd))[_0x1c1a98(0xd8)]()){const _0x7fa776=dbLogs[_0x1c1a98(0xea)](_0x1c1a98(0xdd))[_0x1c1a98(0xbc)](_0x1c1a98(0x1fc))[_0x1c1a98(0x165)](_0x83d035=>{const _0x17337f=_0x1c1a98;return _0x83d035[_0x17337f(0x1ed)]==_0x17337f(0xaa);})[_0x1c1a98(0xd8)]();dbLogs[_0x1c1a98(0xea)]('logs')[_0x1c1a98(0xe1)]()[_0x1c1a98(0x95)](),dbLogs[_0x1c1a98(0xea)]('logs')[_0x1c1a98(0x167)](_0x7fa776)[_0x1c1a98(0x95)](),emitHistory(_0x1d3864);}}async function pauseBot(){const _0x3ddfa9=_0x23db89,_0x528b88=new Date()[_0x3ddfa9(0x129)]();if(!lastErrorShown||_0x528b88-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x528b88;!lastBotPause?(lastBotPause=_0x528b88,consecutivePauses=0x1):(_0x528b88-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3ddfa9(0x108)]({'stop':_0x3ddfa9(0x104)},_0x278f73=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3ddfa9(0x129)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0xfbe6e2=_0x23db89;botPaused=!![],await sleep(0x3e8),process[_0xfbe6e2(0x108)]({'stop':'kill'},_0x116184=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x4d1408,_0x2225e7){const _0x2038d4=_0x23db89;if(botPaused)return;const _0xbba19c=config[_0x2038d4(0x162)]||_0x2038d4(0x1b0);if(_0x2225e7)logger['debug']('Exception\x20thrown\x20in\x20'+_0x2225e7);const _0xab936d=()=>{const _0x47ecc9=_0x2038d4;loading[_0x47ecc9(0xb4)]=!![],emitLoadingProgress();};if(_0x4d1408[_0x2038d4(0x214)]()['includes'](_0x2038d4(0x1d2)))logHistory(_0x2038d4(0xb4),_0xbba19c+_0x2038d4(0x17b)),_0xab936d();else{if(_0x4d1408[_0x2038d4(0x214)]()['includes'](_0x2038d4(0x16c)))logHistory(_0x2038d4(0xb4),_0xbba19c+_0x2038d4(0x207)),_0xab936d();else _0x4d1408[_0x2038d4(0x214)]()[_0x2038d4(0x188)](_0x2038d4(0x1b7))?(logHistory('error',_0xbba19c+_0x2038d4(0x1e2)),logHistory(_0x2038d4(0xb4),_0x2038d4(0xfe)),_0xab936d()):await handleError(_0x4d1408,null);}}async function handleError(_0x1f69d9,_0x1ff494,_0x447c50=''){const _0x309089=_0x23db89;if(botPaused)return;const _0x4f9672=config[_0x309089(0x162)]||_0x309089(0x1b0);if(_0x1ff494)logger[_0x309089(0xdc)]('Exception\x20thrown\x20in\x20'+_0x1ff494);if(_0x1f69d9[_0x309089(0x214)]()['includes'](_0x309089(0x1c9))||_0x1f69d9['toString']()[_0x309089(0x188)](_0x309089(0x228)))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0x1e9)+pauseBotMsg),await pauseBot();else{if(_0x1f69d9[_0x309089(0x214)]()[_0x309089(0x188)](_0x309089(0x187))||_0x1f69d9[_0x309089(0x214)]()['includes']('OnMaintenance'))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0xd9)+pauseBotMsg),await pauseBot();else{if(_0x1f69d9['toString']()[_0x309089(0x188)](_0x309089(0xad)))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0x18b)+pauseBotMsg),await pauseBot();else{if(_0x1f69d9[_0x309089(0x214)]()[_0x309089(0x188)](_0x309089(0xe8)))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0x1c4)+pauseBotMsg),await pauseBot();else{if(_0x1f69d9['toString']()[_0x309089(0x188)](_0x309089(0x1ae)))logHistory(_0x309089(0xb4),'Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9[_0x309089(0x214)]()[_0x309089(0x188)]('InvalidNonce'))logHistory(_0x309089(0xb4),'API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9 instanceof ccxt[_0x309089(0x122)])logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0x1df)+pauseBotMsg),logger[_0x309089(0xdc)](_0x309089(0x103),_0x1f69d9),await pauseBot();else{if(_0x1f69d9[_0x309089(0x214)]()[_0x309089(0x188)](_0x309089(0x1d2)))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0x1ac)),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9['toString']()[_0x309089(0x188)](_0x309089(0x16c)))logHistory(_0x309089(0xb4),_0x4f9672+_0x309089(0xa1)),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9['toString']()[_0x309089(0x188)](_0x309089(0x1b7)))logHistory(_0x309089(0xb4),_0x4f9672+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9['toString']()['includes'](_0x309089(0x1d3)))logHistory(_0x309089(0xb4),_0x4f9672+'\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions'),logHistory(_0x309089(0xb4),_0x309089(0x99)),await killBot();else{if(_0x1f69d9[_0x309089(0x214)]()[_0x309089(0x188)](_0x309089(0x18d)))logHistory(_0x309089(0xb4),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x447c50);else _0x1f69d9 instanceof ccxt[_0x309089(0xda)]?(logHistory(_0x309089(0xb4),_0x4f9672+'\x20exchange\x20error'),logger[_0x309089(0xdc)](_0x309089(0x103),_0x1f69d9)):(logHistory(_0x309089(0xb4),_0x309089(0x199)+pauseBotMsg),logger[_0x309089(0xdc)](_0x309089(0x103),_0x1f69d9),await pauseBot());}}}}}}}}}}}}function formatResult(_0x41184d,_0x464030){return parseFloat(_0x41184d['toFixed'](_0x464030));}function formatResultTruncate(_0x406a83,_0x5453c0){const _0x5ab3ff=_0x23db89;let _0x4fe046=formatResultString(_0x406a83,0xa),_0x2c5800=_0x4fe046[_0x5ab3ff(0x16e)]('.');return _0x2c5800!=-0x1&&(_0x4fe046=_0x4fe046[_0x5ab3ff(0x117)](0x0,_0x2c5800+_0x5453c0+0x1)),Number(_0x4fe046);}function formatResultString(_0x33094f,_0x31b760){const _0x295c7e=_0x23db89;let _0x2bd687;if(!(''+_0x33094f)[_0x295c7e(0x188)]('e'))_0x2bd687=+(Math[_0x295c7e(0x9a)](_0x33094f+'e+'+_0x31b760)+'e-'+_0x31b760);else{let _0x4dcf86=(''+_0x33094f)[_0x295c7e(0x1ce)]('e'),_0x3aa2c1='';+_0x4dcf86[0x1]+_0x31b760>0x0&&(_0x3aa2c1='+'),_0x2bd687=+(Math['round'](+_0x4dcf86[0x0]+'e'+_0x3aa2c1+(+_0x4dcf86[0x1]+_0x31b760))+'e-'+_0x31b760);}return Number(_0x2bd687)[_0x295c7e(0x163)](_0x31b760);}function getServerTime(){const _0x11088d=_0x23db89,_0x55097b=new Date();return _0x55097b[_0x11088d(0x178)]()+'/'+(_0x55097b[_0x11088d(0x1cc)]()+0x1)['toString']()[_0x11088d(0xa0)](0x2,'0')+'/'+_0x55097b[_0x11088d(0x118)]()[_0x11088d(0x214)]()[_0x11088d(0xa0)](0x2,'0')+'\x20'+_0x55097b[_0x11088d(0xd7)]()[_0x11088d(0x214)]()[_0x11088d(0xa0)](0x2,'0')+':'+_0x55097b['getMinutes']()[_0x11088d(0x214)]()[_0x11088d(0xa0)](0x2,'0')+':'+_0x55097b[_0x11088d(0xfc)]()['toString']()[_0x11088d(0xa0)](0x2,'0');}function getTimeStamp(){const _0x58a955=_0x23db89,_0x595b8e=shiftedTime();return _0x595b8e[_0x58a955(0x178)]()+'/'+(_0x595b8e['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x595b8e['getDate']()[_0x58a955(0x214)]()[_0x58a955(0xa0)](0x2,'0')+'\x20'+_0x595b8e[_0x58a955(0xd7)]()[_0x58a955(0x214)]()['padStart'](0x2,'0')+':'+_0x595b8e['getMinutes']()['toString']()[_0x58a955(0xa0)](0x2,'0')+':'+_0x595b8e[_0x58a955(0xfc)]()[_0x58a955(0x214)]()['padStart'](0x2,'0');}function getDate(){const _0x251e43=_0x23db89,_0x271c41=shiftedTime();return _0x271c41[_0x251e43(0x178)]()+'/'+(_0x271c41['getMonth']()+0x1)[_0x251e43(0x214)]()['padStart'](0x2,'0')+'/'+_0x271c41[_0x251e43(0x118)]()[_0x251e43(0x214)]()[_0x251e43(0xa0)](0x2,'0');}function getHour(){const _0xcdb1e5=_0x23db89,_0x53abbd=shiftedTime();return _0x53abbd[_0xcdb1e5(0xd7)]()[_0xcdb1e5(0x214)]()['padStart'](0x2,'0');}function sleep(_0x288812){return new Promise(_0x8271b0=>setTimeout(_0x8271b0,_0x288812));}function shiftedTime(){const _0x434161=_0x23db89,_0x209d12=new Date();let _0x115666=_0x209d12;if(config&&config[_0x434161(0x1ff)]!==0x0)_0x115666=fns[_0x434161(0x183)](_0x209d12,{'hours':config['timeshift']});return _0x115666;}function timer(_0x581faf){const _0x20fdac=_0x23db89,_0x4c0dba=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x581faf,_0x4c0dba):console[_0x20fdac(0x13a)](getTimeStamp()+':\x20timer\x20>',_0x581faf,(_0x4c0dba-lasttime)/0x3e8),lasttime=_0x4c0dba;}