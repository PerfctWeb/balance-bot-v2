const _0x411b48=_0x5f1e;(function(_0x39ce46,_0x3b52af){const _0x3fb79c=_0x5f1e,_0x5e3b41=_0x39ce46();while(!![]){try{const _0x4bd82d=parseInt(_0x3fb79c(0x1c3))/0x1*(-parseInt(_0x3fb79c(0x28b))/0x2)+parseInt(_0x3fb79c(0x279))/0x3*(-parseInt(_0x3fb79c(0x28a))/0x4)+-parseInt(_0x3fb79c(0x281))/0x5+parseInt(_0x3fb79c(0x1ac))/0x6+-parseInt(_0x3fb79c(0x1a0))/0x7+-parseInt(_0x3fb79c(0x26d))/0x8+parseInt(_0x3fb79c(0x294))/0x9;if(_0x4bd82d===_0x3b52af)break;else _0x5e3b41['push'](_0x5e3b41['shift']());}catch(_0x4a9eb6){_0x5e3b41['push'](_0x5e3b41['shift']());}}}(_0x1028,0x18ad0));const _0x5dd6e8=function(){let _0x5873f2=!![];return function(_0x47be1b,_0x235e3d){const _0x165027=_0x5873f2?function(){const _0x3cf29f=_0x5f1e;if(_0x235e3d){const _0x288b6d=_0x235e3d[_0x3cf29f(0x27f)](_0x47be1b,arguments);return _0x235e3d=null,_0x288b6d;}}:function(){};return _0x5873f2=![],_0x165027;};}(),_0x445c11=_0x5dd6e8(this,function(){const _0x539ffb=_0x5f1e;return _0x445c11[_0x539ffb(0x1a8)]()[_0x539ffb(0x234)]('(((.+)+)+)+$')[_0x539ffb(0x1a8)]()[_0x539ffb(0x187)](_0x445c11)[_0x539ffb(0x234)](_0x539ffb(0x203));});_0x445c11();function _0x1028(){const _0x64e254=['\x20|\x20Error\x20details:\x20','sells','type','valid','BTC/EUR','asset','kill','filter','usd','OrderNotFound','\x20order:\x20','Order(s)\x20not\x20validated\x20after\x20','replace','entries','Unfilled\x20order(s)\x20canceled\x20after\x20','RequestTimeout','configuration-stored','Executed\x20','slice','realized','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','number','EUR','limits','orderType','offset','buy','padStart','symbol','Invalid\x20quantity','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','botname','min','value','USDT','breakeven','spot','DAI/','BTC/USDT','getDate','price','last','\x20-\x20','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','(((.+)+)+)+$','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','milliseconds','************','format','limit-low','yyyy/MM/dd\x20HH:mm:ss','API-key\x20format\x20invalid','showname','amount','executionReport','target','fetchOHLCV','eachDayOfInterval','BTCEUR','Performance\x20recreation\x20completed\x20successfully','order','001','sort','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','parseISO','getPortfolio','logs','fetchOrders','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','\x20>\x20','outboundAccountPosition','version','datetime','Order\x20filled:\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','cost','-config.json','length','DDoSProtection','getStartingBalances','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','-performance.json','placeOrder','fetchTickers','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','includes',',\x20must\x20be\x20a\x203\x20digit\x20number','BTCUSDT','subscribeSpotKline','wss://stream.binance.com:9443','args','buys','timeshift','search','Order(s)\x20filled\x20-\x20balancing\x20resumed','emojibuy','fee','privateKey','function','initws()','error','trade','coin-loading-progress','delta','time','secure','HOT/EUR','defaults','apiSecret','Binance\x20API\x20secret\x20is\x20invalid','mkdirSync','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','apiKey','emitHistory','closeWs','decrypt','toLowerCase','WebSockets(','performance','date-fns','BTC/BUSD','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','headless','yyyy/MM/dd','\x20orders\x20in\x20less\x20than\x20','timestamp','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','eur','market','RSA-OAEP','data','getTime','\x20hour','currency','shift','filled','limit-high','event-history','forEach','assign','sell','threshold','get','storeHeadless','storeConfiguration','coins','accumulatedQuantity','splice','BNB','distribution','1017176OLLtuG','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','wsKey','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','has','symbols','differenceInCalendarDays','configuration','-results.json','indexOf','bb-secure.json','coin','948SBWqec','isArray','fees','fromCodePoint','limit','write','apply','round','46285EXaqqR','page','createOrder','startdate','HOT/BTC','Binance\x20API\x20key\x20is\x20invalid','userData','emojisell','reverse','2140EFXiOi','26cRjtAN','exchange','push','BUSD','wss://stream.binance.us:9443','sortBy','Limit\x20(low-margin)','BTC','reduce','6069105ApnUga','LIMIT','cancelLoading','InvalidNonce','cancel','constructor','bb-settings.json','Crypt','cancelOrder','test','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','botID','portfolio','success','getCloses()','date','map','startprice','kline','balances','cooldown','total','find','exit','log','initclient','max','wsMarket','Pausing\x20bot\x20for\x205\x20minutes\x20(','bid','742581ZxyaEg','Limit\x20(high-margin)','getMonth','ticker','bot-','send','timeout','recreateHistory()','toString','side','bot','ordertype','27576AtJXlV','basecoin','binanceus','restart','remainingSymbols','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','placeOrder()','Order:\x20','\x20|\x20Unknown\x20error\x20occured','toFixed','Error:\x20Invalid\x20argument\x20',')\x20|\x20Error\x20details:\x20','BTCBUSD','./version.json','startnumber','stringify','binance','getPortfolio()','running','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','./config/','keys','split','12794NGDaLE','parse','add','orderId','abs','lowdb','eventType',':\x20Bot\x20','event','getHours','recreate','remove','\x20minutes\x20-\x20balancing\x20resumed','getCoins()','getFullYear','lowdb/adapters/FileSync','message','excluded',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','argv'];_0x1028=function(){return _0x64e254;};return _0x1028();}'use strict';const ccxt=require('ccxt'),low=require(_0x411b48(0x1c8)),FileSync=require(_0x411b48(0x1d2)),fs=require('fs'),fns=require(_0x411b48(0x24e)),{WebsocketClient,DefaultLogger}=require(_0x411b48(0x1bc)),Crypt=require('hybrid-crypto-js')[_0x411b48(0x189)];let exchange,wsClient;global[_0x411b48(0x1a3)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x411b48(0x1b9))[_0x411b48(0x21e)],botID=process['argv'][0x2]||_0x411b48(0x214),pattern=/^[0-9]{3}$/;if(!pattern[_0x411b48(0x18b)](botID))return console['log'](_0x411b48(0x1b6)+botID+_0x411b48(0x22d)),process[_0x411b48(0x199)](0x1);const userID=process[_0x411b48(0x1d6)][0x3]||'',configpath=userID?_0x411b48(0x1c0)+userID+'/':_0x411b48(0x1c0);!fs['existsSync'](configpath)&&fs[_0x411b48(0x245)](configpath);const configfile=configpath+_0x411b48(0x1a4)+botID+_0x411b48(0x223),logfile=configpath+_0x411b48(0x1a4)+botID+'-events.json',performancefile=configpath+'bot-'+botID+_0x411b48(0x228),coinresultsfile=configpath+_0x411b48(0x1a4)+botID+_0x411b48(0x275),settingsfile=configpath+_0x411b48(0x188),securefile=configpath+_0x411b48(0x277),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x411b48(0x242)]({'data':[]})[_0x411b48(0x27e)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x411b48(0x27e)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x411b48(0x242)]({'coins':[]})[_0x411b48(0x27e)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x411b48(0x211),'symbol':_0x411b48(0x1db)},'usd':{'coin':_0x411b48(0x22e),'symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x42f926)=>{},'debug':(..._0x4d86c5)=>{},'notice':(..._0x16723d)=>{},'info':(..._0x184850)=>{},'warning':(..._0x368025)=>{},'error':async function(..._0x526c7c){const _0x1a1509=_0x411b48,_0x33a82d=new Date()[_0x1a1509(0x25a)]();if(!lastErrorShown||_0x33a82d-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1a1509(0x25a)](),logHistory(_0x1a1509(0x23b),_0x1a1509(0x24c)+consecutivePauses+_0x1a1509(0x1d5));let _0x3ef049='';if(_0x526c7c[0x0])_0x3ef049+=_0x526c7c[0x0];if(_0x526c7c[0x1]&&_0x526c7c[0x1]['error']&&_0x526c7c[0x1][_0x1a1509(0x23b)][_0x1a1509(0x1d3)])_0x3ef049+=_0x1a1509(0x201)+_0x526c7c[0x1]['error'][_0x1a1509(0x1d3)];logging(_0x1a1509(0x24c)+consecutivePauses+_0x1a1509(0x1b7),''+_0x3ef049),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x411b48(0x258)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x411b48(0x233)]!=config[_0x411b48(0x233)]&&updateTimeshift(settings[_0x411b48(0x233)]);process[_0x411b48(0x1a5)]({'started':_0x411b48(0x1be)},_0x3e910a=>{}),initializeProcessListeners();function proxyEmit(_0x2e4131,_0x340b7f=null){const _0x3d6510=_0x411b48;process[_0x3d6510(0x1a5)]({'function':_0x2e4131,'args':_0x340b7f},_0x799675=>{});}function initializeProcessListeners(){const _0x284244=_0x411b48;process['on'](_0x284244(0x1d3),_0x120d17=>{const _0x1b85f8=_0x284244;switch(Object[_0x1b85f8(0x1c1)](_0x120d17)[0x0]){case'timeshift':_0x120d17[_0x1b85f8(0x233)]!=undefined&&(settings[_0x1b85f8(0x233)]=_0x120d17[_0x1b85f8(0x233)],updateTimeshift(settings[_0x1b85f8(0x233)]));break;case _0x1b85f8(0x239):switch(_0x120d17[_0x1b85f8(0x239)]){case _0x1b85f8(0x19b):initclient();break;case _0x1b85f8(0x248):emitHistory(_0x120d17[_0x1b85f8(0x231)]);break;case _0x1b85f8(0x218):getPortfolio(_0x120d17[_0x1b85f8(0x231)]);break;case _0x1b85f8(0x267):storeConfiguration(_0x120d17[_0x1b85f8(0x231)]);break;case _0x1b85f8(0x266):storeHeadless(_0x120d17[_0x1b85f8(0x231)]);break;case _0x1b85f8(0x226):getStartingBalances();break;case _0x1b85f8(0x229):placeOrder(_0x120d17['args']);break;case _0x1b85f8(0x184):cancelLoading();break;}}});}headlessStart();function _0x5f1e(_0x43d5ce,_0x23c3a9){const _0x3f222c=_0x1028();return _0x5f1e=function(_0x445c11,_0x5dd6e8){_0x445c11=_0x445c11-0x183;let _0x1028eb=_0x3f222c[_0x445c11];return _0x1028eb;},_0x5f1e(_0x43d5ce,_0x23c3a9);}async function headlessStart(){reset();}async function reset(){const _0x3b1067=_0x411b48;if(pidBalances)clearTimeout(pidBalances);if(config[_0x3b1067(0x247)]!=''){await initExchange(config[_0x3b1067(0x247)],config['apiSecret']);let _0x912b9f=await loadSymbols();_0x912b9f&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1d149b,_0x268484){const _0x3b271a=_0x411b48,_0x549eec=ccxt[config[_0x3b271a(0x28c)]];let _0x172e1d;switch(config['exchange']){case _0x3b271a(0x1bc):_0x172e1d=_0x3b271a(0x230);break;case'binanceus':_0x172e1d=_0x3b271a(0x28f);break;default:_0x172e1d=_0x3b271a(0x230);}exchange=new _0x549eec({'apiKey':_0x1d149b,'secret':_0x268484,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1d149b,'api_secret':_0x268484,'beautify':!![],'wsUrl':_0x172e1d},logger),config[_0x3b271a(0x28c)]==_0x3b271a(0x1ae)&&(stablecoins={'eur':{'coin':_0x3b271a(0x1b8),'symbol':_0x3b271a(0x24f)},'usd':{'coin':'BTCUSDT','symbol':_0x3b271a(0x1fd)}});}async function loadSymbols(){const _0x105427=_0x411b48;let _0x43b548;try{markets=await exchange['loadMarkets']();const _0x40f93a=[_0x105427(0x1fc),_0x105427(0x285),_0x105427(0x241)];allSymbols=exchange[_0x105427(0x272)][_0x105427(0x1de)](_0xdfabfb=>{const _0x10e6be=_0x105427;let _0x71cf44=![];return _0x40f93a[_0x10e6be(0x261)](_0x572b2e=>{if(_0xdfabfb['includes'](_0x572b2e))_0x71cf44=!![];}),!_0x71cf44;}),_0x43b548=!![];}catch(_0x1a8451){await handleError(_0x1a8451,'loadSymbols()'),_0x43b548=![];}return _0x43b548;}async function initbot(){const _0x282a6e=_0x411b48;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x32770c=dbCoinResults[_0x282a6e(0x265)](_0x282a6e(0x268))[_0x282a6e(0x1f8)]();if(_0x32770c[_0x282a6e(0x224)]==0x0)await resetCoinResults();}async function initclient(){const _0x5d23f3=_0x411b48;proxyEmit(_0x5d23f3(0x274),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5d23f3(0x195),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5cf193=_0x411b48;wsinitialized=![];ws1&&(ws1[_0x5cf193(0x261)](_0x169190=>{const _0x52e4f9=_0x5cf193;try{wsClient[_0x52e4f9(0x249)](_0x169190);}catch(_0x4d7b4a){}}),ws1=[]);if(ws2){try{wsClient[_0x5cf193(0x249)](ws2);}catch(_0x298846){}ws2=null;}}async function initws(){const _0x475100=_0x411b48;cleanws();let _0x25af16=[];currentCoins[_0x475100(0x261)](_0x445ddc=>{const _0x37b04e=_0x475100;if(_0x445ddc[_0x37b04e(0x278)]!=config[_0x37b04e(0x1ad)])_0x25af16['push'](noslash(_0x445ddc[_0x37b04e(0x1f3)]));});if(!_0x25af16[_0x475100(0x22c)](stablecoins['eur'][_0x475100(0x278)]))_0x25af16[_0x475100(0x28d)](stablecoins[_0x475100(0x256)][_0x475100(0x278)]);if(!_0x25af16[_0x475100(0x22c)](stablecoins[_0x475100(0x1df)][_0x475100(0x278)]))_0x25af16[_0x475100(0x28d)](stablecoins['usd'][_0x475100(0x278)]);if(!_0x25af16['includes'](_0x475100(0x26b)+config[_0x475100(0x1ad)]))_0x25af16[_0x475100(0x28d)](_0x475100(0x26b)+config[_0x475100(0x1ad)]);try{_0x25af16[_0x475100(0x261)]((_0x1c22dc,_0x1b1f80)=>{const _0x4e7f3e=_0x475100;ws1[_0x1b1f80]=wsClient[_0x4e7f3e(0x22f)](_0x1c22dc,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0xafe193=>{const _0x3a1ad1=_0x475100;if(!Array[_0x3a1ad1(0x27a)](_0xafe193)&&!_0xafe193[_0x3a1ad1(0x26f)][_0x3a1ad1(0x22c)](_0x3a1ad1(0x287))){if(_0xafe193[_0x3a1ad1(0x1c9)]==='kline'){global['ticker'][_0xafe193['kline'][_0x3a1ad1(0x1f3)]]=_0xafe193[_0x3a1ad1(0x194)]['close'];return;}}else{if(!Array[_0x3a1ad1(0x27a)](_0xafe193)&&_0xafe193[_0x3a1ad1(0x26f)][_0x3a1ad1(0x22c)](_0x3a1ad1(0x287))){if(_0xafe193[_0x3a1ad1(0x19d)][_0x3a1ad1(0x22c)](_0x3a1ad1(0x1fb))){updateNumberCoins(_0xafe193);return;}}}}),wsClient['on']('reconnected',async _0x30ad98=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x42aec6){await handleError(_0x42aec6,_0x475100(0x23a));}let _0x583e29,_0x2c51ad=0x0;loading[_0x475100(0x1b0)]=[];let _0x422f36=0x0;currentCoins[_0x475100(0x261)](_0x1552f1=>{const _0xe82c8f=_0x475100;if(_0x1552f1[_0xe82c8f(0x278)]!=config['basecoin'])loading[_0xe82c8f(0x1b0)][_0xe82c8f(0x28d)](_0x1552f1[_0xe82c8f(0x1f3)]);}),loadingCanceled=![];while(_0x583e29!=currentCoins[_0x475100(0x224)]-0x1){_0x583e29=0x0,currentCoins[_0x475100(0x261)](_0x1bb6fb=>{const _0x39b230=_0x475100;_0x1bb6fb[_0x39b230(0x278)]!=config[_0x39b230(0x1ad)]&&global[_0x39b230(0x1a3)][noslash(_0x1bb6fb[_0x39b230(0x1f3)])]&&(loading[_0x39b230(0x1b0)]=loading[_0x39b230(0x1b0)]['filter'](_0x2d8ac7=>_0x2d8ac7!=_0x1bb6fb[_0x39b230(0x1f3)]),_0x583e29++);}),loading['progress']=Math[_0x475100(0x280)](_0x583e29/(currentCoins[_0x475100(0x224)]-0x1)*0x64);_0x422f36>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x475100(0x186)]=!![],emitLoadingProgress();break;}else _0x583e29!=_0x2c51ad&&(_0x2c51ad=_0x583e29,emitLoadingProgress()),_0x422f36++,await sleep(0xc8);}if(_0x583e29==currentCoins[_0x475100(0x224)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x11028b=_0x411b48;proxyEmit(_0x11028b(0x23d),loading);}async function getFiat(){const _0xaa71d9=_0x411b48;let _0xb56838=0x0,_0x4861f2=0x0;try{_0xb56838=global['ticker'][stablecoins[_0xaa71d9(0x256)][_0xaa71d9(0x278)]],_0x4861f2=global[_0xaa71d9(0x1a3)][stablecoins[_0xaa71d9(0x1df)][_0xaa71d9(0x278)]];}catch(_0x4d9b61){await handleError(_0x4d9b61,'getFiat()');}return{'eur':Number(_0xb56838),'usd':Number(_0x4861f2)};}async function setStartDatePerformance(_0x33345e){const _0x3ea0a0=_0x411b48,_0x193cff=fns[_0x3ea0a0(0x207)](new Date(_0x33345e[_0x3ea0a0(0x284)]),'yyyy/MM/dd');let _0x3e6b4c=[];_0x3e6b4c[stablecoins[_0x3ea0a0(0x256)][_0x3ea0a0(0x278)]]=await getCloses(stablecoins[_0x3ea0a0(0x256)][_0x3ea0a0(0x1f3)],new Date(_0x33345e[_0x3ea0a0(0x284)]),0x1),_0x3e6b4c[stablecoins['usd'][_0x3ea0a0(0x278)]]=await getCloses(stablecoins[_0x3ea0a0(0x1df)]['symbol'],new Date(_0x33345e[_0x3ea0a0(0x284)]),0x1);let _0x52337d,_0x3b8eaa=[];_0x33345e[_0x3ea0a0(0x18e)][_0x3ea0a0(0x261)](_0x47b17a=>{const _0x2fb738=_0x3ea0a0;!_0x47b17a[_0x2fb738(0x1d4)]&&_0x3b8eaa['push']({'coin':_0x47b17a[_0x2fb738(0x278)],'number':_0x47b17a[_0x2fb738(0x1ba)],'price':_0x47b17a[_0x2fb738(0x193)]});}),_0x52337d={'date':_0x193cff,'eur':_0x3e6b4c[stablecoins[_0x3ea0a0(0x256)][_0x3ea0a0(0x278)]][0x0],'usd':_0x3e6b4c[stablecoins['usd'][_0x3ea0a0(0x278)]][0x0],'coins':_0x3b8eaa};let _0x21770c=dbPerformance['get'](_0x3ea0a0(0x259))[_0x3ea0a0(0x198)]({'date':_0x193cff})[_0x3ea0a0(0x1f8)]();_0x21770c?dbPerformance['get'](_0x3ea0a0(0x259))[_0x3ea0a0(0x198)]({'date':_0x193cff})['assign'](_0x52337d)[_0x3ea0a0(0x27e)]():dbPerformance[_0x3ea0a0(0x265)](_0x3ea0a0(0x259))[_0x3ea0a0(0x28d)](_0x52337d)[_0x3ea0a0(0x27e)](),_0x21770c=dbPerformance[_0x3ea0a0(0x265)](_0x3ea0a0(0x259))[_0x3ea0a0(0x290)](_0x3ea0a0(0x191))['value'](),_0x21770c[_0x3ea0a0(0x261)](_0x259076=>{const _0x3bc45c=_0x3ea0a0;_0x259076[_0x3bc45c(0x191)]<_0x193cff&&dbPerformance[_0x3bc45c(0x265)](_0x3bc45c(0x259))[_0x3bc45c(0x1ce)]({'date':_0x259076[_0x3bc45c(0x191)]})[_0x3bc45c(0x27e)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1be561){const _0x106606=_0x411b48;let _0x691909,_0x32dae2=[];logHistory(_0x106606(0x18f),_0x106606(0x21b)),_0x1be561[_0x106606(0x18e)]['forEach'](_0x3c9fb1=>{const _0xbf39a4=_0x106606;if(_0x3c9fb1['coin']!=config[_0xbf39a4(0x1ad)]&&!_0x3c9fb1[_0xbf39a4(0x1d4)])_0x32dae2[_0xbf39a4(0x28d)]({'coin':_0x3c9fb1['coin'],'symbol':_0x3c9fb1[_0xbf39a4(0x1f3)]});});let _0x126b7a=[];try{const _0x45a75b=fns[_0x106606(0x207)](fns['parseISO'](_0x1be561[_0x106606(0x284)][_0x106606(0x1e3)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x18bcfd of _0x32dae2){if(_0x18bcfd[_0x106606(0x278)]!=config[_0x106606(0x1ad)])_0x691909=await exchange[_0x106606(0x21a)](_0x18bcfd['symbol'],Date[_0x106606(0x1c4)](_0x45a75b));_0x691909[_0x106606(0x261)](_0x75eea8=>{const _0x2df353=_0x106606,_0x44008a=_0x18bcfd[_0x2df353(0x1f3)]['includes'](config[_0x2df353(0x1ad)]+'/'),_0x410e23=fns[_0x2df353(0x207)](fns['parseISO'](_0x75eea8[_0x2df353(0x21f)]),_0x2df353(0x209)),_0x4ceb39=fns[_0x2df353(0x207)](fns[_0x2df353(0x217)](_0x75eea8[_0x2df353(0x21f)]),_0x2df353(0x252));let _0x216d0d;if(_0x75eea8[_0x2df353(0x1a9)]=='buy'&&_0x44008a==![])_0x216d0d=_0x75eea8[_0x2df353(0x20c)];if(_0x75eea8['side']=='buy'&&_0x44008a==!![])_0x216d0d=-_0x75eea8[_0x2df353(0x20c)]*_0x75eea8[_0x2df353(0x1ff)];if(_0x75eea8['side']==_0x2df353(0x263)&&_0x44008a==![])_0x216d0d=-_0x75eea8[_0x2df353(0x20c)];if(_0x75eea8[_0x2df353(0x1a9)]==_0x2df353(0x263)&&_0x44008a==!![])_0x216d0d=_0x75eea8[_0x2df353(0x20c)]*_0x75eea8[_0x2df353(0x1ff)];_0x126b7a[_0x2df353(0x28d)]({'timestamp':_0x410e23,'date':_0x4ceb39,'coin':_0x18bcfd[_0x2df353(0x278)],'symbol':_0x18bcfd['symbol'],'type':_0x75eea8[_0x2df353(0x1d9)],'side':_0x75eea8[_0x2df353(0x1a9)],'reverse':_0x44008a,'amount':formatResult(_0x75eea8['filled'],0x8),'filled':formatResult(_0x75eea8[_0x2df353(0x25e)],0x8),'coinamount':formatResult(_0x216d0d,0x8),'price':formatResult(_0x75eea8[_0x2df353(0x1ff)],0x8)});let _0x7c1686;if(_0x75eea8[_0x2df353(0x1a9)]==_0x2df353(0x1f1)&&_0x44008a==![])_0x7c1686=-_0x75eea8['amount']*_0x75eea8[_0x2df353(0x1ff)];if(_0x75eea8[_0x2df353(0x1a9)]==_0x2df353(0x1f1)&&_0x44008a==!![])_0x7c1686=_0x75eea8[_0x2df353(0x20c)];if(_0x75eea8[_0x2df353(0x1a9)]=='sell'&&_0x44008a==![])_0x7c1686=_0x75eea8[_0x2df353(0x20c)]*_0x75eea8[_0x2df353(0x1ff)];if(_0x75eea8[_0x2df353(0x1a9)]=='sell'&&_0x44008a==!![])_0x7c1686=-_0x75eea8['amount'];_0x126b7a[_0x2df353(0x28d)]({'date':_0x4ceb39,'coin':config[_0x2df353(0x1ad)],'coinamount':formatResult(_0x7c1686,0x8)});});}_0x126b7a[_0x106606(0x215)]((_0x2ed7f3,_0x1ee48b)=>_0x2ed7f3[_0x106606(0x254)]>_0x1ee48b[_0x106606(0x254)]?0x1:_0x1ee48b[_0x106606(0x254)]>_0x2ed7f3['timestamp']?-0x1:0x0),dbLogs[_0x106606(0x265)](_0x106606(0x219))[_0x106606(0x1ce)]()[_0x106606(0x27e)](),_0x126b7a[_0x106606(0x261)](_0x4d1992=>{const _0x2dfb11=_0x106606;let _0x5e0d0c;_0x4d1992['coin']!=config['basecoin']&&(_0x5e0d0c={'time':_0x4d1992['timestamp'],'type':_0x2dfb11(0x213),'event':_0x2dfb11(0x1b3)+_0x4d1992[_0x2dfb11(0x1f3)]+'\x20'+_0x4d1992['side']+'\x20#'+_0x4d1992[_0x2dfb11(0x20c)]+'\x20@'+_0x4d1992[_0x2dfb11(0x1ff)]},dbLogs[_0x2dfb11(0x265)](_0x2dfb11(0x219))[_0x2dfb11(0x28d)](_0x5e0d0c)[_0x2dfb11(0x27e)]());});const _0xc5503f=fns[_0x106606(0x210)]({'start':new Date(_0x1be561[_0x106606(0x284)]),'end':new Date()})[_0x106606(0x192)](_0x1e3787=>fns[_0x106606(0x207)](_0x1e3787,_0x106606(0x252)));let _0x1bda58=[];_0x1be561['portfolio'][_0x106606(0x261)](_0x57c3fe=>{const _0x165f7d=_0x106606;if(!_0x57c3fe['excluded']){_0x1bda58[_0x57c3fe[_0x165f7d(0x278)]]=[];let _0x3d00ed=_0x57c3fe['startnumber'];_0xc5503f[_0x165f7d(0x261)]((_0x407d7e,_0x26e5b1)=>{const _0x1dd317=_0x165f7d;let _0x2e2c2d=_0x126b7a['filter'](_0x344c38=>_0x344c38[_0x1dd317(0x278)]==_0x57c3fe[_0x1dd317(0x278)]&&_0x344c38[_0x1dd317(0x191)]==_0x407d7e);if(_0x2e2c2d[_0x1dd317(0x224)]!=0x0){let _0x59d4c6=_0x2e2c2d[_0x1dd317(0x293)]((_0x79ff90,_0x257d25)=>{return _0x79ff90+=_0x257d25['coinamount'],_0x79ff90;},0x0);_0x3d00ed+=_0x59d4c6;}_0x1bda58[_0x57c3fe[_0x1dd317(0x278)]][_0x407d7e]=_0x3d00ed;});}});const _0x32c2d2=[..._0x32dae2];_0x32c2d2[_0x106606(0x28d)]({'coin':stablecoins['eur']['coin'],'symbol':stablecoins[_0x106606(0x256)][_0x106606(0x1f3)]}),_0x32c2d2[_0x106606(0x28d)]({'coin':stablecoins['usd'][_0x106606(0x278)],'symbol':stablecoins[_0x106606(0x1df)][_0x106606(0x1f3)]});let _0x1ec44c=[];for(const _0x5cd8ba of _0x32c2d2){_0x1ec44c[_0x5cd8ba[_0x106606(0x278)]]=await getCloses(_0x5cd8ba[_0x106606(0x1f3)],new Date(_0x1be561[_0x106606(0x284)]));}dbPerformance[_0x106606(0x265)]('data')[_0x106606(0x1ce)]()[_0x106606(0x27e)](),_0xc5503f[_0x106606(0x261)]((_0x3ad8cb,_0x13aaab)=>{const _0x5a3745=_0x106606;let _0x4cb00e,_0x11bca2=[];_0x13aaab==0x0?(_0x1be561['portfolio']['forEach'](_0x1c68b4=>{const _0x44a6f9=_0x5f1e;!_0x1c68b4[_0x44a6f9(0x1d4)]&&_0x11bca2['push']({'coin':_0x1c68b4['coin'],'number':_0x1c68b4[_0x44a6f9(0x1ba)],'price':_0x1c68b4['startprice']});}),_0x4cb00e={'date':_0x3ad8cb,'eur':_0x1ec44c[stablecoins['eur'][_0x5a3745(0x278)]][_0x13aaab],'usd':_0x1ec44c[stablecoins[_0x5a3745(0x1df)][_0x5a3745(0x278)]][_0x13aaab],'coins':_0x11bca2}):(_0x1be561[_0x5a3745(0x18e)]['forEach'](_0x5485a7=>{const _0xfa2c4a=_0x5a3745;!_0x5485a7[_0xfa2c4a(0x1d4)]&&_0x11bca2[_0xfa2c4a(0x28d)]({'coin':_0x5485a7['coin'],'number':_0x1bda58[_0x5485a7[_0xfa2c4a(0x278)]][_0x3ad8cb],'price':_0x5485a7[_0xfa2c4a(0x278)]==config[_0xfa2c4a(0x1ad)]?0x1:_0x1ec44c[_0x5485a7['coin']][_0x13aaab]});}),_0x4cb00e={'date':_0x3ad8cb,'eur':_0x1ec44c[stablecoins['eur'][_0x5a3745(0x278)]][_0x13aaab],'usd':_0x1ec44c[stablecoins[_0x5a3745(0x1df)]['coin']][_0x13aaab],'coins':_0x11bca2}),dbPerformance[_0x5a3745(0x265)](_0x5a3745(0x259))[_0x5a3745(0x28d)](_0x4cb00e)[_0x5a3745(0x27e)]();}),emitPerformance(),await resetCoinResults();for(let _0x3a6cf1 of _0x126b7a){_0x3a6cf1[_0x106606(0x278)]!=config[_0x106606(0x1ad)]&&await updateCoinResults(_0x3a6cf1);}logHistory(_0x106606(0x18f),_0x106606(0x212));}catch(_0x5769e5){await handleError(_0x5769e5,_0x106606(0x1a7));}}async function getCloses(_0x16da6e,_0x2ee6ab,_0xd39c9d=undefined){const _0x41d419=_0x411b48,_0xf6cd9f='1d';let _0x5ba25b,_0x56f4e2;const _0x59b7e6=fns[_0x41d419(0x273)](new Date(),_0x2ee6ab)+0x1;try{const _0x2b41da=exchange[_0x41d419(0x205)]()-_0x59b7e6*0x18*0xe10*0x3e8;_0x5ba25b=await exchange[_0x41d419(0x20f)](_0x16da6e,_0xf6cd9f,_0x2b41da,_0xd39c9d),_0x56f4e2=await exchange[_0x41d419(0x22a)](_0x16da6e);}catch(_0x2879ca){await handleError(_0x2879ca,_0x41d419(0x190));}let _0x5ccda0=ohlcvToCloses(_0x5ba25b);return _0x5ccda0['push'](_0x56f4e2[_0x16da6e][_0x41d419(0x200)]),_0x5ccda0;}function ohlcvToCloses(_0x453559){const _0x164b15=_0x411b48;let _0x3efe82=[];return _0x453559[_0x164b15(0x261)](function(_0x31a427){const _0x15f201=_0x164b15;_0x3efe82[_0x15f201(0x28d)](_0x31a427[0x4]);}),_0x3efe82;}function getConfiguration(_0x4217d7){const _0x5783cf=_0x411b48;let _0x3e99fe=dbConfig[_0x5783cf(0x265)](_0x5783cf(0x1aa))[_0x5783cf(0x198)]({'botID':_0x4217d7})['value']();if(_0x3e99fe){let _0x29d8d3=![];!_0x3e99fe[_0x5783cf(0x28c)]&&(_0x3e99fe={..._0x3e99fe,'exchange':_0x5783cf(0x1bc)},_0x29d8d3=!![]),!_0x3e99fe[_0x5783cf(0x1ad)]&&(_0x3e99fe={..._0x3e99fe,'basecoin':_0x5783cf(0x292)},_0x29d8d3=!![]),!_0x3e99fe[_0x5783cf(0x1ab)]&&(_0x3e99fe={..._0x3e99fe,'ordertype':'market'},_0x29d8d3=!![]),!_0x3e99fe[_0x5783cf(0x1a6)]&&(_0x3e99fe={..._0x3e99fe,'timeout':0x14},_0x29d8d3=!![]),!_0x3e99fe['emojibuy']&&(_0x3e99fe={..._0x3e99fe,'emojibuy':''},_0x29d8d3=!![]),!_0x3e99fe[_0x5783cf(0x288)]&&(_0x3e99fe={..._0x3e99fe,'emojisell':''},_0x29d8d3=!![]),!_0x3e99fe[_0x5783cf(0x20b)]&&(_0x3e99fe={..._0x3e99fe,'showname':![]},_0x29d8d3=!![]),_0x29d8d3&&(_0x3e99fe={'botID':_0x3e99fe[_0x5783cf(0x18d)],'exchange':_0x3e99fe[_0x5783cf(0x28c)],'apiKey':_0x3e99fe['apiKey'],'apiSecret':_0x3e99fe['apiSecret'],'basecoin':_0x3e99fe[_0x5783cf(0x1ad)],'botname':_0x3e99fe[_0x5783cf(0x1f6)],'showname':_0x3e99fe['showname'],'threshold':_0x3e99fe[_0x5783cf(0x264)],'ordertype':_0x3e99fe[_0x5783cf(0x1ab)],'timeout':_0x3e99fe['timeout'],'startdate':_0x3e99fe[_0x5783cf(0x284)],'recreate':_0x3e99fe['recreate'],'timeshift':_0x3e99fe[_0x5783cf(0x233)],'headless':_0x3e99fe['headless'],'cooldown':_0x3e99fe[_0x5783cf(0x196)],'emojibuy':_0x3e99fe[_0x5783cf(0x236)],'emojisell':_0x3e99fe['emojisell'],'portfolio':_0x3e99fe[_0x5783cf(0x18e)]},dbConfig[_0x5783cf(0x265)](_0x5783cf(0x1aa))['remove']()['write'](),dbConfig['get'](_0x5783cf(0x1aa))[_0x5783cf(0x28d)](_0x3e99fe)['write']());}else _0x3e99fe={'botID':_0x4217d7,'exchange':_0x5783cf(0x1bc),'apiKey':'','apiSecret':'','basecoin':'','botname':'Bot\x20'+_0x4217d7,'showname':![],'threshold':'3','ordertype':_0x5783cf(0x257),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x3e99fe;}function emittedConfiguration(){const _0x1c5aa8=_0x411b48;let _0x4ca606;return config['apiKey']==''?_0x4ca606=config:_0x4ca606={...config,'apiKey':_0x1c5aa8(0x206),'apiSecret':'************'},_0x4ca606;}function getSettings(){const _0x2ac8a5=_0x411b48;return dbSettings[_0x2ac8a5(0x265)]('settings')['value']();}function getSecure(){const _0x1193d8=_0x411b48;return dbSecure[_0x1193d8(0x265)](_0x1193d8(0x240))[_0x1193d8(0x1f8)]()||{};}function updateTimeshift(_0xe90ca0){const _0x26bd5e=_0x411b48;let _0x44226e=dbConfig['get']('bot')[_0x26bd5e(0x198)]({'botID':botID})['value']();_0x44226e&&dbConfig['get'](_0x26bd5e(0x1aa))[_0x26bd5e(0x198)]({'botID':botID})['assign']({'timeshift':_0xe90ca0})[_0x26bd5e(0x27e)](),config[_0x26bd5e(0x233)]=_0xe90ca0,proxyEmit(_0x26bd5e(0x274),emittedConfiguration());}async function storeConfiguration(_0x191b85){const _0x328f0b=_0x411b48;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x12e29=dbConfig['get'](_0x328f0b(0x1aa))[_0x328f0b(0x198)]({'botID':botID})[_0x328f0b(0x1f8)]();_0x191b85={..._0x191b85,'apiKey':crypt[_0x328f0b(0x24a)](secure[_0x328f0b(0x238)],_0x191b85[_0x328f0b(0x247)])[_0x328f0b(0x1d3)],'apiSecret':crypt[_0x328f0b(0x24a)](secure[_0x328f0b(0x238)],_0x191b85['apiSecret'])[_0x328f0b(0x1d3)]};if(_0x12e29){if(_0x191b85[_0x328f0b(0x247)]==_0x328f0b(0x206))_0x191b85['apiKey']=config['apiKey'];if(_0x191b85[_0x328f0b(0x243)]==_0x328f0b(0x206))_0x191b85[_0x328f0b(0x243)]=config[_0x328f0b(0x243)];dbConfig['get'](_0x328f0b(0x1aa))['find']({'botID':botID})[_0x328f0b(0x262)](_0x191b85)[_0x328f0b(0x27e)]();}else dbConfig[_0x328f0b(0x265)](_0x328f0b(0x1aa))[_0x328f0b(0x28d)](_0x191b85)['write'](),process[_0x328f0b(0x1a5)]({'status':'enabled','live':_0x328f0b(0x1be)},_0x22a560=>{});config={..._0x191b85};if(config[_0x328f0b(0x1cd)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x328f0b(0x1a5)]({'botname':_0x191b85[_0x328f0b(0x1f6)]},_0x4473e0=>{}),proxyEmit(_0x328f0b(0x1e7)),reset();}async function storeHeadless(_0x24411a){const _0x277848=_0x411b48,_0x150631={...config,'headless':_0x24411a[_0x277848(0x251)]};let _0x59ef90=dbConfig[_0x277848(0x265)]('bot')[_0x277848(0x198)]({'botID':botID})[_0x277848(0x1f8)]();_0x59ef90&&dbConfig[_0x277848(0x265)](_0x277848(0x1aa))['find']({'botID':botID})[_0x277848(0x262)](_0x150631)[_0x277848(0x27e)](),config={..._0x150631},proxyEmit(_0x277848(0x274),emittedConfiguration());}function noslash(_0x4dc3a1){return _0x4dc3a1['replace']('/','');}function updateNumberCoins(_0x2e2756){const _0x54877f=_0x411b48;_0x2e2756['eventType']&&_0x2e2756[_0x54877f(0x1c9)]==_0x54877f(0x21d)&&_0x2e2756[_0x54877f(0x195)][_0x54877f(0x261)](_0x3ecf7d=>{const _0x5994ba=_0x54877f;let _0x42face=currentCoins[_0x5994ba(0x198)](_0x518e9c=>_0x518e9c[_0x5994ba(0x278)]==_0x3ecf7d[_0x5994ba(0x1dc)]),_0x2641d2=config[_0x5994ba(0x18e)][_0x5994ba(0x198)](_0xd1489b=>_0xd1489b['coin']==_0x3ecf7d[_0x5994ba(0x1dc)]);if(_0x42face&&_0x2641d2)_0x42face[_0x5994ba(0x1ec)]=Math[_0x5994ba(0x19c)](Number(_0x3ecf7d['availableBalance'])+(_0x2641d2[_0x5994ba(0x1f0)]||0x0),0x0);});if(_0x2e2756[_0x54877f(0x1c9)]&&_0x2e2756[_0x54877f(0x1c9)]==_0x54877f(0x20d)){if(_0x2e2756[_0x54877f(0x1ef)]==_0x54877f(0x183)&&_0x2e2756['orderStatus']=='FILLED'){if(lastOrders)lastOrders[_0x54877f(0x261)](_0x5015c8=>{const _0x224419=_0x54877f;if(_0x5015c8[_0x224419(0x1c6)]==_0x2e2756[_0x224419(0x1c6)]){if(_0x5015c8['reverse'])_0x5015c8['filled']=_0x2e2756[_0x224419(0x269)]*_0x5015c8['price'];else _0x5015c8[_0x224419(0x25e)]=_0x2e2756[_0x224419(0x269)];}});}}}async function getCoins(_0x593f18=!![],_0x137f0a=config['basecoin']){const _0x16e069=_0x411b48;let _0x52af84,_0x89e9d4=[],_0x3949dc=[],_0x4bbb46=[];try{_0x52af84=await exchange['fetchBalance'](),mybalances=_0x52af84[_0x16e069(0x197)];if(!_0x593f18)for(const [_0x106979,_0x4a99bf]of Object[_0x16e069(0x1e4)](mybalances)){_0x4bbb46[_0x16e069(0x28d)](_0x106979);}else config[_0x16e069(0x18e)]['forEach'](_0x30c8c5=>{const _0x17e5da=_0x16e069;if(!_0x30c8c5[_0x17e5da(0x1d4)])_0x4bbb46[_0x17e5da(0x28d)](_0x30c8c5[_0x17e5da(0x278)]);});if(_0x137f0a=='')for(const [_0x32ee30,_0x1c5e2a]of Object[_0x16e069(0x1e4)](mybalances)){_0x1c5e2a[_0x16e069(0x1a8)]()!=0x0&&_0x3949dc[_0x16e069(0x28d)]({'coin':_0x32ee30});}else for(const [_0x623fe2,_0x5e5c52]of Object[_0x16e069(0x1e4)](mybalances)){if(_0x4bbb46[_0x16e069(0x22c)](_0x623fe2)){const _0x219c7d=config[_0x16e069(0x18e)][_0x16e069(0x198)](_0x49ec01=>_0x49ec01['coin']==_0x623fe2);if((_0x5e5c52['toString']()!=0x0||_0x219c7d)&&(allSymbols[_0x16e069(0x22c)](_0x623fe2+'/'+_0x137f0a)||_0x623fe2==_0x137f0a))_0x3949dc[_0x16e069(0x28d)]({'coin':_0x623fe2,'symbol':_0x623fe2+'/'+_0x137f0a,'reverse':![],'number':Math[_0x16e069(0x19c)](_0x5e5c52+(_0x219c7d&&_0x219c7d[_0x16e069(0x1f0)]||0x0),0x0)}),_0x623fe2!=_0x137f0a&&_0x89e9d4[_0x16e069(0x28d)](_0x623fe2+'/'+_0x137f0a);else(_0x5e5c52[_0x16e069(0x1a8)]()!=0x0||_0x219c7d)&&allSymbols[_0x16e069(0x22c)](_0x137f0a+'/'+_0x623fe2)&&(_0x3949dc['push']({'coin':_0x623fe2,'symbol':_0x137f0a+'/'+_0x623fe2,'reverse':!![],'number':Math[_0x16e069(0x19c)](_0x5e5c52+(_0x219c7d&&_0x219c7d['offset']||0x0),0x0)}),_0x623fe2!=_0x137f0a&&_0x89e9d4[_0x16e069(0x28d)](_0x137f0a+'/'+_0x623fe2));}}}catch(_0x29ef5e){if(!_0x593f18){if(_0x29ef5e[_0x16e069(0x1a8)]()[_0x16e069(0x22c)](_0x16e069(0x20a)))return logHistory('error',_0x16e069(0x286)),![];else{if(_0x29ef5e['toString']()[_0x16e069(0x22c)]('AuthenticationError'))return logHistory('error','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x29ef5e['toString']()['includes'](_0x16e069(0x1bf)))return logHistory('error',_0x16e069(0x244)),![];else await handleError(_0x29ef5e,_0x16e069(0x1d0));}}}else await handleError(_0x29ef5e,_0x16e069(0x1d0));}return _0x3949dc;}async function getPortfolio(_0x5298df){const _0x3b8f02=_0x411b48;let _0x5cd8ac=[],_0x501080=[],_0x1e652e,_0x1f20b4=[],_0xd65902,_0x5cf307;_0x5298df['apiKey']===_0x3b8f02(0x206)||_0x5298df[_0x3b8f02(0x243)]===_0x3b8f02(0x206)?(_0xd65902=config['apiKey'],_0x5cf307=config['apiSecret']):(_0xd65902=_0x5298df[_0x3b8f02(0x247)],_0x5cf307=_0x5298df[_0x3b8f02(0x243)]);await initExchange(_0xd65902,_0x5cf307);let _0x2c7b41=await loadSymbols();if(_0x2c7b41){_0x1f20b4=await getCoins(![],_0x5298df['basecoin']);if(_0x1f20b4===![])proxyEmit(_0x3b8f02(0x18e),![]);else{if(_0x5298df[_0x3b8f02(0x1ad)]=='')proxyEmit(_0x3b8f02(0x18e),_0x1f20b4);else{_0x1f20b4['forEach'](_0x5b4a66=>{const _0x538846=_0x3b8f02;_0x5cd8ac['push'](_0x5b4a66[_0x538846(0x1f3)]);});try{_0x501080=await exchange[_0x3b8f02(0x22a)](_0x5cd8ac);}catch(_0x2cefbd){await handleError(_0x2cefbd,_0x3b8f02(0x1bd));}_0x1f20b4[_0x3b8f02(0x261)](_0xc023f6=>{const _0x1089a7=_0x3b8f02;_0xc023f6['coin']!=_0x5298df['basecoin']?_0x1e652e=_0xc023f6[_0x1089a7(0x289)]?0x1/_0x501080[_0xc023f6['symbol']][_0x1089a7(0x200)]:_0x501080[_0xc023f6[_0x1089a7(0x1f3)]]['last']:_0x1e652e=0x1,_0xc023f6[_0x1089a7(0x1ff)]=formatResult(_0x1e652e,0x8);}),proxyEmit(_0x3b8f02(0x18e),_0x1f20b4);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x3555ac){const _0x1d49d9=_0x411b48;let _0x5a73e3=!![];const _0x4cdf96=!_0x3555ac[_0x1d49d9(0x289)]?markets[_0x3555ac[_0x1d49d9(0x1f3)]]['limits'][_0x1d49d9(0x20c)][_0x1d49d9(0x1f7)]:markets[_0x3555ac[_0x1d49d9(0x1f3)]]['limits'][_0x1d49d9(0x222)][_0x1d49d9(0x1f7)],_0x3ccd24=!_0x3555ac[_0x1d49d9(0x289)]?markets[_0x3555ac[_0x1d49d9(0x1f3)]][_0x1d49d9(0x1ee)][_0x1d49d9(0x222)][_0x1d49d9(0x1f7)]:markets[_0x3555ac[_0x1d49d9(0x1f3)]][_0x1d49d9(0x1ee)]['amount'][_0x1d49d9(0x1f7)];if(Math[_0x1d49d9(0x1c7)](_0x3555ac['trade'])<_0x4cdf96)_0x5a73e3=![];if(Math['abs'](_0x3555ac[_0x1d49d9(0x23c)])*_0x3555ac['last']<_0x3ccd24)_0x5a73e3=![];return _0x5a73e3;}async function getBalances(){const _0x4ae416=_0x411b48;let _0x2df789=0x0,_0x3fb3ae;const _0x1afc49=config[_0x4ae416(0x264)];currentCoins[_0x4ae416(0x261)](_0x5cfb5a=>{const _0xf9c745=_0x4ae416;if(_0x5cfb5a[_0xf9c745(0x278)]!=config[_0xf9c745(0x1ad)]){let _0x4661a9=global[_0xf9c745(0x1a3)][noslash(_0x5cfb5a[_0xf9c745(0x1f3)])];_0x3fb3ae=_0x5cfb5a[_0xf9c745(0x289)]?0x1/_0x4661a9:_0x4661a9;}else _0x3fb3ae=0x1;let _0x274fa6=_0x5cfb5a[_0xf9c745(0x1ec)]*_0x3fb3ae;_0x2df789+=_0x274fa6,_0x5cfb5a[_0xf9c745(0x200)]=formatResult(Number(_0x3fb3ae),0x8),_0x5cfb5a[_0xf9c745(0x1f8)]=_0x274fa6;}),currentCoins[_0x4ae416(0x261)](_0x571e0b=>{const _0x209aaf=_0x4ae416;let _0x106509=config[_0x209aaf(0x18e)][_0x209aaf(0x198)](_0x1af556=>_0x1af556[_0x209aaf(0x278)]==_0x571e0b['coin']),_0x1e292f=Number(_0x106509[_0x209aaf(0x26c)]),_0x27ea64=_0x571e0b[_0x209aaf(0x1f8)]/_0x2df789*0x64,_0xe2f656=_0x1e292f*_0x2df789/0x64/_0x571e0b[_0x209aaf(0x200)]-_0x571e0b[_0x209aaf(0x1ec)];_0x571e0b[_0x209aaf(0x26c)]=formatResult(_0x27ea64,0x3),_0x571e0b[_0x209aaf(0x20e)]=formatResult(_0x1e292f,0x3),_0x571e0b[_0x209aaf(0x23c)]=formatResult(_0xe2f656,0x8),_0x571e0b[_0x209aaf(0x1a9)]='',_0x571e0b[_0x209aaf(0x1da)]='';if(_0x571e0b[_0x209aaf(0x278)]!=config[_0x209aaf(0x1ad)]){if(_0x571e0b[_0x209aaf(0x26c)]>_0x1e292f)_0x571e0b[_0x209aaf(0x1a9)]=_0x209aaf(0x263),_0x571e0b['valid']=checkMinimums(_0x571e0b);else _0x571e0b[_0x209aaf(0x26c)]<_0x1e292f&&(_0x571e0b[_0x209aaf(0x1a9)]='buy',_0x571e0b[_0x209aaf(0x1da)]=checkMinimums(_0x571e0b));}_0x571e0b['delta']=_0x571e0b[_0x209aaf(0x26c)]/_0x571e0b[_0x209aaf(0x20e)]-0x1;}),currentCoins[_0x4ae416(0x215)]((_0x39a1e6,_0x1ca7b2)=>_0x39a1e6[_0x4ae416(0x23e)]<_0x1ca7b2[_0x4ae416(0x23e)]?0x1:_0x1ca7b2[_0x4ae416(0x23e)]<_0x39a1e6[_0x4ae416(0x23e)]?-0x1:0x0);const _0x26eac9=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x26eac9[_0x4ae416(0x256)],'usd':_0x26eac9['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1afc49},proxyEmit(_0x4ae416(0x195),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x4ae416(0x251)])headlessMode({'portfolio':currentCoins,'threshold':_0x1afc49});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1d70b2=_0x411b48;if(!lastBalances)return;let _0x3c4588=await getStartingBalances(![]),_0xefbbeb=[],_0x552e78;JSON[_0x1d70b2(0x1c4)](lastBalances[_0x1d70b2(0x18e)])[_0x1d70b2(0x261)](_0x8c03e5=>{const _0x246719=_0x1d70b2;let _0x1171e7={'coin':_0x8c03e5[_0x246719(0x278)],'number':_0x8c03e5[_0x246719(0x1ec)],'price':_0x8c03e5[_0x246719(0x200)]};_0xefbbeb[_0x246719(0x28d)](_0x1171e7);});const _0x1a3df6=await getFiat();_0x552e78={'date':lastBalances['time'][_0x1d70b2(0x1c2)]('\x20')[0x0],'eur':_0x1a3df6[_0x1d70b2(0x256)],'usd':_0x1a3df6[_0x1d70b2(0x1df)],'coins':_0xefbbeb};let _0x575769=dbPerformance['get'](_0x1d70b2(0x259))[_0x1d70b2(0x198)]({'date':_0x552e78[_0x1d70b2(0x191)]})[_0x1d70b2(0x1f8)]();_0x575769?dbPerformance[_0x1d70b2(0x265)](_0x1d70b2(0x259))[_0x1d70b2(0x198)]({'date':_0x552e78['date']})['assign'](_0x552e78)[_0x1d70b2(0x27e)]():dbPerformance['get'](_0x1d70b2(0x259))[_0x1d70b2(0x28d)](_0x552e78)[_0x1d70b2(0x27e)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3962be=_0x411b48;if(dbPerformance[_0x3962be(0x271)](_0x3962be(0x259))[_0x3962be(0x1f8)]()){let _0x2d6e0d=dbPerformance[_0x3962be(0x265)](_0x3962be(0x259))[_0x3962be(0x290)](_0x3962be(0x191))[_0x3962be(0x1f8)]();proxyEmit(_0x3962be(0x24d),_0x2d6e0d),lastPerformanceEmitted=getDate();}else proxyEmit(_0x3962be(0x24d),[]);}async function getStartingBalances(_0x67da37=!![]){const _0x5dc14f=_0x411b48;let _0x2ddc96=dbPerformance[_0x5dc14f(0x265)]('data')[_0x5dc14f(0x198)]({'date':config[_0x5dc14f(0x284)]})['value']();config[_0x5dc14f(0x247)]!=''&&!_0x2ddc96&&(await setStartDatePerformance(config),_0x2ddc96=dbPerformance[_0x5dc14f(0x265)](_0x5dc14f(0x259))[_0x5dc14f(0x198)]({'date':config[_0x5dc14f(0x284)]})[_0x5dc14f(0x1f8)]());if(config['apiKey']==''||!_0x2ddc96)return{};let _0x1cfd7b=0x0,_0x42eb77=0x0,_0x59bc65=0x0,_0x383dbc=[],_0x33aabd=0x0;config[_0x5dc14f(0x18e)][_0x5dc14f(0x261)](_0x321e40=>{const _0x3b18a2=_0x5dc14f;if(!_0x321e40[_0x3b18a2(0x1d4)]){_0x383dbc[_0x33aabd]={'coin':_0x321e40[_0x3b18a2(0x278)],'symbol':_0x321e40[_0x3b18a2(0x1f3)],'number':_0x321e40['startnumber'],'price':_0x321e40[_0x3b18a2(0x193)]},_0x1cfd7b+=_0x321e40[_0x3b18a2(0x193)]*_0x321e40[_0x3b18a2(0x1ba)];if(config[_0x3b18a2(0x1ad)]==_0x3b18a2(0x292))_0x42eb77+=_0x321e40[_0x3b18a2(0x193)]*_0x321e40['startnumber']*_0x2ddc96[_0x3b18a2(0x256)],_0x59bc65+=_0x321e40['startprice']*_0x321e40[_0x3b18a2(0x1ba)]*_0x2ddc96[_0x3b18a2(0x1df)];else{if(config[_0x3b18a2(0x1ad)]==_0x3b18a2(0x28e)||config[_0x3b18a2(0x1ad)]==_0x3b18a2(0x1f9)||config[_0x3b18a2(0x1ad)]=='USDC')_0x42eb77+=_0x321e40['startprice']*_0x321e40[_0x3b18a2(0x1ba)]*_0x2ddc96[_0x3b18a2(0x256)]/_0x2ddc96[_0x3b18a2(0x1df)],_0x59bc65+=_0x321e40[_0x3b18a2(0x193)]*_0x321e40[_0x3b18a2(0x1ba)];else config['basecoin']==_0x3b18a2(0x1ed)&&(_0x42eb77+=_0x321e40[_0x3b18a2(0x193)]*_0x321e40[_0x3b18a2(0x1ba)],_0x59bc65+=_0x321e40[_0x3b18a2(0x193)]*_0x321e40['startnumber']*_0x2ddc96[_0x3b18a2(0x1df)]/_0x2ddc96['eur']);}_0x33aabd++;}});let _0x3f7b67={'basecoin':_0x1cfd7b,'eur':_0x42eb77,'usd':_0x59bc65,'coins':_0x383dbc};if(_0x67da37)proxyEmit('starting-balances',_0x3f7b67);return _0x3f7b67;}function headlessMode(_0x27e5db){const _0x45482e=_0x411b48;let _0x39c532=_0x27e5db[_0x45482e(0x18e)],_0xa06a7a=_0x27e5db[_0x45482e(0x264)],_0x42e5b2=[];for(let _0x48e1c6 of _0x39c532){if(_0x48e1c6[_0x45482e(0x278)]!=config[_0x45482e(0x1ad)]){if(_0x48e1c6[_0x45482e(0x26c)]/_0x48e1c6[_0x45482e(0x20e)]-0x1>=_0xa06a7a/0x64){if(_0x48e1c6[_0x45482e(0x1da)])_0x42e5b2[_0x45482e(0x28d)](_0x48e1c6);}else{if(_0x48e1c6[_0x45482e(0x26c)]/_0x48e1c6[_0x45482e(0x20e)]-0x1<=-_0xa06a7a/0x64){if(_0x48e1c6[_0x45482e(0x1da)])_0x42e5b2[_0x45482e(0x28d)](_0x48e1c6);}}}}_0x42e5b2[_0x45482e(0x224)]>0x0&&placeOrder(_0x42e5b2);}function symbolToCoin(_0x279c49){const _0x38d927=_0x411b48;let _0x1161f9;if(_0x279c49[_0x38d927(0x22c)]('/'+config[_0x38d927(0x1ad)]))_0x1161f9=_0x279c49[_0x38d927(0x1e3)]('/'+config[_0x38d927(0x1ad)],'');if(_0x279c49[_0x38d927(0x22c)](config[_0x38d927(0x1ad)]+'/'))_0x1161f9=_0x279c49[_0x38d927(0x1e3)](config[_0x38d927(0x1ad)]+'/','');return _0x1161f9;}async function validateOrders(_0x2c7e11=0x0){const _0x144f22=_0x411b48;let _0x13a7f8=[],_0x261def=config[_0x144f22(0x1ab)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x144f22(0x1a6)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x144f22(0x261)](_0x7ce272=>{const _0x11234b=_0x144f22;let _0x183c11=previousCoins[_0x11234b(0x198)](_0x202e88=>_0x202e88['coin']==symbolToCoin(_0x7ce272[_0x11234b(0x1f3)])),_0x133238=currentCoins[_0x11234b(0x198)](_0x63201=>_0x63201['coin']==symbolToCoin(_0x7ce272[_0x11234b(0x1f3)])),_0x301e3d,_0x405c0c;_0x7ce272[_0x11234b(0x1a9)]==_0x11234b(0x1f1)&&!_0x7ce272[_0x11234b(0x289)]||_0x7ce272[_0x11234b(0x1a9)]==_0x11234b(0x263)&&_0x7ce272['reverse']?(_0x301e3d=_0x183c11[_0x11234b(0x1ec)]+0.9*_0x7ce272['filled'],_0x405c0c=_0x183c11[_0x11234b(0x1ec)]+1.1*_0x7ce272[_0x11234b(0x25e)]):(_0x301e3d=_0x183c11['number']-1.1*_0x7ce272['filled'],_0x405c0c=_0x183c11['number']-0.9*_0x7ce272[_0x11234b(0x25e)]);const _0x582404=_0x7ce272[_0x11234b(0x25e)]!=0x0&&_0x133238['number']>=_0x301e3d&&_0x133238['number']<=_0x405c0c;_0x13a7f8[_0x11234b(0x28d)](_0x582404);if(_0x582404&&config[_0x11234b(0x1ab)]!=_0x11234b(0x257)){if(_0x7ce272[_0x11234b(0x289)])logHistory('order',_0x11234b(0x220)+_0x7ce272[_0x11234b(0x1f3)]+'\x20'+_0x7ce272[_0x11234b(0x1a9)]+'\x20#'+formatResult(_0x7ce272[_0x11234b(0x25e)]/_0x7ce272[_0x11234b(0x1ff)],0x8)+'\x20@'+formatResult(_0x7ce272[_0x11234b(0x1ff)],0x8));else logHistory(_0x11234b(0x213),_0x11234b(0x220)+_0x7ce272[_0x11234b(0x1f3)]+'\x20'+_0x7ce272[_0x11234b(0x1a9)]+'\x20#'+formatResult(_0x7ce272['filled'],0x8)+'\x20@'+formatResult(_0x7ce272[_0x11234b(0x1ff)],0x8));}}),_0x13a7f8[_0x144f22(0x261)]((_0x407428,_0x1ca572)=>{const _0x3e7569=_0x144f22;if(_0x407428)lastOrders[_0x3e7569(0x26a)](_0x1ca572,0x1);});if(_0x2c7e11<_0x261def&&_0x13a7f8[_0x144f22(0x22c)](![])){if(_0x2c7e11==0x0){config[_0x144f22(0x1ab)]=='market'?logHistory('error',_0x144f22(0x26e)):logHistory(_0x144f22(0x23b),_0x144f22(0x246));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2c7e11);},0xa*0x3e8);}else{(_0x2c7e11==0x1||_0x2c7e11==Math[_0x144f22(0x280)](_0x261def/0x2)||_0x2c7e11==_0x261def-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2c7e11);},validateOrderInterval);}}else{lockOrders=![];if(_0x2c7e11>0x0&&!_0x13a7f8[_0x144f22(0x22c)](![]))config['ordertype']=='market'?logHistory(_0x144f22(0x18f),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x144f22(0x18f),_0x144f22(0x235));else _0x2c7e11>0x0&&_0x13a7f8[_0x144f22(0x22c)](![])&&(config[_0x144f22(0x1ab)]==_0x144f22(0x257)?logHistory(_0x144f22(0x18f),_0x144f22(0x1e2)+Math['round'](_0x261def*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x144f22(0x261)](async _0x5b5b0c=>{const _0xa0cb07=_0x144f22;try{const _0x15992a=await exchange[_0xa0cb07(0x18a)](_0x5b5b0c[_0xa0cb07(0x1c6)],_0x5b5b0c[_0xa0cb07(0x1f3)]);}catch(_0x5d70d4){if(_0x5d70d4[_0xa0cb07(0x1a8)]()[_0xa0cb07(0x22c)](_0xa0cb07(0x1e0))){}else await handleError(_0x5d70d4,'cancelOrder()');}}),logHistory(_0x144f22(0x18f),_0x144f22(0x1e5)+Math[_0x144f22(0x280)](_0x261def*validateOrderInterval/0xea60)+_0x144f22(0x1cf))));}}async function resetCoinResults(){const _0x5edd70=_0x411b48;dbCoinResults['get'](_0x5edd70(0x268))['remove']()[_0x5edd70(0x27e)]();let _0x134408=await getStartingBalances(![]);_0x134408[_0x5edd70(0x268)][_0x5edd70(0x261)](_0x438b8c=>{const _0x344a20=_0x5edd70,_0xacc289=_0x438b8c[_0x344a20(0x1f3)][_0x344a20(0x22c)](config[_0x344a20(0x1ad)]+'/');if(_0x438b8c['coin']!=config[_0x344a20(0x1ad)]){let _0x363874={'coin':_0x438b8c[_0x344a20(0x278)],'number':_0x438b8c[_0x344a20(0x1ec)],'breakeven':_0x438b8c[_0x344a20(0x1ff)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x344a20(0x265)](_0x344a20(0x268))[_0x344a20(0x28d)](_0x363874)[_0x344a20(0x27e)]();}});}async function updateCoinResults(_0x4688af){const _0x4349cb=_0x411b48;let _0x2267d9,_0x3ccbfc,_0x4d802f,_0xdea41e,_0x1b2112,_0x4ef1fe,_0x26dfa0=dbCoinResults[_0x4349cb(0x265)](_0x4349cb(0x268))['find']({'coin':_0x4688af[_0x4349cb(0x278)]})[_0x4349cb(0x1f8)]();if(!_0x26dfa0)return;if(_0x4688af[_0x4349cb(0x237)]&&_0x4688af['fee'][_0x4349cb(0x25c)]==config[_0x4349cb(0x1ad)])_0x2267d9=_0x4688af[_0x4349cb(0x237)][_0x4349cb(0x222)];else{if(_0x4688af[_0x4349cb(0x237)]&&_0x4688af[_0x4349cb(0x237)][_0x4349cb(0x25c)]=='BNB')_0x2267d9=_0x4688af['fee'][_0x4349cb(0x222)]*global[_0x4349cb(0x1a3)][_0x4349cb(0x26b)+config[_0x4349cb(0x1ad)]];else _0x2267d9=0.001*_0x4688af['filled'];}const _0x2b8e2a=_0x4688af[_0x4349cb(0x1f3)][_0x4349cb(0x22c)](config[_0x4349cb(0x1ad)]+'/');_0x2b8e2a&&(_0x4ef1fe={'coin':_0x4688af['coin'],'symbol':_0x4688af[_0x4349cb(0x1f3)],'filled':_0x4688af[_0x4349cb(0x25e)]*_0x4688af[_0x4349cb(0x1ff)],'side':_0x4688af['side']==_0x4349cb(0x263)?_0x4349cb(0x1f1):_0x4349cb(0x263),'price':0x1/_0x4688af[_0x4349cb(0x1ff)]},_0x4688af={..._0x4ef1fe});_0x4688af[_0x4349cb(0x1a9)]==_0x4349cb(0x1f1)?_0x4d802f=(_0x26dfa0[_0x4349cb(0x1fa)]*_0x26dfa0[_0x4349cb(0x1ec)]+_0x4688af['price']*_0x4688af[_0x4349cb(0x25e)])/(_0x26dfa0[_0x4349cb(0x1ec)]+_0x4688af['filled']):_0x4d802f=(_0x26dfa0['breakeven']*_0x26dfa0[_0x4349cb(0x1ec)]-_0x4688af[_0x4349cb(0x1ff)]*_0x4688af[_0x4349cb(0x25e)])/(_0x26dfa0[_0x4349cb(0x1ec)]-_0x4688af[_0x4349cb(0x25e)]);_0x4688af[_0x4349cb(0x1a9)]=='buy'?_0xdea41e=_0x26dfa0[_0x4349cb(0x1ea)]:_0xdea41e=_0x26dfa0['realized']+(_0x4688af[_0x4349cb(0x1ff)]-_0x26dfa0[_0x4349cb(0x1fa)])*_0x4688af[_0x4349cb(0x25e)];_0x3ccbfc=_0x4688af[_0x4349cb(0x1a9)]==_0x4349cb(0x263)?_0x26dfa0[_0x4349cb(0x1ec)]-_0x4688af[_0x4349cb(0x25e)]:_0x26dfa0[_0x4349cb(0x1ec)]+_0x4688af[_0x4349cb(0x25e)],_0x1b2112=(_0x4688af[_0x4349cb(0x1ff)]-_0x4d802f)*_0x3ccbfc;let _0x428738={'coin':_0x4688af[_0x4349cb(0x278)],'number':_0x3ccbfc,'breakeven':formatResult(_0x4d802f,0x8),'realized':formatResult(_0xdea41e,0x8),'unrealized':formatResult(_0x1b2112,0x8),'fees':formatResult(_0x26dfa0[_0x4349cb(0x27b)]+_0x2267d9,0x8),'sells':_0x4688af[_0x4349cb(0x1a9)]==_0x4349cb(0x263)?_0x26dfa0['sells']+0x1:_0x26dfa0[_0x4349cb(0x1d8)],'buys':_0x4688af[_0x4349cb(0x1a9)]==_0x4349cb(0x1f1)?_0x26dfa0[_0x4349cb(0x232)]+0x1:_0x26dfa0[_0x4349cb(0x232)]};dbCoinResults[_0x4349cb(0x265)](_0x4349cb(0x268))[_0x4349cb(0x198)]({'coin':_0x4688af['coin']})[_0x4349cb(0x262)](_0x428738)[_0x4349cb(0x27e)]();}async function placeOrder(_0x506af3){const _0x29d2ca=_0x411b48,_0xfda5b6=config[_0x29d2ca(0x1ab)]==_0x29d2ca(0x257)?'market':_0x29d2ca(0x27d);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x29d2ca(0x1c4)](JSON[_0x29d2ca(0x1bb)](currentCoins));for(const _0x47888e of _0x506af3){let _0x426682,_0x4f2821,_0x21620d,_0x41fb40,_0x31f43a,_0x3093ea=_0x47888e[_0x29d2ca(0x1f3)];try{const _0x2c151a=await exchange['fetchTickers'](_0x3093ea),_0x7142c9=_0x2c151a[_0x3093ea];_0x426682=_0x7142c9[_0x29d2ca(0x200)],_0x4f2821=_0x7142c9[_0x29d2ca(0x19f)],_0x21620d=_0x7142c9['ask'];_0x47888e[_0x29d2ca(0x289)]?(_0x41fb40=_0x47888e['side']=='buy'?'sell':'buy',_0x31f43a=Math['abs'](_0x47888e['trade'])/_0x426682):(_0x41fb40=_0x47888e[_0x29d2ca(0x1a9)],_0x31f43a=Math[_0x29d2ca(0x1c7)](_0x47888e[_0x29d2ca(0x23c)]));_0xfda5b6==_0x29d2ca(0x27d)&&(config['ordertype']==_0x29d2ca(0x25f)&&(_0x426682=_0x41fb40=='buy'?_0x4f2821:_0x21620d),config[_0x29d2ca(0x1ab)]==_0x29d2ca(0x208)&&(_0x426682=_0x41fb40==_0x29d2ca(0x1f1)?_0x21620d:_0x4f2821));_0x31f43a=formatResult(_0x31f43a,0x8),_0x426682=formatResult(_0x426682,0x8);const _0x2405f9=await exchange[_0x29d2ca(0x283)](_0x3093ea,_0xfda5b6,_0x41fb40,_0x31f43a,_0x426682);lastOrders[_0x29d2ca(0x28d)]({'orderId':_0x2405f9['id'],'symbol':_0x3093ea,'side':_0x41fb40,'reverse':_0x47888e[_0x29d2ca(0x289)],'amount':_0x47888e[_0x29d2ca(0x289)]?_0x2405f9[_0x29d2ca(0x20c)]*_0x2405f9['price']:_0x2405f9[_0x29d2ca(0x20c)],'filled':_0x47888e['reverse']?_0x2405f9[_0x29d2ca(0x25e)]*_0x2405f9[_0x29d2ca(0x1ff)]:_0x2405f9[_0x29d2ca(0x25e)],'price':_0x2405f9[_0x29d2ca(0x1ff)]});const _0xfda7be=_0x41fb40==_0x29d2ca(0x263)?config[_0x29d2ca(0x288)]?String[_0x29d2ca(0x27c)]('0x'+config[_0x29d2ca(0x288)])+'\x20':'':config[_0x29d2ca(0x236)]?String[_0x29d2ca(0x27c)]('0x'+config[_0x29d2ca(0x236)])+'\x20':'',_0xbeb9ef=_0xfda5b6==_0x29d2ca(0x257)?'Market':config['ordertype']==_0x29d2ca(0x25f)?_0x29d2ca(0x1a1):_0x29d2ca(0x291);if(_0xfda5b6==_0x29d2ca(0x257))logHistory('order',''+_0xfda7be+_0xbeb9ef+'\x20order:\x20'+_0x3093ea+'\x20'+_0x41fb40+'\x20#'+formatResult(_0x2405f9[_0x29d2ca(0x25e)],0x8)+'\x20@'+formatResult(_0x2405f9[_0x29d2ca(0x1ff)],0x8));else logHistory(_0x29d2ca(0x213),''+_0xfda7be+_0xbeb9ef+_0x29d2ca(0x1e1)+_0x3093ea+'\x20'+_0x41fb40+'\x20#'+formatResult(_0x2405f9[_0x29d2ca(0x20c)],0x8)+'\x20@'+formatResult(_0x2405f9[_0x29d2ca(0x1ff)],0x8));_0x2405f9['coin']=_0x47888e[_0x29d2ca(0x278)],await updateCoinResults(_0x2405f9);if(config[_0x29d2ca(0x196)]!=0x0){let _0x2d0377=null;if(cooldownTracker[_0x29d2ca(0x224)]==config[_0x29d2ca(0x196)]-0x1)_0x2d0377=cooldownTracker[_0x29d2ca(0x25d)]();const _0x1052c9=getTimeStamp();cooldownTracker[_0x29d2ca(0x28d)](_0x1052c9);if(_0x2d0377){const _0x4713dd=fns['differenceInSeconds'](new Date(_0x1052c9),new Date(_0x2d0377));_0x4713dd<cooldownInterval&&(logHistory(_0x29d2ca(0x23b),_0x29d2ca(0x1e8)+config[_0x29d2ca(0x196)]+_0x29d2ca(0x253)+cooldownInterval/0x3c+_0x29d2ca(0x1b1)+cooldownPeriod/(0xe10*0x3e8)+_0x29d2ca(0x25b)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1efb75){if(_0x1efb75['toString']()['includes']('MIN_NOTIONAL'))logHistory(_0x29d2ca(0x23b),_0x29d2ca(0x1f5)+_0x3093ea);else{if(_0x1efb75[_0x29d2ca(0x1a8)]()[_0x29d2ca(0x22c)](_0x29d2ca(0x1f4)))logHistory(_0x29d2ca(0x23b),'Order\x20amount\x20is\x20invalid:\x20'+_0x3093ea);else await handleError(_0x1efb75,_0x29d2ca(0x1b2));}}}if(lastOrders[_0x29d2ca(0x224)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x29d2ca(0x251)]&&(config[_0x29d2ca(0x1ab)]=='market'?logHistory(_0x29d2ca(0x23b),_0x29d2ca(0x204)):logHistory(_0x29d2ca(0x23b),_0x29d2ca(0x227)));else coolingDown&&(!config[_0x29d2ca(0x251)]&&logHistory(_0x29d2ca(0x23b),_0x29d2ca(0x1eb)));}}function logHistory(_0x24953e,_0x517fa6,_0x26e987=''){const _0x9f1516=_0x411b48;let _0x1311f2={'time':getTimeStamp(),'type':_0x24953e,'event':_0x517fa6,'botname':config['botname'],'showname':config[_0x9f1516(0x20b)]};dbLogs[_0x9f1516(0x265)](_0x9f1516(0x219))['push'](_0x1311f2)[_0x9f1516(0x27e)]();if(_0x26e987=='')_0x26e987=_0x517fa6;proxyEmit(_0x9f1516(0x1cb),{'log':_0x1311f2,'summary':_0x26e987}),process[_0x9f1516(0x1a5)]({'telegram':_0x1311f2},_0x33ec4d=>{}),logging(''+_0x1311f2[_0x9f1516(0x1cb)]);}function emitHistory(_0x547a59={}){const _0x32b94f=_0x411b48;Object[_0x32b94f(0x1c1)](_0x547a59)[_0x32b94f(0x224)]==0x0&&(_0x547a59={'type':[_0x32b94f(0x213),_0x32b94f(0x1cb)],'event':'','page':0x1});if(_0x547a59[_0x32b94f(0x1d9)][_0x32b94f(0x22c)]('event'))_0x547a59[_0x32b94f(0x1d9)][_0x32b94f(0x26a)](_0x547a59['type'][_0x32b94f(0x276)](_0x32b94f(0x1cb)),0x1,'error',_0x32b94f(0x18f));if(dbLogs['has']('logs')[_0x32b94f(0x1f8)]()){let _0xafbc8c=dbLogs[_0x32b94f(0x265)](_0x32b94f(0x219))[_0x32b94f(0x1de)](_0x5889e1=>{const _0x3cb924=_0x32b94f;if(_0x547a59[_0x3cb924(0x1d9)]['length']==0x0)return![];else return _0x547a59['type'][_0x3cb924(0x22c)](_0x5889e1['type']);})[_0x32b94f(0x1de)](_0x356ff0=>{const _0x136782=_0x32b94f;if(_0x547a59[_0x136782(0x1cb)]=='')return!![];else return _0x356ff0[_0x136782(0x1cb)][_0x136782(0x24b)]()[_0x136782(0x22c)](_0x547a59[_0x136782(0x1cb)]['toLowerCase']());})[_0x32b94f(0x290)](_0x32b94f(0x23f)),_0x23141b=_0xafbc8c[_0x32b94f(0x1f8)]()[_0x32b94f(0x224)];_0xafbc8c=_0xafbc8c[_0x32b94f(0x289)]()[_0x32b94f(0x1e9)]((_0x547a59[_0x32b94f(0x282)]-0x1)*logPageSize,_0x547a59[_0x32b94f(0x282)]*logPageSize-0x1)[_0x32b94f(0x289)]()[_0x32b94f(0x1f8)](),proxyEmit(_0x32b94f(0x260),{'logs':_0xafbc8c,'total':_0x23141b});}else proxyEmit(_0x32b94f(0x260),{'logs':[],'total':0x0});}async function pauseBot(_0x455935){const _0x2bbc16=_0x411b48,_0x21a436=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x2bbc16(0x25a)](),consecutivePauses=0x1;else{if(_0x21a436-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x2bbc16(0x1a5)]({'stop':_0x2bbc16(0x1af)},_0x420aa4=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x2bbc16(0x25a)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x2bbc16(0x23b),_0x2bbc16(0x19e)+consecutivePauses+')'),await sleep(_0x455935),botPaused=![],reset();}}async function handleError(_0x359c6a,_0x2d22fd,_0x5c18b8=''){const _0x44a4ca=_0x411b48;if(_0x359c6a[_0x44a4ca(0x1a8)]()[_0x44a4ca(0x22c)](_0x44a4ca(0x225)))logHistory(_0x44a4ca(0x23b),_0x2d22fd+_0x44a4ca(0x255)),await pauseBot(pauseBotInterval);else{if(_0x359c6a[_0x44a4ca(0x1a8)]()[_0x44a4ca(0x22c)]('ExchangeNotAvailable'))logHistory(_0x44a4ca(0x23b),_0x2d22fd+_0x44a4ca(0x216)),await pauseBot(pauseBotInterval);else{if(_0x359c6a[_0x44a4ca(0x1a8)]()[_0x44a4ca(0x22c)](_0x44a4ca(0x1e6)))logHistory('error',_0x2d22fd+_0x44a4ca(0x18c)),await pauseBot(pauseBotInterval);else{if(_0x359c6a['toString']()[_0x44a4ca(0x22c)](_0x44a4ca(0x20a)))logHistory(_0x44a4ca(0x23b),_0x2d22fd+_0x44a4ca(0x22b)),logHistory('error',_0x44a4ca(0x221)),process[_0x44a4ca(0x1a5)]({'stop':_0x44a4ca(0x1dd)},_0x64afb5=>{});else{if(_0x359c6a[_0x44a4ca(0x1a8)]()['includes']('AuthenticationError'))logHistory(_0x44a4ca(0x23b),_0x2d22fd+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory('error',_0x44a4ca(0x221)),process['send']({'stop':_0x44a4ca(0x1dd)},_0x226944=>{});else{if(_0x359c6a[_0x44a4ca(0x1a8)]()[_0x44a4ca(0x22c)](_0x44a4ca(0x1bf)))logHistory('error',_0x2d22fd+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x44a4ca(0x1dd)},_0x4da42f=>{});else{if(_0x359c6a[_0x44a4ca(0x1a8)]()['includes'](_0x44a4ca(0x270)))logHistory(_0x44a4ca(0x23b),_0x2d22fd+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x44a4ca(0x23b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x44a4ca(0x1a5)]({'stop':_0x44a4ca(0x1dd)},_0x5dfb2a=>{});else{if(_0x359c6a[_0x44a4ca(0x1a8)]()['includes'](_0x44a4ca(0x185)))logHistory(_0x44a4ca(0x23b),_0x2d22fd+_0x44a4ca(0x202)),await pauseBot(pauseBotInterval),process[_0x44a4ca(0x1a5)]({'stop':_0x44a4ca(0x1af)},_0x21149d=>{});else _0x359c6a[_0x44a4ca(0x1a8)]()[_0x44a4ca(0x22c)]('InsufficientFunds')?logHistory('error',_0x2d22fd+_0x44a4ca(0x250)):(logHistory(_0x44a4ca(0x23b),_0x2d22fd+_0x44a4ca(0x1b4)),logging(_0x2d22fd+_0x44a4ca(0x1d7),_0x359c6a),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3d648b,_0x79be1d){const _0xee436d=_0x411b48;return parseFloat(_0x3d648b[_0xee436d(0x1b5)](_0x79be1d));}function logging(_0x11b4dc,_0x1399aa=''){const _0x3b2191=_0x411b48;if(config[_0x3b2191(0x20b)])console[_0x3b2191(0x19a)](getTimeStamp()+':\x20'+config['botname']+'\x20>\x20'+_0x11b4dc,_0x1399aa);else console[_0x3b2191(0x19a)](getTimeStamp()+_0x3b2191(0x1ca)+botID+_0x3b2191(0x21c)+_0x11b4dc,_0x1399aa);}function getServerTime(){const _0x3b40cd=_0x411b48,_0x38eeb9=new Date();return _0x38eeb9[_0x3b40cd(0x1d1)]()+'/'+(_0x38eeb9[_0x3b40cd(0x1a2)]()+0x1)[_0x3b40cd(0x1a8)]()[_0x3b40cd(0x1f2)](0x2,'0')+'/'+_0x38eeb9[_0x3b40cd(0x1fe)]()[_0x3b40cd(0x1a8)]()['padStart'](0x2,'0')+'\x20'+_0x38eeb9[_0x3b40cd(0x1cc)]()[_0x3b40cd(0x1a8)]()[_0x3b40cd(0x1f2)](0x2,'0')+':'+_0x38eeb9['getMinutes']()[_0x3b40cd(0x1a8)]()[_0x3b40cd(0x1f2)](0x2,'0')+':'+_0x38eeb9['getSeconds']()[_0x3b40cd(0x1a8)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x5f00b6=_0x411b48,_0x2b7fe6=shiftedTime();return _0x2b7fe6[_0x5f00b6(0x1d1)]()+'/'+(_0x2b7fe6[_0x5f00b6(0x1a2)]()+0x1)[_0x5f00b6(0x1a8)]()[_0x5f00b6(0x1f2)](0x2,'0')+'/'+_0x2b7fe6[_0x5f00b6(0x1fe)]()[_0x5f00b6(0x1a8)]()['padStart'](0x2,'0')+'\x20'+_0x2b7fe6[_0x5f00b6(0x1cc)]()[_0x5f00b6(0x1a8)]()[_0x5f00b6(0x1f2)](0x2,'0')+':'+_0x2b7fe6['getMinutes']()[_0x5f00b6(0x1a8)]()[_0x5f00b6(0x1f2)](0x2,'0')+':'+_0x2b7fe6['getSeconds']()[_0x5f00b6(0x1a8)]()[_0x5f00b6(0x1f2)](0x2,'0');}function getDate(){const _0x64c201=_0x411b48,_0xe82e17=shiftedTime();return _0xe82e17['getFullYear']()+'/'+(_0xe82e17[_0x64c201(0x1a2)]()+0x1)['toString']()[_0x64c201(0x1f2)](0x2,'0')+'/'+_0xe82e17['getDate']()[_0x64c201(0x1a8)]()[_0x64c201(0x1f2)](0x2,'0');}function getHour(){const _0x129184=_0x411b48,_0x9bae80=shiftedTime();return _0x9bae80[_0x129184(0x1cc)]()[_0x129184(0x1a8)]()[_0x129184(0x1f2)](0x2,'0');}function sleep(_0x17e803){return new Promise(_0x14039d=>setTimeout(_0x14039d,_0x17e803));}function shiftedTime(){const _0x5a70e4=_0x411b48,_0x35bd3e=new Date();let _0x3cc9c8=_0x35bd3e;if(config&&config['timeshift']!==0x0)_0x3cc9c8=fns[_0x5a70e4(0x1c5)](_0x35bd3e,{'hours':config[_0x5a70e4(0x233)]});return _0x3cc9c8;}