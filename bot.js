const _0x261dd2=_0x6706;(function(_0x379147,_0x51bc5d){const _0xfe6cad=_0x6706,_0x40869e=_0x379147();while(!![]){try{const _0x14e3c3=-parseInt(_0xfe6cad(0x25c))/0x1*(parseInt(_0xfe6cad(0x232))/0x2)+-parseInt(_0xfe6cad(0x225))/0x3+parseInt(_0xfe6cad(0x19d))/0x4+-parseInt(_0xfe6cad(0x1b5))/0x5*(parseInt(_0xfe6cad(0x22f))/0x6)+parseInt(_0xfe6cad(0xfb))/0x7*(parseInt(_0xfe6cad(0x277))/0x8)+-parseInt(_0xfe6cad(0x13d))/0x9*(-parseInt(_0xfe6cad(0x155))/0xa)+parseInt(_0xfe6cad(0xf6))/0xb;if(_0x14e3c3===_0x51bc5d)break;else _0x40869e['push'](_0x40869e['shift']());}catch(_0x17f077){_0x40869e['push'](_0x40869e['shift']());}}}(_0x5b90,0x21418));const _0x55f968=function(){let _0x32650a=!![];return function(_0x424223,_0x531f5f){const _0x638911=_0x32650a?function(){if(_0x531f5f){const _0x1b78aa=_0x531f5f['apply'](_0x424223,arguments);return _0x531f5f=null,_0x1b78aa;}}:function(){};return _0x32650a=![],_0x638911;};}(),_0x51edb6=_0x55f968(this,function(){const _0x558a13=_0x6706;return _0x51edb6[_0x558a13(0x156)]()[_0x558a13(0x1be)]('(((.+)+)+)+$')[_0x558a13(0x156)]()['constructor'](_0x51edb6)[_0x558a13(0x1be)](_0x558a13(0x222));});_0x51edb6();'use strict';const ccxt=require('ccxt')['pro'],low=require(_0x261dd2(0x218)),FileSync=require(_0x261dd2(0xea)),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x261dd2(0x147))['Crypt'],util=require(_0x261dd2(0x20c)),argv=require(_0x261dd2(0x157))(process[_0x261dd2(0x138)]['slice'](0x2))[_0x261dd2(0x138)],path=require(_0x261dd2(0x273));let exchange;global[_0x261dd2(0xeb)]={},global['change']={};const usdBasecoins=[_0x261dd2(0x19c),_0x261dd2(0x1d1),_0x261dd2(0x179),_0x261dd2(0x174),'USDC',_0x261dd2(0x152)],exceptions={'binance':[_0x261dd2(0x12e),'HOT/BTC',_0x261dd2(0x25b),'NANO/',_0x261dd2(0x24a)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x261dd2(0x17d)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x261dd2(0x266)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x261dd2(0x244)],botID=process[_0x261dd2(0x138)][0x2]||_0x261dd2(0x17b),pattern=/^[0-9]{3}$/;!pattern[_0x261dd2(0x18d)](botID)&&(console[_0x261dd2(0x19b)](_0x261dd2(0x1c5)+botID+_0x261dd2(0x1c4)),killBot());const userID=process[_0x261dd2(0x138)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x261dd2(0x159),logspath=userID?'./logs/'+userID+'/':_0x261dd2(0x207),loggerfile=fs['createWriteStream'](logspath+_0x261dd2(0x1bc),{'flags':'a'});!fs[_0x261dd2(0x1f0)](configpath)&&fs[_0x261dd2(0x27b)](configpath);!fs['existsSync'](logspath)&&fs[_0x261dd2(0x27b)](logspath);const configfile=configpath+_0x261dd2(0x169)+botID+_0x261dd2(0x230),logfile=configpath+_0x261dd2(0x169)+botID+'-events.json',performancefile=configpath+_0x261dd2(0x169)+botID+'-performance.json',coinresultsfile=configpath+_0x261dd2(0x169)+botID+_0x261dd2(0x137),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x261dd2(0x1ff),configbackuppath=configpath+_0x261dd2(0x1da),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x261dd2(0x1f3)]({'logs':[],'version':serverversion})[_0x261dd2(0x24d)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x261dd2(0x1f3)]({'data':[],'version':serverversion})[_0x261dd2(0x24d)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x261dd2(0x1f3)]({'bot':[],'version':serverversion})[_0x261dd2(0x24d)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x261dd2(0x1f3)]({'coins':[],'version':serverversion})[_0x261dd2(0x24d)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x261dd2(0x220),'rsaStandard':_0x261dd2(0x274)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x56eb88=>{const _0x5108d9=_0x261dd2;console[_0x5108d9(0x19b)](_0x56eb88);},'simple':_0x2b966b=>{const _0xcb5a60=_0x261dd2;console[_0xcb5a60(0x19b)](_0x2b966b),loggerfile[_0xcb5a60(0x24d)](util[_0xcb5a60(0x21f)](_0x2b966b)+'\x0a');},'full':async(_0x2d1904,_0x563eea='')=>{const _0x308890=_0x261dd2;let _0x150e60;if(config[_0x308890(0x240)])_0x150e60=getTimeStamp()+':\x20'+config[_0x308890(0x13a)]+'\x20>\x20'+_0x2d1904;else _0x150e60=getTimeStamp()+_0x308890(0x1a4)+botID+_0x308890(0x205)+_0x2d1904;console[_0x308890(0x19b)](_0x150e60),loggerfile[_0x308890(0x24d)](util[_0x308890(0x21f)](_0x150e60)+'\x0a'),_0x563eea&&(console[_0x308890(0x19b)](_0x563eea),loggerfile[_0x308890(0x24d)](util[_0x308890(0x21f)](_0x563eea)+'\x0a'));},'debug':async(_0x347fd2,_0x390c98='')=>{const _0x3c8dbf=_0x261dd2;let _0x4c4329;if(config[_0x3c8dbf(0x240)])_0x4c4329=getTimeStamp()+':\x20'+config[_0x3c8dbf(0x13a)]+'\x20>\x20[DEBUG]\x20'+_0x347fd2;else _0x4c4329=getTimeStamp()+':\x20Bot\x20'+botID+_0x3c8dbf(0x178)+_0x347fd2;if(debugging)console[_0x3c8dbf(0x19b)](_0x4c4329);loggerfile[_0x3c8dbf(0x24d)](util[_0x3c8dbf(0x21f)](_0x4c4329)+'\x0a');if(_0x390c98){if(debugging)console['log'](_0x390c98);loggerfile[_0x3c8dbf(0x24d)](util['format'](_0x390c98)+'\x0a');}}};process['on'](_0x261dd2(0x1a2),function(_0x10f975){const _0x1251a6=_0x261dd2;logger[_0x1251a6(0xf1)](_0x1251a6(0x1f7),_0x10f975);});settings[_0x261dd2(0x140)]!=config[_0x261dd2(0x140)]&&updateTimeshift(settings[_0x261dd2(0x140)]);settings[_0x261dd2(0x20b)]!=config[_0x261dd2(0x20b)]&&updateOnepagemode(settings[_0x261dd2(0x20b)]);process[_0x261dd2(0x258)]({'started':_0x261dd2(0xec)},_0xf9a48d=>{}),initializeProcessListeners();function proxyEmit(_0x4cae9d,_0x38c157=null){const _0xda990c=_0x261dd2;process[_0xda990c(0x258)]({'function':_0x4cae9d,'args':_0x38c157},_0x2791ae=>{});}function initializeProcessListeners(){process['on']('message',_0x2e1ea5=>{const _0x5348b4=_0x6706;switch(Object[_0x5348b4(0x279)](_0x2e1ea5)[0x0]){case'timeshift':_0x2e1ea5[_0x5348b4(0x140)]!=undefined&&(settings[_0x5348b4(0x140)]=_0x2e1ea5[_0x5348b4(0x140)],updateTimeshift(settings[_0x5348b4(0x140)]));break;case _0x5348b4(0x20b):_0x2e1ea5[_0x5348b4(0x20b)]!=undefined&&(settings['onepagemode']=_0x2e1ea5[_0x5348b4(0x20b)],updateOnepagemode(settings[_0x5348b4(0x20b)]));break;case'bots':_0x2e1ea5['bots']!=undefined&&(bots=JSON['parse'](_0x2e1ea5['bots']),proxyEmit('bots',bots));break;case _0x5348b4(0x172):switch(_0x2e1ea5[_0x5348b4(0x172)]){case _0x5348b4(0x182):initclient();break;case _0x5348b4(0x1b8):toggleBotMode();break;case _0x5348b4(0xfc):emitHistory(_0x2e1ea5['args']);break;case _0x5348b4(0x22b):deleteHistoryAlerts(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case _0x5348b4(0xf7):getPortfolio(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case _0x5348b4(0x17f):storeConfiguration(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case'storeHeadless':storeHeadless(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case _0x5348b4(0x1b7):storeFiat(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case'resetHistory':resetHistory();break;case _0x5348b4(0x1ac):getStartingBalances(getNormalizedPerformance());break;case _0x5348b4(0x260):placeOrder(_0x2e1ea5[_0x5348b4(0x1ef)]);break;case _0x5348b4(0x134):cancelLoading();break;case _0x5348b4(0x18a):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x5348b4(0x1cd):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x49fe5d=null,_0x4489ff=![]){const _0x34dc38=_0x261dd2;logger['debug']('Reset\x20|\x20'+(_0x49fe5d&&_0x49fe5d[_0x34dc38(0x119)]>0x0?_0x34dc38(0x18b)+_0x49fe5d[_0x34dc38(0x202)](','):'no\x20additional\x20symbols')+_0x34dc38(0x235)+(_0x4489ff?'exchange\x20reloaded':_0x34dc38(0x269))+_0x34dc38(0x148)+config[_0x34dc38(0x144)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4489ff)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x34dc38(0x16f)]!=''&&config[_0x34dc38(0x16f)]!='***'){if(_0x4489ff){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2f2a5f){handleErrorNoStop(_0x2f2a5f,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x49fe5d);const _0x118e66=await getCoins();[currentCoins,currentCoinsAll]=_0x118e66,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x34dc38(0x119)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x1646e1=_0x261dd2;logger[_0x1646e1(0xf1)](_0x1646e1(0x177));while(lockOrders!=ORDERS[_0x1646e1(0x266)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1646e1(0xf1)](_0x1646e1(0x143)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4bcd42=config[_0x261dd2(0x144)],_0x375d27=config[_0x261dd2(0x16f)],_0x54c2f0=config[_0x261dd2(0x216)],_0x4e95d6=config[_0x261dd2(0x24b)]){const _0x500071=_0x261dd2;exchange&&await stopExchange();!supportedExchanges()[_0x500071(0x219)](_0x4bcd42)&&(logHistory(_0x500071(0x204),_0x500071(0x26a)+_0x4bcd42+_0x500071(0x150)),killBot());const _0x3f336d=ccxt[_0x4bcd42[_0x500071(0x24e)]()];exchange=new _0x3f336d({'apiKey':_0x375d27,'secret':_0x54c2f0,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x4bcd42==_0x500071(0x190)&&(exchange[_0x500071(0x1e6)]={'defaultType':_0x500071(0x254)});if(_0x4e95d6)exchange[_0x500071(0x262)]=_0x4e95d6;}function setStableCoins(){const _0x29c2ea=_0x261dd2;let _0x479fc0=config[_0x29c2ea(0x208)]==_0x29c2ea(0x245)?'ETH':_0x29c2ea(0x145),_0x43023f=!allSymbols[_0x29c2ea(0x219)](_0x479fc0+_0x29c2ea(0x243))?_0x29c2ea(0x174):'USD',_0x20a292=!allSymbols['includes'](_0x479fc0+_0x29c2ea(0x22c))?_0x43023f:_0x29c2ea(0x132);stablecoins={'eur':{'coin':''+_0x479fc0+_0x20a292,'symbol':_0x479fc0+'/'+_0x20a292},'usd':{'coin':''+_0x479fc0+_0x43023f,'symbol':_0x479fc0+'/'+_0x43023f}};}async function initwsCcxt(_0x218945){const _0x5cc26f=_0x261dd2;_0x218945==null&&(_0x218945=[],config[_0x5cc26f(0x18e)][_0x5cc26f(0x270)](_0x70d4cb=>{const _0x2ac82e=_0x5cc26f;if(!_0x70d4cb[_0x2ac82e(0x21a)]&&_0x70d4cb['coin']!=config[_0x2ac82e(0x208)])_0x218945[_0x2ac82e(0x1fa)](_0x70d4cb['symbol']);}));if(!_0x218945[_0x5cc26f(0x219)](stablecoins['eur']['symbol']))_0x218945[_0x5cc26f(0x1fa)](stablecoins[_0x5cc26f(0x1ad)][_0x5cc26f(0x1ea)]);if(!_0x218945[_0x5cc26f(0x219)](stablecoins[_0x5cc26f(0x141)][_0x5cc26f(0x1ea)]))_0x218945['push'](stablecoins[_0x5cc26f(0x141)][_0x5cc26f(0x1ea)]);if(config[_0x5cc26f(0x144)][_0x5cc26f(0xfa)](_0x5cc26f(0x25d))){if(!_0x218945['includes']('BNB/'+config[_0x5cc26f(0x208)]))_0x218945['push'](_0x5cc26f(0x22a)+config[_0x5cc26f(0x208)]);}loadCoins(_0x218945);const _0x419d04=async _0x4eb33d=>{const _0x565708=_0x5cc26f,_0x66aeca=await exchange[_0x565708(0x13b)](_0x4eb33d);global['ticker'][noslash(_0x66aeca[_0x565708(0x1ea)])]=_0x66aeca[_0x565708(0x16e)];while(!![]){if(!botPaused)try{const _0x1ff51a=await exchange[_0x565708(0x1d5)](_0x4eb33d);global[_0x565708(0xeb)][noslash(_0x1ff51a[0x0]['symbol'])]=_0x1ff51a[0x0]['price'],await sleep(0x3e8);}catch(_0x5e2a49){if(!exchangeStopped)await handleError(_0x5e2a49,_0x565708(0x1d5),_0x4eb33d);}else await sleep(0x64);}},_0x531f76=async _0x4e196e=>{const _0xa2a098=_0x5cc26f;while(!![]){if(!botPaused)try{const _0x400bc8=await exchange['fetchTicker'](_0x4e196e);global['change'][_0x400bc8['symbol']]=_0x400bc8[_0xa2a098(0x23c)],await sleep(0x3c*0x3e8);}catch(_0x9fee2f){if(!exchangeStopped)await handleError(_0x9fee2f,'fetchTickers',_0x4e196e);}else await sleep(0x64);}},_0x5fab1e=async()=>{const _0x2638e7=_0x5cc26f;while(!![]){if(!botPaused)try{const _0x369149=await exchange['watchOrders']();_0x369149[_0x2638e7(0x270)](_0x3ff735=>{updateNumberCoinsCcxt(_0x3ff735);});}catch(_0x2cf506){if(!exchangeStopped)await handleError(_0x2cf506,_0x2638e7(0x23e));}else await sleep(0x64);}};_0x218945['forEach'](_0x5f23de=>{_0x419d04(_0x5f23de),_0x531f76(_0x5f23de);}),!wsEventsSet&&(wsEventsSet=!![],_0x5fab1e(),watchTransactions());}function _0x5b90(){const _0x25d3e4=['ordertype','none','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','MIN_NOTIONAL','netoffset','apiSecret','exec','lowdb','includes','excluded','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Market','delta','starting-balance-','format','sha256','%\x20(','(((.+)+)+)+$','getCoins()','BNB','250080dBAmsZ','colorscheme','configuration-stored','padStart','padEnd','BNB/','deleteHistoryAlerts','/EUR','limit-high','closed','12IFLBwG','-config.json','coins','326762Tojbem','Net\x20','orderstatus','\x20|\x20','value','3\x20-\x20handling\x20FILLED\x20order:\x20','change24h','parse','ORDERS.LOCKED','highest','percentage','Initializing\x20coin\x20results','watchOrders','getOpenOrders()','showname','\x20value','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','/USD','version','ETH','added','orderId','warning','rightTxt','YOYOW/','apiPassword','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','write','toLowerCase','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','min','datetime','sort','full','spot','yyyy/MM/dd','offset','amountToPrecision','send','valid','autoliquidity','XEM/BUSD','1ipUupZ','Binance','coin','***','placeOrder','Resetting\x20bot\x20history','password','cancelOrders()','remainingSymbols','Order(s)\x20not\x20validated\x20after\x20','UNLOCKED','RequestTimeout','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','exchange\x20not\x20reloaded','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','entries','symbols','loadMarkets','milliseconds','\x20orders\x20in\x20less\x20than\x20','forEach','emojisell','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','path','RSA-OAEP','initial','average','432Hqhiod','bid','keys','target','mkdirSync','lowdb/adapters/FileSync','ticker','running','\x20minutes','2\x20-\x20FILLED\x20unknown\x20order:\x20','realized','Executed\x20','debug','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','1\x20-\x20Unlock\x20orders','\x20not\x20responding','configuration','1304446YgxhQE','getPortfolio','UNLOCKING','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','startsWith','16639wPcQTT','emitHistory','starting-balances','decrypt','differenceInSeconds','substring','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Transaction\x20detection\x20blocked','\x20has\x20a\x2024h\x20drop\x20of\x20','Limit\x20(low-margin)','Fee\x20discount\x20refund\x20detected:\x20','fee','breakeven','trade','remove','abs','Saving\x20configuration','2\x20-\x20Orders\x20unlocked','filter','liquidity','changes','enabled','getSeconds','Resetting\x20coin\x20results:\x20','cooldown','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','exchanges','sortBy','1\x20-\x20Validate\x20orders:\x20','floor','length','stringify','has','splice','timeout','DDoSProtection','fiat','data','\x20API\x20key\x20is\x20invalid','must\x20be\x20greater\x20than\x20minimum\x20amount','2\x20-\x20Validate\x20orders:\x20','Manual\x20balancing\x20required','Net\x20effect','\x20minutes\x20-\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','InvalidNonce','recreateCoinResults()','Waited\x20','2.3.5','No\x20more\x20open\x20orders\x20-\x20','\x20portfolio:</b>\x20\x0a\x0a','DAI/','getPortfolio(0)','\x20|\x20Error\x20details:\x20','removed','EUR','bot','cancelLoading','string','OrderNotFound','-results.json','argv','placeOrder()','botname','fetchTicker','concat','1539dTbnvk','message','Order\x20amount\x20is\x20invalid:\x20','timeshift','usd','shift','Executing\x20exchange\x20reload','exchange','BTC','getPortfolio(1)','hybrid-crypto-js','\x20|\x20Exchange:\x20','2.5.0','getDate','Failed\x20to\x20load\x20coin\x20data\x20for\x20','2\x20-\x20Handled\x20open\x20orders','recent20','writeFile','timestamp','\x20exchange','headless','USDP','change','getMonth','6310nVevQf','toString','yargs/yargs','Error\x20while\x20deleting\x20files:\x20','./config/','page','Order\x20filled:\x20','************','market','Unfilled\x20order(s)\x20canceled\x20after\x20','\x20:\x20','getCoinNumber()','</pre>','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','-events.json','isEqual','Invalid\x20quantity','type','open','getMinutes','bot-','performance','split','customId','\x20API\x20secret\x20is\x20invalid','last','apiKey','order','leftTxt','function','startnumber','USDT','botID','AuthenticationError','Initiating\x20exchange\x20reload','\x20>\x20[DEBUG]\x20','TUSD','round','001','recovery','freeze','sell','storeConfiguration','red_yellow_blue','net-basecoin','initclient','settings','filled','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Portfolio\x20change\x20detected:\x20','unlinkSync','max','fetchOpenOrders','showConfig','additional\x20symbols\x20','Pausing\x20for\x20','test','portfolio','toFixed','Bybit','loading-canceled','buy','assign','createOrder','-------------------------------\x0a','ORDERS.UNLOCKED','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','ORDERS.UNLOCKING','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','1\x20-\x20FILLED:\x20','log','USD','817272oIEqQe','logs','getPortfolio(2)','event-history','\x20closed\x20the\x20connection','uncaughtException','time',':\x20Bot\x20','\x20order:\x20','cloneDeep','cancel','canceled','indexOf','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getStartingBalances','eur','add','Cooldown\x20ended\x20-\x20balancing\x20resumed','cost','event','\x20metrics:</b>\x20\x0a\x0a','LOCKED','getHours','440515oFkzMm','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','storeFiat','toggleBotMode','find','InsufficientFunds','total','/output-000.log','startdate','search','reverse','Fees\x20|\x20currency:\x20','amount','fees','map',',\x20must\x20be\x20a\x203\x20digit\x20number','Error:\x20Invalid\x20argument\x20',':\x20timer\x20>','ongoing','sells','limits','date','cancelOrder','get','sendPortfolioTelegram','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','fetchBalance','distribution','BUSD','<pre>','set','limit','watchTrades','final','parseISO','no\x20open\x20orders','getTime','/backup/','emojibuy','.json','\x20|\x20Custom\x20ID:\x20','\x20|\x20lock\x20orders:\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','startprice','balances','API-key\x20format\x20invalid','net-fiat','threshold','-performance.json','options','recreate','\x20not\x20available','watchTransactions','symbol','number','side','kill','status','args','existsSync','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','success','defaults','replace','fetchClosedOrders','currency','Uncaught\x20Exception:','balancing\x20resumed','Transaction\x20detection\x20unblocked','push','Bot\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','privateKey','ID:\x20','bb-secure.json','price','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','join','restart','error','\x20>\x20','progress','./logs/','basecoin','2.6.0','openOrders','onepagemode','util','Avoiding\x20continuous\x20order\x20attempts','slice','fetchTickers','getFullYear'];_0x5b90=function(){return _0x25d3e4;};return _0x5b90();}async function watchTransactions(){const _0x2a2c6f=_0x261dd2;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xdc7011=await getCoins(),[_0x1b459f,_0x9d32af]=_0xdc7011;let _0xc2d2a7=[];currentCoins['forEach'](_0x107185=>{const _0x1a6d0c=_0x6706,_0x556b33=_0x1b459f[_0x1a6d0c(0x1b9)](_0xf805a1=>_0xf805a1[_0x1a6d0c(0x25e)]==_0x107185[_0x1a6d0c(0x25e)]);_0x556b33&&(_0x107185[_0x1a6d0c(0x1eb)]!=_0x556b33[_0x1a6d0c(0x1eb)]&&_0xc2d2a7[_0x1a6d0c(0x1fa)]({'coin':_0x107185[_0x1a6d0c(0x25e)],'symbol':_0x107185[_0x1a6d0c(0x1ea)],'number':Number(formatResult(_0x556b33[_0x1a6d0c(0x1eb)]-_0x107185[_0x1a6d0c(0x1eb)],0x8))}));});if(_0xc2d2a7['length']==0x1&&!blockTransactionDetection){if(config[_0x2a2c6f(0x25a)]){logger['debug'](_0x2a2c6f(0x1c0)+lastFees[_0x2a2c6f(0x1f6)]+'\x20|\x20highest:\x20'+lastFees['highest']);if(!lastFees[_0x2a2c6f(0x1f6)]||_0xc2d2a7[0x0]['coin']!=lastFees['currency']||_0xc2d2a7[0x0]['number']>lastFees[_0x2a2c6f(0x23b)]){let _0x4b504e;if(_0xc2d2a7[0x0]['coin']!=config['basecoin']){let _0x280170=global['ticker'][noslash(_0xc2d2a7[0x0][_0x2a2c6f(0x1ea)])];_0x4b504e=_0xc2d2a7[0x0][_0x2a2c6f(0x1bf)]?0x1/_0x280170:_0x280170;}else _0x4b504e=0x1;_0xc2d2a7[0x0][_0x2a2c6f(0x200)]=_0x4b504e,delete _0xc2d2a7[0x0]['symbol'];let _0x7429c2=[],_0x22c6ea=[...config[_0x2a2c6f(0x10e)]]||[],_0x56515a=config[_0x2a2c6f(0x10e)];_0x22c6ea[_0x2a2c6f(0x252)]((_0x23a5ef,_0x180433)=>_0x23a5ef[_0x2a2c6f(0x1ca)]>_0x180433[_0x2a2c6f(0x1ca)]?-0x1:_0x180433[_0x2a2c6f(0x1ca)]>_0x23a5ef[_0x2a2c6f(0x1ca)]?0x1:0x0);const _0x1cea95=getDate();if(_0x22c6ea[0x0]){const _0x2d982a=fns[_0x2a2c6f(0x239)](_0x22c6ea[0x0][_0x2a2c6f(0x1ca)],_0x2a2c6f(0x255),new Date()),_0x187ef5=fns[_0x2a2c6f(0x239)](_0x1cea95,_0x2a2c6f(0x255),new Date());if(fns['isEqual'](_0x2d982a,_0x187ef5)){_0x7429c2=_0x22c6ea[0x0][_0x2a2c6f(0x10f)];const _0xd8262c=_0x7429c2[_0x2a2c6f(0x1b9)](_0x1df482=>_0x1df482['coin']==_0xc2d2a7[0x0][_0x2a2c6f(0x25e)]);_0xd8262c?(_0xd8262c[_0x2a2c6f(0x1eb)]+=_0xc2d2a7[0x0][_0x2a2c6f(0x1eb)],_0xd8262c[_0x2a2c6f(0x1eb)]==0x0&&(_0x7429c2=_0x7429c2[_0x2a2c6f(0x10d)](_0x4ffe25=>{const _0x5ecdcb=_0x2a2c6f;return _0x4ffe25[_0x5ecdcb(0x25e)]!=_0xc2d2a7[0x0][_0x5ecdcb(0x25e)];}))):_0x7429c2[_0x2a2c6f(0x1fa)](_0xc2d2a7[0x0]);const _0x5dfe03=_0x56515a[_0x2a2c6f(0x1b9)](_0x3b3822=>_0x3b3822[_0x2a2c6f(0x1ca)]==_0x1cea95);_0x5dfe03[_0x2a2c6f(0x10f)]=_0x7429c2;}else _0x56515a[_0x2a2c6f(0x1fa)]({'date':_0x1cea95,'changes':[_0xc2d2a7[0x0]]});}const _0x5e17d7=_0x56515a[_0x2a2c6f(0x1b9)](_0xbd4a2f=>_0xbd4a2f[_0x2a2c6f(0x1ca)]==_0x1cea95);if(_0x5e17d7){let _0x47561d=!![];_0x5e17d7[_0x2a2c6f(0x10f)][_0x2a2c6f(0x270)](_0x327714=>{if(_0x327714['number']!=0x0)_0x47561d=![];}),_0x47561d&&(_0x56515a=_0x56515a[_0x2a2c6f(0x10d)](_0x1d263=>{const _0x58f828=_0x2a2c6f;return _0x1d263[_0x58f828(0x1ca)]!=_0x1cea95;}));}let _0x199e05=dbConfig[_0x2a2c6f(0x1cc)](_0x2a2c6f(0x133))[_0x2a2c6f(0x1b9)]({'botID':botID})[_0x2a2c6f(0x236)]();_0x199e05&&(dbConfig[_0x2a2c6f(0x1cc)](_0x2a2c6f(0x133))[_0x2a2c6f(0x1b9)]({'botID':botID})[_0x2a2c6f(0x193)]({'liquidity':_0x56515a})[_0x2a2c6f(0x24d)](),config[_0x2a2c6f(0x10e)]=_0x56515a),logHistory(_0x2a2c6f(0x1f2),_0x2a2c6f(0x186)+Math['abs'](_0xc2d2a7[0x0][_0x2a2c6f(0x1eb)])+'\x20'+_0xc2d2a7[0x0][_0x2a2c6f(0x25e)]+'\x20'+(_0xc2d2a7[0x0][_0x2a2c6f(0x1eb)]>0x0?_0x2a2c6f(0x246):'removed')+_0x2a2c6f(0x1aa)),proxyEmit(_0x2a2c6f(0xf5),emittedConfiguration());}else logger[_0x2a2c6f(0xf1)](_0x2a2c6f(0x105)+Math[_0x2a2c6f(0x10a)](_0xc2d2a7[0x0]['number'])+'\x20'+_0xc2d2a7[0x0][_0x2a2c6f(0x25e)]+'\x20'+(_0xc2d2a7[0x0]['number']>0x0?'added':_0x2a2c6f(0x131)));transactionDetected=!![],currentCoins=_0x1b459f,currentCoinsAll=_0x9d32af;}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0xc2d2a7[0x0][_0x2a2c6f(0x1eb)])+'\x20'+_0xc2d2a7[0x0][_0x2a2c6f(0x25e)]+'\x20'+(_0xc2d2a7[0x0][_0x2a2c6f(0x1eb)]>0x0?_0x2a2c6f(0x246):_0x2a2c6f(0x131))+_0x2a2c6f(0x242)),currentCoins=_0x1b459f,currentCoinsAll=_0x9d32af;}await sleep(watchTransactionsInterval);}catch(_0x278ea9){if(!exchangeStopped)await handleError(_0x278ea9,_0x2a2c6f(0x1e9));}else await sleep(0x64);}}async function loadSymbols(_0x38c91a=config[_0x261dd2(0x144)],_0x3f614e=![]){const _0x2d5b97=_0x261dd2;if(allSymbols&&!_0x3f614e)return;try{markets=await exchange[_0x2d5b97(0x26d)](),allSymbols=exchange[_0x2d5b97(0x26c)][_0x2d5b97(0x10d)](_0xf10f37=>{const _0x1e15e3=_0x2d5b97;let _0x2f87a7=![];const _0x4c00c4=exceptions[_0x38c91a[_0x1e15e3(0x24e)]()]||[];return _0x4c00c4[_0x1e15e3(0x270)](_0x104fcb=>{const _0x2e0c09=_0x1e15e3;if(_0xf10f37[_0x2e0c09(0x219)](_0x104fcb))_0x2f87a7=!![];}),!_0x2f87a7;});}catch(_0x2e8575){throw _0x2e8575;}}function _0x6706(_0x4c0252,_0x3b6988){const _0x3104b2=_0x5b90();return _0x6706=function(_0x51edb6,_0x55f968){_0x51edb6=_0x51edb6-0xea;let _0x5b90cb=_0x3104b2[_0x51edb6];return _0x5b90cb;},_0x6706(_0x4c0252,_0x3b6988);}async function initclient(){const _0x2e246e=_0x261dd2;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x2e246e(0x115),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2e246e(0x1e1),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1f60cb=getNormalizedPerformance();emitPerformance(_0x1f60cb),getStartingBalances(_0x1f60cb);}async function toggleBotMode(){const _0x43930e=_0x261dd2;let _0x38b8c1=dbConfig[_0x43930e(0x1cc)](_0x43930e(0x133))[_0x43930e(0x1b9)]({'botID':botID})[_0x43930e(0x236)]();if(_0x38b8c1){const _0xccc58e=!_0x38b8c1[_0x43930e(0x151)];dbConfig[_0x43930e(0x1cc)]('bot')[_0x43930e(0x1b9)]({'botID':botID})[_0x43930e(0x193)]({'headless':_0xccc58e})[_0x43930e(0x24d)](),config[_0x43930e(0x151)]=_0xccc58e,proxyEmit(_0x43930e(0xf5),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x470fc4=_0x261dd2;process[_0x470fc4(0x258)]({'updatebotmanager':!![]},_0x5033c5=>{});}async function loadCoins(_0x28092d){const _0x416ddd=_0x261dd2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x216729,_0x47de17=0x0,_0x52ad4b=0x0;_0x28092d[_0x416ddd(0x270)](_0x3cab29=>{const _0x1d96d2=_0x416ddd;loading[_0x1d96d2(0x264)][_0x1d96d2(0x1fa)](_0x3cab29);}),loadingCanceled=![];let _0x4e7ff1=![];while(_0x216729!=_0x28092d[_0x416ddd(0x119)]){_0x216729=0x0,_0x28092d['forEach'](_0x452c1d=>{const _0x5d944c=_0x416ddd;if(global[_0x5d944c(0xeb)][noslash(_0x452c1d)]){loading[_0x5d944c(0x264)]=loading[_0x5d944c(0x264)]['filter'](_0x48eb2b=>_0x48eb2b!=_0x452c1d);if(!watchedSymbols[_0x5d944c(0x219)](_0x452c1d))watchedSymbols[_0x5d944c(0x1fa)](_0x452c1d);_0x216729++;}}),loading[_0x416ddd(0x206)]=Math['round'](_0x216729/_0x28092d[_0x416ddd(0x119)]*0x64);loading[_0x416ddd(0x206)]!=0x64&&(_0x52ad4b>0x1e*0x5&&(loading[_0x416ddd(0x11d)]=!![],emitLoadingProgress()),_0x52ad4b>0x78*0x5&&!_0x4e7ff1&&(loading[_0x416ddd(0x1a7)]=!![],emitLoadingProgress(),_0x4e7ff1=!![],logHistory(_0x416ddd(0x204),_0x416ddd(0x14b)+loading[_0x416ddd(0x264)][_0x416ddd(0x202)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x416ddd(0x204),_0x416ddd(0x18c)+loadCoinsRetryInterval/0xea60+_0x416ddd(0x24c)),pidCoinReloading=setTimeout(()=>{const _0x899339=_0x416ddd;process['send']({'stop':_0x899339(0x203)},_0x172a87=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x416ddd(0x1a7)]=!![],emitLoadingProgress();break;}else _0x216729!=_0x47de17&&(_0x47de17=_0x216729,emitLoadingProgress()),_0x52ad4b++,await sleep(0xc8);}_0x216729==_0x28092d[_0x416ddd(0x119)]&&(coinsLoaded=!![],process['send']({'status':_0x416ddd(0x110),'live':'running'},_0x20ed69=>{}),_0x4e7ff1&&logHistory(_0x416ddd(0x1f2),_0x416ddd(0x24f)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x323e08=_0x261dd2;proxyEmit(_0x323e08(0xf5),{...emittedConfiguration(),'configstate':_0x323e08(0x191)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x2a96d6=_0x261dd2;let _0x2bf967=global[_0x2a96d6(0xeb)][stablecoins[_0x2a96d6(0x1ad)][_0x2a96d6(0x25e)]],_0x2532e7=global[_0x2a96d6(0xeb)][stablecoins[_0x2a96d6(0x141)][_0x2a96d6(0x25e)]];return{'eur':Number(_0x2bf967),'usd':Number(_0x2532e7)};}function capitalize(_0x7968f5){const _0x778d1b=_0x261dd2;return _0x7968f5['substring'](0x0,0x1)['toUpperCase']()+_0x7968f5[_0x778d1b(0x100)](0x1);}function supportedExchanges(){const _0x297ef8=_0x261dd2,_0x4ee354=['ws',_0x297ef8(0x20f),_0x297ef8(0x13b),_0x297ef8(0x1d5),'watchOrders',_0x297ef8(0x1cb),_0x297ef8(0x194),_0x297ef8(0x189),_0x297ef8(0x1f5),_0x297ef8(0x1cf)];let _0x2550c1=[],_0x19ec56=[],_0x134fbe=ccxt[_0x297ef8(0x115)];_0x134fbe['forEach'](_0x3f4783=>{try{const _0x1694d4=new ccxt[_0x3f4783]();if(_0x1694d4['has']['ws'])_0x19ec56['push'](_0x1694d4);}catch(_0x7b1330){}}),_0x19ec56['forEach'](_0x246e47=>{const _0x1c31b6=_0x297ef8;let _0x1f5dcd=0x0;_0x4ee354[_0x1c31b6(0x270)](_0x193496=>{const _0x3259e8=_0x1c31b6;_0x193496 in _0x246e47[_0x3259e8(0x11b)]&&_0x246e47[_0x3259e8(0x11b)][_0x193496]&&_0x1f5dcd++;}),_0x1f5dcd==_0x4ee354[_0x1c31b6(0x119)]&&_0x2550c1[_0x1c31b6(0x1fa)](capitalize(_0x246e47['id']));});let _0x339947=[];return _0x134fbe['forEach'](_0x53acd1=>{const _0x2c9aea=_0x297ef8;_0x53acd1=capitalize(_0x53acd1);if(!_0x2550c1[_0x2c9aea(0x219)](_0x53acd1))_0x339947[_0x2c9aea(0x1fa)](_0x53acd1);}),_0x2550c1;}function setStartDatePerformance(){const _0x2dce0d=_0x261dd2;if(config&&config['liquidity'][0x0][_0x2dce0d(0x10f)][_0x2dce0d(0x119)]!=0x0){const _0x45861d=config[_0x2dce0d(0x10e)][0x0][_0x2dce0d(0x10f)];dbPerformance['get'](_0x2dce0d(0x120))[_0x2dce0d(0x1b9)]({'date':config[_0x2dce0d(0x1bd)]})[_0x2dce0d(0x193)]({'coins':_0x45861d})[_0x2dce0d(0x24d)]();}}async function recreateCoinResults(){const _0x365575=_0x261dd2;let _0x333c68,_0x29f6fa=[];try{const _0x1e8253=fns[_0x365575(0x21f)](fns[_0x365575(0x1d7)](config['startdate'][_0x365575(0x1f4)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4b1a4e of currentCoins){if(_0x4b1a4e['coin']!=config['basecoin']){let _0x2d92e8=0x0,_0xee2e15,_0x18be80;_0x333c68=await getAllEventOrders(_0x4b1a4e[_0x365575(0x1ea)]);if(_0x333c68[_0x365575(0x119)]>0x0)_0x333c68[_0x365575(0x270)](_0x156ad6=>{const _0x14d769=_0x365575,_0x37e5b4=_0x4b1a4e['symbol']['includes'](config[_0x14d769(0x208)]+'/');_0x29f6fa[_0x14d769(0x1fa)]({'datetime':_0x156ad6[_0x14d769(0x251)],'coin':_0x4b1a4e[_0x14d769(0x25e)],'symbol':_0x4b1a4e[_0x14d769(0x1ea)],'side':_0x156ad6[_0x14d769(0x1ec)],'reverse':_0x37e5b4,'amount':formatResult(_0x156ad6['filled'],0x8),'filled':formatResult(_0x156ad6[_0x14d769(0x184)],0x8),'price':formatResult(_0x156ad6[_0x14d769(0x200)],0x8)}),_0x2d92e8=_0x156ad6[_0x14d769(0x1ec)]=='buy'?_0x2d92e8+_0x156ad6[_0x14d769(0x184)]:_0x2d92e8-_0x156ad6['filled'];if(!_0x18be80)_0x18be80=_0x156ad6['price'];});_0xee2e15=_0x4b1a4e[_0x365575(0x1eb)]-_0x2d92e8;let _0x1df6f6;config[_0x365575(0x10e)][_0x365575(0x270)](_0x40dbee=>{const _0x9a54e7=_0x365575;!_0x1df6f6&&(_0x1df6f6=_0x40dbee[_0x9a54e7(0x10f)][_0x9a54e7(0x1b9)](_0x1f7a0d=>_0x1f7a0d['coin']==_0x4b1a4e[_0x9a54e7(0x25e)]),_0x1df6f6&&(_0xee2e15=_0x1df6f6[_0x9a54e7(0x1eb)],_0x18be80=_0x1df6f6[_0x9a54e7(0x200)]));});let _0x393016=dbCoinResults['get']('coins')[_0x365575(0x1b9)]({'coin':_0x4b1a4e[_0x365575(0x25e)]})['value']();_0x393016={'coin':_0x4b1a4e[_0x365575(0x25e)],'number':_0xee2e15,'breakeven':_0x18be80,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x365575(0x1cc)]('coins')[_0x365575(0x1b9)]({'coin':_0x4b1a4e[_0x365575(0x25e)]})[_0x365575(0x193)](_0x393016)['write']();}}_0x29f6fa['sort']((_0x4f5f4a,_0x56ec4a)=>_0x4f5f4a[_0x365575(0x251)]>_0x56ec4a[_0x365575(0x251)]?0x1:_0x56ec4a[_0x365575(0x251)]>_0x4f5f4a[_0x365575(0x251)]?-0x1:0x0);let _0x26186a=0x0;for(let _0xa5dbc9 of _0x29f6fa){await updateCoinResults(_0xa5dbc9,!![]);}}catch(_0x53f927){await handleError(_0x53f927,_0x365575(0x129));}}async function getAllEventOrders(_0x335585){const _0x1b6565=_0x261dd2;let _0x365415=[],_0x3ed71e=dbLogs['get'](_0x1b6565(0x19e))['filter'](_0xa505e4=>{const _0x4cfdd9=_0x1b6565,_0x5293d8=_0xa505e4[_0x4cfdd9(0x1b1)][_0x4cfdd9(0x24e)]();return _0x5293d8[_0x4cfdd9(0x219)](_0x335585[_0x4cfdd9(0x24e)]())&&(_0x5293d8[_0x4cfdd9(0x219)]('market')&&_0x5293d8[_0x4cfdd9(0x219)](_0x4cfdd9(0x170))||_0x5293d8[_0x4cfdd9(0x219)](_0x4cfdd9(0x184))&&_0x5293d8[_0x4cfdd9(0x219)](_0x4cfdd9(0x170)));})[_0x1b6565(0x116)](_0x1b6565(0x1a3))[_0x1b6565(0x236)]();return _0x3ed71e[_0x1b6565(0x270)](_0x2c26fc=>{const _0x562f44=_0x1b6565,_0x362a7c=_0x2c26fc[_0x562f44(0x1b1)][_0x562f44(0x219)](_0x562f44(0x17e))?_0x562f44(0x17e):_0x562f44(0x192),_0x18fff4=/#([0-9]|\.)+\s/i,_0x399b65=Number(_0x18fff4[_0x562f44(0x217)](_0x2c26fc[_0x562f44(0x1b1)])[0x0]['slice'](0x1)),_0x37230b=/@([0-9]|\.)+$/i,_0x4dc971=Number(_0x37230b[_0x562f44(0x217)](_0x2c26fc[_0x562f44(0x1b1)])[0x0]['slice'](0x1));_0x365415[_0x562f44(0x1fa)]({'datetime':_0x2c26fc[_0x562f44(0x1a3)],'coin':symbolToCoin(_0x335585),'symbol':_0x335585,'side':_0x362a7c,'amount':_0x399b65,'filled':_0x399b65,'price':_0x4dc971});}),_0x365415;}async function getAllOrders(_0x1aee3a,_0x74e50f){const _0x2ae08e=_0x261dd2;let _0x1a2a95=[];while(_0x74e50f<exchange[_0x2ae08e(0x26e)]()){const _0x222816=0x1f4,_0xb6a2e3=await exchange[_0x2ae08e(0x1f5)](_0x1aee3a,_0x74e50f,_0x222816);if(_0xb6a2e3[_0x2ae08e(0x119)])_0x74e50f=_0xb6a2e3[_0xb6a2e3[_0x2ae08e(0x119)]-0x1][_0x2ae08e(0x14f)]+0x1,_0x1a2a95=_0x1a2a95[_0x2ae08e(0x13c)](_0xb6a2e3);else break;}return _0x1a2a95;}async function validate24hChanges(){const _0x74418b=_0x261dd2;for(const _0xc9e11a of currentCoins){if(_0xc9e11a[_0x74418b(0x25e)]!=config[_0x74418b(0x208)]){let _0x29faa2;_0xc9e11a[_0x74418b(0x1bf)]?_0x29faa2=formatResult((0x1/(global['change'][noslash(_0xc9e11a[_0x74418b(0x1ea)])]/0x64+0x1)-0x1)*0x64,0x3):_0x29faa2=global[_0x74418b(0x153)][noslash(_0xc9e11a[_0x74418b(0x1ea)])],_0x29faa2<config['change24h']&&(logHistory(_0x74418b(0x204),_0xc9e11a[_0x74418b(0x25e)]+_0x74418b(0x103)+_0x29faa2+'%'),logHistory(_0x74418b(0x204),_0x74418b(0x185)),logHistory('error',_0x74418b(0x213)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x3729a5,_0x4bee1a){const _0x1a53c1=_0x261dd2;if(!_0x3729a5)return!![];const _0x3775d0=_0x4bee1a[_0x1a53c1(0x16b)]('.'),_0x546746=_0x3729a5[_0x1a53c1(0x16b)]('.');for(var _0x3a615c=0x0;_0x3a615c<_0x546746[_0x1a53c1(0x119)];_0x3a615c++){const _0x38e714=~~_0x546746[_0x3a615c],_0x5da5c=~~_0x3775d0[_0x3a615c];if(_0x38e714<_0x5da5c)return!![];if(_0x38e714>_0x5da5c)return![];}return![];}async function oneTimeMigration(){const _0x19bde5=_0x261dd2;let _0x544eb6=dbLogs[_0x19bde5(0x1cc)](_0x19bde5(0x244))[_0x19bde5(0x236)]();if(isOlderVersion(_0x544eb6,_0x19bde5(0x12b))){let _0x5aabd6=[];const _0x3d5540=dbLogs[_0x19bde5(0x1cc)]('logs')[_0x19bde5(0x236)]();_0x3d5540[_0x19bde5(0x270)](_0x5440cc=>{const _0x23af20=_0x19bde5;_0x5aabd6['push']({'time':_0x5440cc['time'],'type':_0x5440cc[_0x23af20(0x166)],'event':_0x5440cc[_0x23af20(0x1b1)]});}),dbLogs[_0x19bde5(0x1cc)](_0x19bde5(0x19e))[_0x19bde5(0x193)](_0x5aabd6)[_0x19bde5(0x24d)]();}let _0x101159=dbConfig[_0x19bde5(0x1cc)](_0x19bde5(0x244))[_0x19bde5(0x236)]();if(isOlderVersion(_0x101159,_0x19bde5(0x12b))){let _0x2b7e68=dbConfig[_0x19bde5(0x1cc)]('bot')[_0x19bde5(0x1b9)]({'botID':botID})[_0x19bde5(0x236)]();if(_0x2b7e68){let _0x5e6779=[];_0x2b7e68['portfolio']['forEach'](_0x1e144b=>{const _0x45fd80=_0x19bde5;_0x5e6779['push']({'coin':_0x1e144b[_0x45fd80(0x25e)],'number':_0x1e144b['startnumber'],'price':_0x1e144b[_0x45fd80(0x1e0)]}),delete _0x1e144b[_0x45fd80(0x173)],delete _0x1e144b[_0x45fd80(0x1e0)];});if(_0x5e6779[_0x19bde5(0x119)]!==0x0)fs[_0x19bde5(0x14e)](configbackuppath+(_0x19bde5(0x21e)+botID+_0x19bde5(0x1dc)),JSON[_0x19bde5(0x11a)](_0x5e6779,null,0x4),function(_0x330eb2){if(_0x330eb2){}});const _0x111b9f=(_0x5a5d82,_0x1bc1b9)=>{let _0xd9220f=[];_0x1bc1b9['forEach'](_0x5a5e54=>{const _0x4f03f3=_0x6706,_0x5625f1=_0x5a5d82[_0x4f03f3(0x1b9)](_0x50369a=>_0x50369a[_0x4f03f3(0x25e)]==_0x5a5e54['coin']);if(!_0x5625f1)_0xd9220f[_0x4f03f3(0x1fa)](_0x5a5e54);});let _0x4c19c6=[];return _0x5a5d82['forEach'](_0xaffcad=>{const _0x4ea381=_0x6706,_0x25afa4=_0x1bc1b9[_0x4ea381(0x1b9)](_0x5e6e23=>_0x5e6e23[_0x4ea381(0x25e)]==_0xaffcad[_0x4ea381(0x25e)]);if(!_0x25afa4||_0x25afa4[_0x4ea381(0x1eb)]==0x0&&_0xaffcad[_0x4ea381(0x1eb)]!=0x0)_0x4c19c6[_0x4ea381(0x1fa)](_0xaffcad);}),{'missingDay1':_0xd9220f,'notInDay2':_0x4c19c6};},_0xa10283=dbPerformance[_0x19bde5(0x1cc)]('data')[_0x19bde5(0x1a6)]()[_0x19bde5(0x236)]();if(_0xa10283[_0x19bde5(0x119)]>0x1){const {missingDay1:_0x17b8bf,notInDay2:_0x6b8a97}=_0x111b9f(_0x5e6779,_0xa10283[0x1][_0x19bde5(0x231)]);_0x5e6779=[..._0x5e6779,..._0x17b8bf],_0x6b8a97[_0x19bde5(0x270)](_0x482a52=>{const _0x3ddcaa=_0x19bde5;let _0x184a9b=_0x5e6779['findIndex'](_0x53876a=>_0x53876a[_0x3ddcaa(0x25e)]==_0x482a52['coin']);_0x184a9b!=-0x1&&_0x5e6779['splice'](_0x184a9b,0x1);});}_0x5e6779['sort']((_0x1b0dd3,_0x23ddb9)=>_0x1b0dd3[_0x19bde5(0x25e)]>_0x23ddb9[_0x19bde5(0x25e)]?0x1:_0x23ddb9[_0x19bde5(0x25e)]>_0x1b0dd3[_0x19bde5(0x25e)]?-0x1:0x0);let _0x2edb0b=[{'date':_0x2b7e68[_0x19bde5(0x1bd)],'changes':_0x5e6779}];_0xa10283[_0x19bde5(0x119)]>0x2&&_0xa10283[_0x19bde5(0x270)]((_0x1665d8,_0x9b6409)=>{const _0x5a79f0=_0x19bde5;if(_0x9b6409>0x0&&_0x9b6409<_0xa10283['length']-0x1){const {missingDay1:_0x4b6a2a,notInDay2:_0x2de9d0}=_0x111b9f(_0xa10283[_0x9b6409][_0x5a79f0(0x231)],_0xa10283[_0x9b6409+0x1][_0x5a79f0(0x231)]);_0x5e6779=[],(_0x4b6a2a['length']!=0x0||_0x2de9d0[_0x5a79f0(0x119)]!=0x0)&&(_0x4b6a2a['length']!=0x0&&_0x5e6779[_0x5a79f0(0x1fa)](..._0x4b6a2a),_0x2de9d0[_0x5a79f0(0x119)]!=0x0&&(_0x2de9d0['forEach'](_0x564e55=>{const _0xbf5ce2=_0x5a79f0;_0x564e55[_0xbf5ce2(0x1eb)]=-_0x564e55[_0xbf5ce2(0x1eb)];}),_0x5e6779['push'](..._0x2de9d0)),_0x5e6779[_0x5a79f0(0x252)]((_0x48a934,_0x4c1e95)=>_0x48a934[_0x5a79f0(0x25e)]>_0x4c1e95[_0x5a79f0(0x25e)]?0x1:_0x4c1e95['coin']>_0x48a934[_0x5a79f0(0x25e)]?-0x1:0x0),_0x2edb0b[_0x5a79f0(0x1fa)]({'date':_0xa10283[_0x9b6409+0x1]['date'],'changes':_0x5e6779}));}}),dbConfig[_0x19bde5(0x1cc)]('bot')['find']({'botID':botID})[_0x19bde5(0x193)]({..._0x2b7e68,'liquidity':_0x2edb0b})[_0x19bde5(0x24d)]();}}if(isOlderVersion(_0x101159,_0x19bde5(0x209))){let _0x36b02d=dbConfig[_0x19bde5(0x1cc)](_0x19bde5(0x133))[_0x19bde5(0x1b9)]({'botID':botID})[_0x19bde5(0x236)]();if(_0x36b02d){const _0x3ae55f=_0x36b02d[_0x19bde5(0x144)],_0x4a912a=_0x3ae55f?capitalize(_0x3ae55f):_0x19bde5(0x25d);dbConfig['get'](_0x19bde5(0x133))[_0x19bde5(0x1b9)]({'botID':botID})[_0x19bde5(0x193)]({'exchange':_0x4a912a})[_0x19bde5(0x24d)]();}}let _0x16baac=dbPerformance['get'](_0x19bde5(0x244))['value']();isOlderVersion(_0x16baac,_0x19bde5(0x12b))&&setStartDatePerformance();let _0x1756ca=dbCoinResults[_0x19bde5(0x1cc)](_0x19bde5(0x244))[_0x19bde5(0x236)]();if(isOlderVersion(_0x1756ca,_0x19bde5(0x149))){let _0x22705c=dbCoinResults[_0x19bde5(0x1cc)](_0x19bde5(0x231))[_0x19bde5(0x236)]();if(_0x22705c[_0x19bde5(0x119)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3c9448=_0x261dd2;dbConfig['set'](_0x3c9448(0x244),serverversion)['write'](),dbPerformance[_0x3c9448(0x1d3)](_0x3c9448(0x244),serverversion)['write'](),dbLogs[_0x3c9448(0x1d3)](_0x3c9448(0x244),serverversion)['write'](),dbCoinResults[_0x3c9448(0x1d3)]('version',serverversion)[_0x3c9448(0x24d)]();}function getConfiguration(_0x39c711){const _0x156b58=_0x261dd2;let _0x41e4c0=dbConfig[_0x156b58(0x1cc)](_0x156b58(0x133))[_0x156b58(0x1b9)]({'botID':_0x39c711})[_0x156b58(0x236)]();if(_0x41e4c0){let _0x53ce74=![];typeof _0x41e4c0[_0x156b58(0x1e4)]==_0x156b58(0x135)&&(_0x41e4c0={..._0x41e4c0,'threshold':Number(_0x41e4c0[_0x156b58(0x1e4)])},_0x53ce74=!![]),_0x41e4c0[_0x156b58(0x238)]==null&&(_0x41e4c0={..._0x41e4c0,'change24h':-0x14},_0x53ce74=!![]),!_0x41e4c0[_0x156b58(0x11f)]&&(_0x41e4c0={..._0x41e4c0,'fiat':_0x156b58(0x19c)},_0x53ce74=!![]),!_0x41e4c0[_0x156b58(0x20b)]&&(_0x41e4c0={..._0x41e4c0,'onepagemode':settings[_0x156b58(0x20b)]},_0x53ce74=!![]),!_0x41e4c0[_0x156b58(0x226)]&&(_0x41e4c0={..._0x41e4c0,'colorscheme':_0x156b58(0x180)},_0x53ce74=!![]),!_0x41e4c0[_0x156b58(0x25a)]&&(_0x41e4c0={..._0x41e4c0,'autoliquidity':!![]},_0x53ce74=!![]),_0x53ce74&&(_0x41e4c0={'botID':_0x41e4c0[_0x156b58(0x175)],'exchange':_0x41e4c0[_0x156b58(0x144)],'apiKey':_0x41e4c0[_0x156b58(0x16f)],'apiSecret':_0x41e4c0['apiSecret'],'apiPassword':_0x41e4c0[_0x156b58(0x24b)],'basecoin':_0x41e4c0['basecoin'],'botname':_0x41e4c0[_0x156b58(0x13a)],'showname':_0x41e4c0[_0x156b58(0x240)],'threshold':_0x41e4c0['threshold'],'ordertype':_0x41e4c0[_0x156b58(0x211)],'timeout':_0x41e4c0[_0x156b58(0x11d)],'fiat':_0x41e4c0[_0x156b58(0x11f)],'startdate':_0x41e4c0[_0x156b58(0x1bd)],'recreate':_0x41e4c0[_0x156b58(0x1e7)],'timeshift':_0x41e4c0[_0x156b58(0x140)],'onepagemode':_0x41e4c0[_0x156b58(0x20b)],'headless':_0x41e4c0[_0x156b58(0x151)],'cooldown':_0x41e4c0[_0x156b58(0x113)],'change24h':_0x41e4c0[_0x156b58(0x238)],'emojibuy':_0x41e4c0[_0x156b58(0x1db)],'emojisell':_0x41e4c0[_0x156b58(0x271)],'colorscheme':_0x41e4c0[_0x156b58(0x226)],'portfolio':_0x41e4c0[_0x156b58(0x18e)],'autoliquidity':_0x41e4c0[_0x156b58(0x25a)],'liquidity':_0x41e4c0[_0x156b58(0x10e)],'openOrders':_0x41e4c0[_0x156b58(0x20a)]},dbConfig[_0x156b58(0x1cc)]('bot')[_0x156b58(0x109)]()[_0x156b58(0x24d)](),dbConfig[_0x156b58(0x1cc)](_0x156b58(0x133))[_0x156b58(0x1fa)](_0x41e4c0)[_0x156b58(0x24d)]());}else _0x41e4c0={'botID':_0x39c711,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x156b58(0x1fb)+_0x39c711,'showname':![],'threshold':0x3,'ordertype':_0x156b58(0x15d),'timeout':0x14,'fiat':_0x156b58(0x19c),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x156b58(0x140)],'onepagemode':settings[_0x156b58(0x20b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':'red_yellow_blue','portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x41e4c0;}function emittedConfiguration(){const _0x2cc21d=_0x261dd2;let _0x53749c;if(config[_0x2cc21d(0x16f)]=='')_0x53749c={...config,'configstate':_0x2cc21d(0x275)};else config[_0x2cc21d(0x16f)]==_0x2cc21d(0x25f)?_0x53749c={...config,'configstate':_0x2cc21d(0x17c)}:(_0x53749c={...config,'apiKey':_0x2cc21d(0x15c),'apiSecret':_0x2cc21d(0x15c)},config[_0x2cc21d(0x24b)]&&(_0x53749c[_0x2cc21d(0x24b)]=_0x2cc21d(0x15c)));return _0x53749c;}function getSettings(){const _0x4628a6=_0x261dd2;return dbSettings[_0x4628a6(0x1cc)](_0x4628a6(0x183))[_0x4628a6(0x236)]();}function getSecure(){const _0x4493d4=_0x261dd2;return dbSecure[_0x4493d4(0x1cc)]('secure')[_0x4493d4(0x236)]()||{};}function updateTimeshift(_0x260e73){const _0x56d216=_0x261dd2;let _0x241199=dbConfig['get'](_0x56d216(0x133))[_0x56d216(0x1b9)]({'botID':botID})['value']();_0x241199&&dbConfig[_0x56d216(0x1cc)]('bot')[_0x56d216(0x1b9)]({'botID':botID})[_0x56d216(0x193)]({'timeshift':_0x260e73})[_0x56d216(0x24d)](),config[_0x56d216(0x140)]=_0x260e73,proxyEmit(_0x56d216(0xf5),emittedConfiguration());}function updateOnepagemode(_0x371d68){const _0x45e012=_0x261dd2;let _0xbf8810=dbConfig[_0x45e012(0x1cc)](_0x45e012(0x133))[_0x45e012(0x1b9)]({'botID':botID})[_0x45e012(0x236)]();_0xbf8810&&dbConfig[_0x45e012(0x1cc)]('bot')[_0x45e012(0x1b9)]({'botID':botID})[_0x45e012(0x193)]({'onepagemode':_0x371d68})[_0x45e012(0x24d)](),config[_0x45e012(0x20b)]=_0x371d68,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x484994){const _0x4f705f=_0x261dd2;logger[_0x4f705f(0xf1)](_0x4f705f(0x10b));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x4f705f(0x102));let _0x582140=[],_0xcb86f9=![],_0x2b84b0=![],_0x479cf1=[];_0x484994[_0x4f705f(0x18e)][_0x4f705f(0x270)](_0x44f295=>{const _0x17e464=_0x4f705f;if(!_0x44f295[_0x17e464(0x21a)]&&_0x44f295[_0x17e464(0x25e)]!=_0x484994['basecoin'])_0x479cf1['push'](_0x44f295[_0x17e464(0x1ea)]);}),_0x479cf1['forEach'](_0x2fb08c=>{const _0x517d75=_0x4f705f,_0x2e63c6=watchedSymbols[_0x517d75(0x219)](_0x2fb08c);!_0x2e63c6&&_0x582140[_0x517d75(0x1fa)](_0x2fb08c);}),_0x479cf1[_0x4f705f(0x270)](_0xdf1512=>{const _0x1088a8=_0x4f705f,_0x58d00c=currentCoins[_0x1088a8(0x1b9)](_0xfe6516=>_0xfe6516[_0x1088a8(0x1ea)]==_0xdf1512);!_0x58d00c&&(_0xcb86f9=!![]);}),currentCoins[_0x4f705f(0x270)](_0x1c6193=>{const _0x1cdbcc=_0x4f705f;if(_0x1c6193[_0x1cdbcc(0x25e)]!=config['basecoin']){const _0x2bb609=_0x479cf1[_0x1cdbcc(0x1b9)](_0x237b64=>_0x237b64==_0x1c6193[_0x1cdbcc(0x1ea)]);!_0x2bb609&&(_0xcb86f9=!![]);}}),_0x484994[_0x4f705f(0x18e)][_0x4f705f(0x270)](_0x18795f=>{const _0x13f464=_0x4f705f,_0x45eac9=config[_0x13f464(0x18e)][_0x13f464(0x1b9)](_0x56fda3=>_0x56fda3[_0x13f464(0x25e)]==_0x18795f[_0x13f464(0x25e)]);if(_0x45eac9&&_0x18795f[_0x13f464(0x256)]!=_0x45eac9[_0x13f464(0x256)])_0x2b84b0=!![];});let _0x2db763=dbConfig['get'](_0x4f705f(0x133))['find']({'botID':botID})[_0x4f705f(0x236)]();_0x484994={..._0x484994,'apiKey':crypt[_0x4f705f(0xfe)](secure[_0x4f705f(0x1fd)],_0x484994['apiKey'])[_0x4f705f(0x13e)],'apiSecret':crypt[_0x4f705f(0xfe)](secure['privateKey'],_0x484994[_0x4f705f(0x216)])[_0x4f705f(0x13e)]};_0x484994[_0x4f705f(0x24b)]&&(_0x484994[_0x4f705f(0x24b)]=crypt[_0x4f705f(0xfe)](secure['privateKey'],_0x484994[_0x4f705f(0x24b)])['message']);let _0x26f3d6=![];if(_0x2db763){_0x484994['apiKey']==_0x4f705f(0x15c)?_0x484994[_0x4f705f(0x16f)]=config[_0x4f705f(0x16f)]:_0x26f3d6=!![];_0x484994['apiSecret']==_0x4f705f(0x15c)?_0x484994[_0x4f705f(0x216)]=config[_0x4f705f(0x216)]:_0x26f3d6=!![];if(_0x484994[_0x4f705f(0x24b)]==_0x4f705f(0x15c))_0x484994['apiPassword']=config[_0x4f705f(0x24b)];else{if(_0x484994[_0x4f705f(0x24b)])_0x26f3d6=!![];}dbConfig[_0x4f705f(0x1cc)](_0x4f705f(0x133))[_0x4f705f(0x1b9)]({'botID':botID})[_0x4f705f(0x193)](_0x484994)[_0x4f705f(0x24d)]();}else dbConfig[_0x4f705f(0x1cc)](_0x4f705f(0x133))[_0x4f705f(0x1fa)](_0x484994)[_0x4f705f(0x24d)](),_0x26f3d6=!![],process[_0x4f705f(0x258)]({'status':_0x4f705f(0x110),'live':_0x4f705f(0xec)},_0x21c764=>{});process[_0x4f705f(0x258)]({'botname':_0x484994[_0x4f705f(0x13a)]},_0x7c359=>{}),updateBotManager(),config={..._0x484994},proxyEmit(_0x4f705f(0x227)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x26f3d6)await reset(_0x582140,!![]);else _0xcb86f9||_0x2b84b0?await reset(_0x582140,![]):getBalances();blockTransactionDetection=![],logger[_0x4f705f(0xf1)](_0x4f705f(0x1f9));}async function storeHeadless(_0xb87892){const _0x55a4f3=_0x261dd2,_0x4c597f={...config,'headless':_0xb87892[_0x55a4f3(0x151)]};let _0x1abba6=dbConfig['get'](_0x55a4f3(0x133))[_0x55a4f3(0x1b9)]({'botID':botID})[_0x55a4f3(0x236)]();_0x1abba6&&dbConfig[_0x55a4f3(0x1cc)](_0x55a4f3(0x133))[_0x55a4f3(0x1b9)]({'botID':botID})[_0x55a4f3(0x193)](_0x4c597f)[_0x55a4f3(0x24d)](),config={..._0x4c597f},updateBotManager(),proxyEmit(_0x55a4f3(0xf5),emittedConfiguration());}async function storeFiat(_0x51471b){const _0x44f4c2=_0x261dd2,_0x5a633d={...config,'fiat':_0x51471b};let _0x11d92c=dbConfig[_0x44f4c2(0x1cc)](_0x44f4c2(0x133))[_0x44f4c2(0x1b9)]({'botID':botID})[_0x44f4c2(0x236)]();_0x11d92c&&dbConfig['get'](_0x44f4c2(0x133))[_0x44f4c2(0x1b9)]({'botID':botID})[_0x44f4c2(0x193)](_0x5a633d)[_0x44f4c2(0x24d)](),config={..._0x5a633d},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x38d695=_0x261dd2;logger[_0x38d695(0x253)](_0x38d695(0x261));try{if(fs['existsSync'](path[_0x38d695(0x202)](configpath,_0x38d695(0x169)+botID+_0x38d695(0x163))))fs[_0x38d695(0x187)](path[_0x38d695(0x202)](configpath,_0x38d695(0x169)+botID+_0x38d695(0x163)));if(fs[_0x38d695(0x1f0)](path['join'](configpath,_0x38d695(0x169)+botID+_0x38d695(0x1e5))))fs[_0x38d695(0x187)](path[_0x38d695(0x202)](configpath,'bot-'+botID+_0x38d695(0x1e5)));if(fs[_0x38d695(0x1f0)](path[_0x38d695(0x202)](configpath,'bot-'+botID+_0x38d695(0x137))))fs['unlinkSync'](path['join'](configpath,'bot-'+botID+_0x38d695(0x137)));}catch(_0xb7328f){if(_0xb7328f)logger['full'](_0x38d695(0x158),_0xb7328f);}const _0x5a79d0=getDate();let _0xb69b69=[];currentCoins['forEach'](_0x24af35=>{const _0x1873dc=_0x38d695;_0xb69b69['push']({'coin':_0x24af35[_0x1873dc(0x25e)],'number':_0x24af35['number'],'price':_0x24af35[_0x1873dc(0x16e)]});});let _0x5b4787=dbConfig[_0x38d695(0x1cc)](_0x38d695(0x133))['find']({'botID':botID})['value']();_0x5b4787&&(dbConfig['get']('bot')['find']({'botID':botID})[_0x38d695(0x193)]({'liquidity':[{'date':_0x5a79d0,'changes':_0xb69b69}]})[_0x38d695(0x24d)](),config[_0x38d695(0x10e)]=[]),process[_0x38d695(0x258)]({'stop':_0x38d695(0x203)},_0xd990e2=>{});}function noslash(_0x386eea){return _0x386eea['replace']('/','');}function updateHighestFee(_0x344555,_0x4ef591){const _0x1531cc=_0x261dd2;lastFees[_0x1531cc(0x1f6)]=_0x344555,lastFees[_0x1531cc(0x14d)][_0x1531cc(0x119)]===0x14&&lastFees[_0x1531cc(0x14d)][_0x1531cc(0x142)](),lastFees[_0x1531cc(0x14d)]['push'](_0x4ef591),lastFees[_0x1531cc(0x23b)]=Math['max'](...lastFees[_0x1531cc(0x14d)]);}async function updateNumberCoinsCcxt(_0x2d249f){const _0x29a339=_0x261dd2;logger[_0x29a339(0xf1)]('0\x20-\x20EXECUTION:\x20'+_0x2d249f[_0x29a339(0x1ea)]+'\x20|\x20'+_0x2d249f[_0x29a339(0x1ee)]+_0x29a339(0x235)+_0x2d249f['id']);let _0x22f1e4=_0x2d249f[_0x29a339(0x1ee)],_0x3ac9cd=![];currentCoins['forEach'](_0x101b42=>{const _0x216679=_0x29a339;_0x101b42[_0x216679(0x1ea)]==_0x2d249f[_0x216679(0x1ea)]&&(_0x3ac9cd=!![]);});if(!_0x3ac9cd)return;const _0x1778b1=currentCoins['find'](_0x133e1e=>_0x133e1e[_0x29a339(0x1ea)]==_0x2d249f[_0x29a339(0x1ea)]),_0x4a6a9a=_0x56a652=>{if(_0x1778b1)_0x1778b1['orderstatus']=_0x56a652;};if(_0x22f1e4=='open')_0x4a6a9a(_0x29a339(0x167));else{if(_0x22f1e4==_0x29a339(0x1a8)){_0x4a6a9a(_0x29a339(0x1a8));const _0x45b341=await getCoins();[currentCoins,currentCoinsAll]=_0x45b341,await getOpenOrders(),handleOpenOrders();}else{if(_0x22f1e4==_0x29a339(0x22e)){logger[_0x29a339(0xf1)](_0x29a339(0x19a)+_0x2d249f['symbol']+'\x20|\x20'+_0x2d249f[_0x29a339(0x184)]+_0x29a339(0x235)+_0x2d249f['id']);let _0x9c4dc8=![];if(lastOrders)for(const _0x5819f7 of lastOrders){const _0x7c5741=0xc8,_0x2cbf01=0x1388;let _0x576f72=0x0;while(!_0x5819f7[_0x29a339(0x247)]&&_0x576f72*_0x7c5741<_0x2cbf01){_0x576f72++,await sleep(_0x7c5741);}if(_0x576f72>0x0)logger[_0x29a339(0xf1)](_0x29a339(0x12a)+_0x576f72*_0x7c5741/0x3e8+_0x29a339(0x1ce));if(_0x5819f7['orderId']==_0x2d249f['id']){logger['debug']('2\x20-\x20FILLED\x20known\x20order:\x20'+_0x2d249f['id']),_0x9c4dc8=!![];if(_0x5819f7['filled']==0x0){logger['debug'](_0x29a339(0x237)+_0x2d249f['id']);if(_0x2d249f['average'])_0x5819f7[_0x29a339(0x200)]=_0x2d249f[_0x29a339(0x276)];else{if(_0x2d249f['price'])_0x5819f7['price']=_0x2d249f['price'];else{}}_0x5819f7['filled']=_0x2d249f[_0x29a339(0x184)],_0x5819f7['fee']={'currency':_0x2d249f[_0x29a339(0x106)]?_0x2d249f[_0x29a339(0x106)][_0x29a339(0x1f6)]:null,'cost':_0x2d249f[_0x29a339(0x106)]?_0x2d249f[_0x29a339(0x106)][_0x29a339(0x1b0)]:0x0},updateHighestFee(_0x5819f7[_0x29a339(0x106)][_0x29a339(0x1f6)],_0x5819f7[_0x29a339(0x106)][_0x29a339(0x1b0)]),_0x4a6a9a(_0x29a339(0x184)),await validateOrders();if(lockOrders==ORDERS[_0x29a339(0x1b3)]){const _0x32dc8d=await getCoins();[currentCoins,currentCoinsAll]=_0x32dc8d;}await updateCoinResults(_0x5819f7);}}}if(!_0x9c4dc8){logger[_0x29a339(0xf1)](_0x29a339(0xee)+_0x2d249f['id']),_0x4a6a9a(_0x29a339(0x184));const _0x2ad87a=await getCoins();[currentCoins,currentCoinsAll]=_0x2ad87a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x16abb2=JSON[_0x29a339(0x239)](lastBalances[_0x29a339(0x18e)]);const _0x12488e=_0x16abb2['find'](_0x4e272f=>_0x4e272f[_0x29a339(0x1ea)]==_0x2d249f[_0x29a339(0x1ea)]);if(_0x12488e){if(_0x22f1e4==_0x29a339(0x167))_0x12488e[_0x29a339(0x234)]=_0x12488e[_0x29a339(0x234)]==_0x29a339(0x184)?_0x29a339(0x184):_0x29a339(0x167);else{if(_0x22f1e4=='canceled')_0x12488e[_0x29a339(0x234)]=_0x12488e['orderstatus']==_0x29a339(0x184)?'filled':_0x29a339(0x1a8);else _0x22f1e4==_0x29a339(0x22e)&&(_0x12488e['orderstatus']=_0x29a339(0x184));}}lastBalances={...lastBalances,'portfolio':JSON[_0x29a339(0x11a)](_0x16abb2)},proxyEmit(_0x29a339(0x1e1),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x5a7c1d=![];currentCoins['forEach'](_0x40214a=>{const _0x3b7d97=_0x6706;_0x5a7c1d=allOpenOrders[_0x3b7d97(0x1b9)](_0x2b5658=>_0x2b5658[_0x3b7d97(0x1ea)]==_0x40214a[_0x3b7d97(0x1ea)]),_0x40214a[_0x3b7d97(0x234)]=_0x5a7c1d?_0x3b7d97(0x167):_0x3b7d97(0x212);});}async function getCoins(_0x137ed2=!![],_0x5663b6=config[_0x261dd2(0x208)]){const _0x1d45e1=_0x261dd2;let _0x1c317d,_0x217b44=[],_0x1f3020=[],_0x63a0a1=[],_0x94b0ea=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1c317d=await exchange[_0x1d45e1(0x1cf)](),mybalances=_0x1c317d[_0x1d45e1(0x1bb)];for(const [_0x1c7d07,_0x288f1d]of Object[_0x1d45e1(0x26b)](mybalances)){_0x94b0ea[_0x1d45e1(0x1fa)](_0x1c7d07);}if(_0x5663b6=='')for(const [_0x36d998,_0x468255]of Object[_0x1d45e1(0x26b)](mybalances)){_0x468255!=0x0&&_0x1f3020['push']({'coin':_0x36d998});}else{let _0x408b33=![];for(const [_0xe9da42,_0x439f87]of Object[_0x1d45e1(0x26b)](mybalances)){if(_0x94b0ea[_0x1d45e1(0x219)](_0xe9da42)){const _0x43909a=config[_0x1d45e1(0x18e)][_0x1d45e1(0x1b9)](_0x141138=>_0x141138[_0x1d45e1(0x25e)]==_0xe9da42),_0x46d01e=_0xe9da42+'/'+_0x5663b6,_0x5b8cdb=_0x5663b6+'/'+_0xe9da42,_0x5eacfb=currentCoins[_0x1d45e1(0x1b9)](_0xf855d0=>_0xf855d0['coin']==_0xe9da42);_0x408b33=![];if((_0x439f87!=0x0||_0x43909a)&&(allSymbols['includes'](_0x46d01e)||_0xe9da42==_0x5663b6))_0xe9da42!=_0x5663b6&&_0x217b44[_0x1d45e1(0x1fa)](_0x46d01e),_0x1f3020[_0x1d45e1(0x1fa)]({'coin':_0xe9da42,'symbol':_0x46d01e,'reverse':![],'number':Math[_0x1d45e1(0x188)](_0x439f87+(_0x43909a&&_0x43909a['offset']||0x0),0x0),'orderstatus':_0x5eacfb?_0x5eacfb[_0x1d45e1(0x234)]:_0x1d45e1(0x212)});else(_0x439f87!=0x0||_0x43909a)&&allSymbols[_0x1d45e1(0x219)](_0x5b8cdb)&&(_0xe9da42!=_0x5663b6&&_0x217b44['push'](_0x5b8cdb),_0x1f3020[_0x1d45e1(0x1fa)]({'coin':_0xe9da42,'symbol':_0x5b8cdb,'reverse':!![],'number':Math[_0x1d45e1(0x188)](_0x439f87+(_0x43909a&&_0x43909a['offset']||0x0),0x0),'orderstatus':_0x5eacfb?_0x5eacfb[_0x1d45e1(0x234)]:_0x1d45e1(0x212)}));}}}}catch(_0x43e328){if(!_0x137ed2)handleErrorNoStop(_0x43e328,_0x1d45e1(0x223));else await handleError(_0x43e328,'getCoins()');}return _0x63a0a1=cloneDeep(_0x1f3020),_0x1f3020=_0x1f3020[_0x1d45e1(0x10d)](_0x55cc81=>{const _0x23a047=_0x1d45e1,_0x5b965e=config[_0x23a047(0x18e)]['find'](_0x3ef659=>_0x3ef659[_0x23a047(0x25e)]==_0x55cc81[_0x23a047(0x25e)]);return _0x5b965e&&!_0x5b965e['excluded'];}),[_0x1f3020,_0x63a0a1];}async function getCoinNumber(_0x53cd43){const _0xe6620=_0x261dd2;let _0x44b054;try{const _0x4d4a43=await exchange['fetchBalance']();_0x44b054=_0x4d4a43[_0xe6620(0x1bb)][_0x53cd43];}catch(_0x34816e){await handleError(_0x34816e,_0xe6620(0x160));}return _0x44b054;}async function getOpenOrders(){const _0x282f8b=_0x261dd2;let _0xfa613;allOpenOrders=[];try{for(const _0xd9b355 of config['portfolio']){!_0xd9b355[_0x282f8b(0x21a)]&&_0xd9b355[_0x282f8b(0x25e)]!=config[_0x282f8b(0x208)]&&(_0xfa613=await exchange[_0x282f8b(0x189)](_0xd9b355['symbol']),_0xfa613[_0x282f8b(0x119)]>0x0&&allOpenOrders[_0x282f8b(0x1fa)](_0xfa613[0x0]));}}catch(_0x7b7204){await handleError(_0x7b7204,_0x282f8b(0x23f));}}async function handleOpenOrders(_0x581dbc=0x0){const _0x2ac172=_0x261dd2;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x2ac172(0x1b3)]&&allOrdersPlaced&&(_0x581dbc==0x0?(logger[_0x2ac172(0xf1)]('1\x20-\x20Handle\x20open\x20orders'),_0x581dbc++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2ac172(0xf1)](_0x2ac172(0x14c)),validateOrders(_0x2ac172(0x1d8))));}async function testAPI(_0x136ca7){const _0x34cdd4=_0x261dd2,_0x5ccf8b=ccxt[_0x136ca7[_0x34cdd4(0x144)][_0x34cdd4(0x24e)]()],_0x1ab42b=new _0x5ccf8b({'apiKey':_0x136ca7[_0x34cdd4(0x16f)],'secret':_0x136ca7['apiSecret'],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x136ca7[_0x34cdd4(0x144)]==_0x34cdd4(0x190)&&(_0x1ab42b[_0x34cdd4(0x1e6)]={'defaultType':_0x34cdd4(0x254)});if(_0x136ca7[_0x34cdd4(0x24b)])_0x1ab42b[_0x34cdd4(0x262)]=_0x136ca7[_0x34cdd4(0x24b)];try{await _0x1ab42b[_0x34cdd4(0x26d)]();}catch(_0x5dafe5){throw _0x5dafe5;}}function cloneDeep(_0x1db356){return JSON['parse'](JSON['stringify'](_0x1db356));}async function getPortfolio(_0x54e9e9){const _0xd87bba=_0x261dd2;let _0x38c73f=[],_0x4c38a0=[],_0x3d10f3=[],_0x577bcd;if(_0x54e9e9[_0xd87bba(0x16f)]!=='************'||_0x54e9e9[_0xd87bba(0x216)]!=='************'||_0x54e9e9['apiPassword']&&_0x54e9e9[_0xd87bba(0x24b)]!==_0xd87bba(0x15c)){if(config[_0xd87bba(0x144)]){if(_0x54e9e9[_0xd87bba(0x16f)]==_0xd87bba(0x15c))_0x54e9e9[_0xd87bba(0x16f)]=config[_0xd87bba(0x16f)];if(_0x54e9e9[_0xd87bba(0x216)]==_0xd87bba(0x15c))_0x54e9e9['apiSecret']=config[_0xd87bba(0x216)];if(_0x54e9e9[_0xd87bba(0x24b)]==_0xd87bba(0x15c))_0x54e9e9['apiPassword']=config[_0xd87bba(0x24b)];try{await testAPI(_0x54e9e9);}catch(_0x5ce8b0){if(_0x5ce8b0[_0xd87bba(0x156)]()['includes'](_0xd87bba(0x176))){logger[_0xd87bba(0xf1)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0xd87bba(0x18e),![]);return;}else{handleError(_0x5ce8b0,_0xd87bba(0x12f));return;}}}await initExchange(_0x54e9e9['exchange'],_0x54e9e9[_0xd87bba(0x16f)],_0x54e9e9['apiSecret'],_0x54e9e9[_0xd87bba(0x24b)]);try{await loadSymbols(_0x54e9e9['exchange'],!![]);}catch(_0x3111a1){if(_0x3111a1[_0xd87bba(0x156)]()[_0xd87bba(0x219)](_0xd87bba(0x176))){proxyEmit(_0xd87bba(0x18e),![]);return;}else{handleError(_0x3111a1,_0xd87bba(0x146));return;}}const _0x10b98d=await getCoins(![],_0x54e9e9[_0xd87bba(0x208)]);_0x3d10f3=cloneDeep(_0x10b98d[0x1]);}else _0x3d10f3=cloneDeep(currentCoinsAll);if(_0x54e9e9[_0xd87bba(0x208)]=='')proxyEmit(_0xd87bba(0x18e),_0x3d10f3);else{_0x3d10f3['forEach'](_0x44b4e2=>{const _0xc50283=_0xd87bba;if(_0x44b4e2[_0xc50283(0x25e)]!=_0x54e9e9[_0xc50283(0x208)])_0x38c73f[_0xc50283(0x1fa)](_0x44b4e2[_0xc50283(0x1ea)]);});try{_0x4c38a0=await exchange[_0xd87bba(0x20f)](_0x38c73f);}catch(_0x455616){if(_0x455616['toString']()[_0xd87bba(0x219)](_0xd87bba(0x176))){proxyEmit(_0xd87bba(0x18e),![]);return;}else{handleError(_0x455616,_0xd87bba(0x19f));return;}}_0x3d10f3[_0xd87bba(0x270)](_0x4ba803=>{const _0x160406=_0xd87bba;_0x4ba803[_0x160406(0x25e)]!=_0x54e9e9[_0x160406(0x208)]?_0x577bcd=_0x4ba803[_0x160406(0x1bf)]?0x1/_0x4c38a0[_0x4ba803[_0x160406(0x1ea)]][_0x160406(0x16e)]:_0x4c38a0[_0x4ba803[_0x160406(0x1ea)]]['last']:_0x577bcd=0x1,_0x4ba803[_0x160406(0x200)]=formatResult(_0x577bcd,0x8);}),proxyEmit(_0xd87bba(0x18e),_0x3d10f3);}}function truncateTradeAmount(_0xecb482,_0x363d34){const _0x2acea7=_0x261dd2;let _0x4c9a08=0x0;try{_0x4c9a08=exchange[_0x2acea7(0x257)](_0xecb482,_0x363d34);}catch(_0x1a488b){}return _0x4c9a08;}function checkMinimums(_0x5c9bd1){const _0x47fafa=_0x261dd2;let _0x105bc9=!![];const _0x3354fd=!_0x5c9bd1['reverse']?markets[_0x5c9bd1[_0x47fafa(0x1ea)]][_0x47fafa(0x1c9)]['amount'][_0x47fafa(0x250)]:markets[_0x5c9bd1[_0x47fafa(0x1ea)]][_0x47fafa(0x1c9)][_0x47fafa(0x1b0)][_0x47fafa(0x250)],_0x155be1=!_0x5c9bd1[_0x47fafa(0x1bf)]?markets[_0x5c9bd1['symbol']]['limits'][_0x47fafa(0x1b0)][_0x47fafa(0x250)]:markets[_0x5c9bd1[_0x47fafa(0x1ea)]][_0x47fafa(0x1c9)]['amount'][_0x47fafa(0x250)],_0x342a2b=truncateTradeAmount(_0x5c9bd1[_0x47fafa(0x1ea)],_0x5c9bd1[_0x47fafa(0x108)]);_0x5c9bd1[_0x47fafa(0x108)]=_0x342a2b;if(Math['abs'](_0x342a2b)<_0x3354fd)_0x105bc9=![];if(Math[_0x47fafa(0x10a)](_0x342a2b)*_0x5c9bd1[_0x47fafa(0x16e)]<_0x155be1)_0x105bc9=![];if(_0x5c9bd1[_0x47fafa(0x1ec)]==_0x47fafa(0x17e)){let _0x2e6a2c=config[_0x47fafa(0x18e)]['find'](_0x314f97=>_0x314f97[_0x47fafa(0x25e)]==_0x5c9bd1[_0x47fafa(0x25e)]);if(_0x2e6a2c['offset']>0x0){if(Math['abs'](_0x342a2b)>_0x5c9bd1[_0x47fafa(0x1eb)]-_0x2e6a2c[_0x47fafa(0x256)])_0x105bc9=![];}else{if(Math['abs'](_0x342a2b)>_0x5c9bd1['number'])_0x105bc9=![];}}if(_0x5c9bd1[_0x47fafa(0x1ec)]=='buy'){let _0x35db95=config[_0x47fafa(0x18e)][_0x47fafa(0x1b9)](_0x3f50a7=>_0x3f50a7[_0x47fafa(0x25e)]==config['basecoin']),_0x21e93c=currentCoins[_0x47fafa(0x1b9)](_0x5aa2bb=>_0x5aa2bb['coin']==config[_0x47fafa(0x208)]);if(_0x35db95[_0x47fafa(0x256)]>0x0){if(Math['abs'](_0x342a2b)*_0x5c9bd1['last']>_0x21e93c['number']-_0x35db95[_0x47fafa(0x256)])_0x105bc9=![];}else{if(Math[_0x47fafa(0x10a)](_0x342a2b)*_0x5c9bd1[_0x47fafa(0x16e)]>_0x21e93c[_0x47fafa(0x1eb)])_0x105bc9=![];}}return _0x105bc9;}async function getBalances(_0x132b5b=!![]){const _0x260c87=_0x261dd2;let _0x2918c7=0x0,_0xd8ac12;const _0x5337f4=config[_0x260c87(0x1e4)];if(config[_0x260c87(0x151)]&&config[_0x260c87(0x238)]<0x0)await validate24hChanges();currentCoins[_0x260c87(0x270)](_0x43b7aa=>{const _0x280e13=_0x260c87;if(_0x43b7aa['coin']!=config['basecoin']){let _0x362bf2=global[_0x280e13(0xeb)][noslash(_0x43b7aa[_0x280e13(0x1ea)])];_0xd8ac12=_0x43b7aa[_0x280e13(0x1bf)]?0x1/_0x362bf2:_0x362bf2;}else _0xd8ac12=0x1;let _0xfbc23c=_0x43b7aa[_0x280e13(0x1eb)]*_0xd8ac12;_0x2918c7+=_0xfbc23c,_0x43b7aa['last']=formatResult(Number(_0xd8ac12),0x8),_0x43b7aa[_0x280e13(0x236)]=_0xfbc23c;}),currentCoins[_0x260c87(0x270)](_0x1123a0=>{const _0x562987=_0x260c87;let _0x159300=config['portfolio'][_0x562987(0x1b9)](_0x4ffb81=>_0x4ffb81[_0x562987(0x25e)]==_0x1123a0[_0x562987(0x25e)]),_0x218ecc=Number(_0x159300['distribution']),_0x1b6ef4=_0x1123a0[_0x562987(0x236)]/_0x2918c7*0x64,_0x18daea=_0x218ecc*_0x2918c7/0x64/_0x1123a0[_0x562987(0x16e)]-_0x1123a0[_0x562987(0x1eb)];_0x1123a0['distribution']=formatResult(_0x1b6ef4,0x3),_0x1123a0['target']=formatResult(_0x218ecc,0x3),_0x1123a0['trade']=formatResult(_0x18daea,0x8),_0x1123a0[_0x562987(0x1ec)]='',_0x1123a0[_0x562987(0x259)]=![];if(_0x1123a0['coin']!=config[_0x562987(0x208)]){if(_0x1123a0[_0x562987(0x1d0)]>_0x218ecc)_0x1123a0[_0x562987(0x1ec)]='sell',_0x1123a0[_0x562987(0x259)]=checkMinimums(_0x1123a0);else _0x1123a0['distribution']<_0x218ecc&&(_0x1123a0[_0x562987(0x1ec)]=_0x562987(0x192),_0x1123a0[_0x562987(0x259)]=checkMinimums(_0x1123a0));}_0x1123a0[_0x562987(0x21d)]=_0x1123a0[_0x562987(0x1d0)]/_0x1123a0[_0x562987(0x27a)]-0x1;if(_0x1123a0[_0x562987(0x234)]==_0x562987(0x184)||_0x1123a0['orderstatus']==_0x562987(0x1a8))_0x1123a0['orderstatus']=_0x562987(0x212);}),currentCoins[_0x260c87(0x252)]((_0x51a593,_0x5f35d5)=>_0x51a593[_0x260c87(0x21d)]<_0x5f35d5['delta']?0x1:_0x5f35d5[_0x260c87(0x21d)]<_0x51a593[_0x260c87(0x21d)]?-0x1:0x0);const _0x2a7c06=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2a7c06[_0x260c87(0x1ad)],'usd':_0x2a7c06[_0x260c87(0x141)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x5337f4},proxyEmit(_0x260c87(0x1e1),{'serverversion':serverversion,'balances':lastBalances});if(_0x132b5b){if(config[_0x260c87(0x151)])headlessMode({'portfolio':currentCoins,'threshold':_0x5337f4});else{if(lockOrders==ORDERS[_0x260c87(0x266)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x5337f4});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x3842fa=getNormalizedPerformance();getStartingBalances(_0x3842fa),emitPerformance(_0x3842fa);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x13d0c7=getNormalizedPerformance();emitPerformance(_0x13d0c7),getStartingBalances(_0x13d0c7),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3bf0c7=_0x261dd2;if(!lastBalances)return;let _0x5a62a2=[],_0x4efd7e,_0x45c384=JSON[_0x3bf0c7(0x239)](lastBalances[_0x3bf0c7(0x18e)]);_0x45c384[_0x3bf0c7(0x252)]((_0x1cdf24,_0x5e64d2)=>_0x1cdf24[_0x3bf0c7(0x25e)]>_0x5e64d2[_0x3bf0c7(0x25e)]?0x1:_0x5e64d2[_0x3bf0c7(0x25e)]>_0x1cdf24[_0x3bf0c7(0x25e)]?-0x1:0x0),_0x45c384[_0x3bf0c7(0x270)](_0x5e0ba7=>{const _0x289a58=_0x3bf0c7;let _0x1f9694={'coin':_0x5e0ba7[_0x289a58(0x25e)],'number':_0x5e0ba7[_0x289a58(0x1eb)],'price':_0x5e0ba7[_0x289a58(0x16e)]};_0x5a62a2['push'](_0x1f9694);});const _0x332ee5=await getFiat();_0x4efd7e={'date':lastBalances['time']['split']('\x20')[0x0],'eur':_0x332ee5['eur'],'usd':_0x332ee5[_0x3bf0c7(0x141)],'coins':_0x5a62a2};let _0x3beed1=dbPerformance[_0x3bf0c7(0x1cc)]('data')[_0x3bf0c7(0x1b9)]({'date':_0x4efd7e[_0x3bf0c7(0x1ca)]})[_0x3bf0c7(0x236)]();_0x3beed1?_0x4efd7e[_0x3bf0c7(0x1ca)]!=config['startdate']&&dbPerformance[_0x3bf0c7(0x1cc)](_0x3bf0c7(0x120))[_0x3bf0c7(0x1b9)]({'date':_0x4efd7e[_0x3bf0c7(0x1ca)]})[_0x3bf0c7(0x193)](_0x4efd7e)[_0x3bf0c7(0x24d)]():dbPerformance[_0x3bf0c7(0x1cc)](_0x3bf0c7(0x120))[_0x3bf0c7(0x1fa)](_0x4efd7e)[_0x3bf0c7(0x24d)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x353c3f=_0x261dd2;let _0x2acb12=[];if(dbPerformance[_0x353c3f(0x11b)](_0x353c3f(0x120))[_0x353c3f(0x236)]()){let _0x41e218=dbPerformance[_0x353c3f(0x1cc)](_0x353c3f(0x120))[_0x353c3f(0x1a6)]()[_0x353c3f(0x10d)](_0x9c8054=>{const _0x36e732=_0x353c3f;if(_0x9c8054[_0x36e732(0x231)][_0x36e732(0x119)]==0x0)return![];else return!![];})[_0x353c3f(0x116)](_0x353c3f(0x1ca))[_0x353c3f(0x236)](),_0x2d630a=[...config['liquidity']];_0x2d630a[_0x353c3f(0x252)]((_0xab3b58,_0x3f3fab)=>_0xab3b58[_0x353c3f(0x1ca)]>_0x3f3fab[_0x353c3f(0x1ca)]?-0x1:_0x3f3fab['date']>_0xab3b58[_0x353c3f(0x1ca)]?0x1:0x0);let _0x484a56=0x1,_0x31bf9a=[],_0x617c9f=0x0;_0x41e218['slice']()[_0x353c3f(0x1bf)]()[_0x353c3f(0x270)]((_0x3f5c64,_0x266c91)=>{const _0x2ebdc5=_0x353c3f;if(_0x2d630a[_0x617c9f]){if(_0x41e218[_0x41e218[_0x2ebdc5(0x119)]-_0x266c91]&&_0x2d630a[_0x617c9f][_0x2ebdc5(0x1ca)]==_0x41e218[_0x41e218[_0x2ebdc5(0x119)]-_0x266c91][_0x2ebdc5(0x1ca)]){if(_0x266c91<_0x41e218[_0x2ebdc5(0x119)]){let _0x17e55b=0x0,_0x3c0657=0x0;_0x41e218[_0x41e218[_0x2ebdc5(0x119)]-_0x266c91][_0x2ebdc5(0x231)][_0x2ebdc5(0x270)](_0x377aaa=>{const _0x5070c4=_0x2ebdc5;_0x3c0657+=_0x377aaa[_0x5070c4(0x1eb)]*_0x377aaa[_0x5070c4(0x200)];}),_0x2d630a[_0x617c9f]['changes'][_0x2ebdc5(0x270)](_0x64f9b0=>{const _0x35c0ce=_0x2ebdc5;_0x17e55b+=_0x64f9b0[_0x35c0ce(0x1eb)]*_0x64f9b0['price'];}),_0x484a56*=_0x17e55b/(_0x3c0657-_0x17e55b)+0x1;}_0x617c9f++;}}let _0x209612=0x0;_0x3f5c64[_0x2ebdc5(0x231)][_0x2ebdc5(0x270)](_0x3a8866=>{const _0x335d40=_0x2ebdc5;_0x209612+=_0x3a8866['number']*_0x3a8866[_0x335d40(0x200)];}),_0x31bf9a[_0x41e218['length']-_0x266c91-0x1]=_0x209612*(_0x484a56-0x1);});let _0x35c93b=[];_0x2d630a=[...config[_0x353c3f(0x10e)]]||[];let _0x429010=0x0;_0x617c9f=0x0,_0x41e218[_0x353c3f(0x270)]((_0x4573e1,_0x573a73)=>{const _0x116cba=_0x353c3f;if(_0x2d630a[_0x617c9f]){const _0x5502a2=fns[_0x116cba(0x239)](_0x2d630a[_0x617c9f][_0x116cba(0x1ca)],_0x116cba(0x255),new Date()),_0xed3dd2=fns[_0x116cba(0x239)](_0x4573e1[_0x116cba(0x1ca)],_0x116cba(0x255),new Date());if(fns[_0x116cba(0x164)](_0x5502a2,_0xed3dd2)){let _0x126aef=0x0;_0x2d630a[_0x617c9f][_0x116cba(0x10f)][_0x116cba(0x270)](_0x3f78b7=>{const _0x20e87a=_0x116cba;!_0x35c93b[_0x3f78b7[_0x20e87a(0x25e)]]?_0x35c93b[_0x3f78b7[_0x20e87a(0x25e)]]=_0x3f78b7[_0x20e87a(0x1eb)]:(_0x126aef=_0x35c93b[_0x3f78b7['coin']],_0x35c93b[_0x3f78b7[_0x20e87a(0x25e)]]+=_0x3f78b7[_0x20e87a(0x1eb)]);const _0x4dcb19=_0x4573e1[_0x20e87a(0x231)][_0x20e87a(0x1b9)](_0x3892b9=>_0x3892b9[_0x20e87a(0x25e)]==_0x3f78b7[_0x20e87a(0x25e)]);(!_0x4dcb19||_0x4dcb19[_0x20e87a(0x1eb)]==0x0)&&(_0x429010+=(-_0x3f78b7[_0x20e87a(0x1eb)]-_0x126aef)*_0x3f78b7['price']);}),_0x617c9f++;}}_0x4573e1['coins'][_0x116cba(0x270)]((_0x13e435,_0x3c927f)=>{const _0xf82ddb=_0x116cba;_0x35c93b[_0x13e435[_0xf82ddb(0x25e)]]&&(_0x13e435[_0xf82ddb(0x275)]=_0x35c93b[_0x13e435[_0xf82ddb(0x25e)]]);}),_0x2acb12[_0x116cba(0x1fa)]({'date':_0x4573e1[_0x116cba(0x1ca)],'eur':_0x4573e1['eur'],'usd':_0x4573e1['usd'],'offset':_0x31bf9a[_0x573a73],'netoffset':_0x429010,'coins':_0x4573e1[_0x116cba(0x231)]});});}return _0x2acb12;}function emitPerformance(_0x224ba7){const _0x24e254=_0x261dd2;_0x224ba7[_0x24e254(0x119)]!==0x0?(proxyEmit(_0x24e254(0x16a),_0x224ba7),lastPerformanceEmitted=getDate()):proxyEmit(_0x24e254(0x16a),[]);}function getPerf(_0x100dd9,_0x42e7c4){const _0x27d7eb=_0x261dd2;let _0x4bfab4=0x0,_0x4f3b01=0x0,_0xa770f2=0x0;_0x100dd9['coins'][_0x27d7eb(0x270)](_0x1a56a7=>{const _0x118767=_0x27d7eb;_0x4bfab4+=_0x1a56a7['number']*_0x1a56a7[_0x118767(0x200)];});_0x42e7c4&&(_0x4bfab4+=_0x100dd9[_0x27d7eb(0x256)]);if(config['basecoin']===_0x27d7eb(0x145)||config[_0x27d7eb(0x208)]==='ETH')_0x4f3b01=_0x4bfab4*_0x100dd9[_0x27d7eb(0x1ad)],_0xa770f2=_0x4bfab4*_0x100dd9['usd'];else{if(usdBasecoins[_0x27d7eb(0x219)](config[_0x27d7eb(0x208)]))_0x4f3b01=_0x4bfab4*_0x100dd9[_0x27d7eb(0x1ad)]/_0x100dd9[_0x27d7eb(0x141)],_0xa770f2=_0x4bfab4;else config['basecoin']==='EUR'&&(_0x4f3b01=_0x4bfab4,_0xa770f2=_0x4bfab4*_0x100dd9['usd']/_0x100dd9[_0x27d7eb(0x1ad)]);}return[_0x4bfab4,_0x4f3b01,_0xa770f2];}function getKPIs(_0xf70353,_0x55a212=_0x261dd2(0x132)){const _0x386745=_0x261dd2,_0x2ac847=config[_0x386745(0x208)],_0x33d18f=lastBalances,_0xac529b=currentCoins,_0x41bfd2=getNormalizedPerformance(),_0x22f29f=_0xf70353===_0x386745(0x208)?_0x2ac847:_0xf70353===_0x386745(0x11f)||_0xf70353===_0x386745(0x1e3)?_0x55a212:_0x386745(0x233)+_0x2ac847,_0x41c61b=_0xf70353==='net-basecoin'?_0x386745(0x125):_0xf70353===_0x386745(0x1e3)?_0x386745(0x125):_0x22f29f+_0x386745(0x241),_0x3f175b=_0xf70353==='net-basecoin'||_0xf70353==='net-fiat'?_0x386745(0x125):_0x22f29f+'\x20change';let _0x159c5c=0x0;_0xac529b[_0x386745(0x270)](_0x4f838a=>{const _0x14f0f7=_0x386745;_0x159c5c+=_0x4f838a[_0x14f0f7(0x1eb)]*_0x4f838a[_0x14f0f7(0x16e)];});if(_0xf70353===_0x386745(0x11f)||_0xf70353==='net-fiat'){if(_0x2ac847==='BTC'||_0x2ac847===_0x386745(0x245))_0x159c5c=_0x159c5c*(_0x55a212===_0x386745(0x132)?_0x33d18f['eur']:_0x33d18f[_0x386745(0x141)]);else{if(usdBasecoins[_0x386745(0x219)](_0x2ac847))_0x159c5c=_0x159c5c*(_0x55a212==='EUR'?_0x33d18f[_0x386745(0x1ad)]/_0x33d18f['usd']:0x1);else _0x2ac847===_0x386745(0x132)&&(_0x159c5c=_0x159c5c*(_0x55a212==='EUR'?0x1:_0x33d18f['usd']/_0x33d18f[_0x386745(0x1ad)]));}}let _0x556f8d;if(_0x159c5c!==0x0){if(_0xf70353===_0x386745(0x208))_0x556f8d=(_0x159c5c/startingBalances[_0x386745(0x208)]-0x1)*0x64;else{if(_0x55a212==='EUR')_0x556f8d=(_0x159c5c/startingBalances[_0x386745(0x1ad)]-0x1)*0x64;else _0x556f8d=(_0x159c5c/startingBalances[_0x386745(0x141)]-0x1)*0x64;}let _0x26af14=0x0;if(startingBalances[_0x386745(0x231)])_0xac529b['forEach'](_0xf32eed=>{const _0x4cf723=_0x386745;let _0x21df00=startingBalances['coins'][_0x4cf723(0x1b9)](_0x54378f=>_0x54378f[_0x4cf723(0x25e)]===_0xf32eed[_0x4cf723(0x25e)]);if(_0x21df00&&_0x21df00[_0x4cf723(0x25e)]&&_0xf32eed[_0x4cf723(0x1eb)]!==0x0)_0x26af14+=_0x21df00['number']*_0xf32eed[_0x4cf723(0x16e)];});let _0x1e7b81=0x0;if(_0x41bfd2[_0x386745(0x119)]!==0x0){let _0x218eb=_0x41bfd2[_0x41bfd2[_0x386745(0x119)]-0x1];_0x1e7b81=_0x218eb[_0x386745(0x215)];}_0x26af14-=_0x1e7b81;_0xf70353==='net-basecoin'&&(_0x556f8d=(_0x159c5c-_0x26af14)/startingBalances['basecoin']*0x64,_0x159c5c=_0x159c5c-_0x26af14);if(_0xf70353===_0x386745(0x1e3)){let _0x4d1a8b=_0x55a212===_0x386745(0x132)?startingBalances[_0x386745(0x1ad)]:startingBalances[_0x386745(0x141)];if(_0x2ac847===_0x386745(0x145)||_0x2ac847==='ETH')_0x26af14=_0x55a212===_0x386745(0x132)?_0x26af14*_0x33d18f[_0x386745(0x1ad)]:_0x26af14*_0x33d18f[_0x386745(0x141)];else{if(usdBasecoins[_0x386745(0x219)](_0x2ac847))_0x26af14=_0x55a212===_0x386745(0x132)?_0x26af14*_0x33d18f[_0x386745(0x1ad)]/_0x33d18f['usd']:_0x26af14;else _0x2ac847===_0x386745(0x132)&&(_0x26af14=_0x55a212==='EUR'?_0x26af14:_0x26af14*_0x33d18f[_0x386745(0x141)]/_0x33d18f['eur']);}_0x556f8d=(_0x159c5c-_0x26af14)/_0x4d1a8b*0x64,_0x159c5c=_0x159c5c-_0x26af14;}if(_0x556f8d){if(_0x556f8d<0x64)_0x556f8d=_0x556f8d[_0x386745(0x18f)](0x2);else{if(_0x556f8d<0x3e8)_0x556f8d=_0x556f8d[_0x386745(0x18f)](0x1);else _0x556f8d=_0x556f8d[_0x386745(0x18f)](0x0);}}else _0x556f8d=Number('0')[_0x386745(0x18f)](0x2);if(_0x159c5c){if(Math[_0x386745(0x10a)](_0x159c5c)<0.000001)_0x159c5c=_0x159c5c['toFixed'](0x2);else{if(Math['abs'](_0x159c5c)<0.1)_0x159c5c=_0x159c5c[_0x386745(0x18f)](0x6);else{if(Math[_0x386745(0x10a)](_0x159c5c)<0x1)_0x159c5c=_0x159c5c[_0x386745(0x18f)](0x5);else{if(Math[_0x386745(0x10a)](_0x159c5c)<0xa)_0x159c5c=_0x159c5c[_0x386745(0x18f)](0x4);else{if(Math[_0x386745(0x10a)](_0x159c5c)<0x64)_0x159c5c=_0x159c5c[_0x386745(0x18f)](0x3);else{if(Math[_0x386745(0x10a)](_0x159c5c)<0x3e8)_0x159c5c=_0x159c5c['toFixed'](0x2);else _0x159c5c=_0x159c5c[_0x386745(0x18f)](0x2);}}}}}}else _0x159c5c=Number('0')['toFixed'](0x2);}else _0x556f8d=Number('0')[_0x386745(0x18f)](0x2);return{'value':_0x159c5c,'change':_0x556f8d,'leftTxt':_0x41c61b,'rightTxt':_0x3f175b};}async function getStartingBalances(_0x2446e2,_0x3c818a=!![]){const _0x180426=_0x261dd2;if(_0x2446e2[_0x180426(0x119)]!==0x0){const [_0x50b1fa,_0x2ac21d,_0x91caa5]=getPerf(_0x2446e2[0x0],!![]);let _0xd0a79e=[];config[_0x180426(0x18e)][_0x180426(0x270)](_0x3f9581=>{const _0x367a38=_0x180426;let _0x9a3a76=0x0,_0x18d131;config[_0x367a38(0x10e)][_0x367a38(0x270)](_0x3d651e=>{const _0xb2bbb5=_0x367a38;let _0x4a5920=_0x3d651e[_0xb2bbb5(0x10f)][_0xb2bbb5(0x1b9)](_0x9571c3=>_0x9571c3[_0xb2bbb5(0x25e)]==_0x3f9581[_0xb2bbb5(0x25e)]);if(_0x4a5920){_0x9a3a76+=_0x4a5920[_0xb2bbb5(0x1eb)];if(!_0x18d131)_0x18d131=_0x4a5920[_0xb2bbb5(0x200)];}}),_0xd0a79e['push']({'coin':_0x3f9581[_0x367a38(0x25e)],'number':_0x9a3a76,'initialprice':_0x18d131});});const _0x372de6={'basecoin':_0x50b1fa,'eur':_0x2ac21d,'usd':_0x91caa5,'coins':_0xd0a79e};if(_0x3c818a)proxyEmit(_0x180426(0xfd),_0x372de6);startingBalances=_0x372de6;}}function headlessMode(_0x3db63b){const _0x27a06e=_0x261dd2;let _0x359906=_0x3db63b['portfolio'],_0x3c4c98=_0x3db63b[_0x27a06e(0x1e4)],_0x803d62=[];for(let _0x4d6671 of _0x359906){if(_0x4d6671[_0x27a06e(0x25e)]!=config[_0x27a06e(0x208)]){if(_0x4d6671[_0x27a06e(0x21d)]>=_0x3c4c98/0x64){if(_0x4d6671[_0x27a06e(0x259)])_0x803d62[_0x27a06e(0x1fa)](_0x4d6671);}else{if(_0x4d6671[_0x27a06e(0x21d)]<=-_0x3c4c98/0x64){if(_0x4d6671['valid'])_0x803d62[_0x27a06e(0x1fa)](_0x4d6671);}}}}_0x803d62[_0x27a06e(0x119)]>0x0&&placeOrder(_0x803d62);}function notifyBalance(_0x29ea47){const _0x2cdb9b=_0x261dd2;let _0x9f8b9b=_0x29ea47[_0x2cdb9b(0x18e)],_0x3118bb=_0x29ea47['threshold'],_0x9343f3=[];for(let _0x964d94 of _0x9f8b9b){if(_0x964d94[_0x2cdb9b(0x25e)]!=config[_0x2cdb9b(0x208)]){if(_0x964d94[_0x2cdb9b(0x21d)]>=_0x3118bb/0x64){if(_0x964d94[_0x2cdb9b(0x259)])_0x9343f3[_0x2cdb9b(0x1fa)](_0x964d94);}else{if(_0x964d94[_0x2cdb9b(0x21d)]<=-_0x3118bb/0x64){if(_0x964d94['valid'])_0x9343f3[_0x2cdb9b(0x1fa)](_0x964d94);}}}}if(_0x9343f3[_0x2cdb9b(0x119)]>0x0){let _0x267fc2=_0x9343f3[_0x2cdb9b(0x1c3)](_0x518a7f=>_0x518a7f[_0x2cdb9b(0x25e)]);_0x267fc2[_0x2cdb9b(0x252)]();let _0x162167=_0x267fc2['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2cdb9b(0x248),_0x2cdb9b(0x124));lastCoinsToBalance=_0x162167;}}function symbolToCoin(_0x5e3c02){const _0x21911e=_0x261dd2;let _0x2b9989;if(_0x5e3c02[_0x21911e(0x219)]('/'+config[_0x21911e(0x208)]))_0x2b9989=_0x5e3c02['replace']('/'+config['basecoin'],'');if(_0x5e3c02['includes'](config[_0x21911e(0x208)]+'/'))_0x2b9989=_0x5e3c02[_0x21911e(0x1f4)](config[_0x21911e(0x208)]+'/','');return _0x2b9989;}async function unlockOrders(){const _0x40289c=_0x261dd2;if(allOrdersPlaced&&lockOrders==ORDERS[_0x40289c(0x1b3)]){logger[_0x40289c(0xf1)](_0x40289c(0xf3)),lockOrders=ORDERS[_0x40289c(0xf8)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x53b78d=await getCoins();[currentCoins,currentCoinsAll]=_0x53b78d,validateOrdersState=_0x40289c(0x275),persistOpenOrders([]),lockOrders=ORDERS['UNLOCKED'],logger[_0x40289c(0xf1)](_0x40289c(0x10c));}}async function validateOrders(_0x151e93){const _0xf361c1=_0x261dd2;if(_0x151e93)validateOrdersState=_0x151e93;logger['debug'](_0xf361c1(0x117)+validateOrdersState+_0xf361c1(0x1de)+(lockOrders==0x1?_0xf361c1(0x23a):lockOrders==0x2?_0xf361c1(0x198):_0xf361c1(0x196)));let _0x29e8b8=[],_0x2872cc=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0xf361c1(0x11d)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0xf361c1(0x1b3)])return;logger[_0xf361c1(0xf1)](_0xf361c1(0x123)+validateOrdersState),lastOrders['forEach'](_0x29aa38=>{const _0x3e3e10=_0xf361c1;let _0x5c58c7=![];_0x29aa38[_0x3e3e10(0x184)]>0x0&&(_0x5c58c7=!![]),_0x29e8b8['push'](_0x5c58c7),_0x5c58c7&&config[_0x3e3e10(0x211)]!=_0x3e3e10(0x15d)&&logHistory(_0x3e3e10(0x170),_0x3e3e10(0x15b)+_0x29aa38[_0x3e3e10(0x1ea)]+'\x20'+_0x29aa38[_0x3e3e10(0x1ec)]+'\x20#'+formatResult(_0x29aa38[_0x3e3e10(0x184)],0x8)+'\x20@'+formatResult(_0x29aa38[_0x3e3e10(0x200)],0x8));}),_0x29e8b8['forEach']((_0xfc4790,_0x44ef2f)=>{const _0x1b006f=_0xf361c1;if(_0xfc4790)lastOrders[_0x1b006f(0x11c)](_0x44ef2f,0x1);}),persistOpenOrders(lastOrders);const _0x293e34=coolingDown?_0xf361c1(0x1fc):_0xf361c1(0x1f8);if(validateOrdersState==_0xf361c1(0x275)){validateOrdersState=_0xf361c1(0x1c7);if(_0x29e8b8['includes'](![])){if(config[_0xf361c1(0x211)]==_0xf361c1(0x15d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0xf361c1(0x1c7)){if(_0x29e8b8[_0xf361c1(0x219)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0xf361c1(0x15d)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0xf361c1(0x1d6))_0x29e8b8[_0xf361c1(0x219)](![])&&(config['ordertype']=='market'?logHistory(_0xf361c1(0x1f2),_0xf361c1(0x265)+Math['round'](_0x2872cc*validateOrderInterval/0xea60)+_0xf361c1(0x126)+_0x293e34):(await cancelOrders(),logHistory('success',_0xf361c1(0x15e)+Math['round'](_0x2872cc*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x293e34))),await unlockOrders();else{if(validateOrdersState==_0xf361c1(0x1d8)){if(config[_0xf361c1(0x211)]!=_0xf361c1(0x15d))logHistory('success',_0xf361c1(0x12c)+_0x293e34);await unlockOrders();}}}}}async function cancelOrders(){const _0x47ceb1=_0x261dd2;lastOrders[_0x47ceb1(0x270)](async _0x1b35c4=>{const _0x5ec1f8=_0x47ceb1;try{const _0x33f5c6=await exchange[_0x5ec1f8(0x1cb)](_0x1b35c4[_0x5ec1f8(0x247)],_0x1b35c4[_0x5ec1f8(0x1ea)]);}catch(_0xded80d){if(_0xded80d[_0x5ec1f8(0x156)]()[_0x5ec1f8(0x219)](_0x5ec1f8(0x136))){}else await handleError(_0xded80d,_0x5ec1f8(0x263));}});}async function initCoinResults(_0x40b6d8){const _0x17ab47=_0x261dd2;_0x40b6d8?logger[_0x17ab47(0xf1)](_0x17ab47(0x112)+_0x40b6d8):logger['debug'](_0x17ab47(0x23d)),config[_0x17ab47(0x18e)][_0x17ab47(0x270)](_0x2aeb75=>{const _0x34956e=_0x17ab47;if(!_0x2aeb75[_0x34956e(0x21a)]&&_0x2aeb75['coin']!=config[_0x34956e(0x208)]){const _0x210177=currentCoins[_0x34956e(0x1b9)](_0x49f84f=>_0x49f84f[_0x34956e(0x25e)]==_0x2aeb75[_0x34956e(0x25e)]),_0x1b1a87=global['ticker'][noslash(_0x2aeb75[_0x34956e(0x1ea)])];let _0x18da02=_0x210177?_0x210177[_0x34956e(0x1eb)]:null,_0x518b41=_0x2aeb75[_0x34956e(0x1bf)]?0x1/_0x1b1a87:_0x1b1a87,_0x8f200d;config['liquidity']['forEach'](_0xe4f07e=>{const _0x1df02a=_0x34956e;!_0x8f200d&&(_0x8f200d=_0xe4f07e[_0x1df02a(0x10f)][_0x1df02a(0x1b9)](_0xd15062=>_0xd15062[_0x1df02a(0x25e)]==_0x2aeb75[_0x1df02a(0x25e)]),_0x8f200d&&(_0x18da02=_0x8f200d[_0x1df02a(0x1eb)],_0x518b41=_0x8f200d['price']));});let _0x1cc701=dbCoinResults[_0x34956e(0x1cc)](_0x34956e(0x231))['find']({'coin':_0x2aeb75[_0x34956e(0x25e)]})[_0x34956e(0x236)]();if(!_0x1cc701){const _0x5d49dd={'coin':_0x2aeb75[_0x34956e(0x25e)],'number':_0x18da02,'breakeven':_0x518b41,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x34956e(0x1cc)](_0x34956e(0x231))['push'](_0x5d49dd)['write']();}else{if(_0x40b6d8&&_0x2aeb75[_0x34956e(0x25e)]==_0x40b6d8){const _0x2ddbc6={'coin':_0x2aeb75[_0x34956e(0x25e)],'number':_0x18da02,'breakeven':_0x518b41,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x34956e(0x1cc)](_0x34956e(0x231))[_0x34956e(0x1b9)]({'coin':_0x2aeb75[_0x34956e(0x25e)]})['assign'](_0x2ddbc6)['write']();}}}});}async function updateCoinResults(_0x111a0b,_0x134d18=![]){const _0x15ecd0=_0x261dd2;let _0x18c726,_0x53253c,_0x2f6511,_0x363b0d,_0x1b43c6,_0x1d16f9,_0x22448f=dbCoinResults['get'](_0x15ecd0(0x231))['find']({'coin':_0x111a0b[_0x15ecd0(0x25e)]})[_0x15ecd0(0x236)](),_0x1c91ff=![];Object[_0x15ecd0(0x26b)](_0x22448f)[_0x15ecd0(0x270)](([_0x5a0175,_0x445dd4])=>{if(_0x445dd4==null)_0x1c91ff=!![];});(!_0x22448f||_0x1c91ff)&&(await initCoinResults(_0x111a0b[_0x15ecd0(0x25e)]),_0x22448f=dbCoinResults[_0x15ecd0(0x1cc)](_0x15ecd0(0x231))[_0x15ecd0(0x1b9)]({'coin':_0x111a0b[_0x15ecd0(0x25e)]})[_0x15ecd0(0x236)]());_0x111a0b['reverse']&&(_0x1d16f9={'filled':_0x111a0b[_0x15ecd0(0x184)]*_0x111a0b[_0x15ecd0(0x200)],'amount':_0x111a0b['filled']*_0x111a0b[_0x15ecd0(0x200)],'side':_0x111a0b['side']==_0x15ecd0(0x17e)?_0x15ecd0(0x192):_0x15ecd0(0x17e),'price':0x1/_0x111a0b[_0x15ecd0(0x200)]},_0x111a0b={..._0x111a0b,..._0x1d16f9});_0x134d18?_0x53253c=_0x111a0b[_0x15ecd0(0x1ec)]=='buy'?_0x22448f[_0x15ecd0(0x1eb)]+_0x111a0b['filled']:_0x22448f[_0x15ecd0(0x1eb)]-_0x111a0b[_0x15ecd0(0x184)]:_0x53253c=await getCoinNumber(_0x111a0b[_0x15ecd0(0x25e)]);if(_0x111a0b['fee']&&_0x111a0b[_0x15ecd0(0x106)][_0x15ecd0(0x1f6)]==config[_0x15ecd0(0x208)])_0x18c726=_0x111a0b[_0x15ecd0(0x106)][_0x15ecd0(0x1b0)];else{if(_0x111a0b[_0x15ecd0(0x106)]&&_0x111a0b['fee'][_0x15ecd0(0x1f6)]=='BNB'&&!_0x134d18)_0x18c726=_0x111a0b[_0x15ecd0(0x106)]['cost']*global[_0x15ecd0(0xeb)][_0x15ecd0(0x224)+config[_0x15ecd0(0x208)]];else _0x18c726=defaultFee*_0x111a0b['filled']*_0x111a0b[_0x15ecd0(0x200)];}_0x111a0b['side']==_0x15ecd0(0x192)?(_0x2f6511=_0x53253c!=0x0?(_0x22448f[_0x15ecd0(0x107)]*_0x22448f[_0x15ecd0(0x1eb)]+_0x111a0b[_0x15ecd0(0x200)]*(_0x53253c-_0x22448f[_0x15ecd0(0x1eb)])+_0x18c726)/_0x53253c:0x0,_0x363b0d=_0x22448f['realized']):(_0x2f6511=_0x53253c!=0x0?(_0x22448f[_0x15ecd0(0x107)]*_0x22448f[_0x15ecd0(0x1eb)]-_0x111a0b[_0x15ecd0(0x200)]*(_0x22448f[_0x15ecd0(0x1eb)]-_0x53253c)+_0x18c726)/_0x53253c:0x0,_0x363b0d=_0x22448f[_0x15ecd0(0xef)]+(_0x111a0b[_0x15ecd0(0x200)]-_0x22448f['breakeven'])*_0x111a0b[_0x15ecd0(0x184)]);_0x1b43c6=(_0x111a0b['price']-_0x2f6511-_0x18c726/_0x111a0b[_0x15ecd0(0x184)])*_0x53253c;let _0x2ac0bd={'coin':_0x111a0b[_0x15ecd0(0x25e)],'number':_0x53253c,'breakeven':formatResult(_0x2f6511,0x8),'realized':formatResult(_0x363b0d,0x8),'unrealized':formatResult(_0x1b43c6,0x8),'fees':formatResult(_0x22448f[_0x15ecd0(0x1c2)]+_0x18c726,0x8),'sells':_0x111a0b[_0x15ecd0(0x1ec)]==_0x15ecd0(0x17e)?_0x22448f[_0x15ecd0(0x1c8)]+0x1:_0x22448f[_0x15ecd0(0x1c8)],'buys':_0x111a0b['side']==_0x15ecd0(0x192)?_0x22448f['buys']+0x1:_0x22448f['buys']};dbCoinResults[_0x15ecd0(0x1cc)](_0x15ecd0(0x231))[_0x15ecd0(0x1b9)]({'coin':_0x111a0b['coin']})[_0x15ecd0(0x193)](_0x2ac0bd)['write']();if(!_0x134d18){if(_0x111a0b[_0x15ecd0(0x106)]&&_0x111a0b['fee'][_0x15ecd0(0x1f6)]==_0x15ecd0(0x224)){const _0x28269b=currentCoins['find'](_0xcbd15b=>_0xcbd15b[_0x15ecd0(0x25e)]==_0x15ecd0(0x224));if(_0x28269b){let _0x19e22a=dbCoinResults[_0x15ecd0(0x1cc)](_0x15ecd0(0x231))[_0x15ecd0(0x1b9)]({'coin':_0x15ecd0(0x224)})[_0x15ecd0(0x236)]();_0x2ac0bd={..._0x19e22a,'number':_0x28269b[_0x15ecd0(0x1eb)]},dbCoinResults[_0x15ecd0(0x1cc)](_0x15ecd0(0x231))['find']({'coin':_0x15ecd0(0x224)})[_0x15ecd0(0x193)](_0x2ac0bd)['write']();}}}}async function placeOrder(_0x1350a4){const _0x2181bd=_0x261dd2,_0x3bb919=config[_0x2181bd(0x211)]==_0x2181bd(0x15d)?_0x2181bd(0x15d):_0x2181bd(0x1d4);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x2181bd(0x275);let _0x3facec=![];lastOrders=[];for(const _0x244861 of _0x1350a4){let _0x1e0910,_0x2550d9,_0x369147,_0x446db9,_0x2a6260,_0x3359e3=_0x244861[_0x2181bd(0x1ea)];try{const _0x256de6=await exchange[_0x2181bd(0x13b)](_0x3359e3);_0x1e0910=_0x244861[_0x2181bd(0x1bf)]?0x1/_0x244861[_0x2181bd(0x16e)]:_0x244861['last'],_0x2550d9=_0x256de6[_0x2181bd(0x278)],_0x369147=_0x256de6['ask'];_0x244861[_0x2181bd(0x1bf)]?(_0x446db9=_0x244861['side']=='buy'?_0x2181bd(0x17e):'buy',_0x2a6260=Math[_0x2181bd(0x10a)](_0x244861['trade'])/_0x1e0910):(_0x446db9=_0x244861[_0x2181bd(0x1ec)],_0x2a6260=Math['abs'](_0x244861[_0x2181bd(0x108)]));_0x3bb919=='limit'&&(config[_0x2181bd(0x211)]==_0x2181bd(0x22d)&&(_0x1e0910=_0x446db9==_0x2181bd(0x192)?_0x2550d9:_0x369147),config[_0x2181bd(0x211)]=='limit-low'&&(_0x1e0910=_0x446db9=='buy'?_0x369147:_0x2550d9));_0x2a6260=formatResult(_0x2a6260,0x8),_0x1e0910=formatResult(_0x1e0910,0x8);const _0x18ba15=_0x446db9==_0x2181bd(0x17e)?config[_0x2181bd(0x271)]?String['fromCodePoint']('0x'+config[_0x2181bd(0x271)])+'\x20':'':config[_0x2181bd(0x1db)]?String['fromCodePoint']('0x'+config[_0x2181bd(0x1db)])+'\x20':'',_0x5932a9=_0x3bb919==_0x2181bd(0x15d)?_0x2181bd(0x21c):config['ordertype']==_0x2181bd(0x22d)?'Limit\x20(high-margin)':_0x2181bd(0x104),_0x161f36=(Math[_0x2181bd(0x118)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x2181bd(0x156)]();lastOrders['push']({'customId':_0x161f36,'symbol':_0x3359e3,'coin':_0x244861[_0x2181bd(0x25e)],'amount':_0x2a6260,'price':_0x1e0910,'side':_0x446db9,'reverse':_0x244861[_0x2181bd(0x1bf)],'filled':0x0});if(_0x3bb919==_0x2181bd(0x15d))logHistory(_0x2181bd(0x170),''+_0x18ba15+_0x5932a9+_0x2181bd(0x1a5)+_0x3359e3+'\x20'+_0x446db9+'\x20#'+formatResult(_0x2a6260,0x8)+'\x20@'+formatResult(_0x1e0910,0x8));else logHistory(_0x2181bd(0x170),''+_0x18ba15+_0x5932a9+_0x2181bd(0x1a5)+_0x3359e3+'\x20'+_0x446db9+'\x20#'+formatResult(_0x2a6260,0x8)+'\x20@'+formatResult(_0x1e0910,0x8));const _0x12b0ff=await exchange[_0x2181bd(0x194)](_0x3359e3,_0x3bb919,_0x446db9,_0x2a6260,_0x1e0910);logger['debug'](_0x2181bd(0x1fe)+_0x12b0ff['id']+_0x2181bd(0x1dd)+_0x161f36);const _0x15709d=lastOrders[_0x2181bd(0x119)]-0x1;if(_0x15709d>=0x0&&lastOrders[_0x15709d][_0x2181bd(0x16c)]==_0x161f36){lastOrders[_0x15709d][_0x2181bd(0x247)]=_0x12b0ff['id'];if(_0x12b0ff[_0x2181bd(0x1c1)])lastOrders[_0x15709d][_0x2181bd(0x1c1)]=_0x12b0ff[_0x2181bd(0x1c1)];if(_0x12b0ff[_0x2181bd(0x200)])lastOrders[_0x15709d][_0x2181bd(0x200)]=_0x12b0ff[_0x2181bd(0x200)];lastOrders[_0x15709d]['fee']=_0x12b0ff['fee'];}if(config['cooldown']!=0x0){let _0x1d18d2=null;if(cooldownTracker[_0x2181bd(0x119)]==config[_0x2181bd(0x113)]-0x1)_0x1d18d2=cooldownTracker[_0x2181bd(0x142)]();const _0x438337=getTimeStamp();cooldownTracker[_0x2181bd(0x1fa)](_0x438337);if(_0x1d18d2){const _0x190612=fns[_0x2181bd(0xff)](new Date(_0x438337),new Date(_0x1d18d2));if(_0x190612<cooldownInterval){logHistory('error',_0x2181bd(0xf0)+config['cooldown']+_0x2181bd(0x26f)+cooldownInterval/0x3c+_0x2181bd(0x268)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x311cb0){if(_0x311cb0[_0x2181bd(0x156)]()[_0x2181bd(0x219)](_0x2181bd(0x214)))lastOrders=lastOrders[_0x2181bd(0x10d)](_0x36e432=>_0x36e432[_0x2181bd(0x1ea)]!=_0x3359e3),logHistory(_0x2181bd(0x204),_0x2181bd(0x1ab)+_0x3359e3),_0x3facec=!![];else{if(_0x311cb0[_0x2181bd(0x156)]()[_0x2181bd(0x219)](_0x2181bd(0x165)))lastOrders=lastOrders[_0x2181bd(0x10d)](_0x393345=>_0x393345[_0x2181bd(0x1ea)]!=_0x3359e3),logHistory(_0x2181bd(0x204),_0x2181bd(0x13f)+_0x3359e3),_0x3facec=!![];else{if(_0x311cb0['toString']()['includes']('InvalidOrder'))lastOrders=lastOrders['filter'](_0x1789c1=>_0x1789c1['symbol']!=_0x3359e3),logHistory('error','Order\x20is\x20invalid:\x20'+_0x3359e3),_0x3facec=!![];else _0x311cb0['toString']()[_0x2181bd(0x219)](_0x2181bd(0x122))?(lastOrders=lastOrders[_0x2181bd(0x10d)](_0x2cd2b6=>_0x2cd2b6[_0x2181bd(0x1ea)]!=_0x3359e3),logHistory(_0x2181bd(0x204),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3359e3),_0x3facec=!![]):(lastOrders=lastOrders[_0x2181bd(0x10d)](_0x4c60a3=>_0x4c60a3[_0x2181bd(0x1ea)]!=_0x3359e3),await handleError(_0x311cb0,_0x2181bd(0x139),_0x3359e3));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x2181bd(0x119)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x13d0d2=config['ordertype']==_0x2181bd(0x15d)?validateOrderTimeout*0x3c*0x3e8:config[_0x2181bd(0x11d)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x13d0d2);}else unlockOrders();_0x3facec&&config[_0x2181bd(0x151)]&&await pauseBot(_0x2181bd(0x20d)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x2181bd(0x1f2),_0x2181bd(0x1af)));}else{if(coolingDown)!config[_0x2181bd(0x151)]&&logHistory('error',_0x2181bd(0x114));else lockOrders!=ORDERS[_0x2181bd(0x266)]&&(!config[_0x2181bd(0x151)]&&(config[_0x2181bd(0x211)]==_0x2181bd(0x15d)?logHistory(_0x2181bd(0x204),_0x2181bd(0xf2)):logHistory(_0x2181bd(0x204),_0x2181bd(0x201))));}}function persistOpenOrders(_0x2304e5){const _0xf6f2af=_0x261dd2,_0xcc894e={...config,'openOrders':_0x2304e5};let _0x1cae1d=dbConfig['get'](_0xf6f2af(0x133))[_0xf6f2af(0x1b9)]({'botID':botID})[_0xf6f2af(0x236)]();_0x1cae1d&&dbConfig[_0xf6f2af(0x1cc)](_0xf6f2af(0x133))[_0xf6f2af(0x1b9)]({'botID':botID})[_0xf6f2af(0x193)](_0xcc894e)['write']();}function restoreOrders(){const _0x8de406=_0x261dd2;let _0x4ba3e8;config[_0x8de406(0x20a)]&&allOpenOrders['forEach'](_0x4d359f=>{const _0x37222b=_0x8de406,_0x5edf8d=config[_0x37222b(0x20a)]['find'](_0xec03c7=>_0xec03c7[_0x37222b(0x247)]==_0x4d359f['id']);_0x5edf8d&&(lastOrders[_0x37222b(0x1fa)](_0x5edf8d),_0x4ba3e8=_0x4d359f[_0x37222b(0x14f)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x8de406(0x1b3)],validateOrdersState=_0x8de406(0x1c7),allOrdersPlaced=!![];const _0x273825=new Date()[_0x8de406(0x1d9)](),_0x3a192b=config[_0x8de406(0x211)]==_0x8de406(0x15d)?validateOrderTimeout*0x3c*0x3e8:config[_0x8de406(0x11d)]*0x3c*0x3e8;if(_0x4ba3e8+_0x3a192b>_0x273825){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x4ba3e8+_0x3a192b-_0x273825);}else validateOrders(_0x8de406(0x1d6));}}async function sendMetricsTelegram(){const _0x19a772=_0x261dd2;if(!coinsLoaded){process['send']({'telegrammsg':_0x19a772(0x21b)},_0x43e8e8=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x23339b='';if(config[_0x19a772(0x240)])_0x23339b='<b>'+config[_0x19a772(0x13a)]+_0x19a772(0x1b2);else _0x23339b='<b>Bot\x20'+botID+_0x19a772(0x1b2);const _0x4eadeb=getKPIs(_0x19a772(0x208)),_0x265331=getKPIs('fiat',config[_0x19a772(0x11f)]),_0xd992a7=getKPIs(_0x19a772(0x181)),_0x553b19=getKPIs(_0x19a772(0x1e3),config[_0x19a772(0x11f)]);_0x23339b+=_0x19a772(0x1d2),_0x23339b+=_0x4eadeb[_0x19a772(0x171)]+_0x19a772(0x15f)+_0x4eadeb[_0x19a772(0x236)]+'\x0a',_0x23339b+=_0x4eadeb[_0x19a772(0x249)]+':\x20'+_0x4eadeb[_0x19a772(0x153)]+'%\x0a',_0x23339b+=_0x265331['leftTxt']+_0x19a772(0x15f)+_0x265331[_0x19a772(0x236)]+'\x0a',_0x23339b+=_0x265331[_0x19a772(0x249)]+':\x20'+_0x265331[_0x19a772(0x153)]+'%\x0a',_0x23339b+=_0xd992a7[_0x19a772(0x171)]+':\x20'+_0xd992a7[_0x19a772(0x236)]+'\x20('+config[_0x19a772(0x208)]+')\x0a',_0x23339b+=_0xd992a7[_0x19a772(0x249)]+':\x20'+_0xd992a7[_0x19a772(0x153)]+_0x19a772(0x221)+config[_0x19a772(0x208)]+')\x0a',_0x23339b+=_0x553b19['leftTxt']+':\x20'+_0x553b19[_0x19a772(0x236)]+'\x20('+config[_0x19a772(0x11f)]+')\x0a',_0x23339b+=_0x553b19[_0x19a772(0x249)]+':\x20'+_0x553b19[_0x19a772(0x153)]+_0x19a772(0x221)+config[_0x19a772(0x11f)]+')\x0a',_0x23339b+=_0x19a772(0x161),process[_0x19a772(0x258)]({'telegrammsg':_0x23339b},_0x45e50b=>{});}async function sendPortfolioTelegram(){const _0x429855=_0x261dd2;if(!coinsLoaded){process[_0x429855(0x258)]({'telegrammsg':_0x429855(0x21b)},_0x19a2ca=>{});return;}let _0x3840ad='';if(config[_0x429855(0x240)])_0x3840ad='<b>'+config[_0x429855(0x13a)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x3840ad='<b>Bot\x20'+botID+_0x429855(0x12d);_0x3840ad+='<pre>',_0x3840ad+=_0x429855(0x195),_0x3840ad+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x3840ad+='-------------------------------\x0a',currentCoins[_0x429855(0x270)](_0x52c0d5=>{const _0x2e9297=_0x429855;_0x3840ad+=_0x52c0d5[_0x2e9297(0x25e)][_0x2e9297(0x229)](0x7)+'|\x20'+formatPad(_0x52c0d5[_0x2e9297(0x1d0)],0x2,0x6)+'|\x20'+formatPad(_0x52c0d5[_0x2e9297(0x27a)],0x2,0x6)+'|\x20'+formatPad(_0x52c0d5['delta']*0x64,0x2,0x6)+'\x0a';}),_0x3840ad+=_0x429855(0x161),process[_0x429855(0x258)]({'telegrammsg':_0x3840ad},_0x13b22f=>{});}function formatPad(_0x4d3fa9,_0xc609da,_0x268bc9){const _0x82402d=_0x261dd2,_0x440a84=formatResultString(_0x4d3fa9,_0xc609da);return _0x440a84?_0x440a84['padStart'](_0x268bc9):''[_0x82402d(0x228)](_0x268bc9);}function logHistory(_0x73710a,_0x2835b9,_0x531bac=''){const _0x36c48e=_0x261dd2;let _0x4426e2={'time':getTimeStamp(),'type':_0x73710a,'event':_0x2835b9};dbLogs['get'](_0x36c48e(0x19e))['push'](_0x4426e2)[_0x36c48e(0x24d)]();if(_0x531bac=='')_0x531bac=_0x2835b9;proxyEmit(_0x36c48e(0x1b1),{'log':_0x4426e2,'summary':_0x531bac}),process[_0x36c48e(0x258)]({'telegram':{..._0x4426e2,'botname':config['botname'],'showname':config[_0x36c48e(0x240)]}},_0x173996=>{}),logger[_0x36c48e(0x253)](''+_0x4426e2[_0x36c48e(0x1b1)]);}function emitHistory(_0x2a162c={}){const _0x1a7606=_0x261dd2;Object[_0x1a7606(0x279)](_0x2a162c)['length']==0x0&&(_0x2a162c={'type':[_0x1a7606(0x170),_0x1a7606(0x1b1)],'event':'','page':0x1});if(_0x2a162c[_0x1a7606(0x166)][_0x1a7606(0x219)](_0x1a7606(0x1b1)))_0x2a162c[_0x1a7606(0x166)][_0x1a7606(0x11c)](_0x2a162c[_0x1a7606(0x166)][_0x1a7606(0x1a9)](_0x1a7606(0x1b1)),0x1,_0x1a7606(0x204),_0x1a7606(0x248),_0x1a7606(0x1f2));if(dbLogs[_0x1a7606(0x11b)](_0x1a7606(0x19e))[_0x1a7606(0x236)]()){let _0x467745=dbLogs['get']('logs')[_0x1a7606(0x10d)](_0x568af1=>{const _0x45eac7=_0x1a7606;if(_0x2a162c['type']['length']==0x0)return![];else return _0x2a162c[_0x45eac7(0x166)][_0x45eac7(0x219)](_0x568af1[_0x45eac7(0x166)]);})[_0x1a7606(0x10d)](_0x21eaca=>{const _0x4f1d89=_0x1a7606;if(_0x2a162c[_0x4f1d89(0x1b1)]=='')return!![];else return _0x21eaca[_0x4f1d89(0x1b1)][_0x4f1d89(0x24e)]()['includes'](_0x2a162c['event'][_0x4f1d89(0x24e)]());})[_0x1a7606(0x116)](_0x1a7606(0x1a3)),_0x581dbb=_0x467745[_0x1a7606(0x236)]()[_0x1a7606(0x119)];_0x467745=_0x467745[_0x1a7606(0x1bf)]()['slice']((_0x2a162c[_0x1a7606(0x15a)]-0x1)*logPageSize,_0x2a162c['page']*logPageSize-0x1)[_0x1a7606(0x1bf)]()[_0x1a7606(0x236)](),proxyEmit(_0x1a7606(0x1a0),{'logs':_0x467745,'total':_0x581dbb});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x459a9e){const _0x4ff037=_0x261dd2;if(dbLogs[_0x4ff037(0x11b)](_0x4ff037(0x19e))[_0x4ff037(0x236)]()){const _0x36f4b4=dbLogs[_0x4ff037(0x1cc)]('logs')[_0x4ff037(0x116)](_0x4ff037(0x1a3))[_0x4ff037(0x10d)](_0x4fab4a=>{const _0x114985=_0x4ff037;return _0x4fab4a['type']==_0x114985(0x170);})[_0x4ff037(0x236)]();dbLogs[_0x4ff037(0x1cc)](_0x4ff037(0x19e))[_0x4ff037(0x109)]()[_0x4ff037(0x24d)](),dbLogs[_0x4ff037(0x1cc)]('logs')[_0x4ff037(0x193)](_0x36f4b4)['write'](),emitHistory(_0x459a9e);}}async function pauseBot(_0x396c10=''){const _0x2db61b=_0x261dd2,_0x1efa2a=new Date()[_0x2db61b(0x1d9)]();if(!lastErrorShown||_0x1efa2a-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1efa2a;!lastBotPause?(lastBotPause=_0x1efa2a,consecutivePauses=0x1):(_0x1efa2a-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x2db61b(0x258)]({'stop':_0x2db61b(0x203)},_0x47f149=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x2db61b(0x1d9)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x396c10)_0x396c10+=_0x2db61b(0x235);logHistory(_0x2db61b(0x204),_0x396c10+_0x2db61b(0x18c)+pauseBotInterval/0xea60+_0x2db61b(0xed)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x3a66bb=_0x261dd2;process[_0x3a66bb(0x258)]({'stop':_0x3a66bb(0x1ed)},_0x134c3f=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5d4883,_0x432ab5){const _0x2f5744=_0x261dd2;if(_0x5d4883[_0x2f5744(0x156)]()[_0x2f5744(0x219)](_0x2f5744(0x1e2)))return logHistory(_0x2f5744(0x204),config[_0x2f5744(0x144)]+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration'),![];else{if(_0x5d4883['toString']()[_0x2f5744(0x219)](_0x2f5744(0x127)))return logHistory(_0x2f5744(0x204),config['exchange']+_0x2f5744(0x197)),![];else{if(_0x5d4883[_0x2f5744(0x156)]()[_0x2f5744(0x219)](_0x2f5744(0x176)))return logHistory('error',config[_0x2f5744(0x144)]+_0x2f5744(0x1df)),logHistory('error',_0x2f5744(0x101)),![];else await handleError(_0x5d4883,_0x432ab5);}}}async function handleError(_0x44eafc,_0x1a8abd,_0x3f8715=''){const _0x1056c7=_0x261dd2,_0x536923=config[_0x1056c7(0x144)]||'Exchange';if(_0x44eafc[_0x1056c7(0x156)]()[_0x1056c7(0x219)](_0x1056c7(0x11e)))await pauseBot(config[_0x1056c7(0x144)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x44eafc[_0x1056c7(0x156)]()[_0x1056c7(0x219)]('ExchangeNotAvailable'))await pauseBot(config[_0x1056c7(0x144)]+_0x1056c7(0x1e8));else{if(_0x44eafc[_0x1056c7(0x156)]()['includes'](_0x1056c7(0x267)))await pauseBot(config[_0x1056c7(0x144)]+_0x1056c7(0xf4));else{if(_0x44eafc[_0x1056c7(0x156)]()['includes'](_0x1056c7(0x1f1)))await pauseBot(config[_0x1056c7(0x144)]+_0x1056c7(0x1a1));else{if(_0x44eafc['toString']()['includes'](_0x1056c7(0xf9)))logHistory('error',_0x1a8abd+'\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x1056c7(0x204),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x44eafc[_0x1056c7(0x156)]()['includes'](_0x1056c7(0x128)))logHistory(_0x1056c7(0x204),_0x1a8abd+_0x1056c7(0x272)),logHistory('error',_0x1056c7(0x162)),await killBot();else{if(_0x44eafc[_0x1056c7(0x156)]()[_0x1056c7(0x219)](_0x1056c7(0x1e2)))logHistory(_0x1056c7(0x204),_0x1a8abd+_0x1056c7(0x235)+config[_0x1056c7(0x144)]+_0x1056c7(0x121)),logHistory(_0x1056c7(0x204),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x44eafc[_0x1056c7(0x156)]()[_0x1056c7(0x219)](_0x1056c7(0x127)))logHistory(_0x1056c7(0x204),_0x1a8abd+_0x1056c7(0x235)+config[_0x1056c7(0x144)]+_0x1056c7(0x16d)),logHistory(_0x1056c7(0x204),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x44eafc['toString']()[_0x1056c7(0x219)](_0x1056c7(0x176)))logHistory('error',_0x1a8abd+'\x20|\x20'+config[_0x1056c7(0x144)]+_0x1056c7(0x199)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x44eafc[_0x1056c7(0x156)]()[_0x1056c7(0x219)](_0x1056c7(0x1ba))?logHistory(_0x1056c7(0x204),_0x1a8abd+_0x1056c7(0x1b6)+_0x3f8715):(logger[_0x1056c7(0x253)](_0x1a8abd+_0x1056c7(0x130),_0x44eafc),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}function formatResult(_0x1dee24,_0x2ac4c8){return parseFloat(_0x1dee24['toFixed'](_0x2ac4c8));}function formatResultTruncate(_0x45c78b,_0x9a47f2){const _0xb94763=_0x261dd2;let _0x1d8f89=formatResultString(_0x45c78b,0xa),_0x5a82eb=_0x1d8f89[_0xb94763(0x1a9)]('.');return _0x5a82eb!=-0x1&&(_0x1d8f89=_0x1d8f89[_0xb94763(0x20e)](0x0,_0x5a82eb+_0x9a47f2+0x1)),Number(_0x1d8f89);}function formatResultString(_0x43cb81,_0x44b905){const _0x24dbc8=_0x261dd2;let _0x2aea13;if(!(''+_0x43cb81)[_0x24dbc8(0x219)]('e'))_0x2aea13=+(Math[_0x24dbc8(0x17a)](_0x43cb81+'e+'+_0x44b905)+'e-'+_0x44b905);else{let _0x54fa17=(''+_0x43cb81)[_0x24dbc8(0x16b)]('e'),_0x1c84d1='';+_0x54fa17[0x1]+_0x44b905>0x0&&(_0x1c84d1='+'),_0x2aea13=+(Math[_0x24dbc8(0x17a)](+_0x54fa17[0x0]+'e'+_0x1c84d1+(+_0x54fa17[0x1]+_0x44b905))+'e-'+_0x44b905);}return Number(_0x2aea13)[_0x24dbc8(0x18f)](_0x44b905);}function getServerTime(){const _0x1c3a5a=_0x261dd2,_0x5e25e7=new Date();return _0x5e25e7[_0x1c3a5a(0x210)]()+'/'+(_0x5e25e7['getMonth']()+0x1)[_0x1c3a5a(0x156)]()[_0x1c3a5a(0x228)](0x2,'0')+'/'+_0x5e25e7[_0x1c3a5a(0x14a)]()['toString']()[_0x1c3a5a(0x228)](0x2,'0')+'\x20'+_0x5e25e7[_0x1c3a5a(0x1b4)]()['toString']()['padStart'](0x2,'0')+':'+_0x5e25e7[_0x1c3a5a(0x168)]()[_0x1c3a5a(0x156)]()['padStart'](0x2,'0')+':'+_0x5e25e7[_0x1c3a5a(0x111)]()[_0x1c3a5a(0x156)]()[_0x1c3a5a(0x228)](0x2,'0');}function getTimeStamp(){const _0x14de38=_0x261dd2,_0x2fbb08=shiftedTime();return _0x2fbb08[_0x14de38(0x210)]()+'/'+(_0x2fbb08[_0x14de38(0x154)]()+0x1)[_0x14de38(0x156)]()['padStart'](0x2,'0')+'/'+_0x2fbb08[_0x14de38(0x14a)]()[_0x14de38(0x156)]()[_0x14de38(0x228)](0x2,'0')+'\x20'+_0x2fbb08[_0x14de38(0x1b4)]()[_0x14de38(0x156)]()[_0x14de38(0x228)](0x2,'0')+':'+_0x2fbb08[_0x14de38(0x168)]()[_0x14de38(0x156)]()[_0x14de38(0x228)](0x2,'0')+':'+_0x2fbb08[_0x14de38(0x111)]()[_0x14de38(0x156)]()[_0x14de38(0x228)](0x2,'0');}function getDate(){const _0x4f1c40=_0x261dd2,_0x7b1f70=shiftedTime();return _0x7b1f70[_0x4f1c40(0x210)]()+'/'+(_0x7b1f70['getMonth']()+0x1)[_0x4f1c40(0x156)]()['padStart'](0x2,'0')+'/'+_0x7b1f70[_0x4f1c40(0x14a)]()[_0x4f1c40(0x156)]()[_0x4f1c40(0x228)](0x2,'0');}function getHour(){const _0x2b45bc=_0x261dd2,_0xfb6b24=shiftedTime();return _0xfb6b24[_0x2b45bc(0x1b4)]()[_0x2b45bc(0x156)]()[_0x2b45bc(0x228)](0x2,'0');}function sleep(_0x576891){return new Promise(_0x3f2402=>setTimeout(_0x3f2402,_0x576891));}function shiftedTime(){const _0x232dab=_0x261dd2,_0x4c7eaa=new Date();let _0x1a501a=_0x4c7eaa;if(config&&config['timeshift']!==0x0)_0x1a501a=fns[_0x232dab(0x1ae)](_0x4c7eaa,{'hours':config[_0x232dab(0x140)]});return _0x1a501a;}function timer(_0x2b7a1c){const _0x337f7f=_0x261dd2,_0x5438b0=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x2b7a1c,_0x5438b0):console['log'](getTimeStamp()+_0x337f7f(0x1c6),_0x2b7a1c,(_0x5438b0-lasttime)/0x3e8),lasttime=_0x5438b0;}