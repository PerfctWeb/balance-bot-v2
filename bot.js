const _0x143886=_0x32a9;(function(_0x3ad0e6,_0x2228fb){const _0x44c94d=_0x32a9,_0x5bba6d=_0x3ad0e6();while(!![]){try{const _0x43f928=-parseInt(_0x44c94d(0x22a))/0x1*(-parseInt(_0x44c94d(0x171))/0x2)+-parseInt(_0x44c94d(0x20a))/0x3*(-parseInt(_0x44c94d(0x19a))/0x4)+parseInt(_0x44c94d(0x1d7))/0x5*(-parseInt(_0x44c94d(0x262))/0x6)+parseInt(_0x44c94d(0x23b))/0x7+-parseInt(_0x44c94d(0x1ae))/0x8*(parseInt(_0x44c94d(0x21b))/0x9)+-parseInt(_0x44c94d(0x19d))/0xa+parseInt(_0x44c94d(0x17a))/0xb*(parseInt(_0x44c94d(0x182))/0xc);if(_0x43f928===_0x2228fb)break;else _0x5bba6d['push'](_0x5bba6d['shift']());}catch(_0x1781e7){_0x5bba6d['push'](_0x5bba6d['shift']());}}}(_0x28a2,0x7d6fa));const _0x5b3600=function(){let _0x16c39b=!![];return function(_0x4d5edc,_0x19bc2e){const _0x4eb0f2=_0x16c39b?function(){if(_0x19bc2e){const _0xe79656=_0x19bc2e['apply'](_0x4d5edc,arguments);return _0x19bc2e=null,_0xe79656;}}:function(){};return _0x16c39b=![],_0x4eb0f2;};}(),_0x38a5af=_0x5b3600(this,function(){const _0x122e83=_0x32a9;return _0x38a5af[_0x122e83(0x186)]()[_0x122e83(0x1c8)]('(((.+)+)+)+$')[_0x122e83(0x186)]()[_0x122e83(0x209)](_0x38a5af)[_0x122e83(0x1c8)](_0x122e83(0x1b2));});_0x38a5af();'use strict';const ccxt=require(_0x143886(0x219)),low=require(_0x143886(0x187)),FileSync=require(_0x143886(0x1b7)),fs=require('fs'),fns=require(_0x143886(0x1df)),{WebsocketClient,DefaultLogger}=require(_0x143886(0x222)),Crypt=require('hybrid-crypto-js')[_0x143886(0x1b0)];let exchange,wsClient;global[_0x143886(0x1e0)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;function _0x32a9(_0x5315da,_0x22773f){const _0x37abc9=_0x28a2();return _0x32a9=function(_0x38a5af,_0x5b3600){_0x38a5af=_0x38a5af-0x15f;let _0x28a271=_0x37abc9[_0x38a5af];return _0x28a271;},_0x32a9(_0x5315da,_0x22773f);}let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x143886(0x1d0))[_0x143886(0x1c7)],botID=process['argv'][0x2]||_0x143886(0x170),pattern=/^[0-9]{3}$/;if(!pattern[_0x143886(0x224)](botID))return console[_0x143886(0x23c)](_0x143886(0x1ba)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x143886(0x243)](0x1);const configpath=_0x143886(0x1a3);!fs[_0x143886(0x23e)](configpath)&&fs[_0x143886(0x23f)](configpath);const configfile=configpath+_0x143886(0x1a7)+botID+_0x143886(0x1c4),logfile=configpath+_0x143886(0x1a7)+botID+_0x143886(0x232),performancefile=configpath+_0x143886(0x1a7)+botID+_0x143886(0x1e1),coinresultsfile=configpath+_0x143886(0x1a7)+botID+_0x143886(0x16f),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x143886(0x1b4)]({'logs':[]})[_0x143886(0x1e2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x143886(0x1b4)]({'data':[]})[_0x143886(0x1e2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x143886(0x1e2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x143886(0x1b4)]({'coins':[]})[_0x143886(0x1e2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x143886(0x21f),'symbol':_0x143886(0x208)},'usd':{'coin':'BTCUSDT','symbol':_0x143886(0x1ed)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x5956c2)=>{},'debug':(..._0x4dfc9f)=>{},'notice':(..._0x572580)=>{},'info':(..._0x448ba7)=>{},'warning':(..._0x160399)=>{},'error':async function(..._0x16f89f){const _0x3bfe57=_0x143886,_0x14d94b=new Date()[_0x3bfe57(0x250)]();if(!lastErrorShown||_0x14d94b-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3bfe57(0x250)](),logHistory(_0x3bfe57(0x1f3),_0x3bfe57(0x22c)+consecutivePauses+_0x3bfe57(0x1c9));let _0x2d2745='';if(_0x16f89f[0x0])_0x2d2745+=_0x16f89f[0x0];if(_0x16f89f[0x1]?.[_0x3bfe57(0x1f3)]?.['message'])_0x2d2745+=_0x3bfe57(0x183)+_0x16f89f[0x1][_0x3bfe57(0x1f3)]['message'];logging('WebSockets('+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x2d2745),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x143886(0x172),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x143886(0x235)]!=config['timeshift']&&updateTimeshift(settings[_0x143886(0x235)]);process['send']({'started':_0x143886(0x1ca)}),initializeProcessListeners();function proxyEmit(_0xcbcbc2,_0x54b364=null){const _0x2de8ca=_0x143886;process[_0x2de8ca(0x17f)]({'function':_0xcbcbc2,'args':_0x54b364});}function initializeProcessListeners(){const _0x12544b=_0x143886;process['on'](_0x12544b(0x1dd),_0x4c0289=>{const _0x431d0f=_0x12544b;switch(Object['keys'](_0x4c0289)[0x0]){case _0x431d0f(0x235):_0x4c0289[_0x431d0f(0x235)]!=undefined&&(settings[_0x431d0f(0x235)]=_0x4c0289[_0x431d0f(0x235)],updateTimeshift(settings['timeshift']));break;case _0x431d0f(0x21d):switch(_0x4c0289[_0x431d0f(0x21d)]){case _0x431d0f(0x261):initclient();break;case _0x431d0f(0x236):emitHistory(_0x4c0289[_0x431d0f(0x229)]);break;case _0x431d0f(0x1a2):getPortfolio(_0x4c0289['args']);break;case _0x431d0f(0x1ac):storeConfiguration(_0x4c0289[_0x431d0f(0x229)]);break;case _0x431d0f(0x201):storeHeadless(_0x4c0289[_0x431d0f(0x229)]);break;case _0x431d0f(0x1a1):getStartingBalances();break;case _0x431d0f(0x248):placeOrder(_0x4c0289[_0x431d0f(0x229)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x49028f=_0x143886;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config[_0x49028f(0x1f1)]);let _0x317c3f=await loadSymbols();_0x317c3f&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x4acc1c,_0x2b9366){const _0x1bcf3d=_0x143886,_0xbba5c9=ccxt[config['exchange']];let _0x54f61f;switch(config['exchange']){case _0x1bcf3d(0x222):_0x54f61f=_0x1bcf3d(0x1b6);break;case _0x1bcf3d(0x18a):_0x54f61f=_0x1bcf3d(0x206);break;default:_0x54f61f=_0x1bcf3d(0x1b6);}exchange=new _0xbba5c9({'apiKey':_0x4acc1c,'secret':_0x2b9366,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x4acc1c,'api_secret':_0x2b9366,'beautify':!![],'wsUrl':_0x54f61f},logger),config[_0x1bcf3d(0x202)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x1bcf3d(0x1cb),'symbol':_0x1bcf3d(0x21a)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x14b0be=_0x143886;let _0x17a6e6;try{markets=await exchange[_0x14b0be(0x1ec)](),allSymbols=exchange['symbols'][_0x14b0be(0x190)](_0x94e098=>{const _0xad26f1=_0x14b0be;return _0x94e098['includes'](_0xad26f1(0x162))&&!_0x94e098[_0xad26f1(0x1c1)](_0xad26f1(0x1c2));}),_0x17a6e6=!![];}catch(_0x433f97){await handleError(_0x433f97,'loadSymbols()'),_0x17a6e6=![];}return _0x17a6e6;}async function initbot(){const _0xd420b1=_0x143886;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2ab7fa=dbCoinResults[_0xd420b1(0x173)](_0xd420b1(0x249))[_0xd420b1(0x1c6)]();if(_0x2ab7fa['length']==0x0)await resetCoinResults();}async function initclient(){const _0x2b47a9=_0x143886;proxyEmit(_0x2b47a9(0x1f8),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x2b47a9(0x24c),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x5d87fe=_0x143886;wsinitialized=![];ws1&&(ws1[_0x5d87fe(0x178)](_0x2e2bc9=>{try{wsClient['closeWs'](_0x2e2bc9);}catch(_0xd3b8ab){}}),ws1=[]);if(ws2){try{wsClient[_0x5d87fe(0x161)](ws2);}catch(_0x3a507d){}ws2=null;}}async function initws(){const _0x4f49e1=_0x143886;cleanws();let _0x2a6035=[];currentCoins[_0x4f49e1(0x178)](_0x8e99a0=>{const _0x2f19e5=_0x4f49e1;if(_0x8e99a0['coin']!='BTC')_0x2a6035[_0x2f19e5(0x19b)](noslash(_0x8e99a0[_0x2f19e5(0x1a8)]));});if(!_0x2a6035[_0x4f49e1(0x1c1)](stablecoins[_0x4f49e1(0x1f4)]['coin']))_0x2a6035[_0x4f49e1(0x19b)](stablecoins[_0x4f49e1(0x1f4)][_0x4f49e1(0x18f)]);if(!_0x2a6035[_0x4f49e1(0x1c1)](stablecoins[_0x4f49e1(0x218)]['coin']))_0x2a6035['push'](stablecoins['usd'][_0x4f49e1(0x18f)]);if(!_0x2a6035[_0x4f49e1(0x1c1)](_0x4f49e1(0x241)))_0x2a6035[_0x4f49e1(0x19b)]('BNBBTC');try{_0x2a6035['forEach']((_0x56d888,_0x33f92d)=>{const _0x6e2661=_0x4f49e1;ws1[_0x33f92d]=wsClient[_0x6e2661(0x234)](_0x56d888,'1m');}),ws2=wsClient[_0x4f49e1(0x198)](),wsClient['on'](_0x4f49e1(0x245),_0x4dd4c9=>{const _0x4fbd66=_0x4f49e1;if(!Array[_0x4fbd66(0x25e)](_0x4dd4c9)&&!_0x4dd4c9['wsKey'][_0x4fbd66(0x1c1)](_0x4fbd66(0x1fc))){if(_0x4dd4c9['eventType']===_0x4fbd66(0x214)){global[_0x4fbd66(0x1e0)][_0x4dd4c9['kline']['symbol']]=_0x4dd4c9['kline'][_0x4fbd66(0x257)];return;}}else{if(!Array[_0x4fbd66(0x25e)](_0x4dd4c9)&&_0x4dd4c9['wsKey'][_0x4fbd66(0x1c1)]('userData')){if(_0x4dd4c9[_0x4fbd66(0x1d8)][_0x4fbd66(0x1c1)](_0x4fbd66(0x254))){updateNumberCoins(_0x4dd4c9);return;}}}}),wsClient['on']('reconnected',async _0x343010=>{currentCoins=await getCoins();});}catch(_0x4cc6ec){await handleError(_0x4cc6ec,'initws()');}let _0x2cee5f;while(_0x2cee5f!=currentCoins[_0x4f49e1(0x255)]-0x1){_0x2cee5f=0x0,currentCoins['forEach'](_0x1ddfff=>{const _0x28a75a=_0x4f49e1;if(_0x1ddfff[_0x28a75a(0x18f)]!='BTC'&&global[_0x28a75a(0x1e0)][noslash(_0x1ddfff[_0x28a75a(0x1a8)])])_0x2cee5f++;});let _0x19a92c=Math[_0x4f49e1(0x1ab)](_0x2cee5f/(currentCoins[_0x4f49e1(0x255)]-0x1)*0x64);proxyEmit('coin-loading-progress',_0x19a92c),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x20c604=_0x143886;let _0x50538c=0x0,_0x9b96ef=0x0;try{_0x50538c=global['ticker'][stablecoins['eur'][_0x20c604(0x18f)]],_0x9b96ef=global[_0x20c604(0x1e0)][stablecoins[_0x20c604(0x218)]['coin']];}catch(_0x183e04){await handleError(_0x183e04,'getFiat()');}return{'eur':Number(_0x50538c),'usd':Number(_0x9b96ef)};}async function setStartDatePerformance(_0x198912){const _0x330a56=_0x143886,_0x571c82=fns[_0x330a56(0x1b8)](new Date(_0x198912[_0x330a56(0x1bb)]),_0x330a56(0x252));let _0x450629=[];_0x450629[stablecoins[_0x330a56(0x1f4)][_0x330a56(0x18f)]]=await getCloses(stablecoins[_0x330a56(0x1f4)][_0x330a56(0x1a8)],new Date(_0x198912[_0x330a56(0x1bb)]),0x1),_0x450629[stablecoins[_0x330a56(0x218)][_0x330a56(0x18f)]]=await getCloses(stablecoins[_0x330a56(0x218)][_0x330a56(0x1a8)],new Date(_0x198912['startdate']),0x1);let _0x5667e0,_0x505d72=[];_0x198912[_0x330a56(0x199)][_0x330a56(0x178)](_0x3a2830=>{const _0x40a534=_0x330a56;!_0x3a2830['excluded']&&_0x505d72[_0x40a534(0x19b)]({'coin':_0x3a2830[_0x40a534(0x18f)],'number':_0x3a2830[_0x40a534(0x231)],'price':_0x3a2830['startprice']});}),_0x5667e0={'date':_0x571c82,'eur':_0x450629[stablecoins[_0x330a56(0x1f4)][_0x330a56(0x18f)]][0x0],'usd':_0x450629[stablecoins[_0x330a56(0x218)][_0x330a56(0x18f)]][0x0],'coins':_0x505d72};let _0xda3a74=dbPerformance[_0x330a56(0x173)](_0x330a56(0x216))[_0x330a56(0x260)]({'date':_0x571c82})['value']();_0xda3a74?dbPerformance[_0x330a56(0x173)](_0x330a56(0x216))[_0x330a56(0x260)]({'date':_0x571c82})['assign'](_0x5667e0)['write']():dbPerformance[_0x330a56(0x173)]('data')[_0x330a56(0x19b)](_0x5667e0)[_0x330a56(0x1e2)](),_0xda3a74=dbPerformance[_0x330a56(0x173)]('data')[_0x330a56(0x181)](_0x330a56(0x177))[_0x330a56(0x1c6)](),_0xda3a74[_0x330a56(0x178)](_0x560d23=>{const _0x5943c5=_0x330a56;_0x560d23[_0x5943c5(0x177)]<_0x571c82&&dbPerformance[_0x5943c5(0x173)]('data')[_0x5943c5(0x1da)]({'date':_0x560d23[_0x5943c5(0x177)]})[_0x5943c5(0x1e2)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x539a55){const _0xfd5d20=_0x143886;let _0x400f7a,_0x31c09b=[];logHistory(_0xfd5d20(0x221),_0xfd5d20(0x168)),_0x539a55['portfolio'][_0xfd5d20(0x178)](_0xdb0be7=>{const _0x3bb7df=_0xfd5d20;if(_0xdb0be7['coin']!=_0x3bb7df(0x162)&&!_0xdb0be7[_0x3bb7df(0x1e7)])_0x31c09b[_0x3bb7df(0x19b)]({'coin':_0xdb0be7[_0x3bb7df(0x18f)],'symbol':_0xdb0be7['symbol']});});let _0x252435=[];try{const _0x310fa5=fns[_0xfd5d20(0x1b8)](fns['parseISO'](_0x539a55[_0xfd5d20(0x1bb)][_0xfd5d20(0x1fe)](/\//g,'-')),_0xfd5d20(0x1f7));for(const _0x36ee61 of _0x31c09b){if(_0x36ee61['coin']!=_0xfd5d20(0x162))_0x400f7a=await exchange[_0xfd5d20(0x1b5)](_0x36ee61[_0xfd5d20(0x1a8)],Date['parse'](_0x310fa5));_0x400f7a['forEach'](_0x3f7d3f=>{const _0x277d1b=_0xfd5d20,_0x6ec424=_0x36ee61[_0x277d1b(0x1a8)][_0x277d1b(0x1c1)](_0x277d1b(0x220)),_0x4999bc=fns[_0x277d1b(0x1b8)](fns['parseISO'](_0x3f7d3f[_0x277d1b(0x18b)]),_0x277d1b(0x1bc)),_0x23a49d=fns[_0x277d1b(0x1b8)](fns[_0x277d1b(0x256)](_0x3f7d3f['datetime']),_0x277d1b(0x252));let _0x4801d2;if(_0x3f7d3f['side']=='buy'&&_0x6ec424==![])_0x4801d2=_0x3f7d3f[_0x277d1b(0x263)];if(_0x3f7d3f[_0x277d1b(0x176)]==_0x277d1b(0x17d)&&_0x6ec424==!![])_0x4801d2=-_0x3f7d3f[_0x277d1b(0x263)]*_0x3f7d3f[_0x277d1b(0x246)];if(_0x3f7d3f[_0x277d1b(0x176)]==_0x277d1b(0x23a)&&_0x6ec424==![])_0x4801d2=-_0x3f7d3f[_0x277d1b(0x263)];if(_0x3f7d3f[_0x277d1b(0x176)]==_0x277d1b(0x23a)&&_0x6ec424==!![])_0x4801d2=_0x3f7d3f[_0x277d1b(0x263)]*_0x3f7d3f['price'];_0x252435[_0x277d1b(0x19b)]({'timestamp':_0x4999bc,'date':_0x23a49d,'coin':_0x36ee61[_0x277d1b(0x18f)],'symbol':_0x36ee61[_0x277d1b(0x1a8)],'type':_0x3f7d3f[_0x277d1b(0x200)],'side':_0x3f7d3f['side'],'reverse':_0x6ec424,'amount':formatResult(_0x3f7d3f[_0x277d1b(0x265)],0x8),'filled':formatResult(_0x3f7d3f[_0x277d1b(0x265)],0x8),'coinamount':formatResult(_0x4801d2,0x8),'price':formatResult(_0x3f7d3f[_0x277d1b(0x246)],0x8)});let _0x487360;if(_0x3f7d3f[_0x277d1b(0x176)]=='buy'&&_0x6ec424==![])_0x487360=-_0x3f7d3f[_0x277d1b(0x263)]*_0x3f7d3f[_0x277d1b(0x246)];if(_0x3f7d3f['side']==_0x277d1b(0x17d)&&_0x6ec424==!![])_0x487360=_0x3f7d3f['amount'];if(_0x3f7d3f[_0x277d1b(0x176)]==_0x277d1b(0x23a)&&_0x6ec424==![])_0x487360=_0x3f7d3f[_0x277d1b(0x263)]*_0x3f7d3f[_0x277d1b(0x246)];if(_0x3f7d3f[_0x277d1b(0x176)]==_0x277d1b(0x23a)&&_0x6ec424==!![])_0x487360=-_0x3f7d3f[_0x277d1b(0x263)];_0x252435['push']({'date':_0x23a49d,'coin':_0x277d1b(0x162),'coinamount':formatResult(_0x487360,0x8)});});}_0x252435[_0xfd5d20(0x196)]((_0x1a0218,_0x5b5922)=>_0x1a0218[_0xfd5d20(0x1e4)]>_0x5b5922[_0xfd5d20(0x1e4)]?0x1:_0x5b5922[_0xfd5d20(0x1e4)]>_0x1a0218[_0xfd5d20(0x1e4)]?-0x1:0x0),dbLogs[_0xfd5d20(0x173)](_0xfd5d20(0x1d4))[_0xfd5d20(0x1da)]()[_0xfd5d20(0x1e2)](),_0x252435[_0xfd5d20(0x178)](_0x2def7e=>{const _0x2106c1=_0xfd5d20;let _0x2f8468;_0x2def7e[_0x2106c1(0x18f)]!=_0x2106c1(0x162)&&(_0x2f8468={'time':_0x2def7e['timestamp'],'type':_0x2106c1(0x1de),'event':_0x2106c1(0x167)+_0x2def7e[_0x2106c1(0x1a8)]+'\x20'+_0x2def7e[_0x2106c1(0x176)]+'\x20#'+_0x2def7e[_0x2106c1(0x263)]+'\x20@'+_0x2def7e[_0x2106c1(0x246)]},dbLogs[_0x2106c1(0x173)](_0x2106c1(0x1d4))[_0x2106c1(0x19b)](_0x2f8468)[_0x2106c1(0x1e2)]());});const _0x58261e=fns[_0xfd5d20(0x211)]({'start':new Date(_0x539a55['startdate']),'end':new Date()})[_0xfd5d20(0x16d)](_0x4afd47=>fns[_0xfd5d20(0x1b8)](_0x4afd47,_0xfd5d20(0x252)));let _0x3136dd=[];_0x539a55[_0xfd5d20(0x199)]['forEach'](_0x1bca64=>{const _0x2f52b4=_0xfd5d20;if(!_0x1bca64['excluded']){_0x3136dd[_0x1bca64[_0x2f52b4(0x18f)]]=[];let _0x4d25d5=_0x1bca64['startnumber'];_0x58261e[_0x2f52b4(0x178)]((_0x2ec137,_0x1f84ff)=>{const _0x993b96=_0x2f52b4;let _0x41fef0=_0x252435[_0x993b96(0x190)](_0x7f4acd=>_0x7f4acd['coin']==_0x1bca64[_0x993b96(0x18f)]&&_0x7f4acd[_0x993b96(0x177)]==_0x2ec137);if(_0x41fef0[_0x993b96(0x255)]!=0x0){let _0x5823d1=_0x41fef0[_0x993b96(0x247)]((_0x411dcb,_0x3f11f6)=>{const _0x143842=_0x993b96;return _0x411dcb+=_0x3f11f6[_0x143842(0x25c)],_0x411dcb;},0x0);_0x4d25d5+=_0x5823d1;}_0x3136dd[_0x1bca64[_0x993b96(0x18f)]][_0x2ec137]=_0x4d25d5;});}});const _0x98f9ea=[..._0x31c09b];_0x98f9ea[_0xfd5d20(0x19b)]({'coin':stablecoins[_0xfd5d20(0x1f4)][_0xfd5d20(0x18f)],'symbol':stablecoins[_0xfd5d20(0x1f4)][_0xfd5d20(0x1a8)]}),_0x98f9ea['push']({'coin':stablecoins['usd'][_0xfd5d20(0x18f)],'symbol':stablecoins[_0xfd5d20(0x218)][_0xfd5d20(0x1a8)]});let _0x9f4dc4=[];for(const _0x9ff69 of _0x98f9ea){_0x9f4dc4[_0x9ff69['coin']]=await getCloses(_0x9ff69[_0xfd5d20(0x1a8)],new Date(_0x539a55['startdate']));}dbPerformance[_0xfd5d20(0x173)](_0xfd5d20(0x216))[_0xfd5d20(0x1da)]()[_0xfd5d20(0x1e2)](),_0x58261e['forEach']((_0x54392f,_0x2304de)=>{const _0x511efd=_0xfd5d20;let _0x511dfa,_0xb1fb41=[];_0x2304de==0x0?(_0x539a55[_0x511efd(0x199)][_0x511efd(0x178)](_0x29a0c0=>{const _0x447385=_0x511efd;!_0x29a0c0[_0x447385(0x1e7)]&&_0xb1fb41[_0x447385(0x19b)]({'coin':_0x29a0c0[_0x447385(0x18f)],'number':_0x29a0c0['startnumber'],'price':_0x29a0c0[_0x447385(0x17e)]});}),_0x511dfa={'date':_0x54392f,'eur':_0x9f4dc4[stablecoins[_0x511efd(0x1f4)][_0x511efd(0x18f)]][_0x2304de],'usd':_0x9f4dc4[stablecoins[_0x511efd(0x218)][_0x511efd(0x18f)]][_0x2304de],'coins':_0xb1fb41}):(_0x539a55[_0x511efd(0x199)][_0x511efd(0x178)](_0x5c1764=>{const _0x218bcb=_0x511efd;!_0x5c1764[_0x218bcb(0x1e7)]&&_0xb1fb41[_0x218bcb(0x19b)]({'coin':_0x5c1764[_0x218bcb(0x18f)],'number':_0x3136dd[_0x5c1764[_0x218bcb(0x18f)]][_0x54392f],'price':_0x5c1764['coin']==_0x218bcb(0x162)?0x1:_0x9f4dc4[_0x5c1764[_0x218bcb(0x18f)]][_0x2304de]});}),_0x511dfa={'date':_0x54392f,'eur':_0x9f4dc4[stablecoins['eur']['coin']][_0x2304de],'usd':_0x9f4dc4[stablecoins[_0x511efd(0x218)][_0x511efd(0x18f)]][_0x2304de],'coins':_0xb1fb41}),dbPerformance[_0x511efd(0x173)](_0x511efd(0x216))[_0x511efd(0x19b)](_0x511dfa)[_0x511efd(0x1e2)]();}),emitPerformance(),await resetCoinResults();for(let _0x38c097 of _0x252435){_0x38c097[_0xfd5d20(0x18f)]!=_0xfd5d20(0x162)&&await updateCoinResults(_0x38c097);}logHistory(_0xfd5d20(0x221),_0xfd5d20(0x20f));}catch(_0x19e1f7){await handleError(_0x19e1f7,'recreateHistory()');}}async function getCloses(_0x38d13b,_0x104e36,_0x5980de=undefined){const _0xbd88c4=_0x143886,_0x30917e='1d';let _0x1b123a,_0x39fee3;const _0x4a5f30=fns[_0xbd88c4(0x1f0)](new Date(),_0x104e36)+0x1;try{const _0x3fa035=exchange[_0xbd88c4(0x210)]()-_0x4a5f30*0x18*0xe10*0x3e8;_0x1b123a=await exchange['fetchOHLCV'](_0x38d13b,_0x30917e,_0x3fa035,_0x5980de),_0x39fee3=await exchange[_0xbd88c4(0x185)](_0x38d13b);}catch(_0x12425e){await handleError(_0x12425e,_0xbd88c4(0x238));}let _0x3f8715=ohlcvToCloses(_0x1b123a);return _0x3f8715[_0xbd88c4(0x19b)](_0x39fee3[_0x38d13b][_0xbd88c4(0x1dc)]),_0x3f8715;}function ohlcvToCloses(_0x313cd2){const _0x5231e2=_0x143886;let _0x533318=[];return _0x313cd2[_0x5231e2(0x178)](function(_0x2d1b37){const _0x4c7a43=_0x5231e2;_0x533318[_0x4c7a43(0x19b)](_0x2d1b37[0x4]);}),_0x533318;}function getConfiguration(_0x2ce5d1){const _0x49e884=_0x143886;let _0x58de80=dbConfig[_0x49e884(0x173)](_0x49e884(0x1a0))[_0x49e884(0x260)]({'botID':_0x2ce5d1})[_0x49e884(0x1c6)]();if(_0x58de80){let _0x3e4391=![];!_0x58de80['exchange']&&(_0x58de80={..._0x58de80,'exchange':_0x49e884(0x222)},_0x3e4391=!![]),!_0x58de80[_0x49e884(0x197)]&&(_0x58de80={..._0x58de80,'ordertype':_0x49e884(0x259)},_0x3e4391=!![]),!_0x58de80[_0x49e884(0x22e)]&&(_0x58de80={..._0x58de80,'timeout':0x14},_0x3e4391=!![]),_0x3e4391&&(_0x58de80={'botID':_0x58de80[_0x49e884(0x164)],'exchange':_0x58de80[_0x49e884(0x202)],'apiKey':_0x58de80[_0x49e884(0x23d)],'apiSecret':_0x58de80[_0x49e884(0x1f1)],'botname':_0x58de80[_0x49e884(0x1bf)],'threshold':_0x58de80[_0x49e884(0x160)],'ordertype':_0x58de80[_0x49e884(0x197)],'timeout':_0x58de80[_0x49e884(0x22e)],'startdate':_0x58de80[_0x49e884(0x1bb)],'recreate':_0x58de80[_0x49e884(0x1fd)],'timeshift':_0x58de80[_0x49e884(0x235)],'headless':_0x58de80[_0x49e884(0x194)],'cooldown':_0x58de80[_0x49e884(0x25d)],'portfolio':_0x58de80[_0x49e884(0x199)]},dbConfig[_0x49e884(0x173)](_0x49e884(0x1a0))[_0x49e884(0x1da)]()[_0x49e884(0x1e2)](),dbConfig[_0x49e884(0x173)](_0x49e884(0x1a0))[_0x49e884(0x19b)](_0x58de80)['write']());}else _0x58de80={'botID':_0x2ce5d1,'exchange':_0x49e884(0x222),'apiKey':'','apiSecret':'','botname':'Bot\x20'+_0x2ce5d1,'threshold':'3','ordertype':_0x49e884(0x259),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x49e884(0x235)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x58de80;}function emittedConfiguration(){const _0x370dfb=_0x143886;let _0x5b8383;return config[_0x370dfb(0x23d)]==''?_0x5b8383=config:_0x5b8383={...config,'apiKey':_0x370dfb(0x22f),'apiSecret':'************'},_0x5b8383;}function getSettings(){const _0x1c1c5e=_0x143886;return dbSettings[_0x1c1c5e(0x173)]('settings')['value']();}function _0x28a2(){const _0x35e096=['valid','Binance\x20API\x20key\x20is\x20invalid','Order:\x20','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','cancelOrder','ExchangeNotAvailable','getPortfolio()','getSeconds','map','secure','-results.json','001','1094XFDoBb','sha256','get','fee','breakeven','side','date','forEach','realized','11gHXKQh','Now\x20\x20\x20:\x20','abs','buy','startprice','send','Limit\x20(high-margin)','sortBy','7461048ERRlnr','\x20-\x20','API-key\x20format\x20invalid','fetchTickers','toString','lowdb','assign','Order(s)\x20not\x20validated\x20after\x20','binanceus','datetime','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','getCoins()','fees','coin','filter','eventType','AuthenticationError','add','headless','\x20order:\x20','sort','ordertype','subscribeSpotUserDataStream','portfolio','3495656NrQpLO','push','/BTC','785230MKABIh','reverse','stringify','bot','getStartingBalances','getPortfolio','./config/','Limit\x20(low-margin)','target','\x20hour','bot-','symbol','Order\x20filled:\x20','distribution','round','storeConfiguration','configuration-stored','8eHYYiO','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','Crypt','splice','(((.+)+)+)+$','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','defaults','fetchOrders','wss://stream.binance.com:9443','lowdb/adapters/FileSync','format','min','Error:\x20Invalid\x20argument\x20','startdate','yyyy/MM/dd\x20HH:mm:ss','time','limit-high','botname','getMinutes','includes','DAI/','getMonth','-config.json','OrderNotFound','value','version','search',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','running','BTCBUSD','BNB','\x20>\x20','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','buys','./version.json','\x20|\x20Error\x20details:\x20','number','Order(s)\x20filled\x20-\x20balancing\x20resumed','logs','toLowerCase','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','5YwPmva','wsMarket','currency','remove','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','last','message','order','date-fns','ticker','-performance.json','write','ask','timestamp','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','limit-low','excluded','bid','Market','fetchBalance','Executed\x20','loadMarkets','BTC/USDT','differenceInSeconds','getFullYear','differenceInCalendarDays','apiSecret','sells','error','eur',':\x20Bot\x20','Delta\x20:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','configuration','asset','event-history','orderStatus','userData','recreate','replace','privateKey','type','storeHeadless','exchange','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','accumulatedQuantity','orderType','wss://stream.binance.us:9443','createOrder','BTC/EUR','constructor','3toMmUS','executionReport','performance','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','entries','Performance\x20recreation\x20completed\x20successfully','milliseconds','eachDayOfInterval','getDate','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','kline','Binance\x20API\x20secret\x20is\x20invalid','data','\x20orders\x20in\x20less\x20than\x20','usd','ccxt','BTC/BUSD','3312567yGAHuw','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','function','getHours','BTCEUR','BTC/','success','binance','Order\x20amount\x20is\x20invalid:\x20','test','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','padStart','orderId','InsufficientFunds','args','173HmLLCF','split','WebSockets(','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','timeout','************','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','startnumber','-events.json','LIMIT','subscribeSpotKline','timeshift','emitHistory','has','getCloses()','decrypt','sell','820092FBdiDK','log','apiKey','existsSync','mkdirSync','event','BNBBTC','DDoSProtection','exit','total','formattedMessage','price','reduce','placeOrder','coins','trade','keys','balances','page','limits','cost','getTime','starting-balances','yyyy/MM/dd','toFixed','spot','length','parseISO','close','Invalid\x20quantity','market','InvalidNonce','RequestTimeout','coinamount','cooldown','isArray','Pauses:\x20','find','initclient','4482498LVaxcE','amount','MIN_NOTIONAL','filled','delta','parse','threshold','closeWs','BTC','\x20minutes\x20-\x20balancing\x20resumed','botID'];_0x28a2=function(){return _0x35e096;};return _0x28a2();}function getSecure(){const _0x2b2956=_0x143886;return dbSecure[_0x2b2956(0x173)](_0x2b2956(0x16e))['value']()||{};}function updateTimeshift(_0x161efc){const _0x15ca6a=_0x143886;let _0x530197=dbConfig['get'](_0x15ca6a(0x1a0))[_0x15ca6a(0x260)]({'botID':botID})[_0x15ca6a(0x1c6)]();_0x530197&&dbConfig[_0x15ca6a(0x173)](_0x15ca6a(0x1a0))[_0x15ca6a(0x260)]({'botID':botID})['assign']({'timeshift':_0x161efc})[_0x15ca6a(0x1e2)](),config[_0x15ca6a(0x235)]=_0x161efc,proxyEmit(_0x15ca6a(0x1f8),emittedConfiguration());}async function storeConfiguration(_0x3255ee){const _0x23362f=_0x143886;let _0x43801d=dbConfig[_0x23362f(0x173)]('bot')[_0x23362f(0x260)]({'botID':botID})[_0x23362f(0x1c6)]();_0x3255ee={..._0x3255ee,'apiKey':crypt[_0x23362f(0x239)](secure[_0x23362f(0x1ff)],_0x3255ee['apiKey'])[_0x23362f(0x1dd)],'apiSecret':crypt[_0x23362f(0x239)](secure[_0x23362f(0x1ff)],_0x3255ee[_0x23362f(0x1f1)])['message']};if(_0x43801d){if(_0x3255ee[_0x23362f(0x23d)]==_0x23362f(0x22f))_0x3255ee[_0x23362f(0x23d)]=config['apiKey'];if(_0x3255ee[_0x23362f(0x1f1)]==_0x23362f(0x22f))_0x3255ee[_0x23362f(0x1f1)]=config[_0x23362f(0x1f1)];dbConfig['get']('bot')[_0x23362f(0x260)]({'botID':botID})[_0x23362f(0x188)](_0x3255ee)['write']();}else dbConfig['get'](_0x23362f(0x1a0))[_0x23362f(0x19b)](_0x3255ee)[_0x23362f(0x1e2)](),process[_0x23362f(0x17f)]({'status':'enabled','live':_0x23362f(0x1ca)});config={..._0x3255ee};if(config[_0x23362f(0x1fd)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x23362f(0x17f)]({'botname':_0x3255ee[_0x23362f(0x1bf)]}),proxyEmit(_0x23362f(0x1ad)),reset();}async function storeHeadless(_0x3d7f3e){const _0x22dc81=_0x143886,_0x2a0bb0={...config,'headless':_0x3d7f3e['headless']};let _0x410c56=dbConfig[_0x22dc81(0x173)]('bot')[_0x22dc81(0x260)]({'botID':botID})[_0x22dc81(0x1c6)]();_0x410c56&&dbConfig[_0x22dc81(0x173)](_0x22dc81(0x1a0))['find']({'botID':botID})['assign'](_0x2a0bb0)['write'](),config={..._0x2a0bb0},proxyEmit(_0x22dc81(0x1f8),emittedConfiguration());}function noslash(_0x550be8){return _0x550be8['replace']('/','');}function updateNumberCoins(_0x5dfb6e){const _0x52494d=_0x143886;_0x5dfb6e[_0x52494d(0x191)]&&_0x5dfb6e[_0x52494d(0x191)]=='outboundAccountPosition'&&_0x5dfb6e['balances']['forEach'](_0x55d608=>{const _0x50d925=_0x52494d;let _0x1bb38d=currentCoins[_0x50d925(0x260)](_0x25e3fe=>_0x25e3fe[_0x50d925(0x18f)]==_0x55d608[_0x50d925(0x1f9)]);if(_0x1bb38d)_0x1bb38d['number']=Number(_0x55d608['availableBalance']);}),_0x5dfb6e[_0x52494d(0x191)]&&_0x5dfb6e[_0x52494d(0x191)]==_0x52494d(0x20b)&&(_0x5dfb6e[_0x52494d(0x205)]==_0x52494d(0x233)&&_0x5dfb6e[_0x52494d(0x1fb)]=='FILLED'&&lastOrders[_0x52494d(0x178)](_0x3bb940=>{const _0x222bc4=_0x52494d;if(_0x3bb940[_0x222bc4(0x227)]==_0x5dfb6e[_0x222bc4(0x227)]){if(_0x3bb940[_0x222bc4(0x19e)])_0x3bb940[_0x222bc4(0x265)]=_0x5dfb6e['accumulatedQuantity']*_0x3bb940[_0x222bc4(0x246)];else _0x3bb940['filled']=_0x5dfb6e[_0x222bc4(0x204)];}}));}async function getCoins(_0x3ad68f=!![]){const _0x15c887=_0x143886;let _0xe93c5b,_0x3cc932=[],_0x474a81=[],_0x86d4e6=[];try{_0xe93c5b=await exchange[_0x15c887(0x1ea)](),mybalances=_0xe93c5b[_0x15c887(0x244)];if(!_0x3ad68f)for(const [_0x43e06b,_0x259154]of Object[_0x15c887(0x20e)](mybalances)){_0x86d4e6[_0x15c887(0x19b)](_0x43e06b);}else config[_0x15c887(0x199)]['forEach'](_0x392fac=>{const _0xfb92ca=_0x15c887;if(!_0x392fac[_0xfb92ca(0x1e7)])_0x86d4e6[_0xfb92ca(0x19b)](_0x392fac[_0xfb92ca(0x18f)]);});for(const [_0x270450,_0x3fb1a2]of Object['entries'](mybalances)){if(_0x86d4e6['includes'](_0x270450)){if((_0x3fb1a2[_0x15c887(0x186)]()!=0x0||config[_0x15c887(0x199)][_0x15c887(0x260)](_0x1655cc=>_0x1655cc[_0x15c887(0x18f)]==_0x270450))&&(allSymbols[_0x15c887(0x1c1)](_0x270450+_0x15c887(0x19c))||_0x270450==_0x15c887(0x162)))_0x474a81[_0x15c887(0x19b)]({'coin':_0x270450,'symbol':_0x270450+_0x15c887(0x19c),'reverse':![],'number':_0x3fb1a2}),_0x270450!='BTC'&&_0x3cc932[_0x15c887(0x19b)](_0x270450+_0x15c887(0x19c));else(_0x3fb1a2[_0x15c887(0x186)]()!=0x0||config[_0x15c887(0x199)]['find'](_0x489f8a=>_0x489f8a[_0x15c887(0x18f)]==_0x270450))&&allSymbols[_0x15c887(0x1c1)]('BTC/'+_0x270450)&&(_0x474a81[_0x15c887(0x19b)]({'coin':_0x270450,'symbol':'BTC/'+_0x270450,'reverse':!![],'number':_0x3fb1a2}),_0x270450!=_0x15c887(0x162)&&_0x3cc932[_0x15c887(0x19b)]('BTC/'+_0x270450));}}}catch(_0x92d3e9){if(!_0x3ad68f){if(_0x92d3e9[_0x15c887(0x186)]()['includes'](_0x15c887(0x184)))return logHistory('error',_0x15c887(0x166)),![];else{if(_0x92d3e9[_0x15c887(0x186)]()[_0x15c887(0x1c1)](_0x15c887(0x192)))return logHistory('error',_0x15c887(0x203)),![];else{if(_0x92d3e9[_0x15c887(0x186)]()['includes'](_0x15c887(0x1e5)))return logHistory(_0x15c887(0x1f3),_0x15c887(0x215)),![];else await handleError(_0x92d3e9,'getCoins()');}}}else await handleError(_0x92d3e9,_0x15c887(0x18d));}return _0x474a81;}async function getPortfolio(_0x44054f){const _0x44753e=_0x143886;let _0x577e3e=[],_0xb348aa=[],_0x4887bc,_0x4306a5=[],_0x3348c8,_0x20499c;_0x44054f['apiKey']===_0x44753e(0x22f)||_0x44054f[_0x44753e(0x1f1)]===_0x44753e(0x22f)?(_0x3348c8=config[_0x44753e(0x23d)],_0x20499c=config[_0x44753e(0x1f1)]):(_0x3348c8=_0x44054f[_0x44753e(0x23d)],_0x20499c=_0x44054f[_0x44753e(0x1f1)]);await initExchange(_0x3348c8,_0x20499c);let _0x2e69e6=await loadSymbols();if(_0x2e69e6){_0x4306a5=await getCoins(![]);if(_0x4306a5===![])proxyEmit(_0x44753e(0x199),![]);else{_0x4306a5[_0x44753e(0x178)](_0x53c921=>{const _0x15354d=_0x44753e;_0x577e3e[_0x15354d(0x19b)](_0x53c921[_0x15354d(0x1a8)]);});try{_0xb348aa=await exchange[_0x44753e(0x185)](_0x577e3e);}catch(_0x1e9ffa){await handleError(_0x1e9ffa,_0x44753e(0x16b));}_0x4306a5['forEach'](_0xc61a86=>{const _0x23ed3d=_0x44753e;_0xc61a86[_0x23ed3d(0x18f)]!=_0x23ed3d(0x162)?_0x4887bc=_0xc61a86[_0x23ed3d(0x19e)]?0x1/_0xb348aa[_0xc61a86[_0x23ed3d(0x1a8)]]['last']:_0xb348aa[_0xc61a86[_0x23ed3d(0x1a8)]][_0x23ed3d(0x1dc)]:_0x4887bc=0x1,_0xc61a86[_0x23ed3d(0x246)]=formatResult(_0x4887bc,0x8);}),proxyEmit(_0x44753e(0x199),_0x4306a5);}}else proxyEmit(_0x44753e(0x199),![]);}function checkMinimums(_0x5b5066){const _0x2df511=_0x143886;let _0x571e8f=!![];const _0x2d4226=!_0x5b5066['reverse']?markets[_0x5b5066['symbol']]['limits'][_0x2df511(0x263)]['min']:markets[_0x5b5066[_0x2df511(0x1a8)]][_0x2df511(0x24e)][_0x2df511(0x24f)]['min'],_0x3c320d=!_0x5b5066[_0x2df511(0x19e)]?markets[_0x5b5066['symbol']][_0x2df511(0x24e)][_0x2df511(0x24f)][_0x2df511(0x1b9)]:markets[_0x5b5066['symbol']][_0x2df511(0x24e)]['amount'][_0x2df511(0x1b9)];if(Math[_0x2df511(0x17c)](_0x5b5066[_0x2df511(0x24a)])<_0x2d4226)_0x571e8f=![];if(Math[_0x2df511(0x17c)](_0x5b5066[_0x2df511(0x24a)])*_0x5b5066[_0x2df511(0x1dc)]<_0x3c320d)_0x571e8f=![];return _0x571e8f;}async function getBalances(){const _0xd24abc=_0x143886;let _0x5be3a6=0x0,_0x4bf185;const _0x41e959=config['threshold'];currentCoins[_0xd24abc(0x178)](_0x144430=>{const _0x507a50=_0xd24abc;if(_0x144430[_0x507a50(0x18f)]!=_0x507a50(0x162)){let _0x20d790=global[_0x507a50(0x1e0)][noslash(_0x144430['symbol'])];_0x4bf185=_0x144430[_0x507a50(0x19e)]?0x1/_0x20d790:_0x20d790;}else _0x4bf185=0x1;let _0x5c9f2e=_0x144430[_0x507a50(0x1d2)]*_0x4bf185;_0x5be3a6+=_0x5c9f2e,_0x144430[_0x507a50(0x1dc)]=formatResult(Number(_0x4bf185),0x8),_0x144430['value']=_0x5c9f2e;}),currentCoins[_0xd24abc(0x178)](_0xdc3447=>{const _0x254ed5=_0xd24abc;let _0x283293=config[_0x254ed5(0x199)][_0x254ed5(0x260)](_0x6992b9=>_0x6992b9['coin']==_0xdc3447[_0x254ed5(0x18f)]),_0x7680cf=Number(_0x283293[_0x254ed5(0x1aa)]),_0x538b16=_0xdc3447[_0x254ed5(0x1c6)]/_0x5be3a6*0x64,_0x58c2f3=_0x7680cf*_0x5be3a6/0x64/_0xdc3447['last']-_0xdc3447[_0x254ed5(0x1d2)];_0xdc3447['distribution']=formatResult(_0x538b16,0x3),_0xdc3447[_0x254ed5(0x1a5)]=formatResult(_0x7680cf,0x3),_0xdc3447['trade']=formatResult(_0x58c2f3,0x8),_0xdc3447[_0x254ed5(0x176)]='',_0xdc3447['valid']='';if(_0xdc3447[_0x254ed5(0x18f)]!=_0x254ed5(0x162)){if(_0xdc3447[_0x254ed5(0x1aa)]>_0x7680cf)_0xdc3447['side']=_0x254ed5(0x23a),_0xdc3447['valid']=checkMinimums(_0xdc3447);else _0xdc3447[_0x254ed5(0x1aa)]<_0x7680cf&&(_0xdc3447[_0x254ed5(0x176)]=_0x254ed5(0x17d),_0xdc3447[_0x254ed5(0x165)]=checkMinimums(_0xdc3447));}_0xdc3447['delta']=_0xdc3447[_0x254ed5(0x1aa)]/_0xdc3447['target']-0x1;}),currentCoins['sort']((_0x5d06d5,_0x48a89a)=>_0x5d06d5['delta']<_0x48a89a['delta']?0x1:_0x48a89a[_0xd24abc(0x266)]<_0x5d06d5[_0xd24abc(0x266)]?-0x1:0x0);const _0x6fa95e=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x6fa95e['eur'],'usd':_0x6fa95e['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x41e959},proxyEmit(_0xd24abc(0x24c),{'serverversion':serverversion,'balances':lastBalances});if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x41e959});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x20be68=_0x143886;if(!lastBalances)return;let _0x180622=await getStartingBalances(![]),_0x147ded=[],_0x1eb09c=[],_0x46b49c;JSON[_0x20be68(0x15f)](lastBalances[_0x20be68(0x199)])['forEach'](_0x4c9365=>{const _0x4887ba=_0x20be68;let _0x4dffb2={'coin':_0x4c9365[_0x4887ba(0x18f)],'number':_0x4c9365[_0x4887ba(0x1d2)],'price':_0x4c9365[_0x4887ba(0x1dc)]};_0x147ded[_0x4887ba(0x19b)](_0x4dffb2);if(!_0x180622[_0x4887ba(0x249)]||!_0x180622[_0x4887ba(0x249)][_0x4887ba(0x260)](_0xef5017=>_0xef5017[_0x4887ba(0x18f)]==_0x4c9365['coin']&&_0xef5017[_0x4887ba(0x1d2)]!=0x0))_0x1eb09c[_0x4887ba(0x19b)](_0x4dffb2);});const _0x54e95d=await getFiat();_0x46b49c={'date':lastBalances['time'][_0x20be68(0x22b)]('\x20')[0x0],'eur':_0x54e95d['eur'],'usd':_0x54e95d['usd'],'coins':_0x147ded};let _0xed84b6=dbPerformance[_0x20be68(0x173)]('data')[_0x20be68(0x260)]({'date':_0x46b49c[_0x20be68(0x177)]})[_0x20be68(0x1c6)]();_0xed84b6?dbPerformance['get'](_0x20be68(0x216))['find']({'date':_0x46b49c[_0x20be68(0x177)]})['assign'](_0x46b49c)[_0x20be68(0x1e2)]():dbPerformance[_0x20be68(0x173)](_0x20be68(0x216))[_0x20be68(0x19b)](_0x46b49c)[_0x20be68(0x1e2)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x406a77=_0x143886;if(dbPerformance[_0x406a77(0x237)](_0x406a77(0x216))[_0x406a77(0x1c6)]()){let _0x4345dc=dbPerformance[_0x406a77(0x173)](_0x406a77(0x216))['sortBy']('date')[_0x406a77(0x1c6)]();proxyEmit(_0x406a77(0x20c),_0x4345dc),lastPerformanceEmitted=getDate();}else proxyEmit(_0x406a77(0x20c),[]);}async function getStartingBalances(_0x228c1d=!![]){const _0x147e53=_0x143886;let _0x583466=dbPerformance['get'](_0x147e53(0x216))[_0x147e53(0x260)]({'date':config['startdate']})[_0x147e53(0x1c6)]();config[_0x147e53(0x23d)]!=''&&!_0x583466&&(await setStartDatePerformance(config),_0x583466=dbPerformance['get']('data')[_0x147e53(0x260)]({'date':config[_0x147e53(0x1bb)]})[_0x147e53(0x1c6)]());if(config[_0x147e53(0x23d)]==''||!_0x583466)return{};let _0x57a720=0x0,_0x36f666=0x0,_0x42e84b=0x0,_0x4291b5=[],_0x2474d2=0x0;config['portfolio'][_0x147e53(0x178)](_0x19d386=>{const _0x5d28f3=_0x147e53;!_0x19d386[_0x5d28f3(0x1e7)]&&(_0x4291b5[_0x2474d2]={'coin':_0x19d386['coin'],'symbol':_0x19d386[_0x5d28f3(0x1a8)],'number':_0x19d386[_0x5d28f3(0x231)],'price':_0x19d386['startprice']},_0x57a720+=_0x19d386['startprice']*_0x19d386[_0x5d28f3(0x231)],_0x36f666+=_0x19d386[_0x5d28f3(0x17e)]*_0x19d386[_0x5d28f3(0x231)]*_0x583466[_0x5d28f3(0x1f4)],_0x42e84b+=_0x19d386[_0x5d28f3(0x17e)]*_0x19d386[_0x5d28f3(0x231)]*_0x583466[_0x5d28f3(0x218)],_0x2474d2++);});let _0x2b7616={'btc':_0x57a720,'eur':_0x36f666,'usd':_0x42e84b,'coins':_0x4291b5};if(_0x228c1d)proxyEmit(_0x147e53(0x251),_0x2b7616);return _0x2b7616;}function headlessMode(_0x2a4362){const _0x594de7=_0x143886;let _0x41e901=_0x2a4362[_0x594de7(0x199)],_0x1996c3=_0x2a4362[_0x594de7(0x160)],_0x5a74b4=[];for(let _0x1c1513 of _0x41e901){if(_0x1c1513[_0x594de7(0x18f)]!='BTC'){if(_0x1c1513[_0x594de7(0x1aa)]/_0x1c1513[_0x594de7(0x1a5)]-0x1>=_0x1996c3/0x64){if(_0x1c1513[_0x594de7(0x165)])_0x5a74b4['push'](_0x1c1513);}else{if(_0x1c1513[_0x594de7(0x1aa)]/_0x1c1513[_0x594de7(0x1a5)]-0x1<=-_0x1996c3/0x64){if(_0x1c1513[_0x594de7(0x165)])_0x5a74b4[_0x594de7(0x19b)](_0x1c1513);}}}}_0x5a74b4[_0x594de7(0x255)]>0x0&&placeOrder(_0x5a74b4);}function symbolToCoin(_0x3fbbce){const _0x5a83b9=_0x143886;let _0x2736fb;if(_0x3fbbce['includes'](_0x5a83b9(0x19c)))_0x2736fb=_0x3fbbce[_0x5a83b9(0x1fe)](_0x5a83b9(0x19c),'');if(_0x3fbbce['includes'](_0x5a83b9(0x220)))_0x2736fb=_0x3fbbce[_0x5a83b9(0x1fe)]('BTC/','');return _0x2736fb;}async function validateOrders(_0x14db5a=0x0){const _0x25d7b9=_0x143886;let _0x5293f3=[],_0x5e301f=config[_0x25d7b9(0x197)]==_0x25d7b9(0x259)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x25d7b9(0x22e)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x25d7b9(0x178)](_0x369185=>{const _0x2238aa=_0x25d7b9;let _0x278135=previousCoins[_0x2238aa(0x260)](_0x1407c1=>_0x1407c1[_0x2238aa(0x18f)]==symbolToCoin(_0x369185[_0x2238aa(0x1a8)])),_0x335620=currentCoins[_0x2238aa(0x260)](_0x5ccccc=>_0x5ccccc[_0x2238aa(0x18f)]==symbolToCoin(_0x369185['symbol'])),_0x3ab7ca,_0x50d77f;_0x369185[_0x2238aa(0x176)]==_0x2238aa(0x17d)&&!_0x369185[_0x2238aa(0x19e)]||_0x369185['side']==_0x2238aa(0x23a)&&_0x369185[_0x2238aa(0x19e)]?(_0x3ab7ca=_0x278135[_0x2238aa(0x1d2)]+0.9*_0x369185[_0x2238aa(0x265)],_0x50d77f=_0x278135[_0x2238aa(0x1d2)]+1.1*_0x369185[_0x2238aa(0x265)]):(_0x3ab7ca=_0x278135['number']-1.1*_0x369185['filled'],_0x50d77f=_0x278135[_0x2238aa(0x1d2)]-0.9*_0x369185[_0x2238aa(0x265)]);const _0x18841f=_0x369185[_0x2238aa(0x265)]!=0x0&&_0x335620[_0x2238aa(0x1d2)]>=_0x3ab7ca&&_0x335620[_0x2238aa(0x1d2)]<=_0x50d77f;_0x5293f3[_0x2238aa(0x19b)](_0x18841f);if(_0x18841f&&config[_0x2238aa(0x197)]!=_0x2238aa(0x259)){if(_0x369185[_0x2238aa(0x19e)])logHistory('order','Order\x20filled:\x20'+_0x369185[_0x2238aa(0x1a8)]+'\x20'+_0x369185[_0x2238aa(0x176)]+'\x20#'+formatResult(_0x369185['filled']/_0x369185[_0x2238aa(0x246)],0x8)+'\x20@'+formatResult(_0x369185[_0x2238aa(0x246)],0x8));else logHistory(_0x2238aa(0x1de),_0x2238aa(0x1a9)+_0x369185['symbol']+'\x20'+_0x369185[_0x2238aa(0x176)]+'\x20#'+formatResult(_0x369185['filled'],0x8)+'\x20@'+formatResult(_0x369185['price'],0x8));}}),_0x5293f3[_0x25d7b9(0x178)]((_0x14c9c4,_0x4dacca)=>{const _0x4b1501=_0x25d7b9;if(_0x14c9c4)lastOrders[_0x4b1501(0x1b1)](_0x4dacca,0x1);});if(_0x14db5a<_0x5e301f&&_0x5293f3[_0x25d7b9(0x1c1)](![])){if(_0x14db5a==0x0){config[_0x25d7b9(0x197)]==_0x25d7b9(0x259)?logHistory(_0x25d7b9(0x1f3),_0x25d7b9(0x18c)):logHistory(_0x25d7b9(0x1f3),_0x25d7b9(0x1b3));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x14db5a);},0xa*0x3e8);}else{(_0x14db5a==0x1||_0x14db5a==Math[_0x25d7b9(0x1ab)](_0x5e301f/0x2)||_0x14db5a==_0x5e301f-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x14db5a);},validateOrderInterval);}}else{lockOrders=![];if(_0x14db5a>0x0&&!_0x5293f3[_0x25d7b9(0x1c1)](![]))config[_0x25d7b9(0x197)]==_0x25d7b9(0x259)?logHistory(_0x25d7b9(0x221),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x25d7b9(0x221),_0x25d7b9(0x1d3));else _0x14db5a>0x0&&_0x5293f3[_0x25d7b9(0x1c1)](![])&&(config[_0x25d7b9(0x197)]=='market'?logHistory(_0x25d7b9(0x221),_0x25d7b9(0x189)+Math[_0x25d7b9(0x1ab)](_0x5e301f*validateOrderInterval/0xea60)+_0x25d7b9(0x163)):(lastOrders[_0x25d7b9(0x178)](async _0x1d8356=>{const _0x23f477=_0x25d7b9;try{const _0x497a51=await exchange[_0x23f477(0x169)](_0x1d8356[_0x23f477(0x227)],_0x1d8356[_0x23f477(0x1a8)]);}catch(_0x4edd52){if(_0x4edd52[_0x23f477(0x186)]()['includes'](_0x23f477(0x1c5))){}else await handleError(_0x4edd52,'cancelOrder()');}}),logHistory(_0x25d7b9(0x221),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x25d7b9(0x1ab)](_0x5e301f*validateOrderInterval/0xea60)+_0x25d7b9(0x163))));}}async function resetCoinResults(){const _0x363cc7=_0x143886;dbCoinResults[_0x363cc7(0x173)](_0x363cc7(0x249))['remove']()[_0x363cc7(0x1e2)]();let _0x13a38c=await getStartingBalances(![]);_0x13a38c['coins']['forEach'](_0x1e61ff=>{const _0x50b026=_0x363cc7,_0x4b0476=_0x1e61ff[_0x50b026(0x1a8)][_0x50b026(0x1c1)]('BTC/');if(_0x1e61ff[_0x50b026(0x18f)]!=_0x50b026(0x162)){let _0x112c7e={'coin':_0x1e61ff[_0x50b026(0x18f)],'number':_0x1e61ff[_0x50b026(0x1d2)],'breakeven':_0x1e61ff[_0x50b026(0x246)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x50b026(0x173)](_0x50b026(0x249))[_0x50b026(0x19b)](_0x112c7e)[_0x50b026(0x1e2)]();}});}async function updateCoinResults(_0x6eefae){const _0x1abb99=_0x143886;let _0x5420f7,_0x429893,_0x2c663a,_0x418ebb,_0x23ff06,_0x5dd331,_0x385071=dbCoinResults[_0x1abb99(0x173)](_0x1abb99(0x249))[_0x1abb99(0x260)]({'coin':_0x6eefae[_0x1abb99(0x18f)]})[_0x1abb99(0x1c6)]();if(!_0x385071)return;if(_0x6eefae[_0x1abb99(0x174)]&&_0x6eefae['fee'][_0x1abb99(0x1d9)]=='BTC')_0x5420f7=_0x6eefae[_0x1abb99(0x174)]['cost'];else{if(_0x6eefae['fee']&&_0x6eefae[_0x1abb99(0x174)][_0x1abb99(0x1d9)]==_0x1abb99(0x1cc))_0x5420f7=_0x6eefae['fee'][_0x1abb99(0x24f)]*global[_0x1abb99(0x1e0)][_0x1abb99(0x241)];else _0x5420f7=0.001*_0x6eefae[_0x1abb99(0x265)];}const _0x1fab1c=_0x6eefae[_0x1abb99(0x1a8)][_0x1abb99(0x1c1)](_0x1abb99(0x220));_0x1fab1c&&(_0x5dd331={'coin':_0x6eefae[_0x1abb99(0x18f)],'symbol':_0x6eefae[_0x1abb99(0x1a8)],'filled':_0x6eefae[_0x1abb99(0x265)]*_0x6eefae[_0x1abb99(0x246)],'side':_0x6eefae[_0x1abb99(0x176)]==_0x1abb99(0x23a)?_0x1abb99(0x17d):_0x1abb99(0x23a),'price':0x1/_0x6eefae[_0x1abb99(0x246)]},_0x6eefae={..._0x5dd331});_0x6eefae[_0x1abb99(0x176)]==_0x1abb99(0x17d)?_0x2c663a=(_0x385071[_0x1abb99(0x175)]*_0x385071[_0x1abb99(0x1d2)]+_0x6eefae[_0x1abb99(0x246)]*_0x6eefae['filled'])/(_0x385071[_0x1abb99(0x1d2)]+_0x6eefae[_0x1abb99(0x265)]):_0x2c663a=(_0x385071[_0x1abb99(0x175)]*_0x385071[_0x1abb99(0x1d2)]-_0x6eefae['price']*_0x6eefae[_0x1abb99(0x265)])/(_0x385071[_0x1abb99(0x1d2)]-_0x6eefae[_0x1abb99(0x265)]);_0x6eefae[_0x1abb99(0x176)]==_0x1abb99(0x17d)?_0x418ebb=_0x385071[_0x1abb99(0x179)]:_0x418ebb=_0x385071[_0x1abb99(0x179)]+(_0x6eefae[_0x1abb99(0x246)]-_0x385071[_0x1abb99(0x175)])*_0x6eefae[_0x1abb99(0x265)];_0x429893=_0x6eefae['side']=='sell'?_0x385071[_0x1abb99(0x1d2)]-_0x6eefae['filled']:_0x385071['number']+_0x6eefae[_0x1abb99(0x265)],_0x23ff06=(_0x6eefae['price']-_0x2c663a)*_0x429893;let _0x17a53f={'coin':_0x6eefae[_0x1abb99(0x18f)],'number':_0x429893,'breakeven':formatResult(_0x2c663a,0x8),'realized':formatResult(_0x418ebb,0x8),'unrealized':formatResult(_0x23ff06,0x8),'fees':formatResult(_0x385071[_0x1abb99(0x18e)]+_0x5420f7,0x8),'sells':_0x6eefae[_0x1abb99(0x176)]==_0x1abb99(0x23a)?_0x385071['sells']+0x1:_0x385071[_0x1abb99(0x1f2)],'buys':_0x6eefae['side']==_0x1abb99(0x17d)?_0x385071[_0x1abb99(0x1cf)]+0x1:_0x385071[_0x1abb99(0x1cf)]};dbCoinResults[_0x1abb99(0x173)](_0x1abb99(0x249))[_0x1abb99(0x260)]({'coin':_0x6eefae[_0x1abb99(0x18f)]})[_0x1abb99(0x188)](_0x17a53f)['write']();}async function placeOrder(_0x308ff2){const _0xfe44c8=_0x143886,_0x3e8095=config[_0xfe44c8(0x197)]=='market'?_0xfe44c8(0x259):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0xfe44c8(0x15f)](JSON[_0xfe44c8(0x19f)](currentCoins));for(const _0x3d8691 of _0x308ff2){let _0x1867f2,_0x3815e2,_0x1d4ede,_0x2e014e,_0x3b4bb8,_0x137c09=_0x3d8691[_0xfe44c8(0x1a8)];try{const _0x5cb541=await exchange['fetchTickers'](_0x137c09),_0x3b53e8=_0x5cb541[_0x137c09];_0x1867f2=_0x3b53e8[_0xfe44c8(0x1dc)],_0x3815e2=_0x3b53e8[_0xfe44c8(0x1e8)],_0x1d4ede=_0x3b53e8[_0xfe44c8(0x1e3)];_0x3d8691[_0xfe44c8(0x19e)]?(_0x2e014e=_0x3d8691[_0xfe44c8(0x176)]==_0xfe44c8(0x17d)?_0xfe44c8(0x23a):_0xfe44c8(0x17d),_0x3b4bb8=Math[_0xfe44c8(0x17c)](_0x3d8691['trade'])/_0x1867f2):(_0x2e014e=_0x3d8691[_0xfe44c8(0x176)],_0x3b4bb8=Math[_0xfe44c8(0x17c)](_0x3d8691[_0xfe44c8(0x24a)]));_0x3e8095=='limit'&&(config[_0xfe44c8(0x197)]==_0xfe44c8(0x1be)&&(_0x1867f2=_0x2e014e=='buy'?_0x3815e2:_0x1d4ede),config[_0xfe44c8(0x197)]==_0xfe44c8(0x1e6)&&(_0x1867f2=_0x2e014e==_0xfe44c8(0x17d)?_0x1d4ede:_0x3815e2));_0x3b4bb8=formatResult(_0x3b4bb8,0x8),_0x1867f2=formatResult(_0x1867f2,0x8);const _0x2a14bf=await exchange[_0xfe44c8(0x207)](_0x137c09,_0x3e8095,_0x2e014e,_0x3b4bb8,_0x1867f2);lastOrders['push']({'orderId':_0x2a14bf['id'],'symbol':_0x137c09,'side':_0x2e014e,'reverse':_0x3d8691[_0xfe44c8(0x19e)],'amount':_0x3d8691['reverse']?_0x2a14bf['amount']*_0x2a14bf['price']:_0x2a14bf[_0xfe44c8(0x263)],'filled':_0x3d8691[_0xfe44c8(0x19e)]?_0x2a14bf[_0xfe44c8(0x265)]*_0x2a14bf['price']:_0x2a14bf[_0xfe44c8(0x265)],'price':_0x2a14bf[_0xfe44c8(0x246)]});const _0x5b0e66=_0x3e8095=='market'?_0xfe44c8(0x1e9):config['ordertype']==_0xfe44c8(0x1be)?_0xfe44c8(0x180):_0xfe44c8(0x1a4);if(_0x3e8095==_0xfe44c8(0x259))logHistory(_0xfe44c8(0x1de),_0x5b0e66+_0xfe44c8(0x195)+_0x137c09+'\x20'+_0x2e014e+'\x20#'+formatResult(_0x2a14bf[_0xfe44c8(0x265)],0x8)+'\x20@'+formatResult(_0x2a14bf[_0xfe44c8(0x246)],0x8));else logHistory('order',_0x5b0e66+'\x20order:\x20'+_0x137c09+'\x20'+_0x2e014e+'\x20#'+formatResult(_0x2a14bf[_0xfe44c8(0x263)],0x8)+'\x20@'+formatResult(_0x2a14bf[_0xfe44c8(0x246)],0x8));_0x2a14bf[_0xfe44c8(0x18f)]=_0x3d8691[_0xfe44c8(0x18f)],await updateCoinResults(_0x2a14bf);if(config['cooldown']!=0x0){let _0x127cbc=null;if(cooldownTracker['length']==config['cooldown']-0x1)_0x127cbc=cooldownTracker['shift']();const _0x581d7a=getTimeStamp();cooldownTracker['push'](_0x581d7a);if(_0x127cbc){const _0xbfcc6c=fns[_0xfe44c8(0x1ee)](new Date(_0x581d7a),new Date(_0x127cbc));_0xbfcc6c<cooldownInterval&&(logHistory('error',_0xfe44c8(0x1eb)+config[_0xfe44c8(0x25d)]+_0xfe44c8(0x217)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0xfe44c8(0x1a6)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x1b3b07){if(_0x1b3b07[_0xfe44c8(0x186)]()[_0xfe44c8(0x1c1)](_0xfe44c8(0x264)))logHistory('error',_0xfe44c8(0x1ce)+_0x137c09);else{if(_0x1b3b07['toString']()[_0xfe44c8(0x1c1)](_0xfe44c8(0x258)))logHistory(_0xfe44c8(0x1f3),_0xfe44c8(0x223)+_0x137c09);else await handleError(_0x1b3b07,'placeOrder()');}}}if(lastOrders[_0xfe44c8(0x255)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0xfe44c8(0x194)]&&(config[_0xfe44c8(0x197)]==_0xfe44c8(0x259)?logHistory(_0xfe44c8(0x1f3),_0xfe44c8(0x225)):logHistory(_0xfe44c8(0x1f3),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled'));else coolingDown&&(!config[_0xfe44c8(0x194)]&&logHistory('error',_0xfe44c8(0x230)));}}function logHistory(_0x531cc6,_0x45a54b,_0x403da4=''){const _0x23f59f=_0x143886;let _0x2e2287={'time':getTimeStamp(),'type':_0x531cc6,'event':_0x45a54b};dbLogs['get'](_0x23f59f(0x1d4))[_0x23f59f(0x19b)](_0x2e2287)[_0x23f59f(0x1e2)]();if(_0x403da4=='')_0x403da4=_0x45a54b;proxyEmit(_0x23f59f(0x240),{'log':_0x2e2287,'summary':_0x403da4}),process[_0x23f59f(0x17f)]({'telegram':_0x2e2287}),logging(''+_0x2e2287['event']);}function emitHistory(_0x452ce4={}){const _0x407709=_0x143886;Object[_0x407709(0x24b)](_0x452ce4)[_0x407709(0x255)]==0x0&&(_0x452ce4={'type':['order',_0x407709(0x240)],'event':'','page':0x1});if(_0x452ce4['type'][_0x407709(0x1c1)](_0x407709(0x240)))_0x452ce4[_0x407709(0x200)][_0x407709(0x1b1)](_0x452ce4[_0x407709(0x200)]['indexOf'](_0x407709(0x240)),0x1,_0x407709(0x1f3),'success');if(dbLogs[_0x407709(0x237)]('logs')[_0x407709(0x1c6)]()){let _0x3d44b1=dbLogs[_0x407709(0x173)](_0x407709(0x1d4))[_0x407709(0x190)](_0x5679ec=>{const _0x23bcf0=_0x407709;if(_0x452ce4['type']['length']==0x0)return![];else return _0x452ce4['type']['includes'](_0x5679ec[_0x23bcf0(0x200)]);})['filter'](_0x2fcb3a=>{const _0x39f12a=_0x407709;if(_0x452ce4[_0x39f12a(0x240)]=='')return!![];else return _0x2fcb3a[_0x39f12a(0x240)][_0x39f12a(0x1d5)]()[_0x39f12a(0x1c1)](_0x452ce4[_0x39f12a(0x240)]['toLowerCase']());})['sortBy'](_0x407709(0x1bd)),_0x5c9e2a=_0x3d44b1[_0x407709(0x1c6)]()[_0x407709(0x255)];_0x3d44b1=_0x3d44b1[_0x407709(0x19e)]()['slice']((_0x452ce4['page']-0x1)*logPageSize,_0x452ce4[_0x407709(0x24d)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x407709(0x1fa),{'logs':_0x3d44b1,'total':_0x5c9e2a});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x46ed56){const _0x9712a5=_0x143886,_0x13ab38=new Date()[_0x9712a5(0x250)]();console[_0x9712a5(0x23c)](_0x9712a5(0x17b),_0x13ab38),console[_0x9712a5(0x23c)](_0x9712a5(0x1f6),_0x13ab38-lastBotPause),console['log'](_0x9712a5(0x25f),consecutivePauses);if(!lastBotPause)lastBotPause=new Date()[_0x9712a5(0x250)](),consecutivePauses=0x1;else{if(_0x13ab38-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process['exit'](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x46ed56),botPaused=![],reset();}}async function handleError(_0x224d2e,_0x5103d3,_0x4d6f09=''){const _0x2cd794=_0x143886;if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x242)))logHistory(_0x2cd794(0x1f3),_0x5103d3+_0x2cd794(0x1af)),await pauseBot(pauseBotInterval);else{if(_0x224d2e[_0x2cd794(0x186)]()['includes'](_0x2cd794(0x16a)))logHistory(_0x2cd794(0x1f3),_0x5103d3+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x25b)))logHistory(_0x2cd794(0x1f3),_0x5103d3+'\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),await pauseBot(pauseBotInterval);else{if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)]('API-key\x20format\x20invalid'))logHistory(_0x2cd794(0x1f3),_0x5103d3+_0x2cd794(0x22d)),logHistory('error',_0x2cd794(0x1d6)),process[_0x2cd794(0x243)](0x4d);else{if(_0x224d2e[_0x2cd794(0x186)]()['includes'](_0x2cd794(0x192)))logHistory(_0x2cd794(0x1f3),_0x5103d3+_0x2cd794(0x21c)),logHistory(_0x2cd794(0x1f3),_0x2cd794(0x1d6)),process[_0x2cd794(0x243)](0x4d);else{if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x1e5)))logHistory(_0x2cd794(0x1f3),_0x5103d3+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x2cd794(0x1f3),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2cd794(0x243)](0x4d);else{if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x1db)))logHistory(_0x2cd794(0x1f3),_0x5103d3+_0x2cd794(0x213)),logHistory(_0x2cd794(0x1f3),_0x2cd794(0x1d6)),process[_0x2cd794(0x243)](0x4d);else{if(_0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x25a)))logHistory(_0x2cd794(0x1f3),_0x5103d3+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x2cd794(0x1f3),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x2cd794(0x243)](0x4d);else _0x224d2e[_0x2cd794(0x186)]()[_0x2cd794(0x1c1)](_0x2cd794(0x228))?logHistory(_0x2cd794(0x1f3),_0x5103d3+'\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order'):(logHistory(_0x2cd794(0x1f3),_0x5103d3+_0x2cd794(0x20d)),logging(_0x5103d3+_0x2cd794(0x1d1),_0x224d2e),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x5b9303,_0x202df7){const _0x279e1f=_0x143886;return parseFloat(_0x5b9303[_0x279e1f(0x253)](_0x202df7));}function logging(_0x14db86,_0x56b319=''){const _0x2da54=_0x143886;console[_0x2da54(0x23c)](getTimeStamp()+_0x2da54(0x1f5)+botID+_0x2da54(0x1cd)+_0x14db86,_0x56b319);}function getServerTime(){const _0x4574b9=_0x143886,_0x4b4730=new Date();return _0x4b4730[_0x4574b9(0x1ef)]()+'/'+(_0x4b4730['getMonth']()+0x1)[_0x4574b9(0x186)]()[_0x4574b9(0x226)](0x2,'0')+'/'+_0x4b4730['getDate']()['toString']()[_0x4574b9(0x226)](0x2,'0')+'\x20'+_0x4b4730[_0x4574b9(0x21e)]()[_0x4574b9(0x186)]()[_0x4574b9(0x226)](0x2,'0')+':'+_0x4b4730[_0x4574b9(0x1c0)]()[_0x4574b9(0x186)]()[_0x4574b9(0x226)](0x2,'0')+':'+_0x4b4730['getSeconds']()[_0x4574b9(0x186)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1234e8=_0x143886,_0x42fd9f=shiftedTime();return _0x42fd9f[_0x1234e8(0x1ef)]()+'/'+(_0x42fd9f[_0x1234e8(0x1c3)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x42fd9f[_0x1234e8(0x212)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x42fd9f['getHours']()[_0x1234e8(0x186)]()['padStart'](0x2,'0')+':'+_0x42fd9f[_0x1234e8(0x1c0)]()[_0x1234e8(0x186)]()[_0x1234e8(0x226)](0x2,'0')+':'+_0x42fd9f[_0x1234e8(0x16c)]()[_0x1234e8(0x186)]()[_0x1234e8(0x226)](0x2,'0');}function getDate(){const _0x10197d=_0x143886,_0x3fce7b=shiftedTime();return _0x3fce7b['getFullYear']()+'/'+(_0x3fce7b['getMonth']()+0x1)[_0x10197d(0x186)]()[_0x10197d(0x226)](0x2,'0')+'/'+_0x3fce7b[_0x10197d(0x212)]()['toString']()[_0x10197d(0x226)](0x2,'0');}function getHour(){const _0x48500f=_0x143886,_0x4fe7b3=shiftedTime();return _0x4fe7b3[_0x48500f(0x21e)]()[_0x48500f(0x186)]()[_0x48500f(0x226)](0x2,'0');}function sleep(_0x23e2e4){return new Promise(_0x2f87b1=>setTimeout(_0x2f87b1,_0x23e2e4));}function shiftedTime(){const _0x160544=_0x143886,_0x4f9399=new Date();let _0x4015ce=_0x4f9399;if(config&&config[_0x160544(0x235)]!==0x0)_0x4015ce=fns[_0x160544(0x193)](_0x4f9399,{'hours':config[_0x160544(0x235)]});return _0x4015ce;}