const _0x3533c2=_0x4f37;(function(_0x323999,_0x4c74b8){const _0x28213c=_0x4f37,_0x32c2fc=_0x323999();while(!![]){try{const _0x217801=-parseInt(_0x28213c(0x368))/0x1+-parseInt(_0x28213c(0x333))/0x2*(parseInt(_0x28213c(0x277))/0x3)+parseInt(_0x28213c(0x353))/0x4+parseInt(_0x28213c(0x287))/0x5+-parseInt(_0x28213c(0x37f))/0x6*(-parseInt(_0x28213c(0x2d7))/0x7)+-parseInt(_0x28213c(0x324))/0x8+parseInt(_0x28213c(0x31c))/0x9*(parseInt(_0x28213c(0x328))/0xa);if(_0x217801===_0x4c74b8)break;else _0x32c2fc['push'](_0x32c2fc['shift']());}catch(_0x10ea35){_0x32c2fc['push'](_0x32c2fc['shift']());}}}(_0x1220,0x47a13));const _0x717ce=function(){let _0x5d416f=!![];return function(_0x43ed25,_0x505de2){const _0xee9465=_0x5d416f?function(){const _0x1cbe95=_0x4f37;if(_0x505de2){const _0x31196b=_0x505de2[_0x1cbe95(0x284)](_0x43ed25,arguments);return _0x505de2=null,_0x31196b;}}:function(){};return _0x5d416f=![],_0xee9465;};}(),_0x479518=_0x717ce(this,function(){const _0x53302c=_0x4f37;return _0x479518['toString']()['search'](_0x53302c(0x207))['toString']()['constructor'](_0x479518)['search'](_0x53302c(0x207));});_0x479518();'use strict';const ccxt=require('ccxt'),low=require(_0x3533c2(0x30c)),FileSync=require(_0x3533c2(0x2c5)),fs=require('fs'),fns=require(_0x3533c2(0x200)),Crypt=require(_0x3533c2(0x331))[_0x3533c2(0x30b)],util=require(_0x3533c2(0x2ca)),argv=require('yargs/yargs')(process[_0x3533c2(0x2ef)]['slice'](0x2))['argv'],path=require(_0x3533c2(0x2f8)),axios=require(_0x3533c2(0x31a));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x3533c2(0x32c),'BUSD',_0x3533c2(0x214),_0x3533c2(0x22f),_0x3533c2(0x295),_0x3533c2(0x27c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x3533c2(0x30e)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x3533c2(0x392)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x3533c2(0x23e)+pauseBotInterval/0xea60+_0x3533c2(0x204),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x3533c2(0x240))[_0x3533c2(0x388)],botID=process[_0x3533c2(0x2ef)][0x2]||_0x3533c2(0x20c),pattern=/^[0-9]{3}$/;!pattern['test'](botID)&&(console[_0x3533c2(0x29f)](_0x3533c2(0x393)+botID+_0x3533c2(0x2f3)),killBot());const userID=process[_0x3533c2(0x2ef)][0x3]||'',configpath=userID?_0x3533c2(0x379)+userID+'/':_0x3533c2(0x379),logspath=userID?_0x3533c2(0x35e)+userID+'/':'./logs/',loggerfile=fs[_0x3533c2(0x351)](logspath+_0x3533c2(0x318),{'flags':'a'});!fs[_0x3533c2(0x36c)](configpath)&&fs[_0x3533c2(0x360)](configpath);!fs[_0x3533c2(0x36c)](logspath)&&fs[_0x3533c2(0x360)](logspath);const configfile=configpath+_0x3533c2(0x355)+botID+_0x3533c2(0x38d),logfile=configpath+_0x3533c2(0x355)+botID+_0x3533c2(0x341),performancefile=configpath+_0x3533c2(0x355)+botID+_0x3533c2(0x325),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x3533c2(0x288),securefile=configpath+_0x3533c2(0x375),configbackuppath=configpath+_0x3533c2(0x38c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x3533c2(0x1ee)]({'logs':[],'version':serverversion})[_0x3533c2(0x294)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x3533c2(0x1ee)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3533c2(0x1ee)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x3533c2(0x1ee)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x3533c2(0x2a8),'rsaStandard':_0x3533c2(0x233)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x1b54b9=>{const _0x3624dc=_0x3533c2;console[_0x3624dc(0x29f)](_0x1b54b9);},'simple':_0x2f6a79=>{const _0x499ebe=_0x3533c2;console['log'](_0x2f6a79),loggerfile['write'](util[_0x499ebe(0x2f6)](_0x2f6a79)+'\x0a');},'full':async(_0x37efe4,_0x2893e4='')=>{const _0x15f76c=_0x3533c2;let _0x2764ba;if(config[_0x15f76c(0x2f1)])_0x2764ba=getTimeStamp()+':\x20'+config[_0x15f76c(0x366)]+_0x15f76c(0x282)+_0x37efe4;else _0x2764ba=getTimeStamp()+_0x15f76c(0x1f5)+botID+_0x15f76c(0x282)+_0x37efe4;console[_0x15f76c(0x29f)](_0x2764ba),loggerfile['write'](util[_0x15f76c(0x2f6)](_0x2764ba)+'\x0a'),_0x2893e4&&(console['log'](_0x2893e4),loggerfile[_0x15f76c(0x294)](util[_0x15f76c(0x2f6)](_0x2893e4)+'\x0a'));},'debug':async(_0x51d9ae,_0x21cd79='')=>{const _0x33576d=_0x3533c2;let _0x3f7079;if(config['showname'])_0x3f7079=getTimeStamp()+':\x20'+config['botname']+_0x33576d(0x275)+_0x51d9ae;else _0x3f7079=getTimeStamp()+_0x33576d(0x1f5)+botID+_0x33576d(0x275)+_0x51d9ae;if(debugging)console['log'](_0x3f7079);loggerfile[_0x33576d(0x294)](util[_0x33576d(0x2f6)](_0x3f7079)+'\x0a');if(_0x21cd79){if(debugging)console[_0x33576d(0x29f)](_0x21cd79);loggerfile[_0x33576d(0x294)](util['format'](_0x21cd79)+'\x0a');}}};process['on'](_0x3533c2(0x381),function(_0x1e6681){const _0x50b654=_0x3533c2;handleError(_0x1e6681,_0x50b654(0x381));});settings[_0x3533c2(0x2f9)]!=config[_0x3533c2(0x2f9)]&&updateTimeshift(settings['timeshift']);settings[_0x3533c2(0x389)]!=config['onepagemode']&&updateOnepagemode(settings['onepagemode']);(settings[_0x3533c2(0x27a)]&&!config[_0x3533c2(0x27a)]||!settings[_0x3533c2(0x27a)]&&config['marketcapApi'])&&updateMarketcapApi(settings[_0x3533c2(0x27a)]);process[_0x3533c2(0x24f)]({'started':_0x3533c2(0x2e6)},_0x53aaf2=>{}),initializeProcessListeners();function proxyEmit(_0x204d5f,_0x16c4a1=null){process['send']({'function':_0x204d5f,'args':_0x16c4a1},_0x533a63=>{});}function initializeProcessListeners(){const _0x58e0ac=_0x3533c2;process['on'](_0x58e0ac(0x27d),_0x50cc3a=>{const _0x485d0d=_0x58e0ac;switch(Object[_0x485d0d(0x29c)](_0x50cc3a)[0x0]){case'timeshift':_0x50cc3a[_0x485d0d(0x2f9)]!=undefined&&(settings[_0x485d0d(0x2f9)]=_0x50cc3a[_0x485d0d(0x2f9)],updateTimeshift(settings[_0x485d0d(0x2f9)]));break;case'onepagemode':_0x50cc3a[_0x485d0d(0x389)]!=undefined&&(settings[_0x485d0d(0x389)]=_0x50cc3a[_0x485d0d(0x389)],updateOnepagemode(settings['onepagemode']));break;case _0x485d0d(0x27a):_0x50cc3a[_0x485d0d(0x27a)]!=undefined&&(settings[_0x485d0d(0x27a)]=_0x50cc3a[_0x485d0d(0x27a)],updateMarketcapApi(settings[_0x485d0d(0x27a)]));break;case _0x485d0d(0x39a):_0x50cc3a['bots']!=undefined&&(bots=JSON[_0x485d0d(0x253)](_0x50cc3a[_0x485d0d(0x39a)]),proxyEmit(_0x485d0d(0x39a),bots));break;case'function':switch(_0x50cc3a[_0x485d0d(0x26a)]){case _0x485d0d(0x3a0):initclient();break;case _0x485d0d(0x27f):toggleBotMode();break;case _0x485d0d(0x234):emitHistory(_0x50cc3a[_0x485d0d(0x34a)]);break;case'deleteHistoryAlerts':deleteHistoryAlerts(_0x50cc3a[_0x485d0d(0x34a)]);break;case _0x485d0d(0x286):getPortfolio(_0x50cc3a[_0x485d0d(0x34a)]);break;case _0x485d0d(0x20e):storeConfiguration(_0x50cc3a['args']);break;case _0x485d0d(0x30f):storeHeadless(_0x50cc3a[_0x485d0d(0x34a)]);break;case _0x485d0d(0x1f7):storeFiat(_0x50cc3a[_0x485d0d(0x34a)]);break;case _0x485d0d(0x228):resetHistory();break;case _0x485d0d(0x20f):getStartingBalances(getNormalizedPerformance());break;case _0x485d0d(0x1f8):placeOrder(_0x50cc3a[_0x485d0d(0x34a)]);break;case _0x485d0d(0x2b7):cancelLoading();break;case _0x485d0d(0x21d):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x485d0d(0x2af):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x52aa21=![]){const _0x50c61f=_0x3533c2;logger[_0x50c61f(0x229)](_0x50c61f(0x239)+(_0x52aa21?_0x50c61f(0x2b6):'exchange\x20not\x20reloaded')+_0x50c61f(0x377)+config[_0x50c61f(0x289)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x52aa21)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x50c61f(0x26f)]!=_0x50c61f(0x398)){loadingProgress=0x0;if(_0x52aa21){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x1524fc){handleErrorNoStop(_0x1524fc,_0x50c61f(0x37b));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x355633=await getCoins();[currentCoins,currentCoinsAll]=_0x355633,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x50c61f(0x313)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x50c61f(0x251)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x1d5b71=![]){const _0x33425b=_0x3533c2;logger[_0x33425b(0x229)]('Resuming\x20('+(_0x1d5b71?_0x33425b(0x36a):'complete')+_0x33425b(0x2ff)+config[_0x33425b(0x289)]);if(pidBalances)clearTimeout(pidBalances);if(_0x1d5b71){getBalances();return;}coinsLoaded=![];if(config[_0x33425b(0x26f)]!=''&&config[_0x33425b(0x26f)]!=_0x33425b(0x398)){loadingProgress=0x1;const _0x4eaa4a=await getCoins();[currentCoins,currentCoinsAll]=_0x4eaa4a,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger['debug'](_0x33425b(0x313)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x33425b(0x251)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x4f3ac6){const _0xf117e4=_0x3533c2;let _0x58de3b=![];if(_0x4f3ac6)_0x58de3b=!![];let _0x32d8d3;_0x58de3b?_0x32d8d3=_0x4f3ac6[_0xf117e4(0x37e)](_0x587154=>_0x587154[_0xf117e4(0x382)]):_0x32d8d3=currentCoinsAll[_0xf117e4(0x37e)](_0x56765e=>_0x56765e['coin']);if(!config['marketcapApi']||!_0x58de3b&&!config[_0xf117e4(0x309)]||_0x32d8d3[_0xf117e4(0x251)]==0x0)return;let _0x40c1a0=null;try{_0x40c1a0=await axios[_0xf117e4(0x359)](_0xf117e4(0x2ee),{'headers':{'X-CMC_PRO_API_KEY':settings[_0xf117e4(0x27a)]},'params':{'symbol':_0x32d8d3[_0xf117e4(0x2df)]()}});}catch(_0x5568e1){_0x40c1a0=null,_0x5568e1[_0xf117e4(0x2df)]()['includes'](_0xf117e4(0x20b))?(config[_0xf117e4(0x27a)]=![],updateConfig(),proxyEmit(_0xf117e4(0x23c),emittedConfiguration()),logHistory('error',_0xf117e4(0x3a4))):(logHistory(_0xf117e4(0x33f),_0xf117e4(0x2ed)+schedulerInterval/(0x3c*0x3e8)+_0xf117e4(0x204)),logger[_0xf117e4(0x229)](_0xf117e4(0x26b),_0x5568e1['toString']()+_0xf117e4(0x33e)+_0x5568e1[_0xf117e4(0x241)]));}if(_0x40c1a0){let _0x1a10ba=0x0;const _0xc3c4cc=_0x40c1a0[_0xf117e4(0x264)];_0x32d8d3[_0xf117e4(0x2f7)](_0x3f5d7e=>{const _0x125662=_0xf117e4;if(_0xc3c4cc['data'][_0x3f5d7e][0x0])_0x1a10ba+=_0xc3c4cc[_0x125662(0x264)][_0x3f5d7e][0x0][_0x125662(0x2be)][_0x125662(0x32c)][_0x125662(0x27e)];}),_0x32d8d3['forEach'](_0x5dad1c=>{const _0x47307f=_0xf117e4,_0x33c10d=_0xc3c4cc[_0x47307f(0x264)][_0x5dad1c][0x0]?_0xc3c4cc[_0x47307f(0x264)][_0x5dad1c][0x0][_0x47307f(0x2be)][_0x47307f(0x32c)][_0x47307f(0x27e)]:0x0;if(_0x58de3b){const _0x76bd95=_0x4f3ac6[_0x47307f(0x271)](_0x55b6cf=>_0x55b6cf[_0x47307f(0x382)]==_0x5dad1c);_0x76bd95&&(_0x76bd95[_0x47307f(0x2a3)]=_0x33c10d);}else{const _0x575ba4=currentCoins[_0x47307f(0x271)](_0x535a9f=>_0x535a9f['coin']==_0x5dad1c);_0x575ba4&&(_0x575ba4[_0x47307f(0x2a3)]=_0x33c10d);const _0x2139c1=currentCoinsAll[_0x47307f(0x271)](_0x4ab97c=>_0x4ab97c[_0x47307f(0x382)]==_0x5dad1c);_0x2139c1&&(_0x2139c1[_0x47307f(0x2a3)]=_0x33c10d);}}),!_0x58de3b&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x3d8b30=_0x3533c2,_0x402e93=0x2;let _0x51e3a3=0x0,_0x4aaf4e=0x0,_0x2bf5c8=0x0,_0x193dcd=0x0,_0xee4815=0x0;config[_0x3d8b30(0x23d)][_0x3d8b30(0x2f7)](_0x143843=>{const _0x5f5858=_0x3d8b30;if(!_0x143843[_0x5f5858(0x337)]){_0x2bf5c8++,_0x51e3a3+=_0x143843[_0x5f5858(0x3a1)];if(_0x143843['slider']===-0x1){_0x51e3a3++;const _0x48cebb=currentCoinsAll[_0x5f5858(0x271)](_0x47171c=>_0x47171c[_0x5f5858(0x382)]==_0x143843[_0x5f5858(0x382)]);_0x48cebb&&(_0x193dcd+=_0x48cebb[_0x5f5858(0x2a3)],_0xee4815+=Math[_0x5f5858(0x316)](_0x48cebb[_0x5f5858(0x2a3)]));}if(_0x143843[_0x5f5858(0x3a1)]!==-0x1)_0x4aaf4e++;}});let _0xfebef9;const _0x2e8386=0x64-_0x51e3a3,_0x3420ea=_0x2bf5c8-_0x4aaf4e;_0xfebef9=_0x3420ea===0x0?_0x51e3a3:Math['max'](0x64,_0x51e3a3),config['portfolio'][_0x3d8b30(0x2f7)](_0x440152=>{const _0x2bb731=_0x3d8b30,_0xa9ada3=currentCoinsAll[_0x2bb731(0x271)](_0x55bd5f=>_0x55bd5f[_0x2bb731(0x382)]==_0x440152['coin']);_0xa9ada3&&(_0x440152[_0x2bb731(0x2a3)]=_0xa9ada3[_0x2bb731(0x2a3)]);if(!_0x440152[_0x2bb731(0x337)]){if(_0xfebef9<=0x64){if(_0x440152['slider']===-0x1){if(_0x193dcd!==0x0&&config[_0x2bb731(0x309)]){if(_0xa9ada3){if(config['marketcapEnabled']=='marketcap')_0x440152[_0x2bb731(0x217)]=(_0x2e8386/(_0x193dcd/_0xa9ada3[_0x2bb731(0x2a3)]))[_0x2bb731(0x254)](_0x402e93);else config[_0x2bb731(0x309)]=='marketcapsqrt'&&(_0x440152[_0x2bb731(0x217)]=(_0x2e8386/(_0xee4815/Math[_0x2bb731(0x316)](_0xa9ada3['marketcap'])))[_0x2bb731(0x254)](_0x402e93));}}}}}}),updateConfig();}function updateConfig(){const _0xbec77a=_0x3533c2;let _0x59efb8=dbConfig[_0xbec77a(0x359)](_0xbec77a(0x276))[_0xbec77a(0x271)]({'botID':botID})[_0xbec77a(0x1ec)]();_0x59efb8&&dbConfig[_0xbec77a(0x359)](_0xbec77a(0x276))[_0xbec77a(0x271)]({'botID':botID})[_0xbec77a(0x319)](config)[_0xbec77a(0x294)]();}async function startScheduler(){const _0x432215=_0x3533c2,_0x436f0d=process[_0x432215(0x365)]()[_0x432215(0x22b)]/0x400/0x400;logger[_0x432215(0x229)]('process\x20'+process[_0x432215(0x2eb)]+_0x432215(0x1ed)+_0x436f0d+_0x432215(0x27b)),getMarketCap(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x23cf6f=![]){const _0x3a287b=_0x3533c2;logger['debug'](_0x3a287b(0x373));if(!_0x23cf6f)while(lockOrders!=ORDERS[_0x3a287b(0x392)]||coolingDown){await sleep(0xa*0x3e8);}process[_0x3a287b(0x24f)]({'stop':_0x3a287b(0x23b)},_0x967c42=>{});}async function initExchange(_0xa4502b=config[_0x3533c2(0x289)],_0x2ccf6b=config[_0x3533c2(0x26f)],_0x1bd15c=config[_0x3533c2(0x344)],_0x51e5ac=config[_0x3533c2(0x2f4)]){const _0x3c5514=_0x3533c2;!supportedExchanges()['includes'](_0xa4502b)&&(logHistory(_0x3c5514(0x33f),_0x3c5514(0x38b)+_0xa4502b+_0x3c5514(0x274)),killBot());const _0x16720c=ccxt[_0x3c5514(0x306)][_0xa4502b['toLowerCase']()];exchange=new _0x16720c({'apiKey':_0x2ccf6b,'secret':_0x1bd15c,'options':{'defaultType':'spot'}});if(_0x51e5ac)exchange[_0x3c5514(0x244)]=_0x51e5ac;}function updateExchange(_0x51afcf,_0x17a2ea,_0x586b38=null){const _0x37c802=_0x3533c2;exchange[_0x37c802(0x26f)]=_0x51afcf,exchange[_0x37c802(0x344)]=_0x17a2ea,exchange[_0x37c802(0x2f4)]=_0x586b38,logger[_0x37c802(0x229)](_0x37c802(0x305));}function setStableCoins(){const _0x18233d=_0x3533c2;let _0x4df7a=config[_0x18233d(0x24e)]=='ETH'?_0x18233d(0x2cc):config[_0x18233d(0x24e)]==_0x18233d(0x292)?_0x18233d(0x292):'BTC',_0x284149=!allSymbols[_0x18233d(0x36f)](_0x4df7a+_0x18233d(0x273))?_0x18233d(0x22f):_0x18233d(0x32c),_0x52944b=!allSymbols[_0x18233d(0x36f)](_0x4df7a+_0x18233d(0x34e))?_0x284149:_0x18233d(0x2ae);stablecoins={'eur':{'coin':''+_0x4df7a+_0x52944b,'symbol':_0x4df7a+'/'+_0x52944b},'usd':{'coin':''+_0x4df7a+_0x284149,'symbol':_0x4df7a+'/'+_0x284149}};}async function initwsCcxt(){const _0x1f4096=_0x3533c2;initCycle++;const _0x39a16d=initCycle;let _0x4a489d=[];config[_0x1f4096(0x23d)][_0x1f4096(0x2f7)](_0x4a664d=>{const _0x4fa278=_0x1f4096;if(!_0x4a664d[_0x4fa278(0x337)]&&_0x4a664d[_0x4fa278(0x382)]!=config[_0x4fa278(0x24e)])_0x4a489d['push'](_0x4a664d[_0x4fa278(0x343)]);});if(!_0x4a489d[_0x1f4096(0x36f)](stablecoins[_0x1f4096(0x206)][_0x1f4096(0x343)]))_0x4a489d[_0x1f4096(0x1f6)](stablecoins[_0x1f4096(0x206)][_0x1f4096(0x343)]);if(!_0x4a489d[_0x1f4096(0x36f)](stablecoins[_0x1f4096(0x308)][_0x1f4096(0x343)]))_0x4a489d[_0x1f4096(0x1f6)](stablecoins['usd'][_0x1f4096(0x343)]);if(config['exchange'][_0x1f4096(0x246)]('Binance')&&config['basecoin']!=_0x1f4096(0x292)){if(!_0x4a489d['includes'](_0x1f4096(0x31b)+config['basecoin']))_0x4a489d[_0x1f4096(0x1f6)](_0x1f4096(0x31b)+config['basecoin']);}loadCoins(_0x4a489d),_0x4a489d=validateSymbols(_0x4a489d);const _0x55c975=async _0x17bc39=>{const _0x107c7b=_0x1f4096;let _0x528a0a;try{const _0x509e71=await getTickers(_0x17bc39);Object['entries'](_0x509e71)['forEach'](_0x580bb5=>{const _0x4f9b60=_0x4f37;_0x528a0a=_0x580bb5[0x1][_0x4f9b60(0x343)],gTicker[noslash(_0x528a0a)]=_0x580bb5[0x1]['last'],gChange[_0x528a0a]=_0x580bb5[0x1][_0x4f9b60(0x38e)];});}catch(_0x1d3c23){await handleError(_0x1d3c23,_0x107c7b(0x215),_0x528a0a);}},_0xefd635=async _0xf03294=>{const _0xcf00f3=_0x1f4096;while(initCycle==_0x39a16d){if(!botPaused)try{const _0x561fa0=await exchange[_0xcf00f3(0x2ea)](_0xf03294);gTicker[noslash(_0x561fa0[0x0][_0xcf00f3(0x343)])]=_0x561fa0[0x0][_0xcf00f3(0x269)];}catch(_0x367acc){if(!exchangeStopped)await handleError(_0x367acc,_0xcf00f3(0x25d),_0xf03294);}else await sleep(0x64);}},_0x1eb2ff=async _0x532235=>{const _0x31620c=_0x1f4096;while(initCycle==_0x39a16d){if(!botPaused)try{const _0x20ce7c=await exchange[_0x31620c(0x2d8)](_0x532235),_0x3ab4af=_0x20ce7c['pop']();gTicker[noslash(_0x3ab4af[_0x31620c(0x343)])]=_0x3ab4af[_0x31620c(0x269)];}catch(_0x564abb){if(!exchangeStopped)await handleError(_0x564abb,_0x31620c(0x290),_0x532235[_0x31620c(0x2df)]());}else await sleep(0x64);}},_0x174cf3=async _0x5692f5=>{const _0x37b255=_0x1f4096;while(initCycle==_0x39a16d){if(!botPaused){let _0x3e3846;try{await sleep(0x3c*0x3e8);const _0xb535be=await getTickers(_0x5692f5);Object['entries'](_0xb535be)[_0x37b255(0x2f7)](_0x4d5361=>{const _0x105a75=_0x37b255;_0x3e3846=_0x4d5361[0x1]['symbol'],gChange[_0x3e3846]=_0x4d5361[0x1][_0x105a75(0x38e)];});}catch(_0x29eda2){if(!exchangeStopped)await handleError(_0x29eda2,_0x37b255(0x2dc),_0x3e3846);}}else await sleep(0x64);}},_0x37fb39=async _0x508d3d=>{const _0x224b6a=_0x1f4096;while(initCycle==_0x39a16d){if(!botPaused)try{const _0x4d43d0=await exchange[_0x224b6a(0x29b)](_0x508d3d);initCycle==_0x39a16d&&_0x4d43d0[_0x224b6a(0x2f7)](_0x3cbe08=>{updateNumberCoinsCcxt(_0x3cbe08);});}catch(_0x155ebe){if(!exchangeStopped)await handleError(_0x155ebe,_0x224b6a(0x232));}else await sleep(0x64);}};_0x55c975(_0x4a489d),_0x174cf3(_0x4a489d),exchange[_0x1f4096(0x28b)][_0x1f4096(0x2d8)]&&!(config[_0x1f4096(0x289)]==_0x1f4096(0x323)&&_0x4a489d[_0x1f4096(0x251)]>0xa)?_0x1eb2ff(_0x4a489d):_0x4a489d[_0x1f4096(0x2f7)](_0x26ddad=>{_0xefd635(_0x26ddad);}),_0x4a489d[_0x1f4096(0x2f7)](_0x39751d=>{_0x37fb39(_0x39751d);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x4e7705){const _0x2c1943=_0x3533c2;let _0x591455={};try{if(config[_0x2c1943(0x289)]!=_0x2c1943(0x1f1))_0x591455=await exchange[_0x2c1943(0x345)](_0x4e7705);else for(const _0x410c42 of _0x4e7705){const _0x1423e6=await exchange[_0x2c1943(0x1f9)](_0x410c42);_0x591455[_0x410c42]=_0x1423e6;}return _0x591455;}catch(_0x1affc2){throw _0x1affc2;}}function setBlockTransactionDetection(_0x2ce462){const _0x21226d=_0x3533c2;blockTransactionDetection=_0x2ce462,logger[_0x21226d(0x229)](_0x21226d(0x303)+blockTransactionDetection);}async function detectLiquidityChange(_0x2330ff=0x0){const _0x1253ba=_0x3533c2;transactionDetectionOngoing=!![];try{const _0x3530b3=await getCoins(_0x2330ff),[_0x2469ef,_0x42bf6f]=_0x3530b3;let _0x490416=[];currentCoins['forEach'](_0xb81072=>{const _0x53a31d=_0x4f37,_0x32628b=_0x2469ef[_0x53a31d(0x271)](_0x317e90=>_0x317e90[_0x53a31d(0x382)]==_0xb81072[_0x53a31d(0x382)]);if(_0x32628b){if(_0xb81072[_0x53a31d(0x208)]!=_0x32628b[_0x53a31d(0x208)]){let _0x3852c8;if(_0xb81072['coin']!=config[_0x53a31d(0x24e)]){const _0x3096c3=gTicker[noslash(_0xb81072[_0x53a31d(0x343)])];_0x3852c8=_0xb81072[_0x53a31d(0x371)]?0x1/_0x3096c3:_0x3096c3;}else _0x3852c8=0x1;_0x490416[_0x53a31d(0x1f6)]({'coin':_0xb81072[_0x53a31d(0x382)],'symbol':_0xb81072[_0x53a31d(0x343)],'price':_0x3852c8,'number':Number(formatResult(_0x32628b['number']-_0xb81072[_0x53a31d(0x208)],0x8)),'basecoinvalue':_0x3852c8*(_0x32628b[_0x53a31d(0x208)]-_0xb81072[_0x53a31d(0x208)])});}}});if(_0x490416[_0x1253ba(0x251)]>0x0&&!blockTransactionDetection)for(const _0x403f86 of _0x490416){if(config['autoliquidity']){logger['debug'](_0x1253ba(0x3a5)+_0x403f86[_0x1253ba(0x28c)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x1253ba(0x245)]);if(lastFees[_0x1253ba(0x245)]==0x0||Math[_0x1253ba(0x265)](_0x403f86['basecoinvalue'])>lastFees[_0x1253ba(0x245)]*1.2){if(config['autoliquidity']==_0x1253ba(0x203)){delete _0x403f86[_0x1253ba(0x343)],delete _0x403f86[_0x1253ba(0x28c)];let _0x2ee4e7=[],_0x25f89c=[...config[_0x1253ba(0x34f)]]||[],_0x281c37=config[_0x1253ba(0x34f)];_0x25f89c[_0x1253ba(0x210)]((_0x264f24,_0x2140ce)=>_0x264f24['date']>_0x2140ce[_0x1253ba(0x260)]?-0x1:_0x2140ce[_0x1253ba(0x260)]>_0x264f24[_0x1253ba(0x260)]?0x1:0x0);const _0x48d4fe=getDate();if(_0x25f89c[0x0]){const _0x269a3c=fns[_0x1253ba(0x253)](_0x25f89c[0x0][_0x1253ba(0x260)],_0x1253ba(0x33d),new Date()),_0x233e30=fns[_0x1253ba(0x253)](_0x48d4fe,_0x1253ba(0x33d),new Date());if(fns[_0x1253ba(0x257)](_0x269a3c,_0x233e30)){_0x2ee4e7=_0x25f89c[0x0][_0x1253ba(0x224)];const _0x31ce85=_0x2ee4e7[_0x1253ba(0x271)](_0x166822=>_0x166822[_0x1253ba(0x382)]==_0x403f86[_0x1253ba(0x382)]);_0x31ce85?(_0x31ce85[_0x1253ba(0x208)]+=_0x403f86[_0x1253ba(0x208)],_0x31ce85[_0x1253ba(0x208)]==0x0&&(_0x2ee4e7=_0x2ee4e7[_0x1253ba(0x24d)](_0x30da44=>{const _0xc4b834=_0x1253ba;return _0x30da44[_0xc4b834(0x382)]!=_0x403f86[_0xc4b834(0x382)];}))):_0x2ee4e7[_0x1253ba(0x1f6)](_0x403f86);const _0x5b309b=_0x281c37[_0x1253ba(0x271)](_0x198feb=>_0x198feb['date']==_0x48d4fe);_0x5b309b[_0x1253ba(0x224)]=_0x2ee4e7;}else _0x281c37[_0x1253ba(0x1f6)]({'date':_0x48d4fe,'changes':[_0x403f86]});}const _0x50758f=_0x281c37[_0x1253ba(0x271)](_0x21baf3=>_0x21baf3['date']==_0x48d4fe);if(_0x50758f){let _0x3929cc=!![];_0x50758f[_0x1253ba(0x224)][_0x1253ba(0x2f7)](_0x16a6b0=>{if(_0x16a6b0['number']!=0x0)_0x3929cc=![];}),_0x3929cc&&(_0x281c37=_0x281c37[_0x1253ba(0x24d)](_0x1cea24=>{const _0x2c32e6=_0x1253ba;return _0x1cea24[_0x2c32e6(0x260)]!=_0x48d4fe;}));}let _0x168b6a=dbConfig['get'](_0x1253ba(0x276))['find']({'botID':botID})[_0x1253ba(0x1ec)]();_0x168b6a&&(dbConfig[_0x1253ba(0x359)]('bot')[_0x1253ba(0x271)]({'botID':botID})['assign']({'liquidity':_0x281c37})[_0x1253ba(0x294)](),config[_0x1253ba(0x34f)]=_0x281c37);logHistory(_0x1253ba(0x326),_0x1253ba(0x302)+Math[_0x1253ba(0x265)](_0x403f86[_0x1253ba(0x208)])+'\x20'+_0x403f86[_0x1253ba(0x382)]+'\x20'+(_0x403f86['number']>0x0?'added':_0x1253ba(0x268))+_0x1253ba(0x2fd)),proxyEmit(_0x1253ba(0x23c),emittedConfiguration());const _0x581a19=getNormalizedPerformance();emitPerformance(_0x581a19),getStartingBalances(_0x581a19),logger[_0x1253ba(0x229)](_0x1253ba(0x21e));}else config['autoliquidity']==_0x1253ba(0x39d)&&(config[_0x1253ba(0x25e)]?(await storeHeadless({'headless':![]}),logHistory(_0x1253ba(0x326),_0x1253ba(0x302)+Math[_0x1253ba(0x265)](_0x403f86[_0x1253ba(0x208)])+'\x20'+_0x403f86[_0x1253ba(0x382)]+'\x20'+(_0x403f86[_0x1253ba(0x208)]>0x0?_0x1253ba(0x249):_0x1253ba(0x268))+_0x1253ba(0x30a))):logger['debug'](_0x1253ba(0x302)+Math[_0x1253ba(0x265)](_0x403f86[_0x1253ba(0x208)])+'\x20'+_0x403f86[_0x1253ba(0x382)]+'\x20'+(_0x403f86[_0x1253ba(0x208)]>0x0?'added':_0x1253ba(0x268))+_0x1253ba(0x363)));}else logger[_0x1253ba(0x229)](_0x1253ba(0x3a6)+Math[_0x1253ba(0x265)](_0x403f86['number'])+'\x20'+_0x403f86[_0x1253ba(0x382)]+'\x20'+(_0x403f86['number']>0x0?_0x1253ba(0x249):_0x1253ba(0x268)));}else logger[_0x1253ba(0x229)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x403f86[_0x1253ba(0x208)])+'\x20'+_0x403f86[_0x1253ba(0x382)]+'\x20'+(_0x403f86[_0x1253ba(0x208)]>0x0?_0x1253ba(0x249):_0x1253ba(0x268))+_0x1253ba(0x237));}currentCoins=_0x2469ef,currentCoinsAll=_0x42bf6f;}catch(_0x21e839){if(!exchangeStopped)await handleError(_0x21e839,_0x1253ba(0x34d));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x39c093=_0x3533c2;try{markets=await exchange[_0x39c093(0x2b4)](),allSymbols=[],Object[_0x39c093(0x2a2)](markets)[_0x39c093(0x2f7)](_0xd83bf8=>{const _0x5e0335=_0x39c093;_0xd83bf8[0x1][_0x5e0335(0x2c4)]&&_0xd83bf8[0x1]['spot']&&allSymbols[_0x5e0335(0x1f6)](_0xd83bf8[0x0]);});}catch(_0x1dbfb1){throw _0x1dbfb1;}}function validateSymbols(_0x58be01){const _0x2a1f87=_0x3533c2;let _0xac8f5a=[];return _0x58be01[_0x2a1f87(0x2f7)](_0x1b2f7b=>{const _0x518185=_0x2a1f87;!allSymbols['includes'](_0x1b2f7b)?logHistory(_0x518185(0x33f),'Invalid\x20symbol:\x20'+_0x1b2f7b+_0x518185(0x247)):_0xac8f5a[_0x518185(0x1f6)](_0x1b2f7b);}),_0xac8f5a;}async function initclient(){const _0x501765=_0x3533c2;proxyEmit(_0x501765(0x23c),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2d3f94=getNormalizedPerformance();emitPerformance(_0x2d3f94),getStartingBalances(_0x2d3f94);}async function toggleBotMode(){const _0xd77370=_0x3533c2;let _0x211dc4=dbConfig[_0xd77370(0x359)](_0xd77370(0x276))['find']({'botID':botID})['value']();if(_0x211dc4){const _0x327374=!_0x211dc4['headless'];dbConfig['get'](_0xd77370(0x276))[_0xd77370(0x271)]({'botID':botID})[_0xd77370(0x319)]({'headless':_0x327374})['write'](),config['headless']=_0x327374,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x1c24a0=_0x3533c2;process[_0x1c24a0(0x24f)]({'updatebotmanager':!![]},_0x5c34c8=>{}),logger[_0x1c24a0(0x229)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x236fd5){const _0x287e49=_0x3533c2;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x1104ee,_0x53ec5c=0x0,_0x2eabdb=0x0;_0x236fd5[_0x287e49(0x2f7)](_0x2c0092=>{const _0x33e615=_0x287e49;loading[_0x33e615(0x1fb)][_0x33e615(0x1f6)](_0x2c0092);}),loadingCanceled=![];let _0x4f1cf5=![];while(_0x1104ee!=_0x236fd5[_0x287e49(0x251)]+maxLoadingProgress){_0x1104ee=loadingProgress,_0x236fd5[_0x287e49(0x2f7)](_0x5dd5c8=>{const _0x1685bd=_0x287e49;if(gTicker[noslash(_0x5dd5c8)]){loading['remainingSymbols']=loading[_0x1685bd(0x1fb)][_0x1685bd(0x24d)](_0x3d276d=>_0x3d276d!=_0x5dd5c8);if(!watchedSymbols['includes'](_0x5dd5c8))watchedSymbols[_0x1685bd(0x1f6)](_0x5dd5c8);_0x1104ee++;}}),loading[_0x287e49(0x322)]=Math['round'](_0x1104ee/(_0x236fd5[_0x287e49(0x251)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x2eabdb>0x1e*0x5&&(loading[_0x287e49(0x1fa)]=!![],emitLoadingProgress()),_0x2eabdb>0x78*0x5&&!_0x4f1cf5&&(_0x4f1cf5=!![],logHistory(_0x287e49(0x33f),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x287e49(0x1fb)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x287e49(0x33f),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x287e49(0x25f)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x287e49(0x2c2)]=!![],emitLoadingProgress();break;}else _0x53ec5c!=loading[_0x287e49(0x322)]&&(_0x53ec5c=loading[_0x287e49(0x322)],emitLoadingProgress()),_0x2eabdb++,await sleep(0xc8);}_0x1104ee==_0x236fd5[_0x287e49(0x251)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x287e49(0x1f4),'live':_0x287e49(0x2e6)},_0x3b7e89=>{}),_0x4f1cf5&&logHistory(_0x287e49(0x326),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function _0x4f37(_0x562315,_0x51aa01){const _0x2c19da=_0x1220();return _0x4f37=function(_0x479518,_0x717ce){_0x479518=_0x479518-0x1e9;let _0x122076=_0x2c19da[_0x479518];return _0x122076;},_0x4f37(_0x562315,_0x51aa01);}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x35a738=_0x3533c2;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x35a738(0x339)});}function emitLoadingProgress(){const _0x3cf86c=_0x3533c2;proxyEmit(_0x3cf86c(0x386),loading);}async function getFiat(){const _0x578e8e=_0x3533c2;let _0x524691=gTicker[stablecoins[_0x578e8e(0x206)][_0x578e8e(0x382)]],_0x5e3e9a=gTicker[stablecoins['usd']['coin']];return{'eur':Number(_0x524691),'usd':Number(_0x5e3e9a)};}function capitalize(_0x24ffe5){const _0x58717f=_0x3533c2;return _0x24ffe5[_0x58717f(0x262)](0x0,0x1)[_0x58717f(0x270)]()+_0x24ffe5['substring'](0x1);}function supportedExchanges(){const _0x43581c=_0x3533c2,_0x26a350=['ws','fetchTickers',_0x43581c(0x1f9),'watchTrades','watchOrders',_0x43581c(0x2fb),_0x43581c(0x33a),_0x43581c(0x2bf),_0x43581c(0x22d),_0x43581c(0x310)];let _0x328b1a=[],_0x8adf84=[],_0x2fbe6b=ccxt['pro'][_0x43581c(0x3a7)];_0x2fbe6b[_0x43581c(0x2f7)](_0xd0ee62=>{const _0x37e9b7=_0x43581c;try{const _0x315968=new ccxt[(_0x37e9b7(0x306))][_0xd0ee62]();_0x8adf84[_0x37e9b7(0x1f6)](_0x315968);}catch(_0xb917c9){}}),_0x8adf84[_0x43581c(0x2f7)](_0x1844dc=>{const _0x2bdf2f=_0x43581c;let _0x3a0067=0x0;_0x26a350[_0x2bdf2f(0x2f7)](_0x3a877b=>{const _0x24ac38=_0x2bdf2f;_0x3a877b in _0x1844dc[_0x24ac38(0x28b)]&&_0x1844dc['has'][_0x3a877b]&&_0x3a0067++;}),_0x3a0067==_0x26a350[_0x2bdf2f(0x251)]&&_0x328b1a[_0x2bdf2f(0x1f6)](capitalize(_0x1844dc['id']));});let _0x561d1f=[];return _0x2fbe6b['forEach'](_0x15d4f8=>{const _0x363e2e=_0x43581c;_0x15d4f8=capitalize(_0x15d4f8);if(!_0x328b1a['includes'](_0x15d4f8))_0x561d1f[_0x363e2e(0x1f6)](_0x15d4f8);}),_0x328b1a;}function setStartDatePerformance(){const _0x4a9bfc=_0x3533c2;if(config&&config[_0x4a9bfc(0x34f)][0x0]['changes'][_0x4a9bfc(0x251)]!=0x0){const _0x3f4a5d=config[_0x4a9bfc(0x34f)][0x0][_0x4a9bfc(0x224)];dbPerformance[_0x4a9bfc(0x359)](_0x4a9bfc(0x264))[_0x4a9bfc(0x271)]({'date':config[_0x4a9bfc(0x2ac)]})[_0x4a9bfc(0x319)]({'coins':_0x3f4a5d})[_0x4a9bfc(0x294)]();}}async function recreateCoinResults(){const _0x5c48e8=_0x3533c2;recreationNeeded=![];let _0x62ea11,_0x3ac52a=[];try{for(const _0x1c781c of currentCoins){if(_0x1c781c['coin']!=config[_0x5c48e8(0x24e)]){let _0x14656e=0x0,_0x304275,_0x23efde;_0x62ea11=await getAllEventOrders(_0x1c781c[_0x5c48e8(0x343)]);if(_0x62ea11[_0x5c48e8(0x251)]>0x0)_0x62ea11[_0x5c48e8(0x2f7)](_0x47c9e5=>{const _0x5b3005=_0x5c48e8,_0x8635c4=_0x1c781c[_0x5b3005(0x343)][_0x5b3005(0x36f)](config[_0x5b3005(0x24e)]+'/');_0x3ac52a[_0x5b3005(0x1f6)]({'datetime':_0x47c9e5[_0x5b3005(0x205)],'coin':_0x1c781c[_0x5b3005(0x382)],'symbol':_0x1c781c[_0x5b3005(0x343)],'side':_0x47c9e5[_0x5b3005(0x30d)],'reverse':_0x8635c4,'amount':formatResult(_0x47c9e5[_0x5b3005(0x2b0)],0x8),'filled':formatResult(_0x47c9e5[_0x5b3005(0x2b0)],0x8),'price':formatResult(_0x47c9e5[_0x5b3005(0x269)],0x8)}),_0x14656e=_0x47c9e5[_0x5b3005(0x30d)]=='buy'?_0x14656e+_0x47c9e5[_0x5b3005(0x2b0)]:_0x14656e-_0x47c9e5['filled'];if(!_0x23efde)_0x23efde=_0x47c9e5['price'];});_0x304275=_0x1c781c[_0x5c48e8(0x208)]-_0x14656e;let _0x460436;config[_0x5c48e8(0x34f)][_0x5c48e8(0x2f7)](_0x15fb21=>{const _0x577223=_0x5c48e8;!_0x460436&&(_0x460436=_0x15fb21['changes'][_0x577223(0x271)](_0x3521a9=>_0x3521a9[_0x577223(0x382)]==_0x1c781c[_0x577223(0x382)]),_0x460436&&(_0x304275=_0x460436['number'],_0x23efde=_0x460436[_0x577223(0x269)]));});let _0xe3603d=dbCoinResults[_0x5c48e8(0x359)](_0x5c48e8(0x391))['find']({'coin':_0x1c781c['coin']})[_0x5c48e8(0x1ec)]();_0xe3603d={'coin':_0x1c781c[_0x5c48e8(0x382)],'number':_0x304275,'breakeven':_0x23efde,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x5c48e8(0x359)](_0x5c48e8(0x391))[_0x5c48e8(0x271)]({'coin':_0x1c781c[_0x5c48e8(0x382)]})[_0x5c48e8(0x319)](_0xe3603d)[_0x5c48e8(0x294)]();}}_0x3ac52a['sort']((_0x29a68b,_0x43fd47)=>_0x29a68b[_0x5c48e8(0x205)]>_0x43fd47['datetime']?0x1:_0x43fd47['datetime']>_0x29a68b['datetime']?-0x1:0x0);let _0x3ed65e=0x0;for(let _0x128cf4 of _0x3ac52a){await updateCoinResults(_0x128cf4,!![]);}}catch(_0x5a5137){await handleError(_0x5a5137,_0x5c48e8(0x31d));}}async function getAllEventOrders(_0xb9c84b){const _0x469e0b=_0x3533c2;let _0x5ace88=[],_0x51a9d2=dbLogs['get'](_0x469e0b(0x33b))[_0x469e0b(0x24d)](_0x33288c=>{const _0x1667ca=_0x469e0b,_0x18e344=_0x33288c[_0x1667ca(0x2f0)][_0x1667ca(0x35a)]();return _0x18e344['includes'](_0xb9c84b[_0x1667ca(0x35a)]())&&(_0x18e344['includes'](_0x1667ca(0x25c))&&_0x18e344['includes'](_0x1667ca(0x226))||_0x18e344[_0x1667ca(0x36f)](_0x1667ca(0x2b0))&&_0x18e344[_0x1667ca(0x36f)](_0x1667ca(0x226)));})[_0x469e0b(0x321)](_0x469e0b(0x2a9))[_0x469e0b(0x1ec)]();return _0x51a9d2[_0x469e0b(0x2f7)](_0x570446=>{const _0x5efb58=_0x469e0b,_0x28d2b1=_0x570446['event'][_0x5efb58(0x36f)]('sell')?_0x5efb58(0x383):_0x5efb58(0x390),_0x44806c=/#([0-9]|\.)+\s/i,_0x49533b=Number(_0x44806c[_0x5efb58(0x2fa)](_0x570446['event'])[0x0][_0x5efb58(0x242)](0x1)),_0x514cae=/@([0-9]|\.)+$/i,_0x303391=Number(_0x514cae[_0x5efb58(0x2fa)](_0x570446['event'])[0x0]['slice'](0x1));_0x5ace88[_0x5efb58(0x1f6)]({'datetime':_0x570446[_0x5efb58(0x2a9)],'coin':symbolToCoin(_0xb9c84b),'symbol':_0xb9c84b,'side':_0x28d2b1,'amount':_0x49533b,'filled':_0x49533b,'price':_0x303391});}),_0x5ace88;}async function getAllOrders(_0x431e27,_0x358145){const _0x1379b8=_0x3533c2;let _0x258cee=[];while(_0x358145<exchange['milliseconds']()){const _0x2bf794=0x1f4;try{const _0x2b9689=await exchange['fetchClosedOrders'](_0x431e27,_0x358145,_0x2bf794);if(_0x2b9689['length'])_0x358145=_0x2b9689[_0x2b9689[_0x1379b8(0x251)]-0x1]['timestamp']+0x1,_0x258cee=_0x258cee[_0x1379b8(0x22a)](_0x2b9689);else break;}catch(_0x1167be){await handleError(_0x1167be,_0x1379b8(0x31e),_0x431e27);}}return _0x258cee;}async function validate24hChanges(){const _0x139881=_0x3533c2;for(const _0x545e24 of currentCoins){if(_0x545e24[_0x139881(0x382)]!=config['basecoin']){let _0x5e3db5;_0x545e24['reverse']?_0x5e3db5=formatResult((0x1/(gChange[_0x545e24['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x5e3db5=gChange[_0x545e24[_0x139881(0x343)]],_0x5e3db5<config[_0x139881(0x28d)]&&(logHistory(_0x139881(0x33f),_0x545e24[_0x139881(0x382)]+_0x139881(0x364)+_0x5e3db5+'%'),logHistory(_0x139881(0x33f),_0x139881(0x223)),logHistory(_0x139881(0x33f),_0x139881(0x202)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x346d38,_0xf8d974){const _0x48236a=_0x3533c2;if(!_0x346d38)return!![];const _0x277518=_0xf8d974['split']('.'),_0x123e6a=_0x346d38['split']('.');for(var _0xa70aac=0x0;_0xa70aac<_0x123e6a[_0x48236a(0x251)];_0xa70aac++){const _0x2f9c09=~~_0x123e6a[_0xa70aac],_0xc73d4a=~~_0x277518[_0xa70aac];if(_0x2f9c09<_0xc73d4a)return!![];if(_0x2f9c09>_0xc73d4a)return![];}return![];}async function oneTimeMigration(){const _0x3ff60a=_0x3533c2;let _0x12924c=dbLogs[_0x3ff60a(0x359)](_0x3ff60a(0x388))[_0x3ff60a(0x1ec)]();if(isOlderVersion(_0x12924c,_0x3ff60a(0x329))){let _0x45bde7=[];const _0x4140b8=dbLogs[_0x3ff60a(0x359)](_0x3ff60a(0x33b))['value']();_0x4140b8[_0x3ff60a(0x2f7)](_0x1c99ee=>{const _0xd49be2=_0x3ff60a;_0x45bde7[_0xd49be2(0x1f6)]({'time':_0x1c99ee['time'],'type':_0x1c99ee[_0xd49be2(0x1e9)],'event':_0x1c99ee[_0xd49be2(0x2f0)]});}),dbLogs[_0x3ff60a(0x359)](_0x3ff60a(0x33b))[_0x3ff60a(0x319)](_0x45bde7)[_0x3ff60a(0x294)]();}let _0x493c7f=dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x388))[_0x3ff60a(0x1ec)]();if(isOlderVersion(_0x493c7f,'2.3.5')){let _0x3f7607=dbConfig['get']('bot')['find']({'botID':botID})[_0x3ff60a(0x1ec)]();if(_0x3f7607){let _0x34d781=[];_0x3f7607[_0x3ff60a(0x23d)]['forEach'](_0x2c943f=>{const _0x459747=_0x3ff60a;_0x34d781[_0x459747(0x1f6)]({'coin':_0x2c943f[_0x459747(0x382)],'number':_0x2c943f[_0x459747(0x327)],'price':_0x2c943f[_0x459747(0x2d3)]}),delete _0x2c943f['startnumber'],delete _0x2c943f[_0x459747(0x2d3)];});if(_0x34d781['length']!==0x0)fs['writeFile'](configbackuppath+(_0x3ff60a(0x349)+botID+'.json'),JSON[_0x3ff60a(0x34b)](_0x34d781,null,0x4),function(_0x221918){if(_0x221918){}});const _0x3305a1=(_0x158040,_0x37184d)=>{const _0x1578d6=_0x3ff60a;let _0x4c200a=[];_0x37184d[_0x1578d6(0x2f7)](_0x331a4a=>{const _0x1d6512=_0x1578d6,_0x1cdc82=_0x158040[_0x1d6512(0x271)](_0x192295=>_0x192295[_0x1d6512(0x382)]==_0x331a4a[_0x1d6512(0x382)]);if(!_0x1cdc82)_0x4c200a[_0x1d6512(0x1f6)](_0x331a4a);});let _0x2bbbda=[];return _0x158040['forEach'](_0x3a4fa9=>{const _0x3edfe8=_0x1578d6,_0x53610e=_0x37184d[_0x3edfe8(0x271)](_0x518343=>_0x518343[_0x3edfe8(0x382)]==_0x3a4fa9['coin']);if(!_0x53610e||_0x53610e[_0x3edfe8(0x208)]==0x0&&_0x3a4fa9[_0x3edfe8(0x208)]!=0x0)_0x2bbbda[_0x3edfe8(0x1f6)](_0x3a4fa9);}),{'missingDay1':_0x4c200a,'notInDay2':_0x2bbbda};},_0x2b96b3=dbPerformance['get']('data')['cloneDeep']()[_0x3ff60a(0x1ec)]();if(_0x2b96b3[_0x3ff60a(0x251)]>0x1){const {missingDay1:_0x551aee,notInDay2:_0x128ed6}=_0x3305a1(_0x34d781,_0x2b96b3[0x1][_0x3ff60a(0x391)]);_0x34d781=[..._0x34d781,..._0x551aee],_0x128ed6[_0x3ff60a(0x2f7)](_0x5ce984=>{const _0x570f92=_0x3ff60a;let _0x3964a6=_0x34d781[_0x570f92(0x352)](_0x1b05b2=>_0x1b05b2[_0x570f92(0x382)]==_0x5ce984[_0x570f92(0x382)]);_0x3964a6!=-0x1&&_0x34d781[_0x570f92(0x259)](_0x3964a6,0x1);});}_0x34d781[_0x3ff60a(0x210)]((_0x1c1a58,_0x4bb062)=>_0x1c1a58[_0x3ff60a(0x382)]>_0x4bb062[_0x3ff60a(0x382)]?0x1:_0x4bb062['coin']>_0x1c1a58['coin']?-0x1:0x0);let _0x2c4668=[{'date':_0x3f7607[_0x3ff60a(0x2ac)],'changes':_0x34d781}];_0x2b96b3['length']>0x2&&_0x2b96b3[_0x3ff60a(0x2f7)]((_0x39fd16,_0x3a8dae)=>{const _0x274fd7=_0x3ff60a;if(_0x3a8dae>0x0&&_0x3a8dae<_0x2b96b3[_0x274fd7(0x251)]-0x1){const {missingDay1:_0x473402,notInDay2:_0x1eda72}=_0x3305a1(_0x2b96b3[_0x3a8dae]['coins'],_0x2b96b3[_0x3a8dae+0x1][_0x274fd7(0x391)]);_0x34d781=[],(_0x473402[_0x274fd7(0x251)]!=0x0||_0x1eda72[_0x274fd7(0x251)]!=0x0)&&(_0x473402[_0x274fd7(0x251)]!=0x0&&_0x34d781[_0x274fd7(0x1f6)](..._0x473402),_0x1eda72[_0x274fd7(0x251)]!=0x0&&(_0x1eda72['forEach'](_0x2509ff=>{const _0x46c672=_0x274fd7;_0x2509ff[_0x46c672(0x208)]=-_0x2509ff[_0x46c672(0x208)];}),_0x34d781[_0x274fd7(0x1f6)](..._0x1eda72)),_0x34d781[_0x274fd7(0x210)]((_0x24f02c,_0x5da665)=>_0x24f02c[_0x274fd7(0x382)]>_0x5da665[_0x274fd7(0x382)]?0x1:_0x5da665['coin']>_0x24f02c[_0x274fd7(0x382)]?-0x1:0x0),_0x2c4668[_0x274fd7(0x1f6)]({'date':_0x2b96b3[_0x3a8dae+0x1][_0x274fd7(0x260)],'changes':_0x34d781}));}}),dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x276))[_0x3ff60a(0x271)]({'botID':botID})[_0x3ff60a(0x319)]({..._0x3f7607,'liquidity':_0x2c4668})[_0x3ff60a(0x294)]();}}if(isOlderVersion(_0x493c7f,_0x3ff60a(0x31f))){let _0x4f2905=dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x276))[_0x3ff60a(0x271)]({'botID':botID})['value']();if(_0x4f2905){const _0x3da1d3=_0x4f2905[_0x3ff60a(0x289)],_0x48e0ad=_0x3da1d3?capitalize(_0x3da1d3):'Binance';dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x276))[_0x3ff60a(0x271)]({'botID':botID})[_0x3ff60a(0x319)]({'exchange':_0x48e0ad})[_0x3ff60a(0x294)]();}}if(isOlderVersion(_0x493c7f,_0x3ff60a(0x25b))){let _0x4c9efb=dbConfig['get'](_0x3ff60a(0x276))[_0x3ff60a(0x271)]({'botID':botID})[_0x3ff60a(0x1ec)]();if(_0x4c9efb){const _0x157a87=_0x4c9efb[_0x3ff60a(0x309)],_0x11dbbd=_0x157a87?_0x3ff60a(0x2a3):![];dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x276))['find']({'botID':botID})[_0x3ff60a(0x319)]({'marketcapEnabled':_0x11dbbd})[_0x3ff60a(0x294)]();}}if(isOlderVersion(_0x493c7f,_0x3ff60a(0x374))){let _0x1ce85c=dbConfig[_0x3ff60a(0x359)](_0x3ff60a(0x276))[_0x3ff60a(0x271)]({'botID':botID})['value']();if(_0x1ce85c){const _0x1484be=_0x1ce85c[_0x3ff60a(0x2e7)],_0x54f03c=_0x1484be?_0x3ff60a(0x203):![];dbConfig[_0x3ff60a(0x359)]('bot')['find']({'botID':botID})[_0x3ff60a(0x319)]({'autoliquidity':_0x54f03c})[_0x3ff60a(0x294)]();}}let _0x3384df=dbPerformance[_0x3ff60a(0x359)](_0x3ff60a(0x388))[_0x3ff60a(0x1ec)]();isOlderVersion(_0x3384df,'2.3.5')&&setStartDatePerformance();let _0x4d1694=dbCoinResults[_0x3ff60a(0x359)](_0x3ff60a(0x388))[_0x3ff60a(0x1ec)]();if(isOlderVersion(_0x4d1694,_0x3ff60a(0x311))){let _0xd8917c=dbCoinResults[_0x3ff60a(0x359)](_0x3ff60a(0x391))[_0x3ff60a(0x1ec)]();if(_0xd8917c[_0x3ff60a(0x251)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x2c0789=_0x3533c2;dbConfig['set'](_0x2c0789(0x388),serverversion)[_0x2c0789(0x294)](),dbPerformance[_0x2c0789(0x2b8)]('version',serverversion)[_0x2c0789(0x294)](),dbLogs[_0x2c0789(0x2b8)](_0x2c0789(0x388),serverversion)['write'](),dbCoinResults[_0x2c0789(0x2b8)]('version',serverversion)['write']();}function getConfiguration(_0x2cc656){const _0x4176f6=_0x3533c2;let _0x4a95a3=dbConfig[_0x4176f6(0x359)]('bot')['find']({'botID':_0x2cc656})[_0x4176f6(0x1ec)]();if(_0x4a95a3){let _0x2894c6=![];typeof _0x4a95a3[_0x4176f6(0x21a)]==_0x4176f6(0x222)&&(_0x4a95a3={..._0x4a95a3,'threshold':Number(_0x4a95a3[_0x4176f6(0x21a)])},_0x2894c6=!![]),_0x4a95a3[_0x4176f6(0x28d)]==undefined&&(_0x4a95a3={..._0x4a95a3,'change24h':-0x14},_0x2894c6=!![]),_0x4a95a3[_0x4176f6(0x1ff)]==undefined&&(_0x4a95a3={..._0x4a95a3,'fiat':_0x4176f6(0x32c)},_0x2894c6=!![]),_0x4a95a3['onepagemode']==undefined&&(_0x4a95a3={..._0x4a95a3,'onepagemode':settings['onepagemode']},_0x2894c6=!![]),_0x4a95a3['colorscheme']==undefined&&(_0x4a95a3={..._0x4a95a3,'colorscheme':'red_yellow_blue'},_0x2894c6=!![]),_0x4a95a3[_0x4176f6(0x2e7)]==undefined&&(_0x4a95a3={..._0x4a95a3,'autoliquidity':_0x4176f6(0x203)},_0x2894c6=!![]),_0x4a95a3[_0x4176f6(0x27a)]==undefined&&(_0x4a95a3={..._0x4a95a3,'marketcapApi':settings[_0x4176f6(0x27a)]?!![]:![]},_0x2894c6=!![]),_0x4a95a3[_0x4176f6(0x309)]==undefined&&(_0x4a95a3={..._0x4a95a3,'marketcapEnabled':![]},_0x2894c6=!![]),_0x2894c6&&(_0x4a95a3={'botID':_0x4a95a3[_0x4176f6(0x2aa)],'exchange':_0x4a95a3[_0x4176f6(0x289)],'apiKey':_0x4a95a3[_0x4176f6(0x26f)],'apiSecret':_0x4a95a3[_0x4176f6(0x344)],'apiPassword':_0x4a95a3[_0x4176f6(0x2f4)],'basecoin':_0x4a95a3[_0x4176f6(0x24e)],'botname':_0x4a95a3[_0x4176f6(0x366)],'showname':_0x4a95a3[_0x4176f6(0x2f1)],'threshold':_0x4a95a3[_0x4176f6(0x21a)],'ordertype':_0x4a95a3[_0x4176f6(0x314)],'timeout':_0x4a95a3[_0x4176f6(0x1fa)],'fiat':_0x4a95a3[_0x4176f6(0x1ff)],'startdate':_0x4a95a3['startdate'],'recreate':_0x4a95a3[_0x4176f6(0x20d)],'timeshift':_0x4a95a3[_0x4176f6(0x2f9)],'onepagemode':_0x4a95a3['onepagemode'],'headless':_0x4a95a3[_0x4176f6(0x25e)],'cooldown':_0x4a95a3[_0x4176f6(0x346)],'change24h':_0x4a95a3['change24h'],'emojibuy':_0x4a95a3['emojibuy'],'emojisell':_0x4a95a3[_0x4176f6(0x399)],'colorscheme':_0x4a95a3['colorscheme'],'marketcapApi':_0x4a95a3[_0x4176f6(0x27a)],'marketcapEnabled':_0x4a95a3['marketcapEnabled'],'portfolio':_0x4a95a3[_0x4176f6(0x23d)],'autoliquidity':_0x4a95a3[_0x4176f6(0x2e7)],'liquidity':_0x4a95a3['liquidity'],'openOrders':_0x4a95a3[_0x4176f6(0x2d5)]},dbConfig[_0x4176f6(0x359)](_0x4176f6(0x276))['remove']()[_0x4176f6(0x294)](),dbConfig[_0x4176f6(0x359)](_0x4176f6(0x276))[_0x4176f6(0x1f6)](_0x4a95a3)[_0x4176f6(0x294)]());}else _0x4a95a3={'botID':_0x2cc656,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x4176f6(0x320)+_0x2cc656,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x4176f6(0x32c),'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'onepagemode':settings[_0x4176f6(0x389)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x4176f6(0x312),'marketcapApi':settings[_0x4176f6(0x27a)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x4176f6(0x203),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4a95a3;}function emittedConfiguration(){const _0x2f0050=_0x3533c2;let _0x4ba232;if(config['apiKey']=='')_0x4ba232={...config,'configstate':_0x2f0050(0x2ce)};else config[_0x2f0050(0x26f)]==_0x2f0050(0x398)?_0x4ba232={...config,'configstate':'recovery'}:(_0x4ba232={...config,'apiKey':_0x2f0050(0x212),'apiSecret':'************'},config[_0x2f0050(0x2f4)]&&(_0x4ba232[_0x2f0050(0x2f4)]=_0x2f0050(0x212)));return _0x4ba232;}function getSettings(){const _0x4db827=_0x3533c2;return dbSettings['get']('settings')[_0x4db827(0x1ec)]();}function getSecure(){const _0x31493e=_0x3533c2;return dbSecure['get'](_0x31493e(0x362))[_0x31493e(0x1ec)]()||{};}function updateTimeshift(_0x43b645){const _0x2de8b0=_0x3533c2;let _0x292950=dbConfig['get'](_0x2de8b0(0x276))[_0x2de8b0(0x271)]({'botID':botID})['value']();_0x292950&&dbConfig[_0x2de8b0(0x359)]('bot')[_0x2de8b0(0x271)]({'botID':botID})[_0x2de8b0(0x319)]({'timeshift':_0x43b645})[_0x2de8b0(0x294)](),config[_0x2de8b0(0x2f9)]=_0x43b645,proxyEmit(_0x2de8b0(0x23c),emittedConfiguration());}function updateOnepagemode(_0x2443f6){const _0x28d226=_0x3533c2;let _0x503ee1=dbConfig[_0x28d226(0x359)]('bot')[_0x28d226(0x271)]({'botID':botID})[_0x28d226(0x1ec)]();_0x503ee1&&dbConfig[_0x28d226(0x359)](_0x28d226(0x276))[_0x28d226(0x271)]({'botID':botID})[_0x28d226(0x319)]({'onepagemode':_0x2443f6})[_0x28d226(0x294)](),config[_0x28d226(0x389)]=_0x2443f6,proxyEmit(_0x28d226(0x23c),emittedConfiguration());}function updateMarketcapApi(_0x568f39){const _0x48f924=_0x3533c2,_0x2e1acb=_0x568f39?!![]:![];let _0xfed920=dbConfig['get'](_0x48f924(0x276))[_0x48f924(0x271)]({'botID':botID})['value']();_0xfed920&&dbConfig[_0x48f924(0x359)](_0x48f924(0x276))['find']({'botID':botID})[_0x48f924(0x319)]({'marketcapApi':_0x2e1acb})[_0x48f924(0x294)](),config['marketcapApi']=_0x2e1acb,getMarketCap(),proxyEmit(_0x48f924(0x23c),emittedConfiguration());}async function storeConfiguration(_0x5c24b2){const _0x2cd0f0=_0x3533c2;logger[_0x2cd0f0(0x229)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x50d63d=![],_0x535c07=![],_0x1697ad=[];_0x5c24b2[_0x2cd0f0(0x23d)][_0x2cd0f0(0x2f7)](_0x566424=>{const _0x4cb494=_0x2cd0f0;if(!_0x566424[_0x4cb494(0x337)]&&_0x566424['coin']!=_0x5c24b2['basecoin'])_0x1697ad[_0x4cb494(0x1f6)](_0x566424[_0x4cb494(0x343)]);}),_0x1697ad[_0x2cd0f0(0x2f7)](_0xef17d9=>{const _0x272223=_0x2cd0f0,_0x215169=currentCoins[_0x272223(0x271)](_0x183e4e=>_0x183e4e['symbol']==_0xef17d9);!_0x215169&&(_0x50d63d=!![]);}),currentCoins[_0x2cd0f0(0x2f7)](_0x3a96f6=>{const _0x34f761=_0x2cd0f0;if(_0x3a96f6['coin']!=config[_0x34f761(0x24e)]){const _0x32a15d=_0x1697ad[_0x34f761(0x271)](_0x356508=>_0x356508==_0x3a96f6[_0x34f761(0x343)]);!_0x32a15d&&(_0x50d63d=!![]);}}),_0x5c24b2['portfolio'][_0x2cd0f0(0x2f7)](_0x10bfbd=>{const _0x10fedb=_0x2cd0f0,_0x3cf716=config[_0x10fedb(0x23d)][_0x10fedb(0x271)](_0x1861f7=>_0x1861f7['coin']==_0x10bfbd[_0x10fedb(0x382)]);if(_0x3cf716&&_0x10bfbd['offset']!=_0x3cf716[_0x10fedb(0x35b)])_0x535c07=!![];});let _0x594a43=dbConfig['get']('bot')[_0x2cd0f0(0x271)]({'botID':botID})['value']();_0x5c24b2={..._0x5c24b2,'apiKey':crypt['decrypt'](secure[_0x2cd0f0(0x39e)],_0x5c24b2['apiKey'])[_0x2cd0f0(0x27d)],'apiSecret':crypt[_0x2cd0f0(0x2bd)](secure[_0x2cd0f0(0x39e)],_0x5c24b2[_0x2cd0f0(0x344)])[_0x2cd0f0(0x27d)]};_0x5c24b2[_0x2cd0f0(0x2f4)]&&(_0x5c24b2[_0x2cd0f0(0x2f4)]=crypt[_0x2cd0f0(0x2bd)](secure[_0x2cd0f0(0x39e)],_0x5c24b2['apiPassword'])[_0x2cd0f0(0x27d)]);let _0x2e13a2=![];if(_0x594a43){_0x5c24b2[_0x2cd0f0(0x26f)]=='************'?_0x5c24b2[_0x2cd0f0(0x26f)]=config['apiKey']:_0x2e13a2=!![];_0x5c24b2[_0x2cd0f0(0x344)]==_0x2cd0f0(0x212)?_0x5c24b2[_0x2cd0f0(0x344)]=config[_0x2cd0f0(0x344)]:_0x2e13a2=!![];if(_0x5c24b2[_0x2cd0f0(0x2f4)]==_0x2cd0f0(0x212))_0x5c24b2[_0x2cd0f0(0x2f4)]=config[_0x2cd0f0(0x2f4)];else{if(_0x5c24b2[_0x2cd0f0(0x2f4)])_0x2e13a2=!![];}dbConfig[_0x2cd0f0(0x359)](_0x2cd0f0(0x276))[_0x2cd0f0(0x271)]({'botID':botID})['assign'](_0x5c24b2)[_0x2cd0f0(0x294)]();}else dbConfig[_0x2cd0f0(0x359)]('bot')[_0x2cd0f0(0x1f6)](_0x5c24b2)['write'](),_0x2e13a2=!![],process[_0x2cd0f0(0x24f)]({'status':_0x2cd0f0(0x1f4),'live':_0x2cd0f0(0x2e6)},_0xc17033=>{});process[_0x2cd0f0(0x24f)]({'botname':_0x5c24b2[_0x2cd0f0(0x366)]},_0x515ea9=>{}),config={..._0x5c24b2},updateBotManager(),proxyEmit(_0x2cd0f0(0x378)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x2e13a2)!_0x594a43?await reset(!![]):getBalances();else _0x50d63d||_0x535c07?await reset(![]):getBalances();setBlockTransactionDetection(![]);}function _0x1220(){const _0x53e4e4=['startsWith','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20|\x20','added','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','MIN_NOTIONAL','\x20metrics:</b>\x20\x0a\x0a','filter','basecoin','send','\x20value','length','Exception\x20thrown\x20in\x20','parse','toFixed','orderstatus','Unfilled\x20order(s)\x20canceled\x20after\x20','isEqual','\x20|\x20lock\x20orders:\x20','splice','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','2.6.22','market','watchTrades()','headless','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','date','Huobi','substring','event-history','data','abs','replace','2\x20-\x20Handled\x20open\x20orders','removed','price','function','Error\x20details:','Limit\x20(low-margin)','1\x20-\x20Handle\x20open\x20orders','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','apiKey','toUpperCase','find','2\x20-\x20handling\x20FILLED\x20order:\x20','/USD','\x20exchange','\x20>\x20[DEBUG]\x20','bot','735AkVOGF','join','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','marketcapApi','\x20MB','USDP','message','market_cap','toggleBotMode','1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20','last','\x20>\x20','Order\x20is\x20invalid:\x20','apply','<b>Bot\x20','getPortfolio','284575FxaoKU','bb-settings.json','exchange','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','has','basecoinvalue','change24h','InvalidOrder','getPortfolio(0)','watchTradesForSymbols()','no\x20open\x20orders','PAXG','Market','write','USDC','ORDERS.LOCKED','recent20','No\x20more\x20open\x20orders\x20-\x20','floor','getMinutes','watchOrders','keys','AuthenticationError','Net\x20effect','log','LOCKED','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','entries','marketcap','cost','bid','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','Unknown\x20error\x20occured','sha256','time','botID','Insufficient\x20funds\x20to\x20execute\x20order:\x20','startdate','API-key\x20format\x20invalid','EUR','sendPortfolioTelegram','filled','performance','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','RETRY\x20-\x20Problem\x20resolved\x20after\x20','loadMarkets','\x20change','exchange\x20reloaded','cancelLoading','set','OrderNotFound','\x20minutes\x20-\x20','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','\x20exchange\x20error','decrypt','quote','fetchOpenOrders','InsufficientFunds','Limit\x20(high-margin)','cancel','target','active','lowdb/adapters/FileSync','padEnd','\x20|\x20Custom\x20ID:\x20','getHours','valid','util','emojibuy','ETH','unlinkSync','initial','UNLOCKING','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','kill','amount','startprice','currency','openOrders','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','391867uYNeiU','watchTradesForSymbols','indexOf','balancing\x20resumed','DDoSProtection','fetchTickers()','RequestTimeout','BNB','toString','1\x20-\x20Validate\x20orders:\x20','OnMaintenance','getSeconds','final','getFullYear','1\x20-\x20FILLED\x20unknown\x20order:\x20','running','autoliquidity','fees','warning','watchTrades','pid','getPortfolio(2)','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','argv','event','showname',':\x20timer\x20>',',\x20must\x20be\x20a\x203\x20digit\x20number','apiPassword','Initializing\x20coin\x20results','format','forEach','path','timeshift','exec','cancelOrder','trade','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20:\x20',')\x20|\x20exchange:\x20','Error\x20while\x20deleting\x20files:\x20','amountToPrecision','Portfolio\x20change\x20detected:\x20','Block\x20transaction\x20detection:\x20','limit-high','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','pro','closed','usd','marketcapEnabled','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','Crypt','lowdb','side','freeze','storeHeadless','fetchBalance','2.5.0','red_yellow_blue','Loading\x20completed','ordertype','sells','sqrt','\x20order:\x20','/output-000.log','assign','axios','BNB/','1820925YZyRVw','recreateCoinResults()','getAllOrders()','2.6.0','Bot\x20','sortBy','progress','Bybit','871912YSVdEq','-performance.json','success','startnumber','50soIIup','2.3.5','-results.json','ask','USD','\x20>\x20details:','padStart','getTime','balances','hybrid-crypto-js','netoffset','4648GQPXtj','2\x20-\x20Validate\x20orders:\x20','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','excluded','net-fiat','loading-canceled','createOrder','logs','remove','yyyy/MM/dd','\x20-\x20','error','ORDERS.UNLOCKING','-events.json','delta','symbol','apiSecret','fetchTickers','cooldown','NetworkError','1\x20-\x20FILLED\x20known\x20order:\x20','starting-balance-','args','stringify','getMonth','detectLiquidityChange()','/EUR','liquidity','average','createWriteStream','findIndex','688820ZQqGfa','total','bot-','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','limits','Resetting\x20coin\x20results:\x20','get','toLowerCase','offset','request-time','net-basecoin','./logs/','orderId','mkdirSync','Huobipro','secure','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','\x20has\x20a\x2024h\x20drop\x20of\x20','memoryUsage','botname','2\x20-\x20Orders\x20unlocked','548886lQQbSl','cloneDeep','quick','split','existsSync','fromCodePoint','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','includes','spot','reverse','buys','Initiating\x20bot\x20restart','2.6.23','bb-secure.json','getOpenOrders()','\x20|\x20exchange:\x20','configuration-stored','./config/','placeOrder()','loadSymbols()','page','Symbol(s):\x20','map','30BAGata','<pre>','uncaughtException','coin','sell','realized','canceled','coin-loading-progress','BTC','version','onepagemode','round','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','/backup/','-config.json','percentage','open','buy','coins','UNLOCKED','Error:\x20Invalid\x20argument\x20','RETRY\x20-\x20Error\x20in\x20','%\x20(','<b>','rightTxt','***','emojisell','bots','ExchangeNotAvailable','ongoing','switch-manual','privateKey','starting-balances','initclient','slider','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','InvalidNonce','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','Fee\x20discount\x20refund\x20detected:\x20','exchanges','type','</pre>','getDate','value','\x20uses\x20','defaults','-------------------------------\x0a','Order\x20filled:\x20','Cryptocom','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)','leftTxt','enabled',':\x20Bot\x20','push','storeFiat','placeOrder','fetchTicker','timeout','remainingSymbols','customId','getCoins()','shift','fiat','date-fns','Invalid\x20API\x20key,\x20secret\x20or\x20password\x20entered','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','update-liquidity','\x20minutes','datetime','eur','(((.+)+)+)+$','number','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','status\x20code\x20401','001','recreate','storeConfiguration','getStartingBalances','sort','limit-low','************','limit','TUSD','initTickers()','RateLimitExceeded','distribution','min','getPortfolio(1)','threshold','\x20orders\x20in\x20less\x20than\x20','change','showConfig','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','fee','Avoiding\x20continuous\x20order\x20attempts','Waited\x20','string','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','changes','Invalid\x20quantity','order','\x20/\x20','resetHistory','debug','concat','heapUsed','timestamp','fetchClosedOrders','Resetting\x20bot\x20history','USDT','\x20hour','none','watchOrders()','RSA-OAEP','emitHistory','status','full','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','Order\x20amount\x20is\x20invalid:\x20','Reset\x20|\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','restart','configuration','portfolio','\x20-\x20pausing\x20bot\x20for\x20','max','./version.json','code','slice','ExchangeError','password','highest'];_0x1220=function(){return _0x53e4e4;};return _0x1220();}async function storeHeadless(_0x40d69b){const _0x459b67=_0x3533c2,_0x5bdd83={...config,'headless':_0x40d69b[_0x459b67(0x25e)]};let _0x512ed7=dbConfig['get'](_0x459b67(0x276))[_0x459b67(0x271)]({'botID':botID})[_0x459b67(0x1ec)]();_0x512ed7&&dbConfig[_0x459b67(0x359)](_0x459b67(0x276))[_0x459b67(0x271)]({'botID':botID})[_0x459b67(0x319)](_0x5bdd83)[_0x459b67(0x294)](),config={..._0x5bdd83},updateBotManager(),proxyEmit(_0x459b67(0x23c),emittedConfiguration());}async function storeFiat(_0x404bdd){const _0xb25f15=_0x3533c2,_0x49a396={...config,'fiat':_0x404bdd};let _0x5c91d8=dbConfig[_0xb25f15(0x359)](_0xb25f15(0x276))[_0xb25f15(0x271)]({'botID':botID})[_0xb25f15(0x1ec)]();_0x5c91d8&&dbConfig[_0xb25f15(0x359)](_0xb25f15(0x276))[_0xb25f15(0x271)]({'botID':botID})[_0xb25f15(0x319)](_0x49a396)[_0xb25f15(0x294)](),config={..._0x49a396},proxyEmit(_0xb25f15(0x23c),emittedConfiguration());}function resetHistory(){const _0xfd926a=_0x3533c2;logger[_0xfd926a(0x236)](_0xfd926a(0x22e));try{if(fs[_0xfd926a(0x36c)](path['join'](configpath,_0xfd926a(0x355)+botID+_0xfd926a(0x341))))fs[_0xfd926a(0x2cd)](path[_0xfd926a(0x278)](configpath,_0xfd926a(0x355)+botID+'-events.json'));if(fs['existsSync'](path[_0xfd926a(0x278)](configpath,_0xfd926a(0x355)+botID+_0xfd926a(0x325))))fs[_0xfd926a(0x2cd)](path[_0xfd926a(0x278)](configpath,_0xfd926a(0x355)+botID+_0xfd926a(0x325)));if(fs[_0xfd926a(0x36c)](path[_0xfd926a(0x278)](configpath,_0xfd926a(0x355)+botID+_0xfd926a(0x32a))))fs[_0xfd926a(0x2cd)](path['join'](configpath,_0xfd926a(0x355)+botID+_0xfd926a(0x32a)));}catch(_0x3e1291){if(_0x3e1291)logger[_0xfd926a(0x236)](_0xfd926a(0x300),_0x3e1291);}const _0x20a838=getDate();let _0x3e2a3a=[];currentCoins[_0xfd926a(0x2f7)](_0x5cb481=>{const _0x2e0dd0=_0xfd926a;_0x3e2a3a[_0x2e0dd0(0x1f6)]({'coin':_0x5cb481[_0x2e0dd0(0x382)],'number':_0x5cb481['number'],'price':_0x5cb481[_0x2e0dd0(0x281)]});});let _0x4eedde=dbConfig[_0xfd926a(0x359)](_0xfd926a(0x276))[_0xfd926a(0x271)]({'botID':botID})[_0xfd926a(0x1ec)]();_0x4eedde&&(dbConfig[_0xfd926a(0x359)](_0xfd926a(0x276))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x20a838,'changes':_0x3e2a3a}]})[_0xfd926a(0x294)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x1551de){const _0x3b068e=_0x3533c2;return _0x1551de[_0x3b068e(0x266)]('/','');}function updateHighestFee(_0x27979b){const _0x3361e7=_0x3533c2;if(_0x27979b[_0x3361e7(0x371)]){let _0x3b38ff={'filled':_0x27979b[_0x3361e7(0x2b0)]*_0x27979b[_0x3361e7(0x269)],'amount':_0x27979b[_0x3361e7(0x2b0)]*_0x27979b[_0x3361e7(0x269)],'side':_0x27979b['side']==_0x3361e7(0x383)?_0x3361e7(0x390):'sell','price':0x1/_0x27979b[_0x3361e7(0x269)]};_0x27979b={..._0x27979b,..._0x3b38ff};}const _0x3cf1d4=defaultFee*_0x27979b[_0x3361e7(0x2b0)]*_0x27979b[_0x3361e7(0x269)];lastFees[_0x3361e7(0x297)]['length']===0x14&&lastFees[_0x3361e7(0x297)][_0x3361e7(0x1fe)](),lastFees['recent20'][_0x3361e7(0x1f6)](_0x3cf1d4),lastFees[_0x3361e7(0x245)]=Math[_0x3361e7(0x23f)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x47fdae){const _0x48b581=_0x3533c2;logger[_0x48b581(0x229)]('0\x20-\x20EXECUTION:\x20'+_0x47fdae['symbol']+'\x20|\x20'+_0x47fdae[_0x48b581(0x235)]+_0x48b581(0x248)+_0x47fdae[_0x48b581(0x2b0)]+_0x48b581(0x227)+_0x47fdae[_0x48b581(0x2d2)]+_0x48b581(0x248)+_0x47fdae['id']);let _0x2598c0=_0x47fdae[_0x48b581(0x235)],_0x311437=![];currentCoins['forEach'](_0x33197c=>{const _0x3ab57b=_0x48b581;_0x33197c[_0x3ab57b(0x343)]==_0x47fdae['symbol']&&(_0x311437=!![]);});if(!_0x311437)return;const _0x1231df=currentCoins[_0x48b581(0x271)](_0xc49ad3=>_0xc49ad3['symbol']==_0x47fdae[_0x48b581(0x343)]),_0x4fc882=_0x257664=>{if(_0x1231df)_0x1231df['orderstatus']=_0x257664;};let _0x562be8=![];for(const _0x493c85 of lastOrders){const _0x4ee5bd=0x64,_0x12a2d5=0x1388;let _0x35e768=0x0;while(!_0x493c85[_0x48b581(0x35f)]&&_0x35e768*_0x4ee5bd<_0x12a2d5){_0x35e768++,await sleep(_0x4ee5bd);}if(_0x35e768>0x0)logger[_0x48b581(0x229)](_0x48b581(0x221)+_0x35e768*_0x4ee5bd/0x3e8+_0x48b581(0x23a));_0x493c85[_0x48b581(0x35f)]==_0x47fdae['id']&&(_0x562be8=!![]);}if(_0x2598c0=='open')_0x4fc882(_0x48b581(0x38f)),_0x47fdae[_0x48b581(0x2b0)]>0x0&&(_0x562be8?(logger[_0x48b581(0x229)]('1\x20-\x20partially\x20FILLED\x20known\x20order:\x20'+_0x47fdae['id']),setBlockTransactionDetection(!![])):(logger[_0x48b581(0x229)](_0x48b581(0x280)+_0x47fdae['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay)));else{if(_0x2598c0==_0x48b581(0x385)){_0x4fc882('canceled');const _0x257558=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x257558,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x2598c0==_0x48b581(0x307)){if(lastOrders)for(const _0x3d52bb of lastOrders){if(_0x3d52bb['orderId']==_0x47fdae['id']){logger[_0x48b581(0x229)](_0x48b581(0x348)+_0x47fdae['id']),_0x562be8=!![];if(_0x3d52bb[_0x48b581(0x2b0)]==0x0){logger['debug'](_0x48b581(0x272)+_0x47fdae['id']);if(_0x47fdae[_0x48b581(0x350)])_0x3d52bb['price']=_0x47fdae[_0x48b581(0x350)];else{if(_0x47fdae[_0x48b581(0x269)])_0x3d52bb['price']=_0x47fdae[_0x48b581(0x269)];else{}}_0x3d52bb[_0x48b581(0x2b0)]=_0x47fdae[_0x48b581(0x2b0)],updateHighestFee(_0x3d52bb),_0x4fc882(_0x48b581(0x2b0)),await validateOrders();if(lockOrders==ORDERS[_0x48b581(0x2a0)]){const _0x331e5c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x331e5c,setBlockTransactionDetection(![]);}_0x3d52bb[_0x48b581(0x21f)]={'currency':_0x47fdae[_0x48b581(0x21f)]?_0x47fdae[_0x48b581(0x21f)][_0x48b581(0x2d4)]:null,'cost':_0x47fdae[_0x48b581(0x21f)]?_0x47fdae['fee'][_0x48b581(0x2a4)]:0x0},await updateCoinResults(_0x3d52bb);}}}!_0x562be8&&(logger[_0x48b581(0x229)](_0x48b581(0x2e5)+_0x47fdae['id']),_0x4fc882('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x487044=JSON[_0x48b581(0x253)](lastBalances[_0x48b581(0x23d)]);const _0x546a55=_0x487044['find'](_0x53c512=>_0x53c512[_0x48b581(0x343)]==_0x47fdae['symbol']);if(_0x546a55){if(_0x2598c0==_0x48b581(0x38f))_0x546a55[_0x48b581(0x255)]=_0x546a55[_0x48b581(0x255)]=='filled'?_0x48b581(0x2b0):_0x48b581(0x38f);else{if(_0x2598c0==_0x48b581(0x385))_0x546a55[_0x48b581(0x255)]=_0x546a55[_0x48b581(0x255)]==_0x48b581(0x2b0)?_0x48b581(0x2b0):'canceled';else _0x2598c0==_0x48b581(0x307)&&(_0x546a55['orderstatus']='filled');}}lastBalances={...lastBalances,'portfolio':JSON[_0x48b581(0x34b)](_0x487044)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2c0e6e=_0x3533c2;await getOpenOrders();let _0x73da83=![];currentCoins[_0x2c0e6e(0x2f7)](_0x41b26c=>{const _0x50e244=_0x2c0e6e;_0x73da83=allOpenOrders[_0x50e244(0x271)](_0x5035d2=>_0x5035d2[_0x50e244(0x343)]==_0x41b26c[_0x50e244(0x343)]),_0x41b26c[_0x50e244(0x255)]=_0x73da83?_0x50e244(0x38f):_0x50e244(0x231);});}async function getCoins(_0x3906df=0x0,_0x275a57=!![],_0x2bab6a=config[_0x3533c2(0x24e)]){const _0x789fe5=_0x3533c2;let _0x26cb92,_0x3fbb01=[],_0x31723d=[],_0x14b36f=[];if(_0x3906df)await sleep(_0x3906df);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x26cb92=await exchange['fetchBalance'](),mybalances=_0x26cb92[_0x789fe5(0x354)];for(const [_0x39714c,_0x2de326]of Object[_0x789fe5(0x2a2)](mybalances)){_0x14b36f[_0x789fe5(0x1f6)](_0x39714c);}config[_0x789fe5(0x23d)]['forEach'](_0x35d71f=>{const _0x51dc93=_0x789fe5;!_0x14b36f[_0x51dc93(0x36f)](_0x35d71f[_0x51dc93(0x382)])&&(mybalances[_0x35d71f[_0x51dc93(0x382)]]=0x0);});if(_0x2bab6a=='')for(const [_0x2d9d4c,_0x319837]of Object[_0x789fe5(0x2a2)](mybalances)){_0x319837!=0x0&&_0x3fbb01[_0x789fe5(0x1f6)]({'coin':_0x2d9d4c});}else for(const [_0x2dd7ea,_0x11c8ac]of Object['entries'](mybalances)){const _0x8b5f72=config['portfolio'][_0x789fe5(0x271)](_0x232aa4=>_0x232aa4[_0x789fe5(0x382)]==_0x2dd7ea),_0x5225cd=_0x2dd7ea+'/'+_0x2bab6a,_0x1a46a8=_0x2bab6a+'/'+_0x2dd7ea,_0x25b35c=currentCoins[_0x789fe5(0x271)](_0x209d07=>_0x209d07[_0x789fe5(0x382)]==_0x2dd7ea);if((_0x11c8ac!=0x0||_0x8b5f72)&&(allSymbols[_0x789fe5(0x36f)](_0x5225cd)||_0x2dd7ea==_0x2bab6a))_0x25b35c?_0x3fbb01[_0x789fe5(0x1f6)]({..._0x25b35c,'number':Math[_0x789fe5(0x23f)](_0x11c8ac+(_0x8b5f72&&_0x8b5f72['offset']||0x0),0x0)}):_0x3fbb01['push']({'coin':_0x2dd7ea,'symbol':_0x5225cd,'reverse':![],'number':Math[_0x789fe5(0x23f)](_0x11c8ac+(_0x8b5f72&&_0x8b5f72[_0x789fe5(0x35b)]||0x0),0x0),'orderstatus':'none'});else{if((_0x11c8ac!=0x0||_0x8b5f72)&&allSymbols['includes'](_0x1a46a8))_0x25b35c?_0x3fbb01[_0x789fe5(0x1f6)]({..._0x25b35c,'number':Math[_0x789fe5(0x23f)](_0x11c8ac+(_0x8b5f72&&_0x8b5f72[_0x789fe5(0x35b)]||0x0),0x0)}):_0x3fbb01[_0x789fe5(0x1f6)]({'coin':_0x2dd7ea,'symbol':_0x1a46a8,'reverse':!![],'number':Math[_0x789fe5(0x23f)](_0x11c8ac+(_0x8b5f72&&_0x8b5f72[_0x789fe5(0x35b)]||0x0),0x0),'orderstatus':_0x789fe5(0x231)});else _0x8b5f72&&_0x3fbb01[_0x789fe5(0x1f6)]({'coin':_0x8b5f72[_0x789fe5(0x382)],'symbol':_0x8b5f72['symbol'],'reverse':_0x8b5f72['reverse'],'number':0x0,'orderstatus':_0x789fe5(0x231)});}}}catch(_0x29d237){if(!_0x275a57)handleErrorNoStop(_0x29d237,_0x789fe5(0x1fd));else await handleError(_0x29d237,_0x789fe5(0x1fd));}return _0x3fbb01[_0x789fe5(0x210)]((_0x4b47f5,_0x3c85cf)=>_0x4b47f5[_0x789fe5(0x342)]<_0x3c85cf['delta']?0x1:_0x3c85cf[_0x789fe5(0x342)]<_0x4b47f5[_0x789fe5(0x342)]?-0x1:0x0),_0x31723d=cloneDeep(_0x3fbb01),_0x3fbb01=_0x3fbb01[_0x789fe5(0x24d)](_0x5d7f73=>{const _0x2ab984=_0x789fe5,_0x3296c2=config[_0x2ab984(0x23d)]['find'](_0x543c81=>_0x543c81[_0x2ab984(0x382)]==_0x5d7f73[_0x2ab984(0x382)]);return _0x3296c2&&!_0x3296c2['excluded'];}),[_0x3fbb01,_0x31723d];}async function getCoinNumber(_0xf1bb61){const _0x1db991=_0x3533c2;let _0x10000f;try{const _0x16f677=await exchange[_0x1db991(0x310)]();_0x10000f=_0x16f677[_0x1db991(0x354)][_0xf1bb61];}catch(_0x1a515a){await handleError(_0x1a515a,'getCoinNumber()');}return _0x10000f;}async function getOpenOrders(){const _0x5d5f6d=_0x3533c2;let _0x85b9c7;allOpenOrders=[];try{for(const _0x126d02 of config[_0x5d5f6d(0x23d)]){!_0x126d02[_0x5d5f6d(0x337)]&&_0x126d02[_0x5d5f6d(0x382)]!=config[_0x5d5f6d(0x24e)]&&(_0x85b9c7=await exchange[_0x5d5f6d(0x2bf)](_0x126d02['symbol']),_0x85b9c7['length']>0x0&&allOpenOrders['push'](_0x85b9c7[0x0]));}}catch(_0x40dc65){await handleError(_0x40dc65,_0x5d5f6d(0x376));}}async function handleOpenOrders(_0x45a9ef=0x0){const _0x2fa434=_0x3533c2;allOpenOrders[_0x2fa434(0x251)]==0x0&&lockOrders==ORDERS[_0x2fa434(0x2a0)]&&allOrdersPlaced&&(_0x45a9ef==0x0?(logger[_0x2fa434(0x229)](_0x2fa434(0x26d)),_0x45a9ef++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2fa434(0x229)](_0x2fa434(0x267)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x49c2b5){const _0x25a92f=_0x3533c2,_0x1484f3=ccxt[_0x25a92f(0x306)][_0x49c2b5[_0x25a92f(0x289)]['toLowerCase']()],_0x5a02c8=new _0x1484f3({'apiKey':_0x49c2b5[_0x25a92f(0x26f)],'secret':_0x49c2b5[_0x25a92f(0x344)],'options':{'defaultType':_0x25a92f(0x370)}});if(_0x49c2b5[_0x25a92f(0x2f4)])_0x5a02c8[_0x25a92f(0x244)]=_0x49c2b5[_0x25a92f(0x2f4)];try{await _0x5a02c8[_0x25a92f(0x310)]();}catch(_0x5dcffc){throw _0x5dcffc;}}function cloneDeep(_0x4352d1){const _0x58de99=_0x3533c2;return JSON[_0x58de99(0x253)](JSON['stringify'](_0x4352d1));}async function getPortfolio(_0x3c400b){const _0x12e6b1=_0x3533c2;let _0x4dffd3=[],_0x3ce9ce=[],_0x5f52bc=[],_0x48f08f;if(_0x3c400b[_0x12e6b1(0x26f)]!=='************'||_0x3c400b['apiSecret']!=='************'||_0x3c400b[_0x12e6b1(0x2f4)]&&_0x3c400b[_0x12e6b1(0x2f4)]!==_0x12e6b1(0x212)){if(config[_0x12e6b1(0x289)]){if(_0x3c400b[_0x12e6b1(0x26f)]==_0x12e6b1(0x212))_0x3c400b[_0x12e6b1(0x26f)]=config[_0x12e6b1(0x26f)];if(_0x3c400b[_0x12e6b1(0x344)]==_0x12e6b1(0x212))_0x3c400b[_0x12e6b1(0x344)]=config[_0x12e6b1(0x344)];if(_0x3c400b[_0x12e6b1(0x2f4)]=='************')_0x3c400b['apiPassword']=config[_0x12e6b1(0x2f4)];try{await testAPI(_0x3c400b);}catch(_0x6cebda){if(_0x6cebda[_0x12e6b1(0x2df)]()[_0x12e6b1(0x36f)](_0x12e6b1(0x29d))){logger[_0x12e6b1(0x229)](_0x12e6b1(0x201)),proxyEmit(_0x12e6b1(0x23d),![]);return;}else{handleError(_0x6cebda,_0x12e6b1(0x28f));return;}}}config['exchange']?updateExchange(_0x3c400b[_0x12e6b1(0x26f)],_0x3c400b['apiSecret'],_0x3c400b[_0x12e6b1(0x2f4)]):await initExchange(_0x3c400b[_0x12e6b1(0x289)],_0x3c400b[_0x12e6b1(0x26f)],_0x3c400b[_0x12e6b1(0x344)],_0x3c400b['apiPassword']);try{await loadSymbols();}catch(_0xdc627c){if(_0xdc627c[_0x12e6b1(0x2df)]()['includes'](_0x12e6b1(0x29d))){proxyEmit('portfolio',![]);return;}else{handleError(_0xdc627c,_0x12e6b1(0x219));return;}}const _0x1b6089=await getCoins(0x0,![],_0x3c400b['basecoin']);_0x5f52bc=cloneDeep(_0x1b6089[0x1]);}else{const _0x2b0f35=await getCoins();_0x5f52bc=cloneDeep(_0x2b0f35[0x1]);}if(_0x3c400b[_0x12e6b1(0x24e)]=='')proxyEmit('portfolio',_0x5f52bc);else{_0x5f52bc[_0x12e6b1(0x2f7)](_0xd74ee3=>{const _0x10863c=_0x12e6b1;if(_0xd74ee3[_0x10863c(0x382)]!=_0x3c400b['basecoin']&&allSymbols['includes'](_0xd74ee3[_0x10863c(0x343)]))_0x4dffd3['push'](_0xd74ee3[_0x10863c(0x343)]);});if(_0x4dffd3[_0x12e6b1(0x251)]==0x0)logHistory(_0x12e6b1(0x33f),_0x12e6b1(0x2a1));else{try{_0x3ce9ce=await getTickers(_0x4dffd3);}catch(_0x27a37b){if(_0x27a37b[_0x12e6b1(0x2df)]()[_0x12e6b1(0x36f)](_0x12e6b1(0x29d))){proxyEmit('portfolio',![]);return;}else handleError(_0x27a37b,_0x12e6b1(0x2ec));}_0x5f52bc[_0x12e6b1(0x2f7)](_0x2a41ad=>{const _0x1c7e61=_0x12e6b1;_0x2a41ad[_0x1c7e61(0x382)]!=_0x3c400b['basecoin']?_0x3ce9ce[_0x2a41ad['symbol']]?_0x48f08f=_0x2a41ad[_0x1c7e61(0x371)]?0x1/_0x3ce9ce[_0x2a41ad[_0x1c7e61(0x343)]][_0x1c7e61(0x281)]:_0x3ce9ce[_0x2a41ad[_0x1c7e61(0x343)]][_0x1c7e61(0x281)]:_0x48f08f=0x0:_0x48f08f=0x1,_0x2a41ad['price']=formatResult(_0x48f08f,0x8);}),await getMarketCap(_0x5f52bc),proxyEmit(_0x12e6b1(0x23d),_0x5f52bc);}}}function truncateTradeAmount(_0x29d577,_0x44d913){const _0x55be49=_0x3533c2;let _0xca6770=0x0;try{_0xca6770=exchange[_0x55be49(0x301)](_0x29d577,_0x44d913);}catch(_0xf23641){}return _0xca6770;}function checkMinimums(_0x57eb45){const _0x4d1df6=_0x3533c2;let _0x69887e=!![];const _0x40473b=!_0x57eb45['reverse']?markets[_0x57eb45[_0x4d1df6(0x343)]][_0x4d1df6(0x357)][_0x4d1df6(0x2d2)][_0x4d1df6(0x218)]:markets[_0x57eb45[_0x4d1df6(0x343)]][_0x4d1df6(0x357)]['cost'][_0x4d1df6(0x218)],_0x48289e=!_0x57eb45['reverse']?markets[_0x57eb45['symbol']][_0x4d1df6(0x357)][_0x4d1df6(0x2a4)][_0x4d1df6(0x218)]:markets[_0x57eb45[_0x4d1df6(0x343)]]['limits'][_0x4d1df6(0x2d2)][_0x4d1df6(0x218)],_0x24587c=truncateTradeAmount(_0x57eb45['symbol'],_0x57eb45['trade']);_0x57eb45[_0x4d1df6(0x2fc)]=_0x24587c;if(Math[_0x4d1df6(0x265)](_0x24587c)<_0x40473b)_0x69887e=![];if(Math[_0x4d1df6(0x265)](_0x24587c)*_0x57eb45[_0x4d1df6(0x281)]<_0x48289e)_0x69887e=![];if(_0x57eb45[_0x4d1df6(0x30d)]==_0x4d1df6(0x383)){let _0x58bdf=config[_0x4d1df6(0x23d)][_0x4d1df6(0x271)](_0x5d7a06=>_0x5d7a06['coin']==_0x57eb45[_0x4d1df6(0x382)]);if(_0x58bdf['offset']>0x0){if(Math[_0x4d1df6(0x265)](_0x24587c)>_0x57eb45[_0x4d1df6(0x208)]-_0x58bdf[_0x4d1df6(0x35b)])_0x69887e=![];}else{if(Math[_0x4d1df6(0x265)](_0x24587c)>_0x57eb45[_0x4d1df6(0x208)])_0x69887e=![];}}if(_0x57eb45[_0x4d1df6(0x30d)]==_0x4d1df6(0x390)){let _0x3dcd13=config['portfolio'][_0x4d1df6(0x271)](_0x23319c=>_0x23319c[_0x4d1df6(0x382)]==config['basecoin']),_0x3c1e21=currentCoins['find'](_0x22e2be=>_0x22e2be['coin']==config['basecoin']);if(_0x3dcd13[_0x4d1df6(0x35b)]>0x0){if(Math[_0x4d1df6(0x265)](_0x24587c)*_0x57eb45[_0x4d1df6(0x281)]>_0x3c1e21[_0x4d1df6(0x208)]-_0x3dcd13['offset'])_0x69887e=![];}else{if(Math[_0x4d1df6(0x265)](_0x24587c)*_0x57eb45['last']>_0x3c1e21['number'])_0x69887e=![];}}return _0x69887e;}async function getBalances(_0x422a24=!![]){const _0x125ea6=_0x3533c2;let _0x28edd7=0x0,_0x191c7c;const _0x2366cd=config['threshold'];if(config[_0x125ea6(0x25e)]&&config[_0x125ea6(0x28d)]<0x0)await validate24hChanges();currentCoins[_0x125ea6(0x2f7)](_0xebb09a=>{const _0x1368dd=_0x125ea6;if(_0xebb09a[_0x1368dd(0x382)]!=config['basecoin']){let _0x57b7ea=gTicker[noslash(_0xebb09a[_0x1368dd(0x343)])];_0x191c7c=_0xebb09a['reverse']?0x1/_0x57b7ea:_0x57b7ea;}else _0x191c7c=0x1;let _0x8e6e88=_0xebb09a['number']*_0x191c7c;_0x28edd7+=_0x8e6e88,_0xebb09a[_0x1368dd(0x281)]=formatResult(Number(_0x191c7c),0x8),_0xebb09a[_0x1368dd(0x1ec)]=_0x8e6e88;}),currentCoins[_0x125ea6(0x2f7)](_0xa8d6ba=>{const _0xa9810c=_0x125ea6;let _0x5db8cc=config[_0xa9810c(0x23d)][_0xa9810c(0x271)](_0x1374b3=>_0x1374b3[_0xa9810c(0x382)]==_0xa8d6ba['coin']),_0x203fe0=Number(_0x5db8cc[_0xa9810c(0x217)]),_0x45dcc8=_0xa8d6ba[_0xa9810c(0x1ec)]/_0x28edd7*0x64,_0x3059d5=_0x203fe0*_0x28edd7/0x64/_0xa8d6ba['last']-_0xa8d6ba[_0xa9810c(0x208)];_0xa8d6ba[_0xa9810c(0x217)]=formatResult(_0x45dcc8,0x3),_0xa8d6ba['target']=formatResult(_0x203fe0,0x3),_0xa8d6ba[_0xa9810c(0x2fc)]=formatResult(_0x3059d5,0x8),_0xa8d6ba[_0xa9810c(0x30d)]='',_0xa8d6ba[_0xa9810c(0x2c9)]=![];if(_0xa8d6ba['coin']!=config[_0xa9810c(0x24e)]){if(_0xa8d6ba[_0xa9810c(0x217)]>_0x203fe0)_0xa8d6ba[_0xa9810c(0x30d)]=_0xa9810c(0x383),_0xa8d6ba[_0xa9810c(0x2c9)]=checkMinimums(_0xa8d6ba);else _0xa8d6ba[_0xa9810c(0x217)]<_0x203fe0&&(_0xa8d6ba['side']='buy',_0xa8d6ba[_0xa9810c(0x2c9)]=checkMinimums(_0xa8d6ba));}_0xa8d6ba[_0xa9810c(0x342)]=_0xa8d6ba[_0xa9810c(0x217)]/_0xa8d6ba['target']-0x1;if(_0xa8d6ba['orderstatus']=='filled'||_0xa8d6ba[_0xa9810c(0x255)]==_0xa9810c(0x385))_0xa8d6ba[_0xa9810c(0x255)]=_0xa9810c(0x231);}),currentCoins[_0x125ea6(0x210)]((_0x51ef42,_0x499de2)=>_0x51ef42[_0x125ea6(0x342)]<_0x499de2[_0x125ea6(0x342)]?0x1:_0x499de2[_0x125ea6(0x342)]<_0x51ef42[_0x125ea6(0x342)]?-0x1:0x0);const _0x286a9f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x286a9f['eur'],'usd':_0x286a9f[_0x125ea6(0x308)],'portfolio':JSON[_0x125ea6(0x34b)](currentCoins),'threshold':_0x2366cd},proxyEmit(_0x125ea6(0x330),{'serverversion':serverversion,'balances':lastBalances});if(_0x422a24){if(config[_0x125ea6(0x25e)])headlessMode({'portfolio':currentCoins,'threshold':_0x2366cd});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2366cd});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x181f83=getNormalizedPerformance();getStartingBalances(_0x181f83),emitPerformance(_0x181f83);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3b6dec=_0x3533c2;if(!lastBalances)return;let _0x322f11=[],_0x4ecaff,_0x34b63b=JSON['parse'](lastBalances[_0x3b6dec(0x23d)]);_0x34b63b['sort']((_0x389cf9,_0x5f25a8)=>_0x389cf9[_0x3b6dec(0x382)]>_0x5f25a8[_0x3b6dec(0x382)]?0x1:_0x5f25a8[_0x3b6dec(0x382)]>_0x389cf9[_0x3b6dec(0x382)]?-0x1:0x0),_0x34b63b[_0x3b6dec(0x2f7)](_0x38e36e=>{const _0x534952=_0x3b6dec;let _0x369a9a={'coin':_0x38e36e[_0x534952(0x382)],'number':_0x38e36e[_0x534952(0x208)],'price':_0x38e36e['last']};_0x322f11[_0x534952(0x1f6)](_0x369a9a);});const _0x59d51b=await getFiat();_0x4ecaff={'date':lastBalances[_0x3b6dec(0x2a9)][_0x3b6dec(0x36b)]('\x20')[0x0],'eur':_0x59d51b['eur'],'usd':_0x59d51b[_0x3b6dec(0x308)],'coins':_0x322f11};let _0x546ade=dbPerformance[_0x3b6dec(0x359)](_0x3b6dec(0x264))[_0x3b6dec(0x271)]({'date':_0x4ecaff['date']})[_0x3b6dec(0x1ec)]();_0x546ade?_0x4ecaff[_0x3b6dec(0x260)]!=config['startdate']&&dbPerformance['get']('data')[_0x3b6dec(0x271)]({'date':_0x4ecaff[_0x3b6dec(0x260)]})['assign'](_0x4ecaff)[_0x3b6dec(0x294)]():dbPerformance['get'](_0x3b6dec(0x264))['push'](_0x4ecaff)[_0x3b6dec(0x294)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x1abfad=_0x3533c2;let _0x3c45e1=[];if(dbPerformance['has'](_0x1abfad(0x264))[_0x1abfad(0x1ec)]()){let _0x5b4727=dbPerformance[_0x1abfad(0x359)](_0x1abfad(0x264))[_0x1abfad(0x369)]()[_0x1abfad(0x24d)](_0x22587c=>{const _0x1a14e2=_0x1abfad;if(_0x22587c[_0x1a14e2(0x391)][_0x1a14e2(0x251)]==0x0)return![];else return!![];})['sortBy'](_0x1abfad(0x260))[_0x1abfad(0x1ec)](),_0x297c7b=[...config[_0x1abfad(0x34f)]];_0x297c7b[_0x1abfad(0x210)]((_0x34bc40,_0x2639a9)=>_0x34bc40[_0x1abfad(0x260)]>_0x2639a9[_0x1abfad(0x260)]?-0x1:_0x2639a9[_0x1abfad(0x260)]>_0x34bc40[_0x1abfad(0x260)]?0x1:0x0);let _0x20fdac=0x1,_0x504a9d=[],_0x345ecc=0x0;_0x5b4727['slice']()[_0x1abfad(0x371)]()[_0x1abfad(0x2f7)]((_0x382a80,_0x288ad4)=>{const _0x1c3ccc=_0x1abfad;if(_0x297c7b[_0x345ecc]){if(_0x5b4727[_0x5b4727[_0x1c3ccc(0x251)]-_0x288ad4]&&_0x297c7b[_0x345ecc][_0x1c3ccc(0x260)]==_0x5b4727[_0x5b4727[_0x1c3ccc(0x251)]-_0x288ad4]['date']){if(_0x288ad4<_0x5b4727[_0x1c3ccc(0x251)]){let _0x2c45d1=0x0,_0x35cc67=0x0;_0x5b4727[_0x5b4727[_0x1c3ccc(0x251)]-_0x288ad4][_0x1c3ccc(0x391)][_0x1c3ccc(0x2f7)](_0x1ff5e8=>{const _0x42deac=_0x1c3ccc;_0x35cc67+=_0x1ff5e8[_0x42deac(0x208)]*_0x1ff5e8[_0x42deac(0x269)];}),_0x297c7b[_0x345ecc][_0x1c3ccc(0x224)]['forEach'](_0x3c8fc1=>{const _0x3a083a=_0x1c3ccc;_0x2c45d1+=_0x3c8fc1[_0x3a083a(0x208)]*_0x3c8fc1['price'];}),_0x20fdac*=_0x2c45d1/(_0x35cc67-_0x2c45d1)+0x1;}_0x345ecc++;}}let _0x1a6179=0x0;_0x382a80[_0x1c3ccc(0x391)][_0x1c3ccc(0x2f7)](_0x314537=>{const _0x2ee39a=_0x1c3ccc;_0x1a6179+=_0x314537[_0x2ee39a(0x208)]*_0x314537[_0x2ee39a(0x269)];}),_0x504a9d[_0x5b4727[_0x1c3ccc(0x251)]-_0x288ad4-0x1]=_0x1a6179*(_0x20fdac-0x1);});let _0x3f54c1=[];_0x297c7b=[...config[_0x1abfad(0x34f)]]||[];let _0x5a4f53=0x0;_0x345ecc=0x0,_0x5b4727[_0x1abfad(0x2f7)]((_0x3fe00e,_0x18925c)=>{const _0x1727d8=_0x1abfad;if(_0x297c7b[_0x345ecc]){const _0xb4d2f8=fns[_0x1727d8(0x253)](_0x297c7b[_0x345ecc][_0x1727d8(0x260)],_0x1727d8(0x33d),new Date()),_0x118380=fns[_0x1727d8(0x253)](_0x3fe00e['date'],_0x1727d8(0x33d),new Date());if(fns['isEqual'](_0xb4d2f8,_0x118380)){let _0x29d34e=0x0;_0x297c7b[_0x345ecc][_0x1727d8(0x224)]['forEach'](_0x38e1a1=>{const _0x51aee2=_0x1727d8;!_0x3f54c1[_0x38e1a1[_0x51aee2(0x382)]]?_0x3f54c1[_0x38e1a1[_0x51aee2(0x382)]]=_0x38e1a1[_0x51aee2(0x208)]:(_0x29d34e=_0x3f54c1[_0x38e1a1[_0x51aee2(0x382)]],_0x3f54c1[_0x38e1a1[_0x51aee2(0x382)]]+=_0x38e1a1[_0x51aee2(0x208)]);const _0x57f561=_0x3fe00e['coins'][_0x51aee2(0x271)](_0x52f79e=>_0x52f79e['coin']==_0x38e1a1[_0x51aee2(0x382)]);(!_0x57f561||_0x57f561[_0x51aee2(0x208)]==0x0)&&(_0x5a4f53+=(-_0x38e1a1[_0x51aee2(0x208)]-_0x29d34e)*_0x38e1a1[_0x51aee2(0x269)]);}),_0x345ecc++;}}_0x3fe00e[_0x1727d8(0x391)][_0x1727d8(0x2f7)]((_0x453219,_0x18be7c)=>{const _0x70334a=_0x1727d8;_0x3f54c1[_0x453219[_0x70334a(0x382)]]&&(_0x453219[_0x70334a(0x2ce)]=_0x3f54c1[_0x453219[_0x70334a(0x382)]]);}),_0x3c45e1[_0x1727d8(0x1f6)]({'date':_0x3fe00e[_0x1727d8(0x260)],'eur':_0x3fe00e[_0x1727d8(0x206)],'usd':_0x3fe00e[_0x1727d8(0x308)],'offset':_0x504a9d[_0x18925c],'netoffset':_0x5a4f53,'coins':_0x3fe00e['coins']});});}return _0x3c45e1;}function emitPerformance(_0x690c86){const _0x1b09d7=_0x3533c2;_0x690c86['length']!==0x0?(proxyEmit(_0x1b09d7(0x2b1),_0x690c86),lastPerformanceEmitted=getDate()):proxyEmit(_0x1b09d7(0x2b1),[]);}function getPerf(_0x1778a1,_0x4cc750){const _0x15eb09=_0x3533c2;let _0x1e3312=0x0,_0x1cf112=0x0,_0x56c1d1=0x0;_0x1778a1[_0x15eb09(0x391)][_0x15eb09(0x2f7)](_0x4786c7=>{const _0x47f0aa=_0x15eb09;_0x1e3312+=_0x4786c7[_0x47f0aa(0x208)]*_0x4786c7[_0x47f0aa(0x269)];});_0x4cc750&&(_0x1e3312+=_0x1778a1['offset']);if(config[_0x15eb09(0x24e)]===_0x15eb09(0x387)||config[_0x15eb09(0x24e)]===_0x15eb09(0x2cc)||config[_0x15eb09(0x24e)]===_0x15eb09(0x292))_0x1cf112=_0x1e3312*_0x1778a1[_0x15eb09(0x206)],_0x56c1d1=_0x1e3312*_0x1778a1[_0x15eb09(0x308)];else{if(usdBasecoins['includes'](config[_0x15eb09(0x24e)]))_0x1cf112=_0x1e3312*_0x1778a1[_0x15eb09(0x206)]/_0x1778a1[_0x15eb09(0x308)],_0x56c1d1=_0x1e3312;else config[_0x15eb09(0x24e)]==='EUR'&&(_0x1cf112=_0x1e3312,_0x56c1d1=_0x1e3312*_0x1778a1[_0x15eb09(0x308)]/_0x1778a1['eur']);}return[_0x1e3312,_0x1cf112,_0x56c1d1];}function getKPIs(_0x243e27,_0x4b8659=_0x3533c2(0x2ae)){const _0x3b713d=_0x3533c2,_0xed7570=config[_0x3b713d(0x24e)],_0x327f67=lastBalances,_0x49d9a0=currentCoins,_0x219098=getNormalizedPerformance(),_0x5aed17=_0x243e27===_0x3b713d(0x24e)?_0xed7570:_0x243e27===_0x3b713d(0x1ff)||_0x243e27===_0x3b713d(0x338)?_0x4b8659:'Net\x20'+_0xed7570,_0x9f6c98=_0x243e27===_0x3b713d(0x35d)?_0x3b713d(0x29e):_0x243e27===_0x3b713d(0x338)?'Net\x20effect':_0x5aed17+_0x3b713d(0x250),_0xb8e49a=_0x243e27===_0x3b713d(0x35d)||_0x243e27==='net-fiat'?_0x3b713d(0x29e):_0x5aed17+_0x3b713d(0x2b5);let _0x1b299f=0x0;_0x49d9a0[_0x3b713d(0x2f7)](_0x526f07=>{const _0x18c6f7=_0x3b713d;_0x1b299f+=_0x526f07[_0x18c6f7(0x208)]*_0x526f07['last'];});if(_0x243e27==='fiat'||_0x243e27===_0x3b713d(0x338)){if(_0xed7570==='BTC'||_0xed7570===_0x3b713d(0x2cc)||_0xed7570==='PAXG')_0x1b299f=_0x1b299f*(_0x4b8659===_0x3b713d(0x2ae)?_0x327f67[_0x3b713d(0x206)]:_0x327f67[_0x3b713d(0x308)]);else{if(usdBasecoins['includes'](_0xed7570))_0x1b299f=_0x1b299f*(_0x4b8659===_0x3b713d(0x2ae)?_0x327f67['eur']/_0x327f67[_0x3b713d(0x308)]:0x1);else _0xed7570===_0x3b713d(0x2ae)&&(_0x1b299f=_0x1b299f*(_0x4b8659===_0x3b713d(0x2ae)?0x1:_0x327f67['usd']/_0x327f67[_0x3b713d(0x206)]));}}let _0x3c5fa1;if(_0x1b299f!==0x0){if(_0x243e27===_0x3b713d(0x24e))_0x3c5fa1=(_0x1b299f/startingBalances['basecoin']-0x1)*0x64;else{if(_0x4b8659===_0x3b713d(0x2ae))_0x3c5fa1=(_0x1b299f/startingBalances[_0x3b713d(0x206)]-0x1)*0x64;else _0x3c5fa1=(_0x1b299f/startingBalances[_0x3b713d(0x308)]-0x1)*0x64;}let _0x614d43=0x0;if(startingBalances['coins'])_0x49d9a0['forEach'](_0x1c9e08=>{const _0x5db156=_0x3b713d;let _0x4b1ad3=startingBalances['coins'][_0x5db156(0x271)](_0x38086c=>_0x38086c[_0x5db156(0x382)]===_0x1c9e08['coin']);if(_0x4b1ad3&&_0x4b1ad3[_0x5db156(0x382)]&&_0x1c9e08['number']!==0x0)_0x614d43+=_0x4b1ad3['number']*_0x1c9e08[_0x5db156(0x281)];});let _0x4feb5c=0x0;if(_0x219098[_0x3b713d(0x251)]!==0x0){let _0x140774=_0x219098[_0x219098[_0x3b713d(0x251)]-0x1];_0x4feb5c=_0x140774[_0x3b713d(0x332)];}_0x614d43-=_0x4feb5c;_0x243e27===_0x3b713d(0x35d)&&(_0x3c5fa1=(_0x1b299f-_0x614d43)/startingBalances[_0x3b713d(0x24e)]*0x64,_0x1b299f=_0x1b299f-_0x614d43);if(_0x243e27===_0x3b713d(0x338)){let _0xbaf4e6=_0x4b8659===_0x3b713d(0x2ae)?startingBalances[_0x3b713d(0x206)]:startingBalances['usd'];if(_0xed7570===_0x3b713d(0x387)||_0xed7570==='ETH'||_0xed7570===_0x3b713d(0x292))_0x614d43=_0x4b8659===_0x3b713d(0x2ae)?_0x614d43*_0x327f67[_0x3b713d(0x206)]:_0x614d43*_0x327f67[_0x3b713d(0x308)];else{if(usdBasecoins[_0x3b713d(0x36f)](_0xed7570))_0x614d43=_0x4b8659===_0x3b713d(0x2ae)?_0x614d43*_0x327f67[_0x3b713d(0x206)]/_0x327f67[_0x3b713d(0x308)]:_0x614d43;else _0xed7570===_0x3b713d(0x2ae)&&(_0x614d43=_0x4b8659===_0x3b713d(0x2ae)?_0x614d43:_0x614d43*_0x327f67[_0x3b713d(0x308)]/_0x327f67[_0x3b713d(0x206)]);}_0x3c5fa1=(_0x1b299f-_0x614d43)/_0xbaf4e6*0x64,_0x1b299f=_0x1b299f-_0x614d43;}if(_0x3c5fa1){if(_0x3c5fa1<0x64)_0x3c5fa1=_0x3c5fa1[_0x3b713d(0x254)](0x2);else{if(_0x3c5fa1<0x3e8)_0x3c5fa1=_0x3c5fa1[_0x3b713d(0x254)](0x1);else _0x3c5fa1=_0x3c5fa1[_0x3b713d(0x254)](0x0);}}else _0x3c5fa1=Number('0')[_0x3b713d(0x254)](0x2);if(_0x1b299f){if(Math[_0x3b713d(0x265)](_0x1b299f)<0.000001)_0x1b299f=_0x1b299f['toFixed'](0x2);else{if(Math[_0x3b713d(0x265)](_0x1b299f)<0.1)_0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x6);else{if(Math[_0x3b713d(0x265)](_0x1b299f)<0x1)_0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x5);else{if(Math['abs'](_0x1b299f)<0xa)_0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x4);else{if(Math[_0x3b713d(0x265)](_0x1b299f)<0x64)_0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x3);else{if(Math[_0x3b713d(0x265)](_0x1b299f)<0x3e8)_0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x2);else _0x1b299f=_0x1b299f[_0x3b713d(0x254)](0x2);}}}}}}else _0x1b299f=Number('0')[_0x3b713d(0x254)](0x2);}else _0x3c5fa1=Number('0')[_0x3b713d(0x254)](0x2);return{'value':_0x1b299f,'change':_0x3c5fa1,'leftTxt':_0x9f6c98,'rightTxt':_0xb8e49a};}async function getStartingBalances(_0x4e8add,_0x31b303=!![]){const _0x1bc0a7=_0x3533c2;if(_0x4e8add[_0x1bc0a7(0x251)]!==0x0){const [_0x4ce58e,_0x45d69e,_0x3407ae]=getPerf(_0x4e8add[0x0],!![]);let _0x3c80f2=[];config['portfolio'][_0x1bc0a7(0x2f7)](_0x4f4f42=>{const _0x27e21c=_0x1bc0a7;let _0x443904=0x0,_0x17fea8;config[_0x27e21c(0x34f)][_0x27e21c(0x2f7)](_0xbba902=>{const _0x168e40=_0x27e21c;let _0x4dfe4d=_0xbba902[_0x168e40(0x224)][_0x168e40(0x271)](_0x57a5de=>_0x57a5de['coin']==_0x4f4f42[_0x168e40(0x382)]);if(_0x4dfe4d){_0x443904+=_0x4dfe4d['number'];if(!_0x17fea8)_0x17fea8=_0x4dfe4d[_0x168e40(0x269)];}}),_0x3c80f2[_0x27e21c(0x1f6)]({'coin':_0x4f4f42[_0x27e21c(0x382)],'number':_0x443904,'initialprice':_0x17fea8});});const _0x19e2eb={'basecoin':_0x4ce58e,'eur':_0x45d69e,'usd':_0x3407ae,'coins':_0x3c80f2};if(_0x31b303)proxyEmit(_0x1bc0a7(0x39f),_0x19e2eb);startingBalances=_0x19e2eb;}}function headlessMode(_0x2706dd){const _0x11bc20=_0x3533c2;let _0x277fbf=_0x2706dd[_0x11bc20(0x23d)],_0x1a9296=_0x2706dd[_0x11bc20(0x21a)],_0x3e0821=[];for(let _0x2096ee of _0x277fbf){if(_0x2096ee['coin']!=config[_0x11bc20(0x24e)]){if(_0x2096ee['delta']>=_0x1a9296/0x64){if(_0x2096ee['valid'])_0x3e0821[_0x11bc20(0x1f6)](_0x2096ee);}else{if(_0x2096ee[_0x11bc20(0x342)]<=-_0x1a9296/0x64){if(_0x2096ee[_0x11bc20(0x2c9)])_0x3e0821['push'](_0x2096ee);}}}}_0x3e0821[_0x11bc20(0x251)]>0x0&&(lockOrders==ORDERS[_0x11bc20(0x392)]&&!coolingDown&&_0x3e0821[_0x11bc20(0x2f7)](_0x3f0345=>{const _0x931f08=_0x11bc20;logger[_0x931f08(0x229)]('Trigger:\x20'+_0x3f0345[_0x931f08(0x382)]+'\x20'+_0x3f0345[_0x931f08(0x208)]+'\x20'+_0x3f0345[_0x931f08(0x281)]+'\x20'+_0x3f0345['distribution']+'%\x20'+_0x3f0345[_0x931f08(0x2c3)]+'%\x20'+(0x64*_0x3f0345[_0x931f08(0x342)])[_0x931f08(0x254)](0x2)+_0x931f08(0x395)+_0x1a9296['toFixed'](0x2)+'%)');}),placeOrder(_0x3e0821));}function notifyBalance(_0x304096){const _0xc8fb88=_0x3533c2;let _0x56f59d=_0x304096[_0xc8fb88(0x23d)],_0x42e274=_0x304096[_0xc8fb88(0x21a)],_0x465ab7=[];for(let _0x21ad71 of _0x56f59d){if(_0x21ad71[_0xc8fb88(0x382)]!=config[_0xc8fb88(0x24e)]){if(_0x21ad71[_0xc8fb88(0x342)]>=_0x42e274/0x64){if(_0x21ad71[_0xc8fb88(0x2c9)])_0x465ab7['push'](_0x21ad71);}else{if(_0x21ad71[_0xc8fb88(0x342)]<=-_0x42e274/0x64){if(_0x21ad71[_0xc8fb88(0x2c9)])_0x465ab7[_0xc8fb88(0x1f6)](_0x21ad71);}}}}if(_0x465ab7[_0xc8fb88(0x251)]>0x0){let _0x11feb1=_0x465ab7[_0xc8fb88(0x37e)](_0x5b24f5=>_0x5b24f5['coin']);_0x11feb1[_0xc8fb88(0x210)]();let _0x9abff6=_0x11feb1[_0xc8fb88(0x278)](',\x20');if(!lastCoinsToBalance)logHistory(_0xc8fb88(0x2e9),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x9abff6;}}function symbolToCoin(_0xde3ac0){const _0x520e97=_0x3533c2;let _0x2836c9;if(_0xde3ac0[_0x520e97(0x36f)]('/'+config[_0x520e97(0x24e)]))_0x2836c9=_0xde3ac0[_0x520e97(0x266)]('/'+config['basecoin'],'');if(_0xde3ac0[_0x520e97(0x36f)](config[_0x520e97(0x24e)]+'/'))_0x2836c9=_0xde3ac0[_0x520e97(0x266)](config[_0x520e97(0x24e)]+'/','');return _0x2836c9;}async function unlockOrders(){const _0xe05979=_0x3533c2;if(allOrdersPlaced&&lockOrders==ORDERS[_0xe05979(0x2a0)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0xe05979(0x2cf)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x3af2eb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3af2eb,setBlockTransactionDetection(![]),validateOrdersState=_0xe05979(0x2ce),persistOpenOrders([]),lockOrders=ORDERS[_0xe05979(0x392)],logger['debug'](_0xe05979(0x367));}}async function validateOrders(_0xc8c2fb){const _0x5024b9=_0x3533c2;if(_0xc8c2fb)validateOrdersState=_0xc8c2fb;logger[_0x5024b9(0x229)](_0x5024b9(0x2e0)+validateOrdersState+_0x5024b9(0x258)+(lockOrders==0x1?_0x5024b9(0x296):lockOrders==0x2?_0x5024b9(0x340):'ORDERS.UNLOCKED'));let _0x2497d2=[],_0x271675=config[_0x5024b9(0x314)]==_0x5024b9(0x25c)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x5024b9(0x229)](_0x5024b9(0x334)+validateOrdersState),lastOrders[_0x5024b9(0x2f7)](_0x70633=>{const _0x335721=_0x5024b9;let _0xfdba63=![];_0x70633['filled']>0x0&&(_0xfdba63=!![]),_0x2497d2['push'](_0xfdba63),_0xfdba63&&config['ordertype']!=_0x335721(0x25c)&&logHistory('order',_0x335721(0x1f0)+_0x70633[_0x335721(0x343)]+'\x20'+_0x70633[_0x335721(0x30d)]+'\x20#'+formatResult(_0x70633[_0x335721(0x2b0)],0x8)+'\x20@'+formatResult(_0x70633['price'],0x8));}),_0x2497d2['forEach']((_0x1748c1,_0x48b9ab)=>{const _0x2f8a88=_0x5024b9;if(_0x1748c1)lastOrders[_0x2f8a88(0x259)](_0x48b9ab,0x1);}),persistOpenOrders(lastOrders);const _0x42a85f=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x5024b9(0x2da);if(validateOrdersState==_0x5024b9(0x2ce)){validateOrdersState=_0x5024b9(0x39c);if(_0x2497d2['includes'](![])){if(config[_0x5024b9(0x314)]==_0x5024b9(0x25c)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x5024b9(0x39c)){if(_0x2497d2[_0x5024b9(0x36f)](![])){}else{if(allOrdersPlaced){if(config[_0x5024b9(0x314)]==_0x5024b9(0x25c)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x5024b9(0x2e3))_0x2497d2[_0x5024b9(0x36f)](![])&&(config[_0x5024b9(0x314)]==_0x5024b9(0x25c)?logHistory(_0x5024b9(0x326),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x5024b9(0x38a)](_0x271675*validateOrderInterval/0xea60)+_0x5024b9(0x2ba)+_0x42a85f):(await cancelOrders(),logHistory(_0x5024b9(0x326),_0x5024b9(0x256)+Math[_0x5024b9(0x38a)](_0x271675*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x42a85f))),await unlockOrders();else{if(validateOrdersState==_0x5024b9(0x291)){if(config[_0x5024b9(0x314)]!='market')logHistory(_0x5024b9(0x326),_0x5024b9(0x298)+_0x42a85f);await unlockOrders();}}}}}async function cancelOrders(){const _0x5e0316=_0x3533c2;lastOrders[_0x5e0316(0x2f7)](async _0x119877=>{const _0x212635=_0x5e0316;try{const _0x3194e2=await exchange['cancelOrder'](_0x119877[_0x212635(0x35f)],_0x119877['symbol']);}catch(_0x440be3){if(_0x440be3[_0x212635(0x2df)]()[_0x212635(0x36f)](_0x212635(0x2b9))){}else await handleError(_0x440be3,'cancelOrders()');}});}async function initCoinResults(_0x38db46){const _0x4d8995=_0x3533c2;_0x38db46?logger['debug'](_0x4d8995(0x358)+_0x38db46):logger[_0x4d8995(0x229)](_0x4d8995(0x2f5)),config['portfolio'][_0x4d8995(0x2f7)](_0x17e129=>{const _0x308de0=_0x4d8995;if(!_0x17e129['excluded']&&_0x17e129[_0x308de0(0x382)]!=config[_0x308de0(0x24e)]){const _0xc0ac58=currentCoins[_0x308de0(0x271)](_0x1d2fda=>_0x1d2fda[_0x308de0(0x382)]==_0x17e129['coin']),_0x3daaca=gTicker[noslash(_0x17e129[_0x308de0(0x343)])];let _0x3886fb=_0xc0ac58?_0xc0ac58[_0x308de0(0x208)]:null,_0x544aed=_0x17e129['reverse']?0x1/_0x3daaca:_0x3daaca,_0x400df1;config[_0x308de0(0x34f)]['forEach'](_0x2f6280=>{const _0x1e5b90=_0x308de0;!_0x400df1&&(_0x400df1=_0x2f6280[_0x1e5b90(0x224)][_0x1e5b90(0x271)](_0x3ea51b=>_0x3ea51b['coin']==_0x17e129[_0x1e5b90(0x382)]),_0x400df1&&(_0x3886fb=_0x400df1[_0x1e5b90(0x208)],_0x544aed=_0x400df1[_0x1e5b90(0x269)]));});let _0x5c6cf6=dbCoinResults[_0x308de0(0x359)](_0x308de0(0x391))[_0x308de0(0x271)]({'coin':_0x17e129[_0x308de0(0x382)]})[_0x308de0(0x1ec)]();if(!_0x5c6cf6){const _0x4323ab={'coin':_0x17e129['coin'],'number':_0x3886fb,'breakeven':_0x544aed,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x308de0(0x359)](_0x308de0(0x391))['push'](_0x4323ab)[_0x308de0(0x294)]();}else{if(_0x38db46&&_0x17e129[_0x308de0(0x382)]==_0x38db46){const _0x1fe091={'coin':_0x17e129[_0x308de0(0x382)],'number':_0x3886fb,'breakeven':_0x544aed,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x308de0(0x359)](_0x308de0(0x391))[_0x308de0(0x271)]({'coin':_0x17e129[_0x308de0(0x382)]})[_0x308de0(0x319)](_0x1fe091)[_0x308de0(0x294)]();}}}});}async function updateCoinResults(_0x279f66,_0x5d1abc=![]){const _0x14135a=_0x3533c2;let _0x49a9f8,_0x1a6f26,_0x8deccc,_0x4655ab,_0x16294e,_0x441920,_0x650870=dbCoinResults[_0x14135a(0x359)](_0x14135a(0x391))[_0x14135a(0x271)]({'coin':_0x279f66[_0x14135a(0x382)]})[_0x14135a(0x1ec)](),_0x3cb665=![];_0x650870&&Object['entries'](_0x650870)[_0x14135a(0x2f7)](([_0x203daa,_0x55aa2e])=>{if(_0x55aa2e==null)_0x3cb665=!![];});(!_0x650870||_0x3cb665)&&(await initCoinResults(_0x279f66['coin']),_0x650870=dbCoinResults[_0x14135a(0x359)](_0x14135a(0x391))[_0x14135a(0x271)]({'coin':_0x279f66[_0x14135a(0x382)]})['value']());_0x279f66[_0x14135a(0x371)]&&(_0x441920={'filled':_0x279f66[_0x14135a(0x2b0)]*_0x279f66[_0x14135a(0x269)],'amount':_0x279f66[_0x14135a(0x2b0)]*_0x279f66['price'],'side':_0x279f66[_0x14135a(0x30d)]=='sell'?_0x14135a(0x390):_0x14135a(0x383),'price':0x1/_0x279f66[_0x14135a(0x269)]},_0x279f66={..._0x279f66,..._0x441920});_0x5d1abc?_0x1a6f26=_0x279f66[_0x14135a(0x30d)]=='buy'?_0x650870['number']+_0x279f66[_0x14135a(0x2b0)]:_0x650870[_0x14135a(0x208)]-_0x279f66[_0x14135a(0x2b0)]:_0x1a6f26=await getCoinNumber(_0x279f66['coin']);if(_0x279f66['fee']&&_0x279f66[_0x14135a(0x21f)]['currency']==config['basecoin'])_0x49a9f8=Number(_0x279f66[_0x14135a(0x21f)][_0x14135a(0x2a4)]);else{if(_0x279f66['fee']&&_0x279f66[_0x14135a(0x21f)][_0x14135a(0x2d4)]=='BNB'&&!_0x5d1abc&&config[_0x14135a(0x24e)]!=_0x14135a(0x292))_0x49a9f8=Number(_0x279f66[_0x14135a(0x21f)][_0x14135a(0x2a4)])*gTicker[_0x14135a(0x2de)+config[_0x14135a(0x24e)]];else _0x49a9f8=defaultFee*_0x279f66['filled']*_0x279f66[_0x14135a(0x269)];}_0x279f66['side']=='buy'?(_0x8deccc=_0x1a6f26!=0x0?(_0x650870['breakeven']*_0x650870[_0x14135a(0x208)]+_0x279f66[_0x14135a(0x269)]*(_0x1a6f26-_0x650870[_0x14135a(0x208)])+_0x49a9f8)/_0x1a6f26:0x0,_0x4655ab=_0x650870[_0x14135a(0x384)]):(_0x8deccc=_0x1a6f26!=0x0?(_0x650870['breakeven']*_0x650870['number']-_0x279f66['price']*(_0x650870[_0x14135a(0x208)]-_0x1a6f26)+_0x49a9f8)/_0x1a6f26:0x0,_0x4655ab=_0x650870[_0x14135a(0x384)]+(_0x279f66[_0x14135a(0x269)]-_0x650870['breakeven'])*_0x279f66[_0x14135a(0x2b0)]);_0x16294e=(_0x279f66[_0x14135a(0x269)]-_0x8deccc-_0x49a9f8/_0x279f66[_0x14135a(0x2b0)])*_0x1a6f26;let _0x2252ca={'coin':_0x279f66['coin'],'number':_0x1a6f26,'breakeven':formatResult(_0x8deccc,0x8),'realized':formatResult(_0x4655ab,0x8),'unrealized':formatResult(_0x16294e,0x8),'fees':formatResult(_0x650870[_0x14135a(0x2e8)]+_0x49a9f8,0x8),'sells':_0x279f66[_0x14135a(0x30d)]==_0x14135a(0x383)?_0x650870[_0x14135a(0x315)]+0x1:_0x650870[_0x14135a(0x315)],'buys':_0x279f66[_0x14135a(0x30d)]=='buy'?_0x650870['buys']+0x1:_0x650870[_0x14135a(0x372)]};dbCoinResults['get'](_0x14135a(0x391))['find']({'coin':_0x279f66[_0x14135a(0x382)]})[_0x14135a(0x319)](_0x2252ca)['write']();if(!_0x5d1abc){if(_0x279f66[_0x14135a(0x21f)]&&_0x279f66[_0x14135a(0x21f)]['currency']==_0x14135a(0x2de)){const _0x5d20b3=currentCoins[_0x14135a(0x271)](_0x36dedc=>_0x36dedc[_0x14135a(0x382)]==_0x14135a(0x2de));if(_0x5d20b3){let _0x21a905=dbCoinResults['get']('coins')[_0x14135a(0x271)]({'coin':_0x14135a(0x2de)})['value']();_0x2252ca={..._0x21a905,'number':_0x5d20b3[_0x14135a(0x208)]},dbCoinResults[_0x14135a(0x359)](_0x14135a(0x391))[_0x14135a(0x271)]({'coin':_0x14135a(0x2de)})[_0x14135a(0x319)](_0x2252ca)[_0x14135a(0x294)]();}}}}async function placeOrder(_0x5d9a43){const _0x4fb08e=_0x3533c2,_0x2e40e4=config[_0x4fb08e(0x314)]=='market'?'market':_0x4fb08e(0x213);if(lockOrders==ORDERS[_0x4fb08e(0x392)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS['LOCKED'],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x4fb08e(0x2ce);let _0x115bbe=![];lastOrders=[];for(const _0x49a00e of _0x5d9a43){let _0x3a40f8,_0x3b4e6c,_0x20014a,_0xb6de91,_0xb8b7aa,_0x5f4853=_0x49a00e[_0x4fb08e(0x343)];try{const _0x48fa6c=await exchange[_0x4fb08e(0x1f9)](_0x5f4853);_0x3a40f8=_0x49a00e[_0x4fb08e(0x371)]?0x1/_0x49a00e[_0x4fb08e(0x281)]:_0x49a00e[_0x4fb08e(0x281)],_0x3b4e6c=_0x48fa6c[_0x4fb08e(0x2a5)],_0x20014a=_0x48fa6c[_0x4fb08e(0x32b)];_0x49a00e['reverse']?(_0xb6de91=_0x49a00e[_0x4fb08e(0x30d)]==_0x4fb08e(0x390)?_0x4fb08e(0x383):_0x4fb08e(0x390),_0xb8b7aa=Math[_0x4fb08e(0x265)](_0x49a00e[_0x4fb08e(0x2fc)])/_0x3a40f8):(_0xb6de91=_0x49a00e[_0x4fb08e(0x30d)],_0xb8b7aa=Math[_0x4fb08e(0x265)](_0x49a00e[_0x4fb08e(0x2fc)]));_0x2e40e4=='limit'&&(config[_0x4fb08e(0x314)]==_0x4fb08e(0x304)&&(_0x3a40f8=_0xb6de91==_0x4fb08e(0x390)?_0x3b4e6c:_0x20014a),config[_0x4fb08e(0x314)]==_0x4fb08e(0x211)&&(_0x3a40f8=_0xb6de91==_0x4fb08e(0x390)?_0x20014a:_0x3b4e6c));_0xb8b7aa=formatResult(_0xb8b7aa,0x8),_0x3a40f8=formatResult(_0x3a40f8,0x8);const _0x567291=_0xb6de91==_0x4fb08e(0x383)?config[_0x4fb08e(0x399)]?String[_0x4fb08e(0x36d)]('0x'+config[_0x4fb08e(0x399)])+'\x20':'':config[_0x4fb08e(0x2cb)]?String[_0x4fb08e(0x36d)]('0x'+config[_0x4fb08e(0x2cb)])+'\x20':'',_0x3182af=_0x2e40e4=='market'?_0x4fb08e(0x293):config['ordertype']==_0x4fb08e(0x304)?_0x4fb08e(0x2c1):_0x4fb08e(0x26c),_0x59ac5c=(Math[_0x4fb08e(0x299)](Math['random']()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x59ac5c,'symbol':_0x5f4853,'coin':_0x49a00e[_0x4fb08e(0x382)],'amount':_0xb8b7aa,'price':_0x3a40f8,'side':_0xb6de91,'reverse':_0x49a00e[_0x4fb08e(0x371)],'filled':0x0});if(_0x2e40e4==_0x4fb08e(0x25c))logHistory(_0x4fb08e(0x226),''+_0x567291+_0x3182af+_0x4fb08e(0x317)+_0x5f4853+'\x20'+_0xb6de91+'\x20#'+formatResult(_0xb8b7aa,0x8)+'\x20@'+formatResult(_0x3a40f8,0x8));else logHistory(_0x4fb08e(0x226),''+_0x567291+_0x3182af+_0x4fb08e(0x317)+_0x5f4853+'\x20'+_0xb6de91+'\x20#'+formatResult(_0xb8b7aa,0x8)+'\x20@'+formatResult(_0x3a40f8,0x8));let _0x9173fc;_0x2e40e4==_0x4fb08e(0x25c)?_0xb6de91=='buy'&&[_0x4fb08e(0x323),'Bitget','Cex',_0x4fb08e(0x261),_0x4fb08e(0x361)][_0x4fb08e(0x36f)](config['exchange'])?_0x9173fc=await exchange[_0x4fb08e(0x33a)](_0x5f4853,_0x2e40e4,_0xb6de91,_0xb8b7aa,_0x3a40f8):_0x9173fc=await exchange[_0x4fb08e(0x33a)](_0x5f4853,_0x2e40e4,_0xb6de91,_0xb8b7aa,undefined):_0x9173fc=await exchange[_0x4fb08e(0x33a)](_0x5f4853,_0x2e40e4,_0xb6de91,_0xb8b7aa,_0x3a40f8);logger['debug']('ID:\x20'+_0x9173fc['id']+_0x4fb08e(0x2c7)+_0x59ac5c);const _0x38c480=lastOrders['length']-0x1;if(_0x38c480>=0x0&&lastOrders[_0x38c480][_0x4fb08e(0x1fc)]==_0x59ac5c){lastOrders[_0x38c480][_0x4fb08e(0x35f)]=_0x9173fc['id'];if(_0x9173fc[_0x4fb08e(0x2d2)])lastOrders[_0x38c480][_0x4fb08e(0x2d2)]=_0x9173fc[_0x4fb08e(0x2d2)];if(_0x9173fc[_0x4fb08e(0x269)])lastOrders[_0x38c480][_0x4fb08e(0x269)]=_0x9173fc['price'];lastOrders[_0x38c480][_0x4fb08e(0x21f)]=_0x9173fc[_0x4fb08e(0x21f)];}if(config[_0x4fb08e(0x346)]!=0x0){let _0x4e4f94=null;if(cooldownTracker[_0x4fb08e(0x251)]==config[_0x4fb08e(0x346)]-0x1)_0x4e4f94=cooldownTracker['shift']();const _0x2ddaf3=getTimeStamp();cooldownTracker[_0x4fb08e(0x1f6)](_0x2ddaf3);if(_0x4e4f94){const _0x384bf9=fns['differenceInSeconds'](new Date(_0x2ddaf3),new Date(_0x4e4f94));if(_0x384bf9<cooldownInterval){logHistory(_0x4fb08e(0x33f),'Executed\x20'+config[_0x4fb08e(0x346)]+_0x4fb08e(0x21b)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4fb08e(0x230)),coolingDown=!![];break;}}}}catch(_0x19741d){if(_0x19741d[_0x4fb08e(0x2df)]()[_0x4fb08e(0x36f)](_0x4fb08e(0x24b)))lastOrders=lastOrders[_0x4fb08e(0x24d)](_0xad235e=>_0xad235e[_0x4fb08e(0x343)]!=_0x5f4853),logHistory(_0x4fb08e(0x33f),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5f4853),_0x115bbe=!![];else{if(_0x19741d[_0x4fb08e(0x2df)]()[_0x4fb08e(0x36f)](_0x4fb08e(0x225)))lastOrders=lastOrders[_0x4fb08e(0x24d)](_0x17af4f=>_0x17af4f[_0x4fb08e(0x343)]!=_0x5f4853),logHistory('error',_0x4fb08e(0x238)+_0x5f4853),_0x115bbe=!![];else{if(_0x19741d[_0x4fb08e(0x2df)]()['includes'](_0x4fb08e(0x28e)))lastOrders=lastOrders['filter'](_0x1275c3=>_0x1275c3[_0x4fb08e(0x343)]!=_0x5f4853),logHistory(_0x4fb08e(0x33f),_0x4fb08e(0x283)+_0x5f4853),logger[_0x4fb08e(0x229)](_0x19741d),_0x115bbe=!![];else _0x19741d['toString']()[_0x4fb08e(0x36f)]('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4fb08e(0x24d)](_0x1b9a5c=>_0x1b9a5c[_0x4fb08e(0x343)]!=_0x5f4853),logHistory(_0x4fb08e(0x33f),_0x4fb08e(0x2d0)+_0x5f4853),_0x115bbe=!![]):(lastOrders=lastOrders['filter'](_0x9d99be=>_0x9d99be[_0x4fb08e(0x343)]!=_0x5f4853),await handleError(_0x19741d,_0x4fb08e(0x37a),_0x5f4853));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x85dc82=config['ordertype']==_0x4fb08e(0x25c)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3ef9bd=_0x4fb08e;validateOrders(_0x3ef9bd(0x2e3));},_0x85dc82);}else unlockOrders();_0x115bbe&&config[_0x4fb08e(0x25e)]&&(logHistory(_0x4fb08e(0x33f),_0x4fb08e(0x220)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4fb08e(0x326),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4fb08e(0x25e)]&&logHistory(_0x4fb08e(0x33f),_0x4fb08e(0x336));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x4fb08e(0x25e)]&&(config[_0x4fb08e(0x314)]==_0x4fb08e(0x25c)?logHistory(_0x4fb08e(0x33f),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x4fb08e(0x33f),_0x4fb08e(0x2b2))));}}function persistOpenOrders(_0xc24f3){const _0x585662=_0x3533c2,_0x39c4e0={...config,'openOrders':_0xc24f3};let _0xc8c95b=dbConfig[_0x585662(0x359)](_0x585662(0x276))['find']({'botID':botID})[_0x585662(0x1ec)]();_0xc8c95b&&dbConfig['get'](_0x585662(0x276))[_0x585662(0x271)]({'botID':botID})[_0x585662(0x319)](_0x39c4e0)[_0x585662(0x294)]();}function restoreOrders(){const _0x576bc7=_0x3533c2;let _0x295992;config[_0x576bc7(0x2d5)]&&allOpenOrders[_0x576bc7(0x2f7)](_0x448f2b=>{const _0x472a3a=_0x576bc7,_0xf55273=config[_0x472a3a(0x2d5)][_0x472a3a(0x271)](_0x1836fb=>_0x1836fb[_0x472a3a(0x35f)]==_0x448f2b['id']);_0xf55273&&(lastOrders[_0x472a3a(0x1f6)](_0xf55273),_0x295992=_0x448f2b[_0x472a3a(0x22c)]);});if(lastOrders[_0x576bc7(0x251)]>0x0){lockOrders=ORDERS[_0x576bc7(0x2a0)],validateOrdersState=_0x576bc7(0x39c),allOrdersPlaced=!![];const _0x51be49=new Date()[_0x576bc7(0x32f)](),_0x3140fb=config[_0x576bc7(0x314)]==_0x576bc7(0x25c)?validateOrderTimeout*0x3c*0x3e8:config[_0x576bc7(0x1fa)]*0x3c*0x3e8;if(_0x295992+_0x3140fb>_0x51be49){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1ba0e2=_0x576bc7;validateOrders(_0x1ba0e2(0x2e3));},_0x295992+_0x3140fb-_0x51be49);}else validateOrders(_0x576bc7(0x2e3));}}async function sendMetricsTelegram(){const _0x46b414=_0x3533c2;if(!coinsLoaded){process['send']({'telegrammsg':_0x46b414(0x209)},_0x308955=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3b94e1='';if(config[_0x46b414(0x2f1)])_0x3b94e1=_0x46b414(0x396)+config[_0x46b414(0x366)]+_0x46b414(0x24c);else _0x3b94e1=_0x46b414(0x285)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0xdefa5f=getKPIs('basecoin'),_0x565736=getKPIs(_0x46b414(0x1ff),config[_0x46b414(0x1ff)]),_0x3070da=getKPIs('net-basecoin'),_0x92e181=getKPIs(_0x46b414(0x338),config[_0x46b414(0x1ff)]);_0x3b94e1+='<pre>',_0x3b94e1+=_0xdefa5f['leftTxt']+_0x46b414(0x2fe)+_0xdefa5f[_0x46b414(0x1ec)]+'\x0a',_0x3b94e1+=_0xdefa5f[_0x46b414(0x397)]+':\x20'+_0xdefa5f[_0x46b414(0x21c)]+'%\x0a',_0x3b94e1+=_0x565736['leftTxt']+_0x46b414(0x2fe)+_0x565736[_0x46b414(0x1ec)]+'\x0a',_0x3b94e1+=_0x565736[_0x46b414(0x397)]+':\x20'+_0x565736[_0x46b414(0x21c)]+'%\x0a',_0x3b94e1+=_0x3070da[_0x46b414(0x1f3)]+':\x20'+_0x3070da[_0x46b414(0x1ec)]+'\x20('+config[_0x46b414(0x24e)]+')\x0a',_0x3b94e1+=_0x3070da['rightTxt']+':\x20'+_0x3070da[_0x46b414(0x21c)]+_0x46b414(0x395)+config[_0x46b414(0x24e)]+')\x0a',_0x3b94e1+=_0x92e181[_0x46b414(0x1f3)]+':\x20'+_0x92e181[_0x46b414(0x1ec)]+'\x20('+config[_0x46b414(0x1ff)]+')\x0a',_0x3b94e1+=_0x92e181[_0x46b414(0x397)]+':\x20'+_0x92e181[_0x46b414(0x21c)]+_0x46b414(0x395)+config[_0x46b414(0x1ff)]+')\x0a',_0x3b94e1+=_0x46b414(0x1ea),process['send']({'telegrammsg':_0x3b94e1},_0x5628eb=>{});}async function sendPortfolioTelegram(){const _0x225597=_0x3533c2;if(!coinsLoaded||!currentCoins[0x0][_0x225597(0x217)]){process['send']({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x47c8f9=>{});return;}let _0x4d473d='';if(config[_0x225597(0x2f1)])_0x4d473d=_0x225597(0x396)+config[_0x225597(0x366)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x4d473d=_0x225597(0x285)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x4d473d+=_0x225597(0x380),_0x4d473d+=_0x225597(0x1ef),_0x4d473d+=_0x225597(0x3a2),_0x4d473d+=_0x225597(0x1ef),currentCoins['forEach'](_0x562ee5=>{const _0x2ee064=_0x225597;_0x4d473d+=_0x562ee5[_0x2ee064(0x382)][_0x2ee064(0x2c6)](0x7)+'|\x20'+formatPad(_0x562ee5[_0x2ee064(0x217)],0x2,0x6)+'|\x20'+formatPad(_0x562ee5[_0x2ee064(0x2c3)],0x2,0x6)+'|\x20'+formatPad(_0x562ee5[_0x2ee064(0x342)]*0x64,0x2,0x6)+'\x0a';}),_0x4d473d+='</pre>',process[_0x225597(0x24f)]({'telegrammsg':_0x4d473d},_0x2c03cf=>{});}function formatPad(_0x21434b,_0x4e1380,_0x325484){const _0x30ac3b=_0x3533c2,_0x41911a=formatResultString(_0x21434b,_0x4e1380);return _0x41911a?_0x41911a[_0x30ac3b(0x32e)](_0x325484):''[_0x30ac3b(0x32e)](_0x325484);}function logHistory(_0x40d8e4,_0x4a0e58,_0x377c91=''){const _0x5367f2=_0x3533c2;logger[_0x5367f2(0x236)](''+_0x4a0e58);let _0x2248ea={'time':getTimeStamp(),'type':_0x40d8e4,'event':_0x4a0e58};dbLogs[_0x5367f2(0x359)](_0x5367f2(0x33b))[_0x5367f2(0x1f6)](_0x2248ea)['write']();if(_0x377c91=='')_0x377c91=_0x4a0e58;proxyEmit(_0x5367f2(0x2f0),{'log':_0x2248ea,'summary':_0x377c91}),process['send']({'telegram':{..._0x2248ea,'botname':config['botname'],'showname':config[_0x5367f2(0x2f1)]}},_0x36daf8=>{});}function emitHistory(_0x24b590={}){const _0x3131a0=_0x3533c2;Object['keys'](_0x24b590)[_0x3131a0(0x251)]==0x0&&(_0x24b590={'type':['order',_0x3131a0(0x2f0)],'event':'','page':0x1});if(_0x24b590['type'][_0x3131a0(0x36f)](_0x3131a0(0x2f0)))_0x24b590[_0x3131a0(0x1e9)][_0x3131a0(0x259)](_0x24b590[_0x3131a0(0x1e9)][_0x3131a0(0x2d9)](_0x3131a0(0x2f0)),0x1,_0x3131a0(0x33f),_0x3131a0(0x2e9),_0x3131a0(0x326));if(dbLogs['has'](_0x3131a0(0x33b))['value']()){let _0x4e6e31=dbLogs[_0x3131a0(0x359)](_0x3131a0(0x33b))[_0x3131a0(0x24d)](_0x19283b=>{const _0x1ce2c9=_0x3131a0;if(_0x24b590[_0x1ce2c9(0x1e9)][_0x1ce2c9(0x251)]==0x0)return![];else return _0x24b590[_0x1ce2c9(0x1e9)][_0x1ce2c9(0x36f)](_0x19283b[_0x1ce2c9(0x1e9)]);})[_0x3131a0(0x24d)](_0x47978e=>{const _0x55b3a2=_0x3131a0;if(_0x24b590[_0x55b3a2(0x2f0)]=='')return!![];else return _0x47978e['event'][_0x55b3a2(0x35a)]()[_0x55b3a2(0x36f)](_0x24b590['event'][_0x55b3a2(0x35a)]());})[_0x3131a0(0x321)]('time'),_0x3cce=_0x4e6e31[_0x3131a0(0x1ec)]()[_0x3131a0(0x251)];_0x4e6e31=_0x4e6e31[_0x3131a0(0x371)]()['slice']((_0x24b590[_0x3131a0(0x37c)]-0x1)*logPageSize,_0x24b590[_0x3131a0(0x37c)]*logPageSize-0x1)[_0x3131a0(0x371)]()['value'](),proxyEmit(_0x3131a0(0x263),{'logs':_0x4e6e31,'total':_0x3cce});}else proxyEmit(_0x3131a0(0x263),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x50e242){const _0x55d3f8=_0x3533c2;if(dbLogs[_0x55d3f8(0x28b)](_0x55d3f8(0x33b))[_0x55d3f8(0x1ec)]()){const _0x209dc9=dbLogs['get']('logs')[_0x55d3f8(0x321)](_0x55d3f8(0x2a9))['filter'](_0x3d75ab=>{return _0x3d75ab['type']=='order';})[_0x55d3f8(0x1ec)]();dbLogs[_0x55d3f8(0x359)](_0x55d3f8(0x33b))[_0x55d3f8(0x33c)]()[_0x55d3f8(0x294)](),dbLogs['get'](_0x55d3f8(0x33b))[_0x55d3f8(0x319)](_0x209dc9)[_0x55d3f8(0x294)](),emitHistory(_0x50e242);}}async function pauseBot(_0x1b7671=pauseBotIntervalShort,_0x4132e0){const _0x1d30f6=_0x3533c2,_0x1ebd7b=new Date()['getTime']();if(!lastErrorShown||_0x1ebd7b-lastErrorShown>=_0x1b7671){lastErrorShown=_0x1ebd7b;!lastBotPause?(lastBotPause=_0x1ebd7b,consecutivePauses=0x1):(_0x1ebd7b-lastBotPause-_0x1b7671<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x1d30f6(0x33f),_0x4132e0+pauseBotMsg),_0x1b7671=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x1ebd7b);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x1b7671),botPaused=![],_0x1b7671==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x5c0b0f=_0x3533c2;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x5c0b0f(0x2d1)},_0x22dedd=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x5b1e74,_0xde37b3){const _0x4b4dc1=_0x3533c2;if(botPaused)return;const _0x344cf0=config[_0x4b4dc1(0x289)]||'Exchange';if(_0xde37b3)logger[_0x4b4dc1(0x229)](_0x4b4dc1(0x252)+_0xde37b3);const _0xfc916d=()=>{const _0x26eac8=_0x4b4dc1;loading[_0x26eac8(0x33f)]=!![],emitLoadingProgress();};if(_0x5b1e74[_0x4b4dc1(0x2df)]()[_0x4b4dc1(0x36f)](_0x4b4dc1(0x2ad)))logHistory(_0x4b4dc1(0x33f),_0x344cf0+'\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)'),_0xfc916d();else{if(_0x5b1e74[_0x4b4dc1(0x2df)]()[_0x4b4dc1(0x36f)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4b4dc1(0x33f),_0x344cf0+_0x4b4dc1(0x2a6)),_0xfc916d();else _0x5b1e74[_0x4b4dc1(0x2df)]()['includes'](_0x4b4dc1(0x29d))?(logHistory(_0x4b4dc1(0x33f),_0x344cf0+_0x4b4dc1(0x279)),logHistory(_0x4b4dc1(0x33f),_0x4b4dc1(0x24a)),_0xfc916d()):await handleError(_0x5b1e74,null);}}async function handleError(_0x5072d7,_0x40875c,_0x1c785c=''){const _0x5e3412=_0x3533c2;if(botPaused)return;let _0x1b1620;const _0x103540=config[_0x5e3412(0x289)]||'Exchange';if(_0x40875c)logger['debug'](_0x5e3412(0x252)+_0x40875c);if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x2db)))_0x1b1620=_0x103540+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger['debug'](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7[_0x5e3412(0x2df)]()['includes'](_0x5e3412(0x216)))_0x1b1620=_0x103540+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',logger[_0x5e3412(0x229)](_0x1b1620+_0x5e3412(0x32d),_0x5072d7['toString']()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x39b))||_0x5072d7['toString']()[_0x5e3412(0x36f)](_0x5e3412(0x2e1)))_0x1b1620=_0x103540+_0x5e3412(0x1f2),logger[_0x5e3412(0x229)](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7['toString']()['includes'](_0x5e3412(0x2dd)))_0x1b1620=_0x103540+_0x5e3412(0x2d6),logger[_0x5e3412(0x229)](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x2bb)))_0x1b1620=_0x103540+_0x5e3412(0x356),logger[_0x5e3412(0x229)](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x35a)]()[_0x5e3412(0x36f)](_0x5e3412(0x22c))||_0x5072d7[_0x5e3412(0x2df)]()['toLowerCase']()[_0x5e3412(0x36f)](_0x5e3412(0x35c)))_0x1b1620=_0x5e3412(0x20a),logger[_0x5e3412(0x229)](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x3a3)))_0x1b1620=_0x103540+_0x5e3412(0x26e),logger['debug'](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7 instanceof ccxt[_0x5e3412(0x347)])_0x1b1620=_0x103540+'\x20network\x20error',logger['debug'](_0x1b1620+_0x5e3412(0x32d),_0x5072d7[_0x5e3412(0x2df)]()),await pauseBot(undefined,_0x1b1620);else{if(_0x5072d7['toString']()[_0x5e3412(0x36f)](_0x5e3412(0x2ad)))logHistory(_0x5e3412(0x33f),_0x103540+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x5e3412(0x33f),_0x5e3412(0x25a)),await killBot();else{if(_0x5072d7['toString']()[_0x5e3412(0x36f)](_0x5e3412(0x335)))logHistory(_0x5e3412(0x33f),_0x103540+'\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x5e3412(0x25a)),await killBot();else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x29d)))logHistory('error',_0x103540+_0x5e3412(0x28a)),logHistory('error',_0x5e3412(0x25a)),await killBot();else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)]('PermissionDenied'))logHistory(_0x5e3412(0x33f),_0x103540+_0x5e3412(0x36e)),logHistory('error',_0x5e3412(0x25a)),await killBot();else{if(_0x5072d7[_0x5e3412(0x2df)]()[_0x5e3412(0x36f)](_0x5e3412(0x2c0)))logHistory('error',_0x5e3412(0x2ab)+_0x1c785c);else{if(_0x5072d7 instanceof ccxt[_0x5e3412(0x243)]){logHistory('error',_0x103540+_0x5e3412(0x2bc)),logger[_0x5e3412(0x229)](_0x5e3412(0x26b),_0x5072d7);if(_0x1c785c)logger['debug'](_0x5e3412(0x37d)+_0x1c785c);}else{_0x1b1620=_0x5e3412(0x2a7),logger[_0x5e3412(0x229)](_0x1b1620+'\x20>\x20details:',_0x5072d7);if(_0x1c785c)logger[_0x5e3412(0x229)](_0x5e3412(0x37d)+_0x1c785c);await pauseBot(undefined,_0x1b1620);}}}}}}}}}}}}}}}async function withRetry(_0x17b5e8,_0x4ddb4b){const _0x35c4b8=_0x3533c2;let _0x64eb99=![],_0x5d8613=0x0,_0x22f1b5,_0x4e1a90;while(_0x5d8613<maxRetries){try{_0x22f1b5=await _0x4ddb4b();break;}catch(_0x4ce799){_0x4e1a90=_0x4ce799,!_0x64eb99?(_0x64eb99=!![],logger[_0x35c4b8(0x229)](_0x35c4b8(0x394)+_0x17b5e8+':',_0x4ce799[_0x35c4b8(0x2df)]())):await sleep(retryInterval);}_0x5d8613++;}if(_0x5d8613==0x0)return _0x22f1b5;if(_0x5d8613>=maxRetries)throw _0x4e1a90;else return logger[_0x35c4b8(0x229)](_0x35c4b8(0x2b3)+_0x5d8613+'\x20attempts'),_0x22f1b5;}function formatResult(_0x8e4f78,_0x37ff29){const _0x574ef5=_0x3533c2;return parseFloat(_0x8e4f78[_0x574ef5(0x254)](_0x37ff29));}function formatResultTruncate(_0x375934,_0x39b773){const _0xf67049=_0x3533c2;let _0xc1b553=formatResultString(_0x375934,0xa),_0x37fa26=_0xc1b553[_0xf67049(0x2d9)]('.');return _0x37fa26!=-0x1&&(_0xc1b553=_0xc1b553[_0xf67049(0x242)](0x0,_0x37fa26+_0x39b773+0x1)),Number(_0xc1b553);}function formatResultString(_0x1d230e,_0x442c57){const _0x826fc7=_0x3533c2;let _0x1cd41f;if(!(''+_0x1d230e)[_0x826fc7(0x36f)]('e'))_0x1cd41f=+(Math[_0x826fc7(0x38a)](_0x1d230e+'e+'+_0x442c57)+'e-'+_0x442c57);else{let _0x58bfa0=(''+_0x1d230e)['split']('e'),_0x23496e='';+_0x58bfa0[0x1]+_0x442c57>0x0&&(_0x23496e='+'),_0x1cd41f=+(Math[_0x826fc7(0x38a)](+_0x58bfa0[0x0]+'e'+_0x23496e+(+_0x58bfa0[0x1]+_0x442c57))+'e-'+_0x442c57);}return Number(_0x1cd41f)['toFixed'](_0x442c57);}function getServerTime(){const _0xa8e7=_0x3533c2,_0x18bda7=new Date();return _0x18bda7[_0xa8e7(0x2e4)]()+'/'+(_0x18bda7[_0xa8e7(0x34c)]()+0x1)[_0xa8e7(0x2df)]()[_0xa8e7(0x32e)](0x2,'0')+'/'+_0x18bda7['getDate']()[_0xa8e7(0x2df)]()[_0xa8e7(0x32e)](0x2,'0')+'\x20'+_0x18bda7[_0xa8e7(0x2c8)]()['toString']()[_0xa8e7(0x32e)](0x2,'0')+':'+_0x18bda7[_0xa8e7(0x29a)]()[_0xa8e7(0x2df)]()[_0xa8e7(0x32e)](0x2,'0')+':'+_0x18bda7[_0xa8e7(0x2e2)]()['toString']()[_0xa8e7(0x32e)](0x2,'0');}function getTimeStamp(){const _0x16ff22=_0x3533c2,_0x4b51f6=shiftedTime();return _0x4b51f6[_0x16ff22(0x2e4)]()+'/'+(_0x4b51f6['getMonth']()+0x1)[_0x16ff22(0x2df)]()[_0x16ff22(0x32e)](0x2,'0')+'/'+_0x4b51f6[_0x16ff22(0x1eb)]()[_0x16ff22(0x2df)]()[_0x16ff22(0x32e)](0x2,'0')+'\x20'+_0x4b51f6['getHours']()[_0x16ff22(0x2df)]()[_0x16ff22(0x32e)](0x2,'0')+':'+_0x4b51f6[_0x16ff22(0x29a)]()[_0x16ff22(0x2df)]()['padStart'](0x2,'0')+':'+_0x4b51f6[_0x16ff22(0x2e2)]()['toString']()[_0x16ff22(0x32e)](0x2,'0');}function getDate(){const _0x5ce6e8=_0x3533c2,_0x31404e=shiftedTime();return _0x31404e[_0x5ce6e8(0x2e4)]()+'/'+(_0x31404e[_0x5ce6e8(0x34c)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x31404e['getDate']()['toString']()[_0x5ce6e8(0x32e)](0x2,'0');}function getHour(){const _0x56a1a1=_0x3533c2,_0x2a3c4c=shiftedTime();return _0x2a3c4c[_0x56a1a1(0x2c8)]()[_0x56a1a1(0x2df)]()[_0x56a1a1(0x32e)](0x2,'0');}function sleep(_0x211013){return new Promise(_0x4f96ff=>setTimeout(_0x4f96ff,_0x211013));}function shiftedTime(){const _0x2ecb68=_0x3533c2,_0x5254c0=new Date();let _0x250d1f=_0x5254c0;if(config&&config[_0x2ecb68(0x2f9)]!==0x0)_0x250d1f=fns['add'](_0x5254c0,{'hours':config[_0x2ecb68(0x2f9)]});return _0x250d1f;}function timer(_0x428be2){const _0x3964b4=_0x3533c2,_0x268974=new Date();!lasttime?console[_0x3964b4(0x29f)](getTimeStamp()+_0x3964b4(0x2f2),_0x428be2,_0x268974):console[_0x3964b4(0x29f)](getTimeStamp()+_0x3964b4(0x2f2),_0x428be2,(_0x268974-lasttime)/0x3e8),lasttime=_0x268974;}