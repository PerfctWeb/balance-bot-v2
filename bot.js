const _0x24bc82=_0xbb16;(function(_0x52978d,_0x3de5b8){const _0x27c60f=_0xbb16,_0x22e8b4=_0x52978d();while(!![]){try{const _0x2ac3a0=-parseInt(_0x27c60f(0x2a8))/0x1+parseInt(_0x27c60f(0x242))/0x2*(parseInt(_0x27c60f(0x2a4))/0x3)+parseInt(_0x27c60f(0x318))/0x4+parseInt(_0x27c60f(0x1c5))/0x5*(-parseInt(_0x27c60f(0x2f9))/0x6)+-parseInt(_0x27c60f(0x1b2))/0x7+-parseInt(_0x27c60f(0x21f))/0x8+parseInt(_0x27c60f(0x278))/0x9;if(_0x2ac3a0===_0x3de5b8)break;else _0x22e8b4['push'](_0x22e8b4['shift']());}catch(_0x151f0d){_0x22e8b4['push'](_0x22e8b4['shift']());}}}(_0x1f62,0x624b8));const _0x1923a1=function(){let _0x4f07e4=!![];return function(_0x558a2a,_0x3aa189){const _0x13e845=_0x4f07e4?function(){const _0x483179=_0xbb16;if(_0x3aa189){const _0x193a9c=_0x3aa189[_0x483179(0x2ca)](_0x558a2a,arguments);return _0x3aa189=null,_0x193a9c;}}:function(){};return _0x4f07e4=![],_0x13e845;};}(),_0x51d316=_0x1923a1(this,function(){const _0x9f3a38=_0xbb16;return _0x51d316['toString']()['search'](_0x9f3a38(0x1da))[_0x9f3a38(0x240)]()[_0x9f3a38(0x2a7)](_0x51d316)['search'](_0x9f3a38(0x1da));});_0x51d316();'use strict';const ccxt=require(_0x24bc82(0x313)),low=require(_0x24bc82(0x266)),FileSync=require(_0x24bc82(0x26a)),fs=require('fs'),fns=require(_0x24bc82(0x280)),Crypt=require('hybrid-crypto-js')[_0x24bc82(0x255)],util=require(_0x24bc82(0x204)),argv=require('yargs/yargs')(process[_0x24bc82(0x2fd)][_0x24bc82(0x1d4)](0x2))['argv'],path=require('path');let exchange;global[_0x24bc82(0x28b)]={},global['change']={};const usdBasecoins=[_0x24bc82(0x1e7),_0x24bc82(0x1f0),'TUSD',_0x24bc82(0x20b),_0x24bc82(0x25d),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x24bc82(0x1c9)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x24bc82(0x2e6)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[],initCycle=0x0;const serverversion=require(_0x24bc82(0x2c5))['version'],botID=process[_0x24bc82(0x2fd)][0x2]||_0x24bc82(0x1fa),pattern=/^[0-9]{3}$/;!pattern[_0x24bc82(0x2ef)](botID)&&(console[_0x24bc82(0x28a)](_0x24bc82(0x2bc)+botID+_0x24bc82(0x27c)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x24bc82(0x239),logspath=userID?_0x24bc82(0x1ce)+userID+'/':'./logs/',loggerfile=fs[_0x24bc82(0x1a4)](logspath+_0x24bc82(0x301),{'flags':'a'});!fs[_0x24bc82(0x22a)](configpath)&&fs[_0x24bc82(0x1ca)](configpath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);const configfile=configpath+_0x24bc82(0x28c)+botID+'-config.json',logfile=configpath+_0x24bc82(0x28c)+botID+_0x24bc82(0x247),performancefile=configpath+_0x24bc82(0x28c)+botID+_0x24bc82(0x292),coinresultsfile=configpath+'bot-'+botID+_0x24bc82(0x223),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x24bc82(0x256),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0x24bc82(0x21a)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x24bc82(0x21a)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x24bc82(0x1a9)]({'bot':[],'version':serverversion})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x24bc82(0x25f)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4ca003=>{const _0x1a4000=_0x24bc82;console[_0x1a4000(0x28a)](_0x4ca003);},'simple':_0x147d59=>{const _0x342ebd=_0x24bc82;console[_0x342ebd(0x28a)](_0x147d59),loggerfile[_0x342ebd(0x21a)](util[_0x342ebd(0x19f)](_0x147d59)+'\x0a');},'full':async(_0x525957,_0x1da3e3='')=>{const _0x327b94=_0x24bc82;let _0x2a428e;if(config['showname'])_0x2a428e=getTimeStamp()+':\x20'+config[_0x327b94(0x205)]+'\x20>\x20'+_0x525957;else _0x2a428e=getTimeStamp()+_0x327b94(0x197)+botID+_0x327b94(0x30f)+_0x525957;console['log'](_0x2a428e),loggerfile[_0x327b94(0x21a)](util[_0x327b94(0x19f)](_0x2a428e)+'\x0a'),_0x1da3e3&&(console[_0x327b94(0x28a)](_0x1da3e3),loggerfile[_0x327b94(0x21a)](util['format'](_0x1da3e3)+'\x0a'));},'debug':async(_0x3cf3a6,_0x38994e='')=>{const _0x199431=_0x24bc82;let _0x26cc56;if(config['showname'])_0x26cc56=getTimeStamp()+':\x20'+config[_0x199431(0x205)]+_0x199431(0x269)+_0x3cf3a6;else _0x26cc56=getTimeStamp()+_0x199431(0x197)+botID+_0x199431(0x269)+_0x3cf3a6;if(debugging)console['log'](_0x26cc56);loggerfile[_0x199431(0x21a)](util[_0x199431(0x19f)](_0x26cc56)+'\x0a');if(_0x38994e){if(debugging)console['log'](_0x38994e);loggerfile[_0x199431(0x21a)](util[_0x199431(0x19f)](_0x38994e)+'\x0a');}}};process['on'](_0x24bc82(0x238),function(_0x3722a7){const _0x1b7d29=_0x24bc82;logHistory(_0x1b7d29(0x1ac),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger['debug'](_0x1b7d29(0x1e4),_0x3722a7);});settings[_0x24bc82(0x27f)]!=config[_0x24bc82(0x27f)]&&updateTimeshift(settings[_0x24bc82(0x27f)]);settings[_0x24bc82(0x2db)]!=config[_0x24bc82(0x2db)]&&updateOnepagemode(settings[_0x24bc82(0x2db)]);process[_0x24bc82(0x309)]({'started':_0x24bc82(0x29d)},_0x3eadfa=>{}),initializeProcessListeners();function proxyEmit(_0x92d9d9,_0x37246=null){process['send']({'function':_0x92d9d9,'args':_0x37246},_0x42fc41=>{});}function initializeProcessListeners(){const _0x2fa846=_0x24bc82;process['on'](_0x2fa846(0x30b),_0x20ef13=>{const _0x2d081f=_0x2fa846;switch(Object[_0x2d081f(0x2e2)](_0x20ef13)[0x0]){case'timeshift':_0x20ef13[_0x2d081f(0x27f)]!=undefined&&(settings['timeshift']=_0x20ef13[_0x2d081f(0x27f)],updateTimeshift(settings[_0x2d081f(0x27f)]));break;case _0x2d081f(0x2db):_0x20ef13[_0x2d081f(0x2db)]!=undefined&&(settings['onepagemode']=_0x20ef13[_0x2d081f(0x2db)],updateOnepagemode(settings[_0x2d081f(0x2db)]));break;case _0x2d081f(0x2e4):_0x20ef13['bots']!=undefined&&(bots=JSON[_0x2d081f(0x2fa)](_0x20ef13[_0x2d081f(0x2e4)]),proxyEmit('bots',bots));break;case _0x2d081f(0x302):switch(_0x20ef13[_0x2d081f(0x302)]){case'initclient':initclient();break;case _0x2d081f(0x2c2):toggleBotMode();break;case'emitHistory':emitHistory(_0x20ef13[_0x2d081f(0x25c)]);break;case _0x2d081f(0x1b4):deleteHistoryAlerts(_0x20ef13[_0x2d081f(0x25c)]);break;case _0x2d081f(0x2bf):getPortfolio(_0x20ef13[_0x2d081f(0x25c)]);break;case _0x2d081f(0x212):storeConfiguration(_0x20ef13['args']);break;case _0x2d081f(0x252):storeHeadless(_0x20ef13[_0x2d081f(0x25c)]);break;case'storeFiat':storeFiat(_0x20ef13[_0x2d081f(0x25c)]);break;case _0x2d081f(0x30e):resetHistory();break;case _0x2d081f(0x296):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x20ef13['args']);break;case _0x2d081f(0x320):cancelLoading();break;case'showConfig':showConfig();break;case _0x2d081f(0x2b2):sendMetricsTelegram();break;case _0x2d081f(0x1e1):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x3ceb47=![]){const _0xe34ff=_0x24bc82;logger[_0xe34ff(0x287)](_0xe34ff(0x2d3)+(_0x3ceb47?_0xe34ff(0x1e8):_0xe34ff(0x326))+_0xe34ff(0x22e)+config[_0xe34ff(0x297)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x3ceb47)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0xe34ff(0x24f)){loadingProgress=0x0;if(_0x3ceb47){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x115bd1){handleErrorNoStop(_0x115bd1,_0xe34ff(0x1a1));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x233d54=await getCoins();[currentCoins,currentCoinsAll]=_0x233d54,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0xe34ff(0x287)](_0xe34ff(0x1b6)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xe34ff(0x1c6)]==0x0&&allOpenOrders[_0xe34ff(0x1c6)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x235ae2=_0x24bc82;exchangeStopped=!![];try{await exchange['close']();}catch(_0x496495){await handleError(_0x496495,_0x235ae2(0x262));}}async function reloadExchange(){const _0x24e3c3=_0x24bc82;while(lockOrders!=ORDERS[_0x24e3c3(0x2ac)]||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x24e3c3(0x1a8)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x3966ed=config['exchange'],_0x4fccbb=config[_0x24bc82(0x1a6)],_0xc42511=config[_0x24bc82(0x2bd)],_0x36ebc2=config['apiPassword']){const _0x2ce3f5=_0x24bc82;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x3966ed)&&(logHistory(_0x2ce3f5(0x1ac),_0x2ce3f5(0x1f2)+_0x3966ed+_0x2ce3f5(0x2a0)),killBot());const _0x452952=ccxt['pro'][_0x3966ed[_0x2ce3f5(0x1a2)]()];exchange=new _0x452952({'apiKey':_0x4fccbb,'secret':_0xc42511,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x2ce3f5(0x2d9)}});if(_0x36ebc2)exchange[_0x2ce3f5(0x277)]=_0x36ebc2;}function setStableCoins(){const _0x429490=_0x24bc82;let _0x53e463=config['basecoin']=='ETH'?_0x429490(0x1e9):'BTC',_0x3a6b41=!allSymbols['includes'](_0x53e463+_0x429490(0x233))?_0x429490(0x20b):_0x429490(0x1e7),_0x11ea5b=!allSymbols[_0x429490(0x2d4)](_0x53e463+'/EUR')?_0x3a6b41:_0x429490(0x1e0);stablecoins={'eur':{'coin':''+_0x53e463+_0x11ea5b,'symbol':_0x53e463+'/'+_0x11ea5b},'usd':{'coin':''+_0x53e463+_0x3a6b41,'symbol':_0x53e463+'/'+_0x3a6b41}};}function _0xbb16(_0x5b58fc,_0x40e9ab){const _0x3a794c=_0x1f62();return _0xbb16=function(_0x51d316,_0x1923a1){_0x51d316=_0x51d316-0x191;let _0x1f6271=_0x3a794c[_0x51d316];return _0x1f6271;},_0xbb16(_0x5b58fc,_0x40e9ab);}async function initwsCcxt(){const _0x29098c=_0x24bc82;initCycle++;const _0x2ef7d3=initCycle;let _0x351578=[];config[_0x29098c(0x2b0)]['forEach'](_0x264f2f=>{const _0x62a141=_0x29098c;if(!_0x264f2f[_0x62a141(0x2f1)]&&_0x264f2f[_0x62a141(0x1d5)]!=config[_0x62a141(0x2f2)])_0x351578[_0x62a141(0x1c1)](_0x264f2f[_0x62a141(0x2af)]);});if(!_0x351578[_0x29098c(0x2d4)](stablecoins[_0x29098c(0x1bf)]['symbol']))_0x351578[_0x29098c(0x1c1)](stablecoins[_0x29098c(0x1bf)][_0x29098c(0x2af)]);if(!_0x351578[_0x29098c(0x2d4)](stablecoins['usd'][_0x29098c(0x2af)]))_0x351578[_0x29098c(0x1c1)](stablecoins['usd']['symbol']);if(config[_0x29098c(0x297)][_0x29098c(0x28d)]('Binance')){if(!_0x351578[_0x29098c(0x2d4)]('BNB/'+config[_0x29098c(0x2f2)]))_0x351578[_0x29098c(0x1c1)]('BNB/'+config[_0x29098c(0x2f2)]);}loadCoins(_0x351578),_0x351578=validateSymbols(_0x351578);const _0x10b5c2=async _0x19382c=>{const _0x308ea4=_0x29098c;let _0x313103;try{const _0x732096=await exchange[_0x308ea4(0x2e7)](_0x19382c);Object['entries'](_0x732096)['forEach'](_0x1d2a1a=>{const _0x538252=_0x308ea4;_0x313103=_0x1d2a1a[0x1][_0x538252(0x2af)],global[_0x538252(0x28b)][noslash(_0x313103)]=_0x1d2a1a[0x1][_0x538252(0x29b)],global[_0x538252(0x29f)][_0x313103]=_0x1d2a1a[0x1][_0x538252(0x267)];});}catch(_0x6fa5a5){await handleError(_0x6fa5a5,_0x308ea4(0x328),_0x313103);}},_0x2b741f=async _0x188ad7=>{const _0x543b16=_0x29098c;while(initCycle==_0x2ef7d3){if(!botPaused)try{const _0x1f4a0d=await exchange['watchTrades'](_0x188ad7);global[_0x543b16(0x28b)][noslash(_0x1f4a0d[0x0][_0x543b16(0x2af)])]=_0x1f4a0d[0x0][_0x543b16(0x2d2)],await sleep(0x3e8);}catch(_0x2d15a3){if(!exchangeStopped)await handleError(_0x2d15a3,_0x543b16(0x2dd),_0x188ad7);}else await sleep(0x64);}},_0x1ed4b0=async _0x26af3d=>{const _0x147848=_0x29098c;await sleep(0x3c*0x3e8);while(initCycle==_0x2ef7d3){if(!botPaused){let _0x1c8e5a;try{const _0x18a1ab=await exchange[_0x147848(0x2e7)](_0x26af3d);Object[_0x147848(0x264)](_0x18a1ab)[_0x147848(0x310)](_0x310ef6=>{const _0x4f7899=_0x147848;_0x1c8e5a=_0x310ef6[0x1]['symbol'],global[_0x4f7899(0x29f)][_0x1c8e5a]=_0x310ef6[0x1]['percentage'];}),await sleep(0x3c*0x3e8);}catch(_0x988b3e){if(!exchangeStopped)await handleError(_0x988b3e,_0x147848(0x303),_0x1c8e5a);}}else await sleep(0x64);}},_0x2fa266=async _0x1d678e=>{const _0x5a4fb6=_0x29098c;while(initCycle==_0x2ef7d3){if(!botPaused)try{const _0x2c3f21=await exchange[_0x5a4fb6(0x2f0)](_0x1d678e);initCycle==_0x2ef7d3&&_0x2c3f21[_0x5a4fb6(0x310)](_0x14286b=>{updateNumberCoinsCcxt(_0x14286b);});}catch(_0x2d25ec){if(!exchangeStopped)await handleError(_0x2d25ec,_0x5a4fb6(0x237));}else await sleep(0x64);}};_0x10b5c2(_0x351578),_0x1ed4b0(_0x351578),_0x351578[_0x29098c(0x310)](_0x3eab45=>{_0x2b741f(_0x3eab45),_0x2fa266(_0x3eab45);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function watchTransactions(){const _0x2f1727=_0x24bc82;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x330ce9=await getCoins(),[_0xe6fdea,_0x336b61]=_0x330ce9;let _0x8c121f=[];currentCoins[_0x2f1727(0x310)](_0x37e04e=>{const _0x3d5280=_0x2f1727,_0xa7533=_0xe6fdea[_0x3d5280(0x26d)](_0x3ddb2f=>_0x3ddb2f[_0x3d5280(0x1d5)]==_0x37e04e[_0x3d5280(0x1d5)]);if(_0xa7533){if(_0x37e04e[_0x3d5280(0x20f)]!=_0xa7533[_0x3d5280(0x20f)]){let _0x49fe67;if(_0x37e04e[_0x3d5280(0x1d5)]!=config[_0x3d5280(0x2f2)]){const _0x4b7beb=global['ticker'][noslash(_0x37e04e[_0x3d5280(0x2af)])];_0x49fe67=_0x37e04e['reverse']?0x1/_0x4b7beb:_0x4b7beb;}else _0x49fe67=0x1;_0x8c121f['push']({'coin':_0x37e04e[_0x3d5280(0x1d5)],'symbol':_0x37e04e[_0x3d5280(0x2af)],'price':_0x49fe67,'number':Number(formatResult(_0xa7533[_0x3d5280(0x20f)]-_0x37e04e[_0x3d5280(0x20f)],0x8)),'basecoinvalue':_0x49fe67*(_0xa7533['number']-_0x37e04e['number'])});}}});if(_0x8c121f[_0x2f1727(0x1c6)]==0x1&&!blockTransactionDetection){if(config[_0x2f1727(0x24d)]){logger[_0x2f1727(0x287)](_0x2f1727(0x1c4)+_0x8c121f[0x0][_0x2f1727(0x26c)]+_0x2f1727(0x1af)+lastFees[_0x2f1727(0x288)]);if(lastFees[_0x2f1727(0x288)]==0x0||Math[_0x2f1727(0x1e2)](_0x8c121f[0x0][_0x2f1727(0x26c)])>lastFees[_0x2f1727(0x288)]){delete _0x8c121f[0x0][_0x2f1727(0x2af)],delete _0x8c121f[0x0][_0x2f1727(0x26c)];let _0x510163=[],_0x419da8=[...config[_0x2f1727(0x2a5)]]||[],_0x37077a=config[_0x2f1727(0x2a5)];_0x419da8[_0x2f1727(0x1b7)]((_0x1cd5f0,_0x191ab7)=>_0x1cd5f0[_0x2f1727(0x249)]>_0x191ab7[_0x2f1727(0x249)]?-0x1:_0x191ab7['date']>_0x1cd5f0[_0x2f1727(0x249)]?0x1:0x0);const _0x4b5d42=getDate();if(_0x419da8[0x0]){const _0x43fade=fns['parse'](_0x419da8[0x0][_0x2f1727(0x249)],'yyyy/MM/dd',new Date()),_0x4d6c32=fns[_0x2f1727(0x2fa)](_0x4b5d42,_0x2f1727(0x25b),new Date());if(fns[_0x2f1727(0x31c)](_0x43fade,_0x4d6c32)){_0x510163=_0x419da8[0x0][_0x2f1727(0x1f9)];const _0x1920b2=_0x510163[_0x2f1727(0x26d)](_0x445467=>_0x445467[_0x2f1727(0x1d5)]==_0x8c121f[0x0]['coin']);_0x1920b2?(_0x1920b2['number']+=_0x8c121f[0x0]['number'],_0x1920b2[_0x2f1727(0x20f)]==0x0&&(_0x510163=_0x510163['filter'](_0x363c1f=>{const _0xf346db=_0x2f1727;return _0x363c1f[_0xf346db(0x1d5)]!=_0x8c121f[0x0][_0xf346db(0x1d5)];}))):_0x510163['push'](_0x8c121f[0x0]);const _0x4fafa6=_0x37077a[_0x2f1727(0x26d)](_0x4c46ff=>_0x4c46ff[_0x2f1727(0x249)]==_0x4b5d42);_0x4fafa6['changes']=_0x510163;}else _0x37077a[_0x2f1727(0x1c1)]({'date':_0x4b5d42,'changes':[_0x8c121f[0x0]]});}const _0x583b75=_0x37077a[_0x2f1727(0x26d)](_0x4116f2=>_0x4116f2['date']==_0x4b5d42);if(_0x583b75){let _0x2d110d=!![];_0x583b75[_0x2f1727(0x1f9)][_0x2f1727(0x310)](_0xe09464=>{const _0x207872=_0x2f1727;if(_0xe09464[_0x207872(0x20f)]!=0x0)_0x2d110d=![];}),_0x2d110d&&(_0x37077a=_0x37077a[_0x2f1727(0x282)](_0x3036ec=>{const _0x10f996=_0x2f1727;return _0x3036ec[_0x10f996(0x249)]!=_0x4b5d42;}));}let _0xd835f6=dbConfig[_0x2f1727(0x2b1)]('bot')[_0x2f1727(0x26d)]({'botID':botID})[_0x2f1727(0x2dc)]();_0xd835f6&&(dbConfig[_0x2f1727(0x2b1)]('bot')[_0x2f1727(0x26d)]({'botID':botID})[_0x2f1727(0x235)]({'liquidity':_0x37077a})[_0x2f1727(0x21a)](),config[_0x2f1727(0x2a5)]=_0x37077a),logHistory(_0x2f1727(0x1ad),_0x2f1727(0x200)+Math[_0x2f1727(0x1e2)](_0x8c121f[0x0][_0x2f1727(0x20f)])+'\x20'+_0x8c121f[0x0][_0x2f1727(0x1d5)]+'\x20'+(_0x8c121f[0x0]['number']>0x0?_0x2f1727(0x1fc):'removed')+_0x2f1727(0x2c9)),proxyEmit(_0x2f1727(0x319),emittedConfiguration());}else logger[_0x2f1727(0x287)](_0x2f1727(0x31b)+Math[_0x2f1727(0x1e2)](_0x8c121f[0x0]['number'])+'\x20'+_0x8c121f[0x0][_0x2f1727(0x1d5)]+'\x20'+(_0x8c121f[0x0][_0x2f1727(0x20f)]>0x0?_0x2f1727(0x1fc):_0x2f1727(0x236)));transactionDetected=!![],currentCoins=_0xe6fdea,currentCoinsAll=_0x336b61;}else logger[_0x2f1727(0x287)](_0x2f1727(0x200)+Math[_0x2f1727(0x1e2)](_0x8c121f[0x0][_0x2f1727(0x20f)])+'\x20'+_0x8c121f[0x0][_0x2f1727(0x1d5)]+'\x20'+(_0x8c121f[0x0][_0x2f1727(0x20f)]>0x0?_0x2f1727(0x1fc):'removed')+_0x2f1727(0x2a9)),currentCoins=_0xe6fdea,currentCoinsAll=_0x336b61;}await sleep(watchTransactionsInterval);}catch(_0xf7f302){if(!exchangeStopped)await handleError(_0xf7f302,_0x2f1727(0x276));}else await sleep(0x64);}}async function loadSymbols(){const _0x436b4b=_0x24bc82;try{markets=await exchange[_0x436b4b(0x1fe)](),allSymbols=[],Object[_0x436b4b(0x264)](markets)[_0x436b4b(0x310)](_0x2bff21=>{const _0xa025b0=_0x436b4b;_0x2bff21[0x1][_0xa025b0(0x2cf)]&&_0x2bff21[0x1][_0xa025b0(0x2d9)]&&allSymbols[_0xa025b0(0x1c1)](_0x2bff21[0x0]);});}catch(_0x28109b){throw _0x28109b;}}function validateSymbols(_0x552e2d){const _0x1f0da0=_0x24bc82;let _0x134a3f=[];return _0x552e2d[_0x1f0da0(0x310)](_0x29dbf9=>{const _0x40654d=_0x1f0da0;!allSymbols[_0x40654d(0x2d4)](_0x29dbf9)?logHistory('error',_0x40654d(0x327)+_0x29dbf9+_0x40654d(0x2e9)):_0x134a3f[_0x40654d(0x1c1)](_0x29dbf9);}),_0x134a3f;}async function initclient(){const _0x27ebba=_0x24bc82;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x27ebba(0x20c),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x27ebba(0x195),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x5645c2=getNormalizedPerformance();emitPerformance(_0x5645c2),getStartingBalances(_0x5645c2);}async function toggleBotMode(){const _0x8ba6c6=_0x24bc82;let _0x503c36=dbConfig[_0x8ba6c6(0x2b1)](_0x8ba6c6(0x210))['find']({'botID':botID})['value']();if(_0x503c36){const _0x361c3c=!_0x503c36['headless'];dbConfig['get'](_0x8ba6c6(0x210))[_0x8ba6c6(0x26d)]({'botID':botID})[_0x8ba6c6(0x235)]({'headless':_0x361c3c})[_0x8ba6c6(0x21a)](),config[_0x8ba6c6(0x290)]=_0x361c3c,proxyEmit(_0x8ba6c6(0x319),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x293486=_0x24bc82;process[_0x293486(0x309)]({'updatebotmanager':!![]},_0x4652b5=>{});}async function loadCoins(_0x1fd368){const _0x1c9b6b=_0x24bc82;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1d8a55,_0x560c36=0x0,_0x4124af=0x0;_0x1fd368[_0x1c9b6b(0x310)](_0x2ff479=>{const _0x42e2e1=_0x1c9b6b;loading[_0x42e2e1(0x2b9)][_0x42e2e1(0x1c1)](_0x2ff479);}),loadingCanceled=![];let _0x13e64a=![];while(_0x1d8a55!=_0x1fd368[_0x1c9b6b(0x1c6)]+maxLoadingProgress){_0x1d8a55=loadingProgress,_0x1fd368[_0x1c9b6b(0x310)](_0x17f891=>{const _0x15651b=_0x1c9b6b;if(global[_0x15651b(0x28b)][noslash(_0x17f891)]){loading[_0x15651b(0x2b9)]=loading[_0x15651b(0x2b9)]['filter'](_0x185690=>_0x185690!=_0x17f891);if(!watchedSymbols['includes'](_0x17f891))watchedSymbols[_0x15651b(0x1c1)](_0x17f891);_0x1d8a55++;}}),loading[_0x1c9b6b(0x281)]=Math[_0x1c9b6b(0x2f5)](_0x1d8a55/(_0x1fd368[_0x1c9b6b(0x1c6)]+maxLoadingProgress)*0x64);loading[_0x1c9b6b(0x281)]!=0x64&&(_0x4124af>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x4124af>0x78*0x5&&!_0x13e64a&&(loading[_0x1c9b6b(0x2f3)]=!![],emitLoadingProgress(),_0x13e64a=!![],logHistory('error',_0x1c9b6b(0x1b0)+loading[_0x1c9b6b(0x2b9)][_0x1c9b6b(0x19a)](',\x20')+_0x1c9b6b(0x2e1)),logHistory(_0x1c9b6b(0x1ac),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x1c9b6b(0x2ae)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x23f127=_0x1c9b6b;process[_0x23f127(0x309)]({'stop':_0x23f127(0x325)},_0x284dc7=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x1c9b6b(0x2f3)]=!![],emitLoadingProgress();break;}else _0x560c36!=loading[_0x1c9b6b(0x281)]&&(_0x560c36=loading[_0x1c9b6b(0x281)],emitLoadingProgress()),_0x4124af++,await sleep(0xc8);}_0x1d8a55==_0x1fd368['length']+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1c9b6b(0x309)]({'status':_0x1c9b6b(0x29a),'live':'running'},_0x8ac727=>{}),_0x13e64a&&logHistory(_0x1c9b6b(0x1ad),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function _0x1f62(){const _0x7e92a2=['send','stringify','message','\x20/\x20','split','resetHistory','\x20>\x20','forEach','recent20','2\x20-\x20Handled\x20open\x20orders','ccxt','Initializing\x20coin\x20results','fetchTicker','usd','event','2440256uBHJNT','configuration','cancelOrder','Fee\x20discount\x20refund\x20detected:\x20','isEqual','yyyy-MM-dd\x27T\x27HH:mm:ss','full','Bitget','cancelLoading','fiat','\x20metrics:</b>\x20\x0a\x0a','page','Bot\x20','restart','exchange\x20not\x20reloaded','Invalid\x20symbol:\x20','initTickers()','currency','1\x20-\x20FILLED\x20known\x20order:\x20','emojibuy','OrderNotFound','add','balances','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated',':\x20Bot\x20','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','padEnd','join','Avoiding\x20continuous\x20order\x20attempts','Resetting\x20bot\x20history','openOrders','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','format','fromCodePoint','loadSymbols()','toLowerCase','UNLOCKING','createWriteStream','\x20exchange\x20error','apiKey','change24h','Executing\x20exchange\x20reload','defaults','getPortfolio(1)','getOpenOrders()','error','success','No\x20more\x20open\x20orders\x20-\x20','\x20|\x20highest\x20fee:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','getHours','4503835nHTvap','coins','deleteHistoryAlerts','</pre>','Loading\x20completed','sort','valid','limit','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','decrypt','reverse','differenceInSeconds','sells','eur','floor','push','configuration-stored','sell','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','15wYUWOL','length','logs','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','freeze','mkdirSync','rightTxt','Executed\x20','.json','./logs/','%\x20(','Binance','ongoing','2\x20-\x20Validate\x20orders:\x20','writeFile','slice','coin','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','getFullYear','sortBy',':\x20timer\x20>','(((.+)+)+)+$','type','amountToPrecision','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','fetchBalance','placeOrder()','EUR','sendPortfolioTelegram','abs','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Uncaught\x20Exception:','privateKey','Error\x20details:','USD','exchange\x20reloaded','ETH','<b>','<pre>','ExchangeError','balancing\x20resumed','open','limit-low','BUSD','ordertype','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','Net\x20effect','performance','\x20change','parseISO','1\x20-\x20Handle\x20open\x20orders','InsufficientFunds','changes','001','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','added','realized','loadMarkets','delta','Portfolio\x20change\x20detected:\x20','startdate','remove','status','util','botname','exec','fetchOpenOrders','substring','replace','\x20API\x20key\x20is\x20invalid','USDT','exchanges','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','offset','number','bot','BNB','storeConfiguration','initial','LOCKED','Order(s)\x20not\x20validated\x20after\x20','Order\x20is\x20invalid:\x20','2.3.5','unlinkSync','target','write','startnumber','indexOf','total','starting-balance-','5112512WyAziI','startprice','Invalid\x20quantity','getSeconds','-results.json','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','toFixed','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','set','min','existsSync','1\x20-\x20Unlock\x20orders','data','bid','\x20|\x20exchange:\x20','filled','red_yellow_blue','trade','fetchClosedOrders','/USD','botID','assign','removed','watchOrders()','uncaughtException','./config/','closed','1\x20-\x20FILLED\x20unknown\x20order:\x20','final','fees','2\x20-\x20Orders\x20unlocked','net-basecoin','toString','\x20not\x20available','5414hSvLcy','Exception\x20thrown\x20in\x20','concat','NetworkError','ExchangeNotAvailable','-events.json','getTime','date','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getDate','ORDERS.UNLOCKING','autoliquidity','event-history','***','Order\x20amount\x20is\x20invalid:\x20','\x20order:\x20','storeHeadless','orderId','fee','Crypt','/backup/','\x20closed\x20the\x20connection','\x20value','timestamp','getMonth','yyyy/MM/dd','args','USDC','Order\x20filled:\x20','RSA-OAEP','\x20network\x20error','Trigger:\x20','stopExchange()','getPortfolio(0)','entries','ask','lowdb','percentage','getPortfolio(2)','\x20>\x20[DEBUG]\x20','lowdb/adapters/FileSync','<b>Bot\x20','basecoinvalue','find','************','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','time','ORDERS.LOCKED','\x20|\x20Custom\x20ID:\x20','shift','has','emojisell','watchTransactions()','password','13866903AilBbe','\x20hour','Saving\x20configuration','\x20:\x20',',\x20must\x20be\x20a\x203\x20digit\x20number','warning','side','timeshift','date-fns','progress','filter','RateLimitExceeded','netoffset','\x20portfolio:</b>\x20\x0a\x0a','getCoinNumber()','debug','highest','max','log','ticker','bot-','startsWith','settings','kill','headless','createOrder','-performance.json','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','pro','market','getStartingBalances','exchange','BTC','buy','enabled','last','limit-high','running','\x20minutes\x20-\x20','change','\x20exchange','Cex','InvalidNonce','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','633mrUUQc','liquidity','timeout','constructor','716334FYahWn','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','recreate','random','UNLOCKED','colorscheme','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','symbol','portfolio','get','sendMetricsTelegram','OnMaintenance','RequestTimeout','Resetting\x20coin\x20results:\x20','net-fiat','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','version','remainingSymbols','threshold','apiPassword','Error:\x20Invalid\x20argument\x20','apiSecret','AuthenticationError','getPortfolio','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Cooldown\x20ended\x20-\x20balancing\x20resumed','toggleBotMode','Net\x20','\x20orders\x20in\x20less\x20than\x20','./version.json','limits','Limit\x20(low-margin)','ORDERS.UNLOCKED','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','apply','API-key\x20format\x20invalid','Invalid\x20API\x20key\x20or\x20secret\x20entered','recreateCoinResults()','MIN_NOTIONAL','active','API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','amount','price','Reset\x20|\x20','includes','2\x20-\x20handling\x20FILLED\x20order:\x20','cloneDeep','balancing\x20resumes\x20when\x20cooldown\x20ends','order','spot','leftTxt','onepagemode','value','watchTrades()','findIndex','cooldown','padStart','\x20-\x20bot\x20not\x20started','keys','string','bots','breakeven','\x20-\x20pausing\x20bot\x20for\x20','fetchTickers','map','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','distribution','datetime','starting-balances','Error\x20while\x20deleting\x20files:\x20','Bybit','test','watchOrders','excluded','basecoin','cancel','customId','round','none','getCoins()','Exchange','641178IUghTV','parse','cost','must\x20be\x20greater\x20than\x20minimum\x20amount','argv','2.5.0','\x20|\x20','average','/output-000.log','function','fetchTickers()','showname','Transaction\x20detection\x20unblocked','orderstatus','canceled','0\x20-\x20EXECUTION:\x20'];_0x1f62=function(){return _0x7e92a2;};return _0x1f62();}function showConfig(){const _0x52e16a=_0x24bc82;proxyEmit(_0x52e16a(0x319),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x258991=_0x24bc82;let _0x4a4d08=global[_0x258991(0x28b)][stablecoins[_0x258991(0x1bf)]['coin']],_0x2c48ce=global[_0x258991(0x28b)][stablecoins['usd'][_0x258991(0x1d5)]];return{'eur':Number(_0x4a4d08),'usd':Number(_0x2c48ce)};}function capitalize(_0xe5adbd){const _0x41f608=_0x24bc82;return _0xe5adbd[_0x41f608(0x208)](0x0,0x1)['toUpperCase']()+_0xe5adbd['substring'](0x1);}function supportedExchanges(){const _0xbcad28=_0x24bc82,_0x2f47a4=['ws','fetchTickers','fetchTicker','watchTrades',_0xbcad28(0x2f0),_0xbcad28(0x31a),'createOrder',_0xbcad28(0x207),_0xbcad28(0x232),'fetchBalance'];let _0x4f2a0f=[],_0x3f0000=[],_0x4efafd=ccxt[_0xbcad28(0x294)]['exchanges'];_0x4efafd[_0xbcad28(0x310)](_0x163d8c=>{const _0x3de4ef=_0xbcad28;try{const _0x32f6b7=new ccxt[(_0x3de4ef(0x294))][_0x163d8c]();_0x3f0000[_0x3de4ef(0x1c1)](_0x32f6b7);}catch(_0x34b163){}}),_0x3f0000[_0xbcad28(0x310)](_0x7b1f7=>{const _0x1f9410=_0xbcad28;let _0x13ca27=0x0;_0x2f47a4[_0x1f9410(0x310)](_0x5e9a45=>{const _0x3f0351=_0x1f9410;_0x5e9a45 in _0x7b1f7[_0x3f0351(0x274)]&&_0x7b1f7[_0x3f0351(0x274)][_0x5e9a45]&&_0x13ca27++;}),_0x13ca27==_0x2f47a4[_0x1f9410(0x1c6)]&&_0x4f2a0f[_0x1f9410(0x1c1)](capitalize(_0x7b1f7['id']));});let _0x1f0b93=[];return _0x4efafd[_0xbcad28(0x310)](_0xd2d989=>{const _0x461286=_0xbcad28;_0xd2d989=capitalize(_0xd2d989);if(!_0x4f2a0f['includes'](_0xd2d989))_0x1f0b93[_0x461286(0x1c1)](_0xd2d989);}),_0x4f2a0f;}function setStartDatePerformance(){const _0x47179e=_0x24bc82;if(config&&config[_0x47179e(0x2a5)][0x0][_0x47179e(0x1f9)][_0x47179e(0x1c6)]!=0x0){const _0x1eae23=config[_0x47179e(0x2a5)][0x0][_0x47179e(0x1f9)];dbPerformance['get']('data')[_0x47179e(0x26d)]({'date':config[_0x47179e(0x201)]})[_0x47179e(0x235)]({'coins':_0x1eae23})[_0x47179e(0x21a)]();}}async function recreateCoinResults(){const _0x451ec0=_0x24bc82;let _0x2233a9,_0x140a52=[];try{const _0x1018df=fns[_0x451ec0(0x19f)](fns[_0x451ec0(0x1f6)](config[_0x451ec0(0x201)][_0x451ec0(0x209)](/\//g,'-')),_0x451ec0(0x31d));for(const _0x4f0eb0 of currentCoins){if(_0x4f0eb0[_0x451ec0(0x1d5)]!=config[_0x451ec0(0x2f2)]){let _0x4df641=0x0,_0x5e2eb2,_0x3860f6;_0x2233a9=await getAllEventOrders(_0x4f0eb0[_0x451ec0(0x2af)]);if(_0x2233a9['length']>0x0)_0x2233a9[_0x451ec0(0x310)](_0x58b456=>{const _0x5b6bc0=_0x451ec0,_0x1a4e18=_0x4f0eb0[_0x5b6bc0(0x2af)][_0x5b6bc0(0x2d4)](config[_0x5b6bc0(0x2f2)]+'/');_0x140a52['push']({'datetime':_0x58b456[_0x5b6bc0(0x2eb)],'coin':_0x4f0eb0['coin'],'symbol':_0x4f0eb0[_0x5b6bc0(0x2af)],'side':_0x58b456['side'],'reverse':_0x1a4e18,'amount':formatResult(_0x58b456[_0x5b6bc0(0x22f)],0x8),'filled':formatResult(_0x58b456['filled'],0x8),'price':formatResult(_0x58b456[_0x5b6bc0(0x2d2)],0x8)}),_0x4df641=_0x58b456['side']==_0x5b6bc0(0x299)?_0x4df641+_0x58b456['filled']:_0x4df641-_0x58b456[_0x5b6bc0(0x22f)];if(!_0x3860f6)_0x3860f6=_0x58b456[_0x5b6bc0(0x2d2)];});_0x5e2eb2=_0x4f0eb0[_0x451ec0(0x20f)]-_0x4df641;let _0x63ad7;config[_0x451ec0(0x2a5)][_0x451ec0(0x310)](_0x2ee0e0=>{const _0x22fb0f=_0x451ec0;!_0x63ad7&&(_0x63ad7=_0x2ee0e0[_0x22fb0f(0x1f9)][_0x22fb0f(0x26d)](_0x1c1860=>_0x1c1860['coin']==_0x4f0eb0[_0x22fb0f(0x1d5)]),_0x63ad7&&(_0x5e2eb2=_0x63ad7['number'],_0x3860f6=_0x63ad7[_0x22fb0f(0x2d2)]));});let _0x3fac8f=dbCoinResults[_0x451ec0(0x2b1)](_0x451ec0(0x1b3))[_0x451ec0(0x26d)]({'coin':_0x4f0eb0[_0x451ec0(0x1d5)]})[_0x451ec0(0x2dc)]();_0x3fac8f={'coin':_0x4f0eb0[_0x451ec0(0x1d5)],'number':_0x5e2eb2,'breakeven':_0x3860f6,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x451ec0(0x2b1)]('coins')[_0x451ec0(0x26d)]({'coin':_0x4f0eb0[_0x451ec0(0x1d5)]})[_0x451ec0(0x235)](_0x3fac8f)[_0x451ec0(0x21a)]();}}_0x140a52[_0x451ec0(0x1b7)]((_0x142801,_0x5d1558)=>_0x142801['datetime']>_0x5d1558[_0x451ec0(0x2eb)]?0x1:_0x5d1558[_0x451ec0(0x2eb)]>_0x142801['datetime']?-0x1:0x0);let _0x1ddc69=0x0;for(let _0x5c7b8c of _0x140a52){await updateCoinResults(_0x5c7b8c,!![]);}}catch(_0x3ffbdf){await handleError(_0x3ffbdf,_0x451ec0(0x2cd));}}async function getAllEventOrders(_0xe2e3fd){const _0x425bdb=_0x24bc82;let _0x25641e=[],_0x1b1764=dbLogs['get']('logs')[_0x425bdb(0x282)](_0x2fe9ff=>{const _0x3ca54f=_0x425bdb,_0x226220=_0x2fe9ff[_0x3ca54f(0x317)]['toLowerCase']();return _0x226220[_0x3ca54f(0x2d4)](_0xe2e3fd[_0x3ca54f(0x1a2)]())&&(_0x226220['includes']('market')&&_0x226220[_0x3ca54f(0x2d4)]('order')||_0x226220['includes'](_0x3ca54f(0x22f))&&_0x226220[_0x3ca54f(0x2d4)](_0x3ca54f(0x2d8)));})[_0x425bdb(0x1d8)](_0x425bdb(0x270))['value']();return _0x1b1764[_0x425bdb(0x310)](_0xbb5311=>{const _0x50dee7=_0x425bdb,_0x479604=_0xbb5311[_0x50dee7(0x317)][_0x50dee7(0x2d4)](_0x50dee7(0x1c3))?_0x50dee7(0x1c3):_0x50dee7(0x299),_0x38aa7e=/#([0-9]|\.)+\s/i,_0x1ff65b=Number(_0x38aa7e[_0x50dee7(0x206)](_0xbb5311[_0x50dee7(0x317)])[0x0][_0x50dee7(0x1d4)](0x1)),_0x10640a=/@([0-9]|\.)+$/i,_0xae5290=Number(_0x10640a[_0x50dee7(0x206)](_0xbb5311['event'])[0x0][_0x50dee7(0x1d4)](0x1));_0x25641e[_0x50dee7(0x1c1)]({'datetime':_0xbb5311[_0x50dee7(0x270)],'coin':symbolToCoin(_0xe2e3fd),'symbol':_0xe2e3fd,'side':_0x479604,'amount':_0x1ff65b,'filled':_0x1ff65b,'price':_0xae5290});}),_0x25641e;}async function getAllOrders(_0x104dd4,_0x25fe1d){const _0x761e46=_0x24bc82;let _0x5934f3=[];while(_0x25fe1d<exchange['milliseconds']()){const _0x5044db=0x1f4;try{const _0x29fdb2=await exchange[_0x761e46(0x232)](_0x104dd4,_0x25fe1d,_0x5044db);if(_0x29fdb2[_0x761e46(0x1c6)])_0x25fe1d=_0x29fdb2[_0x29fdb2['length']-0x1]['timestamp']+0x1,_0x5934f3=_0x5934f3[_0x761e46(0x244)](_0x29fdb2);else break;}catch(_0x2169ef){await handleError(_0x2169ef,'getAllOrders()',_0x104dd4);}}return _0x5934f3;}async function validate24hChanges(){const _0x28f694=_0x24bc82;for(const _0x155a6f of currentCoins){if(_0x155a6f[_0x28f694(0x1d5)]!=config['basecoin']){let _0x524d2f;_0x155a6f['reverse']?_0x524d2f=formatResult((0x1/(global['change'][noslash(_0x155a6f[_0x28f694(0x2af)])]/0x64+0x1)-0x1)*0x64,0x3):_0x524d2f=global[_0x28f694(0x29f)][noslash(_0x155a6f['symbol'])],_0x524d2f<config[_0x28f694(0x1a7)]&&(logHistory(_0x28f694(0x1ac),_0x155a6f[_0x28f694(0x1d5)]+'\x20has\x20a\x2024h\x20drop\x20of\x20'+_0x524d2f+'%'),logHistory(_0x28f694(0x1ac),_0x28f694(0x1e3)),logHistory('error',_0x28f694(0x1fb)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x12a2b6,_0x53cf87){const _0x9214be=_0x24bc82;if(!_0x12a2b6)return!![];const _0xa15957=_0x53cf87[_0x9214be(0x30d)]('.'),_0x24a127=_0x12a2b6[_0x9214be(0x30d)]('.');for(var _0x1fab88=0x0;_0x1fab88<_0x24a127[_0x9214be(0x1c6)];_0x1fab88++){const _0x159f79=~~_0x24a127[_0x1fab88],_0x3468b2=~~_0xa15957[_0x1fab88];if(_0x159f79<_0x3468b2)return!![];if(_0x159f79>_0x3468b2)return![];}return![];}async function oneTimeMigration(){const _0x3108b6=_0x24bc82;let _0x1305d9=dbLogs[_0x3108b6(0x2b1)](_0x3108b6(0x2b8))[_0x3108b6(0x2dc)]();if(isOlderVersion(_0x1305d9,_0x3108b6(0x217))){let _0x53be0a=[];const _0x5a43b1=dbLogs[_0x3108b6(0x2b1)](_0x3108b6(0x1c7))[_0x3108b6(0x2dc)]();_0x5a43b1[_0x3108b6(0x310)](_0x5a4c56=>{const _0x31144a=_0x3108b6;_0x53be0a['push']({'time':_0x5a4c56['time'],'type':_0x5a4c56[_0x31144a(0x1db)],'event':_0x5a4c56[_0x31144a(0x317)]});}),dbLogs[_0x3108b6(0x2b1)](_0x3108b6(0x1c7))[_0x3108b6(0x235)](_0x53be0a)[_0x3108b6(0x21a)]();}let _0x2614e4=dbConfig['get'](_0x3108b6(0x2b8))[_0x3108b6(0x2dc)]();if(isOlderVersion(_0x2614e4,_0x3108b6(0x217))){let _0x4e715b=dbConfig['get'](_0x3108b6(0x210))[_0x3108b6(0x26d)]({'botID':botID})[_0x3108b6(0x2dc)]();if(_0x4e715b){let _0x40fe5d=[];_0x4e715b[_0x3108b6(0x2b0)][_0x3108b6(0x310)](_0x312b41=>{const _0x474f80=_0x3108b6;_0x40fe5d['push']({'coin':_0x312b41[_0x474f80(0x1d5)],'number':_0x312b41[_0x474f80(0x21b)],'price':_0x312b41[_0x474f80(0x220)]}),delete _0x312b41[_0x474f80(0x21b)],delete _0x312b41[_0x474f80(0x220)];});if(_0x40fe5d[_0x3108b6(0x1c6)]!==0x0)fs[_0x3108b6(0x1d3)](configbackuppath+(_0x3108b6(0x21e)+botID+_0x3108b6(0x1cd)),JSON[_0x3108b6(0x30a)](_0x40fe5d,null,0x4),function(_0x40bb6b){if(_0x40bb6b){}});const _0x15ca0c=(_0x26e5cc,_0x19c84f)=>{const _0x434269=_0x3108b6;let _0x33658d=[];_0x19c84f[_0x434269(0x310)](_0x228343=>{const _0x19aecc=_0x434269,_0x391ed3=_0x26e5cc['find'](_0x276ab8=>_0x276ab8[_0x19aecc(0x1d5)]==_0x228343[_0x19aecc(0x1d5)]);if(!_0x391ed3)_0x33658d[_0x19aecc(0x1c1)](_0x228343);});let _0xb6b2dc=[];return _0x26e5cc[_0x434269(0x310)](_0x55c691=>{const _0x38d942=_0x434269,_0x19dfa3=_0x19c84f[_0x38d942(0x26d)](_0x3c7fec=>_0x3c7fec[_0x38d942(0x1d5)]==_0x55c691[_0x38d942(0x1d5)]);if(!_0x19dfa3||_0x19dfa3['number']==0x0&&_0x55c691[_0x38d942(0x20f)]!=0x0)_0xb6b2dc[_0x38d942(0x1c1)](_0x55c691);}),{'missingDay1':_0x33658d,'notInDay2':_0xb6b2dc};},_0x19afb5=dbPerformance[_0x3108b6(0x2b1)](_0x3108b6(0x22c))['cloneDeep']()['value']();if(_0x19afb5[_0x3108b6(0x1c6)]>0x1){const {missingDay1:_0x284dc6,notInDay2:_0xc25137}=_0x15ca0c(_0x40fe5d,_0x19afb5[0x1][_0x3108b6(0x1b3)]);_0x40fe5d=[..._0x40fe5d,..._0x284dc6],_0xc25137[_0x3108b6(0x310)](_0x486976=>{const _0xc36877=_0x3108b6;let _0xed7d71=_0x40fe5d[_0xc36877(0x2de)](_0x1e9067=>_0x1e9067[_0xc36877(0x1d5)]==_0x486976[_0xc36877(0x1d5)]);_0xed7d71!=-0x1&&_0x40fe5d['splice'](_0xed7d71,0x1);});}_0x40fe5d[_0x3108b6(0x1b7)]((_0x551575,_0x27e584)=>_0x551575[_0x3108b6(0x1d5)]>_0x27e584[_0x3108b6(0x1d5)]?0x1:_0x27e584[_0x3108b6(0x1d5)]>_0x551575[_0x3108b6(0x1d5)]?-0x1:0x0);let _0x406760=[{'date':_0x4e715b['startdate'],'changes':_0x40fe5d}];_0x19afb5['length']>0x2&&_0x19afb5[_0x3108b6(0x310)]((_0x25a5df,_0xcbf3cb)=>{const _0x3bbaa0=_0x3108b6;if(_0xcbf3cb>0x0&&_0xcbf3cb<_0x19afb5[_0x3bbaa0(0x1c6)]-0x1){const {missingDay1:_0x3f4b38,notInDay2:_0x1a37a0}=_0x15ca0c(_0x19afb5[_0xcbf3cb][_0x3bbaa0(0x1b3)],_0x19afb5[_0xcbf3cb+0x1]['coins']);_0x40fe5d=[],(_0x3f4b38[_0x3bbaa0(0x1c6)]!=0x0||_0x1a37a0['length']!=0x0)&&(_0x3f4b38[_0x3bbaa0(0x1c6)]!=0x0&&_0x40fe5d[_0x3bbaa0(0x1c1)](..._0x3f4b38),_0x1a37a0[_0x3bbaa0(0x1c6)]!=0x0&&(_0x1a37a0['forEach'](_0x35a82e=>{const _0x4761ac=_0x3bbaa0;_0x35a82e[_0x4761ac(0x20f)]=-_0x35a82e[_0x4761ac(0x20f)];}),_0x40fe5d[_0x3bbaa0(0x1c1)](..._0x1a37a0)),_0x40fe5d[_0x3bbaa0(0x1b7)]((_0x200119,_0x59202b)=>_0x200119[_0x3bbaa0(0x1d5)]>_0x59202b['coin']?0x1:_0x59202b[_0x3bbaa0(0x1d5)]>_0x200119[_0x3bbaa0(0x1d5)]?-0x1:0x0),_0x406760['push']({'date':_0x19afb5[_0xcbf3cb+0x1][_0x3bbaa0(0x249)],'changes':_0x40fe5d}));}}),dbConfig[_0x3108b6(0x2b1)](_0x3108b6(0x210))['find']({'botID':botID})[_0x3108b6(0x235)]({..._0x4e715b,'liquidity':_0x406760})['write']();}}if(isOlderVersion(_0x2614e4,'2.6.0')){let _0xe32f5=dbConfig[_0x3108b6(0x2b1)]('bot')[_0x3108b6(0x26d)]({'botID':botID})[_0x3108b6(0x2dc)]();if(_0xe32f5){const _0x2bdc9a=_0xe32f5['exchange'],_0x5c1bc9=_0x2bdc9a?capitalize(_0x2bdc9a):_0x3108b6(0x1d0);dbConfig[_0x3108b6(0x2b1)](_0x3108b6(0x210))['find']({'botID':botID})[_0x3108b6(0x235)]({'exchange':_0x5c1bc9})[_0x3108b6(0x21a)]();}}let _0x20112f=dbPerformance[_0x3108b6(0x2b1)]('version')[_0x3108b6(0x2dc)]();isOlderVersion(_0x20112f,_0x3108b6(0x217))&&setStartDatePerformance();let _0xd73053=dbCoinResults[_0x3108b6(0x2b1)](_0x3108b6(0x2b8))[_0x3108b6(0x2dc)]();if(isOlderVersion(_0xd73053,_0x3108b6(0x2fe))){let _0x5a969c=dbCoinResults[_0x3108b6(0x2b1)](_0x3108b6(0x1b3))['value']();if(_0x5a969c[_0x3108b6(0x1c6)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1193f1=_0x24bc82;dbConfig[_0x1193f1(0x228)](_0x1193f1(0x2b8),serverversion)[_0x1193f1(0x21a)](),dbPerformance[_0x1193f1(0x228)](_0x1193f1(0x2b8),serverversion)[_0x1193f1(0x21a)](),dbLogs[_0x1193f1(0x228)](_0x1193f1(0x2b8),serverversion)['write'](),dbCoinResults['set'](_0x1193f1(0x2b8),serverversion)['write']();}function getConfiguration(_0xbc1668){const _0x28008a=_0x24bc82;let _0x2c5e70=dbConfig[_0x28008a(0x2b1)](_0x28008a(0x210))[_0x28008a(0x26d)]({'botID':_0xbc1668})[_0x28008a(0x2dc)]();if(_0x2c5e70){let _0x1e29da=![];typeof _0x2c5e70[_0x28008a(0x2ba)]==_0x28008a(0x2e3)&&(_0x2c5e70={..._0x2c5e70,'threshold':Number(_0x2c5e70[_0x28008a(0x2ba)])},_0x1e29da=!![]),_0x2c5e70[_0x28008a(0x1a7)]==undefined&&(_0x2c5e70={..._0x2c5e70,'change24h':-0x14},_0x1e29da=!![]),_0x2c5e70[_0x28008a(0x321)]==undefined&&(_0x2c5e70={..._0x2c5e70,'fiat':_0x28008a(0x1e7)},_0x1e29da=!![]),_0x2c5e70[_0x28008a(0x2db)]==undefined&&(_0x2c5e70={..._0x2c5e70,'onepagemode':settings[_0x28008a(0x2db)]},_0x1e29da=!![]),_0x2c5e70['colorscheme']==undefined&&(_0x2c5e70={..._0x2c5e70,'colorscheme':_0x28008a(0x230)},_0x1e29da=!![]),_0x2c5e70['autoliquidity']==undefined&&(_0x2c5e70={..._0x2c5e70,'autoliquidity':!![]},_0x1e29da=!![]),_0x1e29da&&(_0x2c5e70={'botID':_0x2c5e70[_0x28008a(0x234)],'exchange':_0x2c5e70[_0x28008a(0x297)],'apiKey':_0x2c5e70[_0x28008a(0x1a6)],'apiSecret':_0x2c5e70[_0x28008a(0x2bd)],'apiPassword':_0x2c5e70['apiPassword'],'basecoin':_0x2c5e70['basecoin'],'botname':_0x2c5e70[_0x28008a(0x205)],'showname':_0x2c5e70[_0x28008a(0x304)],'threshold':_0x2c5e70[_0x28008a(0x2ba)],'ordertype':_0x2c5e70[_0x28008a(0x1f1)],'timeout':_0x2c5e70[_0x28008a(0x2a6)],'fiat':_0x2c5e70[_0x28008a(0x321)],'startdate':_0x2c5e70['startdate'],'recreate':_0x2c5e70[_0x28008a(0x2aa)],'timeshift':_0x2c5e70[_0x28008a(0x27f)],'onepagemode':_0x2c5e70['onepagemode'],'headless':_0x2c5e70[_0x28008a(0x290)],'cooldown':_0x2c5e70[_0x28008a(0x2df)],'change24h':_0x2c5e70[_0x28008a(0x1a7)],'emojibuy':_0x2c5e70[_0x28008a(0x192)],'emojisell':_0x2c5e70['emojisell'],'colorscheme':_0x2c5e70[_0x28008a(0x2ad)],'portfolio':_0x2c5e70[_0x28008a(0x2b0)],'autoliquidity':_0x2c5e70[_0x28008a(0x24d)],'liquidity':_0x2c5e70['liquidity'],'openOrders':_0x2c5e70[_0x28008a(0x19d)]},dbConfig[_0x28008a(0x2b1)]('bot')[_0x28008a(0x202)]()[_0x28008a(0x21a)](),dbConfig[_0x28008a(0x2b1)](_0x28008a(0x210))[_0x28008a(0x1c1)](_0x2c5e70)[_0x28008a(0x21a)]());}else _0x2c5e70={'botID':_0xbc1668,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x28008a(0x324)+_0xbc1668,'showname':![],'threshold':0x3,'ordertype':_0x28008a(0x295),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x28008a(0x27f)],'onepagemode':settings[_0x28008a(0x2db)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x28008a(0x230),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2c5e70;}function emittedConfiguration(){const _0x60a83f=_0x24bc82;let _0x154c6a;if(config['apiKey']=='')_0x154c6a={...config,'configstate':'initial'};else config[_0x60a83f(0x1a6)]=='***'?_0x154c6a={...config,'configstate':'recovery'}:(_0x154c6a={...config,'apiKey':'************','apiSecret':_0x60a83f(0x26e)},config[_0x60a83f(0x2bb)]&&(_0x154c6a[_0x60a83f(0x2bb)]=_0x60a83f(0x26e)));return _0x154c6a;}function getSettings(){const _0x50b524=_0x24bc82;return dbSettings[_0x50b524(0x2b1)](_0x50b524(0x28e))[_0x50b524(0x2dc)]();}function getSecure(){const _0x3483c4=_0x24bc82;return dbSecure[_0x3483c4(0x2b1)]('secure')[_0x3483c4(0x2dc)]()||{};}function updateTimeshift(_0x41bfdc){const _0x1fdd0e=_0x24bc82;let _0x6b2d8=dbConfig['get'](_0x1fdd0e(0x210))[_0x1fdd0e(0x26d)]({'botID':botID})[_0x1fdd0e(0x2dc)]();_0x6b2d8&&dbConfig[_0x1fdd0e(0x2b1)](_0x1fdd0e(0x210))[_0x1fdd0e(0x26d)]({'botID':botID})[_0x1fdd0e(0x235)]({'timeshift':_0x41bfdc})[_0x1fdd0e(0x21a)](),config[_0x1fdd0e(0x27f)]=_0x41bfdc,proxyEmit(_0x1fdd0e(0x319),emittedConfiguration());}function updateOnepagemode(_0x11dd25){const _0x48e605=_0x24bc82;let _0x58e668=dbConfig[_0x48e605(0x2b1)](_0x48e605(0x210))[_0x48e605(0x26d)]({'botID':botID})[_0x48e605(0x2dc)]();_0x58e668&&dbConfig[_0x48e605(0x2b1)]('bot')[_0x48e605(0x26d)]({'botID':botID})['assign']({'onepagemode':_0x11dd25})[_0x48e605(0x21a)](),config[_0x48e605(0x2db)]=_0x11dd25,proxyEmit(_0x48e605(0x319),emittedConfiguration());}async function storeConfiguration(_0x1142ca){const _0x4a6e80=_0x24bc82;logger[_0x4a6e80(0x287)](_0x4a6e80(0x27a));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x4a6e80(0x287)]('Transaction\x20detection\x20blocked');let _0x426f38=![],_0x4f51ef=![],_0x38a499=[];_0x1142ca[_0x4a6e80(0x2b0)][_0x4a6e80(0x310)](_0x2cc618=>{const _0x5cc3a0=_0x4a6e80;if(!_0x2cc618[_0x5cc3a0(0x2f1)]&&_0x2cc618[_0x5cc3a0(0x1d5)]!=_0x1142ca[_0x5cc3a0(0x2f2)])_0x38a499['push'](_0x2cc618[_0x5cc3a0(0x2af)]);}),_0x38a499[_0x4a6e80(0x310)](_0x36775c=>{const _0x2e993c=_0x4a6e80,_0x14c46d=currentCoins[_0x2e993c(0x26d)](_0x2dd0f2=>_0x2dd0f2[_0x2e993c(0x2af)]==_0x36775c);!_0x14c46d&&(_0x426f38=!![]);}),currentCoins['forEach'](_0x351d88=>{const _0x432fe2=_0x4a6e80;if(_0x351d88[_0x432fe2(0x1d5)]!=config[_0x432fe2(0x2f2)]){const _0x49c71d=_0x38a499[_0x432fe2(0x26d)](_0x2cfe2c=>_0x2cfe2c==_0x351d88[_0x432fe2(0x2af)]);!_0x49c71d&&(_0x426f38=!![]);}}),_0x1142ca[_0x4a6e80(0x2b0)][_0x4a6e80(0x310)](_0x57bebf=>{const _0x3f4db4=_0x4a6e80,_0x15c621=config[_0x3f4db4(0x2b0)][_0x3f4db4(0x26d)](_0x4ae0f8=>_0x4ae0f8['coin']==_0x57bebf[_0x3f4db4(0x1d5)]);if(_0x15c621&&_0x57bebf[_0x3f4db4(0x20e)]!=_0x15c621[_0x3f4db4(0x20e)])_0x4f51ef=!![];});let _0x1a762d=dbConfig[_0x4a6e80(0x2b1)](_0x4a6e80(0x210))[_0x4a6e80(0x26d)]({'botID':botID})[_0x4a6e80(0x2dc)]();_0x1142ca={..._0x1142ca,'apiKey':crypt['decrypt'](secure[_0x4a6e80(0x1e5)],_0x1142ca[_0x4a6e80(0x1a6)])[_0x4a6e80(0x30b)],'apiSecret':crypt[_0x4a6e80(0x1bb)](secure[_0x4a6e80(0x1e5)],_0x1142ca[_0x4a6e80(0x2bd)])['message']};_0x1142ca[_0x4a6e80(0x2bb)]&&(_0x1142ca[_0x4a6e80(0x2bb)]=crypt[_0x4a6e80(0x1bb)](secure[_0x4a6e80(0x1e5)],_0x1142ca[_0x4a6e80(0x2bb)])['message']);let _0x5b402b=![];if(_0x1a762d){_0x1142ca[_0x4a6e80(0x1a6)]==_0x4a6e80(0x26e)?_0x1142ca[_0x4a6e80(0x1a6)]=config['apiKey']:_0x5b402b=!![];_0x1142ca[_0x4a6e80(0x2bd)]==_0x4a6e80(0x26e)?_0x1142ca[_0x4a6e80(0x2bd)]=config[_0x4a6e80(0x2bd)]:_0x5b402b=!![];if(_0x1142ca['apiPassword']==_0x4a6e80(0x26e))_0x1142ca[_0x4a6e80(0x2bb)]=config[_0x4a6e80(0x2bb)];else{if(_0x1142ca[_0x4a6e80(0x2bb)])_0x5b402b=!![];}dbConfig[_0x4a6e80(0x2b1)](_0x4a6e80(0x210))[_0x4a6e80(0x26d)]({'botID':botID})[_0x4a6e80(0x235)](_0x1142ca)[_0x4a6e80(0x21a)]();}else dbConfig[_0x4a6e80(0x2b1)](_0x4a6e80(0x210))[_0x4a6e80(0x1c1)](_0x1142ca)[_0x4a6e80(0x21a)](),_0x5b402b=!![],process[_0x4a6e80(0x309)]({'status':'enabled','live':_0x4a6e80(0x29d)},_0x5af5d7=>{});process[_0x4a6e80(0x309)]({'botname':_0x1142ca[_0x4a6e80(0x205)]},_0x5608f2=>{}),updateBotManager(),config={..._0x1142ca},proxyEmit(_0x4a6e80(0x1c2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x5b402b)await reset(!![]);else _0x426f38||_0x4f51ef?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x4a6e80(0x287)](_0x4a6e80(0x305));}async function storeHeadless(_0x182c93){const _0x50bc69=_0x24bc82,_0x51a581={...config,'headless':_0x182c93[_0x50bc69(0x290)]};let _0x1802c7=dbConfig[_0x50bc69(0x2b1)](_0x50bc69(0x210))[_0x50bc69(0x26d)]({'botID':botID})[_0x50bc69(0x2dc)]();_0x1802c7&&dbConfig['get'](_0x50bc69(0x210))['find']({'botID':botID})[_0x50bc69(0x235)](_0x51a581)['write'](),config={..._0x51a581},updateBotManager(),proxyEmit(_0x50bc69(0x319),emittedConfiguration());}async function storeFiat(_0x34d086){const _0x265491=_0x24bc82,_0x49256c={...config,'fiat':_0x34d086};let _0x15b356=dbConfig[_0x265491(0x2b1)]('bot')[_0x265491(0x26d)]({'botID':botID})['value']();_0x15b356&&dbConfig['get']('bot')['find']({'botID':botID})['assign'](_0x49256c)[_0x265491(0x21a)](),config={..._0x49256c},proxyEmit(_0x265491(0x319),emittedConfiguration());}function resetHistory(){const _0x2fbdb1=_0x24bc82;logger['full'](_0x2fbdb1(0x19c));try{if(fs[_0x2fbdb1(0x22a)](path['join'](configpath,_0x2fbdb1(0x28c)+botID+_0x2fbdb1(0x247))))fs[_0x2fbdb1(0x218)](path[_0x2fbdb1(0x19a)](configpath,_0x2fbdb1(0x28c)+botID+_0x2fbdb1(0x247)));if(fs['existsSync'](path[_0x2fbdb1(0x19a)](configpath,'bot-'+botID+_0x2fbdb1(0x292))))fs[_0x2fbdb1(0x218)](path['join'](configpath,_0x2fbdb1(0x28c)+botID+'-performance.json'));if(fs[_0x2fbdb1(0x22a)](path[_0x2fbdb1(0x19a)](configpath,_0x2fbdb1(0x28c)+botID+_0x2fbdb1(0x223))))fs[_0x2fbdb1(0x218)](path[_0x2fbdb1(0x19a)](configpath,_0x2fbdb1(0x28c)+botID+'-results.json'));}catch(_0x71b17e){if(_0x71b17e)logger['full'](_0x2fbdb1(0x2ed),_0x71b17e);}const _0x45f0bc=getDate();let _0x582564=[];currentCoins[_0x2fbdb1(0x310)](_0x4171ca=>{const _0x183461=_0x2fbdb1;_0x582564[_0x183461(0x1c1)]({'coin':_0x4171ca[_0x183461(0x1d5)],'number':_0x4171ca[_0x183461(0x20f)],'price':_0x4171ca[_0x183461(0x29b)]});});let _0x260f3d=dbConfig[_0x2fbdb1(0x2b1)]('bot')['find']({'botID':botID})[_0x2fbdb1(0x2dc)]();_0x260f3d&&(dbConfig[_0x2fbdb1(0x2b1)](_0x2fbdb1(0x210))['find']({'botID':botID})['assign']({'liquidity':[{'date':_0x45f0bc,'changes':_0x582564}]})[_0x2fbdb1(0x21a)](),config['liquidity']=[]),process[_0x2fbdb1(0x309)]({'stop':_0x2fbdb1(0x325)},_0x3841a5=>{});}function noslash(_0x588851){return _0x588851['replace']('/','');}function updateHighestFee(_0x317874){const _0x30744c=_0x24bc82;if(_0x317874[_0x30744c(0x1bc)]){let _0x52d914={'filled':_0x317874[_0x30744c(0x22f)]*_0x317874[_0x30744c(0x2d2)],'amount':_0x317874[_0x30744c(0x22f)]*_0x317874[_0x30744c(0x2d2)],'side':_0x317874[_0x30744c(0x27e)]=='sell'?_0x30744c(0x299):_0x30744c(0x1c3),'price':0x1/_0x317874[_0x30744c(0x2d2)]};_0x317874={..._0x317874,..._0x52d914};}const _0x4695e9=defaultFee*_0x317874[_0x30744c(0x22f)]*_0x317874[_0x30744c(0x2d2)];lastFees['recent20']['length']===0x14&&lastFees['recent20'][_0x30744c(0x273)](),lastFees['recent20']['push'](_0x4695e9),lastFees[_0x30744c(0x288)]=Math[_0x30744c(0x289)](...lastFees[_0x30744c(0x311)]);}async function updateNumberCoinsCcxt(_0x1c58fe){const _0x418908=_0x24bc82;logger[_0x418908(0x287)](_0x418908(0x308)+_0x1c58fe['symbol']+_0x418908(0x2ff)+_0x1c58fe[_0x418908(0x203)]+'\x20|\x20'+_0x1c58fe[_0x418908(0x22f)]+_0x418908(0x30c)+_0x1c58fe[_0x418908(0x2d1)]+_0x418908(0x2ff)+_0x1c58fe['id']);let _0x1833f6=_0x1c58fe['status'],_0x175064=![];currentCoins[_0x418908(0x310)](_0x17eb8c=>{_0x17eb8c['symbol']==_0x1c58fe['symbol']&&(_0x175064=!![]);});if(!_0x175064)return;const _0x344b2b=currentCoins[_0x418908(0x26d)](_0x3eef9d=>_0x3eef9d[_0x418908(0x2af)]==_0x1c58fe[_0x418908(0x2af)]),_0x38d2b4=_0x49b616=>{const _0x1a9dc6=_0x418908;if(_0x344b2b)_0x344b2b[_0x1a9dc6(0x306)]=_0x49b616;};if(_0x1833f6==_0x418908(0x1ee))_0x38d2b4(_0x418908(0x1ee));else{if(_0x1833f6==_0x418908(0x307)){_0x38d2b4(_0x418908(0x307));const _0x43406d=await getCoins();[currentCoins,currentCoinsAll]=_0x43406d,await getOpenOrders(),handleOpenOrders();}else{if(_0x1833f6==_0x418908(0x23a)){let _0x1befa8=![];if(lastOrders)for(const _0x19cdf8 of lastOrders){const _0x4f873c=0xc8,_0x3b6627=0x1388;let _0xc64b4e=0x0;while(!_0x19cdf8['orderId']&&_0xc64b4e*_0x4f873c<_0x3b6627){_0xc64b4e++,await sleep(_0x4f873c);}if(_0xc64b4e>0x0)logger[_0x418908(0x287)]('Waited\x20'+_0xc64b4e*_0x4f873c/0x3e8+_0x418908(0x293));if(_0x19cdf8[_0x418908(0x253)]==_0x1c58fe['id']){logger[_0x418908(0x287)](_0x418908(0x191)+_0x1c58fe['id']),_0x1befa8=!![];if(_0x19cdf8['filled']==0x0){logger[_0x418908(0x287)](_0x418908(0x2d5)+_0x1c58fe['id']);if(_0x1c58fe[_0x418908(0x300)])_0x19cdf8['price']=_0x1c58fe[_0x418908(0x300)];else{if(_0x1c58fe[_0x418908(0x2d2)])_0x19cdf8[_0x418908(0x2d2)]=_0x1c58fe['price'];else{}}_0x19cdf8['filled']=_0x1c58fe['filled'],updateHighestFee(_0x19cdf8),_0x38d2b4(_0x418908(0x22f)),await validateOrders();if(lockOrders==ORDERS[_0x418908(0x214)]){const _0x3884be=await getCoins();[currentCoins,currentCoinsAll]=_0x3884be;}_0x19cdf8[_0x418908(0x254)]={'currency':_0x1c58fe[_0x418908(0x254)]?_0x1c58fe[_0x418908(0x254)][_0x418908(0x329)]:null,'cost':_0x1c58fe[_0x418908(0x254)]?_0x1c58fe['fee'][_0x418908(0x2fb)]:0x0},await updateCoinResults(_0x19cdf8);}}}if(!_0x1befa8){logger['debug'](_0x418908(0x23b)+_0x1c58fe['id']),_0x38d2b4(_0x418908(0x22f));const _0x285a1a=await getCoins();[currentCoins,currentCoinsAll]=_0x285a1a,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x201f6c=JSON[_0x418908(0x2fa)](lastBalances[_0x418908(0x2b0)]);const _0x208da6=_0x201f6c['find'](_0x47d9a5=>_0x47d9a5[_0x418908(0x2af)]==_0x1c58fe[_0x418908(0x2af)]);if(_0x208da6){if(_0x1833f6==_0x418908(0x1ee))_0x208da6[_0x418908(0x306)]=_0x208da6[_0x418908(0x306)]=='filled'?'filled':_0x418908(0x1ee);else{if(_0x1833f6=='canceled')_0x208da6[_0x418908(0x306)]=_0x208da6['orderstatus']==_0x418908(0x22f)?_0x418908(0x22f):_0x418908(0x307);else _0x1833f6==_0x418908(0x23a)&&(_0x208da6[_0x418908(0x306)]=_0x418908(0x22f));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x201f6c)},proxyEmit(_0x418908(0x195),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3b2a65=_0x24bc82;await getOpenOrders();let _0x177ec5=![];currentCoins[_0x3b2a65(0x310)](_0x2341c2=>{const _0xd1b262=_0x3b2a65;_0x177ec5=allOpenOrders[_0xd1b262(0x26d)](_0x52e917=>_0x52e917[_0xd1b262(0x2af)]==_0x2341c2[_0xd1b262(0x2af)]),_0x2341c2[_0xd1b262(0x306)]=_0x177ec5?_0xd1b262(0x1ee):_0xd1b262(0x2f6);});}async function getCoins(_0x5d6485=!![],_0x21b4ed=config[_0x24bc82(0x2f2)]){const _0x48fd92=_0x24bc82;let _0x434254,_0x31c78d=[],_0x3ae21d=[],_0x4ab816=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x434254=await exchange[_0x48fd92(0x1de)](),mybalances=_0x434254[_0x48fd92(0x21d)];for(const [_0x3f7b69,_0x5cf697]of Object['entries'](mybalances)){_0x4ab816[_0x48fd92(0x1c1)](_0x3f7b69);}config[_0x48fd92(0x2b0)][_0x48fd92(0x310)](_0x47a085=>{const _0x2f765c=_0x48fd92;!_0x4ab816['includes'](_0x47a085[_0x2f765c(0x1d5)])&&(mybalances[_0x47a085[_0x2f765c(0x1d5)]]=0x0);});if(_0x21b4ed=='')for(const [_0x9c85f8,_0x53b639]of Object[_0x48fd92(0x264)](mybalances)){_0x53b639!=0x0&&_0x31c78d[_0x48fd92(0x1c1)]({'coin':_0x9c85f8});}else{let _0x23a264=![];for(const [_0x3a31ca,_0xb59562]of Object[_0x48fd92(0x264)](mybalances)){const _0x3a02e8=config['portfolio'][_0x48fd92(0x26d)](_0x3867ea=>_0x3867ea[_0x48fd92(0x1d5)]==_0x3a31ca),_0x4f18e2=_0x3a31ca+'/'+_0x21b4ed,_0x299c82=_0x21b4ed+'/'+_0x3a31ca,_0x14119f=currentCoins[_0x48fd92(0x26d)](_0x3aa031=>_0x3aa031[_0x48fd92(0x1d5)]==_0x3a31ca);_0x23a264=![];if((_0xb59562!=0x0||_0x3a02e8)&&(allSymbols['includes'](_0x4f18e2)||_0x3a31ca==_0x21b4ed))_0x31c78d['push']({'coin':_0x3a31ca,'symbol':_0x4f18e2,'reverse':![],'number':Math[_0x48fd92(0x289)](_0xb59562+(_0x3a02e8&&_0x3a02e8[_0x48fd92(0x20e)]||0x0),0x0),'orderstatus':_0x14119f?_0x14119f[_0x48fd92(0x306)]:_0x48fd92(0x2f6)});else{if((_0xb59562!=0x0||_0x3a02e8)&&allSymbols[_0x48fd92(0x2d4)](_0x299c82))_0x31c78d[_0x48fd92(0x1c1)]({'coin':_0x3a31ca,'symbol':_0x299c82,'reverse':!![],'number':Math[_0x48fd92(0x289)](_0xb59562+(_0x3a02e8&&_0x3a02e8[_0x48fd92(0x20e)]||0x0),0x0),'orderstatus':_0x14119f?_0x14119f[_0x48fd92(0x306)]:_0x48fd92(0x2f6)});else _0x3a02e8&&_0x31c78d['push']({'coin':_0x3a02e8[_0x48fd92(0x1d5)],'symbol':_0x3a02e8[_0x48fd92(0x2af)],'reverse':_0x3a02e8[_0x48fd92(0x1bc)],'number':0x0,'orderstatus':_0x48fd92(0x2f6)});}}}}catch(_0x491da3){if(!_0x5d6485)handleErrorNoStop(_0x491da3,_0x48fd92(0x2f7));else await handleError(_0x491da3,_0x48fd92(0x2f7));}return _0x3ae21d=cloneDeep(_0x31c78d),_0x31c78d=_0x31c78d[_0x48fd92(0x282)](_0x408b4e=>{const _0x125b30=_0x48fd92,_0xaf067d=config[_0x125b30(0x2b0)][_0x125b30(0x26d)](_0x39368c=>_0x39368c['coin']==_0x408b4e[_0x125b30(0x1d5)]);return _0xaf067d&&!_0xaf067d['excluded'];}),[_0x31c78d,_0x3ae21d];}async function getCoinNumber(_0x283cd1){const _0x4719d0=_0x24bc82;let _0x510e31;try{const _0x14c453=await exchange['fetchBalance']();_0x510e31=_0x14c453[_0x4719d0(0x21d)][_0x283cd1];}catch(_0x4f64f2){await handleError(_0x4f64f2,_0x4719d0(0x286));}return _0x510e31;}async function getOpenOrders(){const _0x47751c=_0x24bc82;let _0x3c5fc5;allOpenOrders=[];try{for(const _0x19b042 of config[_0x47751c(0x2b0)]){!_0x19b042['excluded']&&_0x19b042['coin']!=config[_0x47751c(0x2f2)]&&(_0x3c5fc5=await exchange[_0x47751c(0x207)](_0x19b042[_0x47751c(0x2af)]),_0x3c5fc5[_0x47751c(0x1c6)]>0x0&&allOpenOrders['push'](_0x3c5fc5[0x0]));}}catch(_0x3426d2){await handleError(_0x3426d2,_0x47751c(0x1ab));}}async function handleOpenOrders(_0x10d564=0x0){const _0x146bb1=_0x24bc82;allOpenOrders[_0x146bb1(0x1c6)]==0x0&&lockOrders==ORDERS['LOCKED']&&allOrdersPlaced&&(_0x10d564==0x0?(logger['debug'](_0x146bb1(0x1f7)),_0x10d564++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x146bb1(0x312)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2b916f){const _0xc74109=_0x24bc82,_0x1e85d6=ccxt[_0xc74109(0x294)][_0x2b916f[_0xc74109(0x297)][_0xc74109(0x1a2)]()],_0x162907=new _0x1e85d6({'apiKey':_0x2b916f[_0xc74109(0x1a6)],'secret':_0x2b916f[_0xc74109(0x2bd)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x2b916f['apiPassword'])_0x162907['password']=_0x2b916f[_0xc74109(0x2bb)];try{await _0x162907['loadMarkets']();}catch(_0x444e44){throw _0x444e44;}}function cloneDeep(_0x511c35){const _0x15a792=_0x24bc82;return JSON['parse'](JSON[_0x15a792(0x30a)](_0x511c35));}async function getPortfolio(_0x135a97){const _0x967982=_0x24bc82;let _0x25d263=[],_0x582d06=[],_0x461995=[],_0x4c6dab;if(_0x135a97['apiKey']!==_0x967982(0x26e)||_0x135a97[_0x967982(0x2bd)]!==_0x967982(0x26e)||_0x135a97[_0x967982(0x2bb)]&&_0x135a97[_0x967982(0x2bb)]!==_0x967982(0x26e)){if(config[_0x967982(0x297)]){if(_0x135a97[_0x967982(0x1a6)]=='************')_0x135a97[_0x967982(0x1a6)]=config['apiKey'];if(_0x135a97[_0x967982(0x2bd)]=='************')_0x135a97['apiSecret']=config['apiSecret'];if(_0x135a97[_0x967982(0x2bb)]=='************')_0x135a97['apiPassword']=config[_0x967982(0x2bb)];try{await testAPI(_0x135a97);}catch(_0x5bdcc5){if(_0x5bdcc5[_0x967982(0x240)]()[_0x967982(0x2d4)](_0x967982(0x2be))){logger[_0x967982(0x287)](_0x967982(0x2cc)),proxyEmit('portfolio',![]);return;}else{handleError(_0x5bdcc5,_0x967982(0x263));return;}}}await initExchange(_0x135a97[_0x967982(0x297)],_0x135a97[_0x967982(0x1a6)],_0x135a97[_0x967982(0x2bd)],_0x135a97[_0x967982(0x2bb)]);try{await loadSymbols();}catch(_0x1ab204){if(_0x1ab204[_0x967982(0x240)]()['includes'](_0x967982(0x2be))){proxyEmit(_0x967982(0x2b0),![]);return;}else{handleError(_0x1ab204,_0x967982(0x1aa));return;}}const _0x4445c6=await getCoins(![],_0x135a97[_0x967982(0x2f2)]);_0x461995=cloneDeep(_0x4445c6[0x1]);}else _0x461995=cloneDeep(currentCoinsAll);if(_0x135a97['basecoin']=='')proxyEmit(_0x967982(0x2b0),_0x461995);else{_0x461995[_0x967982(0x310)](_0x13bf6f=>{const _0x21b61d=_0x967982;if(_0x13bf6f[_0x21b61d(0x1d5)]!=_0x135a97[_0x21b61d(0x2f2)]&&allSymbols[_0x21b61d(0x2d4)](_0x13bf6f[_0x21b61d(0x2af)]))_0x25d263[_0x21b61d(0x1c1)](_0x13bf6f[_0x21b61d(0x2af)]);});if(_0x25d263[_0x967982(0x1c6)]==0x0)logHistory(_0x967982(0x1ac),_0x967982(0x198));else{try{_0x582d06=await exchange[_0x967982(0x2e7)](_0x25d263);}catch(_0x25cdd0){if(_0x25cdd0[_0x967982(0x240)]()[_0x967982(0x2d4)](_0x967982(0x2be))){proxyEmit(_0x967982(0x2b0),![]);return;}else handleError(_0x25cdd0,_0x967982(0x268));}_0x461995['forEach'](_0x4837b9=>{const _0x13f92a=_0x967982;_0x4837b9['coin']!=_0x135a97[_0x13f92a(0x2f2)]?_0x582d06[_0x4837b9[_0x13f92a(0x2af)]]?_0x4c6dab=_0x4837b9[_0x13f92a(0x1bc)]?0x1/_0x582d06[_0x4837b9['symbol']][_0x13f92a(0x29b)]:_0x582d06[_0x4837b9[_0x13f92a(0x2af)]]['last']:_0x4c6dab=0x0:_0x4c6dab=0x1,_0x4837b9[_0x13f92a(0x2d2)]=formatResult(_0x4c6dab,0x8);}),proxyEmit(_0x967982(0x2b0),_0x461995);}}}function truncateTradeAmount(_0x190483,_0x716979){const _0x26b4a0=_0x24bc82;let _0x5dafa8=0x0;try{_0x5dafa8=exchange[_0x26b4a0(0x1dc)](_0x190483,_0x716979);}catch(_0x1cf1f9){}return _0x5dafa8;}function checkMinimums(_0x1febf9){const _0x411399=_0x24bc82;let _0x1edebe=!![];const _0x57995d=!_0x1febf9[_0x411399(0x1bc)]?markets[_0x1febf9['symbol']][_0x411399(0x2c6)][_0x411399(0x2d1)][_0x411399(0x229)]:markets[_0x1febf9['symbol']][_0x411399(0x2c6)][_0x411399(0x2fb)]['min'],_0x17e2ec=!_0x1febf9[_0x411399(0x1bc)]?markets[_0x1febf9[_0x411399(0x2af)]][_0x411399(0x2c6)][_0x411399(0x2fb)]['min']:markets[_0x1febf9['symbol']][_0x411399(0x2c6)][_0x411399(0x2d1)][_0x411399(0x229)],_0x395b26=truncateTradeAmount(_0x1febf9[_0x411399(0x2af)],_0x1febf9['trade']);_0x1febf9[_0x411399(0x231)]=_0x395b26;if(Math[_0x411399(0x1e2)](_0x395b26)<_0x57995d)_0x1edebe=![];if(Math[_0x411399(0x1e2)](_0x395b26)*_0x1febf9[_0x411399(0x29b)]<_0x17e2ec)_0x1edebe=![];if(_0x1febf9[_0x411399(0x27e)]=='sell'){let _0x5d2b52=config[_0x411399(0x2b0)][_0x411399(0x26d)](_0x48fc18=>_0x48fc18[_0x411399(0x1d5)]==_0x1febf9[_0x411399(0x1d5)]);if(_0x5d2b52[_0x411399(0x20e)]>0x0){if(Math[_0x411399(0x1e2)](_0x395b26)>_0x1febf9['number']-_0x5d2b52[_0x411399(0x20e)])_0x1edebe=![];}else{if(Math[_0x411399(0x1e2)](_0x395b26)>_0x1febf9[_0x411399(0x20f)])_0x1edebe=![];}}if(_0x1febf9[_0x411399(0x27e)]==_0x411399(0x299)){let _0xbbc7f5=config[_0x411399(0x2b0)]['find'](_0x8ff315=>_0x8ff315['coin']==config[_0x411399(0x2f2)]),_0x35f421=currentCoins[_0x411399(0x26d)](_0x26bc92=>_0x26bc92[_0x411399(0x1d5)]==config[_0x411399(0x2f2)]);if(_0xbbc7f5[_0x411399(0x20e)]>0x0){if(Math['abs'](_0x395b26)*_0x1febf9[_0x411399(0x29b)]>_0x35f421[_0x411399(0x20f)]-_0xbbc7f5[_0x411399(0x20e)])_0x1edebe=![];}else{if(Math[_0x411399(0x1e2)](_0x395b26)*_0x1febf9[_0x411399(0x29b)]>_0x35f421['number'])_0x1edebe=![];}}return _0x1edebe;}async function getBalances(_0x540003=!![]){const _0x353a07=_0x24bc82;let _0x47eca7=0x0,_0x2876c5;const _0x4a43fe=config[_0x353a07(0x2ba)];if(config[_0x353a07(0x290)]&&config[_0x353a07(0x1a7)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x1ae392=>{const _0x161a1a=_0x353a07;if(_0x1ae392[_0x161a1a(0x1d5)]!=config[_0x161a1a(0x2f2)]){let _0x2895f2=global['ticker'][noslash(_0x1ae392[_0x161a1a(0x2af)])];_0x2876c5=_0x1ae392[_0x161a1a(0x1bc)]?0x1/_0x2895f2:_0x2895f2;}else _0x2876c5=0x1;let _0x2a0bb4=_0x1ae392[_0x161a1a(0x20f)]*_0x2876c5;_0x47eca7+=_0x2a0bb4,_0x1ae392['last']=formatResult(Number(_0x2876c5),0x8),_0x1ae392[_0x161a1a(0x2dc)]=_0x2a0bb4;}),currentCoins[_0x353a07(0x310)](_0x31aa36=>{const _0x35a782=_0x353a07;let _0x27c9d6=config[_0x35a782(0x2b0)][_0x35a782(0x26d)](_0x497d32=>_0x497d32[_0x35a782(0x1d5)]==_0x31aa36[_0x35a782(0x1d5)]),_0x192943=Number(_0x27c9d6[_0x35a782(0x2ea)]),_0x577a4a=_0x31aa36[_0x35a782(0x2dc)]/_0x47eca7*0x64,_0x198a05=_0x192943*_0x47eca7/0x64/_0x31aa36[_0x35a782(0x29b)]-_0x31aa36['number'];_0x31aa36[_0x35a782(0x2ea)]=formatResult(_0x577a4a,0x3),_0x31aa36['target']=formatResult(_0x192943,0x3),_0x31aa36[_0x35a782(0x231)]=formatResult(_0x198a05,0x8),_0x31aa36['side']='',_0x31aa36[_0x35a782(0x1b8)]=![];if(_0x31aa36[_0x35a782(0x1d5)]!=config[_0x35a782(0x2f2)]){if(_0x31aa36[_0x35a782(0x2ea)]>_0x192943)_0x31aa36['side']=_0x35a782(0x1c3),_0x31aa36[_0x35a782(0x1b8)]=checkMinimums(_0x31aa36);else _0x31aa36[_0x35a782(0x2ea)]<_0x192943&&(_0x31aa36[_0x35a782(0x27e)]=_0x35a782(0x299),_0x31aa36[_0x35a782(0x1b8)]=checkMinimums(_0x31aa36));}_0x31aa36[_0x35a782(0x1ff)]=_0x31aa36[_0x35a782(0x2ea)]/_0x31aa36['target']-0x1;if(_0x31aa36[_0x35a782(0x306)]==_0x35a782(0x22f)||_0x31aa36[_0x35a782(0x306)]==_0x35a782(0x307))_0x31aa36[_0x35a782(0x306)]=_0x35a782(0x2f6);}),currentCoins[_0x353a07(0x1b7)]((_0x16a2fe,_0x50676f)=>_0x16a2fe['delta']<_0x50676f[_0x353a07(0x1ff)]?0x1:_0x50676f[_0x353a07(0x1ff)]<_0x16a2fe[_0x353a07(0x1ff)]?-0x1:0x0);const _0x34256f=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x34256f[_0x353a07(0x1bf)],'usd':_0x34256f[_0x353a07(0x316)],'portfolio':JSON[_0x353a07(0x30a)](currentCoins),'threshold':_0x4a43fe},proxyEmit(_0x353a07(0x195),{'serverversion':serverversion,'balances':lastBalances});if(_0x540003){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x4a43fe});else{if(lockOrders==ORDERS[_0x353a07(0x2ac)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4a43fe});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4fd9fe=getNormalizedPerformance();getStartingBalances(_0x4fd9fe),emitPerformance(_0x4fd9fe);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x22628b=getNormalizedPerformance();emitPerformance(_0x22628b),getStartingBalances(_0x22628b),logger['debug'](_0x353a07(0x26f));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3aa71f=_0x24bc82;if(!lastBalances)return;let _0x536c1e=[],_0x3b92de,_0x4bbd7a=JSON['parse'](lastBalances[_0x3aa71f(0x2b0)]);_0x4bbd7a[_0x3aa71f(0x1b7)]((_0x3c8cba,_0x166bf4)=>_0x3c8cba[_0x3aa71f(0x1d5)]>_0x166bf4['coin']?0x1:_0x166bf4[_0x3aa71f(0x1d5)]>_0x3c8cba[_0x3aa71f(0x1d5)]?-0x1:0x0),_0x4bbd7a[_0x3aa71f(0x310)](_0x19e312=>{const _0x4fe463=_0x3aa71f;let _0x4b8d6e={'coin':_0x19e312[_0x4fe463(0x1d5)],'number':_0x19e312[_0x4fe463(0x20f)],'price':_0x19e312[_0x4fe463(0x29b)]};_0x536c1e[_0x4fe463(0x1c1)](_0x4b8d6e);});const _0x2ff969=await getFiat();_0x3b92de={'date':lastBalances[_0x3aa71f(0x270)]['split']('\x20')[0x0],'eur':_0x2ff969['eur'],'usd':_0x2ff969[_0x3aa71f(0x316)],'coins':_0x536c1e};let _0x36da84=dbPerformance['get'](_0x3aa71f(0x22c))['find']({'date':_0x3b92de[_0x3aa71f(0x249)]})[_0x3aa71f(0x2dc)]();_0x36da84?_0x3b92de[_0x3aa71f(0x249)]!=config[_0x3aa71f(0x201)]&&dbPerformance['get'](_0x3aa71f(0x22c))['find']({'date':_0x3b92de['date']})['assign'](_0x3b92de)[_0x3aa71f(0x21a)]():dbPerformance[_0x3aa71f(0x2b1)]('data')[_0x3aa71f(0x1c1)](_0x3b92de)[_0x3aa71f(0x21a)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x46d403=_0x24bc82;let _0x486c6e=[];if(dbPerformance[_0x46d403(0x274)](_0x46d403(0x22c))['value']()){let _0x37e413=dbPerformance[_0x46d403(0x2b1)](_0x46d403(0x22c))[_0x46d403(0x2d6)]()[_0x46d403(0x282)](_0x2576ec=>{const _0x473282=_0x46d403;if(_0x2576ec[_0x473282(0x1b3)][_0x473282(0x1c6)]==0x0)return![];else return!![];})[_0x46d403(0x1d8)](_0x46d403(0x249))[_0x46d403(0x2dc)](),_0x4a310d=[...config[_0x46d403(0x2a5)]];_0x4a310d[_0x46d403(0x1b7)]((_0x3a6b2c,_0x2b5efe)=>_0x3a6b2c[_0x46d403(0x249)]>_0x2b5efe['date']?-0x1:_0x2b5efe[_0x46d403(0x249)]>_0x3a6b2c[_0x46d403(0x249)]?0x1:0x0);let _0x2ccbb4=0x1,_0x55f158=[],_0x247dc6=0x0;_0x37e413[_0x46d403(0x1d4)]()[_0x46d403(0x1bc)]()[_0x46d403(0x310)]((_0x1aad6d,_0x44d9ab)=>{const _0x31b19e=_0x46d403;if(_0x4a310d[_0x247dc6]){if(_0x37e413[_0x37e413[_0x31b19e(0x1c6)]-_0x44d9ab]&&_0x4a310d[_0x247dc6][_0x31b19e(0x249)]==_0x37e413[_0x37e413[_0x31b19e(0x1c6)]-_0x44d9ab][_0x31b19e(0x249)]){if(_0x44d9ab<_0x37e413[_0x31b19e(0x1c6)]){let _0x5cfa20=0x0,_0x2ca676=0x0;_0x37e413[_0x37e413[_0x31b19e(0x1c6)]-_0x44d9ab][_0x31b19e(0x1b3)][_0x31b19e(0x310)](_0x365f36=>{const _0x216a4e=_0x31b19e;_0x2ca676+=_0x365f36[_0x216a4e(0x20f)]*_0x365f36['price'];}),_0x4a310d[_0x247dc6]['changes'][_0x31b19e(0x310)](_0x2ac909=>{const _0x272da9=_0x31b19e;_0x5cfa20+=_0x2ac909['number']*_0x2ac909[_0x272da9(0x2d2)];}),_0x2ccbb4*=_0x5cfa20/(_0x2ca676-_0x5cfa20)+0x1;}_0x247dc6++;}}let _0x581c5a=0x0;_0x1aad6d[_0x31b19e(0x1b3)][_0x31b19e(0x310)](_0x2bae47=>{const _0x39284a=_0x31b19e;_0x581c5a+=_0x2bae47[_0x39284a(0x20f)]*_0x2bae47['price'];}),_0x55f158[_0x37e413['length']-_0x44d9ab-0x1]=_0x581c5a*(_0x2ccbb4-0x1);});let _0x3411c1=[];_0x4a310d=[...config[_0x46d403(0x2a5)]]||[];let _0x2f7c38=0x0;_0x247dc6=0x0,_0x37e413[_0x46d403(0x310)]((_0x27a353,_0x15a8e4)=>{const _0x158c89=_0x46d403;if(_0x4a310d[_0x247dc6]){const _0x19bc43=fns[_0x158c89(0x2fa)](_0x4a310d[_0x247dc6]['date'],_0x158c89(0x25b),new Date()),_0x1a9eed=fns[_0x158c89(0x2fa)](_0x27a353[_0x158c89(0x249)],'yyyy/MM/dd',new Date());if(fns[_0x158c89(0x31c)](_0x19bc43,_0x1a9eed)){let _0x34cba1=0x0;_0x4a310d[_0x247dc6][_0x158c89(0x1f9)][_0x158c89(0x310)](_0x3c3e0c=>{const _0x2058ab=_0x158c89;!_0x3411c1[_0x3c3e0c[_0x2058ab(0x1d5)]]?_0x3411c1[_0x3c3e0c[_0x2058ab(0x1d5)]]=_0x3c3e0c[_0x2058ab(0x20f)]:(_0x34cba1=_0x3411c1[_0x3c3e0c[_0x2058ab(0x1d5)]],_0x3411c1[_0x3c3e0c[_0x2058ab(0x1d5)]]+=_0x3c3e0c[_0x2058ab(0x20f)]);const _0x490bc4=_0x27a353[_0x2058ab(0x1b3)]['find'](_0x382c5e=>_0x382c5e[_0x2058ab(0x1d5)]==_0x3c3e0c[_0x2058ab(0x1d5)]);(!_0x490bc4||_0x490bc4[_0x2058ab(0x20f)]==0x0)&&(_0x2f7c38+=(-_0x3c3e0c[_0x2058ab(0x20f)]-_0x34cba1)*_0x3c3e0c[_0x2058ab(0x2d2)]);}),_0x247dc6++;}}_0x27a353['coins'][_0x158c89(0x310)]((_0x3ce693,_0x7a5ed)=>{const _0x5f42f2=_0x158c89;_0x3411c1[_0x3ce693[_0x5f42f2(0x1d5)]]&&(_0x3ce693[_0x5f42f2(0x213)]=_0x3411c1[_0x3ce693[_0x5f42f2(0x1d5)]]);}),_0x486c6e[_0x158c89(0x1c1)]({'date':_0x27a353[_0x158c89(0x249)],'eur':_0x27a353['eur'],'usd':_0x27a353[_0x158c89(0x316)],'offset':_0x55f158[_0x15a8e4],'netoffset':_0x2f7c38,'coins':_0x27a353[_0x158c89(0x1b3)]});});}return _0x486c6e;}function emitPerformance(_0x559d85){const _0xd1f60f=_0x24bc82;_0x559d85[_0xd1f60f(0x1c6)]!==0x0?(proxyEmit(_0xd1f60f(0x1f4),_0x559d85),lastPerformanceEmitted=getDate()):proxyEmit(_0xd1f60f(0x1f4),[]);}function getPerf(_0xe8aff6,_0x8d32b5){const _0x18c65d=_0x24bc82;let _0x20aa26=0x0,_0xd41587=0x0,_0xf104e5=0x0;_0xe8aff6[_0x18c65d(0x1b3)][_0x18c65d(0x310)](_0xea35a6=>{const _0x2342bd=_0x18c65d;_0x20aa26+=_0xea35a6[_0x2342bd(0x20f)]*_0xea35a6['price'];});_0x8d32b5&&(_0x20aa26+=_0xe8aff6['offset']);if(config[_0x18c65d(0x2f2)]===_0x18c65d(0x298)||config[_0x18c65d(0x2f2)]===_0x18c65d(0x1e9))_0xd41587=_0x20aa26*_0xe8aff6[_0x18c65d(0x1bf)],_0xf104e5=_0x20aa26*_0xe8aff6[_0x18c65d(0x316)];else{if(usdBasecoins[_0x18c65d(0x2d4)](config[_0x18c65d(0x2f2)]))_0xd41587=_0x20aa26*_0xe8aff6[_0x18c65d(0x1bf)]/_0xe8aff6[_0x18c65d(0x316)],_0xf104e5=_0x20aa26;else config[_0x18c65d(0x2f2)]==='EUR'&&(_0xd41587=_0x20aa26,_0xf104e5=_0x20aa26*_0xe8aff6[_0x18c65d(0x316)]/_0xe8aff6['eur']);}return[_0x20aa26,_0xd41587,_0xf104e5];}function getKPIs(_0x1657d6,_0x517446='EUR'){const _0x35d4b5=_0x24bc82,_0x38fb9e=config[_0x35d4b5(0x2f2)],_0x582b90=lastBalances,_0x1883d8=currentCoins,_0x1b8b46=getNormalizedPerformance(),_0x4b81ef=_0x1657d6==='basecoin'?_0x38fb9e:_0x1657d6==='fiat'||_0x1657d6===_0x35d4b5(0x2b6)?_0x517446:_0x35d4b5(0x2c3)+_0x38fb9e,_0x32f2f5=_0x1657d6===_0x35d4b5(0x23f)?_0x35d4b5(0x1f3):_0x1657d6==='net-fiat'?_0x35d4b5(0x1f3):_0x4b81ef+_0x35d4b5(0x258),_0x125716=_0x1657d6===_0x35d4b5(0x23f)||_0x1657d6===_0x35d4b5(0x2b6)?'Net\x20effect':_0x4b81ef+_0x35d4b5(0x1f5);let _0x5a07c8=0x0;_0x1883d8[_0x35d4b5(0x310)](_0x539886=>{const _0x4a7b3d=_0x35d4b5;_0x5a07c8+=_0x539886[_0x4a7b3d(0x20f)]*_0x539886[_0x4a7b3d(0x29b)];});if(_0x1657d6===_0x35d4b5(0x321)||_0x1657d6===_0x35d4b5(0x2b6)){if(_0x38fb9e===_0x35d4b5(0x298)||_0x38fb9e===_0x35d4b5(0x1e9))_0x5a07c8=_0x5a07c8*(_0x517446===_0x35d4b5(0x1e0)?_0x582b90[_0x35d4b5(0x1bf)]:_0x582b90[_0x35d4b5(0x316)]);else{if(usdBasecoins['includes'](_0x38fb9e))_0x5a07c8=_0x5a07c8*(_0x517446===_0x35d4b5(0x1e0)?_0x582b90[_0x35d4b5(0x1bf)]/_0x582b90[_0x35d4b5(0x316)]:0x1);else _0x38fb9e===_0x35d4b5(0x1e0)&&(_0x5a07c8=_0x5a07c8*(_0x517446==='EUR'?0x1:_0x582b90['usd']/_0x582b90[_0x35d4b5(0x1bf)]));}}let _0x1089c6;if(_0x5a07c8!==0x0){if(_0x1657d6==='basecoin')_0x1089c6=(_0x5a07c8/startingBalances['basecoin']-0x1)*0x64;else{if(_0x517446===_0x35d4b5(0x1e0))_0x1089c6=(_0x5a07c8/startingBalances[_0x35d4b5(0x1bf)]-0x1)*0x64;else _0x1089c6=(_0x5a07c8/startingBalances[_0x35d4b5(0x316)]-0x1)*0x64;}let _0x22229c=0x0;if(startingBalances[_0x35d4b5(0x1b3)])_0x1883d8[_0x35d4b5(0x310)](_0x4ca9d3=>{const _0x3215d5=_0x35d4b5;let _0x34a49d=startingBalances['coins']['find'](_0x43ec5e=>_0x43ec5e[_0x3215d5(0x1d5)]===_0x4ca9d3[_0x3215d5(0x1d5)]);if(_0x34a49d&&_0x34a49d[_0x3215d5(0x1d5)]&&_0x4ca9d3[_0x3215d5(0x20f)]!==0x0)_0x22229c+=_0x34a49d[_0x3215d5(0x20f)]*_0x4ca9d3[_0x3215d5(0x29b)];});let _0x30ff66=0x0;if(_0x1b8b46[_0x35d4b5(0x1c6)]!==0x0){let _0x21fcc6=_0x1b8b46[_0x1b8b46[_0x35d4b5(0x1c6)]-0x1];_0x30ff66=_0x21fcc6[_0x35d4b5(0x284)];}_0x22229c-=_0x30ff66;_0x1657d6===_0x35d4b5(0x23f)&&(_0x1089c6=(_0x5a07c8-_0x22229c)/startingBalances[_0x35d4b5(0x2f2)]*0x64,_0x5a07c8=_0x5a07c8-_0x22229c);if(_0x1657d6===_0x35d4b5(0x2b6)){let _0x1e6cc8=_0x517446==='EUR'?startingBalances[_0x35d4b5(0x1bf)]:startingBalances[_0x35d4b5(0x316)];if(_0x38fb9e==='BTC'||_0x38fb9e===_0x35d4b5(0x1e9))_0x22229c=_0x517446===_0x35d4b5(0x1e0)?_0x22229c*_0x582b90[_0x35d4b5(0x1bf)]:_0x22229c*_0x582b90['usd'];else{if(usdBasecoins[_0x35d4b5(0x2d4)](_0x38fb9e))_0x22229c=_0x517446===_0x35d4b5(0x1e0)?_0x22229c*_0x582b90[_0x35d4b5(0x1bf)]/_0x582b90[_0x35d4b5(0x316)]:_0x22229c;else _0x38fb9e===_0x35d4b5(0x1e0)&&(_0x22229c=_0x517446===_0x35d4b5(0x1e0)?_0x22229c:_0x22229c*_0x582b90[_0x35d4b5(0x316)]/_0x582b90[_0x35d4b5(0x1bf)]);}_0x1089c6=(_0x5a07c8-_0x22229c)/_0x1e6cc8*0x64,_0x5a07c8=_0x5a07c8-_0x22229c;}if(_0x1089c6){if(_0x1089c6<0x64)_0x1089c6=_0x1089c6[_0x35d4b5(0x225)](0x2);else{if(_0x1089c6<0x3e8)_0x1089c6=_0x1089c6[_0x35d4b5(0x225)](0x1);else _0x1089c6=_0x1089c6[_0x35d4b5(0x225)](0x0);}}else _0x1089c6=Number('0')['toFixed'](0x2);if(_0x5a07c8){if(Math[_0x35d4b5(0x1e2)](_0x5a07c8)<0.000001)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x2);else{if(Math[_0x35d4b5(0x1e2)](_0x5a07c8)<0.1)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x6);else{if(Math['abs'](_0x5a07c8)<0x1)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x5);else{if(Math[_0x35d4b5(0x1e2)](_0x5a07c8)<0xa)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x4);else{if(Math[_0x35d4b5(0x1e2)](_0x5a07c8)<0x64)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x3);else{if(Math['abs'](_0x5a07c8)<0x3e8)_0x5a07c8=_0x5a07c8[_0x35d4b5(0x225)](0x2);else _0x5a07c8=_0x5a07c8['toFixed'](0x2);}}}}}}else _0x5a07c8=Number('0')[_0x35d4b5(0x225)](0x2);}else _0x1089c6=Number('0')[_0x35d4b5(0x225)](0x2);return{'value':_0x5a07c8,'change':_0x1089c6,'leftTxt':_0x32f2f5,'rightTxt':_0x125716};}async function getStartingBalances(_0x48bb33,_0xe2d8ca=!![]){const _0x5ed163=_0x24bc82;if(_0x48bb33[_0x5ed163(0x1c6)]!==0x0){const [_0x3b25e2,_0x15fc19,_0x1776f6]=getPerf(_0x48bb33[0x0],!![]);let _0x4a6259=[];config[_0x5ed163(0x2b0)]['forEach'](_0x178b46=>{const _0x47dbf4=_0x5ed163;let _0x1555b6=0x0,_0x5a1248;config[_0x47dbf4(0x2a5)][_0x47dbf4(0x310)](_0x129921=>{const _0x225b8c=_0x47dbf4;let _0x33decc=_0x129921[_0x225b8c(0x1f9)][_0x225b8c(0x26d)](_0x222256=>_0x222256['coin']==_0x178b46[_0x225b8c(0x1d5)]);if(_0x33decc){_0x1555b6+=_0x33decc[_0x225b8c(0x20f)];if(!_0x5a1248)_0x5a1248=_0x33decc['price'];}}),_0x4a6259['push']({'coin':_0x178b46[_0x47dbf4(0x1d5)],'number':_0x1555b6,'initialprice':_0x5a1248});});const _0x34da45={'basecoin':_0x3b25e2,'eur':_0x15fc19,'usd':_0x1776f6,'coins':_0x4a6259};if(_0xe2d8ca)proxyEmit(_0x5ed163(0x2ec),_0x34da45);startingBalances=_0x34da45;}}function headlessMode(_0x319ae1){const _0x453aaa=_0x24bc82;let _0x552f66=_0x319ae1[_0x453aaa(0x2b0)],_0x31f26a=_0x319ae1['threshold'],_0x4125aa=[];for(let _0x4b6e8a of _0x552f66){if(_0x4b6e8a['coin']!=config[_0x453aaa(0x2f2)]){if(_0x4b6e8a[_0x453aaa(0x1ff)]>=_0x31f26a/0x64){if(_0x4b6e8a[_0x453aaa(0x1b8)])_0x4125aa[_0x453aaa(0x1c1)](_0x4b6e8a);}else{if(_0x4b6e8a[_0x453aaa(0x1ff)]<=-_0x31f26a/0x64){if(_0x4b6e8a[_0x453aaa(0x1b8)])_0x4125aa[_0x453aaa(0x1c1)](_0x4b6e8a);}}}}_0x4125aa[_0x453aaa(0x1c6)]>0x0&&(_0x4125aa[_0x453aaa(0x310)](_0x2782c3=>{const _0x18a52c=_0x453aaa;logger['debug'](_0x18a52c(0x261)+_0x2782c3[_0x18a52c(0x1d5)]+'\x20'+_0x2782c3['number']+'\x20'+_0x2782c3[_0x18a52c(0x29b)]+'\x20'+_0x2782c3[_0x18a52c(0x2ea)]+'%\x20'+_0x2782c3[_0x18a52c(0x219)]+'%\x20'+(0x64*_0x2782c3[_0x18a52c(0x1ff)])[_0x18a52c(0x225)](0x2)+_0x18a52c(0x1cf)+_0x31f26a['toFixed'](0x2)+'%)');}),placeOrder(_0x4125aa));}function notifyBalance(_0xa2c5b9){const _0x27b21d=_0x24bc82;let _0x43ecc3=_0xa2c5b9[_0x27b21d(0x2b0)],_0x5394dd=_0xa2c5b9[_0x27b21d(0x2ba)],_0x16f6ce=[];for(let _0x31067e of _0x43ecc3){if(_0x31067e[_0x27b21d(0x1d5)]!=config[_0x27b21d(0x2f2)]){if(_0x31067e[_0x27b21d(0x1ff)]>=_0x5394dd/0x64){if(_0x31067e[_0x27b21d(0x1b8)])_0x16f6ce[_0x27b21d(0x1c1)](_0x31067e);}else{if(_0x31067e[_0x27b21d(0x1ff)]<=-_0x5394dd/0x64){if(_0x31067e[_0x27b21d(0x1b8)])_0x16f6ce[_0x27b21d(0x1c1)](_0x31067e);}}}}if(_0x16f6ce[_0x27b21d(0x1c6)]>0x0){let _0x963749=_0x16f6ce[_0x27b21d(0x2e8)](_0x393bb1=>_0x393bb1['coin']);_0x963749[_0x27b21d(0x1b7)]();let _0x323570=_0x963749['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x27b21d(0x27d),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x323570;}}function symbolToCoin(_0xf8e9ed){const _0x420c11=_0x24bc82;let _0x4a1d26;if(_0xf8e9ed[_0x420c11(0x2d4)]('/'+config[_0x420c11(0x2f2)]))_0x4a1d26=_0xf8e9ed[_0x420c11(0x209)]('/'+config[_0x420c11(0x2f2)],'');if(_0xf8e9ed[_0x420c11(0x2d4)](config[_0x420c11(0x2f2)]+'/'))_0x4a1d26=_0xf8e9ed['replace'](config['basecoin']+'/','');return _0x4a1d26;}async function unlockOrders(){const _0x2e72c6=_0x24bc82;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2e72c6(0x214)]){logger[_0x2e72c6(0x287)](_0x2e72c6(0x22b)),lockOrders=ORDERS[_0x2e72c6(0x1a3)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x4fb488=await getCoins();[currentCoins,currentCoinsAll]=_0x4fb488,validateOrdersState=_0x2e72c6(0x213),persistOpenOrders([]),lockOrders=ORDERS[_0x2e72c6(0x2ac)],logger[_0x2e72c6(0x287)](_0x2e72c6(0x23e));}}async function validateOrders(_0x2b65f1){const _0x5c7b51=_0x24bc82;if(_0x2b65f1)validateOrdersState=_0x2b65f1;logger[_0x5c7b51(0x287)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x5c7b51(0x271):lockOrders==0x2?_0x5c7b51(0x24c):_0x5c7b51(0x2c8)));let _0x518411=[],_0x4b9ac6=config[_0x5c7b51(0x1f1)]==_0x5c7b51(0x295)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x5c7b51(0x2a6)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x5c7b51(0x214)])return;logger[_0x5c7b51(0x287)](_0x5c7b51(0x1d2)+validateOrdersState),lastOrders[_0x5c7b51(0x310)](_0x1d504a=>{const _0x23b052=_0x5c7b51;let _0x5618b9=![];_0x1d504a[_0x23b052(0x22f)]>0x0&&(_0x5618b9=!![]),_0x518411[_0x23b052(0x1c1)](_0x5618b9),_0x5618b9&&config[_0x23b052(0x1f1)]!=_0x23b052(0x295)&&logHistory(_0x23b052(0x2d8),_0x23b052(0x25e)+_0x1d504a['symbol']+'\x20'+_0x1d504a[_0x23b052(0x27e)]+'\x20#'+formatResult(_0x1d504a['filled'],0x8)+'\x20@'+formatResult(_0x1d504a['price'],0x8));}),_0x518411['forEach']((_0xa7c794,_0x1577e3)=>{if(_0xa7c794)lastOrders['splice'](_0x1577e3,0x1);}),persistOpenOrders(lastOrders);const _0x4218c5=coolingDown?_0x5c7b51(0x2d7):_0x5c7b51(0x1ed);if(validateOrdersState=='initial'){validateOrdersState=_0x5c7b51(0x1d1);if(_0x518411[_0x5c7b51(0x2d4)](![])){if(config[_0x5c7b51(0x1f1)]==_0x5c7b51(0x295)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x518411[_0x5c7b51(0x2d4)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x5c7b51(0x295)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x518411[_0x5c7b51(0x2d4)](![])&&(config[_0x5c7b51(0x1f1)]==_0x5c7b51(0x295)?logHistory(_0x5c7b51(0x1ad),_0x5c7b51(0x215)+Math['round'](_0x4b9ac6*validateOrderInterval/0xea60)+_0x5c7b51(0x29e)+_0x4218c5):(await cancelOrders(),logHistory(_0x5c7b51(0x1ad),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x4b9ac6*validateOrderInterval/0xea60)+_0x5c7b51(0x29e)+_0x4218c5))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x5c7b51(0x1f1)]!=_0x5c7b51(0x295))logHistory('success',_0x5c7b51(0x1ae)+_0x4218c5);await unlockOrders();}}}}}async function cancelOrders(){const _0x4d302f=_0x24bc82;lastOrders[_0x4d302f(0x310)](async _0x1209fe=>{const _0x26d8ac=_0x4d302f;try{const _0x49e9b8=await exchange[_0x26d8ac(0x31a)](_0x1209fe[_0x26d8ac(0x253)],_0x1209fe[_0x26d8ac(0x2af)]);}catch(_0x593a37){if(_0x593a37['toString']()['includes'](_0x26d8ac(0x193))){}else await handleError(_0x593a37,'cancelOrders()');}});}async function initCoinResults(_0x51ce84){const _0x1dbf9d=_0x24bc82;_0x51ce84?logger[_0x1dbf9d(0x287)](_0x1dbf9d(0x2b5)+_0x51ce84):logger['debug'](_0x1dbf9d(0x314)),config['portfolio'][_0x1dbf9d(0x310)](_0x5f0ade=>{const _0x53cb58=_0x1dbf9d;if(!_0x5f0ade[_0x53cb58(0x2f1)]&&_0x5f0ade[_0x53cb58(0x1d5)]!=config[_0x53cb58(0x2f2)]){const _0x16bd78=currentCoins[_0x53cb58(0x26d)](_0x564d6c=>_0x564d6c[_0x53cb58(0x1d5)]==_0x5f0ade[_0x53cb58(0x1d5)]),_0x1e7684=global[_0x53cb58(0x28b)][noslash(_0x5f0ade[_0x53cb58(0x2af)])];let _0x240989=_0x16bd78?_0x16bd78[_0x53cb58(0x20f)]:null,_0x2afa40=_0x5f0ade[_0x53cb58(0x1bc)]?0x1/_0x1e7684:_0x1e7684,_0x1d5562;config[_0x53cb58(0x2a5)]['forEach'](_0x3b9b4d=>{const _0x38f781=_0x53cb58;!_0x1d5562&&(_0x1d5562=_0x3b9b4d[_0x38f781(0x1f9)][_0x38f781(0x26d)](_0x97c551=>_0x97c551[_0x38f781(0x1d5)]==_0x5f0ade[_0x38f781(0x1d5)]),_0x1d5562&&(_0x240989=_0x1d5562['number'],_0x2afa40=_0x1d5562[_0x38f781(0x2d2)]));});let _0x960231=dbCoinResults[_0x53cb58(0x2b1)]('coins')[_0x53cb58(0x26d)]({'coin':_0x5f0ade['coin']})[_0x53cb58(0x2dc)]();if(!_0x960231){const _0x2bc6fe={'coin':_0x5f0ade[_0x53cb58(0x1d5)],'number':_0x240989,'breakeven':_0x2afa40,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x53cb58(0x1b3))['push'](_0x2bc6fe)[_0x53cb58(0x21a)]();}else{if(_0x51ce84&&_0x5f0ade[_0x53cb58(0x1d5)]==_0x51ce84){const _0x543983={'coin':_0x5f0ade[_0x53cb58(0x1d5)],'number':_0x240989,'breakeven':_0x2afa40,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x53cb58(0x2b1)](_0x53cb58(0x1b3))[_0x53cb58(0x26d)]({'coin':_0x5f0ade['coin']})['assign'](_0x543983)[_0x53cb58(0x21a)]();}}}});}async function updateCoinResults(_0x4d3ac0,_0x4467da=![]){const _0x4a1d41=_0x24bc82;let _0x2da1ca,_0x3c32c7,_0x2af9e8,_0x1dc315,_0x445b40,_0x582074,_0x52077b=dbCoinResults[_0x4a1d41(0x2b1)]('coins')[_0x4a1d41(0x26d)]({'coin':_0x4d3ac0[_0x4a1d41(0x1d5)]})[_0x4a1d41(0x2dc)](),_0x3322b7=![];_0x52077b&&Object['entries'](_0x52077b)[_0x4a1d41(0x310)](([_0x1c0f00,_0x41168e])=>{if(_0x41168e==null)_0x3322b7=!![];});(!_0x52077b||_0x3322b7)&&(await initCoinResults(_0x4d3ac0[_0x4a1d41(0x1d5)]),_0x52077b=dbCoinResults[_0x4a1d41(0x2b1)]('coins')['find']({'coin':_0x4d3ac0[_0x4a1d41(0x1d5)]})['value']());_0x4d3ac0[_0x4a1d41(0x1bc)]&&(_0x582074={'filled':_0x4d3ac0['filled']*_0x4d3ac0[_0x4a1d41(0x2d2)],'amount':_0x4d3ac0['filled']*_0x4d3ac0[_0x4a1d41(0x2d2)],'side':_0x4d3ac0[_0x4a1d41(0x27e)]==_0x4a1d41(0x1c3)?_0x4a1d41(0x299):'sell','price':0x1/_0x4d3ac0[_0x4a1d41(0x2d2)]},_0x4d3ac0={..._0x4d3ac0,..._0x582074});_0x4467da?_0x3c32c7=_0x4d3ac0[_0x4a1d41(0x27e)]==_0x4a1d41(0x299)?_0x52077b[_0x4a1d41(0x20f)]+_0x4d3ac0['filled']:_0x52077b[_0x4a1d41(0x20f)]-_0x4d3ac0[_0x4a1d41(0x22f)]:_0x3c32c7=await getCoinNumber(_0x4d3ac0[_0x4a1d41(0x1d5)]);if(_0x4d3ac0[_0x4a1d41(0x254)]&&_0x4d3ac0[_0x4a1d41(0x254)][_0x4a1d41(0x329)]==config[_0x4a1d41(0x2f2)])_0x2da1ca=_0x4d3ac0[_0x4a1d41(0x254)][_0x4a1d41(0x2fb)];else{if(_0x4d3ac0[_0x4a1d41(0x254)]&&_0x4d3ac0[_0x4a1d41(0x254)][_0x4a1d41(0x329)]==_0x4a1d41(0x211)&&!_0x4467da)_0x2da1ca=_0x4d3ac0['fee']['cost']*global[_0x4a1d41(0x28b)][_0x4a1d41(0x211)+config[_0x4a1d41(0x2f2)]];else _0x2da1ca=defaultFee*_0x4d3ac0[_0x4a1d41(0x22f)]*_0x4d3ac0[_0x4a1d41(0x2d2)];}_0x4d3ac0[_0x4a1d41(0x27e)]=='buy'?(_0x2af9e8=_0x3c32c7!=0x0?(_0x52077b[_0x4a1d41(0x2e5)]*_0x52077b['number']+_0x4d3ac0[_0x4a1d41(0x2d2)]*(_0x3c32c7-_0x52077b[_0x4a1d41(0x20f)])+_0x2da1ca)/_0x3c32c7:0x0,_0x1dc315=_0x52077b[_0x4a1d41(0x1fd)]):(_0x2af9e8=_0x3c32c7!=0x0?(_0x52077b[_0x4a1d41(0x2e5)]*_0x52077b[_0x4a1d41(0x20f)]-_0x4d3ac0['price']*(_0x52077b[_0x4a1d41(0x20f)]-_0x3c32c7)+_0x2da1ca)/_0x3c32c7:0x0,_0x1dc315=_0x52077b[_0x4a1d41(0x1fd)]+(_0x4d3ac0[_0x4a1d41(0x2d2)]-_0x52077b[_0x4a1d41(0x2e5)])*_0x4d3ac0[_0x4a1d41(0x22f)]);_0x445b40=(_0x4d3ac0[_0x4a1d41(0x2d2)]-_0x2af9e8-_0x2da1ca/_0x4d3ac0[_0x4a1d41(0x22f)])*_0x3c32c7;let _0x530f84={'coin':_0x4d3ac0[_0x4a1d41(0x1d5)],'number':_0x3c32c7,'breakeven':formatResult(_0x2af9e8,0x8),'realized':formatResult(_0x1dc315,0x8),'unrealized':formatResult(_0x445b40,0x8),'fees':formatResult(_0x52077b[_0x4a1d41(0x23d)]+_0x2da1ca,0x8),'sells':_0x4d3ac0[_0x4a1d41(0x27e)]==_0x4a1d41(0x1c3)?_0x52077b[_0x4a1d41(0x1be)]+0x1:_0x52077b[_0x4a1d41(0x1be)],'buys':_0x4d3ac0[_0x4a1d41(0x27e)]==_0x4a1d41(0x299)?_0x52077b['buys']+0x1:_0x52077b['buys']};dbCoinResults['get'](_0x4a1d41(0x1b3))[_0x4a1d41(0x26d)]({'coin':_0x4d3ac0[_0x4a1d41(0x1d5)]})[_0x4a1d41(0x235)](_0x530f84)['write']();if(!_0x4467da){if(_0x4d3ac0[_0x4a1d41(0x254)]&&_0x4d3ac0[_0x4a1d41(0x254)][_0x4a1d41(0x329)]=='BNB'){const _0x21c2d0=currentCoins['find'](_0x3baf7a=>_0x3baf7a['coin']==_0x4a1d41(0x211));if(_0x21c2d0){let _0x1451ee=dbCoinResults[_0x4a1d41(0x2b1)]('coins')[_0x4a1d41(0x26d)]({'coin':'BNB'})[_0x4a1d41(0x2dc)]();_0x530f84={..._0x1451ee,'number':_0x21c2d0[_0x4a1d41(0x20f)]},dbCoinResults['get']('coins')['find']({'coin':_0x4a1d41(0x211)})[_0x4a1d41(0x235)](_0x530f84)[_0x4a1d41(0x21a)]();}}}}async function placeOrder(_0x5c9527){const _0x26739b=_0x24bc82,_0x32367f=config['ordertype']==_0x26739b(0x295)?_0x26739b(0x295):_0x26739b(0x1b9);if(lockOrders==ORDERS[_0x26739b(0x2ac)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState='initial';let _0x13b433=![];lastOrders=[];for(const _0x581406 of _0x5c9527){let _0x596eb6,_0x43de0f,_0x5d433e,_0x3c9887,_0x6344a7,_0x2fa465=_0x581406['symbol'];try{const _0x35c125=await exchange[_0x26739b(0x315)](_0x2fa465);_0x596eb6=_0x581406['reverse']?0x1/_0x581406[_0x26739b(0x29b)]:_0x581406[_0x26739b(0x29b)],_0x43de0f=_0x35c125[_0x26739b(0x22d)],_0x5d433e=_0x35c125[_0x26739b(0x265)];_0x581406[_0x26739b(0x1bc)]?(_0x3c9887=_0x581406[_0x26739b(0x27e)]==_0x26739b(0x299)?_0x26739b(0x1c3):'buy',_0x6344a7=Math[_0x26739b(0x1e2)](_0x581406[_0x26739b(0x231)])/_0x596eb6):(_0x3c9887=_0x581406[_0x26739b(0x27e)],_0x6344a7=Math[_0x26739b(0x1e2)](_0x581406[_0x26739b(0x231)]));_0x32367f==_0x26739b(0x1b9)&&(config[_0x26739b(0x1f1)]==_0x26739b(0x29c)&&(_0x596eb6=_0x3c9887=='buy'?_0x43de0f:_0x5d433e),config['ordertype']==_0x26739b(0x1ef)&&(_0x596eb6=_0x3c9887==_0x26739b(0x299)?_0x5d433e:_0x43de0f));_0x6344a7=formatResult(_0x6344a7,0x8),_0x596eb6=formatResult(_0x596eb6,0x8);const _0x93cb09=_0x3c9887==_0x26739b(0x1c3)?config[_0x26739b(0x275)]?String[_0x26739b(0x1a0)]('0x'+config[_0x26739b(0x275)])+'\x20':'':config[_0x26739b(0x192)]?String[_0x26739b(0x1a0)]('0x'+config[_0x26739b(0x192)])+'\x20':'',_0x17b333=_0x32367f==_0x26739b(0x295)?'Market':config[_0x26739b(0x1f1)]==_0x26739b(0x29c)?'Limit\x20(high-margin)':_0x26739b(0x2c7),_0x8859f=(Math[_0x26739b(0x1c0)](Math[_0x26739b(0x2ab)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x26739b(0x1c1)]({'customId':_0x8859f,'symbol':_0x2fa465,'coin':_0x581406[_0x26739b(0x1d5)],'amount':_0x6344a7,'price':_0x596eb6,'side':_0x3c9887,'reverse':_0x581406[_0x26739b(0x1bc)],'filled':0x0});if(_0x32367f==_0x26739b(0x295))logHistory(_0x26739b(0x2d8),''+_0x93cb09+_0x17b333+'\x20order:\x20'+_0x2fa465+'\x20'+_0x3c9887+'\x20#'+formatResult(_0x6344a7,0x8)+'\x20@'+formatResult(_0x596eb6,0x8));else logHistory(_0x26739b(0x2d8),''+_0x93cb09+_0x17b333+_0x26739b(0x251)+_0x2fa465+'\x20'+_0x3c9887+'\x20#'+formatResult(_0x6344a7,0x8)+'\x20@'+formatResult(_0x596eb6,0x8));let _0x5ed275;_0x32367f==_0x26739b(0x295)?_0x3c9887==_0x26739b(0x299)&&[_0x26739b(0x2ee),_0x26739b(0x31f),_0x26739b(0x2a1),'Huobi','Huobipro'][_0x26739b(0x2d4)](config['exchange'])?_0x5ed275=await exchange[_0x26739b(0x291)](_0x2fa465,_0x32367f,_0x3c9887,_0x6344a7,_0x596eb6):_0x5ed275=await exchange[_0x26739b(0x291)](_0x2fa465,_0x32367f,_0x3c9887,_0x6344a7,undefined):_0x5ed275=await exchange[_0x26739b(0x291)](_0x2fa465,_0x32367f,_0x3c9887,_0x6344a7,_0x596eb6);logger[_0x26739b(0x287)]('ID:\x20'+_0x5ed275['id']+_0x26739b(0x272)+_0x8859f);const _0x7a62fc=lastOrders[_0x26739b(0x1c6)]-0x1;if(_0x7a62fc>=0x0&&lastOrders[_0x7a62fc][_0x26739b(0x2f4)]==_0x8859f){lastOrders[_0x7a62fc][_0x26739b(0x253)]=_0x5ed275['id'];if(_0x5ed275['amount'])lastOrders[_0x7a62fc]['amount']=_0x5ed275[_0x26739b(0x2d1)];if(_0x5ed275[_0x26739b(0x2d2)])lastOrders[_0x7a62fc][_0x26739b(0x2d2)]=_0x5ed275[_0x26739b(0x2d2)];lastOrders[_0x7a62fc][_0x26739b(0x254)]=_0x5ed275[_0x26739b(0x254)];}if(config[_0x26739b(0x2df)]!=0x0){let _0x5d616e=null;if(cooldownTracker['length']==config[_0x26739b(0x2df)]-0x1)_0x5d616e=cooldownTracker['shift']();const _0xe456c4=getTimeStamp();cooldownTracker[_0x26739b(0x1c1)](_0xe456c4);if(_0x5d616e){const _0x1bf6db=fns[_0x26739b(0x1bd)](new Date(_0xe456c4),new Date(_0x5d616e));if(_0x1bf6db<cooldownInterval){logHistory(_0x26739b(0x1ac),_0x26739b(0x1cc)+config[_0x26739b(0x2df)]+_0x26739b(0x2c4)+cooldownInterval/0x3c+_0x26739b(0x1c8)+cooldownPeriod/(0xe10*0x3e8)+_0x26739b(0x279)),coolingDown=!![];break;}}}}catch(_0x3556e4){if(_0x3556e4['toString']()['includes'](_0x26739b(0x2ce)))lastOrders=lastOrders[_0x26739b(0x282)](_0x345809=>_0x345809['symbol']!=_0x2fa465),logHistory(_0x26739b(0x1ac),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2fa465),_0x13b433=!![];else{if(_0x3556e4[_0x26739b(0x240)]()[_0x26739b(0x2d4)](_0x26739b(0x221)))lastOrders=lastOrders[_0x26739b(0x282)](_0x3a46a4=>_0x3a46a4['symbol']!=_0x2fa465),logHistory('error',_0x26739b(0x250)+_0x2fa465),_0x13b433=!![];else{if(_0x3556e4[_0x26739b(0x240)]()['includes']('InvalidOrder'))lastOrders=lastOrders[_0x26739b(0x282)](_0x4ab2b8=>_0x4ab2b8[_0x26739b(0x2af)]!=_0x2fa465),logHistory(_0x26739b(0x1ac),_0x26739b(0x216)+_0x2fa465),logger[_0x26739b(0x287)](_0x3556e4),_0x13b433=!![];else _0x3556e4['toString']()[_0x26739b(0x2d4)](_0x26739b(0x2fc))?(lastOrders=lastOrders['filter'](_0x17b2ad=>_0x17b2ad[_0x26739b(0x2af)]!=_0x2fa465),logHistory(_0x26739b(0x1ac),_0x26739b(0x19e)+_0x2fa465),_0x13b433=!![]):(lastOrders=lastOrders[_0x26739b(0x282)](_0x1bec86=>_0x1bec86[_0x26739b(0x2af)]!=_0x2fa465),await handleError(_0x3556e4,_0x26739b(0x1df),_0x2fa465));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x50bce9=config[_0x26739b(0x1f1)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x26739b(0x2a6)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1ec992=_0x26739b;validateOrders(_0x1ec992(0x23c));},_0x50bce9);}else unlockOrders();_0x13b433&&config[_0x26739b(0x290)]&&(logHistory(_0x26739b(0x1ac),_0x26739b(0x19b)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x26739b(0x1ad),_0x26739b(0x2c1)));}else{if(coolingDown)!config[_0x26739b(0x290)]&&logHistory(_0x26739b(0x1ac),_0x26739b(0x2a3));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x26739b(0x290)]&&(config[_0x26739b(0x1f1)]==_0x26739b(0x295)?logHistory(_0x26739b(0x1ac),_0x26739b(0x196)):logHistory(_0x26739b(0x1ac),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x568a20){const _0x5e1d98=_0x24bc82,_0xc41514={...config,'openOrders':_0x568a20};let _0x51d921=dbConfig[_0x5e1d98(0x2b1)]('bot')[_0x5e1d98(0x26d)]({'botID':botID})['value']();_0x51d921&&dbConfig[_0x5e1d98(0x2b1)]('bot')[_0x5e1d98(0x26d)]({'botID':botID})[_0x5e1d98(0x235)](_0xc41514)[_0x5e1d98(0x21a)]();}function restoreOrders(){const _0x42a6d2=_0x24bc82;let _0x2f0013;config['openOrders']&&allOpenOrders[_0x42a6d2(0x310)](_0x43c41c=>{const _0x11f47d=_0x42a6d2,_0x58a6f6=config['openOrders'][_0x11f47d(0x26d)](_0x4c70bb=>_0x4c70bb['orderId']==_0x43c41c['id']);_0x58a6f6&&(lastOrders['push'](_0x58a6f6),_0x2f0013=_0x43c41c[_0x11f47d(0x259)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x42a6d2(0x214)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x55c649=new Date()['getTime'](),_0x16a852=config[_0x42a6d2(0x1f1)]==_0x42a6d2(0x295)?validateOrderTimeout*0x3c*0x3e8:config[_0x42a6d2(0x2a6)]*0x3c*0x3e8;if(_0x2f0013+_0x16a852>_0x55c649){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xaa88d4=_0x42a6d2;validateOrders(_0xaa88d4(0x23c));},_0x2f0013+_0x16a852-_0x55c649);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x37b5e5=_0x24bc82;if(!coinsLoaded){process['send']({'telegrammsg':_0x37b5e5(0x1dd)},_0x13908d=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3602c1='';if(config[_0x37b5e5(0x304)])_0x3602c1=_0x37b5e5(0x1ea)+config['botname']+_0x37b5e5(0x322);else _0x3602c1=_0x37b5e5(0x26b)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x237fd9=getKPIs(_0x37b5e5(0x2f2)),_0x165c28=getKPIs(_0x37b5e5(0x321),config[_0x37b5e5(0x321)]),_0x35c846=getKPIs(_0x37b5e5(0x23f)),_0x23c52d=getKPIs(_0x37b5e5(0x2b6),config[_0x37b5e5(0x321)]);_0x3602c1+='<pre>',_0x3602c1+=_0x237fd9[_0x37b5e5(0x2da)]+'\x20:\x20'+_0x237fd9['value']+'\x0a',_0x3602c1+=_0x237fd9[_0x37b5e5(0x1cb)]+':\x20'+_0x237fd9[_0x37b5e5(0x29f)]+'%\x0a',_0x3602c1+=_0x165c28[_0x37b5e5(0x2da)]+_0x37b5e5(0x27b)+_0x165c28[_0x37b5e5(0x2dc)]+'\x0a',_0x3602c1+=_0x165c28['rightTxt']+':\x20'+_0x165c28[_0x37b5e5(0x29f)]+'%\x0a',_0x3602c1+=_0x35c846[_0x37b5e5(0x2da)]+':\x20'+_0x35c846[_0x37b5e5(0x2dc)]+'\x20('+config[_0x37b5e5(0x2f2)]+')\x0a',_0x3602c1+=_0x35c846['rightTxt']+':\x20'+_0x35c846[_0x37b5e5(0x29f)]+_0x37b5e5(0x1cf)+config['basecoin']+')\x0a',_0x3602c1+=_0x23c52d['leftTxt']+':\x20'+_0x23c52d['value']+'\x20('+config[_0x37b5e5(0x321)]+')\x0a',_0x3602c1+=_0x23c52d[_0x37b5e5(0x1cb)]+':\x20'+_0x23c52d[_0x37b5e5(0x29f)]+_0x37b5e5(0x1cf)+config[_0x37b5e5(0x321)]+')\x0a',_0x3602c1+=_0x37b5e5(0x1b5),process[_0x37b5e5(0x309)]({'telegrammsg':_0x3602c1},_0x5b2ad0=>{});}async function sendPortfolioTelegram(){const _0x3e5265=_0x24bc82;if(!coinsLoaded){process[_0x3e5265(0x309)]({'telegrammsg':_0x3e5265(0x1dd)},_0x126f9c=>{});return;}let _0x259f05='';if(config[_0x3e5265(0x304)])_0x259f05=_0x3e5265(0x1ea)+config['botname']+_0x3e5265(0x285);else _0x259f05=_0x3e5265(0x26b)+botID+_0x3e5265(0x285);_0x259f05+=_0x3e5265(0x1eb),_0x259f05+='-------------------------------\x0a',_0x259f05+=_0x3e5265(0x224),_0x259f05+='-------------------------------\x0a',currentCoins[_0x3e5265(0x310)](_0x463bb9=>{const _0x810fe6=_0x3e5265;_0x259f05+=_0x463bb9['coin'][_0x810fe6(0x199)](0x7)+'|\x20'+formatPad(_0x463bb9[_0x810fe6(0x2ea)],0x2,0x6)+'|\x20'+formatPad(_0x463bb9[_0x810fe6(0x219)],0x2,0x6)+'|\x20'+formatPad(_0x463bb9[_0x810fe6(0x1ff)]*0x64,0x2,0x6)+'\x0a';}),_0x259f05+=_0x3e5265(0x1b5),process[_0x3e5265(0x309)]({'telegrammsg':_0x259f05},_0x54d42a=>{});}function formatPad(_0x2b22aa,_0x20ce1e,_0x21159c){const _0x26e62a=_0x24bc82,_0x1fcb65=formatResultString(_0x2b22aa,_0x20ce1e);return _0x1fcb65?_0x1fcb65[_0x26e62a(0x2e0)](_0x21159c):''[_0x26e62a(0x2e0)](_0x21159c);}function logHistory(_0x5d2189,_0x18d6e7,_0xb6dac6=''){const _0x27639f=_0x24bc82;logger[_0x27639f(0x31e)](''+_0x18d6e7);let _0x1fbf24={'time':getTimeStamp(),'type':_0x5d2189,'event':_0x18d6e7};dbLogs['get']('logs')[_0x27639f(0x1c1)](_0x1fbf24)[_0x27639f(0x21a)]();if(_0xb6dac6=='')_0xb6dac6=_0x18d6e7;proxyEmit(_0x27639f(0x317),{'log':_0x1fbf24,'summary':_0xb6dac6}),process['send']({'telegram':{..._0x1fbf24,'botname':config[_0x27639f(0x205)],'showname':config[_0x27639f(0x304)]}},_0x1f0368=>{});}function emitHistory(_0x18e3b6={}){const _0x371d43=_0x24bc82;Object[_0x371d43(0x2e2)](_0x18e3b6)['length']==0x0&&(_0x18e3b6={'type':[_0x371d43(0x2d8),_0x371d43(0x317)],'event':'','page':0x1});if(_0x18e3b6['type'][_0x371d43(0x2d4)](_0x371d43(0x317)))_0x18e3b6['type']['splice'](_0x18e3b6[_0x371d43(0x1db)][_0x371d43(0x21c)](_0x371d43(0x317)),0x1,_0x371d43(0x1ac),_0x371d43(0x27d),_0x371d43(0x1ad));if(dbLogs[_0x371d43(0x274)]('logs')[_0x371d43(0x2dc)]()){let _0x3b9cb0=dbLogs['get'](_0x371d43(0x1c7))[_0x371d43(0x282)](_0x40f2cf=>{const _0x154970=_0x371d43;if(_0x18e3b6['type']['length']==0x0)return![];else return _0x18e3b6[_0x154970(0x1db)][_0x154970(0x2d4)](_0x40f2cf['type']);})[_0x371d43(0x282)](_0x3d2c03=>{const _0xa183b2=_0x371d43;if(_0x18e3b6[_0xa183b2(0x317)]=='')return!![];else return _0x3d2c03[_0xa183b2(0x317)][_0xa183b2(0x1a2)]()[_0xa183b2(0x2d4)](_0x18e3b6[_0xa183b2(0x317)][_0xa183b2(0x1a2)]());})[_0x371d43(0x1d8)](_0x371d43(0x270)),_0x5cc817=_0x3b9cb0[_0x371d43(0x2dc)]()[_0x371d43(0x1c6)];_0x3b9cb0=_0x3b9cb0[_0x371d43(0x1bc)]()[_0x371d43(0x1d4)]((_0x18e3b6[_0x371d43(0x323)]-0x1)*logPageSize,_0x18e3b6[_0x371d43(0x323)]*logPageSize-0x1)[_0x371d43(0x1bc)]()[_0x371d43(0x2dc)](),proxyEmit(_0x371d43(0x24e),{'logs':_0x3b9cb0,'total':_0x5cc817});}else proxyEmit(_0x371d43(0x24e),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x40c633){const _0x2fe7a4=_0x24bc82;if(dbLogs['has'](_0x2fe7a4(0x1c7))[_0x2fe7a4(0x2dc)]()){const _0xe55d5a=dbLogs[_0x2fe7a4(0x2b1)]('logs')[_0x2fe7a4(0x1d8)](_0x2fe7a4(0x270))[_0x2fe7a4(0x282)](_0xc227c0=>{const _0x161726=_0x2fe7a4;return _0xc227c0[_0x161726(0x1db)]==_0x161726(0x2d8);})[_0x2fe7a4(0x2dc)]();dbLogs['get'](_0x2fe7a4(0x1c7))[_0x2fe7a4(0x202)]()[_0x2fe7a4(0x21a)](),dbLogs['get'](_0x2fe7a4(0x1c7))[_0x2fe7a4(0x235)](_0xe55d5a)[_0x2fe7a4(0x21a)](),emitHistory(_0x40c633);}}async function pauseBot(){const _0x549fe5=_0x24bc82,_0x12d79c=new Date()[_0x549fe5(0x248)]();if(!lastErrorShown||_0x12d79c-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x12d79c;!lastBotPause?(lastBotPause=_0x12d79c,consecutivePauses=0x1):(_0x12d79c-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x549fe5(0x309)]({'stop':_0x549fe5(0x325)},_0x3ab5bf=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x549fe5(0x248)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(pauseBotInterval),botPaused=![],reset(!![]);}}}async function killBot(){const _0x1953a7=_0x24bc82;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x1953a7(0x28f)},_0x5533be=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x47e0a8,_0xacd719){const _0x42509a=_0x24bc82;if(botPaused)return;const _0x153a8b=config[_0x42509a(0x297)]||_0x42509a(0x2f8);if(_0xacd719)logger[_0x42509a(0x287)](_0x42509a(0x243)+_0xacd719);if(_0x47e0a8['toString']()[_0x42509a(0x2d4)](_0x42509a(0x2cb)))logHistory('error',_0x153a8b+_0x42509a(0x226));else{if(_0x47e0a8[_0x42509a(0x240)]()[_0x42509a(0x2d4)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x42509a(0x1ac),_0x153a8b+_0x42509a(0x2b7));else _0x47e0a8['toString']()[_0x42509a(0x2d4)](_0x42509a(0x2be))?(logHistory(_0x42509a(0x1ac),_0x153a8b+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x42509a(0x1ac),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange')):await handleError(_0x47e0a8,null);}}async function handleError(_0x4db476,_0x27330a,_0x550244=''){const _0x27e21a=_0x24bc82;if(botPaused)return;const _0x42afc4=config[_0x27e21a(0x297)]||'Exchange';if(_0x27330a)logger[_0x27e21a(0x287)](_0x27e21a(0x243)+_0x27330a);if(_0x4db476[_0x27e21a(0x240)]()[_0x27e21a(0x2d4)]('DDoSProtection')||_0x4db476[_0x27e21a(0x240)]()[_0x27e21a(0x2d4)](_0x27e21a(0x283)))logHistory(_0x27e21a(0x1ac),_0x42afc4+_0x27e21a(0x227)+pauseBotMsg),await pauseBot();else{if(_0x4db476['toString']()[_0x27e21a(0x2d4)](_0x27e21a(0x246))||_0x4db476['toString']()['includes'](_0x27e21a(0x2b3)))logHistory(_0x27e21a(0x1ac),_0x42afc4+_0x27e21a(0x241)+pauseBotMsg),await pauseBot();else{if(_0x4db476[_0x27e21a(0x240)]()['includes'](_0x27e21a(0x2b4)))logHistory('error',_0x42afc4+'\x20not\x20responding'+pauseBotMsg),await pauseBot();else{if(_0x4db476['toString']()['includes'](_0x27e21a(0x2c0)))logHistory('error',_0x42afc4+_0x27e21a(0x257)+pauseBotMsg),await pauseBot();else{if(_0x4db476[_0x27e21a(0x240)]()['includes'](_0x27e21a(0x1ba)))logHistory(_0x27e21a(0x1ac),_0x27e21a(0x20d)),logHistory(_0x27e21a(0x1ac),_0x27e21a(0x24a)),await killBot();else{if(_0x4db476['toString']()[_0x27e21a(0x2d4)](_0x27e21a(0x2a2)))logHistory(_0x27e21a(0x1ac),_0x27e21a(0x2d0)),logHistory(_0x27e21a(0x1ac),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4db476 instanceof ccxt[_0x27e21a(0x245)])logHistory(_0x27e21a(0x1ac),_0x42afc4+_0x27e21a(0x260)+pauseBotMsg),logger['debug'](_0x27e21a(0x1e6),_0x4db476),await pauseBot();else{if(_0x4db476[_0x27e21a(0x240)]()['includes'](_0x27e21a(0x2cb)))logHistory('error',_0x42afc4+_0x27e21a(0x20a)),logHistory(_0x27e21a(0x1ac),_0x27e21a(0x24a)),await killBot();else{if(_0x4db476[_0x27e21a(0x240)]()[_0x27e21a(0x2d4)](_0x27e21a(0x1d6)))logHistory(_0x27e21a(0x1ac),_0x42afc4+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x27e21a(0x1ac),_0x27e21a(0x24a)),await killBot();else{if(_0x4db476['toString']()[_0x27e21a(0x2d4)](_0x27e21a(0x2be)))logHistory(_0x27e21a(0x1ac),_0x42afc4+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x27e21a(0x24a)),await killBot();else{if(_0x4db476['toString']()[_0x27e21a(0x2d4)](_0x27e21a(0x1f8)))logHistory(_0x27e21a(0x1ac),'Insufficient\x20funds\x20to\x20execute\x20order:\x20'+_0x550244);else _0x4db476 instanceof ccxt[_0x27e21a(0x1ec)]?(logHistory(_0x27e21a(0x1ac),_0x42afc4+_0x27e21a(0x1a5)),logger[_0x27e21a(0x287)](_0x27e21a(0x1e6),_0x4db476)):(logHistory('error','Unknown\x20error\x20occured'+pauseBotMsg),logger['debug'](_0x27e21a(0x1e6),_0x4db476),await pauseBot());}}}}}}}}}}}function formatResult(_0x4d333a,_0x4db2b7){return parseFloat(_0x4d333a['toFixed'](_0x4db2b7));}function formatResultTruncate(_0x35bfac,_0x35abc8){const _0x462884=_0x24bc82;let _0x162e86=formatResultString(_0x35bfac,0xa),_0x195d4d=_0x162e86['indexOf']('.');return _0x195d4d!=-0x1&&(_0x162e86=_0x162e86[_0x462884(0x1d4)](0x0,_0x195d4d+_0x35abc8+0x1)),Number(_0x162e86);}function formatResultString(_0x3e69c3,_0x209165){const _0x24ba00=_0x24bc82;let _0x316517;if(!(''+_0x3e69c3)[_0x24ba00(0x2d4)]('e'))_0x316517=+(Math['round'](_0x3e69c3+'e+'+_0x209165)+'e-'+_0x209165);else{let _0xe86e7a=(''+_0x3e69c3)[_0x24ba00(0x30d)]('e'),_0x467379='';+_0xe86e7a[0x1]+_0x209165>0x0&&(_0x467379='+'),_0x316517=+(Math[_0x24ba00(0x2f5)](+_0xe86e7a[0x0]+'e'+_0x467379+(+_0xe86e7a[0x1]+_0x209165))+'e-'+_0x209165);}return Number(_0x316517)['toFixed'](_0x209165);}function getServerTime(){const _0x3fbe95=_0x24bc82,_0x137dd3=new Date();return _0x137dd3[_0x3fbe95(0x1d7)]()+'/'+(_0x137dd3[_0x3fbe95(0x25a)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x137dd3[_0x3fbe95(0x24b)]()[_0x3fbe95(0x240)]()[_0x3fbe95(0x2e0)](0x2,'0')+'\x20'+_0x137dd3[_0x3fbe95(0x1b1)]()[_0x3fbe95(0x240)]()[_0x3fbe95(0x2e0)](0x2,'0')+':'+_0x137dd3['getMinutes']()[_0x3fbe95(0x240)]()[_0x3fbe95(0x2e0)](0x2,'0')+':'+_0x137dd3[_0x3fbe95(0x222)]()[_0x3fbe95(0x240)]()[_0x3fbe95(0x2e0)](0x2,'0');}function getTimeStamp(){const _0x5a1e4e=_0x24bc82,_0x181ff8=shiftedTime();return _0x181ff8['getFullYear']()+'/'+(_0x181ff8[_0x5a1e4e(0x25a)]()+0x1)[_0x5a1e4e(0x240)]()['padStart'](0x2,'0')+'/'+_0x181ff8[_0x5a1e4e(0x24b)]()[_0x5a1e4e(0x240)]()[_0x5a1e4e(0x2e0)](0x2,'0')+'\x20'+_0x181ff8[_0x5a1e4e(0x1b1)]()[_0x5a1e4e(0x240)]()[_0x5a1e4e(0x2e0)](0x2,'0')+':'+_0x181ff8['getMinutes']()[_0x5a1e4e(0x240)]()[_0x5a1e4e(0x2e0)](0x2,'0')+':'+_0x181ff8[_0x5a1e4e(0x222)]()[_0x5a1e4e(0x240)]()[_0x5a1e4e(0x2e0)](0x2,'0');}function getDate(){const _0x235157=_0x24bc82,_0x104c11=shiftedTime();return _0x104c11['getFullYear']()+'/'+(_0x104c11[_0x235157(0x25a)]()+0x1)[_0x235157(0x240)]()[_0x235157(0x2e0)](0x2,'0')+'/'+_0x104c11[_0x235157(0x24b)]()[_0x235157(0x240)]()[_0x235157(0x2e0)](0x2,'0');}function getHour(){const _0xd7f59e=_0x24bc82,_0x41d340=shiftedTime();return _0x41d340[_0xd7f59e(0x1b1)]()[_0xd7f59e(0x240)]()[_0xd7f59e(0x2e0)](0x2,'0');}function sleep(_0x2ea1b9){return new Promise(_0x4c18ca=>setTimeout(_0x4c18ca,_0x2ea1b9));}function shiftedTime(){const _0x285ed8=_0x24bc82,_0x1eb44f=new Date();let _0x19766d=_0x1eb44f;if(config&&config[_0x285ed8(0x27f)]!==0x0)_0x19766d=fns[_0x285ed8(0x194)](_0x1eb44f,{'hours':config['timeshift']});return _0x19766d;}function timer(_0x3569b6){const _0x299be0=_0x24bc82,_0x1232c0=new Date();!lasttime?console[_0x299be0(0x28a)](getTimeStamp()+_0x299be0(0x1d9),_0x3569b6,_0x1232c0):console[_0x299be0(0x28a)](getTimeStamp()+':\x20timer\x20>',_0x3569b6,(_0x1232c0-lasttime)/0x3e8),lasttime=_0x1232c0;}