const _0x1e847e=_0x5bc6;(function(_0x2d2d03,_0x38b68d){const _0xd4b59e=_0x5bc6,_0x34f025=_0x2d2d03();while(!![]){try{const _0xa5ab5d=-parseInt(_0xd4b59e(0x1af))/0x1+parseInt(_0xd4b59e(0x30d))/0x2+parseInt(_0xd4b59e(0x285))/0x3*(-parseInt(_0xd4b59e(0x18e))/0x4)+parseInt(_0xd4b59e(0x1d0))/0x5*(parseInt(_0xd4b59e(0x26c))/0x6)+parseInt(_0xd4b59e(0x23b))/0x7*(parseInt(_0xd4b59e(0x1e7))/0x8)+-parseInt(_0xd4b59e(0x2b1))/0x9+parseInt(_0xd4b59e(0x257))/0xa*(parseInt(_0xd4b59e(0x293))/0xb);if(_0xa5ab5d===_0x38b68d)break;else _0x34f025['push'](_0x34f025['shift']());}catch(_0x1cfec3){_0x34f025['push'](_0x34f025['shift']());}}}(_0xb17a,0xdf5d7));const _0x587550=function(){let _0xc68601=!![];return function(_0x681770,_0x46d3fc){const _0x31797e=_0xc68601?function(){if(_0x46d3fc){const _0x8c7f67=_0x46d3fc['apply'](_0x681770,arguments);return _0x46d3fc=null,_0x8c7f67;}}:function(){};return _0xc68601=![],_0x31797e;};}(),_0x3b20aa=_0x587550(this,function(){const _0x5ae1eb=_0x5bc6;return _0x3b20aa[_0x5ae1eb(0x304)]()[_0x5ae1eb(0x2fb)](_0x5ae1eb(0x2ce))[_0x5ae1eb(0x304)]()[_0x5ae1eb(0x2e1)](_0x3b20aa)['search'](_0x5ae1eb(0x2ce));});_0x3b20aa();'use strict';const ccxt=require(_0x1e847e(0x2e9)),low=require(_0x1e847e(0x1a0)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),Crypt=require(_0x1e847e(0x22d))[_0x1e847e(0x278)],util=require(_0x1e847e(0x2a4)),argv=require(_0x1e847e(0x219))(process[_0x1e847e(0x2b0)][_0x1e847e(0x1c6)](0x2))[_0x1e847e(0x2b0)],path=require(_0x1e847e(0x2b6));let exchange;global[_0x1e847e(0x271)]={},global[_0x1e847e(0x26e)]={};const usdBasecoins=[_0x1e847e(0x1ca),_0x1e847e(0x2ee),_0x1e847e(0x2c8),_0x1e847e(0x1d2),'USDC',_0x1e847e(0x18c)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1e847e(0x252)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require('./version.json')[_0x1e847e(0x1d1)],botID=process[_0x1e847e(0x2b0)][0x2]||_0x1e847e(0x19e),pattern=/^[0-9]{3}$/;!pattern[_0x1e847e(0x202)](botID)&&(console[_0x1e847e(0x30e)](_0x1e847e(0x249)+botID+_0x1e847e(0x1f4)),killBot());const userID=process[_0x1e847e(0x2b0)][0x3]||'',configpath=userID?_0x1e847e(0x2dc)+userID+'/':_0x1e847e(0x2dc),logspath=userID?_0x1e847e(0x2ed)+userID+'/':_0x1e847e(0x2ed),loggerfile=fs[_0x1e847e(0x21d)](logspath+_0x1e847e(0x1a8),{'flags':'a'});!fs[_0x1e847e(0x2ef)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1e847e(0x2ef)](logspath)&&fs[_0x1e847e(0x1ea)](logspath);const configfile=configpath+_0x1e847e(0x18a)+botID+_0x1e847e(0x211),logfile=configpath+_0x1e847e(0x18a)+botID+_0x1e847e(0x291),performancefile=configpath+_0x1e847e(0x18a)+botID+_0x1e847e(0x27b),coinresultsfile=configpath+_0x1e847e(0x18a)+botID+_0x1e847e(0x1ac),settingsfile=configpath+_0x1e847e(0x296),securefile=configpath+_0x1e847e(0x2a3),configbackuppath=configpath+_0x1e847e(0x2e2),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1e847e(0x2a7)]({'logs':[],'version':serverversion})[_0x1e847e(0x198)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1e847e(0x2a7)]({'data':[],'version':serverversion})[_0x1e847e(0x198)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x1e847e(0x2a7)]({'bot':[],'version':serverversion})[_0x1e847e(0x198)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1e847e(0x260),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x390174=>{console['log'](_0x390174);},'simple':_0x414178=>{const _0x352de2=_0x1e847e;console[_0x352de2(0x30e)](_0x414178),loggerfile['write'](util[_0x352de2(0x29b)](_0x414178)+'\x0a');},'full':async(_0x1807fa,_0x170419='')=>{const _0x59cad5=_0x1e847e;let _0x3e8f1f;if(config['showname'])_0x3e8f1f=getTimeStamp()+':\x20'+config[_0x59cad5(0x24d)]+'\x20>\x20'+_0x1807fa;else _0x3e8f1f=getTimeStamp()+':\x20Bot\x20'+botID+_0x59cad5(0x2fc)+_0x1807fa;console[_0x59cad5(0x30e)](_0x3e8f1f),loggerfile[_0x59cad5(0x198)](util[_0x59cad5(0x29b)](_0x3e8f1f)+'\x0a'),_0x170419&&(console[_0x59cad5(0x30e)](_0x170419),loggerfile[_0x59cad5(0x198)](util[_0x59cad5(0x29b)](_0x170419)+'\x0a'));},'debug':async(_0x2d61c7,_0xf74c91='')=>{const _0x6e9d34=_0x1e847e;let _0x3e44a9;if(config[_0x6e9d34(0x19d)])_0x3e44a9=getTimeStamp()+':\x20'+config[_0x6e9d34(0x24d)]+'\x20>\x20[DEBUG]\x20'+_0x2d61c7;else _0x3e44a9=getTimeStamp()+_0x6e9d34(0x213)+botID+'\x20>\x20[DEBUG]\x20'+_0x2d61c7;if(debugging)console[_0x6e9d34(0x30e)](_0x3e44a9);loggerfile[_0x6e9d34(0x198)](util[_0x6e9d34(0x29b)](_0x3e44a9)+'\x0a');if(_0xf74c91){if(debugging)console['log'](_0xf74c91);loggerfile[_0x6e9d34(0x198)](util[_0x6e9d34(0x29b)](_0xf74c91)+'\x0a');}}};process['on'](_0x1e847e(0x231),function(_0x20d7fc){const _0x33498d=_0x1e847e;logHistory('error',_0x33498d(0x26a)),logger['debug'](_0x33498d(0x1c1),_0x20d7fc);});settings[_0x1e847e(0x277)]!=config[_0x1e847e(0x277)]&&updateTimeshift(settings[_0x1e847e(0x277)]);function _0x5bc6(_0x4fed08,_0x45f5a7){const _0x43d60f=_0xb17a();return _0x5bc6=function(_0x3b20aa,_0x587550){_0x3b20aa=_0x3b20aa-0x18a;let _0xb17a17=_0x43d60f[_0x3b20aa];return _0xb17a17;},_0x5bc6(_0x4fed08,_0x45f5a7);}settings[_0x1e847e(0x21a)]!=config[_0x1e847e(0x21a)]&&updateOnepagemode(settings[_0x1e847e(0x21a)]);process[_0x1e847e(0x243)]({'started':_0x1e847e(0x1b9)},_0x7a8035=>{}),initializeProcessListeners();function proxyEmit(_0x4b655f,_0x1871f8=null){const _0x3a16ba=_0x1e847e;process[_0x3a16ba(0x243)]({'function':_0x4b655f,'args':_0x1871f8},_0x5a069a=>{});}function initializeProcessListeners(){process['on']('message',_0xe1a4f1=>{const _0x15a642=_0x5bc6;switch(Object[_0x15a642(0x1d7)](_0xe1a4f1)[0x0]){case _0x15a642(0x277):_0xe1a4f1[_0x15a642(0x277)]!=undefined&&(settings['timeshift']=_0xe1a4f1['timeshift'],updateTimeshift(settings[_0x15a642(0x277)]));break;case'onepagemode':_0xe1a4f1[_0x15a642(0x21a)]!=undefined&&(settings[_0x15a642(0x21a)]=_0xe1a4f1['onepagemode'],updateOnepagemode(settings[_0x15a642(0x21a)]));break;case _0x15a642(0x266):_0xe1a4f1[_0x15a642(0x266)]!=undefined&&(bots=JSON[_0x15a642(0x29d)](_0xe1a4f1[_0x15a642(0x266)]),proxyEmit(_0x15a642(0x266),bots));break;case _0x15a642(0x280):switch(_0xe1a4f1[_0x15a642(0x280)]){case _0x15a642(0x284):initclient();break;case _0x15a642(0x283):toggleBotMode();break;case'emitHistory':emitHistory(_0xe1a4f1[_0x15a642(0x299)]);break;case _0x15a642(0x1a4):deleteHistoryAlerts(_0xe1a4f1[_0x15a642(0x299)]);break;case'getPortfolio':getPortfolio(_0xe1a4f1['args']);break;case _0x15a642(0x303):storeConfiguration(_0xe1a4f1[_0x15a642(0x299)]);break;case _0x15a642(0x288):storeHeadless(_0xe1a4f1[_0x15a642(0x299)]);break;case'storeFiat':storeFiat(_0xe1a4f1['args']);break;case _0x15a642(0x224):resetHistory();break;case _0x15a642(0x236):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xe1a4f1[_0x15a642(0x299)]);break;case'cancelLoading':cancelLoading();break;case _0x15a642(0x237):showConfig();break;case _0x15a642(0x26f):sendMetricsTelegram();break;case _0x15a642(0x24a):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x3dafcf=null,_0x253c65=![]){const _0x2444dd=_0x1e847e;logger[_0x2444dd(0x28a)](_0x2444dd(0x209)+(_0x3dafcf&&_0x3dafcf[_0x2444dd(0x200)]>0x0?_0x2444dd(0x21b)+_0x3dafcf[_0x2444dd(0x217)](','):_0x2444dd(0x1bb))+_0x2444dd(0x311)+(_0x253c65?_0x2444dd(0x1a6):_0x2444dd(0x2cd))+'\x20|\x20exchange:\x20'+config[_0x2444dd(0x1b4)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x253c65)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x2444dd(0x1ee)]!='***'){if(_0x253c65){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x35ddf7){handleErrorNoStop(_0x35ddf7,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x3dafcf);const _0x1053ca=await getCoins();[currentCoins,currentCoinsAll]=_0x1053ca,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2444dd(0x200)]==0x0&&allOpenOrders[_0x2444dd(0x200)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x5e1e7d=_0x1e847e;exchangeStopped=!![],await exchange[_0x5e1e7d(0x20f)]();}async function reloadExchange(){const _0x49dd06=_0x1e847e;logger[_0x49dd06(0x28a)](_0x49dd06(0x1a1));while(lockOrders!=ORDERS[_0x49dd06(0x252)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x49dd06(0x28a)](_0x49dd06(0x272)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x4ed379=config[_0x1e847e(0x1b4)],_0x426c34=config[_0x1e847e(0x1ee)],_0x2d866b=config['apiSecret'],_0x59f87b=config[_0x1e847e(0x269)]){const _0x168cd9=_0x1e847e;exchange&&await stopExchange();!supportedExchanges()[_0x168cd9(0x1d6)](_0x4ed379)&&(logHistory(_0x168cd9(0x23f),_0x168cd9(0x1dc)+_0x4ed379+_0x168cd9(0x274)),killBot());const _0x35ca11=ccxt['pro'][_0x4ed379[_0x168cd9(0x25f)]()];exchange=new _0x35ca11({'apiKey':_0x426c34,'secret':_0x2d866b,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x168cd9(0x18d)}});if(_0x59f87b)exchange[_0x168cd9(0x2a9)]=_0x59f87b;}function setStableCoins(){const _0x3f909e=_0x1e847e;let _0xce4c4e=config[_0x3f909e(0x258)]==_0x3f909e(0x20c)?_0x3f909e(0x20c):_0x3f909e(0x1ab),_0x4d165=!allSymbols['includes'](_0xce4c4e+'/USD')?_0x3f909e(0x1d2):_0x3f909e(0x1ca),_0xca880e=!allSymbols[_0x3f909e(0x1d6)](_0xce4c4e+_0x3f909e(0x232))?_0x4d165:_0x3f909e(0x1fa);stablecoins={'eur':{'coin':''+_0xce4c4e+_0xca880e,'symbol':_0xce4c4e+'/'+_0xca880e},'usd':{'coin':''+_0xce4c4e+_0x4d165,'symbol':_0xce4c4e+'/'+_0x4d165}};}async function initwsCcxt(_0x428064){const _0x300d29=_0x1e847e;_0x428064==null&&(_0x428064=[],config[_0x300d29(0x226)][_0x300d29(0x302)](_0x5c9952=>{const _0x4a48e7=_0x300d29;if(!_0x5c9952[_0x4a48e7(0x2a8)]&&_0x5c9952['coin']!=config[_0x4a48e7(0x258)])_0x428064[_0x4a48e7(0x1a9)](_0x5c9952[_0x4a48e7(0x1e4)]);}));if(!_0x428064[_0x300d29(0x1d6)](stablecoins['eur']['symbol']))_0x428064[_0x300d29(0x1a9)](stablecoins[_0x300d29(0x244)]['symbol']);if(!_0x428064[_0x300d29(0x1d6)](stablecoins[_0x300d29(0x19c)][_0x300d29(0x1e4)]))_0x428064['push'](stablecoins['usd']['symbol']);if(config[_0x300d29(0x1b4)]['startsWith']('Binance')){if(!_0x428064['includes'](_0x300d29(0x275)+config[_0x300d29(0x258)]))_0x428064[_0x300d29(0x1a9)](_0x300d29(0x275)+config[_0x300d29(0x258)]);}loadCoins(_0x428064);const _0x4c4759=async _0x58eff9=>{const _0x402fae=_0x300d29,_0x54bf77=await exchange[_0x402fae(0x233)](_0x58eff9);global['ticker'][noslash(_0x54bf77['symbol'])]=_0x54bf77[_0x402fae(0x1c0)];while(!![]){if(!botPaused)try{const _0xd80b7b=await exchange[_0x402fae(0x1ed)](_0x58eff9);global[_0x402fae(0x271)][noslash(_0xd80b7b[0x0][_0x402fae(0x1e4)])]=_0xd80b7b[0x0][_0x402fae(0x282)],await sleep(0x3e8);}catch(_0x40b355){if(!exchangeStopped)await handleError(_0x40b355,'watchTrades',_0x58eff9);}else await sleep(0x64);}},_0x277705=async _0x382f07=>{const _0x150ab2=_0x300d29;while(!![]){if(!botPaused)try{const _0x5c5378=await exchange[_0x150ab2(0x233)](_0x382f07);global[_0x150ab2(0x26e)][_0x5c5378['symbol']]=_0x5c5378[_0x150ab2(0x1eb)],await sleep(0x3c*0x3e8);}catch(_0x205a38){if(!exchangeStopped)await handleError(_0x205a38,_0x150ab2(0x295),_0x382f07);}else await sleep(0x64);}},_0x14e39d=async()=>{const _0x40a5f4=_0x300d29;while(!![]){if(!botPaused)try{const _0x4df5f9=await exchange[_0x40a5f4(0x1f6)]();_0x4df5f9[_0x40a5f4(0x302)](_0x1cb5a8=>{updateNumberCoinsCcxt(_0x1cb5a8);});}catch(_0x57761a){if(!exchangeStopped)await handleError(_0x57761a,'watchOrders');}else await sleep(0x64);}};_0x428064[_0x300d29(0x302)](_0x4a3b4c=>{_0x4c4759(_0x4a3b4c),_0x277705(_0x4a3b4c);}),!wsEventsSet&&(wsEventsSet=!![],_0x14e39d(),watchTransactions());}async function watchTransactions(){const _0x2597d7=_0x1e847e;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0xfe6700=await getCoins(),[_0x23c2f1,_0x8b0748]=_0xfe6700;let _0x25e183=[];currentCoins[_0x2597d7(0x302)](_0x250c3e=>{const _0x43076c=_0x2597d7,_0x52907a=_0x23c2f1[_0x43076c(0x265)](_0x49d666=>_0x49d666[_0x43076c(0x1e3)]==_0x250c3e[_0x43076c(0x1e3)]);if(_0x52907a){if(_0x250c3e['number']!=_0x52907a[_0x43076c(0x193)]){let _0xad8b5f;if(_0x250c3e['coin']!=config['basecoin']){const _0xe1afbb=global[_0x43076c(0x271)][noslash(_0x250c3e[_0x43076c(0x1e4)])];_0xad8b5f=_0x250c3e[_0x43076c(0x23c)]?0x1/_0xe1afbb:_0xe1afbb;}else _0xad8b5f=0x1;_0x25e183[_0x43076c(0x1a9)]({'coin':_0x250c3e[_0x43076c(0x1e3)],'symbol':_0x250c3e[_0x43076c(0x1e4)],'price':_0xad8b5f,'number':Number(formatResult(_0x52907a[_0x43076c(0x193)]-_0x250c3e[_0x43076c(0x193)],0x8)),'basecoinvalue':_0xad8b5f*(_0x52907a[_0x43076c(0x193)]-_0x250c3e['number'])});}}});if(_0x25e183['length']==0x1&&!blockTransactionDetection){if(config[_0x2597d7(0x19b)]){logger[_0x2597d7(0x28a)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x25e183[0x0][_0x2597d7(0x300)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x2597d7(0x1c4)]);if(lastFees[_0x2597d7(0x1c4)]==0x0||Math[_0x2597d7(0x250)](_0x25e183[0x0][_0x2597d7(0x300)])>lastFees[_0x2597d7(0x1c4)]){delete _0x25e183[0x0][_0x2597d7(0x1e4)],delete _0x25e183[0x0]['basecoinvalue'];let _0x56552d=[],_0x1add94=[...config['liquidity']]||[],_0x63e246=config[_0x2597d7(0x246)];_0x1add94['sort']((_0x2b1eb0,_0x38b62f)=>_0x2b1eb0[_0x2597d7(0x298)]>_0x38b62f[_0x2597d7(0x298)]?-0x1:_0x38b62f[_0x2597d7(0x298)]>_0x2b1eb0['date']?0x1:0x0);const _0x20f7e4=getDate();if(_0x1add94[0x0]){const _0x566cdd=fns['parse'](_0x1add94[0x0][_0x2597d7(0x298)],_0x2597d7(0x2d5),new Date()),_0x54df71=fns[_0x2597d7(0x29d)](_0x20f7e4,'yyyy/MM/dd',new Date());if(fns[_0x2597d7(0x29f)](_0x566cdd,_0x54df71)){_0x56552d=_0x1add94[0x0][_0x2597d7(0x1b5)];const _0x17d132=_0x56552d['find'](_0x3fbbe8=>_0x3fbbe8[_0x2597d7(0x1e3)]==_0x25e183[0x0]['coin']);_0x17d132?(_0x17d132['number']+=_0x25e183[0x0][_0x2597d7(0x193)],_0x17d132[_0x2597d7(0x193)]==0x0&&(_0x56552d=_0x56552d[_0x2597d7(0x1c7)](_0x2eff55=>{const _0x515360=_0x2597d7;return _0x2eff55['coin']!=_0x25e183[0x0][_0x515360(0x1e3)];}))):_0x56552d[_0x2597d7(0x1a9)](_0x25e183[0x0]);const _0x4c2b4e=_0x63e246[_0x2597d7(0x265)](_0x200c3a=>_0x200c3a['date']==_0x20f7e4);_0x4c2b4e['changes']=_0x56552d;}else _0x63e246[_0x2597d7(0x1a9)]({'date':_0x20f7e4,'changes':[_0x25e183[0x0]]});}const _0xd96f95=_0x63e246[_0x2597d7(0x265)](_0x423535=>_0x423535[_0x2597d7(0x298)]==_0x20f7e4);if(_0xd96f95){let _0x4f2b13=!![];_0xd96f95[_0x2597d7(0x1b5)][_0x2597d7(0x302)](_0x5db40b=>{const _0x2bc70c=_0x2597d7;if(_0x5db40b[_0x2bc70c(0x193)]!=0x0)_0x4f2b13=![];}),_0x4f2b13&&(_0x63e246=_0x63e246[_0x2597d7(0x1c7)](_0x25f68a=>{const _0x107658=_0x2597d7;return _0x25f68a[_0x107658(0x298)]!=_0x20f7e4;}));}let _0x41414e=dbConfig[_0x2597d7(0x1fb)](_0x2597d7(0x2d9))[_0x2597d7(0x265)]({'botID':botID})[_0x2597d7(0x2c6)]();_0x41414e&&(dbConfig['get'](_0x2597d7(0x2d9))[_0x2597d7(0x265)]({'botID':botID})[_0x2597d7(0x2be)]({'liquidity':_0x63e246})[_0x2597d7(0x198)](),config[_0x2597d7(0x246)]=_0x63e246),logHistory(_0x2597d7(0x2b5),_0x2597d7(0x20e)+Math[_0x2597d7(0x250)](_0x25e183[0x0][_0x2597d7(0x193)])+'\x20'+_0x25e183[0x0][_0x2597d7(0x1e3)]+'\x20'+(_0x25e183[0x0][_0x2597d7(0x193)]>0x0?_0x2597d7(0x23a):_0x2597d7(0x1c8))+_0x2597d7(0x210)),proxyEmit(_0x2597d7(0x2aa),emittedConfiguration());}else logger['debug'](_0x2597d7(0x317)+Math[_0x2597d7(0x250)](_0x25e183[0x0][_0x2597d7(0x193)])+'\x20'+_0x25e183[0x0]['coin']+'\x20'+(_0x25e183[0x0][_0x2597d7(0x193)]>0x0?_0x2597d7(0x23a):'removed'));transactionDetected=!![],currentCoins=_0x23c2f1,currentCoinsAll=_0x8b0748;}else logger[_0x2597d7(0x28a)]('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x25e183[0x0][_0x2597d7(0x193)])+'\x20'+_0x25e183[0x0][_0x2597d7(0x1e3)]+'\x20'+(_0x25e183[0x0][_0x2597d7(0x193)]>0x0?'added':'removed')+_0x2597d7(0x2d8)),currentCoins=_0x23c2f1,currentCoinsAll=_0x8b0748;}await sleep(watchTransactionsInterval);}catch(_0x276979){if(!exchangeStopped)await handleError(_0x276979,_0x2597d7(0x2d0));}else await sleep(0x64);}}async function loadSymbols(_0xd3e5d2=config[_0x1e847e(0x1b4)],_0x73f68d=![]){const _0x29394b=_0x1e847e;if(allSymbols&&!_0x73f68d)return;try{markets=await exchange[_0x29394b(0x1d3)](),allSymbols=[],Object['entries'](markets)['forEach'](_0x4e3bee=>{const _0x1f4234=_0x29394b;_0x4e3bee[0x1][_0x1f4234(0x319)]&&_0x4e3bee[0x1][_0x1f4234(0x18d)]&&allSymbols[_0x1f4234(0x1a9)](_0x4e3bee[0x0]);});}catch(_0x5569af){throw _0x5569af;}}async function initclient(){const _0x481b66=_0x1e847e;emitLoadingProgress(),proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x481b66(0x206),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0xdbf2dc=getNormalizedPerformance();emitPerformance(_0xdbf2dc),getStartingBalances(_0xdbf2dc);}async function toggleBotMode(){const _0x38f1c4=_0x1e847e;let _0x1a25fa=dbConfig[_0x38f1c4(0x1fb)](_0x38f1c4(0x2d9))['find']({'botID':botID})[_0x38f1c4(0x2c6)]();if(_0x1a25fa){const _0x415ad5=!_0x1a25fa['headless'];dbConfig[_0x38f1c4(0x1fb)](_0x38f1c4(0x2d9))[_0x38f1c4(0x265)]({'botID':botID})['assign']({'headless':_0x415ad5})[_0x38f1c4(0x198)](),config[_0x38f1c4(0x279)]=_0x415ad5,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x276f00=_0x1e847e;process[_0x276f00(0x243)]({'updatebotmanager':!![]},_0x4db35c=>{});}async function loadCoins(_0x4e0564){const _0x47a039=_0x1e847e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x1dd7f9,_0x2b151c=0x0,_0x14b27b=0x0;_0x4e0564[_0x47a039(0x302)](_0x3c3b88=>{loading['remainingSymbols']['push'](_0x3c3b88);}),loadingCanceled=![];let _0x2c9926=![];while(_0x1dd7f9!=_0x4e0564[_0x47a039(0x200)]){_0x1dd7f9=0x0,_0x4e0564['forEach'](_0x51a2c5=>{const _0xc4991a=_0x47a039;if(global[_0xc4991a(0x271)][noslash(_0x51a2c5)]){loading[_0xc4991a(0x268)]=loading[_0xc4991a(0x268)]['filter'](_0xcae6e2=>_0xcae6e2!=_0x51a2c5);if(!watchedSymbols[_0xc4991a(0x1d6)](_0x51a2c5))watchedSymbols[_0xc4991a(0x1a9)](_0x51a2c5);_0x1dd7f9++;}}),loading['progress']=Math[_0x47a039(0x197)](_0x1dd7f9/_0x4e0564[_0x47a039(0x200)]*0x64);loading[_0x47a039(0x2f7)]!=0x64&&(_0x14b27b>0x1e*0x5&&(loading[_0x47a039(0x27e)]=!![],emitLoadingProgress()),_0x14b27b>0x78*0x5&&!_0x2c9926&&(loading[_0x47a039(0x1f9)]=!![],emitLoadingProgress(),_0x2c9926=!![],logHistory(_0x47a039(0x23f),_0x47a039(0x235)+loading[_0x47a039(0x268)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory('error',_0x47a039(0x214)+loadCoinsRetryInterval/0xea60+_0x47a039(0x286)),pidCoinReloading=setTimeout(()=>{process['send']({'stop':'restart'},_0x52db93=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x47a039(0x1f9)]=!![],emitLoadingProgress();break;}else _0x1dd7f9!=_0x2b151c&&(_0x2b151c=_0x1dd7f9,emitLoadingProgress()),_0x14b27b++,await sleep(0xc8);}_0x1dd7f9==_0x4e0564[_0x47a039(0x200)]&&(coinsLoaded=!![],process['send']({'status':_0x47a039(0x2c5),'live':_0x47a039(0x1b9)},_0x579aaa=>{}),_0x2c9926&&logHistory('success',_0x47a039(0x1ef)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){proxyEmit('configuration',{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1c422f=_0x1e847e;let _0x172e4a=global[_0x1c422f(0x271)][stablecoins[_0x1c422f(0x244)][_0x1c422f(0x1e3)]],_0x14ea2e=global['ticker'][stablecoins[_0x1c422f(0x19c)][_0x1c422f(0x1e3)]];return{'eur':Number(_0x172e4a),'usd':Number(_0x14ea2e)};}function capitalize(_0x717403){const _0x16faa1=_0x1e847e;return _0x717403['substring'](0x0,0x1)[_0x16faa1(0x25e)]()+_0x717403['substring'](0x1);}function supportedExchanges(){const _0x12c939=_0x1e847e,_0xdf64e4=['ws','fetchTickers',_0x12c939(0x233),'watchTrades',_0x12c939(0x1f6),_0x12c939(0x2d6),_0x12c939(0x2c0),_0x12c939(0x309),_0x12c939(0x2d4),_0x12c939(0x223)];let _0x59c736=[],_0x2461ee=[],_0x1f1d86=ccxt[_0x12c939(0x227)][_0x12c939(0x206)];_0x1f1d86[_0x12c939(0x302)](_0x16f89d=>{const _0x4271d9=_0x12c939;try{const _0x1a0751=new ccxt[(_0x4271d9(0x227))][_0x16f89d]();_0x2461ee[_0x4271d9(0x1a9)](_0x1a0751);}catch(_0x1b5846){}}),_0x2461ee['forEach'](_0x1ddc48=>{const _0xbcc479=_0x12c939;let _0x3d2af4=0x0;_0xdf64e4[_0xbcc479(0x302)](_0x36e4c7=>{const _0x43f484=_0xbcc479;_0x36e4c7 in _0x1ddc48[_0x43f484(0x230)]&&_0x1ddc48[_0x43f484(0x230)][_0x36e4c7]&&_0x3d2af4++;}),_0x3d2af4==_0xdf64e4[_0xbcc479(0x200)]&&_0x59c736[_0xbcc479(0x1a9)](capitalize(_0x1ddc48['id']));});let _0xd75732=[];return _0x1f1d86[_0x12c939(0x302)](_0x97d572=>{const _0x6cf9b8=_0x12c939;_0x97d572=capitalize(_0x97d572);if(!_0x59c736[_0x6cf9b8(0x1d6)](_0x97d572))_0xd75732[_0x6cf9b8(0x1a9)](_0x97d572);}),_0x59c736;}function setStartDatePerformance(){const _0x5d87dd=_0x1e847e;if(config&&config[_0x5d87dd(0x246)][0x0][_0x5d87dd(0x1b5)][_0x5d87dd(0x200)]!=0x0){const _0x543403=config[_0x5d87dd(0x246)][0x0]['changes'];dbPerformance[_0x5d87dd(0x1fb)]('data')[_0x5d87dd(0x265)]({'date':config[_0x5d87dd(0x1cc)]})[_0x5d87dd(0x2be)]({'coins':_0x543403})[_0x5d87dd(0x198)]();}}async function recreateCoinResults(){const _0x52ed50=_0x1e847e;let _0x3ac9b8,_0x5b9389=[];try{const _0x2aee0f=fns['format'](fns[_0x52ed50(0x21f)](config[_0x52ed50(0x1cc)][_0x52ed50(0x254)](/\//g,'-')),_0x52ed50(0x256));for(const _0x4df8f2 of currentCoins){if(_0x4df8f2['coin']!=config[_0x52ed50(0x258)]){let _0x237190=0x0,_0x4665de,_0x4c5277;_0x3ac9b8=await getAllEventOrders(_0x4df8f2[_0x52ed50(0x1e4)]);if(_0x3ac9b8['length']>0x0)_0x3ac9b8[_0x52ed50(0x302)](_0x4b2c67=>{const _0x2812fc=_0x52ed50,_0x521290=_0x4df8f2[_0x2812fc(0x1e4)][_0x2812fc(0x1d6)](config[_0x2812fc(0x258)]+'/');_0x5b9389['push']({'datetime':_0x4b2c67[_0x2812fc(0x2bd)],'coin':_0x4df8f2[_0x2812fc(0x1e3)],'symbol':_0x4df8f2['symbol'],'side':_0x4b2c67['side'],'reverse':_0x521290,'amount':formatResult(_0x4b2c67[_0x2812fc(0x192)],0x8),'filled':formatResult(_0x4b2c67[_0x2812fc(0x192)],0x8),'price':formatResult(_0x4b2c67[_0x2812fc(0x282)],0x8)}),_0x237190=_0x4b2c67['side']==_0x2812fc(0x30b)?_0x237190+_0x4b2c67[_0x2812fc(0x192)]:_0x237190-_0x4b2c67[_0x2812fc(0x192)];if(!_0x4c5277)_0x4c5277=_0x4b2c67[_0x2812fc(0x282)];});_0x4665de=_0x4df8f2[_0x52ed50(0x193)]-_0x237190;let _0x18b9ce;config[_0x52ed50(0x246)][_0x52ed50(0x302)](_0x56d2ed=>{const _0x5b3aae=_0x52ed50;!_0x18b9ce&&(_0x18b9ce=_0x56d2ed[_0x5b3aae(0x1b5)][_0x5b3aae(0x265)](_0x1562b4=>_0x1562b4[_0x5b3aae(0x1e3)]==_0x4df8f2['coin']),_0x18b9ce&&(_0x4665de=_0x18b9ce[_0x5b3aae(0x193)],_0x4c5277=_0x18b9ce[_0x5b3aae(0x282)]));});let _0x226652=dbCoinResults['get'](_0x52ed50(0x262))[_0x52ed50(0x265)]({'coin':_0x4df8f2[_0x52ed50(0x1e3)]})[_0x52ed50(0x2c6)]();_0x226652={'coin':_0x4df8f2[_0x52ed50(0x1e3)],'number':_0x4665de,'breakeven':_0x4c5277,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x52ed50(0x262))[_0x52ed50(0x265)]({'coin':_0x4df8f2[_0x52ed50(0x1e3)]})[_0x52ed50(0x2be)](_0x226652)[_0x52ed50(0x198)]();}}_0x5b9389['sort']((_0x426295,_0x5a3ab7)=>_0x426295[_0x52ed50(0x2bd)]>_0x5a3ab7[_0x52ed50(0x2bd)]?0x1:_0x5a3ab7['datetime']>_0x426295['datetime']?-0x1:0x0);let _0x30f297=0x0;for(let _0x2f8c52 of _0x5b9389){await updateCoinResults(_0x2f8c52,!![]);}}catch(_0x137023){await handleError(_0x137023,'recreateCoinResults()');}}async function getAllEventOrders(_0x2d2f78){const _0x4f0454=_0x1e847e;let _0xc173e9=[],_0x247268=dbLogs[_0x4f0454(0x1fb)](_0x4f0454(0x1f1))['filter'](_0x48aa7e=>{const _0x3cec7c=_0x4f0454,_0x216229=_0x48aa7e[_0x3cec7c(0x2c2)][_0x3cec7c(0x25f)]();return _0x216229['includes'](_0x2d2f78[_0x3cec7c(0x25f)]())&&(_0x216229[_0x3cec7c(0x1d6)](_0x3cec7c(0x26d))&&_0x216229[_0x3cec7c(0x1d6)]('order')||_0x216229[_0x3cec7c(0x1d6)](_0x3cec7c(0x192))&&_0x216229[_0x3cec7c(0x1d6)](_0x3cec7c(0x203)));})[_0x4f0454(0x1b3)](_0x4f0454(0x2b4))[_0x4f0454(0x2c6)]();return _0x247268['forEach'](_0xc0d33c=>{const _0x415bc4=_0x4f0454,_0x477a1b=_0xc0d33c['event'][_0x415bc4(0x1d6)](_0x415bc4(0x1e0))?_0x415bc4(0x1e0):_0x415bc4(0x30b),_0x537830=/#([0-9]|\.)+\s/i,_0x168fbb=Number(_0x537830[_0x415bc4(0x18b)](_0xc0d33c[_0x415bc4(0x2c2)])[0x0]['slice'](0x1)),_0xab1b23=/@([0-9]|\.)+$/i,_0x2853eb=Number(_0xab1b23[_0x415bc4(0x18b)](_0xc0d33c[_0x415bc4(0x2c2)])[0x0][_0x415bc4(0x1c6)](0x1));_0xc173e9[_0x415bc4(0x1a9)]({'datetime':_0xc0d33c[_0x415bc4(0x2b4)],'coin':symbolToCoin(_0x2d2f78),'symbol':_0x2d2f78,'side':_0x477a1b,'amount':_0x168fbb,'filled':_0x168fbb,'price':_0x2853eb});}),_0xc173e9;}async function getAllOrders(_0xef2e03,_0x2e6515){const _0x2c63c3=_0x1e847e;let _0x312b4d=[];while(_0x2e6515<exchange[_0x2c63c3(0x2bc)]()){const _0x87ea90=0x1f4,_0x4ea64b=await exchange[_0x2c63c3(0x2d4)](_0xef2e03,_0x2e6515,_0x87ea90);if(_0x4ea64b['length'])_0x2e6515=_0x4ea64b[_0x4ea64b[_0x2c63c3(0x200)]-0x1][_0x2c63c3(0x212)]+0x1,_0x312b4d=_0x312b4d[_0x2c63c3(0x1e1)](_0x4ea64b);else break;}return _0x312b4d;}async function validate24hChanges(){const _0x2a6269=_0x1e847e;for(const _0x55e646 of currentCoins){if(_0x55e646[_0x2a6269(0x1e3)]!=config[_0x2a6269(0x258)]){let _0x3f904b;_0x55e646['reverse']?_0x3f904b=formatResult((0x1/(global[_0x2a6269(0x26e)][noslash(_0x55e646[_0x2a6269(0x1e4)])]/0x64+0x1)-0x1)*0x64,0x3):_0x3f904b=global[_0x2a6269(0x26e)][noslash(_0x55e646[_0x2a6269(0x1e4)])],_0x3f904b<config[_0x2a6269(0x1cb)]&&(logHistory('error',_0x55e646[_0x2a6269(0x1e3)]+_0x2a6269(0x1f2)+_0x3f904b+'%'),logHistory(_0x2a6269(0x23f),_0x2a6269(0x2f0)),logHistory(_0x2a6269(0x23f),_0x2a6269(0x1c9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x128703,_0x57da16){const _0x1138f2=_0x1e847e;if(!_0x128703)return!![];const _0x89f01a=_0x57da16[_0x1138f2(0x20a)]('.'),_0x5bcb9f=_0x128703[_0x1138f2(0x20a)]('.');for(var _0x14d6b7=0x0;_0x14d6b7<_0x5bcb9f[_0x1138f2(0x200)];_0x14d6b7++){const _0x526cc3=~~_0x5bcb9f[_0x14d6b7],_0x2b394e=~~_0x89f01a[_0x14d6b7];if(_0x526cc3<_0x2b394e)return!![];if(_0x526cc3>_0x2b394e)return![];}return![];}async function oneTimeMigration(){const _0x58e448=_0x1e847e;let _0x311178=dbLogs[_0x58e448(0x1fb)](_0x58e448(0x1d1))['value']();if(isOlderVersion(_0x311178,_0x58e448(0x215))){let _0x5d802d=[];const _0x4c851d=dbLogs[_0x58e448(0x1fb)]('logs')[_0x58e448(0x2c6)]();_0x4c851d[_0x58e448(0x302)](_0x4a7a71=>{const _0x57ab0b=_0x58e448;_0x5d802d[_0x57ab0b(0x1a9)]({'time':_0x4a7a71[_0x57ab0b(0x2b4)],'type':_0x4a7a71[_0x57ab0b(0x28e)],'event':_0x4a7a71[_0x57ab0b(0x2c2)]});}),dbLogs[_0x58e448(0x1fb)]('logs')['assign'](_0x5d802d)[_0x58e448(0x198)]();}let _0x2d3f0d=dbConfig[_0x58e448(0x1fb)](_0x58e448(0x1d1))[_0x58e448(0x2c6)]();if(isOlderVersion(_0x2d3f0d,_0x58e448(0x215))){let _0x2cf327=dbConfig[_0x58e448(0x1fb)](_0x58e448(0x2d9))[_0x58e448(0x265)]({'botID':botID})[_0x58e448(0x2c6)]();if(_0x2cf327){let _0x47f82b=[];_0x2cf327['portfolio'][_0x58e448(0x302)](_0x3aec80=>{const _0x2e0e0a=_0x58e448;_0x47f82b[_0x2e0e0a(0x1a9)]({'coin':_0x3aec80['coin'],'number':_0x3aec80[_0x2e0e0a(0x2e5)],'price':_0x3aec80[_0x2e0e0a(0x2c7)]}),delete _0x3aec80['startnumber'],delete _0x3aec80['startprice'];});if(_0x47f82b[_0x58e448(0x200)]!==0x0)fs[_0x58e448(0x29e)](configbackuppath+(_0x58e448(0x18f)+botID+_0x58e448(0x28d)),JSON[_0x58e448(0x2a2)](_0x47f82b,null,0x4),function(_0x38a89c){if(_0x38a89c){}});const _0x1ab372=(_0x5b7cbb,_0x4a78c4)=>{const _0x31f14c=_0x58e448;let _0x45dbcb=[];_0x4a78c4[_0x31f14c(0x302)](_0x48ecbd=>{const _0x12f46e=_0x31f14c,_0x16311d=_0x5b7cbb[_0x12f46e(0x265)](_0xe75c49=>_0xe75c49[_0x12f46e(0x1e3)]==_0x48ecbd[_0x12f46e(0x1e3)]);if(!_0x16311d)_0x45dbcb[_0x12f46e(0x1a9)](_0x48ecbd);});let _0xacb5b2=[];return _0x5b7cbb[_0x31f14c(0x302)](_0x42f6be=>{const _0x4f7182=_0x31f14c,_0x4eebf4=_0x4a78c4[_0x4f7182(0x265)](_0x1ff6f2=>_0x1ff6f2[_0x4f7182(0x1e3)]==_0x42f6be[_0x4f7182(0x1e3)]);if(!_0x4eebf4||_0x4eebf4[_0x4f7182(0x193)]==0x0&&_0x42f6be[_0x4f7182(0x193)]!=0x0)_0xacb5b2[_0x4f7182(0x1a9)](_0x42f6be);}),{'missingDay1':_0x45dbcb,'notInDay2':_0xacb5b2};},_0x53846d=dbPerformance[_0x58e448(0x1fb)]('data')[_0x58e448(0x242)]()[_0x58e448(0x2c6)]();if(_0x53846d[_0x58e448(0x200)]>0x1){const {missingDay1:_0x4938a0,notInDay2:_0x4d9f55}=_0x1ab372(_0x47f82b,_0x53846d[0x1][_0x58e448(0x262)]);_0x47f82b=[..._0x47f82b,..._0x4938a0],_0x4d9f55[_0x58e448(0x302)](_0x398c88=>{const _0x19877c=_0x58e448;let _0x91acda=_0x47f82b['findIndex'](_0x494a75=>_0x494a75['coin']==_0x398c88[_0x19877c(0x1e3)]);_0x91acda!=-0x1&&_0x47f82b[_0x19877c(0x22f)](_0x91acda,0x1);});}_0x47f82b[_0x58e448(0x24b)]((_0x3e229a,_0x312ac3)=>_0x3e229a[_0x58e448(0x1e3)]>_0x312ac3['coin']?0x1:_0x312ac3[_0x58e448(0x1e3)]>_0x3e229a['coin']?-0x1:0x0);let _0x58d145=[{'date':_0x2cf327[_0x58e448(0x1cc)],'changes':_0x47f82b}];_0x53846d[_0x58e448(0x200)]>0x2&&_0x53846d[_0x58e448(0x302)]((_0x212f89,_0x158662)=>{const _0x1438cf=_0x58e448;if(_0x158662>0x0&&_0x158662<_0x53846d[_0x1438cf(0x200)]-0x1){const {missingDay1:_0x2c69a9,notInDay2:_0x1a841b}=_0x1ab372(_0x53846d[_0x158662][_0x1438cf(0x262)],_0x53846d[_0x158662+0x1][_0x1438cf(0x262)]);_0x47f82b=[],(_0x2c69a9['length']!=0x0||_0x1a841b[_0x1438cf(0x200)]!=0x0)&&(_0x2c69a9[_0x1438cf(0x200)]!=0x0&&_0x47f82b[_0x1438cf(0x1a9)](..._0x2c69a9),_0x1a841b[_0x1438cf(0x200)]!=0x0&&(_0x1a841b['forEach'](_0x5f561f=>{const _0x5611ed=_0x1438cf;_0x5f561f[_0x5611ed(0x193)]=-_0x5f561f[_0x5611ed(0x193)];}),_0x47f82b['push'](..._0x1a841b)),_0x47f82b[_0x1438cf(0x24b)]((_0x533646,_0x5b75cd)=>_0x533646['coin']>_0x5b75cd[_0x1438cf(0x1e3)]?0x1:_0x5b75cd[_0x1438cf(0x1e3)]>_0x533646[_0x1438cf(0x1e3)]?-0x1:0x0),_0x58d145[_0x1438cf(0x1a9)]({'date':_0x53846d[_0x158662+0x1]['date'],'changes':_0x47f82b}));}}),dbConfig[_0x58e448(0x1fb)]('bot')['find']({'botID':botID})[_0x58e448(0x2be)]({..._0x2cf327,'liquidity':_0x58d145})['write']();}}if(isOlderVersion(_0x2d3f0d,_0x58e448(0x2a6))){let _0x8dff1f=dbConfig[_0x58e448(0x1fb)]('bot')[_0x58e448(0x265)]({'botID':botID})[_0x58e448(0x2c6)]();if(_0x8dff1f){const _0x3b2cb1=_0x8dff1f['exchange'],_0x4e0cde=_0x3b2cb1?capitalize(_0x3b2cb1):_0x58e448(0x270);dbConfig[_0x58e448(0x1fb)]('bot')[_0x58e448(0x265)]({'botID':botID})[_0x58e448(0x2be)]({'exchange':_0x4e0cde})[_0x58e448(0x198)]();}}let _0x278003=dbPerformance[_0x58e448(0x1fb)](_0x58e448(0x1d1))[_0x58e448(0x2c6)]();isOlderVersion(_0x278003,_0x58e448(0x215))&&setStartDatePerformance();let _0x4917f9=dbCoinResults[_0x58e448(0x1fb)](_0x58e448(0x1d1))[_0x58e448(0x2c6)]();if(isOlderVersion(_0x4917f9,_0x58e448(0x2b8))){let _0x27b2a5=dbCoinResults['get'](_0x58e448(0x262))[_0x58e448(0x2c6)]();if(_0x27b2a5['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x57ab63=_0x1e847e;dbConfig['set'](_0x57ab63(0x1d1),serverversion)['write'](),dbPerformance['set'](_0x57ab63(0x1d1),serverversion)[_0x57ab63(0x198)](),dbLogs[_0x57ab63(0x315)]('version',serverversion)[_0x57ab63(0x198)](),dbCoinResults[_0x57ab63(0x315)](_0x57ab63(0x1d1),serverversion)[_0x57ab63(0x198)]();}function getConfiguration(_0x175782){const _0x41cf75=_0x1e847e;let _0x124474=dbConfig[_0x41cf75(0x1fb)](_0x41cf75(0x2d9))['find']({'botID':_0x175782})['value']();if(_0x124474){let _0x4326ed=![];typeof _0x124474[_0x41cf75(0x2ae)]=='string'&&(_0x124474={..._0x124474,'threshold':Number(_0x124474[_0x41cf75(0x2ae)])},_0x4326ed=!![]),_0x124474[_0x41cf75(0x1cb)]==null&&(_0x124474={..._0x124474,'change24h':-0x14},_0x4326ed=!![]),!_0x124474[_0x41cf75(0x318)]&&(_0x124474={..._0x124474,'fiat':'USD'},_0x4326ed=!![]),!_0x124474[_0x41cf75(0x21a)]&&(_0x124474={..._0x124474,'onepagemode':settings[_0x41cf75(0x21a)]},_0x4326ed=!![]),!_0x124474[_0x41cf75(0x264)]&&(_0x124474={..._0x124474,'colorscheme':_0x41cf75(0x2f3)},_0x4326ed=!![]),!_0x124474[_0x41cf75(0x19b)]&&(_0x124474={..._0x124474,'autoliquidity':!![]},_0x4326ed=!![]),_0x4326ed&&(_0x124474={'botID':_0x124474[_0x41cf75(0x1a2)],'exchange':_0x124474[_0x41cf75(0x1b4)],'apiKey':_0x124474['apiKey'],'apiSecret':_0x124474['apiSecret'],'apiPassword':_0x124474[_0x41cf75(0x269)],'basecoin':_0x124474[_0x41cf75(0x258)],'botname':_0x124474['botname'],'showname':_0x124474['showname'],'threshold':_0x124474[_0x41cf75(0x2ae)],'ordertype':_0x124474[_0x41cf75(0x1b2)],'timeout':_0x124474['timeout'],'fiat':_0x124474[_0x41cf75(0x318)],'startdate':_0x124474[_0x41cf75(0x1cc)],'recreate':_0x124474[_0x41cf75(0x2ba)],'timeshift':_0x124474['timeshift'],'onepagemode':_0x124474[_0x41cf75(0x21a)],'headless':_0x124474[_0x41cf75(0x279)],'cooldown':_0x124474['cooldown'],'change24h':_0x124474[_0x41cf75(0x1cb)],'emojibuy':_0x124474[_0x41cf75(0x307)],'emojisell':_0x124474['emojisell'],'colorscheme':_0x124474[_0x41cf75(0x264)],'portfolio':_0x124474[_0x41cf75(0x226)],'autoliquidity':_0x124474[_0x41cf75(0x19b)],'liquidity':_0x124474['liquidity'],'openOrders':_0x124474[_0x41cf75(0x196)]},dbConfig[_0x41cf75(0x1fb)](_0x41cf75(0x2d9))['remove']()['write'](),dbConfig[_0x41cf75(0x1fb)]('bot')[_0x41cf75(0x1a9)](_0x124474)[_0x41cf75(0x198)]());}else _0x124474={'botID':_0x175782,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x41cf75(0x1db)+_0x175782,'showname':![],'threshold':0x3,'ordertype':_0x41cf75(0x26d),'timeout':0x14,'fiat':_0x41cf75(0x1ca),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x41cf75(0x277)],'onepagemode':settings['onepagemode'],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x41cf75(0x2f3),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x124474;}function emittedConfiguration(){const _0x16831c=_0x1e847e;let _0x80c198;if(config['apiKey']=='')_0x80c198={...config,'configstate':_0x16831c(0x2fe)};else config[_0x16831c(0x1ee)]==_0x16831c(0x289)?_0x80c198={...config,'configstate':'recovery'}:(_0x80c198={...config,'apiKey':_0x16831c(0x310),'apiSecret':'************'},config[_0x16831c(0x269)]&&(_0x80c198[_0x16831c(0x269)]=_0x16831c(0x310)));return _0x80c198;}function getSettings(){const _0x1cc385=_0x1e847e;return dbSettings['get'](_0x1cc385(0x276))[_0x1cc385(0x2c6)]();}function getSecure(){const _0x2c387=_0x1e847e;return dbSecure[_0x2c387(0x1fb)](_0x2c387(0x2ec))[_0x2c387(0x2c6)]()||{};}function updateTimeshift(_0x922926){const _0x4e3b87=_0x1e847e;let _0x3423fa=dbConfig['get'](_0x4e3b87(0x2d9))[_0x4e3b87(0x265)]({'botID':botID})[_0x4e3b87(0x2c6)]();_0x3423fa&&dbConfig[_0x4e3b87(0x1fb)](_0x4e3b87(0x2d9))['find']({'botID':botID})['assign']({'timeshift':_0x922926})[_0x4e3b87(0x198)](),config[_0x4e3b87(0x277)]=_0x922926,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x28ee81){const _0x1a540f=_0x1e847e;let _0x4b31e5=dbConfig[_0x1a540f(0x1fb)](_0x1a540f(0x2d9))[_0x1a540f(0x265)]({'botID':botID})[_0x1a540f(0x2c6)]();_0x4b31e5&&dbConfig['get'](_0x1a540f(0x2d9))[_0x1a540f(0x265)]({'botID':botID})[_0x1a540f(0x2be)]({'onepagemode':_0x28ee81})['write'](),config[_0x1a540f(0x21a)]=_0x28ee81,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x57cd00){const _0x2c4348=_0x1e847e;logger[_0x2c4348(0x28a)](_0x2c4348(0x2b3));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2c4348(0x28a)](_0x2c4348(0x22c));let _0x139439=[],_0x4e2de6=![],_0x1fce30=![],_0x12fce0=[];_0x57cd00[_0x2c4348(0x226)][_0x2c4348(0x302)](_0x316d26=>{const _0x4fdfa7=_0x2c4348;if(!_0x316d26[_0x4fdfa7(0x2a8)]&&_0x316d26[_0x4fdfa7(0x1e3)]!=_0x57cd00[_0x4fdfa7(0x258)])_0x12fce0[_0x4fdfa7(0x1a9)](_0x316d26['symbol']);}),_0x12fce0[_0x2c4348(0x302)](_0x14359a=>{const _0x1dc6c9=_0x2c4348,_0x54ca42=watchedSymbols[_0x1dc6c9(0x1d6)](_0x14359a);!_0x54ca42&&_0x139439[_0x1dc6c9(0x1a9)](_0x14359a);}),_0x12fce0[_0x2c4348(0x302)](_0x5dfc3d=>{const _0x4089ee=_0x2c4348,_0x591fcf=currentCoins[_0x4089ee(0x265)](_0x4fa257=>_0x4fa257[_0x4089ee(0x1e4)]==_0x5dfc3d);!_0x591fcf&&(_0x4e2de6=!![]);}),currentCoins[_0x2c4348(0x302)](_0x18d0a2=>{const _0x256e6c=_0x2c4348;if(_0x18d0a2[_0x256e6c(0x1e3)]!=config[_0x256e6c(0x258)]){const _0x4c139e=_0x12fce0[_0x256e6c(0x265)](_0x298d4d=>_0x298d4d==_0x18d0a2['symbol']);!_0x4c139e&&(_0x4e2de6=!![]);}}),_0x57cd00[_0x2c4348(0x226)][_0x2c4348(0x302)](_0x2dca68=>{const _0x416e17=_0x2c4348,_0x4cd08e=config[_0x416e17(0x226)]['find'](_0x535eda=>_0x535eda[_0x416e17(0x1e3)]==_0x2dca68[_0x416e17(0x1e3)]);if(_0x4cd08e&&_0x2dca68[_0x416e17(0x28b)]!=_0x4cd08e[_0x416e17(0x28b)])_0x1fce30=!![];});let _0x8fb2fd=dbConfig[_0x2c4348(0x1fb)](_0x2c4348(0x2d9))[_0x2c4348(0x265)]({'botID':botID})[_0x2c4348(0x2c6)]();_0x57cd00={..._0x57cd00,'apiKey':crypt[_0x2c4348(0x1e2)](secure[_0x2c4348(0x190)],_0x57cd00['apiKey'])[_0x2c4348(0x29a)],'apiSecret':crypt['decrypt'](secure[_0x2c4348(0x190)],_0x57cd00[_0x2c4348(0x2f6)])[_0x2c4348(0x29a)]};_0x57cd00[_0x2c4348(0x269)]&&(_0x57cd00[_0x2c4348(0x269)]=crypt['decrypt'](secure[_0x2c4348(0x190)],_0x57cd00[_0x2c4348(0x269)])[_0x2c4348(0x29a)]);let _0x4727d6=![];if(_0x8fb2fd){_0x57cd00[_0x2c4348(0x1ee)]==_0x2c4348(0x310)?_0x57cd00[_0x2c4348(0x1ee)]=config['apiKey']:_0x4727d6=!![];_0x57cd00[_0x2c4348(0x2f6)]==_0x2c4348(0x310)?_0x57cd00[_0x2c4348(0x2f6)]=config[_0x2c4348(0x2f6)]:_0x4727d6=!![];if(_0x57cd00['apiPassword']=='************')_0x57cd00[_0x2c4348(0x269)]=config['apiPassword'];else{if(_0x57cd00[_0x2c4348(0x269)])_0x4727d6=!![];}dbConfig[_0x2c4348(0x1fb)](_0x2c4348(0x2d9))['find']({'botID':botID})['assign'](_0x57cd00)['write']();}else dbConfig[_0x2c4348(0x1fb)](_0x2c4348(0x2d9))[_0x2c4348(0x1a9)](_0x57cd00)[_0x2c4348(0x198)](),_0x4727d6=!![],process[_0x2c4348(0x243)]({'status':_0x2c4348(0x2c5),'live':_0x2c4348(0x1b9)},_0x1ac8e4=>{});process[_0x2c4348(0x243)]({'botname':_0x57cd00[_0x2c4348(0x24d)]},_0x3a5a9a=>{}),updateBotManager(),config={..._0x57cd00},proxyEmit(_0x2c4348(0x1b7)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x4727d6)await reset(_0x139439,!![]);else _0x4e2de6||_0x1fce30?await reset(_0x139439,![]):getBalances();blockTransactionDetection=![],logger[_0x2c4348(0x28a)](_0x2c4348(0x1d5));}async function storeHeadless(_0x3ee15a){const _0x67c20e=_0x1e847e,_0x286a7e={...config,'headless':_0x3ee15a[_0x67c20e(0x279)]};let _0x41f9fb=dbConfig['get']('bot')[_0x67c20e(0x265)]({'botID':botID})['value']();_0x41f9fb&&dbConfig['get'](_0x67c20e(0x2d9))[_0x67c20e(0x265)]({'botID':botID})[_0x67c20e(0x2be)](_0x286a7e)['write'](),config={..._0x286a7e},updateBotManager(),proxyEmit(_0x67c20e(0x2aa),emittedConfiguration());}async function storeFiat(_0x3b4f70){const _0x2fe52a=_0x1e847e,_0x1c220b={...config,'fiat':_0x3b4f70};let _0x1f13f6=dbConfig[_0x2fe52a(0x1fb)](_0x2fe52a(0x2d9))['find']({'botID':botID})[_0x2fe52a(0x2c6)]();_0x1f13f6&&dbConfig['get'](_0x2fe52a(0x2d9))[_0x2fe52a(0x265)]({'botID':botID})[_0x2fe52a(0x2be)](_0x1c220b)[_0x2fe52a(0x198)](),config={..._0x1c220b},proxyEmit(_0x2fe52a(0x2aa),emittedConfiguration());}function resetHistory(){const _0x27a0b9=_0x1e847e;logger['full'](_0x27a0b9(0x2f1));try{if(fs['existsSync'](path[_0x27a0b9(0x217)](configpath,'bot-'+botID+_0x27a0b9(0x291))))fs['unlinkSync'](path[_0x27a0b9(0x217)](configpath,'bot-'+botID+_0x27a0b9(0x291)));if(fs[_0x27a0b9(0x2ef)](path[_0x27a0b9(0x217)](configpath,'bot-'+botID+_0x27a0b9(0x27b))))fs[_0x27a0b9(0x1ff)](path[_0x27a0b9(0x217)](configpath,_0x27a0b9(0x18a)+botID+_0x27a0b9(0x27b)));if(fs[_0x27a0b9(0x2ef)](path[_0x27a0b9(0x217)](configpath,_0x27a0b9(0x18a)+botID+_0x27a0b9(0x1ac))))fs['unlinkSync'](path['join'](configpath,_0x27a0b9(0x18a)+botID+'-results.json'));}catch(_0x3dbca1){if(_0x3dbca1)logger[_0x27a0b9(0x2cc)](_0x27a0b9(0x19f),_0x3dbca1);}const _0x95822c=getDate();let _0x216fac=[];currentCoins[_0x27a0b9(0x302)](_0x44fec3=>{const _0x3de498=_0x27a0b9;_0x216fac['push']({'coin':_0x44fec3[_0x3de498(0x1e3)],'number':_0x44fec3[_0x3de498(0x193)],'price':_0x44fec3[_0x3de498(0x1c0)]});});let _0x25e4e5=dbConfig['get'](_0x27a0b9(0x2d9))['find']({'botID':botID})[_0x27a0b9(0x2c6)]();_0x25e4e5&&(dbConfig[_0x27a0b9(0x1fb)](_0x27a0b9(0x2d9))[_0x27a0b9(0x265)]({'botID':botID})['assign']({'liquidity':[{'date':_0x95822c,'changes':_0x216fac}]})['write'](),config['liquidity']=[]),process['send']({'stop':_0x27a0b9(0x2f9)},_0x438529=>{});}function noslash(_0x14af9d){const _0x1c7b90=_0x1e847e;return _0x14af9d[_0x1c7b90(0x254)]('/','');}function updateHighestFee(_0x583afa){const _0xe61e99=_0x1e847e;if(_0x583afa['reverse']){let _0x4e8143={'filled':_0x583afa['filled']*_0x583afa['price'],'amount':_0x583afa[_0xe61e99(0x192)]*_0x583afa[_0xe61e99(0x282)],'side':_0x583afa['side']==_0xe61e99(0x1e0)?'buy':_0xe61e99(0x1e0),'price':0x1/_0x583afa[_0xe61e99(0x282)]};_0x583afa={..._0x583afa,..._0x4e8143};}const _0xf92b08=defaultFee*_0x583afa['filled']*_0x583afa[_0xe61e99(0x282)];lastFees[_0xe61e99(0x1b1)][_0xe61e99(0x200)]===0x14&&lastFees['recent20'][_0xe61e99(0x1ae)](),lastFees[_0xe61e99(0x1b1)]['push'](_0xf92b08),lastFees[_0xe61e99(0x1c4)]=Math['max'](...lastFees[_0xe61e99(0x1b1)]);}async function updateNumberCoinsCcxt(_0x3db330){const _0x4b49da=_0x1e847e;logger[_0x4b49da(0x28a)](_0x4b49da(0x25b)+_0x3db330[_0x4b49da(0x1e4)]+_0x4b49da(0x311)+_0x3db330[_0x4b49da(0x1df)]+_0x4b49da(0x311)+_0x3db330['id']);let _0x10f081=_0x3db330[_0x4b49da(0x1df)],_0x53c5c3=![];currentCoins[_0x4b49da(0x302)](_0x5b283e=>{const _0x1b7180=_0x4b49da;_0x5b283e[_0x1b7180(0x1e4)]==_0x3db330[_0x1b7180(0x1e4)]&&(_0x53c5c3=!![]);});if(!_0x53c5c3)return;const _0x3bae95=currentCoins[_0x4b49da(0x265)](_0x52a22b=>_0x52a22b['symbol']==_0x3db330[_0x4b49da(0x1e4)]),_0x29ab8d=_0x1499b9=>{const _0x43a480=_0x4b49da;if(_0x3bae95)_0x3bae95[_0x43a480(0x22b)]=_0x1499b9;};if(_0x10f081==_0x4b49da(0x2b9))_0x29ab8d(_0x4b49da(0x2b9));else{if(_0x10f081==_0x4b49da(0x208)){_0x29ab8d('canceled');const _0x333fdb=await getCoins();[currentCoins,currentCoinsAll]=_0x333fdb,await getOpenOrders(),handleOpenOrders();}else{if(_0x10f081==_0x4b49da(0x1ad)){logger[_0x4b49da(0x28a)](_0x4b49da(0x23d)+_0x3db330[_0x4b49da(0x1e4)]+'\x20|\x20'+_0x3db330[_0x4b49da(0x192)]+_0x4b49da(0x311)+_0x3db330['id']);let _0x1abc40=![];if(lastOrders)for(const _0x91b972 of lastOrders){const _0xfebc64=0xc8,_0x159993=0x1388;let _0x14e5aa=0x0;while(!_0x91b972['orderId']&&_0x14e5aa*_0xfebc64<_0x159993){_0x14e5aa++,await sleep(_0xfebc64);}if(_0x14e5aa>0x0)logger[_0x4b49da(0x28a)](_0x4b49da(0x218)+_0x14e5aa*_0xfebc64/0x3e8+_0x4b49da(0x22a));if(_0x91b972['orderId']==_0x3db330['id']){logger[_0x4b49da(0x28a)](_0x4b49da(0x2eb)+_0x3db330['id']),_0x1abc40=!![];if(_0x91b972[_0x4b49da(0x192)]==0x0){logger['debug']('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x3db330['id']);if(_0x3db330[_0x4b49da(0x222)])_0x91b972['price']=_0x3db330['average'];else{if(_0x3db330[_0x4b49da(0x282)])_0x91b972[_0x4b49da(0x282)]=_0x3db330[_0x4b49da(0x282)];else{}}_0x91b972[_0x4b49da(0x192)]=_0x3db330['filled'],updateHighestFee(_0x91b972),_0x29ab8d(_0x4b49da(0x192)),await validateOrders();if(lockOrders==ORDERS[_0x4b49da(0x1e5)]){const _0x2c4c46=await getCoins();[currentCoins,currentCoinsAll]=_0x2c4c46;}_0x91b972[_0x4b49da(0x2de)]={'currency':_0x3db330['fee']?_0x3db330[_0x4b49da(0x2de)][_0x4b49da(0x2da)]:null,'cost':_0x3db330[_0x4b49da(0x2de)]?_0x3db330[_0x4b49da(0x2de)][_0x4b49da(0x221)]:0x0},await updateCoinResults(_0x91b972);}}}if(!_0x1abc40){logger[_0x4b49da(0x28a)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x3db330['id']),_0x29ab8d(_0x4b49da(0x192));const _0xe0b200=await getCoins();[currentCoins,currentCoinsAll]=_0xe0b200,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x18a979=JSON['parse'](lastBalances[_0x4b49da(0x226)]);const _0x2a6fbf=_0x18a979[_0x4b49da(0x265)](_0x1c3238=>_0x1c3238[_0x4b49da(0x1e4)]==_0x3db330[_0x4b49da(0x1e4)]);if(_0x2a6fbf){if(_0x10f081=='open')_0x2a6fbf[_0x4b49da(0x22b)]=_0x2a6fbf['orderstatus']==_0x4b49da(0x192)?_0x4b49da(0x192):'open';else{if(_0x10f081=='canceled')_0x2a6fbf[_0x4b49da(0x22b)]=_0x2a6fbf[_0x4b49da(0x22b)]==_0x4b49da(0x192)?_0x4b49da(0x192):_0x4b49da(0x208);else _0x10f081=='closed'&&(_0x2a6fbf[_0x4b49da(0x22b)]=_0x4b49da(0x192));}}lastBalances={...lastBalances,'portfolio':JSON[_0x4b49da(0x2a2)](_0x18a979)},proxyEmit(_0x4b49da(0x2fd),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3ec001=_0x1e847e;await getOpenOrders();let _0x1382fe=![];currentCoins[_0x3ec001(0x302)](_0x195035=>{const _0x23e7ed=_0x3ec001;_0x1382fe=allOpenOrders['find'](_0x3b76cc=>_0x3b76cc[_0x23e7ed(0x1e4)]==_0x195035[_0x23e7ed(0x1e4)]),_0x195035[_0x23e7ed(0x22b)]=_0x1382fe?_0x23e7ed(0x2b9):_0x23e7ed(0x2fa);});}async function getCoins(_0x3e013a=!![],_0xec5332=config[_0x1e847e(0x258)]){const _0x382a0e=_0x1e847e;let _0xf3528f,_0x33120f=[],_0x506c2d=[],_0x5b990d=[],_0x3e74dc=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0xf3528f=await exchange[_0x382a0e(0x223)](),mybalances=_0xf3528f['total'];for(const [_0x4bb491,_0x315a54]of Object['entries'](mybalances)){_0x3e74dc[_0x382a0e(0x1a9)](_0x4bb491);}if(_0xec5332=='')for(const [_0x313642,_0xe5b3ef]of Object[_0x382a0e(0x2f8)](mybalances)){_0xe5b3ef!=0x0&&_0x506c2d[_0x382a0e(0x1a9)]({'coin':_0x313642});}else{let _0x2f68dd=![];for(const [_0x5e27f2,_0x3dbc30]of Object['entries'](mybalances)){if(_0x3e74dc[_0x382a0e(0x1d6)](_0x5e27f2)){const _0x3c69e8=config['portfolio'][_0x382a0e(0x265)](_0x41fb78=>_0x41fb78[_0x382a0e(0x1e3)]==_0x5e27f2),_0x3ce6cf=_0x5e27f2+'/'+_0xec5332,_0x271c33=_0xec5332+'/'+_0x5e27f2,_0x66591b=currentCoins['find'](_0x4d1db3=>_0x4d1db3[_0x382a0e(0x1e3)]==_0x5e27f2);_0x2f68dd=![];if((_0x3dbc30!=0x0||_0x3c69e8)&&(allSymbols[_0x382a0e(0x1d6)](_0x3ce6cf)||_0x5e27f2==_0xec5332))_0x5e27f2!=_0xec5332&&_0x33120f[_0x382a0e(0x1a9)](_0x3ce6cf),_0x506c2d[_0x382a0e(0x1a9)]({'coin':_0x5e27f2,'symbol':_0x3ce6cf,'reverse':![],'number':Math[_0x382a0e(0x234)](_0x3dbc30+(_0x3c69e8&&_0x3c69e8['offset']||0x0),0x0),'orderstatus':_0x66591b?_0x66591b[_0x382a0e(0x22b)]:_0x382a0e(0x2fa)});else(_0x3dbc30!=0x0||_0x3c69e8)&&allSymbols[_0x382a0e(0x1d6)](_0x271c33)&&(_0x5e27f2!=_0xec5332&&_0x33120f[_0x382a0e(0x1a9)](_0x271c33),_0x506c2d['push']({'coin':_0x5e27f2,'symbol':_0x271c33,'reverse':!![],'number':Math[_0x382a0e(0x234)](_0x3dbc30+(_0x3c69e8&&_0x3c69e8[_0x382a0e(0x28b)]||0x0),0x0),'orderstatus':_0x66591b?_0x66591b[_0x382a0e(0x22b)]:'none'}));}}}}catch(_0x22a230){if(!_0x3e013a)handleErrorNoStop(_0x22a230,_0x382a0e(0x2ad));else await handleError(_0x22a230,_0x382a0e(0x2ad));}return _0x5b990d=cloneDeep(_0x506c2d),_0x506c2d=_0x506c2d[_0x382a0e(0x1c7)](_0x2b89c7=>{const _0x10bf77=_0x382a0e,_0x320e5c=config[_0x10bf77(0x226)][_0x10bf77(0x265)](_0x81eadf=>_0x81eadf[_0x10bf77(0x1e3)]==_0x2b89c7[_0x10bf77(0x1e3)]);return _0x320e5c&&!_0x320e5c[_0x10bf77(0x2a8)];}),[_0x506c2d,_0x5b990d];}async function getCoinNumber(_0x150f72){const _0x1a4746=_0x1e847e;let _0x415e70;try{const _0x5930d5=await exchange[_0x1a4746(0x223)]();_0x415e70=_0x5930d5['total'][_0x150f72];}catch(_0x1a79e0){await handleError(_0x1a79e0,_0x1a4746(0x26b));}return _0x415e70;}async function getOpenOrders(){const _0x597a13=_0x1e847e;let _0x5b0b8c;allOpenOrders=[];try{for(const _0x117dde of config[_0x597a13(0x226)]){!_0x117dde[_0x597a13(0x2a8)]&&_0x117dde[_0x597a13(0x1e3)]!=config[_0x597a13(0x258)]&&(_0x5b0b8c=await exchange['fetchOpenOrders'](_0x117dde[_0x597a13(0x1e4)]),_0x5b0b8c[_0x597a13(0x200)]>0x0&&allOpenOrders[_0x597a13(0x1a9)](_0x5b0b8c[0x0]));}}catch(_0x2d3edd){await handleError(_0x2d3edd,_0x597a13(0x191));}}async function handleOpenOrders(_0xa2074b=0x0){const _0x431a18=_0x1e847e;allOpenOrders[_0x431a18(0x200)]==0x0&&lockOrders==ORDERS[_0x431a18(0x1e5)]&&allOrdersPlaced&&(_0xa2074b==0x0?(logger[_0x431a18(0x28a)](_0x431a18(0x1ba)),_0xa2074b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x431a18(0x28a)](_0x431a18(0x28f)),validateOrders(_0x431a18(0x2e7))));}async function testAPI(_0x177878){const _0x3211ea=_0x1e847e,_0x381a85=ccxt['pro'][_0x177878[_0x3211ea(0x1b4)][_0x3211ea(0x25f)]()],_0x55746d=new _0x381a85({'apiKey':_0x177878[_0x3211ea(0x1ee)],'secret':_0x177878[_0x3211ea(0x2f6)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3211ea(0x18d)}});if(_0x177878[_0x3211ea(0x269)])_0x55746d['password']=_0x177878[_0x3211ea(0x269)];try{await _0x55746d[_0x3211ea(0x1d3)]();}catch(_0x1629a8){throw _0x1629a8;}}function cloneDeep(_0x54dd13){const _0x397efd=_0x1e847e;return JSON[_0x397efd(0x29d)](JSON[_0x397efd(0x2a2)](_0x54dd13));}async function getPortfolio(_0x40a563){const _0x4a71d1=_0x1e847e;let _0x3217e1=[],_0x3197c2=[],_0x58b98d=[],_0x25384e;if(_0x40a563[_0x4a71d1(0x1ee)]!==_0x4a71d1(0x310)||_0x40a563[_0x4a71d1(0x2f6)]!==_0x4a71d1(0x310)||_0x40a563[_0x4a71d1(0x269)]&&_0x40a563[_0x4a71d1(0x269)]!=='************'){if(config['exchange']){if(_0x40a563[_0x4a71d1(0x1ee)]=='************')_0x40a563[_0x4a71d1(0x1ee)]=config[_0x4a71d1(0x1ee)];if(_0x40a563[_0x4a71d1(0x2f6)]==_0x4a71d1(0x310))_0x40a563[_0x4a71d1(0x2f6)]=config[_0x4a71d1(0x2f6)];if(_0x40a563['apiPassword']==_0x4a71d1(0x310))_0x40a563[_0x4a71d1(0x269)]=config[_0x4a71d1(0x269)];try{await testAPI(_0x40a563);}catch(_0x4bad40){if(_0x4bad40['toString']()['includes'](_0x4a71d1(0x1da))){logger[_0x4a71d1(0x28a)]('Invalid\x20API\x20key\x20or\x20secret\x20entered'),proxyEmit(_0x4a71d1(0x226),![]);return;}else{handleError(_0x4bad40,'getPortfolio(0)');return;}}}await initExchange(_0x40a563[_0x4a71d1(0x1b4)],_0x40a563['apiKey'],_0x40a563[_0x4a71d1(0x2f6)],_0x40a563[_0x4a71d1(0x269)]);try{await loadSymbols(_0x40a563[_0x4a71d1(0x1b4)],!![]);}catch(_0x28d852){if(_0x28d852[_0x4a71d1(0x304)]()[_0x4a71d1(0x1d6)](_0x4a71d1(0x1da))){proxyEmit('portfolio',![]);return;}else{handleError(_0x28d852,_0x4a71d1(0x241));return;}}const _0xe905be=await getCoins(![],_0x40a563[_0x4a71d1(0x258)]);_0x58b98d=cloneDeep(_0xe905be[0x1]);}else _0x58b98d=cloneDeep(currentCoinsAll);if(_0x40a563[_0x4a71d1(0x258)]=='')proxyEmit(_0x4a71d1(0x226),_0x58b98d);else{_0x58b98d['forEach'](_0x5e6b1b=>{const _0x2f09fa=_0x4a71d1;if(_0x5e6b1b['coin']!=_0x40a563[_0x2f09fa(0x258)])_0x3217e1[_0x2f09fa(0x1a9)](_0x5e6b1b['symbol']);});try{_0x3197c2=await exchange[_0x4a71d1(0x295)](_0x3217e1);}catch(_0x204f33){if(_0x204f33['toString']()[_0x4a71d1(0x1d6)](_0x4a71d1(0x1da))){proxyEmit(_0x4a71d1(0x226),![]);return;}else{handleError(_0x204f33,_0x4a71d1(0x220));return;}}_0x58b98d[_0x4a71d1(0x302)](_0x458e62=>{const _0x3a0cda=_0x4a71d1;_0x458e62[_0x3a0cda(0x1e3)]!=_0x40a563['basecoin']?_0x25384e=_0x458e62[_0x3a0cda(0x23c)]?0x1/_0x3197c2[_0x458e62[_0x3a0cda(0x1e4)]]['last']:_0x3197c2[_0x458e62['symbol']][_0x3a0cda(0x1c0)]:_0x25384e=0x1,_0x458e62[_0x3a0cda(0x282)]=formatResult(_0x25384e,0x8);}),proxyEmit(_0x4a71d1(0x226),_0x58b98d);}}function truncateTradeAmount(_0x1c813e,_0x38a7d4){const _0x22a6cc=_0x1e847e;let _0x219ef7=0x0;try{_0x219ef7=exchange[_0x22a6cc(0x1fc)](_0x1c813e,_0x38a7d4);}catch(_0x1da74e){}return _0x219ef7;}function checkMinimums(_0x33ce83){const _0x272686=_0x1e847e;let _0x2b5afe=!![];const _0x53d863=!_0x33ce83[_0x272686(0x23c)]?markets[_0x33ce83[_0x272686(0x1e4)]][_0x272686(0x2d7)][_0x272686(0x255)]['min']:markets[_0x33ce83['symbol']]['limits'][_0x272686(0x221)]['min'],_0x4c1e86=!_0x33ce83[_0x272686(0x23c)]?markets[_0x33ce83[_0x272686(0x1e4)]][_0x272686(0x2d7)][_0x272686(0x221)][_0x272686(0x2e0)]:markets[_0x33ce83['symbol']][_0x272686(0x2d7)][_0x272686(0x255)][_0x272686(0x2e0)],_0x274c07=truncateTradeAmount(_0x33ce83[_0x272686(0x1e4)],_0x33ce83[_0x272686(0x25a)]);_0x33ce83['trade']=_0x274c07;if(Math[_0x272686(0x250)](_0x274c07)<_0x53d863)_0x2b5afe=![];if(Math[_0x272686(0x250)](_0x274c07)*_0x33ce83[_0x272686(0x1c0)]<_0x4c1e86)_0x2b5afe=![];if(_0x33ce83[_0x272686(0x2bb)]==_0x272686(0x1e0)){let _0x5b2130=config[_0x272686(0x226)][_0x272686(0x265)](_0x25b3a8=>_0x25b3a8[_0x272686(0x1e3)]==_0x33ce83['coin']);if(_0x5b2130[_0x272686(0x28b)]>0x0){if(Math['abs'](_0x274c07)>_0x33ce83[_0x272686(0x193)]-_0x5b2130[_0x272686(0x28b)])_0x2b5afe=![];}else{if(Math[_0x272686(0x250)](_0x274c07)>_0x33ce83[_0x272686(0x193)])_0x2b5afe=![];}}if(_0x33ce83[_0x272686(0x2bb)]==_0x272686(0x30b)){let _0x10cfd7=config[_0x272686(0x226)][_0x272686(0x265)](_0x2cae6c=>_0x2cae6c[_0x272686(0x1e3)]==config[_0x272686(0x258)]),_0x54fed0=currentCoins['find'](_0x547d2b=>_0x547d2b[_0x272686(0x1e3)]==config[_0x272686(0x258)]);if(_0x10cfd7[_0x272686(0x28b)]>0x0){if(Math['abs'](_0x274c07)*_0x33ce83['last']>_0x54fed0['number']-_0x10cfd7['offset'])_0x2b5afe=![];}else{if(Math[_0x272686(0x250)](_0x274c07)*_0x33ce83[_0x272686(0x1c0)]>_0x54fed0[_0x272686(0x193)])_0x2b5afe=![];}}return _0x2b5afe;}async function getBalances(_0x3187d4=!![]){const _0x493d3a=_0x1e847e;let _0x2dd1fb=0x0,_0x57d055;const _0xdbf6b=config['threshold'];if(config['headless']&&config[_0x493d3a(0x1cb)]<0x0)await validate24hChanges();currentCoins[_0x493d3a(0x302)](_0x4edf1e=>{const _0x1e5b83=_0x493d3a;if(_0x4edf1e[_0x1e5b83(0x1e3)]!=config['basecoin']){let _0x152537=global[_0x1e5b83(0x271)][noslash(_0x4edf1e[_0x1e5b83(0x1e4)])];_0x57d055=_0x4edf1e[_0x1e5b83(0x23c)]?0x1/_0x152537:_0x152537;}else _0x57d055=0x1;let _0x4d0c82=_0x4edf1e[_0x1e5b83(0x193)]*_0x57d055;_0x2dd1fb+=_0x4d0c82,_0x4edf1e[_0x1e5b83(0x1c0)]=formatResult(Number(_0x57d055),0x8),_0x4edf1e[_0x1e5b83(0x2c6)]=_0x4d0c82;}),currentCoins[_0x493d3a(0x302)](_0x59c227=>{const _0x3204f2=_0x493d3a;let _0x4f8015=config[_0x3204f2(0x226)][_0x3204f2(0x265)](_0x2feada=>_0x2feada['coin']==_0x59c227['coin']),_0x390236=Number(_0x4f8015['distribution']),_0x51b431=_0x59c227[_0x3204f2(0x2c6)]/_0x2dd1fb*0x64,_0x6dbe=_0x390236*_0x2dd1fb/0x64/_0x59c227['last']-_0x59c227[_0x3204f2(0x193)];_0x59c227[_0x3204f2(0x1ec)]=formatResult(_0x51b431,0x3),_0x59c227['target']=formatResult(_0x390236,0x3),_0x59c227[_0x3204f2(0x25a)]=formatResult(_0x6dbe,0x8),_0x59c227[_0x3204f2(0x2bb)]='',_0x59c227[_0x3204f2(0x259)]=![];if(_0x59c227[_0x3204f2(0x1e3)]!=config[_0x3204f2(0x258)]){if(_0x59c227[_0x3204f2(0x1ec)]>_0x390236)_0x59c227[_0x3204f2(0x2bb)]='sell',_0x59c227[_0x3204f2(0x259)]=checkMinimums(_0x59c227);else _0x59c227[_0x3204f2(0x1ec)]<_0x390236&&(_0x59c227[_0x3204f2(0x2bb)]='buy',_0x59c227[_0x3204f2(0x259)]=checkMinimums(_0x59c227));}_0x59c227[_0x3204f2(0x240)]=_0x59c227[_0x3204f2(0x1ec)]/_0x59c227[_0x3204f2(0x29c)]-0x1;if(_0x59c227[_0x3204f2(0x22b)]=='filled'||_0x59c227[_0x3204f2(0x22b)]=='canceled')_0x59c227[_0x3204f2(0x22b)]=_0x3204f2(0x2fa);}),currentCoins[_0x493d3a(0x24b)]((_0x202cc1,_0x2996f1)=>_0x202cc1[_0x493d3a(0x240)]<_0x2996f1['delta']?0x1:_0x2996f1[_0x493d3a(0x240)]<_0x202cc1[_0x493d3a(0x240)]?-0x1:0x0);const _0x1ac7b5=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1ac7b5[_0x493d3a(0x244)],'usd':_0x1ac7b5[_0x493d3a(0x19c)],'portfolio':JSON[_0x493d3a(0x2a2)](currentCoins),'threshold':_0xdbf6b},proxyEmit(_0x493d3a(0x2fd),{'serverversion':serverversion,'balances':lastBalances});if(_0x3187d4){if(config[_0x493d3a(0x279)])headlessMode({'portfolio':currentCoins,'threshold':_0xdbf6b});else{if(lockOrders==ORDERS[_0x493d3a(0x252)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0xdbf6b});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x402f48=getNormalizedPerformance();getStartingBalances(_0x402f48),emitPerformance(_0x402f48);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x481032=getNormalizedPerformance();emitPerformance(_0x481032),getStartingBalances(_0x481032),logger[_0x493d3a(0x28a)](_0x493d3a(0x2af));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x376225=_0x1e847e;if(!lastBalances)return;let _0x454139=[],_0x174fb3,_0x4f36c0=JSON[_0x376225(0x29d)](lastBalances[_0x376225(0x226)]);_0x4f36c0['sort']((_0x197748,_0x434725)=>_0x197748[_0x376225(0x1e3)]>_0x434725['coin']?0x1:_0x434725[_0x376225(0x1e3)]>_0x197748[_0x376225(0x1e3)]?-0x1:0x0),_0x4f36c0['forEach'](_0x4044f4=>{const _0x33110e=_0x376225;let _0x2159a4={'coin':_0x4044f4[_0x33110e(0x1e3)],'number':_0x4044f4['number'],'price':_0x4044f4[_0x33110e(0x1c0)]};_0x454139['push'](_0x2159a4);});const _0xcf1465=await getFiat();_0x174fb3={'date':lastBalances[_0x376225(0x2b4)][_0x376225(0x20a)]('\x20')[0x0],'eur':_0xcf1465[_0x376225(0x244)],'usd':_0xcf1465[_0x376225(0x19c)],'coins':_0x454139};let _0x58af0b=dbPerformance[_0x376225(0x1fb)]('data')['find']({'date':_0x174fb3[_0x376225(0x298)]})[_0x376225(0x2c6)]();_0x58af0b?_0x174fb3[_0x376225(0x298)]!=config[_0x376225(0x1cc)]&&dbPerformance['get'](_0x376225(0x1fd))[_0x376225(0x265)]({'date':_0x174fb3[_0x376225(0x298)]})[_0x376225(0x2be)](_0x174fb3)['write']():dbPerformance[_0x376225(0x1fb)](_0x376225(0x1fd))['push'](_0x174fb3)[_0x376225(0x198)](),lastPerformanceStored=getHour();}function _0xb17a(){const _0x2fd4ed=['1\x20-\x20Validate\x20orders:\x20','remainingSymbols','apiPassword','Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details','getCoinNumber()','42006DSDZWe','market','change','sendMetricsTelegram','Binance','ticker','Executing\x20exchange\x20reload','bid','\x20exchange','BNB/','settings','timeshift','Crypt','headless','Order\x20filled:\x20','-performance.json','Uncaught\x20NetworkError:','balancing\x20resumes\x20when\x20cooldown\x20ends','timeout','net-fiat','function','Order\x20is\x20invalid:\x20','price','toggleBotMode','initclient','273vDVOvq','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','getSeconds','storeHeadless','***','debug','offset','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','.json','type','2\x20-\x20Handled\x20open\x20orders','API-key\x20format\x20invalid','-events.json','balancing\x20resumed','88mgihti','fees','fetchTickers','bb-settings.json','Order(s)\x20not\x20validated\x20after\x20','date','args','message','format','target','parse','writeFile','isEqual','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','stringify','bb-secure.json','util','InvalidNonce','2.6.0','defaults','excluded','password','configuration','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20minutes\x20-\x20','getCoins()','threshold','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','argv','9737703oQXyYc','event-history','Saving\x20configuration','time','success','path','net-basecoin','2.5.0','open','recreate','side','milliseconds','datetime','assign','cancelOrders()','createOrder','padStart','event','<pre>',':\x20timer\x20>','enabled','value','startprice','TUSD','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Unfilled\x20order(s)\x20canceled\x20after\x20','full','exchange\x20not\x20reloaded','(((.+)+)+)+$','remove','watchTransactions','breakeven','buys','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','fetchClosedOrders','yyyy/MM/dd','cancelOrder','limits','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','bot','currency','Limit\x20(high-margin)','./config/','leftTxt','fee','random','min','constructor','/backup/','final','must\x20be\x20greater\x20than\x20minimum\x20amount','startnumber','cooldown','no\x20open\x20orders','Order\x20amount\x20is\x20invalid:\x20','ccxt','<b>','2\x20-\x20FILLED\x20known\x20order:\x20','secure','./logs/','BUSD','existsSync','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Resetting\x20bot\x20history','orderId','red_yellow_blue','rightTxt','Cooldown\x20ended\x20-\x20balancing\x20resumed','apiSecret','progress','entries','restart','none','search','\x20>\x20','balances','initial','-------------------------------\x0a','basecoinvalue','2\x20-\x20Validate\x20orders:\x20','forEach','storeConfiguration','toString','Resetting\x20coin\x20results:\x20','DDoSProtection','emojibuy','getHours','fetchOpenOrders','ongoing','buy','limit','670146NreuSO','log','padEnd','************','\x20|\x20','%\x20(','BNB','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','set','\x20value','Fee\x20discount\x20refund\x20detected:\x20','fiat','active','bot-','exec','USDP','spot','17232wTonuC','starting-balance-','privateKey','getOpenOrders()','filled','number','getDate','differenceInSeconds','openOrders','round','write','OrderNotFound','floor','autoliquidity','usd','showname','001','Error\x20while\x20deleting\x20files:\x20','lowdb','Initiating\x20exchange\x20reload','botID','limit-low','deleteHistoryAlerts','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','exchange\x20reloaded','Executed\x20','/output-000.log','push','page','BTC','-results.json','closed','shift','1538215MgJpHC','ExchangeError','recent20','ordertype','sortBy','exchange','changes','getFullYear','configuration-stored','\x20orders\x20in\x20less\x20than\x20','running','1\x20-\x20Handle\x20open\x20orders','no\x20additional\x20symbols','Exchange','toFixed','InsufficientFunds','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','last','Uncaught\x20Exception:','getMinutes','fromCodePoint','highest','ExchangeNotAvailable','slice','filter','removed','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','USD','change24h','startdate','performance','Avoiding\x20continuous\x20order\x20attempts','UNLOCKING','75VtUaXW','version','USDT','loadMarkets','\x20change','Transaction\x20detection\x20unblocked','includes','keys','getMonth','<b>Bot\x20','AuthenticationError','Bot\x20','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','\x20portfolio:</b>\x20\x0a\x0a','placeOrder()','status','sell','concat','decrypt','coin','symbol','LOCKED','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','19576Ksxplz','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20Error\x20details:\x20','mkdirSync','percentage','distribution','watchTrades','apiKey','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','1\x20-\x20Unlock\x20orders','logs','\x20has\x20a\x2024h\x20drop\x20of\x20','starting-balances',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20lock\x20orders:\x20','watchOrders','getTime','indexOf','cancel','EUR','get','amountToPrecision','data','MIN_NOTIONAL','unlinkSync','length','Net\x20effect','test','order','\x20hour','customId','exchanges','\x20|\x20Custom\x20ID:\x20','canceled','Reset\x20|\x20','split','RequestTimeout','ETH','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Portfolio\x20change\x20detected:\x20','close','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','-config.json','timestamp',':\x20Bot\x20','Pausing\x20for\x20','2.3.5','emojisell','join','Waited\x20','yargs/yargs','onepagemode','additional\x20symbols\x20','limit-high','createWriteStream','RateLimitExceeded','parseISO','getPortfolio(2)','cost','average','fetchBalance','resetHistory','sells','portfolio','pro','Limit\x20(low-margin)','add','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','orderstatus','Transaction\x20detection\x20blocked','hybrid-crypto-js','\x20order:\x20','splice','has','uncaughtException','/EUR','fetchTicker','max','Failed\x20to\x20load\x20coin\x20data\x20for\x20','getStartingBalances','showConfig','No\x20more\x20open\x20orders\x20-\x20','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','added','1281wbDULK','reverse','1\x20-\x20FILLED:\x20','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','error','delta','getPortfolio(1)','cloneDeep','send','eur','warning','liquidity','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','ask','Error:\x20Invalid\x20argument\x20','sendPortfolioTelegram','sort','kill','botname','ORDERS.UNLOCKING','ID:\x20','abs','realized','UNLOCKED','InvalidOrder','replace','amount','yyyy-MM-dd\x27T\x27HH:mm:ss','3799030MaDPuF','basecoin','valid','trade','0\x20-\x20EXECUTION:\x20','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Market','toUpperCase','toLowerCase','sha256','ORDERS.LOCKED','coins','\x20:\x20','colorscheme','find','bots'];_0xb17a=function(){return _0x2fd4ed;};return _0xb17a();}function getNormalizedPerformance(){const _0x518394=_0x1e847e;let _0x21f1b0=[];if(dbPerformance[_0x518394(0x230)]('data')['value']()){let _0x5badf3=dbPerformance[_0x518394(0x1fb)](_0x518394(0x1fd))['cloneDeep']()[_0x518394(0x1c7)](_0x2c1d7a=>{const _0x200f9b=_0x518394;if(_0x2c1d7a[_0x200f9b(0x262)][_0x200f9b(0x200)]==0x0)return![];else return!![];})[_0x518394(0x1b3)](_0x518394(0x298))[_0x518394(0x2c6)](),_0x9d0b9e=[...config['liquidity']];_0x9d0b9e[_0x518394(0x24b)]((_0x54a783,_0x48f00d)=>_0x54a783[_0x518394(0x298)]>_0x48f00d[_0x518394(0x298)]?-0x1:_0x48f00d[_0x518394(0x298)]>_0x54a783[_0x518394(0x298)]?0x1:0x0);let _0x427515=0x1,_0x1326ae=[],_0x1b127d=0x0;_0x5badf3[_0x518394(0x1c6)]()[_0x518394(0x23c)]()['forEach']((_0x12fc2f,_0x3212be)=>{const _0x5b361e=_0x518394;if(_0x9d0b9e[_0x1b127d]){if(_0x5badf3[_0x5badf3[_0x5b361e(0x200)]-_0x3212be]&&_0x9d0b9e[_0x1b127d][_0x5b361e(0x298)]==_0x5badf3[_0x5badf3['length']-_0x3212be][_0x5b361e(0x298)]){if(_0x3212be<_0x5badf3['length']){let _0x11cab7=0x0,_0x1ca56d=0x0;_0x5badf3[_0x5badf3[_0x5b361e(0x200)]-_0x3212be][_0x5b361e(0x262)][_0x5b361e(0x302)](_0xa23ea3=>{const _0x504e8d=_0x5b361e;_0x1ca56d+=_0xa23ea3['number']*_0xa23ea3[_0x504e8d(0x282)];}),_0x9d0b9e[_0x1b127d]['changes'][_0x5b361e(0x302)](_0x101543=>{const _0x29db52=_0x5b361e;_0x11cab7+=_0x101543[_0x29db52(0x193)]*_0x101543[_0x29db52(0x282)];}),_0x427515*=_0x11cab7/(_0x1ca56d-_0x11cab7)+0x1;}_0x1b127d++;}}let _0x554cf8=0x0;_0x12fc2f['coins'][_0x5b361e(0x302)](_0x5d5600=>{const _0x40f9d7=_0x5b361e;_0x554cf8+=_0x5d5600[_0x40f9d7(0x193)]*_0x5d5600[_0x40f9d7(0x282)];}),_0x1326ae[_0x5badf3['length']-_0x3212be-0x1]=_0x554cf8*(_0x427515-0x1);});let _0x549519=[];_0x9d0b9e=[...config[_0x518394(0x246)]]||[];let _0x1c5784=0x0;_0x1b127d=0x0,_0x5badf3[_0x518394(0x302)]((_0x4416a2,_0x2063f2)=>{const _0x5ee949=_0x518394;if(_0x9d0b9e[_0x1b127d]){const _0x31f718=fns[_0x5ee949(0x29d)](_0x9d0b9e[_0x1b127d][_0x5ee949(0x298)],'yyyy/MM/dd',new Date()),_0x18b83d=fns[_0x5ee949(0x29d)](_0x4416a2['date'],_0x5ee949(0x2d5),new Date());if(fns[_0x5ee949(0x29f)](_0x31f718,_0x18b83d)){let _0x4c9633=0x0;_0x9d0b9e[_0x1b127d]['changes'][_0x5ee949(0x302)](_0x13e385=>{const _0x7f49ce=_0x5ee949;!_0x549519[_0x13e385[_0x7f49ce(0x1e3)]]?_0x549519[_0x13e385[_0x7f49ce(0x1e3)]]=_0x13e385['number']:(_0x4c9633=_0x549519[_0x13e385[_0x7f49ce(0x1e3)]],_0x549519[_0x13e385[_0x7f49ce(0x1e3)]]+=_0x13e385['number']);const _0xa6c807=_0x4416a2[_0x7f49ce(0x262)][_0x7f49ce(0x265)](_0x1cd571=>_0x1cd571[_0x7f49ce(0x1e3)]==_0x13e385['coin']);(!_0xa6c807||_0xa6c807[_0x7f49ce(0x193)]==0x0)&&(_0x1c5784+=(-_0x13e385[_0x7f49ce(0x193)]-_0x4c9633)*_0x13e385[_0x7f49ce(0x282)]);}),_0x1b127d++;}}_0x4416a2['coins'][_0x5ee949(0x302)]((_0x35af3e,_0x322070)=>{const _0x4a85ca=_0x5ee949;_0x549519[_0x35af3e[_0x4a85ca(0x1e3)]]&&(_0x35af3e[_0x4a85ca(0x2fe)]=_0x549519[_0x35af3e[_0x4a85ca(0x1e3)]]);}),_0x21f1b0[_0x5ee949(0x1a9)]({'date':_0x4416a2[_0x5ee949(0x298)],'eur':_0x4416a2[_0x5ee949(0x244)],'usd':_0x4416a2[_0x5ee949(0x19c)],'offset':_0x1326ae[_0x2063f2],'netoffset':_0x1c5784,'coins':_0x4416a2[_0x5ee949(0x262)]});});}return _0x21f1b0;}function emitPerformance(_0x5a34c4){const _0x1c7475=_0x1e847e;_0x5a34c4[_0x1c7475(0x200)]!==0x0?(proxyEmit(_0x1c7475(0x1cd),_0x5a34c4),lastPerformanceEmitted=getDate()):proxyEmit('performance',[]);}function getPerf(_0x5195a4,_0x2a64b5){const _0x3c4474=_0x1e847e;let _0x1ffbf1=0x0,_0x16e808=0x0,_0xce6e70=0x0;_0x5195a4[_0x3c4474(0x262)]['forEach'](_0x137150=>{const _0xff9e78=_0x3c4474;_0x1ffbf1+=_0x137150[_0xff9e78(0x193)]*_0x137150[_0xff9e78(0x282)];});_0x2a64b5&&(_0x1ffbf1+=_0x5195a4[_0x3c4474(0x28b)]);if(config[_0x3c4474(0x258)]==='BTC'||config[_0x3c4474(0x258)]===_0x3c4474(0x20c))_0x16e808=_0x1ffbf1*_0x5195a4[_0x3c4474(0x244)],_0xce6e70=_0x1ffbf1*_0x5195a4[_0x3c4474(0x19c)];else{if(usdBasecoins[_0x3c4474(0x1d6)](config[_0x3c4474(0x258)]))_0x16e808=_0x1ffbf1*_0x5195a4[_0x3c4474(0x244)]/_0x5195a4[_0x3c4474(0x19c)],_0xce6e70=_0x1ffbf1;else config[_0x3c4474(0x258)]===_0x3c4474(0x1fa)&&(_0x16e808=_0x1ffbf1,_0xce6e70=_0x1ffbf1*_0x5195a4[_0x3c4474(0x19c)]/_0x5195a4['eur']);}return[_0x1ffbf1,_0x16e808,_0xce6e70];}function getKPIs(_0x4c34c7,_0x5dd021=_0x1e847e(0x1fa)){const _0x3de1de=_0x1e847e,_0x4e80f6=config[_0x3de1de(0x258)],_0x303357=lastBalances,_0x6a7a33=currentCoins,_0x57bee3=getNormalizedPerformance(),_0x44c347=_0x4c34c7==='basecoin'?_0x4e80f6:_0x4c34c7===_0x3de1de(0x318)||_0x4c34c7===_0x3de1de(0x27f)?_0x5dd021:'Net\x20'+_0x4e80f6,_0x230a75=_0x4c34c7===_0x3de1de(0x2b7)?_0x3de1de(0x201):_0x4c34c7===_0x3de1de(0x27f)?_0x3de1de(0x201):_0x44c347+_0x3de1de(0x316),_0x4e1e0c=_0x4c34c7===_0x3de1de(0x2b7)||_0x4c34c7===_0x3de1de(0x27f)?_0x3de1de(0x201):_0x44c347+_0x3de1de(0x1d4);let _0x40df2c=0x0;_0x6a7a33[_0x3de1de(0x302)](_0x274f86=>{const _0x35af4d=_0x3de1de;_0x40df2c+=_0x274f86['number']*_0x274f86[_0x35af4d(0x1c0)];});if(_0x4c34c7===_0x3de1de(0x318)||_0x4c34c7===_0x3de1de(0x27f)){if(_0x4e80f6==='BTC'||_0x4e80f6===_0x3de1de(0x20c))_0x40df2c=_0x40df2c*(_0x5dd021===_0x3de1de(0x1fa)?_0x303357[_0x3de1de(0x244)]:_0x303357['usd']);else{if(usdBasecoins[_0x3de1de(0x1d6)](_0x4e80f6))_0x40df2c=_0x40df2c*(_0x5dd021===_0x3de1de(0x1fa)?_0x303357[_0x3de1de(0x244)]/_0x303357['usd']:0x1);else _0x4e80f6===_0x3de1de(0x1fa)&&(_0x40df2c=_0x40df2c*(_0x5dd021===_0x3de1de(0x1fa)?0x1:_0x303357[_0x3de1de(0x19c)]/_0x303357[_0x3de1de(0x244)]));}}let _0x534e9b;if(_0x40df2c!==0x0){if(_0x4c34c7===_0x3de1de(0x258))_0x534e9b=(_0x40df2c/startingBalances[_0x3de1de(0x258)]-0x1)*0x64;else{if(_0x5dd021===_0x3de1de(0x1fa))_0x534e9b=(_0x40df2c/startingBalances[_0x3de1de(0x244)]-0x1)*0x64;else _0x534e9b=(_0x40df2c/startingBalances['usd']-0x1)*0x64;}let _0x3762d5=0x0;if(startingBalances[_0x3de1de(0x262)])_0x6a7a33[_0x3de1de(0x302)](_0x416029=>{const _0x264b79=_0x3de1de;let _0x572d35=startingBalances['coins'][_0x264b79(0x265)](_0x1ad3de=>_0x1ad3de[_0x264b79(0x1e3)]===_0x416029[_0x264b79(0x1e3)]);if(_0x572d35&&_0x572d35[_0x264b79(0x1e3)]&&_0x416029[_0x264b79(0x193)]!==0x0)_0x3762d5+=_0x572d35['number']*_0x416029[_0x264b79(0x1c0)];});let _0x2e3166=0x0;if(_0x57bee3['length']!==0x0){let _0xa9ccb2=_0x57bee3[_0x57bee3[_0x3de1de(0x200)]-0x1];_0x2e3166=_0xa9ccb2['netoffset'];}_0x3762d5-=_0x2e3166;_0x4c34c7===_0x3de1de(0x2b7)&&(_0x534e9b=(_0x40df2c-_0x3762d5)/startingBalances[_0x3de1de(0x258)]*0x64,_0x40df2c=_0x40df2c-_0x3762d5);if(_0x4c34c7===_0x3de1de(0x27f)){let _0x229d0f=_0x5dd021===_0x3de1de(0x1fa)?startingBalances['eur']:startingBalances[_0x3de1de(0x19c)];if(_0x4e80f6==='BTC'||_0x4e80f6===_0x3de1de(0x20c))_0x3762d5=_0x5dd021==='EUR'?_0x3762d5*_0x303357['eur']:_0x3762d5*_0x303357['usd'];else{if(usdBasecoins[_0x3de1de(0x1d6)](_0x4e80f6))_0x3762d5=_0x5dd021===_0x3de1de(0x1fa)?_0x3762d5*_0x303357[_0x3de1de(0x244)]/_0x303357[_0x3de1de(0x19c)]:_0x3762d5;else _0x4e80f6===_0x3de1de(0x1fa)&&(_0x3762d5=_0x5dd021===_0x3de1de(0x1fa)?_0x3762d5:_0x3762d5*_0x303357['usd']/_0x303357['eur']);}_0x534e9b=(_0x40df2c-_0x3762d5)/_0x229d0f*0x64,_0x40df2c=_0x40df2c-_0x3762d5;}if(_0x534e9b){if(_0x534e9b<0x64)_0x534e9b=_0x534e9b[_0x3de1de(0x1bd)](0x2);else{if(_0x534e9b<0x3e8)_0x534e9b=_0x534e9b[_0x3de1de(0x1bd)](0x1);else _0x534e9b=_0x534e9b['toFixed'](0x0);}}else _0x534e9b=Number('0')[_0x3de1de(0x1bd)](0x2);if(_0x40df2c){if(Math['abs'](_0x40df2c)<0.000001)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x2);else{if(Math[_0x3de1de(0x250)](_0x40df2c)<0.1)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x6);else{if(Math['abs'](_0x40df2c)<0x1)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x5);else{if(Math[_0x3de1de(0x250)](_0x40df2c)<0xa)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x4);else{if(Math[_0x3de1de(0x250)](_0x40df2c)<0x64)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x3);else{if(Math[_0x3de1de(0x250)](_0x40df2c)<0x3e8)_0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x2);else _0x40df2c=_0x40df2c[_0x3de1de(0x1bd)](0x2);}}}}}}else _0x40df2c=Number('0')[_0x3de1de(0x1bd)](0x2);}else _0x534e9b=Number('0')[_0x3de1de(0x1bd)](0x2);return{'value':_0x40df2c,'change':_0x534e9b,'leftTxt':_0x230a75,'rightTxt':_0x4e1e0c};}async function getStartingBalances(_0x7b1e0a,_0xed4456=!![]){const _0x77832=_0x1e847e;if(_0x7b1e0a[_0x77832(0x200)]!==0x0){const [_0x430d25,_0xea735b,_0x14139a]=getPerf(_0x7b1e0a[0x0],!![]);let _0x87a4c=[];config[_0x77832(0x226)][_0x77832(0x302)](_0x5dcb24=>{const _0x2c4706=_0x77832;let _0x1626f0=0x0,_0x58912e;config[_0x2c4706(0x246)][_0x2c4706(0x302)](_0x13ca74=>{const _0x24bf3b=_0x2c4706;let _0xd711f8=_0x13ca74['changes'][_0x24bf3b(0x265)](_0x84829d=>_0x84829d[_0x24bf3b(0x1e3)]==_0x5dcb24[_0x24bf3b(0x1e3)]);if(_0xd711f8){_0x1626f0+=_0xd711f8[_0x24bf3b(0x193)];if(!_0x58912e)_0x58912e=_0xd711f8[_0x24bf3b(0x282)];}}),_0x87a4c['push']({'coin':_0x5dcb24[_0x2c4706(0x1e3)],'number':_0x1626f0,'initialprice':_0x58912e});});const _0x90e269={'basecoin':_0x430d25,'eur':_0xea735b,'usd':_0x14139a,'coins':_0x87a4c};if(_0xed4456)proxyEmit(_0x77832(0x1f3),_0x90e269);startingBalances=_0x90e269;}}function headlessMode(_0x469a88){const _0x4e4de8=_0x1e847e;let _0x3ef7f8=_0x469a88[_0x4e4de8(0x226)],_0x344323=_0x469a88[_0x4e4de8(0x2ae)],_0x1bf389=[];for(let _0x5a189f of _0x3ef7f8){if(_0x5a189f[_0x4e4de8(0x1e3)]!=config['basecoin']){if(_0x5a189f[_0x4e4de8(0x240)]>=_0x344323/0x64){if(_0x5a189f['valid'])_0x1bf389[_0x4e4de8(0x1a9)](_0x5a189f);}else{if(_0x5a189f['delta']<=-_0x344323/0x64){if(_0x5a189f[_0x4e4de8(0x259)])_0x1bf389['push'](_0x5a189f);}}}}_0x1bf389[_0x4e4de8(0x200)]>0x0&&placeOrder(_0x1bf389);}function notifyBalance(_0x215ffe){const _0x56c90d=_0x1e847e;let _0x18c67c=_0x215ffe[_0x56c90d(0x226)],_0xf9db4=_0x215ffe[_0x56c90d(0x2ae)],_0x5a0fb1=[];for(let _0x18d74 of _0x18c67c){if(_0x18d74['coin']!=config[_0x56c90d(0x258)]){if(_0x18d74[_0x56c90d(0x240)]>=_0xf9db4/0x64){if(_0x18d74['valid'])_0x5a0fb1['push'](_0x18d74);}else{if(_0x18d74[_0x56c90d(0x240)]<=-_0xf9db4/0x64){if(_0x18d74['valid'])_0x5a0fb1[_0x56c90d(0x1a9)](_0x18d74);}}}}if(_0x5a0fb1['length']>0x0){let _0x35a70b=_0x5a0fb1['map'](_0x251b7c=>_0x251b7c['coin']);_0x35a70b[_0x56c90d(0x24b)]();let _0x3be534=_0x35a70b[_0x56c90d(0x217)](',\x20');if(!lastCoinsToBalance)logHistory(_0x56c90d(0x245),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x3be534;}}function symbolToCoin(_0x36ec79){const _0x50943d=_0x1e847e;let _0x1f396e;if(_0x36ec79['includes']('/'+config[_0x50943d(0x258)]))_0x1f396e=_0x36ec79['replace']('/'+config[_0x50943d(0x258)],'');if(_0x36ec79[_0x50943d(0x1d6)](config['basecoin']+'/'))_0x1f396e=_0x36ec79['replace'](config['basecoin']+'/','');return _0x1f396e;}async function unlockOrders(){const _0x20a7ee=_0x1e847e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x20a7ee(0x1e5)]){logger[_0x20a7ee(0x28a)](_0x20a7ee(0x1f0)),lockOrders=ORDERS[_0x20a7ee(0x1cf)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x368181=await getCoins();[currentCoins,currentCoinsAll]=_0x368181,validateOrdersState=_0x20a7ee(0x2fe),persistOpenOrders([]),lockOrders=ORDERS[_0x20a7ee(0x252)],logger[_0x20a7ee(0x28a)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x2ec4ee){const _0x1e453b=_0x1e847e;if(_0x2ec4ee)validateOrdersState=_0x2ec4ee;logger[_0x1e453b(0x28a)](_0x1e453b(0x267)+validateOrdersState+_0x1e453b(0x1f5)+(lockOrders==0x1?_0x1e453b(0x261):lockOrders==0x2?_0x1e453b(0x24e):'ORDERS.UNLOCKED'));let _0x1c2410=[],_0x39ad75=config[_0x1e453b(0x1b2)]==_0x1e453b(0x26d)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1e453b(0x27e)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x1e453b(0x1e5)])return;logger[_0x1e453b(0x28a)](_0x1e453b(0x301)+validateOrdersState),lastOrders['forEach'](_0x1c4bf9=>{const _0x56a6db=_0x1e453b;let _0xef2ada=![];_0x1c4bf9[_0x56a6db(0x192)]>0x0&&(_0xef2ada=!![]),_0x1c2410['push'](_0xef2ada),_0xef2ada&&config[_0x56a6db(0x1b2)]!=_0x56a6db(0x26d)&&logHistory('order',_0x56a6db(0x27a)+_0x1c4bf9[_0x56a6db(0x1e4)]+'\x20'+_0x1c4bf9[_0x56a6db(0x2bb)]+'\x20#'+formatResult(_0x1c4bf9[_0x56a6db(0x192)],0x8)+'\x20@'+formatResult(_0x1c4bf9['price'],0x8));}),_0x1c2410[_0x1e453b(0x302)]((_0x302558,_0x162dcb)=>{if(_0x302558)lastOrders['splice'](_0x162dcb,0x1);}),persistOpenOrders(lastOrders);const _0x51cc35=coolingDown?_0x1e453b(0x27d):_0x1e453b(0x292);if(validateOrdersState==_0x1e453b(0x2fe)){validateOrdersState=_0x1e453b(0x30a);if(_0x1c2410['includes'](![])){if(config[_0x1e453b(0x1b2)]==_0x1e453b(0x26d)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x1e453b(0x30a)){if(_0x1c2410[_0x1e453b(0x1d6)](![])){}else{if(allOrdersPlaced){if(config[_0x1e453b(0x1b2)]==_0x1e453b(0x26d)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x1c2410[_0x1e453b(0x1d6)](![])&&(config[_0x1e453b(0x1b2)]==_0x1e453b(0x26d)?logHistory('success',_0x1e453b(0x297)+Math[_0x1e453b(0x197)](_0x39ad75*validateOrderInterval/0xea60)+_0x1e453b(0x2ac)+_0x51cc35):(await cancelOrders(),logHistory(_0x1e453b(0x2b5),_0x1e453b(0x2cb)+Math['round'](_0x39ad75*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x51cc35))),await unlockOrders();else{if(validateOrdersState==_0x1e453b(0x2e7)){if(config[_0x1e453b(0x1b2)]!=_0x1e453b(0x26d))logHistory(_0x1e453b(0x2b5),_0x1e453b(0x238)+_0x51cc35);await unlockOrders();}}}}}async function cancelOrders(){const _0x317cba=_0x1e847e;lastOrders[_0x317cba(0x302)](async _0x54438b=>{const _0x55ea85=_0x317cba;try{const _0xa63dfa=await exchange['cancelOrder'](_0x54438b[_0x55ea85(0x2f2)],_0x54438b[_0x55ea85(0x1e4)]);}catch(_0x29acb3){if(_0x29acb3[_0x55ea85(0x304)]()['includes'](_0x55ea85(0x199))){}else await handleError(_0x29acb3,_0x55ea85(0x2bf));}});}async function initCoinResults(_0x5c12be){const _0xd52f1a=_0x1e847e;_0x5c12be?logger[_0xd52f1a(0x28a)](_0xd52f1a(0x305)+_0x5c12be):logger[_0xd52f1a(0x28a)]('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0x262b22=>{const _0x5d4a4f=_0xd52f1a;if(!_0x262b22['excluded']&&_0x262b22['coin']!=config[_0x5d4a4f(0x258)]){const _0x297ce0=currentCoins[_0x5d4a4f(0x265)](_0x4a455b=>_0x4a455b[_0x5d4a4f(0x1e3)]==_0x262b22[_0x5d4a4f(0x1e3)]),_0x56f8fc=global[_0x5d4a4f(0x271)][noslash(_0x262b22[_0x5d4a4f(0x1e4)])];let _0x402826=_0x297ce0?_0x297ce0[_0x5d4a4f(0x193)]:null,_0x344d4e=_0x262b22['reverse']?0x1/_0x56f8fc:_0x56f8fc,_0x10c049;config[_0x5d4a4f(0x246)]['forEach'](_0x2b613d=>{const _0x23eb49=_0x5d4a4f;!_0x10c049&&(_0x10c049=_0x2b613d[_0x23eb49(0x1b5)][_0x23eb49(0x265)](_0xd9635c=>_0xd9635c['coin']==_0x262b22['coin']),_0x10c049&&(_0x402826=_0x10c049['number'],_0x344d4e=_0x10c049[_0x23eb49(0x282)]));});let _0x1dbdac=dbCoinResults['get']('coins')['find']({'coin':_0x262b22[_0x5d4a4f(0x1e3)]})['value']();if(!_0x1dbdac){const _0x1ab43c={'coin':_0x262b22[_0x5d4a4f(0x1e3)],'number':_0x402826,'breakeven':_0x344d4e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5d4a4f(0x1fb)](_0x5d4a4f(0x262))['push'](_0x1ab43c)[_0x5d4a4f(0x198)]();}else{if(_0x5c12be&&_0x262b22[_0x5d4a4f(0x1e3)]==_0x5c12be){const _0x3b4fe9={'coin':_0x262b22['coin'],'number':_0x402826,'breakeven':_0x344d4e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x5d4a4f(0x1fb)](_0x5d4a4f(0x262))[_0x5d4a4f(0x265)]({'coin':_0x262b22[_0x5d4a4f(0x1e3)]})[_0x5d4a4f(0x2be)](_0x3b4fe9)[_0x5d4a4f(0x198)]();}}}});}async function updateCoinResults(_0x5c9947,_0x52e980=![]){const _0x19609e=_0x1e847e;let _0x56ac35,_0x3c50d8,_0x4543f7,_0x2b2929,_0x3bb637,_0x23939a,_0x50bd1e=dbCoinResults[_0x19609e(0x1fb)](_0x19609e(0x262))['find']({'coin':_0x5c9947[_0x19609e(0x1e3)]})[_0x19609e(0x2c6)](),_0x124456=![];Object[_0x19609e(0x2f8)](_0x50bd1e)[_0x19609e(0x302)](([_0x1a6d57,_0x2cd506])=>{if(_0x2cd506==null)_0x124456=!![];});(!_0x50bd1e||_0x124456)&&(await initCoinResults(_0x5c9947['coin']),_0x50bd1e=dbCoinResults[_0x19609e(0x1fb)](_0x19609e(0x262))['find']({'coin':_0x5c9947[_0x19609e(0x1e3)]})[_0x19609e(0x2c6)]());_0x5c9947[_0x19609e(0x23c)]&&(_0x23939a={'filled':_0x5c9947[_0x19609e(0x192)]*_0x5c9947['price'],'amount':_0x5c9947[_0x19609e(0x192)]*_0x5c9947['price'],'side':_0x5c9947[_0x19609e(0x2bb)]==_0x19609e(0x1e0)?_0x19609e(0x30b):_0x19609e(0x1e0),'price':0x1/_0x5c9947['price']},_0x5c9947={..._0x5c9947,..._0x23939a});_0x52e980?_0x3c50d8=_0x5c9947[_0x19609e(0x2bb)]==_0x19609e(0x30b)?_0x50bd1e[_0x19609e(0x193)]+_0x5c9947[_0x19609e(0x192)]:_0x50bd1e[_0x19609e(0x193)]-_0x5c9947[_0x19609e(0x192)]:_0x3c50d8=await getCoinNumber(_0x5c9947[_0x19609e(0x1e3)]);if(_0x5c9947['fee']&&_0x5c9947[_0x19609e(0x2de)][_0x19609e(0x2da)]==config[_0x19609e(0x258)])_0x56ac35=_0x5c9947[_0x19609e(0x2de)][_0x19609e(0x221)];else{if(_0x5c9947['fee']&&_0x5c9947[_0x19609e(0x2de)][_0x19609e(0x2da)]==_0x19609e(0x313)&&!_0x52e980)_0x56ac35=_0x5c9947['fee'][_0x19609e(0x221)]*global[_0x19609e(0x271)][_0x19609e(0x313)+config[_0x19609e(0x258)]];else _0x56ac35=defaultFee*_0x5c9947['filled']*_0x5c9947[_0x19609e(0x282)];}_0x5c9947[_0x19609e(0x2bb)]=='buy'?(_0x4543f7=_0x3c50d8!=0x0?(_0x50bd1e[_0x19609e(0x2d1)]*_0x50bd1e['number']+_0x5c9947[_0x19609e(0x282)]*(_0x3c50d8-_0x50bd1e[_0x19609e(0x193)])+_0x56ac35)/_0x3c50d8:0x0,_0x2b2929=_0x50bd1e[_0x19609e(0x251)]):(_0x4543f7=_0x3c50d8!=0x0?(_0x50bd1e['breakeven']*_0x50bd1e['number']-_0x5c9947[_0x19609e(0x282)]*(_0x50bd1e[_0x19609e(0x193)]-_0x3c50d8)+_0x56ac35)/_0x3c50d8:0x0,_0x2b2929=_0x50bd1e['realized']+(_0x5c9947[_0x19609e(0x282)]-_0x50bd1e['breakeven'])*_0x5c9947['filled']);_0x3bb637=(_0x5c9947[_0x19609e(0x282)]-_0x4543f7-_0x56ac35/_0x5c9947[_0x19609e(0x192)])*_0x3c50d8;let _0x319c82={'coin':_0x5c9947[_0x19609e(0x1e3)],'number':_0x3c50d8,'breakeven':formatResult(_0x4543f7,0x8),'realized':formatResult(_0x2b2929,0x8),'unrealized':formatResult(_0x3bb637,0x8),'fees':formatResult(_0x50bd1e[_0x19609e(0x294)]+_0x56ac35,0x8),'sells':_0x5c9947[_0x19609e(0x2bb)]==_0x19609e(0x1e0)?_0x50bd1e[_0x19609e(0x225)]+0x1:_0x50bd1e['sells'],'buys':_0x5c9947[_0x19609e(0x2bb)]==_0x19609e(0x30b)?_0x50bd1e['buys']+0x1:_0x50bd1e[_0x19609e(0x2d2)]};dbCoinResults[_0x19609e(0x1fb)](_0x19609e(0x262))[_0x19609e(0x265)]({'coin':_0x5c9947[_0x19609e(0x1e3)]})[_0x19609e(0x2be)](_0x319c82)[_0x19609e(0x198)]();if(!_0x52e980){if(_0x5c9947['fee']&&_0x5c9947['fee'][_0x19609e(0x2da)]=='BNB'){const _0x3f3730=currentCoins['find'](_0x521ff0=>_0x521ff0[_0x19609e(0x1e3)]==_0x19609e(0x313));if(_0x3f3730){let _0x5e7a22=dbCoinResults[_0x19609e(0x1fb)](_0x19609e(0x262))['find']({'coin':'BNB'})[_0x19609e(0x2c6)]();_0x319c82={..._0x5e7a22,'number':_0x3f3730[_0x19609e(0x193)]},dbCoinResults[_0x19609e(0x1fb)](_0x19609e(0x262))[_0x19609e(0x265)]({'coin':_0x19609e(0x313)})[_0x19609e(0x2be)](_0x319c82)[_0x19609e(0x198)]();}}}}async function placeOrder(_0x513141){const _0x8277e8=_0x1e847e,_0x3ea3ea=config[_0x8277e8(0x1b2)]==_0x8277e8(0x26d)?_0x8277e8(0x26d):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x8277e8(0x2fe);let _0x43d8ec=![];lastOrders=[];for(const _0x6b93c of _0x513141){let _0x1106fa,_0x9536,_0x37d67a,_0x218b9f,_0x4316fb,_0x9d16ff=_0x6b93c[_0x8277e8(0x1e4)];try{const _0x482ca6=await exchange[_0x8277e8(0x233)](_0x9d16ff);_0x1106fa=_0x6b93c['reverse']?0x1/_0x6b93c['last']:_0x6b93c[_0x8277e8(0x1c0)],_0x9536=_0x482ca6[_0x8277e8(0x273)],_0x37d67a=_0x482ca6[_0x8277e8(0x248)];_0x6b93c[_0x8277e8(0x23c)]?(_0x218b9f=_0x6b93c['side']==_0x8277e8(0x30b)?'sell':'buy',_0x4316fb=Math[_0x8277e8(0x250)](_0x6b93c['trade'])/_0x1106fa):(_0x218b9f=_0x6b93c[_0x8277e8(0x2bb)],_0x4316fb=Math['abs'](_0x6b93c[_0x8277e8(0x25a)]));_0x3ea3ea==_0x8277e8(0x30c)&&(config[_0x8277e8(0x1b2)]==_0x8277e8(0x21c)&&(_0x1106fa=_0x218b9f==_0x8277e8(0x30b)?_0x9536:_0x37d67a),config[_0x8277e8(0x1b2)]==_0x8277e8(0x1a3)&&(_0x1106fa=_0x218b9f==_0x8277e8(0x30b)?_0x37d67a:_0x9536));_0x4316fb=formatResult(_0x4316fb,0x8),_0x1106fa=formatResult(_0x1106fa,0x8);const _0x42d856=_0x218b9f==_0x8277e8(0x1e0)?config[_0x8277e8(0x216)]?String[_0x8277e8(0x1c3)]('0x'+config[_0x8277e8(0x216)])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config['emojibuy'])+'\x20':'',_0xfa9faf=_0x3ea3ea==_0x8277e8(0x26d)?_0x8277e8(0x25d):config[_0x8277e8(0x1b2)]==_0x8277e8(0x21c)?_0x8277e8(0x2db):_0x8277e8(0x228),_0x1d22db=(Math[_0x8277e8(0x19a)](Math[_0x8277e8(0x2df)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders['push']({'customId':_0x1d22db,'symbol':_0x9d16ff,'coin':_0x6b93c[_0x8277e8(0x1e3)],'amount':_0x4316fb,'price':_0x1106fa,'side':_0x218b9f,'reverse':_0x6b93c['reverse'],'filled':0x0});if(_0x3ea3ea==_0x8277e8(0x26d))logHistory(_0x8277e8(0x203),''+_0x42d856+_0xfa9faf+_0x8277e8(0x22e)+_0x9d16ff+'\x20'+_0x218b9f+'\x20#'+formatResult(_0x4316fb,0x8)+'\x20@'+formatResult(_0x1106fa,0x8));else logHistory(_0x8277e8(0x203),''+_0x42d856+_0xfa9faf+'\x20order:\x20'+_0x9d16ff+'\x20'+_0x218b9f+'\x20#'+formatResult(_0x4316fb,0x8)+'\x20@'+formatResult(_0x1106fa,0x8));const _0x4a5a56=await exchange[_0x8277e8(0x2c0)](_0x9d16ff,_0x3ea3ea,_0x218b9f,_0x4316fb,_0x1106fa);logger[_0x8277e8(0x28a)](_0x8277e8(0x24f)+_0x4a5a56['id']+_0x8277e8(0x207)+_0x1d22db);const _0x4eb19c=lastOrders[_0x8277e8(0x200)]-0x1;if(_0x4eb19c>=0x0&&lastOrders[_0x4eb19c][_0x8277e8(0x205)]==_0x1d22db){lastOrders[_0x4eb19c][_0x8277e8(0x2f2)]=_0x4a5a56['id'];if(_0x4a5a56[_0x8277e8(0x255)])lastOrders[_0x4eb19c][_0x8277e8(0x255)]=_0x4a5a56['amount'];if(_0x4a5a56[_0x8277e8(0x282)])lastOrders[_0x4eb19c][_0x8277e8(0x282)]=_0x4a5a56[_0x8277e8(0x282)];lastOrders[_0x4eb19c][_0x8277e8(0x2de)]=_0x4a5a56[_0x8277e8(0x2de)];}if(config['cooldown']!=0x0){let _0x45d5ab=null;if(cooldownTracker[_0x8277e8(0x200)]==config[_0x8277e8(0x2e6)]-0x1)_0x45d5ab=cooldownTracker[_0x8277e8(0x1ae)]();const _0x1f9a92=getTimeStamp();cooldownTracker['push'](_0x1f9a92);if(_0x45d5ab){const _0x1c8f5e=fns[_0x8277e8(0x195)](new Date(_0x1f9a92),new Date(_0x45d5ab));if(_0x1c8f5e<cooldownInterval){logHistory(_0x8277e8(0x23f),_0x8277e8(0x1a7)+config[_0x8277e8(0x2e6)]+_0x8277e8(0x1b8)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x8277e8(0x204)),coolingDown=!![];break;}}}}catch(_0x4c8e20){if(_0x4c8e20[_0x8277e8(0x304)]()['includes'](_0x8277e8(0x1fe)))lastOrders=lastOrders[_0x8277e8(0x1c7)](_0x3ae901=>_0x3ae901['symbol']!=_0x9d16ff),logHistory(_0x8277e8(0x23f),_0x8277e8(0x314)+_0x9d16ff),_0x43d8ec=!![];else{if(_0x4c8e20['toString']()[_0x8277e8(0x1d6)]('Invalid\x20quantity'))lastOrders=lastOrders['filter'](_0x402a9e=>_0x402a9e['symbol']!=_0x9d16ff),logHistory(_0x8277e8(0x23f),_0x8277e8(0x2e8)+_0x9d16ff),_0x43d8ec=!![];else{if(_0x4c8e20[_0x8277e8(0x304)]()[_0x8277e8(0x1d6)](_0x8277e8(0x253)))lastOrders=lastOrders['filter'](_0x4a54af=>_0x4a54af['symbol']!=_0x9d16ff),logHistory(_0x8277e8(0x23f),_0x8277e8(0x281)+_0x9d16ff),_0x43d8ec=!![];else _0x4c8e20[_0x8277e8(0x304)]()[_0x8277e8(0x1d6)](_0x8277e8(0x2e4))?(lastOrders=lastOrders[_0x8277e8(0x1c7)](_0x5938be=>_0x5938be['symbol']!=_0x9d16ff),logHistory(_0x8277e8(0x23f),_0x8277e8(0x314)+_0x9d16ff),_0x43d8ec=!![]):(lastOrders=lastOrders[_0x8277e8(0x1c7)](_0x37bc5e=>_0x37bc5e[_0x8277e8(0x1e4)]!=_0x9d16ff),await handleError(_0x4c8e20,_0x8277e8(0x1de),_0x9d16ff));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders['length']>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x4ddd73=config[_0x8277e8(0x1b2)]==_0x8277e8(0x26d)?validateOrderTimeout*0x3c*0x3e8:config[_0x8277e8(0x27e)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x310382=_0x8277e8;validateOrders(_0x310382(0x2e3));},_0x4ddd73);}else unlockOrders();_0x43d8ec&&config['headless']&&await pauseBot(_0x8277e8(0x1ce)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x8277e8(0x2b5),_0x8277e8(0x2f5)));}else{if(coolingDown)!config['headless']&&logHistory('error',_0x8277e8(0x239));else lockOrders!=ORDERS[_0x8277e8(0x252)]&&(!config['headless']&&(config['ordertype']==_0x8277e8(0x26d)?logHistory(_0x8277e8(0x23f),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x8277e8(0x23f),_0x8277e8(0x2c9))));}}function persistOpenOrders(_0x52f5fb){const _0x1611ac=_0x1e847e,_0x124c57={...config,'openOrders':_0x52f5fb};let _0xa0cb89=dbConfig[_0x1611ac(0x1fb)](_0x1611ac(0x2d9))['find']({'botID':botID})[_0x1611ac(0x2c6)]();_0xa0cb89&&dbConfig['get'](_0x1611ac(0x2d9))['find']({'botID':botID})[_0x1611ac(0x2be)](_0x124c57)[_0x1611ac(0x198)]();}function restoreOrders(){const _0x4d51e3=_0x1e847e;let _0x5b88e1;config['openOrders']&&allOpenOrders[_0x4d51e3(0x302)](_0x40dde4=>{const _0x3f0f69=_0x4d51e3,_0x441568=config[_0x3f0f69(0x196)][_0x3f0f69(0x265)](_0xf80bc7=>_0xf80bc7[_0x3f0f69(0x2f2)]==_0x40dde4['id']);_0x441568&&(lastOrders[_0x3f0f69(0x1a9)](_0x441568),_0x5b88e1=_0x40dde4[_0x3f0f69(0x212)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x4d51e3(0x1e5)],validateOrdersState=_0x4d51e3(0x30a),allOrdersPlaced=!![];const _0x1e1f28=new Date()['getTime'](),_0x2604b1=config[_0x4d51e3(0x1b2)]==_0x4d51e3(0x26d)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x5b88e1+_0x2604b1>_0x1e1f28){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x5b88e1+_0x2604b1-_0x1e1f28);}else validateOrders(_0x4d51e3(0x2e3));}}async function sendMetricsTelegram(){const _0x4f58de=_0x1e847e;if(!coinsLoaded){process[_0x4f58de(0x243)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2299c5=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x47f558='';if(config[_0x4f58de(0x19d)])_0x47f558=_0x4f58de(0x2ea)+config[_0x4f58de(0x24d)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x47f558=_0x4f58de(0x1d9)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x40aea5=getKPIs(_0x4f58de(0x258)),_0xb7bc76=getKPIs(_0x4f58de(0x318),config[_0x4f58de(0x318)]),_0x39d8e2=getKPIs(_0x4f58de(0x2b7)),_0x555326=getKPIs(_0x4f58de(0x27f),config['fiat']);_0x47f558+='<pre>',_0x47f558+=_0x40aea5[_0x4f58de(0x2dd)]+'\x20:\x20'+_0x40aea5[_0x4f58de(0x2c6)]+'\x0a',_0x47f558+=_0x40aea5[_0x4f58de(0x2f4)]+':\x20'+_0x40aea5['change']+'%\x0a',_0x47f558+=_0xb7bc76[_0x4f58de(0x2dd)]+_0x4f58de(0x263)+_0xb7bc76['value']+'\x0a',_0x47f558+=_0xb7bc76[_0x4f58de(0x2f4)]+':\x20'+_0xb7bc76[_0x4f58de(0x26e)]+'%\x0a',_0x47f558+=_0x39d8e2[_0x4f58de(0x2dd)]+':\x20'+_0x39d8e2['value']+'\x20('+config[_0x4f58de(0x258)]+')\x0a',_0x47f558+=_0x39d8e2[_0x4f58de(0x2f4)]+':\x20'+_0x39d8e2[_0x4f58de(0x26e)]+'%\x20('+config['basecoin']+')\x0a',_0x47f558+=_0x555326[_0x4f58de(0x2dd)]+':\x20'+_0x555326[_0x4f58de(0x2c6)]+'\x20('+config[_0x4f58de(0x318)]+')\x0a',_0x47f558+=_0x555326[_0x4f58de(0x2f4)]+':\x20'+_0x555326[_0x4f58de(0x26e)]+_0x4f58de(0x312)+config[_0x4f58de(0x318)]+')\x0a',_0x47f558+='</pre>',process[_0x4f58de(0x243)]({'telegrammsg':_0x47f558},_0x4a78ba=>{});}async function sendPortfolioTelegram(){const _0x558010=_0x1e847e;if(!coinsLoaded){process[_0x558010(0x243)]({'telegrammsg':_0x558010(0x1e6)},_0x1ad3a2=>{});return;}let _0x258380='';if(config[_0x558010(0x19d)])_0x258380=_0x558010(0x2ea)+config[_0x558010(0x24d)]+_0x558010(0x1dd);else _0x258380=_0x558010(0x1d9)+botID+_0x558010(0x1dd);_0x258380+=_0x558010(0x2c3),_0x258380+=_0x558010(0x2ff),_0x258380+=_0x558010(0x1bf),_0x258380+=_0x558010(0x2ff),currentCoins[_0x558010(0x302)](_0x39d407=>{const _0x36961e=_0x558010;_0x258380+=_0x39d407['coin'][_0x36961e(0x30f)](0x7)+'|\x20'+formatPad(_0x39d407[_0x36961e(0x1ec)],0x2,0x6)+'|\x20'+formatPad(_0x39d407[_0x36961e(0x29c)],0x2,0x6)+'|\x20'+formatPad(_0x39d407['delta']*0x64,0x2,0x6)+'\x0a';}),_0x258380+='</pre>',process[_0x558010(0x243)]({'telegrammsg':_0x258380},_0x42b533=>{});}function formatPad(_0x2cd4ac,_0x3855be,_0x2910f8){const _0x370be6=_0x1e847e,_0x398b8d=formatResultString(_0x2cd4ac,_0x3855be);return _0x398b8d?_0x398b8d[_0x370be6(0x2c1)](_0x2910f8):''[_0x370be6(0x2c1)](_0x2910f8);}function logHistory(_0xd48f1d,_0x498887,_0x19c945=''){const _0x2a023e=_0x1e847e;let _0x29331f={'time':getTimeStamp(),'type':_0xd48f1d,'event':_0x498887};dbLogs[_0x2a023e(0x1fb)](_0x2a023e(0x1f1))[_0x2a023e(0x1a9)](_0x29331f)[_0x2a023e(0x198)]();if(_0x19c945=='')_0x19c945=_0x498887;proxyEmit(_0x2a023e(0x2c2),{'log':_0x29331f,'summary':_0x19c945}),process[_0x2a023e(0x243)]({'telegram':{..._0x29331f,'botname':config[_0x2a023e(0x24d)],'showname':config['showname']}},_0x258714=>{}),logger[_0x2a023e(0x2cc)](''+_0x29331f[_0x2a023e(0x2c2)]);}function emitHistory(_0x3fa447={}){const _0x26efe4=_0x1e847e;Object[_0x26efe4(0x1d7)](_0x3fa447)[_0x26efe4(0x200)]==0x0&&(_0x3fa447={'type':['order',_0x26efe4(0x2c2)],'event':'','page':0x1});if(_0x3fa447[_0x26efe4(0x28e)][_0x26efe4(0x1d6)](_0x26efe4(0x2c2)))_0x3fa447[_0x26efe4(0x28e)][_0x26efe4(0x22f)](_0x3fa447[_0x26efe4(0x28e)][_0x26efe4(0x1f8)](_0x26efe4(0x2c2)),0x1,_0x26efe4(0x23f),_0x26efe4(0x245),'success');if(dbLogs['has']('logs')[_0x26efe4(0x2c6)]()){let _0x51ce35=dbLogs[_0x26efe4(0x1fb)](_0x26efe4(0x1f1))['filter'](_0xbda397=>{const _0x1eb8ba=_0x26efe4;if(_0x3fa447[_0x1eb8ba(0x28e)][_0x1eb8ba(0x200)]==0x0)return![];else return _0x3fa447[_0x1eb8ba(0x28e)][_0x1eb8ba(0x1d6)](_0xbda397[_0x1eb8ba(0x28e)]);})[_0x26efe4(0x1c7)](_0x7b164a=>{const _0x500a0=_0x26efe4;if(_0x3fa447['event']=='')return!![];else return _0x7b164a['event'][_0x500a0(0x25f)]()[_0x500a0(0x1d6)](_0x3fa447[_0x500a0(0x2c2)]['toLowerCase']());})[_0x26efe4(0x1b3)](_0x26efe4(0x2b4)),_0x11e6e2=_0x51ce35['value']()[_0x26efe4(0x200)];_0x51ce35=_0x51ce35[_0x26efe4(0x23c)]()['slice']((_0x3fa447['page']-0x1)*logPageSize,_0x3fa447[_0x26efe4(0x1aa)]*logPageSize-0x1)['reverse']()[_0x26efe4(0x2c6)](),proxyEmit(_0x26efe4(0x2b2),{'logs':_0x51ce35,'total':_0x11e6e2});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x604bfc){const _0x24fa1f=_0x1e847e;if(dbLogs[_0x24fa1f(0x230)](_0x24fa1f(0x1f1))[_0x24fa1f(0x2c6)]()){const _0x7b80f8=dbLogs[_0x24fa1f(0x1fb)](_0x24fa1f(0x1f1))[_0x24fa1f(0x1b3)]('time')[_0x24fa1f(0x1c7)](_0x2e3d41=>{const _0x1f9c64=_0x24fa1f;return _0x2e3d41[_0x1f9c64(0x28e)]=='order';})['value']();dbLogs[_0x24fa1f(0x1fb)](_0x24fa1f(0x1f1))[_0x24fa1f(0x2cf)]()[_0x24fa1f(0x198)](),dbLogs[_0x24fa1f(0x1fb)](_0x24fa1f(0x1f1))[_0x24fa1f(0x2be)](_0x7b80f8)[_0x24fa1f(0x198)](),emitHistory(_0x604bfc);}}async function pauseBot(_0x4a3b3b=''){const _0x29f05c=_0x1e847e,_0x36b207=new Date()['getTime']();if(!lastErrorShown||_0x36b207-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x36b207;!lastBotPause?(lastBotPause=_0x36b207,consecutivePauses=0x1):(_0x36b207-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x29f05c(0x243)]({'stop':_0x29f05c(0x2f9)},_0x1ee9c5=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x29f05c(0x1f7)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x4a3b3b)_0x4a3b3b+='\x20|\x20';logHistory('error',_0x4a3b3b+_0x29f05c(0x214)+pauseBotInterval/0xea60+'\x20minutes'),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x448d6e=_0x1e847e;process[_0x448d6e(0x243)]({'stop':_0x448d6e(0x24c)},_0x433a08=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3ea9cb,_0x4b1286){const _0x76c9d5=_0x1e847e;if(_0x3ea9cb[_0x76c9d5(0x304)]()[_0x76c9d5(0x1d6)](_0x76c9d5(0x290)))return logHistory('error',config[_0x76c9d5(0x1b4)]+_0x76c9d5(0x2a0)),![];else{if(_0x3ea9cb[_0x76c9d5(0x304)]()[_0x76c9d5(0x1d6)](_0x76c9d5(0x28c)))return logHistory(_0x76c9d5(0x23f),config['exchange']+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),![];else{if(_0x3ea9cb['toString']()[_0x76c9d5(0x1d6)](_0x76c9d5(0x1da)))return logHistory(_0x76c9d5(0x23f),config[_0x76c9d5(0x1b4)]+_0x76c9d5(0x1a5)),logHistory('error',_0x76c9d5(0x25c)),![];else await handleError(_0x3ea9cb,_0x4b1286);}}}async function handleError(_0x4cdff5,_0x106a16,_0x200e27=''){const _0x5bec23=_0x1e847e,_0x10cd93=config['exchange']||_0x5bec23(0x1bc);if(_0x4cdff5[_0x5bec23(0x304)]()['includes'](_0x5bec23(0x306))||_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x21e)))await pauseBot(config[_0x5bec23(0x1b4)]+_0x5bec23(0x247));else{if(_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x1c5))||_0x4cdff5['toString']()['includes']('OnMaintenance'))await pauseBot(config['exchange']+'\x20not\x20available');else{if(_0x4cdff5[_0x5bec23(0x304)]()['includes'](_0x5bec23(0x20b)))await pauseBot(config[_0x5bec23(0x1b4)]+'\x20not\x20responding');else{if(_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x20d)))await pauseBot(config['exchange']+'\x20closed\x20the\x20connection');else{if(_0x4cdff5[_0x5bec23(0x304)]()['includes'](_0x5bec23(0x2a1)))logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x2ca)),logHistory('error',_0x5bec23(0x2d3)),await killBot();else{if(_0x4cdff5[_0x5bec23(0x304)]()['includes'](_0x5bec23(0x2a5)))logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x23e)),logHistory(_0x5bec23(0x23f),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4cdff5 instanceof ccxt['NetworkError'])logger[_0x5bec23(0x28a)](_0x5bec23(0x27c),_0x4cdff5),await pauseBot(config[_0x5bec23(0x1b4)]+'\x20network\x20error');else{if(_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x290)))logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x311)+config[_0x5bec23(0x1b4)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x5bec23(0x23f),_0x5bec23(0x2d3)),await killBot();else{if(_0x4cdff5[_0x5bec23(0x304)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x311)+config[_0x5bec23(0x1b4)]+'\x20API\x20secret\x20is\x20invalid'),logHistory(_0x5bec23(0x23f),_0x5bec23(0x2d3)),await killBot();else{if(_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x1da)))logHistory('error',_0x106a16+_0x5bec23(0x311)+config[_0x5bec23(0x1b4)]+_0x5bec23(0x1e8)),logHistory(_0x5bec23(0x23f),_0x5bec23(0x2d3)),await killBot();else{if(_0x4cdff5[_0x5bec23(0x304)]()[_0x5bec23(0x1d6)](_0x5bec23(0x1be)))logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x2ab)+_0x200e27);else _0x4cdff5 instanceof ccxt[_0x5bec23(0x1b0)]?(logger[_0x5bec23(0x28a)]('Uncaught\x20ExchangeError:',_0x4cdff5),logHistory(_0x5bec23(0x23f),_0x106a16+_0x5bec23(0x311)+config[_0x5bec23(0x1b4)]+'\x20exchange\x20error')):(logger['full'](_0x106a16+_0x5bec23(0x1e9),_0x4cdff5),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}}}function formatResult(_0x44fd86,_0x469a5e){const _0x57ea31=_0x1e847e;return parseFloat(_0x44fd86[_0x57ea31(0x1bd)](_0x469a5e));}function formatResultTruncate(_0x4750a5,_0x1575ee){const _0x2df22d=_0x1e847e;let _0x351046=formatResultString(_0x4750a5,0xa),_0x2e3fa9=_0x351046[_0x2df22d(0x1f8)]('.');return _0x2e3fa9!=-0x1&&(_0x351046=_0x351046['slice'](0x0,_0x2e3fa9+_0x1575ee+0x1)),Number(_0x351046);}function formatResultString(_0x5cb2e4,_0x228c96){const _0x54305c=_0x1e847e;let _0x4c3695;if(!(''+_0x5cb2e4)[_0x54305c(0x1d6)]('e'))_0x4c3695=+(Math[_0x54305c(0x197)](_0x5cb2e4+'e+'+_0x228c96)+'e-'+_0x228c96);else{let _0x12e0a0=(''+_0x5cb2e4)[_0x54305c(0x20a)]('e'),_0x711d38='';+_0x12e0a0[0x1]+_0x228c96>0x0&&(_0x711d38='+'),_0x4c3695=+(Math['round'](+_0x12e0a0[0x0]+'e'+_0x711d38+(+_0x12e0a0[0x1]+_0x228c96))+'e-'+_0x228c96);}return Number(_0x4c3695)[_0x54305c(0x1bd)](_0x228c96);}function getServerTime(){const _0x2804a8=_0x1e847e,_0x4f5af9=new Date();return _0x4f5af9[_0x2804a8(0x1b6)]()+'/'+(_0x4f5af9[_0x2804a8(0x1d8)]()+0x1)[_0x2804a8(0x304)]()[_0x2804a8(0x2c1)](0x2,'0')+'/'+_0x4f5af9[_0x2804a8(0x194)]()[_0x2804a8(0x304)]()[_0x2804a8(0x2c1)](0x2,'0')+'\x20'+_0x4f5af9['getHours']()[_0x2804a8(0x304)]()['padStart'](0x2,'0')+':'+_0x4f5af9[_0x2804a8(0x1c2)]()[_0x2804a8(0x304)]()[_0x2804a8(0x2c1)](0x2,'0')+':'+_0x4f5af9[_0x2804a8(0x287)]()[_0x2804a8(0x304)]()[_0x2804a8(0x2c1)](0x2,'0');}function getTimeStamp(){const _0x8b558b=_0x1e847e,_0x117e31=shiftedTime();return _0x117e31[_0x8b558b(0x1b6)]()+'/'+(_0x117e31[_0x8b558b(0x1d8)]()+0x1)['toString']()[_0x8b558b(0x2c1)](0x2,'0')+'/'+_0x117e31['getDate']()[_0x8b558b(0x304)]()[_0x8b558b(0x2c1)](0x2,'0')+'\x20'+_0x117e31['getHours']()[_0x8b558b(0x304)]()[_0x8b558b(0x2c1)](0x2,'0')+':'+_0x117e31['getMinutes']()[_0x8b558b(0x304)]()['padStart'](0x2,'0')+':'+_0x117e31[_0x8b558b(0x287)]()[_0x8b558b(0x304)]()['padStart'](0x2,'0');}function getDate(){const _0x4d0eb9=_0x1e847e,_0x4ea525=shiftedTime();return _0x4ea525[_0x4d0eb9(0x1b6)]()+'/'+(_0x4ea525[_0x4d0eb9(0x1d8)]()+0x1)[_0x4d0eb9(0x304)]()[_0x4d0eb9(0x2c1)](0x2,'0')+'/'+_0x4ea525['getDate']()[_0x4d0eb9(0x304)]()[_0x4d0eb9(0x2c1)](0x2,'0');}function getHour(){const _0x3a4f11=_0x1e847e,_0x159f74=shiftedTime();return _0x159f74[_0x3a4f11(0x308)]()['toString']()[_0x3a4f11(0x2c1)](0x2,'0');}function sleep(_0x379463){return new Promise(_0xe19892=>setTimeout(_0xe19892,_0x379463));}function shiftedTime(){const _0x5b9932=_0x1e847e,_0x4309fa=new Date();let _0x303987=_0x4309fa;if(config&&config[_0x5b9932(0x277)]!==0x0)_0x303987=fns[_0x5b9932(0x229)](_0x4309fa,{'hours':config[_0x5b9932(0x277)]});return _0x303987;}function timer(_0x8384ba){const _0x340a19=_0x1e847e,_0x396324=new Date();!lasttime?console['log'](getTimeStamp()+_0x340a19(0x2c4),_0x8384ba,_0x396324):console['log'](getTimeStamp()+_0x340a19(0x2c4),_0x8384ba,(_0x396324-lasttime)/0x3e8),lasttime=_0x396324;}