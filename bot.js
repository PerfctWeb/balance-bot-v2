const _0x36bc83=_0x332f;(function(_0x3c79ed,_0x112b75){const _0x4c714d=_0x332f,_0x5c21fd=_0x3c79ed();while(!![]){try{const _0x12fbed=-parseInt(_0x4c714d(0x36c))/0x1*(-parseInt(_0x4c714d(0x1eb))/0x2)+-parseInt(_0x4c714d(0x2ef))/0x3+parseInt(_0x4c714d(0x303))/0x4*(-parseInt(_0x4c714d(0x335))/0x5)+parseInt(_0x4c714d(0x33d))/0x6*(parseInt(_0x4c714d(0x369))/0x7)+parseInt(_0x4c714d(0x20e))/0x8+-parseInt(_0x4c714d(0x2e1))/0x9*(-parseInt(_0x4c714d(0x30b))/0xa)+-parseInt(_0x4c714d(0x2fe))/0xb*(parseInt(_0x4c714d(0x20a))/0xc);if(_0x12fbed===_0x112b75)break;else _0x5c21fd['push'](_0x5c21fd['shift']());}catch(_0x14e48f){_0x5c21fd['push'](_0x5c21fd['shift']());}}}(_0x57d2,0x1f6a5));const _0x1876cb=function(){let _0x2d082a=!![];return function(_0x2d0851,_0x44db45){const _0x3167c2=_0x2d082a?function(){const _0xe74744=_0x332f;if(_0x44db45){const _0x317377=_0x44db45[_0xe74744(0x1f1)](_0x2d0851,arguments);return _0x44db45=null,_0x317377;}}:function(){};return _0x2d082a=![],_0x3167c2;};}(),_0x2834b3=_0x1876cb(this,function(){const _0x3fffc8=_0x332f;return _0x2834b3['toString']()['search'](_0x3fffc8(0x36b))[_0x3fffc8(0x22a)]()[_0x3fffc8(0x2a5)](_0x2834b3)[_0x3fffc8(0x246)]('(((.+)+)+)+$');});_0x2834b3();'use strict';const ccxt=require(_0x36bc83(0x266)),low=require(_0x36bc83(0x268)),FileSync=require(_0x36bc83(0x321)),fs=require('fs'),fns=require(_0x36bc83(0x2a3)),Crypt=require(_0x36bc83(0x25c))[_0x36bc83(0x1fd)],util=require('util'),argv=require(_0x36bc83(0x241))(process['argv'][_0x36bc83(0x2bf)](0x2))['argv'],path=require(_0x36bc83(0x2cc));let exchange;global['ticker']={},global['change']={};const usdBasecoins=['USD',_0x36bc83(0x2ad),'TUSD',_0x36bc83(0x377),_0x36bc83(0x237),_0x36bc83(0x23a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x36bc83(0x2a8)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x36bc83(0x208)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+'\x20minutes',pauseBotIntervalLong=0x3c*0x3c*0x3e8,pauseBotMsgLong=_0x36bc83(0x345)+pauseBotIntervalLong/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x36bc83(0x316)],botID=process[_0x36bc83(0x1fa)][0x2]||_0x36bc83(0x277),pattern=/^[0-9]{3}$/;!pattern[_0x36bc83(0x22f)](botID)&&(console[_0x36bc83(0x359)]('Error:\x20Invalid\x20argument\x20'+botID+_0x36bc83(0x1f3)),killBot());const userID=process[_0x36bc83(0x1fa)][0x3]||'',configpath=userID?_0x36bc83(0x2a4)+userID+'/':_0x36bc83(0x2a4),logspath=userID?_0x36bc83(0x1e0)+userID+'/':_0x36bc83(0x1e0),loggerfile=fs[_0x36bc83(0x37a)](logspath+_0x36bc83(0x29c),{'flags':'a'});!fs[_0x36bc83(0x1ea)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x36bc83(0x1ea)](logspath)&&fs[_0x36bc83(0x252)](logspath);const configfile=configpath+_0x36bc83(0x27d)+botID+_0x36bc83(0x26c),logfile=configpath+_0x36bc83(0x27d)+botID+_0x36bc83(0x35b),performancefile=configpath+_0x36bc83(0x27d)+botID+_0x36bc83(0x34e),coinresultsfile=configpath+_0x36bc83(0x27d)+botID+_0x36bc83(0x331),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x36bc83(0x24c),configbackuppath=configpath+_0x36bc83(0x279),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x36bc83(0x292)]({'logs':[],'version':serverversion})[_0x36bc83(0x2f1)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x36bc83(0x292)]({'bot':[],'version':serverversion})[_0x36bc83(0x2f1)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x36bc83(0x292)]({'coins':[],'version':serverversion})[_0x36bc83(0x2f1)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':_0x36bc83(0x2ee)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x507608=>{console['log'](_0x507608);},'simple':_0x31f3c3=>{const _0x4bc94b=_0x36bc83;console[_0x4bc94b(0x359)](_0x31f3c3),loggerfile['write'](util[_0x4bc94b(0x2ff)](_0x31f3c3)+'\x0a');},'full':async(_0x3b3711,_0x43b209='')=>{const _0x22b0de=_0x36bc83;let _0x3f35c9;if(config[_0x22b0de(0x270)])_0x3f35c9=getTimeStamp()+':\x20'+config[_0x22b0de(0x2ed)]+_0x22b0de(0x2c8)+_0x3b3711;else _0x3f35c9=getTimeStamp()+':\x20Bot\x20'+botID+_0x22b0de(0x2c8)+_0x3b3711;console[_0x22b0de(0x359)](_0x3f35c9),loggerfile[_0x22b0de(0x2f1)](util[_0x22b0de(0x2ff)](_0x3f35c9)+'\x0a'),_0x43b209&&(console[_0x22b0de(0x359)](_0x43b209),loggerfile[_0x22b0de(0x2f1)](util['format'](_0x43b209)+'\x0a'));},'debug':async(_0x179de0,_0x1437fa='')=>{const _0x58e8ad=_0x36bc83;let _0x4b63b6;if(config['showname'])_0x4b63b6=getTimeStamp()+':\x20'+config[_0x58e8ad(0x2ed)]+_0x58e8ad(0x2b5)+_0x179de0;else _0x4b63b6=getTimeStamp()+':\x20Bot\x20'+botID+_0x58e8ad(0x2b5)+_0x179de0;if(debugging)console[_0x58e8ad(0x359)](_0x4b63b6);loggerfile['write'](util[_0x58e8ad(0x2ff)](_0x4b63b6)+'\x0a');if(_0x1437fa){if(debugging)console[_0x58e8ad(0x359)](_0x1437fa);loggerfile[_0x58e8ad(0x2f1)](util['format'](_0x1437fa)+'\x0a');}}};process['on'](_0x36bc83(0x1f9),function(_0x4a6f9b){const _0x3487f3=_0x36bc83;logHistory(_0x3487f3(0x301),'Unexpected\x20error\x20-\x20check\x20log\x20file\x20for\x20details'),logger[_0x3487f3(0x20b)]('Uncaught\x20Exception:',_0x4a6f9b);});settings['timeshift']!=config[_0x36bc83(0x361)]&&updateTimeshift(settings[_0x36bc83(0x361)]);settings['onepagemode']!=config['onepagemode']&&updateOnepagemode(settings[_0x36bc83(0x363)]);process[_0x36bc83(0x296)]({'started':'running'},_0x50d40d=>{}),initializeProcessListeners();function proxyEmit(_0x22d762,_0x1ebb9e=null){const _0x421560=_0x36bc83;process[_0x421560(0x296)]({'function':_0x22d762,'args':_0x1ebb9e},_0x1c0213=>{});}function initializeProcessListeners(){process['on']('message',_0x77b62e=>{const _0xd8de5a=_0x332f;switch(Object[_0xd8de5a(0x21e)](_0x77b62e)[0x0]){case _0xd8de5a(0x361):_0x77b62e['timeshift']!=undefined&&(settings[_0xd8de5a(0x361)]=_0x77b62e['timeshift'],updateTimeshift(settings[_0xd8de5a(0x361)]));break;case _0xd8de5a(0x363):_0x77b62e[_0xd8de5a(0x363)]!=undefined&&(settings[_0xd8de5a(0x363)]=_0x77b62e[_0xd8de5a(0x363)],updateOnepagemode(settings[_0xd8de5a(0x363)]));break;case _0xd8de5a(0x304):_0x77b62e[_0xd8de5a(0x304)]!=undefined&&(bots=JSON['parse'](_0x77b62e[_0xd8de5a(0x304)]),proxyEmit(_0xd8de5a(0x304),bots));break;case _0xd8de5a(0x244):switch(_0x77b62e[_0xd8de5a(0x244)]){case _0xd8de5a(0x2ec):initclient();break;case'toggleBotMode':toggleBotMode();break;case'emitHistory':emitHistory(_0x77b62e[_0xd8de5a(0x2c4)]);break;case _0xd8de5a(0x1fc):deleteHistoryAlerts(_0x77b62e[_0xd8de5a(0x2c4)]);break;case _0xd8de5a(0x357):getPortfolio(_0x77b62e['args']);break;case'storeConfiguration':storeConfiguration(_0x77b62e['args']);break;case'storeHeadless':storeHeadless(_0x77b62e[_0xd8de5a(0x2c4)]);break;case _0xd8de5a(0x27a):storeFiat(_0x77b62e['args']);break;case _0xd8de5a(0x1f6):resetHistory();break;case _0xd8de5a(0x26f):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x77b62e['args']);break;case _0xd8de5a(0x24f):cancelLoading();break;case _0xd8de5a(0x312):showConfig();break;case _0xd8de5a(0x290):sendMetricsTelegram();break;case _0xd8de5a(0x243):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x126afe=![]){const _0xf69bdc=_0x36bc83;logger[_0xf69bdc(0x20b)](_0xf69bdc(0x22d)+(_0x126afe?'exchange\x20reloaded':_0xf69bdc(0x21f))+'\x20|\x20exchange:\x20'+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(!_0x126afe)lastCoinsToBalance='';coinsLoaded=![];if(config[_0xf69bdc(0x2e2)]!=''&&config[_0xf69bdc(0x2e2)]!='***'){loadingProgress=0x0;if(_0x126afe){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x2ee0f3){handleErrorNoStop(_0x2ee0f3,_0xf69bdc(0x229));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x20ee63=await getCoins();[currentCoins,currentCoinsAll]=_0x20ee63,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0xf69bdc(0x20b)](_0xf69bdc(0x219)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0xf69bdc(0x233)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0xad3620=_0x36bc83;exchangeStopped=!![];try{await exchange['close']();}catch(_0x57b2be){await handleError(_0x57b2be,_0xad3620(0x228));}}async function reloadExchange(){const _0x8be68=_0x36bc83;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger['debug'](_0x8be68(0x2c1)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x49dc46=config[_0x36bc83(0x2aa)],_0x3f7c53=config[_0x36bc83(0x2e2)],_0x101ba8=config[_0x36bc83(0x27c)],_0x45f247=config[_0x36bc83(0x337)]){const _0x352a00=_0x36bc83;exchange&&await stopExchange();!supportedExchanges()[_0x352a00(0x34b)](_0x49dc46)&&(logHistory(_0x352a00(0x301),_0x352a00(0x2d5)+_0x49dc46+_0x352a00(0x259)),killBot());const _0x3cb83f=ccxt[_0x352a00(0x2b4)][_0x49dc46[_0x352a00(0x250)]()];exchange=new _0x3cb83f({'apiKey':_0x3f7c53,'secret':_0x101ba8,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':'spot'}});if(_0x45f247)exchange[_0x352a00(0x30d)]=_0x45f247;}function setStableCoins(){const _0x3c622c=_0x36bc83;let _0x5769ba=config[_0x3c622c(0x25f)]==_0x3c622c(0x34f)?_0x3c622c(0x34f):'BTC',_0x24e22c=!allSymbols[_0x3c622c(0x34b)](_0x5769ba+'/USD')?'USDT':_0x3c622c(0x2a9),_0x351c2f=!allSymbols['includes'](_0x5769ba+_0x3c622c(0x1e1))?_0x24e22c:'EUR';stablecoins={'eur':{'coin':''+_0x5769ba+_0x351c2f,'symbol':_0x5769ba+'/'+_0x351c2f},'usd':{'coin':''+_0x5769ba+_0x24e22c,'symbol':_0x5769ba+'/'+_0x24e22c}};}async function initwsCcxt(){const _0x45b305=_0x36bc83;initCycle++;const _0x5050f9=initCycle;let _0x41baae=[];config[_0x45b305(0x28e)][_0x45b305(0x2b3)](_0x2ddab4=>{const _0x37399c=_0x45b305;if(!_0x2ddab4[_0x37399c(0x295)]&&_0x2ddab4['coin']!=config[_0x37399c(0x25f)])_0x41baae[_0x37399c(0x240)](_0x2ddab4[_0x37399c(0x332)]);});if(!_0x41baae[_0x45b305(0x34b)](stablecoins[_0x45b305(0x231)][_0x45b305(0x332)]))_0x41baae[_0x45b305(0x240)](stablecoins['eur'][_0x45b305(0x332)]);if(!_0x41baae[_0x45b305(0x34b)](stablecoins['usd'][_0x45b305(0x332)]))_0x41baae[_0x45b305(0x240)](stablecoins['usd'][_0x45b305(0x332)]);if(config[_0x45b305(0x2aa)][_0x45b305(0x1e8)](_0x45b305(0x226))){if(!_0x41baae[_0x45b305(0x34b)]('BNB/'+config['basecoin']))_0x41baae[_0x45b305(0x240)](_0x45b305(0x20d)+config[_0x45b305(0x25f)]);}loadCoins(_0x41baae),_0x41baae=validateSymbols(_0x41baae);const _0x45f318=async _0xcbcadb=>{const _0x17548f=_0x45b305;let _0x4e50e7;try{const _0x544965=await getTickers(_0xcbcadb);Object['entries'](_0x544965)['forEach'](_0x4400e8=>{const _0xfeb86a=_0x332f;_0x4e50e7=_0x4400e8[0x1][_0xfeb86a(0x332)],global[_0xfeb86a(0x209)][noslash(_0x4e50e7)]=_0x4400e8[0x1][_0xfeb86a(0x334)],global[_0xfeb86a(0x207)][_0x4e50e7]=_0x4400e8[0x1]['percentage'];});}catch(_0x3befd3){await handleError(_0x3befd3,_0x17548f(0x282),_0x4e50e7);}},_0x5b7a3b=async _0x66613b=>{const _0x2ab902=_0x45b305;while(initCycle==_0x5050f9){if(!botPaused)try{const _0x322f49=await exchange[_0x2ab902(0x27b)](_0x66613b);global[_0x2ab902(0x209)][noslash(_0x322f49[0x0][_0x2ab902(0x332)])]=_0x322f49[0x0][_0x2ab902(0x21b)],await sleep(0x3e8);}catch(_0x1755eb){if(!exchangeStopped)await handleError(_0x1755eb,_0x2ab902(0x2fb),_0x66613b);}else await sleep(0x64);}},_0xcc7a9c=async _0x38a9c2=>{const _0x33bab5=_0x45b305;while(initCycle==_0x5050f9){if(!botPaused){let _0xbd662f;try{await sleep(0x3c*0x3e8);const _0x1cf2fa=await getTickers(_0x38a9c2);Object[_0x33bab5(0x24e)](_0x1cf2fa)['forEach'](_0x20e2df=>{const _0x51e62e=_0x33bab5;_0xbd662f=_0x20e2df[0x1][_0x51e62e(0x332)],global['change'][_0xbd662f]=_0x20e2df[0x1][_0x51e62e(0x200)];});}catch(_0x483c06){if(!exchangeStopped)await handleError(_0x483c06,_0x33bab5(0x213),_0xbd662f);}}else await sleep(0x64);}},_0x37717d=async _0x42b1be=>{const _0x574814=_0x45b305;while(initCycle==_0x5050f9){if(!botPaused)try{const _0x28a7a6=await exchange[_0x574814(0x23f)](_0x42b1be);initCycle==_0x5050f9&&_0x28a7a6[_0x574814(0x2b3)](_0xbed597=>{updateNumberCoinsCcxt(_0xbed597);});}catch(_0x173b3c){if(!exchangeStopped)await handleError(_0x173b3c,_0x574814(0x31e));}else await sleep(0x64);}};_0x45f318(_0x41baae),_0xcc7a9c(_0x41baae),_0x41baae[_0x45b305(0x2b3)](_0x5c8525=>{_0x5b7a3b(_0x5c8525),_0x37717d(_0x5c8525);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2acbb8){const _0x4fccf5=_0x36bc83;let _0x4a02f0={};try{if(config[_0x4fccf5(0x2aa)]!=_0x4fccf5(0x2e7))_0x4a02f0=await exchange[_0x4fccf5(0x257)](_0x2acbb8);else for(const _0x8cb2ef of _0x2acbb8){const _0x2c3b87=await exchange[_0x4fccf5(0x2a7)](_0x8cb2ef);_0x4a02f0[_0x8cb2ef]=_0x2c3b87;}return _0x4a02f0;}catch(_0x1fdc51){throw _0x1fdc51;}}async function watchTransactions(){const _0x20a0b8=_0x36bc83;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x1701d7=await getCoins(),[_0x4e3010,_0x15c22f]=_0x1701d7;let _0x1235df=[];currentCoins['forEach'](_0x580b9e=>{const _0x5bd263=_0x332f,_0x3d3500=_0x4e3010[_0x5bd263(0x313)](_0x56948f=>_0x56948f['coin']==_0x580b9e[_0x5bd263(0x379)]);if(_0x3d3500){if(_0x580b9e[_0x5bd263(0x2d2)]!=_0x3d3500[_0x5bd263(0x2d2)]){let _0x30e082;if(_0x580b9e[_0x5bd263(0x379)]!=config[_0x5bd263(0x25f)]){const _0x547581=global[_0x5bd263(0x209)][noslash(_0x580b9e[_0x5bd263(0x332)])];_0x30e082=_0x580b9e[_0x5bd263(0x2a2)]?0x1/_0x547581:_0x547581;}else _0x30e082=0x1;_0x1235df[_0x5bd263(0x240)]({'coin':_0x580b9e[_0x5bd263(0x379)],'symbol':_0x580b9e['symbol'],'price':_0x30e082,'number':Number(formatResult(_0x3d3500[_0x5bd263(0x2d2)]-_0x580b9e[_0x5bd263(0x2d2)],0x8)),'basecoinvalue':_0x30e082*(_0x3d3500[_0x5bd263(0x2d2)]-_0x580b9e[_0x5bd263(0x2d2)])});}}});if(_0x1235df[_0x20a0b8(0x233)]==0x1&&!blockTransactionDetection){if(config[_0x20a0b8(0x1ed)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x1235df[0x0][_0x20a0b8(0x24d)]+_0x20a0b8(0x25b)+lastFees[_0x20a0b8(0x36d)]);if(lastFees[_0x20a0b8(0x36d)]==0x0||Math[_0x20a0b8(0x263)](_0x1235df[0x0][_0x20a0b8(0x24d)])>lastFees[_0x20a0b8(0x36d)]){delete _0x1235df[0x0][_0x20a0b8(0x332)],delete _0x1235df[0x0][_0x20a0b8(0x24d)];let _0x1c78a8=[],_0x5e7523=[...config[_0x20a0b8(0x1e5)]]||[],_0x5f16d4=config[_0x20a0b8(0x1e5)];_0x5e7523['sort']((_0x58d7a1,_0x2a82c0)=>_0x58d7a1[_0x20a0b8(0x2eb)]>_0x2a82c0[_0x20a0b8(0x2eb)]?-0x1:_0x2a82c0[_0x20a0b8(0x2eb)]>_0x58d7a1[_0x20a0b8(0x2eb)]?0x1:0x0);const _0x39826c=getDate();if(_0x5e7523[0x0]){const _0x4905cc=fns[_0x20a0b8(0x23e)](_0x5e7523[0x0][_0x20a0b8(0x2eb)],_0x20a0b8(0x31a),new Date()),_0x408850=fns['parse'](_0x39826c,_0x20a0b8(0x31a),new Date());if(fns[_0x20a0b8(0x302)](_0x4905cc,_0x408850)){_0x1c78a8=_0x5e7523[0x0][_0x20a0b8(0x1e4)];const _0x36eab3=_0x1c78a8[_0x20a0b8(0x313)](_0x8ae57d=>_0x8ae57d[_0x20a0b8(0x379)]==_0x1235df[0x0]['coin']);_0x36eab3?(_0x36eab3[_0x20a0b8(0x2d2)]+=_0x1235df[0x0]['number'],_0x36eab3[_0x20a0b8(0x2d2)]==0x0&&(_0x1c78a8=_0x1c78a8['filter'](_0x368106=>{const _0x3b5ade=_0x20a0b8;return _0x368106[_0x3b5ade(0x379)]!=_0x1235df[0x0][_0x3b5ade(0x379)];}))):_0x1c78a8['push'](_0x1235df[0x0]);const _0x5c377c=_0x5f16d4[_0x20a0b8(0x313)](_0x201088=>_0x201088['date']==_0x39826c);_0x5c377c[_0x20a0b8(0x1e4)]=_0x1c78a8;}else _0x5f16d4[_0x20a0b8(0x240)]({'date':_0x39826c,'changes':[_0x1235df[0x0]]});}const _0x5b2735=_0x5f16d4['find'](_0x1fdc3b=>_0x1fdc3b['date']==_0x39826c);if(_0x5b2735){let _0x4f6b6b=!![];_0x5b2735[_0x20a0b8(0x1e4)]['forEach'](_0xfd370=>{const _0x9a72e4=_0x20a0b8;if(_0xfd370[_0x9a72e4(0x2d2)]!=0x0)_0x4f6b6b=![];}),_0x4f6b6b&&(_0x5f16d4=_0x5f16d4['filter'](_0x625d6d=>{const _0x2e4a42=_0x20a0b8;return _0x625d6d[_0x2e4a42(0x2eb)]!=_0x39826c;}));}let _0x3f0ed0=dbConfig[_0x20a0b8(0x323)](_0x20a0b8(0x262))[_0x20a0b8(0x313)]({'botID':botID})[_0x20a0b8(0x360)]();_0x3f0ed0&&(dbConfig['get']('bot')[_0x20a0b8(0x313)]({'botID':botID})[_0x20a0b8(0x293)]({'liquidity':_0x5f16d4})[_0x20a0b8(0x2f1)](),config[_0x20a0b8(0x1e5)]=_0x5f16d4),logHistory(_0x20a0b8(0x212),_0x20a0b8(0x269)+Math[_0x20a0b8(0x263)](_0x1235df[0x0][_0x20a0b8(0x2d2)])+'\x20'+_0x1235df[0x0][_0x20a0b8(0x379)]+'\x20'+(_0x1235df[0x0]['number']>0x0?_0x20a0b8(0x21d):_0x20a0b8(0x33e))+_0x20a0b8(0x215)),proxyEmit(_0x20a0b8(0x32d),emittedConfiguration());}else logger[_0x20a0b8(0x20b)](_0x20a0b8(0x370)+Math[_0x20a0b8(0x263)](_0x1235df[0x0]['number'])+'\x20'+_0x1235df[0x0][_0x20a0b8(0x379)]+'\x20'+(_0x1235df[0x0][_0x20a0b8(0x2d2)]>0x0?'added':_0x20a0b8(0x33e)));transactionDetected=!![];}else logger['debug'](_0x20a0b8(0x269)+Math[_0x20a0b8(0x263)](_0x1235df[0x0]['number'])+'\x20'+_0x1235df[0x0][_0x20a0b8(0x379)]+'\x20'+(_0x1235df[0x0][_0x20a0b8(0x2d2)]>0x0?_0x20a0b8(0x21d):_0x20a0b8(0x33e))+_0x20a0b8(0x201));}currentCoins=_0x4e3010,currentCoinsAll=_0x15c22f,await sleep(watchTransactionsInterval);}catch(_0x1755b5){if(!exchangeStopped)await handleError(_0x1755b5,_0x20a0b8(0x2d7));}else await sleep(0x64);}}async function loadSymbols(){const _0x53a941=_0x36bc83;try{markets=await exchange[_0x53a941(0x258)](),allSymbols=[],Object[_0x53a941(0x24e)](markets)[_0x53a941(0x2b3)](_0x18e37a=>{const _0x243ca7=_0x53a941;_0x18e37a[0x1][_0x243ca7(0x288)]&&_0x18e37a[0x1][_0x243ca7(0x1ec)]&&allSymbols['push'](_0x18e37a[0x0]);});}catch(_0x4dd247){throw _0x4dd247;}}function validateSymbols(_0x3a9f29){let _0x5d839e=[];return _0x3a9f29['forEach'](_0x457d55=>{const _0xd3aa20=_0x332f;!allSymbols[_0xd3aa20(0x34b)](_0x457d55)?logHistory(_0xd3aa20(0x301),_0xd3aa20(0x2e5)+_0x457d55+_0xd3aa20(0x365)):_0x5d839e['push'](_0x457d55);}),_0x5d839e;}async function initclient(){const _0x397c66=_0x36bc83;proxyEmit(_0x397c66(0x32d),emittedConfiguration()),proxyEmit(_0x397c66(0x224),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x397c66(0x340),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x1dc27b=getNormalizedPerformance();emitPerformance(_0x1dc27b),getStartingBalances(_0x1dc27b);}async function toggleBotMode(){const _0x3247fd=_0x36bc83;let _0x28b06f=dbConfig[_0x3247fd(0x323)]('bot')['find']({'botID':botID})['value']();if(_0x28b06f){const _0x5236e1=!_0x28b06f[_0x3247fd(0x29b)];dbConfig['get'](_0x3247fd(0x262))[_0x3247fd(0x313)]({'botID':botID})[_0x3247fd(0x293)]({'headless':_0x5236e1})[_0x3247fd(0x2f1)](),config[_0x3247fd(0x29b)]=_0x5236e1,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x5bf22f=_0x36bc83;process['send']({'updatebotmanager':!![]},_0x342ea5=>{}),logger['debug'](_0x5bf22f(0x2d9)+config[_0x5bf22f(0x29b)]);}async function loadCoins(_0x523113){const _0x25f034=_0x36bc83;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x2334a1,_0x45b140=0x0,_0x10b4d4=0x0;_0x523113[_0x25f034(0x2b3)](_0x117e56=>{const _0x3bf17f=_0x25f034;loading[_0x3bf17f(0x20c)]['push'](_0x117e56);}),loadingCanceled=![];let _0x55a254=![];while(_0x2334a1!=_0x523113['length']+maxLoadingProgress){_0x2334a1=loadingProgress,_0x523113[_0x25f034(0x2b3)](_0x1de1e3=>{const _0x322571=_0x25f034;if(global[_0x322571(0x209)][noslash(_0x1de1e3)]){loading[_0x322571(0x20c)]=loading[_0x322571(0x20c)][_0x322571(0x2e3)](_0x359d38=>_0x359d38!=_0x1de1e3);if(!watchedSymbols[_0x322571(0x34b)](_0x1de1e3))watchedSymbols[_0x322571(0x240)](_0x1de1e3);_0x2334a1++;}}),loading[_0x25f034(0x2a0)]=Math[_0x25f034(0x366)](_0x2334a1/(_0x523113[_0x25f034(0x233)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x10b4d4>0x1e*0x5&&(loading[_0x25f034(0x256)]=!![],emitLoadingProgress()),_0x10b4d4>0x78*0x5&&!_0x55a254&&(_0x55a254=!![],logHistory(_0x25f034(0x301),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading['remainingSymbols'][_0x25f034(0x2f0)](',\x20')+_0x25f034(0x2da)),logHistory('error',_0x25f034(0x280)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x38cd70=_0x25f034;process[_0x38cd70(0x296)]({'stop':'restart'},_0x5af28c=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x25f034(0x273)]=!![],emitLoadingProgress();break;}else _0x45b140!=loading[_0x25f034(0x2a0)]&&(_0x45b140=loading[_0x25f034(0x2a0)],emitLoadingProgress()),_0x10b4d4++,await sleep(0xc8);}_0x2334a1==_0x523113['length']+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':_0x25f034(0x203),'live':_0x25f034(0x2e0)},_0x481a81=>{}),_0x55a254&&logHistory('success',_0x25f034(0x305)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x203ee0=_0x36bc83;proxyEmit(_0x203ee0(0x32d),{...emittedConfiguration(),'configstate':_0x203ee0(0x344)});}function emitLoadingProgress(){const _0x1146ce=_0x36bc83;proxyEmit(_0x1146ce(0x23b),loading);}async function getFiat(){const _0x3d90e8=_0x36bc83;let _0x5ada3b=global[_0x3d90e8(0x209)][stablecoins[_0x3d90e8(0x231)]['coin']],_0x2663e4=global['ticker'][stablecoins[_0x3d90e8(0x350)]['coin']];return{'eur':Number(_0x5ada3b),'usd':Number(_0x2663e4)};}function capitalize(_0x91da85){const _0x33f4fd=_0x36bc83;return _0x91da85['substring'](0x0,0x1)['toUpperCase']()+_0x91da85[_0x33f4fd(0x2bd)](0x1);}function supportedExchanges(){const _0x3def9a=_0x36bc83,_0x43f547=['ws',_0x3def9a(0x257),_0x3def9a(0x2a7),_0x3def9a(0x27b),_0x3def9a(0x23f),_0x3def9a(0x300),_0x3def9a(0x35f),_0x3def9a(0x227),'fetchClosedOrders',_0x3def9a(0x330)];let _0x55e0fe=[],_0x484249=[],_0x1c8254=ccxt[_0x3def9a(0x2b4)][_0x3def9a(0x224)];_0x1c8254[_0x3def9a(0x2b3)](_0x4f1ade=>{const _0x468853=_0x3def9a;try{const _0x6f69bd=new ccxt[(_0x468853(0x2b4))][_0x4f1ade]();_0x484249[_0x468853(0x240)](_0x6f69bd);}catch(_0x496f56){}}),_0x484249[_0x3def9a(0x2b3)](_0x269255=>{const _0x532a74=_0x3def9a;let _0x4c0cf0=0x0;_0x43f547[_0x532a74(0x2b3)](_0x3c2802=>{const _0x21a8a3=_0x532a74;_0x3c2802 in _0x269255[_0x21a8a3(0x318)]&&_0x269255['has'][_0x3c2802]&&_0x4c0cf0++;}),_0x4c0cf0==_0x43f547[_0x532a74(0x233)]&&_0x55e0fe['push'](capitalize(_0x269255['id']));});let _0x3c9301=[];return _0x1c8254[_0x3def9a(0x2b3)](_0x42a9ef=>{const _0x3da5c0=_0x3def9a;_0x42a9ef=capitalize(_0x42a9ef);if(!_0x55e0fe[_0x3da5c0(0x34b)](_0x42a9ef))_0x3c9301['push'](_0x42a9ef);}),_0x55e0fe;}function setStartDatePerformance(){const _0x5deaa2=_0x36bc83;if(config&&config[_0x5deaa2(0x1e5)][0x0][_0x5deaa2(0x1e4)][_0x5deaa2(0x233)]!=0x0){const _0x4c3aee=config['liquidity'][0x0][_0x5deaa2(0x1e4)];dbPerformance['get'](_0x5deaa2(0x1ef))['find']({'date':config[_0x5deaa2(0x307)]})['assign']({'coins':_0x4c3aee})['write']();}}async function recreateCoinResults(){const _0x4ff7f5=_0x36bc83;let _0x222caa,_0x2621ed=[];try{const _0x1ff34d=fns[_0x4ff7f5(0x2ff)](fns[_0x4ff7f5(0x358)](config['startdate'][_0x4ff7f5(0x324)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4f9549 of currentCoins){if(_0x4f9549[_0x4ff7f5(0x379)]!=config[_0x4ff7f5(0x25f)]){let _0x446d8f=0x0,_0x3690f4,_0x3a2419;_0x222caa=await getAllEventOrders(_0x4f9549[_0x4ff7f5(0x332)]);if(_0x222caa[_0x4ff7f5(0x233)]>0x0)_0x222caa['forEach'](_0x53731b=>{const _0x455cf3=_0x4ff7f5,_0x276134=_0x4f9549[_0x455cf3(0x332)][_0x455cf3(0x34b)](config['basecoin']+'/');_0x2621ed['push']({'datetime':_0x53731b[_0x455cf3(0x2d3)],'coin':_0x4f9549['coin'],'symbol':_0x4f9549['symbol'],'side':_0x53731b[_0x455cf3(0x2f9)],'reverse':_0x276134,'amount':formatResult(_0x53731b['filled'],0x8),'filled':formatResult(_0x53731b[_0x455cf3(0x2b8)],0x8),'price':formatResult(_0x53731b[_0x455cf3(0x21b)],0x8)}),_0x446d8f=_0x53731b[_0x455cf3(0x2f9)]==_0x455cf3(0x2e4)?_0x446d8f+_0x53731b[_0x455cf3(0x2b8)]:_0x446d8f-_0x53731b[_0x455cf3(0x2b8)];if(!_0x3a2419)_0x3a2419=_0x53731b[_0x455cf3(0x21b)];});_0x3690f4=_0x4f9549[_0x4ff7f5(0x2d2)]-_0x446d8f;let _0x15712f;config[_0x4ff7f5(0x1e5)][_0x4ff7f5(0x2b3)](_0x2f8981=>{const _0x5bac9d=_0x4ff7f5;!_0x15712f&&(_0x15712f=_0x2f8981[_0x5bac9d(0x1e4)]['find'](_0x53c65c=>_0x53c65c[_0x5bac9d(0x379)]==_0x4f9549[_0x5bac9d(0x379)]),_0x15712f&&(_0x3690f4=_0x15712f[_0x5bac9d(0x2d2)],_0x3a2419=_0x15712f[_0x5bac9d(0x21b)]));});let _0x4b6965=dbCoinResults[_0x4ff7f5(0x323)](_0x4ff7f5(0x242))[_0x4ff7f5(0x313)]({'coin':_0x4f9549['coin']})[_0x4ff7f5(0x360)]();_0x4b6965={'coin':_0x4f9549[_0x4ff7f5(0x379)],'number':_0x3690f4,'breakeven':_0x3a2419,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x4ff7f5(0x323)](_0x4ff7f5(0x242))[_0x4ff7f5(0x313)]({'coin':_0x4f9549['coin']})[_0x4ff7f5(0x293)](_0x4b6965)['write']();}}_0x2621ed['sort']((_0x284604,_0x23ebb0)=>_0x284604[_0x4ff7f5(0x2d3)]>_0x23ebb0[_0x4ff7f5(0x2d3)]?0x1:_0x23ebb0[_0x4ff7f5(0x2d3)]>_0x284604[_0x4ff7f5(0x2d3)]?-0x1:0x0);let _0xdc9cb9=0x0;for(let _0x4f9c21 of _0x2621ed){await updateCoinResults(_0x4f9c21,!![]);}}catch(_0x1964e6){await handleError(_0x1964e6,'recreateCoinResults()');}}async function getAllEventOrders(_0x3d9771){const _0x4fffe3=_0x36bc83;let _0x42014c=[],_0x11574a=dbLogs[_0x4fffe3(0x323)](_0x4fffe3(0x2f8))[_0x4fffe3(0x2e3)](_0x335f37=>{const _0x307cba=_0x4fffe3,_0x39cff5=_0x335f37['event'][_0x307cba(0x250)]();return _0x39cff5[_0x307cba(0x34b)](_0x3d9771[_0x307cba(0x250)]())&&(_0x39cff5[_0x307cba(0x34b)](_0x307cba(0x322))&&_0x39cff5['includes'](_0x307cba(0x287))||_0x39cff5[_0x307cba(0x34b)](_0x307cba(0x2b8))&&_0x39cff5[_0x307cba(0x34b)](_0x307cba(0x287)));})[_0x4fffe3(0x2e9)](_0x4fffe3(0x319))[_0x4fffe3(0x360)]();return _0x11574a['forEach'](_0x3155f3=>{const _0x422a3b=_0x4fffe3,_0x5344bb=_0x3155f3['event'][_0x422a3b(0x34b)](_0x422a3b(0x35c))?'sell':_0x422a3b(0x2e4),_0x10c7ac=/#([0-9]|\.)+\s/i,_0x43ef83=Number(_0x10c7ac[_0x422a3b(0x1f8)](_0x3155f3['event'])[0x0]['slice'](0x1)),_0x2a31c2=/@([0-9]|\.)+$/i,_0x4140b6=Number(_0x2a31c2[_0x422a3b(0x1f8)](_0x3155f3['event'])[0x0][_0x422a3b(0x2bf)](0x1));_0x42014c[_0x422a3b(0x240)]({'datetime':_0x3155f3[_0x422a3b(0x319)],'coin':symbolToCoin(_0x3d9771),'symbol':_0x3d9771,'side':_0x5344bb,'amount':_0x43ef83,'filled':_0x43ef83,'price':_0x4140b6});}),_0x42014c;}async function getAllOrders(_0x4c6cbf,_0x1347b4){const _0x2165ee=_0x36bc83;let _0x22c80b=[];while(_0x1347b4<exchange['milliseconds']()){const _0x323fa9=0x1f4;try{const _0x5606f5=await exchange[_0x2165ee(0x30e)](_0x4c6cbf,_0x1347b4,_0x323fa9);if(_0x5606f5[_0x2165ee(0x233)])_0x1347b4=_0x5606f5[_0x5606f5[_0x2165ee(0x233)]-0x1][_0x2165ee(0x35a)]+0x1,_0x22c80b=_0x22c80b[_0x2165ee(0x281)](_0x5606f5);else break;}catch(_0x3f8517){await handleError(_0x3f8517,'getAllOrders()',_0x4c6cbf);}}return _0x22c80b;}async function validate24hChanges(){const _0xc766f2=_0x36bc83;for(const _0x34130e of currentCoins){if(_0x34130e[_0xc766f2(0x379)]!=config[_0xc766f2(0x25f)]){let _0x134913;_0x34130e['reverse']?_0x134913=formatResult((0x1/(global[_0xc766f2(0x207)][noslash(_0x34130e[_0xc766f2(0x332)])]/0x64+0x1)-0x1)*0x64,0x3):_0x134913=global[_0xc766f2(0x207)][noslash(_0x34130e[_0xc766f2(0x332)])],_0x134913<config[_0xc766f2(0x20f)]&&(logHistory(_0xc766f2(0x301),_0x34130e['coin']+_0xc766f2(0x272)+_0x134913+'%'),logHistory(_0xc766f2(0x301),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0xc766f2(0x301),_0xc766f2(0x214)),await storeHeadless({'headless':![]}));}}}function _0x332f(_0x259bad,_0x309a0f){const _0xa01c4b=_0x57d2();return _0x332f=function(_0x2834b3,_0x1876cb){_0x2834b3=_0x2834b3-0x1e0;let _0x57d2c3=_0xa01c4b[_0x2834b3];return _0x57d2c3;},_0x332f(_0x259bad,_0x309a0f);}function isOlderVersion(_0x5a5671,_0x54bea0){const _0x51be94=_0x36bc83;if(!_0x5a5671)return!![];const _0x1e4b88=_0x54bea0['split']('.'),_0x1d66be=_0x5a5671[_0x51be94(0x306)]('.');for(var _0xc896b1=0x0;_0xc896b1<_0x1d66be['length'];_0xc896b1++){const _0x235e37=~~_0x1d66be[_0xc896b1],_0x1d4dca=~~_0x1e4b88[_0xc896b1];if(_0x235e37<_0x1d4dca)return!![];if(_0x235e37>_0x1d4dca)return![];}return![];}async function oneTimeMigration(){const _0x1a565c=_0x36bc83;let _0x5dcb18=dbLogs[_0x1a565c(0x323)](_0x1a565c(0x316))['value']();if(isOlderVersion(_0x5dcb18,'2.3.5')){let _0x5db7af=[];const _0x4f3d84=dbLogs[_0x1a565c(0x323)]('logs')[_0x1a565c(0x360)]();_0x4f3d84[_0x1a565c(0x2b3)](_0xb41cfc=>{const _0x2aaf95=_0x1a565c;_0x5db7af['push']({'time':_0xb41cfc[_0x2aaf95(0x319)],'type':_0xb41cfc[_0x2aaf95(0x34a)],'event':_0xb41cfc[_0x2aaf95(0x291)]});}),dbLogs[_0x1a565c(0x323)](_0x1a565c(0x2f8))[_0x1a565c(0x293)](_0x5db7af)[_0x1a565c(0x2f1)]();}let _0x2f5a77=dbConfig[_0x1a565c(0x323)](_0x1a565c(0x316))['value']();if(isOlderVersion(_0x2f5a77,_0x1a565c(0x33a))){let _0x22d143=dbConfig[_0x1a565c(0x323)](_0x1a565c(0x262))[_0x1a565c(0x313)]({'botID':botID})[_0x1a565c(0x360)]();if(_0x22d143){let _0x466cf8=[];_0x22d143[_0x1a565c(0x28e)][_0x1a565c(0x2b3)](_0x4f375a=>{const _0x244d3b=_0x1a565c;_0x466cf8[_0x244d3b(0x240)]({'coin':_0x4f375a[_0x244d3b(0x379)],'number':_0x4f375a[_0x244d3b(0x278)],'price':_0x4f375a[_0x244d3b(0x253)]}),delete _0x4f375a[_0x244d3b(0x278)],delete _0x4f375a['startprice'];});if(_0x466cf8[_0x1a565c(0x233)]!==0x0)fs[_0x1a565c(0x2cd)](configbackuppath+(_0x1a565c(0x315)+botID+'.json'),JSON['stringify'](_0x466cf8,null,0x4),function(_0x5bf258){if(_0x5bf258){}});const _0x4c6532=(_0x3fcfe2,_0x50f055)=>{const _0x47c989=_0x1a565c;let _0x8e31ca=[];_0x50f055[_0x47c989(0x2b3)](_0x5c3cfd=>{const _0x5d482c=_0x47c989,_0x239e9f=_0x3fcfe2[_0x5d482c(0x313)](_0x1475da=>_0x1475da[_0x5d482c(0x379)]==_0x5c3cfd['coin']);if(!_0x239e9f)_0x8e31ca[_0x5d482c(0x240)](_0x5c3cfd);});let _0x255363=[];return _0x3fcfe2[_0x47c989(0x2b3)](_0x38b5d6=>{const _0x4249fb=_0x47c989,_0x596d58=_0x50f055['find'](_0xcbeb27=>_0xcbeb27['coin']==_0x38b5d6['coin']);if(!_0x596d58||_0x596d58[_0x4249fb(0x2d2)]==0x0&&_0x38b5d6[_0x4249fb(0x2d2)]!=0x0)_0x255363['push'](_0x38b5d6);}),{'missingDay1':_0x8e31ca,'notInDay2':_0x255363};},_0x400c02=dbPerformance[_0x1a565c(0x323)](_0x1a565c(0x1ef))[_0x1a565c(0x2bb)]()['value']();if(_0x400c02[_0x1a565c(0x233)]>0x1){const {missingDay1:_0x386ccf,notInDay2:_0x37a9b8}=_0x4c6532(_0x466cf8,_0x400c02[0x1][_0x1a565c(0x242)]);_0x466cf8=[..._0x466cf8,..._0x386ccf],_0x37a9b8[_0x1a565c(0x2b3)](_0x11b6f6=>{const _0x4f4607=_0x1a565c;let _0x51ab03=_0x466cf8[_0x4f4607(0x248)](_0x56c229=>_0x56c229[_0x4f4607(0x379)]==_0x11b6f6['coin']);_0x51ab03!=-0x1&&_0x466cf8[_0x4f4607(0x376)](_0x51ab03,0x1);});}_0x466cf8[_0x1a565c(0x2ab)]((_0x419284,_0x4c4b2d)=>_0x419284['coin']>_0x4c4b2d[_0x1a565c(0x379)]?0x1:_0x4c4b2d[_0x1a565c(0x379)]>_0x419284[_0x1a565c(0x379)]?-0x1:0x0);let _0x2e1c10=[{'date':_0x22d143[_0x1a565c(0x307)],'changes':_0x466cf8}];_0x400c02[_0x1a565c(0x233)]>0x2&&_0x400c02[_0x1a565c(0x2b3)]((_0x1980c2,_0x48a1e6)=>{const _0x2c7991=_0x1a565c;if(_0x48a1e6>0x0&&_0x48a1e6<_0x400c02[_0x2c7991(0x233)]-0x1){const {missingDay1:_0x5ce873,notInDay2:_0x1ebc47}=_0x4c6532(_0x400c02[_0x48a1e6][_0x2c7991(0x242)],_0x400c02[_0x48a1e6+0x1][_0x2c7991(0x242)]);_0x466cf8=[],(_0x5ce873['length']!=0x0||_0x1ebc47['length']!=0x0)&&(_0x5ce873['length']!=0x0&&_0x466cf8[_0x2c7991(0x240)](..._0x5ce873),_0x1ebc47['length']!=0x0&&(_0x1ebc47['forEach'](_0x338772=>{const _0x33b62f=_0x2c7991;_0x338772['number']=-_0x338772[_0x33b62f(0x2d2)];}),_0x466cf8[_0x2c7991(0x240)](..._0x1ebc47)),_0x466cf8[_0x2c7991(0x2ab)]((_0x4dcb19,_0x30e3a0)=>_0x4dcb19[_0x2c7991(0x379)]>_0x30e3a0[_0x2c7991(0x379)]?0x1:_0x30e3a0[_0x2c7991(0x379)]>_0x4dcb19['coin']?-0x1:0x0),_0x2e1c10[_0x2c7991(0x240)]({'date':_0x400c02[_0x48a1e6+0x1]['date'],'changes':_0x466cf8}));}}),dbConfig[_0x1a565c(0x323)](_0x1a565c(0x262))[_0x1a565c(0x313)]({'botID':botID})[_0x1a565c(0x293)]({..._0x22d143,'liquidity':_0x2e1c10})['write']();}}if(isOlderVersion(_0x2f5a77,_0x1a565c(0x234))){let _0x3f6501=dbConfig[_0x1a565c(0x323)](_0x1a565c(0x262))[_0x1a565c(0x313)]({'botID':botID})[_0x1a565c(0x360)]();if(_0x3f6501){const _0x8986c0=_0x3f6501['exchange'],_0xa4c293=_0x8986c0?capitalize(_0x8986c0):_0x1a565c(0x226);dbConfig['get'](_0x1a565c(0x262))[_0x1a565c(0x313)]({'botID':botID})[_0x1a565c(0x293)]({'exchange':_0xa4c293})[_0x1a565c(0x2f1)]();}}let _0x3cb1bb=dbPerformance[_0x1a565c(0x323)](_0x1a565c(0x316))[_0x1a565c(0x360)]();isOlderVersion(_0x3cb1bb,'2.3.5')&&setStartDatePerformance();let _0x57790c=dbCoinResults[_0x1a565c(0x323)]('version')['value']();if(isOlderVersion(_0x57790c,_0x1a565c(0x264))){let _0x18b2ad=dbCoinResults[_0x1a565c(0x323)](_0x1a565c(0x242))[_0x1a565c(0x360)]();if(_0x18b2ad[_0x1a565c(0x233)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4c26c4=_0x36bc83;dbConfig[_0x4c26c4(0x274)](_0x4c26c4(0x316),serverversion)['write'](),dbPerformance[_0x4c26c4(0x274)](_0x4c26c4(0x316),serverversion)[_0x4c26c4(0x2f1)](),dbLogs['set'](_0x4c26c4(0x316),serverversion)[_0x4c26c4(0x2f1)](),dbCoinResults[_0x4c26c4(0x274)]('version',serverversion)[_0x4c26c4(0x2f1)]();}function getConfiguration(_0x427f39){const _0x14b3ef=_0x36bc83;let _0x554968=dbConfig[_0x14b3ef(0x323)](_0x14b3ef(0x262))['find']({'botID':_0x427f39})['value']();if(_0x554968){let _0x3ff837=![];typeof _0x554968[_0x14b3ef(0x36e)]==_0x14b3ef(0x222)&&(_0x554968={..._0x554968,'threshold':Number(_0x554968[_0x14b3ef(0x36e)])},_0x3ff837=!![]),_0x554968[_0x14b3ef(0x20f)]==undefined&&(_0x554968={..._0x554968,'change24h':-0x14},_0x3ff837=!![]),_0x554968[_0x14b3ef(0x204)]==undefined&&(_0x554968={..._0x554968,'fiat':'USD'},_0x3ff837=!![]),_0x554968[_0x14b3ef(0x363)]==undefined&&(_0x554968={..._0x554968,'onepagemode':settings[_0x14b3ef(0x363)]},_0x3ff837=!![]),_0x554968[_0x14b3ef(0x238)]==undefined&&(_0x554968={..._0x554968,'colorscheme':_0x14b3ef(0x297)},_0x3ff837=!![]),_0x554968[_0x14b3ef(0x1ed)]==undefined&&(_0x554968={..._0x554968,'autoliquidity':!![]},_0x3ff837=!![]),_0x3ff837&&(_0x554968={'botID':_0x554968[_0x14b3ef(0x298)],'exchange':_0x554968[_0x14b3ef(0x2aa)],'apiKey':_0x554968[_0x14b3ef(0x2e2)],'apiSecret':_0x554968[_0x14b3ef(0x27c)],'apiPassword':_0x554968[_0x14b3ef(0x337)],'basecoin':_0x554968[_0x14b3ef(0x25f)],'botname':_0x554968[_0x14b3ef(0x2ed)],'showname':_0x554968[_0x14b3ef(0x270)],'threshold':_0x554968[_0x14b3ef(0x36e)],'ordertype':_0x554968[_0x14b3ef(0x26a)],'timeout':_0x554968[_0x14b3ef(0x256)],'fiat':_0x554968[_0x14b3ef(0x204)],'startdate':_0x554968[_0x14b3ef(0x307)],'recreate':_0x554968[_0x14b3ef(0x375)],'timeshift':_0x554968[_0x14b3ef(0x361)],'onepagemode':_0x554968[_0x14b3ef(0x363)],'headless':_0x554968[_0x14b3ef(0x29b)],'cooldown':_0x554968[_0x14b3ef(0x27e)],'change24h':_0x554968['change24h'],'emojibuy':_0x554968['emojibuy'],'emojisell':_0x554968[_0x14b3ef(0x29d)],'colorscheme':_0x554968[_0x14b3ef(0x238)],'portfolio':_0x554968[_0x14b3ef(0x28e)],'autoliquidity':_0x554968[_0x14b3ef(0x1ed)],'liquidity':_0x554968['liquidity'],'openOrders':_0x554968['openOrders']},dbConfig['get'](_0x14b3ef(0x262))['remove']()[_0x14b3ef(0x2f1)](),dbConfig[_0x14b3ef(0x323)]('bot')[_0x14b3ef(0x240)](_0x554968)[_0x14b3ef(0x2f1)]());}else _0x554968={'botID':_0x427f39,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x427f39,'showname':![],'threshold':0x3,'ordertype':_0x14b3ef(0x322),'timeout':0x14,'fiat':_0x14b3ef(0x2a9),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x14b3ef(0x361)],'onepagemode':settings[_0x14b3ef(0x363)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x14b3ef(0x297),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x554968;}function emittedConfiguration(){const _0x75daa4=_0x36bc83;let _0x47fed4;if(config['apiKey']=='')_0x47fed4={...config,'configstate':_0x75daa4(0x349)};else config[_0x75daa4(0x2e2)]==_0x75daa4(0x230)?_0x47fed4={...config,'configstate':_0x75daa4(0x2f6)}:(_0x47fed4={...config,'apiKey':'************','apiSecret':_0x75daa4(0x2c2)},config[_0x75daa4(0x337)]&&(_0x47fed4['apiPassword']=_0x75daa4(0x2c2)));return _0x47fed4;}function getSettings(){const _0x2922d0=_0x36bc83;return dbSettings[_0x2922d0(0x323)](_0x2922d0(0x249))[_0x2922d0(0x360)]();}function _0x57d2(){const _0x250441=['fees','floor','resetHistory','final','exec','uncaughtException','argv','PermissionDenied','deleteHistoryAlerts','Crypt','Unfilled\x20order(s)\x20canceled\x20after\x20','Order\x20amount\x20is\x20invalid:\x20','percentage','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','shift','enabled','fiat','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','RateLimitExceeded','change','UNLOCKED','ticker','5100108cToAnI','debug','remainingSymbols','BNB/','1503848rbezgJ','change24h','Insufficient\x20funds\x20to\x20execute\x20order:\x20','event-history','success','fetchTickers()','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','customId','Order(s)\x20not\x20validated\x20after\x20','DDoSProtection','Loading\x20completed','\x20|\x20Custom\x20ID:\x20','price','Unknown\x20error\x20occured','added','keys','exchange\x20not\x20reloaded','RequestTimeout','ask','string','InvalidOrder','exchanges','limit','Binance','fetchOpenOrders','stopExchange()','loadSymbols()','toString','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','add','Reset\x20|\x20','Exchange','test','***','eur','getSeconds','length','2.6.0','getMinutes','configuration-stored','USDC','colorscheme','Executed\x20','USDP','coin-loading-progress','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','delta','parse','watchOrders','push','yargs/yargs','coins','sendPortfolioTelegram','function','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','search','full','findIndex','settings','\x20not\x20responding','\x20minutes\x20-\x20','bb-secure.json','basecoinvalue','entries','cancelLoading','toLowerCase','valid','mkdirSync','startprice','1\x20-\x20Handle\x20open\x20orders','message','timeout','fetchTickers','loadMarkets','\x20exchange','Huobipro','\x20|\x20highest\x20fee:\x20','hybrid-crypto-js','padEnd','Market','basecoin','Saving\x20configuration','\x20API\x20secret\x20is\x20invalid','bot','abs','2.5.0','Cex','ccxt','\x20portfolio:</b>\x20\x0a\x0a','lowdb','Portfolio\x20change\x20detected:\x20','ordertype','cancelOrders()','-config.json','amount','\x20not\x20available','getStartingBalances','showname','Limit\x20(high-margin)','\x20has\x20a\x2024h\x20drop\x20of\x20','cancel','set','If\x20the\x20problem\x20remains,\x20your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync','emojibuy','001','startnumber','/backup/','storeFiat','watchTrades','apiSecret','bot-','cooldown','net-basecoin','Pausing\x20for\x20','concat','initTickers()','Trigger:\x20','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','LOCKED','Resetting\x20coin\x20results:\x20','order','active','getMonth','getCoinNumber()','</pre>','rightTxt','ORDERS.UNLOCKED','portfolio','UNLOCKING','sendMetricsTelegram','event','defaults','assign','unlinkSync','excluded','send','red_yellow_blue','botID','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Limit\x20(low-margin)','headless','/output-000.log','emojisell','min','ID:\x20','progress','\x20order:\x20','reverse','date-fns','./config/','constructor','Transaction\x20detection\x20blocked','fetchTicker','freeze','USD','exchange','sort','indexOf','BUSD','balancing\x20resumes\x20when\x20cooldown\x20ends','fromCodePoint','\x20metrics:</b>\x20\x0a\x0a','page','%\x20(','forEach','pro','\x20>\x20[DEBUG]\x20','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','\x20|\x20lock\x20orders:\x20','filled','distribution','cost','cloneDeep','ExchangeNotAvailable','substring','1\x20-\x20FILLED\x20unknown\x20order:\x20','slice','recent20','Executing\x20exchange\x20reload','************','orderId','args','Exception\x20thrown\x20in\x20','currency','open','\x20>\x20',':\x20timer\x20>','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','none','path','writeFile','buys','\x20:\x20','2\x20-\x20Handled\x20open\x20orders','warning','number','datetime','breakeven','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','performance','watchTransactions()','1\x20-\x20Unlock\x20orders','Headless:\x20','\x20-\x20bot\x20not\x20started','OnMaintenance','max','getPortfolio(1)','Order\x20is\x20invalid:\x20','ORDERS.UNLOCKING','running','153tpGiUY','apiKey','filter','buy','Invalid\x20symbol:\x20','Order\x20filled:\x20','Cryptocom','\x20exchange\x20error','sortBy','decrypt','date','initclient','botname','RSA-OAEP','299541rxMqwQ','join','write','\x20value','differenceInSeconds','ongoing','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','recovery','fee','logs','side','map','watchTrades()','<b>','orderstatus','11OHdsZA','format','cancelOrder','error','isEqual','80xXYPrJ','bots','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','split','startdate','getFullYear','trade','\x20network\x20error','81570sXMSIT','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','password','fetchClosedOrders','total','limit-low','\x20orders\x20in\x20less\x20than\x20','showConfig','find','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','starting-balance-','version','Avoiding\x20continuous\x20order\x20attempts','has','time','yyyy/MM/dd','stringify','toFixed','Manual\x20balancing\x20required','watchOrders()','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','1\x20-\x20Validate\x20orders:\x20','lowdb/adapters/FileSync','market','get','replace','bid','<pre>','<b>Bot\x20','Net\x20effect','Net\x20','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','getOpenOrders()','leftTxt','configuration','\x20closed\x20the\x20connection','Error\x20while\x20deleting\x20files:\x20','fetchBalance','-results.json','symbol','Cooldown\x20ended\x20-\x20balancing\x20resumed','last','18295QuHsgi','-------------------------------\x0a','apiPassword','InsufficientFunds','canceled','2.3.5','limits','getDate','642lICcbH','removed','MIN_NOTIONAL','balances','BTC','average','padStart','loading-canceled','\x20-\x20pausing\x20bot\x20for\x20','Huobi','API-key\x20format\x20invalid','Error\x20details:','initial','type','includes','getPortfolio(0)','no\x20open\x20orders','-performance.json','ETH','usd','No\x20more\x20open\x20orders\x20-\x20','offset','balancing\x20resumed','closed','getTime','getCoins()','getPortfolio','parseISO','log','timestamp','-events.json','sell','sells','ExchangeError','createOrder','value','timeshift','limit-high','onepagemode','kill','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','round','restart','Invalid\x20quantity','14322rTnUXt','openOrders','(((.+)+)+)+$','181141ELxCqu','highest','threshold','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Fee\x20discount\x20refund\x20detected:\x20','BNB','starting-balances','2\x20-\x20handling\x20FILLED\x20order:\x20','Bybit','recreate','splice','USDT','AuthenticationError','coin','createWriteStream','target','./logs/','/EUR','getHours','privateKey','changes','liquidity','net-fiat','EUR','startsWith','Invalid\x20API\x20key\x20or\x20secret\x20entered','existsSync','2nYlaZb','spot','autoliquidity','0\x20-\x20EXECUTION:\x20','data','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','apply','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled',',\x20must\x20be\x20a\x203\x20digit\x20number'];_0x57d2=function(){return _0x250441;};return _0x57d2();}function getSecure(){const _0x25ddc7=_0x36bc83;return dbSecure[_0x25ddc7(0x323)]('secure')['value']()||{};}function updateTimeshift(_0x2e778f){const _0x42878a=_0x36bc83;let _0xc943ac=dbConfig[_0x42878a(0x323)](_0x42878a(0x262))['find']({'botID':botID})['value']();_0xc943ac&&dbConfig[_0x42878a(0x323)](_0x42878a(0x262))['find']({'botID':botID})[_0x42878a(0x293)]({'timeshift':_0x2e778f})[_0x42878a(0x2f1)](),config[_0x42878a(0x361)]=_0x2e778f,proxyEmit(_0x42878a(0x32d),emittedConfiguration());}function updateOnepagemode(_0x33ae93){const _0x5b9aa6=_0x36bc83;let _0x161d30=dbConfig[_0x5b9aa6(0x323)](_0x5b9aa6(0x262))[_0x5b9aa6(0x313)]({'botID':botID})[_0x5b9aa6(0x360)]();_0x161d30&&dbConfig['get']('bot')[_0x5b9aa6(0x313)]({'botID':botID})[_0x5b9aa6(0x293)]({'onepagemode':_0x33ae93})['write'](),config['onepagemode']=_0x33ae93,proxyEmit(_0x5b9aa6(0x32d),emittedConfiguration());}async function storeConfiguration(_0x2dadbd){const _0x2bc66b=_0x36bc83;logger['debug'](_0x2bc66b(0x260));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x2bc66b(0x20b)](_0x2bc66b(0x2a6));let _0x42c0b0=![],_0x21a86a=![],_0x101a09=[];_0x2dadbd[_0x2bc66b(0x28e)]['forEach'](_0x4234a8=>{const _0x4f10bb=_0x2bc66b;if(!_0x4234a8[_0x4f10bb(0x295)]&&_0x4234a8['coin']!=_0x2dadbd[_0x4f10bb(0x25f)])_0x101a09[_0x4f10bb(0x240)](_0x4234a8[_0x4f10bb(0x332)]);}),_0x101a09[_0x2bc66b(0x2b3)](_0xdb9ff6=>{const _0x504052=_0x2bc66b,_0x3cc9c2=currentCoins[_0x504052(0x313)](_0x46c41a=>_0x46c41a['symbol']==_0xdb9ff6);!_0x3cc9c2&&(_0x42c0b0=!![]);}),currentCoins[_0x2bc66b(0x2b3)](_0x35b47b=>{const _0x48f372=_0x2bc66b;if(_0x35b47b[_0x48f372(0x379)]!=config['basecoin']){const _0x105976=_0x101a09['find'](_0x53c0b9=>_0x53c0b9==_0x35b47b['symbol']);!_0x105976&&(_0x42c0b0=!![]);}}),_0x2dadbd[_0x2bc66b(0x28e)][_0x2bc66b(0x2b3)](_0x5b21a0=>{const _0x15405c=_0x2bc66b,_0xb4eaca=config[_0x15405c(0x28e)][_0x15405c(0x313)](_0x5e2aa5=>_0x5e2aa5[_0x15405c(0x379)]==_0x5b21a0[_0x15405c(0x379)]);if(_0xb4eaca&&_0x5b21a0[_0x15405c(0x352)]!=_0xb4eaca[_0x15405c(0x352)])_0x21a86a=!![];});let _0x8f9cb5=dbConfig[_0x2bc66b(0x323)]('bot')['find']({'botID':botID})[_0x2bc66b(0x360)]();_0x2dadbd={..._0x2dadbd,'apiKey':crypt[_0x2bc66b(0x2ea)](secure[_0x2bc66b(0x1e3)],_0x2dadbd[_0x2bc66b(0x2e2)])[_0x2bc66b(0x255)],'apiSecret':crypt[_0x2bc66b(0x2ea)](secure['privateKey'],_0x2dadbd[_0x2bc66b(0x27c)])[_0x2bc66b(0x255)]};_0x2dadbd[_0x2bc66b(0x337)]&&(_0x2dadbd[_0x2bc66b(0x337)]=crypt[_0x2bc66b(0x2ea)](secure[_0x2bc66b(0x1e3)],_0x2dadbd['apiPassword'])[_0x2bc66b(0x255)]);let _0x56b293=![];if(_0x8f9cb5){_0x2dadbd[_0x2bc66b(0x2e2)]==_0x2bc66b(0x2c2)?_0x2dadbd[_0x2bc66b(0x2e2)]=config[_0x2bc66b(0x2e2)]:_0x56b293=!![];_0x2dadbd[_0x2bc66b(0x27c)]=='************'?_0x2dadbd['apiSecret']=config[_0x2bc66b(0x27c)]:_0x56b293=!![];if(_0x2dadbd[_0x2bc66b(0x337)]==_0x2bc66b(0x2c2))_0x2dadbd[_0x2bc66b(0x337)]=config['apiPassword'];else{if(_0x2dadbd['apiPassword'])_0x56b293=!![];}dbConfig[_0x2bc66b(0x323)]('bot')[_0x2bc66b(0x313)]({'botID':botID})[_0x2bc66b(0x293)](_0x2dadbd)['write']();}else dbConfig['get'](_0x2bc66b(0x262))[_0x2bc66b(0x240)](_0x2dadbd)['write'](),_0x56b293=!![],process['send']({'status':'enabled','live':_0x2bc66b(0x2e0)},_0x36ee5e=>{});process[_0x2bc66b(0x296)]({'botname':_0x2dadbd[_0x2bc66b(0x2ed)]},_0x38d945=>{}),config={..._0x2dadbd},updateBotManager(),proxyEmit(_0x2bc66b(0x236)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x56b293)await reset(!![]);else _0x42c0b0||_0x21a86a?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x2bc66b(0x20b)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x558224){const _0x200fb5=_0x36bc83,_0x3dbe33={...config,'headless':_0x558224[_0x200fb5(0x29b)]};let _0x263a55=dbConfig['get'](_0x200fb5(0x262))[_0x200fb5(0x313)]({'botID':botID})[_0x200fb5(0x360)]();_0x263a55&&dbConfig['get']('bot')[_0x200fb5(0x313)]({'botID':botID})[_0x200fb5(0x293)](_0x3dbe33)['write'](),config={..._0x3dbe33},updateBotManager(),proxyEmit(_0x200fb5(0x32d),emittedConfiguration());}async function storeFiat(_0x40a619){const _0x4809db=_0x36bc83,_0x2bc19e={...config,'fiat':_0x40a619};let _0x56249a=dbConfig[_0x4809db(0x323)]('bot')[_0x4809db(0x313)]({'botID':botID})[_0x4809db(0x360)]();_0x56249a&&dbConfig['get'](_0x4809db(0x262))[_0x4809db(0x313)]({'botID':botID})[_0x4809db(0x293)](_0x2bc19e)[_0x4809db(0x2f1)](),config={..._0x2bc19e},proxyEmit(_0x4809db(0x32d),emittedConfiguration());}function resetHistory(){const _0x117c12=_0x36bc83;logger[_0x117c12(0x247)]('Resetting\x20bot\x20history');try{if(fs[_0x117c12(0x1ea)](path['join'](configpath,_0x117c12(0x27d)+botID+_0x117c12(0x35b))))fs[_0x117c12(0x294)](path[_0x117c12(0x2f0)](configpath,_0x117c12(0x27d)+botID+_0x117c12(0x35b)));if(fs['existsSync'](path['join'](configpath,_0x117c12(0x27d)+botID+_0x117c12(0x34e))))fs[_0x117c12(0x294)](path[_0x117c12(0x2f0)](configpath,'bot-'+botID+_0x117c12(0x34e)));if(fs[_0x117c12(0x1ea)](path[_0x117c12(0x2f0)](configpath,_0x117c12(0x27d)+botID+_0x117c12(0x331))))fs[_0x117c12(0x294)](path[_0x117c12(0x2f0)](configpath,'bot-'+botID+'-results.json'));}catch(_0x89d852){if(_0x89d852)logger['full'](_0x117c12(0x32f),_0x89d852);}const _0x34a65e=getDate();let _0x4180b2=[];currentCoins[_0x117c12(0x2b3)](_0xc72775=>{const _0x394e83=_0x117c12;_0x4180b2['push']({'coin':_0xc72775['coin'],'number':_0xc72775[_0x394e83(0x2d2)],'price':_0xc72775[_0x394e83(0x334)]});});let _0x2397ee=dbConfig['get']('bot')[_0x117c12(0x313)]({'botID':botID})[_0x117c12(0x360)]();_0x2397ee&&(dbConfig[_0x117c12(0x323)](_0x117c12(0x262))[_0x117c12(0x313)]({'botID':botID})[_0x117c12(0x293)]({'liquidity':[{'date':_0x34a65e,'changes':_0x4180b2}]})[_0x117c12(0x2f1)](),config['liquidity']=[]),process[_0x117c12(0x296)]({'stop':'restart'},_0x473b87=>{});}function noslash(_0x39bf5a){const _0x2196b6=_0x36bc83;return _0x39bf5a[_0x2196b6(0x324)]('/','');}function updateHighestFee(_0x5a5091){const _0x23c4f0=_0x36bc83;if(_0x5a5091['reverse']){let _0x417493={'filled':_0x5a5091[_0x23c4f0(0x2b8)]*_0x5a5091[_0x23c4f0(0x21b)],'amount':_0x5a5091[_0x23c4f0(0x2b8)]*_0x5a5091[_0x23c4f0(0x21b)],'side':_0x5a5091[_0x23c4f0(0x2f9)]==_0x23c4f0(0x35c)?_0x23c4f0(0x2e4):'sell','price':0x1/_0x5a5091[_0x23c4f0(0x21b)]};_0x5a5091={..._0x5a5091,..._0x417493};}const _0x3eba0e=defaultFee*_0x5a5091[_0x23c4f0(0x2b8)]*_0x5a5091[_0x23c4f0(0x21b)];lastFees[_0x23c4f0(0x2c0)][_0x23c4f0(0x233)]===0x14&&lastFees[_0x23c4f0(0x2c0)][_0x23c4f0(0x202)](),lastFees[_0x23c4f0(0x2c0)][_0x23c4f0(0x240)](_0x3eba0e),lastFees[_0x23c4f0(0x36d)]=Math['max'](...lastFees[_0x23c4f0(0x2c0)]);}async function updateNumberCoinsCcxt(_0x1e7c16){const _0xa0d136=_0x36bc83;logger[_0xa0d136(0x20b)](_0xa0d136(0x1ee)+_0x1e7c16['symbol']+'\x20|\x20'+_0x1e7c16['status']+'\x20|\x20'+_0x1e7c16[_0xa0d136(0x2b8)]+'\x20/\x20'+_0x1e7c16[_0xa0d136(0x26d)]+'\x20|\x20'+_0x1e7c16['id']);let _0x367b1a=_0x1e7c16['status'],_0x3290c5=![];currentCoins[_0xa0d136(0x2b3)](_0x459012=>{const _0x45877e=_0xa0d136;_0x459012[_0x45877e(0x332)]==_0x1e7c16['symbol']&&(_0x3290c5=!![]);});if(!_0x3290c5)return;const _0xbf7a2b=currentCoins[_0xa0d136(0x313)](_0x58649a=>_0x58649a[_0xa0d136(0x332)]==_0x1e7c16['symbol']),_0x4f907f=_0x5c3b55=>{const _0x1ed003=_0xa0d136;if(_0xbf7a2b)_0xbf7a2b[_0x1ed003(0x2fd)]=_0x5c3b55;};if(_0x367b1a==_0xa0d136(0x2c7))_0x4f907f('open');else{if(_0x367b1a==_0xa0d136(0x339)){_0x4f907f(_0xa0d136(0x339));const _0x464d3a=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x464d3a,await getOpenOrders(),handleOpenOrders();}else{if(_0x367b1a==_0xa0d136(0x354)){let _0x969bd3=![];if(lastOrders)for(const _0x4f27c0 of lastOrders){const _0xc5b4dc=0xc8,_0x1c8a30=0x1388;let _0x1bdadc=0x0;while(!_0x4f27c0[_0xa0d136(0x2c3)]&&_0x1bdadc*_0xc5b4dc<_0x1c8a30){_0x1bdadc++,await sleep(_0xc5b4dc);}if(_0x1bdadc>0x0)logger[_0xa0d136(0x20b)]('Waited\x20'+_0x1bdadc*_0xc5b4dc/0x3e8+_0xa0d136(0x36f));if(_0x4f27c0[_0xa0d136(0x2c3)]==_0x1e7c16['id']){logger[_0xa0d136(0x20b)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x1e7c16['id']),_0x969bd3=!![];if(_0x4f27c0[_0xa0d136(0x2b8)]==0x0){logger[_0xa0d136(0x20b)](_0xa0d136(0x373)+_0x1e7c16['id']);if(_0x1e7c16[_0xa0d136(0x342)])_0x4f27c0[_0xa0d136(0x21b)]=_0x1e7c16[_0xa0d136(0x342)];else{if(_0x1e7c16[_0xa0d136(0x21b)])_0x4f27c0[_0xa0d136(0x21b)]=_0x1e7c16[_0xa0d136(0x21b)];else{}}_0x4f27c0['filled']=_0x1e7c16['filled'],updateHighestFee(_0x4f27c0),_0x4f907f('filled'),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x597493=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x597493;}_0x4f27c0['fee']={'currency':_0x1e7c16['fee']?_0x1e7c16['fee']['currency']:null,'cost':_0x1e7c16['fee']?_0x1e7c16[_0xa0d136(0x2f7)][_0xa0d136(0x2ba)]:0x0},await updateCoinResults(_0x4f27c0);}}}if(!_0x969bd3){logger[_0xa0d136(0x20b)](_0xa0d136(0x2be)+_0x1e7c16['id']),_0x4f907f(_0xa0d136(0x2b8));const _0x3d07ce=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3d07ce,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x4cc577=JSON[_0xa0d136(0x23e)](lastBalances['portfolio']);const _0x2d9c99=_0x4cc577['find'](_0x2d74c1=>_0x2d74c1[_0xa0d136(0x332)]==_0x1e7c16[_0xa0d136(0x332)]);if(_0x2d9c99){if(_0x367b1a==_0xa0d136(0x2c7))_0x2d9c99['orderstatus']=_0x2d9c99[_0xa0d136(0x2fd)]==_0xa0d136(0x2b8)?_0xa0d136(0x2b8):'open';else{if(_0x367b1a=='canceled')_0x2d9c99[_0xa0d136(0x2fd)]=_0x2d9c99['orderstatus']==_0xa0d136(0x2b8)?_0xa0d136(0x2b8):'canceled';else _0x367b1a==_0xa0d136(0x354)&&(_0x2d9c99[_0xa0d136(0x2fd)]=_0xa0d136(0x2b8));}}lastBalances={...lastBalances,'portfolio':JSON[_0xa0d136(0x31b)](_0x4cc577)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x4e47ad=_0x36bc83;await getOpenOrders();let _0x2dbdd8=![];currentCoins[_0x4e47ad(0x2b3)](_0x125005=>{const _0x2dbd3c=_0x4e47ad;_0x2dbdd8=allOpenOrders['find'](_0x2bbb59=>_0x2bbb59[_0x2dbd3c(0x332)]==_0x125005[_0x2dbd3c(0x332)]),_0x125005[_0x2dbd3c(0x2fd)]=_0x2dbdd8?_0x2dbd3c(0x2c7):'none';});}async function getCoins(_0x4bde4a=0x0,_0x10cec7=!![],_0x94699f=config[_0x36bc83(0x25f)]){const _0x3f24d0=_0x36bc83;let _0x262ec1,_0x38b878=[],_0x1fd568=[],_0x4d202f=[];if(_0x4bde4a)await sleep(_0x4bde4a);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x262ec1=await exchange[_0x3f24d0(0x330)](),mybalances=_0x262ec1[_0x3f24d0(0x30f)];for(const [_0x432285,_0x693eec]of Object['entries'](mybalances)){_0x4d202f[_0x3f24d0(0x240)](_0x432285);}config[_0x3f24d0(0x28e)]['forEach'](_0x13f3f0=>{const _0x3303bd=_0x3f24d0;!_0x4d202f[_0x3303bd(0x34b)](_0x13f3f0['coin'])&&(mybalances[_0x13f3f0[_0x3303bd(0x379)]]=0x0);});if(_0x94699f=='')for(const [_0x21a864,_0x37e105]of Object[_0x3f24d0(0x24e)](mybalances)){_0x37e105!=0x0&&_0x38b878[_0x3f24d0(0x240)]({'coin':_0x21a864});}else{let _0x429e9e=![];for(const [_0xeee2b9,_0x26a205]of Object[_0x3f24d0(0x24e)](mybalances)){const _0x16a72b=config[_0x3f24d0(0x28e)]['find'](_0x3b89e8=>_0x3b89e8['coin']==_0xeee2b9),_0xee6609=_0xeee2b9+'/'+_0x94699f,_0x3f2255=_0x94699f+'/'+_0xeee2b9,_0x2733ad=currentCoins[_0x3f24d0(0x313)](_0x18c908=>_0x18c908[_0x3f24d0(0x379)]==_0xeee2b9);_0x429e9e=![];if((_0x26a205!=0x0||_0x16a72b)&&(allSymbols[_0x3f24d0(0x34b)](_0xee6609)||_0xeee2b9==_0x94699f))_0x38b878['push']({'coin':_0xeee2b9,'symbol':_0xee6609,'reverse':![],'number':Math['max'](_0x26a205+(_0x16a72b&&_0x16a72b[_0x3f24d0(0x352)]||0x0),0x0),'orderstatus':_0x2733ad?_0x2733ad[_0x3f24d0(0x2fd)]:_0x3f24d0(0x2cb)});else{if((_0x26a205!=0x0||_0x16a72b)&&allSymbols[_0x3f24d0(0x34b)](_0x3f2255))_0x38b878['push']({'coin':_0xeee2b9,'symbol':_0x3f2255,'reverse':!![],'number':Math[_0x3f24d0(0x2dc)](_0x26a205+(_0x16a72b&&_0x16a72b[_0x3f24d0(0x352)]||0x0),0x0),'orderstatus':_0x2733ad?_0x2733ad[_0x3f24d0(0x2fd)]:_0x3f24d0(0x2cb)});else _0x16a72b&&_0x38b878[_0x3f24d0(0x240)]({'coin':_0x16a72b[_0x3f24d0(0x379)],'symbol':_0x16a72b['symbol'],'reverse':_0x16a72b[_0x3f24d0(0x2a2)],'number':0x0,'orderstatus':_0x3f24d0(0x2cb)});}}}}catch(_0x839c31){if(!_0x10cec7)handleErrorNoStop(_0x839c31,_0x3f24d0(0x356));else await handleError(_0x839c31,_0x3f24d0(0x356));}return _0x1fd568=cloneDeep(_0x38b878),_0x38b878=_0x38b878[_0x3f24d0(0x2e3)](_0x43f2b8=>{const _0x1f7bc0=_0x3f24d0,_0x4f3aac=config['portfolio'][_0x1f7bc0(0x313)](_0x211e0d=>_0x211e0d[_0x1f7bc0(0x379)]==_0x43f2b8['coin']);return _0x4f3aac&&!_0x4f3aac[_0x1f7bc0(0x295)];}),[_0x38b878,_0x1fd568];}async function getCoinNumber(_0x14cee8){const _0x20c933=_0x36bc83;let _0x407143;try{const _0x4bf696=await exchange[_0x20c933(0x330)]();_0x407143=_0x4bf696[_0x20c933(0x30f)][_0x14cee8];}catch(_0x30d6e7){await handleError(_0x30d6e7,_0x20c933(0x28a));}return _0x407143;}async function getOpenOrders(){const _0x5e5bf7=_0x36bc83;let _0x5a6e7e;allOpenOrders=[];try{for(const _0x1982ad of config[_0x5e5bf7(0x28e)]){!_0x1982ad[_0x5e5bf7(0x295)]&&_0x1982ad['coin']!=config[_0x5e5bf7(0x25f)]&&(_0x5a6e7e=await exchange[_0x5e5bf7(0x227)](_0x1982ad[_0x5e5bf7(0x332)]),_0x5a6e7e['length']>0x0&&allOpenOrders['push'](_0x5a6e7e[0x0]));}}catch(_0x5499cf){await handleError(_0x5499cf,_0x5e5bf7(0x32b));}}async function handleOpenOrders(_0x3e1348=0x0){const _0x1e0852=_0x36bc83;allOpenOrders['length']==0x0&&lockOrders==ORDERS[_0x1e0852(0x285)]&&allOrdersPlaced&&(_0x3e1348==0x0?(logger['debug'](_0x1e0852(0x254)),_0x3e1348++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x1e0852(0x20b)](_0x1e0852(0x2d0)),validateOrders(_0x1e0852(0x34d))));}async function testAPI(_0x38124c){const _0x4cdd0a=_0x36bc83,_0x3d2013=ccxt[_0x4cdd0a(0x2b4)][_0x38124c['exchange'][_0x4cdd0a(0x250)]()],_0x4bd3c8=new _0x3d2013({'apiKey':_0x38124c[_0x4cdd0a(0x2e2)],'secret':_0x38124c[_0x4cdd0a(0x27c)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4cdd0a(0x1ec)}});if(_0x38124c[_0x4cdd0a(0x337)])_0x4bd3c8[_0x4cdd0a(0x30d)]=_0x38124c[_0x4cdd0a(0x337)];try{await _0x4bd3c8[_0x4cdd0a(0x258)]();}catch(_0xbe443){throw _0xbe443;}}function cloneDeep(_0x4c3025){const _0x23940b=_0x36bc83;return JSON[_0x23940b(0x23e)](JSON[_0x23940b(0x31b)](_0x4c3025));}async function getPortfolio(_0x1f4674){const _0x388bf5=_0x36bc83;let _0x50a878=[],_0x14d10e=[],_0x38a855=[],_0x57d2a0;if(_0x1f4674[_0x388bf5(0x2e2)]!=='************'||_0x1f4674['apiSecret']!==_0x388bf5(0x2c2)||_0x1f4674[_0x388bf5(0x337)]&&_0x1f4674[_0x388bf5(0x337)]!==_0x388bf5(0x2c2)){if(config[_0x388bf5(0x2aa)]){if(_0x1f4674['apiKey']==_0x388bf5(0x2c2))_0x1f4674[_0x388bf5(0x2e2)]=config[_0x388bf5(0x2e2)];if(_0x1f4674['apiSecret']==_0x388bf5(0x2c2))_0x1f4674['apiSecret']=config['apiSecret'];if(_0x1f4674['apiPassword']=='************')_0x1f4674['apiPassword']=config[_0x388bf5(0x337)];try{await testAPI(_0x1f4674);}catch(_0x41c2b4){if(_0x41c2b4[_0x388bf5(0x22a)]()[_0x388bf5(0x34b)]('AuthenticationError')){logger['debug'](_0x388bf5(0x1e9)),proxyEmit(_0x388bf5(0x28e),![]);return;}else{handleError(_0x41c2b4,_0x388bf5(0x34c));return;}}}await initExchange(_0x1f4674[_0x388bf5(0x2aa)],_0x1f4674['apiKey'],_0x1f4674[_0x388bf5(0x27c)],_0x1f4674[_0x388bf5(0x337)]);try{await loadSymbols();}catch(_0x510953){if(_0x510953['toString']()['includes'](_0x388bf5(0x378))){proxyEmit(_0x388bf5(0x28e),![]);return;}else{handleError(_0x510953,_0x388bf5(0x2dd));return;}}const _0x234925=await getCoins(0x0,![],_0x1f4674[_0x388bf5(0x25f)]);_0x38a855=cloneDeep(_0x234925[0x1]);}else _0x38a855=cloneDeep(currentCoinsAll);if(_0x1f4674[_0x388bf5(0x25f)]=='')proxyEmit(_0x388bf5(0x28e),_0x38a855);else{_0x38a855['forEach'](_0x45b2fe=>{const _0x38de52=_0x388bf5;if(_0x45b2fe[_0x38de52(0x379)]!=_0x1f4674['basecoin']&&allSymbols[_0x38de52(0x34b)](_0x45b2fe[_0x38de52(0x332)]))_0x50a878['push'](_0x45b2fe['symbol']);});if(_0x50a878[_0x388bf5(0x233)]==0x0)logHistory(_0x388bf5(0x301),'Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot');else{try{_0x14d10e=await getTickers(_0x50a878);}catch(_0x39c163){if(_0x39c163[_0x388bf5(0x22a)]()[_0x388bf5(0x34b)]('AuthenticationError')){proxyEmit(_0x388bf5(0x28e),![]);return;}else handleError(_0x39c163,'getPortfolio(2)');}_0x38a855[_0x388bf5(0x2b3)](_0x2c59e1=>{const _0x572efe=_0x388bf5;_0x2c59e1[_0x572efe(0x379)]!=_0x1f4674[_0x572efe(0x25f)]?_0x14d10e[_0x2c59e1['symbol']]?_0x57d2a0=_0x2c59e1[_0x572efe(0x2a2)]?0x1/_0x14d10e[_0x2c59e1['symbol']][_0x572efe(0x334)]:_0x14d10e[_0x2c59e1[_0x572efe(0x332)]][_0x572efe(0x334)]:_0x57d2a0=0x0:_0x57d2a0=0x1,_0x2c59e1[_0x572efe(0x21b)]=formatResult(_0x57d2a0,0x8);}),proxyEmit(_0x388bf5(0x28e),_0x38a855);}}}function truncateTradeAmount(_0x535b76,_0x546ab4){let _0x36ab9d=0x0;try{_0x36ab9d=exchange['amountToPrecision'](_0x535b76,_0x546ab4);}catch(_0xe8bfb){}return _0x36ab9d;}function checkMinimums(_0x4e62f5){const _0x48980a=_0x36bc83;let _0x1bf4f9=!![];const _0x15f0a0=!_0x4e62f5['reverse']?markets[_0x4e62f5['symbol']][_0x48980a(0x33b)][_0x48980a(0x26d)][_0x48980a(0x29e)]:markets[_0x4e62f5[_0x48980a(0x332)]][_0x48980a(0x33b)][_0x48980a(0x2ba)][_0x48980a(0x29e)],_0x402d36=!_0x4e62f5[_0x48980a(0x2a2)]?markets[_0x4e62f5['symbol']][_0x48980a(0x33b)][_0x48980a(0x2ba)][_0x48980a(0x29e)]:markets[_0x4e62f5[_0x48980a(0x332)]]['limits'][_0x48980a(0x26d)]['min'],_0x172d99=truncateTradeAmount(_0x4e62f5[_0x48980a(0x332)],_0x4e62f5[_0x48980a(0x309)]);_0x4e62f5[_0x48980a(0x309)]=_0x172d99;if(Math[_0x48980a(0x263)](_0x172d99)<_0x15f0a0)_0x1bf4f9=![];if(Math[_0x48980a(0x263)](_0x172d99)*_0x4e62f5[_0x48980a(0x334)]<_0x402d36)_0x1bf4f9=![];if(_0x4e62f5['side']=='sell'){let _0xadca91=config[_0x48980a(0x28e)][_0x48980a(0x313)](_0x84478=>_0x84478[_0x48980a(0x379)]==_0x4e62f5['coin']);if(_0xadca91[_0x48980a(0x352)]>0x0){if(Math['abs'](_0x172d99)>_0x4e62f5[_0x48980a(0x2d2)]-_0xadca91[_0x48980a(0x352)])_0x1bf4f9=![];}else{if(Math[_0x48980a(0x263)](_0x172d99)>_0x4e62f5[_0x48980a(0x2d2)])_0x1bf4f9=![];}}if(_0x4e62f5['side']==_0x48980a(0x2e4)){let _0x5e8bf6=config[_0x48980a(0x28e)][_0x48980a(0x313)](_0x48ca58=>_0x48ca58[_0x48980a(0x379)]==config[_0x48980a(0x25f)]),_0x4f4920=currentCoins[_0x48980a(0x313)](_0x407db3=>_0x407db3[_0x48980a(0x379)]==config[_0x48980a(0x25f)]);if(_0x5e8bf6['offset']>0x0){if(Math[_0x48980a(0x263)](_0x172d99)*_0x4e62f5['last']>_0x4f4920[_0x48980a(0x2d2)]-_0x5e8bf6[_0x48980a(0x352)])_0x1bf4f9=![];}else{if(Math[_0x48980a(0x263)](_0x172d99)*_0x4e62f5[_0x48980a(0x334)]>_0x4f4920[_0x48980a(0x2d2)])_0x1bf4f9=![];}}return _0x1bf4f9;}async function getBalances(_0x3245ac=!![]){const _0x5166ed=_0x36bc83;let _0x2992e4=0x0,_0x4f1ab3;const _0x56d4c8=config[_0x5166ed(0x36e)];if(config[_0x5166ed(0x29b)]&&config[_0x5166ed(0x20f)]<0x0)await validate24hChanges();currentCoins[_0x5166ed(0x2b3)](_0x42bc7e=>{const _0x20f2e6=_0x5166ed;if(_0x42bc7e[_0x20f2e6(0x379)]!=config[_0x20f2e6(0x25f)]){let _0x3f657b=global[_0x20f2e6(0x209)][noslash(_0x42bc7e[_0x20f2e6(0x332)])];_0x4f1ab3=_0x42bc7e[_0x20f2e6(0x2a2)]?0x1/_0x3f657b:_0x3f657b;}else _0x4f1ab3=0x1;let _0x2b90cf=_0x42bc7e[_0x20f2e6(0x2d2)]*_0x4f1ab3;_0x2992e4+=_0x2b90cf,_0x42bc7e[_0x20f2e6(0x334)]=formatResult(Number(_0x4f1ab3),0x8),_0x42bc7e[_0x20f2e6(0x360)]=_0x2b90cf;}),currentCoins['forEach'](_0x3c706e=>{const _0x50fd16=_0x5166ed;let _0x4140f6=config['portfolio'][_0x50fd16(0x313)](_0x5d5cfa=>_0x5d5cfa[_0x50fd16(0x379)]==_0x3c706e[_0x50fd16(0x379)]),_0x55a44e=Number(_0x4140f6['distribution']),_0x558a67=_0x3c706e[_0x50fd16(0x360)]/_0x2992e4*0x64,_0x158291=_0x55a44e*_0x2992e4/0x64/_0x3c706e[_0x50fd16(0x334)]-_0x3c706e[_0x50fd16(0x2d2)];_0x3c706e[_0x50fd16(0x2b9)]=formatResult(_0x558a67,0x3),_0x3c706e['target']=formatResult(_0x55a44e,0x3),_0x3c706e['trade']=formatResult(_0x158291,0x8),_0x3c706e[_0x50fd16(0x2f9)]='',_0x3c706e['valid']=![];if(_0x3c706e[_0x50fd16(0x379)]!=config[_0x50fd16(0x25f)]){if(_0x3c706e['distribution']>_0x55a44e)_0x3c706e[_0x50fd16(0x2f9)]=_0x50fd16(0x35c),_0x3c706e['valid']=checkMinimums(_0x3c706e);else _0x3c706e[_0x50fd16(0x2b9)]<_0x55a44e&&(_0x3c706e['side']=_0x50fd16(0x2e4),_0x3c706e['valid']=checkMinimums(_0x3c706e));}_0x3c706e[_0x50fd16(0x23d)]=_0x3c706e['distribution']/_0x3c706e[_0x50fd16(0x37b)]-0x1;if(_0x3c706e[_0x50fd16(0x2fd)]==_0x50fd16(0x2b8)||_0x3c706e[_0x50fd16(0x2fd)]==_0x50fd16(0x339))_0x3c706e[_0x50fd16(0x2fd)]=_0x50fd16(0x2cb);}),currentCoins['sort']((_0x207fee,_0x53c7ea)=>_0x207fee[_0x5166ed(0x23d)]<_0x53c7ea[_0x5166ed(0x23d)]?0x1:_0x53c7ea['delta']<_0x207fee['delta']?-0x1:0x0);const _0x4f62c1=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4f62c1[_0x5166ed(0x231)],'usd':_0x4f62c1['usd'],'portfolio':JSON[_0x5166ed(0x31b)](currentCoins),'threshold':_0x56d4c8},proxyEmit(_0x5166ed(0x340),{'serverversion':serverversion,'balances':lastBalances});if(_0x3245ac){if(config[_0x5166ed(0x29b)])headlessMode({'portfolio':currentCoins,'threshold':_0x56d4c8});else{if(lockOrders==ORDERS[_0x5166ed(0x208)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x56d4c8});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x346594=getNormalizedPerformance();getStartingBalances(_0x346594),emitPerformance(_0x346594);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x4e0088=getNormalizedPerformance();emitPerformance(_0x4e0088),getStartingBalances(_0x4e0088),logger[_0x5166ed(0x20b)](_0x5166ed(0x30c));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x3e110c=_0x36bc83;if(!lastBalances)return;let _0x54a24e=[],_0x27f1b7,_0x16f805=JSON['parse'](lastBalances[_0x3e110c(0x28e)]);_0x16f805['sort']((_0x50ec44,_0x115a5d)=>_0x50ec44[_0x3e110c(0x379)]>_0x115a5d['coin']?0x1:_0x115a5d[_0x3e110c(0x379)]>_0x50ec44[_0x3e110c(0x379)]?-0x1:0x0),_0x16f805[_0x3e110c(0x2b3)](_0x58d585=>{const _0xc4d6ee=_0x3e110c;let _0x11e629={'coin':_0x58d585[_0xc4d6ee(0x379)],'number':_0x58d585['number'],'price':_0x58d585['last']};_0x54a24e['push'](_0x11e629);});const _0x1fe3dc=await getFiat();_0x27f1b7={'date':lastBalances[_0x3e110c(0x319)][_0x3e110c(0x306)]('\x20')[0x0],'eur':_0x1fe3dc['eur'],'usd':_0x1fe3dc['usd'],'coins':_0x54a24e};let _0x3da3f6=dbPerformance[_0x3e110c(0x323)](_0x3e110c(0x1ef))['find']({'date':_0x27f1b7[_0x3e110c(0x2eb)]})[_0x3e110c(0x360)]();_0x3da3f6?_0x27f1b7[_0x3e110c(0x2eb)]!=config[_0x3e110c(0x307)]&&dbPerformance[_0x3e110c(0x323)](_0x3e110c(0x1ef))[_0x3e110c(0x313)]({'date':_0x27f1b7[_0x3e110c(0x2eb)]})[_0x3e110c(0x293)](_0x27f1b7)[_0x3e110c(0x2f1)]():dbPerformance[_0x3e110c(0x323)](_0x3e110c(0x1ef))[_0x3e110c(0x240)](_0x27f1b7)[_0x3e110c(0x2f1)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x48b474=_0x36bc83;let _0x895e22=[];if(dbPerformance[_0x48b474(0x318)](_0x48b474(0x1ef))['value']()){let _0xc68bf8=dbPerformance[_0x48b474(0x323)](_0x48b474(0x1ef))['cloneDeep']()[_0x48b474(0x2e3)](_0x27ac9a=>{const _0x2f9140=_0x48b474;if(_0x27ac9a[_0x2f9140(0x242)][_0x2f9140(0x233)]==0x0)return![];else return!![];})['sortBy'](_0x48b474(0x2eb))[_0x48b474(0x360)](),_0x3a1628=[...config[_0x48b474(0x1e5)]];_0x3a1628['sort']((_0x4f5e5d,_0x4c32f7)=>_0x4f5e5d[_0x48b474(0x2eb)]>_0x4c32f7[_0x48b474(0x2eb)]?-0x1:_0x4c32f7['date']>_0x4f5e5d['date']?0x1:0x0);let _0x2d78e9=0x1,_0x10e3fd=[],_0x4cac50=0x0;_0xc68bf8[_0x48b474(0x2bf)]()[_0x48b474(0x2a2)]()['forEach']((_0x403c46,_0x2f4a83)=>{const _0x4ba4d7=_0x48b474;if(_0x3a1628[_0x4cac50]){if(_0xc68bf8[_0xc68bf8[_0x4ba4d7(0x233)]-_0x2f4a83]&&_0x3a1628[_0x4cac50]['date']==_0xc68bf8[_0xc68bf8[_0x4ba4d7(0x233)]-_0x2f4a83]['date']){if(_0x2f4a83<_0xc68bf8[_0x4ba4d7(0x233)]){let _0x5408c9=0x0,_0x2a5f1b=0x0;_0xc68bf8[_0xc68bf8[_0x4ba4d7(0x233)]-_0x2f4a83][_0x4ba4d7(0x242)][_0x4ba4d7(0x2b3)](_0x10cf4e=>{const _0x3bb63f=_0x4ba4d7;_0x2a5f1b+=_0x10cf4e[_0x3bb63f(0x2d2)]*_0x10cf4e['price'];}),_0x3a1628[_0x4cac50][_0x4ba4d7(0x1e4)][_0x4ba4d7(0x2b3)](_0x19e407=>{const _0xc9556d=_0x4ba4d7;_0x5408c9+=_0x19e407[_0xc9556d(0x2d2)]*_0x19e407['price'];}),_0x2d78e9*=_0x5408c9/(_0x2a5f1b-_0x5408c9)+0x1;}_0x4cac50++;}}let _0x7641b2=0x0;_0x403c46[_0x4ba4d7(0x242)][_0x4ba4d7(0x2b3)](_0x18203e=>{const _0x1f1563=_0x4ba4d7;_0x7641b2+=_0x18203e[_0x1f1563(0x2d2)]*_0x18203e[_0x1f1563(0x21b)];}),_0x10e3fd[_0xc68bf8[_0x4ba4d7(0x233)]-_0x2f4a83-0x1]=_0x7641b2*(_0x2d78e9-0x1);});let _0x5a3c39=[];_0x3a1628=[...config[_0x48b474(0x1e5)]]||[];let _0x3c8a1d=0x0;_0x4cac50=0x0,_0xc68bf8[_0x48b474(0x2b3)]((_0x21b3b0,_0x3509fa)=>{const _0x593218=_0x48b474;if(_0x3a1628[_0x4cac50]){const _0x2d4ea5=fns[_0x593218(0x23e)](_0x3a1628[_0x4cac50][_0x593218(0x2eb)],'yyyy/MM/dd',new Date()),_0x50504f=fns[_0x593218(0x23e)](_0x21b3b0[_0x593218(0x2eb)],'yyyy/MM/dd',new Date());if(fns[_0x593218(0x302)](_0x2d4ea5,_0x50504f)){let _0x1200ab=0x0;_0x3a1628[_0x4cac50][_0x593218(0x1e4)][_0x593218(0x2b3)](_0x2b8080=>{const _0x5bae1c=_0x593218;!_0x5a3c39[_0x2b8080[_0x5bae1c(0x379)]]?_0x5a3c39[_0x2b8080['coin']]=_0x2b8080[_0x5bae1c(0x2d2)]:(_0x1200ab=_0x5a3c39[_0x2b8080['coin']],_0x5a3c39[_0x2b8080[_0x5bae1c(0x379)]]+=_0x2b8080[_0x5bae1c(0x2d2)]);const _0x4db84f=_0x21b3b0[_0x5bae1c(0x242)]['find'](_0x4be034=>_0x4be034[_0x5bae1c(0x379)]==_0x2b8080[_0x5bae1c(0x379)]);(!_0x4db84f||_0x4db84f[_0x5bae1c(0x2d2)]==0x0)&&(_0x3c8a1d+=(-_0x2b8080['number']-_0x1200ab)*_0x2b8080[_0x5bae1c(0x21b)]);}),_0x4cac50++;}}_0x21b3b0[_0x593218(0x242)][_0x593218(0x2b3)]((_0x38881b,_0x2f70b4)=>{const _0x40ca53=_0x593218;_0x5a3c39[_0x38881b[_0x40ca53(0x379)]]&&(_0x38881b[_0x40ca53(0x349)]=_0x5a3c39[_0x38881b[_0x40ca53(0x379)]]);}),_0x895e22['push']({'date':_0x21b3b0[_0x593218(0x2eb)],'eur':_0x21b3b0['eur'],'usd':_0x21b3b0[_0x593218(0x350)],'offset':_0x10e3fd[_0x3509fa],'netoffset':_0x3c8a1d,'coins':_0x21b3b0[_0x593218(0x242)]});});}return _0x895e22;}function emitPerformance(_0x488e52){const _0x58327e=_0x36bc83;_0x488e52['length']!==0x0?(proxyEmit(_0x58327e(0x2d6),_0x488e52),lastPerformanceEmitted=getDate()):proxyEmit(_0x58327e(0x2d6),[]);}function getPerf(_0x4d6dcd,_0x3290b0){const _0x3c5cbc=_0x36bc83;let _0x418070=0x0,_0x48ed29=0x0,_0x1b5db0=0x0;_0x4d6dcd[_0x3c5cbc(0x242)][_0x3c5cbc(0x2b3)](_0x3a2d9a=>{const _0x26dd66=_0x3c5cbc;_0x418070+=_0x3a2d9a[_0x26dd66(0x2d2)]*_0x3a2d9a[_0x26dd66(0x21b)];});_0x3290b0&&(_0x418070+=_0x4d6dcd[_0x3c5cbc(0x352)]);if(config[_0x3c5cbc(0x25f)]===_0x3c5cbc(0x341)||config['basecoin']==='ETH')_0x48ed29=_0x418070*_0x4d6dcd[_0x3c5cbc(0x231)],_0x1b5db0=_0x418070*_0x4d6dcd['usd'];else{if(usdBasecoins['includes'](config[_0x3c5cbc(0x25f)]))_0x48ed29=_0x418070*_0x4d6dcd[_0x3c5cbc(0x231)]/_0x4d6dcd[_0x3c5cbc(0x350)],_0x1b5db0=_0x418070;else config[_0x3c5cbc(0x25f)]===_0x3c5cbc(0x1e7)&&(_0x48ed29=_0x418070,_0x1b5db0=_0x418070*_0x4d6dcd[_0x3c5cbc(0x350)]/_0x4d6dcd[_0x3c5cbc(0x231)]);}return[_0x418070,_0x48ed29,_0x1b5db0];}function getKPIs(_0x61b344,_0xca2e9e=_0x36bc83(0x1e7)){const _0x586383=_0x36bc83,_0x463895=config[_0x586383(0x25f)],_0x3bbc2c=lastBalances,_0x45ff37=currentCoins,_0xfc29a9=getNormalizedPerformance(),_0x30a360=_0x61b344===_0x586383(0x25f)?_0x463895:_0x61b344===_0x586383(0x204)||_0x61b344==='net-fiat'?_0xca2e9e:_0x586383(0x329)+_0x463895,_0x1b3726=_0x61b344===_0x586383(0x27f)?_0x586383(0x328):_0x61b344===_0x586383(0x1e6)?_0x586383(0x328):_0x30a360+_0x586383(0x2f2),_0x2a10d4=_0x61b344===_0x586383(0x27f)||_0x61b344===_0x586383(0x1e6)?_0x586383(0x328):_0x30a360+'\x20change';let _0x835002=0x0;_0x45ff37[_0x586383(0x2b3)](_0x54d2ed=>{const _0x34fe58=_0x586383;_0x835002+=_0x54d2ed[_0x34fe58(0x2d2)]*_0x54d2ed[_0x34fe58(0x334)];});if(_0x61b344===_0x586383(0x204)||_0x61b344===_0x586383(0x1e6)){if(_0x463895===_0x586383(0x341)||_0x463895===_0x586383(0x34f))_0x835002=_0x835002*(_0xca2e9e==='EUR'?_0x3bbc2c[_0x586383(0x231)]:_0x3bbc2c[_0x586383(0x350)]);else{if(usdBasecoins[_0x586383(0x34b)](_0x463895))_0x835002=_0x835002*(_0xca2e9e===_0x586383(0x1e7)?_0x3bbc2c[_0x586383(0x231)]/_0x3bbc2c['usd']:0x1);else _0x463895===_0x586383(0x1e7)&&(_0x835002=_0x835002*(_0xca2e9e==='EUR'?0x1:_0x3bbc2c[_0x586383(0x350)]/_0x3bbc2c[_0x586383(0x231)]));}}let _0x55b221;if(_0x835002!==0x0){if(_0x61b344===_0x586383(0x25f))_0x55b221=(_0x835002/startingBalances[_0x586383(0x25f)]-0x1)*0x64;else{if(_0xca2e9e==='EUR')_0x55b221=(_0x835002/startingBalances['eur']-0x1)*0x64;else _0x55b221=(_0x835002/startingBalances[_0x586383(0x350)]-0x1)*0x64;}let _0x1e0762=0x0;if(startingBalances[_0x586383(0x242)])_0x45ff37['forEach'](_0x2e98bf=>{const _0x1d91f4=_0x586383;let _0x45a69e=startingBalances[_0x1d91f4(0x242)][_0x1d91f4(0x313)](_0x251a9b=>_0x251a9b[_0x1d91f4(0x379)]===_0x2e98bf[_0x1d91f4(0x379)]);if(_0x45a69e&&_0x45a69e[_0x1d91f4(0x379)]&&_0x2e98bf[_0x1d91f4(0x2d2)]!==0x0)_0x1e0762+=_0x45a69e[_0x1d91f4(0x2d2)]*_0x2e98bf[_0x1d91f4(0x334)];});let _0x2d9dad=0x0;if(_0xfc29a9[_0x586383(0x233)]!==0x0){let _0x2435a6=_0xfc29a9[_0xfc29a9[_0x586383(0x233)]-0x1];_0x2d9dad=_0x2435a6['netoffset'];}_0x1e0762-=_0x2d9dad;_0x61b344===_0x586383(0x27f)&&(_0x55b221=(_0x835002-_0x1e0762)/startingBalances[_0x586383(0x25f)]*0x64,_0x835002=_0x835002-_0x1e0762);if(_0x61b344===_0x586383(0x1e6)){let _0x2c127f=_0xca2e9e===_0x586383(0x1e7)?startingBalances[_0x586383(0x231)]:startingBalances['usd'];if(_0x463895===_0x586383(0x341)||_0x463895==='ETH')_0x1e0762=_0xca2e9e===_0x586383(0x1e7)?_0x1e0762*_0x3bbc2c['eur']:_0x1e0762*_0x3bbc2c[_0x586383(0x350)];else{if(usdBasecoins['includes'](_0x463895))_0x1e0762=_0xca2e9e===_0x586383(0x1e7)?_0x1e0762*_0x3bbc2c[_0x586383(0x231)]/_0x3bbc2c[_0x586383(0x350)]:_0x1e0762;else _0x463895===_0x586383(0x1e7)&&(_0x1e0762=_0xca2e9e===_0x586383(0x1e7)?_0x1e0762:_0x1e0762*_0x3bbc2c['usd']/_0x3bbc2c[_0x586383(0x231)]);}_0x55b221=(_0x835002-_0x1e0762)/_0x2c127f*0x64,_0x835002=_0x835002-_0x1e0762;}if(_0x55b221){if(_0x55b221<0x64)_0x55b221=_0x55b221['toFixed'](0x2);else{if(_0x55b221<0x3e8)_0x55b221=_0x55b221[_0x586383(0x31c)](0x1);else _0x55b221=_0x55b221['toFixed'](0x0);}}else _0x55b221=Number('0')[_0x586383(0x31c)](0x2);if(_0x835002){if(Math[_0x586383(0x263)](_0x835002)<0.000001)_0x835002=_0x835002['toFixed'](0x2);else{if(Math[_0x586383(0x263)](_0x835002)<0.1)_0x835002=_0x835002[_0x586383(0x31c)](0x6);else{if(Math[_0x586383(0x263)](_0x835002)<0x1)_0x835002=_0x835002[_0x586383(0x31c)](0x5);else{if(Math[_0x586383(0x263)](_0x835002)<0xa)_0x835002=_0x835002[_0x586383(0x31c)](0x4);else{if(Math[_0x586383(0x263)](_0x835002)<0x64)_0x835002=_0x835002['toFixed'](0x3);else{if(Math[_0x586383(0x263)](_0x835002)<0x3e8)_0x835002=_0x835002[_0x586383(0x31c)](0x2);else _0x835002=_0x835002[_0x586383(0x31c)](0x2);}}}}}}else _0x835002=Number('0')[_0x586383(0x31c)](0x2);}else _0x55b221=Number('0')['toFixed'](0x2);return{'value':_0x835002,'change':_0x55b221,'leftTxt':_0x1b3726,'rightTxt':_0x2a10d4};}async function getStartingBalances(_0x4fd291,_0x3e454e=!![]){const _0x50d3f9=_0x36bc83;if(_0x4fd291[_0x50d3f9(0x233)]!==0x0){const [_0x4d9077,_0x1c6e94,_0x3fc186]=getPerf(_0x4fd291[0x0],!![]);let _0xc95d74=[];config[_0x50d3f9(0x28e)][_0x50d3f9(0x2b3)](_0x3bda1b=>{const _0x4e4df1=_0x50d3f9;let _0x57d0be=0x0,_0x4e44e6;config[_0x4e4df1(0x1e5)]['forEach'](_0x5410ca=>{const _0x523c10=_0x4e4df1;let _0x4eb98a=_0x5410ca[_0x523c10(0x1e4)][_0x523c10(0x313)](_0x58adb6=>_0x58adb6[_0x523c10(0x379)]==_0x3bda1b[_0x523c10(0x379)]);if(_0x4eb98a){_0x57d0be+=_0x4eb98a[_0x523c10(0x2d2)];if(!_0x4e44e6)_0x4e44e6=_0x4eb98a[_0x523c10(0x21b)];}}),_0xc95d74[_0x4e4df1(0x240)]({'coin':_0x3bda1b[_0x4e4df1(0x379)],'number':_0x57d0be,'initialprice':_0x4e44e6});});const _0x16f0ec={'basecoin':_0x4d9077,'eur':_0x1c6e94,'usd':_0x3fc186,'coins':_0xc95d74};if(_0x3e454e)proxyEmit(_0x50d3f9(0x372),_0x16f0ec);startingBalances=_0x16f0ec;}}function headlessMode(_0x10e12f){const _0xda32ec=_0x36bc83;let _0x6ad06b=_0x10e12f[_0xda32ec(0x28e)],_0x527f6e=_0x10e12f['threshold'],_0x3d1901=[];for(let _0x21ec65 of _0x6ad06b){if(_0x21ec65['coin']!=config[_0xda32ec(0x25f)]){if(_0x21ec65[_0xda32ec(0x23d)]>=_0x527f6e/0x64){if(_0x21ec65[_0xda32ec(0x251)])_0x3d1901['push'](_0x21ec65);}else{if(_0x21ec65[_0xda32ec(0x23d)]<=-_0x527f6e/0x64){if(_0x21ec65[_0xda32ec(0x251)])_0x3d1901[_0xda32ec(0x240)](_0x21ec65);}}}}_0x3d1901['length']>0x0&&(lockOrders==ORDERS[_0xda32ec(0x208)]&&!coolingDown&&_0x3d1901[_0xda32ec(0x2b3)](_0xcbd82d=>{const _0x1deeaf=_0xda32ec;logger[_0x1deeaf(0x20b)](_0x1deeaf(0x283)+_0xcbd82d[_0x1deeaf(0x379)]+'\x20'+_0xcbd82d[_0x1deeaf(0x2d2)]+'\x20'+_0xcbd82d[_0x1deeaf(0x334)]+'\x20'+_0xcbd82d[_0x1deeaf(0x2b9)]+'%\x20'+_0xcbd82d['target']+'%\x20'+(0x64*_0xcbd82d[_0x1deeaf(0x23d)])[_0x1deeaf(0x31c)](0x2)+_0x1deeaf(0x2b2)+_0x527f6e['toFixed'](0x2)+'%)');}),placeOrder(_0x3d1901));}function notifyBalance(_0x322d18){const _0x58be5b=_0x36bc83;let _0x91d3e3=_0x322d18['portfolio'],_0x35bd1c=_0x322d18[_0x58be5b(0x36e)],_0x18aaa0=[];for(let _0x36c3d5 of _0x91d3e3){if(_0x36c3d5['coin']!=config['basecoin']){if(_0x36c3d5[_0x58be5b(0x23d)]>=_0x35bd1c/0x64){if(_0x36c3d5['valid'])_0x18aaa0['push'](_0x36c3d5);}else{if(_0x36c3d5[_0x58be5b(0x23d)]<=-_0x35bd1c/0x64){if(_0x36c3d5[_0x58be5b(0x251)])_0x18aaa0['push'](_0x36c3d5);}}}}if(_0x18aaa0['length']>0x0){let _0x62f426=_0x18aaa0[_0x58be5b(0x2fa)](_0x43fa12=>_0x43fa12[_0x58be5b(0x379)]);_0x62f426[_0x58be5b(0x2ab)]();let _0x11ab02=_0x62f426[_0x58be5b(0x2f0)](',\x20');if(!lastCoinsToBalance)logHistory(_0x58be5b(0x2d1),_0x58be5b(0x31d));lastCoinsToBalance=_0x11ab02;}}function symbolToCoin(_0x361bbc){const _0x3cf7bb=_0x36bc83;let _0x5949b5;if(_0x361bbc['includes']('/'+config[_0x3cf7bb(0x25f)]))_0x5949b5=_0x361bbc['replace']('/'+config[_0x3cf7bb(0x25f)],'');if(_0x361bbc['includes'](config[_0x3cf7bb(0x25f)]+'/'))_0x5949b5=_0x361bbc[_0x3cf7bb(0x324)](config['basecoin']+'/','');return _0x5949b5;}async function unlockOrders(){const _0xd06e11=_0x36bc83;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0xd06e11(0x20b)](_0xd06e11(0x2d8)),lockOrders=ORDERS[_0xd06e11(0x28f)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x62c921=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x62c921,validateOrdersState=_0xd06e11(0x349),persistOpenOrders([]),lockOrders=ORDERS[_0xd06e11(0x208)],logger[_0xd06e11(0x20b)]('2\x20-\x20Orders\x20unlocked');}}async function validateOrders(_0x326ea6){const _0x3dcbf0=_0x36bc83;if(_0x326ea6)validateOrdersState=_0x326ea6;logger[_0x3dcbf0(0x20b)](_0x3dcbf0(0x320)+validateOrdersState+_0x3dcbf0(0x2b7)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x3dcbf0(0x2df):_0x3dcbf0(0x28d)));let _0x3111f8=[],_0x54d406=config[_0x3dcbf0(0x26a)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3dcbf0(0x256)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3dcbf0(0x285)])return;logger['debug']('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x3dcbf0(0x2b3)](_0x546071=>{const _0x417615=_0x3dcbf0;let _0x56e14a=![];_0x546071['filled']>0x0&&(_0x56e14a=!![]),_0x3111f8[_0x417615(0x240)](_0x56e14a),_0x56e14a&&config[_0x417615(0x26a)]!='market'&&logHistory(_0x417615(0x287),_0x417615(0x2e6)+_0x546071[_0x417615(0x332)]+'\x20'+_0x546071[_0x417615(0x2f9)]+'\x20#'+formatResult(_0x546071['filled'],0x8)+'\x20@'+formatResult(_0x546071['price'],0x8));}),_0x3111f8[_0x3dcbf0(0x2b3)]((_0x612429,_0x362de0)=>{if(_0x612429)lastOrders['splice'](_0x362de0,0x1);}),persistOpenOrders(lastOrders);const _0x2b29ae=coolingDown?_0x3dcbf0(0x2ae):_0x3dcbf0(0x353);if(validateOrdersState=='initial'){validateOrdersState='ongoing';if(_0x3111f8[_0x3dcbf0(0x34b)](![])){if(config['ordertype']==_0x3dcbf0(0x322)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3dcbf0(0x2f4)){if(_0x3111f8[_0x3dcbf0(0x34b)](![])){}else{if(allOrdersPlaced){if(config[_0x3dcbf0(0x26a)]==_0x3dcbf0(0x322)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x3dcbf0(0x1f7))_0x3111f8[_0x3dcbf0(0x34b)](![])&&(config[_0x3dcbf0(0x26a)]==_0x3dcbf0(0x322)?logHistory(_0x3dcbf0(0x212),_0x3dcbf0(0x217)+Math['round'](_0x54d406*validateOrderInterval/0xea60)+_0x3dcbf0(0x24b)+_0x2b29ae):(await cancelOrders(),logHistory(_0x3dcbf0(0x212),_0x3dcbf0(0x1fe)+Math[_0x3dcbf0(0x366)](_0x54d406*validateOrderInterval/0xea60)+_0x3dcbf0(0x24b)+_0x2b29ae))),await unlockOrders();else{if(validateOrdersState==_0x3dcbf0(0x34d)){if(config[_0x3dcbf0(0x26a)]!=_0x3dcbf0(0x322))logHistory('success',_0x3dcbf0(0x351)+_0x2b29ae);await unlockOrders();}}}}}async function cancelOrders(){const _0x1617c8=_0x36bc83;lastOrders[_0x1617c8(0x2b3)](async _0x508b23=>{const _0x42a212=_0x1617c8;try{const _0x1494fc=await exchange['cancelOrder'](_0x508b23[_0x42a212(0x2c3)],_0x508b23['symbol']);}catch(_0x16e0fd){if(_0x16e0fd[_0x42a212(0x22a)]()[_0x42a212(0x34b)]('OrderNotFound')){}else await handleError(_0x16e0fd,_0x42a212(0x26b));}});}async function initCoinResults(_0x261a40){const _0x1d826f=_0x36bc83;_0x261a40?logger[_0x1d826f(0x20b)](_0x1d826f(0x286)+_0x261a40):logger['debug']('Initializing\x20coin\x20results'),config[_0x1d826f(0x28e)][_0x1d826f(0x2b3)](_0x34ca16=>{const _0x48a3fe=_0x1d826f;if(!_0x34ca16['excluded']&&_0x34ca16[_0x48a3fe(0x379)]!=config[_0x48a3fe(0x25f)]){const _0x1ed37c=currentCoins['find'](_0x2d60be=>_0x2d60be['coin']==_0x34ca16['coin']),_0x412f81=global[_0x48a3fe(0x209)][noslash(_0x34ca16[_0x48a3fe(0x332)])];let _0x3d4adc=_0x1ed37c?_0x1ed37c['number']:null,_0x41a805=_0x34ca16[_0x48a3fe(0x2a2)]?0x1/_0x412f81:_0x412f81,_0x3eb013;config[_0x48a3fe(0x1e5)][_0x48a3fe(0x2b3)](_0x4058b1=>{const _0x51e8d3=_0x48a3fe;!_0x3eb013&&(_0x3eb013=_0x4058b1[_0x51e8d3(0x1e4)][_0x51e8d3(0x313)](_0x566f56=>_0x566f56['coin']==_0x34ca16[_0x51e8d3(0x379)]),_0x3eb013&&(_0x3d4adc=_0x3eb013[_0x51e8d3(0x2d2)],_0x41a805=_0x3eb013[_0x51e8d3(0x21b)]));});let _0x3859e9=dbCoinResults[_0x48a3fe(0x323)](_0x48a3fe(0x242))['find']({'coin':_0x34ca16[_0x48a3fe(0x379)]})[_0x48a3fe(0x360)]();if(!_0x3859e9){const _0xa3c1e9={'coin':_0x34ca16[_0x48a3fe(0x379)],'number':_0x3d4adc,'breakeven':_0x41a805,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x48a3fe(0x323)](_0x48a3fe(0x242))['push'](_0xa3c1e9)[_0x48a3fe(0x2f1)]();}else{if(_0x261a40&&_0x34ca16[_0x48a3fe(0x379)]==_0x261a40){const _0x198ccc={'coin':_0x34ca16['coin'],'number':_0x3d4adc,'breakeven':_0x41a805,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x48a3fe(0x323)](_0x48a3fe(0x242))[_0x48a3fe(0x313)]({'coin':_0x34ca16[_0x48a3fe(0x379)]})[_0x48a3fe(0x293)](_0x198ccc)[_0x48a3fe(0x2f1)]();}}}});}async function updateCoinResults(_0x3c2c03,_0x230773=![]){const _0x5c9cd4=_0x36bc83;let _0x1c95e6,_0x16e526,_0xc8fa6d,_0x39d510,_0x4e7154,_0x2374ba,_0x2166b6=dbCoinResults[_0x5c9cd4(0x323)](_0x5c9cd4(0x242))[_0x5c9cd4(0x313)]({'coin':_0x3c2c03[_0x5c9cd4(0x379)]})[_0x5c9cd4(0x360)](),_0x284f90=![];_0x2166b6&&Object[_0x5c9cd4(0x24e)](_0x2166b6)[_0x5c9cd4(0x2b3)](([_0x387373,_0x3eaccc])=>{if(_0x3eaccc==null)_0x284f90=!![];});(!_0x2166b6||_0x284f90)&&(await initCoinResults(_0x3c2c03[_0x5c9cd4(0x379)]),_0x2166b6=dbCoinResults[_0x5c9cd4(0x323)](_0x5c9cd4(0x242))['find']({'coin':_0x3c2c03[_0x5c9cd4(0x379)]})[_0x5c9cd4(0x360)]());_0x3c2c03[_0x5c9cd4(0x2a2)]&&(_0x2374ba={'filled':_0x3c2c03[_0x5c9cd4(0x2b8)]*_0x3c2c03['price'],'amount':_0x3c2c03[_0x5c9cd4(0x2b8)]*_0x3c2c03[_0x5c9cd4(0x21b)],'side':_0x3c2c03[_0x5c9cd4(0x2f9)]=='sell'?_0x5c9cd4(0x2e4):_0x5c9cd4(0x35c),'price':0x1/_0x3c2c03['price']},_0x3c2c03={..._0x3c2c03,..._0x2374ba});_0x230773?_0x16e526=_0x3c2c03['side']==_0x5c9cd4(0x2e4)?_0x2166b6['number']+_0x3c2c03['filled']:_0x2166b6[_0x5c9cd4(0x2d2)]-_0x3c2c03['filled']:_0x16e526=await getCoinNumber(_0x3c2c03[_0x5c9cd4(0x379)]);if(_0x3c2c03[_0x5c9cd4(0x2f7)]&&_0x3c2c03[_0x5c9cd4(0x2f7)][_0x5c9cd4(0x2c6)]==config[_0x5c9cd4(0x25f)])_0x1c95e6=_0x3c2c03[_0x5c9cd4(0x2f7)][_0x5c9cd4(0x2ba)];else{if(_0x3c2c03[_0x5c9cd4(0x2f7)]&&_0x3c2c03[_0x5c9cd4(0x2f7)][_0x5c9cd4(0x2c6)]==_0x5c9cd4(0x371)&&!_0x230773)_0x1c95e6=_0x3c2c03['fee']['cost']*global[_0x5c9cd4(0x209)][_0x5c9cd4(0x371)+config[_0x5c9cd4(0x25f)]];else _0x1c95e6=defaultFee*_0x3c2c03[_0x5c9cd4(0x2b8)]*_0x3c2c03[_0x5c9cd4(0x21b)];}_0x3c2c03[_0x5c9cd4(0x2f9)]==_0x5c9cd4(0x2e4)?(_0xc8fa6d=_0x16e526!=0x0?(_0x2166b6['breakeven']*_0x2166b6[_0x5c9cd4(0x2d2)]+_0x3c2c03[_0x5c9cd4(0x21b)]*(_0x16e526-_0x2166b6[_0x5c9cd4(0x2d2)])+_0x1c95e6)/_0x16e526:0x0,_0x39d510=_0x2166b6['realized']):(_0xc8fa6d=_0x16e526!=0x0?(_0x2166b6[_0x5c9cd4(0x2d4)]*_0x2166b6[_0x5c9cd4(0x2d2)]-_0x3c2c03[_0x5c9cd4(0x21b)]*(_0x2166b6[_0x5c9cd4(0x2d2)]-_0x16e526)+_0x1c95e6)/_0x16e526:0x0,_0x39d510=_0x2166b6['realized']+(_0x3c2c03[_0x5c9cd4(0x21b)]-_0x2166b6['breakeven'])*_0x3c2c03[_0x5c9cd4(0x2b8)]);_0x4e7154=(_0x3c2c03['price']-_0xc8fa6d-_0x1c95e6/_0x3c2c03[_0x5c9cd4(0x2b8)])*_0x16e526;let _0x4c794d={'coin':_0x3c2c03[_0x5c9cd4(0x379)],'number':_0x16e526,'breakeven':formatResult(_0xc8fa6d,0x8),'realized':formatResult(_0x39d510,0x8),'unrealized':formatResult(_0x4e7154,0x8),'fees':formatResult(_0x2166b6[_0x5c9cd4(0x1f4)]+_0x1c95e6,0x8),'sells':_0x3c2c03[_0x5c9cd4(0x2f9)]=='sell'?_0x2166b6[_0x5c9cd4(0x35d)]+0x1:_0x2166b6['sells'],'buys':_0x3c2c03[_0x5c9cd4(0x2f9)]==_0x5c9cd4(0x2e4)?_0x2166b6[_0x5c9cd4(0x2ce)]+0x1:_0x2166b6[_0x5c9cd4(0x2ce)]};dbCoinResults[_0x5c9cd4(0x323)](_0x5c9cd4(0x242))[_0x5c9cd4(0x313)]({'coin':_0x3c2c03['coin']})[_0x5c9cd4(0x293)](_0x4c794d)[_0x5c9cd4(0x2f1)]();if(!_0x230773){if(_0x3c2c03[_0x5c9cd4(0x2f7)]&&_0x3c2c03[_0x5c9cd4(0x2f7)][_0x5c9cd4(0x2c6)]=='BNB'){const _0x29840f=currentCoins[_0x5c9cd4(0x313)](_0x2bd52a=>_0x2bd52a[_0x5c9cd4(0x379)]==_0x5c9cd4(0x371));if(_0x29840f){let _0x395d89=dbCoinResults[_0x5c9cd4(0x323)]('coins')[_0x5c9cd4(0x313)]({'coin':'BNB'})[_0x5c9cd4(0x360)]();_0x4c794d={..._0x395d89,'number':_0x29840f[_0x5c9cd4(0x2d2)]},dbCoinResults['get'](_0x5c9cd4(0x242))[_0x5c9cd4(0x313)]({'coin':_0x5c9cd4(0x371)})[_0x5c9cd4(0x293)](_0x4c794d)['write']();}}}}async function placeOrder(_0x50963c){const _0x4629b9=_0x36bc83,_0x2de621=config[_0x4629b9(0x26a)]=='market'?_0x4629b9(0x322):_0x4629b9(0x225);if(lockOrders==ORDERS[_0x4629b9(0x208)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x4629b9(0x285)],allOrdersPlaced=![],validateOrdersState=_0x4629b9(0x349);let _0xcef6f4=![];lastOrders=[];for(const _0x363218 of _0x50963c){let _0x36e20e,_0x4c3aaf,_0x510270,_0x1cea1e,_0x40fe31,_0x585959=_0x363218['symbol'];try{const _0x56c1bb=await exchange[_0x4629b9(0x2a7)](_0x585959);_0x36e20e=_0x363218['reverse']?0x1/_0x363218['last']:_0x363218['last'],_0x4c3aaf=_0x56c1bb[_0x4629b9(0x325)],_0x510270=_0x56c1bb[_0x4629b9(0x221)];_0x363218[_0x4629b9(0x2a2)]?(_0x1cea1e=_0x363218['side']==_0x4629b9(0x2e4)?_0x4629b9(0x35c):_0x4629b9(0x2e4),_0x40fe31=Math['abs'](_0x363218[_0x4629b9(0x309)])/_0x36e20e):(_0x1cea1e=_0x363218[_0x4629b9(0x2f9)],_0x40fe31=Math[_0x4629b9(0x263)](_0x363218[_0x4629b9(0x309)]));_0x2de621==_0x4629b9(0x225)&&(config[_0x4629b9(0x26a)]==_0x4629b9(0x362)&&(_0x36e20e=_0x1cea1e==_0x4629b9(0x2e4)?_0x4c3aaf:_0x510270),config[_0x4629b9(0x26a)]==_0x4629b9(0x310)&&(_0x36e20e=_0x1cea1e==_0x4629b9(0x2e4)?_0x510270:_0x4c3aaf));_0x40fe31=formatResult(_0x40fe31,0x8),_0x36e20e=formatResult(_0x36e20e,0x8);const _0x1927c6=_0x1cea1e=='sell'?config['emojisell']?String[_0x4629b9(0x2af)]('0x'+config[_0x4629b9(0x29d)])+'\x20':'':config[_0x4629b9(0x276)]?String[_0x4629b9(0x2af)]('0x'+config[_0x4629b9(0x276)])+'\x20':'',_0x1aad62=_0x2de621=='market'?_0x4629b9(0x25e):config[_0x4629b9(0x26a)]==_0x4629b9(0x362)?_0x4629b9(0x271):_0x4629b9(0x29a),_0x3ad114=(Math[_0x4629b9(0x1f5)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x4629b9(0x22a)]();lastOrders[_0x4629b9(0x240)]({'customId':_0x3ad114,'symbol':_0x585959,'coin':_0x363218[_0x4629b9(0x379)],'amount':_0x40fe31,'price':_0x36e20e,'side':_0x1cea1e,'reverse':_0x363218[_0x4629b9(0x2a2)],'filled':0x0});if(_0x2de621=='market')logHistory(_0x4629b9(0x287),''+_0x1927c6+_0x1aad62+_0x4629b9(0x2a1)+_0x585959+'\x20'+_0x1cea1e+'\x20#'+formatResult(_0x40fe31,0x8)+'\x20@'+formatResult(_0x36e20e,0x8));else logHistory(_0x4629b9(0x287),''+_0x1927c6+_0x1aad62+'\x20order:\x20'+_0x585959+'\x20'+_0x1cea1e+'\x20#'+formatResult(_0x40fe31,0x8)+'\x20@'+formatResult(_0x36e20e,0x8));let _0x345987;_0x2de621==_0x4629b9(0x322)?_0x1cea1e==_0x4629b9(0x2e4)&&[_0x4629b9(0x374),'Bitget',_0x4629b9(0x265),_0x4629b9(0x346),_0x4629b9(0x25a)][_0x4629b9(0x34b)](config[_0x4629b9(0x2aa)])?_0x345987=await exchange[_0x4629b9(0x35f)](_0x585959,_0x2de621,_0x1cea1e,_0x40fe31,_0x36e20e):_0x345987=await exchange[_0x4629b9(0x35f)](_0x585959,_0x2de621,_0x1cea1e,_0x40fe31,undefined):_0x345987=await exchange['createOrder'](_0x585959,_0x2de621,_0x1cea1e,_0x40fe31,_0x36e20e);logger[_0x4629b9(0x20b)](_0x4629b9(0x29f)+_0x345987['id']+_0x4629b9(0x21a)+_0x3ad114);const _0x3bf09b=lastOrders[_0x4629b9(0x233)]-0x1;if(_0x3bf09b>=0x0&&lastOrders[_0x3bf09b][_0x4629b9(0x216)]==_0x3ad114){lastOrders[_0x3bf09b][_0x4629b9(0x2c3)]=_0x345987['id'];if(_0x345987[_0x4629b9(0x26d)])lastOrders[_0x3bf09b]['amount']=_0x345987[_0x4629b9(0x26d)];if(_0x345987['price'])lastOrders[_0x3bf09b]['price']=_0x345987[_0x4629b9(0x21b)];lastOrders[_0x3bf09b][_0x4629b9(0x2f7)]=_0x345987[_0x4629b9(0x2f7)];}if(config[_0x4629b9(0x27e)]!=0x0){let _0x1ffc1b=null;if(cooldownTracker[_0x4629b9(0x233)]==config[_0x4629b9(0x27e)]-0x1)_0x1ffc1b=cooldownTracker[_0x4629b9(0x202)]();const _0x3b98f4=getTimeStamp();cooldownTracker['push'](_0x3b98f4);if(_0x1ffc1b){const _0x4776ed=fns[_0x4629b9(0x2f3)](new Date(_0x3b98f4),new Date(_0x1ffc1b));if(_0x4776ed<cooldownInterval){logHistory(_0x4629b9(0x301),_0x4629b9(0x239)+config[_0x4629b9(0x27e)]+_0x4629b9(0x311)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x3ded45){if(_0x3ded45[_0x4629b9(0x22a)]()[_0x4629b9(0x34b)](_0x4629b9(0x33f)))lastOrders=lastOrders[_0x4629b9(0x2e3)](_0x200c9e=>_0x200c9e[_0x4629b9(0x332)]!=_0x585959),logHistory(_0x4629b9(0x301),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x585959),_0xcef6f4=!![];else{if(_0x3ded45[_0x4629b9(0x22a)]()[_0x4629b9(0x34b)](_0x4629b9(0x368)))lastOrders=lastOrders['filter'](_0x2e0bd2=>_0x2e0bd2['symbol']!=_0x585959),logHistory(_0x4629b9(0x301),_0x4629b9(0x1ff)+_0x585959),_0xcef6f4=!![];else{if(_0x3ded45[_0x4629b9(0x22a)]()['includes'](_0x4629b9(0x223)))lastOrders=lastOrders[_0x4629b9(0x2e3)](_0x3a18c0=>_0x3a18c0[_0x4629b9(0x332)]!=_0x585959),logHistory(_0x4629b9(0x301),_0x4629b9(0x2de)+_0x585959),logger[_0x4629b9(0x20b)](_0x3ded45),_0xcef6f4=!![];else _0x3ded45[_0x4629b9(0x22a)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x4629b9(0x2e3)](_0x2061ad=>_0x2061ad[_0x4629b9(0x332)]!=_0x585959),logHistory(_0x4629b9(0x301),_0x4629b9(0x1f0)+_0x585959),_0xcef6f4=!![]):(lastOrders=lastOrders['filter'](_0x202452=>_0x202452[_0x4629b9(0x332)]!=_0x585959),await handleError(_0x3ded45,'placeOrder()',_0x585959));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4629b9(0x233)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x473e33=config[_0x4629b9(0x26a)]==_0x4629b9(0x322)?validateOrderTimeout*0x3c*0x3e8:config[_0x4629b9(0x256)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0xc64b5b=_0x4629b9;validateOrders(_0xc64b5b(0x1f7));},_0x473e33);}else unlockOrders();_0xcef6f4&&config['headless']&&(logHistory(_0x4629b9(0x301),_0x4629b9(0x317)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4629b9(0x212),_0x4629b9(0x333)));}else{if(coolingDown)!config[_0x4629b9(0x29b)]&&logHistory(_0x4629b9(0x301),_0x4629b9(0x2f5));else lockOrders!=ORDERS[_0x4629b9(0x208)]&&(!config[_0x4629b9(0x29b)]&&(config['ordertype']==_0x4629b9(0x322)?logHistory('error',_0x4629b9(0x205)):logHistory(_0x4629b9(0x301),_0x4629b9(0x1f2))));}}function persistOpenOrders(_0x46c504){const _0x59c393=_0x36bc83,_0x17e4b4={...config,'openOrders':_0x46c504};let _0x4f1a76=dbConfig[_0x59c393(0x323)](_0x59c393(0x262))[_0x59c393(0x313)]({'botID':botID})[_0x59c393(0x360)]();_0x4f1a76&&dbConfig[_0x59c393(0x323)](_0x59c393(0x262))[_0x59c393(0x313)]({'botID':botID})[_0x59c393(0x293)](_0x17e4b4)[_0x59c393(0x2f1)]();}function restoreOrders(){const _0x335efc=_0x36bc83;let _0x5cfb97;config[_0x335efc(0x36a)]&&allOpenOrders[_0x335efc(0x2b3)](_0x2fecaf=>{const _0x4f6a04=_0x335efc,_0x2a8614=config[_0x4f6a04(0x36a)][_0x4f6a04(0x313)](_0x3e5443=>_0x3e5443[_0x4f6a04(0x2c3)]==_0x2fecaf['id']);_0x2a8614&&(lastOrders[_0x4f6a04(0x240)](_0x2a8614),_0x5cfb97=_0x2fecaf[_0x4f6a04(0x35a)]);});if(lastOrders[_0x335efc(0x233)]>0x0){lockOrders=ORDERS[_0x335efc(0x285)],validateOrdersState=_0x335efc(0x2f4),allOrdersPlaced=!![];const _0x3bbd9d=new Date()[_0x335efc(0x355)](),_0x25ca55=config['ordertype']==_0x335efc(0x322)?validateOrderTimeout*0x3c*0x3e8:config[_0x335efc(0x256)]*0x3c*0x3e8;if(_0x5cfb97+_0x25ca55>_0x3bbd9d){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x1246e9=_0x335efc;validateOrders(_0x1246e9(0x1f7));},_0x5cfb97+_0x25ca55-_0x3bbd9d);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x4d70ff=_0x36bc83;if(!coinsLoaded){process[_0x4d70ff(0x296)]({'telegrammsg':_0x4d70ff(0x314)},_0x4cd44f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x1f7768='';if(config[_0x4d70ff(0x270)])_0x1f7768=_0x4d70ff(0x2fc)+config['botname']+_0x4d70ff(0x2b0);else _0x1f7768=_0x4d70ff(0x327)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x4b12a6=getKPIs(_0x4d70ff(0x25f)),_0x1a2880=getKPIs(_0x4d70ff(0x204),config[_0x4d70ff(0x204)]),_0x4a5dca=getKPIs(_0x4d70ff(0x27f)),_0x941c21=getKPIs(_0x4d70ff(0x1e6),config[_0x4d70ff(0x204)]);_0x1f7768+=_0x4d70ff(0x326),_0x1f7768+=_0x4b12a6[_0x4d70ff(0x32c)]+_0x4d70ff(0x2cf)+_0x4b12a6['value']+'\x0a',_0x1f7768+=_0x4b12a6[_0x4d70ff(0x28c)]+':\x20'+_0x4b12a6[_0x4d70ff(0x207)]+'%\x0a',_0x1f7768+=_0x1a2880['leftTxt']+_0x4d70ff(0x2cf)+_0x1a2880[_0x4d70ff(0x360)]+'\x0a',_0x1f7768+=_0x1a2880['rightTxt']+':\x20'+_0x1a2880[_0x4d70ff(0x207)]+'%\x0a',_0x1f7768+=_0x4a5dca[_0x4d70ff(0x32c)]+':\x20'+_0x4a5dca[_0x4d70ff(0x360)]+'\x20('+config[_0x4d70ff(0x25f)]+')\x0a',_0x1f7768+=_0x4a5dca[_0x4d70ff(0x28c)]+':\x20'+_0x4a5dca[_0x4d70ff(0x207)]+_0x4d70ff(0x2b2)+config[_0x4d70ff(0x25f)]+')\x0a',_0x1f7768+=_0x941c21[_0x4d70ff(0x32c)]+':\x20'+_0x941c21[_0x4d70ff(0x360)]+'\x20('+config[_0x4d70ff(0x204)]+')\x0a',_0x1f7768+=_0x941c21[_0x4d70ff(0x28c)]+':\x20'+_0x941c21[_0x4d70ff(0x207)]+'%\x20('+config[_0x4d70ff(0x204)]+')\x0a',_0x1f7768+=_0x4d70ff(0x28b),process[_0x4d70ff(0x296)]({'telegrammsg':_0x1f7768},_0x47f5d7=>{});}async function sendPortfolioTelegram(){const _0x20c733=_0x36bc83;if(!coinsLoaded){process[_0x20c733(0x296)]({'telegrammsg':_0x20c733(0x314)},_0x4c63db=>{});return;}let _0x476a37='';if(config['showname'])_0x476a37='<b>'+config['botname']+_0x20c733(0x267);else _0x476a37=_0x20c733(0x327)+botID+_0x20c733(0x267);_0x476a37+='<pre>',_0x476a37+=_0x20c733(0x336),_0x476a37+=_0x20c733(0x245),_0x476a37+=_0x20c733(0x336),currentCoins[_0x20c733(0x2b3)](_0x59616b=>{const _0x3307cd=_0x20c733;_0x476a37+=_0x59616b[_0x3307cd(0x379)][_0x3307cd(0x25d)](0x7)+'|\x20'+formatPad(_0x59616b['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x59616b[_0x3307cd(0x37b)],0x2,0x6)+'|\x20'+formatPad(_0x59616b['delta']*0x64,0x2,0x6)+'\x0a';}),_0x476a37+='</pre>',process[_0x20c733(0x296)]({'telegrammsg':_0x476a37},_0x2f92a0=>{});}function formatPad(_0x5e66c0,_0x1a51a2,_0x4fd72b){const _0x120185=_0x36bc83,_0x934f32=formatResultString(_0x5e66c0,_0x1a51a2);return _0x934f32?_0x934f32[_0x120185(0x343)](_0x4fd72b):''[_0x120185(0x343)](_0x4fd72b);}function logHistory(_0x1ae56d,_0xe70f04,_0x20f510=''){const _0x14f623=_0x36bc83;logger[_0x14f623(0x247)](''+_0xe70f04);let _0x2eac14={'time':getTimeStamp(),'type':_0x1ae56d,'event':_0xe70f04};dbLogs['get'](_0x14f623(0x2f8))[_0x14f623(0x240)](_0x2eac14)[_0x14f623(0x2f1)]();if(_0x20f510=='')_0x20f510=_0xe70f04;proxyEmit(_0x14f623(0x291),{'log':_0x2eac14,'summary':_0x20f510}),process['send']({'telegram':{..._0x2eac14,'botname':config[_0x14f623(0x2ed)],'showname':config[_0x14f623(0x270)]}},_0x4699d9=>{});}function emitHistory(_0x2900f4={}){const _0x400d9e=_0x36bc83;Object[_0x400d9e(0x21e)](_0x2900f4)[_0x400d9e(0x233)]==0x0&&(_0x2900f4={'type':[_0x400d9e(0x287),_0x400d9e(0x291)],'event':'','page':0x1});if(_0x2900f4['type'][_0x400d9e(0x34b)](_0x400d9e(0x291)))_0x2900f4[_0x400d9e(0x34a)][_0x400d9e(0x376)](_0x2900f4[_0x400d9e(0x34a)][_0x400d9e(0x2ac)](_0x400d9e(0x291)),0x1,'error','warning','success');if(dbLogs[_0x400d9e(0x318)](_0x400d9e(0x2f8))[_0x400d9e(0x360)]()){let _0x53169a=dbLogs['get'](_0x400d9e(0x2f8))[_0x400d9e(0x2e3)](_0x2219ac=>{const _0x579f88=_0x400d9e;if(_0x2900f4[_0x579f88(0x34a)][_0x579f88(0x233)]==0x0)return![];else return _0x2900f4[_0x579f88(0x34a)][_0x579f88(0x34b)](_0x2219ac[_0x579f88(0x34a)]);})[_0x400d9e(0x2e3)](_0x490dfe=>{const _0x5cf8e5=_0x400d9e;if(_0x2900f4[_0x5cf8e5(0x291)]=='')return!![];else return _0x490dfe['event']['toLowerCase']()[_0x5cf8e5(0x34b)](_0x2900f4[_0x5cf8e5(0x291)][_0x5cf8e5(0x250)]());})[_0x400d9e(0x2e9)](_0x400d9e(0x319)),_0x21cc3f=_0x53169a[_0x400d9e(0x360)]()['length'];_0x53169a=_0x53169a['reverse']()['slice']((_0x2900f4[_0x400d9e(0x2b1)]-0x1)*logPageSize,_0x2900f4[_0x400d9e(0x2b1)]*logPageSize-0x1)['reverse']()[_0x400d9e(0x360)](),proxyEmit(_0x400d9e(0x211),{'logs':_0x53169a,'total':_0x21cc3f});}else proxyEmit(_0x400d9e(0x211),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x507907){const _0x2f75b5=_0x36bc83;if(dbLogs['has'](_0x2f75b5(0x2f8))['value']()){const _0x297404=dbLogs[_0x2f75b5(0x323)]('logs')[_0x2f75b5(0x2e9)](_0x2f75b5(0x319))[_0x2f75b5(0x2e3)](_0x393aeb=>{const _0x221855=_0x2f75b5;return _0x393aeb[_0x221855(0x34a)]==_0x221855(0x287);})[_0x2f75b5(0x360)]();dbLogs['get'](_0x2f75b5(0x2f8))['remove']()[_0x2f75b5(0x2f1)](),dbLogs['get'](_0x2f75b5(0x2f8))[_0x2f75b5(0x293)](_0x297404)['write'](),emitHistory(_0x507907);}}async function pauseBot(_0x31c8b4=pauseBotInterval){const _0x535c22=_0x36bc83,_0xa0f856=new Date()[_0x535c22(0x355)]();if(!lastErrorShown||_0xa0f856-lastErrorShown>=_0x31c8b4){lastErrorShown=_0xa0f856;!lastBotPause?(lastBotPause=_0xa0f856,consecutivePauses=0x1):(_0xa0f856-lastBotPause-_0x31c8b4<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x535c22(0x296)]({'stop':_0x535c22(0x367)},_0x57a490=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x535c22(0x355)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x31c8b4),botPaused=![],reset(!![]);}}}async function killBot(){const _0x27033e=_0x36bc83;botPaused=!![],await sleep(0x3e8),process[_0x27033e(0x296)]({'stop':_0x27033e(0x364)},_0x5b8865=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x30f71b,_0xc476df){const _0x24a75b=_0x36bc83;if(botPaused)return;const _0x279c00=config[_0x24a75b(0x2aa)]||_0x24a75b(0x22e);if(_0xc476df)logger['debug'](_0x24a75b(0x2c5)+_0xc476df);const _0x38b84c=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x30f71b[_0x24a75b(0x22a)]()['includes'](_0x24a75b(0x347)))logHistory('error',_0x279c00+_0x24a75b(0x284)),_0x38b84c();else{if(_0x30f71b['toString']()['includes'](_0x24a75b(0x22b)))logHistory(_0x24a75b(0x301),_0x279c00+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration'),_0x38b84c();else _0x30f71b[_0x24a75b(0x22a)]()[_0x24a75b(0x34b)](_0x24a75b(0x378))?(logHistory('error',_0x279c00+'\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration'),logHistory(_0x24a75b(0x301),_0x24a75b(0x2b6)),_0x38b84c()):await handleError(_0x30f71b,null);}}async function handleError(_0x4d8a0e,_0x5c0dcb,_0x2d2bed=''){const _0x3f02d4=_0x36bc83;if(botPaused)return;const _0x57c5c6=config[_0x3f02d4(0x2aa)]||_0x3f02d4(0x22e);if(_0x5c0dcb)logger[_0x3f02d4(0x20b)](_0x3f02d4(0x2c5)+_0x5c0dcb);if(_0x4d8a0e[_0x3f02d4(0x22a)]()['includes'](_0x3f02d4(0x218))||_0x4d8a0e[_0x3f02d4(0x22a)]()['includes'](_0x3f02d4(0x206)))logHistory('error',_0x57c5c6+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),await pauseBot();else{if(_0x4d8a0e['toString']()[_0x3f02d4(0x34b)](_0x3f02d4(0x2bc))||_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)](_0x3f02d4(0x2db)))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x26e)+pauseBotMsg),await pauseBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)](_0x3f02d4(0x220)))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x24a)+pauseBotMsg),await pauseBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()['includes'](_0x3f02d4(0x299)))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x32e)+pauseBotMsg),await pauseBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)](_0x3f02d4(0x31f)))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x3f02d4(0x301),_0x3f02d4(0x32a)),await killBot();else{if(_0x4d8a0e['toString']()['includes']('InvalidNonce'))logHistory(_0x3f02d4(0x301),_0x57c5c6+'\x20blocked\x20your\x20API'+pauseBotMsgLong),logHistory('error',_0x3f02d4(0x275)),await pauseBot(pauseBotIntervalLong);else{if(_0x4d8a0e instanceof ccxt['NetworkError'])logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x30a)+pauseBotMsg),logger['debug']('Error\x20details:',_0x4d8a0e),await pauseBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()['includes'](_0x3f02d4(0x347)))logHistory('error',_0x57c5c6+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x3f02d4(0x301),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x261)),logHistory(_0x3f02d4(0x301),_0x3f02d4(0x32a)),await killBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)]('AuthenticationError'))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x2ca)),logHistory(_0x3f02d4(0x301),_0x3f02d4(0x32a)),await killBot();else{if(_0x4d8a0e[_0x3f02d4(0x22a)]()[_0x3f02d4(0x34b)](_0x3f02d4(0x1fb)))logHistory(_0x3f02d4(0x301),_0x57c5c6+_0x3f02d4(0x23c)),logHistory(_0x3f02d4(0x301),_0x3f02d4(0x32a)),await killBot();else{if(_0x4d8a0e['toString']()[_0x3f02d4(0x34b)](_0x3f02d4(0x338)))logHistory(_0x3f02d4(0x301),_0x3f02d4(0x210)+_0x2d2bed);else _0x4d8a0e instanceof ccxt[_0x3f02d4(0x35e)]?(logHistory('error',_0x57c5c6+_0x3f02d4(0x2e8)),logger[_0x3f02d4(0x20b)](_0x3f02d4(0x348),_0x4d8a0e)):(logHistory('error',_0x3f02d4(0x21c)+pauseBotMsg),logger[_0x3f02d4(0x20b)](_0x3f02d4(0x348),_0x4d8a0e),await pauseBot());}}}}}}}}}}}}function formatResult(_0x4fd298,_0x3477f9){const _0x17480c=_0x36bc83;return parseFloat(_0x4fd298[_0x17480c(0x31c)](_0x3477f9));}function formatResultTruncate(_0x3a0922,_0x2ff9ab){const _0x4f2eb9=_0x36bc83;let _0x560385=formatResultString(_0x3a0922,0xa),_0x42f1ae=_0x560385[_0x4f2eb9(0x2ac)]('.');return _0x42f1ae!=-0x1&&(_0x560385=_0x560385[_0x4f2eb9(0x2bf)](0x0,_0x42f1ae+_0x2ff9ab+0x1)),Number(_0x560385);}function formatResultString(_0x1f6338,_0x41c8a0){const _0x8a5225=_0x36bc83;let _0x1cd922;if(!(''+_0x1f6338)[_0x8a5225(0x34b)]('e'))_0x1cd922=+(Math[_0x8a5225(0x366)](_0x1f6338+'e+'+_0x41c8a0)+'e-'+_0x41c8a0);else{let _0x40050d=(''+_0x1f6338)[_0x8a5225(0x306)]('e'),_0x22d3e5='';+_0x40050d[0x1]+_0x41c8a0>0x0&&(_0x22d3e5='+'),_0x1cd922=+(Math[_0x8a5225(0x366)](+_0x40050d[0x0]+'e'+_0x22d3e5+(+_0x40050d[0x1]+_0x41c8a0))+'e-'+_0x41c8a0);}return Number(_0x1cd922)[_0x8a5225(0x31c)](_0x41c8a0);}function getServerTime(){const _0x12db8b=_0x36bc83,_0xdfcf7a=new Date();return _0xdfcf7a[_0x12db8b(0x308)]()+'/'+(_0xdfcf7a['getMonth']()+0x1)[_0x12db8b(0x22a)]()[_0x12db8b(0x343)](0x2,'0')+'/'+_0xdfcf7a[_0x12db8b(0x33c)]()[_0x12db8b(0x22a)]()[_0x12db8b(0x343)](0x2,'0')+'\x20'+_0xdfcf7a[_0x12db8b(0x1e2)]()['toString']()[_0x12db8b(0x343)](0x2,'0')+':'+_0xdfcf7a[_0x12db8b(0x235)]()[_0x12db8b(0x22a)]()[_0x12db8b(0x343)](0x2,'0')+':'+_0xdfcf7a[_0x12db8b(0x232)]()[_0x12db8b(0x22a)]()[_0x12db8b(0x343)](0x2,'0');}function getTimeStamp(){const _0x674b9c=_0x36bc83,_0x2e1ece=shiftedTime();return _0x2e1ece[_0x674b9c(0x308)]()+'/'+(_0x2e1ece['getMonth']()+0x1)[_0x674b9c(0x22a)]()[_0x674b9c(0x343)](0x2,'0')+'/'+_0x2e1ece[_0x674b9c(0x33c)]()[_0x674b9c(0x22a)]()[_0x674b9c(0x343)](0x2,'0')+'\x20'+_0x2e1ece[_0x674b9c(0x1e2)]()[_0x674b9c(0x22a)]()['padStart'](0x2,'0')+':'+_0x2e1ece[_0x674b9c(0x235)]()[_0x674b9c(0x22a)]()[_0x674b9c(0x343)](0x2,'0')+':'+_0x2e1ece[_0x674b9c(0x232)]()['toString']()[_0x674b9c(0x343)](0x2,'0');}function getDate(){const _0x3b5942=_0x36bc83,_0x4aca7c=shiftedTime();return _0x4aca7c['getFullYear']()+'/'+(_0x4aca7c[_0x3b5942(0x289)]()+0x1)[_0x3b5942(0x22a)]()['padStart'](0x2,'0')+'/'+_0x4aca7c[_0x3b5942(0x33c)]()[_0x3b5942(0x22a)]()[_0x3b5942(0x343)](0x2,'0');}function getHour(){const _0x4bc9f4=_0x36bc83,_0x7a8653=shiftedTime();return _0x7a8653[_0x4bc9f4(0x1e2)]()[_0x4bc9f4(0x22a)]()[_0x4bc9f4(0x343)](0x2,'0');}function sleep(_0x255e88){return new Promise(_0x475f0f=>setTimeout(_0x475f0f,_0x255e88));}function shiftedTime(){const _0xb5a1c1=_0x36bc83,_0x59979f=new Date();let _0x308696=_0x59979f;if(config&&config[_0xb5a1c1(0x361)]!==0x0)_0x308696=fns[_0xb5a1c1(0x22c)](_0x59979f,{'hours':config[_0xb5a1c1(0x361)]});return _0x308696;}function timer(_0x1d3c20){const _0x726f06=_0x36bc83,_0x265249=new Date();!lasttime?console['log'](getTimeStamp()+_0x726f06(0x2c9),_0x1d3c20,_0x265249):console[_0x726f06(0x359)](getTimeStamp()+':\x20timer\x20>',_0x1d3c20,(_0x265249-lasttime)/0x3e8),lasttime=_0x265249;}