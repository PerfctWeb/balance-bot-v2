const _0x25790c=_0xbf13;(function(_0x184e85,_0x1b5544){const _0x35a5f9=_0xbf13,_0xf3db12=_0x184e85();while(!![]){try{const _0x1d51e2=parseInt(_0x35a5f9(0x203))/0x1*(-parseInt(_0x35a5f9(0x131))/0x2)+-parseInt(_0x35a5f9(0x29c))/0x3*(-parseInt(_0x35a5f9(0x171))/0x4)+parseInt(_0x35a5f9(0x12b))/0x5+-parseInt(_0x35a5f9(0x1a5))/0x6+parseInt(_0x35a5f9(0x22f))/0x7*(parseInt(_0x35a5f9(0x1b0))/0x8)+-parseInt(_0x35a5f9(0x172))/0x9+parseInt(_0x35a5f9(0x1b3))/0xa;if(_0x1d51e2===_0x1b5544)break;else _0xf3db12['push'](_0xf3db12['shift']());}catch(_0x2d1fed){_0xf3db12['push'](_0xf3db12['shift']());}}}(_0x3124,0xbb9fd));const _0x43e16b=function(){let _0x102f19=!![];return function(_0x39280b,_0x5b6425){const _0x9b05aa=_0x102f19?function(){const _0xf7a766=_0xbf13;if(_0x5b6425){const _0x20b52b=_0x5b6425[_0xf7a766(0x23a)](_0x39280b,arguments);return _0x5b6425=null,_0x20b52b;}}:function(){};return _0x102f19=![],_0x9b05aa;};}(),_0x4df48f=_0x43e16b(this,function(){const _0x5b3e3b=_0xbf13;return _0x4df48f[_0x5b3e3b(0x226)]()[_0x5b3e3b(0x164)](_0x5b3e3b(0x15b))[_0x5b3e3b(0x226)]()[_0x5b3e3b(0x161)](_0x4df48f)[_0x5b3e3b(0x164)](_0x5b3e3b(0x15b));});_0x4df48f();'use strict';const ccxt=require(_0x25790c(0x21a)),low=require(_0x25790c(0x23f)),FileSync=require(_0x25790c(0x1f7)),fs=require('fs'),fns=require(_0x25790c(0x17d)),Crypt=require(_0x25790c(0x209))['Crypt'],util=require('util'),argv=require('yargs/yargs')(process['argv'][_0x25790c(0x150)](0x2))[_0x25790c(0x1f3)],path=require(_0x25790c(0x187));let exchange;global[_0x25790c(0x224)]={},global[_0x25790c(0x236)]={};const usdBasecoins=[_0x25790c(0x264),'BUSD','TUSD','USDT',_0x25790c(0x1af),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x25790c(0x1ba)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x25790c(0x100)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x25790c(0x231)+pauseBotInterval/0xea60+_0x25790c(0x191),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x25790c(0x158)],botID=process['argv'][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x25790c(0x282)](botID)&&(console[_0x25790c(0x26f)](_0x25790c(0x1b9)+botID+_0x25790c(0x271)),killBot());const userID=process[_0x25790c(0x1f3)][0x3]||'',configpath=userID?'./config/'+userID+'/':'./config/',logspath=userID?_0x25790c(0x238)+userID+'/':'./logs/',loggerfile=fs[_0x25790c(0x14f)](logspath+_0x25790c(0x136),{'flags':'a'});!fs[_0x25790c(0x220)](configpath)&&fs[_0x25790c(0x28f)](configpath);!fs['existsSync'](logspath)&&fs[_0x25790c(0x28f)](logspath);const configfile=configpath+'bot-'+botID+_0x25790c(0x262),logfile=configpath+_0x25790c(0x24f)+botID+'-events.json',performancefile=configpath+_0x25790c(0x24f)+botID+'-performance.json',coinresultsfile=configpath+'bot-'+botID+_0x25790c(0x284),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x25790c(0x1f8),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x25790c(0x1c6)]({'logs':[],'version':serverversion})[_0x25790c(0x1cd)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x25790c(0x1c6)]({'data':[],'version':serverversion})[_0x25790c(0x1cd)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x25790c(0x1cd)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x25790c(0x1c6)]({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;function _0x3124(){const _0x3a6b0f=['close','Insufficient\x20funds\x20to\x20execute\x20order:\x20','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','trade','Order\x20amount\x20is\x20invalid:\x20',':\x20timer\x20>','version','Exception\x20thrown\x20in\x20','pro','(((.+)+)+)+$','PAXG','sortBy','watchOrders','API-key\x20format\x20invalid','balances','constructor','fromCodePoint','active','search','recent20','status','padStart','Binance','liquidity','restart','differenceInSeconds','startprice','exchange\x20not\x20reloaded','ordertype','ETH','realized','155444zVyrVE','3493845tdxvyW','eur','remove','2\x20-\x20Handled\x20open\x20orders','\x20exchange\x20error','added','2\x20-\x20handling\x20FILLED\x20order:\x20','LOCKED','canceled','toFixed','-events.json','date-fns','\x20|\x20','balancing\x20resumes\x20when\x20cooldown\x20ends','getOpenOrders()','watchTrades()','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','fetchTicker','unlinkSync','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','args','path','distribution','filter','configuration','buy','padEnd','fiat','onepagemode','send','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','\x20minutes','last','getPortfolio','\x20:\x20','fees','storeHeadless','BNB','AuthenticationError','basecoin','ORDERS.UNLOCKING','stringify','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','closed','\x20not\x20responding\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','removed','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','concat','Order\x20is\x20invalid:\x20','timeout','8462172nsuChW','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','autoliquidity','sells','add','set','net-fiat','logs','target','configuration-stored','USDC','441776xOyEsd','Executed\x20','coins','19627010SvZuTw','Huobi','event-history','botname','time','enabled','Error:\x20Invalid\x20argument\x20','freeze','sha256','request-time','/EUR','sell','fetchOpenOrders','emojibuy','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','stopExchange()','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','event','defaults','Saving\x20configuration','cancel','kill','getPortfolio(1)','keys','net-basecoin','write','Unknown\x20error\x20occured','coin-loading-progress','\x20hour','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','delta','openOrders','placeOrder','market','valid','balancing\x20resumed','offset','find','\x20>\x20[DEBUG]\x20','filled','cancelLoading','UNLOCKING','abs','\x20|\x20Custom\x20ID:\x20','substring','getFullYear','\x20|\x20lock\x20orders:\x20','2\x20-\x20Orders\x20unlocked','orderstatus','cancelOrders()','ExchangeNotAvailable','replace','round','changes','performance','leftTxt','highest','limit-low','2.5.0','apiSecret','Error\x20while\x20deleting\x20files:\x20','exchanges','************','argv','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','running','Fee\x20discount\x20refund\x20detected:\x20','lowdb/adapters/FileSync','bb-secure.json','toUpperCase','No\x20more\x20open\x20orders\x20-\x20','storeFiat','fetchBalance','usd','\x20order:\x20','Limit\x20(low-margin)','createOrder','showname','InvalidOrder','39521vzSnsZ','emojisell','Reset\x20|\x20','\x20-\x20bot\x20not\x20started','\x20closed\x20the\x20connection\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','exec','hybrid-crypto-js','sendMetricsTelegram','ORDERS.LOCKED','getPortfolio(2)','\x20rejected\x20your\x20API\x20request\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-rejected','bots','\x20|\x20exchange:\x20','parse','get','toLowerCase','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','limits','yyyy-MM-dd\x27T\x27HH:mm:ss','decrypt','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','forEach','open','ccxt','uncaughtException','yyyy/MM/dd','emitHistory','Headless:\x20','<b>Bot\x20','existsSync','loadMarkets','portfolio','Net\x20','ticker','startnumber','toString','\x20API\x20key\x20is\x20invalid','getHours','amount','debug','limit','\x20minutes\x20-\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','remainingSymbols','42WqunXu','join','\x20-\x20pausing\x20bot\x20for\x20','average','coin','\x20orders\x20in\x20less\x20than\x20','random','change','sort','./logs/','min','apply','Executing\x20exchange\x20reload','symbol','assign','Manual\x20balancing\x20required','lowdb','basecoinvalue','change24h','side','ongoing','getMinutes','getCoinNumber()','timestamp','-------------------------------\x0a','findIndex','order','.json','storeConfiguration','%\x20(','cloneDeep','watchTrades','bot-','1\x20-\x20Validate\x20orders:\x20','full','password','split','Loading\x20completed','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','***','buys','total','NetworkError','format','<b>','2.3.5','2.6.0','headless','\x20not\x20available\x20-\x20please\x20check\x20hodlerhacks.com/fix#exchange-unavailable','value','deleteHistoryAlerts','-config.json','InvalidNonce','USD','progress','apiKey','USDT','Exchange','\x20value','exchange\x20reloaded','0\x20-\x20EXECUTION:\x20','breakeven','spot','recreateCoinResults()','log','threshold',',\x20must\x20be\x20a\x203\x20digit\x20number','limit-high','showConfig','milliseconds','loading-canceled','initTickers()','getSeconds','BNB/','max','BTC','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','has','exchange','rightTxt','privateKey','PermissionDenied','floor','test','\x20|\x20highest\x20fee:\x20','-results.json','1\x20-\x20FILLED\x20known\x20order:\x20','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','message',':\x20Bot\x20','no\x20open\x20orders','indexOf','Net\x20effect','Order(s)\x20not\x20validated\x20after\x20','initial','cost','mkdirSync','\x20exchange','data','currency','EUR','datetime','RateLimitExceeded','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','includes','timeshift','2\x20-\x20Validate\x20orders:\x20','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','error','39lGtlzu','</pre>','secure','<pre>','UNLOCKED','fee','Transaction\x20detection\x20blocked','toggleBotMode','push','date','Invalid\x20symbol:\x20','Invalid\x20API\x20key\x20or\x20secret\x20entered','splice','watchTransactions()','Resetting\x20bot\x20history','warning','length','type','Order\x20filled:\x20','bot','getTime','Error\x20details:','Cryptocom','colorscheme','\x20>\x20','Market','apiPassword','success','parseISO','ExchangeError','must\x20be\x20greater\x20than\x20minimum\x20amount','Bybit','watchOrders()','-performance.json','isEqual','number','map','Bitget','getCoins()','Portfolio\x20change\x20detected:\x20','entries','RSA-OAEP','getAllOrders()','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','getDate','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','orderId','2988955xRrhAp','initclient','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','startdate','netoffset','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','42GVElTJ','Avoiding\x20continuous\x20order\x20attempts','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','price','cancelOrder','/output-000.log','getMonth','fetchTickers','Cex','ask','cooldown','\x20API\x20secret\x20is\x20invalid','1\x20-\x20Handle\x20open\x20orders','final','startsWith','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','\x20has\x20a\x2024h\x20drop\x20of\x20','none','fetchTickers()','shift','resetHistory','\x20metrics:</b>\x20\x0a\x0a','red_yellow_blue','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid','excluded','page','percentage','reverse','OrderNotFound','createWriteStream','slice','Transaction\x20detection\x20unblocked'];_0x3124=function(){return _0x3a6b0f;};return _0x3124();}const crypt=new Crypt({'md':_0x25790c(0x1bb),'rsaStandard':_0x25790c(0x125)});function _0xbf13(_0x4c6930,_0x20e0d7){const _0x49fbc0=_0x3124();return _0xbf13=function(_0x4df48f,_0x43e16b){_0x4df48f=_0x4df48f-0xfd;let _0x3124df=_0x49fbc0[_0x4df48f];return _0x3124df;},_0xbf13(_0x4c6930,_0x20e0d7);}let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4fd0e6=>{const _0x34f83f=_0x25790c;console[_0x34f83f(0x26f)](_0x4fd0e6);},'simple':_0x4f36ab=>{const _0x2856c3=_0x25790c;console[_0x2856c3(0x26f)](_0x4f36ab),loggerfile[_0x2856c3(0x1cd)](util[_0x2856c3(0x25a)](_0x4f36ab)+'\x0a');},'full':async(_0x23725f,_0x1cc55f='')=>{const _0x1b4257=_0x25790c;let _0x39c6f7;if(config['showname'])_0x39c6f7=getTimeStamp()+':\x20'+config[_0x1b4257(0x1b6)]+_0x1b4257(0x114)+_0x23725f;else _0x39c6f7=getTimeStamp()+_0x1b4257(0x288)+botID+_0x1b4257(0x114)+_0x23725f;console[_0x1b4257(0x26f)](_0x39c6f7),loggerfile[_0x1b4257(0x1cd)](util[_0x1b4257(0x25a)](_0x39c6f7)+'\x0a'),_0x1cc55f&&(console['log'](_0x1cc55f),loggerfile[_0x1b4257(0x1cd)](util[_0x1b4257(0x25a)](_0x1cc55f)+'\x0a'));},'debug':async(_0xbed8f6,_0x5265ec='')=>{const _0x5a29b5=_0x25790c;let _0xfc505c;if(config[_0x5a29b5(0x201)])_0xfc505c=getTimeStamp()+':\x20'+config[_0x5a29b5(0x1b6)]+'\x20>\x20[DEBUG]\x20'+_0xbed8f6;else _0xfc505c=getTimeStamp()+_0x5a29b5(0x288)+botID+_0x5a29b5(0x1da)+_0xbed8f6;if(debugging)console['log'](_0xfc505c);loggerfile[_0x5a29b5(0x1cd)](util[_0x5a29b5(0x25a)](_0xfc505c)+'\x0a');if(_0x5265ec){if(debugging)console[_0x5a29b5(0x26f)](_0x5265ec);loggerfile[_0x5a29b5(0x1cd)](util[_0x5a29b5(0x25a)](_0x5265ec)+'\x0a');}}};process['on'](_0x25790c(0x21b),function(_0x4df2ab){const _0x58b7fc=_0x25790c;handleError(_0x4df2ab,_0x58b7fc(0x21b));});settings[_0x25790c(0x298)]!=config[_0x25790c(0x298)]&&updateTimeshift(settings[_0x25790c(0x298)]);settings[_0x25790c(0x18e)]!=config[_0x25790c(0x18e)]&&updateOnepagemode(settings['onepagemode']);process['send']({'started':'running'},_0xf92af0=>{}),initializeProcessListeners();function proxyEmit(_0x39cb07,_0x1b74a6=null){process['send']({'function':_0x39cb07,'args':_0x1b74a6},_0x31b51b=>{});}function initializeProcessListeners(){const _0x2a70f8=_0x25790c;process['on'](_0x2a70f8(0x287),_0x331128=>{const _0x3a228e=_0x2a70f8;switch(Object[_0x3a228e(0x1cb)](_0x331128)[0x0]){case'timeshift':_0x331128[_0x3a228e(0x298)]!=undefined&&(settings[_0x3a228e(0x298)]=_0x331128[_0x3a228e(0x298)],updateTimeshift(settings[_0x3a228e(0x298)]));break;case _0x3a228e(0x18e):_0x331128[_0x3a228e(0x18e)]!=undefined&&(settings[_0x3a228e(0x18e)]=_0x331128[_0x3a228e(0x18e)],updateOnepagemode(settings[_0x3a228e(0x18e)]));break;case'bots':_0x331128[_0x3a228e(0x20e)]!=undefined&&(bots=JSON[_0x3a228e(0x210)](_0x331128['bots']),proxyEmit(_0x3a228e(0x20e),bots));break;case'function':switch(_0x331128['function']){case _0x3a228e(0x12c):initclient();break;case _0x3a228e(0x103):toggleBotMode();break;case _0x3a228e(0x21d):emitHistory(_0x331128['args']);break;case _0x3a228e(0x261):deleteHistoryAlerts(_0x331128[_0x3a228e(0x186)]);break;case _0x3a228e(0x193):getPortfolio(_0x331128[_0x3a228e(0x186)]);break;case _0x3a228e(0x24b):storeConfiguration(_0x331128[_0x3a228e(0x186)]);break;case _0x3a228e(0x196):storeHeadless(_0x331128[_0x3a228e(0x186)]);break;case _0x3a228e(0x1fb):storeFiat(_0x331128['args']);break;case _0x3a228e(0x146):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x3a228e(0x1d4):placeOrder(_0x331128[_0x3a228e(0x186)]);break;case _0x3a228e(0x1dc):cancelLoading();break;case _0x3a228e(0x273):showConfig();break;case _0x3a228e(0x20a):sendMetricsTelegram();break;case'sendPortfolioTelegram':sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x18c788=![]){const _0x284486=_0x25790c;logger[_0x284486(0x22a)](_0x284486(0x205)+(_0x18c788?_0x284486(0x26a):_0x284486(0x16d))+_0x284486(0x20f)+config[_0x284486(0x27d)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x18c788)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x284486(0x266)]!=''&&config[_0x284486(0x266)]!=_0x284486(0x256)){loadingProgress=0x0;if(_0x18c788){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x578785){handleErrorNoStop(_0x578785,'loadSymbols()');return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x162714=await getCoins();[currentCoins,currentCoinsAll]=_0x162714,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x284486(0x22a)](_0x284486(0x254)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x284486(0x10c)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x204807=_0x25790c;exchangeStopped=!![];try{await exchange[_0x204807(0x152)]();}catch(_0x14f46c){await handleError(_0x14f46c,_0x204807(0x1c3));}}async function reloadExchange(){const _0x15063=_0x25790c;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x15063(0x22a)](_0x15063(0x23b)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x521356=config[_0x25790c(0x27d)],_0x4c3d95=config[_0x25790c(0x266)],_0x2a6776=config[_0x25790c(0x1ef)],_0x222bf7=config['apiPassword']){const _0x5c805e=_0x25790c;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x521356)&&(logHistory(_0x5c805e(0x29b),_0x5c805e(0x182)+_0x521356+_0x5c805e(0x290)),killBot());const _0x2f2c5f=ccxt['pro'][_0x521356['toLowerCase']()];exchange=new _0x2f2c5f({'apiKey':_0x4c3d95,'secret':_0x2a6776,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5c805e(0x26d)}});if(_0x222bf7)exchange[_0x5c805e(0x252)]=_0x222bf7;}function setStableCoins(){const _0x43a66d=_0x25790c;let _0xf46027=config[_0x43a66d(0x199)]==_0x43a66d(0x16f)?_0x43a66d(0x16f):config[_0x43a66d(0x199)]==_0x43a66d(0x15c)?'PAXG':_0x43a66d(0x27a),_0x150541=!allSymbols['includes'](_0xf46027+'/USD')?_0x43a66d(0x267):'USD',_0x3dc2ee=!allSymbols[_0x43a66d(0x297)](_0xf46027+_0x43a66d(0x1bd))?_0x150541:'EUR';stablecoins={'eur':{'coin':''+_0xf46027+_0x3dc2ee,'symbol':_0xf46027+'/'+_0x3dc2ee},'usd':{'coin':''+_0xf46027+_0x150541,'symbol':_0xf46027+'/'+_0x150541}};}async function initwsCcxt(){const _0x2adef8=_0x25790c;initCycle++;const _0x24694e=initCycle;let _0x247c8d=[];config[_0x2adef8(0x222)][_0x2adef8(0x218)](_0x361df4=>{const _0x576584=_0x2adef8;if(!_0x361df4[_0x576584(0x14a)]&&_0x361df4['coin']!=config[_0x576584(0x199)])_0x247c8d[_0x576584(0x104)](_0x361df4[_0x576584(0x23c)]);});if(!_0x247c8d[_0x2adef8(0x297)](stablecoins[_0x2adef8(0x173)][_0x2adef8(0x23c)]))_0x247c8d['push'](stablecoins[_0x2adef8(0x173)][_0x2adef8(0x23c)]);if(!_0x247c8d['includes'](stablecoins['usd'][_0x2adef8(0x23c)]))_0x247c8d['push'](stablecoins[_0x2adef8(0x1fd)][_0x2adef8(0x23c)]);if(config[_0x2adef8(0x27d)][_0x2adef8(0x13f)](_0x2adef8(0x168))&&config[_0x2adef8(0x199)]!=_0x2adef8(0x15c)){if(!_0x247c8d[_0x2adef8(0x297)](_0x2adef8(0x278)+config['basecoin']))_0x247c8d[_0x2adef8(0x104)](_0x2adef8(0x278)+config[_0x2adef8(0x199)]);}loadCoins(_0x247c8d),_0x247c8d=validateSymbols(_0x247c8d);const _0x3ef3d7=async _0xcae08b=>{const _0x4eb755=_0x2adef8;let _0x5dbb49;try{const _0x42d326=await getTickers(_0xcae08b);Object['entries'](_0x42d326)[_0x4eb755(0x218)](_0x5b0e5d=>{const _0x147236=_0x4eb755;_0x5dbb49=_0x5b0e5d[0x1][_0x147236(0x23c)],global[_0x147236(0x224)][noslash(_0x5dbb49)]=_0x5b0e5d[0x1]['last'],global[_0x147236(0x236)][_0x5dbb49]=_0x5b0e5d[0x1][_0x147236(0x14c)];});}catch(_0x200d6d){await handleError(_0x200d6d,_0x4eb755(0x276),_0x5dbb49);}},_0x301627=async _0x1e1ae3=>{const _0x43e11e=_0x2adef8;while(initCycle==_0x24694e){if(!botPaused)try{const _0x36f00b=await exchange[_0x43e11e(0x24e)](_0x1e1ae3);global[_0x43e11e(0x224)][noslash(_0x36f00b[0x0][_0x43e11e(0x23c)])]=_0x36f00b[0x0][_0x43e11e(0x134)],await sleep(0x3e8);}catch(_0x598313){if(!exchangeStopped)await handleError(_0x598313,_0x43e11e(0x181),_0x1e1ae3);}else await sleep(0x64);}},_0x3b4e16=async _0xb0e862=>{const _0x587215=_0x2adef8;while(initCycle==_0x24694e){if(!botPaused){let _0x4d2f90;try{await sleep(0x3c*0x3e8);const _0x107cbb=await getTickers(_0xb0e862);Object[_0x587215(0x124)](_0x107cbb)[_0x587215(0x218)](_0x42ba63=>{const _0x13a0a9=_0x587215;_0x4d2f90=_0x42ba63[0x1][_0x13a0a9(0x23c)],global[_0x13a0a9(0x236)][_0x4d2f90]=_0x42ba63[0x1]['percentage'];});}catch(_0xa5e858){if(!exchangeStopped)await handleError(_0xa5e858,_0x587215(0x144),_0x4d2f90);}}else await sleep(0x64);}},_0x410f75=async _0x3e2efe=>{const _0x2e69c9=_0x2adef8;while(initCycle==_0x24694e){if(!botPaused)try{const _0x331d36=await exchange[_0x2e69c9(0x15e)](_0x3e2efe);initCycle==_0x24694e&&_0x331d36[_0x2e69c9(0x218)](_0x106e51=>{updateNumberCoinsCcxt(_0x106e51);});}catch(_0x23f02b){if(!exchangeStopped)await handleError(_0x23f02b,_0x2e69c9(0x11c));}else await sleep(0x64);}};_0x3ef3d7(_0x247c8d),_0x3b4e16(_0x247c8d),_0x247c8d[_0x2adef8(0x218)](_0x566c0a=>{_0x301627(_0x566c0a),_0x410f75(_0x566c0a);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x85c13c){const _0x1607d5=_0x25790c;let _0x423257={};try{if(config[_0x1607d5(0x27d)]!=_0x1607d5(0x112))_0x423257=await exchange['fetchTickers'](_0x85c13c);else for(const _0x3cfb05 of _0x85c13c){const _0x30782d=await exchange[_0x1607d5(0x183)](_0x3cfb05);_0x423257[_0x3cfb05]=_0x30782d;}return _0x423257;}catch(_0x48ec00){throw _0x48ec00;}}async function watchTransactions(){const _0x2e33e3=_0x25790c;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4181ad=await getCoins(),[_0x21dec8,_0x9b3616]=_0x4181ad;let _0x1772ab=[];currentCoins[_0x2e33e3(0x218)](_0x25b413=>{const _0x4487ea=_0x2e33e3,_0x5b12f4=_0x21dec8['find'](_0x1044b1=>_0x1044b1[_0x4487ea(0x233)]==_0x25b413[_0x4487ea(0x233)]);if(_0x5b12f4){if(_0x25b413[_0x4487ea(0x11f)]!=_0x5b12f4['number']){let _0x413887;if(_0x25b413[_0x4487ea(0x233)]!=config['basecoin']){const _0x528fb2=global[_0x4487ea(0x224)][noslash(_0x25b413[_0x4487ea(0x23c)])];_0x413887=_0x25b413[_0x4487ea(0x14d)]?0x1/_0x528fb2:_0x528fb2;}else _0x413887=0x1;_0x1772ab[_0x4487ea(0x104)]({'coin':_0x25b413[_0x4487ea(0x233)],'symbol':_0x25b413[_0x4487ea(0x23c)],'price':_0x413887,'number':Number(formatResult(_0x5b12f4[_0x4487ea(0x11f)]-_0x25b413[_0x4487ea(0x11f)],0x8)),'basecoinvalue':_0x413887*(_0x5b12f4[_0x4487ea(0x11f)]-_0x25b413[_0x4487ea(0x11f)])});}}});if(_0x1772ab['length']==0x1&&!blockTransactionDetection){if(config[_0x2e33e3(0x1a7)]){logger[_0x2e33e3(0x22a)](_0x2e33e3(0x1d1)+_0x1772ab[0x0]['basecoinvalue']+_0x2e33e3(0x283)+lastFees['highest']);if(lastFees[_0x2e33e3(0x1ec)]==0x0||Math[_0x2e33e3(0x1de)](_0x1772ab[0x0][_0x2e33e3(0x240)])>lastFees[_0x2e33e3(0x1ec)]){delete _0x1772ab[0x0]['symbol'],delete _0x1772ab[0x0]['basecoinvalue'];let _0x3d2106=[],_0x3d0a13=[...config[_0x2e33e3(0x169)]]||[],_0x3de6bf=config['liquidity'];_0x3d0a13[_0x2e33e3(0x237)]((_0x4ba363,_0x3c3789)=>_0x4ba363[_0x2e33e3(0x105)]>_0x3c3789[_0x2e33e3(0x105)]?-0x1:_0x3c3789[_0x2e33e3(0x105)]>_0x4ba363[_0x2e33e3(0x105)]?0x1:0x0);const _0x28140e=getDate();if(_0x3d0a13[0x0]){const _0x48d262=fns['parse'](_0x3d0a13[0x0][_0x2e33e3(0x105)],'yyyy/MM/dd',new Date()),_0x4a9ef7=fns[_0x2e33e3(0x210)](_0x28140e,_0x2e33e3(0x21c),new Date());if(fns[_0x2e33e3(0x11e)](_0x48d262,_0x4a9ef7)){_0x3d2106=_0x3d0a13[0x0][_0x2e33e3(0x1e9)];const _0x28e479=_0x3d2106[_0x2e33e3(0x1d9)](_0x55350b=>_0x55350b[_0x2e33e3(0x233)]==_0x1772ab[0x0][_0x2e33e3(0x233)]);_0x28e479?(_0x28e479[_0x2e33e3(0x11f)]+=_0x1772ab[0x0][_0x2e33e3(0x11f)],_0x28e479[_0x2e33e3(0x11f)]==0x0&&(_0x3d2106=_0x3d2106[_0x2e33e3(0x189)](_0x4ace21=>{const _0x3a16dc=_0x2e33e3;return _0x4ace21['coin']!=_0x1772ab[0x0][_0x3a16dc(0x233)];}))):_0x3d2106[_0x2e33e3(0x104)](_0x1772ab[0x0]);const _0x103e8f=_0x3de6bf[_0x2e33e3(0x1d9)](_0x27b22b=>_0x27b22b[_0x2e33e3(0x105)]==_0x28140e);_0x103e8f['changes']=_0x3d2106;}else _0x3de6bf['push']({'date':_0x28140e,'changes':[_0x1772ab[0x0]]});}const _0x513baa=_0x3de6bf[_0x2e33e3(0x1d9)](_0xed3485=>_0xed3485['date']==_0x28140e);if(_0x513baa){let _0xec0370=!![];_0x513baa[_0x2e33e3(0x1e9)]['forEach'](_0x5782fa=>{if(_0x5782fa['number']!=0x0)_0xec0370=![];}),_0xec0370&&(_0x3de6bf=_0x3de6bf[_0x2e33e3(0x189)](_0x2f35e6=>{const _0xf8dd34=_0x2e33e3;return _0x2f35e6[_0xf8dd34(0x105)]!=_0x28140e;}));}let _0x59363f=dbConfig['get'](_0x2e33e3(0x10f))[_0x2e33e3(0x1d9)]({'botID':botID})['value']();_0x59363f&&(dbConfig['get'](_0x2e33e3(0x10f))[_0x2e33e3(0x1d9)]({'botID':botID})[_0x2e33e3(0x23d)]({'liquidity':_0x3de6bf})[_0x2e33e3(0x1cd)](),config[_0x2e33e3(0x169)]=_0x3de6bf),logHistory('success',_0x2e33e3(0x123)+Math['abs'](_0x1772ab[0x0]['number'])+'\x20'+_0x1772ab[0x0]['coin']+'\x20'+(_0x1772ab[0x0]['number']>0x0?'added':'removed')+_0x2e33e3(0x140)),proxyEmit(_0x2e33e3(0x18a),emittedConfiguration());}else logger[_0x2e33e3(0x22a)](_0x2e33e3(0x1f6)+Math[_0x2e33e3(0x1de)](_0x1772ab[0x0]['number'])+'\x20'+_0x1772ab[0x0]['coin']+'\x20'+(_0x1772ab[0x0][_0x2e33e3(0x11f)]>0x0?_0x2e33e3(0x177):_0x2e33e3(0x1a0)));transactionDetected=!![];}else logger[_0x2e33e3(0x22a)](_0x2e33e3(0x123)+Math[_0x2e33e3(0x1de)](_0x1772ab[0x0][_0x2e33e3(0x11f)])+'\x20'+_0x1772ab[0x0][_0x2e33e3(0x233)]+'\x20'+(_0x1772ab[0x0][_0x2e33e3(0x11f)]>0x0?_0x2e33e3(0x177):_0x2e33e3(0x1a0))+_0x2e33e3(0x213));}currentCoins=_0x21dec8,currentCoinsAll=_0x9b3616,await sleep(watchTransactionsInterval);}catch(_0x884efe){if(!exchangeStopped)await handleError(_0x884efe,_0x2e33e3(0x109));}else await sleep(0x64);}}async function loadSymbols(){const _0x11d659=_0x25790c;try{markets=await exchange[_0x11d659(0x221)](),allSymbols=[],Object[_0x11d659(0x124)](markets)[_0x11d659(0x218)](_0x53ce6c=>{const _0x20bb17=_0x11d659;_0x53ce6c[0x1][_0x20bb17(0x163)]&&_0x53ce6c[0x1][_0x20bb17(0x26d)]&&allSymbols['push'](_0x53ce6c[0x0]);});}catch(_0x9cb2b1){throw _0x9cb2b1;}}function validateSymbols(_0x9159c){const _0x345ea4=_0x25790c;let _0x1075c2=[];return _0x9159c[_0x345ea4(0x218)](_0x37bd47=>{const _0x3a17de=_0x345ea4;!allSymbols[_0x3a17de(0x297)](_0x37bd47)?logHistory(_0x3a17de(0x29b),_0x3a17de(0x106)+_0x37bd47+_0x3a17de(0x29a)):_0x1075c2[_0x3a17de(0x104)](_0x37bd47);}),_0x1075c2;}async function initclient(){const _0x226e5d=_0x25790c;proxyEmit(_0x226e5d(0x18a),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x226e5d(0x160),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x4bbfd2=getNormalizedPerformance();emitPerformance(_0x4bbfd2),getStartingBalances(_0x4bbfd2);}async function toggleBotMode(){const _0x32025e=_0x25790c;let _0x5e027c=dbConfig[_0x32025e(0x211)](_0x32025e(0x10f))['find']({'botID':botID})['value']();if(_0x5e027c){const _0x5a7b3f=!_0x5e027c[_0x32025e(0x25e)];dbConfig[_0x32025e(0x211)](_0x32025e(0x10f))['find']({'botID':botID})[_0x32025e(0x23d)]({'headless':_0x5a7b3f})[_0x32025e(0x1cd)](),config[_0x32025e(0x25e)]=_0x5a7b3f,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4b7a32=_0x25790c;process[_0x4b7a32(0x18f)]({'updatebotmanager':!![]},_0x464c4f=>{}),logger[_0x4b7a32(0x22a)](_0x4b7a32(0x21e)+config[_0x4b7a32(0x25e)]);}async function loadCoins(_0x2b24e8){const _0x5db337=_0x25790c;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x43fc63,_0x5c5a6f=0x0,_0xfa79c2=0x0;_0x2b24e8[_0x5db337(0x218)](_0x1857e5=>{const _0x6fd9a2=_0x5db337;loading[_0x6fd9a2(0x22e)][_0x6fd9a2(0x104)](_0x1857e5);}),loadingCanceled=![];let _0x4e2bf7=![];while(_0x43fc63!=_0x2b24e8[_0x5db337(0x10c)]+maxLoadingProgress){_0x43fc63=loadingProgress,_0x2b24e8[_0x5db337(0x218)](_0x2b2e1a=>{const _0xaa943=_0x5db337;if(global[_0xaa943(0x224)][noslash(_0x2b2e1a)]){loading[_0xaa943(0x22e)]=loading[_0xaa943(0x22e)][_0xaa943(0x189)](_0xae9a6c=>_0xae9a6c!=_0x2b2e1a);if(!watchedSymbols['includes'](_0x2b2e1a))watchedSymbols[_0xaa943(0x104)](_0x2b2e1a);_0x43fc63++;}}),loading['progress']=Math[_0x5db337(0x1e8)](_0x43fc63/(_0x2b24e8['length']+maxLoadingProgress)*0x64);loading[_0x5db337(0x265)]!=0x64&&(_0xfa79c2>0x1e*0x5&&(loading[_0x5db337(0x1a4)]=!![],emitLoadingProgress()),_0xfa79c2>0x78*0x5&&!_0x4e2bf7&&(_0x4e2bf7=!![],logHistory(_0x5db337(0x29b),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x5db337(0x22e)][_0x5db337(0x230)](',\x20')+_0x5db337(0x206)),logHistory(_0x5db337(0x29b),'Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x5db337(0x154)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x16e811=_0x5db337;process[_0x16e811(0x18f)]({'stop':'restart'},_0x26f866=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x5db337(0x1c8)]=!![],emitLoadingProgress();break;}else _0x5c5a6f!=loading[_0x5db337(0x265)]&&(_0x5c5a6f=loading[_0x5db337(0x265)],emitLoadingProgress()),_0xfa79c2++,await sleep(0xc8);}_0x43fc63==_0x2b24e8[_0x5db337(0x10c)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x5db337(0x1f5)},_0x1c0acb=>{}),_0x4e2bf7&&logHistory(_0x5db337(0x117),_0x5db337(0x1f4)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x54f348=_0x25790c;proxyEmit(_0x54f348(0x18a),{...emittedConfiguration(),'configstate':_0x54f348(0x275)});}function emitLoadingProgress(){const _0x539f08=_0x25790c;proxyEmit(_0x539f08(0x1cf),loading);}async function getFiat(){const _0x52c723=_0x25790c;let _0x4b78fc=global[_0x52c723(0x224)][stablecoins[_0x52c723(0x173)][_0x52c723(0x233)]],_0x561b26=global[_0x52c723(0x224)][stablecoins[_0x52c723(0x1fd)][_0x52c723(0x233)]];return{'eur':Number(_0x4b78fc),'usd':Number(_0x561b26)};}function capitalize(_0x1c1add){const _0x339a34=_0x25790c;return _0x1c1add[_0x339a34(0x1e0)](0x0,0x1)[_0x339a34(0x1f9)]()+_0x1c1add[_0x339a34(0x1e0)](0x1);}function supportedExchanges(){const _0x27cc94=_0x25790c,_0x15359e=['ws',_0x27cc94(0x138),_0x27cc94(0x183),_0x27cc94(0x24e),_0x27cc94(0x15e),_0x27cc94(0x135),_0x27cc94(0x200),'fetchOpenOrders','fetchClosedOrders',_0x27cc94(0x1fc)];let _0x57179c=[],_0x56af76=[],_0x4c2a63=ccxt[_0x27cc94(0x15a)][_0x27cc94(0x1f1)];_0x4c2a63[_0x27cc94(0x218)](_0x1522af=>{const _0x4500e2=_0x27cc94;try{const _0x531297=new ccxt[(_0x4500e2(0x15a))][_0x1522af]();_0x56af76[_0x4500e2(0x104)](_0x531297);}catch(_0x4d9c8d){}}),_0x56af76[_0x27cc94(0x218)](_0x26715c=>{const _0x3dbcac=_0x27cc94;let _0xc3059c=0x0;_0x15359e[_0x3dbcac(0x218)](_0x14f741=>{const _0x4d9fa6=_0x3dbcac;_0x14f741 in _0x26715c[_0x4d9fa6(0x27c)]&&_0x26715c['has'][_0x14f741]&&_0xc3059c++;}),_0xc3059c==_0x15359e[_0x3dbcac(0x10c)]&&_0x57179c[_0x3dbcac(0x104)](capitalize(_0x26715c['id']));});let _0x1941df=[];return _0x4c2a63[_0x27cc94(0x218)](_0x10171e=>{const _0x407b10=_0x27cc94;_0x10171e=capitalize(_0x10171e);if(!_0x57179c[_0x407b10(0x297)](_0x10171e))_0x1941df['push'](_0x10171e);}),_0x57179c;}function setStartDatePerformance(){const _0x3411d8=_0x25790c;if(config&&config['liquidity'][0x0][_0x3411d8(0x1e9)]['length']!=0x0){const _0x50f7fe=config[_0x3411d8(0x169)][0x0][_0x3411d8(0x1e9)];dbPerformance[_0x3411d8(0x211)](_0x3411d8(0x291))[_0x3411d8(0x1d9)]({'date':config[_0x3411d8(0x12e)]})['assign']({'coins':_0x50f7fe})['write']();}}async function recreateCoinResults(){const _0x3211ea=_0x25790c;let _0x175f6a,_0xa8910e=[];try{const _0x1a07e9=fns[_0x3211ea(0x25a)](fns[_0x3211ea(0x118)](config[_0x3211ea(0x12e)][_0x3211ea(0x1e7)](/\//g,'-')),_0x3211ea(0x215));for(const _0x431f23 of currentCoins){if(_0x431f23['coin']!=config[_0x3211ea(0x199)]){let _0x28bf80=0x0,_0x47fa38,_0x5a55e0;_0x175f6a=await getAllEventOrders(_0x431f23[_0x3211ea(0x23c)]);if(_0x175f6a[_0x3211ea(0x10c)]>0x0)_0x175f6a[_0x3211ea(0x218)](_0x2f5185=>{const _0x8e5ec3=_0x3211ea,_0x3c1e7f=_0x431f23[_0x8e5ec3(0x23c)][_0x8e5ec3(0x297)](config[_0x8e5ec3(0x199)]+'/');_0xa8910e[_0x8e5ec3(0x104)]({'datetime':_0x2f5185[_0x8e5ec3(0x294)],'coin':_0x431f23['coin'],'symbol':_0x431f23[_0x8e5ec3(0x23c)],'side':_0x2f5185[_0x8e5ec3(0x242)],'reverse':_0x3c1e7f,'amount':formatResult(_0x2f5185[_0x8e5ec3(0x1db)],0x8),'filled':formatResult(_0x2f5185[_0x8e5ec3(0x1db)],0x8),'price':formatResult(_0x2f5185['price'],0x8)}),_0x28bf80=_0x2f5185[_0x8e5ec3(0x242)]=='buy'?_0x28bf80+_0x2f5185[_0x8e5ec3(0x1db)]:_0x28bf80-_0x2f5185[_0x8e5ec3(0x1db)];if(!_0x5a55e0)_0x5a55e0=_0x2f5185[_0x8e5ec3(0x134)];});_0x47fa38=_0x431f23['number']-_0x28bf80;let _0x17a294;config['liquidity'][_0x3211ea(0x218)](_0xb4a27c=>{const _0x134a90=_0x3211ea;!_0x17a294&&(_0x17a294=_0xb4a27c[_0x134a90(0x1e9)][_0x134a90(0x1d9)](_0x77d417=>_0x77d417[_0x134a90(0x233)]==_0x431f23[_0x134a90(0x233)]),_0x17a294&&(_0x47fa38=_0x17a294['number'],_0x5a55e0=_0x17a294[_0x134a90(0x134)]));});let _0x5e651b=dbCoinResults[_0x3211ea(0x211)](_0x3211ea(0x1b2))[_0x3211ea(0x1d9)]({'coin':_0x431f23[_0x3211ea(0x233)]})['value']();_0x5e651b={'coin':_0x431f23[_0x3211ea(0x233)],'number':_0x47fa38,'breakeven':_0x5a55e0,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x3211ea(0x211)](_0x3211ea(0x1b2))[_0x3211ea(0x1d9)]({'coin':_0x431f23['coin']})['assign'](_0x5e651b)[_0x3211ea(0x1cd)]();}}_0xa8910e[_0x3211ea(0x237)]((_0x3f57a0,_0x5c12a7)=>_0x3f57a0['datetime']>_0x5c12a7[_0x3211ea(0x294)]?0x1:_0x5c12a7[_0x3211ea(0x294)]>_0x3f57a0['datetime']?-0x1:0x0);let _0x57f898=0x0;for(let _0x5350f4 of _0xa8910e){await updateCoinResults(_0x5350f4,!![]);}}catch(_0x16b2ff){await handleError(_0x16b2ff,_0x3211ea(0x26e));}}async function getAllEventOrders(_0x295486){const _0x368620=_0x25790c;let _0x1917d3=[],_0x377257=dbLogs[_0x368620(0x211)](_0x368620(0x1ac))[_0x368620(0x189)](_0x1783f3=>{const _0x2da3a0=_0x368620,_0x1f0117=_0x1783f3['event'][_0x2da3a0(0x212)]();return _0x1f0117[_0x2da3a0(0x297)](_0x295486[_0x2da3a0(0x212)]())&&(_0x1f0117['includes'](_0x2da3a0(0x1d5))&&_0x1f0117[_0x2da3a0(0x297)](_0x2da3a0(0x249))||_0x1f0117['includes'](_0x2da3a0(0x1db))&&_0x1f0117[_0x2da3a0(0x297)]('order'));})['sortBy']('time')[_0x368620(0x260)]();return _0x377257['forEach'](_0x4bbcac=>{const _0x3a1d0e=_0x368620,_0xa0bfde=_0x4bbcac['event'][_0x3a1d0e(0x297)]('sell')?_0x3a1d0e(0x1be):_0x3a1d0e(0x18b),_0x5738ab=/#([0-9]|\.)+\s/i,_0x99a91d=Number(_0x5738ab[_0x3a1d0e(0x208)](_0x4bbcac['event'])[0x0][_0x3a1d0e(0x150)](0x1)),_0x284591=/@([0-9]|\.)+$/i,_0x50aeb3=Number(_0x284591[_0x3a1d0e(0x208)](_0x4bbcac['event'])[0x0][_0x3a1d0e(0x150)](0x1));_0x1917d3[_0x3a1d0e(0x104)]({'datetime':_0x4bbcac['time'],'coin':symbolToCoin(_0x295486),'symbol':_0x295486,'side':_0xa0bfde,'amount':_0x99a91d,'filled':_0x99a91d,'price':_0x50aeb3});}),_0x1917d3;}async function getAllOrders(_0x135a44,_0x4d237a){const _0x5f98e7=_0x25790c;let _0x4cf81b=[];while(_0x4d237a<exchange[_0x5f98e7(0x274)]()){const _0x578621=0x1f4;try{const _0xa59eb7=await exchange['fetchClosedOrders'](_0x135a44,_0x4d237a,_0x578621);if(_0xa59eb7['length'])_0x4d237a=_0xa59eb7[_0xa59eb7[_0x5f98e7(0x10c)]-0x1][_0x5f98e7(0x246)]+0x1,_0x4cf81b=_0x4cf81b[_0x5f98e7(0x1a2)](_0xa59eb7);else break;}catch(_0x339851){await handleError(_0x339851,_0x5f98e7(0x126),_0x135a44);}}return _0x4cf81b;}async function validate24hChanges(){const _0x3f003e=_0x25790c;for(const _0xa4093b of currentCoins){if(_0xa4093b[_0x3f003e(0x233)]!=config[_0x3f003e(0x199)]){let _0x2b45e6;_0xa4093b[_0x3f003e(0x14d)]?_0x2b45e6=formatResult((0x1/(global[_0x3f003e(0x236)][noslash(_0xa4093b[_0x3f003e(0x23c)])]/0x64+0x1)-0x1)*0x64,0x3):_0x2b45e6=global[_0x3f003e(0x236)][noslash(_0xa4093b[_0x3f003e(0x23c)])],_0x2b45e6<config[_0x3f003e(0x241)]&&(logHistory(_0x3f003e(0x29b),_0xa4093b[_0x3f003e(0x233)]+_0x3f003e(0x142)+_0x2b45e6+'%'),logHistory(_0x3f003e(0x29b),_0x3f003e(0x1c4)),logHistory(_0x3f003e(0x29b),_0x3f003e(0x27b)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x31585e,_0x48fa59){const _0x217c22=_0x25790c;if(!_0x31585e)return!![];const _0x34206f=_0x48fa59['split']('.'),_0x4621d3=_0x31585e[_0x217c22(0x253)]('.');for(var _0x39d9b9=0x0;_0x39d9b9<_0x4621d3[_0x217c22(0x10c)];_0x39d9b9++){const _0x522e64=~~_0x4621d3[_0x39d9b9],_0x19685a=~~_0x34206f[_0x39d9b9];if(_0x522e64<_0x19685a)return!![];if(_0x522e64>_0x19685a)return![];}return![];}async function oneTimeMigration(){const _0x55552e=_0x25790c;let _0x325054=dbLogs['get'](_0x55552e(0x158))[_0x55552e(0x260)]();if(isOlderVersion(_0x325054,_0x55552e(0x25c))){let _0x128529=[];const _0x3b36ea=dbLogs[_0x55552e(0x211)](_0x55552e(0x1ac))[_0x55552e(0x260)]();_0x3b36ea[_0x55552e(0x218)](_0x2143b4=>{const _0x2176c4=_0x55552e;_0x128529[_0x2176c4(0x104)]({'time':_0x2143b4[_0x2176c4(0x1b7)],'type':_0x2143b4[_0x2176c4(0x10d)],'event':_0x2143b4[_0x2176c4(0x1c5)]});}),dbLogs[_0x55552e(0x211)](_0x55552e(0x1ac))[_0x55552e(0x23d)](_0x128529)[_0x55552e(0x1cd)]();}let _0x2da73a=dbConfig[_0x55552e(0x211)](_0x55552e(0x158))[_0x55552e(0x260)]();if(isOlderVersion(_0x2da73a,_0x55552e(0x25c))){let _0xfaec5e=dbConfig['get'](_0x55552e(0x10f))[_0x55552e(0x1d9)]({'botID':botID})[_0x55552e(0x260)]();if(_0xfaec5e){let _0x4ea135=[];_0xfaec5e['portfolio'][_0x55552e(0x218)](_0x466d5b=>{const _0x48cbef=_0x55552e;_0x4ea135[_0x48cbef(0x104)]({'coin':_0x466d5b['coin'],'number':_0x466d5b['startnumber'],'price':_0x466d5b[_0x48cbef(0x16c)]}),delete _0x466d5b[_0x48cbef(0x225)],delete _0x466d5b[_0x48cbef(0x16c)];});if(_0x4ea135[_0x55552e(0x10c)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0x55552e(0x24a)),JSON['stringify'](_0x4ea135,null,0x4),function(_0x282f71){if(_0x282f71){}});const _0x500af3=(_0x32f3f5,_0xb9c1)=>{let _0x40a335=[];_0xb9c1['forEach'](_0x1982f9=>{const _0x359e83=_0xbf13,_0xf602b3=_0x32f3f5['find'](_0xcfad19=>_0xcfad19['coin']==_0x1982f9[_0x359e83(0x233)]);if(!_0xf602b3)_0x40a335[_0x359e83(0x104)](_0x1982f9);});let _0xf031f8=[];return _0x32f3f5['forEach'](_0x111256=>{const _0x5a660c=_0xbf13,_0x1dcd86=_0xb9c1['find'](_0x14ed8d=>_0x14ed8d[_0x5a660c(0x233)]==_0x111256[_0x5a660c(0x233)]);if(!_0x1dcd86||_0x1dcd86[_0x5a660c(0x11f)]==0x0&&_0x111256[_0x5a660c(0x11f)]!=0x0)_0xf031f8[_0x5a660c(0x104)](_0x111256);}),{'missingDay1':_0x40a335,'notInDay2':_0xf031f8};},_0x4871fb=dbPerformance[_0x55552e(0x211)]('data')[_0x55552e(0x24d)]()['value']();if(_0x4871fb[_0x55552e(0x10c)]>0x1){const {missingDay1:_0x5dc69b,notInDay2:_0x4158d5}=_0x500af3(_0x4ea135,_0x4871fb[0x1]['coins']);_0x4ea135=[..._0x4ea135,..._0x5dc69b],_0x4158d5[_0x55552e(0x218)](_0x51378a=>{const _0xfaa6b3=_0x55552e;let _0x1ccbc6=_0x4ea135[_0xfaa6b3(0x248)](_0x1e4883=>_0x1e4883[_0xfaa6b3(0x233)]==_0x51378a[_0xfaa6b3(0x233)]);_0x1ccbc6!=-0x1&&_0x4ea135[_0xfaa6b3(0x108)](_0x1ccbc6,0x1);});}_0x4ea135[_0x55552e(0x237)]((_0x4edc60,_0x28bbc7)=>_0x4edc60['coin']>_0x28bbc7[_0x55552e(0x233)]?0x1:_0x28bbc7[_0x55552e(0x233)]>_0x4edc60[_0x55552e(0x233)]?-0x1:0x0);let _0x25e217=[{'date':_0xfaec5e[_0x55552e(0x12e)],'changes':_0x4ea135}];_0x4871fb['length']>0x2&&_0x4871fb['forEach']((_0x17b72f,_0x16f383)=>{const _0x2750fd=_0x55552e;if(_0x16f383>0x0&&_0x16f383<_0x4871fb[_0x2750fd(0x10c)]-0x1){const {missingDay1:_0xa48074,notInDay2:_0x3c3e7a}=_0x500af3(_0x4871fb[_0x16f383][_0x2750fd(0x1b2)],_0x4871fb[_0x16f383+0x1]['coins']);_0x4ea135=[],(_0xa48074[_0x2750fd(0x10c)]!=0x0||_0x3c3e7a['length']!=0x0)&&(_0xa48074[_0x2750fd(0x10c)]!=0x0&&_0x4ea135[_0x2750fd(0x104)](..._0xa48074),_0x3c3e7a['length']!=0x0&&(_0x3c3e7a[_0x2750fd(0x218)](_0xdafa19=>{const _0x4ecc00=_0x2750fd;_0xdafa19[_0x4ecc00(0x11f)]=-_0xdafa19['number'];}),_0x4ea135[_0x2750fd(0x104)](..._0x3c3e7a)),_0x4ea135[_0x2750fd(0x237)]((_0xe0ac2c,_0x4ef0b5)=>_0xe0ac2c[_0x2750fd(0x233)]>_0x4ef0b5[_0x2750fd(0x233)]?0x1:_0x4ef0b5['coin']>_0xe0ac2c[_0x2750fd(0x233)]?-0x1:0x0),_0x25e217[_0x2750fd(0x104)]({'date':_0x4871fb[_0x16f383+0x1][_0x2750fd(0x105)],'changes':_0x4ea135}));}}),dbConfig[_0x55552e(0x211)](_0x55552e(0x10f))[_0x55552e(0x1d9)]({'botID':botID})['assign']({..._0xfaec5e,'liquidity':_0x25e217})[_0x55552e(0x1cd)]();}}if(isOlderVersion(_0x2da73a,_0x55552e(0x25d))){let _0x18407a=dbConfig[_0x55552e(0x211)](_0x55552e(0x10f))[_0x55552e(0x1d9)]({'botID':botID})[_0x55552e(0x260)]();if(_0x18407a){const _0x4bbe53=_0x18407a[_0x55552e(0x27d)],_0x283e03=_0x4bbe53?capitalize(_0x4bbe53):_0x55552e(0x168);dbConfig['get'](_0x55552e(0x10f))[_0x55552e(0x1d9)]({'botID':botID})[_0x55552e(0x23d)]({'exchange':_0x283e03})[_0x55552e(0x1cd)]();}}let _0xfa54ae=dbPerformance[_0x55552e(0x211)]('version')[_0x55552e(0x260)]();isOlderVersion(_0xfa54ae,_0x55552e(0x25c))&&setStartDatePerformance();let _0x3e40e4=dbCoinResults[_0x55552e(0x211)](_0x55552e(0x158))[_0x55552e(0x260)]();if(isOlderVersion(_0x3e40e4,_0x55552e(0x1ee))){let _0x3b70fb=dbCoinResults['get'](_0x55552e(0x1b2))['value']();if(_0x3b70fb[_0x55552e(0x10c)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x5b979a=_0x25790c;dbConfig[_0x5b979a(0x1aa)](_0x5b979a(0x158),serverversion)[_0x5b979a(0x1cd)](),dbPerformance[_0x5b979a(0x1aa)](_0x5b979a(0x158),serverversion)[_0x5b979a(0x1cd)](),dbLogs[_0x5b979a(0x1aa)](_0x5b979a(0x158),serverversion)[_0x5b979a(0x1cd)](),dbCoinResults[_0x5b979a(0x1aa)](_0x5b979a(0x158),serverversion)[_0x5b979a(0x1cd)]();}function getConfiguration(_0x23f8c3){const _0x57afc9=_0x25790c;let _0x130e1c=dbConfig[_0x57afc9(0x211)](_0x57afc9(0x10f))['find']({'botID':_0x23f8c3})[_0x57afc9(0x260)]();if(_0x130e1c){let _0x1daee5=![];typeof _0x130e1c[_0x57afc9(0x270)]=='string'&&(_0x130e1c={..._0x130e1c,'threshold':Number(_0x130e1c['threshold'])},_0x1daee5=!![]),_0x130e1c['change24h']==undefined&&(_0x130e1c={..._0x130e1c,'change24h':-0x14},_0x1daee5=!![]),_0x130e1c['fiat']==undefined&&(_0x130e1c={..._0x130e1c,'fiat':_0x57afc9(0x264)},_0x1daee5=!![]),_0x130e1c['onepagemode']==undefined&&(_0x130e1c={..._0x130e1c,'onepagemode':settings['onepagemode']},_0x1daee5=!![]),_0x130e1c['colorscheme']==undefined&&(_0x130e1c={..._0x130e1c,'colorscheme':_0x57afc9(0x148)},_0x1daee5=!![]),_0x130e1c[_0x57afc9(0x1a7)]==undefined&&(_0x130e1c={..._0x130e1c,'autoliquidity':!![]},_0x1daee5=!![]),_0x1daee5&&(_0x130e1c={'botID':_0x130e1c['botID'],'exchange':_0x130e1c[_0x57afc9(0x27d)],'apiKey':_0x130e1c['apiKey'],'apiSecret':_0x130e1c[_0x57afc9(0x1ef)],'apiPassword':_0x130e1c[_0x57afc9(0x116)],'basecoin':_0x130e1c['basecoin'],'botname':_0x130e1c[_0x57afc9(0x1b6)],'showname':_0x130e1c[_0x57afc9(0x201)],'threshold':_0x130e1c[_0x57afc9(0x270)],'ordertype':_0x130e1c['ordertype'],'timeout':_0x130e1c[_0x57afc9(0x1a4)],'fiat':_0x130e1c['fiat'],'startdate':_0x130e1c[_0x57afc9(0x12e)],'recreate':_0x130e1c['recreate'],'timeshift':_0x130e1c[_0x57afc9(0x298)],'onepagemode':_0x130e1c[_0x57afc9(0x18e)],'headless':_0x130e1c[_0x57afc9(0x25e)],'cooldown':_0x130e1c[_0x57afc9(0x13b)],'change24h':_0x130e1c[_0x57afc9(0x241)],'emojibuy':_0x130e1c[_0x57afc9(0x1c0)],'emojisell':_0x130e1c[_0x57afc9(0x204)],'colorscheme':_0x130e1c[_0x57afc9(0x113)],'portfolio':_0x130e1c[_0x57afc9(0x222)],'autoliquidity':_0x130e1c['autoliquidity'],'liquidity':_0x130e1c[_0x57afc9(0x169)],'openOrders':_0x130e1c[_0x57afc9(0x1d3)]},dbConfig['get'](_0x57afc9(0x10f))[_0x57afc9(0x174)]()['write'](),dbConfig[_0x57afc9(0x211)](_0x57afc9(0x10f))[_0x57afc9(0x104)](_0x130e1c)[_0x57afc9(0x1cd)]());}else _0x130e1c={'botID':_0x23f8c3,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x23f8c3,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x57afc9(0x264),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x57afc9(0x298)],'onepagemode':settings[_0x57afc9(0x18e)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x57afc9(0x148),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x130e1c;}function emittedConfiguration(){const _0x550c6c=_0x25790c;let _0x3f065c;if(config[_0x550c6c(0x266)]=='')_0x3f065c={...config,'configstate':_0x550c6c(0x28d)};else config[_0x550c6c(0x266)]==_0x550c6c(0x256)?_0x3f065c={...config,'configstate':'recovery'}:(_0x3f065c={...config,'apiKey':_0x550c6c(0x1f2),'apiSecret':_0x550c6c(0x1f2)},config['apiPassword']&&(_0x3f065c[_0x550c6c(0x116)]=_0x550c6c(0x1f2)));return _0x3f065c;}function getSettings(){const _0x57bafb=_0x25790c;return dbSettings[_0x57bafb(0x211)]('settings')[_0x57bafb(0x260)]();}function getSecure(){const _0x138e43=_0x25790c;return dbSecure['get'](_0x138e43(0xfe))[_0x138e43(0x260)]()||{};}function updateTimeshift(_0x1c756c){const _0x1c7f47=_0x25790c;let _0x5e9029=dbConfig[_0x1c7f47(0x211)]('bot')['find']({'botID':botID})[_0x1c7f47(0x260)]();_0x5e9029&&dbConfig[_0x1c7f47(0x211)](_0x1c7f47(0x10f))['find']({'botID':botID})[_0x1c7f47(0x23d)]({'timeshift':_0x1c756c})['write'](),config['timeshift']=_0x1c756c,proxyEmit('configuration',emittedConfiguration());}function updateOnepagemode(_0x164d63){const _0x1e45bd=_0x25790c;let _0x56fa19=dbConfig[_0x1e45bd(0x211)](_0x1e45bd(0x10f))[_0x1e45bd(0x1d9)]({'botID':botID})['value']();_0x56fa19&&dbConfig[_0x1e45bd(0x211)](_0x1e45bd(0x10f))['find']({'botID':botID})[_0x1e45bd(0x23d)]({'onepagemode':_0x164d63})[_0x1e45bd(0x1cd)](),config['onepagemode']=_0x164d63,proxyEmit(_0x1e45bd(0x18a),emittedConfiguration());}async function storeConfiguration(_0x3bee2a){const _0x347c48=_0x25790c;logger[_0x347c48(0x22a)](_0x347c48(0x1c7));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x347c48(0x102));let _0x5a3dd5=![],_0x382a5f=![],_0x3abd92=[];_0x3bee2a['portfolio'][_0x347c48(0x218)](_0x2037f7=>{const _0x6bc0e4=_0x347c48;if(!_0x2037f7[_0x6bc0e4(0x14a)]&&_0x2037f7[_0x6bc0e4(0x233)]!=_0x3bee2a[_0x6bc0e4(0x199)])_0x3abd92[_0x6bc0e4(0x104)](_0x2037f7[_0x6bc0e4(0x23c)]);}),_0x3abd92['forEach'](_0x49932c=>{const _0x13272f=_0x347c48,_0x35d1dd=currentCoins[_0x13272f(0x1d9)](_0x396613=>_0x396613[_0x13272f(0x23c)]==_0x49932c);!_0x35d1dd&&(_0x5a3dd5=!![]);}),currentCoins['forEach'](_0x1eccdb=>{const _0x39e5a9=_0x347c48;if(_0x1eccdb['coin']!=config[_0x39e5a9(0x199)]){const _0x564a47=_0x3abd92[_0x39e5a9(0x1d9)](_0x783d7e=>_0x783d7e==_0x1eccdb[_0x39e5a9(0x23c)]);!_0x564a47&&(_0x5a3dd5=!![]);}}),_0x3bee2a[_0x347c48(0x222)][_0x347c48(0x218)](_0x3dab9a=>{const _0x55c39c=_0x347c48,_0x3e35be=config[_0x55c39c(0x222)][_0x55c39c(0x1d9)](_0x424d33=>_0x424d33[_0x55c39c(0x233)]==_0x3dab9a[_0x55c39c(0x233)]);if(_0x3e35be&&_0x3dab9a[_0x55c39c(0x1d8)]!=_0x3e35be[_0x55c39c(0x1d8)])_0x382a5f=!![];});let _0xfc8cc3=dbConfig['get'](_0x347c48(0x10f))[_0x347c48(0x1d9)]({'botID':botID})[_0x347c48(0x260)]();_0x3bee2a={..._0x3bee2a,'apiKey':crypt[_0x347c48(0x216)](secure[_0x347c48(0x27f)],_0x3bee2a[_0x347c48(0x266)])[_0x347c48(0x287)],'apiSecret':crypt[_0x347c48(0x216)](secure[_0x347c48(0x27f)],_0x3bee2a['apiSecret'])[_0x347c48(0x287)]};_0x3bee2a[_0x347c48(0x116)]&&(_0x3bee2a[_0x347c48(0x116)]=crypt[_0x347c48(0x216)](secure[_0x347c48(0x27f)],_0x3bee2a[_0x347c48(0x116)])[_0x347c48(0x287)]);let _0x472dc7=![];if(_0xfc8cc3){_0x3bee2a[_0x347c48(0x266)]==_0x347c48(0x1f2)?_0x3bee2a['apiKey']=config[_0x347c48(0x266)]:_0x472dc7=!![];_0x3bee2a[_0x347c48(0x1ef)]==_0x347c48(0x1f2)?_0x3bee2a['apiSecret']=config[_0x347c48(0x1ef)]:_0x472dc7=!![];if(_0x3bee2a[_0x347c48(0x116)]=='************')_0x3bee2a[_0x347c48(0x116)]=config[_0x347c48(0x116)];else{if(_0x3bee2a[_0x347c48(0x116)])_0x472dc7=!![];}dbConfig['get'](_0x347c48(0x10f))['find']({'botID':botID})[_0x347c48(0x23d)](_0x3bee2a)[_0x347c48(0x1cd)]();}else dbConfig[_0x347c48(0x211)](_0x347c48(0x10f))[_0x347c48(0x104)](_0x3bee2a)[_0x347c48(0x1cd)](),_0x472dc7=!![],process[_0x347c48(0x18f)]({'status':_0x347c48(0x1b8),'live':_0x347c48(0x1f5)},_0x41f15d=>{});process['send']({'botname':_0x3bee2a['botname']},_0x4c4972=>{}),config={..._0x3bee2a},updateBotManager(),proxyEmit(_0x347c48(0x1ae)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x472dc7)await reset(!![]);else _0x5a3dd5||_0x382a5f?await reset(![]):getBalances();blockTransactionDetection=![],logger['debug'](_0x347c48(0x151));}async function storeHeadless(_0x26715b){const _0x59acec=_0x25790c,_0x5bb1b7={...config,'headless':_0x26715b[_0x59acec(0x25e)]};let _0x466467=dbConfig[_0x59acec(0x211)](_0x59acec(0x10f))[_0x59acec(0x1d9)]({'botID':botID})[_0x59acec(0x260)]();_0x466467&&dbConfig[_0x59acec(0x211)]('bot')[_0x59acec(0x1d9)]({'botID':botID})['assign'](_0x5bb1b7)[_0x59acec(0x1cd)](),config={..._0x5bb1b7},updateBotManager(),proxyEmit(_0x59acec(0x18a),emittedConfiguration());}async function storeFiat(_0x4f7028){const _0x532b06=_0x25790c,_0x23254f={...config,'fiat':_0x4f7028};let _0x5523af=dbConfig[_0x532b06(0x211)](_0x532b06(0x10f))[_0x532b06(0x1d9)]({'botID':botID})[_0x532b06(0x260)]();_0x5523af&&dbConfig[_0x532b06(0x211)](_0x532b06(0x10f))[_0x532b06(0x1d9)]({'botID':botID})[_0x532b06(0x23d)](_0x23254f)[_0x532b06(0x1cd)](),config={..._0x23254f},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x4ffa33=_0x25790c;logger[_0x4ffa33(0x251)](_0x4ffa33(0x10a));try{if(fs['existsSync'](path[_0x4ffa33(0x230)](configpath,_0x4ffa33(0x24f)+botID+_0x4ffa33(0x17c))))fs[_0x4ffa33(0x184)](path['join'](configpath,_0x4ffa33(0x24f)+botID+_0x4ffa33(0x17c)));if(fs[_0x4ffa33(0x220)](path[_0x4ffa33(0x230)](configpath,_0x4ffa33(0x24f)+botID+'-performance.json')))fs[_0x4ffa33(0x184)](path[_0x4ffa33(0x230)](configpath,_0x4ffa33(0x24f)+botID+_0x4ffa33(0x11d)));if(fs[_0x4ffa33(0x220)](path[_0x4ffa33(0x230)](configpath,_0x4ffa33(0x24f)+botID+'-results.json')))fs['unlinkSync'](path[_0x4ffa33(0x230)](configpath,_0x4ffa33(0x24f)+botID+_0x4ffa33(0x284)));}catch(_0x1b85e9){if(_0x1b85e9)logger[_0x4ffa33(0x251)](_0x4ffa33(0x1f0),_0x1b85e9);}const _0x5e21e2=getDate();let _0x472823=[];currentCoins['forEach'](_0xd59503=>{const _0xee497a=_0x4ffa33;_0x472823[_0xee497a(0x104)]({'coin':_0xd59503[_0xee497a(0x233)],'number':_0xd59503['number'],'price':_0xd59503['last']});});let _0x21886b=dbConfig[_0x4ffa33(0x211)]('bot')['find']({'botID':botID})['value']();_0x21886b&&(dbConfig[_0x4ffa33(0x211)]('bot')[_0x4ffa33(0x1d9)]({'botID':botID})['assign']({'liquidity':[{'date':_0x5e21e2,'changes':_0x472823}]})['write'](),config['liquidity']=[]),process[_0x4ffa33(0x18f)]({'stop':_0x4ffa33(0x16a)},_0x2d3590=>{});}function noslash(_0x4b2f98){const _0x81baa9=_0x25790c;return _0x4b2f98[_0x81baa9(0x1e7)]('/','');}function updateHighestFee(_0x51ff6f){const _0x270369=_0x25790c;if(_0x51ff6f[_0x270369(0x14d)]){let _0x45359b={'filled':_0x51ff6f['filled']*_0x51ff6f[_0x270369(0x134)],'amount':_0x51ff6f[_0x270369(0x1db)]*_0x51ff6f['price'],'side':_0x51ff6f[_0x270369(0x242)]=='sell'?_0x270369(0x18b):_0x270369(0x1be),'price':0x1/_0x51ff6f[_0x270369(0x134)]};_0x51ff6f={..._0x51ff6f,..._0x45359b};}const _0x22dc89=defaultFee*_0x51ff6f[_0x270369(0x1db)]*_0x51ff6f[_0x270369(0x134)];lastFees[_0x270369(0x165)][_0x270369(0x10c)]===0x14&&lastFees[_0x270369(0x165)][_0x270369(0x145)](),lastFees[_0x270369(0x165)][_0x270369(0x104)](_0x22dc89),lastFees[_0x270369(0x1ec)]=Math[_0x270369(0x279)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x584a55){const _0x58ace2=_0x25790c;logger['debug'](_0x58ace2(0x26b)+_0x584a55[_0x58ace2(0x23c)]+'\x20|\x20'+_0x584a55[_0x58ace2(0x166)]+_0x58ace2(0x17e)+_0x584a55[_0x58ace2(0x1db)]+'\x20/\x20'+_0x584a55[_0x58ace2(0x229)]+_0x58ace2(0x17e)+_0x584a55['id']);let _0x50a00e=_0x584a55[_0x58ace2(0x166)],_0x564755=![];currentCoins[_0x58ace2(0x218)](_0x3c17d1=>{const _0x45c9fb=_0x58ace2;_0x3c17d1[_0x45c9fb(0x23c)]==_0x584a55[_0x45c9fb(0x23c)]&&(_0x564755=!![]);});if(!_0x564755)return;const _0x3c816b=currentCoins['find'](_0x1518d4=>_0x1518d4[_0x58ace2(0x23c)]==_0x584a55['symbol']),_0x230b8e=_0x2ff3e0=>{if(_0x3c816b)_0x3c816b['orderstatus']=_0x2ff3e0;};if(_0x50a00e=='open')_0x230b8e(_0x58ace2(0x219));else{if(_0x50a00e==_0x58ace2(0x17a)){_0x230b8e(_0x58ace2(0x17a));const _0x1244cb=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1244cb,await getOpenOrders(),handleOpenOrders();}else{if(_0x50a00e==_0x58ace2(0x19e)){let _0x86f933=![];if(lastOrders)for(const _0x61115b of lastOrders){const _0x3b1787=0xc8,_0x1317d3=0x1388;let _0x4f2b82=0x0;while(!_0x61115b[_0x58ace2(0x12a)]&&_0x4f2b82*_0x3b1787<_0x1317d3){_0x4f2b82++,await sleep(_0x3b1787);}if(_0x4f2b82>0x0)logger[_0x58ace2(0x22a)]('Waited\x20'+_0x4f2b82*_0x3b1787/0x3e8+_0x58ace2(0x1c1));if(_0x61115b[_0x58ace2(0x12a)]==_0x584a55['id']){logger['debug'](_0x58ace2(0x285)+_0x584a55['id']),_0x86f933=!![];if(_0x61115b[_0x58ace2(0x1db)]==0x0){logger[_0x58ace2(0x22a)](_0x58ace2(0x178)+_0x584a55['id']);if(_0x584a55[_0x58ace2(0x232)])_0x61115b['price']=_0x584a55['average'];else{if(_0x584a55[_0x58ace2(0x134)])_0x61115b[_0x58ace2(0x134)]=_0x584a55[_0x58ace2(0x134)];else{}}_0x61115b[_0x58ace2(0x1db)]=_0x584a55['filled'],updateHighestFee(_0x61115b),_0x230b8e(_0x58ace2(0x1db)),await validateOrders();if(lockOrders==ORDERS[_0x58ace2(0x179)]){const _0x2a92a9=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2a92a9;}_0x61115b[_0x58ace2(0x101)]={'currency':_0x584a55['fee']?_0x584a55[_0x58ace2(0x101)]['currency']:null,'cost':_0x584a55[_0x58ace2(0x101)]?_0x584a55[_0x58ace2(0x101)][_0x58ace2(0x28e)]:0x0},await updateCoinResults(_0x61115b);}}}if(!_0x86f933){logger['debug']('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x584a55['id']),_0x230b8e(_0x58ace2(0x1db));const _0x3ce15c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x3ce15c,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x527b41=JSON[_0x58ace2(0x210)](lastBalances[_0x58ace2(0x222)]);const _0x1fb4f3=_0x527b41[_0x58ace2(0x1d9)](_0x4a246a=>_0x4a246a[_0x58ace2(0x23c)]==_0x584a55[_0x58ace2(0x23c)]);if(_0x1fb4f3){if(_0x50a00e==_0x58ace2(0x219))_0x1fb4f3['orderstatus']=_0x1fb4f3[_0x58ace2(0x1e4)]==_0x58ace2(0x1db)?_0x58ace2(0x1db):'open';else{if(_0x50a00e=='canceled')_0x1fb4f3[_0x58ace2(0x1e4)]=_0x1fb4f3[_0x58ace2(0x1e4)]==_0x58ace2(0x1db)?'filled':'canceled';else _0x50a00e=='closed'&&(_0x1fb4f3[_0x58ace2(0x1e4)]=_0x58ace2(0x1db));}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x527b41)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x3c6531=_0x25790c;await getOpenOrders();let _0x234047=![];currentCoins[_0x3c6531(0x218)](_0x15a7fc=>{const _0x32427c=_0x3c6531;_0x234047=allOpenOrders[_0x32427c(0x1d9)](_0x2b8033=>_0x2b8033[_0x32427c(0x23c)]==_0x15a7fc[_0x32427c(0x23c)]),_0x15a7fc[_0x32427c(0x1e4)]=_0x234047?_0x32427c(0x219):_0x32427c(0x143);});}async function getCoins(_0x1bfb27=0x0,_0x43b2bf=!![],_0x3590dc=config[_0x25790c(0x199)]){const _0x1592df=_0x25790c;let _0x1f7dd7,_0x1862fb=[],_0xe89b2c=[],_0x15a9ad=[];if(_0x1bfb27)await sleep(_0x1bfb27);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1f7dd7=await exchange['fetchBalance'](),mybalances=_0x1f7dd7[_0x1592df(0x258)];for(const [_0x2c3ea4,_0x53c30e]of Object['entries'](mybalances)){_0x15a9ad[_0x1592df(0x104)](_0x2c3ea4);}config[_0x1592df(0x222)][_0x1592df(0x218)](_0x387aaa=>{const _0x24cd1b=_0x1592df;!_0x15a9ad[_0x24cd1b(0x297)](_0x387aaa[_0x24cd1b(0x233)])&&(mybalances[_0x387aaa[_0x24cd1b(0x233)]]=0x0);});if(_0x3590dc=='')for(const [_0x43e5de,_0x412e40]of Object[_0x1592df(0x124)](mybalances)){_0x412e40!=0x0&&_0x1862fb['push']({'coin':_0x43e5de});}else{let _0x537d60=![];for(const [_0x5018e1,_0x255d46]of Object[_0x1592df(0x124)](mybalances)){const _0x712506=config[_0x1592df(0x222)]['find'](_0x13aed8=>_0x13aed8['coin']==_0x5018e1),_0x42bed7=_0x5018e1+'/'+_0x3590dc,_0x547257=_0x3590dc+'/'+_0x5018e1,_0x4c982d=currentCoins[_0x1592df(0x1d9)](_0x45d326=>_0x45d326[_0x1592df(0x233)]==_0x5018e1);_0x537d60=![];if((_0x255d46!=0x0||_0x712506)&&(allSymbols[_0x1592df(0x297)](_0x42bed7)||_0x5018e1==_0x3590dc))_0x1862fb['push']({'coin':_0x5018e1,'symbol':_0x42bed7,'reverse':![],'number':Math['max'](_0x255d46+(_0x712506&&_0x712506['offset']||0x0),0x0),'orderstatus':_0x4c982d?_0x4c982d[_0x1592df(0x1e4)]:_0x1592df(0x143)});else{if((_0x255d46!=0x0||_0x712506)&&allSymbols[_0x1592df(0x297)](_0x547257))_0x1862fb['push']({'coin':_0x5018e1,'symbol':_0x547257,'reverse':!![],'number':Math[_0x1592df(0x279)](_0x255d46+(_0x712506&&_0x712506[_0x1592df(0x1d8)]||0x0),0x0),'orderstatus':_0x4c982d?_0x4c982d[_0x1592df(0x1e4)]:'none'});else _0x712506&&_0x1862fb['push']({'coin':_0x712506[_0x1592df(0x233)],'symbol':_0x712506['symbol'],'reverse':_0x712506[_0x1592df(0x14d)],'number':0x0,'orderstatus':_0x1592df(0x143)});}}}}catch(_0x4e6afd){if(!_0x43b2bf)handleErrorNoStop(_0x4e6afd,_0x1592df(0x122));else await handleError(_0x4e6afd,_0x1592df(0x122));}return _0xe89b2c=cloneDeep(_0x1862fb),_0x1862fb=_0x1862fb['filter'](_0x41fcb4=>{const _0x720b38=_0x1592df,_0x32b6c6=config[_0x720b38(0x222)][_0x720b38(0x1d9)](_0x44fe37=>_0x44fe37[_0x720b38(0x233)]==_0x41fcb4[_0x720b38(0x233)]);return _0x32b6c6&&!_0x32b6c6[_0x720b38(0x14a)];}),[_0x1862fb,_0xe89b2c];}async function getCoinNumber(_0x2bf7b6){const _0x2cdcb8=_0x25790c;let _0x23e956;try{const _0x3a3ca0=await exchange[_0x2cdcb8(0x1fc)]();_0x23e956=_0x3a3ca0[_0x2cdcb8(0x258)][_0x2bf7b6];}catch(_0x5b52a9){await handleError(_0x5b52a9,_0x2cdcb8(0x245));}return _0x23e956;}async function getOpenOrders(){const _0x384a76=_0x25790c;let _0x529767;allOpenOrders=[];try{for(const _0xc9015f of config['portfolio']){!_0xc9015f[_0x384a76(0x14a)]&&_0xc9015f[_0x384a76(0x233)]!=config[_0x384a76(0x199)]&&(_0x529767=await exchange[_0x384a76(0x1bf)](_0xc9015f[_0x384a76(0x23c)]),_0x529767[_0x384a76(0x10c)]>0x0&&allOpenOrders[_0x384a76(0x104)](_0x529767[0x0]));}}catch(_0x1bd4f5){await handleError(_0x1bd4f5,_0x384a76(0x180));}}async function handleOpenOrders(_0xe26917=0x0){const _0x16c49f=_0x25790c;allOpenOrders[_0x16c49f(0x10c)]==0x0&&lockOrders==ORDERS[_0x16c49f(0x179)]&&allOrdersPlaced&&(_0xe26917==0x0?(logger[_0x16c49f(0x22a)](_0x16c49f(0x13d)),_0xe26917++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x16c49f(0x175)),validateOrders(_0x16c49f(0x289))));}async function testAPI(_0x297c71){const _0x4c4198=_0x25790c,_0x24e1be=ccxt[_0x4c4198(0x15a)][_0x297c71['exchange'][_0x4c4198(0x212)]()],_0x2dba7f=new _0x24e1be({'apiKey':_0x297c71[_0x4c4198(0x266)],'secret':_0x297c71[_0x4c4198(0x1ef)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x4c4198(0x26d)}});if(_0x297c71['apiPassword'])_0x2dba7f['password']=_0x297c71['apiPassword'];try{await _0x2dba7f[_0x4c4198(0x221)]();}catch(_0x44a1b8){throw _0x44a1b8;}}function cloneDeep(_0x255590){const _0x204994=_0x25790c;return JSON[_0x204994(0x210)](JSON[_0x204994(0x19b)](_0x255590));}async function getPortfolio(_0x10be24){const _0x2d11c0=_0x25790c;let _0x3e288a=[],_0x1e6c30=[],_0x3e3332=[],_0x37366a;if(_0x10be24[_0x2d11c0(0x266)]!==_0x2d11c0(0x1f2)||_0x10be24['apiSecret']!=='************'||_0x10be24[_0x2d11c0(0x116)]&&_0x10be24[_0x2d11c0(0x116)]!==_0x2d11c0(0x1f2)){if(config[_0x2d11c0(0x27d)]){if(_0x10be24[_0x2d11c0(0x266)]==_0x2d11c0(0x1f2))_0x10be24['apiKey']=config[_0x2d11c0(0x266)];if(_0x10be24['apiSecret']==_0x2d11c0(0x1f2))_0x10be24[_0x2d11c0(0x1ef)]=config[_0x2d11c0(0x1ef)];if(_0x10be24[_0x2d11c0(0x116)]==_0x2d11c0(0x1f2))_0x10be24['apiPassword']=config[_0x2d11c0(0x116)];try{await testAPI(_0x10be24);}catch(_0x2bd493){if(_0x2bd493[_0x2d11c0(0x226)]()['includes'](_0x2d11c0(0x198))){logger[_0x2d11c0(0x22a)](_0x2d11c0(0x107)),proxyEmit('portfolio',![]);return;}else{handleError(_0x2bd493,'getPortfolio(0)');return;}}}await initExchange(_0x10be24[_0x2d11c0(0x27d)],_0x10be24['apiKey'],_0x10be24[_0x2d11c0(0x1ef)],_0x10be24[_0x2d11c0(0x116)]);try{await loadSymbols();}catch(_0x5c1592){if(_0x5c1592[_0x2d11c0(0x226)]()[_0x2d11c0(0x297)](_0x2d11c0(0x198))){proxyEmit(_0x2d11c0(0x222),![]);return;}else{handleError(_0x5c1592,_0x2d11c0(0x1ca));return;}}const _0x550d72=await getCoins(0x0,![],_0x10be24[_0x2d11c0(0x199)]);_0x3e3332=cloneDeep(_0x550d72[0x1]);}else{const _0x8cd3d8=await getCoins();_0x3e3332=cloneDeep(_0x8cd3d8[0x1]);}if(_0x10be24[_0x2d11c0(0x199)]=='')proxyEmit(_0x2d11c0(0x222),_0x3e3332);else{_0x3e3332['forEach'](_0x492694=>{const _0x43f01b=_0x2d11c0;if(_0x492694['coin']!=_0x10be24['basecoin']&&allSymbols[_0x43f01b(0x297)](_0x492694[_0x43f01b(0x23c)]))_0x3e288a[_0x43f01b(0x104)](_0x492694[_0x43f01b(0x23c)]);});if(_0x3e288a[_0x2d11c0(0x10c)]==0x0)logHistory('error',_0x2d11c0(0x1c2));else{try{_0x1e6c30=await getTickers(_0x3e288a);}catch(_0x3962ed){if(_0x3962ed[_0x2d11c0(0x226)]()['includes'](_0x2d11c0(0x198))){proxyEmit(_0x2d11c0(0x222),![]);return;}else handleError(_0x3962ed,_0x2d11c0(0x20c));}_0x3e3332[_0x2d11c0(0x218)](_0x4dcd5f=>{const _0xcf7938=_0x2d11c0;_0x4dcd5f[_0xcf7938(0x233)]!=_0x10be24['basecoin']?_0x1e6c30[_0x4dcd5f['symbol']]?_0x37366a=_0x4dcd5f[_0xcf7938(0x14d)]?0x1/_0x1e6c30[_0x4dcd5f[_0xcf7938(0x23c)]]['last']:_0x1e6c30[_0x4dcd5f[_0xcf7938(0x23c)]][_0xcf7938(0x192)]:_0x37366a=0x0:_0x37366a=0x1,_0x4dcd5f['price']=formatResult(_0x37366a,0x8);}),proxyEmit('portfolio',_0x3e3332);}}}function truncateTradeAmount(_0x29c73c,_0x74e04c){let _0x25ba87=0x0;try{_0x25ba87=exchange['amountToPrecision'](_0x29c73c,_0x74e04c);}catch(_0x16c413){}return _0x25ba87;}function checkMinimums(_0x50e78e){const _0x84d2a1=_0x25790c;let _0x31c4ca=!![];const _0x41431c=!_0x50e78e['reverse']?markets[_0x50e78e[_0x84d2a1(0x23c)]][_0x84d2a1(0x214)][_0x84d2a1(0x229)][_0x84d2a1(0x239)]:markets[_0x50e78e[_0x84d2a1(0x23c)]]['limits'][_0x84d2a1(0x28e)][_0x84d2a1(0x239)],_0x293add=!_0x50e78e[_0x84d2a1(0x14d)]?markets[_0x50e78e['symbol']][_0x84d2a1(0x214)][_0x84d2a1(0x28e)][_0x84d2a1(0x239)]:markets[_0x50e78e['symbol']]['limits'][_0x84d2a1(0x229)][_0x84d2a1(0x239)],_0x25c81b=truncateTradeAmount(_0x50e78e['symbol'],_0x50e78e['trade']);_0x50e78e[_0x84d2a1(0x155)]=_0x25c81b;if(Math[_0x84d2a1(0x1de)](_0x25c81b)<_0x41431c)_0x31c4ca=![];if(Math[_0x84d2a1(0x1de)](_0x25c81b)*_0x50e78e[_0x84d2a1(0x192)]<_0x293add)_0x31c4ca=![];if(_0x50e78e[_0x84d2a1(0x242)]==_0x84d2a1(0x1be)){let _0x312c57=config[_0x84d2a1(0x222)]['find'](_0x2a51e8=>_0x2a51e8[_0x84d2a1(0x233)]==_0x50e78e[_0x84d2a1(0x233)]);if(_0x312c57[_0x84d2a1(0x1d8)]>0x0){if(Math[_0x84d2a1(0x1de)](_0x25c81b)>_0x50e78e[_0x84d2a1(0x11f)]-_0x312c57['offset'])_0x31c4ca=![];}else{if(Math[_0x84d2a1(0x1de)](_0x25c81b)>_0x50e78e[_0x84d2a1(0x11f)])_0x31c4ca=![];}}if(_0x50e78e[_0x84d2a1(0x242)]==_0x84d2a1(0x18b)){let _0x3ff054=config['portfolio']['find'](_0x4d1033=>_0x4d1033['coin']==config['basecoin']),_0x145ec3=currentCoins[_0x84d2a1(0x1d9)](_0x333a4e=>_0x333a4e['coin']==config[_0x84d2a1(0x199)]);if(_0x3ff054[_0x84d2a1(0x1d8)]>0x0){if(Math[_0x84d2a1(0x1de)](_0x25c81b)*_0x50e78e['last']>_0x145ec3['number']-_0x3ff054['offset'])_0x31c4ca=![];}else{if(Math[_0x84d2a1(0x1de)](_0x25c81b)*_0x50e78e[_0x84d2a1(0x192)]>_0x145ec3[_0x84d2a1(0x11f)])_0x31c4ca=![];}}return _0x31c4ca;}async function getBalances(_0x2a318b=!![]){const _0x31fa2a=_0x25790c;let _0x235a08=0x0,_0xe6ca7d;const _0x480efd=config[_0x31fa2a(0x270)];if(config[_0x31fa2a(0x25e)]&&config[_0x31fa2a(0x241)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x4dd5a1=>{const _0x3ac0da=_0x31fa2a;if(_0x4dd5a1[_0x3ac0da(0x233)]!=config[_0x3ac0da(0x199)]){let _0xf49789=global[_0x3ac0da(0x224)][noslash(_0x4dd5a1[_0x3ac0da(0x23c)])];_0xe6ca7d=_0x4dd5a1[_0x3ac0da(0x14d)]?0x1/_0xf49789:_0xf49789;}else _0xe6ca7d=0x1;let _0x1dddc4=_0x4dd5a1['number']*_0xe6ca7d;_0x235a08+=_0x1dddc4,_0x4dd5a1[_0x3ac0da(0x192)]=formatResult(Number(_0xe6ca7d),0x8),_0x4dd5a1['value']=_0x1dddc4;}),currentCoins[_0x31fa2a(0x218)](_0x1c16c4=>{const _0x249046=_0x31fa2a;let _0x53ee65=config[_0x249046(0x222)][_0x249046(0x1d9)](_0x44a843=>_0x44a843[_0x249046(0x233)]==_0x1c16c4[_0x249046(0x233)]),_0x28f398=Number(_0x53ee65[_0x249046(0x188)]),_0x1a4f88=_0x1c16c4['value']/_0x235a08*0x64,_0x2bbf8f=_0x28f398*_0x235a08/0x64/_0x1c16c4['last']-_0x1c16c4['number'];_0x1c16c4[_0x249046(0x188)]=formatResult(_0x1a4f88,0x3),_0x1c16c4[_0x249046(0x1ad)]=formatResult(_0x28f398,0x3),_0x1c16c4[_0x249046(0x155)]=formatResult(_0x2bbf8f,0x8),_0x1c16c4[_0x249046(0x242)]='',_0x1c16c4[_0x249046(0x1d6)]=![];if(_0x1c16c4[_0x249046(0x233)]!=config[_0x249046(0x199)]){if(_0x1c16c4[_0x249046(0x188)]>_0x28f398)_0x1c16c4[_0x249046(0x242)]=_0x249046(0x1be),_0x1c16c4['valid']=checkMinimums(_0x1c16c4);else _0x1c16c4[_0x249046(0x188)]<_0x28f398&&(_0x1c16c4[_0x249046(0x242)]=_0x249046(0x18b),_0x1c16c4[_0x249046(0x1d6)]=checkMinimums(_0x1c16c4));}_0x1c16c4['delta']=_0x1c16c4[_0x249046(0x188)]/_0x1c16c4[_0x249046(0x1ad)]-0x1;if(_0x1c16c4[_0x249046(0x1e4)]==_0x249046(0x1db)||_0x1c16c4[_0x249046(0x1e4)]==_0x249046(0x17a))_0x1c16c4[_0x249046(0x1e4)]=_0x249046(0x143);}),currentCoins[_0x31fa2a(0x237)]((_0x40e0f6,_0xb71ffe)=>_0x40e0f6[_0x31fa2a(0x1d2)]<_0xb71ffe[_0x31fa2a(0x1d2)]?0x1:_0xb71ffe['delta']<_0x40e0f6['delta']?-0x1:0x0);const _0x2151b8=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2151b8['eur'],'usd':_0x2151b8['usd'],'portfolio':JSON[_0x31fa2a(0x19b)](currentCoins),'threshold':_0x480efd},proxyEmit(_0x31fa2a(0x160),{'serverversion':serverversion,'balances':lastBalances});if(_0x2a318b){if(config['headless'])headlessMode({'portfolio':currentCoins,'threshold':_0x480efd});else{if(lockOrders==ORDERS[_0x31fa2a(0x100)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x480efd});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x130288=getNormalizedPerformance();getStartingBalances(_0x130288),emitPerformance(_0x130288);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1913fc=getNormalizedPerformance();emitPerformance(_0x1913fc),getStartingBalances(_0x1913fc),logger[_0x31fa2a(0x22a)](_0x31fa2a(0x296));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x374330=_0x25790c;if(!lastBalances)return;let _0x3e1209=[],_0x21f850,_0x38be66=JSON[_0x374330(0x210)](lastBalances[_0x374330(0x222)]);_0x38be66[_0x374330(0x237)]((_0x474e4b,_0x491b7d)=>_0x474e4b['coin']>_0x491b7d[_0x374330(0x233)]?0x1:_0x491b7d[_0x374330(0x233)]>_0x474e4b[_0x374330(0x233)]?-0x1:0x0),_0x38be66[_0x374330(0x218)](_0x134ebe=>{const _0x369134=_0x374330;let _0xbc7bd={'coin':_0x134ebe['coin'],'number':_0x134ebe[_0x369134(0x11f)],'price':_0x134ebe['last']};_0x3e1209[_0x369134(0x104)](_0xbc7bd);});const _0x56f4a8=await getFiat();_0x21f850={'date':lastBalances[_0x374330(0x1b7)][_0x374330(0x253)]('\x20')[0x0],'eur':_0x56f4a8[_0x374330(0x173)],'usd':_0x56f4a8[_0x374330(0x1fd)],'coins':_0x3e1209};let _0x145eb6=dbPerformance[_0x374330(0x211)]('data')[_0x374330(0x1d9)]({'date':_0x21f850[_0x374330(0x105)]})[_0x374330(0x260)]();_0x145eb6?_0x21f850[_0x374330(0x105)]!=config[_0x374330(0x12e)]&&dbPerformance['get'](_0x374330(0x291))['find']({'date':_0x21f850[_0x374330(0x105)]})['assign'](_0x21f850)[_0x374330(0x1cd)]():dbPerformance[_0x374330(0x211)](_0x374330(0x291))[_0x374330(0x104)](_0x21f850)[_0x374330(0x1cd)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x490637=_0x25790c;let _0x190f20=[];if(dbPerformance[_0x490637(0x27c)](_0x490637(0x291))[_0x490637(0x260)]()){let _0x383b6e=dbPerformance['get'](_0x490637(0x291))['cloneDeep']()[_0x490637(0x189)](_0x3a5f68=>{const _0x29a2bf=_0x490637;if(_0x3a5f68[_0x29a2bf(0x1b2)][_0x29a2bf(0x10c)]==0x0)return![];else return!![];})['sortBy']('date')[_0x490637(0x260)](),_0x136b4d=[...config[_0x490637(0x169)]];_0x136b4d[_0x490637(0x237)]((_0xb04d4,_0x38d4dc)=>_0xb04d4[_0x490637(0x105)]>_0x38d4dc[_0x490637(0x105)]?-0x1:_0x38d4dc[_0x490637(0x105)]>_0xb04d4['date']?0x1:0x0);let _0x40edd4=0x1,_0x4aa8d8=[],_0x552bbd=0x0;_0x383b6e[_0x490637(0x150)]()[_0x490637(0x14d)]()[_0x490637(0x218)]((_0x5ad413,_0x114ae6)=>{const _0x5cdf4e=_0x490637;if(_0x136b4d[_0x552bbd]){if(_0x383b6e[_0x383b6e[_0x5cdf4e(0x10c)]-_0x114ae6]&&_0x136b4d[_0x552bbd][_0x5cdf4e(0x105)]==_0x383b6e[_0x383b6e[_0x5cdf4e(0x10c)]-_0x114ae6][_0x5cdf4e(0x105)]){if(_0x114ae6<_0x383b6e[_0x5cdf4e(0x10c)]){let _0x228a8e=0x0,_0x10128e=0x0;_0x383b6e[_0x383b6e['length']-_0x114ae6][_0x5cdf4e(0x1b2)][_0x5cdf4e(0x218)](_0xb25613=>{const _0x4a8046=_0x5cdf4e;_0x10128e+=_0xb25613[_0x4a8046(0x11f)]*_0xb25613['price'];}),_0x136b4d[_0x552bbd][_0x5cdf4e(0x1e9)][_0x5cdf4e(0x218)](_0x15b1eb=>{const _0xd0c180=_0x5cdf4e;_0x228a8e+=_0x15b1eb[_0xd0c180(0x11f)]*_0x15b1eb[_0xd0c180(0x134)];}),_0x40edd4*=_0x228a8e/(_0x10128e-_0x228a8e)+0x1;}_0x552bbd++;}}let _0xad288=0x0;_0x5ad413[_0x5cdf4e(0x1b2)][_0x5cdf4e(0x218)](_0x34d5b3=>{const _0x299f1e=_0x5cdf4e;_0xad288+=_0x34d5b3['number']*_0x34d5b3[_0x299f1e(0x134)];}),_0x4aa8d8[_0x383b6e[_0x5cdf4e(0x10c)]-_0x114ae6-0x1]=_0xad288*(_0x40edd4-0x1);});let _0x509c7d=[];_0x136b4d=[...config[_0x490637(0x169)]]||[];let _0x4be693=0x0;_0x552bbd=0x0,_0x383b6e['forEach']((_0x2e8436,_0x5b8986)=>{const _0x415cda=_0x490637;if(_0x136b4d[_0x552bbd]){const _0x36b2dd=fns['parse'](_0x136b4d[_0x552bbd]['date'],_0x415cda(0x21c),new Date()),_0x579497=fns[_0x415cda(0x210)](_0x2e8436['date'],_0x415cda(0x21c),new Date());if(fns[_0x415cda(0x11e)](_0x36b2dd,_0x579497)){let _0x3ebb86=0x0;_0x136b4d[_0x552bbd][_0x415cda(0x1e9)]['forEach'](_0x4fc246=>{const _0x573ac3=_0x415cda;!_0x509c7d[_0x4fc246['coin']]?_0x509c7d[_0x4fc246[_0x573ac3(0x233)]]=_0x4fc246[_0x573ac3(0x11f)]:(_0x3ebb86=_0x509c7d[_0x4fc246[_0x573ac3(0x233)]],_0x509c7d[_0x4fc246[_0x573ac3(0x233)]]+=_0x4fc246[_0x573ac3(0x11f)]);const _0x44625b=_0x2e8436[_0x573ac3(0x1b2)][_0x573ac3(0x1d9)](_0x2db5f1=>_0x2db5f1[_0x573ac3(0x233)]==_0x4fc246[_0x573ac3(0x233)]);(!_0x44625b||_0x44625b[_0x573ac3(0x11f)]==0x0)&&(_0x4be693+=(-_0x4fc246['number']-_0x3ebb86)*_0x4fc246['price']);}),_0x552bbd++;}}_0x2e8436[_0x415cda(0x1b2)]['forEach']((_0x663ace,_0x5d5e65)=>{const _0x42f3c8=_0x415cda;_0x509c7d[_0x663ace[_0x42f3c8(0x233)]]&&(_0x663ace[_0x42f3c8(0x28d)]=_0x509c7d[_0x663ace[_0x42f3c8(0x233)]]);}),_0x190f20[_0x415cda(0x104)]({'date':_0x2e8436[_0x415cda(0x105)],'eur':_0x2e8436['eur'],'usd':_0x2e8436[_0x415cda(0x1fd)],'offset':_0x4aa8d8[_0x5b8986],'netoffset':_0x4be693,'coins':_0x2e8436[_0x415cda(0x1b2)]});});}return _0x190f20;}function emitPerformance(_0x28ec56){const _0xbe2450=_0x25790c;_0x28ec56[_0xbe2450(0x10c)]!==0x0?(proxyEmit(_0xbe2450(0x1ea),_0x28ec56),lastPerformanceEmitted=getDate()):proxyEmit(_0xbe2450(0x1ea),[]);}function getPerf(_0x1c7e6c,_0x303307){const _0x2a3ca7=_0x25790c;let _0x5ea994=0x0,_0x12c5cf=0x0,_0x21e60c=0x0;_0x1c7e6c[_0x2a3ca7(0x1b2)][_0x2a3ca7(0x218)](_0x17b178=>{const _0x4188ae=_0x2a3ca7;_0x5ea994+=_0x17b178[_0x4188ae(0x11f)]*_0x17b178[_0x4188ae(0x134)];});_0x303307&&(_0x5ea994+=_0x1c7e6c[_0x2a3ca7(0x1d8)]);if(config['basecoin']===_0x2a3ca7(0x27a)||config[_0x2a3ca7(0x199)]===_0x2a3ca7(0x16f)||config[_0x2a3ca7(0x199)]===_0x2a3ca7(0x15c))_0x12c5cf=_0x5ea994*_0x1c7e6c['eur'],_0x21e60c=_0x5ea994*_0x1c7e6c['usd'];else{if(usdBasecoins[_0x2a3ca7(0x297)](config[_0x2a3ca7(0x199)]))_0x12c5cf=_0x5ea994*_0x1c7e6c[_0x2a3ca7(0x173)]/_0x1c7e6c[_0x2a3ca7(0x1fd)],_0x21e60c=_0x5ea994;else config[_0x2a3ca7(0x199)]===_0x2a3ca7(0x293)&&(_0x12c5cf=_0x5ea994,_0x21e60c=_0x5ea994*_0x1c7e6c['usd']/_0x1c7e6c[_0x2a3ca7(0x173)]);}return[_0x5ea994,_0x12c5cf,_0x21e60c];}function getKPIs(_0x22e00d,_0x45ee3d=_0x25790c(0x293)){const _0x4ab377=_0x25790c,_0x4e7bd1=config['basecoin'],_0x2b5d53=lastBalances,_0x33a0ca=currentCoins,_0x41ae03=getNormalizedPerformance(),_0x4a7428=_0x22e00d===_0x4ab377(0x199)?_0x4e7bd1:_0x22e00d===_0x4ab377(0x18d)||_0x22e00d===_0x4ab377(0x1ab)?_0x45ee3d:_0x4ab377(0x223)+_0x4e7bd1,_0x407740=_0x22e00d==='net-basecoin'?_0x4ab377(0x28b):_0x22e00d==='net-fiat'?_0x4ab377(0x28b):_0x4a7428+_0x4ab377(0x269),_0x2693ae=_0x22e00d==='net-basecoin'||_0x22e00d===_0x4ab377(0x1ab)?_0x4ab377(0x28b):_0x4a7428+'\x20change';let _0x4a2a5f=0x0;_0x33a0ca[_0x4ab377(0x218)](_0x195358=>{const _0x518d61=_0x4ab377;_0x4a2a5f+=_0x195358[_0x518d61(0x11f)]*_0x195358[_0x518d61(0x192)];});if(_0x22e00d===_0x4ab377(0x18d)||_0x22e00d===_0x4ab377(0x1ab)){if(_0x4e7bd1==='BTC'||_0x4e7bd1==='ETH'||_0x4e7bd1===_0x4ab377(0x15c))_0x4a2a5f=_0x4a2a5f*(_0x45ee3d==='EUR'?_0x2b5d53[_0x4ab377(0x173)]:_0x2b5d53['usd']);else{if(usdBasecoins[_0x4ab377(0x297)](_0x4e7bd1))_0x4a2a5f=_0x4a2a5f*(_0x45ee3d===_0x4ab377(0x293)?_0x2b5d53[_0x4ab377(0x173)]/_0x2b5d53[_0x4ab377(0x1fd)]:0x1);else _0x4e7bd1===_0x4ab377(0x293)&&(_0x4a2a5f=_0x4a2a5f*(_0x45ee3d===_0x4ab377(0x293)?0x1:_0x2b5d53[_0x4ab377(0x1fd)]/_0x2b5d53[_0x4ab377(0x173)]));}}let _0x2a3984;if(_0x4a2a5f!==0x0){if(_0x22e00d===_0x4ab377(0x199))_0x2a3984=(_0x4a2a5f/startingBalances['basecoin']-0x1)*0x64;else{if(_0x45ee3d==='EUR')_0x2a3984=(_0x4a2a5f/startingBalances[_0x4ab377(0x173)]-0x1)*0x64;else _0x2a3984=(_0x4a2a5f/startingBalances[_0x4ab377(0x1fd)]-0x1)*0x64;}let _0x14e37f=0x0;if(startingBalances[_0x4ab377(0x1b2)])_0x33a0ca[_0x4ab377(0x218)](_0x1f1046=>{const _0x96927a=_0x4ab377;let _0x12acda=startingBalances[_0x96927a(0x1b2)][_0x96927a(0x1d9)](_0x5c9c74=>_0x5c9c74[_0x96927a(0x233)]===_0x1f1046['coin']);if(_0x12acda&&_0x12acda[_0x96927a(0x233)]&&_0x1f1046[_0x96927a(0x11f)]!==0x0)_0x14e37f+=_0x12acda[_0x96927a(0x11f)]*_0x1f1046[_0x96927a(0x192)];});let _0x4c4ad4=0x0;if(_0x41ae03['length']!==0x0){let _0xf5d3e5=_0x41ae03[_0x41ae03[_0x4ab377(0x10c)]-0x1];_0x4c4ad4=_0xf5d3e5[_0x4ab377(0x12f)];}_0x14e37f-=_0x4c4ad4;_0x22e00d===_0x4ab377(0x1cc)&&(_0x2a3984=(_0x4a2a5f-_0x14e37f)/startingBalances[_0x4ab377(0x199)]*0x64,_0x4a2a5f=_0x4a2a5f-_0x14e37f);if(_0x22e00d===_0x4ab377(0x1ab)){let _0x334c38=_0x45ee3d==='EUR'?startingBalances[_0x4ab377(0x173)]:startingBalances[_0x4ab377(0x1fd)];if(_0x4e7bd1===_0x4ab377(0x27a)||_0x4e7bd1===_0x4ab377(0x16f)||_0x4e7bd1===_0x4ab377(0x15c))_0x14e37f=_0x45ee3d===_0x4ab377(0x293)?_0x14e37f*_0x2b5d53[_0x4ab377(0x173)]:_0x14e37f*_0x2b5d53['usd'];else{if(usdBasecoins[_0x4ab377(0x297)](_0x4e7bd1))_0x14e37f=_0x45ee3d===_0x4ab377(0x293)?_0x14e37f*_0x2b5d53[_0x4ab377(0x173)]/_0x2b5d53[_0x4ab377(0x1fd)]:_0x14e37f;else _0x4e7bd1===_0x4ab377(0x293)&&(_0x14e37f=_0x45ee3d===_0x4ab377(0x293)?_0x14e37f:_0x14e37f*_0x2b5d53[_0x4ab377(0x1fd)]/_0x2b5d53[_0x4ab377(0x173)]);}_0x2a3984=(_0x4a2a5f-_0x14e37f)/_0x334c38*0x64,_0x4a2a5f=_0x4a2a5f-_0x14e37f;}if(_0x2a3984){if(_0x2a3984<0x64)_0x2a3984=_0x2a3984[_0x4ab377(0x17b)](0x2);else{if(_0x2a3984<0x3e8)_0x2a3984=_0x2a3984['toFixed'](0x1);else _0x2a3984=_0x2a3984[_0x4ab377(0x17b)](0x0);}}else _0x2a3984=Number('0')[_0x4ab377(0x17b)](0x2);if(_0x4a2a5f){if(Math['abs'](_0x4a2a5f)<0.000001)_0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x2);else{if(Math[_0x4ab377(0x1de)](_0x4a2a5f)<0.1)_0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x6);else{if(Math['abs'](_0x4a2a5f)<0x1)_0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x5);else{if(Math[_0x4ab377(0x1de)](_0x4a2a5f)<0xa)_0x4a2a5f=_0x4a2a5f['toFixed'](0x4);else{if(Math['abs'](_0x4a2a5f)<0x64)_0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x3);else{if(Math[_0x4ab377(0x1de)](_0x4a2a5f)<0x3e8)_0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x2);else _0x4a2a5f=_0x4a2a5f[_0x4ab377(0x17b)](0x2);}}}}}}else _0x4a2a5f=Number('0')['toFixed'](0x2);}else _0x2a3984=Number('0')['toFixed'](0x2);return{'value':_0x4a2a5f,'change':_0x2a3984,'leftTxt':_0x407740,'rightTxt':_0x2693ae};}async function getStartingBalances(_0x5e5c0e,_0xaadb56=!![]){if(_0x5e5c0e['length']!==0x0){const [_0x28bcbf,_0xc51a5,_0xfb06a6]=getPerf(_0x5e5c0e[0x0],!![]);let _0x2e9179=[];config['portfolio']['forEach'](_0x5a5255=>{const _0x5435db=_0xbf13;let _0x465e5f=0x0,_0x544c59;config[_0x5435db(0x169)][_0x5435db(0x218)](_0x494e64=>{const _0x22b744=_0x5435db;let _0x414fba=_0x494e64[_0x22b744(0x1e9)][_0x22b744(0x1d9)](_0x303926=>_0x303926[_0x22b744(0x233)]==_0x5a5255[_0x22b744(0x233)]);if(_0x414fba){_0x465e5f+=_0x414fba['number'];if(!_0x544c59)_0x544c59=_0x414fba[_0x22b744(0x134)];}}),_0x2e9179[_0x5435db(0x104)]({'coin':_0x5a5255[_0x5435db(0x233)],'number':_0x465e5f,'initialprice':_0x544c59});});const _0x397147={'basecoin':_0x28bcbf,'eur':_0xc51a5,'usd':_0xfb06a6,'coins':_0x2e9179};if(_0xaadb56)proxyEmit('starting-balances',_0x397147);startingBalances=_0x397147;}}function headlessMode(_0x55793c){const _0x40976b=_0x25790c;let _0x4a22ef=_0x55793c[_0x40976b(0x222)],_0x348c07=_0x55793c[_0x40976b(0x270)],_0x4c13a3=[];for(let _0x35077b of _0x4a22ef){if(_0x35077b[_0x40976b(0x233)]!=config['basecoin']){if(_0x35077b[_0x40976b(0x1d2)]>=_0x348c07/0x64){if(_0x35077b['valid'])_0x4c13a3[_0x40976b(0x104)](_0x35077b);}else{if(_0x35077b['delta']<=-_0x348c07/0x64){if(_0x35077b['valid'])_0x4c13a3[_0x40976b(0x104)](_0x35077b);}}}}_0x4c13a3[_0x40976b(0x10c)]>0x0&&(lockOrders==ORDERS['UNLOCKED']&&!coolingDown&&_0x4c13a3[_0x40976b(0x218)](_0x53415c=>{const _0x4923be=_0x40976b;logger[_0x4923be(0x22a)]('Trigger:\x20'+_0x53415c[_0x4923be(0x233)]+'\x20'+_0x53415c[_0x4923be(0x11f)]+'\x20'+_0x53415c[_0x4923be(0x192)]+'\x20'+_0x53415c[_0x4923be(0x188)]+'%\x20'+_0x53415c[_0x4923be(0x1ad)]+'%\x20'+(0x64*_0x53415c[_0x4923be(0x1d2)])['toFixed'](0x2)+_0x4923be(0x24c)+_0x348c07[_0x4923be(0x17b)](0x2)+'%)');}),placeOrder(_0x4c13a3));}function notifyBalance(_0x37a8ec){const _0x57e13d=_0x25790c;let _0x5a0bdf=_0x37a8ec['portfolio'],_0x47dd78=_0x37a8ec[_0x57e13d(0x270)],_0x4d6465=[];for(let _0x1b3189 of _0x5a0bdf){if(_0x1b3189['coin']!=config[_0x57e13d(0x199)]){if(_0x1b3189[_0x57e13d(0x1d2)]>=_0x47dd78/0x64){if(_0x1b3189[_0x57e13d(0x1d6)])_0x4d6465[_0x57e13d(0x104)](_0x1b3189);}else{if(_0x1b3189[_0x57e13d(0x1d2)]<=-_0x47dd78/0x64){if(_0x1b3189[_0x57e13d(0x1d6)])_0x4d6465['push'](_0x1b3189);}}}}if(_0x4d6465[_0x57e13d(0x10c)]>0x0){let _0x86cfb=_0x4d6465[_0x57e13d(0x120)](_0x2a9247=>_0x2a9247[_0x57e13d(0x233)]);_0x86cfb[_0x57e13d(0x237)]();let _0x33b101=_0x86cfb[_0x57e13d(0x230)](',\x20');if(!lastCoinsToBalance)logHistory(_0x57e13d(0x10b),_0x57e13d(0x23e));lastCoinsToBalance=_0x33b101;}}function symbolToCoin(_0xf389f6){const _0x48ca02=_0x25790c;let _0x39a7c3;if(_0xf389f6[_0x48ca02(0x297)]('/'+config[_0x48ca02(0x199)]))_0x39a7c3=_0xf389f6[_0x48ca02(0x1e7)]('/'+config[_0x48ca02(0x199)],'');if(_0xf389f6['includes'](config[_0x48ca02(0x199)]+'/'))_0x39a7c3=_0xf389f6[_0x48ca02(0x1e7)](config[_0x48ca02(0x199)]+'/','');return _0x39a7c3;}async function unlockOrders(){const _0x60d959=_0x25790c;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x60d959(0x22a)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x60d959(0x1dd)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x213ecc=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x213ecc,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x60d959(0x100)],logger[_0x60d959(0x22a)](_0x60d959(0x1e3));}}async function validateOrders(_0x503639){const _0x3da91a=_0x25790c;if(_0x503639)validateOrdersState=_0x503639;logger['debug'](_0x3da91a(0x250)+validateOrdersState+_0x3da91a(0x1e2)+(lockOrders==0x1?_0x3da91a(0x20b):lockOrders==0x2?_0x3da91a(0x19a):'ORDERS.UNLOCKED'));let _0x5dbc0f=[],_0x2beaa3=config[_0x3da91a(0x16e)]==_0x3da91a(0x1d5)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x3da91a(0x1a4)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x3da91a(0x179)])return;logger[_0x3da91a(0x22a)](_0x3da91a(0x299)+validateOrdersState),lastOrders[_0x3da91a(0x218)](_0x536291=>{const _0x4876c0=_0x3da91a;let _0x54769e=![];_0x536291[_0x4876c0(0x1db)]>0x0&&(_0x54769e=!![]),_0x5dbc0f[_0x4876c0(0x104)](_0x54769e),_0x54769e&&config['ordertype']!=_0x4876c0(0x1d5)&&logHistory(_0x4876c0(0x249),_0x4876c0(0x10e)+_0x536291[_0x4876c0(0x23c)]+'\x20'+_0x536291[_0x4876c0(0x242)]+'\x20#'+formatResult(_0x536291['filled'],0x8)+'\x20@'+formatResult(_0x536291[_0x4876c0(0x134)],0x8));}),_0x5dbc0f[_0x3da91a(0x218)]((_0x3fe325,_0x55e665)=>{const _0x28c556=_0x3da91a;if(_0x3fe325)lastOrders[_0x28c556(0x108)](_0x55e665,0x1);}),persistOpenOrders(lastOrders);const _0x43b1cb=coolingDown?_0x3da91a(0x17f):_0x3da91a(0x1d7);if(validateOrdersState=='initial'){validateOrdersState=_0x3da91a(0x243);if(_0x5dbc0f[_0x3da91a(0x297)](![])){if(config[_0x3da91a(0x16e)]==_0x3da91a(0x1d5)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x3da91a(0x243)){if(_0x5dbc0f[_0x3da91a(0x297)](![])){}else{if(allOrdersPlaced){if(config[_0x3da91a(0x16e)]==_0x3da91a(0x1d5)){}else{}await unlockOrders();}}}else{if(validateOrdersState=='final')_0x5dbc0f[_0x3da91a(0x297)](![])&&(config[_0x3da91a(0x16e)]==_0x3da91a(0x1d5)?logHistory(_0x3da91a(0x117),_0x3da91a(0x28c)+Math[_0x3da91a(0x1e8)](_0x2beaa3*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x43b1cb):(await cancelOrders(),logHistory(_0x3da91a(0x117),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x3da91a(0x1e8)](_0x2beaa3*validateOrderInterval/0xea60)+_0x3da91a(0x22c)+_0x43b1cb))),await unlockOrders();else{if(validateOrdersState==_0x3da91a(0x289)){if(config[_0x3da91a(0x16e)]!=_0x3da91a(0x1d5))logHistory(_0x3da91a(0x117),_0x3da91a(0x1fa)+_0x43b1cb);await unlockOrders();}}}}}async function cancelOrders(){const _0x2d085a=_0x25790c;lastOrders[_0x2d085a(0x218)](async _0x4d1ee4=>{const _0x5e4056=_0x2d085a;try{const _0x4c0e1e=await exchange[_0x5e4056(0x135)](_0x4d1ee4['orderId'],_0x4d1ee4[_0x5e4056(0x23c)]);}catch(_0x2cd0e3){if(_0x2cd0e3[_0x5e4056(0x226)]()['includes'](_0x5e4056(0x14e))){}else await handleError(_0x2cd0e3,_0x5e4056(0x1e5));}});}async function initCoinResults(_0x42b611){const _0x450cc0=_0x25790c;_0x42b611?logger[_0x450cc0(0x22a)]('Resetting\x20coin\x20results:\x20'+_0x42b611):logger[_0x450cc0(0x22a)]('Initializing\x20coin\x20results'),config['portfolio']['forEach'](_0x50fe3d=>{const _0xe6e6c8=_0x450cc0;if(!_0x50fe3d['excluded']&&_0x50fe3d[_0xe6e6c8(0x233)]!=config[_0xe6e6c8(0x199)]){const _0x461044=currentCoins[_0xe6e6c8(0x1d9)](_0x16fa0e=>_0x16fa0e['coin']==_0x50fe3d[_0xe6e6c8(0x233)]),_0xdb923f=global[_0xe6e6c8(0x224)][noslash(_0x50fe3d[_0xe6e6c8(0x23c)])];let _0x267c76=_0x461044?_0x461044[_0xe6e6c8(0x11f)]:null,_0x301c81=_0x50fe3d[_0xe6e6c8(0x14d)]?0x1/_0xdb923f:_0xdb923f,_0x27b95b;config[_0xe6e6c8(0x169)]['forEach'](_0x3c0625=>{const _0x139368=_0xe6e6c8;!_0x27b95b&&(_0x27b95b=_0x3c0625[_0x139368(0x1e9)][_0x139368(0x1d9)](_0xab23e3=>_0xab23e3[_0x139368(0x233)]==_0x50fe3d[_0x139368(0x233)]),_0x27b95b&&(_0x267c76=_0x27b95b[_0x139368(0x11f)],_0x301c81=_0x27b95b['price']));});let _0x14b9da=dbCoinResults[_0xe6e6c8(0x211)]('coins')['find']({'coin':_0x50fe3d[_0xe6e6c8(0x233)]})[_0xe6e6c8(0x260)]();if(!_0x14b9da){const _0x4f39a3={'coin':_0x50fe3d['coin'],'number':_0x267c76,'breakeven':_0x301c81,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0xe6e6c8(0x1b2))[_0xe6e6c8(0x104)](_0x4f39a3)[_0xe6e6c8(0x1cd)]();}else{if(_0x42b611&&_0x50fe3d[_0xe6e6c8(0x233)]==_0x42b611){const _0x2a2497={'coin':_0x50fe3d[_0xe6e6c8(0x233)],'number':_0x267c76,'breakeven':_0x301c81,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0xe6e6c8(0x211)]('coins')[_0xe6e6c8(0x1d9)]({'coin':_0x50fe3d[_0xe6e6c8(0x233)]})['assign'](_0x2a2497)[_0xe6e6c8(0x1cd)]();}}}});}async function updateCoinResults(_0x162c21,_0x2671e1=![]){const _0x4c7da2=_0x25790c;let _0x4c12a3,_0x535ed5,_0x1902d6,_0x3edf81,_0x3fc060,_0x54d13a,_0x2b807f=dbCoinResults[_0x4c7da2(0x211)](_0x4c7da2(0x1b2))[_0x4c7da2(0x1d9)]({'coin':_0x162c21['coin']})['value'](),_0x57d53c=![];_0x2b807f&&Object[_0x4c7da2(0x124)](_0x2b807f)[_0x4c7da2(0x218)](([_0x13780f,_0x38ad5e])=>{if(_0x38ad5e==null)_0x57d53c=!![];});(!_0x2b807f||_0x57d53c)&&(await initCoinResults(_0x162c21['coin']),_0x2b807f=dbCoinResults[_0x4c7da2(0x211)](_0x4c7da2(0x1b2))[_0x4c7da2(0x1d9)]({'coin':_0x162c21[_0x4c7da2(0x233)]})[_0x4c7da2(0x260)]());_0x162c21[_0x4c7da2(0x14d)]&&(_0x54d13a={'filled':_0x162c21[_0x4c7da2(0x1db)]*_0x162c21[_0x4c7da2(0x134)],'amount':_0x162c21[_0x4c7da2(0x1db)]*_0x162c21[_0x4c7da2(0x134)],'side':_0x162c21['side']==_0x4c7da2(0x1be)?_0x4c7da2(0x18b):_0x4c7da2(0x1be),'price':0x1/_0x162c21[_0x4c7da2(0x134)]},_0x162c21={..._0x162c21,..._0x54d13a});_0x2671e1?_0x535ed5=_0x162c21[_0x4c7da2(0x242)]=='buy'?_0x2b807f['number']+_0x162c21[_0x4c7da2(0x1db)]:_0x2b807f[_0x4c7da2(0x11f)]-_0x162c21[_0x4c7da2(0x1db)]:_0x535ed5=await getCoinNumber(_0x162c21[_0x4c7da2(0x233)]);if(_0x162c21['fee']&&_0x162c21[_0x4c7da2(0x101)]['currency']==config[_0x4c7da2(0x199)])_0x4c12a3=_0x162c21[_0x4c7da2(0x101)][_0x4c7da2(0x28e)];else{if(_0x162c21[_0x4c7da2(0x101)]&&_0x162c21['fee'][_0x4c7da2(0x292)]==_0x4c7da2(0x197)&&!_0x2671e1&&config[_0x4c7da2(0x199)]!=_0x4c7da2(0x15c))_0x4c12a3=_0x162c21[_0x4c7da2(0x101)][_0x4c7da2(0x28e)]*global[_0x4c7da2(0x224)]['BNB'+config[_0x4c7da2(0x199)]];else _0x4c12a3=defaultFee*_0x162c21[_0x4c7da2(0x1db)]*_0x162c21['price'];}_0x162c21[_0x4c7da2(0x242)]=='buy'?(_0x1902d6=_0x535ed5!=0x0?(_0x2b807f['breakeven']*_0x2b807f[_0x4c7da2(0x11f)]+_0x162c21[_0x4c7da2(0x134)]*(_0x535ed5-_0x2b807f[_0x4c7da2(0x11f)])+_0x4c12a3)/_0x535ed5:0x0,_0x3edf81=_0x2b807f[_0x4c7da2(0x170)]):(_0x1902d6=_0x535ed5!=0x0?(_0x2b807f[_0x4c7da2(0x26c)]*_0x2b807f[_0x4c7da2(0x11f)]-_0x162c21[_0x4c7da2(0x134)]*(_0x2b807f[_0x4c7da2(0x11f)]-_0x535ed5)+_0x4c12a3)/_0x535ed5:0x0,_0x3edf81=_0x2b807f[_0x4c7da2(0x170)]+(_0x162c21['price']-_0x2b807f[_0x4c7da2(0x26c)])*_0x162c21[_0x4c7da2(0x1db)]);_0x3fc060=(_0x162c21[_0x4c7da2(0x134)]-_0x1902d6-_0x4c12a3/_0x162c21[_0x4c7da2(0x1db)])*_0x535ed5;let _0xaba1b={'coin':_0x162c21[_0x4c7da2(0x233)],'number':_0x535ed5,'breakeven':formatResult(_0x1902d6,0x8),'realized':formatResult(_0x3edf81,0x8),'unrealized':formatResult(_0x3fc060,0x8),'fees':formatResult(_0x2b807f[_0x4c7da2(0x195)]+_0x4c12a3,0x8),'sells':_0x162c21[_0x4c7da2(0x242)]=='sell'?_0x2b807f[_0x4c7da2(0x1a8)]+0x1:_0x2b807f[_0x4c7da2(0x1a8)],'buys':_0x162c21[_0x4c7da2(0x242)]==_0x4c7da2(0x18b)?_0x2b807f[_0x4c7da2(0x257)]+0x1:_0x2b807f[_0x4c7da2(0x257)]};dbCoinResults[_0x4c7da2(0x211)](_0x4c7da2(0x1b2))[_0x4c7da2(0x1d9)]({'coin':_0x162c21[_0x4c7da2(0x233)]})[_0x4c7da2(0x23d)](_0xaba1b)['write']();if(!_0x2671e1){if(_0x162c21['fee']&&_0x162c21[_0x4c7da2(0x101)][_0x4c7da2(0x292)]==_0x4c7da2(0x197)){const _0x21fde5=currentCoins['find'](_0xd1022=>_0xd1022['coin']==_0x4c7da2(0x197));if(_0x21fde5){let _0x26a3e6=dbCoinResults[_0x4c7da2(0x211)]('coins')[_0x4c7da2(0x1d9)]({'coin':_0x4c7da2(0x197)})[_0x4c7da2(0x260)]();_0xaba1b={..._0x26a3e6,'number':_0x21fde5[_0x4c7da2(0x11f)]},dbCoinResults[_0x4c7da2(0x211)]('coins')[_0x4c7da2(0x1d9)]({'coin':'BNB'})[_0x4c7da2(0x23d)](_0xaba1b)[_0x4c7da2(0x1cd)]();}}}}async function placeOrder(_0x12a278){const _0x3bc797=_0x25790c,_0xd473cd=config['ordertype']==_0x3bc797(0x1d5)?_0x3bc797(0x1d5):_0x3bc797(0x22b);if(lockOrders==ORDERS[_0x3bc797(0x100)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS['LOCKED'],allOrdersPlaced=![],validateOrdersState=_0x3bc797(0x28d);let _0x5ec3c9=![];lastOrders=[];for(const _0x567066 of _0x12a278){let _0xbfeec2,_0x21a377,_0xdad2e9,_0x154e44,_0x2cf0ec,_0x26fee7=_0x567066['symbol'];try{const _0x4c8864=await exchange[_0x3bc797(0x183)](_0x26fee7);_0xbfeec2=_0x567066[_0x3bc797(0x14d)]?0x1/_0x567066[_0x3bc797(0x192)]:_0x567066['last'],_0x21a377=_0x4c8864['bid'],_0xdad2e9=_0x4c8864[_0x3bc797(0x13a)];_0x567066['reverse']?(_0x154e44=_0x567066[_0x3bc797(0x242)]==_0x3bc797(0x18b)?_0x3bc797(0x1be):_0x3bc797(0x18b),_0x2cf0ec=Math['abs'](_0x567066['trade'])/_0xbfeec2):(_0x154e44=_0x567066[_0x3bc797(0x242)],_0x2cf0ec=Math[_0x3bc797(0x1de)](_0x567066[_0x3bc797(0x155)]));_0xd473cd==_0x3bc797(0x22b)&&(config[_0x3bc797(0x16e)]==_0x3bc797(0x272)&&(_0xbfeec2=_0x154e44=='buy'?_0x21a377:_0xdad2e9),config[_0x3bc797(0x16e)]==_0x3bc797(0x1ed)&&(_0xbfeec2=_0x154e44==_0x3bc797(0x18b)?_0xdad2e9:_0x21a377));_0x2cf0ec=formatResult(_0x2cf0ec,0x8),_0xbfeec2=formatResult(_0xbfeec2,0x8);const _0x3dcebe=_0x154e44==_0x3bc797(0x1be)?config['emojisell']?String[_0x3bc797(0x162)]('0x'+config[_0x3bc797(0x204)])+'\x20':'':config[_0x3bc797(0x1c0)]?String[_0x3bc797(0x162)]('0x'+config[_0x3bc797(0x1c0)])+'\x20':'',_0x2c43f9=_0xd473cd==_0x3bc797(0x1d5)?_0x3bc797(0x115):config[_0x3bc797(0x16e)]==_0x3bc797(0x272)?'Limit\x20(high-margin)':_0x3bc797(0x1ff),_0x4083e9=(Math[_0x3bc797(0x281)](Math[_0x3bc797(0x235)]()*0x35a4e900)+0x5f5e100)[_0x3bc797(0x226)]();lastOrders[_0x3bc797(0x104)]({'customId':_0x4083e9,'symbol':_0x26fee7,'coin':_0x567066[_0x3bc797(0x233)],'amount':_0x2cf0ec,'price':_0xbfeec2,'side':_0x154e44,'reverse':_0x567066[_0x3bc797(0x14d)],'filled':0x0});if(_0xd473cd==_0x3bc797(0x1d5))logHistory(_0x3bc797(0x249),''+_0x3dcebe+_0x2c43f9+_0x3bc797(0x1fe)+_0x26fee7+'\x20'+_0x154e44+'\x20#'+formatResult(_0x2cf0ec,0x8)+'\x20@'+formatResult(_0xbfeec2,0x8));else logHistory(_0x3bc797(0x249),''+_0x3dcebe+_0x2c43f9+_0x3bc797(0x1fe)+_0x26fee7+'\x20'+_0x154e44+'\x20#'+formatResult(_0x2cf0ec,0x8)+'\x20@'+formatResult(_0xbfeec2,0x8));let _0x47ef12;_0xd473cd=='market'?_0x154e44==_0x3bc797(0x18b)&&[_0x3bc797(0x11b),_0x3bc797(0x121),_0x3bc797(0x139),_0x3bc797(0x1b4),'Huobipro'][_0x3bc797(0x297)](config[_0x3bc797(0x27d)])?_0x47ef12=await exchange[_0x3bc797(0x200)](_0x26fee7,_0xd473cd,_0x154e44,_0x2cf0ec,_0xbfeec2):_0x47ef12=await exchange['createOrder'](_0x26fee7,_0xd473cd,_0x154e44,_0x2cf0ec,undefined):_0x47ef12=await exchange['createOrder'](_0x26fee7,_0xd473cd,_0x154e44,_0x2cf0ec,_0xbfeec2);logger[_0x3bc797(0x22a)]('ID:\x20'+_0x47ef12['id']+_0x3bc797(0x1df)+_0x4083e9);const _0x53cb84=lastOrders[_0x3bc797(0x10c)]-0x1;if(_0x53cb84>=0x0&&lastOrders[_0x53cb84]['customId']==_0x4083e9){lastOrders[_0x53cb84][_0x3bc797(0x12a)]=_0x47ef12['id'];if(_0x47ef12[_0x3bc797(0x229)])lastOrders[_0x53cb84]['amount']=_0x47ef12[_0x3bc797(0x229)];if(_0x47ef12[_0x3bc797(0x134)])lastOrders[_0x53cb84][_0x3bc797(0x134)]=_0x47ef12[_0x3bc797(0x134)];lastOrders[_0x53cb84][_0x3bc797(0x101)]=_0x47ef12[_0x3bc797(0x101)];}if(config['cooldown']!=0x0){let _0x3f1dfc=null;if(cooldownTracker['length']==config[_0x3bc797(0x13b)]-0x1)_0x3f1dfc=cooldownTracker[_0x3bc797(0x145)]();const _0x5bd345=getTimeStamp();cooldownTracker['push'](_0x5bd345);if(_0x3f1dfc){const _0x1e1231=fns[_0x3bc797(0x16b)](new Date(_0x5bd345),new Date(_0x3f1dfc));if(_0x1e1231<cooldownInterval){logHistory('error',_0x3bc797(0x1b1)+config[_0x3bc797(0x13b)]+_0x3bc797(0x234)+cooldownInterval/0x3c+_0x3bc797(0x130)+cooldownPeriod/(0xe10*0x3e8)+_0x3bc797(0x1d0)),coolingDown=!![];break;}}}}catch(_0x67ccc1){if(_0x67ccc1['toString']()[_0x3bc797(0x297)]('MIN_NOTIONAL'))lastOrders=lastOrders['filter'](_0x15120c=>_0x15120c[_0x3bc797(0x23c)]!=_0x26fee7),logHistory(_0x3bc797(0x29b),_0x3bc797(0x133)+_0x26fee7),_0x5ec3c9=!![];else{if(_0x67ccc1[_0x3bc797(0x226)]()[_0x3bc797(0x297)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x3bc797(0x189)](_0x3c4090=>_0x3c4090[_0x3bc797(0x23c)]!=_0x26fee7),logHistory(_0x3bc797(0x29b),_0x3bc797(0x156)+_0x26fee7),_0x5ec3c9=!![];else{if(_0x67ccc1['toString']()[_0x3bc797(0x297)](_0x3bc797(0x202)))lastOrders=lastOrders[_0x3bc797(0x189)](_0x2df91f=>_0x2df91f['symbol']!=_0x26fee7),logHistory('error',_0x3bc797(0x1a3)+_0x26fee7),logger[_0x3bc797(0x22a)](_0x67ccc1),_0x5ec3c9=!![];else _0x67ccc1[_0x3bc797(0x226)]()[_0x3bc797(0x297)](_0x3bc797(0x11a))?(lastOrders=lastOrders[_0x3bc797(0x189)](_0x41abd2=>_0x41abd2[_0x3bc797(0x23c)]!=_0x26fee7),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x26fee7),_0x5ec3c9=!![]):(lastOrders=lastOrders[_0x3bc797(0x189)](_0x56cc8e=>_0x56cc8e['symbol']!=_0x26fee7),await handleError(_0x67ccc1,'placeOrder()',_0x26fee7));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3bc797(0x10c)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x207b72=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x207b72);}else unlockOrders();_0x5ec3c9&&config['headless']&&(logHistory(_0x3bc797(0x29b),_0x3bc797(0x132)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3bc797(0x22d)));}else{if(coolingDown)!config[_0x3bc797(0x25e)]&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x3bc797(0x25e)]&&(config[_0x3bc797(0x16e)]==_0x3bc797(0x1d5)?logHistory(_0x3bc797(0x29b),_0x3bc797(0x1a1)):logHistory(_0x3bc797(0x29b),_0x3bc797(0x141))));}}function persistOpenOrders(_0x35be5f){const _0x2c0b15=_0x25790c,_0xc5b6e9={...config,'openOrders':_0x35be5f};let _0x33416b=dbConfig[_0x2c0b15(0x211)](_0x2c0b15(0x10f))['find']({'botID':botID})[_0x2c0b15(0x260)]();_0x33416b&&dbConfig[_0x2c0b15(0x211)]('bot')['find']({'botID':botID})['assign'](_0xc5b6e9)[_0x2c0b15(0x1cd)]();}function restoreOrders(){const _0x33f55c=_0x25790c;let _0x35a29e;config[_0x33f55c(0x1d3)]&&allOpenOrders[_0x33f55c(0x218)](_0x224363=>{const _0x254b0a=_0x33f55c,_0x5331b9=config['openOrders'][_0x254b0a(0x1d9)](_0x4decb2=>_0x4decb2[_0x254b0a(0x12a)]==_0x224363['id']);_0x5331b9&&(lastOrders['push'](_0x5331b9),_0x35a29e=_0x224363[_0x254b0a(0x246)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x33f55c(0x179)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x307d36=new Date()[_0x33f55c(0x110)](),_0x5558f6=config['ordertype']==_0x33f55c(0x1d5)?validateOrderTimeout*0x3c*0x3e8:config[_0x33f55c(0x1a4)]*0x3c*0x3e8;if(_0x35a29e+_0x5558f6>_0x307d36){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x3ed445=_0x33f55c;validateOrders(_0x3ed445(0x13e));},_0x35a29e+_0x5558f6-_0x307d36);}else validateOrders(_0x33f55c(0x13e));}}async function sendMetricsTelegram(){const _0x4f7e15=_0x25790c;if(!coinsLoaded){process['send']({'telegrammsg':_0x4f7e15(0x129)},_0x4c583f=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x48a9a7='';if(config['showname'])_0x48a9a7=_0x4f7e15(0x25b)+config[_0x4f7e15(0x1b6)]+_0x4f7e15(0x147);else _0x48a9a7=_0x4f7e15(0x21f)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x6f8207=getKPIs(_0x4f7e15(0x199)),_0x4dfbfb=getKPIs(_0x4f7e15(0x18d),config['fiat']),_0x1ed751=getKPIs(_0x4f7e15(0x1cc)),_0x4b334c=getKPIs(_0x4f7e15(0x1ab),config[_0x4f7e15(0x18d)]);_0x48a9a7+=_0x4f7e15(0xff),_0x48a9a7+=_0x6f8207[_0x4f7e15(0x1eb)]+'\x20:\x20'+_0x6f8207[_0x4f7e15(0x260)]+'\x0a',_0x48a9a7+=_0x6f8207[_0x4f7e15(0x27e)]+':\x20'+_0x6f8207[_0x4f7e15(0x236)]+'%\x0a',_0x48a9a7+=_0x4dfbfb[_0x4f7e15(0x1eb)]+_0x4f7e15(0x194)+_0x4dfbfb['value']+'\x0a',_0x48a9a7+=_0x4dfbfb['rightTxt']+':\x20'+_0x4dfbfb[_0x4f7e15(0x236)]+'%\x0a',_0x48a9a7+=_0x1ed751[_0x4f7e15(0x1eb)]+':\x20'+_0x1ed751[_0x4f7e15(0x260)]+'\x20('+config['basecoin']+')\x0a',_0x48a9a7+=_0x1ed751[_0x4f7e15(0x27e)]+':\x20'+_0x1ed751[_0x4f7e15(0x236)]+_0x4f7e15(0x24c)+config[_0x4f7e15(0x199)]+')\x0a',_0x48a9a7+=_0x4b334c['leftTxt']+':\x20'+_0x4b334c[_0x4f7e15(0x260)]+'\x20('+config['fiat']+')\x0a',_0x48a9a7+=_0x4b334c['rightTxt']+':\x20'+_0x4b334c['change']+_0x4f7e15(0x24c)+config['fiat']+')\x0a',_0x48a9a7+=_0x4f7e15(0xfd),process[_0x4f7e15(0x18f)]({'telegrammsg':_0x48a9a7},_0x2e09ad=>{});}async function sendPortfolioTelegram(){const _0x20824d=_0x25790c;if(!coinsLoaded){process[_0x20824d(0x18f)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x30e02d=>{});return;}let _0x1561f4='';if(config['showname'])_0x1561f4=_0x20824d(0x25b)+config[_0x20824d(0x1b6)]+'\x20portfolio:</b>\x20\x0a\x0a';else _0x1561f4=_0x20824d(0x21f)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x1561f4+=_0x20824d(0xff),_0x1561f4+=_0x20824d(0x247),_0x1561f4+=_0x20824d(0x286),_0x1561f4+=_0x20824d(0x247),currentCoins[_0x20824d(0x218)](_0x2fbd68=>{const _0x3c0edf=_0x20824d;_0x1561f4+=_0x2fbd68[_0x3c0edf(0x233)][_0x3c0edf(0x18c)](0x7)+'|\x20'+formatPad(_0x2fbd68['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x2fbd68[_0x3c0edf(0x1ad)],0x2,0x6)+'|\x20'+formatPad(_0x2fbd68[_0x3c0edf(0x1d2)]*0x64,0x2,0x6)+'\x0a';}),_0x1561f4+='</pre>',process[_0x20824d(0x18f)]({'telegrammsg':_0x1561f4},_0x20c86c=>{});}function formatPad(_0x2cae06,_0x4ffa95,_0xb063ae){const _0x6deada=_0x25790c,_0x4da15b=formatResultString(_0x2cae06,_0x4ffa95);return _0x4da15b?_0x4da15b[_0x6deada(0x167)](_0xb063ae):''['padStart'](_0xb063ae);}function logHistory(_0x16cf0c,_0x57267c,_0xd6551b=''){const _0x4db1b3=_0x25790c;logger[_0x4db1b3(0x251)](''+_0x57267c);let _0x49b907={'time':getTimeStamp(),'type':_0x16cf0c,'event':_0x57267c};dbLogs[_0x4db1b3(0x211)]('logs')[_0x4db1b3(0x104)](_0x49b907)[_0x4db1b3(0x1cd)]();if(_0xd6551b=='')_0xd6551b=_0x57267c;proxyEmit(_0x4db1b3(0x1c5),{'log':_0x49b907,'summary':_0xd6551b}),process[_0x4db1b3(0x18f)]({'telegram':{..._0x49b907,'botname':config[_0x4db1b3(0x1b6)],'showname':config[_0x4db1b3(0x201)]}},_0x4cb65f=>{});}function emitHistory(_0x337cf7={}){const _0x4e2edd=_0x25790c;Object[_0x4e2edd(0x1cb)](_0x337cf7)['length']==0x0&&(_0x337cf7={'type':[_0x4e2edd(0x249),_0x4e2edd(0x1c5)],'event':'','page':0x1});if(_0x337cf7[_0x4e2edd(0x10d)]['includes'](_0x4e2edd(0x1c5)))_0x337cf7[_0x4e2edd(0x10d)][_0x4e2edd(0x108)](_0x337cf7[_0x4e2edd(0x10d)][_0x4e2edd(0x28a)](_0x4e2edd(0x1c5)),0x1,_0x4e2edd(0x29b),_0x4e2edd(0x10b),_0x4e2edd(0x117));if(dbLogs['has']('logs')[_0x4e2edd(0x260)]()){let _0x23271c=dbLogs[_0x4e2edd(0x211)]('logs')['filter'](_0x5604de=>{const _0x20a89e=_0x4e2edd;if(_0x337cf7[_0x20a89e(0x10d)][_0x20a89e(0x10c)]==0x0)return![];else return _0x337cf7['type'][_0x20a89e(0x297)](_0x5604de['type']);})['filter'](_0x11b42e=>{const _0x1dcbc8=_0x4e2edd;if(_0x337cf7[_0x1dcbc8(0x1c5)]=='')return!![];else return _0x11b42e[_0x1dcbc8(0x1c5)][_0x1dcbc8(0x212)]()[_0x1dcbc8(0x297)](_0x337cf7[_0x1dcbc8(0x1c5)][_0x1dcbc8(0x212)]());})[_0x4e2edd(0x15d)]('time'),_0x169bfe=_0x23271c[_0x4e2edd(0x260)]()[_0x4e2edd(0x10c)];_0x23271c=_0x23271c[_0x4e2edd(0x14d)]()[_0x4e2edd(0x150)]((_0x337cf7[_0x4e2edd(0x14b)]-0x1)*logPageSize,_0x337cf7[_0x4e2edd(0x14b)]*logPageSize-0x1)['reverse']()[_0x4e2edd(0x260)](),proxyEmit('event-history',{'logs':_0x23271c,'total':_0x169bfe});}else proxyEmit(_0x4e2edd(0x1b5),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x466f27){const _0x487446=_0x25790c;if(dbLogs[_0x487446(0x27c)]('logs')[_0x487446(0x260)]()){const _0x4e0895=dbLogs[_0x487446(0x211)](_0x487446(0x1ac))['sortBy'](_0x487446(0x1b7))[_0x487446(0x189)](_0x303db9=>{const _0x3a107f=_0x487446;return _0x303db9[_0x3a107f(0x10d)]==_0x3a107f(0x249);})['value']();dbLogs[_0x487446(0x211)]('logs')['remove']()['write'](),dbLogs[_0x487446(0x211)](_0x487446(0x1ac))[_0x487446(0x23d)](_0x4e0895)[_0x487446(0x1cd)](),emitHistory(_0x466f27);}}async function pauseBot(_0x599951=pauseBotInterval){const _0x32b924=_0x25790c,_0x1a22c9=new Date()[_0x32b924(0x110)]();if(!lastErrorShown||_0x1a22c9-lastErrorShown>=_0x599951){lastErrorShown=_0x1a22c9;!lastBotPause?(lastBotPause=_0x1a22c9,consecutivePauses=0x1):(_0x1a22c9-lastBotPause-_0x599951<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x32b924(0x18f)]({'stop':_0x32b924(0x16a)},_0x589810=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x599951),botPaused=![],reset(!![]);}}}async function killBot(){const _0x5e6cbc=_0x25790c;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x5e6cbc(0x1c9)},_0x597356=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x1dabac,_0x267107){const _0x7f639b=_0x25790c;if(botPaused)return;const _0x3477ac=config[_0x7f639b(0x27d)]||_0x7f639b(0x268);if(_0x267107)logger['debug']('Exception\x20thrown\x20in\x20'+_0x267107);const _0x47badc=()=>{loading['error']=!![],emitLoadingProgress();};if(_0x1dabac['toString']()['includes'](_0x7f639b(0x15f)))logHistory(_0x7f639b(0x29b),_0x3477ac+_0x7f639b(0x190)),_0x47badc();else{if(_0x1dabac[_0x7f639b(0x226)]()['includes']('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x7f639b(0x29b),_0x3477ac+'\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid'),_0x47badc();else _0x1dabac[_0x7f639b(0x226)]()[_0x7f639b(0x297)]('AuthenticationError')?(logHistory(_0x7f639b(0x29b),_0x3477ac+_0x7f639b(0x217)),logHistory(_0x7f639b(0x29b),_0x7f639b(0x149)),_0x47badc()):await handleError(_0x1dabac,null);}}async function handleError(_0x5054af,_0x20675a,_0x4b3604=''){const _0x58f4d5=_0x25790c;if(botPaused)return;const _0xe4445f=config[_0x58f4d5(0x27d)]||_0x58f4d5(0x268);if(_0x20675a)logger['debug'](_0x58f4d5(0x159)+_0x20675a);if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)]('DDoSProtection'))logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x12d)+pauseBotMsg),logger[_0x58f4d5(0x22a)]('Error\x20details:',_0x5054af),await pauseBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)](_0x58f4d5(0x295)))logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x127)+pauseBotMsg),logger['debug']('Error\x20details:',_0x5054af),await pauseBot();else{if(_0x5054af['toString']()[_0x58f4d5(0x297)](_0x58f4d5(0x1e6))||_0x5054af[_0x58f4d5(0x226)]()['includes']('OnMaintenance'))logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x25f)+pauseBotMsg),await pauseBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)]('RequestTimeout'))logHistory('error',_0xe4445f+_0x58f4d5(0x19f)+pauseBotMsg),await pauseBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)](_0x58f4d5(0x19c)))logHistory('error',_0xe4445f+_0x58f4d5(0x207)+pauseBotMsg),await pauseBot();else{if(_0x5054af['toString']()['toLowerCase']()[_0x58f4d5(0x297)](_0x58f4d5(0x246))||_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x212)]()['includes'](_0x58f4d5(0x1bc)))logHistory('error','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20hodlerhacks.com/fix#clock-sync'+pauseBotMsg),logger['debug']('Error\x20details:',_0x5054af[_0x58f4d5(0x226)]()),await pauseBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)](_0x58f4d5(0x263)))logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x20d)+pauseBotMsg),logger[_0x58f4d5(0x22a)](_0x58f4d5(0x111),_0x5054af),await pauseBot();else{if(_0x5054af instanceof ccxt[_0x58f4d5(0x259)])logHistory('error',_0xe4445f+'\x20network\x20error'+pauseBotMsg),logger[_0x58f4d5(0x22a)](_0x58f4d5(0x111),_0x5054af),await pauseBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)](_0x58f4d5(0x15f)))logHistory('error',_0xe4445f+_0x58f4d5(0x227)),logHistory(_0x58f4d5(0x29b),_0x58f4d5(0x1a6)),await killBot();else{if(_0x5054af[_0x58f4d5(0x226)]()[_0x58f4d5(0x297)](_0x58f4d5(0x19d)))logHistory('error',_0xe4445f+_0x58f4d5(0x13c)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid'),await killBot();else{if(_0x5054af['toString']()[_0x58f4d5(0x297)](_0x58f4d5(0x198)))logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x185)),logHistory('error',_0x58f4d5(0x1a6)),await killBot();else{if(_0x5054af[_0x58f4d5(0x226)]()['includes'](_0x58f4d5(0x280)))logHistory('error',_0xe4445f+_0x58f4d5(0x255)),logHistory(_0x58f4d5(0x29b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix#api-invalid'),await killBot();else{if(_0x5054af[_0x58f4d5(0x226)]()['includes']('InsufficientFunds'))logHistory(_0x58f4d5(0x29b),_0x58f4d5(0x153)+_0x4b3604);else _0x5054af instanceof ccxt[_0x58f4d5(0x119)]?(logHistory(_0x58f4d5(0x29b),_0xe4445f+_0x58f4d5(0x176)),logger[_0x58f4d5(0x22a)](_0x58f4d5(0x111),_0x5054af)):(logHistory(_0x58f4d5(0x29b),_0x58f4d5(0x1ce)+pauseBotMsg),logger['debug'](_0x58f4d5(0x111),_0x5054af),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x2dde63,_0x2b3967){const _0x644411=_0x25790c;return parseFloat(_0x2dde63[_0x644411(0x17b)](_0x2b3967));}function formatResultTruncate(_0x3aa09e,_0x4f64c4){let _0x3c5f4e=formatResultString(_0x3aa09e,0xa),_0x354466=_0x3c5f4e['indexOf']('.');return _0x354466!=-0x1&&(_0x3c5f4e=_0x3c5f4e['slice'](0x0,_0x354466+_0x4f64c4+0x1)),Number(_0x3c5f4e);}function formatResultString(_0x238d7b,_0x13bea0){const _0x57353a=_0x25790c;let _0x9f7c95;if(!(''+_0x238d7b)[_0x57353a(0x297)]('e'))_0x9f7c95=+(Math[_0x57353a(0x1e8)](_0x238d7b+'e+'+_0x13bea0)+'e-'+_0x13bea0);else{let _0x45e95e=(''+_0x238d7b)[_0x57353a(0x253)]('e'),_0x5c225b='';+_0x45e95e[0x1]+_0x13bea0>0x0&&(_0x5c225b='+'),_0x9f7c95=+(Math['round'](+_0x45e95e[0x0]+'e'+_0x5c225b+(+_0x45e95e[0x1]+_0x13bea0))+'e-'+_0x13bea0);}return Number(_0x9f7c95)[_0x57353a(0x17b)](_0x13bea0);}function getServerTime(){const _0x4ce8c1=_0x25790c,_0x252513=new Date();return _0x252513[_0x4ce8c1(0x1e1)]()+'/'+(_0x252513[_0x4ce8c1(0x137)]()+0x1)[_0x4ce8c1(0x226)]()[_0x4ce8c1(0x167)](0x2,'0')+'/'+_0x252513[_0x4ce8c1(0x128)]()[_0x4ce8c1(0x226)]()[_0x4ce8c1(0x167)](0x2,'0')+'\x20'+_0x252513['getHours']()[_0x4ce8c1(0x226)]()[_0x4ce8c1(0x167)](0x2,'0')+':'+_0x252513[_0x4ce8c1(0x244)]()['toString']()[_0x4ce8c1(0x167)](0x2,'0')+':'+_0x252513[_0x4ce8c1(0x277)]()[_0x4ce8c1(0x226)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x7f76a5=_0x25790c,_0x34310a=shiftedTime();return _0x34310a[_0x7f76a5(0x1e1)]()+'/'+(_0x34310a['getMonth']()+0x1)['toString']()[_0x7f76a5(0x167)](0x2,'0')+'/'+_0x34310a[_0x7f76a5(0x128)]()[_0x7f76a5(0x226)]()['padStart'](0x2,'0')+'\x20'+_0x34310a[_0x7f76a5(0x228)]()[_0x7f76a5(0x226)]()[_0x7f76a5(0x167)](0x2,'0')+':'+_0x34310a[_0x7f76a5(0x244)]()[_0x7f76a5(0x226)]()['padStart'](0x2,'0')+':'+_0x34310a[_0x7f76a5(0x277)]()[_0x7f76a5(0x226)]()[_0x7f76a5(0x167)](0x2,'0');}function getDate(){const _0x5612ce=_0x25790c,_0x5a7b16=shiftedTime();return _0x5a7b16[_0x5612ce(0x1e1)]()+'/'+(_0x5a7b16[_0x5612ce(0x137)]()+0x1)[_0x5612ce(0x226)]()[_0x5612ce(0x167)](0x2,'0')+'/'+_0x5a7b16[_0x5612ce(0x128)]()['toString']()[_0x5612ce(0x167)](0x2,'0');}function getHour(){const _0x3181c5=_0x25790c,_0x3cb1ed=shiftedTime();return _0x3cb1ed[_0x3181c5(0x228)]()['toString']()[_0x3181c5(0x167)](0x2,'0');}function sleep(_0x21ee71){return new Promise(_0x33b13d=>setTimeout(_0x33b13d,_0x21ee71));}function shiftedTime(){const _0x31f863=_0x25790c,_0x42b688=new Date();let _0x774362=_0x42b688;if(config&&config[_0x31f863(0x298)]!==0x0)_0x774362=fns[_0x31f863(0x1a9)](_0x42b688,{'hours':config['timeshift']});return _0x774362;}function timer(_0x42d8fd){const _0x587c39=_0x25790c,_0x2ed7a1=new Date();!lasttime?console[_0x587c39(0x26f)](getTimeStamp()+_0x587c39(0x157),_0x42d8fd,_0x2ed7a1):console[_0x587c39(0x26f)](getTimeStamp()+_0x587c39(0x157),_0x42d8fd,(_0x2ed7a1-lasttime)/0x3e8),lasttime=_0x2ed7a1;}