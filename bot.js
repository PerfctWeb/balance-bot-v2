const _0x33a99e=_0x841b;(function(_0x2ff0b3,_0x1e4ae9){const _0x1e5636=_0x841b,_0x33adc7=_0x2ff0b3();while(!![]){try{const _0x6eb482=-parseInt(_0x1e5636(0x1bb))/0x1*(-parseInt(_0x1e5636(0x2b3))/0x2)+parseInt(_0x1e5636(0x2b8))/0x3*(parseInt(_0x1e5636(0x1e1))/0x4)+-parseInt(_0x1e5636(0x2be))/0x5*(parseInt(_0x1e5636(0x175))/0x6)+parseInt(_0x1e5636(0x2ba))/0x7+-parseInt(_0x1e5636(0x221))/0x8+parseInt(_0x1e5636(0x1be))/0x9*(-parseInt(_0x1e5636(0x198))/0xa)+parseInt(_0x1e5636(0x158))/0xb*(-parseInt(_0x1e5636(0x25d))/0xc);if(_0x6eb482===_0x1e4ae9)break;else _0x33adc7['push'](_0x33adc7['shift']());}catch(_0x2866ab){_0x33adc7['push'](_0x33adc7['shift']());}}}(_0x1ab9,0xf36da));const _0x223b9e=function(){let _0x38eb05=!![];return function(_0xfb82ba,_0x31ea69){const _0x40bc88=_0x38eb05?function(){const _0x2a9abc=_0x841b;if(_0x31ea69){const _0x1c1fff=_0x31ea69[_0x2a9abc(0x2d6)](_0xfb82ba,arguments);return _0x31ea69=null,_0x1c1fff;}}:function(){};return _0x38eb05=![],_0x40bc88;};}(),_0xc8d9f9=_0x223b9e(this,function(){const _0x5eef54=_0x841b;return _0xc8d9f9[_0x5eef54(0x2c6)]()[_0x5eef54(0x2ad)](_0x5eef54(0x1a6))['toString']()[_0x5eef54(0x159)](_0xc8d9f9)[_0x5eef54(0x2ad)](_0x5eef54(0x1a6));});_0xc8d9f9();'use strict';const ccxt=require(_0x33a99e(0x272))[_0x33a99e(0x284)],low=require(_0x33a99e(0x1fa)),FileSync=require(_0x33a99e(0x1d7)),fs=require('fs'),fns=require(_0x33a99e(0x262)),Crypt=require(_0x33a99e(0x2a9))[_0x33a99e(0x22a)],util=require(_0x33a99e(0x208)),argv=require(_0x33a99e(0x2bf))(process['argv']['slice'](0x2))[_0x33a99e(0x1e4)],path=require('path');let exchange;function _0x841b(_0x218f57,_0x17852f){const _0x39edf8=_0x1ab9();return _0x841b=function(_0xc8d9f9,_0x223b9e){_0xc8d9f9=_0xc8d9f9-0x156;let _0x1ab9ff=_0x39edf8[_0xc8d9f9];return _0x1ab9ff;},_0x841b(_0x218f57,_0x17852f);}global[_0x33a99e(0x25e)]={},global['change']={};const usdBasecoins=[_0x33a99e(0x18b),_0x33a99e(0x24b),_0x33a99e(0x24d),_0x33a99e(0x20c),_0x33a99e(0x1ac),_0x33a99e(0x18d)],exceptions={'binance':[_0x33a99e(0x22e),_0x33a99e(0x1f3),_0x33a99e(0x163),_0x33a99e(0x2e4),_0x33a99e(0x200)]},debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x33a99e(0x268)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x33a99e(0x21b)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x33a99e(0x156))[_0x33a99e(0x173)],botID=process[_0x33a99e(0x1e4)][0x2]||'001',pattern=/^[0-9]{3}$/;!pattern[_0x33a99e(0x1e8)](botID)&&(console[_0x33a99e(0x286)](_0x33a99e(0x1d3)+botID+_0x33a99e(0x2e0)),killBot());const userID=process['argv'][0x3]||'',configpath=userID?_0x33a99e(0x215)+userID+'/':_0x33a99e(0x215),logspath=userID?_0x33a99e(0x240)+userID+'/':_0x33a99e(0x240),loggerfile=fs['createWriteStream'](logspath+_0x33a99e(0x1eb),{'flags':'a'});!fs[_0x33a99e(0x1b7)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x33a99e(0x1b7)](logspath)&&fs[_0x33a99e(0x1aa)](logspath);const configfile=configpath+_0x33a99e(0x1ab)+botID+_0x33a99e(0x1ea),logfile=configpath+_0x33a99e(0x1ab)+botID+_0x33a99e(0x24f),performancefile=configpath+_0x33a99e(0x1ab)+botID+_0x33a99e(0x191),coinresultsfile=configpath+_0x33a99e(0x1ab)+botID+_0x33a99e(0x193),settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x33a99e(0x15c),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x33a99e(0x266)]({'logs':[],'version':serverversion})[_0x33a99e(0x26f)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x33a99e(0x26f)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x33a99e(0x1a3),'rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x470d3a=>{const _0x4ae4c4=_0x33a99e;console[_0x4ae4c4(0x286)](_0x470d3a);},'simple':_0xf42bc2=>{const _0x192ba6=_0x33a99e;console[_0x192ba6(0x286)](_0xf42bc2),loggerfile[_0x192ba6(0x26f)](util[_0x192ba6(0x1f6)](_0xf42bc2)+'\x0a');},'full':async(_0x587a76,_0x166131='')=>{const _0x1da688=_0x33a99e;let _0x5232cd;if(config[_0x1da688(0x251)])_0x5232cd=getTimeStamp()+':\x20'+config[_0x1da688(0x1ed)]+_0x1da688(0x1d0)+_0x587a76;else _0x5232cd=getTimeStamp()+':\x20Bot\x20'+botID+_0x1da688(0x1d0)+_0x587a76;console[_0x1da688(0x286)](_0x5232cd),loggerfile[_0x1da688(0x26f)](util[_0x1da688(0x1f6)](_0x5232cd)+'\x0a'),_0x166131&&(console[_0x1da688(0x286)](_0x166131),loggerfile['write'](util[_0x1da688(0x1f6)](_0x166131)+'\x0a'));},'debug':async(_0x2bfd75,_0x46b364='')=>{const _0x39c598=_0x33a99e;let _0x20226d;if(config[_0x39c598(0x251)])_0x20226d=getTimeStamp()+':\x20'+config[_0x39c598(0x1ed)]+_0x39c598(0x2c3)+_0x2bfd75;else _0x20226d=getTimeStamp()+_0x39c598(0x24c)+botID+_0x39c598(0x2c3)+_0x2bfd75;if(debugging)console['log'](_0x20226d);loggerfile[_0x39c598(0x26f)](util[_0x39c598(0x1f6)](_0x20226d)+'\x0a');if(_0x46b364){if(debugging)console[_0x39c598(0x286)](_0x46b364);loggerfile[_0x39c598(0x26f)](util[_0x39c598(0x1f6)](_0x46b364)+'\x0a');}}};process['on'](_0x33a99e(0x190),function(_0x2192e1){const _0x580ca3=_0x33a99e;logger[_0x580ca3(0x29c)]('Uncaught\x20Exception:',_0x2192e1);});settings['timeshift']!=config[_0x33a99e(0x202)]&&updateTimeshift(settings[_0x33a99e(0x202)]);settings[_0x33a99e(0x1ae)]!=config['onepagemode']&&updateOnepagemode(settings[_0x33a99e(0x1ae)]);process[_0x33a99e(0x224)]({'started':'running'},_0x7814f2=>{}),initializeProcessListeners();function proxyEmit(_0x1165aa,_0x9369ec=null){const _0x1ad1d4=_0x33a99e;process[_0x1ad1d4(0x224)]({'function':_0x1165aa,'args':_0x9369ec},_0x413561=>{});}function initializeProcessListeners(){process['on']('message',_0xa4b78f=>{const _0x155be1=_0x841b;switch(Object[_0x155be1(0x2b1)](_0xa4b78f)[0x0]){case _0x155be1(0x202):_0xa4b78f[_0x155be1(0x202)]!=undefined&&(settings['timeshift']=_0xa4b78f[_0x155be1(0x202)],updateTimeshift(settings[_0x155be1(0x202)]));break;case _0x155be1(0x1ae):_0xa4b78f['onepagemode']!=undefined&&(settings[_0x155be1(0x1ae)]=_0xa4b78f['onepagemode'],updateOnepagemode(settings[_0x155be1(0x1ae)]));break;case _0x155be1(0x21f):_0xa4b78f[_0x155be1(0x21f)]!=undefined&&(bots=JSON['parse'](_0xa4b78f[_0x155be1(0x21f)]),proxyEmit(_0x155be1(0x21f),bots));break;case _0x155be1(0x19b):switch(_0xa4b78f[_0x155be1(0x19b)]){case _0x155be1(0x16c):initclient();break;case _0x155be1(0x20f):toggleBotMode();break;case'emitHistory':emitHistory(_0xa4b78f['args']);break;case _0x155be1(0x19a):deleteHistoryAlerts(_0xa4b78f['args']);break;case _0x155be1(0x2a7):getPortfolio(_0xa4b78f['args']);break;case _0x155be1(0x26d):storeConfiguration(_0xa4b78f[_0x155be1(0x2cb)]);break;case _0x155be1(0x276):storeHeadless(_0xa4b78f[_0x155be1(0x2cb)]);break;case _0x155be1(0x231):storeFiat(_0xa4b78f['args']);break;case _0x155be1(0x265):resetHistory();break;case _0x155be1(0x184):getStartingBalances(getNormalizedPerformance());break;case _0x155be1(0x2cc):placeOrder(_0xa4b78f[_0x155be1(0x2cb)]);break;case'cancelLoading':cancelLoading();break;case _0x155be1(0x1a1):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x155be1(0x252):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0x196a25=null,_0x4a24c9=![]){const _0x519edf=_0x33a99e;logger[_0x519edf(0x29c)](_0x519edf(0x28d)+(_0x196a25&&_0x196a25[_0x519edf(0x16a)]>0x0?_0x519edf(0x1a5)+_0x196a25[_0x519edf(0x2c0)](','):_0x519edf(0x19e))+_0x519edf(0x1d4)+(_0x4a24c9?_0x519edf(0x1dd):_0x519edf(0x160))+_0x519edf(0x1f5)+config[_0x519edf(0x293)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4a24c9)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x519edf(0x196)]!=''&&config[_0x519edf(0x196)]!=_0x519edf(0x219)){if(_0x4a24c9){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3f2d86){handleErrorNoStop(_0x3f2d86,'loadSymbols()');return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0x196a25);const _0x389721=await getCoins();[currentCoins,currentCoinsAll]=_0x389721,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x519edf(0x16a)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x467594=_0x33a99e;exchangeStopped=!![],await exchange[_0x467594(0x2c8)]();}async function reloadExchange(){const _0x46956b=_0x33a99e;logger[_0x46956b(0x29c)]('Initiating\x20exchange\x20reload');while(lockOrders!=ORDERS[_0x46956b(0x21b)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x46956b(0x29c)](_0x46956b(0x169)),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x106c8a=config['exchange'],_0x5677d0=config[_0x33a99e(0x196)],_0x1a8c08=config[_0x33a99e(0x19c)],_0x182b2b=config[_0x33a99e(0x1b6)]){const _0x82b9aa=_0x33a99e;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x106c8a)&&(logHistory(_0x82b9aa(0x242),_0x82b9aa(0x16f)+_0x106c8a+_0x82b9aa(0x2e2)),killBot());const _0x3ebc35=ccxt[_0x106c8a['toLowerCase']()];exchange=new _0x3ebc35({'apiKey':_0x5677d0,'secret':_0x1a8c08,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});_0x106c8a==_0x82b9aa(0x167)&&(exchange[_0x82b9aa(0x25c)]={'defaultType':_0x82b9aa(0x171)});if(_0x182b2b)exchange[_0x82b9aa(0x2ae)]=_0x182b2b;}function setStableCoins(){const _0x2e3f63=_0x33a99e;let _0x26c951=config['basecoin']=='ETH'?_0x2e3f63(0x261):_0x2e3f63(0x227),_0x1298ee=!allSymbols[_0x2e3f63(0x1a8)](_0x26c951+_0x2e3f63(0x17f))?_0x2e3f63(0x20c):'USD',_0x5852f6=!allSymbols[_0x2e3f63(0x1a8)](_0x26c951+_0x2e3f63(0x2a6))?_0x1298ee:_0x2e3f63(0x28f);stablecoins={'eur':{'coin':''+_0x26c951+_0x5852f6,'symbol':_0x26c951+'/'+_0x5852f6},'usd':{'coin':''+_0x26c951+_0x1298ee,'symbol':_0x26c951+'/'+_0x1298ee}};}async function initwsCcxt(_0x165b1e){const _0x4e7986=_0x33a99e;_0x165b1e==null&&(_0x165b1e=[],config['portfolio'][_0x4e7986(0x245)](_0x484901=>{const _0x30706f=_0x4e7986;if(!_0x484901[_0x30706f(0x269)]&&_0x484901[_0x30706f(0x1d5)]!=config['basecoin'])_0x165b1e['push'](_0x484901['symbol']);}));if(!_0x165b1e[_0x4e7986(0x1a8)](stablecoins[_0x4e7986(0x15f)][_0x4e7986(0x2e1)]))_0x165b1e[_0x4e7986(0x194)](stablecoins[_0x4e7986(0x15f)]['symbol']);if(!_0x165b1e[_0x4e7986(0x1a8)](stablecoins[_0x4e7986(0x2b6)]['symbol']))_0x165b1e[_0x4e7986(0x194)](stablecoins['usd'][_0x4e7986(0x2e1)]);if(config[_0x4e7986(0x293)]['startsWith'](_0x4e7986(0x1cd))){if(!_0x165b1e[_0x4e7986(0x1a8)](_0x4e7986(0x27c)+config[_0x4e7986(0x1d1)]))_0x165b1e[_0x4e7986(0x194)]('BNB/'+config['basecoin']);}loadCoins(_0x165b1e);const _0x2b084a=async _0x746b6b=>{const _0x55b2b0=_0x4e7986,_0x399b1=await exchange[_0x55b2b0(0x1cb)](_0x746b6b);global[_0x55b2b0(0x25e)][noslash(_0x399b1[_0x55b2b0(0x2e1)])]=_0x399b1[_0x55b2b0(0x22d)];while(!![]){if(!botPaused)try{const _0x437baf=await exchange['watchTrades'](_0x746b6b);global[_0x55b2b0(0x25e)][noslash(_0x437baf[0x0][_0x55b2b0(0x2e1)])]=_0x437baf[0x0]['price'],await sleep(0x3e8);}catch(_0x1fc70e){if(!exchangeStopped)await handleError(_0x1fc70e,_0x55b2b0(0x2c5),_0x746b6b);}else await sleep(0x64);}},_0x264545=async _0x1ec8b9=>{const _0x48126d=_0x4e7986;while(!![]){if(!botPaused)try{const _0x2eb4d0=await exchange[_0x48126d(0x1cb)](_0x1ec8b9);global[_0x48126d(0x2bc)][_0x2eb4d0['symbol']]=_0x2eb4d0['percentage'],await sleep(0x3c*0x3e8);}catch(_0x1e543e){if(!exchangeStopped)await handleError(_0x1e543e,'fetchTickers',_0x1ec8b9);}else await sleep(0x64);}},_0x271879=async()=>{const _0x52f27d=_0x4e7986;while(!![]){if(!botPaused)try{const _0x49dbf0=await exchange[_0x52f27d(0x183)]();_0x49dbf0[_0x52f27d(0x245)](_0x2e27e1=>{updateNumberCoinsCcxt(_0x2e27e1);});}catch(_0x19c145){if(!exchangeStopped)await handleError(_0x19c145,_0x52f27d(0x183));}else await sleep(0x64);}};_0x165b1e[_0x4e7986(0x245)](_0x122b2b=>{_0x2b084a(_0x122b2b),_0x264545(_0x122b2b);}),!wsEventsSet&&(wsEventsSet=!![],_0x271879(),watchTransactions());}async function watchTransactions(){const _0x2b6409=_0x33a99e;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x4d298e=await getCoins(),[_0x1e6cf6,_0x3d5f8f]=_0x4d298e;let _0x22e4d6=[];currentCoins[_0x2b6409(0x245)](_0x428cf9=>{const _0x2cd7ec=_0x2b6409,_0x4c295b=_0x1e6cf6[_0x2cd7ec(0x165)](_0x5f4e96=>_0x5f4e96[_0x2cd7ec(0x1d5)]==_0x428cf9[_0x2cd7ec(0x1d5)]);_0x4c295b&&(_0x428cf9[_0x2cd7ec(0x1c3)]!=_0x4c295b[_0x2cd7ec(0x1c3)]&&_0x22e4d6[_0x2cd7ec(0x194)]({'coin':_0x428cf9[_0x2cd7ec(0x1d5)],'symbol':_0x428cf9[_0x2cd7ec(0x2e1)],'number':Number(formatResult(_0x4c295b['number']-_0x428cf9[_0x2cd7ec(0x1c3)],0x8))}));});if(_0x22e4d6[_0x2b6409(0x16a)]==0x1&&!blockTransactionDetection){if(config['autoliquidity']){logger[_0x2b6409(0x29c)](_0x2b6409(0x229)+lastFees[_0x2b6409(0x1d6)]+_0x2b6409(0x273)+lastFees[_0x2b6409(0x287)]);if(!lastFees['currency']||_0x22e4d6[0x0][_0x2b6409(0x1d5)]!=lastFees[_0x2b6409(0x1d6)]||_0x22e4d6[0x0][_0x2b6409(0x1c3)]>lastFees['highest']){let _0x7fc2fb;if(_0x22e4d6[0x0]['coin']!=config[_0x2b6409(0x1d1)]){let _0x31f2d6=global[_0x2b6409(0x25e)][noslash(_0x22e4d6[0x0][_0x2b6409(0x2e1)])];_0x7fc2fb=_0x22e4d6[0x0][_0x2b6409(0x29e)]?0x1/_0x31f2d6:_0x31f2d6;}else _0x7fc2fb=0x1;_0x22e4d6[0x0][_0x2b6409(0x238)]=_0x7fc2fb,delete _0x22e4d6[0x0][_0x2b6409(0x2e1)];let _0xb3ad65=[],_0x510b5f=[...config[_0x2b6409(0x243)]]||[],_0x2d7b5a=config[_0x2b6409(0x243)];_0x510b5f['sort']((_0x1ebc34,_0x4aca37)=>_0x1ebc34[_0x2b6409(0x1c9)]>_0x4aca37['date']?-0x1:_0x4aca37[_0x2b6409(0x1c9)]>_0x1ebc34[_0x2b6409(0x1c9)]?0x1:0x0);const _0x37cfab=getDate();if(_0x510b5f[0x0]){const _0x85fa38=fns['parse'](_0x510b5f[0x0][_0x2b6409(0x1c9)],_0x2b6409(0x164),new Date()),_0x47e862=fns[_0x2b6409(0x1a0)](_0x37cfab,'yyyy/MM/dd',new Date());if(fns[_0x2b6409(0x1cc)](_0x85fa38,_0x47e862)){_0xb3ad65=_0x510b5f[0x0][_0x2b6409(0x25f)];const _0x45582c=_0xb3ad65[_0x2b6409(0x165)](_0x24aced=>_0x24aced[_0x2b6409(0x1d5)]==_0x22e4d6[0x0]['coin']);_0x45582c?(_0x45582c[_0x2b6409(0x1c3)]+=_0x22e4d6[0x0][_0x2b6409(0x1c3)],_0x45582c[_0x2b6409(0x1c3)]==0x0&&(_0xb3ad65=_0xb3ad65[_0x2b6409(0x1da)](_0x1dd357=>{const _0x563758=_0x2b6409;return _0x1dd357[_0x563758(0x1d5)]!=_0x22e4d6[0x0][_0x563758(0x1d5)];}))):_0xb3ad65[_0x2b6409(0x194)](_0x22e4d6[0x0]);const _0x2eecd2=_0x2d7b5a[_0x2b6409(0x165)](_0x1036cf=>_0x1036cf[_0x2b6409(0x1c9)]==_0x37cfab);_0x2eecd2[_0x2b6409(0x25f)]=_0xb3ad65;}else _0x2d7b5a[_0x2b6409(0x194)]({'date':_0x37cfab,'changes':[_0x22e4d6[0x0]]});}const _0x2568e3=_0x2d7b5a[_0x2b6409(0x165)](_0x419f0f=>_0x419f0f[_0x2b6409(0x1c9)]==_0x37cfab);if(_0x2568e3){let _0x1a8f85=!![];_0x2568e3[_0x2b6409(0x25f)][_0x2b6409(0x245)](_0x33ae00=>{const _0x4919b8=_0x2b6409;if(_0x33ae00[_0x4919b8(0x1c3)]!=0x0)_0x1a8f85=![];}),_0x1a8f85&&(_0x2d7b5a=_0x2d7b5a[_0x2b6409(0x1da)](_0x19efbe=>{const _0x155e3b=_0x2b6409;return _0x19efbe[_0x155e3b(0x1c9)]!=_0x37cfab;}));}let _0xf9eb9=dbConfig[_0x2b6409(0x294)](_0x2b6409(0x27d))[_0x2b6409(0x165)]({'botID':botID})['value']();_0xf9eb9&&(dbConfig[_0x2b6409(0x294)](_0x2b6409(0x27d))['find']({'botID':botID})['assign']({'liquidity':_0x2d7b5a})[_0x2b6409(0x26f)](),config[_0x2b6409(0x243)]=_0x2d7b5a),logHistory(_0x2b6409(0x278),_0x2b6409(0x2ca)+Math['abs'](_0x22e4d6[0x0][_0x2b6409(0x1c3)])+'\x20'+_0x22e4d6[0x0][_0x2b6409(0x1d5)]+'\x20'+(_0x22e4d6[0x0]['number']>0x0?_0x2b6409(0x220):_0x2b6409(0x1b8))+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x2b6409(0x237),emittedConfiguration());}else logger[_0x2b6409(0x29c)](_0x2b6409(0x177)+Math[_0x2b6409(0x22f)](_0x22e4d6[0x0]['number'])+'\x20'+_0x22e4d6[0x0][_0x2b6409(0x1d5)]+'\x20'+(_0x22e4d6[0x0][_0x2b6409(0x1c3)]>0x0?_0x2b6409(0x220):'removed'));transactionDetected=!![],currentCoins=_0x1e6cf6,currentCoinsAll=_0x3d5f8f;}else logger[_0x2b6409(0x29c)]('Portfolio\x20change\x20detected:\x20'+Math[_0x2b6409(0x22f)](_0x22e4d6[0x0][_0x2b6409(0x1c3)])+'\x20'+_0x22e4d6[0x0][_0x2b6409(0x1d5)]+'\x20'+(_0x22e4d6[0x0]['number']>0x0?_0x2b6409(0x220):_0x2b6409(0x1b8))+_0x2b6409(0x249)),currentCoins=_0x1e6cf6,currentCoinsAll=_0x3d5f8f;}await sleep(watchTransactionsInterval);}catch(_0x4c2ae3){if(!exchangeStopped)await handleError(_0x4c2ae3,_0x2b6409(0x24e));}else await sleep(0x64);}}async function loadSymbols(_0x1e7391=config[_0x33a99e(0x293)],_0xc814b0=![]){const _0xa68909=_0x33a99e;if(allSymbols&&!_0xc814b0)return;try{markets=await exchange[_0xa68909(0x2df)](),allSymbols=exchange[_0xa68909(0x2c9)]['filter'](_0x433d88=>{const _0x3b6f1b=_0xa68909;let _0x44d501=![];const _0x172831=exceptions[_0x1e7391['toLowerCase']()]||[];return _0x172831[_0x3b6f1b(0x245)](_0xafad71=>{const _0x506674=_0x3b6f1b;if(_0x433d88[_0x506674(0x1a8)](_0xafad71))_0x44d501=!![];}),!_0x44d501;});}catch(_0x2195ce){throw _0x2195ce;}}async function initclient(){const _0x496369=_0x33a99e;emitLoadingProgress(),proxyEmit(_0x496369(0x237),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x496369(0x275),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x566b62=getNormalizedPerformance();emitPerformance(_0x566b62),getStartingBalances(_0x566b62);}async function toggleBotMode(){const _0x3f7cc4=_0x33a99e;let _0x4c9972=dbConfig[_0x3f7cc4(0x294)]('bot')[_0x3f7cc4(0x165)]({'botID':botID})['value']();if(_0x4c9972){const _0x346ee3=!_0x4c9972[_0x3f7cc4(0x2cd)];dbConfig[_0x3f7cc4(0x294)](_0x3f7cc4(0x27d))[_0x3f7cc4(0x165)]({'botID':botID})['assign']({'headless':_0x346ee3})[_0x3f7cc4(0x26f)](),config[_0x3f7cc4(0x2cd)]=_0x346ee3,proxyEmit(_0x3f7cc4(0x237),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x23c268=_0x33a99e;process[_0x23c268(0x224)]({'updatebotmanager':!![]},_0x250848=>{});}async function loadCoins(_0x18a7be){const _0x262fb5=_0x33a99e;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x8aa7df,_0x1c6ea4=0x0,_0x4385c7=0x0;_0x18a7be[_0x262fb5(0x245)](_0x1ded40=>{const _0x2d91e6=_0x262fb5;loading[_0x2d91e6(0x246)][_0x2d91e6(0x194)](_0x1ded40);}),loadingCanceled=![];let _0x561488=![];while(_0x8aa7df!=_0x18a7be[_0x262fb5(0x16a)]){_0x8aa7df=0x0,_0x18a7be['forEach'](_0x367d89=>{const _0x427852=_0x262fb5;if(global[_0x427852(0x25e)][noslash(_0x367d89)]){loading[_0x427852(0x246)]=loading[_0x427852(0x246)]['filter'](_0x35528a=>_0x35528a!=_0x367d89);if(!watchedSymbols[_0x427852(0x1a8)](_0x367d89))watchedSymbols[_0x427852(0x194)](_0x367d89);_0x8aa7df++;}}),loading[_0x262fb5(0x17a)]=Math['round'](_0x8aa7df/_0x18a7be[_0x262fb5(0x16a)]*0x64);loading['progress']!=0x64&&(_0x4385c7>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x4385c7>0x78*0x5&&!_0x561488&&(loading['cancel']=!![],emitLoadingProgress(),_0x561488=!![],logHistory(_0x262fb5(0x242),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x262fb5(0x246)]['join'](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x262fb5(0x242),_0x262fb5(0x2d8)+loadCoinsRetryInterval/0xea60+_0x262fb5(0x16d)),pidCoinReloading=setTimeout(()=>{const _0x220eea=_0x262fb5;process[_0x220eea(0x224)]({'stop':_0x220eea(0x22b)},_0x1a32ae=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x262fb5(0x2d0)]=!![],emitLoadingProgress();break;}else _0x8aa7df!=_0x1c6ea4&&(_0x1c6ea4=_0x8aa7df,emitLoadingProgress()),_0x4385c7++,await sleep(0xc8);}_0x8aa7df==_0x18a7be['length']&&(coinsLoaded=!![],process[_0x262fb5(0x224)]({'status':_0x262fb5(0x20e),'live':_0x262fb5(0x296)},_0x14b08d=>{}),_0x561488&&logHistory(_0x262fb5(0x278),_0x262fb5(0x1f4)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1007e8=_0x33a99e;proxyEmit(_0x1007e8(0x237),{...emittedConfiguration(),'configstate':_0x1007e8(0x28c)});}function emitLoadingProgress(){const _0x5214e5=_0x33a99e;proxyEmit(_0x5214e5(0x23f),loading);}async function getFiat(){const _0x19eef7=_0x33a99e;let _0x50d475=global[_0x19eef7(0x25e)][stablecoins['eur']['coin']],_0x4e1ae8=global['ticker'][stablecoins[_0x19eef7(0x2b6)][_0x19eef7(0x1d5)]];return{'eur':Number(_0x50d475),'usd':Number(_0x4e1ae8)};}function capitalize(_0x12749c){const _0xf9eec4=_0x33a99e;return _0x12749c['substring'](0x0,0x1)[_0xf9eec4(0x29a)]()+_0x12749c[_0xf9eec4(0x28a)](0x1);}function supportedExchanges(){const _0x155630=_0x33a99e,_0x232e8a=['ws',_0x155630(0x207),_0x155630(0x1cb),_0x155630(0x2c5),'watchOrders',_0x155630(0x274),_0x155630(0x28e),_0x155630(0x2aa),_0x155630(0x233),_0x155630(0x260)];let _0x2dcccb=[],_0x2eb642=[],_0x2936a8=ccxt[_0x155630(0x23e)];_0x2936a8[_0x155630(0x245)](_0x5be947=>{const _0x2eeca7=_0x155630;try{const _0x38cad1=new ccxt[_0x5be947]();if(_0x38cad1[_0x2eeca7(0x1e5)]['ws'])_0x2eb642['push'](_0x38cad1);}catch(_0x23ce46){}}),_0x2eb642[_0x155630(0x245)](_0x53bacb=>{const _0x50faf6=_0x155630;let _0x2781c8=0x0;_0x232e8a[_0x50faf6(0x245)](_0x5178be=>{const _0x55ce49=_0x50faf6;_0x5178be in _0x53bacb['has']&&_0x53bacb[_0x55ce49(0x1e5)][_0x5178be]&&_0x2781c8++;}),_0x2781c8==_0x232e8a['length']&&_0x2dcccb[_0x50faf6(0x194)](capitalize(_0x53bacb['id']));});let _0x3959e3=[];return _0x2936a8[_0x155630(0x245)](_0x55080c=>{const _0x2d32c2=_0x155630;_0x55080c=capitalize(_0x55080c);if(!_0x2dcccb[_0x2d32c2(0x1a8)](_0x55080c))_0x3959e3[_0x2d32c2(0x194)](_0x55080c);}),_0x2dcccb;}function setStartDatePerformance(){const _0x365f68=_0x33a99e;if(config&&config[_0x365f68(0x243)][0x0][_0x365f68(0x25f)][_0x365f68(0x16a)]!=0x0){const _0x46b590=config[_0x365f68(0x243)][0x0]['changes'];dbPerformance[_0x365f68(0x294)]('data')[_0x365f68(0x165)]({'date':config[_0x365f68(0x1c6)]})[_0x365f68(0x279)]({'coins':_0x46b590})[_0x365f68(0x26f)]();}}async function recreateCoinResults(){const _0x1df727=_0x33a99e;let _0x1fa06e,_0x585695=[];try{const _0x47a006=fns[_0x1df727(0x1f6)](fns[_0x1df727(0x23b)](config[_0x1df727(0x1c6)][_0x1df727(0x250)](/\//g,'-')),_0x1df727(0x21a));for(const _0x16994a of currentCoins){if(_0x16994a[_0x1df727(0x1d5)]!=config['basecoin']){let _0x381a00=0x0,_0x5026f2,_0x2b1b60;_0x1fa06e=await getAllEventOrders(_0x16994a[_0x1df727(0x2e1)]);if(_0x1fa06e[_0x1df727(0x16a)]>0x0)_0x1fa06e[_0x1df727(0x245)](_0x36b737=>{const _0x406762=_0x1df727,_0x38fb5d=_0x16994a[_0x406762(0x2e1)][_0x406762(0x1a8)](config['basecoin']+'/');_0x585695[_0x406762(0x194)]({'datetime':_0x36b737[_0x406762(0x2c4)],'coin':_0x16994a[_0x406762(0x1d5)],'symbol':_0x16994a[_0x406762(0x2e1)],'side':_0x36b737[_0x406762(0x1bf)],'reverse':_0x38fb5d,'amount':formatResult(_0x36b737[_0x406762(0x2a5)],0x8),'filled':formatResult(_0x36b737[_0x406762(0x2a5)],0x8),'price':formatResult(_0x36b737['price'],0x8)}),_0x381a00=_0x36b737[_0x406762(0x1bf)]=='buy'?_0x381a00+_0x36b737['filled']:_0x381a00-_0x36b737[_0x406762(0x2a5)];if(!_0x2b1b60)_0x2b1b60=_0x36b737[_0x406762(0x238)];});_0x5026f2=_0x16994a['number']-_0x381a00;let _0x162d5f;config[_0x1df727(0x243)][_0x1df727(0x245)](_0x3298a9=>{const _0x5a9d26=_0x1df727;!_0x162d5f&&(_0x162d5f=_0x3298a9['changes'][_0x5a9d26(0x165)](_0x3a9d41=>_0x3a9d41[_0x5a9d26(0x1d5)]==_0x16994a[_0x5a9d26(0x1d5)]),_0x162d5f&&(_0x5026f2=_0x162d5f['number'],_0x2b1b60=_0x162d5f[_0x5a9d26(0x238)]));});let _0x1f9637=dbCoinResults[_0x1df727(0x294)](_0x1df727(0x1b3))[_0x1df727(0x165)]({'coin':_0x16994a['coin']})[_0x1df727(0x290)]();_0x1f9637={'coin':_0x16994a[_0x1df727(0x1d5)],'number':_0x5026f2,'breakeven':_0x2b1b60,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get'](_0x1df727(0x1b3))[_0x1df727(0x165)]({'coin':_0x16994a[_0x1df727(0x1d5)]})[_0x1df727(0x279)](_0x1f9637)['write']();}}_0x585695['sort']((_0x4418a4,_0x49d3a8)=>_0x4418a4[_0x1df727(0x2c4)]>_0x49d3a8['datetime']?0x1:_0x49d3a8[_0x1df727(0x2c4)]>_0x4418a4[_0x1df727(0x2c4)]?-0x1:0x0);let _0x163716=0x0;for(let _0x494628 of _0x585695){await updateCoinResults(_0x494628,!![]);}}catch(_0x5d32c4){await handleError(_0x5d32c4,'recreateCoinResults()');}}async function getAllEventOrders(_0x2a7082){const _0x530b15=_0x33a99e;let _0x255afa=[],_0x7f007b=dbLogs[_0x530b15(0x294)](_0x530b15(0x298))[_0x530b15(0x1da)](_0x15f502=>{const _0x3a2218=_0x530b15,_0x5a9f0a=_0x15f502[_0x3a2218(0x1c1)][_0x3a2218(0x27a)]();return _0x5a9f0a[_0x3a2218(0x1a8)](_0x2a7082[_0x3a2218(0x27a)]())&&(_0x5a9f0a[_0x3a2218(0x1a8)](_0x3a2218(0x211))&&_0x5a9f0a['includes'](_0x3a2218(0x26e))||_0x5a9f0a[_0x3a2218(0x1a8)](_0x3a2218(0x2a5))&&_0x5a9f0a[_0x3a2218(0x1a8)](_0x3a2218(0x26e)));})[_0x530b15(0x2db)](_0x530b15(0x1ba))['value']();return _0x7f007b['forEach'](_0x308f00=>{const _0x7f12f3=_0x530b15,_0x2e3c82=_0x308f00[_0x7f12f3(0x1c1)][_0x7f12f3(0x1a8)](_0x7f12f3(0x25b))?_0x7f12f3(0x25b):_0x7f12f3(0x228),_0x48c086=/#([0-9]|\.)+\s/i,_0x226a68=Number(_0x48c086[_0x7f12f3(0x1c8)](_0x308f00['event'])[0x0][_0x7f12f3(0x2c1)](0x1)),_0x3fd58a=/@([0-9]|\.)+$/i,_0x11fe0b=Number(_0x3fd58a['exec'](_0x308f00[_0x7f12f3(0x1c1)])[0x0][_0x7f12f3(0x2c1)](0x1));_0x255afa[_0x7f12f3(0x194)]({'datetime':_0x308f00[_0x7f12f3(0x1ba)],'coin':symbolToCoin(_0x2a7082),'symbol':_0x2a7082,'side':_0x2e3c82,'amount':_0x226a68,'filled':_0x226a68,'price':_0x11fe0b});}),_0x255afa;}async function getAllOrders(_0x1f6f07,_0x54404a){const _0x87ef6f=_0x33a99e;let _0x3d9c34=[];while(_0x54404a<exchange[_0x87ef6f(0x16b)]()){const _0x4f24f7=0x1f4,_0x2d6d25=await exchange[_0x87ef6f(0x233)](_0x1f6f07,_0x54404a,_0x4f24f7);if(_0x2d6d25[_0x87ef6f(0x16a)])_0x54404a=_0x2d6d25[_0x2d6d25[_0x87ef6f(0x16a)]-0x1][_0x87ef6f(0x277)]+0x1,_0x3d9c34=_0x3d9c34[_0x87ef6f(0x1e7)](_0x2d6d25);else break;}return _0x3d9c34;}async function validate24hChanges(){const _0x1c0532=_0x33a99e;for(const _0x5a2223 of currentCoins){if(_0x5a2223[_0x1c0532(0x1d5)]!=config[_0x1c0532(0x1d1)]){let _0x40b22c;_0x5a2223[_0x1c0532(0x29e)]?_0x40b22c=formatResult((0x1/(global[_0x1c0532(0x2bc)][noslash(_0x5a2223[_0x1c0532(0x2e1)])]/0x64+0x1)-0x1)*0x64,0x3):_0x40b22c=global[_0x1c0532(0x2bc)][noslash(_0x5a2223[_0x1c0532(0x2e1)])],_0x40b22c<config[_0x1c0532(0x1b9)]&&(logHistory(_0x1c0532(0x242),_0x5a2223['coin']+_0x1c0532(0x24a)+_0x40b22c+'%'),logHistory(_0x1c0532(0x242),_0x1c0532(0x1ec)),logHistory('error',_0x1c0532(0x2b9)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x307d34,_0x59443b){const _0x3ad863=_0x33a99e;if(!_0x307d34)return!![];const _0x212090=_0x59443b[_0x3ad863(0x29b)]('.'),_0x5d89e1=_0x307d34[_0x3ad863(0x29b)]('.');for(var _0x2648a3=0x0;_0x2648a3<_0x5d89e1['length'];_0x2648a3++){const _0x2e45b5=~~_0x5d89e1[_0x2648a3],_0x4d048d=~~_0x212090[_0x2648a3];if(_0x2e45b5<_0x4d048d)return!![];if(_0x2e45b5>_0x4d048d)return![];}return![];}async function oneTimeMigration(){const _0x46ab34=_0x33a99e;let _0x4dff4a=dbLogs[_0x46ab34(0x294)](_0x46ab34(0x173))[_0x46ab34(0x290)]();if(isOlderVersion(_0x4dff4a,_0x46ab34(0x1bc))){let _0x47246a=[];const _0x2f9362=dbLogs[_0x46ab34(0x294)](_0x46ab34(0x298))['value']();_0x2f9362['forEach'](_0x533de5=>{const _0x50124c=_0x46ab34;_0x47246a[_0x50124c(0x194)]({'time':_0x533de5[_0x50124c(0x1ba)],'type':_0x533de5[_0x50124c(0x18e)],'event':_0x533de5['event']});}),dbLogs[_0x46ab34(0x294)](_0x46ab34(0x298))[_0x46ab34(0x279)](_0x47246a)[_0x46ab34(0x26f)]();}let _0x2eb710=dbConfig[_0x46ab34(0x294)]('version')[_0x46ab34(0x290)]();if(isOlderVersion(_0x2eb710,_0x46ab34(0x1bc))){let _0x25f9b1=dbConfig[_0x46ab34(0x294)](_0x46ab34(0x27d))['find']({'botID':botID})[_0x46ab34(0x290)]();if(_0x25f9b1){let _0x212105=[];_0x25f9b1[_0x46ab34(0x26b)]['forEach'](_0x2fbdaf=>{const _0xfd43ff=_0x46ab34;_0x212105[_0xfd43ff(0x194)]({'coin':_0x2fbdaf[_0xfd43ff(0x1d5)],'number':_0x2fbdaf[_0xfd43ff(0x248)],'price':_0x2fbdaf[_0xfd43ff(0x19d)]}),delete _0x2fbdaf['startnumber'],delete _0x2fbdaf[_0xfd43ff(0x19d)];});if(_0x212105['length']!==0x0)fs[_0x46ab34(0x230)](configbackuppath+(_0x46ab34(0x259)+botID+'.json'),JSON[_0x46ab34(0x214)](_0x212105,null,0x4),function(_0x939af8){if(_0x939af8){}});const _0x4c95b5=(_0x1a05ca,_0x577435)=>{const _0x444a36=_0x46ab34;let _0xa3c50e=[];_0x577435[_0x444a36(0x245)](_0x5337fd=>{const _0x22695b=_0x444a36,_0x5f3ec3=_0x1a05ca['find'](_0xb1a79f=>_0xb1a79f['coin']==_0x5337fd['coin']);if(!_0x5f3ec3)_0xa3c50e[_0x22695b(0x194)](_0x5337fd);});let _0x953f93=[];return _0x1a05ca[_0x444a36(0x245)](_0x1743b0=>{const _0x369456=_0x444a36,_0x303031=_0x577435['find'](_0x36807f=>_0x36807f[_0x369456(0x1d5)]==_0x1743b0[_0x369456(0x1d5)]);if(!_0x303031||_0x303031['number']==0x0&&_0x1743b0[_0x369456(0x1c3)]!=0x0)_0x953f93['push'](_0x1743b0);}),{'missingDay1':_0xa3c50e,'notInDay2':_0x953f93};},_0x328959=dbPerformance[_0x46ab34(0x294)](_0x46ab34(0x232))['cloneDeep']()[_0x46ab34(0x290)]();if(_0x328959[_0x46ab34(0x16a)]>0x1){const {missingDay1:_0x26c67f,notInDay2:_0x20ab48}=_0x4c95b5(_0x212105,_0x328959[0x1][_0x46ab34(0x1b3)]);_0x212105=[..._0x212105,..._0x26c67f],_0x20ab48['forEach'](_0x26e2af=>{const _0x426890=_0x46ab34;let _0x4db3c7=_0x212105[_0x426890(0x254)](_0x39a79d=>_0x39a79d[_0x426890(0x1d5)]==_0x26e2af[_0x426890(0x1d5)]);_0x4db3c7!=-0x1&&_0x212105[_0x426890(0x283)](_0x4db3c7,0x1);});}_0x212105['sort']((_0x1b6166,_0x340f1c)=>_0x1b6166[_0x46ab34(0x1d5)]>_0x340f1c[_0x46ab34(0x1d5)]?0x1:_0x340f1c['coin']>_0x1b6166['coin']?-0x1:0x0);let _0x42deab=[{'date':_0x25f9b1[_0x46ab34(0x1c6)],'changes':_0x212105}];_0x328959[_0x46ab34(0x16a)]>0x2&&_0x328959[_0x46ab34(0x245)]((_0x3ef565,_0x1303f6)=>{const _0x22696f=_0x46ab34;if(_0x1303f6>0x0&&_0x1303f6<_0x328959[_0x22696f(0x16a)]-0x1){const {missingDay1:_0x5bf2d0,notInDay2:_0x57037e}=_0x4c95b5(_0x328959[_0x1303f6][_0x22696f(0x1b3)],_0x328959[_0x1303f6+0x1][_0x22696f(0x1b3)]);_0x212105=[],(_0x5bf2d0[_0x22696f(0x16a)]!=0x0||_0x57037e[_0x22696f(0x16a)]!=0x0)&&(_0x5bf2d0[_0x22696f(0x16a)]!=0x0&&_0x212105[_0x22696f(0x194)](..._0x5bf2d0),_0x57037e[_0x22696f(0x16a)]!=0x0&&(_0x57037e[_0x22696f(0x245)](_0x3cc0b1=>{_0x3cc0b1['number']=-_0x3cc0b1['number'];}),_0x212105[_0x22696f(0x194)](..._0x57037e)),_0x212105[_0x22696f(0x2de)]((_0xfdbb3,_0x4741ad)=>_0xfdbb3[_0x22696f(0x1d5)]>_0x4741ad['coin']?0x1:_0x4741ad['coin']>_0xfdbb3['coin']?-0x1:0x0),_0x42deab[_0x22696f(0x194)]({'date':_0x328959[_0x1303f6+0x1]['date'],'changes':_0x212105}));}}),dbConfig[_0x46ab34(0x294)]('bot')[_0x46ab34(0x165)]({'botID':botID})['assign']({..._0x25f9b1,'liquidity':_0x42deab})[_0x46ab34(0x26f)]();}}if(isOlderVersion(_0x2eb710,'2.6.0')){let _0x1c579b=dbConfig[_0x46ab34(0x294)](_0x46ab34(0x27d))[_0x46ab34(0x165)]({'botID':botID})[_0x46ab34(0x290)]();if(_0x1c579b){const _0x2a3ef8=_0x1c579b[_0x46ab34(0x293)],_0x48f3c0=_0x2a3ef8?capitalize(_0x2a3ef8):_0x46ab34(0x1cd);dbConfig[_0x46ab34(0x294)](_0x46ab34(0x27d))[_0x46ab34(0x165)]({'botID':botID})['assign']({'exchange':_0x48f3c0})['write']();}}let _0x554f61=dbPerformance[_0x46ab34(0x294)]('version')['value']();isOlderVersion(_0x554f61,_0x46ab34(0x1bc))&&setStartDatePerformance();let _0xb73bca=dbCoinResults[_0x46ab34(0x294)](_0x46ab34(0x173))[_0x46ab34(0x290)]();if(isOlderVersion(_0xb73bca,_0x46ab34(0x235))){let _0x1d6c10=dbCoinResults[_0x46ab34(0x294)](_0x46ab34(0x1b3))[_0x46ab34(0x290)]();if(_0x1d6c10[_0x46ab34(0x16a)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x4c2e33=_0x33a99e;dbConfig['set'](_0x4c2e33(0x173),serverversion)[_0x4c2e33(0x26f)](),dbPerformance[_0x4c2e33(0x188)](_0x4c2e33(0x173),serverversion)[_0x4c2e33(0x26f)](),dbLogs[_0x4c2e33(0x188)](_0x4c2e33(0x173),serverversion)['write'](),dbCoinResults[_0x4c2e33(0x188)](_0x4c2e33(0x173),serverversion)[_0x4c2e33(0x26f)]();}function getConfiguration(_0x3d9d94){const _0x17b352=_0x33a99e;let _0x49a4f5=dbConfig['get'](_0x17b352(0x27d))[_0x17b352(0x165)]({'botID':_0x3d9d94})[_0x17b352(0x290)]();if(_0x49a4f5){let _0x5db76e=![];typeof _0x49a4f5[_0x17b352(0x1f1)]==_0x17b352(0x217)&&(_0x49a4f5={..._0x49a4f5,'threshold':Number(_0x49a4f5[_0x17b352(0x1f1)])},_0x5db76e=!![]),_0x49a4f5[_0x17b352(0x1b9)]==null&&(_0x49a4f5={..._0x49a4f5,'change24h':-0x14},_0x5db76e=!![]),!_0x49a4f5[_0x17b352(0x15d)]&&(_0x49a4f5={..._0x49a4f5,'fiat':_0x17b352(0x18b)},_0x5db76e=!![]),!_0x49a4f5['onepagemode']&&(_0x49a4f5={..._0x49a4f5,'onepagemode':settings['onepagemode']},_0x5db76e=!![]),!_0x49a4f5[_0x17b352(0x2d2)]&&(_0x49a4f5={..._0x49a4f5,'colorscheme':'red_yellow_blue'},_0x5db76e=!![]),!_0x49a4f5[_0x17b352(0x2ac)]&&(_0x49a4f5={..._0x49a4f5,'autoliquidity':!![]},_0x5db76e=!![]),_0x5db76e&&(_0x49a4f5={'botID':_0x49a4f5[_0x17b352(0x2a0)],'exchange':_0x49a4f5[_0x17b352(0x293)],'apiKey':_0x49a4f5[_0x17b352(0x196)],'apiSecret':_0x49a4f5[_0x17b352(0x19c)],'apiPassword':_0x49a4f5['apiPassword'],'basecoin':_0x49a4f5['basecoin'],'botname':_0x49a4f5[_0x17b352(0x1ed)],'showname':_0x49a4f5['showname'],'threshold':_0x49a4f5['threshold'],'ordertype':_0x49a4f5['ordertype'],'timeout':_0x49a4f5[_0x17b352(0x1dc)],'fiat':_0x49a4f5[_0x17b352(0x15d)],'startdate':_0x49a4f5[_0x17b352(0x1c6)],'recreate':_0x49a4f5[_0x17b352(0x25a)],'timeshift':_0x49a4f5[_0x17b352(0x202)],'onepagemode':_0x49a4f5[_0x17b352(0x1ae)],'headless':_0x49a4f5[_0x17b352(0x2cd)],'cooldown':_0x49a4f5[_0x17b352(0x256)],'change24h':_0x49a4f5[_0x17b352(0x1b9)],'emojibuy':_0x49a4f5[_0x17b352(0x17d)],'emojisell':_0x49a4f5[_0x17b352(0x253)],'colorscheme':_0x49a4f5['colorscheme'],'portfolio':_0x49a4f5[_0x17b352(0x26b)],'autoliquidity':_0x49a4f5[_0x17b352(0x2ac)],'liquidity':_0x49a4f5[_0x17b352(0x243)],'openOrders':_0x49a4f5[_0x17b352(0x15e)]},dbConfig['get'](_0x17b352(0x27d))[_0x17b352(0x2af)]()['write'](),dbConfig[_0x17b352(0x294)](_0x17b352(0x27d))['push'](_0x49a4f5)[_0x17b352(0x26f)]());}else _0x49a4f5={'botID':_0x3d9d94,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x3d9d94,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x17b352(0x18b),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x17b352(0x202)],'onepagemode':settings[_0x17b352(0x1ae)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x17b352(0x295),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x49a4f5;}function emittedConfiguration(){const _0x948f8c=_0x33a99e;let _0x333ad5;if(config[_0x948f8c(0x196)]=='')_0x333ad5={...config,'configstate':_0x948f8c(0x222)};else config['apiKey']==_0x948f8c(0x219)?_0x333ad5={...config,'configstate':_0x948f8c(0x185)}:(_0x333ad5={...config,'apiKey':_0x948f8c(0x1e6),'apiSecret':_0x948f8c(0x1e6)},config['apiPassword']&&(_0x333ad5[_0x948f8c(0x1b6)]='************'));return _0x333ad5;}function getSettings(){const _0x44ff49=_0x33a99e;return dbSettings[_0x44ff49(0x294)](_0x44ff49(0x257))[_0x44ff49(0x290)]();}function getSecure(){const _0x2c4b25=_0x33a99e;return dbSecure['get']('secure')[_0x2c4b25(0x290)]()||{};}function updateTimeshift(_0x56a922){const _0x272dae=_0x33a99e;let _0x4571eb=dbConfig[_0x272dae(0x294)](_0x272dae(0x27d))[_0x272dae(0x165)]({'botID':botID})[_0x272dae(0x290)]();_0x4571eb&&dbConfig[_0x272dae(0x294)](_0x272dae(0x27d))['find']({'botID':botID})['assign']({'timeshift':_0x56a922})[_0x272dae(0x26f)](),config[_0x272dae(0x202)]=_0x56a922,proxyEmit(_0x272dae(0x237),emittedConfiguration());}function updateOnepagemode(_0x44410e){const _0x841b4=_0x33a99e;let _0x5aa11b=dbConfig['get'](_0x841b4(0x27d))[_0x841b4(0x165)]({'botID':botID})[_0x841b4(0x290)]();_0x5aa11b&&dbConfig[_0x841b4(0x294)]('bot')[_0x841b4(0x165)]({'botID':botID})['assign']({'onepagemode':_0x44410e})[_0x841b4(0x26f)](),config['onepagemode']=_0x44410e,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x4e9621){const _0x571f38=_0x33a99e;logger[_0x571f38(0x29c)](_0x571f38(0x281));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x571f38(0x29c)](_0x571f38(0x267));let _0x15a1a1=[],_0x309617=![],_0x13dbc1=![],_0xf217d5=[];_0x4e9621['portfolio']['forEach'](_0xb539e=>{const _0x2018ed=_0x571f38;if(!_0xb539e[_0x2018ed(0x269)]&&_0xb539e[_0x2018ed(0x1d5)]!=_0x4e9621[_0x2018ed(0x1d1)])_0xf217d5[_0x2018ed(0x194)](_0xb539e[_0x2018ed(0x2e1)]);}),_0xf217d5[_0x571f38(0x245)](_0x4eb626=>{const _0x1d65e1=_0x571f38,_0x506ce2=watchedSymbols[_0x1d65e1(0x1a8)](_0x4eb626);!_0x506ce2&&_0x15a1a1[_0x1d65e1(0x194)](_0x4eb626);}),_0xf217d5['forEach'](_0xa227d7=>{const _0x41b2fb=_0x571f38,_0x2ea8a6=currentCoins[_0x41b2fb(0x165)](_0x5e5900=>_0x5e5900[_0x41b2fb(0x2e1)]==_0xa227d7);!_0x2ea8a6&&(_0x309617=!![]);}),currentCoins['forEach'](_0x166211=>{const _0x29cc87=_0x571f38;if(_0x166211['coin']!=config['basecoin']){const _0xd53524=_0xf217d5[_0x29cc87(0x165)](_0x393e97=>_0x393e97==_0x166211['symbol']);!_0xd53524&&(_0x309617=!![]);}}),_0x4e9621[_0x571f38(0x26b)][_0x571f38(0x245)](_0x1e763d=>{const _0x2fdb58=_0x571f38,_0x3aa8e9=config[_0x2fdb58(0x26b)][_0x2fdb58(0x165)](_0x9a5f3d=>_0x9a5f3d[_0x2fdb58(0x1d5)]==_0x1e763d[_0x2fdb58(0x1d5)]);if(_0x3aa8e9&&_0x1e763d[_0x2fdb58(0x247)]!=_0x3aa8e9['offset'])_0x13dbc1=!![];});let _0x1231f4=dbConfig['get']('bot')['find']({'botID':botID})[_0x571f38(0x290)]();_0x4e9621={..._0x4e9621,'apiKey':crypt['decrypt'](secure[_0x571f38(0x157)],_0x4e9621[_0x571f38(0x196)])[_0x571f38(0x2e5)],'apiSecret':crypt[_0x571f38(0x2ce)](secure[_0x571f38(0x157)],_0x4e9621[_0x571f38(0x19c)])[_0x571f38(0x2e5)]};_0x4e9621[_0x571f38(0x1b6)]&&(_0x4e9621[_0x571f38(0x1b6)]=crypt[_0x571f38(0x2ce)](secure['privateKey'],_0x4e9621[_0x571f38(0x1b6)])['message']);let _0x1b3db0=![];if(_0x1231f4){_0x4e9621[_0x571f38(0x196)]==_0x571f38(0x1e6)?_0x4e9621['apiKey']=config[_0x571f38(0x196)]:_0x1b3db0=!![];_0x4e9621[_0x571f38(0x19c)]==_0x571f38(0x1e6)?_0x4e9621['apiSecret']=config[_0x571f38(0x19c)]:_0x1b3db0=!![];if(_0x4e9621['apiPassword']==_0x571f38(0x1e6))_0x4e9621[_0x571f38(0x1b6)]=config[_0x571f38(0x1b6)];else{if(_0x4e9621['apiPassword'])_0x1b3db0=!![];}dbConfig['get'](_0x571f38(0x27d))[_0x571f38(0x165)]({'botID':botID})[_0x571f38(0x279)](_0x4e9621)[_0x571f38(0x26f)]();}else dbConfig[_0x571f38(0x294)]('bot')[_0x571f38(0x194)](_0x4e9621)['write'](),_0x1b3db0=!![],process[_0x571f38(0x224)]({'status':'enabled','live':'running'},_0x26ba75=>{});process[_0x571f38(0x224)]({'botname':_0x4e9621[_0x571f38(0x1ed)]},_0xdba0c4=>{}),updateBotManager(),config={..._0x4e9621},proxyEmit(_0x571f38(0x29f)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1b3db0)await reset(_0x15a1a1,!![]);else _0x309617||_0x13dbc1?await reset(_0x15a1a1,![]):getBalances();blockTransactionDetection=![],logger['debug']('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x1f2016){const _0x15b73c=_0x33a99e,_0x5e1619={...config,'headless':_0x1f2016['headless']};let _0x4a96b6=dbConfig[_0x15b73c(0x294)](_0x15b73c(0x27d))[_0x15b73c(0x165)]({'botID':botID})[_0x15b73c(0x290)]();_0x4a96b6&&dbConfig[_0x15b73c(0x294)]('bot')[_0x15b73c(0x165)]({'botID':botID})[_0x15b73c(0x279)](_0x5e1619)[_0x15b73c(0x26f)](),config={..._0x5e1619},updateBotManager(),proxyEmit(_0x15b73c(0x237),emittedConfiguration());}async function storeFiat(_0x2c8a9b){const _0x359387=_0x33a99e,_0x573452={...config,'fiat':_0x2c8a9b};let _0x581a09=dbConfig['get'](_0x359387(0x27d))[_0x359387(0x165)]({'botID':botID})['value']();_0x581a09&&dbConfig[_0x359387(0x294)](_0x359387(0x27d))[_0x359387(0x165)]({'botID':botID})[_0x359387(0x279)](_0x573452)[_0x359387(0x26f)](),config={..._0x573452},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x5b4488=_0x33a99e;logger['full']('Resetting\x20bot\x20history');try{if(fs['existsSync'](path[_0x5b4488(0x2c0)](configpath,_0x5b4488(0x1ab)+botID+_0x5b4488(0x24f))))fs['unlinkSync'](path[_0x5b4488(0x2c0)](configpath,_0x5b4488(0x1ab)+botID+_0x5b4488(0x24f)));if(fs[_0x5b4488(0x1b7)](path[_0x5b4488(0x2c0)](configpath,_0x5b4488(0x1ab)+botID+'-performance.json')))fs[_0x5b4488(0x1b4)](path[_0x5b4488(0x2c0)](configpath,'bot-'+botID+_0x5b4488(0x191)));if(fs[_0x5b4488(0x1b7)](path[_0x5b4488(0x2c0)](configpath,_0x5b4488(0x1ab)+botID+_0x5b4488(0x193))))fs['unlinkSync'](path[_0x5b4488(0x2c0)](configpath,_0x5b4488(0x1ab)+botID+_0x5b4488(0x193)));}catch(_0x507440){if(_0x507440)logger[_0x5b4488(0x270)](_0x5b4488(0x17c),_0x507440);}const _0x4d4387=getDate();let _0x53aa59=[];currentCoins[_0x5b4488(0x245)](_0x21b8c3=>{const _0x140814=_0x5b4488;_0x53aa59[_0x140814(0x194)]({'coin':_0x21b8c3[_0x140814(0x1d5)],'number':_0x21b8c3['number'],'price':_0x21b8c3[_0x140814(0x22d)]});});let _0x50f79c=dbConfig[_0x5b4488(0x294)](_0x5b4488(0x27d))['find']({'botID':botID})[_0x5b4488(0x290)]();_0x50f79c&&(dbConfig[_0x5b4488(0x294)](_0x5b4488(0x27d))[_0x5b4488(0x165)]({'botID':botID})[_0x5b4488(0x279)]({'liquidity':[{'date':_0x4d4387,'changes':_0x53aa59}]})[_0x5b4488(0x26f)](),config['liquidity']=[]),process[_0x5b4488(0x224)]({'stop':'restart'},_0x43f715=>{});}function noslash(_0x1a56e8){return _0x1a56e8['replace']('/','');}function updateHighestFee(_0x77aaa9,_0x46bd66){const _0x54be50=_0x33a99e;lastFees[_0x54be50(0x1d6)]=_0x77aaa9,lastFees[_0x54be50(0x241)][_0x54be50(0x16a)]===0x14&&lastFees[_0x54be50(0x241)][_0x54be50(0x1ee)](),lastFees[_0x54be50(0x241)][_0x54be50(0x194)](_0x46bd66),lastFees[_0x54be50(0x287)]=Math[_0x54be50(0x218)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x858f7e){const _0x1b4e55=_0x33a99e;logger['debug'](_0x1b4e55(0x2b4)+_0x858f7e[_0x1b4e55(0x2e1)]+'\x20|\x20'+_0x858f7e['status']+_0x1b4e55(0x1d4)+_0x858f7e['id']);let _0x1419c5=_0x858f7e[_0x1b4e55(0x1f7)],_0x541369=![];currentCoins[_0x1b4e55(0x245)](_0x138992=>{_0x138992['symbol']==_0x858f7e['symbol']&&(_0x541369=!![]);});if(!_0x541369)return;const _0x3eecb1=currentCoins[_0x1b4e55(0x165)](_0x449d05=>_0x449d05[_0x1b4e55(0x2e1)]==_0x858f7e['symbol']),_0x24a5e1=_0x524be5=>{if(_0x3eecb1)_0x3eecb1['orderstatus']=_0x524be5;};if(_0x1419c5=='open')_0x24a5e1(_0x1b4e55(0x27b));else{if(_0x1419c5==_0x1b4e55(0x161)){_0x24a5e1(_0x1b4e55(0x161));const _0x4d0f17=await getCoins();[currentCoins,currentCoinsAll]=_0x4d0f17,await getOpenOrders(),handleOpenOrders();}else{if(_0x1419c5==_0x1b4e55(0x292)){logger[_0x1b4e55(0x29c)](_0x1b4e55(0x187)+_0x858f7e['symbol']+_0x1b4e55(0x1d4)+_0x858f7e[_0x1b4e55(0x2a5)]+_0x1b4e55(0x1d4)+_0x858f7e['id']);let _0x2fbedf=![];if(lastOrders)for(const _0x27486e of lastOrders){const _0x64927a=0xc8,_0x283090=0x1388;let _0x35602b=0x0;while(!_0x27486e[_0x1b4e55(0x2b2)]&&_0x35602b*_0x64927a<_0x283090){_0x35602b++,await sleep(_0x64927a);}if(_0x35602b>0x0)logger[_0x1b4e55(0x29c)](_0x1b4e55(0x1a2)+_0x35602b*_0x64927a/0x3e8+_0x1b4e55(0x178));if(_0x27486e[_0x1b4e55(0x2b2)]==_0x858f7e['id']){logger[_0x1b4e55(0x29c)](_0x1b4e55(0x1a7)+_0x858f7e['id']),_0x2fbedf=!![];if(_0x27486e[_0x1b4e55(0x2a5)]==0x0){logger[_0x1b4e55(0x29c)]('3\x20-\x20handling\x20FILLED\x20order:\x20'+_0x858f7e['id']);if(_0x858f7e[_0x1b4e55(0x236)])_0x27486e['price']=_0x858f7e[_0x1b4e55(0x236)];else{if(_0x858f7e[_0x1b4e55(0x238)])_0x27486e[_0x1b4e55(0x238)]=_0x858f7e['price'];else{}}_0x27486e[_0x1b4e55(0x2a5)]=_0x858f7e[_0x1b4e55(0x2a5)],_0x27486e['fee']={'currency':_0x858f7e[_0x1b4e55(0x19f)]?_0x858f7e[_0x1b4e55(0x19f)][_0x1b4e55(0x1d6)]:null,'cost':_0x858f7e[_0x1b4e55(0x19f)]?_0x858f7e[_0x1b4e55(0x19f)][_0x1b4e55(0x1c5)]:0x0},updateHighestFee(_0x27486e[_0x1b4e55(0x19f)][_0x1b4e55(0x1d6)],_0x27486e[_0x1b4e55(0x19f)][_0x1b4e55(0x1c5)]),_0x24a5e1(_0x1b4e55(0x2a5)),await validateOrders();if(lockOrders==ORDERS[_0x1b4e55(0x204)]){const _0x537d30=await getCoins();[currentCoins,currentCoinsAll]=_0x537d30;}await updateCoinResults(_0x27486e);}}}if(!_0x2fbedf){logger[_0x1b4e55(0x29c)](_0x1b4e55(0x2d4)+_0x858f7e['id']),_0x24a5e1('filled');const _0x5929fb=await getCoins();[currentCoins,currentCoinsAll]=_0x5929fb,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x490481=JSON[_0x1b4e55(0x1a0)](lastBalances[_0x1b4e55(0x26b)]);const _0x1ece83=_0x490481[_0x1b4e55(0x165)](_0xe43021=>_0xe43021[_0x1b4e55(0x2e1)]==_0x858f7e['symbol']);if(_0x1ece83){if(_0x1419c5==_0x1b4e55(0x27b))_0x1ece83[_0x1b4e55(0x223)]=_0x1ece83[_0x1b4e55(0x223)]==_0x1b4e55(0x2a5)?_0x1b4e55(0x2a5):_0x1b4e55(0x27b);else{if(_0x1419c5==_0x1b4e55(0x161))_0x1ece83[_0x1b4e55(0x223)]=_0x1ece83[_0x1b4e55(0x223)]=='filled'?'filled':'canceled';else _0x1419c5==_0x1b4e55(0x292)&&(_0x1ece83['orderstatus']='filled');}}lastBalances={...lastBalances,'portfolio':JSON['stringify'](_0x490481)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2ec86d=_0x33a99e;await getOpenOrders();let _0x41987f=![];currentCoins[_0x2ec86d(0x245)](_0x25d8fb=>{const _0x2a9f59=_0x2ec86d;_0x41987f=allOpenOrders[_0x2a9f59(0x165)](_0xb78ea0=>_0xb78ea0[_0x2a9f59(0x2e1)]==_0x25d8fb['symbol']),_0x25d8fb['orderstatus']=_0x41987f?_0x2a9f59(0x27b):_0x2a9f59(0x201);});}async function getCoins(_0x2b860b=!![],_0x1a06ac=config[_0x33a99e(0x1d1)]){const _0x1a114c=_0x33a99e;let _0x4c3d3f,_0x3bd8dd=[],_0xc220d3=[],_0xcb0445=[],_0x202b7f=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x4c3d3f=await exchange[_0x1a114c(0x260)](),mybalances=_0x4c3d3f[_0x1a114c(0x1fb)];for(const [_0x3c7aa1,_0x273a07]of Object['entries'](mybalances)){_0x202b7f[_0x1a114c(0x194)](_0x3c7aa1);}if(_0x1a06ac=='')for(const [_0x297876,_0x37356f]of Object[_0x1a114c(0x282)](mybalances)){_0x37356f!=0x0&&_0xc220d3[_0x1a114c(0x194)]({'coin':_0x297876});}else{let _0x24ee39=![];for(const [_0x4334ea,_0x543695]of Object[_0x1a114c(0x282)](mybalances)){if(_0x202b7f[_0x1a114c(0x1a8)](_0x4334ea)){const _0xdbedde=config[_0x1a114c(0x26b)][_0x1a114c(0x165)](_0x58d9fe=>_0x58d9fe['coin']==_0x4334ea),_0x31f690=_0x4334ea+'/'+_0x1a06ac,_0xf110b5=_0x1a06ac+'/'+_0x4334ea,_0x5ccd8b=currentCoins[_0x1a114c(0x165)](_0x9aba47=>_0x9aba47[_0x1a114c(0x1d5)]==_0x4334ea);_0x24ee39=![];if((_0x543695!=0x0||_0xdbedde)&&(allSymbols[_0x1a114c(0x1a8)](_0x31f690)||_0x4334ea==_0x1a06ac))_0x4334ea!=_0x1a06ac&&_0x3bd8dd['push'](_0x31f690),_0xc220d3[_0x1a114c(0x194)]({'coin':_0x4334ea,'symbol':_0x31f690,'reverse':![],'number':Math[_0x1a114c(0x218)](_0x543695+(_0xdbedde&&_0xdbedde[_0x1a114c(0x247)]||0x0),0x0),'orderstatus':_0x5ccd8b?_0x5ccd8b['orderstatus']:'none'});else(_0x543695!=0x0||_0xdbedde)&&allSymbols[_0x1a114c(0x1a8)](_0xf110b5)&&(_0x4334ea!=_0x1a06ac&&_0x3bd8dd[_0x1a114c(0x194)](_0xf110b5),_0xc220d3['push']({'coin':_0x4334ea,'symbol':_0xf110b5,'reverse':!![],'number':Math[_0x1a114c(0x218)](_0x543695+(_0xdbedde&&_0xdbedde[_0x1a114c(0x247)]||0x0),0x0),'orderstatus':_0x5ccd8b?_0x5ccd8b[_0x1a114c(0x223)]:_0x1a114c(0x201)}));}}}}catch(_0x4dd981){if(!_0x2b860b)handleErrorNoStop(_0x4dd981,_0x1a114c(0x1ad));else await handleError(_0x4dd981,_0x1a114c(0x1ad));}return _0xcb0445=cloneDeep(_0xc220d3),_0xc220d3=_0xc220d3[_0x1a114c(0x1da)](_0x29f9c8=>{const _0x523ffc=_0x1a114c,_0x31a134=config[_0x523ffc(0x26b)][_0x523ffc(0x165)](_0x5ccf0e=>_0x5ccf0e[_0x523ffc(0x1d5)]==_0x29f9c8[_0x523ffc(0x1d5)]);return _0x31a134&&!_0x31a134[_0x523ffc(0x269)];}),[_0xc220d3,_0xcb0445];}async function getCoinNumber(_0x463b94){const _0x321cad=_0x33a99e;let _0x3335a4;try{const _0x41e24b=await exchange[_0x321cad(0x260)]();_0x3335a4=_0x41e24b['total'][_0x463b94];}catch(_0x3ac5a8){await handleError(_0x3ac5a8,_0x321cad(0x189));}return _0x3335a4;}async function getOpenOrders(){const _0x51990f=_0x33a99e;let _0x4b8b49;allOpenOrders=[];try{for(const _0x3e2774 of config[_0x51990f(0x26b)]){!_0x3e2774['excluded']&&_0x3e2774[_0x51990f(0x1d5)]!=config['basecoin']&&(_0x4b8b49=await exchange[_0x51990f(0x2aa)](_0x3e2774[_0x51990f(0x2e1)]),_0x4b8b49[_0x51990f(0x16a)]>0x0&&allOpenOrders[_0x51990f(0x194)](_0x4b8b49[0x0]));}}catch(_0x38e2d6){await handleError(_0x38e2d6,_0x51990f(0x1d8));}}async function handleOpenOrders(_0x4c34d7=0x0){const _0x425e35=_0x33a99e;allOpenOrders[_0x425e35(0x16a)]==0x0&&lockOrders==ORDERS[_0x425e35(0x204)]&&allOrdersPlaced&&(_0x4c34d7==0x0?(logger[_0x425e35(0x29c)]('1\x20-\x20Handle\x20open\x20orders'),_0x4c34d7++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x425e35(0x197)),validateOrders(_0x425e35(0x2c7))));}async function testAPI(_0x217854){const _0x2f3fac=_0x33a99e,_0x4e97b8=ccxt[_0x217854[_0x2f3fac(0x293)]['toLowerCase']()],_0x569427=new _0x4e97b8({'apiKey':_0x217854[_0x2f3fac(0x196)],'secret':_0x217854[_0x2f3fac(0x19c)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});_0x217854[_0x2f3fac(0x293)]==_0x2f3fac(0x167)&&(_0x569427[_0x2f3fac(0x25c)]={'defaultType':_0x2f3fac(0x171)});if(_0x217854['apiPassword'])_0x569427[_0x2f3fac(0x2ae)]=_0x217854['apiPassword'];try{await _0x569427[_0x2f3fac(0x2df)]();}catch(_0x670056){throw _0x670056;}}function cloneDeep(_0x1a9a43){const _0x4315de=_0x33a99e;return JSON[_0x4315de(0x1a0)](JSON['stringify'](_0x1a9a43));}async function getPortfolio(_0x1b48af){const _0x18d6ac=_0x33a99e;let _0x2c13e8=[],_0x3fbaac=[],_0x10fd99=[],_0x39d050;if(_0x1b48af[_0x18d6ac(0x196)]!==_0x18d6ac(0x1e6)||_0x1b48af[_0x18d6ac(0x19c)]!==_0x18d6ac(0x1e6)||_0x1b48af[_0x18d6ac(0x1b6)]&&_0x1b48af[_0x18d6ac(0x1b6)]!==_0x18d6ac(0x1e6)){if(config['exchange']){if(_0x1b48af[_0x18d6ac(0x196)]=='************')_0x1b48af[_0x18d6ac(0x196)]=config[_0x18d6ac(0x196)];if(_0x1b48af['apiSecret']==_0x18d6ac(0x1e6))_0x1b48af['apiSecret']=config[_0x18d6ac(0x19c)];if(_0x1b48af[_0x18d6ac(0x1b6)]=='************')_0x1b48af[_0x18d6ac(0x1b6)]=config[_0x18d6ac(0x1b6)];try{await testAPI(_0x1b48af);}catch(_0x22e420){if(_0x22e420[_0x18d6ac(0x2c6)]()[_0x18d6ac(0x1a8)](_0x18d6ac(0x2bd))){logger[_0x18d6ac(0x29c)](_0x18d6ac(0x26c)),proxyEmit(_0x18d6ac(0x26b),![]);return;}else{handleError(_0x22e420,_0x18d6ac(0x205));return;}}}await initExchange(_0x1b48af['exchange'],_0x1b48af[_0x18d6ac(0x196)],_0x1b48af[_0x18d6ac(0x19c)],_0x1b48af[_0x18d6ac(0x1b6)]);try{await loadSymbols(_0x1b48af[_0x18d6ac(0x293)],!![]);}catch(_0x114b20){if(_0x114b20['toString']()[_0x18d6ac(0x1a8)](_0x18d6ac(0x2bd))){proxyEmit('portfolio',![]);return;}else{handleError(_0x114b20,_0x18d6ac(0x255));return;}}const _0x125bc6=await getCoins(![],_0x1b48af['basecoin']);_0x10fd99=cloneDeep(_0x125bc6[0x1]);}else _0x10fd99=cloneDeep(currentCoinsAll);if(_0x1b48af['basecoin']=='')proxyEmit('portfolio',_0x10fd99);else{_0x10fd99[_0x18d6ac(0x245)](_0x317f5f=>{const _0x2c1d71=_0x18d6ac;if(_0x317f5f['coin']!=_0x1b48af[_0x2c1d71(0x1d1)])_0x2c13e8[_0x2c1d71(0x194)](_0x317f5f[_0x2c1d71(0x2e1)]);});try{_0x3fbaac=await exchange[_0x18d6ac(0x207)](_0x2c13e8);}catch(_0xe6d17b){if(_0xe6d17b['toString']()[_0x18d6ac(0x1a8)](_0x18d6ac(0x2bd))){proxyEmit(_0x18d6ac(0x26b),![]);return;}else{handleError(_0xe6d17b,'getPortfolio(2)');return;}}_0x10fd99[_0x18d6ac(0x245)](_0x44a6b5=>{const _0x3c997f=_0x18d6ac;_0x44a6b5[_0x3c997f(0x1d5)]!=_0x1b48af[_0x3c997f(0x1d1)]?_0x39d050=_0x44a6b5[_0x3c997f(0x29e)]?0x1/_0x3fbaac[_0x44a6b5[_0x3c997f(0x2e1)]]['last']:_0x3fbaac[_0x44a6b5[_0x3c997f(0x2e1)]][_0x3c997f(0x22d)]:_0x39d050=0x1,_0x44a6b5['price']=formatResult(_0x39d050,0x8);}),proxyEmit(_0x18d6ac(0x26b),_0x10fd99);}}function truncateTradeAmount(_0x50ced9,_0x5668c4){let _0x4f1890=0x0;try{_0x4f1890=exchange['amountToPrecision'](_0x50ced9,_0x5668c4);}catch(_0x5b0cea){}return _0x4f1890;}function checkMinimums(_0x82b4b3){const _0x5b30eb=_0x33a99e;let _0x2e38f5=!![];const _0x4151d3=!_0x82b4b3[_0x5b30eb(0x29e)]?markets[_0x82b4b3[_0x5b30eb(0x2e1)]][_0x5b30eb(0x23a)]['amount']['min']:markets[_0x82b4b3[_0x5b30eb(0x2e1)]]['limits'][_0x5b30eb(0x1c5)][_0x5b30eb(0x1d2)],_0x293a03=!_0x82b4b3['reverse']?markets[_0x82b4b3['symbol']][_0x5b30eb(0x23a)][_0x5b30eb(0x1c5)][_0x5b30eb(0x1d2)]:markets[_0x82b4b3['symbol']][_0x5b30eb(0x23a)]['amount']['min'],_0x3a261=truncateTradeAmount(_0x82b4b3[_0x5b30eb(0x2e1)],_0x82b4b3['trade']);_0x82b4b3['trade']=_0x3a261;if(Math['abs'](_0x3a261)<_0x4151d3)_0x2e38f5=![];if(Math[_0x5b30eb(0x22f)](_0x3a261)*_0x82b4b3[_0x5b30eb(0x22d)]<_0x293a03)_0x2e38f5=![];if(_0x82b4b3[_0x5b30eb(0x1bf)]==_0x5b30eb(0x25b)){let _0x210b6e=config['portfolio']['find'](_0x171232=>_0x171232['coin']==_0x82b4b3[_0x5b30eb(0x1d5)]);if(_0x210b6e['offset']>0x0){if(Math[_0x5b30eb(0x22f)](_0x3a261)>_0x82b4b3[_0x5b30eb(0x1c3)]-_0x210b6e['offset'])_0x2e38f5=![];}else{if(Math[_0x5b30eb(0x22f)](_0x3a261)>_0x82b4b3['number'])_0x2e38f5=![];}}if(_0x82b4b3[_0x5b30eb(0x1bf)]=='buy'){let _0x1f776a=config[_0x5b30eb(0x26b)][_0x5b30eb(0x165)](_0x7dee4f=>_0x7dee4f[_0x5b30eb(0x1d5)]==config['basecoin']),_0x24bd8a=currentCoins[_0x5b30eb(0x165)](_0x461927=>_0x461927['coin']==config[_0x5b30eb(0x1d1)]);if(_0x1f776a[_0x5b30eb(0x247)]>0x0){if(Math[_0x5b30eb(0x22f)](_0x3a261)*_0x82b4b3[_0x5b30eb(0x22d)]>_0x24bd8a['number']-_0x1f776a[_0x5b30eb(0x247)])_0x2e38f5=![];}else{if(Math[_0x5b30eb(0x22f)](_0x3a261)*_0x82b4b3[_0x5b30eb(0x22d)]>_0x24bd8a['number'])_0x2e38f5=![];}}return _0x2e38f5;}async function getBalances(_0x102baa=!![]){const _0x289dcc=_0x33a99e;let _0x584226=0x0,_0x1f651b;const _0x112b74=config[_0x289dcc(0x1f1)];if(config[_0x289dcc(0x2cd)]&&config[_0x289dcc(0x1b9)]<0x0)await validate24hChanges();currentCoins[_0x289dcc(0x245)](_0x5eb7b0=>{const _0x829a1c=_0x289dcc;if(_0x5eb7b0[_0x829a1c(0x1d5)]!=config['basecoin']){let _0x14740a=global[_0x829a1c(0x25e)][noslash(_0x5eb7b0[_0x829a1c(0x2e1)])];_0x1f651b=_0x5eb7b0[_0x829a1c(0x29e)]?0x1/_0x14740a:_0x14740a;}else _0x1f651b=0x1;let _0x50953d=_0x5eb7b0['number']*_0x1f651b;_0x584226+=_0x50953d,_0x5eb7b0['last']=formatResult(Number(_0x1f651b),0x8),_0x5eb7b0[_0x829a1c(0x290)]=_0x50953d;}),currentCoins[_0x289dcc(0x245)](_0x240c46=>{const _0x412733=_0x289dcc;let _0x5d0bab=config[_0x412733(0x26b)]['find'](_0xa27db5=>_0xa27db5[_0x412733(0x1d5)]==_0x240c46[_0x412733(0x1d5)]),_0x5c6e9a=Number(_0x5d0bab[_0x412733(0x1e2)]),_0x5391e6=_0x240c46[_0x412733(0x290)]/_0x584226*0x64,_0xe384e2=_0x5c6e9a*_0x584226/0x64/_0x240c46[_0x412733(0x22d)]-_0x240c46[_0x412733(0x1c3)];_0x240c46['distribution']=formatResult(_0x5391e6,0x3),_0x240c46['target']=formatResult(_0x5c6e9a,0x3),_0x240c46['trade']=formatResult(_0xe384e2,0x8),_0x240c46['side']='',_0x240c46[_0x412733(0x2a1)]=![];if(_0x240c46['coin']!=config[_0x412733(0x1d1)]){if(_0x240c46[_0x412733(0x1e2)]>_0x5c6e9a)_0x240c46[_0x412733(0x1bf)]='sell',_0x240c46['valid']=checkMinimums(_0x240c46);else _0x240c46['distribution']<_0x5c6e9a&&(_0x240c46['side']='buy',_0x240c46[_0x412733(0x2a1)]=checkMinimums(_0x240c46));}_0x240c46[_0x412733(0x1ef)]=_0x240c46[_0x412733(0x1e2)]/_0x240c46[_0x412733(0x2d9)]-0x1;if(_0x240c46[_0x412733(0x223)]==_0x412733(0x2a5)||_0x240c46[_0x412733(0x223)]==_0x412733(0x161))_0x240c46[_0x412733(0x223)]=_0x412733(0x201);}),currentCoins[_0x289dcc(0x2de)]((_0x2bc1b9,_0x9f6d42)=>_0x2bc1b9[_0x289dcc(0x1ef)]<_0x9f6d42[_0x289dcc(0x1ef)]?0x1:_0x9f6d42[_0x289dcc(0x1ef)]<_0x2bc1b9[_0x289dcc(0x1ef)]?-0x1:0x0);const _0x121e2c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x121e2c[_0x289dcc(0x15f)],'usd':_0x121e2c[_0x289dcc(0x2b6)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x112b74},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x102baa){if(config[_0x289dcc(0x2cd)])headlessMode({'portfolio':currentCoins,'threshold':_0x112b74});else{if(lockOrders==ORDERS[_0x289dcc(0x21b)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x112b74});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x53119e=getNormalizedPerformance();getStartingBalances(_0x53119e),emitPerformance(_0x53119e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x1df09c=getNormalizedPerformance();emitPerformance(_0x1df09c),getStartingBalances(_0x1df09c),logger['debug']('Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated');}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x19f834=_0x33a99e;if(!lastBalances)return;let _0x424b40=[],_0x565a64,_0x2e91e0=JSON[_0x19f834(0x1a0)](lastBalances[_0x19f834(0x26b)]);_0x2e91e0['sort']((_0x41a75a,_0x48ebd0)=>_0x41a75a['coin']>_0x48ebd0[_0x19f834(0x1d5)]?0x1:_0x48ebd0[_0x19f834(0x1d5)]>_0x41a75a[_0x19f834(0x1d5)]?-0x1:0x0),_0x2e91e0['forEach'](_0x46ca37=>{const _0x2b7b6b=_0x19f834;let _0xec554a={'coin':_0x46ca37['coin'],'number':_0x46ca37[_0x2b7b6b(0x1c3)],'price':_0x46ca37[_0x2b7b6b(0x22d)]};_0x424b40[_0x2b7b6b(0x194)](_0xec554a);});const _0x25dd27=await getFiat();_0x565a64={'date':lastBalances['time'][_0x19f834(0x29b)]('\x20')[0x0],'eur':_0x25dd27[_0x19f834(0x15f)],'usd':_0x25dd27['usd'],'coins':_0x424b40};let _0x36dde8=dbPerformance[_0x19f834(0x294)]('data')[_0x19f834(0x165)]({'date':_0x565a64[_0x19f834(0x1c9)]})[_0x19f834(0x290)]();_0x36dde8?_0x565a64['date']!=config[_0x19f834(0x1c6)]&&dbPerformance[_0x19f834(0x294)](_0x19f834(0x232))[_0x19f834(0x165)]({'date':_0x565a64['date']})['assign'](_0x565a64)[_0x19f834(0x26f)]():dbPerformance[_0x19f834(0x294)](_0x19f834(0x232))[_0x19f834(0x194)](_0x565a64)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x103679=_0x33a99e;let _0x4481c4=[];if(dbPerformance[_0x103679(0x1e5)]('data')[_0x103679(0x290)]()){let _0x1bf8d4=dbPerformance[_0x103679(0x294)](_0x103679(0x232))[_0x103679(0x263)]()[_0x103679(0x1da)](_0x10b732=>{const _0x15358a=_0x103679;if(_0x10b732[_0x15358a(0x1b3)]['length']==0x0)return![];else return!![];})[_0x103679(0x2db)]('date')[_0x103679(0x290)](),_0x44802c=[...config[_0x103679(0x243)]];_0x44802c[_0x103679(0x2de)]((_0x53b255,_0x507b75)=>_0x53b255[_0x103679(0x1c9)]>_0x507b75['date']?-0x1:_0x507b75['date']>_0x53b255['date']?0x1:0x0);let _0xf829ca=0x1,_0x38f25e=[],_0x15f5d5=0x0;_0x1bf8d4[_0x103679(0x2c1)]()[_0x103679(0x29e)]()[_0x103679(0x245)]((_0x8ebb92,_0x46d666)=>{const _0x49b8ea=_0x103679;if(_0x44802c[_0x15f5d5]){if(_0x1bf8d4[_0x1bf8d4[_0x49b8ea(0x16a)]-_0x46d666]&&_0x44802c[_0x15f5d5][_0x49b8ea(0x1c9)]==_0x1bf8d4[_0x1bf8d4['length']-_0x46d666]['date']){if(_0x46d666<_0x1bf8d4[_0x49b8ea(0x16a)]){let _0x3fc0a0=0x0,_0x4902a5=0x0;_0x1bf8d4[_0x1bf8d4[_0x49b8ea(0x16a)]-_0x46d666][_0x49b8ea(0x1b3)][_0x49b8ea(0x245)](_0x181dfc=>{const _0x2180ff=_0x49b8ea;_0x4902a5+=_0x181dfc[_0x2180ff(0x1c3)]*_0x181dfc['price'];}),_0x44802c[_0x15f5d5][_0x49b8ea(0x25f)][_0x49b8ea(0x245)](_0x32a99b=>{const _0x5c396d=_0x49b8ea;_0x3fc0a0+=_0x32a99b[_0x5c396d(0x1c3)]*_0x32a99b[_0x5c396d(0x238)];}),_0xf829ca*=_0x3fc0a0/(_0x4902a5-_0x3fc0a0)+0x1;}_0x15f5d5++;}}let _0x3cb2c6=0x0;_0x8ebb92[_0x49b8ea(0x1b3)][_0x49b8ea(0x245)](_0x4be142=>{const _0x3e19c5=_0x49b8ea;_0x3cb2c6+=_0x4be142[_0x3e19c5(0x1c3)]*_0x4be142['price'];}),_0x38f25e[_0x1bf8d4[_0x49b8ea(0x16a)]-_0x46d666-0x1]=_0x3cb2c6*(_0xf829ca-0x1);});let _0x3b2406=[];_0x44802c=[...config[_0x103679(0x243)]]||[];let _0x39a224=0x0;_0x15f5d5=0x0,_0x1bf8d4['forEach']((_0x57e1ee,_0x1ae828)=>{const _0xd9a105=_0x103679;if(_0x44802c[_0x15f5d5]){const _0x28a71c=fns['parse'](_0x44802c[_0x15f5d5][_0xd9a105(0x1c9)],_0xd9a105(0x164),new Date()),_0x4a980b=fns[_0xd9a105(0x1a0)](_0x57e1ee[_0xd9a105(0x1c9)],_0xd9a105(0x164),new Date());if(fns[_0xd9a105(0x1cc)](_0x28a71c,_0x4a980b)){let _0x2ceee4=0x0;_0x44802c[_0x15f5d5][_0xd9a105(0x25f)][_0xd9a105(0x245)](_0x30f86b=>{const _0x491c2a=_0xd9a105;!_0x3b2406[_0x30f86b['coin']]?_0x3b2406[_0x30f86b['coin']]=_0x30f86b[_0x491c2a(0x1c3)]:(_0x2ceee4=_0x3b2406[_0x30f86b['coin']],_0x3b2406[_0x30f86b[_0x491c2a(0x1d5)]]+=_0x30f86b[_0x491c2a(0x1c3)]);const _0x39daad=_0x57e1ee[_0x491c2a(0x1b3)][_0x491c2a(0x165)](_0x2af90d=>_0x2af90d[_0x491c2a(0x1d5)]==_0x30f86b[_0x491c2a(0x1d5)]);(!_0x39daad||_0x39daad[_0x491c2a(0x1c3)]==0x0)&&(_0x39a224+=(-_0x30f86b[_0x491c2a(0x1c3)]-_0x2ceee4)*_0x30f86b[_0x491c2a(0x238)]);}),_0x15f5d5++;}}_0x57e1ee['coins'][_0xd9a105(0x245)]((_0x257d04,_0x719615)=>{const _0x113059=_0xd9a105;_0x3b2406[_0x257d04[_0x113059(0x1d5)]]&&(_0x257d04[_0x113059(0x222)]=_0x3b2406[_0x257d04[_0x113059(0x1d5)]]);}),_0x4481c4[_0xd9a105(0x194)]({'date':_0x57e1ee['date'],'eur':_0x57e1ee['eur'],'usd':_0x57e1ee[_0xd9a105(0x2b6)],'offset':_0x38f25e[_0x1ae828],'netoffset':_0x39a224,'coins':_0x57e1ee[_0xd9a105(0x1b3)]});});}return _0x4481c4;}function emitPerformance(_0x1466ad){const _0x27819d=_0x33a99e;_0x1466ad['length']!==0x0?(proxyEmit(_0x27819d(0x1f9),_0x1466ad),lastPerformanceEmitted=getDate()):proxyEmit(_0x27819d(0x1f9),[]);}function getPerf(_0x35c1ad,_0x2d4657){const _0x5be308=_0x33a99e;let _0x118d2e=0x0,_0x1c002e=0x0,_0x209832=0x0;_0x35c1ad['coins']['forEach'](_0x3ecebd=>{const _0x3d90fe=_0x841b;_0x118d2e+=_0x3ecebd[_0x3d90fe(0x1c3)]*_0x3ecebd[_0x3d90fe(0x238)];});_0x2d4657&&(_0x118d2e+=_0x35c1ad['offset']);if(config[_0x5be308(0x1d1)]===_0x5be308(0x227)||config['basecoin']===_0x5be308(0x261))_0x1c002e=_0x118d2e*_0x35c1ad['eur'],_0x209832=_0x118d2e*_0x35c1ad[_0x5be308(0x2b6)];else{if(usdBasecoins[_0x5be308(0x1a8)](config[_0x5be308(0x1d1)]))_0x1c002e=_0x118d2e*_0x35c1ad[_0x5be308(0x15f)]/_0x35c1ad[_0x5be308(0x2b6)],_0x209832=_0x118d2e;else config['basecoin']===_0x5be308(0x28f)&&(_0x1c002e=_0x118d2e,_0x209832=_0x118d2e*_0x35c1ad[_0x5be308(0x2b6)]/_0x35c1ad[_0x5be308(0x15f)]);}return[_0x118d2e,_0x1c002e,_0x209832];}function getKPIs(_0xb75a0f,_0x5e73a2=_0x33a99e(0x28f)){const _0x640001=_0x33a99e,_0x2fb960=config['basecoin'],_0x994bfc=lastBalances,_0xfd7e33=currentCoins,_0x1c1df7=getNormalizedPerformance(),_0x3aa182=_0xb75a0f===_0x640001(0x1d1)?_0x2fb960:_0xb75a0f===_0x640001(0x15d)||_0xb75a0f===_0x640001(0x2a2)?_0x5e73a2:_0x640001(0x15b)+_0x2fb960,_0x3b7011=_0xb75a0f===_0x640001(0x181)?_0x640001(0x291):_0xb75a0f===_0x640001(0x2a2)?'Net\x20effect':_0x3aa182+_0x640001(0x2b0),_0x2348d8=_0xb75a0f===_0x640001(0x181)||_0xb75a0f===_0x640001(0x2a2)?'Net\x20effect':_0x3aa182+_0x640001(0x1fc);let _0x21f831=0x0;_0xfd7e33[_0x640001(0x245)](_0x5dca5e=>{_0x21f831+=_0x5dca5e['number']*_0x5dca5e['last'];});if(_0xb75a0f===_0x640001(0x15d)||_0xb75a0f===_0x640001(0x2a2)){if(_0x2fb960==='BTC'||_0x2fb960===_0x640001(0x261))_0x21f831=_0x21f831*(_0x5e73a2===_0x640001(0x28f)?_0x994bfc[_0x640001(0x15f)]:_0x994bfc[_0x640001(0x2b6)]);else{if(usdBasecoins[_0x640001(0x1a8)](_0x2fb960))_0x21f831=_0x21f831*(_0x5e73a2===_0x640001(0x28f)?_0x994bfc[_0x640001(0x15f)]/_0x994bfc[_0x640001(0x2b6)]:0x1);else _0x2fb960===_0x640001(0x28f)&&(_0x21f831=_0x21f831*(_0x5e73a2==='EUR'?0x1:_0x994bfc[_0x640001(0x2b6)]/_0x994bfc[_0x640001(0x15f)]));}}let _0x3551b1;if(_0x21f831!==0x0){if(_0xb75a0f===_0x640001(0x1d1))_0x3551b1=(_0x21f831/startingBalances['basecoin']-0x1)*0x64;else{if(_0x5e73a2===_0x640001(0x28f))_0x3551b1=(_0x21f831/startingBalances['eur']-0x1)*0x64;else _0x3551b1=(_0x21f831/startingBalances[_0x640001(0x2b6)]-0x1)*0x64;}let _0x31c149=0x0;if(startingBalances[_0x640001(0x1b3)])_0xfd7e33[_0x640001(0x245)](_0x5107b6=>{const _0x534508=_0x640001;let _0x1332fe=startingBalances[_0x534508(0x1b3)][_0x534508(0x165)](_0x23aeaf=>_0x23aeaf[_0x534508(0x1d5)]===_0x5107b6[_0x534508(0x1d5)]);if(_0x1332fe&&_0x1332fe['coin']&&_0x5107b6[_0x534508(0x1c3)]!==0x0)_0x31c149+=_0x1332fe[_0x534508(0x1c3)]*_0x5107b6[_0x534508(0x22d)];});let _0x4af326=0x0;if(_0x1c1df7[_0x640001(0x16a)]!==0x0){let _0x2c03e2=_0x1c1df7[_0x1c1df7[_0x640001(0x16a)]-0x1];_0x4af326=_0x2c03e2['netoffset'];}_0x31c149-=_0x4af326;_0xb75a0f===_0x640001(0x181)&&(_0x3551b1=(_0x21f831-_0x31c149)/startingBalances[_0x640001(0x1d1)]*0x64,_0x21f831=_0x21f831-_0x31c149);if(_0xb75a0f==='net-fiat'){let _0x105799=_0x5e73a2==='EUR'?startingBalances[_0x640001(0x15f)]:startingBalances['usd'];if(_0x2fb960==='BTC'||_0x2fb960===_0x640001(0x261))_0x31c149=_0x5e73a2===_0x640001(0x28f)?_0x31c149*_0x994bfc[_0x640001(0x15f)]:_0x31c149*_0x994bfc['usd'];else{if(usdBasecoins['includes'](_0x2fb960))_0x31c149=_0x5e73a2===_0x640001(0x28f)?_0x31c149*_0x994bfc[_0x640001(0x15f)]/_0x994bfc[_0x640001(0x2b6)]:_0x31c149;else _0x2fb960===_0x640001(0x28f)&&(_0x31c149=_0x5e73a2===_0x640001(0x28f)?_0x31c149:_0x31c149*_0x994bfc[_0x640001(0x2b6)]/_0x994bfc[_0x640001(0x15f)]);}_0x3551b1=(_0x21f831-_0x31c149)/_0x105799*0x64,_0x21f831=_0x21f831-_0x31c149;}if(_0x3551b1){if(_0x3551b1<0x64)_0x3551b1=_0x3551b1[_0x640001(0x170)](0x2);else{if(_0x3551b1<0x3e8)_0x3551b1=_0x3551b1[_0x640001(0x170)](0x1);else _0x3551b1=_0x3551b1[_0x640001(0x170)](0x0);}}else _0x3551b1=Number('0')[_0x640001(0x170)](0x2);if(_0x21f831){if(Math['abs'](_0x21f831)<0.000001)_0x21f831=_0x21f831[_0x640001(0x170)](0x2);else{if(Math['abs'](_0x21f831)<0.1)_0x21f831=_0x21f831['toFixed'](0x6);else{if(Math[_0x640001(0x22f)](_0x21f831)<0x1)_0x21f831=_0x21f831['toFixed'](0x5);else{if(Math[_0x640001(0x22f)](_0x21f831)<0xa)_0x21f831=_0x21f831['toFixed'](0x4);else{if(Math['abs'](_0x21f831)<0x64)_0x21f831=_0x21f831['toFixed'](0x3);else{if(Math[_0x640001(0x22f)](_0x21f831)<0x3e8)_0x21f831=_0x21f831[_0x640001(0x170)](0x2);else _0x21f831=_0x21f831['toFixed'](0x2);}}}}}}else _0x21f831=Number('0')['toFixed'](0x2);}else _0x3551b1=Number('0')[_0x640001(0x170)](0x2);return{'value':_0x21f831,'change':_0x3551b1,'leftTxt':_0x3b7011,'rightTxt':_0x2348d8};}async function getStartingBalances(_0x160bc2,_0x67b259=!![]){const _0x340a2c=_0x33a99e;if(_0x160bc2[_0x340a2c(0x16a)]!==0x0){const [_0x43f014,_0x2ebb95,_0x535aba]=getPerf(_0x160bc2[0x0],!![]);let _0x4ff214=[];config[_0x340a2c(0x26b)][_0x340a2c(0x245)](_0x97977c=>{const _0x5d4e0b=_0x340a2c;let _0x3650a4=0x0,_0x3e2b0a;config[_0x5d4e0b(0x243)][_0x5d4e0b(0x245)](_0x55c719=>{const _0x4a10cd=_0x5d4e0b;let _0x54db5f=_0x55c719[_0x4a10cd(0x25f)]['find'](_0xb086bb=>_0xb086bb['coin']==_0x97977c['coin']);if(_0x54db5f){_0x3650a4+=_0x54db5f['number'];if(!_0x3e2b0a)_0x3e2b0a=_0x54db5f[_0x4a10cd(0x238)];}}),_0x4ff214[_0x5d4e0b(0x194)]({'coin':_0x97977c[_0x5d4e0b(0x1d5)],'number':_0x3650a4,'initialprice':_0x3e2b0a});});const _0x5de2ce={'basecoin':_0x43f014,'eur':_0x2ebb95,'usd':_0x535aba,'coins':_0x4ff214};if(_0x67b259)proxyEmit(_0x340a2c(0x195),_0x5de2ce);startingBalances=_0x5de2ce;}}function headlessMode(_0x13e9f8){const _0xda99a2=_0x33a99e;let _0x28ea2b=_0x13e9f8[_0xda99a2(0x26b)],_0xeddf35=_0x13e9f8['threshold'],_0x3b86fd=[];for(let _0x41e902 of _0x28ea2b){if(_0x41e902[_0xda99a2(0x1d5)]!=config['basecoin']){if(_0x41e902[_0xda99a2(0x1ef)]>=_0xeddf35/0x64){if(_0x41e902['valid'])_0x3b86fd[_0xda99a2(0x194)](_0x41e902);}else{if(_0x41e902[_0xda99a2(0x1ef)]<=-_0xeddf35/0x64){if(_0x41e902[_0xda99a2(0x2a1)])_0x3b86fd[_0xda99a2(0x194)](_0x41e902);}}}}_0x3b86fd[_0xda99a2(0x16a)]>0x0&&placeOrder(_0x3b86fd);}function notifyBalance(_0x598068){const _0x3543e3=_0x33a99e;let _0x249108=_0x598068['portfolio'],_0x53f024=_0x598068[_0x3543e3(0x1f1)],_0x2ec01a=[];for(let _0x1e9370 of _0x249108){if(_0x1e9370['coin']!=config[_0x3543e3(0x1d1)]){if(_0x1e9370[_0x3543e3(0x1ef)]>=_0x53f024/0x64){if(_0x1e9370['valid'])_0x2ec01a[_0x3543e3(0x194)](_0x1e9370);}else{if(_0x1e9370['delta']<=-_0x53f024/0x64){if(_0x1e9370['valid'])_0x2ec01a[_0x3543e3(0x194)](_0x1e9370);}}}}if(_0x2ec01a[_0x3543e3(0x16a)]>0x0){let _0x2ae90f=_0x2ec01a[_0x3543e3(0x1e9)](_0x1209d1=>_0x1209d1[_0x3543e3(0x1d5)]);_0x2ae90f['sort']();let _0x15beb0=_0x2ae90f[_0x3543e3(0x2c0)](',\x20');if(!lastCoinsToBalance)logHistory(_0x3543e3(0x17e),'Manual\x20balancing\x20required');lastCoinsToBalance=_0x15beb0;}}function symbolToCoin(_0x5cbec2){const _0x3e73eb=_0x33a99e;let _0x410154;if(_0x5cbec2[_0x3e73eb(0x1a8)]('/'+config[_0x3e73eb(0x1d1)]))_0x410154=_0x5cbec2[_0x3e73eb(0x250)]('/'+config['basecoin'],'');if(_0x5cbec2[_0x3e73eb(0x1a8)](config['basecoin']+'/'))_0x410154=_0x5cbec2[_0x3e73eb(0x250)](config[_0x3e73eb(0x1d1)]+'/','');return _0x410154;}async function unlockOrders(){const _0x310245=_0x33a99e;if(allOrdersPlaced&&lockOrders==ORDERS[_0x310245(0x204)]){logger['debug']('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS[_0x310245(0x1c4)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5ef38f=await getCoins();[currentCoins,currentCoinsAll]=_0x5ef38f,validateOrdersState='initial',persistOpenOrders([]),lockOrders=ORDERS[_0x310245(0x21b)],logger['debug'](_0x310245(0x176));}}async function validateOrders(_0x40dbe2){const _0x25202e=_0x33a99e;if(_0x40dbe2)validateOrdersState=_0x40dbe2;logger[_0x25202e(0x29c)]('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x25202e(0x26a)+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?'ORDERS.UNLOCKING':_0x25202e(0x2dc)));let _0xe9d599=[],_0x2830d9=config['ordertype']==_0x25202e(0x211)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x25202e(0x1dc)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x25202e(0x204)])return;logger['debug'](_0x25202e(0x1f2)+validateOrdersState),lastOrders['forEach'](_0x1907a8=>{const _0x231e3d=_0x25202e;let _0x3cd2a7=![];_0x1907a8[_0x231e3d(0x2a5)]>0x0&&(_0x3cd2a7=!![]),_0xe9d599[_0x231e3d(0x194)](_0x3cd2a7),_0x3cd2a7&&config[_0x231e3d(0x27e)]!=_0x231e3d(0x211)&&logHistory(_0x231e3d(0x26e),_0x231e3d(0x1e0)+_0x1907a8[_0x231e3d(0x2e1)]+'\x20'+_0x1907a8[_0x231e3d(0x1bf)]+'\x20#'+formatResult(_0x1907a8[_0x231e3d(0x2a5)],0x8)+'\x20@'+formatResult(_0x1907a8[_0x231e3d(0x238)],0x8));}),_0xe9d599[_0x25202e(0x245)]((_0x362821,_0x308098)=>{const _0x444b47=_0x25202e;if(_0x362821)lastOrders[_0x444b47(0x283)](_0x308098,0x1);}),persistOpenOrders(lastOrders);const _0x33c3a3=coolingDown?_0x25202e(0x168):'balancing\x20resumed';if(validateOrdersState==_0x25202e(0x222)){validateOrdersState=_0x25202e(0x1df);if(_0xe9d599[_0x25202e(0x1a8)](![])){if(config['ordertype']=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0xe9d599[_0x25202e(0x1a8)](![])){}else{if(allOrdersPlaced){if(config[_0x25202e(0x27e)]==_0x25202e(0x211)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x25202e(0x2a3))_0xe9d599[_0x25202e(0x1a8)](![])&&(config[_0x25202e(0x27e)]==_0x25202e(0x211)?logHistory(_0x25202e(0x278),_0x25202e(0x192)+Math['round'](_0x2830d9*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x33c3a3):(await cancelOrders(),logHistory(_0x25202e(0x278),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x25202e(0x1ff)](_0x2830d9*validateOrderInterval/0xea60)+_0x25202e(0x212)+_0x33c3a3))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x25202e(0x27e)]!=_0x25202e(0x211))logHistory(_0x25202e(0x278),'No\x20more\x20open\x20orders\x20-\x20'+_0x33c3a3);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x52d512=>{const _0x5ca01a=_0x841b;try{const _0x1fbc0f=await exchange['cancelOrder'](_0x52d512['orderId'],_0x52d512[_0x5ca01a(0x2e1)]);}catch(_0x3c6d39){if(_0x3c6d39[_0x5ca01a(0x2c6)]()['includes'](_0x5ca01a(0x1b0))){}else await handleError(_0x3c6d39,_0x5ca01a(0x203));}});}async function initCoinResults(_0x1a809d){const _0x56596b=_0x33a99e;_0x1a809d?logger[_0x56596b(0x29c)]('Resetting\x20coin\x20results:\x20'+_0x1a809d):logger[_0x56596b(0x29c)](_0x56596b(0x1b1)),config[_0x56596b(0x26b)][_0x56596b(0x245)](_0x5e5267=>{const _0x2e9237=_0x56596b;if(!_0x5e5267['excluded']&&_0x5e5267[_0x2e9237(0x1d5)]!=config['basecoin']){const _0x4e6bd0=currentCoins[_0x2e9237(0x165)](_0xe84a79=>_0xe84a79[_0x2e9237(0x1d5)]==_0x5e5267[_0x2e9237(0x1d5)]),_0x1b75f7=global['ticker'][noslash(_0x5e5267[_0x2e9237(0x2e1)])];let _0x16b9cf=_0x4e6bd0?_0x4e6bd0[_0x2e9237(0x1c3)]:null,_0x1c305e=_0x5e5267['reverse']?0x1/_0x1b75f7:_0x1b75f7,_0x141446;config[_0x2e9237(0x243)][_0x2e9237(0x245)](_0x16d008=>{const _0x27210f=_0x2e9237;!_0x141446&&(_0x141446=_0x16d008[_0x27210f(0x25f)][_0x27210f(0x165)](_0x1d2998=>_0x1d2998[_0x27210f(0x1d5)]==_0x5e5267[_0x27210f(0x1d5)]),_0x141446&&(_0x16b9cf=_0x141446['number'],_0x1c305e=_0x141446[_0x27210f(0x238)]));});let _0x2b2ae0=dbCoinResults[_0x2e9237(0x294)]('coins')[_0x2e9237(0x165)]({'coin':_0x5e5267[_0x2e9237(0x1d5)]})[_0x2e9237(0x290)]();if(!_0x2b2ae0){const _0x575893={'coin':_0x5e5267[_0x2e9237(0x1d5)],'number':_0x16b9cf,'breakeven':_0x1c305e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e9237(0x294)](_0x2e9237(0x1b3))[_0x2e9237(0x194)](_0x575893)[_0x2e9237(0x26f)]();}else{if(_0x1a809d&&_0x5e5267[_0x2e9237(0x1d5)]==_0x1a809d){const _0x232f02={'coin':_0x5e5267[_0x2e9237(0x1d5)],'number':_0x16b9cf,'breakeven':_0x1c305e,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2e9237(0x294)]('coins')[_0x2e9237(0x165)]({'coin':_0x5e5267[_0x2e9237(0x1d5)]})[_0x2e9237(0x279)](_0x232f02)[_0x2e9237(0x26f)]();}}}});}async function updateCoinResults(_0x45e6ad,_0x48e818=![]){const _0x52510d=_0x33a99e;let _0x427474,_0x25018a,_0x5d0851,_0x26c9b2,_0x3e3e82,_0x291c56,_0x518acc=dbCoinResults['get'](_0x52510d(0x1b3))['find']({'coin':_0x45e6ad['coin']})[_0x52510d(0x290)](),_0x11558e=![];Object[_0x52510d(0x282)](_0x518acc)['forEach'](([_0x3bcde2,_0x3896b5])=>{if(_0x3896b5==null)_0x11558e=!![];});(!_0x518acc||_0x11558e)&&(await initCoinResults(_0x45e6ad[_0x52510d(0x1d5)]),_0x518acc=dbCoinResults[_0x52510d(0x294)]('coins')[_0x52510d(0x165)]({'coin':_0x45e6ad[_0x52510d(0x1d5)]})[_0x52510d(0x290)]());_0x45e6ad[_0x52510d(0x29e)]&&(_0x291c56={'filled':_0x45e6ad[_0x52510d(0x2a5)]*_0x45e6ad[_0x52510d(0x238)],'amount':_0x45e6ad[_0x52510d(0x2a5)]*_0x45e6ad[_0x52510d(0x238)],'side':_0x45e6ad[_0x52510d(0x1bf)]=='sell'?_0x52510d(0x228):'sell','price':0x1/_0x45e6ad[_0x52510d(0x238)]},_0x45e6ad={..._0x45e6ad,..._0x291c56});_0x48e818?_0x25018a=_0x45e6ad[_0x52510d(0x1bf)]==_0x52510d(0x228)?_0x518acc[_0x52510d(0x1c3)]+_0x45e6ad['filled']:_0x518acc[_0x52510d(0x1c3)]-_0x45e6ad['filled']:_0x25018a=await getCoinNumber(_0x45e6ad['coin']);if(_0x45e6ad[_0x52510d(0x19f)]&&_0x45e6ad[_0x52510d(0x19f)]['currency']==config[_0x52510d(0x1d1)])_0x427474=_0x45e6ad['fee'][_0x52510d(0x1c5)];else{if(_0x45e6ad[_0x52510d(0x19f)]&&_0x45e6ad[_0x52510d(0x19f)][_0x52510d(0x1d6)]==_0x52510d(0x213)&&!_0x48e818)_0x427474=_0x45e6ad['fee']['cost']*global[_0x52510d(0x25e)][_0x52510d(0x213)+config[_0x52510d(0x1d1)]];else _0x427474=defaultFee*_0x45e6ad[_0x52510d(0x2a5)]*_0x45e6ad[_0x52510d(0x238)];}_0x45e6ad[_0x52510d(0x1bf)]=='buy'?(_0x5d0851=_0x25018a!=0x0?(_0x518acc[_0x52510d(0x1fe)]*_0x518acc[_0x52510d(0x1c3)]+_0x45e6ad[_0x52510d(0x238)]*(_0x25018a-_0x518acc[_0x52510d(0x1c3)])+_0x427474)/_0x25018a:0x0,_0x26c9b2=_0x518acc[_0x52510d(0x21e)]):(_0x5d0851=_0x25018a!=0x0?(_0x518acc['breakeven']*_0x518acc[_0x52510d(0x1c3)]-_0x45e6ad['price']*(_0x518acc['number']-_0x25018a)+_0x427474)/_0x25018a:0x0,_0x26c9b2=_0x518acc[_0x52510d(0x21e)]+(_0x45e6ad[_0x52510d(0x238)]-_0x518acc[_0x52510d(0x1fe)])*_0x45e6ad[_0x52510d(0x2a5)]);_0x3e3e82=(_0x45e6ad['price']-_0x5d0851-_0x427474/_0x45e6ad['filled'])*_0x25018a;let _0x4f3f0b={'coin':_0x45e6ad[_0x52510d(0x1d5)],'number':_0x25018a,'breakeven':formatResult(_0x5d0851,0x8),'realized':formatResult(_0x26c9b2,0x8),'unrealized':formatResult(_0x3e3e82,0x8),'fees':formatResult(_0x518acc['fees']+_0x427474,0x8),'sells':_0x45e6ad[_0x52510d(0x1bf)]==_0x52510d(0x25b)?_0x518acc[_0x52510d(0x210)]+0x1:_0x518acc[_0x52510d(0x210)],'buys':_0x45e6ad[_0x52510d(0x1bf)]==_0x52510d(0x228)?_0x518acc[_0x52510d(0x2c2)]+0x1:_0x518acc[_0x52510d(0x2c2)]};dbCoinResults['get'](_0x52510d(0x1b3))[_0x52510d(0x165)]({'coin':_0x45e6ad['coin']})['assign'](_0x4f3f0b)[_0x52510d(0x26f)]();if(!_0x48e818){if(_0x45e6ad['fee']&&_0x45e6ad[_0x52510d(0x19f)][_0x52510d(0x1d6)]==_0x52510d(0x213)){const _0x3db1dd=currentCoins[_0x52510d(0x165)](_0x238038=>_0x238038[_0x52510d(0x1d5)]==_0x52510d(0x213));if(_0x3db1dd){let _0x143a2c=dbCoinResults[_0x52510d(0x294)](_0x52510d(0x1b3))[_0x52510d(0x165)]({'coin':_0x52510d(0x213)})[_0x52510d(0x290)]();_0x4f3f0b={..._0x143a2c,'number':_0x3db1dd['number']},dbCoinResults[_0x52510d(0x294)](_0x52510d(0x1b3))[_0x52510d(0x165)]({'coin':_0x52510d(0x213)})[_0x52510d(0x279)](_0x4f3f0b)[_0x52510d(0x26f)]();}}}}async function placeOrder(_0x33d5f9){const _0x41fe99=_0x33a99e,_0x117a0e=config['ordertype']==_0x41fe99(0x211)?_0x41fe99(0x211):_0x41fe99(0x18c);if(lockOrders==ORDERS[_0x41fe99(0x21b)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x41fe99(0x204)],allOrdersPlaced=![],validateOrdersState='initial';let _0x3bae66=![];lastOrders=[];for(const _0x38147e of _0x33d5f9){let _0x5833aa,_0x5abcdb,_0x9d9ca9,_0x10577b,_0x15aee0,_0x2f1792=_0x38147e[_0x41fe99(0x2e1)];try{const _0x617298=await exchange['fetchTicker'](_0x2f1792);_0x5833aa=_0x38147e['reverse']?0x1/_0x38147e[_0x41fe99(0x22d)]:_0x38147e[_0x41fe99(0x22d)],_0x5abcdb=_0x617298['bid'],_0x9d9ca9=_0x617298[_0x41fe99(0x162)];_0x38147e[_0x41fe99(0x29e)]?(_0x10577b=_0x38147e[_0x41fe99(0x1bf)]==_0x41fe99(0x228)?_0x41fe99(0x25b):_0x41fe99(0x228),_0x15aee0=Math[_0x41fe99(0x22f)](_0x38147e['trade'])/_0x5833aa):(_0x10577b=_0x38147e['side'],_0x15aee0=Math[_0x41fe99(0x22f)](_0x38147e['trade']));_0x117a0e==_0x41fe99(0x18c)&&(config[_0x41fe99(0x27e)]==_0x41fe99(0x1a9)&&(_0x5833aa=_0x10577b==_0x41fe99(0x228)?_0x5abcdb:_0x9d9ca9),config[_0x41fe99(0x27e)]==_0x41fe99(0x1af)&&(_0x5833aa=_0x10577b==_0x41fe99(0x228)?_0x9d9ca9:_0x5abcdb));_0x15aee0=formatResult(_0x15aee0,0x8),_0x5833aa=formatResult(_0x5833aa,0x8);const _0x4f138d=_0x10577b==_0x41fe99(0x25b)?config['emojisell']?String[_0x41fe99(0x264)]('0x'+config[_0x41fe99(0x253)])+'\x20':'':config[_0x41fe99(0x17d)]?String[_0x41fe99(0x264)]('0x'+config['emojibuy'])+'\x20':'',_0xb25f67=_0x117a0e==_0x41fe99(0x211)?'Market':config[_0x41fe99(0x27e)]=='limit-high'?_0x41fe99(0x1b2):_0x41fe99(0x2d1),_0x5bd9f8=(Math[_0x41fe99(0x2d7)](Math[_0x41fe99(0x1c2)]()*0x35a4e900)+0x5f5e100)[_0x41fe99(0x2c6)]();lastOrders[_0x41fe99(0x194)]({'customId':_0x5bd9f8,'symbol':_0x2f1792,'coin':_0x38147e[_0x41fe99(0x1d5)],'amount':_0x15aee0,'price':_0x5833aa,'side':_0x10577b,'reverse':_0x38147e[_0x41fe99(0x29e)],'filled':0x0});if(_0x117a0e==_0x41fe99(0x211))logHistory(_0x41fe99(0x26e),''+_0x4f138d+_0xb25f67+_0x41fe99(0x186)+_0x2f1792+'\x20'+_0x10577b+'\x20#'+formatResult(_0x15aee0,0x8)+'\x20@'+formatResult(_0x5833aa,0x8));else logHistory(_0x41fe99(0x26e),''+_0x4f138d+_0xb25f67+_0x41fe99(0x186)+_0x2f1792+'\x20'+_0x10577b+'\x20#'+formatResult(_0x15aee0,0x8)+'\x20@'+formatResult(_0x5833aa,0x8));const _0x5e7852=await exchange['createOrder'](_0x2f1792,_0x117a0e,_0x10577b,_0x15aee0,_0x5833aa);logger[_0x41fe99(0x29c)](_0x41fe99(0x2dd)+_0x5e7852['id']+_0x41fe99(0x179)+_0x5bd9f8);const _0xfdba15=lastOrders[_0x41fe99(0x16a)]-0x1;if(_0xfdba15>=0x0&&lastOrders[_0xfdba15][_0x41fe99(0x27f)]==_0x5bd9f8){lastOrders[_0xfdba15][_0x41fe99(0x2b2)]=_0x5e7852['id'];if(_0x5e7852[_0x41fe99(0x209)])lastOrders[_0xfdba15][_0x41fe99(0x209)]=_0x5e7852['amount'];if(_0x5e7852[_0x41fe99(0x238)])lastOrders[_0xfdba15][_0x41fe99(0x238)]=_0x5e7852[_0x41fe99(0x238)];lastOrders[_0xfdba15]['fee']=_0x5e7852[_0x41fe99(0x19f)];}if(config[_0x41fe99(0x256)]!=0x0){let _0x2d823e=null;if(cooldownTracker[_0x41fe99(0x16a)]==config[_0x41fe99(0x256)]-0x1)_0x2d823e=cooldownTracker[_0x41fe99(0x1ee)]();const _0x503789=getTimeStamp();cooldownTracker[_0x41fe99(0x194)](_0x503789);if(_0x2d823e){const _0x29138c=fns[_0x41fe99(0x1c0)](new Date(_0x503789),new Date(_0x2d823e));if(_0x29138c<cooldownInterval){logHistory(_0x41fe99(0x242),_0x41fe99(0x2a8)+config[_0x41fe99(0x256)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x41fe99(0x199)+cooldownPeriod/(0xe10*0x3e8)+_0x41fe99(0x244)),coolingDown=!![];break;}}}}catch(_0x4cb650){if(_0x4cb650[_0x41fe99(0x2c6)]()[_0x41fe99(0x1a8)](_0x41fe99(0x2da)))lastOrders=lastOrders['filter'](_0x418cd6=>_0x418cd6['symbol']!=_0x2f1792),logHistory(_0x41fe99(0x242),_0x41fe99(0x17b)+_0x2f1792),_0x3bae66=!![];else{if(_0x4cb650['toString']()[_0x41fe99(0x1a8)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x41fe99(0x1da)](_0x1ee896=>_0x1ee896[_0x41fe99(0x2e1)]!=_0x2f1792),logHistory(_0x41fe99(0x242),_0x41fe99(0x1db)+_0x2f1792),_0x3bae66=!![];else{if(_0x4cb650[_0x41fe99(0x2c6)]()[_0x41fe99(0x1a8)](_0x41fe99(0x2b5)))lastOrders=lastOrders[_0x41fe99(0x1da)](_0x5550db=>_0x5550db['symbol']!=_0x2f1792),logHistory('error',_0x41fe99(0x1a4)+_0x2f1792),_0x3bae66=!![];else _0x4cb650[_0x41fe99(0x2c6)]()[_0x41fe99(0x1a8)](_0x41fe99(0x22c))?(lastOrders=lastOrders[_0x41fe99(0x1da)](_0x2dfa17=>_0x2dfa17['symbol']!=_0x2f1792),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2f1792),_0x3bae66=!![]):(lastOrders=lastOrders[_0x41fe99(0x1da)](_0x2b536f=>_0x2b536f[_0x41fe99(0x2e1)]!=_0x2f1792),await handleError(_0x4cb650,_0x41fe99(0x182),_0x2f1792));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x41fe99(0x16a)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x58cff4=config['ordertype']==_0x41fe99(0x211)?validateOrderTimeout*0x3c*0x3e8:config[_0x41fe99(0x1dc)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x41909a=_0x41fe99;validateOrders(_0x41909a(0x2a3));},_0x58cff4);}else unlockOrders();_0x3bae66&&config[_0x41fe99(0x2cd)]&&await pauseBot(_0x41fe99(0x239)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x41fe99(0x278),_0x41fe99(0x2d5)));}else{if(coolingDown)!config[_0x41fe99(0x2cd)]&&logHistory(_0x41fe99(0x242),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x41fe99(0x21b)]&&(!config[_0x41fe99(0x2cd)]&&(config[_0x41fe99(0x27e)]==_0x41fe99(0x211)?logHistory(_0x41fe99(0x242),_0x41fe99(0x2d3)):logHistory(_0x41fe99(0x242),_0x41fe99(0x2a4))));}}function persistOpenOrders(_0x4c3903){const _0x467517=_0x33a99e,_0x3d53cc={...config,'openOrders':_0x4c3903};let _0x1e21c9=dbConfig[_0x467517(0x294)](_0x467517(0x27d))[_0x467517(0x165)]({'botID':botID})['value']();_0x1e21c9&&dbConfig[_0x467517(0x294)](_0x467517(0x27d))[_0x467517(0x165)]({'botID':botID})[_0x467517(0x279)](_0x3d53cc)[_0x467517(0x26f)]();}function restoreOrders(){const _0x421d14=_0x33a99e;let _0x1c7394;config['openOrders']&&allOpenOrders[_0x421d14(0x245)](_0x32810a=>{const _0x13e9ac=_0x421d14,_0x3af21c=config[_0x13e9ac(0x15e)][_0x13e9ac(0x165)](_0x3122c2=>_0x3122c2[_0x13e9ac(0x2b2)]==_0x32810a['id']);_0x3af21c&&(lastOrders[_0x13e9ac(0x194)](_0x3af21c),_0x1c7394=_0x32810a[_0x13e9ac(0x277)]);});if(lastOrders[_0x421d14(0x16a)]>0x0){lockOrders=ORDERS[_0x421d14(0x204)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x1228dd=new Date()['getTime'](),_0x43b3e0=config[_0x421d14(0x27e)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x1c7394+_0x43b3e0>_0x1228dd){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x1c7394+_0x43b3e0-_0x1228dd);}else validateOrders(_0x421d14(0x2a3));}}async function sendMetricsTelegram(){const _0x12e705=_0x33a99e;if(!coinsLoaded){process[_0x12e705(0x224)]({'telegrammsg':_0x12e705(0x2b7)},_0x25f40e=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0xb2f227='';if(config[_0x12e705(0x251)])_0xb2f227=_0x12e705(0x23d)+config[_0x12e705(0x1ed)]+_0x12e705(0x1ce);else _0xb2f227='<b>Bot\x20'+botID+_0x12e705(0x1ce);const _0x15158b=getKPIs('basecoin'),_0x30e206=getKPIs(_0x12e705(0x15d),config[_0x12e705(0x15d)]),_0x2a2a35=getKPIs(_0x12e705(0x181)),_0x3214cf=getKPIs(_0x12e705(0x2a2),config['fiat']);_0xb2f227+=_0x12e705(0x1c7),_0xb2f227+=_0x15158b[_0x12e705(0x206)]+_0x12e705(0x21c)+_0x15158b[_0x12e705(0x290)]+'\x0a',_0xb2f227+=_0x15158b['rightTxt']+':\x20'+_0x15158b[_0x12e705(0x2bc)]+'%\x0a',_0xb2f227+=_0x30e206['leftTxt']+_0x12e705(0x21c)+_0x30e206['value']+'\x0a',_0xb2f227+=_0x30e206['rightTxt']+':\x20'+_0x30e206[_0x12e705(0x2bc)]+'%\x0a',_0xb2f227+=_0x2a2a35[_0x12e705(0x206)]+':\x20'+_0x2a2a35[_0x12e705(0x290)]+'\x20('+config[_0x12e705(0x1d1)]+')\x0a',_0xb2f227+=_0x2a2a35[_0x12e705(0x1bd)]+':\x20'+_0x2a2a35[_0x12e705(0x2bc)]+'%\x20('+config[_0x12e705(0x1d1)]+')\x0a',_0xb2f227+=_0x3214cf[_0x12e705(0x206)]+':\x20'+_0x3214cf['value']+'\x20('+config['fiat']+')\x0a',_0xb2f227+=_0x3214cf[_0x12e705(0x1bd)]+':\x20'+_0x3214cf[_0x12e705(0x2bc)]+_0x12e705(0x174)+config[_0x12e705(0x15d)]+')\x0a',_0xb2f227+=_0x12e705(0x1e3),process[_0x12e705(0x224)]({'telegrammsg':_0xb2f227},_0x23a1a7=>{});}async function sendPortfolioTelegram(){const _0x227ff7=_0x33a99e;if(!coinsLoaded){process['send']({'telegrammsg':_0x227ff7(0x2b7)},_0x220d8c=>{});return;}let _0x4b66de='';if(config[_0x227ff7(0x251)])_0x4b66de=_0x227ff7(0x23d)+config[_0x227ff7(0x1ed)]+_0x227ff7(0x216);else _0x4b66de=_0x227ff7(0x18f)+botID+_0x227ff7(0x216);_0x4b66de+=_0x227ff7(0x1c7),_0x4b66de+='-------------------------------\x0a',_0x4b66de+=_0x227ff7(0x297),_0x4b66de+=_0x227ff7(0x299),currentCoins[_0x227ff7(0x245)](_0x31c240=>{const _0x413be9=_0x227ff7;_0x4b66de+=_0x31c240[_0x413be9(0x1d5)][_0x413be9(0x2cf)](0x7)+'|\x20'+formatPad(_0x31c240['distribution'],0x2,0x6)+'|\x20'+formatPad(_0x31c240['target'],0x2,0x6)+'|\x20'+formatPad(_0x31c240[_0x413be9(0x1ef)]*0x64,0x2,0x6)+'\x0a';}),_0x4b66de+=_0x227ff7(0x1e3),process[_0x227ff7(0x224)]({'telegrammsg':_0x4b66de},_0x26d747=>{});}function formatPad(_0x4a6817,_0x4e1530,_0x404e69){const _0x160f54=_0x33a99e,_0x30b0d1=formatResultString(_0x4a6817,_0x4e1530);return _0x30b0d1?_0x30b0d1[_0x160f54(0x1f0)](_0x404e69):''[_0x160f54(0x1f0)](_0x404e69);}function logHistory(_0x5bf120,_0x17607c,_0x27acc9=''){const _0x180ed3=_0x33a99e;let _0x55cb1a={'time':getTimeStamp(),'type':_0x5bf120,'event':_0x17607c};dbLogs[_0x180ed3(0x294)](_0x180ed3(0x298))[_0x180ed3(0x194)](_0x55cb1a)['write']();if(_0x27acc9=='')_0x27acc9=_0x17607c;proxyEmit(_0x180ed3(0x1c1),{'log':_0x55cb1a,'summary':_0x27acc9}),process[_0x180ed3(0x224)]({'telegram':{..._0x55cb1a,'botname':config['botname'],'showname':config[_0x180ed3(0x251)]}},_0x2e5dba=>{}),logger['full'](''+_0x55cb1a['event']);}function _0x1ab9(){const _0x252bb3=['\x20change','RequestTimeout','breakeven','round','YOYOW/','none','timeshift','cancelOrders()','LOCKED','getPortfolio(0)','leftTxt','fetchTickers','util','amount','ExchangeNotAvailable','API-key\x20format\x20invalid','USDT','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','enabled','toggleBotMode','sells','market','\x20minutes\x20-\x20','BNB','stringify','./config/','\x20portfolio:</b>\x20\x0a\x0a','string','max','***','yyyy-MM-dd\x27T\x27HH:mm:ss','UNLOCKED','\x20:\x20','page','realized','bots','added','2845376zXmQFW','initial','orderstatus','send','\x20minutes','\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','BTC','buy','Fees\x20|\x20currency:\x20','Crypt','restart','must\x20be\x20greater\x20than\x20minimum\x20amount','last','DAI/','abs','writeFile','storeFiat','data','fetchClosedOrders','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','2.5.0','average','configuration','price','Avoiding\x20continuous\x20order\x20attempts','limits','parseISO','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','<b>','exchanges','coin-loading-progress','./logs/','recent20','error','liquidity','\x20hour','forEach','remainingSymbols','offset','startnumber','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','\x20has\x20a\x2024h\x20drop\x20of\x20','BUSD',':\x20Bot\x20','TUSD','watchTransactions','-events.json','replace','showname','sendPortfolioTelegram','emojisell','findIndex','getPortfolio(1)','cooldown','settings',':\x20timer\x20>','starting-balance-','recreate','sell','options','12oUOkeZ','ticker','changes','fetchBalance','ETH','date-fns','cloneDeep','fromCodePoint','resetHistory','defaults','Transaction\x20detection\x20blocked','freeze','excluded','\x20|\x20lock\x20orders:\x20','portfolio','Invalid\x20API\x20key\x20or\x20secret\x20entered','storeConfiguration','order','write','full','getDate','ccxt','\x20|\x20highest:\x20','cancelOrder','balances','storeHeadless','timestamp','success','assign','toLowerCase','open','BNB/','bot','ordertype','customId','kill','Saving\x20configuration','entries','splice','pro','InsufficientFunds','log','highest','event-history','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','substring','getFullYear','loading-canceled','Reset\x20|\x20','createOrder','EUR','value','Net\x20effect','closed','exchange','get','red_yellow_blue','running','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','logs','-------------------------------\x0a','toUpperCase','split','debug','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','reverse','configuration-stored','botID','valid','net-fiat','final','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','filled','/EUR','getPortfolio','Executed\x20','hybrid-crypto-js','fetchOpenOrders','\x20|\x20Error\x20details:\x20','autoliquidity','search','password','remove','\x20value','keys','orderId','5182kjRbAy','0\x20-\x20EXECUTION:\x20','InvalidOrder','usd','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','3foGcBy','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','13015037jHqxQq','\x20API\x20secret\x20is\x20invalid','change','AuthenticationError','5YFchLv','yargs/yargs','join','slice','buys','\x20>\x20[DEBUG]\x20','datetime','watchTrades','toString','no\x20open\x20orders','close','symbols','Portfolio\x20change\x20detected:\x20','args','placeOrder','headless','decrypt','padEnd','cancel','Limit\x20(low-margin)','colorscheme','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','2\x20-\x20FILLED\x20unknown\x20order:\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','apply','floor','Pausing\x20for\x20','target','MIN_NOTIONAL','sortBy','ORDERS.UNLOCKED','ID:\x20','sort','loadMarkets',',\x20must\x20be\x20a\x203\x20digit\x20number','symbol','\x20exchange','getHours','NANO/','message','./version.json','privateKey','11146069UORyls','constructor','indexOf','Net\x20','/backup/','fiat','openOrders','eur','exchange\x20not\x20reloaded','canceled','ask','XEM/BUSD','yyyy/MM/dd','find','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Bybit','balancing\x20resumes\x20when\x20cooldown\x20ends','Executing\x20exchange\x20reload','length','milliseconds','initclient','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','getTime','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','toFixed','spot','getMonth','version','%\x20(','6916974xOemjU','2\x20-\x20Orders\x20unlocked','Fee\x20discount\x20refund\x20detected:\x20','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','\x20|\x20Custom\x20ID:\x20','progress','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','Error\x20while\x20deleting\x20files:\x20','emojibuy','warning','/USD','getMinutes','net-basecoin','placeOrder()','watchOrders','getStartingBalances','recovery','\x20order:\x20','1\x20-\x20FILLED:\x20','set','getCoinNumber()','getSeconds','USD','limit','USDP','type','<b>Bot\x20','uncaughtException','-performance.json','Order(s)\x20not\x20validated\x20after\x20','-results.json','push','starting-balances','apiKey','2\x20-\x20Handled\x20open\x20orders','310mBBygC','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','deleteHistoryAlerts','function','apiSecret','startprice','no\x20additional\x20symbols','fee','parse','showConfig','Waited\x20','sha256','Order\x20is\x20invalid:\x20','additional\x20symbols\x20','(((.+)+)+)+$','2\x20-\x20FILLED\x20known\x20order:\x20','includes','limit-high','mkdirSync','bot-','USDC','getCoins()','onepagemode','limit-low','OrderNotFound','Initializing\x20coin\x20results','Limit\x20(high-margin)','coins','unlinkSync','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','apiPassword','existsSync','removed','change24h','time','613oHJNgW','2.3.5','rightTxt','357930iZcKJQ','side','differenceInSeconds','event','random','number','UNLOCKING','cost','startdate','<pre>','exec','date','\x20not\x20responding','fetchTicker','isEqual','Binance','\x20metrics:</b>\x20\x0a\x0a','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','\x20>\x20','basecoin','min','Error:\x20Invalid\x20argument\x20','\x20|\x20','coin','currency','lowdb/adapters/FileSync','getOpenOrders()','InvalidNonce','filter','Order\x20amount\x20is\x20invalid:\x20','timeout','exchange\x20reloaded','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','ongoing','Order\x20filled:\x20','5216632XccEhh','distribution','</pre>','argv','has','************','concat','test','map','-config.json','/output-000.log','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','botname','shift','delta','padStart','threshold','2\x20-\x20Validate\x20orders:\x20','HOT/BTC','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','\x20|\x20Exchange:\x20','format','status','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','performance','lowdb','total'];_0x1ab9=function(){return _0x252bb3;};return _0x1ab9();}function emitHistory(_0x2d0040={}){const _0x6fb190=_0x33a99e;Object[_0x6fb190(0x2b1)](_0x2d0040)[_0x6fb190(0x16a)]==0x0&&(_0x2d0040={'type':[_0x6fb190(0x26e),_0x6fb190(0x1c1)],'event':'','page':0x1});if(_0x2d0040[_0x6fb190(0x18e)]['includes'](_0x6fb190(0x1c1)))_0x2d0040[_0x6fb190(0x18e)][_0x6fb190(0x283)](_0x2d0040[_0x6fb190(0x18e)][_0x6fb190(0x15a)](_0x6fb190(0x1c1)),0x1,_0x6fb190(0x242),_0x6fb190(0x17e),'success');if(dbLogs['has'](_0x6fb190(0x298))['value']()){let _0x251314=dbLogs[_0x6fb190(0x294)](_0x6fb190(0x298))[_0x6fb190(0x1da)](_0x1f93ec=>{const _0x1ff205=_0x6fb190;if(_0x2d0040[_0x1ff205(0x18e)][_0x1ff205(0x16a)]==0x0)return![];else return _0x2d0040[_0x1ff205(0x18e)][_0x1ff205(0x1a8)](_0x1f93ec['type']);})[_0x6fb190(0x1da)](_0x1294ec=>{const _0x8f8b70=_0x6fb190;if(_0x2d0040[_0x8f8b70(0x1c1)]=='')return!![];else return _0x1294ec[_0x8f8b70(0x1c1)][_0x8f8b70(0x27a)]()['includes'](_0x2d0040[_0x8f8b70(0x1c1)][_0x8f8b70(0x27a)]());})[_0x6fb190(0x2db)](_0x6fb190(0x1ba)),_0x3c8189=_0x251314['value']()['length'];_0x251314=_0x251314[_0x6fb190(0x29e)]()[_0x6fb190(0x2c1)]((_0x2d0040['page']-0x1)*logPageSize,_0x2d0040[_0x6fb190(0x21d)]*logPageSize-0x1)['reverse']()[_0x6fb190(0x290)](),proxyEmit(_0x6fb190(0x288),{'logs':_0x251314,'total':_0x3c8189});}else proxyEmit('event-history',{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x45c4ea){const _0x2e7cca=_0x33a99e;if(dbLogs[_0x2e7cca(0x1e5)]('logs')['value']()){const _0x2d8407=dbLogs[_0x2e7cca(0x294)](_0x2e7cca(0x298))[_0x2e7cca(0x2db)](_0x2e7cca(0x1ba))[_0x2e7cca(0x1da)](_0x55f7df=>{return _0x55f7df['type']=='order';})[_0x2e7cca(0x290)]();dbLogs[_0x2e7cca(0x294)](_0x2e7cca(0x298))['remove']()['write'](),dbLogs[_0x2e7cca(0x294)](_0x2e7cca(0x298))['assign'](_0x2d8407)['write'](),emitHistory(_0x45c4ea);}}async function pauseBot(_0x16fd10=''){const _0x14653d=_0x33a99e,_0x1d2931=new Date()[_0x14653d(0x16e)]();if(!lastErrorShown||_0x1d2931-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x1d2931;!lastBotPause?(lastBotPause=_0x1d2931,consecutivePauses=0x1):(_0x1d2931-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x14653d(0x22b)},_0x6c2a1b=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x14653d(0x16e)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x16fd10)_0x16fd10+=_0x14653d(0x1d4);logHistory(_0x14653d(0x242),_0x16fd10+_0x14653d(0x2d8)+pauseBotInterval/0xea60+_0x14653d(0x225)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x13e583=_0x33a99e;process[_0x13e583(0x224)]({'stop':_0x13e583(0x280)},_0x4eddfa=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x2a3bb8,_0x3f48aa){const _0x4fef45=_0x33a99e;if(_0x2a3bb8[_0x4fef45(0x2c6)]()[_0x4fef45(0x1a8)](_0x4fef45(0x20b)))return logHistory('error',config[_0x4fef45(0x293)]+_0x4fef45(0x29d)),![];else{if(_0x2a3bb8[_0x4fef45(0x2c6)]()[_0x4fef45(0x1a8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x4fef45(0x242),config[_0x4fef45(0x293)]+_0x4fef45(0x234)),![];else{if(_0x2a3bb8[_0x4fef45(0x2c6)]()[_0x4fef45(0x1a8)](_0x4fef45(0x2bd)))return logHistory(_0x4fef45(0x242),config['exchange']+_0x4fef45(0x20d)),logHistory(_0x4fef45(0x242),_0x4fef45(0x1b5)),![];else await handleError(_0x2a3bb8,_0x3f48aa);}}}async function handleError(_0x528047,_0x2c73e7,_0x5d0f0d=''){const _0x50ed22=_0x33a99e,_0x485205=config[_0x50ed22(0x293)]||'Exchange';if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)]('DDoSProtection'))await pauseBot(config[_0x50ed22(0x293)]+_0x50ed22(0x226));else{if(_0x528047['toString']()['includes'](_0x50ed22(0x20a)))await pauseBot(config[_0x50ed22(0x293)]+'\x20not\x20available');else{if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)](_0x50ed22(0x1fd)))await pauseBot(config['exchange']+_0x50ed22(0x1ca));else{if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)]('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x50ed22(0x293)]+'\x20closed\x20the\x20connection');else{if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)](_0x50ed22(0x1cf)))logHistory(_0x50ed22(0x242),_0x2c73e7+_0x50ed22(0x1f8)),logHistory(_0x50ed22(0x242),_0x50ed22(0x23c)),await killBot();else{if(_0x528047['toString']()[_0x50ed22(0x1a8)](_0x50ed22(0x1d9)))logHistory(_0x50ed22(0x242),_0x2c73e7+_0x50ed22(0x1de)),logHistory('error',_0x50ed22(0x23c)),await killBot();else{if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)](_0x50ed22(0x20b)))logHistory('error',_0x2c73e7+_0x50ed22(0x1d4)+config[_0x50ed22(0x293)]+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x50ed22(0x242),_0x50ed22(0x23c)),await killBot();else{if(_0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x50ed22(0x242),_0x2c73e7+_0x50ed22(0x1d4)+config['exchange']+_0x50ed22(0x2bb)),logHistory(_0x50ed22(0x242),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x528047['toString']()[_0x50ed22(0x1a8)](_0x50ed22(0x2bd)))logHistory('error',_0x2c73e7+_0x50ed22(0x1d4)+config[_0x50ed22(0x293)]+_0x50ed22(0x166)),logHistory(_0x50ed22(0x242),_0x50ed22(0x23c)),await killBot();else _0x528047[_0x50ed22(0x2c6)]()[_0x50ed22(0x1a8)](_0x50ed22(0x285))?logHistory(_0x50ed22(0x242),_0x2c73e7+_0x50ed22(0x289)+_0x5d0f0d):(logger[_0x50ed22(0x270)](_0x2c73e7+_0x50ed22(0x2ab),_0x528047),await pauseBot('Unknown\x20error\x20occured'));}}}}}}}}}function formatResult(_0x927d0a,_0x453604){return parseFloat(_0x927d0a['toFixed'](_0x453604));}function formatResultTruncate(_0x89a2c0,_0x928b56){const _0x9a2764=_0x33a99e;let _0x3c21b5=formatResultString(_0x89a2c0,0xa),_0xa106d1=_0x3c21b5['indexOf']('.');return _0xa106d1!=-0x1&&(_0x3c21b5=_0x3c21b5[_0x9a2764(0x2c1)](0x0,_0xa106d1+_0x928b56+0x1)),Number(_0x3c21b5);}function formatResultString(_0xa827d,_0x210433){const _0x138ca3=_0x33a99e;let _0x1f0c2f;if(!(''+_0xa827d)[_0x138ca3(0x1a8)]('e'))_0x1f0c2f=+(Math[_0x138ca3(0x1ff)](_0xa827d+'e+'+_0x210433)+'e-'+_0x210433);else{let _0x5cc011=(''+_0xa827d)[_0x138ca3(0x29b)]('e'),_0x483fb9='';+_0x5cc011[0x1]+_0x210433>0x0&&(_0x483fb9='+'),_0x1f0c2f=+(Math[_0x138ca3(0x1ff)](+_0x5cc011[0x0]+'e'+_0x483fb9+(+_0x5cc011[0x1]+_0x210433))+'e-'+_0x210433);}return Number(_0x1f0c2f)[_0x138ca3(0x170)](_0x210433);}function getServerTime(){const _0x549bc9=_0x33a99e,_0x13d00e=new Date();return _0x13d00e['getFullYear']()+'/'+(_0x13d00e['getMonth']()+0x1)[_0x549bc9(0x2c6)]()[_0x549bc9(0x1f0)](0x2,'0')+'/'+_0x13d00e[_0x549bc9(0x271)]()[_0x549bc9(0x2c6)]()[_0x549bc9(0x1f0)](0x2,'0')+'\x20'+_0x13d00e[_0x549bc9(0x2e3)]()[_0x549bc9(0x2c6)]()[_0x549bc9(0x1f0)](0x2,'0')+':'+_0x13d00e['getMinutes']()[_0x549bc9(0x2c6)]()[_0x549bc9(0x1f0)](0x2,'0')+':'+_0x13d00e[_0x549bc9(0x18a)]()['toString']()[_0x549bc9(0x1f0)](0x2,'0');}function getTimeStamp(){const _0x50d1f7=_0x33a99e,_0x43cd4d=shiftedTime();return _0x43cd4d['getFullYear']()+'/'+(_0x43cd4d[_0x50d1f7(0x172)]()+0x1)['toString']()[_0x50d1f7(0x1f0)](0x2,'0')+'/'+_0x43cd4d['getDate']()[_0x50d1f7(0x2c6)]()[_0x50d1f7(0x1f0)](0x2,'0')+'\x20'+_0x43cd4d[_0x50d1f7(0x2e3)]()[_0x50d1f7(0x2c6)]()['padStart'](0x2,'0')+':'+_0x43cd4d[_0x50d1f7(0x180)]()[_0x50d1f7(0x2c6)]()['padStart'](0x2,'0')+':'+_0x43cd4d[_0x50d1f7(0x18a)]()['toString']()[_0x50d1f7(0x1f0)](0x2,'0');}function getDate(){const _0x2173a0=_0x33a99e,_0x3a5b3f=shiftedTime();return _0x3a5b3f[_0x2173a0(0x28b)]()+'/'+(_0x3a5b3f['getMonth']()+0x1)[_0x2173a0(0x2c6)]()['padStart'](0x2,'0')+'/'+_0x3a5b3f['getDate']()[_0x2173a0(0x2c6)]()[_0x2173a0(0x1f0)](0x2,'0');}function getHour(){const _0x3bd7cd=_0x33a99e,_0x64068=shiftedTime();return _0x64068['getHours']()[_0x3bd7cd(0x2c6)]()['padStart'](0x2,'0');}function sleep(_0xa8d608){return new Promise(_0x3fbe3a=>setTimeout(_0x3fbe3a,_0xa8d608));}function shiftedTime(){const _0x3f74ad=_0x33a99e,_0x4781e5=new Date();let _0x4dd102=_0x4781e5;if(config&&config[_0x3f74ad(0x202)]!==0x0)_0x4dd102=fns['add'](_0x4781e5,{'hours':config['timeshift']});return _0x4dd102;}function timer(_0x462df5){const _0x53358f=_0x33a99e,_0x1b9217=new Date();!lasttime?console[_0x53358f(0x286)](getTimeStamp()+':\x20timer\x20>',_0x462df5,_0x1b9217):console[_0x53358f(0x286)](getTimeStamp()+_0x53358f(0x258),_0x462df5,(_0x1b9217-lasttime)/0x3e8),lasttime=_0x1b9217;}