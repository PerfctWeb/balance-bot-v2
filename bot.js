const _0x3550e6=_0x4265;(function(_0x4d63c0,_0x3fae0f){const _0xab03f9=_0x4265,_0x3aa491=_0x4d63c0();while(!![]){try{const _0x411cd4=-parseInt(_0xab03f9(0x1a1))/0x1*(parseInt(_0xab03f9(0x1d0))/0x2)+-parseInt(_0xab03f9(0x11d))/0x3+parseInt(_0xab03f9(0x12d))/0x4+-parseInt(_0xab03f9(0xd5))/0x5*(parseInt(_0xab03f9(0xc7))/0x6)+-parseInt(_0xab03f9(0x143))/0x7+-parseInt(_0xab03f9(0x16a))/0x8+parseInt(_0xab03f9(0x166))/0x9;if(_0x411cd4===_0x3fae0f)break;else _0x3aa491['push'](_0x3aa491['shift']());}catch(_0x1a8131){_0x3aa491['push'](_0x3aa491['shift']());}}}(_0x486e,0x40419));const _0x1a62dc=function(){let _0x2bce7b=!![];return function(_0x2ac7ee,_0x130ab7){const _0x22b443=_0x2bce7b?function(){const _0x380ae8=_0x4265;if(_0x130ab7){const _0x533ee1=_0x130ab7[_0x380ae8(0x1ba)](_0x2ac7ee,arguments);return _0x130ab7=null,_0x533ee1;}}:function(){};return _0x2bce7b=![],_0x22b443;};}(),_0x23051c=_0x1a62dc(this,function(){const _0x1ab384=_0x4265;return _0x23051c['toString']()['search'](_0x1ab384(0x17d))[_0x1ab384(0x172)]()[_0x1ab384(0x126)](_0x23051c)['search'](_0x1ab384(0x17d));});function _0x4265(_0xbd726,_0x5edcc2){const _0x191c96=_0x486e();return _0x4265=function(_0x23051c,_0x1a62dc){_0x23051c=_0x23051c-0xc7;let _0x486e82=_0x191c96[_0x23051c];return _0x486e82;},_0x4265(_0xbd726,_0x5edcc2);}_0x23051c();function _0x486e(){const _0x107954=['11903796OmCDaO','exit','excluded','parse','2967824INDyyB','abs','time','limit-low','cancelLoading','spot','wsMarket','args','toString','toFixed','logs','sell','push','BTC/USDT','BTCEUR','value','hybrid-crypto-js','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','max','(((.+)+)+)+$','USDT','replace','Invalid\x20quantity','timeshift','getMonth','enabled','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','getDate','assign','availableBalance','portfolio','USDC','FILLED','sha256','getSeconds','BTC/EUR','botname','remove','function','HOT/BTC','wss://stream.binance.us:9443','startprice','ticker','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','Order(s)\x20not\x20validated\x20after\x20','yyyy/MM/dd\x20HH:mm:ss','fetchOHLCV','kill',',\x20must\x20be\x20a\x203\x20digit\x20number','isArray','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','coin','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','order','reconnected','24933uOOATP','************','min','basecoin','getPortfolio','initws()','001','subscribeSpotUserDataStream','cancelOrder','offset','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','loadMarkets','orderStatus','closeWs','EUR','getTime','fees','event','InvalidNonce','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','settings','has','close','Order:\x20','-performance.json','apply','trade','getFiat()','yyyy/MM/dd','binance','MIN_NOTIONAL','userData','\x20hour','Unfilled\x20order(s)\x20canceled\x20after\x20','eur','AuthenticationError','botID','entries','buys','remainingSymbols','includes','datetime','shift','\x20|\x20Unknown\x20error\x20occured','symbols','currency','privateKey','2oDLuNC','\x20-\x20','coin-loading-progress','sells','milliseconds','decrypt','binanceus','532302DuNjvP','getStartingBalances','date','getMinutes',':\x20Bot\x20','fromCodePoint','getCoins()','kline','OrderNotFound','BTCUSDT','Crypt','success','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','15RsykxT','timestamp','orderType','API-key\x20format\x20invalid','./version.json','\x20|\x20Error\x20details:\x20','cooldown','balances','test','write','accumulatedQuantity','Binance\x20API\x20key\x20is\x20invalid','\x20minutes\x20-\x20balancing\x20resumed','RequestTimeout','mkdirSync','side','threshold','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','getHours','bot','-events.json','storeConfiguration','secure','reverse','eventType','data','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','bot-','toLowerCase','WebSockets(','ordertype','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','keys','send','date-fns','indexOf','limit','DAI/','round','recreate','\x20>\x20','RSA-OAEP','valid','bb-secure.json','page','Market','sortBy','Order\x20filled:\x20','BTC/BUSD','delta','fetchTickers','amount','breakeven','configuration','apiSecret','realized','ask','storeHeadless','Bot\x20','coins','showname','split','BUSD','padStart','sort','message','orderId','stringify','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','startdate','fetchBalance','type','127953XqFLjf','cancelOrder()','BTC','wss://stream.binance.com:9443','./config/','last','\x20order:\x20','filter','differenceInCalendarDays','constructor','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','exchange','Executed\x20','Performance\x20recreation\x20completed\x20successfully','emojibuy','log','171596ClzAYl','parseISO','InsufficientFunds','splice','getPortfolio()','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','fee','-config.json','yyyy-MM-dd\x27T\x27HH:mm:ss','add','BNB','existsSync','length','buy','startnumber','find','asset','emojisell','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apiKey','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','emitHistory','2783459ufkmfY','differenceInSeconds','Limit\x20(high-margin)','timeout','get','forEach','headless',')\x20|\x20Error\x20details:\x20','target','limit-high','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','error','initclient','cost','version','price','wsKey','BTCBUSD','recreateHistory()','getFullYear','market','symbol','distribution','reduce','executionReport','limits','event-history','number','performance','defaults','bb-settings.json','ccxt','usd','filled','format'];_0x486e=function(){return _0x107954;};return _0x486e();}'use strict';const ccxt=require(_0x3550e6(0x162)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x3550e6(0xf7)),{WebsocketClient,DefaultLogger}=require('binance'),Crypt=require(_0x3550e6(0x17a))[_0x3550e6(0xd1)];let exchange,wsClient;global[_0x3550e6(0x194)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x3550e6(0xd9))[_0x3550e6(0x151)],botID=process['argv'][0x2]||_0x3550e6(0x1a7),pattern=/^[0-9]{3}$/;if(!pattern[_0x3550e6(0xdd)](botID))return console[_0x3550e6(0x12c)]('Error:\x20Invalid\x20argument\x20'+botID+_0x3550e6(0x19a)),process[_0x3550e6(0x167)](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x3550e6(0x121)+userID+'/':_0x3550e6(0x121);!fs[_0x3550e6(0x138)](configpath)&&fs[_0x3550e6(0xe3)](configpath);const configfile=configpath+'bot-'+botID+_0x3550e6(0x134),logfile=configpath+'bot-'+botID+_0x3550e6(0xe9),performancefile=configpath+_0x3550e6(0xf0)+botID+_0x3550e6(0x1b9),coinresultsfile=configpath+'bot-'+botID+'-results.json',settingsfile=configpath+_0x3550e6(0x161),securefile=configpath+_0x3550e6(0x100),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x3550e6(0xde)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})[_0x3550e6(0xde)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x3550e6(0x160)]({'bot':[]})[_0x3550e6(0xde)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[]})[_0x3550e6(0xde)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x3550e6(0x178),'symbol':_0x3550e6(0x18d)},'usd':{'coin':_0x3550e6(0xd0),'symbol':_0x3550e6(0x177)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0xbe5934)=>{},'debug':(..._0xba6110)=>{},'notice':(..._0x598f00)=>{},'info':(..._0x27db42)=>{},'warning':(..._0x2d3d86)=>{},'error':async function(..._0x30fb45){const _0x3032c4=_0x3550e6,_0x1c53ff=new Date()['getTime']();if(!lastErrorShown||_0x1c53ff-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x3032c4(0x1b0)](),logHistory(_0x3032c4(0x14e),_0x3032c4(0xf2)+consecutivePauses+')\x20|\x20Binance\x20exchange\x20is\x20not\x20available');let _0x5a47ef='';if(_0x30fb45[0x0])_0x5a47ef+=_0x30fb45[0x0];if(_0x30fb45[0x1]&&_0x30fb45[0x1][_0x3032c4(0x14e)]&&_0x30fb45[0x1]['error']['message'])_0x5a47ef+=_0x3032c4(0x1d1)+_0x30fb45[0x1][_0x3032c4(0x14e)]['message'];logging('WebSockets('+consecutivePauses+_0x3032c4(0x14a),''+_0x5a47ef),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x3550e6(0x18b),'rsaStandard':_0x3550e6(0xfe)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x3550e6(0x181)]!=config[_0x3550e6(0x181)]&&updateTimeshift(settings[_0x3550e6(0x181)]);process[_0x3550e6(0xf6)]({'started':'running'},_0x562f31=>{}),initializeProcessListeners();function proxyEmit(_0x796b9d,_0x4285e5=null){const _0x2b9ff4=_0x3550e6;process[_0x2b9ff4(0xf6)]({'function':_0x796b9d,'args':_0x4285e5},_0x1a0e40=>{});}function initializeProcessListeners(){const _0x272a8d=_0x3550e6;process['on'](_0x272a8d(0x116),_0x4e897f=>{const _0x17a374=_0x272a8d;switch(Object[_0x17a374(0xf5)](_0x4e897f)[0x0]){case _0x17a374(0x181):_0x4e897f['timeshift']!=undefined&&(settings[_0x17a374(0x181)]=_0x4e897f['timeshift'],updateTimeshift(settings['timeshift']));break;case _0x17a374(0x190):switch(_0x4e897f[_0x17a374(0x190)]){case _0x17a374(0x14f):initclient();break;case _0x17a374(0x142):emitHistory(_0x4e897f[_0x17a374(0x171)]);break;case _0x17a374(0x1a5):getPortfolio(_0x4e897f[_0x17a374(0x171)]);break;case _0x17a374(0xea):storeConfiguration(_0x4e897f[_0x17a374(0x171)]);break;case _0x17a374(0x10e):storeHeadless(_0x4e897f[_0x17a374(0x171)]);break;case _0x17a374(0xc8):getStartingBalances();break;case'placeOrder':placeOrder(_0x4e897f[_0x17a374(0x171)]);break;case _0x17a374(0x16e):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x114f82=_0x3550e6;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config['apiKey'],config[_0x114f82(0x10b)]);let _0x265053=await loadSymbols();_0x265053&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x1f95b2,_0x4ebdfe){const _0x20fc02=_0x3550e6,_0x553a77=ccxt[config[_0x20fc02(0x128)]];let _0xe8b914;switch(config[_0x20fc02(0x128)]){case'binance':_0xe8b914=_0x20fc02(0x120);break;case _0x20fc02(0x1d6):_0xe8b914=_0x20fc02(0x192);break;default:_0xe8b914=_0x20fc02(0x120);}exchange=new _0x553a77({'apiKey':_0x1f95b2,'secret':_0x4ebdfe,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x1f95b2,'api_secret':_0x4ebdfe,'beautify':!![],'wsUrl':_0xe8b914},logger),config[_0x20fc02(0x128)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x20fc02(0x154),'symbol':_0x20fc02(0x105)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x5bfc9c=_0x3550e6;let _0x587447;try{markets=await exchange[_0x5bfc9c(0x1ac)]();const _0x37a69c=[_0x5bfc9c(0xfa),_0x5bfc9c(0x191),'HOT/EUR'];allSymbols=exchange[_0x5bfc9c(0x1cd)][_0x5bfc9c(0x124)](_0x123965=>{const _0x596470=_0x5bfc9c;let _0x51c1e4=![];return _0x37a69c[_0x596470(0x148)](_0x18de4d=>{if(_0x123965['includes'](_0x18de4d))_0x51c1e4=!![];}),!_0x51c1e4;}),_0x587447=!![];}catch(_0x5ba30b){await handleError(_0x5ba30b,'loadSymbols()'),_0x587447=![];}return _0x587447;}async function initbot(){const _0x4a19ab=_0x3550e6;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x5b2315=dbCoinResults[_0x4a19ab(0x147)](_0x4a19ab(0x110))[_0x4a19ab(0x179)]();if(_0x5b2315[_0x4a19ab(0x139)]==0x0)await resetCoinResults();}async function initclient(){const _0xffa1a9=_0x3550e6;proxyEmit(_0xffa1a9(0x10a),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0xffa1a9(0xdc),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x198849=_0x3550e6;wsinitialized=![];ws1&&(ws1['forEach'](_0x11e5e6=>{const _0x2290c1=_0x4265;try{wsClient[_0x2290c1(0x1ae)](_0x11e5e6);}catch(_0x496415){}}),ws1=[]);if(ws2){try{wsClient[_0x198849(0x1ae)](ws2);}catch(_0x3105a0){}ws2=null;}}async function initws(){const _0x5e6863=_0x3550e6;cleanws();let _0x3edce1=[];currentCoins[_0x5e6863(0x148)](_0x962096=>{const _0x4f76c9=_0x5e6863;if(_0x962096[_0x4f76c9(0x19d)]!=config[_0x4f76c9(0x1a4)])_0x3edce1[_0x4f76c9(0x176)](noslash(_0x962096[_0x4f76c9(0x158)]));});if(!_0x3edce1[_0x5e6863(0x1c9)](stablecoins['eur'][_0x5e6863(0x19d)]))_0x3edce1[_0x5e6863(0x176)](stablecoins[_0x5e6863(0x1c3)][_0x5e6863(0x19d)]);if(!_0x3edce1['includes'](stablecoins[_0x5e6863(0x163)][_0x5e6863(0x19d)]))_0x3edce1['push'](stablecoins[_0x5e6863(0x163)][_0x5e6863(0x19d)]);if(!_0x3edce1[_0x5e6863(0x1c9)](_0x5e6863(0x137)+config[_0x5e6863(0x1a4)]))_0x3edce1[_0x5e6863(0x176)](_0x5e6863(0x137)+config[_0x5e6863(0x1a4)]);try{_0x3edce1[_0x5e6863(0x148)]((_0x5a7366,_0x20ec0d)=>{ws1[_0x20ec0d]=wsClient['subscribeSpotKline'](_0x5a7366,'1m');}),ws2=wsClient[_0x5e6863(0x1a8)](),wsClient['on']('formattedMessage',_0xc94f45=>{const _0x1532a2=_0x5e6863;if(!Array[_0x1532a2(0x19b)](_0xc94f45)&&!_0xc94f45[_0x1532a2(0x153)][_0x1532a2(0x1c9)](_0x1532a2(0x1c0))){if(_0xc94f45[_0x1532a2(0xed)]===_0x1532a2(0xce)){global['ticker'][_0xc94f45[_0x1532a2(0xce)]['symbol']]=_0xc94f45[_0x1532a2(0xce)][_0x1532a2(0x1b7)];return;}}else{if(!Array[_0x1532a2(0x19b)](_0xc94f45)&&_0xc94f45['wsKey'][_0x1532a2(0x1c9)](_0x1532a2(0x1c0))){if(_0xc94f45[_0x1532a2(0x170)][_0x1532a2(0x1c9)](_0x1532a2(0x16f))){updateNumberCoins(_0xc94f45);return;}}}}),wsClient['on'](_0x5e6863(0x1a0),async _0x3d33d7=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x408386){await handleError(_0x408386,_0x5e6863(0x1a6));}let _0x46886f,_0x11ed3c=0x0;loading[_0x5e6863(0x1c8)]=[];let _0x4362ab=0x0;currentCoins[_0x5e6863(0x148)](_0x2456f2=>{const _0x51beb9=_0x5e6863;if(_0x2456f2[_0x51beb9(0x19d)]!=config[_0x51beb9(0x1a4)])loading['remainingSymbols']['push'](_0x2456f2[_0x51beb9(0x158)]);}),loadingCanceled=![];while(_0x46886f!=currentCoins[_0x5e6863(0x139)]-0x1){_0x46886f=0x0,currentCoins['forEach'](_0x5cac3e=>{const _0x5eb25b=_0x5e6863;_0x5cac3e[_0x5eb25b(0x19d)]!=config[_0x5eb25b(0x1a4)]&&global[_0x5eb25b(0x194)][noslash(_0x5cac3e[_0x5eb25b(0x158)])]&&(loading[_0x5eb25b(0x1c8)]=loading[_0x5eb25b(0x1c8)]['filter'](_0xf789e8=>_0xf789e8!=_0x5cac3e[_0x5eb25b(0x158)]),_0x46886f++);}),loading['progress']=Math[_0x5e6863(0xfb)](_0x46886f/(currentCoins[_0x5e6863(0x139)]-0x1)*0x64);_0x4362ab>0x1e*0x5&&(loading[_0x5e6863(0x146)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x46886f!=_0x11ed3c&&(_0x11ed3c=_0x46886f,emitLoadingProgress()),_0x4362ab++,await sleep(0xc8);}if(_0x46886f==currentCoins['length']-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x568a89=_0x3550e6;proxyEmit(_0x568a89(0x1d2),loading);}async function getFiat(){const _0x47b871=_0x3550e6;let _0x14daa6=0x0,_0x3ba51c=0x0;try{_0x14daa6=global[_0x47b871(0x194)][stablecoins[_0x47b871(0x1c3)][_0x47b871(0x19d)]],_0x3ba51c=global[_0x47b871(0x194)][stablecoins[_0x47b871(0x163)]['coin']];}catch(_0x5291da){await handleError(_0x5291da,_0x47b871(0x1bc));}return{'eur':Number(_0x14daa6),'usd':Number(_0x3ba51c)};}async function setStartDatePerformance(_0x5469b9){const _0x161bc6=_0x3550e6,_0x33eca0=fns[_0x161bc6(0x165)](new Date(_0x5469b9[_0x161bc6(0x11a)]),_0x161bc6(0x1bd));let _0xeda574=[];_0xeda574[stablecoins[_0x161bc6(0x1c3)][_0x161bc6(0x19d)]]=await getCloses(stablecoins[_0x161bc6(0x1c3)][_0x161bc6(0x158)],new Date(_0x5469b9[_0x161bc6(0x11a)]),0x1),_0xeda574[stablecoins[_0x161bc6(0x163)]['coin']]=await getCloses(stablecoins['usd'][_0x161bc6(0x158)],new Date(_0x5469b9[_0x161bc6(0x11a)]),0x1);let _0x24bb34,_0x54ea54=[];_0x5469b9['portfolio'][_0x161bc6(0x148)](_0x4d1ba2=>{const _0x3741c4=_0x161bc6;!_0x4d1ba2[_0x3741c4(0x168)]&&_0x54ea54[_0x3741c4(0x176)]({'coin':_0x4d1ba2[_0x3741c4(0x19d)],'number':_0x4d1ba2['startnumber'],'price':_0x4d1ba2[_0x3741c4(0x193)]});}),_0x24bb34={'date':_0x33eca0,'eur':_0xeda574[stablecoins[_0x161bc6(0x1c3)][_0x161bc6(0x19d)]][0x0],'usd':_0xeda574[stablecoins[_0x161bc6(0x163)][_0x161bc6(0x19d)]][0x0],'coins':_0x54ea54};let _0x2e9f61=dbPerformance['get'](_0x161bc6(0xee))[_0x161bc6(0x13c)]({'date':_0x33eca0})[_0x161bc6(0x179)]();_0x2e9f61?dbPerformance[_0x161bc6(0x147)](_0x161bc6(0xee))[_0x161bc6(0x13c)]({'date':_0x33eca0})[_0x161bc6(0x186)](_0x24bb34)[_0x161bc6(0xde)]():dbPerformance['get'](_0x161bc6(0xee))['push'](_0x24bb34)[_0x161bc6(0xde)](),_0x2e9f61=dbPerformance[_0x161bc6(0x147)](_0x161bc6(0xee))[_0x161bc6(0x103)]('date')['value'](),_0x2e9f61['forEach'](_0x4f7fb6=>{const _0x3c3be5=_0x161bc6;_0x4f7fb6[_0x3c3be5(0xc9)]<_0x33eca0&&dbPerformance[_0x3c3be5(0x147)](_0x3c3be5(0xee))[_0x3c3be5(0x18f)]({'date':_0x4f7fb6[_0x3c3be5(0xc9)]})[_0x3c3be5(0xde)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x914f77){const _0x2978e7=_0x3550e6;let _0x5bcbce,_0x357a76=[];logHistory('success',_0x2978e7(0x1ab)),_0x914f77[_0x2978e7(0x188)][_0x2978e7(0x148)](_0x5d1887=>{const _0x4a4cd2=_0x2978e7;if(_0x5d1887['coin']!=config[_0x4a4cd2(0x1a4)]&&!_0x5d1887[_0x4a4cd2(0x168)])_0x357a76['push']({'coin':_0x5d1887[_0x4a4cd2(0x19d)],'symbol':_0x5d1887[_0x4a4cd2(0x158)]});});let _0xa96d6=[];try{const _0x5d39fc=fns[_0x2978e7(0x165)](fns[_0x2978e7(0x12e)](_0x914f77[_0x2978e7(0x11a)][_0x2978e7(0x17f)](/\//g,'-')),_0x2978e7(0x135));for(const _0x562add of _0x357a76){if(_0x562add[_0x2978e7(0x19d)]!=config['basecoin'])_0x5bcbce=await exchange['fetchOrders'](_0x562add[_0x2978e7(0x158)],Date[_0x2978e7(0x169)](_0x5d39fc));_0x5bcbce['forEach'](_0x16d2c3=>{const _0x35baac=_0x2978e7,_0x4f72a1=_0x562add[_0x35baac(0x158)]['includes'](config[_0x35baac(0x1a4)]+'/'),_0x16a529=fns[_0x35baac(0x165)](fns[_0x35baac(0x12e)](_0x16d2c3[_0x35baac(0x1ca)]),_0x35baac(0x197)),_0x393a2e=fns[_0x35baac(0x165)](fns['parseISO'](_0x16d2c3[_0x35baac(0x1ca)]),_0x35baac(0x1bd));let _0x4f5ae5;if(_0x16d2c3[_0x35baac(0xe4)]=='buy'&&_0x4f72a1==![])_0x4f5ae5=_0x16d2c3[_0x35baac(0x108)];if(_0x16d2c3[_0x35baac(0xe4)]==_0x35baac(0x13a)&&_0x4f72a1==!![])_0x4f5ae5=-_0x16d2c3['amount']*_0x16d2c3['price'];if(_0x16d2c3[_0x35baac(0xe4)]==_0x35baac(0x175)&&_0x4f72a1==![])_0x4f5ae5=-_0x16d2c3[_0x35baac(0x108)];if(_0x16d2c3[_0x35baac(0xe4)]==_0x35baac(0x175)&&_0x4f72a1==!![])_0x4f5ae5=_0x16d2c3[_0x35baac(0x108)]*_0x16d2c3[_0x35baac(0x152)];_0xa96d6[_0x35baac(0x176)]({'timestamp':_0x16a529,'date':_0x393a2e,'coin':_0x562add[_0x35baac(0x19d)],'symbol':_0x562add[_0x35baac(0x158)],'type':_0x16d2c3[_0x35baac(0x11c)],'side':_0x16d2c3['side'],'reverse':_0x4f72a1,'amount':formatResult(_0x16d2c3[_0x35baac(0x164)],0x8),'filled':formatResult(_0x16d2c3[_0x35baac(0x164)],0x8),'coinamount':formatResult(_0x4f5ae5,0x8),'price':formatResult(_0x16d2c3[_0x35baac(0x152)],0x8)});let _0x36e0e8;if(_0x16d2c3['side']==_0x35baac(0x13a)&&_0x4f72a1==![])_0x36e0e8=-_0x16d2c3['amount']*_0x16d2c3[_0x35baac(0x152)];if(_0x16d2c3[_0x35baac(0xe4)]==_0x35baac(0x13a)&&_0x4f72a1==!![])_0x36e0e8=_0x16d2c3[_0x35baac(0x108)];if(_0x16d2c3['side']=='sell'&&_0x4f72a1==![])_0x36e0e8=_0x16d2c3[_0x35baac(0x108)]*_0x16d2c3[_0x35baac(0x152)];if(_0x16d2c3[_0x35baac(0xe4)]=='sell'&&_0x4f72a1==!![])_0x36e0e8=-_0x16d2c3[_0x35baac(0x108)];_0xa96d6['push']({'date':_0x393a2e,'coin':config['basecoin'],'coinamount':formatResult(_0x36e0e8,0x8)});});}_0xa96d6[_0x2978e7(0x115)]((_0x1a58da,_0x421c2b)=>_0x1a58da[_0x2978e7(0xd6)]>_0x421c2b['timestamp']?0x1:_0x421c2b[_0x2978e7(0xd6)]>_0x1a58da[_0x2978e7(0xd6)]?-0x1:0x0),dbLogs[_0x2978e7(0x147)](_0x2978e7(0x174))[_0x2978e7(0x18f)]()['write'](),_0xa96d6[_0x2978e7(0x148)](_0x274637=>{const _0x253891=_0x2978e7;let _0x50bfa0;_0x274637[_0x253891(0x19d)]!=config[_0x253891(0x1a4)]&&(_0x50bfa0={'time':_0x274637[_0x253891(0xd6)],'type':_0x253891(0x19f),'event':_0x253891(0x1b8)+_0x274637[_0x253891(0x158)]+'\x20'+_0x274637[_0x253891(0xe4)]+'\x20#'+_0x274637[_0x253891(0x108)]+'\x20@'+_0x274637['price']},dbLogs['get'](_0x253891(0x174))[_0x253891(0x176)](_0x50bfa0)[_0x253891(0xde)]());});const _0x346f6f=fns['eachDayOfInterval']({'start':new Date(_0x914f77[_0x2978e7(0x11a)]),'end':new Date()})['map'](_0x54f7e7=>fns[_0x2978e7(0x165)](_0x54f7e7,_0x2978e7(0x1bd)));let _0x3c430b=[];_0x914f77[_0x2978e7(0x188)][_0x2978e7(0x148)](_0x1550a5=>{const _0x3fe779=_0x2978e7;if(!_0x1550a5[_0x3fe779(0x168)]){_0x3c430b[_0x1550a5[_0x3fe779(0x19d)]]=[];let _0x14dc5f=_0x1550a5[_0x3fe779(0x13b)];_0x346f6f[_0x3fe779(0x148)]((_0x2d155b,_0x1e4f7d)=>{const _0x6e3355=_0x3fe779;let _0x421f95=_0xa96d6[_0x6e3355(0x124)](_0x227020=>_0x227020[_0x6e3355(0x19d)]==_0x1550a5[_0x6e3355(0x19d)]&&_0x227020['date']==_0x2d155b);if(_0x421f95[_0x6e3355(0x139)]!=0x0){let _0x4b115a=_0x421f95[_0x6e3355(0x15a)]((_0x2330dc,_0x22278a)=>{return _0x2330dc+=_0x22278a['coinamount'],_0x2330dc;},0x0);_0x14dc5f+=_0x4b115a;}_0x3c430b[_0x1550a5[_0x6e3355(0x19d)]][_0x2d155b]=_0x14dc5f;});}});const _0x296625=[..._0x357a76];_0x296625[_0x2978e7(0x176)]({'coin':stablecoins[_0x2978e7(0x1c3)][_0x2978e7(0x19d)],'symbol':stablecoins[_0x2978e7(0x1c3)][_0x2978e7(0x158)]}),_0x296625['push']({'coin':stablecoins[_0x2978e7(0x163)][_0x2978e7(0x19d)],'symbol':stablecoins[_0x2978e7(0x163)][_0x2978e7(0x158)]});let _0x4d99c2=[];for(const _0x5755dc of _0x296625){_0x4d99c2[_0x5755dc['coin']]=await getCloses(_0x5755dc['symbol'],new Date(_0x914f77['startdate']));}dbPerformance[_0x2978e7(0x147)](_0x2978e7(0xee))[_0x2978e7(0x18f)]()[_0x2978e7(0xde)](),_0x346f6f[_0x2978e7(0x148)]((_0x4d2886,_0xcc65a4)=>{const _0x425f1f=_0x2978e7;let _0x4a6be7,_0xd53543=[];_0xcc65a4==0x0?(_0x914f77['portfolio']['forEach'](_0x5e9712=>{const _0x1661d3=_0x4265;!_0x5e9712[_0x1661d3(0x168)]&&_0xd53543[_0x1661d3(0x176)]({'coin':_0x5e9712['coin'],'number':_0x5e9712[_0x1661d3(0x13b)],'price':_0x5e9712[_0x1661d3(0x193)]});}),_0x4a6be7={'date':_0x4d2886,'eur':_0x4d99c2[stablecoins[_0x425f1f(0x1c3)]['coin']][_0xcc65a4],'usd':_0x4d99c2[stablecoins[_0x425f1f(0x163)][_0x425f1f(0x19d)]][_0xcc65a4],'coins':_0xd53543}):(_0x914f77[_0x425f1f(0x188)][_0x425f1f(0x148)](_0x5994e4=>{const _0x15d4ed=_0x425f1f;!_0x5994e4[_0x15d4ed(0x168)]&&_0xd53543['push']({'coin':_0x5994e4['coin'],'number':_0x3c430b[_0x5994e4[_0x15d4ed(0x19d)]][_0x4d2886],'price':_0x5994e4[_0x15d4ed(0x19d)]==config[_0x15d4ed(0x1a4)]?0x1:_0x4d99c2[_0x5994e4[_0x15d4ed(0x19d)]][_0xcc65a4]});}),_0x4a6be7={'date':_0x4d2886,'eur':_0x4d99c2[stablecoins[_0x425f1f(0x1c3)][_0x425f1f(0x19d)]][_0xcc65a4],'usd':_0x4d99c2[stablecoins['usd'][_0x425f1f(0x19d)]][_0xcc65a4],'coins':_0xd53543}),dbPerformance[_0x425f1f(0x147)](_0x425f1f(0xee))['push'](_0x4a6be7)[_0x425f1f(0xde)]();}),emitPerformance(),await resetCoinResults();for(let _0x55d1b3 of _0xa96d6){_0x55d1b3[_0x2978e7(0x19d)]!=config[_0x2978e7(0x1a4)]&&await updateCoinResults(_0x55d1b3);}logHistory(_0x2978e7(0xd2),_0x2978e7(0x12a));}catch(_0x54dfd3){await handleError(_0x54dfd3,_0x2978e7(0x155));}}async function getCloses(_0x1dec4e,_0x3a23a3,_0x20d037=undefined){const _0x609e1=_0x3550e6,_0x7f6174='1d';let _0x5b49c6,_0x1ac2b4;const _0x34bc0e=fns[_0x609e1(0x125)](new Date(),_0x3a23a3)+0x1;try{const _0x2d0fb2=exchange[_0x609e1(0x1d4)]()-_0x34bc0e*0x18*0xe10*0x3e8;_0x5b49c6=await exchange[_0x609e1(0x198)](_0x1dec4e,_0x7f6174,_0x2d0fb2,_0x20d037),_0x1ac2b4=await exchange[_0x609e1(0x107)](_0x1dec4e);}catch(_0x59ac72){await handleError(_0x59ac72,'getCloses()');}let _0x33301c=ohlcvToCloses(_0x5b49c6);return _0x33301c[_0x609e1(0x176)](_0x1ac2b4[_0x1dec4e][_0x609e1(0x122)]),_0x33301c;}function ohlcvToCloses(_0x319e4d){const _0x1ca87e=_0x3550e6;let _0x5134db=[];return _0x319e4d[_0x1ca87e(0x148)](function(_0x29f75c){const _0x309bba=_0x1ca87e;_0x5134db[_0x309bba(0x176)](_0x29f75c[0x4]);}),_0x5134db;}function getConfiguration(_0x10ef73){const _0x5af3e8=_0x3550e6;let _0x8a8603=dbConfig['get'](_0x5af3e8(0xe8))[_0x5af3e8(0x13c)]({'botID':_0x10ef73})['value']();if(_0x8a8603){let _0x23bbc2=![];!_0x8a8603[_0x5af3e8(0x128)]&&(_0x8a8603={..._0x8a8603,'exchange':_0x5af3e8(0x1be)},_0x23bbc2=!![]),!_0x8a8603['basecoin']&&(_0x8a8603={..._0x8a8603,'basecoin':_0x5af3e8(0x11f)},_0x23bbc2=!![]),!_0x8a8603[_0x5af3e8(0xf3)]&&(_0x8a8603={..._0x8a8603,'ordertype':'market'},_0x23bbc2=!![]),!_0x8a8603[_0x5af3e8(0x146)]&&(_0x8a8603={..._0x8a8603,'timeout':0x14},_0x23bbc2=!![]),!_0x8a8603['emojibuy']&&(_0x8a8603={..._0x8a8603,'emojibuy':''},_0x23bbc2=!![]),!_0x8a8603[_0x5af3e8(0x13e)]&&(_0x8a8603={..._0x8a8603,'emojisell':''},_0x23bbc2=!![]),!_0x8a8603[_0x5af3e8(0x111)]&&(_0x8a8603={..._0x8a8603,'showname':![]},_0x23bbc2=!![]),_0x23bbc2&&(_0x8a8603={'botID':_0x8a8603[_0x5af3e8(0x1c5)],'exchange':_0x8a8603[_0x5af3e8(0x128)],'apiKey':_0x8a8603[_0x5af3e8(0x140)],'apiSecret':_0x8a8603['apiSecret'],'basecoin':_0x8a8603[_0x5af3e8(0x1a4)],'botname':_0x8a8603[_0x5af3e8(0x18e)],'showname':_0x8a8603[_0x5af3e8(0x111)],'threshold':_0x8a8603[_0x5af3e8(0xe5)],'ordertype':_0x8a8603[_0x5af3e8(0xf3)],'timeout':_0x8a8603[_0x5af3e8(0x146)],'startdate':_0x8a8603[_0x5af3e8(0x11a)],'recreate':_0x8a8603[_0x5af3e8(0xfc)],'timeshift':_0x8a8603['timeshift'],'headless':_0x8a8603[_0x5af3e8(0x149)],'cooldown':_0x8a8603['cooldown'],'emojibuy':_0x8a8603[_0x5af3e8(0x12b)],'emojisell':_0x8a8603[_0x5af3e8(0x13e)],'portfolio':_0x8a8603['portfolio']},dbConfig[_0x5af3e8(0x147)]('bot')[_0x5af3e8(0x18f)]()[_0x5af3e8(0xde)](),dbConfig['get'](_0x5af3e8(0xe8))[_0x5af3e8(0x176)](_0x8a8603)[_0x5af3e8(0xde)]());}else _0x8a8603={'botID':_0x10ef73,'exchange':_0x5af3e8(0x1be),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x5af3e8(0x10f)+_0x10ef73,'showname':![],'threshold':'3','ordertype':_0x5af3e8(0x157),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x5af3e8(0x181)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x8a8603;}function emittedConfiguration(){const _0x513bdb=_0x3550e6;let _0x12e6a4;return config[_0x513bdb(0x140)]==''?_0x12e6a4=config:_0x12e6a4={...config,'apiKey':_0x513bdb(0x1a2),'apiSecret':_0x513bdb(0x1a2)},_0x12e6a4;}function getSettings(){const _0x39b1ef=_0x3550e6;return dbSettings[_0x39b1ef(0x147)](_0x39b1ef(0x1b5))[_0x39b1ef(0x179)]();}function getSecure(){const _0x1d62d3=_0x3550e6;return dbSecure[_0x1d62d3(0x147)](_0x1d62d3(0xeb))[_0x1d62d3(0x179)]()||{};}function updateTimeshift(_0x56292d){const _0x5437ce=_0x3550e6;let _0x5af7d2=dbConfig[_0x5437ce(0x147)]('bot')['find']({'botID':botID})['value']();_0x5af7d2&&dbConfig[_0x5437ce(0x147)](_0x5437ce(0xe8))[_0x5437ce(0x13c)]({'botID':botID})[_0x5437ce(0x186)]({'timeshift':_0x56292d})[_0x5437ce(0xde)](),config[_0x5437ce(0x181)]=_0x56292d,proxyEmit(_0x5437ce(0x10a),emittedConfiguration());}async function storeConfiguration(_0x36951e){const _0xb933e3=_0x3550e6;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x529e6a=dbConfig['get'](_0xb933e3(0xe8))[_0xb933e3(0x13c)]({'botID':botID})['value']();_0x36951e={..._0x36951e,'apiKey':crypt['decrypt'](secure['privateKey'],_0x36951e['apiKey'])[_0xb933e3(0x116)],'apiSecret':crypt[_0xb933e3(0x1d5)](secure[_0xb933e3(0x1cf)],_0x36951e['apiSecret'])[_0xb933e3(0x116)]};if(_0x529e6a){if(_0x36951e[_0xb933e3(0x140)]==_0xb933e3(0x1a2))_0x36951e['apiKey']=config[_0xb933e3(0x140)];if(_0x36951e['apiSecret']==_0xb933e3(0x1a2))_0x36951e['apiSecret']=config[_0xb933e3(0x10b)];dbConfig[_0xb933e3(0x147)]('bot')[_0xb933e3(0x13c)]({'botID':botID})[_0xb933e3(0x186)](_0x36951e)[_0xb933e3(0xde)]();}else dbConfig['get'](_0xb933e3(0xe8))[_0xb933e3(0x176)](_0x36951e)[_0xb933e3(0xde)](),process['send']({'status':_0xb933e3(0x183),'live':'running'},_0x14b456=>{});config={..._0x36951e};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xb933e3(0xf6)]({'botname':_0x36951e['botname']},_0x3a5c30=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x7a2f9d){const _0x2a078e=_0x3550e6,_0x3c9150={...config,'headless':_0x7a2f9d[_0x2a078e(0x149)]};let _0x513a9a=dbConfig[_0x2a078e(0x147)]('bot')[_0x2a078e(0x13c)]({'botID':botID})[_0x2a078e(0x179)]();_0x513a9a&&dbConfig['get']('bot')[_0x2a078e(0x13c)]({'botID':botID})[_0x2a078e(0x186)](_0x3c9150)[_0x2a078e(0xde)](),config={..._0x3c9150},proxyEmit('configuration',emittedConfiguration());}function noslash(_0x14bcde){const _0xaeb924=_0x3550e6;return _0x14bcde[_0xaeb924(0x17f)]('/','');}function updateNumberCoins(_0x5264e4){const _0x2b3f96=_0x3550e6;_0x5264e4[_0x2b3f96(0xed)]&&_0x5264e4[_0x2b3f96(0xed)]=='outboundAccountPosition'&&_0x5264e4[_0x2b3f96(0xdc)][_0x2b3f96(0x148)](_0x5db552=>{const _0x1a3e9d=_0x2b3f96;let _0x27480c=currentCoins[_0x1a3e9d(0x13c)](_0x1fee59=>_0x1fee59[_0x1a3e9d(0x19d)]==_0x5db552[_0x1a3e9d(0x13d)]),_0x4ee412=config['portfolio'][_0x1a3e9d(0x13c)](_0x33bafe=>_0x33bafe[_0x1a3e9d(0x19d)]==_0x5db552[_0x1a3e9d(0x13d)]);if(_0x27480c&&_0x4ee412)_0x27480c[_0x1a3e9d(0x15e)]=Math[_0x1a3e9d(0x17c)](Number(_0x5db552[_0x1a3e9d(0x187)])+(_0x4ee412['offset']||0x0),0x0);});if(_0x5264e4[_0x2b3f96(0xed)]&&_0x5264e4[_0x2b3f96(0xed)]==_0x2b3f96(0x15b)){if(_0x5264e4[_0x2b3f96(0xd7)]=='LIMIT'&&_0x5264e4[_0x2b3f96(0x1ad)]==_0x2b3f96(0x18a)){if(lastOrders)lastOrders[_0x2b3f96(0x148)](_0x242f79=>{const _0x188b59=_0x2b3f96;if(_0x242f79[_0x188b59(0x117)]==_0x5264e4[_0x188b59(0x117)]){if(_0x242f79[_0x188b59(0xec)])_0x242f79[_0x188b59(0x164)]=_0x5264e4[_0x188b59(0xdf)]*_0x242f79['price'];else _0x242f79[_0x188b59(0x164)]=_0x5264e4[_0x188b59(0xdf)];}});}}}async function getCoins(_0x55a369=!![],_0x126ef9=config[_0x3550e6(0x1a4)]){const _0x4d0a82=_0x3550e6;let _0x3781ef,_0x1231bb=[],_0xb8fc16=[],_0x27c807=[];try{_0x3781ef=await exchange[_0x4d0a82(0x11b)](),mybalances=_0x3781ef['total'];if(!_0x55a369)for(const [_0x429ada,_0x44444b]of Object[_0x4d0a82(0x1c6)](mybalances)){_0x27c807['push'](_0x429ada);}else config['portfolio'][_0x4d0a82(0x148)](_0x15768a=>{const _0x4d0e71=_0x4d0a82;if(!_0x15768a[_0x4d0e71(0x168)])_0x27c807['push'](_0x15768a[_0x4d0e71(0x19d)]);});if(_0x126ef9=='')for(const [_0x49c892,_0x1af75e]of Object[_0x4d0a82(0x1c6)](mybalances)){_0x1af75e['toString']()!=0x0&&_0xb8fc16[_0x4d0a82(0x176)]({'coin':_0x49c892});}else for(const [_0x46d83d,_0x850cf9]of Object[_0x4d0a82(0x1c6)](mybalances)){if(_0x27c807[_0x4d0a82(0x1c9)](_0x46d83d)){const _0x36da7d=config[_0x4d0a82(0x188)]['find'](_0x1da128=>_0x1da128[_0x4d0a82(0x19d)]==_0x46d83d);if((_0x850cf9[_0x4d0a82(0x172)]()!=0x0||_0x36da7d)&&(allSymbols[_0x4d0a82(0x1c9)](_0x46d83d+'/'+_0x126ef9)||_0x46d83d==_0x126ef9))_0xb8fc16[_0x4d0a82(0x176)]({'coin':_0x46d83d,'symbol':_0x46d83d+'/'+_0x126ef9,'reverse':![],'number':Math[_0x4d0a82(0x17c)](_0x850cf9+(_0x36da7d&&_0x36da7d[_0x4d0a82(0x1aa)]||0x0),0x0)}),_0x46d83d!=_0x126ef9&&_0x1231bb[_0x4d0a82(0x176)](_0x46d83d+'/'+_0x126ef9);else(_0x850cf9[_0x4d0a82(0x172)]()!=0x0||_0x36da7d)&&allSymbols[_0x4d0a82(0x1c9)](_0x126ef9+'/'+_0x46d83d)&&(_0xb8fc16[_0x4d0a82(0x176)]({'coin':_0x46d83d,'symbol':_0x126ef9+'/'+_0x46d83d,'reverse':!![],'number':Math['max'](_0x850cf9+(_0x36da7d&&_0x36da7d['offset']||0x0),0x0)}),_0x46d83d!=_0x126ef9&&_0x1231bb['push'](_0x126ef9+'/'+_0x46d83d));}}}catch(_0x37cbc5){if(!_0x55a369){if(_0x37cbc5['toString']()[_0x4d0a82(0x1c9)]('API-key\x20format\x20invalid'))return logHistory('error',_0x4d0a82(0xe0)),![];else{if(_0x37cbc5[_0x4d0a82(0x172)]()[_0x4d0a82(0x1c9)](_0x4d0a82(0x1c4)))return logHistory(_0x4d0a82(0x14e),_0x4d0a82(0x1b4)),![];else{if(_0x37cbc5[_0x4d0a82(0x172)]()[_0x4d0a82(0x1c9)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))return logHistory(_0x4d0a82(0x14e),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x37cbc5,_0x4d0a82(0xcd));}}}else await handleError(_0x37cbc5,_0x4d0a82(0xcd));}return _0xb8fc16;}async function getPortfolio(_0x4c60b9){const _0x190fad=_0x3550e6;let _0x9b79ea=[],_0x532aae=[],_0x18d88e,_0x129db6=[],_0xc0da78,_0x4cae71;_0x4c60b9[_0x190fad(0x140)]===_0x190fad(0x1a2)||_0x4c60b9['apiSecret']===_0x190fad(0x1a2)?(_0xc0da78=config[_0x190fad(0x140)],_0x4cae71=config[_0x190fad(0x10b)]):(_0xc0da78=_0x4c60b9[_0x190fad(0x140)],_0x4cae71=_0x4c60b9[_0x190fad(0x10b)]);await initExchange(_0xc0da78,_0x4cae71);let _0x1a97ed=await loadSymbols();if(_0x1a97ed){_0x129db6=await getCoins(![],_0x4c60b9[_0x190fad(0x1a4)]);if(_0x129db6===![])proxyEmit(_0x190fad(0x188),![]);else{if(_0x4c60b9['basecoin']=='')proxyEmit(_0x190fad(0x188),_0x129db6);else{_0x129db6[_0x190fad(0x148)](_0x510a59=>{const _0x51429f=_0x190fad;_0x9b79ea[_0x51429f(0x176)](_0x510a59[_0x51429f(0x158)]);});try{_0x532aae=await exchange['fetchTickers'](_0x9b79ea);}catch(_0x16db36){await handleError(_0x16db36,_0x190fad(0x131));}_0x129db6[_0x190fad(0x148)](_0x15c3c4=>{const _0x25d064=_0x190fad;_0x15c3c4[_0x25d064(0x19d)]!=_0x4c60b9['basecoin']?_0x18d88e=_0x15c3c4['reverse']?0x1/_0x532aae[_0x15c3c4[_0x25d064(0x158)]][_0x25d064(0x122)]:_0x532aae[_0x15c3c4[_0x25d064(0x158)]][_0x25d064(0x122)]:_0x18d88e=0x1,_0x15c3c4[_0x25d064(0x152)]=formatResult(_0x18d88e,0x8);}),proxyEmit('portfolio',_0x129db6);}}}else proxyEmit(_0x190fad(0x188),![]);}function checkMinimums(_0x215891){const _0x4b2afa=_0x3550e6;let _0x2ff23b=!![];const _0x5bd5b4=!_0x215891[_0x4b2afa(0xec)]?markets[_0x215891[_0x4b2afa(0x158)]][_0x4b2afa(0x15c)][_0x4b2afa(0x108)][_0x4b2afa(0x1a3)]:markets[_0x215891[_0x4b2afa(0x158)]][_0x4b2afa(0x15c)]['cost']['min'],_0x3f9e07=!_0x215891[_0x4b2afa(0xec)]?markets[_0x215891['symbol']]['limits'][_0x4b2afa(0x150)]['min']:markets[_0x215891[_0x4b2afa(0x158)]][_0x4b2afa(0x15c)]['amount']['min'];if(Math['abs'](_0x215891[_0x4b2afa(0x1bb)])<_0x5bd5b4)_0x2ff23b=![];if(Math['abs'](_0x215891['trade'])*_0x215891[_0x4b2afa(0x122)]<_0x3f9e07)_0x2ff23b=![];return _0x2ff23b;}async function getBalances(){const _0x1ec805=_0x3550e6;let _0x1ce15f=0x0,_0x5dafdb;const _0x239263=config[_0x1ec805(0xe5)];currentCoins[_0x1ec805(0x148)](_0x30979b=>{const _0x3df5bb=_0x1ec805;if(_0x30979b[_0x3df5bb(0x19d)]!=config[_0x3df5bb(0x1a4)]){let _0x5c7872=global[_0x3df5bb(0x194)][noslash(_0x30979b[_0x3df5bb(0x158)])];_0x5dafdb=_0x30979b[_0x3df5bb(0xec)]?0x1/_0x5c7872:_0x5c7872;}else _0x5dafdb=0x1;let _0x1e9dd4=_0x30979b[_0x3df5bb(0x15e)]*_0x5dafdb;_0x1ce15f+=_0x1e9dd4,_0x30979b[_0x3df5bb(0x122)]=formatResult(Number(_0x5dafdb),0x8),_0x30979b[_0x3df5bb(0x179)]=_0x1e9dd4;}),currentCoins[_0x1ec805(0x148)](_0x2b8a7a=>{const _0x2a6d30=_0x1ec805;let _0x37cf9b=config[_0x2a6d30(0x188)][_0x2a6d30(0x13c)](_0x11cb0d=>_0x11cb0d[_0x2a6d30(0x19d)]==_0x2b8a7a['coin']),_0x1c9a3c=Number(_0x37cf9b[_0x2a6d30(0x159)]),_0x476ce0=_0x2b8a7a[_0x2a6d30(0x179)]/_0x1ce15f*0x64,_0x385034=_0x1c9a3c*_0x1ce15f/0x64/_0x2b8a7a[_0x2a6d30(0x122)]-_0x2b8a7a['number'];_0x2b8a7a['distribution']=formatResult(_0x476ce0,0x3),_0x2b8a7a['target']=formatResult(_0x1c9a3c,0x3),_0x2b8a7a['trade']=formatResult(_0x385034,0x8),_0x2b8a7a[_0x2a6d30(0xe4)]='',_0x2b8a7a[_0x2a6d30(0xff)]='';if(_0x2b8a7a[_0x2a6d30(0x19d)]!=config[_0x2a6d30(0x1a4)]){if(_0x2b8a7a['distribution']>_0x1c9a3c)_0x2b8a7a[_0x2a6d30(0xe4)]=_0x2a6d30(0x175),_0x2b8a7a['valid']=checkMinimums(_0x2b8a7a);else _0x2b8a7a[_0x2a6d30(0x159)]<_0x1c9a3c&&(_0x2b8a7a[_0x2a6d30(0xe4)]=_0x2a6d30(0x13a),_0x2b8a7a[_0x2a6d30(0xff)]=checkMinimums(_0x2b8a7a));}_0x2b8a7a[_0x2a6d30(0x106)]=_0x2b8a7a['distribution']/_0x2b8a7a[_0x2a6d30(0x14b)]-0x1;}),currentCoins[_0x1ec805(0x115)]((_0x34da65,_0xb86ff3)=>_0x34da65[_0x1ec805(0x106)]<_0xb86ff3[_0x1ec805(0x106)]?0x1:_0xb86ff3['delta']<_0x34da65[_0x1ec805(0x106)]?-0x1:0x0);const _0x47b055=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x47b055['eur'],'usd':_0x47b055['usd'],'portfolio':JSON[_0x1ec805(0x118)](currentCoins),'threshold':_0x239263},proxyEmit(_0x1ec805(0xdc),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1ec805(0x149)])headlessMode({'portfolio':currentCoins,'threshold':_0x239263});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x34f3d5=_0x3550e6;if(!lastBalances)return;let _0x544183=await getStartingBalances(![]),_0x21ee91=[],_0x11a209;JSON['parse'](lastBalances['portfolio'])[_0x34f3d5(0x148)](_0xff07c9=>{const _0x357a4c=_0x34f3d5;let _0x4da5ab={'coin':_0xff07c9['coin'],'number':_0xff07c9[_0x357a4c(0x15e)],'price':_0xff07c9['last']};_0x21ee91[_0x357a4c(0x176)](_0x4da5ab);});const _0x11dc80=await getFiat();_0x11a209={'date':lastBalances[_0x34f3d5(0x16c)][_0x34f3d5(0x112)]('\x20')[0x0],'eur':_0x11dc80[_0x34f3d5(0x1c3)],'usd':_0x11dc80['usd'],'coins':_0x21ee91};let _0x6d8ec5=dbPerformance['get'](_0x34f3d5(0xee))[_0x34f3d5(0x13c)]({'date':_0x11a209[_0x34f3d5(0xc9)]})['value']();_0x6d8ec5?dbPerformance[_0x34f3d5(0x147)]('data')[_0x34f3d5(0x13c)]({'date':_0x11a209[_0x34f3d5(0xc9)]})[_0x34f3d5(0x186)](_0x11a209)[_0x34f3d5(0xde)]():dbPerformance['get'](_0x34f3d5(0xee))[_0x34f3d5(0x176)](_0x11a209)[_0x34f3d5(0xde)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x5b4bab=_0x3550e6;if(dbPerformance[_0x5b4bab(0x1b6)]('data')['value']()){let _0x25b922=dbPerformance[_0x5b4bab(0x147)](_0x5b4bab(0xee))[_0x5b4bab(0x103)](_0x5b4bab(0xc9))['value']();proxyEmit(_0x5b4bab(0x15f),_0x25b922),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x456f6c=!![]){const _0x38de12=_0x3550e6;let _0x434eaa=dbPerformance[_0x38de12(0x147)](_0x38de12(0xee))[_0x38de12(0x13c)]({'date':config['startdate']})['value']();config[_0x38de12(0x140)]!=''&&!_0x434eaa&&(await setStartDatePerformance(config),_0x434eaa=dbPerformance[_0x38de12(0x147)]('data')[_0x38de12(0x13c)]({'date':config[_0x38de12(0x11a)]})[_0x38de12(0x179)]());if(config[_0x38de12(0x140)]==''||!_0x434eaa)return{};let _0x2476ac=0x0,_0x23dc6e=0x0,_0x1a088c=0x0,_0x316e19=[],_0x17a5da=0x0;config[_0x38de12(0x188)][_0x38de12(0x148)](_0x1efca1=>{const _0x4bcb15=_0x38de12;if(!_0x1efca1[_0x4bcb15(0x168)]){_0x316e19[_0x17a5da]={'coin':_0x1efca1[_0x4bcb15(0x19d)],'symbol':_0x1efca1[_0x4bcb15(0x158)],'number':_0x1efca1[_0x4bcb15(0x13b)],'price':_0x1efca1['startprice']},_0x2476ac+=_0x1efca1[_0x4bcb15(0x193)]*_0x1efca1[_0x4bcb15(0x13b)];if(config['basecoin']==_0x4bcb15(0x11f))_0x23dc6e+=_0x1efca1[_0x4bcb15(0x193)]*_0x1efca1['startnumber']*_0x434eaa['eur'],_0x1a088c+=_0x1efca1['startprice']*_0x1efca1[_0x4bcb15(0x13b)]*_0x434eaa[_0x4bcb15(0x163)];else{if(config[_0x4bcb15(0x1a4)]==_0x4bcb15(0x113)||config[_0x4bcb15(0x1a4)]==_0x4bcb15(0x17e)||config['basecoin']==_0x4bcb15(0x189))_0x23dc6e+=_0x1efca1[_0x4bcb15(0x193)]*_0x1efca1['startnumber']*_0x434eaa[_0x4bcb15(0x1c3)]/_0x434eaa['usd'],_0x1a088c+=_0x1efca1['startprice']*_0x1efca1['startnumber'];else config[_0x4bcb15(0x1a4)]==_0x4bcb15(0x1af)&&(_0x23dc6e+=_0x1efca1[_0x4bcb15(0x193)]*_0x1efca1[_0x4bcb15(0x13b)],_0x1a088c+=_0x1efca1[_0x4bcb15(0x193)]*_0x1efca1['startnumber']*_0x434eaa['usd']/_0x434eaa[_0x4bcb15(0x1c3)]);}_0x17a5da++;}});let _0x2cbf04={'basecoin':_0x2476ac,'eur':_0x23dc6e,'usd':_0x1a088c,'coins':_0x316e19};if(_0x456f6c)proxyEmit('starting-balances',_0x2cbf04);return _0x2cbf04;}function headlessMode(_0x16e482){const _0x1b59b1=_0x3550e6;let _0x3608ed=_0x16e482[_0x1b59b1(0x188)],_0x4d5275=_0x16e482[_0x1b59b1(0xe5)],_0x446fcd=[];for(let _0x2818d3 of _0x3608ed){if(_0x2818d3['coin']!=config[_0x1b59b1(0x1a4)]){if(_0x2818d3[_0x1b59b1(0x159)]/_0x2818d3[_0x1b59b1(0x14b)]-0x1>=_0x4d5275/0x64){if(_0x2818d3[_0x1b59b1(0xff)])_0x446fcd[_0x1b59b1(0x176)](_0x2818d3);}else{if(_0x2818d3[_0x1b59b1(0x159)]/_0x2818d3[_0x1b59b1(0x14b)]-0x1<=-_0x4d5275/0x64){if(_0x2818d3[_0x1b59b1(0xff)])_0x446fcd[_0x1b59b1(0x176)](_0x2818d3);}}}}_0x446fcd[_0x1b59b1(0x139)]>0x0&&placeOrder(_0x446fcd);}function symbolToCoin(_0x5ea8fc){const _0x386733=_0x3550e6;let _0x833129;if(_0x5ea8fc[_0x386733(0x1c9)]('/'+config[_0x386733(0x1a4)]))_0x833129=_0x5ea8fc[_0x386733(0x17f)]('/'+config[_0x386733(0x1a4)],'');if(_0x5ea8fc[_0x386733(0x1c9)](config['basecoin']+'/'))_0x833129=_0x5ea8fc[_0x386733(0x17f)](config[_0x386733(0x1a4)]+'/','');return _0x833129;}async function validateOrders(_0x2a0494=0x0){const _0x38d155=_0x3550e6;let _0x4d4c81=[],_0x272ac7=config[_0x38d155(0xf3)]==_0x38d155(0x157)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x38d155(0x146)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x38d155(0x148)](_0xa83637=>{const _0x48a378=_0x38d155;let _0x8b9306=previousCoins[_0x48a378(0x13c)](_0x58fc39=>_0x58fc39[_0x48a378(0x19d)]==symbolToCoin(_0xa83637[_0x48a378(0x158)])),_0x5466d0=currentCoins['find'](_0x24b66d=>_0x24b66d[_0x48a378(0x19d)]==symbolToCoin(_0xa83637[_0x48a378(0x158)])),_0x354631,_0x4b5b56;_0xa83637['side']==_0x48a378(0x13a)&&!_0xa83637[_0x48a378(0xec)]||_0xa83637[_0x48a378(0xe4)]==_0x48a378(0x175)&&_0xa83637[_0x48a378(0xec)]?(_0x354631=_0x8b9306[_0x48a378(0x15e)]+0.9*_0xa83637['filled'],_0x4b5b56=_0x8b9306[_0x48a378(0x15e)]+1.1*_0xa83637[_0x48a378(0x164)]):(_0x354631=_0x8b9306[_0x48a378(0x15e)]-1.1*_0xa83637[_0x48a378(0x164)],_0x4b5b56=_0x8b9306[_0x48a378(0x15e)]-0.9*_0xa83637['filled']);const _0x4d2ea4=_0xa83637[_0x48a378(0x164)]!=0x0&&_0x5466d0[_0x48a378(0x15e)]>=_0x354631&&_0x5466d0[_0x48a378(0x15e)]<=_0x4b5b56;_0x4d4c81['push'](_0x4d2ea4);if(_0x4d2ea4&&config['ordertype']!='market'){if(_0xa83637[_0x48a378(0xec)])logHistory(_0x48a378(0x19f),'Order\x20filled:\x20'+_0xa83637[_0x48a378(0x158)]+'\x20'+_0xa83637['side']+'\x20#'+formatResult(_0xa83637[_0x48a378(0x164)]/_0xa83637[_0x48a378(0x152)],0x8)+'\x20@'+formatResult(_0xa83637[_0x48a378(0x152)],0x8));else logHistory(_0x48a378(0x19f),_0x48a378(0x104)+_0xa83637[_0x48a378(0x158)]+'\x20'+_0xa83637[_0x48a378(0xe4)]+'\x20#'+formatResult(_0xa83637[_0x48a378(0x164)],0x8)+'\x20@'+formatResult(_0xa83637[_0x48a378(0x152)],0x8));}}),_0x4d4c81[_0x38d155(0x148)]((_0x18748c,_0x1993dd)=>{if(_0x18748c)lastOrders['splice'](_0x1993dd,0x1);});if(_0x2a0494<_0x272ac7&&_0x4d4c81[_0x38d155(0x1c9)](![])){if(_0x2a0494==0x0){config[_0x38d155(0xf3)]==_0x38d155(0x157)?logHistory(_0x38d155(0x14e),_0x38d155(0x141)):logHistory(_0x38d155(0x14e),'Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused');if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2a0494);},0xa*0x3e8);}else{(_0x2a0494==0x1||_0x2a0494==Math['round'](_0x272ac7/0x2)||_0x2a0494==_0x272ac7-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x2a0494);},validateOrderInterval);}}else{lockOrders=![];if(_0x2a0494>0x0&&!_0x4d4c81[_0x38d155(0x1c9)](![]))config[_0x38d155(0xf3)]==_0x38d155(0x157)?logHistory(_0x38d155(0xd2),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x38d155(0xd2),'Order(s)\x20filled\x20-\x20balancing\x20resumed');else _0x2a0494>0x0&&_0x4d4c81['includes'](![])&&(config[_0x38d155(0xf3)]==_0x38d155(0x157)?logHistory(_0x38d155(0xd2),_0x38d155(0x196)+Math[_0x38d155(0xfb)](_0x272ac7*validateOrderInterval/0xea60)+_0x38d155(0xe1)):(lastOrders[_0x38d155(0x148)](async _0x540515=>{const _0x2a1b9f=_0x38d155;try{const _0x7468ac=await exchange[_0x2a1b9f(0x1a9)](_0x540515[_0x2a1b9f(0x117)],_0x540515['symbol']);}catch(_0x2884d7){if(_0x2884d7[_0x2a1b9f(0x172)]()[_0x2a1b9f(0x1c9)](_0x2a1b9f(0xcf))){}else await handleError(_0x2884d7,_0x2a1b9f(0x11e));}}),logHistory(_0x38d155(0xd2),_0x38d155(0x1c2)+Math['round'](_0x272ac7*validateOrderInterval/0xea60)+_0x38d155(0xe1))));}}async function resetCoinResults(){const _0x193dbd=_0x3550e6;dbCoinResults[_0x193dbd(0x147)](_0x193dbd(0x110))[_0x193dbd(0x18f)]()[_0x193dbd(0xde)]();let _0x44710b=await getStartingBalances(![]);_0x44710b[_0x193dbd(0x110)][_0x193dbd(0x148)](_0x541751=>{const _0x48ca07=_0x193dbd,_0x10c6ac=_0x541751['symbol'][_0x48ca07(0x1c9)](config[_0x48ca07(0x1a4)]+'/');if(_0x541751[_0x48ca07(0x19d)]!=config[_0x48ca07(0x1a4)]){let _0x206735={'coin':_0x541751['coin'],'number':_0x541751[_0x48ca07(0x15e)],'breakeven':_0x541751[_0x48ca07(0x152)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x48ca07(0x147)](_0x48ca07(0x110))[_0x48ca07(0x176)](_0x206735)[_0x48ca07(0xde)]();}});}async function updateCoinResults(_0x2cf10e){const _0x45cbf8=_0x3550e6;let _0x450625,_0x139f47,_0x50784e,_0x21858f,_0x301937,_0x43d3de,_0x575fda=dbCoinResults[_0x45cbf8(0x147)](_0x45cbf8(0x110))['find']({'coin':_0x2cf10e[_0x45cbf8(0x19d)]})[_0x45cbf8(0x179)]();if(!_0x575fda)return;if(_0x2cf10e[_0x45cbf8(0x133)]&&_0x2cf10e['fee'][_0x45cbf8(0x1ce)]==config[_0x45cbf8(0x1a4)])_0x450625=_0x2cf10e[_0x45cbf8(0x133)]['cost'];else{if(_0x2cf10e['fee']&&_0x2cf10e[_0x45cbf8(0x133)]['currency']==_0x45cbf8(0x137))_0x450625=_0x2cf10e[_0x45cbf8(0x133)][_0x45cbf8(0x150)]*global['ticker'][_0x45cbf8(0x137)+config[_0x45cbf8(0x1a4)]];else _0x450625=0.001*_0x2cf10e['filled'];}const _0x3316d8=_0x2cf10e[_0x45cbf8(0x158)][_0x45cbf8(0x1c9)](config['basecoin']+'/');_0x3316d8&&(_0x43d3de={'coin':_0x2cf10e['coin'],'symbol':_0x2cf10e[_0x45cbf8(0x158)],'filled':_0x2cf10e[_0x45cbf8(0x164)]*_0x2cf10e[_0x45cbf8(0x152)],'side':_0x2cf10e['side']==_0x45cbf8(0x175)?_0x45cbf8(0x13a):_0x45cbf8(0x175),'price':0x1/_0x2cf10e[_0x45cbf8(0x152)]},_0x2cf10e={..._0x43d3de});_0x2cf10e[_0x45cbf8(0xe4)]==_0x45cbf8(0x13a)?_0x50784e=(_0x575fda[_0x45cbf8(0x109)]*_0x575fda[_0x45cbf8(0x15e)]+_0x2cf10e[_0x45cbf8(0x152)]*_0x2cf10e[_0x45cbf8(0x164)])/(_0x575fda[_0x45cbf8(0x15e)]+_0x2cf10e[_0x45cbf8(0x164)]):_0x50784e=(_0x575fda['breakeven']*_0x575fda[_0x45cbf8(0x15e)]-_0x2cf10e[_0x45cbf8(0x152)]*_0x2cf10e[_0x45cbf8(0x164)])/(_0x575fda['number']-_0x2cf10e['filled']);_0x2cf10e['side']==_0x45cbf8(0x13a)?_0x21858f=_0x575fda[_0x45cbf8(0x10c)]:_0x21858f=_0x575fda[_0x45cbf8(0x10c)]+(_0x2cf10e['price']-_0x575fda[_0x45cbf8(0x109)])*_0x2cf10e[_0x45cbf8(0x164)];_0x139f47=_0x2cf10e[_0x45cbf8(0xe4)]=='sell'?_0x575fda['number']-_0x2cf10e[_0x45cbf8(0x164)]:_0x575fda[_0x45cbf8(0x15e)]+_0x2cf10e[_0x45cbf8(0x164)],_0x301937=(_0x2cf10e['price']-_0x50784e)*_0x139f47;let _0x1253eb={'coin':_0x2cf10e[_0x45cbf8(0x19d)],'number':_0x139f47,'breakeven':formatResult(_0x50784e,0x8),'realized':formatResult(_0x21858f,0x8),'unrealized':formatResult(_0x301937,0x8),'fees':formatResult(_0x575fda[_0x45cbf8(0x1b1)]+_0x450625,0x8),'sells':_0x2cf10e[_0x45cbf8(0xe4)]==_0x45cbf8(0x175)?_0x575fda[_0x45cbf8(0x1d3)]+0x1:_0x575fda['sells'],'buys':_0x2cf10e[_0x45cbf8(0xe4)]==_0x45cbf8(0x13a)?_0x575fda[_0x45cbf8(0x1c7)]+0x1:_0x575fda['buys']};dbCoinResults[_0x45cbf8(0x147)]('coins')['find']({'coin':_0x2cf10e[_0x45cbf8(0x19d)]})[_0x45cbf8(0x186)](_0x1253eb)[_0x45cbf8(0xde)]();}async function placeOrder(_0x102411){const _0x59b6b1=_0x3550e6,_0x2f1845=config['ordertype']=='market'?_0x59b6b1(0x157):'limit';if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x59b6b1(0x169)](JSON[_0x59b6b1(0x118)](currentCoins));for(const _0x227fd5 of _0x102411){let _0x3e5492,_0x164979,_0x473ad7,_0x8400e3,_0x124a4a,_0x296067=_0x227fd5['symbol'];try{const _0x4a503f=await exchange['fetchTickers'](_0x296067),_0x598fb3=_0x4a503f[_0x296067];_0x3e5492=_0x598fb3['last'],_0x164979=_0x598fb3['bid'],_0x473ad7=_0x598fb3[_0x59b6b1(0x10d)];_0x227fd5[_0x59b6b1(0xec)]?(_0x8400e3=_0x227fd5[_0x59b6b1(0xe4)]=='buy'?'sell':_0x59b6b1(0x13a),_0x124a4a=Math[_0x59b6b1(0x16b)](_0x227fd5[_0x59b6b1(0x1bb)])/_0x3e5492):(_0x8400e3=_0x227fd5[_0x59b6b1(0xe4)],_0x124a4a=Math['abs'](_0x227fd5[_0x59b6b1(0x1bb)]));_0x2f1845==_0x59b6b1(0xf9)&&(config[_0x59b6b1(0xf3)]=='limit-high'&&(_0x3e5492=_0x8400e3=='buy'?_0x164979:_0x473ad7),config[_0x59b6b1(0xf3)]==_0x59b6b1(0x16d)&&(_0x3e5492=_0x8400e3=='buy'?_0x473ad7:_0x164979));_0x124a4a=formatResult(_0x124a4a,0x8),_0x3e5492=formatResult(_0x3e5492,0x8);const _0x4290e2=await exchange['createOrder'](_0x296067,_0x2f1845,_0x8400e3,_0x124a4a,_0x3e5492);lastOrders['push']({'orderId':_0x4290e2['id'],'symbol':_0x296067,'side':_0x8400e3,'reverse':_0x227fd5[_0x59b6b1(0xec)],'amount':_0x227fd5['reverse']?_0x4290e2[_0x59b6b1(0x108)]*_0x4290e2[_0x59b6b1(0x152)]:_0x4290e2[_0x59b6b1(0x108)],'filled':_0x227fd5[_0x59b6b1(0xec)]?_0x4290e2[_0x59b6b1(0x164)]*_0x4290e2['price']:_0x4290e2[_0x59b6b1(0x164)],'price':_0x4290e2['price']});const _0x1f916a=_0x8400e3==_0x59b6b1(0x175)?config[_0x59b6b1(0x13e)]?String['fromCodePoint']('0x'+config['emojisell'])+'\x20':'':config[_0x59b6b1(0x12b)]?String[_0x59b6b1(0xcc)]('0x'+config['emojibuy'])+'\x20':'',_0x56aa92=_0x2f1845==_0x59b6b1(0x157)?_0x59b6b1(0x102):config[_0x59b6b1(0xf3)]==_0x59b6b1(0x14c)?_0x59b6b1(0x145):'Limit\x20(low-margin)';if(_0x2f1845==_0x59b6b1(0x157))logHistory('order',''+_0x1f916a+_0x56aa92+_0x59b6b1(0x123)+_0x296067+'\x20'+_0x8400e3+'\x20#'+formatResult(_0x4290e2[_0x59b6b1(0x164)],0x8)+'\x20@'+formatResult(_0x4290e2[_0x59b6b1(0x152)],0x8));else logHistory(_0x59b6b1(0x19f),''+_0x1f916a+_0x56aa92+_0x59b6b1(0x123)+_0x296067+'\x20'+_0x8400e3+'\x20#'+formatResult(_0x4290e2[_0x59b6b1(0x108)],0x8)+'\x20@'+formatResult(_0x4290e2[_0x59b6b1(0x152)],0x8));_0x4290e2[_0x59b6b1(0x19d)]=_0x227fd5['coin'],await updateCoinResults(_0x4290e2);if(config[_0x59b6b1(0xdb)]!=0x0){let _0x57fe38=null;if(cooldownTracker[_0x59b6b1(0x139)]==config[_0x59b6b1(0xdb)]-0x1)_0x57fe38=cooldownTracker[_0x59b6b1(0x1cb)]();const _0x4379ca=getTimeStamp();cooldownTracker[_0x59b6b1(0x176)](_0x4379ca);if(_0x57fe38){const _0x9ef36e=fns[_0x59b6b1(0x144)](new Date(_0x4379ca),new Date(_0x57fe38));_0x9ef36e<cooldownInterval&&(logHistory(_0x59b6b1(0x14e),_0x59b6b1(0x129)+config[_0x59b6b1(0xdb)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x59b6b1(0x132)+cooldownPeriod/(0xe10*0x3e8)+_0x59b6b1(0x1c1)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x429bb1){if(_0x429bb1[_0x59b6b1(0x172)]()[_0x59b6b1(0x1c9)](_0x59b6b1(0x1bf)))logHistory(_0x59b6b1(0x14e),_0x59b6b1(0x14d)+_0x296067);else{if(_0x429bb1[_0x59b6b1(0x172)]()[_0x59b6b1(0x1c9)](_0x59b6b1(0x180)))logHistory(_0x59b6b1(0x14e),'Order\x20amount\x20is\x20invalid:\x20'+_0x296067);else await handleError(_0x429bb1,'placeOrder()');}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x59b6b1(0x149)]&&(config[_0x59b6b1(0xf3)]==_0x59b6b1(0x157)?logHistory(_0x59b6b1(0x14e),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x59b6b1(0x14e),_0x59b6b1(0xf4)));else coolingDown&&(!config[_0x59b6b1(0x149)]&&logHistory(_0x59b6b1(0x14e),_0x59b6b1(0xe6)));}}function logHistory(_0x18ceaa,_0x5c62ed,_0x28f1a2=''){const _0x390a47=_0x3550e6;let _0x4159e8={'time':getTimeStamp(),'type':_0x18ceaa,'event':_0x5c62ed,'botname':config['botname'],'showname':config[_0x390a47(0x111)]};dbLogs[_0x390a47(0x147)]('logs')[_0x390a47(0x176)](_0x4159e8)['write']();if(_0x28f1a2=='')_0x28f1a2=_0x5c62ed;proxyEmit(_0x390a47(0x1b2),{'log':_0x4159e8,'summary':_0x28f1a2}),process[_0x390a47(0xf6)]({'telegram':_0x4159e8},_0x41ad02=>{}),logging(''+_0x4159e8[_0x390a47(0x1b2)]);}function emitHistory(_0x207c3b={}){const _0x56b0e0=_0x3550e6;Object[_0x56b0e0(0xf5)](_0x207c3b)[_0x56b0e0(0x139)]==0x0&&(_0x207c3b={'type':[_0x56b0e0(0x19f),_0x56b0e0(0x1b2)],'event':'','page':0x1});if(_0x207c3b[_0x56b0e0(0x11c)][_0x56b0e0(0x1c9)](_0x56b0e0(0x1b2)))_0x207c3b['type'][_0x56b0e0(0x130)](_0x207c3b[_0x56b0e0(0x11c)][_0x56b0e0(0xf8)](_0x56b0e0(0x1b2)),0x1,_0x56b0e0(0x14e),_0x56b0e0(0xd2));if(dbLogs['has'](_0x56b0e0(0x174))[_0x56b0e0(0x179)]()){let _0x59c711=dbLogs[_0x56b0e0(0x147)]('logs')[_0x56b0e0(0x124)](_0x506b8d=>{const _0x17a2bd=_0x56b0e0;if(_0x207c3b['type'][_0x17a2bd(0x139)]==0x0)return![];else return _0x207c3b[_0x17a2bd(0x11c)]['includes'](_0x506b8d[_0x17a2bd(0x11c)]);})[_0x56b0e0(0x124)](_0x33d4f0=>{const _0x2f98a1=_0x56b0e0;if(_0x207c3b[_0x2f98a1(0x1b2)]=='')return!![];else return _0x33d4f0[_0x2f98a1(0x1b2)]['toLowerCase']()[_0x2f98a1(0x1c9)](_0x207c3b[_0x2f98a1(0x1b2)][_0x2f98a1(0xf1)]());})[_0x56b0e0(0x103)](_0x56b0e0(0x16c)),_0x324e36=_0x59c711[_0x56b0e0(0x179)]()[_0x56b0e0(0x139)];_0x59c711=_0x59c711[_0x56b0e0(0xec)]()['slice']((_0x207c3b[_0x56b0e0(0x101)]-0x1)*logPageSize,_0x207c3b[_0x56b0e0(0x101)]*logPageSize-0x1)[_0x56b0e0(0xec)]()[_0x56b0e0(0x179)](),proxyEmit(_0x56b0e0(0x15d),{'logs':_0x59c711,'total':_0x324e36});}else proxyEmit(_0x56b0e0(0x15d),{'logs':[],'total':0x0});}async function pauseBot(_0x5d42a8){const _0x5b7bd5=_0x3550e6,_0x288a1e=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()[_0x5b7bd5(0x1b0)](),consecutivePauses=0x1;else{if(_0x288a1e-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x5b7bd5(0xf6)]({'stop':'restart'},_0x1f2088=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x5b7bd5(0x14e),'Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x5d42a8),botPaused=![],reset();}}async function handleError(_0x22e35b,_0x50201a,_0x43e3f1=''){const _0x56c8b0=_0x3550e6;if(_0x22e35b[_0x56c8b0(0x172)]()[_0x56c8b0(0x1c9)]('DDoSProtection'))logHistory('error',_0x50201a+_0x56c8b0(0x17b)),await pauseBot(pauseBotInterval);else{if(_0x22e35b[_0x56c8b0(0x172)]()['includes']('ExchangeNotAvailable'))logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0x184)),await pauseBot(pauseBotInterval);else{if(_0x22e35b[_0x56c8b0(0x172)]()['includes'](_0x56c8b0(0xe2)))logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0xef)),await pauseBot(pauseBotInterval);else{if(_0x22e35b[_0x56c8b0(0x172)]()[_0x56c8b0(0x1c9)](_0x56c8b0(0xd8)))logHistory('error',_0x50201a+_0x56c8b0(0x195)),logHistory(_0x56c8b0(0x14e),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['send']({'stop':_0x56c8b0(0x199)},_0x107bcc=>{});else{if(_0x22e35b['toString']()[_0x56c8b0(0x1c9)]('AuthenticationError'))logHistory('error',_0x50201a+_0x56c8b0(0x13f)),logHistory('error',_0x56c8b0(0x119)),process[_0x56c8b0(0xf6)]({'stop':_0x56c8b0(0x199)},_0x3fbeb9=>{});else{if(_0x22e35b[_0x56c8b0(0x172)]()[_0x56c8b0(0x1c9)](_0x56c8b0(0x127)))logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0xd4)),logHistory(_0x56c8b0(0x14e),_0x56c8b0(0x119)),process[_0x56c8b0(0xf6)]({'stop':_0x56c8b0(0x199)},_0x5c2f85=>{});else{if(_0x22e35b['toString']()['includes'](_0x56c8b0(0x19c)))logHistory(_0x56c8b0(0x14e),_0x50201a+'\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock'),logHistory(_0x56c8b0(0x14e),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x56c8b0(0xf6)]({'stop':_0x56c8b0(0x199)},_0x1fdcd0=>{});else{if(_0x22e35b[_0x56c8b0(0x172)]()[_0x56c8b0(0x1c9)](_0x56c8b0(0x1b3)))logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0xd3)),await pauseBot(pauseBotInterval),process[_0x56c8b0(0xf6)]({'stop':'restart'},_0x286bc9=>{});else _0x22e35b[_0x56c8b0(0x172)]()[_0x56c8b0(0x1c9)](_0x56c8b0(0x12f))?logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0x19e)):(logHistory(_0x56c8b0(0x14e),_0x50201a+_0x56c8b0(0x1cc)),logging(_0x50201a+_0x56c8b0(0xda),_0x22e35b),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x467195,_0x50dfe1){const _0x138875=_0x3550e6;return parseFloat(_0x467195[_0x138875(0x173)](_0x50dfe1));}function logging(_0x45038a,_0x4877bd=''){const _0x1c9c32=_0x3550e6;if(config[_0x1c9c32(0x111)])console[_0x1c9c32(0x12c)](getTimeStamp()+':\x20'+config[_0x1c9c32(0x18e)]+'\x20>\x20'+_0x45038a,_0x4877bd);else console[_0x1c9c32(0x12c)](getTimeStamp()+_0x1c9c32(0xcb)+botID+_0x1c9c32(0xfd)+_0x45038a,_0x4877bd);}function getServerTime(){const _0x5d2ae4=_0x3550e6,_0x4c9814=new Date();return _0x4c9814['getFullYear']()+'/'+(_0x4c9814[_0x5d2ae4(0x182)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4c9814[_0x5d2ae4(0x185)]()['toString']()[_0x5d2ae4(0x114)](0x2,'0')+'\x20'+_0x4c9814[_0x5d2ae4(0xe7)]()['toString']()['padStart'](0x2,'0')+':'+_0x4c9814[_0x5d2ae4(0xca)]()[_0x5d2ae4(0x172)]()[_0x5d2ae4(0x114)](0x2,'0')+':'+_0x4c9814[_0x5d2ae4(0x18c)]()[_0x5d2ae4(0x172)]()[_0x5d2ae4(0x114)](0x2,'0');}function getTimeStamp(){const _0x18c93f=_0x3550e6,_0x51169c=shiftedTime();return _0x51169c[_0x18c93f(0x156)]()+'/'+(_0x51169c[_0x18c93f(0x182)]()+0x1)[_0x18c93f(0x172)]()[_0x18c93f(0x114)](0x2,'0')+'/'+_0x51169c[_0x18c93f(0x185)]()[_0x18c93f(0x172)]()[_0x18c93f(0x114)](0x2,'0')+'\x20'+_0x51169c[_0x18c93f(0xe7)]()[_0x18c93f(0x172)]()[_0x18c93f(0x114)](0x2,'0')+':'+_0x51169c[_0x18c93f(0xca)]()[_0x18c93f(0x172)]()[_0x18c93f(0x114)](0x2,'0')+':'+_0x51169c['getSeconds']()[_0x18c93f(0x172)]()[_0x18c93f(0x114)](0x2,'0');}function getDate(){const _0x4340f4=_0x3550e6,_0x56e953=shiftedTime();return _0x56e953[_0x4340f4(0x156)]()+'/'+(_0x56e953[_0x4340f4(0x182)]()+0x1)[_0x4340f4(0x172)]()[_0x4340f4(0x114)](0x2,'0')+'/'+_0x56e953[_0x4340f4(0x185)]()[_0x4340f4(0x172)]()[_0x4340f4(0x114)](0x2,'0');}function getHour(){const _0x406105=_0x3550e6,_0x47215e=shiftedTime();return _0x47215e[_0x406105(0xe7)]()[_0x406105(0x172)]()['padStart'](0x2,'0');}function sleep(_0x4d9a3c){return new Promise(_0x210695=>setTimeout(_0x210695,_0x4d9a3c));}function shiftedTime(){const _0x565d2e=_0x3550e6,_0x46581f=new Date();let _0x393af8=_0x46581f;if(config&&config[_0x565d2e(0x181)]!==0x0)_0x393af8=fns[_0x565d2e(0x136)](_0x46581f,{'hours':config['timeshift']});return _0x393af8;}