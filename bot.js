const _0x921764=_0x2114;(function(_0x3097c5,_0x375bc2){const _0x8f84bd=_0x2114,_0x10963b=_0x3097c5();while(!![]){try{const _0x253c52=-parseInt(_0x8f84bd(0x1e6))/0x1*(parseInt(_0x8f84bd(0x16e))/0x2)+-parseInt(_0x8f84bd(0x143))/0x3*(-parseInt(_0x8f84bd(0x135))/0x4)+parseInt(_0x8f84bd(0x154))/0x5+parseInt(_0x8f84bd(0x1ca))/0x6+parseInt(_0x8f84bd(0x152))/0x7+parseInt(_0x8f84bd(0x15c))/0x8*(parseInt(_0x8f84bd(0x16f))/0x9)+-parseInt(_0x8f84bd(0x141))/0xa*(parseInt(_0x8f84bd(0x122))/0xb);if(_0x253c52===_0x375bc2)break;else _0x10963b['push'](_0x10963b['shift']());}catch(_0x3ecdf8){_0x10963b['push'](_0x10963b['shift']());}}}(_0x2fb2,0xc6956));const _0x36fc34=function(){let _0x42e35a=!![];return function(_0x5d2508,_0x10354d){const _0x1c685c=_0x42e35a?function(){if(_0x10354d){const _0x579200=_0x10354d['apply'](_0x5d2508,arguments);return _0x10354d=null,_0x579200;}}:function(){};return _0x42e35a=![],_0x1c685c;};}(),_0x203ecb=_0x36fc34(this,function(){const _0x32c807=_0x2114;return _0x203ecb[_0x32c807(0x13e)]()[_0x32c807(0x1fb)](_0x32c807(0x1fe))[_0x32c807(0x13e)]()[_0x32c807(0x17d)](_0x203ecb)['search'](_0x32c807(0x1fe));});_0x203ecb();'use strict';const ccxt=require(_0x921764(0x223)),low=require('lowdb'),FileSync=require(_0x921764(0x1a2)),fs=require('fs'),fns=require(_0x921764(0x206)),{WebsocketClient,DefaultLogger}=require(_0x921764(0x17f)),Crypt=require(_0x921764(0x18b))[_0x921764(0x204)];let exchange,wsClient;global[_0x921764(0x166)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x921764(0x1c3))[_0x921764(0x15d)],botID=process['argv'][0x2]||_0x921764(0x11f),pattern=/^[0-9]{3}$/;if(!pattern[_0x921764(0x21b)](botID))return console['log'](_0x921764(0x1f4)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x921764(0x203)](0x1);const userID=process[_0x921764(0x1f2)][0x3]||'',configpath=userID?_0x921764(0x219)+userID+'/':'./config/';!fs[_0x921764(0x197)](configpath)&&fs[_0x921764(0x222)](configpath);const configfile=configpath+'bot-'+botID+_0x921764(0x1f1),logfile=configpath+_0x921764(0x1fc)+botID+'-events.json',performancefile=configpath+_0x921764(0x1fc)+botID+_0x921764(0x184),coinresultsfile=configpath+'bot-'+botID+_0x921764(0x1b8),settingsfile=configpath+_0x921764(0x1f3),securefile=configpath+'bb-secure.json',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x921764(0x1c5)]({'logs':[]})[_0x921764(0x1d7)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x921764(0x1c5)]({'data':[]})[_0x921764(0x1d7)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x921764(0x1c5)]({'bot':[]})[_0x921764(0x1d7)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x921764(0x1c5)]({'coins':[]})['write']();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x921764(0x182),'symbol':'BTC/EUR'},'usd':{'coin':_0x921764(0x17b),'symbol':_0x921764(0x193)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x38c66c)=>{},'debug':(..._0x55ce11)=>{},'notice':(..._0x183a7a)=>{},'info':(..._0x108d24)=>{},'warning':(..._0x11e77f)=>{},'error':async function(..._0x234694){const _0x452921=_0x921764,_0x28f759=new Date()['getTime']();if(!lastErrorShown||_0x28f759-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x452921(0x1d4)](),logHistory(_0x452921(0x195),_0x452921(0x161)+consecutivePauses+_0x452921(0x1e0));let _0x179a85='';if(_0x234694[0x0])_0x179a85+=_0x234694[0x0];if(_0x234694[0x1]&&_0x234694[0x1][_0x452921(0x195)]&&_0x234694[0x1][_0x452921(0x195)]['message'])_0x179a85+=_0x452921(0x16a)+_0x234694[0x1]['error'][_0x452921(0x1d2)];logging(_0x452921(0x161)+consecutivePauses+')\x20|\x20Error\x20details:\x20',''+_0x179a85),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);function _0x2114(_0x3d8423,_0x13e29b){const _0x150f2a=_0x2fb2();return _0x2114=function(_0x203ecb,_0x36fc34){_0x203ecb=_0x203ecb-0x11c;let _0x2fb265=_0x150f2a[_0x203ecb];return _0x2fb265;},_0x2114(_0x3d8423,_0x13e29b);}settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x921764(0x1a5)]);process[_0x921764(0x1a6)]({'started':_0x921764(0x21a)},_0x25da1a=>{}),initializeProcessListeners();function _0x2fb2(){const _0x573d38=['defaults','fetchTickers','availableBalance','symbols','bid','4081410klHZIb','cooldown','side','startnumber','cancelLoading','toLowerCase','loadMarkets','USDC','message','ask','getTime','getPortfolio()','kill','write','last','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','balances','length','args','outboundAccountPosition','fromCodePoint','excluded',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','Market','log','decrypt','userData','wss://stream.binance.us:9443','404213FRnNLN','differenceInSeconds','order','headless','buys','showname','coin','placeOrder','threshold','HOT/EUR','timeout','-config.json','argv','bb-settings.json','Error:\x20Invalid\x20argument\x20','binanceus','\x20orders\x20in\x20less\x20than\x20','cancelOrder','fee','storeHeadless','USDT','search','bot-','recreateHistory()','(((.+)+)+)+$','buy','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','value','reconnected','exit','Crypt','price','date-fns','keys','\x20order:\x20','format','storeConfiguration','Order(s)\x20filled\x20-\x20balancing\x20resumed','AuthenticationError','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','closeWs','asset','bot','round','shift','reduce','logs','replace','cost','assign','breakeven','./config/','running','test','InsufficientFunds','page','botname','Limit\x20(high-margin)','Limit\x20(low-margin)','sells','mkdirSync','ccxt','map','number','MIN_NOTIONAL','parse','time','valid','getMonth','data','001','differenceInCalendarDays','toFixed','55vqiNjz','startprice','abs','coinamount','emojibuy','indexOf','has','configuration','type','function','remove','realized','add','BUSD','filled','coins','getStartingBalances','subscribeSpotUserDataStream','timestamp','862688HEfsxC','includes','fetchBalance','\x20hour','event','startdate','createOrder','sell','orderId','toString','currency','symbol','4289660kNxqms','padStart','9jPYrFn','getFullYear','starting-balances','Executed\x20','BTC/BUSD','getMinutes','getSeconds','formattedMessage','eur','kline','Binance\x20API\x20secret\x20is\x20invalid','OrderNotFound','wsKey','Order\x20amount\x20is\x20invalid:\x20','spot','9061682lDJZmO','executionReport','1573790MCfEGb','wsMarket','ordertype','target','privateKey','limits','fetchOrders','yyyy-MM-dd\x27T\x27HH:mm:ss','65752sVqvfl','version','isArray','delta','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','WebSockets(','************','sort','exchange','secure','ticker','filter','remainingSymbols','get','\x20-\x20','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','parseISO','4KzTlJr','909gdZpNI','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','initws()','emojisell','ExchangeNotAvailable','loadSymbols()','event-history','orderStatus','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','splice','min','basecoin','BTCUSDT','forEach','constructor','offset','binance','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','success','BTCEUR','getHours','-performance.json','accumulatedQuantity','stringify','eachDayOfInterval','find','getDate','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','hybrid-crypto-js','performance','milliseconds','reverse','BTC','limit','yyyy/MM/dd','distribution','BTC/USDT','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','error','close','existsSync','coin-loading-progress','apiSecret','entries','limit-high','\x20|\x20Error\x20details:\x20','sortBy','usd','slice','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','RequestTimeout','lowdb/adapters/FileSync','restart','split','timeshift','send','fees','portfolio','Order:\x20','market','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','push','apiKey','progress','trade','getFiat()','InvalidNonce','Invalid\x20quantity','cancelOrder()','amount','Bot\x20','eventType','\x20|\x20Unknown\x20error\x20occured','-results.json','Binance\x20API\x20key\x20is\x20invalid','DAI/','getCoins()','recreate','API-key\x20format\x20invalid','BNB','date','max','placeOrder()','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','./version.json','FILLED'];_0x2fb2=function(){return _0x573d38;};return _0x2fb2();}function proxyEmit(_0x476e13,_0x250e3f=null){const _0x36793f=_0x921764;process[_0x36793f(0x1a6)]({'function':_0x476e13,'args':_0x250e3f},_0x1f9d0f=>{});}function initializeProcessListeners(){const _0x57be10=_0x921764;process['on'](_0x57be10(0x1d2),_0x89a63f=>{const _0x45a843=_0x57be10;switch(Object[_0x45a843(0x207)](_0x89a63f)[0x0]){case _0x45a843(0x1a5):_0x89a63f['timeshift']!=undefined&&(settings[_0x45a843(0x1a5)]=_0x89a63f['timeshift'],updateTimeshift(settings[_0x45a843(0x1a5)]));break;case'function':switch(_0x89a63f[_0x45a843(0x12b)]){case'initclient':initclient();break;case'emitHistory':emitHistory(_0x89a63f[_0x45a843(0x1dc)]);break;case'getPortfolio':getPortfolio(_0x89a63f[_0x45a843(0x1dc)]);break;case _0x45a843(0x20a):storeConfiguration(_0x89a63f[_0x45a843(0x1dc)]);break;case _0x45a843(0x1f9):storeHeadless(_0x89a63f['args']);break;case _0x45a843(0x132):getStartingBalances();break;case _0x45a843(0x1ed):placeOrder(_0x89a63f[_0x45a843(0x1dc)]);break;case _0x45a843(0x1ce):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x30946f=_0x921764;if(pidBalances)clearTimeout(pidBalances);if(config[_0x30946f(0x1ad)]!=''){await initExchange(config[_0x30946f(0x1ad)],config[_0x30946f(0x199)]);let _0x19ec42=await loadSymbols();_0x19ec42&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x187880,_0x30a050){const _0x5e176d=_0x921764,_0x37d6f6=ccxt[config[_0x5e176d(0x164)]];let _0x3d36ea;switch(config[_0x5e176d(0x164)]){case'binance':_0x3d36ea='wss://stream.binance.com:9443';break;case _0x5e176d(0x1f5):_0x3d36ea=_0x5e176d(0x1e5);break;default:_0x3d36ea='wss://stream.binance.com:9443';}exchange=new _0x37d6f6({'apiKey':_0x187880,'secret':_0x30a050,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x187880,'api_secret':_0x30a050,'beautify':!![],'wsUrl':_0x3d36ea},logger),config[_0x5e176d(0x164)]==_0x5e176d(0x1f5)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x5e176d(0x147)},'usd':{'coin':_0x5e176d(0x17b),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x40f444=_0x921764;let _0x4c38d1;try{markets=await exchange[_0x40f444(0x1d0)]();const _0x413017=[_0x40f444(0x1ba),'HOT/BTC',_0x40f444(0x1ef)];allSymbols=exchange[_0x40f444(0x1c8)][_0x40f444(0x167)](_0x50ca6b=>{let _0x28a946=![];return _0x413017['forEach'](_0x336aba=>{const _0x269ad2=_0x2114;if(_0x50ca6b[_0x269ad2(0x136)](_0x336aba))_0x28a946=!![];}),!_0x28a946;}),_0x4c38d1=!![];}catch(_0x50c004){await handleError(_0x50c004,_0x40f444(0x174)),_0x4c38d1=![];}return _0x4c38d1;}async function initbot(){const _0x44da9=_0x921764;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x3b8108=dbCoinResults[_0x44da9(0x169)]('coins')['value']();if(_0x3b8108[_0x44da9(0x1db)]==0x0)await resetCoinResults();}async function initclient(){const _0x3b3604=_0x921764;proxyEmit(_0x3b3604(0x129),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x3b3604(0x1da),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4a2dc7=_0x921764;wsinitialized=![];ws1&&(ws1[_0x4a2dc7(0x17c)](_0x5dafde=>{const _0x398143=_0x4a2dc7;try{wsClient[_0x398143(0x20e)](_0x5dafde);}catch(_0xdf198){}}),ws1=[]);if(ws2){try{wsClient[_0x4a2dc7(0x20e)](ws2);}catch(_0x276d6f){}ws2=null;}}async function initws(){const _0x4a97f3=_0x921764;cleanws();let _0x2a9c6d=[];currentCoins[_0x4a97f3(0x17c)](_0x444880=>{const _0x597900=_0x4a97f3;if(_0x444880[_0x597900(0x1ec)]!=config[_0x597900(0x17a)])_0x2a9c6d[_0x597900(0x1ac)](noslash(_0x444880['symbol']));});if(!_0x2a9c6d['includes'](stablecoins[_0x4a97f3(0x14b)]['coin']))_0x2a9c6d[_0x4a97f3(0x1ac)](stablecoins[_0x4a97f3(0x14b)]['coin']);if(!_0x2a9c6d['includes'](stablecoins[_0x4a97f3(0x19e)][_0x4a97f3(0x1ec)]))_0x2a9c6d['push'](stablecoins[_0x4a97f3(0x19e)][_0x4a97f3(0x1ec)]);if(!_0x2a9c6d[_0x4a97f3(0x136)](_0x4a97f3(0x1be)+config[_0x4a97f3(0x17a)]))_0x2a9c6d['push']('BNB'+config[_0x4a97f3(0x17a)]);try{_0x2a9c6d[_0x4a97f3(0x17c)]((_0x2aa9ac,_0x13cee0)=>{ws1[_0x13cee0]=wsClient['subscribeSpotKline'](_0x2aa9ac,'1m');}),ws2=wsClient[_0x4a97f3(0x133)](),wsClient['on'](_0x4a97f3(0x14a),_0x51ef82=>{const _0x47b8e1=_0x4a97f3;if(!Array[_0x47b8e1(0x15e)](_0x51ef82)&&!_0x51ef82['wsKey']['includes'](_0x47b8e1(0x1e4))){if(_0x51ef82[_0x47b8e1(0x1b6)]===_0x47b8e1(0x14c)){global[_0x47b8e1(0x166)][_0x51ef82[_0x47b8e1(0x14c)][_0x47b8e1(0x140)]]=_0x51ef82[_0x47b8e1(0x14c)][_0x47b8e1(0x196)];return;}}else{if(!Array['isArray'](_0x51ef82)&&_0x51ef82[_0x47b8e1(0x14f)][_0x47b8e1(0x136)](_0x47b8e1(0x1e4))){if(_0x51ef82[_0x47b8e1(0x155)][_0x47b8e1(0x136)](_0x47b8e1(0x151))){updateNumberCoins(_0x51ef82);return;}}}}),wsClient['on'](_0x4a97f3(0x202),async _0x17addb=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x396ec4){await handleError(_0x396ec4,_0x4a97f3(0x171));}let _0x54009e,_0x384639=0x0;loading[_0x4a97f3(0x168)]=[];let _0x1fe81=0x0;currentCoins[_0x4a97f3(0x17c)](_0x387cab=>{const _0x134370=_0x4a97f3;if(_0x387cab[_0x134370(0x1ec)]!=config[_0x134370(0x17a)])loading[_0x134370(0x168)][_0x134370(0x1ac)](_0x387cab[_0x134370(0x140)]);}),loadingCanceled=![];while(_0x54009e!=currentCoins[_0x4a97f3(0x1db)]-0x1){_0x54009e=0x0,currentCoins['forEach'](_0x54e7e9=>{const _0x23a1c9=_0x4a97f3;_0x54e7e9[_0x23a1c9(0x1ec)]!=config[_0x23a1c9(0x17a)]&&global[_0x23a1c9(0x166)][noslash(_0x54e7e9[_0x23a1c9(0x140)])]&&(loading['remainingSymbols']=loading[_0x23a1c9(0x168)][_0x23a1c9(0x167)](_0x1d3a8a=>_0x1d3a8a!=_0x54e7e9[_0x23a1c9(0x140)]),_0x54009e++);}),loading[_0x4a97f3(0x1ae)]=Math['round'](_0x54009e/(currentCoins[_0x4a97f3(0x1db)]-0x1)*0x64);_0x1fe81>0x1e*0x5&&(loading[_0x4a97f3(0x1f0)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x54009e!=_0x384639&&(_0x384639=_0x54009e,emitLoadingProgress()),_0x1fe81++,await sleep(0xc8);}if(_0x54009e==currentCoins[_0x4a97f3(0x1db)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x707c6d=_0x921764;proxyEmit(_0x707c6d(0x198),loading);}async function getFiat(){const _0x3ba699=_0x921764;let _0x1dfb90=0x0,_0x111290=0x0;try{_0x1dfb90=global[_0x3ba699(0x166)][stablecoins[_0x3ba699(0x14b)][_0x3ba699(0x1ec)]],_0x111290=global[_0x3ba699(0x166)][stablecoins[_0x3ba699(0x19e)][_0x3ba699(0x1ec)]];}catch(_0x3ac1de){await handleError(_0x3ac1de,_0x3ba699(0x1b0));}return{'eur':Number(_0x1dfb90),'usd':Number(_0x111290)};}async function setStartDatePerformance(_0x2c4556){const _0x3c5312=_0x921764,_0x2e6ffd=fns['format'](new Date(_0x2c4556['startdate']),_0x3c5312(0x191));let _0x543715=[];_0x543715[stablecoins[_0x3c5312(0x14b)][_0x3c5312(0x1ec)]]=await getCloses(stablecoins[_0x3c5312(0x14b)][_0x3c5312(0x140)],new Date(_0x2c4556[_0x3c5312(0x13a)]),0x1),_0x543715[stablecoins[_0x3c5312(0x19e)][_0x3c5312(0x1ec)]]=await getCloses(stablecoins[_0x3c5312(0x19e)][_0x3c5312(0x140)],new Date(_0x2c4556[_0x3c5312(0x13a)]),0x1);let _0x394938,_0x2e17bb=[];_0x2c4556['portfolio'][_0x3c5312(0x17c)](_0x4df14c=>{const _0xba2845=_0x3c5312;!_0x4df14c[_0xba2845(0x1df)]&&_0x2e17bb[_0xba2845(0x1ac)]({'coin':_0x4df14c[_0xba2845(0x1ec)],'number':_0x4df14c['startnumber'],'price':_0x4df14c[_0xba2845(0x123)]});}),_0x394938={'date':_0x2e6ffd,'eur':_0x543715[stablecoins[_0x3c5312(0x14b)][_0x3c5312(0x1ec)]][0x0],'usd':_0x543715[stablecoins['usd'][_0x3c5312(0x1ec)]][0x0],'coins':_0x2e17bb};let _0x51cffc=dbPerformance['get'](_0x3c5312(0x11e))[_0x3c5312(0x188)]({'date':_0x2e6ffd})[_0x3c5312(0x201)]();_0x51cffc?dbPerformance[_0x3c5312(0x169)]('data')[_0x3c5312(0x188)]({'date':_0x2e6ffd})[_0x3c5312(0x217)](_0x394938)[_0x3c5312(0x1d7)]():dbPerformance['get'](_0x3c5312(0x11e))['push'](_0x394938)['write'](),_0x51cffc=dbPerformance['get']('data')[_0x3c5312(0x19d)](_0x3c5312(0x1bf))['value'](),_0x51cffc['forEach'](_0x37413d=>{const _0x4a017c=_0x3c5312;_0x37413d[_0x4a017c(0x1bf)]<_0x2e6ffd&&dbPerformance[_0x4a017c(0x169)](_0x4a017c(0x11e))[_0x4a017c(0x12c)]({'date':_0x37413d['date']})[_0x4a017c(0x1d7)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x56ccdd){const _0x9492a6=_0x921764;let _0x4727bd,_0x5832f4=[];logHistory(_0x9492a6(0x181),'Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes'),_0x56ccdd[_0x9492a6(0x1a8)]['forEach'](_0x294076=>{const _0x2480eb=_0x9492a6;if(_0x294076[_0x2480eb(0x1ec)]!=config['basecoin']&&!_0x294076[_0x2480eb(0x1df)])_0x5832f4[_0x2480eb(0x1ac)]({'coin':_0x294076[_0x2480eb(0x1ec)],'symbol':_0x294076[_0x2480eb(0x140)]});});let _0x1a4c29=[];try{const _0x574061=fns[_0x9492a6(0x209)](fns[_0x9492a6(0x16d)](_0x56ccdd[_0x9492a6(0x13a)][_0x9492a6(0x215)](/\//g,'-')),_0x9492a6(0x15b));for(const _0x2517b1 of _0x5832f4){if(_0x2517b1[_0x9492a6(0x1ec)]!=config['basecoin'])_0x4727bd=await exchange[_0x9492a6(0x15a)](_0x2517b1['symbol'],Date[_0x9492a6(0x227)](_0x574061));_0x4727bd[_0x9492a6(0x17c)](_0x10baf1=>{const _0x5e6ab8=_0x9492a6,_0x2f4f4f=_0x2517b1[_0x5e6ab8(0x140)][_0x5e6ab8(0x136)](config['basecoin']+'/'),_0xf0f927=fns[_0x5e6ab8(0x209)](fns['parseISO'](_0x10baf1['datetime']),'yyyy/MM/dd\x20HH:mm:ss'),_0x56e78=fns[_0x5e6ab8(0x209)](fns[_0x5e6ab8(0x16d)](_0x10baf1['datetime']),_0x5e6ab8(0x191));let _0x2b1f0f;if(_0x10baf1[_0x5e6ab8(0x1cc)]==_0x5e6ab8(0x1ff)&&_0x2f4f4f==![])_0x2b1f0f=_0x10baf1['amount'];if(_0x10baf1['side']==_0x5e6ab8(0x1ff)&&_0x2f4f4f==!![])_0x2b1f0f=-_0x10baf1[_0x5e6ab8(0x1b4)]*_0x10baf1[_0x5e6ab8(0x205)];if(_0x10baf1[_0x5e6ab8(0x1cc)]==_0x5e6ab8(0x13c)&&_0x2f4f4f==![])_0x2b1f0f=-_0x10baf1[_0x5e6ab8(0x1b4)];if(_0x10baf1[_0x5e6ab8(0x1cc)]==_0x5e6ab8(0x13c)&&_0x2f4f4f==!![])_0x2b1f0f=_0x10baf1['amount']*_0x10baf1['price'];_0x1a4c29[_0x5e6ab8(0x1ac)]({'timestamp':_0xf0f927,'date':_0x56e78,'coin':_0x2517b1['coin'],'symbol':_0x2517b1[_0x5e6ab8(0x140)],'type':_0x10baf1[_0x5e6ab8(0x12a)],'side':_0x10baf1[_0x5e6ab8(0x1cc)],'reverse':_0x2f4f4f,'amount':formatResult(_0x10baf1[_0x5e6ab8(0x130)],0x8),'filled':formatResult(_0x10baf1[_0x5e6ab8(0x130)],0x8),'coinamount':formatResult(_0x2b1f0f,0x8),'price':formatResult(_0x10baf1[_0x5e6ab8(0x205)],0x8)});let _0x1090bf;if(_0x10baf1[_0x5e6ab8(0x1cc)]==_0x5e6ab8(0x1ff)&&_0x2f4f4f==![])_0x1090bf=-_0x10baf1[_0x5e6ab8(0x1b4)]*_0x10baf1[_0x5e6ab8(0x205)];if(_0x10baf1[_0x5e6ab8(0x1cc)]==_0x5e6ab8(0x1ff)&&_0x2f4f4f==!![])_0x1090bf=_0x10baf1[_0x5e6ab8(0x1b4)];if(_0x10baf1['side']==_0x5e6ab8(0x13c)&&_0x2f4f4f==![])_0x1090bf=_0x10baf1['amount']*_0x10baf1[_0x5e6ab8(0x205)];if(_0x10baf1['side']=='sell'&&_0x2f4f4f==!![])_0x1090bf=-_0x10baf1['amount'];_0x1a4c29[_0x5e6ab8(0x1ac)]({'date':_0x56e78,'coin':config[_0x5e6ab8(0x17a)],'coinamount':formatResult(_0x1090bf,0x8)});});}_0x1a4c29[_0x9492a6(0x163)]((_0x28f479,_0x428076)=>_0x28f479[_0x9492a6(0x134)]>_0x428076[_0x9492a6(0x134)]?0x1:_0x428076[_0x9492a6(0x134)]>_0x28f479[_0x9492a6(0x134)]?-0x1:0x0),dbLogs[_0x9492a6(0x169)]('logs')[_0x9492a6(0x12c)]()['write'](),_0x1a4c29[_0x9492a6(0x17c)](_0xc7450a=>{const _0x1c1c9c=_0x9492a6;let _0x216a27;_0xc7450a[_0x1c1c9c(0x1ec)]!=config[_0x1c1c9c(0x17a)]&&(_0x216a27={'time':_0xc7450a['timestamp'],'type':_0x1c1c9c(0x1e8),'event':_0x1c1c9c(0x1a9)+_0xc7450a[_0x1c1c9c(0x140)]+'\x20'+_0xc7450a['side']+'\x20#'+_0xc7450a[_0x1c1c9c(0x1b4)]+'\x20@'+_0xc7450a['price']},dbLogs[_0x1c1c9c(0x169)](_0x1c1c9c(0x214))['push'](_0x216a27)[_0x1c1c9c(0x1d7)]());});const _0x59db13=fns[_0x9492a6(0x187)]({'start':new Date(_0x56ccdd[_0x9492a6(0x13a)]),'end':new Date()})[_0x9492a6(0x224)](_0x15415c=>fns[_0x9492a6(0x209)](_0x15415c,_0x9492a6(0x191)));let _0x2536f5=[];_0x56ccdd[_0x9492a6(0x1a8)]['forEach'](_0x57bbfc=>{const _0x594abc=_0x9492a6;if(!_0x57bbfc[_0x594abc(0x1df)]){_0x2536f5[_0x57bbfc[_0x594abc(0x1ec)]]=[];let _0x4d4758=_0x57bbfc[_0x594abc(0x1cd)];_0x59db13[_0x594abc(0x17c)]((_0x57e970,_0x14f09d)=>{const _0x37268e=_0x594abc;let _0x5de8ca=_0x1a4c29['filter'](_0x3e1262=>_0x3e1262['coin']==_0x57bbfc[_0x37268e(0x1ec)]&&_0x3e1262[_0x37268e(0x1bf)]==_0x57e970);if(_0x5de8ca[_0x37268e(0x1db)]!=0x0){let _0x48e7fb=_0x5de8ca[_0x37268e(0x213)]((_0x4339e5,_0x5cae17)=>{const _0x28ad76=_0x37268e;return _0x4339e5+=_0x5cae17[_0x28ad76(0x125)],_0x4339e5;},0x0);_0x4d4758+=_0x48e7fb;}_0x2536f5[_0x57bbfc[_0x37268e(0x1ec)]][_0x57e970]=_0x4d4758;});}});const _0x299c5b=[..._0x5832f4];_0x299c5b['push']({'coin':stablecoins[_0x9492a6(0x14b)][_0x9492a6(0x1ec)],'symbol':stablecoins[_0x9492a6(0x14b)]['symbol']}),_0x299c5b[_0x9492a6(0x1ac)]({'coin':stablecoins['usd'][_0x9492a6(0x1ec)],'symbol':stablecoins['usd'][_0x9492a6(0x140)]});let _0x32f8de=[];for(const _0x302da5 of _0x299c5b){_0x32f8de[_0x302da5[_0x9492a6(0x1ec)]]=await getCloses(_0x302da5[_0x9492a6(0x140)],new Date(_0x56ccdd[_0x9492a6(0x13a)]));}dbPerformance['get']('data')[_0x9492a6(0x12c)]()[_0x9492a6(0x1d7)](),_0x59db13['forEach']((_0x4aa254,_0x1db28d)=>{const _0x22bb6b=_0x9492a6;let _0x3272ed,_0x243d67=[];_0x1db28d==0x0?(_0x56ccdd[_0x22bb6b(0x1a8)][_0x22bb6b(0x17c)](_0x136f8e=>{const _0x5627bb=_0x22bb6b;!_0x136f8e[_0x5627bb(0x1df)]&&_0x243d67['push']({'coin':_0x136f8e[_0x5627bb(0x1ec)],'number':_0x136f8e[_0x5627bb(0x1cd)],'price':_0x136f8e[_0x5627bb(0x123)]});}),_0x3272ed={'date':_0x4aa254,'eur':_0x32f8de[stablecoins[_0x22bb6b(0x14b)][_0x22bb6b(0x1ec)]][_0x1db28d],'usd':_0x32f8de[stablecoins['usd']['coin']][_0x1db28d],'coins':_0x243d67}):(_0x56ccdd[_0x22bb6b(0x1a8)][_0x22bb6b(0x17c)](_0x571bba=>{const _0x44950f=_0x22bb6b;!_0x571bba[_0x44950f(0x1df)]&&_0x243d67[_0x44950f(0x1ac)]({'coin':_0x571bba[_0x44950f(0x1ec)],'number':_0x2536f5[_0x571bba[_0x44950f(0x1ec)]][_0x4aa254],'price':_0x571bba[_0x44950f(0x1ec)]==config[_0x44950f(0x17a)]?0x1:_0x32f8de[_0x571bba[_0x44950f(0x1ec)]][_0x1db28d]});}),_0x3272ed={'date':_0x4aa254,'eur':_0x32f8de[stablecoins[_0x22bb6b(0x14b)][_0x22bb6b(0x1ec)]][_0x1db28d],'usd':_0x32f8de[stablecoins[_0x22bb6b(0x19e)]['coin']][_0x1db28d],'coins':_0x243d67}),dbPerformance[_0x22bb6b(0x169)](_0x22bb6b(0x11e))[_0x22bb6b(0x1ac)](_0x3272ed)[_0x22bb6b(0x1d7)]();}),emitPerformance(),await resetCoinResults();for(let _0x1d0632 of _0x1a4c29){_0x1d0632[_0x9492a6(0x1ec)]!=config[_0x9492a6(0x17a)]&&await updateCoinResults(_0x1d0632);}logHistory('success','Performance\x20recreation\x20completed\x20successfully');}catch(_0x38cce5){await handleError(_0x38cce5,_0x9492a6(0x1fd));}}async function getCloses(_0x49262d,_0x3a90df,_0x37b015=undefined){const _0xf4b88f=_0x921764,_0x19d566='1d';let _0x545199,_0x483f48;const _0x360c8c=fns[_0xf4b88f(0x120)](new Date(),_0x3a90df)+0x1;try{const _0x37a7d6=exchange[_0xf4b88f(0x18d)]()-_0x360c8c*0x18*0xe10*0x3e8;_0x545199=await exchange['fetchOHLCV'](_0x49262d,_0x19d566,_0x37a7d6,_0x37b015),_0x483f48=await exchange['fetchTickers'](_0x49262d);}catch(_0x1da5e9){await handleError(_0x1da5e9,'getCloses()');}let _0x29e135=ohlcvToCloses(_0x545199);return _0x29e135[_0xf4b88f(0x1ac)](_0x483f48[_0x49262d]['last']),_0x29e135;}function ohlcvToCloses(_0x156185){const _0x570f93=_0x921764;let _0x199e36=[];return _0x156185[_0x570f93(0x17c)](function(_0x5d7f48){_0x199e36['push'](_0x5d7f48[0x4]);}),_0x199e36;}function getConfiguration(_0x15cbfc){const _0x3794c5=_0x921764;let _0x2732a5=dbConfig[_0x3794c5(0x169)](_0x3794c5(0x210))[_0x3794c5(0x188)]({'botID':_0x15cbfc})[_0x3794c5(0x201)]();if(_0x2732a5){let _0x38ff50=![];!_0x2732a5[_0x3794c5(0x164)]&&(_0x2732a5={..._0x2732a5,'exchange':_0x3794c5(0x17f)},_0x38ff50=!![]),!_0x2732a5['basecoin']&&(_0x2732a5={..._0x2732a5,'basecoin':_0x3794c5(0x18f)},_0x38ff50=!![]),!_0x2732a5[_0x3794c5(0x156)]&&(_0x2732a5={..._0x2732a5,'ordertype':'market'},_0x38ff50=!![]),!_0x2732a5[_0x3794c5(0x1f0)]&&(_0x2732a5={..._0x2732a5,'timeout':0x14},_0x38ff50=!![]),!_0x2732a5[_0x3794c5(0x126)]&&(_0x2732a5={..._0x2732a5,'emojibuy':''},_0x38ff50=!![]),!_0x2732a5[_0x3794c5(0x172)]&&(_0x2732a5={..._0x2732a5,'emojisell':''},_0x38ff50=!![]),!_0x2732a5[_0x3794c5(0x1eb)]&&(_0x2732a5={..._0x2732a5,'showname':![]},_0x38ff50=!![]),_0x38ff50&&(_0x2732a5={'botID':_0x2732a5['botID'],'exchange':_0x2732a5[_0x3794c5(0x164)],'apiKey':_0x2732a5[_0x3794c5(0x1ad)],'apiSecret':_0x2732a5[_0x3794c5(0x199)],'basecoin':_0x2732a5[_0x3794c5(0x17a)],'botname':_0x2732a5[_0x3794c5(0x21e)],'showname':_0x2732a5[_0x3794c5(0x1eb)],'threshold':_0x2732a5[_0x3794c5(0x1ee)],'ordertype':_0x2732a5['ordertype'],'timeout':_0x2732a5[_0x3794c5(0x1f0)],'startdate':_0x2732a5[_0x3794c5(0x13a)],'recreate':_0x2732a5[_0x3794c5(0x1bc)],'timeshift':_0x2732a5[_0x3794c5(0x1a5)],'headless':_0x2732a5[_0x3794c5(0x1e9)],'cooldown':_0x2732a5[_0x3794c5(0x1cb)],'emojibuy':_0x2732a5['emojibuy'],'emojisell':_0x2732a5[_0x3794c5(0x172)],'portfolio':_0x2732a5[_0x3794c5(0x1a8)]},dbConfig['get'](_0x3794c5(0x210))[_0x3794c5(0x12c)]()['write'](),dbConfig[_0x3794c5(0x169)]('bot')[_0x3794c5(0x1ac)](_0x2732a5)[_0x3794c5(0x1d7)]());}else _0x2732a5={'botID':_0x15cbfc,'exchange':_0x3794c5(0x17f),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x3794c5(0x1b5)+_0x15cbfc,'showname':![],'threshold':'3','ordertype':_0x3794c5(0x1aa),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3794c5(0x1a5)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2732a5;}function emittedConfiguration(){const _0x18314a=_0x921764;let _0x140606;return config['apiKey']==''?_0x140606=config:_0x140606={...config,'apiKey':_0x18314a(0x162),'apiSecret':_0x18314a(0x162)},_0x140606;}function getSettings(){const _0x53c028=_0x921764;return dbSettings['get']('settings')[_0x53c028(0x201)]();}function getSecure(){const _0x1ad3f7=_0x921764;return dbSecure[_0x1ad3f7(0x169)](_0x1ad3f7(0x165))[_0x1ad3f7(0x201)]()||{};}function updateTimeshift(_0x3777f5){const _0x31c285=_0x921764;let _0x2195f3=dbConfig['get'](_0x31c285(0x210))['find']({'botID':botID})[_0x31c285(0x201)]();_0x2195f3&&dbConfig[_0x31c285(0x169)](_0x31c285(0x210))['find']({'botID':botID})[_0x31c285(0x217)]({'timeshift':_0x3777f5})[_0x31c285(0x1d7)](),config['timeshift']=_0x3777f5,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x3a4fde){const _0x5d79e8=_0x921764;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x29cb5f=dbConfig[_0x5d79e8(0x169)](_0x5d79e8(0x210))[_0x5d79e8(0x188)]({'botID':botID})['value']();_0x3a4fde={..._0x3a4fde,'apiKey':crypt[_0x5d79e8(0x1e3)](secure[_0x5d79e8(0x158)],_0x3a4fde['apiKey'])[_0x5d79e8(0x1d2)],'apiSecret':crypt['decrypt'](secure[_0x5d79e8(0x158)],_0x3a4fde['apiSecret'])[_0x5d79e8(0x1d2)]};if(_0x29cb5f){if(_0x3a4fde[_0x5d79e8(0x1ad)]==_0x5d79e8(0x162))_0x3a4fde[_0x5d79e8(0x1ad)]=config[_0x5d79e8(0x1ad)];if(_0x3a4fde['apiSecret']==_0x5d79e8(0x162))_0x3a4fde['apiSecret']=config[_0x5d79e8(0x199)];dbConfig[_0x5d79e8(0x169)](_0x5d79e8(0x210))[_0x5d79e8(0x188)]({'botID':botID})['assign'](_0x3a4fde)[_0x5d79e8(0x1d7)]();}else dbConfig[_0x5d79e8(0x169)]('bot')[_0x5d79e8(0x1ac)](_0x3a4fde)[_0x5d79e8(0x1d7)](),process['send']({'status':'enabled','live':_0x5d79e8(0x21a)},_0xac0060=>{});config={..._0x3a4fde};if(config[_0x5d79e8(0x1bc)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x5d79e8(0x1a6)]({'botname':_0x3a4fde['botname']},_0x3f66b9=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x4aa64d){const _0x13ccc9=_0x921764,_0x313320={...config,'headless':_0x4aa64d['headless']};let _0x412426=dbConfig[_0x13ccc9(0x169)](_0x13ccc9(0x210))[_0x13ccc9(0x188)]({'botID':botID})['value']();_0x412426&&dbConfig[_0x13ccc9(0x169)](_0x13ccc9(0x210))[_0x13ccc9(0x188)]({'botID':botID})[_0x13ccc9(0x217)](_0x313320)[_0x13ccc9(0x1d7)](),config={..._0x313320},proxyEmit(_0x13ccc9(0x129),emittedConfiguration());}function noslash(_0x4176ee){const _0x4699d8=_0x921764;return _0x4176ee[_0x4699d8(0x215)]('/','');}function updateNumberCoins(_0x3eae23){const _0x36bee9=_0x921764;_0x3eae23[_0x36bee9(0x1b6)]&&_0x3eae23['eventType']==_0x36bee9(0x1dd)&&_0x3eae23[_0x36bee9(0x1da)][_0x36bee9(0x17c)](_0x4f56d6=>{const _0x4ed340=_0x36bee9;let _0x3dd91f=currentCoins[_0x4ed340(0x188)](_0x13e2ab=>_0x13e2ab[_0x4ed340(0x1ec)]==_0x4f56d6[_0x4ed340(0x20f)]),_0xcc1d39=config[_0x4ed340(0x1a8)][_0x4ed340(0x188)](_0x59ab03=>_0x59ab03[_0x4ed340(0x1ec)]==_0x4f56d6['asset']);if(_0x3dd91f&&_0xcc1d39)_0x3dd91f['number']=Math['max'](Number(_0x4f56d6[_0x4ed340(0x1c7)])+(_0xcc1d39['offset']||0x0),0x0);});if(_0x3eae23[_0x36bee9(0x1b6)]&&_0x3eae23[_0x36bee9(0x1b6)]==_0x36bee9(0x153)){if(_0x3eae23['orderType']=='LIMIT'&&_0x3eae23[_0x36bee9(0x176)]==_0x36bee9(0x1c4)){if(lastOrders)lastOrders['forEach'](_0x5dd0de=>{const _0x552ba1=_0x36bee9;if(_0x5dd0de[_0x552ba1(0x13d)]==_0x3eae23[_0x552ba1(0x13d)]){if(_0x5dd0de[_0x552ba1(0x18e)])_0x5dd0de[_0x552ba1(0x130)]=_0x3eae23[_0x552ba1(0x185)]*_0x5dd0de[_0x552ba1(0x205)];else _0x5dd0de[_0x552ba1(0x130)]=_0x3eae23[_0x552ba1(0x185)];}});}}}async function getCoins(_0x3b3f86=!![],_0x2985a6=config[_0x921764(0x17a)]){const _0xce0492=_0x921764;let _0x7177ae,_0x248f94=[],_0x3ad980=[],_0x4ea1bc=[];try{_0x7177ae=await exchange[_0xce0492(0x137)](),mybalances=_0x7177ae['total'];if(!_0x3b3f86)for(const [_0x2d4fad,_0x334ca9]of Object[_0xce0492(0x19a)](mybalances)){_0x4ea1bc['push'](_0x2d4fad);}else config['portfolio'][_0xce0492(0x17c)](_0x1a24d4=>{const _0x23e4ed=_0xce0492;if(!_0x1a24d4[_0x23e4ed(0x1df)])_0x4ea1bc['push'](_0x1a24d4['coin']);});if(_0x2985a6=='')for(const [_0x252109,_0x327754]of Object['entries'](mybalances)){_0x327754[_0xce0492(0x13e)]()!=0x0&&_0x3ad980[_0xce0492(0x1ac)]({'coin':_0x252109});}else for(const [_0x37d9f2,_0x111866]of Object[_0xce0492(0x19a)](mybalances)){if(_0x4ea1bc[_0xce0492(0x136)](_0x37d9f2)){const _0x7ee8fc=config[_0xce0492(0x1a8)][_0xce0492(0x188)](_0x5ba8ad=>_0x5ba8ad[_0xce0492(0x1ec)]==_0x37d9f2);if((_0x111866['toString']()!=0x0||_0x7ee8fc)&&(allSymbols['includes'](_0x37d9f2+'/'+_0x2985a6)||_0x37d9f2==_0x2985a6))_0x3ad980[_0xce0492(0x1ac)]({'coin':_0x37d9f2,'symbol':_0x37d9f2+'/'+_0x2985a6,'reverse':![],'number':Math[_0xce0492(0x1c0)](_0x111866+(_0x7ee8fc&&_0x7ee8fc[_0xce0492(0x17e)]||0x0),0x0)}),_0x37d9f2!=_0x2985a6&&_0x248f94[_0xce0492(0x1ac)](_0x37d9f2+'/'+_0x2985a6);else(_0x111866[_0xce0492(0x13e)]()!=0x0||_0x7ee8fc)&&allSymbols['includes'](_0x2985a6+'/'+_0x37d9f2)&&(_0x3ad980['push']({'coin':_0x37d9f2,'symbol':_0x2985a6+'/'+_0x37d9f2,'reverse':!![],'number':Math['max'](_0x111866+(_0x7ee8fc&&_0x7ee8fc[_0xce0492(0x17e)]||0x0),0x0)}),_0x37d9f2!=_0x2985a6&&_0x248f94[_0xce0492(0x1ac)](_0x2985a6+'/'+_0x37d9f2));}}}catch(_0xe17191){if(!_0x3b3f86){if(_0xe17191[_0xce0492(0x13e)]()['includes'](_0xce0492(0x1bd)))return logHistory(_0xce0492(0x195),_0xce0492(0x1b9)),![];else{if(_0xe17191[_0xce0492(0x13e)]()['includes'](_0xce0492(0x20c)))return logHistory('error',_0xce0492(0x1ab)),![];else{if(_0xe17191[_0xce0492(0x13e)]()['includes'](_0xce0492(0x160)))return logHistory(_0xce0492(0x195),_0xce0492(0x14d)),![];else await handleError(_0xe17191,_0xce0492(0x1bb));}}}else await handleError(_0xe17191,_0xce0492(0x1bb));}return _0x3ad980;}async function getPortfolio(_0x5e5a69){const _0x2cc411=_0x921764;let _0x12332b=[],_0x3d1eb7=[],_0xc0b3d3,_0x48dba8=[],_0x13eee8,_0x492383;_0x5e5a69[_0x2cc411(0x1ad)]===_0x2cc411(0x162)||_0x5e5a69[_0x2cc411(0x199)]===_0x2cc411(0x162)?(_0x13eee8=config[_0x2cc411(0x1ad)],_0x492383=config[_0x2cc411(0x199)]):(_0x13eee8=_0x5e5a69[_0x2cc411(0x1ad)],_0x492383=_0x5e5a69[_0x2cc411(0x199)]);await initExchange(_0x13eee8,_0x492383);let _0x2ca499=await loadSymbols();if(_0x2ca499){_0x48dba8=await getCoins(![],_0x5e5a69[_0x2cc411(0x17a)]);if(_0x48dba8===![])proxyEmit(_0x2cc411(0x1a8),![]);else{if(_0x5e5a69[_0x2cc411(0x17a)]=='')proxyEmit(_0x2cc411(0x1a8),_0x48dba8);else{_0x48dba8[_0x2cc411(0x17c)](_0x5ca5ad=>{const _0x1d30c8=_0x2cc411;_0x12332b[_0x1d30c8(0x1ac)](_0x5ca5ad[_0x1d30c8(0x140)]);});try{_0x3d1eb7=await exchange['fetchTickers'](_0x12332b);}catch(_0x216d7a){await handleError(_0x216d7a,_0x2cc411(0x1d5));}_0x48dba8[_0x2cc411(0x17c)](_0x40a501=>{const _0x7eff25=_0x2cc411;_0x40a501[_0x7eff25(0x1ec)]!=_0x5e5a69[_0x7eff25(0x17a)]?_0xc0b3d3=_0x40a501['reverse']?0x1/_0x3d1eb7[_0x40a501[_0x7eff25(0x140)]]['last']:_0x3d1eb7[_0x40a501[_0x7eff25(0x140)]][_0x7eff25(0x1d8)]:_0xc0b3d3=0x1,_0x40a501['price']=formatResult(_0xc0b3d3,0x8);}),proxyEmit(_0x2cc411(0x1a8),_0x48dba8);}}}else proxyEmit(_0x2cc411(0x1a8),![]);}function checkMinimums(_0x3729bc){const _0x2af560=_0x921764;let _0x5f30a5=!![];const _0x34536c=!_0x3729bc[_0x2af560(0x18e)]?markets[_0x3729bc['symbol']][_0x2af560(0x159)][_0x2af560(0x1b4)][_0x2af560(0x179)]:markets[_0x3729bc['symbol']][_0x2af560(0x159)][_0x2af560(0x216)][_0x2af560(0x179)],_0x55d57b=!_0x3729bc['reverse']?markets[_0x3729bc['symbol']][_0x2af560(0x159)]['cost']['min']:markets[_0x3729bc[_0x2af560(0x140)]][_0x2af560(0x159)][_0x2af560(0x1b4)][_0x2af560(0x179)];if(Math[_0x2af560(0x124)](_0x3729bc[_0x2af560(0x1af)])<_0x34536c)_0x5f30a5=![];if(Math[_0x2af560(0x124)](_0x3729bc[_0x2af560(0x1af)])*_0x3729bc[_0x2af560(0x1d8)]<_0x55d57b)_0x5f30a5=![];return _0x5f30a5;}async function getBalances(){const _0x3c48f6=_0x921764;let _0x5ae8a9=0x0,_0x1a8044;const _0x3287e5=config[_0x3c48f6(0x1ee)];currentCoins[_0x3c48f6(0x17c)](_0x1241fc=>{const _0x515fe4=_0x3c48f6;if(_0x1241fc[_0x515fe4(0x1ec)]!=config[_0x515fe4(0x17a)]){let _0x556728=global['ticker'][noslash(_0x1241fc[_0x515fe4(0x140)])];_0x1a8044=_0x1241fc['reverse']?0x1/_0x556728:_0x556728;}else _0x1a8044=0x1;let _0x252779=_0x1241fc['number']*_0x1a8044;_0x5ae8a9+=_0x252779,_0x1241fc[_0x515fe4(0x1d8)]=formatResult(Number(_0x1a8044),0x8),_0x1241fc[_0x515fe4(0x201)]=_0x252779;}),currentCoins[_0x3c48f6(0x17c)](_0x4fab0e=>{const _0x478959=_0x3c48f6;let _0x11d618=config[_0x478959(0x1a8)][_0x478959(0x188)](_0xd1a929=>_0xd1a929[_0x478959(0x1ec)]==_0x4fab0e[_0x478959(0x1ec)]),_0x5ce8ff=Number(_0x11d618[_0x478959(0x192)]),_0x304072=_0x4fab0e[_0x478959(0x201)]/_0x5ae8a9*0x64,_0x5ded14=_0x5ce8ff*_0x5ae8a9/0x64/_0x4fab0e[_0x478959(0x1d8)]-_0x4fab0e[_0x478959(0x225)];_0x4fab0e[_0x478959(0x192)]=formatResult(_0x304072,0x3),_0x4fab0e[_0x478959(0x157)]=formatResult(_0x5ce8ff,0x3),_0x4fab0e['trade']=formatResult(_0x5ded14,0x8),_0x4fab0e['side']='',_0x4fab0e['valid']='';if(_0x4fab0e['coin']!=config[_0x478959(0x17a)]){if(_0x4fab0e[_0x478959(0x192)]>_0x5ce8ff)_0x4fab0e['side']=_0x478959(0x13c),_0x4fab0e[_0x478959(0x11c)]=checkMinimums(_0x4fab0e);else _0x4fab0e[_0x478959(0x192)]<_0x5ce8ff&&(_0x4fab0e['side']=_0x478959(0x1ff),_0x4fab0e[_0x478959(0x11c)]=checkMinimums(_0x4fab0e));}_0x4fab0e[_0x478959(0x15f)]=_0x4fab0e['distribution']/_0x4fab0e[_0x478959(0x157)]-0x1;}),currentCoins[_0x3c48f6(0x163)]((_0x2814b8,_0x2753b0)=>_0x2814b8[_0x3c48f6(0x15f)]<_0x2753b0[_0x3c48f6(0x15f)]?0x1:_0x2753b0[_0x3c48f6(0x15f)]<_0x2814b8[_0x3c48f6(0x15f)]?-0x1:0x0);const _0x54d78c=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x54d78c[_0x3c48f6(0x14b)],'usd':_0x54d78c[_0x3c48f6(0x19e)],'portfolio':JSON[_0x3c48f6(0x186)](currentCoins),'threshold':_0x3287e5},proxyEmit(_0x3c48f6(0x1da),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x3c48f6(0x1e9)])headlessMode({'portfolio':currentCoins,'threshold':_0x3287e5});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1dfcad=_0x921764;if(!lastBalances)return;let _0x13b322=await getStartingBalances(![]),_0x428582=[],_0x1aec8f;JSON[_0x1dfcad(0x227)](lastBalances[_0x1dfcad(0x1a8)])['forEach'](_0x201964=>{const _0x52fdeb=_0x1dfcad;let _0x58afcb={'coin':_0x201964['coin'],'number':_0x201964['number'],'price':_0x201964[_0x52fdeb(0x1d8)]};_0x428582[_0x52fdeb(0x1ac)](_0x58afcb);});const _0x479771=await getFiat();_0x1aec8f={'date':lastBalances[_0x1dfcad(0x228)][_0x1dfcad(0x1a4)]('\x20')[0x0],'eur':_0x479771['eur'],'usd':_0x479771[_0x1dfcad(0x19e)],'coins':_0x428582};let _0x5b61c0=dbPerformance[_0x1dfcad(0x169)]('data')[_0x1dfcad(0x188)]({'date':_0x1aec8f[_0x1dfcad(0x1bf)]})[_0x1dfcad(0x201)]();_0x5b61c0?dbPerformance[_0x1dfcad(0x169)](_0x1dfcad(0x11e))['find']({'date':_0x1aec8f['date']})[_0x1dfcad(0x217)](_0x1aec8f)[_0x1dfcad(0x1d7)]():dbPerformance[_0x1dfcad(0x169)](_0x1dfcad(0x11e))[_0x1dfcad(0x1ac)](_0x1aec8f)[_0x1dfcad(0x1d7)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x17e36f=_0x921764;if(dbPerformance[_0x17e36f(0x128)](_0x17e36f(0x11e))['value']()){let _0x70bfd8=dbPerformance[_0x17e36f(0x169)](_0x17e36f(0x11e))['sortBy']('date')[_0x17e36f(0x201)]();proxyEmit(_0x17e36f(0x18c),_0x70bfd8),lastPerformanceEmitted=getDate();}else proxyEmit(_0x17e36f(0x18c),[]);}async function getStartingBalances(_0x3276e5=!![]){const _0x56cc49=_0x921764;let _0x28fcc9=dbPerformance['get'](_0x56cc49(0x11e))[_0x56cc49(0x188)]({'date':config[_0x56cc49(0x13a)]})[_0x56cc49(0x201)]();config[_0x56cc49(0x1ad)]!=''&&!_0x28fcc9&&(await setStartDatePerformance(config),_0x28fcc9=dbPerformance[_0x56cc49(0x169)](_0x56cc49(0x11e))['find']({'date':config[_0x56cc49(0x13a)]})[_0x56cc49(0x201)]());if(config['apiKey']==''||!_0x28fcc9)return{};let _0x240ac1=0x0,_0x257bb5=0x0,_0x56fb31=0x0,_0x4fc1b0=[],_0x37cca8=0x0;config['portfolio']['forEach'](_0x180017=>{const _0x1884b1=_0x56cc49;if(!_0x180017['excluded']){_0x4fc1b0[_0x37cca8]={'coin':_0x180017[_0x1884b1(0x1ec)],'symbol':_0x180017[_0x1884b1(0x140)],'number':_0x180017[_0x1884b1(0x1cd)],'price':_0x180017['startprice']},_0x240ac1+=_0x180017[_0x1884b1(0x123)]*_0x180017['startnumber'];if(config[_0x1884b1(0x17a)]=='BTC')_0x257bb5+=_0x180017[_0x1884b1(0x123)]*_0x180017[_0x1884b1(0x1cd)]*_0x28fcc9[_0x1884b1(0x14b)],_0x56fb31+=_0x180017[_0x1884b1(0x123)]*_0x180017[_0x1884b1(0x1cd)]*_0x28fcc9[_0x1884b1(0x19e)];else{if(config[_0x1884b1(0x17a)]==_0x1884b1(0x12f)||config['basecoin']==_0x1884b1(0x1fa)||config['basecoin']==_0x1884b1(0x1d1))_0x257bb5+=_0x180017[_0x1884b1(0x123)]*_0x180017['startnumber']*_0x28fcc9[_0x1884b1(0x14b)]/_0x28fcc9[_0x1884b1(0x19e)],_0x56fb31+=_0x180017['startprice']*_0x180017[_0x1884b1(0x1cd)];else config[_0x1884b1(0x17a)]=='EUR'&&(_0x257bb5+=_0x180017[_0x1884b1(0x123)]*_0x180017[_0x1884b1(0x1cd)],_0x56fb31+=_0x180017[_0x1884b1(0x123)]*_0x180017[_0x1884b1(0x1cd)]*_0x28fcc9[_0x1884b1(0x19e)]/_0x28fcc9[_0x1884b1(0x14b)]);}_0x37cca8++;}});let _0x4f786b={'basecoin':_0x240ac1,'eur':_0x257bb5,'usd':_0x56fb31,'coins':_0x4fc1b0};if(_0x3276e5)proxyEmit(_0x56cc49(0x145),_0x4f786b);return _0x4f786b;}function headlessMode(_0x13aa56){const _0x5d2c62=_0x921764;let _0x3a731a=_0x13aa56[_0x5d2c62(0x1a8)],_0x57ee15=_0x13aa56[_0x5d2c62(0x1ee)],_0xa50d55=[];for(let _0x425ca1 of _0x3a731a){if(_0x425ca1['coin']!=config[_0x5d2c62(0x17a)]){if(_0x425ca1[_0x5d2c62(0x192)]/_0x425ca1[_0x5d2c62(0x157)]-0x1>=_0x57ee15/0x64){if(_0x425ca1['valid'])_0xa50d55[_0x5d2c62(0x1ac)](_0x425ca1);}else{if(_0x425ca1[_0x5d2c62(0x192)]/_0x425ca1['target']-0x1<=-_0x57ee15/0x64){if(_0x425ca1[_0x5d2c62(0x11c)])_0xa50d55[_0x5d2c62(0x1ac)](_0x425ca1);}}}}_0xa50d55[_0x5d2c62(0x1db)]>0x0&&placeOrder(_0xa50d55);}function symbolToCoin(_0x5c3a61){const _0x26b36a=_0x921764;let _0x1c60f3;if(_0x5c3a61[_0x26b36a(0x136)]('/'+config['basecoin']))_0x1c60f3=_0x5c3a61[_0x26b36a(0x215)]('/'+config[_0x26b36a(0x17a)],'');if(_0x5c3a61[_0x26b36a(0x136)](config[_0x26b36a(0x17a)]+'/'))_0x1c60f3=_0x5c3a61[_0x26b36a(0x215)](config[_0x26b36a(0x17a)]+'/','');return _0x1c60f3;}async function validateOrders(_0x5b08ec=0x0){const _0x727b48=_0x921764;let _0x5291ef=[],_0x15ceae=config[_0x727b48(0x156)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x727b48(0x1f0)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x727b48(0x17c)](_0x4ba7ba=>{const _0x4ea605=_0x727b48;let _0x367624=previousCoins['find'](_0x213385=>_0x213385[_0x4ea605(0x1ec)]==symbolToCoin(_0x4ba7ba[_0x4ea605(0x140)])),_0x17cd2f=currentCoins[_0x4ea605(0x188)](_0x1b1620=>_0x1b1620[_0x4ea605(0x1ec)]==symbolToCoin(_0x4ba7ba['symbol'])),_0x2ca437,_0x151df0;_0x4ba7ba[_0x4ea605(0x1cc)]=='buy'&&!_0x4ba7ba[_0x4ea605(0x18e)]||_0x4ba7ba['side']==_0x4ea605(0x13c)&&_0x4ba7ba['reverse']?(_0x2ca437=_0x367624[_0x4ea605(0x225)]+0.9*_0x4ba7ba[_0x4ea605(0x130)],_0x151df0=_0x367624[_0x4ea605(0x225)]+1.1*_0x4ba7ba[_0x4ea605(0x130)]):(_0x2ca437=_0x367624[_0x4ea605(0x225)]-1.1*_0x4ba7ba['filled'],_0x151df0=_0x367624['number']-0.9*_0x4ba7ba[_0x4ea605(0x130)]);const _0x2195fe=_0x4ba7ba[_0x4ea605(0x130)]!=0x0&&_0x17cd2f[_0x4ea605(0x225)]>=_0x2ca437&&_0x17cd2f[_0x4ea605(0x225)]<=_0x151df0;_0x5291ef[_0x4ea605(0x1ac)](_0x2195fe);if(_0x2195fe&&config['ordertype']!=_0x4ea605(0x1aa)){if(_0x4ba7ba[_0x4ea605(0x18e)])logHistory(_0x4ea605(0x1e8),'Order\x20filled:\x20'+_0x4ba7ba['symbol']+'\x20'+_0x4ba7ba[_0x4ea605(0x1cc)]+'\x20#'+formatResult(_0x4ba7ba[_0x4ea605(0x130)]/_0x4ba7ba[_0x4ea605(0x205)],0x8)+'\x20@'+formatResult(_0x4ba7ba[_0x4ea605(0x205)],0x8));else logHistory('order','Order\x20filled:\x20'+_0x4ba7ba[_0x4ea605(0x140)]+'\x20'+_0x4ba7ba[_0x4ea605(0x1cc)]+'\x20#'+formatResult(_0x4ba7ba[_0x4ea605(0x130)],0x8)+'\x20@'+formatResult(_0x4ba7ba[_0x4ea605(0x205)],0x8));}}),_0x5291ef[_0x727b48(0x17c)]((_0x162a14,_0x2a3cba)=>{if(_0x162a14)lastOrders['splice'](_0x2a3cba,0x1);});if(_0x5b08ec<_0x15ceae&&_0x5291ef['includes'](![])){if(_0x5b08ec==0x0){config[_0x727b48(0x156)]=='market'?logHistory('error',_0x727b48(0x180)):logHistory(_0x727b48(0x195),_0x727b48(0x16b));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x5b08ec);},0xa*0x3e8);}else{(_0x5b08ec==0x1||_0x5b08ec==Math[_0x727b48(0x211)](_0x15ceae/0x2)||_0x5b08ec==_0x15ceae-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x5b08ec);},validateOrderInterval);}}else{lockOrders=![];if(_0x5b08ec>0x0&&!_0x5291ef[_0x727b48(0x136)](![]))config[_0x727b48(0x156)]==_0x727b48(0x1aa)?logHistory('success','Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory(_0x727b48(0x181),_0x727b48(0x20b));else _0x5b08ec>0x0&&_0x5291ef[_0x727b48(0x136)](![])&&(config[_0x727b48(0x156)]==_0x727b48(0x1aa)?logHistory(_0x727b48(0x181),'Order(s)\x20not\x20validated\x20after\x20'+Math[_0x727b48(0x211)](_0x15ceae*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x727b48(0x17c)](async _0x4e92ad=>{const _0x50b610=_0x727b48;try{const _0x103f59=await exchange[_0x50b610(0x1f7)](_0x4e92ad[_0x50b610(0x13d)],_0x4e92ad['symbol']);}catch(_0x301ff6){if(_0x301ff6[_0x50b610(0x13e)]()['includes'](_0x50b610(0x14e))){}else await handleError(_0x301ff6,_0x50b610(0x1b3));}}),logHistory('success','Unfilled\x20order(s)\x20canceled\x20after\x20'+Math['round'](_0x15ceae*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x498efc=_0x921764;dbCoinResults['get'](_0x498efc(0x131))[_0x498efc(0x12c)]()[_0x498efc(0x1d7)]();let _0x1457bb=await getStartingBalances(![]);_0x1457bb[_0x498efc(0x131)]['forEach'](_0x2a8b53=>{const _0x4b2488=_0x498efc,_0xbdd5db=_0x2a8b53[_0x4b2488(0x140)][_0x4b2488(0x136)](config[_0x4b2488(0x17a)]+'/');if(_0x2a8b53[_0x4b2488(0x1ec)]!=config[_0x4b2488(0x17a)]){let _0x5958a0={'coin':_0x2a8b53[_0x4b2488(0x1ec)],'number':_0x2a8b53['number'],'breakeven':_0x2a8b53['price'],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x4b2488(0x131))['push'](_0x5958a0)[_0x4b2488(0x1d7)]();}});}async function updateCoinResults(_0x3f3647){const _0x45f4ac=_0x921764;let _0x2c7c66,_0xe30b5d,_0x565ed2,_0x561392,_0x4b1605,_0x33d082,_0x525de0=dbCoinResults[_0x45f4ac(0x169)](_0x45f4ac(0x131))['find']({'coin':_0x3f3647[_0x45f4ac(0x1ec)]})[_0x45f4ac(0x201)]();if(!_0x525de0)return;if(_0x3f3647[_0x45f4ac(0x1f8)]&&_0x3f3647['fee'][_0x45f4ac(0x13f)]==config[_0x45f4ac(0x17a)])_0x2c7c66=_0x3f3647[_0x45f4ac(0x1f8)][_0x45f4ac(0x216)];else{if(_0x3f3647['fee']&&_0x3f3647['fee'][_0x45f4ac(0x13f)]==_0x45f4ac(0x1be))_0x2c7c66=_0x3f3647['fee'][_0x45f4ac(0x216)]*global['ticker'][_0x45f4ac(0x1be)+config[_0x45f4ac(0x17a)]];else _0x2c7c66=0.001*_0x3f3647[_0x45f4ac(0x130)];}const _0x24d5a0=_0x3f3647[_0x45f4ac(0x140)]['includes'](config[_0x45f4ac(0x17a)]+'/');_0x24d5a0&&(_0x33d082={'coin':_0x3f3647[_0x45f4ac(0x1ec)],'symbol':_0x3f3647[_0x45f4ac(0x140)],'filled':_0x3f3647[_0x45f4ac(0x130)]*_0x3f3647['price'],'side':_0x3f3647[_0x45f4ac(0x1cc)]==_0x45f4ac(0x13c)?_0x45f4ac(0x1ff):_0x45f4ac(0x13c),'price':0x1/_0x3f3647[_0x45f4ac(0x205)]},_0x3f3647={..._0x33d082});_0x3f3647[_0x45f4ac(0x1cc)]=='buy'?_0x565ed2=(_0x525de0[_0x45f4ac(0x218)]*_0x525de0['number']+_0x3f3647['price']*_0x3f3647[_0x45f4ac(0x130)])/(_0x525de0[_0x45f4ac(0x225)]+_0x3f3647['filled']):_0x565ed2=(_0x525de0[_0x45f4ac(0x218)]*_0x525de0[_0x45f4ac(0x225)]-_0x3f3647[_0x45f4ac(0x205)]*_0x3f3647[_0x45f4ac(0x130)])/(_0x525de0[_0x45f4ac(0x225)]-_0x3f3647[_0x45f4ac(0x130)]);_0x3f3647[_0x45f4ac(0x1cc)]==_0x45f4ac(0x1ff)?_0x561392=_0x525de0['realized']:_0x561392=_0x525de0[_0x45f4ac(0x12d)]+(_0x3f3647[_0x45f4ac(0x205)]-_0x525de0['breakeven'])*_0x3f3647[_0x45f4ac(0x130)];_0xe30b5d=_0x3f3647[_0x45f4ac(0x1cc)]=='sell'?_0x525de0[_0x45f4ac(0x225)]-_0x3f3647[_0x45f4ac(0x130)]:_0x525de0[_0x45f4ac(0x225)]+_0x3f3647[_0x45f4ac(0x130)],_0x4b1605=(_0x3f3647['price']-_0x565ed2)*_0xe30b5d;let _0x3f447d={'coin':_0x3f3647['coin'],'number':_0xe30b5d,'breakeven':formatResult(_0x565ed2,0x8),'realized':formatResult(_0x561392,0x8),'unrealized':formatResult(_0x4b1605,0x8),'fees':formatResult(_0x525de0[_0x45f4ac(0x1a7)]+_0x2c7c66,0x8),'sells':_0x3f3647[_0x45f4ac(0x1cc)]==_0x45f4ac(0x13c)?_0x525de0[_0x45f4ac(0x221)]+0x1:_0x525de0[_0x45f4ac(0x221)],'buys':_0x3f3647['side']==_0x45f4ac(0x1ff)?_0x525de0[_0x45f4ac(0x1ea)]+0x1:_0x525de0['buys']};dbCoinResults[_0x45f4ac(0x169)](_0x45f4ac(0x131))['find']({'coin':_0x3f3647[_0x45f4ac(0x1ec)]})['assign'](_0x3f447d)[_0x45f4ac(0x1d7)]();}async function placeOrder(_0x514389){const _0x26c47b=_0x921764,_0x482808=config[_0x26c47b(0x156)]==_0x26c47b(0x1aa)?_0x26c47b(0x1aa):_0x26c47b(0x190);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x26c47b(0x227)](JSON['stringify'](currentCoins));for(const _0x41d36a of _0x514389){let _0x5dcaaf,_0x566128,_0x409f44,_0x3626e4,_0x5889de,_0x5280c5=_0x41d36a['symbol'];try{const _0x4d8db2=await exchange[_0x26c47b(0x1c6)](_0x5280c5),_0x50a7d1=_0x4d8db2[_0x5280c5];_0x5dcaaf=_0x50a7d1[_0x26c47b(0x1d8)],_0x566128=_0x50a7d1[_0x26c47b(0x1c9)],_0x409f44=_0x50a7d1[_0x26c47b(0x1d3)];_0x41d36a['reverse']?(_0x3626e4=_0x41d36a[_0x26c47b(0x1cc)]=='buy'?_0x26c47b(0x13c):_0x26c47b(0x1ff),_0x5889de=Math[_0x26c47b(0x124)](_0x41d36a[_0x26c47b(0x1af)])/_0x5dcaaf):(_0x3626e4=_0x41d36a['side'],_0x5889de=Math[_0x26c47b(0x124)](_0x41d36a[_0x26c47b(0x1af)]));_0x482808==_0x26c47b(0x190)&&(config[_0x26c47b(0x156)]=='limit-high'&&(_0x5dcaaf=_0x3626e4=='buy'?_0x566128:_0x409f44),config[_0x26c47b(0x156)]=='limit-low'&&(_0x5dcaaf=_0x3626e4==_0x26c47b(0x1ff)?_0x409f44:_0x566128));_0x5889de=formatResult(_0x5889de,0x8),_0x5dcaaf=formatResult(_0x5dcaaf,0x8);const _0xaadcfe=await exchange[_0x26c47b(0x13b)](_0x5280c5,_0x482808,_0x3626e4,_0x5889de,_0x5dcaaf);lastOrders[_0x26c47b(0x1ac)]({'orderId':_0xaadcfe['id'],'symbol':_0x5280c5,'side':_0x3626e4,'reverse':_0x41d36a[_0x26c47b(0x18e)],'amount':_0x41d36a[_0x26c47b(0x18e)]?_0xaadcfe[_0x26c47b(0x1b4)]*_0xaadcfe[_0x26c47b(0x205)]:_0xaadcfe[_0x26c47b(0x1b4)],'filled':_0x41d36a[_0x26c47b(0x18e)]?_0xaadcfe[_0x26c47b(0x130)]*_0xaadcfe[_0x26c47b(0x205)]:_0xaadcfe[_0x26c47b(0x130)],'price':_0xaadcfe[_0x26c47b(0x205)]});const _0x1953d0=_0x3626e4==_0x26c47b(0x13c)?config[_0x26c47b(0x172)]?String['fromCodePoint']('0x'+config[_0x26c47b(0x172)])+'\x20':'':config[_0x26c47b(0x126)]?String[_0x26c47b(0x1de)]('0x'+config['emojibuy'])+'\x20':'',_0xa6d891=_0x482808==_0x26c47b(0x1aa)?_0x26c47b(0x1e1):config[_0x26c47b(0x156)]==_0x26c47b(0x19b)?_0x26c47b(0x21f):_0x26c47b(0x220);if(_0x482808==_0x26c47b(0x1aa))logHistory(_0x26c47b(0x1e8),''+_0x1953d0+_0xa6d891+_0x26c47b(0x208)+_0x5280c5+'\x20'+_0x3626e4+'\x20#'+formatResult(_0xaadcfe[_0x26c47b(0x130)],0x8)+'\x20@'+formatResult(_0xaadcfe['price'],0x8));else logHistory('order',''+_0x1953d0+_0xa6d891+_0x26c47b(0x208)+_0x5280c5+'\x20'+_0x3626e4+'\x20#'+formatResult(_0xaadcfe[_0x26c47b(0x1b4)],0x8)+'\x20@'+formatResult(_0xaadcfe[_0x26c47b(0x205)],0x8));_0xaadcfe[_0x26c47b(0x1ec)]=_0x41d36a[_0x26c47b(0x1ec)],await updateCoinResults(_0xaadcfe);if(config[_0x26c47b(0x1cb)]!=0x0){let _0x1cdf54=null;if(cooldownTracker[_0x26c47b(0x1db)]==config['cooldown']-0x1)_0x1cdf54=cooldownTracker[_0x26c47b(0x212)]();const _0x12e13b=getTimeStamp();cooldownTracker['push'](_0x12e13b);if(_0x1cdf54){const _0x530ae4=fns[_0x26c47b(0x1e7)](new Date(_0x12e13b),new Date(_0x1cdf54));_0x530ae4<cooldownInterval&&(logHistory(_0x26c47b(0x195),_0x26c47b(0x146)+config[_0x26c47b(0x1cb)]+_0x26c47b(0x1f6)+cooldownInterval/0x3c+_0x26c47b(0x170)+cooldownPeriod/(0xe10*0x3e8)+_0x26c47b(0x138)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x327ad5){if(_0x327ad5[_0x26c47b(0x13e)]()[_0x26c47b(0x136)](_0x26c47b(0x226)))logHistory('error',_0x26c47b(0x1c2)+_0x5280c5);else{if(_0x327ad5[_0x26c47b(0x13e)]()[_0x26c47b(0x136)](_0x26c47b(0x1b2)))logHistory(_0x26c47b(0x195),_0x26c47b(0x150)+_0x5280c5);else await handleError(_0x327ad5,_0x26c47b(0x1c1));}}}if(lastOrders[_0x26c47b(0x1db)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x26c47b(0x1e9)]&&(config[_0x26c47b(0x156)]==_0x26c47b(0x1aa)?logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x26c47b(0x18a)));else coolingDown&&(!config[_0x26c47b(0x1e9)]&&logHistory(_0x26c47b(0x195),_0x26c47b(0x194)));}}function logHistory(_0x59d640,_0x194c2d,_0x3de04f=''){const _0x3db1fa=_0x921764;let _0x4bc00e={'time':getTimeStamp(),'type':_0x59d640,'event':_0x194c2d,'botname':config[_0x3db1fa(0x21e)],'showname':config['showname']};dbLogs['get']('logs')[_0x3db1fa(0x1ac)](_0x4bc00e)[_0x3db1fa(0x1d7)]();if(_0x3de04f=='')_0x3de04f=_0x194c2d;proxyEmit('event',{'log':_0x4bc00e,'summary':_0x3de04f}),process[_0x3db1fa(0x1a6)]({'telegram':_0x4bc00e},_0x57a4b5=>{}),logging(''+_0x4bc00e['event']);}function emitHistory(_0x48c902={}){const _0x58cc04=_0x921764;Object[_0x58cc04(0x207)](_0x48c902)[_0x58cc04(0x1db)]==0x0&&(_0x48c902={'type':[_0x58cc04(0x1e8),_0x58cc04(0x139)],'event':'','page':0x1});if(_0x48c902['type'][_0x58cc04(0x136)](_0x58cc04(0x139)))_0x48c902['type'][_0x58cc04(0x178)](_0x48c902[_0x58cc04(0x12a)][_0x58cc04(0x127)](_0x58cc04(0x139)),0x1,_0x58cc04(0x195),_0x58cc04(0x181));if(dbLogs[_0x58cc04(0x128)]('logs')[_0x58cc04(0x201)]()){let _0x1e02da=dbLogs[_0x58cc04(0x169)]('logs')['filter'](_0x56e17f=>{const _0xd2b215=_0x58cc04;if(_0x48c902['type'][_0xd2b215(0x1db)]==0x0)return![];else return _0x48c902['type'][_0xd2b215(0x136)](_0x56e17f[_0xd2b215(0x12a)]);})[_0x58cc04(0x167)](_0x4b14f7=>{const _0x316c61=_0x58cc04;if(_0x48c902[_0x316c61(0x139)]=='')return!![];else return _0x4b14f7[_0x316c61(0x139)]['toLowerCase']()[_0x316c61(0x136)](_0x48c902[_0x316c61(0x139)][_0x316c61(0x1cf)]());})[_0x58cc04(0x19d)](_0x58cc04(0x228)),_0x2fd09a=_0x1e02da[_0x58cc04(0x201)]()[_0x58cc04(0x1db)];_0x1e02da=_0x1e02da[_0x58cc04(0x18e)]()[_0x58cc04(0x19f)]((_0x48c902[_0x58cc04(0x21d)]-0x1)*logPageSize,_0x48c902[_0x58cc04(0x21d)]*logPageSize-0x1)['reverse']()['value'](),proxyEmit(_0x58cc04(0x175),{'logs':_0x1e02da,'total':_0x2fd09a});}else proxyEmit(_0x58cc04(0x175),{'logs':[],'total':0x0});}async function pauseBot(_0x44a758){const _0x3922f6=_0x921764,_0x27a2b2=new Date()[_0x3922f6(0x1d4)]();if(!lastBotPause)lastBotPause=new Date()[_0x3922f6(0x1d4)](),consecutivePauses=0x1;else{if(_0x27a2b2-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x3922f6(0x1a6)]({'stop':_0x3922f6(0x1a3)},_0x284354=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x3922f6(0x1d4)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error','Pausing\x20bot\x20for\x205\x20minutes\x20('+consecutivePauses+')'),await sleep(_0x44a758),botPaused=![],reset();}}async function handleError(_0x25e88d,_0x5809d4,_0x14a142=''){const _0x5a9203=_0x921764;if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)]('DDoSProtection'))logHistory(_0x5a9203(0x195),_0x5809d4+'\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)'),await pauseBot(pauseBotInterval);else{if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)](_0x5a9203(0x173)))logHistory(_0x5a9203(0x195),_0x5809d4+'\x20|\x20Binance\x20exchange\x20is\x20not\x20available'),await pauseBot(pauseBotInterval);else{if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)](_0x5a9203(0x1a1)))logHistory(_0x5a9203(0x195),_0x5809d4+_0x5a9203(0x16c)),await pauseBot(pauseBotInterval);else{if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)]('API-key\x20format\x20invalid'))logHistory(_0x5a9203(0x195),_0x5809d4+_0x5a9203(0x1d9)),logHistory(_0x5a9203(0x195),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5a9203(0x1a6)]({'stop':_0x5a9203(0x1d6)},_0x19787d=>{});else{if(_0x25e88d[_0x5a9203(0x13e)]()['includes'](_0x5a9203(0x20c)))logHistory('error',_0x5809d4+'\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),logHistory(_0x5a9203(0x195),_0x5a9203(0x177)),process['send']({'stop':'kill'},_0x44eef4=>{});else{if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x5a9203(0x195),_0x5809d4+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x5a9203(0x195),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x5a9203(0x1a6)]({'stop':_0x5a9203(0x1d6)},_0x48842e=>{});else{if(_0x25e88d['toString']()[_0x5a9203(0x136)](_0x5a9203(0x20d)))logHistory(_0x5a9203(0x195),_0x5809d4+_0x5a9203(0x1a0)),logHistory(_0x5a9203(0x195),_0x5a9203(0x177)),process['send']({'stop':_0x5a9203(0x1d6)},_0x536a0b=>{});else{if(_0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)](_0x5a9203(0x1b1)))logHistory(_0x5a9203(0x195),_0x5809d4+'\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured'),await pauseBot(pauseBotInterval),process['send']({'stop':_0x5a9203(0x1a3)},_0x5e22fb=>{});else _0x25e88d[_0x5a9203(0x13e)]()[_0x5a9203(0x136)](_0x5a9203(0x21c))?logHistory(_0x5a9203(0x195),_0x5809d4+_0x5a9203(0x200)):(logHistory('error',_0x5809d4+_0x5a9203(0x1b7)),logging(_0x5809d4+_0x5a9203(0x19c),_0x25e88d),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x4c18f2,_0x194788){const _0x100460=_0x921764;return parseFloat(_0x4c18f2[_0x100460(0x121)](_0x194788));}function logging(_0x1674ca,_0x203b7d=''){const _0x1e8218=_0x921764;if(config[_0x1e8218(0x1eb)])console['log'](getTimeStamp()+':\x20'+config[_0x1e8218(0x21e)]+'\x20>\x20'+_0x1674ca,_0x203b7d);else console[_0x1e8218(0x1e2)](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x1674ca,_0x203b7d);}function getServerTime(){const _0x502d6b=_0x921764,_0x5ae41d=new Date();return _0x5ae41d['getFullYear']()+'/'+(_0x5ae41d[_0x502d6b(0x11d)]()+0x1)[_0x502d6b(0x13e)]()[_0x502d6b(0x142)](0x2,'0')+'/'+_0x5ae41d[_0x502d6b(0x189)]()['toString']()[_0x502d6b(0x142)](0x2,'0')+'\x20'+_0x5ae41d['getHours']()[_0x502d6b(0x13e)]()[_0x502d6b(0x142)](0x2,'0')+':'+_0x5ae41d[_0x502d6b(0x148)]()['toString']()[_0x502d6b(0x142)](0x2,'0')+':'+_0x5ae41d[_0x502d6b(0x149)]()[_0x502d6b(0x13e)]()[_0x502d6b(0x142)](0x2,'0');}function getTimeStamp(){const _0x51ec06=_0x921764,_0x209ca6=shiftedTime();return _0x209ca6[_0x51ec06(0x144)]()+'/'+(_0x209ca6[_0x51ec06(0x11d)]()+0x1)[_0x51ec06(0x13e)]()[_0x51ec06(0x142)](0x2,'0')+'/'+_0x209ca6['getDate']()[_0x51ec06(0x13e)]()[_0x51ec06(0x142)](0x2,'0')+'\x20'+_0x209ca6[_0x51ec06(0x183)]()[_0x51ec06(0x13e)]()[_0x51ec06(0x142)](0x2,'0')+':'+_0x209ca6[_0x51ec06(0x148)]()['toString']()[_0x51ec06(0x142)](0x2,'0')+':'+_0x209ca6['getSeconds']()[_0x51ec06(0x13e)]()[_0x51ec06(0x142)](0x2,'0');}function getDate(){const _0x3cd33e=_0x921764,_0x34bc64=shiftedTime();return _0x34bc64[_0x3cd33e(0x144)]()+'/'+(_0x34bc64[_0x3cd33e(0x11d)]()+0x1)[_0x3cd33e(0x13e)]()[_0x3cd33e(0x142)](0x2,'0')+'/'+_0x34bc64[_0x3cd33e(0x189)]()[_0x3cd33e(0x13e)]()[_0x3cd33e(0x142)](0x2,'0');}function getHour(){const _0x2dc784=_0x921764,_0x36a4ea=shiftedTime();return _0x36a4ea[_0x2dc784(0x183)]()[_0x2dc784(0x13e)]()[_0x2dc784(0x142)](0x2,'0');}function sleep(_0x4f0c74){return new Promise(_0x2e8d82=>setTimeout(_0x2e8d82,_0x4f0c74));}function shiftedTime(){const _0x368f73=_0x921764,_0x4cfcef=new Date();let _0x44bd54=_0x4cfcef;if(config&&config['timeshift']!==0x0)_0x44bd54=fns[_0x368f73(0x12e)](_0x4cfcef,{'hours':config[_0x368f73(0x1a5)]});return _0x44bd54;}