const _0x198143=_0x4282;(function(_0x200d88,_0x5eb4d9){const _0x3aff91=_0x4282,_0x52cbaa=_0x200d88();while(!![]){try{const _0x1d1ad6=-parseInt(_0x3aff91(0x18b))/0x1+-parseInt(_0x3aff91(0x2a4))/0x2*(-parseInt(_0x3aff91(0x2c9))/0x3)+-parseInt(_0x3aff91(0x2c7))/0x4*(parseInt(_0x3aff91(0x224))/0x5)+-parseInt(_0x3aff91(0x21a))/0x6+parseInt(_0x3aff91(0x268))/0x7*(-parseInt(_0x3aff91(0x2b1))/0x8)+parseInt(_0x3aff91(0x1ca))/0x9+parseInt(_0x3aff91(0x21e))/0xa*(parseInt(_0x3aff91(0x2dd))/0xb);if(_0x1d1ad6===_0x5eb4d9)break;else _0x52cbaa['push'](_0x52cbaa['shift']());}catch(_0x9cfa9b){_0x52cbaa['push'](_0x52cbaa['shift']());}}}(_0xc540,0x872c2));const _0x1864d1=function(){let _0x18f3c4=!![];return function(_0x4098a6,_0xcaaa72){const _0x101276=_0x18f3c4?function(){if(_0xcaaa72){const _0x3ff2bf=_0xcaaa72['apply'](_0x4098a6,arguments);return _0xcaaa72=null,_0x3ff2bf;}}:function(){};return _0x18f3c4=![],_0x101276;};}(),_0x1803af=_0x1864d1(this,function(){const _0x30e822=_0x4282;return _0x1803af['toString']()[_0x30e822(0x271)](_0x30e822(0x25c))[_0x30e822(0x1e9)]()[_0x30e822(0x20e)](_0x1803af)[_0x30e822(0x271)](_0x30e822(0x25c));});function _0x4282(_0x4ac4a5,_0x5de57b){const _0x33b938=_0xc540();return _0x4282=function(_0x1803af,_0x1864d1){_0x1803af=_0x1803af-0x187;let _0xc540b6=_0x33b938[_0x1803af];return _0xc540b6;},_0x4282(_0x4ac4a5,_0x5de57b);}_0x1803af();'use strict';const ccxt=require(_0x198143(0x1a4))[_0x198143(0x23c)],low=require(_0x198143(0x1c9)),FileSync=require(_0x198143(0x2f2)),fs=require('fs'),fns=require(_0x198143(0x18f)),Crypt=require(_0x198143(0x1a1))[_0x198143(0x293)],util=require('util'),argv=require(_0x198143(0x2c8))(process[_0x198143(0x1c8)][_0x198143(0x1af)](0x2))['argv'],path=require('path');let exchange;global['ticker']={},global[_0x198143(0x1e3)]={};const exceptions={'binance':[_0x198143(0x226),'HOT/BTC',_0x198143(0x1e4),'NANO/',_0x198143(0x28a)]},exchangesRequiringIntId=[_0x198143(0x2d1)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS['UNLOCKED'],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'currency':null,'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0x18*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loading={'progress':null,'remainingSymbols':[],'timeout':![],'cancel':![]},lasttime,bots=[];const serverversion=require(_0x198143(0x23a))[_0x198143(0x239)],botID=process[_0x198143(0x1c8)][0x2]||_0x198143(0x1dc),pattern=/^[0-9]{3}$/;!pattern[_0x198143(0x1cc)](botID)&&(console[_0x198143(0x218)](_0x198143(0x1c0)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x198143(0x1c8)][0x3]||'',configpath=userID?'./config/'+userID+'/':_0x198143(0x193),logspath=userID?_0x198143(0x1d8)+userID+'/':_0x198143(0x1d8),loggerfile=fs[_0x198143(0x2f3)](logspath+_0x198143(0x1d6),{'flags':'a'});!fs[_0x198143(0x19f)](configpath)&&fs[_0x198143(0x290)](configpath);!fs[_0x198143(0x19f)](logspath)&&fs[_0x198143(0x290)](logspath);const configfile=configpath+_0x198143(0x252)+botID+_0x198143(0x197),logfile=configpath+_0x198143(0x252)+botID+_0x198143(0x287),performancefile=configpath+'bot-'+botID+'-performance.json',coinresultsfile=configpath+_0x198143(0x252)+botID+_0x198143(0x1a3),settingsfile=configpath+'bb-settings.json',securefile=configpath+_0x198143(0x23b),configbackuppath=configpath+_0x198143(0x261),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x198143(0x20a)]({'logs':[],'version':serverversion})[_0x198143(0x1b2)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x198143(0x20a)]({'data':[],'version':serverversion})[_0x198143(0x1b2)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x198143(0x20a)]({'bot':[],'version':serverversion})[_0x198143(0x1b2)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x198143(0x20a)]({'coins':[],'version':serverversion})[_0x198143(0x1b2)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x198143(0x1cd),'rsaStandard':_0x198143(0x2dc)});let settings=getSettings(),secure=getSecure();function _0xc540(){const _0x39ac23=['./version.json','bb-secure.json','pro','restart','2\x20-\x20Orders\x20unlocked','ORDERS.UNLOCKING','red_yellow_blue','getPortfolio(2)','1\x20-\x20Handle\x20open\x20orders','symbols','side','exchange','kill','apiSecret','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','substring','split','startprice','cancelLoading','toUpperCase','Uncaught\x20Exception:','push','map','limit','bot-','createOrder','parse','onepagemode','basecoin','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','error','uncaughtException','InsufficientFunds','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','(((.+)+)+)+$','loading-canceled','\x20exchange','Limit\x20(low-margin)','privateKey','/backup/','datetime','%\x20(','getTime','bot','filter','Fees\x20|\x20currency:\x20','49ysxxNn','getMonth','sendMetricsTelegram','send','2.3.5','secure','portfolio','\x20>\x20','storeConfiguration','search','average','/USD','removed','recovery','padStart','distribution','shift','args','page','Net\x20','Cooldown\x20ended\x20-\x20balancing\x20resumed','clientOrderId','<b>','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','balances','exec','fee','delta','timeshift','yyyy/MM/dd','\x20|\x20Your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','-events.json','\x20change','coin','YOYOW/','Market','highest','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','toLowerCase','\x20orders\x20in\x20less\x20than\x20','mkdirSync','event','getDate','Crypt','value','settings','ETH','************','startnumber','bid','ordertype','getMinutes','<pre>','getCoins()','function','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','getSeconds','2\x20-\x20Handled\x20open\x20orders','enabled','orderstatus','706716cUhdSn','leftTxt','watchTrades','\x20:\x20','length','USDT','timeout','find','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','</pre>','type','API-key\x20format\x20invalid','\x20|\x20Type:\x20','1014696AkptGt','join','liquidity','random','date','\x20API\x20key\x20is\x20invalid','keys','OrderNotFound','getOpenOrders()','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration','amountToPrecision','milliseconds','parseISO','performance','success','BNB','open','isEqual','resetHistory','/EUR','set','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','20QkEWvv','yargs/yargs','6ChaMCI','Reset\x20|\x20','\x20hour','padEnd','getPortfolio','.json','remove','coins','Bitfinex2','\x20|\x20highest:\x20','showname','entries','Error\x20while\x20deleting\x20files:\x20','***','placeOrder','3\x20-\x20handling\x20FILLED\x20order:\x20','market','BUSD','Resetting\x20coin\x20results:\x20','RSA-OAEP','286DzzYoU','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','Order\x20is\x20invalid:\x20','writeFile','USD','Bot\x20','\x20value','debug','placeOrder()','fromCodePoint','getFullYear','LOCKED','fetchTicker','percentage','\x20minutes\x20-\x20','additional\x20symbols\x20','botID','MIN_NOTIONAL','decrypt','0\x20-\x20EXECUTION:\x20','yyyy-MM-dd\x27T\x27HH:mm:ss','lowdb/adapters/FileSync','createWriteStream','\x20has\x20a\x2024h\x20drop\x20of\x20','cancelOrder','watchTransactions','2.6.0','netoffset','Custom\x20ID:\x20','emojisell','breakeven','openOrders','Unfilled\x20order(s)\x20canceled\x20after\x20','cost','target','autoliquidity','fetchTickers','2\x20-\x20Validate\x20orders:\x20',':\x20Bot\x20','string','timestamp','Pausing\x20for\x20','BTC','fetchClosedOrders','net-fiat','1\x20-\x20FILLED:\x20','Fee\x20discount\x20refund\x20detected:\x20','ORDERS.UNLOCKED','Executed\x20','540521cakuMd','progress','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','-performance.json','date-fns','deleteHistoryAlerts','final','\x20API\x20secret\x20is\x20invalid','./config/','offset','exchange\x20not\x20reloaded','1\x20-\x20Unlock\x20orders','-config.json','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','storeFiat','recent20','\x20minutes','\x20|\x20API\x20blocked\x20or\x20your\x20machine\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','Portfolio\x20change\x20detected:\x20','change24h','existsSync','buy','hybrid-crypto-js','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','-results.json','ccxt','showConfig','symbol','abs','\x20portfolio:</b>\x20\x0a\x0a','UNLOCKING','<b>Bot\x20','Initiating\x20exchange\x20reload','added','headless','InvalidOrder','slice','running','Unknown\x20error\x20occured','write','apiKey','order','\x20order:\x20','sort','initial','coin-loading-progress','splice','Manual\x20balancing\x20required','fetchOpenOrders','2\x20-\x20FILLED\x20known\x20order:\x20','fetchBalance','valid','message','Error:\x20Invalid\x20argument\x20','getPortfolio(1)','cancel','reverse','bots','getHours','min','-------------------------------\x0a','argv','lowdb','4593726BVyzAn','changes','test','sha256','recreate','includes','currency','trade','fiat','loadSymbols()','canceled','BNB/','/output-000.log','sell','./logs/','sells','Binance','customId','001','sendPortfolioTelegram','status','loadMarkets','assign','emojibuy','ticker','change','XEM/BUSD','\x20|\x20','format','indexOf','price','toString','\x20|\x20lock\x20orders:\x20','Net\x20effect','exchanges','forEach','data','Failed\x20to\x20load\x20coin\x20data\x20for\x20','DDoSProtection','UNLOCKED','configuration-stored','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order:\x20','eur','remainingSymbols','storeHeadless','ongoing','amount','excluded','apiPassword','ORDERS.LOCKED','colorscheme','has','net-basecoin','closed','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','filled','\x20|\x20Error\x20details:\x20','last','password','logs','\x20>\x20[DEBUG]\x20','realized','event-history','time','defaults','rightTxt','unlinkSync','configuration','constructor','AuthenticationError','buys','none','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','usd','number','botname','replace','differenceInSeconds','log','Invalid\x20API\x20key\x20or\x20secret\x20entered','3262536IrFtmI','limits',':\x20timer\x20>','2.5.0','875820TCdOcD','threshold','max','full','EUR','get','968460iHWKNz','startsWith','DAI/','cooldown','limit-high','recreateCoinResults()','round','sortBy','watchOrders','add','getStartingBalances','toFixed','Saving\x20configuration','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration','Invalid\x20quantity','startdate','total','stringify','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','emitHistory','version'];_0xc540=function(){return _0x39ac23;};return _0xc540();}oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5bf115=>{const _0xdc1c9e=_0x198143;console[_0xdc1c9e(0x218)](_0x5bf115);},'simple':_0x432946=>{const _0x5b755e=_0x198143;console[_0x5b755e(0x218)](_0x432946),loggerfile[_0x5b755e(0x1b2)](util[_0x5b755e(0x1e6)](_0x432946)+'\x0a');},'full':async(_0x14fda8,_0xb23b63='')=>{const _0xd9bd5e=_0x198143;let _0x54aad1;if(config['showname'])_0x54aad1=getTimeStamp()+':\x20'+config[_0xd9bd5e(0x215)]+'\x20>\x20'+_0x14fda8;else _0x54aad1=getTimeStamp()+_0xd9bd5e(0x303)+botID+_0xd9bd5e(0x26f)+_0x14fda8;console[_0xd9bd5e(0x218)](_0x54aad1),loggerfile[_0xd9bd5e(0x1b2)](util[_0xd9bd5e(0x1e6)](_0x54aad1)+'\x0a'),_0xb23b63&&(console['log'](_0xb23b63),loggerfile[_0xd9bd5e(0x1b2)](util[_0xd9bd5e(0x1e6)](_0xb23b63)+'\x0a'));},'debug':async(_0x30abf5,_0x39fa53='')=>{const _0x18d4da=_0x198143;let _0x4dd570;if(config[_0x18d4da(0x2d3)])_0x4dd570=getTimeStamp()+':\x20'+config[_0x18d4da(0x215)]+_0x18d4da(0x206)+_0x30abf5;else _0x4dd570=getTimeStamp()+':\x20Bot\x20'+botID+_0x18d4da(0x206)+_0x30abf5;if(debugging)console[_0x18d4da(0x218)](_0x4dd570);loggerfile[_0x18d4da(0x1b2)](util[_0x18d4da(0x1e6)](_0x4dd570)+'\x0a');if(_0x39fa53){if(debugging)console[_0x18d4da(0x218)](_0x39fa53);loggerfile[_0x18d4da(0x1b2)](util[_0x18d4da(0x1e6)](_0x39fa53)+'\x0a');}}};process['on'](_0x198143(0x259),function(_0x53fd0a){const _0x309fee=_0x198143;logger[_0x309fee(0x2e4)](_0x309fee(0x24e),_0x53fd0a);});settings[_0x198143(0x284)]!=config[_0x198143(0x284)]&&updateTimeshift(settings[_0x198143(0x284)]);settings[_0x198143(0x255)]!=config[_0x198143(0x255)]&&updateOnepagemode(settings[_0x198143(0x255)]);process[_0x198143(0x26b)]({'started':'running'},_0x2555e9=>{}),initializeProcessListeners();function proxyEmit(_0x4af92a,_0x25dc36=null){process['send']({'function':_0x4af92a,'args':_0x25dc36},_0xb96d24=>{});}function initializeProcessListeners(){process['on']('message',_0xaa6713=>{const _0x1bd983=_0x4282;switch(Object['keys'](_0xaa6713)[0x0]){case _0x1bd983(0x284):_0xaa6713[_0x1bd983(0x284)]!=undefined&&(settings[_0x1bd983(0x284)]=_0xaa6713[_0x1bd983(0x284)],updateTimeshift(settings[_0x1bd983(0x284)]));break;case _0x1bd983(0x255):_0xaa6713[_0x1bd983(0x255)]!=undefined&&(settings[_0x1bd983(0x255)]=_0xaa6713['onepagemode'],updateOnepagemode(settings[_0x1bd983(0x255)]));break;case _0x1bd983(0x1c4):_0xaa6713['bots']!=undefined&&(bots=JSON[_0x1bd983(0x254)](_0xaa6713['bots']),proxyEmit(_0x1bd983(0x1c4),bots));break;case'function':switch(_0xaa6713[_0x1bd983(0x29e)]){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x1bd983(0x238):emitHistory(_0xaa6713[_0x1bd983(0x279)]);break;case _0x1bd983(0x190):deleteHistoryAlerts(_0xaa6713['args']);break;case _0x1bd983(0x2cd):getPortfolio(_0xaa6713['args']);break;case _0x1bd983(0x270):storeConfiguration(_0xaa6713['args']);break;case _0x1bd983(0x1f6):storeHeadless(_0xaa6713[_0x1bd983(0x279)]);break;case _0x1bd983(0x199):storeFiat(_0xaa6713[_0x1bd983(0x279)]);break;case _0x1bd983(0x2c3):resetHistory();break;case _0x1bd983(0x22e):getStartingBalances(getNormalizedPerformance());break;case _0x1bd983(0x2d7):placeOrder(_0xaa6713['args']);break;case _0x1bd983(0x24c):cancelLoading();break;case _0x1bd983(0x1a5):showConfig();break;case _0x1bd983(0x26a):sendMetricsTelegram();break;case _0x1bd983(0x1dd):sendPortfolioTelegram();break;}}});}reset(null,!![]);async function reset(_0xa93805=null,_0x48af31=![]){const _0x2eafb2=_0x198143;logger[_0x2eafb2(0x2e4)](_0x2eafb2(0x2ca)+(_0xa93805&&_0xa93805[_0x2eafb2(0x2a8)]>0x0?_0x2eafb2(0x2ec)+_0xa93805[_0x2eafb2(0x2b2)](','):'no\x20additional\x20symbols')+_0x2eafb2(0x1e5)+(_0x48af31?'exchange\x20reloaded':_0x2eafb2(0x195)));if(pidBalances)clearTimeout(pidBalances);if(!_0x48af31)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config['apiKey']!=_0x2eafb2(0x2d6)){if(_0x48af31){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x61b3dc){handleErrorNoStop(_0x61b3dc,_0x2eafb2(0x1d3));return;}setStableCoins(),initialPerformanceStored=![];}await initwsCcxt(_0xa93805);const _0x1e4d3c=await getCoins();[currentCoins,currentCoinsAll]=_0x1e4d3c,exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}getBalances(![]),await updateOpenOrders();if(lastOrders[_0x2eafb2(0x2a8)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){exchangeStopped=!![],await exchange['close']();}async function reloadExchange(){const _0x4bdbe3=_0x198143;logger[_0x4bdbe3(0x2e4)](_0x4bdbe3(0x1ab));while(lockOrders!=ORDERS[_0x4bdbe3(0x1f1)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x4bdbe3(0x2e4)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(null,!![]);}async function initExchange(_0x5d2386=config[_0x198143(0x245)],_0x4054be=config[_0x198143(0x1b3)],_0xa8ba3a=config[_0x198143(0x247)],_0x206d5c=config[_0x198143(0x1fa)]){const _0x5c3e52=_0x198143;exchange&&await stopExchange();!supportedExchanges()[_0x5c3e52(0x1cf)](_0x5d2386)&&(logHistory(_0x5c3e52(0x258),_0x5c3e52(0x237)+_0x5d2386+_0x5c3e52(0x25e)),killBot());const _0x33d37c=ccxt[_0x5d2386[_0x5c3e52(0x28e)]()];exchange=new _0x33d37c({'apiKey':_0x4054be,'secret':_0xa8ba3a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{}});if(_0x206d5c)exchange[_0x5c3e52(0x204)]=_0x206d5c;}function setStableCoins(){const _0x492ff7=_0x198143;let _0x4a4551=config[_0x492ff7(0x256)]=='ETH'?_0x492ff7(0x296):_0x492ff7(0x307),_0x2d0ab3=!allSymbols[_0x492ff7(0x1cf)](_0x4a4551+_0x492ff7(0x273))?'USDT':'USD',_0x206e72=!allSymbols['includes'](_0x4a4551+_0x492ff7(0x2c4))?_0x2d0ab3:'EUR';stablecoins={'eur':{'coin':''+_0x4a4551+_0x206e72,'symbol':_0x4a4551+'/'+_0x206e72},'usd':{'coin':''+_0x4a4551+_0x2d0ab3,'symbol':_0x4a4551+'/'+_0x2d0ab3}};}async function initwsCcxt(_0x4fe5f3){const _0x30c4a7=_0x198143;_0x4fe5f3==null&&(_0x4fe5f3=[],config['portfolio'][_0x30c4a7(0x1ed)](_0x37fcac=>{const _0x380d01=_0x30c4a7;if(!_0x37fcac[_0x380d01(0x1f9)]&&_0x37fcac[_0x380d01(0x289)]!=config[_0x380d01(0x256)])_0x4fe5f3[_0x380d01(0x24f)](_0x37fcac[_0x380d01(0x1a6)]);}));if(!_0x4fe5f3[_0x30c4a7(0x1cf)](stablecoins['eur'][_0x30c4a7(0x1a6)]))_0x4fe5f3['push'](stablecoins[_0x30c4a7(0x1f4)][_0x30c4a7(0x1a6)]);if(!_0x4fe5f3[_0x30c4a7(0x1cf)](stablecoins[_0x30c4a7(0x213)][_0x30c4a7(0x1a6)]))_0x4fe5f3['push'](stablecoins[_0x30c4a7(0x213)][_0x30c4a7(0x1a6)]);if(config['exchange'][_0x30c4a7(0x225)](_0x30c4a7(0x1da))){if(!_0x4fe5f3[_0x30c4a7(0x1cf)](_0x30c4a7(0x1d5)+config[_0x30c4a7(0x256)]))_0x4fe5f3[_0x30c4a7(0x24f)](_0x30c4a7(0x1d5)+config[_0x30c4a7(0x256)]);}loadCoins(_0x4fe5f3);const _0x16eae9=async _0x58c3e4=>{const _0x58330f=_0x30c4a7,_0x14c2af=await exchange['fetchTicker'](_0x58c3e4);global[_0x58330f(0x1e2)][noslash(_0x14c2af[_0x58330f(0x1a6)])]=_0x14c2af['last'];while(!![]){if(!botPaused)try{const _0x307098=await exchange[_0x58330f(0x2a6)](_0x58c3e4);global[_0x58330f(0x1e2)][noslash(_0x307098[0x0][_0x58330f(0x1a6)])]=_0x307098[0x0][_0x58330f(0x1e8)],await sleep(0x3e8);}catch(_0x27a4a9){if(!exchangeStopped)await handleError(_0x27a4a9,'watchTrades',_0x58c3e4);}else await sleep(0x64);}},_0xba270=async _0x534f39=>{const _0x4ef511=_0x30c4a7;while(!![]){if(!botPaused)try{const _0x5c5649=await exchange[_0x4ef511(0x2e9)](_0x534f39);global[_0x4ef511(0x1e3)][_0x5c5649[_0x4ef511(0x1a6)]]=_0x5c5649[_0x4ef511(0x2ea)],await sleep(0x3c*0x3e8);}catch(_0x3498ff){if(!exchangeStopped)await handleError(_0x3498ff,'fetchTickers',_0x534f39);}else await sleep(0x64);}},_0x243182=async()=>{const _0x2ad18f=_0x30c4a7;while(!![]){if(!botPaused)try{const _0x2886b8=await exchange[_0x2ad18f(0x22c)]();_0x2886b8[_0x2ad18f(0x1ed)](_0x16240d=>{updateNumberCoinsCcxt(_0x16240d);});}catch(_0x47e08e){if(!exchangeStopped)await handleError(_0x47e08e,'watchOrders');}else await sleep(0x64);}};_0x4fe5f3[_0x30c4a7(0x1ed)](async _0x4128b9=>{_0x16eae9(_0x4128b9),_0xba270(_0x4128b9);}),!wsEventsSet&&(wsEventsSet=!![],_0x243182(),watchTransactions());}async function watchTransactions(){const _0x2b20f7=_0x198143;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x115ce0=await getCoins(),[_0x28ad81,_0x1d1fcf]=_0x115ce0;let _0x8244a=[];currentCoins[_0x2b20f7(0x1ed)](_0x5e1498=>{const _0x4b3fc4=_0x2b20f7,_0x12f564=_0x28ad81[_0x4b3fc4(0x2ab)](_0x5c2922=>_0x5c2922['coin']==_0x5e1498[_0x4b3fc4(0x289)]);_0x12f564&&(_0x5e1498[_0x4b3fc4(0x214)]!=_0x12f564['number']&&_0x8244a[_0x4b3fc4(0x24f)]({'coin':_0x5e1498[_0x4b3fc4(0x289)],'symbol':_0x5e1498[_0x4b3fc4(0x1a6)],'number':Number(formatResult(_0x12f564[_0x4b3fc4(0x214)]-_0x5e1498[_0x4b3fc4(0x214)],0x8))}));});if(_0x8244a[_0x2b20f7(0x2a8)]==0x1&&!blockTransactionDetection){if(config[_0x2b20f7(0x300)]){logger[_0x2b20f7(0x2e4)](_0x2b20f7(0x267)+lastFees[_0x2b20f7(0x1d0)]+_0x2b20f7(0x2d2)+lastFees['highest']);if(!lastFees[_0x2b20f7(0x1d0)]||_0x8244a[0x0][_0x2b20f7(0x289)]!=lastFees[_0x2b20f7(0x1d0)]||_0x8244a[0x0][_0x2b20f7(0x214)]>lastFees[_0x2b20f7(0x28c)]){let _0x3f97f4;if(_0x8244a[0x0][_0x2b20f7(0x289)]!=config[_0x2b20f7(0x256)]){let _0x3831a8=global['ticker'][noslash(_0x8244a[0x0][_0x2b20f7(0x1a6)])];_0x3f97f4=_0x8244a[0x0][_0x2b20f7(0x1c3)]?0x1/_0x3831a8:_0x3831a8;}else _0x3f97f4=0x1;_0x8244a[0x0][_0x2b20f7(0x1e8)]=_0x3f97f4,delete _0x8244a[0x0][_0x2b20f7(0x1a6)];let _0x3db67c=[],_0x5cf0e=[...config[_0x2b20f7(0x2b3)]]||[],_0x333595=config['liquidity'];_0x5cf0e['sort']((_0x4616e7,_0x3480e2)=>_0x4616e7[_0x2b20f7(0x2b5)]>_0x3480e2[_0x2b20f7(0x2b5)]?-0x1:_0x3480e2['date']>_0x4616e7[_0x2b20f7(0x2b5)]?0x1:0x0);const _0x1c5e60=getDate();if(_0x5cf0e[0x0]){const _0x369c3c=fns[_0x2b20f7(0x254)](_0x5cf0e[0x0][_0x2b20f7(0x2b5)],'yyyy/MM/dd',new Date()),_0x53c70e=fns[_0x2b20f7(0x254)](_0x1c5e60,_0x2b20f7(0x285),new Date());if(fns[_0x2b20f7(0x2c2)](_0x369c3c,_0x53c70e)){_0x3db67c=_0x5cf0e[0x0]['changes'];const _0x5da3ca=_0x3db67c[_0x2b20f7(0x2ab)](_0x15aa12=>_0x15aa12[_0x2b20f7(0x289)]==_0x8244a[0x0][_0x2b20f7(0x289)]);_0x5da3ca?(_0x5da3ca[_0x2b20f7(0x214)]+=_0x8244a[0x0][_0x2b20f7(0x214)],_0x5da3ca[_0x2b20f7(0x214)]==0x0&&(_0x3db67c=_0x3db67c['filter'](_0x1a3656=>{return _0x1a3656['coin']!=_0x8244a[0x0]['coin'];}))):_0x3db67c[_0x2b20f7(0x24f)](_0x8244a[0x0]);const _0x5a1c46=_0x333595[_0x2b20f7(0x2ab)](_0x48bb71=>_0x48bb71[_0x2b20f7(0x2b5)]==_0x1c5e60);_0x5a1c46['changes']=_0x3db67c;}else _0x333595[_0x2b20f7(0x24f)]({'date':_0x1c5e60,'changes':[_0x8244a[0x0]]});}const _0x589083=_0x333595[_0x2b20f7(0x2ab)](_0x3ea1f9=>_0x3ea1f9[_0x2b20f7(0x2b5)]==_0x1c5e60);if(_0x589083){let _0x4af9e1=!![];_0x589083[_0x2b20f7(0x1cb)]['forEach'](_0x32f3ce=>{const _0x4f7fdf=_0x2b20f7;if(_0x32f3ce[_0x4f7fdf(0x214)]!=0x0)_0x4af9e1=![];}),_0x4af9e1&&(_0x333595=_0x333595[_0x2b20f7(0x266)](_0x121f1b=>{const _0x14636b=_0x2b20f7;return _0x121f1b[_0x14636b(0x2b5)]!=_0x1c5e60;}));}let _0x5e6841=dbConfig['get'](_0x2b20f7(0x265))[_0x2b20f7(0x2ab)]({'botID':botID})[_0x2b20f7(0x294)]();_0x5e6841&&(dbConfig[_0x2b20f7(0x223)](_0x2b20f7(0x265))[_0x2b20f7(0x2ab)]({'botID':botID})[_0x2b20f7(0x1e0)]({'liquidity':_0x333595})[_0x2b20f7(0x1b2)](),config[_0x2b20f7(0x2b3)]=_0x333595),logHistory(_0x2b20f7(0x2bf),_0x2b20f7(0x19d)+Math[_0x2b20f7(0x1a7)](_0x8244a[0x0][_0x2b20f7(0x214)])+'\x20'+_0x8244a[0x0][_0x2b20f7(0x289)]+'\x20'+(_0x8244a[0x0]['number']>0x0?_0x2b20f7(0x1ac):'removed')+'\x20-\x20liquidity\x20settings\x20updated\x20accordingly'),proxyEmit(_0x2b20f7(0x20d),emittedConfiguration());}else logger[_0x2b20f7(0x2e4)](_0x2b20f7(0x188)+Math['abs'](_0x8244a[0x0][_0x2b20f7(0x214)])+'\x20'+_0x8244a[0x0][_0x2b20f7(0x289)]+'\x20'+(_0x8244a[0x0][_0x2b20f7(0x214)]>0x0?_0x2b20f7(0x1ac):'removed'));transactionDetected=!![],currentCoins=_0x28ad81,currentCoinsAll=_0x1d1fcf;}else logger['debug'](_0x2b20f7(0x19d)+Math['abs'](_0x8244a[0x0][_0x2b20f7(0x214)])+'\x20'+_0x8244a[0x0][_0x2b20f7(0x289)]+'\x20'+(_0x8244a[0x0]['number']>0x0?_0x2b20f7(0x1ac):_0x2b20f7(0x274))+_0x2b20f7(0x2c6)),currentCoins=_0x28ad81,currentCoinsAll=_0x1d1fcf;}await sleep(watchTransactionsInterval);}catch(_0x5211ca){if(!exchangeStopped)await handleError(_0x5211ca,_0x2b20f7(0x2f6));}else await sleep(0x64);}}async function loadSymbols(_0x582256=config[_0x198143(0x245)],_0x115e58=![]){const _0xb54c52=_0x198143;if(allSymbols&&!_0x115e58)return;try{markets=await exchange[_0xb54c52(0x1df)](),allSymbols=exchange[_0xb54c52(0x243)][_0xb54c52(0x266)](_0x140316=>{const _0x5e3b72=_0xb54c52;let _0xf0bbcb=![];const _0x4a990d=exceptions[_0x582256[_0x5e3b72(0x28e)]()]||[];return _0x4a990d[_0x5e3b72(0x1ed)](_0x566d95=>{const _0x303c59=_0x5e3b72;if(_0x140316[_0x303c59(0x1cf)](_0x566d95))_0xf0bbcb=!![];}),!_0xf0bbcb;});}catch(_0x3a8db6){throw _0x3a8db6;}}async function initclient(){const _0x5911d8=_0x198143;emitLoadingProgress(),proxyEmit(_0x5911d8(0x20d),emittedConfiguration()),proxyEmit(_0x5911d8(0x1ec),supportedExchanges());while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x5911d8(0x280),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x482995=getNormalizedPerformance();emitPerformance(_0x482995),getStartingBalances(_0x482995);}async function toggleBotMode(){const _0x4bd6d7=_0x198143;let _0x3a9f72=dbConfig['get'](_0x4bd6d7(0x265))[_0x4bd6d7(0x2ab)]({'botID':botID})[_0x4bd6d7(0x294)]();if(_0x3a9f72){const _0x12df6d=!_0x3a9f72['headless'];dbConfig[_0x4bd6d7(0x223)](_0x4bd6d7(0x265))['find']({'botID':botID})[_0x4bd6d7(0x1e0)]({'headless':_0x12df6d})[_0x4bd6d7(0x1b2)](),config['headless']=_0x12df6d,proxyEmit(_0x4bd6d7(0x20d),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x4030fc=_0x198143;process[_0x4030fc(0x26b)]({'updatebotmanager':!![]},_0x1a85f8=>{});}async function loadCoins(_0x4106bd){const _0x3f79b1=_0x198143;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![]},emitLoadingProgress();let _0x472120,_0x57b8d9=0x0,_0x38c4af=0x0;_0x4106bd[_0x3f79b1(0x1ed)](_0x14c864=>{const _0x3112aa=_0x3f79b1;loading[_0x3112aa(0x1f5)]['push'](_0x14c864);}),loadingCanceled=![];let _0x2690b9=![];while(_0x472120!=_0x4106bd[_0x3f79b1(0x2a8)]){_0x472120=0x0,_0x4106bd[_0x3f79b1(0x1ed)](_0x2bd7cc=>{const _0x3363a2=_0x3f79b1;if(global[_0x3363a2(0x1e2)][noslash(_0x2bd7cc)]){loading['remainingSymbols']=loading[_0x3363a2(0x1f5)][_0x3363a2(0x266)](_0x1217f7=>_0x1217f7!=_0x2bd7cc);if(!watchedSymbols['includes'](_0x2bd7cc))watchedSymbols[_0x3363a2(0x24f)](_0x2bd7cc);_0x472120++;}}),loading[_0x3f79b1(0x18c)]=Math[_0x3f79b1(0x22a)](_0x472120/_0x4106bd[_0x3f79b1(0x2a8)]*0x64);loading[_0x3f79b1(0x18c)]!=0x64&&(_0x38c4af>0x1e*0x5&&(loading[_0x3f79b1(0x2aa)]=!![],emitLoadingProgress()),_0x38c4af>0x78*0x5&&!_0x2690b9&&(loading[_0x3f79b1(0x1c2)]=!![],emitLoadingProgress(),_0x2690b9=!![],logHistory(_0x3f79b1(0x258),_0x3f79b1(0x1ef)+loading['remainingSymbols'][_0x3f79b1(0x2b2)](',\x20')+'\x20-\x20bot\x20not\x20started'),logHistory(_0x3f79b1(0x258),_0x3f79b1(0x306)+loadCoinsRetryInterval/0xea60+_0x3f79b1(0x1a2)),pidCoinReloading=setTimeout(()=>{const _0x5903ad=_0x3f79b1;process[_0x5903ad(0x26b)]({'stop':'restart'},_0x43a079=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x3f79b1(0x1c2)]=!![],emitLoadingProgress();break;}else _0x472120!=_0x57b8d9&&(_0x57b8d9=_0x472120,emitLoadingProgress()),_0x38c4af++,await sleep(0xc8);}_0x472120==_0x4106bd[_0x3f79b1(0x2a8)]&&(coinsLoaded=!![],process[_0x3f79b1(0x26b)]({'status':_0x3f79b1(0x2a2),'live':_0x3f79b1(0x1b0)},_0x229a3a=>{}),_0x2690b9&&logHistory('success','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x15bcd3=_0x198143;proxyEmit(_0x15bcd3(0x20d),{...emittedConfiguration(),'configstate':_0x15bcd3(0x25d)});}function emitLoadingProgress(){const _0x249a6e=_0x198143;proxyEmit(_0x249a6e(0x1b8),loading);}async function getFiat(){const _0x5fc060=_0x198143;let _0x3ab068=global['ticker'][stablecoins[_0x5fc060(0x1f4)][_0x5fc060(0x289)]],_0x5df870=global['ticker'][stablecoins[_0x5fc060(0x213)][_0x5fc060(0x289)]];return{'eur':Number(_0x3ab068),'usd':Number(_0x5df870)};}function capitalize(_0x403e50){const _0x16c8fa=_0x198143;return _0x403e50['substring'](0x0,0x1)[_0x16c8fa(0x24d)]()+_0x403e50[_0x16c8fa(0x249)](0x1);}function supportedExchanges(){const _0x2debde=_0x198143,_0x5c14fc=['ws',_0x2debde(0x301),_0x2debde(0x2e9),'watchTrades',_0x2debde(0x22c),_0x2debde(0x2f5),'createOrder','fetchOpenOrders',_0x2debde(0x308),_0x2debde(0x1bd)];let _0x541cd1=[],_0x1be70d=[],_0x5c9919=ccxt[_0x2debde(0x1ec)];_0x5c9919[_0x2debde(0x1ed)](_0x16e538=>{const _0x38d523=_0x2debde;try{const _0x369157=new ccxt[_0x16e538]();if(_0x369157['has']['ws'])_0x1be70d[_0x38d523(0x24f)](_0x369157);}catch(_0x4d7836){}}),_0x1be70d[_0x2debde(0x1ed)](_0x2c6624=>{const _0x301d11=_0x2debde;let _0x161105=0x0;_0x5c14fc[_0x301d11(0x1ed)](_0x2f7d42=>{const _0xba9e53=_0x301d11;_0x2f7d42 in _0x2c6624[_0xba9e53(0x1fd)]&&_0x2c6624[_0xba9e53(0x1fd)][_0x2f7d42]&&_0x161105++;}),_0x161105==_0x5c14fc[_0x301d11(0x2a8)]&&_0x541cd1[_0x301d11(0x24f)](capitalize(_0x2c6624['id']));});let _0xc1d8ce=[];return _0x5c9919[_0x2debde(0x1ed)](_0x361622=>{_0x361622=capitalize(_0x361622);if(!_0x541cd1['includes'](_0x361622))_0xc1d8ce['push'](_0x361622);}),_0x541cd1;}function setStartDatePerformance(){const _0x4853b2=_0x198143;if(config&&config[_0x4853b2(0x2b3)][0x0][_0x4853b2(0x1cb)][_0x4853b2(0x2a8)]!=0x0){const _0x1fd0ff=config['liquidity'][0x0][_0x4853b2(0x1cb)];dbPerformance[_0x4853b2(0x223)](_0x4853b2(0x1ee))[_0x4853b2(0x2ab)]({'date':config[_0x4853b2(0x233)]})['assign']({'coins':_0x1fd0ff})[_0x4853b2(0x1b2)]();}}async function recreateCoinResults(){const _0x34e84e=_0x198143;let _0x32a306,_0x4a0176=[];try{const _0x40e63f=fns[_0x34e84e(0x1e6)](fns[_0x34e84e(0x2bd)](config['startdate'][_0x34e84e(0x216)](/\//g,'-')),_0x34e84e(0x2f1));for(const _0x3b832f of currentCoins){if(_0x3b832f[_0x34e84e(0x289)]!=config[_0x34e84e(0x256)]){let _0x1126d0=0x0,_0x303f84,_0x3b0e06;_0x32a306=await getAllEventOrders(_0x3b832f[_0x34e84e(0x1a6)]);if(_0x32a306['length']>0x0)_0x32a306[_0x34e84e(0x1ed)](_0x43aed6=>{const _0xb4a946=_0x34e84e,_0x2dcb76=_0x3b832f[_0xb4a946(0x1a6)]['includes'](config['basecoin']+'/');_0x4a0176[_0xb4a946(0x24f)]({'datetime':_0x43aed6[_0xb4a946(0x262)],'coin':_0x3b832f[_0xb4a946(0x289)],'symbol':_0x3b832f[_0xb4a946(0x1a6)],'side':_0x43aed6[_0xb4a946(0x244)],'reverse':_0x2dcb76,'amount':formatResult(_0x43aed6[_0xb4a946(0x201)],0x8),'filled':formatResult(_0x43aed6[_0xb4a946(0x201)],0x8),'price':formatResult(_0x43aed6['price'],0x8)}),_0x1126d0=_0x43aed6['side']==_0xb4a946(0x1a0)?_0x1126d0+_0x43aed6[_0xb4a946(0x201)]:_0x1126d0-_0x43aed6[_0xb4a946(0x201)];if(!_0x3b0e06)_0x3b0e06=_0x43aed6[_0xb4a946(0x1e8)];});_0x303f84=_0x3b832f[_0x34e84e(0x214)]-_0x1126d0;let _0x5c7276;config['liquidity'][_0x34e84e(0x1ed)](_0x4011c3=>{const _0x4d8e7a=_0x34e84e;!_0x5c7276&&(_0x5c7276=_0x4011c3['changes']['find'](_0x1ff7db=>_0x1ff7db[_0x4d8e7a(0x289)]==_0x3b832f['coin']),_0x5c7276&&(_0x303f84=_0x5c7276[_0x4d8e7a(0x214)],_0x3b0e06=_0x5c7276[_0x4d8e7a(0x1e8)]));});let _0x1e6f07=dbCoinResults[_0x34e84e(0x223)]('coins')[_0x34e84e(0x2ab)]({'coin':_0x3b832f[_0x34e84e(0x289)]})[_0x34e84e(0x294)]();_0x1e6f07={'coin':_0x3b832f['coin'],'number':_0x303f84,'breakeven':_0x3b0e06,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x34e84e(0x223)](_0x34e84e(0x2d0))[_0x34e84e(0x2ab)]({'coin':_0x3b832f[_0x34e84e(0x289)]})[_0x34e84e(0x1e0)](_0x1e6f07)[_0x34e84e(0x1b2)]();}}_0x4a0176[_0x34e84e(0x1b6)]((_0xcda3cc,_0x266414)=>_0xcda3cc['datetime']>_0x266414[_0x34e84e(0x262)]?0x1:_0x266414[_0x34e84e(0x262)]>_0xcda3cc[_0x34e84e(0x262)]?-0x1:0x0);let _0x35868c=0x0;for(let _0x47c237 of _0x4a0176){await updateCoinResults(_0x47c237,!![]);}}catch(_0x57d5a0){await handleError(_0x57d5a0,_0x34e84e(0x229));}}async function getAllEventOrders(_0x38acb3){const _0xb00056=_0x198143;let _0x5a7e35=[],_0x4de26e=dbLogs[_0xb00056(0x223)](_0xb00056(0x205))[_0xb00056(0x266)](_0x485343=>{const _0xf2afff=_0xb00056,_0x132f65=_0x485343[_0xf2afff(0x291)][_0xf2afff(0x28e)]();return _0x132f65[_0xf2afff(0x1cf)](_0x38acb3[_0xf2afff(0x28e)]())&&(_0x132f65[_0xf2afff(0x1cf)](_0xf2afff(0x2d9))&&_0x132f65['includes'](_0xf2afff(0x1b4))||_0x132f65[_0xf2afff(0x1cf)](_0xf2afff(0x201))&&_0x132f65['includes'](_0xf2afff(0x1b4)));})['sortBy'](_0xb00056(0x209))['value']();return _0x4de26e[_0xb00056(0x1ed)](_0xe5189f=>{const _0x2cc11f=_0xb00056,_0x116d18=_0xe5189f[_0x2cc11f(0x291)][_0x2cc11f(0x1cf)](_0x2cc11f(0x1d7))?'sell':'buy',_0x3fe845=/#([0-9]|\.)+\s/i,_0x1e244d=Number(_0x3fe845[_0x2cc11f(0x281)](_0xe5189f[_0x2cc11f(0x291)])[0x0][_0x2cc11f(0x1af)](0x1)),_0x3c2fcd=/@([0-9]|\.)+$/i,_0xf2d155=Number(_0x3c2fcd[_0x2cc11f(0x281)](_0xe5189f[_0x2cc11f(0x291)])[0x0][_0x2cc11f(0x1af)](0x1));_0x5a7e35[_0x2cc11f(0x24f)]({'datetime':_0xe5189f['time'],'coin':symbolToCoin(_0x38acb3),'symbol':_0x38acb3,'side':_0x116d18,'amount':_0x1e244d,'filled':_0x1e244d,'price':_0xf2d155});}),_0x5a7e35;}async function getAllOrders(_0x291341,_0xd20e29){const _0x4a5c82=_0x198143;let _0x4915b6=[];while(_0xd20e29<exchange[_0x4a5c82(0x2bc)]()){const _0x499ce1=0x1f4,_0x5a2292=await exchange[_0x4a5c82(0x308)](_0x291341,_0xd20e29,_0x499ce1);if(_0x5a2292[_0x4a5c82(0x2a8)])_0xd20e29=_0x5a2292[_0x5a2292['length']-0x1][_0x4a5c82(0x305)]+0x1,_0x4915b6=_0x4915b6['concat'](_0x5a2292);else break;}return _0x4915b6;}async function validate24hChanges(){const _0x116668=_0x198143;for(const _0x1a3b3b of currentCoins){if(_0x1a3b3b[_0x116668(0x289)]!=config[_0x116668(0x256)]){let _0x168aa0;_0x1a3b3b[_0x116668(0x1c3)]?_0x168aa0=formatResult((0x1/(global[_0x116668(0x1e3)][noslash(_0x1a3b3b[_0x116668(0x1a6)])]/0x64+0x1)-0x1)*0x64,0x3):_0x168aa0=global['change'][noslash(_0x1a3b3b[_0x116668(0x1a6)])],_0x168aa0<config[_0x116668(0x19e)]&&(logHistory(_0x116668(0x258),_0x1a3b3b[_0x116668(0x289)]+_0x116668(0x2f4)+_0x168aa0+'%'),logHistory(_0x116668(0x258),_0x116668(0x18d)),logHistory(_0x116668(0x258),_0x116668(0x248)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x2ab181,_0x455c5c){const _0x38400c=_0x198143;if(!_0x2ab181)return!![];const _0x5aa6a2=_0x455c5c[_0x38400c(0x24a)]('.'),_0x50159c=_0x2ab181['split']('.');for(var _0x2adf27=0x0;_0x2adf27<_0x50159c[_0x38400c(0x2a8)];_0x2adf27++){const _0x3b87a0=~~_0x50159c[_0x2adf27],_0x1bf13e=~~_0x5aa6a2[_0x2adf27];if(_0x3b87a0<_0x1bf13e)return!![];if(_0x3b87a0>_0x1bf13e)return![];}return![];}async function oneTimeMigration(){const _0x5e1878=_0x198143;let _0x399dec=dbLogs['get'](_0x5e1878(0x239))[_0x5e1878(0x294)]();if(isOlderVersion(_0x399dec,_0x5e1878(0x26c))){let _0x39764a=[];const _0x1f6a20=dbLogs['get']('logs')[_0x5e1878(0x294)]();_0x1f6a20['forEach'](_0x3f136c=>{const _0x25b8ad=_0x5e1878;_0x39764a[_0x25b8ad(0x24f)]({'time':_0x3f136c[_0x25b8ad(0x209)],'type':_0x3f136c[_0x25b8ad(0x2ae)],'event':_0x3f136c['event']});}),dbLogs[_0x5e1878(0x223)]('logs')[_0x5e1878(0x1e0)](_0x39764a)[_0x5e1878(0x1b2)]();}let _0x4fe791=dbConfig[_0x5e1878(0x223)](_0x5e1878(0x239))[_0x5e1878(0x294)]();if(isOlderVersion(_0x4fe791,_0x5e1878(0x26c))){let _0x22faa3=dbConfig['get'](_0x5e1878(0x265))[_0x5e1878(0x2ab)]({'botID':botID})[_0x5e1878(0x294)]();if(_0x22faa3){let _0x1f9ed2=[];_0x22faa3[_0x5e1878(0x26e)][_0x5e1878(0x1ed)](_0x58457f=>{const _0x156955=_0x5e1878;_0x1f9ed2[_0x156955(0x24f)]({'coin':_0x58457f[_0x156955(0x289)],'number':_0x58457f[_0x156955(0x298)],'price':_0x58457f['startprice']}),delete _0x58457f[_0x156955(0x298)],delete _0x58457f[_0x156955(0x24b)];});if(_0x1f9ed2[_0x5e1878(0x2a8)]!==0x0)fs[_0x5e1878(0x2e0)](configbackuppath+('starting-balance-'+botID+_0x5e1878(0x2ce)),JSON[_0x5e1878(0x235)](_0x1f9ed2,null,0x4),function(_0x273d0d){if(_0x273d0d){}});const _0x12579e=(_0x341d7b,_0x4090fa)=>{const _0x198621=_0x5e1878;let _0x47c60c=[];_0x4090fa['forEach'](_0x1c6c04=>{const _0x204406=_0x4282,_0x44d148=_0x341d7b[_0x204406(0x2ab)](_0xdbab16=>_0xdbab16['coin']==_0x1c6c04['coin']);if(!_0x44d148)_0x47c60c[_0x204406(0x24f)](_0x1c6c04);});let _0x147d4c=[];return _0x341d7b[_0x198621(0x1ed)](_0x54800e=>{const _0x130ed7=_0x198621,_0x3fa9aa=_0x4090fa['find'](_0x46a907=>_0x46a907[_0x130ed7(0x289)]==_0x54800e[_0x130ed7(0x289)]);if(!_0x3fa9aa||_0x3fa9aa[_0x130ed7(0x214)]==0x0&&_0x54800e['number']!=0x0)_0x147d4c[_0x130ed7(0x24f)](_0x54800e);}),{'missingDay1':_0x47c60c,'notInDay2':_0x147d4c};},_0x3b85c7=dbPerformance[_0x5e1878(0x223)]('data')['cloneDeep']()['value']();if(_0x3b85c7[_0x5e1878(0x2a8)]>0x1){const {missingDay1:_0x4c74fc,notInDay2:_0x266c40}=_0x12579e(_0x1f9ed2,_0x3b85c7[0x1][_0x5e1878(0x2d0)]);_0x1f9ed2=[..._0x1f9ed2,..._0x4c74fc],_0x266c40[_0x5e1878(0x1ed)](_0x1a1084=>{const _0x5f110e=_0x5e1878;let _0x3ab8b4=_0x1f9ed2['findIndex'](_0x4c27fe=>_0x4c27fe[_0x5f110e(0x289)]==_0x1a1084['coin']);_0x3ab8b4!=-0x1&&_0x1f9ed2[_0x5f110e(0x1b9)](_0x3ab8b4,0x1);});}_0x1f9ed2[_0x5e1878(0x1b6)]((_0x50ca0d,_0x5bac7c)=>_0x50ca0d[_0x5e1878(0x289)]>_0x5bac7c['coin']?0x1:_0x5bac7c[_0x5e1878(0x289)]>_0x50ca0d[_0x5e1878(0x289)]?-0x1:0x0);let _0x33a57f=[{'date':_0x22faa3[_0x5e1878(0x233)],'changes':_0x1f9ed2}];_0x3b85c7[_0x5e1878(0x2a8)]>0x2&&_0x3b85c7[_0x5e1878(0x1ed)]((_0x4ec36e,_0x51b0de)=>{const _0x4c4819=_0x5e1878;if(_0x51b0de>0x0&&_0x51b0de<_0x3b85c7[_0x4c4819(0x2a8)]-0x1){const {missingDay1:_0x53eb7c,notInDay2:_0x3d79bf}=_0x12579e(_0x3b85c7[_0x51b0de][_0x4c4819(0x2d0)],_0x3b85c7[_0x51b0de+0x1]['coins']);_0x1f9ed2=[],(_0x53eb7c['length']!=0x0||_0x3d79bf['length']!=0x0)&&(_0x53eb7c[_0x4c4819(0x2a8)]!=0x0&&_0x1f9ed2[_0x4c4819(0x24f)](..._0x53eb7c),_0x3d79bf[_0x4c4819(0x2a8)]!=0x0&&(_0x3d79bf[_0x4c4819(0x1ed)](_0x4bf75a=>{const _0x1f20c0=_0x4c4819;_0x4bf75a['number']=-_0x4bf75a[_0x1f20c0(0x214)];}),_0x1f9ed2['push'](..._0x3d79bf)),_0x1f9ed2[_0x4c4819(0x1b6)]((_0x4664b5,_0x3cb387)=>_0x4664b5[_0x4c4819(0x289)]>_0x3cb387['coin']?0x1:_0x3cb387[_0x4c4819(0x289)]>_0x4664b5['coin']?-0x1:0x0),_0x33a57f['push']({'date':_0x3b85c7[_0x51b0de+0x1][_0x4c4819(0x2b5)],'changes':_0x1f9ed2}));}}),dbConfig['get'](_0x5e1878(0x265))[_0x5e1878(0x2ab)]({'botID':botID})['assign']({..._0x22faa3,'liquidity':_0x33a57f})[_0x5e1878(0x1b2)]();}}if(isOlderVersion(_0x4fe791,_0x5e1878(0x2f7))){let _0x51976e=dbConfig[_0x5e1878(0x223)](_0x5e1878(0x265))[_0x5e1878(0x2ab)]({'botID':botID})[_0x5e1878(0x294)]();if(_0x51976e){const _0x57960b=_0x51976e[_0x5e1878(0x245)],_0x417224=_0x57960b?capitalize(_0x57960b):_0x5e1878(0x1da);dbConfig[_0x5e1878(0x223)]('bot')[_0x5e1878(0x2ab)]({'botID':botID})[_0x5e1878(0x1e0)]({'exchange':_0x417224})[_0x5e1878(0x1b2)]();}}let _0x3107f8=dbPerformance['get'](_0x5e1878(0x239))[_0x5e1878(0x294)]();isOlderVersion(_0x3107f8,_0x5e1878(0x26c))&&setStartDatePerformance();let _0x22b9e6=dbCoinResults['get'](_0x5e1878(0x239))[_0x5e1878(0x294)]();if(isOlderVersion(_0x22b9e6,_0x5e1878(0x21d))){let _0x51e460=dbCoinResults[_0x5e1878(0x223)](_0x5e1878(0x2d0))[_0x5e1878(0x294)]();if(_0x51e460[_0x5e1878(0x2a8)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x1465ce=_0x198143;dbConfig[_0x1465ce(0x2c5)]('version',serverversion)[_0x1465ce(0x1b2)](),dbPerformance[_0x1465ce(0x2c5)](_0x1465ce(0x239),serverversion)[_0x1465ce(0x1b2)](),dbLogs[_0x1465ce(0x2c5)](_0x1465ce(0x239),serverversion)[_0x1465ce(0x1b2)](),dbCoinResults[_0x1465ce(0x2c5)](_0x1465ce(0x239),serverversion)[_0x1465ce(0x1b2)]();}function getConfiguration(_0x91b0cd){const _0x1ef206=_0x198143;let _0x3c5e7e=dbConfig[_0x1ef206(0x223)](_0x1ef206(0x265))[_0x1ef206(0x2ab)]({'botID':_0x91b0cd})['value']();if(_0x3c5e7e){let _0x385eb3=![];typeof _0x3c5e7e['threshold']==_0x1ef206(0x304)&&(_0x3c5e7e={..._0x3c5e7e,'threshold':Number(_0x3c5e7e['threshold'])},_0x385eb3=!![]),_0x3c5e7e[_0x1ef206(0x19e)]==null&&(_0x3c5e7e={..._0x3c5e7e,'change24h':-0x14},_0x385eb3=!![]),!_0x3c5e7e['fiat']&&(_0x3c5e7e={..._0x3c5e7e,'fiat':_0x1ef206(0x2e1)},_0x385eb3=!![]),!_0x3c5e7e[_0x1ef206(0x255)]&&(_0x3c5e7e={..._0x3c5e7e,'onepagemode':settings[_0x1ef206(0x255)]},_0x385eb3=!![]),!_0x3c5e7e[_0x1ef206(0x1fc)]&&(_0x3c5e7e={..._0x3c5e7e,'colorscheme':_0x1ef206(0x240)},_0x385eb3=!![]),!_0x3c5e7e['autoliquidity']&&(_0x3c5e7e={..._0x3c5e7e,'autoliquidity':!![]},_0x385eb3=!![]),_0x385eb3&&(_0x3c5e7e={'botID':_0x3c5e7e[_0x1ef206(0x2ed)],'exchange':_0x3c5e7e[_0x1ef206(0x245)],'apiKey':_0x3c5e7e['apiKey'],'apiSecret':_0x3c5e7e[_0x1ef206(0x247)],'apiPassword':_0x3c5e7e[_0x1ef206(0x1fa)],'basecoin':_0x3c5e7e[_0x1ef206(0x256)],'botname':_0x3c5e7e[_0x1ef206(0x215)],'showname':_0x3c5e7e['showname'],'threshold':_0x3c5e7e[_0x1ef206(0x21f)],'ordertype':_0x3c5e7e['ordertype'],'timeout':_0x3c5e7e['timeout'],'fiat':_0x3c5e7e[_0x1ef206(0x1d2)],'startdate':_0x3c5e7e['startdate'],'recreate':_0x3c5e7e[_0x1ef206(0x1ce)],'timeshift':_0x3c5e7e[_0x1ef206(0x284)],'onepagemode':_0x3c5e7e[_0x1ef206(0x255)],'headless':_0x3c5e7e['headless'],'cooldown':_0x3c5e7e[_0x1ef206(0x227)],'change24h':_0x3c5e7e[_0x1ef206(0x19e)],'emojibuy':_0x3c5e7e[_0x1ef206(0x1e1)],'emojisell':_0x3c5e7e['emojisell'],'colorscheme':_0x3c5e7e[_0x1ef206(0x1fc)],'portfolio':_0x3c5e7e[_0x1ef206(0x26e)],'autoliquidity':_0x3c5e7e[_0x1ef206(0x300)],'liquidity':_0x3c5e7e[_0x1ef206(0x2b3)],'openOrders':_0x3c5e7e[_0x1ef206(0x2fc)]},dbConfig[_0x1ef206(0x223)]('bot')[_0x1ef206(0x2cf)]()[_0x1ef206(0x1b2)](),dbConfig[_0x1ef206(0x223)](_0x1ef206(0x265))[_0x1ef206(0x24f)](_0x3c5e7e)['write']());}else _0x3c5e7e={'botID':_0x91b0cd,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x1ef206(0x2e2)+_0x91b0cd,'showname':![],'threshold':0x3,'ordertype':_0x1ef206(0x2d9),'timeout':0x14,'fiat':'USD','startdate':getDate(),'recreate':![],'timeshift':settings[_0x1ef206(0x284)],'onepagemode':settings[_0x1ef206(0x255)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1ef206(0x240),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x3c5e7e;}function emittedConfiguration(){const _0x4c6859=_0x198143;let _0x1fe138;if(config[_0x4c6859(0x1b3)]=='')_0x1fe138={...config,'configstate':'initial'};else config['apiKey']==_0x4c6859(0x2d6)?_0x1fe138={...config,'configstate':_0x4c6859(0x275)}:(_0x1fe138={...config,'apiKey':_0x4c6859(0x297),'apiSecret':_0x4c6859(0x297)},config[_0x4c6859(0x1fa)]&&(_0x1fe138[_0x4c6859(0x1fa)]='************'));return _0x1fe138;}function getSettings(){const _0x1b57cf=_0x198143;return dbSettings[_0x1b57cf(0x223)](_0x1b57cf(0x295))[_0x1b57cf(0x294)]();}function getSecure(){const _0x3a5ff3=_0x198143;return dbSecure[_0x3a5ff3(0x223)](_0x3a5ff3(0x26d))[_0x3a5ff3(0x294)]()||{};}function updateTimeshift(_0x29d4af){const _0x5bad96=_0x198143;let _0x46aab9=dbConfig[_0x5bad96(0x223)](_0x5bad96(0x265))[_0x5bad96(0x2ab)]({'botID':botID})[_0x5bad96(0x294)]();_0x46aab9&&dbConfig['get'](_0x5bad96(0x265))[_0x5bad96(0x2ab)]({'botID':botID})['assign']({'timeshift':_0x29d4af})[_0x5bad96(0x1b2)](),config[_0x5bad96(0x284)]=_0x29d4af,proxyEmit(_0x5bad96(0x20d),emittedConfiguration());}function updateOnepagemode(_0xefbf2e){const _0x50fb0d=_0x198143;let _0x4f76f3=dbConfig['get']('bot')[_0x50fb0d(0x2ab)]({'botID':botID})['value']();_0x4f76f3&&dbConfig['get'](_0x50fb0d(0x265))[_0x50fb0d(0x2ab)]({'botID':botID})[_0x50fb0d(0x1e0)]({'onepagemode':_0xefbf2e})['write'](),config[_0x50fb0d(0x255)]=_0xefbf2e,proxyEmit(_0x50fb0d(0x20d),emittedConfiguration());}async function storeConfiguration(_0x154fc0){const _0x5605b8=_0x198143;logger[_0x5605b8(0x2e4)](_0x5605b8(0x230));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5605b8(0x2e4)]('Transaction\x20detection\x20blocked');let _0x125414=[],_0x1f0a73=![],_0x2c90b4=![],_0x185e16=[];_0x154fc0[_0x5605b8(0x26e)]['forEach'](_0x4d1c1d=>{const _0x49996a=_0x5605b8;if(!_0x4d1c1d['excluded']&&_0x4d1c1d[_0x49996a(0x289)]!=_0x154fc0[_0x49996a(0x256)])_0x185e16['push'](_0x4d1c1d[_0x49996a(0x1a6)]);}),_0x185e16['forEach'](_0x4dadee=>{const _0x141c7d=_0x5605b8,_0x3fbb61=watchedSymbols['includes'](_0x4dadee);!_0x3fbb61&&_0x125414[_0x141c7d(0x24f)](_0x4dadee);}),_0x185e16['forEach'](_0xad258b=>{const _0x94178=_0x5605b8,_0x407022=currentCoins[_0x94178(0x2ab)](_0x14a87a=>_0x14a87a[_0x94178(0x1a6)]==_0xad258b);!_0x407022&&(_0x1f0a73=!![]);}),currentCoins[_0x5605b8(0x1ed)](_0x28d1ff=>{const _0x194ee5=_0x5605b8;if(_0x28d1ff[_0x194ee5(0x289)]!=config[_0x194ee5(0x256)]){const _0x2a39c=_0x185e16['find'](_0xde6a68=>_0xde6a68==_0x28d1ff[_0x194ee5(0x1a6)]);!_0x2a39c&&(_0x1f0a73=!![]);}}),_0x154fc0[_0x5605b8(0x26e)]['forEach'](_0x1f03ee=>{const _0x4e622a=_0x5605b8,_0x3a7568=config[_0x4e622a(0x26e)]['find'](_0x139691=>_0x139691['coin']==_0x1f03ee['coin']);if(_0x3a7568&&_0x1f03ee['offset']!=_0x3a7568[_0x4e622a(0x194)])_0x2c90b4=!![];});let _0x3e04fb=dbConfig[_0x5605b8(0x223)](_0x5605b8(0x265))[_0x5605b8(0x2ab)]({'botID':botID})[_0x5605b8(0x294)]();_0x154fc0={..._0x154fc0,'apiKey':crypt['decrypt'](secure['privateKey'],_0x154fc0[_0x5605b8(0x1b3)])[_0x5605b8(0x1bf)],'apiSecret':crypt[_0x5605b8(0x2ef)](secure[_0x5605b8(0x260)],_0x154fc0[_0x5605b8(0x247)])[_0x5605b8(0x1bf)]};_0x154fc0[_0x5605b8(0x1fa)]&&(_0x154fc0[_0x5605b8(0x1fa)]=crypt['decrypt'](secure[_0x5605b8(0x260)],_0x154fc0[_0x5605b8(0x1fa)])[_0x5605b8(0x1bf)]);let _0xdaeaf0=![];if(_0x3e04fb){_0x154fc0['apiKey']==_0x5605b8(0x297)?_0x154fc0[_0x5605b8(0x1b3)]=config[_0x5605b8(0x1b3)]:_0xdaeaf0=!![];_0x154fc0[_0x5605b8(0x247)]=='************'?_0x154fc0[_0x5605b8(0x247)]=config['apiSecret']:_0xdaeaf0=!![];if(_0x154fc0[_0x5605b8(0x1fa)]==_0x5605b8(0x297))_0x154fc0[_0x5605b8(0x1fa)]=config[_0x5605b8(0x1fa)];else{if(_0x154fc0[_0x5605b8(0x1fa)])_0xdaeaf0=!![];}dbConfig[_0x5605b8(0x223)]('bot')[_0x5605b8(0x2ab)]({'botID':botID})['assign'](_0x154fc0)['write']();}else dbConfig[_0x5605b8(0x223)](_0x5605b8(0x265))['push'](_0x154fc0)[_0x5605b8(0x1b2)](),_0xdaeaf0=!![],process[_0x5605b8(0x26b)]({'status':_0x5605b8(0x2a2),'live':_0x5605b8(0x1b0)},_0xb38c88=>{});process[_0x5605b8(0x26b)]({'botname':_0x154fc0[_0x5605b8(0x215)]},_0x262181=>{}),updateBotManager(),config={..._0x154fc0},proxyEmit(_0x5605b8(0x1f2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0xdaeaf0)await reset(_0x125414,!![]);else _0x1f0a73||_0x2c90b4?await reset(_0x125414,![]):getBalances();blockTransactionDetection=![],logger[_0x5605b8(0x2e4)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x5f0d19){const _0x5099c2=_0x198143,_0x147717={...config,'headless':_0x5f0d19[_0x5099c2(0x1ad)]};let _0x188e25=dbConfig[_0x5099c2(0x223)]('bot')[_0x5099c2(0x2ab)]({'botID':botID})['value']();_0x188e25&&dbConfig['get'](_0x5099c2(0x265))[_0x5099c2(0x2ab)]({'botID':botID})[_0x5099c2(0x1e0)](_0x147717)[_0x5099c2(0x1b2)](),config={..._0x147717},updateBotManager(),proxyEmit(_0x5099c2(0x20d),emittedConfiguration());}async function storeFiat(_0x2c4df2){const _0x5db0d1=_0x198143,_0x46daae={...config,'fiat':_0x2c4df2};let _0x4d4975=dbConfig[_0x5db0d1(0x223)]('bot')[_0x5db0d1(0x2ab)]({'botID':botID})[_0x5db0d1(0x294)]();_0x4d4975&&dbConfig[_0x5db0d1(0x223)](_0x5db0d1(0x265))[_0x5db0d1(0x2ab)]({'botID':botID})['assign'](_0x46daae)[_0x5db0d1(0x1b2)](),config={..._0x46daae},proxyEmit(_0x5db0d1(0x20d),emittedConfiguration());}function resetHistory(){const _0x18c8e1=_0x198143;logger[_0x18c8e1(0x221)]('Resetting\x20bot\x20history');try{if(fs['existsSync'](path['join'](configpath,'bot-'+botID+_0x18c8e1(0x287))))fs[_0x18c8e1(0x20c)](path[_0x18c8e1(0x2b2)](configpath,_0x18c8e1(0x252)+botID+_0x18c8e1(0x287)));if(fs[_0x18c8e1(0x19f)](path[_0x18c8e1(0x2b2)](configpath,_0x18c8e1(0x252)+botID+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0x18c8e1(0x252)+botID+_0x18c8e1(0x18e)));if(fs[_0x18c8e1(0x19f)](path[_0x18c8e1(0x2b2)](configpath,_0x18c8e1(0x252)+botID+'-results.json')))fs['unlinkSync'](path[_0x18c8e1(0x2b2)](configpath,_0x18c8e1(0x252)+botID+_0x18c8e1(0x1a3)));}catch(_0x4e5d3c){if(_0x4e5d3c)logger[_0x18c8e1(0x221)](_0x18c8e1(0x2d5),_0x4e5d3c);}const _0x133d82=getDate();let _0x140f00=[];currentCoins[_0x18c8e1(0x1ed)](_0x4f3395=>{const _0x1a2cb1=_0x18c8e1;_0x140f00[_0x1a2cb1(0x24f)]({'coin':_0x4f3395[_0x1a2cb1(0x289)],'number':_0x4f3395[_0x1a2cb1(0x214)],'price':_0x4f3395[_0x1a2cb1(0x203)]});});let _0x1239c0=dbConfig['get']('bot')[_0x18c8e1(0x2ab)]({'botID':botID})[_0x18c8e1(0x294)]();_0x1239c0&&(dbConfig[_0x18c8e1(0x223)](_0x18c8e1(0x265))[_0x18c8e1(0x2ab)]({'botID':botID})[_0x18c8e1(0x1e0)]({'liquidity':[{'date':_0x133d82,'changes':_0x140f00}]})[_0x18c8e1(0x1b2)](),config['liquidity']=[]),process[_0x18c8e1(0x26b)]({'stop':_0x18c8e1(0x23d)},_0x341b6e=>{});}function noslash(_0x4c3560){const _0x28816c=_0x198143;return _0x4c3560[_0x28816c(0x216)]('/','');}function updateHighestFee(_0x1335fc,_0x3385e9){const _0x45b510=_0x198143;lastFees[_0x45b510(0x1d0)]=_0x1335fc,lastFees[_0x45b510(0x19a)][_0x45b510(0x2a8)]===0x14&&lastFees[_0x45b510(0x19a)][_0x45b510(0x278)](),lastFees[_0x45b510(0x19a)][_0x45b510(0x24f)](_0x3385e9),lastFees[_0x45b510(0x28c)]=Math[_0x45b510(0x220)](...lastFees['recent20']);}async function updateNumberCoinsCcxt(_0x1fc3eb){const _0x533a43=_0x198143;logger[_0x533a43(0x2e4)](_0x533a43(0x2f0)+_0x1fc3eb[_0x533a43(0x1a6)]+'\x20|\x20'+_0x1fc3eb['status']+'\x20|\x20'+_0x1fc3eb['id']+_0x533a43(0x1e5)+_0x1fc3eb[_0x533a43(0x27d)]);let _0x532465=_0x1fc3eb[_0x533a43(0x1de)],_0x4773dd=![];currentCoins['forEach'](_0x201fe3=>{const _0x44474f=_0x533a43;_0x201fe3[_0x44474f(0x1a6)]==_0x1fc3eb[_0x44474f(0x1a6)]&&(_0x4773dd=!![]);});if(!_0x4773dd)return;const _0x3cf82b=currentCoins['find'](_0x41616a=>_0x41616a[_0x533a43(0x1a6)]==_0x1fc3eb['symbol']),_0x2a6ee9=_0x88600f=>{if(_0x3cf82b)_0x3cf82b['orderstatus']=_0x88600f;};if(_0x532465==_0x533a43(0x2c1))_0x2a6ee9(_0x533a43(0x2c1));else{if(_0x532465=='canceled'){_0x2a6ee9(_0x533a43(0x1d4));const _0x193040=await getCoins();[currentCoins,currentCoinsAll]=_0x193040,await getOpenOrders(),handleOpenOrders();}else{if(_0x532465==_0x533a43(0x1ff)){logger[_0x533a43(0x2e4)](_0x533a43(0x187)+_0x1fc3eb['symbol']+_0x533a43(0x1e5)+_0x1fc3eb[_0x533a43(0x201)]+_0x533a43(0x1e5)+_0x1fc3eb['id']+_0x533a43(0x1e5)+_0x1fc3eb[_0x533a43(0x27d)]);let _0x60688c=![];if(lastOrders)lastOrders[_0x533a43(0x1ed)](async _0x163d86=>{const _0x5324a0=_0x533a43;if(_0x163d86[_0x5324a0(0x1db)]==_0x1fc3eb[_0x5324a0(0x27d)][_0x5324a0(0x1e9)]()){logger[_0x5324a0(0x2e4)](_0x5324a0(0x1bc)+_0x1fc3eb['clientOrderId']),_0x60688c=!![];if(_0x163d86[_0x5324a0(0x201)]==0x0){logger[_0x5324a0(0x2e4)](_0x5324a0(0x2d8)+_0x1fc3eb[_0x5324a0(0x27d)]);if(_0x1fc3eb[_0x5324a0(0x272)])_0x163d86[_0x5324a0(0x1e8)]=_0x1fc3eb['average'];else{if(_0x1fc3eb[_0x5324a0(0x1e8)])_0x163d86[_0x5324a0(0x1e8)]=_0x1fc3eb[_0x5324a0(0x1e8)];else{}}_0x163d86['filled']=_0x1fc3eb['filled'],_0x163d86['fee']={'currency':_0x1fc3eb[_0x5324a0(0x282)]?_0x1fc3eb[_0x5324a0(0x282)]['currency']:null,'cost':_0x1fc3eb[_0x5324a0(0x282)]?_0x1fc3eb[_0x5324a0(0x282)][_0x5324a0(0x2fe)]:0x0},updateHighestFee(_0x163d86[_0x5324a0(0x282)][_0x5324a0(0x1d0)],_0x163d86['fee']['cost']),_0x2a6ee9('filled'),await validateOrders();if(lockOrders==ORDERS[_0x5324a0(0x2e8)]){const _0x4345ee=await getCoins();[currentCoins,currentCoinsAll]=_0x4345ee;}await updateCoinResults(_0x163d86);}}});if(!_0x60688c){logger[_0x533a43(0x2e4)]('2\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x1fc3eb['id']),_0x2a6ee9('filled');const _0xd5bf78=await getCoins();[currentCoins,currentCoinsAll]=_0xd5bf78,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x1f77e6=JSON[_0x533a43(0x254)](lastBalances[_0x533a43(0x26e)]);const _0x44fefe=_0x1f77e6[_0x533a43(0x2ab)](_0x259484=>_0x259484[_0x533a43(0x1a6)]==_0x1fc3eb[_0x533a43(0x1a6)]);if(_0x44fefe){if(_0x532465==_0x533a43(0x2c1))_0x44fefe['orderstatus']=_0x44fefe['orderstatus']==_0x533a43(0x201)?'filled':_0x533a43(0x2c1);else{if(_0x532465=='canceled')_0x44fefe[_0x533a43(0x2a3)]=_0x44fefe['orderstatus']==_0x533a43(0x201)?_0x533a43(0x201):'canceled';else _0x532465==_0x533a43(0x1ff)&&(_0x44fefe[_0x533a43(0x2a3)]=_0x533a43(0x201));}}lastBalances={...lastBalances,'portfolio':JSON[_0x533a43(0x235)](_0x1f77e6)},proxyEmit(_0x533a43(0x280),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x12aa46=_0x198143;await getOpenOrders();let _0x3b8803=![];currentCoins[_0x12aa46(0x1ed)](_0x2595e3=>{const _0x2fe5f6=_0x12aa46;_0x3b8803=allOpenOrders[_0x2fe5f6(0x2ab)](_0x337b63=>_0x337b63[_0x2fe5f6(0x1a6)]==_0x2595e3[_0x2fe5f6(0x1a6)]),_0x2595e3['orderstatus']=_0x3b8803?_0x2fe5f6(0x2c1):'none';});}async function getCoins(_0x1e3b85=!![],_0x50bdaa=config['basecoin']){const _0x13f3df=_0x198143;let _0x2c3aa9,_0xaa6aa6=[],_0xd8897a=[],_0x49bebb=[],_0x26c3f6=[];if(botPaused)return[currentCoins,currentCoinsAll];try{_0x2c3aa9=await exchange['fetchBalance'](),mybalances=_0x2c3aa9[_0x13f3df(0x234)];for(const [_0x36a9c1,_0x59d454]of Object['entries'](mybalances)){_0x26c3f6[_0x13f3df(0x24f)](_0x36a9c1);}if(_0x50bdaa=='')for(const [_0x4ae458,_0x6c27ec]of Object[_0x13f3df(0x2d4)](mybalances)){_0x6c27ec[_0x13f3df(0x1e9)]()!=0x0&&_0xd8897a['push']({'coin':_0x4ae458});}else{let _0x30aef9=![];for(const [_0x5d9f82,_0x1268e5]of Object[_0x13f3df(0x2d4)](mybalances)){if(_0x26c3f6[_0x13f3df(0x1cf)](_0x5d9f82)){const _0x76151e=config[_0x13f3df(0x26e)][_0x13f3df(0x2ab)](_0x4527ad=>_0x4527ad[_0x13f3df(0x289)]==_0x5d9f82),_0x33b60c=_0x5d9f82+'/'+_0x50bdaa,_0x2e42ff=_0x50bdaa+'/'+_0x5d9f82,_0x38aa92=currentCoins['find'](_0x217d2c=>_0x217d2c[_0x13f3df(0x289)]==_0x5d9f82);_0x30aef9=![];if((_0x1268e5[_0x13f3df(0x1e9)]()!=0x0||_0x76151e)&&(allSymbols['includes'](_0x33b60c)||_0x5d9f82==_0x50bdaa))_0x5d9f82!=_0x50bdaa&&_0xaa6aa6[_0x13f3df(0x24f)](_0x33b60c),_0xd8897a[_0x13f3df(0x24f)]({'coin':_0x5d9f82,'symbol':_0x33b60c,'reverse':![],'number':Math['max'](_0x1268e5+(_0x76151e&&_0x76151e['offset']||0x0),0x0),'orderstatus':_0x38aa92?_0x38aa92[_0x13f3df(0x2a3)]:_0x13f3df(0x211)});else(_0x1268e5[_0x13f3df(0x1e9)]()!=0x0||_0x76151e)&&allSymbols[_0x13f3df(0x1cf)](_0x2e42ff)&&(_0x5d9f82!=_0x50bdaa&&_0xaa6aa6[_0x13f3df(0x24f)](_0x2e42ff),_0xd8897a[_0x13f3df(0x24f)]({'coin':_0x5d9f82,'symbol':_0x2e42ff,'reverse':!![],'number':Math[_0x13f3df(0x220)](_0x1268e5+(_0x76151e&&_0x76151e['offset']||0x0),0x0),'orderstatus':_0x38aa92?_0x38aa92[_0x13f3df(0x2a3)]:'none'}));}}}}catch(_0x12128f){if(!_0x1e3b85)handleErrorNoStop(_0x12128f,_0x13f3df(0x29d));else await handleError(_0x12128f,_0x13f3df(0x29d));}return _0x49bebb=cloneDeep(_0xd8897a),_0xd8897a=_0xd8897a[_0x13f3df(0x266)](_0x328934=>{const _0x3127cb=_0x13f3df,_0x17b091=config['portfolio'][_0x3127cb(0x2ab)](_0x15fc68=>_0x15fc68['coin']==_0x328934[_0x3127cb(0x289)]);return _0x17b091&&!_0x17b091[_0x3127cb(0x1f9)];}),[_0xd8897a,_0x49bebb];}async function getCoinNumber(_0x2080fc){const _0x589cec=_0x198143;let _0x1c5d7e;try{const _0x1a3743=await exchange[_0x589cec(0x1bd)]();_0x1c5d7e=_0x1a3743[_0x589cec(0x234)][_0x2080fc];}catch(_0x3eca5d){await handleError(_0x3eca5d,'getCoinNumber()');}return _0x1c5d7e;}async function getOpenOrders(){const _0x2eefde=_0x198143;let _0x5a3395;allOpenOrders=[];try{for(const _0x41b5b6 of config[_0x2eefde(0x26e)]){!_0x41b5b6['excluded']&&_0x41b5b6[_0x2eefde(0x289)]!=config[_0x2eefde(0x256)]&&(_0x5a3395=await exchange[_0x2eefde(0x1bb)](_0x41b5b6[_0x2eefde(0x1a6)]),_0x5a3395[_0x2eefde(0x2a8)]>0x0&&allOpenOrders['push'](_0x5a3395[0x0]));}}catch(_0x2821b9){await handleError(_0x2821b9,_0x2eefde(0x2b9));}}async function handleOpenOrders(_0x3d4463=0x0){const _0x4ac886=_0x198143;allOpenOrders[_0x4ac886(0x2a8)]==0x0&&lockOrders==ORDERS[_0x4ac886(0x2e8)]&&allOrdersPlaced&&(_0x3d4463==0x0?(logger[_0x4ac886(0x2e4)](_0x4ac886(0x242)),_0x3d4463++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger['debug'](_0x4ac886(0x2a1)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x47e55f){const _0x2fda99=_0x198143,_0x152e28=ccxt[_0x47e55f[_0x2fda99(0x245)][_0x2fda99(0x28e)]()],_0x5f5b98=new _0x152e28({'apiKey':_0x47e55f[_0x2fda99(0x1b3)],'secret':_0x47e55f[_0x2fda99(0x247)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![]});if(_0x47e55f[_0x2fda99(0x1fa)])_0x5f5b98[_0x2fda99(0x204)]=_0x47e55f[_0x2fda99(0x1fa)];try{await _0x5f5b98[_0x2fda99(0x1df)]();}catch(_0x1c3eb8){throw _0x1c3eb8;}}function cloneDeep(_0xb63e0a){const _0x3af7fe=_0x198143;return JSON[_0x3af7fe(0x254)](JSON[_0x3af7fe(0x235)](_0xb63e0a));}async function getPortfolio(_0x5014f8){const _0x45ea50=_0x198143;let _0x4303fa=[],_0x405337=[],_0x5d3598=[],_0x1aa32a;if(_0x5014f8[_0x45ea50(0x1b3)]!=='************'||_0x5014f8[_0x45ea50(0x247)]!==_0x45ea50(0x297)||_0x5014f8[_0x45ea50(0x1fa)]&&_0x5014f8[_0x45ea50(0x1fa)]!==_0x45ea50(0x297)){if(config['exchange']){if(_0x5014f8['apiKey']==_0x45ea50(0x297))_0x5014f8['apiKey']=config['apiKey'];if(_0x5014f8['apiSecret']=='************')_0x5014f8[_0x45ea50(0x247)]=config[_0x45ea50(0x247)];if(_0x5014f8['apiPassword']=='************')_0x5014f8[_0x45ea50(0x1fa)]=config[_0x45ea50(0x1fa)];try{await testAPI(_0x5014f8);}catch(_0x243f22){if(_0x243f22[_0x45ea50(0x1e9)]()['includes'](_0x45ea50(0x20f))){logger[_0x45ea50(0x2e4)](_0x45ea50(0x219)),proxyEmit(_0x45ea50(0x26e),![]);return;}else{handleError(_0x243f22,'getPortfolio(0)');return;}}}await initExchange(_0x5014f8[_0x45ea50(0x245)],_0x5014f8[_0x45ea50(0x1b3)],_0x5014f8[_0x45ea50(0x247)],_0x5014f8[_0x45ea50(0x1fa)]);try{await loadSymbols(_0x5014f8[_0x45ea50(0x245)],!![]);}catch(_0x477132){if(_0x477132[_0x45ea50(0x1e9)]()[_0x45ea50(0x1cf)](_0x45ea50(0x20f))){proxyEmit(_0x45ea50(0x26e),![]);return;}else{handleError(_0x477132,_0x45ea50(0x1c1));return;}}const _0x1f816e=await getCoins(![],_0x5014f8[_0x45ea50(0x256)]);_0x5d3598=cloneDeep(_0x1f816e[0x1]);}else _0x5d3598=cloneDeep(currentCoinsAll);if(_0x5014f8[_0x45ea50(0x256)]=='')proxyEmit(_0x45ea50(0x26e),_0x5d3598);else{_0x5d3598[_0x45ea50(0x1ed)](_0x298db0=>{const _0x3cf109=_0x45ea50;if(_0x298db0[_0x3cf109(0x289)]!=_0x5014f8['basecoin'])_0x4303fa[_0x3cf109(0x24f)](_0x298db0[_0x3cf109(0x1a6)]);});try{_0x405337=await exchange['fetchTickers'](_0x4303fa);}catch(_0x4b3fe4){if(_0x4b3fe4['toString']()[_0x45ea50(0x1cf)](_0x45ea50(0x20f))){proxyEmit(_0x45ea50(0x26e),![]);return;}else{handleError(_0x4b3fe4,_0x45ea50(0x241));return;}}_0x5d3598[_0x45ea50(0x1ed)](_0x2e2fdf=>{const _0x58ba34=_0x45ea50;_0x2e2fdf[_0x58ba34(0x289)]!=_0x5014f8[_0x58ba34(0x256)]?_0x1aa32a=_0x2e2fdf[_0x58ba34(0x1c3)]?0x1/_0x405337[_0x2e2fdf[_0x58ba34(0x1a6)]][_0x58ba34(0x203)]:_0x405337[_0x2e2fdf['symbol']][_0x58ba34(0x203)]:_0x1aa32a=0x1,_0x2e2fdf[_0x58ba34(0x1e8)]=formatResult(_0x1aa32a,0x8);}),proxyEmit(_0x45ea50(0x26e),_0x5d3598);}}function truncateTradeAmount(_0x5b1bb7,_0x49f571){const _0x3dbd2c=_0x198143;let _0x37d8cd=0x0;try{_0x37d8cd=exchange[_0x3dbd2c(0x2bb)](_0x5b1bb7,_0x49f571);}catch(_0x12b9af){}return _0x37d8cd;}function checkMinimums(_0x3095b5){const _0x4f8952=_0x198143;let _0x251a46=!![];const _0x50f550=!_0x3095b5[_0x4f8952(0x1c3)]?markets[_0x3095b5[_0x4f8952(0x1a6)]][_0x4f8952(0x21b)][_0x4f8952(0x1f8)][_0x4f8952(0x1c6)]:markets[_0x3095b5['symbol']][_0x4f8952(0x21b)][_0x4f8952(0x2fe)][_0x4f8952(0x1c6)],_0x24d3c0=!_0x3095b5['reverse']?markets[_0x3095b5[_0x4f8952(0x1a6)]][_0x4f8952(0x21b)][_0x4f8952(0x2fe)]['min']:markets[_0x3095b5[_0x4f8952(0x1a6)]][_0x4f8952(0x21b)][_0x4f8952(0x1f8)][_0x4f8952(0x1c6)],_0x1b6fde=truncateTradeAmount(_0x3095b5[_0x4f8952(0x1a6)],_0x3095b5['trade']);_0x3095b5[_0x4f8952(0x1d1)]=_0x1b6fde;if(Math[_0x4f8952(0x1a7)](_0x1b6fde)<_0x50f550)_0x251a46=![];if(Math['abs'](_0x1b6fde)*_0x3095b5[_0x4f8952(0x203)]<_0x24d3c0)_0x251a46=![];if(_0x3095b5[_0x4f8952(0x244)]==_0x4f8952(0x1d7)){let _0x2d7590=config[_0x4f8952(0x26e)][_0x4f8952(0x2ab)](_0x3516f7=>_0x3516f7[_0x4f8952(0x289)]==_0x3095b5['coin']);if(_0x2d7590[_0x4f8952(0x194)]>0x0){if(Math['abs'](_0x1b6fde)>_0x3095b5[_0x4f8952(0x214)]-_0x2d7590[_0x4f8952(0x194)])_0x251a46=![];}else{if(Math[_0x4f8952(0x1a7)](_0x1b6fde)>_0x3095b5[_0x4f8952(0x214)])_0x251a46=![];}}if(_0x3095b5[_0x4f8952(0x244)]==_0x4f8952(0x1a0)){let _0x1c8e3b=config[_0x4f8952(0x26e)][_0x4f8952(0x2ab)](_0xfe803d=>_0xfe803d[_0x4f8952(0x289)]==config[_0x4f8952(0x256)]),_0x4f8fa0=currentCoins[_0x4f8952(0x2ab)](_0x4467d1=>_0x4467d1[_0x4f8952(0x289)]==config[_0x4f8952(0x256)]);if(_0x1c8e3b['offset']>0x0){if(Math['abs'](_0x1b6fde)*_0x3095b5[_0x4f8952(0x203)]>_0x4f8fa0[_0x4f8952(0x214)]-_0x1c8e3b[_0x4f8952(0x194)])_0x251a46=![];}else{if(Math['abs'](_0x1b6fde)*_0x3095b5['last']>_0x4f8fa0[_0x4f8952(0x214)])_0x251a46=![];}}return _0x251a46;}async function getBalances(_0x5eb6ff=!![]){const _0x118156=_0x198143;let _0x1459bb=0x0,_0x303b5c;const _0x4fa3c1=config[_0x118156(0x21f)];if(config[_0x118156(0x1ad)]&&config[_0x118156(0x19e)]<0x0)await validate24hChanges();currentCoins[_0x118156(0x1ed)](_0x2ad86f=>{const _0xfcd8ae=_0x118156;if(_0x2ad86f['coin']!=config['basecoin']){let _0x20e0a2=global[_0xfcd8ae(0x1e2)][noslash(_0x2ad86f[_0xfcd8ae(0x1a6)])];_0x303b5c=_0x2ad86f[_0xfcd8ae(0x1c3)]?0x1/_0x20e0a2:_0x20e0a2;}else _0x303b5c=0x1;let _0x5ec9e4=_0x2ad86f[_0xfcd8ae(0x214)]*_0x303b5c;_0x1459bb+=_0x5ec9e4,_0x2ad86f[_0xfcd8ae(0x203)]=formatResult(Number(_0x303b5c),0x8),_0x2ad86f[_0xfcd8ae(0x294)]=_0x5ec9e4;}),currentCoins[_0x118156(0x1ed)](_0x1eed28=>{const _0x4f3ab5=_0x118156;let _0x5424e6=config[_0x4f3ab5(0x26e)][_0x4f3ab5(0x2ab)](_0x434277=>_0x434277[_0x4f3ab5(0x289)]==_0x1eed28[_0x4f3ab5(0x289)]),_0x3a801a=Number(_0x5424e6['distribution']),_0x17b19b=_0x1eed28[_0x4f3ab5(0x294)]/_0x1459bb*0x64,_0x332d4b=_0x3a801a*_0x1459bb/0x64/_0x1eed28[_0x4f3ab5(0x203)]-_0x1eed28[_0x4f3ab5(0x214)];_0x1eed28[_0x4f3ab5(0x277)]=formatResult(_0x17b19b,0x3),_0x1eed28[_0x4f3ab5(0x2ff)]=formatResult(_0x3a801a,0x3),_0x1eed28[_0x4f3ab5(0x1d1)]=formatResult(_0x332d4b,0x8),_0x1eed28[_0x4f3ab5(0x244)]='',_0x1eed28['valid']=![];if(_0x1eed28[_0x4f3ab5(0x289)]!=config[_0x4f3ab5(0x256)]){if(_0x1eed28[_0x4f3ab5(0x277)]>_0x3a801a)_0x1eed28[_0x4f3ab5(0x244)]=_0x4f3ab5(0x1d7),_0x1eed28[_0x4f3ab5(0x1be)]=checkMinimums(_0x1eed28);else _0x1eed28[_0x4f3ab5(0x277)]<_0x3a801a&&(_0x1eed28[_0x4f3ab5(0x244)]=_0x4f3ab5(0x1a0),_0x1eed28['valid']=checkMinimums(_0x1eed28));}_0x1eed28[_0x4f3ab5(0x283)]=_0x1eed28[_0x4f3ab5(0x277)]/_0x1eed28[_0x4f3ab5(0x2ff)]-0x1;if(_0x1eed28['orderstatus']=='filled'||_0x1eed28[_0x4f3ab5(0x2a3)]==_0x4f3ab5(0x1d4))_0x1eed28[_0x4f3ab5(0x2a3)]=_0x4f3ab5(0x211);}),currentCoins[_0x118156(0x1b6)]((_0xb7bc1e,_0x422b89)=>_0xb7bc1e['delta']<_0x422b89[_0x118156(0x283)]?0x1:_0x422b89[_0x118156(0x283)]<_0xb7bc1e['delta']?-0x1:0x0);const _0x36f0fe=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x36f0fe[_0x118156(0x1f4)],'usd':_0x36f0fe[_0x118156(0x213)],'portfolio':JSON[_0x118156(0x235)](currentCoins),'threshold':_0x4fa3c1},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x5eb6ff){if(config[_0x118156(0x1ad)])headlessMode({'portfolio':currentCoins,'threshold':_0x4fa3c1});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x4fa3c1});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x168b1e=getNormalizedPerformance();getStartingBalances(_0x168b1e),emitPerformance(_0x168b1e);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x89aaba=getNormalizedPerformance();emitPerformance(_0x89aaba),getStartingBalances(_0x89aaba),logger[_0x118156(0x2e4)](_0x118156(0x2ac));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x556de3=_0x198143;if(!lastBalances)return;let _0x12de22=[],_0x57f08d,_0x673e17=JSON['parse'](lastBalances[_0x556de3(0x26e)]);_0x673e17[_0x556de3(0x1b6)]((_0x5d0a66,_0x1c506e)=>_0x5d0a66[_0x556de3(0x289)]>_0x1c506e['coin']?0x1:_0x1c506e['coin']>_0x5d0a66[_0x556de3(0x289)]?-0x1:0x0),_0x673e17[_0x556de3(0x1ed)](_0xe88bea=>{const _0x1aa67e=_0x556de3;let _0x5e1c0d={'coin':_0xe88bea[_0x1aa67e(0x289)],'number':_0xe88bea[_0x1aa67e(0x214)],'price':_0xe88bea[_0x1aa67e(0x203)]};_0x12de22[_0x1aa67e(0x24f)](_0x5e1c0d);});const _0x4f155b=await getFiat();_0x57f08d={'date':lastBalances[_0x556de3(0x209)][_0x556de3(0x24a)]('\x20')[0x0],'eur':_0x4f155b[_0x556de3(0x1f4)],'usd':_0x4f155b[_0x556de3(0x213)],'coins':_0x12de22};let _0x3c730b=dbPerformance[_0x556de3(0x223)](_0x556de3(0x1ee))[_0x556de3(0x2ab)]({'date':_0x57f08d[_0x556de3(0x2b5)]})[_0x556de3(0x294)]();_0x3c730b?_0x57f08d['date']!=config['startdate']&&dbPerformance[_0x556de3(0x223)](_0x556de3(0x1ee))[_0x556de3(0x2ab)]({'date':_0x57f08d[_0x556de3(0x2b5)]})[_0x556de3(0x1e0)](_0x57f08d)['write']():dbPerformance['get'](_0x556de3(0x1ee))['push'](_0x57f08d)[_0x556de3(0x1b2)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x39fc6e=_0x198143;let _0x2b416e=[];if(dbPerformance[_0x39fc6e(0x1fd)](_0x39fc6e(0x1ee))[_0x39fc6e(0x294)]()){let _0x3c2966=dbPerformance[_0x39fc6e(0x223)]('data')['cloneDeep']()[_0x39fc6e(0x266)](_0x484421=>{const _0xf90735=_0x39fc6e;if(_0x484421[_0xf90735(0x2d0)][_0xf90735(0x2a8)]==0x0)return![];else return!![];})['sortBy'](_0x39fc6e(0x2b5))['value'](),_0x2ca72d=[...config[_0x39fc6e(0x2b3)]];_0x2ca72d['sort']((_0x17c4c6,_0x587632)=>_0x17c4c6['date']>_0x587632['date']?-0x1:_0x587632[_0x39fc6e(0x2b5)]>_0x17c4c6['date']?0x1:0x0);let _0x180fa0=0x1,_0x2d346e=[],_0x3cf324=0x0;_0x3c2966[_0x39fc6e(0x1af)]()['reverse']()[_0x39fc6e(0x1ed)]((_0x3bad63,_0x2d0776)=>{const _0x359202=_0x39fc6e;if(_0x2ca72d[_0x3cf324]){if(_0x3c2966[_0x3c2966[_0x359202(0x2a8)]-_0x2d0776]&&_0x2ca72d[_0x3cf324][_0x359202(0x2b5)]==_0x3c2966[_0x3c2966[_0x359202(0x2a8)]-_0x2d0776][_0x359202(0x2b5)]){if(_0x2d0776<_0x3c2966[_0x359202(0x2a8)]){let _0x334fe2=0x0,_0x4b7b23=0x0;_0x3c2966[_0x3c2966[_0x359202(0x2a8)]-_0x2d0776][_0x359202(0x2d0)][_0x359202(0x1ed)](_0x56087d=>{const _0x21e86d=_0x359202;_0x4b7b23+=_0x56087d[_0x21e86d(0x214)]*_0x56087d['price'];}),_0x2ca72d[_0x3cf324][_0x359202(0x1cb)]['forEach'](_0x5e76a6=>{const _0x2772be=_0x359202;_0x334fe2+=_0x5e76a6[_0x2772be(0x214)]*_0x5e76a6['price'];}),_0x180fa0*=_0x334fe2/(_0x4b7b23-_0x334fe2)+0x1;}_0x3cf324++;}}let _0x24cccb=0x0;_0x3bad63[_0x359202(0x2d0)][_0x359202(0x1ed)](_0x419ee0=>{const _0x25bfa7=_0x359202;_0x24cccb+=_0x419ee0[_0x25bfa7(0x214)]*_0x419ee0[_0x25bfa7(0x1e8)];}),_0x2d346e[_0x3c2966[_0x359202(0x2a8)]-_0x2d0776-0x1]=_0x24cccb*(_0x180fa0-0x1);});let _0x14fa4d=[];_0x2ca72d=[...config[_0x39fc6e(0x2b3)]]||[];let _0x4309b1=0x0;_0x3cf324=0x0,_0x3c2966[_0x39fc6e(0x1ed)]((_0x3784d7,_0x51428d)=>{const _0x302244=_0x39fc6e;if(_0x2ca72d[_0x3cf324]){const _0x251bcb=fns[_0x302244(0x254)](_0x2ca72d[_0x3cf324][_0x302244(0x2b5)],_0x302244(0x285),new Date()),_0x2fd48e=fns['parse'](_0x3784d7[_0x302244(0x2b5)],_0x302244(0x285),new Date());if(fns[_0x302244(0x2c2)](_0x251bcb,_0x2fd48e)){let _0x40a762=0x0;_0x2ca72d[_0x3cf324][_0x302244(0x1cb)][_0x302244(0x1ed)](_0x58f21d=>{const _0x3da7d9=_0x302244;!_0x14fa4d[_0x58f21d[_0x3da7d9(0x289)]]?_0x14fa4d[_0x58f21d[_0x3da7d9(0x289)]]=_0x58f21d[_0x3da7d9(0x214)]:(_0x40a762=_0x14fa4d[_0x58f21d[_0x3da7d9(0x289)]],_0x14fa4d[_0x58f21d[_0x3da7d9(0x289)]]+=_0x58f21d[_0x3da7d9(0x214)]);const _0x5807e5=_0x3784d7[_0x3da7d9(0x2d0)][_0x3da7d9(0x2ab)](_0x34a3ed=>_0x34a3ed[_0x3da7d9(0x289)]==_0x58f21d[_0x3da7d9(0x289)]);(!_0x5807e5||_0x5807e5[_0x3da7d9(0x214)]==0x0)&&(_0x4309b1+=(-_0x58f21d[_0x3da7d9(0x214)]-_0x40a762)*_0x58f21d[_0x3da7d9(0x1e8)]);}),_0x3cf324++;}}_0x3784d7[_0x302244(0x2d0)]['forEach']((_0x15c190,_0x46e991)=>{const _0x364c1a=_0x302244;_0x14fa4d[_0x15c190[_0x364c1a(0x289)]]&&(_0x15c190[_0x364c1a(0x1b7)]=_0x14fa4d[_0x15c190[_0x364c1a(0x289)]]);}),_0x2b416e[_0x302244(0x24f)]({'date':_0x3784d7['date'],'eur':_0x3784d7[_0x302244(0x1f4)],'usd':_0x3784d7[_0x302244(0x213)],'offset':_0x2d346e[_0x51428d],'netoffset':_0x4309b1,'coins':_0x3784d7[_0x302244(0x2d0)]});});}return _0x2b416e;}function emitPerformance(_0xc8efe0){const _0x251be8=_0x198143;_0xc8efe0[_0x251be8(0x2a8)]!==0x0?(proxyEmit('performance',_0xc8efe0),lastPerformanceEmitted=getDate()):proxyEmit(_0x251be8(0x2be),[]);}function getPerf(_0x412c58,_0xbd967b){const _0x343d7e=_0x198143;let _0x364f3a=0x0,_0x49931e=0x0,_0x1e668f=0x0;_0x412c58['coins']['forEach'](_0x1ae603=>{const _0xb03cfb=_0x4282;_0x364f3a+=_0x1ae603['number']*_0x1ae603[_0xb03cfb(0x1e8)];});_0xbd967b&&(_0x364f3a+=_0x412c58[_0x343d7e(0x194)]);if(config[_0x343d7e(0x256)]===_0x343d7e(0x307)||config['basecoin']===_0x343d7e(0x296))_0x49931e=_0x364f3a*_0x412c58[_0x343d7e(0x1f4)],_0x1e668f=_0x364f3a*_0x412c58[_0x343d7e(0x213)];else{if(config[_0x343d7e(0x256)]===_0x343d7e(0x2da)||config[_0x343d7e(0x256)]===_0x343d7e(0x2a9)||config[_0x343d7e(0x256)]==='USD')_0x49931e=_0x364f3a*_0x412c58[_0x343d7e(0x1f4)]/_0x412c58[_0x343d7e(0x213)],_0x1e668f=_0x364f3a;else config[_0x343d7e(0x256)]==='EUR'&&(_0x49931e=_0x364f3a,_0x1e668f=_0x364f3a*_0x412c58['usd']/_0x412c58[_0x343d7e(0x1f4)]);}return[_0x364f3a,_0x49931e,_0x1e668f];}function getKPIs(_0x3ba95e,_0x26e97a=_0x198143(0x222)){const _0x5c535f=_0x198143,_0x592b77=config[_0x5c535f(0x256)],_0x3655ce=lastBalances,_0x100d50=currentCoins,_0x494ae3=getNormalizedPerformance(),_0x235ba1=_0x3ba95e===_0x5c535f(0x256)?_0x592b77:_0x3ba95e===_0x5c535f(0x1d2)||_0x3ba95e==='net-fiat'?_0x26e97a:_0x5c535f(0x27b)+_0x592b77,_0x5018d8=_0x3ba95e===_0x5c535f(0x1fe)?'Net\x20effect':_0x3ba95e==='net-fiat'?'Net\x20effect':_0x235ba1+_0x5c535f(0x2e3),_0x2c2c6c=_0x3ba95e===_0x5c535f(0x1fe)||_0x3ba95e===_0x5c535f(0x309)?_0x5c535f(0x1eb):_0x235ba1+_0x5c535f(0x288);let _0x5c18c8=0x0;_0x100d50[_0x5c535f(0x1ed)](_0x2fc28b=>{const _0x20d646=_0x5c535f;_0x5c18c8+=_0x2fc28b['number']*_0x2fc28b[_0x20d646(0x203)];});if(_0x3ba95e===_0x5c535f(0x1d2)||_0x3ba95e===_0x5c535f(0x309)){if(_0x592b77===_0x5c535f(0x307)||_0x592b77===_0x5c535f(0x296))_0x5c18c8=_0x5c18c8*(_0x26e97a===_0x5c535f(0x222)?_0x3655ce['eur']:_0x3655ce[_0x5c535f(0x213)]);else{if(_0x592b77===_0x5c535f(0x2da)||_0x592b77===_0x5c535f(0x2a9)||_0x592b77===_0x5c535f(0x2e1))_0x5c18c8=_0x5c18c8*(_0x26e97a===_0x5c535f(0x222)?_0x3655ce[_0x5c535f(0x1f4)]/_0x3655ce[_0x5c535f(0x213)]:0x1);else _0x592b77===_0x5c535f(0x222)&&(_0x5c18c8=_0x5c18c8*(_0x26e97a===_0x5c535f(0x222)?0x1:_0x3655ce[_0x5c535f(0x213)]/_0x3655ce['eur']));}}let _0x3ad91b;if(_0x5c18c8!==0x0){if(_0x3ba95e===_0x5c535f(0x256))_0x3ad91b=(_0x5c18c8/startingBalances['basecoin']-0x1)*0x64;else{if(_0x26e97a===_0x5c535f(0x222))_0x3ad91b=(_0x5c18c8/startingBalances[_0x5c535f(0x1f4)]-0x1)*0x64;else _0x3ad91b=(_0x5c18c8/startingBalances[_0x5c535f(0x213)]-0x1)*0x64;}let _0x262e23=0x0;if(startingBalances['coins'])_0x100d50[_0x5c535f(0x1ed)](_0x1fb7fe=>{const _0x1719c1=_0x5c535f;let _0x16b71a=startingBalances[_0x1719c1(0x2d0)]['find'](_0xcc96e2=>_0xcc96e2['coin']===_0x1fb7fe[_0x1719c1(0x289)]);if(_0x16b71a&&_0x16b71a[_0x1719c1(0x289)]&&_0x1fb7fe[_0x1719c1(0x214)]!==0x0)_0x262e23+=_0x16b71a[_0x1719c1(0x214)]*_0x1fb7fe[_0x1719c1(0x203)];});let _0x53ddf2=0x0;if(_0x494ae3[_0x5c535f(0x2a8)]!==0x0){let _0x4634df=_0x494ae3[_0x494ae3['length']-0x1];_0x53ddf2=_0x4634df[_0x5c535f(0x2f8)];}_0x262e23-=_0x53ddf2;_0x3ba95e===_0x5c535f(0x1fe)&&(_0x3ad91b=(_0x5c18c8-_0x262e23)/startingBalances[_0x5c535f(0x256)]*0x64,_0x5c18c8=_0x5c18c8-_0x262e23);if(_0x3ba95e===_0x5c535f(0x309)){let _0x161cec=_0x26e97a===_0x5c535f(0x222)?startingBalances['eur']:startingBalances['usd'];if(_0x592b77==='BTC'||_0x592b77===_0x5c535f(0x296))_0x262e23=_0x26e97a===_0x5c535f(0x222)?_0x262e23*_0x3655ce[_0x5c535f(0x1f4)]:_0x262e23*_0x3655ce[_0x5c535f(0x213)];else{if(_0x592b77===_0x5c535f(0x2da)||_0x592b77===_0x5c535f(0x2a9)||_0x592b77===_0x5c535f(0x2e1))_0x262e23=_0x26e97a===_0x5c535f(0x222)?_0x262e23*_0x3655ce[_0x5c535f(0x1f4)]/_0x3655ce[_0x5c535f(0x213)]:_0x262e23;else _0x592b77===_0x5c535f(0x222)&&(_0x262e23=_0x26e97a==='EUR'?_0x262e23:_0x262e23*_0x3655ce[_0x5c535f(0x213)]/_0x3655ce['eur']);}_0x3ad91b=(_0x5c18c8-_0x262e23)/_0x161cec*0x64,_0x5c18c8=_0x5c18c8-_0x262e23;}if(_0x3ad91b){if(_0x3ad91b<0x64)_0x3ad91b=_0x3ad91b[_0x5c535f(0x22f)](0x2);else{if(_0x3ad91b<0x3e8)_0x3ad91b=_0x3ad91b[_0x5c535f(0x22f)](0x1);else _0x3ad91b=_0x3ad91b[_0x5c535f(0x22f)](0x0);}}else _0x3ad91b=Number('0')['toFixed'](0x2);if(_0x5c18c8){if(Math[_0x5c535f(0x1a7)](_0x5c18c8)<0.000001)_0x5c18c8=_0x5c18c8[_0x5c535f(0x22f)](0x2);else{if(Math[_0x5c535f(0x1a7)](_0x5c18c8)<0.1)_0x5c18c8=_0x5c18c8[_0x5c535f(0x22f)](0x6);else{if(Math[_0x5c535f(0x1a7)](_0x5c18c8)<0x1)_0x5c18c8=_0x5c18c8[_0x5c535f(0x22f)](0x5);else{if(Math[_0x5c535f(0x1a7)](_0x5c18c8)<0xa)_0x5c18c8=_0x5c18c8[_0x5c535f(0x22f)](0x4);else{if(Math[_0x5c535f(0x1a7)](_0x5c18c8)<0x64)_0x5c18c8=_0x5c18c8[_0x5c535f(0x22f)](0x3);else{if(Math['abs'](_0x5c18c8)<0x3e8)_0x5c18c8=_0x5c18c8['toFixed'](0x2);else _0x5c18c8=_0x5c18c8['toFixed'](0x2);}}}}}}else _0x5c18c8=Number('0')[_0x5c535f(0x22f)](0x2);}else _0x3ad91b=Number('0')[_0x5c535f(0x22f)](0x2);return{'value':_0x5c18c8,'change':_0x3ad91b,'leftTxt':_0x5018d8,'rightTxt':_0x2c2c6c};}async function getStartingBalances(_0x34da85,_0xf69c7a=!![]){const _0x6173d9=_0x198143;if(_0x34da85[_0x6173d9(0x2a8)]!==0x0){const [_0x523376,_0x257ee3,_0x1e3f33]=getPerf(_0x34da85[0x0],!![]);let _0xbafd6e=[];config[_0x6173d9(0x26e)][_0x6173d9(0x1ed)](_0x1aaf01=>{const _0x1f0297=_0x6173d9;let _0x5e117f=0x0,_0x12bf2b;config[_0x1f0297(0x2b3)][_0x1f0297(0x1ed)](_0x4dfb34=>{const _0x2e0f98=_0x1f0297;let _0x456837=_0x4dfb34[_0x2e0f98(0x1cb)][_0x2e0f98(0x2ab)](_0x1426e5=>_0x1426e5[_0x2e0f98(0x289)]==_0x1aaf01[_0x2e0f98(0x289)]);if(_0x456837){_0x5e117f+=_0x456837[_0x2e0f98(0x214)];if(!_0x12bf2b)_0x12bf2b=_0x456837[_0x2e0f98(0x1e8)];}}),_0xbafd6e['push']({'coin':_0x1aaf01['coin'],'number':_0x5e117f,'initialprice':_0x12bf2b});});const _0x694d67={'basecoin':_0x523376,'eur':_0x257ee3,'usd':_0x1e3f33,'coins':_0xbafd6e};if(_0xf69c7a)proxyEmit('starting-balances',_0x694d67);startingBalances=_0x694d67;}}function headlessMode(_0x1584b6){const _0x4fc6d4=_0x198143;let _0x38be2d=_0x1584b6[_0x4fc6d4(0x26e)],_0x52851d=_0x1584b6[_0x4fc6d4(0x21f)],_0x47c9df=[];for(let _0x5254c4 of _0x38be2d){if(_0x5254c4[_0x4fc6d4(0x289)]!=config['basecoin']){if(_0x5254c4[_0x4fc6d4(0x283)]>=_0x52851d/0x64){if(_0x5254c4['valid'])_0x47c9df['push'](_0x5254c4);}else{if(_0x5254c4[_0x4fc6d4(0x283)]<=-_0x52851d/0x64){if(_0x5254c4[_0x4fc6d4(0x1be)])_0x47c9df['push'](_0x5254c4);}}}}_0x47c9df[_0x4fc6d4(0x2a8)]>0x0&&placeOrder(_0x47c9df);}function notifyBalance(_0x5849e4){const _0x127391=_0x198143;let _0x4eb314=_0x5849e4['portfolio'],_0x666913=_0x5849e4['threshold'],_0x48c4e7=[];for(let _0x5077a4 of _0x4eb314){if(_0x5077a4[_0x127391(0x289)]!=config['basecoin']){if(_0x5077a4[_0x127391(0x283)]>=_0x666913/0x64){if(_0x5077a4[_0x127391(0x1be)])_0x48c4e7[_0x127391(0x24f)](_0x5077a4);}else{if(_0x5077a4['delta']<=-_0x666913/0x64){if(_0x5077a4[_0x127391(0x1be)])_0x48c4e7[_0x127391(0x24f)](_0x5077a4);}}}}if(_0x48c4e7[_0x127391(0x2a8)]>0x0){let _0x4232cd=_0x48c4e7[_0x127391(0x250)](_0x58c001=>_0x58c001[_0x127391(0x289)]);_0x4232cd[_0x127391(0x1b6)]();let _0x1f475f=_0x4232cd[_0x127391(0x2b2)](',\x20');if(!lastCoinsToBalance)logHistory('warning',_0x127391(0x1ba));lastCoinsToBalance=_0x1f475f;}}function symbolToCoin(_0x156c02){const _0x49d7cc=_0x198143;let _0x4ffbbc;if(_0x156c02['includes']('/'+config['basecoin']))_0x4ffbbc=_0x156c02[_0x49d7cc(0x216)]('/'+config['basecoin'],'');if(_0x156c02['includes'](config['basecoin']+'/'))_0x4ffbbc=_0x156c02['replace'](config[_0x49d7cc(0x256)]+'/','');return _0x4ffbbc;}async function unlockOrders(){const _0xf44170=_0x198143;if(allOrdersPlaced&&lockOrders==ORDERS[_0xf44170(0x2e8)]){logger[_0xf44170(0x2e4)](_0xf44170(0x196)),lockOrders=ORDERS[_0xf44170(0x1a9)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x2ed125=await getCoins();[currentCoins,currentCoinsAll]=_0x2ed125,validateOrdersState=_0xf44170(0x1b7),persistOpenOrders([]),lockOrders=ORDERS[_0xf44170(0x1f1)],logger[_0xf44170(0x2e4)](_0xf44170(0x23e));}}async function validateOrders(_0x1f0ed6){const _0x32bcee=_0x198143;if(_0x1f0ed6)validateOrdersState=_0x1f0ed6;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+_0x32bcee(0x1ea)+(lockOrders==0x1?_0x32bcee(0x1fb):lockOrders==0x2?_0x32bcee(0x23f):_0x32bcee(0x189)));let _0x39817d=[],_0x516542=config[_0x32bcee(0x29a)]==_0x32bcee(0x2d9)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x32bcee(0x2aa)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS['LOCKED'])return;logger[_0x32bcee(0x2e4)](_0x32bcee(0x302)+validateOrdersState),lastOrders[_0x32bcee(0x1ed)](_0x15ac5e=>{const _0x2e2fbf=_0x32bcee;let _0x1bed1a=![];_0x15ac5e[_0x2e2fbf(0x201)]>0x0&&(_0x1bed1a=!![]),_0x39817d[_0x2e2fbf(0x24f)](_0x1bed1a),_0x1bed1a&&config[_0x2e2fbf(0x29a)]!=_0x2e2fbf(0x2d9)&&logHistory(_0x2e2fbf(0x1b4),'Order\x20filled:\x20'+_0x15ac5e[_0x2e2fbf(0x1a6)]+'\x20'+_0x15ac5e[_0x2e2fbf(0x244)]+'\x20#'+formatResult(_0x15ac5e[_0x2e2fbf(0x201)],0x8)+'\x20@'+formatResult(_0x15ac5e['price'],0x8));}),_0x39817d[_0x32bcee(0x1ed)]((_0x2fce9a,_0x31fd0f)=>{if(_0x2fce9a)lastOrders['splice'](_0x31fd0f,0x1);}),persistOpenOrders(lastOrders);const _0x322356=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x32bcee(0x1b7)){validateOrdersState=_0x32bcee(0x1f7);if(_0x39817d[_0x32bcee(0x1cf)](![])){if(config[_0x32bcee(0x29a)]==_0x32bcee(0x2d9)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x39817d[_0x32bcee(0x1cf)](![])){}else{if(allOrdersPlaced){if(config[_0x32bcee(0x29a)]==_0x32bcee(0x2d9)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x32bcee(0x191))_0x39817d['includes'](![])&&(config[_0x32bcee(0x29a)]==_0x32bcee(0x2d9)?logHistory('success','Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x516542*validateOrderInterval/0xea60)+_0x32bcee(0x2eb)+_0x322356):(await cancelOrders(),logHistory('success',_0x32bcee(0x2fd)+Math[_0x32bcee(0x22a)](_0x516542*validateOrderInterval/0xea60)+_0x32bcee(0x2eb)+_0x322356))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x32bcee(0x29a)]!=_0x32bcee(0x2d9))logHistory(_0x32bcee(0x2bf),'No\x20more\x20open\x20orders\x20-\x20'+_0x322356);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x5938bc=>{const _0x3de88c=_0x4282;try{const _0xe70753=await exchange[_0x3de88c(0x2f5)](_0x5938bc['orderId'],_0x5938bc[_0x3de88c(0x1a6)]);}catch(_0x2360ef){if(_0x2360ef[_0x3de88c(0x1e9)]()[_0x3de88c(0x1cf)](_0x3de88c(0x2b8))){}else await handleError(_0x2360ef,'cancelOrders()');}});}async function initCoinResults(_0x146d12){const _0xa9aed4=_0x198143;_0x146d12?logger[_0xa9aed4(0x2e4)](_0xa9aed4(0x2db)+_0x146d12):logger[_0xa9aed4(0x2e4)]('Initializing\x20coin\x20results'),config[_0xa9aed4(0x26e)][_0xa9aed4(0x1ed)](_0x5c1aaa=>{const _0x130177=_0xa9aed4;if(!_0x5c1aaa['excluded']&&_0x5c1aaa['coin']!=config['basecoin']){const _0x2c9c4e=currentCoins[_0x130177(0x2ab)](_0xcc0daf=>_0xcc0daf['coin']==_0x5c1aaa[_0x130177(0x289)]),_0x4bd56e=global[_0x130177(0x1e2)][noslash(_0x5c1aaa['symbol'])];let _0xf2c242=_0x2c9c4e?_0x2c9c4e[_0x130177(0x214)]:null,_0x399640=_0x5c1aaa[_0x130177(0x1c3)]?0x1/_0x4bd56e:_0x4bd56e,_0x14a4c7;config[_0x130177(0x2b3)]['forEach'](_0x2c0148=>{const _0x3fc21c=_0x130177;!_0x14a4c7&&(_0x14a4c7=_0x2c0148[_0x3fc21c(0x1cb)]['find'](_0x26171f=>_0x26171f[_0x3fc21c(0x289)]==_0x5c1aaa['coin']),_0x14a4c7&&(_0xf2c242=_0x14a4c7[_0x3fc21c(0x214)],_0x399640=_0x14a4c7[_0x3fc21c(0x1e8)]));});let _0xa054b3=dbCoinResults[_0x130177(0x223)](_0x130177(0x2d0))[_0x130177(0x2ab)]({'coin':_0x5c1aaa[_0x130177(0x289)]})[_0x130177(0x294)]();if(!_0xa054b3){const _0x10c133={'coin':_0x5c1aaa[_0x130177(0x289)],'number':_0xf2c242,'breakeven':_0x399640,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x130177(0x2d0))[_0x130177(0x24f)](_0x10c133)[_0x130177(0x1b2)]();}else{if(_0x146d12&&_0x5c1aaa[_0x130177(0x289)]==_0x146d12){const _0x3e4aa8={'coin':_0x5c1aaa['coin'],'number':_0xf2c242,'breakeven':_0x399640,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x130177(0x223)](_0x130177(0x2d0))[_0x130177(0x2ab)]({'coin':_0x5c1aaa['coin']})[_0x130177(0x1e0)](_0x3e4aa8)[_0x130177(0x1b2)]();}}}});}async function updateCoinResults(_0x2abb36,_0x3f1657=![]){const _0x537bbd=_0x198143;let _0x1652f3,_0x3dfeaf,_0x47b0a8,_0x15c776,_0xb3e527,_0x3db5a3,_0x2861ec=dbCoinResults[_0x537bbd(0x223)](_0x537bbd(0x2d0))['find']({'coin':_0x2abb36['coin']})[_0x537bbd(0x294)](),_0xef58d0=![];Object[_0x537bbd(0x2d4)](_0x2861ec)['forEach'](([_0x3d1e35,_0x3cb0f9])=>{if(_0x3cb0f9==null)_0xef58d0=!![];});(!_0x2861ec||_0xef58d0)&&(await initCoinResults(_0x2abb36['coin']),_0x2861ec=dbCoinResults[_0x537bbd(0x223)](_0x537bbd(0x2d0))[_0x537bbd(0x2ab)]({'coin':_0x2abb36[_0x537bbd(0x289)]})[_0x537bbd(0x294)]());_0x2abb36[_0x537bbd(0x1c3)]&&(_0x3db5a3={'filled':_0x2abb36[_0x537bbd(0x201)]*_0x2abb36[_0x537bbd(0x1e8)],'amount':_0x2abb36[_0x537bbd(0x201)]*_0x2abb36['price'],'side':_0x2abb36[_0x537bbd(0x244)]==_0x537bbd(0x1d7)?'buy':_0x537bbd(0x1d7),'price':0x1/_0x2abb36[_0x537bbd(0x1e8)]},_0x2abb36={..._0x2abb36,..._0x3db5a3});_0x3f1657?_0x3dfeaf=_0x2abb36[_0x537bbd(0x244)]==_0x537bbd(0x1a0)?_0x2861ec[_0x537bbd(0x214)]+_0x2abb36[_0x537bbd(0x201)]:_0x2861ec[_0x537bbd(0x214)]-_0x2abb36[_0x537bbd(0x201)]:_0x3dfeaf=await getCoinNumber(_0x2abb36['coin']);if(_0x2abb36['fee']&&_0x2abb36['fee'][_0x537bbd(0x1d0)]==config[_0x537bbd(0x256)])_0x1652f3=_0x2abb36[_0x537bbd(0x282)][_0x537bbd(0x2fe)];else{if(_0x2abb36[_0x537bbd(0x282)]&&_0x2abb36[_0x537bbd(0x282)][_0x537bbd(0x1d0)]==_0x537bbd(0x2c0)&&!_0x3f1657)_0x1652f3=_0x2abb36[_0x537bbd(0x282)]['cost']*global[_0x537bbd(0x1e2)][_0x537bbd(0x2c0)+config[_0x537bbd(0x256)]];else _0x1652f3=defaultFee*_0x2abb36['filled']*_0x2abb36[_0x537bbd(0x1e8)];}_0x2abb36[_0x537bbd(0x244)]==_0x537bbd(0x1a0)?(_0x47b0a8=_0x3dfeaf!=0x0?(_0x2861ec[_0x537bbd(0x2fb)]*_0x2861ec[_0x537bbd(0x214)]+_0x2abb36['price']*(_0x3dfeaf-_0x2861ec[_0x537bbd(0x214)])+_0x1652f3)/_0x3dfeaf:0x0,_0x15c776=_0x2861ec[_0x537bbd(0x207)]):(_0x47b0a8=_0x3dfeaf!=0x0?(_0x2861ec[_0x537bbd(0x2fb)]*_0x2861ec[_0x537bbd(0x214)]-_0x2abb36[_0x537bbd(0x1e8)]*(_0x2861ec[_0x537bbd(0x214)]-_0x3dfeaf)+_0x1652f3)/_0x3dfeaf:0x0,_0x15c776=_0x2861ec[_0x537bbd(0x207)]+(_0x2abb36[_0x537bbd(0x1e8)]-_0x2861ec[_0x537bbd(0x2fb)])*_0x2abb36[_0x537bbd(0x201)]);_0xb3e527=(_0x2abb36[_0x537bbd(0x1e8)]-_0x47b0a8-_0x1652f3/_0x2abb36[_0x537bbd(0x201)])*_0x3dfeaf;let _0x344f2a={'coin':_0x2abb36[_0x537bbd(0x289)],'number':_0x3dfeaf,'breakeven':formatResult(_0x47b0a8,0x8),'realized':formatResult(_0x15c776,0x8),'unrealized':formatResult(_0xb3e527,0x8),'fees':formatResult(_0x2861ec['fees']+_0x1652f3,0x8),'sells':_0x2abb36[_0x537bbd(0x244)]==_0x537bbd(0x1d7)?_0x2861ec[_0x537bbd(0x1d9)]+0x1:_0x2861ec[_0x537bbd(0x1d9)],'buys':_0x2abb36[_0x537bbd(0x244)]=='buy'?_0x2861ec['buys']+0x1:_0x2861ec[_0x537bbd(0x210)]};dbCoinResults[_0x537bbd(0x223)]('coins')['find']({'coin':_0x2abb36['coin']})['assign'](_0x344f2a)[_0x537bbd(0x1b2)]();if(!_0x3f1657){if(_0x2abb36[_0x537bbd(0x282)]&&_0x2abb36[_0x537bbd(0x282)]['currency']==_0x537bbd(0x2c0)){const _0x333a2d=currentCoins[_0x537bbd(0x2ab)](_0x4efa83=>_0x4efa83['coin']==_0x537bbd(0x2c0));if(_0x333a2d){let _0x2f4b21=dbCoinResults['get'](_0x537bbd(0x2d0))[_0x537bbd(0x2ab)]({'coin':_0x537bbd(0x2c0)})[_0x537bbd(0x294)]();_0x344f2a={..._0x2f4b21,'number':_0x333a2d[_0x537bbd(0x214)]},dbCoinResults['get'](_0x537bbd(0x2d0))[_0x537bbd(0x2ab)]({'coin':_0x537bbd(0x2c0)})['assign'](_0x344f2a)[_0x537bbd(0x1b2)]();}}}}async function placeOrder(_0x2bb09e){const _0x559309=_0x198143,_0x4edc2a=config['ordertype']==_0x559309(0x2d9)?_0x559309(0x2d9):_0x559309(0x251);if(lockOrders==ORDERS[_0x559309(0x1f1)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x559309(0x2e8)],allOrdersPlaced=![],validateOrdersState=_0x559309(0x1b7);let _0x1681b5=![];lastOrders=[];for(const _0xc39729 of _0x2bb09e){let _0x3bf13b,_0xd178,_0x38f35e,_0x5c2b8d,_0x31d8dc,_0x3b2d72=_0xc39729[_0x559309(0x1a6)];try{const _0x34e4d0=await exchange[_0x559309(0x2e9)](_0x3b2d72);_0x3bf13b=_0xc39729[_0x559309(0x1c3)]?0x1/_0xc39729['last']:_0xc39729[_0x559309(0x203)],_0xd178=_0x34e4d0[_0x559309(0x299)],_0x38f35e=_0x34e4d0['ask'];_0xc39729['reverse']?(_0x5c2b8d=_0xc39729['side']==_0x559309(0x1a0)?_0x559309(0x1d7):_0x559309(0x1a0),_0x31d8dc=Math[_0x559309(0x1a7)](_0xc39729['trade'])/_0x3bf13b):(_0x5c2b8d=_0xc39729[_0x559309(0x244)],_0x31d8dc=Math[_0x559309(0x1a7)](_0xc39729[_0x559309(0x1d1)]));_0x4edc2a==_0x559309(0x251)&&(config['ordertype']==_0x559309(0x228)&&(_0x3bf13b=_0x5c2b8d==_0x559309(0x1a0)?_0xd178:_0x38f35e),config[_0x559309(0x29a)]=='limit-low'&&(_0x3bf13b=_0x5c2b8d==_0x559309(0x1a0)?_0x38f35e:_0xd178));_0x31d8dc=formatResult(_0x31d8dc,0x8),_0x3bf13b=formatResult(_0x3bf13b,0x8);const _0x6b20d3=_0x5c2b8d==_0x559309(0x1d7)?config[_0x559309(0x2fa)]?String[_0x559309(0x2e6)]('0x'+config['emojisell'])+'\x20':'':config[_0x559309(0x1e1)]?String[_0x559309(0x2e6)]('0x'+config[_0x559309(0x1e1)])+'\x20':'',_0x3a7c5a=_0x4edc2a=='market'?_0x559309(0x28b):config[_0x559309(0x29a)]==_0x559309(0x228)?'Limit\x20(high-margin)':_0x559309(0x25f),_0x4642fd=(Math['floor'](Math[_0x559309(0x2b4)]()*0x35a4e900)+0x5f5e100)[_0x559309(0x1e9)]();lastOrders[_0x559309(0x24f)]({'customId':_0x4642fd,'symbol':_0x3b2d72,'coin':_0xc39729[_0x559309(0x289)],'amount':_0x31d8dc,'price':_0x3bf13b,'side':_0x5c2b8d,'reverse':_0xc39729[_0x559309(0x1c3)],'filled':0x0});if(_0x4edc2a==_0x559309(0x2d9))logHistory(_0x559309(0x1b4),''+_0x6b20d3+_0x3a7c5a+_0x559309(0x1b5)+_0x3b2d72+'\x20'+_0x5c2b8d+'\x20#'+formatResult(_0x31d8dc,0x8)+'\x20@'+formatResult(_0x3bf13b,0x8));else logHistory(_0x559309(0x1b4),''+_0x6b20d3+_0x3a7c5a+_0x559309(0x1b5)+_0x3b2d72+'\x20'+_0x5c2b8d+'\x20#'+formatResult(_0x31d8dc,0x8)+'\x20@'+formatResult(_0x3bf13b,0x8));let _0x38bc6d=_0x4642fd;exchangesRequiringIntId['includes'](config[_0x559309(0x245)])&&(_0x38bc6d=parseInt(_0x4642fd));logger[_0x559309(0x2e4)](_0x559309(0x2f9)+_0x38bc6d+_0x559309(0x2b0)+typeof _0x38bc6d);const _0x3ea2f2=await exchange[_0x559309(0x253)](_0x3b2d72,_0x4edc2a,_0x5c2b8d,_0x31d8dc,_0x3bf13b,{'clientOrderId':_0x38bc6d}),_0x57278c=lastOrders['length']-0x1;if(_0x57278c>=0x0&&lastOrders[_0x57278c][_0x559309(0x1db)]==_0x4642fd){lastOrders[_0x57278c]['orderId']=_0x3ea2f2['id'];if(_0x3ea2f2[_0x559309(0x1f8)])lastOrders[_0x57278c][_0x559309(0x1f8)]=_0x3ea2f2[_0x559309(0x1f8)];if(_0x3ea2f2[_0x559309(0x1e8)])lastOrders[_0x57278c][_0x559309(0x1e8)]=_0x3ea2f2[_0x559309(0x1e8)];lastOrders[_0x57278c]['fee']=_0x3ea2f2[_0x559309(0x282)];}if(config[_0x559309(0x227)]!=0x0){let _0x4c3b99=null;if(cooldownTracker[_0x559309(0x2a8)]==config[_0x559309(0x227)]-0x1)_0x4c3b99=cooldownTracker[_0x559309(0x278)]();const _0x4bbe62=getTimeStamp();cooldownTracker[_0x559309(0x24f)](_0x4bbe62);if(_0x4c3b99){const _0x205e7a=fns[_0x559309(0x217)](new Date(_0x4bbe62),new Date(_0x4c3b99));if(_0x205e7a<cooldownInterval){logHistory('error',_0x559309(0x18a)+config['cooldown']+_0x559309(0x28f)+cooldownInterval/0x3c+_0x559309(0x212)+cooldownPeriod/(0xe10*0x3e8)+_0x559309(0x2cb)),coolingDown=!![];break;}}}}catch(_0x5d9d3c){if(_0x5d9d3c['toString']()['includes'](_0x559309(0x2ee)))lastOrders=lastOrders[_0x559309(0x266)](_0x3ce25=>_0x3ce25[_0x559309(0x1a6)]!=_0x3b2d72),logHistory(_0x559309(0x258),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x3b2d72),_0x1681b5=!![];else{if(_0x5d9d3c['toString']()[_0x559309(0x1cf)](_0x559309(0x232)))lastOrders=lastOrders['filter'](_0x35610d=>_0x35610d['symbol']!=_0x3b2d72),logHistory(_0x559309(0x258),'Order\x20amount\x20is\x20invalid:\x20'+_0x3b2d72),_0x1681b5=!![];else{if(_0x5d9d3c['toString']()[_0x559309(0x1cf)](_0x559309(0x1ae)))lastOrders=lastOrders[_0x559309(0x266)](_0x1349d2=>_0x1349d2[_0x559309(0x1a6)]!=_0x3b2d72),logHistory(_0x559309(0x258),_0x559309(0x2df)+_0x3b2d72),_0x1681b5=!![];else _0x5d9d3c[_0x559309(0x1e9)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x559309(0x266)](_0x30c44c=>_0x30c44c['symbol']!=_0x3b2d72),logHistory(_0x559309(0x258),_0x559309(0x198)+_0x3b2d72),_0x1681b5=!![]):(lastOrders=lastOrders['filter'](_0x46d830=>_0x46d830[_0x559309(0x1a6)]!=_0x3b2d72),await handleError(_0x5d9d3c,_0x559309(0x2e5),_0x3b2d72));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x559309(0x2a8)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x302529=config[_0x559309(0x29a)]=='market'?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x457e09=_0x559309;validateOrders(_0x457e09(0x191));},_0x302529);}else unlockOrders();_0x1681b5&&config[_0x559309(0x1ad)]&&await pauseBot('Avoiding\x20continuous\x20order\x20attempts'),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x559309(0x2bf),_0x559309(0x27c)));}else{if(coolingDown)!config[_0x559309(0x1ad)]&&logHistory(_0x559309(0x258),_0x559309(0x27f));else lockOrders!=ORDERS[_0x559309(0x1f1)]&&(!config[_0x559309(0x1ad)]&&(config[_0x559309(0x29a)]==_0x559309(0x2d9)?logHistory(_0x559309(0x258),_0x559309(0x25b)):logHistory(_0x559309(0x258),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x25aab6){const _0x1315ca=_0x198143,_0x51387f={...config,'openOrders':_0x25aab6};let _0x54518e=dbConfig[_0x1315ca(0x223)](_0x1315ca(0x265))['find']({'botID':botID})['value']();_0x54518e&&dbConfig[_0x1315ca(0x223)](_0x1315ca(0x265))[_0x1315ca(0x2ab)]({'botID':botID})[_0x1315ca(0x1e0)](_0x51387f)[_0x1315ca(0x1b2)]();}function restoreOrders(){const _0x323eca=_0x198143;let _0x5317d2;config[_0x323eca(0x2fc)]&&allOpenOrders[_0x323eca(0x1ed)](_0x2303b4=>{const _0x44af0e=_0x323eca,_0x1db39d=config[_0x44af0e(0x2fc)][_0x44af0e(0x2ab)](_0x3acebf=>_0x3acebf['orderId']==_0x2303b4['id']);_0x1db39d&&(lastOrders[_0x44af0e(0x24f)](_0x1db39d),_0x5317d2=_0x2303b4[_0x44af0e(0x305)]);});if(lastOrders[_0x323eca(0x2a8)]>0x0){lockOrders=ORDERS[_0x323eca(0x2e8)],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x3812c5=new Date()[_0x323eca(0x264)](),_0x2e41cf=config[_0x323eca(0x29a)]==_0x323eca(0x2d9)?validateOrderTimeout*0x3c*0x3e8:config[_0x323eca(0x2aa)]*0x3c*0x3e8;if(_0x5317d2+_0x2e41cf>_0x3812c5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x41c753=_0x323eca;validateOrders(_0x41c753(0x191));},_0x5317d2+_0x2e41cf-_0x3812c5);}else validateOrders(_0x323eca(0x191));}}async function sendMetricsTelegram(){const _0x48cc87=_0x198143;if(!coinsLoaded){process[_0x48cc87(0x26b)]({'telegrammsg':_0x48cc87(0x2de)},_0x374532=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3f834d='';if(config[_0x48cc87(0x2d3)])_0x3f834d='<b>'+config[_0x48cc87(0x215)]+'\x20metrics:</b>\x20\x0a\x0a';else _0x3f834d=_0x48cc87(0x1aa)+botID+'\x20metrics:</b>\x20\x0a\x0a';const _0x199c02=getKPIs(_0x48cc87(0x256)),_0x69b305=getKPIs(_0x48cc87(0x1d2),config[_0x48cc87(0x1d2)]),_0x4e388a=getKPIs('net-basecoin'),_0x18db2f=getKPIs(_0x48cc87(0x309),config[_0x48cc87(0x1d2)]);_0x3f834d+=_0x48cc87(0x29c),_0x3f834d+=_0x199c02[_0x48cc87(0x2a5)]+_0x48cc87(0x2a7)+_0x199c02[_0x48cc87(0x294)]+'\x0a',_0x3f834d+=_0x199c02[_0x48cc87(0x20b)]+':\x20'+_0x199c02['change']+'%\x0a',_0x3f834d+=_0x69b305[_0x48cc87(0x2a5)]+_0x48cc87(0x2a7)+_0x69b305[_0x48cc87(0x294)]+'\x0a',_0x3f834d+=_0x69b305[_0x48cc87(0x20b)]+':\x20'+_0x69b305[_0x48cc87(0x1e3)]+'%\x0a',_0x3f834d+=_0x4e388a['leftTxt']+':\x20'+_0x4e388a[_0x48cc87(0x294)]+'\x20('+config[_0x48cc87(0x256)]+')\x0a',_0x3f834d+=_0x4e388a[_0x48cc87(0x20b)]+':\x20'+_0x4e388a[_0x48cc87(0x1e3)]+'%\x20('+config[_0x48cc87(0x256)]+')\x0a',_0x3f834d+=_0x18db2f[_0x48cc87(0x2a5)]+':\x20'+_0x18db2f[_0x48cc87(0x294)]+'\x20('+config[_0x48cc87(0x1d2)]+')\x0a',_0x3f834d+=_0x18db2f[_0x48cc87(0x20b)]+':\x20'+_0x18db2f[_0x48cc87(0x1e3)]+_0x48cc87(0x263)+config[_0x48cc87(0x1d2)]+')\x0a',_0x3f834d+=_0x48cc87(0x2ad),process[_0x48cc87(0x26b)]({'telegrammsg':_0x3f834d},_0x1939d6=>{});}async function sendPortfolioTelegram(){const _0x46fa28=_0x198143;if(!coinsLoaded){process['send']({'telegrammsg':_0x46fa28(0x2de)},_0x1deac3=>{});return;}let _0x351b7d='';if(config['showname'])_0x351b7d=_0x46fa28(0x27e)+config['botname']+_0x46fa28(0x1a8);else _0x351b7d='<b>Bot\x20'+botID+_0x46fa28(0x1a8);_0x351b7d+=_0x46fa28(0x29c),_0x351b7d+=_0x46fa28(0x1c7),_0x351b7d+=_0x46fa28(0x29f),_0x351b7d+=_0x46fa28(0x1c7),currentCoins[_0x46fa28(0x1ed)](_0x33b7de=>{const _0x342abf=_0x46fa28;_0x351b7d+=_0x33b7de['coin'][_0x342abf(0x2cc)](0x7)+'|\x20'+formatPad(_0x33b7de[_0x342abf(0x277)],0x2,0x6)+'|\x20'+formatPad(_0x33b7de[_0x342abf(0x2ff)],0x2,0x6)+'|\x20'+formatPad(_0x33b7de[_0x342abf(0x283)]*0x64,0x2,0x6)+'\x0a';}),_0x351b7d+=_0x46fa28(0x2ad),process[_0x46fa28(0x26b)]({'telegrammsg':_0x351b7d},_0x4a6d6e=>{});}function formatPad(_0x5d24b3,_0x1a47a2,_0x239fe5){const _0x4685d9=_0x198143,_0x477030=formatResultString(_0x5d24b3,_0x1a47a2);return _0x477030?_0x477030[_0x4685d9(0x276)](_0x239fe5):''[_0x4685d9(0x276)](_0x239fe5);}function logHistory(_0x2bce68,_0x135c5b,_0x5906f7=''){const _0x123edb=_0x198143;let _0x48e153={'time':getTimeStamp(),'type':_0x2bce68,'event':_0x135c5b};dbLogs[_0x123edb(0x223)](_0x123edb(0x205))[_0x123edb(0x24f)](_0x48e153)[_0x123edb(0x1b2)]();if(_0x5906f7=='')_0x5906f7=_0x135c5b;proxyEmit(_0x123edb(0x291),{'log':_0x48e153,'summary':_0x5906f7}),process[_0x123edb(0x26b)]({'telegram':{..._0x48e153,'botname':config[_0x123edb(0x215)],'showname':config[_0x123edb(0x2d3)]}},_0x2b5c54=>{}),logger[_0x123edb(0x221)](''+_0x48e153[_0x123edb(0x291)]);}function emitHistory(_0x21277e={}){const _0x2d4e10=_0x198143;Object[_0x2d4e10(0x2b7)](_0x21277e)[_0x2d4e10(0x2a8)]==0x0&&(_0x21277e={'type':[_0x2d4e10(0x1b4),_0x2d4e10(0x291)],'event':'','page':0x1});if(_0x21277e[_0x2d4e10(0x2ae)]['includes']('event'))_0x21277e[_0x2d4e10(0x2ae)][_0x2d4e10(0x1b9)](_0x21277e[_0x2d4e10(0x2ae)]['indexOf'](_0x2d4e10(0x291)),0x1,'error','warning',_0x2d4e10(0x2bf));if(dbLogs['has'](_0x2d4e10(0x205))[_0x2d4e10(0x294)]()){let _0x1ea060=dbLogs[_0x2d4e10(0x223)]('logs')[_0x2d4e10(0x266)](_0x5b6b06=>{const _0x22db91=_0x2d4e10;if(_0x21277e[_0x22db91(0x2ae)][_0x22db91(0x2a8)]==0x0)return![];else return _0x21277e['type'][_0x22db91(0x1cf)](_0x5b6b06['type']);})[_0x2d4e10(0x266)](_0x203bd6=>{const _0x63b904=_0x2d4e10;if(_0x21277e[_0x63b904(0x291)]=='')return!![];else return _0x203bd6[_0x63b904(0x291)][_0x63b904(0x28e)]()[_0x63b904(0x1cf)](_0x21277e[_0x63b904(0x291)][_0x63b904(0x28e)]());})[_0x2d4e10(0x22b)](_0x2d4e10(0x209)),_0x407bac=_0x1ea060[_0x2d4e10(0x294)]()[_0x2d4e10(0x2a8)];_0x1ea060=_0x1ea060['reverse']()[_0x2d4e10(0x1af)]((_0x21277e[_0x2d4e10(0x27a)]-0x1)*logPageSize,_0x21277e[_0x2d4e10(0x27a)]*logPageSize-0x1)[_0x2d4e10(0x1c3)]()['value'](),proxyEmit('event-history',{'logs':_0x1ea060,'total':_0x407bac});}else proxyEmit(_0x2d4e10(0x208),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x50db27){const _0x199f4c=_0x198143;if(dbLogs['has']('logs')[_0x199f4c(0x294)]()){const _0x30cc15=dbLogs[_0x199f4c(0x223)](_0x199f4c(0x205))[_0x199f4c(0x22b)](_0x199f4c(0x209))[_0x199f4c(0x266)](_0x7039d7=>{const _0x9d440=_0x199f4c;return _0x7039d7[_0x9d440(0x2ae)]==_0x9d440(0x1b4);})[_0x199f4c(0x294)]();dbLogs[_0x199f4c(0x223)](_0x199f4c(0x205))['remove']()['write'](),dbLogs[_0x199f4c(0x223)](_0x199f4c(0x205))[_0x199f4c(0x1e0)](_0x30cc15)[_0x199f4c(0x1b2)](),emitHistory(_0x50db27);}}async function pauseBot(_0x3cedd4=''){const _0x36e8e2=_0x198143,_0x58604e=new Date()[_0x36e8e2(0x264)]();if(!lastErrorShown||_0x58604e-lastErrorShown>=pauseBotInterval){lastErrorShown=_0x58604e;!lastBotPause?(lastBotPause=_0x58604e,consecutivePauses=0x1):(_0x58604e-lastBotPause-pauseBotInterval<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x36e8e2(0x26b)]({'stop':'restart'},_0x4ccd62=>{})):consecutivePauses=0x1,lastBotPause=new Date()['getTime']());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange();if(_0x3cedd4)_0x3cedd4+=_0x36e8e2(0x1e5);logHistory(_0x36e8e2(0x258),_0x3cedd4+_0x36e8e2(0x306)+pauseBotInterval/0xea60+_0x36e8e2(0x19b)),await sleep(pauseBotInterval),botPaused=![],reset(null,!![]);}}}async function killBot(){const _0x43c60a=_0x198143;process[_0x43c60a(0x26b)]({'stop':_0x43c60a(0x246)},_0x18d71d=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x40395b,_0x53b3f5){const _0x37e585=_0x198143;if(_0x40395b['toString']()['includes'](_0x37e585(0x2af)))return logHistory('error',config[_0x37e585(0x245)]+_0x37e585(0x231)),![];else{if(_0x40395b[_0x37e585(0x1e9)]()[_0x37e585(0x1cf)](_0x37e585(0x257)))return logHistory('error',config[_0x37e585(0x245)]+_0x37e585(0x2ba)),![];else{if(_0x40395b[_0x37e585(0x1e9)]()['includes'](_0x37e585(0x20f)))return logHistory(_0x37e585(0x258),config[_0x37e585(0x245)]+_0x37e585(0x236)),logHistory(_0x37e585(0x258),_0x37e585(0x28d)),![];else await handleError(_0x40395b,_0x53b3f5);}}}async function handleError(_0x1af5ad,_0x3137bb,_0x5d384a=''){const _0x2bcb95=_0x198143,_0xa1f88a=config[_0x2bcb95(0x245)]||'Exchange';if(_0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)](_0x2bcb95(0x1f0)))await pauseBot(config[_0x2bcb95(0x245)]+'\x20blocked\x20API\x20(DDoS\x20protection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading');else{if(_0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)]('ExchangeNotAvailable'))await pauseBot(config[_0x2bcb95(0x245)]+'\x20not\x20available');else{if(_0x1af5ad[_0x2bcb95(0x1e9)]()['includes']('RequestTimeout'))await pauseBot(config[_0x2bcb95(0x245)]+'\x20not\x20responding');else{if(_0x1af5ad['toString']()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))await pauseBot(config[_0x2bcb95(0x245)]+'\x20closed\x20the\x20connection');else{if(_0x1af5ad['toString']()[_0x2bcb95(0x1cf)]('Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead'))logHistory('error',_0x3137bb+_0x2bcb95(0x286)),logHistory(_0x2bcb95(0x258),_0x2bcb95(0x200)),await killBot();else{if(_0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)]('InvalidNonce'))logHistory('error',_0x3137bb+_0x2bcb95(0x19c)),logHistory('error',_0x2bcb95(0x200)),await killBot();else{if(_0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)](_0x2bcb95(0x2af)))logHistory(_0x2bcb95(0x258),_0x3137bb+_0x2bcb95(0x1e5)+config['exchange']+_0x2bcb95(0x2b6)),logHistory(_0x2bcb95(0x258),_0x2bcb95(0x200)),await killBot();else{if(_0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)](_0x2bcb95(0x257)))logHistory(_0x2bcb95(0x258),_0x3137bb+_0x2bcb95(0x1e5)+config[_0x2bcb95(0x245)]+_0x2bcb95(0x192)),logHistory(_0x2bcb95(0x258),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else{if(_0x1af5ad['toString']()['includes'](_0x2bcb95(0x20f)))logHistory(_0x2bcb95(0x258),_0x3137bb+_0x2bcb95(0x1e5)+config['exchange']+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory(_0x2bcb95(0x258),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),await killBot();else _0x1af5ad[_0x2bcb95(0x1e9)]()[_0x2bcb95(0x1cf)](_0x2bcb95(0x25a))?logHistory(_0x2bcb95(0x258),_0x3137bb+_0x2bcb95(0x1f3)+_0x5d384a):(logger[_0x2bcb95(0x221)](_0x3137bb+_0x2bcb95(0x202),_0x1af5ad),await pauseBot(_0x2bcb95(0x1b1)));}}}}}}}}}function formatResult(_0x5030c2,_0x2ab050){const _0x56445e=_0x198143;return parseFloat(_0x5030c2[_0x56445e(0x22f)](_0x2ab050));}function formatResultTruncate(_0x5338eb,_0x5ad1e7){const _0x5cd7fc=_0x198143;let _0x5c24c3=formatResultString(_0x5338eb,0xa),_0x5b60dd=_0x5c24c3[_0x5cd7fc(0x1e7)]('.');return _0x5b60dd!=-0x1&&(_0x5c24c3=_0x5c24c3[_0x5cd7fc(0x1af)](0x0,_0x5b60dd+_0x5ad1e7+0x1)),Number(_0x5c24c3);}function formatResultString(_0x47926d,_0x38f420){const _0x15a9bf=_0x198143;let _0x2b3e91;if(!(''+_0x47926d)[_0x15a9bf(0x1cf)]('e'))_0x2b3e91=+(Math[_0x15a9bf(0x22a)](_0x47926d+'e+'+_0x38f420)+'e-'+_0x38f420);else{let _0x2362b0=(''+_0x47926d)[_0x15a9bf(0x24a)]('e'),_0x72cc81='';+_0x2362b0[0x1]+_0x38f420>0x0&&(_0x72cc81='+'),_0x2b3e91=+(Math[_0x15a9bf(0x22a)](+_0x2362b0[0x0]+'e'+_0x72cc81+(+_0x2362b0[0x1]+_0x38f420))+'e-'+_0x38f420);}return Number(_0x2b3e91)['toFixed'](_0x38f420);}function getServerTime(){const _0xb0f92a=_0x198143,_0x557020=new Date();return _0x557020[_0xb0f92a(0x2e7)]()+'/'+(_0x557020['getMonth']()+0x1)['toString']()[_0xb0f92a(0x276)](0x2,'0')+'/'+_0x557020[_0xb0f92a(0x292)]()[_0xb0f92a(0x1e9)]()['padStart'](0x2,'0')+'\x20'+_0x557020['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x557020['getMinutes']()[_0xb0f92a(0x1e9)]()[_0xb0f92a(0x276)](0x2,'0')+':'+_0x557020[_0xb0f92a(0x2a0)]()[_0xb0f92a(0x1e9)]()[_0xb0f92a(0x276)](0x2,'0');}function getTimeStamp(){const _0x31d0db=_0x198143,_0x2c7e12=shiftedTime();return _0x2c7e12[_0x31d0db(0x2e7)]()+'/'+(_0x2c7e12[_0x31d0db(0x269)]()+0x1)['toString']()[_0x31d0db(0x276)](0x2,'0')+'/'+_0x2c7e12[_0x31d0db(0x292)]()['toString']()[_0x31d0db(0x276)](0x2,'0')+'\x20'+_0x2c7e12['getHours']()['toString']()[_0x31d0db(0x276)](0x2,'0')+':'+_0x2c7e12[_0x31d0db(0x29b)]()[_0x31d0db(0x1e9)]()[_0x31d0db(0x276)](0x2,'0')+':'+_0x2c7e12['getSeconds']()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x439e7f=_0x198143,_0x6f98e9=shiftedTime();return _0x6f98e9['getFullYear']()+'/'+(_0x6f98e9['getMonth']()+0x1)[_0x439e7f(0x1e9)]()[_0x439e7f(0x276)](0x2,'0')+'/'+_0x6f98e9[_0x439e7f(0x292)]()[_0x439e7f(0x1e9)]()[_0x439e7f(0x276)](0x2,'0');}function getHour(){const _0x44b76d=_0x198143,_0x5b2f1e=shiftedTime();return _0x5b2f1e[_0x44b76d(0x1c5)]()['toString']()[_0x44b76d(0x276)](0x2,'0');}function sleep(_0x10cad9){return new Promise(_0x53cac8=>setTimeout(_0x53cac8,_0x10cad9));}function shiftedTime(){const _0x3c0c23=_0x198143,_0x5d2034=new Date();let _0x2472ae=_0x5d2034;if(config&&config['timeshift']!==0x0)_0x2472ae=fns[_0x3c0c23(0x22d)](_0x5d2034,{'hours':config[_0x3c0c23(0x284)]});return _0x2472ae;}function timer(_0x202491){const _0x5df4c2=_0x198143,_0x53cb1e=new Date();!lasttime?console[_0x5df4c2(0x218)](getTimeStamp()+_0x5df4c2(0x21c),_0x202491,_0x53cb1e):console[_0x5df4c2(0x218)](getTimeStamp()+':\x20timer\x20>',_0x202491,(_0x53cb1e-lasttime)/0x3e8),lasttime=_0x53cb1e;}