const _0x528603=_0x423f;(function(_0x3dabd1,_0x4b4512){const _0x28e31a=_0x423f,_0xf599fd=_0x3dabd1();while(!![]){try{const _0x3e45fa=-parseInt(_0x28e31a(0x1c8))/0x1*(parseInt(_0x28e31a(0x1d3))/0x2)+parseInt(_0x28e31a(0x13a))/0x3+parseInt(_0x28e31a(0x1b1))/0x4+-parseInt(_0x28e31a(0x124))/0x5+parseInt(_0x28e31a(0x161))/0x6+parseInt(_0x28e31a(0x1bb))/0x7+-parseInt(_0x28e31a(0x1c6))/0x8;if(_0x3e45fa===_0x4b4512)break;else _0xf599fd['push'](_0xf599fd['shift']());}catch(_0x396301){_0xf599fd['push'](_0xf599fd['shift']());}}}(_0xfadd,0xae8d0));const _0x23ba1b=function(){let _0x23efdd=!![];return function(_0x445bdc,_0x28d43f){const _0xaf419a=_0x23efdd?function(){const _0x124df5=_0x423f;if(_0x28d43f){const _0x399929=_0x28d43f[_0x124df5(0x101)](_0x445bdc,arguments);return _0x28d43f=null,_0x399929;}}:function(){};return _0x23efdd=![],_0xaf419a;};}(),_0x1707cc=_0x23ba1b(this,function(){const _0x1f22f7=_0x423f;return _0x1707cc[_0x1f22f7(0x1a6)]()[_0x1f22f7(0x189)](_0x1f22f7(0x185))[_0x1f22f7(0x1a6)]()[_0x1f22f7(0x194)](_0x1707cc)[_0x1f22f7(0x189)]('(((.+)+)+)+$');});_0x1707cc();'use strict';const ccxt=require(_0x528603(0x10c)),low=require('lowdb'),FileSync=require(_0x528603(0x151)),fs=require('fs'),fns=require(_0x528603(0xf4)),{WebsocketClient,DefaultLogger}=require(_0x528603(0x17f)),Crypt=require('hybrid-crypto-js')['Crypt'];let exchange,wsClient;global[_0x528603(0xe3)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![];const serverversion=require(_0x528603(0x15e))[_0x528603(0x175)],botID=process[_0x528603(0x104)][0x2]||_0x528603(0x169),pattern=/^[0-9]{3}$/;if(!pattern[_0x528603(0x12d)](botID))return console['log']('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process[_0x528603(0x141)](0x1);const configpath=_0x528603(0x17d);!fs['existsSync'](configpath)&&fs[_0x528603(0xec)](configpath);const configfile=configpath+_0x528603(0x15c)+botID+_0x528603(0xf1),logfile=configpath+_0x528603(0x15c)+botID+'-events.json',performancefile=configpath+_0x528603(0x15c)+botID+_0x528603(0xe1),coinresultsfile=configpath+_0x528603(0x15c)+botID+_0x528603(0x198),settingsfile=configpath+_0x528603(0x12e),securefile=configpath+_0x528603(0xef),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x528603(0x154)]({'logs':[]})[_0x528603(0x1b4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[]})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})['write']();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x528603(0x154)]({'coins':[]})[_0x528603(0x1b4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x528603(0x133),'symbol':_0x528603(0x1ac)},'usd':{'coin':_0x528603(0x159),'symbol':_0x528603(0x183)}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x2ddcf9)=>{},'debug':(..._0x5b0086)=>{},'notice':(..._0x4dbbfc)=>{},'info':(..._0x599d90)=>{},'warning':(..._0xf4b180)=>{},'error':async function(..._0x3ea40d){const _0x44c266=_0x528603,_0x58ee4a=new Date()['getTime']();(!lastErrorShown||_0x58ee4a-lastErrorShown>=pauseBotInterval)&&(lastErrorShown=new Date()[_0x44c266(0x149)](),logHistory(_0x44c266(0x14b),'WebSockets()\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes'),logging(_0x44c266(0x1d6),_0x3ea40d[0x0]+':\x20'+_0x3ea40d[0x1][_0x44c266(0x14b)][_0x44c266(0x17c)]),await pauseBot(pauseBotInterval));}},crypt=new Crypt({'md':_0x528603(0x112),'rsaStandard':_0x528603(0x157)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings['timeshift']!=config[_0x528603(0x180)]&&updateTimeshift(settings[_0x528603(0x180)]);process[_0x528603(0x19b)]({'started':'running'}),initializeProcessListeners();function proxyEmit(_0x2965bf,_0xf10a04=null){const _0x41e17a=_0x528603;process[_0x41e17a(0x19b)]({'function':_0x2965bf,'args':_0xf10a04});}function initializeProcessListeners(){process['on']('message',_0x4f144e=>{const _0x19cb67=_0x423f;switch(Object[_0x19cb67(0x1bc)](_0x4f144e)[0x0]){case _0x19cb67(0x180):_0x4f144e[_0x19cb67(0x180)]!=undefined&&(settings[_0x19cb67(0x180)]=_0x4f144e['timeshift'],updateTimeshift(settings[_0x19cb67(0x180)]));break;case _0x19cb67(0xe7):switch(_0x4f144e[_0x19cb67(0xe7)]){case'initclient':initclient();break;case _0x19cb67(0x140):emitHistory(_0x4f144e['args']);break;case _0x19cb67(0x1ba):getPortfolio(_0x4f144e[_0x19cb67(0x1b3)]);break;case _0x19cb67(0x12f):storeConfiguration(_0x4f144e['args']);break;case _0x19cb67(0x1ad):storeHeadless(_0x4f144e[_0x19cb67(0x1b3)]);break;case _0x19cb67(0x199):getStartingBalances();break;case'placeOrder':placeOrder(_0x4f144e[_0x19cb67(0x1b3)]);break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x472114=_0x528603;if(pidBalances)clearTimeout(pidBalances);if(config[_0x472114(0x16e)]!=''){await initExchange(config[_0x472114(0x16e)],config[_0x472114(0x192)]);let _0x3171b4=await loadSymbols();_0x3171b4&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x536579,_0x39d51a){const _0x4dfa83=_0x528603,_0x199f2b=ccxt[config[_0x4dfa83(0x1a3)]];let _0x58f6f0;switch(config[_0x4dfa83(0x1a3)]){case _0x4dfa83(0x17f):_0x58f6f0=_0x4dfa83(0x137);break;case _0x4dfa83(0x1b0):_0x58f6f0='wss://stream.binance.us:9443';break;default:_0x58f6f0=_0x4dfa83(0x137);}exchange=new _0x199f2b({'apiKey':_0x536579,'secret':_0x39d51a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x536579,'api_secret':_0x39d51a,'beautify':!![],'wsUrl':_0x58f6f0},logger),config[_0x4dfa83(0x1a3)]=='binanceus'&&(stablecoins={'eur':{'coin':_0x4dfa83(0x130),'symbol':_0x4dfa83(0xd6)},'usd':{'coin':'BTCUSDT','symbol':_0x4dfa83(0x183)}});}async function loadSymbols(){const _0x5e6a5d=_0x528603;let _0x566d17;try{markets=await exchange[_0x5e6a5d(0xeb)](),allSymbols=exchange[_0x5e6a5d(0x144)][_0x5e6a5d(0x11c)](_0x265790=>{const _0x56bf68=_0x5e6a5d;return _0x265790[_0x56bf68(0xdb)](_0x56bf68(0xea))&&!_0x265790[_0x56bf68(0xdb)](_0x56bf68(0x1d2));}),_0x566d17=!![];}catch(_0x5dd095){await handleError(_0x5dd095,_0x5e6a5d(0x172)),_0x566d17=![];}return _0x566d17;}async function initbot(){const _0x264a23=_0x528603;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x42e719=dbCoinResults[_0x264a23(0xdf)]('coins')[_0x264a23(0x15f)]();if(_0x42e719[_0x264a23(0x1d4)]==0x0)await resetCoinResults();}async function initclient(){const _0x840025=_0x528603;proxyEmit(_0x840025(0x18d),emittedConfiguration());while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x840025(0x176),{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x7b9f8d=_0x528603;wsinitialized=![];ws1&&(ws1[_0x7b9f8d(0xf0)](_0x224391=>{try{wsClient['closeWs'](_0x224391);}catch(_0x24d85d){}}),ws1=[]);if(ws2){try{wsClient[_0x7b9f8d(0x1a0)](ws2);}catch(_0x4ff654){}ws2=null;}}async function initws(){const _0x56b22a=_0x528603;cleanws();let _0x36ac75=[];currentCoins[_0x56b22a(0xf0)](_0x5f0c33=>{const _0x300cef=_0x56b22a;if(_0x5f0c33[_0x300cef(0x14d)]!='BTC')_0x36ac75[_0x300cef(0x18b)](noslash(_0x5f0c33['symbol']));});if(!_0x36ac75[_0x56b22a(0xdb)](stablecoins[_0x56b22a(0x113)]['coin']))_0x36ac75[_0x56b22a(0x18b)](stablecoins[_0x56b22a(0x113)][_0x56b22a(0x14d)]);if(!_0x36ac75['includes'](stablecoins['usd'][_0x56b22a(0x14d)]))_0x36ac75[_0x56b22a(0x18b)](stablecoins[_0x56b22a(0xe2)][_0x56b22a(0x14d)]);if(!_0x36ac75[_0x56b22a(0xdb)](_0x56b22a(0x1b6)))_0x36ac75[_0x56b22a(0x18b)](_0x56b22a(0x1b6));try{_0x36ac75[_0x56b22a(0xf0)]((_0x51c0d4,_0x222961)=>{const _0x2e53d7=_0x56b22a;ws1[_0x222961]=wsClient[_0x2e53d7(0x173)](_0x51c0d4,'1m');}),ws2=wsClient[_0x56b22a(0x156)](),wsClient['on']('formattedMessage',_0x2bcdab=>{const _0x36fae3=_0x56b22a;if(!Array['isArray'](_0x2bcdab)&&!_0x2bcdab['wsKey'][_0x36fae3(0xdb)](_0x36fae3(0x114))){if(_0x2bcdab[_0x36fae3(0x148)]===_0x36fae3(0x13c)){global['ticker'][_0x2bcdab[_0x36fae3(0x13c)][_0x36fae3(0x1d1)]]=_0x2bcdab[_0x36fae3(0x13c)][_0x36fae3(0x1b7)];return;}}else{if(!Array[_0x36fae3(0xfc)](_0x2bcdab)&&_0x2bcdab[_0x36fae3(0x1ab)][_0x36fae3(0xdb)]('userData')){if(_0x2bcdab[_0x36fae3(0x16f)][_0x36fae3(0xdb)](_0x36fae3(0x10e))){updateNumberCoins(_0x2bcdab);return;}}}}),wsClient['on'](_0x56b22a(0x143),async _0x342613=>{currentCoins=await getCoins();});}catch(_0xb89135){await handleError(_0xb89135,_0x56b22a(0x160));}let _0x10cac1;while(_0x10cac1!=currentCoins[_0x56b22a(0x1d4)]-0x1){_0x10cac1=0x0,currentCoins[_0x56b22a(0xf0)](_0xfb7cb4=>{const _0xe4c248=_0x56b22a;if(_0xfb7cb4['coin']!=_0xe4c248(0xea)&&global[_0xe4c248(0xe3)][noslash(_0xfb7cb4[_0xe4c248(0x1d1)])])_0x10cac1++;});let _0x214c9e=Math['round'](_0x10cac1/(currentCoins[_0x56b22a(0x1d4)]-0x1)*0x64);proxyEmit('coin-loading-progress',_0x214c9e),await sleep(0xc8);}wsinitialized=!![];}async function getFiat(){const _0x44028a=_0x528603;let _0x232386=0x0,_0x2f80a0=0x0;try{_0x232386=global[_0x44028a(0xe3)][stablecoins[_0x44028a(0x113)]['coin']],_0x2f80a0=global[_0x44028a(0xe3)][stablecoins[_0x44028a(0xe2)]['coin']];}catch(_0x34a893){await handleError(_0x34a893,_0x44028a(0x127));}return{'eur':Number(_0x232386),'usd':Number(_0x2f80a0)};}async function setStartDatePerformance(_0x158608){const _0x3d5d5a=_0x528603,_0x45d538=fns[_0x3d5d5a(0x121)](new Date(_0x158608[_0x3d5d5a(0xfd)]),_0x3d5d5a(0x1d5));let _0x35e5d5=[];_0x35e5d5[stablecoins[_0x3d5d5a(0x113)][_0x3d5d5a(0x14d)]]=await getCloses(stablecoins[_0x3d5d5a(0x113)][_0x3d5d5a(0x1d1)],new Date(_0x158608['startdate']),0x1),_0x35e5d5[stablecoins[_0x3d5d5a(0xe2)][_0x3d5d5a(0x14d)]]=await getCloses(stablecoins['usd'][_0x3d5d5a(0x1d1)],new Date(_0x158608[_0x3d5d5a(0xfd)]),0x1);let _0x200283,_0x1126ca=[];_0x158608['portfolio'][_0x3d5d5a(0xf0)](_0x3659a2=>{const _0x1e274b=_0x3d5d5a;!_0x3659a2[_0x1e274b(0x1bd)]&&_0x1126ca['push']({'coin':_0x3659a2[_0x1e274b(0x14d)],'number':_0x3659a2['startnumber'],'price':_0x3659a2[_0x1e274b(0x1c0)]});}),_0x200283={'date':_0x45d538,'eur':_0x35e5d5[stablecoins['eur']['coin']][0x0],'usd':_0x35e5d5[stablecoins[_0x3d5d5a(0xe2)][_0x3d5d5a(0x14d)]][0x0],'coins':_0x1126ca};let _0xe3e94a=dbPerformance[_0x3d5d5a(0xdf)]('data')[_0x3d5d5a(0x1ca)]({'date':_0x45d538})[_0x3d5d5a(0x15f)]();_0xe3e94a?dbPerformance['get'](_0x3d5d5a(0x1af))[_0x3d5d5a(0x1ca)]({'date':_0x45d538})[_0x3d5d5a(0x181)](_0x200283)[_0x3d5d5a(0x1b4)]():dbPerformance['get'](_0x3d5d5a(0x1af))[_0x3d5d5a(0x18b)](_0x200283)['write'](),_0xe3e94a=dbPerformance[_0x3d5d5a(0xdf)]('data')['sortBy']('date')[_0x3d5d5a(0x15f)](),_0xe3e94a[_0x3d5d5a(0xf0)](_0x4b7ab7=>{const _0x382256=_0x3d5d5a;_0x4b7ab7[_0x382256(0x145)]<_0x45d538&&dbPerformance[_0x382256(0xdf)](_0x382256(0x1af))[_0x382256(0x103)]({'date':_0x4b7ab7[_0x382256(0x145)]})[_0x382256(0x1b4)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x1ebf57){const _0x2b6827=_0x528603;let _0x3eb57c,_0x17720d=[];logHistory(_0x2b6827(0x19c),_0x2b6827(0x1a2)),_0x1ebf57[_0x2b6827(0x122)][_0x2b6827(0xf0)](_0x3af303=>{const _0x28a114=_0x2b6827;if(_0x3af303[_0x28a114(0x14d)]!=_0x28a114(0xea)&&!_0x3af303[_0x28a114(0x1bd)])_0x17720d[_0x28a114(0x18b)]({'coin':_0x3af303[_0x28a114(0x14d)],'symbol':_0x3af303[_0x28a114(0x1d1)]});});let _0x147422=[];try{const _0x285dfb=fns[_0x2b6827(0x121)](fns[_0x2b6827(0x123)](_0x1ebf57[_0x2b6827(0xfd)][_0x2b6827(0x1a8)](/\//g,'-')),_0x2b6827(0x1b8));for(const _0x1a2426 of _0x17720d){if(_0x1a2426[_0x2b6827(0x14d)]!='BTC')_0x3eb57c=await exchange[_0x2b6827(0x19f)](_0x1a2426['symbol'],Date[_0x2b6827(0xe4)](_0x285dfb));_0x3eb57c[_0x2b6827(0xf0)](_0x2e1c05=>{const _0x35ddcc=_0x2b6827,_0x360b0d=_0x1a2426['symbol'][_0x35ddcc(0xdb)](_0x35ddcc(0x10f)),_0x5ef794=fns[_0x35ddcc(0x121)](fns[_0x35ddcc(0x123)](_0x2e1c05[_0x35ddcc(0x111)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x2326cb=fns[_0x35ddcc(0x121)](fns[_0x35ddcc(0x123)](_0x2e1c05[_0x35ddcc(0x111)]),_0x35ddcc(0x1d5));let _0x351b7a;if(_0x2e1c05['side']=='buy'&&_0x360b0d==![])_0x351b7a=_0x2e1c05[_0x35ddcc(0x108)];if(_0x2e1c05[_0x35ddcc(0x171)]==_0x35ddcc(0xf3)&&_0x360b0d==!![])_0x351b7a=-_0x2e1c05[_0x35ddcc(0x108)]*_0x2e1c05[_0x35ddcc(0x1ce)];if(_0x2e1c05[_0x35ddcc(0x171)]==_0x35ddcc(0x14a)&&_0x360b0d==![])_0x351b7a=-_0x2e1c05[_0x35ddcc(0x108)];if(_0x2e1c05[_0x35ddcc(0x171)]=='sell'&&_0x360b0d==!![])_0x351b7a=_0x2e1c05[_0x35ddcc(0x108)]*_0x2e1c05[_0x35ddcc(0x1ce)];_0x147422['push']({'timestamp':_0x5ef794,'date':_0x2326cb,'coin':_0x1a2426[_0x35ddcc(0x14d)],'symbol':_0x1a2426[_0x35ddcc(0x1d1)],'type':_0x2e1c05[_0x35ddcc(0x11d)],'side':_0x2e1c05[_0x35ddcc(0x171)],'reverse':_0x360b0d,'amount':formatResult(_0x2e1c05[_0x35ddcc(0x18a)],0x8),'filled':formatResult(_0x2e1c05[_0x35ddcc(0x18a)],0x8),'coinamount':formatResult(_0x351b7a,0x8),'price':formatResult(_0x2e1c05[_0x35ddcc(0x1ce)],0x8)});let _0x488a1e;if(_0x2e1c05[_0x35ddcc(0x171)]=='buy'&&_0x360b0d==![])_0x488a1e=-_0x2e1c05[_0x35ddcc(0x108)]*_0x2e1c05['price'];if(_0x2e1c05[_0x35ddcc(0x171)]==_0x35ddcc(0xf3)&&_0x360b0d==!![])_0x488a1e=_0x2e1c05[_0x35ddcc(0x108)];if(_0x2e1c05[_0x35ddcc(0x171)]==_0x35ddcc(0x14a)&&_0x360b0d==![])_0x488a1e=_0x2e1c05[_0x35ddcc(0x108)]*_0x2e1c05[_0x35ddcc(0x1ce)];if(_0x2e1c05[_0x35ddcc(0x171)]=='sell'&&_0x360b0d==!![])_0x488a1e=-_0x2e1c05[_0x35ddcc(0x108)];_0x147422[_0x35ddcc(0x18b)]({'date':_0x2326cb,'coin':'BTC','coinamount':formatResult(_0x488a1e,0x8)});});}_0x147422[_0x2b6827(0x134)]((_0x568529,_0x1a1bdc)=>_0x568529[_0x2b6827(0xe0)]>_0x1a1bdc[_0x2b6827(0xe0)]?0x1:_0x1a1bdc[_0x2b6827(0xe0)]>_0x568529[_0x2b6827(0xe0)]?-0x1:0x0),dbLogs['get'](_0x2b6827(0x1a5))[_0x2b6827(0x103)]()[_0x2b6827(0x1b4)](),_0x147422[_0x2b6827(0xf0)](_0x273846=>{const _0x319e33=_0x2b6827;let _0xee992b;_0x273846[_0x319e33(0x14d)]!='BTC'&&(_0xee992b={'time':_0x273846['timestamp'],'type':'order','event':'Order:\x20'+_0x273846[_0x319e33(0x1d1)]+'\x20'+_0x273846[_0x319e33(0x171)]+'\x20#'+_0x273846[_0x319e33(0x108)]+'\x20@'+_0x273846[_0x319e33(0x1ce)]},dbLogs['get'](_0x319e33(0x1a5))[_0x319e33(0x18b)](_0xee992b)['write']());});const _0x37eaa6=fns[_0x2b6827(0x16d)]({'start':new Date(_0x1ebf57[_0x2b6827(0xfd)]),'end':new Date()})[_0x2b6827(0xed)](_0x59a4e4=>fns['format'](_0x59a4e4,_0x2b6827(0x1d5)));let _0x55124c=[];_0x1ebf57[_0x2b6827(0x122)][_0x2b6827(0xf0)](_0x22c2bf=>{const _0x158edc=_0x2b6827;if(!_0x22c2bf['excluded']){_0x55124c[_0x22c2bf[_0x158edc(0x14d)]]=[];let _0x5edead=_0x22c2bf['startnumber'];_0x37eaa6[_0x158edc(0xf0)]((_0x5e7200,_0xbe1f3f)=>{const _0x26c7e1=_0x158edc;let _0x15b281=_0x147422[_0x26c7e1(0x11c)](_0x5c9c9e=>_0x5c9c9e[_0x26c7e1(0x14d)]==_0x22c2bf[_0x26c7e1(0x14d)]&&_0x5c9c9e[_0x26c7e1(0x145)]==_0x5e7200);if(_0x15b281[_0x26c7e1(0x1d4)]!=0x0){let _0xce729f=_0x15b281[_0x26c7e1(0xe9)]((_0x4c8bdc,_0x37ca70)=>{const _0x302c53=_0x26c7e1;return _0x4c8bdc+=_0x37ca70[_0x302c53(0x107)],_0x4c8bdc;},0x0);_0x5edead+=_0xce729f;}_0x55124c[_0x22c2bf['coin']][_0x5e7200]=_0x5edead;});}});const _0x4c8ba4=[..._0x17720d];_0x4c8ba4[_0x2b6827(0x18b)]({'coin':stablecoins[_0x2b6827(0x113)][_0x2b6827(0x14d)],'symbol':stablecoins[_0x2b6827(0x113)]['symbol']}),_0x4c8ba4['push']({'coin':stablecoins[_0x2b6827(0xe2)][_0x2b6827(0x14d)],'symbol':stablecoins[_0x2b6827(0xe2)]['symbol']});let _0x2b7d78=[];for(const _0x344dca of _0x4c8ba4){_0x2b7d78[_0x344dca['coin']]=await getCloses(_0x344dca[_0x2b6827(0x1d1)],new Date(_0x1ebf57[_0x2b6827(0xfd)]));}dbPerformance[_0x2b6827(0xdf)](_0x2b6827(0x1af))[_0x2b6827(0x103)]()[_0x2b6827(0x1b4)](),_0x37eaa6[_0x2b6827(0xf0)]((_0x22d8dd,_0x1c57bc)=>{const _0x51e8d3=_0x2b6827;let _0x132410,_0x455f84=[];_0x1c57bc==0x0?(_0x1ebf57[_0x51e8d3(0x122)]['forEach'](_0x12a1be=>{const _0xabd1db=_0x51e8d3;!_0x12a1be[_0xabd1db(0x1bd)]&&_0x455f84[_0xabd1db(0x18b)]({'coin':_0x12a1be[_0xabd1db(0x14d)],'number':_0x12a1be[_0xabd1db(0x1c1)],'price':_0x12a1be['startprice']});}),_0x132410={'date':_0x22d8dd,'eur':_0x2b7d78[stablecoins[_0x51e8d3(0x113)]['coin']][_0x1c57bc],'usd':_0x2b7d78[stablecoins[_0x51e8d3(0xe2)][_0x51e8d3(0x14d)]][_0x1c57bc],'coins':_0x455f84}):(_0x1ebf57[_0x51e8d3(0x122)]['forEach'](_0x1f090d=>{const _0x301e1a=_0x51e8d3;!_0x1f090d[_0x301e1a(0x1bd)]&&_0x455f84[_0x301e1a(0x18b)]({'coin':_0x1f090d[_0x301e1a(0x14d)],'number':_0x55124c[_0x1f090d[_0x301e1a(0x14d)]][_0x22d8dd],'price':_0x1f090d['coin']=='BTC'?0x1:_0x2b7d78[_0x1f090d[_0x301e1a(0x14d)]][_0x1c57bc]});}),_0x132410={'date':_0x22d8dd,'eur':_0x2b7d78[stablecoins[_0x51e8d3(0x113)][_0x51e8d3(0x14d)]][_0x1c57bc],'usd':_0x2b7d78[stablecoins[_0x51e8d3(0xe2)][_0x51e8d3(0x14d)]][_0x1c57bc],'coins':_0x455f84}),dbPerformance[_0x51e8d3(0xdf)](_0x51e8d3(0x1af))['push'](_0x132410)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x398938 of _0x147422){_0x398938[_0x2b6827(0x14d)]!='BTC'&&await updateCoinResults(_0x398938);}logHistory(_0x2b6827(0x19c),_0x2b6827(0x16c));}catch(_0xd36815){await handleError(_0xd36815,_0x2b6827(0x129));}}async function getCloses(_0x486313,_0x36a1b1,_0x1be9da=undefined){const _0x339d07=_0x528603,_0x54b8dd='1d';let _0x4e0d61,_0x114f3a;const _0x1c96e7=fns[_0x339d07(0x18c)](new Date(),_0x36a1b1)+0x1;try{const _0x2da13b=exchange['milliseconds']()-_0x1c96e7*0x18*0xe10*0x3e8;_0x4e0d61=await exchange[_0x339d07(0x1cc)](_0x486313,_0x54b8dd,_0x2da13b,_0x1be9da),_0x114f3a=await exchange[_0x339d07(0x1b2)](_0x486313);}catch(_0x1aa8b2){await handleError(_0x1aa8b2,'getCloses()');}let _0x2cb1c8=ohlcvToCloses(_0x4e0d61);return _0x2cb1c8['push'](_0x114f3a[_0x486313][_0x339d07(0x162)]),_0x2cb1c8;}function ohlcvToCloses(_0x4b00c5){let _0x179f75=[];return _0x4b00c5['forEach'](function(_0x5086e1){const _0x107e9f=_0x423f;_0x179f75[_0x107e9f(0x18b)](_0x5086e1[0x4]);}),_0x179f75;}function getConfiguration(_0x16d7bf){const _0x3b01e1=_0x528603;let _0x59812d=dbConfig[_0x3b01e1(0xdf)]('bot')[_0x3b01e1(0x1ca)]({'botID':_0x16d7bf})[_0x3b01e1(0x15f)]();if(_0x59812d){let _0x2b430e=![];!_0x59812d[_0x3b01e1(0x1a3)]&&(_0x59812d={..._0x59812d,'exchange':_0x3b01e1(0x17f)},_0x2b430e=!![]),!_0x59812d[_0x3b01e1(0x196)]&&(_0x59812d={..._0x59812d,'ordertype':_0x3b01e1(0x1cd)},_0x2b430e=!![]),!_0x59812d['timeout']&&(_0x59812d={..._0x59812d,'timeout':0x14},_0x2b430e=!![]),_0x2b430e&&(_0x59812d={'botID':_0x59812d[_0x3b01e1(0x187)],'exchange':_0x59812d[_0x3b01e1(0x1a3)],'apiKey':_0x59812d[_0x3b01e1(0x16e)],'apiSecret':_0x59812d['apiSecret'],'botname':_0x59812d[_0x3b01e1(0x14e)],'threshold':_0x59812d[_0x3b01e1(0xff)],'ordertype':_0x59812d[_0x3b01e1(0x196)],'timeout':_0x59812d[_0x3b01e1(0x182)],'startdate':_0x59812d[_0x3b01e1(0xfd)],'recreate':_0x59812d[_0x3b01e1(0x165)],'timeshift':_0x59812d[_0x3b01e1(0x180)],'headless':_0x59812d[_0x3b01e1(0x11e)],'cooldown':_0x59812d[_0x3b01e1(0x102)],'portfolio':_0x59812d[_0x3b01e1(0x122)]},dbConfig['get'](_0x3b01e1(0x106))[_0x3b01e1(0x103)]()['write'](),dbConfig[_0x3b01e1(0xdf)]('bot')[_0x3b01e1(0x18b)](_0x59812d)['write']());}else _0x59812d={'botID':_0x16d7bf,'exchange':_0x3b01e1(0x17f),'apiKey':'','apiSecret':'','botname':_0x3b01e1(0x118)+_0x16d7bf,'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x3b01e1(0x180)],'headless':![],'cooldown':0xa,'portfolio':[]};return _0x59812d;}function emittedConfiguration(){const _0xebbede=_0x528603;let _0x520aba;return config[_0xebbede(0x16e)]==''?_0x520aba=config:_0x520aba={...config,'apiKey':_0xebbede(0x1b5),'apiSecret':_0xebbede(0x1b5)},_0x520aba;}function getSettings(){const _0x42d8b1=_0x528603;return dbSettings[_0x42d8b1(0xdf)](_0x42d8b1(0xd9))[_0x42d8b1(0x15f)]();}function getSecure(){const _0x1f276e=_0x528603;return dbSecure[_0x1f276e(0xdf)](_0x1f276e(0x11f))[_0x1f276e(0x15f)]()||{};}function updateTimeshift(_0xd8a605){const _0x31e40c=_0x528603;let _0x377ed9=dbConfig['get'](_0x31e40c(0x106))[_0x31e40c(0x1ca)]({'botID':botID})[_0x31e40c(0x15f)]();_0x377ed9&&dbConfig[_0x31e40c(0xdf)](_0x31e40c(0x106))[_0x31e40c(0x1ca)]({'botID':botID})[_0x31e40c(0x181)]({'timeshift':_0xd8a605})[_0x31e40c(0x1b4)](),config[_0x31e40c(0x180)]=_0xd8a605,proxyEmit(_0x31e40c(0x18d),emittedConfiguration());}async function storeConfiguration(_0x5eee2f){const _0xa0b440=_0x528603;let _0x4dfd26=dbConfig['get'](_0xa0b440(0x106))[_0xa0b440(0x1ca)]({'botID':botID})['value']();_0x5eee2f={..._0x5eee2f,'apiKey':crypt[_0xa0b440(0x139)](secure[_0xa0b440(0x12c)],_0x5eee2f[_0xa0b440(0x16e)])[_0xa0b440(0x17c)],'apiSecret':crypt[_0xa0b440(0x139)](secure['privateKey'],_0x5eee2f[_0xa0b440(0x192)])[_0xa0b440(0x17c)]};if(_0x4dfd26){if(_0x5eee2f[_0xa0b440(0x16e)]=='************')_0x5eee2f[_0xa0b440(0x16e)]=config[_0xa0b440(0x16e)];if(_0x5eee2f[_0xa0b440(0x192)]==_0xa0b440(0x1b5))_0x5eee2f[_0xa0b440(0x192)]=config[_0xa0b440(0x192)];dbConfig[_0xa0b440(0xdf)]('bot')[_0xa0b440(0x1ca)]({'botID':botID})[_0xa0b440(0x181)](_0x5eee2f)[_0xa0b440(0x1b4)]();}else dbConfig[_0xa0b440(0xdf)](_0xa0b440(0x106))[_0xa0b440(0x18b)](_0x5eee2f)['write'](),process[_0xa0b440(0x19b)]({'status':'enabled','live':_0xa0b440(0x15b)});config={..._0x5eee2f};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0xa0b440(0x19b)]({'botname':_0x5eee2f['botname']}),proxyEmit(_0xa0b440(0x105)),reset();}async function storeHeadless(_0x2df399){const _0x46a3ca=_0x528603,_0x4ad3fa={...config,'headless':_0x2df399[_0x46a3ca(0x11e)]};let _0x28d85b=dbConfig[_0x46a3ca(0xdf)](_0x46a3ca(0x106))[_0x46a3ca(0x1ca)]({'botID':botID})[_0x46a3ca(0x15f)]();_0x28d85b&&dbConfig[_0x46a3ca(0xdf)](_0x46a3ca(0x106))[_0x46a3ca(0x1ca)]({'botID':botID})['assign'](_0x4ad3fa)[_0x46a3ca(0x1b4)](),config={..._0x4ad3fa},proxyEmit(_0x46a3ca(0x18d),emittedConfiguration());}function noslash(_0x2e8772){return _0x2e8772['replace']('/','');}function updateNumberCoins(_0x5c43fd){const _0x273973=_0x528603;_0x5c43fd[_0x273973(0x148)]&&_0x5c43fd[_0x273973(0x148)]==_0x273973(0x164)&&_0x5c43fd['balances'][_0x273973(0xf0)](_0x44ddba=>{const _0x1ed51d=_0x273973;let _0xfd82af=currentCoins['find'](_0x896851=>_0x896851['coin']==_0x44ddba['asset']);if(_0xfd82af)_0xfd82af[_0x1ed51d(0x147)]=Number(_0x44ddba[_0x1ed51d(0x1a9)]);}),_0x5c43fd[_0x273973(0x148)]&&_0x5c43fd['eventType']==_0x273973(0x1aa)&&(_0x5c43fd[_0x273973(0x10d)]==_0x273973(0x167)&&_0x5c43fd['orderStatus']=='FILLED'&&lastOrders['forEach'](_0x5e6062=>{const _0x389f11=_0x273973;if(_0x5e6062['orderId']==_0x5c43fd[_0x389f11(0x19d)]){if(_0x5e6062[_0x389f11(0x135)])_0x5e6062[_0x389f11(0x18a)]=_0x5c43fd[_0x389f11(0x10b)]*_0x5e6062[_0x389f11(0x1ce)];else _0x5e6062[_0x389f11(0x18a)]=_0x5c43fd[_0x389f11(0x10b)];}}));}async function getCoins(_0x48403d=!![]){const _0x539152=_0x528603;let _0x30e7ea,_0x49e270=[],_0x14b8ec=[],_0x445034=[];try{_0x30e7ea=await exchange[_0x539152(0x184)](),mybalances=_0x30e7ea[_0x539152(0x109)];if(!_0x48403d)for(const [_0x18888f,_0x13f05a]of Object[_0x539152(0xde)](mybalances)){_0x445034[_0x539152(0x18b)](_0x18888f);}else config[_0x539152(0x122)]['forEach'](_0x5a0254=>{const _0x4069c6=_0x539152;if(!_0x5a0254['excluded'])_0x445034[_0x4069c6(0x18b)](_0x5a0254[_0x4069c6(0x14d)]);});for(const [_0xdc92cb,_0x53c11d]of Object[_0x539152(0xde)](mybalances)){if(_0x445034[_0x539152(0xdb)](_0xdc92cb)){if((_0x53c11d[_0x539152(0x1a6)]()!=0x0||config['portfolio'][_0x539152(0x1ca)](_0x409556=>_0x409556[_0x539152(0x14d)]==_0xdc92cb))&&(allSymbols[_0x539152(0xdb)](_0xdc92cb+_0x539152(0xf5))||_0xdc92cb==_0x539152(0xea)))_0x14b8ec[_0x539152(0x18b)]({'coin':_0xdc92cb,'symbol':_0xdc92cb+_0x539152(0xf5),'reverse':![],'number':_0x53c11d}),_0xdc92cb!=_0x539152(0xea)&&_0x49e270[_0x539152(0x18b)](_0xdc92cb+_0x539152(0xf5));else(_0x53c11d[_0x539152(0x1a6)]()!=0x0||config['portfolio']['find'](_0x2e006c=>_0x2e006c[_0x539152(0x14d)]==_0xdc92cb))&&allSymbols[_0x539152(0xdb)](_0x539152(0x10f)+_0xdc92cb)&&(_0x14b8ec[_0x539152(0x18b)]({'coin':_0xdc92cb,'symbol':_0x539152(0x10f)+_0xdc92cb,'reverse':!![],'number':_0x53c11d}),_0xdc92cb!=_0x539152(0xea)&&_0x49e270[_0x539152(0x18b)](_0x539152(0x10f)+_0xdc92cb));}}}catch(_0x4fd6a7){if(!_0x48403d){if(_0x4fd6a7[_0x539152(0x1a6)]()[_0x539152(0xdb)](_0x539152(0xf9)))return logHistory('error',_0x539152(0x1a7)),![];else{if(_0x4fd6a7[_0x539152(0x1a6)]()[_0x539152(0xdb)](_0x539152(0x1c9)))return logHistory(_0x539152(0x14b),_0x539152(0xf6)),![];else{if(_0x4fd6a7['toString']()[_0x539152(0xdb)](_0x539152(0x13f)))return logHistory(_0x539152(0x14b),_0x539152(0x195)),![];else await handleError(_0x4fd6a7,_0x539152(0x1c7));}}}else await handleError(_0x4fd6a7,_0x539152(0x1c7));}return _0x14b8ec;}async function getPortfolio(_0x5cd9fd){const _0x311610=_0x528603;let _0x18b9f7=[],_0x15be42=[],_0x227fe4,_0x202339=[],_0x961602,_0x50301e;_0x5cd9fd[_0x311610(0x16e)]==='************'||_0x5cd9fd[_0x311610(0x192)]===_0x311610(0x1b5)?(_0x961602=config['apiKey'],_0x50301e=config[_0x311610(0x192)]):(_0x961602=_0x5cd9fd[_0x311610(0x16e)],_0x50301e=_0x5cd9fd['apiSecret']);await initExchange(_0x961602,_0x50301e);let _0x5ba88a=await loadSymbols();if(_0x5ba88a){_0x202339=await getCoins(![]);if(_0x202339===![])proxyEmit(_0x311610(0x122),![]);else{_0x202339[_0x311610(0xf0)](_0xf6d68b=>{const _0xc9d825=_0x311610;_0x18b9f7['push'](_0xf6d68b[_0xc9d825(0x1d1)]);});try{_0x15be42=await exchange[_0x311610(0x1b2)](_0x18b9f7);}catch(_0x19b852){await handleError(_0x19b852,_0x311610(0x1c5));}_0x202339[_0x311610(0xf0)](_0x123fbf=>{const _0x277e05=_0x311610;_0x123fbf[_0x277e05(0x14d)]!='BTC'?_0x227fe4=_0x123fbf[_0x277e05(0x135)]?0x1/_0x15be42[_0x123fbf['symbol']][_0x277e05(0x162)]:_0x15be42[_0x123fbf[_0x277e05(0x1d1)]][_0x277e05(0x162)]:_0x227fe4=0x1,_0x123fbf['price']=formatResult(_0x227fe4,0x8);}),proxyEmit('portfolio',_0x202339);}}else proxyEmit(_0x311610(0x122),![]);}function checkMinimums(_0x322cf9){const _0x42d203=_0x528603;let _0x2b175a=!![];const _0x5446df=!_0x322cf9['reverse']?markets[_0x322cf9['symbol']][_0x42d203(0x174)][_0x42d203(0x108)]['min']:markets[_0x322cf9[_0x42d203(0x1d1)]][_0x42d203(0x174)]['cost'][_0x42d203(0xe6)],_0x26b286=!_0x322cf9[_0x42d203(0x135)]?markets[_0x322cf9[_0x42d203(0x1d1)]][_0x42d203(0x174)][_0x42d203(0x12b)][_0x42d203(0xe6)]:markets[_0x322cf9[_0x42d203(0x1d1)]][_0x42d203(0x174)][_0x42d203(0x108)][_0x42d203(0xe6)];if(Math[_0x42d203(0x10a)](_0x322cf9['trade'])<_0x5446df)_0x2b175a=![];if(Math[_0x42d203(0x10a)](_0x322cf9['trade'])*_0x322cf9[_0x42d203(0x162)]<_0x26b286)_0x2b175a=![];return _0x2b175a;}async function getBalances(){const _0x186823=_0x528603;let _0x4da0a4=0x0,_0x4d2918;const _0x536cb7=config[_0x186823(0xff)];currentCoins['forEach'](_0x45c368=>{const _0x2e323b=_0x186823;if(_0x45c368[_0x2e323b(0x14d)]!=_0x2e323b(0xea)){let _0x479081=global[_0x2e323b(0xe3)][noslash(_0x45c368['symbol'])];_0x4d2918=_0x45c368[_0x2e323b(0x135)]?0x1/_0x479081:_0x479081;}else _0x4d2918=0x1;let _0x183513=_0x45c368['number']*_0x4d2918;_0x4da0a4+=_0x183513,_0x45c368[_0x2e323b(0x162)]=formatResult(Number(_0x4d2918),0x8),_0x45c368['value']=_0x183513;}),currentCoins['forEach'](_0x1545fe=>{const _0x1b131a=_0x186823;let _0x63c16e=config[_0x1b131a(0x122)][_0x1b131a(0x1ca)](_0x143658=>_0x143658[_0x1b131a(0x14d)]==_0x1545fe['coin']),_0x491282=Number(_0x63c16e[_0x1b131a(0x15d)]),_0x49cd72=_0x1545fe['value']/_0x4da0a4*0x64,_0xa92526=_0x491282*_0x4da0a4/0x64/_0x1545fe[_0x1b131a(0x162)]-_0x1545fe[_0x1b131a(0x147)];_0x1545fe['distribution']=formatResult(_0x49cd72,0x3),_0x1545fe[_0x1b131a(0x17b)]=formatResult(_0x491282,0x3),_0x1545fe['trade']=formatResult(_0xa92526,0x8),_0x1545fe[_0x1b131a(0x171)]='',_0x1545fe[_0x1b131a(0x1cf)]='';if(_0x1545fe[_0x1b131a(0x14d)]!=_0x1b131a(0xea)){if(_0x1545fe[_0x1b131a(0x15d)]>_0x491282)_0x1545fe[_0x1b131a(0x171)]=_0x1b131a(0x14a),_0x1545fe[_0x1b131a(0x1cf)]=checkMinimums(_0x1545fe);else _0x1545fe['distribution']<_0x491282&&(_0x1545fe['side']=_0x1b131a(0xf3),_0x1545fe[_0x1b131a(0x1cf)]=checkMinimums(_0x1545fe));}_0x1545fe[_0x1b131a(0x126)]=_0x1545fe['distribution']/_0x1545fe[_0x1b131a(0x17b)]-0x1;}),currentCoins[_0x186823(0x134)]((_0x316a6c,_0x10445c)=>_0x316a6c[_0x186823(0x126)]<_0x10445c[_0x186823(0x126)]?0x1:_0x10445c[_0x186823(0x126)]<_0x316a6c[_0x186823(0x126)]?-0x1:0x0);const _0x198766=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x198766[_0x186823(0x113)],'usd':_0x198766[_0x186823(0xe2)],'portfolio':JSON[_0x186823(0x19a)](currentCoins),'threshold':_0x536cb7},proxyEmit(_0x186823(0x176),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x186823(0x11e)])headlessMode({'portfolio':currentCoins,'threshold':_0x536cb7});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1fbf56=_0x528603;if(!lastBalances)return;let _0x25c74c=await getStartingBalances(![]),_0x2f136d=[],_0x12f5ff=[],_0x9cdd03;JSON[_0x1fbf56(0xe4)](lastBalances[_0x1fbf56(0x122)])[_0x1fbf56(0xf0)](_0x5b58a8=>{const _0x2ebd98=_0x1fbf56;let _0x5e33a6={'coin':_0x5b58a8[_0x2ebd98(0x14d)],'number':_0x5b58a8[_0x2ebd98(0x147)],'price':_0x5b58a8[_0x2ebd98(0x162)]};_0x2f136d['push'](_0x5e33a6);if(!_0x25c74c['coins']||!_0x25c74c['coins'][_0x2ebd98(0x1ca)](_0x455e7a=>_0x455e7a['coin']==_0x5b58a8['coin']&&_0x455e7a[_0x2ebd98(0x147)]!=0x0))_0x12f5ff[_0x2ebd98(0x18b)](_0x5e33a6);});const _0x152926=await getFiat();_0x9cdd03={'date':lastBalances['time'][_0x1fbf56(0x13b)]('\x20')[0x0],'eur':_0x152926[_0x1fbf56(0x113)],'usd':_0x152926[_0x1fbf56(0xe2)],'coins':_0x2f136d};let _0x2b6d7f=dbPerformance[_0x1fbf56(0xdf)](_0x1fbf56(0x1af))[_0x1fbf56(0x1ca)]({'date':_0x9cdd03[_0x1fbf56(0x145)]})[_0x1fbf56(0x15f)]();_0x2b6d7f?dbPerformance[_0x1fbf56(0xdf)](_0x1fbf56(0x1af))['find']({'date':_0x9cdd03['date']})['assign'](_0x9cdd03)['write']():dbPerformance['get'](_0x1fbf56(0x1af))[_0x1fbf56(0x18b)](_0x9cdd03)[_0x1fbf56(0x1b4)](),lastPerformanceStored=getHour();}function _0x423f(_0x2a3bae,_0x1142f1){const _0x2238c9=_0xfadd();return _0x423f=function(_0x1707cc,_0x23ba1b){_0x1707cc=_0x1707cc-0xd6;let _0xfadd2d=_0x2238c9[_0x1707cc];return _0xfadd2d;},_0x423f(_0x2a3bae,_0x1142f1);}function emitPerformance(){const _0x3cc53a=_0x528603;if(dbPerformance['has'](_0x3cc53a(0x1af))['value']()){let _0x3a09a0=dbPerformance['get'](_0x3cc53a(0x1af))[_0x3cc53a(0x186)](_0x3cc53a(0x145))['value']();proxyEmit(_0x3cc53a(0x146),_0x3a09a0),lastPerformanceEmitted=getDate();}else proxyEmit('performance',[]);}async function getStartingBalances(_0x49f37f=!![]){const _0x249740=_0x528603;let _0x2c95f0=dbPerformance[_0x249740(0xdf)](_0x249740(0x1af))[_0x249740(0x1ca)]({'date':config[_0x249740(0xfd)]})[_0x249740(0x15f)]();config[_0x249740(0x16e)]!=''&&!_0x2c95f0&&(await setStartDatePerformance(config),_0x2c95f0=dbPerformance[_0x249740(0xdf)](_0x249740(0x1af))[_0x249740(0x1ca)]({'date':config['startdate']})['value']());if(config[_0x249740(0x16e)]==''||!_0x2c95f0)return{};let _0x7cb983=0x0,_0x436b60=0x0,_0x2b9eed=0x0,_0x9e859c=[],_0x2d6cc4=0x0;config[_0x249740(0x122)][_0x249740(0xf0)](_0x23607f=>{const _0x46e77a=_0x249740;!_0x23607f['excluded']&&(_0x9e859c[_0x2d6cc4]={'coin':_0x23607f[_0x46e77a(0x14d)],'symbol':_0x23607f[_0x46e77a(0x1d1)],'number':_0x23607f['startnumber'],'price':_0x23607f[_0x46e77a(0x1c0)]},_0x7cb983+=_0x23607f['startprice']*_0x23607f[_0x46e77a(0x1c1)],_0x436b60+=_0x23607f['startprice']*_0x23607f['startnumber']*_0x2c95f0[_0x46e77a(0x113)],_0x2b9eed+=_0x23607f[_0x46e77a(0x1c0)]*_0x23607f[_0x46e77a(0x1c1)]*_0x2c95f0[_0x46e77a(0xe2)],_0x2d6cc4++);});let _0x1c6bc5={'btc':_0x7cb983,'eur':_0x436b60,'usd':_0x2b9eed,'coins':_0x9e859c};if(_0x49f37f)proxyEmit(_0x249740(0xe5),_0x1c6bc5);return _0x1c6bc5;}function headlessMode(_0x4e20a0){const _0x58ee7e=_0x528603;let _0x411359=_0x4e20a0[_0x58ee7e(0x122)],_0x52fc04=_0x4e20a0[_0x58ee7e(0xff)],_0x44288b=[];for(let _0x1a6bf3 of _0x411359){if(_0x1a6bf3[_0x58ee7e(0x14d)]!='BTC'){if(_0x1a6bf3[_0x58ee7e(0x15d)]/_0x1a6bf3[_0x58ee7e(0x17b)]-0x1>=_0x52fc04/0x64){if(_0x1a6bf3[_0x58ee7e(0x1cf)])_0x44288b['push'](_0x1a6bf3);}else{if(_0x1a6bf3[_0x58ee7e(0x15d)]/_0x1a6bf3[_0x58ee7e(0x17b)]-0x1<=-_0x52fc04/0x64){if(_0x1a6bf3[_0x58ee7e(0x1cf)])_0x44288b['push'](_0x1a6bf3);}}}}_0x44288b[_0x58ee7e(0x1d4)]>0x0&&placeOrder(_0x44288b);}function symbolToCoin(_0x3653b3){const _0x21c58e=_0x528603;let _0x4ad776;if(_0x3653b3[_0x21c58e(0xdb)](_0x21c58e(0xf5)))_0x4ad776=_0x3653b3[_0x21c58e(0x1a8)](_0x21c58e(0xf5),'');if(_0x3653b3['includes'](_0x21c58e(0x10f)))_0x4ad776=_0x3653b3[_0x21c58e(0x1a8)]('BTC/','');return _0x4ad776;}async function validateOrders(_0x1a4d38=0x0){const _0x35b79f=_0x528603;let _0x2e5c07=[],_0x358947=config[_0x35b79f(0x196)]==_0x35b79f(0x1cd)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x35b79f(0x182)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x35b79f(0xf0)](_0x109d8b=>{const _0xcb732b=_0x35b79f;let _0x247c0d=previousCoins[_0xcb732b(0x1ca)](_0x3544cf=>_0x3544cf[_0xcb732b(0x14d)]==symbolToCoin(_0x109d8b[_0xcb732b(0x1d1)])),_0x45bfe1=currentCoins['find'](_0x7fd256=>_0x7fd256[_0xcb732b(0x14d)]==symbolToCoin(_0x109d8b[_0xcb732b(0x1d1)])),_0x49e84b,_0x2adb27;_0x109d8b[_0xcb732b(0x171)]==_0xcb732b(0xf3)&&!_0x109d8b[_0xcb732b(0x135)]||_0x109d8b[_0xcb732b(0x171)]==_0xcb732b(0x14a)&&_0x109d8b[_0xcb732b(0x135)]?(_0x49e84b=_0x247c0d[_0xcb732b(0x147)]+0.9*_0x109d8b[_0xcb732b(0x18a)],_0x2adb27=_0x247c0d[_0xcb732b(0x147)]+1.1*_0x109d8b[_0xcb732b(0x18a)]):(_0x49e84b=_0x247c0d[_0xcb732b(0x147)]-1.1*_0x109d8b[_0xcb732b(0x18a)],_0x2adb27=_0x247c0d['number']-0.9*_0x109d8b[_0xcb732b(0x18a)]);const _0x52a9c5=_0x109d8b['filled']!=0x0&&_0x45bfe1['number']>=_0x49e84b&&_0x45bfe1[_0xcb732b(0x147)]<=_0x2adb27;_0x2e5c07['push'](_0x52a9c5);if(_0x52a9c5&&config['ordertype']!=_0xcb732b(0x1cd)){if(_0x109d8b[_0xcb732b(0x135)])logHistory(_0xcb732b(0x178),'Order\x20filled:\x20'+_0x109d8b[_0xcb732b(0x1d1)]+'\x20'+_0x109d8b[_0xcb732b(0x171)]+'\x20#'+formatResult(_0x109d8b[_0xcb732b(0x18a)]/_0x109d8b['price'],0x8)+'\x20@'+formatResult(_0x109d8b[_0xcb732b(0x1ce)],0x8));else logHistory(_0xcb732b(0x178),'Order\x20filled:\x20'+_0x109d8b[_0xcb732b(0x1d1)]+'\x20'+_0x109d8b['side']+'\x20#'+formatResult(_0x109d8b['filled'],0x8)+'\x20@'+formatResult(_0x109d8b['price'],0x8));}}),_0x2e5c07['forEach']((_0x39fe43,_0x6093b7)=>{const _0x290a92=_0x35b79f;if(_0x39fe43)lastOrders[_0x290a92(0x1b9)](_0x6093b7,0x1);});if(_0x1a4d38<_0x358947&&_0x2e5c07[_0x35b79f(0xdb)](![])){if(_0x1a4d38==0x0){config[_0x35b79f(0x196)]==_0x35b79f(0x1cd)?logHistory(_0x35b79f(0x14b),_0x35b79f(0x150)):logHistory('error',_0x35b79f(0xdd));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1a4d38);},0xa*0x3e8);}else{(_0x1a4d38==0x1||_0x1a4d38==Math[_0x35b79f(0x16a)](_0x358947/0x2)||_0x1a4d38==_0x358947-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x1a4d38);},validateOrderInterval);}}else{lockOrders=![];if(_0x1a4d38>0x0&&!_0x2e5c07[_0x35b79f(0xdb)](![]))config['ordertype']==_0x35b79f(0x1cd)?logHistory(_0x35b79f(0x19c),'Order(s)\x20validated\x20-\x20balancing\x20resumed'):logHistory('success',_0x35b79f(0x1bf));else _0x1a4d38>0x0&&_0x2e5c07[_0x35b79f(0xdb)](![])&&(config[_0x35b79f(0x196)]=='market'?logHistory(_0x35b79f(0x19c),_0x35b79f(0x132)+Math[_0x35b79f(0x16a)](_0x358947*validateOrderInterval/0xea60)+_0x35b79f(0x11a)):(lastOrders['forEach'](async _0x395918=>{const _0x2acc38=_0x35b79f;try{const _0x4652d5=await exchange[_0x2acc38(0xd8)](_0x395918[_0x2acc38(0x19d)],_0x395918[_0x2acc38(0x1d1)]);}catch(_0x327312){if(_0x327312['toString']()[_0x2acc38(0xdb)](_0x2acc38(0x179))){}else await handleError(_0x327312,_0x2acc38(0x119));}}),logHistory(_0x35b79f(0x19c),'Order(s)\x20not\x20filled\x20after\x20'+Math['round'](_0x358947*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20order(s)\x20canceled\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0x16c2d3=_0x528603;dbCoinResults[_0x16c2d3(0xdf)](_0x16c2d3(0x1a1))['remove']()['write']();let _0x53a2aa=await getStartingBalances(![]);_0x53a2aa[_0x16c2d3(0x1a1)][_0x16c2d3(0xf0)](_0x5419d1=>{const _0x3376b1=_0x16c2d3,_0x236318=_0x5419d1[_0x3376b1(0x1d1)]['includes']('BTC/');if(_0x5419d1[_0x3376b1(0x14d)]!=_0x3376b1(0xea)){let _0x5eeb41={'coin':_0x5419d1[_0x3376b1(0x14d)],'number':_0x5419d1[_0x3376b1(0x147)],'breakeven':_0x5419d1[_0x3376b1(0x1ce)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x3376b1(0xdf)](_0x3376b1(0x1a1))[_0x3376b1(0x18b)](_0x5eeb41)['write']();}});}async function updateCoinResults(_0x547bd1){const _0xbd1e0c=_0x528603;let _0x556e43,_0x2c7275,_0x38ec0e,_0x314eae,_0x32e78d,_0x349a84,_0x593998=dbCoinResults[_0xbd1e0c(0xdf)](_0xbd1e0c(0x1a1))['find']({'coin':_0x547bd1[_0xbd1e0c(0x14d)]})[_0xbd1e0c(0x15f)]();if(!_0x593998)return;if(_0x547bd1[_0xbd1e0c(0x1d0)]&&_0x547bd1[_0xbd1e0c(0x1d0)][_0xbd1e0c(0x1ae)]==_0xbd1e0c(0xea))_0x556e43=_0x547bd1['fee'][_0xbd1e0c(0x12b)];else{if(_0x547bd1[_0xbd1e0c(0x1d0)]&&_0x547bd1['fee'][_0xbd1e0c(0x1ae)]==_0xbd1e0c(0x13d))_0x556e43=_0x547bd1['fee'][_0xbd1e0c(0x12b)]*global[_0xbd1e0c(0xe3)][_0xbd1e0c(0x1b6)];else _0x556e43=0.001*_0x547bd1[_0xbd1e0c(0x18a)];}const _0x27aa94=_0x547bd1[_0xbd1e0c(0x1d1)][_0xbd1e0c(0xdb)](_0xbd1e0c(0x10f));_0x27aa94&&(_0x349a84={'coin':_0x547bd1[_0xbd1e0c(0x14d)],'symbol':_0x547bd1[_0xbd1e0c(0x1d1)],'filled':_0x547bd1[_0xbd1e0c(0x18a)]*_0x547bd1[_0xbd1e0c(0x1ce)],'side':_0x547bd1[_0xbd1e0c(0x171)]=='sell'?_0xbd1e0c(0xf3):_0xbd1e0c(0x14a),'price':0x1/_0x547bd1[_0xbd1e0c(0x1ce)]},_0x547bd1={..._0x349a84});_0x547bd1[_0xbd1e0c(0x171)]==_0xbd1e0c(0xf3)?_0x38ec0e=(_0x593998['breakeven']*_0x593998[_0xbd1e0c(0x147)]+_0x547bd1[_0xbd1e0c(0x1ce)]*_0x547bd1[_0xbd1e0c(0x18a)])/(_0x593998[_0xbd1e0c(0x147)]+_0x547bd1['filled']):_0x38ec0e=(_0x593998['breakeven']*_0x593998[_0xbd1e0c(0x147)]-_0x547bd1[_0xbd1e0c(0x1ce)]*_0x547bd1[_0xbd1e0c(0x18a)])/(_0x593998['number']-_0x547bd1[_0xbd1e0c(0x18a)]);_0x547bd1['side']==_0xbd1e0c(0xf3)?_0x314eae=_0x593998[_0xbd1e0c(0x188)]:_0x314eae=_0x593998[_0xbd1e0c(0x188)]+(_0x547bd1[_0xbd1e0c(0x1ce)]-_0x593998['breakeven'])*_0x547bd1['filled'];_0x2c7275=_0x547bd1[_0xbd1e0c(0x171)]==_0xbd1e0c(0x14a)?_0x593998['number']-_0x547bd1[_0xbd1e0c(0x18a)]:_0x593998['number']+_0x547bd1[_0xbd1e0c(0x18a)],_0x32e78d=(_0x547bd1[_0xbd1e0c(0x1ce)]-_0x38ec0e)*_0x2c7275;let _0x1256e3={'coin':_0x547bd1[_0xbd1e0c(0x14d)],'number':_0x2c7275,'breakeven':formatResult(_0x38ec0e,0x8),'realized':formatResult(_0x314eae,0x8),'unrealized':formatResult(_0x32e78d,0x8),'fees':formatResult(_0x593998['fees']+_0x556e43,0x8),'sells':_0x547bd1[_0xbd1e0c(0x171)]=='sell'?_0x593998[_0xbd1e0c(0x100)]+0x1:_0x593998[_0xbd1e0c(0x100)],'buys':_0x547bd1[_0xbd1e0c(0x171)]=='buy'?_0x593998[_0xbd1e0c(0xf7)]+0x1:_0x593998[_0xbd1e0c(0xf7)]};dbCoinResults[_0xbd1e0c(0xdf)](_0xbd1e0c(0x1a1))[_0xbd1e0c(0x1ca)]({'coin':_0x547bd1['coin']})['assign'](_0x1256e3)[_0xbd1e0c(0x1b4)]();}function _0xfadd(){const _0x290889=['botID','realized','search','filled','push','differenceInCalendarDays','configuration','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding\x20-\x20pausing\x20bot\x20for\x205\x20minutes','InsufficientFunds','InvalidNonce','getMinutes','apiSecret','ask','constructor','Binance\x20API\x20secret\x20is\x20invalid','ordertype','MIN_NOTIONAL','-results.json','getStartingBalances','stringify','send','success','orderId','indexOf','fetchOrders','closeWs','coins','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','logs','toString','Binance\x20API\x20key\x20is\x20invalid','replace','availableBalance','executionReport','wsKey','BTC/EUR','storeHeadless','currency','data','binanceus','2358324rzJnjP','fetchTickers','args','write','************','BNBBTC','close','yyyy-MM-dd\x27T\x27HH:mm:ss','splice','getPortfolio','4386599lDOsbw','keys','excluded','placeOrder()','Order(s)\x20filled\x20-\x20balancing\x20resumed','startprice','startnumber','event-history','Market','event','getPortfolio()','1177488hZNBFF','getCoins()','1EVZPkr','AuthenticationError','find','limit-high','fetchOHLCV','market','price','valid','fee','symbol','DAI/','1928546WNAUjA','length','yyyy/MM/dd','WebSockets()\x20|\x20Error\x20details:\x20','BTC/BUSD','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','cancelOrder','settings','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)\x20-\x20pausing\x20bot\x20for\x205\x20minutes','includes','getDate','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','entries','get','timestamp','-performance.json','usd','ticker','parse','starting-balances','min','function','getSeconds','reduce','BTC','loadMarkets','mkdirSync','map','Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','bb-secure.json','forEach','-config.json','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','buy','date-fns','/BTC','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','buys','Order\x20amount\x20is\x20invalid:\x20','API-key\x20format\x20invalid','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','shift','isArray','startdate','toLowerCase','threshold','sells','apply','cooldown','remove','argv','configuration-stored','bot','coinamount','amount','total','abs','accumulatedQuantity','ccxt','orderType','spot','BTC/','\x20|\x20Error\x20occured\x20-\x20pausing\x20bot\x20for\x205\x20minutes','datetime','sha256','eur','userData','slice','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','getHours','Bot\x20','cancelOrder()','\x20minutes\x20-\x20balancing\x20resumed','\x20order:\x20','filter','type','headless','secure','padStart','format','portfolio','parseISO','3338525BwAufU','time','delta','getFiat()','limit','recreateHistory()','bid','cost','privateKey','test','bb-settings.json','storeConfiguration','BTCBUSD','Invalid\x20quantity','Order(s)\x20not\x20validated\x20after\x20','BTCEUR','sort','reverse','ExchangeNotAvailable','wss://stream.binance.com:9443','DDoSProtection','decrypt','2079498PJMSvD','split','kline','BNB','\x20hour','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','emitHistory','exit','differenceInSeconds','reconnected','symbols','date','performance','number','eventType','getTime','sell','error','getMonth','coin','botname','page','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','lowdb/adapters/FileSync','trade','Executed\x20','defaults','add','subscribeSpotUserDataStream','RSA-OAEP','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','BTCUSDT','\x20|\x20Error\x20details:\x20','running','bot-','distribution','./version.json','value','initws()','3508320GMhhah','last','\x20|\x20Binance\x20exchange\x20is\x20not\x20available\x20-\x20pausing\x20bot\x20for\x205\x20minutes','outboundAccountPosition','recreate','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','LIMIT','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','001','round','getFullYear','Performance\x20recreation\x20completed\x20successfully','eachDayOfInterval','apiKey','wsMarket','createOrder','side','loadSymbols()','subscribeSpotKline','limits','version','balances','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','order','OrderNotFound','Limit\x20(high-margin)','target','message','./config/','RequestTimeout','binance','timeshift','assign','timeout','BTC/USDT','fetchBalance','(((.+)+)+)+$','sortBy'];_0xfadd=function(){return _0x290889;};return _0xfadd();}async function placeOrder(_0x25b972){const _0x284f5f=_0x528603,_0xcc4587=config['ordertype']==_0x284f5f(0x1cd)?'market':_0x284f5f(0x128);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON[_0x284f5f(0x19a)](currentCoins));for(const _0x583ce0 of _0x25b972){let _0x133265,_0x55e5f3,_0x55e399,_0x4c8c73,_0x5b18b9,_0x59c4d=_0x583ce0['symbol'];try{const _0x46694d=await exchange['fetchTickers'](_0x59c4d),_0x188fdc=_0x46694d[_0x59c4d];_0x133265=_0x188fdc[_0x284f5f(0x162)],_0x55e5f3=_0x188fdc[_0x284f5f(0x12a)],_0x55e399=_0x188fdc[_0x284f5f(0x193)];_0x583ce0['reverse']?(_0x4c8c73=_0x583ce0[_0x284f5f(0x171)]=='buy'?_0x284f5f(0x14a):_0x284f5f(0xf3),_0x5b18b9=Math[_0x284f5f(0x10a)](_0x583ce0[_0x284f5f(0x152)])/_0x133265):(_0x4c8c73=_0x583ce0['side'],_0x5b18b9=Math['abs'](_0x583ce0[_0x284f5f(0x152)]));_0xcc4587=='limit'&&(config[_0x284f5f(0x196)]==_0x284f5f(0x1cb)&&(_0x133265=_0x4c8c73==_0x284f5f(0xf3)?_0x55e5f3:_0x55e399),config[_0x284f5f(0x196)]=='limit-low'&&(_0x133265=_0x4c8c73==_0x284f5f(0xf3)?_0x55e399:_0x55e5f3));_0x5b18b9=formatResult(_0x5b18b9,0x8),_0x133265=formatResult(_0x133265,0x8);const _0x216b89=await exchange[_0x284f5f(0x170)](_0x59c4d,_0xcc4587,_0x4c8c73,_0x5b18b9,_0x133265);lastOrders['push']({'orderId':_0x216b89['id'],'symbol':_0x59c4d,'side':_0x4c8c73,'reverse':_0x583ce0[_0x284f5f(0x135)],'amount':_0x583ce0['reverse']?_0x216b89[_0x284f5f(0x108)]*_0x216b89[_0x284f5f(0x1ce)]:_0x216b89[_0x284f5f(0x108)],'filled':_0x583ce0[_0x284f5f(0x135)]?_0x216b89[_0x284f5f(0x18a)]*_0x216b89[_0x284f5f(0x1ce)]:_0x216b89['filled'],'price':_0x216b89[_0x284f5f(0x1ce)]});const _0x12323e=_0xcc4587==_0x284f5f(0x1cd)?_0x284f5f(0x1c3):config[_0x284f5f(0x196)]==_0x284f5f(0x1cb)?_0x284f5f(0x17a):'Limit\x20(low-margin)';if(_0xcc4587=='market')logHistory(_0x284f5f(0x178),_0x12323e+_0x284f5f(0x11b)+_0x59c4d+'\x20'+_0x4c8c73+'\x20#'+formatResult(_0x216b89[_0x284f5f(0x18a)],0x8)+'\x20@'+formatResult(_0x216b89[_0x284f5f(0x1ce)],0x8));else logHistory(_0x284f5f(0x178),_0x12323e+'\x20order:\x20'+_0x59c4d+'\x20'+_0x4c8c73+'\x20#'+formatResult(_0x216b89[_0x284f5f(0x108)],0x8)+'\x20@'+formatResult(_0x216b89[_0x284f5f(0x1ce)],0x8));_0x216b89[_0x284f5f(0x14d)]=_0x583ce0[_0x284f5f(0x14d)],await updateCoinResults(_0x216b89);if(config[_0x284f5f(0x102)]!=0x0){let _0x43b6ba=null;if(cooldownTracker[_0x284f5f(0x1d4)]==config[_0x284f5f(0x102)]-0x1)_0x43b6ba=cooldownTracker[_0x284f5f(0xfb)]();const _0x53a7a2=getTimeStamp();cooldownTracker[_0x284f5f(0x18b)](_0x53a7a2);if(_0x43b6ba){const _0x367478=fns[_0x284f5f(0x142)](new Date(_0x53a7a2),new Date(_0x43b6ba));_0x367478<cooldownInterval&&(logHistory(_0x284f5f(0x14b),_0x284f5f(0x153)+config[_0x284f5f(0x102)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+_0x284f5f(0x116)+cooldownPeriod/(0xe10*0x3e8)+_0x284f5f(0x13e)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x4e03a7){if(_0x4e03a7[_0x284f5f(0x1a6)]()['includes'](_0x284f5f(0x197)))logHistory('error',_0x284f5f(0xd7)+_0x59c4d);else{if(_0x4e03a7['toString']()['includes'](_0x284f5f(0x131)))logHistory(_0x284f5f(0x14b),_0x284f5f(0xf8)+_0x59c4d);else await handleError(_0x4e03a7,_0x284f5f(0x1be));}}}if(lastOrders['length']!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x284f5f(0x11e)]&&(config[_0x284f5f(0x196)]==_0x284f5f(0x1cd)?logHistory(_0x284f5f(0x14b),_0x284f5f(0x1a4)):logHistory(_0x284f5f(0x14b),_0x284f5f(0x168)));else coolingDown&&(!config['headless']&&logHistory(_0x284f5f(0x14b),_0x284f5f(0x158)));}}function logHistory(_0x57c7c5,_0x32834e,_0x536fc0=''){const _0x2f47ec=_0x528603;let _0x26fc48={'time':getTimeStamp(),'type':_0x57c7c5,'event':_0x32834e};dbLogs[_0x2f47ec(0xdf)](_0x2f47ec(0x1a5))[_0x2f47ec(0x18b)](_0x26fc48)[_0x2f47ec(0x1b4)]();if(_0x536fc0=='')_0x536fc0=_0x32834e;proxyEmit(_0x2f47ec(0x1c4),{'log':_0x26fc48,'summary':_0x536fc0}),process[_0x2f47ec(0x19b)]({'telegram':_0x26fc48}),logging(''+_0x26fc48['event']);}function emitHistory(_0x251eae={}){const _0x38fc26=_0x528603;Object[_0x38fc26(0x1bc)](_0x251eae)['length']==0x0&&(_0x251eae={'type':[_0x38fc26(0x178),'event'],'event':'','page':0x1});if(_0x251eae[_0x38fc26(0x11d)][_0x38fc26(0xdb)](_0x38fc26(0x1c4)))_0x251eae[_0x38fc26(0x11d)]['splice'](_0x251eae[_0x38fc26(0x11d)][_0x38fc26(0x19e)](_0x38fc26(0x1c4)),0x1,_0x38fc26(0x14b),'success');if(dbLogs['has'](_0x38fc26(0x1a5))['value']()){let _0x43300b=dbLogs['get']('logs')[_0x38fc26(0x11c)](_0x3bee16=>{const _0x3fa60a=_0x38fc26;if(_0x251eae[_0x3fa60a(0x11d)][_0x3fa60a(0x1d4)]==0x0)return![];else return _0x251eae[_0x3fa60a(0x11d)][_0x3fa60a(0xdb)](_0x3bee16[_0x3fa60a(0x11d)]);})[_0x38fc26(0x11c)](_0x3e61b7=>{const _0x27a1a5=_0x38fc26;if(_0x251eae[_0x27a1a5(0x1c4)]=='')return!![];else return _0x3e61b7[_0x27a1a5(0x1c4)][_0x27a1a5(0xfe)]()['includes'](_0x251eae['event'][_0x27a1a5(0xfe)]());})[_0x38fc26(0x186)](_0x38fc26(0x125)),_0x4fddd=_0x43300b[_0x38fc26(0x15f)]()['length'];_0x43300b=_0x43300b['reverse']()[_0x38fc26(0x115)]((_0x251eae[_0x38fc26(0x14f)]-0x1)*logPageSize,_0x251eae[_0x38fc26(0x14f)]*logPageSize-0x1)[_0x38fc26(0x135)]()[_0x38fc26(0x15f)](),proxyEmit('event-history',{'logs':_0x43300b,'total':_0x4fddd});}else proxyEmit(_0x38fc26(0x1c2),{'logs':[],'total':0x0});}async function pauseBot(_0x4bd8a5){const _0x126749=_0x528603,_0x2f0915=new Date()[_0x126749(0x149)]();if(!lastBotPause)lastBotPause=new Date()['getTime']();else{if(_0x2f0915-lastBotPause-pauseBotInterval<0x1388){consecutivePauses++;if(consecutivePauses>0x5)process[_0x126749(0x141)](0x1);}else consecutivePauses=0x1;lastBotPause=new Date()[_0x126749(0x149)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),await sleep(_0x4bd8a5),botPaused=![],reset();}}async function handleError(_0x2aad60,_0x44e34c,_0x8e3c5f=''){const _0x4f3d5e=_0x528603;if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x138)))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0xda)),await pauseBot(pauseBotInterval);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x136)))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0x163)),await pauseBot(pauseBotInterval);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x17e)))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0x18e)),await pauseBot(pauseBotInterval);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)]('API-key\x20format\x20invalid'))logHistory(_0x4f3d5e(0x14b),_0x44e34c+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x4f3d5e(0x14b),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process['exit'](0x4d);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)]('AuthenticationError'))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0xfa)),logHistory(_0x4f3d5e(0x14b),_0x4f3d5e(0xee)),process[_0x4f3d5e(0x141)](0x4d);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x4f3d5e(0x14b),_0x44e34c+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory('error',_0x4f3d5e(0xee)),process['exit'](0x4d);else{if(_0x2aad60['toString']()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x166)))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0xf2)),logHistory(_0x4f3d5e(0x14b),'Bot\x20was\x20stopped\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot'),process[_0x4f3d5e(0x141)](0x4d);else{if(_0x2aad60[_0x4f3d5e(0x1a6)]()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x190)))logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0xf2)),logHistory(_0x4f3d5e(0x14b),_0x4f3d5e(0xee)),process[_0x4f3d5e(0x141)](0x4d);else _0x2aad60['toString']()[_0x4f3d5e(0xdb)](_0x4f3d5e(0x18f))?logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0x177)):(logHistory(_0x4f3d5e(0x14b),_0x44e34c+_0x4f3d5e(0x110)),logging(_0x44e34c+_0x4f3d5e(0x15a),_0x2aad60),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3373f2,_0xf7d4d8){return parseFloat(_0x3373f2['toFixed'](_0xf7d4d8));}function logging(_0x1c2ba6,_0x19fe2f=''){console['log'](getTimeStamp()+':\x20Bot\x20'+botID+'\x20>\x20'+_0x1c2ba6,_0x19fe2f);}function getServerTime(){const _0x3f5a49=_0x528603,_0x24715d=new Date();return _0x24715d['getFullYear']()+'/'+(_0x24715d[_0x3f5a49(0x14c)]()+0x1)[_0x3f5a49(0x1a6)]()[_0x3f5a49(0x120)](0x2,'0')+'/'+_0x24715d[_0x3f5a49(0xdc)]()['toString']()[_0x3f5a49(0x120)](0x2,'0')+'\x20'+_0x24715d[_0x3f5a49(0x117)]()[_0x3f5a49(0x1a6)]()[_0x3f5a49(0x120)](0x2,'0')+':'+_0x24715d[_0x3f5a49(0x191)]()[_0x3f5a49(0x1a6)]()[_0x3f5a49(0x120)](0x2,'0')+':'+_0x24715d[_0x3f5a49(0xe8)]()[_0x3f5a49(0x1a6)]()[_0x3f5a49(0x120)](0x2,'0');}function getTimeStamp(){const _0x104b2d=_0x528603,_0x4d0301=shiftedTime();return _0x4d0301[_0x104b2d(0x16b)]()+'/'+(_0x4d0301[_0x104b2d(0x14c)]()+0x1)[_0x104b2d(0x1a6)]()[_0x104b2d(0x120)](0x2,'0')+'/'+_0x4d0301[_0x104b2d(0xdc)]()[_0x104b2d(0x1a6)]()[_0x104b2d(0x120)](0x2,'0')+'\x20'+_0x4d0301[_0x104b2d(0x117)]()[_0x104b2d(0x1a6)]()[_0x104b2d(0x120)](0x2,'0')+':'+_0x4d0301[_0x104b2d(0x191)]()[_0x104b2d(0x1a6)]()[_0x104b2d(0x120)](0x2,'0')+':'+_0x4d0301[_0x104b2d(0xe8)]()[_0x104b2d(0x1a6)]()[_0x104b2d(0x120)](0x2,'0');}function getDate(){const _0x367aaf=_0x528603,_0x115f01=shiftedTime();return _0x115f01[_0x367aaf(0x16b)]()+'/'+(_0x115f01[_0x367aaf(0x14c)]()+0x1)[_0x367aaf(0x1a6)]()[_0x367aaf(0x120)](0x2,'0')+'/'+_0x115f01[_0x367aaf(0xdc)]()[_0x367aaf(0x1a6)]()[_0x367aaf(0x120)](0x2,'0');}function getHour(){const _0x10b175=_0x528603,_0x2af9aa=shiftedTime();return _0x2af9aa[_0x10b175(0x117)]()['toString']()[_0x10b175(0x120)](0x2,'0');}function sleep(_0x1dcd3a){return new Promise(_0x53c47a=>setTimeout(_0x53c47a,_0x1dcd3a));}function shiftedTime(){const _0x48fabe=_0x528603,_0x125c4a=new Date();let _0x12120e=_0x125c4a;if(config&&config[_0x48fabe(0x180)]!==0x0)_0x12120e=fns[_0x48fabe(0x155)](_0x125c4a,{'hours':config[_0x48fabe(0x180)]});return _0x12120e;}