const _0xba2ebe=_0x15e3;(function(_0x5c130e,_0x31b422){const _0x329e98=_0x15e3,_0x1a3b71=_0x5c130e();while(!![]){try{const _0xfe6589=parseInt(_0x329e98(0x333))/0x1*(-parseInt(_0x329e98(0x38c))/0x2)+parseInt(_0x329e98(0x32d))/0x3*(-parseInt(_0x329e98(0x261))/0x4)+-parseInt(_0x329e98(0x391))/0x5*(-parseInt(_0x329e98(0x1fb))/0x6)+-parseInt(_0x329e98(0x22b))/0x7+-parseInt(_0x329e98(0x2fc))/0x8+-parseInt(_0x329e98(0x26f))/0x9+parseInt(_0x329e98(0x2ac))/0xa*(parseInt(_0x329e98(0x25e))/0xb);if(_0xfe6589===_0x31b422)break;else _0x1a3b71['push'](_0x1a3b71['shift']());}catch(_0x2099d7){_0x1a3b71['push'](_0x1a3b71['shift']());}}}(_0x108d,0xafe2c));const _0x24e7d0=function(){let _0x421cd3=!![];return function(_0x5be5c5,_0x4d5f5c){const _0x596c38=_0x421cd3?function(){const _0x17ae82=_0x15e3;if(_0x4d5f5c){const _0x45279=_0x4d5f5c[_0x17ae82(0x29b)](_0x5be5c5,arguments);return _0x4d5f5c=null,_0x45279;}}:function(){};return _0x421cd3=![],_0x596c38;};}(),_0x2991f6=_0x24e7d0(this,function(){const _0x8dc82c=_0x15e3;return _0x2991f6['toString']()[_0x8dc82c(0x206)]('(((.+)+)+)+$')[_0x8dc82c(0x329)]()[_0x8dc82c(0x2b9)](_0x2991f6)[_0x8dc82c(0x206)](_0x8dc82c(0x33e));});_0x2991f6();'use strict';const ccxt=require(_0xba2ebe(0x331)),low=require(_0xba2ebe(0x23c)),FileSync=require(_0xba2ebe(0x39d)),fs=require('fs'),fns=require(_0xba2ebe(0x39a)),Crypt=require(_0xba2ebe(0x38d))['Crypt'],util=require('util'),argv=require(_0xba2ebe(0x3ae))(process[_0xba2ebe(0x2f6)][_0xba2ebe(0x295)](0x2))[_0xba2ebe(0x2f6)],path=require('path'),axios=require(_0xba2ebe(0x350));let exchange,gTicker={},gChange={};const usdBasecoins=['USD',_0xba2ebe(0x21b),_0xba2ebe(0x311),'USDT',_0xba2ebe(0x2e8),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object['freeze']({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0xba2ebe(0x1f4)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0xba2ebe(0x2aa)+pauseBotInterval/0xea60+_0xba2ebe(0x225),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0xba2ebe(0x35f))[_0xba2ebe(0x28a)],botID=process[_0xba2ebe(0x2f6)][0x2]||_0xba2ebe(0x2bb),pattern=/^[0-9]{3}$/;!pattern[_0xba2ebe(0x2f5)](botID)&&(console['log'](_0xba2ebe(0x386)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process['argv'][0x3]||'',configpath=userID?'./config/'+userID+'/':_0xba2ebe(0x315),logspath=userID?_0xba2ebe(0x38e)+userID+'/':_0xba2ebe(0x38e),loggerfile=fs[_0xba2ebe(0x281)](logspath+_0xba2ebe(0x3af),{'flags':'a'});!fs[_0xba2ebe(0x275)](configpath)&&fs[_0xba2ebe(0x30e)](configpath);function _0x15e3(_0x39bb89,_0x3e61e2){const _0x407521=_0x108d();return _0x15e3=function(_0x2991f6,_0x24e7d0){_0x2991f6=_0x2991f6-0x1f1;let _0x108d0c=_0x407521[_0x2991f6];return _0x108d0c;},_0x15e3(_0x39bb89,_0x3e61e2);}!fs[_0xba2ebe(0x275)](logspath)&&fs[_0xba2ebe(0x30e)](logspath);const configfile=configpath+_0xba2ebe(0x218)+botID+'-config.json',logfile=configpath+_0xba2ebe(0x218)+botID+_0xba2ebe(0x24b),performancefile=configpath+'bot-'+botID+_0xba2ebe(0x318),coinresultsfile=configpath+_0xba2ebe(0x218)+botID+_0xba2ebe(0x371),settingsfile=configpath+_0xba2ebe(0x3a8),securefile=configpath+_0xba2ebe(0x380),configbackuppath=configpath+_0xba2ebe(0x2b5),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[],'version':serverversion})[_0xba2ebe(0x3b4)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0xba2ebe(0x1f8)]({'data':[],'version':serverversion})['write']();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0xba2ebe(0x1f8)]({'bot':[],'version':serverversion})[_0xba2ebe(0x3b4)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0xba2ebe(0x1f8)]({'coins':[],'version':serverversion})[_0xba2ebe(0x3b4)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0xba2ebe(0x370),'rsaStandard':_0xba2ebe(0x2b6)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x3a647e=>{const _0x27d16d=_0xba2ebe;console[_0x27d16d(0x205)](_0x3a647e);},'simple':_0x249967=>{const _0x417637=_0xba2ebe;console[_0x417637(0x205)](_0x249967),loggerfile[_0x417637(0x3b4)](util[_0x417637(0x239)](_0x249967)+'\x0a');},'full':async(_0x2c2096,_0x574551='')=>{const _0x4941a7=_0xba2ebe;let _0x479ee8;if(config[_0x4941a7(0x298)])_0x479ee8=getTimeStamp()+':\x20'+config['botname']+_0x4941a7(0x36e)+_0x2c2096;else _0x479ee8=getTimeStamp()+_0x4941a7(0x303)+botID+_0x4941a7(0x36e)+_0x2c2096;console[_0x4941a7(0x205)](_0x479ee8),loggerfile[_0x4941a7(0x3b4)](util[_0x4941a7(0x239)](_0x479ee8)+'\x0a'),_0x574551&&(console[_0x4941a7(0x205)](_0x574551),loggerfile['write'](util['format'](_0x574551)+'\x0a'));},'debug':async(_0x2e7c87,_0x1c7aa8='')=>{const _0x35f5e1=_0xba2ebe;let _0x46df26;if(config['showname'])_0x46df26=getTimeStamp()+':\x20'+config[_0x35f5e1(0x31b)]+_0x35f5e1(0x360)+_0x2e7c87;else _0x46df26=getTimeStamp()+_0x35f5e1(0x303)+botID+'\x20>\x20[DEBUG]\x20'+_0x2e7c87;if(debugging)console['log'](_0x46df26);loggerfile[_0x35f5e1(0x3b4)](util[_0x35f5e1(0x239)](_0x46df26)+'\x0a');if(_0x1c7aa8){if(debugging)console['log'](_0x1c7aa8);loggerfile['write'](util['format'](_0x1c7aa8)+'\x0a');}}};process['on'](_0xba2ebe(0x234),function(_0x43d06c){handleError(_0x43d06c,'uncaughtException');});settings[_0xba2ebe(0x31a)]!=config[_0xba2ebe(0x31a)]&&updateTimeshift(settings[_0xba2ebe(0x31a)]);settings[_0xba2ebe(0x35d)]!=config[_0xba2ebe(0x35d)]&&updateOnepagemode(settings['onepagemode']);(settings[_0xba2ebe(0x299)]&&!config['marketcapApi']||!settings['marketcapApi']&&config['marketcapApi'])&&updateMarketcapApi(settings[_0xba2ebe(0x299)]);process[_0xba2ebe(0x231)]({'started':_0xba2ebe(0x236)},_0x421e05=>{}),initializeProcessListeners();function proxyEmit(_0x40bc42,_0x1500f2=null){const _0x54d88f=_0xba2ebe;process[_0x54d88f(0x231)]({'function':_0x40bc42,'args':_0x1500f2},_0x1561ad=>{});}function initializeProcessListeners(){const _0x1427ae=_0xba2ebe;process['on'](_0x1427ae(0x1fa),_0x838fd7=>{const _0x153a88=_0x1427ae;switch(Object[_0x153a88(0x32e)](_0x838fd7)[0x0]){case _0x153a88(0x31a):_0x838fd7[_0x153a88(0x31a)]!=undefined&&(settings[_0x153a88(0x31a)]=_0x838fd7[_0x153a88(0x31a)],updateTimeshift(settings[_0x153a88(0x31a)]));break;case'onepagemode':_0x838fd7[_0x153a88(0x35d)]!=undefined&&(settings[_0x153a88(0x35d)]=_0x838fd7[_0x153a88(0x35d)],updateOnepagemode(settings[_0x153a88(0x35d)]));break;case _0x153a88(0x299):_0x838fd7[_0x153a88(0x299)]!=undefined&&(settings['marketcapApi']=_0x838fd7[_0x153a88(0x299)],updateMarketcapApi(settings[_0x153a88(0x299)]));break;case _0x153a88(0x235):_0x838fd7[_0x153a88(0x235)]!=undefined&&(bots=JSON[_0x153a88(0x29e)](_0x838fd7['bots']),proxyEmit(_0x153a88(0x235),bots));break;case _0x153a88(0x356):switch(_0x838fd7['function']){case'initclient':initclient();break;case'toggleBotMode':toggleBotMode();break;case _0x153a88(0x306):emitHistory(_0x838fd7[_0x153a88(0x1fd)]);break;case _0x153a88(0x202):deleteHistoryAlerts(_0x838fd7['args']);break;case'getPortfolio':getPortfolio(_0x838fd7[_0x153a88(0x1fd)]);break;case _0x153a88(0x361):storeConfiguration(_0x838fd7['args']);break;case _0x153a88(0x319):storeHeadless(_0x838fd7['args']);break;case _0x153a88(0x2d5):storeFiat(_0x838fd7[_0x153a88(0x1fd)]);break;case _0x153a88(0x237):resetHistory();break;case _0x153a88(0x39e):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0x838fd7[_0x153a88(0x1fd)]);break;case _0x153a88(0x26d):cancelLoading();break;case _0x153a88(0x305):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x153a88(0x276):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0x4cd380=![]){const _0x3032b7=_0xba2ebe;logger[_0x3032b7(0x313)](_0x3032b7(0x200)+(_0x4cd380?'exchange\x20reloaded':_0x3032b7(0x30f))+_0x3032b7(0x2fe)+config[_0x3032b7(0x230)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x4cd380)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x3032b7(0x1ff)]!=''&&config[_0x3032b7(0x1ff)]!=_0x3032b7(0x2a0)){loadingProgress=0x0;if(_0x4cd380){if(pidCoinReloading)clearTimeout(pidCoinReloading);await initExchange();try{await loadSymbols();}catch(_0x210e0c){handleErrorNoStop(_0x210e0c,_0x3032b7(0x36c));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0xfe7771=await getCoins();[currentCoins,currentCoinsAll]=_0xfe7771,blockTransactionDetection=![],getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x3032b7(0x313)](_0x3032b7(0x366)),getBalances(![]),await updateOpenOrders();if(lastOrders['length']==0x0&&allOpenOrders[_0x3032b7(0x222)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x485e6a=![]){const _0x1fa497=_0xba2ebe;logger['debug'](_0x1fa497(0x229)+(_0x485e6a?'quick':_0x1fa497(0x253))+_0x1fa497(0x32b)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x485e6a){getBalances();return;}coinsLoaded=![];if(config[_0x1fa497(0x1ff)]!=''&&config[_0x1fa497(0x1ff)]!=_0x1fa497(0x2a0)){loadingProgress=0x1;const _0x192ffe=await getCoins();[currentCoins,currentCoinsAll]=_0x192ffe,blockTransactionDetection=![],loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x1fa497(0x313)](_0x1fa497(0x366)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x1fa497(0x222)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x3917ed){const _0x2f6434=_0xba2ebe;let _0x29bae2=![];if(_0x3917ed)_0x29bae2=!![];let _0xf8109e;_0x29bae2?_0xf8109e=_0x3917ed[_0x2f6434(0x310)](_0xd60cff=>_0xd60cff[_0x2f6434(0x2f8)]):_0xf8109e=currentCoinsAll[_0x2f6434(0x310)](_0x2aab6c=>_0x2aab6c[_0x2f6434(0x2f8)]);if(!config[_0x2f6434(0x299)]||!_0x29bae2&&!config[_0x2f6434(0x33c)]||_0xf8109e[_0x2f6434(0x222)]==0x0)return;let _0x3b2962=null;try{_0x3b2962=await axios[_0x2f6434(0x2b7)](_0x2f6434(0x221),{'headers':{'X-CMC_PRO_API_KEY':settings[_0x2f6434(0x299)]},'params':{'symbol':_0xf8109e[_0x2f6434(0x329)]()}});}catch(_0x4bd0d){_0x3b2962=null,_0x4bd0d[_0x2f6434(0x329)]()[_0x2f6434(0x330)]('status\x20code\x20401')?(config[_0x2f6434(0x299)]=![],updateConfig(),proxyEmit(_0x2f6434(0x3a4),emittedConfiguration()),logHistory(_0x2f6434(0x29f),_0x2f6434(0x201))):(logHistory(_0x2f6434(0x29f),_0x2f6434(0x2bd)+schedulerInterval/(0x3c*0x3e8)+_0x2f6434(0x225)),logger[_0x2f6434(0x313)]('Error\x20details:',_0x4bd0d[_0x2f6434(0x329)]()+_0x2f6434(0x2d3)+_0x4bd0d[_0x2f6434(0x395)]));}if(_0x3b2962){let _0x5b62ab=0x0;const _0xcc32df=_0x3b2962[_0x2f6434(0x34a)];_0xf8109e[_0x2f6434(0x2ad)](_0x5f0307=>{const _0x17ff9d=_0x2f6434;if(_0xcc32df['data'][_0x5f0307][0x0])_0x5b62ab+=_0xcc32df['data'][_0x5f0307][0x0]['quote']['USD'][_0x17ff9d(0x28c)];}),_0xf8109e['forEach'](_0x2b5a9b=>{const _0x453103=_0x2f6434,_0x16ac05=_0xcc32df[_0x453103(0x34a)][_0x2b5a9b][0x0]?_0xcc32df[_0x453103(0x34a)][_0x2b5a9b][0x0][_0x453103(0x31c)][_0x453103(0x232)][_0x453103(0x28c)]:0x0;if(_0x29bae2){const _0x34bcc5=_0x3917ed[_0x453103(0x300)](_0x3c51bd=>_0x3c51bd[_0x453103(0x2f8)]==_0x2b5a9b);_0x34bcc5&&(_0x34bcc5[_0x453103(0x1f6)]=_0x16ac05);}else{const _0x3918b8=currentCoins['find'](_0x48c8fc=>_0x48c8fc['coin']==_0x2b5a9b);_0x3918b8&&(_0x3918b8[_0x453103(0x1f6)]=_0x16ac05);const _0x374129=currentCoinsAll[_0x453103(0x300)](_0x4c1f01=>_0x4c1f01['coin']==_0x2b5a9b);_0x374129&&(_0x374129[_0x453103(0x1f6)]=_0x16ac05);}}),!_0x29bae2&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x5b8867=_0xba2ebe,_0x17081f=0x2;let _0x4aa4ea=0x0,_0x20aa01=0x0,_0x2b3262=0x0,_0x1a508a=0x0,_0x5634e3=0x0;config[_0x5b8867(0x28d)]['forEach'](_0x2fa3b2=>{const _0x4a8fa6=_0x5b8867;if(!_0x2fa3b2['excluded']){_0x2b3262++,_0x4aa4ea+=_0x2fa3b2['slider'];if(_0x2fa3b2[_0x4a8fa6(0x37b)]===-0x1){_0x4aa4ea++;const _0x2786da=currentCoinsAll[_0x4a8fa6(0x300)](_0x4956d4=>_0x4956d4[_0x4a8fa6(0x2f8)]==_0x2fa3b2[_0x4a8fa6(0x2f8)]);_0x2786da&&(_0x1a508a+=_0x2786da[_0x4a8fa6(0x1f6)],_0x5634e3+=Math[_0x4a8fa6(0x368)](_0x2786da['marketcap']));}if(_0x2fa3b2['slider']!==-0x1)_0x20aa01++;}});let _0x2915e7;const _0x40a058=0x64-_0x4aa4ea,_0x174655=_0x2b3262-_0x20aa01;_0x2915e7=_0x174655===0x0?_0x4aa4ea:Math[_0x5b8867(0x2da)](0x64,_0x4aa4ea),config[_0x5b8867(0x28d)][_0x5b8867(0x2ad)](_0x53b572=>{const _0x4fa0e3=_0x5b8867,_0x278be2=currentCoinsAll[_0x4fa0e3(0x300)](_0x46bf09=>_0x46bf09[_0x4fa0e3(0x2f8)]==_0x53b572['coin']);_0x278be2&&(_0x53b572[_0x4fa0e3(0x1f6)]=_0x278be2['marketcap']);if(!_0x53b572[_0x4fa0e3(0x28b)]){if(_0x2915e7<=0x64){if(_0x53b572[_0x4fa0e3(0x37b)]===-0x1){if(_0x1a508a!==0x0&&config[_0x4fa0e3(0x33c)]){if(_0x278be2){if(config[_0x4fa0e3(0x33c)]=='marketcap')_0x53b572[_0x4fa0e3(0x352)]=(_0x40a058/(_0x1a508a/_0x278be2[_0x4fa0e3(0x1f6)]))[_0x4fa0e3(0x23e)](_0x17081f);else config[_0x4fa0e3(0x33c)]=='marketcapsqrt'&&(_0x53b572[_0x4fa0e3(0x352)]=(_0x40a058/(_0x5634e3/Math[_0x4fa0e3(0x368)](_0x278be2[_0x4fa0e3(0x1f6)])))[_0x4fa0e3(0x23e)](_0x17081f));}}}}}}),updateConfig();}function updateConfig(){const _0x18e11c=_0xba2ebe;let _0x43a017=dbConfig[_0x18e11c(0x2b7)]('bot')[_0x18e11c(0x300)]({'botID':botID})[_0x18e11c(0x289)]();_0x43a017&&dbConfig['get'](_0x18e11c(0x24e))['find']({'botID':botID})[_0x18e11c(0x288)](config)['write']();}async function startScheduler(){const _0x4bda27=_0xba2ebe,_0x110940=shiftedTime()['getHours'](),_0x21a722=process[_0x4bda27(0x351)]()['heapUsed']/0x400/0x400;logger['debug'](_0x4bda27(0x2a6)+process[_0x4bda27(0x227)]+_0x4bda27(0x292)+_0x21a722+'\x20MB'),getMarketCap(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x40a367=![]){const _0x55c8cd=_0xba2ebe;logger[_0x55c8cd(0x313)](_0x55c8cd(0x265));if(!_0x40a367)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0xa*0x3e8);}process[_0x55c8cd(0x231)]({'stop':_0x55c8cd(0x268)},_0x522977=>{});}async function stopExchange(){const _0x44374d=_0xba2ebe;if(!exchange)return;exchangeStopped=!![];try{await exchange[_0x44374d(0x283)]();}catch(_0xd5bb5b){await handleError(_0xd5bb5b,_0x44374d(0x2bc));}}async function initExchange(_0x405fa5=config[_0xba2ebe(0x230)],_0x3c887f=config[_0xba2ebe(0x1ff)],_0x47afc6=config[_0xba2ebe(0x27e)],_0x3cdf49=config[_0xba2ebe(0x33a)]){const _0x24b32b=_0xba2ebe;!supportedExchanges()[_0x24b32b(0x330)](_0x405fa5)&&(logHistory('error',_0x24b32b(0x285)+_0x405fa5+'\x20exchange'),killBot());const _0x34e155=ccxt[_0x24b32b(0x373)][_0x405fa5[_0x24b32b(0x314)]()];exchange=new _0x34e155({'apiKey':_0x3c887f,'secret':_0x47afc6,'options':{'defaultType':_0x24b32b(0x29c)}});if(_0x3cdf49)exchange['password']=_0x3cdf49;}function updateExchange(_0x221d55,_0x368ae2,_0x222aec=null){const _0x2e3d5d=_0xba2ebe;exchange[_0x2e3d5d(0x1ff)]=_0x221d55,exchange[_0x2e3d5d(0x27e)]=_0x368ae2,exchange[_0x2e3d5d(0x33a)]=_0x222aec,logger[_0x2e3d5d(0x313)]('Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)');}function setStableCoins(){const _0x936a5d=_0xba2ebe;let _0x316001=config[_0x936a5d(0x20d)]==_0x936a5d(0x30b)?_0x936a5d(0x30b):config[_0x936a5d(0x20d)]==_0x936a5d(0x287)?'PAXG':_0x936a5d(0x3b3),_0x4dc19b=!allSymbols[_0x936a5d(0x330)](_0x316001+'/USD')?_0x936a5d(0x294):_0x936a5d(0x232),_0x4ae3b0=!allSymbols[_0x936a5d(0x330)](_0x316001+_0x936a5d(0x26b))?_0x4dc19b:_0x936a5d(0x2ef);stablecoins={'eur':{'coin':''+_0x316001+_0x4ae3b0,'symbol':_0x316001+'/'+_0x4ae3b0},'usd':{'coin':''+_0x316001+_0x4dc19b,'symbol':_0x316001+'/'+_0x4dc19b}};}async function initwsCcxt(){const _0xf998cc=_0xba2ebe;initCycle++;const _0x35069a=initCycle;let _0xcb1c26=[];config[_0xf998cc(0x28d)][_0xf998cc(0x2ad)](_0x5396d6=>{const _0x12c857=_0xf998cc;if(!_0x5396d6['excluded']&&_0x5396d6['coin']!=config[_0x12c857(0x20d)])_0xcb1c26['push'](_0x5396d6[_0x12c857(0x24d)]);});if(!_0xcb1c26[_0xf998cc(0x330)](stablecoins['eur']['symbol']))_0xcb1c26[_0xf998cc(0x27f)](stablecoins[_0xf998cc(0x37c)][_0xf998cc(0x24d)]);if(!_0xcb1c26['includes'](stablecoins[_0xf998cc(0x1f5)][_0xf998cc(0x24d)]))_0xcb1c26[_0xf998cc(0x27f)](stablecoins['usd'][_0xf998cc(0x24d)]);if(config[_0xf998cc(0x230)][_0xf998cc(0x2b8)](_0xf998cc(0x30d))&&config[_0xf998cc(0x20d)]!='PAXG'){if(!_0xcb1c26['includes'](_0xf998cc(0x2d4)+config[_0xf998cc(0x20d)]))_0xcb1c26[_0xf998cc(0x27f)](_0xf998cc(0x2d4)+config[_0xf998cc(0x20d)]);}loadCoins(_0xcb1c26),_0xcb1c26=validateSymbols(_0xcb1c26);const _0x3e5260=async _0x2c2fba=>{const _0x5e37e7=_0xf998cc;let _0x19c62d;try{const _0x2b6682=await getTickers(_0x2c2fba);Object[_0x5e37e7(0x2d1)](_0x2b6682)[_0x5e37e7(0x2ad)](_0x495190=>{const _0x41c612=_0x5e37e7;_0x19c62d=_0x495190[0x1][_0x41c612(0x24d)],gTicker[noslash(_0x19c62d)]=_0x495190[0x1][_0x41c612(0x2ee)],gChange[_0x19c62d]=_0x495190[0x1][_0x41c612(0x2f1)];});}catch(_0x3a9c16){await handleError(_0x3a9c16,_0x5e37e7(0x337),_0x19c62d);}},_0x402213=async _0x19276f=>{const _0xd4ce8c=_0xf998cc;while(initCycle==_0x35069a){if(!botPaused)try{const _0x44aa40=await exchange['watchTrades'](_0x19276f);gTicker[noslash(_0x44aa40[0x0][_0xd4ce8c(0x24d)])]=_0x44aa40[0x0][_0xd4ce8c(0x392)];}catch(_0x50de65){if(!exchangeStopped)await handleError(_0x50de65,_0xd4ce8c(0x38a),_0x19276f);}else await sleep(0x64);}},_0x2ebd51=async _0x5d2d1c=>{const _0x43dc4c=_0xf998cc;while(initCycle==_0x35069a){if(!botPaused)try{const _0x165a5f=await exchange[_0x43dc4c(0x353)](_0x5d2d1c),_0xaffff9=_0x165a5f[_0x43dc4c(0x2dc)]();gTicker[noslash(_0xaffff9[_0x43dc4c(0x24d)])]=_0xaffff9['price'];}catch(_0x2c9bd5){if(!exchangeStopped)await handleError(_0x2c9bd5,_0x43dc4c(0x220),_0x5d2d1c['toString']());}else await sleep(0x64);}},_0x175042=async _0x100e25=>{const _0x406ad9=_0xf998cc;while(initCycle==_0x35069a){if(!botPaused){let _0x4770a9;try{await sleep(0x3c*0x3e8);const _0x40595d=await getTickers(_0x100e25);Object[_0x406ad9(0x2d1)](_0x40595d)[_0x406ad9(0x2ad)](_0x131e28=>{const _0x28baf7=_0x406ad9;_0x4770a9=_0x131e28[0x1][_0x28baf7(0x24d)],gChange[_0x4770a9]=_0x131e28[0x1][_0x28baf7(0x2f1)];});}catch(_0x122393){if(!exchangeStopped)await handleError(_0x122393,_0x406ad9(0x23d),_0x4770a9);}}else await sleep(0x64);}},_0x18951d=async _0x2c632c=>{const _0xa67850=_0xf998cc;while(initCycle==_0x35069a){if(!botPaused)try{const _0x1ca168=await exchange[_0xa67850(0x34f)](_0x2c632c);initCycle==_0x35069a&&_0x1ca168['forEach'](_0x476477=>{updateNumberCoinsCcxt(_0x476477);});}catch(_0x542b13){if(!exchangeStopped)await handleError(_0x542b13,'watchOrders()');}else await sleep(0x64);}};_0x3e5260(_0xcb1c26),_0x175042(_0xcb1c26),exchange[_0xf998cc(0x2cd)][_0xf998cc(0x353)]?_0x2ebd51(_0xcb1c26):_0xcb1c26[_0xf998cc(0x2ad)](_0x1ee8e8=>{_0x402213(_0x1ee8e8);}),_0xcb1c26[_0xf998cc(0x2ad)](_0x4284bd=>{_0x18951d(_0x4284bd);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x58fec6){const _0x14150a=_0xba2ebe;let _0x422e33={};try{if(config[_0x14150a(0x230)]!=_0x14150a(0x394))_0x422e33=await exchange[_0x14150a(0x20c)](_0x58fec6);else for(const _0x3da725 of _0x58fec6){const _0x2b488a=await exchange[_0x14150a(0x214)](_0x3da725);_0x422e33[_0x3da725]=_0x2b488a;}return _0x422e33;}catch(_0x4a505a){throw _0x4a505a;}}async function detectLiquidityChange(_0x5ec6a1=0x0){const _0xc2d7c8=_0xba2ebe;transactionDetectionOngoing=!![];try{const _0x39cd2e=await getCoins(_0x5ec6a1),[_0x514b94,_0x20cf18]=_0x39cd2e;let _0x53891d=[];currentCoins['forEach'](_0x3a0ac1=>{const _0x5be59f=_0x15e3,_0x4cfa16=_0x514b94[_0x5be59f(0x300)](_0x3b675f=>_0x3b675f[_0x5be59f(0x2f8)]==_0x3a0ac1[_0x5be59f(0x2f8)]);if(_0x4cfa16){if(_0x3a0ac1['number']!=_0x4cfa16[_0x5be59f(0x347)]){let _0x2ccf6a;if(_0x3a0ac1[_0x5be59f(0x2f8)]!=config[_0x5be59f(0x20d)]){const _0x4eb714=gTicker[noslash(_0x3a0ac1[_0x5be59f(0x24d)])];_0x2ccf6a=_0x3a0ac1[_0x5be59f(0x334)]?0x1/_0x4eb714:_0x4eb714;}else _0x2ccf6a=0x1;_0x53891d[_0x5be59f(0x27f)]({'coin':_0x3a0ac1['coin'],'symbol':_0x3a0ac1[_0x5be59f(0x24d)],'price':_0x2ccf6a,'number':Number(formatResult(_0x4cfa16[_0x5be59f(0x347)]-_0x3a0ac1['number'],0x8)),'basecoinvalue':_0x2ccf6a*(_0x4cfa16[_0x5be59f(0x347)]-_0x3a0ac1['number'])});}}});if(_0x53891d[_0xc2d7c8(0x222)]>0x0&&!blockTransactionDetection)for(const _0x5abfcc of _0x53891d){if(config[_0xc2d7c8(0x29a)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x5abfcc[_0xc2d7c8(0x2f2)]+_0xc2d7c8(0x252)+lastFees['highest']);if(lastFees['highest']==0x0||Math[_0xc2d7c8(0x274)](_0x5abfcc[_0xc2d7c8(0x2f2)])>lastFees['highest']*1.2){if(config[_0xc2d7c8(0x29a)]==_0xc2d7c8(0x2e6)){delete _0x5abfcc[_0xc2d7c8(0x24d)],delete _0x5abfcc[_0xc2d7c8(0x2f2)];let _0x23a9ed=[],_0x41124b=[...config[_0xc2d7c8(0x365)]]||[],_0x6d7ecf=config[_0xc2d7c8(0x365)];_0x41124b[_0xc2d7c8(0x312)]((_0x5e051a,_0x363279)=>_0x5e051a[_0xc2d7c8(0x1f1)]>_0x363279[_0xc2d7c8(0x1f1)]?-0x1:_0x363279['date']>_0x5e051a[_0xc2d7c8(0x1f1)]?0x1:0x0);const _0x1163ca=getDate();if(_0x41124b[0x0]){const _0x57b37c=fns[_0xc2d7c8(0x29e)](_0x41124b[0x0]['date'],_0xc2d7c8(0x262),new Date()),_0x36875d=fns['parse'](_0x1163ca,'yyyy/MM/dd',new Date());if(fns[_0xc2d7c8(0x2cc)](_0x57b37c,_0x36875d)){_0x23a9ed=_0x41124b[0x0]['changes'];const _0x4425d6=_0x23a9ed[_0xc2d7c8(0x300)](_0x21773d=>_0x21773d[_0xc2d7c8(0x2f8)]==_0x5abfcc['coin']);_0x4425d6?(_0x4425d6[_0xc2d7c8(0x347)]+=_0x5abfcc[_0xc2d7c8(0x347)],_0x4425d6[_0xc2d7c8(0x347)]==0x0&&(_0x23a9ed=_0x23a9ed['filter'](_0x43a718=>{const _0x1c459b=_0xc2d7c8;return _0x43a718[_0x1c459b(0x2f8)]!=_0x5abfcc[_0x1c459b(0x2f8)];}))):_0x23a9ed[_0xc2d7c8(0x27f)](_0x5abfcc);const _0x10bb0e=_0x6d7ecf[_0xc2d7c8(0x300)](_0x27931b=>_0x27931b['date']==_0x1163ca);_0x10bb0e[_0xc2d7c8(0x2d9)]=_0x23a9ed;}else _0x6d7ecf['push']({'date':_0x1163ca,'changes':[_0x5abfcc]});}const _0x38e11a=_0x6d7ecf['find'](_0x4144c2=>_0x4144c2[_0xc2d7c8(0x1f1)]==_0x1163ca);if(_0x38e11a){let _0x3131ce=!![];_0x38e11a[_0xc2d7c8(0x2d9)][_0xc2d7c8(0x2ad)](_0x1c9635=>{if(_0x1c9635['number']!=0x0)_0x3131ce=![];}),_0x3131ce&&(_0x6d7ecf=_0x6d7ecf['filter'](_0x360366=>{const _0x4dcfdf=_0xc2d7c8;return _0x360366[_0x4dcfdf(0x1f1)]!=_0x1163ca;}));}let _0x578a2e=dbConfig['get']('bot')[_0xc2d7c8(0x300)]({'botID':botID})[_0xc2d7c8(0x289)]();_0x578a2e&&(dbConfig[_0xc2d7c8(0x2b7)](_0xc2d7c8(0x24e))['find']({'botID':botID})[_0xc2d7c8(0x288)]({'liquidity':_0x6d7ecf})[_0xc2d7c8(0x3b4)](),config['liquidity']=_0x6d7ecf);logHistory(_0xc2d7c8(0x296),_0xc2d7c8(0x398)+Math[_0xc2d7c8(0x274)](_0x5abfcc[_0xc2d7c8(0x347)])+'\x20'+_0x5abfcc[_0xc2d7c8(0x2f8)]+'\x20'+(_0x5abfcc[_0xc2d7c8(0x347)]>0x0?_0xc2d7c8(0x21f):'removed')+_0xc2d7c8(0x256)),proxyEmit(_0xc2d7c8(0x3a4),emittedConfiguration());const _0xa72808=getNormalizedPerformance();emitPerformance(_0xa72808),getStartingBalances(_0xa72808),logger[_0xc2d7c8(0x313)](_0xc2d7c8(0x1f7));}else config[_0xc2d7c8(0x29a)]=='switch-manual'&&(config[_0xc2d7c8(0x342)]?(await storeHeadless({'headless':![]}),logHistory(_0xc2d7c8(0x296),_0xc2d7c8(0x216)),logger[_0xc2d7c8(0x313)](_0xc2d7c8(0x398)+Math[_0xc2d7c8(0x274)](_0x5abfcc[_0xc2d7c8(0x347)])+'\x20'+_0x5abfcc[_0xc2d7c8(0x2f8)]+'\x20'+(_0x5abfcc[_0xc2d7c8(0x347)]>0x0?'added':'removed')+_0xc2d7c8(0x2cf))):logger[_0xc2d7c8(0x313)](_0xc2d7c8(0x398)+Math[_0xc2d7c8(0x274)](_0x5abfcc['number'])+'\x20'+_0x5abfcc[_0xc2d7c8(0x2f8)]+'\x20'+(_0x5abfcc[_0xc2d7c8(0x347)]>0x0?'added':_0xc2d7c8(0x1fe))+_0xc2d7c8(0x2ab)));}else logger[_0xc2d7c8(0x313)](_0xc2d7c8(0x2e5)+Math[_0xc2d7c8(0x274)](_0x5abfcc[_0xc2d7c8(0x347)])+'\x20'+_0x5abfcc[_0xc2d7c8(0x2f8)]+'\x20'+(_0x5abfcc[_0xc2d7c8(0x347)]>0x0?_0xc2d7c8(0x21f):_0xc2d7c8(0x1fe)));}else logger['debug'](_0xc2d7c8(0x398)+Math[_0xc2d7c8(0x274)](_0x5abfcc[_0xc2d7c8(0x347)])+'\x20'+_0x5abfcc[_0xc2d7c8(0x2f8)]+'\x20'+(_0x5abfcc[_0xc2d7c8(0x347)]>0x0?_0xc2d7c8(0x21f):'removed')+_0xc2d7c8(0x2a1));}currentCoins=_0x514b94,currentCoinsAll=_0x20cf18;}catch(_0x4da073){if(!exchangeStopped)await handleError(_0x4da073,_0xc2d7c8(0x36a));}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x31a015=_0xba2ebe;try{markets=await exchange[_0x31a015(0x39c)](),allSymbols=[],Object[_0x31a015(0x2d1)](markets)['forEach'](_0x3d34a6=>{const _0x5c7efc=_0x31a015;_0x3d34a6[0x1][_0x5c7efc(0x2d6)]&&_0x3d34a6[0x1][_0x5c7efc(0x29c)]&&allSymbols[_0x5c7efc(0x27f)](_0x3d34a6[0x0]);});}catch(_0x2dc4ff){throw _0x2dc4ff;}}function validateSymbols(_0x14a649){const _0x26c2de=_0xba2ebe;let _0x2e3566=[];return _0x14a649[_0x26c2de(0x2ad)](_0x575732=>{const _0x2d103d=_0x26c2de;!allSymbols['includes'](_0x575732)?logHistory(_0x2d103d(0x29f),_0x2d103d(0x250)+_0x575732+_0x2d103d(0x34d)):_0x2e3566[_0x2d103d(0x27f)](_0x575732);}),_0x2e3566;}async function initclient(){const _0x236c70=_0xba2ebe;proxyEmit(_0x236c70(0x3a4),emittedConfiguration()),proxyEmit(_0x236c70(0x37d),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x236c70(0x2c0),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x2e7661=getNormalizedPerformance();emitPerformance(_0x2e7661),getStartingBalances(_0x2e7661);}async function toggleBotMode(){const _0x5112a8=_0xba2ebe;let _0x37e702=dbConfig[_0x5112a8(0x2b7)](_0x5112a8(0x24e))[_0x5112a8(0x300)]({'botID':botID})[_0x5112a8(0x289)]();if(_0x37e702){const _0x335a61=!_0x37e702['headless'];dbConfig[_0x5112a8(0x2b7)](_0x5112a8(0x24e))['find']({'botID':botID})[_0x5112a8(0x288)]({'headless':_0x335a61})[_0x5112a8(0x3b4)](),config[_0x5112a8(0x342)]=_0x335a61,proxyEmit(_0x5112a8(0x3a4),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x8144ea=_0xba2ebe;process['send']({'updatebotmanager':!![]},_0x505d08=>{}),logger[_0x8144ea(0x313)](_0x8144ea(0x2b4)+config['headless']);}async function loadCoins(_0x21bd16){const _0x1881b1=_0xba2ebe;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0xae148f,_0x29905e=0x0,_0x32ee74=0x0;_0x21bd16['forEach'](_0x1967be=>{const _0x30d238=_0x15e3;loading[_0x30d238(0x2e9)][_0x30d238(0x27f)](_0x1967be);}),loadingCanceled=![];let _0x373acb=![];while(_0xae148f!=_0x21bd16[_0x1881b1(0x222)]+maxLoadingProgress){_0xae148f=loadingProgress,_0x21bd16[_0x1881b1(0x2ad)](_0x2b0046=>{const _0x5799dc=_0x1881b1;if(gTicker[noslash(_0x2b0046)]){loading[_0x5799dc(0x2e9)]=loading[_0x5799dc(0x2e9)][_0x5799dc(0x340)](_0x4b74f1=>_0x4b74f1!=_0x2b0046);if(!watchedSymbols[_0x5799dc(0x330)](_0x2b0046))watchedSymbols[_0x5799dc(0x27f)](_0x2b0046);_0xae148f++;}}),loading[_0x1881b1(0x209)]=Math[_0x1881b1(0x2a4)](_0xae148f/(_0x21bd16[_0x1881b1(0x222)]+maxLoadingProgress)*0x64);loading[_0x1881b1(0x209)]!=0x64&&(_0x32ee74>0x1e*0x5&&(loading[_0x1881b1(0x2dd)]=!![],emitLoadingProgress()),_0x32ee74>0x78*0x5&&!_0x373acb&&(_0x373acb=!![],logHistory(_0x1881b1(0x29f),_0x1881b1(0x24c)+loading[_0x1881b1(0x2e9)][_0x1881b1(0x28f)](',\x20')+_0x1881b1(0x338)),logHistory('error',_0x1881b1(0x327)+loadCoinsRetryInterval/0xea60+_0x1881b1(0x2c7)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{restartBot();},loadCoinsRetryInterval)));if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x29905e!=loading['progress']&&(_0x29905e=loading[_0x1881b1(0x209)],emitLoadingProgress()),_0x32ee74++,await sleep(0xc8);}_0xae148f==_0x21bd16[_0x1881b1(0x222)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x1881b1(0x231)]({'status':_0x1881b1(0x208),'live':'running'},_0x422151=>{}),_0x373acb&&logHistory(_0x1881b1(0x296),_0x1881b1(0x3b0)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x3d053e=_0xba2ebe;proxyEmit('configuration',{...emittedConfiguration(),'configstate':_0x3d053e(0x35b)});}function emitLoadingProgress(){const _0x50585b=_0xba2ebe;proxyEmit(_0x50585b(0x243),loading);}async function getFiat(){const _0x31e174=_0xba2ebe;let _0x3c8d6a=gTicker[stablecoins[_0x31e174(0x37c)][_0x31e174(0x2f8)]],_0x3e90fa=gTicker[stablecoins['usd'][_0x31e174(0x2f8)]];return{'eur':Number(_0x3c8d6a),'usd':Number(_0x3e90fa)};}function capitalize(_0x4eddc3){const _0x21bd7e=_0xba2ebe;return _0x4eddc3['substring'](0x0,0x1)[_0x21bd7e(0x301)]()+_0x4eddc3[_0x21bd7e(0x30a)](0x1);}function supportedExchanges(){const _0x49aada=_0xba2ebe,_0x1b0bde=['ws','fetchTickers',_0x49aada(0x214),_0x49aada(0x369),_0x49aada(0x34f),'cancelOrder',_0x49aada(0x358),'fetchOpenOrders',_0x49aada(0x2d0),_0x49aada(0x2a8)];let _0xb1f037=[],_0x3df7de=[],_0x154865=ccxt[_0x49aada(0x373)][_0x49aada(0x37d)];_0x154865[_0x49aada(0x2ad)](_0x4d2e42=>{const _0x10cfd3=_0x49aada;try{const _0x1e4910=new ccxt[(_0x10cfd3(0x373))][_0x4d2e42]();_0x3df7de[_0x10cfd3(0x27f)](_0x1e4910);}catch(_0x41d0c3){}}),_0x3df7de['forEach'](_0x180e61=>{const _0x1ea97e=_0x49aada;let _0x1a5366=0x0;_0x1b0bde[_0x1ea97e(0x2ad)](_0x3d9b6c=>{const _0x5453df=_0x1ea97e;_0x3d9b6c in _0x180e61[_0x5453df(0x2cd)]&&_0x180e61[_0x5453df(0x2cd)][_0x3d9b6c]&&_0x1a5366++;}),_0x1a5366==_0x1b0bde[_0x1ea97e(0x222)]&&_0xb1f037[_0x1ea97e(0x27f)](capitalize(_0x180e61['id']));});let _0x2cc463=[];return _0x154865[_0x49aada(0x2ad)](_0x358738=>{const _0x491cc4=_0x49aada;_0x358738=capitalize(_0x358738);if(!_0xb1f037[_0x491cc4(0x330)](_0x358738))_0x2cc463['push'](_0x358738);}),_0xb1f037;}function setStartDatePerformance(){const _0x117ce7=_0xba2ebe;if(config&&config['liquidity'][0x0][_0x117ce7(0x2d9)]['length']!=0x0){const _0x1bcaed=config[_0x117ce7(0x365)][0x0][_0x117ce7(0x2d9)];dbPerformance['get']('data')[_0x117ce7(0x300)]({'date':config[_0x117ce7(0x34e)]})[_0x117ce7(0x288)]({'coins':_0x1bcaed})[_0x117ce7(0x3b4)]();}}async function recreateCoinResults(){const _0x560d8d=_0xba2ebe;recreationNeeded=![];let _0x1c2404,_0x425645=[];try{const _0x2f9cad=fns[_0x560d8d(0x239)](fns[_0x560d8d(0x280)](config[_0x560d8d(0x34e)][_0x560d8d(0x20e)](/\//g,'-')),_0x560d8d(0x2d7));for(const _0x4fe4dd of currentCoins){if(_0x4fe4dd[_0x560d8d(0x2f8)]!=config['basecoin']){let _0x3309de=0x0,_0x4d8e4e,_0x3183dc;_0x1c2404=await getAllEventOrders(_0x4fe4dd['symbol']);if(_0x1c2404[_0x560d8d(0x222)]>0x0)_0x1c2404['forEach'](_0xae73cf=>{const _0x1ec8ef=_0x560d8d,_0x3cad1b=_0x4fe4dd[_0x1ec8ef(0x24d)]['includes'](config['basecoin']+'/');_0x425645[_0x1ec8ef(0x27f)]({'datetime':_0xae73cf[_0x1ec8ef(0x2bf)],'coin':_0x4fe4dd['coin'],'symbol':_0x4fe4dd[_0x1ec8ef(0x24d)],'side':_0xae73cf[_0x1ec8ef(0x2ff)],'reverse':_0x3cad1b,'amount':formatResult(_0xae73cf[_0x1ec8ef(0x2f7)],0x8),'filled':formatResult(_0xae73cf['filled'],0x8),'price':formatResult(_0xae73cf[_0x1ec8ef(0x392)],0x8)}),_0x3309de=_0xae73cf[_0x1ec8ef(0x2ff)]==_0x1ec8ef(0x35e)?_0x3309de+_0xae73cf[_0x1ec8ef(0x2f7)]:_0x3309de-_0xae73cf[_0x1ec8ef(0x2f7)];if(!_0x3183dc)_0x3183dc=_0xae73cf[_0x1ec8ef(0x392)];});_0x4d8e4e=_0x4fe4dd[_0x560d8d(0x347)]-_0x3309de;let _0x2c5098;config[_0x560d8d(0x365)][_0x560d8d(0x2ad)](_0x528046=>{const _0x466410=_0x560d8d;!_0x2c5098&&(_0x2c5098=_0x528046['changes']['find'](_0x4b2f01=>_0x4b2f01[_0x466410(0x2f8)]==_0x4fe4dd[_0x466410(0x2f8)]),_0x2c5098&&(_0x4d8e4e=_0x2c5098[_0x466410(0x347)],_0x3183dc=_0x2c5098[_0x466410(0x392)]));});let _0x142d62=dbCoinResults[_0x560d8d(0x2b7)]('coins')[_0x560d8d(0x300)]({'coin':_0x4fe4dd[_0x560d8d(0x2f8)]})[_0x560d8d(0x289)]();_0x142d62={'coin':_0x4fe4dd['coin'],'number':_0x4d8e4e,'breakeven':_0x3183dc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults['get']('coins')[_0x560d8d(0x300)]({'coin':_0x4fe4dd[_0x560d8d(0x2f8)]})['assign'](_0x142d62)[_0x560d8d(0x3b4)]();}}_0x425645[_0x560d8d(0x312)]((_0xd8a057,_0xa726d8)=>_0xd8a057[_0x560d8d(0x2bf)]>_0xa726d8[_0x560d8d(0x2bf)]?0x1:_0xa726d8[_0x560d8d(0x2bf)]>_0xd8a057['datetime']?-0x1:0x0);let _0x48e838=0x0;for(let _0x1991cf of _0x425645){await updateCoinResults(_0x1991cf,!![]);}}catch(_0x478e90){await handleError(_0x478e90,_0x560d8d(0x39f));}}async function getAllEventOrders(_0x5ca623){const _0x1ab1f6=_0xba2ebe;let _0x2727bd=[],_0x1081b6=dbLogs['get']('logs')[_0x1ab1f6(0x340)](_0x1c1847=>{const _0x275d70=_0x1ab1f6,_0x36ecf2=_0x1c1847[_0x275d70(0x21e)][_0x275d70(0x314)]();return _0x36ecf2[_0x275d70(0x330)](_0x5ca623[_0x275d70(0x314)]())&&(_0x36ecf2['includes']('market')&&_0x36ecf2['includes'](_0x275d70(0x2db))||_0x36ecf2[_0x275d70(0x330)]('filled')&&_0x36ecf2[_0x275d70(0x330)]('order'));})[_0x1ab1f6(0x1f2)](_0x1ab1f6(0x317))[_0x1ab1f6(0x289)]();return _0x1081b6[_0x1ab1f6(0x2ad)](_0x1a7abd=>{const _0x36c9bd=_0x1ab1f6,_0xa22d92=_0x1a7abd[_0x36c9bd(0x21e)]['includes'](_0x36c9bd(0x376))?'sell':_0x36c9bd(0x35e),_0x133153=/#([0-9]|\.)+\s/i,_0x5194dc=Number(_0x133153['exec'](_0x1a7abd[_0x36c9bd(0x21e)])[0x0][_0x36c9bd(0x295)](0x1)),_0x228c7d=/@([0-9]|\.)+$/i,_0x2dc9e4=Number(_0x228c7d[_0x36c9bd(0x271)](_0x1a7abd[_0x36c9bd(0x21e)])[0x0]['slice'](0x1));_0x2727bd[_0x36c9bd(0x27f)]({'datetime':_0x1a7abd[_0x36c9bd(0x317)],'coin':symbolToCoin(_0x5ca623),'symbol':_0x5ca623,'side':_0xa22d92,'amount':_0x5194dc,'filled':_0x5194dc,'price':_0x2dc9e4});}),_0x2727bd;}async function getAllOrders(_0x353c78,_0x3a6fd4){const _0x47dbc3=_0xba2ebe;let _0x948392=[];while(_0x3a6fd4<exchange[_0x47dbc3(0x2a3)]()){const _0x4ac8ed=0x1f4;try{const _0x3bdbc9=await exchange[_0x47dbc3(0x2d0)](_0x353c78,_0x3a6fd4,_0x4ac8ed);if(_0x3bdbc9[_0x47dbc3(0x222)])_0x3a6fd4=_0x3bdbc9[_0x3bdbc9[_0x47dbc3(0x222)]-0x1]['timestamp']+0x1,_0x948392=_0x948392['concat'](_0x3bdbc9);else break;}catch(_0x3256b7){await handleError(_0x3256b7,_0x47dbc3(0x346),_0x353c78);}}return _0x948392;}async function validate24hChanges(){const _0x5ba3a8=_0xba2ebe;for(const _0x58a6c0 of currentCoins){if(_0x58a6c0['coin']!=config[_0x5ba3a8(0x20d)]){let _0x404d8c;_0x58a6c0[_0x5ba3a8(0x334)]?_0x404d8c=formatResult((0x1/(gChange[_0x58a6c0['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x404d8c=gChange[_0x58a6c0[_0x5ba3a8(0x24d)]],_0x404d8c<config[_0x5ba3a8(0x293)]&&(logHistory(_0x5ba3a8(0x29f),_0x58a6c0[_0x5ba3a8(0x2f8)]+_0x5ba3a8(0x224)+_0x404d8c+'%'),logHistory(_0x5ba3a8(0x29f),_0x5ba3a8(0x2c9)),logHistory(_0x5ba3a8(0x29f),_0x5ba3a8(0x2df)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x435e08,_0xf532dc){if(!_0x435e08)return!![];const _0x4c6a85=_0xf532dc['split']('.'),_0xbed1de=_0x435e08['split']('.');for(var _0x415051=0x0;_0x415051<_0xbed1de['length'];_0x415051++){const _0x1a2a45=~~_0xbed1de[_0x415051],_0x4bc295=~~_0x4c6a85[_0x415051];if(_0x1a2a45<_0x4bc295)return!![];if(_0x1a2a45>_0x4bc295)return![];}return![];}async function oneTimeMigration(){const _0xc7adb0=_0xba2ebe;let _0x515521=dbLogs[_0xc7adb0(0x2b7)](_0xc7adb0(0x28a))[_0xc7adb0(0x289)]();if(isOlderVersion(_0x515521,_0xc7adb0(0x302))){let _0x1d25af=[];const _0x43efa5=dbLogs['get'](_0xc7adb0(0x212))[_0xc7adb0(0x289)]();_0x43efa5[_0xc7adb0(0x2ad)](_0x3d5687=>{const _0x2cda2d=_0xc7adb0;_0x1d25af[_0x2cda2d(0x27f)]({'time':_0x3d5687['time'],'type':_0x3d5687['type'],'event':_0x3d5687[_0x2cda2d(0x21e)]});}),dbLogs[_0xc7adb0(0x2b7)](_0xc7adb0(0x212))[_0xc7adb0(0x288)](_0x1d25af)['write']();}let _0x2fb37e=dbConfig['get']('version')['value']();if(isOlderVersion(_0x2fb37e,'2.3.5')){let _0x4999b1=dbConfig[_0xc7adb0(0x2b7)](_0xc7adb0(0x24e))[_0xc7adb0(0x300)]({'botID':botID})['value']();if(_0x4999b1){let _0x4c7af1=[];_0x4999b1['portfolio'][_0xc7adb0(0x2ad)](_0x81712=>{const _0x520a5a=_0xc7adb0;_0x4c7af1[_0x520a5a(0x27f)]({'coin':_0x81712['coin'],'number':_0x81712['startnumber'],'price':_0x81712[_0x520a5a(0x228)]}),delete _0x81712[_0x520a5a(0x2a5)],delete _0x81712[_0x520a5a(0x228)];});if(_0x4c7af1[_0xc7adb0(0x222)]!==0x0)fs['writeFile'](configbackuppath+('starting-balance-'+botID+_0xc7adb0(0x397)),JSON[_0xc7adb0(0x378)](_0x4c7af1,null,0x4),function(_0x1a7cd2){if(_0x1a7cd2){}});const _0x11704c=(_0xa11f5d,_0x114352)=>{const _0xb511d2=_0xc7adb0;let _0x195af6=[];_0x114352[_0xb511d2(0x2ad)](_0x1b5417=>{const _0x26fc4c=_0xb511d2,_0x9734dd=_0xa11f5d[_0x26fc4c(0x300)](_0x35b5c8=>_0x35b5c8[_0x26fc4c(0x2f8)]==_0x1b5417[_0x26fc4c(0x2f8)]);if(!_0x9734dd)_0x195af6[_0x26fc4c(0x27f)](_0x1b5417);});let _0x492e2b=[];return _0xa11f5d[_0xb511d2(0x2ad)](_0x427daf=>{const _0x40aef3=_0xb511d2,_0x3e2ca7=_0x114352[_0x40aef3(0x300)](_0x554429=>_0x554429[_0x40aef3(0x2f8)]==_0x427daf[_0x40aef3(0x2f8)]);if(!_0x3e2ca7||_0x3e2ca7[_0x40aef3(0x347)]==0x0&&_0x427daf['number']!=0x0)_0x492e2b[_0x40aef3(0x27f)](_0x427daf);}),{'missingDay1':_0x195af6,'notInDay2':_0x492e2b};},_0x11c037=dbPerformance[_0xc7adb0(0x2b7)](_0xc7adb0(0x34a))[_0xc7adb0(0x322)]()['value']();if(_0x11c037[_0xc7adb0(0x222)]>0x1){const {missingDay1:_0x8c950d,notInDay2:_0x1bf8cd}=_0x11704c(_0x4c7af1,_0x11c037[0x1][_0xc7adb0(0x245)]);_0x4c7af1=[..._0x4c7af1,..._0x8c950d],_0x1bf8cd[_0xc7adb0(0x2ad)](_0x40a7e7=>{const _0xddaad5=_0xc7adb0;let _0x43fae2=_0x4c7af1[_0xddaad5(0x284)](_0x4e6be9=>_0x4e6be9['coin']==_0x40a7e7[_0xddaad5(0x2f8)]);_0x43fae2!=-0x1&&_0x4c7af1[_0xddaad5(0x1fc)](_0x43fae2,0x1);});}_0x4c7af1[_0xc7adb0(0x312)]((_0x31081a,_0x464433)=>_0x31081a[_0xc7adb0(0x2f8)]>_0x464433[_0xc7adb0(0x2f8)]?0x1:_0x464433[_0xc7adb0(0x2f8)]>_0x31081a[_0xc7adb0(0x2f8)]?-0x1:0x0);let _0x37cc7d=[{'date':_0x4999b1[_0xc7adb0(0x34e)],'changes':_0x4c7af1}];_0x11c037[_0xc7adb0(0x222)]>0x2&&_0x11c037[_0xc7adb0(0x2ad)]((_0x11096a,_0x4c8e0d)=>{const _0x22efec=_0xc7adb0;if(_0x4c8e0d>0x0&&_0x4c8e0d<_0x11c037[_0x22efec(0x222)]-0x1){const {missingDay1:_0x1b52c9,notInDay2:_0x1ffb21}=_0x11704c(_0x11c037[_0x4c8e0d][_0x22efec(0x245)],_0x11c037[_0x4c8e0d+0x1][_0x22efec(0x245)]);_0x4c7af1=[],(_0x1b52c9['length']!=0x0||_0x1ffb21[_0x22efec(0x222)]!=0x0)&&(_0x1b52c9['length']!=0x0&&_0x4c7af1[_0x22efec(0x27f)](..._0x1b52c9),_0x1ffb21[_0x22efec(0x222)]!=0x0&&(_0x1ffb21['forEach'](_0x5db878=>{const _0x446b35=_0x22efec;_0x5db878[_0x446b35(0x347)]=-_0x5db878[_0x446b35(0x347)];}),_0x4c7af1[_0x22efec(0x27f)](..._0x1ffb21)),_0x4c7af1['sort']((_0x496ede,_0x33a114)=>_0x496ede[_0x22efec(0x2f8)]>_0x33a114[_0x22efec(0x2f8)]?0x1:_0x33a114[_0x22efec(0x2f8)]>_0x496ede[_0x22efec(0x2f8)]?-0x1:0x0),_0x37cc7d[_0x22efec(0x27f)]({'date':_0x11c037[_0x4c8e0d+0x1][_0x22efec(0x1f1)],'changes':_0x4c7af1}));}}),dbConfig[_0xc7adb0(0x2b7)](_0xc7adb0(0x24e))[_0xc7adb0(0x300)]({'botID':botID})[_0xc7adb0(0x288)]({..._0x4999b1,'liquidity':_0x37cc7d})[_0xc7adb0(0x3b4)]();}}if(isOlderVersion(_0x2fb37e,_0xc7adb0(0x24f))){let _0x59803b=dbConfig['get'](_0xc7adb0(0x24e))['find']({'botID':botID})[_0xc7adb0(0x289)]();if(_0x59803b){const _0x22418b=_0x59803b[_0xc7adb0(0x230)],_0x439c8a=_0x22418b?capitalize(_0x22418b):'Binance';dbConfig['get']('bot')[_0xc7adb0(0x300)]({'botID':botID})['assign']({'exchange':_0x439c8a})[_0xc7adb0(0x3b4)]();}}if(isOlderVersion(_0x2fb37e,_0xc7adb0(0x3b1))){let _0x530db3=dbConfig[_0xc7adb0(0x2b7)](_0xc7adb0(0x24e))[_0xc7adb0(0x300)]({'botID':botID})[_0xc7adb0(0x289)]();if(_0x530db3){const _0x447208=_0x530db3['marketcapEnabled'],_0x5f4459=_0x447208?_0xc7adb0(0x1f6):![];dbConfig[_0xc7adb0(0x2b7)](_0xc7adb0(0x24e))[_0xc7adb0(0x300)]({'botID':botID})['assign']({'marketcapEnabled':_0x5f4459})[_0xc7adb0(0x3b4)]();}}if(isOlderVersion(_0x2fb37e,_0xc7adb0(0x375))){let _0x3350a7=dbConfig[_0xc7adb0(0x2b7)](_0xc7adb0(0x24e))['find']({'botID':botID})[_0xc7adb0(0x289)]();if(_0x3350a7){const _0x3078dc=_0x3350a7[_0xc7adb0(0x29a)],_0x11dd17=_0x3078dc?_0xc7adb0(0x2e6):![];dbConfig['get'](_0xc7adb0(0x24e))['find']({'botID':botID})[_0xc7adb0(0x288)]({'autoliquidity':_0x11dd17})[_0xc7adb0(0x3b4)]();}}let _0x19b358=dbPerformance['get']('version')[_0xc7adb0(0x289)]();isOlderVersion(_0x19b358,_0xc7adb0(0x302))&&setStartDatePerformance();let _0x485a1b=dbCoinResults['get'](_0xc7adb0(0x28a))[_0xc7adb0(0x289)]();if(isOlderVersion(_0x485a1b,_0xc7adb0(0x32f))){let _0xaa9095=dbCoinResults[_0xc7adb0(0x2b7)]('coins')[_0xc7adb0(0x289)]();if(_0xaa9095[_0xc7adb0(0x222)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x6fd024=_0xba2ebe;dbConfig[_0x6fd024(0x37a)](_0x6fd024(0x28a),serverversion)[_0x6fd024(0x3b4)](),dbPerformance[_0x6fd024(0x37a)]('version',serverversion)['write'](),dbLogs[_0x6fd024(0x37a)]('version',serverversion)[_0x6fd024(0x3b4)](),dbCoinResults[_0x6fd024(0x37a)](_0x6fd024(0x28a),serverversion)[_0x6fd024(0x3b4)]();}function getConfiguration(_0xd19798){const _0x57ade9=_0xba2ebe;let _0x2cba34=dbConfig[_0x57ade9(0x2b7)](_0x57ade9(0x24e))[_0x57ade9(0x300)]({'botID':_0xd19798})['value']();if(_0x2cba34){let _0x462967=![];typeof _0x2cba34[_0x57ade9(0x381)]=='string'&&(_0x2cba34={..._0x2cba34,'threshold':Number(_0x2cba34['threshold'])},_0x462967=!![]),_0x2cba34[_0x57ade9(0x293)]==undefined&&(_0x2cba34={..._0x2cba34,'change24h':-0x14},_0x462967=!![]),_0x2cba34[_0x57ade9(0x2e1)]==undefined&&(_0x2cba34={..._0x2cba34,'fiat':'USD'},_0x462967=!![]),_0x2cba34[_0x57ade9(0x35d)]==undefined&&(_0x2cba34={..._0x2cba34,'onepagemode':settings[_0x57ade9(0x35d)]},_0x462967=!![]),_0x2cba34[_0x57ade9(0x1f9)]==undefined&&(_0x2cba34={..._0x2cba34,'colorscheme':_0x57ade9(0x277)},_0x462967=!![]),_0x2cba34[_0x57ade9(0x29a)]==undefined&&(_0x2cba34={..._0x2cba34,'autoliquidity':_0x57ade9(0x2e6)},_0x462967=!![]),_0x2cba34[_0x57ade9(0x299)]==undefined&&(_0x2cba34={..._0x2cba34,'marketcapApi':settings['marketcapApi']?!![]:![]},_0x462967=!![]),_0x2cba34['marketcapEnabled']==undefined&&(_0x2cba34={..._0x2cba34,'marketcapEnabled':![]},_0x462967=!![]),_0x462967&&(_0x2cba34={'botID':_0x2cba34[_0x57ade9(0x266)],'exchange':_0x2cba34[_0x57ade9(0x230)],'apiKey':_0x2cba34[_0x57ade9(0x1ff)],'apiSecret':_0x2cba34[_0x57ade9(0x27e)],'apiPassword':_0x2cba34[_0x57ade9(0x33a)],'basecoin':_0x2cba34[_0x57ade9(0x20d)],'botname':_0x2cba34[_0x57ade9(0x31b)],'showname':_0x2cba34[_0x57ade9(0x298)],'threshold':_0x2cba34['threshold'],'ordertype':_0x2cba34['ordertype'],'timeout':_0x2cba34[_0x57ade9(0x2dd)],'fiat':_0x2cba34[_0x57ade9(0x2e1)],'startdate':_0x2cba34[_0x57ade9(0x34e)],'recreate':_0x2cba34[_0x57ade9(0x362)],'timeshift':_0x2cba34[_0x57ade9(0x31a)],'onepagemode':_0x2cba34['onepagemode'],'headless':_0x2cba34[_0x57ade9(0x342)],'cooldown':_0x2cba34[_0x57ade9(0x3ab)],'change24h':_0x2cba34['change24h'],'emojibuy':_0x2cba34[_0x57ade9(0x27b)],'emojisell':_0x2cba34[_0x57ade9(0x223)],'colorscheme':_0x2cba34[_0x57ade9(0x1f9)],'marketcapApi':_0x2cba34['marketcapApi'],'marketcapEnabled':_0x2cba34[_0x57ade9(0x33c)],'portfolio':_0x2cba34[_0x57ade9(0x28d)],'autoliquidity':_0x2cba34[_0x57ade9(0x29a)],'liquidity':_0x2cba34[_0x57ade9(0x365)],'openOrders':_0x2cba34['openOrders']},dbConfig[_0x57ade9(0x2b7)](_0x57ade9(0x24e))['remove']()[_0x57ade9(0x3b4)](),dbConfig[_0x57ade9(0x2b7)]('bot')[_0x57ade9(0x27f)](_0x2cba34)[_0x57ade9(0x3b4)]());}else _0x2cba34={'botID':_0xd19798,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x57ade9(0x30c)+_0xd19798,'showname':![],'threshold':0x3,'ordertype':_0x57ade9(0x25a),'timeout':0x14,'fiat':_0x57ade9(0x232),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x57ade9(0x31a)],'onepagemode':settings[_0x57ade9(0x35d)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x57ade9(0x277),'marketcapApi':settings[_0x57ade9(0x299)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':'update-liquidity','liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x2cba34;}function emittedConfiguration(){const _0x2e57bb=_0xba2ebe;let _0x28881f;if(config['apiKey']=='')_0x28881f={...config,'configstate':_0x2e57bb(0x2c6)};else config[_0x2e57bb(0x1ff)]==_0x2e57bb(0x2a0)?_0x28881f={...config,'configstate':'recovery'}:(_0x28881f={...config,'apiKey':_0x2e57bb(0x210),'apiSecret':_0x2e57bb(0x210)},config[_0x2e57bb(0x33a)]&&(_0x28881f['apiPassword']=_0x2e57bb(0x210)));return _0x28881f;}function getSettings(){const _0x54dac1=_0xba2ebe;return dbSettings['get'](_0x54dac1(0x2c2))[_0x54dac1(0x289)]();}function getSecure(){const _0x106762=_0xba2ebe;return dbSecure[_0x106762(0x2b7)](_0x106762(0x2d2))[_0x106762(0x289)]()||{};}function updateTimeshift(_0x53b933){const _0x57cc16=_0xba2ebe;let _0x2f302f=dbConfig['get'](_0x57cc16(0x24e))[_0x57cc16(0x300)]({'botID':botID})[_0x57cc16(0x289)]();_0x2f302f&&dbConfig[_0x57cc16(0x2b7)](_0x57cc16(0x24e))['find']({'botID':botID})[_0x57cc16(0x288)]({'timeshift':_0x53b933})[_0x57cc16(0x3b4)](),config[_0x57cc16(0x31a)]=_0x53b933,proxyEmit(_0x57cc16(0x3a4),emittedConfiguration());}function updateOnepagemode(_0x2ed769){const _0x3a46d8=_0xba2ebe;let _0x3a5114=dbConfig[_0x3a46d8(0x2b7)](_0x3a46d8(0x24e))[_0x3a46d8(0x300)]({'botID':botID})[_0x3a46d8(0x289)]();_0x3a5114&&dbConfig['get'](_0x3a46d8(0x24e))[_0x3a46d8(0x300)]({'botID':botID})[_0x3a46d8(0x288)]({'onepagemode':_0x2ed769})['write'](),config['onepagemode']=_0x2ed769,proxyEmit('configuration',emittedConfiguration());}function updateMarketcapApi(_0x1938a8){const _0x397174=_0xba2ebe,_0x510ba3=_0x1938a8?!![]:![];let _0x2083d9=dbConfig[_0x397174(0x2b7)]('bot')[_0x397174(0x300)]({'botID':botID})[_0x397174(0x289)]();_0x2083d9&&dbConfig[_0x397174(0x2b7)](_0x397174(0x24e))[_0x397174(0x300)]({'botID':botID})[_0x397174(0x288)]({'marketcapApi':_0x510ba3})['write'](),config[_0x397174(0x299)]=_0x510ba3,getMarketCap(),proxyEmit(_0x397174(0x3a4),emittedConfiguration());}async function storeConfiguration(_0x3ccf66){const _0x5a0dd4=_0xba2ebe;logger[_0x5a0dd4(0x313)](_0x5a0dd4(0x32c));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x5a0dd4(0x313)]('Transaction\x20detection\x20blocked');let _0x3f7272=![],_0xfa400a=![],_0x32c2ff=[];_0x3ccf66[_0x5a0dd4(0x28d)][_0x5a0dd4(0x2ad)](_0x37174b=>{const _0x2c1f45=_0x5a0dd4;if(!_0x37174b[_0x2c1f45(0x28b)]&&_0x37174b['coin']!=_0x3ccf66[_0x2c1f45(0x20d)])_0x32c2ff[_0x2c1f45(0x27f)](_0x37174b[_0x2c1f45(0x24d)]);}),_0x32c2ff[_0x5a0dd4(0x2ad)](_0x166a0c=>{const _0x1743dd=_0x5a0dd4,_0x48eceb=currentCoins[_0x1743dd(0x300)](_0x231d9e=>_0x231d9e['symbol']==_0x166a0c);!_0x48eceb&&(_0x3f7272=!![]);}),currentCoins['forEach'](_0x36b6a8=>{const _0x50baf7=_0x5a0dd4;if(_0x36b6a8[_0x50baf7(0x2f8)]!=config[_0x50baf7(0x20d)]){const _0x4e6686=_0x32c2ff[_0x50baf7(0x300)](_0x2e6fc1=>_0x2e6fc1==_0x36b6a8[_0x50baf7(0x24d)]);!_0x4e6686&&(_0x3f7272=!![]);}}),_0x3ccf66[_0x5a0dd4(0x28d)]['forEach'](_0x6ce5ea=>{const _0x2745fb=_0x5a0dd4,_0x1ba2d7=config[_0x2745fb(0x28d)][_0x2745fb(0x300)](_0x17ac51=>_0x17ac51[_0x2745fb(0x2f8)]==_0x6ce5ea[_0x2745fb(0x2f8)]);if(_0x1ba2d7&&_0x6ce5ea[_0x2745fb(0x2c8)]!=_0x1ba2d7[_0x2745fb(0x2c8)])_0xfa400a=!![];});let _0x40e60d=dbConfig[_0x5a0dd4(0x2b7)](_0x5a0dd4(0x24e))[_0x5a0dd4(0x300)]({'botID':botID})[_0x5a0dd4(0x289)]();_0x3ccf66={..._0x3ccf66,'apiKey':crypt[_0x5a0dd4(0x367)](secure[_0x5a0dd4(0x2f4)],_0x3ccf66[_0x5a0dd4(0x1ff)])[_0x5a0dd4(0x1fa)],'apiSecret':crypt['decrypt'](secure[_0x5a0dd4(0x2f4)],_0x3ccf66[_0x5a0dd4(0x27e)])['message']};_0x3ccf66[_0x5a0dd4(0x33a)]&&(_0x3ccf66['apiPassword']=crypt[_0x5a0dd4(0x367)](secure[_0x5a0dd4(0x2f4)],_0x3ccf66['apiPassword'])['message']);let _0x60c193=![];if(_0x40e60d){_0x3ccf66[_0x5a0dd4(0x1ff)]==_0x5a0dd4(0x210)?_0x3ccf66[_0x5a0dd4(0x1ff)]=config[_0x5a0dd4(0x1ff)]:_0x60c193=!![];_0x3ccf66[_0x5a0dd4(0x27e)]==_0x5a0dd4(0x210)?_0x3ccf66['apiSecret']=config[_0x5a0dd4(0x27e)]:_0x60c193=!![];if(_0x3ccf66['apiPassword']==_0x5a0dd4(0x210))_0x3ccf66[_0x5a0dd4(0x33a)]=config['apiPassword'];else{if(_0x3ccf66[_0x5a0dd4(0x33a)])_0x60c193=!![];}dbConfig[_0x5a0dd4(0x2b7)](_0x5a0dd4(0x24e))[_0x5a0dd4(0x300)]({'botID':botID})['assign'](_0x3ccf66)[_0x5a0dd4(0x3b4)]();}else dbConfig[_0x5a0dd4(0x2b7)](_0x5a0dd4(0x24e))[_0x5a0dd4(0x27f)](_0x3ccf66)[_0x5a0dd4(0x3b4)](),_0x60c193=!![],process[_0x5a0dd4(0x231)]({'status':_0x5a0dd4(0x208),'live':'running'},_0xdceb96=>{});process[_0x5a0dd4(0x231)]({'botname':_0x3ccf66[_0x5a0dd4(0x31b)]},_0xb25152=>{}),config={..._0x3ccf66},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x60c193)!_0x40e60d?await reset(!![]):getBalances();else _0x3f7272||_0xfa400a?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x5a0dd4(0x313)](_0x5a0dd4(0x22e));}async function storeHeadless(_0x35a553){const _0xac5176=_0xba2ebe,_0x196bc6={...config,'headless':_0x35a553[_0xac5176(0x342)]};let _0x54d762=dbConfig['get'](_0xac5176(0x24e))[_0xac5176(0x300)]({'botID':botID})[_0xac5176(0x289)]();_0x54d762&&dbConfig['get'](_0xac5176(0x24e))[_0xac5176(0x300)]({'botID':botID})[_0xac5176(0x288)](_0x196bc6)[_0xac5176(0x3b4)](),config={..._0x196bc6},updateBotManager(),proxyEmit(_0xac5176(0x3a4),emittedConfiguration());}async function storeFiat(_0x5c15e5){const _0x3fe544=_0xba2ebe,_0x57f937={...config,'fiat':_0x5c15e5};let _0x5bd3c6=dbConfig[_0x3fe544(0x2b7)](_0x3fe544(0x24e))[_0x3fe544(0x300)]({'botID':botID})[_0x3fe544(0x289)]();_0x5bd3c6&&dbConfig[_0x3fe544(0x2b7)](_0x3fe544(0x24e))['find']({'botID':botID})['assign'](_0x57f937)[_0x3fe544(0x3b4)](),config={..._0x57f937},proxyEmit(_0x3fe544(0x3a4),emittedConfiguration());}function resetHistory(){const _0x3d9492=_0xba2ebe;logger[_0x3d9492(0x2f3)]('Resetting\x20bot\x20history');try{if(fs[_0x3d9492(0x275)](path['join'](configpath,_0x3d9492(0x218)+botID+'-events.json')))fs[_0x3d9492(0x3b2)](path['join'](configpath,_0x3d9492(0x218)+botID+_0x3d9492(0x24b)));if(fs['existsSync'](path['join'](configpath,_0x3d9492(0x218)+botID+'-performance.json')))fs[_0x3d9492(0x3b2)](path[_0x3d9492(0x28f)](configpath,_0x3d9492(0x218)+botID+_0x3d9492(0x318)));if(fs[_0x3d9492(0x275)](path[_0x3d9492(0x28f)](configpath,_0x3d9492(0x218)+botID+'-results.json')))fs[_0x3d9492(0x3b2)](path[_0x3d9492(0x28f)](configpath,_0x3d9492(0x218)+botID+_0x3d9492(0x371)));}catch(_0x493e13){if(_0x493e13)logger[_0x3d9492(0x2f3)](_0x3d9492(0x35c),_0x493e13);}const _0x58cb45=getDate();let _0xdf799f=[];currentCoins['forEach'](_0x28394b=>{const _0x5e86e6=_0x3d9492;_0xdf799f[_0x5e86e6(0x27f)]({'coin':_0x28394b[_0x5e86e6(0x2f8)],'number':_0x28394b[_0x5e86e6(0x347)],'price':_0x28394b[_0x5e86e6(0x2ee)]});});let _0x50f230=dbConfig['get'](_0x3d9492(0x24e))[_0x3d9492(0x300)]({'botID':botID})['value']();_0x50f230&&(dbConfig[_0x3d9492(0x2b7)]('bot')[_0x3d9492(0x300)]({'botID':botID})['assign']({'liquidity':[{'date':_0x58cb45,'changes':_0xdf799f}]})[_0x3d9492(0x3b4)](),config['liquidity']=[]),restartBot(!![]);}function noslash(_0x5768db){const _0x25c171=_0xba2ebe;return _0x5768db[_0x25c171(0x20e)]('/','');}function updateHighestFee(_0x17be86){const _0x220786=_0xba2ebe;if(_0x17be86[_0x220786(0x334)]){let _0x4a39b0={'filled':_0x17be86['filled']*_0x17be86['price'],'amount':_0x17be86[_0x220786(0x2f7)]*_0x17be86[_0x220786(0x392)],'side':_0x17be86[_0x220786(0x2ff)]=='sell'?_0x220786(0x35e):_0x220786(0x376),'price':0x1/_0x17be86[_0x220786(0x392)]};_0x17be86={..._0x17be86,..._0x4a39b0};}const _0x148d7e=defaultFee*_0x17be86['filled']*_0x17be86[_0x220786(0x392)];lastFees[_0x220786(0x255)][_0x220786(0x222)]===0x14&&lastFees['recent20']['shift'](),lastFees[_0x220786(0x255)]['push'](_0x148d7e),lastFees[_0x220786(0x339)]=Math[_0x220786(0x2da)](...lastFees[_0x220786(0x255)]);}async function updateNumberCoinsCcxt(_0x1be19b){const _0x5908a4=_0xba2ebe;logger[_0x5908a4(0x313)](_0x5908a4(0x37f)+_0x1be19b[_0x5908a4(0x24d)]+_0x5908a4(0x2b1)+_0x1be19b[_0x5908a4(0x204)]+_0x5908a4(0x2b1)+_0x1be19b[_0x5908a4(0x2f7)]+_0x5908a4(0x1f3)+_0x1be19b['amount']+_0x5908a4(0x2b1)+_0x1be19b['id']);_0x1be19b['filled']>0x0&&(blockTransactionDetection=!![]);let _0x444b28=_0x1be19b['status'],_0x5d0416=![];currentCoins['forEach'](_0xd00003=>{const _0x4914dc=_0x5908a4;_0xd00003[_0x4914dc(0x24d)]==_0x1be19b[_0x4914dc(0x24d)]&&(_0x5d0416=!![]);});if(!_0x5d0416)return;const _0x5a696c=currentCoins[_0x5908a4(0x300)](_0x5a92c3=>_0x5a92c3[_0x5908a4(0x24d)]==_0x1be19b['symbol']),_0x5dec03=_0xc9191b=>{const _0x33ab6b=_0x5908a4;if(_0x5a696c)_0x5a696c[_0x33ab6b(0x326)]=_0xc9191b;};if(_0x444b28==_0x5908a4(0x2ed))_0x5dec03(_0x5908a4(0x2ed));else{if(_0x444b28==_0x5908a4(0x3a6)){_0x5dec03('canceled');const _0x2ac308=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x2ac308,blockTransactionDetection=![],await getOpenOrders(),handleOpenOrders();}else{if(_0x444b28==_0x5908a4(0x279)){let _0x46a3e1=![];if(lastOrders)for(const _0x21204b of lastOrders){const _0x5666bb=0xc8,_0x477b61=0x1388;let _0x15fdb2=0x0;while(!_0x21204b[_0x5908a4(0x308)]&&_0x15fdb2*_0x5666bb<_0x477b61){_0x15fdb2++,await sleep(_0x5666bb);}if(_0x15fdb2>0x0)logger[_0x5908a4(0x313)](_0x5908a4(0x207)+_0x15fdb2*_0x5666bb/0x3e8+_0x5908a4(0x2cb));if(_0x21204b[_0x5908a4(0x308)]==_0x1be19b['id']){logger[_0x5908a4(0x313)](_0x5908a4(0x244)+_0x1be19b['id']),_0x46a3e1=!![];if(_0x21204b[_0x5908a4(0x2f7)]==0x0){logger[_0x5908a4(0x313)](_0x5908a4(0x32a)+_0x1be19b['id']);if(_0x1be19b[_0x5908a4(0x25c)])_0x21204b[_0x5908a4(0x392)]=_0x1be19b[_0x5908a4(0x25c)];else{if(_0x1be19b['price'])_0x21204b[_0x5908a4(0x392)]=_0x1be19b[_0x5908a4(0x392)];else{}}_0x21204b[_0x5908a4(0x2f7)]=_0x1be19b['filled'],updateHighestFee(_0x21204b),_0x5dec03(_0x5908a4(0x2f7)),await validateOrders();if(lockOrders==ORDERS[_0x5908a4(0x238)]){const _0xcc3b06=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xcc3b06,blockTransactionDetection=![];}_0x21204b[_0x5908a4(0x263)]={'currency':_0x1be19b[_0x5908a4(0x263)]?_0x1be19b[_0x5908a4(0x263)][_0x5908a4(0x336)]:null,'cost':_0x1be19b['fee']?_0x1be19b[_0x5908a4(0x263)]['cost']:0x0},await updateCoinResults(_0x21204b);}}}!_0x46a3e1&&(logger[_0x5908a4(0x313)]('1\x20-\x20FILLED\x20unknown\x20order:\x20'+_0x1be19b['id']),_0x5dec03(_0x5908a4(0x2f7)),blockTransactionDetection=![],await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x1e8070=JSON['parse'](lastBalances[_0x5908a4(0x28d)]);const _0xe27c78=_0x1e8070[_0x5908a4(0x300)](_0x1ca9ab=>_0x1ca9ab[_0x5908a4(0x24d)]==_0x1be19b[_0x5908a4(0x24d)]);if(_0xe27c78){if(_0x444b28=='open')_0xe27c78[_0x5908a4(0x326)]=_0xe27c78['orderstatus']==_0x5908a4(0x2f7)?_0x5908a4(0x2f7):_0x5908a4(0x2ed);else{if(_0x444b28=='canceled')_0xe27c78[_0x5908a4(0x326)]=_0xe27c78[_0x5908a4(0x326)]==_0x5908a4(0x2f7)?_0x5908a4(0x2f7):'canceled';else _0x444b28=='closed'&&(_0xe27c78[_0x5908a4(0x326)]=_0x5908a4(0x2f7));}}lastBalances={...lastBalances,'portfolio':JSON[_0x5908a4(0x378)](_0x1e8070)},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x2ab486=_0xba2ebe;await getOpenOrders();let _0x4bf297=![];currentCoins[_0x2ab486(0x2ad)](_0x54b5cb=>{const _0x4dfb63=_0x2ab486;_0x4bf297=allOpenOrders[_0x4dfb63(0x300)](_0x2d0124=>_0x2d0124['symbol']==_0x54b5cb[_0x4dfb63(0x24d)]),_0x54b5cb[_0x4dfb63(0x326)]=_0x4bf297?_0x4dfb63(0x2ed):_0x4dfb63(0x304);});}async function getCoins(_0x3efac5=0x0,_0x330393=!![],_0xc23af7=config[_0xba2ebe(0x20d)]){const _0x403a6c=_0xba2ebe;let _0xe156d3,_0x1ba8db=[],_0x1185b4=[],_0x48cd70=[];if(_0x3efac5)await sleep(_0x3efac5);if(botPaused)return[currentCoins,currentCoinsAll];try{_0xe156d3=await exchange[_0x403a6c(0x2a8)](),mybalances=_0xe156d3[_0x403a6c(0x31f)];for(const [_0x41144c,_0x911ca1]of Object[_0x403a6c(0x2d1)](mybalances)){_0x48cd70[_0x403a6c(0x27f)](_0x41144c);}config['portfolio']['forEach'](_0x29952e=>{const _0x3f03b8=_0x403a6c;!_0x48cd70[_0x3f03b8(0x330)](_0x29952e['coin'])&&(mybalances[_0x29952e['coin']]=0x0);});if(_0xc23af7=='')for(const [_0x292339,_0x5647e0]of Object[_0x403a6c(0x2d1)](mybalances)){_0x5647e0!=0x0&&_0x1ba8db[_0x403a6c(0x27f)]({'coin':_0x292339});}else for(const [_0x130305,_0x25dc91]of Object[_0x403a6c(0x2d1)](mybalances)){const _0x2f35ea=config['portfolio'][_0x403a6c(0x300)](_0x12e4be=>_0x12e4be[_0x403a6c(0x2f8)]==_0x130305),_0x1bc9df=_0x130305+'/'+_0xc23af7,_0x30e223=_0xc23af7+'/'+_0x130305,_0x1aab0b=currentCoins[_0x403a6c(0x300)](_0x1f2a10=>_0x1f2a10[_0x403a6c(0x2f8)]==_0x130305);if((_0x25dc91!=0x0||_0x2f35ea)&&(allSymbols[_0x403a6c(0x330)](_0x1bc9df)||_0x130305==_0xc23af7))_0x1aab0b?_0x1ba8db[_0x403a6c(0x27f)]({..._0x1aab0b,'number':Math[_0x403a6c(0x2da)](_0x25dc91+(_0x2f35ea&&_0x2f35ea[_0x403a6c(0x2c8)]||0x0),0x0)}):_0x1ba8db[_0x403a6c(0x27f)]({'coin':_0x130305,'symbol':_0x1bc9df,'reverse':![],'number':Math[_0x403a6c(0x2da)](_0x25dc91+(_0x2f35ea&&_0x2f35ea['offset']||0x0),0x0),'orderstatus':'none'});else{if((_0x25dc91!=0x0||_0x2f35ea)&&allSymbols[_0x403a6c(0x330)](_0x30e223))_0x1aab0b?_0x1ba8db['push']({..._0x1aab0b,'number':Math['max'](_0x25dc91+(_0x2f35ea&&_0x2f35ea[_0x403a6c(0x2c8)]||0x0),0x0)}):_0x1ba8db[_0x403a6c(0x27f)]({'coin':_0x130305,'symbol':_0x30e223,'reverse':!![],'number':Math[_0x403a6c(0x2da)](_0x25dc91+(_0x2f35ea&&_0x2f35ea[_0x403a6c(0x2c8)]||0x0),0x0),'orderstatus':_0x403a6c(0x304)});else _0x2f35ea&&_0x1ba8db[_0x403a6c(0x27f)]({'coin':_0x2f35ea[_0x403a6c(0x2f8)],'symbol':_0x2f35ea[_0x403a6c(0x24d)],'reverse':_0x2f35ea[_0x403a6c(0x334)],'number':0x0,'orderstatus':_0x403a6c(0x304)});}}}catch(_0x1900e4){if(!_0x330393)handleErrorNoStop(_0x1900e4,_0x403a6c(0x290));else await handleError(_0x1900e4,_0x403a6c(0x290));}return _0x1ba8db['sort']((_0x1331b1,_0x425d91)=>_0x1331b1[_0x403a6c(0x27a)]<_0x425d91['delta']?0x1:_0x425d91[_0x403a6c(0x27a)]<_0x1331b1['delta']?-0x1:0x0),_0x1185b4=cloneDeep(_0x1ba8db),_0x1ba8db=_0x1ba8db[_0x403a6c(0x340)](_0x4ff35c=>{const _0x21b63b=_0x403a6c,_0xf81b78=config[_0x21b63b(0x28d)][_0x21b63b(0x300)](_0x4d26e3=>_0x4d26e3[_0x21b63b(0x2f8)]==_0x4ff35c[_0x21b63b(0x2f8)]);return _0xf81b78&&!_0xf81b78[_0x21b63b(0x28b)];}),[_0x1ba8db,_0x1185b4];}async function getCoinNumber(_0x4f1423){const _0x1247f2=_0xba2ebe;let _0x582302;try{const _0x27ae44=await exchange[_0x1247f2(0x2a8)]();_0x582302=_0x27ae44[_0x1247f2(0x31f)][_0x4f1423];}catch(_0x44a856){await handleError(_0x44a856,'getCoinNumber()');}return _0x582302;}async function getOpenOrders(){const _0x34fa2c=_0xba2ebe;let _0x2238fd;allOpenOrders=[];try{for(const _0x10ce12 of config['portfolio']){!_0x10ce12[_0x34fa2c(0x28b)]&&_0x10ce12[_0x34fa2c(0x2f8)]!=config[_0x34fa2c(0x20d)]&&(_0x2238fd=await exchange['fetchOpenOrders'](_0x10ce12[_0x34fa2c(0x24d)]),_0x2238fd[_0x34fa2c(0x222)]>0x0&&allOpenOrders[_0x34fa2c(0x27f)](_0x2238fd[0x0]));}}catch(_0x163a3b){await handleError(_0x163a3b,_0x34fa2c(0x22d));}}async function handleOpenOrders(_0x4e929c=0x0){const _0x33dac4=_0xba2ebe;allOpenOrders[_0x33dac4(0x222)]==0x0&&lockOrders==ORDERS[_0x33dac4(0x238)]&&allOrdersPlaced&&(_0x4e929c==0x0?(logger['debug'](_0x33dac4(0x364)),_0x4e929c++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x33dac4(0x313)](_0x33dac4(0x219)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x2c13b4){const _0x39ef0a=_0xba2ebe,_0x1670a9=ccxt[_0x39ef0a(0x373)][_0x2c13b4[_0x39ef0a(0x230)][_0x39ef0a(0x314)]()],_0x37fc83=new _0x1670a9({'apiKey':_0x2c13b4['apiKey'],'secret':_0x2c13b4[_0x39ef0a(0x27e)],'options':{'defaultType':_0x39ef0a(0x29c)}});if(_0x2c13b4[_0x39ef0a(0x33a)])_0x37fc83[_0x39ef0a(0x246)]=_0x2c13b4[_0x39ef0a(0x33a)];try{await _0x37fc83[_0x39ef0a(0x2a8)]();}catch(_0x3b01fb){throw _0x3b01fb;}}function cloneDeep(_0x7ee29e){const _0x6e0675=_0xba2ebe;return JSON[_0x6e0675(0x29e)](JSON[_0x6e0675(0x378)](_0x7ee29e));}async function getPortfolio(_0x4aa9d2){const _0x55b3d8=_0xba2ebe;let _0x4bb2f9=[],_0x134cd1=[],_0x556c8f=[],_0x3a325f;if(_0x4aa9d2[_0x55b3d8(0x1ff)]!=='************'||_0x4aa9d2[_0x55b3d8(0x27e)]!=='************'||_0x4aa9d2['apiPassword']&&_0x4aa9d2[_0x55b3d8(0x33a)]!=='************'){if(config[_0x55b3d8(0x230)]){if(_0x4aa9d2[_0x55b3d8(0x1ff)]=='************')_0x4aa9d2['apiKey']=config['apiKey'];if(_0x4aa9d2[_0x55b3d8(0x27e)]=='************')_0x4aa9d2[_0x55b3d8(0x27e)]=config[_0x55b3d8(0x27e)];if(_0x4aa9d2['apiPassword']==_0x55b3d8(0x210))_0x4aa9d2['apiPassword']=config[_0x55b3d8(0x33a)];try{await testAPI(_0x4aa9d2);}catch(_0x2d6689){if(_0x2d6689[_0x55b3d8(0x329)]()[_0x55b3d8(0x330)](_0x55b3d8(0x31e))){logger[_0x55b3d8(0x313)](_0x55b3d8(0x3b6)),proxyEmit('portfolio',![]);return;}else{handleError(_0x2d6689,_0x55b3d8(0x323));return;}}}config['exchange']?updateExchange(_0x4aa9d2[_0x55b3d8(0x1ff)],_0x4aa9d2['apiSecret'],_0x4aa9d2[_0x55b3d8(0x33a)]):await initExchange(_0x4aa9d2[_0x55b3d8(0x230)],_0x4aa9d2['apiKey'],_0x4aa9d2[_0x55b3d8(0x27e)],_0x4aa9d2['apiPassword']);try{await loadSymbols();}catch(_0x363862){if(_0x363862['toString']()['includes'](_0x55b3d8(0x31e))){proxyEmit(_0x55b3d8(0x28d),![]);return;}else{handleError(_0x363862,_0x55b3d8(0x286));return;}}const _0x4056cc=await getCoins(0x0,![],_0x4aa9d2[_0x55b3d8(0x20d)]);_0x556c8f=cloneDeep(_0x4056cc[0x1]);}else{const _0x9aba7c=await getCoins();_0x556c8f=cloneDeep(_0x9aba7c[0x1]);}if(_0x4aa9d2[_0x55b3d8(0x20d)]=='')proxyEmit(_0x55b3d8(0x28d),_0x556c8f);else{_0x556c8f[_0x55b3d8(0x2ad)](_0x3b22e7=>{const _0x1e3f48=_0x55b3d8;if(_0x3b22e7[_0x1e3f48(0x2f8)]!=_0x4aa9d2['basecoin']&&allSymbols['includes'](_0x3b22e7[_0x1e3f48(0x24d)]))_0x4bb2f9['push'](_0x3b22e7[_0x1e3f48(0x24d)]);});if(_0x4bb2f9[_0x55b3d8(0x222)]==0x0)logHistory(_0x55b3d8(0x29f),_0x55b3d8(0x348));else{try{_0x134cd1=await getTickers(_0x4bb2f9);}catch(_0x22cd20){if(_0x22cd20[_0x55b3d8(0x329)]()[_0x55b3d8(0x330)](_0x55b3d8(0x31e))){proxyEmit(_0x55b3d8(0x28d),![]);return;}else handleError(_0x22cd20,_0x55b3d8(0x2ba));}_0x556c8f[_0x55b3d8(0x2ad)](_0xdd338c=>{const _0x5f486c=_0x55b3d8;_0xdd338c[_0x5f486c(0x2f8)]!=_0x4aa9d2[_0x5f486c(0x20d)]?_0x134cd1[_0xdd338c[_0x5f486c(0x24d)]]?_0x3a325f=_0xdd338c[_0x5f486c(0x334)]?0x1/_0x134cd1[_0xdd338c['symbol']][_0x5f486c(0x2ee)]:_0x134cd1[_0xdd338c[_0x5f486c(0x24d)]][_0x5f486c(0x2ee)]:_0x3a325f=0x0:_0x3a325f=0x1,_0xdd338c[_0x5f486c(0x392)]=formatResult(_0x3a325f,0x8);}),await getMarketCap(_0x556c8f),proxyEmit(_0x55b3d8(0x28d),_0x556c8f);}}}function truncateTradeAmount(_0x241daf,_0x134d53){const _0x13fba3=_0xba2ebe;let _0x4ecfb6=0x0;try{_0x4ecfb6=exchange[_0x13fba3(0x31d)](_0x241daf,_0x134d53);}catch(_0x52619d){}return _0x4ecfb6;}function checkMinimums(_0x38c4fd){const _0x4b9e7e=_0xba2ebe;let _0x20405e=!![];const _0x3dc9c3=!_0x38c4fd[_0x4b9e7e(0x334)]?markets[_0x38c4fd[_0x4b9e7e(0x24d)]][_0x4b9e7e(0x345)]['amount'][_0x4b9e7e(0x259)]:markets[_0x38c4fd[_0x4b9e7e(0x24d)]][_0x4b9e7e(0x345)][_0x4b9e7e(0x33b)]['min'],_0x43f39d=!_0x38c4fd[_0x4b9e7e(0x334)]?markets[_0x38c4fd[_0x4b9e7e(0x24d)]]['limits'][_0x4b9e7e(0x33b)][_0x4b9e7e(0x259)]:markets[_0x38c4fd['symbol']]['limits'][_0x4b9e7e(0x213)][_0x4b9e7e(0x259)],_0x28d768=truncateTradeAmount(_0x38c4fd[_0x4b9e7e(0x24d)],_0x38c4fd[_0x4b9e7e(0x240)]);_0x38c4fd[_0x4b9e7e(0x240)]=_0x28d768;if(Math[_0x4b9e7e(0x274)](_0x28d768)<_0x3dc9c3)_0x20405e=![];if(Math[_0x4b9e7e(0x274)](_0x28d768)*_0x38c4fd[_0x4b9e7e(0x2ee)]<_0x43f39d)_0x20405e=![];if(_0x38c4fd[_0x4b9e7e(0x2ff)]==_0x4b9e7e(0x376)){let _0x5bcfc5=config[_0x4b9e7e(0x28d)][_0x4b9e7e(0x300)](_0x31ebf1=>_0x31ebf1[_0x4b9e7e(0x2f8)]==_0x38c4fd[_0x4b9e7e(0x2f8)]);if(_0x5bcfc5[_0x4b9e7e(0x2c8)]>0x0){if(Math[_0x4b9e7e(0x274)](_0x28d768)>_0x38c4fd[_0x4b9e7e(0x347)]-_0x5bcfc5[_0x4b9e7e(0x2c8)])_0x20405e=![];}else{if(Math['abs'](_0x28d768)>_0x38c4fd[_0x4b9e7e(0x347)])_0x20405e=![];}}if(_0x38c4fd[_0x4b9e7e(0x2ff)]==_0x4b9e7e(0x35e)){let _0x4dfe68=config[_0x4b9e7e(0x28d)][_0x4b9e7e(0x300)](_0x48ac49=>_0x48ac49['coin']==config[_0x4b9e7e(0x20d)]),_0x1c2854=currentCoins[_0x4b9e7e(0x300)](_0x3c2dc6=>_0x3c2dc6[_0x4b9e7e(0x2f8)]==config[_0x4b9e7e(0x20d)]);if(_0x4dfe68[_0x4b9e7e(0x2c8)]>0x0){if(Math['abs'](_0x28d768)*_0x38c4fd['last']>_0x1c2854[_0x4b9e7e(0x347)]-_0x4dfe68[_0x4b9e7e(0x2c8)])_0x20405e=![];}else{if(Math[_0x4b9e7e(0x274)](_0x28d768)*_0x38c4fd[_0x4b9e7e(0x2ee)]>_0x1c2854[_0x4b9e7e(0x347)])_0x20405e=![];}}return _0x20405e;}async function getBalances(_0x55defe=!![]){const _0x377bcd=_0xba2ebe;let _0x341b3a=0x0,_0x4b8a42;const _0x2210d1=config[_0x377bcd(0x381)];if(config[_0x377bcd(0x342)]&&config[_0x377bcd(0x293)]<0x0)await validate24hChanges();currentCoins[_0x377bcd(0x2ad)](_0x42603e=>{const _0x30c853=_0x377bcd;if(_0x42603e[_0x30c853(0x2f8)]!=config[_0x30c853(0x20d)]){let _0x4105fb=gTicker[noslash(_0x42603e[_0x30c853(0x24d)])];_0x4b8a42=_0x42603e[_0x30c853(0x334)]?0x1/_0x4105fb:_0x4105fb;}else _0x4b8a42=0x1;let _0x5d73e0=_0x42603e[_0x30c853(0x347)]*_0x4b8a42;_0x341b3a+=_0x5d73e0,_0x42603e['last']=formatResult(Number(_0x4b8a42),0x8),_0x42603e[_0x30c853(0x289)]=_0x5d73e0;}),currentCoins[_0x377bcd(0x2ad)](_0x269824=>{const _0xcb9bb5=_0x377bcd;let _0x478b5e=config[_0xcb9bb5(0x28d)]['find'](_0x7c37a1=>_0x7c37a1[_0xcb9bb5(0x2f8)]==_0x269824['coin']),_0x48b3b9=Number(_0x478b5e[_0xcb9bb5(0x352)]),_0x3f841c=_0x269824[_0xcb9bb5(0x289)]/_0x341b3a*0x64,_0x5428ba=_0x48b3b9*_0x341b3a/0x64/_0x269824['last']-_0x269824[_0xcb9bb5(0x347)];_0x269824['distribution']=formatResult(_0x3f841c,0x3),_0x269824[_0xcb9bb5(0x2ae)]=formatResult(_0x48b3b9,0x3),_0x269824[_0xcb9bb5(0x240)]=formatResult(_0x5428ba,0x8),_0x269824[_0xcb9bb5(0x2ff)]='',_0x269824[_0xcb9bb5(0x3a1)]=![];if(_0x269824[_0xcb9bb5(0x2f8)]!=config[_0xcb9bb5(0x20d)]){if(_0x269824['distribution']>_0x48b3b9)_0x269824[_0xcb9bb5(0x2ff)]='sell',_0x269824[_0xcb9bb5(0x3a1)]=checkMinimums(_0x269824);else _0x269824['distribution']<_0x48b3b9&&(_0x269824[_0xcb9bb5(0x2ff)]=_0xcb9bb5(0x35e),_0x269824[_0xcb9bb5(0x3a1)]=checkMinimums(_0x269824));}_0x269824[_0xcb9bb5(0x27a)]=_0x269824['distribution']/_0x269824['target']-0x1;if(_0x269824[_0xcb9bb5(0x326)]==_0xcb9bb5(0x2f7)||_0x269824[_0xcb9bb5(0x326)]==_0xcb9bb5(0x3a6))_0x269824['orderstatus']=_0xcb9bb5(0x304);}),currentCoins['sort']((_0x2dbc33,_0x445c79)=>_0x2dbc33[_0x377bcd(0x27a)]<_0x445c79[_0x377bcd(0x27a)]?0x1:_0x445c79['delta']<_0x2dbc33['delta']?-0x1:0x0);const _0x1f9ffe=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x1f9ffe[_0x377bcd(0x37c)],'usd':_0x1f9ffe['usd'],'portfolio':JSON[_0x377bcd(0x378)](currentCoins),'threshold':_0x2210d1},proxyEmit(_0x377bcd(0x2c0),{'serverversion':serverversion,'balances':lastBalances});if(_0x55defe){if(config[_0x377bcd(0x342)])headlessMode({'portfolio':currentCoins,'threshold':_0x2210d1});else{if(lockOrders==ORDERS[_0x377bcd(0x1f4)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x2210d1});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x2fa1ff=getNormalizedPerformance();getStartingBalances(_0x2fa1ff),emitPerformance(_0x2fa1ff);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x191ebe=_0xba2ebe;if(!lastBalances)return;let _0x1ef75d=[],_0x416854,_0x15fce2=JSON['parse'](lastBalances['portfolio']);_0x15fce2[_0x191ebe(0x312)]((_0x2ce85e,_0x10e11b)=>_0x2ce85e[_0x191ebe(0x2f8)]>_0x10e11b['coin']?0x1:_0x10e11b['coin']>_0x2ce85e[_0x191ebe(0x2f8)]?-0x1:0x0),_0x15fce2[_0x191ebe(0x2ad)](_0x11bb34=>{const _0x3383b0=_0x191ebe;let _0x442ccd={'coin':_0x11bb34[_0x3383b0(0x2f8)],'number':_0x11bb34[_0x3383b0(0x347)],'price':_0x11bb34['last']};_0x1ef75d[_0x3383b0(0x27f)](_0x442ccd);});const _0x101384=await getFiat();_0x416854={'date':lastBalances[_0x191ebe(0x317)][_0x191ebe(0x27d)]('\x20')[0x0],'eur':_0x101384[_0x191ebe(0x37c)],'usd':_0x101384['usd'],'coins':_0x1ef75d};let _0x39c3b8=dbPerformance[_0x191ebe(0x2b7)](_0x191ebe(0x34a))[_0x191ebe(0x300)]({'date':_0x416854['date']})[_0x191ebe(0x289)]();_0x39c3b8?_0x416854[_0x191ebe(0x1f1)]!=config[_0x191ebe(0x34e)]&&dbPerformance[_0x191ebe(0x2b7)](_0x191ebe(0x34a))[_0x191ebe(0x300)]({'date':_0x416854[_0x191ebe(0x1f1)]})[_0x191ebe(0x288)](_0x416854)[_0x191ebe(0x3b4)]():dbPerformance[_0x191ebe(0x2b7)](_0x191ebe(0x34a))[_0x191ebe(0x27f)](_0x416854)[_0x191ebe(0x3b4)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x351101=_0xba2ebe;let _0xa71d43=[];if(dbPerformance[_0x351101(0x2cd)](_0x351101(0x34a))[_0x351101(0x289)]()){let _0x531c18=dbPerformance['get'](_0x351101(0x34a))['cloneDeep']()[_0x351101(0x340)](_0x26b056=>{const _0x4b534c=_0x351101;if(_0x26b056[_0x4b534c(0x245)]['length']==0x0)return![];else return!![];})[_0x351101(0x1f2)]('date')['value'](),_0x30ef5e=[...config['liquidity']];_0x30ef5e['sort']((_0x50605b,_0x689cc4)=>_0x50605b['date']>_0x689cc4['date']?-0x1:_0x689cc4[_0x351101(0x1f1)]>_0x50605b[_0x351101(0x1f1)]?0x1:0x0);let _0x167f5c=0x1,_0x61e087=[],_0xccacfe=0x0;_0x531c18['slice']()[_0x351101(0x334)]()[_0x351101(0x2ad)]((_0x120dfa,_0x276ea6)=>{const _0x1c12e9=_0x351101;if(_0x30ef5e[_0xccacfe]){if(_0x531c18[_0x531c18['length']-_0x276ea6]&&_0x30ef5e[_0xccacfe][_0x1c12e9(0x1f1)]==_0x531c18[_0x531c18[_0x1c12e9(0x222)]-_0x276ea6][_0x1c12e9(0x1f1)]){if(_0x276ea6<_0x531c18[_0x1c12e9(0x222)]){let _0xd1adc2=0x0,_0x171126=0x0;_0x531c18[_0x531c18['length']-_0x276ea6][_0x1c12e9(0x245)][_0x1c12e9(0x2ad)](_0x1aaac5=>{const _0x3599bb=_0x1c12e9;_0x171126+=_0x1aaac5['number']*_0x1aaac5[_0x3599bb(0x392)];}),_0x30ef5e[_0xccacfe][_0x1c12e9(0x2d9)][_0x1c12e9(0x2ad)](_0x5206c5=>{const _0x5ad513=_0x1c12e9;_0xd1adc2+=_0x5206c5[_0x5ad513(0x347)]*_0x5206c5['price'];}),_0x167f5c*=_0xd1adc2/(_0x171126-_0xd1adc2)+0x1;}_0xccacfe++;}}let _0x399034=0x0;_0x120dfa[_0x1c12e9(0x245)][_0x1c12e9(0x2ad)](_0x2b3098=>{const _0x5a1122=_0x1c12e9;_0x399034+=_0x2b3098[_0x5a1122(0x347)]*_0x2b3098[_0x5a1122(0x392)];}),_0x61e087[_0x531c18[_0x1c12e9(0x222)]-_0x276ea6-0x1]=_0x399034*(_0x167f5c-0x1);});let _0x4f455a=[];_0x30ef5e=[...config[_0x351101(0x365)]]||[];let _0x55cbe6=0x0;_0xccacfe=0x0,_0x531c18[_0x351101(0x2ad)]((_0x9f4fa2,_0x158f57)=>{const _0x358e44=_0x351101;if(_0x30ef5e[_0xccacfe]){const _0x2b8b84=fns[_0x358e44(0x29e)](_0x30ef5e[_0xccacfe][_0x358e44(0x1f1)],'yyyy/MM/dd',new Date()),_0x2de194=fns[_0x358e44(0x29e)](_0x9f4fa2[_0x358e44(0x1f1)],_0x358e44(0x262),new Date());if(fns[_0x358e44(0x2cc)](_0x2b8b84,_0x2de194)){let _0x148895=0x0;_0x30ef5e[_0xccacfe][_0x358e44(0x2d9)][_0x358e44(0x2ad)](_0x2ef297=>{const _0x507465=_0x358e44;!_0x4f455a[_0x2ef297[_0x507465(0x2f8)]]?_0x4f455a[_0x2ef297[_0x507465(0x2f8)]]=_0x2ef297[_0x507465(0x347)]:(_0x148895=_0x4f455a[_0x2ef297[_0x507465(0x2f8)]],_0x4f455a[_0x2ef297[_0x507465(0x2f8)]]+=_0x2ef297[_0x507465(0x347)]);const _0x4c5e63=_0x9f4fa2[_0x507465(0x245)][_0x507465(0x300)](_0x3446eb=>_0x3446eb[_0x507465(0x2f8)]==_0x2ef297[_0x507465(0x2f8)]);(!_0x4c5e63||_0x4c5e63[_0x507465(0x347)]==0x0)&&(_0x55cbe6+=(-_0x2ef297[_0x507465(0x347)]-_0x148895)*_0x2ef297[_0x507465(0x392)]);}),_0xccacfe++;}}_0x9f4fa2[_0x358e44(0x245)][_0x358e44(0x2ad)]((_0x396108,_0x1acd59)=>{const _0x3815b3=_0x358e44;_0x4f455a[_0x396108['coin']]&&(_0x396108[_0x3815b3(0x2c6)]=_0x4f455a[_0x396108[_0x3815b3(0x2f8)]]);}),_0xa71d43['push']({'date':_0x9f4fa2[_0x358e44(0x1f1)],'eur':_0x9f4fa2[_0x358e44(0x37c)],'usd':_0x9f4fa2['usd'],'offset':_0x61e087[_0x158f57],'netoffset':_0x55cbe6,'coins':_0x9f4fa2[_0x358e44(0x245)]});});}return _0xa71d43;}function emitPerformance(_0x311869){const _0x570b73=_0xba2ebe;_0x311869['length']!==0x0?(proxyEmit(_0x570b73(0x23b),_0x311869),lastPerformanceEmitted=getDate()):proxyEmit(_0x570b73(0x23b),[]);}function getPerf(_0xeb26aa,_0x434d11){const _0x1d64ad=_0xba2ebe;let _0x1b4304=0x0,_0x2b2ccb=0x0,_0x59eb55=0x0;_0xeb26aa['coins'][_0x1d64ad(0x2ad)](_0x50ffad=>{const _0x3ecbe4=_0x1d64ad;_0x1b4304+=_0x50ffad['number']*_0x50ffad[_0x3ecbe4(0x392)];});_0x434d11&&(_0x1b4304+=_0xeb26aa[_0x1d64ad(0x2c8)]);if(config[_0x1d64ad(0x20d)]===_0x1d64ad(0x3b3)||config['basecoin']==='ETH'||config[_0x1d64ad(0x20d)]===_0x1d64ad(0x287))_0x2b2ccb=_0x1b4304*_0xeb26aa[_0x1d64ad(0x37c)],_0x59eb55=_0x1b4304*_0xeb26aa['usd'];else{if(usdBasecoins[_0x1d64ad(0x330)](config[_0x1d64ad(0x20d)]))_0x2b2ccb=_0x1b4304*_0xeb26aa['eur']/_0xeb26aa[_0x1d64ad(0x1f5)],_0x59eb55=_0x1b4304;else config[_0x1d64ad(0x20d)]==='EUR'&&(_0x2b2ccb=_0x1b4304,_0x59eb55=_0x1b4304*_0xeb26aa[_0x1d64ad(0x1f5)]/_0xeb26aa['eur']);}return[_0x1b4304,_0x2b2ccb,_0x59eb55];}function getKPIs(_0x58ebae,_0x71bf3c=_0xba2ebe(0x2ef)){const _0x33c70e=_0xba2ebe,_0x3122a0=config['basecoin'],_0x5a4e8d=lastBalances,_0x5eabef=currentCoins,_0xc4cd8a=getNormalizedPerformance(),_0x41c67a=_0x58ebae==='basecoin'?_0x3122a0:_0x58ebae===_0x33c70e(0x2e1)||_0x58ebae===_0x33c70e(0x357)?_0x71bf3c:_0x33c70e(0x2b3)+_0x3122a0,_0x37570c=_0x58ebae==='net-basecoin'?_0x33c70e(0x2ea):_0x58ebae===_0x33c70e(0x357)?_0x33c70e(0x2ea):_0x41c67a+_0x33c70e(0x264),_0x5667e0=_0x58ebae===_0x33c70e(0x36b)||_0x58ebae===_0x33c70e(0x357)?_0x33c70e(0x2ea):_0x41c67a+'\x20change';let _0x12e49c=0x0;_0x5eabef[_0x33c70e(0x2ad)](_0xd1a03=>{const _0x53b736=_0x33c70e;_0x12e49c+=_0xd1a03['number']*_0xd1a03[_0x53b736(0x2ee)];});if(_0x58ebae===_0x33c70e(0x2e1)||_0x58ebae==='net-fiat'){if(_0x3122a0===_0x33c70e(0x3b3)||_0x3122a0===_0x33c70e(0x30b)||_0x3122a0===_0x33c70e(0x287))_0x12e49c=_0x12e49c*(_0x71bf3c==='EUR'?_0x5a4e8d[_0x33c70e(0x37c)]:_0x5a4e8d['usd']);else{if(usdBasecoins[_0x33c70e(0x330)](_0x3122a0))_0x12e49c=_0x12e49c*(_0x71bf3c==='EUR'?_0x5a4e8d['eur']/_0x5a4e8d[_0x33c70e(0x1f5)]:0x1);else _0x3122a0===_0x33c70e(0x2ef)&&(_0x12e49c=_0x12e49c*(_0x71bf3c===_0x33c70e(0x2ef)?0x1:_0x5a4e8d[_0x33c70e(0x1f5)]/_0x5a4e8d[_0x33c70e(0x37c)]));}}let _0x30d963;if(_0x12e49c!==0x0){if(_0x58ebae===_0x33c70e(0x20d))_0x30d963=(_0x12e49c/startingBalances['basecoin']-0x1)*0x64;else{if(_0x71bf3c==='EUR')_0x30d963=(_0x12e49c/startingBalances[_0x33c70e(0x37c)]-0x1)*0x64;else _0x30d963=(_0x12e49c/startingBalances[_0x33c70e(0x1f5)]-0x1)*0x64;}let _0x3f1e95=0x0;if(startingBalances[_0x33c70e(0x245)])_0x5eabef[_0x33c70e(0x2ad)](_0x1b9a3d=>{const _0x47f263=_0x33c70e;let _0x20864b=startingBalances[_0x47f263(0x245)]['find'](_0x893a93=>_0x893a93['coin']===_0x1b9a3d[_0x47f263(0x2f8)]);if(_0x20864b&&_0x20864b[_0x47f263(0x2f8)]&&_0x1b9a3d['number']!==0x0)_0x3f1e95+=_0x20864b[_0x47f263(0x347)]*_0x1b9a3d[_0x47f263(0x2ee)];});let _0x3d36a6=0x0;if(_0xc4cd8a[_0x33c70e(0x222)]!==0x0){let _0xc71ef7=_0xc4cd8a[_0xc4cd8a[_0x33c70e(0x222)]-0x1];_0x3d36a6=_0xc71ef7[_0x33c70e(0x2c1)];}_0x3f1e95-=_0x3d36a6;_0x58ebae===_0x33c70e(0x36b)&&(_0x30d963=(_0x12e49c-_0x3f1e95)/startingBalances[_0x33c70e(0x20d)]*0x64,_0x12e49c=_0x12e49c-_0x3f1e95);if(_0x58ebae===_0x33c70e(0x357)){let _0x9d401b=_0x71bf3c===_0x33c70e(0x2ef)?startingBalances[_0x33c70e(0x37c)]:startingBalances['usd'];if(_0x3122a0==='BTC'||_0x3122a0===_0x33c70e(0x30b)||_0x3122a0==='PAXG')_0x3f1e95=_0x71bf3c==='EUR'?_0x3f1e95*_0x5a4e8d[_0x33c70e(0x37c)]:_0x3f1e95*_0x5a4e8d[_0x33c70e(0x1f5)];else{if(usdBasecoins['includes'](_0x3122a0))_0x3f1e95=_0x71bf3c===_0x33c70e(0x2ef)?_0x3f1e95*_0x5a4e8d[_0x33c70e(0x37c)]/_0x5a4e8d[_0x33c70e(0x1f5)]:_0x3f1e95;else _0x3122a0===_0x33c70e(0x2ef)&&(_0x3f1e95=_0x71bf3c===_0x33c70e(0x2ef)?_0x3f1e95:_0x3f1e95*_0x5a4e8d['usd']/_0x5a4e8d[_0x33c70e(0x37c)]);}_0x30d963=(_0x12e49c-_0x3f1e95)/_0x9d401b*0x64,_0x12e49c=_0x12e49c-_0x3f1e95;}if(_0x30d963){if(_0x30d963<0x64)_0x30d963=_0x30d963[_0x33c70e(0x23e)](0x2);else{if(_0x30d963<0x3e8)_0x30d963=_0x30d963[_0x33c70e(0x23e)](0x1);else _0x30d963=_0x30d963[_0x33c70e(0x23e)](0x0);}}else _0x30d963=Number('0')[_0x33c70e(0x23e)](0x2);if(_0x12e49c){if(Math['abs'](_0x12e49c)<0.000001)_0x12e49c=_0x12e49c['toFixed'](0x2);else{if(Math[_0x33c70e(0x274)](_0x12e49c)<0.1)_0x12e49c=_0x12e49c[_0x33c70e(0x23e)](0x6);else{if(Math[_0x33c70e(0x274)](_0x12e49c)<0x1)_0x12e49c=_0x12e49c[_0x33c70e(0x23e)](0x5);else{if(Math[_0x33c70e(0x274)](_0x12e49c)<0xa)_0x12e49c=_0x12e49c[_0x33c70e(0x23e)](0x4);else{if(Math[_0x33c70e(0x274)](_0x12e49c)<0x64)_0x12e49c=_0x12e49c[_0x33c70e(0x23e)](0x3);else{if(Math[_0x33c70e(0x274)](_0x12e49c)<0x3e8)_0x12e49c=_0x12e49c['toFixed'](0x2);else _0x12e49c=_0x12e49c[_0x33c70e(0x23e)](0x2);}}}}}}else _0x12e49c=Number('0')['toFixed'](0x2);}else _0x30d963=Number('0')['toFixed'](0x2);return{'value':_0x12e49c,'change':_0x30d963,'leftTxt':_0x37570c,'rightTxt':_0x5667e0};}async function getStartingBalances(_0x2c91ba,_0x2cdf3d=!![]){const _0x265b2f=_0xba2ebe;if(_0x2c91ba['length']!==0x0){const [_0x4b210b,_0x43328a,_0x3f0ad0]=getPerf(_0x2c91ba[0x0],!![]);let _0x17251d=[];config[_0x265b2f(0x28d)][_0x265b2f(0x2ad)](_0x3d0c33=>{const _0x4ed1ea=_0x265b2f;let _0x1b243c=0x0,_0x4d8284;config[_0x4ed1ea(0x365)][_0x4ed1ea(0x2ad)](_0x22e932=>{const _0x7b0466=_0x4ed1ea;let _0x17f83b=_0x22e932[_0x7b0466(0x2d9)][_0x7b0466(0x300)](_0x372e70=>_0x372e70[_0x7b0466(0x2f8)]==_0x3d0c33[_0x7b0466(0x2f8)]);if(_0x17f83b){_0x1b243c+=_0x17f83b[_0x7b0466(0x347)];if(!_0x4d8284)_0x4d8284=_0x17f83b[_0x7b0466(0x392)];}}),_0x17251d['push']({'coin':_0x3d0c33[_0x4ed1ea(0x2f8)],'number':_0x1b243c,'initialprice':_0x4d8284});});const _0x3f9112={'basecoin':_0x4b210b,'eur':_0x43328a,'usd':_0x3f0ad0,'coins':_0x17251d};if(_0x2cdf3d)proxyEmit('starting-balances',_0x3f9112);startingBalances=_0x3f9112;}}function headlessMode(_0x510b1a){const _0x520803=_0xba2ebe;let _0x12a263=_0x510b1a[_0x520803(0x28d)],_0x54c27c=_0x510b1a['threshold'],_0x48d9bf=[];for(let _0x3b591d of _0x12a263){if(_0x3b591d[_0x520803(0x2f8)]!=config['basecoin']){if(_0x3b591d['delta']>=_0x54c27c/0x64){if(_0x3b591d['valid'])_0x48d9bf[_0x520803(0x27f)](_0x3b591d);}else{if(_0x3b591d['delta']<=-_0x54c27c/0x64){if(_0x3b591d[_0x520803(0x3a1)])_0x48d9bf[_0x520803(0x27f)](_0x3b591d);}}}}_0x48d9bf[_0x520803(0x222)]>0x0&&(lockOrders==ORDERS[_0x520803(0x1f4)]&&!coolingDown&&_0x48d9bf[_0x520803(0x2ad)](_0x145494=>{const _0x58ff12=_0x520803;logger[_0x58ff12(0x313)]('Trigger:\x20'+_0x145494[_0x58ff12(0x2f8)]+'\x20'+_0x145494[_0x58ff12(0x347)]+'\x20'+_0x145494['last']+'\x20'+_0x145494[_0x58ff12(0x352)]+'%\x20'+_0x145494['target']+'%\x20'+(0x64*_0x145494[_0x58ff12(0x27a)])[_0x58ff12(0x23e)](0x2)+'%\x20('+_0x54c27c['toFixed'](0x2)+'%)');}),placeOrder(_0x48d9bf));}function notifyBalance(_0x2ff069){const _0x2d1b78=_0xba2ebe;let _0x10c9e7=_0x2ff069[_0x2d1b78(0x28d)],_0x4c7c8b=_0x2ff069['threshold'],_0x270e7e=[];for(let _0x12838f of _0x10c9e7){if(_0x12838f[_0x2d1b78(0x2f8)]!=config['basecoin']){if(_0x12838f['delta']>=_0x4c7c8b/0x64){if(_0x12838f[_0x2d1b78(0x3a1)])_0x270e7e['push'](_0x12838f);}else{if(_0x12838f[_0x2d1b78(0x27a)]<=-_0x4c7c8b/0x64){if(_0x12838f[_0x2d1b78(0x3a1)])_0x270e7e[_0x2d1b78(0x27f)](_0x12838f);}}}}if(_0x270e7e[_0x2d1b78(0x222)]>0x0){let _0x2699d0=_0x270e7e[_0x2d1b78(0x310)](_0x2302bd=>_0x2302bd[_0x2d1b78(0x2f8)]);_0x2699d0['sort']();let _0x383454=_0x2699d0['join'](',\x20');if(!lastCoinsToBalance)logHistory(_0x2d1b78(0x270),_0x2d1b78(0x291));lastCoinsToBalance=_0x383454;}}function symbolToCoin(_0x4b9d67){const _0x5db59a=_0xba2ebe;let _0x533172;if(_0x4b9d67[_0x5db59a(0x330)]('/'+config[_0x5db59a(0x20d)]))_0x533172=_0x4b9d67['replace']('/'+config[_0x5db59a(0x20d)],'');if(_0x4b9d67[_0x5db59a(0x330)](config['basecoin']+'/'))_0x533172=_0x4b9d67['replace'](config['basecoin']+'/','');return _0x533172;}async function unlockOrders(){const _0x2aec4e=_0xba2ebe;if(allOrdersPlaced&&lockOrders==ORDERS['LOCKED']){logger[_0x2aec4e(0x313)](_0x2aec4e(0x2e2)),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x5702d3=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x5702d3,blockTransactionDetection=![],validateOrdersState=_0x2aec4e(0x2c6),persistOpenOrders([]),lockOrders=ORDERS[_0x2aec4e(0x1f4)],logger[_0x2aec4e(0x313)]('2\x20-\x20Orders\x20unlocked');}}function _0x108d(){const _0xa63121=['differenceInSeconds','RETRY\x20-\x20Error\x20in\x20','3992400ZseFSR','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20|\x20exchange:\x20','side','find','toUpperCase','2.3.5',':\x20Bot\x20','none','showConfig','emitHistory','Invalid\x20quantity','orderId','PermissionDenied','substring','ETH','Bot\x20','Binance','mkdirSync','exchange\x20not\x20reloaded','map','TUSD','sort','debug','toLowerCase','./config/','InvalidOrder','time','-performance.json','storeHeadless','timeshift','botname','quote','amountToPrecision','AuthenticationError','total','realized','getTime','cloneDeep','getPortfolio(0)','leftTxt','\x20minutes\x20-\x20','orderstatus','Pausing\x20for\x20','InsufficientFunds','toString','2\x20-\x20handling\x20FILLED\x20order:\x20',')\x20|\x20exchange:\x20','Saving\x20configuration','623049NsxBVH','keys','2.5.0','includes','ccxt','Symbol(s):\x20','130883LPlUtb','reverse','Order\x20is\x20invalid:\x20','currency','initTickers()','\x20-\x20bot\x20not\x20started','highest','apiPassword','cost','marketcapEnabled','floor','(((.+)+)+)+$','\x20>\x20details:','filter','MIN_NOTIONAL','headless','\x20|\x20lock\x20orders:\x20','getMinutes','limits','getAllOrders()','number','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Exception\x20thrown\x20in\x20','data','kill','breakeven','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','startdate','watchOrders','axios','memoryUsage','distribution','watchTradesForSymbols','OnMaintenance','<pre>','function','net-fiat','createOrder','request-time','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','loading-canceled','Error\x20while\x20deleting\x20files:\x20','onepagemode','buy','./version.json','\x20>\x20[DEBUG]\x20','storeConfiguration','recreate','ORDERS.UNLOCKING','1\x20-\x20Handle\x20open\x20orders','liquidity','Loading\x20completed','decrypt','sqrt','watchTrades','detectLiquidityChange()','net-basecoin','loadSymbols()','Bybit','\x20>\x20','1\x20-\x20Validate\x20orders:\x20','sha256','-results.json','type','pro','Avoiding\x20continuous\x20order\x20attempts','2.6.23','sell','limit','stringify','\x20:\x20','set','slider','eur','exchanges','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','0\x20-\x20EXECUTION:\x20','bb-secure.json','threshold','fromCodePoint','fees','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','</pre>','Error:\x20Invalid\x20argument\x20','getDate','ask','balancing\x20resumes\x20when\x20cooldown\x20ends','watchTrades()','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','18txYmqJ','hybrid-crypto-js','./logs/','must\x20be\x20greater\x20than\x20minimum\x20amount','final','500pxKYBx','price','\x20exchange\x20error','Cryptocom','code','OrderNotFound','.json','Portfolio\x20change\x20detected:\x20','NetworkError','date-fns','\x20orders\x20in\x20less\x20than\x20','loadMarkets','lowdb/adapters/FileSync','getStartingBalances','recreateCoinResults()','getFullYear','valid','limit-high','%\x20(','configuration','<b>Bot\x20','canceled','\x20API\x20secret\x20is\x20invalid','bb-settings.json','\x20API\x20key\x20is\x20invalid','Cex','cooldown','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','placeOrder()','yargs/yargs','/output-000.log','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','2.6.22','unlinkSync','BTC','write','timestamp','Invalid\x20API\x20key,\x20secret\x20or\x20password\x20entered','date','sortBy','\x20/\x20','UNLOCKED','usd','marketcap','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','defaults','colorscheme','message','1908zyxwnL','splice','args','removed','apiKey','Reset\x20|\x20','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','deleteHistoryAlerts','ID:\x20','status','log','search','Waited\x20','enabled','progress','page','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','fetchTickers','basecoin','replace','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','************','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','logs','amount','fetchTicker','getSeconds','Portfolio\x20change\x20detected\x20-\x20bot\x20switched\x20to\x20manual\x20mode','\x20attempts','bot-','2\x20-\x20Handled\x20open\x20orders','add','BUSD','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)','customId','event','added','watchTradesForSymbols()','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','length','emojisell','\x20has\x20a\x2024h\x20drop\x20of\x20','\x20minutes','Limit\x20(low-margin)','pid','startprice','Resuming\x20(','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','3241665DiGStD','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','getOpenOrders()','Transaction\x20detection\x20unblocked','Executed\x20','exchange','send','USD','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','uncaughtException','bots','running','resetHistory','LOCKED','format','Unfilled\x20order(s)\x20canceled\x20after\x20','performance','lowdb','fetchTickers()','toFixed','padStart','trade','buys','\x20|\x20Custom\x20ID:\x20','coin-loading-progress','1\x20-\x20FILLED\x20known\x20order:\x20','coins','password','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','padEnd','balancing\x20resumed','Initializing\x20coin\x20results','-events.json','Failed\x20to\x20load\x20coin\x20data\x20for\x20','symbol','bot','2.6.0','Invalid\x20symbol:\x20','API-key\x20format\x20invalid','\x20|\x20highest\x20fee:\x20','complete','shift','recent20','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','cancelOrder','\x20portfolio:</b>\x20\x0a\x0a','min','market','indexOf','average','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','11iCjnmd','openOrders','no\x20open\x20orders','12IwyPgF','yyyy/MM/dd','fee','\x20value','Initiating\x20bot\x20restart','botID','Huobi','restart','getMonth','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','/EUR','Bitget','cancelLoading','\x20network\x20error','4174902lWUnee','warning','exec','ORDERS.LOCKED','-------------------------------\x0a','abs','existsSync','sendPortfolioTelegram','red_yellow_blue','remove','closed','delta','emojibuy','Order\x20amount\x20is\x20invalid:\x20','split','apiSecret','push','parseISO','createWriteStream','Market','close','findIndex','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','getPortfolio(1)','PAXG','assign','value','version','excluded','market_cap','portfolio','\x20hour','join','getCoins()','Manual\x20balancing\x20required','\x20uses\x20','change24h','USDT','slice','success','sells','showname','marketcapApi','autoliquidity','apply','spot','\x20order:\x20','parse','error','***','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','ongoing','milliseconds','round','startnumber','process\x20','random','fetchBalance','ordertype','\x20-\x20pausing\x20bot\x20for\x20','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','39156470Mbzsyh','forEach','target','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','rightTxt','\x20|\x20','ExchangeError','Net\x20','Headless:\x20','/backup/','RSA-OAEP','get','startsWith','constructor','getPortfolio(2)','001','stopExchange()','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','DDoSProtection','datetime','balances','netoffset','settings','change','No\x20more\x20open\x20orders\x20-\x20',':\x20timer\x20>','initial','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','offset','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','Huobipro','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','isEqual','has','RequestTimeout','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','fetchClosedOrders','entries','secure','\x20-\x20','BNB/','storeFiat','active','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','changes','max','order','pop','timeout','getHours','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','Insufficient\x20funds\x20to\x20execute\x20order:\x20','fiat','1\x20-\x20Unlock\x20orders','BNB','<b>','Fee\x20discount\x20refund\x20detected:\x20','update-liquidity','limit-low','USDC','remainingSymbols','Net\x20effect','\x20metrics:</b>\x20\x0a\x0a','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','open','last','EUR','event-history','percentage','basecoinvalue','full','privateKey','test','argv','filled','coin','RETRY\x20-\x20Problem\x20resolved\x20after\x20'];_0x108d=function(){return _0xa63121;};return _0x108d();}async function validateOrders(_0x4a7542){const _0x46aff8=_0xba2ebe;if(_0x4a7542)validateOrdersState=_0x4a7542;logger[_0x46aff8(0x313)](_0x46aff8(0x36f)+validateOrdersState+_0x46aff8(0x343)+(lockOrders==0x1?_0x46aff8(0x272):lockOrders==0x2?_0x46aff8(0x363):'ORDERS.UNLOCKED'));let _0x21688f=[],_0x14b195=config[_0x46aff8(0x2a9)]=='market'?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x46aff8(0x2dd)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x46aff8(0x238)])return;logger[_0x46aff8(0x313)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders[_0x46aff8(0x2ad)](_0x3ac12c=>{const _0x3e086a=_0x46aff8;let _0xff076b=![];_0x3ac12c['filled']>0x0&&(_0xff076b=!![]),_0x21688f['push'](_0xff076b),_0xff076b&&config[_0x3e086a(0x2a9)]!=_0x3e086a(0x25a)&&logHistory('order','Order\x20filled:\x20'+_0x3ac12c['symbol']+'\x20'+_0x3ac12c[_0x3e086a(0x2ff)]+'\x20#'+formatResult(_0x3ac12c[_0x3e086a(0x2f7)],0x8)+'\x20@'+formatResult(_0x3ac12c[_0x3e086a(0x392)],0x8));}),_0x21688f[_0x46aff8(0x2ad)]((_0xd49598,_0x43a527)=>{const _0x594b49=_0x46aff8;if(_0xd49598)lastOrders[_0x594b49(0x1fc)](_0x43a527,0x1);}),persistOpenOrders(lastOrders);const _0x238b23=coolingDown?_0x46aff8(0x389):_0x46aff8(0x249);if(validateOrdersState==_0x46aff8(0x2c6)){validateOrdersState=_0x46aff8(0x2a2);if(_0x21688f[_0x46aff8(0x330)](![])){if(config[_0x46aff8(0x2a9)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x46aff8(0x2a2)){if(_0x21688f[_0x46aff8(0x330)](![])){}else{if(allOrdersPlaced){if(config[_0x46aff8(0x2a9)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x46aff8(0x390))_0x21688f[_0x46aff8(0x330)](![])&&(config['ordertype']=='market'?logHistory(_0x46aff8(0x296),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x14b195*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20'+_0x238b23):(await cancelOrders(),logHistory(_0x46aff8(0x296),_0x46aff8(0x23a)+Math[_0x46aff8(0x2a4)](_0x14b195*validateOrderInterval/0xea60)+_0x46aff8(0x325)+_0x238b23))),await unlockOrders();else{if(validateOrdersState==_0x46aff8(0x260)){if(config[_0x46aff8(0x2a9)]!=_0x46aff8(0x25a))logHistory(_0x46aff8(0x296),_0x46aff8(0x2c4)+_0x238b23);await unlockOrders();}}}}}async function cancelOrders(){lastOrders['forEach'](async _0x366173=>{const _0x2f3bb9=_0x15e3;try{const _0x10e755=await exchange[_0x2f3bb9(0x257)](_0x366173[_0x2f3bb9(0x308)],_0x366173[_0x2f3bb9(0x24d)]);}catch(_0x1ac56f){if(_0x1ac56f[_0x2f3bb9(0x329)]()[_0x2f3bb9(0x330)](_0x2f3bb9(0x396))){}else await handleError(_0x1ac56f,'cancelOrders()');}});}async function initCoinResults(_0xfb77e6){const _0x4bcc3f=_0xba2ebe;_0xfb77e6?logger[_0x4bcc3f(0x313)]('Resetting\x20coin\x20results:\x20'+_0xfb77e6):logger[_0x4bcc3f(0x313)](_0x4bcc3f(0x24a)),config[_0x4bcc3f(0x28d)][_0x4bcc3f(0x2ad)](_0x201bc6=>{const _0x17ebfe=_0x4bcc3f;if(!_0x201bc6[_0x17ebfe(0x28b)]&&_0x201bc6[_0x17ebfe(0x2f8)]!=config[_0x17ebfe(0x20d)]){const _0x23f96c=currentCoins[_0x17ebfe(0x300)](_0x49d862=>_0x49d862['coin']==_0x201bc6['coin']),_0x8e1001=gTicker[noslash(_0x201bc6[_0x17ebfe(0x24d)])];let _0x2536ee=_0x23f96c?_0x23f96c[_0x17ebfe(0x347)]:null,_0x219051=_0x201bc6[_0x17ebfe(0x334)]?0x1/_0x8e1001:_0x8e1001,_0x2527e2;config[_0x17ebfe(0x365)][_0x17ebfe(0x2ad)](_0x1ca5da=>{const _0x3eb8fa=_0x17ebfe;!_0x2527e2&&(_0x2527e2=_0x1ca5da[_0x3eb8fa(0x2d9)]['find'](_0x3c6eb3=>_0x3c6eb3[_0x3eb8fa(0x2f8)]==_0x201bc6[_0x3eb8fa(0x2f8)]),_0x2527e2&&(_0x2536ee=_0x2527e2[_0x3eb8fa(0x347)],_0x219051=_0x2527e2[_0x3eb8fa(0x392)]));});let _0x16529b=dbCoinResults[_0x17ebfe(0x2b7)](_0x17ebfe(0x245))['find']({'coin':_0x201bc6['coin']})[_0x17ebfe(0x289)]();if(!_0x16529b){const _0xc0ec6e={'coin':_0x201bc6[_0x17ebfe(0x2f8)],'number':_0x2536ee,'breakeven':_0x219051,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x17ebfe(0x2b7)]('coins')['push'](_0xc0ec6e)['write']();}else{if(_0xfb77e6&&_0x201bc6[_0x17ebfe(0x2f8)]==_0xfb77e6){const _0x426838={'coin':_0x201bc6[_0x17ebfe(0x2f8)],'number':_0x2536ee,'breakeven':_0x219051,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x17ebfe(0x2b7)](_0x17ebfe(0x245))[_0x17ebfe(0x300)]({'coin':_0x201bc6[_0x17ebfe(0x2f8)]})[_0x17ebfe(0x288)](_0x426838)[_0x17ebfe(0x3b4)]();}}}});}async function updateCoinResults(_0x2e6857,_0x3c15af=![]){const _0x28fb7f=_0xba2ebe;let _0x198245,_0x280d87,_0x2ca8fe,_0x1b7a8f,_0x37fa1e,_0x5415bc,_0x4b9bb1=dbCoinResults['get'](_0x28fb7f(0x245))[_0x28fb7f(0x300)]({'coin':_0x2e6857[_0x28fb7f(0x2f8)]})[_0x28fb7f(0x289)](),_0xa49b2b=![];_0x4b9bb1&&Object[_0x28fb7f(0x2d1)](_0x4b9bb1)[_0x28fb7f(0x2ad)](([_0x173ebc,_0x9b6649])=>{if(_0x9b6649==null)_0xa49b2b=!![];});(!_0x4b9bb1||_0xa49b2b)&&(await initCoinResults(_0x2e6857['coin']),_0x4b9bb1=dbCoinResults[_0x28fb7f(0x2b7)](_0x28fb7f(0x245))[_0x28fb7f(0x300)]({'coin':_0x2e6857[_0x28fb7f(0x2f8)]})[_0x28fb7f(0x289)]());_0x2e6857['reverse']&&(_0x5415bc={'filled':_0x2e6857['filled']*_0x2e6857[_0x28fb7f(0x392)],'amount':_0x2e6857[_0x28fb7f(0x2f7)]*_0x2e6857[_0x28fb7f(0x392)],'side':_0x2e6857['side']==_0x28fb7f(0x376)?_0x28fb7f(0x35e):'sell','price':0x1/_0x2e6857[_0x28fb7f(0x392)]},_0x2e6857={..._0x2e6857,..._0x5415bc});_0x3c15af?_0x280d87=_0x2e6857[_0x28fb7f(0x2ff)]=='buy'?_0x4b9bb1['number']+_0x2e6857[_0x28fb7f(0x2f7)]:_0x4b9bb1['number']-_0x2e6857[_0x28fb7f(0x2f7)]:_0x280d87=await getCoinNumber(_0x2e6857[_0x28fb7f(0x2f8)]);if(_0x2e6857[_0x28fb7f(0x263)]&&_0x2e6857['fee'][_0x28fb7f(0x336)]==config['basecoin'])_0x198245=Number(_0x2e6857[_0x28fb7f(0x263)][_0x28fb7f(0x33b)]);else{if(_0x2e6857[_0x28fb7f(0x263)]&&_0x2e6857[_0x28fb7f(0x263)][_0x28fb7f(0x336)]==_0x28fb7f(0x2e3)&&!_0x3c15af&&config[_0x28fb7f(0x20d)]!=_0x28fb7f(0x287))_0x198245=Number(_0x2e6857[_0x28fb7f(0x263)][_0x28fb7f(0x33b)])*gTicker[_0x28fb7f(0x2e3)+config[_0x28fb7f(0x20d)]];else _0x198245=defaultFee*_0x2e6857[_0x28fb7f(0x2f7)]*_0x2e6857[_0x28fb7f(0x392)];}_0x2e6857[_0x28fb7f(0x2ff)]==_0x28fb7f(0x35e)?(_0x2ca8fe=_0x280d87!=0x0?(_0x4b9bb1[_0x28fb7f(0x34c)]*_0x4b9bb1[_0x28fb7f(0x347)]+_0x2e6857[_0x28fb7f(0x392)]*(_0x280d87-_0x4b9bb1['number'])+_0x198245)/_0x280d87:0x0,_0x1b7a8f=_0x4b9bb1[_0x28fb7f(0x320)]):(_0x2ca8fe=_0x280d87!=0x0?(_0x4b9bb1['breakeven']*_0x4b9bb1[_0x28fb7f(0x347)]-_0x2e6857[_0x28fb7f(0x392)]*(_0x4b9bb1['number']-_0x280d87)+_0x198245)/_0x280d87:0x0,_0x1b7a8f=_0x4b9bb1['realized']+(_0x2e6857[_0x28fb7f(0x392)]-_0x4b9bb1[_0x28fb7f(0x34c)])*_0x2e6857['filled']);_0x37fa1e=(_0x2e6857[_0x28fb7f(0x392)]-_0x2ca8fe-_0x198245/_0x2e6857[_0x28fb7f(0x2f7)])*_0x280d87;let _0x4a5bea={'coin':_0x2e6857[_0x28fb7f(0x2f8)],'number':_0x280d87,'breakeven':formatResult(_0x2ca8fe,0x8),'realized':formatResult(_0x1b7a8f,0x8),'unrealized':formatResult(_0x37fa1e,0x8),'fees':formatResult(_0x4b9bb1[_0x28fb7f(0x383)]+_0x198245,0x8),'sells':_0x2e6857[_0x28fb7f(0x2ff)]=='sell'?_0x4b9bb1[_0x28fb7f(0x297)]+0x1:_0x4b9bb1['sells'],'buys':_0x2e6857[_0x28fb7f(0x2ff)]==_0x28fb7f(0x35e)?_0x4b9bb1[_0x28fb7f(0x241)]+0x1:_0x4b9bb1[_0x28fb7f(0x241)]};dbCoinResults['get']('coins')[_0x28fb7f(0x300)]({'coin':_0x2e6857['coin']})[_0x28fb7f(0x288)](_0x4a5bea)[_0x28fb7f(0x3b4)]();if(!_0x3c15af){if(_0x2e6857[_0x28fb7f(0x263)]&&_0x2e6857[_0x28fb7f(0x263)][_0x28fb7f(0x336)]==_0x28fb7f(0x2e3)){const _0x4963af=currentCoins[_0x28fb7f(0x300)](_0x50c78d=>_0x50c78d['coin']==_0x28fb7f(0x2e3));if(_0x4963af){let _0x1fc005=dbCoinResults['get'](_0x28fb7f(0x245))[_0x28fb7f(0x300)]({'coin':_0x28fb7f(0x2e3)})[_0x28fb7f(0x289)]();_0x4a5bea={..._0x1fc005,'number':_0x4963af['number']},dbCoinResults[_0x28fb7f(0x2b7)]('coins')[_0x28fb7f(0x300)]({'coin':'BNB'})[_0x28fb7f(0x288)](_0x4a5bea)[_0x28fb7f(0x3b4)]();}}}}async function placeOrder(_0x2a689d){const _0x4d5a85=_0xba2ebe,_0x370e15=config[_0x4d5a85(0x2a9)]==_0x4d5a85(0x25a)?_0x4d5a85(0x25a):_0x4d5a85(0x377);if(lockOrders==ORDERS[_0x4d5a85(0x1f4)]&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x4d5a85(0x238)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x4d5a85(0x2c6);let _0x5354f3=![];lastOrders=[];for(const _0x13e80f of _0x2a689d){let _0x2f3505,_0x47d0f0,_0x2a4a3c,_0x5f1236,_0x4c8c69,_0x4024b5=_0x13e80f[_0x4d5a85(0x24d)];try{const _0x85d4bd=await exchange[_0x4d5a85(0x214)](_0x4024b5);_0x2f3505=_0x13e80f[_0x4d5a85(0x334)]?0x1/_0x13e80f['last']:_0x13e80f['last'],_0x47d0f0=_0x85d4bd['bid'],_0x2a4a3c=_0x85d4bd[_0x4d5a85(0x388)];_0x13e80f[_0x4d5a85(0x334)]?(_0x5f1236=_0x13e80f[_0x4d5a85(0x2ff)]==_0x4d5a85(0x35e)?'sell':_0x4d5a85(0x35e),_0x4c8c69=Math[_0x4d5a85(0x274)](_0x13e80f[_0x4d5a85(0x240)])/_0x2f3505):(_0x5f1236=_0x13e80f[_0x4d5a85(0x2ff)],_0x4c8c69=Math[_0x4d5a85(0x274)](_0x13e80f[_0x4d5a85(0x240)]));_0x370e15==_0x4d5a85(0x377)&&(config[_0x4d5a85(0x2a9)]==_0x4d5a85(0x3a2)&&(_0x2f3505=_0x5f1236==_0x4d5a85(0x35e)?_0x47d0f0:_0x2a4a3c),config['ordertype']==_0x4d5a85(0x2e7)&&(_0x2f3505=_0x5f1236==_0x4d5a85(0x35e)?_0x2a4a3c:_0x47d0f0));_0x4c8c69=formatResult(_0x4c8c69,0x8),_0x2f3505=formatResult(_0x2f3505,0x8);const _0xd034bf=_0x5f1236==_0x4d5a85(0x376)?config['emojisell']?String['fromCodePoint']('0x'+config[_0x4d5a85(0x223)])+'\x20':'':config[_0x4d5a85(0x27b)]?String[_0x4d5a85(0x382)]('0x'+config[_0x4d5a85(0x27b)])+'\x20':'',_0x23effb=_0x370e15==_0x4d5a85(0x25a)?_0x4d5a85(0x282):config['ordertype']==_0x4d5a85(0x3a2)?'Limit\x20(high-margin)':_0x4d5a85(0x226),_0x15b523=(Math[_0x4d5a85(0x33d)](Math[_0x4d5a85(0x2a7)]()*0x35a4e900)+0x5f5e100)[_0x4d5a85(0x329)]();lastOrders[_0x4d5a85(0x27f)]({'customId':_0x15b523,'symbol':_0x4024b5,'coin':_0x13e80f[_0x4d5a85(0x2f8)],'amount':_0x4c8c69,'price':_0x2f3505,'side':_0x5f1236,'reverse':_0x13e80f[_0x4d5a85(0x334)],'filled':0x0});if(_0x370e15=='market')logHistory(_0x4d5a85(0x2db),''+_0xd034bf+_0x23effb+_0x4d5a85(0x29d)+_0x4024b5+'\x20'+_0x5f1236+'\x20#'+formatResult(_0x4c8c69,0x8)+'\x20@'+formatResult(_0x2f3505,0x8));else logHistory(_0x4d5a85(0x2db),''+_0xd034bf+_0x23effb+_0x4d5a85(0x29d)+_0x4024b5+'\x20'+_0x5f1236+'\x20#'+formatResult(_0x4c8c69,0x8)+'\x20@'+formatResult(_0x2f3505,0x8));let _0x1ca530;_0x370e15==_0x4d5a85(0x25a)?_0x5f1236==_0x4d5a85(0x35e)&&[_0x4d5a85(0x36d),_0x4d5a85(0x26c),_0x4d5a85(0x3aa),_0x4d5a85(0x267),_0x4d5a85(0x2ca)]['includes'](config[_0x4d5a85(0x230)])?_0x1ca530=await exchange[_0x4d5a85(0x358)](_0x4024b5,_0x370e15,_0x5f1236,_0x4c8c69,_0x2f3505):_0x1ca530=await exchange[_0x4d5a85(0x358)](_0x4024b5,_0x370e15,_0x5f1236,_0x4c8c69,undefined):_0x1ca530=await exchange[_0x4d5a85(0x358)](_0x4024b5,_0x370e15,_0x5f1236,_0x4c8c69,_0x2f3505);logger[_0x4d5a85(0x313)](_0x4d5a85(0x203)+_0x1ca530['id']+_0x4d5a85(0x242)+_0x15b523);const _0x185b02=lastOrders[_0x4d5a85(0x222)]-0x1;if(_0x185b02>=0x0&&lastOrders[_0x185b02][_0x4d5a85(0x21d)]==_0x15b523){lastOrders[_0x185b02][_0x4d5a85(0x308)]=_0x1ca530['id'];if(_0x1ca530[_0x4d5a85(0x213)])lastOrders[_0x185b02][_0x4d5a85(0x213)]=_0x1ca530[_0x4d5a85(0x213)];if(_0x1ca530[_0x4d5a85(0x392)])lastOrders[_0x185b02]['price']=_0x1ca530[_0x4d5a85(0x392)];lastOrders[_0x185b02][_0x4d5a85(0x263)]=_0x1ca530[_0x4d5a85(0x263)];}if(config[_0x4d5a85(0x3ab)]!=0x0){let _0x54e32e=null;if(cooldownTracker[_0x4d5a85(0x222)]==config['cooldown']-0x1)_0x54e32e=cooldownTracker[_0x4d5a85(0x254)]();const _0x2b5c3f=getTimeStamp();cooldownTracker['push'](_0x2b5c3f);if(_0x54e32e){const _0x3cf1dc=fns[_0x4d5a85(0x2fa)](new Date(_0x2b5c3f),new Date(_0x54e32e));if(_0x3cf1dc<cooldownInterval){logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x22f)+config['cooldown']+_0x4d5a85(0x39b)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4d5a85(0x28e)),coolingDown=!![];break;}}}}catch(_0x2fc310){if(_0x2fc310[_0x4d5a85(0x329)]()[_0x4d5a85(0x330)](_0x4d5a85(0x341)))lastOrders=lastOrders[_0x4d5a85(0x340)](_0x11a004=>_0x11a004['symbol']!=_0x4024b5),logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x2fd)+_0x4024b5),_0x5354f3=!![];else{if(_0x2fc310[_0x4d5a85(0x329)]()['includes'](_0x4d5a85(0x307)))lastOrders=lastOrders[_0x4d5a85(0x340)](_0x166967=>_0x166967[_0x4d5a85(0x24d)]!=_0x4024b5),logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x27c)+_0x4024b5),_0x5354f3=!![];else{if(_0x2fc310['toString']()['includes'](_0x4d5a85(0x316)))lastOrders=lastOrders[_0x4d5a85(0x340)](_0x56960f=>_0x56960f[_0x4d5a85(0x24d)]!=_0x4024b5),logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x335)+_0x4024b5),logger[_0x4d5a85(0x313)](_0x2fc310),_0x5354f3=!![];else _0x2fc310[_0x4d5a85(0x329)]()[_0x4d5a85(0x330)](_0x4d5a85(0x38f))?(lastOrders=lastOrders['filter'](_0x39ab65=>_0x39ab65[_0x4d5a85(0x24d)]!=_0x4024b5),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x4024b5),_0x5354f3=!![]):(lastOrders=lastOrders[_0x4d5a85(0x340)](_0x3ce7dd=>_0x3ce7dd['symbol']!=_0x4024b5),await handleError(_0x2fc310,_0x4d5a85(0x3ad),_0x4024b5));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4d5a85(0x222)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x55d64a=config[_0x4d5a85(0x2a9)]==_0x4d5a85(0x25a)?validateOrderTimeout*0x3c*0x3e8:config[_0x4d5a85(0x2dd)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x56a0b2=_0x4d5a85;validateOrders(_0x56a0b2(0x390));},_0x55d64a);}else unlockOrders();_0x5354f3&&config[_0x4d5a85(0x342)]&&(logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x374)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4d5a85(0x296),'Cooldown\x20ended\x20-\x20balancing\x20resumed'));}else{if(coolingDown)!config[_0x4d5a85(0x342)]&&logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x2ec));else lockOrders!=ORDERS[_0x4d5a85(0x1f4)]&&(!config[_0x4d5a85(0x342)]&&(config[_0x4d5a85(0x2a9)]==_0x4d5a85(0x25a)?logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x35a)):logHistory(_0x4d5a85(0x29f),_0x4d5a85(0x26a))));}}function persistOpenOrders(_0x30d419){const _0x433012=_0xba2ebe,_0x328b2f={...config,'openOrders':_0x30d419};let _0x5209a6=dbConfig[_0x433012(0x2b7)](_0x433012(0x24e))[_0x433012(0x300)]({'botID':botID})[_0x433012(0x289)]();_0x5209a6&&dbConfig['get']('bot')[_0x433012(0x300)]({'botID':botID})[_0x433012(0x288)](_0x328b2f)[_0x433012(0x3b4)]();}function restoreOrders(){const _0x2f8027=_0xba2ebe;let _0x2af716;config[_0x2f8027(0x25f)]&&allOpenOrders[_0x2f8027(0x2ad)](_0x57c4b2=>{const _0x27adf8=_0x2f8027,_0x57676a=config[_0x27adf8(0x25f)]['find'](_0x32f192=>_0x32f192['orderId']==_0x57c4b2['id']);_0x57676a&&(lastOrders[_0x27adf8(0x27f)](_0x57676a),_0x2af716=_0x57c4b2[_0x27adf8(0x3b5)]);});if(lastOrders['length']>0x0){lockOrders=ORDERS[_0x2f8027(0x238)],validateOrdersState=_0x2f8027(0x2a2),allOrdersPlaced=!![];const _0x332cf5=new Date()[_0x2f8027(0x321)](),_0x2f1285=config[_0x2f8027(0x2a9)]==_0x2f8027(0x25a)?validateOrderTimeout*0x3c*0x3e8:config[_0x2f8027(0x2dd)]*0x3c*0x3e8;if(_0x2af716+_0x2f1285>_0x332cf5){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x2af716+_0x2f1285-_0x332cf5);}else validateOrders('final');}}async function sendMetricsTelegram(){const _0x436c8e=_0xba2ebe;if(!coinsLoaded){process[_0x436c8e(0x231)]({'telegrammsg':'Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x45c61b=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x505d4d='';if(config['showname'])_0x505d4d=_0x436c8e(0x2e4)+config[_0x436c8e(0x31b)]+_0x436c8e(0x2eb);else _0x505d4d=_0x436c8e(0x3a5)+botID+_0x436c8e(0x2eb);const _0x2d6e73=getKPIs(_0x436c8e(0x20d)),_0x4a24ea=getKPIs('fiat',config['fiat']),_0x39ef83=getKPIs(_0x436c8e(0x36b)),_0x161948=getKPIs('net-fiat',config['fiat']);_0x505d4d+=_0x436c8e(0x355),_0x505d4d+=_0x2d6e73[_0x436c8e(0x324)]+'\x20:\x20'+_0x2d6e73[_0x436c8e(0x289)]+'\x0a',_0x505d4d+=_0x2d6e73[_0x436c8e(0x2b0)]+':\x20'+_0x2d6e73['change']+'%\x0a',_0x505d4d+=_0x4a24ea['leftTxt']+_0x436c8e(0x379)+_0x4a24ea[_0x436c8e(0x289)]+'\x0a',_0x505d4d+=_0x4a24ea[_0x436c8e(0x2b0)]+':\x20'+_0x4a24ea[_0x436c8e(0x2c3)]+'%\x0a',_0x505d4d+=_0x39ef83['leftTxt']+':\x20'+_0x39ef83[_0x436c8e(0x289)]+'\x20('+config[_0x436c8e(0x20d)]+')\x0a',_0x505d4d+=_0x39ef83[_0x436c8e(0x2b0)]+':\x20'+_0x39ef83[_0x436c8e(0x2c3)]+'%\x20('+config[_0x436c8e(0x20d)]+')\x0a',_0x505d4d+=_0x161948[_0x436c8e(0x324)]+':\x20'+_0x161948[_0x436c8e(0x289)]+'\x20('+config[_0x436c8e(0x2e1)]+')\x0a',_0x505d4d+=_0x161948[_0x436c8e(0x2b0)]+':\x20'+_0x161948['change']+_0x436c8e(0x3a3)+config[_0x436c8e(0x2e1)]+')\x0a',_0x505d4d+=_0x436c8e(0x385),process[_0x436c8e(0x231)]({'telegrammsg':_0x505d4d},_0x20e914=>{});}async function sendPortfolioTelegram(){const _0x33c34e=_0xba2ebe;if(!coinsLoaded||!currentCoins[0x0]['distribution']){process[_0x33c34e(0x231)]({'telegrammsg':_0x33c34e(0x3ac)},_0x56fb02=>{});return;}let _0x5afbb7='';if(config[_0x33c34e(0x298)])_0x5afbb7=_0x33c34e(0x2e4)+config['botname']+_0x33c34e(0x258);else _0x5afbb7='<b>Bot\x20'+botID+_0x33c34e(0x258);_0x5afbb7+='<pre>',_0x5afbb7+=_0x33c34e(0x273),_0x5afbb7+=_0x33c34e(0x22a),_0x5afbb7+=_0x33c34e(0x273),currentCoins[_0x33c34e(0x2ad)](_0x54f10e=>{const _0x28dfa9=_0x33c34e;_0x5afbb7+=_0x54f10e[_0x28dfa9(0x2f8)][_0x28dfa9(0x248)](0x7)+'|\x20'+formatPad(_0x54f10e[_0x28dfa9(0x352)],0x2,0x6)+'|\x20'+formatPad(_0x54f10e[_0x28dfa9(0x2ae)],0x2,0x6)+'|\x20'+formatPad(_0x54f10e[_0x28dfa9(0x27a)]*0x64,0x2,0x6)+'\x0a';}),_0x5afbb7+=_0x33c34e(0x385),process[_0x33c34e(0x231)]({'telegrammsg':_0x5afbb7},_0x2da463=>{});}function formatPad(_0x1503d9,_0x5f3c94,_0x11ba59){const _0x1a356c=_0xba2ebe,_0x343f76=formatResultString(_0x1503d9,_0x5f3c94);return _0x343f76?_0x343f76[_0x1a356c(0x23f)](_0x11ba59):''[_0x1a356c(0x23f)](_0x11ba59);}function logHistory(_0x1d3295,_0x25622b,_0x1e03c0=''){const _0x3c9106=_0xba2ebe;logger['full'](''+_0x25622b);let _0x80a2be={'time':getTimeStamp(),'type':_0x1d3295,'event':_0x25622b};dbLogs['get'](_0x3c9106(0x212))[_0x3c9106(0x27f)](_0x80a2be)['write']();if(_0x1e03c0=='')_0x1e03c0=_0x25622b;proxyEmit(_0x3c9106(0x21e),{'log':_0x80a2be,'summary':_0x1e03c0}),process['send']({'telegram':{..._0x80a2be,'botname':config[_0x3c9106(0x31b)],'showname':config[_0x3c9106(0x298)]}},_0x39105c=>{});}function emitHistory(_0x21bfed={}){const _0x233be6=_0xba2ebe;Object['keys'](_0x21bfed)['length']==0x0&&(_0x21bfed={'type':[_0x233be6(0x2db),_0x233be6(0x21e)],'event':'','page':0x1});if(_0x21bfed[_0x233be6(0x372)]['includes'](_0x233be6(0x21e)))_0x21bfed['type'][_0x233be6(0x1fc)](_0x21bfed['type'][_0x233be6(0x25b)](_0x233be6(0x21e)),0x1,_0x233be6(0x29f),'warning',_0x233be6(0x296));if(dbLogs['has'](_0x233be6(0x212))['value']()){let _0x29e465=dbLogs[_0x233be6(0x2b7)]('logs')[_0x233be6(0x340)](_0x5a2417=>{const _0x3ed645=_0x233be6;if(_0x21bfed[_0x3ed645(0x372)][_0x3ed645(0x222)]==0x0)return![];else return _0x21bfed['type'][_0x3ed645(0x330)](_0x5a2417[_0x3ed645(0x372)]);})[_0x233be6(0x340)](_0x473714=>{const _0x1f768a=_0x233be6;if(_0x21bfed[_0x1f768a(0x21e)]=='')return!![];else return _0x473714[_0x1f768a(0x21e)][_0x1f768a(0x314)]()[_0x1f768a(0x330)](_0x21bfed[_0x1f768a(0x21e)][_0x1f768a(0x314)]());})[_0x233be6(0x1f2)](_0x233be6(0x317)),_0xc81ca9=_0x29e465['value']()['length'];_0x29e465=_0x29e465[_0x233be6(0x334)]()['slice']((_0x21bfed[_0x233be6(0x20a)]-0x1)*logPageSize,_0x21bfed[_0x233be6(0x20a)]*logPageSize-0x1)[_0x233be6(0x334)]()[_0x233be6(0x289)](),proxyEmit(_0x233be6(0x2f0),{'logs':_0x29e465,'total':_0xc81ca9});}else proxyEmit(_0x233be6(0x2f0),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x34b1bd){const _0x2fbe1b=_0xba2ebe;if(dbLogs[_0x2fbe1b(0x2cd)](_0x2fbe1b(0x212))['value']()){const _0x2b106d=dbLogs[_0x2fbe1b(0x2b7)]('logs')[_0x2fbe1b(0x1f2)](_0x2fbe1b(0x317))[_0x2fbe1b(0x340)](_0x584b28=>{const _0x9b517e=_0x2fbe1b;return _0x584b28['type']==_0x9b517e(0x2db);})['value']();dbLogs[_0x2fbe1b(0x2b7)](_0x2fbe1b(0x212))[_0x2fbe1b(0x278)]()[_0x2fbe1b(0x3b4)](),dbLogs[_0x2fbe1b(0x2b7)](_0x2fbe1b(0x212))[_0x2fbe1b(0x288)](_0x2b106d)[_0x2fbe1b(0x3b4)](),emitHistory(_0x34b1bd);}}async function pauseBot(_0x5a65a8=pauseBotIntervalShort,_0x39fd0a){const _0x36801f=_0xba2ebe,_0x51e0ea=new Date()[_0x36801f(0x321)]();if(!lastErrorShown||_0x51e0ea-lastErrorShown>=_0x5a65a8){lastErrorShown=_0x51e0ea;!lastBotPause?(lastBotPause=_0x51e0ea,consecutivePauses=0x1):(_0x51e0ea-lastBotPause-_0x5a65a8<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>maxPauseRetries&&(logHistory(_0x36801f(0x29f),_0x39fd0a+pauseBotMsg),_0x5a65a8=pauseBotInterval)):consecutivePauses=0x1,lastBotPause=_0x51e0ea);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0x5a65a8),botPaused=![],_0x5a65a8==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x430151=_0xba2ebe;botPaused=!![],await sleep(0x3e8),process[_0x430151(0x231)]({'stop':_0x430151(0x34b)},_0x1d654e=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x3feb71,_0x349eaa){const _0xffc47a=_0xba2ebe;if(botPaused)return;const _0x14419f=config[_0xffc47a(0x230)]||'Exchange';if(_0x349eaa)logger[_0xffc47a(0x313)]('Exception\x20thrown\x20in\x20'+_0x349eaa);const _0x2189ae=()=>{const _0x118f50=_0xffc47a;loading[_0x118f50(0x29f)]=!![],emitLoadingProgress();};if(_0x3feb71[_0xffc47a(0x329)]()[_0xffc47a(0x330)](_0xffc47a(0x251)))logHistory(_0xffc47a(0x29f),_0x14419f+_0xffc47a(0x25d)),_0x2189ae();else{if(_0x3feb71['toString']()[_0xffc47a(0x330)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0xffc47a(0x29f),_0x14419f+_0xffc47a(0x2af)),_0x2189ae();else _0x3feb71['toString']()[_0xffc47a(0x330)](_0xffc47a(0x31e))?(logHistory(_0xffc47a(0x29f),_0x14419f+_0xffc47a(0x37e)),logHistory(_0xffc47a(0x29f),_0xffc47a(0x233)),_0x2189ae()):await handleError(_0x3feb71,null);}}async function handleError(_0x36b6a0,_0x6df113,_0x5e7b53=''){const _0x24992e=_0xba2ebe;if(botPaused)return;let _0x286e47;const _0x296840=config['exchange']||'Exchange';if(_0x6df113)logger[_0x24992e(0x313)](_0x24992e(0x349)+_0x6df113);if(_0x36b6a0['toString']()[_0x24992e(0x330)](_0x24992e(0x2be)))_0x286e47=_0x296840+_0x24992e(0x384),logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)]('RateLimitExceeded'))_0x286e47=_0x296840+_0x24992e(0x2d8),logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)]('ExchangeNotAvailable')||_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)](_0x24992e(0x354)))_0x286e47=_0x296840+'\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)](_0x24992e(0x2ce)))_0x286e47=_0x296840+'\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)',logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0['toString']()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)](_0x24992e(0x20b)))_0x286e47=_0x296840+_0x24992e(0x211),logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()['toLowerCase']()[_0x24992e(0x330)]('timestamp')||_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x314)]()['includes'](_0x24992e(0x359)))_0x286e47=_0x24992e(0x21c),logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0['toString']()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()['includes']('InvalidNonce'))_0x286e47=_0x296840+_0x24992e(0x22c),logger[_0x24992e(0x313)](_0x286e47+'\x20>\x20details:',_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0 instanceof ccxt[_0x24992e(0x399)])_0x286e47=_0x296840+_0x24992e(0x26e),logger[_0x24992e(0x313)](_0x286e47+_0x24992e(0x33f),_0x36b6a0[_0x24992e(0x329)]()),await pauseBot(undefined,_0x286e47);else{if(_0x36b6a0[_0x24992e(0x329)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x24992e(0x29f),_0x296840+_0x24992e(0x3a9)),logHistory('error',_0x24992e(0x247)),await killBot();else{if(_0x36b6a0['toString']()['includes'](_0x24992e(0x20f)))logHistory(_0x24992e(0x29f),_0x296840+_0x24992e(0x3a7)),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x36b6a0[_0x24992e(0x329)]()['includes'](_0x24992e(0x31e)))logHistory(_0x24992e(0x29f),_0x296840+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x24992e(0x247)),await killBot();else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)](_0x24992e(0x309)))logHistory('error',_0x296840+_0x24992e(0x38b)),logHistory('error',_0x24992e(0x247)),await killBot();else{if(_0x36b6a0[_0x24992e(0x329)]()[_0x24992e(0x330)](_0x24992e(0x328)))logHistory(_0x24992e(0x29f),_0x24992e(0x2e0)+_0x5e7b53);else{if(_0x36b6a0 instanceof ccxt[_0x24992e(0x2b2)]){logHistory(_0x24992e(0x29f),_0x296840+_0x24992e(0x393)),logger[_0x24992e(0x313)]('Error\x20details:',_0x36b6a0);if(_0x5e7b53)logger[_0x24992e(0x313)](_0x24992e(0x332)+_0x5e7b53);}else{_0x286e47='Unknown\x20error\x20occured',logger['debug'](_0x286e47+_0x24992e(0x33f),_0x36b6a0);if(_0x5e7b53)logger[_0x24992e(0x313)](_0x24992e(0x332)+_0x5e7b53);await pauseBot(undefined,_0x286e47);}}}}}}}}}}}}}}}async function withRetry(_0x7284b5,_0x150ca7){const _0x1daa2d=_0xba2ebe;let _0x3eff26=![],_0x56d7bc=0x0,_0x5f5d6b,_0x282b93;while(_0x56d7bc<maxRetries){try{_0x5f5d6b=await _0x150ca7();break;}catch(_0x44e796){_0x282b93=_0x44e796,!_0x3eff26?(_0x3eff26=!![],logger[_0x1daa2d(0x313)](_0x1daa2d(0x2fb)+_0x7284b5+':',_0x44e796[_0x1daa2d(0x329)]())):await sleep(retryInterval);}_0x56d7bc++;}if(_0x56d7bc==0x0)return _0x5f5d6b;if(_0x56d7bc>=maxRetries)throw _0x282b93;else return logger['debug'](_0x1daa2d(0x2f9)+_0x56d7bc+_0x1daa2d(0x217)),_0x5f5d6b;}function formatResult(_0x36d9fc,_0x342937){return parseFloat(_0x36d9fc['toFixed'](_0x342937));}function formatResultTruncate(_0x29adc8,_0x3b8bdc){const _0x31e297=_0xba2ebe;let _0x4e2449=formatResultString(_0x29adc8,0xa),_0x310e30=_0x4e2449[_0x31e297(0x25b)]('.');return _0x310e30!=-0x1&&(_0x4e2449=_0x4e2449[_0x31e297(0x295)](0x0,_0x310e30+_0x3b8bdc+0x1)),Number(_0x4e2449);}function formatResultString(_0x2a4974,_0x574c7b){const _0x3cc743=_0xba2ebe;let _0x698011;if(!(''+_0x2a4974)['includes']('e'))_0x698011=+(Math['round'](_0x2a4974+'e+'+_0x574c7b)+'e-'+_0x574c7b);else{let _0x10367b=(''+_0x2a4974)[_0x3cc743(0x27d)]('e'),_0x602b0a='';+_0x10367b[0x1]+_0x574c7b>0x0&&(_0x602b0a='+'),_0x698011=+(Math[_0x3cc743(0x2a4)](+_0x10367b[0x0]+'e'+_0x602b0a+(+_0x10367b[0x1]+_0x574c7b))+'e-'+_0x574c7b);}return Number(_0x698011)[_0x3cc743(0x23e)](_0x574c7b);}function getServerTime(){const _0xfd936c=_0xba2ebe,_0xbda519=new Date();return _0xbda519[_0xfd936c(0x3a0)]()+'/'+(_0xbda519[_0xfd936c(0x269)]()+0x1)[_0xfd936c(0x329)]()[_0xfd936c(0x23f)](0x2,'0')+'/'+_0xbda519[_0xfd936c(0x387)]()[_0xfd936c(0x329)]()[_0xfd936c(0x23f)](0x2,'0')+'\x20'+_0xbda519['getHours']()[_0xfd936c(0x329)]()[_0xfd936c(0x23f)](0x2,'0')+':'+_0xbda519[_0xfd936c(0x344)]()['toString']()[_0xfd936c(0x23f)](0x2,'0')+':'+_0xbda519['getSeconds']()[_0xfd936c(0x329)]()[_0xfd936c(0x23f)](0x2,'0');}function getTimeStamp(){const _0x564d64=_0xba2ebe,_0x18fbd6=shiftedTime();return _0x18fbd6[_0x564d64(0x3a0)]()+'/'+(_0x18fbd6['getMonth']()+0x1)['toString']()[_0x564d64(0x23f)](0x2,'0')+'/'+_0x18fbd6[_0x564d64(0x387)]()[_0x564d64(0x329)]()[_0x564d64(0x23f)](0x2,'0')+'\x20'+_0x18fbd6[_0x564d64(0x2de)]()[_0x564d64(0x329)]()[_0x564d64(0x23f)](0x2,'0')+':'+_0x18fbd6[_0x564d64(0x344)]()['toString']()[_0x564d64(0x23f)](0x2,'0')+':'+_0x18fbd6[_0x564d64(0x215)]()[_0x564d64(0x329)]()[_0x564d64(0x23f)](0x2,'0');}function getDate(){const _0x132fcd=_0xba2ebe,_0xf1317c=shiftedTime();return _0xf1317c['getFullYear']()+'/'+(_0xf1317c[_0x132fcd(0x269)]()+0x1)[_0x132fcd(0x329)]()['padStart'](0x2,'0')+'/'+_0xf1317c['getDate']()['toString']()[_0x132fcd(0x23f)](0x2,'0');}function getHour(){const _0xd6b73e=_0xba2ebe,_0x5b7b76=shiftedTime();return _0x5b7b76['getHours']()['toString']()[_0xd6b73e(0x23f)](0x2,'0');}function sleep(_0x17ce7c){return new Promise(_0x40ef1c=>setTimeout(_0x40ef1c,_0x17ce7c));}function shiftedTime(){const _0x33b434=_0xba2ebe,_0xb97dc8=new Date();let _0x37f858=_0xb97dc8;if(config&&config[_0x33b434(0x31a)]!==0x0)_0x37f858=fns[_0x33b434(0x21a)](_0xb97dc8,{'hours':config[_0x33b434(0x31a)]});return _0x37f858;}function timer(_0x22b3c6){const _0x5bc277=_0xba2ebe,_0x3ccb80=new Date();!lasttime?console[_0x5bc277(0x205)](getTimeStamp()+_0x5bc277(0x2c5),_0x22b3c6,_0x3ccb80):console[_0x5bc277(0x205)](getTimeStamp()+_0x5bc277(0x2c5),_0x22b3c6,(_0x3ccb80-lasttime)/0x3e8),lasttime=_0x3ccb80;}