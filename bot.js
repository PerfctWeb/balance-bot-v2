const _0x203d23=_0x38b0;(function(_0x41cb61,_0x4eae0d){const _0x135411=_0x38b0,_0x3a3950=_0x41cb61();while(!![]){try{const _0x21dd08=-parseInt(_0x135411(0x2ae))/0x1+-parseInt(_0x135411(0x22d))/0x2+parseInt(_0x135411(0x213))/0x3*(parseInt(_0x135411(0x22a))/0x4)+-parseInt(_0x135411(0x1de))/0x5*(-parseInt(_0x135411(0x2db))/0x6)+parseInt(_0x135411(0x234))/0x7+-parseInt(_0x135411(0x1ee))/0x8*(-parseInt(_0x135411(0x1e0))/0x9)+parseInt(_0x135411(0x1ce))/0xa*(-parseInt(_0x135411(0x256))/0xb);if(_0x21dd08===_0x4eae0d)break;else _0x3a3950['push'](_0x3a3950['shift']());}catch(_0x271369){_0x3a3950['push'](_0x3a3950['shift']());}}}(_0x4fef,0x598aa));const _0x13ee21=function(){let _0x4d1c54=!![];return function(_0x4e8b88,_0x1a0c0e){const _0x55a3cc=_0x4d1c54?function(){const _0x374df1=_0x38b0;if(_0x1a0c0e){const _0x46248a=_0x1a0c0e[_0x374df1(0x25c)](_0x4e8b88,arguments);return _0x1a0c0e=null,_0x46248a;}}:function(){};return _0x4d1c54=![],_0x55a3cc;};}(),_0x136d21=_0x13ee21(this,function(){const _0xdf173e=_0x38b0;return _0x136d21[_0xdf173e(0x2a5)]()['search'](_0xdf173e(0x281))[_0xdf173e(0x2a5)]()[_0xdf173e(0x283)](_0x136d21)['search'](_0xdf173e(0x281));});_0x136d21();'use strict';const ccxt=require(_0x203d23(0x204)),low=require(_0x203d23(0x2af)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x203d23(0x280)),{WebsocketClient,DefaultLogger}=require(_0x203d23(0x1da)),Crypt=require(_0x203d23(0x1d5))[_0x203d23(0x272)];let exchange,wsClient;global[_0x203d23(0x209)]={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require('./version.json')['version'],botID=process[_0x203d23(0x2b8)][0x2]||_0x203d23(0x254),pattern=/^[0-9]{3}$/;if(!pattern[_0x203d23(0x248)](botID))return console[_0x203d23(0x241)](_0x203d23(0x2a3)+botID+_0x203d23(0x1dc)),process['exit'](0x1);const userID=process['argv'][0x3]||'',configpath=userID?_0x203d23(0x265)+userID+'/':'./config/';!fs[_0x203d23(0x261)](configpath)&&fs['mkdirSync'](configpath);const configfile=configpath+_0x203d23(0x299)+botID+_0x203d23(0x2ce),logfile=configpath+_0x203d23(0x299)+botID+'-events.json',performancefile=configpath+_0x203d23(0x299)+botID+_0x203d23(0x28a),coinresultsfile=configpath+_0x203d23(0x299)+botID+_0x203d23(0x203),settingsfile=configpath+_0x203d23(0x1f5),securefile=configpath+_0x203d23(0x1df),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x203d23(0x2b4)]({'logs':[]})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x203d23(0x2b4)]({'data':[]})[_0x203d23(0x264)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x203d23(0x2b4)]({'bot':[]})[_0x203d23(0x264)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x203d23(0x2b4)]({'coins':[]})[_0x203d23(0x264)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x203d23(0x1e4),'symbol':'BTC/EUR'},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0x48501c)=>{},'debug':(..._0x1bede1)=>{},'notice':(..._0x414f0b)=>{},'info':(..._0x2b72b9)=>{},'warning':(..._0x5295ca)=>{},'error':async function(..._0x2eb847){const _0x18a53a=_0x203d23,_0x1b4636=new Date()['getTime']();if(!lastErrorShown||_0x1b4636-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x18a53a(0x2be)](),logHistory('error','WebSockets('+consecutivePauses+_0x18a53a(0x231));let _0x2f5511='';if(_0x2eb847[0x0])_0x2f5511+=_0x2eb847[0x0];if(_0x2eb847[0x1]&&_0x2eb847[0x1][_0x18a53a(0x21b)]&&_0x2eb847[0x1][_0x18a53a(0x21b)]['message'])_0x2f5511+=_0x18a53a(0x1d1)+_0x2eb847[0x1][_0x18a53a(0x21b)][_0x18a53a(0x2b5)];logging(_0x18a53a(0x20a)+consecutivePauses+_0x18a53a(0x250),''+_0x2f5511),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':'sha256','rsaStandard':_0x203d23(0x22b)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x203d23(0x282)]!=config[_0x203d23(0x282)]&&updateTimeshift(settings['timeshift']);process[_0x203d23(0x25d)]({'started':_0x203d23(0x298)},_0x22598f=>{}),initializeProcessListeners();function proxyEmit(_0x428171,_0x216766=null){process['send']({'function':_0x428171,'args':_0x216766},_0x3f9547=>{});}function initializeProcessListeners(){const _0x4b80ad=_0x203d23;process['on'](_0x4b80ad(0x2b5),_0x598a9a=>{const _0x621c82=_0x4b80ad;switch(Object[_0x621c82(0x285)](_0x598a9a)[0x0]){case _0x621c82(0x282):_0x598a9a[_0x621c82(0x282)]!=undefined&&(settings['timeshift']=_0x598a9a[_0x621c82(0x282)],updateTimeshift(settings[_0x621c82(0x282)]));break;case'function':switch(_0x598a9a[_0x621c82(0x270)]){case'initclient':initclient();break;case _0x621c82(0x202):emitHistory(_0x598a9a['args']);break;case _0x621c82(0x20b):getPortfolio(_0x598a9a[_0x621c82(0x271)]);break;case _0x621c82(0x1cd):storeConfiguration(_0x598a9a['args']);break;case _0x621c82(0x2dc):storeHeadless(_0x598a9a[_0x621c82(0x271)]);break;case _0x621c82(0x2b0):getStartingBalances();break;case'placeOrder':placeOrder(_0x598a9a[_0x621c82(0x271)]);break;case _0x621c82(0x2c7):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0x32def4=_0x203d23;if(pidBalances)clearTimeout(pidBalances);if(config['apiKey']!=''){await initExchange(config[_0x32def4(0x263)],config[_0x32def4(0x2c4)]);let _0x22bbfb=await loadSymbols();_0x22bbfb&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0x300c32,_0x4b5a00){const _0x439fb1=_0x203d23,_0x3cb0ac=ccxt[config[_0x439fb1(0x216)]];let _0x17f316;switch(config[_0x439fb1(0x216)]){case _0x439fb1(0x1da):_0x17f316=_0x439fb1(0x28d);break;case _0x439fb1(0x2bb):_0x17f316='wss://stream.binance.us:9443';break;default:_0x17f316=_0x439fb1(0x28d);}exchange=new _0x3cb0ac({'apiKey':_0x300c32,'secret':_0x4b5a00,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0x300c32,'api_secret':_0x4b5a00,'beautify':!![],'wsUrl':_0x17f316},logger),config['exchange']=='binanceus'&&(stablecoins={'eur':{'coin':_0x439fb1(0x2c3),'symbol':_0x439fb1(0x25e)},'usd':{'coin':'BTCUSDT','symbol':_0x439fb1(0x21d)}});}async function loadSymbols(){const _0x5e1d01=_0x203d23;let _0x2e9286;try{markets=await exchange[_0x5e1d01(0x269)]();const _0x3ae73e=['DAI/',_0x5e1d01(0x1eb),_0x5e1d01(0x29b)];allSymbols=exchange[_0x5e1d01(0x252)][_0x5e1d01(0x1ed)](_0x4c5d6b=>{const _0x17616a=_0x5e1d01;let _0x58c72d=![];return _0x3ae73e[_0x17616a(0x206)](_0x126a10=>{if(_0x4c5d6b['includes'](_0x126a10))_0x58c72d=!![];}),!_0x58c72d;}),_0x2e9286=!![];}catch(_0x460ba8){await handleError(_0x460ba8,_0x5e1d01(0x1cf)),_0x2e9286=![];}return _0x2e9286;}async function initbot(){const _0x2000a8=_0x203d23;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x4edfea=dbCoinResults[_0x2000a8(0x24e)](_0x2000a8(0x1d3))['value']();if(_0x4edfea[_0x2000a8(0x289)]==0x0)await resetCoinResults();}async function initclient(){const _0x3aaf8f=_0x203d23;proxyEmit(_0x3aaf8f(0x2b9),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x297139=_0x203d23;wsinitialized=![];ws1&&(ws1[_0x297139(0x206)](_0x288fb3=>{const _0xdc5b6b=_0x297139;try{wsClient[_0xdc5b6b(0x27c)](_0x288fb3);}catch(_0x1e44de){}}),ws1=[]);if(ws2){try{wsClient['closeWs'](ws2);}catch(_0x32ec18){}ws2=null;}}async function initws(){const _0x5cb2a7=_0x203d23;cleanws();let _0x4d6d17=[];currentCoins['forEach'](_0xbe9328=>{const _0x4ffffe=_0x38b0;if(_0xbe9328[_0x4ffffe(0x2d8)]!=config[_0x4ffffe(0x1fd)])_0x4d6d17[_0x4ffffe(0x1ff)](noslash(_0xbe9328[_0x4ffffe(0x2d0)]));});if(!_0x4d6d17[_0x5cb2a7(0x201)](stablecoins[_0x5cb2a7(0x260)][_0x5cb2a7(0x2d8)]))_0x4d6d17[_0x5cb2a7(0x1ff)](stablecoins[_0x5cb2a7(0x260)]['coin']);if(!_0x4d6d17[_0x5cb2a7(0x201)](stablecoins[_0x5cb2a7(0x208)][_0x5cb2a7(0x2d8)]))_0x4d6d17['push'](stablecoins[_0x5cb2a7(0x208)]['coin']);if(!_0x4d6d17[_0x5cb2a7(0x201)](_0x5cb2a7(0x258)+config['basecoin']))_0x4d6d17[_0x5cb2a7(0x1ff)]('BNB'+config[_0x5cb2a7(0x1fd)]);try{_0x4d6d17['forEach']((_0xcaba42,_0x51ac68)=>{ws1[_0x51ac68]=wsClient['subscribeSpotKline'](_0xcaba42,'1m');}),ws2=wsClient[_0x5cb2a7(0x26a)](),wsClient['on'](_0x5cb2a7(0x268),_0x56fc54=>{const _0x59631f=_0x5cb2a7;if(!Array['isArray'](_0x56fc54)&&!_0x56fc54['wsKey']['includes'](_0x59631f(0x23d))){if(_0x56fc54['eventType']==='kline'){global[_0x59631f(0x209)][_0x56fc54[_0x59631f(0x267)][_0x59631f(0x2d0)]]=_0x56fc54[_0x59631f(0x267)][_0x59631f(0x220)];return;}}else{if(!Array[_0x59631f(0x1e8)](_0x56fc54)&&_0x56fc54[_0x59631f(0x1ef)][_0x59631f(0x201)]('userData')){if(_0x56fc54[_0x59631f(0x2bf)][_0x59631f(0x201)](_0x59631f(0x276))){updateNumberCoins(_0x56fc54);return;}}}}),wsClient['on'](_0x5cb2a7(0x23a),async _0xa9a27e=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0x3db778){await handleError(_0x3db778,_0x5cb2a7(0x21c));}let _0x33405b,_0x1598f8=0x0;loading[_0x5cb2a7(0x223)]=[];let _0x16e458=0x0;currentCoins[_0x5cb2a7(0x206)](_0x4d8e9d=>{const _0x1d83df=_0x5cb2a7;if(_0x4d8e9d[_0x1d83df(0x2d8)]!=config[_0x1d83df(0x1fd)])loading[_0x1d83df(0x223)][_0x1d83df(0x1ff)](_0x4d8e9d[_0x1d83df(0x2d0)]);}),loadingCanceled=![];while(_0x33405b!=currentCoins[_0x5cb2a7(0x289)]-0x1){_0x33405b=0x0,currentCoins['forEach'](_0x1290ce=>{const _0x246ea3=_0x5cb2a7;_0x1290ce[_0x246ea3(0x2d8)]!=config['basecoin']&&global['ticker'][noslash(_0x1290ce['symbol'])]&&(loading[_0x246ea3(0x223)]=loading[_0x246ea3(0x223)][_0x246ea3(0x1ed)](_0x8883b2=>_0x8883b2!=_0x1290ce[_0x246ea3(0x2d0)]),_0x33405b++);}),loading[_0x5cb2a7(0x2c6)]=Math[_0x5cb2a7(0x1f8)](_0x33405b/(currentCoins[_0x5cb2a7(0x289)]-0x1)*0x64);_0x16e458>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress());if(loadingCanceled){loading[_0x5cb2a7(0x2a1)]=!![],emitLoadingProgress();break;}else _0x33405b!=_0x1598f8&&(_0x1598f8=_0x33405b,emitLoadingProgress()),_0x16e458++,await sleep(0xc8);}if(_0x33405b==currentCoins[_0x5cb2a7(0x289)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x1bff3c=_0x203d23;let _0x4906ab=0x0,_0x22e351=0x0;try{_0x4906ab=global[_0x1bff3c(0x209)][stablecoins[_0x1bff3c(0x260)][_0x1bff3c(0x2d8)]],_0x22e351=global[_0x1bff3c(0x209)][stablecoins['usd'][_0x1bff3c(0x2d8)]];}catch(_0x5e0032){await handleError(_0x5e0032,_0x1bff3c(0x1e5));}return{'eur':Number(_0x4906ab),'usd':Number(_0x22e351)};}async function setStartDatePerformance(_0x3738d2){const _0x11fbc4=_0x203d23,_0x1a86c5=fns['format'](new Date(_0x3738d2[_0x11fbc4(0x251)]),_0x11fbc4(0x255));let _0x123b4a=[];_0x123b4a[stablecoins[_0x11fbc4(0x260)][_0x11fbc4(0x2d8)]]=await getCloses(stablecoins[_0x11fbc4(0x260)]['symbol'],new Date(_0x3738d2[_0x11fbc4(0x251)]),0x1),_0x123b4a[stablecoins['usd'][_0x11fbc4(0x2d8)]]=await getCloses(stablecoins['usd'][_0x11fbc4(0x2d0)],new Date(_0x3738d2['startdate']),0x1);let _0x54343f,_0x1c6d0d=[];_0x3738d2[_0x11fbc4(0x22e)][_0x11fbc4(0x206)](_0x294df9=>{const _0x4f28f5=_0x11fbc4;!_0x294df9[_0x4f28f5(0x2cd)]&&_0x1c6d0d[_0x4f28f5(0x1ff)]({'coin':_0x294df9['coin'],'number':_0x294df9[_0x4f28f5(0x1e3)],'price':_0x294df9['startprice']});}),_0x54343f={'date':_0x1a86c5,'eur':_0x123b4a[stablecoins['eur']['coin']][0x0],'usd':_0x123b4a[stablecoins['usd'][_0x11fbc4(0x2d8)]][0x0],'coins':_0x1c6d0d};let _0xac3be4=dbPerformance['get'](_0x11fbc4(0x23b))[_0x11fbc4(0x24d)]({'date':_0x1a86c5})[_0x11fbc4(0x1e7)]();_0xac3be4?dbPerformance[_0x11fbc4(0x24e)](_0x11fbc4(0x23b))[_0x11fbc4(0x24d)]({'date':_0x1a86c5})[_0x11fbc4(0x287)](_0x54343f)['write']():dbPerformance[_0x11fbc4(0x24e)](_0x11fbc4(0x23b))[_0x11fbc4(0x1ff)](_0x54343f)[_0x11fbc4(0x264)](),_0xac3be4=dbPerformance[_0x11fbc4(0x24e)](_0x11fbc4(0x23b))['sortBy'](_0x11fbc4(0x1e6))['value'](),_0xac3be4[_0x11fbc4(0x206)](_0x526db2=>{const _0xb5a96=_0x11fbc4;_0x526db2['date']<_0x1a86c5&&dbPerformance[_0xb5a96(0x24e)]('data')[_0xb5a96(0x24c)]({'date':_0x526db2[_0xb5a96(0x1e6)]})[_0xb5a96(0x264)]();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x2463de){const _0x42b9c5=_0x203d23;let _0x2b5b5a,_0x3a63f7=[];logHistory(_0x42b9c5(0x218),_0x42b9c5(0x286)),_0x2463de[_0x42b9c5(0x22e)]['forEach'](_0x4948f4=>{const _0x57b95e=_0x42b9c5;if(_0x4948f4[_0x57b95e(0x2d8)]!=config[_0x57b95e(0x1fd)]&&!_0x4948f4[_0x57b95e(0x2cd)])_0x3a63f7[_0x57b95e(0x1ff)]({'coin':_0x4948f4[_0x57b95e(0x2d8)],'symbol':_0x4948f4[_0x57b95e(0x2d0)]});});let _0x383942=[];try{const _0x27c0a7=fns[_0x42b9c5(0x240)](fns[_0x42b9c5(0x211)](_0x2463de[_0x42b9c5(0x251)][_0x42b9c5(0x2b1)](/\//g,'-')),_0x42b9c5(0x2ab));for(const _0x22334c of _0x3a63f7){if(_0x22334c[_0x42b9c5(0x2d8)]!=config['basecoin'])_0x2b5b5a=await exchange['fetchOrders'](_0x22334c[_0x42b9c5(0x2d0)],Date[_0x42b9c5(0x2a8)](_0x27c0a7));_0x2b5b5a[_0x42b9c5(0x206)](_0x12bbef=>{const _0x1fd26d=_0x42b9c5,_0x14a04f=_0x22334c['symbol']['includes'](config[_0x1fd26d(0x1fd)]+'/'),_0x35b5fd=fns['format'](fns[_0x1fd26d(0x211)](_0x12bbef[_0x1fd26d(0x25a)]),_0x1fd26d(0x227)),_0x2ce728=fns['format'](fns['parseISO'](_0x12bbef[_0x1fd26d(0x25a)]),'yyyy/MM/dd');let _0x3434fd;if(_0x12bbef[_0x1fd26d(0x2a2)]=='buy'&&_0x14a04f==![])_0x3434fd=_0x12bbef['amount'];if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x24b)&&_0x14a04f==!![])_0x3434fd=-_0x12bbef['amount']*_0x12bbef['price'];if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x2a9)&&_0x14a04f==![])_0x3434fd=-_0x12bbef[_0x1fd26d(0x228)];if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x2a9)&&_0x14a04f==!![])_0x3434fd=_0x12bbef[_0x1fd26d(0x228)]*_0x12bbef[_0x1fd26d(0x2ba)];_0x383942[_0x1fd26d(0x1ff)]({'timestamp':_0x35b5fd,'date':_0x2ce728,'coin':_0x22334c['coin'],'symbol':_0x22334c['symbol'],'type':_0x12bbef[_0x1fd26d(0x2d7)],'side':_0x12bbef[_0x1fd26d(0x2a2)],'reverse':_0x14a04f,'amount':formatResult(_0x12bbef[_0x1fd26d(0x274)],0x8),'filled':formatResult(_0x12bbef[_0x1fd26d(0x274)],0x8),'coinamount':formatResult(_0x3434fd,0x8),'price':formatResult(_0x12bbef['price'],0x8)});let _0x208514;if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x24b)&&_0x14a04f==![])_0x208514=-_0x12bbef[_0x1fd26d(0x228)]*_0x12bbef[_0x1fd26d(0x2ba)];if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x24b)&&_0x14a04f==!![])_0x208514=_0x12bbef[_0x1fd26d(0x228)];if(_0x12bbef[_0x1fd26d(0x2a2)]==_0x1fd26d(0x2a9)&&_0x14a04f==![])_0x208514=_0x12bbef['amount']*_0x12bbef[_0x1fd26d(0x2ba)];if(_0x12bbef['side']==_0x1fd26d(0x2a9)&&_0x14a04f==!![])_0x208514=-_0x12bbef[_0x1fd26d(0x228)];_0x383942['push']({'date':_0x2ce728,'coin':config['basecoin'],'coinamount':formatResult(_0x208514,0x8)});});}_0x383942[_0x42b9c5(0x2a4)]((_0x42a295,_0x398b9c)=>_0x42a295[_0x42b9c5(0x214)]>_0x398b9c['timestamp']?0x1:_0x398b9c[_0x42b9c5(0x214)]>_0x42a295[_0x42b9c5(0x214)]?-0x1:0x0),dbLogs['get'](_0x42b9c5(0x29e))[_0x42b9c5(0x24c)]()[_0x42b9c5(0x264)](),_0x383942['forEach'](_0x3bbd44=>{const _0x29a2b6=_0x42b9c5;let _0x180ca1;_0x3bbd44['coin']!=config[_0x29a2b6(0x1fd)]&&(_0x180ca1={'time':_0x3bbd44[_0x29a2b6(0x214)],'type':_0x29a2b6(0x1ea),'event':_0x29a2b6(0x1ec)+_0x3bbd44[_0x29a2b6(0x2d0)]+'\x20'+_0x3bbd44[_0x29a2b6(0x2a2)]+'\x20#'+_0x3bbd44[_0x29a2b6(0x228)]+'\x20@'+_0x3bbd44[_0x29a2b6(0x2ba)]},dbLogs[_0x29a2b6(0x24e)](_0x29a2b6(0x29e))[_0x29a2b6(0x1ff)](_0x180ca1)[_0x29a2b6(0x264)]());});const _0x10cdc4=fns[_0x42b9c5(0x20d)]({'start':new Date(_0x2463de['startdate']),'end':new Date()})['map'](_0x3e1d40=>fns['format'](_0x3e1d40,_0x42b9c5(0x255)));let _0x457091=[];_0x2463de[_0x42b9c5(0x22e)][_0x42b9c5(0x206)](_0xcdbdd=>{const _0x2be23d=_0x42b9c5;if(!_0xcdbdd[_0x2be23d(0x2cd)]){_0x457091[_0xcdbdd[_0x2be23d(0x2d8)]]=[];let _0x49bcd8=_0xcdbdd[_0x2be23d(0x1e3)];_0x10cdc4['forEach']((_0x333e0e,_0x472f8d)=>{const _0x2970c4=_0x2be23d;let _0x1ac480=_0x383942['filter'](_0x2d594a=>_0x2d594a[_0x2970c4(0x2d8)]==_0xcdbdd['coin']&&_0x2d594a[_0x2970c4(0x1e6)]==_0x333e0e);if(_0x1ac480[_0x2970c4(0x289)]!=0x0){let _0x53f214=_0x1ac480[_0x2970c4(0x210)]((_0xf27d94,_0x5158e7)=>{return _0xf27d94+=_0x5158e7['coinamount'],_0xf27d94;},0x0);_0x49bcd8+=_0x53f214;}_0x457091[_0xcdbdd[_0x2970c4(0x2d8)]][_0x333e0e]=_0x49bcd8;});}});const _0x3c82dd=[..._0x3a63f7];_0x3c82dd['push']({'coin':stablecoins['eur'][_0x42b9c5(0x2d8)],'symbol':stablecoins['eur'][_0x42b9c5(0x2d0)]}),_0x3c82dd[_0x42b9c5(0x1ff)]({'coin':stablecoins[_0x42b9c5(0x208)][_0x42b9c5(0x2d8)],'symbol':stablecoins[_0x42b9c5(0x208)][_0x42b9c5(0x2d0)]});let _0x146141=[];for(const _0x424076 of _0x3c82dd){_0x146141[_0x424076[_0x42b9c5(0x2d8)]]=await getCloses(_0x424076[_0x42b9c5(0x2d0)],new Date(_0x2463de[_0x42b9c5(0x251)]));}dbPerformance[_0x42b9c5(0x24e)](_0x42b9c5(0x23b))['remove']()[_0x42b9c5(0x264)](),_0x10cdc4[_0x42b9c5(0x206)]((_0x56dec7,_0x29cc03)=>{const _0x35b293=_0x42b9c5;let _0x5e4a68,_0x16b895=[];_0x29cc03==0x0?(_0x2463de['portfolio'][_0x35b293(0x206)](_0x4b12ec=>{const _0x52f5f9=_0x35b293;!_0x4b12ec[_0x52f5f9(0x2cd)]&&_0x16b895[_0x52f5f9(0x1ff)]({'coin':_0x4b12ec[_0x52f5f9(0x2d8)],'number':_0x4b12ec['startnumber'],'price':_0x4b12ec['startprice']});}),_0x5e4a68={'date':_0x56dec7,'eur':_0x146141[stablecoins[_0x35b293(0x260)][_0x35b293(0x2d8)]][_0x29cc03],'usd':_0x146141[stablecoins[_0x35b293(0x208)][_0x35b293(0x2d8)]][_0x29cc03],'coins':_0x16b895}):(_0x2463de[_0x35b293(0x22e)][_0x35b293(0x206)](_0x1925d6=>{const _0x3fe590=_0x35b293;!_0x1925d6['excluded']&&_0x16b895[_0x3fe590(0x1ff)]({'coin':_0x1925d6[_0x3fe590(0x2d8)],'number':_0x457091[_0x1925d6[_0x3fe590(0x2d8)]][_0x56dec7],'price':_0x1925d6['coin']==config['basecoin']?0x1:_0x146141[_0x1925d6[_0x3fe590(0x2d8)]][_0x29cc03]});}),_0x5e4a68={'date':_0x56dec7,'eur':_0x146141[stablecoins[_0x35b293(0x260)][_0x35b293(0x2d8)]][_0x29cc03],'usd':_0x146141[stablecoins[_0x35b293(0x208)][_0x35b293(0x2d8)]][_0x29cc03],'coins':_0x16b895}),dbPerformance[_0x35b293(0x24e)]('data')['push'](_0x5e4a68)[_0x35b293(0x264)]();}),emitPerformance(),await resetCoinResults();for(let _0x319a47 of _0x383942){_0x319a47[_0x42b9c5(0x2d8)]!=config[_0x42b9c5(0x1fd)]&&await updateCoinResults(_0x319a47);}logHistory('success',_0x42b9c5(0x1e2));}catch(_0x489c85){await handleError(_0x489c85,_0x42b9c5(0x2b6));}}async function getCloses(_0x231c21,_0x2550c1,_0x17b6d6=undefined){const _0x17802c=_0x203d23,_0x281261='1d';let _0x484adc,_0x2be110;const _0x518bfc=fns[_0x17802c(0x266)](new Date(),_0x2550c1)+0x1;try{const _0x5663f5=exchange['milliseconds']()-_0x518bfc*0x18*0xe10*0x3e8;_0x484adc=await exchange[_0x17802c(0x2c2)](_0x231c21,_0x281261,_0x5663f5,_0x17b6d6),_0x2be110=await exchange['fetchTickers'](_0x231c21);}catch(_0x5c2fc3){await handleError(_0x5c2fc3,_0x17802c(0x2bc));}let _0x5a458d=ohlcvToCloses(_0x484adc);return _0x5a458d[_0x17802c(0x1ff)](_0x2be110[_0x231c21][_0x17802c(0x2d4)]),_0x5a458d;}function ohlcvToCloses(_0x1c5cce){const _0xc3e1b6=_0x203d23;let _0x3084f5=[];return _0x1c5cce[_0xc3e1b6(0x206)](function(_0x431c71){const _0x3b2a15=_0xc3e1b6;_0x3084f5[_0x3b2a15(0x1ff)](_0x431c71[0x4]);}),_0x3084f5;}function getConfiguration(_0x49ec30){const _0x30c4ca=_0x203d23;let _0x2414eb=dbConfig[_0x30c4ca(0x24e)]('bot')[_0x30c4ca(0x24d)]({'botID':_0x49ec30})[_0x30c4ca(0x1e7)]();if(_0x2414eb){let _0x3a475b=![];!_0x2414eb[_0x30c4ca(0x216)]&&(_0x2414eb={..._0x2414eb,'exchange':_0x30c4ca(0x1da)},_0x3a475b=!![]),!_0x2414eb[_0x30c4ca(0x1fd)]&&(_0x2414eb={..._0x2414eb,'basecoin':_0x30c4ca(0x2c9)},_0x3a475b=!![]),!_0x2414eb[_0x30c4ca(0x2a0)]&&(_0x2414eb={..._0x2414eb,'ordertype':_0x30c4ca(0x27e)},_0x3a475b=!![]),!_0x2414eb[_0x30c4ca(0x1cc)]&&(_0x2414eb={..._0x2414eb,'timeout':0x14},_0x3a475b=!![]),!_0x2414eb['emojibuy']&&(_0x2414eb={..._0x2414eb,'emojibuy':''},_0x3a475b=!![]),!_0x2414eb[_0x30c4ca(0x2b2)]&&(_0x2414eb={..._0x2414eb,'emojisell':''},_0x3a475b=!![]),!_0x2414eb[_0x30c4ca(0x2c0)]&&(_0x2414eb={..._0x2414eb,'showname':![]},_0x3a475b=!![]),_0x3a475b&&(_0x2414eb={'botID':_0x2414eb['botID'],'exchange':_0x2414eb[_0x30c4ca(0x216)],'apiKey':_0x2414eb[_0x30c4ca(0x263)],'apiSecret':_0x2414eb[_0x30c4ca(0x2c4)],'basecoin':_0x2414eb[_0x30c4ca(0x1fd)],'botname':_0x2414eb[_0x30c4ca(0x296)],'showname':_0x2414eb[_0x30c4ca(0x2c0)],'threshold':_0x2414eb[_0x30c4ca(0x2d1)],'ordertype':_0x2414eb[_0x30c4ca(0x2a0)],'timeout':_0x2414eb[_0x30c4ca(0x1cc)],'startdate':_0x2414eb[_0x30c4ca(0x251)],'recreate':_0x2414eb[_0x30c4ca(0x244)],'timeshift':_0x2414eb[_0x30c4ca(0x282)],'headless':_0x2414eb[_0x30c4ca(0x29f)],'cooldown':_0x2414eb[_0x30c4ca(0x2a6)],'emojibuy':_0x2414eb[_0x30c4ca(0x257)],'emojisell':_0x2414eb['emojisell'],'portfolio':_0x2414eb[_0x30c4ca(0x22e)]},dbConfig[_0x30c4ca(0x24e)](_0x30c4ca(0x26e))['remove']()[_0x30c4ca(0x264)](),dbConfig['get']('bot')['push'](_0x2414eb)['write']());}else _0x2414eb={'botID':_0x49ec30,'exchange':_0x30c4ca(0x1da),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x30c4ca(0x1f1)+_0x49ec30,'showname':![],'threshold':'3','ordertype':'market','timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings[_0x30c4ca(0x282)],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x2414eb;}function emittedConfiguration(){const _0x1f8ffe=_0x203d23;let _0x8b2bf4;return config['apiKey']==''?_0x8b2bf4=config:_0x8b2bf4={...config,'apiKey':_0x1f8ffe(0x2bd),'apiSecret':_0x1f8ffe(0x2bd)},_0x8b2bf4;}function getSettings(){const _0x276c8b=_0x203d23;return dbSettings[_0x276c8b(0x24e)](_0x276c8b(0x219))[_0x276c8b(0x1e7)]();}function getSecure(){const _0x23736a=_0x203d23;return dbSecure[_0x23736a(0x24e)](_0x23736a(0x29a))[_0x23736a(0x1e7)]()||{};}function updateTimeshift(_0x37430f){const _0x154b22=_0x203d23;let _0x4c2fe5=dbConfig['get'](_0x154b22(0x26e))['find']({'botID':botID})[_0x154b22(0x1e7)]();_0x4c2fe5&&dbConfig[_0x154b22(0x24e)](_0x154b22(0x26e))[_0x154b22(0x24d)]({'botID':botID})[_0x154b22(0x287)]({'timeshift':_0x37430f})[_0x154b22(0x264)](),config[_0x154b22(0x282)]=_0x37430f,proxyEmit('configuration',emittedConfiguration());}async function storeConfiguration(_0x45d134){const _0x37b402=_0x203d23;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x1136a2=dbConfig[_0x37b402(0x24e)](_0x37b402(0x26e))[_0x37b402(0x24d)]({'botID':botID})[_0x37b402(0x1e7)]();_0x45d134={..._0x45d134,'apiKey':crypt[_0x37b402(0x238)](secure['privateKey'],_0x45d134[_0x37b402(0x263)])['message'],'apiSecret':crypt[_0x37b402(0x238)](secure['privateKey'],_0x45d134[_0x37b402(0x2c4)])[_0x37b402(0x2b5)]};if(_0x1136a2){if(_0x45d134[_0x37b402(0x263)]=='************')_0x45d134[_0x37b402(0x263)]=config['apiKey'];if(_0x45d134[_0x37b402(0x2c4)]==_0x37b402(0x2bd))_0x45d134[_0x37b402(0x2c4)]=config[_0x37b402(0x2c4)];dbConfig['get'](_0x37b402(0x26e))['find']({'botID':botID})[_0x37b402(0x287)](_0x45d134)['write']();}else dbConfig[_0x37b402(0x24e)](_0x37b402(0x26e))[_0x37b402(0x1ff)](_0x45d134)[_0x37b402(0x264)](),process[_0x37b402(0x25d)]({'status':_0x37b402(0x21f),'live':_0x37b402(0x298)},_0x519597=>{});config={..._0x45d134};if(config['recreate'])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x37b402(0x25d)]({'botname':_0x45d134[_0x37b402(0x296)]},_0x187874=>{}),proxyEmit('configuration-stored'),reset();}async function storeHeadless(_0x5c9619){const _0x248aee=_0x203d23,_0x1237bc={...config,'headless':_0x5c9619[_0x248aee(0x29f)]};let _0x5615d3=dbConfig['get'](_0x248aee(0x26e))['find']({'botID':botID})[_0x248aee(0x1e7)]();_0x5615d3&&dbConfig['get'](_0x248aee(0x26e))[_0x248aee(0x24d)]({'botID':botID})[_0x248aee(0x287)](_0x1237bc)['write'](),config={..._0x1237bc},proxyEmit(_0x248aee(0x2b9),emittedConfiguration());}function noslash(_0x89bd6c){const _0x234c0c=_0x203d23;return _0x89bd6c[_0x234c0c(0x2b1)]('/','');}function updateNumberCoins(_0xd2f00a){const _0x35dc1f=_0x203d23;_0xd2f00a[_0x35dc1f(0x27b)]&&_0xd2f00a[_0x35dc1f(0x27b)]==_0x35dc1f(0x1fb)&&_0xd2f00a['balances'][_0x35dc1f(0x206)](_0x4736cf=>{const _0x2558fb=_0x35dc1f;let _0x36feff=currentCoins[_0x2558fb(0x24d)](_0x55adc1=>_0x55adc1[_0x2558fb(0x2d8)]==_0x4736cf[_0x2558fb(0x21e)]),_0x55748b=config[_0x2558fb(0x22e)]['find'](_0x1c8449=>_0x1c8449[_0x2558fb(0x2d8)]==_0x4736cf[_0x2558fb(0x21e)]);if(_0x36feff&&_0x55748b)_0x36feff[_0x2558fb(0x229)]=Math['max'](Number(_0x4736cf[_0x2558fb(0x1f0)])+(_0x55748b['offset']||0x0),0x0);});if(_0xd2f00a['eventType']&&_0xd2f00a['eventType']==_0x35dc1f(0x2cf)){if(_0xd2f00a['orderType']==_0x35dc1f(0x1e9)&&_0xd2f00a[_0x35dc1f(0x2ca)]==_0x35dc1f(0x1f9)){if(lastOrders)lastOrders[_0x35dc1f(0x206)](_0x76c52f=>{const _0x536eba=_0x35dc1f;if(_0x76c52f['orderId']==_0xd2f00a[_0x536eba(0x297)]){if(_0x76c52f[_0x536eba(0x212)])_0x76c52f[_0x536eba(0x274)]=_0xd2f00a[_0x536eba(0x225)]*_0x76c52f[_0x536eba(0x2ba)];else _0x76c52f['filled']=_0xd2f00a['accumulatedQuantity'];}});}}}async function getCoins(_0x14d0b7=!![],_0x5ed119=config[_0x203d23(0x1fd)]){const _0x4f2df1=_0x203d23;let _0x6c8676,_0x47541a=[],_0x113e1c=[],_0x15aa8b=[];try{_0x6c8676=await exchange[_0x4f2df1(0x288)](),mybalances=_0x6c8676[_0x4f2df1(0x1f7)];if(!_0x14d0b7)for(const [_0x3471f0,_0x3f74a0]of Object[_0x4f2df1(0x1d7)](mybalances)){_0x15aa8b[_0x4f2df1(0x1ff)](_0x3471f0);}else config[_0x4f2df1(0x22e)][_0x4f2df1(0x206)](_0x2b8a31=>{const _0x53b547=_0x4f2df1;if(!_0x2b8a31[_0x53b547(0x2cd)])_0x15aa8b[_0x53b547(0x1ff)](_0x2b8a31[_0x53b547(0x2d8)]);});if(_0x5ed119=='')for(const [_0x131b35,_0x5892e3]of Object[_0x4f2df1(0x1d7)](mybalances)){_0x5892e3[_0x4f2df1(0x2a5)]()!=0x0&&_0x113e1c['push']({'coin':_0x131b35});}else for(const [_0x2aa507,_0x2787da]of Object[_0x4f2df1(0x1d7)](mybalances)){if(_0x15aa8b[_0x4f2df1(0x201)](_0x2aa507)){const _0x31b9e=config[_0x4f2df1(0x22e)][_0x4f2df1(0x24d)](_0x50a2eb=>_0x50a2eb[_0x4f2df1(0x2d8)]==_0x2aa507);if((_0x2787da[_0x4f2df1(0x2a5)]()!=0x0||_0x31b9e)&&(allSymbols[_0x4f2df1(0x201)](_0x2aa507+'/'+_0x5ed119)||_0x2aa507==_0x5ed119))_0x113e1c[_0x4f2df1(0x1ff)]({'coin':_0x2aa507,'symbol':_0x2aa507+'/'+_0x5ed119,'reverse':![],'number':Math[_0x4f2df1(0x294)](_0x2787da+(_0x31b9e&&_0x31b9e[_0x4f2df1(0x23f)]||0x0),0x0)}),_0x2aa507!=_0x5ed119&&_0x47541a[_0x4f2df1(0x1ff)](_0x2aa507+'/'+_0x5ed119);else(_0x2787da[_0x4f2df1(0x2a5)]()!=0x0||_0x31b9e)&&allSymbols[_0x4f2df1(0x201)](_0x5ed119+'/'+_0x2aa507)&&(_0x113e1c['push']({'coin':_0x2aa507,'symbol':_0x5ed119+'/'+_0x2aa507,'reverse':!![],'number':Math[_0x4f2df1(0x294)](_0x2787da+(_0x31b9e&&_0x31b9e[_0x4f2df1(0x23f)]||0x0),0x0)}),_0x2aa507!=_0x5ed119&&_0x47541a[_0x4f2df1(0x1ff)](_0x5ed119+'/'+_0x2aa507));}}}catch(_0x21867a){if(!_0x14d0b7){if(_0x21867a[_0x4f2df1(0x2a5)]()[_0x4f2df1(0x201)](_0x4f2df1(0x1fa)))return logHistory('error',_0x4f2df1(0x25f)),![];else{if(_0x21867a[_0x4f2df1(0x2a5)]()['includes'](_0x4f2df1(0x215)))return logHistory(_0x4f2df1(0x21b),'Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance'),![];else{if(_0x21867a[_0x4f2df1(0x2a5)]()['includes'](_0x4f2df1(0x239)))return logHistory(_0x4f2df1(0x21b),'Binance\x20API\x20secret\x20is\x20invalid'),![];else await handleError(_0x21867a,_0x4f2df1(0x235));}}}else await handleError(_0x21867a,_0x4f2df1(0x235));}return _0x113e1c;}async function getPortfolio(_0x5bc9e6){const _0x2e6170=_0x203d23;let _0x256804=[],_0x5460fb=[],_0x31e1f1,_0x191a9f=[],_0x5b29e7,_0x24ff46;_0x5bc9e6[_0x2e6170(0x263)]===_0x2e6170(0x2bd)||_0x5bc9e6[_0x2e6170(0x2c4)]===_0x2e6170(0x2bd)?(_0x5b29e7=config['apiKey'],_0x24ff46=config[_0x2e6170(0x2c4)]):(_0x5b29e7=_0x5bc9e6[_0x2e6170(0x263)],_0x24ff46=_0x5bc9e6[_0x2e6170(0x2c4)]);await initExchange(_0x5b29e7,_0x24ff46);let _0x3411c2=await loadSymbols();if(_0x3411c2){_0x191a9f=await getCoins(![],_0x5bc9e6['basecoin']);if(_0x191a9f===![])proxyEmit('portfolio',![]);else{if(_0x5bc9e6[_0x2e6170(0x1fd)]=='')proxyEmit(_0x2e6170(0x22e),_0x191a9f);else{_0x191a9f[_0x2e6170(0x206)](_0x52ccda=>{const _0x3e0b7b=_0x2e6170;_0x256804[_0x3e0b7b(0x1ff)](_0x52ccda[_0x3e0b7b(0x2d0)]);});try{_0x5460fb=await exchange[_0x2e6170(0x233)](_0x256804);}catch(_0x4d5093){await handleError(_0x4d5093,'getPortfolio()');}_0x191a9f[_0x2e6170(0x206)](_0xbd05a1=>{const _0x473889=_0x2e6170;_0xbd05a1['coin']!=_0x5bc9e6[_0x473889(0x1fd)]?_0x31e1f1=_0xbd05a1[_0x473889(0x212)]?0x1/_0x5460fb[_0xbd05a1[_0x473889(0x2d0)]]['last']:_0x5460fb[_0xbd05a1['symbol']][_0x473889(0x2d4)]:_0x31e1f1=0x1,_0xbd05a1[_0x473889(0x2ba)]=formatResult(_0x31e1f1,0x8);}),proxyEmit(_0x2e6170(0x22e),_0x191a9f);}}}else proxyEmit('portfolio',![]);}function checkMinimums(_0x3c6787){const _0x25c5fd=_0x203d23;let _0x38d5b9=!![];const _0x160e52=!_0x3c6787[_0x25c5fd(0x212)]?markets[_0x3c6787[_0x25c5fd(0x2d0)]]['limits'][_0x25c5fd(0x228)][_0x25c5fd(0x1d2)]:markets[_0x3c6787[_0x25c5fd(0x2d0)]][_0x25c5fd(0x224)][_0x25c5fd(0x247)][_0x25c5fd(0x1d2)],_0x1a37dc=!_0x3c6787[_0x25c5fd(0x212)]?markets[_0x3c6787[_0x25c5fd(0x2d0)]][_0x25c5fd(0x224)]['cost']['min']:markets[_0x3c6787[_0x25c5fd(0x2d0)]]['limits']['amount'][_0x25c5fd(0x1d2)];if(Math[_0x25c5fd(0x28f)](_0x3c6787[_0x25c5fd(0x237)])<_0x160e52)_0x38d5b9=![];if(Math[_0x25c5fd(0x28f)](_0x3c6787[_0x25c5fd(0x237)])*_0x3c6787['last']<_0x1a37dc)_0x38d5b9=![];return _0x38d5b9;}async function getBalances(){const _0x1db116=_0x203d23;let _0x403bd9=0x0,_0x7fc138;const _0x1d8229=config['threshold'];currentCoins[_0x1db116(0x206)](_0x3f2444=>{const _0x294d95=_0x1db116;if(_0x3f2444[_0x294d95(0x2d8)]!=config[_0x294d95(0x1fd)]){let _0x7a004f=global[_0x294d95(0x209)][noslash(_0x3f2444['symbol'])];_0x7fc138=_0x3f2444[_0x294d95(0x212)]?0x1/_0x7a004f:_0x7a004f;}else _0x7fc138=0x1;let _0x941427=_0x3f2444[_0x294d95(0x229)]*_0x7fc138;_0x403bd9+=_0x941427,_0x3f2444[_0x294d95(0x2d4)]=formatResult(Number(_0x7fc138),0x8),_0x3f2444[_0x294d95(0x1e7)]=_0x941427;}),currentCoins[_0x1db116(0x206)](_0x3ff9b1=>{const _0x38c58f=_0x1db116;let _0xe2617c=config[_0x38c58f(0x22e)][_0x38c58f(0x24d)](_0x20e785=>_0x20e785[_0x38c58f(0x2d8)]==_0x3ff9b1[_0x38c58f(0x2d8)]),_0x5e44d1=Number(_0xe2617c['distribution']),_0x4a7627=_0x3ff9b1[_0x38c58f(0x1e7)]/_0x403bd9*0x64,_0x4b39f3=_0x5e44d1*_0x403bd9/0x64/_0x3ff9b1[_0x38c58f(0x2d4)]-_0x3ff9b1[_0x38c58f(0x229)];_0x3ff9b1[_0x38c58f(0x1d9)]=formatResult(_0x4a7627,0x3),_0x3ff9b1[_0x38c58f(0x2c8)]=formatResult(_0x5e44d1,0x3),_0x3ff9b1[_0x38c58f(0x237)]=formatResult(_0x4b39f3,0x8),_0x3ff9b1['side']='',_0x3ff9b1[_0x38c58f(0x259)]='';if(_0x3ff9b1['coin']!=config['basecoin']){if(_0x3ff9b1[_0x38c58f(0x1d9)]>_0x5e44d1)_0x3ff9b1[_0x38c58f(0x2a2)]=_0x38c58f(0x2a9),_0x3ff9b1[_0x38c58f(0x259)]=checkMinimums(_0x3ff9b1);else _0x3ff9b1[_0x38c58f(0x1d9)]<_0x5e44d1&&(_0x3ff9b1[_0x38c58f(0x2a2)]=_0x38c58f(0x24b),_0x3ff9b1[_0x38c58f(0x259)]=checkMinimums(_0x3ff9b1));}_0x3ff9b1[_0x38c58f(0x1d8)]=_0x3ff9b1['distribution']/_0x3ff9b1[_0x38c58f(0x2c8)]-0x1;}),currentCoins[_0x1db116(0x2a4)]((_0x137df1,_0x40b34b)=>_0x137df1[_0x1db116(0x1d8)]<_0x40b34b[_0x1db116(0x1d8)]?0x1:_0x40b34b[_0x1db116(0x1d8)]<_0x137df1[_0x1db116(0x1d8)]?-0x1:0x0);const _0x820b1d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x820b1d[_0x1db116(0x260)],'usd':_0x820b1d[_0x1db116(0x208)],'portfolio':JSON[_0x1db116(0x207)](currentCoins),'threshold':_0x1d8229},proxyEmit(_0x1db116(0x22c),{'serverversion':serverversion,'balances':lastBalances});if(config[_0x1db116(0x29f)])headlessMode({'portfolio':currentCoins,'threshold':_0x1d8229});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1e732f=_0x203d23;if(!lastBalances)return;let _0x3778f6=await getStartingBalances(![]),_0x4e00ed=[],_0xe5e76d;JSON[_0x1e732f(0x2a8)](lastBalances[_0x1e732f(0x22e)])['forEach'](_0x40b642=>{const _0x93b583=_0x1e732f;let _0x366ccf={'coin':_0x40b642[_0x93b583(0x2d8)],'number':_0x40b642[_0x93b583(0x229)],'price':_0x40b642[_0x93b583(0x2d4)]};_0x4e00ed['push'](_0x366ccf);});const _0x735d21=await getFiat();_0xe5e76d={'date':lastBalances[_0x1e732f(0x1f2)]['split']('\x20')[0x0],'eur':_0x735d21[_0x1e732f(0x260)],'usd':_0x735d21[_0x1e732f(0x208)],'coins':_0x4e00ed};let _0x36f517=dbPerformance[_0x1e732f(0x24e)]('data')['find']({'date':_0xe5e76d['date']})[_0x1e732f(0x1e7)]();_0x36f517?dbPerformance[_0x1e732f(0x24e)](_0x1e732f(0x23b))[_0x1e732f(0x24d)]({'date':_0xe5e76d[_0x1e732f(0x1e6)]})[_0x1e732f(0x287)](_0xe5e76d)[_0x1e732f(0x264)]():dbPerformance['get'](_0x1e732f(0x23b))[_0x1e732f(0x1ff)](_0xe5e76d)[_0x1e732f(0x264)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x38692b=_0x203d23;if(dbPerformance['has']('data')[_0x38692b(0x1e7)]()){let _0x5829dc=dbPerformance[_0x38692b(0x24e)](_0x38692b(0x23b))[_0x38692b(0x27d)](_0x38692b(0x1e6))['value']();proxyEmit('performance',_0x5829dc),lastPerformanceEmitted=getDate();}else proxyEmit(_0x38692b(0x245),[]);}async function getStartingBalances(_0x23216d=!![]){const _0x3787e0=_0x203d23;let _0x9c99d2=dbPerformance[_0x3787e0(0x24e)](_0x3787e0(0x23b))[_0x3787e0(0x24d)]({'date':config[_0x3787e0(0x251)]})[_0x3787e0(0x1e7)]();config[_0x3787e0(0x263)]!=''&&!_0x9c99d2&&(await setStartDatePerformance(config),_0x9c99d2=dbPerformance[_0x3787e0(0x24e)](_0x3787e0(0x23b))[_0x3787e0(0x24d)]({'date':config[_0x3787e0(0x251)]})[_0x3787e0(0x1e7)]());if(config[_0x3787e0(0x263)]==''||!_0x9c99d2)return{};let _0x13f67e=0x0,_0x2a69a4=0x0,_0x247ba8=0x0,_0x5c9fb8=[],_0x59c6ca=0x0;config['portfolio'][_0x3787e0(0x206)](_0x46e99e=>{const _0x3c24b4=_0x3787e0;if(!_0x46e99e[_0x3c24b4(0x2cd)]){_0x5c9fb8[_0x59c6ca]={'coin':_0x46e99e[_0x3c24b4(0x2d8)],'symbol':_0x46e99e[_0x3c24b4(0x2d0)],'number':_0x46e99e['startnumber'],'price':_0x46e99e[_0x3c24b4(0x26c)]},_0x13f67e+=_0x46e99e[_0x3c24b4(0x26c)]*_0x46e99e['startnumber'];if(config[_0x3c24b4(0x1fd)]==_0x3c24b4(0x2c9))_0x2a69a4+=_0x46e99e[_0x3c24b4(0x26c)]*_0x46e99e[_0x3c24b4(0x1e3)]*_0x9c99d2['eur'],_0x247ba8+=_0x46e99e['startprice']*_0x46e99e[_0x3c24b4(0x1e3)]*_0x9c99d2[_0x3c24b4(0x208)];else{if(config['basecoin']==_0x3c24b4(0x232)||config[_0x3c24b4(0x1fd)]=='USDT'||config[_0x3c24b4(0x1fd)]==_0x3c24b4(0x2d3))_0x2a69a4+=_0x46e99e['startprice']*_0x46e99e[_0x3c24b4(0x1e3)]*_0x9c99d2[_0x3c24b4(0x260)]/_0x9c99d2[_0x3c24b4(0x208)],_0x247ba8+=_0x46e99e[_0x3c24b4(0x26c)]*_0x46e99e[_0x3c24b4(0x1e3)];else config[_0x3c24b4(0x1fd)]==_0x3c24b4(0x2cb)&&(_0x2a69a4+=_0x46e99e[_0x3c24b4(0x26c)]*_0x46e99e[_0x3c24b4(0x1e3)],_0x247ba8+=_0x46e99e['startprice']*_0x46e99e[_0x3c24b4(0x1e3)]*_0x9c99d2['usd']/_0x9c99d2['eur']);}_0x59c6ca++;}});let _0x2195c1={'basecoin':_0x13f67e,'eur':_0x2a69a4,'usd':_0x247ba8,'coins':_0x5c9fb8};if(_0x23216d)proxyEmit(_0x3787e0(0x21a),_0x2195c1);return _0x2195c1;}function headlessMode(_0x1dd913){const _0x22a35e=_0x203d23;let _0x34f77a=_0x1dd913[_0x22a35e(0x22e)],_0x16111e=_0x1dd913[_0x22a35e(0x2d1)],_0x1ea120=[];for(let _0xc2828d of _0x34f77a){if(_0xc2828d[_0x22a35e(0x2d8)]!=config[_0x22a35e(0x1fd)]){if(_0xc2828d[_0x22a35e(0x1d9)]/_0xc2828d['target']-0x1>=_0x16111e/0x64){if(_0xc2828d[_0x22a35e(0x259)])_0x1ea120[_0x22a35e(0x1ff)](_0xc2828d);}else{if(_0xc2828d[_0x22a35e(0x1d9)]/_0xc2828d[_0x22a35e(0x2c8)]-0x1<=-_0x16111e/0x64){if(_0xc2828d['valid'])_0x1ea120[_0x22a35e(0x1ff)](_0xc2828d);}}}}_0x1ea120[_0x22a35e(0x289)]>0x0&&placeOrder(_0x1ea120);}function symbolToCoin(_0x2e1579){const _0x354011=_0x203d23;let _0x4ba318;if(_0x2e1579[_0x354011(0x201)]('/'+config[_0x354011(0x1fd)]))_0x4ba318=_0x2e1579['replace']('/'+config['basecoin'],'');if(_0x2e1579[_0x354011(0x201)](config[_0x354011(0x1fd)]+'/'))_0x4ba318=_0x2e1579[_0x354011(0x2b1)](config[_0x354011(0x1fd)]+'/','');return _0x4ba318;}function _0x38b0(_0x56f4bf,_0x4cfc69){const _0x502f43=_0x4fef();return _0x38b0=function(_0x136d21,_0x13ee21){_0x136d21=_0x136d21-0x1cb;let _0x4fef0d=_0x502f43[_0x136d21];return _0x4fef0d;},_0x38b0(_0x56f4bf,_0x4cfc69);}async function validateOrders(_0x4791f2=0x0){const _0x372a84=_0x203d23;let _0x1e63d4=[],_0x54aaeb=config['ordertype']==_0x372a84(0x27e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x372a84(0x1cc)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x372a84(0x206)](_0x157c48=>{const _0x37d361=_0x372a84;let _0x20c96f=previousCoins[_0x37d361(0x24d)](_0x1290ba=>_0x1290ba[_0x37d361(0x2d8)]==symbolToCoin(_0x157c48[_0x37d361(0x2d0)])),_0x5c7628=currentCoins[_0x37d361(0x24d)](_0x40ad7f=>_0x40ad7f[_0x37d361(0x2d8)]==symbolToCoin(_0x157c48[_0x37d361(0x2d0)])),_0x10a25d,_0x582b65;_0x157c48[_0x37d361(0x2a2)]==_0x37d361(0x24b)&&!_0x157c48[_0x37d361(0x212)]||_0x157c48[_0x37d361(0x2a2)]==_0x37d361(0x2a9)&&_0x157c48[_0x37d361(0x212)]?(_0x10a25d=_0x20c96f[_0x37d361(0x229)]+0.9*_0x157c48[_0x37d361(0x274)],_0x582b65=_0x20c96f[_0x37d361(0x229)]+1.1*_0x157c48['filled']):(_0x10a25d=_0x20c96f[_0x37d361(0x229)]-1.1*_0x157c48[_0x37d361(0x274)],_0x582b65=_0x20c96f[_0x37d361(0x229)]-0.9*_0x157c48[_0x37d361(0x274)]);const _0x21aa3e=_0x157c48[_0x37d361(0x274)]!=0x0&&_0x5c7628[_0x37d361(0x229)]>=_0x10a25d&&_0x5c7628[_0x37d361(0x229)]<=_0x582b65;_0x1e63d4[_0x37d361(0x1ff)](_0x21aa3e);if(_0x21aa3e&&config[_0x37d361(0x2a0)]!='market'){if(_0x157c48[_0x37d361(0x212)])logHistory(_0x37d361(0x1ea),_0x37d361(0x2d9)+_0x157c48[_0x37d361(0x2d0)]+'\x20'+_0x157c48[_0x37d361(0x2a2)]+'\x20#'+formatResult(_0x157c48[_0x37d361(0x274)]/_0x157c48[_0x37d361(0x2ba)],0x8)+'\x20@'+formatResult(_0x157c48['price'],0x8));else logHistory(_0x37d361(0x1ea),'Order\x20filled:\x20'+_0x157c48[_0x37d361(0x2d0)]+'\x20'+_0x157c48[_0x37d361(0x2a2)]+'\x20#'+formatResult(_0x157c48[_0x37d361(0x274)],0x8)+'\x20@'+formatResult(_0x157c48[_0x37d361(0x2ba)],0x8));}}),_0x1e63d4[_0x372a84(0x206)]((_0x80ca02,_0x49c367)=>{if(_0x80ca02)lastOrders['splice'](_0x49c367,0x1);});if(_0x4791f2<_0x54aaeb&&_0x1e63d4[_0x372a84(0x201)](![])){if(_0x4791f2==0x0){config[_0x372a84(0x2a0)]==_0x372a84(0x27e)?logHistory(_0x372a84(0x21b),_0x372a84(0x1d0)):logHistory(_0x372a84(0x21b),_0x372a84(0x278));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4791f2);},0xa*0x3e8);}else{(_0x4791f2==0x1||_0x4791f2==Math[_0x372a84(0x1f8)](_0x54aaeb/0x2)||_0x4791f2==_0x54aaeb-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4791f2);},validateOrderInterval);}}else{lockOrders=![];if(_0x4791f2>0x0&&!_0x1e63d4[_0x372a84(0x201)](![]))config[_0x372a84(0x2a0)]==_0x372a84(0x27e)?logHistory('success',_0x372a84(0x27a)):logHistory(_0x372a84(0x218),_0x372a84(0x205));else _0x4791f2>0x0&&_0x1e63d4[_0x372a84(0x201)](![])&&(config[_0x372a84(0x2a0)]==_0x372a84(0x27e)?logHistory('success',_0x372a84(0x1e1)+Math[_0x372a84(0x1f8)](_0x54aaeb*validateOrderInterval/0xea60)+_0x372a84(0x28e)):(lastOrders[_0x372a84(0x206)](async _0x335a14=>{const _0x5f2e7a=_0x372a84;try{const _0xf67605=await exchange[_0x5f2e7a(0x200)](_0x335a14[_0x5f2e7a(0x297)],_0x335a14['symbol']);}catch(_0x359237){if(_0x359237[_0x5f2e7a(0x2a5)]()['includes']('OrderNotFound')){}else await handleError(_0x359237,_0x5f2e7a(0x242));}}),logHistory(_0x372a84(0x218),'Unfilled\x20order(s)\x20canceled\x20after\x20'+Math[_0x372a84(0x1f8)](_0x54aaeb*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed')));}}async function resetCoinResults(){const _0xde7b50=_0x203d23;dbCoinResults[_0xde7b50(0x24e)](_0xde7b50(0x1d3))[_0xde7b50(0x24c)]()['write']();let _0x4e0e26=await getStartingBalances(![]);_0x4e0e26[_0xde7b50(0x1d3)][_0xde7b50(0x206)](_0x1c3921=>{const _0x4d8ffa=_0xde7b50,_0x2a384a=_0x1c3921['symbol'][_0x4d8ffa(0x201)](config[_0x4d8ffa(0x1fd)]+'/');if(_0x1c3921[_0x4d8ffa(0x2d8)]!=config[_0x4d8ffa(0x1fd)]){let _0x2c5aec={'coin':_0x1c3921[_0x4d8ffa(0x2d8)],'number':_0x1c3921[_0x4d8ffa(0x229)],'breakeven':_0x1c3921[_0x4d8ffa(0x2ba)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x4d8ffa(0x24e)](_0x4d8ffa(0x1d3))['push'](_0x2c5aec)[_0x4d8ffa(0x264)]();}});}async function updateCoinResults(_0x5580d6){const _0x5645d8=_0x203d23;let _0x222b7d,_0x4de486,_0x752fc8,_0x4fc5c6,_0x50599b,_0x3a8cc2,_0x25eeb8=dbCoinResults[_0x5645d8(0x24e)](_0x5645d8(0x1d3))[_0x5645d8(0x24d)]({'coin':_0x5580d6[_0x5645d8(0x2d8)]})[_0x5645d8(0x1e7)]();if(!_0x25eeb8)return;if(_0x5580d6[_0x5645d8(0x1f6)]&&_0x5580d6[_0x5645d8(0x1f6)][_0x5645d8(0x27f)]==config[_0x5645d8(0x1fd)])_0x222b7d=_0x5580d6['fee'][_0x5645d8(0x247)];else{if(_0x5580d6['fee']&&_0x5580d6[_0x5645d8(0x1f6)][_0x5645d8(0x27f)]==_0x5645d8(0x258))_0x222b7d=_0x5580d6[_0x5645d8(0x1f6)][_0x5645d8(0x247)]*global[_0x5645d8(0x209)][_0x5645d8(0x258)+config[_0x5645d8(0x1fd)]];else _0x222b7d=0.001*_0x5580d6[_0x5645d8(0x274)];}const _0x44288f=_0x5580d6[_0x5645d8(0x2d0)][_0x5645d8(0x201)](config[_0x5645d8(0x1fd)]+'/');_0x44288f&&(_0x3a8cc2={'coin':_0x5580d6['coin'],'symbol':_0x5580d6[_0x5645d8(0x2d0)],'filled':_0x5580d6[_0x5645d8(0x274)]*_0x5580d6[_0x5645d8(0x2ba)],'side':_0x5580d6[_0x5645d8(0x2a2)]==_0x5645d8(0x2a9)?_0x5645d8(0x24b):_0x5645d8(0x2a9),'price':0x1/_0x5580d6['price']},_0x5580d6={..._0x3a8cc2});_0x5580d6[_0x5645d8(0x2a2)]=='buy'?_0x752fc8=(_0x25eeb8[_0x5645d8(0x26d)]*_0x25eeb8[_0x5645d8(0x229)]+_0x5580d6[_0x5645d8(0x2ba)]*_0x5580d6['filled'])/(_0x25eeb8[_0x5645d8(0x229)]+_0x5580d6[_0x5645d8(0x274)]):_0x752fc8=(_0x25eeb8[_0x5645d8(0x26d)]*_0x25eeb8[_0x5645d8(0x229)]-_0x5580d6['price']*_0x5580d6[_0x5645d8(0x274)])/(_0x25eeb8[_0x5645d8(0x229)]-_0x5580d6[_0x5645d8(0x274)]);_0x5580d6['side']==_0x5645d8(0x24b)?_0x4fc5c6=_0x25eeb8[_0x5645d8(0x1f4)]:_0x4fc5c6=_0x25eeb8[_0x5645d8(0x1f4)]+(_0x5580d6[_0x5645d8(0x2ba)]-_0x25eeb8[_0x5645d8(0x26d)])*_0x5580d6[_0x5645d8(0x274)];_0x4de486=_0x5580d6['side']==_0x5645d8(0x2a9)?_0x25eeb8[_0x5645d8(0x229)]-_0x5580d6[_0x5645d8(0x274)]:_0x25eeb8[_0x5645d8(0x229)]+_0x5580d6[_0x5645d8(0x274)],_0x50599b=(_0x5580d6['price']-_0x752fc8)*_0x4de486;let _0x44b97d={'coin':_0x5580d6[_0x5645d8(0x2d8)],'number':_0x4de486,'breakeven':formatResult(_0x752fc8,0x8),'realized':formatResult(_0x4fc5c6,0x8),'unrealized':formatResult(_0x50599b,0x8),'fees':formatResult(_0x25eeb8[_0x5645d8(0x2aa)]+_0x222b7d,0x8),'sells':_0x5580d6[_0x5645d8(0x2a2)]=='sell'?_0x25eeb8['sells']+0x1:_0x25eeb8[_0x5645d8(0x20e)],'buys':_0x5580d6[_0x5645d8(0x2a2)]==_0x5645d8(0x24b)?_0x25eeb8['buys']+0x1:_0x25eeb8[_0x5645d8(0x2d2)]};dbCoinResults[_0x5645d8(0x24e)](_0x5645d8(0x1d3))[_0x5645d8(0x24d)]({'coin':_0x5580d6['coin']})[_0x5645d8(0x287)](_0x44b97d)['write']();}async function placeOrder(_0x2cf172){const _0x210478=_0x203d23,_0x394c0f=config[_0x210478(0x2a0)]=='market'?_0x210478(0x27e):_0x210478(0x222);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON['parse'](JSON['stringify'](currentCoins));for(const _0x381354 of _0x2cf172){let _0x459fc4,_0x43ac32,_0x22fdfc,_0xd246b3,_0x3a064a,_0x1abadd=_0x381354[_0x210478(0x2d0)];try{const _0x5e63af=await exchange[_0x210478(0x233)](_0x1abadd),_0x2aeec3=_0x5e63af[_0x1abadd];_0x459fc4=_0x2aeec3['last'],_0x43ac32=_0x2aeec3['bid'],_0x22fdfc=_0x2aeec3[_0x210478(0x26f)];_0x381354[_0x210478(0x212)]?(_0xd246b3=_0x381354['side']==_0x210478(0x24b)?'sell':_0x210478(0x24b),_0x3a064a=Math[_0x210478(0x28f)](_0x381354[_0x210478(0x237)])/_0x459fc4):(_0xd246b3=_0x381354['side'],_0x3a064a=Math[_0x210478(0x28f)](_0x381354[_0x210478(0x237)]));_0x394c0f=='limit'&&(config['ordertype']==_0x210478(0x2d5)&&(_0x459fc4=_0xd246b3=='buy'?_0x43ac32:_0x22fdfc),config['ordertype']=='limit-low'&&(_0x459fc4=_0xd246b3==_0x210478(0x24b)?_0x22fdfc:_0x43ac32));_0x3a064a=formatResult(_0x3a064a,0x8),_0x459fc4=formatResult(_0x459fc4,0x8);const _0x631908=await exchange[_0x210478(0x20f)](_0x1abadd,_0x394c0f,_0xd246b3,_0x3a064a,_0x459fc4);lastOrders['push']({'orderId':_0x631908['id'],'symbol':_0x1abadd,'side':_0xd246b3,'reverse':_0x381354[_0x210478(0x212)],'amount':_0x381354[_0x210478(0x212)]?_0x631908['amount']*_0x631908[_0x210478(0x2ba)]:_0x631908[_0x210478(0x228)],'filled':_0x381354['reverse']?_0x631908[_0x210478(0x274)]*_0x631908[_0x210478(0x2ba)]:_0x631908[_0x210478(0x274)],'price':_0x631908[_0x210478(0x2ba)]});const _0x15c0f8=_0xd246b3=='sell'?config[_0x210478(0x2b2)]?String[_0x210478(0x2b3)]('0x'+config['emojisell'])+'\x20':'':config['emojibuy']?String['fromCodePoint']('0x'+config[_0x210478(0x257)])+'\x20':'',_0x1e15fe=_0x394c0f==_0x210478(0x27e)?_0x210478(0x1f3):config[_0x210478(0x2a0)]==_0x210478(0x2d5)?_0x210478(0x2cc):_0x210478(0x1cb);if(_0x394c0f=='market')logHistory(_0x210478(0x1ea),''+_0x15c0f8+_0x1e15fe+_0x210478(0x23c)+_0x1abadd+'\x20'+_0xd246b3+'\x20#'+formatResult(_0x631908['filled'],0x8)+'\x20@'+formatResult(_0x631908['price'],0x8));else logHistory('order',''+_0x15c0f8+_0x1e15fe+_0x210478(0x23c)+_0x1abadd+'\x20'+_0xd246b3+'\x20#'+formatResult(_0x631908[_0x210478(0x228)],0x8)+'\x20@'+formatResult(_0x631908[_0x210478(0x2ba)],0x8));_0x631908[_0x210478(0x2d8)]=_0x381354[_0x210478(0x2d8)],await updateCoinResults(_0x631908);if(config['cooldown']!=0x0){let _0x24ef9b=null;if(cooldownTracker['length']==config[_0x210478(0x2a6)]-0x1)_0x24ef9b=cooldownTracker[_0x210478(0x29c)]();const _0x3683dc=getTimeStamp();cooldownTracker[_0x210478(0x1ff)](_0x3683dc);if(_0x24ef9b){const _0x16c264=fns[_0x210478(0x2da)](new Date(_0x3683dc),new Date(_0x24ef9b));_0x16c264<cooldownInterval&&(logHistory(_0x210478(0x21b),_0x210478(0x2ad)+config[_0x210478(0x2a6)]+_0x210478(0x279)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x210478(0x217)),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x50b08c){if(_0x50b08c[_0x210478(0x2a5)]()['includes'](_0x210478(0x26b)))logHistory(_0x210478(0x21b),_0x210478(0x24f)+_0x1abadd);else{if(_0x50b08c[_0x210478(0x2a5)]()[_0x210478(0x201)](_0x210478(0x28c)))logHistory('error',_0x210478(0x29d)+_0x1abadd);else await handleError(_0x50b08c,'placeOrder()');}}}if(lastOrders[_0x210478(0x289)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x210478(0x29f)]&&(config[_0x210478(0x2a0)]==_0x210478(0x27e)?logHistory(_0x210478(0x21b),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x210478(0x290)));else coolingDown&&(!config['headless']&&logHistory('error','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode'));}}function logHistory(_0x58ece5,_0x21c731,_0x208558=''){const _0x479d55=_0x203d23;let _0x521119={'time':getTimeStamp(),'type':_0x58ece5,'event':_0x21c731,'botname':config['botname'],'showname':config[_0x479d55(0x2c0)]};dbLogs[_0x479d55(0x24e)]('logs')[_0x479d55(0x1ff)](_0x521119)[_0x479d55(0x264)]();if(_0x208558=='')_0x208558=_0x21c731;proxyEmit(_0x479d55(0x273),{'log':_0x521119,'summary':_0x208558}),process['send']({'telegram':_0x521119},_0x1b1368=>{}),logging(''+_0x521119[_0x479d55(0x273)]);}function emitHistory(_0x2d5ed8={}){const _0x546347=_0x203d23;Object['keys'](_0x2d5ed8)[_0x546347(0x289)]==0x0&&(_0x2d5ed8={'type':[_0x546347(0x1ea),_0x546347(0x273)],'event':'','page':0x1});if(_0x2d5ed8['type']['includes'](_0x546347(0x273)))_0x2d5ed8[_0x546347(0x2d7)][_0x546347(0x2d6)](_0x2d5ed8[_0x546347(0x2d7)][_0x546347(0x23e)](_0x546347(0x273)),0x1,_0x546347(0x21b),_0x546347(0x218));if(dbLogs[_0x546347(0x2b7)](_0x546347(0x29e))[_0x546347(0x1e7)]()){let _0xabeb64=dbLogs[_0x546347(0x24e)](_0x546347(0x29e))[_0x546347(0x1ed)](_0x54b4d8=>{const _0x3c49b0=_0x546347;if(_0x2d5ed8[_0x3c49b0(0x2d7)][_0x3c49b0(0x289)]==0x0)return![];else return _0x2d5ed8[_0x3c49b0(0x2d7)][_0x3c49b0(0x201)](_0x54b4d8['type']);})['filter'](_0x448f6b=>{const _0x292bc3=_0x546347;if(_0x2d5ed8[_0x292bc3(0x273)]=='')return!![];else return _0x448f6b['event'][_0x292bc3(0x28b)]()[_0x292bc3(0x201)](_0x2d5ed8[_0x292bc3(0x273)][_0x292bc3(0x28b)]());})['sortBy'](_0x546347(0x1f2)),_0x2dac31=_0xabeb64[_0x546347(0x1e7)]()[_0x546347(0x289)];_0xabeb64=_0xabeb64['reverse']()[_0x546347(0x22f)]((_0x2d5ed8[_0x546347(0x25b)]-0x1)*logPageSize,_0x2d5ed8[_0x546347(0x25b)]*logPageSize-0x1)['reverse']()[_0x546347(0x1e7)](),proxyEmit(_0x546347(0x1fc),{'logs':_0xabeb64,'total':_0x2dac31});}else proxyEmit('event-history',{'logs':[],'total':0x0});}async function pauseBot(_0x33db29){const _0x28a955=_0x203d23,_0x42abdb=new Date()['getTime']();if(!lastBotPause)lastBotPause=new Date()['getTime'](),consecutivePauses=0x1;else{if(_0x42abdb-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x28a955(0x25d)]({'stop':'restart'},_0x82b92=>{});}else consecutivePauses=0x1;lastBotPause=new Date()['getTime']();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory('error',_0x28a955(0x295)+consecutivePauses+')'),await sleep(_0x33db29),botPaused=![],reset();}}async function handleError(_0x93d82c,_0x1e59d5,_0x8e61e2=''){const _0x123654=_0x203d23;if(_0x93d82c[_0x123654(0x2a5)]()['includes']('DDoSProtection'))logHistory(_0x123654(0x21b),_0x1e59d5+_0x123654(0x2c5)),await pauseBot(pauseBotInterval);else{if(_0x93d82c[_0x123654(0x2a5)]()['includes']('ExchangeNotAvailable'))logHistory('error',_0x1e59d5+_0x123654(0x2c1)),await pauseBot(pauseBotInterval);else{if(_0x93d82c[_0x123654(0x2a5)]()[_0x123654(0x201)](_0x123654(0x277)))logHistory('error',_0x1e59d5+_0x123654(0x230)),await pauseBot(pauseBotInterval);else{if(_0x93d82c[_0x123654(0x2a5)]()[_0x123654(0x201)](_0x123654(0x1fa)))logHistory(_0x123654(0x21b),_0x1e59d5+'\x20|\x20Binance\x20API\x20key\x20is\x20invalid'),logHistory(_0x123654(0x21b),_0x123654(0x2a7)),process['send']({'stop':'kill'},_0x357a9f=>{});else{if(_0x93d82c['toString']()['includes']('AuthenticationError'))logHistory('error',_0x1e59d5+_0x123654(0x262)),logHistory('error',_0x123654(0x2a7)),process['send']({'stop':_0x123654(0x1d4)},_0x5129c9=>{});else{if(_0x93d82c[_0x123654(0x2a5)]()['includes'](_0x123654(0x239)))logHistory(_0x123654(0x21b),_0x1e59d5+_0x123654(0x292)),logHistory(_0x123654(0x21b),_0x123654(0x2a7)),process[_0x123654(0x25d)]({'stop':_0x123654(0x1d4)},_0x4289c6=>{});else{if(_0x93d82c[_0x123654(0x2a5)]()[_0x123654(0x201)](_0x123654(0x253)))logHistory(_0x123654(0x21b),_0x1e59d5+_0x123654(0x1dd)),logHistory('error',_0x123654(0x2a7)),process['send']({'stop':'kill'},_0x433100=>{});else{if(_0x93d82c['toString']()[_0x123654(0x201)]('InvalidNonce'))logHistory('error',_0x1e59d5+_0x123654(0x1fe)),await pauseBot(pauseBotInterval),process['send']({'stop':_0x123654(0x243)},_0x4842ad=>{});else _0x93d82c[_0x123654(0x2a5)]()[_0x123654(0x201)](_0x123654(0x246))?logHistory(_0x123654(0x21b),_0x1e59d5+_0x123654(0x2ac)):(logHistory(_0x123654(0x21b),_0x1e59d5+_0x123654(0x1d6)),logging(_0x1e59d5+'\x20|\x20Error\x20details:\x20',_0x93d82c),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x3e97fa,_0x5622a8){const _0x7a0056=_0x203d23;return parseFloat(_0x3e97fa[_0x7a0056(0x236)](_0x5622a8));}function logging(_0x51e476,_0x2bdf4e=''){const _0x14f08a=_0x203d23;if(config['showname'])console[_0x14f08a(0x241)](getTimeStamp()+':\x20'+config[_0x14f08a(0x296)]+_0x14f08a(0x20c)+_0x51e476,_0x2bdf4e);else console['log'](getTimeStamp()+_0x14f08a(0x291)+botID+_0x14f08a(0x20c)+_0x51e476,_0x2bdf4e);}function getServerTime(){const _0x5cf0c5=_0x203d23,_0x24eb75=new Date();return _0x24eb75[_0x5cf0c5(0x284)]()+'/'+(_0x24eb75[_0x5cf0c5(0x24a)]()+0x1)[_0x5cf0c5(0x2a5)]()[_0x5cf0c5(0x293)](0x2,'0')+'/'+_0x24eb75[_0x5cf0c5(0x226)]()['toString']()[_0x5cf0c5(0x293)](0x2,'0')+'\x20'+_0x24eb75[_0x5cf0c5(0x1db)]()[_0x5cf0c5(0x2a5)]()[_0x5cf0c5(0x293)](0x2,'0')+':'+_0x24eb75[_0x5cf0c5(0x221)]()[_0x5cf0c5(0x2a5)]()[_0x5cf0c5(0x293)](0x2,'0')+':'+_0x24eb75[_0x5cf0c5(0x275)]()[_0x5cf0c5(0x2a5)]()[_0x5cf0c5(0x293)](0x2,'0');}function getTimeStamp(){const _0x12e60a=_0x203d23,_0x5cded2=shiftedTime();return _0x5cded2[_0x12e60a(0x284)]()+'/'+(_0x5cded2['getMonth']()+0x1)[_0x12e60a(0x2a5)]()['padStart'](0x2,'0')+'/'+_0x5cded2[_0x12e60a(0x226)]()[_0x12e60a(0x2a5)]()['padStart'](0x2,'0')+'\x20'+_0x5cded2[_0x12e60a(0x1db)]()[_0x12e60a(0x2a5)]()['padStart'](0x2,'0')+':'+_0x5cded2['getMinutes']()['toString']()[_0x12e60a(0x293)](0x2,'0')+':'+_0x5cded2['getSeconds']()['toString']()[_0x12e60a(0x293)](0x2,'0');}function getDate(){const _0x4a358f=_0x203d23,_0x48eb2a=shiftedTime();return _0x48eb2a['getFullYear']()+'/'+(_0x48eb2a[_0x4a358f(0x24a)]()+0x1)['toString']()[_0x4a358f(0x293)](0x2,'0')+'/'+_0x48eb2a[_0x4a358f(0x226)]()[_0x4a358f(0x2a5)]()[_0x4a358f(0x293)](0x2,'0');}function getHour(){const _0x270767=_0x203d23,_0xd4de92=shiftedTime();return _0xd4de92[_0x270767(0x1db)]()[_0x270767(0x2a5)]()[_0x270767(0x293)](0x2,'0');}function sleep(_0x4a78bc){return new Promise(_0x4d35a0=>setTimeout(_0x4d35a0,_0x4a78bc));}function _0x4fef(){const _0x21360b=['MIN_NOTIONAL','startprice','breakeven','bot','ask','function','args','Crypt','event','filled','getSeconds','spot','RequestTimeout','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','\x20orders\x20in\x20less\x20than\x20','Order(s)\x20validated\x20-\x20balancing\x20resumed','eventType','closeWs','sortBy','market','currency','date-fns','(((.+)+)+)+$','timeshift','constructor','getFullYear','keys','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','assign','fetchBalance','length','-performance.json','toLowerCase','Invalid\x20quantity','wss://stream.binance.com:9443','\x20minutes\x20-\x20balancing\x20resumed','abs','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled',':\x20Bot\x20','\x20|\x20Binance\x20API\x20secret\x20is\x20invalid','padStart','max','Pausing\x20bot\x20for\x205\x20minutes\x20(','botname','orderId','running','bot-','secure','HOT/EUR','shift','Order\x20amount\x20is\x20invalid:\x20','logs','headless','ordertype','cancel','side','Error:\x20Invalid\x20argument\x20','sort','toString','cooldown','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','parse','sell','fees','yyyy-MM-dd\x27T\x27HH:mm:ss','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','Executed\x20','707797JNBuue','lowdb','getStartingBalances','replace','emojisell','fromCodePoint','defaults','message','recreateHistory()','has','argv','configuration','price','binanceus','getCloses()','************','getTime','wsMarket','showname','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','fetchOHLCV','BTCBUSD','apiSecret','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','progress','cancelLoading','target','BTC','orderStatus','EUR','Limit\x20(high-margin)','excluded','-config.json','executionReport','symbol','threshold','buys','USDC','last','limit-high','splice','type','coin','Order\x20filled:\x20','differenceInSeconds','870RpoaJs','storeHeadless','Limit\x20(low-margin)','timeout','storeConfiguration','1224460hyoGsI','loadSymbols()','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','\x20-\x20','min','coins','kill','hybrid-crypto-js','\x20|\x20Unknown\x20error\x20occured','entries','delta','distribution','binance','getHours',',\x20must\x20be\x20a\x203\x20digit\x20number','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','24445gvdpCf','bb-secure.json','1962zqoXpO','Order(s)\x20not\x20validated\x20after\x20','Performance\x20recreation\x20completed\x20successfully','startnumber','BTCEUR','getFiat()','date','value','isArray','LIMIT','order','HOT/BTC','Order:\x20','filter','3368EfEaeV','wsKey','availableBalance','Bot\x20','time','Market','realized','bb-settings.json','fee','total','round','FILLED','API-key\x20format\x20invalid','outboundAccountPosition','event-history','basecoin','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','push','cancelOrder','includes','emitHistory','-results.json','ccxt','Order(s)\x20filled\x20-\x20balancing\x20resumed','forEach','stringify','usd','ticker','WebSockets(','getPortfolio','\x20>\x20','eachDayOfInterval','sells','createOrder','reduce','parseISO','reverse','6iNNcBJ','timestamp','AuthenticationError','exchange','\x20hour','success','settings','starting-balances','error','initws()','BTC/USDT','asset','enabled','close','getMinutes','limit','remainingSymbols','limits','accumulatedQuantity','getDate','yyyy/MM/dd\x20HH:mm:ss','amount','number','255904nqUFaJ','RSA-OAEP','balances','867480rHagaO','portfolio','slice','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','BUSD','fetchTickers','4914770fMGDGf','getCoins()','toFixed','trade','decrypt','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','reconnected','data','\x20order:\x20','userData','indexOf','offset','format','log','cancelOrder()','restart','recreate','performance','InsufficientFunds','cost','test','add','getMonth','buy','remove','find','get','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20',')\x20|\x20Error\x20details:\x20','startdate','symbols','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','001','yyyy/MM/dd','11EZxxGi','emojibuy','BNB','valid','datetime','page','apply','send','BTC/BUSD','Binance\x20API\x20key\x20is\x20invalid','eur','existsSync','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','apiKey','write','./config/','differenceInCalendarDays','kline','formattedMessage','loadMarkets','subscribeSpotUserDataStream'];_0x4fef=function(){return _0x21360b;};return _0x4fef();}function shiftedTime(){const _0x177cfb=_0x203d23,_0xa8f5f8=new Date();let _0x35e186=_0xa8f5f8;if(config&&config[_0x177cfb(0x282)]!==0x0)_0x35e186=fns[_0x177cfb(0x249)](_0xa8f5f8,{'hours':config['timeshift']});return _0x35e186;}