const _0x320401=_0x1a00;(function(_0xc3ea48,_0x92eff6){const _0x5147c1=_0x1a00,_0x2ffc1a=_0xc3ea48();while(!![]){try{const _0x41d89f=parseInt(_0x5147c1(0x16a))/0x1*(parseInt(_0x5147c1(0x1b1))/0x2)+parseInt(_0x5147c1(0xd1))/0x3+parseInt(_0x5147c1(0x7b))/0x4+-parseInt(_0x5147c1(0xb8))/0x5+-parseInt(_0x5147c1(0xf6))/0x6*(parseInt(_0x5147c1(0x158))/0x7)+-parseInt(_0x5147c1(0xd9))/0x8*(parseInt(_0x5147c1(0x92))/0x9)+parseInt(_0x5147c1(0x11f))/0xa*(-parseInt(_0x5147c1(0x8e))/0xb);if(_0x41d89f===_0x92eff6)break;else _0x2ffc1a['push'](_0x2ffc1a['shift']());}catch(_0x1ab270){_0x2ffc1a['push'](_0x2ffc1a['shift']());}}}(_0x2a58,0x5cb0b));const _0x57448c=function(){let _0x15a768=!![];return function(_0xe5b7a6,_0x4fb3ee){const _0x451586=_0x15a768?function(){const _0x38204b=_0x1a00;if(_0x4fb3ee){const _0x76b632=_0x4fb3ee[_0x38204b(0x18e)](_0xe5b7a6,arguments);return _0x4fb3ee=null,_0x76b632;}}:function(){};return _0x15a768=![],_0x451586;};}(),_0x33ec48=_0x57448c(this,function(){const _0x1c1d13=_0x1a00;return _0x33ec48[_0x1c1d13(0xd0)]()[_0x1c1d13(0xff)](_0x1c1d13(0x90))[_0x1c1d13(0xd0)]()[_0x1c1d13(0x183)](_0x33ec48)[_0x1c1d13(0xff)](_0x1c1d13(0x90));});_0x33ec48();'use strict';const ccxt=require(_0x320401(0x1fb)),low=require(_0x320401(0x194)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x320401(0x14c)),Crypt=require(_0x320401(0x81))[_0x320401(0x20a)],util=require(_0x320401(0x19b)),argv=require(_0x320401(0x126))(process[_0x320401(0x1e8)][_0x320401(0xf0)](0x2))[_0x320401(0x1e8)],path=require('path'),axios=require(_0x320401(0x1ce));let exchange,gTicker={},gChange={};const usdBasecoins=[_0x320401(0x225),_0x320401(0x13e),_0x320401(0xae),_0x320401(0x13b),_0x320401(0x227),_0x320401(0x18a)],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x320401(0x1fe)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x320401(0x17d)],validateOrdersState,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotIntervalShort=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x320401(0x1f3)+pauseBotInterval/0xea60+_0x320401(0x1d6),maxPauseRetries=0x6,loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,watchTransactionsInterval=0x3c*0x3e8,schedulerInterval=0x3c*0x3c*0x3e8,retryInterval=0x3e8,maxRetries=0x5,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidOrdersInitialTimeout,pidOrdersTimeout,botPaused=![],transactionDetectionOngoing=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x320401(0xb1))[_0x320401(0x113)],environment=require(_0x320401(0xb1))[_0x320401(0x172)]||_0x320401(0x18c),botID=process[_0x320401(0x1e8)][0x2]||_0x320401(0x168),pattern=/^[0-9]{3}$/;!pattern[_0x320401(0x9d)](botID)&&(console[_0x320401(0x19f)](_0x320401(0x9c)+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),killBot());const userID=process[_0x320401(0x1e8)][0x3]||'',configpath=userID?_0x320401(0x218)+userID+'/':_0x320401(0x218),logspath=userID?'./logs/'+userID+'/':'./logs/',loggerfile=fs[_0x320401(0x187)](logspath+_0x320401(0xa2),{'flags':'a'});!fs[_0x320401(0xaf)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x320401(0xaf)](logspath)&&fs[_0x320401(0x199)](logspath);const configfile=configpath+_0x320401(0x1cd)+botID+'-config.json',logfile=configpath+_0x320401(0x1cd)+botID+_0x320401(0x125),performancefile=configpath+_0x320401(0x1cd)+botID+'-performance.json',coinresultsfile=configpath+_0x320401(0x1cd)+botID+_0x320401(0xc2),settingsfile=configpath+_0x320401(0x209),securefile=configpath+_0x320401(0x99),configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x320401(0x1ac)]({'logs':[],'version':serverversion})[_0x320401(0x103)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance['defaults']({'data':[],'version':serverversion})[_0x320401(0x103)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig[_0x320401(0x1ac)]({'bot':[],'version':serverversion})[_0x320401(0x103)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x320401(0x1ac)]({'coins':[],'version':serverversion})[_0x320401(0x103)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x320401(0x111),'rsaStandard':_0x320401(0x105)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x4b3de6=>{const _0x41b02c=_0x320401;console[_0x41b02c(0x19f)](_0x4b3de6);},'simple':_0x22baf2=>{const _0x5c6e2e=_0x320401;console[_0x5c6e2e(0x19f)](_0x22baf2),loggerfile[_0x5c6e2e(0x103)](util['format'](_0x22baf2)+'\x0a');},'full':async(_0x21c7af,_0x3f8774='')=>{const _0x2940ed=_0x320401;let _0x29aae8;if(config[_0x2940ed(0x223)])_0x29aae8=getTimeStamp()+':\x20'+config[_0x2940ed(0x228)]+_0x2940ed(0x1c7)+_0x21c7af;else _0x29aae8=getTimeStamp()+':\x20Bot\x20'+botID+_0x2940ed(0x1c7)+_0x21c7af;console['log'](_0x29aae8),loggerfile[_0x2940ed(0x103)](util[_0x2940ed(0x85)](_0x29aae8)+'\x0a'),_0x3f8774&&(console['log'](_0x3f8774),loggerfile[_0x2940ed(0x103)](util['format'](_0x3f8774)+'\x0a'));},'debug':async(_0x3edd8f,_0x4b2219='')=>{const _0x28e159=_0x320401;let _0x3f6764;if(config[_0x28e159(0x223)])_0x3f6764=getTimeStamp()+':\x20'+config[_0x28e159(0x228)]+'\x20>\x20[DEBUG]\x20'+_0x3edd8f;else _0x3f6764=getTimeStamp()+_0x28e159(0x146)+botID+_0x28e159(0x1b3)+_0x3edd8f;if(debugging)console[_0x28e159(0x19f)](_0x3f6764);loggerfile[_0x28e159(0x103)](util['format'](_0x3f6764)+'\x0a');if(_0x4b2219){if(debugging)console['log'](_0x4b2219);loggerfile['write'](util['format'](_0x4b2219)+'\x0a');}}};process['on']('uncaughtException',function(_0x2195d1){const _0x3a48d2=_0x320401;handleError(_0x2195d1,_0x3a48d2(0x7f));});settings['timeshift']!=config[_0x320401(0x124)]&&updateTimeshift(settings['timeshift']);settings[_0x320401(0x15b)]!=config[_0x320401(0x15b)]&&updateOnepagemode(settings[_0x320401(0x15b)]);(settings['marketcapApi']&&!config[_0x320401(0x208)]||!settings[_0x320401(0x208)]&&config[_0x320401(0x208)])&&updateMarketcapApi(settings['marketcapApi']);process[_0x320401(0xab)]({'started':_0x320401(0x171)},_0x55a0c9=>{}),initializeProcessListeners();function proxyEmit(_0x2c5db0,_0x396c2c=null){const _0x429934=_0x320401;process[_0x429934(0xab)]({'function':_0x2c5db0,'args':_0x396c2c},_0x138c1c=>{});}function initializeProcessListeners(){process['on']('message',_0x475bda=>{const _0x2928eb=_0x1a00;switch(Object[_0x2928eb(0x202)](_0x475bda)[0x0]){case _0x2928eb(0x124):_0x475bda['timeshift']!=undefined&&(settings['timeshift']=_0x475bda['timeshift'],updateTimeshift(settings[_0x2928eb(0x124)]));break;case _0x2928eb(0x15b):_0x475bda['onepagemode']!=undefined&&(settings['onepagemode']=_0x475bda[_0x2928eb(0x15b)],updateOnepagemode(settings[_0x2928eb(0x15b)]));break;case _0x2928eb(0x208):_0x475bda[_0x2928eb(0x208)]!=undefined&&(settings[_0x2928eb(0x208)]=_0x475bda[_0x2928eb(0x208)],updateMarketcapApi(settings['marketcapApi']));break;case'bots':_0x475bda[_0x2928eb(0xc9)]!=undefined&&(bots=JSON[_0x2928eb(0x70)](_0x475bda[_0x2928eb(0xc9)]),proxyEmit(_0x2928eb(0xc9),bots));break;case'function':switch(_0x475bda[_0x2928eb(0xe8)]){case _0x2928eb(0x1d3):initclient();break;case _0x2928eb(0xcd):toggleBotMode();break;case'emitHistory':emitHistory(_0x475bda[_0x2928eb(0xda)]);break;case _0x2928eb(0x1f2):deleteHistoryAlerts(_0x475bda['args']);break;case'getPortfolio':getPortfolio(_0x475bda[_0x2928eb(0xda)]);break;case _0x2928eb(0x8a):storeConfiguration(_0x475bda[_0x2928eb(0xda)]);break;case _0x2928eb(0x195):storeHeadless(_0x475bda[_0x2928eb(0xda)]);break;case'storeFiat':storeFiat(_0x475bda[_0x2928eb(0xda)]);break;case _0x2928eb(0x1ba):resetHistory();break;case'getStartingBalances':getStartingBalances(getNormalizedPerformance());break;case _0x2928eb(0xd6):placeOrder(_0x475bda['args']);break;case _0x2928eb(0xc5):cancelLoading();break;case _0x2928eb(0x86):showConfig();break;case _0x2928eb(0x83):sendMetricsTelegram();break;case _0x2928eb(0x215):sendPortfolioTelegram();break;}}});}startScheduler(),reset(!![]);async function reset(_0xb356c2=![]){const _0x4513e2=_0x320401;logger['debug']('Reset\x20|\x20'+(_0xb356c2?_0x4513e2(0xb5):_0x4513e2(0x213))+_0x4513e2(0x8c)+config[_0x4513e2(0x203)]);if(pidBalances)clearTimeout(pidBalances);if(!_0xb356c2)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x4513e2(0x1e1)]!=''&&config[_0x4513e2(0x1e1)]!='***'){loadingProgress=0x0;_0xb356c2&&(await initExchange(),await loadSymbols(),loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![]);const _0x137517=await getCoins();[currentCoins,currentCoinsAll]=_0x137517,setBlockTransactionDetection(![]),getMarketCap(),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x4513e2(0x17c)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x4513e2(0x121)]==0x0&&allOpenOrders[_0x4513e2(0x121)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function resumeBot(_0x5ea303=![]){const _0x183c1b=_0x320401;logger['debug'](_0x183c1b(0x1a7)+(_0x5ea303?_0x183c1b(0x7a):_0x183c1b(0x143))+_0x183c1b(0x9b)+config['exchange']);if(pidBalances)clearTimeout(pidBalances);if(_0x5ea303){getBalances();return;}coinsLoaded=![];if(config[_0x183c1b(0x1e1)]!=''&&config[_0x183c1b(0x1e1)]!=_0x183c1b(0x1b2)){loadingProgress=0x1;const _0x20dfec=await getCoins();[currentCoins,currentCoinsAll]=_0x20dfec,setBlockTransactionDetection(![]),loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![];while(!coinsLoaded){await sleep(0x64);}logger[_0x183c1b(0x17c)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x183c1b(0x121)]==0x0&&allOpenOrders[_0x183c1b(0x121)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();}}async function getMarketCap(_0x5d78a6){const _0x10d62f=_0x320401;let _0x39ba4d=![];if(_0x5d78a6)_0x39ba4d=!![];let _0x153d81;_0x39ba4d?_0x153d81=_0x5d78a6[_0x10d62f(0x1c3)](_0x17faae=>_0x17faae['coin']):_0x153d81=currentCoinsAll[_0x10d62f(0x1c3)](_0x24f599=>_0x24f599[_0x10d62f(0x1fa)]);if(!config['marketcapApi']||!_0x39ba4d&&!config[_0x10d62f(0x15a)]||_0x153d81['length']==0x0)return;let _0x13b5e2=null;try{_0x13b5e2=await axios['get'](_0x10d62f(0x1d9),{'headers':{'X-CMC_PRO_API_KEY':settings['marketcapApi']},'params':{'symbol':_0x153d81[_0x10d62f(0xd0)]()}});}catch(_0x1f7750){_0x13b5e2=null,_0x1f7750[_0x10d62f(0xd0)]()[_0x10d62f(0xde)]('status\x20code\x20401')?(config['marketcapApi']=![],updateConfig(),proxyEmit(_0x10d62f(0x130),emittedConfiguration()),logHistory(_0x10d62f(0x1ec),_0x10d62f(0x1ae))):(logHistory(_0x10d62f(0x1ec),_0x10d62f(0x13a)+schedulerInterval/(0x3c*0x3e8)+_0x10d62f(0x1d6)),logger[_0x10d62f(0x17c)](_0x10d62f(0xb0),_0x1f7750[_0x10d62f(0xd0)]()+_0x10d62f(0x1b0)+_0x1f7750['code']));}if(_0x13b5e2){let _0xc87da=0x0;const _0x1f7d80=_0x13b5e2[_0x10d62f(0xe3)];_0x153d81[_0x10d62f(0x150)](_0x10714f=>{const _0x215f36=_0x10d62f;if(_0x1f7d80[_0x215f36(0xe3)][_0x10714f][0x0])_0xc87da+=_0x1f7d80[_0x215f36(0xe3)][_0x10714f][0x0][_0x215f36(0xb3)][_0x215f36(0x225)][_0x215f36(0x15c)];}),_0x153d81[_0x10d62f(0x150)](_0x5839f5=>{const _0x351262=_0x10d62f,_0x1c8697=_0x1f7d80[_0x351262(0xe3)][_0x5839f5][0x0]?_0x1f7d80['data'][_0x5839f5][0x0][_0x351262(0xb3)][_0x351262(0x225)]['market_cap']:0x0;if(_0x39ba4d){const _0x28c07f=_0x5d78a6['find'](_0x2bcc49=>_0x2bcc49['coin']==_0x5839f5);_0x28c07f&&(_0x28c07f['marketcap']=_0x1c8697);}else{const _0x110523=currentCoins['find'](_0x16891f=>_0x16891f[_0x351262(0x1fa)]==_0x5839f5);_0x110523&&(_0x110523[_0x351262(0x14e)]=_0x1c8697);const _0x27d0a4=currentCoinsAll[_0x351262(0x1cf)](_0x208f2a=>_0x208f2a[_0x351262(0x1fa)]==_0x5839f5);_0x27d0a4&&(_0x27d0a4[_0x351262(0x14e)]=_0x1c8697);}}),!_0x39ba4d&&updateTargetDistribution();}}function updateTargetDistribution(){const _0x1ec88e=_0x320401,_0x23da98=0x2;let _0x37b130=0x0,_0x4f2487=0x0,_0x1bde52=0x0,_0x574c01=0x0,_0x2ace4a=0x0;config['portfolio'][_0x1ec88e(0x150)](_0x50845c=>{const _0x5ac175=_0x1ec88e;if(!_0x50845c[_0x5ac175(0xd2)]){_0x1bde52++,_0x37b130+=_0x50845c[_0x5ac175(0xac)];if(_0x50845c['slider']===-0x1){_0x37b130++;const _0xf8ca7f=currentCoinsAll['find'](_0x4af0be=>_0x4af0be[_0x5ac175(0x1fa)]==_0x50845c[_0x5ac175(0x1fa)]);_0xf8ca7f&&(_0x574c01+=_0xf8ca7f['marketcap'],_0x2ace4a+=Math[_0x5ac175(0x117)](_0xf8ca7f[_0x5ac175(0x14e)]));}if(_0x50845c['slider']!==-0x1)_0x4f2487++;}});let _0x3bfc70;const _0x55e118=0x64-_0x37b130,_0x3bb566=_0x1bde52-_0x4f2487;_0x3bfc70=_0x3bb566===0x0?_0x37b130:Math[_0x1ec88e(0xa3)](0x64,_0x37b130),config[_0x1ec88e(0xa6)]['forEach'](_0x3f1b19=>{const _0x5b7b24=_0x1ec88e,_0x4db252=currentCoinsAll[_0x5b7b24(0x1cf)](_0x2811e5=>_0x2811e5[_0x5b7b24(0x1fa)]==_0x3f1b19[_0x5b7b24(0x1fa)]);_0x4db252&&(_0x3f1b19['marketcap']=_0x4db252[_0x5b7b24(0x14e)]);if(!_0x3f1b19[_0x5b7b24(0xd2)]){if(_0x3bfc70<=0x64){if(_0x3f1b19[_0x5b7b24(0xac)]===-0x1){if(_0x574c01!==0x0&&config[_0x5b7b24(0x15a)]){if(_0x4db252){if(config[_0x5b7b24(0x15a)]==_0x5b7b24(0x14e))_0x3f1b19[_0x5b7b24(0xb6)]=(_0x55e118/(_0x574c01/_0x4db252['marketcap']))[_0x5b7b24(0xa0)](_0x23da98);else config[_0x5b7b24(0x15a)]==_0x5b7b24(0x21d)&&(_0x3f1b19[_0x5b7b24(0xb6)]=(_0x55e118/(_0x2ace4a/Math['sqrt'](_0x4db252[_0x5b7b24(0x14e)])))['toFixed'](_0x23da98));}}}}}}),updateConfig();}function updateConfig(){const _0x4f01ba=_0x320401;let _0x495461=dbConfig[_0x4f01ba(0x1a3)](_0x4f01ba(0x190))[_0x4f01ba(0x1cf)]({'botID':botID})['value']();_0x495461&&dbConfig[_0x4f01ba(0x1a3)]('bot')[_0x4f01ba(0x1cf)]({'botID':botID})['assign'](config)[_0x4f01ba(0x103)]();}function logMemory(){const _0x2bf1cf=_0x320401;if(environment!=_0x2bf1cf(0x12e))return;const _0x3f6b50=process[_0x2bf1cf(0x176)]()[_0x2bf1cf(0x170)]/0x400/0x400;logger[_0x2bf1cf(0x17c)]('process\x20'+process[_0x2bf1cf(0x112)]+_0x2bf1cf(0x1a5)+formatResult(_0x3f6b50,0x1)+_0x2bf1cf(0x131));}async function startScheduler(){const _0x20e1a8=shiftedTime()['getHours']();getMarketCap(),_0x20e1a8==0x1&&logMemory(),(_0x20e1a8==0x2||_0x20e1a8==0xe)&&loadSymbols(),await sleep(schedulerInterval),startScheduler();}async function restartBot(_0x37dde6=![]){const _0x816ce4=_0x320401;logger[_0x816ce4(0x17c)](_0x816ce4(0x76));if(!_0x37dde6)while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3e8);}process[_0x816ce4(0xab)]({'stop':_0x816ce4(0x12d)},_0x450d77=>{});}async function initExchange(_0x2019bb=config[_0x320401(0x203)],_0x1cbc0c=config[_0x320401(0x1e1)],_0x3097c7=config[_0x320401(0x205)],_0x267857=config[_0x320401(0xb7)]){const _0x33ab98=_0x320401;if(exchange){logger['debug'](_0x33ab98(0x88));return;}logger[_0x33ab98(0x17c)](_0x33ab98(0xf9));!supportedExchanges()['includes'](_0x2019bb)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x2019bb+'\x20exchange'),killBot());const _0x20eb20=ccxt[_0x33ab98(0xef)][_0x2019bb['toLowerCase']()];exchange=new _0x20eb20({'apiKey':_0x1cbc0c,'secret':_0x3097c7,'options':{'defaultType':_0x33ab98(0xf1)}});if(_0x267857)exchange['password']=_0x267857;}function updateExchange(_0x18a07a,_0x3ef52e,_0x475eeb=null){const _0x310831=_0x320401;exchange['apiKey']=_0x18a07a,exchange['apiSecret']=_0x3ef52e,exchange[_0x310831(0xb7)]=_0x475eeb,logger[_0x310831(0x17c)](_0x310831(0x20b));}function setStableCoins(){const _0x3e1660=_0x320401;let _0x516187=config[_0x3e1660(0x19a)]=='ETH'?_0x3e1660(0xa8):config[_0x3e1660(0x19a)]=='PAXG'?_0x3e1660(0x116):_0x3e1660(0x1c5),_0x252eb2=allSymbols[_0x3e1660(0xde)](_0x516187+_0x3e1660(0x82))?_0x3e1660(0x225):allSymbols[_0x3e1660(0xde)](_0x516187+_0x3e1660(0x101))?_0x3e1660(0x13b):_0x3e1660(0x79),_0x418e2e=allSymbols['includes'](_0x516187+'/EUR')?_0x3e1660(0x79):_0x252eb2;stablecoins={'eur':{'coin':''+_0x516187+_0x418e2e,'symbol':_0x516187+'/'+_0x418e2e},'usd':{'coin':''+_0x516187+_0x252eb2,'symbol':_0x516187+'/'+_0x252eb2}};}async function initwsCcxt(){const _0x2aaa1b=_0x320401;initCycle++;const _0x4b0e49=initCycle;let _0x1faae8=[];config['portfolio']['forEach'](_0x420822=>{const _0xa89919=_0x1a00;if(!_0x420822[_0xa89919(0xd2)]&&_0x420822['coin']!=config[_0xa89919(0x19a)])_0x1faae8['push'](_0x420822[_0xa89919(0x1f1)]);});if(!_0x1faae8[_0x2aaa1b(0xde)](stablecoins[_0x2aaa1b(0x1e9)][_0x2aaa1b(0x1f1)]))_0x1faae8[_0x2aaa1b(0x157)](stablecoins['eur'][_0x2aaa1b(0x1f1)]);if(!_0x1faae8[_0x2aaa1b(0xde)](stablecoins[_0x2aaa1b(0xed)][_0x2aaa1b(0x1f1)]))_0x1faae8[_0x2aaa1b(0x157)](stablecoins['usd'][_0x2aaa1b(0x1f1)]);if(config[_0x2aaa1b(0x203)]['startsWith'](_0x2aaa1b(0xcb))&&config[_0x2aaa1b(0x19a)]!=_0x2aaa1b(0x116)){if(!_0x1faae8[_0x2aaa1b(0xde)](_0x2aaa1b(0x20f)+config[_0x2aaa1b(0x19a)]))_0x1faae8['push'](_0x2aaa1b(0x20f)+config[_0x2aaa1b(0x19a)]);}loadCoins(_0x1faae8),_0x1faae8=validateSymbols(_0x1faae8);const _0x155d33=async _0x462f0a=>{const _0x1c1b93=_0x2aaa1b;let _0x54bc64;try{const _0x3dc6da=await getTickers(_0x462f0a);Object[_0x1c1b93(0x10b)](_0x3dc6da)[_0x1c1b93(0x150)](_0x3d1e52=>{const _0x3ce0cf=_0x1c1b93;_0x54bc64=_0x3d1e52[0x1][_0x3ce0cf(0x1f1)],gTicker[noslash(_0x54bc64)]=_0x3d1e52[0x1]['last'],gChange[_0x54bc64]=_0x3d1e52[0x1][_0x3ce0cf(0x166)];});}catch(_0x4e32e1){await handleError(_0x4e32e1,_0x1c1b93(0x8f),_0x54bc64);}},_0x2ebbf9=async _0x1204f0=>{const _0x47606d=_0x2aaa1b;while(initCycle==_0x4b0e49){if(!botPaused)try{const _0x486955=await exchange[_0x47606d(0x22a)](_0x1204f0);gTicker[noslash(_0x486955[0x0][_0x47606d(0x1f1)])]=_0x486955[0x0][_0x47606d(0x1c8)];}catch(_0x195a58){if(!exchangeStopped)await handleError(_0x195a58,_0x47606d(0x135),_0x1204f0);}else await sleep(0x64);}},_0x2cb3d8=async _0x93653e=>{const _0x32a156=_0x2aaa1b;while(initCycle==_0x4b0e49){if(!botPaused)try{const _0x1f8a92=await exchange['watchTradesForSymbols'](_0x93653e),_0x2a3b59=_0x1f8a92['pop']();gTicker[noslash(_0x2a3b59[_0x32a156(0x1f1)])]=_0x2a3b59['price'];}catch(_0x3b7d2f){if(!exchangeStopped)await handleError(_0x3b7d2f,_0x32a156(0x12f),_0x93653e[_0x32a156(0xd0)]());}else await sleep(0x64);}},_0x5f2def=async _0x5d5e28=>{const _0x34a1f6=_0x2aaa1b;while(initCycle==_0x4b0e49){if(!botPaused){let _0xf058f;try{await sleep(0x3c*0x3e8);const _0x1c9aba=await getTickers(_0x5d5e28);Object[_0x34a1f6(0x10b)](_0x1c9aba)[_0x34a1f6(0x150)](_0x1c3ccc=>{const _0x490067=_0x34a1f6;_0xf058f=_0x1c3ccc[0x1][_0x490067(0x1f1)],gChange[_0xf058f]=_0x1c3ccc[0x1][_0x490067(0x166)];});}catch(_0x545960){if(!exchangeStopped)await handleError(_0x545960,_0x34a1f6(0x21c),_0xf058f);}}else await sleep(0x64);}},_0x32b351=async _0x37535c=>{const _0xdbb0f8=_0x2aaa1b;while(initCycle==_0x4b0e49){if(!botPaused)try{const _0x975e96=await exchange['watchOrders'](_0x37535c);initCycle==_0x4b0e49&&_0x975e96['forEach'](_0x78f364=>{updateNumberCoinsCcxt(_0x78f364);});}catch(_0x28963c){if(!exchangeStopped)await handleError(_0x28963c,_0xdbb0f8(0xa9));}else await sleep(0x64);}};_0x155d33(_0x1faae8),_0x5f2def(_0x1faae8),exchange[_0x2aaa1b(0x147)][_0x2aaa1b(0x198)]&&!(config[_0x2aaa1b(0x203)]==_0x2aaa1b(0xd7)&&_0x1faae8[_0x2aaa1b(0x121)]>0xa)?_0x2cb3d8(_0x1faae8):_0x1faae8[_0x2aaa1b(0x150)](_0x4cedcb=>{_0x2ebbf9(_0x4cedcb);}),_0x1faae8[_0x2aaa1b(0x150)](_0x38488b=>{_0x32b351(_0x38488b);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x17c0a9){const _0x945522=_0x320401;let _0x2bf046={};try{if(config['exchange']!=_0x945522(0x22c))_0x2bf046=await exchange[_0x945522(0x10f)](_0x17c0a9);else for(const _0x53376a of _0x17c0a9){const _0x30f3ad=await exchange[_0x945522(0x1a9)](_0x53376a);_0x2bf046[_0x53376a]=_0x30f3ad;}return _0x2bf046;}catch(_0x3ec45b){throw _0x3ec45b;}}function setBlockTransactionDetection(_0x3b6908){const _0x2ee056=_0x320401;blockTransactionDetection=_0x3b6908,logger[_0x2ee056(0x17c)]('Block\x20transaction\x20detection:\x20'+blockTransactionDetection);}async function detectLiquidityChange(_0x4a116e=0x0){const _0xe2670f=_0x320401;transactionDetectionOngoing=!![];try{const _0x1fcca4=await getCoins(_0x4a116e),[_0x209b5e,_0x3412f9]=_0x1fcca4;let _0x28051e=[];currentCoins[_0xe2670f(0x150)](_0x3f12cb=>{const _0x43a569=_0xe2670f,_0x390102=_0x209b5e[_0x43a569(0x1cf)](_0x280032=>_0x280032[_0x43a569(0x1fa)]==_0x3f12cb[_0x43a569(0x1fa)]);if(_0x390102){if(_0x3f12cb[_0x43a569(0xcf)]!=_0x390102[_0x43a569(0xcf)]){let _0x5828b0;if(_0x3f12cb[_0x43a569(0x1fa)]!=config[_0x43a569(0x19a)]){const _0x23c9d7=gTicker[noslash(_0x3f12cb[_0x43a569(0x1f1)])];_0x5828b0=_0x3f12cb[_0x43a569(0x73)]?0x1/_0x23c9d7:_0x23c9d7;}else _0x5828b0=0x1;_0x28051e[_0x43a569(0x157)]({'coin':_0x3f12cb[_0x43a569(0x1fa)],'symbol':_0x3f12cb[_0x43a569(0x1f1)],'price':_0x5828b0,'number':Number(formatResult(_0x390102[_0x43a569(0xcf)]-_0x3f12cb[_0x43a569(0xcf)],0x8)),'basecoinvalue':_0x5828b0*(_0x390102['number']-_0x3f12cb['number'])});}}});if(_0x28051e[_0xe2670f(0x121)]>0x0&&!blockTransactionDetection)for(const _0x2f7fa9 of _0x28051e){if(config[_0xe2670f(0x1d0)]){logger[_0xe2670f(0x17c)](_0xe2670f(0x17e)+_0x2f7fa9[_0xe2670f(0x10e)]+_0xe2670f(0x16b)+lastFees['highest']);if(lastFees[_0xe2670f(0xa4)]==0x0||Math[_0xe2670f(0x17f)](_0x2f7fa9['basecoinvalue'])>lastFees[_0xe2670f(0xa4)]*1.2){if(config[_0xe2670f(0x1d0)]==_0xe2670f(0x1fd)){delete _0x2f7fa9[_0xe2670f(0x1f1)],delete _0x2f7fa9['basecoinvalue'];let _0x25bf77=[],_0x1cfa05=[...config['liquidity']]||[],_0x4161a=config['liquidity'];_0x1cfa05[_0xe2670f(0xd8)]((_0x43d464,_0x530172)=>_0x43d464[_0xe2670f(0x1be)]>_0x530172['date']?-0x1:_0x530172[_0xe2670f(0x1be)]>_0x43d464['date']?0x1:0x0);const _0x54d409=getDate();if(_0x1cfa05[0x0]){const _0x40153b=fns[_0xe2670f(0x70)](_0x1cfa05[0x0][_0xe2670f(0x1be)],_0xe2670f(0x155),new Date()),_0x43cc06=fns[_0xe2670f(0x70)](_0x54d409,_0xe2670f(0x155),new Date());if(fns[_0xe2670f(0x96)](_0x40153b,_0x43cc06)){_0x25bf77=_0x1cfa05[0x0][_0xe2670f(0x1b4)];const _0xc802b2=_0x25bf77[_0xe2670f(0x1cf)](_0x594778=>_0x594778[_0xe2670f(0x1fa)]==_0x2f7fa9[_0xe2670f(0x1fa)]);_0xc802b2?(_0xc802b2['number']+=_0x2f7fa9['number'],_0xc802b2[_0xe2670f(0xcf)]==0x0&&(_0x25bf77=_0x25bf77['filter'](_0x5d851b=>{const _0x16a4ab=_0xe2670f;return _0x5d851b[_0x16a4ab(0x1fa)]!=_0x2f7fa9['coin'];}))):_0x25bf77[_0xe2670f(0x157)](_0x2f7fa9);const _0x1d7a2c=_0x4161a[_0xe2670f(0x1cf)](_0x28c1b4=>_0x28c1b4[_0xe2670f(0x1be)]==_0x54d409);_0x1d7a2c[_0xe2670f(0x1b4)]=_0x25bf77;}else _0x4161a['push']({'date':_0x54d409,'changes':[_0x2f7fa9]});}const _0x3085a3=_0x4161a[_0xe2670f(0x1cf)](_0x28b9e4=>_0x28b9e4[_0xe2670f(0x1be)]==_0x54d409);if(_0x3085a3){let _0xccf4f8=!![];_0x3085a3[_0xe2670f(0x1b4)][_0xe2670f(0x150)](_0x506b1c=>{const _0x26528d=_0xe2670f;if(_0x506b1c[_0x26528d(0xcf)]!=0x0)_0xccf4f8=![];}),_0xccf4f8&&(_0x4161a=_0x4161a[_0xe2670f(0x12a)](_0x10ec4f=>{return _0x10ec4f['date']!=_0x54d409;}));}let _0x4a825e=dbConfig['get'](_0xe2670f(0x190))[_0xe2670f(0x1cf)]({'botID':botID})[_0xe2670f(0x98)]();_0x4a825e&&(dbConfig[_0xe2670f(0x1a3)](_0xe2670f(0x190))[_0xe2670f(0x1cf)]({'botID':botID})['assign']({'liquidity':_0x4161a})[_0xe2670f(0x103)](),config[_0xe2670f(0x13c)]=_0x4161a);logHistory('success',_0xe2670f(0x7d)+Math[_0xe2670f(0x17f)](_0x2f7fa9['number'])+'\x20'+_0x2f7fa9[_0xe2670f(0x1fa)]+'\x20'+(_0x2f7fa9[_0xe2670f(0xcf)]>0x0?_0xe2670f(0x149):_0xe2670f(0xc1))+_0xe2670f(0x6d)),proxyEmit('configuration',emittedConfiguration());const _0x520e73=getNormalizedPerformance();emitPerformance(_0x520e73),getStartingBalances(_0x520e73),logger['debug'](_0xe2670f(0x109));}else config[_0xe2670f(0x1d0)]==_0xe2670f(0x18f)&&(config[_0xe2670f(0x1ff)]?(await storeHeadless({'headless':![]}),logHistory(_0xe2670f(0x167),_0xe2670f(0x7d)+Math[_0xe2670f(0x17f)](_0x2f7fa9['number'])+'\x20'+_0x2f7fa9[_0xe2670f(0x1fa)]+'\x20'+(_0x2f7fa9['number']>0x0?_0xe2670f(0x149):_0xe2670f(0xc1))+_0xe2670f(0x91))):logger[_0xe2670f(0x17c)]('Portfolio\x20change\x20detected:\x20'+Math[_0xe2670f(0x17f)](_0x2f7fa9['number'])+'\x20'+_0x2f7fa9['coin']+'\x20'+(_0x2f7fa9[_0xe2670f(0xcf)]>0x0?_0xe2670f(0x149):_0xe2670f(0xc1))+_0xe2670f(0x19c)));}else logger[_0xe2670f(0x17c)]('Fee\x20discount\x20refund\x20detected:\x20'+Math['abs'](_0x2f7fa9['number'])+'\x20'+_0x2f7fa9[_0xe2670f(0x1fa)]+'\x20'+(_0x2f7fa9[_0xe2670f(0xcf)]>0x0?'added':_0xe2670f(0xc1)));}else logger[_0xe2670f(0x17c)](_0xe2670f(0x7d)+Math[_0xe2670f(0x17f)](_0x2f7fa9[_0xe2670f(0xcf)])+'\x20'+_0x2f7fa9[_0xe2670f(0x1fa)]+'\x20'+(_0x2f7fa9[_0xe2670f(0xcf)]>0x0?'added':_0xe2670f(0xc1))+_0xe2670f(0x102));}currentCoins=_0x209b5e,currentCoinsAll=_0x3412f9;}catch(_0x509a23){if(!exchangeStopped)await handleError(_0x509a23,'detectLiquidityChange()');}transactionDetectionOngoing=![];}async function watchTransactions(){await sleep(0x14*0x3e8);while(!![]){!botPaused&&!blockTransactionDetection&&coinsLoaded?(detectLiquidityChange(),await sleep(watchTransactionsInterval)):await sleep(0x3e8);}}async function loadSymbols(){const _0x442c56=_0x320401;logger[_0x442c56(0x17c)]('Loading\x20symbols');try{markets=await exchange[_0x442c56(0x6f)]();}catch(_0x2166ed){logger[_0x442c56(0x17c)](_0x442c56(0xc3)+_0x2166ed[_0x442c56(0xd0)]());if(markets){}else logHistory(_0x442c56(0x1ec),'Failed\x20to\x20load\x20market\x20data\x20-\x20bot\x20not\x20started'),logHistory('error',_0x442c56(0x1c2)+loadCoinsRetryInterval/0xea60+_0x442c56(0x14a)),logger[_0x442c56(0x17c)](_0x442c56(0xb0),_0x2166ed),loading['cancel']=!![],emitLoadingProgress(),await sleep(loadCoinsRetryInterval),restartBot();}allSymbols=[],Object['entries'](markets)['forEach'](_0x5f4e8f=>{const _0x2d9baf=_0x442c56;_0x5f4e8f[0x1][_0x2d9baf(0x114)]&&_0x5f4e8f[0x1][_0x2d9baf(0xf1)]&&allSymbols['push'](_0x5f4e8f[0x0]);});}function validateSymbols(_0x4ab136){const _0x2074a7=_0x320401;let _0x43bd78=[];return _0x4ab136[_0x2074a7(0x150)](_0x1d28f5=>{const _0x19a8a1=_0x2074a7;!allSymbols['includes'](_0x1d28f5)?logHistory(_0x19a8a1(0x1ec),'Invalid\x20symbol:\x20'+_0x1d28f5+_0x19a8a1(0x1a4)):_0x43bd78[_0x19a8a1(0x157)](_0x1d28f5);}),_0x43bd78;}async function initclient(){const _0x11812c=_0x320401;proxyEmit(_0x11812c(0x130),emittedConfiguration()),proxyEmit(_0x11812c(0xfe),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x11812c(0x104),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x7eda25=getNormalizedPerformance();emitPerformance(_0x7eda25),getStartingBalances(_0x7eda25);}async function toggleBotMode(){const _0x42e78c=_0x320401;let _0x473acb=dbConfig[_0x42e78c(0x1a3)](_0x42e78c(0x190))[_0x42e78c(0x1cf)]({'botID':botID})[_0x42e78c(0x98)]();if(_0x473acb){const _0x329065=!_0x473acb['headless'];dbConfig[_0x42e78c(0x1a3)](_0x42e78c(0x190))['find']({'botID':botID})[_0x42e78c(0x154)]({'headless':_0x329065})[_0x42e78c(0x103)](),config[_0x42e78c(0x1ff)]=_0x329065,proxyEmit('configuration',emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x23eced=_0x320401;process[_0x23eced(0xab)]({'updatebotmanager':!![]},_0x4dcd71=>{}),logger[_0x23eced(0x17c)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x4c189c){const _0x3aae6d=_0x320401;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x116936,_0x43f164=0x0,_0x51c680=0x0;_0x4c189c[_0x3aae6d(0x150)](_0x53086b=>{const _0x3286b0=_0x3aae6d;loading[_0x3286b0(0xd3)][_0x3286b0(0x157)](_0x53086b);}),loadingCanceled=![];let _0x50c7f1=![];while(_0x116936!=_0x4c189c[_0x3aae6d(0x121)]+maxLoadingProgress){_0x116936=loadingProgress,_0x4c189c[_0x3aae6d(0x150)](_0x901d2b=>{const _0x544598=_0x3aae6d;if(gTicker[noslash(_0x901d2b)]){loading[_0x544598(0xd3)]=loading[_0x544598(0xd3)][_0x544598(0x12a)](_0x30e24a=>_0x30e24a!=_0x901d2b);if(!watchedSymbols[_0x544598(0xde)](_0x901d2b))watchedSymbols['push'](_0x901d2b);_0x116936++;}}),loading[_0x3aae6d(0xe1)]=Math[_0x3aae6d(0x1b5)](_0x116936/(_0x4c189c[_0x3aae6d(0x121)]+maxLoadingProgress)*0x64);loading['progress']!=0x64&&(_0x51c680>0x1e*0x5&&(loading[_0x3aae6d(0xeb)]=!![],emitLoadingProgress()),_0x51c680>0x78*0x5&&!_0x50c7f1&&(_0x50c7f1=!![],logHistory(_0x3aae6d(0x1ec),_0x3aae6d(0x219)+loading[_0x3aae6d(0xd3)][_0x3aae6d(0x152)](',\x20')+_0x3aae6d(0x1c9)),logHistory('error','Pausing\x20for\x20'+loadCoinsRetryInterval/0xea60+_0x3aae6d(0x14a)),loadingCanceled=!![],await sleep(loadCoinsRetryInterval),restartBot()));if(loadingCanceled){loading[_0x3aae6d(0x163)]=!![],emitLoadingProgress();break;}else _0x43f164!=loading[_0x3aae6d(0xe1)]&&(_0x43f164=loading[_0x3aae6d(0xe1)],emitLoadingProgress()),_0x51c680++,await sleep(0xc8);}_0x116936==_0x4c189c[_0x3aae6d(0x121)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x3aae6d(0xab)]({'status':_0x3aae6d(0x201),'live':_0x3aae6d(0x171)},_0x3db164=>{}),_0x50c7f1&&logHistory('success',_0x3aae6d(0x11d)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x5ba97a=_0x320401;proxyEmit(_0x5ba97a(0x130),{...emittedConfiguration(),'configstate':_0x5ba97a(0x1a2)});}function emitLoadingProgress(){const _0x2af410=_0x320401;proxyEmit(_0x2af410(0x78),loading);}async function getFiat(){const _0x1aca82=_0x320401;let _0x5a5570=gTicker[stablecoins[_0x1aca82(0x1e9)][_0x1aca82(0x1fa)]],_0x156393=gTicker[stablecoins[_0x1aca82(0xed)][_0x1aca82(0x1fa)]];return{'eur':Number(_0x5a5570),'usd':Number(_0x156393)};}function capitalize(_0x2023a2){const _0x567fab=_0x320401;return _0x2023a2[_0x567fab(0x107)](0x0,0x1)[_0x567fab(0x1a0)]()+_0x2023a2[_0x567fab(0x107)](0x1);}function supportedExchanges(){const _0x6f538c=_0x320401,_0x44324e=['ws','fetchTickers',_0x6f538c(0x1a9),_0x6f538c(0x22a),_0x6f538c(0x177),_0x6f538c(0x206),'createOrder',_0x6f538c(0x144),'fetchBalance'];let _0x35e344=[],_0x4b36a0=[],_0x47045c=ccxt[_0x6f538c(0xef)][_0x6f538c(0xfe)];_0x47045c[_0x6f538c(0x150)](_0x3d89f5=>{const _0x3b8b60=_0x6f538c;try{const _0xee5612=new ccxt[(_0x3b8b60(0xef))][_0x3d89f5]();_0x4b36a0['push'](_0xee5612);}catch(_0x4a5a0d){}}),_0x4b36a0[_0x6f538c(0x150)](_0x415cd2=>{const _0x286a7c=_0x6f538c;let _0x57d5a4=0x0;_0x44324e[_0x286a7c(0x150)](_0x3cf19a=>{const _0x424570=_0x286a7c;_0x3cf19a in _0x415cd2['has']&&_0x415cd2[_0x424570(0x147)][_0x3cf19a]&&_0x57d5a4++;}),_0x57d5a4==_0x44324e[_0x286a7c(0x121)]&&_0x35e344['push'](capitalize(_0x415cd2['id']));});let _0x47d786=[];return _0x47045c[_0x6f538c(0x150)](_0x27c34f=>{const _0x1ab1a7=_0x6f538c;_0x27c34f=capitalize(_0x27c34f);if(!_0x35e344[_0x1ab1a7(0xde)](_0x27c34f))_0x47d786['push'](_0x27c34f);}),_0x35e344;}function setStartDatePerformance(){const _0x2f6ba7=_0x320401;if(config&&config[_0x2f6ba7(0x13c)][0x0][_0x2f6ba7(0x1b4)][_0x2f6ba7(0x121)]!=0x0){const _0x324e4c=config[_0x2f6ba7(0x13c)][0x0][_0x2f6ba7(0x1b4)];dbPerformance['get'](_0x2f6ba7(0xe3))['find']({'date':config[_0x2f6ba7(0xea)]})[_0x2f6ba7(0x154)]({'coins':_0x324e4c})[_0x2f6ba7(0x103)]();}}async function recreateCoinResults(){const _0x443cb7=_0x320401;recreationNeeded=![];let _0x2681a4,_0x45bc8d=[];try{for(const _0x1646e9 of currentCoins){if(_0x1646e9[_0x443cb7(0x1fa)]!=config[_0x443cb7(0x19a)]){let _0x4e5931=0x0,_0x454097,_0x203f30;_0x2681a4=await getAllEventOrders(_0x1646e9[_0x443cb7(0x1f1)]);if(_0x2681a4['length']>0x0)_0x2681a4['forEach'](_0x38ae3c=>{const _0x78ac22=_0x443cb7,_0x328a7a=_0x1646e9[_0x78ac22(0x1f1)][_0x78ac22(0xde)](config[_0x78ac22(0x19a)]+'/');_0x45bc8d[_0x78ac22(0x157)]({'datetime':_0x38ae3c[_0x78ac22(0x1f6)],'coin':_0x1646e9[_0x78ac22(0x1fa)],'symbol':_0x1646e9[_0x78ac22(0x1f1)],'side':_0x38ae3c['side'],'reverse':_0x328a7a,'amount':formatResult(_0x38ae3c[_0x78ac22(0x1e0)],0x8),'filled':formatResult(_0x38ae3c[_0x78ac22(0x1e0)],0x8),'price':formatResult(_0x38ae3c[_0x78ac22(0x1c8)],0x8)}),_0x4e5931=_0x38ae3c['side']==_0x78ac22(0xa5)?_0x4e5931+_0x38ae3c['filled']:_0x4e5931-_0x38ae3c[_0x78ac22(0x1e0)];if(!_0x203f30)_0x203f30=_0x38ae3c[_0x78ac22(0x1c8)];});_0x454097=_0x1646e9[_0x443cb7(0xcf)]-_0x4e5931;let _0x1c4a60;config['liquidity'][_0x443cb7(0x150)](_0x12cf75=>{const _0x253ff6=_0x443cb7;!_0x1c4a60&&(_0x1c4a60=_0x12cf75[_0x253ff6(0x1b4)][_0x253ff6(0x1cf)](_0x2a0284=>_0x2a0284[_0x253ff6(0x1fa)]==_0x1646e9['coin']),_0x1c4a60&&(_0x454097=_0x1c4a60[_0x253ff6(0xcf)],_0x203f30=_0x1c4a60[_0x253ff6(0x1c8)]));});let _0x44b54b=dbCoinResults[_0x443cb7(0x1a3)]('coins')[_0x443cb7(0x1cf)]({'coin':_0x1646e9[_0x443cb7(0x1fa)]})[_0x443cb7(0x98)]();_0x44b54b={'coin':_0x1646e9[_0x443cb7(0x1fa)],'number':_0x454097,'breakeven':_0x203f30,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x443cb7(0x1a3)]('coins')[_0x443cb7(0x1cf)]({'coin':_0x1646e9['coin']})[_0x443cb7(0x154)](_0x44b54b)[_0x443cb7(0x103)]();}}_0x45bc8d[_0x443cb7(0xd8)]((_0xc67ef7,_0x52c087)=>_0xc67ef7[_0x443cb7(0x1f6)]>_0x52c087['datetime']?0x1:_0x52c087[_0x443cb7(0x1f6)]>_0xc67ef7['datetime']?-0x1:0x0);let _0x266572=0x0;for(let _0x4447fb of _0x45bc8d){await updateCoinResults(_0x4447fb,!![]);}}catch(_0x420767){await handleError(_0x420767,_0x443cb7(0x1e4));}}async function getAllEventOrders(_0xc64290){const _0x5e66da=_0x320401;let _0x2a689e=[],_0x15b8cb=dbLogs[_0x5e66da(0x1a3)](_0x5e66da(0x1e5))[_0x5e66da(0x12a)](_0x421248=>{const _0x459b60=_0x5e66da,_0x34038c=_0x421248[_0x459b60(0x1da)][_0x459b60(0x15e)]();return _0x34038c[_0x459b60(0xde)](_0xc64290[_0x459b60(0x15e)]())&&(_0x34038c['includes'](_0x459b60(0x161))&&_0x34038c[_0x459b60(0xde)](_0x459b60(0xdd))||_0x34038c[_0x459b60(0xde)](_0x459b60(0x1e0))&&_0x34038c[_0x459b60(0xde)](_0x459b60(0xdd)));})[_0x5e66da(0x192)](_0x5e66da(0xbe))[_0x5e66da(0x98)]();return _0x15b8cb[_0x5e66da(0x150)](_0x5c9b94=>{const _0x13b866=_0x5e66da,_0x5742d0=_0x5c9b94[_0x13b866(0x1da)][_0x13b866(0xde)](_0x13b866(0x214))?'sell':_0x13b866(0xa5),_0x18c92d=/#([0-9]|\.)+\s/i,_0x3dd7dc=Number(_0x18c92d[_0x13b866(0x229)](_0x5c9b94[_0x13b866(0x1da)])[0x0][_0x13b866(0xf0)](0x1)),_0x1388bf=/@([0-9]|\.)+$/i,_0x599fc6=Number(_0x1388bf[_0x13b866(0x229)](_0x5c9b94[_0x13b866(0x1da)])[0x0][_0x13b866(0xf0)](0x1));_0x2a689e[_0x13b866(0x157)]({'datetime':_0x5c9b94[_0x13b866(0xbe)],'coin':symbolToCoin(_0xc64290),'symbol':_0xc64290,'side':_0x5742d0,'amount':_0x3dd7dc,'filled':_0x3dd7dc,'price':_0x599fc6});}),_0x2a689e;}async function validate24hChanges(){const _0x22d92d=_0x320401;for(const _0x277abd of currentCoins){if(_0x277abd[_0x22d92d(0x1fa)]!=config[_0x22d92d(0x19a)]){let _0x4afc5d;_0x277abd[_0x22d92d(0x73)]?_0x4afc5d=formatResult((0x1/(gChange[_0x277abd['symbol']]/0x64+0x1)-0x1)*0x64,0x3):_0x4afc5d=gChange[_0x277abd[_0x22d92d(0x1f1)]],_0x4afc5d<config[_0x22d92d(0x1e2)]&&(logHistory(_0x22d92d(0x1ec),_0x277abd[_0x22d92d(0x1fa)]+_0x22d92d(0x1e7)+_0x4afc5d+'%'),logHistory(_0x22d92d(0x1ec),'Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses'),logHistory(_0x22d92d(0x1ec),'Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again'),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x56bb3c,_0x4961d4){const _0x320268=_0x320401;if(!_0x56bb3c)return!![];const _0x2e4667=_0x4961d4[_0x320268(0x97)]('.'),_0x2e5898=_0x56bb3c[_0x320268(0x97)]('.');for(var _0x51b908=0x0;_0x51b908<_0x2e5898[_0x320268(0x121)];_0x51b908++){const _0x31cce5=~~_0x2e5898[_0x51b908],_0x4917a1=~~_0x2e4667[_0x51b908];if(_0x31cce5<_0x4917a1)return!![];if(_0x31cce5>_0x4917a1)return![];}return![];}async function oneTimeMigration(){const _0x1e6db3=_0x320401;let _0x382217=dbLogs[_0x1e6db3(0x1a3)](_0x1e6db3(0x113))[_0x1e6db3(0x98)]();if(isOlderVersion(_0x382217,_0x1e6db3(0x179))){let _0x3710e1=[];const _0x3f3d77=dbLogs[_0x1e6db3(0x1a3)](_0x1e6db3(0x1e5))[_0x1e6db3(0x98)]();_0x3f3d77['forEach'](_0x29c6d5=>{const _0x14a9db=_0x1e6db3;_0x3710e1['push']({'time':_0x29c6d5[_0x14a9db(0xbe)],'type':_0x29c6d5[_0x14a9db(0x164)],'event':_0x29c6d5[_0x14a9db(0x1da)]});}),dbLogs['get']('logs')['assign'](_0x3710e1)[_0x1e6db3(0x103)]();}let _0x347ea6=dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x113))[_0x1e6db3(0x98)]();if(isOlderVersion(_0x347ea6,_0x1e6db3(0x179))){let _0x1eb896=dbConfig[_0x1e6db3(0x1a3)]('bot')[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x98)]();if(_0x1eb896){let _0x4da5a8=[];_0x1eb896[_0x1e6db3(0xa6)][_0x1e6db3(0x150)](_0x43f6b8=>{const _0x2da9a9=_0x1e6db3;_0x4da5a8[_0x2da9a9(0x157)]({'coin':_0x43f6b8[_0x2da9a9(0x1fa)],'number':_0x43f6b8[_0x2da9a9(0x7e)],'price':_0x43f6b8[_0x2da9a9(0x211)]}),delete _0x43f6b8[_0x2da9a9(0x7e)],delete _0x43f6b8[_0x2da9a9(0x211)];});if(_0x4da5a8['length']!==0x0)fs[_0x1e6db3(0x6b)](configbackuppath+('starting-balance-'+botID+_0x1e6db3(0xc8)),JSON[_0x1e6db3(0x162)](_0x4da5a8,null,0x4),function(_0x328d98){if(_0x328d98){}});const _0x6080c5=(_0x33bc42,_0x204b7f)=>{const _0x1ff17f=_0x1e6db3;let _0x517da4=[];_0x204b7f[_0x1ff17f(0x150)](_0x165b4b=>{const _0x599471=_0x1ff17f,_0x4071e7=_0x33bc42[_0x599471(0x1cf)](_0x58b63f=>_0x58b63f[_0x599471(0x1fa)]==_0x165b4b[_0x599471(0x1fa)]);if(!_0x4071e7)_0x517da4[_0x599471(0x157)](_0x165b4b);});let _0x1380a3=[];return _0x33bc42['forEach'](_0x59764f=>{const _0x34c330=_0x1ff17f,_0x29eb46=_0x204b7f[_0x34c330(0x1cf)](_0x1f0235=>_0x1f0235[_0x34c330(0x1fa)]==_0x59764f[_0x34c330(0x1fa)]);if(!_0x29eb46||_0x29eb46[_0x34c330(0xcf)]==0x0&&_0x59764f['number']!=0x0)_0x1380a3[_0x34c330(0x157)](_0x59764f);}),{'missingDay1':_0x517da4,'notInDay2':_0x1380a3};},_0x2aa0eb=dbPerformance[_0x1e6db3(0x1a3)](_0x1e6db3(0xe3))[_0x1e6db3(0x153)]()['value']();if(_0x2aa0eb[_0x1e6db3(0x121)]>0x1){const {missingDay1:_0x11fb3e,notInDay2:_0x5310df}=_0x6080c5(_0x4da5a8,_0x2aa0eb[0x1][_0x1e6db3(0x16c)]);_0x4da5a8=[..._0x4da5a8,..._0x11fb3e],_0x5310df[_0x1e6db3(0x150)](_0x1bfdef=>{const _0x5aa5db=_0x1e6db3;let _0x18132b=_0x4da5a8[_0x5aa5db(0x71)](_0x2500b1=>_0x2500b1['coin']==_0x1bfdef[_0x5aa5db(0x1fa)]);_0x18132b!=-0x1&&_0x4da5a8[_0x5aa5db(0x77)](_0x18132b,0x1);});}_0x4da5a8[_0x1e6db3(0xd8)]((_0x32d096,_0x3269fc)=>_0x32d096[_0x1e6db3(0x1fa)]>_0x3269fc[_0x1e6db3(0x1fa)]?0x1:_0x3269fc[_0x1e6db3(0x1fa)]>_0x32d096['coin']?-0x1:0x0);let _0x4ea98d=[{'date':_0x1eb896[_0x1e6db3(0xea)],'changes':_0x4da5a8}];_0x2aa0eb['length']>0x2&&_0x2aa0eb[_0x1e6db3(0x150)]((_0x58d76a,_0x3ee492)=>{const _0x23ff16=_0x1e6db3;if(_0x3ee492>0x0&&_0x3ee492<_0x2aa0eb[_0x23ff16(0x121)]-0x1){const {missingDay1:_0x17704d,notInDay2:_0x4d03c5}=_0x6080c5(_0x2aa0eb[_0x3ee492][_0x23ff16(0x16c)],_0x2aa0eb[_0x3ee492+0x1][_0x23ff16(0x16c)]);_0x4da5a8=[],(_0x17704d[_0x23ff16(0x121)]!=0x0||_0x4d03c5['length']!=0x0)&&(_0x17704d[_0x23ff16(0x121)]!=0x0&&_0x4da5a8[_0x23ff16(0x157)](..._0x17704d),_0x4d03c5[_0x23ff16(0x121)]!=0x0&&(_0x4d03c5[_0x23ff16(0x150)](_0x4ae456=>{const _0x3c82f4=_0x23ff16;_0x4ae456[_0x3c82f4(0xcf)]=-_0x4ae456[_0x3c82f4(0xcf)];}),_0x4da5a8[_0x23ff16(0x157)](..._0x4d03c5)),_0x4da5a8[_0x23ff16(0xd8)]((_0x17edcb,_0x3c79d6)=>_0x17edcb[_0x23ff16(0x1fa)]>_0x3c79d6[_0x23ff16(0x1fa)]?0x1:_0x3c79d6[_0x23ff16(0x1fa)]>_0x17edcb[_0x23ff16(0x1fa)]?-0x1:0x0),_0x4ea98d[_0x23ff16(0x157)]({'date':_0x2aa0eb[_0x3ee492+0x1][_0x23ff16(0x1be)],'changes':_0x4da5a8}));}}),dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x190))['find']({'botID':botID})['assign']({..._0x1eb896,'liquidity':_0x4ea98d})[_0x1e6db3(0x103)]();}}if(isOlderVersion(_0x347ea6,_0x1e6db3(0x12b))){let _0xb1c677=dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x190))[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x98)]();if(_0xb1c677){const _0x5e11cb=_0xb1c677[_0x1e6db3(0x203)],_0x38f744=_0x5e11cb?capitalize(_0x5e11cb):_0x1e6db3(0xcb);dbConfig[_0x1e6db3(0x1a3)]('bot')[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x154)]({'exchange':_0x38f744})[_0x1e6db3(0x103)]();}}if(isOlderVersion(_0x347ea6,_0x1e6db3(0x178))){let _0x2f2700=dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x190))[_0x1e6db3(0x1cf)]({'botID':botID})['value']();if(_0x2f2700){const _0x3563a3=_0x2f2700['marketcapEnabled'],_0xf7223b=_0x3563a3?_0x1e6db3(0x14e):![];dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x190))[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x154)]({'marketcapEnabled':_0xf7223b})['write']();}}if(isOlderVersion(_0x347ea6,_0x1e6db3(0x137))){let _0x4ba8c0=dbConfig['get'](_0x1e6db3(0x190))[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x98)]();if(_0x4ba8c0){const _0x416119=_0x4ba8c0[_0x1e6db3(0x1d0)],_0x50856b=_0x416119?_0x1e6db3(0x1fd):![];dbConfig[_0x1e6db3(0x1a3)](_0x1e6db3(0x190))[_0x1e6db3(0x1cf)]({'botID':botID})[_0x1e6db3(0x154)]({'autoliquidity':_0x50856b})[_0x1e6db3(0x103)]();}}let _0x173a01=dbPerformance['get'](_0x1e6db3(0x113))[_0x1e6db3(0x98)]();isOlderVersion(_0x173a01,_0x1e6db3(0x179))&&setStartDatePerformance();let _0x52a3ee=dbCoinResults['get'](_0x1e6db3(0x113))['value']();if(isOlderVersion(_0x52a3ee,_0x1e6db3(0xc6))){let _0x476e0b=dbCoinResults[_0x1e6db3(0x1a3)](_0x1e6db3(0x16c))[_0x1e6db3(0x98)]();if(_0x476e0b[_0x1e6db3(0x121)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x28be12=_0x320401;dbConfig[_0x28be12(0x9f)](_0x28be12(0x113),serverversion)[_0x28be12(0x103)](),dbPerformance['set']('version',serverversion)[_0x28be12(0x103)](),dbLogs['set']('version',serverversion)['write'](),dbCoinResults[_0x28be12(0x9f)](_0x28be12(0x113),serverversion)['write']();}function _0x2a58(){const _0x15d754=['Invalid\x20API\x20details,\x20please\x20try\x20again\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','24954OKApsH','Error\x20details\x20(1):','AuthenticationError','Initializing\x20exchange','last','full','ORDERS.UNLOCKED','\x20order:\x20','exchanges','search','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','/USDT','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','write','balances','RSA-OAEP','Resetting\x20coin\x20results:\x20','substring','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','Portfolio\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','%\x20(','entries','\x20value','fromCodePoint','basecoinvalue','fetchTickers','\x20|\x20Custom\x20ID:\x20','sha256','pid','version','active','initial','PAXG','sqrt','getDate','breakeven','2\x20-\x20handling\x20FILLED\x20order:\x20','differenceInSeconds','total','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','add','1600diJeHb','token\x20is\x20expired','length','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','colorscheme','timeshift','-events.json','yargs/yargs','target','\x20portfolio:</b>\x20\x0a\x0a','delta','filter','2.6.0','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','restart','staging','watchTradesForSymbols()','configuration','\x20MB','NetworkError:\x20connection\x20closed\x20by\x20remote\x20server','1\x20-\x20Validate\x20orders:\x20','secure','watchTrades()','1\x20-\x20FILLED\x20unknown\x20order:\x20','2.6.23','<b>','Trigger:\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20trying\x20again\x20in\x20','USDT','liquidity','Invalid\x20quantity','BUSD','netoffset','Waited\x20','replace','red_yellow_blue','complete','fetchOpenOrders','\x20not\x20available\x20(see:\x20hodlerhacks.com/fix/5)',':\x20Bot\x20','has','realized','added','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','canceled','date-fns','\x20closed\x20the\x20connection\x20(see:\x20hodlerhacks.com/fix/5)','marketcap','\x20orders\x20in\x20less\x20than\x20','forEach','threshold','join','cloneDeep','assign','yyyy/MM/dd','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','push','1099BPTNBJ','\x20minutes\x20-\x20','marketcapEnabled','onepagemode','market_cap','offset','toLowerCase','Resetting\x20bot\x20history','warning','market','stringify','cancel','type','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','percentage','success','001','Huobipro','25UBrYWq','\x20|\x20highest\x20fee:\x20','coins','cooldown','Order\x20filled:\x20','2\x20-\x20Validate\x20orders:\x20','heapUsed','running','environment','page','0\x20-\x20EXECUTION:\x20','closed','memoryUsage','watchOrders','2.6.22','2.3.5','LOCKED','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','debug','UNLOCKED','Liquidity\x20change\x20|\x20basecoin\x20value:\x20','abs','Limit\x20(low-margin)','status','Error\x20while\x20deleting\x20files:\x20','constructor','Executed\x20','2\x20-\x20Orders\x20unlocked','fee','createWriteStream','padStart','\x20rejected\x20your\x20API\x20request\x20(see:\x20hodlerhacks.com/fix/4)','USDP','Limit\x20(high-margin)','production','Huobi','apply','switch-manual','bot','RETRY\x20-\x20Problem\x20resolved\x20after\x20','sortBy','buys','lowdb','storeHeadless','none','InvalidOrder','watchTradesForSymbols','mkdirSync','basecoin','util','\x20-\x20bot\x20already\x20running\x20in\x20manual\x20mode','Order(s)\x20not\x20validated\x20after\x20','Error\x20in\x20testAPI():\x20','log','toUpperCase','Exchange','loading-canceled','get','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','\x20uses\x20','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','Resuming\x20(','kill','fetchTicker','\x20hour','average','defaults','customId','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','No\x20more\x20open\x20orders\x20-\x20','\x20-\x20','42814Xlkreu','***','\x20>\x20[DEBUG]\x20','changes','round','getCoinNumber()','Error\x20details\x20(0):','open','orderstatus','resetHistory','cancelOrders()','Cooldown\x20ended\x20-\x20balancing\x20resumed','portfolio2','date','getHours','Avoiding\x20continuous\x20order\x20attempts','InsufficientFunds','Pausing\x20for\x20','map','settings','BTC','trade','\x20>\x20','price','\x20-\x20bot\x20not\x20started','leftTxt','getMonth','side','bot-','axios','find','autoliquidity','\x20:\x20','fees','initclient','emojisell','getOpenOrders()','\x20minutes','ordertype','openOrders','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','event','event-history','ExchangeError','************','min','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20(see:\x20hodlerhacks.com/fix/1)','filled','apiKey','change24h','Symbol(s):\x20','recreateCoinResults()','logs','fiat','\x20has\x20a\x2024h\x20drop\x20of\x20','argv','eur','balancing\x20resumed','Bitget','error','sells','message','</pre>','\x20>\x20details:','symbol','deleteHistoryAlerts','\x20>\x20pausing\x20bot\x20for\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','1\x20-\x20partially\x20FILLED\x20known\x20order:\x20','datetime','indexOf','recent20','amountToPrecision','coin','ccxt','shift','update-liquidity','freeze','headless','privateKey','enabled','keys','exchange','final','apiSecret','cancelOrder','floor','marketcapApi','bb-settings.json','Crypt','Updating\x20API\x20key\x20(not\x20saved\x20in\x20config\x20file\x20yet)','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)','\x20not\x20responding\x20(see:\x20hodlerhacks.com/fix/5)','recreate','BNB/','Cex','startprice','ongoing','no\x20exchange\x20reloaded','sell','sendPortfolioTelegram','timestamp','getTime','./config/','Failed\x20to\x20load\x20coin\x20data\x20for\x20','\x20change','BNB','fetchTickers()','marketcapsqrt','ask','net-basecoin','-------------------------------\x0a','OnMaintenance','createOrder','showname','Market','USD','rightTxt','USDC','botname','exec','watchTrades','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Cryptocom','unlinkSync','writeFile','portfolio1','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','getSeconds','loadMarkets','parse','findIndex','request-time','reverse','Exception\x20thrown\x20in\x20','ExchangeNotAvailable','Initiating\x20bot\x20restart','splice','coin-loading-progress','EUR','quick','2062916QBjtTw','Network\x20error\x20details:','Portfolio\x20change\x20detected:\x20','startnumber','uncaughtException','valid','hybrid-crypto-js','/USD','sendMetricsTelegram','limits','format','showConfig','limit','Initializing\x20exchange:\x20already\x20done','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','storeConfiguration','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','\x20|\x20exchange:\x20',':\x20timer\x20>','2211sgNajp','initTickers()','(((.+)+)+)+$','\x20-\x20bot\x20switched\x20to\x20manual\x20mode','117RnTIZS','DDoSProtection','decrypt','net-fiat','isEqual','split','value','bb-secure.json','Unknown\x20error:\x20',')\x20|\x20exchange:\x20','Error:\x20Invalid\x20argument\x20','test','starting-balances','set','toFixed','RETRY\x20-\x20Error\x20in\x20','/output-000.log','max','highest','buy','portfolio','\x20|\x20','ETH','watchOrders()','RequestTimeout','send','slider','getMinutes','TUSD','existsSync','Error\x20details:','./version.json','Unfilled\x20order(s)\x20canceled\x20after\x20','quote','getFullYear','exchange\x20reload','distribution','apiPassword','1405210ZQSJLP','\x20network\x20error:\x20','NetworkError','currency','ORDERS.LOCKED','\x20attempts','time','\x20API\x20secret\x20is\x20invalid','bid','removed','-results.json','Error\x20in\x20loadSymbols():\x20','ID:\x20','cancelLoading','2.5.0','Unknown\x20error\x20-\x20check\x20logs','.json','bots','<b>Bot\x20','Binance','orderId','toggleBotMode','Net\x20effect','number','toString','891663tioeEe','excluded','remainingSymbols','1\x20-\x20FILLED\x20known\x20order:\x20','amount','placeOrder','Bybit','sort','1416zxRyyH','args','\x20metrics:</b>\x20\x0a\x0a','change','order','includes','must\x20be\x20greater\x20than\x20minimum\x20amount','\x20/\x20','progress','remove','data','\x20>\x20stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot','Bot\x20','<pre>','performance','function','cost','startdate','timeout','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20(see:\x20hodlerhacks.com/fix/1)','usd','InvalidNonce','pro','slice','spot','RateLimitExceeded','Bot\x20has\x20not\x20loaded\x20yet\x20-\x20try\x20again\x20in\x20a\x20minute','balancing\x20resumes\x20when\x20cooldown\x20ends'];_0x2a58=function(){return _0x15d754;};return _0x2a58();}function getConfiguration(_0x18decc){const _0x2f0fd5=_0x320401;let _0x4c5256=dbConfig[_0x2f0fd5(0x1a3)](_0x2f0fd5(0x190))[_0x2f0fd5(0x1cf)]({'botID':_0x18decc})[_0x2f0fd5(0x98)]();if(_0x4c5256){let _0x3629ac=![];typeof _0x4c5256['threshold']=='string'&&(_0x4c5256={..._0x4c5256,'threshold':Number(_0x4c5256[_0x2f0fd5(0x151)])},_0x3629ac=!![]),_0x4c5256['change24h']==undefined&&(_0x4c5256={..._0x4c5256,'change24h':-0x14},_0x3629ac=!![]),_0x4c5256[_0x2f0fd5(0x1e6)]==undefined&&(_0x4c5256={..._0x4c5256,'fiat':_0x2f0fd5(0x225)},_0x3629ac=!![]),_0x4c5256['onepagemode']==undefined&&(_0x4c5256={..._0x4c5256,'onepagemode':settings[_0x2f0fd5(0x15b)]},_0x3629ac=!![]),_0x4c5256[_0x2f0fd5(0x123)]==undefined&&(_0x4c5256={..._0x4c5256,'colorscheme':_0x2f0fd5(0x142)},_0x3629ac=!![]),_0x4c5256[_0x2f0fd5(0x1d0)]==undefined&&(_0x4c5256={..._0x4c5256,'autoliquidity':_0x2f0fd5(0x1fd)},_0x3629ac=!![]),_0x4c5256[_0x2f0fd5(0x208)]==undefined&&(_0x4c5256={..._0x4c5256,'marketcapApi':settings[_0x2f0fd5(0x208)]?!![]:![]},_0x3629ac=!![]),_0x4c5256[_0x2f0fd5(0x15a)]==undefined&&(_0x4c5256={..._0x4c5256,'marketcapEnabled':![]},_0x3629ac=!![]),_0x3629ac&&(_0x4c5256={'botID':_0x4c5256['botID'],'exchange':_0x4c5256[_0x2f0fd5(0x203)],'apiKey':_0x4c5256['apiKey'],'apiSecret':_0x4c5256[_0x2f0fd5(0x205)],'apiPassword':_0x4c5256[_0x2f0fd5(0xb7)],'basecoin':_0x4c5256['basecoin'],'botname':_0x4c5256[_0x2f0fd5(0x228)],'showname':_0x4c5256[_0x2f0fd5(0x223)],'threshold':_0x4c5256['threshold'],'ordertype':_0x4c5256[_0x2f0fd5(0x1d7)],'timeout':_0x4c5256[_0x2f0fd5(0xeb)],'fiat':_0x4c5256['fiat'],'startdate':_0x4c5256['startdate'],'recreate':_0x4c5256[_0x2f0fd5(0x20e)],'timeshift':_0x4c5256[_0x2f0fd5(0x124)],'onepagemode':_0x4c5256['onepagemode'],'headless':_0x4c5256[_0x2f0fd5(0x1ff)],'cooldown':_0x4c5256['cooldown'],'change24h':_0x4c5256[_0x2f0fd5(0x1e2)],'emojibuy':_0x4c5256['emojibuy'],'emojisell':_0x4c5256[_0x2f0fd5(0x1d4)],'colorscheme':_0x4c5256['colorscheme'],'marketcapApi':_0x4c5256[_0x2f0fd5(0x208)],'marketcapEnabled':_0x4c5256[_0x2f0fd5(0x15a)],'portfolio':_0x4c5256[_0x2f0fd5(0xa6)],'autoliquidity':_0x4c5256[_0x2f0fd5(0x1d0)],'liquidity':_0x4c5256[_0x2f0fd5(0x13c)],'openOrders':_0x4c5256['openOrders']},dbConfig[_0x2f0fd5(0x1a3)](_0x2f0fd5(0x190))[_0x2f0fd5(0xe2)]()[_0x2f0fd5(0x103)](),dbConfig['get'](_0x2f0fd5(0x190))['push'](_0x4c5256)[_0x2f0fd5(0x103)]());}else _0x4c5256={'botID':_0x18decc,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x2f0fd5(0xe5)+_0x18decc,'showname':![],'threshold':0x3,'ordertype':_0x2f0fd5(0x161),'timeout':0x14,'fiat':_0x2f0fd5(0x225),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x2f0fd5(0x124)],'onepagemode':settings[_0x2f0fd5(0x15b)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x2f0fd5(0x142),'marketcapApi':settings[_0x2f0fd5(0x208)]?!![]:![],'marketcapEnabled':![],'portfolio':[],'autoliquidity':_0x2f0fd5(0x1fd),'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x4c5256;}function emittedConfiguration(){const _0x3c5548=_0x320401;let _0x432dd0;if(config[_0x3c5548(0x1e1)]=='')_0x432dd0={...config,'configstate':'initial'};else config['apiKey']==_0x3c5548(0x1b2)?_0x432dd0={...config,'configstate':'recovery'}:(_0x432dd0={...config,'apiKey':_0x3c5548(0x1dd),'apiSecret':_0x3c5548(0x1dd)},config[_0x3c5548(0xb7)]&&(_0x432dd0[_0x3c5548(0xb7)]='************'));return _0x432dd0;}function getSettings(){const _0x3ba6ac=_0x320401;return dbSettings[_0x3ba6ac(0x1a3)](_0x3ba6ac(0x1c4))['value']();}function getSecure(){const _0x47a8a8=_0x320401;return dbSecure[_0x47a8a8(0x1a3)](_0x47a8a8(0x134))[_0x47a8a8(0x98)]()||{};}function updateTimeshift(_0x1eef9e){const _0x2f298e=_0x320401;let _0x555702=dbConfig['get'](_0x2f298e(0x190))['find']({'botID':botID})[_0x2f298e(0x98)]();_0x555702&&dbConfig['get'](_0x2f298e(0x190))[_0x2f298e(0x1cf)]({'botID':botID})['assign']({'timeshift':_0x1eef9e})[_0x2f298e(0x103)](),config[_0x2f298e(0x124)]=_0x1eef9e,proxyEmit(_0x2f298e(0x130),emittedConfiguration());}function updateOnepagemode(_0x59321f){const _0x399e7c=_0x320401;let _0x5256f4=dbConfig['get'](_0x399e7c(0x190))[_0x399e7c(0x1cf)]({'botID':botID})[_0x399e7c(0x98)]();_0x5256f4&&dbConfig[_0x399e7c(0x1a3)](_0x399e7c(0x190))[_0x399e7c(0x1cf)]({'botID':botID})[_0x399e7c(0x154)]({'onepagemode':_0x59321f})[_0x399e7c(0x103)](),config[_0x399e7c(0x15b)]=_0x59321f,proxyEmit(_0x399e7c(0x130),emittedConfiguration());}function updateMarketcapApi(_0x52bfa9){const _0x5c3091=_0x320401,_0xf6666f=_0x52bfa9?!![]:![];let _0x1b46d0=dbConfig['get'](_0x5c3091(0x190))['find']({'botID':botID})[_0x5c3091(0x98)]();_0x1b46d0&&dbConfig['get'](_0x5c3091(0x190))['find']({'botID':botID})[_0x5c3091(0x154)]({'marketcapApi':_0xf6666f})[_0x5c3091(0x103)](),config[_0x5c3091(0x208)]=_0xf6666f,getMarketCap(),proxyEmit(_0x5c3091(0x130),emittedConfiguration());}async function storeConfiguration(_0x515781){const _0x4b32bd=_0x320401;logger[_0x4b32bd(0x17c)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);setBlockTransactionDetection(!![]);let _0x276a7c=![],_0x8bcac4=![],_0xf77c0a=[];_0x515781[_0x4b32bd(0xa6)]['forEach'](_0x4905a4=>{const _0x354bd7=_0x4b32bd;if(!_0x4905a4[_0x354bd7(0xd2)]&&_0x4905a4['coin']!=_0x515781[_0x354bd7(0x19a)])_0xf77c0a[_0x354bd7(0x157)](_0x4905a4[_0x354bd7(0x1f1)]);}),_0xf77c0a['forEach'](_0x562d8f=>{const _0x3da739=_0x4b32bd,_0x40ae2f=currentCoins[_0x3da739(0x1cf)](_0x556add=>_0x556add[_0x3da739(0x1f1)]==_0x562d8f);!_0x40ae2f&&(_0x276a7c=!![]);}),currentCoins[_0x4b32bd(0x150)](_0x29768d=>{const _0xc8e386=_0x4b32bd;if(_0x29768d['coin']!=config[_0xc8e386(0x19a)]){const _0x140849=_0xf77c0a[_0xc8e386(0x1cf)](_0x39cf55=>_0x39cf55==_0x29768d['symbol']);!_0x140849&&(_0x276a7c=!![]);}}),_0x515781[_0x4b32bd(0xa6)][_0x4b32bd(0x150)](_0x19be17=>{const _0x48ff97=_0x4b32bd,_0x43ed17=config[_0x48ff97(0xa6)][_0x48ff97(0x1cf)](_0x35ab39=>_0x35ab39[_0x48ff97(0x1fa)]==_0x19be17[_0x48ff97(0x1fa)]);if(_0x43ed17&&_0x19be17[_0x48ff97(0x15d)]!=_0x43ed17[_0x48ff97(0x15d)])_0x8bcac4=!![];});let _0x5a0fce=dbConfig[_0x4b32bd(0x1a3)](_0x4b32bd(0x190))['find']({'botID':botID})[_0x4b32bd(0x98)]();_0x515781={..._0x515781,'apiKey':crypt[_0x4b32bd(0x94)](secure[_0x4b32bd(0x200)],_0x515781[_0x4b32bd(0x1e1)])['message'],'apiSecret':crypt[_0x4b32bd(0x94)](secure['privateKey'],_0x515781[_0x4b32bd(0x205)])['message']};_0x515781[_0x4b32bd(0xb7)]&&(_0x515781[_0x4b32bd(0xb7)]=crypt[_0x4b32bd(0x94)](secure[_0x4b32bd(0x200)],_0x515781[_0x4b32bd(0xb7)])['message']);let _0x10fc45=![];if(_0x5a0fce){_0x515781[_0x4b32bd(0x1e1)]=='************'?_0x515781[_0x4b32bd(0x1e1)]=config[_0x4b32bd(0x1e1)]:_0x10fc45=!![];_0x515781[_0x4b32bd(0x205)]==_0x4b32bd(0x1dd)?_0x515781[_0x4b32bd(0x205)]=config['apiSecret']:_0x10fc45=!![];if(_0x515781[_0x4b32bd(0xb7)]==_0x4b32bd(0x1dd))_0x515781[_0x4b32bd(0xb7)]=config[_0x4b32bd(0xb7)];else{if(_0x515781[_0x4b32bd(0xb7)])_0x10fc45=!![];}dbConfig[_0x4b32bd(0x1a3)](_0x4b32bd(0x190))['find']({'botID':botID})[_0x4b32bd(0x154)](_0x515781)[_0x4b32bd(0x103)]();}else dbConfig['get'](_0x4b32bd(0x190))['push'](_0x515781)[_0x4b32bd(0x103)](),_0x10fc45=!![],process['send']({'status':_0x4b32bd(0x201),'live':_0x4b32bd(0x171)},_0x14c5a3=>{});process[_0x4b32bd(0xab)]({'botname':_0x515781[_0x4b32bd(0x228)]},_0x58da57=>{}),config={..._0x515781},updateBotManager(),proxyEmit('configuration-stored'),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x10fc45)!_0x5a0fce?await reset(!![]):getBalances();else _0x276a7c||_0x8bcac4?await reset(![]):getBalances();setBlockTransactionDetection(![]);}async function storeHeadless(_0x1da106){const _0x59d6c1=_0x320401,_0x50d7ec={...config,'headless':_0x1da106['headless']};let _0x45d099=dbConfig[_0x59d6c1(0x1a3)](_0x59d6c1(0x190))[_0x59d6c1(0x1cf)]({'botID':botID})[_0x59d6c1(0x98)]();_0x45d099&&dbConfig[_0x59d6c1(0x1a3)](_0x59d6c1(0x190))[_0x59d6c1(0x1cf)]({'botID':botID})['assign'](_0x50d7ec)[_0x59d6c1(0x103)](),config={..._0x50d7ec},updateBotManager(),proxyEmit('configuration',emittedConfiguration());}async function storeFiat(_0x41ec63){const _0x4514db=_0x320401,_0x986299={...config,'fiat':_0x41ec63};let _0x1440b6=dbConfig[_0x4514db(0x1a3)]('bot')[_0x4514db(0x1cf)]({'botID':botID})[_0x4514db(0x98)]();_0x1440b6&&dbConfig[_0x4514db(0x1a3)](_0x4514db(0x190))[_0x4514db(0x1cf)]({'botID':botID})[_0x4514db(0x154)](_0x986299)['write'](),config={..._0x986299},proxyEmit(_0x4514db(0x130),emittedConfiguration());}function resetHistory(){const _0x1f4a6d=_0x320401;logger[_0x1f4a6d(0xfb)](_0x1f4a6d(0x15f));try{if(fs['existsSync'](path['join'](configpath,_0x1f4a6d(0x1cd)+botID+'-events.json')))fs[_0x1f4a6d(0x22d)](path[_0x1f4a6d(0x152)](configpath,_0x1f4a6d(0x1cd)+botID+'-events.json'));if(fs[_0x1f4a6d(0xaf)](path[_0x1f4a6d(0x152)](configpath,_0x1f4a6d(0x1cd)+botID+'-performance.json')))fs[_0x1f4a6d(0x22d)](path[_0x1f4a6d(0x152)](configpath,'bot-'+botID+'-performance.json'));if(fs[_0x1f4a6d(0xaf)](path[_0x1f4a6d(0x152)](configpath,_0x1f4a6d(0x1cd)+botID+_0x1f4a6d(0xc2))))fs[_0x1f4a6d(0x22d)](path[_0x1f4a6d(0x152)](configpath,'bot-'+botID+_0x1f4a6d(0xc2)));}catch(_0x56b1d1){if(_0x56b1d1)logger['full'](_0x1f4a6d(0x182),_0x56b1d1);}const _0x12a6fe=getDate();let _0x2ef438=[];currentCoins['forEach'](_0x2e938e=>{const _0x4532d7=_0x1f4a6d;_0x2ef438['push']({'coin':_0x2e938e[_0x4532d7(0x1fa)],'number':_0x2e938e[_0x4532d7(0xcf)],'price':_0x2e938e['last']});});let _0x14c719=dbConfig['get'](_0x1f4a6d(0x190))[_0x1f4a6d(0x1cf)]({'botID':botID})['value']();_0x14c719&&(dbConfig[_0x1f4a6d(0x1a3)](_0x1f4a6d(0x190))[_0x1f4a6d(0x1cf)]({'botID':botID})['assign']({'liquidity':[{'date':_0x12a6fe,'changes':_0x2ef438}]})[_0x1f4a6d(0x103)](),config[_0x1f4a6d(0x13c)]=[]),restartBot(!![]);}function noslash(_0x42f794){return _0x42f794['replace']('/','');}function updateHighestFee(_0x5a92eb){const _0x522ba6=_0x320401;if(_0x5a92eb['reverse']){let _0x38b0bb={'filled':_0x5a92eb['filled']*_0x5a92eb[_0x522ba6(0x1c8)],'amount':_0x5a92eb[_0x522ba6(0x1e0)]*_0x5a92eb[_0x522ba6(0x1c8)],'side':_0x5a92eb[_0x522ba6(0x1cc)]==_0x522ba6(0x214)?'buy':_0x522ba6(0x214),'price':0x1/_0x5a92eb[_0x522ba6(0x1c8)]};_0x5a92eb={..._0x5a92eb,..._0x38b0bb};}const _0x6a53c7=defaultFee*_0x5a92eb['filled']*_0x5a92eb['price'];lastFees[_0x522ba6(0x1f8)][_0x522ba6(0x121)]===0x14&&lastFees[_0x522ba6(0x1f8)][_0x522ba6(0x1fc)](),lastFees[_0x522ba6(0x1f8)][_0x522ba6(0x157)](_0x6a53c7),lastFees['highest']=Math[_0x522ba6(0xa3)](...lastFees[_0x522ba6(0x1f8)]);}async function updateNumberCoinsCcxt(_0x3f1036){const _0x2b60f8=_0x320401;logger['debug'](_0x2b60f8(0x174)+_0x3f1036['symbol']+_0x2b60f8(0xa7)+_0x3f1036['status']+_0x2b60f8(0xa7)+_0x3f1036[_0x2b60f8(0x1e0)]+_0x2b60f8(0xe0)+_0x3f1036['amount']+_0x2b60f8(0xa7)+_0x3f1036['id']);let _0x5c2c38=_0x3f1036[_0x2b60f8(0x181)],_0x5a9f9e=![];currentCoins[_0x2b60f8(0x150)](_0x4d0fae=>{const _0x17bf47=_0x2b60f8;_0x4d0fae[_0x17bf47(0x1f1)]==_0x3f1036[_0x17bf47(0x1f1)]&&(_0x5a9f9e=!![]);});if(!_0x5a9f9e)return;const _0x50a0a5=currentCoins[_0x2b60f8(0x1cf)](_0x12901c=>_0x12901c[_0x2b60f8(0x1f1)]==_0x3f1036[_0x2b60f8(0x1f1)]),_0x2b963d=_0x4239e0=>{const _0x3ffb51=_0x2b60f8;if(_0x50a0a5)_0x50a0a5[_0x3ffb51(0x1b9)]=_0x4239e0;};let _0x49ef1c=![];for(const _0x610e42 of lastOrders){const _0x5337cb=0x64,_0x2da834=0x1388;let _0x17a1b6=0x0;while(!_0x610e42[_0x2b60f8(0xcc)]&&_0x17a1b6*_0x5337cb<_0x2da834){_0x17a1b6++,await sleep(_0x5337cb);}if(_0x17a1b6>0x0)logger['debug'](_0x2b60f8(0x140)+_0x17a1b6*_0x5337cb/0x3e8+_0x2b60f8(0x100));_0x610e42[_0x2b60f8(0xcc)]==_0x3f1036['id']&&(_0x49ef1c=!![]);}if(_0x5c2c38=='open'){_0x2b963d(_0x2b60f8(0x1b8));if(_0x3f1036['filled']>0x0){if(_0x49ef1c){setBlockTransactionDetection(!![]),logger[_0x2b60f8(0x17c)](_0x2b60f8(0x1f5)+_0x3f1036['id']);const _0x144057=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x144057,setBlockTransactionDetection(![]);}else logger[_0x2b60f8(0x17c)]('1\x20-\x20partially\x20FILLED\x20unknown\x20order:\x20'+_0x3f1036['id']),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay);}}else{if(_0x5c2c38==_0x2b60f8(0x14b)){_0x2b963d(_0x2b60f8(0x14b));const _0x4fbcfe=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x4fbcfe,setBlockTransactionDetection(![]),await getOpenOrders(),handleOpenOrders();}else{if(_0x5c2c38==_0x2b60f8(0x175)){if(lastOrders)for(const _0x36984b of lastOrders){if(_0x36984b[_0x2b60f8(0xcc)]==_0x3f1036['id']){logger[_0x2b60f8(0x17c)](_0x2b60f8(0xd4)+_0x3f1036['id']),_0x49ef1c=!![];if(_0x36984b[_0x2b60f8(0x1e0)]==0x0){setBlockTransactionDetection(!![]),logger['debug'](_0x2b60f8(0x11a)+_0x3f1036['id']);if(_0x3f1036['average'])_0x36984b[_0x2b60f8(0x1c8)]=_0x3f1036[_0x2b60f8(0x1ab)];else{if(_0x3f1036['price'])_0x36984b[_0x2b60f8(0x1c8)]=_0x3f1036['price'];else{}}_0x36984b[_0x2b60f8(0x1e0)]=_0x3f1036[_0x2b60f8(0x1e0)],updateHighestFee(_0x36984b),_0x2b963d(_0x2b60f8(0x1e0)),await validateOrders();if(lockOrders==ORDERS['LOCKED']){const _0x51a06b=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x51a06b,setBlockTransactionDetection(![]);}_0x36984b[_0x2b60f8(0x186)]={'currency':_0x3f1036[_0x2b60f8(0x186)]?_0x3f1036[_0x2b60f8(0x186)][_0x2b60f8(0xbb)]:null,'cost':_0x3f1036[_0x2b60f8(0x186)]?_0x3f1036[_0x2b60f8(0x186)]['cost']:0x0},await updateCoinResults(_0x36984b);}}}!_0x49ef1c&&(logger[_0x2b60f8(0x17c)](_0x2b60f8(0x136)+_0x3f1036['id']),_0x2b963d('filled'),setBlockTransactionDetection(![]),await detectLiquidityChange(balanceUpdateDelay),await updateOpenOrders(),handleOpenOrders());}}}if(lastBalances){let _0x54f325=JSON[_0x2b60f8(0x70)](lastBalances[_0x2b60f8(0xa6)]);const _0x1b203a=_0x54f325[_0x2b60f8(0x1cf)](_0xcef6d7=>_0xcef6d7[_0x2b60f8(0x1f1)]==_0x3f1036[_0x2b60f8(0x1f1)]);if(_0x1b203a){if(_0x5c2c38=='open')_0x1b203a[_0x2b60f8(0x1b9)]=_0x1b203a[_0x2b60f8(0x1b9)]=='filled'?_0x2b60f8(0x1e0):'open';else{if(_0x5c2c38==_0x2b60f8(0x14b))_0x1b203a[_0x2b60f8(0x1b9)]=_0x1b203a[_0x2b60f8(0x1b9)]==_0x2b60f8(0x1e0)?_0x2b60f8(0x1e0):_0x2b60f8(0x14b);else _0x5c2c38=='closed'&&(_0x1b203a['orderstatus']=_0x2b60f8(0x1e0));}}lastBalances={...lastBalances,'portfolio':JSON[_0x2b60f8(0x162)](_0x54f325)},proxyEmit(_0x2b60f8(0x104),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x86f646=_0x320401;await getOpenOrders();let _0x418849=![];currentCoins[_0x86f646(0x150)](_0xfd52be=>{const _0x479d37=_0x86f646;_0x418849=allOpenOrders['find'](_0x15f1b4=>_0x15f1b4['symbol']==_0xfd52be[_0x479d37(0x1f1)]),_0xfd52be[_0x479d37(0x1b9)]=_0x418849?_0x479d37(0x1b8):'none';});}async function getCoins(_0x2cd471=0x0,_0x2d51b0=!![],_0x191345=config[_0x320401(0x19a)]){const _0x9357c1=_0x320401;let _0xa1ee0f,_0x59eaff=[],_0x5e1982=[],_0x3c10a7=[];if(_0x2cd471)await sleep(_0x2cd471);if(botPaused)return[currentCoins,currentCoinsAll];try{_0xa1ee0f=await exchange['fetchBalance'](),mybalances=_0xa1ee0f[_0x9357c1(0x11c)];for(const [_0x2d59a0,_0xd30a50]of Object['entries'](mybalances)){_0x3c10a7[_0x9357c1(0x157)](_0x2d59a0);}config[_0x9357c1(0xa6)][_0x9357c1(0x150)](_0x148f08=>{const _0x1cdeb9=_0x9357c1;!_0x3c10a7[_0x1cdeb9(0xde)](_0x148f08[_0x1cdeb9(0x1fa)])&&(mybalances[_0x148f08[_0x1cdeb9(0x1fa)]]=0x0);});if(_0x191345=='')for(const [_0x4edecb,_0x3cb8e3]of Object[_0x9357c1(0x10b)](mybalances)){_0x3cb8e3!=0x0&&_0x59eaff['push']({'coin':_0x4edecb});}else for(const [_0x2104ad,_0x24c747]of Object['entries'](mybalances)){const _0x4e796e=config['portfolio']['find'](_0x38f807=>_0x38f807['coin']==_0x2104ad),_0xbf78c3=_0x2104ad+'/'+_0x191345,_0xd424c6=_0x191345+'/'+_0x2104ad,_0x7a4d71=currentCoins[_0x9357c1(0x1cf)](_0x145259=>_0x145259[_0x9357c1(0x1fa)]==_0x2104ad);if((_0x24c747!=0x0||_0x4e796e)&&(allSymbols['includes'](_0xbf78c3)||_0x2104ad==_0x191345))_0x7a4d71?_0x59eaff[_0x9357c1(0x157)]({..._0x7a4d71,'number':Math['max'](_0x24c747+(_0x4e796e&&_0x4e796e['offset']||0x0),0x0)}):_0x59eaff['push']({'coin':_0x2104ad,'symbol':_0xbf78c3,'reverse':![],'number':Math[_0x9357c1(0xa3)](_0x24c747+(_0x4e796e&&_0x4e796e[_0x9357c1(0x15d)]||0x0),0x0),'orderstatus':_0x9357c1(0x196)});else{if((_0x24c747!=0x0||_0x4e796e)&&allSymbols[_0x9357c1(0xde)](_0xd424c6))_0x7a4d71?_0x59eaff[_0x9357c1(0x157)]({..._0x7a4d71,'number':Math[_0x9357c1(0xa3)](_0x24c747+(_0x4e796e&&_0x4e796e[_0x9357c1(0x15d)]||0x0),0x0)}):_0x59eaff[_0x9357c1(0x157)]({'coin':_0x2104ad,'symbol':_0xd424c6,'reverse':!![],'number':Math['max'](_0x24c747+(_0x4e796e&&_0x4e796e[_0x9357c1(0x15d)]||0x0),0x0),'orderstatus':_0x9357c1(0x196)});else _0x4e796e&&_0x59eaff[_0x9357c1(0x157)]({'coin':_0x4e796e['coin'],'symbol':_0x4e796e[_0x9357c1(0x1f1)],'reverse':_0x4e796e[_0x9357c1(0x73)],'number':0x0,'orderstatus':'none'});}}}catch(_0x13666c){if(!_0x2d51b0)handleErrorNoStop(_0x13666c,'getCoins()');else await handleError(_0x13666c,'getCoins()');}return _0x59eaff['sort']((_0x5578b2,_0x3c529f)=>_0x5578b2['delta']<_0x3c529f['delta']?0x1:_0x3c529f[_0x9357c1(0x129)]<_0x5578b2[_0x9357c1(0x129)]?-0x1:0x0),_0x5e1982=cloneDeep(_0x59eaff),_0x59eaff=_0x59eaff['filter'](_0x7cc7d8=>{const _0x22a574=_0x9357c1,_0x8ced36=config[_0x22a574(0xa6)][_0x22a574(0x1cf)](_0x150677=>_0x150677['coin']==_0x7cc7d8[_0x22a574(0x1fa)]);return _0x8ced36&&!_0x8ced36[_0x22a574(0xd2)];}),[_0x59eaff,_0x5e1982];}async function getCoinNumber(_0x4223e8){const _0x4ccf58=_0x320401;let _0x649cbd;try{const _0x43a46c=await exchange['fetchBalance']();_0x649cbd=_0x43a46c['total'][_0x4223e8];}catch(_0x257012){await handleError(_0x257012,_0x4ccf58(0x1b6));}return _0x649cbd;}async function getOpenOrders(){const _0x115a7a=_0x320401;let _0x515e9c;allOpenOrders=[];try{for(const _0x4f086e of config[_0x115a7a(0xa6)]){!_0x4f086e[_0x115a7a(0xd2)]&&_0x4f086e[_0x115a7a(0x1fa)]!=config[_0x115a7a(0x19a)]&&(_0x515e9c=await exchange[_0x115a7a(0x144)](_0x4f086e[_0x115a7a(0x1f1)]),_0x515e9c[_0x115a7a(0x121)]>0x0&&allOpenOrders['push'](_0x515e9c[0x0]));}}catch(_0x293152){await handleError(_0x293152,_0x115a7a(0x1d5));}}async function handleOpenOrders(_0x2b921b=0x0){const _0x2db320=_0x320401;allOpenOrders[_0x2db320(0x121)]==0x0&&lockOrders==ORDERS[_0x2db320(0x17a)]&&allOrdersPlaced&&(_0x2b921b==0x0?(logger[_0x2db320(0x17c)]('1\x20-\x20Handle\x20open\x20orders'),_0x2b921b++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x2db320(0x17c)]('2\x20-\x20Handled\x20open\x20orders'),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x234a89){const _0x563f66=_0x320401,_0x5052f1=ccxt[_0x563f66(0xef)][_0x234a89['exchange']['toLowerCase']()],_0x257e4a=new _0x5052f1({'apiKey':_0x234a89[_0x563f66(0x1e1)],'secret':_0x234a89['apiSecret'],'options':{'defaultType':_0x563f66(0xf1)}});if(_0x234a89[_0x563f66(0xb7)])_0x257e4a['password']=_0x234a89['apiPassword'];try{await _0x257e4a['fetchBalance']();}catch(_0x12ecb3){logger['debug'](_0x563f66(0x19e)+_0x12ecb3[_0x563f66(0xd0)]());throw _0x12ecb3;}}function cloneDeep(_0x2f1b3d){const _0x5cccd9=_0x320401;return JSON[_0x5cccd9(0x70)](JSON[_0x5cccd9(0x162)](_0x2f1b3d));}async function getPortfolio(_0x36d7de){const _0x170327=_0x320401;let _0x50737d=[],_0xbe2824=[],_0x3c339e=[],_0x1b7bce;_0x36d7de[_0x170327(0x1e1)]=crypt['decrypt'](secure[_0x170327(0x200)],_0x36d7de[_0x170327(0x1e1)])[_0x170327(0x1ee)],_0x36d7de['apiSecret']=crypt[_0x170327(0x94)](secure[_0x170327(0x200)],_0x36d7de[_0x170327(0x205)])[_0x170327(0x1ee)],_0x36d7de[_0x170327(0xb7)]=crypt[_0x170327(0x94)](secure['privateKey'],_0x36d7de[_0x170327(0xb7)])[_0x170327(0x1ee)];if(_0x36d7de[_0x170327(0x1e1)]!==_0x170327(0x1dd)||_0x36d7de['apiSecret']!=='************'||_0x36d7de[_0x170327(0xb7)]&&_0x36d7de[_0x170327(0xb7)]!==_0x170327(0x1dd)){if(config[_0x170327(0x203)]){if(_0x36d7de['apiKey']==_0x170327(0x1dd))_0x36d7de['apiKey']=config[_0x170327(0x1e1)];if(_0x36d7de[_0x170327(0x205)]==_0x170327(0x1dd))_0x36d7de['apiSecret']=config['apiSecret'];if(_0x36d7de[_0x170327(0xb7)]==_0x170327(0x1dd))_0x36d7de[_0x170327(0xb7)]=config[_0x170327(0xb7)];}try{await testAPI(_0x36d7de);}catch(_0x43e3c5){if(_0x43e3c5[_0x170327(0xd0)]()[_0x170327(0xde)]('AuthenticationError')){logHistory(_0x170327(0x1ec),_0x170327(0xf5)),proxyEmit(_0x170327(0x6c),![]);return;}else{logHistory(_0x170327(0x1ec),_0x170327(0xc7)),logger[_0x170327(0x17c)](_0x170327(0x1b7),_0x43e3c5),proxyEmit('portfolio1',![]);return;}}exchange?updateExchange(_0x36d7de[_0x170327(0x1e1)],_0x36d7de['apiSecret'],_0x36d7de['apiPassword']):await initExchange(_0x36d7de[_0x170327(0x203)],_0x36d7de[_0x170327(0x1e1)],_0x36d7de[_0x170327(0x205)],_0x36d7de[_0x170327(0xb7)]);await loadSymbols();const _0x596a43=await getCoins(0x0,![],_0x36d7de['basecoin']);_0x3c339e=cloneDeep(_0x596a43[0x1]);}else{const _0x4a9173=await getCoins();_0x3c339e=cloneDeep(_0x4a9173[0x1]);}if(_0x36d7de[_0x170327(0x19a)]=='')proxyEmit(_0x170327(0x6c),!![]),proxyEmit(_0x170327(0x1bd),_0x3c339e);else{_0x3c339e[_0x170327(0x150)](_0x2c1fb2=>{const _0x1375ea=_0x170327;if(_0x2c1fb2[_0x1375ea(0x1fa)]!=_0x36d7de[_0x1375ea(0x19a)]&&allSymbols[_0x1375ea(0xde)](_0x2c1fb2['symbol']))_0x50737d['push'](_0x2c1fb2[_0x1375ea(0x1f1)]);});if(_0x50737d['length']==0x0)logHistory(_0x170327(0x1ec),_0x170327(0x22b));else{try{_0xbe2824=await getTickers(_0x50737d);}catch(_0x3cfa4a){logHistory(_0x170327(0x1ec),_0x170327(0xc7)),logger[_0x170327(0x17c)](_0x170327(0xf7),_0x3cfa4a),proxyEmit(_0x170327(0x6c),![]);return;}_0x3c339e[_0x170327(0x150)](_0x3007d2=>{const _0x190403=_0x170327;_0x3007d2[_0x190403(0x1fa)]!=_0x36d7de[_0x190403(0x19a)]?_0xbe2824[_0x3007d2[_0x190403(0x1f1)]]?_0x1b7bce=_0x3007d2[_0x190403(0x73)]?0x1/_0xbe2824[_0x3007d2['symbol']][_0x190403(0xfa)]:_0xbe2824[_0x3007d2[_0x190403(0x1f1)]][_0x190403(0xfa)]:_0x1b7bce=0x0:_0x1b7bce=0x1,_0x3007d2[_0x190403(0x1c8)]=formatResult(_0x1b7bce,0x8);}),await getMarketCap(_0x3c339e),proxyEmit('portfolio1',!![]),proxyEmit('portfolio2',_0x3c339e);}}}function truncateTradeAmount(_0x1ef3f6,_0x57a228){const _0x502d4e=_0x320401;let _0x601863=0x0;try{_0x601863=exchange[_0x502d4e(0x1f9)](_0x1ef3f6,_0x57a228);}catch(_0x1b7901){}return _0x601863;}function checkMinimums(_0x18dea7){const _0x575317=_0x320401;let _0x4a83a9=!![];const _0x53aa48=!_0x18dea7[_0x575317(0x73)]?markets[_0x18dea7['symbol']][_0x575317(0x84)][_0x575317(0xd5)][_0x575317(0x1de)]:markets[_0x18dea7[_0x575317(0x1f1)]][_0x575317(0x84)]['cost'][_0x575317(0x1de)],_0x4465c1=!_0x18dea7[_0x575317(0x73)]?markets[_0x18dea7['symbol']][_0x575317(0x84)][_0x575317(0xe9)][_0x575317(0x1de)]:markets[_0x18dea7[_0x575317(0x1f1)]][_0x575317(0x84)][_0x575317(0xd5)][_0x575317(0x1de)],_0x1ae93c=truncateTradeAmount(_0x18dea7[_0x575317(0x1f1)],_0x18dea7[_0x575317(0x1c6)]);_0x18dea7[_0x575317(0x1c6)]=_0x1ae93c;if(Math['abs'](_0x1ae93c)<_0x53aa48)_0x4a83a9=![];if(Math[_0x575317(0x17f)](_0x1ae93c)*_0x18dea7['last']<_0x4465c1)_0x4a83a9=![];if(_0x18dea7[_0x575317(0x1cc)]==_0x575317(0x214)){let _0x3e2881=config[_0x575317(0xa6)][_0x575317(0x1cf)](_0x40436d=>_0x40436d[_0x575317(0x1fa)]==_0x18dea7['coin']);if(_0x3e2881[_0x575317(0x15d)]>0x0){if(Math[_0x575317(0x17f)](_0x1ae93c)>_0x18dea7['number']-_0x3e2881[_0x575317(0x15d)])_0x4a83a9=![];}else{if(Math[_0x575317(0x17f)](_0x1ae93c)>_0x18dea7[_0x575317(0xcf)])_0x4a83a9=![];}}if(_0x18dea7[_0x575317(0x1cc)]==_0x575317(0xa5)){let _0x66e4f6=config[_0x575317(0xa6)][_0x575317(0x1cf)](_0x328f2d=>_0x328f2d[_0x575317(0x1fa)]==config[_0x575317(0x19a)]),_0x6c7471=currentCoins[_0x575317(0x1cf)](_0x35b0c8=>_0x35b0c8['coin']==config[_0x575317(0x19a)]);if(_0x66e4f6[_0x575317(0x15d)]>0x0){if(Math[_0x575317(0x17f)](_0x1ae93c)*_0x18dea7[_0x575317(0xfa)]>_0x6c7471[_0x575317(0xcf)]-_0x66e4f6[_0x575317(0x15d)])_0x4a83a9=![];}else{if(Math[_0x575317(0x17f)](_0x1ae93c)*_0x18dea7[_0x575317(0xfa)]>_0x6c7471[_0x575317(0xcf)])_0x4a83a9=![];}}return _0x4a83a9;}async function getBalances(_0x69a62a=!![]){const _0xd23caa=_0x320401;let _0x443b55=0x0,_0x28d6dc;const _0x59083f=config[_0xd23caa(0x151)];if(config[_0xd23caa(0x1ff)]&&config[_0xd23caa(0x1e2)]<0x0)await validate24hChanges();currentCoins['forEach'](_0x52ba74=>{const _0x136864=_0xd23caa;if(_0x52ba74[_0x136864(0x1fa)]!=config['basecoin']){let _0x1cde89=gTicker[noslash(_0x52ba74[_0x136864(0x1f1)])];_0x28d6dc=_0x52ba74[_0x136864(0x73)]?0x1/_0x1cde89:_0x1cde89;}else _0x28d6dc=0x1;let _0xd9424b=_0x52ba74[_0x136864(0xcf)]*_0x28d6dc;_0x443b55+=_0xd9424b,_0x52ba74[_0x136864(0xfa)]=formatResult(Number(_0x28d6dc),0x8),_0x52ba74[_0x136864(0x98)]=_0xd9424b;}),currentCoins['forEach'](_0x9dbfaa=>{const _0x2fefd1=_0xd23caa;let _0x40bc42=config[_0x2fefd1(0xa6)][_0x2fefd1(0x1cf)](_0x37baa1=>_0x37baa1[_0x2fefd1(0x1fa)]==_0x9dbfaa['coin']),_0x542ecf=Number(_0x40bc42[_0x2fefd1(0xb6)]),_0x46754d=_0x9dbfaa[_0x2fefd1(0x98)]/_0x443b55*0x64,_0x1547b0=_0x542ecf*_0x443b55/0x64/_0x9dbfaa[_0x2fefd1(0xfa)]-_0x9dbfaa[_0x2fefd1(0xcf)];_0x9dbfaa[_0x2fefd1(0xb6)]=formatResult(_0x46754d,0x3),_0x9dbfaa[_0x2fefd1(0x127)]=formatResult(_0x542ecf,0x3),_0x9dbfaa['trade']=formatResult(_0x1547b0,0x8),_0x9dbfaa['side']='',_0x9dbfaa['valid']=![];if(_0x9dbfaa['coin']!=config['basecoin']){if(_0x9dbfaa[_0x2fefd1(0xb6)]>_0x542ecf)_0x9dbfaa[_0x2fefd1(0x1cc)]=_0x2fefd1(0x214),_0x9dbfaa[_0x2fefd1(0x80)]=checkMinimums(_0x9dbfaa);else _0x9dbfaa[_0x2fefd1(0xb6)]<_0x542ecf&&(_0x9dbfaa[_0x2fefd1(0x1cc)]=_0x2fefd1(0xa5),_0x9dbfaa[_0x2fefd1(0x80)]=checkMinimums(_0x9dbfaa));}_0x9dbfaa['delta']=_0x9dbfaa['distribution']/_0x9dbfaa['target']-0x1;if(_0x9dbfaa[_0x2fefd1(0x1b9)]=='filled'||_0x9dbfaa['orderstatus']==_0x2fefd1(0x14b))_0x9dbfaa[_0x2fefd1(0x1b9)]='none';}),currentCoins[_0xd23caa(0xd8)]((_0x3ab2d3,_0x291e27)=>_0x3ab2d3[_0xd23caa(0x129)]<_0x291e27[_0xd23caa(0x129)]?0x1:_0x291e27[_0xd23caa(0x129)]<_0x3ab2d3['delta']?-0x1:0x0);const _0x2c88ef=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x2c88ef['eur'],'usd':_0x2c88ef[_0xd23caa(0xed)],'portfolio':JSON[_0xd23caa(0x162)](currentCoins),'threshold':_0x59083f},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x69a62a){if(config[_0xd23caa(0x1ff)])headlessMode({'portfolio':currentCoins,'threshold':_0x59083f});else{if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x59083f});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x5b1bab=getNormalizedPerformance();getStartingBalances(_0x5b1bab),emitPerformance(_0x5b1bab);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1400d3=_0x320401;if(!lastBalances)return;let _0x1b2209=[],_0x210d6e,_0x3887a5=JSON[_0x1400d3(0x70)](lastBalances[_0x1400d3(0xa6)]);_0x3887a5[_0x1400d3(0xd8)]((_0x46c1db,_0xaba9af)=>_0x46c1db[_0x1400d3(0x1fa)]>_0xaba9af[_0x1400d3(0x1fa)]?0x1:_0xaba9af[_0x1400d3(0x1fa)]>_0x46c1db[_0x1400d3(0x1fa)]?-0x1:0x0),_0x3887a5['forEach'](_0x3d2b19=>{const _0x2c50a7=_0x1400d3;let _0x1e11f2={'coin':_0x3d2b19['coin'],'number':_0x3d2b19[_0x2c50a7(0xcf)],'price':_0x3d2b19['last']};_0x1b2209['push'](_0x1e11f2);});const _0x4163db=await getFiat();_0x210d6e={'date':lastBalances['time'][_0x1400d3(0x97)]('\x20')[0x0],'eur':_0x4163db[_0x1400d3(0x1e9)],'usd':_0x4163db[_0x1400d3(0xed)],'coins':_0x1b2209};let _0x836aa9=dbPerformance[_0x1400d3(0x1a3)]('data')['find']({'date':_0x210d6e[_0x1400d3(0x1be)]})[_0x1400d3(0x98)]();_0x836aa9?_0x210d6e[_0x1400d3(0x1be)]!=config[_0x1400d3(0xea)]&&dbPerformance[_0x1400d3(0x1a3)](_0x1400d3(0xe3))[_0x1400d3(0x1cf)]({'date':_0x210d6e[_0x1400d3(0x1be)]})[_0x1400d3(0x154)](_0x210d6e)['write']():dbPerformance[_0x1400d3(0x1a3)](_0x1400d3(0xe3))[_0x1400d3(0x157)](_0x210d6e)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x3fd821=_0x320401;let _0x1e2336=[];if(dbPerformance[_0x3fd821(0x147)]('data')['value']()){let _0x3af92c=dbPerformance[_0x3fd821(0x1a3)](_0x3fd821(0xe3))['cloneDeep']()[_0x3fd821(0x12a)](_0x1c10dc=>{const _0x3bf5e6=_0x3fd821;if(_0x1c10dc[_0x3bf5e6(0x16c)][_0x3bf5e6(0x121)]==0x0)return![];else return!![];})['sortBy'](_0x3fd821(0x1be))['value'](),_0x44f214=[...config[_0x3fd821(0x13c)]];_0x44f214['sort']((_0x5ce61a,_0x4b51b5)=>_0x5ce61a[_0x3fd821(0x1be)]>_0x4b51b5[_0x3fd821(0x1be)]?-0x1:_0x4b51b5['date']>_0x5ce61a['date']?0x1:0x0);let _0x420662=0x1,_0xc5f3a=[],_0x440b7b=0x0;_0x3af92c[_0x3fd821(0xf0)]()[_0x3fd821(0x73)]()[_0x3fd821(0x150)]((_0x2ebe1b,_0x53f687)=>{const _0x4405c5=_0x3fd821;if(_0x44f214[_0x440b7b]){if(_0x3af92c[_0x3af92c[_0x4405c5(0x121)]-_0x53f687]&&_0x44f214[_0x440b7b]['date']==_0x3af92c[_0x3af92c['length']-_0x53f687][_0x4405c5(0x1be)]){if(_0x53f687<_0x3af92c['length']){let _0x125c1e=0x0,_0x2ee3f5=0x0;_0x3af92c[_0x3af92c['length']-_0x53f687]['coins'][_0x4405c5(0x150)](_0x44a7a2=>{const _0x5cb968=_0x4405c5;_0x2ee3f5+=_0x44a7a2['number']*_0x44a7a2[_0x5cb968(0x1c8)];}),_0x44f214[_0x440b7b][_0x4405c5(0x1b4)]['forEach'](_0x5a4071=>{const _0x1d0408=_0x4405c5;_0x125c1e+=_0x5a4071[_0x1d0408(0xcf)]*_0x5a4071[_0x1d0408(0x1c8)];}),_0x420662*=_0x125c1e/(_0x2ee3f5-_0x125c1e)+0x1;}_0x440b7b++;}}let _0xad2eb6=0x0;_0x2ebe1b[_0x4405c5(0x16c)][_0x4405c5(0x150)](_0x4f1a4d=>{const _0x5ecaa9=_0x4405c5;_0xad2eb6+=_0x4f1a4d[_0x5ecaa9(0xcf)]*_0x4f1a4d[_0x5ecaa9(0x1c8)];}),_0xc5f3a[_0x3af92c[_0x4405c5(0x121)]-_0x53f687-0x1]=_0xad2eb6*(_0x420662-0x1);});let _0x190556=[];_0x44f214=[...config[_0x3fd821(0x13c)]]||[];let _0x3f37a5=0x0;_0x440b7b=0x0,_0x3af92c[_0x3fd821(0x150)]((_0x592827,_0x3d7172)=>{const _0x2ad9bd=_0x3fd821;if(_0x44f214[_0x440b7b]){const _0x4cf13e=fns[_0x2ad9bd(0x70)](_0x44f214[_0x440b7b]['date'],_0x2ad9bd(0x155),new Date()),_0x5e5df9=fns[_0x2ad9bd(0x70)](_0x592827[_0x2ad9bd(0x1be)],_0x2ad9bd(0x155),new Date());if(fns[_0x2ad9bd(0x96)](_0x4cf13e,_0x5e5df9)){let _0x3e6eb6=0x0;_0x44f214[_0x440b7b][_0x2ad9bd(0x1b4)]['forEach'](_0xec67c2=>{const _0x46c0fb=_0x2ad9bd;!_0x190556[_0xec67c2['coin']]?_0x190556[_0xec67c2['coin']]=_0xec67c2[_0x46c0fb(0xcf)]:(_0x3e6eb6=_0x190556[_0xec67c2['coin']],_0x190556[_0xec67c2[_0x46c0fb(0x1fa)]]+=_0xec67c2[_0x46c0fb(0xcf)]);const _0x233ed7=_0x592827[_0x46c0fb(0x16c)]['find'](_0x1f7e7d=>_0x1f7e7d[_0x46c0fb(0x1fa)]==_0xec67c2['coin']);(!_0x233ed7||_0x233ed7[_0x46c0fb(0xcf)]==0x0)&&(_0x3f37a5+=(-_0xec67c2['number']-_0x3e6eb6)*_0xec67c2['price']);}),_0x440b7b++;}}_0x592827[_0x2ad9bd(0x16c)][_0x2ad9bd(0x150)]((_0xfeb3bd,_0x366d03)=>{const _0x285bcc=_0x2ad9bd;_0x190556[_0xfeb3bd['coin']]&&(_0xfeb3bd['initial']=_0x190556[_0xfeb3bd[_0x285bcc(0x1fa)]]);}),_0x1e2336['push']({'date':_0x592827[_0x2ad9bd(0x1be)],'eur':_0x592827[_0x2ad9bd(0x1e9)],'usd':_0x592827[_0x2ad9bd(0xed)],'offset':_0xc5f3a[_0x3d7172],'netoffset':_0x3f37a5,'coins':_0x592827['coins']});});}return _0x1e2336;}function emitPerformance(_0x36a38b){const _0xad668d=_0x320401;_0x36a38b[_0xad668d(0x121)]!==0x0?(proxyEmit(_0xad668d(0xe7),_0x36a38b),lastPerformanceEmitted=getDate()):proxyEmit(_0xad668d(0xe7),[]);}function getPerf(_0x51ee23,_0x118dba){const _0x3e21b7=_0x320401;let _0x56026d=0x0,_0x3176b0=0x0,_0x4d5ecd=0x0;_0x51ee23[_0x3e21b7(0x16c)]['forEach'](_0x57fd69=>{const _0x2c4260=_0x3e21b7;_0x56026d+=_0x57fd69[_0x2c4260(0xcf)]*_0x57fd69['price'];});_0x118dba&&(_0x56026d+=_0x51ee23[_0x3e21b7(0x15d)]);if(config[_0x3e21b7(0x19a)]===_0x3e21b7(0x1c5)||config[_0x3e21b7(0x19a)]===_0x3e21b7(0xa8)||config[_0x3e21b7(0x19a)]===_0x3e21b7(0x116))_0x3176b0=_0x56026d*_0x51ee23[_0x3e21b7(0x1e9)],_0x4d5ecd=_0x56026d*_0x51ee23[_0x3e21b7(0xed)];else{if(usdBasecoins[_0x3e21b7(0xde)](config[_0x3e21b7(0x19a)]))_0x3176b0=_0x56026d*_0x51ee23['eur']/_0x51ee23[_0x3e21b7(0xed)],_0x4d5ecd=_0x56026d;else config['basecoin']===_0x3e21b7(0x79)&&(_0x3176b0=_0x56026d,_0x4d5ecd=_0x56026d*_0x51ee23[_0x3e21b7(0xed)]/_0x51ee23[_0x3e21b7(0x1e9)]);}return[_0x56026d,_0x3176b0,_0x4d5ecd];}function getKPIs(_0x103b19,_0x1c2ffa='EUR'){const _0x5c4e16=_0x320401,_0x4558ba=config[_0x5c4e16(0x19a)],_0x17d9ec=lastBalances,_0x46dc1f=currentCoins,_0x288d62=getNormalizedPerformance(),_0x1504c8=_0x103b19===_0x5c4e16(0x19a)?_0x4558ba:_0x103b19===_0x5c4e16(0x1e6)||_0x103b19==='net-fiat'?_0x1c2ffa:'Net\x20'+_0x4558ba,_0x201874=_0x103b19===_0x5c4e16(0x21f)?_0x5c4e16(0xce):_0x103b19==='net-fiat'?_0x5c4e16(0xce):_0x1504c8+_0x5c4e16(0x10c),_0x1bae35=_0x103b19===_0x5c4e16(0x21f)||_0x103b19===_0x5c4e16(0x95)?_0x5c4e16(0xce):_0x1504c8+_0x5c4e16(0x21a);let _0x2d8cb9=0x0;_0x46dc1f['forEach'](_0x2f119a=>{const _0x283a4f=_0x5c4e16;_0x2d8cb9+=_0x2f119a[_0x283a4f(0xcf)]*_0x2f119a[_0x283a4f(0xfa)];});if(_0x103b19==='fiat'||_0x103b19==='net-fiat'){if(_0x4558ba===_0x5c4e16(0x1c5)||_0x4558ba==='ETH'||_0x4558ba===_0x5c4e16(0x116))_0x2d8cb9=_0x2d8cb9*(_0x1c2ffa==='EUR'?_0x17d9ec[_0x5c4e16(0x1e9)]:_0x17d9ec['usd']);else{if(usdBasecoins[_0x5c4e16(0xde)](_0x4558ba))_0x2d8cb9=_0x2d8cb9*(_0x1c2ffa===_0x5c4e16(0x79)?_0x17d9ec[_0x5c4e16(0x1e9)]/_0x17d9ec[_0x5c4e16(0xed)]:0x1);else _0x4558ba===_0x5c4e16(0x79)&&(_0x2d8cb9=_0x2d8cb9*(_0x1c2ffa==='EUR'?0x1:_0x17d9ec[_0x5c4e16(0xed)]/_0x17d9ec[_0x5c4e16(0x1e9)]));}}let _0x140788;if(_0x2d8cb9!==0x0){if(_0x103b19===_0x5c4e16(0x19a))_0x140788=(_0x2d8cb9/startingBalances[_0x5c4e16(0x19a)]-0x1)*0x64;else{if(_0x1c2ffa==='EUR')_0x140788=(_0x2d8cb9/startingBalances[_0x5c4e16(0x1e9)]-0x1)*0x64;else _0x140788=(_0x2d8cb9/startingBalances[_0x5c4e16(0xed)]-0x1)*0x64;}let _0x1c08c0=0x0;if(startingBalances['coins'])_0x46dc1f[_0x5c4e16(0x150)](_0x6036a5=>{const _0x437329=_0x5c4e16;let _0x519c9c=startingBalances[_0x437329(0x16c)][_0x437329(0x1cf)](_0x403ec9=>_0x403ec9['coin']===_0x6036a5[_0x437329(0x1fa)]);if(_0x519c9c&&_0x519c9c[_0x437329(0x1fa)]&&_0x6036a5[_0x437329(0xcf)]!==0x0)_0x1c08c0+=_0x519c9c['number']*_0x6036a5[_0x437329(0xfa)];});let _0x4611eb=0x0;if(_0x288d62[_0x5c4e16(0x121)]!==0x0){let _0x1bb990=_0x288d62[_0x288d62[_0x5c4e16(0x121)]-0x1];_0x4611eb=_0x1bb990[_0x5c4e16(0x13f)];}_0x1c08c0-=_0x4611eb;_0x103b19===_0x5c4e16(0x21f)&&(_0x140788=(_0x2d8cb9-_0x1c08c0)/startingBalances['basecoin']*0x64,_0x2d8cb9=_0x2d8cb9-_0x1c08c0);if(_0x103b19===_0x5c4e16(0x95)){let _0x1ab85c=_0x1c2ffa===_0x5c4e16(0x79)?startingBalances[_0x5c4e16(0x1e9)]:startingBalances[_0x5c4e16(0xed)];if(_0x4558ba===_0x5c4e16(0x1c5)||_0x4558ba===_0x5c4e16(0xa8)||_0x4558ba===_0x5c4e16(0x116))_0x1c08c0=_0x1c2ffa===_0x5c4e16(0x79)?_0x1c08c0*_0x17d9ec['eur']:_0x1c08c0*_0x17d9ec[_0x5c4e16(0xed)];else{if(usdBasecoins[_0x5c4e16(0xde)](_0x4558ba))_0x1c08c0=_0x1c2ffa===_0x5c4e16(0x79)?_0x1c08c0*_0x17d9ec[_0x5c4e16(0x1e9)]/_0x17d9ec[_0x5c4e16(0xed)]:_0x1c08c0;else _0x4558ba===_0x5c4e16(0x79)&&(_0x1c08c0=_0x1c2ffa===_0x5c4e16(0x79)?_0x1c08c0:_0x1c08c0*_0x17d9ec[_0x5c4e16(0xed)]/_0x17d9ec['eur']);}_0x140788=(_0x2d8cb9-_0x1c08c0)/_0x1ab85c*0x64,_0x2d8cb9=_0x2d8cb9-_0x1c08c0;}if(_0x140788){if(_0x140788<0x64)_0x140788=_0x140788['toFixed'](0x2);else{if(_0x140788<0x3e8)_0x140788=_0x140788['toFixed'](0x1);else _0x140788=_0x140788['toFixed'](0x0);}}else _0x140788=Number('0')[_0x5c4e16(0xa0)](0x2);if(_0x2d8cb9){if(Math[_0x5c4e16(0x17f)](_0x2d8cb9)<0.000001)_0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x2);else{if(Math[_0x5c4e16(0x17f)](_0x2d8cb9)<0.1)_0x2d8cb9=_0x2d8cb9['toFixed'](0x6);else{if(Math[_0x5c4e16(0x17f)](_0x2d8cb9)<0x1)_0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x5);else{if(Math[_0x5c4e16(0x17f)](_0x2d8cb9)<0xa)_0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x4);else{if(Math[_0x5c4e16(0x17f)](_0x2d8cb9)<0x64)_0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x3);else{if(Math['abs'](_0x2d8cb9)<0x3e8)_0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x2);else _0x2d8cb9=_0x2d8cb9[_0x5c4e16(0xa0)](0x2);}}}}}}else _0x2d8cb9=Number('0')['toFixed'](0x2);}else _0x140788=Number('0')[_0x5c4e16(0xa0)](0x2);return{'value':_0x2d8cb9,'change':_0x140788,'leftTxt':_0x201874,'rightTxt':_0x1bae35};}async function getStartingBalances(_0x509f51,_0x5b3590=!![]){const _0x26df94=_0x320401;if(_0x509f51[_0x26df94(0x121)]!==0x0){const [_0x306604,_0x429e39,_0x2e7caf]=getPerf(_0x509f51[0x0],!![]);let _0x1b5f19=[];config[_0x26df94(0xa6)][_0x26df94(0x150)](_0x510ec3=>{const _0x27df91=_0x26df94;let _0x270e2b=0x0,_0x2ec5b5;config['liquidity'][_0x27df91(0x150)](_0x52ce2f=>{const _0xd6dea5=_0x27df91;let _0x19e649=_0x52ce2f[_0xd6dea5(0x1b4)][_0xd6dea5(0x1cf)](_0xc3b82c=>_0xc3b82c[_0xd6dea5(0x1fa)]==_0x510ec3[_0xd6dea5(0x1fa)]);if(_0x19e649){_0x270e2b+=_0x19e649[_0xd6dea5(0xcf)];if(!_0x2ec5b5)_0x2ec5b5=_0x19e649['price'];}}),_0x1b5f19[_0x27df91(0x157)]({'coin':_0x510ec3[_0x27df91(0x1fa)],'number':_0x270e2b,'initialprice':_0x2ec5b5});});const _0x1126f4={'basecoin':_0x306604,'eur':_0x429e39,'usd':_0x2e7caf,'coins':_0x1b5f19};if(_0x5b3590)proxyEmit(_0x26df94(0x9e),_0x1126f4);startingBalances=_0x1126f4;}}function headlessMode(_0x1b5a64){const _0x1167ee=_0x320401;let _0x2aa496=_0x1b5a64[_0x1167ee(0xa6)],_0x5e3c55=_0x1b5a64['threshold'],_0x14d142=[];for(let _0x423041 of _0x2aa496){if(_0x423041['coin']!=config[_0x1167ee(0x19a)]){if(_0x423041[_0x1167ee(0x129)]>=_0x5e3c55/0x64){if(_0x423041[_0x1167ee(0x80)])_0x14d142[_0x1167ee(0x157)](_0x423041);}else{if(_0x423041[_0x1167ee(0x129)]<=-_0x5e3c55/0x64){if(_0x423041[_0x1167ee(0x80)])_0x14d142[_0x1167ee(0x157)](_0x423041);}}}}_0x14d142['length']>0x0&&(lockOrders==ORDERS[_0x1167ee(0x17d)]&&!coolingDown&&_0x14d142[_0x1167ee(0x150)](_0x4c6924=>{const _0x5ca402=_0x1167ee;logger[_0x5ca402(0x17c)](_0x5ca402(0x139)+_0x4c6924[_0x5ca402(0x1fa)]+'\x20'+_0x4c6924['number']+'\x20'+_0x4c6924[_0x5ca402(0xfa)]+'\x20'+_0x4c6924[_0x5ca402(0xb6)]+'%\x20'+_0x4c6924[_0x5ca402(0x127)]+'%\x20'+(0x64*_0x4c6924[_0x5ca402(0x129)])[_0x5ca402(0xa0)](0x2)+'%\x20('+_0x5e3c55[_0x5ca402(0xa0)](0x2)+'%)');}),placeOrder(_0x14d142));}function notifyBalance(_0x3b3efa){const _0x3ef1d0=_0x320401;let _0x430198=_0x3b3efa['portfolio'],_0x45e3fc=_0x3b3efa[_0x3ef1d0(0x151)],_0x36aef3=[];for(let _0xcb890e of _0x430198){if(_0xcb890e[_0x3ef1d0(0x1fa)]!=config[_0x3ef1d0(0x19a)]){if(_0xcb890e['delta']>=_0x45e3fc/0x64){if(_0xcb890e[_0x3ef1d0(0x80)])_0x36aef3[_0x3ef1d0(0x157)](_0xcb890e);}else{if(_0xcb890e[_0x3ef1d0(0x129)]<=-_0x45e3fc/0x64){if(_0xcb890e[_0x3ef1d0(0x80)])_0x36aef3['push'](_0xcb890e);}}}}if(_0x36aef3['length']>0x0){let _0x4eb44d=_0x36aef3[_0x3ef1d0(0x1c3)](_0x285af3=>_0x285af3[_0x3ef1d0(0x1fa)]);_0x4eb44d['sort']();let _0x46a732=_0x4eb44d[_0x3ef1d0(0x152)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x46a732;}}function symbolToCoin(_0x3e2bb0){const _0x5209d1=_0x320401;let _0x201962;if(_0x3e2bb0[_0x5209d1(0xde)]('/'+config[_0x5209d1(0x19a)]))_0x201962=_0x3e2bb0['replace']('/'+config['basecoin'],'');if(_0x3e2bb0['includes'](config['basecoin']+'/'))_0x201962=_0x3e2bb0[_0x5209d1(0x141)](config['basecoin']+'/','');return _0x201962;}async function unlockOrders(){const _0x1e2d7c=_0x320401;if(allOrdersPlaced&&lockOrders==ORDERS[_0x1e2d7c(0x17a)]){logger[_0x1e2d7c(0x17c)]('1\x20-\x20Unlock\x20orders'),lockOrders=ORDERS['UNLOCKING'];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x258705=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x258705,setBlockTransactionDetection(![]),validateOrdersState=_0x1e2d7c(0x115),persistOpenOrders([]),lockOrders=ORDERS[_0x1e2d7c(0x17d)],logger[_0x1e2d7c(0x17c)](_0x1e2d7c(0x185));}}async function validateOrders(_0x45d2fc){const _0x320bb4=_0x320401;if(_0x45d2fc)validateOrdersState=_0x45d2fc;logger[_0x320bb4(0x17c)](_0x320bb4(0x133)+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?_0x320bb4(0xbc):lockOrders==0x2?'ORDERS.UNLOCKING':_0x320bb4(0xfc)));let _0x843d44=[],_0x993426=config[_0x320bb4(0x1d7)]==_0x320bb4(0x161)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x320bb4(0xeb)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x320bb4(0x17a)])return;logger[_0x320bb4(0x17c)](_0x320bb4(0x16f)+validateOrdersState),lastOrders[_0x320bb4(0x150)](_0x4ab73b=>{const _0x49d1a8=_0x320bb4;let _0x282e85=![];_0x4ab73b[_0x49d1a8(0x1e0)]>0x0&&(_0x282e85=!![]),_0x843d44[_0x49d1a8(0x157)](_0x282e85),_0x282e85&&config[_0x49d1a8(0x1d7)]!=_0x49d1a8(0x161)&&logHistory(_0x49d1a8(0xdd),_0x49d1a8(0x16e)+_0x4ab73b['symbol']+'\x20'+_0x4ab73b[_0x49d1a8(0x1cc)]+'\x20#'+formatResult(_0x4ab73b['filled'],0x8)+'\x20@'+formatResult(_0x4ab73b[_0x49d1a8(0x1c8)],0x8));}),_0x843d44[_0x320bb4(0x150)]((_0x37bd08,_0x1652c7)=>{const _0x577d4b=_0x320bb4;if(_0x37bd08)lastOrders[_0x577d4b(0x77)](_0x1652c7,0x1);}),persistOpenOrders(lastOrders);const _0x4e85a=coolingDown?_0x320bb4(0xf4):_0x320bb4(0x1ea);if(validateOrdersState=='initial'){validateOrdersState=_0x320bb4(0x212);if(_0x843d44['includes'](![])){if(config['ordertype']==_0x320bb4(0x161)){}else{}}else await unlockOrders();}else{if(validateOrdersState=='ongoing'){if(_0x843d44[_0x320bb4(0xde)](![])){}else{if(allOrdersPlaced){if(config['ordertype']==_0x320bb4(0x161)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x320bb4(0x204))_0x843d44[_0x320bb4(0xde)](![])&&(config[_0x320bb4(0x1d7)]==_0x320bb4(0x161)?logHistory(_0x320bb4(0x167),_0x320bb4(0x19d)+Math[_0x320bb4(0x1b5)](_0x993426*validateOrderInterval/0xea60)+_0x320bb4(0x159)+_0x4e85a):(await cancelOrders(),logHistory('success',_0x320bb4(0xb2)+Math[_0x320bb4(0x1b5)](_0x993426*validateOrderInterval/0xea60)+_0x320bb4(0x159)+_0x4e85a))),await unlockOrders();else{if(validateOrdersState=='no\x20open\x20orders'){if(config[_0x320bb4(0x1d7)]!=_0x320bb4(0x161))logHistory(_0x320bb4(0x167),_0x320bb4(0x1af)+_0x4e85a);await unlockOrders();}}}}}async function cancelOrders(){const _0x32b9d2=_0x320401;lastOrders[_0x32b9d2(0x150)](async _0x3dea85=>{const _0x2e388f=_0x32b9d2;try{const _0x350ffc=await exchange['cancelOrder'](_0x3dea85['orderId'],_0x3dea85['symbol']);}catch(_0xdc357e){if(_0xdc357e[_0x2e388f(0xd0)]()['includes']('OrderNotFound')){}else await handleError(_0xdc357e,_0x2e388f(0x1bb));}});}async function initCoinResults(_0x393829){const _0x1f6980=_0x320401;_0x393829?logger[_0x1f6980(0x17c)](_0x1f6980(0x106)+_0x393829):logger[_0x1f6980(0x17c)]('Initializing\x20coin\x20results'),config[_0x1f6980(0xa6)][_0x1f6980(0x150)](_0x232c52=>{const _0x840b=_0x1f6980;if(!_0x232c52[_0x840b(0xd2)]&&_0x232c52['coin']!=config[_0x840b(0x19a)]){const _0x35b039=currentCoins['find'](_0x430788=>_0x430788[_0x840b(0x1fa)]==_0x232c52['coin']),_0x3722ac=gTicker[noslash(_0x232c52[_0x840b(0x1f1)])];let _0x320859=_0x35b039?_0x35b039[_0x840b(0xcf)]:null,_0x17494a=_0x232c52['reverse']?0x1/_0x3722ac:_0x3722ac,_0x34b6f0;config[_0x840b(0x13c)][_0x840b(0x150)](_0x26517d=>{const _0x49666e=_0x840b;!_0x34b6f0&&(_0x34b6f0=_0x26517d[_0x49666e(0x1b4)][_0x49666e(0x1cf)](_0x262ac9=>_0x262ac9[_0x49666e(0x1fa)]==_0x232c52[_0x49666e(0x1fa)]),_0x34b6f0&&(_0x320859=_0x34b6f0[_0x49666e(0xcf)],_0x17494a=_0x34b6f0[_0x49666e(0x1c8)]));});let _0x15a2a6=dbCoinResults[_0x840b(0x1a3)](_0x840b(0x16c))[_0x840b(0x1cf)]({'coin':_0x232c52['coin']})[_0x840b(0x98)]();if(!_0x15a2a6){const _0x5be2a5={'coin':_0x232c52[_0x840b(0x1fa)],'number':_0x320859,'breakeven':_0x17494a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x840b(0x1a3)](_0x840b(0x16c))[_0x840b(0x157)](_0x5be2a5)[_0x840b(0x103)]();}else{if(_0x393829&&_0x232c52[_0x840b(0x1fa)]==_0x393829){const _0x3fffcd={'coin':_0x232c52[_0x840b(0x1fa)],'number':_0x320859,'breakeven':_0x17494a,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults['get'](_0x840b(0x16c))['find']({'coin':_0x232c52['coin']})[_0x840b(0x154)](_0x3fffcd)['write']();}}}});}async function updateCoinResults(_0x38a1f4,_0x31964f=![]){const _0x5f25cb=_0x320401;let _0x2b9a4a,_0x3cf7e1,_0x7d9ea7,_0x2ad95b,_0x4e014b,_0x34d72e,_0x4b5321=dbCoinResults[_0x5f25cb(0x1a3)](_0x5f25cb(0x16c))[_0x5f25cb(0x1cf)]({'coin':_0x38a1f4[_0x5f25cb(0x1fa)]})[_0x5f25cb(0x98)](),_0x41a8da=![];_0x4b5321&&Object[_0x5f25cb(0x10b)](_0x4b5321)[_0x5f25cb(0x150)](([_0x4cfd4d,_0x53cccd])=>{if(_0x53cccd==null)_0x41a8da=!![];});(!_0x4b5321||_0x41a8da)&&(await initCoinResults(_0x38a1f4[_0x5f25cb(0x1fa)]),_0x4b5321=dbCoinResults[_0x5f25cb(0x1a3)]('coins')['find']({'coin':_0x38a1f4[_0x5f25cb(0x1fa)]})[_0x5f25cb(0x98)]());_0x38a1f4[_0x5f25cb(0x73)]&&(_0x34d72e={'filled':_0x38a1f4[_0x5f25cb(0x1e0)]*_0x38a1f4[_0x5f25cb(0x1c8)],'amount':_0x38a1f4[_0x5f25cb(0x1e0)]*_0x38a1f4[_0x5f25cb(0x1c8)],'side':_0x38a1f4['side']==_0x5f25cb(0x214)?_0x5f25cb(0xa5):'sell','price':0x1/_0x38a1f4[_0x5f25cb(0x1c8)]},_0x38a1f4={..._0x38a1f4,..._0x34d72e});_0x31964f?_0x3cf7e1=_0x38a1f4['side']=='buy'?_0x4b5321[_0x5f25cb(0xcf)]+_0x38a1f4[_0x5f25cb(0x1e0)]:_0x4b5321[_0x5f25cb(0xcf)]-_0x38a1f4[_0x5f25cb(0x1e0)]:_0x3cf7e1=await getCoinNumber(_0x38a1f4[_0x5f25cb(0x1fa)]);if(_0x38a1f4['fee']&&_0x38a1f4[_0x5f25cb(0x186)][_0x5f25cb(0xbb)]==config[_0x5f25cb(0x19a)])_0x2b9a4a=Number(_0x38a1f4[_0x5f25cb(0x186)][_0x5f25cb(0xe9)]);else{if(_0x38a1f4[_0x5f25cb(0x186)]&&_0x38a1f4[_0x5f25cb(0x186)]['currency']==_0x5f25cb(0x21b)&&!_0x31964f&&config[_0x5f25cb(0x19a)]!='PAXG')_0x2b9a4a=Number(_0x38a1f4[_0x5f25cb(0x186)][_0x5f25cb(0xe9)])*gTicker['BNB'+config[_0x5f25cb(0x19a)]];else _0x2b9a4a=defaultFee*_0x38a1f4[_0x5f25cb(0x1e0)]*_0x38a1f4[_0x5f25cb(0x1c8)];}_0x38a1f4[_0x5f25cb(0x1cc)]=='buy'?(_0x7d9ea7=_0x3cf7e1!=0x0?(_0x4b5321[_0x5f25cb(0x119)]*_0x4b5321['number']+_0x38a1f4[_0x5f25cb(0x1c8)]*(_0x3cf7e1-_0x4b5321[_0x5f25cb(0xcf)])+_0x2b9a4a)/_0x3cf7e1:0x0,_0x2ad95b=_0x4b5321[_0x5f25cb(0x148)]):(_0x7d9ea7=_0x3cf7e1!=0x0?(_0x4b5321[_0x5f25cb(0x119)]*_0x4b5321[_0x5f25cb(0xcf)]-_0x38a1f4[_0x5f25cb(0x1c8)]*(_0x4b5321['number']-_0x3cf7e1)+_0x2b9a4a)/_0x3cf7e1:0x0,_0x2ad95b=_0x4b5321['realized']+(_0x38a1f4[_0x5f25cb(0x1c8)]-_0x4b5321[_0x5f25cb(0x119)])*_0x38a1f4['filled']);_0x4e014b=(_0x38a1f4[_0x5f25cb(0x1c8)]-_0x7d9ea7-_0x2b9a4a/_0x38a1f4[_0x5f25cb(0x1e0)])*_0x3cf7e1;let _0x167f5f={'coin':_0x38a1f4[_0x5f25cb(0x1fa)],'number':_0x3cf7e1,'breakeven':formatResult(_0x7d9ea7,0x8),'realized':formatResult(_0x2ad95b,0x8),'unrealized':formatResult(_0x4e014b,0x8),'fees':formatResult(_0x4b5321[_0x5f25cb(0x1d2)]+_0x2b9a4a,0x8),'sells':_0x38a1f4['side']==_0x5f25cb(0x214)?_0x4b5321[_0x5f25cb(0x1ed)]+0x1:_0x4b5321[_0x5f25cb(0x1ed)],'buys':_0x38a1f4[_0x5f25cb(0x1cc)]==_0x5f25cb(0xa5)?_0x4b5321[_0x5f25cb(0x193)]+0x1:_0x4b5321[_0x5f25cb(0x193)]};dbCoinResults[_0x5f25cb(0x1a3)](_0x5f25cb(0x16c))[_0x5f25cb(0x1cf)]({'coin':_0x38a1f4[_0x5f25cb(0x1fa)]})['assign'](_0x167f5f)['write']();if(!_0x31964f){if(_0x38a1f4[_0x5f25cb(0x186)]&&_0x38a1f4[_0x5f25cb(0x186)][_0x5f25cb(0xbb)]=='BNB'){const _0x1ec876=currentCoins['find'](_0x6f7107=>_0x6f7107[_0x5f25cb(0x1fa)]==_0x5f25cb(0x21b));if(_0x1ec876){let _0x3411b3=dbCoinResults[_0x5f25cb(0x1a3)]('coins')[_0x5f25cb(0x1cf)]({'coin':_0x5f25cb(0x21b)})[_0x5f25cb(0x98)]();_0x167f5f={..._0x3411b3,'number':_0x1ec876['number']},dbCoinResults[_0x5f25cb(0x1a3)](_0x5f25cb(0x16c))[_0x5f25cb(0x1cf)]({'coin':'BNB'})[_0x5f25cb(0x154)](_0x167f5f)[_0x5f25cb(0x103)]();}}}}function _0x1a00(_0x39a74d,_0x435868){const _0xa3586e=_0x2a58();return _0x1a00=function(_0x33ec48,_0x57448c){_0x33ec48=_0x33ec48-0x6b;let _0x2a58c5=_0xa3586e[_0x33ec48];return _0x2a58c5;},_0x1a00(_0x39a74d,_0x435868);}async function placeOrder(_0x3dc138){const _0x4f81eb=_0x320401,_0x1a84fa=config['ordertype']=='market'?_0x4f81eb(0x161):_0x4f81eb(0x87);if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){while(transactionDetectionOngoing){await sleep(0x64);}lockOrders=ORDERS[_0x4f81eb(0x17a)],lastCoinsToBalance='',allOrdersPlaced=![],validateOrdersState=_0x4f81eb(0x115);let _0x35932c=![];lastOrders=[];for(const _0x2b14d4 of _0x3dc138){let _0x2cb104,_0x4f1339,_0x569873,_0x503ae6,_0x4c390c,_0x2fc228=_0x2b14d4['symbol'];try{const _0x241b19=await exchange[_0x4f81eb(0x1a9)](_0x2fc228);_0x2cb104=_0x2b14d4[_0x4f81eb(0x73)]?0x1/_0x2b14d4[_0x4f81eb(0xfa)]:_0x2b14d4[_0x4f81eb(0xfa)],_0x4f1339=_0x241b19[_0x4f81eb(0xc0)],_0x569873=_0x241b19[_0x4f81eb(0x21e)];_0x2b14d4[_0x4f81eb(0x73)]?(_0x503ae6=_0x2b14d4[_0x4f81eb(0x1cc)]=='buy'?_0x4f81eb(0x214):_0x4f81eb(0xa5),_0x4c390c=Math[_0x4f81eb(0x17f)](_0x2b14d4[_0x4f81eb(0x1c6)])/_0x2cb104):(_0x503ae6=_0x2b14d4['side'],_0x4c390c=Math[_0x4f81eb(0x17f)](_0x2b14d4[_0x4f81eb(0x1c6)]));_0x1a84fa==_0x4f81eb(0x87)&&(config[_0x4f81eb(0x1d7)]=='limit-high'&&(_0x2cb104=_0x503ae6==_0x4f81eb(0xa5)?_0x4f1339:_0x569873),config[_0x4f81eb(0x1d7)]=='limit-low'&&(_0x2cb104=_0x503ae6==_0x4f81eb(0xa5)?_0x569873:_0x4f1339));_0x4c390c=formatResult(_0x4c390c,0x8),_0x2cb104=formatResult(_0x2cb104,0x8);const _0x2b3a96=_0x503ae6==_0x4f81eb(0x214)?config['emojisell']?String[_0x4f81eb(0x10d)]('0x'+config[_0x4f81eb(0x1d4)])+'\x20':'':config['emojibuy']?String[_0x4f81eb(0x10d)]('0x'+config['emojibuy'])+'\x20':'',_0x2ecfcd=_0x1a84fa==_0x4f81eb(0x161)?_0x4f81eb(0x224):config[_0x4f81eb(0x1d7)]=='limit-high'?_0x4f81eb(0x18b):_0x4f81eb(0x180),_0x47130b=(Math[_0x4f81eb(0x207)](Math['random']()*0x35a4e900)+0x5f5e100)[_0x4f81eb(0xd0)]();lastOrders[_0x4f81eb(0x157)]({'customId':_0x47130b,'symbol':_0x2fc228,'coin':_0x2b14d4[_0x4f81eb(0x1fa)],'amount':_0x4c390c,'price':_0x2cb104,'side':_0x503ae6,'reverse':_0x2b14d4[_0x4f81eb(0x73)],'filled':0x0});if(_0x1a84fa==_0x4f81eb(0x161))logHistory(_0x4f81eb(0xdd),''+_0x2b3a96+_0x2ecfcd+_0x4f81eb(0xfd)+_0x2fc228+'\x20'+_0x503ae6+'\x20#'+formatResult(_0x4c390c,0x8)+'\x20@'+formatResult(_0x2cb104,0x8));else logHistory(_0x4f81eb(0xdd),''+_0x2b3a96+_0x2ecfcd+'\x20order:\x20'+_0x2fc228+'\x20'+_0x503ae6+'\x20#'+formatResult(_0x4c390c,0x8)+'\x20@'+formatResult(_0x2cb104,0x8));let _0xddda53;_0x1a84fa=='market'?_0x503ae6==_0x4f81eb(0xa5)&&[_0x4f81eb(0xd7),_0x4f81eb(0x1eb),_0x4f81eb(0x210),_0x4f81eb(0x18d),_0x4f81eb(0x169)][_0x4f81eb(0xde)](config[_0x4f81eb(0x203)])?_0xddda53=await exchange[_0x4f81eb(0x222)](_0x2fc228,_0x1a84fa,_0x503ae6,_0x4c390c,_0x2cb104):_0xddda53=await exchange[_0x4f81eb(0x222)](_0x2fc228,_0x1a84fa,_0x503ae6,_0x4c390c,undefined):_0xddda53=await exchange['createOrder'](_0x2fc228,_0x1a84fa,_0x503ae6,_0x4c390c,_0x2cb104);logger[_0x4f81eb(0x17c)](_0x4f81eb(0xc4)+_0xddda53['id']+_0x4f81eb(0x110)+_0x47130b);const _0x43ba70=lastOrders['length']-0x1;if(_0x43ba70>=0x0&&lastOrders[_0x43ba70][_0x4f81eb(0x1ad)]==_0x47130b){lastOrders[_0x43ba70][_0x4f81eb(0xcc)]=_0xddda53['id'];if(_0xddda53['amount'])lastOrders[_0x43ba70][_0x4f81eb(0xd5)]=_0xddda53[_0x4f81eb(0xd5)];if(_0xddda53[_0x4f81eb(0x1c8)])lastOrders[_0x43ba70][_0x4f81eb(0x1c8)]=_0xddda53[_0x4f81eb(0x1c8)];lastOrders[_0x43ba70][_0x4f81eb(0x186)]=_0xddda53['fee'];}if(config['cooldown']!=0x0){let _0x4e9470=null;if(cooldownTracker[_0x4f81eb(0x121)]==config['cooldown']-0x1)_0x4e9470=cooldownTracker[_0x4f81eb(0x1fc)]();const _0x3a7ea7=getTimeStamp();cooldownTracker[_0x4f81eb(0x157)](_0x3a7ea7);if(_0x4e9470){const _0x5b165c=fns[_0x4f81eb(0x11b)](new Date(_0x3a7ea7),new Date(_0x4e9470));if(_0x5b165c<cooldownInterval){logHistory(_0x4f81eb(0x1ec),_0x4f81eb(0x184)+config[_0x4f81eb(0x16d)]+_0x4f81eb(0x14f)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x4f81eb(0x1aa)),coolingDown=!![];break;}}}}catch(_0x59e853){if(_0x59e853['toString']()[_0x4f81eb(0xde)]('MIN_NOTIONAL'))lastOrders=lastOrders[_0x4f81eb(0x12a)](_0x1adc14=>_0x1adc14[_0x4f81eb(0x1f1)]!=_0x2fc228),logHistory(_0x4f81eb(0x1ec),_0x4f81eb(0x12c)+_0x2fc228),_0x35932c=!![];else{if(_0x59e853[_0x4f81eb(0xd0)]()['includes'](_0x4f81eb(0x13d)))lastOrders=lastOrders[_0x4f81eb(0x12a)](_0x3e5805=>_0x3e5805['symbol']!=_0x2fc228),logHistory(_0x4f81eb(0x1ec),'Order\x20amount\x20is\x20invalid:\x20'+_0x2fc228),_0x35932c=!![];else{if(_0x59e853[_0x4f81eb(0xd0)]()[_0x4f81eb(0xde)](_0x4f81eb(0x197)))lastOrders=lastOrders[_0x4f81eb(0x12a)](_0xc5dc4c=>_0xc5dc4c['symbol']!=_0x2fc228),logHistory('error','Order\x20is\x20invalid:\x20'+_0x2fc228),logger['debug'](_0x59e853),_0x35932c=!![];else _0x59e853['toString']()[_0x4f81eb(0xde)](_0x4f81eb(0xdf))?(lastOrders=lastOrders['filter'](_0x3b201a=>_0x3b201a[_0x4f81eb(0x1f1)]!=_0x2fc228),logHistory('error','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x2fc228),_0x35932c=!![]):(lastOrders=lastOrders['filter'](_0x1a7783=>_0x1a7783[_0x4f81eb(0x1f1)]!=_0x2fc228),await handleError(_0x59e853,'placeOrder()',_0x2fc228));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x4f81eb(0x121)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x5bbb7c=config[_0x4f81eb(0x1d7)]==_0x4f81eb(0x161)?validateOrderTimeout*0x3c*0x3e8:config[_0x4f81eb(0xeb)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x8457fb=_0x4f81eb;validateOrders(_0x8457fb(0x204));},_0x5bbb7c);}else unlockOrders();_0x35932c&&config['headless']&&(logHistory(_0x4f81eb(0x1ec),_0x4f81eb(0x1c0)+pauseBotMsg),await pauseBot(pauseBotInterval)),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory(_0x4f81eb(0x167),_0x4f81eb(0x1bc)));}else{if(coolingDown)!config[_0x4f81eb(0x1ff)]&&logHistory(_0x4f81eb(0x1ec),'Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode');else lockOrders!=ORDERS[_0x4f81eb(0x17d)]&&(!config[_0x4f81eb(0x1ff)]&&(config[_0x4f81eb(0x1d7)]==_0x4f81eb(0x161)?logHistory(_0x4f81eb(0x1ec),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory('error',_0x4f81eb(0x89))));}}function persistOpenOrders(_0x46418a){const _0xc3edb2=_0x320401,_0x13045c={...config,'openOrders':_0x46418a};let _0x2a7981=dbConfig[_0xc3edb2(0x1a3)](_0xc3edb2(0x190))[_0xc3edb2(0x1cf)]({'botID':botID})[_0xc3edb2(0x98)]();_0x2a7981&&dbConfig[_0xc3edb2(0x1a3)](_0xc3edb2(0x190))[_0xc3edb2(0x1cf)]({'botID':botID})['assign'](_0x13045c)['write']();}function restoreOrders(){const _0x4c3755=_0x320401;let _0x1578da;config[_0x4c3755(0x1d8)]&&allOpenOrders[_0x4c3755(0x150)](_0xc5407=>{const _0x355170=_0x4c3755,_0x141cf6=config[_0x355170(0x1d8)][_0x355170(0x1cf)](_0x3e9337=>_0x3e9337['orderId']==_0xc5407['id']);_0x141cf6&&(lastOrders[_0x355170(0x157)](_0x141cf6),_0x1578da=_0xc5407['timestamp']);});if(lastOrders[_0x4c3755(0x121)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState=_0x4c3755(0x212),allOrdersPlaced=!![];const _0x3ca10a=new Date()['getTime'](),_0x4b1a91=config['ordertype']==_0x4c3755(0x161)?validateOrderTimeout*0x3c*0x3e8:config[_0x4c3755(0xeb)]*0x3c*0x3e8;if(_0x1578da+_0x4b1a91>_0x3ca10a){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36428c=_0x4c3755;validateOrders(_0x36428c(0x204));},_0x1578da+_0x4b1a91-_0x3ca10a);}else validateOrders(_0x4c3755(0x204));}}async function sendMetricsTelegram(){const _0x1913e7=_0x320401;if(!coinsLoaded){process[_0x1913e7(0xab)]({'telegrammsg':_0x1913e7(0xf3)},_0xaccb6c=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x4c57d3='';if(config[_0x1913e7(0x223)])_0x4c57d3=_0x1913e7(0x138)+config[_0x1913e7(0x228)]+_0x1913e7(0xdb);else _0x4c57d3=_0x1913e7(0xca)+botID+_0x1913e7(0xdb);const _0x5d4c7b=getKPIs('basecoin'),_0x24ec63=getKPIs(_0x1913e7(0x1e6),config[_0x1913e7(0x1e6)]),_0x429b71=getKPIs(_0x1913e7(0x21f)),_0x2188e8=getKPIs('net-fiat',config['fiat']);_0x4c57d3+=_0x1913e7(0xe6),_0x4c57d3+=_0x5d4c7b[_0x1913e7(0x1ca)]+_0x1913e7(0x1d1)+_0x5d4c7b[_0x1913e7(0x98)]+'\x0a',_0x4c57d3+=_0x5d4c7b[_0x1913e7(0x226)]+':\x20'+_0x5d4c7b[_0x1913e7(0xdc)]+'%\x0a',_0x4c57d3+=_0x24ec63[_0x1913e7(0x1ca)]+_0x1913e7(0x1d1)+_0x24ec63[_0x1913e7(0x98)]+'\x0a',_0x4c57d3+=_0x24ec63['rightTxt']+':\x20'+_0x24ec63['change']+'%\x0a',_0x4c57d3+=_0x429b71[_0x1913e7(0x1ca)]+':\x20'+_0x429b71['value']+'\x20('+config[_0x1913e7(0x19a)]+')\x0a',_0x4c57d3+=_0x429b71[_0x1913e7(0x226)]+':\x20'+_0x429b71['change']+_0x1913e7(0x10a)+config[_0x1913e7(0x19a)]+')\x0a',_0x4c57d3+=_0x2188e8[_0x1913e7(0x1ca)]+':\x20'+_0x2188e8[_0x1913e7(0x98)]+'\x20('+config[_0x1913e7(0x1e6)]+')\x0a',_0x4c57d3+=_0x2188e8[_0x1913e7(0x226)]+':\x20'+_0x2188e8[_0x1913e7(0xdc)]+_0x1913e7(0x10a)+config['fiat']+')\x0a',_0x4c57d3+=_0x1913e7(0x1ef),process[_0x1913e7(0xab)]({'telegrammsg':_0x4c57d3},_0x524a03=>{});}async function sendPortfolioTelegram(){const _0x5d9ad7=_0x320401;if(!coinsLoaded||!currentCoins[0x0][_0x5d9ad7(0xb6)]){process[_0x5d9ad7(0xab)]({'telegrammsg':_0x5d9ad7(0xf3)},_0x4e6439=>{});return;}let _0x5adc70='';if(config['showname'])_0x5adc70='<b>'+config[_0x5d9ad7(0x228)]+_0x5d9ad7(0x128);else _0x5adc70=_0x5d9ad7(0xca)+botID+'\x20portfolio:</b>\x20\x0a\x0a';_0x5adc70+='<pre>',_0x5adc70+=_0x5d9ad7(0x220),_0x5adc70+=_0x5d9ad7(0x165),_0x5adc70+=_0x5d9ad7(0x220),currentCoins[_0x5d9ad7(0x150)](_0x4fc08d=>{const _0x12069a=_0x5d9ad7;_0x5adc70+=_0x4fc08d[_0x12069a(0x1fa)]['padEnd'](0x7)+'|\x20'+formatPad(_0x4fc08d[_0x12069a(0xb6)],0x2,0x6)+'|\x20'+formatPad(_0x4fc08d[_0x12069a(0x127)],0x2,0x6)+'|\x20'+formatPad(_0x4fc08d[_0x12069a(0x129)]*0x64,0x2,0x6)+'\x0a';}),_0x5adc70+=_0x5d9ad7(0x1ef),process['send']({'telegrammsg':_0x5adc70},_0x1031b3=>{});}function formatPad(_0x4c0dfe,_0x4cc333,_0x14a33a){const _0x3a6b33=_0x320401,_0x47b55d=formatResultString(_0x4c0dfe,_0x4cc333);return _0x47b55d?_0x47b55d[_0x3a6b33(0x188)](_0x14a33a):''['padStart'](_0x14a33a);}function logHistory(_0x4550ea,_0x536bb4,_0x1b5569=''){const _0x3c2c1d=_0x320401;logger['full'](''+_0x536bb4);let _0x299a04={'time':getTimeStamp(),'type':_0x4550ea,'event':_0x536bb4};dbLogs[_0x3c2c1d(0x1a3)](_0x3c2c1d(0x1e5))[_0x3c2c1d(0x157)](_0x299a04)[_0x3c2c1d(0x103)]();if(_0x1b5569=='')_0x1b5569=_0x536bb4;proxyEmit(_0x3c2c1d(0x1da),{'log':_0x299a04,'summary':_0x1b5569}),process[_0x3c2c1d(0xab)]({'telegram':{..._0x299a04,'botname':config[_0x3c2c1d(0x228)],'showname':config[_0x3c2c1d(0x223)]}},_0x3e42c1=>{});}function emitHistory(_0x1925cb={}){const _0x254dc8=_0x320401;Object['keys'](_0x1925cb)[_0x254dc8(0x121)]==0x0&&(_0x1925cb={'type':[_0x254dc8(0xdd),'event'],'event':'','page':0x1});if(_0x1925cb[_0x254dc8(0x164)][_0x254dc8(0xde)](_0x254dc8(0x1da)))_0x1925cb[_0x254dc8(0x164)][_0x254dc8(0x77)](_0x1925cb[_0x254dc8(0x164)][_0x254dc8(0x1f7)]('event'),0x1,_0x254dc8(0x1ec),_0x254dc8(0x160),_0x254dc8(0x167));if(dbLogs[_0x254dc8(0x147)](_0x254dc8(0x1e5))['value']()){let _0x22e04a=dbLogs[_0x254dc8(0x1a3)]('logs')[_0x254dc8(0x12a)](_0x5c7b87=>{const _0x1732b3=_0x254dc8;if(_0x1925cb[_0x1732b3(0x164)]['length']==0x0)return![];else return _0x1925cb[_0x1732b3(0x164)][_0x1732b3(0xde)](_0x5c7b87[_0x1732b3(0x164)]);})['filter'](_0x24ce90=>{const _0x1cb002=_0x254dc8;if(_0x1925cb[_0x1cb002(0x1da)]=='')return!![];else return _0x24ce90[_0x1cb002(0x1da)]['toLowerCase']()[_0x1cb002(0xde)](_0x1925cb[_0x1cb002(0x1da)][_0x1cb002(0x15e)]());})[_0x254dc8(0x192)](_0x254dc8(0xbe)),_0x32f8e3=_0x22e04a[_0x254dc8(0x98)]()[_0x254dc8(0x121)];_0x22e04a=_0x22e04a[_0x254dc8(0x73)]()[_0x254dc8(0xf0)]((_0x1925cb[_0x254dc8(0x173)]-0x1)*logPageSize,_0x1925cb[_0x254dc8(0x173)]*logPageSize-0x1)[_0x254dc8(0x73)]()['value'](),proxyEmit(_0x254dc8(0x1db),{'logs':_0x22e04a,'total':_0x32f8e3});}else proxyEmit(_0x254dc8(0x1db),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x495fee){const _0x49dd6f=_0x320401;if(dbLogs[_0x49dd6f(0x147)](_0x49dd6f(0x1e5))['value']()){const _0x45dcc7=dbLogs[_0x49dd6f(0x1a3)](_0x49dd6f(0x1e5))[_0x49dd6f(0x192)](_0x49dd6f(0xbe))[_0x49dd6f(0x12a)](_0x2179d5=>{const _0x1ce1d5=_0x49dd6f;return _0x2179d5[_0x1ce1d5(0x164)]==_0x1ce1d5(0xdd);})[_0x49dd6f(0x98)]();dbLogs['get'](_0x49dd6f(0x1e5))['remove']()[_0x49dd6f(0x103)](),dbLogs[_0x49dd6f(0x1a3)]('logs')[_0x49dd6f(0x154)](_0x45dcc7)['write'](),emitHistory(_0x495fee);}}async function pauseBot(_0xd556da=pauseBotIntervalShort,_0x120831,_0x3aa60a,_0x23d190=![]){const _0x1b3d4b=_0x320401,_0x2ce25c=new Date()[_0x1b3d4b(0x217)]();if(!lastErrorShown||_0x2ce25c-lastErrorShown>=_0xd556da){lastErrorShown=_0x2ce25c;if(!lastBotPause)lastBotPause=_0x2ce25c,consecutivePauses=0x1;else{if(_0x2ce25c-lastBotPause-_0xd556da<0x5a*0x3e8){consecutivePauses++;if(consecutivePauses>maxPauseRetries){if(_0x23d190){logHistory(_0x1b3d4b(0x1ec),_0x120831+_0x1b3d4b(0xe4)),await killBot();return;}else logHistory(_0x1b3d4b(0x1ec),_0x120831+pauseBotMsg),_0xd556da=pauseBotInterval;}}else consecutivePauses=0x1;lastBotPause=_0x2ce25c;}_0x3aa60a?logger['debug']('('+consecutivePauses+')\x20'+_0x120831+_0x1b3d4b(0x1f0),_0x3aa60a):logger[_0x1b3d4b(0x17c)]('('+consecutivePauses+')\x20'+_0x120831);if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);await sleep(_0xd556da),botPaused=![],_0xd556da==pauseBotIntervalShort?resumeBot(!![]):resumeBot(![]);}}}async function killBot(){const _0x2294f1=_0x320401;botPaused=!![],await sleep(0x3e8),process[_0x2294f1(0xab)]({'stop':_0x2294f1(0x1a8)},_0x4490a9=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x215128,_0x3472ab){const _0x57782f=_0x320401;if(botPaused)return;const _0x357c02=config[_0x57782f(0x203)]||_0x57782f(0x1a1);if(_0x3472ab)logger[_0x57782f(0x17c)](_0x57782f(0x74)+_0x3472ab);const _0x285a16=()=>{const _0x1566c0=_0x57782f;loading[_0x1566c0(0x1ec)]=!![],emitLoadingProgress();};if(_0x215128[_0x57782f(0xd0)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x57782f(0x1ec),_0x357c02+_0x57782f(0x122)),_0x285a16();else{if(_0x215128[_0x57782f(0xd0)]()[_0x57782f(0xde)](_0x57782f(0x108)))logHistory('error',_0x357c02+_0x57782f(0x1df)),_0x285a16();else _0x215128[_0x57782f(0xd0)]()[_0x57782f(0xde)](_0x57782f(0xf8))?(logHistory(_0x57782f(0x1ec),_0x357c02+_0x57782f(0x1a6)),logHistory(_0x57782f(0x1ec),_0x57782f(0xec)),_0x285a16()):await handleError(_0x215128,null);}}async function handleError(_0x376c1d,_0x2fe152,_0x28dd6d=''){const _0x3e7ef7=_0x320401;if(botPaused)return;let _0x1cc1fd;const _0x26c30f=config[_0x3e7ef7(0x203)]||'Exchange';if(_0x2fe152)logger['debug']('Exception\x20thrown\x20in\x20'+_0x2fe152);if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0x93)))_0x1cc1fd=_0x26c30f+'\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d['toString']()[_0x3e7ef7(0xde)](_0x3e7ef7(0xf2)))_0x1cc1fd=_0x26c30f+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading',await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()['includes'](_0x3e7ef7(0x75))||_0x376c1d[_0x3e7ef7(0xd0)]()['includes'](_0x3e7ef7(0x221)))_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x145),await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d['toString']()[_0x3e7ef7(0xde)](_0x3e7ef7(0xaa)))_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x20d),await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0x132)))_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x14d),await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()['toLowerCase']()[_0x3e7ef7(0xde)](_0x3e7ef7(0x216))||_0x376c1d[_0x3e7ef7(0xd0)]()['toLowerCase']()[_0x3e7ef7(0xde)](_0x3e7ef7(0x72)))_0x1cc1fd='Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20(see:\x20hodlerhacks.com/fix/3)',await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0xee)))_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x189),await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d instanceof ccxt[_0x3e7ef7(0xba)])_0x1cc1fd=_0x26c30f+_0x3e7ef7(0xb9)+_0x376c1d[_0x3e7ef7(0xd0)](),logger['debug'](_0x3e7ef7(0x7c),_0x376c1d),await pauseBot(undefined,_0x1cc1fd,_0x376c1d);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()['includes']('API-key\x20format\x20invalid'))logHistory(_0x3e7ef7(0x1ec),_0x26c30f+'\x20API\x20key\x20is\x20invalid'),logHistory('error','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x376c1d['toString']()['includes'](_0x3e7ef7(0x108)))logHistory(_0x3e7ef7(0x1ec),_0x26c30f+_0x3e7ef7(0xbf)),logHistory(_0x3e7ef7(0x1ec),_0x3e7ef7(0x20c)),await killBot();else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0xf8))&&_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0x120)))_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x8b),await pauseBot(undefined,_0x1cc1fd,_0x376c1d,!![]);else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)]('AuthenticationError'))config[_0x3e7ef7(0xb7)]?_0x1cc1fd=_0x26c30f+'\x20API\x20key,\x20secret\x20or\x20password\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange':_0x1cc1fd=_0x26c30f+_0x3e7ef7(0x156),logHistory(_0x3e7ef7(0x1ec),_0x1cc1fd),logHistory(_0x3e7ef7(0x1ec),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20(see:\x20hodlerhacks.com/fix/1)'),await killBot();else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)]('PermissionDenied'))logHistory(_0x3e7ef7(0x1ec),_0x26c30f+_0x3e7ef7(0x17b)),logHistory('error',_0x3e7ef7(0x20c)),await killBot();else{if(_0x376c1d[_0x3e7ef7(0xd0)]()[_0x3e7ef7(0xde)](_0x3e7ef7(0x1c1)))logHistory(_0x3e7ef7(0x1ec),_0x3e7ef7(0x1f4)+_0x28dd6d);else{if(_0x376c1d instanceof ccxt[_0x3e7ef7(0x1dc)]){_0x1cc1fd=_0x26c30f+'\x20exchange\x20error:\x20'+_0x376c1d[_0x3e7ef7(0xd0)](),logHistory('error',_0x1cc1fd),logger['debug']('Exchange\x20error\x20details:',_0x376c1d);if(_0x28dd6d)logger[_0x3e7ef7(0x17c)](_0x3e7ef7(0x1e3)+_0x28dd6d);await pauseBot(undefined,_0x1cc1fd,_0x376c1d);}else{_0x1cc1fd=_0x3e7ef7(0x9a)+_0x376c1d[_0x3e7ef7(0xd0)](),logHistory(_0x3e7ef7(0x1ec),_0x1cc1fd),logger['debug'](_0x1cc1fd+_0x3e7ef7(0x1f0),_0x376c1d);if(_0x28dd6d)logger[_0x3e7ef7(0x17c)]('Symbol(s):\x20'+_0x28dd6d);await pauseBot(undefined,_0x1cc1fd);}}}}}}}}}}}}}}}}async function withRetry(_0x5d0f8f,_0x12026b){const _0x30d2d4=_0x320401;let _0x1a5f30=![],_0x42d2bb=0x0,_0x11b5a1,_0x1fc1a8;while(_0x42d2bb<maxRetries){try{_0x11b5a1=await _0x12026b();break;}catch(_0x787ba2){_0x1fc1a8=_0x787ba2,!_0x1a5f30?(_0x1a5f30=!![],logger[_0x30d2d4(0x17c)](_0x30d2d4(0xa1)+_0x5d0f8f+':',_0x787ba2[_0x30d2d4(0xd0)]())):await sleep(retryInterval);}_0x42d2bb++;}if(_0x42d2bb==0x0)return _0x11b5a1;if(_0x42d2bb>=maxRetries)throw _0x1fc1a8;else return logger[_0x30d2d4(0x17c)](_0x30d2d4(0x191)+_0x42d2bb+_0x30d2d4(0xbd)),_0x11b5a1;}function formatResult(_0x3d6b8d,_0x492c45){return parseFloat(_0x3d6b8d['toFixed'](_0x492c45));}function formatResultTruncate(_0x4d393e,_0x56cd04){const _0x413c4d=_0x320401;let _0x445015=formatResultString(_0x4d393e,0xa),_0x5e0649=_0x445015[_0x413c4d(0x1f7)]('.');return _0x5e0649!=-0x1&&(_0x445015=_0x445015[_0x413c4d(0xf0)](0x0,_0x5e0649+_0x56cd04+0x1)),Number(_0x445015);}function formatResultString(_0x551f12,_0x845e2b){const _0x1a2bb4=_0x320401;let _0x2cdd6a;if(!(''+_0x551f12)[_0x1a2bb4(0xde)]('e'))_0x2cdd6a=+(Math[_0x1a2bb4(0x1b5)](_0x551f12+'e+'+_0x845e2b)+'e-'+_0x845e2b);else{let _0x464bad=(''+_0x551f12)[_0x1a2bb4(0x97)]('e'),_0x1e135a='';+_0x464bad[0x1]+_0x845e2b>0x0&&(_0x1e135a='+'),_0x2cdd6a=+(Math[_0x1a2bb4(0x1b5)](+_0x464bad[0x0]+'e'+_0x1e135a+(+_0x464bad[0x1]+_0x845e2b))+'e-'+_0x845e2b);}return Number(_0x2cdd6a)[_0x1a2bb4(0xa0)](_0x845e2b);}function getServerTime(){const _0x156185=_0x320401,_0x523a85=new Date();return _0x523a85[_0x156185(0xb4)]()+'/'+(_0x523a85[_0x156185(0x1cb)]()+0x1)[_0x156185(0xd0)]()[_0x156185(0x188)](0x2,'0')+'/'+_0x523a85[_0x156185(0x118)]()[_0x156185(0xd0)]()['padStart'](0x2,'0')+'\x20'+_0x523a85[_0x156185(0x1bf)]()['toString']()['padStart'](0x2,'0')+':'+_0x523a85[_0x156185(0xad)]()['toString']()['padStart'](0x2,'0')+':'+_0x523a85[_0x156185(0x6e)]()[_0x156185(0xd0)]()[_0x156185(0x188)](0x2,'0');}function getTimeStamp(){const _0x4e8b1e=_0x320401,_0x205891=shiftedTime();return _0x205891[_0x4e8b1e(0xb4)]()+'/'+(_0x205891[_0x4e8b1e(0x1cb)]()+0x1)[_0x4e8b1e(0xd0)]()[_0x4e8b1e(0x188)](0x2,'0')+'/'+_0x205891[_0x4e8b1e(0x118)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x205891['getHours']()['toString']()[_0x4e8b1e(0x188)](0x2,'0')+':'+_0x205891['getMinutes']()[_0x4e8b1e(0xd0)]()['padStart'](0x2,'0')+':'+_0x205891['getSeconds']()[_0x4e8b1e(0xd0)]()['padStart'](0x2,'0');}function getDate(){const _0x105793=_0x320401,_0xe9846=shiftedTime();return _0xe9846[_0x105793(0xb4)]()+'/'+(_0xe9846[_0x105793(0x1cb)]()+0x1)[_0x105793(0xd0)]()[_0x105793(0x188)](0x2,'0')+'/'+_0xe9846[_0x105793(0x118)]()[_0x105793(0xd0)]()[_0x105793(0x188)](0x2,'0');}function getHour(){const _0x478917=_0x320401,_0x260781=shiftedTime();return _0x260781[_0x478917(0x1bf)]()[_0x478917(0xd0)]()[_0x478917(0x188)](0x2,'0');}function sleep(_0x482827){return new Promise(_0xce978a=>setTimeout(_0xce978a,_0x482827));}function shiftedTime(){const _0x3bafa7=_0x320401,_0x4fcc6c=new Date();let _0x1ea9cb=_0x4fcc6c;if(config&&config[_0x3bafa7(0x124)]!==0x0)_0x1ea9cb=fns[_0x3bafa7(0x11e)](_0x4fcc6c,{'hours':config['timeshift']});return _0x1ea9cb;}function timer(_0x3fe6c6){const _0x5445cb=_0x320401,_0xfa7457=new Date();!lasttime?console['log'](getTimeStamp()+':\x20timer\x20>',_0x3fe6c6,_0xfa7457):console[_0x5445cb(0x19f)](getTimeStamp()+_0x5445cb(0x8d),_0x3fe6c6,(_0xfa7457-lasttime)/0x3e8),lasttime=_0xfa7457;}