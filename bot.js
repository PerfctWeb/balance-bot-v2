const _0x28261=_0x33bd;(function(_0x16ddef,_0x453e33){const _0x2c98b6=_0x33bd,_0x1e39b1=_0x16ddef();while(!![]){try{const _0x68ae1c=parseInt(_0x2c98b6(0x13e))/0x1*(-parseInt(_0x2c98b6(0xe0))/0x2)+-parseInt(_0x2c98b6(0x12c))/0x3+parseInt(_0x2c98b6(0x166))/0x4*(parseInt(_0x2c98b6(0x16b))/0x5)+-parseInt(_0x2c98b6(0xea))/0x6+parseInt(_0x2c98b6(0x1de))/0x7*(-parseInt(_0x2c98b6(0x128))/0x8)+parseInt(_0x2c98b6(0x148))/0x9+parseInt(_0x2c98b6(0x146))/0xa;if(_0x68ae1c===_0x453e33)break;else _0x1e39b1['push'](_0x1e39b1['shift']());}catch(_0xf332e8){_0x1e39b1['push'](_0x1e39b1['shift']());}}}(_0x5efb,0x514c8));const _0x5063a1=function(){let _0x127660=!![];return function(_0x4b07b1,_0x51d10a){const _0x5c9944=_0x127660?function(){const _0x2be631=_0x33bd;if(_0x51d10a){const _0x4a7e85=_0x51d10a[_0x2be631(0x1b9)](_0x4b07b1,arguments);return _0x51d10a=null,_0x4a7e85;}}:function(){};return _0x127660=![],_0x5c9944;};}(),_0xf47ef0=_0x5063a1(this,function(){const _0x38c8aa=_0x33bd;return _0xf47ef0[_0x38c8aa(0x127)]()[_0x38c8aa(0x18c)]('(((.+)+)+)+$')[_0x38c8aa(0x127)]()[_0x38c8aa(0x19d)](_0xf47ef0)[_0x38c8aa(0x18c)](_0x38c8aa(0x1a9));});_0xf47ef0();'use strict';const ccxt=require(_0x28261(0xf8)),low=require(_0x28261(0x11b)),FileSync=require(_0x28261(0x1ce)),fs=require('fs'),fns=require(_0x28261(0xe7)),{WebsocketClient,DefaultLogger}=require(_0x28261(0x109)),Crypt=require(_0x28261(0x177))[_0x28261(0x1cb)];let exchange,wsClient;function _0x5efb(){const _0x4f176d=['HOT/BTC','secure','enabled','limits','Pausing\x20bot\x20for\x205\x20minutes\x20(','shift','spot','sell','\x20-\x20','Binance\x20API\x20secret\x20is\x20invalid','offset','userData','constructor','symbols','Limit\x20(high-margin)','startnumber','restart','Performance\x20recreation\x20completed\x20successfully','bot','startdate','max','split','headless','configuration-stored','(((.+)+)+)+$','mkdirSync','bid','remainingSymbols','emitHistory','************','Bot\x20','performance','Performance\x20recreation\x20process\x20started\x20-\x20this\x20may\x20take\x20several\x20minutes','close','eur','remove','logs','realized','balances','filter','apply','ask','wss://stream.binance.us:9443','add','eventType','breakeven','toLowerCase','AuthenticationError','getDate','getFiat()','orderStatus','\x20|\x20Unknown\x20error\x20occured','usd','getPortfolio',')\x20|\x20Binance\x20exchange\x20is\x20not\x20available','initclient','BTCEUR','coin-loading-progress','Crypt','bot-','./version.json','lowdb/adapters/FileSync','event-history','\x20|\x20Binance\x20API\x20key\x20is\x20invalid','splice','Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance',':\x20Bot\x20','currency','amount','filled','asset','data','recreate','entries','\x20|\x20Binance\x20exchange\x20is\x20not\x20available','min','sha256','14xScdir','padStart','sort','success','threshold','Binance\x20API\x20key\x20is\x20invalid','abs','botname','fetchOrders','ExchangeNotAvailable','InsufficientFunds','\x20>\x20','BTC/EUR','orderType','getHours','RequestTimeout','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','defaults','FILLED','WebSockets(','DDoSProtection','LIMIT','2VXdRzS','getSeconds','keys','send','initws()','limit','cancelOrder()','date-fns','log','price','314550YvDcdX','write','showname','ticker','eachDayOfInterval','wsKey','sells','RSA-OAEP','reverse','BTC','has','limit-low','\x20|\x20Binance\x20exchange\x20is\x20not\x20responding','args','ccxt','error','Order\x20amount\x20is\x20invalid:\x20','\x20|\x20Your\x20computer\x27s\x20internal\x20clock\x20is\x20out\x20of\x20sync\x20-\x20please\x20sync\x20clock','market','BNB','USDC','fromCodePoint','exchange','isArray','distribution','basecoin','InvalidNonce','cost','includes','getMinutes','\x20|\x20Binance\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20make\x20sure\x20your\x20computer\x27s\x20/\x20server\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20in\x20Binance','binance','Waiting\x20for\x20order(s)\x20to\x20be\x20filled\x20-\x20balancing\x20paused','fees','push','event','configuration','fetchTickers','getMonth','buy','\x20|\x20Binance\x20API\x20blocked\x20-\x20check\x20Binance\x20API\x20key\x20settings\x20(enable\x20spot\x20trading\x20&\x20IP\x20whitelist)','get','symbol','outboundAccountPosition','\x20order:\x20','sortBy','-results.json','cancelLoading','datetime','lowdb','Order(s)\x20filled\x20-\x20balancing\x20resumed','side','timestamp','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','test','coin','storeConfiguration','BTCUSDT','order','\x20|\x20Insufficient\x20funds\x20to\x20execute\x20order','find','toString','1625080JoqKtI','USDT','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled','settings','971799JIcRyV','kill','progress','coins','accumulatedQuantity','time','slice','Limit\x20(low-margin)','BUSD','last','startprice','EUR','type','excluded','assign','round','orderId','stringify','244366HKMSTf','getStartingBalances','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot',')\x20|\x20Error\x20details:\x20','apiSecret','page','-events.json','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','4114600EoggRj','value','5869692lVAAjG','001','fee','version','timeout','\x20minutes\x20-\x20balancing\x20resumed','parse','\x20|\x20Error\x20details:\x20','portfolio','binanceus','emojibuy','function','availableBalance','delta','kline','getFullYear','recreateHistory()','Timestamp\x20for\x20this\x20request\x20was\x201000ms\x20ahead','fetchOHLCV','subscribeSpotKline','wss://stream.binance.com:9443','cooldown','date','target','trade','replace','bb-secure.json','placeOrder()','OrderNotFound','toFixed','592692RaLscQ','Waiting\x20for\x20order(s)\x20to\x20be\x20validated\x20-\x20balancing\x20paused','valid','placeOrder','argv','10mPhxmt','emojisell','closeWs','forEach','message','\x20|\x20An\x20API\x20or\x20clock\x20sync\x20issue\x20has\x20occured','./config/','-config.json','getCoins()','apiKey','number','getPortfolio()','hybrid-crypto-js','bb-settings.json','getCloses()','getTime','BTC/BUSD','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','running','Invalid\x20quantity','API-key\x20format\x20invalid','buys','Unfilled\x20order(s)\x20canceled\x20after\x20','Order(s)\x20validated\x20-\x20balancing\x20resumed','yyyy/MM/dd','total','limit-high','parseISO','format','starting-balances','-performance.json','ordertype','DAI/','search','decrypt','createOrder','length','timeshift'];_0x5efb=function(){return _0x4f176d;};return _0x5efb();}global['ticker']={};let ws1=[],ws2=null,config,markets,allSymbols,currentCoins=[],previousCoins=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,lockOrders=![],lastOrders,cooldownTracker=[],coolingDown=![];const resetInterval=0xe10*0x3e8,cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c;let initialPerformanceStored;const logPageSize=0x14;let wsinitialized=![],pidBalances,pidOrders,botPaused=![],loadingCanceled=![],loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};const serverversion=require(_0x28261(0x1cd))[_0x28261(0x14b)],botID=process[_0x28261(0x16a)][0x2]||_0x28261(0x149),pattern=/^[0-9]{3}$/;if(!pattern[_0x28261(0x120)](botID))return console[_0x28261(0xe8)]('Error:\x20Invalid\x20argument\x20'+botID+',\x20must\x20be\x20a\x203\x20digit\x20number'),process['exit'](0x1);const userID=process[_0x28261(0x16a)][0x3]||'',configpath=userID?_0x28261(0x171)+userID+'/':_0x28261(0x171);!fs['existsSync'](configpath)&&fs[_0x28261(0x1aa)](configpath);const configfile=configpath+_0x28261(0x1cc)+botID+_0x28261(0x172),logfile=configpath+_0x28261(0x1cc)+botID+_0x28261(0x144),performancefile=configpath+_0x28261(0x1cc)+botID+_0x28261(0x189),coinresultsfile=configpath+_0x28261(0x1cc)+botID+_0x28261(0x118),settingsfile=configpath+_0x28261(0x178),securefile=configpath+_0x28261(0x162),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs['defaults']({'logs':[]})[_0x28261(0xeb)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x28261(0xdb)]({'data':[]})[_0x28261(0xeb)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[]})[_0x28261(0xeb)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x28261(0xdb)]({'coins':[]})[_0x28261(0xeb)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins={'eur':{'coin':_0x28261(0x1c9),'symbol':_0x28261(0x1ea)},'usd':{'coin':'BTCUSDT','symbol':'BTC/USDT'}},lastErrorShown,lastBotPause,consecutivePauses=0x0;const logger={...DefaultLogger,'silly':(..._0xf1dc19)=>{},'debug':(..._0x105101)=>{},'notice':(..._0xc235fd)=>{},'info':(..._0x2ecd64)=>{},'warning':(..._0x5e59bb)=>{},'error':async function(..._0x2d854c){const _0x1d5ca1=_0x28261,_0x361030=new Date()['getTime']();if(!lastErrorShown||_0x361030-lastErrorShown>=pauseBotInterval){lastErrorShown=new Date()[_0x1d5ca1(0x17a)](),logHistory('error','WebSockets('+consecutivePauses+_0x1d5ca1(0x1c7));let _0x24c258='';if(_0x2d854c[0x0])_0x24c258+=_0x2d854c[0x0];if(_0x2d854c[0x1]&&_0x2d854c[0x1][_0x1d5ca1(0xf9)]&&_0x2d854c[0x1]['error'][_0x1d5ca1(0x16f)])_0x24c258+=_0x1d5ca1(0x199)+_0x2d854c[0x1][_0x1d5ca1(0xf9)][_0x1d5ca1(0x16f)];logging(_0x1d5ca1(0xdd)+consecutivePauses+_0x1d5ca1(0x141),''+_0x24c258),await pauseBot(pauseBotInterval);}}},crypt=new Crypt({'md':_0x28261(0x1dd),'rsaStandard':_0x28261(0xf1)});let settings=getSettings(),secure=getSecure();config=getConfiguration(botID);settings[_0x28261(0x190)]!=config[_0x28261(0x190)]&&updateTimeshift(settings[_0x28261(0x190)]);process[_0x28261(0xe3)]({'started':_0x28261(0x17d)},_0x14d720=>{}),initializeProcessListeners();function proxyEmit(_0x2c0c94,_0x5afa74=null){const _0x3c5cdb=_0x28261;process[_0x3c5cdb(0xe3)]({'function':_0x2c0c94,'args':_0x5afa74},_0x2087f5=>{});}function initializeProcessListeners(){const _0x389d58=_0x28261;process['on'](_0x389d58(0x16f),_0x2109f0=>{const _0x16ee08=_0x389d58;switch(Object[_0x16ee08(0xe2)](_0x2109f0)[0x0]){case _0x16ee08(0x190):_0x2109f0[_0x16ee08(0x190)]!=undefined&&(settings[_0x16ee08(0x190)]=_0x2109f0['timeshift'],updateTimeshift(settings[_0x16ee08(0x190)]));break;case _0x16ee08(0x153):switch(_0x2109f0['function']){case _0x16ee08(0x1c8):initclient();break;case _0x16ee08(0x1ad):emitHistory(_0x2109f0[_0x16ee08(0xf7)]);break;case _0x16ee08(0x1c6):getPortfolio(_0x2109f0['args']);break;case _0x16ee08(0x122):storeConfiguration(_0x2109f0['args']);break;case'storeHeadless':storeHeadless(_0x2109f0[_0x16ee08(0xf7)]);break;case _0x16ee08(0x13f):getStartingBalances();break;case _0x16ee08(0x169):placeOrder(_0x2109f0[_0x16ee08(0xf7)]);break;case _0x16ee08(0x119):cancelLoading();break;}}});}headlessStart();async function headlessStart(){reset();}async function reset(){const _0xd19f8f=_0x28261;if(pidBalances)clearTimeout(pidBalances);if(config[_0xd19f8f(0x174)]!=''){await initExchange(config['apiKey'],config[_0xd19f8f(0x142)]);let _0x378d85=await loadSymbols();_0x378d85&&(currentCoins=await getCoins(),await initws(),initbot());}}async function initExchange(_0xc2b975,_0x49802a){const _0x114f74=_0x28261,_0x29a492=ccxt[config['exchange']];let _0xe0153d;switch(config[_0x114f74(0x100)]){case _0x114f74(0x109):_0xe0153d=_0x114f74(0x15c);break;case'binanceus':_0xe0153d=_0x114f74(0x1bb);break;default:_0xe0153d='wss://stream.binance.com:9443';}exchange=new _0x29a492({'apiKey':_0xc2b975,'secret':_0x49802a,'timeout':0x7530,'enableRateLimit':!![]}),wsClient=new WebsocketClient({'api_key':_0xc2b975,'api_secret':_0x49802a,'beautify':!![],'wsUrl':_0xe0153d},logger),config['exchange']==_0x114f74(0x151)&&(stablecoins={'eur':{'coin':'BTCBUSD','symbol':_0x114f74(0x17b)},'usd':{'coin':_0x114f74(0x123),'symbol':'BTC/USDT'}});}async function loadSymbols(){const _0x15fae3=_0x28261;let _0x275be0;try{markets=await exchange['loadMarkets']();const _0x342f01=[_0x15fae3(0x18b),_0x15fae3(0x191),'HOT/EUR'];allSymbols=exchange[_0x15fae3(0x19e)][_0x15fae3(0x1b8)](_0x445e2a=>{let _0x4772c0=![];return _0x342f01['forEach'](_0xb68e89=>{const _0x2fe264=_0x33bd;if(_0x445e2a[_0x2fe264(0x106)](_0xb68e89))_0x4772c0=!![];}),!_0x4772c0;}),_0x275be0=!![];}catch(_0x253e55){await handleError(_0x253e55,'loadSymbols()'),_0x275be0=![];}return _0x275be0;}async function initbot(){const _0x1985a5=_0x28261;while(!wsinitialized){await sleep(0xc8);}initialPerformanceStored=![],await getBalances();let _0x2b0234=dbCoinResults[_0x1985a5(0x113)]('coins')[_0x1985a5(0x147)]();if(_0x2b0234[_0x1985a5(0x18f)]==0x0)await resetCoinResults();}async function initclient(){const _0x36e8b1=_0x28261;proxyEmit(_0x36e8b1(0x10e),emittedConfiguration()),emitLoadingProgress();while(!wsinitialized){await sleep(0xc8);}if(lastBalances)proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});emitPerformance(),emitHistory(),await getStartingBalances();}function cleanws(){const _0x4e30d4=_0x28261;wsinitialized=![];ws1&&(ws1['forEach'](_0x137c2f=>{const _0x5974db=_0x33bd;try{wsClient[_0x5974db(0x16d)](_0x137c2f);}catch(_0x2e6c22){}}),ws1=[]);if(ws2){try{wsClient[_0x4e30d4(0x16d)](ws2);}catch(_0x400817){}ws2=null;}}async function initws(){const _0x43778f=_0x28261;cleanws();let _0x49d5dc=[];currentCoins[_0x43778f(0x16e)](_0x2e074d=>{const _0x39f5c5=_0x43778f;if(_0x2e074d['coin']!=config[_0x39f5c5(0x103)])_0x49d5dc[_0x39f5c5(0x10c)](noslash(_0x2e074d[_0x39f5c5(0x114)]));});if(!_0x49d5dc[_0x43778f(0x106)](stablecoins['eur']['coin']))_0x49d5dc['push'](stablecoins[_0x43778f(0x1b3)][_0x43778f(0x121)]);if(!_0x49d5dc[_0x43778f(0x106)](stablecoins[_0x43778f(0x1c5)][_0x43778f(0x121)]))_0x49d5dc[_0x43778f(0x10c)](stablecoins[_0x43778f(0x1c5)][_0x43778f(0x121)]);if(!_0x49d5dc[_0x43778f(0x106)](_0x43778f(0xfd)+config[_0x43778f(0x103)]))_0x49d5dc[_0x43778f(0x10c)](_0x43778f(0xfd)+config[_0x43778f(0x103)]);try{_0x49d5dc[_0x43778f(0x16e)]((_0x3bbd31,_0x3128cc)=>{const _0x56ca7b=_0x43778f;ws1[_0x3128cc]=wsClient[_0x56ca7b(0x15b)](_0x3bbd31,'1m');}),ws2=wsClient['subscribeSpotUserDataStream'](),wsClient['on']('formattedMessage',_0x42225b=>{const _0x1d916d=_0x43778f;if(!Array[_0x1d916d(0x101)](_0x42225b)&&!_0x42225b[_0x1d916d(0xef)][_0x1d916d(0x106)]('userData')){if(_0x42225b[_0x1d916d(0x1bd)]===_0x1d916d(0x156)){global[_0x1d916d(0xed)][_0x42225b['kline'][_0x1d916d(0x114)]]=_0x42225b[_0x1d916d(0x156)][_0x1d916d(0x1b2)];return;}}else{if(!Array[_0x1d916d(0x101)](_0x42225b)&&_0x42225b[_0x1d916d(0xef)]['includes'](_0x1d916d(0x19c))){if(_0x42225b['wsMarket'][_0x1d916d(0x106)](_0x1d916d(0x197))){updateNumberCoins(_0x42225b);return;}}}}),wsClient['on']('reconnected',async _0x5146ee=>{if(!botPaused)currentCoins=await getCoins();});}catch(_0xbade69){await handleError(_0xbade69,_0x43778f(0xe4));}let _0x5b1d0a,_0x501ac1=0x0;loading[_0x43778f(0x1ac)]=[];let _0x1a9956=0x0;currentCoins[_0x43778f(0x16e)](_0x19499e=>{const _0x5105d3=_0x43778f;if(_0x19499e['coin']!=config['basecoin'])loading[_0x5105d3(0x1ac)][_0x5105d3(0x10c)](_0x19499e[_0x5105d3(0x114)]);}),loadingCanceled=![];while(_0x5b1d0a!=currentCoins[_0x43778f(0x18f)]-0x1){_0x5b1d0a=0x0,currentCoins[_0x43778f(0x16e)](_0x1f2a9e=>{const _0x2c565e=_0x43778f;_0x1f2a9e[_0x2c565e(0x121)]!=config[_0x2c565e(0x103)]&&global[_0x2c565e(0xed)][noslash(_0x1f2a9e[_0x2c565e(0x114)])]&&(loading['remainingSymbols']=loading[_0x2c565e(0x1ac)][_0x2c565e(0x1b8)](_0x36c0d9=>_0x36c0d9!=_0x1f2a9e['symbol']),_0x5b1d0a++);}),loading[_0x43778f(0x12e)]=Math[_0x43778f(0x13b)](_0x5b1d0a/(currentCoins[_0x43778f(0x18f)]-0x1)*0x64);_0x1a9956>0x1e*0x5&&(loading[_0x43778f(0x14c)]=!![],emitLoadingProgress());if(loadingCanceled){loading['cancel']=!![],emitLoadingProgress();break;}else _0x5b1d0a!=_0x501ac1&&(_0x501ac1=_0x5b1d0a,emitLoadingProgress()),_0x1a9956++,await sleep(0xc8);}if(_0x5b1d0a==currentCoins[_0x43778f(0x18f)]-0x1)wsinitialized=!![];}function cancelLoading(){loadingCanceled=!![];}function emitLoadingProgress(){const _0x6d77=_0x28261;proxyEmit(_0x6d77(0x1ca),loading);}async function getFiat(){const _0xaab3ff=_0x28261;let _0x1e60e8=0x0,_0x351520=0x0;try{_0x1e60e8=global[_0xaab3ff(0xed)][stablecoins[_0xaab3ff(0x1b3)][_0xaab3ff(0x121)]],_0x351520=global['ticker'][stablecoins[_0xaab3ff(0x1c5)][_0xaab3ff(0x121)]];}catch(_0x1177af){await handleError(_0x1177af,_0xaab3ff(0x1c2));}return{'eur':Number(_0x1e60e8),'usd':Number(_0x351520)};}async function setStartDatePerformance(_0x53914e){const _0x142d34=_0x28261,_0x3beeef=fns[_0x142d34(0x187)](new Date(_0x53914e[_0x142d34(0x1a4)]),_0x142d34(0x183));let _0xdfdd51=[];_0xdfdd51[stablecoins[_0x142d34(0x1b3)][_0x142d34(0x121)]]=await getCloses(stablecoins['eur']['symbol'],new Date(_0x53914e['startdate']),0x1),_0xdfdd51[stablecoins['usd'][_0x142d34(0x121)]]=await getCloses(stablecoins[_0x142d34(0x1c5)][_0x142d34(0x114)],new Date(_0x53914e[_0x142d34(0x1a4)]),0x1);let _0x2853ca,_0x483c89=[];_0x53914e[_0x142d34(0x150)]['forEach'](_0x3cfd6e=>{const _0x20ff7c=_0x142d34;!_0x3cfd6e[_0x20ff7c(0x139)]&&_0x483c89['push']({'coin':_0x3cfd6e[_0x20ff7c(0x121)],'number':_0x3cfd6e['startnumber'],'price':_0x3cfd6e[_0x20ff7c(0x136)]});}),_0x2853ca={'date':_0x3beeef,'eur':_0xdfdd51[stablecoins[_0x142d34(0x1b3)][_0x142d34(0x121)]][0x0],'usd':_0xdfdd51[stablecoins[_0x142d34(0x1c5)]['coin']][0x0],'coins':_0x483c89};let _0x25354c=dbPerformance[_0x142d34(0x113)]('data')[_0x142d34(0x126)]({'date':_0x3beeef})['value']();_0x25354c?dbPerformance[_0x142d34(0x113)]('data')[_0x142d34(0x126)]({'date':_0x3beeef})[_0x142d34(0x13a)](_0x2853ca)[_0x142d34(0xeb)]():dbPerformance['get'](_0x142d34(0x1d8))[_0x142d34(0x10c)](_0x2853ca)[_0x142d34(0xeb)](),_0x25354c=dbPerformance[_0x142d34(0x113)](_0x142d34(0x1d8))[_0x142d34(0x117)](_0x142d34(0x15e))[_0x142d34(0x147)](),_0x25354c[_0x142d34(0x16e)](_0x41abfc=>{const _0x5ce9fa=_0x142d34;_0x41abfc[_0x5ce9fa(0x15e)]<_0x3beeef&&dbPerformance[_0x5ce9fa(0x113)](_0x5ce9fa(0x1d8))[_0x5ce9fa(0x1b4)]({'date':_0x41abfc['date']})['write']();}),await storePerformance(),emitPerformance();}async function recreateHistory(_0x20bc5f){const _0x5895ad=_0x28261;let _0xb44b70,_0x1c5ed8=[];logHistory(_0x5895ad(0x1e1),_0x5895ad(0x1b1)),_0x20bc5f[_0x5895ad(0x150)]['forEach'](_0x17512e=>{const _0x5a576f=_0x5895ad;if(_0x17512e[_0x5a576f(0x121)]!=config[_0x5a576f(0x103)]&&!_0x17512e[_0x5a576f(0x139)])_0x1c5ed8[_0x5a576f(0x10c)]({'coin':_0x17512e['coin'],'symbol':_0x17512e[_0x5a576f(0x114)]});});let _0x3fef1e=[];try{const _0x461e07=fns['format'](fns[_0x5895ad(0x186)](_0x20bc5f[_0x5895ad(0x1a4)][_0x5895ad(0x161)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x5979c4 of _0x1c5ed8){if(_0x5979c4[_0x5895ad(0x121)]!=config['basecoin'])_0xb44b70=await exchange[_0x5895ad(0x1e6)](_0x5979c4[_0x5895ad(0x114)],Date[_0x5895ad(0x14e)](_0x461e07));_0xb44b70[_0x5895ad(0x16e)](_0xd0c14c=>{const _0x5afbfd=_0x5895ad,_0x5c7ce4=_0x5979c4[_0x5afbfd(0x114)][_0x5afbfd(0x106)](config[_0x5afbfd(0x103)]+'/'),_0x581b4a=fns[_0x5afbfd(0x187)](fns[_0x5afbfd(0x186)](_0xd0c14c[_0x5afbfd(0x11a)]),'yyyy/MM/dd\x20HH:mm:ss'),_0x3d47b3=fns[_0x5afbfd(0x187)](fns[_0x5afbfd(0x186)](_0xd0c14c[_0x5afbfd(0x11a)]),_0x5afbfd(0x183));let _0x18edd8;if(_0xd0c14c[_0x5afbfd(0x11d)]=='buy'&&_0x5c7ce4==![])_0x18edd8=_0xd0c14c['amount'];if(_0xd0c14c[_0x5afbfd(0x11d)]=='buy'&&_0x5c7ce4==!![])_0x18edd8=-_0xd0c14c[_0x5afbfd(0x1d5)]*_0xd0c14c[_0x5afbfd(0xe9)];if(_0xd0c14c['side']==_0x5afbfd(0x198)&&_0x5c7ce4==![])_0x18edd8=-_0xd0c14c[_0x5afbfd(0x1d5)];if(_0xd0c14c[_0x5afbfd(0x11d)]=='sell'&&_0x5c7ce4==!![])_0x18edd8=_0xd0c14c[_0x5afbfd(0x1d5)]*_0xd0c14c['price'];_0x3fef1e[_0x5afbfd(0x10c)]({'timestamp':_0x581b4a,'date':_0x3d47b3,'coin':_0x5979c4['coin'],'symbol':_0x5979c4[_0x5afbfd(0x114)],'type':_0xd0c14c[_0x5afbfd(0x138)],'side':_0xd0c14c[_0x5afbfd(0x11d)],'reverse':_0x5c7ce4,'amount':formatResult(_0xd0c14c[_0x5afbfd(0x1d6)],0x8),'filled':formatResult(_0xd0c14c[_0x5afbfd(0x1d6)],0x8),'coinamount':formatResult(_0x18edd8,0x8),'price':formatResult(_0xd0c14c[_0x5afbfd(0xe9)],0x8)});let _0x487eeb;if(_0xd0c14c[_0x5afbfd(0x11d)]==_0x5afbfd(0x111)&&_0x5c7ce4==![])_0x487eeb=-_0xd0c14c[_0x5afbfd(0x1d5)]*_0xd0c14c[_0x5afbfd(0xe9)];if(_0xd0c14c[_0x5afbfd(0x11d)]==_0x5afbfd(0x111)&&_0x5c7ce4==!![])_0x487eeb=_0xd0c14c[_0x5afbfd(0x1d5)];if(_0xd0c14c[_0x5afbfd(0x11d)]==_0x5afbfd(0x198)&&_0x5c7ce4==![])_0x487eeb=_0xd0c14c['amount']*_0xd0c14c[_0x5afbfd(0xe9)];if(_0xd0c14c[_0x5afbfd(0x11d)]==_0x5afbfd(0x198)&&_0x5c7ce4==!![])_0x487eeb=-_0xd0c14c[_0x5afbfd(0x1d5)];_0x3fef1e[_0x5afbfd(0x10c)]({'date':_0x3d47b3,'coin':config[_0x5afbfd(0x103)],'coinamount':formatResult(_0x487eeb,0x8)});});}_0x3fef1e[_0x5895ad(0x1e0)]((_0x3122d9,_0x4dd3ad)=>_0x3122d9[_0x5895ad(0x11e)]>_0x4dd3ad[_0x5895ad(0x11e)]?0x1:_0x4dd3ad[_0x5895ad(0x11e)]>_0x3122d9[_0x5895ad(0x11e)]?-0x1:0x0),dbLogs['get'](_0x5895ad(0x1b5))[_0x5895ad(0x1b4)]()[_0x5895ad(0xeb)](),_0x3fef1e['forEach'](_0xe1a165=>{const _0x1f73c1=_0x5895ad;let _0x3ce15c;_0xe1a165[_0x1f73c1(0x121)]!=config[_0x1f73c1(0x103)]&&(_0x3ce15c={'time':_0xe1a165[_0x1f73c1(0x11e)],'type':_0x1f73c1(0x124),'event':'Order:\x20'+_0xe1a165[_0x1f73c1(0x114)]+'\x20'+_0xe1a165[_0x1f73c1(0x11d)]+'\x20#'+_0xe1a165[_0x1f73c1(0x1d5)]+'\x20@'+_0xe1a165['price']},dbLogs[_0x1f73c1(0x113)](_0x1f73c1(0x1b5))[_0x1f73c1(0x10c)](_0x3ce15c)[_0x1f73c1(0xeb)]());});const _0x594001=fns[_0x5895ad(0xee)]({'start':new Date(_0x20bc5f[_0x5895ad(0x1a4)]),'end':new Date()})['map'](_0x5000ce=>fns[_0x5895ad(0x187)](_0x5000ce,'yyyy/MM/dd'));let _0x3881cc=[];_0x20bc5f['portfolio'][_0x5895ad(0x16e)](_0x4361b9=>{const _0x247c1e=_0x5895ad;if(!_0x4361b9[_0x247c1e(0x139)]){_0x3881cc[_0x4361b9['coin']]=[];let _0x473967=_0x4361b9['startnumber'];_0x594001['forEach']((_0x30c94e,_0x1ad400)=>{const _0x5bac48=_0x247c1e;let _0x30f74b=_0x3fef1e[_0x5bac48(0x1b8)](_0x389252=>_0x389252['coin']==_0x4361b9[_0x5bac48(0x121)]&&_0x389252[_0x5bac48(0x15e)]==_0x30c94e);if(_0x30f74b[_0x5bac48(0x18f)]!=0x0){let _0x2ef9dd=_0x30f74b['reduce']((_0xca96e,_0x30c31c)=>{return _0xca96e+=_0x30c31c['coinamount'],_0xca96e;},0x0);_0x473967+=_0x2ef9dd;}_0x3881cc[_0x4361b9['coin']][_0x30c94e]=_0x473967;});}});const _0x1d02bf=[..._0x1c5ed8];_0x1d02bf[_0x5895ad(0x10c)]({'coin':stablecoins[_0x5895ad(0x1b3)][_0x5895ad(0x121)],'symbol':stablecoins['eur']['symbol']}),_0x1d02bf[_0x5895ad(0x10c)]({'coin':stablecoins[_0x5895ad(0x1c5)][_0x5895ad(0x121)],'symbol':stablecoins[_0x5895ad(0x1c5)]['symbol']});let _0x1c6b25=[];for(const _0x17ee32 of _0x1d02bf){_0x1c6b25[_0x17ee32[_0x5895ad(0x121)]]=await getCloses(_0x17ee32['symbol'],new Date(_0x20bc5f[_0x5895ad(0x1a4)]));}dbPerformance[_0x5895ad(0x113)]('data')['remove']()[_0x5895ad(0xeb)](),_0x594001[_0x5895ad(0x16e)]((_0x2600a3,_0x407a01)=>{const _0x29d71b=_0x5895ad;let _0x5559fe,_0x14daeb=[];_0x407a01==0x0?(_0x20bc5f[_0x29d71b(0x150)][_0x29d71b(0x16e)](_0x151f93=>{const _0x579719=_0x29d71b;!_0x151f93[_0x579719(0x139)]&&_0x14daeb[_0x579719(0x10c)]({'coin':_0x151f93['coin'],'number':_0x151f93[_0x579719(0x1a0)],'price':_0x151f93[_0x579719(0x136)]});}),_0x5559fe={'date':_0x2600a3,'eur':_0x1c6b25[stablecoins['eur']['coin']][_0x407a01],'usd':_0x1c6b25[stablecoins[_0x29d71b(0x1c5)][_0x29d71b(0x121)]][_0x407a01],'coins':_0x14daeb}):(_0x20bc5f[_0x29d71b(0x150)][_0x29d71b(0x16e)](_0x204483=>{const _0x31045c=_0x29d71b;!_0x204483['excluded']&&_0x14daeb['push']({'coin':_0x204483[_0x31045c(0x121)],'number':_0x3881cc[_0x204483[_0x31045c(0x121)]][_0x2600a3],'price':_0x204483[_0x31045c(0x121)]==config[_0x31045c(0x103)]?0x1:_0x1c6b25[_0x204483[_0x31045c(0x121)]][_0x407a01]});}),_0x5559fe={'date':_0x2600a3,'eur':_0x1c6b25[stablecoins[_0x29d71b(0x1b3)]['coin']][_0x407a01],'usd':_0x1c6b25[stablecoins[_0x29d71b(0x1c5)][_0x29d71b(0x121)]][_0x407a01],'coins':_0x14daeb}),dbPerformance[_0x29d71b(0x113)](_0x29d71b(0x1d8))[_0x29d71b(0x10c)](_0x5559fe)['write']();}),emitPerformance(),await resetCoinResults();for(let _0x50ffaf of _0x3fef1e){_0x50ffaf[_0x5895ad(0x121)]!=config[_0x5895ad(0x103)]&&await updateCoinResults(_0x50ffaf);}logHistory(_0x5895ad(0x1e1),_0x5895ad(0x1a2));}catch(_0x11724){await handleError(_0x11724,_0x5895ad(0x158));}}async function getCloses(_0x88eae2,_0x45be41,_0x1a6d99=undefined){const _0x3e95fe=_0x28261,_0x4e3abd='1d';let _0xba68d7,_0x57d84a;const _0x4f5f77=fns['differenceInCalendarDays'](new Date(),_0x45be41)+0x1;try{const _0x1b1dba=exchange['milliseconds']()-_0x4f5f77*0x18*0xe10*0x3e8;_0xba68d7=await exchange[_0x3e95fe(0x15a)](_0x88eae2,_0x4e3abd,_0x1b1dba,_0x1a6d99),_0x57d84a=await exchange[_0x3e95fe(0x10f)](_0x88eae2);}catch(_0x29c205){await handleError(_0x29c205,_0x3e95fe(0x179));}let _0x4cdb69=ohlcvToCloses(_0xba68d7);return _0x4cdb69[_0x3e95fe(0x10c)](_0x57d84a[_0x88eae2][_0x3e95fe(0x135)]),_0x4cdb69;}function ohlcvToCloses(_0x28b821){const _0x4b3bc0=_0x28261;let _0x2e6496=[];return _0x28b821[_0x4b3bc0(0x16e)](function(_0x37e740){const _0x37005a=_0x4b3bc0;_0x2e6496[_0x37005a(0x10c)](_0x37e740[0x4]);}),_0x2e6496;}function getConfiguration(_0x540590){const _0x315b70=_0x28261;let _0x29503a=dbConfig[_0x315b70(0x113)](_0x315b70(0x1a3))[_0x315b70(0x126)]({'botID':_0x540590})[_0x315b70(0x147)]();if(_0x29503a){let _0x43f7bd=![];!_0x29503a[_0x315b70(0x100)]&&(_0x29503a={..._0x29503a,'exchange':'binance'},_0x43f7bd=!![]),!_0x29503a[_0x315b70(0x103)]&&(_0x29503a={..._0x29503a,'basecoin':_0x315b70(0xf3)},_0x43f7bd=!![]),!_0x29503a[_0x315b70(0x18a)]&&(_0x29503a={..._0x29503a,'ordertype':_0x315b70(0xfc)},_0x43f7bd=!![]),!_0x29503a['timeout']&&(_0x29503a={..._0x29503a,'timeout':0x14},_0x43f7bd=!![]),!_0x29503a[_0x315b70(0x152)]&&(_0x29503a={..._0x29503a,'emojibuy':''},_0x43f7bd=!![]),!_0x29503a[_0x315b70(0x16c)]&&(_0x29503a={..._0x29503a,'emojisell':''},_0x43f7bd=!![]),!_0x29503a['showname']&&(_0x29503a={..._0x29503a,'showname':![]},_0x43f7bd=!![]),_0x43f7bd&&(_0x29503a={'botID':_0x29503a['botID'],'exchange':_0x29503a[_0x315b70(0x100)],'apiKey':_0x29503a[_0x315b70(0x174)],'apiSecret':_0x29503a['apiSecret'],'basecoin':_0x29503a[_0x315b70(0x103)],'botname':_0x29503a['botname'],'showname':_0x29503a[_0x315b70(0xec)],'threshold':_0x29503a[_0x315b70(0x1e2)],'ordertype':_0x29503a[_0x315b70(0x18a)],'timeout':_0x29503a[_0x315b70(0x14c)],'startdate':_0x29503a[_0x315b70(0x1a4)],'recreate':_0x29503a[_0x315b70(0x1d9)],'timeshift':_0x29503a[_0x315b70(0x190)],'headless':_0x29503a['headless'],'cooldown':_0x29503a[_0x315b70(0x15d)],'emojibuy':_0x29503a[_0x315b70(0x152)],'emojisell':_0x29503a['emojisell'],'portfolio':_0x29503a[_0x315b70(0x150)]},dbConfig[_0x315b70(0x113)](_0x315b70(0x1a3))[_0x315b70(0x1b4)]()[_0x315b70(0xeb)](),dbConfig[_0x315b70(0x113)](_0x315b70(0x1a3))[_0x315b70(0x10c)](_0x29503a)[_0x315b70(0xeb)]());}else _0x29503a={'botID':_0x540590,'exchange':_0x315b70(0x109),'apiKey':'','apiSecret':'','basecoin':'','botname':_0x315b70(0x1af)+_0x540590,'showname':![],'threshold':'3','ordertype':_0x315b70(0xfc),'timeout':0x14,'startdate':getDate(),'recreate':![],'timeshift':settings['timeshift'],'headless':![],'cooldown':0xa,'emojibuy':'','emojisell':'','portfolio':[]};return _0x29503a;}function emittedConfiguration(){const _0x33eee8=_0x28261;let _0x4aa05d;return config[_0x33eee8(0x174)]==''?_0x4aa05d=config:_0x4aa05d={...config,'apiKey':_0x33eee8(0x1ae),'apiSecret':'************'},_0x4aa05d;}function getSettings(){const _0x56f027=_0x28261;return dbSettings[_0x56f027(0x113)](_0x56f027(0x12b))['value']();}function getSecure(){const _0x36b885=_0x28261;return dbSecure[_0x36b885(0x113)](_0x36b885(0x192))['value']()||{};}function updateTimeshift(_0x16ca44){const _0xcae974=_0x28261;let _0x5ebad0=dbConfig[_0xcae974(0x113)](_0xcae974(0x1a3))[_0xcae974(0x126)]({'botID':botID})[_0xcae974(0x147)]();_0x5ebad0&&dbConfig['get'](_0xcae974(0x1a3))[_0xcae974(0x126)]({'botID':botID})[_0xcae974(0x13a)]({'timeshift':_0x16ca44})[_0xcae974(0xeb)](),config['timeshift']=_0x16ca44,proxyEmit(_0xcae974(0x10e),emittedConfiguration());}async function storeConfiguration(_0x20dba3){const _0x26b0df=_0x28261;loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![]};let _0x1dc269=dbConfig[_0x26b0df(0x113)]('bot')[_0x26b0df(0x126)]({'botID':botID})[_0x26b0df(0x147)]();_0x20dba3={..._0x20dba3,'apiKey':crypt[_0x26b0df(0x18d)](secure['privateKey'],_0x20dba3[_0x26b0df(0x174)])[_0x26b0df(0x16f)],'apiSecret':crypt[_0x26b0df(0x18d)](secure['privateKey'],_0x20dba3[_0x26b0df(0x142)])[_0x26b0df(0x16f)]};if(_0x1dc269){if(_0x20dba3[_0x26b0df(0x174)]=='************')_0x20dba3[_0x26b0df(0x174)]=config[_0x26b0df(0x174)];if(_0x20dba3[_0x26b0df(0x142)]=='************')_0x20dba3[_0x26b0df(0x142)]=config['apiSecret'];dbConfig[_0x26b0df(0x113)](_0x26b0df(0x1a3))['find']({'botID':botID})[_0x26b0df(0x13a)](_0x20dba3)[_0x26b0df(0xeb)]();}else dbConfig[_0x26b0df(0x113)]('bot')[_0x26b0df(0x10c)](_0x20dba3)[_0x26b0df(0xeb)](),process[_0x26b0df(0xe3)]({'status':_0x26b0df(0x193),'live':_0x26b0df(0x17d)},_0x3fe0e7=>{});config={..._0x20dba3};if(config[_0x26b0df(0x1d9)])await recreateHistory(config);else await setStartDatePerformance(config);process[_0x26b0df(0xe3)]({'botname':_0x20dba3[_0x26b0df(0x1e5)]},_0x1254a1=>{}),proxyEmit(_0x26b0df(0x1a8)),reset();}async function storeHeadless(_0x1d882f){const _0xab2306=_0x28261,_0x5a9e57={...config,'headless':_0x1d882f[_0xab2306(0x1a7)]};let _0x434757=dbConfig[_0xab2306(0x113)]('bot')[_0xab2306(0x126)]({'botID':botID})[_0xab2306(0x147)]();_0x434757&&dbConfig[_0xab2306(0x113)](_0xab2306(0x1a3))[_0xab2306(0x126)]({'botID':botID})[_0xab2306(0x13a)](_0x5a9e57)['write'](),config={..._0x5a9e57},proxyEmit(_0xab2306(0x10e),emittedConfiguration());}function noslash(_0x4bd5e9){const _0x264b97=_0x28261;return _0x4bd5e9[_0x264b97(0x161)]('/','');}function updateNumberCoins(_0x2f5593){const _0x49a6e1=_0x28261;_0x2f5593[_0x49a6e1(0x1bd)]&&_0x2f5593[_0x49a6e1(0x1bd)]==_0x49a6e1(0x115)&&_0x2f5593[_0x49a6e1(0x1b7)][_0x49a6e1(0x16e)](_0x18852a=>{const _0x197288=_0x49a6e1;let _0x3d93fc=currentCoins[_0x197288(0x126)](_0x50701b=>_0x50701b[_0x197288(0x121)]==_0x18852a[_0x197288(0x1d7)]),_0x1017f8=config[_0x197288(0x150)]['find'](_0x46e22e=>_0x46e22e[_0x197288(0x121)]==_0x18852a[_0x197288(0x1d7)]);if(_0x3d93fc&&_0x1017f8)_0x3d93fc[_0x197288(0x175)]=Math[_0x197288(0x1a5)](Number(_0x18852a[_0x197288(0x154)])+(_0x1017f8[_0x197288(0x19b)]||0x0),0x0);});if(_0x2f5593[_0x49a6e1(0x1bd)]&&_0x2f5593[_0x49a6e1(0x1bd)]=='executionReport'){if(_0x2f5593[_0x49a6e1(0x1eb)]==_0x49a6e1(0xdf)&&_0x2f5593[_0x49a6e1(0x1c3)]==_0x49a6e1(0xdc)){if(lastOrders)lastOrders[_0x49a6e1(0x16e)](_0x3fb7c1=>{const _0x5f5616=_0x49a6e1;if(_0x3fb7c1[_0x5f5616(0x13c)]==_0x2f5593[_0x5f5616(0x13c)]){if(_0x3fb7c1[_0x5f5616(0xf2)])_0x3fb7c1[_0x5f5616(0x1d6)]=_0x2f5593[_0x5f5616(0x130)]*_0x3fb7c1['price'];else _0x3fb7c1[_0x5f5616(0x1d6)]=_0x2f5593['accumulatedQuantity'];}});}}}async function getCoins(_0x1873fd=!![],_0x39e461=config[_0x28261(0x103)]){const _0x5fdd0c=_0x28261;let _0x3ec21a,_0x20ef41=[],_0x18d6e4=[],_0x506e80=[];try{_0x3ec21a=await exchange['fetchBalance'](),mybalances=_0x3ec21a[_0x5fdd0c(0x184)];if(!_0x1873fd)for(const [_0x5d58af,_0x4f096c]of Object['entries'](mybalances)){_0x506e80[_0x5fdd0c(0x10c)](_0x5d58af);}else config[_0x5fdd0c(0x150)][_0x5fdd0c(0x16e)](_0x44d788=>{const _0x44970a=_0x5fdd0c;if(!_0x44d788[_0x44970a(0x139)])_0x506e80[_0x44970a(0x10c)](_0x44d788[_0x44970a(0x121)]);});if(_0x39e461=='')for(const [_0x2f9117,_0x225fc8]of Object[_0x5fdd0c(0x1da)](mybalances)){_0x225fc8['toString']()!=0x0&&_0x18d6e4[_0x5fdd0c(0x10c)]({'coin':_0x2f9117});}else for(const [_0x21a29e,_0x2e8643]of Object[_0x5fdd0c(0x1da)](mybalances)){if(_0x506e80[_0x5fdd0c(0x106)](_0x21a29e)){const _0x55ad13=config[_0x5fdd0c(0x150)]['find'](_0x39f0d8=>_0x39f0d8[_0x5fdd0c(0x121)]==_0x21a29e);if((_0x2e8643[_0x5fdd0c(0x127)]()!=0x0||_0x55ad13)&&(allSymbols['includes'](_0x21a29e+'/'+_0x39e461)||_0x21a29e==_0x39e461))_0x18d6e4[_0x5fdd0c(0x10c)]({'coin':_0x21a29e,'symbol':_0x21a29e+'/'+_0x39e461,'reverse':![],'number':Math[_0x5fdd0c(0x1a5)](_0x2e8643+(_0x55ad13&&_0x55ad13[_0x5fdd0c(0x19b)]||0x0),0x0)}),_0x21a29e!=_0x39e461&&_0x20ef41[_0x5fdd0c(0x10c)](_0x21a29e+'/'+_0x39e461);else(_0x2e8643[_0x5fdd0c(0x127)]()!=0x0||_0x55ad13)&&allSymbols[_0x5fdd0c(0x106)](_0x39e461+'/'+_0x21a29e)&&(_0x18d6e4[_0x5fdd0c(0x10c)]({'coin':_0x21a29e,'symbol':_0x39e461+'/'+_0x21a29e,'reverse':!![],'number':Math[_0x5fdd0c(0x1a5)](_0x2e8643+(_0x55ad13&&_0x55ad13['offset']||0x0),0x0)}),_0x21a29e!=_0x39e461&&_0x20ef41[_0x5fdd0c(0x10c)](_0x39e461+'/'+_0x21a29e));}}}catch(_0x4e9983){if(!_0x1873fd){if(_0x4e9983[_0x5fdd0c(0x127)]()[_0x5fdd0c(0x106)]('API-key\x20format\x20invalid'))return logHistory('error',_0x5fdd0c(0x1e3)),![];else{if(_0x4e9983['toString']()['includes'](_0x5fdd0c(0x1c0)))return logHistory(_0x5fdd0c(0xf9),_0x5fdd0c(0x1d2)),![];else{if(_0x4e9983['toString']()[_0x5fdd0c(0x106)](_0x5fdd0c(0x11f)))return logHistory(_0x5fdd0c(0xf9),_0x5fdd0c(0x19a)),![];else await handleError(_0x4e9983,'getCoins()');}}}else await handleError(_0x4e9983,_0x5fdd0c(0x173));}return _0x18d6e4;}async function getPortfolio(_0x7c3dc6){const _0x5b80a0=_0x28261;let _0x3f081e=[],_0xe60d2b=[],_0x3bf0f0,_0xe1b0d2=[],_0x2a22fc,_0x15c93c;_0x7c3dc6[_0x5b80a0(0x174)]===_0x5b80a0(0x1ae)||_0x7c3dc6['apiSecret']===_0x5b80a0(0x1ae)?(_0x2a22fc=config[_0x5b80a0(0x174)],_0x15c93c=config[_0x5b80a0(0x142)]):(_0x2a22fc=_0x7c3dc6['apiKey'],_0x15c93c=_0x7c3dc6[_0x5b80a0(0x142)]);await initExchange(_0x2a22fc,_0x15c93c);let _0x3e5215=await loadSymbols();if(_0x3e5215){_0xe1b0d2=await getCoins(![],_0x7c3dc6[_0x5b80a0(0x103)]);if(_0xe1b0d2===![])proxyEmit(_0x5b80a0(0x150),![]);else{if(_0x7c3dc6[_0x5b80a0(0x103)]=='')proxyEmit(_0x5b80a0(0x150),_0xe1b0d2);else{_0xe1b0d2[_0x5b80a0(0x16e)](_0x58977d=>{const _0xdbfe8e=_0x5b80a0;_0x3f081e[_0xdbfe8e(0x10c)](_0x58977d[_0xdbfe8e(0x114)]);});try{_0xe60d2b=await exchange[_0x5b80a0(0x10f)](_0x3f081e);}catch(_0x3332af){await handleError(_0x3332af,_0x5b80a0(0x176));}_0xe1b0d2[_0x5b80a0(0x16e)](_0x23440e=>{const _0x1b2b6c=_0x5b80a0;_0x23440e[_0x1b2b6c(0x121)]!=_0x7c3dc6[_0x1b2b6c(0x103)]?_0x3bf0f0=_0x23440e[_0x1b2b6c(0xf2)]?0x1/_0xe60d2b[_0x23440e['symbol']][_0x1b2b6c(0x135)]:_0xe60d2b[_0x23440e['symbol']]['last']:_0x3bf0f0=0x1,_0x23440e[_0x1b2b6c(0xe9)]=formatResult(_0x3bf0f0,0x8);}),proxyEmit(_0x5b80a0(0x150),_0xe1b0d2);}}}else proxyEmit(_0x5b80a0(0x150),![]);}function checkMinimums(_0x584556){const _0x31b8bd=_0x28261;let _0x490164=!![];const _0x26a821=!_0x584556[_0x31b8bd(0xf2)]?markets[_0x584556[_0x31b8bd(0x114)]]['limits'][_0x31b8bd(0x1d5)][_0x31b8bd(0x1dc)]:markets[_0x584556[_0x31b8bd(0x114)]][_0x31b8bd(0x194)][_0x31b8bd(0x105)][_0x31b8bd(0x1dc)],_0xc0a260=!_0x584556[_0x31b8bd(0xf2)]?markets[_0x584556[_0x31b8bd(0x114)]][_0x31b8bd(0x194)]['cost'][_0x31b8bd(0x1dc)]:markets[_0x584556[_0x31b8bd(0x114)]][_0x31b8bd(0x194)][_0x31b8bd(0x1d5)][_0x31b8bd(0x1dc)];if(Math['abs'](_0x584556[_0x31b8bd(0x160)])<_0x26a821)_0x490164=![];if(Math[_0x31b8bd(0x1e4)](_0x584556[_0x31b8bd(0x160)])*_0x584556['last']<_0xc0a260)_0x490164=![];let _0x4bb9d9=config[_0x31b8bd(0x150)]['find'](_0x49106b=>_0x49106b[_0x31b8bd(0x121)]==_0x584556[_0x31b8bd(0x121)]);if(Math[_0x31b8bd(0x1e4)](_0x584556[_0x31b8bd(0x160)])>_0x584556['number']-_0x4bb9d9[_0x31b8bd(0x19b)])_0x490164=![];return _0x490164;}async function getBalances(){const _0xd00998=_0x28261;let _0x3164f7=0x0,_0x300a6b;const _0x36701b=config[_0xd00998(0x1e2)];currentCoins['forEach'](_0x1d8a65=>{const _0x2c9af4=_0xd00998;if(_0x1d8a65['coin']!=config[_0x2c9af4(0x103)]){let _0x591e2c=global[_0x2c9af4(0xed)][noslash(_0x1d8a65[_0x2c9af4(0x114)])];_0x300a6b=_0x1d8a65[_0x2c9af4(0xf2)]?0x1/_0x591e2c:_0x591e2c;}else _0x300a6b=0x1;let _0x355b64=_0x1d8a65['number']*_0x300a6b;_0x3164f7+=_0x355b64,_0x1d8a65['last']=formatResult(Number(_0x300a6b),0x8),_0x1d8a65['value']=_0x355b64;}),currentCoins['forEach'](_0x349113=>{const _0x510a8a=_0xd00998;let _0x260a47=config[_0x510a8a(0x150)]['find'](_0x13b1da=>_0x13b1da[_0x510a8a(0x121)]==_0x349113['coin']),_0x979184=Number(_0x260a47[_0x510a8a(0x102)]),_0x46148f=_0x349113[_0x510a8a(0x147)]/_0x3164f7*0x64,_0x2e589d=_0x979184*_0x3164f7/0x64/_0x349113[_0x510a8a(0x135)]-_0x349113[_0x510a8a(0x175)];_0x349113[_0x510a8a(0x102)]=formatResult(_0x46148f,0x3),_0x349113[_0x510a8a(0x15f)]=formatResult(_0x979184,0x3),_0x349113[_0x510a8a(0x160)]=formatResult(_0x2e589d,0x8),_0x349113[_0x510a8a(0x11d)]='',_0x349113[_0x510a8a(0x168)]='';if(_0x349113[_0x510a8a(0x121)]!=config[_0x510a8a(0x103)]){if(_0x349113[_0x510a8a(0x102)]>_0x979184)_0x349113[_0x510a8a(0x11d)]=_0x510a8a(0x198),_0x349113[_0x510a8a(0x168)]=checkMinimums(_0x349113);else _0x349113[_0x510a8a(0x102)]<_0x979184&&(_0x349113[_0x510a8a(0x11d)]=_0x510a8a(0x111),_0x349113[_0x510a8a(0x168)]=checkMinimums(_0x349113));}_0x349113[_0x510a8a(0x155)]=_0x349113['distribution']/_0x349113['target']-0x1;}),currentCoins['sort']((_0x376f5e,_0x1670c6)=>_0x376f5e[_0xd00998(0x155)]<_0x1670c6['delta']?0x1:_0x1670c6['delta']<_0x376f5e['delta']?-0x1:0x0);const _0x4c475d=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x4c475d['eur'],'usd':_0x4c475d['usd'],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x36701b},proxyEmit(_0xd00998(0x1b7),{'serverversion':serverversion,'balances':lastBalances});if(config[_0xd00998(0x1a7)])headlessMode({'portfolio':currentCoins,'threshold':_0x36701b});!initialPerformanceStored&&(initialPerformanceStored=!![],await storePerformance(),emitPerformance());lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance());if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0xe95cd5=_0x28261;if(!lastBalances)return;let _0x8e702e=await getStartingBalances(![]),_0x51001a=[],_0x152fba;JSON[_0xe95cd5(0x14e)](lastBalances['portfolio'])[_0xe95cd5(0x16e)](_0x1f7149=>{const _0x52fa58=_0xe95cd5;let _0x276bed={'coin':_0x1f7149[_0x52fa58(0x121)],'number':_0x1f7149[_0x52fa58(0x175)],'price':_0x1f7149['last']};_0x51001a['push'](_0x276bed);});const _0x1ce3f5=await getFiat();_0x152fba={'date':lastBalances[_0xe95cd5(0x131)][_0xe95cd5(0x1a6)]('\x20')[0x0],'eur':_0x1ce3f5['eur'],'usd':_0x1ce3f5[_0xe95cd5(0x1c5)],'coins':_0x51001a};let _0x48a09b=dbPerformance['get'](_0xe95cd5(0x1d8))[_0xe95cd5(0x126)]({'date':_0x152fba[_0xe95cd5(0x15e)]})[_0xe95cd5(0x147)]();_0x48a09b?dbPerformance[_0xe95cd5(0x113)](_0xe95cd5(0x1d8))['find']({'date':_0x152fba[_0xe95cd5(0x15e)]})[_0xe95cd5(0x13a)](_0x152fba)[_0xe95cd5(0xeb)]():dbPerformance[_0xe95cd5(0x113)](_0xe95cd5(0x1d8))[_0xe95cd5(0x10c)](_0x152fba)[_0xe95cd5(0xeb)](),lastPerformanceStored=getHour();}function emitPerformance(){const _0x3c09db=_0x28261;if(dbPerformance[_0x3c09db(0xf4)](_0x3c09db(0x1d8))[_0x3c09db(0x147)]()){let _0x103b2f=dbPerformance[_0x3c09db(0x113)](_0x3c09db(0x1d8))[_0x3c09db(0x117)](_0x3c09db(0x15e))[_0x3c09db(0x147)]();proxyEmit(_0x3c09db(0x1b0),_0x103b2f),lastPerformanceEmitted=getDate();}else proxyEmit(_0x3c09db(0x1b0),[]);}async function getStartingBalances(_0x5c09e1=!![]){const _0x8301be=_0x28261;let _0x5a1c2a=dbPerformance[_0x8301be(0x113)](_0x8301be(0x1d8))[_0x8301be(0x126)]({'date':config[_0x8301be(0x1a4)]})[_0x8301be(0x147)]();config[_0x8301be(0x174)]!=''&&!_0x5a1c2a&&(await setStartDatePerformance(config),_0x5a1c2a=dbPerformance[_0x8301be(0x113)](_0x8301be(0x1d8))[_0x8301be(0x126)]({'date':config[_0x8301be(0x1a4)]})[_0x8301be(0x147)]());if(config[_0x8301be(0x174)]==''||!_0x5a1c2a)return{};let _0x1210f0=0x0,_0x1ba9e4=0x0,_0x58f6e5=0x0,_0x522dae=[],_0x472d43=0x0;config['portfolio'][_0x8301be(0x16e)](_0x211005=>{const _0x5dfb66=_0x8301be;if(!_0x211005[_0x5dfb66(0x139)]){_0x522dae[_0x472d43]={'coin':_0x211005[_0x5dfb66(0x121)],'symbol':_0x211005[_0x5dfb66(0x114)],'number':_0x211005[_0x5dfb66(0x1a0)],'price':_0x211005[_0x5dfb66(0x136)]},_0x1210f0+=_0x211005[_0x5dfb66(0x136)]*_0x211005[_0x5dfb66(0x1a0)];if(config[_0x5dfb66(0x103)]==_0x5dfb66(0xf3))_0x1ba9e4+=_0x211005[_0x5dfb66(0x136)]*_0x211005[_0x5dfb66(0x1a0)]*_0x5a1c2a[_0x5dfb66(0x1b3)],_0x58f6e5+=_0x211005['startprice']*_0x211005[_0x5dfb66(0x1a0)]*_0x5a1c2a[_0x5dfb66(0x1c5)];else{if(config['basecoin']==_0x5dfb66(0x134)||config[_0x5dfb66(0x103)]==_0x5dfb66(0x129)||config[_0x5dfb66(0x103)]==_0x5dfb66(0xfe))_0x1ba9e4+=_0x211005[_0x5dfb66(0x136)]*_0x211005['startnumber']*_0x5a1c2a[_0x5dfb66(0x1b3)]/_0x5a1c2a[_0x5dfb66(0x1c5)],_0x58f6e5+=_0x211005[_0x5dfb66(0x136)]*_0x211005[_0x5dfb66(0x1a0)];else config[_0x5dfb66(0x103)]==_0x5dfb66(0x137)&&(_0x1ba9e4+=_0x211005['startprice']*_0x211005[_0x5dfb66(0x1a0)],_0x58f6e5+=_0x211005[_0x5dfb66(0x136)]*_0x211005[_0x5dfb66(0x1a0)]*_0x5a1c2a[_0x5dfb66(0x1c5)]/_0x5a1c2a[_0x5dfb66(0x1b3)]);}_0x472d43++;}});let _0x2eac05={'basecoin':_0x1210f0,'eur':_0x1ba9e4,'usd':_0x58f6e5,'coins':_0x522dae};if(_0x5c09e1)proxyEmit(_0x8301be(0x188),_0x2eac05);return _0x2eac05;}function headlessMode(_0x433c86){const _0x233211=_0x28261;let _0x294602=_0x433c86[_0x233211(0x150)],_0x21019b=_0x433c86[_0x233211(0x1e2)],_0x4fd712=[];for(let _0x25c6a1 of _0x294602){if(_0x25c6a1['coin']!=config[_0x233211(0x103)]){if(_0x25c6a1[_0x233211(0x102)]/_0x25c6a1['target']-0x1>=_0x21019b/0x64){if(_0x25c6a1[_0x233211(0x168)])_0x4fd712[_0x233211(0x10c)](_0x25c6a1);}else{if(_0x25c6a1['distribution']/_0x25c6a1[_0x233211(0x15f)]-0x1<=-_0x21019b/0x64){if(_0x25c6a1[_0x233211(0x168)])_0x4fd712[_0x233211(0x10c)](_0x25c6a1);}}}}_0x4fd712[_0x233211(0x18f)]>0x0&&placeOrder(_0x4fd712);}function _0x33bd(_0x136e20,_0x5b0610){const _0x3c48b8=_0x5efb();return _0x33bd=function(_0xf47ef0,_0x5063a1){_0xf47ef0=_0xf47ef0-0xd9;let _0x5efb8a=_0x3c48b8[_0xf47ef0];return _0x5efb8a;},_0x33bd(_0x136e20,_0x5b0610);}function symbolToCoin(_0x2a73d2){const _0x23ae8=_0x28261;let _0x39ee13;if(_0x2a73d2[_0x23ae8(0x106)]('/'+config[_0x23ae8(0x103)]))_0x39ee13=_0x2a73d2[_0x23ae8(0x161)]('/'+config[_0x23ae8(0x103)],'');if(_0x2a73d2[_0x23ae8(0x106)](config[_0x23ae8(0x103)]+'/'))_0x39ee13=_0x2a73d2[_0x23ae8(0x161)](config[_0x23ae8(0x103)]+'/','');return _0x39ee13;}async function validateOrders(_0x4aae42=0x0){const _0x1d4b2a=_0x28261;let _0x26046e=[],_0x25142b=config[_0x1d4b2a(0x18a)]==_0x1d4b2a(0xfc)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x1d4b2a(0x14c)]*0x3c*0x3e8/validateOrderInterval;lastOrders[_0x1d4b2a(0x16e)](_0x5377a0=>{const _0x199f1a=_0x1d4b2a;let _0x864260=previousCoins['find'](_0x516a4e=>_0x516a4e['coin']==symbolToCoin(_0x5377a0['symbol'])),_0x59f31d=currentCoins['find'](_0x2ec09f=>_0x2ec09f[_0x199f1a(0x121)]==symbolToCoin(_0x5377a0[_0x199f1a(0x114)])),_0x86bb9,_0x8baec0;_0x5377a0['side']==_0x199f1a(0x111)&&!_0x5377a0[_0x199f1a(0xf2)]||_0x5377a0[_0x199f1a(0x11d)]==_0x199f1a(0x198)&&_0x5377a0[_0x199f1a(0xf2)]?(_0x86bb9=_0x864260[_0x199f1a(0x175)]+0.9*_0x5377a0['filled'],_0x8baec0=_0x864260[_0x199f1a(0x175)]+1.1*_0x5377a0[_0x199f1a(0x1d6)]):(_0x86bb9=_0x864260[_0x199f1a(0x175)]-1.1*_0x5377a0['filled'],_0x8baec0=_0x864260[_0x199f1a(0x175)]-0.9*_0x5377a0[_0x199f1a(0x1d6)]);const _0x9a8b83=_0x5377a0[_0x199f1a(0x1d6)]!=0x0&&_0x59f31d['number']>=_0x86bb9&&_0x59f31d[_0x199f1a(0x175)]<=_0x8baec0;_0x26046e['push'](_0x9a8b83);if(_0x9a8b83&&config[_0x199f1a(0x18a)]!=_0x199f1a(0xfc)){if(_0x5377a0[_0x199f1a(0xf2)])logHistory(_0x199f1a(0x124),'Order\x20filled:\x20'+_0x5377a0[_0x199f1a(0x114)]+'\x20'+_0x5377a0[_0x199f1a(0x11d)]+'\x20#'+formatResult(_0x5377a0['filled']/_0x5377a0[_0x199f1a(0xe9)],0x8)+'\x20@'+formatResult(_0x5377a0['price'],0x8));else logHistory('order','Order\x20filled:\x20'+_0x5377a0[_0x199f1a(0x114)]+'\x20'+_0x5377a0['side']+'\x20#'+formatResult(_0x5377a0[_0x199f1a(0x1d6)],0x8)+'\x20@'+formatResult(_0x5377a0[_0x199f1a(0xe9)],0x8));}}),_0x26046e[_0x1d4b2a(0x16e)]((_0x3d0159,_0x55be7b)=>{const _0x591391=_0x1d4b2a;if(_0x3d0159)lastOrders[_0x591391(0x1d1)](_0x55be7b,0x1);});if(_0x4aae42<_0x25142b&&_0x26046e[_0x1d4b2a(0x106)](![])){if(_0x4aae42==0x0){config[_0x1d4b2a(0x18a)]==_0x1d4b2a(0xfc)?logHistory(_0x1d4b2a(0xf9),_0x1d4b2a(0x167)):logHistory(_0x1d4b2a(0xf9),_0x1d4b2a(0x10a));if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4aae42);},0xa*0x3e8);}else{(_0x4aae42==0x1||_0x4aae42==Math[_0x1d4b2a(0x13b)](_0x25142b/0x2)||_0x4aae42==_0x25142b-0x1)&&(currentCoins=await getCoins());if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(function(){validateOrders(++_0x4aae42);},validateOrderInterval);}}else{lockOrders=![];if(_0x4aae42>0x0&&!_0x26046e[_0x1d4b2a(0x106)](![]))config[_0x1d4b2a(0x18a)]==_0x1d4b2a(0xfc)?logHistory(_0x1d4b2a(0x1e1),_0x1d4b2a(0x182)):logHistory(_0x1d4b2a(0x1e1),_0x1d4b2a(0x11c));else _0x4aae42>0x0&&_0x26046e[_0x1d4b2a(0x106)](![])&&(config['ordertype']==_0x1d4b2a(0xfc)?logHistory(_0x1d4b2a(0x1e1),'Order(s)\x20not\x20validated\x20after\x20'+Math['round'](_0x25142b*validateOrderInterval/0xea60)+'\x20minutes\x20-\x20balancing\x20resumed'):(lastOrders[_0x1d4b2a(0x16e)](async _0x23cc0e=>{const _0x4f1225=_0x1d4b2a;try{const _0x520604=await exchange['cancelOrder'](_0x23cc0e[_0x4f1225(0x13c)],_0x23cc0e[_0x4f1225(0x114)]);}catch(_0x1e08e0){if(_0x1e08e0[_0x4f1225(0x127)]()[_0x4f1225(0x106)](_0x4f1225(0x164))){}else await handleError(_0x1e08e0,_0x4f1225(0xe6));}}),logHistory(_0x1d4b2a(0x1e1),_0x1d4b2a(0x181)+Math[_0x1d4b2a(0x13b)](_0x25142b*validateOrderInterval/0xea60)+_0x1d4b2a(0x14d))));}}async function resetCoinResults(){const _0x32cd52=_0x28261;dbCoinResults[_0x32cd52(0x113)]('coins')['remove']()['write']();let _0x2f020b=await getStartingBalances(![]);_0x2f020b[_0x32cd52(0x12f)][_0x32cd52(0x16e)](_0x5bb3ba=>{const _0x48f0e9=_0x32cd52,_0x3d4df2=_0x5bb3ba[_0x48f0e9(0x114)][_0x48f0e9(0x106)](config[_0x48f0e9(0x103)]+'/');if(_0x5bb3ba['coin']!=config['basecoin']){let _0x47c905={'coin':_0x5bb3ba[_0x48f0e9(0x121)],'number':_0x5bb3ba[_0x48f0e9(0x175)],'breakeven':_0x5bb3ba[_0x48f0e9(0xe9)],'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x48f0e9(0x113)]('coins')[_0x48f0e9(0x10c)](_0x47c905)['write']();}});}async function updateCoinResults(_0x185d79){const _0x2463db=_0x28261;let _0x2ecd9d,_0x1b62dc,_0x298634,_0x30654e,_0x37393e,_0x23099d,_0x42ffaf=dbCoinResults[_0x2463db(0x113)](_0x2463db(0x12f))[_0x2463db(0x126)]({'coin':_0x185d79[_0x2463db(0x121)]})['value']();if(!_0x42ffaf)return;if(_0x185d79[_0x2463db(0x14a)]&&_0x185d79['fee'][_0x2463db(0x1d4)]==config[_0x2463db(0x103)])_0x2ecd9d=_0x185d79[_0x2463db(0x14a)]['cost'];else{if(_0x185d79[_0x2463db(0x14a)]&&_0x185d79[_0x2463db(0x14a)]['currency']==_0x2463db(0xfd))_0x2ecd9d=_0x185d79[_0x2463db(0x14a)][_0x2463db(0x105)]*global[_0x2463db(0xed)][_0x2463db(0xfd)+config['basecoin']];else _0x2ecd9d=0.001*_0x185d79[_0x2463db(0x1d6)];}const _0x1ec854=_0x185d79[_0x2463db(0x114)]['includes'](config[_0x2463db(0x103)]+'/');_0x1ec854&&(_0x23099d={'coin':_0x185d79[_0x2463db(0x121)],'symbol':_0x185d79[_0x2463db(0x114)],'filled':_0x185d79['filled']*_0x185d79['price'],'side':_0x185d79['side']==_0x2463db(0x198)?_0x2463db(0x111):_0x2463db(0x198),'price':0x1/_0x185d79[_0x2463db(0xe9)]},_0x185d79={..._0x23099d});_0x185d79[_0x2463db(0x11d)]==_0x2463db(0x111)?_0x298634=(_0x42ffaf[_0x2463db(0x1be)]*_0x42ffaf['number']+_0x185d79[_0x2463db(0xe9)]*_0x185d79[_0x2463db(0x1d6)])/(_0x42ffaf[_0x2463db(0x175)]+_0x185d79[_0x2463db(0x1d6)]):_0x298634=(_0x42ffaf['breakeven']*_0x42ffaf[_0x2463db(0x175)]-_0x185d79[_0x2463db(0xe9)]*_0x185d79[_0x2463db(0x1d6)])/(_0x42ffaf['number']-_0x185d79[_0x2463db(0x1d6)]);_0x185d79[_0x2463db(0x11d)]=='buy'?_0x30654e=_0x42ffaf[_0x2463db(0x1b6)]:_0x30654e=_0x42ffaf['realized']+(_0x185d79[_0x2463db(0xe9)]-_0x42ffaf['breakeven'])*_0x185d79[_0x2463db(0x1d6)];_0x1b62dc=_0x185d79[_0x2463db(0x11d)]==_0x2463db(0x198)?_0x42ffaf[_0x2463db(0x175)]-_0x185d79['filled']:_0x42ffaf[_0x2463db(0x175)]+_0x185d79['filled'],_0x37393e=(_0x185d79[_0x2463db(0xe9)]-_0x298634)*_0x1b62dc;let _0x45e692={'coin':_0x185d79[_0x2463db(0x121)],'number':_0x1b62dc,'breakeven':formatResult(_0x298634,0x8),'realized':formatResult(_0x30654e,0x8),'unrealized':formatResult(_0x37393e,0x8),'fees':formatResult(_0x42ffaf[_0x2463db(0x10b)]+_0x2ecd9d,0x8),'sells':_0x185d79[_0x2463db(0x11d)]==_0x2463db(0x198)?_0x42ffaf[_0x2463db(0xf0)]+0x1:_0x42ffaf[_0x2463db(0xf0)],'buys':_0x185d79[_0x2463db(0x11d)]==_0x2463db(0x111)?_0x42ffaf[_0x2463db(0x180)]+0x1:_0x42ffaf[_0x2463db(0x180)]};dbCoinResults[_0x2463db(0x113)](_0x2463db(0x12f))[_0x2463db(0x126)]({'coin':_0x185d79[_0x2463db(0x121)]})[_0x2463db(0x13a)](_0x45e692)[_0x2463db(0xeb)]();}async function placeOrder(_0x813f56){const _0x3c2050=_0x28261,_0x5b9d40=config[_0x3c2050(0x18a)]==_0x3c2050(0xfc)?'market':_0x3c2050(0xe5);if(!lockOrders&&!coolingDown){lastOrders=[],previousCoins=JSON[_0x3c2050(0x14e)](JSON[_0x3c2050(0x13d)](currentCoins));for(const _0x4f1a42 of _0x813f56){let _0xc2be5c,_0x396d30,_0x490015,_0x162666,_0x5cd975,_0x468428=_0x4f1a42[_0x3c2050(0x114)];try{const _0x279560=await exchange['fetchTickers'](_0x468428),_0x4ecf9c=_0x279560[_0x468428];_0xc2be5c=_0x4ecf9c[_0x3c2050(0x135)],_0x396d30=_0x4ecf9c[_0x3c2050(0x1ab)],_0x490015=_0x4ecf9c[_0x3c2050(0x1ba)];_0x4f1a42[_0x3c2050(0xf2)]?(_0x162666=_0x4f1a42[_0x3c2050(0x11d)]==_0x3c2050(0x111)?_0x3c2050(0x198):_0x3c2050(0x111),_0x5cd975=Math[_0x3c2050(0x1e4)](_0x4f1a42[_0x3c2050(0x160)])/_0xc2be5c):(_0x162666=_0x4f1a42['side'],_0x5cd975=Math[_0x3c2050(0x1e4)](_0x4f1a42['trade']));_0x5b9d40=='limit'&&(config['ordertype']==_0x3c2050(0x185)&&(_0xc2be5c=_0x162666==_0x3c2050(0x111)?_0x396d30:_0x490015),config[_0x3c2050(0x18a)]==_0x3c2050(0xf5)&&(_0xc2be5c=_0x162666==_0x3c2050(0x111)?_0x490015:_0x396d30));_0x5cd975=formatResult(_0x5cd975,0x8),_0xc2be5c=formatResult(_0xc2be5c,0x8);const _0x42f864=await exchange[_0x3c2050(0x18e)](_0x468428,_0x5b9d40,_0x162666,_0x5cd975,_0xc2be5c);lastOrders[_0x3c2050(0x10c)]({'orderId':_0x42f864['id'],'symbol':_0x468428,'side':_0x162666,'reverse':_0x4f1a42[_0x3c2050(0xf2)],'amount':_0x4f1a42['reverse']?_0x42f864[_0x3c2050(0x1d5)]*_0x42f864[_0x3c2050(0xe9)]:_0x42f864[_0x3c2050(0x1d5)],'filled':_0x4f1a42['reverse']?_0x42f864[_0x3c2050(0x1d6)]*_0x42f864['price']:_0x42f864[_0x3c2050(0x1d6)],'price':_0x42f864[_0x3c2050(0xe9)]});const _0x553e03=_0x162666==_0x3c2050(0x198)?config[_0x3c2050(0x16c)]?String['fromCodePoint']('0x'+config[_0x3c2050(0x16c)])+'\x20':'':config['emojibuy']?String[_0x3c2050(0xff)]('0x'+config[_0x3c2050(0x152)])+'\x20':'',_0x28abb8=_0x5b9d40==_0x3c2050(0xfc)?'Market':config[_0x3c2050(0x18a)]==_0x3c2050(0x185)?_0x3c2050(0x19f):_0x3c2050(0x133);if(_0x5b9d40==_0x3c2050(0xfc))logHistory(_0x3c2050(0x124),''+_0x553e03+_0x28abb8+_0x3c2050(0x116)+_0x468428+'\x20'+_0x162666+'\x20#'+formatResult(_0x42f864[_0x3c2050(0x1d6)],0x8)+'\x20@'+formatResult(_0x42f864['price'],0x8));else logHistory('order',''+_0x553e03+_0x28abb8+_0x3c2050(0x116)+_0x468428+'\x20'+_0x162666+'\x20#'+formatResult(_0x42f864[_0x3c2050(0x1d5)],0x8)+'\x20@'+formatResult(_0x42f864['price'],0x8));_0x42f864[_0x3c2050(0x121)]=_0x4f1a42[_0x3c2050(0x121)],await updateCoinResults(_0x42f864);if(config[_0x3c2050(0x15d)]!=0x0){let _0x52e5f3=null;if(cooldownTracker[_0x3c2050(0x18f)]==config[_0x3c2050(0x15d)]-0x1)_0x52e5f3=cooldownTracker[_0x3c2050(0x196)]();const _0xf07543=getTimeStamp();cooldownTracker['push'](_0xf07543);if(_0x52e5f3){const _0x59d72a=fns['differenceInSeconds'](new Date(_0xf07543),new Date(_0x52e5f3));_0x59d72a<cooldownInterval&&(logHistory(_0x3c2050(0xf9),'Executed\x20'+config[_0x3c2050(0x15d)]+'\x20orders\x20in\x20less\x20than\x20'+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![],await sleep(cooldownPeriod),coolingDown=![]);}}}catch(_0x420ad8){if(_0x420ad8[_0x3c2050(0x127)]()[_0x3c2050(0x106)]('MIN_NOTIONAL'))logHistory('error',_0x3c2050(0x145)+_0x468428);else{if(_0x420ad8[_0x3c2050(0x127)]()[_0x3c2050(0x106)](_0x3c2050(0x17e)))logHistory('error',_0x3c2050(0xfa)+_0x468428);else await handleError(_0x420ad8,_0x3c2050(0x163));}}}if(lastOrders[_0x3c2050(0x18f)]!=0x0){lockOrders=!![];if(pidOrders)clearTimeout(pidOrders);pidOrders=setTimeout(validateOrders,0xa*0x3e8);}}else{if(lockOrders)!config[_0x3c2050(0x1a7)]&&(config['ordertype']==_0x3c2050(0xfc)?logHistory('error',_0x3c2050(0xda)):logHistory(_0x3c2050(0xf9),_0x3c2050(0x12a)));else coolingDown&&(!config[_0x3c2050(0x1a7)]&&logHistory(_0x3c2050(0xf9),_0x3c2050(0x17c)));}}function logHistory(_0xcc3a4d,_0x3ea212,_0x5ca8f7=''){const _0x3f6c82=_0x28261;let _0x3d0d5d={'time':getTimeStamp(),'type':_0xcc3a4d,'event':_0x3ea212,'botname':config[_0x3f6c82(0x1e5)],'showname':config[_0x3f6c82(0xec)]};dbLogs[_0x3f6c82(0x113)](_0x3f6c82(0x1b5))[_0x3f6c82(0x10c)](_0x3d0d5d)['write']();if(_0x5ca8f7=='')_0x5ca8f7=_0x3ea212;proxyEmit('event',{'log':_0x3d0d5d,'summary':_0x5ca8f7}),process[_0x3f6c82(0xe3)]({'telegram':_0x3d0d5d},_0x453b38=>{}),logging(''+_0x3d0d5d['event']);}function emitHistory(_0xc1ecce={}){const _0x224215=_0x28261;Object[_0x224215(0xe2)](_0xc1ecce)['length']==0x0&&(_0xc1ecce={'type':[_0x224215(0x124),_0x224215(0x10d)],'event':'','page':0x1});if(_0xc1ecce['type']['includes']('event'))_0xc1ecce['type'][_0x224215(0x1d1)](_0xc1ecce[_0x224215(0x138)]['indexOf'](_0x224215(0x10d)),0x1,'error',_0x224215(0x1e1));if(dbLogs[_0x224215(0xf4)](_0x224215(0x1b5))['value']()){let _0x6d9fac=dbLogs[_0x224215(0x113)](_0x224215(0x1b5))[_0x224215(0x1b8)](_0x5f8f50=>{const _0x199bf9=_0x224215;if(_0xc1ecce['type'][_0x199bf9(0x18f)]==0x0)return![];else return _0xc1ecce[_0x199bf9(0x138)][_0x199bf9(0x106)](_0x5f8f50[_0x199bf9(0x138)]);})['filter'](_0x227ff8=>{const _0xf5ff15=_0x224215;if(_0xc1ecce[_0xf5ff15(0x10d)]=='')return!![];else return _0x227ff8[_0xf5ff15(0x10d)][_0xf5ff15(0x1bf)]()['includes'](_0xc1ecce[_0xf5ff15(0x10d)]['toLowerCase']());})[_0x224215(0x117)](_0x224215(0x131)),_0x53c1aa=_0x6d9fac[_0x224215(0x147)]()[_0x224215(0x18f)];_0x6d9fac=_0x6d9fac['reverse']()[_0x224215(0x132)]((_0xc1ecce[_0x224215(0x143)]-0x1)*logPageSize,_0xc1ecce[_0x224215(0x143)]*logPageSize-0x1)[_0x224215(0xf2)]()[_0x224215(0x147)](),proxyEmit(_0x224215(0x1cf),{'logs':_0x6d9fac,'total':_0x53c1aa});}else proxyEmit(_0x224215(0x1cf),{'logs':[],'total':0x0});}async function pauseBot(_0x2fe00e){const _0x18734d=_0x28261,_0x5b07a1=new Date()[_0x18734d(0x17a)]();if(!lastBotPause)lastBotPause=new Date()[_0x18734d(0x17a)](),consecutivePauses=0x1;else{if(_0x5b07a1-lastBotPause-pauseBotInterval<0x3c*0x3e8){consecutivePauses++;if(consecutivePauses>0x3)process[_0x18734d(0xe3)]({'stop':_0x18734d(0x1a1)},_0x2775a7=>{});}else consecutivePauses=0x1;lastBotPause=new Date()[_0x18734d(0x17a)]();}if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);cleanws(),logHistory(_0x18734d(0xf9),_0x18734d(0x195)+consecutivePauses+')'),await sleep(_0x2fe00e),botPaused=![],reset();}}async function handleError(_0x1bcfb6,_0x23ebd5,_0x300037=''){const _0x581f73=_0x28261;if(_0x1bcfb6['toString']()[_0x581f73(0x106)](_0x581f73(0xde)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x112)),await pauseBot(pauseBotInterval);else{if(_0x1bcfb6[_0x581f73(0x127)]()[_0x581f73(0x106)](_0x581f73(0x1e7)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x1db)),await pauseBot(pauseBotInterval);else{if(_0x1bcfb6[_0x581f73(0x127)]()['includes'](_0x581f73(0xd9)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0xf6)),await pauseBot(pauseBotInterval);else{if(_0x1bcfb6['toString']()[_0x581f73(0x106)](_0x581f73(0x17f)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x1d0)),logHistory(_0x581f73(0xf9),_0x581f73(0x140)),process[_0x581f73(0xe3)]({'stop':_0x581f73(0x12d)},_0x5c091a=>{});else{if(_0x1bcfb6['toString']()[_0x581f73(0x106)](_0x581f73(0x1c0)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x108)),logHistory(_0x581f73(0xf9),_0x581f73(0x140)),process[_0x581f73(0xe3)]({'stop':_0x581f73(0x12d)},_0x2f86b4=>{});else{if(_0x1bcfb6['toString']()[_0x581f73(0x106)]('Signature\x20for\x20this\x20request\x20is\x20not\x20valid'))logHistory(_0x581f73(0xf9),_0x23ebd5+'\x20|\x20Binance\x20API\x20secret\x20is\x20invalid'),logHistory(_0x581f73(0xf9),_0x581f73(0x140)),process['send']({'stop':_0x581f73(0x12d)},_0x159d2f=>{});else{if(_0x1bcfb6[_0x581f73(0x127)]()[_0x581f73(0x106)](_0x581f73(0x159)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0xfb)),logHistory(_0x581f73(0xf9),_0x581f73(0x140)),process[_0x581f73(0xe3)]({'stop':_0x581f73(0x12d)},_0xf46127=>{});else{if(_0x1bcfb6[_0x581f73(0x127)]()[_0x581f73(0x106)](_0x581f73(0x104)))logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x170)),await pauseBot(pauseBotInterval),process['send']({'stop':'restart'},_0x303b97=>{});else _0x1bcfb6['toString']()['includes'](_0x581f73(0x1e8))?logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x125)):(logHistory(_0x581f73(0xf9),_0x23ebd5+_0x581f73(0x1c4)),logging(_0x23ebd5+_0x581f73(0x14f),_0x1bcfb6),await pauseBot(pauseBotInterval));}}}}}}}}function formatResult(_0x29222b,_0x51bf16){const _0x45b805=_0x28261;return parseFloat(_0x29222b[_0x45b805(0x165)](_0x51bf16));}function logging(_0x4cf451,_0x43b52b=''){const _0x8c5ae8=_0x28261;if(config[_0x8c5ae8(0xec)])console[_0x8c5ae8(0xe8)](getTimeStamp()+':\x20'+config[_0x8c5ae8(0x1e5)]+'\x20>\x20'+_0x4cf451,_0x43b52b);else console[_0x8c5ae8(0xe8)](getTimeStamp()+_0x8c5ae8(0x1d3)+botID+_0x8c5ae8(0x1e9)+_0x4cf451,_0x43b52b);}function getServerTime(){const _0x3a6119=_0x28261,_0x26c54e=new Date();return _0x26c54e[_0x3a6119(0x157)]()+'/'+(_0x26c54e[_0x3a6119(0x110)]()+0x1)[_0x3a6119(0x127)]()[_0x3a6119(0x1df)](0x2,'0')+'/'+_0x26c54e[_0x3a6119(0x1c1)]()[_0x3a6119(0x127)]()['padStart'](0x2,'0')+'\x20'+_0x26c54e['getHours']()[_0x3a6119(0x127)]()[_0x3a6119(0x1df)](0x2,'0')+':'+_0x26c54e[_0x3a6119(0x107)]()[_0x3a6119(0x127)]()['padStart'](0x2,'0')+':'+_0x26c54e[_0x3a6119(0xe1)]()['toString']()[_0x3a6119(0x1df)](0x2,'0');}function getTimeStamp(){const _0x5355a7=_0x28261,_0x1ae27c=shiftedTime();return _0x1ae27c[_0x5355a7(0x157)]()+'/'+(_0x1ae27c[_0x5355a7(0x110)]()+0x1)['toString']()[_0x5355a7(0x1df)](0x2,'0')+'/'+_0x1ae27c[_0x5355a7(0x1c1)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x1ae27c[_0x5355a7(0x1ec)]()[_0x5355a7(0x127)]()[_0x5355a7(0x1df)](0x2,'0')+':'+_0x1ae27c['getMinutes']()['toString']()[_0x5355a7(0x1df)](0x2,'0')+':'+_0x1ae27c[_0x5355a7(0xe1)]()['toString']()['padStart'](0x2,'0');}function getDate(){const _0x31d89c=_0x28261,_0x25ea9c=shiftedTime();return _0x25ea9c['getFullYear']()+'/'+(_0x25ea9c[_0x31d89c(0x110)]()+0x1)[_0x31d89c(0x127)]()[_0x31d89c(0x1df)](0x2,'0')+'/'+_0x25ea9c[_0x31d89c(0x1c1)]()[_0x31d89c(0x127)]()[_0x31d89c(0x1df)](0x2,'0');}function getHour(){const _0x24308c=_0x28261,_0x42d5fb=shiftedTime();return _0x42d5fb[_0x24308c(0x1ec)]()[_0x24308c(0x127)]()['padStart'](0x2,'0');}function sleep(_0xc8ea4e){return new Promise(_0x3dafb9=>setTimeout(_0x3dafb9,_0xc8ea4e));}function shiftedTime(){const _0x125b9a=_0x28261,_0x4dcc39=new Date();let _0x4d2765=_0x4dcc39;if(config&&config[_0x125b9a(0x190)]!==0x0)_0x4d2765=fns[_0x125b9a(0x1bc)](_0x4dcc39,{'hours':config[_0x125b9a(0x190)]});return _0x4d2765;}