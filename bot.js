const _0x1fb5cb=_0x2506;(function(_0x1cce24,_0x53419b){const _0xe33e5d=_0x2506,_0x1a8983=_0x1cce24();while(!![]){try{const _0x9c3a52=-parseInt(_0xe33e5d(0x163))/0x1*(parseInt(_0xe33e5d(0x173))/0x2)+parseInt(_0xe33e5d(0x211))/0x3+-parseInt(_0xe33e5d(0x112))/0x4+-parseInt(_0xe33e5d(0x155))/0x5+-parseInt(_0xe33e5d(0x1f3))/0x6*(parseInt(_0xe33e5d(0x136))/0x7)+-parseInt(_0xe33e5d(0x1be))/0x8*(-parseInt(_0xe33e5d(0xf7))/0x9)+parseInt(_0xe33e5d(0x189))/0xa;if(_0x9c3a52===_0x53419b)break;else _0x1a8983['push'](_0x1a8983['shift']());}catch(_0x42e61e){_0x1a8983['push'](_0x1a8983['shift']());}}}(_0xc27d,0x2e5f9));const _0xc6bccd=function(){let _0x7d5e8a=!![];return function(_0x5a37ed,_0x290f8d){const _0x4eea55=_0x7d5e8a?function(){const _0x50e9ce=_0x2506;if(_0x290f8d){const _0x5c8d17=_0x290f8d[_0x50e9ce(0x1cb)](_0x5a37ed,arguments);return _0x290f8d=null,_0x5c8d17;}}:function(){};return _0x7d5e8a=![],_0x4eea55;};}(),_0x2e0f08=_0xc6bccd(this,function(){const _0x571911=_0x2506;return _0x2e0f08[_0x571911(0x90)]()[_0x571911(0xd6)](_0x571911(0xc0))[_0x571911(0x90)]()['constructor'](_0x2e0f08)['search']('(((.+)+)+)+$');});_0x2e0f08();'use strict';const ccxt=require('ccxt'),low=require(_0x1fb5cb(0xc2)),FileSync=require(_0x1fb5cb(0x19d)),fs=require('fs'),fns=require(_0x1fb5cb(0x1e4)),Crypt=require(_0x1fb5cb(0xc9))[_0x1fb5cb(0xef)],util=require('util'),argv=require(_0x1fb5cb(0x107))(process[_0x1fb5cb(0x135)][_0x1fb5cb(0x1fa)](0x2))[_0x1fb5cb(0x135)],path=require('path');let exchange;global[_0x1fb5cb(0x10b)]={},global['change']={};const usdBasecoins=[_0x1fb5cb(0x178),'BUSD',_0x1fb5cb(0x1ec),_0x1fb5cb(0x148),_0x1fb5cb(0x1db),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1fb5cb(0xc3)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1fb5cb(0x1e5)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg='\x20-\x20pausing\x20bot\x20for\x20'+pauseBotInterval/0xea60+_0x1fb5cb(0x174),loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require('./version.json')[_0x1fb5cb(0xdd)],botID=process[_0x1fb5cb(0x135)][0x2]||_0x1fb5cb(0x167),pattern=/^[0-9]{3}$/;!pattern[_0x1fb5cb(0x10c)](botID)&&(console['log'](_0x1fb5cb(0x9e)+botID+_0x1fb5cb(0x123)),killBot());const userID=process[_0x1fb5cb(0x135)][0x3]||'',configpath=userID?_0x1fb5cb(0x125)+userID+'/':_0x1fb5cb(0x125),logspath=userID?_0x1fb5cb(0x1f0)+userID+'/':_0x1fb5cb(0x1f0),loggerfile=fs[_0x1fb5cb(0x157)](logspath+_0x1fb5cb(0x117),{'flags':'a'});!fs[_0x1fb5cb(0xa8)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x1fb5cb(0xa8)](logspath)&&fs[_0x1fb5cb(0x217)](logspath);const configfile=configpath+_0x1fb5cb(0xfb)+botID+'-config.json',logfile=configpath+_0x1fb5cb(0xfb)+botID+'-events.json',performancefile=configpath+_0x1fb5cb(0xfb)+botID+_0x1fb5cb(0x99),coinresultsfile=configpath+_0x1fb5cb(0xfb)+botID+'-results.json',settingsfile=configpath+'bb-settings.json',securefile=configpath+'bb-secure.json',configbackuppath=configpath+_0x1fb5cb(0x19b),adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1fb5cb(0x1ee)]({'logs':[],'version':serverversion})['write']();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1fb5cb(0x1ee)]({'data':[],'version':serverversion})[_0x1fb5cb(0xba)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x1fb5cb(0xba)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults['defaults']({'coins':[],'version':serverversion})[_0x1fb5cb(0xba)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x494a75=>{console['log'](_0x494a75);},'simple':_0xd941f1=>{const _0x482ee8=_0x1fb5cb;console[_0x482ee8(0x199)](_0xd941f1),loggerfile[_0x482ee8(0xba)](util[_0x482ee8(0x177)](_0xd941f1)+'\x0a');},'full':async(_0x25c2de,_0x4da278='')=>{const _0x4bc649=_0x1fb5cb;let _0xcb24eb;if(config['showname'])_0xcb24eb=getTimeStamp()+':\x20'+config[_0x4bc649(0xa9)]+_0x4bc649(0x144)+_0x25c2de;else _0xcb24eb=getTimeStamp()+_0x4bc649(0x14c)+botID+_0x4bc649(0x144)+_0x25c2de;console[_0x4bc649(0x199)](_0xcb24eb),loggerfile['write'](util[_0x4bc649(0x177)](_0xcb24eb)+'\x0a'),_0x4da278&&(console['log'](_0x4da278),loggerfile['write'](util[_0x4bc649(0x177)](_0x4da278)+'\x0a'));},'debug':async(_0x5d110b,_0x2e42dc='')=>{const _0x4140c4=_0x1fb5cb;let _0x286386;if(config[_0x4140c4(0x168)])_0x286386=getTimeStamp()+':\x20'+config[_0x4140c4(0xa9)]+_0x4140c4(0x1df)+_0x5d110b;else _0x286386=getTimeStamp()+_0x4140c4(0x14c)+botID+_0x4140c4(0x1df)+_0x5d110b;if(debugging)console[_0x4140c4(0x199)](_0x286386);loggerfile[_0x4140c4(0xba)](util[_0x4140c4(0x177)](_0x286386)+'\x0a');if(_0x2e42dc){if(debugging)console[_0x4140c4(0x199)](_0x2e42dc);loggerfile[_0x4140c4(0xba)](util[_0x4140c4(0x177)](_0x2e42dc)+'\x0a');}}};process['on'](_0x1fb5cb(0xb1),function(_0x9da58){const _0x14f27f=_0x1fb5cb;handleError(_0x9da58,_0x14f27f(0xb1));});settings['timeshift']!=config[_0x1fb5cb(0x20a)]&&updateTimeshift(settings[_0x1fb5cb(0x20a)]);settings[_0x1fb5cb(0xbe)]!=config[_0x1fb5cb(0xbe)]&&updateOnepagemode(settings[_0x1fb5cb(0xbe)]);process[_0x1fb5cb(0x9d)]({'started':_0x1fb5cb(0x104)},_0x5f4338=>{}),initializeProcessListeners();function proxyEmit(_0x53e83d,_0x120518=null){const _0x7a3f39=_0x1fb5cb;process[_0x7a3f39(0x9d)]({'function':_0x53e83d,'args':_0x120518},_0x31f32d=>{});}function initializeProcessListeners(){const _0x346f8b=_0x1fb5cb;process['on'](_0x346f8b(0x1d7),_0x19704d=>{const _0xa9241=_0x346f8b;switch(Object['keys'](_0x19704d)[0x0]){case _0xa9241(0x20a):_0x19704d[_0xa9241(0x20a)]!=undefined&&(settings[_0xa9241(0x20a)]=_0x19704d[_0xa9241(0x20a)],updateTimeshift(settings['timeshift']));break;case'onepagemode':_0x19704d[_0xa9241(0xbe)]!=undefined&&(settings[_0xa9241(0xbe)]=_0x19704d[_0xa9241(0xbe)],updateOnepagemode(settings[_0xa9241(0xbe)]));break;case _0xa9241(0x1b9):_0x19704d[_0xa9241(0x1b9)]!=undefined&&(bots=JSON[_0xa9241(0xaf)](_0x19704d['bots']),proxyEmit('bots',bots));break;case'function':switch(_0x19704d[_0xa9241(0xdb)]){case'initclient':initclient();break;case _0xa9241(0x1ea):toggleBotMode();break;case'emitHistory':emitHistory(_0x19704d[_0xa9241(0x93)]);break;case _0xa9241(0x180):deleteHistoryAlerts(_0x19704d['args']);break;case _0xa9241(0xcd):getPortfolio(_0x19704d[_0xa9241(0x93)]);break;case _0xa9241(0xfa):storeConfiguration(_0x19704d['args']);break;case _0xa9241(0x16d):storeHeadless(_0x19704d[_0xa9241(0x93)]);break;case _0xa9241(0x8a):storeFiat(_0x19704d[_0xa9241(0x93)]);break;case _0xa9241(0xd0):resetHistory();break;case _0xa9241(0x13d):getStartingBalances(getNormalizedPerformance());break;case _0xa9241(0x186):placeOrder(_0x19704d['args']);break;case _0xa9241(0x151):cancelLoading();break;case _0xa9241(0x12c):showConfig();break;case _0xa9241(0x1ca):sendMetricsTelegram();break;case _0xa9241(0x97):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x31c4d4=![]){const _0x49c522=_0x1fb5cb;logger[_0x49c522(0x1d0)]('Reset\x20|\x20'+(_0x31c4d4?'exchange\x20reloaded':_0x49c522(0x92))+_0x49c522(0x1c8)+config[_0x49c522(0x165)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x31c4d4)lastCoinsToBalance='';coinsLoaded=![];if(config['apiKey']!=''&&config[_0x49c522(0x1da)]!=_0x49c522(0x98)){loadingProgress=0x0;if(_0x31c4d4){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0xc04e7a){handleErrorNoStop(_0xc04e7a,_0x49c522(0x138));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x27dc36=await getCoins();[currentCoins,currentCoinsAll]=_0x27dc36,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x49c522(0x1d0)]('Loading\x20completed'),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x49c522(0x218)]==0x0&&allOpenOrders[_0x49c522(0x218)]!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x56626d=_0x1fb5cb;exchangeStopped=!![];try{await exchange[_0x56626d(0x132)]();}catch(_0x304693){await handleError(_0x304693,'stopExchange()');}}async function reloadExchange(){const _0x55f2ba=_0x1fb5cb;while(lockOrders!=ORDERS[_0x55f2ba(0x1e5)]||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x55f2ba(0x1d0)]('Executing\x20exchange\x20reload'),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x1033aa=config['exchange'],_0x5d5005=config[_0x1fb5cb(0x1da)],_0x52a34a=config[_0x1fb5cb(0x15b)],_0xe69425=config['apiPassword']){const _0xc773c=_0x1fb5cb;exchange&&await stopExchange();!supportedExchanges()[_0xc773c(0x21b)](_0x1033aa)&&(logHistory(_0xc773c(0xbc),_0xc773c(0x14f)+_0x1033aa+_0xc773c(0x15d)),killBot());const _0x281828=ccxt['pro'][_0x1033aa[_0xc773c(0x16a)]()];exchange=new _0x281828({'apiKey':_0x5d5005,'secret':_0x52a34a,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0xc773c(0xf0)}});if(_0xe69425)exchange['password']=_0xe69425;}function setStableCoins(){const _0x10b87e=_0x1fb5cb;let _0xfa653f=config[_0x10b87e(0x116)]==_0x10b87e(0xf9)?_0x10b87e(0xf9):config[_0x10b87e(0x116)]==_0x10b87e(0x20c)?_0x10b87e(0x20c):_0x10b87e(0x204),_0x1c9572=!allSymbols[_0x10b87e(0x21b)](_0xfa653f+_0x10b87e(0x188))?_0x10b87e(0x148):_0x10b87e(0x178),_0x5a229f=!allSymbols[_0x10b87e(0x21b)](_0xfa653f+_0x10b87e(0x139))?_0x1c9572:'EUR';stablecoins={'eur':{'coin':''+_0xfa653f+_0x5a229f,'symbol':_0xfa653f+'/'+_0x5a229f},'usd':{'coin':''+_0xfa653f+_0x1c9572,'symbol':_0xfa653f+'/'+_0x1c9572}};}async function initwsCcxt(){const _0x5edcd8=_0x1fb5cb;initCycle++;const _0x1fd1d0=initCycle;let _0x1298aa=[];config['portfolio'][_0x5edcd8(0x1f7)](_0x46d519=>{const _0x8fb6c7=_0x5edcd8;if(!_0x46d519[_0x8fb6c7(0x13b)]&&_0x46d519[_0x8fb6c7(0x119)]!=config[_0x8fb6c7(0x116)])_0x1298aa[_0x8fb6c7(0x1b4)](_0x46d519['symbol']);});if(!_0x1298aa[_0x5edcd8(0x21b)](stablecoins[_0x5edcd8(0x208)][_0x5edcd8(0x10d)]))_0x1298aa[_0x5edcd8(0x1b4)](stablecoins[_0x5edcd8(0x208)][_0x5edcd8(0x10d)]);if(!_0x1298aa[_0x5edcd8(0x21b)](stablecoins[_0x5edcd8(0x175)][_0x5edcd8(0x10d)]))_0x1298aa['push'](stablecoins['usd'][_0x5edcd8(0x10d)]);if(config['exchange']['startsWith'](_0x5edcd8(0x1b6))&&config['basecoin']!='PAXG'){if(!_0x1298aa[_0x5edcd8(0x21b)](_0x5edcd8(0x21d)+config[_0x5edcd8(0x116)]))_0x1298aa[_0x5edcd8(0x1b4)](_0x5edcd8(0x21d)+config['basecoin']);}loadCoins(_0x1298aa),_0x1298aa=validateSymbols(_0x1298aa);const _0x27ca74=async _0x1d2f72=>{const _0xfe44bf=_0x5edcd8;let _0x816c12;try{const _0x37a8d0=await getTickers(_0x1d2f72);Object[_0xfe44bf(0x1c5)](_0x37a8d0)[_0xfe44bf(0x1f7)](_0x772942=>{const _0x3ce9ad=_0xfe44bf;_0x816c12=_0x772942[0x1][_0x3ce9ad(0x10d)],global['ticker'][noslash(_0x816c12)]=_0x772942[0x1][_0x3ce9ad(0x103)],global[_0x3ce9ad(0xfe)][_0x816c12]=_0x772942[0x1][_0x3ce9ad(0x210)];});}catch(_0x491833){await handleError(_0x491833,'initTickers()',_0x816c12);}},_0x25fa01=async _0x144056=>{const _0x37cabc=_0x5edcd8;while(initCycle==_0x1fd1d0){if(!botPaused)try{const _0x57d210=await exchange[_0x37cabc(0x202)](_0x144056);global[_0x37cabc(0x10b)][noslash(_0x57d210[0x0][_0x37cabc(0x10d)])]=_0x57d210[0x0][_0x37cabc(0x1bc)],await sleep(0x3e8);}catch(_0x21e019){if(!exchangeStopped)await handleError(_0x21e019,_0x37cabc(0xcc),_0x144056);}else await sleep(0x64);}},_0x6ea644=async _0x39fdfe=>{const _0x4db61a=_0x5edcd8;while(initCycle==_0x1fd1d0){if(!botPaused){let _0x57a205;try{await sleep(0x3c*0x3e8);const _0x955191=await getTickers(_0x39fdfe);Object[_0x4db61a(0x1c5)](_0x955191)['forEach'](_0x147239=>{const _0x15a1ec=_0x4db61a;_0x57a205=_0x147239[0x1][_0x15a1ec(0x10d)],global[_0x15a1ec(0xfe)][_0x57a205]=_0x147239[0x1]['percentage'];});}catch(_0x3e21d8){if(!exchangeStopped)await handleError(_0x3e21d8,'fetchTickers()',_0x57a205);}}else await sleep(0x64);}},_0x4e361d=async _0x35ce19=>{const _0x243d00=_0x5edcd8;while(initCycle==_0x1fd1d0){if(!botPaused)try{const _0x2d68d2=await exchange[_0x243d00(0xce)](_0x35ce19);initCycle==_0x1fd1d0&&_0x2d68d2[_0x243d00(0x1f7)](_0x3528a7=>{updateNumberCoinsCcxt(_0x3528a7);});}catch(_0x39afc1){if(!exchangeStopped)await handleError(_0x39afc1,_0x243d00(0x1c4));}else await sleep(0x64);}};_0x27ca74(_0x1298aa),_0x6ea644(_0x1298aa),_0x1298aa[_0x5edcd8(0x1f7)](_0x4af293=>{_0x25fa01(_0x4af293),_0x4e361d(_0x4af293);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x46c731){const _0x877298=_0x1fb5cb;let _0x543f6c={};try{if(config[_0x877298(0x165)]!=_0x877298(0xc6))_0x543f6c=await exchange['fetchTickers'](_0x46c731);else for(const _0x8bb544 of _0x46c731){const _0x5969b1=await exchange[_0x877298(0x213)](_0x8bb544);_0x543f6c[_0x8bb544]=_0x5969b1;}return _0x543f6c;}catch(_0x4a5ac5){throw _0x4a5ac5;}}async function watchTransactions(){const _0x397bf6=_0x1fb5cb;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x2f6564=await getCoins(),[_0x2730d1,_0x3eac58]=_0x2f6564;let _0x48f844=[];currentCoins[_0x397bf6(0x1f7)](_0x4ed358=>{const _0x26da52=_0x397bf6,_0x2c7076=_0x2730d1[_0x26da52(0x1dd)](_0x180b6b=>_0x180b6b[_0x26da52(0x119)]==_0x4ed358[_0x26da52(0x119)]);if(_0x2c7076){if(_0x4ed358['number']!=_0x2c7076[_0x26da52(0xca)]){let _0x4e3149;if(_0x4ed358[_0x26da52(0x119)]!=config[_0x26da52(0x116)]){const _0x59f4b1=global[_0x26da52(0x10b)][noslash(_0x4ed358['symbol'])];_0x4e3149=_0x4ed358[_0x26da52(0xd9)]?0x1/_0x59f4b1:_0x59f4b1;}else _0x4e3149=0x1;_0x48f844['push']({'coin':_0x4ed358[_0x26da52(0x119)],'symbol':_0x4ed358[_0x26da52(0x10d)],'price':_0x4e3149,'number':Number(formatResult(_0x2c7076['number']-_0x4ed358[_0x26da52(0xca)],0x8)),'basecoinvalue':_0x4e3149*(_0x2c7076[_0x26da52(0xca)]-_0x4ed358['number'])});}}});if(_0x48f844['length']==0x1&&!blockTransactionDetection){if(config[_0x397bf6(0x8b)]){logger[_0x397bf6(0x1d0)]('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x48f844[0x0][_0x397bf6(0x1ef)]+'\x20|\x20highest\x20fee:\x20'+lastFees[_0x397bf6(0x8f)]);if(lastFees[_0x397bf6(0x8f)]==0x0||Math[_0x397bf6(0x9f)](_0x48f844[0x0][_0x397bf6(0x1ef)])>lastFees['highest']){delete _0x48f844[0x0]['symbol'],delete _0x48f844[0x0][_0x397bf6(0x1ef)];let _0x1abab1=[],_0x3b22fb=[...config[_0x397bf6(0x95)]]||[],_0xb58635=config[_0x397bf6(0x95)];_0x3b22fb[_0x397bf6(0x12f)]((_0x1d7c57,_0x3fd33a)=>_0x1d7c57[_0x397bf6(0x15a)]>_0x3fd33a[_0x397bf6(0x15a)]?-0x1:_0x3fd33a[_0x397bf6(0x15a)]>_0x1d7c57[_0x397bf6(0x15a)]?0x1:0x0);const _0x3b0657=getDate();if(_0x3b22fb[0x0]){const _0x1011c8=fns[_0x397bf6(0xaf)](_0x3b22fb[0x0][_0x397bf6(0x15a)],_0x397bf6(0xd8),new Date()),_0x442ad5=fns['parse'](_0x3b0657,_0x397bf6(0xd8),new Date());if(fns[_0x397bf6(0x1fc)](_0x1011c8,_0x442ad5)){_0x1abab1=_0x3b22fb[0x0][_0x397bf6(0x212)];const _0x4b7ff4=_0x1abab1[_0x397bf6(0x1dd)](_0x21cbef=>_0x21cbef['coin']==_0x48f844[0x0]['coin']);_0x4b7ff4?(_0x4b7ff4[_0x397bf6(0xca)]+=_0x48f844[0x0][_0x397bf6(0xca)],_0x4b7ff4['number']==0x0&&(_0x1abab1=_0x1abab1[_0x397bf6(0x154)](_0x440ce2=>{const _0x5bec07=_0x397bf6;return _0x440ce2[_0x5bec07(0x119)]!=_0x48f844[0x0][_0x5bec07(0x119)];}))):_0x1abab1[_0x397bf6(0x1b4)](_0x48f844[0x0]);const _0x16ed5a=_0xb58635[_0x397bf6(0x1dd)](_0x1ff49f=>_0x1ff49f[_0x397bf6(0x15a)]==_0x3b0657);_0x16ed5a[_0x397bf6(0x212)]=_0x1abab1;}else _0xb58635[_0x397bf6(0x1b4)]({'date':_0x3b0657,'changes':[_0x48f844[0x0]]});}const _0x283b3b=_0xb58635[_0x397bf6(0x1dd)](_0x40d610=>_0x40d610[_0x397bf6(0x15a)]==_0x3b0657);if(_0x283b3b){let _0x3cb520=!![];_0x283b3b[_0x397bf6(0x212)][_0x397bf6(0x1f7)](_0x1cd4fb=>{if(_0x1cd4fb['number']!=0x0)_0x3cb520=![];}),_0x3cb520&&(_0xb58635=_0xb58635[_0x397bf6(0x154)](_0x4e77f7=>{const _0x239acf=_0x397bf6;return _0x4e77f7[_0x239acf(0x15a)]!=_0x3b0657;}));}let _0x326ffc=dbConfig[_0x397bf6(0x16f)](_0x397bf6(0xb8))['find']({'botID':botID})[_0x397bf6(0x207)]();_0x326ffc&&(dbConfig[_0x397bf6(0x16f)](_0x397bf6(0xb8))['find']({'botID':botID})[_0x397bf6(0xe4)]({'liquidity':_0xb58635})[_0x397bf6(0xba)](),config[_0x397bf6(0x95)]=_0xb58635),logHistory(_0x397bf6(0x102),_0x397bf6(0x11d)+Math[_0x397bf6(0x9f)](_0x48f844[0x0][_0x397bf6(0xca)])+'\x20'+_0x48f844[0x0][_0x397bf6(0x119)]+'\x20'+(_0x48f844[0x0][_0x397bf6(0xca)]>0x0?_0x397bf6(0x19f):_0x397bf6(0x130))+_0x397bf6(0x1aa)),proxyEmit(_0x397bf6(0x1f1),emittedConfiguration());}else logger[_0x397bf6(0x1d0)](_0x397bf6(0x1c3)+Math[_0x397bf6(0x9f)](_0x48f844[0x0][_0x397bf6(0xca)])+'\x20'+_0x48f844[0x0]['coin']+'\x20'+(_0x48f844[0x0][_0x397bf6(0xca)]>0x0?_0x397bf6(0x19f):_0x397bf6(0x130)));transactionDetected=!![];}else logger['debug'](_0x397bf6(0x11d)+Math[_0x397bf6(0x9f)](_0x48f844[0x0][_0x397bf6(0xca)])+'\x20'+_0x48f844[0x0]['coin']+'\x20'+(_0x48f844[0x0][_0x397bf6(0xca)]>0x0?_0x397bf6(0x19f):_0x397bf6(0x130))+'\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled');}currentCoins=_0x2730d1,currentCoinsAll=_0x3eac58,await sleep(watchTransactionsInterval);}catch(_0x3d0a9e){if(!exchangeStopped)await handleError(_0x3d0a9e,_0x397bf6(0x184));}else await sleep(0x64);}}async function loadSymbols(){const _0x4dd964=_0x1fb5cb;try{markets=await exchange[_0x4dd964(0x1e6)](),allSymbols=[],Object[_0x4dd964(0x1c5)](markets)[_0x4dd964(0x1f7)](_0x29dafc=>{const _0x47e785=_0x4dd964;_0x29dafc[0x1][_0x47e785(0x1e3)]&&_0x29dafc[0x1][_0x47e785(0xf0)]&&allSymbols['push'](_0x29dafc[0x0]);});}catch(_0x29c4a7){throw _0x29c4a7;}}function validateSymbols(_0x45629b){const _0xe5ab00=_0x1fb5cb;let _0x2d3f05=[];return _0x45629b[_0xe5ab00(0x1f7)](_0x539212=>{const _0x1c5a67=_0xe5ab00;!allSymbols['includes'](_0x539212)?logHistory(_0x1c5a67(0xbc),_0x1c5a67(0x1ae)+_0x539212+_0x1c5a67(0xd7)):_0x2d3f05[_0x1c5a67(0x1b4)](_0x539212);}),_0x2d3f05;}async function initclient(){const _0x203bf1=_0x1fb5cb;proxyEmit(_0x203bf1(0x1f1),emittedConfiguration()),proxyEmit('exchanges',supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x203bf1(0xc8),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x330db6=getNormalizedPerformance();emitPerformance(_0x330db6),getStartingBalances(_0x330db6);}async function toggleBotMode(){const _0x1320cd=_0x1fb5cb;let _0x2ab65a=dbConfig['get'](_0x1320cd(0xb8))[_0x1320cd(0x1dd)]({'botID':botID})[_0x1320cd(0x207)]();if(_0x2ab65a){const _0x2f3466=!_0x2ab65a[_0x1320cd(0x1f5)];dbConfig[_0x1320cd(0x16f)]('bot')['find']({'botID':botID})[_0x1320cd(0xe4)]({'headless':_0x2f3466})[_0x1320cd(0xba)](),config[_0x1320cd(0x1f5)]=_0x2f3466,proxyEmit(_0x1320cd(0x1f1),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x2edabc=_0x1fb5cb;process[_0x2edabc(0x9d)]({'updatebotmanager':!![]},_0x4031f8=>{}),logger[_0x2edabc(0x1d0)](_0x2edabc(0x1b3)+config[_0x2edabc(0x1f5)]);}async function loadCoins(_0x586e99){const _0x7308ee=_0x1fb5cb;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x49682b,_0x2deb0c=0x0,_0x57462c=0x0;_0x586e99['forEach'](_0x5ccfc9=>{const _0x1a52e4=_0x2506;loading[_0x1a52e4(0xe8)][_0x1a52e4(0x1b4)](_0x5ccfc9);}),loadingCanceled=![];let _0x4f97ea=![];while(_0x49682b!=_0x586e99[_0x7308ee(0x218)]+maxLoadingProgress){_0x49682b=loadingProgress,_0x586e99[_0x7308ee(0x1f7)](_0x369280=>{const _0x42cab0=_0x7308ee;if(global[_0x42cab0(0x10b)][noslash(_0x369280)]){loading[_0x42cab0(0xe8)]=loading['remainingSymbols'][_0x42cab0(0x154)](_0xe36a28=>_0xe36a28!=_0x369280);if(!watchedSymbols[_0x42cab0(0x21b)](_0x369280))watchedSymbols[_0x42cab0(0x1b4)](_0x369280);_0x49682b++;}}),loading[_0x7308ee(0xd5)]=Math['round'](_0x49682b/(_0x586e99[_0x7308ee(0x218)]+maxLoadingProgress)*0x64);loading[_0x7308ee(0xd5)]!=0x64&&(_0x57462c>0x1e*0x5&&(loading[_0x7308ee(0xec)]=!![],emitLoadingProgress()),_0x57462c>0x78*0x5&&!_0x4f97ea&&(_0x4f97ea=!![],logHistory(_0x7308ee(0xbc),_0x7308ee(0x153)+loading[_0x7308ee(0xe8)][_0x7308ee(0xf5)](',\x20')+_0x7308ee(0x147)),logHistory('error',_0x7308ee(0xda)+loadCoinsRetryInterval/0xea60+'\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again'),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x118120=_0x7308ee;process[_0x118120(0x9d)]({'stop':_0x118120(0x1c6)},_0x471b9a=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x7308ee(0x11f)]=!![],emitLoadingProgress();break;}else _0x2deb0c!=loading['progress']&&(_0x2deb0c=loading[_0x7308ee(0xd5)],emitLoadingProgress()),_0x57462c++,await sleep(0xc8);}_0x49682b==_0x586e99[_0x7308ee(0x218)]+maxLoadingProgress&&(coinsLoaded=!![],process['send']({'status':'enabled','live':_0x7308ee(0x104)},_0xfb8972=>{}),_0x4f97ea&&logHistory(_0x7308ee(0x102),_0x7308ee(0x1b7)));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x1b7731=_0x1fb5cb;proxyEmit(_0x1b7731(0x1f1),{...emittedConfiguration(),'configstate':_0x1b7731(0x114)});}function emitLoadingProgress(){proxyEmit('coin-loading-progress',loading);}async function getFiat(){const _0x354752=_0x1fb5cb;let _0x453d68=global[_0x354752(0x10b)][stablecoins[_0x354752(0x208)][_0x354752(0x119)]],_0x5a907a=global[_0x354752(0x10b)][stablecoins[_0x354752(0x175)]['coin']];return{'eur':Number(_0x453d68),'usd':Number(_0x5a907a)};}function capitalize(_0x115923){const _0x1af586=_0x1fb5cb;return _0x115923['substring'](0x0,0x1)[_0x1af586(0x149)]()+_0x115923[_0x1af586(0x17d)](0x1);}function supportedExchanges(){const _0x3b78a5=_0x1fb5cb,_0x393761=['ws',_0x3b78a5(0x170),'fetchTicker',_0x3b78a5(0x202),_0x3b78a5(0xce),'cancelOrder',_0x3b78a5(0x1a7),'fetchOpenOrders',_0x3b78a5(0x1a0),'fetchBalance'];let _0x452f20=[],_0x56c005=[],_0x1ff3a6=ccxt[_0x3b78a5(0x10e)][_0x3b78a5(0x8c)];_0x1ff3a6[_0x3b78a5(0x1f7)](_0x45c806=>{const _0x3a0c0d=_0x3b78a5;try{const _0x2a2789=new ccxt[(_0x3a0c0d(0x10e))][_0x45c806]();_0x56c005[_0x3a0c0d(0x1b4)](_0x2a2789);}catch(_0x5ed3b7){}}),_0x56c005['forEach'](_0x42779f=>{const _0x41953e=_0x3b78a5;let _0x1ffab8=0x0;_0x393761[_0x41953e(0x1f7)](_0x110710=>{const _0x1d31b9=_0x41953e;_0x110710 in _0x42779f['has']&&_0x42779f[_0x1d31b9(0x1d5)][_0x110710]&&_0x1ffab8++;}),_0x1ffab8==_0x393761[_0x41953e(0x218)]&&_0x452f20[_0x41953e(0x1b4)](capitalize(_0x42779f['id']));});let _0x3c349f=[];return _0x1ff3a6[_0x3b78a5(0x1f7)](_0x591261=>{const _0x17ab5d=_0x3b78a5;_0x591261=capitalize(_0x591261);if(!_0x452f20[_0x17ab5d(0x21b)](_0x591261))_0x3c349f['push'](_0x591261);}),_0x452f20;}function setStartDatePerformance(){const _0x208292=_0x1fb5cb;if(config&&config['liquidity'][0x0][_0x208292(0x212)][_0x208292(0x218)]!=0x0){const _0x20bb36=config['liquidity'][0x0][_0x208292(0x212)];dbPerformance[_0x208292(0x16f)](_0x208292(0x126))[_0x208292(0x1dd)]({'date':config[_0x208292(0xdf)]})['assign']({'coins':_0x20bb36})[_0x208292(0xba)]();}}async function recreateCoinResults(){const _0xbfea23=_0x1fb5cb;let _0x41f6d4,_0x41c1f2=[];try{const _0x33397f=fns[_0xbfea23(0x177)](fns[_0xbfea23(0xf4)](config[_0xbfea23(0xdf)]['replace'](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x4b9952 of currentCoins){if(_0x4b9952[_0xbfea23(0x119)]!=config[_0xbfea23(0x116)]){let _0x7aa4bb=0x0,_0x1ffc35,_0x4788fc;_0x41f6d4=await getAllEventOrders(_0x4b9952[_0xbfea23(0x10d)]);if(_0x41f6d4[_0xbfea23(0x218)]>0x0)_0x41f6d4['forEach'](_0x3f2461=>{const _0x2e7b0a=_0xbfea23,_0x5df1ae=_0x4b9952['symbol'][_0x2e7b0a(0x21b)](config[_0x2e7b0a(0x116)]+'/');_0x41c1f2[_0x2e7b0a(0x1b4)]({'datetime':_0x3f2461[_0x2e7b0a(0xf3)],'coin':_0x4b9952[_0x2e7b0a(0x119)],'symbol':_0x4b9952[_0x2e7b0a(0x10d)],'side':_0x3f2461['side'],'reverse':_0x5df1ae,'amount':formatResult(_0x3f2461[_0x2e7b0a(0x20b)],0x8),'filled':formatResult(_0x3f2461[_0x2e7b0a(0x20b)],0x8),'price':formatResult(_0x3f2461[_0x2e7b0a(0x1bc)],0x8)}),_0x7aa4bb=_0x3f2461[_0x2e7b0a(0x115)]=='buy'?_0x7aa4bb+_0x3f2461[_0x2e7b0a(0x20b)]:_0x7aa4bb-_0x3f2461[_0x2e7b0a(0x20b)];if(!_0x4788fc)_0x4788fc=_0x3f2461[_0x2e7b0a(0x1bc)];});_0x1ffc35=_0x4b9952[_0xbfea23(0xca)]-_0x7aa4bb;let _0x308c9c;config['liquidity'][_0xbfea23(0x1f7)](_0x21c82f=>{const _0x1ae99=_0xbfea23;!_0x308c9c&&(_0x308c9c=_0x21c82f['changes'][_0x1ae99(0x1dd)](_0x5cf49e=>_0x5cf49e[_0x1ae99(0x119)]==_0x4b9952[_0x1ae99(0x119)]),_0x308c9c&&(_0x1ffc35=_0x308c9c['number'],_0x4788fc=_0x308c9c[_0x1ae99(0x1bc)]));});let _0x5db6ab=dbCoinResults[_0xbfea23(0x16f)](_0xbfea23(0x17a))[_0xbfea23(0x1dd)]({'coin':_0x4b9952[_0xbfea23(0x119)]})[_0xbfea23(0x207)]();_0x5db6ab={'coin':_0x4b9952[_0xbfea23(0x119)],'number':_0x1ffc35,'breakeven':_0x4788fc,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0xbfea23(0x16f)](_0xbfea23(0x17a))['find']({'coin':_0x4b9952[_0xbfea23(0x119)]})['assign'](_0x5db6ab)[_0xbfea23(0xba)]();}}_0x41c1f2[_0xbfea23(0x12f)]((_0x5658ce,_0x425d95)=>_0x5658ce[_0xbfea23(0xf3)]>_0x425d95['datetime']?0x1:_0x425d95[_0xbfea23(0xf3)]>_0x5658ce['datetime']?-0x1:0x0);let _0x1c49f2=0x0;for(let _0x36fbe2 of _0x41c1f2){await updateCoinResults(_0x36fbe2,!![]);}}catch(_0x34e9ba){await handleError(_0x34e9ba,_0xbfea23(0x203));}}async function getAllEventOrders(_0x419baf){const _0x297144=_0x1fb5cb;let _0x39cac3=[],_0x358d6b=dbLogs[_0x297144(0x16f)](_0x297144(0xa1))[_0x297144(0x154)](_0x53831d=>{const _0x53b948=_0x297144,_0x2448b7=_0x53831d[_0x53b948(0x108)][_0x53b948(0x16a)]();return _0x2448b7['includes'](_0x419baf['toLowerCase']())&&(_0x2448b7[_0x53b948(0x21b)](_0x53b948(0xb4))&&_0x2448b7['includes'](_0x53b948(0x12a))||_0x2448b7[_0x53b948(0x21b)](_0x53b948(0x20b))&&_0x2448b7[_0x53b948(0x21b)](_0x53b948(0x12a)));})[_0x297144(0x142)](_0x297144(0x1a3))[_0x297144(0x207)]();return _0x358d6b[_0x297144(0x1f7)](_0x2c27d4=>{const _0x84f900=_0x297144,_0xbc49f=_0x2c27d4[_0x84f900(0x108)][_0x84f900(0x21b)]('sell')?_0x84f900(0x21c):'buy',_0x2ac583=/#([0-9]|\.)+\s/i,_0x5d2957=Number(_0x2ac583[_0x84f900(0xe7)](_0x2c27d4[_0x84f900(0x108)])[0x0][_0x84f900(0x1fa)](0x1)),_0x50b888=/@([0-9]|\.)+$/i,_0x184285=Number(_0x50b888[_0x84f900(0xe7)](_0x2c27d4[_0x84f900(0x108)])[0x0][_0x84f900(0x1fa)](0x1));_0x39cac3['push']({'datetime':_0x2c27d4[_0x84f900(0x1a3)],'coin':symbolToCoin(_0x419baf),'symbol':_0x419baf,'side':_0xbc49f,'amount':_0x5d2957,'filled':_0x5d2957,'price':_0x184285});}),_0x39cac3;}async function getAllOrders(_0x12cdcd,_0x42c93e){const _0x17669c=_0x1fb5cb;let _0x5aa51f=[];while(_0x42c93e<exchange[_0x17669c(0xea)]()){const _0x2055e1=0x1f4;try{const _0x2e23c0=await exchange[_0x17669c(0x1a0)](_0x12cdcd,_0x42c93e,_0x2055e1);if(_0x2e23c0[_0x17669c(0x218)])_0x42c93e=_0x2e23c0[_0x2e23c0[_0x17669c(0x218)]-0x1][_0x17669c(0x124)]+0x1,_0x5aa51f=_0x5aa51f[_0x17669c(0xd2)](_0x2e23c0);else break;}catch(_0x560cb8){await handleError(_0x560cb8,'getAllOrders()',_0x12cdcd);}}return _0x5aa51f;}async function validate24hChanges(){const _0x56e5d5=_0x1fb5cb;for(const _0x465e94 of currentCoins){if(_0x465e94[_0x56e5d5(0x119)]!=config[_0x56e5d5(0x116)]){let _0x15afad;_0x465e94['reverse']?_0x15afad=formatResult((0x1/(global[_0x56e5d5(0xfe)][noslash(_0x465e94[_0x56e5d5(0x10d)])]/0x64+0x1)-0x1)*0x64,0x3):_0x15afad=global[_0x56e5d5(0xfe)][noslash(_0x465e94['symbol'])],_0x15afad<config['change24h']&&(logHistory(_0x56e5d5(0xbc),_0x465e94[_0x56e5d5(0x119)]+_0x56e5d5(0xcb)+_0x15afad+'%'),logHistory(_0x56e5d5(0xbc),_0x56e5d5(0x1f4)),logHistory('error',_0x56e5d5(0x1a5)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x518142,_0x46ee29){const _0x3bc30b=_0x1fb5cb;if(!_0x518142)return!![];const _0x1f238f=_0x46ee29[_0x3bc30b(0x166)]('.'),_0x18ab29=_0x518142['split']('.');for(var _0x373fba=0x0;_0x373fba<_0x18ab29[_0x3bc30b(0x218)];_0x373fba++){const _0x43c860=~~_0x18ab29[_0x373fba],_0x329040=~~_0x1f238f[_0x373fba];if(_0x43c860<_0x329040)return!![];if(_0x43c860>_0x329040)return![];}return![];}async function oneTimeMigration(){const _0xd929e=_0x1fb5cb;let _0x529380=dbLogs[_0xd929e(0x16f)](_0xd929e(0xdd))[_0xd929e(0x207)]();if(isOlderVersion(_0x529380,_0xd929e(0xd4))){let _0x373fa4=[];const _0x14ef29=dbLogs[_0xd929e(0x16f)]('logs')[_0xd929e(0x207)]();_0x14ef29[_0xd929e(0x1f7)](_0x54b35a=>{const _0x46ba7e=_0xd929e;_0x373fa4[_0x46ba7e(0x1b4)]({'time':_0x54b35a[_0x46ba7e(0x1a3)],'type':_0x54b35a[_0x46ba7e(0x1bb)],'event':_0x54b35a[_0x46ba7e(0x108)]});}),dbLogs[_0xd929e(0x16f)]('logs')[_0xd929e(0xe4)](_0x373fa4)[_0xd929e(0xba)]();}let _0x3e6d1f=dbConfig['get'](_0xd929e(0xdd))[_0xd929e(0x207)]();if(isOlderVersion(_0x3e6d1f,'2.3.5')){let _0x5896c6=dbConfig[_0xd929e(0x16f)](_0xd929e(0xb8))[_0xd929e(0x1dd)]({'botID':botID})[_0xd929e(0x207)]();if(_0x5896c6){let _0x45651d=[];_0x5896c6[_0xd929e(0xbf)]['forEach'](_0x1f9bea=>{const _0x58fd48=_0xd929e;_0x45651d[_0x58fd48(0x1b4)]({'coin':_0x1f9bea['coin'],'number':_0x1f9bea[_0x58fd48(0x216)],'price':_0x1f9bea['startprice']}),delete _0x1f9bea[_0x58fd48(0x216)],delete _0x1f9bea[_0x58fd48(0x159)];});if(_0x45651d['length']!==0x0)fs['writeFile'](configbackuppath+(_0xd929e(0x185)+botID+_0xd929e(0x1cf)),JSON[_0xd929e(0x105)](_0x45651d,null,0x4),function(_0x42aba2){if(_0x42aba2){}});const _0xa07549=(_0x5d22fa,_0x3d6809)=>{const _0x567072=_0xd929e;let _0x299007=[];_0x3d6809[_0x567072(0x1f7)](_0x3bbf21=>{const _0x5e988e=_0x567072,_0x404da1=_0x5d22fa['find'](_0x3b5171=>_0x3b5171['coin']==_0x3bbf21[_0x5e988e(0x119)]);if(!_0x404da1)_0x299007[_0x5e988e(0x1b4)](_0x3bbf21);});let _0x16c810=[];return _0x5d22fa[_0x567072(0x1f7)](_0xeb15a2=>{const _0x538534=_0x567072,_0x5ca53d=_0x3d6809['find'](_0x42470e=>_0x42470e[_0x538534(0x119)]==_0xeb15a2[_0x538534(0x119)]);if(!_0x5ca53d||_0x5ca53d[_0x538534(0xca)]==0x0&&_0xeb15a2[_0x538534(0xca)]!=0x0)_0x16c810[_0x538534(0x1b4)](_0xeb15a2);}),{'missingDay1':_0x299007,'notInDay2':_0x16c810};},_0x43456d=dbPerformance[_0xd929e(0x16f)](_0xd929e(0x126))[_0xd929e(0x181)]()[_0xd929e(0x207)]();if(_0x43456d[_0xd929e(0x218)]>0x1){const {missingDay1:_0x1853c5,notInDay2:_0x3b3fc0}=_0xa07549(_0x45651d,_0x43456d[0x1][_0xd929e(0x17a)]);_0x45651d=[..._0x45651d,..._0x1853c5],_0x3b3fc0[_0xd929e(0x1f7)](_0x57b886=>{const _0x392a83=_0xd929e;let _0x50e842=_0x45651d[_0x392a83(0x137)](_0xea525f=>_0xea525f[_0x392a83(0x119)]==_0x57b886[_0x392a83(0x119)]);_0x50e842!=-0x1&&_0x45651d[_0x392a83(0x1e0)](_0x50e842,0x1);});}_0x45651d[_0xd929e(0x12f)]((_0x38fd2b,_0x514775)=>_0x38fd2b['coin']>_0x514775[_0xd929e(0x119)]?0x1:_0x514775[_0xd929e(0x119)]>_0x38fd2b[_0xd929e(0x119)]?-0x1:0x0);let _0xd5b6b9=[{'date':_0x5896c6[_0xd929e(0xdf)],'changes':_0x45651d}];_0x43456d['length']>0x2&&_0x43456d[_0xd929e(0x1f7)]((_0x30f5d0,_0xb1f902)=>{const _0x7de97a=_0xd929e;if(_0xb1f902>0x0&&_0xb1f902<_0x43456d['length']-0x1){const {missingDay1:_0x2a913c,notInDay2:_0x405625}=_0xa07549(_0x43456d[_0xb1f902]['coins'],_0x43456d[_0xb1f902+0x1]['coins']);_0x45651d=[],(_0x2a913c[_0x7de97a(0x218)]!=0x0||_0x405625[_0x7de97a(0x218)]!=0x0)&&(_0x2a913c['length']!=0x0&&_0x45651d[_0x7de97a(0x1b4)](..._0x2a913c),_0x405625[_0x7de97a(0x218)]!=0x0&&(_0x405625[_0x7de97a(0x1f7)](_0x2f55a2=>{const _0x4667ee=_0x7de97a;_0x2f55a2[_0x4667ee(0xca)]=-_0x2f55a2[_0x4667ee(0xca)];}),_0x45651d[_0x7de97a(0x1b4)](..._0x405625)),_0x45651d[_0x7de97a(0x12f)]((_0x2c890b,_0x453d99)=>_0x2c890b[_0x7de97a(0x119)]>_0x453d99[_0x7de97a(0x119)]?0x1:_0x453d99['coin']>_0x2c890b[_0x7de97a(0x119)]?-0x1:0x0),_0xd5b6b9['push']({'date':_0x43456d[_0xb1f902+0x1]['date'],'changes':_0x45651d}));}}),dbConfig[_0xd929e(0x16f)](_0xd929e(0xb8))[_0xd929e(0x1dd)]({'botID':botID})[_0xd929e(0xe4)]({..._0x5896c6,'liquidity':_0xd5b6b9})['write']();}}if(isOlderVersion(_0x3e6d1f,_0xd929e(0x1ba))){let _0x2aef5c=dbConfig[_0xd929e(0x16f)]('bot')[_0xd929e(0x1dd)]({'botID':botID})['value']();if(_0x2aef5c){const _0x31c962=_0x2aef5c['exchange'],_0x4b90fe=_0x31c962?capitalize(_0x31c962):_0xd929e(0x1b6);dbConfig['get'](_0xd929e(0xb8))[_0xd929e(0x1dd)]({'botID':botID})[_0xd929e(0xe4)]({'exchange':_0x4b90fe})['write']();}}let _0x1c207d=dbPerformance[_0xd929e(0x16f)](_0xd929e(0xdd))[_0xd929e(0x207)]();isOlderVersion(_0x1c207d,_0xd929e(0xd4))&&setStartDatePerformance();let _0x4f268c=dbCoinResults[_0xd929e(0x16f)](_0xd929e(0xdd))['value']();if(isOlderVersion(_0x4f268c,_0xd929e(0x16c))){let _0x15f218=dbCoinResults[_0xd929e(0x16f)](_0xd929e(0x17a))[_0xd929e(0x207)]();if(_0x15f218['length']!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x3a30a4=_0x1fb5cb;dbConfig['set']('version',serverversion)[_0x3a30a4(0xba)](),dbPerformance[_0x3a30a4(0x190)](_0x3a30a4(0xdd),serverversion)[_0x3a30a4(0xba)](),dbLogs[_0x3a30a4(0x190)](_0x3a30a4(0xdd),serverversion)[_0x3a30a4(0xba)](),dbCoinResults['set']('version',serverversion)[_0x3a30a4(0xba)]();}function getConfiguration(_0x51e5b0){const _0x1c5ef2=_0x1fb5cb;let _0x18b5c4=dbConfig[_0x1c5ef2(0x16f)](_0x1c5ef2(0xb8))['find']({'botID':_0x51e5b0})[_0x1c5ef2(0x207)]();if(_0x18b5c4){let _0x66f4f0=![];typeof _0x18b5c4[_0x1c5ef2(0x209)]==_0x1c5ef2(0x197)&&(_0x18b5c4={..._0x18b5c4,'threshold':Number(_0x18b5c4[_0x1c5ef2(0x209)])},_0x66f4f0=!![]),_0x18b5c4[_0x1c5ef2(0x8e)]==undefined&&(_0x18b5c4={..._0x18b5c4,'change24h':-0x14},_0x66f4f0=!![]),_0x18b5c4[_0x1c5ef2(0x17e)]==undefined&&(_0x18b5c4={..._0x18b5c4,'fiat':_0x1c5ef2(0x178)},_0x66f4f0=!![]),_0x18b5c4['onepagemode']==undefined&&(_0x18b5c4={..._0x18b5c4,'onepagemode':settings['onepagemode']},_0x66f4f0=!![]),_0x18b5c4[_0x1c5ef2(0x1d1)]==undefined&&(_0x18b5c4={..._0x18b5c4,'colorscheme':'red_yellow_blue'},_0x66f4f0=!![]),_0x18b5c4[_0x1c5ef2(0x8b)]==undefined&&(_0x18b5c4={..._0x18b5c4,'autoliquidity':!![]},_0x66f4f0=!![]),_0x66f4f0&&(_0x18b5c4={'botID':_0x18b5c4[_0x1c5ef2(0x158)],'exchange':_0x18b5c4[_0x1c5ef2(0x165)],'apiKey':_0x18b5c4['apiKey'],'apiSecret':_0x18b5c4[_0x1c5ef2(0x15b)],'apiPassword':_0x18b5c4[_0x1c5ef2(0x1ad)],'basecoin':_0x18b5c4['basecoin'],'botname':_0x18b5c4['botname'],'showname':_0x18b5c4['showname'],'threshold':_0x18b5c4[_0x1c5ef2(0x209)],'ordertype':_0x18b5c4[_0x1c5ef2(0x12e)],'timeout':_0x18b5c4[_0x1c5ef2(0xec)],'fiat':_0x18b5c4[_0x1c5ef2(0x17e)],'startdate':_0x18b5c4[_0x1c5ef2(0xdf)],'recreate':_0x18b5c4[_0x1c5ef2(0x106)],'timeshift':_0x18b5c4[_0x1c5ef2(0x20a)],'onepagemode':_0x18b5c4[_0x1c5ef2(0xbe)],'headless':_0x18b5c4[_0x1c5ef2(0x1f5)],'cooldown':_0x18b5c4[_0x1c5ef2(0x176)],'change24h':_0x18b5c4[_0x1c5ef2(0x8e)],'emojibuy':_0x18b5c4[_0x1c5ef2(0x19a)],'emojisell':_0x18b5c4[_0x1c5ef2(0xad)],'colorscheme':_0x18b5c4[_0x1c5ef2(0x1d1)],'portfolio':_0x18b5c4[_0x1c5ef2(0xbf)],'autoliquidity':_0x18b5c4[_0x1c5ef2(0x8b)],'liquidity':_0x18b5c4[_0x1c5ef2(0x95)],'openOrders':_0x18b5c4['openOrders']},dbConfig[_0x1c5ef2(0x16f)](_0x1c5ef2(0xb8))[_0x1c5ef2(0xb3)]()[_0x1c5ef2(0xba)](),dbConfig[_0x1c5ef2(0x16f)]('bot')[_0x1c5ef2(0x1b4)](_0x18b5c4)[_0x1c5ef2(0xba)]());}else _0x18b5c4={'botID':_0x51e5b0,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':'Bot\x20'+_0x51e5b0,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x1c5ef2(0x178),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x1c5ef2(0x20a)],'onepagemode':settings[_0x1c5ef2(0xbe)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x1c5ef2(0x1a1),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0x18b5c4;}function emittedConfiguration(){const _0x5e542d=_0x1fb5cb;let _0x25a6d0;if(config[_0x5e542d(0x1da)]=='')_0x25a6d0={...config,'configstate':'initial'};else config[_0x5e542d(0x1da)]==_0x5e542d(0x98)?_0x25a6d0={...config,'configstate':_0x5e542d(0x1d3)}:(_0x25a6d0={...config,'apiKey':_0x5e542d(0x9c),'apiSecret':'************'},config[_0x5e542d(0x1ad)]&&(_0x25a6d0['apiPassword']=_0x5e542d(0x9c)));return _0x25a6d0;}function getSettings(){const _0x1398c1=_0x1fb5cb;return dbSettings[_0x1398c1(0x16f)](_0x1398c1(0x20d))[_0x1398c1(0x207)]();}function getSecure(){const _0x55a6f3=_0x1fb5cb;return dbSecure[_0x55a6f3(0x16f)](_0x55a6f3(0x1de))[_0x55a6f3(0x207)]()||{};}function updateTimeshift(_0x28729){const _0x50237b=_0x1fb5cb;let _0x5c0099=dbConfig[_0x50237b(0x16f)](_0x50237b(0xb8))[_0x50237b(0x1dd)]({'botID':botID})[_0x50237b(0x207)]();_0x5c0099&&dbConfig[_0x50237b(0x16f)](_0x50237b(0xb8))[_0x50237b(0x1dd)]({'botID':botID})[_0x50237b(0xe4)]({'timeshift':_0x28729})[_0x50237b(0xba)](),config['timeshift']=_0x28729,proxyEmit(_0x50237b(0x1f1),emittedConfiguration());}function updateOnepagemode(_0xe9755e){const _0x4a43cc=_0x1fb5cb;let _0x57713e=dbConfig['get'](_0x4a43cc(0xb8))[_0x4a43cc(0x1dd)]({'botID':botID})[_0x4a43cc(0x207)]();_0x57713e&&dbConfig[_0x4a43cc(0x16f)](_0x4a43cc(0xb8))[_0x4a43cc(0x1dd)]({'botID':botID})['assign']({'onepagemode':_0xe9755e})[_0x4a43cc(0xba)](),config[_0x4a43cc(0xbe)]=_0xe9755e,proxyEmit(_0x4a43cc(0x1f1),emittedConfiguration());}async function storeConfiguration(_0x5cbb89){const _0x5e7207=_0x1fb5cb;logger[_0x5e7207(0x1d0)]('Saving\x20configuration');if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger['debug'](_0x5e7207(0x20e));let _0x4b18cb=![],_0x211818=![],_0x2fff55=[];_0x5cbb89[_0x5e7207(0xbf)]['forEach'](_0x22b60a=>{const _0x2bfc6d=_0x5e7207;if(!_0x22b60a[_0x2bfc6d(0x13b)]&&_0x22b60a[_0x2bfc6d(0x119)]!=_0x5cbb89[_0x2bfc6d(0x116)])_0x2fff55[_0x2bfc6d(0x1b4)](_0x22b60a[_0x2bfc6d(0x10d)]);}),_0x2fff55[_0x5e7207(0x1f7)](_0x1bebbc=>{const _0x4838c7=_0x5e7207,_0x160fe2=currentCoins[_0x4838c7(0x1dd)](_0x2fe084=>_0x2fe084['symbol']==_0x1bebbc);!_0x160fe2&&(_0x4b18cb=!![]);}),currentCoins['forEach'](_0x454241=>{const _0x5b67db=_0x5e7207;if(_0x454241[_0x5b67db(0x119)]!=config[_0x5b67db(0x116)]){const _0x112020=_0x2fff55['find'](_0x518530=>_0x518530==_0x454241[_0x5b67db(0x10d)]);!_0x112020&&(_0x4b18cb=!![]);}}),_0x5cbb89[_0x5e7207(0xbf)][_0x5e7207(0x1f7)](_0xa15438=>{const _0x4de34f=_0x5e7207,_0x1b1c5f=config['portfolio']['find'](_0x457dc6=>_0x457dc6[_0x4de34f(0x119)]==_0xa15438[_0x4de34f(0x119)]);if(_0x1b1c5f&&_0xa15438[_0x4de34f(0x1ed)]!=_0x1b1c5f[_0x4de34f(0x1ed)])_0x211818=!![];});let _0x1ebc81=dbConfig[_0x5e7207(0x16f)](_0x5e7207(0xb8))['find']({'botID':botID})['value']();_0x5cbb89={..._0x5cbb89,'apiKey':crypt['decrypt'](secure['privateKey'],_0x5cbb89['apiKey'])[_0x5e7207(0x1d7)],'apiSecret':crypt[_0x5e7207(0x1af)](secure['privateKey'],_0x5cbb89[_0x5e7207(0x15b)])[_0x5e7207(0x1d7)]};_0x5cbb89[_0x5e7207(0x1ad)]&&(_0x5cbb89[_0x5e7207(0x1ad)]=crypt[_0x5e7207(0x1af)](secure[_0x5e7207(0x1b0)],_0x5cbb89[_0x5e7207(0x1ad)])[_0x5e7207(0x1d7)]);let _0x1a33a2=![];if(_0x1ebc81){_0x5cbb89[_0x5e7207(0x1da)]==_0x5e7207(0x9c)?_0x5cbb89[_0x5e7207(0x1da)]=config[_0x5e7207(0x1da)]:_0x1a33a2=!![];_0x5cbb89['apiSecret']==_0x5e7207(0x9c)?_0x5cbb89[_0x5e7207(0x15b)]=config['apiSecret']:_0x1a33a2=!![];if(_0x5cbb89[_0x5e7207(0x1ad)]==_0x5e7207(0x9c))_0x5cbb89[_0x5e7207(0x1ad)]=config['apiPassword'];else{if(_0x5cbb89['apiPassword'])_0x1a33a2=!![];}dbConfig['get'](_0x5e7207(0xb8))[_0x5e7207(0x1dd)]({'botID':botID})[_0x5e7207(0xe4)](_0x5cbb89)[_0x5e7207(0xba)]();}else dbConfig[_0x5e7207(0x16f)](_0x5e7207(0xb8))['push'](_0x5cbb89)[_0x5e7207(0xba)](),_0x1a33a2=!![],process[_0x5e7207(0x9d)]({'status':'enabled','live':'running'},_0x4360a2=>{});process['send']({'botname':_0x5cbb89[_0x5e7207(0xa9)]},_0x37fbf3=>{}),config={..._0x5cbb89},updateBotManager(),proxyEmit(_0x5e7207(0x1e2)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x1a33a2)await reset(!![]);else _0x4b18cb||_0x211818?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x5e7207(0x1d0)](_0x5e7207(0xff));}async function storeHeadless(_0x17a801){const _0x3daa48=_0x1fb5cb,_0x2d321c={...config,'headless':_0x17a801['headless']};let _0x51bfb3=dbConfig[_0x3daa48(0x16f)](_0x3daa48(0xb8))[_0x3daa48(0x1dd)]({'botID':botID})[_0x3daa48(0x207)]();_0x51bfb3&&dbConfig[_0x3daa48(0x16f)](_0x3daa48(0xb8))[_0x3daa48(0x1dd)]({'botID':botID})[_0x3daa48(0xe4)](_0x2d321c)['write'](),config={..._0x2d321c},updateBotManager(),proxyEmit(_0x3daa48(0x1f1),emittedConfiguration());}async function storeFiat(_0x498e6e){const _0x15d45a=_0x1fb5cb,_0x2dccf8={...config,'fiat':_0x498e6e};let _0x17fc38=dbConfig[_0x15d45a(0x16f)](_0x15d45a(0xb8))[_0x15d45a(0x1dd)]({'botID':botID})[_0x15d45a(0x207)]();_0x17fc38&&dbConfig[_0x15d45a(0x16f)](_0x15d45a(0xb8))[_0x15d45a(0x1dd)]({'botID':botID})[_0x15d45a(0xe4)](_0x2dccf8)['write'](),config={..._0x2dccf8},proxyEmit('configuration',emittedConfiguration());}function resetHistory(){const _0x32374d=_0x1fb5cb;logger[_0x32374d(0x96)](_0x32374d(0xb2));try{if(fs[_0x32374d(0xa8)](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+'-events.json')))fs[_0x32374d(0x13a)](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+'-events.json'));if(fs[_0x32374d(0xa8)](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+'-performance.json')))fs[_0x32374d(0x13a)](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+_0x32374d(0x99)));if(fs['existsSync'](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+_0x32374d(0xa3))))fs[_0x32374d(0x13a)](path[_0x32374d(0xf5)](configpath,_0x32374d(0xfb)+botID+'-results.json'));}catch(_0x41da6f){if(_0x41da6f)logger[_0x32374d(0x96)]('Error\x20while\x20deleting\x20files:\x20',_0x41da6f);}const _0x28f868=getDate();let _0x1ebfb5=[];currentCoins[_0x32374d(0x1f7)](_0x3d10f2=>{const _0x2e7aed=_0x32374d;_0x1ebfb5[_0x2e7aed(0x1b4)]({'coin':_0x3d10f2[_0x2e7aed(0x119)],'number':_0x3d10f2['number'],'price':_0x3d10f2[_0x2e7aed(0x103)]});});let _0x13ca1f=dbConfig[_0x32374d(0x16f)]('bot')[_0x32374d(0x1dd)]({'botID':botID})[_0x32374d(0x207)]();_0x13ca1f&&(dbConfig[_0x32374d(0x16f)](_0x32374d(0xb8))[_0x32374d(0x1dd)]({'botID':botID})[_0x32374d(0xe4)]({'liquidity':[{'date':_0x28f868,'changes':_0x1ebfb5}]})[_0x32374d(0xba)](),config[_0x32374d(0x95)]=[]),process[_0x32374d(0x9d)]({'stop':_0x32374d(0x1c6)},_0x66a440=>{});}function noslash(_0x3eb713){const _0xff50de=_0x1fb5cb;return _0x3eb713[_0xff50de(0xeb)]('/','');}function updateHighestFee(_0x2162c4){const _0x2fe3ab=_0x1fb5cb;if(_0x2162c4['reverse']){let _0x114d1c={'filled':_0x2162c4['filled']*_0x2162c4[_0x2fe3ab(0x1bc)],'amount':_0x2162c4['filled']*_0x2162c4[_0x2fe3ab(0x1bc)],'side':_0x2162c4['side']==_0x2fe3ab(0x21c)?_0x2fe3ab(0x1fb):_0x2fe3ab(0x21c),'price':0x1/_0x2162c4[_0x2fe3ab(0x1bc)]};_0x2162c4={..._0x2162c4,..._0x114d1c};}const _0x5a81d0=defaultFee*_0x2162c4[_0x2fe3ab(0x20b)]*_0x2162c4[_0x2fe3ab(0x1bc)];lastFees[_0x2fe3ab(0x18f)]['length']===0x14&&lastFees[_0x2fe3ab(0x18f)][_0x2fe3ab(0xee)](),lastFees[_0x2fe3ab(0x18f)][_0x2fe3ab(0x1b4)](_0x5a81d0),lastFees[_0x2fe3ab(0x8f)]=Math[_0x2fe3ab(0x1d8)](...lastFees[_0x2fe3ab(0x18f)]);}async function updateNumberCoinsCcxt(_0x32fee9){const _0x3bbc18=_0x1fb5cb;logger[_0x3bbc18(0x1d0)](_0x3bbc18(0x18a)+_0x32fee9[_0x3bbc18(0x10d)]+_0x3bbc18(0x146)+_0x32fee9[_0x3bbc18(0xe0)]+_0x3bbc18(0x146)+_0x32fee9[_0x3bbc18(0x20b)]+'\x20/\x20'+_0x32fee9[_0x3bbc18(0x1ce)]+_0x3bbc18(0x146)+_0x32fee9['id']);let _0x48aa83=_0x32fee9[_0x3bbc18(0xe0)],_0x801d42=![];currentCoins[_0x3bbc18(0x1f7)](_0x1c3be3=>{const _0x369c38=_0x3bbc18;_0x1c3be3['symbol']==_0x32fee9[_0x369c38(0x10d)]&&(_0x801d42=!![]);});if(!_0x801d42)return;const _0x200a85=currentCoins[_0x3bbc18(0x1dd)](_0x536fa5=>_0x536fa5['symbol']==_0x32fee9[_0x3bbc18(0x10d)]),_0x333c91=_0x58f769=>{const _0x36c16a=_0x3bbc18;if(_0x200a85)_0x200a85[_0x36c16a(0x1b5)]=_0x58f769;};if(_0x48aa83==_0x3bbc18(0x1c7))_0x333c91(_0x3bbc18(0x1c7));else{if(_0x48aa83=='canceled'){_0x333c91(_0x3bbc18(0x1a9));const _0xf6093d=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0xf6093d,await getOpenOrders(),handleOpenOrders();}else{if(_0x48aa83=='closed'){let _0x33093a=![];if(lastOrders)for(const _0x1bffcf of lastOrders){const _0x19d7fc=0xc8,_0x433ff7=0x1388;let _0x582c77=0x0;while(!_0x1bffcf[_0x3bbc18(0x101)]&&_0x582c77*_0x19d7fc<_0x433ff7){_0x582c77++,await sleep(_0x19d7fc);}if(_0x582c77>0x0)logger['debug'](_0x3bbc18(0xb0)+_0x582c77*_0x19d7fc/0x3e8+'\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed');if(_0x1bffcf[_0x3bbc18(0x101)]==_0x32fee9['id']){logger[_0x3bbc18(0x1d0)](_0x3bbc18(0x195)+_0x32fee9['id']),_0x33093a=!![];if(_0x1bffcf[_0x3bbc18(0x20b)]==0x0){logger['debug'](_0x3bbc18(0x11c)+_0x32fee9['id']);if(_0x32fee9[_0x3bbc18(0xe2)])_0x1bffcf[_0x3bbc18(0x1bc)]=_0x32fee9[_0x3bbc18(0xe2)];else{if(_0x32fee9['price'])_0x1bffcf[_0x3bbc18(0x1bc)]=_0x32fee9['price'];else{}}_0x1bffcf[_0x3bbc18(0x20b)]=_0x32fee9['filled'],updateHighestFee(_0x1bffcf),_0x333c91(_0x3bbc18(0x20b)),await validateOrders();if(lockOrders==ORDERS[_0x3bbc18(0x1e9)]){const _0x1e0c62=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1e0c62;}_0x1bffcf[_0x3bbc18(0x16e)]={'currency':_0x32fee9[_0x3bbc18(0x16e)]?_0x32fee9[_0x3bbc18(0x16e)][_0x3bbc18(0x1b1)]:null,'cost':_0x32fee9[_0x3bbc18(0x16e)]?_0x32fee9[_0x3bbc18(0x16e)]['cost']:0x0},await updateCoinResults(_0x1bffcf);}}}if(!_0x33093a){logger[_0x3bbc18(0x1d0)](_0x3bbc18(0x1fe)+_0x32fee9['id']),_0x333c91(_0x3bbc18(0x20b));const _0x176067=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x176067,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x152651=JSON['parse'](lastBalances['portfolio']);const _0x14bab0=_0x152651[_0x3bbc18(0x1dd)](_0xb30dba=>_0xb30dba['symbol']==_0x32fee9[_0x3bbc18(0x10d)]);if(_0x14bab0){if(_0x48aa83==_0x3bbc18(0x1c7))_0x14bab0[_0x3bbc18(0x1b5)]=_0x14bab0['orderstatus']==_0x3bbc18(0x20b)?_0x3bbc18(0x20b):_0x3bbc18(0x1c7);else{if(_0x48aa83==_0x3bbc18(0x1a9))_0x14bab0[_0x3bbc18(0x1b5)]=_0x14bab0[_0x3bbc18(0x1b5)]==_0x3bbc18(0x20b)?_0x3bbc18(0x20b):'canceled';else _0x48aa83==_0x3bbc18(0x1f9)&&(_0x14bab0[_0x3bbc18(0x1b5)]=_0x3bbc18(0x20b));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3bbc18(0x105)](_0x152651)},proxyEmit(_0x3bbc18(0xc8),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){await getOpenOrders();let _0x167d05=![];currentCoins['forEach'](_0x5c3bca=>{const _0x2a543a=_0x2506;_0x167d05=allOpenOrders['find'](_0xcb9721=>_0xcb9721['symbol']==_0x5c3bca[_0x2a543a(0x10d)]),_0x5c3bca[_0x2a543a(0x1b5)]=_0x167d05?_0x2a543a(0x1c7):'none';});}async function getCoins(_0x41d11c=0x0,_0x4adcfa=!![],_0x5d507a=config['basecoin']){const _0x1e7f45=_0x1fb5cb;let _0x1cf411,_0x32817d=[],_0x58c5f0=[],_0x59bdda=[];if(_0x41d11c)await sleep(_0x41d11c);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x1cf411=await exchange[_0x1e7f45(0x201)](),mybalances=_0x1cf411[_0x1e7f45(0x122)];for(const [_0x3788c9,_0x2ef14d]of Object['entries'](mybalances)){_0x59bdda[_0x1e7f45(0x1b4)](_0x3788c9);}config[_0x1e7f45(0xbf)][_0x1e7f45(0x1f7)](_0x25c0c2=>{const _0x5754b3=_0x1e7f45;!_0x59bdda[_0x5754b3(0x21b)](_0x25c0c2[_0x5754b3(0x119)])&&(mybalances[_0x25c0c2[_0x5754b3(0x119)]]=0x0);});if(_0x5d507a=='')for(const [_0x2e87ab,_0x56dead]of Object[_0x1e7f45(0x1c5)](mybalances)){_0x56dead!=0x0&&_0x32817d[_0x1e7f45(0x1b4)]({'coin':_0x2e87ab});}else{let _0x519ee1=![];for(const [_0x5abd9b,_0x20163d]of Object[_0x1e7f45(0x1c5)](mybalances)){const _0x4e76cc=config['portfolio'][_0x1e7f45(0x1dd)](_0x445794=>_0x445794['coin']==_0x5abd9b),_0x3ce0ec=_0x5abd9b+'/'+_0x5d507a,_0x1ff811=_0x5d507a+'/'+_0x5abd9b,_0x5373cd=currentCoins['find'](_0xcf47a0=>_0xcf47a0[_0x1e7f45(0x119)]==_0x5abd9b);_0x519ee1=![];if((_0x20163d!=0x0||_0x4e76cc)&&(allSymbols['includes'](_0x3ce0ec)||_0x5abd9b==_0x5d507a))_0x32817d[_0x1e7f45(0x1b4)]({'coin':_0x5abd9b,'symbol':_0x3ce0ec,'reverse':![],'number':Math[_0x1e7f45(0x1d8)](_0x20163d+(_0x4e76cc&&_0x4e76cc['offset']||0x0),0x0),'orderstatus':_0x5373cd?_0x5373cd[_0x1e7f45(0x1b5)]:_0x1e7f45(0x9a)});else{if((_0x20163d!=0x0||_0x4e76cc)&&allSymbols[_0x1e7f45(0x21b)](_0x1ff811))_0x32817d[_0x1e7f45(0x1b4)]({'coin':_0x5abd9b,'symbol':_0x1ff811,'reverse':!![],'number':Math[_0x1e7f45(0x1d8)](_0x20163d+(_0x4e76cc&&_0x4e76cc[_0x1e7f45(0x1ed)]||0x0),0x0),'orderstatus':_0x5373cd?_0x5373cd[_0x1e7f45(0x1b5)]:_0x1e7f45(0x9a)});else _0x4e76cc&&_0x32817d[_0x1e7f45(0x1b4)]({'coin':_0x4e76cc['coin'],'symbol':_0x4e76cc[_0x1e7f45(0x10d)],'reverse':_0x4e76cc[_0x1e7f45(0xd9)],'number':0x0,'orderstatus':'none'});}}}}catch(_0x2b9596){if(!_0x4adcfa)handleErrorNoStop(_0x2b9596,'getCoins()');else await handleError(_0x2b9596,_0x1e7f45(0x134));}return _0x58c5f0=cloneDeep(_0x32817d),_0x32817d=_0x32817d[_0x1e7f45(0x154)](_0xe8cf00=>{const _0x4be112=_0x1e7f45,_0x344e52=config['portfolio'][_0x4be112(0x1dd)](_0x949dc5=>_0x949dc5[_0x4be112(0x119)]==_0xe8cf00[_0x4be112(0x119)]);return _0x344e52&&!_0x344e52['excluded'];}),[_0x32817d,_0x58c5f0];}function _0x2506(_0x46d8f1,_0x13b174){const _0x16d97a=_0xc27d();return _0x2506=function(_0x2e0f08,_0xc6bccd){_0x2e0f08=_0x2e0f08-0x8a;let _0xc27da5=_0x16d97a[_0x2e0f08];return _0xc27da5;},_0x2506(_0x46d8f1,_0x13b174);}async function getCoinNumber(_0x1117ee){const _0x4411ff=_0x1fb5cb;let _0x28fd02;try{const _0x5208ae=await exchange[_0x4411ff(0x201)]();_0x28fd02=_0x5208ae[_0x4411ff(0x122)][_0x1117ee];}catch(_0x143462){await handleError(_0x143462,_0x4411ff(0x1d4));}return _0x28fd02;}async function getOpenOrders(){const _0x284376=_0x1fb5cb;let _0x4dd456;allOpenOrders=[];try{for(const _0x534117 of config[_0x284376(0xbf)]){!_0x534117[_0x284376(0x13b)]&&_0x534117[_0x284376(0x119)]!=config[_0x284376(0x116)]&&(_0x4dd456=await exchange[_0x284376(0x183)](_0x534117[_0x284376(0x10d)]),_0x4dd456[_0x284376(0x218)]>0x0&&allOpenOrders[_0x284376(0x1b4)](_0x4dd456[0x0]));}}catch(_0x2fdbb7){await handleError(_0x2fdbb7,_0x284376(0x16b));}}async function handleOpenOrders(_0x2ac890=0x0){const _0x4ec2c6=_0x1fb5cb;allOpenOrders[_0x4ec2c6(0x218)]==0x0&&lockOrders==ORDERS[_0x4ec2c6(0x1e9)]&&allOrdersPlaced&&(_0x2ac890==0x0?(logger[_0x4ec2c6(0x1d0)](_0x4ec2c6(0x15c)),_0x2ac890++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x4ec2c6(0x1d0)](_0x4ec2c6(0x143)),validateOrders('no\x20open\x20orders')));}async function testAPI(_0x5cd03a){const _0x853c03=_0x1fb5cb,_0x28e4ee=ccxt['pro'][_0x5cd03a[_0x853c03(0x165)][_0x853c03(0x16a)]()],_0x197cdf=new _0x28e4ee({'apiKey':_0x5cd03a['apiKey'],'secret':_0x5cd03a[_0x853c03(0x15b)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x853c03(0xf0)}});if(_0x5cd03a[_0x853c03(0x1ad)])_0x197cdf[_0x853c03(0x200)]=_0x5cd03a['apiPassword'];try{await _0x197cdf[_0x853c03(0x1e6)]();}catch(_0x205d96){throw _0x205d96;}}function cloneDeep(_0x145988){const _0x304ebf=_0x1fb5cb;return JSON[_0x304ebf(0xaf)](JSON[_0x304ebf(0x105)](_0x145988));}async function getPortfolio(_0x339d90){const _0x490e8b=_0x1fb5cb;let _0x2c09b6=[],_0x2f9b3b=[],_0x513649=[],_0x2766d9;if(_0x339d90[_0x490e8b(0x1da)]!=='************'||_0x339d90[_0x490e8b(0x15b)]!==_0x490e8b(0x9c)||_0x339d90['apiPassword']&&_0x339d90[_0x490e8b(0x1ad)]!=='************'){if(config[_0x490e8b(0x165)]){if(_0x339d90['apiKey']=='************')_0x339d90['apiKey']=config['apiKey'];if(_0x339d90[_0x490e8b(0x15b)]=='************')_0x339d90[_0x490e8b(0x15b)]=config[_0x490e8b(0x15b)];if(_0x339d90[_0x490e8b(0x1ad)]=='************')_0x339d90[_0x490e8b(0x1ad)]=config[_0x490e8b(0x1ad)];try{await testAPI(_0x339d90);}catch(_0x4d614d){if(_0x4d614d[_0x490e8b(0x90)]()['includes'](_0x490e8b(0x1b2))){logger['debug'](_0x490e8b(0xb7)),proxyEmit('portfolio',![]);return;}else{handleError(_0x4d614d,_0x490e8b(0x145));return;}}}await initExchange(_0x339d90['exchange'],_0x339d90[_0x490e8b(0x1da)],_0x339d90['apiSecret'],_0x339d90[_0x490e8b(0x1ad)]);try{await loadSymbols();}catch(_0x1a1cac){if(_0x1a1cac[_0x490e8b(0x90)]()[_0x490e8b(0x21b)](_0x490e8b(0x1b2))){proxyEmit(_0x490e8b(0xbf),![]);return;}else{handleError(_0x1a1cac,'getPortfolio(1)');return;}}const _0x434c78=await getCoins(0x0,![],_0x339d90[_0x490e8b(0x116)]);_0x513649=cloneDeep(_0x434c78[0x1]);}else{const _0x2369b4=await getCoins();_0x513649=cloneDeep(_0x2369b4[0x1]);}if(_0x339d90[_0x490e8b(0x116)]=='')proxyEmit(_0x490e8b(0xbf),_0x513649);else{_0x513649[_0x490e8b(0x1f7)](_0x130c30=>{const _0x3bf28d=_0x490e8b;if(_0x130c30[_0x3bf28d(0x119)]!=_0x339d90[_0x3bf28d(0x116)]&&allSymbols[_0x3bf28d(0x21b)](_0x130c30[_0x3bf28d(0x10d)]))_0x2c09b6[_0x3bf28d(0x1b4)](_0x130c30[_0x3bf28d(0x10d)]);});if(_0x2c09b6[_0x490e8b(0x218)]==0x0)logHistory('error',_0x490e8b(0x1a4));else{try{_0x2f9b3b=await getTickers(_0x2c09b6);}catch(_0x1cdfff){if(_0x1cdfff[_0x490e8b(0x90)]()[_0x490e8b(0x21b)]('AuthenticationError')){proxyEmit(_0x490e8b(0xbf),![]);return;}else handleError(_0x1cdfff,_0x490e8b(0x18d));}_0x513649[_0x490e8b(0x1f7)](_0x1a3a6e=>{const _0x4b747d=_0x490e8b;_0x1a3a6e[_0x4b747d(0x119)]!=_0x339d90[_0x4b747d(0x116)]?_0x2f9b3b[_0x1a3a6e[_0x4b747d(0x10d)]]?_0x2766d9=_0x1a3a6e['reverse']?0x1/_0x2f9b3b[_0x1a3a6e[_0x4b747d(0x10d)]][_0x4b747d(0x103)]:_0x2f9b3b[_0x1a3a6e[_0x4b747d(0x10d)]]['last']:_0x2766d9=0x0:_0x2766d9=0x1,_0x1a3a6e[_0x4b747d(0x1bc)]=formatResult(_0x2766d9,0x8);}),proxyEmit('portfolio',_0x513649);}}}function truncateTradeAmount(_0x369191,_0x5c248e){const _0x31007b=_0x1fb5cb;let _0x384f2a=0x0;try{_0x384f2a=exchange[_0x31007b(0x150)](_0x369191,_0x5c248e);}catch(_0x31d6d3){}return _0x384f2a;}function checkMinimums(_0x27533f){const _0x5c398f=_0x1fb5cb;let _0x443b3e=!![];const _0x14edfd=!_0x27533f['reverse']?markets[_0x27533f['symbol']][_0x5c398f(0x1bd)][_0x5c398f(0x1ce)][_0x5c398f(0xc1)]:markets[_0x27533f[_0x5c398f(0x10d)]][_0x5c398f(0x1bd)]['cost'][_0x5c398f(0xc1)],_0x1125ea=!_0x27533f[_0x5c398f(0xd9)]?markets[_0x27533f['symbol']][_0x5c398f(0x1bd)]['cost']['min']:markets[_0x27533f[_0x5c398f(0x10d)]]['limits']['amount'][_0x5c398f(0xc1)],_0x451687=truncateTradeAmount(_0x27533f[_0x5c398f(0x10d)],_0x27533f['trade']);_0x27533f['trade']=_0x451687;if(Math[_0x5c398f(0x9f)](_0x451687)<_0x14edfd)_0x443b3e=![];if(Math[_0x5c398f(0x9f)](_0x451687)*_0x27533f[_0x5c398f(0x103)]<_0x1125ea)_0x443b3e=![];if(_0x27533f[_0x5c398f(0x115)]=='sell'){let _0x4c6e1a=config[_0x5c398f(0xbf)]['find'](_0x5f1896=>_0x5f1896[_0x5c398f(0x119)]==_0x27533f[_0x5c398f(0x119)]);if(_0x4c6e1a[_0x5c398f(0x1ed)]>0x0){if(Math[_0x5c398f(0x9f)](_0x451687)>_0x27533f[_0x5c398f(0xca)]-_0x4c6e1a[_0x5c398f(0x1ed)])_0x443b3e=![];}else{if(Math[_0x5c398f(0x9f)](_0x451687)>_0x27533f['number'])_0x443b3e=![];}}if(_0x27533f[_0x5c398f(0x115)]==_0x5c398f(0x1fb)){let _0x19984b=config[_0x5c398f(0xbf)][_0x5c398f(0x1dd)](_0x1ea94d=>_0x1ea94d['coin']==config[_0x5c398f(0x116)]),_0x1519be=currentCoins[_0x5c398f(0x1dd)](_0x3e81c2=>_0x3e81c2[_0x5c398f(0x119)]==config[_0x5c398f(0x116)]);if(_0x19984b['offset']>0x0){if(Math[_0x5c398f(0x9f)](_0x451687)*_0x27533f[_0x5c398f(0x103)]>_0x1519be[_0x5c398f(0xca)]-_0x19984b['offset'])_0x443b3e=![];}else{if(Math[_0x5c398f(0x9f)](_0x451687)*_0x27533f['last']>_0x1519be['number'])_0x443b3e=![];}}return _0x443b3e;}async function getBalances(_0x126753=!![]){const _0x3bee98=_0x1fb5cb;let _0x3a949a=0x0,_0x49b0e1;const _0x1efd3b=config[_0x3bee98(0x209)];if(config[_0x3bee98(0x1f5)]&&config['change24h']<0x0)await validate24hChanges();currentCoins['forEach'](_0x539032=>{const _0x38615a=_0x3bee98;if(_0x539032[_0x38615a(0x119)]!=config[_0x38615a(0x116)]){let _0x12a359=global[_0x38615a(0x10b)][noslash(_0x539032['symbol'])];_0x49b0e1=_0x539032[_0x38615a(0xd9)]?0x1/_0x12a359:_0x12a359;}else _0x49b0e1=0x1;let _0x2b8012=_0x539032[_0x38615a(0xca)]*_0x49b0e1;_0x3a949a+=_0x2b8012,_0x539032['last']=formatResult(Number(_0x49b0e1),0x8),_0x539032[_0x38615a(0x207)]=_0x2b8012;}),currentCoins[_0x3bee98(0x1f7)](_0x30ad57=>{const _0x19a143=_0x3bee98;let _0x2de88d=config['portfolio'][_0x19a143(0x1dd)](_0x1ed3c1=>_0x1ed3c1[_0x19a143(0x119)]==_0x30ad57[_0x19a143(0x119)]),_0x2b4b87=Number(_0x2de88d[_0x19a143(0x215)]),_0x5687b2=_0x30ad57[_0x19a143(0x207)]/_0x3a949a*0x64,_0x324ea8=_0x2b4b87*_0x3a949a/0x64/_0x30ad57[_0x19a143(0x103)]-_0x30ad57['number'];_0x30ad57[_0x19a143(0x215)]=formatResult(_0x5687b2,0x3),_0x30ad57['target']=formatResult(_0x2b4b87,0x3),_0x30ad57[_0x19a143(0xa7)]=formatResult(_0x324ea8,0x8),_0x30ad57[_0x19a143(0x115)]='',_0x30ad57[_0x19a143(0xc5)]=![];if(_0x30ad57[_0x19a143(0x119)]!=config[_0x19a143(0x116)]){if(_0x30ad57[_0x19a143(0x215)]>_0x2b4b87)_0x30ad57[_0x19a143(0x115)]=_0x19a143(0x21c),_0x30ad57[_0x19a143(0xc5)]=checkMinimums(_0x30ad57);else _0x30ad57[_0x19a143(0x215)]<_0x2b4b87&&(_0x30ad57[_0x19a143(0x115)]='buy',_0x30ad57[_0x19a143(0xc5)]=checkMinimums(_0x30ad57));}_0x30ad57['delta']=_0x30ad57[_0x19a143(0x215)]/_0x30ad57[_0x19a143(0x171)]-0x1;if(_0x30ad57[_0x19a143(0x1b5)]==_0x19a143(0x20b)||_0x30ad57[_0x19a143(0x1b5)]=='canceled')_0x30ad57['orderstatus']=_0x19a143(0x9a);}),currentCoins[_0x3bee98(0x12f)]((_0x31bd0f,_0x21a63d)=>_0x31bd0f[_0x3bee98(0x120)]<_0x21a63d[_0x3bee98(0x120)]?0x1:_0x21a63d[_0x3bee98(0x120)]<_0x31bd0f[_0x3bee98(0x120)]?-0x1:0x0);const _0x284804=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x284804[_0x3bee98(0x208)],'usd':_0x284804[_0x3bee98(0x175)],'portfolio':JSON['stringify'](currentCoins),'threshold':_0x1efd3b},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x126753){if(config[_0x3bee98(0x1f5)])headlessMode({'portfolio':currentCoins,'threshold':_0x1efd3b});else{if(lockOrders==ORDERS[_0x3bee98(0x1e5)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x1efd3b});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x4bd3c4=getNormalizedPerformance();getStartingBalances(_0x4bd3c4),emitPerformance(_0x4bd3c4);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x29726f=getNormalizedPerformance();emitPerformance(_0x29726f),getStartingBalances(_0x29726f),logger[_0x3bee98(0x1d0)](_0x3bee98(0x1ac));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x1aa3ce=_0x1fb5cb;if(!lastBalances)return;let _0x2e2fd9=[],_0x3b16b7,_0x1d2c77=JSON[_0x1aa3ce(0xaf)](lastBalances[_0x1aa3ce(0xbf)]);_0x1d2c77[_0x1aa3ce(0x12f)]((_0x14e85a,_0x5b47e5)=>_0x14e85a[_0x1aa3ce(0x119)]>_0x5b47e5[_0x1aa3ce(0x119)]?0x1:_0x5b47e5['coin']>_0x14e85a[_0x1aa3ce(0x119)]?-0x1:0x0),_0x1d2c77[_0x1aa3ce(0x1f7)](_0x2acf63=>{const _0x3b7a9d=_0x1aa3ce;let _0x4827f5={'coin':_0x2acf63[_0x3b7a9d(0x119)],'number':_0x2acf63[_0x3b7a9d(0xca)],'price':_0x2acf63['last']};_0x2e2fd9[_0x3b7a9d(0x1b4)](_0x4827f5);});const _0x1856a9=await getFiat();_0x3b16b7={'date':lastBalances['time'][_0x1aa3ce(0x166)]('\x20')[0x0],'eur':_0x1856a9[_0x1aa3ce(0x208)],'usd':_0x1856a9[_0x1aa3ce(0x175)],'coins':_0x2e2fd9};let _0x3310e5=dbPerformance[_0x1aa3ce(0x16f)](_0x1aa3ce(0x126))[_0x1aa3ce(0x1dd)]({'date':_0x3b16b7[_0x1aa3ce(0x15a)]})['value']();_0x3310e5?_0x3b16b7[_0x1aa3ce(0x15a)]!=config['startdate']&&dbPerformance[_0x1aa3ce(0x16f)](_0x1aa3ce(0x126))[_0x1aa3ce(0x1dd)]({'date':_0x3b16b7['date']})[_0x1aa3ce(0xe4)](_0x3b16b7)[_0x1aa3ce(0xba)]():dbPerformance[_0x1aa3ce(0x16f)](_0x1aa3ce(0x126))[_0x1aa3ce(0x1b4)](_0x3b16b7)['write'](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x47adc4=_0x1fb5cb;let _0x18e1ec=[];if(dbPerformance[_0x47adc4(0x1d5)](_0x47adc4(0x126))['value']()){let _0x4b1745=dbPerformance[_0x47adc4(0x16f)](_0x47adc4(0x126))[_0x47adc4(0x181)]()[_0x47adc4(0x154)](_0x215f3b=>{const _0xa0259b=_0x47adc4;if(_0x215f3b[_0xa0259b(0x17a)][_0xa0259b(0x218)]==0x0)return![];else return!![];})[_0x47adc4(0x142)](_0x47adc4(0x15a))['value'](),_0x4b69f2=[...config['liquidity']];_0x4b69f2[_0x47adc4(0x12f)]((_0x6650be,_0x3c25a8)=>_0x6650be[_0x47adc4(0x15a)]>_0x3c25a8['date']?-0x1:_0x3c25a8[_0x47adc4(0x15a)]>_0x6650be[_0x47adc4(0x15a)]?0x1:0x0);let _0x118621=0x1,_0x52cb2f=[],_0x34a29c=0x0;_0x4b1745['slice']()[_0x47adc4(0xd9)]()[_0x47adc4(0x1f7)]((_0xf27e2d,_0x203948)=>{const _0xc0b419=_0x47adc4;if(_0x4b69f2[_0x34a29c]){if(_0x4b1745[_0x4b1745[_0xc0b419(0x218)]-_0x203948]&&_0x4b69f2[_0x34a29c][_0xc0b419(0x15a)]==_0x4b1745[_0x4b1745[_0xc0b419(0x218)]-_0x203948][_0xc0b419(0x15a)]){if(_0x203948<_0x4b1745[_0xc0b419(0x218)]){let _0x1f043a=0x0,_0x3bb09f=0x0;_0x4b1745[_0x4b1745[_0xc0b419(0x218)]-_0x203948][_0xc0b419(0x17a)][_0xc0b419(0x1f7)](_0x41e6e2=>{const _0x3a90ae=_0xc0b419;_0x3bb09f+=_0x41e6e2['number']*_0x41e6e2[_0x3a90ae(0x1bc)];}),_0x4b69f2[_0x34a29c]['changes'][_0xc0b419(0x1f7)](_0x11c997=>{const _0x4fad03=_0xc0b419;_0x1f043a+=_0x11c997['number']*_0x11c997[_0x4fad03(0x1bc)];}),_0x118621*=_0x1f043a/(_0x3bb09f-_0x1f043a)+0x1;}_0x34a29c++;}}let _0x26cd48=0x0;_0xf27e2d[_0xc0b419(0x17a)][_0xc0b419(0x1f7)](_0x226494=>{const _0x19a671=_0xc0b419;_0x26cd48+=_0x226494[_0x19a671(0xca)]*_0x226494[_0x19a671(0x1bc)];}),_0x52cb2f[_0x4b1745[_0xc0b419(0x218)]-_0x203948-0x1]=_0x26cd48*(_0x118621-0x1);});let _0x2d957d=[];_0x4b69f2=[...config['liquidity']]||[];let _0x12e91c=0x0;_0x34a29c=0x0,_0x4b1745[_0x47adc4(0x1f7)]((_0x31a4dd,_0x57737e)=>{const _0x5553c3=_0x47adc4;if(_0x4b69f2[_0x34a29c]){const _0x1c1088=fns[_0x5553c3(0xaf)](_0x4b69f2[_0x34a29c]['date'],'yyyy/MM/dd',new Date()),_0x3a234b=fns[_0x5553c3(0xaf)](_0x31a4dd[_0x5553c3(0x15a)],'yyyy/MM/dd',new Date());if(fns[_0x5553c3(0x1fc)](_0x1c1088,_0x3a234b)){let _0x41e95b=0x0;_0x4b69f2[_0x34a29c][_0x5553c3(0x212)][_0x5553c3(0x1f7)](_0x1e7a00=>{const _0x5e2510=_0x5553c3;!_0x2d957d[_0x1e7a00[_0x5e2510(0x119)]]?_0x2d957d[_0x1e7a00[_0x5e2510(0x119)]]=_0x1e7a00[_0x5e2510(0xca)]:(_0x41e95b=_0x2d957d[_0x1e7a00[_0x5e2510(0x119)]],_0x2d957d[_0x1e7a00[_0x5e2510(0x119)]]+=_0x1e7a00['number']);const _0x4c6fa1=_0x31a4dd[_0x5e2510(0x17a)][_0x5e2510(0x1dd)](_0x16f9c3=>_0x16f9c3[_0x5e2510(0x119)]==_0x1e7a00[_0x5e2510(0x119)]);(!_0x4c6fa1||_0x4c6fa1[_0x5e2510(0xca)]==0x0)&&(_0x12e91c+=(-_0x1e7a00[_0x5e2510(0xca)]-_0x41e95b)*_0x1e7a00['price']);}),_0x34a29c++;}}_0x31a4dd[_0x5553c3(0x17a)][_0x5553c3(0x1f7)]((_0x26b3cc,_0x2fa2a4)=>{const _0x29ee32=_0x5553c3;_0x2d957d[_0x26b3cc['coin']]&&(_0x26b3cc[_0x29ee32(0x140)]=_0x2d957d[_0x26b3cc[_0x29ee32(0x119)]]);}),_0x18e1ec[_0x5553c3(0x1b4)]({'date':_0x31a4dd[_0x5553c3(0x15a)],'eur':_0x31a4dd[_0x5553c3(0x208)],'usd':_0x31a4dd['usd'],'offset':_0x52cb2f[_0x57737e],'netoffset':_0x12e91c,'coins':_0x31a4dd['coins']});});}return _0x18e1ec;}function emitPerformance(_0x3e2945){const _0x49d21e=_0x1fb5cb;_0x3e2945[_0x49d21e(0x218)]!==0x0?(proxyEmit(_0x49d21e(0x11b),_0x3e2945),lastPerformanceEmitted=getDate()):proxyEmit(_0x49d21e(0x11b),[]);}function getPerf(_0x59f97b,_0x2cd41c){const _0x4e4768=_0x1fb5cb;let _0x307f7b=0x0,_0x3271f5=0x0,_0x1694b7=0x0;_0x59f97b['coins'][_0x4e4768(0x1f7)](_0x13a267=>{const _0x361c4d=_0x4e4768;_0x307f7b+=_0x13a267[_0x361c4d(0xca)]*_0x13a267[_0x361c4d(0x1bc)];});_0x2cd41c&&(_0x307f7b+=_0x59f97b[_0x4e4768(0x1ed)]);if(config[_0x4e4768(0x116)]==='BTC'||config['basecoin']==='ETH'||config[_0x4e4768(0x116)]==='PAXG')_0x3271f5=_0x307f7b*_0x59f97b[_0x4e4768(0x208)],_0x1694b7=_0x307f7b*_0x59f97b['usd'];else{if(usdBasecoins['includes'](config['basecoin']))_0x3271f5=_0x307f7b*_0x59f97b[_0x4e4768(0x208)]/_0x59f97b[_0x4e4768(0x175)],_0x1694b7=_0x307f7b;else config['basecoin']===_0x4e4768(0x12b)&&(_0x3271f5=_0x307f7b,_0x1694b7=_0x307f7b*_0x59f97b[_0x4e4768(0x175)]/_0x59f97b[_0x4e4768(0x208)]);}return[_0x307f7b,_0x3271f5,_0x1694b7];}function getKPIs(_0x3e072b,_0x2ce9d5=_0x1fb5cb(0x12b)){const _0x3df256=_0x1fb5cb,_0x5efa02=config[_0x3df256(0x116)],_0xcc69d9=lastBalances,_0x329a3b=currentCoins,_0x373cab=getNormalizedPerformance(),_0x31d0d8=_0x3e072b===_0x3df256(0x116)?_0x5efa02:_0x3e072b==='fiat'||_0x3e072b===_0x3df256(0xe9)?_0x2ce9d5:'Net\x20'+_0x5efa02,_0xcc838e=_0x3e072b===_0x3df256(0x205)?_0x3df256(0x1e1):_0x3e072b==='net-fiat'?_0x3df256(0x1e1):_0x31d0d8+_0x3df256(0x1c2),_0x119d2b=_0x3e072b==='net-basecoin'||_0x3e072b===_0x3df256(0xe9)?'Net\x20effect':_0x31d0d8+_0x3df256(0x1a6);let _0x3b561d=0x0;_0x329a3b[_0x3df256(0x1f7)](_0x496f76=>{const _0x4028a4=_0x3df256;_0x3b561d+=_0x496f76['number']*_0x496f76[_0x4028a4(0x103)];});if(_0x3e072b===_0x3df256(0x17e)||_0x3e072b===_0x3df256(0xe9)){if(_0x5efa02==='BTC'||_0x5efa02==='ETH'||_0x5efa02===_0x3df256(0x20c))_0x3b561d=_0x3b561d*(_0x2ce9d5===_0x3df256(0x12b)?_0xcc69d9['eur']:_0xcc69d9[_0x3df256(0x175)]);else{if(usdBasecoins[_0x3df256(0x21b)](_0x5efa02))_0x3b561d=_0x3b561d*(_0x2ce9d5===_0x3df256(0x12b)?_0xcc69d9['eur']/_0xcc69d9[_0x3df256(0x175)]:0x1);else _0x5efa02==='EUR'&&(_0x3b561d=_0x3b561d*(_0x2ce9d5===_0x3df256(0x12b)?0x1:_0xcc69d9[_0x3df256(0x175)]/_0xcc69d9[_0x3df256(0x208)]));}}let _0x3863e8;if(_0x3b561d!==0x0){if(_0x3e072b==='basecoin')_0x3863e8=(_0x3b561d/startingBalances[_0x3df256(0x116)]-0x1)*0x64;else{if(_0x2ce9d5===_0x3df256(0x12b))_0x3863e8=(_0x3b561d/startingBalances[_0x3df256(0x208)]-0x1)*0x64;else _0x3863e8=(_0x3b561d/startingBalances['usd']-0x1)*0x64;}let _0x5b149e=0x0;if(startingBalances[_0x3df256(0x17a)])_0x329a3b[_0x3df256(0x1f7)](_0x2a9830=>{const _0x4695b8=_0x3df256;let _0x4a5b59=startingBalances[_0x4695b8(0x17a)][_0x4695b8(0x1dd)](_0x63be5c=>_0x63be5c[_0x4695b8(0x119)]===_0x2a9830['coin']);if(_0x4a5b59&&_0x4a5b59[_0x4695b8(0x119)]&&_0x2a9830['number']!==0x0)_0x5b149e+=_0x4a5b59['number']*_0x2a9830[_0x4695b8(0x103)];});let _0x471df7=0x0;if(_0x373cab[_0x3df256(0x218)]!==0x0){let _0x13f4d1=_0x373cab[_0x373cab[_0x3df256(0x218)]-0x1];_0x471df7=_0x13f4d1[_0x3df256(0xbb)];}_0x5b149e-=_0x471df7;_0x3e072b===_0x3df256(0x205)&&(_0x3863e8=(_0x3b561d-_0x5b149e)/startingBalances['basecoin']*0x64,_0x3b561d=_0x3b561d-_0x5b149e);if(_0x3e072b===_0x3df256(0xe9)){let _0x2bb8f4=_0x2ce9d5===_0x3df256(0x12b)?startingBalances['eur']:startingBalances[_0x3df256(0x175)];if(_0x5efa02===_0x3df256(0x204)||_0x5efa02===_0x3df256(0xf9)||_0x5efa02===_0x3df256(0x20c))_0x5b149e=_0x2ce9d5===_0x3df256(0x12b)?_0x5b149e*_0xcc69d9[_0x3df256(0x208)]:_0x5b149e*_0xcc69d9[_0x3df256(0x175)];else{if(usdBasecoins['includes'](_0x5efa02))_0x5b149e=_0x2ce9d5===_0x3df256(0x12b)?_0x5b149e*_0xcc69d9['eur']/_0xcc69d9[_0x3df256(0x175)]:_0x5b149e;else _0x5efa02===_0x3df256(0x12b)&&(_0x5b149e=_0x2ce9d5===_0x3df256(0x12b)?_0x5b149e:_0x5b149e*_0xcc69d9[_0x3df256(0x175)]/_0xcc69d9[_0x3df256(0x208)]);}_0x3863e8=(_0x3b561d-_0x5b149e)/_0x2bb8f4*0x64,_0x3b561d=_0x3b561d-_0x5b149e;}if(_0x3863e8){if(_0x3863e8<0x64)_0x3863e8=_0x3863e8[_0x3df256(0x196)](0x2);else{if(_0x3863e8<0x3e8)_0x3863e8=_0x3863e8[_0x3df256(0x196)](0x1);else _0x3863e8=_0x3863e8[_0x3df256(0x196)](0x0);}}else _0x3863e8=Number('0')[_0x3df256(0x196)](0x2);if(_0x3b561d){if(Math[_0x3df256(0x9f)](_0x3b561d)<0.000001)_0x3b561d=_0x3b561d[_0x3df256(0x196)](0x2);else{if(Math[_0x3df256(0x9f)](_0x3b561d)<0.1)_0x3b561d=_0x3b561d[_0x3df256(0x196)](0x6);else{if(Math['abs'](_0x3b561d)<0x1)_0x3b561d=_0x3b561d[_0x3df256(0x196)](0x5);else{if(Math[_0x3df256(0x9f)](_0x3b561d)<0xa)_0x3b561d=_0x3b561d[_0x3df256(0x196)](0x4);else{if(Math['abs'](_0x3b561d)<0x64)_0x3b561d=_0x3b561d['toFixed'](0x3);else{if(Math[_0x3df256(0x9f)](_0x3b561d)<0x3e8)_0x3b561d=_0x3b561d[_0x3df256(0x196)](0x2);else _0x3b561d=_0x3b561d[_0x3df256(0x196)](0x2);}}}}}}else _0x3b561d=Number('0')[_0x3df256(0x196)](0x2);}else _0x3863e8=Number('0')[_0x3df256(0x196)](0x2);return{'value':_0x3b561d,'change':_0x3863e8,'leftTxt':_0xcc838e,'rightTxt':_0x119d2b};}async function getStartingBalances(_0x7a665b,_0x2e965a=!![]){const _0x16e5bd=_0x1fb5cb;if(_0x7a665b[_0x16e5bd(0x218)]!==0x0){const [_0x2e7a74,_0x2bd592,_0x55967b]=getPerf(_0x7a665b[0x0],!![]);let _0x327dcb=[];config[_0x16e5bd(0xbf)][_0x16e5bd(0x1f7)](_0x500a85=>{const _0x3056f0=_0x16e5bd;let _0xe9758=0x0,_0x2e6a79;config[_0x3056f0(0x95)][_0x3056f0(0x1f7)](_0x2d1fd5=>{const _0x41b827=_0x3056f0;let _0x3486c3=_0x2d1fd5[_0x41b827(0x212)][_0x41b827(0x1dd)](_0x356b72=>_0x356b72[_0x41b827(0x119)]==_0x500a85[_0x41b827(0x119)]);if(_0x3486c3){_0xe9758+=_0x3486c3['number'];if(!_0x2e6a79)_0x2e6a79=_0x3486c3[_0x41b827(0x1bc)];}}),_0x327dcb[_0x3056f0(0x1b4)]({'coin':_0x500a85[_0x3056f0(0x119)],'number':_0xe9758,'initialprice':_0x2e6a79});});const _0x5907f5={'basecoin':_0x2e7a74,'eur':_0x2bd592,'usd':_0x55967b,'coins':_0x327dcb};if(_0x2e965a)proxyEmit(_0x16e5bd(0x206),_0x5907f5);startingBalances=_0x5907f5;}}function headlessMode(_0xe16cd0){const _0xe9a8a9=_0x1fb5cb;let _0x3f743b=_0xe16cd0[_0xe9a8a9(0xbf)],_0xe2c7ef=_0xe16cd0['threshold'],_0x1d31c6=[];for(let _0x47c142 of _0x3f743b){if(_0x47c142['coin']!=config[_0xe9a8a9(0x116)]){if(_0x47c142['delta']>=_0xe2c7ef/0x64){if(_0x47c142[_0xe9a8a9(0xc5)])_0x1d31c6[_0xe9a8a9(0x1b4)](_0x47c142);}else{if(_0x47c142['delta']<=-_0xe2c7ef/0x64){if(_0x47c142[_0xe9a8a9(0xc5)])_0x1d31c6['push'](_0x47c142);}}}}_0x1d31c6[_0xe9a8a9(0x218)]>0x0&&(lockOrders==ORDERS[_0xe9a8a9(0x1e5)]&&!coolingDown&&_0x1d31c6['forEach'](_0x7441d5=>{const _0x142f65=_0xe9a8a9;logger['debug'](_0x142f65(0x128)+_0x7441d5[_0x142f65(0x119)]+'\x20'+_0x7441d5[_0x142f65(0xca)]+'\x20'+_0x7441d5[_0x142f65(0x103)]+'\x20'+_0x7441d5[_0x142f65(0x215)]+'%\x20'+_0x7441d5[_0x142f65(0x171)]+'%\x20'+(0x64*_0x7441d5['delta'])[_0x142f65(0x196)](0x2)+_0x142f65(0x1dc)+_0xe2c7ef[_0x142f65(0x196)](0x2)+'%)');}),placeOrder(_0x1d31c6));}function notifyBalance(_0x70a55a){const _0xb1caa1=_0x1fb5cb;let _0x5c8b70=_0x70a55a[_0xb1caa1(0xbf)],_0x4fb15b=_0x70a55a[_0xb1caa1(0x209)],_0x144938=[];for(let _0x431b86 of _0x5c8b70){if(_0x431b86[_0xb1caa1(0x119)]!=config[_0xb1caa1(0x116)]){if(_0x431b86['delta']>=_0x4fb15b/0x64){if(_0x431b86[_0xb1caa1(0xc5)])_0x144938[_0xb1caa1(0x1b4)](_0x431b86);}else{if(_0x431b86['delta']<=-_0x4fb15b/0x64){if(_0x431b86[_0xb1caa1(0xc5)])_0x144938[_0xb1caa1(0x1b4)](_0x431b86);}}}}if(_0x144938[_0xb1caa1(0x218)]>0x0){let _0x5c54d1=_0x144938[_0xb1caa1(0x1c9)](_0x5cc6=>_0x5cc6[_0xb1caa1(0x119)]);_0x5c54d1[_0xb1caa1(0x12f)]();let _0x20ea77=_0x5c54d1[_0xb1caa1(0xf5)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x20ea77;}}function _0xc27d(){const _0x2065f8=['number','\x20has\x20a\x2024h\x20drop\x20of\x20','watchTrades()','getPortfolio','watchOrders','customId','resetHistory','ORDERS.UNLOCKED','concat','getTime','2.3.5','progress','search','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','yyyy/MM/dd','reverse','Pausing\x20for\x20','function','InvalidOrder','version','\x20closed\x20the\x20connection\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable','startdate','status','2\x20-\x20Validate\x20orders:\x20','average','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','assign','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','getMinutes','exec','remainingSymbols','net-fiat','milliseconds','replace','timeout','<b>','shift','Crypt','spot','Huobi','OnMaintenance','datetime','parseISO','join','\x20not\x20responding\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable','171GKbEYL','request-time','ETH','storeConfiguration','bot-','fromCodePoint','limit-high','change','Transaction\x20detection\x20unblocked','2\x20-\x20Orders\x20unlocked','orderId','success','last','running','stringify','recreate','yargs/yargs','event','limit-low','RequestTimeout','ticker','test','symbol','pro','1\x20-\x20Validate\x20orders:\x20','Avoiding\x20continuous\x20order\x20attempts','\x20order:\x20','117856lQwewD','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','loading-canceled','side','basecoin','/output-000.log','padStart','coin','fees','performance','2\x20-\x20handling\x20FILLED\x20order:\x20','Portfolio\x20change\x20detected:\x20','leftTxt','cancel','delta','event-history','total',',\x20must\x20be\x20a\x203\x20digit\x20number','timestamp','./config/','data','1\x20-\x20Unlock\x20orders','Trigger:\x20','Exception\x20thrown\x20in\x20','order','EUR','showConfig','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','ordertype','sort','removed','Order\x20amount\x20is\x20invalid:\x20','close','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','getCoins()','argv','303254NVgAFF','findIndex','loadSymbols()','/EUR','unlinkSync','excluded','\x20|\x20Custom\x20ID:\x20','getStartingBalances','\x20API\x20secret\x20is\x20invalid','</pre>','initial','<pre>','sortBy','2\x20-\x20Handled\x20open\x20orders','\x20>\x20','getPortfolio(0)','\x20|\x20','\x20-\x20bot\x20not\x20started','USDT','toUpperCase','\x20network\x20error','rightTxt',':\x20Bot\x20','differenceInSeconds','Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20hodlerhacks.com/fix/#clock-sync','Balance\x20Bot\x20does\x20not\x20support\x20the\x20','amountToPrecision','cancelLoading','\x20|\x20lock\x20orders:\x20','Failed\x20to\x20load\x20coin\x20data\x20for\x20','filter','1844945HGqFhw','ExchangeNotAvailable','createWriteStream','botID','startprice','date','apiSecret','1\x20-\x20Handle\x20open\x20orders','\x20exchange','realized','no\x20open\x20orders','final','limit','Limit\x20(high-margin)','25486gtvllg','getMonth','exchange','split','001','showname','buys','toLowerCase','getOpenOrders()','2.5.0','storeHeadless','fee','get','fetchTickers','target','getSeconds','4LtUwni','\x20minutes','usd','cooldown','format','USD','ORDERS.UNLOCKING','coins','Cooldown\x20ended\x20-\x20balancing\x20resumed','Resetting\x20coin\x20results:\x20','substring','fiat','\x20not\x20available\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable','deleteHistoryAlerts','cloneDeep','\x20minutes\x20-\x20','fetchOpenOrders','watchTransactions()','starting-balance-','placeOrder','Limit\x20(low-margin)','/USD','2464490KPBkwA','0\x20-\x20EXECUTION:\x20','\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','getPortfolio(2)','keys','recent20','set','\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated','add','\x20portfolio:</b>\x20\x0a\x0a','1\x20-\x20FILLED\x20known\x20order:\x20','toFixed','string','getHours','log','emojibuy','/backup/','MIN_NOTIONAL','lowdb/adapters/FileSync','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','added','fetchClosedOrders','red_yellow_blue','RateLimitExceeded','time','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','\x20change','createOrder','balancing\x20resumed','canceled','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','apiPassword','Invalid\x20symbol:\x20','decrypt','privateKey','currency','AuthenticationError','Headless:\x20','push','orderstatus','Binance','All\x20coin\x20data\x20loaded\x20-\x20bot\x20started','openOrders','bots','2.6.0','type','price','limits','105584XdrNkU','Invalid\x20quantity','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','page','\x20value','Fee\x20discount\x20refund\x20detected:\x20','watchOrders()','entries','restart','open','\x20|\x20exchange:\x20','map','sendMetricsTelegram','apply','Bitget','No\x20more\x20open\x20orders\x20-\x20','amount','.json','debug','colorscheme','bid','recovery','getCoinNumber()','has','padEnd','message','max','getDate','apiKey','USDC','%\x20(','find','secure','\x20>\x20[DEBUG]\x20','splice','Net\x20effect','configuration-stored','active','date-fns','UNLOCKED','loadMarkets','ask','\x20orders\x20in\x20less\x20than\x20','LOCKED','toggleBotMode','breakeven','TUSD','offset','defaults','basecoinvalue','./logs/','configuration','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','18Ysbhfh','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','headless','\x20:\x20','forEach','BNB','closed','slice','buy','isEqual','Order(s)\x20not\x20validated\x20after\x20','1\x20-\x20FILLED\x20unknown\x20order:\x20','Cex','password','fetchBalance','watchTrades','recreateCoinResults()','BTC','net-basecoin','starting-balances','value','eur','threshold','timeshift','filled','PAXG','settings','Transaction\x20detection\x20blocked','ExchangeError','percentage','816375lnqqtA','changes','fetchTicker','\x20exchange\x20error','distribution','startnumber','mkdirSync','length','Unfilled\x20order(s)\x20canceled\x20after\x20','UNLOCKING','includes','sell','BNB/','storeFiat','autoliquidity','exchanges','\x20API\x20key\x20is\x20invalid','change24h','highest','toString',':\x20timer\x20>','exchange\x20not\x20reloaded','args','ongoing','liquidity','full','sendPortfolioTelegram','***','-performance.json','none','placeOrder()','************','send','Error:\x20Invalid\x20argument\x20','abs','floor','logs','PermissionDenied','-results.json','random','ORDERS.LOCKED','indexOf','trade','existsSync','botname','<b>Bot\x20','OrderNotFound','\x20metrics:</b>\x20\x0a\x0a','emojisell','must\x20be\x20greater\x20than\x20minimum\x20amount','parse','Waited\x20','uncaughtException','Resetting\x20bot\x20history','remove','market','getFullYear','round','Invalid\x20API\x20key\x20or\x20secret\x20entered','bot','API-key\x20format\x20invalid','write','netoffset','error','Exchange','onepagemode','portfolio','(((.+)+)+)+$','min','lowdb','freeze','sells','valid','Cryptocom','Error\x20details:','balances','hybrid-crypto-js'];_0xc27d=function(){return _0x2065f8;};return _0xc27d();}function symbolToCoin(_0x2c64c9){const _0x30f0d5=_0x1fb5cb;let _0x2ba54f;if(_0x2c64c9[_0x30f0d5(0x21b)]('/'+config['basecoin']))_0x2ba54f=_0x2c64c9['replace']('/'+config[_0x30f0d5(0x116)],'');if(_0x2c64c9[_0x30f0d5(0x21b)](config[_0x30f0d5(0x116)]+'/'))_0x2ba54f=_0x2c64c9[_0x30f0d5(0xeb)](config[_0x30f0d5(0x116)]+'/','');return _0x2ba54f;}async function unlockOrders(){const _0xcffa9c=_0x1fb5cb;if(allOrdersPlaced&&lockOrders==ORDERS[_0xcffa9c(0x1e9)]){logger[_0xcffa9c(0x1d0)](_0xcffa9c(0x127)),lockOrders=ORDERS[_0xcffa9c(0x21a)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x523dd7=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x523dd7,validateOrdersState=_0xcffa9c(0x140),persistOpenOrders([]),lockOrders=ORDERS[_0xcffa9c(0x1e5)],logger[_0xcffa9c(0x1d0)](_0xcffa9c(0x100));}}async function validateOrders(_0x2fbe89){const _0x48ac3c=_0x1fb5cb;if(_0x2fbe89)validateOrdersState=_0x2fbe89;logger[_0x48ac3c(0x1d0)](_0x48ac3c(0x10f)+validateOrdersState+_0x48ac3c(0x152)+(lockOrders==0x1?_0x48ac3c(0xa5):lockOrders==0x2?_0x48ac3c(0x179):_0x48ac3c(0xd1)));let _0x1248d9=[],_0x387ed0=config[_0x48ac3c(0x12e)]==_0x48ac3c(0xb4)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config['timeout']*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x48ac3c(0x1e9)])return;logger[_0x48ac3c(0x1d0)](_0x48ac3c(0xe1)+validateOrdersState),lastOrders['forEach'](_0x2ac63a=>{const _0xecef3e=_0x48ac3c;let _0x16018c=![];_0x2ac63a[_0xecef3e(0x20b)]>0x0&&(_0x16018c=!![]),_0x1248d9[_0xecef3e(0x1b4)](_0x16018c),_0x16018c&&config[_0xecef3e(0x12e)]!=_0xecef3e(0xb4)&&logHistory(_0xecef3e(0x12a),'Order\x20filled:\x20'+_0x2ac63a[_0xecef3e(0x10d)]+'\x20'+_0x2ac63a[_0xecef3e(0x115)]+'\x20#'+formatResult(_0x2ac63a[_0xecef3e(0x20b)],0x8)+'\x20@'+formatResult(_0x2ac63a[_0xecef3e(0x1bc)],0x8));}),_0x1248d9[_0x48ac3c(0x1f7)]((_0x486710,_0x500de4)=>{const _0x2ca893=_0x48ac3c;if(_0x486710)lastOrders[_0x2ca893(0x1e0)](_0x500de4,0x1);}),persistOpenOrders(lastOrders);const _0x484edb=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':_0x48ac3c(0x1a8);if(validateOrdersState=='initial'){validateOrdersState=_0x48ac3c(0x94);if(_0x1248d9[_0x48ac3c(0x21b)](![])){if(config[_0x48ac3c(0x12e)]=='market'){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x48ac3c(0x94)){if(_0x1248d9[_0x48ac3c(0x21b)](![])){}else{if(allOrdersPlaced){if(config[_0x48ac3c(0x12e)]=='market'){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x48ac3c(0x160))_0x1248d9[_0x48ac3c(0x21b)](![])&&(config['ordertype']==_0x48ac3c(0xb4)?logHistory(_0x48ac3c(0x102),_0x48ac3c(0x1fd)+Math[_0x48ac3c(0xb6)](_0x387ed0*validateOrderInterval/0xea60)+_0x48ac3c(0x182)+_0x484edb):(await cancelOrders(),logHistory(_0x48ac3c(0x102),_0x48ac3c(0x219)+Math[_0x48ac3c(0xb6)](_0x387ed0*validateOrderInterval/0xea60)+_0x48ac3c(0x182)+_0x484edb))),await unlockOrders();else{if(validateOrdersState==_0x48ac3c(0x15f)){if(config[_0x48ac3c(0x12e)]!='market')logHistory(_0x48ac3c(0x102),_0x48ac3c(0x1cd)+_0x484edb);await unlockOrders();}}}}}async function cancelOrders(){const _0x2f988d=_0x1fb5cb;lastOrders[_0x2f988d(0x1f7)](async _0x146d16=>{const _0x3724ed=_0x2f988d;try{const _0x1da3bb=await exchange['cancelOrder'](_0x146d16[_0x3724ed(0x101)],_0x146d16['symbol']);}catch(_0x59bea3){if(_0x59bea3['toString']()['includes'](_0x3724ed(0xab))){}else await handleError(_0x59bea3,'cancelOrders()');}});}async function initCoinResults(_0x1d376f){const _0x2be93e=_0x1fb5cb;_0x1d376f?logger[_0x2be93e(0x1d0)](_0x2be93e(0x17c)+_0x1d376f):logger[_0x2be93e(0x1d0)]('Initializing\x20coin\x20results'),config['portfolio'][_0x2be93e(0x1f7)](_0x38f1f0=>{const _0x2512aa=_0x2be93e;if(!_0x38f1f0['excluded']&&_0x38f1f0[_0x2512aa(0x119)]!=config['basecoin']){const _0xcba923=currentCoins[_0x2512aa(0x1dd)](_0x44b55d=>_0x44b55d['coin']==_0x38f1f0[_0x2512aa(0x119)]),_0x44feef=global[_0x2512aa(0x10b)][noslash(_0x38f1f0[_0x2512aa(0x10d)])];let _0x2b2acc=_0xcba923?_0xcba923[_0x2512aa(0xca)]:null,_0x3a632c=_0x38f1f0[_0x2512aa(0xd9)]?0x1/_0x44feef:_0x44feef,_0x4e5e2d;config[_0x2512aa(0x95)][_0x2512aa(0x1f7)](_0x203644=>{const _0x52f2cf=_0x2512aa;!_0x4e5e2d&&(_0x4e5e2d=_0x203644[_0x52f2cf(0x212)][_0x52f2cf(0x1dd)](_0x29c772=>_0x29c772[_0x52f2cf(0x119)]==_0x38f1f0[_0x52f2cf(0x119)]),_0x4e5e2d&&(_0x2b2acc=_0x4e5e2d[_0x52f2cf(0xca)],_0x3a632c=_0x4e5e2d[_0x52f2cf(0x1bc)]));});let _0x10f0e4=dbCoinResults['get']('coins')[_0x2512aa(0x1dd)]({'coin':_0x38f1f0[_0x2512aa(0x119)]})[_0x2512aa(0x207)]();if(!_0x10f0e4){const _0x36778a={'coin':_0x38f1f0['coin'],'number':_0x2b2acc,'breakeven':_0x3a632c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2512aa(0x16f)](_0x2512aa(0x17a))[_0x2512aa(0x1b4)](_0x36778a)['write']();}else{if(_0x1d376f&&_0x38f1f0[_0x2512aa(0x119)]==_0x1d376f){const _0x3974d4={'coin':_0x38f1f0[_0x2512aa(0x119)],'number':_0x2b2acc,'breakeven':_0x3a632c,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x2512aa(0x16f)](_0x2512aa(0x17a))[_0x2512aa(0x1dd)]({'coin':_0x38f1f0[_0x2512aa(0x119)]})[_0x2512aa(0xe4)](_0x3974d4)[_0x2512aa(0xba)]();}}}});}async function updateCoinResults(_0xfa3eee,_0x4f1d91=![]){const _0x1e75ca=_0x1fb5cb;let _0x245712,_0x40da95,_0x49d166,_0x1a1f75,_0x1fd6e9,_0x4a7f3a,_0x51df0e=dbCoinResults[_0x1e75ca(0x16f)](_0x1e75ca(0x17a))[_0x1e75ca(0x1dd)]({'coin':_0xfa3eee[_0x1e75ca(0x119)]})[_0x1e75ca(0x207)](),_0x2165d7=![];_0x51df0e&&Object['entries'](_0x51df0e)[_0x1e75ca(0x1f7)](([_0x17664d,_0x17f463])=>{if(_0x17f463==null)_0x2165d7=!![];});(!_0x51df0e||_0x2165d7)&&(await initCoinResults(_0xfa3eee[_0x1e75ca(0x119)]),_0x51df0e=dbCoinResults[_0x1e75ca(0x16f)](_0x1e75ca(0x17a))[_0x1e75ca(0x1dd)]({'coin':_0xfa3eee['coin']})[_0x1e75ca(0x207)]());_0xfa3eee[_0x1e75ca(0xd9)]&&(_0x4a7f3a={'filled':_0xfa3eee[_0x1e75ca(0x20b)]*_0xfa3eee['price'],'amount':_0xfa3eee[_0x1e75ca(0x20b)]*_0xfa3eee[_0x1e75ca(0x1bc)],'side':_0xfa3eee[_0x1e75ca(0x115)]=='sell'?_0x1e75ca(0x1fb):_0x1e75ca(0x21c),'price':0x1/_0xfa3eee[_0x1e75ca(0x1bc)]},_0xfa3eee={..._0xfa3eee,..._0x4a7f3a});_0x4f1d91?_0x40da95=_0xfa3eee[_0x1e75ca(0x115)]==_0x1e75ca(0x1fb)?_0x51df0e['number']+_0xfa3eee[_0x1e75ca(0x20b)]:_0x51df0e[_0x1e75ca(0xca)]-_0xfa3eee[_0x1e75ca(0x20b)]:_0x40da95=await getCoinNumber(_0xfa3eee[_0x1e75ca(0x119)]);if(_0xfa3eee[_0x1e75ca(0x16e)]&&_0xfa3eee[_0x1e75ca(0x16e)]['currency']==config[_0x1e75ca(0x116)])_0x245712=_0xfa3eee['fee']['cost'];else{if(_0xfa3eee[_0x1e75ca(0x16e)]&&_0xfa3eee[_0x1e75ca(0x16e)][_0x1e75ca(0x1b1)]=='BNB'&&!_0x4f1d91&&config[_0x1e75ca(0x116)]!=_0x1e75ca(0x20c))_0x245712=_0xfa3eee[_0x1e75ca(0x16e)]['cost']*global[_0x1e75ca(0x10b)]['BNB'+config[_0x1e75ca(0x116)]];else _0x245712=defaultFee*_0xfa3eee[_0x1e75ca(0x20b)]*_0xfa3eee[_0x1e75ca(0x1bc)];}_0xfa3eee[_0x1e75ca(0x115)]==_0x1e75ca(0x1fb)?(_0x49d166=_0x40da95!=0x0?(_0x51df0e['breakeven']*_0x51df0e[_0x1e75ca(0xca)]+_0xfa3eee[_0x1e75ca(0x1bc)]*(_0x40da95-_0x51df0e[_0x1e75ca(0xca)])+_0x245712)/_0x40da95:0x0,_0x1a1f75=_0x51df0e['realized']):(_0x49d166=_0x40da95!=0x0?(_0x51df0e['breakeven']*_0x51df0e[_0x1e75ca(0xca)]-_0xfa3eee[_0x1e75ca(0x1bc)]*(_0x51df0e['number']-_0x40da95)+_0x245712)/_0x40da95:0x0,_0x1a1f75=_0x51df0e[_0x1e75ca(0x15e)]+(_0xfa3eee[_0x1e75ca(0x1bc)]-_0x51df0e[_0x1e75ca(0x1eb)])*_0xfa3eee[_0x1e75ca(0x20b)]);_0x1fd6e9=(_0xfa3eee[_0x1e75ca(0x1bc)]-_0x49d166-_0x245712/_0xfa3eee['filled'])*_0x40da95;let _0x1460ca={'coin':_0xfa3eee[_0x1e75ca(0x119)],'number':_0x40da95,'breakeven':formatResult(_0x49d166,0x8),'realized':formatResult(_0x1a1f75,0x8),'unrealized':formatResult(_0x1fd6e9,0x8),'fees':formatResult(_0x51df0e[_0x1e75ca(0x11a)]+_0x245712,0x8),'sells':_0xfa3eee[_0x1e75ca(0x115)]==_0x1e75ca(0x21c)?_0x51df0e[_0x1e75ca(0xc4)]+0x1:_0x51df0e[_0x1e75ca(0xc4)],'buys':_0xfa3eee[_0x1e75ca(0x115)]=='buy'?_0x51df0e[_0x1e75ca(0x169)]+0x1:_0x51df0e['buys']};dbCoinResults[_0x1e75ca(0x16f)](_0x1e75ca(0x17a))['find']({'coin':_0xfa3eee[_0x1e75ca(0x119)]})[_0x1e75ca(0xe4)](_0x1460ca)[_0x1e75ca(0xba)]();if(!_0x4f1d91){if(_0xfa3eee[_0x1e75ca(0x16e)]&&_0xfa3eee[_0x1e75ca(0x16e)]['currency']==_0x1e75ca(0x1f8)){const _0x341b73=currentCoins[_0x1e75ca(0x1dd)](_0x4074d9=>_0x4074d9[_0x1e75ca(0x119)]==_0x1e75ca(0x1f8));if(_0x341b73){let _0x2ae8ac=dbCoinResults[_0x1e75ca(0x16f)](_0x1e75ca(0x17a))[_0x1e75ca(0x1dd)]({'coin':_0x1e75ca(0x1f8)})['value']();_0x1460ca={..._0x2ae8ac,'number':_0x341b73[_0x1e75ca(0xca)]},dbCoinResults[_0x1e75ca(0x16f)]('coins')[_0x1e75ca(0x1dd)]({'coin':_0x1e75ca(0x1f8)})[_0x1e75ca(0xe4)](_0x1460ca)[_0x1e75ca(0xba)]();}}}}async function placeOrder(_0x410c6f){const _0x1e63da=_0x1fb5cb,_0x288c5f=config[_0x1e63da(0x12e)]==_0x1e63da(0xb4)?_0x1e63da(0xb4):_0x1e63da(0x161);if(lockOrders==ORDERS[_0x1e63da(0x1e5)]&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x1e63da(0x1e9)],allOrdersPlaced=![],validateOrdersState=_0x1e63da(0x140);let _0x27705b=![];lastOrders=[];for(const _0x31681b of _0x410c6f){let _0x4d542f,_0x399659,_0x4d4750,_0x251536,_0x1c4107,_0x28b660=_0x31681b['symbol'];try{const _0x2aabe5=await exchange[_0x1e63da(0x213)](_0x28b660);_0x4d542f=_0x31681b['reverse']?0x1/_0x31681b[_0x1e63da(0x103)]:_0x31681b['last'],_0x399659=_0x2aabe5[_0x1e63da(0x1d2)],_0x4d4750=_0x2aabe5[_0x1e63da(0x1e7)];_0x31681b['reverse']?(_0x251536=_0x31681b[_0x1e63da(0x115)]==_0x1e63da(0x1fb)?'sell':'buy',_0x1c4107=Math[_0x1e63da(0x9f)](_0x31681b[_0x1e63da(0xa7)])/_0x4d542f):(_0x251536=_0x31681b['side'],_0x1c4107=Math[_0x1e63da(0x9f)](_0x31681b[_0x1e63da(0xa7)]));_0x288c5f=='limit'&&(config[_0x1e63da(0x12e)]==_0x1e63da(0xfd)&&(_0x4d542f=_0x251536=='buy'?_0x399659:_0x4d4750),config[_0x1e63da(0x12e)]==_0x1e63da(0x109)&&(_0x4d542f=_0x251536=='buy'?_0x4d4750:_0x399659));_0x1c4107=formatResult(_0x1c4107,0x8),_0x4d542f=formatResult(_0x4d542f,0x8);const _0x4f60ad=_0x251536=='sell'?config['emojisell']?String[_0x1e63da(0xfc)]('0x'+config[_0x1e63da(0xad)])+'\x20':'':config[_0x1e63da(0x19a)]?String[_0x1e63da(0xfc)]('0x'+config[_0x1e63da(0x19a)])+'\x20':'',_0x4eeaca=_0x288c5f==_0x1e63da(0xb4)?'Market':config[_0x1e63da(0x12e)]==_0x1e63da(0xfd)?_0x1e63da(0x162):_0x1e63da(0x187),_0x47d36f=(Math[_0x1e63da(0xa0)](Math[_0x1e63da(0xa4)]()*0x35a4e900)+0x5f5e100)[_0x1e63da(0x90)]();lastOrders[_0x1e63da(0x1b4)]({'customId':_0x47d36f,'symbol':_0x28b660,'coin':_0x31681b['coin'],'amount':_0x1c4107,'price':_0x4d542f,'side':_0x251536,'reverse':_0x31681b['reverse'],'filled':0x0});if(_0x288c5f=='market')logHistory('order',''+_0x4f60ad+_0x4eeaca+_0x1e63da(0x111)+_0x28b660+'\x20'+_0x251536+'\x20#'+formatResult(_0x1c4107,0x8)+'\x20@'+formatResult(_0x4d542f,0x8));else logHistory(_0x1e63da(0x12a),''+_0x4f60ad+_0x4eeaca+_0x1e63da(0x111)+_0x28b660+'\x20'+_0x251536+'\x20#'+formatResult(_0x1c4107,0x8)+'\x20@'+formatResult(_0x4d542f,0x8));let _0x4fe68d;_0x288c5f==_0x1e63da(0xb4)?_0x251536=='buy'&&['Bybit',_0x1e63da(0x1cc),_0x1e63da(0x1ff),_0x1e63da(0xf1),'Huobipro']['includes'](config['exchange'])?_0x4fe68d=await exchange[_0x1e63da(0x1a7)](_0x28b660,_0x288c5f,_0x251536,_0x1c4107,_0x4d542f):_0x4fe68d=await exchange[_0x1e63da(0x1a7)](_0x28b660,_0x288c5f,_0x251536,_0x1c4107,undefined):_0x4fe68d=await exchange[_0x1e63da(0x1a7)](_0x28b660,_0x288c5f,_0x251536,_0x1c4107,_0x4d542f);logger[_0x1e63da(0x1d0)]('ID:\x20'+_0x4fe68d['id']+_0x1e63da(0x13c)+_0x47d36f);const _0x155b5d=lastOrders[_0x1e63da(0x218)]-0x1;if(_0x155b5d>=0x0&&lastOrders[_0x155b5d][_0x1e63da(0xcf)]==_0x47d36f){lastOrders[_0x155b5d][_0x1e63da(0x101)]=_0x4fe68d['id'];if(_0x4fe68d['amount'])lastOrders[_0x155b5d][_0x1e63da(0x1ce)]=_0x4fe68d[_0x1e63da(0x1ce)];if(_0x4fe68d[_0x1e63da(0x1bc)])lastOrders[_0x155b5d][_0x1e63da(0x1bc)]=_0x4fe68d[_0x1e63da(0x1bc)];lastOrders[_0x155b5d]['fee']=_0x4fe68d[_0x1e63da(0x16e)];}if(config[_0x1e63da(0x176)]!=0x0){let _0x1235ab=null;if(cooldownTracker[_0x1e63da(0x218)]==config[_0x1e63da(0x176)]-0x1)_0x1235ab=cooldownTracker['shift']();const _0x4406fb=getTimeStamp();cooldownTracker[_0x1e63da(0x1b4)](_0x4406fb);if(_0x1235ab){const _0x7dd3c0=fns[_0x1e63da(0x14d)](new Date(_0x4406fb),new Date(_0x1235ab));if(_0x7dd3c0<cooldownInterval){logHistory(_0x1e63da(0xbc),'Executed\x20'+config['cooldown']+_0x1e63da(0x1e8)+cooldownInterval/0x3c+_0x1e63da(0x18b)+cooldownPeriod/(0xe10*0x3e8)+'\x20hour'),coolingDown=!![];break;}}}}catch(_0x363bc6){if(_0x363bc6['toString']()[_0x1e63da(0x21b)](_0x1e63da(0x19c)))lastOrders=lastOrders[_0x1e63da(0x154)](_0x505546=>_0x505546[_0x1e63da(0x10d)]!=_0x28b660),logHistory(_0x1e63da(0xbc),_0x1e63da(0xe5)+_0x28b660),_0x27705b=!![];else{if(_0x363bc6[_0x1e63da(0x90)]()[_0x1e63da(0x21b)](_0x1e63da(0x1bf)))lastOrders=lastOrders['filter'](_0x43ba5d=>_0x43ba5d['symbol']!=_0x28b660),logHistory(_0x1e63da(0xbc),_0x1e63da(0x131)+_0x28b660),_0x27705b=!![];else{if(_0x363bc6['toString']()[_0x1e63da(0x21b)](_0x1e63da(0xdc)))lastOrders=lastOrders[_0x1e63da(0x154)](_0x107ef9=>_0x107ef9[_0x1e63da(0x10d)]!=_0x28b660),logHistory(_0x1e63da(0xbc),'Order\x20is\x20invalid:\x20'+_0x28b660),logger[_0x1e63da(0x1d0)](_0x363bc6),_0x27705b=!![];else _0x363bc6['toString']()[_0x1e63da(0x21b)](_0x1e63da(0xae))?(lastOrders=lastOrders[_0x1e63da(0x154)](_0x342f80=>_0x342f80[_0x1e63da(0x10d)]!=_0x28b660),logHistory(_0x1e63da(0xbc),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x28b660),_0x27705b=!![]):(lastOrders=lastOrders[_0x1e63da(0x154)](_0x1a57f0=>_0x1a57f0[_0x1e63da(0x10d)]!=_0x28b660),await handleError(_0x363bc6,_0x1e63da(0x9b),_0x28b660));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x1e63da(0x218)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x12b2a6=config[_0x1e63da(0x12e)]==_0x1e63da(0xb4)?validateOrderTimeout*0x3c*0x3e8:config[_0x1e63da(0xec)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x28f875=_0x1e63da;validateOrders(_0x28f875(0x160));},_0x12b2a6);}else unlockOrders();_0x27705b&&config[_0x1e63da(0x1f5)]&&(logHistory('error',_0x1e63da(0x110)+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x1e63da(0x17b)));}else{if(coolingDown)!config[_0x1e63da(0x1f5)]&&logHistory(_0x1e63da(0xbc),_0x1e63da(0x19e));else lockOrders!=ORDERS['UNLOCKED']&&(!config[_0x1e63da(0x1f5)]&&(config[_0x1e63da(0x12e)]==_0x1e63da(0xb4)?logHistory(_0x1e63da(0xbc),_0x1e63da(0x192)):logHistory('error','Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x420845){const _0x17f8f6=_0x1fb5cb,_0x132989={...config,'openOrders':_0x420845};let _0x2bea25=dbConfig[_0x17f8f6(0x16f)]('bot')[_0x17f8f6(0x1dd)]({'botID':botID})[_0x17f8f6(0x207)]();_0x2bea25&&dbConfig[_0x17f8f6(0x16f)](_0x17f8f6(0xb8))[_0x17f8f6(0x1dd)]({'botID':botID})['assign'](_0x132989)[_0x17f8f6(0xba)]();}function restoreOrders(){const _0x34a48a=_0x1fb5cb;let _0x4e8048;config[_0x34a48a(0x1b8)]&&allOpenOrders[_0x34a48a(0x1f7)](_0x1f0cad=>{const _0x13220f=_0x34a48a,_0x2c9ff4=config[_0x13220f(0x1b8)][_0x13220f(0x1dd)](_0x482ac2=>_0x482ac2[_0x13220f(0x101)]==_0x1f0cad['id']);_0x2c9ff4&&(lastOrders['push'](_0x2c9ff4),_0x4e8048=_0x1f0cad['timestamp']);});if(lastOrders[_0x34a48a(0x218)]>0x0){lockOrders=ORDERS['LOCKED'],validateOrdersState='ongoing',allOrdersPlaced=!![];const _0x5224a2=new Date()[_0x34a48a(0xd3)](),_0x4c7330=config[_0x34a48a(0x12e)]==_0x34a48a(0xb4)?validateOrderTimeout*0x3c*0x3e8:config['timeout']*0x3c*0x3e8;if(_0x4e8048+_0x4c7330>_0x5224a2){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x2bedfe=_0x34a48a;validateOrders(_0x2bedfe(0x160));},_0x4e8048+_0x4c7330-_0x5224a2);}else validateOrders(_0x34a48a(0x160));}}async function sendMetricsTelegram(){const _0x4d2e5c=_0x1fb5cb;if(!coinsLoaded){process[_0x4d2e5c(0x9d)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x2760b5=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x3a8747='';if(config[_0x4d2e5c(0x168)])_0x3a8747=_0x4d2e5c(0xed)+config[_0x4d2e5c(0xa9)]+_0x4d2e5c(0xac);else _0x3a8747=_0x4d2e5c(0xaa)+botID+_0x4d2e5c(0xac);const _0x22525e=getKPIs('basecoin'),_0x178b99=getKPIs(_0x4d2e5c(0x17e),config[_0x4d2e5c(0x17e)]),_0x9b69ee=getKPIs('net-basecoin'),_0x4c7ac0=getKPIs(_0x4d2e5c(0xe9),config[_0x4d2e5c(0x17e)]);_0x3a8747+=_0x4d2e5c(0x141),_0x3a8747+=_0x22525e[_0x4d2e5c(0x11e)]+_0x4d2e5c(0x1f6)+_0x22525e[_0x4d2e5c(0x207)]+'\x0a',_0x3a8747+=_0x22525e[_0x4d2e5c(0x14b)]+':\x20'+_0x22525e[_0x4d2e5c(0xfe)]+'%\x0a',_0x3a8747+=_0x178b99['leftTxt']+_0x4d2e5c(0x1f6)+_0x178b99['value']+'\x0a',_0x3a8747+=_0x178b99[_0x4d2e5c(0x14b)]+':\x20'+_0x178b99['change']+'%\x0a',_0x3a8747+=_0x9b69ee['leftTxt']+':\x20'+_0x9b69ee[_0x4d2e5c(0x207)]+'\x20('+config[_0x4d2e5c(0x116)]+')\x0a',_0x3a8747+=_0x9b69ee[_0x4d2e5c(0x14b)]+':\x20'+_0x9b69ee[_0x4d2e5c(0xfe)]+_0x4d2e5c(0x1dc)+config['basecoin']+')\x0a',_0x3a8747+=_0x4c7ac0[_0x4d2e5c(0x11e)]+':\x20'+_0x4c7ac0['value']+'\x20('+config[_0x4d2e5c(0x17e)]+')\x0a',_0x3a8747+=_0x4c7ac0[_0x4d2e5c(0x14b)]+':\x20'+_0x4c7ac0[_0x4d2e5c(0xfe)]+_0x4d2e5c(0x1dc)+config[_0x4d2e5c(0x17e)]+')\x0a',_0x3a8747+=_0x4d2e5c(0x13f),process[_0x4d2e5c(0x9d)]({'telegrammsg':_0x3a8747},_0xc3306e=>{});}async function sendPortfolioTelegram(){const _0x30794c=_0x1fb5cb;if(!coinsLoaded){process[_0x30794c(0x9d)]({'telegrammsg':'Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute'},_0x113401=>{});return;}let _0x4834df='';if(config[_0x30794c(0x168)])_0x4834df=_0x30794c(0xed)+config[_0x30794c(0xa9)]+_0x30794c(0x194);else _0x4834df=_0x30794c(0xaa)+botID+_0x30794c(0x194);_0x4834df+=_0x30794c(0x141),_0x4834df+='-------------------------------\x0a',_0x4834df+='Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a',_0x4834df+='-------------------------------\x0a',currentCoins[_0x30794c(0x1f7)](_0x3757f5=>{const _0x2037b1=_0x30794c;_0x4834df+=_0x3757f5[_0x2037b1(0x119)][_0x2037b1(0x1d6)](0x7)+'|\x20'+formatPad(_0x3757f5[_0x2037b1(0x215)],0x2,0x6)+'|\x20'+formatPad(_0x3757f5['target'],0x2,0x6)+'|\x20'+formatPad(_0x3757f5['delta']*0x64,0x2,0x6)+'\x0a';}),_0x4834df+=_0x30794c(0x13f),process[_0x30794c(0x9d)]({'telegrammsg':_0x4834df},_0x7ccce2=>{});}function formatPad(_0x19a9b6,_0x297ff1,_0x571b5e){const _0x24965a=_0x1fb5cb,_0x3df7b9=formatResultString(_0x19a9b6,_0x297ff1);return _0x3df7b9?_0x3df7b9['padStart'](_0x571b5e):''[_0x24965a(0x118)](_0x571b5e);}function logHistory(_0x3098b0,_0x35af58,_0x3afb66=''){const _0x4e2fc8=_0x1fb5cb;logger['full'](''+_0x35af58);let _0x1da637={'time':getTimeStamp(),'type':_0x3098b0,'event':_0x35af58};dbLogs[_0x4e2fc8(0x16f)](_0x4e2fc8(0xa1))[_0x4e2fc8(0x1b4)](_0x1da637)[_0x4e2fc8(0xba)]();if(_0x3afb66=='')_0x3afb66=_0x35af58;proxyEmit(_0x4e2fc8(0x108),{'log':_0x1da637,'summary':_0x3afb66}),process[_0x4e2fc8(0x9d)]({'telegram':{..._0x1da637,'botname':config[_0x4e2fc8(0xa9)],'showname':config[_0x4e2fc8(0x168)]}},_0x32ddd2=>{});}function emitHistory(_0x245f95={}){const _0x23bfb4=_0x1fb5cb;Object[_0x23bfb4(0x18e)](_0x245f95)[_0x23bfb4(0x218)]==0x0&&(_0x245f95={'type':['order',_0x23bfb4(0x108)],'event':'','page':0x1});if(_0x245f95['type'][_0x23bfb4(0x21b)](_0x23bfb4(0x108)))_0x245f95[_0x23bfb4(0x1bb)]['splice'](_0x245f95['type'][_0x23bfb4(0xa6)](_0x23bfb4(0x108)),0x1,'error','warning',_0x23bfb4(0x102));if(dbLogs[_0x23bfb4(0x1d5)](_0x23bfb4(0xa1))[_0x23bfb4(0x207)]()){let _0x400fbf=dbLogs['get'](_0x23bfb4(0xa1))[_0x23bfb4(0x154)](_0x8622ff=>{const _0x1b2a48=_0x23bfb4;if(_0x245f95[_0x1b2a48(0x1bb)][_0x1b2a48(0x218)]==0x0)return![];else return _0x245f95[_0x1b2a48(0x1bb)][_0x1b2a48(0x21b)](_0x8622ff[_0x1b2a48(0x1bb)]);})[_0x23bfb4(0x154)](_0x2f034d=>{const _0x1b0226=_0x23bfb4;if(_0x245f95[_0x1b0226(0x108)]=='')return!![];else return _0x2f034d[_0x1b0226(0x108)][_0x1b0226(0x16a)]()['includes'](_0x245f95['event']['toLowerCase']());})['sortBy']('time'),_0x2292af=_0x400fbf[_0x23bfb4(0x207)]()[_0x23bfb4(0x218)];_0x400fbf=_0x400fbf[_0x23bfb4(0xd9)]()[_0x23bfb4(0x1fa)]((_0x245f95[_0x23bfb4(0x1c1)]-0x1)*logPageSize,_0x245f95[_0x23bfb4(0x1c1)]*logPageSize-0x1)[_0x23bfb4(0xd9)]()[_0x23bfb4(0x207)](),proxyEmit(_0x23bfb4(0x121),{'logs':_0x400fbf,'total':_0x2292af});}else proxyEmit(_0x23bfb4(0x121),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x19defc){const _0x5ef5f7=_0x1fb5cb;if(dbLogs['has'](_0x5ef5f7(0xa1))['value']()){const _0x2bcb90=dbLogs[_0x5ef5f7(0x16f)](_0x5ef5f7(0xa1))[_0x5ef5f7(0x142)](_0x5ef5f7(0x1a3))[_0x5ef5f7(0x154)](_0xa27476=>{const _0x67738=_0x5ef5f7;return _0xa27476[_0x67738(0x1bb)]=='order';})[_0x5ef5f7(0x207)]();dbLogs['get']('logs')['remove']()[_0x5ef5f7(0xba)](),dbLogs[_0x5ef5f7(0x16f)]('logs')[_0x5ef5f7(0xe4)](_0x2bcb90)[_0x5ef5f7(0xba)](),emitHistory(_0x19defc);}}async function pauseBot(_0x1e1909=pauseBotInterval){const _0x3b3725=_0x1fb5cb,_0xf0dfff=new Date()['getTime']();if(!lastErrorShown||_0xf0dfff-lastErrorShown>=_0x1e1909){lastErrorShown=_0xf0dfff;!lastBotPause?(lastBotPause=_0xf0dfff,consecutivePauses=0x1):(_0xf0dfff-lastBotPause-_0x1e1909<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process[_0x3b3725(0x9d)]({'stop':_0x3b3725(0x1c6)},_0x1d2878=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x3b3725(0xd3)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x1e1909),botPaused=![],reset(!![]);}}}async function killBot(){botPaused=!![],await sleep(0x3e8),process['send']({'stop':'kill'},_0x6022ea=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x52a94a,_0x5389b9){const _0x554bb1=_0x1fb5cb;if(botPaused)return;const _0x58edd8=config[_0x554bb1(0x165)]||_0x554bb1(0xbd);if(_0x5389b9)logger[_0x554bb1(0x1d0)](_0x554bb1(0x129)+_0x5389b9);const _0x3a998c=()=>{const _0x5e7501=_0x554bb1;loading[_0x5e7501(0xbc)]=!![],emitLoadingProgress();};if(_0x52a94a[_0x554bb1(0x90)]()[_0x554bb1(0x21b)](_0x554bb1(0xb9)))logHistory(_0x554bb1(0xbc),_0x58edd8+_0x554bb1(0x133)),_0x3a998c();else{if(_0x52a94a['toString']()[_0x554bb1(0x21b)](_0x554bb1(0x12d)))logHistory(_0x554bb1(0xbc),_0x58edd8+_0x554bb1(0x113)),_0x3a998c();else _0x52a94a[_0x554bb1(0x90)]()[_0x554bb1(0x21b)](_0x554bb1(0x1b2))?(logHistory(_0x554bb1(0xbc),_0x58edd8+_0x554bb1(0xe3)),logHistory(_0x554bb1(0xbc),'Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid'),_0x3a998c()):await handleError(_0x52a94a,null);}}async function handleError(_0x362f3a,_0x22f5d6,_0x5e36fd=''){const _0x4a213f=_0x1fb5cb;if(botPaused)return;const _0x1ea38b=config[_0x4a213f(0x165)]||_0x4a213f(0xbd);if(_0x22f5d6)logger[_0x4a213f(0x1d0)](_0x4a213f(0x129)+_0x22f5d6);if(_0x362f3a[_0x4a213f(0x90)]()[_0x4a213f(0x21b)]('DDoSProtection'))logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x1f2)+pauseBotMsg),logger['debug'](_0x4a213f(0xc7),_0x362f3a),await pauseBot();else{if(_0x362f3a[_0x4a213f(0x90)]()['includes'](_0x4a213f(0x1a2)))logHistory('error',_0x1ea38b+'\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading'+pauseBotMsg),logger[_0x4a213f(0x1d0)](_0x4a213f(0xc7),_0x362f3a),await pauseBot();else{if(_0x362f3a['toString']()['includes'](_0x4a213f(0x156))||_0x362f3a['toString']()[_0x4a213f(0x21b)](_0x4a213f(0xf2)))logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x17f)+pauseBotMsg),await pauseBot();else{if(_0x362f3a['toString']()['includes'](_0x4a213f(0x10a)))logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0xf6)+pauseBotMsg),await pauseBot();else{if(_0x362f3a[_0x4a213f(0x90)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory('error',_0x1ea38b+_0x4a213f(0xde)+pauseBotMsg),await pauseBot();else{if(_0x362f3a['toString']()[_0x4a213f(0x16a)]()[_0x4a213f(0x21b)](_0x4a213f(0x124))||_0x362f3a[_0x4a213f(0x90)]()[_0x4a213f(0x16a)]()[_0x4a213f(0x21b)](_0x4a213f(0xf8)))logHistory(_0x4a213f(0xbc),_0x4a213f(0x14e)+pauseBotMsg),logger[_0x4a213f(0x1d0)](_0x4a213f(0xc7),_0x362f3a[_0x4a213f(0x90)]()),await pauseBot();else{if(_0x362f3a[_0x4a213f(0x90)]()[_0x4a213f(0x21b)]('InvalidNonce'))logHistory(_0x4a213f(0xbc),_0x1ea38b+'\x20rejected\x20your\x20API\x20request\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-rejected'+pauseBotMsg),logger[_0x4a213f(0x1d0)](_0x4a213f(0xc7),_0x362f3a),await pauseBot();else{if(_0x362f3a instanceof ccxt['NetworkError'])logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x14a)+pauseBotMsg),logger['debug'](_0x4a213f(0xc7),_0x362f3a),await pauseBot();else{if(_0x362f3a['toString']()[_0x4a213f(0x21b)](_0x4a213f(0xb9)))logHistory('error',_0x1ea38b+_0x4a213f(0x8d)),logHistory(_0x4a213f(0xbc),_0x4a213f(0x1c0)),await killBot();else{if(_0x362f3a[_0x4a213f(0x90)]()[_0x4a213f(0x21b)](_0x4a213f(0x12d)))logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x13e)),logHistory('error',_0x4a213f(0x1c0)),await killBot();else{if(_0x362f3a[_0x4a213f(0x90)]()['includes'](_0x4a213f(0x1b2)))logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x191)),logHistory(_0x4a213f(0xbc),_0x4a213f(0x1c0)),await killBot();else{if(_0x362f3a[_0x4a213f(0x90)]()[_0x4a213f(0x21b)](_0x4a213f(0xa2)))logHistory('error',_0x1ea38b+_0x4a213f(0x1ab)),logHistory(_0x4a213f(0xbc),_0x4a213f(0x1c0)),await killBot();else{if(_0x362f3a['toString']()[_0x4a213f(0x21b)]('InsufficientFunds'))logHistory(_0x4a213f(0xbc),_0x4a213f(0x18c)+_0x5e36fd);else _0x362f3a instanceof ccxt[_0x4a213f(0x20f)]?(logHistory(_0x4a213f(0xbc),_0x1ea38b+_0x4a213f(0x214)),logger[_0x4a213f(0x1d0)](_0x4a213f(0xc7),_0x362f3a)):(logHistory(_0x4a213f(0xbc),'Unknown\x20error\x20occured'+pauseBotMsg),logger[_0x4a213f(0x1d0)]('Error\x20details:',_0x362f3a),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x4c9024,_0xbc4151){const _0x21c8f8=_0x1fb5cb;return parseFloat(_0x4c9024[_0x21c8f8(0x196)](_0xbc4151));}function formatResultTruncate(_0x785009,_0x4cdc75){const _0x438ee0=_0x1fb5cb;let _0x17f5a9=formatResultString(_0x785009,0xa),_0x203de1=_0x17f5a9[_0x438ee0(0xa6)]('.');return _0x203de1!=-0x1&&(_0x17f5a9=_0x17f5a9['slice'](0x0,_0x203de1+_0x4cdc75+0x1)),Number(_0x17f5a9);}function formatResultString(_0x5b4bc3,_0x6bdb0a){const _0x59a80b=_0x1fb5cb;let _0x58d143;if(!(''+_0x5b4bc3)[_0x59a80b(0x21b)]('e'))_0x58d143=+(Math[_0x59a80b(0xb6)](_0x5b4bc3+'e+'+_0x6bdb0a)+'e-'+_0x6bdb0a);else{let _0x40e084=(''+_0x5b4bc3)[_0x59a80b(0x166)]('e'),_0x40a40e='';+_0x40e084[0x1]+_0x6bdb0a>0x0&&(_0x40a40e='+'),_0x58d143=+(Math[_0x59a80b(0xb6)](+_0x40e084[0x0]+'e'+_0x40a40e+(+_0x40e084[0x1]+_0x6bdb0a))+'e-'+_0x6bdb0a);}return Number(_0x58d143)['toFixed'](_0x6bdb0a);}function getServerTime(){const _0x208415=_0x1fb5cb,_0x3bbcaa=new Date();return _0x3bbcaa['getFullYear']()+'/'+(_0x3bbcaa['getMonth']()+0x1)[_0x208415(0x90)]()[_0x208415(0x118)](0x2,'0')+'/'+_0x3bbcaa['getDate']()['toString']()[_0x208415(0x118)](0x2,'0')+'\x20'+_0x3bbcaa[_0x208415(0x198)]()[_0x208415(0x90)]()[_0x208415(0x118)](0x2,'0')+':'+_0x3bbcaa[_0x208415(0xe6)]()[_0x208415(0x90)]()[_0x208415(0x118)](0x2,'0')+':'+_0x3bbcaa[_0x208415(0x172)]()['toString']()[_0x208415(0x118)](0x2,'0');}function getTimeStamp(){const _0xad0f6e=_0x1fb5cb,_0x4d09d7=shiftedTime();return _0x4d09d7[_0xad0f6e(0xb5)]()+'/'+(_0x4d09d7[_0xad0f6e(0x164)]()+0x1)[_0xad0f6e(0x90)]()[_0xad0f6e(0x118)](0x2,'0')+'/'+_0x4d09d7[_0xad0f6e(0x1d9)]()['toString']()[_0xad0f6e(0x118)](0x2,'0')+'\x20'+_0x4d09d7[_0xad0f6e(0x198)]()[_0xad0f6e(0x90)]()['padStart'](0x2,'0')+':'+_0x4d09d7[_0xad0f6e(0xe6)]()[_0xad0f6e(0x90)]()[_0xad0f6e(0x118)](0x2,'0')+':'+_0x4d09d7['getSeconds']()[_0xad0f6e(0x90)]()['padStart'](0x2,'0');}function getDate(){const _0x4fcf0f=_0x1fb5cb,_0xbe0597=shiftedTime();return _0xbe0597[_0x4fcf0f(0xb5)]()+'/'+(_0xbe0597[_0x4fcf0f(0x164)]()+0x1)[_0x4fcf0f(0x90)]()[_0x4fcf0f(0x118)](0x2,'0')+'/'+_0xbe0597[_0x4fcf0f(0x1d9)]()[_0x4fcf0f(0x90)]()[_0x4fcf0f(0x118)](0x2,'0');}function getHour(){const _0x237322=_0x1fb5cb,_0x4703da=shiftedTime();return _0x4703da[_0x237322(0x198)]()[_0x237322(0x90)]()['padStart'](0x2,'0');}function sleep(_0x1bcd9b){return new Promise(_0x399b45=>setTimeout(_0x399b45,_0x1bcd9b));}function shiftedTime(){const _0x1951aa=_0x1fb5cb,_0xb8b4de=new Date();let _0x5cc9b5=_0xb8b4de;if(config&&config[_0x1951aa(0x20a)]!==0x0)_0x5cc9b5=fns[_0x1951aa(0x193)](_0xb8b4de,{'hours':config[_0x1951aa(0x20a)]});return _0x5cc9b5;}function timer(_0x8acbc4){const _0x3e5c94=_0x1fb5cb,_0x42df48=new Date();!lasttime?console['log'](getTimeStamp()+_0x3e5c94(0x91),_0x8acbc4,_0x42df48):console[_0x3e5c94(0x199)](getTimeStamp()+_0x3e5c94(0x91),_0x8acbc4,(_0x42df48-lasttime)/0x3e8),lasttime=_0x42df48;}