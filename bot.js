const _0x1fea22=_0x3686;(function(_0x15b339,_0x82a7e){const _0x21e2b2=_0x3686,_0x43371a=_0x15b339();while(!![]){try{const _0x14a064=-parseInt(_0x21e2b2(0x202))/0x1+-parseInt(_0x21e2b2(0x323))/0x2+parseInt(_0x21e2b2(0x22b))/0x3*(-parseInt(_0x21e2b2(0x21f))/0x4)+parseInt(_0x21e2b2(0x1e5))/0x5+parseInt(_0x21e2b2(0x22e))/0x6+-parseInt(_0x21e2b2(0x2fa))/0x7+parseInt(_0x21e2b2(0x2ec))/0x8;if(_0x14a064===_0x82a7e)break;else _0x43371a['push'](_0x43371a['shift']());}catch(_0x4f0c47){_0x43371a['push'](_0x43371a['shift']());}}}(_0x40ca,0x8261e));const _0x346af1=function(){let _0x44c530=!![];return function(_0x20fcdf,_0x1f7c57){const _0x56223a=_0x44c530?function(){if(_0x1f7c57){const _0x343357=_0x1f7c57['apply'](_0x20fcdf,arguments);return _0x1f7c57=null,_0x343357;}}:function(){};return _0x44c530=![],_0x56223a;};}(),_0x1aa62e=_0x346af1(this,function(){const _0x5e049e=_0x3686;return _0x1aa62e[_0x5e049e(0x2d9)]()[_0x5e049e(0x31e)]('(((.+)+)+)+$')['toString']()[_0x5e049e(0x1b9)](_0x1aa62e)[_0x5e049e(0x31e)](_0x5e049e(0x29d));});_0x1aa62e();'use strict';const ccxt=require(_0x1fea22(0x238)),low=require(_0x1fea22(0x243)),FileSync=require(_0x1fea22(0x26a)),fs=require('fs'),fns=require(_0x1fea22(0x2d4)),Crypt=require(_0x1fea22(0x1f4))['Crypt'],util=require(_0x1fea22(0x30b)),argv=require(_0x1fea22(0x336))(process[_0x1fea22(0x28d)][_0x1fea22(0x308)](0x2))[_0x1fea22(0x28d)],path=require(_0x1fea22(0x1da));let exchange;global[_0x1fea22(0x1c5)]={},global[_0x1fea22(0x1f1)]={};const usdBasecoins=[_0x1fea22(0x2c9),'BUSD',_0x1fea22(0x277),_0x1fea22(0x2b5),_0x1fea22(0x1c2),'USDP'],debugging=argv['d']||![];let config,markets,allSymbols,currentCoins=[],currentCoinsAll=[],watchedSymbols=[],lastBalances,mybalances,lastPerformanceEmitted,lastPerformanceStored,startingBalances;const ORDERS=Object[_0x1fea22(0x284)]({'LOCKED':0x1,'UNLOCKING':0x2,'UNLOCKED':0x3});let lockOrders=ORDERS[_0x1fea22(0x1f2)],validateOrdersState,transactionDetected,blockTransactionDetection=![],allOpenOrders,lastOrders=[],lastFees={'recent20':[],'highest':0x0},allOrdersPlaced=!![],cooldownTracker=[],coolingDown=![];const cooldownPeriod=0xe10*0x3e8,cooldownInterval=0x5*0x3c,getBalancesInterval=0xa*0x3e8,pauseBotInterval=0x5*0x3c*0x3e8,pauseBotMsg=_0x1fea22(0x2fb)+pauseBotInterval/0xea60+'\x20minutes',loadCoinsRetryInterval=0x3c*0x3c*0x3e8,validateOrderInterval=0xa*0x3e8,validateOrderTimeout=0x3c,reloadExchangeInterval=0xc*0xe10*0x3e8,watchTransactionsInterval=0x3c*0x3e8,logPageSize=0x14,defaultFee=0.001;let initialPerformanceStored,wsEventsSet=![],coinsLoaded=![],pidBalances,pidCoinReloading,pidOrdersInitialTimeout,pidOrdersTimeout,pidReloadExchange,botPaused=![],lastCoinsToBalance='',recreationNeeded=![],exchangeStopped=![],loadingCanceled=![],loadingProgress;const maxLoadingProgress=0x2;let loading={'progress':-0x1,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},lasttime,bots=[],initCycle=0x0;const balanceUpdateDelay=0x3e8,serverversion=require(_0x1fea22(0x25a))[_0x1fea22(0x2b6)],botID=process[_0x1fea22(0x28d)][0x2]||_0x1fea22(0x27e),pattern=/^[0-9]{3}$/;!pattern[_0x1fea22(0x2c2)](botID)&&(console[_0x1fea22(0x2f1)](_0x1fea22(0x256)+botID+_0x1fea22(0x2f7)),killBot());const userID=process[_0x1fea22(0x28d)][0x3]||'',configpath=userID?_0x1fea22(0x1cb)+userID+'/':'./config/',logspath=userID?_0x1fea22(0x2bb)+userID+'/':_0x1fea22(0x2bb),loggerfile=fs[_0x1fea22(0x201)](logspath+_0x1fea22(0x23f),{'flags':'a'});!fs['existsSync'](configpath)&&fs[_0x1fea22(0x230)](configpath);!fs['existsSync'](logspath)&&fs[_0x1fea22(0x230)](logspath);const configfile=configpath+_0x1fea22(0x2c0)+botID+_0x1fea22(0x1b2),logfile=configpath+'bot-'+botID+_0x1fea22(0x28b),performancefile=configpath+_0x1fea22(0x2c0)+botID+'-performance.json',coinresultsfile=configpath+_0x1fea22(0x2c0)+botID+_0x1fea22(0x1ed),settingsfile=configpath+_0x1fea22(0x288),securefile=configpath+'bb-secure.json',configbackuppath=configpath+'/backup/',adapter=new FileSync(logfile),dbLogs=low(adapter);dbLogs[_0x1fea22(0x29f)]({'logs':[],'version':serverversion})[_0x1fea22(0x216)]();const adapter2=new FileSync(performancefile),dbPerformance=low(adapter2);dbPerformance[_0x1fea22(0x29f)]({'data':[],'version':serverversion})[_0x1fea22(0x216)]();const adapter3=new FileSync(configfile),dbConfig=low(adapter3);dbConfig['defaults']({'bot':[],'version':serverversion})[_0x1fea22(0x216)]();const adapter4=new FileSync(coinresultsfile),dbCoinResults=low(adapter4);dbCoinResults[_0x1fea22(0x29f)]({'coins':[],'version':serverversion})[_0x1fea22(0x216)]();const adapter5=new FileSync(settingsfile),dbSettings=low(adapter5),adapter6=new FileSync(securefile),dbSecure=low(adapter6);let stablecoins,lastErrorShown,lastBotPause=![],consecutivePauses=0x0;const crypt=new Crypt({'md':_0x1fea22(0x217),'rsaStandard':_0x1fea22(0x1d3)});let settings=getSettings(),secure=getSecure();oneTimeMigration(),config=getConfiguration(botID);const logger={'screen':_0x5ec11b=>{const _0x4b4ea4=_0x1fea22;console[_0x4b4ea4(0x2f1)](_0x5ec11b);},'simple':_0x1c118e=>{const _0x41654a=_0x1fea22;console[_0x41654a(0x2f1)](_0x1c118e),loggerfile[_0x41654a(0x216)](util[_0x41654a(0x2df)](_0x1c118e)+'\x0a');},'full':async(_0x2cf2ad,_0x2e5758='')=>{const _0xface0c=_0x1fea22;let _0x2773c2;if(config[_0xface0c(0x20d)])_0x2773c2=getTimeStamp()+':\x20'+config[_0xface0c(0x32d)]+_0xface0c(0x1ac)+_0x2cf2ad;else _0x2773c2=getTimeStamp()+_0xface0c(0x20f)+botID+_0xface0c(0x1ac)+_0x2cf2ad;console['log'](_0x2773c2),loggerfile['write'](util[_0xface0c(0x2df)](_0x2773c2)+'\x0a'),_0x2e5758&&(console[_0xface0c(0x2f1)](_0x2e5758),loggerfile[_0xface0c(0x216)](util[_0xface0c(0x2df)](_0x2e5758)+'\x0a'));},'debug':async(_0x863459,_0x3ba73a='')=>{const _0x129793=_0x1fea22;let _0x56b9ae;if(config['showname'])_0x56b9ae=getTimeStamp()+':\x20'+config[_0x129793(0x32d)]+_0x129793(0x218)+_0x863459;else _0x56b9ae=getTimeStamp()+_0x129793(0x20f)+botID+_0x129793(0x218)+_0x863459;if(debugging)console[_0x129793(0x2f1)](_0x56b9ae);loggerfile[_0x129793(0x216)](util[_0x129793(0x2df)](_0x56b9ae)+'\x0a');if(_0x3ba73a){if(debugging)console[_0x129793(0x2f1)](_0x3ba73a);loggerfile[_0x129793(0x216)](util[_0x129793(0x2df)](_0x3ba73a)+'\x0a');}}};process['on']('uncaughtException',function(_0x1b6541){const _0x332f59=_0x1fea22;handleError(_0x1b6541,_0x332f59(0x1b7));});settings['timeshift']!=config['timeshift']&&updateTimeshift(settings[_0x1fea22(0x2cd)]);settings[_0x1fea22(0x2a2)]!=config[_0x1fea22(0x2a2)]&&updateOnepagemode(settings[_0x1fea22(0x2a2)]);process[_0x1fea22(0x25e)]({'started':'running'},_0x47cc3d=>{}),initializeProcessListeners();function proxyEmit(_0x34416c,_0x39950b=null){const _0x115470=_0x1fea22;process[_0x115470(0x25e)]({'function':_0x34416c,'args':_0x39950b},_0x5d0bc3=>{});}function initializeProcessListeners(){const _0x19a62e=_0x1fea22;process['on'](_0x19a62e(0x272),_0xaa76e=>{const _0x541c09=_0x19a62e;switch(Object[_0x541c09(0x246)](_0xaa76e)[0x0]){case _0x541c09(0x2cd):_0xaa76e[_0x541c09(0x2cd)]!=undefined&&(settings['timeshift']=_0xaa76e[_0x541c09(0x2cd)],updateTimeshift(settings[_0x541c09(0x2cd)]));break;case _0x541c09(0x2a2):_0xaa76e['onepagemode']!=undefined&&(settings[_0x541c09(0x2a2)]=_0xaa76e[_0x541c09(0x2a2)],updateOnepagemode(settings[_0x541c09(0x2a2)]));break;case _0x541c09(0x220):_0xaa76e[_0x541c09(0x220)]!=undefined&&(bots=JSON[_0x541c09(0x22a)](_0xaa76e['bots']),proxyEmit(_0x541c09(0x220),bots));break;case _0x541c09(0x1b5):switch(_0xaa76e[_0x541c09(0x1b5)]){case _0x541c09(0x21b):initclient();break;case _0x541c09(0x313):toggleBotMode();break;case _0x541c09(0x1e0):emitHistory(_0xaa76e[_0x541c09(0x312)]);break;case _0x541c09(0x1bb):deleteHistoryAlerts(_0xaa76e[_0x541c09(0x312)]);break;case'getPortfolio':getPortfolio(_0xaa76e['args']);break;case _0x541c09(0x2f5):storeConfiguration(_0xaa76e[_0x541c09(0x312)]);break;case _0x541c09(0x1cc):storeHeadless(_0xaa76e[_0x541c09(0x312)]);break;case _0x541c09(0x208):storeFiat(_0xaa76e[_0x541c09(0x312)]);break;case'resetHistory':resetHistory();break;case _0x541c09(0x204):getStartingBalances(getNormalizedPerformance());break;case'placeOrder':placeOrder(_0xaa76e['args']);break;case _0x541c09(0x1e9):cancelLoading();break;case _0x541c09(0x29e):showConfig();break;case'sendMetricsTelegram':sendMetricsTelegram();break;case _0x541c09(0x1ec):sendPortfolioTelegram();break;}}});}reset(!![]);async function reset(_0x2b60b1=![]){const _0x45a810=_0x1fea22;logger[_0x45a810(0x2b0)](_0x45a810(0x1f9)+(_0x2b60b1?_0x45a810(0x2d3):'exchange\x20not\x20reloaded')+_0x45a810(0x1be)+config[_0x45a810(0x229)]);if(pidBalances)clearTimeout(pidBalances);if(!_0x2b60b1)lastCoinsToBalance='';coinsLoaded=![];if(config[_0x45a810(0x22f)]!=''&&config[_0x45a810(0x22f)]!=_0x45a810(0x237)){loadingProgress=0x0;if(_0x2b60b1){if(pidCoinReloading)clearTimeout(pidCoinReloading);if(pidReloadExchange)clearTimeout(pidReloadExchange);await initExchange();try{await loadSymbols();}catch(_0x3f83c6){handleErrorNoStop(_0x3f83c6,_0x45a810(0x1ab));return;}loadingProgress=0x1,setStableCoins(),initialPerformanceStored=![];}const _0x298977=await getCoins();[currentCoins,currentCoinsAll]=_0x298977,loadingProgress=maxLoadingProgress,await initwsCcxt(),exchangeStopped=![],pidReloadExchange=setTimeout(reloadExchange,reloadExchangeInterval);while(!coinsLoaded){await sleep(0x64);}logger[_0x45a810(0x2b0)](_0x45a810(0x2b4)),getBalances(![]),await updateOpenOrders();if(lastOrders[_0x45a810(0x23e)]==0x0&&allOpenOrders['length']!=0x0)restoreOrders();persistOpenOrders(lastOrders),getBalances();if(recreationNeeded)await recreateCoinResults();}}async function stopExchange(){const _0x31505c=_0x1fea22;exchangeStopped=!![];try{await exchange['close']();}catch(_0x455f10){await handleError(_0x455f10,_0x31505c(0x1cd));}}async function reloadExchange(){const _0x1f1f2c=_0x1fea22;while(lockOrders!=ORDERS['UNLOCKED']||coolingDown){await sleep(0x3c*0x3e8);}logger[_0x1f1f2c(0x2b0)](_0x1f1f2c(0x248)),exchange&&await stopExchange(),reset(!![]);}async function initExchange(_0x28c2bb=config[_0x1fea22(0x229)],_0x3eab97=config['apiKey'],_0x3e559f=config[_0x1fea22(0x2b2)],_0x437d9c=config[_0x1fea22(0x1fb)]){const _0x3166a6=_0x1fea22;exchange&&await stopExchange();!supportedExchanges()['includes'](_0x28c2bb)&&(logHistory('error','Balance\x20Bot\x20does\x20not\x20support\x20the\x20'+_0x28c2bb+_0x3166a6(0x307)),killBot());const _0x27d7f7=ccxt[_0x3166a6(0x267)][_0x28c2bb[_0x3166a6(0x339)]()];exchange=new _0x27d7f7({'apiKey':_0x3eab97,'secret':_0x3e559f,'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x3166a6(0x1b3)}});if(_0x437d9c)exchange[_0x3166a6(0x1f8)]=_0x437d9c;}function setStableCoins(){const _0x5241df=_0x1fea22;let _0xf67f12=config[_0x5241df(0x223)]==_0x5241df(0x26d)?'ETH':config[_0x5241df(0x223)]==_0x5241df(0x2b7)?_0x5241df(0x2b7):'BTC',_0x5aab2b=!allSymbols[_0x5241df(0x321)](_0xf67f12+_0x5241df(0x224))?_0x5241df(0x2b5):'USD',_0x3b679e=!allSymbols['includes'](_0xf67f12+_0x5241df(0x294))?_0x5aab2b:_0x5241df(0x324);stablecoins={'eur':{'coin':''+_0xf67f12+_0x3b679e,'symbol':_0xf67f12+'/'+_0x3b679e},'usd':{'coin':''+_0xf67f12+_0x5aab2b,'symbol':_0xf67f12+'/'+_0x5aab2b}};}async function initwsCcxt(){const _0x16e298=_0x1fea22;initCycle++;const _0x1da35e=initCycle;let _0x58f0c5=[];config[_0x16e298(0x2e7)][_0x16e298(0x2bc)](_0x47daee=>{const _0x296729=_0x16e298;if(!_0x47daee[_0x296729(0x331)]&&_0x47daee[_0x296729(0x266)]!=config[_0x296729(0x223)])_0x58f0c5[_0x296729(0x228)](_0x47daee[_0x296729(0x1c6)]);});if(!_0x58f0c5[_0x16e298(0x321)](stablecoins[_0x16e298(0x1bd)][_0x16e298(0x1c6)]))_0x58f0c5[_0x16e298(0x228)](stablecoins[_0x16e298(0x1bd)]['symbol']);if(!_0x58f0c5['includes'](stablecoins['usd'][_0x16e298(0x1c6)]))_0x58f0c5[_0x16e298(0x228)](stablecoins[_0x16e298(0x32b)][_0x16e298(0x1c6)]);if(config[_0x16e298(0x229)]['startsWith']('Binance')&&config[_0x16e298(0x223)]!=_0x16e298(0x2b7)){if(!_0x58f0c5[_0x16e298(0x321)](_0x16e298(0x2e3)+config[_0x16e298(0x223)]))_0x58f0c5[_0x16e298(0x228)]('BNB/'+config[_0x16e298(0x223)]);}loadCoins(_0x58f0c5),_0x58f0c5=validateSymbols(_0x58f0c5);const _0x5abc8f=async _0x4b4465=>{const _0x396a6f=_0x16e298;let _0x11aa99;try{const _0x3c818a=await getTickers(_0x4b4465);Object[_0x396a6f(0x29c)](_0x3c818a)[_0x396a6f(0x2bc)](_0x486103=>{const _0x100ca8=_0x396a6f;_0x11aa99=_0x486103[0x1][_0x100ca8(0x1c6)],global[_0x100ca8(0x1c5)][noslash(_0x11aa99)]=_0x486103[0x1]['last'],global['change'][_0x11aa99]=_0x486103[0x1][_0x100ca8(0x21c)];});}catch(_0x99cf41){await handleError(_0x99cf41,'initTickers()',_0x11aa99);}},_0x49afba=async _0x3d3569=>{const _0xa7c5b6=_0x16e298;while(initCycle==_0x1da35e){if(!botPaused)try{const _0x34b2e1=await exchange[_0xa7c5b6(0x1ff)](_0x3d3569);global[_0xa7c5b6(0x1c5)][noslash(_0x34b2e1[0x0][_0xa7c5b6(0x1c6)])]=_0x34b2e1[0x0]['price'],await sleep(0x3e8);}catch(_0x7553a3){if(!exchangeStopped)await handleError(_0x7553a3,_0xa7c5b6(0x30c),_0x3d3569);}else await sleep(0x64);}},_0x19c9db=async _0x44286d=>{const _0x11c59f=_0x16e298;while(initCycle==_0x1da35e){if(!botPaused){let _0x1cd580;try{await sleep(0x3c*0x3e8);const _0x3dd233=await getTickers(_0x44286d);Object['entries'](_0x3dd233)[_0x11c59f(0x2bc)](_0x402fbe=>{const _0x5b22bb=_0x11c59f;_0x1cd580=_0x402fbe[0x1]['symbol'],global[_0x5b22bb(0x1f1)][_0x1cd580]=_0x402fbe[0x1]['percentage'];});}catch(_0x13063e){if(!exchangeStopped)await handleError(_0x13063e,_0x11c59f(0x293),_0x1cd580);}}else await sleep(0x64);}},_0x1b7fde=async _0x48c533=>{const _0xac4ab8=_0x16e298;while(initCycle==_0x1da35e){if(!botPaused)try{const _0x3e60b2=await exchange[_0xac4ab8(0x259)](_0x48c533);initCycle==_0x1da35e&&_0x3e60b2[_0xac4ab8(0x2bc)](_0x53b07c=>{updateNumberCoinsCcxt(_0x53b07c);});}catch(_0x15e4d){if(!exchangeStopped)await handleError(_0x15e4d,_0xac4ab8(0x261));}else await sleep(0x64);}};_0x5abc8f(_0x58f0c5),_0x19c9db(_0x58f0c5),_0x58f0c5[_0x16e298(0x2bc)](_0x2f8bc0=>{_0x49afba(_0x2f8bc0),_0x1b7fde(_0x2f8bc0);}),!wsEventsSet&&(wsEventsSet=!![],watchTransactions());}async function getTickers(_0x2d6d9e){const _0x5c5dc3=_0x1fea22;let _0x14a468={};try{if(config[_0x5c5dc3(0x229)]!=_0x5c5dc3(0x257))_0x14a468=await exchange['fetchTickers'](_0x2d6d9e);else for(const _0x1cbd8d of _0x2d6d9e){const _0xb54473=await exchange['fetchTicker'](_0x1cbd8d);_0x14a468[_0x1cbd8d]=_0xb54473;}return _0x14a468;}catch(_0x4e459d){throw _0x4e459d;}}async function watchTransactions(){const _0x2decfd=_0x1fea22;await sleep(0x14*0x3e8),transactionDetected=![];while(!![]){if(!botPaused&&!blockTransactionDetection&&coinsLoaded)try{const _0x8712c6=await getCoins(),[_0x29f2bb,_0x5d0595]=_0x8712c6;let _0x183407=[];currentCoins['forEach'](_0x43ee2b=>{const _0x1ca8e8=_0x3686,_0x182672=_0x29f2bb[_0x1ca8e8(0x1e1)](_0x371938=>_0x371938[_0x1ca8e8(0x266)]==_0x43ee2b[_0x1ca8e8(0x266)]);if(_0x182672){if(_0x43ee2b[_0x1ca8e8(0x28a)]!=_0x182672[_0x1ca8e8(0x28a)]){let _0x137d4d;if(_0x43ee2b[_0x1ca8e8(0x266)]!=config['basecoin']){const _0x5b8c69=global[_0x1ca8e8(0x1c5)][noslash(_0x43ee2b[_0x1ca8e8(0x1c6)])];_0x137d4d=_0x43ee2b[_0x1ca8e8(0x2c5)]?0x1/_0x5b8c69:_0x5b8c69;}else _0x137d4d=0x1;_0x183407[_0x1ca8e8(0x228)]({'coin':_0x43ee2b['coin'],'symbol':_0x43ee2b['symbol'],'price':_0x137d4d,'number':Number(formatResult(_0x182672[_0x1ca8e8(0x28a)]-_0x43ee2b[_0x1ca8e8(0x28a)],0x8)),'basecoinvalue':_0x137d4d*(_0x182672[_0x1ca8e8(0x28a)]-_0x43ee2b['number'])});}}});if(_0x183407[_0x2decfd(0x23e)]==0x1&&!blockTransactionDetection){if(config[_0x2decfd(0x2a8)]){logger['debug']('Liquidity\x20change\x20|\x20basecoin\x20value:\x20'+_0x183407[0x0][_0x2decfd(0x2f0)]+_0x2decfd(0x25d)+lastFees['highest']);if(lastFees[_0x2decfd(0x1c4)]==0x0||Math['abs'](_0x183407[0x0][_0x2decfd(0x2f0)])>lastFees[_0x2decfd(0x1c4)]){delete _0x183407[0x0][_0x2decfd(0x1c6)],delete _0x183407[0x0][_0x2decfd(0x2f0)];let _0x41dcdd=[],_0x1a433c=[...config['liquidity']]||[],_0x598257=config[_0x2decfd(0x206)];_0x1a433c['sort']((_0x506b7c,_0x2a6f3d)=>_0x506b7c['date']>_0x2a6f3d[_0x2decfd(0x240)]?-0x1:_0x2a6f3d[_0x2decfd(0x240)]>_0x506b7c['date']?0x1:0x0);const _0x5be6eb=getDate();if(_0x1a433c[0x0]){const _0x3e1c78=fns[_0x2decfd(0x22a)](_0x1a433c[0x0]['date'],'yyyy/MM/dd',new Date()),_0x260d9a=fns[_0x2decfd(0x22a)](_0x5be6eb,'yyyy/MM/dd',new Date());if(fns[_0x2decfd(0x281)](_0x3e1c78,_0x260d9a)){_0x41dcdd=_0x1a433c[0x0][_0x2decfd(0x32e)];const _0xfce456=_0x41dcdd[_0x2decfd(0x1e1)](_0x141023=>_0x141023[_0x2decfd(0x266)]==_0x183407[0x0][_0x2decfd(0x266)]);_0xfce456?(_0xfce456['number']+=_0x183407[0x0]['number'],_0xfce456['number']==0x0&&(_0x41dcdd=_0x41dcdd[_0x2decfd(0x244)](_0x119800=>{return _0x119800['coin']!=_0x183407[0x0]['coin'];}))):_0x41dcdd[_0x2decfd(0x228)](_0x183407[0x0]);const _0x357948=_0x598257['find'](_0x31a78e=>_0x31a78e[_0x2decfd(0x240)]==_0x5be6eb);_0x357948[_0x2decfd(0x32e)]=_0x41dcdd;}else _0x598257[_0x2decfd(0x228)]({'date':_0x5be6eb,'changes':[_0x183407[0x0]]});}const _0x1b566e=_0x598257[_0x2decfd(0x1e1)](_0x128b74=>_0x128b74[_0x2decfd(0x240)]==_0x5be6eb);if(_0x1b566e){let _0x2910bb=!![];_0x1b566e[_0x2decfd(0x32e)][_0x2decfd(0x2bc)](_0x410603=>{if(_0x410603['number']!=0x0)_0x2910bb=![];}),_0x2910bb&&(_0x598257=_0x598257['filter'](_0x2ee4b3=>{const _0x2e2b79=_0x2decfd;return _0x2ee4b3[_0x2e2b79(0x240)]!=_0x5be6eb;}));}let _0x4b894f=dbConfig['get'](_0x2decfd(0x295))[_0x2decfd(0x1e1)]({'botID':botID})['value']();_0x4b894f&&(dbConfig[_0x2decfd(0x24e)](_0x2decfd(0x295))[_0x2decfd(0x1e1)]({'botID':botID})[_0x2decfd(0x333)]({'liquidity':_0x598257})[_0x2decfd(0x216)](),config[_0x2decfd(0x206)]=_0x598257),logHistory(_0x2decfd(0x264),_0x2decfd(0x1dd)+Math[_0x2decfd(0x241)](_0x183407[0x0][_0x2decfd(0x28a)])+'\x20'+_0x183407[0x0][_0x2decfd(0x266)]+'\x20'+(_0x183407[0x0][_0x2decfd(0x28a)]>0x0?_0x2decfd(0x320):_0x2decfd(0x2ab))+_0x2decfd(0x322)),proxyEmit('configuration',emittedConfiguration());}else logger[_0x2decfd(0x2b0)]('Fee\x20discount\x20refund\x20detected:\x20'+Math[_0x2decfd(0x241)](_0x183407[0x0][_0x2decfd(0x28a)])+'\x20'+_0x183407[0x0][_0x2decfd(0x266)]+'\x20'+(_0x183407[0x0][_0x2decfd(0x28a)]>0x0?_0x2decfd(0x320):_0x2decfd(0x2ab)));transactionDetected=!![];}else logger['debug']('Portfolio\x20change\x20detected:\x20'+Math['abs'](_0x183407[0x0][_0x2decfd(0x28a)])+'\x20'+_0x183407[0x0][_0x2decfd(0x266)]+'\x20'+(_0x183407[0x0][_0x2decfd(0x28a)]>0x0?_0x2decfd(0x320):_0x2decfd(0x2ab))+_0x2decfd(0x292));}currentCoins=_0x29f2bb,currentCoinsAll=_0x5d0595,await sleep(watchTransactionsInterval);}catch(_0x7bc35d){if(!exchangeStopped)await handleError(_0x7bc35d,'watchTransactions()');}else await sleep(0x64);}}async function loadSymbols(){const _0x308480=_0x1fea22;try{markets=await exchange[_0x308480(0x251)](),allSymbols=[],Object[_0x308480(0x29c)](markets)['forEach'](_0x246178=>{const _0x19d459=_0x308480;_0x246178[0x1][_0x19d459(0x273)]&&_0x246178[0x1][_0x19d459(0x1b3)]&&allSymbols[_0x19d459(0x228)](_0x246178[0x0]);});}catch(_0x58a700){throw _0x58a700;}}function validateSymbols(_0x1b21df){const _0xa322ea=_0x1fea22;let _0x390d80=[];return _0x1b21df[_0xa322ea(0x2bc)](_0x4b31be=>{const _0x807699=_0xa322ea;!allSymbols[_0x807699(0x321)](_0x4b31be)?logHistory(_0x807699(0x29b),_0x807699(0x211)+_0x4b31be+_0x807699(0x2bf)):_0x390d80['push'](_0x4b31be);}),_0x390d80;}async function initclient(){const _0x1b1669=_0x1fea22;proxyEmit('configuration',emittedConfiguration()),proxyEmit(_0x1b1669(0x1af),supportedExchanges()),emitLoadingProgress();while(!coinsLoaded){await sleep(0xc8);}if(lastBalances)proxyEmit(_0x1b1669(0x26f),{'serverversion':serverversion,'balances':lastBalances});emitHistory();const _0x36ed59=getNormalizedPerformance();emitPerformance(_0x36ed59),getStartingBalances(_0x36ed59);}async function toggleBotMode(){const _0x173118=_0x1fea22;let _0x514b19=dbConfig['get'](_0x173118(0x295))[_0x173118(0x1e1)]({'botID':botID})['value']();if(_0x514b19){const _0x257614=!_0x514b19[_0x173118(0x1ca)];dbConfig[_0x173118(0x24e)](_0x173118(0x295))[_0x173118(0x1e1)]({'botID':botID})[_0x173118(0x333)]({'headless':_0x257614})['write'](),config[_0x173118(0x1ca)]=_0x257614,proxyEmit(_0x173118(0x1c0),emittedConfiguration()),updateBotManager();}}function updateBotManager(){const _0x111991=_0x1fea22;process['send']({'updatebotmanager':!![]},_0x2d2952=>{}),logger[_0x111991(0x2b0)]('Headless:\x20'+config['headless']);}async function loadCoins(_0x44fc24){const _0x4e6cf4=_0x1fea22;loading={'progress':0x0,'remainingSymbols':[],'timeout':![],'cancel':![],'error':![]},emitLoadingProgress();let _0x5e1798,_0x17a1ac=0x0,_0x8d20e6=0x0;_0x44fc24[_0x4e6cf4(0x2bc)](_0x16ee1b=>{const _0x541457=_0x4e6cf4;loading[_0x541457(0x1c1)][_0x541457(0x228)](_0x16ee1b);}),loadingCanceled=![];let _0x526366=![];while(_0x5e1798!=_0x44fc24['length']+maxLoadingProgress){_0x5e1798=loadingProgress,_0x44fc24[_0x4e6cf4(0x2bc)](_0x4b9341=>{const _0x11bab3=_0x4e6cf4;if(global[_0x11bab3(0x1c5)][noslash(_0x4b9341)]){loading[_0x11bab3(0x1c1)]=loading[_0x11bab3(0x1c1)][_0x11bab3(0x244)](_0x772d36=>_0x772d36!=_0x4b9341);if(!watchedSymbols[_0x11bab3(0x321)](_0x4b9341))watchedSymbols[_0x11bab3(0x228)](_0x4b9341);_0x5e1798++;}}),loading[_0x4e6cf4(0x254)]=Math[_0x4e6cf4(0x24d)](_0x5e1798/(_0x44fc24[_0x4e6cf4(0x23e)]+maxLoadingProgress)*0x64);loading[_0x4e6cf4(0x254)]!=0x64&&(_0x8d20e6>0x1e*0x5&&(loading['timeout']=!![],emitLoadingProgress()),_0x8d20e6>0x78*0x5&&!_0x526366&&(_0x526366=!![],logHistory(_0x4e6cf4(0x29b),'Failed\x20to\x20load\x20coin\x20data\x20for\x20'+loading[_0x4e6cf4(0x1c1)]['join'](',\x20')+_0x4e6cf4(0x2ae)),logHistory('error',_0x4e6cf4(0x2a6)+loadCoinsRetryInterval/0xea60+_0x4e6cf4(0x285)),loadingCanceled=!![],pidCoinReloading=setTimeout(()=>{const _0x1e3dd7=_0x4e6cf4;process[_0x1e3dd7(0x25e)]({'stop':_0x1e3dd7(0x1d8)},_0x5ae9f0=>{});},loadCoinsRetryInterval)));if(loadingCanceled){loading[_0x4e6cf4(0x1f6)]=!![],emitLoadingProgress();break;}else _0x17a1ac!=loading[_0x4e6cf4(0x254)]&&(_0x17a1ac=loading['progress'],emitLoadingProgress()),_0x8d20e6++,await sleep(0xc8);}_0x5e1798==_0x44fc24[_0x4e6cf4(0x23e)]+maxLoadingProgress&&(coinsLoaded=!![],process[_0x4e6cf4(0x25e)]({'status':_0x4e6cf4(0x1ee),'live':_0x4e6cf4(0x30f)},_0x3de4b5=>{}),_0x526366&&logHistory(_0x4e6cf4(0x264),'All\x20coin\x20data\x20loaded\x20-\x20bot\x20started'));}function cancelLoading(){loadingCanceled=!![];}function showConfig(){const _0x4cb740=_0x1fea22;proxyEmit(_0x4cb740(0x1c0),{...emittedConfiguration(),'configstate':'loading-canceled'});}function emitLoadingProgress(){const _0x434962=_0x1fea22;proxyEmit(_0x434962(0x1d6),loading);}async function getFiat(){const _0x52b7e1=_0x1fea22;let _0x45276f=global[_0x52b7e1(0x1c5)][stablecoins[_0x52b7e1(0x1bd)]['coin']],_0x5667da=global['ticker'][stablecoins[_0x52b7e1(0x32b)][_0x52b7e1(0x266)]];return{'eur':Number(_0x45276f),'usd':Number(_0x5667da)};}function capitalize(_0x45d519){const _0x5ae4c2=_0x1fea22;return _0x45d519[_0x5ae4c2(0x1b8)](0x0,0x1)[_0x5ae4c2(0x1e7)]()+_0x45d519[_0x5ae4c2(0x1b8)](0x1);}function supportedExchanges(){const _0x1df91b=_0x1fea22,_0x15a137=['ws',_0x1df91b(0x28f),_0x1df91b(0x304),'watchTrades',_0x1df91b(0x259),_0x1df91b(0x227),_0x1df91b(0x31c),_0x1df91b(0x1e2),_0x1df91b(0x283),_0x1df91b(0x30e)];let _0x3b55ae=[],_0x2aabbb=[],_0x163917=ccxt['pro']['exchanges'];_0x163917['forEach'](_0x432d68=>{const _0x320497=_0x1df91b;try{const _0x1636e0=new ccxt[(_0x320497(0x267))][_0x432d68]();_0x2aabbb[_0x320497(0x228)](_0x1636e0);}catch(_0x2d3ea3){}}),_0x2aabbb[_0x1df91b(0x2bc)](_0x14e5a2=>{const _0x5ea389=_0x1df91b;let _0x5acb18=0x0;_0x15a137[_0x5ea389(0x2bc)](_0x1eed9b=>{const _0x5ac7b6=_0x5ea389;_0x1eed9b in _0x14e5a2[_0x5ac7b6(0x215)]&&_0x14e5a2[_0x5ac7b6(0x215)][_0x1eed9b]&&_0x5acb18++;}),_0x5acb18==_0x15a137[_0x5ea389(0x23e)]&&_0x3b55ae[_0x5ea389(0x228)](capitalize(_0x14e5a2['id']));});let _0xeaa6cb=[];return _0x163917[_0x1df91b(0x2bc)](_0x2348ec=>{const _0x52ec01=_0x1df91b;_0x2348ec=capitalize(_0x2348ec);if(!_0x3b55ae[_0x52ec01(0x321)](_0x2348ec))_0xeaa6cb['push'](_0x2348ec);}),_0x3b55ae;}function setStartDatePerformance(){const _0xe82585=_0x1fea22;if(config&&config[_0xe82585(0x206)][0x0][_0xe82585(0x32e)]['length']!=0x0){const _0x250951=config[_0xe82585(0x206)][0x0][_0xe82585(0x32e)];dbPerformance[_0xe82585(0x24e)]('data')['find']({'date':config[_0xe82585(0x31d)]})[_0xe82585(0x333)]({'coins':_0x250951})['write']();}}async function recreateCoinResults(){const _0x177a8c=_0x1fea22;let _0xe3558d,_0x180db9=[];try{const _0x39a728=fns['format'](fns[_0x177a8c(0x2f6)](config[_0x177a8c(0x31d)][_0x177a8c(0x2c1)](/\//g,'-')),'yyyy-MM-dd\x27T\x27HH:mm:ss');for(const _0x21a59c of currentCoins){if(_0x21a59c[_0x177a8c(0x266)]!=config['basecoin']){let _0x288df0=0x0,_0x429635,_0x14a5fa;_0xe3558d=await getAllEventOrders(_0x21a59c['symbol']);if(_0xe3558d[_0x177a8c(0x23e)]>0x0)_0xe3558d[_0x177a8c(0x2bc)](_0x44b7d3=>{const _0x571aeb=_0x177a8c,_0x5ad3ae=_0x21a59c[_0x571aeb(0x1c6)][_0x571aeb(0x321)](config['basecoin']+'/');_0x180db9['push']({'datetime':_0x44b7d3[_0x571aeb(0x1ad)],'coin':_0x21a59c[_0x571aeb(0x266)],'symbol':_0x21a59c[_0x571aeb(0x1c6)],'side':_0x44b7d3[_0x571aeb(0x29a)],'reverse':_0x5ad3ae,'amount':formatResult(_0x44b7d3[_0x571aeb(0x2af)],0x8),'filled':formatResult(_0x44b7d3[_0x571aeb(0x2af)],0x8),'price':formatResult(_0x44b7d3[_0x571aeb(0x2c8)],0x8)}),_0x288df0=_0x44b7d3[_0x571aeb(0x29a)]==_0x571aeb(0x27d)?_0x288df0+_0x44b7d3[_0x571aeb(0x2af)]:_0x288df0-_0x44b7d3['filled'];if(!_0x14a5fa)_0x14a5fa=_0x44b7d3[_0x571aeb(0x2c8)];});_0x429635=_0x21a59c['number']-_0x288df0;let _0x4b6313;config[_0x177a8c(0x206)]['forEach'](_0x4c68f1=>{const _0xad2f8a=_0x177a8c;!_0x4b6313&&(_0x4b6313=_0x4c68f1[_0xad2f8a(0x32e)][_0xad2f8a(0x1e1)](_0x51a107=>_0x51a107['coin']==_0x21a59c[_0xad2f8a(0x266)]),_0x4b6313&&(_0x429635=_0x4b6313['number'],_0x14a5fa=_0x4b6313[_0xad2f8a(0x2c8)]));});let _0x1c81a6=dbCoinResults[_0x177a8c(0x24e)]('coins')[_0x177a8c(0x1e1)]({'coin':_0x21a59c['coin']})[_0x177a8c(0x23c)]();_0x1c81a6={'coin':_0x21a59c[_0x177a8c(0x266)],'number':_0x429635,'breakeven':_0x14a5fa,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0},dbCoinResults[_0x177a8c(0x24e)](_0x177a8c(0x1db))[_0x177a8c(0x1e1)]({'coin':_0x21a59c[_0x177a8c(0x266)]})[_0x177a8c(0x333)](_0x1c81a6)['write']();}}_0x180db9[_0x177a8c(0x249)]((_0x32fad6,_0x2b6a07)=>_0x32fad6[_0x177a8c(0x1ad)]>_0x2b6a07['datetime']?0x1:_0x2b6a07[_0x177a8c(0x1ad)]>_0x32fad6[_0x177a8c(0x1ad)]?-0x1:0x0);let _0x483c59=0x0;for(let _0x1279f8 of _0x180db9){await updateCoinResults(_0x1279f8,!![]);}}catch(_0x45f785){await handleError(_0x45f785,_0x177a8c(0x2f4));}}async function getAllEventOrders(_0x122733){const _0x37e01e=_0x1fea22;let _0x2d05e1=[],_0x4bed28=dbLogs['get'](_0x37e01e(0x2cc))[_0x37e01e(0x244)](_0xca2644=>{const _0x4193ee=_0x37e01e,_0x282a3f=_0xca2644[_0x4193ee(0x2fd)]['toLowerCase']();return _0x282a3f[_0x4193ee(0x321)](_0x122733[_0x4193ee(0x339)]())&&(_0x282a3f[_0x4193ee(0x321)]('market')&&_0x282a3f[_0x4193ee(0x321)]('order')||_0x282a3f[_0x4193ee(0x321)]('filled')&&_0x282a3f[_0x4193ee(0x321)](_0x4193ee(0x2a4)));})['sortBy'](_0x37e01e(0x214))[_0x37e01e(0x23c)]();return _0x4bed28[_0x37e01e(0x2bc)](_0x4e8883=>{const _0xff31bd=_0x37e01e,_0x396abf=_0x4e8883[_0xff31bd(0x2fd)][_0xff31bd(0x321)](_0xff31bd(0x265))?'sell':_0xff31bd(0x27d),_0x1b2c51=/#([0-9]|\.)+\s/i,_0x221dc4=Number(_0x1b2c51['exec'](_0x4e8883[_0xff31bd(0x2fd)])[0x0][_0xff31bd(0x308)](0x1)),_0x114391=/@([0-9]|\.)+$/i,_0x4a6230=Number(_0x114391[_0xff31bd(0x31f)](_0x4e8883[_0xff31bd(0x2fd)])[0x0][_0xff31bd(0x308)](0x1));_0x2d05e1[_0xff31bd(0x228)]({'datetime':_0x4e8883[_0xff31bd(0x214)],'coin':symbolToCoin(_0x122733),'symbol':_0x122733,'side':_0x396abf,'amount':_0x221dc4,'filled':_0x221dc4,'price':_0x4a6230});}),_0x2d05e1;}async function getAllOrders(_0x24d2d2,_0xcb65c8){const _0x1eaeed=_0x1fea22;let _0x29582a=[];while(_0xcb65c8<exchange['milliseconds']()){const _0x1b22a8=0x1f4;try{const _0x4a9f8a=await exchange['fetchClosedOrders'](_0x24d2d2,_0xcb65c8,_0x1b22a8);if(_0x4a9f8a[_0x1eaeed(0x23e)])_0xcb65c8=_0x4a9f8a[_0x4a9f8a[_0x1eaeed(0x23e)]-0x1][_0x1eaeed(0x213)]+0x1,_0x29582a=_0x29582a[_0x1eaeed(0x1bf)](_0x4a9f8a);else break;}catch(_0x248bae){await handleError(_0x248bae,_0x1eaeed(0x25f),_0x24d2d2);}}return _0x29582a;}async function validate24hChanges(){const _0x7b0600=_0x1fea22;for(const _0x16253f of currentCoins){if(_0x16253f[_0x7b0600(0x266)]!=config[_0x7b0600(0x223)]){let _0x3ee7a2;_0x16253f[_0x7b0600(0x2c5)]?_0x3ee7a2=formatResult((0x1/(global[_0x7b0600(0x1f1)][noslash(_0x16253f['symbol'])]/0x64+0x1)-0x1)*0x64,0x3):_0x3ee7a2=global[_0x7b0600(0x1f1)][noslash(_0x16253f['symbol'])],_0x3ee7a2<config[_0x7b0600(0x28e)]&&(logHistory(_0x7b0600(0x29b),_0x16253f[_0x7b0600(0x266)]+_0x7b0600(0x326)+_0x3ee7a2+'%'),logHistory(_0x7b0600(0x29b),_0x7b0600(0x236)),logHistory(_0x7b0600(0x29b),_0x7b0600(0x200)),await storeHeadless({'headless':![]}));}}}function isOlderVersion(_0x5b6fcb,_0x4e78de){const _0x3fd37=_0x1fea22;if(!_0x5b6fcb)return!![];const _0x3da82c=_0x4e78de[_0x3fd37(0x334)]('.'),_0xd39bac=_0x5b6fcb['split']('.');for(var _0x49fca9=0x0;_0x49fca9<_0xd39bac[_0x3fd37(0x23e)];_0x49fca9++){const _0x226105=~~_0xd39bac[_0x49fca9],_0x10d648=~~_0x3da82c[_0x49fca9];if(_0x226105<_0x10d648)return!![];if(_0x226105>_0x10d648)return![];}return![];}async function oneTimeMigration(){const _0x32241a=_0x1fea22;let _0x1d7b06=dbLogs[_0x32241a(0x24e)](_0x32241a(0x2b6))[_0x32241a(0x23c)]();if(isOlderVersion(_0x1d7b06,_0x32241a(0x1d1))){let _0x22b3e5=[];const _0x350042=dbLogs[_0x32241a(0x24e)](_0x32241a(0x2cc))[_0x32241a(0x23c)]();_0x350042[_0x32241a(0x2bc)](_0x26d359=>{const _0x26147e=_0x32241a;_0x22b3e5[_0x26147e(0x228)]({'time':_0x26d359[_0x26147e(0x214)],'type':_0x26d359[_0x26147e(0x1bc)],'event':_0x26d359[_0x26147e(0x2fd)]});}),dbLogs[_0x32241a(0x24e)]('logs')[_0x32241a(0x333)](_0x22b3e5)[_0x32241a(0x216)]();}let _0xe025da=dbConfig[_0x32241a(0x24e)](_0x32241a(0x2b6))[_0x32241a(0x23c)]();if(isOlderVersion(_0xe025da,_0x32241a(0x1d1))){let _0x26c3ff=dbConfig[_0x32241a(0x24e)](_0x32241a(0x295))[_0x32241a(0x1e1)]({'botID':botID})[_0x32241a(0x23c)]();if(_0x26c3ff){let _0x32aee1=[];_0x26c3ff['portfolio'][_0x32241a(0x2bc)](_0x3821ab=>{const _0x484885=_0x32241a;_0x32aee1[_0x484885(0x228)]({'coin':_0x3821ab[_0x484885(0x266)],'number':_0x3821ab['startnumber'],'price':_0x3821ab['startprice']}),delete _0x3821ab[_0x484885(0x21a)],delete _0x3821ab[_0x484885(0x2d0)];});if(_0x32aee1[_0x32241a(0x23e)]!==0x0)fs['writeFile'](configbackuppath+(_0x32241a(0x1fd)+botID+'.json'),JSON['stringify'](_0x32aee1,null,0x4),function(_0x4d4327){if(_0x4d4327){}});const _0x39ee93=(_0xbd2ece,_0x58e7e3)=>{const _0x1bd1d2=_0x32241a;let _0x4e5df5=[];_0x58e7e3[_0x1bd1d2(0x2bc)](_0x290a6c=>{const _0x197e44=_0x1bd1d2,_0x18861f=_0xbd2ece[_0x197e44(0x1e1)](_0x56b86c=>_0x56b86c[_0x197e44(0x266)]==_0x290a6c['coin']);if(!_0x18861f)_0x4e5df5[_0x197e44(0x228)](_0x290a6c);});let _0xb7d2ba=[];return _0xbd2ece[_0x1bd1d2(0x2bc)](_0x54429f=>{const _0xd7ee63=_0x1bd1d2,_0x5e03ea=_0x58e7e3[_0xd7ee63(0x1e1)](_0x9cebc=>_0x9cebc[_0xd7ee63(0x266)]==_0x54429f[_0xd7ee63(0x266)]);if(!_0x5e03ea||_0x5e03ea['number']==0x0&&_0x54429f[_0xd7ee63(0x28a)]!=0x0)_0xb7d2ba[_0xd7ee63(0x228)](_0x54429f);}),{'missingDay1':_0x4e5df5,'notInDay2':_0xb7d2ba};},_0x1c1602=dbPerformance[_0x32241a(0x24e)](_0x32241a(0x329))[_0x32241a(0x337)]()[_0x32241a(0x23c)]();if(_0x1c1602[_0x32241a(0x23e)]>0x1){const {missingDay1:_0x58952f,notInDay2:_0x280cb9}=_0x39ee93(_0x32aee1,_0x1c1602[0x1][_0x32241a(0x1db)]);_0x32aee1=[..._0x32aee1,..._0x58952f],_0x280cb9[_0x32241a(0x2bc)](_0x47f290=>{const _0x4738dc=_0x32241a;let _0x4eec2a=_0x32aee1[_0x4738dc(0x2a7)](_0x3ab728=>_0x3ab728[_0x4738dc(0x266)]==_0x47f290[_0x4738dc(0x266)]);_0x4eec2a!=-0x1&&_0x32aee1[_0x4738dc(0x1b1)](_0x4eec2a,0x1);});}_0x32aee1[_0x32241a(0x249)]((_0x543c63,_0x565648)=>_0x543c63[_0x32241a(0x266)]>_0x565648[_0x32241a(0x266)]?0x1:_0x565648['coin']>_0x543c63[_0x32241a(0x266)]?-0x1:0x0);let _0x5eb213=[{'date':_0x26c3ff[_0x32241a(0x31d)],'changes':_0x32aee1}];_0x1c1602[_0x32241a(0x23e)]>0x2&&_0x1c1602[_0x32241a(0x2bc)]((_0x598b20,_0xc2a223)=>{const _0xa69049=_0x32241a;if(_0xc2a223>0x0&&_0xc2a223<_0x1c1602[_0xa69049(0x23e)]-0x1){const {missingDay1:_0x32c950,notInDay2:_0xc530e1}=_0x39ee93(_0x1c1602[_0xc2a223]['coins'],_0x1c1602[_0xc2a223+0x1][_0xa69049(0x1db)]);_0x32aee1=[],(_0x32c950['length']!=0x0||_0xc530e1[_0xa69049(0x23e)]!=0x0)&&(_0x32c950[_0xa69049(0x23e)]!=0x0&&_0x32aee1['push'](..._0x32c950),_0xc530e1[_0xa69049(0x23e)]!=0x0&&(_0xc530e1[_0xa69049(0x2bc)](_0x316fcf=>{const _0x552014=_0xa69049;_0x316fcf[_0x552014(0x28a)]=-_0x316fcf[_0x552014(0x28a)];}),_0x32aee1['push'](..._0xc530e1)),_0x32aee1['sort']((_0x14d1dc,_0x339212)=>_0x14d1dc[_0xa69049(0x266)]>_0x339212[_0xa69049(0x266)]?0x1:_0x339212[_0xa69049(0x266)]>_0x14d1dc['coin']?-0x1:0x0),_0x5eb213[_0xa69049(0x228)]({'date':_0x1c1602[_0xc2a223+0x1][_0xa69049(0x240)],'changes':_0x32aee1}));}}),dbConfig[_0x32241a(0x24e)](_0x32241a(0x295))[_0x32241a(0x1e1)]({'botID':botID})[_0x32241a(0x333)]({..._0x26c3ff,'liquidity':_0x5eb213})['write']();}}if(isOlderVersion(_0xe025da,_0x32241a(0x221))){let _0x427d96=dbConfig['get'](_0x32241a(0x295))[_0x32241a(0x1e1)]({'botID':botID})[_0x32241a(0x23c)]();if(_0x427d96){const _0x3779bc=_0x427d96[_0x32241a(0x229)],_0x19ff66=_0x3779bc?capitalize(_0x3779bc):_0x32241a(0x2aa);dbConfig['get'](_0x32241a(0x295))[_0x32241a(0x1e1)]({'botID':botID})[_0x32241a(0x333)]({'exchange':_0x19ff66})['write']();}}let _0x1a9531=dbPerformance[_0x32241a(0x24e)]('version')[_0x32241a(0x23c)]();isOlderVersion(_0x1a9531,_0x32241a(0x1d1))&&setStartDatePerformance();let _0x3e6b26=dbCoinResults['get'](_0x32241a(0x2b6))['value']();if(isOlderVersion(_0x3e6b26,'2.5.0')){let _0x1bf14c=dbCoinResults[_0x32241a(0x24e)]('coins')[_0x32241a(0x23c)]();if(_0x1bf14c[_0x32241a(0x23e)]!=0x0)recreationNeeded=!![];}updateFileVersions();}function updateFileVersions(){const _0x74ec2d=_0x1fea22;dbConfig['set'](_0x74ec2d(0x2b6),serverversion)[_0x74ec2d(0x216)](),dbPerformance[_0x74ec2d(0x233)](_0x74ec2d(0x2b6),serverversion)['write'](),dbLogs[_0x74ec2d(0x233)](_0x74ec2d(0x2b6),serverversion)[_0x74ec2d(0x216)](),dbCoinResults[_0x74ec2d(0x233)](_0x74ec2d(0x2b6),serverversion)[_0x74ec2d(0x216)]();}function getConfiguration(_0x35c64e){const _0x495006=_0x1fea22;let _0xb3bc65=dbConfig['get']('bot')[_0x495006(0x1e1)]({'botID':_0x35c64e})[_0x495006(0x23c)]();if(_0xb3bc65){let _0x107af7=![];typeof _0xb3bc65[_0x495006(0x286)]==_0x495006(0x32a)&&(_0xb3bc65={..._0xb3bc65,'threshold':Number(_0xb3bc65[_0x495006(0x286)])},_0x107af7=!![]),_0xb3bc65[_0x495006(0x28e)]==undefined&&(_0xb3bc65={..._0xb3bc65,'change24h':-0x14},_0x107af7=!![]),_0xb3bc65[_0x495006(0x25c)]==undefined&&(_0xb3bc65={..._0xb3bc65,'fiat':_0x495006(0x2c9)},_0x107af7=!![]),_0xb3bc65[_0x495006(0x2a2)]==undefined&&(_0xb3bc65={..._0xb3bc65,'onepagemode':settings[_0x495006(0x2a2)]},_0x107af7=!![]),_0xb3bc65[_0x495006(0x1b6)]==undefined&&(_0xb3bc65={..._0xb3bc65,'colorscheme':'red_yellow_blue'},_0x107af7=!![]),_0xb3bc65[_0x495006(0x2a8)]==undefined&&(_0xb3bc65={..._0xb3bc65,'autoliquidity':!![]},_0x107af7=!![]),_0x107af7&&(_0xb3bc65={'botID':_0xb3bc65[_0x495006(0x2f2)],'exchange':_0xb3bc65[_0x495006(0x229)],'apiKey':_0xb3bc65[_0x495006(0x22f)],'apiSecret':_0xb3bc65['apiSecret'],'apiPassword':_0xb3bc65[_0x495006(0x1fb)],'basecoin':_0xb3bc65['basecoin'],'botname':_0xb3bc65[_0x495006(0x32d)],'showname':_0xb3bc65['showname'],'threshold':_0xb3bc65[_0x495006(0x286)],'ordertype':_0xb3bc65[_0x495006(0x1f0)],'timeout':_0xb3bc65[_0x495006(0x1ce)],'fiat':_0xb3bc65[_0x495006(0x25c)],'startdate':_0xb3bc65[_0x495006(0x31d)],'recreate':_0xb3bc65[_0x495006(0x1c3)],'timeshift':_0xb3bc65[_0x495006(0x2cd)],'onepagemode':_0xb3bc65[_0x495006(0x2a2)],'headless':_0xb3bc65[_0x495006(0x1ca)],'cooldown':_0xb3bc65[_0x495006(0x2f8)],'change24h':_0xb3bc65['change24h'],'emojibuy':_0xb3bc65['emojibuy'],'emojisell':_0xb3bc65[_0x495006(0x1d9)],'colorscheme':_0xb3bc65[_0x495006(0x1b6)],'portfolio':_0xb3bc65[_0x495006(0x2e7)],'autoliquidity':_0xb3bc65[_0x495006(0x2a8)],'liquidity':_0xb3bc65[_0x495006(0x206)],'openOrders':_0xb3bc65[_0x495006(0x1b0)]},dbConfig[_0x495006(0x24e)](_0x495006(0x295))[_0x495006(0x2ad)]()['write'](),dbConfig[_0x495006(0x24e)](_0x495006(0x295))[_0x495006(0x228)](_0xb3bc65)[_0x495006(0x216)]());}else _0xb3bc65={'botID':_0x35c64e,'exchange':'','apiKey':'','apiSecret':'','apiPassword':null,'basecoin':'','botname':_0x495006(0x2d8)+_0x35c64e,'showname':![],'threshold':0x3,'ordertype':'market','timeout':0x14,'fiat':_0x495006(0x2c9),'startdate':getDate(),'recreate':![],'timeshift':settings[_0x495006(0x2cd)],'onepagemode':settings[_0x495006(0x2a2)],'headless':![],'cooldown':0xa,'change24h':-0x14,'emojibuy':'','emojisell':'','colorscheme':_0x495006(0x255),'portfolio':[],'autoliquidity':!![],'liquidity':[{'date':getDate(),'changes':[]}],'openOrders':[]};return _0xb3bc65;}function emittedConfiguration(){const _0x402091=_0x1fea22;let _0x27bc68;if(config['apiKey']=='')_0x27bc68={...config,'configstate':_0x402091(0x279)};else config[_0x402091(0x22f)]=='***'?_0x27bc68={...config,'configstate':_0x402091(0x2c4)}:(_0x27bc68={...config,'apiKey':_0x402091(0x31a),'apiSecret':_0x402091(0x31a)},config[_0x402091(0x1fb)]&&(_0x27bc68[_0x402091(0x1fb)]='************'));return _0x27bc68;}function getSettings(){const _0x34ad8e=_0x1fea22;return dbSettings['get'](_0x34ad8e(0x250))[_0x34ad8e(0x23c)]();}function _0x3686(_0x1177df,_0x294316){const _0x2faef4=_0x40ca();return _0x3686=function(_0x1aa62e,_0x346af1){_0x1aa62e=_0x1aa62e-0x1ab;let _0x40ca5e=_0x2faef4[_0x1aa62e];return _0x40ca5e;},_0x3686(_0x1177df,_0x294316);}function getSecure(){const _0x44a350=_0x1fea22;return dbSecure[_0x44a350(0x24e)]('secure')[_0x44a350(0x23c)]()||{};}function updateTimeshift(_0x7a29aa){const _0x864c3=_0x1fea22;let _0x106e25=dbConfig['get'](_0x864c3(0x295))['find']({'botID':botID})[_0x864c3(0x23c)]();_0x106e25&&dbConfig[_0x864c3(0x24e)](_0x864c3(0x295))[_0x864c3(0x1e1)]({'botID':botID})[_0x864c3(0x333)]({'timeshift':_0x7a29aa})[_0x864c3(0x216)](),config[_0x864c3(0x2cd)]=_0x7a29aa,proxyEmit(_0x864c3(0x1c0),emittedConfiguration());}function updateOnepagemode(_0x41b4b8){const _0x5c1610=_0x1fea22;let _0x1450ac=dbConfig[_0x5c1610(0x24e)](_0x5c1610(0x295))[_0x5c1610(0x1e1)]({'botID':botID})[_0x5c1610(0x23c)]();_0x1450ac&&dbConfig['get']('bot')['find']({'botID':botID})[_0x5c1610(0x333)]({'onepagemode':_0x41b4b8})[_0x5c1610(0x216)](),config[_0x5c1610(0x2a2)]=_0x41b4b8,proxyEmit(_0x5c1610(0x1c0),emittedConfiguration());}async function storeConfiguration(_0x9a3f5b){const _0x3acb80=_0x1fea22;logger['debug'](_0x3acb80(0x2a1));if(pidBalances)clearTimeout(pidBalances);blockTransactionDetection=!![],logger[_0x3acb80(0x2b0)]('Transaction\x20detection\x20blocked');let _0x53f071=![],_0x1c64a2=![],_0xe75d2f=[];_0x9a3f5b[_0x3acb80(0x2e7)][_0x3acb80(0x2bc)](_0x417a38=>{const _0x5ec141=_0x3acb80;if(!_0x417a38['excluded']&&_0x417a38['coin']!=_0x9a3f5b[_0x5ec141(0x223)])_0xe75d2f[_0x5ec141(0x228)](_0x417a38['symbol']);}),_0xe75d2f[_0x3acb80(0x2bc)](_0x7f9c23=>{const _0x9508b1=_0x3acb80,_0x242389=currentCoins[_0x9508b1(0x1e1)](_0xb7765d=>_0xb7765d['symbol']==_0x7f9c23);!_0x242389&&(_0x53f071=!![]);}),currentCoins[_0x3acb80(0x2bc)](_0x36243c=>{const _0x13567e=_0x3acb80;if(_0x36243c[_0x13567e(0x266)]!=config[_0x13567e(0x223)]){const _0x2de2bc=_0xe75d2f['find'](_0x192acc=>_0x192acc==_0x36243c[_0x13567e(0x1c6)]);!_0x2de2bc&&(_0x53f071=!![]);}}),_0x9a3f5b[_0x3acb80(0x2e7)][_0x3acb80(0x2bc)](_0x5d395c=>{const _0x50d2a1=_0x3acb80,_0x3053c2=config[_0x50d2a1(0x2e7)][_0x50d2a1(0x1e1)](_0x5dc124=>_0x5dc124[_0x50d2a1(0x266)]==_0x5d395c['coin']);if(_0x3053c2&&_0x5d395c[_0x50d2a1(0x309)]!=_0x3053c2['offset'])_0x1c64a2=!![];});let _0x35065b=dbConfig[_0x3acb80(0x24e)]('bot')[_0x3acb80(0x1e1)]({'botID':botID})['value']();_0x9a3f5b={..._0x9a3f5b,'apiKey':crypt[_0x3acb80(0x2eb)](secure[_0x3acb80(0x231)],_0x9a3f5b[_0x3acb80(0x22f)])[_0x3acb80(0x272)],'apiSecret':crypt[_0x3acb80(0x2eb)](secure[_0x3acb80(0x231)],_0x9a3f5b[_0x3acb80(0x2b2)])['message']};_0x9a3f5b[_0x3acb80(0x1fb)]&&(_0x9a3f5b[_0x3acb80(0x1fb)]=crypt[_0x3acb80(0x2eb)](secure[_0x3acb80(0x231)],_0x9a3f5b[_0x3acb80(0x1fb)])[_0x3acb80(0x272)]);let _0x8b6dd3=![];if(_0x35065b){_0x9a3f5b[_0x3acb80(0x22f)]==_0x3acb80(0x31a)?_0x9a3f5b['apiKey']=config[_0x3acb80(0x22f)]:_0x8b6dd3=!![];_0x9a3f5b[_0x3acb80(0x2b2)]==_0x3acb80(0x31a)?_0x9a3f5b['apiSecret']=config['apiSecret']:_0x8b6dd3=!![];if(_0x9a3f5b[_0x3acb80(0x1fb)]==_0x3acb80(0x31a))_0x9a3f5b[_0x3acb80(0x1fb)]=config['apiPassword'];else{if(_0x9a3f5b['apiPassword'])_0x8b6dd3=!![];}dbConfig[_0x3acb80(0x24e)](_0x3acb80(0x295))[_0x3acb80(0x1e1)]({'botID':botID})['assign'](_0x9a3f5b)[_0x3acb80(0x216)]();}else dbConfig['get'](_0x3acb80(0x295))['push'](_0x9a3f5b)['write'](),_0x8b6dd3=!![],process[_0x3acb80(0x25e)]({'status':_0x3acb80(0x1ee),'live':_0x3acb80(0x30f)},_0x312262=>{});process[_0x3acb80(0x25e)]({'botname':_0x9a3f5b['botname']},_0x5e2019=>{}),config={..._0x9a3f5b},updateBotManager(),proxyEmit(_0x3acb80(0x1ea)),setStartDatePerformance(),initialPerformanceStored=![],await initCoinResults();if(_0x8b6dd3)await reset(!![]);else _0x53f071||_0x1c64a2?await reset(![]):getBalances();blockTransactionDetection=![],logger[_0x3acb80(0x2b0)]('Transaction\x20detection\x20unblocked');}async function storeHeadless(_0x4673b7){const _0x325bb4=_0x1fea22,_0x429009={...config,'headless':_0x4673b7[_0x325bb4(0x1ca)]};let _0x3b3256=dbConfig[_0x325bb4(0x24e)](_0x325bb4(0x295))[_0x325bb4(0x1e1)]({'botID':botID})[_0x325bb4(0x23c)]();_0x3b3256&&dbConfig[_0x325bb4(0x24e)](_0x325bb4(0x295))['find']({'botID':botID})[_0x325bb4(0x333)](_0x429009)[_0x325bb4(0x216)](),config={..._0x429009},updateBotManager(),proxyEmit(_0x325bb4(0x1c0),emittedConfiguration());}async function storeFiat(_0x53037f){const _0x3034d5=_0x1fea22,_0x48a466={...config,'fiat':_0x53037f};let _0x201b07=dbConfig['get'](_0x3034d5(0x295))[_0x3034d5(0x1e1)]({'botID':botID})[_0x3034d5(0x23c)]();_0x201b07&&dbConfig['get'](_0x3034d5(0x295))['find']({'botID':botID})[_0x3034d5(0x333)](_0x48a466)['write'](),config={..._0x48a466},proxyEmit(_0x3034d5(0x1c0),emittedConfiguration());}function resetHistory(){const _0x82e35e=_0x1fea22;logger['full'](_0x82e35e(0x275));try{if(fs[_0x82e35e(0x268)](path[_0x82e35e(0x2be)](configpath,_0x82e35e(0x2c0)+botID+'-events.json')))fs[_0x82e35e(0x1e4)](path[_0x82e35e(0x2be)](configpath,_0x82e35e(0x2c0)+botID+_0x82e35e(0x28b)));if(fs[_0x82e35e(0x268)](path[_0x82e35e(0x2be)](configpath,_0x82e35e(0x2c0)+botID+_0x82e35e(0x2bd))))fs[_0x82e35e(0x1e4)](path[_0x82e35e(0x2be)](configpath,_0x82e35e(0x2c0)+botID+'-performance.json'));if(fs[_0x82e35e(0x268)](path[_0x82e35e(0x2be)](configpath,_0x82e35e(0x2c0)+botID+'-results.json')))fs['unlinkSync'](path[_0x82e35e(0x2be)](configpath,'bot-'+botID+_0x82e35e(0x1ed)));}catch(_0x1ac47e){if(_0x1ac47e)logger[_0x82e35e(0x30a)](_0x82e35e(0x253),_0x1ac47e);}const _0x3d2800=getDate();let _0x23692c=[];currentCoins[_0x82e35e(0x2bc)](_0x38672d=>{const _0xe21edc=_0x82e35e;_0x23692c[_0xe21edc(0x228)]({'coin':_0x38672d[_0xe21edc(0x266)],'number':_0x38672d[_0xe21edc(0x28a)],'price':_0x38672d[_0xe21edc(0x234)]});});let _0x3d1aa0=dbConfig[_0x82e35e(0x24e)]('bot')[_0x82e35e(0x1e1)]({'botID':botID})['value']();_0x3d1aa0&&(dbConfig[_0x82e35e(0x24e)](_0x82e35e(0x295))[_0x82e35e(0x1e1)]({'botID':botID})[_0x82e35e(0x333)]({'liquidity':[{'date':_0x3d2800,'changes':_0x23692c}]})[_0x82e35e(0x216)](),config[_0x82e35e(0x206)]=[]),process[_0x82e35e(0x25e)]({'stop':_0x82e35e(0x1d8)},_0x4f9a90=>{});}function noslash(_0x2ac3b4){const _0x179d78=_0x1fea22;return _0x2ac3b4[_0x179d78(0x2c1)]('/','');}function updateHighestFee(_0x2fc821){const _0x3fa43e=_0x1fea22;if(_0x2fc821[_0x3fa43e(0x2c5)]){let _0x32d9aa={'filled':_0x2fc821[_0x3fa43e(0x2af)]*_0x2fc821[_0x3fa43e(0x2c8)],'amount':_0x2fc821[_0x3fa43e(0x2af)]*_0x2fc821['price'],'side':_0x2fc821[_0x3fa43e(0x29a)]==_0x3fa43e(0x265)?'buy':_0x3fa43e(0x265),'price':0x1/_0x2fc821[_0x3fa43e(0x2c8)]};_0x2fc821={..._0x2fc821,..._0x32d9aa};}const _0x8479f4=defaultFee*_0x2fc821[_0x3fa43e(0x2af)]*_0x2fc821[_0x3fa43e(0x2c8)];lastFees[_0x3fa43e(0x252)][_0x3fa43e(0x23e)]===0x14&&lastFees[_0x3fa43e(0x252)][_0x3fa43e(0x2e0)](),lastFees[_0x3fa43e(0x252)]['push'](_0x8479f4),lastFees[_0x3fa43e(0x1c4)]=Math[_0x3fa43e(0x2cb)](...lastFees[_0x3fa43e(0x252)]);}async function updateNumberCoinsCcxt(_0x576bb5){const _0x3894d8=_0x1fea22;logger['debug'](_0x3894d8(0x318)+_0x576bb5[_0x3894d8(0x1c6)]+_0x3894d8(0x1fa)+_0x576bb5[_0x3894d8(0x22d)]+'\x20|\x20'+_0x576bb5[_0x3894d8(0x2af)]+_0x3894d8(0x26c)+_0x576bb5[_0x3894d8(0x21d)]+'\x20|\x20'+_0x576bb5['id']);let _0xe0181a=_0x576bb5[_0x3894d8(0x22d)],_0x3daf24=![];currentCoins[_0x3894d8(0x2bc)](_0xcdb9ce=>{const _0x2af242=_0x3894d8;_0xcdb9ce[_0x2af242(0x1c6)]==_0x576bb5[_0x2af242(0x1c6)]&&(_0x3daf24=!![]);});if(!_0x3daf24)return;const _0x5db8f1=currentCoins[_0x3894d8(0x1e1)](_0x18a77=>_0x18a77[_0x3894d8(0x1c6)]==_0x576bb5[_0x3894d8(0x1c6)]),_0x53c01c=_0x151834=>{const _0x59016c=_0x3894d8;if(_0x5db8f1)_0x5db8f1[_0x59016c(0x2ee)]=_0x151834;};if(_0xe0181a==_0x3894d8(0x278))_0x53c01c(_0x3894d8(0x278));else{if(_0xe0181a==_0x3894d8(0x24b)){_0x53c01c(_0x3894d8(0x24b));const _0x193bd2=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x193bd2,await getOpenOrders(),handleOpenOrders();}else{if(_0xe0181a=='closed'){let _0x2983d1=![];if(lastOrders)for(const _0x241362 of lastOrders){const _0x19dbec=0xc8,_0x5e7924=0x1388;let _0x546882=0x0;while(!_0x241362[_0x3894d8(0x27b)]&&_0x546882*_0x19dbec<_0x5e7924){_0x546882++,await sleep(_0x19dbec);}if(_0x546882>0x0)logger[_0x3894d8(0x2b0)]('Waited\x20'+_0x546882*_0x19dbec/0x3e8+_0x3894d8(0x27a));if(_0x241362[_0x3894d8(0x27b)]==_0x576bb5['id']){logger[_0x3894d8(0x2b0)]('1\x20-\x20FILLED\x20known\x20order:\x20'+_0x576bb5['id']),_0x2983d1=!![];if(_0x241362[_0x3894d8(0x2af)]==0x0){logger[_0x3894d8(0x2b0)]('2\x20-\x20handling\x20FILLED\x20order:\x20'+_0x576bb5['id']);if(_0x576bb5['average'])_0x241362[_0x3894d8(0x2c8)]=_0x576bb5[_0x3894d8(0x325)];else{if(_0x576bb5[_0x3894d8(0x2c8)])_0x241362[_0x3894d8(0x2c8)]=_0x576bb5[_0x3894d8(0x2c8)];else{}}_0x241362[_0x3894d8(0x2af)]=_0x576bb5['filled'],updateHighestFee(_0x241362),_0x53c01c('filled'),await validateOrders();if(lockOrders==ORDERS[_0x3894d8(0x276)]){const _0x1b4caa=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x1b4caa;}_0x241362['fee']={'currency':_0x576bb5[_0x3894d8(0x2e4)]?_0x576bb5['fee'][_0x3894d8(0x239)]:null,'cost':_0x576bb5[_0x3894d8(0x2e4)]?_0x576bb5[_0x3894d8(0x2e4)]['cost']:0x0},await updateCoinResults(_0x241362);}}}if(!_0x2983d1){logger[_0x3894d8(0x2b0)](_0x3894d8(0x1e6)+_0x576bb5['id']),_0x53c01c(_0x3894d8(0x2af));const _0x42dd11=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x42dd11,await updateOpenOrders(),handleOpenOrders();}}}}if(lastBalances){let _0x3f3921=JSON[_0x3894d8(0x22a)](lastBalances['portfolio']);const _0x4d6a65=_0x3f3921[_0x3894d8(0x1e1)](_0x136141=>_0x136141['symbol']==_0x576bb5[_0x3894d8(0x1c6)]);if(_0x4d6a65){if(_0xe0181a==_0x3894d8(0x278))_0x4d6a65[_0x3894d8(0x2ee)]=_0x4d6a65[_0x3894d8(0x2ee)]==_0x3894d8(0x2af)?_0x3894d8(0x2af):'open';else{if(_0xe0181a==_0x3894d8(0x24b))_0x4d6a65[_0x3894d8(0x2ee)]=_0x4d6a65[_0x3894d8(0x2ee)]==_0x3894d8(0x2af)?_0x3894d8(0x2af):_0x3894d8(0x24b);else _0xe0181a==_0x3894d8(0x263)&&(_0x4d6a65[_0x3894d8(0x2ee)]=_0x3894d8(0x2af));}}lastBalances={...lastBalances,'portfolio':JSON[_0x3894d8(0x302)](_0x3f3921)},proxyEmit(_0x3894d8(0x26f),{'serverversion':serverversion,'balances':lastBalances});}}async function updateOpenOrders(){const _0x10ddc3=_0x1fea22;await getOpenOrders();let _0x2c1da9=![];currentCoins[_0x10ddc3(0x2bc)](_0x21db40=>{const _0x3d18c6=_0x10ddc3;_0x2c1da9=allOpenOrders[_0x3d18c6(0x1e1)](_0x4a5587=>_0x4a5587['symbol']==_0x21db40[_0x3d18c6(0x1c6)]),_0x21db40[_0x3d18c6(0x2ee)]=_0x2c1da9?'open':_0x3d18c6(0x299);});}async function getCoins(_0x4cc6b4=0x0,_0x73395f=!![],_0x50257b=config[_0x1fea22(0x223)]){const _0x13a72d=_0x1fea22;let _0x298b09,_0x251539=[],_0x4dfa8a=[],_0x5dd0d5=[];if(_0x4cc6b4)await sleep(_0x4cc6b4);if(botPaused)return[currentCoins,currentCoinsAll];try{_0x298b09=await exchange[_0x13a72d(0x30e)](),mybalances=_0x298b09[_0x13a72d(0x2ef)];for(const [_0x4f1908,_0x524464]of Object[_0x13a72d(0x29c)](mybalances)){_0x5dd0d5[_0x13a72d(0x228)](_0x4f1908);}config[_0x13a72d(0x2e7)]['forEach'](_0x4d7e3c=>{const _0x361b25=_0x13a72d;!_0x5dd0d5[_0x361b25(0x321)](_0x4d7e3c['coin'])&&(mybalances[_0x4d7e3c[_0x361b25(0x266)]]=0x0);});if(_0x50257b=='')for(const [_0x11078d,_0x4bb0cf]of Object['entries'](mybalances)){_0x4bb0cf!=0x0&&_0x251539[_0x13a72d(0x228)]({'coin':_0x11078d});}else{let _0x3d603d=![];for(const [_0xe68cd1,_0x3b4ea2]of Object[_0x13a72d(0x29c)](mybalances)){const _0x41a3ff=config[_0x13a72d(0x2e7)][_0x13a72d(0x1e1)](_0x45dca6=>_0x45dca6[_0x13a72d(0x266)]==_0xe68cd1),_0x400fef=_0xe68cd1+'/'+_0x50257b,_0x352cb3=_0x50257b+'/'+_0xe68cd1,_0xfa0656=currentCoins[_0x13a72d(0x1e1)](_0x52779b=>_0x52779b[_0x13a72d(0x266)]==_0xe68cd1);_0x3d603d=![];if((_0x3b4ea2!=0x0||_0x41a3ff)&&(allSymbols[_0x13a72d(0x321)](_0x400fef)||_0xe68cd1==_0x50257b))_0x251539[_0x13a72d(0x228)]({'coin':_0xe68cd1,'symbol':_0x400fef,'reverse':![],'number':Math['max'](_0x3b4ea2+(_0x41a3ff&&_0x41a3ff[_0x13a72d(0x309)]||0x0),0x0),'orderstatus':_0xfa0656?_0xfa0656['orderstatus']:_0x13a72d(0x299)});else{if((_0x3b4ea2!=0x0||_0x41a3ff)&&allSymbols['includes'](_0x352cb3))_0x251539[_0x13a72d(0x228)]({'coin':_0xe68cd1,'symbol':_0x352cb3,'reverse':!![],'number':Math['max'](_0x3b4ea2+(_0x41a3ff&&_0x41a3ff[_0x13a72d(0x309)]||0x0),0x0),'orderstatus':_0xfa0656?_0xfa0656[_0x13a72d(0x2ee)]:_0x13a72d(0x299)});else _0x41a3ff&&_0x251539[_0x13a72d(0x228)]({'coin':_0x41a3ff[_0x13a72d(0x266)],'symbol':_0x41a3ff['symbol'],'reverse':_0x41a3ff['reverse'],'number':0x0,'orderstatus':_0x13a72d(0x299)});}}}}catch(_0x5d3147){if(!_0x73395f)handleErrorNoStop(_0x5d3147,_0x13a72d(0x245));else await handleError(_0x5d3147,_0x13a72d(0x245));}return _0x4dfa8a=cloneDeep(_0x251539),_0x251539=_0x251539['filter'](_0x3e63cd=>{const _0x27303f=_0x13a72d,_0x2fc878=config['portfolio'][_0x27303f(0x1e1)](_0x109538=>_0x109538[_0x27303f(0x266)]==_0x3e63cd[_0x27303f(0x266)]);return _0x2fc878&&!_0x2fc878[_0x27303f(0x331)];}),[_0x251539,_0x4dfa8a];}async function getCoinNumber(_0x11c63b){const _0x36b765=_0x1fea22;let _0x2fb5bb;try{const _0x1c066f=await exchange[_0x36b765(0x30e)]();_0x2fb5bb=_0x1c066f['total'][_0x11c63b];}catch(_0x377f15){await handleError(_0x377f15,_0x36b765(0x2e8));}return _0x2fb5bb;}async function getOpenOrders(){const _0x417c6b=_0x1fea22;let _0x512459;allOpenOrders=[];try{for(const _0x18e8d6 of config[_0x417c6b(0x2e7)]){!_0x18e8d6[_0x417c6b(0x331)]&&_0x18e8d6[_0x417c6b(0x266)]!=config['basecoin']&&(_0x512459=await exchange[_0x417c6b(0x1e2)](_0x18e8d6['symbol']),_0x512459[_0x417c6b(0x23e)]>0x0&&allOpenOrders[_0x417c6b(0x228)](_0x512459[0x0]));}}catch(_0xacfba1){await handleError(_0xacfba1,_0x417c6b(0x2a9));}}async function handleOpenOrders(_0x5fd11f=0x0){const _0x3d4588=_0x1fea22;allOpenOrders[_0x3d4588(0x23e)]==0x0&&lockOrders==ORDERS[_0x3d4588(0x276)]&&allOrdersPlaced&&(_0x5fd11f==0x0?(logger[_0x3d4588(0x2b0)](_0x3d4588(0x258)),_0x5fd11f++,await sleep(0xbb8),await getOpenOrders(),handleOpenOrders(0x1)):(logger[_0x3d4588(0x2b0)](_0x3d4588(0x2e6)),validateOrders(_0x3d4588(0x1de))));}async function testAPI(_0x11c00f){const _0x5a1f08=_0x1fea22,_0x2494f6=ccxt['pro'][_0x11c00f[_0x5a1f08(0x229)][_0x5a1f08(0x339)]()],_0x2c8523=new _0x2494f6({'apiKey':_0x11c00f[_0x5a1f08(0x22f)],'secret':_0x11c00f[_0x5a1f08(0x2b2)],'timeout':0x7530,'enableRateLimit':!![],'newUpdates':!![],'options':{'defaultType':_0x5a1f08(0x1b3)}});if(_0x11c00f[_0x5a1f08(0x1fb)])_0x2c8523[_0x5a1f08(0x1f8)]=_0x11c00f['apiPassword'];try{await _0x2c8523[_0x5a1f08(0x251)]();}catch(_0x1e19f4){throw _0x1e19f4;}}function cloneDeep(_0x34cc75){const _0x3bb725=_0x1fea22;return JSON['parse'](JSON[_0x3bb725(0x302)](_0x34cc75));}async function getPortfolio(_0x2744e0){const _0x26c0d8=_0x1fea22;let _0x1731a4=[],_0x194a2e=[],_0x4dd53a=[],_0x1bb359;if(_0x2744e0[_0x26c0d8(0x22f)]!==_0x26c0d8(0x31a)||_0x2744e0[_0x26c0d8(0x2b2)]!==_0x26c0d8(0x31a)||_0x2744e0[_0x26c0d8(0x1fb)]&&_0x2744e0['apiPassword']!=='************'){if(config[_0x26c0d8(0x229)]){if(_0x2744e0[_0x26c0d8(0x22f)]=='************')_0x2744e0[_0x26c0d8(0x22f)]=config['apiKey'];if(_0x2744e0[_0x26c0d8(0x2b2)]==_0x26c0d8(0x31a))_0x2744e0[_0x26c0d8(0x2b2)]=config[_0x26c0d8(0x2b2)];if(_0x2744e0[_0x26c0d8(0x1fb)]==_0x26c0d8(0x31a))_0x2744e0[_0x26c0d8(0x1fb)]=config[_0x26c0d8(0x1fb)];try{await testAPI(_0x2744e0);}catch(_0x5b44e0){if(_0x5b44e0['toString']()['includes'](_0x26c0d8(0x2e1))){logger[_0x26c0d8(0x2b0)](_0x26c0d8(0x1c8)),proxyEmit(_0x26c0d8(0x2e7),![]);return;}else{handleError(_0x5b44e0,_0x26c0d8(0x282));return;}}}await initExchange(_0x2744e0[_0x26c0d8(0x229)],_0x2744e0[_0x26c0d8(0x22f)],_0x2744e0[_0x26c0d8(0x2b2)],_0x2744e0[_0x26c0d8(0x1fb)]);try{await loadSymbols();}catch(_0x2b886a){if(_0x2b886a[_0x26c0d8(0x2d9)]()[_0x26c0d8(0x321)](_0x26c0d8(0x2e1))){proxyEmit(_0x26c0d8(0x2e7),![]);return;}else{handleError(_0x2b886a,'getPortfolio(1)');return;}}const _0x585cab=await getCoins(0x0,![],_0x2744e0['basecoin']);_0x4dd53a=cloneDeep(_0x585cab[0x1]);}else{const _0x1ab34a=await getCoins();_0x4dd53a=cloneDeep(_0x1ab34a[0x1]);}if(_0x2744e0[_0x26c0d8(0x223)]=='')proxyEmit(_0x26c0d8(0x2e7),_0x4dd53a);else{_0x4dd53a[_0x26c0d8(0x2bc)](_0x3f2e72=>{const _0x526c6c=_0x26c0d8;if(_0x3f2e72['coin']!=_0x2744e0['basecoin']&&allSymbols['includes'](_0x3f2e72[_0x526c6c(0x1c6)]))_0x1731a4['push'](_0x3f2e72[_0x526c6c(0x1c6)]);});if(_0x1731a4[_0x26c0d8(0x23e)]==0x0)logHistory(_0x26c0d8(0x29b),_0x26c0d8(0x33a));else{try{_0x194a2e=await getTickers(_0x1731a4);}catch(_0x47c83f){if(_0x47c83f[_0x26c0d8(0x2d9)]()[_0x26c0d8(0x321)](_0x26c0d8(0x2e1))){proxyEmit(_0x26c0d8(0x2e7),![]);return;}else handleError(_0x47c83f,_0x26c0d8(0x32c));}_0x4dd53a[_0x26c0d8(0x2bc)](_0x121bdc=>{const _0x248978=_0x26c0d8;_0x121bdc['coin']!=_0x2744e0['basecoin']?_0x194a2e[_0x121bdc['symbol']]?_0x1bb359=_0x121bdc[_0x248978(0x2c5)]?0x1/_0x194a2e[_0x121bdc[_0x248978(0x1c6)]][_0x248978(0x234)]:_0x194a2e[_0x121bdc['symbol']]['last']:_0x1bb359=0x0:_0x1bb359=0x1,_0x121bdc[_0x248978(0x2c8)]=formatResult(_0x1bb359,0x8);}),proxyEmit(_0x26c0d8(0x2e7),_0x4dd53a);}}}function truncateTradeAmount(_0x19b1be,_0x14ea23){const _0xa2e17f=_0x1fea22;let _0x3ed342=0x0;try{_0x3ed342=exchange[_0xa2e17f(0x1fe)](_0x19b1be,_0x14ea23);}catch(_0x5ea5cd){}return _0x3ed342;}function checkMinimums(_0x1809a2){const _0x1ed2de=_0x1fea22;let _0x56dc7d=!![];const _0x4e4518=!_0x1809a2[_0x1ed2de(0x2c5)]?markets[_0x1809a2['symbol']][_0x1ed2de(0x287)][_0x1ed2de(0x21d)][_0x1ed2de(0x2a0)]:markets[_0x1809a2['symbol']][_0x1ed2de(0x287)]['cost'][_0x1ed2de(0x2a0)],_0x3b7e16=!_0x1809a2[_0x1ed2de(0x2c5)]?markets[_0x1809a2[_0x1ed2de(0x1c6)]]['limits']['cost']['min']:markets[_0x1809a2['symbol']][_0x1ed2de(0x287)][_0x1ed2de(0x21d)][_0x1ed2de(0x2a0)],_0x15e501=truncateTradeAmount(_0x1809a2[_0x1ed2de(0x1c6)],_0x1809a2[_0x1ed2de(0x2b8)]);_0x1809a2[_0x1ed2de(0x2b8)]=_0x15e501;if(Math[_0x1ed2de(0x241)](_0x15e501)<_0x4e4518)_0x56dc7d=![];if(Math[_0x1ed2de(0x241)](_0x15e501)*_0x1809a2['last']<_0x3b7e16)_0x56dc7d=![];if(_0x1809a2[_0x1ed2de(0x29a)]==_0x1ed2de(0x265)){let _0x123c4c=config['portfolio'][_0x1ed2de(0x1e1)](_0x260227=>_0x260227[_0x1ed2de(0x266)]==_0x1809a2[_0x1ed2de(0x266)]);if(_0x123c4c[_0x1ed2de(0x309)]>0x0){if(Math['abs'](_0x15e501)>_0x1809a2[_0x1ed2de(0x28a)]-_0x123c4c[_0x1ed2de(0x309)])_0x56dc7d=![];}else{if(Math[_0x1ed2de(0x241)](_0x15e501)>_0x1809a2[_0x1ed2de(0x28a)])_0x56dc7d=![];}}if(_0x1809a2[_0x1ed2de(0x29a)]=='buy'){let _0x289637=config[_0x1ed2de(0x2e7)]['find'](_0x474cba=>_0x474cba[_0x1ed2de(0x266)]==config[_0x1ed2de(0x223)]),_0x490214=currentCoins[_0x1ed2de(0x1e1)](_0x34806c=>_0x34806c[_0x1ed2de(0x266)]==config[_0x1ed2de(0x223)]);if(_0x289637[_0x1ed2de(0x309)]>0x0){if(Math[_0x1ed2de(0x241)](_0x15e501)*_0x1809a2[_0x1ed2de(0x234)]>_0x490214[_0x1ed2de(0x28a)]-_0x289637[_0x1ed2de(0x309)])_0x56dc7d=![];}else{if(Math[_0x1ed2de(0x241)](_0x15e501)*_0x1809a2[_0x1ed2de(0x234)]>_0x490214['number'])_0x56dc7d=![];}}return _0x56dc7d;}async function getBalances(_0x2019dc=!![]){const _0x57b59e=_0x1fea22;let _0x3bd296=0x0,_0x508def;const _0x3e83d8=config['threshold'];if(config[_0x57b59e(0x1ca)]&&config[_0x57b59e(0x28e)]<0x0)await validate24hChanges();currentCoins[_0x57b59e(0x2bc)](_0x27499c=>{const _0x512acd=_0x57b59e;if(_0x27499c[_0x512acd(0x266)]!=config[_0x512acd(0x223)]){let _0xfbfda6=global[_0x512acd(0x1c5)][noslash(_0x27499c[_0x512acd(0x1c6)])];_0x508def=_0x27499c['reverse']?0x1/_0xfbfda6:_0xfbfda6;}else _0x508def=0x1;let _0x4ddecb=_0x27499c[_0x512acd(0x28a)]*_0x508def;_0x3bd296+=_0x4ddecb,_0x27499c[_0x512acd(0x234)]=formatResult(Number(_0x508def),0x8),_0x27499c[_0x512acd(0x23c)]=_0x4ddecb;}),currentCoins[_0x57b59e(0x2bc)](_0x13d262=>{const _0x108475=_0x57b59e;let _0x1cf26a=config[_0x108475(0x2e7)][_0x108475(0x1e1)](_0x27d0cd=>_0x27d0cd[_0x108475(0x266)]==_0x13d262[_0x108475(0x266)]),_0x304630=Number(_0x1cf26a[_0x108475(0x33b)]),_0xae9efc=_0x13d262[_0x108475(0x23c)]/_0x3bd296*0x64,_0x11ee28=_0x304630*_0x3bd296/0x64/_0x13d262[_0x108475(0x234)]-_0x13d262['number'];_0x13d262[_0x108475(0x33b)]=formatResult(_0xae9efc,0x3),_0x13d262[_0x108475(0x260)]=formatResult(_0x304630,0x3),_0x13d262[_0x108475(0x2b8)]=formatResult(_0x11ee28,0x8),_0x13d262[_0x108475(0x29a)]='',_0x13d262[_0x108475(0x28c)]=![];if(_0x13d262[_0x108475(0x266)]!=config['basecoin']){if(_0x13d262[_0x108475(0x33b)]>_0x304630)_0x13d262[_0x108475(0x29a)]=_0x108475(0x265),_0x13d262[_0x108475(0x28c)]=checkMinimums(_0x13d262);else _0x13d262['distribution']<_0x304630&&(_0x13d262[_0x108475(0x29a)]=_0x108475(0x27d),_0x13d262[_0x108475(0x28c)]=checkMinimums(_0x13d262));}_0x13d262[_0x108475(0x332)]=_0x13d262[_0x108475(0x33b)]/_0x13d262[_0x108475(0x260)]-0x1;if(_0x13d262['orderstatus']==_0x108475(0x2af)||_0x13d262[_0x108475(0x2ee)]==_0x108475(0x24b))_0x13d262[_0x108475(0x2ee)]=_0x108475(0x299);}),currentCoins[_0x57b59e(0x249)]((_0x3e4bcb,_0x19951a)=>_0x3e4bcb[_0x57b59e(0x332)]<_0x19951a[_0x57b59e(0x332)]?0x1:_0x19951a['delta']<_0x3e4bcb['delta']?-0x1:0x0);const _0x48caf=await getFiat();lastBalances={'servertime':getServerTime(),'time':getTimeStamp(),'eur':_0x48caf[_0x57b59e(0x1bd)],'usd':_0x48caf[_0x57b59e(0x32b)],'portfolio':JSON[_0x57b59e(0x302)](currentCoins),'threshold':_0x3e83d8},proxyEmit('balances',{'serverversion':serverversion,'balances':lastBalances});if(_0x2019dc){if(config[_0x57b59e(0x1ca)])headlessMode({'portfolio':currentCoins,'threshold':_0x3e83d8});else{if(lockOrders==ORDERS[_0x57b59e(0x1f2)]&&!coolingDown)notifyBalance({'portfolio':currentCoins,'threshold':_0x3e83d8});}}if(!initialPerformanceStored){initialPerformanceStored=!![],await storePerformance();const _0x51e55c=getNormalizedPerformance();getStartingBalances(_0x51e55c),emitPerformance(_0x51e55c);}lastPerformanceStored!==getHour()&&(await storePerformance(),lastPerformanceEmitted!==getDate()&&emitPerformance(getNormalizedPerformance()));if(transactionDetected){transactionDetected=![];const _0x103414=getNormalizedPerformance();emitPerformance(_0x103414),getStartingBalances(_0x103414),logger[_0x57b59e(0x2b0)](_0x57b59e(0x2b9));}if(pidBalances)clearTimeout(pidBalances);pidBalances=setTimeout(getBalances,getBalancesInterval);}async function storePerformance(){const _0x2a7e31=_0x1fea22;if(!lastBalances)return;let _0x17008e=[],_0x4a61ac,_0x28e9a7=JSON[_0x2a7e31(0x22a)](lastBalances[_0x2a7e31(0x2e7)]);_0x28e9a7['sort']((_0x59d9ae,_0x2165c2)=>_0x59d9ae[_0x2a7e31(0x266)]>_0x2165c2[_0x2a7e31(0x266)]?0x1:_0x2165c2[_0x2a7e31(0x266)]>_0x59d9ae[_0x2a7e31(0x266)]?-0x1:0x0),_0x28e9a7['forEach'](_0x4c05ad=>{const _0x594abe=_0x2a7e31;let _0xcad099={'coin':_0x4c05ad[_0x594abe(0x266)],'number':_0x4c05ad['number'],'price':_0x4c05ad[_0x594abe(0x234)]};_0x17008e[_0x594abe(0x228)](_0xcad099);});const _0x472e17=await getFiat();_0x4a61ac={'date':lastBalances[_0x2a7e31(0x214)][_0x2a7e31(0x334)]('\x20')[0x0],'eur':_0x472e17[_0x2a7e31(0x1bd)],'usd':_0x472e17[_0x2a7e31(0x32b)],'coins':_0x17008e};let _0x2eb154=dbPerformance[_0x2a7e31(0x24e)](_0x2a7e31(0x329))[_0x2a7e31(0x1e1)]({'date':_0x4a61ac[_0x2a7e31(0x240)]})[_0x2a7e31(0x23c)]();_0x2eb154?_0x4a61ac['date']!=config[_0x2a7e31(0x31d)]&&dbPerformance[_0x2a7e31(0x24e)]('data')['find']({'date':_0x4a61ac[_0x2a7e31(0x240)]})[_0x2a7e31(0x333)](_0x4a61ac)[_0x2a7e31(0x216)]():dbPerformance[_0x2a7e31(0x24e)](_0x2a7e31(0x329))[_0x2a7e31(0x228)](_0x4a61ac)[_0x2a7e31(0x216)](),lastPerformanceStored=getHour();}function getNormalizedPerformance(){const _0x261089=_0x1fea22;let _0x2618f4=[];if(dbPerformance['has'](_0x261089(0x329))[_0x261089(0x23c)]()){let _0x6f3242=dbPerformance['get'](_0x261089(0x329))[_0x261089(0x337)]()[_0x261089(0x244)](_0x2915d8=>{const _0x4cdf54=_0x261089;if(_0x2915d8[_0x4cdf54(0x1db)][_0x4cdf54(0x23e)]==0x0)return![];else return!![];})['sortBy'](_0x261089(0x240))[_0x261089(0x23c)](),_0x3fb67a=[...config['liquidity']];_0x3fb67a[_0x261089(0x249)]((_0x200f2e,_0x55352b)=>_0x200f2e[_0x261089(0x240)]>_0x55352b[_0x261089(0x240)]?-0x1:_0x55352b['date']>_0x200f2e[_0x261089(0x240)]?0x1:0x0);let _0x272b74=0x1,_0x383a7e=[],_0x2f18a7=0x0;_0x6f3242[_0x261089(0x308)]()[_0x261089(0x2c5)]()[_0x261089(0x2bc)]((_0x2dc38d,_0x590a3a)=>{const _0x15b517=_0x261089;if(_0x3fb67a[_0x2f18a7]){if(_0x6f3242[_0x6f3242[_0x15b517(0x23e)]-_0x590a3a]&&_0x3fb67a[_0x2f18a7]['date']==_0x6f3242[_0x6f3242[_0x15b517(0x23e)]-_0x590a3a][_0x15b517(0x240)]){if(_0x590a3a<_0x6f3242[_0x15b517(0x23e)]){let _0x35ac52=0x0,_0x2ff33b=0x0;_0x6f3242[_0x6f3242[_0x15b517(0x23e)]-_0x590a3a][_0x15b517(0x1db)]['forEach'](_0x58ea39=>{const _0x1c54f4=_0x15b517;_0x2ff33b+=_0x58ea39[_0x1c54f4(0x28a)]*_0x58ea39[_0x1c54f4(0x2c8)];}),_0x3fb67a[_0x2f18a7][_0x15b517(0x32e)][_0x15b517(0x2bc)](_0x4e59c1=>{const _0x42dcc4=_0x15b517;_0x35ac52+=_0x4e59c1[_0x42dcc4(0x28a)]*_0x4e59c1[_0x42dcc4(0x2c8)];}),_0x272b74*=_0x35ac52/(_0x2ff33b-_0x35ac52)+0x1;}_0x2f18a7++;}}let _0x730b6d=0x0;_0x2dc38d['coins'][_0x15b517(0x2bc)](_0x1f200d=>{const _0x13f807=_0x15b517;_0x730b6d+=_0x1f200d[_0x13f807(0x28a)]*_0x1f200d[_0x13f807(0x2c8)];}),_0x383a7e[_0x6f3242[_0x15b517(0x23e)]-_0x590a3a-0x1]=_0x730b6d*(_0x272b74-0x1);});let _0x48095c=[];_0x3fb67a=[...config[_0x261089(0x206)]]||[];let _0x5ba67b=0x0;_0x2f18a7=0x0,_0x6f3242[_0x261089(0x2bc)]((_0x44f544,_0x4db3d1)=>{const _0x506b89=_0x261089;if(_0x3fb67a[_0x2f18a7]){const _0x3743a5=fns[_0x506b89(0x22a)](_0x3fb67a[_0x2f18a7][_0x506b89(0x240)],'yyyy/MM/dd',new Date()),_0xb005ef=fns[_0x506b89(0x22a)](_0x44f544['date'],_0x506b89(0x226),new Date());if(fns[_0x506b89(0x281)](_0x3743a5,_0xb005ef)){let _0x37d16d=0x0;_0x3fb67a[_0x2f18a7][_0x506b89(0x32e)][_0x506b89(0x2bc)](_0x41548f=>{const _0x8990dc=_0x506b89;!_0x48095c[_0x41548f[_0x8990dc(0x266)]]?_0x48095c[_0x41548f[_0x8990dc(0x266)]]=_0x41548f[_0x8990dc(0x28a)]:(_0x37d16d=_0x48095c[_0x41548f[_0x8990dc(0x266)]],_0x48095c[_0x41548f[_0x8990dc(0x266)]]+=_0x41548f[_0x8990dc(0x28a)]);const _0x3b2b58=_0x44f544[_0x8990dc(0x1db)][_0x8990dc(0x1e1)](_0x179733=>_0x179733[_0x8990dc(0x266)]==_0x41548f[_0x8990dc(0x266)]);(!_0x3b2b58||_0x3b2b58[_0x8990dc(0x28a)]==0x0)&&(_0x5ba67b+=(-_0x41548f[_0x8990dc(0x28a)]-_0x37d16d)*_0x41548f['price']);}),_0x2f18a7++;}}_0x44f544[_0x506b89(0x1db)]['forEach']((_0x512495,_0x126c53)=>{const _0x3b3a47=_0x506b89;_0x48095c[_0x512495[_0x3b3a47(0x266)]]&&(_0x512495[_0x3b3a47(0x279)]=_0x48095c[_0x512495[_0x3b3a47(0x266)]]);}),_0x2618f4[_0x506b89(0x228)]({'date':_0x44f544[_0x506b89(0x240)],'eur':_0x44f544[_0x506b89(0x1bd)],'usd':_0x44f544['usd'],'offset':_0x383a7e[_0x4db3d1],'netoffset':_0x5ba67b,'coins':_0x44f544[_0x506b89(0x1db)]});});}return _0x2618f4;}function emitPerformance(_0x4aae31){const _0x3e72c9=_0x1fea22;_0x4aae31['length']!==0x0?(proxyEmit('performance',_0x4aae31),lastPerformanceEmitted=getDate()):proxyEmit(_0x3e72c9(0x298),[]);}function getPerf(_0x5ae0bc,_0x21f9dd){const _0x2b9b23=_0x1fea22;let _0x274963=0x0,_0x496871=0x0,_0x4c6afe=0x0;_0x5ae0bc[_0x2b9b23(0x1db)][_0x2b9b23(0x2bc)](_0x17f670=>{const _0x3d6964=_0x2b9b23;_0x274963+=_0x17f670[_0x3d6964(0x28a)]*_0x17f670[_0x3d6964(0x2c8)];});_0x21f9dd&&(_0x274963+=_0x5ae0bc[_0x2b9b23(0x309)]);if(config['basecoin']===_0x2b9b23(0x1f3)||config[_0x2b9b23(0x223)]===_0x2b9b23(0x26d)||config[_0x2b9b23(0x223)]===_0x2b9b23(0x2b7))_0x496871=_0x274963*_0x5ae0bc['eur'],_0x4c6afe=_0x274963*_0x5ae0bc[_0x2b9b23(0x32b)];else{if(usdBasecoins[_0x2b9b23(0x321)](config[_0x2b9b23(0x223)]))_0x496871=_0x274963*_0x5ae0bc['eur']/_0x5ae0bc[_0x2b9b23(0x32b)],_0x4c6afe=_0x274963;else config[_0x2b9b23(0x223)]==='EUR'&&(_0x496871=_0x274963,_0x4c6afe=_0x274963*_0x5ae0bc[_0x2b9b23(0x32b)]/_0x5ae0bc[_0x2b9b23(0x1bd)]);}return[_0x274963,_0x496871,_0x4c6afe];}function getKPIs(_0x55ddc9,_0x33a41a=_0x1fea22(0x324)){const _0xf45357=_0x1fea22,_0x304863=config[_0xf45357(0x223)],_0x4ac5c6=lastBalances,_0x12f74b=currentCoins,_0x5a37f5=getNormalizedPerformance(),_0x42dd00=_0x55ddc9===_0xf45357(0x223)?_0x304863:_0x55ddc9===_0xf45357(0x25c)||_0x55ddc9===_0xf45357(0x2d6)?_0x33a41a:'Net\x20'+_0x304863,_0x32fcb6=_0x55ddc9===_0xf45357(0x1ef)?_0xf45357(0x2e5):_0x55ddc9===_0xf45357(0x2d6)?_0xf45357(0x2e5):_0x42dd00+'\x20value',_0x1fe088=_0x55ddc9===_0xf45357(0x1ef)||_0x55ddc9==='net-fiat'?_0xf45357(0x2e5):_0x42dd00+_0xf45357(0x280);let _0x237d33=0x0;_0x12f74b[_0xf45357(0x2bc)](_0x3a6e2d=>{const _0x2971fc=_0xf45357;_0x237d33+=_0x3a6e2d[_0x2971fc(0x28a)]*_0x3a6e2d[_0x2971fc(0x234)];});if(_0x55ddc9===_0xf45357(0x25c)||_0x55ddc9==='net-fiat'){if(_0x304863===_0xf45357(0x1f3)||_0x304863===_0xf45357(0x26d)||_0x304863===_0xf45357(0x2b7))_0x237d33=_0x237d33*(_0x33a41a===_0xf45357(0x324)?_0x4ac5c6[_0xf45357(0x1bd)]:_0x4ac5c6[_0xf45357(0x32b)]);else{if(usdBasecoins[_0xf45357(0x321)](_0x304863))_0x237d33=_0x237d33*(_0x33a41a==='EUR'?_0x4ac5c6[_0xf45357(0x1bd)]/_0x4ac5c6['usd']:0x1);else _0x304863===_0xf45357(0x324)&&(_0x237d33=_0x237d33*(_0x33a41a===_0xf45357(0x324)?0x1:_0x4ac5c6[_0xf45357(0x32b)]/_0x4ac5c6['eur']));}}let _0x290f77;if(_0x237d33!==0x0){if(_0x55ddc9==='basecoin')_0x290f77=(_0x237d33/startingBalances[_0xf45357(0x223)]-0x1)*0x64;else{if(_0x33a41a===_0xf45357(0x324))_0x290f77=(_0x237d33/startingBalances['eur']-0x1)*0x64;else _0x290f77=(_0x237d33/startingBalances[_0xf45357(0x32b)]-0x1)*0x64;}let _0x2d60e8=0x0;if(startingBalances['coins'])_0x12f74b['forEach'](_0x3ad458=>{const _0x4f980c=_0xf45357;let _0x2c3ebd=startingBalances['coins'][_0x4f980c(0x1e1)](_0x365845=>_0x365845['coin']===_0x3ad458[_0x4f980c(0x266)]);if(_0x2c3ebd&&_0x2c3ebd[_0x4f980c(0x266)]&&_0x3ad458[_0x4f980c(0x28a)]!==0x0)_0x2d60e8+=_0x2c3ebd['number']*_0x3ad458[_0x4f980c(0x234)];});let _0x4eb6f2=0x0;if(_0x5a37f5['length']!==0x0){let _0xb48498=_0x5a37f5[_0x5a37f5[_0xf45357(0x23e)]-0x1];_0x4eb6f2=_0xb48498[_0xf45357(0x262)];}_0x2d60e8-=_0x4eb6f2;_0x55ddc9==='net-basecoin'&&(_0x290f77=(_0x237d33-_0x2d60e8)/startingBalances['basecoin']*0x64,_0x237d33=_0x237d33-_0x2d60e8);if(_0x55ddc9===_0xf45357(0x2d6)){let _0xed7234=_0x33a41a===_0xf45357(0x324)?startingBalances[_0xf45357(0x1bd)]:startingBalances[_0xf45357(0x32b)];if(_0x304863===_0xf45357(0x1f3)||_0x304863===_0xf45357(0x26d)||_0x304863===_0xf45357(0x2b7))_0x2d60e8=_0x33a41a===_0xf45357(0x324)?_0x2d60e8*_0x4ac5c6['eur']:_0x2d60e8*_0x4ac5c6[_0xf45357(0x32b)];else{if(usdBasecoins[_0xf45357(0x321)](_0x304863))_0x2d60e8=_0x33a41a===_0xf45357(0x324)?_0x2d60e8*_0x4ac5c6[_0xf45357(0x1bd)]/_0x4ac5c6[_0xf45357(0x32b)]:_0x2d60e8;else _0x304863==='EUR'&&(_0x2d60e8=_0x33a41a===_0xf45357(0x324)?_0x2d60e8:_0x2d60e8*_0x4ac5c6[_0xf45357(0x32b)]/_0x4ac5c6['eur']);}_0x290f77=(_0x237d33-_0x2d60e8)/_0xed7234*0x64,_0x237d33=_0x237d33-_0x2d60e8;}if(_0x290f77){if(_0x290f77<0x64)_0x290f77=_0x290f77[_0xf45357(0x2b1)](0x2);else{if(_0x290f77<0x3e8)_0x290f77=_0x290f77[_0xf45357(0x2b1)](0x1);else _0x290f77=_0x290f77[_0xf45357(0x2b1)](0x0);}}else _0x290f77=Number('0')[_0xf45357(0x2b1)](0x2);if(_0x237d33){if(Math[_0xf45357(0x241)](_0x237d33)<0.000001)_0x237d33=_0x237d33[_0xf45357(0x2b1)](0x2);else{if(Math[_0xf45357(0x241)](_0x237d33)<0.1)_0x237d33=_0x237d33[_0xf45357(0x2b1)](0x6);else{if(Math[_0xf45357(0x241)](_0x237d33)<0x1)_0x237d33=_0x237d33[_0xf45357(0x2b1)](0x5);else{if(Math[_0xf45357(0x241)](_0x237d33)<0xa)_0x237d33=_0x237d33['toFixed'](0x4);else{if(Math['abs'](_0x237d33)<0x64)_0x237d33=_0x237d33[_0xf45357(0x2b1)](0x3);else{if(Math['abs'](_0x237d33)<0x3e8)_0x237d33=_0x237d33[_0xf45357(0x2b1)](0x2);else _0x237d33=_0x237d33[_0xf45357(0x2b1)](0x2);}}}}}}else _0x237d33=Number('0')[_0xf45357(0x2b1)](0x2);}else _0x290f77=Number('0')[_0xf45357(0x2b1)](0x2);return{'value':_0x237d33,'change':_0x290f77,'leftTxt':_0x32fcb6,'rightTxt':_0x1fe088};}async function getStartingBalances(_0x458cd0,_0x5b95c3=!![]){const _0x3aead5=_0x1fea22;if(_0x458cd0[_0x3aead5(0x23e)]!==0x0){const [_0x2dd3e9,_0x229093,_0x45b1ae]=getPerf(_0x458cd0[0x0],!![]);let _0x58d7ca=[];config[_0x3aead5(0x2e7)][_0x3aead5(0x2bc)](_0x57cdc1=>{const _0x5c7f11=_0x3aead5;let _0x47b6b8=0x0,_0x4e5a79;config[_0x5c7f11(0x206)][_0x5c7f11(0x2bc)](_0x4bceb7=>{const _0x5e1994=_0x5c7f11;let _0x223699=_0x4bceb7['changes'][_0x5e1994(0x1e1)](_0x17f9eb=>_0x17f9eb[_0x5e1994(0x266)]==_0x57cdc1[_0x5e1994(0x266)]);if(_0x223699){_0x47b6b8+=_0x223699[_0x5e1994(0x28a)];if(!_0x4e5a79)_0x4e5a79=_0x223699['price'];}}),_0x58d7ca['push']({'coin':_0x57cdc1[_0x5c7f11(0x266)],'number':_0x47b6b8,'initialprice':_0x4e5a79});});const _0x407ef9={'basecoin':_0x2dd3e9,'eur':_0x229093,'usd':_0x45b1ae,'coins':_0x58d7ca};if(_0x5b95c3)proxyEmit('starting-balances',_0x407ef9);startingBalances=_0x407ef9;}}function headlessMode(_0x49c51f){const _0x2b90dc=_0x1fea22;let _0x2b8df8=_0x49c51f[_0x2b90dc(0x2e7)],_0x2fb142=_0x49c51f[_0x2b90dc(0x286)],_0x53a90d=[];for(let _0x542330 of _0x2b8df8){if(_0x542330[_0x2b90dc(0x266)]!=config[_0x2b90dc(0x223)]){if(_0x542330[_0x2b90dc(0x332)]>=_0x2fb142/0x64){if(_0x542330[_0x2b90dc(0x28c)])_0x53a90d[_0x2b90dc(0x228)](_0x542330);}else{if(_0x542330['delta']<=-_0x2fb142/0x64){if(_0x542330[_0x2b90dc(0x28c)])_0x53a90d[_0x2b90dc(0x228)](_0x542330);}}}}_0x53a90d[_0x2b90dc(0x23e)]>0x0&&(lockOrders==ORDERS[_0x2b90dc(0x1f2)]&&!coolingDown&&_0x53a90d[_0x2b90dc(0x2bc)](_0xbfcfd7=>{const _0x4e13ac=_0x2b90dc;logger[_0x4e13ac(0x2b0)](_0x4e13ac(0x335)+_0xbfcfd7[_0x4e13ac(0x266)]+'\x20'+_0xbfcfd7[_0x4e13ac(0x28a)]+'\x20'+_0xbfcfd7[_0x4e13ac(0x234)]+'\x20'+_0xbfcfd7[_0x4e13ac(0x33b)]+'%\x20'+_0xbfcfd7[_0x4e13ac(0x260)]+'%\x20'+(0x64*_0xbfcfd7['delta'])[_0x4e13ac(0x2b1)](0x2)+_0x4e13ac(0x1f5)+_0x2fb142['toFixed'](0x2)+'%)');}),placeOrder(_0x53a90d));}function notifyBalance(_0x350fd1){const _0x3cac2e=_0x1fea22;let _0x885f5c=_0x350fd1[_0x3cac2e(0x2e7)],_0x357c4d=_0x350fd1[_0x3cac2e(0x286)],_0x2f182f=[];for(let _0x366592 of _0x885f5c){if(_0x366592[_0x3cac2e(0x266)]!=config[_0x3cac2e(0x223)]){if(_0x366592['delta']>=_0x357c4d/0x64){if(_0x366592[_0x3cac2e(0x28c)])_0x2f182f[_0x3cac2e(0x228)](_0x366592);}else{if(_0x366592['delta']<=-_0x357c4d/0x64){if(_0x366592['valid'])_0x2f182f['push'](_0x366592);}}}}if(_0x2f182f[_0x3cac2e(0x23e)]>0x0){let _0x4378c7=_0x2f182f[_0x3cac2e(0x24a)](_0x5d1ff7=>_0x5d1ff7[_0x3cac2e(0x266)]);_0x4378c7['sort']();let _0x10c666=_0x4378c7[_0x3cac2e(0x2be)](',\x20');if(!lastCoinsToBalance)logHistory('warning','Manual\x20balancing\x20required');lastCoinsToBalance=_0x10c666;}}function symbolToCoin(_0x46a89e){const _0x2e7007=_0x1fea22;let _0x2842b8;if(_0x46a89e[_0x2e7007(0x321)]('/'+config[_0x2e7007(0x223)]))_0x2842b8=_0x46a89e[_0x2e7007(0x2c1)]('/'+config[_0x2e7007(0x223)],'');if(_0x46a89e[_0x2e7007(0x321)](config['basecoin']+'/'))_0x2842b8=_0x46a89e[_0x2e7007(0x2c1)](config[_0x2e7007(0x223)]+'/','');return _0x2842b8;}async function unlockOrders(){const _0x2e72f7=_0x1fea22;if(allOrdersPlaced&&lockOrders==ORDERS[_0x2e72f7(0x276)]){logger[_0x2e72f7(0x2b0)](_0x2e72f7(0x296)),lockOrders=ORDERS[_0x2e72f7(0x311)];if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);const _0x36d00c=await getCoins(balanceUpdateDelay);[currentCoins,currentCoinsAll]=_0x36d00c,validateOrdersState=_0x2e72f7(0x279),persistOpenOrders([]),lockOrders=ORDERS[_0x2e72f7(0x1f2)],logger[_0x2e72f7(0x2b0)](_0x2e72f7(0x291));}}async function validateOrders(_0xca7b2){const _0x53054d=_0x1fea22;if(_0xca7b2)validateOrdersState=_0xca7b2;logger['debug']('1\x20-\x20Validate\x20orders:\x20'+validateOrdersState+'\x20|\x20lock\x20orders:\x20'+(lockOrders==0x1?'ORDERS.LOCKED':lockOrders==0x2?_0x53054d(0x328):_0x53054d(0x314)));let _0xe1fcb=[],_0x17b4a4=config[_0x53054d(0x1f0)]==_0x53054d(0x20e)?validateOrderTimeout*0x3c*0x3e8/validateOrderInterval:config[_0x53054d(0x1ce)]*0x3c*0x3e8/validateOrderInterval;if(lockOrders!=ORDERS[_0x53054d(0x276)])return;logger[_0x53054d(0x2b0)]('2\x20-\x20Validate\x20orders:\x20'+validateOrdersState),lastOrders['forEach'](_0x4ffd8d=>{const _0x10efa7=_0x53054d;let _0x55effc=![];_0x4ffd8d['filled']>0x0&&(_0x55effc=!![]),_0xe1fcb[_0x10efa7(0x228)](_0x55effc),_0x55effc&&config[_0x10efa7(0x1f0)]!=_0x10efa7(0x20e)&&logHistory('order',_0x10efa7(0x212)+_0x4ffd8d[_0x10efa7(0x1c6)]+'\x20'+_0x4ffd8d[_0x10efa7(0x29a)]+'\x20#'+formatResult(_0x4ffd8d[_0x10efa7(0x2af)],0x8)+'\x20@'+formatResult(_0x4ffd8d[_0x10efa7(0x2c8)],0x8));}),_0xe1fcb[_0x53054d(0x2bc)]((_0x57d79c,_0x501ae4)=>{const _0x2dfd5d=_0x53054d;if(_0x57d79c)lastOrders[_0x2dfd5d(0x1b1)](_0x501ae4,0x1);}),persistOpenOrders(lastOrders);const _0x32c317=coolingDown?'balancing\x20resumes\x20when\x20cooldown\x20ends':'balancing\x20resumed';if(validateOrdersState==_0x53054d(0x279)){validateOrdersState=_0x53054d(0x242);if(_0xe1fcb[_0x53054d(0x321)](![])){if(config[_0x53054d(0x1f0)]==_0x53054d(0x20e)){}else{}}else await unlockOrders();}else{if(validateOrdersState==_0x53054d(0x242)){if(_0xe1fcb[_0x53054d(0x321)](![])){}else{if(allOrdersPlaced){if(config[_0x53054d(0x1f0)]==_0x53054d(0x20e)){}else{}await unlockOrders();}}}else{if(validateOrdersState==_0x53054d(0x247))_0xe1fcb[_0x53054d(0x321)](![])&&(config['ordertype']=='market'?logHistory(_0x53054d(0x264),_0x53054d(0x338)+Math['round'](_0x17b4a4*validateOrderInterval/0xea60)+_0x53054d(0x2f9)+_0x32c317):(await cancelOrders(),logHistory(_0x53054d(0x264),_0x53054d(0x210)+Math[_0x53054d(0x24d)](_0x17b4a4*validateOrderInterval/0xea60)+_0x53054d(0x2f9)+_0x32c317))),await unlockOrders();else{if(validateOrdersState==_0x53054d(0x1de)){if(config[_0x53054d(0x1f0)]!='market')logHistory(_0x53054d(0x264),'No\x20more\x20open\x20orders\x20-\x20'+_0x32c317);await unlockOrders();}}}}}async function cancelOrders(){const _0x220250=_0x1fea22;lastOrders[_0x220250(0x2bc)](async _0x4cd651=>{const _0x49f8c7=_0x220250;try{const _0x38c1cc=await exchange[_0x49f8c7(0x227)](_0x4cd651[_0x49f8c7(0x27b)],_0x4cd651[_0x49f8c7(0x1c6)]);}catch(_0x26b894){if(_0x26b894[_0x49f8c7(0x2d9)]()['includes'](_0x49f8c7(0x1e8))){}else await handleError(_0x26b894,_0x49f8c7(0x20a));}});}async function initCoinResults(_0x3bd30f){const _0x28e1cc=_0x1fea22;_0x3bd30f?logger['debug'](_0x28e1cc(0x1b4)+_0x3bd30f):logger[_0x28e1cc(0x2b0)]('Initializing\x20coin\x20results'),config[_0x28e1cc(0x2e7)][_0x28e1cc(0x2bc)](_0x5d5fb8=>{const _0x342b43=_0x28e1cc;if(!_0x5d5fb8[_0x342b43(0x331)]&&_0x5d5fb8[_0x342b43(0x266)]!=config[_0x342b43(0x223)]){const _0x4c2411=currentCoins[_0x342b43(0x1e1)](_0x3fedce=>_0x3fedce['coin']==_0x5d5fb8['coin']),_0x3b866f=global[_0x342b43(0x1c5)][noslash(_0x5d5fb8['symbol'])];let _0x3ab569=_0x4c2411?_0x4c2411[_0x342b43(0x28a)]:null,_0x92a8c4=_0x5d5fb8[_0x342b43(0x2c5)]?0x1/_0x3b866f:_0x3b866f,_0x454e0e;config['liquidity']['forEach'](_0x3b8c99=>{const _0x46dea6=_0x342b43;!_0x454e0e&&(_0x454e0e=_0x3b8c99['changes'][_0x46dea6(0x1e1)](_0x1f3ef4=>_0x1f3ef4[_0x46dea6(0x266)]==_0x5d5fb8[_0x46dea6(0x266)]),_0x454e0e&&(_0x3ab569=_0x454e0e[_0x46dea6(0x28a)],_0x92a8c4=_0x454e0e[_0x46dea6(0x2c8)]));});let _0xe32258=dbCoinResults['get'](_0x342b43(0x1db))[_0x342b43(0x1e1)]({'coin':_0x5d5fb8['coin']})[_0x342b43(0x23c)]();if(!_0xe32258){const _0x28a764={'coin':_0x5d5fb8[_0x342b43(0x266)],'number':_0x3ab569,'breakeven':_0x92a8c4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x342b43(0x24e)](_0x342b43(0x1db))[_0x342b43(0x228)](_0x28a764)[_0x342b43(0x216)]();}else{if(_0x3bd30f&&_0x5d5fb8[_0x342b43(0x266)]==_0x3bd30f){const _0x250da9={'coin':_0x5d5fb8[_0x342b43(0x266)],'number':_0x3ab569,'breakeven':_0x92a8c4,'realized':0x0,'unrealized':0x0,'fees':0x0,'sells':0x0,'buys':0x0};dbCoinResults[_0x342b43(0x24e)](_0x342b43(0x1db))[_0x342b43(0x1e1)]({'coin':_0x5d5fb8[_0x342b43(0x266)]})['assign'](_0x250da9)['write']();}}}});}async function updateCoinResults(_0x38a25f,_0x3fea9a=![]){const _0x4c111c=_0x1fea22;let _0x3fa56c,_0x5d5b74,_0x23e5df,_0x56da3b,_0x1f5d8e,_0x3dc6ce,_0x243b1b=dbCoinResults[_0x4c111c(0x24e)]('coins')['find']({'coin':_0x38a25f[_0x4c111c(0x266)]})[_0x4c111c(0x23c)](),_0x1637b8=![];_0x243b1b&&Object[_0x4c111c(0x29c)](_0x243b1b)[_0x4c111c(0x2bc)](([_0x4d07aa,_0x407a0b])=>{if(_0x407a0b==null)_0x1637b8=!![];});(!_0x243b1b||_0x1637b8)&&(await initCoinResults(_0x38a25f[_0x4c111c(0x266)]),_0x243b1b=dbCoinResults[_0x4c111c(0x24e)](_0x4c111c(0x1db))[_0x4c111c(0x1e1)]({'coin':_0x38a25f[_0x4c111c(0x266)]})['value']());_0x38a25f['reverse']&&(_0x3dc6ce={'filled':_0x38a25f[_0x4c111c(0x2af)]*_0x38a25f['price'],'amount':_0x38a25f[_0x4c111c(0x2af)]*_0x38a25f['price'],'side':_0x38a25f[_0x4c111c(0x29a)]==_0x4c111c(0x265)?_0x4c111c(0x27d):_0x4c111c(0x265),'price':0x1/_0x38a25f['price']},_0x38a25f={..._0x38a25f,..._0x3dc6ce});_0x3fea9a?_0x5d5b74=_0x38a25f[_0x4c111c(0x29a)]=='buy'?_0x243b1b['number']+_0x38a25f['filled']:_0x243b1b[_0x4c111c(0x28a)]-_0x38a25f[_0x4c111c(0x2af)]:_0x5d5b74=await getCoinNumber(_0x38a25f[_0x4c111c(0x266)]);if(_0x38a25f[_0x4c111c(0x2e4)]&&_0x38a25f[_0x4c111c(0x2e4)][_0x4c111c(0x239)]==config['basecoin'])_0x3fa56c=_0x38a25f[_0x4c111c(0x2e4)]['cost'];else{if(_0x38a25f[_0x4c111c(0x2e4)]&&_0x38a25f['fee']['currency']==_0x4c111c(0x27f)&&!_0x3fea9a&&config[_0x4c111c(0x223)]!='PAXG')_0x3fa56c=_0x38a25f['fee'][_0x4c111c(0x26b)]*global['ticker'][_0x4c111c(0x27f)+config['basecoin']];else _0x3fa56c=defaultFee*_0x38a25f[_0x4c111c(0x2af)]*_0x38a25f[_0x4c111c(0x2c8)];}_0x38a25f[_0x4c111c(0x29a)]==_0x4c111c(0x27d)?(_0x23e5df=_0x5d5b74!=0x0?(_0x243b1b[_0x4c111c(0x24c)]*_0x243b1b[_0x4c111c(0x28a)]+_0x38a25f['price']*(_0x5d5b74-_0x243b1b[_0x4c111c(0x28a)])+_0x3fa56c)/_0x5d5b74:0x0,_0x56da3b=_0x243b1b[_0x4c111c(0x289)]):(_0x23e5df=_0x5d5b74!=0x0?(_0x243b1b[_0x4c111c(0x24c)]*_0x243b1b[_0x4c111c(0x28a)]-_0x38a25f[_0x4c111c(0x2c8)]*(_0x243b1b[_0x4c111c(0x28a)]-_0x5d5b74)+_0x3fa56c)/_0x5d5b74:0x0,_0x56da3b=_0x243b1b['realized']+(_0x38a25f['price']-_0x243b1b[_0x4c111c(0x24c)])*_0x38a25f[_0x4c111c(0x2af)]);_0x1f5d8e=(_0x38a25f[_0x4c111c(0x2c8)]-_0x23e5df-_0x3fa56c/_0x38a25f[_0x4c111c(0x2af)])*_0x5d5b74;let _0x37543e={'coin':_0x38a25f[_0x4c111c(0x266)],'number':_0x5d5b74,'breakeven':formatResult(_0x23e5df,0x8),'realized':formatResult(_0x56da3b,0x8),'unrealized':formatResult(_0x1f5d8e,0x8),'fees':formatResult(_0x243b1b[_0x4c111c(0x1eb)]+_0x3fa56c,0x8),'sells':_0x38a25f[_0x4c111c(0x29a)]==_0x4c111c(0x265)?_0x243b1b['sells']+0x1:_0x243b1b['sells'],'buys':_0x38a25f[_0x4c111c(0x29a)]==_0x4c111c(0x27d)?_0x243b1b[_0x4c111c(0x21e)]+0x1:_0x243b1b[_0x4c111c(0x21e)]};dbCoinResults[_0x4c111c(0x24e)](_0x4c111c(0x1db))[_0x4c111c(0x1e1)]({'coin':_0x38a25f['coin']})[_0x4c111c(0x333)](_0x37543e)[_0x4c111c(0x216)]();if(!_0x3fea9a){if(_0x38a25f[_0x4c111c(0x2e4)]&&_0x38a25f[_0x4c111c(0x2e4)][_0x4c111c(0x239)]==_0x4c111c(0x27f)){const _0x536eb0=currentCoins[_0x4c111c(0x1e1)](_0x5235bc=>_0x5235bc[_0x4c111c(0x266)]==_0x4c111c(0x27f));if(_0x536eb0){let _0x34a4c9=dbCoinResults[_0x4c111c(0x24e)]('coins')[_0x4c111c(0x1e1)]({'coin':_0x4c111c(0x27f)})['value']();_0x37543e={..._0x34a4c9,'number':_0x536eb0[_0x4c111c(0x28a)]},dbCoinResults['get'](_0x4c111c(0x1db))['find']({'coin':_0x4c111c(0x27f)})[_0x4c111c(0x333)](_0x37543e)[_0x4c111c(0x216)]();}}}}async function placeOrder(_0x10017d){const _0x3f216c=_0x1fea22,_0x3e39fe=config[_0x3f216c(0x1f0)]==_0x3f216c(0x20e)?_0x3f216c(0x20e):'limit';if(lockOrders==ORDERS['UNLOCKED']&&!coolingDown){lastCoinsToBalance='',lockOrders=ORDERS[_0x3f216c(0x276)],allOrdersPlaced=![],validateOrdersState='initial';let _0x8de312=![];lastOrders=[];for(const _0x3048f2 of _0x10017d){let _0x1811a9,_0x480b1e,_0x57bf34,_0x4f9714,_0x355c5f,_0x5681ae=_0x3048f2[_0x3f216c(0x1c6)];try{const _0xf1e9d6=await exchange[_0x3f216c(0x304)](_0x5681ae);_0x1811a9=_0x3048f2['reverse']?0x1/_0x3048f2['last']:_0x3048f2['last'],_0x480b1e=_0xf1e9d6[_0x3f216c(0x20b)],_0x57bf34=_0xf1e9d6['ask'];_0x3048f2[_0x3f216c(0x2c5)]?(_0x4f9714=_0x3048f2[_0x3f216c(0x29a)]==_0x3f216c(0x27d)?_0x3f216c(0x265):_0x3f216c(0x27d),_0x355c5f=Math[_0x3f216c(0x241)](_0x3048f2[_0x3f216c(0x2b8)])/_0x1811a9):(_0x4f9714=_0x3048f2['side'],_0x355c5f=Math['abs'](_0x3048f2['trade']));_0x3e39fe==_0x3f216c(0x297)&&(config[_0x3f216c(0x1f0)]=='limit-high'&&(_0x1811a9=_0x4f9714==_0x3f216c(0x27d)?_0x480b1e:_0x57bf34),config[_0x3f216c(0x1f0)]==_0x3f216c(0x219)&&(_0x1811a9=_0x4f9714==_0x3f216c(0x27d)?_0x57bf34:_0x480b1e));_0x355c5f=formatResult(_0x355c5f,0x8),_0x1811a9=formatResult(_0x1811a9,0x8);const _0xf3bdb8=_0x4f9714==_0x3f216c(0x265)?config['emojisell']?String[_0x3f216c(0x290)]('0x'+config[_0x3f216c(0x1d9)])+'\x20':'':config[_0x3f216c(0x1d0)]?String[_0x3f216c(0x290)]('0x'+config['emojibuy'])+'\x20':'',_0x2c7b9d=_0x3e39fe=='market'?_0x3f216c(0x306):config[_0x3f216c(0x1f0)]==_0x3f216c(0x1c9)?_0x3f216c(0x2c3):_0x3f216c(0x1d5),_0x34ff8e=(Math['floor'](Math[_0x3f216c(0x1fc)]()*0x35a4e900)+0x5f5e100)['toString']();lastOrders[_0x3f216c(0x228)]({'customId':_0x34ff8e,'symbol':_0x5681ae,'coin':_0x3048f2[_0x3f216c(0x266)],'amount':_0x355c5f,'price':_0x1811a9,'side':_0x4f9714,'reverse':_0x3048f2[_0x3f216c(0x2c5)],'filled':0x0});if(_0x3e39fe==_0x3f216c(0x20e))logHistory(_0x3f216c(0x2a4),''+_0xf3bdb8+_0x2c7b9d+_0x3f216c(0x27c)+_0x5681ae+'\x20'+_0x4f9714+'\x20#'+formatResult(_0x355c5f,0x8)+'\x20@'+formatResult(_0x1811a9,0x8));else logHistory(_0x3f216c(0x2a4),''+_0xf3bdb8+_0x2c7b9d+_0x3f216c(0x27c)+_0x5681ae+'\x20'+_0x4f9714+'\x20#'+formatResult(_0x355c5f,0x8)+'\x20@'+formatResult(_0x1811a9,0x8));let _0x5222ca;_0x3e39fe==_0x3f216c(0x20e)?_0x4f9714==_0x3f216c(0x27d)&&[_0x3f216c(0x319),_0x3f216c(0x2ca),'Cex','Huobi',_0x3f216c(0x23a)][_0x3f216c(0x321)](config[_0x3f216c(0x229)])?_0x5222ca=await exchange[_0x3f216c(0x31c)](_0x5681ae,_0x3e39fe,_0x4f9714,_0x355c5f,_0x1811a9):_0x5222ca=await exchange[_0x3f216c(0x31c)](_0x5681ae,_0x3e39fe,_0x4f9714,_0x355c5f,undefined):_0x5222ca=await exchange[_0x3f216c(0x31c)](_0x5681ae,_0x3e39fe,_0x4f9714,_0x355c5f,_0x1811a9);logger[_0x3f216c(0x2b0)]('ID:\x20'+_0x5222ca['id']+_0x3f216c(0x2a5)+_0x34ff8e);const _0x30ffff=lastOrders[_0x3f216c(0x23e)]-0x1;if(_0x30ffff>=0x0&&lastOrders[_0x30ffff][_0x3f216c(0x2b3)]==_0x34ff8e){lastOrders[_0x30ffff]['orderId']=_0x5222ca['id'];if(_0x5222ca[_0x3f216c(0x21d)])lastOrders[_0x30ffff][_0x3f216c(0x21d)]=_0x5222ca[_0x3f216c(0x21d)];if(_0x5222ca[_0x3f216c(0x2c8)])lastOrders[_0x30ffff][_0x3f216c(0x2c8)]=_0x5222ca[_0x3f216c(0x2c8)];lastOrders[_0x30ffff]['fee']=_0x5222ca[_0x3f216c(0x2e4)];}if(config[_0x3f216c(0x2f8)]!=0x0){let _0x42878b=null;if(cooldownTracker[_0x3f216c(0x23e)]==config[_0x3f216c(0x2f8)]-0x1)_0x42878b=cooldownTracker[_0x3f216c(0x2e0)]();const _0x4c49df=getTimeStamp();cooldownTracker['push'](_0x4c49df);if(_0x42878b){const _0x4367bd=fns[_0x3f216c(0x310)](new Date(_0x4c49df),new Date(_0x42878b));if(_0x4367bd<cooldownInterval){logHistory('error',_0x3f216c(0x30d)+config['cooldown']+_0x3f216c(0x2d1)+cooldownInterval/0x3c+'\x20minutes\x20-\x20starting\x20cooldown\x20period\x20of\x20'+cooldownPeriod/(0xe10*0x3e8)+_0x3f216c(0x2d5)),coolingDown=!![];break;}}}}catch(_0x102340){if(_0x102340[_0x3f216c(0x2d9)]()[_0x3f216c(0x321)](_0x3f216c(0x1d2)))lastOrders=lastOrders['filter'](_0x42b69d=>_0x42b69d[_0x3f216c(0x1c6)]!=_0x5681ae),logHistory(_0x3f216c(0x29b),'Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20'+_0x5681ae),_0x8de312=!![];else{if(_0x102340['toString']()[_0x3f216c(0x321)]('Invalid\x20quantity'))lastOrders=lastOrders[_0x3f216c(0x244)](_0x47cff2=>_0x47cff2[_0x3f216c(0x1c6)]!=_0x5681ae),logHistory(_0x3f216c(0x29b),'Order\x20amount\x20is\x20invalid:\x20'+_0x5681ae),_0x8de312=!![];else{if(_0x102340[_0x3f216c(0x2d9)]()['includes'](_0x3f216c(0x2ff)))lastOrders=lastOrders['filter'](_0xc84f92=>_0xc84f92['symbol']!=_0x5681ae),logHistory('error',_0x3f216c(0x2c7)+_0x5681ae),logger[_0x3f216c(0x2b0)](_0x102340),_0x8de312=!![];else _0x102340[_0x3f216c(0x2d9)]()['includes']('must\x20be\x20greater\x20than\x20minimum\x20amount')?(lastOrders=lastOrders[_0x3f216c(0x244)](_0x48cea3=>_0x48cea3['symbol']!=_0x5681ae),logHistory(_0x3f216c(0x29b),_0x3f216c(0x2dc)+_0x5681ae),_0x8de312=!![]):(lastOrders=lastOrders['filter'](_0x453a51=>_0x453a51[_0x3f216c(0x1c6)]!=_0x5681ae),await handleError(_0x102340,'placeOrder()',_0x5681ae));}}}}allOrdersPlaced=!![],persistOpenOrders(lastOrders);if(lastOrders[_0x3f216c(0x23e)]>0x0){if(pidOrdersInitialTimeout)clearTimeout(pidOrdersInitialTimeout);pidOrdersInitialTimeout=setTimeout(function(){validateOrders();},0x1f40);const _0x157e48=config['ordertype']=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x3f216c(0x1ce)]*0x3c*0x3e8;if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){const _0x36ddf8=_0x3f216c;validateOrders(_0x36ddf8(0x247));},_0x157e48);}else unlockOrders();_0x8de312&&config[_0x3f216c(0x1ca)]&&(logHistory('error','Avoiding\x20continuous\x20order\x20attempts'+pauseBotMsg),await pauseBot()),coolingDown&&(await sleep(cooldownPeriod),coolingDown=![],logHistory('success',_0x3f216c(0x1dc)));}else{if(coolingDown)!config[_0x3f216c(0x1ca)]&&logHistory(_0x3f216c(0x29b),_0x3f216c(0x300));else lockOrders!=ORDERS[_0x3f216c(0x1f2)]&&(!config[_0x3f216c(0x1ca)]&&(config[_0x3f216c(0x1f0)]==_0x3f216c(0x20e)?logHistory(_0x3f216c(0x29b),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20validated'):logHistory(_0x3f216c(0x29b),'Ordering\x20not\x20possible\x20while\x20waiting\x20for\x20previous\x20order(s)\x20to\x20be\x20filled')));}}function persistOpenOrders(_0x38228f){const _0x242b2d=_0x1fea22,_0x108045={...config,'openOrders':_0x38228f};let _0x43a291=dbConfig[_0x242b2d(0x24e)](_0x242b2d(0x295))[_0x242b2d(0x1e1)]({'botID':botID})['value']();_0x43a291&&dbConfig[_0x242b2d(0x24e)]('bot')[_0x242b2d(0x1e1)]({'botID':botID})[_0x242b2d(0x333)](_0x108045)['write']();}function restoreOrders(){const _0x402f9a=_0x1fea22;let _0x144ae6;config[_0x402f9a(0x1b0)]&&allOpenOrders[_0x402f9a(0x2bc)](_0x142705=>{const _0x9a298f=_0x402f9a,_0x4dcbad=config[_0x9a298f(0x1b0)]['find'](_0xb11dc9=>_0xb11dc9[_0x9a298f(0x27b)]==_0x142705['id']);_0x4dcbad&&(lastOrders['push'](_0x4dcbad),_0x144ae6=_0x142705[_0x9a298f(0x213)]);});if(lastOrders[_0x402f9a(0x23e)]>0x0){lockOrders=ORDERS[_0x402f9a(0x276)],validateOrdersState=_0x402f9a(0x242),allOrdersPlaced=!![];const _0x55cc07=new Date()[_0x402f9a(0x22c)](),_0x4c39b1=config[_0x402f9a(0x1f0)]=='market'?validateOrderTimeout*0x3c*0x3e8:config[_0x402f9a(0x1ce)]*0x3c*0x3e8;if(_0x144ae6+_0x4c39b1>_0x55cc07){if(pidOrdersTimeout)clearTimeout(pidOrdersTimeout);pidOrdersTimeout=setTimeout(function(){validateOrders('final');},_0x144ae6+_0x4c39b1-_0x55cc07);}else validateOrders(_0x402f9a(0x247));}}async function sendMetricsTelegram(){const _0x2ae8a2=_0x1fea22;if(!coinsLoaded){process['send']({'telegrammsg':_0x2ae8a2(0x20c)},_0x295e42=>{});return;}if(!startingBalances)await getStartingBalances(getNormalizedPerformance());let _0x216cb3='';if(config['showname'])_0x216cb3=_0x2ae8a2(0x2c6)+config['botname']+_0x2ae8a2(0x1c7);else _0x216cb3=_0x2ae8a2(0x2f3)+botID+_0x2ae8a2(0x1c7);const _0x44d772=getKPIs(_0x2ae8a2(0x223)),_0xd7cc2=getKPIs(_0x2ae8a2(0x25c),config[_0x2ae8a2(0x25c)]),_0x421ff1=getKPIs(_0x2ae8a2(0x1ef)),_0xc96cd=getKPIs(_0x2ae8a2(0x2d6),config[_0x2ae8a2(0x25c)]);_0x216cb3+=_0x2ae8a2(0x317),_0x216cb3+=_0x44d772[_0x2ae8a2(0x2a3)]+_0x2ae8a2(0x2dd)+_0x44d772[_0x2ae8a2(0x23c)]+'\x0a',_0x216cb3+=_0x44d772['rightTxt']+':\x20'+_0x44d772['change']+'%\x0a',_0x216cb3+=_0xd7cc2[_0x2ae8a2(0x2a3)]+_0x2ae8a2(0x2dd)+_0xd7cc2['value']+'\x0a',_0x216cb3+=_0xd7cc2[_0x2ae8a2(0x26e)]+':\x20'+_0xd7cc2[_0x2ae8a2(0x1f1)]+'%\x0a',_0x216cb3+=_0x421ff1[_0x2ae8a2(0x2a3)]+':\x20'+_0x421ff1[_0x2ae8a2(0x23c)]+'\x20('+config['basecoin']+')\x0a',_0x216cb3+=_0x421ff1[_0x2ae8a2(0x26e)]+':\x20'+_0x421ff1[_0x2ae8a2(0x1f1)]+'%\x20('+config[_0x2ae8a2(0x223)]+')\x0a',_0x216cb3+=_0xc96cd[_0x2ae8a2(0x2a3)]+':\x20'+_0xc96cd[_0x2ae8a2(0x23c)]+'\x20('+config[_0x2ae8a2(0x25c)]+')\x0a',_0x216cb3+=_0xc96cd[_0x2ae8a2(0x26e)]+':\x20'+_0xc96cd[_0x2ae8a2(0x1f1)]+_0x2ae8a2(0x1f5)+config[_0x2ae8a2(0x25c)]+')\x0a',_0x216cb3+=_0x2ae8a2(0x209),process[_0x2ae8a2(0x25e)]({'telegrammsg':_0x216cb3},_0x38ca13=>{});}async function sendPortfolioTelegram(){const _0x3b444a=_0x1fea22;if(!coinsLoaded){process[_0x3b444a(0x25e)]({'telegrammsg':_0x3b444a(0x20c)},_0x5d1c15=>{});return;}let _0x14c890='';if(config[_0x3b444a(0x20d)])_0x14c890=_0x3b444a(0x2c6)+config[_0x3b444a(0x32d)]+_0x3b444a(0x2d2);else _0x14c890=_0x3b444a(0x2f3)+botID+_0x3b444a(0x2d2);_0x14c890+=_0x3b444a(0x317),_0x14c890+=_0x3b444a(0x232),_0x14c890+=_0x3b444a(0x1f7),_0x14c890+='-------------------------------\x0a',currentCoins[_0x3b444a(0x2bc)](_0x90a7b2=>{const _0x1d00c3=_0x3b444a;_0x14c890+=_0x90a7b2[_0x1d00c3(0x266)][_0x1d00c3(0x2cf)](0x7)+'|\x20'+formatPad(_0x90a7b2[_0x1d00c3(0x33b)],0x2,0x6)+'|\x20'+formatPad(_0x90a7b2['target'],0x2,0x6)+'|\x20'+formatPad(_0x90a7b2['delta']*0x64,0x2,0x6)+'\x0a';}),_0x14c890+=_0x3b444a(0x209),process[_0x3b444a(0x25e)]({'telegrammsg':_0x14c890},_0x46c13d=>{});}function formatPad(_0x215cee,_0x444451,_0x248f61){const _0x334107=_0x1fea22,_0x4ba31e=formatResultString(_0x215cee,_0x444451);return _0x4ba31e?_0x4ba31e[_0x334107(0x31b)](_0x248f61):''['padStart'](_0x248f61);}function logHistory(_0x5f3f2d,_0x1c42f5,_0x4a2658=''){const _0x188d28=_0x1fea22;logger[_0x188d28(0x30a)](''+_0x1c42f5);let _0x4cae23={'time':getTimeStamp(),'type':_0x5f3f2d,'event':_0x1c42f5};dbLogs[_0x188d28(0x24e)](_0x188d28(0x2cc))[_0x188d28(0x228)](_0x4cae23)[_0x188d28(0x216)]();if(_0x4a2658=='')_0x4a2658=_0x1c42f5;proxyEmit(_0x188d28(0x2fd),{'log':_0x4cae23,'summary':_0x4a2658}),process[_0x188d28(0x25e)]({'telegram':{..._0x4cae23,'botname':config[_0x188d28(0x32d)],'showname':config['showname']}},_0x3edc58=>{});}function emitHistory(_0x2720d2={}){const _0x1f67e1=_0x1fea22;Object['keys'](_0x2720d2)[_0x1f67e1(0x23e)]==0x0&&(_0x2720d2={'type':[_0x1f67e1(0x2a4),_0x1f67e1(0x2fd)],'event':'','page':0x1});if(_0x2720d2[_0x1f67e1(0x1bc)][_0x1f67e1(0x321)]('event'))_0x2720d2[_0x1f67e1(0x1bc)][_0x1f67e1(0x1b1)](_0x2720d2[_0x1f67e1(0x1bc)][_0x1f67e1(0x315)](_0x1f67e1(0x2fd)),0x1,_0x1f67e1(0x29b),'warning',_0x1f67e1(0x264));if(dbLogs['has'](_0x1f67e1(0x2cc))[_0x1f67e1(0x23c)]()){let _0x5e70e1=dbLogs['get'](_0x1f67e1(0x2cc))[_0x1f67e1(0x244)](_0x33c901=>{const _0x474b30=_0x1f67e1;if(_0x2720d2['type'][_0x474b30(0x23e)]==0x0)return![];else return _0x2720d2[_0x474b30(0x1bc)][_0x474b30(0x321)](_0x33c901[_0x474b30(0x1bc)]);})[_0x1f67e1(0x244)](_0x57d827=>{const _0xae4f77=_0x1f67e1;if(_0x2720d2[_0xae4f77(0x2fd)]=='')return!![];else return _0x57d827[_0xae4f77(0x2fd)]['toLowerCase']()[_0xae4f77(0x321)](_0x2720d2[_0xae4f77(0x2fd)]['toLowerCase']());})[_0x1f67e1(0x25b)]('time'),_0xfc9a85=_0x5e70e1['value']()[_0x1f67e1(0x23e)];_0x5e70e1=_0x5e70e1[_0x1f67e1(0x2c5)]()[_0x1f67e1(0x308)]((_0x2720d2[_0x1f67e1(0x2e9)]-0x1)*logPageSize,_0x2720d2[_0x1f67e1(0x2e9)]*logPageSize-0x1)[_0x1f67e1(0x2c5)]()[_0x1f67e1(0x23c)](),proxyEmit(_0x1f67e1(0x1df),{'logs':_0x5e70e1,'total':_0xfc9a85});}else proxyEmit(_0x1f67e1(0x1df),{'logs':[],'total':0x0});}function deleteHistoryAlerts(_0x541b77){const _0x19024a=_0x1fea22;if(dbLogs[_0x19024a(0x215)](_0x19024a(0x2cc))[_0x19024a(0x23c)]()){const _0x52a36e=dbLogs[_0x19024a(0x24e)](_0x19024a(0x2cc))[_0x19024a(0x25b)](_0x19024a(0x214))['filter'](_0x5b3a67=>{const _0x1f3ef0=_0x19024a;return _0x5b3a67[_0x1f3ef0(0x1bc)]==_0x1f3ef0(0x2a4);})['value']();dbLogs['get'](_0x19024a(0x2cc))[_0x19024a(0x2ad)]()[_0x19024a(0x216)](),dbLogs[_0x19024a(0x24e)](_0x19024a(0x2cc))[_0x19024a(0x333)](_0x52a36e)[_0x19024a(0x216)](),emitHistory(_0x541b77);}}async function pauseBot(_0x20dfb8=pauseBotInterval){const _0x1135e4=_0x1fea22,_0x519093=new Date()[_0x1135e4(0x22c)]();if(!lastErrorShown||_0x519093-lastErrorShown>=_0x20dfb8){lastErrorShown=_0x519093;!lastBotPause?(lastBotPause=_0x519093,consecutivePauses=0x1):(_0x519093-lastBotPause-_0x20dfb8<0x3c*0x3e8?(consecutivePauses++,consecutivePauses>0x2&&process['send']({'stop':_0x1135e4(0x1d8)},_0x3b3962=>{})):consecutivePauses=0x1,lastBotPause=new Date()[_0x1135e4(0x22c)]());if(!botPaused){botPaused=!![];if(pidBalances)clearTimeout(pidBalances);coinsLoaded=![],await stopExchange(),await sleep(_0x20dfb8),botPaused=![],reset(!![]);}}}async function killBot(){const _0x440098=_0x1fea22;botPaused=!![],await sleep(0x3e8),process['send']({'stop':_0x440098(0x1d7)},_0x196715=>{}),await sleep(0x7d0);}async function handleErrorNoStop(_0x129322,_0x5cf24e){const _0x1f691e=_0x1fea22;if(botPaused)return;const _0xd9e9d3=config['exchange']||_0x1f691e(0x205);if(_0x5cf24e)logger['debug'](_0x1f691e(0x327)+_0x5cf24e);const _0x5d7ff4=()=>{const _0x2e9c53=_0x1f691e;loading[_0x2e9c53(0x29b)]=!![],emitLoadingProgress();};if(_0x129322[_0x1f691e(0x2d9)]()['includes'](_0x1f691e(0x1cf)))logHistory('error',_0xd9e9d3+_0x1f691e(0x305)),_0x5d7ff4();else{if(_0x129322[_0x1f691e(0x2d9)]()[_0x1f691e(0x321)](_0x1f691e(0x23b)))logHistory('error',_0xd9e9d3+_0x1f691e(0x1d4)),_0x5d7ff4();else _0x129322[_0x1f691e(0x2d9)]()[_0x1f691e(0x321)](_0x1f691e(0x2e1))?(logHistory(_0x1f691e(0x29b),_0xd9e9d3+_0x1f691e(0x316)),logHistory(_0x1f691e(0x29b),_0x1f691e(0x1e3)),_0x5d7ff4()):await handleError(_0x129322,null);}}function _0x40ca(){const _0x5357f0=['PermissionDenied','fetchTicker','\x20API\x20key\x20is\x20invalid\x20-\x20update\x20the\x20API\x20key\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','Market','\x20exchange','slice','offset','full','util','watchTrades()','Executed\x20','fetchBalance','running','differenceInSeconds','UNLOCKING','args','toggleBotMode','ORDERS.UNLOCKED','indexOf','\x20API\x20key\x20or\x20API\x20secret\x20are\x20invalid\x20-\x20update\x20the\x20API\x20key\x20and\x20API\x20secret\x20in\x20the\x20configuration','<pre>','0\x20-\x20EXECUTION:\x20','Bybit','************','padStart','createOrder','startdate','search','exec','added','includes','\x20-\x20liquidity\x20settings\x20updated\x20accordingly','1503050eoZDQS','EUR','average','\x20has\x20a\x2024h\x20drop\x20of\x20','Exception\x20thrown\x20in\x20','ORDERS.UNLOCKING','data','string','usd','getPortfolio(2)','botname','changes',':\x20timer\x20>','Error\x20details:','excluded','delta','assign','split','Trigger:\x20','yargs/yargs','cloneDeep','Order(s)\x20not\x20validated\x20after\x20','toLowerCase','Make\x20sure\x20your\x20portfolio\x20contains\x20more\x20than\x20just\x20the\x20base\x20coin,\x20then\x20restart\x20the\x20bot','distribution','loadSymbols()','\x20>\x20','datetime','\x20closed\x20the\x20connection\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable','exchanges','openOrders','splice','-config.json','spot','Resetting\x20coin\x20results:\x20','function','colorscheme','uncaughtException','substring','constructor','DDoSProtection','deleteHistoryAlerts','type','eur','\x20|\x20exchange:\x20','concat','configuration','remainingSymbols','USDC','recreate','highest','ticker','symbol','\x20metrics:</b>\x20\x0a\x0a','Invalid\x20API\x20key\x20or\x20secret\x20entered','limit-high','headless','./config/','storeHeadless','stopExchange()','timeout','API-key\x20format\x20invalid','emojibuy','2.3.5','MIN_NOTIONAL','RSA-OAEP','\x20API\x20secret\x20is\x20invalid\x20-\x20update\x20the\x20API\x20secret\x20in\x20the\x20configuration\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','Limit\x20(low-margin)','coin-loading-progress','kill','restart','emojisell','path','coins','Cooldown\x20ended\x20-\x20balancing\x20resumed','Portfolio\x20change\x20detected:\x20','no\x20open\x20orders','event-history','emitHistory','find','fetchOpenOrders','Note:\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','unlinkSync','5052890AwvtrG','1\x20-\x20FILLED\x20unknown\x20order:\x20','toUpperCase','OrderNotFound','cancelLoading','configuration-stored','fees','sendPortfolioTelegram','-results.json','enabled','net-basecoin','ordertype','change','UNLOCKED','BTC','hybrid-crypto-js','%\x20(','cancel','Coin\x20\x20\x20|\x20\x20Distr|\x20Target|\x20\x20Delta\x20\x0a','password','Reset\x20|\x20','\x20|\x20','apiPassword','random','starting-balance-','amountToPrecision','watchTrades','Carefully\x20evaluate\x20the\x20situation\x20before\x20you\x20decide\x20to\x20switch\x20to\x20automatic\x20mode\x20again','createWriteStream','339100TAWLnn','RateLimitExceeded','getStartingBalances','Exchange','liquidity','\x20network\x20error','storeFiat','</pre>','cancelOrders()','bid','Bot\x20has\x20not\x20started\x20(yet)\x20-\x20try\x20again\x20in\x20a\x20minute','showname','market',':\x20Bot\x20','Unfilled\x20order(s)\x20canceled\x20after\x20','Invalid\x20symbol:\x20','Order\x20filled:\x20','timestamp','time','has','write','sha256','\x20>\x20[DEBUG]\x20','limit-low','startnumber','initclient','percentage','amount','buys','534980cATGUI','bots','2.6.0','Unknown\x20error\x20occured','basecoin','/USD','getMinutes','yyyy/MM/dd','cancelOrder','push','exchange','parse','3klvbfV','getTime','status','2296794JNKHbT','apiKey','mkdirSync','privateKey','-------------------------------\x0a','set','last','\x20blocked\x20API\x20(DDoSProtection)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','Switching\x20bot\x20to\x20manual\x20mode\x20to\x20prevent\x20major\x20losses','***','ccxt','currency','Huobipro','Signature\x20for\x20this\x20request\x20is\x20not\x20valid','value','\x20API\x20secret\x20is\x20invalid','length','/output-000.log','date','abs','ongoing','lowdb','filter','getCoins()','keys','final','Executing\x20exchange\x20reload','sort','map','canceled','breakeven','round','get','getHours','settings','loadMarkets','recent20','Error\x20while\x20deleting\x20files:\x20','progress','red_yellow_blue','Error:\x20Invalid\x20argument\x20','Cryptocom','1\x20-\x20Handle\x20open\x20orders','watchOrders','./version.json','sortBy','fiat','\x20|\x20highest\x20fee:\x20','send','getAllOrders()','target','watchOrders()','netoffset','closed','success','sell','coin','pro','existsSync','NetworkError','lowdb/adapters/FileSync','cost','\x20/\x20','ETH','rightTxt','balances','getDate','getSeconds','message','active','getMonth','Resetting\x20bot\x20history','LOCKED','TUSD','open','initial','\x20sec\x20for\x20order\x20info\x20to\x20be\x20completed','orderId','\x20order:\x20','buy','001','BNB','\x20change','isEqual','getPortfolio(0)','fetchClosedOrders','freeze','\x20minutes,\x20then\x20restarting\x20bot\x20to\x20try\x20again','threshold','limits','bb-settings.json','realized','number','-events.json','valid','argv','change24h','fetchTickers','fromCodePoint','2\x20-\x20Orders\x20unlocked','\x20-\x20but\x20auto\x20adjusting\x20liquidity\x20is\x20disabled','fetchTickers()','/EUR','bot','1\x20-\x20Unlock\x20orders','limit','performance','none','side','error','entries','(((.+)+)+)+$','showConfig','defaults','min','Saving\x20configuration','onepagemode','leftTxt','order','\x20|\x20Custom\x20ID:\x20','Pausing\x20for\x20','findIndex','autoliquidity','getOpenOrders()','Binance','removed','\x20Permission\x20denied\x20-\x20make\x20sure\x20your\x20exhange\x20API\x20key\x20has\x20the\x20required\x20permissions','remove','\x20-\x20bot\x20not\x20started','filled','debug','toFixed','apiSecret','customId','Loading\x20completed','USDT','version','PAXG','trade','Balance\x20change\x20-\x20performance\x20and\x20starting\x20balance\x20updated','ExchangeError','./logs/','forEach','-performance.json','join','\x20-\x20exclude\x20coin\x20in\x20the\x20configuration','bot-','replace','test','Limit\x20(high-margin)','recovery','reverse','<b>','Order\x20is\x20invalid:\x20','price','USD','Bitget','max','logs','timeshift','InvalidNonce','padEnd','startprice','\x20orders\x20in\x20less\x20than\x20','\x20portfolio:</b>\x20\x0a\x0a','exchange\x20reloaded','date-fns','\x20hour','net-fiat','RequestTimeout','Bot\x20','toString','OnMaintenance','getFullYear','Order\x20amount\x20is\x20too\x20small\x20to\x20trade:\x20','\x20:\x20','Insufficient\x20funds\x20to\x20execute\x20order:\x20','format','shift','AuthenticationError','Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid','BNB/','fee','Net\x20effect','2\x20-\x20Handled\x20open\x20orders','portfolio','getCoinNumber()','page','\x20rejected\x20your\x20API\x20request\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-rejected','decrypt','7397384zGsRVA','\x20not\x20responding\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable','orderstatus','total','basecoinvalue','log','botID','<b>Bot\x20','recreateCoinResults()','storeConfiguration','parseISO',',\x20must\x20be\x20a\x203\x20digit\x20number','cooldown','\x20minutes\x20-\x20','3917438VtLXIm','\x20-\x20pausing\x20bot\x20for\x20','ExchangeNotAvailable','event','InsufficientFunds','InvalidOrder','Ordering\x20not\x20possible\x20while\x20in\x20cooldown\x20mode','\x20blocked\x20API\x20(RateLimitExceeded)\x20-\x20check\x20if\x20API\x20key\x20is\x20enabled\x20for\x20spot\x20trading','stringify'];_0x40ca=function(){return _0x5357f0;};return _0x40ca();}async function handleError(_0xb16050,_0x10a39b,_0x42d835=''){const _0x46467d=_0x1fea22;if(botPaused)return;const _0x936dd6=config[_0x46467d(0x229)]||_0x46467d(0x205);if(_0x10a39b)logger['debug'](_0x46467d(0x327)+_0x10a39b);if(_0xb16050[_0x46467d(0x2d9)]()['includes'](_0x46467d(0x1ba)))logHistory('error',_0x936dd6+_0x46467d(0x235)+pauseBotMsg),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050),await pauseBot();else{if(_0xb16050['toString']()[_0x46467d(0x321)](_0x46467d(0x203)))logHistory('error',_0x936dd6+_0x46467d(0x301)+pauseBotMsg),logger['debug'](_0x46467d(0x330),_0xb16050),await pauseBot();else{if(_0xb16050['toString']()[_0x46467d(0x321)](_0x46467d(0x2fc))||_0xb16050['toString']()[_0x46467d(0x321)](_0x46467d(0x2da)))logHistory('error',_0x936dd6+'\x20not\x20available\x20-\x20please\x20check\x20hodlerhacks.com/fix/#exchange-unavailable'+pauseBotMsg),await pauseBot();else{if(_0xb16050[_0x46467d(0x2d9)]()['includes'](_0x46467d(0x2d7)))logHistory(_0x46467d(0x29b),_0x936dd6+_0x46467d(0x2ed)+pauseBotMsg),await pauseBot();else{if(_0xb16050[_0x46467d(0x2d9)]()['includes']('NetworkError:\x20connection\x20closed\x20by\x20remote\x20server'))logHistory('error',_0x936dd6+_0x46467d(0x1ae)+pauseBotMsg),await pauseBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x339)]()['includes'](_0x46467d(0x213))||_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x339)]()['includes']('request-time'))logHistory(_0x46467d(0x29b),'Your\x20machine\x27s\x20internal\x20clock\x20may\x20be\x20out\x20of\x20sync\x20-\x20please\x20check\x20hodlerhacks.com/fix/#clock-sync'+pauseBotMsg),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050[_0x46467d(0x2d9)]()),await pauseBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)](_0x46467d(0x2ce)))logHistory(_0x46467d(0x29b),_0x936dd6+_0x46467d(0x2ea)+pauseBotMsg),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050),await pauseBot();else{if(_0xb16050 instanceof ccxt[_0x46467d(0x269)])logHistory(_0x46467d(0x29b),_0x936dd6+_0x46467d(0x207)+pauseBotMsg),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050),await pauseBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)](_0x46467d(0x1cf)))logHistory(_0x46467d(0x29b),_0x936dd6+'\x20API\x20key\x20is\x20invalid'),logHistory(_0x46467d(0x29b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid'),await killBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)](_0x46467d(0x23b)))logHistory(_0x46467d(0x29b),_0x936dd6+_0x46467d(0x23d)),logHistory(_0x46467d(0x29b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid'),await killBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)]('AuthenticationError'))logHistory('error',_0x936dd6+'\x20API\x20key\x20or\x20API\x20secret\x20invalid\x20-\x20also\x20make\x20sure\x20your\x20machine\x27s\x20IP\x20address\x20is\x20whitelisted\x20for\x20this\x20API\x20key\x20on\x20the\x20exchange'),logHistory('error',_0x46467d(0x2e2)),await killBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)](_0x46467d(0x303)))logHistory(_0x46467d(0x29b),_0x936dd6+_0x46467d(0x2ac)),logHistory(_0x46467d(0x29b),'Stopping\x20bot\x20-\x20resolve\x20the\x20issue\x20and\x20restart\x20bot\x20-\x20please\x20check\x20hodlerhacks.com/fix/#api-invalid'),await killBot();else{if(_0xb16050[_0x46467d(0x2d9)]()[_0x46467d(0x321)](_0x46467d(0x2fe)))logHistory(_0x46467d(0x29b),_0x46467d(0x2de)+_0x42d835);else _0xb16050 instanceof ccxt[_0x46467d(0x2ba)]?(logHistory('error',_0x936dd6+'\x20exchange\x20error'),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050)):(logHistory(_0x46467d(0x29b),_0x46467d(0x222)+pauseBotMsg),logger[_0x46467d(0x2b0)](_0x46467d(0x330),_0xb16050),await pauseBot());}}}}}}}}}}}}}function formatResult(_0x1525b5,_0x457086){const _0x26353d=_0x1fea22;return parseFloat(_0x1525b5[_0x26353d(0x2b1)](_0x457086));}function formatResultTruncate(_0x41222c,_0x1ea488){const _0x67f5cf=_0x1fea22;let _0x2d729f=formatResultString(_0x41222c,0xa),_0x28ae2b=_0x2d729f[_0x67f5cf(0x315)]('.');return _0x28ae2b!=-0x1&&(_0x2d729f=_0x2d729f[_0x67f5cf(0x308)](0x0,_0x28ae2b+_0x1ea488+0x1)),Number(_0x2d729f);}function formatResultString(_0x39e7a0,_0x138913){const _0x1976c1=_0x1fea22;let _0x3db59c;if(!(''+_0x39e7a0)[_0x1976c1(0x321)]('e'))_0x3db59c=+(Math[_0x1976c1(0x24d)](_0x39e7a0+'e+'+_0x138913)+'e-'+_0x138913);else{let _0x1fbaa4=(''+_0x39e7a0)['split']('e'),_0x1250be='';+_0x1fbaa4[0x1]+_0x138913>0x0&&(_0x1250be='+'),_0x3db59c=+(Math['round'](+_0x1fbaa4[0x0]+'e'+_0x1250be+(+_0x1fbaa4[0x1]+_0x138913))+'e-'+_0x138913);}return Number(_0x3db59c)['toFixed'](_0x138913);}function getServerTime(){const _0x431036=_0x1fea22,_0x4b8774=new Date();return _0x4b8774['getFullYear']()+'/'+(_0x4b8774[_0x431036(0x274)]()+0x1)[_0x431036(0x2d9)]()['padStart'](0x2,'0')+'/'+_0x4b8774[_0x431036(0x270)]()[_0x431036(0x2d9)]()[_0x431036(0x31b)](0x2,'0')+'\x20'+_0x4b8774[_0x431036(0x24f)]()['toString']()['padStart'](0x2,'0')+':'+_0x4b8774[_0x431036(0x225)]()[_0x431036(0x2d9)]()[_0x431036(0x31b)](0x2,'0')+':'+_0x4b8774[_0x431036(0x271)]()[_0x431036(0x2d9)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x449a18=_0x1fea22,_0x4961e8=shiftedTime();return _0x4961e8[_0x449a18(0x2db)]()+'/'+(_0x4961e8[_0x449a18(0x274)]()+0x1)[_0x449a18(0x2d9)]()[_0x449a18(0x31b)](0x2,'0')+'/'+_0x4961e8[_0x449a18(0x270)]()[_0x449a18(0x2d9)]()[_0x449a18(0x31b)](0x2,'0')+'\x20'+_0x4961e8['getHours']()['toString']()[_0x449a18(0x31b)](0x2,'0')+':'+_0x4961e8[_0x449a18(0x225)]()[_0x449a18(0x2d9)]()['padStart'](0x2,'0')+':'+_0x4961e8[_0x449a18(0x271)]()['toString']()[_0x449a18(0x31b)](0x2,'0');}function getDate(){const _0x2a02b9=_0x1fea22,_0xfe1990=shiftedTime();return _0xfe1990['getFullYear']()+'/'+(_0xfe1990[_0x2a02b9(0x274)]()+0x1)[_0x2a02b9(0x2d9)]()[_0x2a02b9(0x31b)](0x2,'0')+'/'+_0xfe1990[_0x2a02b9(0x270)]()['toString']()[_0x2a02b9(0x31b)](0x2,'0');}function getHour(){const _0x2a7373=_0x1fea22,_0x251f03=shiftedTime();return _0x251f03['getHours']()['toString']()[_0x2a7373(0x31b)](0x2,'0');}function sleep(_0x27be4c){return new Promise(_0x5860d3=>setTimeout(_0x5860d3,_0x27be4c));}function shiftedTime(){const _0x3c33c1=_0x1fea22,_0x4cb517=new Date();let _0x233889=_0x4cb517;if(config&&config[_0x3c33c1(0x2cd)]!==0x0)_0x233889=fns['add'](_0x4cb517,{'hours':config[_0x3c33c1(0x2cd)]});return _0x233889;}function timer(_0xbb9d7){const _0x49aa3d=_0x1fea22,_0x38c2d4=new Date();!lasttime?console[_0x49aa3d(0x2f1)](getTimeStamp()+_0x49aa3d(0x32f),_0xbb9d7,_0x38c2d4):console[_0x49aa3d(0x2f1)](getTimeStamp()+_0x49aa3d(0x32f),_0xbb9d7,(_0x38c2d4-lasttime)/0x3e8),lasttime=_0x38c2d4;}