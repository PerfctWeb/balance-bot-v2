const _0x44b6a0=_0x1c11;(function(_0x4b39e0,_0x328598){const _0x22bc52=_0x1c11,_0x55d499=_0x4b39e0();while(!![]){try{const _0x239a82=parseInt(_0x22bc52(0x1fb))/0x1*(parseInt(_0x22bc52(0x303))/0x2)+-parseInt(_0x22bc52(0x1e8))/0x3*(-parseInt(_0x22bc52(0x321))/0x4)+-parseInt(_0x22bc52(0x239))/0x5*(parseInt(_0x22bc52(0x35f))/0x6)+parseInt(_0x22bc52(0x32f))/0x7*(-parseInt(_0x22bc52(0x316))/0x8)+-parseInt(_0x22bc52(0x23a))/0x9+-parseInt(_0x22bc52(0x21a))/0xa*(parseInt(_0x22bc52(0x36b))/0xb)+-parseInt(_0x22bc52(0x31a))/0xc*(-parseInt(_0x22bc52(0x2d8))/0xd);if(_0x239a82===_0x328598)break;else _0x55d499['push'](_0x55d499['shift']());}catch(_0x3ba920){_0x55d499['push'](_0x55d499['shift']());}}}(_0x54f1,0x303e1));const _0x10f194=function(){let _0x5b1bd1=!![];return function(_0x214f75,_0x4e7456){const _0x208218=_0x5b1bd1?function(){const _0xfa39f1=_0x1c11;if(_0x4e7456){const _0x4942cd=_0x4e7456[_0xfa39f1(0x397)](_0x214f75,arguments);return _0x4e7456=null,_0x4942cd;}}:function(){};return _0x5b1bd1=![],_0x208218;};}(),_0x176249=_0x10f194(this,function(){const _0x52362c=_0x1c11;return _0x176249['toString']()[_0x52362c(0x367)](_0x52362c(0x220))['toString']()[_0x52362c(0x3d2)](_0x176249)[_0x52362c(0x367)](_0x52362c(0x220));});_0x176249();'use strict';process[_0x44b6a0(0x330)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x44b6a0(0x309)),fs=require('fs'),fns=require(_0x44b6a0(0x337)),low=require(_0x44b6a0(0x25e)),FileSync=require(_0x44b6a0(0x2a3)),path=require('path'),crypto=require(_0x44b6a0(0x1e1)),Crypt=require(_0x44b6a0(0x1f2))[_0x44b6a0(0x1fc)],RSA=require(_0x44b6a0(0x1f2))['RSA'],bcrypt=require(_0x44b6a0(0x31c)),jwt=require('jsonwebtoken'),ipaddr=require(_0x44b6a0(0x249)),argv=require(_0x44b6a0(0x1e3))(process[_0x44b6a0(0x295)][_0x44b6a0(0x261)](0x2))[_0x44b6a0(0x295)],uuidRandom=require(_0x44b6a0(0x3ce)),{Telegraf,Markup}=require(_0x44b6a0(0x3d6)),Mixpanel=require('mixpanel'),axios=require(_0x44b6a0(0x2f3)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x44b6a0(0x3b2)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x44b6a0(0x283)+PORT+_0x44b6a0(0x368)),process[_0x44b6a0(0x1e2)](0x1));const HOST=argv['host']||null,userID=argv[_0x44b6a0(0x2ac)]||'',debugging=argv['d']||![],nodeversion=process[_0x44b6a0(0x2e5)][_0x44b6a0(0x332)];let bbpath=_0x44b6a0(0x2c2),bbpath2='';const botfile=_0x44b6a0(0x268),configfile=_0x44b6a0(0x23c),settingsfile=_0x44b6a0(0x292),securefile=_0x44b6a0(0x3d0),environment=require('./'+bbpath2+_0x44b6a0(0x35e))[_0x44b6a0(0x20f)]||'production',maxBackups=0xa;function _0x1c11(_0x4a0e0c,_0x1495bf){const _0x128054=_0x54f1();return _0x1c11=function(_0x176249,_0x10f194){_0x176249=_0x176249-0x1e1;let _0x54f190=_0x128054[_0x176249];return _0x54f190;},_0x1c11(_0x4a0e0c,_0x1495bf);}let validInstallation=!![];!fs[_0x44b6a0(0x3c5)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x44b6a0(0x22f),configbackuppath=configpath+_0x44b6a0(0x3ca),logspath=userID?bbpath+_0x44b6a0(0x336)+userID+'/':bbpath+_0x44b6a0(0x336),zippath=userID?bbpath+_0x44b6a0(0x26b)+userID+'/':bbpath+_0x44b6a0(0x26b),loggerfile=fs[_0x44b6a0(0x3b4)](logspath+_0x44b6a0(0x201),{'flags':'a'}),temppath=userID?bbpath+_0x44b6a0(0x24e)+userID+'/':bbpath+_0x44b6a0(0x24e);!fs[_0x44b6a0(0x3c5)](configpath)&&fs[_0x44b6a0(0x24f)](configpath);!fs[_0x44b6a0(0x3c5)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x44b6a0(0x3c5)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x44b6a0(0x24f)](zippath);!fs[_0x44b6a0(0x3c5)](temppath)&&fs[_0x44b6a0(0x24f)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x44b6a0(0x2d0)]({'bots':[]})[_0x44b6a0(0x34f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x44b6a0(0x2d0)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x44b6a0(0x28a),'onepagemode':![]}})[_0x44b6a0(0x34f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x44b6a0(0x34f)]();let crypt=new Crypt({'md':_0x44b6a0(0x288),'rsaStandard':_0x44b6a0(0x247)});const saltRounds=0xa,mixpanel=Mixpanel[_0x44b6a0(0x28c)](_0x44b6a0(0x240),{'host':_0x44b6a0(0x3b9)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x44b6a0(0x346)]&&(settings[_0x44b6a0(0x346)]!=''&&settings[_0x44b6a0(0x346)]!='***')&&settings[_0x44b6a0(0x318)]&&settings[_0x44b6a0(0x318)]!='')initTelegram();const parseColor=(_0x1246e0,_0x179d80)=>{const _0x442b19=_0x44b6a0,_0x3bbe84=/#[A-Z]{3}#/g;if(typeof _0x1246e0=='string'){!_0x179d80?_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](_0x3bbe84,''):(_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#BLU#/g,_0x442b19(0x271)),_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#RED#/g,_0x442b19(0x30d)),_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#YEL#/g,_0x442b19(0x2dd)),_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#MAG#/g,'\x1b[35m'),_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#CYA#/g,_0x442b19(0x250)),_0x1246e0=_0x1246e0[_0x442b19(0x2fb)](/#RES#/g,_0x442b19(0x22e)));;}return _0x1246e0;},logger={'screen':_0x14aef9=>{const _0x31ad1d=_0x44b6a0;console[_0x31ad1d(0x349)](parseColor(_0x14aef9,!![]));},'simple':_0x2946ee=>{const _0xabb6bd=_0x44b6a0;console[_0xabb6bd(0x349)](parseColor(_0x2946ee,!![])),loggerfile['write'](util['format'](parseColor(_0x2946ee,![]))+'\x0a');},'full':async _0x51b896=>{const _0x5b0ea8=_0x44b6a0,_0x3d3f83=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x51b896;console[_0x5b0ea8(0x349)](parseColor(_0x3d3f83,!![])),loggerfile['write'](util[_0x5b0ea8(0x2b9)](parseColor(_0x3d3f83,![]))+'\x0a');if(tgBot&&settings[_0x5b0ea8(0x2bf)]&&settings[_0x5b0ea8(0x2fc)]!=_0x5b0ea8(0x213))await sendTelegram(settings[_0x5b0ea8(0x2bf)],_0x5b0ea8(0x222)+parseColor(_0x51b896,![]));},'debug':async(_0x20a835,_0x4814ff='')=>{const _0x156bf0=_0x44b6a0,_0x246460=getTimeStamp()+_0x156bf0(0x299)+_0x20a835;if(debugging)console[_0x156bf0(0x349)](parseColor(_0x246460,!![]));loggerfile[_0x156bf0(0x34f)](util[_0x156bf0(0x2b9)](parseColor(_0x246460,![]))+'\x0a');if(_0x4814ff){if(debugging)console[_0x156bf0(0x349)](_0x4814ff);loggerfile[_0x156bf0(0x34f)](util[_0x156bf0(0x2b9)](_0x4814ff)+'\x0a');}}};let terminating=![];process['on'](_0x44b6a0(0x2b0),function(_0x92ba57){logger['simple'](_0x92ba57);}),process['on'](_0x44b6a0(0x1e2),()=>{stopAllBots();}),process['on'](_0x44b6a0(0x1f5),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x44b6a0(0x35e))[_0x44b6a0(0x359)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require('http')[_0x44b6a0(0x34e)](app);app[_0x44b6a0(0x381)](fileUpload({'useTempFiles':!![]})),app[_0x44b6a0(0x244)](_0x44b6a0(0x21c),async(_0xd58bf1,_0x2efc24)=>{const _0x537bcc=_0x44b6a0,_0x2474b8=_0xd58bf1[_0x537bcc(0x200)][_0x537bcc(0x399)],_0x1ccabf=getClientsWithBotID(_0x537bcc(0x38b)),_0x332d87=_0xd58bf1[_0x537bcc(0x3c4)]['uuid'],_0x2cc1f4=timelyDecrypt(_0x332d87,![]),_0x1bd77f=_0x1ccabf[_0x537bcc(0x2b6)](_0x913c73=>_0x913c73['uuid']==_0x2cc1f4);if(_0x1bd77f){const _0x4a7859=normalizeIP(_0xd58bf1[_0x537bcc(0x375)][_0x537bcc(0x2c4)])[_0x537bcc(0x2aa)],_0x318e44=_0xd58bf1[_0x537bcc(0x3c4)]['tkn'];if(validateAccess(_0x318e44,_0x2cc1f4,_0x4a7859)[_0x537bcc(0x36a)])_0x2474b8==_0x537bcc(0x284)&&await backupConfigFiles(),await zipFiles(_0x2474b8),_0x2efc24[_0x537bcc(0x385)](zippath+(_0x2474b8+_0x537bcc(0x3b8)),_0x4a9c97=>{const _0x29a526=_0x537bcc;_0x4a9c97&&(logger[_0x29a526(0x333)](_0x29a526(0x254)+_0x2474b8),logger[_0x29a526(0x209)](_0x4a9c97));});else logger[_0x537bcc(0x333)](_0x537bcc(0x228)+_0x2474b8+'\x20(1)');}else logger[_0x537bcc(0x333)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2474b8+_0x537bcc(0x326));}),app['post'](_0x44b6a0(0x2c6),async(_0x1753e3,_0x54d712)=>{const _0x1f4bbb=_0x44b6a0,_0x1644be=getClientsWithBotID(_0x1f4bbb(0x38b)),_0xaffac=_0x1753e3[_0x1f4bbb(0x3c4)]['uuid'],_0x1d2257=timelyDecrypt(_0xaffac,![]),_0x199e04=_0x1644be[_0x1f4bbb(0x2b6)](_0xc453e2=>_0xc453e2['uuid']==_0x1d2257);logger[_0x1f4bbb(0x2ba)]('Backup\x20file\x20uploaded');if(_0x199e04){const _0x311dbb=normalizeIP(_0x1753e3[_0x1f4bbb(0x375)][_0x1f4bbb(0x2c4)])[_0x1f4bbb(0x2aa)],_0x38de87=_0x1753e3[_0x1f4bbb(0x3c4)][_0x1f4bbb(0x2f8)];if(validateAccess(_0x38de87,_0x1d2257,_0x311dbb)[_0x1f4bbb(0x36a)]){if(_0x1753e3[_0x1f4bbb(0x217)]){const _0x238794=_0x1753e3[_0x1f4bbb(0x217)]['backupfile'];await _0x238794['mv'](temppath+_0x238794['name']),_0x54d712['send']({'status':!![],'message':_0x1f4bbb(0x3cc)});const _0x22f4b5=getBotsWithMode();_0x22f4b5[_0x1f4bbb(0x236)]>0x0?confirmRestore(temppath,_0x238794[_0x1f4bbb(0x297)]):unzipFile(temppath,_0x238794[_0x1f4bbb(0x297)]);}}else logger[_0x1f4bbb(0x333)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1f4bbb(0x333)](_0x1f4bbb(0x27f));}),app[_0x44b6a0(0x381)](express[_0x44b6a0(0x35a)](path[_0x44b6a0(0x2a2)](__dirname,bbpath2,_0x44b6a0(0x2f9)))),app[_0x44b6a0(0x381)](express[_0x44b6a0(0x35a)](path['join'](__dirname,bbpath2,_0x44b6a0(0x3ac)))),app[_0x44b6a0(0x244)]('/',function(_0x2da91b,_0x19c052){const _0x1cbdc7=_0x44b6a0;_0x19c052[_0x1cbdc7(0x294)](path[_0x1cbdc7(0x2a2)](__dirname,bbpath2,'build2','index.html'));}),app['get'](_0x44b6a0(0x1f1),function(_0x124500,_0x33f6da){const _0x2de113=_0x44b6a0;_0x33f6da['sendFile'](path[_0x2de113(0x2a2)](__dirname,bbpath2,_0x2de113(0x3ac),_0x2de113(0x36f)));}),app['get']('/:bot/portfolio',(_0x5eadd0,_0x57a991)=>{const _0x36b65b=_0x44b6a0;_0x57a991[_0x36b65b(0x294)](path[_0x36b65b(0x2a2)](__dirname,bbpath2,_0x36b65b(0x3ac),_0x36b65b(0x36f)));}),app['get']('/:bot/performance',(_0x4c9a2c,_0x29da7c)=>{const _0x360436=_0x44b6a0;_0x29da7c[_0x360436(0x294)](path[_0x360436(0x2a2)](__dirname,bbpath2,_0x360436(0x3ac),_0x360436(0x36f)));}),app[_0x44b6a0(0x244)](_0x44b6a0(0x276),(_0x9781e4,_0x10b431)=>{const _0x3fd675=_0x44b6a0;_0x10b431['sendFile'](path[_0x3fd675(0x2a2)](__dirname,bbpath2,_0x3fd675(0x3ac),_0x3fd675(0x36f)));}),app[_0x44b6a0(0x244)](_0x44b6a0(0x37b),(_0x1f1bd9,_0x5e0ad4)=>{const _0x523fef=_0x44b6a0;_0x5e0ad4['sendFile'](path[_0x523fef(0x2a2)](__dirname,bbpath2,_0x523fef(0x3ac),'index.html'));}),app['get'](_0x44b6a0(0x35d),(_0x97c7bf,_0x3f3f1a)=>{const _0x4e35db=_0x44b6a0;_0x3f3f1a[_0x4e35db(0x294)](path[_0x4e35db(0x2a2)](__dirname,bbpath2,_0x4e35db(0x3ac),_0x4e35db(0x36f)));}),app[_0x44b6a0(0x244)]('/:bot/support',(_0x405099,_0x1526e6)=>{const _0x369729=_0x44b6a0;_0x1526e6[_0x369729(0x294)](path['join'](__dirname,bbpath2,'build',_0x369729(0x36f)));});if(HOST)http[_0x44b6a0(0x319)](PORT,HOST);else http[_0x44b6a0(0x319)](PORT);const io=require(_0x44b6a0(0x2b1))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4211fc=_0x44b6a0;let _0x5c4abc=_0x4211fc(0x33b);const _0x148efb=networkInterfaces(),_0x1e0d0e={};for(const _0x3e3c12 of Object['keys'](_0x148efb)){for(const _0x5e25c4 of _0x148efb[_0x3e3c12]){if((_0x5e25c4[_0x4211fc(0x211)]==_0x4211fc(0x242)||_0x5e25c4[_0x4211fc(0x211)]==0x4)&&!_0x5e25c4[_0x4211fc(0x29f)]){const _0x4132b9=ipaddr[_0x4211fc(0x2de)](_0x5e25c4[_0x4211fc(0x2db)])['range']();_0x4132b9!='private'&&(!_0x1e0d0e[_0x3e3c12]&&(_0x1e0d0e[_0x3e3c12]=[]),_0x1e0d0e[_0x3e3c12][_0x4211fc(0x2c1)](_0x5e25c4['address']),_0x5c4abc=_0x5e25c4[_0x4211fc(0x2db)]);}}}return{'serverip':_0x5c4abc,'netinterfaces':_0x1e0d0e};}async function startServer(){const _0x13b5fb=_0x44b6a0,{serverip:_0x5d2d99,netinterfaces:_0x10d43a}=getServerIP();logger[_0x13b5fb(0x209)](''),logger[_0x13b5fb(0x209)](_0x13b5fb(0x37f)),await logger['full'](_0x13b5fb(0x282)+serverversion+_0x13b5fb(0x26a)+(environment==_0x13b5fb(0x35b)?'(staging)':'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x13b5fb(0x25b)+_0x5d2d99+':'+PORT+_0x13b5fb(0x380))),logger['simple'](_0x13b5fb(0x37f));if(config[_0x13b5fb(0x236)]!=0x0)for(const _0x5e4bf4 of config){const _0x5aa111=_0x5e4bf4[_0x13b5fb(0x3a5)]==_0x13b5fb(0x2f2)?'a':'m';if(_0x5e4bf4[_0x13b5fb(0x20a)]==_0x13b5fb(0x256)||_0x5e4bf4['status']==_0x13b5fb(0x361))await logger['full'](_0x13b5fb(0x2be)+_0x5aa111+_0x13b5fb(0x396)+_0x5e4bf4['botID']+_0x13b5fb(0x352)+_0x5e4bf4[_0x13b5fb(0x362)]),startBot([_0x5e4bf4[_0x13b5fb(0x274)],userID],{'cwd':bbpath},function(_0x37a786){const _0x32aa20=_0x13b5fb;if(_0x37a786)logger[_0x32aa20(0x333)](_0x37a786);});else(_0x5e4bf4[_0x13b5fb(0x20a)]==_0x13b5fb(0x2bd)||_0x5e4bf4['status']==_0x13b5fb(0x245))&&await logger[_0x13b5fb(0x333)]('Idling\x20('+_0x5aa111+_0x13b5fb(0x33d)+_0x5e4bf4[_0x13b5fb(0x274)]+_0x13b5fb(0x352)+_0x5e4bf4[_0x13b5fb(0x362)]);}else!newBot&&logger['simple'](_0x13b5fb(0x366));if(newBot)addBot();logger[_0x13b5fb(0x209)](_0x13b5fb(0x37f)),logger[_0x13b5fb(0x209)](''),await logger[_0x13b5fb(0x2ba)](_0x13b5fb(0x3b7)+nodeversion),await logger[_0x13b5fb(0x2ba)]('Network\x20Interfaces:',_0x10d43a);}function startSocket(){io['on']('connection',_0x15e38a=>{const _0x343d30=_0x1c11;let _0x5aab7d,_0x3b8acc,_0x28d37e,_0x382da3,_0x3d3aed;const _0x5be966=_0x15e38a[_0x343d30(0x3b6)]['headers'][_0x343d30(0x36e)];_0x3b8acc=_0x5be966['match'](/bot[0-9]{3}/);if(_0x3b8acc)_0x28d37e=_0x3b8acc[0x0][_0x343d30(0x2d3)](/[0-9]{3}/);if(_0x28d37e)_0x5aab7d=_0x28d37e[0x0];else _0x5aab7d=_0x343d30(0x38b);const _0x4c0ed0=_0x15e38a[_0x343d30(0x3b6)][_0x343d30(0x29b)][_0x343d30(0x351)];if(!_0x4c0ed0)_0x15e38a['emit'](_0x343d30(0x20a),{'publicKey':secure[_0x343d30(0x331)]});else{_0x382da3=timelyDecrypt(_0x4c0ed0,![]);if(!_0x382da3)_0x15e38a['emit'](_0x343d30(0x20a),{'publicKey':secure[_0x343d30(0x331)]});else{_0x3d3aed=normalizeIP(_0x15e38a['conn'][_0x343d30(0x2c4)])['store'];if(!devices[_0x382da3])devices[_0x382da3]={'uuid':_0x382da3,'access':{'token':null}};devices[_0x382da3]['ip']=_0x3d3aed;const _0x2117ea=addClient(_0x15e38a['id'],_0x382da3,_0x5aab7d);setAccess(_0x2117ea),emitMessages(),_0x15e38a['on'](_0x343d30(0x241),_0x16628d=>{const _0x5b0496=_0x343d30,_0x317805=timelyDecrypt(_0x16628d[_0x5b0496(0x323)]);if(_0x317805){_0x16628d={'username':_0x16628d[_0x5b0496(0x2fe)],'password':_0x317805},devices[_0x382da3][_0x5b0496(0x34c)]=validateCredentials(_0x16628d,_0x382da3);if(devices[_0x382da3][_0x5b0496(0x34c)][_0x5b0496(0x36a)]==![]&&devices[_0x382da3][_0x5b0496(0x34c)][_0x5b0496(0x2a5)]=='2FA\x20login\x20required')_0x15e38a[_0x5b0496(0x355)](_0x5b0496(0x20a),{'access':devices[_0x382da3][_0x5b0496(0x34c)]}),loginAccess2FA(_0x382da3,_0x3d3aed);else{if(devices[_0x382da3][_0x5b0496(0x34c)][_0x5b0496(0x36a)]==![]&&devices[_0x382da3][_0x5b0496(0x34c)]['reason']==_0x5b0496(0x1f3))_0x15e38a[_0x5b0496(0x355)](_0x5b0496(0x20a),{'access':devices[_0x382da3][_0x5b0496(0x34c)]});else devices[_0x382da3][_0x5b0496(0x34c)][_0x5b0496(0x36a)]&&devices[_0x382da3][_0x5b0496(0x34c)][_0x5b0496(0x2a5)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x382da3)[_0x5b0496(0x2ce)](_0x400649=>{setAccess(_0x400649);}),logger[_0x5b0496(0x2ba)]('Logged\x20in\x20user\x20...'+_0x382da3[_0x5b0496(0x261)](-0x8)),setTokenRefresh(_0x382da3),setSessionTimeout(_0x5b0496(0x241),_0x382da3));}}else logger[_0x5b0496(0x333)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x15e38a['on']('reset-password',()=>{resetPassword();}),_0x15e38a['on'](_0x343d30(0x270),_0x36dbea=>{removeClient(_0x15e38a['id']);}),_0x5aab7d==_0x343d30(0x38b)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1472f5){const _0x3d3865=_0x44b6a0;if(_0x1472f5!=_0x3d3865(0x38b)&&config['apiKey']!=''){if(pid[_0x1472f5])pid[_0x1472f5]['send']({'function':_0x3d3865(0x214),'args':null});}_0x1472f5!=_0x3d3865(0x38b)&&broadcastToBots(_0x3d3865(0x3c9),JSON['stringify'](config));}function reloadBotManager(){const _0x40879a=_0x44b6a0;getClientsWithBotID(_0x40879a(0x38b))[_0x40879a(0x2ce)](_0x350e17=>{const _0x574e37=_0x40879a;getSocket(_0x350e17['id'])[_0x574e37(0x355)](_0x574e37(0x20a),{'access':{'allow':![],'reason':_0x574e37(0x1e5),'token':null}});});}function getSocket(_0x788ac4){const _0x1e4953=_0x44b6a0;return io[_0x1e4953(0x3b5)][_0x1e4953(0x3b5)][_0x1e4953(0x244)](_0x788ac4);}function setAccess(_0x5e414a){const _0x9b8219=_0x44b6a0,_0x264e81=getSocket(_0x5e414a['id']),_0x1bf166=_0x5e414a[_0x9b8219(0x26e)],_0x5e98bc=_0x5e414a[_0x9b8219(0x230)];devices[_0x1bf166][_0x9b8219(0x34c)]=validateAccess(devices[_0x1bf166][_0x9b8219(0x34c)][_0x9b8219(0x26c)],_0x1bf166),logger['debug'](_0x9b8219(0x2a7)+devices[_0x1bf166][_0x9b8219(0x34c)][_0x9b8219(0x2a5)]+'\x20|\x20client:\x20...'+_0x5e414a['id'][_0x9b8219(0x261)](-0x8)+_0x9b8219(0x3be)+_0x1bf166['slice'](-0x8)),_0x264e81['join'](_0x1bf166);if(devices[_0x1bf166]['access'][_0x9b8219(0x36a)]){_0x264e81[_0x9b8219(0x2a2)](_0x5e98bc);if(_0x5e98bc==_0x9b8219(0x38b))initializeSocketBotManager(_0x264e81);else initializeSocketBot(_0x264e81);initClient(_0x5e98bc);}devices[_0x1bf166]['access']['token']&&devices[_0x1bf166][_0x9b8219(0x34c)]['reason']==_0x9b8219(0x1e4)&&setSessionTimeout(_0x9b8219(0x358),_0x1bf166),devices[_0x1bf166]['access']['token']&&devices[_0x1bf166][_0x9b8219(0x34c)][_0x9b8219(0x2a5)]==_0x9b8219(0x266)&&setSessionTimeout('login',_0x1bf166),_0x264e81[_0x9b8219(0x355)](_0x9b8219(0x20a),{'status':_0x5e414a['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1bf166][_0x9b8219(0x34c)],'externalip':devices[_0x1bf166]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x9b8219(0x1f0)],'validInstallation':validInstallation}),devices[_0x1bf166]['access'][_0x9b8219(0x36a)]==![]&&devices[_0x1bf166][_0x9b8219(0x34c)][_0x9b8219(0x2a5)]==_0x9b8219(0x3b1)&&temporaryAccess2FA(_0x1bf166,devices[_0x1bf166]['ip']);}function setSessionTimeout(_0x3d2452,_0x4ba085){const _0x253ead=_0x44b6a0;let _0x3655d1;if(_0x3d2452==_0x253ead(0x241))_0x3655d1=loginExpiry*0x3c*0x3e8;else _0x3655d1=devices[_0x4ba085]['telegramIpApproval'][_0x253ead(0x3bb)]*0x3c*0x3e8-(new Date()[_0x253ead(0x3ae)]()-devices[_0x4ba085]['telegramIpApproval'][_0x253ead(0x2c7)]);if(devices[_0x4ba085][_0x253ead(0x210)])clearTimeout(devices[_0x4ba085][_0x253ead(0x210)]);devices[_0x4ba085][_0x253ead(0x210)]=setTimeout(()=>{const _0x25f44f=_0x253ead;if(devices[_0x4ba085]['pidRefreshToken'])clearTimeout(devices[_0x4ba085][_0x25f44f(0x314)]);removeSocketListeners(_0x4ba085),addBlacklist(_0x4ba085),devices[_0x4ba085][_0x25f44f(0x23b)]=null,devices[_0x4ba085][_0x25f44f(0x3a9)]=null,devices[_0x4ba085]['access'][_0x25f44f(0x26c)]=null,logger[_0x25f44f(0x2ba)]('Session\x20expired\x20for\x20user\x20...'+_0x4ba085[_0x25f44f(0x261)](-0x8)),devices[_0x4ba085][_0x25f44f(0x34c)]=validateAccess(devices[_0x4ba085]['access'][_0x25f44f(0x26c)],_0x4ba085),!(devices[_0x4ba085][_0x25f44f(0x34c)]['allow']&&devices[_0x4ba085][_0x25f44f(0x34c)][_0x25f44f(0x2a5)]==_0x25f44f(0x251))&&(_0x3d2452==_0x25f44f(0x241)?io['to'](_0x4ba085)[_0x25f44f(0x355)](_0x25f44f(0x20a),{'access':{'allow':![],'reason':_0x25f44f(0x2f0),'token':null}}):io['to'](_0x4ba085)['emit'](_0x25f44f(0x20a),{'access':{'allow':![],'reason':_0x25f44f(0x364),'token':null}})),devices[_0x4ba085]['access'][_0x25f44f(0x26c)]=null;},_0x3655d1);}function setTokenRefresh(_0x2e7591){const _0x2ea7f7=_0x44b6a0;if(devices[_0x2e7591][_0x2ea7f7(0x314)])clearTimeout(devices[_0x2e7591][_0x2ea7f7(0x314)]);devices[_0x2e7591]['pidRefreshToken']=setTimeout(()=>{const _0x2cfd15=_0x2ea7f7;getClientsWithUuid(_0x2e7591)['length']!=0x0?(devices[_0x2e7591][_0x2cfd15(0x34c)]=refreshToken(_0x2e7591),io['to'](_0x2e7591)[_0x2cfd15(0x355)]('status',{'status':_0x2cfd15(0x279),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2e7591]['access'],'externalip':devices[_0x2e7591]['ip'],'publicKey':secure[_0x2cfd15(0x331)],'validInstallation':validInstallation}),setTokenRefresh(_0x2e7591)):clearTimeout(devices[_0x2e7591]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5ebd8a){const _0x4ef7fd=_0x44b6a0,_0x36ee9e=getClient(_0x5ebd8a['id'])[_0x4ef7fd(0x26e)];_0x5ebd8a[_0x4ef7fd(0x355)](_0x4ef7fd(0x3c9),config),_0x5ebd8a[_0x4ef7fd(0x355)](_0x4ef7fd(0x32e),cleanSettings()),_0x5ebd8a['on']('add-bot',_0xd8534c=>{const _0x9b61ef=_0x4ef7fd;if(validateAccess(_0xd8534c,_0x36ee9e)[_0x9b61ef(0x36a)])addBot();else logger[_0x9b61ef(0x333)](_0x9b61ef(0x2b7));}),_0x5ebd8a['on'](_0x4ef7fd(0x387),(_0x50275f,_0x3e619e)=>{const _0x1c52a8=_0x4ef7fd;if(validateAccess(_0x3e619e,_0x36ee9e)[_0x1c52a8(0x36a)])toggleBot(_0x50275f['botID'],_0x50275f['status'],_0x50275f[_0x1c52a8(0x30a)]);else logger['full'](_0x1c52a8(0x281));}),_0x5ebd8a['on'](_0x4ef7fd(0x280),(_0x3d7218,_0xa70b62)=>{const _0x39c095=_0x4ef7fd;if(validateAccess(_0xa70b62,_0x36ee9e)[_0x39c095(0x36a)])toggleBotMode(_0x3d7218);else logger['full'](_0x39c095(0x281));}),_0x5ebd8a['on'](_0x4ef7fd(0x2e1),(_0x5af71c,_0x242f52)=>{const _0x26b34c=_0x4ef7fd;if(validateAccess(_0x242f52,_0x36ee9e)[_0x26b34c(0x36a)])deleteBot(_0x5af71c);else logger[_0x26b34c(0x333)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5ebd8a['on'](_0x4ef7fd(0x2e4),(_0x1fce1c,_0x1651d0)=>{const _0x481629=_0x4ef7fd;if(validateAccess(_0x1651d0,_0x36ee9e)[_0x481629(0x36a)])storeSettings(_0x1fce1c,!![]);else logger[_0x481629(0x333)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5ebd8a['on'](_0x4ef7fd(0x2e8),_0x2fce33=>{const _0x167bab=_0x4ef7fd;if(validateAccess(_0x2fce33,_0x36ee9e)['allow'])updateBB(_0x167bab(0x39d));else logger['full'](_0x167bab(0x3cd));}),_0x5ebd8a['on']('reinstall-bb',_0x1551a6=>{const _0xce536c=_0x4ef7fd;if(validateAccess(_0x1551a6,_0x36ee9e)[_0xce536c(0x36a)])updateBB('reinstall');else logger[_0xce536c(0x333)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x5ebd8a['on']('get-backup-files',_0x3ba679=>{const _0x11bc36=_0x4ef7fd;if(validateAccess(_0x3ba679,_0x36ee9e)['allow']){const _0x5b1534=getClient(_0x5ebd8a['id']);if(_0x5b1534)getBackupFiles(_0x5b1534[_0x11bc36(0x26e)]);else logger[_0x11bc36(0x333)](_0x11bc36(0x398));}else logger[_0x11bc36(0x333)](_0x11bc36(0x206));}),_0x5ebd8a['on']('restore-backup-file',(_0x1a6cd1,_0x517e96)=>{const _0x229933=_0x4ef7fd;if(validateAccess(_0x517e96,_0x36ee9e)['allow'])restoreBackupFile(_0x1a6cd1);else logger['full'](_0x229933(0x388));}),_0x5ebd8a['on']('get-messages',_0xeeec1f=>{const _0x3c2954=_0x4ef7fd;if(validateAccess(_0xeeec1f,_0x36ee9e)[_0x3c2954(0x36a)])getMessages();else logger[_0x3c2954(0x333)](_0x3c2954(0x3ab));}),_0x5ebd8a['on']('confirm-message',(_0x49fe6e,_0x50d7db)=>{const _0x49f19b=_0x4ef7fd;if(validateAccess(_0x50d7db,_0x36ee9e)['allow'])confirmMessage(_0x49fe6e);else logger[_0x49f19b(0x333)](_0x49f19b(0x2a4));}),_0x5ebd8a['on'](_0x4ef7fd(0x2da),_0x3f2a64=>{const _0x4978f5=_0x4ef7fd;if(validateAccess(_0x3f2a64,_0x36ee9e)[_0x4978f5(0x36a)]){if(devices[_0x36ee9e][_0x4978f5(0x314)])clearTimeout(devices[_0x36ee9e][_0x4978f5(0x314)]);if(devices[_0x36ee9e]['pidExpireLogin'])clearTimeout(devices[_0x36ee9e][_0x4978f5(0x210)]);removeSocketListeners(getClient(_0x5ebd8a['id'])[_0x4978f5(0x26e)]),addBlacklist(_0x36ee9e),devices[_0x36ee9e]['telegramIpApproval']=null,devices[_0x36ee9e][_0x4978f5(0x3a9)]=null,devices[_0x36ee9e][_0x4978f5(0x34c)]['token']=null,logger[_0x4978f5(0x2ba)](_0x4978f5(0x218)+_0x36ee9e['slice'](-0x8)),io['to'](getClient(_0x5ebd8a['id'])['uuid'])[_0x4978f5(0x355)]('status',{'access':{'allow':![],'reason':_0x4978f5(0x2e6),'token':null}});}else logger[_0x4978f5(0x333)](_0x4978f5(0x28f));});}function initializeSocketBot(_0x242ecd){const _0xa63499=_0x44b6a0,_0x4236a1=getClient(_0x242ecd['id'])[_0xa63499(0x230)],_0x14546c=getClient(_0x242ecd['id'])['uuid'];_0x242ecd['on']('get-logs',(_0x2007f4,_0xadcc68)=>{const _0x149974=_0xa63499;if(validateAccess(_0xadcc68,_0x14546c)[_0x149974(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x149974(0x3d3)]({'function':'emitHistory','args':_0x2007f4});}else logger[_0x149974(0x333)](_0x149974(0x2cf));}),_0x242ecd['on'](_0xa63499(0x286),(_0x3bedb7,_0x489e90)=>{const _0x238a10=_0xa63499;if(validateAccess(_0x489e90,_0x14546c)[_0x238a10(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x238a10(0x3d3)]({'function':_0x238a10(0x22c),'args':_0x3bedb7});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x242ecd['on'](_0xa63499(0x378),(_0x50ec85,_0x3e25a0)=>{const _0x572bfb=_0xa63499;if(validateAccess(_0x3e25a0,_0x14546c)[_0x572bfb(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1]['send']({'function':_0x572bfb(0x343),'args':_0x50ec85});}else logger['full'](_0x572bfb(0x20c));}),_0x242ecd['on'](_0xa63499(0x24b),(_0x39f02b,_0x2ac491)=>{const _0x318b45=_0xa63499;if(validateAccess(_0x2ac491,_0x14546c)[_0x318b45(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x318b45(0x3d3)]({'function':'storeConfiguration','args':_0x39f02b});}else logger[_0x318b45(0x333)](_0x318b45(0x25c));}),_0x242ecd['on'](_0xa63499(0x257),(_0x344d66,_0x7c3824)=>{const _0x1087d3=_0xa63499;if(validateAccess(_0x7c3824,_0x14546c)['allow']){if(pid[_0x4236a1])pid[_0x4236a1][_0x1087d3(0x3d3)]({'function':_0x1087d3(0x2bb),'args':_0x344d66});}else logger[_0x1087d3(0x333)](_0x1087d3(0x394));}),_0x242ecd['on'](_0xa63499(0x391),(_0x15631a,_0xdae604)=>{const _0x1e1778=_0xa63499;if(validateAccess(_0xdae604,_0x14546c)[_0x1e1778(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1]['send']({'function':'storeFiat','args':_0x15631a});}else logger[_0x1e1778(0x333)](_0x1e1778(0x39f));}),_0x242ecd['on'](_0xa63499(0x3a7),_0x29a598=>{const _0x53c8d6=_0xa63499;if(validateAccess(_0x29a598,_0x14546c)[_0x53c8d6(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x53c8d6(0x3d3)]({'function':_0x53c8d6(0x374),'args':null});}else logger[_0x53c8d6(0x333)](_0x53c8d6(0x31f));}),_0x242ecd['on']('get-starting-balances',_0x24aa9f=>{const _0x81ec21=_0xa63499;if(validateAccess(_0x24aa9f,_0x14546c)[_0x81ec21(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x81ec21(0x3d3)]({'function':_0x81ec21(0x229),'args':null});}else logger[_0x81ec21(0x333)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x242ecd['on']('place-order',(_0x491e21,_0x557692)=>{const _0x44c706=_0xa63499;if(validateAccess(_0x557692,_0x14546c)[_0x44c706(0x36a)]){if(pid[_0x4236a1])pid[_0x4236a1][_0x44c706(0x3d3)]({'function':_0x44c706(0x1f8),'args':_0x491e21});}else logger[_0x44c706(0x333)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x242ecd['on'](_0xa63499(0x1e7),_0x159a01=>{const _0x11547f=_0xa63499;if(validateAccess(_0x159a01,_0x14546c)['allow']){if(pid[_0x4236a1])pid[_0x4236a1][_0x11547f(0x3d3)]({'function':_0x11547f(0x30c),'args':null});}else logger[_0x11547f(0x333)](_0x11547f(0x1fa));}),_0x242ecd['on'](_0xa63499(0x298),_0x4bb02b=>{const _0x3545ce=_0xa63499;if(validateAccess(_0x4bb02b,_0x14546c)['allow']){if(pid[_0x4236a1])pid[_0x4236a1]['send']({'function':'showConfig','args':null});}else logger[_0x3545ce(0x333)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x242ecd['on'](_0xa63499(0x2e8),_0x30b216=>{const _0x2247e6=_0xa63499;if(validateAccess(_0x30b216,_0x14546c)[_0x2247e6(0x36a)])updateBB(_0x2247e6(0x39d));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x242ecd['on'](_0xa63499(0x339),_0x357a55=>{const _0x5a91a5=_0xa63499;if(validateAccess(_0x357a55,_0x14546c)[_0x5a91a5(0x36a)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x242ecd['on'](_0xa63499(0x2ee),(_0x23a36c,_0x386245)=>{const _0x1b1abc=_0xa63499;if(validateAccess(_0x386245,_0x14546c)[_0x1b1abc(0x36a)])confirmMessage(_0x23a36c);else logger[_0x1b1abc(0x333)](_0x1b1abc(0x2a4));}),_0x242ecd['on'](_0xa63499(0x2da),_0x36f50b=>{const _0x460f6e=_0xa63499;if(validateAccess(_0x36f50b,_0x14546c)['allow']){if(devices[_0x14546c][_0x460f6e(0x314)])clearTimeout(devices[_0x14546c][_0x460f6e(0x314)]);if(devices[_0x14546c][_0x460f6e(0x210)])clearTimeout(devices[_0x14546c][_0x460f6e(0x210)]);removeSocketListeners(getClient(_0x242ecd['id'])['uuid']),addBlacklist(_0x14546c),devices[_0x14546c][_0x460f6e(0x23b)]=null,devices[_0x14546c][_0x460f6e(0x3a9)]=null,devices[_0x14546c][_0x460f6e(0x34c)][_0x460f6e(0x26c)]=null,logger[_0x460f6e(0x2ba)](_0x460f6e(0x218)+_0x14546c[_0x460f6e(0x261)](-0x8)),io['to'](getClient(_0x242ecd['id'])[_0x460f6e(0x26e)])[_0x460f6e(0x355)](_0x460f6e(0x20a),{'access':{'allow':![],'reason':_0x460f6e(0x2e6),'token':null}});}else logger[_0x460f6e(0x333)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x30b743){getClientsWithUuid(_0x30b743)['forEach'](_0x453684=>{getSocket(_0x453684['id'])['removeAllListeners']();});}function cleanSettings(){const _0x11e4fb=_0x44b6a0;let _0x51a559=settings;return settings[_0x11e4fb(0x346)]&&settings['telegramToken']!=''&&(_0x51a559={..._0x51a559,'telegramToken':_0x11e4fb(0x2fd)}),settings['bbPassword']&&settings[_0x11e4fb(0x377)]!=''&&(_0x51a559={..._0x51a559,'bbPassword':_0x11e4fb(0x2fd)}),(settings[_0x11e4fb(0x377)]&&settings['bbPassword']==_0x11e4fb(0x3b3)||settings[_0x11e4fb(0x346)]&&settings[_0x11e4fb(0x346)]=='***')&&(_0x51a559={..._0x51a559,'restored':{'password':settings[_0x11e4fb(0x377)]==_0x11e4fb(0x3b3),'telegram':settings[_0x11e4fb(0x346)]==_0x11e4fb(0x3b3)}}),_0x51a559;}async function updateBB(_0x29314e){const _0x14c18e=_0x44b6a0;await backupConfigFiles(),installingUpdate=!![],config[_0x14c18e(0x2ce)](_0x2c83a8=>{restartBot(_0x2c83a8['botID']);});if(_0x29314e=='update')process[_0x14c18e(0x3d3)]({'update':!![],'environment':environment},_0x2963f4=>{});else _0x29314e==_0x14c18e(0x1ee)&&process[_0x14c18e(0x3d3)]({'reinstall':!![],'environment':environment},_0x5d234f=>{});}function startBot(_0x408715,_0x5b18f8,_0x11a3b4){const _0x86e6fa=_0x44b6a0;if(debugging)_0x408715[_0x86e6fa(0x2c1)]('-d');let _0x1864c9=![];const _0x4f43df=_0x408715[0x0];_0x5b18f8={..._0x5b18f8,'stdio':['inherit','inherit',_0x86e6fa(0x226),_0x86e6fa(0x2e3)]},pid[_0x4f43df]=childProcess[_0x86e6fa(0x25d)](botfile,_0x408715,_0x5b18f8),pid[_0x4f43df]['on'](_0x86e6fa(0x2e0),_0x55673e=>{const _0x3d31df=_0x86e6fa;switch(Object['keys'](_0x55673e)[0x0]){case _0x3d31df(0x362):updateBotName(_0x4f43df,_0x55673e['botname']);break;case _0x3d31df(0x390):updateBotManager();break;case _0x3d31df(0x20a):updateStatus(_0x4f43df,_0x55673e[_0x3d31df(0x20a)]);break;case _0x3d31df(0x30a):updateLive(_0x4f43df,_0x55673e['live']);break;case'started':updateLive(_0x4f43df,_0x55673e[_0x3d31df(0x30b)]),io['to'](_0x4f43df)['emit'](_0x3d31df(0x20a),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x55673e[_0x3d31df(0x293)]==_0x3d31df(0x2bc)&&restartBot(_0x4f43df);_0x55673e[_0x3d31df(0x293)]==_0x3d31df(0x327)&&toggleBot(_0x4f43df,_0x3d31df(0x2bd),_0x3d31df(0x234));break;case _0x3d31df(0x3a2):sendTelegramBot(_0x4f43df,_0x55673e[_0x3d31df(0x3a2)]);break;case'telegrammsg':sendTelegramMsg(_0x55673e['telegrammsg']);break;case _0x3d31df(0x33c):io['to'](_0x4f43df)[_0x3d31df(0x355)](_0x55673e[_0x3d31df(0x33c)],_0x55673e[_0x3d31df(0x3c1)]);break;}}),pid[_0x4f43df]['on'](_0x86e6fa(0x2b8),function(_0x1dc00b){if(_0x1864c9)return;_0x1864c9=!![],_0x11a3b4(_0x1dc00b);}),pid[_0x4f43df]['on'](_0x86e6fa(0x1e2),async function(_0x4fb092){const _0x536a96=_0x86e6fa;if(terminating)return;if(installingUpdate){logger['debug'](_0x536a96(0x21b)),io['close']();return;}if(_0x1864c9)return;_0x1864c9=!![],_0x11a3b4(null);const _0x1a17c3=dbConfig[_0x536a96(0x244)](_0x536a96(0x3c9))[_0x536a96(0x2b6)]({'botID':_0x4f43df})['value']();_0x1a17c3&&(_0x1a17c3[_0x536a96(0x20a)]==_0x536a96(0x256)||_0x1a17c3[_0x536a96(0x20a)]==_0x536a96(0x361))&&(await sleep(0x3e8),updateLive(_0x4f43df,_0x536a96(0x234)),logger[_0x536a96(0x333)](_0x536a96(0x22b)+_0x4f43df),startBot([_0x4f43df,userID],{'cwd':bbpath},function(_0x16320b){const _0x35c0af=_0x536a96;if(_0x16320b)logger[_0x35c0af(0x333)](_0x16320b);}));});}function stopBot(_0x30915d){const _0x5386a5=_0x44b6a0;getClientsWithBotID(_0x30915d)[_0x5386a5(0x2ce)](_0x5b3ff4=>{const _0x1fb70f=_0x5386a5;getSocket(_0x5b3ff4['id'])[_0x1fb70f(0x270)](!![]),removeClient(_0x5b3ff4['id']);}),pid[_0x30915d]&&(pid[_0x30915d][_0x5386a5(0x327)](),pid[_0x30915d]=null);}function stopAllBots(){const _0x4bd365=_0x44b6a0;terminating=!![];const _0x197123=getEnabledBots();_0x197123[_0x4bd365(0x2ce)](_0x138093=>{stopBot(_0x138093['botID']);});}function restartBot(_0x126c8a){if(pid[_0x126c8a])pid[_0x126c8a]['kill']();}function addBot(){const _0x2ede19=_0x44b6a0;let _0x1a9310;for(let _0x2b281e=0x1;_0x2b281e<0x3e9;_0x2b281e++){_0x1a9310=_0x2b281e[_0x2ede19(0x24d)]()['padStart'](0x3,'0');let _0x4cf917=config['find'](_0x3c5b80=>_0x3c5b80[_0x2ede19(0x274)]==_0x1a9310);if(!_0x4cf917)break;}if(_0x1a9310==='1000'){logger[_0x2ede19(0x333)](_0x2ede19(0x1ec));return;}logger[_0x2ede19(0x333)](_0x2ede19(0x2a6)+_0x1a9310),dbConfig['get'](_0x2ede19(0x3c9))[_0x2ede19(0x2c1)]({'botID':_0x1a9310,'botname':_0x2ede19(0x259)+_0x1a9310,'status':_0x2ede19(0x361),'live':''})[_0x2ede19(0x34f)](),startBot([_0x1a9310,userID],{'cwd':bbpath},function(_0x4a8fde){const _0x332157=_0x2ede19;if(_0x4a8fde)logger[_0x332157(0x333)](_0x4a8fde);}),config=getConfiguration(),io['to'](_0x2ede19(0x38b))[_0x2ede19(0x355)](_0x2ede19(0x3c9),config),broadcastToBots(_0x2ede19(0x3c9),JSON[_0x2ede19(0x369)](config));}function deleteBot(_0x36c260){const _0x3ebe38=_0x44b6a0;getClientsWithBotID(_0x36c260)['forEach'](_0x41bc4a=>{getSocket(_0x41bc4a['id'])['disconnect'](!![]),removeClient(_0x41bc4a['id']);}),dbConfig['get']('bots')['remove']({'botID':_0x36c260})['write'](),logger[_0x3ebe38(0x333)]('Deleted\x20Bot\x20'+_0x36c260),stopBot(_0x36c260);try{if(fs[_0x3ebe38(0x3c5)](path[_0x3ebe38(0x2a2)](configpath,_0x3ebe38(0x389)+_0x36c260+_0x3ebe38(0x252))))fs[_0x3ebe38(0x29d)](path[_0x3ebe38(0x2a2)](configpath,_0x3ebe38(0x389)+_0x36c260+_0x3ebe38(0x252)));if(fs[_0x3ebe38(0x3c5)](path['join'](configpath,'bot-'+_0x36c260+_0x3ebe38(0x2d9))))fs['unlinkSync'](path[_0x3ebe38(0x2a2)](configpath,_0x3ebe38(0x389)+_0x36c260+_0x3ebe38(0x2d9)));if(fs[_0x3ebe38(0x3c5)](path[_0x3ebe38(0x2a2)](configpath,_0x3ebe38(0x389)+_0x36c260+'-performance.json')))fs[_0x3ebe38(0x29d)](path['join'](configpath,_0x3ebe38(0x389)+_0x36c260+_0x3ebe38(0x2d5)));if(fs['existsSync'](path[_0x3ebe38(0x2a2)](configpath,_0x3ebe38(0x389)+_0x36c260+'-results.json')))fs['unlinkSync'](path['join'](configpath,_0x3ebe38(0x389)+_0x36c260+_0x3ebe38(0x383)));}catch(_0x54bd02){if(_0x54bd02)logger[_0x3ebe38(0x333)](_0x3ebe38(0x20b),_0x54bd02);}config=getConfiguration(),io['to'](_0x3ebe38(0x38b))[_0x3ebe38(0x355)](_0x3ebe38(0x3c9),config),broadcastToBots(_0x3ebe38(0x3c9),JSON['stringify'](config));}function toggleBot(_0x3dcfdb,_0x4568aa,_0x16f0f6){const _0x5e7ae0=_0x44b6a0;dbConfig[_0x5e7ae0(0x244)](_0x5e7ae0(0x3c9))[_0x5e7ae0(0x2b6)]({'botID':_0x3dcfdb})[_0x5e7ae0(0x3aa)]({'status':_0x4568aa})[_0x5e7ae0(0x3aa)]({'live':_0x16f0f6})[_0x5e7ae0(0x34f)]();if(_0x4568aa=='enabled'||_0x4568aa=='new')logger[_0x5e7ae0(0x333)](_0x5e7ae0(0x262)+_0x3dcfdb),startBot([_0x3dcfdb,userID],{'cwd':bbpath},function(_0x2fefc5){const _0x30a791=_0x5e7ae0;if(_0x2fefc5)logger[_0x30a791(0x333)](_0x2fefc5);});else(_0x4568aa==_0x5e7ae0(0x2bd)||_0x4568aa==_0x5e7ae0(0x245))&&(logger['full'](_0x5e7ae0(0x348)+_0x3dcfdb),stopBot(_0x3dcfdb));config=getConfiguration(),io['to']('botmanager')[_0x5e7ae0(0x355)](_0x5e7ae0(0x3c9),config),broadcastToBots(_0x5e7ae0(0x3c9),JSON[_0x5e7ae0(0x369)](config));}function toggleStatus(_0x35b572){const _0x98e7e6=_0x44b6a0;let _0x3090ca=dbConfig[_0x98e7e6(0x244)](_0x98e7e6(0x3c9))[_0x98e7e6(0x2b6)]({'botID':_0x35b572})[_0x98e7e6(0x342)](),_0x496898;if(_0x3090ca[_0x98e7e6(0x20a)]===_0x98e7e6(0x256))_0x496898='disabled';else{if(_0x3090ca[_0x98e7e6(0x20a)]===_0x98e7e6(0x361))_0x496898=_0x98e7e6(0x245);else{if(_0x3090ca['status']===_0x98e7e6(0x245))_0x496898=_0x98e7e6(0x361);else{if(_0x3090ca[_0x98e7e6(0x20a)]===_0x98e7e6(0x2bd))_0x496898='enabled';}}}return _0x496898;}function updateStatus(_0x78c63a,_0x2e447a){const _0x5d3f16=_0x44b6a0;dbConfig[_0x5d3f16(0x244)](_0x5d3f16(0x3c9))[_0x5d3f16(0x2b6)]({'botID':_0x78c63a})[_0x5d3f16(0x3aa)]({'status':_0x2e447a})[_0x5d3f16(0x34f)](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x5d3f16(0x3c9),JSON['stringify'](config));}function updateLive(_0x20e5eb,_0x3f01fe){const _0x19fefe=_0x44b6a0;dbConfig['get'](_0x19fefe(0x3c9))[_0x19fefe(0x2b6)]({'botID':_0x20e5eb})[_0x19fefe(0x3aa)]({'live':_0x3f01fe})['write'](),config=getConfiguration(),io['to'](_0x19fefe(0x38b))[_0x19fefe(0x355)](_0x19fefe(0x3c9),config),broadcastToBots('bots',JSON[_0x19fefe(0x369)](config));}function updateBotName(_0x376f60,_0x1924f3){const _0x5c9dbc=_0x44b6a0;dbConfig['get'](_0x5c9dbc(0x3c9))[_0x5c9dbc(0x2b6)]({'botID':_0x376f60})['assign']({'botname':_0x1924f3})['write'](),config=getConfiguration(),io['to'](_0x5c9dbc(0x38b))[_0x5c9dbc(0x355)](_0x5c9dbc(0x3c9),config),broadcastToBots(_0x5c9dbc(0x3c9),JSON['stringify'](config));}function updateBotManager(){const _0x159384=_0x44b6a0;config=getConfiguration(),io['to'](_0x159384(0x38b))[_0x159384(0x355)](_0x159384(0x3c9),config),broadcastToBots(_0x159384(0x3c9),JSON[_0x159384(0x369)](config));}function toggleBotMode(_0x59175c){const _0x2da8d9=_0x44b6a0;if(pid[_0x59175c])pid[_0x59175c][_0x2da8d9(0x3d3)]({'function':_0x2da8d9(0x2f4),'args':null});else{const _0x5f44de=configpath+'bot-'+_0x59175c+_0x2da8d9(0x252),_0xf6d951=fs['readFileSync'](_0x5f44de),_0x2a4036=JSON[_0x2da8d9(0x2de)](_0xf6d951),_0x313642=_0x2a4036[_0x2da8d9(0x230)][0x0][_0x2da8d9(0x39b)];_0x2a4036[_0x2da8d9(0x230)][0x0][_0x2da8d9(0x39b)]=!_0x313642;const _0x2e1545=JSON[_0x2da8d9(0x369)](_0x2a4036,null,0x2);fs['writeFileSync'](_0x5f44de,_0x2e1545),config=getConfiguration(),io['to'](_0x2da8d9(0x38b))[_0x2da8d9(0x355)](_0x2da8d9(0x3c9),config),broadcastToBots(_0x2da8d9(0x3c9),JSON[_0x2da8d9(0x369)](config));}}function validateTelegram(_0x1daf07){const _0x4af9d2=_0x44b6a0;if(_0x1daf07['from'][_0x4af9d2(0x2fe)]!=settings[_0x4af9d2(0x318)]&&'@'+_0x1daf07[_0x4af9d2(0x3c7)][_0x4af9d2(0x2fe)]!=settings['telegramUsername']||_0x1daf07[_0x4af9d2(0x204)]['id']!=settings['telegramChatId'])return sendTelegram(_0x1daf07[_0x4af9d2(0x204)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x4af9d2(0x215)}),![];return!![];}async function initTelegram(){const _0x5d1a88=_0x44b6a0;if(tgBot)tgBot[_0x5d1a88(0x293)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x5d1a88(0x346)]);let _0xaec26c=_0x5d1a88(0x2d7);_0xaec26c+='\x0a',_0xaec26c+=_0x5d1a88(0x3a0),_0xaec26c+='/disable\x20-\x20disable\x20notifications\x0a',_0xaec26c+=_0x5d1a88(0x3cf),_0xaec26c+=_0x5d1a88(0x1fe),_0xaec26c+='/on\x20-\x20start\x20bot(s)\x0a',_0xaec26c+='/off\x20-\x20stop\x20bot(s)\x0a',_0xaec26c+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0xaec26c+='/names\x20-\x20show\x20bot\x20names\x0a',_0xaec26c+=_0x5d1a88(0x341),_0xaec26c+=_0x5d1a88(0x33a),_0xaec26c+=_0x5d1a88(0x2f7),_0xaec26c+=_0x5d1a88(0x264),_0xaec26c+=_0x5d1a88(0x232),_0xaec26c+=_0x5d1a88(0x21f);let _0x4a011e=_0x5d1a88(0x306);_0x4a011e+='\x0a',_0x4a011e+=_0xaec26c,tgBot['catch']((_0x5846c0,_0x1d6740)=>{const _0x22ed4a=_0x5d1a88;logger[_0x22ed4a(0x209)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x22ed4a(0x2ba)](_0x22ed4a(0x32c),_0x5846c0);}),tgBot[_0x5d1a88(0x381)](async(_0x50cf2b,_0x129ced)=>{const _0x1467be=_0x5d1a88;if(!(!settings[_0x1467be(0x2bf)]&&_0x50cf2b[_0x1467be(0x39d)][_0x1467be(0x2e0)][_0x1467be(0x34d)]==_0x1467be(0x376))){if(!validateTelegram(_0x50cf2b))return;}_0x129ced();}),tgBot[_0x5d1a88(0x3c0)]('start',async _0x3eb3e0=>{const _0x32560b=_0x5d1a88;if(!settings[_0x32560b(0x2bf)])updateSetting(_0x32560b(0x2bf),_0x3eb3e0[_0x32560b(0x204)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x3eb3e0))return;await sendTelegram(_0x3eb3e0[_0x32560b(0x204)]['id'],_0x4a011e);}),tgBot[_0x5d1a88(0x3c0)]('enable',async _0x405678=>{const _0x4b9245=_0x5d1a88;updateSetting(_0x4b9245(0x37e),!![]),await sendTelegram(_0x405678[_0x4b9245(0x204)]['id'],_0x4b9245(0x29a));}),tgBot[_0x5d1a88(0x3c0)](_0x5d1a88(0x3a8),async _0x4b2793=>{const _0x21e00d=_0x5d1a88;await sendTelegram(_0x4b2793[_0x21e00d(0x204)]['id'],_0x21e00d(0x340)),updateSetting(_0x21e00d(0x37e),![]);}),tgBot[_0x5d1a88(0x3c0)](_0x5d1a88(0x290),async _0x58849b=>{const _0x20317d=_0x5d1a88,_0x5d9e56=Markup[_0x20317d(0x212)]([Markup[_0x20317d(0x2c8)]['callback'](_0x20317d(0x29e),'config_orders'),Markup[_0x20317d(0x2c8)][_0x20317d(0x203)]('Alerts',_0x20317d(0x311)),Markup[_0x20317d(0x2c8)][_0x20317d(0x203)](_0x20317d(0x20d),_0x20317d(0x2c9))]);_0x58849b['reply'](_0x20317d(0x384),_0x5d9e56);}),tgBot[_0x5d1a88(0x335)]('config_orders',async _0x18966b=>{const _0x1daa7b=_0x5d1a88;_0x18966b[_0x1daa7b(0x372)](),updateSetting('telegramEvents',_0x1daa7b(0x213)),updateSetting(_0x1daa7b(0x37e),!![]),await sendTelegram(_0x18966b['chat']['id'],_0x1daa7b(0x255));}),tgBot[_0x5d1a88(0x335)](_0x5d1a88(0x311),async _0x1729b4=>{const _0x153596=_0x5d1a88;_0x1729b4[_0x153596(0x372)](),updateSetting(_0x153596(0x2fc),_0x153596(0x31d)),updateSetting(_0x153596(0x37e),!![]),await sendTelegram(_0x1729b4[_0x153596(0x204)]['id'],_0x153596(0x3c2));}),tgBot[_0x5d1a88(0x335)]('config_all',async _0x2163ca=>{const _0x10a5b3=_0x5d1a88;_0x2163ca[_0x10a5b3(0x372)](),updateSetting(_0x10a5b3(0x2fc),_0x10a5b3(0x20e)),updateSetting(_0x10a5b3(0x37e),!![]),await sendTelegram(_0x2163ca[_0x10a5b3(0x204)]['id'],_0x10a5b3(0x36c));}),tgBot[_0x5d1a88(0x3c0)]('status',async _0x1500c5=>{const _0x5cfac9=_0x5d1a88,_0x2edddc=getBotsWithMode();let _0x2204c9=_0x5cfac9(0x2f6);config[_0x5cfac9(0x2ce)](_0x1e00be=>{const _0x15ada9=_0x5cfac9,_0x1d6032=_0x2edddc[_0x15ada9(0x2b6)](_0x55d318=>_0x55d318[_0x15ada9(0x274)]==_0x1e00be['botID'])[_0x15ada9(0x3a5)];_0x2204c9+=_0x15ada9(0x259)+_0x1e00be[_0x15ada9(0x274)]+':\x20'+_0x1e00be[_0x15ada9(0x20a)]+'\x20|\x20'+_0x1d6032+_0x15ada9(0x352)+_0x1e00be[_0x15ada9(0x30a)]+'\x0a';}),_0x2204c9+='\x0a',_0x2204c9+=_0x5cfac9(0x2ad),_0x2204c9+=!settings['telegramEnabled']?_0x5cfac9(0x2cd):_0x5cfac9(0x354),_0x2204c9+=settings[_0x5cfac9(0x37e)]?settings['telegramEvents']=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x5cfac9(0x315)+settings[_0x5cfac9(0x2fc)]+_0x5cfac9(0x260):'',await sendTelegram(_0x1500c5[_0x5cfac9(0x204)]['id'],_0x2204c9,{'parse_mode':_0x5cfac9(0x215)});}),tgBot[_0x5d1a88(0x3c0)](_0x5d1a88(0x2bc),async _0x25d324=>{const _0x32054d=_0x5d1a88,_0x4339fe=getEnabledBots();if(_0x4339fe[_0x32054d(0x236)]==0x0)await sendTelegram(_0x25d324[_0x32054d(0x204)]['id'],_0x32054d(0x2b4));else{if(_0x4339fe[_0x32054d(0x236)]>0x1)_0x4339fe['push']({'botID':_0x32054d(0x20e)});let _0x290bee=[],_0x5859c2=[];const _0x119fab=_0x4339fe[_0x32054d(0x236)]%0x4==0x0||_0x4339fe['length']%0x4==0x3||_0x4339fe['length']%0x3==0x1?0x4:0x3;let _0x27c501=0x0;_0x4339fe[_0x32054d(0x2ce)]((_0x5812da,_0x48d1df)=>{const _0x30bba1=_0x32054d;if(_0x48d1df%_0x119fab==0x0)_0x5859c2=[];_0x5859c2[_0x30bba1(0x2c1)](Markup[_0x30bba1(0x2c8)][_0x30bba1(0x203)](_0x5812da[_0x30bba1(0x274)]==_0x30bba1(0x20e)?_0x30bba1(0x285):_0x30bba1(0x259)+_0x5812da[_0x30bba1(0x274)],_0x30bba1(0x308)+_0x5812da[_0x30bba1(0x274)])),_0x48d1df%_0x119fab==0x0&&(_0x290bee[_0x27c501]=_0x5859c2,_0x27c501++);});const _0x366d8c=Markup[_0x32054d(0x212)](_0x290bee);_0x25d324[_0x32054d(0x26f)](_0x32054d(0x2ea),_0x366d8c);}}),tgBot[_0x5d1a88(0x335)](/restart_(.+)/,async _0x3aa1dd=>{const _0x39bd16=_0x5d1a88,_0xb71179=_0x3aa1dd[_0x39bd16(0x2d3)][0x1];_0x3aa1dd[_0x39bd16(0x372)](),_0xb71179==_0x39bd16(0x20e)?config[_0x39bd16(0x2ce)](_0x2cf281=>{const _0x3ee333=_0x39bd16;restartBot(_0x2cf281[_0x3ee333(0x274)]);}):restartBot(_0xb71179);}),tgBot[_0x5d1a88(0x3c0)]('on',async _0x2f102b=>{const _0x349817=_0x5d1a88,_0x2d2df0=getDisabledBots();if(_0x2d2df0[_0x349817(0x236)]==0x0)await sendTelegram(_0x2f102b['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x2d2df0[_0x349817(0x236)]>0x1)_0x2d2df0[_0x349817(0x2c1)]({'botID':_0x349817(0x20e)});let _0x4cdc32=[],_0x476af2=[];const _0x419af3=_0x2d2df0[_0x349817(0x236)]%0x4==0x0||_0x2d2df0[_0x349817(0x236)]%0x4==0x3||_0x2d2df0[_0x349817(0x236)]%0x3==0x1?0x4:0x3;let _0x3c877f=0x0;_0x2d2df0[_0x349817(0x2ce)]((_0x1ac5e2,_0x24c73a)=>{const _0x261b8a=_0x349817;if(_0x24c73a%_0x419af3==0x0)_0x476af2=[];_0x476af2[_0x261b8a(0x2c1)](Markup[_0x261b8a(0x2c8)][_0x261b8a(0x203)](_0x1ac5e2[_0x261b8a(0x274)]==_0x261b8a(0x20e)?'All\x20bots':_0x261b8a(0x259)+_0x1ac5e2['botID'],_0x261b8a(0x3ad)+_0x1ac5e2[_0x261b8a(0x274)])),_0x24c73a%_0x419af3==0x0&&(_0x4cdc32[_0x3c877f]=_0x476af2,_0x3c877f++);});const _0x32689c=Markup[_0x349817(0x212)](_0x4cdc32);_0x2f102b[_0x349817(0x26f)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x32689c);}}),tgBot[_0x5d1a88(0x335)](/on_(.+)/,async _0x170982=>{const _0x1dc625=_0x5d1a88,_0x2392a8=_0x170982[_0x1dc625(0x2d3)][0x1];_0x170982[_0x1dc625(0x372)]();if(_0x2392a8==_0x1dc625(0x20e)){const _0x4c2e27=getDisabledBots();await sendTelegram(_0x170982['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x4c2e27[_0x1dc625(0x2ce)](_0x5570cf=>{const _0x56fb29=_0x1dc625;if(_0x5570cf[_0x56fb29(0x274)]!=_0x56fb29(0x20e))toggleBot(_0x5570cf[_0x56fb29(0x274)],toggleStatus(_0x5570cf['botID']),_0x56fb29(0x234));});}else await sendTelegram(_0x170982[_0x1dc625(0x204)]['id'],_0x1dc625(0x29c)+_0x2392a8),toggleBot(_0x2392a8,toggleStatus(_0x2392a8),_0x1dc625(0x234));}),tgBot['command'](_0x5d1a88(0x1ef),async _0x48e470=>{const _0x453ef9=_0x5d1a88,_0x399e33=getEnabledBots();if(_0x399e33[_0x453ef9(0x236)]==0x0)await sendTelegram(_0x48e470[_0x453ef9(0x204)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x399e33[_0x453ef9(0x236)]>0x1)_0x399e33[_0x453ef9(0x2c1)]({'botID':_0x453ef9(0x20e)});let _0x5de675=[],_0x1ecee0=[];const _0x3882af=_0x399e33[_0x453ef9(0x236)]%0x4==0x0||_0x399e33['length']%0x4==0x3||_0x399e33[_0x453ef9(0x236)]%0x3==0x1?0x4:0x3;let _0x3b3de6=0x0;_0x399e33[_0x453ef9(0x2ce)]((_0x5cf7ed,_0x4d369e)=>{const _0x44e3f2=_0x453ef9;if(_0x4d369e%_0x3882af==0x0)_0x1ecee0=[];_0x1ecee0['push'](Markup[_0x44e3f2(0x2c8)][_0x44e3f2(0x203)](_0x5cf7ed['botID']==_0x44e3f2(0x20e)?_0x44e3f2(0x285):_0x44e3f2(0x259)+_0x5cf7ed['botID'],_0x44e3f2(0x393)+_0x5cf7ed[_0x44e3f2(0x274)])),_0x4d369e%_0x3882af==0x0&&(_0x5de675[_0x3b3de6]=_0x1ecee0,_0x3b3de6++);});const _0x3110a2=Markup[_0x453ef9(0x212)](_0x5de675);_0x48e470[_0x453ef9(0x26f)](_0x453ef9(0x34a),_0x3110a2);}}),tgBot['action'](/off_(.+)/,async _0x136e61=>{const _0x3f01b9=_0x5d1a88,_0x1d4c38=_0x136e61[_0x3f01b9(0x2d3)][0x1];_0x136e61[_0x3f01b9(0x372)]();if(_0x1d4c38==_0x3f01b9(0x20e)){const _0x50e94e=getEnabledBots();await sendTelegram(_0x136e61[_0x3f01b9(0x204)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x50e94e[_0x3f01b9(0x2ce)](_0x50ebab=>{const _0x25330d=_0x3f01b9;if(_0x50ebab[_0x25330d(0x274)]!=_0x25330d(0x20e))toggleBot(_0x50ebab[_0x25330d(0x274)],toggleStatus(_0x50ebab[_0x25330d(0x274)]),'stopped');});}else await sendTelegram(_0x136e61[_0x3f01b9(0x204)]['id'],_0x3f01b9(0x246)+_0x1d4c38),toggleBot(_0x1d4c38,toggleStatus(_0x1d4c38),_0x3f01b9(0x234));}),tgBot['command']('metrics',async _0x34f633=>{const _0x19a8b5=_0x5d1a88,_0x262088=getEnabledBots();if(_0x262088[_0x19a8b5(0x236)]==0x0)await sendTelegram(_0x34f633[_0x19a8b5(0x204)]['id'],_0x19a8b5(0x2b4));else{if(_0x262088[_0x19a8b5(0x236)]>0x1){let _0x21b9e3=[],_0x25b49d=[];const _0x13f800=_0x262088['length']%0x4==0x0||_0x262088[_0x19a8b5(0x236)]%0x4==0x3||_0x262088['length']%0x3==0x1?0x4:0x3;let _0x493ae0=0x0;_0x262088[_0x19a8b5(0x2ce)]((_0x5d04aa,_0xd401c7)=>{const _0x16f5c3=_0x19a8b5;if(_0xd401c7%_0x13f800==0x0)_0x25b49d=[];_0x25b49d[_0x16f5c3(0x2c1)](Markup[_0x16f5c3(0x2c8)][_0x16f5c3(0x203)](_0x16f5c3(0x259)+_0x5d04aa['botID'],'metrics_'+_0x5d04aa[_0x16f5c3(0x274)])),_0xd401c7%_0x13f800==0x0&&(_0x21b9e3[_0x493ae0]=_0x25b49d,_0x493ae0++);});const _0x27336e=Markup[_0x19a8b5(0x212)](_0x21b9e3);_0x34f633[_0x19a8b5(0x26f)](_0x19a8b5(0x320),_0x27336e);}else{const _0x5b20e0=_0x262088[0x0][_0x19a8b5(0x274)];if(pid[_0x5b20e0])pid[_0x5b20e0]['send']({'function':_0x19a8b5(0x338),'args':null});}}}),tgBot[_0x5d1a88(0x335)](/metrics_(.+)/,async _0x1aeadb=>{const _0x1bb39b=_0x5d1a88,_0x2d3546=_0x1aeadb[_0x1bb39b(0x2d3)][0x1];_0x1aeadb[_0x1bb39b(0x372)]();if(pid[_0x2d3546])pid[_0x2d3546]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x5d1a88(0x3c0)](_0x5d1a88(0x248),async _0x3b02ec=>{const _0x42a639=_0x5d1a88,_0x19ab49=getEnabledBots();if(_0x19ab49[_0x42a639(0x236)]==0x0)await sendTelegram(_0x3b02ec[_0x42a639(0x204)]['id'],_0x42a639(0x2b4));else{if(_0x19ab49[_0x42a639(0x236)]>0x1){let _0x40a1be=[],_0x373487=[];const _0x1ee265=_0x19ab49[_0x42a639(0x236)]%0x4==0x0||_0x19ab49[_0x42a639(0x236)]%0x4==0x3||_0x19ab49[_0x42a639(0x236)]%0x3==0x1?0x4:0x3;let _0x3361d0=0x0;_0x19ab49['forEach']((_0x4fae4e,_0x16f261)=>{const _0x1e664d=_0x42a639;if(_0x16f261%_0x1ee265==0x0)_0x373487=[];_0x373487['push'](Markup[_0x1e664d(0x2c8)][_0x1e664d(0x203)]('Bot\x20'+_0x4fae4e['botID'],_0x1e664d(0x2e2)+_0x4fae4e[_0x1e664d(0x274)])),_0x16f261%_0x1ee265==0x0&&(_0x40a1be[_0x3361d0]=_0x373487,_0x3361d0++);});const _0x46f26a=Markup[_0x42a639(0x212)](_0x40a1be);_0x3b02ec[_0x42a639(0x26f)](_0x42a639(0x27d),_0x46f26a);}else{const _0x472e8a=_0x19ab49[0x0]['botID'];if(pid[_0x472e8a])pid[_0x472e8a][_0x42a639(0x3d3)]({'function':_0x42a639(0x26d),'args':null});}}}),tgBot[_0x5d1a88(0x335)](/portfolio_(.+)/,async _0x3bd017=>{const _0x11c4cf=_0x5d1a88,_0x50bc3a=_0x3bd017[_0x11c4cf(0x2d3)][0x1];_0x3bd017[_0x11c4cf(0x372)]();if(pid[_0x50bc3a])pid[_0x50bc3a][_0x11c4cf(0x3d3)]({'function':_0x11c4cf(0x26d),'args':null});}),tgBot['command'](_0x5d1a88(0x39d),async _0x5e745c=>{const _0x11b371=_0x5d1a88;await getMessages();if(!updateAvailable)await sendTelegram(_0x5e745c[_0x11b371(0x204)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x5e745c[_0x11b371(0x204)]['id'],_0x11b371(0x23d));else{const _0x2b5819=Markup[_0x11b371(0x212)]([Markup[_0x11b371(0x2c8)][_0x11b371(0x203)](_0x11b371(0x3a3),'update_yes'),Markup[_0x11b371(0x2c8)][_0x11b371(0x203)]('No','update_no')]);_0x5e745c[_0x11b371(0x26f)](_0x11b371(0x32a),_0x2b5819);}}}),tgBot[_0x5d1a88(0x335)](/update_(.+)/,async _0x59a20f=>{const _0x559302=_0x5d1a88,_0x471a6e=_0x59a20f[_0x559302(0x2d3)][0x1];_0x59a20f[_0x559302(0x372)](),_0x471a6e=='yes'&&(await sendTelegram(_0x59a20f['chat']['id'],_0x559302(0x265)),updateBB(_0x559302(0x39d))),_0x471a6e=='no'&&await sendTelegram(_0x59a20f['chat']['id'],_0x559302(0x23e));}),tgBot['command']('reinstall',async _0x13b72d=>{const _0x27678a=_0x5d1a88;if(!validInstallation)await sendTelegram(_0x13b72d[_0x27678a(0x204)]['id'],_0x27678a(0x2c3));else{const _0x65859a=Markup[_0x27678a(0x212)]([Markup[_0x27678a(0x2c8)][_0x27678a(0x203)]('Yes',_0x27678a(0x312)),Markup[_0x27678a(0x2c8)]['callback']('No','reinstall_no')]);_0x13b72d[_0x27678a(0x26f)](_0x27678a(0x291),_0x65859a);}}),tgBot[_0x5d1a88(0x335)](/reinstall_(.+)/,async _0x4bbf18=>{const _0x33f27b=_0x5d1a88,_0x1ef2e3=_0x4bbf18[_0x33f27b(0x2d3)][0x1];_0x4bbf18[_0x33f27b(0x372)](),_0x1ef2e3==_0x33f27b(0x21e)&&(await sendTelegram(_0x4bbf18[_0x33f27b(0x204)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x33f27b(0x1ee))),_0x1ef2e3=='no'&&await sendTelegram(_0x4bbf18[_0x33f27b(0x204)]['id'],_0x33f27b(0x2b5));}),tgBot[_0x5d1a88(0x3c0)]('toggle',async _0x18d252=>{const _0x329111=_0x5d1a88,_0x33059b=getBotsWithMode();if(_0x33059b['length']==0x0)await sendTelegram(_0x18d252[_0x329111(0x204)]['id'],_0x329111(0x2b4));else{let _0x296688=[],_0x3faef2=[];const _0x2fa763=0x2;let _0x2bb759=0x0;_0x33059b[_0x329111(0x2ce)]((_0x400e82,_0x1f623b)=>{const _0xf7edf9=_0x329111;if(_0x1f623b%_0x2fa763==0x0)_0x3faef2=[];_0x3faef2[_0xf7edf9(0x2c1)](Markup[_0xf7edf9(0x2c8)][_0xf7edf9(0x203)](_0xf7edf9(0x259)+_0x400e82['botID']+'\x20('+_0x400e82[_0xf7edf9(0x3a5)]+')',_0xf7edf9(0x277)+_0x400e82[_0xf7edf9(0x274)])),_0x1f623b%_0x2fa763==0x0&&(_0x296688[_0x2bb759]=_0x3faef2,_0x2bb759++);});const _0x2146f3=Markup['inlineKeyboard'](_0x296688);_0x18d252[_0x329111(0x26f)](_0x329111(0x2ff),_0x2146f3);}}),tgBot[_0x5d1a88(0x335)](/toggle_(.+)/,async _0x4b43ab=>{const _0x55621e=_0x5d1a88,_0x5079e0=_0x4b43ab['match'][0x1];_0x4b43ab[_0x55621e(0x372)]();const _0x5db9fb=getBotsWithMode(),_0xc48469=_0x5db9fb[_0x55621e(0x2b6)](_0x31a2c1=>_0x31a2c1[_0x55621e(0x274)]==_0x5079e0),_0x5c8b92=_0xc48469[_0x55621e(0x3a5)]==_0x55621e(0x2f2)?_0x55621e(0x37d):'auto';await sendTelegram(_0x4b43ab[_0x55621e(0x204)]['id'],_0x55621e(0x2dc)+_0x5079e0+_0x55621e(0x386)+_0x5c8b92+_0x55621e(0x23f)),toggleBotMode(_0x5079e0);}),tgBot[_0x5d1a88(0x3c0)](_0x5d1a88(0x360),async _0xb61500=>{const _0x587168=_0x5d1a88;let _0x3c9e0b='';config[_0x587168(0x2ce)](_0xa26cbd=>{const _0x4d16f1=_0x587168;_0x3c9e0b+=_0x4d16f1(0x259)+_0xa26cbd[_0x4d16f1(0x274)]+':\x20'+_0xa26cbd[_0x4d16f1(0x362)]+'\x0a';}),await sendTelegram(_0xb61500['chat']['id'],_0x3c9e0b,{'parse_mode':_0x587168(0x215)});}),tgBot[_0x5d1a88(0x3c0)]('help',async _0x14b968=>{const _0x3dac69=_0x5d1a88;await sendTelegram(_0x14b968[_0x3dac69(0x204)]['id'],_0xaec26c);}),process[_0x5d1a88(0x344)](_0x5d1a88(0x1f5),()=>tgBot[_0x5d1a88(0x293)](_0x5d1a88(0x1f5))),process['once'](_0x5d1a88(0x2cb),()=>tgBot['stop'](_0x5d1a88(0x2cb))),tgBot[_0x5d1a88(0x38d)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x10615b,_0x3d1093,_0x440685){const _0x569278=_0x44b6a0;try{await tgBot[_0x569278(0x3a2)][_0x569278(0x2ec)](_0x10615b,_0x3d1093,_0x440685);}catch(_0x1a347c){console[_0x569278(0x349)](_0x569278(0x334),_0x1a347c);}}async function sendTelegramBot(_0x266be1,_0x1453ed){const _0x2b6911=_0x44b6a0;if(settings[_0x2b6911(0x37e)]){if(settings['telegramEvents']==_0x2b6911(0x20e)||(_0x1453ed[_0x2b6911(0x399)]=='error'||_0x1453ed['type']==_0x2b6911(0x3ba)||_0x1453ed[_0x2b6911(0x399)]==_0x2b6911(0x31e))&&settings[_0x2b6911(0x2fc)]==_0x2b6911(0x31d)||_0x1453ed[_0x2b6911(0x399)]=='order'&&settings['telegramEvents']==_0x2b6911(0x213)){if(tgBot&&settings[_0x2b6911(0x2bf)]){if(_0x1453ed['showname'])await sendTelegram(settings[_0x2b6911(0x2bf)],_0x1453ed['botname']+_0x2b6911(0x3a1)+_0x1453ed['event']);else await sendTelegram(settings['telegramChatId'],_0x2b6911(0x259)+_0x266be1+'\x20>\x20'+_0x1453ed[_0x2b6911(0x347)]);}}}}async function sendTelegramMsg(_0x5932ca,_0xc7e981=_0x44b6a0(0x215)){const _0x534f36=_0x44b6a0;return settings[_0x534f36(0x37e)]&&tgBot&&settings[_0x534f36(0x2bf)]?(await sendTelegram(settings[_0x534f36(0x2bf)],_0x5932ca,{'parse_mode':_0xc7e981}),!![]):![];}function getDeviceWithIp(_0x3a6b0f){const _0x57e604=_0x44b6a0;return devices[_0x57e604(0x2b6)](_0x2cb975=>_0x2cb975['ip']===_0x3a6b0f);}async function temporaryAccess2FA(_0x3306a9,_0x2a9d4c){const _0x3753d3=_0x44b6a0;let _0x5c7277=new Date(),_0x58f24d=![];if(lastIpApproval){if(_0x5c7277-lastIpApproval<0x1388)_0x58f24d=!![];}lastIpApproval=new Date();if(_0x58f24d)return;if(tgBot&&settings[_0x3753d3(0x2bf)]){const _0x423a0a=uuidRandom();tmpStorage[_0x423a0a]={'uuid':_0x3306a9,'externalip':_0x2a9d4c};const _0x5d6ef2=Markup[_0x3753d3(0x212)]([Markup[_0x3753d3(0x2c8)][_0x3753d3(0x203)](_0x3753d3(0x2f5),_0x3753d3(0x1e9)+_0x423a0a),Markup[_0x3753d3(0x2c8)][_0x3753d3(0x203)](_0x3753d3(0x28e),_0x3753d3(0x371)+_0x423a0a),Markup['button']['callback']('30\x20min',_0x3753d3(0x353)+_0x423a0a),Markup[_0x3753d3(0x2c8)]['callback']('reject','tempaccess_reject_'+_0x423a0a)]);await sendTelegram(settings[_0x3753d3(0x2bf)],_0x3753d3(0x3c8)+normalizeIP(_0x2a9d4c)[_0x3753d3(0x33e)]+'\x20?',_0x5d6ef2),tgBot[_0x3753d3(0x335)](/tempaccess_(.+)_(.+)/,async _0x55c7dc=>{const _0x3cad86=_0x3753d3,_0x3f9fe5=_0x55c7dc['match'][0x1],_0x438573=_0x55c7dc[_0x3cad86(0x2d3)][0x2],{uuid:_0x270f5a,externalip:_0x27fb50}=tmpStorage[_0x438573];delete tmpStorage[_0x438573],_0x55c7dc[_0x3cad86(0x372)](),devices[_0x270f5a][_0x3cad86(0x23b)]={'clientip':_0x27fb50,'timestamp':new Date()[_0x3cad86(0x3ae)](),'expiry':_0x3f9fe5},_0x3f9fe5!=_0x3cad86(0x1eb)?(await sendTelegram(_0x55c7dc['chat']['id'],_0x3cad86(0x39e)+_0x3f9fe5+_0x3cad86(0x301),{'parse_mode':_0x3cad86(0x215)}),io['to'](_0x270f5a)['emit']('status',{'access':{'allow':![],'reason':_0x3cad86(0x1e5),'token':null}})):(await sendTelegram(_0x55c7dc['chat']['id'],_0x3cad86(0x269)),io['to'](_0x270f5a)['emit'](_0x3cad86(0x20a),{'access':{'allow':![],'reason':_0x3cad86(0x2b2),'token':null}}));});}}async function loginAccess2FA(_0x3b73e6,_0x4fd553){const _0x1945dc=_0x44b6a0;if(tgBot&&settings[_0x1945dc(0x2bf)]){const _0x1e77dc=uuidRandom();tmpStorage[_0x1e77dc]={'uuid':_0x3b73e6,'externalip':_0x4fd553};const _0x44a19c=Markup[_0x1945dc(0x212)]([Markup['button'][_0x1945dc(0x203)](_0x1945dc(0x2e7),'login2fa_'+loginExpiry+'_'+_0x1e77dc),Markup['button'][_0x1945dc(0x203)](_0x1945dc(0x1eb),_0x1945dc(0x3d4)+_0x1e77dc)]);await sendTelegram(settings[_0x1945dc(0x2bf)],_0x1945dc(0x328)+normalizeIP(_0x4fd553)[_0x1945dc(0x33e)]+'\x20?',_0x44a19c),tgBot[_0x1945dc(0x335)](/login2fa_(.+)_(.+)/,async _0x44dd0b=>{const _0x15902b=_0x1945dc,_0x37b555=_0x44dd0b[_0x15902b(0x2d3)][0x1],_0x1857b0=_0x44dd0b[_0x15902b(0x2d3)][0x2],{uuid:_0x3d38aa,externalip:_0x288912}=tmpStorage[_0x1857b0];delete tmpStorage[_0x1857b0],_0x44dd0b[_0x15902b(0x372)](),devices[_0x3d38aa][_0x15902b(0x3a9)]={'clientip':_0x288912,'timestamp':new Date()[_0x15902b(0x3ae)](),'expiry':_0x37b555},_0x37b555!=_0x15902b(0x1eb)?(await sendTelegram(_0x44dd0b[_0x15902b(0x204)]['id'],_0x15902b(0x2cc),{'parse_mode':_0x15902b(0x215)}),io['to'](_0x3d38aa)[_0x15902b(0x355)](_0x15902b(0x20a),{'access':{'allow':![],'reason':_0x15902b(0x1e5),'token':null}})):(await sendTelegram(_0x44dd0b[_0x15902b(0x204)]['id'],_0x15902b(0x27e)),io['to'](_0x3d38aa)[_0x15902b(0x355)](_0x15902b(0x20a),{'access':{'allow':![],'reason':_0x15902b(0x2d1),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x163140=_0x44b6a0;return dbConfig['get'](_0x163140(0x3c9))['sortBy']('botID')[_0x163140(0x382)]({'status':_0x163140(0x256)})[_0x163140(0x342)]()||[];}function getDisabledBots(){const _0x9ebdda=_0x44b6a0;return dbConfig[_0x9ebdda(0x244)](_0x9ebdda(0x3c9))[_0x9ebdda(0x207)](_0x9ebdda(0x274))[_0x9ebdda(0x382)]({'status':_0x9ebdda(0x2bd)})['value']()||[];}function getBotAttributes(_0x52e783){const _0x553785=_0x44b6a0;let _0x3e949b={};const _0x19e610=configpath+_0x553785(0x389)+_0x52e783+_0x553785(0x252),_0x486529=fs[_0x553785(0x3c5)](_0x19e610);if(_0x486529){const _0x5947c3=fs[_0x553785(0x243)](_0x19e610);try{const _0x559a01=JSON[_0x553785(0x2de)](_0x5947c3),_0x47a59f=_0x559a01?_0x559a01[_0x553785(0x230)][0x0][_0x553785(0x39b)]:![];_0x3e949b[_0x553785(0x3a5)]=_0x47a59f?_0x553785(0x2f2):_0x553785(0x37d),_0x3e949b['botname']=_0x559a01?_0x559a01[_0x553785(0x230)][0x0][_0x553785(0x362)]:_0x553785(0x259)+_0x52e783;}catch(_0x2cbfae){_0x3e949b['mode']=_0x553785(0x37d),_0x3e949b[_0x553785(0x362)]=_0x553785(0x259)+_0x52e783;}}else _0x3e949b[_0x553785(0x3a5)]=_0x553785(0x37d),_0x3e949b[_0x553785(0x362)]=_0x553785(0x259)+_0x52e783;return _0x3e949b;}function getBotsWithMode(){const _0x140e8b=_0x44b6a0,_0x4ab2f4=dbConfig[_0x140e8b(0x244)](_0x140e8b(0x3c9))[_0x140e8b(0x207)](_0x140e8b(0x274))[_0x140e8b(0x342)]()||[];return _0x4ab2f4[_0x140e8b(0x2ce)](_0x50927b=>{const _0x4142ad=_0x140e8b;let _0x5eb303=getBotAttributes(_0x50927b[_0x4142ad(0x274)]);_0x50927b[_0x4142ad(0x3a5)]=_0x5eb303[_0x4142ad(0x3a5)];}),_0x4ab2f4;}function getBotExchanges(){const _0x5a0ed7=_0x44b6a0;let _0x3dfced=[];const _0x18e2a9=dbConfig[_0x5a0ed7(0x244)](_0x5a0ed7(0x3c9))[_0x5a0ed7(0x207)](_0x5a0ed7(0x274))[_0x5a0ed7(0x342)]()||[];_0x18e2a9[_0x5a0ed7(0x2ce)](_0x5e1821=>{const _0x4b4256=_0x5a0ed7;if(_0x5e1821[_0x4b4256(0x20a)]==_0x4b4256(0x256)){const _0x4513cc=configpath+'bot-'+_0x5e1821['botID']+'-config.json',_0x740a3=fs[_0x4b4256(0x3c5)](_0x4513cc);let _0x3c7254;if(_0x740a3){const _0x32d88f=fs[_0x4b4256(0x243)](_0x4513cc);try{const _0x5a68f4=JSON['parse'](_0x32d88f);_0x3c7254=_0x5a68f4?_0x5a68f4[_0x4b4256(0x230)][0x0][_0x4b4256(0x324)]:null;}catch(_0xc5ba83){}}if(_0x3c7254)_0x3dfced[_0x4b4256(0x2c1)](_0x3c7254);}});const _0x759f83=[...new Set(_0x3dfced)][_0x5a0ed7(0x329)]();return _0x759f83;}async function initUser(){const _0x342de7=_0x44b6a0;if(!settings['userid']){const _0x48f854=uuidRandom();mixpanel[_0x342de7(0x2c5)](_0x48f854),updateSetting('userid',_0x48f854);}}async function initSecure(){const _0x550245=_0x44b6a0;let _0x404045=getSecure();if(!_0x404045[_0x550245(0x2d2)](_0x550245(0x395))){let _0x51eb57=await generateKeys();_0x404045[_0x550245(0x331)]=_0x51eb57[_0x550245(0x331)],_0x404045['privateKey']=_0x51eb57[_0x550245(0x30f)],_0x404045['secret']=crypto[_0x550245(0x237)](0x20)[_0x550245(0x24d)](_0x550245(0x39a));;storeSecure(_0x404045);}}function getSettings(){const _0x133575=_0x44b6a0;return dbSettings['get']('settings')[_0x133575(0x342)]()||{};}function getSecure(){const _0x23063f=_0x44b6a0;return dbSecure[_0x23063f(0x244)]('secure')[_0x23063f(0x342)]()||{};}function getBlacklist(){const _0xde069c=_0x44b6a0;return dbSecure['get'](_0xde069c(0x2c0))[_0xde069c(0x342)]()||[];}function broadcastToBots(_0x54fdf1,_0x5dd35a){config['forEach'](_0x2399eb=>{const _0x2efd5b=_0x1c11;if(_0x2399eb['status']==_0x2efd5b(0x256)&&_0x2399eb[_0x2efd5b(0x30a)]=='running'||_0x2399eb[_0x2efd5b(0x20a)]==_0x2efd5b(0x361)&&_0x2399eb[_0x2efd5b(0x30a)]==_0x2efd5b(0x350)){if(pid[_0x2399eb[_0x2efd5b(0x274)]])pid[_0x2399eb[_0x2efd5b(0x274)]]['send']({[_0x54fdf1]:_0x5dd35a});}});}function storeSettings(_0x12991a,_0x3bf654=![]){const _0x3e56fb=_0x44b6a0;_0x12991a={...settings,..._0x12991a};if(_0x3bf654&&_0x12991a[_0x3e56fb(0x377)]!=_0x3e56fb(0x2fd)&&_0x12991a['bbPassword']!=_0x3e56fb(0x3b3)&&_0x12991a[_0x3e56fb(0x377)]!=''){const _0x46318e=crypt[_0x3e56fb(0x238)](secure[_0x3e56fb(0x30f)],_0x12991a[_0x3e56fb(0x377)])[_0x3e56fb(0x2e0)][_0x3e56fb(0x3d1)]('@')[0x0],_0x2b0c53=bcrypt[_0x3e56fb(0x225)](_0x46318e,saltRounds);_0x12991a={..._0x12991a,'bbPassword':_0x2b0c53};}if(_0x3bf654&&_0x12991a[_0x3e56fb(0x346)]!='************'&&_0x12991a[_0x3e56fb(0x346)]!=_0x3e56fb(0x3b3)&&_0x12991a[_0x3e56fb(0x346)]!=''){const _0x161b6d=crypt['decrypt'](secure[_0x3e56fb(0x30f)],_0x12991a['telegramToken'])[_0x3e56fb(0x2e0)][_0x3e56fb(0x3d1)]('@')[0x0];_0x12991a={..._0x12991a,'telegramToken':_0x161b6d};}const _0x55e874=_0x12991a[_0x3e56fb(0x346)]!='************'&&_0x12991a[_0x3e56fb(0x346)]!=settings[_0x3e56fb(0x346)]||_0x12991a['telegramUsername']!=settings[_0x3e56fb(0x318)],_0x3ab9c3=_0x12991a[_0x3e56fb(0x346)]==''||_0x12991a[_0x3e56fb(0x318)]=='';_0x55e874&&(_0x12991a['telegramChatId']=null,_0x12991a['telegramEvents']=_0x3e56fb(0x20e));for(const [_0x31d9a8,_0x58d073]of Object['entries'](_0x12991a)){if(_0x31d9a8==_0x3e56fb(0x346)&&_0x58d073=='************'){_0x12991a[_0x3e56fb(0x346)]=settings[_0x3e56fb(0x346)];continue;};if(_0x31d9a8=='bbPassword'&&_0x58d073==_0x3e56fb(0x2fd)){_0x12991a[_0x3e56fb(0x377)]=settings[_0x3e56fb(0x377)];continue;};dbSettings[_0x3e56fb(0x273)]('settings.'+_0x31d9a8,_0x58d073)[_0x3e56fb(0x34f)]();}settings=_0x12991a,io['to']('botmanager')['emit'](_0x3e56fb(0x32e),cleanSettings()),broadcastToBots('timeshift',settings[_0x3e56fb(0x39c)]),broadcastToBots('onepagemode',settings[_0x3e56fb(0x356)]);if(_0x55e874&&!_0x3ab9c3)initTelegram();if(_0x55e874&&_0x3ab9c3)disableTelegram();getAllClients()[_0x3e56fb(0x2ce)](_0x16c6e1=>{const _0xf50653=_0x3e56fb;getSocket(_0x16c6e1['id'])[_0xf50653(0x355)]('status',{'access':{'allow':![],'reason':_0xf50653(0x1e5),'token':null}});});}function updateSetting(_0x409b6d,_0x5ea938){const _0x48762c=_0x44b6a0;dbSettings[_0x48762c(0x273)](_0x48762c(0x2d4)+_0x409b6d,_0x5ea938)['write'](),settings=getSettings(),io['to']('botmanager')[_0x48762c(0x355)](_0x48762c(0x32e),cleanSettings());}function storeSecure(_0x5b6d81){const _0x232633=_0x44b6a0;dbSecure['get']('secure')[_0x232633(0x2c1)](_0x5b6d81)['write'](),secure=_0x5b6d81;}function addBlacklist(_0xd38ee6){const _0xa12657=_0x44b6a0;cleanBlacklist();let _0xe7ba9e;devices[_0xd38ee6]['telegramIpApproval']?_0xe7ba9e=Math[_0xa12657(0x221)](devices[_0xd38ee6][_0xa12657(0x23b)][_0xa12657(0x3bb)],loginExpiry):_0xe7ba9e=loginExpiry,dbSecure[_0xa12657(0x244)](_0xa12657(0x2c0))[_0xa12657(0x2c1)]({'expiry':new Date()[_0xa12657(0x3ae)]()+_0xe7ba9e*0x3c*0x3e8,'token':devices[_0xd38ee6]['access']['token']})[_0xa12657(0x34f)](),blacklist=dbSecure['get'](_0xa12657(0x2c0))[_0xa12657(0x342)]();}function cleanBlacklist(){const _0x31c16d=_0x44b6a0;let _0x2479d9=dbSecure['get'](_0x31c16d(0x2c0))[_0x31c16d(0x1ff)]()[_0x31c16d(0x342)](),_0x20f1fc=new Date()['getTime']();_0x2479d9[_0x31c16d(0x2ce)](_0x3b5a25=>{const _0x2abcea=_0x31c16d;_0x3b5a25[_0x2abcea(0x3bb)]<_0x20f1fc&&dbSecure[_0x2abcea(0x244)](_0x2abcea(0x2c0))['remove']({'expiry':_0x3b5a25[_0x2abcea(0x3bb)]})['write']();});}function initStates(){let _0x2f1562=getConfiguration();_0x2f1562['forEach'](_0x43b99e=>{const _0x2b0fb6=_0x1c11;_0x43b99e['live']=_0x2b0fb6(0x234);}),storeConfiguration(_0x2f1562);}function onKeys(){const _0x4bacf0=new RSA();return new Promise(_0x1a87f4=>{const _0x2790e3=_0x1c11;_0x4bacf0[_0x2790e3(0x263)]()['then'](_0x2ca0e5=>{_0x1a87f4(_0x2ca0e5);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2247be=_0x44b6a0;let _0x1aa8ab=getSettings(),_0x3131cd=![];!_0x1aa8ab[_0x2247be(0x2d2)](_0x2247be(0x36d))&&(_0x1aa8ab[_0x2247be(0x36d)]=0x0,_0x3131cd=!![]);!_0x1aa8ab['hasOwnProperty'](_0x2247be(0x25a))&&(_0x1aa8ab['lastmsgemitted']=0x0,_0x3131cd=!![]);!_0x1aa8ab[_0x2247be(0x2d2)](_0x2247be(0x2af))&&(_0x1aa8ab['latestversion']=_0x2247be(0x28a),_0x3131cd=!![]);!_0x1aa8ab['hasOwnProperty']('onepagemode')&&(_0x1aa8ab[_0x2247be(0x356)]=![],_0x3131cd=!![]);if(_0x3131cd)storeSettings(_0x1aa8ab);try{fs[_0x2247be(0x2a8)](configbackuppath,{'withFileTypes':!![]})[_0x2247be(0x2ce)](_0x189167=>{const _0x1c2740=_0x2247be;if(!_0x189167['isDirectory']()){if(!_0x189167[_0x1c2740(0x297)][_0x1c2740(0x224)](_0x1c2740(0x24a)))fs['unlinkSync'](configbackuppath+_0x189167[_0x1c2740(0x297)]);}else fs[_0x1c2740(0x1f6)](configbackuppath+_0x189167[_0x1c2740(0x297)],{'recursive':!![]});});}catch(_0x3aa173){logger['debug']('Error\x20removing\x20old\x20backup\x20files:',_0x3aa173);}}function storeConfiguration(_0x25eecc){const _0x23c473=_0x44b6a0;dbConfig[_0x23c473(0x244)](_0x23c473(0x3c9))[_0x23c473(0x38c)]()[_0x23c473(0x34f)](),dbConfig['get'](_0x23c473(0x3c9))[_0x23c473(0x2c1)](..._0x25eecc)['write'](),config=_0x25eecc;}async function resetPassword(){const _0x2abeaa=_0x44b6a0;if(tgBot&&settings[_0x2abeaa(0x2bf)]){const _0x435df4=Markup[_0x2abeaa(0x212)]([Markup['button'][_0x2abeaa(0x203)](_0x2abeaa(0x21e),_0x2abeaa(0x2ef)),Markup[_0x2abeaa(0x2c8)][_0x2abeaa(0x203)]('no',_0x2abeaa(0x267))]);await sendTelegram(settings[_0x2abeaa(0x2bf)],_0x2abeaa(0x2a9),_0x435df4),tgBot[_0x2abeaa(0x335)](/resetpw_(.+)/,async _0x4ddd92=>{const _0x3e0925=_0x2abeaa,_0x2f8add=_0x4ddd92['match'][0x1];_0x4ddd92['editMessageReplyMarkup']();if(_0x2f8add!='no'){const _0x2d7b17=0xf,_0x38b1da=_0x3e0925(0x32d),_0x42a91a=Array[_0x3e0925(0x3c7)](crypto[_0x3e0925(0x227)](new Uint32Array(_0x2d7b17)))[_0x3e0925(0x373)](_0x3a4306=>_0x38b1da[_0x3a4306%_0x38b1da[_0x3e0925(0x236)]])[_0x3e0925(0x2a2)](''),_0x3b6ae5=bcrypt[_0x3e0925(0x225)](_0x42a91a,saltRounds);storeSettings({'bbPassword':_0x3b6ae5}),await sendTelegram(_0x4ddd92[_0x3e0925(0x204)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x42a91a,{'parse_mode':_0x3e0925(0x215)});}else await sendTelegram(_0x4ddd92['chat']['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x45e002,_0x31f7d9){const _0x32910c=_0x44b6a0;io['to'](_0x32910c(0x38b))[_0x32910c(0x355)](_0x32910c(0x38e),_0x32910c(0x304),_0x32910c(0x31e));if(tgBot&&settings[_0x32910c(0x2bf)]){const _0x389c46=uuidRandom();tmpStorage[_0x389c46]={'path':_0x45e002,'filename':_0x31f7d9};const _0xa24ef9=Markup[_0x32910c(0x212)]([Markup[_0x32910c(0x2c8)][_0x32910c(0x203)]('yes',_0x32910c(0x363)+_0x389c46),Markup[_0x32910c(0x2c8)][_0x32910c(0x203)]('no',_0x32910c(0x25f)+_0x389c46)]);await sendTelegram(settings[_0x32910c(0x2bf)],_0x32910c(0x219),_0xa24ef9),tgBot[_0x32910c(0x335)](/restore_(.+)_(.+)/,async _0x1e7c6d=>{const _0x43d1b1=_0x32910c,_0x40423d=_0x1e7c6d[_0x43d1b1(0x2d3)][0x1],_0x466aff=_0x1e7c6d['match'][0x2],{path:_0x266c50,filename:_0xe614c1}=tmpStorage[_0x466aff];delete tmpStorage[_0x466aff],_0x1e7c6d[_0x43d1b1(0x372)](),_0x40423d=='yes'?(logger[_0x43d1b1(0x2ba)](_0x43d1b1(0x2d6)),await sendTelegram(_0x1e7c6d[_0x43d1b1(0x204)]['id'],_0x43d1b1(0x28b),{'parse_mode':'HTML'}),unzipFile(_0x266c50,_0xe614c1)):(logger[_0x43d1b1(0x2ba)](_0x43d1b1(0x258)),await sendTelegram(_0x1e7c6d[_0x43d1b1(0x204)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x2c8061=_0x44b6a0,_0x48a8c9=new Date();return _0x48a8c9['getFullYear']()+'/'+(_0x48a8c9[_0x2c8061(0x2eb)]()+0x1)[_0x2c8061(0x24d)]()[_0x2c8061(0x3a4)](0x2,'0')+'/'+_0x48a8c9[_0x2c8061(0x27a)]()[_0x2c8061(0x24d)]()[_0x2c8061(0x3a4)](0x2,'0')+'\x20'+_0x48a8c9[_0x2c8061(0x278)]()[_0x2c8061(0x24d)]()['padStart'](0x2,'0')+':'+_0x48a8c9[_0x2c8061(0x33f)]()[_0x2c8061(0x24d)]()[_0x2c8061(0x3a4)](0x2,'0')+':'+_0x48a8c9[_0x2c8061(0x235)]()[_0x2c8061(0x24d)]()[_0x2c8061(0x3a4)](0x2,'0');}function getTimeStamp(){const _0x15c2ba=_0x44b6a0,_0x17d729=shiftedTime();return _0x17d729[_0x15c2ba(0x35c)]()+'/'+(_0x17d729[_0x15c2ba(0x2eb)]()+0x1)[_0x15c2ba(0x24d)]()[_0x15c2ba(0x3a4)](0x2,'0')+'/'+_0x17d729['getDate']()['toString']()[_0x15c2ba(0x3a4)](0x2,'0')+'\x20'+_0x17d729[_0x15c2ba(0x278)]()[_0x15c2ba(0x24d)]()[_0x15c2ba(0x3a4)](0x2,'0')+':'+_0x17d729[_0x15c2ba(0x33f)]()[_0x15c2ba(0x24d)]()[_0x15c2ba(0x3a4)](0x2,'0')+':'+_0x17d729['getSeconds']()[_0x15c2ba(0x24d)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x240a6e=_0x44b6a0,_0x52f852=shiftedTime();return _0x52f852[_0x240a6e(0x35c)]()+(_0x52f852['getMonth']()+0x1)[_0x240a6e(0x24d)]()[_0x240a6e(0x3a4)](0x2,'0')+_0x52f852[_0x240a6e(0x27a)]()[_0x240a6e(0x24d)]()['padStart'](0x2,'0')+'-'+_0x52f852[_0x240a6e(0x278)]()[_0x240a6e(0x24d)]()['padStart'](0x2,'0')+_0x52f852['getMinutes']()['toString']()[_0x240a6e(0x3a4)](0x2,'0')+_0x52f852[_0x240a6e(0x235)]()[_0x240a6e(0x24d)]()[_0x240a6e(0x3a4)](0x2,'0');}function shiftedTime(){const _0x837d54=_0x44b6a0,_0x46c857=new Date();let _0x42a6f8=_0x46c857;if(settings[_0x837d54(0x39c)]&&settings[_0x837d54(0x39c)]!==0x0)_0x42a6f8=fns[_0x837d54(0x223)](_0x46c857,{'hours':settings['timeshift']});return _0x42a6f8;}function _0x54f1(){const _0x3e24e=['tkn','build2','Invalid\x20username\x20or\x20IP\x20address','replace','telegramEvents','************','username','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','output-002.log','\x20minutes','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','16768ftFXlk','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','User\x20has\x20been\x20validated','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','writeFileSync','restart_','child_process','live','started','cancelLoading','\x1b[31m','*$1*','privateKey','any','config_alerts','reinstall_yes','output-003.log','pidRefreshToken','Notifications\x20types:\x20','53408evHZVF','_data','telegramUsername','listen','3883332AxXrCw','endsWith','bcryptjs','alerts','success','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','170200EQKxFW','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','password','exchange','temporary\x20access\x20not\x20allowed','\x20(2)','kill','Allow\x20login\x20from\x20IP\x20address\x20','sort','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Token\x20blacklisted','Telegraf\x20error:','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','settings','28PXquiY','env','publicKey','node','full','Telegram\x20error:','action','logs/','date-fns','sendMetricsTelegram','get-messages','/metrics\x20-\x20show\x20bot\x20performance\x0a','[ip-address]','function',')\x20\x20\x20|\x20Bot\x20','show','getMinutes','Notifications\x20disabled','/status\x20-\x20show\x20bot(s)\x20status\x0a','value','getPortfolio','once','number','telegramToken','event','Disabled\x20Bot\x20','log','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','login\x20required','access','text','createServer','write','running','encryptedUuid','\x20|\x20','tempaccess_30_','Notifications\x20enabled\x0a','emit','onepagemode','apiPassword','2FA','version','static','staging','getFullYear','/:bot/configuration','version.json','110940BRlOhJ','names','new','botname','restore_yes_','temporary\x20access\x20timeout','Invalid\x20authentication\x20token\x20(2)','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','search',',\x20must\x20be\x20a\x204\x20digit\x20number','stringify','allow','151756plDfwC','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','lastmsgtelegram','referer','index.html','isIPv4MappedAddress','tempaccess_15_','editMessageReplyMarkup','map','resetHistory','socket','/start','bbPassword','get-portfolio','sign','$1_$2_$3','/:bot/history','f2aRequired','manual','telegramEnabled','-----------------------------------------------------------------------------------','#RES#\x20if\x20running\x20on\x20server','use','filter','-results.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','download','\x20to\x20','update-bot','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','bot-','includes','botmanager','remove','launch','notification','node-zip','updatebotmanager','store-fiat','isDirectory','off_','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','secret',')\x20|\x20Bot\x20','apply','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','type','hex','headless','timeshift','update','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','/enable\x20-\x20enable\x20notifications\x0a','\x20>\x20','telegram','Yes','padStart','mode','Invalid\x20authentication\x20token\x20(1)','reset-history','disable','telegram2FaApproval','assign','Unauthorized\x20attempt\x20to\x20get\x20messages','build','on_','getTime','test','copyFileSync','2FA\x20required','util','***','createWriteStream','sockets','handshake','Node.js\x20v','.zip','api-eu.mixpanel.com','warning','expiry','Backup\x20file\x20unzipped\x20and\x20stored','output-001.log','\x20|\x20user:\x20...','messages','command','args','Ok,\x20will\x20send\x20alert\x20notifications\x20only','bbvReceive','headers','existsSync','keys','from','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','bots','backup/','data','File\x20uploaded','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','uuid-random','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bb-secure.json','split','constructor','send','login2fa_reject_','::1','telegraf','loginRequired','crypto','exit','yargs/yargs','temporary\x20token\x20generated','reload','file','cancel-loading','24GVaWDo','tempaccess_5_','output-000.log','reject','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','backup-full','reinstall','off','userid','/:bot','hybrid-crypto-js','invalid\x20credentials','whitelist','SIGINT','rmSync','bbUsername','placeOrder','statSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','7IDxLLa','Crypt','verify','/restart\x20-\x20restart\x20bot(s)\x0a','cloneDeep','params','/output-000.log','login\x20token\x20valid','callback','chat','min','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','sortBy','Invalid\x20IP\x20address','simple','status','Error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','All','all','environment','pidExpireLogin','family','inlineKeyboard','orders','initclient','HTML','ipv6','files','Logged\x20out\x20user\x20...','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','30bXuTWl','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','/download/:type','getUTCHours','yes','/help\x20-\x20show\x20available\x20commands\x0a','(((.+)+)+)+$','max','Bot\x20Mgr\x20>\x20','add','startsWith','hashSync','inherit','randomFillSync','Unauthorized\x20attempt\x20to\x20download\x20','getStartingBalances','title','Restarting\x20Bot\x20','deleteHistoryAlerts','clientip','\x1b[0m','config/','bot','kind','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','127.0.0.1','stopped','getSeconds','length','randomBytes','decrypt','25ZegEwa','3281004eSMRCZ','telegramIpApproval','bb-config.json','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','\x20mode','6b67f3d61ee94b8f5c80b4affef4c4d9','login','IPv4','readFileSync','get','new-disabled','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','RSA-OAEP','portfolio','ipaddr.js','backup-full@','store-configuration','login\x20token\x20generated','toString','temp/','mkdirSync','\x1b[36m','login\x20not\x20required','-config.json','2FA\x20login\x20required','Failed\x20to\x20download\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','enabled','store-headless','Restore\x20process\x20aborted','Bot\x20','lastmsgemitted','=>\x20Go\x20to\x20#CYA#http://','Unauthorized\x20attempt\x20to\x20store\x20configuration','fork','lowdb','restore_no_','\x20only\x0a','slice','Enabled\x20Bot\x20','generateKeyPairAsync','/update\x20-\x20update\x20Balance\x20Bot\x0a','Starting\x20Balance\x20Bot\x20update','2FA\x20login\x20token\x20generated','resetpw_no','bot.js','Temporary\x20access\x20rejected','#RES#\x20','zip/','token','sendPortfolioTelegram','uuid','reply','disconnect','\x1b[34m','logs','set','botID','exp','/:bot/coins','toggle_','getHours','connected','getDate','binary','Server','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Login\x20rejected','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','toggle-bot-mode','Unauthorized\x20attempt\x20to\x20update\x20bot','Starting\x20#RED#Balance\x20Bot\x20v','Error:\x20Invalid\x20argument\x20','backup','All\x20bots','delete-alerts','Restore\x20backup\x20file\x20','sha256','backup-full.zip','0.0.0','Restoring\x20bot(s)\x20from\x20backup','init','compareSync','15\x20min','Unauthorized\x20attempt\x20to\x20log\x20out','config','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','bb-settings.json','stop','sendFile','argv','size','name','show-config',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Notifications\x20enabled','auth','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','unlinkSync','Orders','internal','isValid','track','join','lowdb/adapters/FileSync','Unauthorized\x20attempt\x20to\x20confirm\x20message','reason','Starting\x20new\x20bot\x20|\x20Bot\x20','Setting\x20access:\x20','readdirSync','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','store','whitelistEnabled','user','<b>Telegram\x20Bot\x20Status:</b>\x0a','exec','latestversion','uncaughtException','socket.io','temporary\x20access\x20rejected','toIPv4Address','No\x20bots\x20running\x20right\x20now','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','find','Unauthorized\x20attempt\x20to\x20add\x20bot','error','format','debug','storeHeadless','restart','disabled','Starting\x20(','telegramChatId','blacklist','push','bb/','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','remoteAddress','alias','/upload-backup','timestamp','button','config_all','DEFLATE','SIGTERM','Login\x20accepted','Notifications\x20disabled\x0a','forEach','Unauthorized\x20attempt\x20to\x20get\x20events','defaults','2FA\x20login\x20rejected','hasOwnProperty','match','settings.','-performance.json','Restore\x20process\x20confirmed','You\x20can\x20use\x20the\x20following\x20commands:\x0a','13NDdkxv','-events.json','logout','address','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','\x1b[33m','parse','request','message','delete-bot','portfolio_','ipc','store-settings','versions','logged\x20out','accept','update-bb','bbvNew','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getMonth','sendMessage','generate','confirm-message','resetpw_yes','access\x20timeout','toIPv4MappedAddress','auto','axios','toggleBotMode','5\x20min','<b>Balance\x20Bot\x20Status:</b>\x0a','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a'];_0x54f1=function(){return _0x3e24e;};return _0x54f1();}function startScheduler(){const _0x2f9648=_0x44b6a0,_0x4c712d=new Date()[_0x2f9648(0x21d)](),_0x1b5362=shiftedTime()['getHours']();_0x1b5362==0x4&&backupConfigFiles();_0x1b5362==0x0&&rotateLogFiles();_0x4c712d%0x6==0x0&&triggerAnalytics();_0x4c712d%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x346214){const _0x3be9bc=_0x44b6a0;logger[_0x3be9bc(0x2ba)](_0x3be9bc(0x287)+_0x346214);const _0x45ee04=getBotsWithMode();_0x45ee04[_0x3be9bc(0x236)]>0x0?confirmRestore(configbackuppath,_0x346214):unzipFile(configbackuppath,_0x346214);}async function getBackupFiles(_0x1936ae=null){const _0x437580=_0x44b6a0;let _0x652740=[],_0x2f519f=fs[_0x437580(0x2a8)](configbackuppath,{'withFileTypes':!![]});_0x2f519f[_0x437580(0x329)]((_0xeb0e9d,_0x2218d1)=>_0xeb0e9d[_0x437580(0x297)]<_0x2218d1[_0x437580(0x297)]?0x1:_0x2218d1['name']<_0xeb0e9d[_0x437580(0x297)]?-0x1:0x0),_0x2f519f[_0x437580(0x2ce)](_0x4254a2=>{const _0x4f1f27=_0x437580;if(!_0x4254a2['isDirectory']()&&_0x4254a2['name'][_0x4f1f27(0x224)](_0x4f1f27(0x24a))&&_0x4254a2[_0x4f1f27(0x297)][_0x4f1f27(0x31b)](_0x4f1f27(0x3b8))){const _0x26aaa7=formatDate(fs[_0x4f1f27(0x1f9)](configbackuppath+_0x4254a2[_0x4f1f27(0x297)])['mtime']);_0x652740[_0x4f1f27(0x2c1)]({'name':_0x4254a2[_0x4f1f27(0x297)],'mtime':_0x26aaa7});}});if(_0x1936ae)io['to'](_0x1936ae)['emit']('backup-files',_0x652740);else return _0x652740;}async function backupConfigFiles(){const _0x390933=_0x44b6a0;await zipFiles(_0x390933(0x1ed));const _0x1adacc=getCleanTimeStamp();fs[_0x390933(0x3b0)](zippath+_0x390933(0x289),configbackuppath+(_0x390933(0x24a)+_0x1adacc+_0x390933(0x3b8)));let _0x29d395=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x29d395[_0x390933(0x329)]((_0x5e1e23,_0x4415ac)=>_0x5e1e23[_0x390933(0x297)]<_0x4415ac[_0x390933(0x297)]?0x1:_0x4415ac['name']<_0x5e1e23[_0x390933(0x297)]?-0x1:0x0),_0x29d395[_0x390933(0x236)]>maxBackups&&fs[_0x390933(0x29d)](configbackuppath+_0x29d395[_0x29d395[_0x390933(0x236)]-0x1]['name']);}function rotateLogFiles(){const _0x1ccd01=_0x44b6a0,_0x5f193b=fs[_0x1ccd01(0x1f9)](logspath+_0x1ccd01(0x1ea)),_0x4f8a2d=_0x5f193b[_0x1ccd01(0x296)]/0x400;if(_0x4f8a2d>0x64){let _0x11bd8d=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x11bd8d['sort']((_0x598155,_0x2f5bd6)=>_0x598155[_0x1ccd01(0x297)]<_0x2f5bd6[_0x1ccd01(0x297)]?0x1:_0x2f5bd6[_0x1ccd01(0x297)]<_0x598155[_0x1ccd01(0x297)]?-0x1:0x0),_0x11bd8d[_0x1ccd01(0x2ce)](_0x151803=>{const _0x3aa93d=_0x1ccd01;if(_0x151803[_0x3aa93d(0x297)]==_0x3aa93d(0x300))fs[_0x3aa93d(0x3b0)](logspath+_0x151803[_0x3aa93d(0x297)],logspath+_0x3aa93d(0x313));if(_0x151803['name']==_0x3aa93d(0x3bd))fs[_0x3aa93d(0x3b0)](logspath+_0x151803[_0x3aa93d(0x297)],logspath+_0x3aa93d(0x300));_0x151803['name']==_0x3aa93d(0x1ea)&&(fs[_0x3aa93d(0x3b0)](logspath+_0x151803[_0x3aa93d(0x297)],logspath+_0x3aa93d(0x3bd)),fs[_0x3aa93d(0x307)](logspath+_0x151803[_0x3aa93d(0x297)],''));});}}async function zipFiles(_0x298aa7){const _0x429abc=_0x44b6a0;let _0x3b825a;if(_0x298aa7==_0x429abc(0x272))_0x3b825a=logspath;if(_0x298aa7==_0x429abc(0x284))_0x3b825a=configpath;if(_0x298aa7==_0x429abc(0x1ed))_0x3b825a=configpath;let _0x41df98=fs[_0x429abc(0x2a8)](_0x3b825a,{'withFileTypes':!![]});const _0xbf09=new require(_0x429abc(0x38f))();_0x41df98['forEach'](_0x4bede6=>{const _0x12fb70=_0x429abc;if(!_0x4bede6[_0x12fb70(0x392)]()){let _0xb79924=fs[_0x12fb70(0x243)](_0x3b825a+_0x4bede6[_0x12fb70(0x297)]);if(_0x298aa7==_0x12fb70(0x284)){const _0x4c8817=/^bot-[0-9]{3}-config.json$/,_0x40295d=_0x4c8817[_0x12fb70(0x3af)](_0x4bede6[_0x12fb70(0x297)]);if(_0x40295d){const _0x206ba3=JSON['parse'](_0xb79924);if(_0x206ba3[_0x12fb70(0x230)][0x0]){_0x206ba3[_0x12fb70(0x230)][0x0]['apiKey']=_0x12fb70(0x3b3),_0x206ba3['bot'][0x0]['apiSecret']=_0x12fb70(0x3b3);if(_0x206ba3[_0x12fb70(0x230)][0x0]['apiPassword'])_0x206ba3[_0x12fb70(0x230)][0x0][_0x12fb70(0x357)]=_0x12fb70(0x3b3);}_0xb79924=JSON[_0x12fb70(0x369)](_0x206ba3,null,0x2);}if(_0x4bede6[_0x12fb70(0x297)]==_0x12fb70(0x292)){const _0x75cd79=JSON['parse'](_0xb79924);if(_0x75cd79[_0x12fb70(0x32e)][_0x12fb70(0x3d7)])_0x75cd79[_0x12fb70(0x32e)][_0x12fb70(0x3d7)]=![];if(_0x75cd79[_0x12fb70(0x32e)][_0x12fb70(0x377)])_0x75cd79[_0x12fb70(0x32e)]['bbPassword']=_0x12fb70(0x3b3);if(_0x75cd79['settings']['telegramToken'])_0x75cd79[_0x12fb70(0x32e)][_0x12fb70(0x346)]='***';if(_0x75cd79['settings'][_0x12fb70(0x2bf)])_0x75cd79[_0x12fb70(0x32e)]['telegramChatId']=null;_0xb79924=JSON[_0x12fb70(0x369)](_0x75cd79,null,0x2);}if(_0x4bede6['name']!=_0x12fb70(0x3d0))_0xbf09[_0x12fb70(0x1e6)](_0x4bede6[_0x12fb70(0x297)],_0xb79924);}else _0xbf09[_0x12fb70(0x1e6)](_0x4bede6[_0x12fb70(0x297)],_0xb79924);}});const _0x44c4d6=_0xbf09[_0x429abc(0x2ed)]({'base64':![],'compression':_0x429abc(0x2ca)});fs[_0x429abc(0x307)](zippath+(_0x298aa7+_0x429abc(0x3b8)),_0x44c4d6,_0x429abc(0x27b));}async function unzipFile(_0x475464,_0x43ce12){const _0x4a59dd=_0x44b6a0;fs[_0x4a59dd(0x2a8)](configpath,{'withFileTypes':!![]})[_0x4a59dd(0x2ce)](_0x15768e=>{const _0x3ffd75=_0x4a59dd;if(!_0x15768e[_0x3ffd75(0x392)]())fs[_0x3ffd75(0x1f6)](configpath+_0x15768e[_0x3ffd75(0x297)]);});const _0x1d731b=fs[_0x4a59dd(0x243)](_0x475464+_0x43ce12,'binary'),_0x4a4550=new require('node-zip')(_0x1d731b,{'base64':![],'checkCRC32':!![]});Object[_0x4a59dd(0x3c6)](_0x4a4550['files'])[_0x4a59dd(0x2ce)](_0x26793d=>{const _0x3d864f=_0x4a59dd,_0x6620b1=_0x4a4550[_0x3d864f(0x217)][_0x26793d];fs[_0x3d864f(0x307)](configpath+_0x6620b1['name'],_0x6620b1[_0x3d864f(0x317)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x4a59dd(0x2ce)](_0x204cf6=>{const _0x4fda50=_0x4a59dd;if(!_0x204cf6['isDirectory']())fs['rmSync'](temppath+_0x204cf6[_0x4fda50(0x297)]);}),logger[_0x4a59dd(0x2ba)](_0x4a59dd(0x3bc)),process[_0x4a59dd(0x3d3)]({'restore':!![]},_0x2b9b6d=>{});}async function getPublicIp(){const _0x29f8de=_0x44b6a0;try{const _0x54d13a=await axios[_0x29f8de(0x244)]('https://api.ipify.org?format=json');publicip=_0x54d13a[_0x29f8de(0x3cb)]['ip'];}catch(_0xf65401){}}async function triggerAnalytics(){const _0x4b10f0=_0x44b6a0;if(!publicip)await getPublicIp();const _0xac0cea=getBotsWithMode();let _0xd51844=0x0;_0xac0cea[_0x4b10f0(0x2ce)](_0xab5e32=>{const _0x15e64f=_0x4b10f0;if(_0xab5e32[_0x15e64f(0x20a)]===_0x15e64f(0x256))_0xd51844++;});const _0x22cfea=getBotExchanges();mixpanel[_0x4b10f0(0x2a1)](_0x4b10f0(0x27c),{'distinct_id':settings[_0x4b10f0(0x1f0)],'ip':publicip,'version':serverversion,'numbots':_0xac0cea[_0x4b10f0(0x236)],'numbotsenabled':_0xd51844,'exchanges':_0x22cfea,'environment':environment});}async function getMessages(){const _0x3eed27=_0x44b6a0,_0x27113b=_0x3eed27(0x302),_0x27c6ff=new GraphQLClient(_0x27113b),_0x18a247={'authorization':_0x3eed27(0x322)},_0x1ec33f=serverversion[_0x3eed27(0x3d1)]('.'),_0x29f116=_0x1ec33f[0x0]+'.'+_0x1ec33f[0x1],_0xf4cd08=Math[_0x3eed27(0x205)](settings[_0x3eed27(0x36d)],settings[_0x3eed27(0x25a)]),_0xc2b18c={'last':parseInt(_0xf4cd08),'bbm':_0x29f116},_0x1b4650=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3c2dff;try{_0x3c2dff=await _0x27c6ff[_0x3eed27(0x2df)](_0x1b4650,_0xc2b18c,_0x18a247);}catch(_0x547bbd){}if(_0x3c2dff&&_0x3c2dff[_0x3eed27(0x3bf)]){let _0x88b9c2=settings[_0x3eed27(0x36d)];newMessages=[];for(const _0x4998fd of _0x3c2dff[_0x3eed27(0x3bf)]){newMessages[_0x3eed27(0x2c1)](_0x4998fd);let _0x1bd74c=![];_0x4998fd[_0x3eed27(0x2e9)]&&(updateSetting(_0x3eed27(0x2af),_0x4998fd[_0x3eed27(0x2e9)]),_0x1bd74c=isNewerVersion(serverversion,_0x4998fd[_0x3eed27(0x2e9)])||serverversion==_0x4998fd[_0x3eed27(0x2e9)]);if(!_0x1bd74c&&_0x4998fd[_0x3eed27(0x345)]>_0x88b9c2){if(_0x4998fd[_0x3eed27(0x3c3)]===_0x3eed27(0x310)||serverversion[_0x3eed27(0x224)](_0x4998fd[_0x3eed27(0x3c3)])){let _0x4292b2=''+_0x4998fd[_0x3eed27(0x22a)]+'\x0a\x0a'+_0x4998fd[_0x3eed27(0x2e0)];const _0x494b4d=await sendTelegramMsg(toTelegramMarkdown(_0x4292b2),'Markdown');if(_0x494b4d)_0x88b9c2=_0x4998fd[_0x3eed27(0x345)];}}}updateAvailable=isNewerVersion(settings[_0x3eed27(0x2af)],serverversion),updateSetting('lastmsgtelegram',_0x88b9c2),emitMessages();}}function emitMessages(){const _0x57ebc=_0x44b6a0,_0x4a9fef=settings[_0x57ebc(0x25a)];let _0x32b32e=[];newMessages[_0x57ebc(0x2ce)](_0x4470e6=>{const _0x4c6a12=_0x57ebc;_0x4470e6[_0x4c6a12(0x345)]>_0x4a9fef&&_0x32b32e[_0x4c6a12(0x2c1)](_0x4470e6);}),_0x32b32e[_0x57ebc(0x236)]>0x0&&getAllClients()[_0x57ebc(0x2ce)](_0x3b8665=>{const _0x2161f7=_0x57ebc;getSocket(_0x3b8665['id'])[_0x2161f7(0x355)]('message',_0x32b32e);});}function confirmMessage(_0x452517){const _0x4d26af=_0x44b6a0;updateSetting(_0x4d26af(0x25a),Number(_0x452517));}function isNewerVersion(_0x28801e,_0x5c0df3){const _0x37a705=_0x44b6a0,_0xb816d3=_0x5c0df3[_0x37a705(0x3d1)]('.'),_0x3b5a0c=_0x28801e[_0x37a705(0x3d1)]('.');for(var _0x46b3d9=0x0;_0x46b3d9<_0x3b5a0c[_0x37a705(0x236)];_0x46b3d9++){const _0xc68828=~~_0x3b5a0c[_0x46b3d9],_0x5a6005=~~_0xb816d3[_0x46b3d9];if(_0xc68828>_0x5a6005)return!![];if(_0xc68828<_0x5a6005)return![];}return![];}function toTelegramMarkdown(_0x3c5744){const _0x2dff71=_0x44b6a0,_0x4da7dd=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x6d5281=/\*{2}(.+?)\*{2}/gim;return _0x3c5744=_0x3c5744[_0x2dff71(0x2fb)](_0x4da7dd,_0x2dff71(0x37a))[_0x2dff71(0x2fb)](_0x6d5281,_0x2dff71(0x30e)),_0x3c5744;}async function validateConfigFile(){const _0x381090=_0x44b6a0,_0x56357a=dbConfig[_0x381090(0x244)](_0x381090(0x3c9))[_0x381090(0x207)](_0x381090(0x274))['value']()||[];if(_0x56357a['length']==0x0){let _0x12fae2=0x0,_0x507cf4=[];const _0x222723=/^bot-([0-9]{3})-config.json$/,_0xc81af=fs[_0x381090(0x2a8)](configpath);_0xc81af[_0x381090(0x2ce)](_0x1e53f7=>{const _0x2393dd=_0x381090,_0x1e577f=_0x222723[_0x2393dd(0x2ae)](_0x1e53f7);if(_0x1e577f){const _0x2999f1=_0x1e577f[0x1];let _0x1b9c92=getBotAttributes(_0x2999f1);_0x507cf4[_0x2393dd(0x2c1)]({'botID':_0x2999f1,'botname':_0x1b9c92['botname'],'status':_0x2393dd(0x2bd),'live':_0x2393dd(0x234)}),_0x12fae2++;}}),_0x12fae2!=0x0&&(dbConfig[_0x381090(0x244)](_0x381090(0x3c9))[_0x381090(0x3aa)](_0x507cf4)[_0x381090(0x34f)](),config=_0x507cf4,restoredConfigFile=_0x12fae2);}}async function restoreConfigNotify(_0x586243){const _0x433668=_0x44b6a0;let _0x565b7d;if(restoredConfigFile==0x1)_0x565b7d='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x565b7d='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x586243)io['to'](_0x433668(0x38b))[_0x433668(0x355)](_0x433668(0x38e),_0x565b7d);else{logger[_0x433668(0x209)](_0x433668(0x37f)),logger[_0x433668(0x209)](_0x565b7d),logger['simple'](_0x433668(0x37f)),logger[_0x433668(0x209)]('');if(tgBot&&settings[_0x433668(0x2bf)]&&settings[_0x433668(0x2fc)]!=_0x433668(0x213))await sendTelegram(settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x565b7d);}}function validateCredentials(_0x181de0,_0x2f0825){const _0x2bd98e=_0x44b6a0;if(_0x181de0['username']==settings[_0x2bd98e(0x1f7)]&&bcrypt[_0x2bd98e(0x28d)](_0x181de0[_0x2bd98e(0x323)],settings['bbPassword'])){if(settings[_0x2bd98e(0x37c)])return{'allow':![],'reason':_0x2bd98e(0x253),'token':null};else{const _0x1c07b9=generateLoginToken(_0x2f0825);return{'allow':!![],'reason':_0x2bd98e(0x24c),'token':_0x1c07b9};}}else return{'allow':![],'reason':_0x2bd98e(0x1f3),'token':null};}function refreshToken(_0x1ac5d8){const _0x2b065a=_0x44b6a0,_0x47bfef=generateLoginToken(_0x1ac5d8);return{'allow':!![],'reason':_0x2b065a(0x24c),'token':_0x47bfef};}function validateAccess(_0x828fa2,_0x255aad,_0x3d182e){const _0x3ec919=_0x44b6a0,_0x31438e=_0x3d182e?_0x3d182e:devices[_0x255aad]['ip'];let _0x2ac625;const _0xf786e1=_0x8fa6e=>{const _0x34a23e=_0x1c11;if(settings[_0x34a23e(0x3d7)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x255aad)){const _0x212cba=generateLoginToken(_0x255aad);return{'allow':!![],'reason':_0x34a23e(0x266),'token':_0x212cba};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x2ac625=validToken(_0x8fa6e,_0x255aad),_0x2ac625[_0x34a23e(0x2d2)](_0x34a23e(0x31e))?{'allow':!![],'reason':_0x34a23e(0x202),'token':_0x8fa6e}:{'allow':![],'reason':_0x34a23e(0x34b),'token':null};}else return{'allow':!![],'reason':_0x34a23e(0x251),'token':null};};if(settings[_0x3ec919(0x2ab)]){let _0x4451af=[...settings[_0x3ec919(0x1f4)],_0x3ec919(0x3d5),'::ffff:127.0.0.1',_0x3ec919(0x233)];if(_0x4451af[_0x3ec919(0x38a)](_0x31438e))return _0xf786e1(_0x828fa2);else{_0x2ac625=validToken(_0x828fa2,_0x255aad);if(_0x2ac625[_0x3ec919(0x2d2)]('success'))return _0xf786e1(_0x828fa2);else{if(telegramIpApproved(_0x255aad)){const _0x157dfe=generateToken(_0x255aad);return _0x2ac625=_0xf786e1(_0x828fa2),_0x2ac625[_0x3ec919(0x36a)]?{'allow':!![],'reason':_0x3ec919(0x1e4),'token':_0x157dfe}:_0x2ac625;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x3ec919(0x3b1),'token':null}:{'allow':![],'reason':_0x3ec919(0x325),'token':null};}}}else return _0xf786e1(_0x828fa2);}function timelyDecrypt(_0x130505,_0x4fd211=!![]){const _0x3ab128=_0x44b6a0;if(_0x130505)try{const _0x29cb16=crypt[_0x3ab128(0x238)](secure[_0x3ab128(0x30f)],_0x130505)[_0x3ab128(0x2e0)],_0x19a194=_0x29cb16[_0x3ab128(0x3d1)]('@')[0x0],_0x120f9c=_0x29cb16[_0x3ab128(0x3d1)]('@')[0x1],_0x365cc7=new Date()['getTime']();if(_0x4fd211){if(_0x365cc7-_0x120f9c<maxSecretAge*0x3e8)return _0x19a194;else return![];}else return _0x19a194;}catch(_0x577730){return![];}else return![];}const validToken=(_0x155ed4,_0x241cdb)=>{const _0x1c4cb6=_0x44b6a0,_0x5c78e6=devices[_0x241cdb]['ip'];if(!_0x155ed4)return{'error':'No\x20authentication\x20token'};for(let _0x255f97 of blacklist){if(_0x255f97[_0x1c4cb6(0x26c)]==_0x155ed4)return{'error':_0x1c4cb6(0x32b)};}let _0x2059d4;try{_0x2059d4=jwt[_0x1c4cb6(0x1fd)](_0x155ed4,secure['secret']+_0x241cdb);}catch{return{'error':_0x1c4cb6(0x3a6)};}if(!_0x2059d4['hasOwnProperty']('clientip')&&!_0x2059d4[_0x1c4cb6(0x2d2)](_0x1c4cb6(0x2fe))||!_0x2059d4[_0x1c4cb6(0x2d2)](_0x1c4cb6(0x275)))return{'error':_0x1c4cb6(0x365)};if(!_0x2059d4[_0x1c4cb6(0x2d2)](_0x1c4cb6(0x2fe))&&_0x2059d4[_0x1c4cb6(0x2d2)]('clientip')){const {clientip:_0x5d58f0}=_0x2059d4;return _0x5c78e6==_0x5d58f0?{'success':_0x1c4cb6(0x305)}:{'error':_0x1c4cb6(0x208)};}else{if(_0x2059d4[_0x1c4cb6(0x2d2)]('username')&&_0x2059d4['hasOwnProperty'](_0x1c4cb6(0x22d))){const {username:_0x4da366,clientip:_0x4e9f2f}=_0x2059d4;return settings[_0x1c4cb6(0x1f7)]==_0x4da366&&_0x5c78e6==_0x4e9f2f?{'success':_0x1c4cb6(0x305)}:{'error':_0x1c4cb6(0x2fa)};}}},generateLoginToken=_0x359589=>{const _0x4e5a3=_0x44b6a0;if(_0x359589){const _0x2adfdc=devices[_0x359589]['ip'];return jwt['sign']({'username':settings[_0x4e5a3(0x1f7)],'clientip':_0x2adfdc},secure['secret']+_0x359589,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x480801=>{const _0x8af4fb=_0x44b6a0;if(_0x480801){const _0x2da4e0=devices[_0x480801]['ip'];return jwt[_0x8af4fb(0x379)]({'clientip':_0x2da4e0},secure[_0x8af4fb(0x395)]+_0x480801,{'expiresIn':devices[_0x480801][_0x8af4fb(0x23b)][_0x8af4fb(0x3bb)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x920f78=>{const _0x335955=_0x44b6a0;let _0xb4a8cf=![];return devices[_0x920f78][_0x335955(0x23b)]&&devices[_0x920f78][_0x335955(0x23b)][_0x335955(0x3bb)]!='reject'&&(_0xb4a8cf=devices[_0x920f78][_0x335955(0x23b)][_0x335955(0x22d)]==devices[_0x920f78]['ip']&&new Date()[_0x335955(0x3ae)]()-devices[_0x920f78][_0x335955(0x23b)][_0x335955(0x2c7)]<devices[_0x920f78][_0x335955(0x23b)][_0x335955(0x3bb)]*0x3c*0x3e8),_0xb4a8cf;},telegram2FaApproved=_0x127171=>{const _0x13771d=_0x44b6a0;let _0x4c91ea=![];return devices[_0x127171][_0x13771d(0x3a9)]&&devices[_0x127171][_0x13771d(0x3a9)][_0x13771d(0x3bb)]!=_0x13771d(0x1eb)&&(_0x4c91ea=devices[_0x127171][_0x13771d(0x3a9)][_0x13771d(0x22d)]==devices[_0x127171]['ip']&&new Date()['getTime']()-devices[_0x127171][_0x13771d(0x3a9)][_0x13771d(0x2c7)]<devices[_0x127171][_0x13771d(0x3a9)][_0x13771d(0x3bb)]*0x3c*0x3e8),_0x4c91ea;},normalizeIP=_0x358c8d=>{const _0x1d8e28=_0x44b6a0;let _0x253e1c=null,_0x117502=null;if(ipaddr[_0x1d8e28(0x2a0)](_0x358c8d)){const _0x5290ff=ipaddr[_0x1d8e28(0x2de)](_0x358c8d);_0x5290ff[_0x1d8e28(0x231)]()===_0x1d8e28(0x216)?(_0x5290ff[_0x1d8e28(0x370)]()&&(_0x253e1c=_0x5290ff[_0x1d8e28(0x2b3)]()['toString']()),_0x117502=_0x5290ff['toString']()):(_0x253e1c=_0x5290ff[_0x1d8e28(0x24d)](),_0x117502=_0x5290ff[_0x1d8e28(0x2f1)]()[_0x1d8e28(0x24d)]());}return{'show':_0x253e1c?_0x253e1c:_0x117502,'store':_0x117502};};function formatDate(_0x27102e){const _0x936fdd=_0x44b6a0;return _0x27102e[_0x936fdd(0x35c)]()+'/'+(_0x27102e['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x27102e['getDate']()[_0x936fdd(0x24d)]()['padStart'](0x2,'0')+'\x20'+_0x27102e[_0x936fdd(0x278)]()[_0x936fdd(0x24d)]()['padStart'](0x2,'0')+':'+_0x27102e[_0x936fdd(0x33f)]()[_0x936fdd(0x24d)]()[_0x936fdd(0x3a4)](0x2,'0')+':'+_0x27102e[_0x936fdd(0x235)]()[_0x936fdd(0x24d)]()[_0x936fdd(0x3a4)](0x2,'0');}function sleep(_0x43481d){return new Promise(_0x4eacd4=>setTimeout(_0x4eacd4,_0x43481d));}