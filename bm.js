const _0x391bd5=_0x48a3;(function(_0x43709d,_0x457feb){const _0x48b2df=_0x48a3,_0x4474b0=_0x43709d();while(!![]){try{const _0x3bb8ce=-parseInt(_0x48b2df(0x111))/0x1+parseInt(_0x48b2df(0x198))/0x2*(-parseInt(_0x48b2df(0x114))/0x3)+-parseInt(_0x48b2df(0x298))/0x4+parseInt(_0x48b2df(0x25f))/0x5+parseInt(_0x48b2df(0x29a))/0x6+parseInt(_0x48b2df(0x1a2))/0x7+-parseInt(_0x48b2df(0x2a2))/0x8*(parseInt(_0x48b2df(0x22f))/0x9);if(_0x3bb8ce===_0x457feb)break;else _0x4474b0['push'](_0x4474b0['shift']());}catch(_0x30f43f){_0x4474b0['push'](_0x4474b0['shift']());}}}(_0x13bf,0x84618));const _0x3b1f1b=function(){let _0x48e44f=!![];return function(_0x2971e4,_0x457ef6){const _0x578a16=_0x48e44f?function(){if(_0x457ef6){const _0x4ae8a5=_0x457ef6['apply'](_0x2971e4,arguments);return _0x457ef6=null,_0x4ae8a5;}}:function(){};return _0x48e44f=![],_0x578a16;};}(),_0x212f1e=_0x3b1f1b(this,function(){const _0x305d23=_0x48a3;return _0x212f1e[_0x305d23(0x1c1)]()[_0x305d23(0x1b9)]('(((.+)+)+)+$')[_0x305d23(0x1c1)]()[_0x305d23(0x170)](_0x212f1e)[_0x305d23(0x1b9)](_0x305d23(0x214));});_0x212f1e();'use strict';process[_0x391bd5(0x128)]['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x391bd5(0x1b8)),low=require('lowdb'),FileSync=require(_0x391bd5(0x1a4)),path=require(_0x391bd5(0x1d6)),crypto=require(_0x391bd5(0x190)),Crypt=require(_0x391bd5(0xf9))[_0x391bd5(0x1f2)],RSA=require(_0x391bd5(0xf9))['RSA'],bcrypt=require(_0x391bd5(0xf2)),jwt=require(_0x391bd5(0x100)),ipaddr=require('ipaddr.js'),argv=require(_0x391bd5(0x1a5))(process[_0x391bd5(0x120)]['slice'](0x2))[_0x391bd5(0x120)],uuidRandom=require(_0x391bd5(0x1a3)),TelegramBot=require(_0x391bd5(0x274)),Mixpanel=require(_0x391bd5(0x116)),axios=require(_0x391bd5(0x228)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x391bd5(0x157)),fileUpload=require(_0x391bd5(0x27f)),PORT=argv[_0x391bd5(0x28a)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x391bd5(0x11d)](_0x391bd5(0x18f)+PORT+_0x391bd5(0x1c7)),process[_0x391bd5(0x1e0)](0x1));const HOST=argv[_0x391bd5(0x12a)]||null,userID=argv[_0x391bd5(0x1ed)]||'',debugging=argv['d']||![];let bbpath='bb/',bbpath2='';const botfile=_0x391bd5(0x262),configfile=_0x391bd5(0x204),settingsfile='bb-settings.json',securefile=_0x391bd5(0x18c),maxBackups=0xa;let validInstallation=!![];!fs[_0x391bd5(0x15a)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x391bd5(0x288)),configpath=userID?bbpath+_0x391bd5(0x23f)+userID+'/':bbpath+_0x391bd5(0x23f),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x391bd5(0x205),zippath=userID?bbpath+_0x391bd5(0x186)+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+_0x391bd5(0x296),{'flags':'a'}),temppath=userID?bbpath+_0x391bd5(0x176)+userID+'/':bbpath+_0x391bd5(0x176);!fs['existsSync'](configpath)&&fs[_0x391bd5(0x1bd)](configpath);!fs[_0x391bd5(0x15a)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x391bd5(0x15a)](logspath)&&fs[_0x391bd5(0x1bd)](logspath);!fs[_0x391bd5(0x15a)](zippath)&&fs[_0x391bd5(0x1bd)](zippath);!fs[_0x391bd5(0x15a)](temppath)&&fs[_0x391bd5(0x1bd)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x391bd5(0x28d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x391bd5(0x197)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x391bd5(0x13c),'onepagemode':![]}})[_0x391bd5(0x28d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x391bd5(0x197)]({'secure':{},'blacklist':[]})[_0x391bd5(0x28d)]();let crypt=new Crypt({'md':_0x391bd5(0x247),'rsaStandard':_0x391bd5(0x1de)});const saltRounds=0xa,mixpanel=Mixpanel[_0x391bd5(0x212)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x391bd5(0x10d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x391bd5(0x12d)]&&settings['telegramToken']!=''&&settings[_0x391bd5(0x12b)]&&settings[_0x391bd5(0x12b)]!='')initTelegram();const logger={'screen':_0x2cf273=>{const _0x2205d5=_0x391bd5;console[_0x2205d5(0x11d)](_0x2cf273);},'simple':_0x1343e6=>{const _0x2e6e8c=_0x391bd5;console[_0x2e6e8c(0x11d)](_0x1343e6),loggerfile[_0x2e6e8c(0x28d)](util[_0x2e6e8c(0x21d)](_0x1343e6)+'\x0a');},'full':async _0x7a652b=>{const _0x1ae07a=_0x391bd5,_0x438254=getTimeStamp()+_0x1ae07a(0x232)+_0x7a652b;console[_0x1ae07a(0x11d)](_0x438254),loggerfile['write'](util[_0x1ae07a(0x21d)](_0x438254)+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x1ae07a(0x253)]!='orders')await tgBot[_0x1ae07a(0x1ca)](settings[_0x1ae07a(0x1f4)],'Bot\x20Mgr\x20>\x20'+_0x7a652b)[_0x1ae07a(0x1e2)](_0x2de25d=>{telegramError(_0x2de25d);});},'debug':async(_0x50fe39,_0x1fdadc='')=>{const _0x384933=_0x391bd5,_0x103ed7=getTimeStamp()+_0x384933(0x293)+_0x50fe39;if(debugging)console['log'](_0x103ed7);loggerfile[_0x384933(0x28d)](util[_0x384933(0x21d)](_0x103ed7)+'\x0a');if(_0x1fdadc){if(debugging)console[_0x384933(0x11d)](_0x1fdadc);loggerfile['write'](util['format'](_0x1fdadc)+'\x0a');}}};process['on'](_0x391bd5(0xf4),function(_0x453528){const _0x2b68fb=_0x391bd5;logger[_0x2b68fb(0x265)](_0x453528);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x391bd5(0xe5))[_0x391bd5(0x1ec)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x391bd5(0x154))['createServer'](app);app[_0x391bd5(0x231)](fileUpload({'useTempFiles':!![]})),app[_0x391bd5(0x207)](_0x391bd5(0x218),async(_0x10f73c,_0x17a1d1)=>{const _0x5a784b=_0x391bd5,_0x4f2392=_0x10f73c[_0x5a784b(0x223)][_0x5a784b(0x15d)],_0x37e952=getClientsWithBotID('botmanager'),_0x5356d0=_0x10f73c[_0x5a784b(0x213)][_0x5a784b(0x115)],_0x433e14=timelyDecrypt(_0x5356d0,![]),_0x5e5684=_0x37e952[_0x5a784b(0x240)](_0x1d1e18=>_0x1d1e18[_0x5a784b(0x115)]==_0x433e14);if(_0x5e5684){const _0x269fe4=normalizeIP(_0x10f73c[_0x5a784b(0xed)][_0x5a784b(0x17d)])[_0x5a784b(0x1e4)],_0x2a7325=_0x10f73c[_0x5a784b(0x213)][_0x5a784b(0x138)];if(validateAccess(_0x2a7325,_0x433e14,_0x269fe4)[_0x5a784b(0x24d)])_0x4f2392=='backup'&&await backupConfigFiles(),await zipFiles(_0x4f2392),_0x17a1d1[_0x5a784b(0x1a7)](zippath+(_0x4f2392+_0x5a784b(0x234)),_0x463059=>{const _0x2fc5a1=_0x5a784b;_0x463059&&(logger[_0x2fc5a1(0x171)]('Failed\x20to\x20download\x20'+_0x4f2392),logger[_0x2fc5a1(0x265)](_0x463059));});else logger[_0x5a784b(0x171)](_0x5a784b(0x1eb)+_0x4f2392+_0x5a784b(0x16d));}else logger[_0x5a784b(0x171)](_0x5a784b(0x1eb)+_0x4f2392+_0x5a784b(0x119));}),app[_0x391bd5(0x104)](_0x391bd5(0x216),async(_0x50ca35,_0x3ec0d5)=>{const _0x4c1217=_0x391bd5,_0x469574=getClientsWithBotID(_0x4c1217(0x12f)),_0x478e57=_0x50ca35[_0x4c1217(0x213)][_0x4c1217(0x115)],_0x38649a=timelyDecrypt(_0x478e57,![]),_0xd3c96e=_0x469574[_0x4c1217(0x240)](_0x5b0094=>_0x5b0094[_0x4c1217(0x115)]==_0x38649a);logger[_0x4c1217(0x256)](_0x4c1217(0x292));if(_0xd3c96e){const _0x12c13e=normalizeIP(_0x50ca35['socket'][_0x4c1217(0x17d)])[_0x4c1217(0x1e4)],_0x54e27a=_0x50ca35[_0x4c1217(0x213)]['tkn'];if(validateAccess(_0x54e27a,_0x38649a,_0x12c13e)['allow']){if(_0x50ca35[_0x4c1217(0x24e)]){const _0x9ea36=_0x50ca35[_0x4c1217(0x24e)][_0x4c1217(0x1d2)];await _0x9ea36['mv'](temppath+_0x9ea36['name']),_0x3ec0d5[_0x4c1217(0x18e)]({'status':!![],'message':'File\x20uploaded'});const _0x30a758=getBotsWithMode();_0x30a758['length']>0x0?confirmRestore(temppath,_0x9ea36['name']):unzipFile(temppath,_0x9ea36[_0x4c1217(0x1f7)]);}}else logger[_0x4c1217(0x171)](_0x4c1217(0x11b));}else logger[_0x4c1217(0x171)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x391bd5(0x290)](path[_0x391bd5(0x208)](__dirname,bbpath2,'build2'))),app[_0x391bd5(0x231)](express[_0x391bd5(0x290)](path[_0x391bd5(0x208)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x23cb2a,_0x1a1704){const _0x21c1a2=_0x391bd5;_0x1a1704[_0x21c1a2(0x1fa)](path[_0x21c1a2(0x208)](__dirname,bbpath2,_0x21c1a2(0x26a),_0x21c1a2(0x178)));}),app[_0x391bd5(0x207)](_0x391bd5(0x164),function(_0x30adb7,_0x368a39){const _0x2ed525=_0x391bd5;_0x368a39[_0x2ed525(0x1fa)](path[_0x2ed525(0x208)](__dirname,bbpath2,'build',_0x2ed525(0x178)));}),app[_0x391bd5(0x207)]('/:bot/portfolio',(_0x52aac6,_0x2ba40c)=>{const _0x48a246=_0x391bd5;_0x2ba40c[_0x48a246(0x1fa)](path['join'](__dirname,bbpath2,_0x48a246(0xfd),_0x48a246(0x178)));}),app[_0x391bd5(0x207)](_0x391bd5(0x151),(_0x801d1e,_0x30c8e5)=>{const _0x22eecf=_0x391bd5;_0x30c8e5[_0x22eecf(0x1fa)](path[_0x22eecf(0x208)](__dirname,bbpath2,'build','index.html'));}),app[_0x391bd5(0x207)]('/:bot/coins',(_0x10798b,_0x4a36e7)=>{const _0x25d170=_0x391bd5;_0x4a36e7['sendFile'](path['join'](__dirname,bbpath2,_0x25d170(0xfd),_0x25d170(0x178)));}),app['get'](_0x391bd5(0x236),(_0x4d8f65,_0x3164a1)=>{const _0x2042dc=_0x391bd5;_0x3164a1[_0x2042dc(0x1fa)](path[_0x2042dc(0x208)](__dirname,bbpath2,_0x2042dc(0xfd),_0x2042dc(0x178)));}),app[_0x391bd5(0x207)]('/:bot/configuration',(_0x1fb112,_0x41dd1a)=>{const _0x458c52=_0x391bd5;_0x41dd1a[_0x458c52(0x1fa)](path[_0x458c52(0x208)](__dirname,bbpath2,_0x458c52(0xfd),'index.html'));}),app[_0x391bd5(0x207)](_0x391bd5(0x103),(_0x51a41c,_0x322b2e)=>{const _0x6ade79=_0x391bd5;_0x322b2e[_0x6ade79(0x1fa)](path[_0x6ade79(0x208)](__dirname,bbpath2,_0x6ade79(0xfd),_0x6ade79(0x178)));});function _0x48a3(_0x3663a8,_0x26a94f){const _0x3cb1b6=_0x13bf();return _0x48a3=function(_0x212f1e,_0x3b1f1b){_0x212f1e=_0x212f1e-0xe3;let _0x13bf63=_0x3cb1b6[_0x212f1e];return _0x13bf63;},_0x48a3(_0x3663a8,_0x26a94f);}if(HOST)http[_0x391bd5(0x244)](PORT,HOST);else http['listen'](PORT);const io=require(_0x391bd5(0x2a5))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function _0x13bf(){const _0x2de363=['Unauthorized\x20attempt\x20to\x20show\x20configuration','mkdirSync','blacklist','getHours','toggle-bot-mode','toString','args','store-configuration','live','bot','compareSync',',\x20must\x20be\x20a\x204\x20digit\x20number','Unauthorized\x20login\x20attempt\x20(timeout)','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','sendMessage','apiKey','reinstall','randomBytes','getMinutes','-results.json','alerts','secure','backupfile','accept','Restoring\x20bot(s)\x20from\x20backup','assign','path','inherit','login\x20token\x20valid','Restore\x20process\x20aborted','statSync','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','getMonth','login\x20not\x20required','RSA-OAEP','orders','exit','binary','catch',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','store','No\x20bots\x20running\x20right\x20now','status','notification','backup','https://api.ipify.org?format=json','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Unauthorized\x20attempt\x20to\x20download\x20','version','user','isIPv4MappedAddress','***','removeListener','replace','Crypt','Password\x20has\x20been\x20reset\x20to:\x20','telegramChatId','removeAllListeners','::1','name','Allow\x20login\x20from\x20IP\x20address\x20<b>','Invalid\x20username\x20or\x20IP\x20address','sendFile','exp','Backup\x20file\x20unzipped\x20and\x20stored','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Notifications\x20types:\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Bot\x20','keys','resetHistory','bb-config.json','logs/','temporary\x20access\x20rejected','get','join','push','output-001.log','toggleBotMode','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','chat','ipc','getUTCHours','stringify','file','init','headers','(((.+)+)+)+$','confirm-message','/upload-backup','alias','/download/:type','kind','whitelist','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','decrypt','format','then','/metrics\x20-\x20show\x20bot\x20performance\x0a','from','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','logs','params','lastmsgemitted','filter','\x20minutes','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','axios','Starting\x20Balance\x20Bot\x20update','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20attempt\x20to\x20store\x20configuration','store-fiat','pidExpireLogin','update-bot','736839UtOGWl','getTime','use',':\x20Bot\x20Mgr\x20>\x20','copyFileSync','.zip','deleteHistoryAlerts','/:bot/history','running','privateKey','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Login\x20rejected','\x20|\x20user:\x20...','randomFillSync','delete-alerts','Restore\x20backup\x20file\x20','config/','find','HTML','place-order','showname','listen','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20confirm\x20message','sha256','botname','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','username','telegrammsg','onepagemode','allow','files','exec','answerCallbackQuery','messages','yes','telegramEvents','Logged\x20out\x20user\x20...','Markdown','debug','store-headless','invalid\x20credentials','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','logged\x20out','placeOrder','cancelLoading','parse','4830955NBQzGr','updatebotmanager','Unauthorized\x20attempt\x20to\x20delete\x20bot','bot.js','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','simple','bot-','-performance.json','\x20|\x20client:\x20...','min','build2','-events.json','/on\x20-\x20start\x20bot(s)\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bbPassword','add','************','match','backup-full.zip','\x20mode','node-telegram-bot-api','cloneDeep','get-logs','telegramEnabled','clientip','hasOwnProperty','output-002.log','unlinkSync','publicKey','Unauthorized\x20attempt\x20to\x20update\x20settings','conn','express-fileupload','readdirSync','Unauthorized\x20attempt\x20to\x20add\x20bot','any','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','headless','Notifications\x20disabled','map','secret','clients','Password\x20reset\x20rejected','port','Access\x20enabled\x20for\x20','storeConfiguration','write','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','static','userid','Backup\x20file\x20uploaded',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','fork','restore-backup-file','/output-000.log','login\x20required','1808192QwKNEY','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','3723618QWDyCQ','/off\x20-\x20stop\x20bot(s)\x0a','Starting\x20Balance\x20Bot\x20','30\x20min','split','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','stopped','get-portfolio','64tWFWlQ','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','hex','socket.io','encryptedUuid','delete-bot','node-zip','\x20|\x20','Session\x20expired\x20for\x20user\x20...','bbUsername','Invalid\x20authentication\x20token\x20(1)','hashSync','login','<b>Telegram\x20Bot\x20Status:</b>\x0a','version.json','isValid','writeFileSync','restart','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','loginRequired','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','show','socket','cancel-loading','All\x20bots','backup-full@','error','bcryptjs','settings.','uncaughtException','temporary\x20token\x20generated','Alerts','getFullYear','Notifications\x20enabled\x0a','hybrid-crypto-js','timeshift','Unauthorized\x20attempt\x20to\x20log\x20out','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','build','getStartingBalances','\x20>\x20','jsonwebtoken','sendMetricsTelegram','Ok,\x20will\x20send\x20order\x20notifications\x20only','/:bot/support','post','login\x20token\x20generated','f2aRequired','function','::ffff:127.0.0.1','/help\x20-\x20show\x20available\x20commands\x0a','exchange','sockets','emitHistory','api-eu.mixpanel.com','temporary\x20access\x20timeout','-config.json','All','118901yWxVpZ','\x20to\x20','telegram','3XQpTuC','uuid','mixpanel','sendPortfolioTelegram','Starting\x20bot\x20|\x20Bot\x20','\x20(2)','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','includes','log','<b>Balance\x20Bot\x20Status:</b>\x0a','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','argv','Yes','all','telegram2FaApproval','bbvReceive','reason','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','new','env','readFileSync','host','telegramUsername','disconnect','telegramToken','new-disabled','botmanager','startsWith','Notifications\x20enabled','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Unauthorized\x20attempt\x20to\x20delete\x20alerts','output-000.log','get-messages','handshake','length','tkn','SIGINT','size','disabled','0.0.0','expiry','padStart','getPortfolio','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','success','update','5\x20min','ipv6','Setting\x20access:\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Deleted\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20messages','isDirectory','reload','callback_query','access','bots','Invalid\x20Telegram\x20token','botID','getSeconds','/:bot/performance','Login\x20accepted','stopPolling','http','get-backup-files','sort','util','bbvNew','Error\x20while\x20deleting\x20config\x20files:\x20','existsSync','stop','auto','type','$1_$2_$3','logout','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','forEach','Temporary\x20access\x20rejected','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','/:bot','get-starting-balances','emit','enabled','-----------------------------------------------------------------------------------','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','value','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','once','\x20(1)','slice','title','constructor','full','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','show-config','onText','add-bot','temp/','getDate','index.html','</b>\x20?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','timestamp','latestversion','remoteAddress','token','manual','remove','_data','test','Starting\x20new\x20bot\x20|\x20Bot\x20','reset-history','update-bb','zip/','polling_error','reset-password','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','reject','/update\x20-\x20update\x20Balance\x20Bot\x0a','bb-secure.json','lastmsgtelegram','send','Error:\x20Invalid\x20argument\x20','crypto','Notifications\x20disabled\x0a','pidRefreshToken','toIPv4Address','2FA\x20required','bb-settings.json','message','defaults','655346vmBECI','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Server','connection','telegramIpApproval','Starting\x20Balance\x20Bot\x20reinstallation','verify','2FA\x20login\x20required','/disable\x20-\x20disable\x20notifications\x0a','set','3563196qfRxGQ','uuid-random','lowdb/adapters/FileSync','yargs/yargs','Orders','download','/restart\x20-\x20restart\x20bot(s)\x0a','started','number','endsWith','/names\x20-\x20show\x20bot\x20names\x0a','mode','settings','2FA\x20login\x20token\x20generated','sortBy','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','password','Enabled\x20Bot\x20','order','404\x20Not\x20Found','/enable\x20-\x20enable\x20notifications\x0a','No\x20authentication\x20token','date-fns','search','apiSecret','data'];_0x13bf=function(){return _0x2de363;};return _0x13bf();}async function startServer(){const _0x4b1d00=_0x391bd5;logger[_0x4b1d00(0x265)](''),logger[_0x4b1d00(0x265)](_0x4b1d00(0x168)),await logger[_0x4b1d00(0x171)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x4b1d00(0x265)](_0x4b1d00(0x168));if(config[_0x4b1d00(0x137)]!=0x0)for(const _0x668ced of config){if(_0x668ced[_0x4b1d00(0x1e6)]==_0x4b1d00(0x167)||_0x668ced['status']==_0x4b1d00(0x127))await logger[_0x4b1d00(0x171)](_0x4b1d00(0x118)+_0x668ced['botID']+_0x4b1d00(0x2a9)+_0x668ced[_0x4b1d00(0x248)]),startBot([_0x668ced[_0x4b1d00(0x14f)],userID],{'cwd':bbpath},function(_0x45c2cb){const _0x37eb25=_0x4b1d00;if(_0x45c2cb)logger[_0x37eb25(0x171)](_0x45c2cb);});else(_0x668ced[_0x4b1d00(0x1e6)]==_0x4b1d00(0x13b)||_0x668ced['status']==_0x4b1d00(0x12e))&&await logger[_0x4b1d00(0x171)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x668ced['botID']+'\x20|\x20'+_0x668ced[_0x4b1d00(0x248)]);}else!newBot&&logger[_0x4b1d00(0x265)](_0x4b1d00(0x26d));if(newBot)addBot();logger['simple'](_0x4b1d00(0x168)),logger[_0x4b1d00(0x265)]('');}function startSocket(){const _0xadbc83=_0x391bd5;io['on'](_0xadbc83(0x19b),_0x3aa247=>{const _0x4d5579=_0xadbc83;let _0x21dcb3,_0x35a99a,_0x7e2c33,_0x1cb0db,_0x3d18c7;const _0x1a9599=_0x3aa247[_0x4d5579(0x136)][_0x4d5579(0x213)]['referer'];_0x35a99a=_0x1a9599['match'](/bot[0-9]{3}/);if(_0x35a99a)_0x7e2c33=_0x35a99a[0x0][_0x4d5579(0x271)](/[0-9]{3}/);if(_0x7e2c33)_0x21dcb3=_0x7e2c33[0x0];else _0x21dcb3='botmanager';const _0x346f0f=_0x3aa247[_0x4d5579(0x136)]['auth'][_0x4d5579(0x2a6)];if(!_0x346f0f)_0x3aa247[_0x4d5579(0x166)]('status',{'publicKey':secure[_0x4d5579(0x27c)]});else{_0x1cb0db=timelyDecrypt(_0x346f0f,![]);if(!_0x1cb0db)_0x3aa247[_0x4d5579(0x166)](_0x4d5579(0x1e6),{'publicKey':secure['publicKey']});else{_0x3d18c7=normalizeIP(_0x3aa247[_0x4d5579(0x27e)]['remoteAddress'])[_0x4d5579(0x1e4)];if(!devices[_0x1cb0db])devices[_0x1cb0db]={'uuid':_0x1cb0db,'access':{'token':null}};devices[_0x1cb0db]['ip']=_0x3d18c7;const _0x4445d8=addClient(_0x3aa247['id'],_0x1cb0db,_0x21dcb3);setAccess(_0x4445d8),emitMessages(),_0x3aa247['on']('login',_0x5b0331=>{const _0x26da4b=_0x4d5579,_0x54a9cf=timelyDecrypt(_0x5b0331['password']);if(_0x54a9cf){_0x5b0331={'username':_0x5b0331[_0x26da4b(0x24a)],'password':_0x54a9cf},devices[_0x1cb0db]['access']=validateCredentials(_0x5b0331,_0x1cb0db);if(devices[_0x1cb0db]['access'][_0x26da4b(0x24d)]==![]&&devices[_0x1cb0db][_0x26da4b(0x14c)][_0x26da4b(0x125)]==_0x26da4b(0x19f))_0x3aa247['emit'](_0x26da4b(0x1e6),{'access':devices[_0x1cb0db]['access']}),loginAccess2FA(_0x1cb0db,_0x3d18c7);else{if(devices[_0x1cb0db]['access'][_0x26da4b(0x24d)]==![]&&devices[_0x1cb0db]['access'][_0x26da4b(0x125)]==_0x26da4b(0x258))_0x3aa247['emit'](_0x26da4b(0x1e6),{'access':devices[_0x1cb0db][_0x26da4b(0x14c)]});else devices[_0x1cb0db]['access'][_0x26da4b(0x24d)]&&devices[_0x1cb0db][_0x26da4b(0x14c)][_0x26da4b(0x125)]==_0x26da4b(0x105)&&(getClientsWithUuid(_0x1cb0db)['forEach'](_0x14cb8b=>{setAccess(_0x14cb8b);}),logger[_0x26da4b(0x256)]('Logged\x20in\x20user\x20...'+_0x1cb0db[_0x26da4b(0x16e)](-0x8)),setTokenRefresh(_0x1cb0db),setSessionTimeout(_0x26da4b(0xe3),_0x1cb0db));}}else logger[_0x26da4b(0x171)](_0x26da4b(0x1c8));}),_0x3aa247['on'](_0x4d5579(0x188),()=>{resetPassword();}),_0x3aa247['on'](_0x4d5579(0x12c),_0x2275a2=>{removeClient(_0x3aa247['id']);}),_0x21dcb3==_0x4d5579(0x12f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x52515d){const _0x461c06=_0x391bd5;if(_0x52515d!=_0x461c06(0x12f)&&config[_0x461c06(0x1cb)]!=''){if(pid[_0x52515d])pid[_0x52515d][_0x461c06(0x18e)]({'function':'initclient','args':null});}_0x52515d!='botmanager'&&broadcastToBots(_0x461c06(0x14d),JSON[_0x461c06(0x210)](config));}function reloadBotManager(){const _0x5dc48a=_0x391bd5;getClientsWithBotID(_0x5dc48a(0x12f))[_0x5dc48a(0x161)](_0x19535f=>{const _0x283532=_0x5dc48a;getSocket(_0x19535f['id'])['emit'](_0x283532(0x1e6),{'access':{'allow':![],'reason':_0x283532(0x14a),'token':null}});});}function getSocket(_0x14a884){const _0x27d00c=_0x391bd5;return io[_0x27d00c(0x10b)]['sockets'][_0x27d00c(0x207)](_0x14a884);}function setAccess(_0x4dc6d3){const _0x1e2450=_0x391bd5,_0x5d9cdc=getSocket(_0x4dc6d3['id']),_0x5e3e41=_0x4dc6d3[_0x1e2450(0x115)],_0xbdb1e3=_0x4dc6d3[_0x1e2450(0x1c5)];devices[_0x5e3e41][_0x1e2450(0x14c)]=validateAccess(devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x17e)],_0x5e3e41),logger['debug'](_0x1e2450(0x145)+devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x125)]+_0x1e2450(0x268)+_0x4dc6d3['id']['slice'](-0x8)+_0x1e2450(0x23b)+_0x5e3e41['slice'](-0x8)),_0x5d9cdc[_0x1e2450(0x208)](_0x5e3e41);if(devices[_0x5e3e41]['access']['allow']){_0x5d9cdc[_0x1e2450(0x208)](_0xbdb1e3);if(_0xbdb1e3=='botmanager')initializeSocketBotManager(_0x5d9cdc);else initializeSocketBot(_0x5d9cdc);initClient(_0xbdb1e3);}devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x17e)]&&devices[_0x5e3e41]['access'][_0x1e2450(0x125)]==_0x1e2450(0xf5)&&setSessionTimeout('2FA',_0x5e3e41),devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x17e)]&&devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x125)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x5e3e41),_0x5d9cdc['emit'](_0x1e2450(0x1e6),{'status':_0x4dc6d3['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5e3e41][_0x1e2450(0x14c)],'externalip':devices[_0x5e3e41]['ip'],'publicKey':secure[_0x1e2450(0x27c)],'userid':settings[_0x1e2450(0x291)],'validInstallation':validInstallation}),devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x24d)]==![]&&devices[_0x5e3e41][_0x1e2450(0x14c)][_0x1e2450(0x125)]==_0x1e2450(0x194)&&temporaryAccess2FA(_0x5e3e41,devices[_0x5e3e41]['ip']);}function setSessionTimeout(_0x3b8e24,_0x4ace37){const _0xb7272c=_0x391bd5;let _0x46ef3e;if(_0x3b8e24=='login')_0x46ef3e=loginExpiry*0x3c*0x3e8;else _0x46ef3e=devices[_0x4ace37][_0xb7272c(0x19c)][_0xb7272c(0x13d)]*0x3c*0x3e8-(new Date()[_0xb7272c(0x230)]()-devices[_0x4ace37][_0xb7272c(0x19c)][_0xb7272c(0x17b)]);if(devices[_0x4ace37][_0xb7272c(0x22d)])clearTimeout(devices[_0x4ace37][_0xb7272c(0x22d)]);devices[_0x4ace37][_0xb7272c(0x22d)]=setTimeout(()=>{const _0x4ac926=_0xb7272c;if(devices[_0x4ace37][_0x4ac926(0x192)])clearTimeout(devices[_0x4ace37]['pidRefreshToken']);removeSocketListeners(_0x4ace37),addBlacklist(_0x4ace37),devices[_0x4ace37][_0x4ac926(0x19c)]=null,devices[_0x4ace37][_0x4ac926(0x123)]=null,devices[_0x4ace37][_0x4ac926(0x14c)][_0x4ac926(0x17e)]=null,logger[_0x4ac926(0x256)](_0x4ac926(0x2aa)+_0x4ace37[_0x4ac926(0x16e)](-0x8)),devices[_0x4ace37][_0x4ac926(0x14c)]=validateAccess(devices[_0x4ace37]['access'][_0x4ac926(0x17e)],_0x4ace37),!(devices[_0x4ace37][_0x4ac926(0x14c)][_0x4ac926(0x24d)]&&devices[_0x4ace37][_0x4ac926(0x14c)][_0x4ac926(0x125)]=='login\x20not\x20required')&&(_0x3b8e24==_0x4ac926(0xe3)?io['to'](_0x4ace37)['emit'](_0x4ac926(0x1e6),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4ace37)['emit'](_0x4ac926(0x1e6),{'access':{'allow':![],'reason':_0x4ac926(0x10e),'token':null}})),devices[_0x4ace37][_0x4ac926(0x14c)][_0x4ac926(0x17e)]=null;},_0x46ef3e);}function setTokenRefresh(_0x5175c1){const _0x56f029=_0x391bd5;if(devices[_0x5175c1][_0x56f029(0x192)])clearTimeout(devices[_0x5175c1][_0x56f029(0x192)]);devices[_0x5175c1][_0x56f029(0x192)]=setTimeout(()=>{const _0xb17d51=_0x56f029;getClientsWithUuid(_0x5175c1)['length']!=0x0?(devices[_0x5175c1][_0xb17d51(0x14c)]=refreshToken(_0x5175c1),io['to'](_0x5175c1)[_0xb17d51(0x166)]('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5175c1]['access'],'externalip':devices[_0x5175c1]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x5175c1)):clearTimeout(devices[_0x5175c1]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4cf745){const _0x1f7d1e=_0x391bd5,_0x15bd0f=getClient(_0x4cf745['id'])[_0x1f7d1e(0x115)];_0x4cf745[_0x1f7d1e(0x166)](_0x1f7d1e(0x14d),config),_0x4cf745[_0x1f7d1e(0x166)]('settings',cleanSettings()),_0x4cf745['on'](_0x1f7d1e(0x175),_0x39496e=>{const _0x126bd4=_0x1f7d1e;if(validateAccess(_0x39496e,_0x15bd0f)[_0x126bd4(0x24d)])addBot();else logger[_0x126bd4(0x171)](_0x126bd4(0x281));}),_0x4cf745['on'](_0x1f7d1e(0x22e),(_0xeb8fd4,_0x4a06d4)=>{const _0x236a8d=_0x1f7d1e;if(validateAccess(_0x4a06d4,_0x15bd0f)['allow'])toggleBot(_0xeb8fd4[_0x236a8d(0x14f)],_0xeb8fd4[_0x236a8d(0x1e6)],_0xeb8fd4[_0x236a8d(0x1c4)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4cf745['on'](_0x1f7d1e(0x1c0),(_0xd71327,_0x53a100)=>{const _0x20bfef=_0x1f7d1e;if(validateAccess(_0x53a100,_0x15bd0f)['allow'])toggleBotMode(_0xd71327);else logger[_0x20bfef(0x171)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4cf745['on'](_0x1f7d1e(0x2a7),(_0x25c82c,_0xf91d5c)=>{const _0x5487e7=_0x1f7d1e;if(validateAccess(_0xf91d5c,_0x15bd0f)[_0x5487e7(0x24d)])deleteBot(_0x25c82c);else logger[_0x5487e7(0x171)](_0x5487e7(0x261));}),_0x4cf745['on']('store-settings',(_0x1d565c,_0x2803a7)=>{const _0x4c5874=_0x1f7d1e;if(validateAccess(_0x2803a7,_0x15bd0f)[_0x4c5874(0x24d)])storeSettings(_0x1d565c,!![]);else logger[_0x4c5874(0x171)](_0x4c5874(0x27d));}),_0x4cf745['on']('update-bb',_0x5d3a78=>{const _0x474f11=_0x1f7d1e;if(validateAccess(_0x5d3a78,_0x15bd0f)[_0x474f11(0x24d)])updateBB(_0x474f11(0x142));else logger['full'](_0x474f11(0x28e));}),_0x4cf745['on']('reinstall-bb',_0x31b024=>{const _0x1fe781=_0x1f7d1e;if(validateAccess(_0x31b024,_0x15bd0f)[_0x1fe781(0x24d)])updateBB(_0x1fe781(0x1cc));else logger[_0x1fe781(0x171)](_0x1fe781(0x20c));}),_0x4cf745['on'](_0x1f7d1e(0x155),_0x1900dd=>{const _0x365f62=_0x1f7d1e;if(validateAccess(_0x1900dd,_0x15bd0f)[_0x365f62(0x24d)]){const _0xd63636=getClient(_0x4cf745['id']);if(_0xd63636)getBackupFiles(_0xd63636[_0x365f62(0x115)]);else logger[_0x365f62(0x171)](_0x365f62(0x21b));}else logger[_0x365f62(0x171)](_0x365f62(0x1db));}),_0x4cf745['on'](_0x1f7d1e(0x295),(_0x2d915e,_0x58a29e)=>{const _0xa92bac=_0x1f7d1e;if(validateAccess(_0x58a29e,_0x15bd0f)[_0xa92bac(0x24d)])restoreBackupFile(_0x2d915e);else logger[_0xa92bac(0x171)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x4cf745['on'](_0x1f7d1e(0x135),_0x497eae=>{const _0x2d85df=_0x1f7d1e;if(validateAccess(_0x497eae,_0x15bd0f)['allow'])getMessages();else logger[_0x2d85df(0x171)](_0x2d85df(0x148));}),_0x4cf745['on']('confirm-message',(_0x5e436a,_0x2ddb63)=>{const _0xa3ee7c=_0x1f7d1e;if(validateAccess(_0x2ddb63,_0x15bd0f)[_0xa3ee7c(0x24d)])confirmMessage(_0x5e436a);else logger[_0xa3ee7c(0x171)](_0xa3ee7c(0x246));}),_0x4cf745['on'](_0x1f7d1e(0x15f),_0x3873b6=>{const _0x209119=_0x1f7d1e;if(validateAccess(_0x3873b6,_0x15bd0f)['allow']){if(devices[_0x15bd0f]['pidRefreshToken'])clearTimeout(devices[_0x15bd0f]['pidRefreshToken']);if(devices[_0x15bd0f]['pidExpireLogin'])clearTimeout(devices[_0x15bd0f]['pidExpireLogin']);removeSocketListeners(getClient(_0x4cf745['id'])[_0x209119(0x115)]),addBlacklist(_0x15bd0f),devices[_0x15bd0f][_0x209119(0x19c)]=null,devices[_0x15bd0f][_0x209119(0x123)]=null,devices[_0x15bd0f]['access'][_0x209119(0x17e)]=null,logger[_0x209119(0x256)](_0x209119(0x254)+_0x15bd0f[_0x209119(0x16e)](-0x8)),io['to'](getClient(_0x4cf745['id'])['uuid'])[_0x209119(0x166)]('status',{'access':{'allow':![],'reason':_0x209119(0x25b),'token':null}});}else logger[_0x209119(0x171)](_0x209119(0xfb));});}function initializeSocketBot(_0x3e437a){const _0x216236=_0x391bd5,_0x540a40=getClient(_0x3e437a['id'])[_0x216236(0x1c5)],_0xd71b7c=getClient(_0x3e437a['id'])[_0x216236(0x115)];_0x3e437a['on'](_0x216236(0x276),(_0x15a875,_0xe8155c)=>{const _0x93f19b=_0x216236;if(validateAccess(_0xe8155c,_0xd71b7c)[_0x93f19b(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x93f19b(0x18e)]({'function':_0x93f19b(0x10c),'args':_0x15a875});}else logger[_0x93f19b(0x171)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x3e437a['on'](_0x216236(0x23d),(_0x291da8,_0x2585b1)=>{const _0x2dc751=_0x216236;if(validateAccess(_0x2585b1,_0xd71b7c)[_0x2dc751(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x2dc751(0x18e)]({'function':_0x2dc751(0x235),'args':_0x291da8});}else logger[_0x2dc751(0x171)](_0x2dc751(0x133));}),_0x3e437a['on'](_0x216236(0x2a1),(_0x27f8ba,_0x2df748)=>{const _0x51945c=_0x216236;if(validateAccess(_0x2df748,_0xd71b7c)[_0x51945c(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x51945c(0x18e)]({'function':_0x51945c(0x13f),'args':_0x27f8ba});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3e437a['on'](_0x216236(0x1c3),(_0x3a1cc3,_0x19d5e8)=>{const _0x52f767=_0x216236;if(validateAccess(_0x19d5e8,_0xd71b7c)[_0x52f767(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x52f767(0x18e)]({'function':_0x52f767(0x28c),'args':_0x3a1cc3});}else logger[_0x52f767(0x171)](_0x52f767(0x22b));}),_0x3e437a['on'](_0x216236(0x257),(_0x37832e,_0xbeb9ea)=>{const _0x559ccf=_0x216236;if(validateAccess(_0xbeb9ea,_0xd71b7c)[_0x559ccf(0x24d)]){if(pid[_0x540a40])pid[_0x540a40]['send']({'function':'storeHeadless','args':_0x37832e});}else logger[_0x559ccf(0x171)](_0x559ccf(0x28f));}),_0x3e437a['on'](_0x216236(0x22c),(_0x49de37,_0x1fb355)=>{const _0x71e94c=_0x216236;if(validateAccess(_0x1fb355,_0xd71b7c)[_0x71e94c(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x71e94c(0x18e)]({'function':'storeFiat','args':_0x49de37});}else logger['full'](_0x71e94c(0xeb));}),_0x3e437a['on'](_0x216236(0x184),_0x342bc1=>{const _0x1ef1a1=_0x216236;if(validateAccess(_0x342bc1,_0xd71b7c)[_0x1ef1a1(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x1ef1a1(0x18e)]({'function':_0x1ef1a1(0x203),'args':null});}else logger[_0x1ef1a1(0x171)](_0x1ef1a1(0x25a));}),_0x3e437a['on'](_0x216236(0x165),_0x28258a=>{const _0x430b0f=_0x216236;if(validateAccess(_0x28258a,_0xd71b7c)[_0x430b0f(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x430b0f(0x18e)]({'function':_0x430b0f(0xfe),'args':null});}else logger[_0x430b0f(0x171)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3e437a['on'](_0x216236(0x242),(_0x273029,_0x438fc9)=>{const _0x175300=_0x216236;if(validateAccess(_0x438fc9,_0xd71b7c)[_0x175300(0x24d)]){if(pid[_0x540a40])pid[_0x540a40][_0x175300(0x18e)]({'function':_0x175300(0x25c),'args':_0x273029});}else logger[_0x175300(0x171)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x3e437a['on'](_0x216236(0xee),_0x1619fb=>{const _0xe1d589=_0x216236;if(validateAccess(_0x1619fb,_0xd71b7c)[_0xe1d589(0x24d)]){if(pid[_0x540a40])pid[_0x540a40]['send']({'function':_0xe1d589(0x25d),'args':null});}else logger[_0xe1d589(0x171)](_0xe1d589(0x283));}),_0x3e437a['on'](_0x216236(0x173),_0x2edfd9=>{const _0x2952e6=_0x216236;if(validateAccess(_0x2edfd9,_0xd71b7c)['allow']){if(pid[_0x540a40])pid[_0x540a40][_0x2952e6(0x18e)]({'function':'showConfig','args':null});}else logger[_0x2952e6(0x171)](_0x2952e6(0x1bc));}),_0x3e437a['on'](_0x216236(0x185),_0x402962=>{const _0x3a5f08=_0x216236;if(validateAccess(_0x402962,_0xd71b7c)[_0x3a5f08(0x24d)])updateBB(_0x3a5f08(0x142));else logger['full'](_0x3a5f08(0x28e));}),_0x3e437a['on'](_0x216236(0x135),_0x502910=>{const _0x3f5f56=_0x216236;if(validateAccess(_0x502910,_0xd71b7c)['allow'])getMessages();else logger[_0x3f5f56(0x171)](_0x3f5f56(0x148));}),_0x3e437a['on'](_0x216236(0x215),(_0x57d4c1,_0x18ae92)=>{const _0x27420b=_0x216236;if(validateAccess(_0x18ae92,_0xd71b7c)[_0x27420b(0x24d)])confirmMessage(_0x57d4c1);else logger[_0x27420b(0x171)](_0x27420b(0x246));}),_0x3e437a['on']('logout',_0x62e232=>{const _0x4a16f8=_0x216236;if(validateAccess(_0x62e232,_0xd71b7c)[_0x4a16f8(0x24d)]){if(devices[_0xd71b7c][_0x4a16f8(0x192)])clearTimeout(devices[_0xd71b7c][_0x4a16f8(0x192)]);if(devices[_0xd71b7c]['pidExpireLogin'])clearTimeout(devices[_0xd71b7c][_0x4a16f8(0x22d)]);removeSocketListeners(getClient(_0x3e437a['id'])['uuid']),addBlacklist(_0xd71b7c),devices[_0xd71b7c][_0x4a16f8(0x19c)]=null,devices[_0xd71b7c][_0x4a16f8(0x123)]=null,devices[_0xd71b7c][_0x4a16f8(0x14c)][_0x4a16f8(0x17e)]=null,logger[_0x4a16f8(0x256)](_0x4a16f8(0x254)+_0xd71b7c[_0x4a16f8(0x16e)](-0x8)),io['to'](getClient(_0x3e437a['id'])[_0x4a16f8(0x115)])[_0x4a16f8(0x166)]('status',{'access':{'allow':![],'reason':_0x4a16f8(0x25b),'token':null}});}else logger[_0x4a16f8(0x171)](_0x4a16f8(0xfb));});}function removeSocketListeners(_0x63462e){const _0x434b8e=_0x391bd5;getClientsWithUuid(_0x63462e)[_0x434b8e(0x161)](_0x5c5c4e=>{const _0x5406a4=_0x434b8e;getSocket(_0x5c5c4e['id'])[_0x5406a4(0x1f5)]();});}function cleanSettings(){const _0x574d96=_0x391bd5;let _0x335326=settings;return settings['telegramToken']&&settings[_0x574d96(0x12d)]!=''&&(_0x335326={..._0x335326,'telegramToken':_0x574d96(0x270)}),settings[_0x574d96(0x26e)]&&settings[_0x574d96(0x26e)]!=''&&(_0x335326={..._0x335326,'bbPassword':_0x574d96(0x270)}),(settings['bbPassword']&&settings[_0x574d96(0x26e)]==_0x574d96(0x1ef)||settings[_0x574d96(0x12d)]&&settings[_0x574d96(0x12d)]==_0x574d96(0x1ef))&&(_0x335326={..._0x335326,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x574d96(0x12d)]==_0x574d96(0x1ef)}}),_0x335326;}async function updateBB(_0x550249){const _0x1c1aac=_0x391bd5;await backupConfigFiles(),installingUpdate=!![],config[_0x1c1aac(0x161)](_0x241c5e=>{const _0x13f728=_0x1c1aac;restartBot(_0x241c5e[_0x13f728(0x14f)]);}),logger[_0x1c1aac(0x256)](_0x1c1aac(0x29c)+_0x550249);if(_0x550249==_0x1c1aac(0x142))process[_0x1c1aac(0x18e)]({'update':!![]},_0x3440aa=>{});else _0x550249==_0x1c1aac(0x1cc)&&process['send']({'reinstall':!![]},_0x5be37c=>{});}function startBot(_0x5276e6,_0x31e9e8,_0x28553f){const _0x1e0e20=_0x391bd5;if(debugging)_0x5276e6[_0x1e0e20(0x209)]('-d');let _0x8300dc=![];const _0x55bca2=_0x5276e6[0x0];_0x31e9e8={..._0x31e9e8,'stdio':[_0x1e0e20(0x1d7),_0x1e0e20(0x1d7),_0x1e0e20(0x1d7),_0x1e0e20(0x20e)]},pid[_0x55bca2]=childProcess[_0x1e0e20(0x294)](botfile,_0x5276e6,_0x31e9e8),pid[_0x55bca2]['on'](_0x1e0e20(0x196),_0x46c10d=>{const _0x4be259=_0x1e0e20;switch(Object[_0x4be259(0x202)](_0x46c10d)[0x0]){case'botname':updateBotName(_0x55bca2,_0x46c10d[_0x4be259(0x248)]);break;case _0x4be259(0x260):updateBotManager();break;case _0x4be259(0x1e6):updateStatus(_0x55bca2,_0x46c10d['status']);break;case _0x4be259(0x1c4):updateLive(_0x55bca2,_0x46c10d[_0x4be259(0x1c4)]);break;case'started':updateLive(_0x55bca2,_0x46c10d[_0x4be259(0x1a9)]),io['to'](_0x55bca2)[_0x4be259(0x166)](_0x4be259(0x1e6),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x4be259(0x15b):_0x46c10d[_0x4be259(0x15b)]==_0x4be259(0xe8)&&restartBot(_0x55bca2);_0x46c10d[_0x4be259(0x15b)]=='kill'&&toggleBot(_0x55bca2,_0x4be259(0x13b),_0x4be259(0x2a0));break;case _0x4be259(0x113):sendTelegram(_0x55bca2,_0x46c10d[_0x4be259(0x113)]);break;case _0x4be259(0x24b):sendTelegramMsg(_0x46c10d['telegrammsg']);break;case _0x4be259(0x107):io['to'](_0x55bca2)[_0x4be259(0x166)](_0x46c10d[_0x4be259(0x107)],_0x46c10d[_0x4be259(0x1c2)]);break;}}),pid[_0x55bca2]['on'](_0x1e0e20(0xf1),function(_0x2c389d){if(_0x8300dc)return;_0x8300dc=!![],_0x28553f(_0x2c389d);}),pid[_0x55bca2]['on'](_0x1e0e20(0x1e0),async function(_0x143747){const _0x20641f=_0x1e0e20;if(installingUpdate)return;if(_0x8300dc)return;_0x8300dc=!![],_0x28553f(null);const _0x47c020=dbConfig['get'](_0x20641f(0x14d))['find']({'botID':_0x55bca2})[_0x20641f(0x16a)]();_0x47c020&&(_0x47c020[_0x20641f(0x1e6)]==_0x20641f(0x167)||_0x47c020[_0x20641f(0x1e6)]==_0x20641f(0x127))&&(await sleep(0x3e8),updateLive(_0x55bca2,_0x20641f(0x2a0)),logger[_0x20641f(0x171)]('Restarting\x20Bot\x20'+_0x55bca2),startBot([_0x55bca2,userID],{'cwd':bbpath},function(_0x59278a){const _0x28346a=_0x20641f;if(_0x59278a)logger[_0x28346a(0x171)](_0x59278a);}));});}function stopBot(_0x3565ed){const _0x3f7b70=_0x391bd5;getClientsWithBotID(_0x3565ed)[_0x3f7b70(0x161)](_0x26c1ef=>{const _0x48f6f4=_0x3f7b70;getSocket(_0x26c1ef['id'])[_0x48f6f4(0x12c)](!![]),removeClient(_0x26c1ef['id']);}),pid[_0x3565ed]&&(pid[_0x3565ed]['kill'](),pid[_0x3565ed]=null);}function restartBot(_0x1a9efd){if(pid[_0x1a9efd])pid[_0x1a9efd]['kill']();}function addBot(){const _0x240e91=_0x391bd5;let _0x49d957;for(let _0x404672=0x1;_0x404672<0x3e9;_0x404672++){_0x49d957=_0x404672[_0x240e91(0x1c1)]()[_0x240e91(0x13e)](0x3,'0');let _0x28c21b=config[_0x240e91(0x240)](_0x32aaf1=>_0x32aaf1[_0x240e91(0x14f)]==_0x49d957);if(!_0x28c21b)break;}if(_0x49d957==='1000'){logger[_0x240e91(0x171)](_0x240e91(0x11a));return;}logger['full'](_0x240e91(0x183)+_0x49d957),dbConfig[_0x240e91(0x207)]('bots')[_0x240e91(0x209)]({'botID':_0x49d957,'botname':_0x240e91(0x201)+_0x49d957,'status':_0x240e91(0x127),'live':''})[_0x240e91(0x28d)](),startBot([_0x49d957,userID],{'cwd':bbpath},function(_0x3b3528){const _0x40f3e6=_0x240e91;if(_0x3b3528)logger[_0x40f3e6(0x171)](_0x3b3528);}),config=getConfiguration(),io['to']('botmanager')[_0x240e91(0x166)]('bots',config),broadcastToBots(_0x240e91(0x14d),JSON['stringify'](config));}function deleteBot(_0x256205){const _0x1eb9bf=_0x391bd5;getClientsWithBotID(_0x256205)[_0x1eb9bf(0x161)](_0x3f27b2=>{const _0x479f6c=_0x1eb9bf;getSocket(_0x3f27b2['id'])[_0x479f6c(0x12c)](!![]),removeClient(_0x3f27b2['id']);}),dbConfig['get']('bots')['remove']({'botID':_0x256205})[_0x1eb9bf(0x28d)](),logger[_0x1eb9bf(0x171)](_0x1eb9bf(0x147)+_0x256205),stopBot(_0x256205);try{if(fs[_0x1eb9bf(0x15a)](path[_0x1eb9bf(0x208)](configpath,'bot-'+_0x256205+_0x1eb9bf(0x10f))))fs[_0x1eb9bf(0x27b)](path[_0x1eb9bf(0x208)](configpath,_0x1eb9bf(0x266)+_0x256205+_0x1eb9bf(0x10f)));if(fs[_0x1eb9bf(0x15a)](path['join'](configpath,_0x1eb9bf(0x266)+_0x256205+_0x1eb9bf(0x26b))))fs[_0x1eb9bf(0x27b)](path[_0x1eb9bf(0x208)](configpath,_0x1eb9bf(0x266)+_0x256205+_0x1eb9bf(0x26b)));if(fs['existsSync'](path['join'](configpath,_0x1eb9bf(0x266)+_0x256205+'-performance.json')))fs['unlinkSync'](path['join'](configpath,_0x1eb9bf(0x266)+_0x256205+_0x1eb9bf(0x267)));if(fs['existsSync'](path['join'](configpath,_0x1eb9bf(0x266)+_0x256205+_0x1eb9bf(0x1cf))))fs[_0x1eb9bf(0x27b)](path[_0x1eb9bf(0x208)](configpath,'bot-'+_0x256205+_0x1eb9bf(0x1cf)));}catch(_0x2553c5){if(_0x2553c5)logger[_0x1eb9bf(0x171)](_0x1eb9bf(0x159),_0x2553c5);}config=getConfiguration(),io['to'](_0x1eb9bf(0x12f))[_0x1eb9bf(0x166)](_0x1eb9bf(0x14d),config),broadcastToBots(_0x1eb9bf(0x14d),JSON[_0x1eb9bf(0x210)](config));}function toggleBot(_0x2cb2fc,_0x56a48e,_0x15810f){const _0x35d8b4=_0x391bd5;dbConfig[_0x35d8b4(0x207)](_0x35d8b4(0x14d))[_0x35d8b4(0x240)]({'botID':_0x2cb2fc})[_0x35d8b4(0x1d5)]({'status':_0x56a48e})[_0x35d8b4(0x1d5)]({'live':_0x15810f})[_0x35d8b4(0x28d)]();if(_0x56a48e==_0x35d8b4(0x167)||_0x56a48e==_0x35d8b4(0x127))logger[_0x35d8b4(0x171)](_0x35d8b4(0x1b3)+_0x2cb2fc),startBot([_0x2cb2fc,userID],{'cwd':bbpath},function(_0x26c304){if(_0x26c304)logger['full'](_0x26c304);});else(_0x56a48e==_0x35d8b4(0x13b)||_0x56a48e==_0x35d8b4(0x12e))&&(logger[_0x35d8b4(0x171)]('Disabled\x20Bot\x20'+_0x2cb2fc),stopBot(_0x2cb2fc));config=getConfiguration(),io['to'](_0x35d8b4(0x12f))[_0x35d8b4(0x166)]('bots',config),broadcastToBots(_0x35d8b4(0x14d),JSON['stringify'](config));}function toggleStatus(_0x54484c){const _0x12667a=_0x391bd5;let _0x544c8f=dbConfig[_0x12667a(0x207)](_0x12667a(0x14d))[_0x12667a(0x240)]({'botID':_0x54484c})[_0x12667a(0x16a)](),_0x5b23be;if(_0x544c8f[_0x12667a(0x1e6)]===_0x12667a(0x167))_0x5b23be=_0x12667a(0x13b);else{if(_0x544c8f[_0x12667a(0x1e6)]==='new')_0x5b23be=_0x12667a(0x12e);else{if(_0x544c8f[_0x12667a(0x1e6)]==='new-disabled')_0x5b23be=_0x12667a(0x127);else{if(_0x544c8f[_0x12667a(0x1e6)]===_0x12667a(0x13b))_0x5b23be=_0x12667a(0x167);}}}return _0x5b23be;}function updateStatus(_0x4ad1c1,_0x33d7b1){const _0x3d74ad=_0x391bd5;dbConfig[_0x3d74ad(0x207)]('bots')[_0x3d74ad(0x240)]({'botID':_0x4ad1c1})[_0x3d74ad(0x1d5)]({'status':_0x33d7b1})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x3d74ad(0x166)]('bots',config),broadcastToBots(_0x3d74ad(0x14d),JSON[_0x3d74ad(0x210)](config));}function updateLive(_0x3fa975,_0x5ee618){const _0x574287=_0x391bd5;dbConfig[_0x574287(0x207)](_0x574287(0x14d))[_0x574287(0x240)]({'botID':_0x3fa975})['assign']({'live':_0x5ee618})[_0x574287(0x28d)](),config=getConfiguration(),io['to'](_0x574287(0x12f))[_0x574287(0x166)](_0x574287(0x14d),config),broadcastToBots(_0x574287(0x14d),JSON[_0x574287(0x210)](config));}function updateBotName(_0x2aeadf,_0x4e8574){const _0x42c423=_0x391bd5;dbConfig[_0x42c423(0x207)](_0x42c423(0x14d))[_0x42c423(0x240)]({'botID':_0x2aeadf})[_0x42c423(0x1d5)]({'botname':_0x4e8574})[_0x42c423(0x28d)](),config=getConfiguration(),io['to']('botmanager')[_0x42c423(0x166)](_0x42c423(0x14d),config),broadcastToBots(_0x42c423(0x14d),JSON['stringify'](config));}function updateBotManager(){const _0x5eb449=_0x391bd5;config=getConfiguration(),io['to']('botmanager')['emit'](_0x5eb449(0x14d),config),broadcastToBots('bots',JSON[_0x5eb449(0x210)](config));}function toggleBotMode(_0x30476d){const _0x3cd4f2=_0x391bd5;if(pid[_0x30476d])pid[_0x30476d][_0x3cd4f2(0x18e)]({'function':_0x3cd4f2(0x20b),'args':null});else{const _0x496b9d=configpath+_0x3cd4f2(0x266)+_0x30476d+_0x3cd4f2(0x10f),_0x285d68=fs[_0x3cd4f2(0x129)](_0x496b9d),_0x4680c9=JSON[_0x3cd4f2(0x25e)](_0x285d68),_0xeb454f=_0x4680c9[_0x3cd4f2(0x1c5)][0x0][_0x3cd4f2(0x284)];_0x4680c9[_0x3cd4f2(0x1c5)][0x0]['headless']=!_0xeb454f;const _0x5b787e=JSON[_0x3cd4f2(0x210)](_0x4680c9,null,0x2);fs['writeFileSync'](_0x496b9d,_0x5b787e),config=getConfiguration(),io['to']('botmanager')[_0x3cd4f2(0x166)](_0x3cd4f2(0x14d),config),broadcastToBots(_0x3cd4f2(0x14d),JSON[_0x3cd4f2(0x210)](config));}}function telegramError(_0x25841c){const _0x57cc4f=_0x391bd5;logger[_0x57cc4f(0x265)](getTimeStamp()+_0x57cc4f(0x1e3));}function validateTelegram(_0x26ea97){const _0xcf666a=_0x391bd5;if(_0x26ea97[_0xcf666a(0x220)][_0xcf666a(0x24a)]!=settings[_0xcf666a(0x12b)]&&'@'+_0x26ea97[_0xcf666a(0x220)][_0xcf666a(0x24a)]!=settings[_0xcf666a(0x12b)])return tgBot[_0xcf666a(0x1ca)](_0x26ea97[_0xcf666a(0x20d)]['id'],_0xcf666a(0x140),{'parse_mode':'HTML'})[_0xcf666a(0x1e2)](_0x1874e2=>{telegramError(_0x1874e2);}),![];return!![];}async function initTelegram(){const _0x41ee9e=_0x391bd5;if(tgBot)tgBot[_0x41ee9e(0x153)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x41ee9e(0x12d)],{'polling':!![]});let _0x4f8e32=_0x41ee9e(0x259);_0x4f8e32+='\x0a',_0x4f8e32+=_0x41ee9e(0x1b6),_0x4f8e32+=_0x41ee9e(0x1a0),_0x4f8e32+=_0x41ee9e(0x22a),_0x4f8e32+=_0x41ee9e(0x1a8),_0x4f8e32+=_0x41ee9e(0x26c),_0x4f8e32+=_0x41ee9e(0x29b),_0x4f8e32+=_0x41ee9e(0x264),_0x4f8e32+=_0x41ee9e(0x1ac),_0x4f8e32+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x4f8e32+=_0x41ee9e(0x21f),_0x4f8e32+=_0x41ee9e(0x227),_0x4f8e32+=_0x41ee9e(0x18b),_0x4f8e32+=_0x41ee9e(0x299),_0x4f8e32+=_0x41ee9e(0x109);let _0x35e0ab=_0x41ee9e(0x16b);_0x35e0ab+='\x0a',_0x35e0ab+=_0x4f8e32,tgBot['onText'](/\/start/,_0x9c0297=>{const _0x12975c=_0x41ee9e;if(!validateTelegram(_0x9c0297))return;if(settings[_0x12975c(0x1f4)]!=_0x9c0297[_0x12975c(0x20d)]['id'])updateSetting(_0x12975c(0x1f4),_0x9c0297[_0x12975c(0x20d)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x12975c(0x1ca)](_0x9c0297['chat']['id'],_0x35e0ab)[_0x12975c(0x1e2)](_0x4e61e4=>{telegramError(_0x4e61e4);});}),tgBot['onText'](/\/enable/,_0x148b35=>{const _0x2544e7=_0x41ee9e;if(!validateTelegram(_0x148b35))return;if(settings[_0x2544e7(0x1f4)]!=_0x148b35[_0x2544e7(0x20d)]['id'])updateSetting(_0x2544e7(0x1f4),_0x148b35[_0x2544e7(0x20d)]['id']);updateSetting(_0x2544e7(0x277),!![]),tgBot[_0x2544e7(0x1ca)](_0x148b35[_0x2544e7(0x20d)]['id'],_0x2544e7(0x131))[_0x2544e7(0x1e2)](_0x3a30e1=>{telegramError(_0x3a30e1);});}),tgBot[_0x41ee9e(0x174)](/\/config/,async _0xbc240c=>{const _0x2d4e74=_0x41ee9e;if(!validateTelegram(_0xbc240c))return;tgBot[_0x2d4e74(0x1f0)](_0x2d4e74(0x14b)),tgBot[_0x2d4e74(0x1ca)](_0xbc240c[_0x2d4e74(0x20d)]['id'],_0x2d4e74(0x2a3),{'reply_markup':{'inline_keyboard':[[{'text':_0x2d4e74(0x1a6),'callback_data':_0x2d4e74(0x1df)},{'text':_0x2d4e74(0xf6),'callback_data':_0x2d4e74(0x1d0)},{'text':_0x2d4e74(0x110),'callback_data':_0x2d4e74(0x122)}]]}})['catch'](_0x4925e6=>{telegramError(_0x4925e6);}),tgBot['on'](_0x2d4e74(0x14b),async _0x4ac405=>{const _0x97ab65=_0x2d4e74,_0x463305=_0x4ac405[_0x97ab65(0x1bb)],_0x47402b=_0x4ac405[_0x97ab65(0x196)];tgBot['answerCallbackQuery'](_0x4ac405['id'])[_0x97ab65(0x21e)](async()=>{const _0xe137b2=_0x97ab65;_0x463305=='orders'&&(updateSetting(_0xe137b2(0x253),_0xe137b2(0x1df)),updateSetting(_0xe137b2(0x277),!![]),await tgBot[_0xe137b2(0x1ca)](_0x47402b[_0xe137b2(0x20d)]['id'],_0xe137b2(0x102))[_0xe137b2(0x1e2)](_0x31332e=>{telegramError(_0x31332e);}));_0x463305==_0xe137b2(0x1d0)&&(updateSetting(_0xe137b2(0x253),_0xe137b2(0x1d0)),updateSetting(_0xe137b2(0x277),!![]),await tgBot['sendMessage'](_0x47402b[_0xe137b2(0x20d)]['id'],_0xe137b2(0x1fd))['catch'](_0xb6e128=>{telegramError(_0xb6e128);}));_0x463305==_0xe137b2(0x122)&&(updateSetting(_0xe137b2(0x253),_0xe137b2(0x122)),updateSetting(_0xe137b2(0x277),!![]),await tgBot[_0xe137b2(0x1ca)](_0x47402b['chat']['id'],_0xe137b2(0x189))[_0xe137b2(0x1e2)](_0x1849ae=>{telegramError(_0x1849ae);}));if(!settings[_0xe137b2(0x1f4)])tgBot[_0xe137b2(0x1ca)](_0x47402b[_0xe137b2(0x20d)]['id'],_0xe137b2(0x169))['catch'](_0x590c13=>{telegramError(_0x590c13);});}),tgBot['removeListener'](_0x97ab65(0x14b));});}),tgBot[_0x41ee9e(0x174)](/\/status/,_0x50bd54=>{const _0x59fe58=_0x41ee9e;if(!validateTelegram(_0x50bd54))return;const _0x49824e=getBotsWithMode();let _0x56a606=_0x59fe58(0x11e);config['forEach'](_0x32f013=>{const _0x55714c=_0x59fe58,_0x3ac967=_0x49824e['find'](_0x3ad7a8=>_0x3ad7a8[_0x55714c(0x14f)]==_0x32f013['botID'])[_0x55714c(0x1ad)];_0x56a606+='Bot\x20'+_0x32f013['botID']+':\x20'+_0x32f013['status']+'\x20|\x20'+_0x3ac967+_0x55714c(0x2a9)+_0x32f013['live']+'\x0a';}),_0x56a606+='\x0a',_0x56a606+=_0x59fe58(0xe4),_0x56a606+=!settings[_0x59fe58(0x277)]?_0x59fe58(0x191):_0x59fe58(0xf8),_0x56a606+=settings[_0x59fe58(0x277)]?settings[_0x59fe58(0x253)]==_0x59fe58(0x122)?_0x59fe58(0x1ff):_0x59fe58(0x1fe)+settings[_0x59fe58(0x253)]+'\x20only\x0a':'',tgBot[_0x59fe58(0x1ca)](_0x50bd54['chat']['id'],_0x56a606,{'parse_mode':_0x59fe58(0x241)})[_0x59fe58(0x1e2)](_0x4283a0=>{telegramError(_0x4283a0);});}),tgBot[_0x41ee9e(0x174)](/\/restart/,_0x3c58c7=>{const _0x5e1b62=_0x41ee9e;if(!validateTelegram(_0x3c58c7))return;tgBot['removeListener'](_0x5e1b62(0x14b));const _0x3770d8=getEnabledBots();if(_0x3770d8['length']==0x0)tgBot['sendMessage'](_0x3c58c7['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x5e1b62(0x1e2)](_0x219cec=>{telegramError(_0x219cec);});else{if(_0x3770d8[_0x5e1b62(0x137)]>0x1)_0x3770d8[_0x5e1b62(0x209)]({'botID':_0x5e1b62(0x122)});let _0x542fa7=[],_0x5820aa=[];const _0xe58644=_0x3770d8[_0x5e1b62(0x137)]%0x4==0x0||_0x3770d8[_0x5e1b62(0x137)]%0x4==0x3||_0x3770d8[_0x5e1b62(0x137)]%0x3==0x1?0x4:0x3;let _0x1f12f7=0x0;_0x3770d8[_0x5e1b62(0x161)]((_0x5805a9,_0x5a2c13)=>{const _0x423cdc=_0x5e1b62;if(_0x5a2c13%_0xe58644==0x0)_0x5820aa=[];_0x5820aa[_0x423cdc(0x209)]({'text':_0x5805a9[_0x423cdc(0x14f)]=='all'?_0x423cdc(0xef):_0x423cdc(0x201)+_0x5805a9[_0x423cdc(0x14f)],'callback_data':_0x5805a9[_0x423cdc(0x14f)]}),_0x5a2c13%_0xe58644==0x0&&(_0x542fa7[_0x1f12f7]=_0x5820aa,_0x1f12f7++);}),tgBot[_0x5e1b62(0x1ca)](_0x3c58c7[_0x5e1b62(0x20d)]['id'],_0x5e1b62(0x1c9),{'reply_markup':{'inline_keyboard':_0x542fa7}})[_0x5e1b62(0x1e2)](_0x134037=>{telegramError(_0x134037);}),tgBot['on'](_0x5e1b62(0x14b),async _0x13535a=>{const _0x3427fb=_0x5e1b62,_0x7ef58d=_0x13535a['data'],_0x38fbc6=_0x13535a[_0x3427fb(0x196)];tgBot[_0x3427fb(0x250)](_0x13535a['id'])[_0x3427fb(0x21e)](async()=>{const _0x22ecca=_0x3427fb;_0x7ef58d=='all'?config[_0x22ecca(0x161)](_0x237502=>{const _0x500bb4=_0x22ecca;restartBot(_0x237502[_0x500bb4(0x14f)]);}):restartBot(_0x7ef58d);}),tgBot[_0x3427fb(0x1f0)](_0x3427fb(0x14b));});}}),tgBot[_0x41ee9e(0x174)](/\/on/,_0x39d0be=>{const _0x12933a=_0x41ee9e;if(!validateTelegram(_0x39d0be))return;tgBot[_0x12933a(0x1f0)](_0x12933a(0x14b));const _0xc1067e=getDisabledBots();if(_0xc1067e['length']==0x0)tgBot[_0x12933a(0x1ca)](_0x39d0be[_0x12933a(0x20d)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x12933a(0x1e2)](_0x1dd215=>{telegramError(_0x1dd215);});else{if(_0xc1067e[_0x12933a(0x137)]>0x1)_0xc1067e[_0x12933a(0x209)]({'botID':_0x12933a(0x122)});let _0xf1887a=[],_0x2e7955=[];const _0xbfd7a3=_0xc1067e[_0x12933a(0x137)]%0x4==0x0||_0xc1067e[_0x12933a(0x137)]%0x4==0x3||_0xc1067e[_0x12933a(0x137)]%0x3==0x1?0x4:0x3;let _0x2f00d9=0x0;_0xc1067e['forEach']((_0x40258f,_0xbd9c19)=>{const _0x248ba6=_0x12933a;if(_0xbd9c19%_0xbfd7a3==0x0)_0x2e7955=[];_0x2e7955[_0x248ba6(0x209)]({'text':_0x40258f[_0x248ba6(0x14f)]==_0x248ba6(0x122)?_0x248ba6(0xef):_0x248ba6(0x201)+_0x40258f['botID'],'callback_data':_0x40258f[_0x248ba6(0x14f)]}),_0xbd9c19%_0xbfd7a3==0x0&&(_0xf1887a[_0x2f00d9]=_0x2e7955,_0x2f00d9++);}),tgBot[_0x12933a(0x1ca)](_0x39d0be['chat']['id'],_0x12933a(0x221),{'reply_markup':{'inline_keyboard':_0xf1887a}})['catch'](_0x1e7daa=>{telegramError(_0x1e7daa);}),tgBot['on']('callback_query',async _0x5229=>{const _0xedac63=_0x12933a,_0x15e3d8=_0x5229[_0xedac63(0x1bb)],_0x15762d=_0x5229[_0xedac63(0x196)];tgBot[_0xedac63(0x250)](_0x5229['id'])[_0xedac63(0x21e)](async()=>{const _0x5057b0=_0xedac63;_0x15e3d8==_0x5057b0(0x122)?(tgBot[_0x5057b0(0x1ca)](_0x15762d[_0x5057b0(0x20d)]['id'],_0x5057b0(0x199))['catch'](_0x47a3ff=>{telegramError(_0x47a3ff);}),_0xc1067e[_0x5057b0(0x161)](_0xc3b88c=>{const _0x4c3b68=_0x5057b0;if(_0xc3b88c[_0x4c3b68(0x14f)]!=_0x4c3b68(0x122))toggleBot(_0xc3b88c[_0x4c3b68(0x14f)],toggleStatus(_0xc3b88c[_0x4c3b68(0x14f)]),_0x4c3b68(0x2a0));})):(tgBot[_0x5057b0(0x1ca)](_0x15762d['chat']['id'],_0x5057b0(0x249)+_0x15e3d8)['catch'](_0x177043=>{telegramError(_0x177043);}),toggleBot(_0x15e3d8,toggleStatus(_0x15e3d8),'stopped'));}),tgBot[_0xedac63(0x1f0)](_0xedac63(0x14b));});}}),tgBot['onText'](/\/off/,_0x527527=>{const _0x1ae919=_0x41ee9e;if(!validateTelegram(_0x527527))return;tgBot['removeListener'](_0x1ae919(0x14b));const _0x5f21d7=getEnabledBots();if(_0x5f21d7['length']==0x0)tgBot[_0x1ae919(0x1ca)](_0x527527[_0x1ae919(0x20d)]['id'],_0x1ae919(0x1e5))[_0x1ae919(0x1e2)](_0x43dbdd=>{telegramError(_0x43dbdd);});else{if(_0x5f21d7[_0x1ae919(0x137)]>0x1)_0x5f21d7[_0x1ae919(0x209)]({'botID':_0x1ae919(0x122)});let _0x17973f=[],_0x4ec604=[];const _0x259061=_0x5f21d7[_0x1ae919(0x137)]%0x4==0x0||_0x5f21d7[_0x1ae919(0x137)]%0x4==0x3||_0x5f21d7[_0x1ae919(0x137)]%0x3==0x1?0x4:0x3;let _0x4026ec=0x0;_0x5f21d7[_0x1ae919(0x161)]((_0x32e4f0,_0x196a25)=>{const _0x153855=_0x1ae919;if(_0x196a25%_0x259061==0x0)_0x4ec604=[];_0x4ec604[_0x153855(0x209)]({'text':_0x32e4f0['botID']==_0x153855(0x122)?'All\x20bots':'Bot\x20'+_0x32e4f0[_0x153855(0x14f)],'callback_data':_0x32e4f0['botID']}),_0x196a25%_0x259061==0x0&&(_0x17973f[_0x4026ec]=_0x4ec604,_0x4026ec++);}),tgBot[_0x1ae919(0x1ca)](_0x527527[_0x1ae919(0x20d)]['id'],_0x1ae919(0x263),{'reply_markup':{'inline_keyboard':_0x17973f}})[_0x1ae919(0x1e2)](_0x5627fc=>{telegramError(_0x5627fc);}),tgBot['on'](_0x1ae919(0x14b),async _0x126918=>{const _0x3165ff=_0x1ae919,_0x4782b2=_0x126918[_0x3165ff(0x1bb)],_0x23c17d=_0x126918[_0x3165ff(0x196)];tgBot[_0x3165ff(0x250)](_0x126918['id'])[_0x3165ff(0x21e)](async()=>{const _0x42ec51=_0x3165ff;_0x4782b2=='all'?(tgBot[_0x42ec51(0x1ca)](_0x23c17d[_0x42ec51(0x20d)]['id'],_0x42ec51(0x29f))[_0x42ec51(0x1e2)](_0x47c245=>{telegramError(_0x47c245);}),_0x5f21d7[_0x42ec51(0x161)](_0x32ad39=>{const _0x5c578c=_0x42ec51;if(_0x32ad39['botID']!=_0x5c578c(0x122))toggleBot(_0x32ad39[_0x5c578c(0x14f)],toggleStatus(_0x32ad39[_0x5c578c(0x14f)]),_0x5c578c(0x2a0));})):(tgBot[_0x42ec51(0x1ca)](_0x23c17d[_0x42ec51(0x20d)]['id'],_0x42ec51(0x172)+_0x4782b2)[_0x42ec51(0x1e2)](_0x4c2f10=>{telegramError(_0x4c2f10);}),toggleBot(_0x4782b2,toggleStatus(_0x4782b2),'stopped'));}),tgBot['removeListener'](_0x3165ff(0x14b));});}}),tgBot['onText'](/\/metrics/,_0x3710aa=>{const _0x6cbe16=_0x41ee9e;if(!validateTelegram(_0x3710aa))return;tgBot[_0x6cbe16(0x1f0)](_0x6cbe16(0x14b));const _0x3b61fd=getEnabledBots();if(_0x3b61fd[_0x6cbe16(0x137)]==0x0)tgBot['sendMessage'](_0x3710aa['chat']['id'],_0x6cbe16(0x1e5))[_0x6cbe16(0x1e2)](_0x3d772e=>{telegramError(_0x3d772e);});else{if(_0x3b61fd[_0x6cbe16(0x137)]>0x1){let _0xc9335=[],_0x4c24e4=[];const _0x5a40ce=_0x3b61fd[_0x6cbe16(0x137)]%0x4==0x0||_0x3b61fd[_0x6cbe16(0x137)]%0x4==0x3||_0x3b61fd[_0x6cbe16(0x137)]%0x3==0x1?0x4:0x3;let _0x3112ac=0x0;_0x3b61fd[_0x6cbe16(0x161)]((_0x45887e,_0x136c9f)=>{const _0x1b98f4=_0x6cbe16;if(_0x136c9f%_0x5a40ce==0x0)_0x4c24e4=[];_0x4c24e4['push']({'text':'Bot\x20'+_0x45887e['botID'],'callback_data':_0x45887e[_0x1b98f4(0x14f)]}),_0x136c9f%_0x5a40ce==0x0&&(_0xc9335[_0x3112ac]=_0x4c24e4,_0x3112ac++);}),tgBot[_0x6cbe16(0x1ca)](_0x3710aa['chat']['id'],_0x6cbe16(0xfc),{'reply_markup':{'inline_keyboard':_0xc9335}})['catch'](_0x220ddb=>{telegramError(_0x220ddb);}),tgBot['on'](_0x6cbe16(0x14b),async _0x27695f=>{const _0x1a3276=_0x6cbe16,_0x1e99cb=_0x27695f[_0x1a3276(0x1bb)],_0x2b6456=_0x27695f['message'];tgBot[_0x1a3276(0x250)](_0x27695f['id'])[_0x1a3276(0x21e)](async()=>{const _0x5efa84=_0x1a3276;if(pid[_0x1e99cb])pid[_0x1e99cb][_0x5efa84(0x18e)]({'function':_0x5efa84(0x101),'args':null});}),tgBot[_0x1a3276(0x1f0)](_0x1a3276(0x14b));});}else{const _0x24024f=_0x3b61fd[0x0][_0x6cbe16(0x14f)];if(pid[_0x24024f])pid[_0x24024f][_0x6cbe16(0x18e)]({'function':_0x6cbe16(0x101),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x439e67=>{const _0x387426=_0x41ee9e;if(!validateTelegram(_0x439e67))return;tgBot['removeListener'](_0x387426(0x14b));const _0x5c8f7e=getEnabledBots();if(_0x5c8f7e['length']==0x0)tgBot[_0x387426(0x1ca)](_0x439e67[_0x387426(0x20d)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x16bd1a=>{telegramError(_0x16bd1a);});else{if(_0x5c8f7e['length']>0x1){let _0xfd4e16=[],_0x3466b6=[];const _0x2d6211=_0x5c8f7e['length']%0x4==0x0||_0x5c8f7e[_0x387426(0x137)]%0x4==0x3||_0x5c8f7e[_0x387426(0x137)]%0x3==0x1?0x4:0x3;let _0x8113bc=0x0;_0x5c8f7e[_0x387426(0x161)]((_0x164300,_0x5af9e4)=>{const _0x25efc4=_0x387426;if(_0x5af9e4%_0x2d6211==0x0)_0x3466b6=[];_0x3466b6[_0x25efc4(0x209)]({'text':_0x25efc4(0x201)+_0x164300[_0x25efc4(0x14f)],'callback_data':_0x164300['botID']}),_0x5af9e4%_0x2d6211==0x0&&(_0xfd4e16[_0x8113bc]=_0x3466b6,_0x8113bc++);}),tgBot[_0x387426(0x1ca)](_0x439e67[_0x387426(0x20d)]['id'],_0x387426(0x17a),{'reply_markup':{'inline_keyboard':_0xfd4e16}})['catch'](_0x177281=>{telegramError(_0x177281);}),tgBot['on'](_0x387426(0x14b),async _0x4385c0=>{const _0x2b5a05=_0x387426,_0x33d340=_0x4385c0[_0x2b5a05(0x1bb)],_0x2ba2db=_0x4385c0[_0x2b5a05(0x196)];tgBot[_0x2b5a05(0x250)](_0x4385c0['id'])[_0x2b5a05(0x21e)](async()=>{const _0x245925=_0x2b5a05;if(pid[_0x33d340])pid[_0x33d340][_0x245925(0x18e)]({'function':_0x245925(0x117),'args':null});}),tgBot[_0x2b5a05(0x1f0)]('callback_query');});}else{const _0x4b3b46=_0x5c8f7e[0x0][_0x387426(0x14f)];if(pid[_0x4b3b46])pid[_0x4b3b46][_0x387426(0x18e)]({'function':_0x387426(0x117),'args':null});}}}),tgBot[_0x41ee9e(0x174)](/\/update/,async _0x20efe6=>{const _0x1b9404=_0x41ee9e;if(!validateTelegram(_0x20efe6))return;tgBot[_0x1b9404(0x1f0)](_0x1b9404(0x14b)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x20efe6[_0x1b9404(0x20d)]['id'],_0x1b9404(0x239))[_0x1b9404(0x1e2)](_0x18c170=>{telegramError(_0x18c170);});else!validInstallation?tgBot[_0x1b9404(0x1ca)](_0x20efe6[_0x1b9404(0x20d)]['id'],_0x1b9404(0x200))[_0x1b9404(0x1e2)](_0x54c143=>{telegramError(_0x54c143);}):(tgBot['sendMessage'](_0x20efe6[_0x1b9404(0x20d)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1b9404(0x121),'callback_data':_0x1b9404(0x252)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x2b7e01=>{telegramError(_0x2b7e01);}),tgBot['on'](_0x1b9404(0x14b),async _0x5d926f=>{const _0x8b9f8c=_0x1b9404,_0x47a3f6=_0x5d926f['data'],_0x17b198=_0x5d926f[_0x8b9f8c(0x196)];tgBot[_0x8b9f8c(0x250)](_0x5d926f['id'])[_0x8b9f8c(0x21e)](async()=>{const _0x245415=_0x8b9f8c;_0x47a3f6==_0x245415(0x252)&&(await tgBot['sendMessage'](_0x17b198['chat']['id'],_0x245415(0x229))['catch'](_0xc47ab7=>{telegramError(_0xc47ab7);}),updateBB(_0x245415(0x142))),_0x47a3f6=='no'&&await tgBot[_0x245415(0x1ca)](_0x17b198[_0x245415(0x20d)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')['catch'](_0x2cd54e=>{telegramError(_0x2cd54e);});}),tgBot[_0x8b9f8c(0x1f0)]('callback_query');}));}),tgBot[_0x41ee9e(0x174)](/\/reinstall/,async _0x52dc25=>{const _0x183bb1=_0x41ee9e;if(!validateTelegram(_0x52dc25))return;tgBot[_0x183bb1(0x1f0)](_0x183bb1(0x14b)),!validInstallation?tgBot['sendMessage'](_0x52dc25[_0x183bb1(0x20d)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0x183bb1(0x1e2)](_0x1e4e93=>{telegramError(_0x1e4e93);}):(tgBot[_0x183bb1(0x1ca)](_0x52dc25[_0x183bb1(0x20d)]['id'],_0x183bb1(0xe9),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x183bb1(0x252)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x59b6e4=>{telegramError(_0x59b6e4);}),tgBot['on']('callback_query',async _0x4caae2=>{const _0x872f77=_0x183bb1,_0x9e36bc=_0x4caae2['data'],_0x149627=_0x4caae2[_0x872f77(0x196)];tgBot['answerCallbackQuery'](_0x4caae2['id'])['then'](async()=>{const _0x31bc32=_0x872f77;_0x9e36bc==_0x31bc32(0x252)&&(await tgBot['sendMessage'](_0x149627[_0x31bc32(0x20d)]['id'],_0x31bc32(0x19d))[_0x31bc32(0x1e2)](_0x51d069=>{telegramError(_0x51d069);}),updateBB(_0x31bc32(0x1cc))),_0x9e36bc=='no'&&await tgBot[_0x31bc32(0x1ca)](_0x149627[_0x31bc32(0x20d)]['id'],_0x31bc32(0x1b1))[_0x31bc32(0x1e2)](_0x54183f=>{telegramError(_0x54183f);});}),tgBot[_0x872f77(0x1f0)](_0x872f77(0x14b));}));}),tgBot[_0x41ee9e(0x174)](/\/toggle/,_0x2f39f1=>{const _0x2e8ca0=_0x41ee9e;if(!validateTelegram(_0x2f39f1))return;tgBot[_0x2e8ca0(0x1f0)](_0x2e8ca0(0x14b));const _0x1342f9=getBotsWithMode();if(_0x1342f9[_0x2e8ca0(0x137)]==0x0)tgBot[_0x2e8ca0(0x1ca)](_0x2f39f1[_0x2e8ca0(0x20d)]['id'],_0x2e8ca0(0x1e5))[_0x2e8ca0(0x1e2)](_0x107d8e=>{telegramError(_0x107d8e);});else{let _0x59b3c0=[],_0x328f3c=[];const _0x27f982=0x2;let _0x2d44e1=0x0;_0x1342f9['forEach']((_0x56a40f,_0x151c5b)=>{const _0x4b883b=_0x2e8ca0;if(_0x151c5b%_0x27f982==0x0)_0x328f3c=[];_0x328f3c[_0x4b883b(0x209)]({'text':_0x4b883b(0x201)+_0x56a40f['botID']+'\x20('+_0x56a40f[_0x4b883b(0x1ad)]+')','callback_data':_0x56a40f['botID']}),_0x151c5b%_0x27f982==0x0&&(_0x59b3c0[_0x2d44e1]=_0x328f3c,_0x2d44e1++);}),tgBot['sendMessage'](_0x2f39f1[_0x2e8ca0(0x20d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x59b3c0}})[_0x2e8ca0(0x1e2)](_0x35631c=>{telegramError(_0x35631c);}),tgBot['on'](_0x2e8ca0(0x14b),async _0x48409e=>{const _0x29ee0c=_0x2e8ca0,_0x2aeda0=_0x48409e[_0x29ee0c(0x1bb)],_0x2f1517=_0x48409e[_0x29ee0c(0x196)];tgBot[_0x29ee0c(0x250)](_0x48409e['id'])[_0x29ee0c(0x21e)](async()=>{const _0x5f570f=_0x29ee0c,_0x1f6ea4=_0x1342f9[_0x5f570f(0x240)](_0xd064d3=>_0xd064d3[_0x5f570f(0x14f)]==_0x2aeda0),_0x49e95c=_0x1f6ea4['mode']==_0x5f570f(0x15c)?_0x5f570f(0x17f):_0x5f570f(0x15c);tgBot[_0x5f570f(0x1ca)](_0x2f1517['chat']['id'],_0x5f570f(0x146)+_0x2aeda0+_0x5f570f(0x112)+_0x49e95c+_0x5f570f(0x273))[_0x5f570f(0x1e2)](_0x48b792=>{telegramError(_0x48b792);}),toggleBotMode(_0x2aeda0);}),tgBot[_0x29ee0c(0x1f0)](_0x29ee0c(0x14b));});}}),tgBot[_0x41ee9e(0x174)](/\/names/,_0x11825f=>{const _0x317547=_0x41ee9e;if(!validateTelegram(_0x11825f))return;let _0x298f3a='';config[_0x317547(0x161)](_0x5151af=>{const _0xe4656=_0x317547;_0x298f3a+=_0xe4656(0x201)+_0x5151af[_0xe4656(0x14f)]+':\x20'+_0x5151af[_0xe4656(0x248)]+'\x0a';}),tgBot[_0x317547(0x1ca)](_0x11825f[_0x317547(0x20d)]['id'],_0x298f3a,{'parse_mode':_0x317547(0x241)})['catch'](_0x5f5047=>{telegramError(_0x5f5047);});}),tgBot[_0x41ee9e(0x174)](/\/disable/,_0x15f993=>{const _0x10ca39=_0x41ee9e;if(!validateTelegram(_0x15f993))return;tgBot[_0x10ca39(0x1ca)](_0x15f993[_0x10ca39(0x20d)]['id'],_0x10ca39(0x285))['catch'](_0x500517=>{telegramError(_0x500517);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x102ad6=>{const _0x5c975e=_0x41ee9e;if(!validateTelegram(_0x102ad6))return;tgBot[_0x5c975e(0x1ca)](_0x102ad6['chat']['id'],_0x4f8e32)[_0x5c975e(0x1e2)](_0x1efe21=>{telegramError(_0x1efe21);});}),tgBot['on'](_0x41ee9e(0x187),_0x2d1812=>{const _0x39f1ac=_0x41ee9e;_0x2d1812[_0x39f1ac(0x1c1)]()[_0x39f1ac(0x11c)](_0x39f1ac(0x1b5))&&(logger[_0x39f1ac(0x171)](_0x39f1ac(0x14e)),tgBot[_0x39f1ac(0x153)](),tgBot=null,io['to']('botmanager')[_0x39f1ac(0x166)](_0x39f1ac(0x1e7),'Invalid\x20Telegram\x20token'));}),process[_0x41ee9e(0x16c)](_0x41ee9e(0x139),()=>{const _0x74d02e=_0x41ee9e;if(tgBot)tgBot['stopPolling']();process[_0x74d02e(0x1e0)](0x1);}),process[_0x41ee9e(0x16c)]('SIGTERM',()=>{const _0x3457ef=_0x41ee9e;if(tgBot)tgBot['stopPolling']();process[_0x3457ef(0x1e0)](0x1);});}}function disableTelegram(){const _0x4b2738=_0x391bd5;tgBot&&(tgBot[_0x4b2738(0x153)](),tgBot=null);}function sendTelegram(_0x326ffc,_0x2faeb3){const _0x23f679=_0x391bd5;if(settings[_0x23f679(0x277)]){if(settings['telegramEvents']==_0x23f679(0x122)||(_0x2faeb3[_0x23f679(0x15d)]=='error'||_0x2faeb3[_0x23f679(0x15d)]=='warning'||_0x2faeb3[_0x23f679(0x15d)]==_0x23f679(0x141))&&settings[_0x23f679(0x253)]=='alerts'||_0x2faeb3[_0x23f679(0x15d)]==_0x23f679(0x1b4)&&settings[_0x23f679(0x253)]==_0x23f679(0x1df)){if(tgBot&&settings[_0x23f679(0x1f4)]){if(_0x2faeb3[_0x23f679(0x243)])tgBot[_0x23f679(0x1ca)](settings[_0x23f679(0x1f4)],_0x2faeb3[_0x23f679(0x248)]+_0x23f679(0xff)+_0x2faeb3['event'])[_0x23f679(0x1e2)](_0x1396e0=>{telegramError(_0x1396e0);});else tgBot['sendMessage'](settings[_0x23f679(0x1f4)],_0x23f679(0x201)+_0x326ffc+'\x20>\x20'+_0x2faeb3['event'])[_0x23f679(0x1e2)](_0x296733=>{telegramError(_0x296733);});}}}}async function sendTelegramMsg(_0x480d09,_0x389e5d=_0x391bd5(0x241)){const _0x54a609=_0x391bd5;return settings[_0x54a609(0x277)]&&tgBot&&settings[_0x54a609(0x1f4)]?(await tgBot[_0x54a609(0x1ca)](settings[_0x54a609(0x1f4)],_0x480d09,{'parse_mode':_0x389e5d})[_0x54a609(0x1e2)](_0x19a06e=>{telegramError(_0x19a06e);}),!![]):![];}function getDeviceWithIp(_0x390067){const _0x6687d3=_0x391bd5;return devices[_0x6687d3(0x240)](_0x2d928b=>_0x2d928b['ip']===_0x390067);}function temporaryAccess2FA(_0x6b8052,_0x1a6a97){const _0x23f36a=_0x391bd5;let _0x4187b9=new Date(),_0x56ed54=![];if(lastIpApproval){if(_0x4187b9-lastIpApproval<0x1388)_0x56ed54=!![];}lastIpApproval=new Date();if(_0x56ed54)return;tgBot&&settings[_0x23f36a(0x1f4)]&&(tgBot[_0x23f36a(0x1f0)](_0x23f36a(0x14b)),tgBot[_0x23f36a(0x1ca)](settings['telegramChatId'],_0x23f36a(0x126)+normalizeIP(_0x1a6a97)[_0x23f36a(0xec)]+_0x23f36a(0x179),{'parse_mode':_0x23f36a(0x241),'reply_markup':{'inline_keyboard':[[{'text':_0x23f36a(0x143),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x23f36a(0x29d),'callback_data':'30'},{'text':_0x23f36a(0x18a),'callback_data':_0x23f36a(0x18a)}]]}})[_0x23f36a(0x1e2)](_0xab5f7e=>{telegramError(_0xab5f7e);}),tgBot['on']('callback_query',async _0x2da09e=>{const _0x2c1e28=_0x23f36a,_0x27937e=_0x2da09e[_0x2c1e28(0x1bb)],_0x110439=_0x2da09e[_0x2c1e28(0x196)];tgBot['answerCallbackQuery'](_0x2da09e['id'])[_0x2c1e28(0x21e)](async()=>{const _0x3098ad=_0x2c1e28;devices[_0x6b8052][_0x3098ad(0x19c)]={'clientip':_0x1a6a97,'timestamp':new Date()[_0x3098ad(0x230)](),'expiry':_0x27937e},_0x27937e!=_0x3098ad(0x18a)?(await tgBot[_0x3098ad(0x1ca)](_0x110439[_0x3098ad(0x20d)]['id'],_0x3098ad(0x28b)+_0x27937e+_0x3098ad(0x226),{'parse_mode':_0x3098ad(0x241)})[_0x3098ad(0x1e2)](_0x765c7b=>{telegramError(_0x765c7b);}),io['to'](_0x6b8052)[_0x3098ad(0x166)](_0x3098ad(0x1e6),{'access':{'allow':![],'reason':_0x3098ad(0x14a),'token':null}})):(await tgBot['sendMessage'](_0x110439['chat']['id'],_0x3098ad(0x162))['catch'](_0x8c2d41=>{telegramError(_0x8c2d41);}),io['to'](_0x6b8052)[_0x3098ad(0x166)](_0x3098ad(0x1e6),{'access':{'allow':![],'reason':_0x3098ad(0x206),'token':null}}));}),tgBot[_0x2c1e28(0x1f0)](_0x2c1e28(0x14b));}));}function loginAccess2FA(_0x501757,_0xb27096){const _0x2610dc=_0x391bd5;tgBot&&settings['telegramChatId']&&(tgBot[_0x2610dc(0x1f0)](_0x2610dc(0x14b)),tgBot['sendMessage'](settings[_0x2610dc(0x1f4)],_0x2610dc(0x1f8)+normalizeIP(_0xb27096)['show']+_0x2610dc(0x179),{'parse_mode':_0x2610dc(0x241),'reply_markup':{'inline_keyboard':[[{'text':_0x2610dc(0x1d3),'callback_data':loginExpiry},{'text':_0x2610dc(0x18a),'callback_data':'reject'}]]}})[_0x2610dc(0x1e2)](_0x98f05a=>{telegramError(_0x98f05a);}),tgBot['on']('callback_query',async _0x289b9c=>{const _0x350a51=_0x2610dc,_0x2a9985=_0x289b9c[_0x350a51(0x1bb)],_0x41b8bb=_0x289b9c['message'];tgBot[_0x350a51(0x250)](_0x289b9c['id'])[_0x350a51(0x21e)](async()=>{const _0x400945=_0x350a51;devices[_0x501757][_0x400945(0x123)]={'clientip':_0xb27096,'timestamp':new Date()[_0x400945(0x230)](),'expiry':_0x2a9985},_0x2a9985!=_0x400945(0x18a)?(await tgBot[_0x400945(0x1ca)](_0x41b8bb[_0x400945(0x20d)]['id'],_0x400945(0x152),{'parse_mode':'HTML'})[_0x400945(0x1e2)](_0x5dc811=>{telegramError(_0x5dc811);}),io['to'](_0x501757)['emit'](_0x400945(0x1e6),{'access':{'allow':![],'reason':_0x400945(0x14a),'token':null}})):(await tgBot[_0x400945(0x1ca)](_0x41b8bb[_0x400945(0x20d)]['id'],_0x400945(0x23a))['catch'](_0x4691c3=>{telegramError(_0x4691c3);}),io['to'](_0x501757)[_0x400945(0x166)](_0x400945(0x1e6),{'access':{'allow':![],'reason':_0x400945(0x245),'token':null}}));}),tgBot[_0x350a51(0x1f0)](_0x350a51(0x14b));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x813c08=_0x391bd5;return dbConfig[_0x813c08(0x207)](_0x813c08(0x14d))[_0x813c08(0x1b0)]('botID')[_0x813c08(0x225)]({'status':_0x813c08(0x167)})[_0x813c08(0x16a)]()||[];}function getDisabledBots(){const _0x5835be=_0x391bd5;return dbConfig['get'](_0x5835be(0x14d))[_0x5835be(0x1b0)](_0x5835be(0x14f))['filter']({'status':'disabled'})[_0x5835be(0x16a)]()||[];}function getBotAttributes(_0x5e73e8){const _0x48f1d2=_0x391bd5;let _0x409278={};const _0x445fe0=configpath+_0x48f1d2(0x266)+_0x5e73e8+_0x48f1d2(0x10f),_0x4f209d=fs[_0x48f1d2(0x15a)](_0x445fe0);if(_0x4f209d){const _0x36b523=fs['readFileSync'](_0x445fe0);try{const _0x549dcc=JSON['parse'](_0x36b523),_0x50095f=_0x549dcc?_0x549dcc[_0x48f1d2(0x1c5)][0x0][_0x48f1d2(0x284)]:![];_0x409278[_0x48f1d2(0x1ad)]=_0x50095f?_0x48f1d2(0x15c):'manual',_0x409278[_0x48f1d2(0x248)]=_0x549dcc?_0x549dcc[_0x48f1d2(0x1c5)][0x0][_0x48f1d2(0x248)]:'Bot\x20'+_0x5e73e8;}catch(_0x21ef55){_0x409278[_0x48f1d2(0x1ad)]='manual',_0x409278[_0x48f1d2(0x248)]=_0x48f1d2(0x201)+_0x5e73e8;}}else _0x409278['mode']=_0x48f1d2(0x17f),_0x409278[_0x48f1d2(0x248)]=_0x48f1d2(0x201)+_0x5e73e8;return _0x409278;}function getBotsWithMode(){const _0x49be1e=_0x391bd5,_0x89a5cb=dbConfig[_0x49be1e(0x207)]('bots')[_0x49be1e(0x1b0)](_0x49be1e(0x14f))['value']()||[];return _0x89a5cb[_0x49be1e(0x161)](_0x2fe248=>{const _0x58ba00=_0x49be1e;let _0x3574a5=getBotAttributes(_0x2fe248[_0x58ba00(0x14f)]);_0x2fe248[_0x58ba00(0x1ad)]=_0x3574a5[_0x58ba00(0x1ad)];}),_0x89a5cb;}function getBotExchanges(){const _0x1525b8=_0x391bd5;let _0xfef641=[];const _0x2bc036=dbConfig[_0x1525b8(0x207)](_0x1525b8(0x14d))['sortBy'](_0x1525b8(0x14f))[_0x1525b8(0x16a)]()||[];_0x2bc036['forEach'](_0x53ab79=>{const _0x2f2aef=_0x1525b8;if(_0x53ab79[_0x2f2aef(0x1e6)]==_0x2f2aef(0x167)){const _0x5be7a1=configpath+_0x2f2aef(0x266)+_0x53ab79[_0x2f2aef(0x14f)]+_0x2f2aef(0x10f),_0x4d1dcf=fs[_0x2f2aef(0x15a)](_0x5be7a1);let _0x47eb74;if(_0x4d1dcf){const _0x3e6c07=fs[_0x2f2aef(0x129)](_0x5be7a1);try{const _0x175302=JSON[_0x2f2aef(0x25e)](_0x3e6c07);_0x47eb74=_0x175302?_0x175302[_0x2f2aef(0x1c5)][0x0][_0x2f2aef(0x10a)]:null;}catch(_0x4aacbd){}}if(_0x47eb74)_0xfef641['push'](_0x47eb74);}});const _0x67c912=[...new Set(_0xfef641)][_0x1525b8(0x156)]();return _0x67c912;}async function initUser(){const _0x42f450=_0x391bd5;if(!settings[_0x42f450(0x291)]){const _0x277ff9=uuidRandom();mixpanel[_0x42f450(0x217)](_0x277ff9),updateSetting(_0x42f450(0x291),_0x277ff9);}}async function initSecure(){const _0x2e2d48=_0x391bd5;let _0x485664=getSecure();if(!_0x485664['hasOwnProperty'](_0x2e2d48(0x287))){let _0x47337d=await generateKeys();_0x485664[_0x2e2d48(0x27c)]=_0x47337d['publicKey'],_0x485664[_0x2e2d48(0x238)]=_0x47337d[_0x2e2d48(0x238)],_0x485664[_0x2e2d48(0x287)]=crypto[_0x2e2d48(0x1cd)](0x20)[_0x2e2d48(0x1c1)](_0x2e2d48(0x2a4));;storeSecure(_0x485664);}}function getSettings(){const _0x12df8a=_0x391bd5;return dbSettings[_0x12df8a(0x207)]('settings')[_0x12df8a(0x16a)]()||{};}function getSecure(){const _0x29cfa2=_0x391bd5;return dbSecure[_0x29cfa2(0x207)]('secure')[_0x29cfa2(0x16a)]()||{};}function getBlacklist(){const _0x78a87a=_0x391bd5;return dbSecure[_0x78a87a(0x207)]('blacklist')[_0x78a87a(0x16a)]()||[];}function broadcastToBots(_0x357ec8,_0x232c49){const _0x23f3fa=_0x391bd5;config[_0x23f3fa(0x161)](_0x3edfbc=>{const _0x109da4=_0x23f3fa;if(_0x3edfbc['status']=='enabled'&&_0x3edfbc[_0x109da4(0x1c4)]=='running'||_0x3edfbc['status']==_0x109da4(0x127)&&_0x3edfbc[_0x109da4(0x1c4)]==_0x109da4(0x237)){if(pid[_0x3edfbc[_0x109da4(0x14f)]])pid[_0x3edfbc[_0x109da4(0x14f)]][_0x109da4(0x18e)]({[_0x357ec8]:_0x232c49});}});}function storeSettings(_0x4d3c5f,_0x5b8574=![]){const _0x13a841=_0x391bd5;_0x4d3c5f={...settings,..._0x4d3c5f};if(_0x5b8574&&_0x4d3c5f['bbPassword']!='************'&&_0x4d3c5f[_0x13a841(0x26e)]!=_0x13a841(0x1ef)&&_0x4d3c5f[_0x13a841(0x26e)]!=''){const _0x28ad59=crypt['decrypt'](secure[_0x13a841(0x238)],_0x4d3c5f['bbPassword'])[_0x13a841(0x196)][_0x13a841(0x29e)]('@')[0x0],_0x4038a2=bcrypt[_0x13a841(0x2ad)](_0x28ad59,saltRounds);_0x4d3c5f={..._0x4d3c5f,'bbPassword':_0x4038a2};}if(_0x5b8574&&_0x4d3c5f['telegramToken']!=_0x13a841(0x270)&&_0x4d3c5f[_0x13a841(0x12d)]!='***'&&_0x4d3c5f[_0x13a841(0x12d)]!=''){const _0x19fa6a=crypt[_0x13a841(0x21c)](secure[_0x13a841(0x238)],_0x4d3c5f['telegramToken'])['message'][_0x13a841(0x29e)]('@')[0x0];_0x4d3c5f={..._0x4d3c5f,'telegramToken':_0x19fa6a};}const _0x5f5f71=_0x4d3c5f[_0x13a841(0x12d)]!=_0x13a841(0x270)&&_0x4d3c5f[_0x13a841(0x12d)]!=settings[_0x13a841(0x12d)]||_0x4d3c5f['telegramUsername']!=settings[_0x13a841(0x12b)],_0x5ff6ad=_0x4d3c5f['telegramToken']==''||_0x4d3c5f[_0x13a841(0x12b)]=='';if(_0x5f5f71)_0x4d3c5f[_0x13a841(0x253)]=_0x13a841(0x122);for(const [_0xa94462,_0x2a8e63]of Object['entries'](_0x4d3c5f)){if(_0xa94462=='telegramToken'&&_0x2a8e63==_0x13a841(0x270)){_0x4d3c5f[_0x13a841(0x12d)]=settings['telegramToken'];continue;};if(_0xa94462==_0x13a841(0x26e)&&_0x2a8e63==_0x13a841(0x270)){_0x4d3c5f[_0x13a841(0x26e)]=settings[_0x13a841(0x26e)];continue;};dbSettings[_0x13a841(0x1a1)](_0x13a841(0xf3)+_0xa94462,_0x2a8e63)[_0x13a841(0x28d)]();}settings=_0x4d3c5f,io['to']('botmanager')['emit'](_0x13a841(0x1ae),cleanSettings()),broadcastToBots(_0x13a841(0xfa),settings[_0x13a841(0xfa)]),broadcastToBots(_0x13a841(0x24c),settings[_0x13a841(0x24c)]);if(_0x5f5f71&&!_0x5ff6ad)initTelegram();if(_0x5f5f71&&_0x5ff6ad)disableTelegram();getAllClients()[_0x13a841(0x161)](_0x254306=>{const _0xbb80f9=_0x13a841;getSocket(_0x254306['id'])['emit']('status',{'access':{'allow':![],'reason':_0xbb80f9(0x14a),'token':null}});});}function updateSetting(_0x92e1d8,_0x2020e6){const _0x45666c=_0x391bd5;dbSettings[_0x45666c(0x1a1)]('settings.'+_0x92e1d8,_0x2020e6)['write'](),settings=getSettings(),io['to'](_0x45666c(0x12f))[_0x45666c(0x166)](_0x45666c(0x1ae),cleanSettings());}function storeSecure(_0x1ec814){const _0x71d50e=_0x391bd5;dbSecure[_0x71d50e(0x207)](_0x71d50e(0x1d1))[_0x71d50e(0x209)](_0x1ec814)[_0x71d50e(0x28d)](),secure=_0x1ec814;}function addBlacklist(_0x31b91b){const _0x399afe=_0x391bd5;cleanBlacklist();let _0x444bf9;devices[_0x31b91b][_0x399afe(0x19c)]?_0x444bf9=Math['max'](devices[_0x31b91b]['telegramIpApproval'][_0x399afe(0x13d)],loginExpiry):_0x444bf9=loginExpiry,dbSecure['get']('blacklist')[_0x399afe(0x209)]({'expiry':new Date()[_0x399afe(0x230)]()+_0x444bf9*0x3c*0x3e8,'token':devices[_0x31b91b][_0x399afe(0x14c)][_0x399afe(0x17e)]})[_0x399afe(0x28d)](),blacklist=dbSecure[_0x399afe(0x207)](_0x399afe(0x1be))[_0x399afe(0x16a)]();}function cleanBlacklist(){const _0x4ff8b5=_0x391bd5;let _0x345b48=dbSecure[_0x4ff8b5(0x207)](_0x4ff8b5(0x1be))[_0x4ff8b5(0x275)]()['value'](),_0x5bfa4d=new Date()[_0x4ff8b5(0x230)]();_0x345b48[_0x4ff8b5(0x161)](_0x296882=>{const _0x4694dd=_0x4ff8b5;_0x296882[_0x4694dd(0x13d)]<_0x5bfa4d&&dbSecure[_0x4694dd(0x207)](_0x4694dd(0x1be))[_0x4694dd(0x180)]({'expiry':_0x296882['expiry']})[_0x4694dd(0x28d)]();});}function initStates(){let _0x3c6456=getConfiguration();_0x3c6456['forEach'](_0x3c8af8=>{const _0x222923=_0x48a3;_0x3c8af8[_0x222923(0x1c4)]='stopped';}),storeConfiguration(_0x3c6456);}function onKeys(){const _0x5d739a=new RSA();return new Promise(_0x3dfc25=>{_0x5d739a['generateKeyPairAsync']()['then'](_0x524bb3=>{_0x3dfc25(_0x524bb3);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5d0cd8=_0x391bd5;let _0x48c6da=getSettings(),_0x3bfc48=![];!_0x48c6da['hasOwnProperty'](_0x5d0cd8(0x18d))&&(_0x48c6da[_0x5d0cd8(0x18d)]=0x0,_0x3bfc48=!![]);!_0x48c6da['hasOwnProperty'](_0x5d0cd8(0x224))&&(_0x48c6da[_0x5d0cd8(0x224)]=0x0,_0x3bfc48=!![]);!_0x48c6da['hasOwnProperty'](_0x5d0cd8(0x17c))&&(_0x48c6da['latestversion']=_0x5d0cd8(0x13c),_0x3bfc48=!![]);!_0x48c6da[_0x5d0cd8(0x279)]('onepagemode')&&(_0x48c6da[_0x5d0cd8(0x24c)]=![],_0x3bfc48=!![]);if(_0x3bfc48)storeSettings(_0x48c6da);}function storeConfiguration(_0x21045b){const _0x34ffc2=_0x391bd5;dbConfig['get'](_0x34ffc2(0x14d))[_0x34ffc2(0x180)]()[_0x34ffc2(0x28d)](),_0x21045b[_0x34ffc2(0x161)](_0x2244d5=>{const _0x35c6ba=_0x34ffc2;delete _0x2244d5[_0x35c6ba(0x1ad)];}),dbConfig[_0x34ffc2(0x207)]('bots')[_0x34ffc2(0x209)](..._0x21045b)[_0x34ffc2(0x28d)](),config=_0x21045b;}function resetPassword(){const _0x45f6f9=_0x391bd5;tgBot&&settings['telegramChatId']&&(tgBot[_0x45f6f9(0x1f0)](_0x45f6f9(0x14b)),tgBot[_0x45f6f9(0x1ca)](settings[_0x45f6f9(0x1f4)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x45f6f9(0x252),'callback_data':_0x45f6f9(0x252)},{'text':'no','callback_data':'no'}]]}})[_0x45f6f9(0x1e2)](_0x372bca=>{telegramError(_0x372bca);}),tgBot['on'](_0x45f6f9(0x14b),async _0x27518e=>{const _0x4cdc33=_0x45f6f9,_0x20b6a1=_0x27518e[_0x4cdc33(0x1bb)],_0x4c8ba0=_0x27518e['message'];tgBot['answerCallbackQuery'](_0x27518e['id'])[_0x4cdc33(0x21e)](async()=>{const _0x37d5e8=_0x4cdc33;if(_0x20b6a1!='no'){const _0x46666b=0xf,_0x5960c2='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x27395a=Array[_0x37d5e8(0x220)](crypto[_0x37d5e8(0x23c)](new Uint32Array(_0x46666b)))[_0x37d5e8(0x286)](_0x5ccdd0=>_0x5960c2[_0x5ccdd0%_0x5960c2[_0x37d5e8(0x137)]])[_0x37d5e8(0x208)](''),_0x297bc2=bcrypt['hashSync'](_0x27395a,saltRounds);storeSettings({'bbPassword':_0x297bc2}),await tgBot[_0x37d5e8(0x1ca)](_0x4c8ba0[_0x37d5e8(0x20d)]['id'],_0x37d5e8(0x1f3)+_0x27395a,{'parse_mode':_0x37d5e8(0x241)})['catch'](_0x3b6582=>{telegramError(_0x3b6582);});}else await tgBot[_0x37d5e8(0x1ca)](_0x4c8ba0[_0x37d5e8(0x20d)]['id'],_0x37d5e8(0x289))['catch'](_0x5b0440=>{telegramError(_0x5b0440);});}),tgBot[_0x4cdc33(0x1f0)]('callback_query');}));}async function confirmRestore(_0x2fb9cb,_0x54b177){const _0x583728=_0x391bd5;io['to'](_0x583728(0x12f))[_0x583728(0x166)](_0x583728(0x1e7),_0x583728(0x1ea),_0x583728(0x141)),tgBot&&settings[_0x583728(0x1f4)]&&(tgBot[_0x583728(0x1f0)](_0x583728(0x14b)),await tgBot[_0x583728(0x1ca)](settings[_0x583728(0x1f4)],_0x583728(0x163),{'parse_mode':_0x583728(0x241),'reply_markup':{'inline_keyboard':[[{'text':_0x583728(0x252),'callback_data':_0x583728(0x252)},{'text':'no','callback_data':'no'}]]}})[_0x583728(0x1e2)](_0x46ec3b=>{telegramError(_0x46ec3b);}),tgBot['on'](_0x583728(0x14b),async _0x57862b=>{const _0x56e2fa=_0x583728,_0x4a62ac=_0x57862b[_0x56e2fa(0x1bb)],_0x598f7d=_0x57862b[_0x56e2fa(0x196)];tgBot[_0x56e2fa(0x250)](_0x57862b['id'])[_0x56e2fa(0x21e)](async()=>{const _0x4a454d=_0x56e2fa;_0x4a62ac==_0x4a454d(0x252)?(await tgBot[_0x4a454d(0x1ca)](_0x598f7d[_0x4a454d(0x20d)]['id'],_0x4a454d(0x1d4),{'parse_mode':_0x4a454d(0x241)})[_0x4a454d(0x1e2)](_0x13200f=>{telegramError(_0x13200f);}),unzipFile(_0x2fb9cb,_0x54b177)):(logger[_0x4a454d(0x256)](_0x4a454d(0x1d9)),await tgBot[_0x4a454d(0x1ca)](_0x598f7d['chat']['id'],'Restore\x20process\x20aborted')['catch'](_0x3c562b=>{telegramError(_0x3c562b);}));}),tgBot['removeListener'](_0x56e2fa(0x14b));}));}function getServerTime(){const _0x50d047=_0x391bd5,_0xffd94e=new Date();return _0xffd94e[_0x50d047(0xf7)]()+'/'+(_0xffd94e[_0x50d047(0x1dc)]()+0x1)[_0x50d047(0x1c1)]()[_0x50d047(0x13e)](0x2,'0')+'/'+_0xffd94e['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0xffd94e[_0x50d047(0x1bf)]()[_0x50d047(0x1c1)]()[_0x50d047(0x13e)](0x2,'0')+':'+_0xffd94e[_0x50d047(0x1ce)]()[_0x50d047(0x1c1)]()[_0x50d047(0x13e)](0x2,'0')+':'+_0xffd94e[_0x50d047(0x150)]()[_0x50d047(0x1c1)]()[_0x50d047(0x13e)](0x2,'0');}function getTimeStamp(){const _0x320432=_0x391bd5,_0x897ffa=shiftedTime();return _0x897ffa['getFullYear']()+'/'+(_0x897ffa[_0x320432(0x1dc)]()+0x1)[_0x320432(0x1c1)]()[_0x320432(0x13e)](0x2,'0')+'/'+_0x897ffa[_0x320432(0x177)]()[_0x320432(0x1c1)]()[_0x320432(0x13e)](0x2,'0')+'\x20'+_0x897ffa[_0x320432(0x1bf)]()['toString']()[_0x320432(0x13e)](0x2,'0')+':'+_0x897ffa['getMinutes']()[_0x320432(0x1c1)]()[_0x320432(0x13e)](0x2,'0')+':'+_0x897ffa[_0x320432(0x150)]()[_0x320432(0x1c1)]()[_0x320432(0x13e)](0x2,'0');}function getCleanTimeStamp(){const _0x1a2728=_0x391bd5,_0x55064a=shiftedTime();return _0x55064a['getFullYear']()+(_0x55064a[_0x1a2728(0x1dc)]()+0x1)[_0x1a2728(0x1c1)]()[_0x1a2728(0x13e)](0x2,'0')+_0x55064a[_0x1a2728(0x177)]()[_0x1a2728(0x1c1)]()[_0x1a2728(0x13e)](0x2,'0')+'-'+_0x55064a['getHours']()['toString']()[_0x1a2728(0x13e)](0x2,'0')+_0x55064a[_0x1a2728(0x1ce)]()[_0x1a2728(0x1c1)]()[_0x1a2728(0x13e)](0x2,'0')+_0x55064a['getSeconds']()[_0x1a2728(0x1c1)]()[_0x1a2728(0x13e)](0x2,'0');}function shiftedTime(){const _0x58d508=_0x391bd5,_0x410339=new Date();let _0x7cb00e=_0x410339;if(settings[_0x58d508(0xfa)]&&settings[_0x58d508(0xfa)]!==0x0)_0x7cb00e=fns[_0x58d508(0x26f)](_0x410339,{'hours':settings[_0x58d508(0xfa)]});return _0x7cb00e;}function startScheduler(){const _0x4c61ab=_0x391bd5,_0x3b5166=new Date()[_0x4c61ab(0x20f)](),_0x56ceef=shiftedTime()['getHours']();_0x56ceef==0x4&&backupConfigFiles();_0x56ceef==0x0&&rotateLogFiles();_0x3b5166%0x6==0x0&&triggerAnalytics();_0x3b5166%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3b8889){const _0x4556ba=_0x391bd5;logger[_0x4556ba(0x256)](_0x4556ba(0x23e)+_0x3b8889);const _0x197961=getBotsWithMode();_0x197961[_0x4556ba(0x137)]>0x0?confirmRestore(configbackuppath,_0x3b8889):unzipFile(configbackuppath,_0x3b8889);}async function getBackupFiles(_0x1dc49d=null){const _0x3eb33e=_0x391bd5;let _0x52eae0=[],_0x46336b=fs[_0x3eb33e(0x280)](configbackuppath,{'withFileTypes':!![]});_0x46336b[_0x3eb33e(0x156)]((_0x448669,_0x609b5)=>_0x448669['name']<_0x609b5[_0x3eb33e(0x1f7)]?0x1:_0x609b5[_0x3eb33e(0x1f7)]<_0x448669[_0x3eb33e(0x1f7)]?-0x1:0x0),_0x46336b[_0x3eb33e(0x161)](_0x1d9b6f=>{const _0x28fb2f=_0x3eb33e;if(!_0x1d9b6f[_0x28fb2f(0x149)]()&&_0x1d9b6f['name'][_0x28fb2f(0x130)]('backup-full@')&&_0x1d9b6f[_0x28fb2f(0x1f7)][_0x28fb2f(0x1ab)](_0x28fb2f(0x234))){const _0x534bf3=formatDate(fs[_0x28fb2f(0x1da)](configbackuppath+_0x1d9b6f[_0x28fb2f(0x1f7)])['mtime']);_0x52eae0['push']({'name':_0x1d9b6f[_0x28fb2f(0x1f7)],'mtime':_0x534bf3});}});if(_0x1dc49d)io['to'](_0x1dc49d)[_0x3eb33e(0x166)]('backup-files',_0x52eae0);else return _0x52eae0;}async function backupConfigFiles(){const _0x144603=_0x391bd5;await zipFiles('backup-full');const _0x2241cb=getCleanTimeStamp();fs[_0x144603(0x233)](zippath+_0x144603(0x272),configbackuppath+(_0x144603(0xf0)+_0x2241cb+_0x144603(0x234)));let _0x2015d8=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2015d8[_0x144603(0x156)]((_0x5e6b17,_0x5c2a5f)=>_0x5e6b17['name']<_0x5c2a5f[_0x144603(0x1f7)]?0x1:_0x5c2a5f[_0x144603(0x1f7)]<_0x5e6b17['name']?-0x1:0x0),_0x2015d8[_0x144603(0x137)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x2015d8[maxBackups][_0x144603(0x1f7)]);}function rotateLogFiles(){const _0x41bc7f=_0x391bd5,_0x370ea1=fs[_0x41bc7f(0x1da)](logspath+_0x41bc7f(0x134)),_0x2ccbc8=_0x370ea1[_0x41bc7f(0x13a)]/0x400;if(_0x2ccbc8>0x64){let _0x1294f6=fs[_0x41bc7f(0x280)](logspath,{'withFileTypes':!![]});_0x1294f6['sort']((_0x34dcfd,_0x34e393)=>_0x34dcfd[_0x41bc7f(0x1f7)]<_0x34e393[_0x41bc7f(0x1f7)]?0x1:_0x34e393[_0x41bc7f(0x1f7)]<_0x34dcfd[_0x41bc7f(0x1f7)]?-0x1:0x0),_0x1294f6[_0x41bc7f(0x161)](_0x3fd109=>{const _0x446113=_0x41bc7f;if(_0x3fd109[_0x446113(0x1f7)]==_0x446113(0x27a))fs[_0x446113(0x233)](logspath+_0x3fd109[_0x446113(0x1f7)],logspath+'output-003.log');if(_0x3fd109[_0x446113(0x1f7)]==_0x446113(0x20a))fs[_0x446113(0x233)](logspath+_0x3fd109[_0x446113(0x1f7)],logspath+_0x446113(0x27a));_0x3fd109[_0x446113(0x1f7)]=='output-000.log'&&(fs[_0x446113(0x233)](logspath+_0x3fd109[_0x446113(0x1f7)],logspath+_0x446113(0x20a)),fs['writeFileSync'](logspath+_0x3fd109[_0x446113(0x1f7)],''));});}}async function zipFiles(_0x5c2dc6){const _0x435100=_0x391bd5;let _0x2e1383;if(_0x5c2dc6==_0x435100(0x222))_0x2e1383=logspath;if(_0x5c2dc6==_0x435100(0x1e8))_0x2e1383=configpath;if(_0x5c2dc6=='backup-full')_0x2e1383=configpath;let _0x225de7=fs['readdirSync'](_0x2e1383,{'withFileTypes':!![]});const _0x4db680=new require(_0x435100(0x2a8))();_0x225de7[_0x435100(0x161)](_0x4e82ef=>{const _0x4de985=_0x435100;if(!_0x4e82ef[_0x4de985(0x149)]()){let _0xa4f1c9=fs[_0x4de985(0x129)](_0x2e1383+_0x4e82ef[_0x4de985(0x1f7)]);if(_0x5c2dc6=='backup'){const _0x5d47e4=/^bot-[0-9]{3}-config.json$/,_0x5b58e6=_0x5d47e4[_0x4de985(0x182)](_0x4e82ef['name']);if(_0x5b58e6){const _0x3aca2c=JSON[_0x4de985(0x25e)](_0xa4f1c9);_0x3aca2c[_0x4de985(0x1c5)][0x0]&&(_0x3aca2c[_0x4de985(0x1c5)][0x0][_0x4de985(0x1cb)]=_0x4de985(0x1ef),_0x3aca2c[_0x4de985(0x1c5)][0x0][_0x4de985(0x1ba)]=_0x4de985(0x1ef)),_0xa4f1c9=JSON[_0x4de985(0x210)](_0x3aca2c,null,0x2);}if(_0x4e82ef[_0x4de985(0x1f7)]==_0x4de985(0x195)){const _0x9dfca=JSON[_0x4de985(0x25e)](_0xa4f1c9);if(_0x9dfca[_0x4de985(0x1ae)]['loginRequired'])_0x9dfca[_0x4de985(0x1ae)][_0x4de985(0xea)]=![];if(_0x9dfca[_0x4de985(0x1ae)]['bbPassword'])_0x9dfca[_0x4de985(0x1ae)][_0x4de985(0x26e)]=_0x4de985(0x1ef);if(_0x9dfca['settings'][_0x4de985(0x12d)])_0x9dfca['settings'][_0x4de985(0x12d)]=_0x4de985(0x1ef);if(_0x9dfca[_0x4de985(0x1ae)]['telegramChatId'])_0x9dfca[_0x4de985(0x1ae)]['telegramChatId']=null;_0xa4f1c9=JSON[_0x4de985(0x210)](_0x9dfca,null,0x2);}if(_0x4e82ef[_0x4de985(0x1f7)]!=_0x4de985(0x18c))_0x4db680[_0x4de985(0x211)](_0x4e82ef[_0x4de985(0x1f7)],_0xa4f1c9);}else _0x4db680[_0x4de985(0x211)](_0x4e82ef[_0x4de985(0x1f7)],_0xa4f1c9);}});const _0x470ad3=_0x4db680['generate']({'base64':![],'compression':'DEFLATE'});fs[_0x435100(0xe7)](zippath+(_0x5c2dc6+'.zip'),_0x470ad3,'binary');}async function unzipFile(_0x8a898a,_0x520a5c){const _0x12db4a=_0x391bd5;fs[_0x12db4a(0x280)](configpath,{'withFileTypes':!![]})[_0x12db4a(0x161)](_0x2cdb82=>{const _0x3d1999=_0x12db4a;if(!_0x2cdb82['isDirectory']())fs['rmSync'](configpath+_0x2cdb82[_0x3d1999(0x1f7)]);});const _0x448006=fs[_0x12db4a(0x129)](_0x8a898a+_0x520a5c,_0x12db4a(0x1e1)),_0x1be8cd=new require(_0x12db4a(0x2a8))(_0x448006,{'base64':![],'checkCRC32':!![]});Object[_0x12db4a(0x202)](_0x1be8cd[_0x12db4a(0x24e)])[_0x12db4a(0x161)](_0x1b5d9d=>{const _0x36f016=_0x12db4a,_0x33c0da=_0x1be8cd[_0x36f016(0x24e)][_0x1b5d9d];fs[_0x36f016(0xe7)](configpath+_0x33c0da[_0x36f016(0x1f7)],_0x33c0da[_0x36f016(0x181)]);}),fs[_0x12db4a(0x280)](temppath,{'withFileTypes':!![]})[_0x12db4a(0x161)](_0x20e205=>{const _0x3d1805=_0x12db4a;if(!_0x20e205[_0x3d1805(0x149)]())fs['rmSync'](temppath+_0x20e205['name']);}),logger[_0x12db4a(0x256)](_0x12db4a(0x1fc)),process[_0x12db4a(0x18e)]({'restore':!![]},_0x1fe273=>{});}async function getPublicIp(){const _0x26f329=_0x391bd5;try{const _0x1aac25=await axios[_0x26f329(0x207)](_0x26f329(0x1e9));publicip=_0x1aac25[_0x26f329(0x1bb)]['ip'];}catch(_0x3e7e3d){}}async function triggerAnalytics(){const _0x541cd9=_0x391bd5;if(!publicip)await getPublicIp();const _0x365fb0=getBotsWithMode();let _0x343bc8=0x0;_0x365fb0[_0x541cd9(0x161)](_0x1cdf7e=>{const _0x40c84b=_0x541cd9;if(_0x1cdf7e[_0x40c84b(0x1e6)]==='enabled')_0x343bc8++;});const _0xe4ddee=getBotExchanges();mixpanel['track'](_0x541cd9(0x19a),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x365fb0[_0x541cd9(0x137)],'numbotsenabled':_0x343bc8,'exchanges':_0xe4ddee});}async function getMessages(){const _0x3c5a5b=_0x391bd5,_0x6e0602='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x59123b=new GraphQLClient(_0x6e0602),_0x46a847={'authorization':_0x3c5a5b(0x132)},_0x26a60a=serverversion['split']('.'),_0x5c1bd3=_0x26a60a[0x0]+'.'+_0x26a60a[0x1],_0x338681=Math[_0x3c5a5b(0x269)](settings[_0x3c5a5b(0x18d)],settings[_0x3c5a5b(0x224)]),_0x457c04={'last':parseInt(_0x338681),'bbm':_0x5c1bd3},_0xa168c1=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x39c98d;try{_0x39c98d=await _0x59123b['request'](_0xa168c1,_0x457c04,_0x46a847);}catch(_0x55b732){}if(_0x39c98d&&_0x39c98d['messages']){let _0x4af760=settings['lastmsgtelegram'];newMessages=[];for(const _0x589794 of _0x39c98d[_0x3c5a5b(0x251)]){newMessages[_0x3c5a5b(0x209)](_0x589794);if(_0x589794['bbvNew'])updateSetting(_0x3c5a5b(0x17c),_0x589794[_0x3c5a5b(0x158)]);let _0x1f4f09=_0x589794[_0x3c5a5b(0x158)]?serverversion>=_0x589794['bbvNew']:![];if(!_0x1f4f09&&_0x589794[_0x3c5a5b(0x1aa)]>_0x4af760){if(_0x589794[_0x3c5a5b(0x124)]===_0x3c5a5b(0x282)||serverversion[_0x3c5a5b(0x130)](_0x589794[_0x3c5a5b(0x124)])){let _0x414378=''+_0x589794[_0x3c5a5b(0x16f)]+'\x0a\x0a'+_0x589794[_0x3c5a5b(0x196)];const _0x35df1b=await sendTelegramMsg(toTelegramMarkdown(_0x414378),_0x3c5a5b(0x255));if(_0x35df1b)_0x4af760=_0x589794['number'];}}}updateAvailable=isNewerVersion(settings[_0x3c5a5b(0x17c)],serverversion),updateSetting(_0x3c5a5b(0x18d),_0x4af760),emitMessages();}}function emitMessages(){const _0x4975ea=_0x391bd5,_0x2cb11b=settings[_0x4975ea(0x224)];let _0x300d99=[];newMessages[_0x4975ea(0x161)](_0x496dfc=>{_0x496dfc['number']>_0x2cb11b&&_0x300d99['push'](_0x496dfc);}),_0x300d99[_0x4975ea(0x137)]>0x0&&getAllClients()[_0x4975ea(0x161)](_0x2119e5=>{const _0x202cba=_0x4975ea;getSocket(_0x2119e5['id'])[_0x202cba(0x166)](_0x202cba(0x196),_0x300d99);});}function confirmMessage(_0x36f29f){const _0x5c49fc=_0x391bd5;updateSetting(_0x5c49fc(0x224),Number(_0x36f29f));}function isNewerVersion(_0x1dd03d,_0x24e8a2){const _0x1e4a40=_0x391bd5,_0x3efa9b=_0x24e8a2[_0x1e4a40(0x29e)]('.'),_0x2ac509=_0x1dd03d[_0x1e4a40(0x29e)]('.');for(var _0x330817=0x0;_0x330817<_0x2ac509[_0x1e4a40(0x137)];_0x330817++){const _0x52c4c8=~~_0x2ac509[_0x330817],_0x232590=~~_0x3efa9b[_0x330817];if(_0x52c4c8>_0x232590)return!![];if(_0x52c4c8<_0x232590)return![];}return![];}function toTelegramMarkdown(_0x3719c5){const _0x1168ff=_0x391bd5,_0x252a94=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3b9210=/\*{2}(.+?)\*{2}/gim;return _0x3719c5=_0x3719c5[_0x1168ff(0x1f1)](_0x252a94,_0x1168ff(0x15e))['replace'](_0x3b9210,'*$1*'),_0x3719c5;}async function validateConfigFile(){const _0x326448=_0x391bd5,_0x2892cc=dbConfig[_0x326448(0x207)](_0x326448(0x14d))[_0x326448(0x1b0)]('botID')['value']()||[];if(_0x2892cc[_0x326448(0x137)]==0x0){let _0x217472=0x0,_0xdfb084=[];const _0x4816d2=/^bot-([0-9]{3})-config.json$/,_0x40204d=fs[_0x326448(0x280)](configpath);_0x40204d['forEach'](_0x58cd3c=>{const _0x270800=_0x326448,_0x47a095=_0x4816d2[_0x270800(0x24f)](_0x58cd3c);if(_0x47a095){const _0x3f8646=_0x47a095[0x1];let _0x4f8e02=getBotAttributes(_0x3f8646);_0xdfb084['push']({'botID':_0x3f8646,'botname':_0x4f8e02[_0x270800(0x248)],'status':_0x270800(0x13b),'live':'stopped'}),_0x217472++;}}),_0x217472!=0x0&&(dbConfig[_0x326448(0x207)](_0x326448(0x14d))[_0x326448(0x1d5)](_0xdfb084)[_0x326448(0x28d)](),config=_0xdfb084,restoredConfigFile=_0x217472);}}async function restoreConfigNotify(_0x8a27d1){const _0x35b414=_0x391bd5;let _0x3e9e71;if(restoredConfigFile==0x1)_0x3e9e71=_0x35b414(0x11f);else _0x3e9e71=_0x35b414(0x160);if(_0x8a27d1)io['to']('botmanager')[_0x35b414(0x166)]('notification',_0x3e9e71);else{logger[_0x35b414(0x265)](_0x35b414(0x168)),logger[_0x35b414(0x265)](_0x3e9e71),logger[_0x35b414(0x265)](_0x35b414(0x168)),logger[_0x35b414(0x265)]('');if(tgBot&&settings[_0x35b414(0x1f4)]&&settings[_0x35b414(0x253)]!=_0x35b414(0x1df))tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x3e9e71)[_0x35b414(0x1e2)](_0x5da75c=>{telegramError(_0x5da75c);});}}function validateCredentials(_0x32e469,_0x3c9ce5){const _0x222d08=_0x391bd5;if(_0x32e469[_0x222d08(0x24a)]==settings['bbUsername']&&bcrypt[_0x222d08(0x1c6)](_0x32e469[_0x222d08(0x1b2)],settings[_0x222d08(0x26e)])){if(settings[_0x222d08(0x106)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0xd1d575=generateLoginToken(_0x3c9ce5);return{'allow':!![],'reason':_0x222d08(0x105),'token':_0xd1d575};}}else return{'allow':![],'reason':_0x222d08(0x258),'token':null};}function refreshToken(_0xcc8b35){const _0x404b45=_0x391bd5,_0x380849=generateLoginToken(_0xcc8b35);return{'allow':!![],'reason':_0x404b45(0x105),'token':_0x380849};}function validateAccess(_0x4ee5a6,_0x19fc5f,_0x4b98e6){const _0x3a1816=_0x391bd5,_0x35aaaa=_0x4b98e6?_0x4b98e6:devices[_0x19fc5f]['ip'];let _0x3fc8a0;const _0x3a1731=_0x446137=>{const _0x442a9a=_0x48a3;if(settings[_0x442a9a(0xea)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x19fc5f)){const _0x10262b=generateLoginToken(_0x19fc5f);return{'allow':!![],'reason':_0x442a9a(0x1af),'token':_0x10262b};}else return{'allow':![],'reason':_0x442a9a(0x297),'token':null};}else return _0x3fc8a0=validToken(_0x446137,_0x19fc5f),_0x3fc8a0[_0x442a9a(0x279)](_0x442a9a(0x141))?{'allow':!![],'reason':_0x442a9a(0x1d8),'token':_0x446137}:{'allow':![],'reason':_0x442a9a(0x297),'token':null};}else return{'allow':!![],'reason':_0x442a9a(0x1dd),'token':null};};if(settings['whitelistEnabled']){let _0x34247c=[...settings[_0x3a1816(0x21a)],_0x3a1816(0x1f6),_0x3a1816(0x108),'127.0.0.1'];if(_0x34247c[_0x3a1816(0x11c)](_0x35aaaa))return _0x3a1731(_0x4ee5a6);else{_0x3fc8a0=validToken(_0x4ee5a6,_0x19fc5f);if(_0x3fc8a0[_0x3a1816(0x279)](_0x3a1816(0x141)))return _0x3a1731(_0x4ee5a6);else{if(telegramIpApproved(_0x19fc5f)){const _0x15a43b=generateToken(_0x19fc5f);return _0x3fc8a0=_0x3a1731(_0x4ee5a6),_0x3fc8a0[_0x3a1816(0x24d)]?{'allow':!![],'reason':_0x3a1816(0xf5),'token':_0x15a43b}:_0x3fc8a0;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x3a1816(0x194),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x3a1731(_0x4ee5a6);}function timelyDecrypt(_0x351266,_0x2a61a8=!![]){const _0x24ce2c=_0x391bd5;if(_0x351266)try{const _0x4b9c5d=crypt[_0x24ce2c(0x21c)](secure[_0x24ce2c(0x238)],_0x351266)[_0x24ce2c(0x196)],_0x5d3a18=_0x4b9c5d[_0x24ce2c(0x29e)]('@')[0x0],_0x4986d0=_0x4b9c5d[_0x24ce2c(0x29e)]('@')[0x1],_0xba3eb5=new Date()[_0x24ce2c(0x230)]();if(_0x2a61a8){if(_0xba3eb5-_0x4986d0<maxSecretAge*0x3e8)return _0x5d3a18;else return![];}else return _0x5d3a18;}catch(_0x47b149){return![];}else return![];}const validToken=(_0x1e0a70,_0x4a5d2b)=>{const _0x327b50=_0x391bd5,_0x1f7898=devices[_0x4a5d2b]['ip'];if(!_0x1e0a70)return{'error':_0x327b50(0x1b7)};for(let _0x417f3f of blacklist){if(_0x417f3f[_0x327b50(0x17e)]==_0x1e0a70)return{'error':'Token\x20blacklisted'};}let _0x34ef1b;try{_0x34ef1b=jwt[_0x327b50(0x19e)](_0x1e0a70,secure[_0x327b50(0x287)]+_0x4a5d2b);}catch{return{'error':_0x327b50(0x2ac)};}if(!_0x34ef1b[_0x327b50(0x279)](_0x327b50(0x278))&&!_0x34ef1b['hasOwnProperty'](_0x327b50(0x24a))||!_0x34ef1b['hasOwnProperty'](_0x327b50(0x1fb)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x34ef1b[_0x327b50(0x279)](_0x327b50(0x24a))&&_0x34ef1b['hasOwnProperty'](_0x327b50(0x278))){const {clientip:_0x2a3a93}=_0x34ef1b;return _0x1f7898==_0x2a3a93?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x34ef1b['hasOwnProperty'](_0x327b50(0x24a))&&_0x34ef1b[_0x327b50(0x279)]('clientip')){const {username:_0x33bf56,clientip:_0x1879f8}=_0x34ef1b;return settings['bbUsername']==_0x33bf56&&_0x1f7898==_0x1879f8?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x327b50(0x1f9)};}}},generateLoginToken=_0x59abb3=>{const _0xaf229f=_0x391bd5;if(_0x59abb3){const _0x3f5666=devices[_0x59abb3]['ip'];return jwt['sign']({'username':settings[_0xaf229f(0x2ab)],'clientip':_0x3f5666},secure[_0xaf229f(0x287)]+_0x59abb3,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3bdc0b=>{const _0x3c4034=_0x391bd5;if(_0x3bdc0b){const _0x2bd9c8=devices[_0x3bdc0b]['ip'];return jwt['sign']({'clientip':_0x2bd9c8},secure[_0x3c4034(0x287)]+_0x3bdc0b,{'expiresIn':devices[_0x3bdc0b][_0x3c4034(0x19c)][_0x3c4034(0x13d)]*0x3c});}else return![];},telegramIpApproved=_0x3de42c=>{const _0x149138=_0x391bd5;let _0x2234d5=![];return devices[_0x3de42c][_0x149138(0x19c)]&&devices[_0x3de42c][_0x149138(0x19c)][_0x149138(0x13d)]!=_0x149138(0x18a)&&(_0x2234d5=devices[_0x3de42c][_0x149138(0x19c)][_0x149138(0x278)]==devices[_0x3de42c]['ip']&&new Date()[_0x149138(0x230)]()-devices[_0x3de42c][_0x149138(0x19c)][_0x149138(0x17b)]<devices[_0x3de42c][_0x149138(0x19c)]['expiry']*0x3c*0x3e8),_0x2234d5;},telegram2FaApproved=_0x9e5edd=>{const _0x252454=_0x391bd5;let _0x26228f=![];return devices[_0x9e5edd][_0x252454(0x123)]&&devices[_0x9e5edd][_0x252454(0x123)][_0x252454(0x13d)]!=_0x252454(0x18a)&&(_0x26228f=devices[_0x9e5edd][_0x252454(0x123)][_0x252454(0x278)]==devices[_0x9e5edd]['ip']&&new Date()[_0x252454(0x230)]()-devices[_0x9e5edd][_0x252454(0x123)][_0x252454(0x17b)]<devices[_0x9e5edd][_0x252454(0x123)][_0x252454(0x13d)]*0x3c*0x3e8),_0x26228f;},normalizeIP=_0x288766=>{const _0x5b42df=_0x391bd5;let _0x511f19=null,_0x2c1a75=null;if(ipaddr[_0x5b42df(0xe6)](_0x288766)){const _0x11b2d8=ipaddr[_0x5b42df(0x25e)](_0x288766);_0x11b2d8[_0x5b42df(0x219)]()===_0x5b42df(0x144)?(_0x11b2d8[_0x5b42df(0x1ee)]()&&(_0x511f19=_0x11b2d8[_0x5b42df(0x193)]()[_0x5b42df(0x1c1)]()),_0x2c1a75=_0x11b2d8['toString']()):(_0x511f19=_0x11b2d8[_0x5b42df(0x1c1)](),_0x2c1a75=_0x11b2d8['toIPv4MappedAddress']()[_0x5b42df(0x1c1)]());}return{'show':_0x511f19?_0x511f19:_0x2c1a75,'store':_0x2c1a75};};function formatDate(_0x2f93a0){const _0x20d08a=_0x391bd5;return _0x2f93a0[_0x20d08a(0xf7)]()+'/'+(_0x2f93a0['getMonth']()+0x1)[_0x20d08a(0x1c1)]()['padStart'](0x2,'0')+'/'+_0x2f93a0[_0x20d08a(0x177)]()['toString']()[_0x20d08a(0x13e)](0x2,'0')+'\x20'+_0x2f93a0[_0x20d08a(0x1bf)]()[_0x20d08a(0x1c1)]()[_0x20d08a(0x13e)](0x2,'0')+':'+_0x2f93a0['getMinutes']()[_0x20d08a(0x1c1)]()[_0x20d08a(0x13e)](0x2,'0')+':'+_0x2f93a0[_0x20d08a(0x150)]()[_0x20d08a(0x1c1)]()[_0x20d08a(0x13e)](0x2,'0');}function sleep(_0x23d5e3){return new Promise(_0xa54e89=>setTimeout(_0xa54e89,_0x23d5e3));}