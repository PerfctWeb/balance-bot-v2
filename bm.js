const _0x522534=_0x54d7;(function(_0x6d413,_0x54c93f){const _0x290253=_0x54d7,_0x4c1e6d=_0x6d413();while(!![]){try{const _0x2ce3a4=parseInt(_0x290253(0x2cc))/0x1*(-parseInt(_0x290253(0x168))/0x2)+-parseInt(_0x290253(0x1d4))/0x3+parseInt(_0x290253(0x263))/0x4*(parseInt(_0x290253(0x12c))/0x5)+parseInt(_0x290253(0x1e5))/0x6+parseInt(_0x290253(0x2ae))/0x7+parseInt(_0x290253(0x197))/0x8+parseInt(_0x290253(0x1fe))/0x9*(parseInt(_0x290253(0x15c))/0xa);if(_0x2ce3a4===_0x54c93f)break;else _0x4c1e6d['push'](_0x4c1e6d['shift']());}catch(_0x55dfc3){_0x4c1e6d['push'](_0x4c1e6d['shift']());}}}(_0x4fe4,0x6183a));const _0x1c7687=function(){let _0x6e1729=!![];return function(_0x3bb9d8,_0x3ee932){const _0x3eb7e6=_0x6e1729?function(){const _0x2d0057=_0x54d7;if(_0x3ee932){const _0x164c3c=_0x3ee932[_0x2d0057(0x1b8)](_0x3bb9d8,arguments);return _0x3ee932=null,_0x164c3c;}}:function(){};return _0x6e1729=![],_0x3eb7e6;};}(),_0x18e800=_0x1c7687(this,function(){const _0x548178=_0x54d7;return _0x18e800[_0x548178(0x188)]()[_0x548178(0x218)]('(((.+)+)+)+$')[_0x548178(0x188)]()[_0x548178(0x14f)](_0x18e800)[_0x548178(0x218)](_0x548178(0x13a));});_0x18e800();'use strict';process['env'][_0x522534(0x271)]=0x1;const childProcess=require(_0x522534(0x241)),fs=require('fs'),fns=require(_0x522534(0x154)),low=require(_0x522534(0x283)),FileSync=require(_0x522534(0x235)),path=require(_0x522534(0x280)),crypto=require(_0x522534(0x2c8)),Crypt=require('hybrid-crypto-js')[_0x522534(0x242)],RSA=require(_0x522534(0x222))[_0x522534(0x14c)],bcrypt=require(_0x522534(0x26e)),jwt=require('jsonwebtoken'),ipaddr=require(_0x522534(0x226)),argv=require(_0x522534(0x2d7))(process['argv']['slice'](0x2))[_0x522534(0x138)],uuidRandom=require(_0x522534(0x12e)),TelegramBot=require(_0x522534(0x247)),Mixpanel=require('mixpanel'),axios=require(_0x522534(0x2c6)),{GraphQLClient,gql}=require(_0x522534(0x281)),util=require('util'),fileUpload=require('express-fileupload'),PORT=argv[_0x522534(0x237)]||_0x522534(0x142),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x522534(0x262)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x522534(0x220)),process[_0x522534(0x1d0)](0x1));const HOST=argv[_0x522534(0x27c)]||null,userID=argv[_0x522534(0x21a)]||'';let bbpath=_0x522534(0x230),bbpath2='';const botfile=_0x522534(0x25b),configfile=_0x522534(0x1f1),settingsfile=_0x522534(0x299),securefile=_0x522534(0x2d2);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x522534(0x289)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x522534(0x2ca),logspath=userID?bbpath+_0x522534(0x282)+userID+'/':bbpath+_0x522534(0x282),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x522534(0x238),loggerfile=fs[_0x522534(0x23b)](logspath+_0x522534(0x23a),{'flags':'a'}),temppath=userID?bbpath+_0x522534(0x2bb)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs[_0x522534(0x2a3)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x522534(0x2a3)](configbackuppath);!fs[_0x522534(0x17b)](logspath)&&fs[_0x522534(0x2a3)](logspath);!fs[_0x522534(0x17b)](zippath)&&fs[_0x522534(0x2a3)](zippath);!fs[_0x522534(0x17b)](temppath)&&fs[_0x522534(0x2a3)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x522534(0x186)]({'bots':[]})[_0x522534(0x18d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x522534(0x186)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x522534(0x1a5)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x522534(0x18d)]();let crypt=new Crypt({'md':_0x522534(0x209),'rsaStandard':_0x522534(0x1a3)});const saltRounds=0xa,mixpanel=Mixpanel[_0x522534(0x227)](_0x522534(0x1c4),{'host':_0x522534(0x254)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x522534(0x2cd)]&&settings['telegramToken']!=''&&settings[_0x522534(0x180)]&&settings[_0x522534(0x180)]!='')initTelegram();const logger={'screen':_0x56292c=>{const _0x2afd5c=_0x522534;console[_0x2afd5c(0x262)](_0x56292c);},'simple':_0xae919b=>{const _0x34ea59=_0x522534;console[_0x34ea59(0x262)](_0xae919b),loggerfile[_0x34ea59(0x18d)](util['format'](_0xae919b)+'\x0a');},'full':async _0x2d0885=>{const _0xa81305=_0x522534,_0x3b9767=getTimeStamp()+_0xa81305(0x23e)+_0x2d0885;console[_0xa81305(0x262)](_0x3b9767),loggerfile[_0xa81305(0x18d)](util['format'](_0x3b9767)+'\x0a');if(tgBot&&settings[_0xa81305(0x13d)]&&settings['telegramEvents']!=_0xa81305(0x1b3))await tgBot[_0xa81305(0x169)](settings[_0xa81305(0x13d)],_0xa81305(0x1ae)+_0x2d0885)[_0xa81305(0x2ad)](_0x4829cf=>{telegramError(_0x4829cf);});}};process['on'](_0x522534(0x2d6),function(_0x3ba428){const _0x4c9536=_0x522534;logger[_0x4c9536(0x179)](_0x3ba428);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x522534(0x26a))[_0x522534(0x2d1)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x522534(0x211)),app=express(),http=require(_0x522534(0x1e2))[_0x522534(0x22c)](app);app[_0x522534(0x1d7)](fileUpload({'useTempFiles':!![]})),app[_0x522534(0x14d)](_0x522534(0x259),async(_0x40a334,_0xae4c96)=>{const _0x462b97=_0x522534,_0x3cea72=_0x40a334[_0x462b97(0x1c0)][_0x462b97(0x2b1)],_0x1384e8=getClientsWithBotID('botmanager'),_0x5f4bf9=_0x40a334['headers'][_0x462b97(0x1fa)],_0x42994d=timelyDecrypt(_0x5f4bf9,![]),_0x688680=_0x1384e8[_0x462b97(0x1ea)](_0x20d9ad=>_0x20d9ad['uuid']==_0x42994d);if(_0x688680){const _0xc30706=normalizeIP(_0x40a334[_0x462b97(0x1c8)][_0x462b97(0x1dc)])[_0x462b97(0x136)],_0x2c4db4=_0x40a334[_0x462b97(0x236)][_0x462b97(0x16d)];if(validateAccess(_0x2c4db4,_0x42994d,_0xc30706)[_0x462b97(0x140)])await zipFiles(_0x3cea72),_0xae4c96[_0x462b97(0x1cf)](zippath+(_0x3cea72+'.zip'),_0x390488=>{const _0x44e9b7=_0x462b97;_0x390488&&(logger[_0x44e9b7(0x277)](_0x44e9b7(0x239)+_0x3cea72),logger['simple'](_0x390488));});else logger[_0x462b97(0x277)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3cea72+_0x462b97(0x198));}else logger[_0x462b97(0x277)](_0x462b97(0x134)+_0x3cea72+_0x462b97(0x1a2));}),app[_0x522534(0x19e)]('/upload-backup',async(_0x48bea3,_0x397b8f)=>{const _0x1f5a9a=_0x522534,_0x42588a=getClientsWithBotID(_0x1f5a9a(0x18a)),_0x1d816d=_0x48bea3[_0x1f5a9a(0x236)][_0x1f5a9a(0x1fa)],_0x10d220=timelyDecrypt(_0x1d816d,![]),_0x2ab13d=_0x42588a[_0x1f5a9a(0x1ea)](_0x8bff09=>_0x8bff09[_0x1f5a9a(0x1fa)]==_0x10d220);if(_0x2ab13d){const _0x492aca=normalizeIP(_0x48bea3[_0x1f5a9a(0x1c8)]['remoteAddress'])[_0x1f5a9a(0x136)],_0x32a3f0=_0x48bea3['headers'][_0x1f5a9a(0x16d)];if(validateAccess(_0x32a3f0,_0x10d220,_0x492aca)[_0x1f5a9a(0x140)]){if(_0x48bea3[_0x1f5a9a(0x12d)]){const _0x17e3d2=_0x48bea3[_0x1f5a9a(0x12d)][_0x1f5a9a(0x287)];await _0x17e3d2['mv'](temppath+_0x17e3d2[_0x1f5a9a(0x2cf)]),_0x397b8f[_0x1f5a9a(0x212)]({'status':!![],'message':_0x1f5a9a(0x181)});const _0x5b1b82=getBotsWithMode();_0x5b1b82[_0x1f5a9a(0x1b7)]>0x0?confirmRestore(temppath,_0x17e3d2[_0x1f5a9a(0x2cf)]):unzipFile(temppath,_0x17e3d2[_0x1f5a9a(0x2cf)]);}}else logger[_0x1f5a9a(0x277)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1f5a9a(0x277)](_0x1f5a9a(0x2b7));}),app[_0x522534(0x1d7)](express['static'](path[_0x522534(0x1ab)](__dirname,bbpath2,_0x522534(0x250)))),app[_0x522534(0x1d7)](express[_0x522534(0x15b)](path[_0x522534(0x1ab)](__dirname,bbpath2,_0x522534(0x12b)))),app[_0x522534(0x14d)]('/',function(_0x376bb9,_0x4c0d52){const _0x39befb=_0x522534;_0x4c0d52[_0x39befb(0x131)](path[_0x39befb(0x1ab)](__dirname,bbpath2,_0x39befb(0x250),'index.html'));}),app[_0x522534(0x14d)](_0x522534(0x24a),function(_0x1b228d,_0x1c5f60){const _0x222b9b=_0x522534;_0x1c5f60[_0x222b9b(0x131)](path['join'](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x522534(0x1bb),(_0x4541eb,_0x543baf)=>{const _0x15e227=_0x522534;_0x543baf[_0x15e227(0x131)](path[_0x15e227(0x1ab)](__dirname,bbpath2,_0x15e227(0x12b),_0x15e227(0x1f5)));}),app[_0x522534(0x14d)]('/:bot/performance',(_0x2b2315,_0x57cd01)=>{const _0x3f9641=_0x522534;_0x57cd01['sendFile'](path[_0x3f9641(0x1ab)](__dirname,bbpath2,_0x3f9641(0x12b),_0x3f9641(0x1f5)));}),app['get'](_0x522534(0x25a),(_0x5116cf,_0x1933d4)=>{const _0x11902d=_0x522534;_0x1933d4[_0x11902d(0x131)](path[_0x11902d(0x1ab)](__dirname,bbpath2,_0x11902d(0x12b),_0x11902d(0x1f5)));}),app[_0x522534(0x14d)](_0x522534(0x196),(_0x2bbd9e,_0x520929)=>{const _0x5674dc=_0x522534;_0x520929[_0x5674dc(0x131)](path[_0x5674dc(0x1ab)](__dirname,bbpath2,_0x5674dc(0x12b),_0x5674dc(0x1f5)));}),app[_0x522534(0x14d)](_0x522534(0x208),(_0x19a31f,_0x538f93)=>{const _0x2a5782=_0x522534;_0x538f93[_0x2a5782(0x131)](path[_0x2a5782(0x1ab)](__dirname,bbpath2,'build',_0x2a5782(0x1f5)));}),app[_0x522534(0x14d)](_0x522534(0x19b),(_0x30a8ac,_0x3dd227)=>{const _0x28c05f=_0x522534;_0x3dd227[_0x28c05f(0x131)](path['join'](__dirname,bbpath2,_0x28c05f(0x12b),_0x28c05f(0x1f5)));});if(HOST)http[_0x522534(0x1cd)](PORT,HOST);else http[_0x522534(0x1cd)](PORT);const io=require(_0x522534(0x148))(http,{});function _0x54d7(_0x36d5b6,_0x1692f3){const _0x48d778=_0x4fe4();return _0x54d7=function(_0x18e800,_0x1c7687){_0x18e800=_0x18e800-0x12b;let _0x4fe4f6=_0x48d778[_0x18e800];return _0x4fe4f6;},_0x54d7(_0x36d5b6,_0x1692f3);}init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x32b861=_0x522534;logger[_0x32b861(0x179)](''),logger[_0x32b861(0x179)]('-----------------------------------------------------------------------------------'),await logger['full'](_0x32b861(0x297)+PORT),logger[_0x32b861(0x179)](_0x32b861(0x1da));if(config[_0x32b861(0x1b7)]!=0x0)for(const _0x13985c of config){if(_0x13985c[_0x32b861(0x269)]==_0x32b861(0x273)||_0x13985c[_0x32b861(0x269)]==_0x32b861(0x132))await logger[_0x32b861(0x277)](_0x32b861(0x213)+_0x13985c[_0x32b861(0x255)]+'\x20|\x20'+_0x13985c[_0x32b861(0x21c)]),startBot([_0x13985c[_0x32b861(0x255)],userID],{'cwd':bbpath},function(_0x86b582){if(_0x86b582)logger['full'](_0x86b582);});else(_0x13985c[_0x32b861(0x269)]=='disabled'||_0x13985c['status']==_0x32b861(0x1f7))&&await logger[_0x32b861(0x277)](_0x32b861(0x2aa)+_0x13985c['botID']+_0x32b861(0x258)+_0x13985c[_0x32b861(0x21c)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x32b861(0x179)]('-----------------------------------------------------------------------------------'),logger[_0x32b861(0x179)]('');}function startSocket(){io['on']('connection',_0x5589bb=>{const _0x520558=_0x54d7;let _0x34973b,_0x156f5f,_0x4e85f5,_0xaff05a,_0x543120;const _0x1f8f1d=_0x5589bb['handshake']['headers'][_0x520558(0x29f)];_0x156f5f=_0x1f8f1d[_0x520558(0x173)](/bot[0-9]{3}/);if(_0x156f5f)_0x4e85f5=_0x156f5f[0x0][_0x520558(0x173)](/[0-9]{3}/);if(_0x4e85f5)_0x34973b=_0x4e85f5[0x0];else _0x34973b=_0x520558(0x18a);const _0x595b23=_0x5589bb[_0x520558(0x27d)][_0x520558(0x1f9)][_0x520558(0x251)];if(!_0x595b23)_0x5589bb[_0x520558(0x144)]('status',{'publicKey':secure[_0x520558(0x23c)]});else{_0xaff05a=timelyDecrypt(_0x595b23,![]);if(!_0xaff05a)_0x5589bb[_0x520558(0x144)](_0x520558(0x269),{'publicKey':secure[_0x520558(0x23c)]});else{_0x543120=normalizeIP(_0x5589bb[_0x520558(0x2a2)][_0x520558(0x1dc)])[_0x520558(0x136)];if(!devices[_0xaff05a])devices[_0xaff05a]={'uuid':_0xaff05a,'access':{'token':null}};devices[_0xaff05a]['ip']=_0x543120;const _0x5e3671=addClient(_0x5589bb['id'],_0xaff05a,_0x34973b);setAccess(_0x5e3671),emitMessages(),_0x5589bb['on']('login',_0x572c83=>{const _0x36395d=_0x520558,_0x549f91=timelyDecrypt(_0x572c83[_0x36395d(0x1a9)]);if(_0x549f91){_0x572c83={'username':_0x572c83[_0x36395d(0x160)],'password':_0x549f91},devices[_0xaff05a][_0x36395d(0x2b0)]=validateCredentials(_0x572c83,_0xaff05a);if(devices[_0xaff05a]['access'][_0x36395d(0x140)]==![]&&devices[_0xaff05a][_0x36395d(0x2b0)][_0x36395d(0x285)]=='2FA\x20login\x20required')_0x5589bb['emit'](_0x36395d(0x269),{'access':devices[_0xaff05a][_0x36395d(0x2b0)]}),loginAccess2FA(_0xaff05a,_0x543120);else{if(devices[_0xaff05a][_0x36395d(0x2b0)][_0x36395d(0x140)]==![]&&devices[_0xaff05a][_0x36395d(0x2b0)][_0x36395d(0x285)]==_0x36395d(0x1bf))_0x5589bb[_0x36395d(0x144)](_0x36395d(0x269),{'access':devices[_0xaff05a][_0x36395d(0x2b0)]});else devices[_0xaff05a]['access'][_0x36395d(0x140)]&&devices[_0xaff05a]['access'][_0x36395d(0x285)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0xaff05a)[_0x36395d(0x253)](_0x2e4534=>{setAccess(_0x2e4534);}),setTokenRefresh(_0xaff05a),setSessionTimeout(_0x36395d(0x137),_0xaff05a));}}else logger[_0x36395d(0x277)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x5589bb['on']('reset-password',()=>{resetPassword();}),_0x5589bb['on'](_0x520558(0x166),_0x16dc0d=>{removeClient(_0x5589bb['id']);}),_0x34973b=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x271d11){const _0x13809d=_0x522534;if(_0x271d11!=_0x13809d(0x18a)&&config[_0x13809d(0x1e4)]!=''){if(pid[_0x271d11])pid[_0x271d11]['send']({'function':_0x13809d(0x141),'args':null});}}function reloadBotManager(){const _0x19f3fb=_0x522534;getClientsWithBotID('botmanager')[_0x19f3fb(0x253)](_0x476d3d=>{const _0xd05566=_0x19f3fb;getSocket(_0x476d3d['id'])['emit']('status',{'access':{'allow':![],'reason':_0xd05566(0x2a9),'token':null}});});}function getSocket(_0xa67325){const _0x1b9c84=_0x522534;return io[_0x1b9c84(0x1e3)][_0x1b9c84(0x1e3)][_0x1b9c84(0x14d)](_0xa67325);}function setAccess(_0x187cba){const _0x1dc1fa=_0x522534,_0x1ec576=getSocket(_0x187cba['id']),_0x1cb97e=_0x187cba[_0x1dc1fa(0x1fa)],_0x33735b=_0x187cba[_0x1dc1fa(0x2b4)];devices[_0x1cb97e][_0x1dc1fa(0x2b0)]=validateAccess(devices[_0x1cb97e][_0x1dc1fa(0x2b0)][_0x1dc1fa(0x1b5)],_0x1cb97e),_0x1ec576[_0x1dc1fa(0x1ab)](_0x1cb97e);if(devices[_0x1cb97e][_0x1dc1fa(0x2b0)]['allow']){_0x1ec576[_0x1dc1fa(0x1ab)](_0x33735b);if(_0x33735b==_0x1dc1fa(0x18a))initializeSocketBotManager(_0x1ec576);else initializeSocketBot(_0x1ec576);initClient(_0x33735b);}devices[_0x1cb97e][_0x1dc1fa(0x2b0)][_0x1dc1fa(0x1b5)]&&devices[_0x1cb97e][_0x1dc1fa(0x2b0)][_0x1dc1fa(0x285)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x1dc1fa(0x1c2),_0x1cb97e),devices[_0x1cb97e]['access'][_0x1dc1fa(0x1b5)]&&devices[_0x1cb97e][_0x1dc1fa(0x2b0)]['reason']==_0x1dc1fa(0x232)&&setSessionTimeout('login',_0x1cb97e),_0x1ec576[_0x1dc1fa(0x144)]('status',{'status':_0x187cba[_0x1dc1fa(0x246)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1cb97e]['access'],'externalip':devices[_0x1cb97e]['ip'],'publicKey':secure[_0x1dc1fa(0x23c)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x1cb97e]['access'][_0x1dc1fa(0x140)]==![]&&devices[_0x1cb97e][_0x1dc1fa(0x2b0)][_0x1dc1fa(0x285)]==_0x1dc1fa(0x23f)&&temporaryAccess2FA(_0x1cb97e,devices[_0x1cb97e]['ip']);}function setSessionTimeout(_0x56778f,_0x17a00b){const _0x7adb41=_0x522534;let _0x5bdd4a;if(_0x56778f=='login')_0x5bdd4a=loginExpiry*0x3c*0x3e8;else _0x5bdd4a=devices[_0x17a00b][_0x7adb41(0x216)][_0x7adb41(0x274)]*0x3c*0x3e8-(new Date()[_0x7adb41(0x252)]()-devices[_0x17a00b][_0x7adb41(0x216)][_0x7adb41(0x176)]);if(devices[_0x17a00b][_0x7adb41(0x20f)])clearTimeout(devices[_0x17a00b][_0x7adb41(0x20f)]);devices[_0x17a00b][_0x7adb41(0x20f)]=setTimeout(()=>{const _0x2643d3=_0x7adb41;if(devices[_0x17a00b][_0x2643d3(0x1e6)])clearTimeout(devices[_0x17a00b][_0x2643d3(0x1e6)]);removeSocketListeners(_0x17a00b),addBlacklist(_0x17a00b),devices[_0x17a00b][_0x2643d3(0x216)]=null,devices[_0x17a00b]['telegram2FaApproval']=null,devices[_0x17a00b][_0x2643d3(0x2b0)][_0x2643d3(0x1b5)]=null,devices[_0x17a00b][_0x2643d3(0x2b0)]=validateAccess(devices[_0x17a00b][_0x2643d3(0x2b0)][_0x2643d3(0x1b5)],_0x17a00b),!(devices[_0x17a00b][_0x2643d3(0x2b0)][_0x2643d3(0x140)]&&devices[_0x17a00b]['access']['reason']==_0x2643d3(0x27e))&&(_0x56778f==_0x2643d3(0x137)?io['to'](_0x17a00b)[_0x2643d3(0x144)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x17a00b)[_0x2643d3(0x144)](_0x2643d3(0x269),{'access':{'allow':![],'reason':_0x2643d3(0x26b),'token':null}})),devices[_0x17a00b]['access'][_0x2643d3(0x1b5)]=null;},_0x5bdd4a);}function setTokenRefresh(_0x22823d){const _0x42cae0=_0x522534;if(devices[_0x22823d][_0x42cae0(0x1e6)])clearTimeout(devices[_0x22823d]['pidRefreshToken']);devices[_0x22823d][_0x42cae0(0x1e6)]=setTimeout(()=>{const _0x1ec8fb=_0x42cae0;getClientsWithUuid(_0x22823d)[_0x1ec8fb(0x1b7)]!=0x0?(devices[_0x22823d][_0x1ec8fb(0x2b0)]=refreshToken(_0x22823d),io['to'](_0x22823d)[_0x1ec8fb(0x144)]('status',{'status':_0x1ec8fb(0x26f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x22823d][_0x1ec8fb(0x2b0)],'externalip':devices[_0x22823d]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x22823d)):clearTimeout(devices[_0x22823d][_0x1ec8fb(0x1e6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x28b4cb){const _0x25a37f=_0x522534,_0x68dda2=getClient(_0x28b4cb['id'])['uuid'];_0x28b4cb[_0x25a37f(0x144)](_0x25a37f(0x27a),config),_0x28b4cb[_0x25a37f(0x144)]('settings',cleanSettings()),_0x28b4cb['on'](_0x25a37f(0x1c7),_0x25f0ab=>{const _0x456ced=_0x25a37f;if(validateAccess(_0x25f0ab,_0x68dda2)['allow'])addBot();else logger['full'](_0x456ced(0x167));}),_0x28b4cb['on']('update-bot',(_0x109d3c,_0x47b985)=>{const _0x2cdcca=_0x25a37f;if(validateAccess(_0x47b985,_0x68dda2)[_0x2cdcca(0x140)])toggleBot(_0x109d3c[_0x2cdcca(0x255)],_0x109d3c[_0x2cdcca(0x269)],_0x109d3c['live']);else logger['full'](_0x2cdcca(0x228));}),_0x28b4cb['on'](_0x25a37f(0x13c),(_0x2800cc,_0x170066)=>{const _0x197e13=_0x25a37f;if(validateAccess(_0x170066,_0x68dda2)[_0x197e13(0x140)])toggleBotMode(_0x2800cc);else logger[_0x197e13(0x277)](_0x197e13(0x228));}),_0x28b4cb['on'](_0x25a37f(0x29e),(_0x13354b,_0x16a324)=>{const _0x32dbb4=_0x25a37f;if(validateAccess(_0x16a324,_0x68dda2)[_0x32dbb4(0x140)])deleteBot(_0x13354b);else logger[_0x32dbb4(0x277)](_0x32dbb4(0x1b2));}),_0x28b4cb['on'](_0x25a37f(0x219),(_0x216ee3,_0x2d56d9)=>{const _0x1afcaa=_0x25a37f;if(validateAccess(_0x2d56d9,_0x68dda2)[_0x1afcaa(0x140)])storeSettings(_0x216ee3,!![]);else logger[_0x1afcaa(0x277)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x28b4cb['on'](_0x25a37f(0x1ba),_0x3e6cf0=>{const _0x5b117a=_0x25a37f;if(validateAccess(_0x3e6cf0,_0x68dda2)[_0x5b117a(0x140)])updateBB();else logger[_0x5b117a(0x277)](_0x5b117a(0x2b6));}),_0x28b4cb['on'](_0x25a37f(0x16c),_0x4066ba=>{const _0x3bd824=_0x25a37f;if(validateAccess(_0x4066ba,_0x68dda2)[_0x3bd824(0x140)])getMessages();else logger[_0x3bd824(0x277)](_0x3bd824(0x27b));}),_0x28b4cb['on'](_0x25a37f(0x1f4),(_0x4089bb,_0x504f28)=>{const _0xe671fb=_0x25a37f;if(validateAccess(_0x504f28,_0x68dda2)['allow'])confirmMessage(_0x4089bb);else logger[_0xe671fb(0x277)](_0xe671fb(0x1d2));}),_0x28b4cb['on']('logout',_0x3bf8bc=>{const _0x5ad736=_0x25a37f;if(validateAccess(_0x3bf8bc,_0x68dda2)['allow']){if(devices[_0x68dda2][_0x5ad736(0x1e6)])clearTimeout(devices[_0x68dda2][_0x5ad736(0x1e6)]);if(devices[_0x68dda2][_0x5ad736(0x20f)])clearTimeout(devices[_0x68dda2]['pidExpireLogin']);removeSocketListeners(getClient(_0x28b4cb['id'])[_0x5ad736(0x1fa)]),addBlacklist(_0x68dda2),devices[_0x68dda2][_0x5ad736(0x216)]=null,devices[_0x68dda2][_0x5ad736(0x1ee)]=null,devices[_0x68dda2][_0x5ad736(0x2b0)][_0x5ad736(0x1b5)]=null,io['to'](getClient(_0x28b4cb['id'])[_0x5ad736(0x1fa)])[_0x5ad736(0x144)](_0x5ad736(0x269),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x5ad736(0x277)](_0x5ad736(0x191));});}function initializeSocketBot(_0x29f20f){const _0x255cc1=_0x522534,_0xc87435=getClient(_0x29f20f['id'])[_0x255cc1(0x2b4)],_0x22c24f=getClient(_0x29f20f['id'])['uuid'];_0x29f20f['on'](_0x255cc1(0x2a5),(_0x9ff9ec,_0x188ebd)=>{const _0x4ffc02=_0x255cc1;if(validateAccess(_0x188ebd,_0x22c24f)[_0x4ffc02(0x140)]){if(pid[_0xc87435])pid[_0xc87435][_0x4ffc02(0x212)]({'function':_0x4ffc02(0x1f2),'args':_0x9ff9ec});}else logger['full'](_0x4ffc02(0x276));}),_0x29f20f['on'](_0x255cc1(0x225),(_0x5c540e,_0x4825da)=>{const _0x131e8d=_0x255cc1;if(validateAccess(_0x4825da,_0x22c24f)[_0x131e8d(0x140)]){if(pid[_0xc87435])pid[_0xc87435][_0x131e8d(0x212)]({'function':_0x131e8d(0x22d),'args':_0x5c540e});}else logger[_0x131e8d(0x277)](_0x131e8d(0x2bf));}),_0x29f20f['on']('get-portfolio',(_0x3e9a5f,_0x5b6a02)=>{const _0x5592b7=_0x255cc1;if(validateAccess(_0x5b6a02,_0x22c24f)[_0x5592b7(0x140)]){if(pid[_0xc87435])pid[_0xc87435][_0x5592b7(0x212)]({'function':_0x5592b7(0x1c5),'args':_0x3e9a5f});}else logger[_0x5592b7(0x277)](_0x5592b7(0x14a));}),_0x29f20f['on'](_0x255cc1(0x29a),(_0x598f93,_0x540a4d)=>{const _0x1992e3=_0x255cc1;if(validateAccess(_0x540a4d,_0x22c24f)[_0x1992e3(0x140)]){if(pid[_0xc87435])pid[_0xc87435]['send']({'function':_0x1992e3(0x243),'args':_0x598f93});}else logger[_0x1992e3(0x277)](_0x1992e3(0x1be));}),_0x29f20f['on'](_0x255cc1(0x29d),(_0x4886ab,_0x593865)=>{const _0x33d794=_0x255cc1;if(validateAccess(_0x593865,_0x22c24f)[_0x33d794(0x140)]){if(pid[_0xc87435])pid[_0xc87435]['send']({'function':_0x33d794(0x2a0),'args':_0x4886ab});}else logger[_0x33d794(0x277)](_0x33d794(0x1d9));}),_0x29f20f['on']('get-starting-balances',_0x42fc37=>{const _0x3551c9=_0x255cc1;if(validateAccess(_0x42fc37,_0x22c24f)[_0x3551c9(0x140)]){if(pid[_0xc87435])pid[_0xc87435]['send']({'function':_0x3551c9(0x1aa),'args':null});}else logger['full'](_0x3551c9(0x182));}),_0x29f20f['on'](_0x255cc1(0x214),(_0x5302d6,_0x474e13)=>{const _0x1612e4=_0x255cc1;if(validateAccess(_0x474e13,_0x22c24f)['allow']){if(pid[_0xc87435])pid[_0xc87435][_0x1612e4(0x212)]({'function':_0x1612e4(0x194),'args':_0x5302d6});}else logger[_0x1612e4(0x277)](_0x1612e4(0x171));}),_0x29f20f['on']('cancel-loading',_0x168c35=>{const _0xaa81ae=_0x255cc1;if(validateAccess(_0x168c35,_0x22c24f)[_0xaa81ae(0x140)]){if(pid[_0xc87435])pid[_0xc87435][_0xaa81ae(0x212)]({'function':'cancelLoading','args':null});}else logger[_0xaa81ae(0x277)](_0xaa81ae(0x163));}),_0x29f20f['on'](_0x255cc1(0x1d5),_0x476216=>{const _0x31b005=_0x255cc1;if(validateAccess(_0x476216,_0x22c24f)[_0x31b005(0x140)]){if(pid[_0xc87435])pid[_0xc87435][_0x31b005(0x212)]({'function':'showConfig','args':null});}else logger[_0x31b005(0x277)](_0x31b005(0x13b));}),_0x29f20f['on'](_0x255cc1(0x1ba),_0x4c6443=>{const _0x4424fc=_0x255cc1;if(validateAccess(_0x4c6443,_0x22c24f)[_0x4424fc(0x140)])updateBB();else logger[_0x4424fc(0x277)](_0x4424fc(0x2b6));}),_0x29f20f['on'](_0x255cc1(0x16c),_0x34f64b=>{const _0x19f6d4=_0x255cc1;if(validateAccess(_0x34f64b,_0x22c24f)['allow'])getMessages();else logger[_0x19f6d4(0x277)](_0x19f6d4(0x27b));}),_0x29f20f['on']('confirm-message',(_0x2acda6,_0x384cf1)=>{const _0x42b224=_0x255cc1;if(validateAccess(_0x384cf1,_0x22c24f)[_0x42b224(0x140)])confirmMessage(_0x2acda6);else logger[_0x42b224(0x277)](_0x42b224(0x1d2));}),_0x29f20f['on']('logout',_0x4d2a42=>{const _0x533f0b=_0x255cc1;if(validateAccess(_0x4d2a42,_0x22c24f)[_0x533f0b(0x140)]){if(devices[_0x22c24f][_0x533f0b(0x1e6)])clearTimeout(devices[_0x22c24f]['pidRefreshToken']);if(devices[_0x22c24f][_0x533f0b(0x20f)])clearTimeout(devices[_0x22c24f][_0x533f0b(0x20f)]);removeSocketListeners(getClient(_0x29f20f['id'])[_0x533f0b(0x1fa)]),addBlacklist(_0x22c24f),devices[_0x22c24f][_0x533f0b(0x216)]=null,devices[_0x22c24f][_0x533f0b(0x1ee)]=null,devices[_0x22c24f][_0x533f0b(0x2b0)]['token']=null,io['to'](getClient(_0x29f20f['id'])[_0x533f0b(0x1fa)])[_0x533f0b(0x144)]('status',{'access':{'allow':![],'reason':_0x533f0b(0x21b),'token':null}});}else logger[_0x533f0b(0x277)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1c5b60){const _0x111ac5=_0x522534;getClientsWithUuid(_0x1c5b60)[_0x111ac5(0x253)](_0x564745=>{const _0x1d5d2e=_0x111ac5;getSocket(_0x564745['id'])[_0x1d5d2e(0x1e1)]();});}function cleanSettings(){const _0x17c504=_0x522534;let _0x18044a=settings;return settings[_0x17c504(0x2cd)]&&settings[_0x17c504(0x2cd)]!=''&&(_0x18044a={..._0x18044a,'telegramToken':_0x17c504(0x2ac)}),settings['bbPassword']&&settings[_0x17c504(0x18c)]!=''&&(_0x18044a={..._0x18044a,'bbPassword':_0x17c504(0x2ac)}),(settings[_0x17c504(0x18c)]&&settings[_0x17c504(0x18c)]==_0x17c504(0x20e)||settings[_0x17c504(0x2cd)]&&settings['telegramToken']=='***')&&(_0x18044a={..._0x18044a,'restored':{'password':settings[_0x17c504(0x18c)]=='***','telegram':settings[_0x17c504(0x2cd)]==_0x17c504(0x20e)}}),_0x18044a;}function updateBB(){const _0x31110a=_0x522534;installingUpdate=!![],config['forEach'](_0x4b0948=>{const _0x37aac7=_0x54d7;restartBot(_0x4b0948[_0x37aac7(0x255)]);}),process[_0x31110a(0x212)]({'update':!![]},_0xfb3033=>{});}function startBot(_0x491f33,_0x2071fb,_0x3e6490){const _0x3f325b=_0x522534;let _0x53d4f6=![];const _0x2db9b0=_0x491f33[0x0];_0x2071fb={..._0x2071fb,'stdio':[_0x3f325b(0x1e0),_0x3f325b(0x1e0),'inherit','ipc']},pid[_0x2db9b0]=childProcess['fork'](botfile,_0x491f33,_0x2071fb),pid[_0x2db9b0]['on'](_0x3f325b(0x261),_0x1102fc=>{const _0x35abf3=_0x3f325b;switch(Object[_0x35abf3(0x22b)](_0x1102fc)[0x0]){case'botname':updateBotName(_0x2db9b0,_0x1102fc['botname']);break;case _0x35abf3(0x1af):updateBotManager();break;case _0x35abf3(0x269):updateStatus(_0x2db9b0,_0x1102fc['status']);break;case _0x35abf3(0x29b):updateLive(_0x2db9b0,_0x1102fc[_0x35abf3(0x29b)]);break;case _0x35abf3(0x294):updateLive(_0x2db9b0,_0x1102fc[_0x35abf3(0x294)]),io['to'](_0x2db9b0)[_0x35abf3(0x144)](_0x35abf3(0x269),{'access':{'allow':![],'reason':_0x35abf3(0x2a9),'token':null}});break;case _0x35abf3(0x1ef):_0x1102fc[_0x35abf3(0x1ef)]=='restart'&&restartBot(_0x2db9b0);_0x1102fc['stop']==_0x35abf3(0x2a8)&&toggleBot(_0x2db9b0,_0x35abf3(0x147),'stopped');break;case _0x35abf3(0x2ab):sendTelegram(_0x2db9b0,_0x1102fc[_0x35abf3(0x2ab)]);break;case _0x35abf3(0x165):sendTelegramMsg(_0x1102fc[_0x35abf3(0x165)]);break;case _0x35abf3(0x2a6):io['to'](_0x2db9b0)[_0x35abf3(0x144)](_0x1102fc[_0x35abf3(0x2a6)],_0x1102fc[_0x35abf3(0x1a6)]);break;}}),pid[_0x2db9b0]['on'](_0x3f325b(0x291),function(_0xe2a1cb){if(_0x53d4f6)return;_0x53d4f6=!![],_0x3e6490(_0xe2a1cb);}),pid[_0x2db9b0]['on']('exit',async function(_0x2a1ec1){const _0x12357e=_0x3f325b;if(installingUpdate)return;if(_0x53d4f6)return;_0x53d4f6=!![],_0x3e6490(null);const _0x53824d=dbConfig[_0x12357e(0x14d)](_0x12357e(0x27a))[_0x12357e(0x1ea)]({'botID':_0x2db9b0})[_0x12357e(0x2a7)]();_0x53824d&&(_0x53824d[_0x12357e(0x269)]==_0x12357e(0x273)||_0x53824d[_0x12357e(0x269)]=='new')&&(await sleep(0x3e8),updateLive(_0x2db9b0,_0x12357e(0x1f6)),logger['full'](_0x12357e(0x2a4)+_0x2db9b0),startBot([_0x2db9b0,userID],{'cwd':bbpath},function(_0x212678){if(_0x212678)logger['full'](_0x212678);}));});}function stopBot(_0x2ce1b2){const _0x266d90=_0x522534;getClientsWithBotID(_0x2ce1b2)[_0x266d90(0x253)](_0x2fd746=>{const _0x4f3fc3=_0x266d90;getSocket(_0x2fd746['id'])[_0x4f3fc3(0x166)](!![]),removeClient(_0x2fd746['id']);}),pid[_0x2ce1b2]&&(pid[_0x2ce1b2][_0x266d90(0x2a8)](),pid[_0x2ce1b2]=null);}function restartBot(_0x275ba0){if(pid[_0x275ba0])pid[_0x275ba0]['kill']();}function addBot(){const _0x3e9992=_0x522534;let _0x4c7494;for(let _0x34547f=0x1;_0x34547f<0x3e9;_0x34547f++){_0x4c7494=_0x34547f[_0x3e9992(0x188)]()[_0x3e9992(0x157)](0x3,'0');let _0x310453=config['find'](_0x44d5c0=>_0x44d5c0[_0x3e9992(0x255)]==_0x4c7494);if(!_0x310453)break;}if(_0x4c7494===_0x3e9992(0x12f)){logger[_0x3e9992(0x277)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x3e9992(0x277)](_0x3e9992(0x28b)+_0x4c7494),dbConfig[_0x3e9992(0x14d)](_0x3e9992(0x27a))[_0x3e9992(0x1df)]({'botID':_0x4c7494,'botname':'Bot\x20'+_0x4c7494,'status':_0x3e9992(0x132),'live':''})['write'](),startBot([_0x4c7494,userID],{'cwd':bbpath},function(_0x27c456){const _0xe72a94=_0x3e9992;if(_0x27c456)logger[_0xe72a94(0x277)](_0x27c456);}),config=getConfiguration(),io['to'](_0x3e9992(0x18a))['emit'](_0x3e9992(0x27a),config);}function deleteBot(_0x47ac04){const _0x4a1f74=_0x522534;getClientsWithBotID(_0x47ac04)[_0x4a1f74(0x253)](_0x2b4e2d=>{const _0x32bcb8=_0x4a1f74;getSocket(_0x2b4e2d['id'])[_0x32bcb8(0x166)](!![]),removeClient(_0x2b4e2d['id']);}),dbConfig[_0x4a1f74(0x14d)](_0x4a1f74(0x27a))['remove']({'botID':_0x47ac04})[_0x4a1f74(0x18d)](),logger['full'](_0x4a1f74(0x27f)+_0x47ac04),stopBot(_0x47ac04);try{if(fs['existsSync'](path[_0x4a1f74(0x1ab)](configpath,_0x4a1f74(0x17a)+_0x47ac04+'-config.json')))fs[_0x4a1f74(0x14b)](path['join'](configpath,_0x4a1f74(0x17a)+_0x47ac04+_0x4a1f74(0x2bc)));if(fs[_0x4a1f74(0x17b)](path['join'](configpath,_0x4a1f74(0x17a)+_0x47ac04+_0x4a1f74(0x1fb))))fs[_0x4a1f74(0x14b)](path[_0x4a1f74(0x1ab)](configpath,'bot-'+_0x47ac04+_0x4a1f74(0x1fb)));if(fs[_0x4a1f74(0x17b)](path[_0x4a1f74(0x1ab)](configpath,_0x4a1f74(0x17a)+_0x47ac04+_0x4a1f74(0x1e7))))fs['unlinkSync'](path[_0x4a1f74(0x1ab)](configpath,'bot-'+_0x47ac04+'-performance.json'));if(fs[_0x4a1f74(0x17b)](path['join'](configpath,_0x4a1f74(0x17a)+_0x47ac04+_0x4a1f74(0x187))))fs[_0x4a1f74(0x14b)](path[_0x4a1f74(0x1ab)](configpath,_0x4a1f74(0x17a)+_0x47ac04+_0x4a1f74(0x187)));}catch(_0x123921){if(_0x123921)logger[_0x4a1f74(0x277)](_0x4a1f74(0x149),_0x123921);}config=getConfiguration(),io['to'](_0x4a1f74(0x18a))[_0x4a1f74(0x144)](_0x4a1f74(0x27a),config);}function toggleBot(_0x32c4ba,_0x312dca,_0x42d4ee){const _0x77bcb9=_0x522534;dbConfig[_0x77bcb9(0x14d)](_0x77bcb9(0x27a))[_0x77bcb9(0x1ea)]({'botID':_0x32c4ba})[_0x77bcb9(0x1db)]({'status':_0x312dca})[_0x77bcb9(0x1db)]({'live':_0x42d4ee})['write']();if(_0x312dca=='enabled'||_0x312dca==_0x77bcb9(0x132))logger[_0x77bcb9(0x277)](_0x77bcb9(0x177)+_0x32c4ba),startBot([_0x32c4ba,userID],{'cwd':bbpath},function(_0x49e88b){const _0x3b660d=_0x77bcb9;if(_0x49e88b)logger[_0x3b660d(0x277)](_0x49e88b);});else(_0x312dca==_0x77bcb9(0x147)||_0x312dca=='new-disabled')&&(logger[_0x77bcb9(0x277)]('disabled\x20Bot\x20'+_0x32c4ba),stopBot(_0x32c4ba));config=getConfiguration(),io['to']('botmanager')['emit'](_0x77bcb9(0x27a),config);}function toggleStatus(_0x49841b){const _0x1ac5ab=_0x522534;let _0x44c5f3=dbConfig['get']('bots')['find']({'botID':_0x49841b})['value'](),_0x5152ce;if(_0x44c5f3['status']==='enabled')_0x5152ce=_0x1ac5ab(0x147);else{if(_0x44c5f3[_0x1ac5ab(0x269)]===_0x1ac5ab(0x132))_0x5152ce='new-disabled';else{if(_0x44c5f3[_0x1ac5ab(0x269)]==='new-disabled')_0x5152ce='new';else{if(_0x44c5f3['status']===_0x1ac5ab(0x147))_0x5152ce='enabled';}}}return _0x5152ce;}function updateStatus(_0x170e1d,_0x45991f){const _0x4c548c=_0x522534;dbConfig['get'](_0x4c548c(0x27a))[_0x4c548c(0x1ea)]({'botID':_0x170e1d})['assign']({'status':_0x45991f})[_0x4c548c(0x18d)](),config=getConfiguration(),io['to'](_0x4c548c(0x18a))['emit'](_0x4c548c(0x27a),config);}function updateLive(_0x45ef7b,_0x440bba){const _0x5cf5df=_0x522534;dbConfig[_0x5cf5df(0x14d)](_0x5cf5df(0x27a))[_0x5cf5df(0x1ea)]({'botID':_0x45ef7b})['assign']({'live':_0x440bba})[_0x5cf5df(0x18d)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x5cf5df(0x27a),config);}function updateBotName(_0x5495ee,_0x535c8b){const _0x372ff3=_0x522534;dbConfig[_0x372ff3(0x14d)](_0x372ff3(0x27a))[_0x372ff3(0x1ea)]({'botID':_0x5495ee})[_0x372ff3(0x1db)]({'botname':_0x535c8b})[_0x372ff3(0x18d)](),config=getConfiguration(),io['to']('botmanager')[_0x372ff3(0x144)](_0x372ff3(0x27a),config);}function updateBotManager(){const _0x2f5269=_0x522534;config=getConfiguration(),io['to'](_0x2f5269(0x18a))[_0x2f5269(0x144)](_0x2f5269(0x27a),config);}function toggleBotMode(_0x284aee){const _0x446027=_0x522534;if(pid[_0x284aee])pid[_0x284aee][_0x446027(0x212)]({'function':'toggleBotMode','args':null});else{const _0x3af73e=configpath+_0x446027(0x17a)+_0x284aee+_0x446027(0x2bc),_0x4b7536=fs['readFileSync'](_0x3af73e),_0x1d353c=JSON[_0x446027(0x240)](_0x4b7536),_0x45b939=_0x1d353c['bot'][0x0][_0x446027(0x146)];_0x1d353c[_0x446027(0x2b4)][0x0][_0x446027(0x146)]=!_0x45b939;const _0x299950=JSON[_0x446027(0x15a)](_0x1d353c,null,0x2);fs[_0x446027(0x204)](_0x3af73e,_0x299950),config=getConfiguration(),io['to'](_0x446027(0x18a))[_0x446027(0x144)]('bots',config);}}function telegramError(_0x1f50f7){const _0x53c30a=_0x522534;logger[_0x53c30a(0x179)](getTimeStamp()+_0x53c30a(0x1c6));}function validateTelegram(_0x141b8e){const _0x1b9c78=_0x522534;if(_0x141b8e[_0x1b9c78(0x156)][_0x1b9c78(0x160)]!=settings['telegramUsername']&&'@'+_0x141b8e[_0x1b9c78(0x156)][_0x1b9c78(0x160)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x141b8e['chat']['id'],_0x1b9c78(0x1dd),{'parse_mode':_0x1b9c78(0x221)})[_0x1b9c78(0x2ad)](_0x86c63c=>{telegramError(_0x86c63c);}),![];return!![];}async function initTelegram(){const _0x351123=_0x522534;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x351123(0x2cd)],{'polling':!![]});let _0x56e9fe='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x56e9fe+='\x0a',_0x56e9fe+='/enable\x20-\x20enable\x20notifications\x0a',_0x56e9fe+='/disable\x20-\x20disable\x20notifications\x0a',_0x56e9fe+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x56e9fe+=_0x351123(0x1ec),_0x56e9fe+='/on\x20-\x20start\x20bot(s)\x0a',_0x56e9fe+='/off\x20-\x20stop\x20bot(s)\x0a',_0x56e9fe+=_0x351123(0x295),_0x56e9fe+='/names\x20-\x20show\x20bot\x20names\x0a',_0x56e9fe+=_0x351123(0x190),_0x56e9fe+=_0x351123(0x172),_0x56e9fe+=_0x351123(0x162),_0x56e9fe+=_0x351123(0x150);let _0x4167fe=_0x351123(0x18e);_0x4167fe+='\x0a',_0x4167fe+=_0x56e9fe,tgBot['onText'](/\/start/,_0x298dd0=>{const _0x4f4da1=_0x351123;if(!validateTelegram(_0x298dd0))return;if(settings['telegramChatId']!=_0x298dd0['chat']['id'])updateSetting('telegramChatId',_0x298dd0[_0x4f4da1(0x170)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4f4da1(0x169)](_0x298dd0['chat']['id'],_0x4167fe)[_0x4f4da1(0x2ad)](_0x30884c=>{telegramError(_0x30884c);});}),tgBot[_0x351123(0x13e)](/\/enable/,_0x8950de=>{const _0x34e715=_0x351123;if(!validateTelegram(_0x8950de))return;if(settings[_0x34e715(0x13d)]!=_0x8950de[_0x34e715(0x170)]['id'])updateSetting(_0x34e715(0x13d),_0x8950de[_0x34e715(0x170)]['id']);updateSetting(_0x34e715(0x183),!![]),tgBot['sendMessage'](_0x8950de[_0x34e715(0x170)]['id'],'Notifications\x20enabled')['catch'](_0xd57665=>{telegramError(_0xd57665);});}),tgBot[_0x351123(0x13e)](/\/config/,async _0x1c6bd0=>{const _0x13b533=_0x351123;if(!validateTelegram(_0x1c6bd0))return;tgBot[_0x13b533(0x200)]('callback_query'),tgBot[_0x13b533(0x169)](_0x1c6bd0['chat']['id'],_0x13b533(0x2db),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x13b533(0x1b3)},{'text':'Alerts','callback_data':_0x13b533(0x2c0)},{'text':_0x13b533(0x2b9),'callback_data':'all'}]]}})[_0x13b533(0x2ad)](_0x397607=>{telegramError(_0x397607);}),tgBot['on'](_0x13b533(0x267),async _0x2f9dd0=>{const _0x3316a2=_0x13b533,_0x4dc8c7=_0x2f9dd0[_0x3316a2(0x189)],_0x41e697=_0x2f9dd0[_0x3316a2(0x261)];tgBot[_0x3316a2(0x22e)](_0x2f9dd0['id'])[_0x3316a2(0x1d3)](async()=>{const _0x434115=_0x3316a2;_0x4dc8c7=='orders'&&(updateSetting('telegramEvents',_0x434115(0x1b3)),updateSetting(_0x434115(0x183),!![]),await tgBot[_0x434115(0x169)](_0x41e697[_0x434115(0x170)]['id'],_0x434115(0x133))[_0x434115(0x2ad)](_0x4e0b26=>{telegramError(_0x4e0b26);}));_0x4dc8c7=='alerts'&&(updateSetting(_0x434115(0x1c9),_0x434115(0x2c0)),updateSetting('telegramEnabled',!![]),await tgBot[_0x434115(0x169)](_0x41e697[_0x434115(0x170)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x434115(0x2ad)](_0x24a851=>{telegramError(_0x24a851);}));_0x4dc8c7=='all'&&(updateSetting(_0x434115(0x1c9),_0x434115(0x16e)),updateSetting(_0x434115(0x183),!![]),await tgBot[_0x434115(0x169)](_0x41e697[_0x434115(0x170)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x434115(0x2ad)](_0x2107d4=>{telegramError(_0x2107d4);}));if(!settings[_0x434115(0x13d)])tgBot[_0x434115(0x169)](_0x41e697['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x4b9618=>{telegramError(_0x4b9618);});}),tgBot['removeListener'](_0x3316a2(0x267));});}),tgBot['onText'](/\/status/,_0xe4d152=>{const _0x1f7d58=_0x351123;if(!validateTelegram(_0xe4d152))return;const _0x33c226=getBotsWithMode();let _0x2a151a='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x1f7d58(0x253)](_0x26bb09=>{const _0x3de83a=_0x1f7d58,_0x41a419=_0x33c226['find'](_0x51d428=>_0x51d428[_0x3de83a(0x255)]==_0x26bb09[_0x3de83a(0x255)])[_0x3de83a(0x1eb)];_0x2a151a+=_0x3de83a(0x16b)+_0x26bb09[_0x3de83a(0x255)]+':\x20'+_0x26bb09[_0x3de83a(0x269)]+'\x20|\x20'+_0x41a419+'\x20|\x20'+_0x26bb09[_0x3de83a(0x29b)]+'\x0a';}),_0x2a151a+='\x0a',_0x2a151a+=_0x1f7d58(0x1e9),_0x2a151a+=!settings['telegramEnabled']?_0x1f7d58(0x195):_0x1f7d58(0x153),_0x2a151a+=settings[_0x1f7d58(0x183)]?settings[_0x1f7d58(0x1c9)]==_0x1f7d58(0x16e)?_0x1f7d58(0x268):_0x1f7d58(0x28c)+settings[_0x1f7d58(0x1c9)]+_0x1f7d58(0x28a):'',tgBot[_0x1f7d58(0x169)](_0xe4d152[_0x1f7d58(0x170)]['id'],_0x2a151a,{'parse_mode':_0x1f7d58(0x221)})[_0x1f7d58(0x2ad)](_0x583818=>{telegramError(_0x583818);});}),tgBot['onText'](/\/restart/,_0xb09e81=>{const _0x3c540a=_0x351123;if(!validateTelegram(_0xb09e81))return;tgBot[_0x3c540a(0x200)](_0x3c540a(0x267));const _0x25c5a1=getEnabledBots();if(_0x25c5a1[_0x3c540a(0x1b7)]==0x0)tgBot[_0x3c540a(0x169)](_0xb09e81['chat']['id'],_0x3c540a(0x151))['catch'](_0x1b2d7e=>{telegramError(_0x1b2d7e);});else{if(_0x25c5a1[_0x3c540a(0x1b7)]>0x1)_0x25c5a1[_0x3c540a(0x1df)]({'botID':_0x3c540a(0x16e)});let _0x138e6c=[],_0x2209ed=[];const _0x4564f1=_0x25c5a1[_0x3c540a(0x1b7)]%0x4==0x0||_0x25c5a1['length']%0x4==0x3||_0x25c5a1['length']%0x3==0x1?0x4:0x3;let _0x47f748=0x0;_0x25c5a1[_0x3c540a(0x253)]((_0x1a6d19,_0x4dd903)=>{const _0x29f4fe=_0x3c540a;if(_0x4dd903%_0x4564f1==0x0)_0x2209ed=[];_0x2209ed[_0x29f4fe(0x1df)]({'text':_0x1a6d19[_0x29f4fe(0x255)]==_0x29f4fe(0x16e)?_0x29f4fe(0x2b8):_0x29f4fe(0x16b)+_0x1a6d19[_0x29f4fe(0x255)],'callback_data':_0x1a6d19['botID']}),_0x4dd903%_0x4564f1==0x0&&(_0x138e6c[_0x47f748]=_0x2209ed,_0x47f748++);}),tgBot['sendMessage'](_0xb09e81['chat']['id'],_0x3c540a(0x24e),{'reply_markup':{'inline_keyboard':_0x138e6c}})['catch'](_0x95a21a=>{telegramError(_0x95a21a);}),tgBot['on'](_0x3c540a(0x267),async _0x512d50=>{const _0x55bfac=_0x3c540a,_0x56e4d8=_0x512d50['data'],_0xb67b60=_0x512d50[_0x55bfac(0x261)];tgBot[_0x55bfac(0x22e)](_0x512d50['id'])[_0x55bfac(0x1d3)](async()=>{const _0x564c44=_0x55bfac;_0x56e4d8==_0x564c44(0x16e)?config[_0x564c44(0x253)](_0x1295e2=>{const _0x18cc29=_0x564c44;restartBot(_0x1295e2[_0x18cc29(0x255)]);}):restartBot(_0x56e4d8);}),tgBot['removeListener'](_0x55bfac(0x267));});}}),tgBot[_0x351123(0x13e)](/\/on/,_0x1fed0b=>{const _0x31833d=_0x351123;if(!validateTelegram(_0x1fed0b))return;tgBot[_0x31833d(0x200)](_0x31833d(0x267));const _0x2f9fe1=getDisabledBots();if(_0x2f9fe1[_0x31833d(0x1b7)]==0x0)tgBot[_0x31833d(0x169)](_0x1fed0b[_0x31833d(0x170)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x31833d(0x2ad)](_0x445bbb=>{telegramError(_0x445bbb);});else{if(_0x2f9fe1[_0x31833d(0x1b7)]>0x1)_0x2f9fe1['push']({'botID':_0x31833d(0x16e)});let _0x218751=[],_0x34953a=[];const _0x3dcd0a=_0x2f9fe1[_0x31833d(0x1b7)]%0x4==0x0||_0x2f9fe1['length']%0x4==0x3||_0x2f9fe1[_0x31833d(0x1b7)]%0x3==0x1?0x4:0x3;let _0x54fb0e=0x0;_0x2f9fe1[_0x31833d(0x253)]((_0x57ef94,_0x34ec9b)=>{const _0x1cd38d=_0x31833d;if(_0x34ec9b%_0x3dcd0a==0x0)_0x34953a=[];_0x34953a[_0x1cd38d(0x1df)]({'text':_0x57ef94[_0x1cd38d(0x255)]==_0x1cd38d(0x16e)?_0x1cd38d(0x2b8):_0x1cd38d(0x16b)+_0x57ef94['botID'],'callback_data':_0x57ef94[_0x1cd38d(0x255)]}),_0x34ec9b%_0x3dcd0a==0x0&&(_0x218751[_0x54fb0e]=_0x34953a,_0x54fb0e++);}),tgBot[_0x31833d(0x169)](_0x1fed0b[_0x31833d(0x170)]['id'],_0x31833d(0x2ce),{'reply_markup':{'inline_keyboard':_0x218751}})[_0x31833d(0x2ad)](_0x272118=>{telegramError(_0x272118);}),tgBot['on'](_0x31833d(0x267),async _0x104e34=>{const _0x530a35=_0x31833d,_0x3c0c30=_0x104e34[_0x530a35(0x189)],_0x2bc99f=_0x104e34[_0x530a35(0x261)];tgBot[_0x530a35(0x22e)](_0x104e34['id'])[_0x530a35(0x1d3)](async()=>{const _0x5d9e64=_0x530a35;_0x3c0c30=='all'?(tgBot['sendMessage'](_0x2bc99f[_0x5d9e64(0x170)]['id'],_0x5d9e64(0x1bd))[_0x5d9e64(0x2ad)](_0xc5eeaa=>{telegramError(_0xc5eeaa);}),_0x2f9fe1[_0x5d9e64(0x253)](_0x2d74d3=>{const _0x23fadd=_0x5d9e64;if(_0x2d74d3[_0x23fadd(0x255)]!=_0x23fadd(0x16e))toggleBot(_0x2d74d3[_0x23fadd(0x255)],toggleStatus(_0x2d74d3[_0x23fadd(0x255)]),_0x23fadd(0x1f6));})):(tgBot[_0x5d9e64(0x169)](_0x2bc99f[_0x5d9e64(0x170)]['id'],_0x5d9e64(0x2b3)+_0x3c0c30)['catch'](_0x475219=>{telegramError(_0x475219);}),toggleBot(_0x3c0c30,toggleStatus(_0x3c0c30),'stopped'));}),tgBot['removeListener'](_0x530a35(0x267));});}}),tgBot[_0x351123(0x13e)](/\/off/,_0x3dd4f1=>{const _0x220930=_0x351123;if(!validateTelegram(_0x3dd4f1))return;tgBot['removeListener']('callback_query');const _0x4dc146=getEnabledBots();if(_0x4dc146['length']==0x0)tgBot[_0x220930(0x169)](_0x3dd4f1[_0x220930(0x170)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x220930(0x2ad)](_0x32632a=>{telegramError(_0x32632a);});else{if(_0x4dc146[_0x220930(0x1b7)]>0x1)_0x4dc146['push']({'botID':_0x220930(0x16e)});let _0x6b23b3=[],_0xb34e06=[];const _0x15b81a=_0x4dc146[_0x220930(0x1b7)]%0x4==0x0||_0x4dc146['length']%0x4==0x3||_0x4dc146[_0x220930(0x1b7)]%0x3==0x1?0x4:0x3;let _0x26f66d=0x0;_0x4dc146[_0x220930(0x253)]((_0x1a848b,_0x1f9921)=>{const _0x490ecb=_0x220930;if(_0x1f9921%_0x15b81a==0x0)_0xb34e06=[];_0xb34e06[_0x490ecb(0x1df)]({'text':_0x1a848b[_0x490ecb(0x255)]==_0x490ecb(0x16e)?'All\x20bots':'Bot\x20'+_0x1a848b[_0x490ecb(0x255)],'callback_data':_0x1a848b[_0x490ecb(0x255)]}),_0x1f9921%_0x15b81a==0x0&&(_0x6b23b3[_0x26f66d]=_0xb34e06,_0x26f66d++);}),tgBot[_0x220930(0x169)](_0x3dd4f1[_0x220930(0x170)]['id'],_0x220930(0x24c),{'reply_markup':{'inline_keyboard':_0x6b23b3}})[_0x220930(0x2ad)](_0x323580=>{telegramError(_0x323580);}),tgBot['on'](_0x220930(0x267),async _0x40f78c=>{const _0x513be0=_0x220930,_0x3e71d2=_0x40f78c[_0x513be0(0x189)],_0x160714=_0x40f78c['message'];tgBot['answerCallbackQuery'](_0x40f78c['id'])[_0x513be0(0x1d3)](async()=>{const _0x101fb4=_0x513be0;_0x3e71d2==_0x101fb4(0x16e)?(tgBot['sendMessage'](_0x160714['chat']['id'],_0x101fb4(0x1d1))['catch'](_0x41f505=>{telegramError(_0x41f505);}),_0x4dc146[_0x101fb4(0x253)](_0xdcb94a=>{const _0xcf04=_0x101fb4;if(_0xdcb94a[_0xcf04(0x255)]!=_0xcf04(0x16e))toggleBot(_0xdcb94a[_0xcf04(0x255)],toggleStatus(_0xdcb94a['botID']),_0xcf04(0x1f6));})):(tgBot['sendMessage'](_0x160714['chat']['id'],_0x101fb4(0x1d8)+_0x3e71d2)[_0x101fb4(0x2ad)](_0x42f9db=>{telegramError(_0x42f9db);}),toggleBot(_0x3e71d2,toggleStatus(_0x3e71d2),'stopped'));}),tgBot[_0x513be0(0x200)](_0x513be0(0x267));});}}),tgBot[_0x351123(0x13e)](/\/portfolio/,_0x2bc4c8=>{const _0x3f978f=_0x351123;if(!validateTelegram(_0x2bc4c8))return;tgBot[_0x3f978f(0x200)](_0x3f978f(0x267));const _0x36289f=getEnabledBots();if(_0x36289f[_0x3f978f(0x1b7)]==0x0)tgBot['sendMessage'](_0x2bc4c8[_0x3f978f(0x170)]['id'],_0x3f978f(0x151))['catch'](_0xa7b592=>{telegramError(_0xa7b592);});else{if(_0x36289f[_0x3f978f(0x1b7)]>0x1){let _0x31a038=[],_0x135070=[];const _0x5f1d17=_0x36289f[_0x3f978f(0x1b7)]%0x4==0x0||_0x36289f['length']%0x4==0x3||_0x36289f[_0x3f978f(0x1b7)]%0x3==0x1?0x4:0x3;let _0x12c422=0x0;_0x36289f[_0x3f978f(0x253)]((_0x89d350,_0x277ca4)=>{const _0xbb4baf=_0x3f978f;if(_0x277ca4%_0x5f1d17==0x0)_0x135070=[];_0x135070[_0xbb4baf(0x1df)]({'text':_0xbb4baf(0x16b)+_0x89d350['botID'],'callback_data':_0x89d350['botID']}),_0x277ca4%_0x5f1d17==0x0&&(_0x31a038[_0x12c422]=_0x135070,_0x12c422++);}),tgBot[_0x3f978f(0x169)](_0x2bc4c8[_0x3f978f(0x170)]['id'],_0x3f978f(0x203),{'reply_markup':{'inline_keyboard':_0x31a038}})[_0x3f978f(0x2ad)](_0x1625c8=>{telegramError(_0x1625c8);}),tgBot['on'](_0x3f978f(0x267),async _0x4468b0=>{const _0xe17be8=_0x3f978f,_0x4ba78f=_0x4468b0[_0xe17be8(0x189)],_0x44bfc6=_0x4468b0['message'];tgBot[_0xe17be8(0x22e)](_0x4468b0['id'])[_0xe17be8(0x1d3)](async()=>{const _0x17b228=_0xe17be8;if(pid[_0x4ba78f])pid[_0x4ba78f][_0x17b228(0x212)]({'function':_0x17b228(0x23d),'args':null});}),tgBot[_0xe17be8(0x200)](_0xe17be8(0x267));});}else{const _0x232496=_0x36289f[0x0][_0x3f978f(0x255)];if(pid[_0x232496])pid[_0x232496][_0x3f978f(0x212)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x351123(0x13e)](/\/update/,async _0x3ee93f=>{const _0x2603b5=_0x351123;if(!validateTelegram(_0x3ee93f))return;tgBot['removeListener']('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x2603b5(0x169)](_0x3ee93f[_0x2603b5(0x170)]['id'],_0x2603b5(0x20a))[_0x2603b5(0x2ad)](_0x3728c1=>{telegramError(_0x3728c1);});else!validInstallation?tgBot[_0x2603b5(0x169)](_0x3ee93f['chat']['id'],_0x2603b5(0x1ca))[_0x2603b5(0x2ad)](_0x1817f1=>{telegramError(_0x1817f1);}):(tgBot[_0x2603b5(0x169)](_0x3ee93f[_0x2603b5(0x170)]['id'],_0x2603b5(0x175),{'reply_markup':{'inline_keyboard':[[{'text':_0x2603b5(0x264),'callback_data':_0x2603b5(0x155)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x4f03e3=>{telegramError(_0x4f03e3);}),tgBot['on'](_0x2603b5(0x267),async _0x1b8edf=>{const _0x116c14=_0x2603b5,_0x46d822=_0x1b8edf[_0x116c14(0x189)],_0x1e3894=_0x1b8edf[_0x116c14(0x261)];tgBot[_0x116c14(0x22e)](_0x1b8edf['id'])[_0x116c14(0x1d3)](async()=>{const _0x57b37a=_0x116c14;_0x46d822==_0x57b37a(0x155)&&(await tgBot[_0x57b37a(0x169)](_0x1e3894[_0x57b37a(0x170)]['id'],_0x57b37a(0x28e))['catch'](_0x46ec4b=>{telegramError(_0x46ec4b);}),updateBB());_0x46d822=='no'&&await tgBot[_0x57b37a(0x169)](_0x1e3894[_0x57b37a(0x170)]['id'],_0x57b37a(0x2c5))[_0x57b37a(0x2ad)](_0x55cb9f=>{telegramError(_0x55cb9f);});if(!settings[_0x57b37a(0x13d)])tgBot[_0x57b37a(0x169)](_0x1e3894[_0x57b37a(0x170)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x57b37a(0x2ad)](_0x4e5ba8=>{telegramError(_0x4e5ba8);});}),tgBot[_0x116c14(0x200)](_0x116c14(0x267));}));}),tgBot[_0x351123(0x13e)](/\/toggle/,_0x720ee0=>{const _0x303b83=_0x351123;if(!validateTelegram(_0x720ee0))return;tgBot[_0x303b83(0x200)](_0x303b83(0x267));const _0x308d53=getBotsWithMode();if(_0x308d53[_0x303b83(0x1b7)]==0x0)tgBot[_0x303b83(0x169)](_0x720ee0['chat']['id'],_0x303b83(0x151))[_0x303b83(0x2ad)](_0x32f0d3=>{telegramError(_0x32f0d3);});else{let _0x18abea=[],_0x5e8230=[];const _0x582246=0x2;let _0x1ff6ff=0x0;_0x308d53[_0x303b83(0x253)]((_0x485d18,_0x3b116d)=>{const _0xa1aae6=_0x303b83;if(_0x3b116d%_0x582246==0x0)_0x5e8230=[];_0x5e8230[_0xa1aae6(0x1df)]({'text':'Bot\x20'+_0x485d18[_0xa1aae6(0x255)]+'\x20('+_0x485d18['mode']+')','callback_data':_0x485d18[_0xa1aae6(0x255)]}),_0x3b116d%_0x582246==0x0&&(_0x18abea[_0x1ff6ff]=_0x5e8230,_0x1ff6ff++);}),tgBot[_0x303b83(0x169)](_0x720ee0[_0x303b83(0x170)]['id'],_0x303b83(0x2b2),{'reply_markup':{'inline_keyboard':_0x18abea}})[_0x303b83(0x2ad)](_0x578e62=>{telegramError(_0x578e62);}),tgBot['on'](_0x303b83(0x267),async _0x4fe2ed=>{const _0x11b325=_0x303b83,_0x1958a1=_0x4fe2ed['data'],_0x289073=_0x4fe2ed['message'];tgBot[_0x11b325(0x22e)](_0x4fe2ed['id'])[_0x11b325(0x1d3)](async()=>{const _0x88bbc2=_0x11b325,_0x4c9040=_0x308d53[_0x88bbc2(0x1ea)](_0x370b3b=>_0x370b3b[_0x88bbc2(0x255)]==_0x1958a1),_0x104a3f=_0x4c9040[_0x88bbc2(0x1eb)]==_0x88bbc2(0x20c)?'manual':_0x88bbc2(0x20c);tgBot[_0x88bbc2(0x169)](_0x289073['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x1958a1+_0x88bbc2(0x1e8)+_0x104a3f+'\x20mode')['catch'](_0x17488b=>{telegramError(_0x17488b);}),toggleBotMode(_0x1958a1);}),tgBot[_0x11b325(0x200)](_0x11b325(0x267));});}}),tgBot[_0x351123(0x13e)](/\/names/,_0x2eb450=>{const _0x1a9c5f=_0x351123;if(!validateTelegram(_0x2eb450))return;let _0x1007f4='';config[_0x1a9c5f(0x253)](_0x42d3e1=>{const _0x4f04e5=_0x1a9c5f;_0x1007f4+=_0x4f04e5(0x16b)+_0x42d3e1[_0x4f04e5(0x255)]+':\x20'+_0x42d3e1[_0x4f04e5(0x21c)]+'\x0a';}),tgBot[_0x1a9c5f(0x169)](_0x2eb450[_0x1a9c5f(0x170)]['id'],_0x1007f4,{'parse_mode':_0x1a9c5f(0x221)})[_0x1a9c5f(0x2ad)](_0x4b6dd9=>{telegramError(_0x4b6dd9);});}),tgBot['onText'](/\/disable/,_0x356ef8=>{const _0x3b4fc5=_0x351123;if(!validateTelegram(_0x356ef8))return;tgBot[_0x3b4fc5(0x169)](_0x356ef8[_0x3b4fc5(0x170)]['id'],_0x3b4fc5(0x17d))['catch'](_0x34fe68=>{telegramError(_0x34fe68);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x351123(0x13e)](/\/help/,_0x543543=>{const _0x5c13c6=_0x351123;if(!validateTelegram(_0x543543))return;tgBot[_0x5c13c6(0x169)](_0x543543[_0x5c13c6(0x170)]['id'],_0x56e9fe)[_0x5c13c6(0x2ad)](_0x37966c=>{telegramError(_0x37966c);});}),tgBot['on']('polling_error',_0x4bf302=>{const _0x1a3bb6=_0x351123;_0x4bf302[_0x1a3bb6(0x188)]()['includes'](_0x1a3bb6(0x2c4))&&(logger[_0x1a3bb6(0x277)]('Invalid\x20Telegram\x20token'),tgBot[_0x1a3bb6(0x26c)](),tgBot=null,io['to'](_0x1a3bb6(0x18a))[_0x1a3bb6(0x144)](_0x1a3bb6(0x26d),_0x1a3bb6(0x145)));}),process[_0x351123(0x1ce)](_0x351123(0x1a0),()=>{const _0x3e5e44=_0x351123;if(tgBot)tgBot['stopPolling']();process[_0x3e5e44(0x1d0)](0x1);}),process[_0x351123(0x1ce)]('SIGTERM',()=>{const _0x143562=_0x351123;if(tgBot)tgBot['stopPolling']();process[_0x143562(0x1d0)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x311f48,_0x429007){const _0x34ad50=_0x522534;if(settings[_0x34ad50(0x183)]){if(settings['telegramEvents']==_0x34ad50(0x16e)||(_0x429007['type']==_0x34ad50(0x291)||_0x429007[_0x34ad50(0x2b1)]==_0x34ad50(0x1cc)||_0x429007[_0x34ad50(0x2b1)]==_0x34ad50(0x161))&&settings[_0x34ad50(0x1c9)]=='alerts'||_0x429007[_0x34ad50(0x2b1)]==_0x34ad50(0x1b9)&&settings[_0x34ad50(0x1c9)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x429007[_0x34ad50(0x2da)])tgBot[_0x34ad50(0x169)](settings[_0x34ad50(0x13d)],_0x429007['botname']+_0x34ad50(0x22f)+_0x429007[_0x34ad50(0x279)])['catch'](_0x188f9a=>{telegramError(_0x188f9a);});else tgBot[_0x34ad50(0x169)](settings[_0x34ad50(0x13d)],'Bot\x20'+_0x311f48+'\x20>\x20'+_0x429007[_0x34ad50(0x279)])[_0x34ad50(0x2ad)](_0x3e1b51=>{telegramError(_0x3e1b51);});}}}}async function sendTelegramMsg(_0x2b032b,_0x456525=_0x522534(0x221)){const _0xc1e25e=_0x522534;return settings[_0xc1e25e(0x183)]&&tgBot&&settings[_0xc1e25e(0x13d)]?(await tgBot[_0xc1e25e(0x169)](settings[_0xc1e25e(0x13d)],_0x2b032b,{'parse_mode':_0x456525})['catch'](_0x5781ca=>{telegramError(_0x5781ca);}),!![]):![];}function getDeviceWithIp(_0x921868){const _0x4cdadf=_0x522534;return devices[_0x4cdadf(0x1ea)](_0x95d976=>_0x95d976['ip']===_0x921868);}function temporaryAccess2FA(_0x57bd27,_0x2c38cf){const _0xa23df1=_0x522534;let _0xead715=new Date(),_0x15588d=![];if(lastIpApproval){if(_0xead715-lastIpApproval<0x1388)_0x15588d=!![];}lastIpApproval=new Date();if(_0x15588d)return;tgBot&&settings[_0xa23df1(0x13d)]&&(tgBot[_0xa23df1(0x200)](_0xa23df1(0x267)),tgBot[_0xa23df1(0x169)](settings['telegramChatId'],_0xa23df1(0x272)+normalizeIP(_0x2c38cf)['show']+_0xa23df1(0x245),{'parse_mode':_0xa23df1(0x221),'reply_markup':{'inline_keyboard':[[{'text':_0xa23df1(0x24b),'callback_data':'5'},{'text':_0xa23df1(0x2c9),'callback_data':'15'},{'text':_0xa23df1(0x290),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})['catch'](_0x36aca1=>{telegramError(_0x36aca1);}),tgBot['on'](_0xa23df1(0x267),async _0x547c8c=>{const _0x44eabd=_0xa23df1,_0xa01cc=_0x547c8c['data'],_0x1f4d8e=_0x547c8c[_0x44eabd(0x261)];tgBot[_0x44eabd(0x22e)](_0x547c8c['id'])[_0x44eabd(0x1d3)](async()=>{const _0x53aadf=_0x44eabd;devices[_0x57bd27]['telegramIpApproval']={'clientip':_0x2c38cf,'timestamp':new Date()[_0x53aadf(0x252)](),'expiry':_0xa01cc},_0xa01cc!=_0x53aadf(0x217)?(await tgBot['sendMessage'](_0x1f4d8e['chat']['id'],_0x53aadf(0x135)+_0xa01cc+_0x53aadf(0x184),{'parse_mode':_0x53aadf(0x221)})['catch'](_0x235562=>{telegramError(_0x235562);}),io['to'](_0x57bd27)[_0x53aadf(0x144)]('status',{'access':{'allow':![],'reason':_0x53aadf(0x2a9),'token':null}})):(await tgBot['sendMessage'](_0x1f4d8e[_0x53aadf(0x170)]['id'],_0x53aadf(0x199))[_0x53aadf(0x2ad)](_0x32c238=>{telegramError(_0x32c238);}),io['to'](_0x57bd27)[_0x53aadf(0x144)](_0x53aadf(0x269),{'access':{'allow':![],'reason':_0x53aadf(0x2c1),'token':null}}));}),tgBot[_0x44eabd(0x200)](_0x44eabd(0x267));}));}function loginAccess2FA(_0x12f642,_0x337d9b){const _0x3846a5=_0x522534;tgBot&&settings[_0x3846a5(0x13d)]&&(tgBot[_0x3846a5(0x200)](_0x3846a5(0x267)),tgBot[_0x3846a5(0x169)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x337d9b)[_0x3846a5(0x19a)]+'</b>\x20?',{'parse_mode':_0x3846a5(0x221),'reply_markup':{'inline_keyboard':[[{'text':_0x3846a5(0x2d8),'callback_data':loginExpiry},{'text':_0x3846a5(0x217),'callback_data':_0x3846a5(0x217)}]]}})['catch'](_0x239293=>{telegramError(_0x239293);}),tgBot['on'](_0x3846a5(0x267),async _0x56d7fc=>{const _0x515ba5=_0x3846a5,_0x5b165b=_0x56d7fc[_0x515ba5(0x189)],_0x2a9ec1=_0x56d7fc[_0x515ba5(0x261)];tgBot[_0x515ba5(0x22e)](_0x56d7fc['id'])[_0x515ba5(0x1d3)](async()=>{const _0x12cb4e=_0x515ba5;devices[_0x12f642][_0x12cb4e(0x1ee)]={'clientip':_0x337d9b,'timestamp':new Date()['getTime'](),'expiry':_0x5b165b},_0x5b165b!=_0x12cb4e(0x217)?(await tgBot[_0x12cb4e(0x169)](_0x2a9ec1['chat']['id'],_0x12cb4e(0x1ff),{'parse_mode':_0x12cb4e(0x221)})[_0x12cb4e(0x2ad)](_0x5ebfab=>{telegramError(_0x5ebfab);}),io['to'](_0x12f642)[_0x12cb4e(0x144)](_0x12cb4e(0x269),{'access':{'allow':![],'reason':_0x12cb4e(0x2a9),'token':null}})):(await tgBot[_0x12cb4e(0x169)](_0x2a9ec1[_0x12cb4e(0x170)]['id'],_0x12cb4e(0x25f))[_0x12cb4e(0x2ad)](_0x323849=>{telegramError(_0x323849);}),io['to'](_0x12f642)[_0x12cb4e(0x144)](_0x12cb4e(0x269),{'access':{'allow':![],'reason':_0x12cb4e(0x15f),'token':null}}));}),tgBot[_0x515ba5(0x200)](_0x515ba5(0x267));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2f699a=_0x522534;return dbConfig['get'](_0x2f699a(0x27a))[_0x2f699a(0x278)]('botID')['filter']({'status':_0x2f699a(0x273)})[_0x2f699a(0x2a7)]()||[];}function getDisabledBots(){const _0x342128=_0x522534;return dbConfig['get'](_0x342128(0x27a))[_0x342128(0x278)](_0x342128(0x255))['filter']({'status':_0x342128(0x147)})['value']()||[];}function getBotAttributes(_0x4de7da){const _0x156fc8=_0x522534;let _0x204f63={};const _0x5ea627=configpath+_0x156fc8(0x17a)+_0x4de7da+_0x156fc8(0x2bc),_0x262230=fs[_0x156fc8(0x17b)](_0x5ea627);if(_0x262230){const _0x3aebcb=fs[_0x156fc8(0x256)](_0x5ea627);try{const _0x51745c=JSON[_0x156fc8(0x240)](_0x3aebcb),_0x16e6e9=_0x51745c?_0x51745c['bot'][0x0][_0x156fc8(0x146)]:![];_0x204f63[_0x156fc8(0x1eb)]=_0x16e6e9?'auto':'manual',_0x204f63[_0x156fc8(0x21c)]=_0x51745c?_0x51745c[_0x156fc8(0x2b4)][0x0][_0x156fc8(0x21c)]:_0x156fc8(0x16b)+_0x4de7da;}catch(_0x38e781){_0x204f63[_0x156fc8(0x1eb)]=_0x156fc8(0x1b4),_0x204f63[_0x156fc8(0x21c)]=_0x156fc8(0x16b)+_0x4de7da;}}else _0x204f63[_0x156fc8(0x1eb)]='manual',_0x204f63[_0x156fc8(0x21c)]=_0x156fc8(0x16b)+_0x4de7da;return _0x204f63;}function getBotsWithMode(){const _0x41ca9d=_0x522534,_0x51f95f=dbConfig[_0x41ca9d(0x14d)](_0x41ca9d(0x27a))[_0x41ca9d(0x278)](_0x41ca9d(0x255))[_0x41ca9d(0x2a7)]()||[];return _0x51f95f[_0x41ca9d(0x253)](_0x1576b8=>{const _0x206a08=_0x41ca9d;let _0x2f886d=getBotAttributes(_0x1576b8['botID']);_0x1576b8[_0x206a08(0x1eb)]=_0x2f886d[_0x206a08(0x1eb)];}),_0x51f95f;}function getBotExchanges(){const _0x2a03d7=_0x522534;let _0x365ae0=[];const _0x2a39f2=dbConfig[_0x2a03d7(0x14d)](_0x2a03d7(0x27a))[_0x2a03d7(0x278)](_0x2a03d7(0x255))[_0x2a03d7(0x2a7)]()||[];_0x2a39f2[_0x2a03d7(0x253)](_0xec344b=>{const _0x393a02=_0x2a03d7;if(_0xec344b['status']=='enabled'){const _0xb02671=configpath+_0x393a02(0x17a)+_0xec344b[_0x393a02(0x255)]+_0x393a02(0x2bc),_0x5ada7d=fs[_0x393a02(0x17b)](_0xb02671);let _0x419b9b;if(_0x5ada7d){const _0x51b2fa=fs[_0x393a02(0x256)](_0xb02671);try{const _0x138c94=JSON['parse'](_0x51b2fa);_0x419b9b=_0x138c94?_0x138c94[_0x393a02(0x2b4)][0x0][_0x393a02(0x2d5)]:null;}catch(_0x5d30f1){}}if(_0x419b9b)_0x365ae0[_0x393a02(0x1df)](_0x419b9b);}});const _0x545de3=[...new Set(_0x365ae0)][_0x2a03d7(0x17e)]();return _0x545de3;}async function initUser(){const _0x16aed6=_0x522534;if(!settings['userid']){const _0x50c9b6=uuidRandom();mixpanel[_0x16aed6(0x248)](_0x50c9b6),updateSetting(_0x16aed6(0x1cb),_0x50c9b6);}}async function initSecure(){const _0x1cfbf4=_0x522534;let _0x463a54=getSecure();if(!_0x463a54['hasOwnProperty'](_0x1cfbf4(0x1d6))){let _0x1a99ad=await generateKeys();_0x463a54[_0x1cfbf4(0x23c)]=_0x1a99ad['publicKey'],_0x463a54[_0x1cfbf4(0x1c3)]=_0x1a99ad[_0x1cfbf4(0x1c3)],_0x463a54['secret']=crypto[_0x1cfbf4(0x1a7)](0x20)[_0x1cfbf4(0x188)](_0x1cfbf4(0x229));;storeSecure(_0x463a54);}}function getSettings(){const _0x5bcdc3=_0x522534;return dbSettings[_0x5bcdc3(0x14d)](_0x5bcdc3(0x257))['value']()||{};}function getSecure(){const _0x38c98d=_0x522534;return dbSecure[_0x38c98d(0x14d)](_0x38c98d(0x1a8))[_0x38c98d(0x2a7)]()||{};}function getBlacklist(){const _0x3d0b67=_0x522534;return dbSecure[_0x3d0b67(0x14d)]('blacklist')[_0x3d0b67(0x2a7)]()||[];}function broadcastToBots(_0x50d4ab,_0x1846c4){const _0x4165e5=_0x522534;config[_0x4165e5(0x253)](_0x3c7548=>{const _0x104d5f=_0x4165e5;if(_0x3c7548[_0x104d5f(0x269)]==_0x104d5f(0x273)&&_0x3c7548[_0x104d5f(0x29b)]==_0x104d5f(0x16f)){if(pid[_0x3c7548[_0x104d5f(0x255)]])pid[_0x3c7548[_0x104d5f(0x255)]]['send']({[_0x50d4ab]:_0x1846c4});}});}function storeSettings(_0x280a62,_0x5653ac=![]){const _0x53f9b3=_0x522534;_0x280a62={...settings,..._0x280a62};if(_0x5653ac&&_0x280a62[_0x53f9b3(0x18c)]!=_0x53f9b3(0x2ac)&&_0x280a62[_0x53f9b3(0x18c)]!=_0x53f9b3(0x20e)&&_0x280a62[_0x53f9b3(0x18c)]!=''){const _0x4b6506=crypt[_0x53f9b3(0x1fd)](secure[_0x53f9b3(0x1c3)],_0x280a62['bbPassword'])[_0x53f9b3(0x261)][_0x53f9b3(0x20d)]('@')[0x0],_0x5dd41d=bcrypt['hashSync'](_0x4b6506,saltRounds);_0x280a62={..._0x280a62,'bbPassword':_0x5dd41d};}if(_0x5653ac&&_0x280a62['telegramToken']!='************'&&_0x280a62['telegramToken']!=_0x53f9b3(0x20e)&&_0x280a62[_0x53f9b3(0x2cd)]!=''){const _0x4272e7=crypt[_0x53f9b3(0x1fd)](secure[_0x53f9b3(0x1c3)],_0x280a62[_0x53f9b3(0x2cd)])['message'][_0x53f9b3(0x20d)]('@')[0x0];_0x280a62={..._0x280a62,'telegramToken':_0x4272e7};}const _0x1f1646=_0x280a62[_0x53f9b3(0x2cd)]!=_0x53f9b3(0x2ac)&&_0x280a62['telegramToken']!=settings[_0x53f9b3(0x2cd)]||_0x280a62['telegramUsername']!=settings[_0x53f9b3(0x180)],_0x4bc7cf=_0x280a62[_0x53f9b3(0x2cd)]==''||_0x280a62[_0x53f9b3(0x180)]=='';if(_0x1f1646)_0x280a62['telegramEvents']='all';for(const [_0x2baa07,_0x59588c]of Object[_0x53f9b3(0x1ac)](_0x280a62)){if(_0x2baa07=='telegramToken'&&_0x59588c==_0x53f9b3(0x2ac)){_0x280a62[_0x53f9b3(0x2cd)]=settings[_0x53f9b3(0x2cd)];continue;};if(_0x2baa07==_0x53f9b3(0x18c)&&_0x59588c==_0x53f9b3(0x2ac)){_0x280a62['bbPassword']=settings[_0x53f9b3(0x18c)];continue;};dbSettings['set'](_0x53f9b3(0x25e)+_0x2baa07,_0x59588c)[_0x53f9b3(0x18d)]();}settings=_0x280a62,io['to'](_0x53f9b3(0x18a))[_0x53f9b3(0x144)](_0x53f9b3(0x257),cleanSettings()),broadcastToBots(_0x53f9b3(0x159),settings['timeshift']);if(_0x1f1646&&!_0x4bc7cf)initTelegram();if(_0x1f1646&&_0x4bc7cf)disableTelegram();getAllClients()[_0x53f9b3(0x253)](_0x5938c7=>{const _0x7ee9b0=_0x53f9b3;getSocket(_0x5938c7['id'])[_0x7ee9b0(0x144)]('status',{'access':{'allow':![],'reason':_0x7ee9b0(0x2a9),'token':null}});});}function updateSetting(_0x503e50,_0x3aabac){const _0x51c9f7=_0x522534;dbSettings[_0x51c9f7(0x1de)](_0x51c9f7(0x25e)+_0x503e50,_0x3aabac)[_0x51c9f7(0x18d)](),settings=getSettings(),io['to']('botmanager')[_0x51c9f7(0x144)](_0x51c9f7(0x257),cleanSettings());}function storeSecure(_0x15580c){const _0x5aa4c4=_0x522534;dbSecure[_0x5aa4c4(0x14d)](_0x5aa4c4(0x1a8))['push'](_0x15580c)['write'](),secure=_0x15580c;}function addBlacklist(_0x486294){const _0x1dd57b=_0x522534;cleanBlacklist();let _0x2135a2;devices[_0x486294][_0x1dd57b(0x216)]?_0x2135a2=Math[_0x1dd57b(0x19d)](devices[_0x486294]['telegramIpApproval'][_0x1dd57b(0x274)],loginExpiry):_0x2135a2=loginExpiry,dbSecure[_0x1dd57b(0x14d)]('blacklist')[_0x1dd57b(0x1df)]({'expiry':new Date()[_0x1dd57b(0x252)]()+_0x2135a2*0x3c*0x3e8,'token':devices[_0x486294]['access'][_0x1dd57b(0x1b5)]})[_0x1dd57b(0x18d)](),blacklist=dbSecure['get']('blacklist')['value']();}function cleanBlacklist(){const _0x1aab1f=_0x522534;let _0x502617=dbSecure[_0x1aab1f(0x14d)]('blacklist')[_0x1aab1f(0x286)]()['value'](),_0x4f897d=new Date()[_0x1aab1f(0x252)]();_0x502617['forEach'](_0x1fcdb6=>{const _0x3587b9=_0x1aab1f;_0x1fcdb6[_0x3587b9(0x274)]<_0x4f897d&&dbSecure['get'](_0x3587b9(0x275))['remove']({'expiry':_0x1fcdb6[_0x3587b9(0x274)]})['write']();});}function initStates(){let _0x1097c3=getConfiguration();_0x1097c3['forEach'](_0x398b2=>{const _0x4ca776=_0x54d7;_0x398b2[_0x4ca776(0x29b)]=_0x4ca776(0x1f6);}),storeConfiguration(_0x1097c3);}function onKeys(){const _0xd8c610=new RSA();return new Promise(_0x531041=>{const _0x445b92=_0x54d7;_0xd8c610[_0x445b92(0x2bd)]()['then'](_0x944984=>{_0x531041(_0x944984);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x7ea113=_0x522534;let _0x5b6161=getSettings(),_0x4f0015=![];!_0x5b6161[_0x7ea113(0x2b5)](_0x7ea113(0x210))&&(_0x5b6161['lastmsgtelegram']=0x0,_0x4f0015=!![]);!_0x5b6161[_0x7ea113(0x2b5)]('lastmsgemitted')&&(_0x5b6161[_0x7ea113(0x249)]=0x0,_0x4f0015=!![]);!_0x5b6161[_0x7ea113(0x2b5)]('latestversion')&&(_0x5b6161['latestversion']='0.0.0',_0x4f0015=!![]);if(_0x4f0015)storeSettings(_0x5b6161);}function storeConfiguration(_0x4a88fc){const _0x18a0a9=_0x522534;dbConfig[_0x18a0a9(0x14d)](_0x18a0a9(0x27a))[_0x18a0a9(0x265)]()[_0x18a0a9(0x18d)](),_0x4a88fc['forEach'](_0x13d4f0=>{delete _0x13d4f0['mode'];}),dbConfig[_0x18a0a9(0x14d)](_0x18a0a9(0x27a))[_0x18a0a9(0x1df)](..._0x4a88fc)['write'](),config=_0x4a88fc;}function resetPassword(){const _0x523f41=_0x522534;tgBot&&settings[_0x523f41(0x13d)]&&(tgBot[_0x523f41(0x200)](_0x523f41(0x267)),tgBot[_0x523f41(0x169)](settings[_0x523f41(0x13d)],_0x523f41(0x284),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x523f41(0x2ad)](_0x43e7c5=>{telegramError(_0x43e7c5);}),tgBot['on'](_0x523f41(0x267),async _0x4ee010=>{const _0x5009c1=_0x523f41,_0x5768ef=_0x4ee010['data'],_0x50231a=_0x4ee010['message'];tgBot[_0x5009c1(0x22e)](_0x4ee010['id'])[_0x5009c1(0x1d3)](async()=>{const _0x6a7a6d=_0x5009c1;if(_0x5768ef!='no'){const _0x63d897=0xf,_0x591ee8=_0x6a7a6d(0x1f3),_0x53c1a8=Array[_0x6a7a6d(0x156)](crypto['randomFillSync'](new Uint32Array(_0x63d897)))[_0x6a7a6d(0x293)](_0x2dc23b=>_0x591ee8[_0x2dc23b%_0x591ee8[_0x6a7a6d(0x1b7)]])['join'](''),_0x4c6aa9=bcrypt[_0x6a7a6d(0x270)](_0x53c1a8,saltRounds);storeSettings({'bbPassword':_0x4c6aa9}),await tgBot['sendMessage'](_0x50231a[_0x6a7a6d(0x170)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x53c1a8,{'parse_mode':_0x6a7a6d(0x221)})['catch'](_0x593ff3=>{telegramError(_0x593ff3);});}else await tgBot[_0x6a7a6d(0x169)](_0x50231a[_0x6a7a6d(0x170)]['id'],_0x6a7a6d(0x174))['catch'](_0x4b2f2b=>{telegramError(_0x4b2f2b);});}),tgBot[_0x5009c1(0x200)](_0x5009c1(0x267));}));}async function confirmRestore(_0x3f6942,_0x567a2f){const _0xfee988=_0x522534;tgBot&&settings[_0xfee988(0x13d)]&&(tgBot[_0xfee988(0x200)](_0xfee988(0x267)),await tgBot['sendMessage'](settings[_0xfee988(0x13d)],_0xfee988(0x21d),{'parse_mode':_0xfee988(0x221),'reply_markup':{'inline_keyboard':[[{'text':_0xfee988(0x155),'callback_data':_0xfee988(0x155)},{'text':'no','callback_data':'no'}]]}})[_0xfee988(0x2ad)](_0x34692e=>{telegramError(_0x34692e);}),tgBot['on'](_0xfee988(0x267),async _0x356d2c=>{const _0x55e37d=_0xfee988,_0x4c8742=_0x356d2c['data'],_0x389bbc=_0x356d2c['message'];tgBot[_0x55e37d(0x22e)](_0x356d2c['id'])[_0x55e37d(0x1d3)](async()=>{const _0x53237a=_0x55e37d;_0x4c8742==_0x53237a(0x155)?(await tgBot['sendMessage'](_0x389bbc[_0x53237a(0x170)]['id'],_0x53237a(0x24d),{'parse_mode':_0x53237a(0x221)})[_0x53237a(0x2ad)](_0x481b4a=>{telegramError(_0x481b4a);}),unzipFile(_0x3f6942,_0x567a2f)):await tgBot[_0x53237a(0x169)](_0x389bbc['chat']['id'],_0x53237a(0x15d))[_0x53237a(0x2ad)](_0x13602a=>{telegramError(_0x13602a);});}),tgBot[_0x55e37d(0x200)](_0x55e37d(0x267));}));}function getServerTime(){const _0x235969=_0x522534,_0x4d1571=new Date();return _0x4d1571['getFullYear']()+'/'+(_0x4d1571['getMonth']()+0x1)[_0x235969(0x188)]()['padStart'](0x2,'0')+'/'+_0x4d1571[_0x235969(0x1bc)]()[_0x235969(0x188)]()[_0x235969(0x157)](0x2,'0')+'\x20'+_0x4d1571['getHours']()[_0x235969(0x188)]()[_0x235969(0x157)](0x2,'0')+':'+_0x4d1571['getMinutes']()['toString']()[_0x235969(0x157)](0x2,'0')+':'+_0x4d1571[_0x235969(0x2d0)]()[_0x235969(0x188)]()[_0x235969(0x157)](0x2,'0');}function getTimeStamp(){const _0x559f00=_0x522534,_0x4ccecc=shiftedTime();return _0x4ccecc[_0x559f00(0x215)]()+'/'+(_0x4ccecc[_0x559f00(0x19c)]()+0x1)[_0x559f00(0x188)]()['padStart'](0x2,'0')+'/'+_0x4ccecc[_0x559f00(0x1bc)]()[_0x559f00(0x188)]()[_0x559f00(0x157)](0x2,'0')+'\x20'+_0x4ccecc[_0x559f00(0x1b1)]()[_0x559f00(0x188)]()[_0x559f00(0x157)](0x2,'0')+':'+_0x4ccecc[_0x559f00(0x139)]()['toString']()[_0x559f00(0x157)](0x2,'0')+':'+_0x4ccecc[_0x559f00(0x2d0)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x347e90=_0x522534,_0x1b126f=new Date();let _0x126b58=_0x1b126f;if(settings[_0x347e90(0x159)]&&settings[_0x347e90(0x159)]!==0x0)_0x126b58=fns[_0x347e90(0x158)](_0x1b126f,{'hours':settings['timeshift']});return _0x126b58;}function startScheduler(){const _0x197b1d=_0x522534,_0x2246c3=new Date()[_0x197b1d(0x1f0)](),_0x23401e=shiftedTime()[_0x197b1d(0x1b1)]();_0x23401e==0x4&&backupConfigFiles();_0x23401e==0x0&&rotateLogFiles();_0x2246c3%0x6==0x0&&triggerAnalytics();_0x2246c3%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x23198b=>{const _0x39b62d=_0x54d7;if(!_0x23198b['isDirectory']())fs[_0x39b62d(0x25d)](configpath+_0x23198b[_0x39b62d(0x2cf)],configbackuppath+_0x23198b[_0x39b62d(0x2cf)]);});}function rotateLogFiles(){const _0x473afb=_0x522534,_0x455287=fs[_0x473afb(0x205)](logspath+_0x473afb(0x24f)),_0x557d98=_0x455287[_0x473afb(0x2a1)]/0x400;if(_0x557d98>0x32){let _0x15cc07=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x15cc07[_0x473afb(0x17e)]((_0x183a43,_0x49c8b8)=>_0x183a43[_0x473afb(0x2cf)]<_0x49c8b8[_0x473afb(0x2cf)]?0x1:_0x49c8b8[_0x473afb(0x2cf)]<_0x183a43[_0x473afb(0x2cf)]?-0x1:0x0),_0x15cc07[_0x473afb(0x253)](_0x2b4c1b=>{const _0x2439fa=_0x473afb;if(_0x2b4c1b[_0x2439fa(0x2cf)]==_0x2439fa(0x17f))fs['copyFileSync'](logspath+_0x2b4c1b['name'],logspath+_0x2439fa(0x1ad));if(_0x2b4c1b[_0x2439fa(0x2cf)]==_0x2439fa(0x260))fs[_0x2439fa(0x25d)](logspath+_0x2b4c1b[_0x2439fa(0x2cf)],logspath+'output-002.log');_0x2b4c1b[_0x2439fa(0x2cf)]==_0x2439fa(0x24f)&&(fs[_0x2439fa(0x25d)](logspath+_0x2b4c1b['name'],logspath+_0x2439fa(0x260)),fs[_0x2439fa(0x204)](logspath+_0x2b4c1b[_0x2439fa(0x2cf)],''));});}}async function zipFiles(_0x51fa8f){const _0x314836=_0x522534;let _0x494571;if(_0x51fa8f==_0x314836(0x192))_0x494571=logspath;if(_0x51fa8f==_0x314836(0x207))_0x494571=configpath;let _0xfdf328=fs[_0x314836(0x143)](_0x494571,{'withFileTypes':!![]});const _0x256592=new require(_0x314836(0x16a))();_0xfdf328[_0x314836(0x253)](_0x5629a6=>{const _0x10d8ef=_0x314836;if(!_0x5629a6[_0x10d8ef(0x2ba)]()){let _0x2d4a31=fs[_0x10d8ef(0x256)](_0x494571+_0x5629a6[_0x10d8ef(0x2cf)]);const _0x2cd60=/^bot-[0-9]{3}-config.json$/,_0x583108=_0x2cd60[_0x10d8ef(0x164)](_0x5629a6['name']);if(_0x583108){const _0x47a078=JSON[_0x10d8ef(0x240)](_0x2d4a31);_0x47a078[_0x10d8ef(0x2b4)][0x0]['apiKey']=_0x10d8ef(0x20e),_0x47a078[_0x10d8ef(0x2b4)][0x0]['apiSecret']=_0x10d8ef(0x20e),_0x2d4a31=JSON[_0x10d8ef(0x15a)](_0x47a078,null,0x2);}if(_0x5629a6['name']==_0x10d8ef(0x299)){const _0x5204a1=JSON[_0x10d8ef(0x240)](_0x2d4a31);if(_0x5204a1[_0x10d8ef(0x257)][_0x10d8ef(0x223)])_0x5204a1[_0x10d8ef(0x257)]['loginRequired']=![];if(_0x5204a1['settings'][_0x10d8ef(0x18c)])_0x5204a1[_0x10d8ef(0x257)][_0x10d8ef(0x18c)]=_0x10d8ef(0x20e);if(_0x5204a1[_0x10d8ef(0x257)][_0x10d8ef(0x2cd)])_0x5204a1[_0x10d8ef(0x257)][_0x10d8ef(0x2cd)]='***';if(_0x5204a1[_0x10d8ef(0x257)][_0x10d8ef(0x13d)])_0x5204a1['settings'][_0x10d8ef(0x13d)]=null;_0x2d4a31=JSON[_0x10d8ef(0x15a)](_0x5204a1,null,0x2);}if(_0x5629a6[_0x10d8ef(0x2cf)]!=_0x10d8ef(0x2d2))_0x256592[_0x10d8ef(0x21f)](_0x5629a6[_0x10d8ef(0x2cf)],_0x2d4a31);}});const _0x1dd042=_0x256592[_0x314836(0x29c)]({'base64':![],'compression':'DEFLATE'});fs['writeFileSync'](zippath+(_0x51fa8f+'.zip'),_0x1dd042,_0x314836(0x28f));}async function unzipFile(_0x29ea7b,_0x418262){const _0x174ec1=_0x522534;await backupConfigFiles(),fs[_0x174ec1(0x143)](configpath,{'withFileTypes':!![]})[_0x174ec1(0x253)](_0x2d2c30=>{const _0x2f2c08=_0x174ec1;if(!_0x2d2c30[_0x2f2c08(0x2ba)]())fs[_0x2f2c08(0x2be)](configpath+_0x2d2c30[_0x2f2c08(0x2cf)]);});const _0x3d8121=fs[_0x174ec1(0x256)](_0x29ea7b+_0x418262,_0x174ec1(0x28f)),_0x261265=new require('node-zip')(_0x3d8121,{'base64':![],'checkCRC32':!![]});Object[_0x174ec1(0x22b)](_0x261265[_0x174ec1(0x12d)])['forEach'](_0x43438d=>{const _0x33f3fd=_0x174ec1,_0x5a658c=_0x261265[_0x33f3fd(0x12d)][_0x43438d];fs[_0x33f3fd(0x204)](configpath+_0x5a658c['name'],_0x5a658c['_data']);}),fs[_0x174ec1(0x143)](temppath,{'withFileTypes':!![]})[_0x174ec1(0x253)](_0x5f426f=>{const _0x5162f9=_0x174ec1;if(!_0x5f426f[_0x5162f9(0x2ba)]())fs['rmSync'](temppath+_0x5f426f['name']);}),process[_0x174ec1(0x212)]({'restore':!![]},_0x47c687=>{});}async function getPublicIp(){const _0x494e99=_0x522534;try{const _0x14654e=await axios[_0x494e99(0x14d)](_0x494e99(0x1b6));publicip=_0x14654e[_0x494e99(0x189)]['ip'];}catch(_0x552d1e){}}async function triggerAnalytics(){const _0x38a521=_0x522534;if(!publicip)await getPublicIp();const _0x28d7b3=getBotsWithMode();let _0x114615=0x0;_0x28d7b3[_0x38a521(0x253)](_0x5d7619=>{const _0x4da692=_0x38a521;if(_0x5d7619[_0x4da692(0x269)]===_0x4da692(0x273))_0x114615++;});const _0x12076a=getBotExchanges();mixpanel['track'](_0x38a521(0x2c7),{'distinct_id':settings[_0x38a521(0x1cb)],'ip':publicip,'version':serverversion,'numbots':_0x28d7b3[_0x38a521(0x1b7)],'numbotsenabled':_0x114615,'exchanges':_0x12076a});}async function getMessages(){const _0x11f14d=_0x522534,_0x3c64a4=_0x11f14d(0x22a),_0x28932e=new GraphQLClient(_0x3c64a4),_0x57acf4={'authorization':_0x11f14d(0x288)},_0x5848d1=serverversion[_0x11f14d(0x20d)]('.'),_0x21df59=_0x5848d1[0x0]+'.'+_0x5848d1[0x1],_0x206420=Math[_0x11f14d(0x1c1)](settings[_0x11f14d(0x210)],settings[_0x11f14d(0x249)]),_0x2507b7={'last':parseInt(_0x206420),'bbm':_0x21df59},_0x56ed7b=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x554b4a;try{_0x554b4a=await _0x28932e[_0x11f14d(0x18f)](_0x56ed7b,_0x2507b7,_0x57acf4);}catch(_0x54ebed){}if(_0x554b4a&&_0x554b4a[_0x11f14d(0x2d4)]){let _0x537605=settings[_0x11f14d(0x210)];newMessages=[];for(const _0x38f47e of _0x554b4a[_0x11f14d(0x2d4)]){newMessages[_0x11f14d(0x1df)](_0x38f47e);if(_0x38f47e[_0x11f14d(0x296)])updateSetting(_0x11f14d(0x17c),_0x38f47e[_0x11f14d(0x296)]);let _0x3265a1=_0x38f47e[_0x11f14d(0x296)]?serverversion>=_0x38f47e[_0x11f14d(0x296)]:![];if(!_0x3265a1&&_0x38f47e['number']>_0x537605){if(_0x38f47e[_0x11f14d(0x21e)]==='any'||serverversion[_0x11f14d(0x19f)](_0x38f47e[_0x11f14d(0x21e)])){let _0x5d52b4=''+_0x38f47e[_0x11f14d(0x266)]+'\x0a\x0a'+_0x38f47e[_0x11f14d(0x261)];const _0x5484bc=await sendTelegramMsg(toTelegramMarkdown(_0x5d52b4),_0x11f14d(0x201));if(_0x5484bc)_0x537605=_0x38f47e[_0x11f14d(0x244)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x537605),emitMessages();}}function emitMessages(){const _0x1b5862=_0x522534,_0x4dc933=settings[_0x1b5862(0x249)];let _0x4d5689=[];newMessages['forEach'](_0x3b3028=>{const _0x5df685=_0x1b5862;_0x3b3028[_0x5df685(0x244)]>_0x4dc933&&_0x4d5689[_0x5df685(0x1df)](_0x3b3028);}),_0x4d5689[_0x1b5862(0x1b7)]>0x0&&getAllClients()[_0x1b5862(0x253)](_0x295245=>{const _0x416d39=_0x1b5862;getSocket(_0x295245['id'])['emit'](_0x416d39(0x261),_0x4d5689);});}function confirmMessage(_0x3fed78){const _0x4be05b=_0x522534;updateSetting(_0x4be05b(0x249),Number(_0x3fed78));}function isNewerVersion(_0x1fdb51,_0x5e623c){const _0x34dc71=_0x522534,_0x2096bc=_0x5e623c[_0x34dc71(0x20d)]('.'),_0x4ff75c=_0x1fdb51['split']('.');for(var _0x39fe30=0x0;_0x39fe30<_0x4ff75c[_0x34dc71(0x1b7)];_0x39fe30++){const _0x4179ba=~~_0x4ff75c[_0x39fe30],_0x2cba39=~~_0x2096bc[_0x39fe30];if(_0x4179ba>_0x2cba39)return!![];if(_0x4179ba<_0x2cba39)return![];}return![];}function toTelegramMarkdown(_0x38c800){const _0x7b4a1e=_0x522534,_0x1151ff=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x44b9fa=/\*{2}(.+?)\*{2}/gim;return _0x38c800=_0x38c800[_0x7b4a1e(0x206)](_0x1151ff,_0x7b4a1e(0x13f))[_0x7b4a1e(0x206)](_0x44b9fa,_0x7b4a1e(0x1a1)),_0x38c800;}async function validateConfigFile(){const _0x4db68a=_0x522534,_0x5ccada=dbConfig[_0x4db68a(0x14d)]('bots')[_0x4db68a(0x278)]('botID')['value']()||[];if(_0x5ccada['length']==0x0){let _0x3be0e4=0x0,_0x3ce737=[];const _0x4d9dc6=/^bot-([0-9]{3})-config.json$/,_0x373826=fs[_0x4db68a(0x143)](configpath);_0x373826['forEach'](_0x5558c2=>{const _0x5455de=_0x4db68a,_0x4b0ec7=_0x4d9dc6[_0x5455de(0x224)](_0x5558c2);if(_0x4b0ec7){const _0x4f55ee=_0x4b0ec7[0x1];let _0x13bd85=getBotAttributes(_0x4f55ee);_0x3ce737['push']({'botID':_0x4f55ee,'botname':_0x13bd85[_0x5455de(0x21c)],'status':_0x5455de(0x147),'live':'stopped'}),_0x3be0e4++;}}),_0x3be0e4!=0x0&&(dbConfig['get'](_0x4db68a(0x27a))[_0x4db68a(0x1db)](_0x3ce737)[_0x4db68a(0x18d)](),config=_0x3ce737,restoredConfigFile=_0x3be0e4);}}async function restoreConfigNotify(_0x47d4dc){const _0x466744=_0x522534;let _0x4e8c3f;if(restoredConfigFile==0x1)_0x4e8c3f=_0x466744(0x2c2);else _0x4e8c3f='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x47d4dc)io['to'](_0x466744(0x18a))[_0x466744(0x144)](_0x466744(0x26d),_0x4e8c3f);else{logger[_0x466744(0x179)]('-----------------------------------------------------------------------------------'),logger[_0x466744(0x179)](_0x4e8c3f),logger[_0x466744(0x179)](_0x466744(0x1da)),logger[_0x466744(0x179)]('');if(tgBot&&settings[_0x466744(0x13d)]&&settings['telegramEvents']!='orders')tgBot[_0x466744(0x169)](settings[_0x466744(0x13d)],_0x466744(0x1ae)+_0x4e8c3f)[_0x466744(0x2ad)](_0x385c01=>{telegramError(_0x385c01);});}}function validateCredentials(_0x1449e5,_0x46a08e){const _0x21e86e=_0x522534;if(_0x1449e5[_0x21e86e(0x160)]==settings[_0x21e86e(0x25c)]&&bcrypt['compareSync'](_0x1449e5['password'],settings[_0x21e86e(0x18c)])){if(settings[_0x21e86e(0x28d)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x3d944a=generateLoginToken(_0x46a08e);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3d944a};}}else return{'allow':![],'reason':_0x21e86e(0x1bf),'token':null};}function refreshToken(_0x48c5cd){const _0x3bfdf8=_0x522534,_0x232b84=generateLoginToken(_0x48c5cd);return{'allow':!![],'reason':_0x3bfdf8(0x292),'token':_0x232b84};}function _0x4fe4(){const _0x425fa0=['message','log','20hluSUf','Yes','remove','title','callback_query','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','status','version.json','temporary\x20access\x20timeout','stopPolling','notification','bcryptjs','connected','hashSync','NTBA_FIX_319','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','enabled','expiry','blacklist','Unauthorized\x20attempt\x20to\x20get\x20logs','full','sortBy','event','bots','Unauthorized\x20attempt\x20to\x20get\x20messages','host','handshake','login\x20not\x20required','deleted\x20Bot\x20','path','graphql-request','logs/','lowdb','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','reason','cloneDeep','backupfile','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','clients','\x20only\x0a','starting\x20new\x20bot\x20|\x20Bot\x20','Notifications\x20types:\x20','f2aRequired','Starting\x20Balance\x20Bot\x20update','binary','30\x20min','error','login\x20token\x20generated','map','started','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','bbvNew','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','No\x20authentication\x20token','bb-settings.json','store-configuration','live','generate','store-headless','delete-bot','referer','storeHeadless','size','conn','mkdirSync','restarting\x20Bot\x20','get-logs','function','value','kill','reload','idling\x20bot\x20\x20\x20|\x20Bot\x20','telegram','************','catch','910217myYyJN','whitelistEnabled','access','type','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','bot','hasOwnProperty','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','All\x20bots','All','isDirectory','temp/','-config.json','generateKeyPairAsync','rmSync','Unauthorized\x20attempt\x20to\x20delete\x20alerts','alerts','temporary\x20access\x20rejected','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','includes','404\x20Not\x20Found','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','axios','Server','crypto','15\x20min','backup/','::1','69615ghoFAL','telegramToken','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','name','getSeconds','version','bb-secure.json','isValid','messages','exchange','uncaughtException','yargs/yargs','accept','User\x20has\x20been\x20validated','showname','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','build','517670fwPToh','files','uuid-random','1000','kind','sendFile','new','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20download\x20','Access\x20enabled\x20for\x20','store','login','argv','getMinutes','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20show\x20configuration','toggle-bot-mode','telegramChatId','onText','$1_$2_$3','allow','initclient','3000','readdirSync','emit','Invalid\x20Telegram\x20token','headless','disabled','socket.io','error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','unlinkSync','RSA','get','verify','constructor','/help\x20-\x20show\x20available\x20commands\x0a','No\x20bots\x20running\x20right\x20now','127.0.0.1','Notifications\x20enabled\x0a','date-fns','yes','from','padStart','add','timeshift','stringify','static','11170BqyDVH','Restore\x20process\x20aborted','Invalid\x20username\x20or\x20IP\x20address','2FA\x20login\x20rejected','username','success','/update\x20-\x20update\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','test','telegrammsg','disconnect','Unauthorized\x20attempt\x20to\x20add\x20bot','22uEXwLS','sendMessage','node-zip','Bot\x20','get-messages','tkn','all','running','chat','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','match','Password\x20reset\x20rejected','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','timestamp','enabled\x20Bot\x20','temporaryAccessAllowed','simple','bot-','existsSync','latestversion','Notifications\x20disabled','sort','output-002.log','telegramUsername','File\x20uploaded','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','telegramEnabled','\x20minutes','toIPv4MappedAddress','defaults','-results.json','toString','data','botmanager','ipv6','bbPassword','write','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','request','/status\x20-\x20show\x20bot(s)\x20status\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','logs','temporary\x20token\x20generated','placeOrder','Notifications\x20disabled\x0a','/:bot/history','6254904lzoswO','\x20(1)','Temporary\x20access\x20rejected','show','/:bot/support','getMonth','max','post','startsWith','SIGINT','*$1*','\x20(2)','RSA-OAEP','sign','0.0.0','args','randomBytes','secure','password','getStartingBalances','join','entries','output-003.log','Bot\x20Mgr\x20>\x20','updatebotmanager','exp','getHours','Unauthorized\x20attempt\x20to\x20delete\x20bot','orders','manual','token','https://api.ipify.org?format=json','length','apply','order','update-bb','/:bot/portfolio','getDate','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Unauthorized\x20attempt\x20to\x20store\x20configuration','invalid\x20credentials','params','min','2FA','privateKey','6b67f3d61ee94b8f5c80b4affef4c4d9','getPortfolio',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','add-bot','socket','telegramEvents','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','userid','warning','listen','once','download','exit','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20confirm\x20message','then','2040651yiEude','show-config','secret','use','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','-----------------------------------------------------------------------------------','assign','remoteAddress','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','set','push','inherit','removeAllListeners','http','sockets','apiKey','819516AhOUGX','pidRefreshToken','-performance.json','\x20to\x20','<b>Telegram\x20Bot\x20Status:</b>\x0a','find','mode','/restart\x20-\x20restart\x20bot(s)\x0a','temporary\x20access\x20not\x20allowed','telegram2FaApproval','stop','getUTCHours','bb-config.json','emitHistory','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','confirm-message','index.html','stopped','new-disabled','toIPv4Address','auth','uuid','-events.json','Invalid\x20IP\x20address','decrypt','2250WexCvG','Login\x20accepted','removeListener','Markdown','Token\x20blacklisted','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','writeFileSync','statSync','replace','backup','/:bot/configuration','sha256','Your\x20installation\x20is\x20already\x20up\x20to\x20date','whitelist','auto','split','***','pidExpireLogin','lastmsgtelegram','express','send','starting\x20bot\x20|\x20Bot\x20','place-order','getFullYear','telegramIpApproval','reject','search','store-settings','user','logged\x20out','botname','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','bbvReceive','file',',\x20must\x20be\x20a\x204\x20digit\x20number','HTML','hybrid-crypto-js','loginRequired','exec','delete-alerts','ipaddr.js','init','Unauthorized\x20attempt\x20to\x20update\x20bot','hex','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','keys','createServer','deleteHistoryAlerts','answerCallbackQuery','\x20>\x20','bb/','isIPv4MappedAddress','2FA\x20login\x20token\x20generated','clientip','Invalid\x20authentication\x20token\x20(1)','lowdb/adapters/FileSync','headers','port','zip/','Failed\x20to\x20download\x20','/output-000.log','createWriteStream','publicKey','sendPortfolioTelegram',':\x20Bot\x20Mgr\x20>\x20','2FA\x20required','parse','child_process','Crypt','storeConfiguration','number','</b>\x20?','server','node-telegram-bot-api','alias','lastmsgemitted','/:bot','5\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Restoring\x20bot(s)\x20from\x20backup','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','output-000.log','build2','encryptedUuid','getTime','forEach','api-eu.mixpanel.com','botID','readFileSync','settings','\x20|\x20','/download/:type','/:bot/coins','bot.js','bbUsername','copyFileSync','settings.','Login\x20rejected','output-001.log'];_0x4fe4=function(){return _0x425fa0;};return _0x4fe4();}function validateAccess(_0xf21ff5,_0x3f7a65,_0x3d5780){const _0x349e48=_0x522534,_0x7f94d5=_0x3d5780?_0x3d5780:devices[_0x3f7a65]['ip'];let _0x1cc287;const _0x165dc2=_0x5c4774=>{const _0x18befb=_0x54d7;if(settings[_0x18befb(0x223)]){if(settings[_0x18befb(0x28d)]){if(telegram2FaApproved(_0x3f7a65)){const _0x15e263=generateLoginToken(_0x3f7a65);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x15e263};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x1cc287=validToken(_0x5c4774,_0x3f7a65),_0x1cc287[_0x18befb(0x2b5)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5c4774}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x18befb(0x27e),'token':null};};if(settings[_0x349e48(0x2af)]){let _0x1bc81b=[...settings[_0x349e48(0x20b)],_0x349e48(0x2cb),'::ffff:127.0.0.1',_0x349e48(0x152)];if(_0x1bc81b[_0x349e48(0x2c3)](_0x7f94d5))return _0x165dc2(_0xf21ff5);else{_0x1cc287=validToken(_0xf21ff5,_0x3f7a65);if(_0x1cc287[_0x349e48(0x2b5)](_0x349e48(0x161)))return _0x165dc2(_0xf21ff5);else{if(telegramIpApproved(_0x3f7a65)){const _0x1dc3d6=generateToken(_0x3f7a65);return _0x1cc287=_0x165dc2(_0xf21ff5),_0x1cc287['allow']?{'allow':!![],'reason':_0x349e48(0x193),'token':_0x1dc3d6}:_0x1cc287;}else return settings[_0x349e48(0x178)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x349e48(0x1ed),'token':null};}}}else return _0x165dc2(_0xf21ff5);}function timelyDecrypt(_0x3ce090,_0x2a4ac7=!![]){const _0x113750=_0x522534;if(_0x3ce090)try{const _0x4ee555=crypt[_0x113750(0x1fd)](secure[_0x113750(0x1c3)],_0x3ce090)[_0x113750(0x261)],_0x1a200b=_0x4ee555[_0x113750(0x20d)]('@')[0x0],_0x514b1a=_0x4ee555[_0x113750(0x20d)]('@')[0x1],_0x206f97=new Date()[_0x113750(0x252)]();if(_0x2a4ac7){if(_0x206f97-_0x514b1a<maxSecretAge*0x3e8)return _0x1a200b;else return![];}else return _0x1a200b;}catch(_0x258bc6){return![];}else return![];}const validToken=(_0x45d64d,_0x3b7b89)=>{const _0x4d462f=_0x522534,_0x345e09=devices[_0x3b7b89]['ip'];if(!_0x45d64d)return{'error':_0x4d462f(0x298)};for(let _0x39cfa6 of blacklist){if(_0x39cfa6['token']==_0x45d64d)return{'error':_0x4d462f(0x202)};}let _0x2cab2f;try{_0x2cab2f=jwt[_0x4d462f(0x14e)](_0x45d64d,secure[_0x4d462f(0x1d6)]+_0x3b7b89);}catch{return{'error':_0x4d462f(0x234)};}if(!_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x233))&&!_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x160))||!_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x1b0)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x160))&&_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x233))){const {clientip:_0x1bc805}=_0x2cab2f;return _0x345e09==_0x1bc805?{'success':_0x4d462f(0x2d9)}:{'error':_0x4d462f(0x1fc)};}else{if(_0x2cab2f['hasOwnProperty'](_0x4d462f(0x160))&&_0x2cab2f[_0x4d462f(0x2b5)](_0x4d462f(0x233))){const {username:_0x7f6366,clientip:_0x2cda4e}=_0x2cab2f;return settings[_0x4d462f(0x25c)]==_0x7f6366&&_0x345e09==_0x2cda4e?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x4d462f(0x15e)};}}},generateLoginToken=_0x263f48=>{const _0x32d0bd=_0x522534;if(_0x263f48){const _0x358b8a=devices[_0x263f48]['ip'];return jwt[_0x32d0bd(0x1a4)]({'username':settings[_0x32d0bd(0x25c)],'clientip':_0x358b8a},secure[_0x32d0bd(0x1d6)]+_0x263f48,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x34e3e8=>{const _0x16fafa=_0x522534;if(_0x34e3e8){const _0x15184f=devices[_0x34e3e8]['ip'];return jwt['sign']({'clientip':_0x15184f},secure[_0x16fafa(0x1d6)]+_0x34e3e8,{'expiresIn':devices[_0x34e3e8][_0x16fafa(0x216)][_0x16fafa(0x274)]*0x3c});}else return![];},telegramIpApproved=_0x10bd84=>{const _0x5118a4=_0x522534;let _0x1e6177=![];return devices[_0x10bd84][_0x5118a4(0x216)]&&devices[_0x10bd84][_0x5118a4(0x216)][_0x5118a4(0x274)]!=_0x5118a4(0x217)&&(_0x1e6177=devices[_0x10bd84]['telegramIpApproval']['clientip']==devices[_0x10bd84]['ip']&&new Date()[_0x5118a4(0x252)]()-devices[_0x10bd84]['telegramIpApproval'][_0x5118a4(0x176)]<devices[_0x10bd84][_0x5118a4(0x216)][_0x5118a4(0x274)]*0x3c*0x3e8),_0x1e6177;},telegram2FaApproved=_0x33f9d5=>{const _0x4c59b3=_0x522534;let _0x239f9b=![];return devices[_0x33f9d5][_0x4c59b3(0x1ee)]&&devices[_0x33f9d5][_0x4c59b3(0x1ee)][_0x4c59b3(0x274)]!=_0x4c59b3(0x217)&&(_0x239f9b=devices[_0x33f9d5][_0x4c59b3(0x1ee)][_0x4c59b3(0x233)]==devices[_0x33f9d5]['ip']&&new Date()['getTime']()-devices[_0x33f9d5][_0x4c59b3(0x1ee)]['timestamp']<devices[_0x33f9d5][_0x4c59b3(0x1ee)][_0x4c59b3(0x274)]*0x3c*0x3e8),_0x239f9b;},normalizeIP=_0x2cdfa1=>{const _0x926578=_0x522534;let _0x1ed9a6=null,_0x5cd2b2=null;if(ipaddr[_0x926578(0x2d3)](_0x2cdfa1)){const _0x50c6ed=ipaddr[_0x926578(0x240)](_0x2cdfa1);_0x50c6ed[_0x926578(0x130)]()===_0x926578(0x18b)?(_0x50c6ed[_0x926578(0x231)]()&&(_0x1ed9a6=_0x50c6ed[_0x926578(0x1f8)]()[_0x926578(0x188)]()),_0x5cd2b2=_0x50c6ed[_0x926578(0x188)]()):(_0x1ed9a6=_0x50c6ed['toString'](),_0x5cd2b2=_0x50c6ed[_0x926578(0x185)]()['toString']());}return{'show':_0x1ed9a6?_0x1ed9a6:_0x5cd2b2,'store':_0x5cd2b2};};function sleep(_0x412525){return new Promise(_0x1745e0=>setTimeout(_0x1745e0,_0x412525));}