const _0x35ba69=_0x52ea;function _0x52ea(_0x3ec927,_0x11f1ae){const _0x5660e4=_0x2c60();return _0x52ea=function(_0xa7cb9,_0x22c6ff){_0xa7cb9=_0xa7cb9-0x159;let _0x2c601e=_0x5660e4[_0xa7cb9];return _0x2c601e;},_0x52ea(_0x3ec927,_0x11f1ae);}(function(_0x57baf9,_0x5f4101){const _0xfb7812=_0x52ea,_0x169bbe=_0x57baf9();while(!![]){try{const _0x4cda4b=parseInt(_0xfb7812(0x1f8))/0x1+-parseInt(_0xfb7812(0x205))/0x2+parseInt(_0xfb7812(0x28c))/0x3+-parseInt(_0xfb7812(0x1bd))/0x4+-parseInt(_0xfb7812(0x171))/0x5*(parseInt(_0xfb7812(0x24d))/0x6)+parseInt(_0xfb7812(0x234))/0x7*(-parseInt(_0xfb7812(0x229))/0x8)+parseInt(_0xfb7812(0x27f))/0x9*(parseInt(_0xfb7812(0x261))/0xa);if(_0x4cda4b===_0x5f4101)break;else _0x169bbe['push'](_0x169bbe['shift']());}catch(_0x111430){_0x169bbe['push'](_0x169bbe['shift']());}}}(_0x2c60,0xe3446));function _0x2c60(){const _0x4260a2=['reject','parse','telegramUsername','logged\x20out','Unauthorized\x20attempt\x20to\x20update\x20settings','default','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','filter','env','search','token','backup/',',\x20must\x20be\x20a\x204\x20digit\x20number','mkdirSync','Invalid\x20authentication\x20token\x20(1)','bb/','isIPv4MappedAddress','hybrid-crypto-js','7991274VMcNeC','/on\x20-\x20start\x20bot(s)\x0a','<b>Telegram\x20bot\x20status:</b>\x0a','event','starting\x20new\x20bot\x20|\x20Bot\x20','includes','getDate','getUTCHours','Unauthorized\x20attempt\x20to\x20update\x20bot','update-bot','length','All','\x20/\x20','getMinutes','\x20>\x20','padStart','Balance\x20Bot\x20Server','/:bot/coins','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','disabled\x20Bot\x20','330OBPyHp','telegramEnabled','::ffff:127.0.0.1','generateKeyPairAsync','from','orders','pidExpireLogin','onText','live','-----------------------------------------------------------------------------------','success','2FA\x20login\x20required','Login\x20rejected','Invalid\x20IP\x20address','argv','getFullYear','</b>\x20?','Bot\x20','lowdb/adapters/FileSync','function','\x20minutes','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','version','Temporary\x20access\x20rejected','sendMessage','exit','find','starting\x20bot\x20|\x20Bot\x20','/:bot/support','Access\x20enabled\x20for\x20','1210761fLdmbC','bot-','Unauthorized\x20attempt\x20to\x20add\x20bot','emit','logout','order','entries','remove','placeOrder','HTML','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','User\x20has\x20been\x20validated','botmanager','1260195zvNyEd','add','/:bot/performance','loginRequired','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','No\x20bots\x20running\x20right\x20now','analytics','inherit','access','accept','expiry','socket.io','/:bot/portfolio','storeHeadless','temporary\x20access\x20timeout','Allow\x20login\x20from\x20IP\x20address\x20<b>','update-bb','privateKey','Login\x20accepted','timestamp','randomBytes','/enable\x20-\x20enable\x20notifications\x0a','type','kind','Unauthorized\x20attempt\x20to\x20get\x20portfolio','emitHistory','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','referer','encryptedUuid','Notifications\x20enabled\x0a','getMonth','bb-secure.json','child_process','isDirectory','UA-192771731-1','Unauthorized\x20attempt\x20to\x20delete\x20bot','getTime','message','clientip','enabled','uuid','push','bot.js','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getSeconds','/disable\x20-\x20disable\x20notifications\x0a','send','status','timeshift','sortBy','invalid\x20credentials','temporary\x20access\x20not\x20allowed','5YItJqV','existsSync','delete-bot','headers','user','new','storeConfiguration','idling\x20bot\x20\x20\x20|\x20Bot\x20','pidRefreshToken','error','slice','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','telegram2FaApproval','catch','set','login\x20token\x20generated','get-logs','stop','login\x20not\x20required','2FA\x20required','auth','settings.','connected','botID','stopped','secure','telegramEvents','value','readdirSync','telegramIpApproval','whitelistEnabled','bot','No\x20authentication\x20token','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','username','show','log','then','once','showname','/help\x20-\x20show\x20available\x20commands\x0a',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed',':\x20Bot\x20Mgr\x20>\x20','f2aRequired','/:bot','botname','/:bot/configuration','server','add-bot','date-fns','-config.json','\x20only\x0a','match','assign','answerCallbackQuery','15\x20min','hex','cancelLoading','Invalid\x20authentication\x20token\x20(2)','store-settings','chat','build2','restarting\x20Bot\x20','/:bot/history','alerts','ipv6','access\x20timeout','Notifications\x20disabled','running','forEach','all','getPortfolio','secret','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Password\x20has\x20been\x20reset\x20to:\x20','publicKey','5147300EowdIP','sha256','static','kill','login','get-starting-balances','express','initclient','stopPolling','error\x20while\x20deleting\x20config\x20files:\x20','get-portfolio','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','2FA','use','settings','temporary\x20access\x20rejected','RSA','NTBA_FIX_319','callback_query','hasOwnProperty','yargs/yargs','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','defaults','node-telegram-bot-api','whitelist','Crypt','hashSync','build','listen','randomFillSync','<b>Balance\x20Bot\x20status:</b>\x0a','name','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','bots','Unauthorized\x20attempt\x20to\x20store\x20configuration','write','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','handshake','join','new-disabled','disconnect','ipc','2FA\x20login\x20rejected','3000','unlinkSync','getHours','conn','decrypt','allow','getStartingBalances','::1','disabled','split','jsonwebtoken','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Notifications\x20disabled\x0a','removeListener','telegramChatId','1743494fdqluc','SIGTERM','crypto','../install.js','temporary\x20token\x20generated','connection','\x20|\x20','Token\x20blacklisted','isValid','ipaddr.js','Unauthorized\x20attempt\x20to\x20log\x20out','temporaryAccessAllowed','sockets','3646948NTDzPn','verify','https://hodlerhacks.com','telegramToken','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','password','index.html','1000','SIGINT','cloneDeep','bbUsername','remoteAddress','clients','data','reason','-results.json','RSA-OAEP','telegram','blacklist','Notifications\x20types:\x20','Balance\x20Bot','started','keys','apply','toString','max','All\x20bots','notification','************','127.0.0.1','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bb-config.json','Notifications\x20enabled','Orders','config/','2FA\x20login\x20token\x20generated','204992GCaUFs','reload','/status\x20-\x20show\x20bot(s)\x20status\x0a','(((.+)+)+)+$','reset-password','Invalid\x20Telegram\x20token','bbPassword','page','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','createServer','place-order','336MXRjph','get','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sendFile','http','/off\x20-\x20stop\x20bot(s)\x0a','sign'];_0x2c60=function(){return _0x4260a2;};return _0x2c60();}const _0x22c6ff=function(){let _0x175ede=!![];return function(_0x2c81ad,_0x50bc){const _0x286ac8=_0x175ede?function(){const _0x1396ef=_0x52ea;if(_0x50bc){const _0xa8b0cc=_0x50bc[_0x1396ef(0x21c)](_0x2c81ad,arguments);return _0x50bc=null,_0xa8b0cc;}}:function(){};return _0x175ede=![],_0x286ac8;};}(),_0xa7cb9=_0x22c6ff(this,function(){const _0x523874=_0x52ea;return _0xa7cb9[_0x523874(0x21d)]()[_0x523874(0x244)](_0x523874(0x22c))[_0x523874(0x21d)]()['constructor'](_0xa7cb9)[_0x523874(0x244)]('(((.+)+)+)+$');});_0xa7cb9();'use strict';process[_0x35ba69(0x243)][_0x35ba69(0x1cf)]=0x1;const childProcess=require(_0x35ba69(0x15d)),FileSync=require(_0x35ba69(0x273)),fs=require('fs'),fns=require(_0x35ba69(0x1a2)),low=require('lowdb'),path=require('path'),crypto=require(_0x35ba69(0x1fa)),Crypt=require('hybrid-crypto-js')[_0x35ba69(0x1d7)],RSA=require(_0x35ba69(0x24c))[_0x35ba69(0x1ce)],bcrypt=require('bcryptjs'),jwt=require(_0x35ba69(0x1f3)),analyticsLib=require(_0x35ba69(0x292))[_0x35ba69(0x240)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x35ba69(0x201)),argv=require(_0x35ba69(0x1d2))(process[_0x35ba69(0x26f)][_0x35ba69(0x17b)](0x2))[_0x35ba69(0x26f)],PORT=argv['port']||_0x35ba69(0x1e9),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x35ba69(0x195)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x35ba69(0x247)),process[_0x35ba69(0x27a)](0x1);const HOST=argv['host']||null,userID=argv[_0x35ba69(0x175)]||'';let bbpath=_0x35ba69(0x24a),bbpath2='';const botfile=_0x35ba69(0x167),configfile=_0x35ba69(0x224),settingsfile='bb-settings.json',securefile=_0x35ba69(0x15c),validInstallation=fs[_0x35ba69(0x172)](_0x35ba69(0x1fb));!fs[_0x35ba69(0x172)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x35ba69(0x211)),configpath=userID?bbpath+_0x35ba69(0x227)+userID+'/':bbpath+_0x35ba69(0x227),configbackuppath=configpath+_0x35ba69(0x246);!fs['existsSync'](configpath)&&fs[_0x35ba69(0x248)](configpath);!fs[_0x35ba69(0x172)](configbackuppath)&&fs[_0x35ba69(0x248)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x35ba69(0x1d4)]({'bots':[]})[_0x35ba69(0x1e1)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x35ba69(0x1d4)]({'settings':{'timeshift':0x0}})[_0x35ba69(0x1e1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x35ba69(0x1e1)]();let crypt=new Crypt({'md':_0x35ba69(0x1be),'rsaStandard':_0x35ba69(0x215)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x35ba69(0x277)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x35ba69(0x1c3)),app=express(),http=require(_0x35ba69(0x238))[_0x35ba69(0x232)](app);app[_0x35ba69(0x1cb)](express['static'](path['join'](__dirname,bbpath2,_0x35ba69(0x1ae)))),app[_0x35ba69(0x1cb)](express[_0x35ba69(0x1bf)](path['join'](__dirname,bbpath2,'build'))),app[_0x35ba69(0x235)]('/',function(_0xc13181,_0x152101){const _0x1ca8b0=_0x35ba69;_0x152101[_0x1ca8b0(0x237)](path[_0x1ca8b0(0x1e4)](__dirname,bbpath2,_0x1ca8b0(0x1ae),_0x1ca8b0(0x20b)));}),app[_0x35ba69(0x235)](_0x35ba69(0x19d),function(_0x3ecc9a,_0x33c783){const _0x2b02d4=_0x35ba69;_0x33c783[_0x2b02d4(0x237)](path[_0x2b02d4(0x1e4)](__dirname,bbpath2,_0x2b02d4(0x1d9),_0x2b02d4(0x20b)));}),app['get'](_0x35ba69(0x298),(_0x3c0aae,_0xe27501)=>{const _0x28746c=_0x35ba69;_0xe27501[_0x28746c(0x237)](path[_0x28746c(0x1e4)](__dirname,bbpath2,_0x28746c(0x1d9),'index.html'));}),app[_0x35ba69(0x235)](_0x35ba69(0x28e),(_0x141ae7,_0x2d1fa8)=>{const _0x53eecd=_0x35ba69;_0x2d1fa8[_0x53eecd(0x237)](path[_0x53eecd(0x1e4)](__dirname,bbpath2,_0x53eecd(0x1d9),'index.html'));}),app[_0x35ba69(0x235)](_0x35ba69(0x25e),(_0x10c59f,_0x274c4c)=>{const _0x366ca4=_0x35ba69;_0x274c4c[_0x366ca4(0x237)](path['join'](__dirname,bbpath2,_0x366ca4(0x1d9),'index.html'));}),app[_0x35ba69(0x235)](_0x35ba69(0x1b0),(_0x33364e,_0x4c00ff)=>{const _0x3a2ee6=_0x35ba69;_0x4c00ff[_0x3a2ee6(0x237)](path['join'](__dirname,bbpath2,_0x3a2ee6(0x1d9),_0x3a2ee6(0x20b)));}),app[_0x35ba69(0x235)](_0x35ba69(0x19f),(_0x35caa3,_0x111087)=>{const _0x5e3c21=_0x35ba69;_0x111087['sendFile'](path[_0x5e3c21(0x1e4)](__dirname,bbpath2,'build','index.html'));}),app[_0x35ba69(0x235)](_0x35ba69(0x27d),(_0x4ef41e,_0x19e6c1)=>{const _0x1dcf0e=_0x35ba69;_0x19e6c1[_0x1dcf0e(0x237)](path['join'](__dirname,bbpath2,_0x1dcf0e(0x1d9),_0x1dcf0e(0x20b)));});if(HOST)http[_0x35ba69(0x1da)](PORT,HOST);else http[_0x35ba69(0x1da)](PORT);const io=require(_0x35ba69(0x297))(http,{}),analytics=analyticsLib({'app':_0x35ba69(0x219),'plugins':[googleAnalytics({'trackingId':_0x35ba69(0x15f)})]}),TelegramBot=require(_0x35ba69(0x1d5));let tgBot;if(settings[_0x35ba69(0x208)]&&settings['telegramToken']!=''&&settings[_0x35ba69(0x23d)]&&settings[_0x35ba69(0x23d)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5e580b=_0x35ba69;console['log'](''),console[_0x5e580b(0x195)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x5e580b(0x195)](_0x5e580b(0x26a));if(config['length']!=0x0)config[_0x5e580b(0x1b6)](_0x5b1c11=>{const _0x5e7e5f=_0x5e580b;if(_0x5b1c11[_0x5e7e5f(0x16c)]==_0x5e7e5f(0x164)||_0x5b1c11['status']=='new')logging(_0x5e7e5f(0x27c)+_0x5b1c11['botID']+'\x20|\x20'+_0x5b1c11[_0x5e7e5f(0x19e)]),startBot([_0x5b1c11[_0x5e7e5f(0x188)],userID],{'cwd':bbpath},function(_0x511def){if(_0x511def)logging(_0x511def);});else(_0x5b1c11['status']==_0x5e7e5f(0x1f1)||_0x5b1c11[_0x5e7e5f(0x16c)]==_0x5e7e5f(0x1e5))&&logging(_0x5e7e5f(0x178)+_0x5b1c11['botID']+_0x5e7e5f(0x1fe)+_0x5b1c11[_0x5e7e5f(0x19e)]);});else!newBot&&console['log'](_0x5e580b(0x1e2));if(newBot)addBot();console['log'](_0x5e580b(0x26a)),console['log']('');}function startSocket(){const _0x4ccdf7=_0x35ba69;io['on'](_0x4ccdf7(0x1fd),_0x36576d=>{const _0x155983=_0x4ccdf7;let _0x64a9a,_0xed4d65,_0xdc788,_0x48e63c,_0x3af0bd;const _0x1dc385=_0x36576d['handshake'][_0x155983(0x174)][_0x155983(0x2a8)];_0xed4d65=_0x1dc385[_0x155983(0x1a5)](/bot[0-9]{3}/);if(_0xed4d65)_0xdc788=_0xed4d65[0x0][_0x155983(0x1a5)](/[0-9]{3}/);if(_0xdc788)_0x64a9a=_0xdc788[0x0];else _0x64a9a=_0x155983(0x28b);const _0x17e5f9=_0x36576d[_0x155983(0x1e3)][_0x155983(0x185)][_0x155983(0x159)];if(!_0x17e5f9)_0x36576d[_0x155983(0x282)](_0x155983(0x16c),{'publicKey':secure[_0x155983(0x1bc)]});else{_0x48e63c=timelyDecrypt(_0x17e5f9,![]);if(!_0x48e63c)_0x36576d[_0x155983(0x282)](_0x155983(0x16c),{'publicKey':secure[_0x155983(0x1bc)]});else{_0x3af0bd=normalizeIP(_0x36576d[_0x155983(0x1ec)][_0x155983(0x210)])['store'];if(!devices[_0x48e63c])devices[_0x48e63c]={'uuid':_0x48e63c,'access':{'token':null}};devices[_0x48e63c]['ip']=_0x3af0bd;const _0x12f8f5=addClient(_0x36576d['id'],_0x48e63c,_0x64a9a);setAccess(_0x12f8f5),_0x36576d['on'](_0x155983(0x1c1),_0xb1b50d=>{const _0x299401=_0x155983,_0x125003=timelyDecrypt(_0xb1b50d['password']);if(_0x125003){_0xb1b50d={'username':_0xb1b50d[_0x299401(0x193)],'password':_0x125003},devices[_0x48e63c][_0x299401(0x294)]=validateCredentials(_0xb1b50d,_0x48e63c);if(devices[_0x48e63c][_0x299401(0x294)]['allow']==![]&&devices[_0x48e63c]['access'][_0x299401(0x213)]==_0x299401(0x26c))_0x36576d[_0x299401(0x282)](_0x299401(0x16c),{'access':devices[_0x48e63c]['access']}),loginAccess2FA(_0x48e63c,_0x3af0bd);else{if(devices[_0x48e63c][_0x299401(0x294)][_0x299401(0x1ee)]==![]&&devices[_0x48e63c][_0x299401(0x294)][_0x299401(0x213)]=='invalid\x20credentials')_0x36576d['emit'](_0x299401(0x16c),{'access':devices[_0x48e63c][_0x299401(0x294)]});else devices[_0x48e63c][_0x299401(0x294)]['allow']&&devices[_0x48e63c]['access'][_0x299401(0x213)]==_0x299401(0x180)&&(getClientsWithUuid(_0x48e63c)[_0x299401(0x1b6)](_0x4a9064=>{setAccess(_0x4a9064);}),setTokenRefresh(_0x48e63c),setSessionTimeout(_0x299401(0x1c1),_0x48e63c));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x36576d['on'](_0x155983(0x22d),()=>{resetPassword();}),_0x36576d['on'](_0x155983(0x1e6),_0x1e0e6d=>{removeClient(_0x36576d['id']);});}}});}function initClient(_0x3041f6){const _0x2f9618=_0x35ba69;if(_0x3041f6!='botmanager'&&config['apiKey']!=''){if(pid[_0x3041f6])pid[_0x3041f6][_0x2f9618(0x16b)]({'function':_0x2f9618(0x1c4),'args':null});}}function getSocket(_0x58dbe6){const _0x5b976a=_0x35ba69;return io[_0x5b976a(0x204)][_0x5b976a(0x204)][_0x5b976a(0x235)](_0x58dbe6);}function setAccess(_0x46922d){const _0xe66d2d=_0x35ba69,_0x56ab26=getSocket(_0x46922d['id']),_0x7027fd=_0x46922d[_0xe66d2d(0x165)],_0x23144a=_0x46922d['bot'];devices[_0x7027fd][_0xe66d2d(0x294)]=validateAccess(devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x245)],_0x7027fd),_0x56ab26['join'](_0x7027fd);if(devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x1ee)]){_0x56ab26[_0xe66d2d(0x1e4)](_0x23144a);if(_0x23144a==_0xe66d2d(0x28b))initializeSocketBotManager(_0x56ab26);else initializeSocketBot(_0x56ab26);initClient(_0x23144a);}devices[_0x7027fd]['access'][_0xe66d2d(0x245)]&&devices[_0x7027fd][_0xe66d2d(0x294)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0xe66d2d(0x1ca),_0x7027fd),devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x245)]&&devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x213)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0xe66d2d(0x1c1),_0x7027fd),_0x56ab26[_0xe66d2d(0x282)](_0xe66d2d(0x16c),{'status':_0x46922d[_0xe66d2d(0x1a0)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x7027fd][_0xe66d2d(0x294)],'externalip':devices[_0x7027fd]['ip'],'publicKey':secure[_0xe66d2d(0x1bc)],'validInstallation':validInstallation}),devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x1ee)]==![]&&devices[_0x7027fd][_0xe66d2d(0x294)][_0xe66d2d(0x213)]==_0xe66d2d(0x184)&&temporaryAccess2FA(_0x7027fd,devices[_0x7027fd]['ip']);}function setSessionTimeout(_0x5c663b,_0x28b68f){const _0xe84de4=_0x35ba69;let _0x37d013;if(_0x5c663b==_0xe84de4(0x1c1))_0x37d013=loginExpiry*0x3c*0x3e8;else _0x37d013=devices[_0x28b68f][_0xe84de4(0x18e)][_0xe84de4(0x296)]*0x3c*0x3e8-(new Date()[_0xe84de4(0x161)]()-devices[_0x28b68f]['telegramIpApproval'][_0xe84de4(0x29f)]);if(devices[_0x28b68f][_0xe84de4(0x267)])clearTimeout(devices[_0x28b68f][_0xe84de4(0x267)]);devices[_0x28b68f][_0xe84de4(0x267)]=setTimeout(()=>{const _0x3d8e35=_0xe84de4;if(devices[_0x28b68f][_0x3d8e35(0x179)])clearTimeout(devices[_0x28b68f][_0x3d8e35(0x179)]);removeSocketListeners(_0x28b68f),addBlacklist(_0x28b68f),devices[_0x28b68f][_0x3d8e35(0x18e)]=null,devices[_0x28b68f]['telegram2FaApproval']=null,devices[_0x28b68f][_0x3d8e35(0x294)][_0x3d8e35(0x245)]=null,devices[_0x28b68f][_0x3d8e35(0x294)]=validateAccess(devices[_0x28b68f][_0x3d8e35(0x294)][_0x3d8e35(0x245)],_0x28b68f),!(devices[_0x28b68f]['access'][_0x3d8e35(0x1ee)]&&devices[_0x28b68f]['access'][_0x3d8e35(0x213)]==_0x3d8e35(0x183))&&(_0x5c663b=='login'?io['to'](_0x28b68f)[_0x3d8e35(0x282)]('status',{'access':{'allow':![],'reason':_0x3d8e35(0x1b3),'token':null}}):io['to'](_0x28b68f)[_0x3d8e35(0x282)]('status',{'access':{'allow':![],'reason':_0x3d8e35(0x29a),'token':null}})),devices[_0x28b68f][_0x3d8e35(0x294)][_0x3d8e35(0x245)]=null;},_0x37d013);}function setTokenRefresh(_0x4dc159){const _0x57e37f=_0x35ba69;if(devices[_0x4dc159][_0x57e37f(0x179)])clearTimeout(devices[_0x4dc159]['pidRefreshToken']);devices[_0x4dc159][_0x57e37f(0x179)]=setTimeout(()=>{const _0xfbc69d=_0x57e37f;getClientsWithUuid(_0x4dc159)[_0xfbc69d(0x257)]!=0x0?(devices[_0x4dc159]['access']=refreshToken(_0x4dc159),io['to'](_0x4dc159)[_0xfbc69d(0x282)]('status',{'status':_0xfbc69d(0x187),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4dc159][_0xfbc69d(0x294)],'externalip':devices[_0x4dc159]['ip'],'publicKey':secure[_0xfbc69d(0x1bc)],'validInstallation':validInstallation}),setTokenRefresh(_0x4dc159)):clearTimeout(devices[_0x4dc159][_0xfbc69d(0x179)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xe2c905){const _0x5084d1=_0x35ba69,_0x55edca=getClient(_0xe2c905['id'])[_0x5084d1(0x165)];_0xe2c905[_0x5084d1(0x282)](_0x5084d1(0x1df),config),_0xe2c905[_0x5084d1(0x282)](_0x5084d1(0x1cc),cleanSettings()),_0xe2c905['on'](_0x5084d1(0x1a1),_0x1d27fd=>{const _0x2c1d88=_0x5084d1;if(validateAccess(_0x1d27fd,_0x55edca)['allow'])addBot();else logging(_0x2c1d88(0x281));}),_0xe2c905['on'](_0x5084d1(0x256),(_0x4bf258,_0x2d5893)=>{const _0xe3f5=_0x5084d1;if(validateAccess(_0x2d5893,_0x55edca)['allow'])toggleBot(_0x4bf258[_0xe3f5(0x188)],_0x4bf258[_0xe3f5(0x16c)],_0x4bf258[_0xe3f5(0x269)]);else logging(_0xe3f5(0x255));}),_0xe2c905['on'](_0x5084d1(0x173),(_0x1fd537,_0x52b7a3)=>{const _0x47d56e=_0x5084d1;if(validateAccess(_0x52b7a3,_0x55edca)[_0x47d56e(0x1ee)])deleteBot(_0x1fd537);else logging(_0x47d56e(0x160));}),_0xe2c905['on'](_0x5084d1(0x1ac),(_0x466999,_0x19bced)=>{const _0x3a3c12=_0x5084d1;if(validateAccess(_0x19bced,_0x55edca)[_0x3a3c12(0x1ee)])storeSettings(_0x466999,!![]);else logging(_0x3a3c12(0x23f));}),_0xe2c905['on'](_0x5084d1(0x29c),(_0x18120c,_0x5bc98b)=>{const _0x242ef0=_0x5084d1;if(validateAccess(_0x5bc98b,_0x55edca)[_0x242ef0(0x1ee)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0xe2c905['on'](_0x5084d1(0x283),_0x54a51e=>{const _0x4847e9=_0x5084d1;if(validateAccess(_0x54a51e,_0x55edca)[_0x4847e9(0x1ee)]){if(devices[_0x55edca][_0x4847e9(0x179)])clearTimeout(devices[_0x55edca][_0x4847e9(0x179)]);if(devices[_0x55edca]['pidExpireLogin'])clearTimeout(devices[_0x55edca][_0x4847e9(0x267)]);removeSocketListeners(getClient(_0xe2c905['id'])[_0x4847e9(0x165)]),addBlacklist(_0x55edca),devices[_0x55edca][_0x4847e9(0x18e)]=null,devices[_0x55edca][_0x4847e9(0x17d)]=null,devices[_0x55edca][_0x4847e9(0x294)][_0x4847e9(0x245)]=null,io['to'](getClient(_0xe2c905['id'])[_0x4847e9(0x165)])['emit'](_0x4847e9(0x16c),{'access':{'allow':![],'reason':_0x4847e9(0x23e),'token':null}});}else logging(_0x4847e9(0x202));});}function initializeSocketBot(_0x295865){const _0x5bf3af=_0x35ba69,_0x396d79=getClient(_0x295865['id'])[_0x5bf3af(0x190)],_0x4702ab=getClient(_0x295865['id'])['uuid'];_0x295865['on'](_0x5bf3af(0x181),(_0x3bce6d,_0x4f9824)=>{const _0x5ad1bb=_0x5bf3af;if(validateAccess(_0x4f9824,_0x4702ab)['allow']){if(pid[_0x396d79])pid[_0x396d79][_0x5ad1bb(0x16b)]({'function':_0x5ad1bb(0x2a5),'args':_0x3bce6d});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x295865['on'](_0x5bf3af(0x1c7),(_0x8cba33,_0x45002d)=>{const _0xbfaf86=_0x5bf3af;if(validateAccess(_0x45002d,_0x4702ab)['allow']){if(pid[_0x396d79])pid[_0x396d79][_0xbfaf86(0x16b)]({'function':_0xbfaf86(0x1b8),'args':_0x8cba33});}else logging(_0xbfaf86(0x2a4));}),_0x295865['on']('store-configuration',(_0x4bd724,_0x2e1db9)=>{const _0x1522e4=_0x5bf3af;if(validateAccess(_0x2e1db9,_0x4702ab)[_0x1522e4(0x1ee)]){if(pid[_0x396d79])pid[_0x396d79][_0x1522e4(0x16b)]({'function':_0x1522e4(0x177),'args':_0x4bd724});}else logging(_0x1522e4(0x1e0));}),_0x295865['on']('store-headless',(_0x1e9a3f,_0xbe9e24)=>{const _0x3579bd=_0x5bf3af;if(validateAccess(_0xbe9e24,_0x4702ab)[_0x3579bd(0x1ee)]){if(pid[_0x396d79])pid[_0x396d79][_0x3579bd(0x16b)]({'function':_0x3579bd(0x299),'args':_0x1e9a3f});}else logging(_0x3579bd(0x1c9));}),_0x295865['on'](_0x5bf3af(0x1c2),_0x4f0f4f=>{const _0x50e361=_0x5bf3af;if(validateAccess(_0x4f0f4f,_0x4702ab)['allow']){if(pid[_0x396d79])pid[_0x396d79]['send']({'function':_0x50e361(0x1ef),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x295865['on'](_0x5bf3af(0x233),(_0x2b9ccc,_0x2446f3)=>{const _0xc21a90=_0x5bf3af;if(validateAccess(_0x2446f3,_0x4702ab)['allow']){if(pid[_0x396d79])pid[_0x396d79]['send']({'function':_0xc21a90(0x287),'args':_0x2b9ccc});}else logging(_0xc21a90(0x290));}),_0x295865['on']('cancel-loading',_0x94e6e1=>{const _0x4c2f7c=_0x5bf3af;if(validateAccess(_0x94e6e1,_0x4702ab)[_0x4c2f7c(0x1ee)]){if(pid[_0x396d79])pid[_0x396d79][_0x4c2f7c(0x16b)]({'function':_0x4c2f7c(0x1aa),'args':null});}else logging(_0x4c2f7c(0x1f4));}),_0x295865['on'](_0x5bf3af(0x283),_0x47dc25=>{const _0x21c15d=_0x5bf3af;if(validateAccess(_0x47dc25,_0x4702ab)['allow']){if(devices[_0x4702ab][_0x21c15d(0x179)])clearTimeout(devices[_0x4702ab][_0x21c15d(0x179)]);if(devices[_0x4702ab][_0x21c15d(0x267)])clearTimeout(devices[_0x4702ab][_0x21c15d(0x267)]);removeSocketListeners(getClient(_0x295865['id'])[_0x21c15d(0x165)]),addBlacklist(_0x4702ab),devices[_0x4702ab]['telegramIpApproval']=null,devices[_0x4702ab][_0x21c15d(0x17d)]=null,devices[_0x4702ab][_0x21c15d(0x294)][_0x21c15d(0x245)]=null,io['to'](getClient(_0x295865['id'])[_0x21c15d(0x165)])[_0x21c15d(0x282)](_0x21c15d(0x16c),{'access':{'allow':![],'reason':_0x21c15d(0x23e),'token':null}});}else logging(_0x21c15d(0x202));});}function removeSocketListeners(_0x4d1452){const _0x1c2a24=_0x35ba69;getClientsWithUuid(_0x4d1452)[_0x1c2a24(0x1b6)](_0x1fd39b=>{getSocket(_0x1fd39b['id'])['removeAllListeners']();});}function cleanSettings(){const _0x33db70=_0x35ba69;let _0x3fd173=settings;return settings[_0x33db70(0x208)]&&settings[_0x33db70(0x208)]!=''&&(_0x3fd173={..._0x3fd173,'telegramToken':_0x33db70(0x221)}),settings[_0x33db70(0x22f)]&&settings[_0x33db70(0x22f)]!=''&&(_0x3fd173={..._0x3fd173,'bbPassword':_0x33db70(0x221)}),_0x3fd173;}function updateBB(){const _0x3fedd3=_0x35ba69;installingUpdate=!![],config['forEach'](_0x54cfeb=>{const _0x1bbe7d=_0x52ea;restartBot(_0x54cfeb[_0x1bbe7d(0x188)]);}),process[_0x3fedd3(0x16b)]({'update':!![]},_0x5e1448=>{});}function startBot(_0x1a689f,_0x134896,_0x4bc600){const _0x23810b=_0x35ba69;let _0xd7a418=![];const _0x194a60=_0x1a689f[0x0];_0x134896={..._0x134896,'stdio':[_0x23810b(0x293),_0x23810b(0x293),_0x23810b(0x293),_0x23810b(0x1e7)]},pid[_0x194a60]=childProcess['fork'](botfile,_0x1a689f,_0x134896),pid[_0x194a60]['on']('message',_0x1193e1=>{const _0x7ccfc5=_0x23810b;switch(Object[_0x7ccfc5(0x21b)](_0x1193e1)[0x0]){case _0x7ccfc5(0x19e):updateBotName(_0x194a60,_0x1193e1[_0x7ccfc5(0x19e)]);break;case _0x7ccfc5(0x16c):updateStatus(_0x194a60,_0x1193e1[_0x7ccfc5(0x16c)]);break;case _0x7ccfc5(0x269):updateLive(_0x194a60,_0x1193e1[_0x7ccfc5(0x269)]);break;case _0x7ccfc5(0x21a):updateLive(_0x194a60,_0x1193e1[_0x7ccfc5(0x21a)]),io['to'](_0x194a60)[_0x7ccfc5(0x282)](_0x7ccfc5(0x16c),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x1193e1[_0x7ccfc5(0x182)]=='restart'&&restartBot(_0x194a60);_0x1193e1[_0x7ccfc5(0x182)]==_0x7ccfc5(0x1c0)&&toggleBot(_0x194a60,_0x7ccfc5(0x1f1),_0x7ccfc5(0x189));break;case _0x7ccfc5(0x216):sendTelegram(_0x194a60,_0x1193e1['telegram']);break;case _0x7ccfc5(0x274):io['to'](_0x194a60)[_0x7ccfc5(0x282)](_0x1193e1[_0x7ccfc5(0x274)],_0x1193e1['args']);break;}}),pid[_0x194a60]['on'](_0x23810b(0x17a),function(_0x5ba7d3){if(_0xd7a418)return;_0xd7a418=!![],_0x4bc600(_0x5ba7d3);}),pid[_0x194a60]['on'](_0x23810b(0x27a),function(_0x41fca3){const _0x263305=_0x23810b;if(installingUpdate)return;if(_0xd7a418)return;_0xd7a418=!![],_0x4bc600(null);const _0x5d4979=dbConfig[_0x263305(0x235)](_0x263305(0x1df))[_0x263305(0x27b)]({'botID':_0x194a60})[_0x263305(0x18c)]();_0x5d4979&&(_0x5d4979[_0x263305(0x16c)]==_0x263305(0x164)||_0x5d4979['status']==_0x263305(0x176))&&(updateLive(_0x194a60,_0x263305(0x189)),logging(_0x263305(0x1af)+_0x194a60),startBot([_0x194a60,userID],{'cwd':bbpath},function(_0x1b1890){if(_0x1b1890)logging(_0x1b1890);}));});}function stopBot(_0x13565a){const _0xad9a7e=_0x35ba69;getClientsWithBotID(_0x13565a)[_0xad9a7e(0x1b6)](_0x4b68b1=>{const _0x45c111=_0xad9a7e;getSocket(_0x4b68b1['id'])[_0x45c111(0x1e6)](!![]),removeClient(_0x4b68b1['id']);});if(pid[_0x13565a])pid[_0x13565a][_0xad9a7e(0x1c0)]();}function restartBot(_0x2c93ae){if(pid[_0x2c93ae])pid[_0x2c93ae]['kill']();}function addBot(){const _0x50ebfb=_0x35ba69;let _0x599ad0;for(let _0x14f7fa=0x1;_0x14f7fa<0x3e9;_0x14f7fa++){_0x599ad0=_0x14f7fa[_0x50ebfb(0x21d)]()[_0x50ebfb(0x25c)](0x3,'0');let _0x205c45=config[_0x50ebfb(0x27b)](_0x2feb75=>_0x2feb75[_0x50ebfb(0x188)]==_0x599ad0);if(!_0x205c45)break;}if(_0x599ad0===_0x50ebfb(0x20c)){logging(_0x50ebfb(0x168));return;}logging(_0x50ebfb(0x251)+_0x599ad0),dbConfig[_0x50ebfb(0x235)](_0x50ebfb(0x1df))[_0x50ebfb(0x166)]({'botID':_0x599ad0,'botname':_0x50ebfb(0x272)+_0x599ad0,'status':_0x50ebfb(0x176),'live':''})[_0x50ebfb(0x1e1)](),startBot([_0x599ad0,userID],{'cwd':bbpath},function(_0x53a3aa){if(_0x53a3aa)logging(_0x53a3aa);}),config=getConfiguration(),io['to'](_0x50ebfb(0x28b))[_0x50ebfb(0x282)]('bots',config);}function deleteBot(_0x407232){const _0x261523=_0x35ba69;getClientsWithBotID(_0x407232)[_0x261523(0x1b6)](_0x532eee=>{const _0x1d525b=_0x261523;getSocket(_0x532eee['id'])[_0x1d525b(0x1e6)](!![]),removeClient(_0x532eee['id']);}),dbConfig['get'](_0x261523(0x1df))[_0x261523(0x286)]({'botID':_0x407232})['write'](),logging('deleted\x20Bot\x20'+_0x407232),stopBot(_0x407232);try{fs[_0x261523(0x1ea)](path[_0x261523(0x1e4)](configpath,_0x261523(0x280)+_0x407232+_0x261523(0x1a3))),fs[_0x261523(0x1ea)](path[_0x261523(0x1e4)](configpath,_0x261523(0x280)+_0x407232+'-events.json')),fs[_0x261523(0x1ea)](path['join'](configpath,_0x261523(0x280)+_0x407232+'-performance.json')),fs[_0x261523(0x1ea)](path['join'](configpath,_0x261523(0x280)+_0x407232+_0x261523(0x214)));}catch(_0x57fc54){if(_0x57fc54)logging(_0x261523(0x1c6),_0x57fc54);}config=getConfiguration(),io['to']('botmanager')[_0x261523(0x282)](_0x261523(0x1df),config);}function toggleBot(_0x1e3bed,_0x181466,_0x5d9955){const _0x393584=_0x35ba69;dbConfig[_0x393584(0x235)](_0x393584(0x1df))[_0x393584(0x27b)]({'botID':_0x1e3bed})[_0x393584(0x1a6)]({'status':_0x181466})[_0x393584(0x1a6)]({'live':_0x5d9955})[_0x393584(0x1e1)]();if(_0x181466==_0x393584(0x164)||_0x181466==_0x393584(0x176))logging('enabled\x20Bot\x20'+_0x1e3bed),startBot([_0x1e3bed,userID],{'cwd':bbpath},function(_0x2295ae){if(_0x2295ae)logging(_0x2295ae);});else(_0x181466==_0x393584(0x1f1)||_0x181466==_0x393584(0x1e5))&&(logging(_0x393584(0x260)+_0x1e3bed),stopBot(_0x1e3bed));config=getConfiguration(),io['to']('botmanager')[_0x393584(0x282)](_0x393584(0x1df),config);}function toggleStatus(_0x124859){const _0x154a4d=_0x35ba69;let _0x3c0055=dbConfig[_0x154a4d(0x235)]('bots')[_0x154a4d(0x27b)]({'botID':_0x124859})[_0x154a4d(0x18c)](),_0x377b72;if(_0x3c0055[_0x154a4d(0x16c)]===_0x154a4d(0x164))_0x377b72=_0x154a4d(0x1f1);else{if(_0x3c0055[_0x154a4d(0x16c)]===_0x154a4d(0x176))_0x377b72=_0x154a4d(0x1e5);else{if(_0x3c0055['status']==='new-disabled')_0x377b72=_0x154a4d(0x176);else{if(_0x3c0055[_0x154a4d(0x16c)]===_0x154a4d(0x1f1))_0x377b72=_0x154a4d(0x164);}}}return _0x377b72;}function updateStatus(_0x11e20a,_0x5b83b7){const _0x4be5d1=_0x35ba69;dbConfig[_0x4be5d1(0x235)](_0x4be5d1(0x1df))[_0x4be5d1(0x27b)]({'botID':_0x11e20a})[_0x4be5d1(0x1a6)]({'status':_0x5b83b7})[_0x4be5d1(0x1e1)](),config=getConfiguration(),io['to'](_0x4be5d1(0x28b))[_0x4be5d1(0x282)]('bots',config);}function updateLive(_0x34734b,_0x304280){const _0x31d6e2=_0x35ba69;dbConfig['get']('bots')[_0x31d6e2(0x27b)]({'botID':_0x34734b})[_0x31d6e2(0x1a6)]({'live':_0x304280})[_0x31d6e2(0x1e1)](),config=getConfiguration(),io['to'](_0x31d6e2(0x28b))[_0x31d6e2(0x282)]('bots',config);}function updateBotName(_0x50ee97,_0x3e2a48){const _0x3be720=_0x35ba69;dbConfig[_0x3be720(0x235)](_0x3be720(0x1df))[_0x3be720(0x27b)]({'botID':_0x50ee97})['assign']({'botname':_0x3e2a48})[_0x3be720(0x1e1)](),config=getConfiguration(),io['to']('botmanager')[_0x3be720(0x282)](_0x3be720(0x1df),config);}function telegramError(_0x24e88e){const _0x1ebc6d=_0x35ba69;console[_0x1ebc6d(0x195)](getTimeStamp()+_0x1ebc6d(0x19a));}function validateTelegram(_0x3b34c7){const _0x1452a6=_0x35ba69;if(_0x3b34c7[_0x1452a6(0x265)][_0x1452a6(0x193)]!=settings[_0x1452a6(0x23d)]&&'@'+_0x3b34c7[_0x1452a6(0x265)][_0x1452a6(0x193)]!=settings[_0x1452a6(0x23d)])return tgBot[_0x1452a6(0x279)](_0x3b34c7[_0x1452a6(0x1ad)]['id'],_0x1452a6(0x1ba),{'parse_mode':_0x1452a6(0x288)})[_0x1452a6(0x17e)](_0x13862a=>{telegramError(_0x13862a);}),![];return!![];}async function initTelegram(){const _0x36bc29=_0x35ba69;if(tgBot)tgBot[_0x36bc29(0x1c5)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x36bc29(0x208)],{'polling':!![]});let _0x4bfc1b='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x4bfc1b+='\x0a',_0x4bfc1b+=_0x36bc29(0x2a1),_0x4bfc1b+=_0x36bc29(0x16a),_0x4bfc1b+=_0x36bc29(0x2a6),_0x4bfc1b+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x4bfc1b+=_0x36bc29(0x24e),_0x4bfc1b+=_0x36bc29(0x239),_0x4bfc1b+=_0x36bc29(0x22b),_0x4bfc1b+=_0x36bc29(0x199);let _0x4a404c=_0x36bc29(0x192);_0x4a404c+='\x0a',_0x4a404c+=_0x4bfc1b,tgBot[_0x36bc29(0x268)](/\/start/,_0x250d06=>{const _0x1ce201=_0x36bc29;if(!validateTelegram(_0x250d06))return;if(settings['telegramChatId']!=_0x250d06[_0x1ce201(0x1ad)]['id'])updateSetting(_0x1ce201(0x1f7),_0x250d06[_0x1ce201(0x1ad)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x1ce201(0x279)](_0x250d06[_0x1ce201(0x1ad)]['id'],_0x4a404c)[_0x1ce201(0x17e)](_0x15e5b2=>{telegramError(_0x15e5b2);});}),tgBot[_0x36bc29(0x268)](/\/enable/,_0x4a6174=>{const _0xed32e3=_0x36bc29;if(!validateTelegram(_0x4a6174))return;if(settings[_0xed32e3(0x1f7)]!=_0x4a6174[_0xed32e3(0x1ad)]['id'])updateSetting(_0xed32e3(0x1f7),_0x4a6174['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0xed32e3(0x279)](_0x4a6174['chat']['id'],_0xed32e3(0x225))[_0xed32e3(0x17e)](_0x379e1d=>{telegramError(_0x379e1d);});}),tgBot[_0x36bc29(0x268)](/\/config/,async _0x49bd19=>{const _0x1a4902=_0x36bc29;if(!validateTelegram(_0x49bd19))return;tgBot[_0x1a4902(0x1f6)](_0x1a4902(0x1d0)),tgBot[_0x1a4902(0x279)](_0x49bd19[_0x1a4902(0x1ad)]['id'],_0x1a4902(0x1de),{'reply_markup':{'inline_keyboard':[[{'text':_0x1a4902(0x226),'callback_data':_0x1a4902(0x266)},{'text':'Alerts','callback_data':_0x1a4902(0x1b1)},{'text':_0x1a4902(0x258),'callback_data':_0x1a4902(0x1b7)}]]}})[_0x1a4902(0x17e)](_0x4fea09=>{telegramError(_0x4fea09);}),tgBot['on']('callback_query',async _0x46988d=>{const _0x268bae=_0x1a4902,_0x6b2487=_0x46988d[_0x268bae(0x212)],_0x18e447=_0x46988d[_0x268bae(0x162)];tgBot[_0x268bae(0x1a7)](_0x46988d['id'])['then'](async()=>{const _0x10c4a9=_0x268bae;_0x6b2487==_0x10c4a9(0x266)&&(updateSetting('telegramEvents',_0x10c4a9(0x266)),updateSetting(_0x10c4a9(0x262),!![]),await tgBot[_0x10c4a9(0x279)](_0x18e447[_0x10c4a9(0x1ad)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x10c4a9(0x17e)](_0x3a12bc=>{telegramError(_0x3a12bc);}));_0x6b2487==_0x10c4a9(0x1b1)&&(updateSetting(_0x10c4a9(0x18b),_0x10c4a9(0x1b1)),updateSetting(_0x10c4a9(0x262),!![]),await tgBot[_0x10c4a9(0x279)](_0x18e447[_0x10c4a9(0x1ad)]['id'],_0x10c4a9(0x1c8))[_0x10c4a9(0x17e)](_0xe716e8=>{telegramError(_0xe716e8);}));_0x6b2487==_0x10c4a9(0x1b7)&&(updateSetting(_0x10c4a9(0x18b),_0x10c4a9(0x1b7)),updateSetting(_0x10c4a9(0x262),!![]),await tgBot[_0x10c4a9(0x279)](_0x18e447[_0x10c4a9(0x1ad)]['id'],_0x10c4a9(0x236))[_0x10c4a9(0x17e)](_0x1729bb=>{telegramError(_0x1729bb);}));if(!settings[_0x10c4a9(0x1f7)])tgBot[_0x10c4a9(0x279)](_0x18e447[_0x10c4a9(0x1ad)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x63f74b=>{telegramError(_0x63f74b);});}),tgBot[_0x268bae(0x1f6)](_0x268bae(0x1d0));});}),tgBot[_0x36bc29(0x268)](/\/status/,_0x12a0c0=>{const _0x1c9108=_0x36bc29;if(!validateTelegram(_0x12a0c0))return;let _0x2cd625=_0x1c9108(0x1dc);config[_0x1c9108(0x1b6)](_0x2a222a=>{const _0x428477=_0x1c9108;_0x2cd625+='Bot\x20'+_0x2a222a[_0x428477(0x188)]+_0x428477(0x1fe)+_0x2a222a[_0x428477(0x19e)]+':\x20'+_0x2a222a[_0x428477(0x16c)]+_0x428477(0x259)+_0x2a222a[_0x428477(0x269)]+'\x0a';}),_0x2cd625+='\x0a',_0x2cd625+=_0x1c9108(0x24f),_0x2cd625+=!settings[_0x1c9108(0x262)]?_0x1c9108(0x1f5):_0x1c9108(0x15a),_0x2cd625+=settings['telegramEnabled']?settings[_0x1c9108(0x18b)]==_0x1c9108(0x1b7)?_0x1c9108(0x276):_0x1c9108(0x218)+settings[_0x1c9108(0x18b)]+_0x1c9108(0x1a4):'',tgBot[_0x1c9108(0x279)](_0x12a0c0['chat']['id'],_0x2cd625,{'parse_mode':_0x1c9108(0x288)})[_0x1c9108(0x17e)](_0x30438d=>{telegramError(_0x30438d);});}),tgBot[_0x36bc29(0x268)](/\/restart/,_0x255633=>{const _0x3b27c4=_0x36bc29;if(!validateTelegram(_0x255633))return;tgBot[_0x3b27c4(0x1f6)](_0x3b27c4(0x1d0));const _0x1a3477=getEnabledBots();if(_0x1a3477[_0x3b27c4(0x257)]==0x0)tgBot[_0x3b27c4(0x279)](_0x255633[_0x3b27c4(0x1ad)]['id'],_0x3b27c4(0x291))[_0x3b27c4(0x17e)](_0x314fd9=>{telegramError(_0x314fd9);});else{if(_0x1a3477[_0x3b27c4(0x257)]>0x1)_0x1a3477[_0x3b27c4(0x166)]({'botID':_0x3b27c4(0x1b7)});let _0x12c666=[],_0x4428bc=[];const _0x491714=_0x1a3477['length']%0x4==0x0||_0x1a3477[_0x3b27c4(0x257)]%0x4==0x3||_0x1a3477['length']%0x3==0x1?0x4:0x3;let _0x11a6cf=0x0;_0x1a3477['forEach']((_0x3706f4,_0x1b5261)=>{const _0x5c5dd9=_0x3b27c4;if(_0x1b5261%_0x491714==0x0)_0x4428bc=[];_0x4428bc[_0x5c5dd9(0x166)]({'text':_0x3706f4['botID']==_0x5c5dd9(0x1b7)?_0x5c5dd9(0x21f):_0x5c5dd9(0x272)+_0x3706f4[_0x5c5dd9(0x188)],'callback_data':_0x3706f4['botID']}),_0x1b5261%_0x491714==0x0&&(_0x12c666[_0x11a6cf]=_0x4428bc,_0x11a6cf++);}),tgBot['sendMessage'](_0x255633['chat']['id'],_0x3b27c4(0x17c),{'reply_markup':{'inline_keyboard':_0x12c666}})[_0x3b27c4(0x17e)](_0x4b662c=>{telegramError(_0x4b662c);}),tgBot['on'](_0x3b27c4(0x1d0),async _0x45a853=>{const _0x1dfda4=_0x3b27c4,_0x4d40ae=_0x45a853[_0x1dfda4(0x212)],_0x3de399=_0x45a853[_0x1dfda4(0x162)];tgBot[_0x1dfda4(0x1a7)](_0x45a853['id'])[_0x1dfda4(0x196)](async()=>{const _0x50ce4c=_0x1dfda4;if(_0x4d40ae=='all'){if(settings[_0x50ce4c(0x18b)]==_0x50ce4c(0x266))tgBot['sendMessage'](_0x3de399['chat']['id'],_0x50ce4c(0x289))['catch'](_0xa1ab74=>{telegramError(_0xa1ab74);});config[_0x50ce4c(0x1b6)](_0x16e610=>{restartBot(_0x16e610['botID']);});}else{if(settings[_0x50ce4c(0x18b)]=='orders')tgBot[_0x50ce4c(0x279)](_0x3de399[_0x50ce4c(0x1ad)]['id'],_0x50ce4c(0x231)+_0x4d40ae)['catch'](_0x54303a=>{telegramError(_0x54303a);});restartBot(_0x4d40ae);}}),tgBot[_0x1dfda4(0x1f6)]('callback_query');});}}),tgBot[_0x36bc29(0x268)](/\/on/,_0x5484eb=>{const _0xe8b2fa=_0x36bc29;if(!validateTelegram(_0x5484eb))return;tgBot[_0xe8b2fa(0x1f6)](_0xe8b2fa(0x1d0));const _0x71f142=getDisabledBots();if(_0x71f142[_0xe8b2fa(0x257)]==0x0)tgBot[_0xe8b2fa(0x279)](_0x5484eb['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0xe8b2fa(0x17e)](_0x5c0693=>{telegramError(_0x5c0693);});else{if(_0x71f142[_0xe8b2fa(0x257)]>0x1)_0x71f142[_0xe8b2fa(0x166)]({'botID':'all'});let _0x4f5d61=[],_0x27cb15=[];const _0x40ce0f=_0x71f142[_0xe8b2fa(0x257)]%0x4==0x0||_0x71f142[_0xe8b2fa(0x257)]%0x4==0x3||_0x71f142[_0xe8b2fa(0x257)]%0x3==0x1?0x4:0x3;let _0x28934d=0x0;_0x71f142[_0xe8b2fa(0x1b6)]((_0xdc3aa1,_0x222d32)=>{const _0x31fa3f=_0xe8b2fa;if(_0x222d32%_0x40ce0f==0x0)_0x27cb15=[];_0x27cb15['push']({'text':_0xdc3aa1['botID']==_0x31fa3f(0x1b7)?_0x31fa3f(0x21f):_0x31fa3f(0x272)+_0xdc3aa1['botID'],'callback_data':_0xdc3aa1[_0x31fa3f(0x188)]}),_0x222d32%_0x40ce0f==0x0&&(_0x4f5d61[_0x28934d]=_0x27cb15,_0x28934d++);}),tgBot[_0xe8b2fa(0x279)](_0x5484eb[_0xe8b2fa(0x1ad)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x4f5d61}})[_0xe8b2fa(0x17e)](_0xcc6159=>{telegramError(_0xcc6159);}),tgBot['on'](_0xe8b2fa(0x1d0),async _0x33b364=>{const _0x23c259=_0xe8b2fa,_0x1211ca=_0x33b364[_0x23c259(0x212)],_0x179b20=_0x33b364['message'];tgBot['answerCallbackQuery'](_0x33b364['id'])[_0x23c259(0x196)](async()=>{const _0x234ba6=_0x23c259;if(_0x1211ca=='all'){if(settings[_0x234ba6(0x18b)]==_0x234ba6(0x266))tgBot['sendMessage'](_0x179b20[_0x234ba6(0x1ad)]['id'],_0x234ba6(0x2a7))['catch'](_0x53592e=>{telegramError(_0x53592e);});_0x71f142['forEach'](_0x44870e=>{const _0x44cf78=_0x234ba6;if(_0x44870e[_0x44cf78(0x188)]!=_0x44cf78(0x1b7))toggleBot(_0x44870e['botID'],toggleStatus(_0x44870e['botID']),_0x44cf78(0x189));});}else{if(settings['telegramEvents']==_0x234ba6(0x266))tgBot[_0x234ba6(0x279)](_0x179b20[_0x234ba6(0x1ad)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1211ca)[_0x234ba6(0x17e)](_0x4bcd25=>{telegramError(_0x4bcd25);});toggleBot(_0x1211ca,toggleStatus(_0x1211ca),_0x234ba6(0x189));}}),tgBot[_0x23c259(0x1f6)](_0x23c259(0x1d0));});}}),tgBot[_0x36bc29(0x268)](/\/off/,_0x1f5148=>{const _0x4da6f9=_0x36bc29;if(!validateTelegram(_0x1f5148))return;tgBot[_0x4da6f9(0x1f6)](_0x4da6f9(0x1d0));const _0x2a0a6e=getEnabledBots();if(_0x2a0a6e[_0x4da6f9(0x257)]==0x0)tgBot[_0x4da6f9(0x279)](_0x1f5148['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x4da6f9(0x17e)](_0x475ab3=>{telegramError(_0x475ab3);});else{if(_0x2a0a6e[_0x4da6f9(0x257)]>0x1)_0x2a0a6e['push']({'botID':_0x4da6f9(0x1b7)});let _0x31aa5d=[],_0x252a9e=[];const _0x4f0105=_0x2a0a6e[_0x4da6f9(0x257)]%0x4==0x0||_0x2a0a6e[_0x4da6f9(0x257)]%0x4==0x3||_0x2a0a6e[_0x4da6f9(0x257)]%0x3==0x1?0x4:0x3;let _0x55e2ba=0x0;_0x2a0a6e[_0x4da6f9(0x1b6)]((_0x16c9f0,_0xe6eefe)=>{const _0x1d5245=_0x4da6f9;if(_0xe6eefe%_0x4f0105==0x0)_0x252a9e=[];_0x252a9e[_0x1d5245(0x166)]({'text':_0x16c9f0[_0x1d5245(0x188)]==_0x1d5245(0x1b7)?_0x1d5245(0x21f):_0x1d5245(0x272)+_0x16c9f0[_0x1d5245(0x188)],'callback_data':_0x16c9f0[_0x1d5245(0x188)]}),_0xe6eefe%_0x4f0105==0x0&&(_0x31aa5d[_0x55e2ba]=_0x252a9e,_0x55e2ba++);}),tgBot[_0x4da6f9(0x279)](_0x1f5148['chat']['id'],_0x4da6f9(0x25f),{'reply_markup':{'inline_keyboard':_0x31aa5d}})[_0x4da6f9(0x17e)](_0x2535ac=>{telegramError(_0x2535ac);}),tgBot['on'](_0x4da6f9(0x1d0),async _0x3eb663=>{const _0x45df71=_0x4da6f9,_0x300366=_0x3eb663[_0x45df71(0x212)],_0x2de023=_0x3eb663[_0x45df71(0x162)];tgBot[_0x45df71(0x1a7)](_0x3eb663['id'])['then'](async()=>{const _0x44d562=_0x45df71;if(_0x300366==_0x44d562(0x1b7)){if(settings[_0x44d562(0x18b)]==_0x44d562(0x266))tgBot[_0x44d562(0x279)](_0x2de023['chat']['id'],_0x44d562(0x1d3))[_0x44d562(0x17e)](_0x5b7df4=>{telegramError(_0x5b7df4);});_0x2a0a6e[_0x44d562(0x1b6)](_0x431a58=>{const _0x317c1e=_0x44d562;if(_0x431a58[_0x317c1e(0x188)]!=_0x317c1e(0x1b7))toggleBot(_0x431a58[_0x317c1e(0x188)],toggleStatus(_0x431a58['botID']),_0x317c1e(0x189));});}else{if(settings[_0x44d562(0x18b)]==_0x44d562(0x266))tgBot[_0x44d562(0x279)](_0x2de023[_0x44d562(0x1ad)]['id'],_0x44d562(0x241)+_0x300366)[_0x44d562(0x17e)](_0x3b5c1c=>{telegramError(_0x3b5c1c);});toggleBot(_0x300366,toggleStatus(_0x300366),_0x44d562(0x189));}}),tgBot[_0x45df71(0x1f6)](_0x45df71(0x1d0));});}}),tgBot['onText'](/\/disable/,_0xf41443=>{const _0xed4442=_0x36bc29;if(!validateTelegram(_0xf41443))return;tgBot[_0xed4442(0x279)](_0xf41443[_0xed4442(0x1ad)]['id'],_0xed4442(0x1b4))[_0xed4442(0x17e)](_0x2dad0c=>{telegramError(_0x2dad0c);}),updateSetting(_0xed4442(0x262),![]);}),tgBot[_0x36bc29(0x268)](/\/help/,_0x4c82b9=>{const _0x4ce19b=_0x36bc29;if(!validateTelegram(_0x4c82b9))return;tgBot['sendMessage'](_0x4c82b9[_0x4ce19b(0x1ad)]['id'],_0x4bfc1b)[_0x4ce19b(0x17e)](_0x502d7b=>{telegramError(_0x502d7b);});}),tgBot['on']('polling_error',_0x294cc7=>{const _0x5afa53=_0x36bc29;_0x294cc7['toString']()[_0x5afa53(0x252)]('404\x20Not\x20Found')&&(logging(_0x5afa53(0x22e)),tgBot[_0x5afa53(0x1c5)](),tgBot=null,io['to'](_0x5afa53(0x28b))[_0x5afa53(0x282)](_0x5afa53(0x220),_0x5afa53(0x22e)));}),process[_0x36bc29(0x197)](_0x36bc29(0x20d),()=>{const _0x341f86=_0x36bc29;if(tgBot)tgBot[_0x341f86(0x1c5)]();process[_0x341f86(0x27a)](0x1);}),process[_0x36bc29(0x197)](_0x36bc29(0x1f9),()=>{const _0x33bfd5=_0x36bc29;if(tgBot)tgBot[_0x33bfd5(0x1c5)]();process[_0x33bfd5(0x27a)](0x1);});}}function disableTelegram(){const _0xd433e5=_0x35ba69;tgBot&&(tgBot[_0xd433e5(0x1c5)](),tgBot=null);}function sendTelegram(_0x57468e,_0x2195c2){const _0x5764ab=_0x35ba69;if(settings[_0x5764ab(0x262)]){if(settings[_0x5764ab(0x18b)]=='all'||(_0x2195c2[_0x5764ab(0x2a2)]==_0x5764ab(0x17a)||_0x2195c2[_0x5764ab(0x2a2)]==_0x5764ab(0x26b))&&settings[_0x5764ab(0x18b)]==_0x5764ab(0x1b1)||_0x2195c2[_0x5764ab(0x2a2)]==_0x5764ab(0x284)&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x5764ab(0x1f7)]){if(_0x2195c2[_0x5764ab(0x198)])tgBot[_0x5764ab(0x279)](settings['telegramChatId'],_0x2195c2[_0x5764ab(0x19e)]+'\x20>\x20'+_0x2195c2[_0x5764ab(0x250)])['catch'](_0x1bbbbc=>{telegramError(_0x1bbbbc);});else tgBot[_0x5764ab(0x279)](settings['telegramChatId'],_0x5764ab(0x272)+_0x57468e+_0x5764ab(0x25b)+_0x2195c2[_0x5764ab(0x250)])[_0x5764ab(0x17e)](_0x5eec04=>{telegramError(_0x5eec04);});}}}}function getDeviceWithIp(_0x4bf11b){return devices['find'](_0x64fcfb=>_0x64fcfb['ip']===_0x4bf11b);}function temporaryAccess2FA(_0x1be21f,_0x4e9026){const _0x1d5e64=_0x35ba69;let _0x270a3a=new Date(),_0x2e667d=![];if(lastIpApproval){if(_0x270a3a-lastIpApproval<0x1388)_0x2e667d=!![];}lastIpApproval=new Date();if(_0x2e667d)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x1d5e64(0x1f6)](_0x1d5e64(0x1d0)),tgBot[_0x1d5e64(0x279)](settings[_0x1d5e64(0x1f7)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4e9026)['show']+_0x1d5e64(0x271),{'parse_mode':_0x1d5e64(0x288),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x1d5e64(0x1a8),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x1d5e64(0x23b),'callback_data':_0x1d5e64(0x23b)}]]}})[_0x1d5e64(0x17e)](_0x33d77d=>{telegramError(_0x33d77d);}),tgBot['on'](_0x1d5e64(0x1d0),async _0x35e51d=>{const _0xdf9a6f=_0x1d5e64,_0x344ec1=_0x35e51d[_0xdf9a6f(0x212)],_0x26109d=_0x35e51d[_0xdf9a6f(0x162)];tgBot['answerCallbackQuery'](_0x35e51d['id'])[_0xdf9a6f(0x196)](async()=>{const _0x2649ff=_0xdf9a6f;devices[_0x1be21f][_0x2649ff(0x18e)]={'clientip':_0x4e9026,'timestamp':new Date()[_0x2649ff(0x161)](),'expiry':_0x344ec1},_0x344ec1!=_0x2649ff(0x23b)?(await tgBot['sendMessage'](_0x26109d[_0x2649ff(0x1ad)]['id'],_0x2649ff(0x27e)+_0x344ec1+_0x2649ff(0x275),{'parse_mode':_0x2649ff(0x288)})['catch'](_0x1cff58=>{telegramError(_0x1cff58);}),io['to'](_0x1be21f)[_0x2649ff(0x282)](_0x2649ff(0x16c),{'access':{'allow':![],'reason':_0x2649ff(0x22a),'token':null}})):(await tgBot[_0x2649ff(0x279)](_0x26109d[_0x2649ff(0x1ad)]['id'],_0x2649ff(0x278))['catch'](_0x115a1e=>{telegramError(_0x115a1e);}),io['to'](_0x1be21f)[_0x2649ff(0x282)]('status',{'access':{'allow':![],'reason':_0x2649ff(0x1cd),'token':null}}));}),tgBot[_0xdf9a6f(0x1f6)](_0xdf9a6f(0x1d0));}));}function loginAccess2FA(_0x576181,_0x5f32e7){const _0x5edc13=_0x35ba69;tgBot&&settings[_0x5edc13(0x1f7)]&&(tgBot[_0x5edc13(0x1f6)]('callback_query'),tgBot[_0x5edc13(0x279)](settings['telegramChatId'],_0x5edc13(0x29b)+normalizeIP(_0x5f32e7)[_0x5edc13(0x194)]+_0x5edc13(0x271),{'parse_mode':_0x5edc13(0x288),'reply_markup':{'inline_keyboard':[[{'text':_0x5edc13(0x295),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x5edc13(0x23b)}]]}})[_0x5edc13(0x17e)](_0xf98a57=>{telegramError(_0xf98a57);}),tgBot['on'](_0x5edc13(0x1d0),async _0x509cd3=>{const _0x3ee64e=_0x5edc13,_0xc395e3=_0x509cd3['data'],_0x25bb2c=_0x509cd3[_0x3ee64e(0x162)];tgBot[_0x3ee64e(0x1a7)](_0x509cd3['id'])[_0x3ee64e(0x196)](async()=>{const _0x5858b5=_0x3ee64e;devices[_0x576181]['telegram2FaApproval']={'clientip':_0x5f32e7,'timestamp':new Date()[_0x5858b5(0x161)](),'expiry':_0xc395e3},_0xc395e3!=_0x5858b5(0x23b)?(await tgBot[_0x5858b5(0x279)](_0x25bb2c[_0x5858b5(0x1ad)]['id'],_0x5858b5(0x29e),{'parse_mode':_0x5858b5(0x288)})[_0x5858b5(0x17e)](_0x7174dc=>{telegramError(_0x7174dc);}),io['to'](_0x576181)[_0x5858b5(0x282)]('status',{'access':{'allow':![],'reason':_0x5858b5(0x22a),'token':null}})):(await tgBot['sendMessage'](_0x25bb2c['chat']['id'],_0x5858b5(0x26d))[_0x5858b5(0x17e)](_0x1da17e=>{telegramError(_0x1da17e);}),io['to'](_0x576181)[_0x5858b5(0x282)](_0x5858b5(0x16c),{'access':{'allow':![],'reason':_0x5858b5(0x1e8),'token':null}}));}),tgBot['removeListener'](_0x3ee64e(0x1d0));}));}function getConfiguration(){const _0x1f9d80=_0x35ba69;return dbConfig[_0x1f9d80(0x235)]('bots')[_0x1f9d80(0x16e)](_0x1f9d80(0x188))[_0x1f9d80(0x18c)]()||[];}function getEnabledBots(){const _0x39fa22=_0x35ba69;return dbConfig['get'](_0x39fa22(0x1df))[_0x39fa22(0x16e)](_0x39fa22(0x188))[_0x39fa22(0x242)]({'status':_0x39fa22(0x164)})[_0x39fa22(0x18c)]()||[];}function getDisabledBots(){const _0x5425aa=_0x35ba69;return dbConfig[_0x5425aa(0x235)](_0x5425aa(0x1df))[_0x5425aa(0x16e)](_0x5425aa(0x188))[_0x5425aa(0x242)]({'status':_0x5425aa(0x1f1)})['value']()||[];}function getSettings(){const _0x20772d=_0x35ba69;return dbSettings['get'](_0x20772d(0x1cc))[_0x20772d(0x18c)]()||{'timeshift':0x0};}function getSecure(){const _0x3f0621=_0x35ba69;return dbSecure[_0x3f0621(0x235)](_0x3f0621(0x18a))[_0x3f0621(0x18c)]()||{};}function getBlacklist(){const _0x44c2fd=_0x35ba69;return dbSecure[_0x44c2fd(0x235)](_0x44c2fd(0x217))[_0x44c2fd(0x18c)]()||[];}function broadcastToBots(_0x2162b5,_0x477df3){config['forEach'](_0x165a01=>{const _0x8841e0=_0x52ea;if(_0x165a01[_0x8841e0(0x16c)]==_0x8841e0(0x164)&&_0x165a01[_0x8841e0(0x269)]==_0x8841e0(0x1b5)){if(pid[_0x165a01[_0x8841e0(0x188)]])pid[_0x165a01[_0x8841e0(0x188)]][_0x8841e0(0x16b)]({[_0x2162b5]:_0x477df3});}});}function storeSettings(_0xc802a8,_0xd0aa38=![]){const _0x5cf26f=_0x35ba69;_0xc802a8={...settings,..._0xc802a8};if(_0xd0aa38&&_0xc802a8[_0x5cf26f(0x22f)]!='************'&&_0xc802a8[_0x5cf26f(0x22f)]!=''){const _0x26a694=crypt[_0x5cf26f(0x1ed)](secure[_0x5cf26f(0x29d)],_0xc802a8[_0x5cf26f(0x22f)])[_0x5cf26f(0x162)]['split']('@')[0x0],_0x4a4823=bcrypt['hashSync'](_0x26a694,saltRounds);_0xc802a8={..._0xc802a8,'bbPassword':_0x4a4823};}if(_0xd0aa38&&_0xc802a8[_0x5cf26f(0x208)]!=_0x5cf26f(0x221)&&_0xc802a8[_0x5cf26f(0x208)]!=''){const _0x4a18ed=crypt[_0x5cf26f(0x1ed)](secure[_0x5cf26f(0x29d)],_0xc802a8[_0x5cf26f(0x208)])[_0x5cf26f(0x162)][_0x5cf26f(0x1f2)]('@')[0x0];_0xc802a8={..._0xc802a8,'telegramToken':_0x4a18ed};}const _0x565d28=_0xc802a8[_0x5cf26f(0x208)]!=_0x5cf26f(0x221)&&_0xc802a8[_0x5cf26f(0x208)]!=settings['telegramToken']||_0xc802a8[_0x5cf26f(0x23d)]!=settings[_0x5cf26f(0x23d)],_0x7a9856=_0xc802a8[_0x5cf26f(0x208)]==''||_0xc802a8['telegramUsername']=='';if(_0x565d28)_0xc802a8[_0x5cf26f(0x18b)]=_0x5cf26f(0x1b7);for(const [_0x108768,_0x1356d9]of Object[_0x5cf26f(0x285)](_0xc802a8)){if(_0x108768==_0x5cf26f(0x208)&&_0x1356d9=='************'){_0xc802a8[_0x5cf26f(0x208)]=settings['telegramToken'];continue;};if(_0x108768==_0x5cf26f(0x22f)&&_0x1356d9=='************'){_0xc802a8[_0x5cf26f(0x22f)]=settings[_0x5cf26f(0x22f)];continue;};dbSettings[_0x5cf26f(0x17f)]('settings.'+_0x108768,_0x1356d9)['write']();}settings=_0xc802a8,io['to'](_0x5cf26f(0x28b))[_0x5cf26f(0x282)](_0x5cf26f(0x1cc),cleanSettings()),broadcastToBots(_0x5cf26f(0x16d),settings[_0x5cf26f(0x16d)]);if(_0x565d28&&!_0x7a9856)initTelegram();if(_0x565d28&&_0x7a9856)disableTelegram();getAllClients()[_0x5cf26f(0x1b6)](_0x1dc8ff=>{const _0x5a6a8d=_0x5cf26f;getSocket(_0x1dc8ff['id'])[_0x5a6a8d(0x282)](_0x5a6a8d(0x16c),{'access':{'allow':![],'reason':_0x5a6a8d(0x22a),'token':null}});});}function updateSetting(_0x3e3a54,_0x3cdf25){const _0x47f149=_0x35ba69;dbSettings[_0x47f149(0x17f)](_0x47f149(0x186)+_0x3e3a54,_0x3cdf25)[_0x47f149(0x1e1)](),settings=getSettings(),io['to'](_0x47f149(0x28b))[_0x47f149(0x282)](_0x47f149(0x1cc),cleanSettings());}function storeSecure(_0x369571){const _0x12b398=_0x35ba69;dbSecure[_0x12b398(0x235)]('secure')['push'](_0x369571)[_0x12b398(0x1e1)](),secure=_0x369571;}function addBlacklist(_0x5ee744){const _0x5245ff=_0x35ba69;cleanBlacklist();let _0x2aec1b;devices[_0x5ee744][_0x5245ff(0x18e)]?_0x2aec1b=Math[_0x5245ff(0x21e)](devices[_0x5ee744][_0x5245ff(0x18e)]['expiry'],loginExpiry):_0x2aec1b=loginExpiry,dbSecure[_0x5245ff(0x235)]('blacklist')[_0x5245ff(0x166)]({'expiry':new Date()[_0x5245ff(0x161)]()+_0x2aec1b*0x3c*0x3e8,'token':devices[_0x5ee744][_0x5245ff(0x294)][_0x5245ff(0x245)]})[_0x5245ff(0x1e1)](),blacklist=dbSecure[_0x5245ff(0x235)]('blacklist')[_0x5245ff(0x18c)]();}function cleanBlacklist(){const _0x46e919=_0x35ba69;let _0x43ff6b=dbSecure['get'](_0x46e919(0x217))[_0x46e919(0x20e)]()[_0x46e919(0x18c)](),_0x8859f5=new Date()[_0x46e919(0x161)]();_0x43ff6b[_0x46e919(0x1b6)](_0x22d060=>{const _0x1bd342=_0x46e919;_0x22d060[_0x1bd342(0x296)]<_0x8859f5&&dbSecure[_0x1bd342(0x235)](_0x1bd342(0x217))[_0x1bd342(0x286)]({'expiry':_0x22d060[_0x1bd342(0x296)]})[_0x1bd342(0x1e1)]();});}function initStates(){const _0x3ccc84=_0x35ba69;let _0x49e3b1=getConfiguration();_0x49e3b1[_0x3ccc84(0x1b6)](_0x22c060=>{const _0x2375d0=_0x3ccc84;_0x22c060[_0x2375d0(0x269)]='stopped';}),storeConfiguration(_0x49e3b1);}function onKeys(){const _0x44d0e8=new RSA();return new Promise(_0x5a81dd=>{const _0x453f79=_0x52ea;_0x44d0e8[_0x453f79(0x264)]()[_0x453f79(0x196)](_0x6fb25c=>{_0x5a81dd(_0x6fb25c);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3282b4=_0x35ba69;let _0x510be5=getConfiguration(),_0x118eb7=![];_0x510be5[_0x3282b4(0x1b6)](_0x41c53d=>{const _0x4d564f=_0x3282b4;if(_0x41c53d[_0x4d564f(0x16c)]=='running')_0x41c53d[_0x4d564f(0x16c)]=_0x4d564f(0x164),_0x118eb7=!![];else _0x41c53d[_0x4d564f(0x16c)]=='stopped'&&(_0x41c53d[_0x4d564f(0x16c)]=_0x4d564f(0x1f1),_0x118eb7=!![]);});if(_0x118eb7)storeConfiguration(_0x510be5);let _0x188161=getSecure();if(!_0x188161[_0x3282b4(0x1d1)]('secret')){let _0x2e6317=await generateKeys();_0x188161[_0x3282b4(0x1bc)]=_0x2e6317[_0x3282b4(0x1bc)],_0x188161[_0x3282b4(0x29d)]=_0x2e6317['privateKey'],_0x188161['secret']=crypto[_0x3282b4(0x2a0)](0x20)['toString'](_0x3282b4(0x1a9));;storeSecure(_0x188161);}let _0x2d358b=getSettings();_0x118eb7=![];!_0x2d358b[_0x3282b4(0x1d1)]('loginRequired')&&(_0x2d358b[_0x3282b4(0x28f)]=![],_0x2d358b['bbUsername']='',_0x2d358b['bbPassword']='',_0x2d358b[_0x3282b4(0x19c)]=![],_0x118eb7=!![]);!_0x2d358b['hasOwnProperty'](_0x3282b4(0x18f))&&(_0x2d358b[_0x3282b4(0x18f)]=![],_0x2d358b[_0x3282b4(0x1d6)]=[],_0x2d358b[_0x3282b4(0x203)]=![],_0x118eb7=!![]);if(!_0x2d358b[_0x3282b4(0x1d1)](_0x3282b4(0x262))){if(_0x2d358b[_0x3282b4(0x1f7)])_0x2d358b[_0x3282b4(0x262)]=!![];else _0x2d358b[_0x3282b4(0x262)]=![];_0x118eb7=!![];}if(_0x118eb7)storeSettings(_0x2d358b);}function storeConfiguration(_0x16e652){const _0x322b71=_0x35ba69;dbConfig[_0x322b71(0x235)]('bots')['remove']()[_0x322b71(0x1e1)](),dbConfig[_0x322b71(0x235)](_0x322b71(0x1df))[_0x322b71(0x166)](..._0x16e652)['write'](),config=_0x16e652;}function resetPassword(){const _0x1a1bca=_0x35ba69;tgBot&&settings[_0x1a1bca(0x1f7)]&&(tgBot[_0x1a1bca(0x1f6)]('callback_query'),tgBot[_0x1a1bca(0x279)](settings['telegramChatId'],_0x1a1bca(0x209),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1a1bca(0x17e)](_0x9aaac9=>{telegramError(_0x9aaac9);}),tgBot['on'](_0x1a1bca(0x1d0),async _0x37ed89=>{const _0x5580e9=_0x1a1bca,_0x4260c7=_0x37ed89['data'],_0x37e442=_0x37ed89[_0x5580e9(0x162)];tgBot[_0x5580e9(0x1a7)](_0x37ed89['id'])[_0x5580e9(0x196)](async()=>{const _0xd9c0c7=_0x5580e9;if(_0x4260c7!='no'){const _0x2e6f42=0xf,_0xacf0ed=_0xd9c0c7(0x223),_0x2a3073=Array[_0xd9c0c7(0x265)](crypto[_0xd9c0c7(0x1db)](new Uint32Array(_0x2e6f42)))['map'](_0x521bf8=>_0xacf0ed[_0x521bf8%_0xacf0ed[_0xd9c0c7(0x257)]])['join'](''),_0x1ede18=bcrypt[_0xd9c0c7(0x1d8)](_0x2a3073,saltRounds);storeSettings({'bbPassword':_0x1ede18}),await tgBot[_0xd9c0c7(0x279)](_0x37e442[_0xd9c0c7(0x1ad)]['id'],_0xd9c0c7(0x1bb)+_0x2a3073,{'parse_mode':_0xd9c0c7(0x288)})[_0xd9c0c7(0x17e)](_0x5c2dcc=>{telegramError(_0x5c2dcc);});}else await tgBot['sendMessage'](_0x37e442['chat']['id'],'Password\x20reset\x20rejected')[_0xd9c0c7(0x17e)](_0x1ebcbb=>{telegramError(_0x1ebcbb);});}),tgBot[_0x5580e9(0x1f6)]('callback_query');}));}function logging(_0xa3b9bc){const _0x35a0bc=_0x35ba69;console[_0x35a0bc(0x195)](getTimeStamp()+_0x35a0bc(0x19b)+_0xa3b9bc);if(tgBot&&settings[_0x35a0bc(0x1f7)]&&settings[_0x35a0bc(0x18b)]!=_0x35a0bc(0x266))tgBot[_0x35a0bc(0x279)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0xa3b9bc)[_0x35a0bc(0x17e)](_0x1360bf=>{telegramError(_0x1360bf);});}function getServerTime(){const _0x49f32c=_0x35ba69,_0x32352c=new Date();return _0x32352c['getFullYear']()+'/'+(_0x32352c[_0x49f32c(0x15b)]()+0x1)[_0x49f32c(0x21d)]()[_0x49f32c(0x25c)](0x2,'0')+'/'+_0x32352c[_0x49f32c(0x253)]()[_0x49f32c(0x21d)]()[_0x49f32c(0x25c)](0x2,'0')+'\x20'+_0x32352c[_0x49f32c(0x1eb)]()[_0x49f32c(0x21d)]()[_0x49f32c(0x25c)](0x2,'0')+':'+_0x32352c['getMinutes']()[_0x49f32c(0x21d)]()[_0x49f32c(0x25c)](0x2,'0')+':'+_0x32352c[_0x49f32c(0x169)]()[_0x49f32c(0x21d)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x34bba2=_0x35ba69,_0x2e83b0=shiftedTime();return _0x2e83b0[_0x34bba2(0x270)]()+'/'+(_0x2e83b0['getMonth']()+0x1)[_0x34bba2(0x21d)]()['padStart'](0x2,'0')+'/'+_0x2e83b0['getDate']()['toString']()[_0x34bba2(0x25c)](0x2,'0')+'\x20'+_0x2e83b0[_0x34bba2(0x1eb)]()['toString']()[_0x34bba2(0x25c)](0x2,'0')+':'+_0x2e83b0[_0x34bba2(0x25a)]()[_0x34bba2(0x21d)]()[_0x34bba2(0x25c)](0x2,'0')+':'+_0x2e83b0[_0x34bba2(0x169)]()['toString']()[_0x34bba2(0x25c)](0x2,'0');}function shiftedTime(){const _0x504b8b=_0x35ba69,_0x499362=new Date();let _0x4b963c=_0x499362;if(settings[_0x504b8b(0x16d)]&&settings[_0x504b8b(0x16d)]!==0x0)_0x4b963c=fns[_0x504b8b(0x28d)](_0x499362,{'hours':settings['timeshift']});return _0x4b963c;}function startScheduler(){const _0x313710=_0x35ba69;let _0xbb69f=new Date()[_0x313710(0x254)]();_0xbb69f==0x1&&backupConfigFiles();_0xbb69f==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5bb6e5=_0x35ba69;fs[_0x5bb6e5(0x18d)](configpath,{'withFileTypes':!![]})[_0x5bb6e5(0x1b6)](_0x334e0d=>{const _0x449cbe=_0x5bb6e5;if(!_0x334e0d[_0x449cbe(0x15e)]())fs['copyFileSync'](configpath+_0x334e0d['name'],configbackuppath+_0x334e0d[_0x449cbe(0x1dd)]);});}function triggerAnalytics(){const _0xa49675=_0x35ba69;analytics[_0xa49675(0x230)]({'title':_0xa49675(0x25d),'href':_0xa49675(0x207),'path':'/v'+serverversion});}function validateCredentials(_0x5ba7c5,_0x418654){const _0x5b219e=_0x35ba69;if(_0x5ba7c5[_0x5b219e(0x193)]==settings[_0x5b219e(0x20f)]&&bcrypt['compareSync'](_0x5ba7c5[_0x5b219e(0x20a)],settings['bbPassword'])){if(settings[_0x5b219e(0x19c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x111a52=generateLoginToken(_0x418654);return{'allow':!![],'reason':_0x5b219e(0x180),'token':_0x111a52};}}else return{'allow':![],'reason':_0x5b219e(0x16f),'token':null};}function refreshToken(_0x55d646){const _0x27b4ab=_0x35ba69,_0x3c1448=generateLoginToken(_0x55d646);return{'allow':!![],'reason':_0x27b4ab(0x180),'token':_0x3c1448};}function validateAccess(_0x5e722e,_0xf0c40a){const _0xc9ba8c=_0x35ba69;let _0xe592f8=devices[_0xf0c40a]['ip'],_0x19aa65;const _0x23ccdd=_0x1b19e8=>{const _0x347395=_0x52ea;if(settings[_0x347395(0x28f)]){if(settings[_0x347395(0x19c)]){if(telegram2FaApproved(_0xf0c40a)){const _0x83cccd=generateLoginToken(_0xf0c40a);return{'allow':!![],'reason':_0x347395(0x228),'token':_0x83cccd};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x19aa65=validToken(_0x1b19e8,_0xf0c40a),_0x19aa65['hasOwnProperty']('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1b19e8}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0xc9ba8c(0x18f)]){let _0x493195=[...settings['whitelist'],_0xc9ba8c(0x1f0),_0xc9ba8c(0x263),_0xc9ba8c(0x222)];if(_0x493195[_0xc9ba8c(0x252)](_0xe592f8))return _0x23ccdd(_0x5e722e);else{_0x19aa65=validToken(_0x5e722e,_0xf0c40a);if(_0x19aa65[_0xc9ba8c(0x1d1)](_0xc9ba8c(0x26b)))return _0x23ccdd(_0x5e722e);else{if(telegramIpApproved(_0xf0c40a)){const _0x3036e3=generateToken(_0xf0c40a);return _0x19aa65=_0x23ccdd(_0x5e722e),_0x19aa65['allow']?{'allow':!![],'reason':_0xc9ba8c(0x1fc),'token':_0x3036e3}:_0x19aa65;}else return settings[_0xc9ba8c(0x203)]?{'allow':![],'reason':_0xc9ba8c(0x184),'token':null}:{'allow':![],'reason':_0xc9ba8c(0x170),'token':null};}}}else return _0x23ccdd(_0x5e722e);}function timelyDecrypt(_0x3b2bc9,_0x1672c9=!![]){const _0x4b1fe0=_0x35ba69;if(_0x3b2bc9)try{const _0x4b31d5=crypt[_0x4b1fe0(0x1ed)](secure[_0x4b1fe0(0x29d)],_0x3b2bc9)['message'],_0x32805f=_0x4b31d5[_0x4b1fe0(0x1f2)]('@')[0x0],_0x3f3793=_0x4b31d5[_0x4b1fe0(0x1f2)]('@')[0x1],_0x2a3686=new Date()['getTime']();if(_0x1672c9){if(_0x2a3686-_0x3f3793<maxSecretAge*0x3e8)return _0x32805f;else return![];}else return _0x32805f;}catch(_0x2dadd8){return![];}else return![];}const validToken=(_0x497194,_0x5bbc80)=>{const _0x6cf3d6=_0x35ba69,_0x294cd1=devices[_0x5bbc80]['ip'];if(!_0x497194)return{'error':_0x6cf3d6(0x191)};for(let _0x5cd52b of blacklist){if(_0x5cd52b['token']==_0x497194)return{'error':_0x6cf3d6(0x1ff)};}let _0x35baac;try{_0x35baac=jwt[_0x6cf3d6(0x206)](_0x497194,secure[_0x6cf3d6(0x1b9)]+_0x5bbc80);}catch{return{'error':_0x6cf3d6(0x249)};}if(!_0x35baac[_0x6cf3d6(0x1d1)]('clientip')&&!_0x35baac[_0x6cf3d6(0x1d1)](_0x6cf3d6(0x193))||!_0x35baac[_0x6cf3d6(0x1d1)]('exp'))return{'error':_0x6cf3d6(0x1ab)};if(!_0x35baac[_0x6cf3d6(0x1d1)]('username')&&_0x35baac[_0x6cf3d6(0x1d1)](_0x6cf3d6(0x163))){const {clientip:_0x3226ea}=_0x35baac;return _0x294cd1==_0x3226ea?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x6cf3d6(0x26e)};}else{if(_0x35baac['hasOwnProperty'](_0x6cf3d6(0x193))&&_0x35baac['hasOwnProperty'](_0x6cf3d6(0x163))){const {username:_0x571e51,clientip:_0x40aa43}=_0x35baac;return settings['bbUsername']==_0x571e51&&_0x294cd1==_0x40aa43?{'success':_0x6cf3d6(0x28a)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x840e10=>{const _0x345dbd=_0x35ba69;if(_0x840e10){const _0x1fa7bf=devices[_0x840e10]['ip'];return jwt['sign']({'username':settings[_0x345dbd(0x20f)],'clientip':_0x1fa7bf},secure[_0x345dbd(0x1b9)]+_0x840e10,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x459e40=>{const _0x567e2e=_0x35ba69;if(_0x459e40){const _0x82f285=devices[_0x459e40]['ip'];return jwt[_0x567e2e(0x23a)]({'clientip':_0x82f285},secure[_0x567e2e(0x1b9)]+_0x459e40,{'expiresIn':devices[_0x459e40][_0x567e2e(0x18e)][_0x567e2e(0x296)]*0x3c});}else return![];},telegramIpApproved=_0x55fc7c=>{const _0x3a8758=_0x35ba69;let _0x1eff2c=![];return devices[_0x55fc7c][_0x3a8758(0x18e)]&&devices[_0x55fc7c]['telegramIpApproval'][_0x3a8758(0x296)]!=_0x3a8758(0x23b)&&(_0x1eff2c=devices[_0x55fc7c][_0x3a8758(0x18e)]['clientip']==devices[_0x55fc7c]['ip']&&new Date()[_0x3a8758(0x161)]()-devices[_0x55fc7c][_0x3a8758(0x18e)][_0x3a8758(0x29f)]<devices[_0x55fc7c][_0x3a8758(0x18e)][_0x3a8758(0x296)]*0x3c*0x3e8),_0x1eff2c;},telegram2FaApproved=_0x5846b2=>{const _0x139589=_0x35ba69;let _0x4ad179=![];return devices[_0x5846b2][_0x139589(0x17d)]&&devices[_0x5846b2][_0x139589(0x17d)][_0x139589(0x296)]!='reject'&&(_0x4ad179=devices[_0x5846b2]['telegram2FaApproval'][_0x139589(0x163)]==devices[_0x5846b2]['ip']&&new Date()[_0x139589(0x161)]()-devices[_0x5846b2][_0x139589(0x17d)][_0x139589(0x29f)]<devices[_0x5846b2]['telegram2FaApproval'][_0x139589(0x296)]*0x3c*0x3e8),_0x4ad179;},normalizeIP=_0x161ad9=>{const _0xa69ef2=_0x35ba69;let _0x2223e1=null,_0x1115f0=null;if(ipaddr[_0xa69ef2(0x200)](_0x161ad9)){const _0x20a73a=ipaddr[_0xa69ef2(0x23c)](_0x161ad9);_0x20a73a[_0xa69ef2(0x2a3)]()===_0xa69ef2(0x1b2)?(_0x20a73a[_0xa69ef2(0x24b)]()&&(_0x2223e1=_0x20a73a['toIPv4Address']()[_0xa69ef2(0x21d)]()),_0x1115f0=_0x20a73a[_0xa69ef2(0x21d)]()):(_0x2223e1=_0x20a73a[_0xa69ef2(0x21d)](),_0x1115f0=_0x20a73a['toIPv4MappedAddress']()[_0xa69ef2(0x21d)]());}return{'show':_0x2223e1?_0x2223e1:_0x1115f0,'store':_0x1115f0};};