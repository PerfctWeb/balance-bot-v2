const _0x5af4a7=_0x26eb;(function(_0x3930e6,_0x2df9c9){const _0x2a7803=_0x26eb,_0x25345a=_0x3930e6();while(!![]){try{const _0x8dcc88=-parseInt(_0x2a7803(0x255))/0x1*(parseInt(_0x2a7803(0x1d2))/0x2)+parseInt(_0x2a7803(0x224))/0x3*(-parseInt(_0x2a7803(0x228))/0x4)+-parseInt(_0x2a7803(0x1fd))/0x5*(-parseInt(_0x2a7803(0x1c6))/0x6)+-parseInt(_0x2a7803(0x2ab))/0x7*(-parseInt(_0x2a7803(0x172))/0x8)+-parseInt(_0x2a7803(0x1c8))/0x9*(-parseInt(_0x2a7803(0x2a8))/0xa)+parseInt(_0x2a7803(0x29e))/0xb*(parseInt(_0x2a7803(0x28f))/0xc)+-parseInt(_0x2a7803(0x151))/0xd;if(_0x8dcc88===_0x2df9c9)break;else _0x25345a['push'](_0x25345a['shift']());}catch(_0x553ff7){_0x25345a['push'](_0x25345a['shift']());}}}(_0x4ad3,0x89052));const _0x282c9a=function(){let _0x2236a7=!![];return function(_0x6c710d,_0x1954e9){const _0x52efe4=_0x2236a7?function(){const _0x4c1dd7=_0x26eb;if(_0x1954e9){const _0x17d7be=_0x1954e9[_0x4c1dd7(0x25e)](_0x6c710d,arguments);return _0x1954e9=null,_0x17d7be;}}:function(){};return _0x2236a7=![],_0x52efe4;};}(),_0x18ff55=_0x282c9a(this,function(){const _0x3101c0=_0x26eb;return _0x18ff55[_0x3101c0(0x1ba)]()[_0x3101c0(0x260)](_0x3101c0(0x2ad))[_0x3101c0(0x1ba)]()[_0x3101c0(0x20c)](_0x18ff55)['search'](_0x3101c0(0x2ad));});_0x18ff55();'use strict';process['env'][_0x5af4a7(0x252)]=0x1;const childProcess=require(_0x5af4a7(0x139)),fs=require('fs'),fns=require(_0x5af4a7(0x22b)),low=require(_0x5af4a7(0x149)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x5af4a7(0x16f)),crypto=require(_0x5af4a7(0x208)),Crypt=require(_0x5af4a7(0x1b4))[_0x5af4a7(0x1d9)],RSA=require(_0x5af4a7(0x1b4))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x5af4a7(0x17e)),ipaddr=require('ipaddr.js'),argv=require(_0x5af4a7(0x1c7))(process[_0x5af4a7(0x1ab)]['slice'](0x2))['argv'],uuidRandom=require(_0x5af4a7(0x115)),TelegramBot=require(_0x5af4a7(0x192)),Mixpanel=require('mixpanel'),axios=require(_0x5af4a7(0x18c)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x5af4a7(0x171)),PORT=argv[_0x5af4a7(0x122)]||_0x5af4a7(0x282),pattern=/^[0-9]{2,4}$/;!pattern[_0x5af4a7(0x197)](PORT)&&(console['log']('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x5af4a7(0x141)](0x1));const HOST=argv[_0x5af4a7(0x1d0)]||null,userID=argv[_0x5af4a7(0x1ad)]||'';let bbpath=_0x5af4a7(0x254),bbpath2='';const botfile=_0x5af4a7(0x185),configfile=_0x5af4a7(0x18a),settingsfile=_0x5af4a7(0x16d),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x5af4a7(0x11b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5af4a7(0x2ac)),configpath=userID?bbpath+_0x5af4a7(0x18d)+userID+'/':bbpath+_0x5af4a7(0x18d),configbackuppath=configpath+_0x5af4a7(0x1b7),logspath=userID?bbpath+_0x5af4a7(0x178)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x5af4a7(0x1b9)+userID+'/':bbpath+_0x5af4a7(0x1b9),loggerfile=fs[_0x5af4a7(0x13c)](logspath+_0x5af4a7(0x214),{'flags':'a'});!fs[_0x5af4a7(0x11b)](configpath)&&fs[_0x5af4a7(0x1cc)](configpath);!fs[_0x5af4a7(0x11b)](configbackuppath)&&fs[_0x5af4a7(0x1cc)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x5af4a7(0x1cc)](logspath);!fs[_0x5af4a7(0x11b)](zippath)&&fs[_0x5af4a7(0x1cc)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5af4a7(0x12f)]({'bots':[]})[_0x5af4a7(0x293)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5af4a7(0x1cd)}})[_0x5af4a7(0x293)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5af4a7(0x12f)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x5af4a7(0x11c),'rsaStandard':_0x5af4a7(0x12e)});const saltRounds=0xa,mixpanel=Mixpanel[_0x5af4a7(0x22a)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x5af4a7(0x20f)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x5af4a7(0x1ed)]&&settings['telegramToken']!=''&&settings[_0x5af4a7(0x233)]&&settings[_0x5af4a7(0x233)]!='')initTelegram();const logger={'screen':_0x205cbc=>{const _0x2a2cf9=_0x5af4a7;console[_0x2a2cf9(0x14f)](_0x205cbc);},'simple':_0x41c550=>{const _0x2653c0=_0x5af4a7;console[_0x2653c0(0x14f)](_0x41c550),loggerfile[_0x2653c0(0x293)](util[_0x2653c0(0x2af)](_0x41c550)+'\x0a');},'full':async _0x528326=>{const _0x1967fd=_0x5af4a7,_0x1faa69=getTimeStamp()+_0x1967fd(0x230)+_0x528326;console[_0x1967fd(0x14f)](_0x1faa69),loggerfile[_0x1967fd(0x293)](util[_0x1967fd(0x2af)](_0x1faa69)+'\x0a');if(tgBot&&settings[_0x1967fd(0x1d6)]&&settings[_0x1967fd(0x280)]!=_0x1967fd(0x160))await tgBot[_0x1967fd(0x145)](settings['telegramChatId'],_0x1967fd(0x202)+_0x528326)[_0x1967fd(0x15b)](_0x2c0280=>{telegramError(_0x2c0280);});}};process['on']('uncaughtException',function(_0x475279){const _0x4e002c=_0x5af4a7;logger[_0x4e002c(0x1b0)](_0x475279);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x5af4a7(0x11f)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5af4a7(0x221)),app=express(),http=require(_0x5af4a7(0x188))['createServer'](app);app[_0x5af4a7(0x28a)](_0x5af4a7(0x1f9),async(_0x254aba,_0x594f32)=>{const _0x348006=_0x5af4a7,_0x11eb78=_0x254aba[_0x348006(0x162)][_0x348006(0x168)],_0x2684ae=getClientsWithBotID('botmanager'),_0x1b9ab2=_0x254aba['headers'][_0x348006(0x163)],_0x2d0807=timelyDecrypt(_0x1b9ab2,![]),_0x4e1826=_0x2684ae[_0x348006(0x1bb)](_0x1388c9=>_0x1388c9[_0x348006(0x163)]==_0x2d0807);if(_0x4e1826){const _0x2cab4a=normalizeIP(_0x254aba[_0x348006(0x199)][_0x348006(0x165)])[_0x348006(0x24f)],_0x912d37=_0x254aba[_0x348006(0x137)][_0x348006(0x1b5)];if(validateAccess(_0x912d37,_0x2d0807,_0x2cab4a)[_0x348006(0x203)])await zipFiles(_0x11eb78),_0x594f32[_0x348006(0x28d)](zippath+(_0x11eb78+_0x348006(0x17f)),_0x573bce=>{const _0x545f9d=_0x348006;_0x573bce&&(logger[_0x545f9d(0x2ae)](_0x545f9d(0x1a5)+_0x11eb78),logger['simple'](_0x573bce));});else logger[_0x348006(0x2ae)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x11eb78+'\x20(1)');}else logger['full'](_0x348006(0x1a1)+_0x11eb78+_0x348006(0x164));}),app[_0x5af4a7(0x23e)](express[_0x5af4a7(0x20e)](path[_0x5af4a7(0x266)](__dirname,bbpath2,_0x5af4a7(0x209)))),app['use'](express[_0x5af4a7(0x20e)](path[_0x5af4a7(0x266)](__dirname,bbpath2,_0x5af4a7(0x189)))),app[_0x5af4a7(0x28a)]('/',function(_0x54dbfd,_0x4f70d7){const _0x22be48=_0x5af4a7;_0x4f70d7['sendFile'](path[_0x22be48(0x266)](__dirname,bbpath2,_0x22be48(0x209),_0x22be48(0x17d)));}),app[_0x5af4a7(0x28a)](_0x5af4a7(0x15f),function(_0x32c284,_0x37163a){const _0x2fd538=_0x5af4a7;_0x37163a[_0x2fd538(0x27c)](path['join'](__dirname,bbpath2,_0x2fd538(0x189),'index.html'));}),app[_0x5af4a7(0x28a)](_0x5af4a7(0x1af),(_0x536ac3,_0x272d07)=>{const _0x44a892=_0x5af4a7;_0x272d07[_0x44a892(0x27c)](path['join'](__dirname,bbpath2,'build',_0x44a892(0x17d)));}),app[_0x5af4a7(0x28a)](_0x5af4a7(0x1ca),(_0xe2a9a1,_0x1ff6d2)=>{const _0x27f02a=_0x5af4a7;_0x1ff6d2[_0x27f02a(0x27c)](path['join'](__dirname,bbpath2,_0x27f02a(0x189),'index.html'));}),app[_0x5af4a7(0x28a)]('/:bot/coins',(_0x5a199e,_0x4224ad)=>{const _0x360b9c=_0x5af4a7;_0x4224ad[_0x360b9c(0x27c)](path['join'](__dirname,bbpath2,_0x360b9c(0x189),_0x360b9c(0x17d)));}),app[_0x5af4a7(0x28a)](_0x5af4a7(0x206),(_0x25af93,_0x6ce862)=>{const _0x40523a=_0x5af4a7;_0x6ce862[_0x40523a(0x27c)](path['join'](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x5af4a7(0x191),(_0x12d993,_0x18ead0)=>{const _0x22cdf8=_0x5af4a7;_0x18ead0[_0x22cdf8(0x27c)](path[_0x22cdf8(0x266)](__dirname,bbpath2,'build',_0x22cdf8(0x17d)));}),app[_0x5af4a7(0x28a)](_0x5af4a7(0x27b),(_0x5c5a15,_0x39d135)=>{const _0x366d1c=_0x5af4a7;_0x39d135[_0x366d1c(0x27c)](path['join'](__dirname,bbpath2,_0x366d1c(0x189),_0x366d1c(0x17d)));});if(HOST)http['listen'](PORT,HOST);else http[_0x5af4a7(0x242)](PORT);const io=require(_0x5af4a7(0x153))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x26cc4a=_0x5af4a7;logger[_0x26cc4a(0x1b0)](''),logger[_0x26cc4a(0x1b0)](_0x26cc4a(0x140)),await logger[_0x26cc4a(0x2ae)](_0x26cc4a(0x190)+PORT),logger['simple'](_0x26cc4a(0x140));if(config[_0x26cc4a(0x247)]!=0x0)for(const _0x2416f4 of config){if(_0x2416f4['status']==_0x26cc4a(0x150)||_0x2416f4[_0x26cc4a(0x180)]==_0x26cc4a(0x227))await logger['full'](_0x26cc4a(0x273)+_0x2416f4[_0x26cc4a(0x1e4)]+_0x26cc4a(0x147)+_0x2416f4[_0x26cc4a(0x239)]),startBot([_0x2416f4['botID'],userID],{'cwd':bbpath},function(_0x4e029a){const _0x3fff92=_0x26cc4a;if(_0x4e029a)logger[_0x3fff92(0x2ae)](_0x4e029a);});else(_0x2416f4[_0x26cc4a(0x180)]==_0x26cc4a(0x1ce)||_0x2416f4[_0x26cc4a(0x180)]==_0x26cc4a(0x1c0))&&await logger[_0x26cc4a(0x2ae)](_0x26cc4a(0x270)+_0x2416f4[_0x26cc4a(0x1e4)]+_0x26cc4a(0x147)+_0x2416f4[_0x26cc4a(0x239)]);}else!newBot&&logger['simple'](_0x26cc4a(0x177));if(newBot)addBot();logger[_0x26cc4a(0x1b0)](_0x26cc4a(0x140)),logger[_0x26cc4a(0x1b0)]('');}function startSocket(){const _0x3cb413=_0x5af4a7;io['on'](_0x3cb413(0x1d1),_0x209c4c=>{const _0x19a172=_0x3cb413;let _0x27f049,_0x3e6a09,_0x2b21fc,_0x4d201b,_0x40582;const _0x2df983=_0x209c4c['handshake']['headers']['referer'];_0x3e6a09=_0x2df983[_0x19a172(0x17a)](/bot[0-9]{3}/);if(_0x3e6a09)_0x2b21fc=_0x3e6a09[0x0][_0x19a172(0x17a)](/[0-9]{3}/);if(_0x2b21fc)_0x27f049=_0x2b21fc[0x0];else _0x27f049=_0x19a172(0x19f);const _0x3898a6=_0x209c4c[_0x19a172(0x1cb)][_0x19a172(0x158)]['encryptedUuid'];if(!_0x3898a6)_0x209c4c[_0x19a172(0x1de)](_0x19a172(0x180),{'publicKey':secure['publicKey']});else{_0x4d201b=timelyDecrypt(_0x3898a6,![]);if(!_0x4d201b)_0x209c4c[_0x19a172(0x1de)]('status',{'publicKey':secure[_0x19a172(0x207)]});else{_0x40582=normalizeIP(_0x209c4c[_0x19a172(0x14a)][_0x19a172(0x165)])[_0x19a172(0x24f)];if(!devices[_0x4d201b])devices[_0x4d201b]={'uuid':_0x4d201b,'access':{'token':null}};devices[_0x4d201b]['ip']=_0x40582;const _0x266e01=addClient(_0x209c4c['id'],_0x4d201b,_0x27f049);setAccess(_0x266e01),emitMessages(),_0x209c4c['on'](_0x19a172(0x1a0),_0x241b92=>{const _0x31cc3c=_0x19a172,_0x5c4e96=timelyDecrypt(_0x241b92['password']);if(_0x5c4e96){_0x241b92={'username':_0x241b92['username'],'password':_0x5c4e96},devices[_0x4d201b][_0x31cc3c(0x154)]=validateCredentials(_0x241b92,_0x4d201b);if(devices[_0x4d201b]['access'][_0x31cc3c(0x203)]==![]&&devices[_0x4d201b][_0x31cc3c(0x154)][_0x31cc3c(0x1b3)]=='2FA\x20login\x20required')_0x209c4c['emit']('status',{'access':devices[_0x4d201b][_0x31cc3c(0x154)]}),loginAccess2FA(_0x4d201b,_0x40582);else{if(devices[_0x4d201b][_0x31cc3c(0x154)][_0x31cc3c(0x203)]==![]&&devices[_0x4d201b][_0x31cc3c(0x154)][_0x31cc3c(0x1b3)]==_0x31cc3c(0x271))_0x209c4c[_0x31cc3c(0x1de)]('status',{'access':devices[_0x4d201b][_0x31cc3c(0x154)]});else devices[_0x4d201b][_0x31cc3c(0x154)][_0x31cc3c(0x203)]&&devices[_0x4d201b][_0x31cc3c(0x154)][_0x31cc3c(0x1b3)]==_0x31cc3c(0x279)&&(getClientsWithUuid(_0x4d201b)['forEach'](_0x3edf50=>{setAccess(_0x3edf50);}),setTokenRefresh(_0x4d201b),setSessionTimeout(_0x31cc3c(0x1a0),_0x4d201b));}}else logger[_0x31cc3c(0x2ae)](_0x31cc3c(0x222));}),_0x209c4c['on']('reset-password',()=>{resetPassword();}),_0x209c4c['on'](_0x19a172(0x11d),_0x4aec95=>{removeClient(_0x209c4c['id']);}),_0x27f049==_0x19a172(0x19f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x172987){const _0x556f90=_0x5af4a7;if(_0x172987!=_0x556f90(0x19f)&&config[_0x556f90(0x295)]!=''){if(pid[_0x172987])pid[_0x172987][_0x556f90(0x17c)]({'function':_0x556f90(0x14c),'args':null});}}function getSocket(_0x22f319){const _0xdce94f=_0x5af4a7;return io[_0xdce94f(0x1d4)][_0xdce94f(0x1d4)][_0xdce94f(0x28a)](_0x22f319);}function setAccess(_0xaab6d3){const _0x221072=_0x5af4a7,_0x19f4e3=getSocket(_0xaab6d3['id']),_0x571d0c=_0xaab6d3['uuid'],_0x28aa04=_0xaab6d3[_0x221072(0x291)];devices[_0x571d0c][_0x221072(0x154)]=validateAccess(devices[_0x571d0c][_0x221072(0x154)][_0x221072(0x29d)],_0x571d0c),_0x19f4e3['join'](_0x571d0c);if(devices[_0x571d0c][_0x221072(0x154)][_0x221072(0x203)]){_0x19f4e3[_0x221072(0x266)](_0x28aa04);if(_0x28aa04==_0x221072(0x19f))initializeSocketBotManager(_0x19f4e3);else initializeSocketBot(_0x19f4e3);initClient(_0x28aa04);}devices[_0x571d0c]['access']['token']&&devices[_0x571d0c][_0x221072(0x154)]['reason']==_0x221072(0x244)&&setSessionTimeout('2FA',_0x571d0c),devices[_0x571d0c][_0x221072(0x154)]['token']&&devices[_0x571d0c][_0x221072(0x154)][_0x221072(0x1b3)]==_0x221072(0x1b6)&&setSessionTimeout(_0x221072(0x1a0),_0x571d0c),_0x19f4e3[_0x221072(0x1de)](_0x221072(0x180),{'status':_0xaab6d3[_0x221072(0x119)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x571d0c]['access'],'externalip':devices[_0x571d0c]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x571d0c]['access']['allow']==![]&&devices[_0x571d0c][_0x221072(0x154)][_0x221072(0x1b3)]=='2FA\x20required'&&temporaryAccess2FA(_0x571d0c,devices[_0x571d0c]['ip']);}function setSessionTimeout(_0x286c1c,_0x3e2846){const _0x339020=_0x5af4a7;let _0x3c660e;if(_0x286c1c==_0x339020(0x1a0))_0x3c660e=loginExpiry*0x3c*0x3e8;else _0x3c660e=devices[_0x3e2846][_0x339020(0x159)][_0x339020(0x1dc)]*0x3c*0x3e8-(new Date()[_0x339020(0x136)]()-devices[_0x3e2846][_0x339020(0x159)][_0x339020(0x1db)]);if(devices[_0x3e2846][_0x339020(0x1ff)])clearTimeout(devices[_0x3e2846][_0x339020(0x1ff)]);devices[_0x3e2846][_0x339020(0x1ff)]=setTimeout(()=>{const _0x496085=_0x339020;if(devices[_0x3e2846][_0x496085(0x267)])clearTimeout(devices[_0x3e2846]['pidRefreshToken']);removeSocketListeners(_0x3e2846),addBlacklist(_0x3e2846),devices[_0x3e2846][_0x496085(0x159)]=null,devices[_0x3e2846][_0x496085(0x14e)]=null,devices[_0x3e2846][_0x496085(0x154)][_0x496085(0x29d)]=null,devices[_0x3e2846][_0x496085(0x154)]=validateAccess(devices[_0x3e2846]['access']['token'],_0x3e2846),!(devices[_0x3e2846]['access']['allow']&&devices[_0x3e2846][_0x496085(0x154)]['reason']==_0x496085(0x13f))&&(_0x286c1c==_0x496085(0x1a0)?io['to'](_0x3e2846)[_0x496085(0x1de)]('status',{'access':{'allow':![],'reason':_0x496085(0x187),'token':null}}):io['to'](_0x3e2846)[_0x496085(0x1de)](_0x496085(0x180),{'access':{'allow':![],'reason':_0x496085(0x21a),'token':null}})),devices[_0x3e2846]['access'][_0x496085(0x29d)]=null;},_0x3c660e);}function setTokenRefresh(_0x30fc74){const _0x26347=_0x5af4a7;if(devices[_0x30fc74][_0x26347(0x267)])clearTimeout(devices[_0x30fc74][_0x26347(0x267)]);devices[_0x30fc74][_0x26347(0x267)]=setTimeout(()=>{const _0x5214ab=_0x26347;getClientsWithUuid(_0x30fc74)[_0x5214ab(0x247)]!=0x0?(devices[_0x30fc74][_0x5214ab(0x154)]=refreshToken(_0x30fc74),io['to'](_0x30fc74)[_0x5214ab(0x1de)]('status',{'status':_0x5214ab(0x268),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x30fc74][_0x5214ab(0x154)],'externalip':devices[_0x30fc74]['ip'],'publicKey':secure[_0x5214ab(0x207)],'validInstallation':validInstallation}),setTokenRefresh(_0x30fc74)):clearTimeout(devices[_0x30fc74][_0x5214ab(0x267)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1ab7ba){const _0x52221a=_0x5af4a7,_0x2278e0=getClient(_0x1ab7ba['id'])[_0x52221a(0x163)];_0x1ab7ba[_0x52221a(0x1de)]('bots',config),_0x1ab7ba[_0x52221a(0x1de)]('settings',cleanSettings()),_0x1ab7ba['on'](_0x52221a(0x1bc),_0x2c6e73=>{const _0x2623ca=_0x52221a;if(validateAccess(_0x2c6e73,_0x2278e0)['allow'])addBot();else logger[_0x2623ca(0x2ae)](_0x2623ca(0x1fa));}),_0x1ab7ba['on'](_0x52221a(0x125),(_0x46b192,_0x3954f5)=>{const _0x1d54c5=_0x52221a;if(validateAccess(_0x3954f5,_0x2278e0)[_0x1d54c5(0x203)])toggleBot(_0x46b192[_0x1d54c5(0x1e4)],_0x46b192[_0x1d54c5(0x180)],_0x46b192[_0x1d54c5(0x1e1)]);else logger[_0x1d54c5(0x2ae)](_0x1d54c5(0x1b2));}),_0x1ab7ba['on'](_0x52221a(0x1eb),(_0x489f99,_0x3d48fd)=>{const _0x7c5236=_0x52221a;if(validateAccess(_0x3d48fd,_0x2278e0)[_0x7c5236(0x203)])toggleBotMode(_0x489f99);else logger['full'](_0x7c5236(0x1b2));}),_0x1ab7ba['on'](_0x52221a(0x22f),(_0x470944,_0x54e635)=>{const _0x529fac=_0x52221a;if(validateAccess(_0x54e635,_0x2278e0)['allow'])deleteBot(_0x470944);else logger['full'](_0x529fac(0x27f));}),_0x1ab7ba['on'](_0x52221a(0x173),(_0xcfcb91,_0x25e07e)=>{const _0x505f01=_0x52221a;if(validateAccess(_0x25e07e,_0x2278e0)[_0x505f01(0x203)])storeSettings(_0xcfcb91,!![]);else logger[_0x505f01(0x2ae)](_0x505f01(0x156));}),_0x1ab7ba['on'](_0x52221a(0x1bf),_0x52e4bf=>{const _0x2ac281=_0x52221a;if(validateAccess(_0x52e4bf,_0x2278e0)['allow'])updateBB();else logger[_0x2ac281(0x2ae)](_0x2ac281(0x2a1));}),_0x1ab7ba['on']('get-messages',_0x19beb6=>{const _0x1aff3e=_0x52221a;if(validateAccess(_0x19beb6,_0x2278e0)[_0x1aff3e(0x203)])getMessages();else logger[_0x1aff3e(0x2ae)](_0x1aff3e(0x213));}),_0x1ab7ba['on'](_0x52221a(0x1cf),(_0x146b8b,_0x442946)=>{const _0x52a0ce=_0x52221a;if(validateAccess(_0x442946,_0x2278e0)['allow'])confirmMessage(_0x146b8b);else logger['full'](_0x52a0ce(0x231));}),_0x1ab7ba['on'](_0x52221a(0x25c),_0x554b92=>{const _0x5dd099=_0x52221a;if(validateAccess(_0x554b92,_0x2278e0)[_0x5dd099(0x203)]){if(devices[_0x2278e0][_0x5dd099(0x267)])clearTimeout(devices[_0x2278e0][_0x5dd099(0x267)]);if(devices[_0x2278e0][_0x5dd099(0x1ff)])clearTimeout(devices[_0x2278e0][_0x5dd099(0x1ff)]);removeSocketListeners(getClient(_0x1ab7ba['id'])['uuid']),addBlacklist(_0x2278e0),devices[_0x2278e0][_0x5dd099(0x159)]=null,devices[_0x2278e0][_0x5dd099(0x14e)]=null,devices[_0x2278e0][_0x5dd099(0x154)][_0x5dd099(0x29d)]=null,io['to'](getClient(_0x1ab7ba['id'])[_0x5dd099(0x163)])[_0x5dd099(0x1de)]('status',{'access':{'allow':![],'reason':_0x5dd099(0x1e5),'token':null}});}else logger[_0x5dd099(0x2ae)](_0x5dd099(0x123));});}function initializeSocketBot(_0x70e57){const _0x359cf3=_0x5af4a7,_0x480932=getClient(_0x70e57['id'])['bot'],_0x5d9c49=getClient(_0x70e57['id'])[_0x359cf3(0x163)];_0x70e57['on'](_0x359cf3(0x1ae),(_0x564bde,_0x251922)=>{const _0x4a0060=_0x359cf3;if(validateAccess(_0x251922,_0x5d9c49)[_0x4a0060(0x203)]){if(pid[_0x480932])pid[_0x480932][_0x4a0060(0x17c)]({'function':_0x4a0060(0x130),'args':_0x564bde});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x70e57['on']('delete-alerts',(_0x1710b6,_0x35d264)=>{const _0x421a56=_0x359cf3;if(validateAccess(_0x35d264,_0x5d9c49)[_0x421a56(0x203)]){if(pid[_0x480932])pid[_0x480932][_0x421a56(0x17c)]({'function':_0x421a56(0x29f),'args':_0x1710b6});}else logger['full'](_0x421a56(0x12a));}),_0x70e57['on'](_0x359cf3(0x288),(_0x7b8d4e,_0x1b2b5a)=>{const _0x239957=_0x359cf3;if(validateAccess(_0x1b2b5a,_0x5d9c49)[_0x239957(0x203)]){if(pid[_0x480932])pid[_0x480932]['send']({'function':_0x239957(0x259),'args':_0x7b8d4e});}else logger[_0x239957(0x2ae)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x70e57['on']('store-configuration',(_0x59466c,_0x4e6827)=>{const _0x2ad351=_0x359cf3;if(validateAccess(_0x4e6827,_0x5d9c49)['allow']){if(pid[_0x480932])pid[_0x480932][_0x2ad351(0x17c)]({'function':_0x2ad351(0x12b),'args':_0x59466c});}else logger['full'](_0x2ad351(0x277));}),_0x70e57['on'](_0x359cf3(0x13d),(_0x5e3551,_0x4cba77)=>{const _0x361059=_0x359cf3;if(validateAccess(_0x4cba77,_0x5d9c49)[_0x361059(0x203)]){if(pid[_0x480932])pid[_0x480932][_0x361059(0x17c)]({'function':_0x361059(0x25a),'args':_0x5e3551});}else logger['full'](_0x361059(0x1e2));}),_0x70e57['on'](_0x359cf3(0x133),_0x2bd047=>{const _0x16c70c=_0x359cf3;if(validateAccess(_0x2bd047,_0x5d9c49)[_0x16c70c(0x203)]){if(pid[_0x480932])pid[_0x480932][_0x16c70c(0x17c)]({'function':_0x16c70c(0x287),'args':null});}else logger[_0x16c70c(0x2ae)](_0x16c70c(0x201));}),_0x70e57['on'](_0x359cf3(0x186),(_0x705f73,_0x28318f)=>{const _0x511a80=_0x359cf3;if(validateAccess(_0x28318f,_0x5d9c49)[_0x511a80(0x203)]){if(pid[_0x480932])pid[_0x480932][_0x511a80(0x17c)]({'function':'placeOrder','args':_0x705f73});}else logger[_0x511a80(0x2ae)](_0x511a80(0x1f1));}),_0x70e57['on'](_0x359cf3(0x21b),_0x23abec=>{const _0x1644ca=_0x359cf3;if(validateAccess(_0x23abec,_0x5d9c49)['allow']){if(pid[_0x480932])pid[_0x480932][_0x1644ca(0x17c)]({'function':_0x1644ca(0x21e),'args':null});}else logger['full'](_0x1644ca(0x261));}),_0x70e57['on'](_0x359cf3(0x1bf),_0x4e9266=>{const _0x16693d=_0x359cf3;if(validateAccess(_0x4e9266,_0x5d9c49)[_0x16693d(0x203)])updateBB();else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x70e57['on'](_0x359cf3(0x28e),_0x2da32d=>{const _0x583c2b=_0x359cf3;if(validateAccess(_0x2da32d,_0x5d9c49)[_0x583c2b(0x203)])getMessages();else logger[_0x583c2b(0x2ae)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x70e57['on'](_0x359cf3(0x1cf),(_0x5513fd,_0x227b69)=>{const _0x372aa0=_0x359cf3;if(validateAccess(_0x227b69,_0x5d9c49)[_0x372aa0(0x203)])confirmMessage(_0x5513fd);else logger[_0x372aa0(0x2ae)](_0x372aa0(0x231));}),_0x70e57['on']('logout',_0x28e72f=>{const _0x5ab1ed=_0x359cf3;if(validateAccess(_0x28e72f,_0x5d9c49)[_0x5ab1ed(0x203)]){if(devices[_0x5d9c49][_0x5ab1ed(0x267)])clearTimeout(devices[_0x5d9c49][_0x5ab1ed(0x267)]);if(devices[_0x5d9c49][_0x5ab1ed(0x1ff)])clearTimeout(devices[_0x5d9c49][_0x5ab1ed(0x1ff)]);removeSocketListeners(getClient(_0x70e57['id'])['uuid']),addBlacklist(_0x5d9c49),devices[_0x5d9c49]['telegramIpApproval']=null,devices[_0x5d9c49][_0x5ab1ed(0x14e)]=null,devices[_0x5d9c49][_0x5ab1ed(0x154)][_0x5ab1ed(0x29d)]=null,io['to'](getClient(_0x70e57['id'])[_0x5ab1ed(0x163)])[_0x5ab1ed(0x1de)](_0x5ab1ed(0x180),{'access':{'allow':![],'reason':_0x5ab1ed(0x1e5),'token':null}});}else logger[_0x5ab1ed(0x2ae)](_0x5ab1ed(0x123));});}function removeSocketListeners(_0x5b7e87){const _0x23a76d=_0x5af4a7;getClientsWithUuid(_0x5b7e87)[_0x23a76d(0x22d)](_0x27505c=>{const _0x10b76f=_0x23a76d;getSocket(_0x27505c['id'])[_0x10b76f(0x195)]();});}function cleanSettings(){const _0x567d22=_0x5af4a7;let _0x503182=settings;return settings[_0x567d22(0x1ed)]&&settings[_0x567d22(0x1ed)]!=''&&(_0x503182={..._0x503182,'telegramToken':_0x567d22(0x2a9)}),settings[_0x567d22(0x1df)]&&settings[_0x567d22(0x1df)]!=''&&(_0x503182={..._0x503182,'bbPassword':_0x567d22(0x2a9)}),(settings[_0x567d22(0x1df)]&&settings[_0x567d22(0x1df)]==_0x567d22(0x13e)||settings[_0x567d22(0x1ed)]&&settings[_0x567d22(0x1ed)]==_0x567d22(0x13e))&&(_0x503182={..._0x503182,'restored':{'password':settings[_0x567d22(0x1df)]==_0x567d22(0x13e),'telegram':settings[_0x567d22(0x1ed)]==_0x567d22(0x13e)}}),_0x503182;}function updateBB(){const _0x6afb9a=_0x5af4a7;installingUpdate=!![],config[_0x6afb9a(0x22d)](_0x115940=>{const _0x172eb6=_0x6afb9a;restartBot(_0x115940[_0x172eb6(0x1e4)]);}),process[_0x6afb9a(0x17c)]({'update':!![]},_0x8d3811=>{});}function startBot(_0x9423df,_0x508f69,_0x13f38c){const _0xe1bcd0=_0x5af4a7;let _0x9ea9ff=![];const _0x9d95a0=_0x9423df[0x0];_0x508f69={..._0x508f69,'stdio':[_0xe1bcd0(0x196),_0xe1bcd0(0x196),_0xe1bcd0(0x196),'ipc']},pid[_0x9d95a0]=childProcess[_0xe1bcd0(0x1b1)](botfile,_0x9423df,_0x508f69),pid[_0x9d95a0]['on'](_0xe1bcd0(0x15a),_0x47fbce=>{const _0x1b096c=_0xe1bcd0;switch(Object['keys'](_0x47fbce)[0x0]){case _0x1b096c(0x239):updateBotName(_0x9d95a0,_0x47fbce[_0x1b096c(0x239)]);break;case _0x1b096c(0x210):updateBotManager();break;case _0x1b096c(0x180):updateStatus(_0x9d95a0,_0x47fbce[_0x1b096c(0x180)]);break;case _0x1b096c(0x1e1):updateLive(_0x9d95a0,_0x47fbce[_0x1b096c(0x1e1)]);break;case _0x1b096c(0x15d):updateLive(_0x9d95a0,_0x47fbce['started']),io['to'](_0x9d95a0)['emit'](_0x1b096c(0x180),{'access':{'allow':![],'reason':_0x1b096c(0x1ef),'token':null}});break;case _0x1b096c(0x175):_0x47fbce[_0x1b096c(0x175)]=='restart'&&restartBot(_0x9d95a0);_0x47fbce[_0x1b096c(0x175)]==_0x1b096c(0x226)&&toggleBot(_0x9d95a0,_0x1b096c(0x1ce),_0x1b096c(0x245));break;case'telegram':sendTelegram(_0x9d95a0,_0x47fbce[_0x1b096c(0x23c)]);break;case _0x1b096c(0x1e8):sendTelegramMsg(_0x47fbce['telegrammsg']);break;case _0x1b096c(0x229):io['to'](_0x9d95a0)['emit'](_0x47fbce[_0x1b096c(0x229)],_0x47fbce[_0x1b096c(0x265)]);break;}}),pid[_0x9d95a0]['on'](_0xe1bcd0(0x241),function(_0x267401){if(_0x9ea9ff)return;_0x9ea9ff=!![],_0x13f38c(_0x267401);}),pid[_0x9d95a0]['on']('exit',async function(_0x25a009){const _0x28d4b7=_0xe1bcd0;if(installingUpdate)return;if(_0x9ea9ff)return;_0x9ea9ff=!![],_0x13f38c(null);const _0x4f8399=dbConfig[_0x28d4b7(0x28a)]('bots')[_0x28d4b7(0x1bb)]({'botID':_0x9d95a0})[_0x28d4b7(0x15c)]();_0x4f8399&&(_0x4f8399['status']==_0x28d4b7(0x150)||_0x4f8399[_0x28d4b7(0x180)]=='new')&&(await sleep(0x3e8),updateLive(_0x9d95a0,_0x28d4b7(0x245)),logger['full'](_0x28d4b7(0x170)+_0x9d95a0),startBot([_0x9d95a0,userID],{'cwd':bbpath},function(_0xbc4ba4){const _0x3716b2=_0x28d4b7;if(_0xbc4ba4)logger[_0x3716b2(0x2ae)](_0xbc4ba4);}));});}function stopBot(_0x33ca8d){const _0x1b0fb9=_0x5af4a7;getClientsWithBotID(_0x33ca8d)[_0x1b0fb9(0x22d)](_0x18dab0=>{const _0x2e742f=_0x1b0fb9;getSocket(_0x18dab0['id'])[_0x2e742f(0x11d)](!![]),removeClient(_0x18dab0['id']);}),pid[_0x33ca8d]&&(pid[_0x33ca8d]['kill'](),pid[_0x33ca8d]=null);}function restartBot(_0x4dbd48){if(pid[_0x4dbd48])pid[_0x4dbd48]['kill']();}function addBot(){const _0x2f2f1f=_0x5af4a7;let _0x207596;for(let _0x99104f=0x1;_0x99104f<0x3e9;_0x99104f++){_0x207596=_0x99104f['toString']()[_0x2f2f1f(0x299)](0x3,'0');let _0x341e67=config[_0x2f2f1f(0x1bb)](_0x3533be=>_0x3533be['botID']==_0x207596);if(!_0x341e67)break;}if(_0x207596===_0x2f2f1f(0x114)){logger[_0x2f2f1f(0x2ae)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x2f2f1f(0x2ae)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x207596),dbConfig[_0x2f2f1f(0x28a)]('bots')[_0x2f2f1f(0x27e)]({'botID':_0x207596,'botname':_0x2f2f1f(0x19c)+_0x207596,'status':_0x2f2f1f(0x227),'live':''})[_0x2f2f1f(0x293)](),startBot([_0x207596,userID],{'cwd':bbpath},function(_0x48b25b){if(_0x48b25b)logger['full'](_0x48b25b);}),config=getConfiguration(),io['to'](_0x2f2f1f(0x19f))['emit'](_0x2f2f1f(0x225),config);}function deleteBot(_0x17d70d){const _0x57ebee=_0x5af4a7;getClientsWithBotID(_0x17d70d)[_0x57ebee(0x22d)](_0x3128bb=>{const _0x3ee94a=_0x57ebee;getSocket(_0x3128bb['id'])[_0x3ee94a(0x11d)](!![]),removeClient(_0x3128bb['id']);}),dbConfig['get'](_0x57ebee(0x225))[_0x57ebee(0x2a5)]({'botID':_0x17d70d})['write'](),logger[_0x57ebee(0x2ae)](_0x57ebee(0x20b)+_0x17d70d),stopBot(_0x17d70d);try{fs[_0x57ebee(0x194)](path[_0x57ebee(0x266)](configpath,_0x57ebee(0x120)+_0x17d70d+_0x57ebee(0x1d5))),fs[_0x57ebee(0x194)](path[_0x57ebee(0x266)](configpath,_0x57ebee(0x120)+_0x17d70d+'-events.json')),fs[_0x57ebee(0x194)](path['join'](configpath,'bot-'+_0x17d70d+'-performance.json')),fs[_0x57ebee(0x194)](path[_0x57ebee(0x266)](configpath,_0x57ebee(0x120)+_0x17d70d+_0x57ebee(0x248)));}catch(_0x15a71a){if(_0x15a71a)logger[_0x57ebee(0x2ae)](_0x57ebee(0x166),_0x15a71a);}config=getConfiguration(),io['to']('botmanager')[_0x57ebee(0x1de)](_0x57ebee(0x225),config);}function toggleBot(_0x3630b9,_0x1d35b8,_0x17a4bf){const _0x37db86=_0x5af4a7;dbConfig[_0x37db86(0x28a)]('bots')[_0x37db86(0x1bb)]({'botID':_0x3630b9})[_0x37db86(0x2b0)]({'status':_0x1d35b8})[_0x37db86(0x2b0)]({'live':_0x17a4bf})[_0x37db86(0x293)]();if(_0x1d35b8==_0x37db86(0x150)||_0x1d35b8==_0x37db86(0x227))logger[_0x37db86(0x2ae)]('enabled\x20Bot\x20'+_0x3630b9),startBot([_0x3630b9,userID],{'cwd':bbpath},function(_0x53eee3){const _0x1ccac6=_0x37db86;if(_0x53eee3)logger[_0x1ccac6(0x2ae)](_0x53eee3);});else(_0x1d35b8==_0x37db86(0x1ce)||_0x1d35b8==_0x37db86(0x1c0))&&(logger[_0x37db86(0x2ae)](_0x37db86(0x1ea)+_0x3630b9),stopBot(_0x3630b9));config=getConfiguration(),io['to'](_0x37db86(0x19f))[_0x37db86(0x1de)]('bots',config);}function toggleStatus(_0x2aecec){const _0x5e5515=_0x5af4a7;let _0x44b8f4=dbConfig[_0x5e5515(0x28a)](_0x5e5515(0x225))[_0x5e5515(0x1bb)]({'botID':_0x2aecec})[_0x5e5515(0x15c)](),_0x15503d;if(_0x44b8f4['status']===_0x5e5515(0x150))_0x15503d=_0x5e5515(0x1ce);else{if(_0x44b8f4[_0x5e5515(0x180)]===_0x5e5515(0x227))_0x15503d=_0x5e5515(0x1c0);else{if(_0x44b8f4['status']===_0x5e5515(0x1c0))_0x15503d='new';else{if(_0x44b8f4[_0x5e5515(0x180)]==='disabled')_0x15503d=_0x5e5515(0x150);}}}return _0x15503d;}function _0x4ad3(){const _0x5ee89e=['bot','whitelist','write','name','apiKey','No\x20authentication\x20token','then','All\x20bots','padStart','Notifications\x20enabled\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','data','token','290939vcvBXG','deleteHistoryAlerts','f2aRequired','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','temporary\x20access\x20not\x20allowed','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','compareSync','remove','\x20>\x20','login\x20required','10RxuwzW','************','2FA\x20login\x20rejected','952uZTOXL','clients','(((.+)+)+)+$','full','format','assign','secure','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','No\x20bots\x20running\x20right\x20now','1000','uuid-random','set','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','server','alias','existsSync','sha256','disconnect','getMonth','version','bot-','Token\x20blacklisted','port','Unauthorized\x20attempt\x20to\x20log\x20out','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','update-bot','decrypt','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','lastmsgtelegram','Server','Unauthorized\x20attempt\x20to\x20delete\x20alerts','storeConfiguration','Ok,\x20will\x20send\x20alert\x20notifications\x20only','loginRequired','RSA-OAEP','defaults','emitHistory','Markdown','HTML','get-starting-balances','stopPolling','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','getTime','headers','generateKeyPairAsync','child_process','secret','warning','createWriteStream','store-headless','***','login\x20not\x20required','-----------------------------------------------------------------------------------','exit','latestversion','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','settings.','sendMessage','event','\x20|\x20','Notifications\x20disabled\x0a','lowdb','conn','timeshift','initclient','number','telegram2FaApproval','log','enabled','7198087JZaZbL','getHours','socket.io','access','headless','Unauthorized\x20attempt\x20to\x20update\x20settings','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','auth','telegramIpApproval','message','catch','value','started','output-000.log','/:bot','orders','Invalid\x20IP\x20address','params','uuid','\x20(2)','remoteAddress','error\x20while\x20deleting\x20config\x20files:\x20','track','type','stringify','verify','/config\x20-\x20notification\x20types\x20to\x20receive\x0a',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','bb-settings.json','isDirectory','path','restarting\x20Bot\x20','util','31384nmlNPU','store-settings','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stop','Password\x20reset\x20rejected','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','logs/','show','match','statSync','send','index.html','jsonwebtoken','.zip','status','telegramEnabled','/update\x20-\x20update\x20Balance\x20Bot\x0a','Notifications\x20disabled','manual','bot.js','place-order','access\x20timeout','http','build','bb-config.json','auto','axios','config/','User\x20has\x20been\x20validated','writeFileSync','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','/:bot/configuration','node-telegram-bot-api','privateKey','unlinkSync','removeAllListeners','inherit','test','randomFillSync','socket','min','/on\x20-\x20start\x20bot(s)\x0a','Bot\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','reject','botmanager','login','Unauthorized\x20attempt\x20to\x20download\x20','/disable\x20-\x20disable\x20notifications\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','answerCallbackQuery','Failed\x20to\x20download\x20','All\x20bots\x20running\x20right\x20now','max','::ffff:127.0.0.1','*$1*','alerts','argv','includes','user','get-logs','/:bot/portfolio','simple','fork','Unauthorized\x20attempt\x20to\x20update\x20bot','reason','hybrid-crypto-js','tkn','2FA\x20login\x20token\x20generated','backup/','yes','zip/','toString','find','add-bot','add','entries','update-bb','new-disabled','getUTCHours','DEFLATE','Allow\x20login\x20from\x20IP\x20address\x20<b>','5\x20min','request','35808bstAcZ','yargs/yargs','10064403GAZZfp','polling_error','/:bot/performance','handshake','mkdirSync','0.0.0','disabled','confirm-message','host','connection','67908cSTEtW','output-003.log','sockets','-config.json','telegramChatId','cloneDeep','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Crypt','</b>\x20?','timestamp','expiry','logs','emit','bbPassword','\x20only\x0a','live','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Login\x20accepted','botID','logged\x20out','node-zip','bbUsername','telegrammsg','/off\x20-\x20stop\x20bot(s)\x0a','disabled\x20Bot\x20','toggle-bot-mode','password','telegramToken','startsWith','reload','binary','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','onText','chat','exec','userid','all','getSeconds','backup','/download/:type','Unauthorized\x20attempt\x20to\x20add\x20bot','/help\x20-\x20show\x20available\x20commands\x0a','Invalid\x20username\x20or\x20IP\x20address','230uqSZAb','once','pidExpireLogin','30\x20min','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Bot\x20Mgr\x20>\x20','allow','kind','sortBy','/:bot/history','publicKey','crypto','build2','\x20to\x20','deleted\x20Bot\x20','constructor','replace','static','api-eu.mixpanel.com','updatebotmanager','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','notification','Unauthorized\x20attempt\x20to\x20get\x20messages','/output-000.log','getDate','filter','readFileSync','lastmsgemitted','toIPv4MappedAddress','temporary\x20access\x20timeout','cancel-loading','removeListener','127.0.0.1','cancelLoading','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','express','Unauthorized\x20login\x20attempt\x20(timeout)','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','8601PCWuHt','bots','kill','new','780KltmQX','function','init','date-fns','\x20mode','forEach','split','delete-bot',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20confirm\x20message','blacklist','telegramUsername','exp','hasOwnProperty','from','sort','Invalid\x20authentication\x20token\x20(2)','botname','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','map','telegram','<b>Telegram\x20Bot\x20Status:</b>\x0a','use','Orders','toggleBotMode','error','listen','hex','temporary\x20token\x20generated','stopped','<b>Balance\x20Bot\x20Status:</b>\x0a','length','-results.json','Notifications\x20enabled','getMinutes','success','settings','toIPv4Address','mode','store','hashSync','randomBytes','NTBA_FIX_319','getFullYear','bb/','16IEjzqZ','/status\x20-\x20show\x20bot(s)\x20status\x0a','bbvNew','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','getPortfolio','storeHeadless','isValid','logout','Access\x20enabled\x20for\x20','apply','output-002.log','search','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','copyFileSync','sign','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','args','join','pidRefreshToken','connected','showname','/restart\x20-\x20restart\x20bot(s)\x0a','Login\x20rejected','parse','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','404\x20Not\x20Found','Alerts','idling\x20bot\x20\x20\x20|\x20Bot\x20','invalid\x20credentials','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','starting\x20bot\x20|\x20Bot\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','SIGTERM','temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20store\x20configuration','Invalid\x20Telegram\x20token','login\x20token\x20generated','readdirSync','/:bot/support','sendFile','username','push','Unauthorized\x20attempt\x20to\x20delete\x20bot','telegramEvents','clientip','3000','::1','sendPortfolioTelegram','callback_query','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','getStartingBalances','get-portfolio','bbvReceive','get','15\x20min','$1_$2_$3','download','get-messages','132gqkTlA','output-001.log'];_0x4ad3=function(){return _0x5ee89e;};return _0x4ad3();}function updateStatus(_0x1a4306,_0x24b336){const _0x1a000a=_0x5af4a7;dbConfig[_0x1a000a(0x28a)](_0x1a000a(0x225))[_0x1a000a(0x1bb)]({'botID':_0x1a4306})[_0x1a000a(0x2b0)]({'status':_0x24b336})['write'](),config=getConfiguration(),io['to'](_0x1a000a(0x19f))[_0x1a000a(0x1de)](_0x1a000a(0x225),config);}function updateLive(_0x5e4c43,_0x2f1ced){const _0x10a51d=_0x5af4a7;dbConfig[_0x10a51d(0x28a)](_0x10a51d(0x225))[_0x10a51d(0x1bb)]({'botID':_0x5e4c43})['assign']({'live':_0x2f1ced})[_0x10a51d(0x293)](),config=getConfiguration(),io['to'](_0x10a51d(0x19f))[_0x10a51d(0x1de)](_0x10a51d(0x225),config);}function updateBotName(_0x47345e,_0x19f0b7){const _0xc0011d=_0x5af4a7;dbConfig[_0xc0011d(0x28a)](_0xc0011d(0x225))[_0xc0011d(0x1bb)]({'botID':_0x47345e})[_0xc0011d(0x2b0)]({'botname':_0x19f0b7})[_0xc0011d(0x293)](),config=getConfiguration(),io['to'](_0xc0011d(0x19f))[_0xc0011d(0x1de)](_0xc0011d(0x225),config);}function updateBotManager(){const _0x5898d8=_0x5af4a7;config=getConfiguration(),io['to'](_0x5898d8(0x19f))[_0x5898d8(0x1de)](_0x5898d8(0x225),config);}function toggleBotMode(_0x2583cb){const _0x1d9776=_0x5af4a7;if(pid[_0x2583cb])pid[_0x2583cb][_0x1d9776(0x17c)]({'function':_0x1d9776(0x240),'args':null});else{const _0xcd5df0=configpath+_0x1d9776(0x120)+_0x2583cb+_0x1d9776(0x1d5),_0x11c135=fs['readFileSync'](_0xcd5df0),_0x29797c=JSON[_0x1d9776(0x26c)](_0x11c135),_0x57165c=_0x29797c[_0x1d9776(0x291)][0x0][_0x1d9776(0x155)];_0x29797c[_0x1d9776(0x291)][0x0][_0x1d9776(0x155)]=!_0x57165c;const _0x2ff902=JSON['stringify'](_0x29797c,null,0x2);fs[_0x1d9776(0x18f)](_0xcd5df0,_0x2ff902),config=getConfiguration(),io['to'](_0x1d9776(0x19f))['emit'](_0x1d9776(0x225),config);}}function telegramError(_0x58be30){const _0x3e4f75=_0x5af4a7;logger[_0x3e4f75(0x1b0)](getTimeStamp()+_0x3e4f75(0x16c));}function validateTelegram(_0x2eb4ff){const _0x4d6c9e=_0x5af4a7;if(_0x2eb4ff[_0x4d6c9e(0x236)]['username']!=settings[_0x4d6c9e(0x233)]&&'@'+_0x2eb4ff[_0x4d6c9e(0x236)][_0x4d6c9e(0x27d)]!=settings['telegramUsername'])return tgBot[_0x4d6c9e(0x145)](_0x2eb4ff[_0x4d6c9e(0x1f3)]['id'],_0x4d6c9e(0x143),{'parse_mode':_0x4d6c9e(0x132)})['catch'](_0x49d944=>{telegramError(_0x49d944);}),![];return!![];}async function initTelegram(){const _0x5baa98=_0x5af4a7;if(tgBot)tgBot[_0x5baa98(0x134)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5baa98(0x1ed)],{'polling':!![]});let _0x1151bd=_0x5baa98(0x29b);_0x1151bd+='\x0a',_0x1151bd+='/enable\x20-\x20enable\x20notifications\x0a',_0x1151bd+=_0x5baa98(0x1a2),_0x1151bd+=_0x5baa98(0x16b),_0x1151bd+=_0x5baa98(0x26a),_0x1151bd+=_0x5baa98(0x19b),_0x1151bd+=_0x5baa98(0x1e9),_0x1151bd+=_0x5baa98(0x127),_0x1151bd+='/names\x20-\x20show\x20bot\x20names\x0a',_0x1151bd+=_0x5baa98(0x256),_0x1151bd+=_0x5baa98(0x1d8),_0x1151bd+=_0x5baa98(0x182),_0x1151bd+=_0x5baa98(0x1fb);let _0x1b31c4=_0x5baa98(0x117);_0x1b31c4+='\x0a',_0x1b31c4+=_0x1151bd,tgBot[_0x5baa98(0x1f2)](/\/start/,_0x28a02e=>{const _0x4bd619=_0x5baa98;if(!validateTelegram(_0x28a02e))return;if(settings[_0x4bd619(0x1d6)]!=_0x28a02e[_0x4bd619(0x1f3)]['id'])updateSetting(_0x4bd619(0x1d6),_0x28a02e[_0x4bd619(0x1f3)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4bd619(0x145)](_0x28a02e[_0x4bd619(0x1f3)]['id'],_0x1b31c4)['catch'](_0x19ec5c=>{telegramError(_0x19ec5c);});}),tgBot[_0x5baa98(0x1f2)](/\/enable/,_0x617fb9=>{const _0x12c4b9=_0x5baa98;if(!validateTelegram(_0x617fb9))return;if(settings[_0x12c4b9(0x1d6)]!=_0x617fb9[_0x12c4b9(0x1f3)]['id'])updateSetting(_0x12c4b9(0x1d6),_0x617fb9[_0x12c4b9(0x1f3)]['id']);updateSetting(_0x12c4b9(0x181),!![]),tgBot[_0x12c4b9(0x145)](_0x617fb9[_0x12c4b9(0x1f3)]['id'],_0x12c4b9(0x249))['catch'](_0x5b8c7c=>{telegramError(_0x5b8c7c);});}),tgBot[_0x5baa98(0x1f2)](/\/config/,async _0x54eb34=>{const _0x46a019=_0x5baa98;if(!validateTelegram(_0x54eb34))return;tgBot['removeListener'](_0x46a019(0x285)),tgBot['sendMessage'](_0x54eb34[_0x46a019(0x1f3)]['id'],_0x46a019(0x264),{'reply_markup':{'inline_keyboard':[[{'text':_0x46a019(0x23f),'callback_data':_0x46a019(0x160)},{'text':_0x46a019(0x26f),'callback_data':'alerts'},{'text':'All','callback_data':_0x46a019(0x1f6)}]]}})[_0x46a019(0x15b)](_0x15f2e5=>{telegramError(_0x15f2e5);}),tgBot['on']('callback_query',async _0x47311e=>{const _0x48f044=_0x46a019,_0x5cb3af=_0x47311e[_0x48f044(0x29c)],_0x4a6c74=_0x47311e[_0x48f044(0x15a)];tgBot[_0x48f044(0x1a4)](_0x47311e['id'])['then'](async()=>{const _0x1a8ea4=_0x48f044;_0x5cb3af==_0x1a8ea4(0x160)&&(updateSetting(_0x1a8ea4(0x280),_0x1a8ea4(0x160)),updateSetting(_0x1a8ea4(0x181),!![]),await tgBot['sendMessage'](_0x4a6c74['chat']['id'],_0x1a8ea4(0x274))['catch'](_0x1d4e0a=>{telegramError(_0x1d4e0a);}));_0x5cb3af==_0x1a8ea4(0x1aa)&&(updateSetting(_0x1a8ea4(0x280),_0x1a8ea4(0x1aa)),updateSetting(_0x1a8ea4(0x181),!![]),await tgBot[_0x1a8ea4(0x145)](_0x4a6c74[_0x1a8ea4(0x1f3)]['id'],_0x1a8ea4(0x12c))[_0x1a8ea4(0x15b)](_0x4a5b89=>{telegramError(_0x4a5b89);}));_0x5cb3af==_0x1a8ea4(0x1f6)&&(updateSetting(_0x1a8ea4(0x280),_0x1a8ea4(0x1f6)),updateSetting(_0x1a8ea4(0x181),!![]),await tgBot[_0x1a8ea4(0x145)](_0x4a6c74[_0x1a8ea4(0x1f3)]['id'],_0x1a8ea4(0x1a3))[_0x1a8ea4(0x15b)](_0x28a265=>{telegramError(_0x28a265);}));if(!settings[_0x1a8ea4(0x1d6)])tgBot[_0x1a8ea4(0x145)](_0x4a6c74[_0x1a8ea4(0x1f3)]['id'],_0x1a8ea4(0x2b2))['catch'](_0xe0bd6a=>{telegramError(_0xe0bd6a);});}),tgBot[_0x48f044(0x21c)](_0x48f044(0x285));});}),tgBot['onText'](/\/status/,_0x344f7b=>{const _0x49542c=_0x5baa98;if(!validateTelegram(_0x344f7b))return;const _0x5595de=getBotsWithMode();let _0x47ea4c=_0x49542c(0x246);config['forEach'](_0x1662bc=>{const _0x59f4aa=_0x49542c,_0xebf468=_0x5595de[_0x59f4aa(0x1bb)](_0xa6c202=>_0xa6c202['botID']==_0x1662bc['botID'])[_0x59f4aa(0x24e)];_0x47ea4c+='Bot\x20'+_0x1662bc['botID']+':\x20'+_0x1662bc[_0x59f4aa(0x180)]+'\x20|\x20'+_0xebf468+_0x59f4aa(0x147)+_0x1662bc['live']+'\x0a';}),_0x47ea4c+='\x0a',_0x47ea4c+=_0x49542c(0x23d),_0x47ea4c+=!settings[_0x49542c(0x181)]?_0x49542c(0x148):_0x49542c(0x29a),_0x47ea4c+=settings[_0x49542c(0x181)]?settings['telegramEvents']==_0x49542c(0x1f6)?_0x49542c(0x157):'Notifications\x20types:\x20'+settings[_0x49542c(0x280)]+_0x49542c(0x1e0):'',tgBot['sendMessage'](_0x344f7b[_0x49542c(0x1f3)]['id'],_0x47ea4c,{'parse_mode':_0x49542c(0x132)})[_0x49542c(0x15b)](_0x313e50=>{telegramError(_0x313e50);});}),tgBot['onText'](/\/restart/,_0x2488c7=>{const _0x48efd3=_0x5baa98;if(!validateTelegram(_0x2488c7))return;tgBot['removeListener']('callback_query');const _0x92d44b=getEnabledBots();if(_0x92d44b[_0x48efd3(0x247)]==0x0)tgBot[_0x48efd3(0x145)](_0x2488c7['chat']['id'],_0x48efd3(0x2b3))['catch'](_0x249b67=>{telegramError(_0x249b67);});else{if(_0x92d44b['length']>0x1)_0x92d44b['push']({'botID':_0x48efd3(0x1f6)});let _0x2122f6=[],_0x37599f=[];const _0xb62fad=_0x92d44b[_0x48efd3(0x247)]%0x4==0x0||_0x92d44b[_0x48efd3(0x247)]%0x4==0x3||_0x92d44b['length']%0x3==0x1?0x4:0x3;let _0xb0414=0x0;_0x92d44b[_0x48efd3(0x22d)]((_0x1d3e2e,_0x2a54f6)=>{const _0x49ba1b=_0x48efd3;if(_0x2a54f6%_0xb62fad==0x0)_0x37599f=[];_0x37599f[_0x49ba1b(0x27e)]({'text':_0x1d3e2e[_0x49ba1b(0x1e4)]==_0x49ba1b(0x1f6)?_0x49ba1b(0x298):'Bot\x20'+_0x1d3e2e[_0x49ba1b(0x1e4)],'callback_data':_0x1d3e2e[_0x49ba1b(0x1e4)]}),_0x2a54f6%_0xb62fad==0x0&&(_0x2122f6[_0xb0414]=_0x37599f,_0xb0414++);}),tgBot[_0x48efd3(0x145)](_0x2488c7[_0x48efd3(0x1f3)]['id'],_0x48efd3(0x2a3),{'reply_markup':{'inline_keyboard':_0x2122f6}})['catch'](_0x213943=>{telegramError(_0x213943);}),tgBot['on']('callback_query',async _0x6a506d=>{const _0x477f87=_0x48efd3,_0x4279a8=_0x6a506d[_0x477f87(0x29c)],_0x6329fc=_0x6a506d[_0x477f87(0x15a)];tgBot['answerCallbackQuery'](_0x6a506d['id'])['then'](async()=>{_0x4279a8=='all'?config['forEach'](_0x12a050=>{const _0x36e412=_0x26eb;restartBot(_0x12a050[_0x36e412(0x1e4)]);}):restartBot(_0x4279a8);}),tgBot[_0x477f87(0x21c)](_0x477f87(0x285));});}}),tgBot[_0x5baa98(0x1f2)](/\/on/,_0x28541e=>{const _0x431251=_0x5baa98;if(!validateTelegram(_0x28541e))return;tgBot[_0x431251(0x21c)](_0x431251(0x285));const _0x396fd0=getDisabledBots();if(_0x396fd0[_0x431251(0x247)]==0x0)tgBot['sendMessage'](_0x28541e[_0x431251(0x1f3)]['id'],_0x431251(0x1a6))[_0x431251(0x15b)](_0x44252a=>{telegramError(_0x44252a);});else{if(_0x396fd0[_0x431251(0x247)]>0x1)_0x396fd0[_0x431251(0x27e)]({'botID':_0x431251(0x1f6)});let _0x460a78=[],_0x84d6f5=[];const _0x397247=_0x396fd0[_0x431251(0x247)]%0x4==0x0||_0x396fd0[_0x431251(0x247)]%0x4==0x3||_0x396fd0[_0x431251(0x247)]%0x3==0x1?0x4:0x3;let _0x20ec8e=0x0;_0x396fd0[_0x431251(0x22d)]((_0x481649,_0x410934)=>{const _0x31332c=_0x431251;if(_0x410934%_0x397247==0x0)_0x84d6f5=[];_0x84d6f5[_0x31332c(0x27e)]({'text':_0x481649[_0x31332c(0x1e4)]=='all'?_0x31332c(0x298):_0x31332c(0x19c)+_0x481649[_0x31332c(0x1e4)],'callback_data':_0x481649[_0x31332c(0x1e4)]}),_0x410934%_0x397247==0x0&&(_0x460a78[_0x20ec8e]=_0x84d6f5,_0x20ec8e++);}),tgBot[_0x431251(0x145)](_0x28541e[_0x431251(0x1f3)]['id'],_0x431251(0x258),{'reply_markup':{'inline_keyboard':_0x460a78}})[_0x431251(0x15b)](_0x3b98dc=>{telegramError(_0x3b98dc);}),tgBot['on']('callback_query',async _0x5e4219=>{const _0x177bad=_0x431251,_0x3c60f8=_0x5e4219[_0x177bad(0x29c)],_0x5b3c77=_0x5e4219[_0x177bad(0x15a)];tgBot[_0x177bad(0x1a4)](_0x5e4219['id'])[_0x177bad(0x297)](async()=>{const _0x229401=_0x177bad;_0x3c60f8==_0x229401(0x1f6)?(tgBot[_0x229401(0x145)](_0x5b3c77[_0x229401(0x1f3)]['id'],_0x229401(0x174))[_0x229401(0x15b)](_0x3ab605=>{telegramError(_0x3ab605);}),_0x396fd0[_0x229401(0x22d)](_0x1b577b=>{const _0x146c03=_0x229401;if(_0x1b577b['botID']!='all')toggleBot(_0x1b577b[_0x146c03(0x1e4)],toggleStatus(_0x1b577b[_0x146c03(0x1e4)]),'stopped');})):(tgBot['sendMessage'](_0x5b3c77[_0x229401(0x1f3)]['id'],_0x229401(0x124)+_0x3c60f8)[_0x229401(0x15b)](_0x3f6c60=>{telegramError(_0x3f6c60);}),toggleBot(_0x3c60f8,toggleStatus(_0x3c60f8),_0x229401(0x245)));}),tgBot['removeListener'](_0x177bad(0x285));});}}),tgBot[_0x5baa98(0x1f2)](/\/off/,_0x1b333d=>{const _0x202aaa=_0x5baa98;if(!validateTelegram(_0x1b333d))return;tgBot[_0x202aaa(0x21c)](_0x202aaa(0x285));const _0xcdfe0d=getEnabledBots();if(_0xcdfe0d[_0x202aaa(0x247)]==0x0)tgBot['sendMessage'](_0x1b333d[_0x202aaa(0x1f3)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2cff44=>{telegramError(_0x2cff44);});else{if(_0xcdfe0d[_0x202aaa(0x247)]>0x1)_0xcdfe0d[_0x202aaa(0x27e)]({'botID':_0x202aaa(0x1f6)});let _0x59a5d1=[],_0x16a314=[];const _0x31481b=_0xcdfe0d[_0x202aaa(0x247)]%0x4==0x0||_0xcdfe0d[_0x202aaa(0x247)]%0x4==0x3||_0xcdfe0d[_0x202aaa(0x247)]%0x3==0x1?0x4:0x3;let _0x2657de=0x0;_0xcdfe0d[_0x202aaa(0x22d)]((_0x559e40,_0x3b656c)=>{const _0x4760ed=_0x202aaa;if(_0x3b656c%_0x31481b==0x0)_0x16a314=[];_0x16a314[_0x4760ed(0x27e)]({'text':_0x559e40[_0x4760ed(0x1e4)]=='all'?'All\x20bots':_0x4760ed(0x19c)+_0x559e40[_0x4760ed(0x1e4)],'callback_data':_0x559e40[_0x4760ed(0x1e4)]}),_0x3b656c%_0x31481b==0x0&&(_0x59a5d1[_0x2657de]=_0x16a314,_0x2657de++);}),tgBot[_0x202aaa(0x145)](_0x1b333d[_0x202aaa(0x1f3)]['id'],_0x202aaa(0x211),{'reply_markup':{'inline_keyboard':_0x59a5d1}})['catch'](_0x270a22=>{telegramError(_0x270a22);}),tgBot['on']('callback_query',async _0x29b20c=>{const _0x154c02=_0x202aaa,_0x520931=_0x29b20c[_0x154c02(0x29c)],_0x5f3edf=_0x29b20c[_0x154c02(0x15a)];tgBot[_0x154c02(0x1a4)](_0x29b20c['id'])[_0x154c02(0x297)](async()=>{const _0x1ad23e=_0x154c02;_0x520931=='all'?(tgBot['sendMessage'](_0x5f3edf[_0x1ad23e(0x1f3)]['id'],_0x1ad23e(0x286))[_0x1ad23e(0x15b)](_0x1298a8=>{telegramError(_0x1298a8);}),_0xcdfe0d[_0x1ad23e(0x22d)](_0x2dff69=>{const _0x3f8437=_0x1ad23e;if(_0x2dff69[_0x3f8437(0x1e4)]!='all')toggleBot(_0x2dff69[_0x3f8437(0x1e4)],toggleStatus(_0x2dff69[_0x3f8437(0x1e4)]),'stopped');})):(tgBot[_0x1ad23e(0x145)](_0x5f3edf[_0x1ad23e(0x1f3)]['id'],_0x1ad23e(0x26d)+_0x520931)[_0x1ad23e(0x15b)](_0x15ef67=>{telegramError(_0x15ef67);}),toggleBot(_0x520931,toggleStatus(_0x520931),_0x1ad23e(0x245)));}),tgBot[_0x154c02(0x21c)](_0x154c02(0x285));});}}),tgBot[_0x5baa98(0x1f2)](/\/portfolio/,_0x503ce4=>{const _0x4a5404=_0x5baa98;if(!validateTelegram(_0x503ce4))return;tgBot[_0x4a5404(0x21c)]('callback_query');const _0x5c1d52=getEnabledBots();if(_0x5c1d52['length']==0x0)tgBot[_0x4a5404(0x145)](_0x503ce4[_0x4a5404(0x1f3)]['id'],_0x4a5404(0x2b3))[_0x4a5404(0x15b)](_0x558ece=>{telegramError(_0x558ece);});else{if(_0x5c1d52[_0x4a5404(0x247)]>0x1){let _0x37a482=[],_0x5c6a4f=[];const _0x1c2791=_0x5c1d52[_0x4a5404(0x247)]%0x4==0x0||_0x5c1d52[_0x4a5404(0x247)]%0x4==0x3||_0x5c1d52[_0x4a5404(0x247)]%0x3==0x1?0x4:0x3;let _0x2066ec=0x0;_0x5c1d52['forEach']((_0x529647,_0x25b126)=>{const _0xab55=_0x4a5404;if(_0x25b126%_0x1c2791==0x0)_0x5c6a4f=[];_0x5c6a4f[_0xab55(0x27e)]({'text':_0xab55(0x19c)+_0x529647[_0xab55(0x1e4)],'callback_data':_0x529647[_0xab55(0x1e4)]}),_0x25b126%_0x1c2791==0x0&&(_0x37a482[_0x2066ec]=_0x5c6a4f,_0x2066ec++);}),tgBot[_0x4a5404(0x145)](_0x503ce4[_0x4a5404(0x1f3)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x37a482}})[_0x4a5404(0x15b)](_0x2ffbad=>{telegramError(_0x2ffbad);}),tgBot['on']('callback_query',async _0x27f8e5=>{const _0x1829ad=_0x4a5404,_0x523363=_0x27f8e5[_0x1829ad(0x29c)],_0x235d90=_0x27f8e5['message'];tgBot[_0x1829ad(0x1a4)](_0x27f8e5['id'])['then'](async()=>{const _0x2bca7c=_0x1829ad;if(pid[_0x523363])pid[_0x523363][_0x2bca7c(0x17c)]({'function':_0x2bca7c(0x284),'args':null});}),tgBot[_0x1829ad(0x21c)](_0x1829ad(0x285));});}else{const _0x5791c3=_0x5c1d52[0x0]['botID'];if(pid[_0x5791c3])pid[_0x5791c3][_0x4a5404(0x17c)]({'function':_0x4a5404(0x284),'args':null});}}}),tgBot[_0x5baa98(0x1f2)](/\/update/,async _0x36eebf=>{const _0x1ec5d5=_0x5baa98;if(!validateTelegram(_0x36eebf))return;tgBot['removeListener'](_0x1ec5d5(0x285)),await getMessages();if(!updateAvailable)tgBot[_0x1ec5d5(0x145)](_0x36eebf[_0x1ec5d5(0x1f3)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x1ec5d5(0x15b)](_0x2e6a0d=>{telegramError(_0x2e6a0d);});else!validInstallation?tgBot[_0x1ec5d5(0x145)](_0x36eebf[_0x1ec5d5(0x1f3)]['id'],_0x1ec5d5(0x118))[_0x1ec5d5(0x15b)](_0xe62d8d=>{telegramError(_0xe62d8d);}):(tgBot['sendMessage'](_0x36eebf[_0x1ec5d5(0x1f3)]['id'],_0x1ec5d5(0x23a),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x1ec5d5(0x1b8)},{'text':'No','callback_data':'no'}]]}})[_0x1ec5d5(0x15b)](_0x175490=>{telegramError(_0x175490);}),tgBot['on']('callback_query',async _0x1d734c=>{const _0x88a1b2=_0x1ec5d5,_0x16673f=_0x1d734c['data'],_0x1f3d69=_0x1d734c[_0x88a1b2(0x15a)];tgBot[_0x88a1b2(0x1a4)](_0x1d734c['id'])[_0x88a1b2(0x297)](async()=>{const _0x5ab73e=_0x88a1b2;_0x16673f==_0x5ab73e(0x1b8)&&(await tgBot[_0x5ab73e(0x145)](_0x1f3d69[_0x5ab73e(0x1f3)]['id'],'Starting\x20Balance\x20Bot\x20update')[_0x5ab73e(0x15b)](_0x184798=>{telegramError(_0x184798);}),updateBB());_0x16673f=='no'&&await tgBot[_0x5ab73e(0x145)](_0x1f3d69[_0x5ab73e(0x1f3)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x5ab73e(0x15b)](_0x14958f=>{telegramError(_0x14958f);});if(!settings['telegramChatId'])tgBot[_0x5ab73e(0x145)](_0x1f3d69[_0x5ab73e(0x1f3)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x5ab73e(0x15b)](_0x1543c5=>{telegramError(_0x1543c5);});}),tgBot[_0x88a1b2(0x21c)](_0x88a1b2(0x285));}));}),tgBot[_0x5baa98(0x1f2)](/\/toggle/,_0x758dae=>{const _0x50f0d2=_0x5baa98;if(!validateTelegram(_0x758dae))return;tgBot[_0x50f0d2(0x21c)](_0x50f0d2(0x285));const _0x1db1ce=getBotsWithMode();if(_0x1db1ce[_0x50f0d2(0x247)]==0x0)tgBot[_0x50f0d2(0x145)](_0x758dae[_0x50f0d2(0x1f3)]['id'],_0x50f0d2(0x2b3))[_0x50f0d2(0x15b)](_0x7eaac9=>{telegramError(_0x7eaac9);});else{let _0x1153e3=[],_0x497617=[];const _0x178ab5=0x2;let _0x41f31c=0x0;_0x1db1ce[_0x50f0d2(0x22d)]((_0x2aff3e,_0xb636f3)=>{const _0x5e3bea=_0x50f0d2;if(_0xb636f3%_0x178ab5==0x0)_0x497617=[];_0x497617['push']({'text':_0x5e3bea(0x19c)+_0x2aff3e['botID']+'\x20('+_0x2aff3e[_0x5e3bea(0x24e)]+')','callback_data':_0x2aff3e[_0x5e3bea(0x1e4)]}),_0xb636f3%_0x178ab5==0x0&&(_0x1153e3[_0x41f31c]=_0x497617,_0x41f31c++);}),tgBot[_0x50f0d2(0x145)](_0x758dae[_0x50f0d2(0x1f3)]['id'],_0x50f0d2(0x272),{'reply_markup':{'inline_keyboard':_0x1153e3}})[_0x50f0d2(0x15b)](_0x542cbd=>{telegramError(_0x542cbd);}),tgBot['on']('callback_query',async _0x3a1398=>{const _0x1d05e0=_0x50f0d2,_0x25a4d3=_0x3a1398[_0x1d05e0(0x29c)],_0x581986=_0x3a1398['message'];tgBot['answerCallbackQuery'](_0x3a1398['id'])[_0x1d05e0(0x297)](async()=>{const _0x19a958=_0x1d05e0,_0xd709d6=_0x1db1ce[_0x19a958(0x1bb)](_0x46b711=>_0x46b711[_0x19a958(0x1e4)]==_0x25a4d3),_0x57cf2a=_0xd709d6['mode']==_0x19a958(0x18b)?_0x19a958(0x184):_0x19a958(0x18b);tgBot[_0x19a958(0x145)](_0x581986[_0x19a958(0x1f3)]['id'],_0x19a958(0x21f)+_0x25a4d3+_0x19a958(0x20a)+_0x57cf2a+_0x19a958(0x22c))['catch'](_0x451437=>{telegramError(_0x451437);}),toggleBotMode(_0x25a4d3);}),tgBot[_0x1d05e0(0x21c)](_0x1d05e0(0x285));});}}),tgBot[_0x5baa98(0x1f2)](/\/names/,_0x420510=>{const _0x2daea8=_0x5baa98;if(!validateTelegram(_0x420510))return;let _0x45e285='';config[_0x2daea8(0x22d)](_0x5cee06=>{const _0x3516e2=_0x2daea8;_0x45e285+='Bot\x20'+_0x5cee06[_0x3516e2(0x1e4)]+':\x20'+_0x5cee06[_0x3516e2(0x239)]+'\x0a';}),tgBot[_0x2daea8(0x145)](_0x420510[_0x2daea8(0x1f3)]['id'],_0x45e285,{'parse_mode':_0x2daea8(0x132)})[_0x2daea8(0x15b)](_0x437778=>{telegramError(_0x437778);});}),tgBot[_0x5baa98(0x1f2)](/\/disable/,_0x156c12=>{const _0x233191=_0x5baa98;if(!validateTelegram(_0x156c12))return;tgBot[_0x233191(0x145)](_0x156c12[_0x233191(0x1f3)]['id'],_0x233191(0x183))[_0x233191(0x15b)](_0x5aaeb3=>{telegramError(_0x5aaeb3);}),updateSetting(_0x233191(0x181),![]);}),tgBot[_0x5baa98(0x1f2)](/\/help/,_0x5d1184=>{const _0x3b1e86=_0x5baa98;if(!validateTelegram(_0x5d1184))return;tgBot['sendMessage'](_0x5d1184[_0x3b1e86(0x1f3)]['id'],_0x1151bd)[_0x3b1e86(0x15b)](_0x4b4824=>{telegramError(_0x4b4824);});}),tgBot['on'](_0x5baa98(0x1c9),_0x4054c6=>{const _0x510868=_0x5baa98;_0x4054c6[_0x510868(0x1ba)]()[_0x510868(0x1ac)](_0x510868(0x26e))&&(logger[_0x510868(0x2ae)](_0x510868(0x278)),tgBot[_0x510868(0x134)](),tgBot=null,io['to']('botmanager')[_0x510868(0x1de)](_0x510868(0x212),'Invalid\x20Telegram\x20token'));}),process[_0x5baa98(0x1fe)]('SIGINT',()=>{const _0x5b3f4b=_0x5baa98;if(tgBot)tgBot[_0x5b3f4b(0x134)]();process['exit'](0x1);}),process[_0x5baa98(0x1fe)](_0x5baa98(0x275),()=>{const _0x51584e=_0x5baa98;if(tgBot)tgBot[_0x51584e(0x134)]();process[_0x51584e(0x141)](0x1);});}}function disableTelegram(){const _0x39b7dc=_0x5af4a7;tgBot&&(tgBot[_0x39b7dc(0x134)](),tgBot=null);}function sendTelegram(_0x229e0d,_0x11fbda){const _0x3c4fe1=_0x5af4a7;if(settings[_0x3c4fe1(0x181)]){if(settings['telegramEvents']==_0x3c4fe1(0x1f6)||(_0x11fbda[_0x3c4fe1(0x168)]==_0x3c4fe1(0x241)||_0x11fbda[_0x3c4fe1(0x168)]==_0x3c4fe1(0x13b)||_0x11fbda[_0x3c4fe1(0x168)]==_0x3c4fe1(0x24b))&&settings['telegramEvents']=='alerts'||_0x11fbda[_0x3c4fe1(0x168)]=='order'&&settings[_0x3c4fe1(0x280)]==_0x3c4fe1(0x160)){if(tgBot&&settings['telegramChatId']){if(_0x11fbda[_0x3c4fe1(0x269)])tgBot[_0x3c4fe1(0x145)](settings[_0x3c4fe1(0x1d6)],_0x11fbda[_0x3c4fe1(0x239)]+_0x3c4fe1(0x2a6)+_0x11fbda['event'])[_0x3c4fe1(0x15b)](_0x2a5c5c=>{telegramError(_0x2a5c5c);});else tgBot[_0x3c4fe1(0x145)](settings[_0x3c4fe1(0x1d6)],_0x3c4fe1(0x19c)+_0x229e0d+_0x3c4fe1(0x2a6)+_0x11fbda[_0x3c4fe1(0x146)])[_0x3c4fe1(0x15b)](_0x34a2a8=>{telegramError(_0x34a2a8);});}}}}async function sendTelegramMsg(_0x1675f8,_0x575bdf=_0x5af4a7(0x132)){const _0x5551c3=_0x5af4a7;return settings[_0x5551c3(0x181)]&&tgBot&&settings[_0x5551c3(0x1d6)]?(await tgBot[_0x5551c3(0x145)](settings['telegramChatId'],_0x1675f8,{'parse_mode':_0x575bdf})[_0x5551c3(0x15b)](_0x204e5f=>{telegramError(_0x204e5f);}),!![]):![];}function getDeviceWithIp(_0x57ece2){const _0x25bbca=_0x5af4a7;return devices[_0x25bbca(0x1bb)](_0x2dcab0=>_0x2dcab0['ip']===_0x57ece2);}function temporaryAccess2FA(_0x21bae8,_0x38f60a){const _0x495c45=_0x5af4a7;let _0xb75794=new Date(),_0x5d1f1f=![];if(lastIpApproval){if(_0xb75794-lastIpApproval<0x1388)_0x5d1f1f=!![];}lastIpApproval=new Date();if(_0x5d1f1f)return;tgBot&&settings[_0x495c45(0x1d6)]&&(tgBot[_0x495c45(0x21c)](_0x495c45(0x285)),tgBot[_0x495c45(0x145)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x38f60a)['show']+_0x495c45(0x1da),{'parse_mode':_0x495c45(0x132),'reply_markup':{'inline_keyboard':[[{'text':_0x495c45(0x1c4),'callback_data':'5'},{'text':_0x495c45(0x28b),'callback_data':'15'},{'text':_0x495c45(0x200),'callback_data':'30'},{'text':_0x495c45(0x19e),'callback_data':_0x495c45(0x19e)}]]}})[_0x495c45(0x15b)](_0x40c924=>{telegramError(_0x40c924);}),tgBot['on'](_0x495c45(0x285),async _0x564106=>{const _0x1e669b=_0x495c45,_0x9d8b32=_0x564106[_0x1e669b(0x29c)],_0x477e8d=_0x564106[_0x1e669b(0x15a)];tgBot[_0x1e669b(0x1a4)](_0x564106['id'])[_0x1e669b(0x297)](async()=>{const _0x318cd5=_0x1e669b;devices[_0x21bae8][_0x318cd5(0x159)]={'clientip':_0x38f60a,'timestamp':new Date()[_0x318cd5(0x136)](),'expiry':_0x9d8b32},_0x9d8b32!=_0x318cd5(0x19e)?(await tgBot['sendMessage'](_0x477e8d['chat']['id'],_0x318cd5(0x25d)+_0x9d8b32+'\x20minutes',{'parse_mode':_0x318cd5(0x132)})[_0x318cd5(0x15b)](_0x2a3fe2=>{telegramError(_0x2a3fe2);}),io['to'](_0x21bae8)['emit']('status',{'access':{'allow':![],'reason':_0x318cd5(0x1ef),'token':null}})):(await tgBot[_0x318cd5(0x145)](_0x477e8d[_0x318cd5(0x1f3)]['id'],'Temporary\x20access\x20rejected')[_0x318cd5(0x15b)](_0x1075b3=>{telegramError(_0x1075b3);}),io['to'](_0x21bae8)[_0x318cd5(0x1de)](_0x318cd5(0x180),{'access':{'allow':![],'reason':_0x318cd5(0x276),'token':null}}));}),tgBot['removeListener'](_0x1e669b(0x285));}));}function loginAccess2FA(_0x526a9e,_0x1b6568){const _0x25c96d=_0x5af4a7;tgBot&&settings[_0x25c96d(0x1d6)]&&(tgBot[_0x25c96d(0x21c)](_0x25c96d(0x285)),tgBot['sendMessage'](settings[_0x25c96d(0x1d6)],_0x25c96d(0x1c3)+normalizeIP(_0x1b6568)[_0x25c96d(0x179)]+_0x25c96d(0x1da),{'parse_mode':_0x25c96d(0x132),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x25c96d(0x19e),'callback_data':_0x25c96d(0x19e)}]]}})['catch'](_0x253852=>{telegramError(_0x253852);}),tgBot['on'](_0x25c96d(0x285),async _0x9f597d=>{const _0x1382a8=_0x25c96d,_0x47ee78=_0x9f597d[_0x1382a8(0x29c)],_0x1bf806=_0x9f597d[_0x1382a8(0x15a)];tgBot[_0x1382a8(0x1a4)](_0x9f597d['id'])[_0x1382a8(0x297)](async()=>{const _0x355b5d=_0x1382a8;devices[_0x526a9e][_0x355b5d(0x14e)]={'clientip':_0x1b6568,'timestamp':new Date()[_0x355b5d(0x136)](),'expiry':_0x47ee78},_0x47ee78!='reject'?(await tgBot[_0x355b5d(0x145)](_0x1bf806['chat']['id'],_0x355b5d(0x1e3),{'parse_mode':'HTML'})[_0x355b5d(0x15b)](_0x118f38=>{telegramError(_0x118f38);}),io['to'](_0x526a9e)['emit'](_0x355b5d(0x180),{'access':{'allow':![],'reason':_0x355b5d(0x1ef),'token':null}})):(await tgBot[_0x355b5d(0x145)](_0x1bf806[_0x355b5d(0x1f3)]['id'],_0x355b5d(0x26b))[_0x355b5d(0x15b)](_0x1b4131=>{telegramError(_0x1b4131);}),io['to'](_0x526a9e)[_0x355b5d(0x1de)]('status',{'access':{'allow':![],'reason':_0x355b5d(0x2aa),'token':null}}));}),tgBot[_0x1382a8(0x21c)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3c1fde=_0x5af4a7;return dbConfig[_0x3c1fde(0x28a)](_0x3c1fde(0x225))[_0x3c1fde(0x205)]('botID')['filter']({'status':_0x3c1fde(0x150)})[_0x3c1fde(0x15c)]()||[];}function _0x26eb(_0x296dd8,_0x2ba873){const _0x5b9522=_0x4ad3();return _0x26eb=function(_0x18ff55,_0x282c9a){_0x18ff55=_0x18ff55-0x114;let _0x4ad3c7=_0x5b9522[_0x18ff55];return _0x4ad3c7;},_0x26eb(_0x296dd8,_0x2ba873);}function getDisabledBots(){const _0x5546a5=_0x5af4a7;return dbConfig[_0x5546a5(0x28a)](_0x5546a5(0x225))[_0x5546a5(0x205)](_0x5546a5(0x1e4))[_0x5546a5(0x216)]({'status':_0x5546a5(0x1ce)})[_0x5546a5(0x15c)]()||[];}function getBotAttributes(_0x140c76){const _0x3a1880=_0x5af4a7;let _0x3794b5={};const _0x3c064c=configpath+'bot-'+_0x140c76+_0x3a1880(0x1d5),_0xcde674=fs['existsSync'](_0x3c064c);if(_0xcde674){const _0x220af4=fs[_0x3a1880(0x217)](_0x3c064c);try{const _0x1a9dbb=JSON[_0x3a1880(0x26c)](_0x220af4),_0x2ed088=_0x1a9dbb?_0x1a9dbb[_0x3a1880(0x291)][0x0]['headless']:![];_0x3794b5['mode']=_0x2ed088?'auto':_0x3a1880(0x184),_0x3794b5[_0x3a1880(0x239)]=_0x1a9dbb?_0x1a9dbb[_0x3a1880(0x291)][0x0][_0x3a1880(0x239)]:_0x3a1880(0x19c)+_0x140c76;}catch(_0x2c415c){_0x3794b5[_0x3a1880(0x24e)]='manual',_0x3794b5[_0x3a1880(0x239)]=_0x3a1880(0x19c)+_0x140c76;}}else _0x3794b5['mode']=_0x3a1880(0x184),_0x3794b5['botname']=_0x3a1880(0x19c)+_0x140c76;return _0x3794b5;}function getBotsWithMode(){const _0x201350=_0x5af4a7,_0x44004b=dbConfig[_0x201350(0x28a)](_0x201350(0x225))['sortBy'](_0x201350(0x1e4))[_0x201350(0x15c)]()||[];return _0x44004b['forEach'](_0xd8b518=>{const _0x530a24=_0x201350;let _0x2c922c=getBotAttributes(_0xd8b518[_0x530a24(0x1e4)]);_0xd8b518[_0x530a24(0x24e)]=_0x2c922c['mode'];}),_0x44004b;}async function initUser(){const _0x24f875=_0x5af4a7;if(!settings[_0x24f875(0x1f5)]){const _0x4933e7=uuidRandom();mixpanel[_0x24f875(0x11a)](_0x4933e7),updateSetting(_0x24f875(0x1f5),_0x4933e7);}}async function initSecure(){const _0x542235=_0x5af4a7;let _0x4ad365=getSecure();if(!_0x4ad365[_0x542235(0x235)](_0x542235(0x13a))){let _0x419103=await generateKeys();_0x4ad365[_0x542235(0x207)]=_0x419103[_0x542235(0x207)],_0x4ad365[_0x542235(0x193)]=_0x419103[_0x542235(0x193)],_0x4ad365['secret']=crypto[_0x542235(0x251)](0x20)[_0x542235(0x1ba)](_0x542235(0x243));;storeSecure(_0x4ad365);}}function getSettings(){const _0x58f105=_0x5af4a7;return dbSettings[_0x58f105(0x28a)](_0x58f105(0x24c))[_0x58f105(0x15c)]()||{};}function getSecure(){const _0x52c824=_0x5af4a7;return dbSecure['get']('secure')[_0x52c824(0x15c)]()||{};}function getBlacklist(){const _0x28d531=_0x5af4a7;return dbSecure['get'](_0x28d531(0x232))[_0x28d531(0x15c)]()||[];}function broadcastToBots(_0x4793ca,_0x32cf6e){const _0x3f06d6=_0x5af4a7;config[_0x3f06d6(0x22d)](_0x366b42=>{const _0xac711a=_0x3f06d6;if(_0x366b42[_0xac711a(0x180)]==_0xac711a(0x150)&&_0x366b42[_0xac711a(0x1e1)]=='running'){if(pid[_0x366b42[_0xac711a(0x1e4)]])pid[_0x366b42[_0xac711a(0x1e4)]][_0xac711a(0x17c)]({[_0x4793ca]:_0x32cf6e});}});}function storeSettings(_0x3d4d98,_0x3bba71=![]){const _0x4d436c=_0x5af4a7;_0x3d4d98={...settings,..._0x3d4d98};if(_0x3bba71&&_0x3d4d98[_0x4d436c(0x1df)]!=_0x4d436c(0x2a9)&&_0x3d4d98[_0x4d436c(0x1df)]!=''){const _0x2020ef=crypt['decrypt'](secure[_0x4d436c(0x193)],_0x3d4d98[_0x4d436c(0x1df)])['message'][_0x4d436c(0x22e)]('@')[0x0],_0x5e63da=bcrypt[_0x4d436c(0x250)](_0x2020ef,saltRounds);_0x3d4d98={..._0x3d4d98,'bbPassword':_0x5e63da};}if(_0x3bba71&&_0x3d4d98[_0x4d436c(0x1ed)]!=_0x4d436c(0x2a9)&&_0x3d4d98[_0x4d436c(0x1ed)]!=''){const _0x1d1f58=crypt[_0x4d436c(0x126)](secure['privateKey'],_0x3d4d98['telegramToken'])['message'][_0x4d436c(0x22e)]('@')[0x0];_0x3d4d98={..._0x3d4d98,'telegramToken':_0x1d1f58};}const _0x526b3b=_0x3d4d98[_0x4d436c(0x1ed)]!=_0x4d436c(0x2a9)&&_0x3d4d98[_0x4d436c(0x1ed)]!=settings['telegramToken']||_0x3d4d98[_0x4d436c(0x233)]!=settings[_0x4d436c(0x233)],_0x2c0726=_0x3d4d98[_0x4d436c(0x1ed)]==''||_0x3d4d98['telegramUsername']=='';if(_0x526b3b)_0x3d4d98['telegramEvents']=_0x4d436c(0x1f6);for(const [_0x9374af,_0x57693d]of Object[_0x4d436c(0x1be)](_0x3d4d98)){if(_0x9374af==_0x4d436c(0x1ed)&&_0x57693d==_0x4d436c(0x2a9)){_0x3d4d98['telegramToken']=settings['telegramToken'];continue;};if(_0x9374af=='bbPassword'&&_0x57693d==_0x4d436c(0x2a9)){_0x3d4d98[_0x4d436c(0x1df)]=settings[_0x4d436c(0x1df)];continue;};dbSettings['set']('settings.'+_0x9374af,_0x57693d)[_0x4d436c(0x293)]();}settings=_0x3d4d98,io['to'](_0x4d436c(0x19f))[_0x4d436c(0x1de)](_0x4d436c(0x24c),cleanSettings()),broadcastToBots(_0x4d436c(0x14b),settings[_0x4d436c(0x14b)]);if(_0x526b3b&&!_0x2c0726)initTelegram();if(_0x526b3b&&_0x2c0726)disableTelegram();getAllClients()[_0x4d436c(0x22d)](_0x1869ae=>{const _0x11760d=_0x4d436c;getSocket(_0x1869ae['id'])['emit'](_0x11760d(0x180),{'access':{'allow':![],'reason':_0x11760d(0x1ef),'token':null}});});}function updateSetting(_0x3bfa06,_0x3a9251){const _0x20d97d=_0x5af4a7;dbSettings[_0x20d97d(0x116)](_0x20d97d(0x144)+_0x3bfa06,_0x3a9251)[_0x20d97d(0x293)](),settings=getSettings(),io['to'](_0x20d97d(0x19f))[_0x20d97d(0x1de)](_0x20d97d(0x24c),cleanSettings());}function storeSecure(_0x2b8f47){const _0x4b7cef=_0x5af4a7;dbSecure[_0x4b7cef(0x28a)](_0x4b7cef(0x2b1))[_0x4b7cef(0x27e)](_0x2b8f47)[_0x4b7cef(0x293)](),secure=_0x2b8f47;}function addBlacklist(_0x5732d3){const _0x43c7cf=_0x5af4a7;cleanBlacklist();let _0x10b5a5;devices[_0x5732d3][_0x43c7cf(0x159)]?_0x10b5a5=Math[_0x43c7cf(0x1a7)](devices[_0x5732d3]['telegramIpApproval']['expiry'],loginExpiry):_0x10b5a5=loginExpiry,dbSecure[_0x43c7cf(0x28a)]('blacklist')[_0x43c7cf(0x27e)]({'expiry':new Date()[_0x43c7cf(0x136)]()+_0x10b5a5*0x3c*0x3e8,'token':devices[_0x5732d3][_0x43c7cf(0x154)][_0x43c7cf(0x29d)]})[_0x43c7cf(0x293)](),blacklist=dbSecure['get'](_0x43c7cf(0x232))['value']();}function cleanBlacklist(){const _0x10f2d3=_0x5af4a7;let _0x5724b5=dbSecure['get'](_0x10f2d3(0x232))[_0x10f2d3(0x1d7)]()[_0x10f2d3(0x15c)](),_0x9ccc70=new Date()[_0x10f2d3(0x136)]();_0x5724b5[_0x10f2d3(0x22d)](_0x32d2b2=>{const _0x16e65c=_0x10f2d3;_0x32d2b2[_0x16e65c(0x1dc)]<_0x9ccc70&&dbSecure[_0x16e65c(0x28a)](_0x16e65c(0x232))[_0x16e65c(0x2a5)]({'expiry':_0x32d2b2['expiry']})[_0x16e65c(0x293)]();});}function initStates(){const _0x2bd118=_0x5af4a7;let _0x2201f4=getConfiguration();_0x2201f4[_0x2bd118(0x22d)](_0x26f859=>{const _0x481cc2=_0x2bd118;_0x26f859[_0x481cc2(0x1e1)]=_0x481cc2(0x245);}),storeConfiguration(_0x2201f4);}function onKeys(){const _0x1f2f34=new RSA();return new Promise(_0x4841e3=>{const _0x527465=_0x26eb;_0x1f2f34[_0x527465(0x138)]()['then'](_0x4abcb8=>{_0x4841e3(_0x4abcb8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3f5541=_0x5af4a7;let _0x9678d9=getSettings(),_0x390704=![];!_0x9678d9[_0x3f5541(0x235)](_0x3f5541(0x128))&&(_0x9678d9['lastmsgtelegram']=0x0,_0x390704=!![]);!_0x9678d9[_0x3f5541(0x235)](_0x3f5541(0x218))&&(_0x9678d9[_0x3f5541(0x218)]=0x0,_0x390704=!![]);!_0x9678d9[_0x3f5541(0x235)](_0x3f5541(0x142))&&(_0x9678d9[_0x3f5541(0x142)]=_0x3f5541(0x1cd),_0x390704=!![]);if(_0x390704)storeSettings(_0x9678d9);}function storeConfiguration(_0x2a774f){const _0x2fe292=_0x5af4a7;dbConfig['get'](_0x2fe292(0x225))[_0x2fe292(0x2a5)]()[_0x2fe292(0x293)](),_0x2a774f[_0x2fe292(0x22d)](_0xd621fe=>{const _0x5d3535=_0x2fe292;delete _0xd621fe[_0x5d3535(0x24e)];}),dbConfig['get'](_0x2fe292(0x225))[_0x2fe292(0x27e)](..._0x2a774f)[_0x2fe292(0x293)](),config=_0x2a774f;}function resetPassword(){const _0x16c4fd=_0x5af4a7;tgBot&&settings[_0x16c4fd(0x1d6)]&&(tgBot[_0x16c4fd(0x21c)](_0x16c4fd(0x285)),tgBot[_0x16c4fd(0x145)](settings[_0x16c4fd(0x1d6)],_0x16c4fd(0x220),{'parse_mode':_0x16c4fd(0x132),'reply_markup':{'inline_keyboard':[[{'text':_0x16c4fd(0x1b8),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0xdb4b34=>{telegramError(_0xdb4b34);}),tgBot['on'](_0x16c4fd(0x285),async _0x1f8079=>{const _0x166bed=_0x16c4fd,_0x4e81aa=_0x1f8079[_0x166bed(0x29c)],_0x264945=_0x1f8079[_0x166bed(0x15a)];tgBot[_0x166bed(0x1a4)](_0x1f8079['id'])[_0x166bed(0x297)](async()=>{const _0x3bc36c=_0x166bed;if(_0x4e81aa!='no'){const _0x49b355=0xf,_0xe57e63=_0x3bc36c(0x19d),_0x548d99=Array[_0x3bc36c(0x236)](crypto[_0x3bc36c(0x198)](new Uint32Array(_0x49b355)))[_0x3bc36c(0x23b)](_0x2058de=>_0xe57e63[_0x2058de%_0xe57e63[_0x3bc36c(0x247)]])[_0x3bc36c(0x266)](''),_0x29ddd4=bcrypt[_0x3bc36c(0x250)](_0x548d99,saltRounds);storeSettings({'bbPassword':_0x29ddd4}),await tgBot['sendMessage'](_0x264945['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x548d99,{'parse_mode':_0x3bc36c(0x132)})[_0x3bc36c(0x15b)](_0x1af42b=>{telegramError(_0x1af42b);});}else await tgBot[_0x3bc36c(0x145)](_0x264945[_0x3bc36c(0x1f3)]['id'],_0x3bc36c(0x176))['catch'](_0x345643=>{telegramError(_0x345643);});}),tgBot['removeListener'](_0x166bed(0x285));}));}function getServerTime(){const _0x2d582c=_0x5af4a7,_0x51beb0=new Date();return _0x51beb0[_0x2d582c(0x253)]()+'/'+(_0x51beb0[_0x2d582c(0x11e)]()+0x1)[_0x2d582c(0x1ba)]()['padStart'](0x2,'0')+'/'+_0x51beb0[_0x2d582c(0x215)]()[_0x2d582c(0x1ba)]()['padStart'](0x2,'0')+'\x20'+_0x51beb0[_0x2d582c(0x152)]()[_0x2d582c(0x1ba)]()[_0x2d582c(0x299)](0x2,'0')+':'+_0x51beb0[_0x2d582c(0x24a)]()[_0x2d582c(0x1ba)]()[_0x2d582c(0x299)](0x2,'0')+':'+_0x51beb0[_0x2d582c(0x1f7)]()[_0x2d582c(0x1ba)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x114627=_0x5af4a7,_0x29a162=shiftedTime();return _0x29a162[_0x114627(0x253)]()+'/'+(_0x29a162[_0x114627(0x11e)]()+0x1)[_0x114627(0x1ba)]()[_0x114627(0x299)](0x2,'0')+'/'+_0x29a162[_0x114627(0x215)]()[_0x114627(0x1ba)]()[_0x114627(0x299)](0x2,'0')+'\x20'+_0x29a162[_0x114627(0x152)]()[_0x114627(0x1ba)]()[_0x114627(0x299)](0x2,'0')+':'+_0x29a162[_0x114627(0x24a)]()[_0x114627(0x1ba)]()[_0x114627(0x299)](0x2,'0')+':'+_0x29a162[_0x114627(0x1f7)]()[_0x114627(0x1ba)]()[_0x114627(0x299)](0x2,'0');}function shiftedTime(){const _0x4b1879=_0x5af4a7,_0x52a38a=new Date();let _0x8344d6=_0x52a38a;if(settings[_0x4b1879(0x14b)]&&settings['timeshift']!==0x0)_0x8344d6=fns[_0x4b1879(0x1bd)](_0x52a38a,{'hours':settings[_0x4b1879(0x14b)]});return _0x8344d6;}function startScheduler(){const _0x1bb61c=_0x5af4a7,_0x834a76=new Date()[_0x1bb61c(0x1c1)](),_0x463eeb=shiftedTime()[_0x1bb61c(0x152)]();_0x463eeb==0x4&&backupConfigFiles();_0x463eeb==0x0&&rotateLogFiles();_0x834a76%0x6==0x0&&triggerAnalytics();_0x834a76%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x44161d=_0x5af4a7;fs[_0x44161d(0x27a)](configpath,{'withFileTypes':!![]})['forEach'](_0x33a551=>{const _0x330c29=_0x44161d;if(!_0x33a551['isDirectory']())fs[_0x330c29(0x262)](configpath+_0x33a551[_0x330c29(0x294)],configbackuppath+_0x33a551[_0x330c29(0x294)]);});}function rotateLogFiles(){const _0x52992d=_0x5af4a7,_0x1c764c=fs[_0x52992d(0x17b)](logspath+_0x52992d(0x15e)),_0x18d137=_0x1c764c['size']/0x400;if(_0x18d137>0x32){let _0x27831b=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x27831b[_0x52992d(0x237)]((_0x77e2e0,_0xcc434b)=>_0x77e2e0[_0x52992d(0x294)]<_0xcc434b[_0x52992d(0x294)]?0x1:_0xcc434b[_0x52992d(0x294)]<_0x77e2e0[_0x52992d(0x294)]?-0x1:0x0),_0x27831b[_0x52992d(0x22d)](_0x28dad3=>{const _0xbbb9fa=_0x52992d;if(_0x28dad3[_0xbbb9fa(0x294)]==_0xbbb9fa(0x25f))fs[_0xbbb9fa(0x262)](logspath+_0x28dad3[_0xbbb9fa(0x294)],logspath+_0xbbb9fa(0x1d3));if(_0x28dad3[_0xbbb9fa(0x294)]==_0xbbb9fa(0x290))fs[_0xbbb9fa(0x262)](logspath+_0x28dad3[_0xbbb9fa(0x294)],logspath+_0xbbb9fa(0x25f));_0x28dad3[_0xbbb9fa(0x294)]==_0xbbb9fa(0x15e)&&(fs[_0xbbb9fa(0x262)](logspath+_0x28dad3[_0xbbb9fa(0x294)],logspath+_0xbbb9fa(0x290)),fs['writeFileSync'](logspath+_0x28dad3[_0xbbb9fa(0x294)],''));});}}async function zipFiles(_0x4c6a69){const _0x396349=_0x5af4a7;let _0x1d35f4;if(_0x4c6a69==_0x396349(0x1dd))_0x1d35f4=logspath;if(_0x4c6a69==_0x396349(0x1f8))_0x1d35f4=configpath;let _0x557400=fs[_0x396349(0x27a)](_0x1d35f4,{'withFileTypes':!![]});const _0x43514d=new require(_0x396349(0x1e6))();_0x557400[_0x396349(0x22d)](_0x434c4c=>{const _0x4813e=_0x396349;if(!_0x434c4c[_0x4813e(0x16e)]()){let _0xa5363e=fs['readFileSync'](_0x1d35f4+_0x434c4c[_0x4813e(0x294)]);const _0x30a8e0=/^bot-[0-9]{3}-config.json$/,_0x4648c8=_0x30a8e0['test'](_0x434c4c[_0x4813e(0x294)]);if(_0x4648c8){const _0x73da9f=JSON[_0x4813e(0x26c)](_0xa5363e);_0x73da9f[_0x4813e(0x291)][0x0][_0x4813e(0x295)]=_0x4813e(0x13e),_0x73da9f['bot'][0x0]['apiSecret']=_0x4813e(0x13e),_0xa5363e=JSON[_0x4813e(0x169)](_0x73da9f,null,0x2);}if(_0x434c4c[_0x4813e(0x294)]=='bb-settings.json'){const _0xa39fe0=JSON[_0x4813e(0x26c)](_0xa5363e);if(_0xa39fe0[_0x4813e(0x24c)]['loginRequired'])_0xa39fe0['settings'][_0x4813e(0x12d)]=![];if(_0xa39fe0[_0x4813e(0x24c)]['bbPassword'])_0xa39fe0[_0x4813e(0x24c)][_0x4813e(0x1df)]=_0x4813e(0x13e);if(_0xa39fe0[_0x4813e(0x24c)]['telegramToken'])_0xa39fe0[_0x4813e(0x24c)][_0x4813e(0x1ed)]=_0x4813e(0x13e);if(_0xa39fe0[_0x4813e(0x24c)][_0x4813e(0x1d6)])_0xa39fe0[_0x4813e(0x24c)][_0x4813e(0x1d6)]='';_0xa5363e=JSON[_0x4813e(0x169)](_0xa39fe0,null,0x2);}if(_0x434c4c[_0x4813e(0x294)]!='bb-secure.json')_0x43514d['file'](_0x434c4c[_0x4813e(0x294)],_0xa5363e);}});const _0x5c9f66=_0x43514d['generate']({'base64':![],'compression':_0x396349(0x1c2)});fs[_0x396349(0x18f)](zippath+(_0x4c6a69+_0x396349(0x17f)),_0x5c9f66,_0x396349(0x1f0));}async function getPublicIp(){const _0x271647=_0x5af4a7;try{const _0x372df9=await axios[_0x271647(0x28a)]('https://api.ipify.org?format=json');publicip=_0x372df9['data']['ip'];}catch(_0x4df24a){}}async function triggerAnalytics(){const _0x1497d9=_0x5af4a7;if(!publicip)await getPublicIp();const _0x1f8391=getBotsWithMode();let _0x3cd1e0=0x0;_0x1f8391[_0x1497d9(0x22d)](_0x948fcf=>{const _0x482349=_0x1497d9;if(_0x948fcf[_0x482349(0x180)]===_0x482349(0x150))_0x3cd1e0++;}),mixpanel[_0x1497d9(0x167)](_0x1497d9(0x129),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x1f8391[_0x1497d9(0x247)],'numbotsenabled':_0x3cd1e0});}async function getMessages(){const _0x264dfd=_0x5af4a7,_0x4d28a6=_0x264dfd(0x223),_0x727a93=new GraphQLClient(_0x4d28a6),_0x5ee1e8={'authorization':_0x264dfd(0x135)},_0x2a2441=serverversion[_0x264dfd(0x22e)]('.'),_0x5c7a7e=_0x2a2441[0x0]+'.'+_0x2a2441[0x1],_0x14e858=Math[_0x264dfd(0x19a)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x355ef1={'last':parseInt(_0x14e858),'bbm':_0x5c7a7e},_0x2b7653=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x58f904;try{_0x58f904=await _0x727a93[_0x264dfd(0x1c5)](_0x2b7653,_0x355ef1,_0x5ee1e8);}catch(_0x5f295b){}if(_0x58f904&&_0x58f904['messages']){let _0x253815=settings[_0x264dfd(0x128)];newMessages=[];for(const _0x3a236f of _0x58f904['messages']){newMessages[_0x264dfd(0x27e)](_0x3a236f);if(_0x3a236f[_0x264dfd(0x257)])updateSetting(_0x264dfd(0x142),_0x3a236f[_0x264dfd(0x257)]);let _0x338c72=_0x3a236f['bbvNew']?serverversion>=_0x3a236f[_0x264dfd(0x257)]:![];if(!_0x338c72&&_0x3a236f['number']>_0x253815){if(_0x3a236f[_0x264dfd(0x289)]==='any'||serverversion[_0x264dfd(0x1ee)](_0x3a236f[_0x264dfd(0x289)])){let _0x596e76=''+_0x3a236f['title']+'\x0a\x0a'+_0x3a236f['message'];const _0x4c0864=await sendTelegramMsg(toTelegramMarkdown(_0x596e76),_0x264dfd(0x131));if(_0x4c0864)_0x253815=_0x3a236f[_0x264dfd(0x14d)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x264dfd(0x128),_0x253815),emitMessages();}}function emitMessages(){const _0x3b2cf1=_0x5af4a7,_0x513b7e=settings[_0x3b2cf1(0x218)];let _0x4bef79=[];newMessages[_0x3b2cf1(0x22d)](_0xba274e=>{const _0x20a2f1=_0x3b2cf1;_0xba274e[_0x20a2f1(0x14d)]>_0x513b7e&&_0x4bef79[_0x20a2f1(0x27e)](_0xba274e);}),_0x4bef79[_0x3b2cf1(0x247)]>0x0&&getAllClients()[_0x3b2cf1(0x22d)](_0x224d92=>{const _0x16f812=_0x3b2cf1;getSocket(_0x224d92['id'])[_0x16f812(0x1de)](_0x16f812(0x15a),_0x4bef79);});}function confirmMessage(_0x57b91c){const _0x23e6ee=_0x5af4a7;updateSetting(_0x23e6ee(0x218),Number(_0x57b91c));}function isNewerVersion(_0x12c7a4,_0x165c68){const _0x526f55=_0x5af4a7,_0x47db01=_0x165c68[_0x526f55(0x22e)]('.'),_0x50a027=_0x12c7a4['split']('.');for(var _0x36b778=0x0;_0x36b778<_0x50a027[_0x526f55(0x247)];_0x36b778++){const _0x21a5f5=~~_0x50a027[_0x36b778],_0x39c9d6=~~_0x47db01[_0x36b778];if(_0x21a5f5>_0x39c9d6)return!![];if(_0x21a5f5<_0x39c9d6)return![];}return![];}function toTelegramMarkdown(_0x100ad7){const _0x50d128=_0x5af4a7,_0x4d587f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3202e6=/\*{2}(.+?)\*{2}/gim;return _0x100ad7=_0x100ad7['replace'](_0x4d587f,_0x50d128(0x28c))[_0x50d128(0x20d)](_0x3202e6,_0x50d128(0x1a9)),_0x100ad7;}async function validateConfigFile(){const _0x4eccde=_0x5af4a7,_0x31dc56=dbConfig['get'](_0x4eccde(0x225))['sortBy'](_0x4eccde(0x1e4))[_0x4eccde(0x15c)]()||[];if(_0x31dc56[_0x4eccde(0x247)]==0x0){let _0x1aa5b8=0x0,_0x578ab7=[];const _0x363865=/^bot-([0-9]{3})-config.json$/,_0x321697=fs[_0x4eccde(0x27a)](configpath);_0x321697[_0x4eccde(0x22d)](_0x1d858d=>{const _0x10e8bb=_0x4eccde,_0x464701=_0x363865[_0x10e8bb(0x1f4)](_0x1d858d);if(_0x464701){const _0x4884bc=_0x464701[0x1];let _0xa8e99b=getBotAttributes(_0x4884bc);_0x578ab7[_0x10e8bb(0x27e)]({'botID':_0x4884bc,'botname':_0xa8e99b[_0x10e8bb(0x239)],'status':'disabled','live':'stopped'}),_0x1aa5b8++;}}),_0x1aa5b8!=0x0&&(dbConfig['get'](_0x4eccde(0x225))[_0x4eccde(0x2b0)](_0x578ab7)[_0x4eccde(0x293)](),config=_0x578ab7,restoredConfigFile=_0x1aa5b8);}}async function restoreConfigNotify(_0x455b71){const _0x386a2a=_0x5af4a7;let _0x21cd1c;if(restoredConfigFile==0x1)_0x21cd1c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x21cd1c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x455b71)io['to'](_0x386a2a(0x19f))['emit'](_0x386a2a(0x212),_0x21cd1c);else{logger[_0x386a2a(0x1b0)]('-----------------------------------------------------------------------------------'),logger[_0x386a2a(0x1b0)](_0x21cd1c),logger[_0x386a2a(0x1b0)](_0x386a2a(0x140)),logger[_0x386a2a(0x1b0)]('');if(tgBot&&settings[_0x386a2a(0x1d6)]&&settings[_0x386a2a(0x280)]!='orders')tgBot[_0x386a2a(0x145)](settings[_0x386a2a(0x1d6)],_0x386a2a(0x202)+_0x21cd1c)[_0x386a2a(0x15b)](_0x2b1555=>{telegramError(_0x2b1555);});}}function validateCredentials(_0x396d1e,_0x5b3a5d){const _0x47798f=_0x5af4a7;if(_0x396d1e[_0x47798f(0x27d)]==settings[_0x47798f(0x1e7)]&&bcrypt[_0x47798f(0x2a4)](_0x396d1e[_0x47798f(0x1ec)],settings[_0x47798f(0x1df)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x3af12c=generateLoginToken(_0x5b3a5d);return{'allow':!![],'reason':_0x47798f(0x279),'token':_0x3af12c};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x61f5a0){const _0x44b27a=_0x5af4a7,_0xef7923=generateLoginToken(_0x61f5a0);return{'allow':!![],'reason':_0x44b27a(0x279),'token':_0xef7923};}function validateAccess(_0x314a09,_0x591968,_0x458bb9){const _0x7bc1ab=_0x5af4a7,_0x33e4c8=_0x458bb9?_0x458bb9:devices[_0x591968]['ip'];let _0x2f24b9;const _0x544488=_0xc7a8a3=>{const _0x302bc6=_0x26eb;if(settings['loginRequired']){if(settings[_0x302bc6(0x2a0)]){if(telegram2FaApproved(_0x591968)){const _0x24cb28=generateLoginToken(_0x591968);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x24cb28};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x2f24b9=validToken(_0xc7a8a3,_0x591968),_0x2f24b9[_0x302bc6(0x235)](_0x302bc6(0x24b))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0xc7a8a3}:{'allow':![],'reason':_0x302bc6(0x2a7),'token':null};}else return{'allow':!![],'reason':_0x302bc6(0x13f),'token':null};};if(settings['whitelistEnabled']){let _0x88cf8e=[...settings[_0x7bc1ab(0x292)],_0x7bc1ab(0x283),_0x7bc1ab(0x1a8),_0x7bc1ab(0x21d)];if(_0x88cf8e[_0x7bc1ab(0x1ac)](_0x33e4c8))return _0x544488(_0x314a09);else{_0x2f24b9=validToken(_0x314a09,_0x591968);if(_0x2f24b9[_0x7bc1ab(0x235)](_0x7bc1ab(0x24b)))return _0x544488(_0x314a09);else{if(telegramIpApproved(_0x591968)){const _0x39f087=generateToken(_0x591968);return _0x2f24b9=_0x544488(_0x314a09),_0x2f24b9[_0x7bc1ab(0x203)]?{'allow':!![],'reason':_0x7bc1ab(0x244),'token':_0x39f087}:_0x2f24b9;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x7bc1ab(0x2a2),'token':null};}}}else return _0x544488(_0x314a09);}function timelyDecrypt(_0x51128c,_0x3f3198=!![]){const _0x564c15=_0x5af4a7;if(_0x51128c)try{const _0x3bfb08=crypt[_0x564c15(0x126)](secure[_0x564c15(0x193)],_0x51128c)['message'],_0x573afc=_0x3bfb08[_0x564c15(0x22e)]('@')[0x0],_0x551370=_0x3bfb08[_0x564c15(0x22e)]('@')[0x1],_0x57f456=new Date()['getTime']();if(_0x3f3198){if(_0x57f456-_0x551370<maxSecretAge*0x3e8)return _0x573afc;else return![];}else return _0x573afc;}catch(_0x5b47c3){return![];}else return![];}const validToken=(_0x414db5,_0x10e9bb)=>{const _0x511629=_0x5af4a7,_0x5c7be7=devices[_0x10e9bb]['ip'];if(!_0x414db5)return{'error':_0x511629(0x296)};for(let _0x4fb201 of blacklist){if(_0x4fb201[_0x511629(0x29d)]==_0x414db5)return{'error':_0x511629(0x121)};}let _0x31d05a;try{_0x31d05a=jwt[_0x511629(0x16a)](_0x414db5,secure[_0x511629(0x13a)]+_0x10e9bb);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x31d05a[_0x511629(0x235)]('clientip')&&!_0x31d05a[_0x511629(0x235)](_0x511629(0x27d))||!_0x31d05a['hasOwnProperty'](_0x511629(0x234)))return{'error':_0x511629(0x238)};if(!_0x31d05a[_0x511629(0x235)](_0x511629(0x27d))&&_0x31d05a['hasOwnProperty'](_0x511629(0x281))){const {clientip:_0x84ce97}=_0x31d05a;return _0x5c7be7==_0x84ce97?{'success':_0x511629(0x18e)}:{'error':_0x511629(0x161)};}else{if(_0x31d05a['hasOwnProperty'](_0x511629(0x27d))&&_0x31d05a[_0x511629(0x235)](_0x511629(0x281))){const {username:_0x5c9f0f,clientip:_0x575f2a}=_0x31d05a;return settings[_0x511629(0x1e7)]==_0x5c9f0f&&_0x5c7be7==_0x575f2a?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x511629(0x1fc)};}}},generateLoginToken=_0x1ab343=>{const _0x4766a3=_0x5af4a7;if(_0x1ab343){const _0x5776b0=devices[_0x1ab343]['ip'];return jwt['sign']({'username':settings[_0x4766a3(0x1e7)],'clientip':_0x5776b0},secure[_0x4766a3(0x13a)]+_0x1ab343,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x258d8a=>{const _0x1b9082=_0x5af4a7;if(_0x258d8a){const _0xd6c6ee=devices[_0x258d8a]['ip'];return jwt[_0x1b9082(0x263)]({'clientip':_0xd6c6ee},secure[_0x1b9082(0x13a)]+_0x258d8a,{'expiresIn':devices[_0x258d8a][_0x1b9082(0x159)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x5e2461=>{const _0x2da998=_0x5af4a7;let _0xfc59b1=![];return devices[_0x5e2461][_0x2da998(0x159)]&&devices[_0x5e2461]['telegramIpApproval'][_0x2da998(0x1dc)]!=_0x2da998(0x19e)&&(_0xfc59b1=devices[_0x5e2461]['telegramIpApproval'][_0x2da998(0x281)]==devices[_0x5e2461]['ip']&&new Date()[_0x2da998(0x136)]()-devices[_0x5e2461][_0x2da998(0x159)][_0x2da998(0x1db)]<devices[_0x5e2461]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0xfc59b1;},telegram2FaApproved=_0x16e2dd=>{const _0x2550b3=_0x5af4a7;let _0x3ba825=![];return devices[_0x16e2dd]['telegram2FaApproval']&&devices[_0x16e2dd][_0x2550b3(0x14e)][_0x2550b3(0x1dc)]!='reject'&&(_0x3ba825=devices[_0x16e2dd][_0x2550b3(0x14e)]['clientip']==devices[_0x16e2dd]['ip']&&new Date()['getTime']()-devices[_0x16e2dd][_0x2550b3(0x14e)][_0x2550b3(0x1db)]<devices[_0x16e2dd][_0x2550b3(0x14e)]['expiry']*0x3c*0x3e8),_0x3ba825;},normalizeIP=_0x2ff27c=>{const _0x44434d=_0x5af4a7;let _0x18ed09=null,_0x2c711a=null;if(ipaddr[_0x44434d(0x25b)](_0x2ff27c)){const _0x326ccb=ipaddr[_0x44434d(0x26c)](_0x2ff27c);_0x326ccb[_0x44434d(0x204)]()==='ipv6'?(_0x326ccb['isIPv4MappedAddress']()&&(_0x18ed09=_0x326ccb[_0x44434d(0x24d)]()[_0x44434d(0x1ba)]()),_0x2c711a=_0x326ccb[_0x44434d(0x1ba)]()):(_0x18ed09=_0x326ccb[_0x44434d(0x1ba)](),_0x2c711a=_0x326ccb[_0x44434d(0x219)]()[_0x44434d(0x1ba)]());}return{'show':_0x18ed09?_0x18ed09:_0x2c711a,'store':_0x2c711a};};function sleep(_0x1a41bc){return new Promise(_0x19f84e=>setTimeout(_0x19f84e,_0x1a41bc));}