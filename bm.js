const _0x47eb73=_0x4b08;(function(_0x1ee7fc,_0x4cd4ea){const _0xe9ffa0=_0x4b08,_0x28d760=_0x1ee7fc();while(!![]){try{const _0x3c1e03=parseInt(_0xe9ffa0(0x181))/0x1*(-parseInt(_0xe9ffa0(0xec))/0x2)+-parseInt(_0xe9ffa0(0x103))/0x3+parseInt(_0xe9ffa0(0x2a9))/0x4+-parseInt(_0xe9ffa0(0x212))/0x5*(-parseInt(_0xe9ffa0(0x15b))/0x6)+-parseInt(_0xe9ffa0(0x15d))/0x7+-parseInt(_0xe9ffa0(0x296))/0x8*(-parseInt(_0xe9ffa0(0x211))/0x9)+-parseInt(_0xe9ffa0(0x25a))/0xa*(-parseInt(_0xe9ffa0(0x1fb))/0xb);if(_0x3c1e03===_0x4cd4ea)break;else _0x28d760['push'](_0x28d760['shift']());}catch(_0x4d7ea0){_0x28d760['push'](_0x28d760['shift']());}}}(_0x15f7,0x8ceb6));const _0x3f5436=function(){let _0x206c59=!![];return function(_0x5b9ce3,_0x4e8511){const _0x213e98=_0x206c59?function(){if(_0x4e8511){const _0xcb83e4=_0x4e8511['apply'](_0x5b9ce3,arguments);return _0x4e8511=null,_0xcb83e4;}}:function(){};return _0x206c59=![],_0x213e98;};}(),_0xa1a595=_0x3f5436(this,function(){const _0x3baa4c=_0x4b08;return _0xa1a595[_0x3baa4c(0x2a4)]()[_0x3baa4c(0x14b)](_0x3baa4c(0x2ae))['toString']()[_0x3baa4c(0xea)](_0xa1a595)[_0x3baa4c(0x14b)](_0x3baa4c(0x2ae));});_0xa1a595();'use strict';process[_0x47eb73(0x21a)][_0x47eb73(0x170)]=0x1;const childProcess=require(_0x47eb73(0x1a9)),fs=require('fs'),fns=require(_0x47eb73(0x226)),low=require(_0x47eb73(0x1d6)),FileSync=require(_0x47eb73(0x1cc)),path=require(_0x47eb73(0x2a3)),crypto=require(_0x47eb73(0xf4)),Crypt=require(_0x47eb73(0x20b))[_0x47eb73(0x219)],RSA=require(_0x47eb73(0x20b))[_0x47eb73(0x117)],bcrypt=require(_0x47eb73(0x1de)),jwt=require(_0x47eb73(0x167)),ipaddr=require(_0x47eb73(0x28c)),argv=require(_0x47eb73(0x241))(process['argv']['slice'](0x2))[_0x47eb73(0x11e)],uuidRandom=require(_0x47eb73(0x21e)),TelegramBot=require(_0x47eb73(0x157)),Mixpanel=require(_0x47eb73(0x2c5)),axios=require(_0x47eb73(0x1d2)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x47eb73(0x22a)),{networkInterfaces}=require('os'),PORT=argv['port']||_0x47eb73(0x1e9),pattern=/^[0-9]{2,4}$/;!pattern[_0x47eb73(0x17e)](PORT)&&(console['log'](_0x47eb73(0x2a6)+PORT+_0x47eb73(0x23f)),process[_0x47eb73(0x160)](0x1));const HOST=argv[_0x47eb73(0x1be)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x47eb73(0x1c3)][_0x47eb73(0x16b)];let bbpath=_0x47eb73(0x2b8),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x47eb73(0x1ef),securefile=_0x47eb73(0x1a3),environment=require('./'+bbpath2+_0x47eb73(0x183))[_0x47eb73(0x116)]||_0x47eb73(0x154),maxBackups=0xa;let validInstallation=!![];!fs[_0x47eb73(0x2c1)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x47eb73(0x173)),configpath=userID?bbpath+_0x47eb73(0x16a)+userID+'/':bbpath+_0x47eb73(0x16a),configbackuppath=configpath+_0x47eb73(0x148),logspath=userID?bbpath+_0x47eb73(0x1c8)+userID+'/':bbpath+_0x47eb73(0x1c8),zippath=userID?bbpath+_0x47eb73(0x195)+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+_0x47eb73(0x149),{'flags':'a'}),temppath=userID?bbpath+_0x47eb73(0x112)+userID+'/':bbpath+_0x47eb73(0x112);!fs[_0x47eb73(0x2c1)](configpath)&&fs[_0x47eb73(0x279)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x47eb73(0x279)](configbackuppath);!fs[_0x47eb73(0x2c1)](logspath)&&fs[_0x47eb73(0x279)](logspath);!fs[_0x47eb73(0x2c1)](zippath)&&fs[_0x47eb73(0x279)](zippath);!fs[_0x47eb73(0x2c1)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x47eb73(0x270)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x47eb73(0x238),'onepagemode':![]}})[_0x47eb73(0x2b4)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x47eb73(0x270)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x47eb73(0x1ff),'rsaStandard':_0x47eb73(0x19e)});const saltRounds=0xa,mixpanel=Mixpanel[_0x47eb73(0x21d)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x47eb73(0x1d8)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x47eb73(0x17c)]&&settings['telegramToken']!=''&&settings[_0x47eb73(0x292)]&&settings[_0x47eb73(0x292)]!='')initTelegram();const parseColor=(_0x25244d,_0xd870ab)=>{const _0x430036=_0x47eb73,_0x8689e2=/#[A-Z]{3}#/g;if(typeof _0x25244d==_0x430036(0x1c0)){!_0xd870ab?_0x25244d=_0x25244d[_0x430036(0x190)](_0x8689e2,''):(_0x25244d=_0x25244d[_0x430036(0x190)](/#BLU#/g,_0x430036(0x139)),_0x25244d=_0x25244d['replace'](/#RED#/g,_0x430036(0x29c)),_0x25244d=_0x25244d[_0x430036(0x190)](/#YEL#/g,_0x430036(0x166)),_0x25244d=_0x25244d[_0x430036(0x190)](/#MAG#/g,_0x430036(0x17d)),_0x25244d=_0x25244d[_0x430036(0x190)](/#CYA#/g,_0x430036(0x196)),_0x25244d=_0x25244d[_0x430036(0x190)](/#RES#/g,_0x430036(0x2b6)));;}return _0x25244d;},logger={'screen':_0x54bd0f=>{console['log'](parseColor(_0x54bd0f,!![]));},'simple':_0xed23c5=>{const _0x23d6e9=_0x47eb73;console[_0x23d6e9(0x15c)](parseColor(_0xed23c5,!![])),loggerfile[_0x23d6e9(0x2b4)](util[_0x23d6e9(0x1b3)](parseColor(_0xed23c5,![]))+'\x0a');},'full':async _0x4ca4b1=>{const _0x345264=_0x47eb73,_0x5c1fa7=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4ca4b1;console[_0x345264(0x15c)](parseColor(_0x5c1fa7,!![])),loggerfile[_0x345264(0x2b4)](util[_0x345264(0x1b3)](parseColor(_0x5c1fa7,![]))+'\x0a');if(tgBot&&settings[_0x345264(0x27f)]&&settings[_0x345264(0x261)]!='orders')await tgBot['sendMessage'](settings[_0x345264(0x27f)],_0x345264(0x290)+parseColor(_0x4ca4b1,![]))['catch'](_0x4b6a5e=>{telegramError(_0x4b6a5e);});},'debug':async(_0x2d6ded,_0x562b76='')=>{const _0x1370eb=_0x47eb73,_0xc5ac37=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x2d6ded;if(debugging)console[_0x1370eb(0x15c)](parseColor(_0xc5ac37,!![]));loggerfile[_0x1370eb(0x2b4)](util['format'](parseColor(_0xc5ac37,![]))+'\x0a');if(_0x562b76){if(debugging)console['log'](_0x562b76);loggerfile[_0x1370eb(0x2b4)](util['format'](_0x562b76)+'\x0a');}}};process['on'](_0x47eb73(0x150),function(_0x26f2df){const _0x2bad66=_0x47eb73;logger[_0x2bad66(0x1d7)](_0x26f2df);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x47eb73(0x168)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x47eb73(0x217)),app=express(),http=require(_0x47eb73(0x1a0))['createServer'](app);app[_0x47eb73(0x152)](fileUpload({'useTempFiles':!![]})),app[_0x47eb73(0x265)](_0x47eb73(0x24b),async(_0x34e1e8,_0x5d3d98)=>{const _0x3e5b16=_0x47eb73,_0x46aad6=_0x34e1e8[_0x3e5b16(0x24c)][_0x3e5b16(0x2c6)],_0x49e122=getClientsWithBotID(_0x3e5b16(0x1c6)),_0x18082e=_0x34e1e8['headers'][_0x3e5b16(0x1a8)],_0x94588d=timelyDecrypt(_0x18082e,![]),_0x5b5ea8=_0x49e122[_0x3e5b16(0x128)](_0x3e4d76=>_0x3e4d76['uuid']==_0x94588d);if(_0x5b5ea8){const _0x9e81c8=normalizeIP(_0x34e1e8[_0x3e5b16(0x12a)][_0x3e5b16(0x2af)])[_0x3e5b16(0x10a)],_0x154365=_0x34e1e8[_0x3e5b16(0x209)]['tkn'];if(validateAccess(_0x154365,_0x94588d,_0x9e81c8)['allow'])_0x46aad6=='backup'&&await backupConfigFiles(),await zipFiles(_0x46aad6),_0x5d3d98[_0x3e5b16(0x162)](zippath+(_0x46aad6+'.zip'),_0x4be59d=>{const _0x3b111c=_0x3e5b16;_0x4be59d&&(logger[_0x3b111c(0x172)](_0x3b111c(0x276)+_0x46aad6),logger[_0x3b111c(0x1d7)](_0x4be59d));});else logger[_0x3e5b16(0x172)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x46aad6+'\x20(1)');}else logger[_0x3e5b16(0x172)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x46aad6+_0x3e5b16(0x228));}),app[_0x47eb73(0xe7)]('/upload-backup',async(_0x59882a,_0x737441)=>{const _0x3af4db=_0x47eb73,_0x382f2a=getClientsWithBotID(_0x3af4db(0x1c6)),_0x555041=_0x59882a[_0x3af4db(0x209)][_0x3af4db(0x1a8)],_0x550f35=timelyDecrypt(_0x555041,![]),_0x269ba9=_0x382f2a[_0x3af4db(0x128)](_0x397afd=>_0x397afd[_0x3af4db(0x1a8)]==_0x550f35);logger[_0x3af4db(0x258)]('Backup\x20file\x20uploaded');if(_0x269ba9){const _0x285657=normalizeIP(_0x59882a[_0x3af4db(0x12a)][_0x3af4db(0x2af)])[_0x3af4db(0x10a)],_0x172c3b=_0x59882a['headers'][_0x3af4db(0x10b)];if(validateAccess(_0x172c3b,_0x550f35,_0x285657)[_0x3af4db(0x12e)]){if(_0x59882a[_0x3af4db(0x282)]){const _0x296fcf=_0x59882a[_0x3af4db(0x282)][_0x3af4db(0x1a6)];await _0x296fcf['mv'](temppath+_0x296fcf['name']),_0x737441['send']({'status':!![],'message':_0x3af4db(0x242)});const _0x57a01b=getBotsWithMode();_0x57a01b[_0x3af4db(0xe2)]>0x0?confirmRestore(temppath,_0x296fcf[_0x3af4db(0x115)]):unzipFile(temppath,_0x296fcf['name']);}}else logger[_0x3af4db(0x172)](_0x3af4db(0x246));}else logger['full'](_0x3af4db(0x21f));}),app[_0x47eb73(0x152)](express[_0x47eb73(0x28d)](path[_0x47eb73(0x1a4)](__dirname,bbpath2,_0x47eb73(0x275)))),app['use'](express[_0x47eb73(0x28d)](path[_0x47eb73(0x1a4)](__dirname,bbpath2,_0x47eb73(0x254)))),app['get']('/',function(_0x3cf9c4,_0x390a6b){const _0x4af199=_0x47eb73;_0x390a6b[_0x4af199(0x143)](path[_0x4af199(0x1a4)](__dirname,bbpath2,_0x4af199(0x275),'index.html'));}),app['get'](_0x47eb73(0x2c3),function(_0x34626,_0x29dfe3){const _0x6abe62=_0x47eb73;_0x29dfe3[_0x6abe62(0x143)](path[_0x6abe62(0x1a4)](__dirname,bbpath2,_0x6abe62(0x254),_0x6abe62(0x186)));}),app[_0x47eb73(0x265)]('/:bot/portfolio',(_0x4a4e56,_0x3ecfca)=>{const _0x233e4c=_0x47eb73;_0x3ecfca['sendFile'](path[_0x233e4c(0x1a4)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x47eb73(0x1a1),(_0x3301c8,_0x3f8a98)=>{const _0x31ddc0=_0x47eb73;_0x3f8a98['sendFile'](path[_0x31ddc0(0x1a4)](__dirname,bbpath2,_0x31ddc0(0x254),_0x31ddc0(0x186)));}),app[_0x47eb73(0x265)](_0x47eb73(0x278),(_0x214087,_0x1e430a)=>{const _0x1580f8=_0x47eb73;_0x1e430a['sendFile'](path['join'](__dirname,bbpath2,'build',_0x1580f8(0x186)));}),app[_0x47eb73(0x265)](_0x47eb73(0x298),(_0x1f6a3e,_0x5d0a81)=>{const _0x32fc1b=_0x47eb73;_0x5d0a81[_0x32fc1b(0x143)](path['join'](__dirname,bbpath2,_0x32fc1b(0x254),_0x32fc1b(0x186)));}),app['get']('/:bot/configuration',(_0x477b97,_0x192171)=>{const _0x38af1f=_0x47eb73;_0x192171[_0x38af1f(0x143)](path[_0x38af1f(0x1a4)](__dirname,bbpath2,_0x38af1f(0x254),'index.html'));}),app[_0x47eb73(0x265)](_0x47eb73(0x164),(_0x36e0ff,_0x15dc85)=>{const _0x5a7720=_0x47eb73;_0x15dc85[_0x5a7720(0x143)](path['join'](__dirname,bbpath2,_0x5a7720(0x254),_0x5a7720(0x186)));});if(HOST)http[_0x47eb73(0x161)](PORT,HOST);else http[_0x47eb73(0x161)](PORT);const io=require(_0x47eb73(0x126))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x16485b=_0x47eb73;let _0x27d484=_0x16485b(0x245);const _0x188f19=networkInterfaces(),_0x4db2d1={};for(const _0x239e23 of Object['keys'](_0x188f19)){for(const _0x504ec2 of _0x188f19[_0x239e23]){if((_0x504ec2[_0x16485b(0x199)]==_0x16485b(0x135)||_0x504ec2['family']==0x4)&&!_0x504ec2[_0x16485b(0x29e)]){const _0x4ea959=ipaddr[_0x16485b(0x187)](_0x504ec2[_0x16485b(0x20a)])[_0x16485b(0x180)]();_0x4ea959!=_0x16485b(0x284)&&(!_0x4db2d1[_0x239e23]&&(_0x4db2d1[_0x239e23]=[]),_0x4db2d1[_0x239e23][_0x16485b(0x100)](_0x504ec2[_0x16485b(0x20a)]),_0x27d484=_0x504ec2[_0x16485b(0x20a)]);}}}return{'serverip':_0x27d484,'netinterfaces':_0x4db2d1};}async function startServer(){const _0x22e673=_0x47eb73,{serverip:_0xc40b9,netinterfaces:_0x3e86fe}=getServerIP();logger[_0x22e673(0x1d7)](''),logger[_0x22e673(0x1d7)](_0x22e673(0x129)),await logger[_0x22e673(0x172)](_0x22e673(0x1e6)+serverversion+_0x22e673(0xfa)+(environment==_0x22e673(0x1c5)?_0x22e673(0x1a5):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x22e673(0x14d))+('=>\x20Go\x20to\x20#CYA#http://'+_0xc40b9+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x22e673(0x1d7)](_0x22e673(0x129));if(config[_0x22e673(0xe2)]!=0x0)for(const _0x35ddfe of config){if(_0x35ddfe[_0x22e673(0x124)]=='enabled'||_0x35ddfe[_0x22e673(0x124)]=='new')await logger['full'](_0x22e673(0x1c7)+_0x35ddfe[_0x22e673(0xe4)]+_0x22e673(0x2b1)+_0x35ddfe[_0x22e673(0x2a2)]),startBot([_0x35ddfe[_0x22e673(0xe4)],userID],{'cwd':bbpath},function(_0xe5471a){if(_0xe5471a)logger['full'](_0xe5471a);});else(_0x35ddfe[_0x22e673(0x124)]==_0x22e673(0x26c)||_0x35ddfe[_0x22e673(0x124)]==_0x22e673(0x24d))&&await logger['full'](_0x22e673(0x280)+_0x35ddfe[_0x22e673(0xe4)]+_0x22e673(0x2b1)+_0x35ddfe[_0x22e673(0x2a2)]);}else!newBot&&logger[_0x22e673(0x1d7)](_0x22e673(0x118));if(newBot)addBot();logger['simple'](_0x22e673(0x129)),logger[_0x22e673(0x1d7)](''),await logger['debug'](_0x22e673(0x12d)+nodeversion),await logger[_0x22e673(0x258)](_0x22e673(0x156),_0x3e86fe);}function startSocket(){const _0x53c53d=_0x47eb73;io['on'](_0x53c53d(0x141),_0x5a49e8=>{const _0x4af4cf=_0x53c53d;let _0x874078,_0x15a91e,_0x53d659,_0x44c024,_0x39c6a7;const _0x4341f1=_0x5a49e8[_0x4af4cf(0x11b)][_0x4af4cf(0x209)][_0x4af4cf(0x204)];_0x15a91e=_0x4341f1[_0x4af4cf(0x1f1)](/bot[0-9]{3}/);if(_0x15a91e)_0x53d659=_0x15a91e[0x0][_0x4af4cf(0x1f1)](/[0-9]{3}/);if(_0x53d659)_0x874078=_0x53d659[0x0];else _0x874078=_0x4af4cf(0x1c6);const _0x321d39=_0x5a49e8[_0x4af4cf(0x11b)][_0x4af4cf(0x13a)]['encryptedUuid'];if(!_0x321d39)_0x5a49e8[_0x4af4cf(0x1e0)](_0x4af4cf(0x124),{'publicKey':secure[_0x4af4cf(0x233)]});else{_0x44c024=timelyDecrypt(_0x321d39,![]);if(!_0x44c024)_0x5a49e8[_0x4af4cf(0x1e0)](_0x4af4cf(0x124),{'publicKey':secure[_0x4af4cf(0x233)]});else{_0x39c6a7=normalizeIP(_0x5a49e8['conn'][_0x4af4cf(0x2af)])[_0x4af4cf(0x10a)];if(!devices[_0x44c024])devices[_0x44c024]={'uuid':_0x44c024,'access':{'token':null}};devices[_0x44c024]['ip']=_0x39c6a7;const _0x5a8ec2=addClient(_0x5a49e8['id'],_0x44c024,_0x874078);setAccess(_0x5a8ec2),emitMessages(),_0x5a49e8['on']('login',_0x464a8c=>{const _0x2b48f1=_0x4af4cf,_0x408535=timelyDecrypt(_0x464a8c[_0x2b48f1(0x178)]);if(_0x408535){_0x464a8c={'username':_0x464a8c[_0x2b48f1(0x113)],'password':_0x408535},devices[_0x44c024][_0x2b48f1(0x1e4)]=validateCredentials(_0x464a8c,_0x44c024);if(devices[_0x44c024][_0x2b48f1(0x1e4)][_0x2b48f1(0x12e)]==![]&&devices[_0x44c024]['access'][_0x2b48f1(0x232)]=='2FA\x20login\x20required')_0x5a49e8[_0x2b48f1(0x1e0)](_0x2b48f1(0x124),{'access':devices[_0x44c024][_0x2b48f1(0x1e4)]}),loginAccess2FA(_0x44c024,_0x39c6a7);else{if(devices[_0x44c024][_0x2b48f1(0x1e4)][_0x2b48f1(0x12e)]==![]&&devices[_0x44c024][_0x2b48f1(0x1e4)][_0x2b48f1(0x232)]=='invalid\x20credentials')_0x5a49e8[_0x2b48f1(0x1e0)](_0x2b48f1(0x124),{'access':devices[_0x44c024][_0x2b48f1(0x1e4)]});else devices[_0x44c024]['access']['allow']&&devices[_0x44c024][_0x2b48f1(0x1e4)][_0x2b48f1(0x232)]==_0x2b48f1(0x111)&&(getClientsWithUuid(_0x44c024)[_0x2b48f1(0x247)](_0x487fbb=>{setAccess(_0x487fbb);}),logger[_0x2b48f1(0x258)](_0x2b48f1(0x144)+_0x44c024['slice'](-0x8)),setTokenRefresh(_0x44c024),setSessionTimeout(_0x2b48f1(0x218),_0x44c024));}}else logger[_0x2b48f1(0x172)](_0x2b48f1(0xff));}),_0x5a49e8['on'](_0x4af4cf(0x205),()=>{resetPassword();}),_0x5a49e8['on'](_0x4af4cf(0x25d),_0x2bd8c0=>{removeClient(_0x5a49e8['id']);}),_0x874078==_0x4af4cf(0x1c6)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x38d83e){const _0x2ae353=_0x47eb73;if(_0x38d83e!=_0x2ae353(0x1c6)&&config['apiKey']!=''){if(pid[_0x38d83e])pid[_0x38d83e]['send']({'function':_0x2ae353(0x17a),'args':null});}_0x38d83e!='botmanager'&&broadcastToBots('bots',JSON['stringify'](config));}function reloadBotManager(){const _0x2a105a=_0x47eb73;getClientsWithBotID(_0x2a105a(0x1c6))[_0x2a105a(0x247)](_0x5977b4=>{const _0x593c22=_0x2a105a;getSocket(_0x5977b4['id'])[_0x593c22(0x1e0)](_0x593c22(0x124),{'access':{'allow':![],'reason':_0x593c22(0x2bb),'token':null}});});}function getSocket(_0xbf0afa){const _0x164c39=_0x47eb73;return io[_0x164c39(0x277)][_0x164c39(0x277)]['get'](_0xbf0afa);}function setAccess(_0x1d755c){const _0x44257a=_0x47eb73,_0x4afff5=getSocket(_0x1d755c['id']),_0x28b659=_0x1d755c[_0x44257a(0x1a8)],_0x1ab7dc=_0x1d755c[_0x44257a(0x1ab)];devices[_0x28b659]['access']=validateAccess(devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x1b0)],_0x28b659),logger['debug'](_0x44257a(0x127)+devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x232)]+'\x20|\x20client:\x20...'+_0x1d755c['id'][_0x44257a(0x171)](-0x8)+_0x44257a(0x1f4)+_0x28b659[_0x44257a(0x171)](-0x8)),_0x4afff5[_0x44257a(0x1a4)](_0x28b659);if(devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x12e)]){_0x4afff5[_0x44257a(0x1a4)](_0x1ab7dc);if(_0x1ab7dc==_0x44257a(0x1c6))initializeSocketBotManager(_0x4afff5);else initializeSocketBot(_0x4afff5);initClient(_0x1ab7dc);}devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x1b0)]&&devices[_0x28b659][_0x44257a(0x1e4)]['reason']==_0x44257a(0x1da)&&setSessionTimeout('2FA',_0x28b659),devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x1b0)]&&devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x232)]==_0x44257a(0x2ab)&&setSessionTimeout('login',_0x28b659),_0x4afff5['emit'](_0x44257a(0x124),{'status':_0x1d755c['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x28b659][_0x44257a(0x1e4)],'externalip':devices[_0x28b659]['ip'],'publicKey':secure[_0x44257a(0x233)],'userid':settings[_0x44257a(0x174)],'validInstallation':validInstallation}),devices[_0x28b659][_0x44257a(0x1e4)]['allow']==![]&&devices[_0x28b659][_0x44257a(0x1e4)][_0x44257a(0x232)]==_0x44257a(0x142)&&temporaryAccess2FA(_0x28b659,devices[_0x28b659]['ip']);}function setSessionTimeout(_0x48fdcf,_0xa0cf7d){const _0x46734f=_0x47eb73;let _0x2b9427;if(_0x48fdcf==_0x46734f(0x218))_0x2b9427=loginExpiry*0x3c*0x3e8;else _0x2b9427=devices[_0xa0cf7d][_0x46734f(0x1ec)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0xa0cf7d]['telegramIpApproval'][_0x46734f(0x1aa)]);if(devices[_0xa0cf7d][_0x46734f(0x1fd)])clearTimeout(devices[_0xa0cf7d][_0x46734f(0x1fd)]);devices[_0xa0cf7d][_0x46734f(0x1fd)]=setTimeout(()=>{const _0x4b3304=_0x46734f;if(devices[_0xa0cf7d][_0x4b3304(0x20e)])clearTimeout(devices[_0xa0cf7d][_0x4b3304(0x20e)]);removeSocketListeners(_0xa0cf7d),addBlacklist(_0xa0cf7d),devices[_0xa0cf7d][_0x4b3304(0x1ec)]=null,devices[_0xa0cf7d]['telegram2FaApproval']=null,devices[_0xa0cf7d][_0x4b3304(0x1e4)]['token']=null,logger['debug'](_0x4b3304(0x193)+_0xa0cf7d['slice'](-0x8)),devices[_0xa0cf7d]['access']=validateAccess(devices[_0xa0cf7d][_0x4b3304(0x1e4)][_0x4b3304(0x1b0)],_0xa0cf7d),!(devices[_0xa0cf7d][_0x4b3304(0x1e4)]['allow']&&devices[_0xa0cf7d]['access']['reason']==_0x4b3304(0xf1))&&(_0x48fdcf==_0x4b3304(0x218)?io['to'](_0xa0cf7d)[_0x4b3304(0x1e0)](_0x4b3304(0x124),{'access':{'allow':![],'reason':_0x4b3304(0x2c0),'token':null}}):io['to'](_0xa0cf7d)[_0x4b3304(0x1e0)]('status',{'access':{'allow':![],'reason':_0x4b3304(0x140),'token':null}})),devices[_0xa0cf7d]['access'][_0x4b3304(0x1b0)]=null;},_0x2b9427);}function setTokenRefresh(_0x28af0c){const _0x1b3dc1=_0x47eb73;if(devices[_0x28af0c][_0x1b3dc1(0x20e)])clearTimeout(devices[_0x28af0c][_0x1b3dc1(0x20e)]);devices[_0x28af0c][_0x1b3dc1(0x20e)]=setTimeout(()=>{const _0x4a743d=_0x1b3dc1;getClientsWithUuid(_0x28af0c)[_0x4a743d(0xe2)]!=0x0?(devices[_0x28af0c][_0x4a743d(0x1e4)]=refreshToken(_0x28af0c),io['to'](_0x28af0c)[_0x4a743d(0x1e0)]('status',{'status':_0x4a743d(0x1fc),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x28af0c][_0x4a743d(0x1e4)],'externalip':devices[_0x28af0c]['ip'],'publicKey':secure[_0x4a743d(0x233)],'validInstallation':validInstallation}),setTokenRefresh(_0x28af0c)):clearTimeout(devices[_0x28af0c][_0x4a743d(0x20e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1fff50){const _0xeb014f=_0x47eb73,_0x211bc6=getClient(_0x1fff50['id'])['uuid'];_0x1fff50[_0xeb014f(0x1e0)](_0xeb014f(0x281),config),_0x1fff50['emit']('settings',cleanSettings()),_0x1fff50['on'](_0xeb014f(0xef),_0x731623=>{const _0x3b8100=_0xeb014f;if(validateAccess(_0x731623,_0x211bc6)['allow'])addBot();else logger[_0x3b8100(0x172)](_0x3b8100(0x1d9));}),_0x1fff50['on'](_0xeb014f(0x14e),(_0x4a3744,_0x52696a)=>{const _0x33fd6f=_0xeb014f;if(validateAccess(_0x52696a,_0x211bc6)[_0x33fd6f(0x12e)])toggleBot(_0x4a3744[_0x33fd6f(0xe4)],_0x4a3744[_0x33fd6f(0x124)],_0x4a3744['live']);else logger[_0x33fd6f(0x172)](_0x33fd6f(0x16d));}),_0x1fff50['on'](_0xeb014f(0x1cb),(_0x34d62b,_0x3d8072)=>{const _0x351fde=_0xeb014f;if(validateAccess(_0x3d8072,_0x211bc6)[_0x351fde(0x12e)])toggleBotMode(_0x34d62b);else logger[_0x351fde(0x172)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1fff50['on']('delete-bot',(_0x16bd47,_0x309298)=>{const _0x40df1f=_0xeb014f;if(validateAccess(_0x309298,_0x211bc6)[_0x40df1f(0x12e)])deleteBot(_0x16bd47);else logger[_0x40df1f(0x172)](_0x40df1f(0x289));}),_0x1fff50['on'](_0xeb014f(0x2b7),(_0x435f5b,_0x125172)=>{const _0x30eb39=_0xeb014f;if(validateAccess(_0x125172,_0x211bc6)[_0x30eb39(0x12e)])storeSettings(_0x435f5b,!![]);else logger[_0x30eb39(0x172)](_0x30eb39(0x16c));}),_0x1fff50['on']('update-bb',_0x48e249=>{const _0x5350ad=_0xeb014f;if(validateAccess(_0x48e249,_0x211bc6)['allow'])updateBB(_0x5350ad(0x294));else logger[_0x5350ad(0x172)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1fff50['on'](_0xeb014f(0x27e),_0xfb5ef4=>{const _0x2a66fe=_0xeb014f;if(validateAccess(_0xfb5ef4,_0x211bc6)[_0x2a66fe(0x12e)])updateBB(_0x2a66fe(0x230));else logger[_0x2a66fe(0x172)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x1fff50['on']('get-backup-files',_0x36cc32=>{const _0x3f7a9a=_0xeb014f;if(validateAccess(_0x36cc32,_0x211bc6)['allow']){const _0x5b078b=getClient(_0x1fff50['id']);if(_0x5b078b)getBackupFiles(_0x5b078b[_0x3f7a9a(0x1a8)]);else logger[_0x3f7a9a(0x172)](_0x3f7a9a(0x2b0));}else logger[_0x3f7a9a(0x172)](_0x3f7a9a(0xe9));}),_0x1fff50['on'](_0xeb014f(0x176),(_0x5ee212,_0x4455a3)=>{const _0x10bcb4=_0xeb014f;if(validateAccess(_0x4455a3,_0x211bc6)[_0x10bcb4(0x12e)])restoreBackupFile(_0x5ee212);else logger[_0x10bcb4(0x172)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x1fff50['on'](_0xeb014f(0x2ad),_0x2c5768=>{const _0x3e73ed=_0xeb014f;if(validateAccess(_0x2c5768,_0x211bc6)[_0x3e73ed(0x12e)])getMessages();else logger[_0x3e73ed(0x172)](_0x3e73ed(0xfe));}),_0x1fff50['on'](_0xeb014f(0x132),(_0x2a02b0,_0x67c8a6)=>{const _0x100b23=_0xeb014f;if(validateAccess(_0x67c8a6,_0x211bc6)[_0x100b23(0x12e)])confirmMessage(_0x2a02b0);else logger['full'](_0x100b23(0x169));}),_0x1fff50['on'](_0xeb014f(0x13f),_0x10343f=>{const _0x324976=_0xeb014f;if(validateAccess(_0x10343f,_0x211bc6)[_0x324976(0x12e)]){if(devices[_0x211bc6][_0x324976(0x20e)])clearTimeout(devices[_0x211bc6][_0x324976(0x20e)]);if(devices[_0x211bc6][_0x324976(0x1fd)])clearTimeout(devices[_0x211bc6]['pidExpireLogin']);removeSocketListeners(getClient(_0x1fff50['id'])[_0x324976(0x1a8)]),addBlacklist(_0x211bc6),devices[_0x211bc6][_0x324976(0x1ec)]=null,devices[_0x211bc6][_0x324976(0x231)]=null,devices[_0x211bc6][_0x324976(0x1e4)][_0x324976(0x1b0)]=null,logger[_0x324976(0x258)](_0x324976(0x251)+_0x211bc6[_0x324976(0x171)](-0x8)),io['to'](getClient(_0x1fff50['id'])[_0x324976(0x1a8)])[_0x324976(0x1e0)]('status',{'access':{'allow':![],'reason':_0x324976(0x223),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x1f340d){const _0x2fca4a=_0x47eb73,_0x11e011=getClient(_0x1f340d['id'])[_0x2fca4a(0x1ab)],_0x56858a=getClient(_0x1f340d['id'])[_0x2fca4a(0x1a8)];_0x1f340d['on']('get-logs',(_0x5ab066,_0x5f2ca1)=>{const _0x1a50c4=_0x2fca4a;if(validateAccess(_0x5f2ca1,_0x56858a)['allow']){if(pid[_0x11e011])pid[_0x11e011][_0x1a50c4(0xf6)]({'function':_0x1a50c4(0x26b),'args':_0x5ab066});}else logger[_0x1a50c4(0x172)](_0x1a50c4(0x221));}),_0x1f340d['on'](_0x2fca4a(0x1ed),(_0x2827ce,_0x3769d4)=>{const _0x10abd1=_0x2fca4a;if(validateAccess(_0x3769d4,_0x56858a)[_0x10abd1(0x12e)]){if(pid[_0x11e011])pid[_0x11e011]['send']({'function':_0x10abd1(0x175),'args':_0x2827ce});}else logger[_0x10abd1(0x172)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x1f340d['on'](_0x2fca4a(0x25f),(_0x1085e3,_0x5fb5dc)=>{const _0x11b514=_0x2fca4a;if(validateAccess(_0x5fb5dc,_0x56858a)['allow']){if(pid[_0x11e011])pid[_0x11e011]['send']({'function':'getPortfolio','args':_0x1085e3});}else logger[_0x11b514(0x172)](_0x11b514(0x19a));}),_0x1f340d['on'](_0x2fca4a(0x2ba),(_0x45adf3,_0x3d89b4)=>{const _0x36c80c=_0x2fca4a;if(validateAccess(_0x3d89b4,_0x56858a)[_0x36c80c(0x12e)]){if(pid[_0x11e011])pid[_0x11e011]['send']({'function':'storeConfiguration','args':_0x45adf3});}else logger['full'](_0x36c80c(0x22f));}),_0x1f340d['on'](_0x2fca4a(0x28a),(_0x5ea9ea,_0x4c2731)=>{const _0x7f8c76=_0x2fca4a;if(validateAccess(_0x4c2731,_0x56858a)[_0x7f8c76(0x12e)]){if(pid[_0x11e011])pid[_0x11e011][_0x7f8c76(0xf6)]({'function':_0x7f8c76(0x2c7),'args':_0x5ea9ea});}else logger[_0x7f8c76(0x172)](_0x7f8c76(0x1b5));}),_0x1f340d['on']('store-fiat',(_0x217919,_0x53c797)=>{const _0x56fbde=_0x2fca4a;if(validateAccess(_0x53c797,_0x56858a)[_0x56fbde(0x12e)]){if(pid[_0x11e011])pid[_0x11e011][_0x56fbde(0xf6)]({'function':_0x56fbde(0x1df),'args':_0x217919});}else logger[_0x56fbde(0x172)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x1f340d['on'](_0x2fca4a(0x235),_0x1575a6=>{const _0xbaf6fd=_0x2fca4a;if(validateAccess(_0x1575a6,_0x56858a)['allow']){if(pid[_0x11e011])pid[_0x11e011][_0xbaf6fd(0xf6)]({'function':_0xbaf6fd(0x22d),'args':null});}else logger[_0xbaf6fd(0x172)](_0xbaf6fd(0x12b));}),_0x1f340d['on'](_0x2fca4a(0x1bd),_0x3b0b7f=>{const _0x5e15eb=_0x2fca4a;if(validateAccess(_0x3b0b7f,_0x56858a)[_0x5e15eb(0x12e)]){if(pid[_0x11e011])pid[_0x11e011][_0x5e15eb(0xf6)]({'function':_0x5e15eb(0x2b2),'args':null});}else logger[_0x5e15eb(0x172)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x1f340d['on'](_0x2fca4a(0x27d),(_0x385f71,_0x258568)=>{const _0x313200=_0x2fca4a;if(validateAccess(_0x258568,_0x56858a)[_0x313200(0x12e)]){if(pid[_0x11e011])pid[_0x11e011][_0x313200(0xf6)]({'function':'placeOrder','args':_0x385f71});}else logger['full'](_0x313200(0x29f));}),_0x1f340d['on'](_0x2fca4a(0x106),_0x4d6c8e=>{const _0x58a0c2=_0x2fca4a;if(validateAccess(_0x4d6c8e,_0x56858a)['allow']){if(pid[_0x11e011])pid[_0x11e011][_0x58a0c2(0xf6)]({'function':_0x58a0c2(0x1f7),'args':null});}else logger[_0x58a0c2(0x172)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x1f340d['on']('show-config',_0x1353fb=>{const _0x7eb222=_0x2fca4a;if(validateAccess(_0x1353fb,_0x56858a)[_0x7eb222(0x12e)]){if(pid[_0x11e011])pid[_0x11e011][_0x7eb222(0xf6)]({'function':'showConfig','args':null});}else logger[_0x7eb222(0x172)](_0x7eb222(0x18e));}),_0x1f340d['on'](_0x2fca4a(0x1c2),_0x1a66b3=>{const _0x38958f=_0x2fca4a;if(validateAccess(_0x1a66b3,_0x56858a)[_0x38958f(0x12e)])updateBB(_0x38958f(0x294));else logger['full'](_0x38958f(0x1dc));}),_0x1f340d['on'](_0x2fca4a(0x2ad),_0x418cc1=>{const _0x25b43e=_0x2fca4a;if(validateAccess(_0x418cc1,_0x56858a)['allow'])getMessages();else logger[_0x25b43e(0x172)](_0x25b43e(0xfe));}),_0x1f340d['on'](_0x2fca4a(0x132),(_0x2afb5c,_0x335746)=>{const _0x509d6c=_0x2fca4a;if(validateAccess(_0x335746,_0x56858a)[_0x509d6c(0x12e)])confirmMessage(_0x2afb5c);else logger[_0x509d6c(0x172)](_0x509d6c(0x169));}),_0x1f340d['on'](_0x2fca4a(0x13f),_0x5d01b0=>{const _0x4f1f7f=_0x2fca4a;if(validateAccess(_0x5d01b0,_0x56858a)['allow']){if(devices[_0x56858a]['pidRefreshToken'])clearTimeout(devices[_0x56858a]['pidRefreshToken']);if(devices[_0x56858a]['pidExpireLogin'])clearTimeout(devices[_0x56858a][_0x4f1f7f(0x1fd)]);removeSocketListeners(getClient(_0x1f340d['id'])['uuid']),addBlacklist(_0x56858a),devices[_0x56858a][_0x4f1f7f(0x1ec)]=null,devices[_0x56858a][_0x4f1f7f(0x231)]=null,devices[_0x56858a][_0x4f1f7f(0x1e4)][_0x4f1f7f(0x1b0)]=null,logger[_0x4f1f7f(0x258)](_0x4f1f7f(0x251)+_0x56858a[_0x4f1f7f(0x171)](-0x8)),io['to'](getClient(_0x1f340d['id'])[_0x4f1f7f(0x1a8)])[_0x4f1f7f(0x1e0)](_0x4f1f7f(0x124),{'access':{'allow':![],'reason':_0x4f1f7f(0x223),'token':null}});}else logger[_0x4f1f7f(0x172)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1e459d){const _0xe2bf3a=_0x47eb73;getClientsWithUuid(_0x1e459d)[_0xe2bf3a(0x247)](_0x13967c=>{const _0x47f258=_0xe2bf3a;getSocket(_0x13967c['id'])[_0x47f258(0x136)]();});}function cleanSettings(){const _0x3ea683=_0x47eb73;let _0x5bdf85=settings;return settings[_0x3ea683(0x17c)]&&settings[_0x3ea683(0x17c)]!=''&&(_0x5bdf85={..._0x5bdf85,'telegramToken':_0x3ea683(0x10e)}),settings[_0x3ea683(0xf3)]&&settings[_0x3ea683(0xf3)]!=''&&(_0x5bdf85={..._0x5bdf85,'bbPassword':_0x3ea683(0x10e)}),(settings[_0x3ea683(0xf3)]&&settings['bbPassword']==_0x3ea683(0x1eb)||settings['telegramToken']&&settings['telegramToken']==_0x3ea683(0x1eb))&&(_0x5bdf85={..._0x5bdf85,'restored':{'password':settings[_0x3ea683(0xf3)]==_0x3ea683(0x1eb),'telegram':settings[_0x3ea683(0x17c)]==_0x3ea683(0x1eb)}}),_0x5bdf85;}async function updateBB(_0x197228){const _0x320968=_0x47eb73;await backupConfigFiles(),installingUpdate=!![],config[_0x320968(0x247)](_0x3cfead=>{const _0x36de85=_0x320968;restartBot(_0x3cfead[_0x36de85(0xe4)]);});if(_0x197228==_0x320968(0x294))process[_0x320968(0xf6)]({'update':!![],'environment':environment},_0x5c4702=>{});else _0x197228==_0x320968(0x230)&&process[_0x320968(0xf6)]({'reinstall':!![],'environment':environment},_0x25517a=>{});}function startBot(_0x7c4ac2,_0x3047cf,_0x2f8921){const _0x4baf92=_0x47eb73;if(debugging)_0x7c4ac2['push']('-d');let _0x42f0df=![];const _0x32c4fa=_0x7c4ac2[0x0];_0x3047cf={..._0x3047cf,'stdio':[_0x4baf92(0x23c),'inherit',_0x4baf92(0x23c),_0x4baf92(0x134)]},pid[_0x32c4fa]=childProcess['fork'](botfile,_0x7c4ac2,_0x3047cf),pid[_0x32c4fa]['on']('message',_0x2f1343=>{const _0x3f1c69=_0x4baf92;switch(Object[_0x3f1c69(0xfd)](_0x2f1343)[0x0]){case _0x3f1c69(0x2a2):updateBotName(_0x32c4fa,_0x2f1343[_0x3f1c69(0x2a2)]);break;case'updatebotmanager':updateBotManager();break;case _0x3f1c69(0x124):updateStatus(_0x32c4fa,_0x2f1343[_0x3f1c69(0x124)]);break;case _0x3f1c69(0x179):updateLive(_0x32c4fa,_0x2f1343[_0x3f1c69(0x179)]);break;case'started':updateLive(_0x32c4fa,_0x2f1343[_0x3f1c69(0x123)]),io['to'](_0x32c4fa)['emit']('status',{'access':{'allow':![],'reason':_0x3f1c69(0x2bb),'token':null}});break;case _0x3f1c69(0x24a):_0x2f1343[_0x3f1c69(0x24a)]=='restart'&&restartBot(_0x32c4fa);_0x2f1343[_0x3f1c69(0x24a)]==_0x3f1c69(0x19d)&&toggleBot(_0x32c4fa,'disabled','stopped');break;case _0x3f1c69(0x119):sendTelegram(_0x32c4fa,_0x2f1343[_0x3f1c69(0x119)]);break;case'telegrammsg':sendTelegramMsg(_0x2f1343['telegrammsg']);break;case _0x3f1c69(0x236):io['to'](_0x32c4fa)[_0x3f1c69(0x1e0)](_0x2f1343[_0x3f1c69(0x236)],_0x2f1343[_0x3f1c69(0x1d3)]);break;}}),pid[_0x32c4fa]['on'](_0x4baf92(0xf0),function(_0x4b5560){if(_0x42f0df)return;_0x42f0df=!![],_0x2f8921(_0x4b5560);}),pid[_0x32c4fa]['on']('exit',async function(_0x25e3fb){const _0x55446c=_0x4baf92;if(installingUpdate)return;if(_0x42f0df)return;_0x42f0df=!![],_0x2f8921(null);const _0x26efb2=dbConfig[_0x55446c(0x265)](_0x55446c(0x281))[_0x55446c(0x128)]({'botID':_0x32c4fa})[_0x55446c(0x13b)]();_0x26efb2&&(_0x26efb2[_0x55446c(0x124)]==_0x55446c(0x267)||_0x26efb2[_0x55446c(0x124)]==_0x55446c(0x220))&&(await sleep(0x3e8),updateLive(_0x32c4fa,_0x55446c(0x286)),logger['full']('Restarting\x20Bot\x20'+_0x32c4fa),startBot([_0x32c4fa,userID],{'cwd':bbpath},function(_0x32e412){const _0x1f3972=_0x55446c;if(_0x32e412)logger[_0x1f3972(0x172)](_0x32e412);}));});}function stopBot(_0x200b85){const _0x1ae27a=_0x47eb73;getClientsWithBotID(_0x200b85)[_0x1ae27a(0x247)](_0x3b02e6=>{const _0x5acf79=_0x1ae27a;getSocket(_0x3b02e6['id'])[_0x5acf79(0x25d)](!![]),removeClient(_0x3b02e6['id']);}),pid[_0x200b85]&&(pid[_0x200b85][_0x1ae27a(0x19d)](),pid[_0x200b85]=null);}function restartBot(_0x5c7a99){const _0x4be2bb=_0x47eb73;if(pid[_0x5c7a99])pid[_0x5c7a99][_0x4be2bb(0x19d)]();}function addBot(){const _0x16c6ef=_0x47eb73;let _0x9271e0;for(let _0xcd3c9c=0x1;_0xcd3c9c<0x3e9;_0xcd3c9c++){_0x9271e0=_0xcd3c9c[_0x16c6ef(0x2a4)]()['padStart'](0x3,'0');let _0x1eab4d=config['find'](_0xb18dc3=>_0xb18dc3[_0x16c6ef(0xe4)]==_0x9271e0);if(!_0x1eab4d)break;}if(_0x9271e0==='1000'){logger['full'](_0x16c6ef(0x262));return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x9271e0),dbConfig[_0x16c6ef(0x265)](_0x16c6ef(0x281))[_0x16c6ef(0x100)]({'botID':_0x9271e0,'botname':'Bot\x20'+_0x9271e0,'status':_0x16c6ef(0x220),'live':''})[_0x16c6ef(0x2b4)](),startBot([_0x9271e0,userID],{'cwd':bbpath},function(_0x2877b3){const _0x3556ec=_0x16c6ef;if(_0x2877b3)logger[_0x3556ec(0x172)](_0x2877b3);}),config=getConfiguration(),io['to'](_0x16c6ef(0x1c6))[_0x16c6ef(0x1e0)](_0x16c6ef(0x281),config),broadcastToBots('bots',JSON['stringify'](config));}function deleteBot(_0x156460){const _0x1a2394=_0x47eb73;getClientsWithBotID(_0x156460)[_0x1a2394(0x247)](_0x1ebecc=>{const _0x551f06=_0x1a2394;getSocket(_0x1ebecc['id'])[_0x551f06(0x25d)](!![]),removeClient(_0x1ebecc['id']);}),dbConfig[_0x1a2394(0x265)](_0x1a2394(0x281))[_0x1a2394(0x1f3)]({'botID':_0x156460})[_0x1a2394(0x2b4)](),logger['full'](_0x1a2394(0x234)+_0x156460),stopBot(_0x156460);try{if(fs[_0x1a2394(0x2c1)](path[_0x1a2394(0x1a4)](configpath,_0x1a2394(0xf5)+_0x156460+_0x1a2394(0x147))))fs[_0x1a2394(0x1b4)](path[_0x1a2394(0x1a4)](configpath,_0x1a2394(0xf5)+_0x156460+_0x1a2394(0x147)));if(fs[_0x1a2394(0x2c1)](path[_0x1a2394(0x1a4)](configpath,'bot-'+_0x156460+_0x1a2394(0x163))))fs[_0x1a2394(0x1b4)](path['join'](configpath,_0x1a2394(0xf5)+_0x156460+'-events.json'));if(fs[_0x1a2394(0x2c1)](path[_0x1a2394(0x1a4)](configpath,_0x1a2394(0xf5)+_0x156460+_0x1a2394(0x23a))))fs[_0x1a2394(0x1b4)](path[_0x1a2394(0x1a4)](configpath,_0x1a2394(0xf5)+_0x156460+_0x1a2394(0x23a)));if(fs[_0x1a2394(0x2c1)](path[_0x1a2394(0x1a4)](configpath,'bot-'+_0x156460+_0x1a2394(0x1b1))))fs[_0x1a2394(0x1b4)](path['join'](configpath,_0x1a2394(0xf5)+_0x156460+_0x1a2394(0x1b1)));}catch(_0x5abb14){if(_0x5abb14)logger[_0x1a2394(0x172)](_0x1a2394(0x28e),_0x5abb14);}config=getConfiguration(),io['to'](_0x1a2394(0x1c6))['emit'](_0x1a2394(0x281),config),broadcastToBots(_0x1a2394(0x281),JSON['stringify'](config));}function toggleBot(_0xacaf2c,_0x1d4e4e,_0x3f1d12){const _0x5ec94c=_0x47eb73;dbConfig[_0x5ec94c(0x265)]('bots')['find']({'botID':_0xacaf2c})['assign']({'status':_0x1d4e4e})[_0x5ec94c(0x158)]({'live':_0x3f1d12})[_0x5ec94c(0x2b4)]();if(_0x1d4e4e=='enabled'||_0x1d4e4e==_0x5ec94c(0x220))logger[_0x5ec94c(0x172)]('Enabled\x20Bot\x20'+_0xacaf2c),startBot([_0xacaf2c,userID],{'cwd':bbpath},function(_0x48dc1d){const _0x4be5e6=_0x5ec94c;if(_0x48dc1d)logger[_0x4be5e6(0x172)](_0x48dc1d);});else(_0x1d4e4e==_0x5ec94c(0x26c)||_0x1d4e4e==_0x5ec94c(0x24d))&&(logger[_0x5ec94c(0x172)]('Disabled\x20Bot\x20'+_0xacaf2c),stopBot(_0xacaf2c));config=getConfiguration(),io['to'](_0x5ec94c(0x1c6))[_0x5ec94c(0x1e0)]('bots',config),broadcastToBots(_0x5ec94c(0x281),JSON[_0x5ec94c(0x2b9)](config));}function toggleStatus(_0x490b4e){const _0x249a79=_0x47eb73;let _0x387d04=dbConfig[_0x249a79(0x265)]('bots')[_0x249a79(0x128)]({'botID':_0x490b4e})[_0x249a79(0x13b)](),_0x5b2551;if(_0x387d04[_0x249a79(0x124)]===_0x249a79(0x267))_0x5b2551=_0x249a79(0x26c);else{if(_0x387d04[_0x249a79(0x124)]===_0x249a79(0x220))_0x5b2551=_0x249a79(0x24d);else{if(_0x387d04[_0x249a79(0x124)]===_0x249a79(0x24d))_0x5b2551=_0x249a79(0x220);else{if(_0x387d04[_0x249a79(0x124)]===_0x249a79(0x26c))_0x5b2551=_0x249a79(0x267);}}}return _0x5b2551;}function updateStatus(_0x486f4a,_0x46a03b){const _0x2659ad=_0x47eb73;dbConfig[_0x2659ad(0x265)](_0x2659ad(0x281))[_0x2659ad(0x128)]({'botID':_0x486f4a})[_0x2659ad(0x158)]({'status':_0x46a03b})[_0x2659ad(0x2b4)](),config=getConfiguration(),io['to'](_0x2659ad(0x1c6))[_0x2659ad(0x1e0)](_0x2659ad(0x281),config),broadcastToBots(_0x2659ad(0x281),JSON[_0x2659ad(0x2b9)](config));}function updateLive(_0xaab9f,_0x144a94){const _0x2fd24b=_0x47eb73;dbConfig['get'](_0x2fd24b(0x281))['find']({'botID':_0xaab9f})[_0x2fd24b(0x158)]({'live':_0x144a94})[_0x2fd24b(0x2b4)](),config=getConfiguration(),io['to'](_0x2fd24b(0x1c6))['emit'](_0x2fd24b(0x281),config),broadcastToBots(_0x2fd24b(0x281),JSON[_0x2fd24b(0x2b9)](config));}function updateBotName(_0x19f442,_0x24bf9a){const _0x432f09=_0x47eb73;dbConfig[_0x432f09(0x265)](_0x432f09(0x281))[_0x432f09(0x128)]({'botID':_0x19f442})['assign']({'botname':_0x24bf9a})['write'](),config=getConfiguration(),io['to'](_0x432f09(0x1c6))[_0x432f09(0x1e0)](_0x432f09(0x281),config),broadcastToBots(_0x432f09(0x281),JSON[_0x432f09(0x2b9)](config));}function updateBotManager(){const _0x137abb=_0x47eb73;config=getConfiguration(),io['to'](_0x137abb(0x1c6))[_0x137abb(0x1e0)](_0x137abb(0x281),config),broadcastToBots(_0x137abb(0x281),JSON[_0x137abb(0x2b9)](config));}function toggleBotMode(_0x443528){const _0x49c05c=_0x47eb73;if(pid[_0x443528])pid[_0x443528][_0x49c05c(0xf6)]({'function':_0x49c05c(0x1c4),'args':null});else{const _0x60fd09=configpath+_0x49c05c(0xf5)+_0x443528+_0x49c05c(0x147),_0x1a9b54=fs[_0x49c05c(0x1b9)](_0x60fd09),_0x16db58=JSON[_0x49c05c(0x187)](_0x1a9b54),_0x67b141=_0x16db58['bot'][0x0][_0x49c05c(0x224)];_0x16db58[_0x49c05c(0x1ab)][0x0][_0x49c05c(0x224)]=!_0x67b141;const _0x598bc8=JSON[_0x49c05c(0x2b9)](_0x16db58,null,0x2);fs[_0x49c05c(0x273)](_0x60fd09,_0x598bc8),config=getConfiguration(),io['to'](_0x49c05c(0x1c6))[_0x49c05c(0x1e0)]('bots',config),broadcastToBots(_0x49c05c(0x281),JSON[_0x49c05c(0x2b9)](config));}}function telegramError(_0x33c404){const _0xd8b5b2=_0x47eb73;logger[_0xd8b5b2(0x1d7)](getTimeStamp()+_0xd8b5b2(0x1b8));}function validateTelegram(_0x477923){const _0x26fb1a=_0x47eb73;if(_0x477923['from'][_0x26fb1a(0x113)]!=settings[_0x26fb1a(0x292)]&&'@'+_0x477923[_0x26fb1a(0x23d)]['username']!=settings['telegramUsername'])return tgBot[_0x26fb1a(0x210)](_0x477923[_0x26fb1a(0x22c)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x26fb1a(0x288)})[_0x26fb1a(0x1f5)](_0x47bd98=>{telegramError(_0x47bd98);}),![];return!![];}async function initTelegram(){const _0x305e67=_0x47eb73;if(tgBot)tgBot[_0x305e67(0x259)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x305e67(0x17c)],{'polling':!![]});let _0x11f8f5=_0x305e67(0x165);_0x11f8f5+='\x0a',_0x11f8f5+=_0x305e67(0x18b),_0x11f8f5+=_0x305e67(0x1e3),_0x11f8f5+=_0x305e67(0x26a),_0x11f8f5+=_0x305e67(0x208),_0x11f8f5+=_0x305e67(0x206),_0x11f8f5+=_0x305e67(0x15e),_0x11f8f5+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x11f8f5+=_0x305e67(0x109),_0x11f8f5+=_0x305e67(0xf7),_0x11f8f5+=_0x305e67(0x11a),_0x11f8f5+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x11f8f5+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x11f8f5+=_0x305e67(0x137),_0x11f8f5+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x244ad1=_0x305e67(0x18f);_0x244ad1+='\x0a',_0x244ad1+=_0x11f8f5,tgBot[_0x305e67(0x18a)](/\/start/,_0x172a66=>{const _0x48a74c=_0x305e67;if(!validateTelegram(_0x172a66))return;if(settings[_0x48a74c(0x27f)]!=_0x172a66[_0x48a74c(0x22c)]['id'])updateSetting(_0x48a74c(0x27f),_0x172a66['chat']['id']);updateSetting(_0x48a74c(0xe6),!![]),tgBot[_0x48a74c(0x210)](_0x172a66[_0x48a74c(0x22c)]['id'],_0x244ad1)[_0x48a74c(0x1f5)](_0x4b6c95=>{telegramError(_0x4b6c95);});}),tgBot[_0x305e67(0x18a)](/\/enable/,_0x2de65d=>{const _0x1c0216=_0x305e67;if(!validateTelegram(_0x2de65d))return;if(settings[_0x1c0216(0x27f)]!=_0x2de65d[_0x1c0216(0x22c)]['id'])updateSetting(_0x1c0216(0x27f),_0x2de65d[_0x1c0216(0x22c)]['id']);updateSetting(_0x1c0216(0xe6),!![]),tgBot[_0x1c0216(0x210)](_0x2de65d[_0x1c0216(0x22c)]['id'],_0x1c0216(0x2a1))[_0x1c0216(0x1f5)](_0x470c95=>{telegramError(_0x470c95);});}),tgBot[_0x305e67(0x18a)](/\/config/,async _0x551fdc=>{const _0x1fd032=_0x305e67;if(!validateTelegram(_0x551fdc))return;tgBot[_0x1fd032(0x151)](_0x1fd032(0x19c)),tgBot['sendMessage'](_0x551fdc[_0x1fd032(0x22c)]['id'],_0x1fd032(0x268),{'reply_markup':{'inline_keyboard':[[{'text':_0x1fd032(0x283),'callback_data':'orders'},{'text':_0x1fd032(0x1f8),'callback_data':'alerts'},{'text':_0x1fd032(0x24e),'callback_data':_0x1fd032(0x269)}]]}})[_0x1fd032(0x1f5)](_0x47e730=>{telegramError(_0x47e730);}),tgBot['on']('callback_query',async _0x2307a5=>{const _0x4fd973=_0x1fd032,_0x2248a8=_0x2307a5[_0x4fd973(0x20d)],_0x836d22=_0x2307a5[_0x4fd973(0x1d1)];tgBot[_0x4fd973(0xf9)](_0x2307a5['id'])[_0x4fd973(0x1ea)](async()=>{const _0x4ed163=_0x4fd973;_0x2248a8==_0x4ed163(0x14f)&&(updateSetting(_0x4ed163(0x261),_0x4ed163(0x14f)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x836d22[_0x4ed163(0x22c)]['id'],_0x4ed163(0x10c))[_0x4ed163(0x1f5)](_0x25be90=>{telegramError(_0x25be90);}));_0x2248a8=='alerts'&&(updateSetting(_0x4ed163(0x261),_0x4ed163(0xfc)),updateSetting(_0x4ed163(0xe6),!![]),await tgBot['sendMessage'](_0x836d22['chat']['id'],_0x4ed163(0x264))[_0x4ed163(0x1f5)](_0x183158=>{telegramError(_0x183158);}));_0x2248a8==_0x4ed163(0x269)&&(updateSetting(_0x4ed163(0x261),_0x4ed163(0x269)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4ed163(0x210)](_0x836d22[_0x4ed163(0x22c)]['id'],_0x4ed163(0x28b))[_0x4ed163(0x1f5)](_0x11bb57=>{telegramError(_0x11bb57);}));if(!settings[_0x4ed163(0x27f)])tgBot[_0x4ed163(0x210)](_0x836d22['chat']['id'],_0x4ed163(0x2aa))[_0x4ed163(0x1f5)](_0x1c5623=>{telegramError(_0x1c5623);});}),tgBot[_0x4fd973(0x151)](_0x4fd973(0x19c));});}),tgBot[_0x305e67(0x18a)](/\/status/,_0x1592ba=>{const _0x3dcde3=_0x305e67;if(!validateTelegram(_0x1592ba))return;const _0x462c15=getBotsWithMode();let _0x16da51=_0x3dcde3(0xf2);config[_0x3dcde3(0x247)](_0x2cea21=>{const _0x1988da=_0x3dcde3,_0x2dcdb5=_0x462c15[_0x1988da(0x128)](_0x5c6931=>_0x5c6931[_0x1988da(0xe4)]==_0x2cea21[_0x1988da(0xe4)])[_0x1988da(0x252)];_0x16da51+=_0x1988da(0x266)+_0x2cea21[_0x1988da(0xe4)]+':\x20'+_0x2cea21['status']+'\x20|\x20'+_0x2dcdb5+_0x1988da(0x2b1)+_0x2cea21[_0x1988da(0x179)]+'\x0a';}),_0x16da51+='\x0a',_0x16da51+=_0x3dcde3(0x291),_0x16da51+=!settings[_0x3dcde3(0xe6)]?_0x3dcde3(0x20f):_0x3dcde3(0x11d),_0x16da51+=settings[_0x3dcde3(0xe6)]?settings['telegramEvents']==_0x3dcde3(0x269)?_0x3dcde3(0x213):_0x3dcde3(0x26e)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x3dcde3(0x210)](_0x1592ba[_0x3dcde3(0x22c)]['id'],_0x16da51,{'parse_mode':_0x3dcde3(0x288)})['catch'](_0x3d13e6=>{telegramError(_0x3d13e6);});}),tgBot[_0x305e67(0x18a)](/\/restart/,_0x3a9e94=>{const _0x9a978c=_0x305e67;if(!validateTelegram(_0x3a9e94))return;tgBot[_0x9a978c(0x151)]('callback_query');const _0x36439f=getEnabledBots();if(_0x36439f['length']==0x0)tgBot[_0x9a978c(0x210)](_0x3a9e94['chat']['id'],_0x9a978c(0x16e))[_0x9a978c(0x1f5)](_0x66e444=>{telegramError(_0x66e444);});else{if(_0x36439f['length']>0x1)_0x36439f['push']({'botID':_0x9a978c(0x269)});let _0x7bab86=[],_0x5036d8=[];const _0x295fe1=_0x36439f['length']%0x4==0x0||_0x36439f[_0x9a978c(0xe2)]%0x4==0x3||_0x36439f[_0x9a978c(0xe2)]%0x3==0x1?0x4:0x3;let _0x1d2fa7=0x0;_0x36439f[_0x9a978c(0x247)]((_0x39cbc8,_0x3e1d3a)=>{const _0x372a1b=_0x9a978c;if(_0x3e1d3a%_0x295fe1==0x0)_0x5036d8=[];_0x5036d8[_0x372a1b(0x100)]({'text':_0x39cbc8[_0x372a1b(0xe4)]==_0x372a1b(0x269)?'All\x20bots':'Bot\x20'+_0x39cbc8[_0x372a1b(0xe4)],'callback_data':_0x39cbc8[_0x372a1b(0xe4)]}),_0x3e1d3a%_0x295fe1==0x0&&(_0x7bab86[_0x1d2fa7]=_0x5036d8,_0x1d2fa7++);}),tgBot[_0x9a978c(0x210)](_0x3a9e94[_0x9a978c(0x22c)]['id'],_0x9a978c(0x102),{'reply_markup':{'inline_keyboard':_0x7bab86}})[_0x9a978c(0x1f5)](_0x17cd81=>{telegramError(_0x17cd81);}),tgBot['on']('callback_query',async _0x4d8214=>{const _0x5bbe46=_0x9a978c,_0x3ca5ef=_0x4d8214[_0x5bbe46(0x20d)],_0xa2bada=_0x4d8214[_0x5bbe46(0x1d1)];tgBot[_0x5bbe46(0xf9)](_0x4d8214['id'])['then'](async()=>{const _0x3e0cd3=_0x5bbe46;_0x3ca5ef==_0x3e0cd3(0x269)?config[_0x3e0cd3(0x247)](_0x454981=>{restartBot(_0x454981['botID']);}):restartBot(_0x3ca5ef);}),tgBot[_0x5bbe46(0x151)](_0x5bbe46(0x19c));});}}),tgBot[_0x305e67(0x18a)](/\/on/,_0x3d75b6=>{const _0x41c567=_0x305e67;if(!validateTelegram(_0x3d75b6))return;tgBot['removeListener'](_0x41c567(0x19c));const _0x17a84=getDisabledBots();if(_0x17a84[_0x41c567(0xe2)]==0x0)tgBot[_0x41c567(0x210)](_0x3d75b6[_0x41c567(0x22c)]['id'],_0x41c567(0x299))[_0x41c567(0x1f5)](_0x154b21=>{telegramError(_0x154b21);});else{if(_0x17a84['length']>0x1)_0x17a84[_0x41c567(0x100)]({'botID':_0x41c567(0x269)});let _0x785453=[],_0x368223=[];const _0x22cedd=_0x17a84[_0x41c567(0xe2)]%0x4==0x0||_0x17a84[_0x41c567(0xe2)]%0x4==0x3||_0x17a84[_0x41c567(0xe2)]%0x3==0x1?0x4:0x3;let _0x4432d=0x0;_0x17a84[_0x41c567(0x247)]((_0x15f98a,_0x7012f1)=>{const _0x86dc37=_0x41c567;if(_0x7012f1%_0x22cedd==0x0)_0x368223=[];_0x368223[_0x86dc37(0x100)]({'text':_0x15f98a[_0x86dc37(0xe4)]==_0x86dc37(0x269)?_0x86dc37(0x272):_0x86dc37(0x266)+_0x15f98a[_0x86dc37(0xe4)],'callback_data':_0x15f98a['botID']}),_0x7012f1%_0x22cedd==0x0&&(_0x785453[_0x4432d]=_0x368223,_0x4432d++);}),tgBot[_0x41c567(0x210)](_0x3d75b6[_0x41c567(0x22c)]['id'],_0x41c567(0x207),{'reply_markup':{'inline_keyboard':_0x785453}})[_0x41c567(0x1f5)](_0x16cc5e=>{telegramError(_0x16cc5e);}),tgBot['on'](_0x41c567(0x19c),async _0x28bf40=>{const _0x4c65ad=_0x41c567,_0x450361=_0x28bf40[_0x4c65ad(0x20d)],_0x4d527a=_0x28bf40[_0x4c65ad(0x1d1)];tgBot[_0x4c65ad(0xf9)](_0x28bf40['id'])[_0x4c65ad(0x1ea)](async()=>{const _0x498398=_0x4c65ad;_0x450361==_0x498398(0x269)?(tgBot[_0x498398(0x210)](_0x4d527a[_0x498398(0x22c)]['id'],_0x498398(0x263))[_0x498398(0x1f5)](_0x18421b=>{telegramError(_0x18421b);}),_0x17a84['forEach'](_0x2b3042=>{const _0x3b13fe=_0x498398;if(_0x2b3042[_0x3b13fe(0xe4)]!=_0x3b13fe(0x269))toggleBot(_0x2b3042[_0x3b13fe(0xe4)],toggleStatus(_0x2b3042[_0x3b13fe(0xe4)]),_0x3b13fe(0x286));})):(tgBot['sendMessage'](_0x4d527a[_0x498398(0x22c)]['id'],_0x498398(0x16f)+_0x450361)[_0x498398(0x1f5)](_0x3a3ffd=>{telegramError(_0x3a3ffd);}),toggleBot(_0x450361,toggleStatus(_0x450361),'stopped'));}),tgBot[_0x4c65ad(0x151)](_0x4c65ad(0x19c));});}}),tgBot[_0x305e67(0x18a)](/\/off/,_0xede8c3=>{const _0x484022=_0x305e67;if(!validateTelegram(_0xede8c3))return;tgBot[_0x484022(0x151)](_0x484022(0x19c));const _0xe0136=getEnabledBots();if(_0xe0136['length']==0x0)tgBot[_0x484022(0x210)](_0xede8c3['chat']['id'],_0x484022(0x16e))[_0x484022(0x1f5)](_0x564c8b=>{telegramError(_0x564c8b);});else{if(_0xe0136[_0x484022(0xe2)]>0x1)_0xe0136[_0x484022(0x100)]({'botID':_0x484022(0x269)});let _0x2cded6=[],_0x4716ea=[];const _0x4ded47=_0xe0136[_0x484022(0xe2)]%0x4==0x0||_0xe0136[_0x484022(0xe2)]%0x4==0x3||_0xe0136[_0x484022(0xe2)]%0x3==0x1?0x4:0x3;let _0xb23de5=0x0;_0xe0136[_0x484022(0x247)]((_0x5f2393,_0x389f2d)=>{const _0x5837ed=_0x484022;if(_0x389f2d%_0x4ded47==0x0)_0x4716ea=[];_0x4716ea['push']({'text':_0x5f2393['botID']==_0x5837ed(0x269)?_0x5837ed(0x272):'Bot\x20'+_0x5f2393['botID'],'callback_data':_0x5f2393[_0x5837ed(0xe4)]}),_0x389f2d%_0x4ded47==0x0&&(_0x2cded6[_0xb23de5]=_0x4716ea,_0xb23de5++);}),tgBot[_0x484022(0x210)](_0xede8c3['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x2cded6}})['catch'](_0x490ff1=>{telegramError(_0x490ff1);}),tgBot['on']('callback_query',async _0x3ccab9=>{const _0x157526=_0x484022,_0x4aafdb=_0x3ccab9['data'],_0x21a11d=_0x3ccab9[_0x157526(0x1d1)];tgBot[_0x157526(0xf9)](_0x3ccab9['id'])[_0x157526(0x1ea)](async()=>{const _0x4f4a82=_0x157526;_0x4aafdb==_0x4f4a82(0x269)?(tgBot['sendMessage'](_0x21a11d[_0x4f4a82(0x22c)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4f4a82(0x1f5)](_0x440a11=>{telegramError(_0x440a11);}),_0xe0136[_0x4f4a82(0x247)](_0x1bb695=>{const _0x73dd1=_0x4f4a82;if(_0x1bb695[_0x73dd1(0xe4)]!=_0x73dd1(0x269))toggleBot(_0x1bb695[_0x73dd1(0xe4)],toggleStatus(_0x1bb695[_0x73dd1(0xe4)]),'stopped');})):(tgBot[_0x4f4a82(0x210)](_0x21a11d[_0x4f4a82(0x22c)]['id'],_0x4f4a82(0x11c)+_0x4aafdb)[_0x4f4a82(0x1f5)](_0x7b524b=>{telegramError(_0x7b524b);}),toggleBot(_0x4aafdb,toggleStatus(_0x4aafdb),_0x4f4a82(0x286)));}),tgBot[_0x157526(0x151)]('callback_query');});}}),tgBot['onText'](/\/metrics/,_0x351c2a=>{const _0x457632=_0x305e67;if(!validateTelegram(_0x351c2a))return;tgBot['removeListener'](_0x457632(0x19c));const _0x2a6e9d=getEnabledBots();if(_0x2a6e9d[_0x457632(0xe2)]==0x0)tgBot['sendMessage'](_0x351c2a['chat']['id'],_0x457632(0x16e))['catch'](_0x2861a6=>{telegramError(_0x2861a6);});else{if(_0x2a6e9d['length']>0x1){let _0x594068=[],_0x5407f8=[];const _0x351bf5=_0x2a6e9d[_0x457632(0xe2)]%0x4==0x0||_0x2a6e9d[_0x457632(0xe2)]%0x4==0x3||_0x2a6e9d['length']%0x3==0x1?0x4:0x3;let _0x28ecf7=0x0;_0x2a6e9d[_0x457632(0x247)]((_0x364a48,_0x506c73)=>{const _0x3de0dc=_0x457632;if(_0x506c73%_0x351bf5==0x0)_0x5407f8=[];_0x5407f8[_0x3de0dc(0x100)]({'text':_0x3de0dc(0x266)+_0x364a48[_0x3de0dc(0xe4)],'callback_data':_0x364a48[_0x3de0dc(0xe4)]}),_0x506c73%_0x351bf5==0x0&&(_0x594068[_0x28ecf7]=_0x5407f8,_0x28ecf7++);}),tgBot[_0x457632(0x210)](_0x351c2a[_0x457632(0x22c)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x594068}})[_0x457632(0x1f5)](_0x2cab1e=>{telegramError(_0x2cab1e);}),tgBot['on'](_0x457632(0x19c),async _0x2186d2=>{const _0x34e010=_0x457632,_0x3d433f=_0x2186d2[_0x34e010(0x20d)],_0x2d1a4a=_0x2186d2[_0x34e010(0x1d1)];tgBot[_0x34e010(0xf9)](_0x2186d2['id'])[_0x34e010(0x1ea)](async()=>{const _0x6ebcec=_0x34e010;if(pid[_0x3d433f])pid[_0x3d433f]['send']({'function':_0x6ebcec(0xe5),'args':null});}),tgBot['removeListener'](_0x34e010(0x19c));});}else{const _0x267582=_0x2a6e9d[0x0][_0x457632(0xe4)];if(pid[_0x267582])pid[_0x267582][_0x457632(0xf6)]({'function':_0x457632(0xe5),'args':null});}}}),tgBot[_0x305e67(0x18a)](/\/portfolio/,_0x1677c1=>{const _0x356719=_0x305e67;if(!validateTelegram(_0x1677c1))return;tgBot[_0x356719(0x151)](_0x356719(0x19c));const _0x555e4d=getEnabledBots();if(_0x555e4d[_0x356719(0xe2)]==0x0)tgBot[_0x356719(0x210)](_0x1677c1['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x356719(0x1f5)](_0x2bddb8=>{telegramError(_0x2bddb8);});else{if(_0x555e4d[_0x356719(0xe2)]>0x1){let _0x180216=[],_0x33d7d6=[];const _0x54fe64=_0x555e4d[_0x356719(0xe2)]%0x4==0x0||_0x555e4d[_0x356719(0xe2)]%0x4==0x3||_0x555e4d['length']%0x3==0x1?0x4:0x3;let _0x4791ec=0x0;_0x555e4d[_0x356719(0x247)]((_0x1ff728,_0x1f0d78)=>{const _0x2b7d5b=_0x356719;if(_0x1f0d78%_0x54fe64==0x0)_0x33d7d6=[];_0x33d7d6[_0x2b7d5b(0x100)]({'text':'Bot\x20'+_0x1ff728[_0x2b7d5b(0xe4)],'callback_data':_0x1ff728['botID']}),_0x1f0d78%_0x54fe64==0x0&&(_0x180216[_0x4791ec]=_0x33d7d6,_0x4791ec++);}),tgBot[_0x356719(0x210)](_0x1677c1[_0x356719(0x22c)]['id'],_0x356719(0x24f),{'reply_markup':{'inline_keyboard':_0x180216}})[_0x356719(0x1f5)](_0x58fe71=>{telegramError(_0x58fe71);}),tgBot['on'](_0x356719(0x19c),async _0x46e476=>{const _0x5989d8=_0x356719,_0x1a266f=_0x46e476['data'],_0x2bd8c4=_0x46e476[_0x5989d8(0x1d1)];tgBot[_0x5989d8(0xf9)](_0x46e476['id'])['then'](async()=>{const _0x14b5e0=_0x5989d8;if(pid[_0x1a266f])pid[_0x1a266f][_0x14b5e0(0xf6)]({'function':_0x14b5e0(0x222),'args':null});}),tgBot[_0x5989d8(0x151)](_0x5989d8(0x19c));});}else{const _0x330a15=_0x555e4d[0x0][_0x356719(0xe4)];if(pid[_0x330a15])pid[_0x330a15][_0x356719(0xf6)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x305e67(0x18a)](/\/update/,async _0x56fe83=>{const _0x4ae4f8=_0x305e67;if(!validateTelegram(_0x56fe83))return;tgBot[_0x4ae4f8(0x151)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x4ae4f8(0x210)](_0x56fe83[_0x4ae4f8(0x22c)]['id'],_0x4ae4f8(0xfb))[_0x4ae4f8(0x1f5)](_0x595bc7=>{telegramError(_0x595bc7);});else!validInstallation?tgBot[_0x4ae4f8(0x210)](_0x56fe83[_0x4ae4f8(0x22c)]['id'],_0x4ae4f8(0xe3))[_0x4ae4f8(0x1f5)](_0x30ca43=>{telegramError(_0x30ca43);}):(tgBot[_0x4ae4f8(0x210)](_0x56fe83['chat']['id'],_0x4ae4f8(0x2a8),{'reply_markup':{'inline_keyboard':[[{'text':_0x4ae4f8(0x1ae),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x4ae4f8(0x1f5)](_0x14e75e=>{telegramError(_0x14e75e);}),tgBot['on'](_0x4ae4f8(0x19c),async _0x4580fe=>{const _0x2a89c5=_0x4ae4f8,_0x11b396=_0x4580fe[_0x2a89c5(0x20d)],_0x259952=_0x4580fe[_0x2a89c5(0x1d1)];tgBot[_0x2a89c5(0xf9)](_0x4580fe['id'])[_0x2a89c5(0x1ea)](async()=>{const _0x43cd13=_0x2a89c5;_0x11b396==_0x43cd13(0x2be)&&(await tgBot[_0x43cd13(0x210)](_0x259952[_0x43cd13(0x22c)]['id'],_0x43cd13(0x28f))[_0x43cd13(0x1f5)](_0x4fac1d=>{telegramError(_0x4fac1d);}),updateBB(_0x43cd13(0x294))),_0x11b396=='no'&&await tgBot[_0x43cd13(0x210)](_0x259952['chat']['id'],_0x43cd13(0x26d))[_0x43cd13(0x1f5)](_0x1f497c=>{telegramError(_0x1f497c);});}),tgBot['removeListener']('callback_query');}));}),tgBot['onText'](/\/reinstall/,async _0x24b436=>{const _0xec96e5=_0x305e67;if(!validateTelegram(_0x24b436))return;tgBot['removeListener'](_0xec96e5(0x19c)),!validInstallation?tgBot[_0xec96e5(0x210)](_0x24b436[_0xec96e5(0x22c)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0xec96e5(0x1f5)](_0x263a15=>{telegramError(_0x263a15);}):(tgBot[_0xec96e5(0x210)](_0x24b436[_0xec96e5(0x22c)]['id'],_0xec96e5(0x110),{'reply_markup':{'inline_keyboard':[[{'text':_0xec96e5(0x1ae),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0xec96e5(0x1f5)](_0x325370=>{telegramError(_0x325370);}),tgBot['on'](_0xec96e5(0x19c),async _0x2b73e1=>{const _0x4d5da6=_0xec96e5,_0x51c0d3=_0x2b73e1[_0x4d5da6(0x20d)],_0x4558c1=_0x2b73e1[_0x4d5da6(0x1d1)];tgBot[_0x4d5da6(0xf9)](_0x2b73e1['id'])[_0x4d5da6(0x1ea)](async()=>{const _0x36696d=_0x4d5da6;_0x51c0d3==_0x36696d(0x2be)&&(await tgBot[_0x36696d(0x210)](_0x4558c1[_0x36696d(0x22c)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x36696d(0x1f5)](_0x5cb20f=>{telegramError(_0x5cb20f);}),updateBB(_0x36696d(0x230))),_0x51c0d3=='no'&&await tgBot[_0x36696d(0x210)](_0x4558c1[_0x36696d(0x22c)]['id'],_0x36696d(0x184))['catch'](_0xf9be86=>{telegramError(_0xf9be86);});}),tgBot[_0x4d5da6(0x151)](_0x4d5da6(0x19c));}));}),tgBot['onText'](/\/toggle/,_0x19264a=>{const _0x3e3c21=_0x305e67;if(!validateTelegram(_0x19264a))return;tgBot[_0x3e3c21(0x151)](_0x3e3c21(0x19c));const _0x8d4650=getBotsWithMode();if(_0x8d4650['length']==0x0)tgBot[_0x3e3c21(0x210)](_0x19264a['chat']['id'],_0x3e3c21(0x16e))[_0x3e3c21(0x1f5)](_0x11d3e1=>{telegramError(_0x11d3e1);});else{let _0x31dfb3=[],_0x288452=[];const _0x250e09=0x2;let _0x14fa10=0x0;_0x8d4650[_0x3e3c21(0x247)]((_0x515e5d,_0x20c118)=>{const _0x16b067=_0x3e3c21;if(_0x20c118%_0x250e09==0x0)_0x288452=[];_0x288452[_0x16b067(0x100)]({'text':_0x16b067(0x266)+_0x515e5d[_0x16b067(0xe4)]+'\x20('+_0x515e5d[_0x16b067(0x252)]+')','callback_data':_0x515e5d[_0x16b067(0xe4)]}),_0x20c118%_0x250e09==0x0&&(_0x31dfb3[_0x14fa10]=_0x288452,_0x14fa10++);}),tgBot['sendMessage'](_0x19264a[_0x3e3c21(0x22c)]['id'],_0x3e3c21(0x182),{'reply_markup':{'inline_keyboard':_0x31dfb3}})['catch'](_0x5874fc=>{telegramError(_0x5874fc);}),tgBot['on'](_0x3e3c21(0x19c),async _0x48f8dd=>{const _0x37881a=_0x3e3c21,_0x515254=_0x48f8dd[_0x37881a(0x20d)],_0x5a5289=_0x48f8dd[_0x37881a(0x1d1)];tgBot[_0x37881a(0xf9)](_0x48f8dd['id'])[_0x37881a(0x1ea)](async()=>{const _0x47d731=_0x37881a,_0xac92e2=_0x8d4650[_0x47d731(0x128)](_0x277f61=>_0x277f61[_0x47d731(0xe4)]==_0x515254),_0x5ba17e=_0xac92e2[_0x47d731(0x252)]==_0x47d731(0x185)?'manual':_0x47d731(0x185);tgBot[_0x47d731(0x210)](_0x5a5289[_0x47d731(0x22c)]['id'],_0x47d731(0x1b7)+_0x515254+_0x47d731(0x1a2)+_0x5ba17e+'\x20mode')[_0x47d731(0x1f5)](_0x262f0a=>{telegramError(_0x262f0a);}),toggleBotMode(_0x515254);}),tgBot[_0x37881a(0x151)](_0x37881a(0x19c));});}}),tgBot['onText'](/\/names/,_0x45b4f7=>{const _0x4c68f1=_0x305e67;if(!validateTelegram(_0x45b4f7))return;let _0x2e02d7='';config[_0x4c68f1(0x247)](_0x4ee1c0=>{const _0x1c725e=_0x4c68f1;_0x2e02d7+='Bot\x20'+_0x4ee1c0[_0x1c725e(0xe4)]+':\x20'+_0x4ee1c0[_0x1c725e(0x2a2)]+'\x0a';}),tgBot[_0x4c68f1(0x210)](_0x45b4f7[_0x4c68f1(0x22c)]['id'],_0x2e02d7,{'parse_mode':_0x4c68f1(0x288)})[_0x4c68f1(0x1f5)](_0xf9202a=>{telegramError(_0xf9202a);});}),tgBot[_0x305e67(0x18a)](/\/disable/,_0x468ce3=>{const _0x556b77=_0x305e67;if(!validateTelegram(_0x468ce3))return;tgBot[_0x556b77(0x210)](_0x468ce3[_0x556b77(0x22c)]['id'],_0x556b77(0x1b2))['catch'](_0x54726d=>{telegramError(_0x54726d);}),updateSetting(_0x556b77(0xe6),![]);}),tgBot['onText'](/\/help/,_0x368bf1=>{const _0x57ea0e=_0x305e67;if(!validateTelegram(_0x368bf1))return;tgBot[_0x57ea0e(0x210)](_0x368bf1[_0x57ea0e(0x22c)]['id'],_0x11f8f5)[_0x57ea0e(0x1f5)](_0x4d7a37=>{telegramError(_0x4d7a37);});}),tgBot['on'](_0x305e67(0x1ca),_0x8d72c7=>{const _0x2ef9a1=_0x305e67;_0x8d72c7[_0x2ef9a1(0x2a4)]()['includes'](_0x2ef9a1(0x1ad))&&(logger[_0x2ef9a1(0x172)](_0x2ef9a1(0x11f)),tgBot[_0x2ef9a1(0x259)](),tgBot=null,io['to'](_0x2ef9a1(0x1c6))['emit']('notification',_0x2ef9a1(0x11f)));}),process[_0x305e67(0x1f9)](_0x305e67(0x146),()=>{const _0x5b327c=_0x305e67;if(tgBot)tgBot[_0x5b327c(0x259)]();process[_0x5b327c(0x160)](0x1);}),process[_0x305e67(0x1f9)](_0x305e67(0x133),()=>{const _0x32b103=_0x305e67;if(tgBot)tgBot[_0x32b103(0x259)]();process['exit'](0x1);});}}function disableTelegram(){const _0xf703e=_0x47eb73;tgBot&&(tgBot[_0xf703e(0x259)](),tgBot=null);}function sendTelegram(_0x473bfa,_0x954a96){const _0x11aa1b=_0x47eb73;if(settings[_0x11aa1b(0xe6)]){if(settings['telegramEvents']==_0x11aa1b(0x269)||(_0x954a96[_0x11aa1b(0x2c6)]=='error'||_0x954a96[_0x11aa1b(0x2c6)]==_0x11aa1b(0x2a7)||_0x954a96[_0x11aa1b(0x2c6)]==_0x11aa1b(0x271))&&settings[_0x11aa1b(0x261)]=='alerts'||_0x954a96[_0x11aa1b(0x2c6)]==_0x11aa1b(0x1b6)&&settings[_0x11aa1b(0x261)]=='orders'){if(tgBot&&settings[_0x11aa1b(0x27f)]){if(_0x954a96[_0x11aa1b(0x105)])tgBot[_0x11aa1b(0x210)](settings['telegramChatId'],_0x954a96[_0x11aa1b(0x2a2)]+_0x11aa1b(0x255)+_0x954a96[_0x11aa1b(0x18d)])[_0x11aa1b(0x1f5)](_0x23315b=>{telegramError(_0x23315b);});else tgBot[_0x11aa1b(0x210)](settings[_0x11aa1b(0x27f)],'Bot\x20'+_0x473bfa+_0x11aa1b(0x255)+_0x954a96[_0x11aa1b(0x18d)])[_0x11aa1b(0x1f5)](_0x308987=>{telegramError(_0x308987);});}}}}async function sendTelegramMsg(_0x262645,_0x123884=_0x47eb73(0x288)){const _0x2323bb=_0x47eb73;return settings[_0x2323bb(0xe6)]&&tgBot&&settings[_0x2323bb(0x27f)]?(await tgBot[_0x2323bb(0x210)](settings[_0x2323bb(0x27f)],_0x262645,{'parse_mode':_0x123884})[_0x2323bb(0x1f5)](_0x346d47=>{telegramError(_0x346d47);}),!![]):![];}function getDeviceWithIp(_0x6e9319){const _0x49cbaa=_0x47eb73;return devices[_0x49cbaa(0x128)](_0xd3f7bc=>_0xd3f7bc['ip']===_0x6e9319);}function temporaryAccess2FA(_0x371d45,_0x881956){const _0x118053=_0x47eb73;let _0x307aed=new Date(),_0x2d54d4=![];if(lastIpApproval){if(_0x307aed-lastIpApproval<0x1388)_0x2d54d4=!![];}lastIpApproval=new Date();if(_0x2d54d4)return;tgBot&&settings[_0x118053(0x27f)]&&(tgBot[_0x118053(0x151)](_0x118053(0x19c)),tgBot[_0x118053(0x210)](settings[_0x118053(0x27f)],_0x118053(0x131)+normalizeIP(_0x881956)[_0x118053(0x1c1)]+'</b>\x20?',{'parse_mode':_0x118053(0x288),'reply_markup':{'inline_keyboard':[[{'text':_0x118053(0x19b),'callback_data':'5'},{'text':_0x118053(0x1ce),'callback_data':'15'},{'text':_0x118053(0x13c),'callback_data':'30'},{'text':_0x118053(0x243),'callback_data':_0x118053(0x243)}]]}})['catch'](_0x56b7ad=>{telegramError(_0x56b7ad);}),tgBot['on'](_0x118053(0x19c),async _0x49367b=>{const _0x3da7c4=_0x118053,_0x328a8a=_0x49367b[_0x3da7c4(0x20d)],_0x198778=_0x49367b[_0x3da7c4(0x1d1)];tgBot[_0x3da7c4(0xf9)](_0x49367b['id'])[_0x3da7c4(0x1ea)](async()=>{const _0x57a423=_0x3da7c4;devices[_0x371d45][_0x57a423(0x1ec)]={'clientip':_0x881956,'timestamp':new Date()['getTime'](),'expiry':_0x328a8a},_0x328a8a!=_0x57a423(0x243)?(await tgBot['sendMessage'](_0x198778[_0x57a423(0x22c)]['id'],_0x57a423(0x121)+_0x328a8a+_0x57a423(0x1fa),{'parse_mode':_0x57a423(0x288)})[_0x57a423(0x1f5)](_0x48d6bd=>{telegramError(_0x48d6bd);}),io['to'](_0x371d45)[_0x57a423(0x1e0)]('status',{'access':{'allow':![],'reason':_0x57a423(0x2bb),'token':null}})):(await tgBot[_0x57a423(0x210)](_0x198778[_0x57a423(0x22c)]['id'],_0x57a423(0x1f6))[_0x57a423(0x1f5)](_0x566a15=>{telegramError(_0x566a15);}),io['to'](_0x371d45)[_0x57a423(0x1e0)](_0x57a423(0x124),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x3da7c4(0x151)](_0x3da7c4(0x19c));}));}function loginAccess2FA(_0x65bfb8,_0x67c1bd){const _0xb3d628=_0x47eb73;tgBot&&settings[_0xb3d628(0x27f)]&&(tgBot[_0xb3d628(0x151)]('callback_query'),tgBot[_0xb3d628(0x210)](settings[_0xb3d628(0x27f)],_0xb3d628(0x237)+normalizeIP(_0x67c1bd)[_0xb3d628(0x1c1)]+'</b>\x20?',{'parse_mode':_0xb3d628(0x288),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0xb3d628(0x243),'callback_data':_0xb3d628(0x243)}]]}})[_0xb3d628(0x1f5)](_0x35729a=>{telegramError(_0x35729a);}),tgBot['on'](_0xb3d628(0x19c),async _0x45a0dd=>{const _0x33c7ec=_0xb3d628,_0xfff5b6=_0x45a0dd[_0x33c7ec(0x20d)],_0x52a4c1=_0x45a0dd[_0x33c7ec(0x1d1)];tgBot[_0x33c7ec(0xf9)](_0x45a0dd['id'])['then'](async()=>{const _0x278eba=_0x33c7ec;devices[_0x65bfb8][_0x278eba(0x231)]={'clientip':_0x67c1bd,'timestamp':new Date()[_0x278eba(0x10f)](),'expiry':_0xfff5b6},_0xfff5b6!=_0x278eba(0x243)?(await tgBot[_0x278eba(0x210)](_0x52a4c1[_0x278eba(0x22c)]['id'],'Login\x20accepted',{'parse_mode':_0x278eba(0x288)})['catch'](_0x284526=>{telegramError(_0x284526);}),io['to'](_0x65bfb8)[_0x278eba(0x1e0)](_0x278eba(0x124),{'access':{'allow':![],'reason':_0x278eba(0x2bb),'token':null}})):(await tgBot[_0x278eba(0x210)](_0x52a4c1[_0x278eba(0x22c)]['id'],_0x278eba(0x14a))[_0x278eba(0x1f5)](_0x2ec215=>{telegramError(_0x2ec215);}),io['to'](_0x65bfb8)[_0x278eba(0x1e0)](_0x278eba(0x124),{'access':{'allow':![],'reason':_0x278eba(0x197),'token':null}}));}),tgBot[_0x33c7ec(0x151)](_0x33c7ec(0x19c));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x24e5ce=_0x47eb73;return dbConfig[_0x24e5ce(0x265)](_0x24e5ce(0x281))[_0x24e5ce(0x192)]('botID')[_0x24e5ce(0x1a7)]({'status':_0x24e5ce(0x267)})[_0x24e5ce(0x13b)]()||[];}function getDisabledBots(){const _0x4a38eb=_0x47eb73;return dbConfig[_0x4a38eb(0x265)]('bots')['sortBy']('botID')[_0x4a38eb(0x1a7)]({'status':_0x4a38eb(0x26c)})['value']()||[];}function getBotAttributes(_0x3c3e4b){const _0x4c3d73=_0x47eb73;let _0x4bfdac={};const _0x40ff3e=configpath+_0x4c3d73(0xf5)+_0x3c3e4b+_0x4c3d73(0x147),_0x17753c=fs[_0x4c3d73(0x2c1)](_0x40ff3e);if(_0x17753c){const _0xec5880=fs[_0x4c3d73(0x1b9)](_0x40ff3e);try{const _0x46b4f0=JSON[_0x4c3d73(0x187)](_0xec5880),_0x54451c=_0x46b4f0?_0x46b4f0['bot'][0x0][_0x4c3d73(0x224)]:![];_0x4bfdac['mode']=_0x54451c?_0x4c3d73(0x185):_0x4c3d73(0x2b5),_0x4bfdac['botname']=_0x46b4f0?_0x46b4f0['bot'][0x0][_0x4c3d73(0x2a2)]:_0x4c3d73(0x266)+_0x3c3e4b;}catch(_0x1245ff){_0x4bfdac['mode']=_0x4c3d73(0x2b5),_0x4bfdac[_0x4c3d73(0x2a2)]=_0x4c3d73(0x266)+_0x3c3e4b;}}else _0x4bfdac['mode']=_0x4c3d73(0x2b5),_0x4bfdac[_0x4c3d73(0x2a2)]=_0x4c3d73(0x266)+_0x3c3e4b;return _0x4bfdac;}function getBotsWithMode(){const _0x294acb=_0x47eb73,_0x51d979=dbConfig[_0x294acb(0x265)](_0x294acb(0x281))[_0x294acb(0x192)]('botID')['value']()||[];return _0x51d979[_0x294acb(0x247)](_0x38678d=>{const _0x1d77e6=_0x294acb;let _0x4920b6=getBotAttributes(_0x38678d['botID']);_0x38678d[_0x1d77e6(0x252)]=_0x4920b6[_0x1d77e6(0x252)];}),_0x51d979;}function getBotExchanges(){const _0x326825=_0x47eb73;let _0x28643d=[];const _0x503233=dbConfig[_0x326825(0x265)](_0x326825(0x281))[_0x326825(0x192)](_0x326825(0xe4))[_0x326825(0x13b)]()||[];_0x503233[_0x326825(0x247)](_0x59ce55=>{const _0x26f1c0=_0x326825;if(_0x59ce55[_0x26f1c0(0x124)]=='enabled'){const _0xf699a6=configpath+_0x26f1c0(0xf5)+_0x59ce55[_0x26f1c0(0xe4)]+'-config.json',_0x634f87=fs[_0x26f1c0(0x2c1)](_0xf699a6);let _0x2c8a4b;if(_0x634f87){const _0xf37bad=fs['readFileSync'](_0xf699a6);try{const _0x25d10f=JSON['parse'](_0xf37bad);_0x2c8a4b=_0x25d10f?_0x25d10f[_0x26f1c0(0x1ab)][0x0][_0x26f1c0(0x1cd)]:null;}catch(_0x21cbdc){}}if(_0x2c8a4b)_0x28643d[_0x26f1c0(0x100)](_0x2c8a4b);}});const _0x50c62e=[...new Set(_0x28643d)][_0x326825(0x1e5)]();return _0x50c62e;}async function initUser(){const _0x47ca1b=_0x47eb73;if(!settings[_0x47ca1b(0x174)]){const _0x32f12f=uuidRandom();mixpanel[_0x47ca1b(0x104)](_0x32f12f),updateSetting(_0x47ca1b(0x174),_0x32f12f);}}async function initSecure(){const _0x484df4=_0x47eb73;let _0x616f80=getSecure();if(!_0x616f80['hasOwnProperty'](_0x484df4(0x15f))){let _0xf8dc86=await generateKeys();_0x616f80[_0x484df4(0x233)]=_0xf8dc86['publicKey'],_0x616f80[_0x484df4(0x23b)]=_0xf8dc86['privateKey'],_0x616f80[_0x484df4(0x15f)]=crypto[_0x484df4(0x22e)](0x20)[_0x484df4(0x2a4)](_0x484df4(0x297));;storeSecure(_0x616f80);}}function getSettings(){const _0x3fb97c=_0x47eb73;return dbSettings[_0x3fb97c(0x265)](_0x3fb97c(0x1d4))[_0x3fb97c(0x13b)]()||{};}function getSecure(){const _0x5b92ca=_0x47eb73;return dbSecure[_0x5b92ca(0x265)](_0x5b92ca(0x27b))[_0x5b92ca(0x13b)]()||{};}function getBlacklist(){const _0x6ef03c=_0x47eb73;return dbSecure[_0x6ef03c(0x265)]('blacklist')[_0x6ef03c(0x13b)]()||[];}function broadcastToBots(_0x523d4c,_0x257a84){config['forEach'](_0x57b1d6=>{const _0x4bd1e4=_0x4b08;if(_0x57b1d6[_0x4bd1e4(0x124)]==_0x4bd1e4(0x267)&&_0x57b1d6[_0x4bd1e4(0x179)]==_0x4bd1e4(0x1fe)||_0x57b1d6[_0x4bd1e4(0x124)]==_0x4bd1e4(0x220)&&_0x57b1d6[_0x4bd1e4(0x179)]==_0x4bd1e4(0x1fe)){if(pid[_0x57b1d6[_0x4bd1e4(0xe4)]])pid[_0x57b1d6[_0x4bd1e4(0xe4)]][_0x4bd1e4(0xf6)]({[_0x523d4c]:_0x257a84});}});}function storeSettings(_0x13a0ba,_0x34f894=![]){const _0x5010b9=_0x47eb73;_0x13a0ba={...settings,..._0x13a0ba};if(_0x34f894&&_0x13a0ba[_0x5010b9(0xf3)]!=_0x5010b9(0x10e)&&_0x13a0ba[_0x5010b9(0xf3)]!=_0x5010b9(0x1eb)&&_0x13a0ba[_0x5010b9(0xf3)]!=''){const _0x4ec65d=crypt[_0x5010b9(0x194)](secure[_0x5010b9(0x23b)],_0x13a0ba['bbPassword'])[_0x5010b9(0x1d1)][_0x5010b9(0x29b)]('@')[0x0],_0x2e7bbe=bcrypt[_0x5010b9(0x1dd)](_0x4ec65d,saltRounds);_0x13a0ba={..._0x13a0ba,'bbPassword':_0x2e7bbe};}if(_0x34f894&&_0x13a0ba[_0x5010b9(0x17c)]!=_0x5010b9(0x10e)&&_0x13a0ba[_0x5010b9(0x17c)]!=_0x5010b9(0x1eb)&&_0x13a0ba[_0x5010b9(0x17c)]!=''){const _0x3939d1=crypt[_0x5010b9(0x194)](secure['privateKey'],_0x13a0ba[_0x5010b9(0x17c)])[_0x5010b9(0x1d1)][_0x5010b9(0x29b)]('@')[0x0];_0x13a0ba={..._0x13a0ba,'telegramToken':_0x3939d1};}const _0x1f10ca=_0x13a0ba[_0x5010b9(0x17c)]!='************'&&_0x13a0ba[_0x5010b9(0x17c)]!=settings[_0x5010b9(0x17c)]||_0x13a0ba[_0x5010b9(0x292)]!=settings[_0x5010b9(0x292)],_0x34cc25=_0x13a0ba[_0x5010b9(0x17c)]==''||_0x13a0ba[_0x5010b9(0x292)]=='';if(_0x1f10ca)_0x13a0ba['telegramEvents']=_0x5010b9(0x269);for(const [_0xd51c8b,_0x350348]of Object['entries'](_0x13a0ba)){if(_0xd51c8b==_0x5010b9(0x17c)&&_0x350348=='************'){_0x13a0ba[_0x5010b9(0x17c)]=settings['telegramToken'];continue;};if(_0xd51c8b=='bbPassword'&&_0x350348==_0x5010b9(0x10e)){_0x13a0ba[_0x5010b9(0xf3)]=settings[_0x5010b9(0xf3)];continue;};dbSettings['set'](_0x5010b9(0x250)+_0xd51c8b,_0x350348)[_0x5010b9(0x2b4)]();}settings=_0x13a0ba,io['to'](_0x5010b9(0x1c6))[_0x5010b9(0x1e0)](_0x5010b9(0x1d4),cleanSettings()),broadcastToBots('timeshift',settings[_0x5010b9(0x295)]),broadcastToBots(_0x5010b9(0x2a5),settings[_0x5010b9(0x2a5)]);if(_0x1f10ca&&!_0x34cc25)initTelegram();if(_0x1f10ca&&_0x34cc25)disableTelegram();getAllClients()[_0x5010b9(0x247)](_0x5eb7ed=>{const _0x3c4d4e=_0x5010b9;getSocket(_0x5eb7ed['id'])[_0x3c4d4e(0x1e0)](_0x3c4d4e(0x124),{'access':{'allow':![],'reason':_0x3c4d4e(0x2bb),'token':null}});});}function updateSetting(_0x51776e,_0x97c67){const _0x154031=_0x47eb73;dbSettings[_0x154031(0x201)](_0x154031(0x250)+_0x51776e,_0x97c67)[_0x154031(0x2b4)](),settings=getSettings(),io['to'](_0x154031(0x1c6))[_0x154031(0x1e0)]('settings',cleanSettings());}function storeSecure(_0x1e5a1f){const _0x355cde=_0x47eb73;dbSecure[_0x355cde(0x265)](_0x355cde(0x27b))['push'](_0x1e5a1f)['write'](),secure=_0x1e5a1f;}function addBlacklist(_0x5d2722){const _0x19f8eb=_0x47eb73;cleanBlacklist();let _0x272e92;devices[_0x5d2722][_0x19f8eb(0x1ec)]?_0x272e92=Math[_0x19f8eb(0x14c)](devices[_0x5d2722]['telegramIpApproval'][_0x19f8eb(0x198)],loginExpiry):_0x272e92=loginExpiry,dbSecure[_0x19f8eb(0x265)](_0x19f8eb(0x1ac))[_0x19f8eb(0x100)]({'expiry':new Date()[_0x19f8eb(0x10f)]()+_0x272e92*0x3c*0x3e8,'token':devices[_0x5d2722][_0x19f8eb(0x1e4)][_0x19f8eb(0x1b0)]})[_0x19f8eb(0x2b4)](),blacklist=dbSecure[_0x19f8eb(0x265)](_0x19f8eb(0x1ac))[_0x19f8eb(0x13b)]();}function _0x4b08(_0x15fb4e,_0x544357){const _0x383eb1=_0x15f7();return _0x4b08=function(_0xa1a595,_0x3f5436){_0xa1a595=_0xa1a595-0xe2;let _0x15f70b=_0x383eb1[_0xa1a595];return _0x15f70b;},_0x4b08(_0x15fb4e,_0x544357);}function cleanBlacklist(){const _0x227225=_0x47eb73;let _0x32f913=dbSecure[_0x227225(0x265)](_0x227225(0x1ac))[_0x227225(0x225)]()['value'](),_0xe231a5=new Date()[_0x227225(0x10f)]();_0x32f913[_0x227225(0x247)](_0x4d8bf5=>{const _0x3cdd8b=_0x227225;_0x4d8bf5[_0x3cdd8b(0x198)]<_0xe231a5&&dbSecure[_0x3cdd8b(0x265)]('blacklist')[_0x3cdd8b(0x1f3)]({'expiry':_0x4d8bf5['expiry']})['write']();});}function initStates(){const _0x348e4c=_0x47eb73;let _0x4af2bf=getConfiguration();_0x4af2bf[_0x348e4c(0x247)](_0x5e9874=>{const _0x3e63c6=_0x348e4c;_0x5e9874[_0x3e63c6(0x179)]=_0x3e63c6(0x286);}),storeConfiguration(_0x4af2bf);}function onKeys(){const _0x42635f=new RSA();return new Promise(_0x26e0c8=>{const _0x3e6172=_0x4b08;_0x42635f[_0x3e6172(0x200)]()['then'](_0x5ef364=>{_0x26e0c8(_0x5ef364);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x303dc4=_0x47eb73;let _0x475ede=getSettings(),_0x4bb68c=![];!_0x475ede[_0x303dc4(0x17b)](_0x303dc4(0x253))&&(_0x475ede[_0x303dc4(0x253)]=0x0,_0x4bb68c=!![]);!_0x475ede[_0x303dc4(0x17b)](_0x303dc4(0x145))&&(_0x475ede[_0x303dc4(0x145)]=0x0,_0x4bb68c=!![]);!_0x475ede[_0x303dc4(0x17b)](_0x303dc4(0x1af))&&(_0x475ede[_0x303dc4(0x1af)]=_0x303dc4(0x238),_0x4bb68c=!![]);!_0x475ede[_0x303dc4(0x17b)]('onepagemode')&&(_0x475ede[_0x303dc4(0x2a5)]=![],_0x4bb68c=!![]);if(_0x4bb68c)storeSettings(_0x475ede);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x303dc4(0x247)](_0x38316e=>{const _0x1fd015=_0x303dc4;if(!_0x38316e[_0x1fd015(0x120)]()){if(!_0x38316e[_0x1fd015(0x115)]['startsWith'](_0x1fd015(0x108)))fs[_0x1fd015(0x1b4)](configbackuppath+_0x38316e['name']);}else fs['rmSync'](configbackuppath+_0x38316e[_0x1fd015(0x115)],{'recursive':!![]});});}catch(_0x391133){logger[_0x303dc4(0x258)](_0x303dc4(0x1e8),_0x391133);}}function storeConfiguration(_0x2fb5f6){const _0x2f0cbf=_0x47eb73;dbConfig[_0x2f0cbf(0x265)](_0x2f0cbf(0x281))[_0x2f0cbf(0x1f3)]()[_0x2f0cbf(0x2b4)](),_0x2fb5f6[_0x2f0cbf(0x247)](_0x5f0ec2=>{const _0x306fb9=_0x2f0cbf;delete _0x5f0ec2[_0x306fb9(0x252)];}),dbConfig[_0x2f0cbf(0x265)](_0x2f0cbf(0x281))[_0x2f0cbf(0x100)](..._0x2fb5f6)[_0x2f0cbf(0x2b4)](),config=_0x2fb5f6;}function resetPassword(){const _0x5ee4e2=_0x47eb73;tgBot&&settings['telegramChatId']&&(tgBot[_0x5ee4e2(0x151)](_0x5ee4e2(0x19c)),tgBot[_0x5ee4e2(0x210)](settings[_0x5ee4e2(0x27f)],_0x5ee4e2(0x1ba),{'parse_mode':_0x5ee4e2(0x288),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x5ee4e2(0x2be)},{'text':'no','callback_data':'no'}]]}})[_0x5ee4e2(0x1f5)](_0x625adf=>{telegramError(_0x625adf);}),tgBot['on'](_0x5ee4e2(0x19c),async _0xb564f=>{const _0x49c386=_0x5ee4e2,_0x5e6995=_0xb564f[_0x49c386(0x20d)],_0x5697a2=_0xb564f[_0x49c386(0x1d1)];tgBot['answerCallbackQuery'](_0xb564f['id'])[_0x49c386(0x1ea)](async()=>{const _0x433fa8=_0x49c386;if(_0x5e6995!='no'){const _0x58a9ad=0xf,_0x520776='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x5e02d1=Array[_0x433fa8(0x23d)](crypto[_0x433fa8(0x244)](new Uint32Array(_0x58a9ad)))[_0x433fa8(0x101)](_0x3f694a=>_0x520776[_0x3f694a%_0x520776['length']])[_0x433fa8(0x1a4)](''),_0x5de31b=bcrypt[_0x433fa8(0x1dd)](_0x5e02d1,saltRounds);storeSettings({'bbPassword':_0x5de31b}),await tgBot[_0x433fa8(0x210)](_0x5697a2[_0x433fa8(0x22c)]['id'],_0x433fa8(0x17f)+_0x5e02d1,{'parse_mode':_0x433fa8(0x288)})[_0x433fa8(0x1f5)](_0x12a5d7=>{telegramError(_0x12a5d7);});}else await tgBot[_0x433fa8(0x210)](_0x5697a2[_0x433fa8(0x22c)]['id'],_0x433fa8(0x1e2))[_0x433fa8(0x1f5)](_0x35e11c=>{telegramError(_0x35e11c);});}),tgBot[_0x49c386(0x151)](_0x49c386(0x19c));}));}async function confirmRestore(_0x4a2b79,_0x5a1ba0){const _0x4f7de1=_0x47eb73;io['to']('botmanager')['emit'](_0x4f7de1(0xe8),_0x4f7de1(0x229),_0x4f7de1(0x271)),tgBot&&settings[_0x4f7de1(0x27f)]&&(tgBot['removeListener'](_0x4f7de1(0x19c)),await tgBot[_0x4f7de1(0x210)](settings[_0x4f7de1(0x27f)],_0x4f7de1(0x138),{'parse_mode':_0x4f7de1(0x288),'reply_markup':{'inline_keyboard':[[{'text':_0x4f7de1(0x2be),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x14f47c=>{telegramError(_0x14f47c);}),tgBot['on'](_0x4f7de1(0x19c),async _0x3b8a2d=>{const _0x3fcd64=_0x4f7de1,_0x36e871=_0x3b8a2d[_0x3fcd64(0x20d)],_0x254e60=_0x3b8a2d[_0x3fcd64(0x1d1)];tgBot[_0x3fcd64(0xf9)](_0x3b8a2d['id'])['then'](async()=>{const _0xa9a02c=_0x3fcd64;_0x36e871==_0xa9a02c(0x2be)?(await tgBot[_0xa9a02c(0x210)](_0x254e60['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0xa9a02c(0x288)})[_0xa9a02c(0x1f5)](_0x41f8be=>{telegramError(_0x41f8be);}),unzipFile(_0x4a2b79,_0x5a1ba0)):(logger[_0xa9a02c(0x258)](_0xa9a02c(0x216)),await tgBot['sendMessage'](_0x254e60[_0xa9a02c(0x22c)]['id'],_0xa9a02c(0x216))[_0xa9a02c(0x1f5)](_0xff5f84=>{telegramError(_0xff5f84);}));}),tgBot[_0x3fcd64(0x151)](_0x3fcd64(0x19c));}));}function getServerTime(){const _0x2bec1b=_0x47eb73,_0x17bdca=new Date();return _0x17bdca[_0x2bec1b(0x122)]()+'/'+(_0x17bdca['getMonth']()+0x1)[_0x2bec1b(0x2a4)]()[_0x2bec1b(0xf8)](0x2,'0')+'/'+_0x17bdca['getDate']()[_0x2bec1b(0x2a4)]()['padStart'](0x2,'0')+'\x20'+_0x17bdca['getHours']()[_0x2bec1b(0x2a4)]()['padStart'](0x2,'0')+':'+_0x17bdca[_0x2bec1b(0x1e1)]()[_0x2bec1b(0x2a4)]()[_0x2bec1b(0xf8)](0x2,'0')+':'+_0x17bdca[_0x2bec1b(0x15a)]()['toString']()[_0x2bec1b(0xf8)](0x2,'0');}function getTimeStamp(){const _0x3b5638=_0x47eb73,_0x2159f1=shiftedTime();return _0x2159f1[_0x3b5638(0x122)]()+'/'+(_0x2159f1[_0x3b5638(0x2c4)]()+0x1)['toString']()[_0x3b5638(0xf8)](0x2,'0')+'/'+_0x2159f1['getDate']()[_0x3b5638(0x2a4)]()[_0x3b5638(0xf8)](0x2,'0')+'\x20'+_0x2159f1[_0x3b5638(0x1f2)]()[_0x3b5638(0x2a4)]()['padStart'](0x2,'0')+':'+_0x2159f1[_0x3b5638(0x1e1)]()[_0x3b5638(0x2a4)]()[_0x3b5638(0xf8)](0x2,'0')+':'+_0x2159f1['getSeconds']()[_0x3b5638(0x2a4)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x3dccc0=_0x47eb73,_0x49b521=shiftedTime();return _0x49b521[_0x3dccc0(0x122)]()+(_0x49b521[_0x3dccc0(0x2c4)]()+0x1)[_0x3dccc0(0x2a4)]()['padStart'](0x2,'0')+_0x49b521[_0x3dccc0(0x1ee)]()[_0x3dccc0(0x2a4)]()[_0x3dccc0(0xf8)](0x2,'0')+'-'+_0x49b521[_0x3dccc0(0x1f2)]()[_0x3dccc0(0x2a4)]()[_0x3dccc0(0xf8)](0x2,'0')+_0x49b521[_0x3dccc0(0x1e1)]()[_0x3dccc0(0x2a4)]()['padStart'](0x2,'0')+_0x49b521[_0x3dccc0(0x15a)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x44b1a3=_0x47eb73,_0xe91023=new Date();let _0x4c3ca0=_0xe91023;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x4c3ca0=fns[_0x44b1a3(0x25e)](_0xe91023,{'hours':settings[_0x44b1a3(0x295)]});return _0x4c3ca0;}function startScheduler(){const _0xda8aa4=_0x47eb73,_0x27c2e2=new Date()[_0xda8aa4(0x155)](),_0xa9715=shiftedTime()['getHours']();_0xa9715==0x4&&backupConfigFiles();_0xa9715==0x0&&rotateLogFiles();_0x27c2e2%0x6==0x0&&triggerAnalytics();_0x27c2e2%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2f8861){const _0x9a52af=_0x47eb73;logger[_0x9a52af(0x258)](_0x9a52af(0x260)+_0x2f8861);const _0x4f76ab=getBotsWithMode();_0x4f76ab['length']>0x0?confirmRestore(configbackuppath,_0x2f8861):unzipFile(configbackuppath,_0x2f8861);}async function getBackupFiles(_0x2c533a=null){const _0x4bc567=_0x47eb73;let _0xce07dd=[],_0x5df43a=fs[_0x4bc567(0x189)](configbackuppath,{'withFileTypes':!![]});_0x5df43a[_0x4bc567(0x1e5)]((_0x25bc00,_0x8bf5d0)=>_0x25bc00[_0x4bc567(0x115)]<_0x8bf5d0['name']?0x1:_0x8bf5d0[_0x4bc567(0x115)]<_0x25bc00[_0x4bc567(0x115)]?-0x1:0x0),_0x5df43a[_0x4bc567(0x247)](_0x4e25ce=>{const _0x593aa5=_0x4bc567;if(!_0x4e25ce[_0x593aa5(0x120)]()&&_0x4e25ce[_0x593aa5(0x115)][_0x593aa5(0x177)]('backup-full@')&&_0x4e25ce[_0x593aa5(0x115)][_0x593aa5(0x130)](_0x593aa5(0xee))){const _0x102771=formatDate(fs['statSync'](configbackuppath+_0x4e25ce[_0x593aa5(0x115)])['mtime']);_0xce07dd['push']({'name':_0x4e25ce[_0x593aa5(0x115)],'mtime':_0x102771});}});if(_0x2c533a)io['to'](_0x2c533a)[_0x4bc567(0x1e0)]('backup-files',_0xce07dd);else return _0xce07dd;}async function backupConfigFiles(){const _0x1f20de=_0x47eb73;await zipFiles(_0x1f20de(0x214));const _0x209c77=getCleanTimeStamp();fs[_0x1f20de(0x13e)](zippath+_0x1f20de(0xeb),configbackuppath+('backup-full@'+_0x209c77+_0x1f20de(0xee)));let _0x5b05ca=fs[_0x1f20de(0x189)](configbackuppath,{'withFileTypes':!![]});_0x5b05ca[_0x1f20de(0x1e5)]((_0x13e185,_0x5e31d2)=>_0x13e185[_0x1f20de(0x115)]<_0x5e31d2[_0x1f20de(0x115)]?0x1:_0x5e31d2[_0x1f20de(0x115)]<_0x13e185['name']?-0x1:0x0),_0x5b05ca[_0x1f20de(0xe2)]>maxBackups&&fs[_0x1f20de(0x1b4)](configbackuppath+_0x5b05ca[_0x5b05ca[_0x1f20de(0xe2)]-0x1][_0x1f20de(0x115)]);}function rotateLogFiles(){const _0x1f88e4=_0x47eb73,_0x48c3c2=fs[_0x1f88e4(0x125)](logspath+_0x1f88e4(0x29d)),_0x12802c=_0x48c3c2[_0x1f88e4(0x293)]/0x400;if(_0x12802c>0x64){let _0x13556b=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x13556b[_0x1f88e4(0x1e5)]((_0x583305,_0x17151b)=>_0x583305['name']<_0x17151b['name']?0x1:_0x17151b[_0x1f88e4(0x115)]<_0x583305[_0x1f88e4(0x115)]?-0x1:0x0),_0x13556b[_0x1f88e4(0x247)](_0x2a3a77=>{const _0x3b4113=_0x1f88e4;if(_0x2a3a77[_0x3b4113(0x115)]==_0x3b4113(0x257))fs[_0x3b4113(0x13e)](logspath+_0x2a3a77['name'],logspath+_0x3b4113(0x203));if(_0x2a3a77[_0x3b4113(0x115)]==_0x3b4113(0x202))fs[_0x3b4113(0x13e)](logspath+_0x2a3a77['name'],logspath+'output-002.log');_0x2a3a77['name']=='output-000.log'&&(fs[_0x3b4113(0x13e)](logspath+_0x2a3a77['name'],logspath+'output-001.log'),fs['writeFileSync'](logspath+_0x2a3a77[_0x3b4113(0x115)],''));});}}async function zipFiles(_0x487890){const _0x58d197=_0x47eb73;let _0xac48b0;if(_0x487890==_0x58d197(0x2c2))_0xac48b0=logspath;if(_0x487890=='backup')_0xac48b0=configpath;if(_0x487890==_0x58d197(0x214))_0xac48b0=configpath;let _0x25fac9=fs['readdirSync'](_0xac48b0,{'withFileTypes':!![]});const _0x53c000=new require('node-zip')();_0x25fac9['forEach'](_0x4ae021=>{const _0x35e2e9=_0x58d197;if(!_0x4ae021[_0x35e2e9(0x120)]()){let _0x402f66=fs[_0x35e2e9(0x1b9)](_0xac48b0+_0x4ae021[_0x35e2e9(0x115)]);if(_0x487890=='backup'){const _0xa35e9=/^bot-[0-9]{3}-config.json$/,_0xe42c70=_0xa35e9[_0x35e2e9(0x17e)](_0x4ae021[_0x35e2e9(0x115)]);if(_0xe42c70){const _0x5adfda=JSON[_0x35e2e9(0x187)](_0x402f66);if(_0x5adfda[_0x35e2e9(0x1ab)][0x0]){_0x5adfda[_0x35e2e9(0x1ab)][0x0]['apiKey']='***',_0x5adfda[_0x35e2e9(0x1ab)][0x0]['apiSecret']=_0x35e2e9(0x1eb);if(_0x5adfda[_0x35e2e9(0x1ab)][0x0][_0x35e2e9(0x27a)])_0x5adfda['bot'][0x0][_0x35e2e9(0x27a)]='***';}_0x402f66=JSON[_0x35e2e9(0x2b9)](_0x5adfda,null,0x2);}if(_0x4ae021['name']=='bb-settings.json'){const _0x401a8f=JSON[_0x35e2e9(0x187)](_0x402f66);if(_0x401a8f[_0x35e2e9(0x1d4)]['loginRequired'])_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0x249)]=![];if(_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0xf3)])_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0xf3)]=_0x35e2e9(0x1eb);if(_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0x17c)])_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0x17c)]=_0x35e2e9(0x1eb);if(_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0x27f)])_0x401a8f[_0x35e2e9(0x1d4)][_0x35e2e9(0x27f)]=null;_0x402f66=JSON[_0x35e2e9(0x2b9)](_0x401a8f,null,0x2);}if(_0x4ae021['name']!=_0x35e2e9(0x1a3))_0x53c000[_0x35e2e9(0x227)](_0x4ae021[_0x35e2e9(0x115)],_0x402f66);}else _0x53c000[_0x35e2e9(0x227)](_0x4ae021[_0x35e2e9(0x115)],_0x402f66);}});const _0x4ec86d=_0x53c000['generate']({'base64':![],'compression':_0x58d197(0x2a0)});fs[_0x58d197(0x273)](zippath+(_0x487890+_0x58d197(0xee)),_0x4ec86d,_0x58d197(0x2b3));}async function unzipFile(_0x140b84,_0x119fb8){const _0x245594=_0x47eb73;fs[_0x245594(0x189)](configpath,{'withFileTypes':!![]})[_0x245594(0x247)](_0x115acc=>{const _0x46d9d1=_0x245594;if(!_0x115acc[_0x46d9d1(0x120)]())fs[_0x46d9d1(0x274)](configpath+_0x115acc[_0x46d9d1(0x115)]);});const _0x283ee7=fs[_0x245594(0x1b9)](_0x140b84+_0x119fb8,'binary'),_0x1eb74e=new require(_0x245594(0x25c))(_0x283ee7,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x1eb74e[_0x245594(0x282)])[_0x245594(0x247)](_0x2974bf=>{const _0x53dc35=_0x245594,_0x3f6ba2=_0x1eb74e[_0x53dc35(0x282)][_0x2974bf];fs[_0x53dc35(0x273)](configpath+_0x3f6ba2[_0x53dc35(0x115)],_0x3f6ba2['_data']);}),fs[_0x245594(0x189)](temppath,{'withFileTypes':!![]})[_0x245594(0x247)](_0xe1cf5e=>{const _0x40159b=_0x245594;if(!_0xe1cf5e[_0x40159b(0x120)]())fs['rmSync'](temppath+_0xe1cf5e[_0x40159b(0x115)]);}),logger[_0x245594(0x258)](_0x245594(0x285)),process[_0x245594(0xf6)]({'restore':!![]},_0x1e974d=>{});}async function getPublicIp(){const _0xff3cf1=_0x47eb73;try{const _0x23635c=await axios[_0xff3cf1(0x265)]('https://api.ipify.org?format=json');publicip=_0x23635c['data']['ip'];}catch(_0x5f5739){}}async function triggerAnalytics(){const _0x550243=_0x47eb73;if(!publicip)await getPublicIp();const _0x73db76=getBotsWithMode();let _0x515616=0x0;_0x73db76['forEach'](_0x3aca4a=>{const _0x2f759a=_0x4b08;if(_0x3aca4a['status']===_0x2f759a(0x267))_0x515616++;});const _0x37d901=getBotExchanges();mixpanel[_0x550243(0x13d)](_0x550243(0x153),{'distinct_id':settings[_0x550243(0x174)],'ip':publicip,'version':serverversion,'numbots':_0x73db76['length'],'numbotsenabled':_0x515616,'exchanges':_0x37d901,'environment':environment});}async function getMessages(){const _0x1d8fd6=_0x47eb73,_0x57a2b3=_0x1d8fd6(0x256),_0xda0c9f=new GraphQLClient(_0x57a2b3),_0x48e0e3={'authorization':_0x1d8fd6(0x1cf)},_0x248abe=serverversion[_0x1d8fd6(0x29b)]('.'),_0x2b6247=_0x248abe[0x0]+'.'+_0x248abe[0x1],_0x23379a=Math['min'](settings[_0x1d8fd6(0x253)],settings['lastmsgemitted']),_0xeedfd8={'last':parseInt(_0x23379a),'bbm':_0x2b6247},_0x267096=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x42eece;try{_0x42eece=await _0xda0c9f[_0x1d8fd6(0x191)](_0x267096,_0xeedfd8,_0x48e0e3);}catch(_0x4c58fa){}if(_0x42eece&&_0x42eece[_0x1d8fd6(0x29a)]){let _0x203d24=settings['lastmsgtelegram'];newMessages=[];for(const _0xd352fc of _0x42eece[_0x1d8fd6(0x29a)]){newMessages[_0x1d8fd6(0x100)](_0xd352fc);let _0x1fbf86=![];_0xd352fc[_0x1d8fd6(0x22b)]&&(updateSetting(_0x1d8fd6(0x1af),_0xd352fc[_0x1d8fd6(0x22b)]),_0x1fbf86=isNewerVersion(serverversion,_0xd352fc[_0x1d8fd6(0x22b)])||serverversion==_0xd352fc['bbvNew']);if(!_0x1fbf86&&_0xd352fc[_0x1d8fd6(0x1db)]>_0x203d24){if(_0xd352fc[_0x1d8fd6(0x1d5)]===_0x1d8fd6(0x10d)||serverversion[_0x1d8fd6(0x177)](_0xd352fc[_0x1d8fd6(0x1d5)])){let _0x3c4f1e=''+_0xd352fc[_0x1d8fd6(0x21b)]+'\x0a\x0a'+_0xd352fc[_0x1d8fd6(0x1d1)];const _0x5309a3=await sendTelegramMsg(toTelegramMarkdown(_0x3c4f1e),_0x1d8fd6(0x1e7));if(_0x5309a3)_0x203d24=_0xd352fc['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x203d24),emitMessages();}}function emitMessages(){const _0xd2281d=_0x47eb73,_0x15f56a=settings[_0xd2281d(0x145)];let _0x152986=[];newMessages['forEach'](_0xd3cc25=>{_0xd3cc25['number']>_0x15f56a&&_0x152986['push'](_0xd3cc25);}),_0x152986[_0xd2281d(0xe2)]>0x0&&getAllClients()[_0xd2281d(0x247)](_0x51c1dd=>{const _0x43bf8f=_0xd2281d;getSocket(_0x51c1dd['id'])['emit'](_0x43bf8f(0x1d1),_0x152986);});}function confirmMessage(_0x58b47d){const _0x131aa3=_0x47eb73;updateSetting(_0x131aa3(0x145),Number(_0x58b47d));}function isNewerVersion(_0x403c13,_0x108cfb){const _0x3cdb03=_0x47eb73,_0x1c68ab=_0x108cfb[_0x3cdb03(0x29b)]('.'),_0x12afa2=_0x403c13[_0x3cdb03(0x29b)]('.');for(var _0x5262c2=0x0;_0x5262c2<_0x12afa2[_0x3cdb03(0xe2)];_0x5262c2++){const _0x19d8e6=~~_0x12afa2[_0x5262c2],_0xdd8872=~~_0x1c68ab[_0x5262c2];if(_0x19d8e6>_0xdd8872)return!![];if(_0x19d8e6<_0xdd8872)return![];}return![];}function toTelegramMarkdown(_0x21b696){const _0x20d8db=_0x47eb73,_0x5222ee=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1d55d9=/\*{2}(.+?)\*{2}/gim;return _0x21b696=_0x21b696[_0x20d8db(0x190)](_0x5222ee,_0x20d8db(0x1c9))[_0x20d8db(0x190)](_0x1d55d9,_0x20d8db(0x240)),_0x21b696;}async function validateConfigFile(){const _0x701774=_0x47eb73,_0x1c40c5=dbConfig[_0x701774(0x265)](_0x701774(0x281))[_0x701774(0x192)]('botID')[_0x701774(0x13b)]()||[];if(_0x1c40c5[_0x701774(0xe2)]==0x0){let _0x107305=0x0,_0x2355e4=[];const _0x53a85a=/^bot-([0-9]{3})-config.json$/,_0xfc67da=fs[_0x701774(0x189)](configpath);_0xfc67da['forEach'](_0x5b9b24=>{const _0x493241=_0x701774,_0xadf150=_0x53a85a['exec'](_0x5b9b24);if(_0xadf150){const _0x3a309d=_0xadf150[0x1];let _0x28b6ad=getBotAttributes(_0x3a309d);_0x2355e4[_0x493241(0x100)]({'botID':_0x3a309d,'botname':_0x28b6ad[_0x493241(0x2a2)],'status':_0x493241(0x26c),'live':_0x493241(0x286)}),_0x107305++;}}),_0x107305!=0x0&&(dbConfig['get'](_0x701774(0x281))[_0x701774(0x158)](_0x2355e4)[_0x701774(0x2b4)](),config=_0x2355e4,restoredConfigFile=_0x107305);}}async function restoreConfigNotify(_0x2f906c){const _0x395cf1=_0x47eb73;let _0x35ef32;if(restoredConfigFile==0x1)_0x35ef32=_0x395cf1(0x159);else _0x35ef32=_0x395cf1(0x248);if(_0x2f906c)io['to']('botmanager')[_0x395cf1(0x1e0)](_0x395cf1(0xe8),_0x35ef32);else{logger[_0x395cf1(0x1d7)](_0x395cf1(0x129)),logger[_0x395cf1(0x1d7)](_0x35ef32),logger[_0x395cf1(0x1d7)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0x395cf1(0x27f)]&&settings['telegramEvents']!=_0x395cf1(0x14f))tgBot[_0x395cf1(0x210)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x35ef32)[_0x395cf1(0x1f5)](_0x3a8021=>{telegramError(_0x3a8021);});}}function validateCredentials(_0x16fe64,_0xd65f22){const _0x14eec1=_0x47eb73;if(_0x16fe64[_0x14eec1(0x113)]==settings[_0x14eec1(0x1bb)]&&bcrypt[_0x14eec1(0x27c)](_0x16fe64[_0x14eec1(0x178)],settings['bbPassword'])){if(settings[_0x14eec1(0x188)])return{'allow':![],'reason':_0x14eec1(0x19f),'token':null};else{const _0x240bd4=generateLoginToken(_0xd65f22);return{'allow':!![],'reason':_0x14eec1(0x111),'token':_0x240bd4};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x4e677b){const _0x52d47e=generateLoginToken(_0x4e677b);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x52d47e};}function validateAccess(_0x86a2a6,_0x5be45a,_0x3c06d5){const _0x2582e3=_0x47eb73,_0xe5db3=_0x3c06d5?_0x3c06d5:devices[_0x5be45a]['ip'];let _0x4d2b8f;const _0xa4dbe1=_0x3d07ea=>{const _0x2f4309=_0x4b08;if(settings[_0x2f4309(0x249)]){if(settings[_0x2f4309(0x188)]){if(telegram2FaApproved(_0x5be45a)){const _0x49df86=generateLoginToken(_0x5be45a);return{'allow':!![],'reason':_0x2f4309(0x2ab),'token':_0x49df86};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4d2b8f=validToken(_0x3d07ea,_0x5be45a),_0x4d2b8f[_0x2f4309(0x17b)](_0x2f4309(0x271))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3d07ea}:{'allow':![],'reason':_0x2f4309(0x2bf),'token':null};}else return{'allow':!![],'reason':_0x2f4309(0xf1),'token':null};};if(settings[_0x2582e3(0xed)]){let _0x223e64=[...settings['whitelist'],_0x2582e3(0x18c),_0x2582e3(0x20c),'127.0.0.1'];if(_0x223e64[_0x2582e3(0x12c)](_0xe5db3))return _0xa4dbe1(_0x86a2a6);else{_0x4d2b8f=validToken(_0x86a2a6,_0x5be45a);if(_0x4d2b8f[_0x2582e3(0x17b)](_0x2582e3(0x271)))return _0xa4dbe1(_0x86a2a6);else{if(telegramIpApproved(_0x5be45a)){const _0x265a63=generateToken(_0x5be45a);return _0x4d2b8f=_0xa4dbe1(_0x86a2a6),_0x4d2b8f['allow']?{'allow':!![],'reason':_0x2582e3(0x1da),'token':_0x265a63}:_0x4d2b8f;}else return settings[_0x2582e3(0x1bc)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2582e3(0x1d0),'token':null};}}}else return _0xa4dbe1(_0x86a2a6);}function timelyDecrypt(_0xf5d907,_0x1e5cda=!![]){const _0x193b03=_0x47eb73;if(_0xf5d907)try{const _0x234a6c=crypt[_0x193b03(0x194)](secure['privateKey'],_0xf5d907)[_0x193b03(0x1d1)],_0x4c06af=_0x234a6c['split']('@')[0x0],_0x2f3032=_0x234a6c['split']('@')[0x1],_0x34c477=new Date()[_0x193b03(0x10f)]();if(_0x1e5cda){if(_0x34c477-_0x2f3032<maxSecretAge*0x3e8)return _0x4c06af;else return![];}else return _0x4c06af;}catch(_0x8e3897){return![];}else return![];}function _0x15f7(){const _0x452589=['axios','args','settings','bbvReceive','lowdb','simple','api-eu.mixpanel.com','Unauthorized\x20attempt\x20to\x20add\x20bot','temporary\x20token\x20generated','number','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','hashSync','bcryptjs','storeFiat','emit','getMinutes','Password\x20reset\x20rejected','/disable\x20-\x20disable\x20notifications\x0a','access','sort','Starting\x20#RED#Balance\x20Bot\x20v','Markdown','Error\x20removing\x20old\x20backup\x20files:','3000','then','***','telegramIpApproval','delete-alerts','getDate','bb-settings.json','exp','match','getHours','remove','\x20|\x20user:\x20...','catch','Temporary\x20access\x20rejected','cancelLoading','Alerts','once','\x20minutes','25465JJgDtS','connected','pidExpireLogin','running','sha256','generateKeyPairAsync','set','output-001.log','output-003.log','referer','reset-password','/on\x20-\x20start\x20bot(s)\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/restart\x20-\x20restart\x20bot(s)\x0a','headers','address','hybrid-crypto-js','::ffff:127.0.0.1','data','pidRefreshToken','Notifications\x20disabled\x0a','sendMessage','18GCuWgt','11845ZrErUO','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','backup-full','ipv6','Restore\x20process\x20aborted','express','login','Crypt','env','title','Token\x20blacklisted','init','uuid-random','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','new','Unauthorized\x20attempt\x20to\x20get\x20events','sendPortfolioTelegram','logged\x20out','headless','cloneDeep','date-fns','file','\x20(2)','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','express-fileupload','bbvNew','chat','resetHistory','randomBytes','Unauthorized\x20attempt\x20to\x20store\x20configuration','reinstall','telegram2FaApproval','reason','publicKey','Deleted\x20Bot\x20','reset-history','function','Allow\x20login\x20from\x20IP\x20address\x20<b>','0.0.0','No\x20authentication\x20token','-performance.json','privateKey','inherit','from','verify',',\x20must\x20be\x20a\x204\x20digit\x20number','*$1*','yargs/yargs','File\x20uploaded','reject','randomFillSync','[ip-address]','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','forEach','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','loginRequired','stop','/download/:type','params','new-disabled','All','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','settings.','Logged\x20out\x20user\x20...','mode','lastmsgtelegram','build','\x20>\x20','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','output-002.log','debug','stopPolling','1090TmOfxi','Invalid\x20authentication\x20token\x20(2)','node-zip','disconnect','add','get-portfolio','Restore\x20backup\x20file\x20','telegramEvents','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Ok,\x20will\x20send\x20alert\x20notifications\x20only','get','Bot\x20','enabled','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','all','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','emitHistory','disabled','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Notifications\x20types:\x20','sign','defaults','success','All\x20bots','writeFileSync','rmSync','build2','Failed\x20to\x20download\x20','sockets','/:bot/coins','mkdirSync','apiPassword','secure','compareSync','place-order','reinstall-bb','telegramChatId','Idling\x20bot\x20\x20\x20|\x20Bot\x20','bots','files','Orders','private','Backup\x20file\x20unzipped\x20and\x20stored','stopped','clientip','HTML','Unauthorized\x20attempt\x20to\x20delete\x20bot','store-headless','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','ipaddr.js','static','Error\x20while\x20deleting\x20config\x20files:\x20','Starting\x20Balance\x20Bot\x20update','Bot\x20Mgr\x20>\x20','<b>Telegram\x20Bot\x20Status:</b>\x0a','telegramUsername','size','update','timeshift','1507624WNhXVX','hex','/:bot/history','All\x20bots\x20running\x20right\x20now','messages','split','\x1b[31m','output-000.log','internal','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','DEFLATE','Notifications\x20enabled','botname','path','toString','onepagemode','Error:\x20Invalid\x20argument\x20','warning','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','1272496PwSaLk','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','2FA\x20login\x20token\x20generated','Invalid\x20IP\x20address','get-messages','(((.+)+)+)+$','remoteAddress','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','\x20|\x20','getStartingBalances','binary','write','manual','\x1b[0m','store-settings','bb/','stringify','store-configuration','reload','isIPv4MappedAddress','isValid','yes','login\x20required','access\x20timeout','existsSync','logs','/:bot','getMonth','mixpanel','type','storeHeadless','length','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','botID','sendMetricsTelegram','telegramEnabled','post','notification','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','constructor','backup-full.zip','6968kANuTv','whitelistEnabled','.zip','add-bot','error','login\x20not\x20required','<b>Balance\x20Bot\x20Status:</b>\x0a','bbPassword','crypto','bot-','send','/status\x20-\x20show\x20bot(s)\x20status\x0a','padStart','answerCallbackQuery','#RES#\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date','alerts','keys','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20login\x20attempt\x20(timeout)','push','map','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','1678158wnnPmU','alias','showname','cancel-loading','kind','backup-full@','/names\x20-\x20show\x20bot\x20names\x0a','store','tkn','Ok,\x20will\x20send\x20order\x20notifications\x20only','any','************','getTime','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','login\x20token\x20generated','temp/','username','Invalid\x20authentication\x20token\x20(1)','name','environment','RSA','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','telegram','/metrics\x20-\x20show\x20bot\x20performance\x0a','handshake','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Notifications\x20enabled\x0a','argv','Invalid\x20Telegram\x20token','isDirectory','Access\x20enabled\x20for\x20','getFullYear','started','status','statSync','socket.io','Setting\x20access:\x20','find','-----------------------------------------------------------------------------------','socket','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','includes','Node.js\x20v','allow','Invalid\x20username\x20or\x20IP\x20address','endsWith','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','confirm-message','SIGTERM','ipc','IPv4','removeAllListeners','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','\x1b[34m','auth','value','30\x20min','track','copyFileSync','logout','temporary\x20access\x20timeout','connection','2FA\x20required','sendFile','Logged\x20in\x20user\x20...','lastmsgemitted','SIGINT','-config.json','backup/','/output-000.log','Login\x20rejected','search','max','#RES#\x20if\x20running\x20locally\x0a','update-bot','orders','uncaughtException','removeListener','use','Server','production','getUTCHours','Network\x20Interfaces:','node-telegram-bot-api','assign','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','getSeconds','1746iwejeo','log','745220hulZiZ','/off\x20-\x20stop\x20bot(s)\x0a','secret','exit','listen','download','-events.json','/:bot/support','You\x20can\x20use\x20the\x20following\x20commands:\x0a','\x1b[33m','jsonwebtoken','version','Unauthorized\x20attempt\x20to\x20confirm\x20message','config/','node','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20update\x20bot','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','NTBA_FIX_319','slice','full','clients','userid','deleteHistoryAlerts','restore-backup-file','startsWith','password','live','initclient','hasOwnProperty','telegramToken','\x1b[35m','test','Password\x20has\x20been\x20reset\x20to:\x20','range','113GQtxik','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','version.json','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','auto','index.html','parse','f2aRequired','readdirSync','onText','/enable\x20-\x20enable\x20notifications\x0a','::1','event','Unauthorized\x20attempt\x20to\x20show\x20configuration','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','replace','request','sortBy','Session\x20expired\x20for\x20user\x20...','decrypt','zip/','\x1b[36m','2FA\x20login\x20rejected','expiry','family','Unauthorized\x20attempt\x20to\x20get\x20portfolio','5\x20min','callback_query','kill','RSA-OAEP','2FA\x20login\x20required','http','/:bot/performance','\x20to\x20','bb-secure.json','join','(staging)','backupfile','filter','uuid','child_process','timestamp','bot','blacklist','404\x20Not\x20Found','Yes','latestversion','token','-results.json','Notifications\x20disabled','format','unlinkSync','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','order','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','readFileSync','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bbUsername','temporaryAccessAllowed','get-starting-balances','host','toIPv4MappedAddress','string','show','update-bb','versions','toggleBotMode','staging','botmanager','Starting\x20bot\x20|\x20Bot\x20','logs/','$1_$2_$3','polling_error','toggle-bot-mode','lowdb/adapters/FileSync','exchange','15\x20min','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','temporary\x20access\x20not\x20allowed','message'];_0x15f7=function(){return _0x452589;};return _0x15f7();}const validToken=(_0x1fc2ab,_0x59e752)=>{const _0x562d9a=_0x47eb73,_0x3ee52d=devices[_0x59e752]['ip'];if(!_0x1fc2ab)return{'error':_0x562d9a(0x239)};for(let _0x4d15ab of blacklist){if(_0x4d15ab['token']==_0x1fc2ab)return{'error':_0x562d9a(0x21c)};}let _0x3421c2;try{_0x3421c2=jwt[_0x562d9a(0x23e)](_0x1fc2ab,secure[_0x562d9a(0x15f)]+_0x59e752);}catch{return{'error':_0x562d9a(0x114)};}if(!_0x3421c2[_0x562d9a(0x17b)](_0x562d9a(0x287))&&!_0x3421c2[_0x562d9a(0x17b)](_0x562d9a(0x113))||!_0x3421c2[_0x562d9a(0x17b)](_0x562d9a(0x1f0)))return{'error':_0x562d9a(0x25b)};if(!_0x3421c2['hasOwnProperty']('username')&&_0x3421c2[_0x562d9a(0x17b)]('clientip')){const {clientip:_0x3da0b8}=_0x3421c2;return _0x3ee52d==_0x3da0b8?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x562d9a(0x2ac)};}else{if(_0x3421c2[_0x562d9a(0x17b)](_0x562d9a(0x113))&&_0x3421c2[_0x562d9a(0x17b)](_0x562d9a(0x287))){const {username:_0xd2a5e9,clientip:_0x4057db}=_0x3421c2;return settings[_0x562d9a(0x1bb)]==_0xd2a5e9&&_0x3ee52d==_0x4057db?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x562d9a(0x12f)};}}},generateLoginToken=_0x2c040a=>{const _0x426f23=_0x47eb73;if(_0x2c040a){const _0x169b2b=devices[_0x2c040a]['ip'];return jwt['sign']({'username':settings[_0x426f23(0x1bb)],'clientip':_0x169b2b},secure[_0x426f23(0x15f)]+_0x2c040a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2965bb=>{const _0x29fec7=_0x47eb73;if(_0x2965bb){const _0x4d5151=devices[_0x2965bb]['ip'];return jwt[_0x29fec7(0x26f)]({'clientip':_0x4d5151},secure[_0x29fec7(0x15f)]+_0x2965bb,{'expiresIn':devices[_0x2965bb][_0x29fec7(0x1ec)][_0x29fec7(0x198)]*0x3c});}else return![];},telegramIpApproved=_0x8d386c=>{const _0x72441e=_0x47eb73;let _0x50bd77=![];return devices[_0x8d386c][_0x72441e(0x1ec)]&&devices[_0x8d386c]['telegramIpApproval'][_0x72441e(0x198)]!=_0x72441e(0x243)&&(_0x50bd77=devices[_0x8d386c][_0x72441e(0x1ec)]['clientip']==devices[_0x8d386c]['ip']&&new Date()[_0x72441e(0x10f)]()-devices[_0x8d386c]['telegramIpApproval'][_0x72441e(0x1aa)]<devices[_0x8d386c][_0x72441e(0x1ec)][_0x72441e(0x198)]*0x3c*0x3e8),_0x50bd77;},telegram2FaApproved=_0x4b7e3c=>{const _0x46bb32=_0x47eb73;let _0x1efe51=![];return devices[_0x4b7e3c][_0x46bb32(0x231)]&&devices[_0x4b7e3c]['telegram2FaApproval'][_0x46bb32(0x198)]!='reject'&&(_0x1efe51=devices[_0x4b7e3c]['telegram2FaApproval'][_0x46bb32(0x287)]==devices[_0x4b7e3c]['ip']&&new Date()['getTime']()-devices[_0x4b7e3c]['telegram2FaApproval']['timestamp']<devices[_0x4b7e3c][_0x46bb32(0x231)][_0x46bb32(0x198)]*0x3c*0x3e8),_0x1efe51;},normalizeIP=_0x3c62e3=>{const _0x57556a=_0x47eb73;let _0x1de7a5=null,_0x3cdf09=null;if(ipaddr[_0x57556a(0x2bd)](_0x3c62e3)){const _0x5a8443=ipaddr[_0x57556a(0x187)](_0x3c62e3);_0x5a8443[_0x57556a(0x107)]()===_0x57556a(0x215)?(_0x5a8443[_0x57556a(0x2bc)]()&&(_0x1de7a5=_0x5a8443['toIPv4Address']()['toString']()),_0x3cdf09=_0x5a8443[_0x57556a(0x2a4)]()):(_0x1de7a5=_0x5a8443['toString'](),_0x3cdf09=_0x5a8443[_0x57556a(0x1bf)]()[_0x57556a(0x2a4)]());}return{'show':_0x1de7a5?_0x1de7a5:_0x3cdf09,'store':_0x3cdf09};};function formatDate(_0x39e5ba){const _0x21d426=_0x47eb73;return _0x39e5ba[_0x21d426(0x122)]()+'/'+(_0x39e5ba[_0x21d426(0x2c4)]()+0x1)['toString']()[_0x21d426(0xf8)](0x2,'0')+'/'+_0x39e5ba['getDate']()[_0x21d426(0x2a4)]()[_0x21d426(0xf8)](0x2,'0')+'\x20'+_0x39e5ba[_0x21d426(0x1f2)]()[_0x21d426(0x2a4)]()['padStart'](0x2,'0')+':'+_0x39e5ba['getMinutes']()[_0x21d426(0x2a4)]()[_0x21d426(0xf8)](0x2,'0')+':'+_0x39e5ba['getSeconds']()['toString']()['padStart'](0x2,'0');}function sleep(_0x67c5a5){return new Promise(_0x49931a=>setTimeout(_0x49931a,_0x67c5a5));}