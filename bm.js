const _0x9832a8=_0x511f;(function(_0x2e7e42,_0x4b9e3a){const _0x3ea993=_0x511f,_0x15ea57=_0x2e7e42();while(!![]){try{const _0x208744=parseInt(_0x3ea993(0x116))/0x1+parseInt(_0x3ea993(0x175))/0x2*(parseInt(_0x3ea993(0x118))/0x3)+parseInt(_0x3ea993(0x9d))/0x4+-parseInt(_0x3ea993(0xc0))/0x5*(parseInt(_0x3ea993(0xb5))/0x6)+-parseInt(_0x3ea993(0xe0))/0x7+parseInt(_0x3ea993(0xf3))/0x8+-parseInt(_0x3ea993(0xf2))/0x9;if(_0x208744===_0x4b9e3a)break;else _0x15ea57['push'](_0x15ea57['shift']());}catch(_0x563efd){_0x15ea57['push'](_0x15ea57['shift']());}}}(_0x1a77,0xc0f4c));const _0x536ef9=function(){let _0x533157=!![];return function(_0x83ab1b,_0x48f6bf){const _0x3b3797=_0x533157?function(){const _0x3075f8=_0x511f;if(_0x48f6bf){const _0x354e4f=_0x48f6bf[_0x3075f8(0x1de)](_0x83ab1b,arguments);return _0x48f6bf=null,_0x354e4f;}}:function(){};return _0x533157=![],_0x3b3797;};}(),_0x327e4c=_0x536ef9(this,function(){const _0x311986=_0x511f;return _0x327e4c[_0x311986(0xde)]()[_0x311986(0x18c)]('(((.+)+)+)+$')['toString']()['constructor'](_0x327e4c)[_0x311986(0x18c)]('(((.+)+)+)+$');});_0x327e4c();'use strict';process[_0x9832a8(0x233)][_0x9832a8(0x1e2)]=0x1;const childProcess=require(_0x9832a8(0x1a1)),fs=require('fs'),fns=require(_0x9832a8(0xef)),low=require(_0x9832a8(0x183)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x9832a8(0x19a)),crypto=require(_0x9832a8(0x15a)),Crypt=require('hybrid-crypto-js')[_0x9832a8(0xd2)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x9832a8(0x19b)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x9832a8(0x17a)][_0x9832a8(0x17b)](0x2))[_0x9832a8(0x17a)],uuidRandom=require(_0x9832a8(0x1af)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x9832a8(0x1f4)),axios=require(_0x9832a8(0x22b)),{GraphQLClient,gql}=require(_0x9832a8(0x16f)),util=require(_0x9832a8(0x11d)),fileUpload=require(_0x9832a8(0x80)),{networkInterfaces}=require('os'),PORT=argv[_0x9832a8(0x209)]||_0x9832a8(0x77),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x9832a8(0x8f)](_0x9832a8(0x1d1)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x9832a8(0xf7)](0x1));const HOST=argv['host']||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x9832a8(0x14c)][_0x9832a8(0x139)];let bbpath='bb/',bbpath2='';const botfile=_0x9832a8(0x1dc),configfile=_0x9832a8(0x185),settingsfile=_0x9832a8(0xfb),securefile=_0x9832a8(0x1db),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x9832a8(0xab)),configpath=userID?bbpath+_0x9832a8(0x20e)+userID+'/':bbpath+_0x9832a8(0x20e),configbackuppath=configpath+_0x9832a8(0x145),logspath=userID?bbpath+_0x9832a8(0x10b)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x9832a8(0x1a3)+userID+'/':bbpath+_0x9832a8(0x1a3),loggerfile=fs[_0x9832a8(0x1b8)](logspath+_0x9832a8(0x14d),{'flags':'a'}),temppath=userID?bbpath+_0x9832a8(0x194)+userID+'/':bbpath+'temp/';!fs[_0x9832a8(0x181)](configpath)&&fs[_0x9832a8(0x10c)](configpath);!fs[_0x9832a8(0x181)](configbackuppath)&&fs[_0x9832a8(0x10c)](configbackuppath);!fs[_0x9832a8(0x181)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x9832a8(0x10c)](zippath);!fs[_0x9832a8(0x181)](temppath)&&fs[_0x9832a8(0x10c)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x9832a8(0x12e)]({'bots':[]})[_0x9832a8(0x1f2)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x9832a8(0x12e)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x9832a8(0xcf),'onepagemode':![]}})[_0x9832a8(0x1f2)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x9832a8(0x12e)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x9832a8(0xeb)});const saltRounds=0xa,mixpanel=Mixpanel[_0x9832a8(0xa1)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x9832a8(0x12c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x9832a8(0x1b9)]&&settings['telegramToken']!=''&&settings[_0x9832a8(0x22e)]&&settings[_0x9832a8(0x22e)]!='')initTelegram();const parseColor=(_0x5cdbef,_0x551706)=>{const _0x5daeee=_0x9832a8,_0x59e4c0=/#[A-Z]{3}#/g;if(typeof _0x5cdbef==_0x5daeee(0x148)){!_0x551706?_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](_0x59e4c0,''):(_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](/#BLU#/g,_0x5daeee(0x19e)),_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](/#RED#/g,'\x1b[31m'),_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](/#YEL#/g,'\x1b[33m'),_0x5cdbef=_0x5cdbef['replace'](/#MAG#/g,_0x5daeee(0xff)),_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](/#CYA#/g,_0x5daeee(0x11b)),_0x5cdbef=_0x5cdbef[_0x5daeee(0x192)](/#RES#/g,_0x5daeee(0x11a)));;}return _0x5cdbef;},logger={'screen':_0x399df8=>{console['log'](parseColor(_0x399df8,!![]));},'simple':_0x18d1e6=>{const _0x14246f=_0x9832a8;console[_0x14246f(0x8f)](parseColor(_0x18d1e6,!![])),loggerfile['write'](util[_0x14246f(0xd6)](parseColor(_0x18d1e6,![]))+'\x0a');},'full':async _0x27ae45=>{const _0x3684c8=_0x9832a8,_0x34c4a6=getTimeStamp()+_0x3684c8(0x219)+_0x27ae45;console[_0x3684c8(0x8f)](parseColor(_0x34c4a6,!![])),loggerfile[_0x3684c8(0x1f2)](util[_0x3684c8(0xd6)](parseColor(_0x34c4a6,![]))+'\x0a');if(tgBot&&settings[_0x3684c8(0x241)]&&settings[_0x3684c8(0xc8)]!=_0x3684c8(0x142))await tgBot[_0x3684c8(0x173)](settings[_0x3684c8(0x241)],_0x3684c8(0x108)+parseColor(_0x27ae45,![]))['catch'](_0x2f9652=>{telegramError(_0x2f9652);});},'debug':async(_0xdadef8,_0x3cde30='')=>{const _0x455d43=_0x9832a8,_0x22b977=getTimeStamp()+_0x455d43(0x96)+_0xdadef8;if(debugging)console[_0x455d43(0x8f)](parseColor(_0x22b977,!![]));loggerfile[_0x455d43(0x1f2)](util[_0x455d43(0xd6)](parseColor(_0x22b977,![]))+'\x0a');if(_0x3cde30){if(debugging)console[_0x455d43(0x8f)](_0x3cde30);loggerfile[_0x455d43(0x1f2)](util['format'](_0x3cde30)+'\x0a');}}};process['on']('uncaughtException',function(_0xacc110){logger['simple'](_0xacc110);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x9832a8(0x1ec)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x9832a8(0xb4)),app=express(),http=require(_0x9832a8(0x1f6))[_0x9832a8(0x188)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x9832a8(0xa4)]('/download/:type',async(_0x3c0177,_0x242bff)=>{const _0x460b18=_0x9832a8,_0x561fd0=_0x3c0177[_0x460b18(0x7d)][_0x460b18(0xe4)],_0x398470=getClientsWithBotID(_0x460b18(0x9f)),_0x2a2f99=_0x3c0177[_0x460b18(0x216)][_0x460b18(0x1e6)],_0x58f797=timelyDecrypt(_0x2a2f99,![]),_0x17bca1=_0x398470['find'](_0x4fe2e4=>_0x4fe2e4[_0x460b18(0x1e6)]==_0x58f797);if(_0x17bca1){const _0x278bc0=normalizeIP(_0x3c0177[_0x460b18(0x97)][_0x460b18(0x155)])[_0x460b18(0x22c)],_0x509be1=_0x3c0177[_0x460b18(0x216)][_0x460b18(0x23b)];if(validateAccess(_0x509be1,_0x58f797,_0x278bc0)[_0x460b18(0x1be)])_0x561fd0==_0x460b18(0x127)&&await backupConfigFiles(),await zipFiles(_0x561fd0),_0x242bff[_0x460b18(0x22d)](zippath+(_0x561fd0+_0x460b18(0x93)),_0x163a6e=>{const _0x30cfc5=_0x460b18;_0x163a6e&&(logger[_0x30cfc5(0x85)](_0x30cfc5(0x10f)+_0x561fd0),logger[_0x30cfc5(0xd8)](_0x163a6e));});else logger[_0x460b18(0x85)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x561fd0+'\x20(1)');}else logger[_0x460b18(0x85)](_0x460b18(0x208)+_0x561fd0+'\x20(2)');}),app[_0x9832a8(0x122)]('/upload-backup',async(_0x18cc0a,_0x277f76)=>{const _0x1dcf21=_0x9832a8,_0x1ddd70=getClientsWithBotID(_0x1dcf21(0x9f)),_0x2d0312=_0x18cc0a[_0x1dcf21(0x216)]['uuid'],_0x59ab49=timelyDecrypt(_0x2d0312,![]),_0x59eddb=_0x1ddd70['find'](_0x156803=>_0x156803['uuid']==_0x59ab49);logger['debug'](_0x1dcf21(0xa2));if(_0x59eddb){const _0x24253d=normalizeIP(_0x18cc0a[_0x1dcf21(0x97)]['remoteAddress'])[_0x1dcf21(0x22c)],_0x855dd4=_0x18cc0a[_0x1dcf21(0x216)]['tkn'];if(validateAccess(_0x855dd4,_0x59ab49,_0x24253d)[_0x1dcf21(0x1be)]){if(_0x18cc0a[_0x1dcf21(0x177)]){const _0x5bae1f=_0x18cc0a[_0x1dcf21(0x177)][_0x1dcf21(0x1f0)];await _0x5bae1f['mv'](temppath+_0x5bae1f[_0x1dcf21(0x16c)]),_0x277f76[_0x1dcf21(0x130)]({'status':!![],'message':'File\x20uploaded'});const _0x330c8b=getBotsWithMode();_0x330c8b[_0x1dcf21(0xbe)]>0x0?confirmRestore(temppath,_0x5bae1f['name']):unzipFile(temppath,_0x5bae1f['name']);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1dcf21(0x85)](_0x1dcf21(0x1dd));}),app[_0x9832a8(0x240)](express['static'](path[_0x9832a8(0x190)](__dirname,bbpath2,_0x9832a8(0x1e9)))),app['use'](express[_0x9832a8(0x1c3)](path['join'](__dirname,bbpath2,'build'))),app[_0x9832a8(0xa4)]('/',function(_0x1d4fae,_0x2c7587){const _0x167e08=_0x9832a8;_0x2c7587['sendFile'](path[_0x167e08(0x190)](__dirname,bbpath2,_0x167e08(0x1e9),_0x167e08(0x163)));}),app['get']('/:bot',function(_0x3f3db5,_0x184e62){const _0x26661b=_0x9832a8;_0x184e62[_0x26661b(0x126)](path[_0x26661b(0x190)](__dirname,bbpath2,_0x26661b(0x134),_0x26661b(0x163)));}),app[_0x9832a8(0xa4)](_0x9832a8(0x211),(_0x312117,_0x40bf76)=>{const _0x248cc9=_0x9832a8;_0x40bf76[_0x248cc9(0x126)](path['join'](__dirname,bbpath2,_0x248cc9(0x134),'index.html'));}),app[_0x9832a8(0xa4)](_0x9832a8(0x13c),(_0x4d0e5d,_0x5b6f53)=>{const _0x1b7640=_0x9832a8;_0x5b6f53['sendFile'](path[_0x1b7640(0x190)](__dirname,bbpath2,'build','index.html'));}),app[_0x9832a8(0xa4)](_0x9832a8(0xb1),(_0x295fc8,_0x54fb39)=>{const _0x264662=_0x9832a8;_0x54fb39[_0x264662(0x126)](path[_0x264662(0x190)](__dirname,bbpath2,_0x264662(0x134),_0x264662(0x163)));}),app['get'](_0x9832a8(0xa0),(_0x1a4c86,_0x1b3670)=>{const _0x36e933=_0x9832a8;_0x1b3670[_0x36e933(0x126)](path[_0x36e933(0x190)](__dirname,bbpath2,_0x36e933(0x134),_0x36e933(0x163)));}),app['get'](_0x9832a8(0x7e),(_0x1c71fb,_0x728185)=>{const _0x2c6e71=_0x9832a8;_0x728185[_0x2c6e71(0x126)](path[_0x2c6e71(0x190)](__dirname,bbpath2,_0x2c6e71(0x134),_0x2c6e71(0x163)));}),app[_0x9832a8(0xa4)](_0x9832a8(0xed),(_0x24524b,_0x13bcfa)=>{const _0x5df56e=_0x9832a8;_0x13bcfa[_0x5df56e(0x126)](path['join'](__dirname,bbpath2,'build',_0x5df56e(0x163)));});if(HOST)http[_0x9832a8(0x12f)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});function _0x1a77(){const _0x22971a=['30\x20min','storeHeadless','auto','cancel-loading','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','2FA\x20required','index.html','exp','/status\x20-\x20show\x20bot(s)\x20status\x0a','reload','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','telegramEnabled','polling_error','Ok,\x20will\x20send\x20alert\x20notifications\x20only','telegram2FaApproval','name','404\x20Not\x20Found','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','graphql-request','All\x20bots','Unauthorized\x20attempt\x20to\x20get\x20events','Disabled\x20Bot\x20','sendMessage','[ip-address]','2QWBUBJ','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','files','restore-backup-file','Unauthorized\x20attempt\x20to\x20store\x20configuration','argv','slice','restart','map','Starting\x20Balance\x20Bot\x20reinstallation','update','Unauthorized\x20attempt\x20to\x20log\x20out','existsSync','SIGINT','lowdb','randomBytes','bb-config.json','Invalid\x20authentication\x20token\x20(2)','new-disabled','createServer','login','settings','secure','search','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','\x20to\x20','join','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','replace','All\x20bots\x20running\x20right\x20now','temp/','push','backup-full@','Password\x20reset\x20rejected','warning','notification','path','bcryptjs','f2aRequired','disconnect','\x1b[34m','endsWith','getSeconds','child_process','bbPassword','zip/','messages','data','file','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','compareSync','temporary\x20access\x20timeout','readFileSync','lastmsgtelegram','reset-history','getFullYear','uuid-random','parse','randomFillSync','timestamp','blacklist','exec','login\x20required','keys','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','createWriteStream','telegramToken','track','showConfig','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','allow','padStart','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','https://api.ipify.org?format=json','Logged\x20in\x20user\x20...','static','-events.json','alerts','\x20only\x0a','connection','resetHistory','answerCallbackQuery','output-002.log','then','yes','toggleBotMode','headless','userid','loginRequired','Error:\x20Invalid\x20argument\x20','all','botname','Allow\x20login\x20from\x20IP\x20address\x20<b>','Enabled\x20Bot\x20','rmSync','telegram','storeFiat','login\x20not\x20required','Starting\x20bot\x20|\x20Bot\x20','bb-secure.json','bot.js','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','apply','cancelLoading','apiPassword','updatebotmanager','NTBA_FIX_319','onepagemode','chat','Ok,\x20will\x20send\x20order\x20notifications\x20only','uuid','All','Token\x20blacklisted','build2','************','settings.','version','getPortfolio','max','\x20|\x20client:\x20...','backupfile','bbvReceive','write','stop','mixpanel','$1_$2_$3','http','Notifications\x20types:\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','publicKey','Deleted\x20Bot\x20','deleteHistoryAlerts','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','removeAllListeners','hashSync','Alerts','isDirectory','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','kill','/names\x20-\x20show\x20bot\x20names\x0a','any','conn','#RES#\x20if\x20running\x20locally\x0a','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20attempt\x20to\x20download\x20','port','backup-files','range','startsWith','alias','config/','binary','value','/:bot/portfolio','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','secret','show','*$1*','headers','timeshift','getTime',':\x20Bot\x20Mgr\x20>\x20','IPv4','reinstall-bb','onText','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','exchange','message','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','sendPortfolioTelegram','-performance.json','debug','match','output-001.log','temporary\x20access\x20rejected','reason','login\x20token\x20generated','Notifications\x20disabled','Invalid\x20Telegram\x20token','axios','store','download','telegramUsername','logged\x20out','showname','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','login\x20token\x20valid','env','backup-full.zip','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','\x20|\x20','telegramIpApproval','sortBy','access','verify','tkn','Unauthorized\x20attempt\x20to\x20get\x20messages','privateKey','removeListener','Login\x20rejected','use','telegramChatId','\x20|\x20user:\x20...','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','isValid','bot-','place-order','new','address','disabled',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','No\x20bots\x20running\x20right\x20now','get-messages','forEach','kind','get-starting-balances','title','apiKey','\x20mode','3000','Idling\x20bot\x20\x20\x20|\x20Bot\x20','temporary\x20access\x20not\x20allowed','auth','/disable\x20-\x20disable\x20notifications\x0a','=>\x20Go\x20to\x20#CYA#http://','params','/:bot/configuration','token','express-fileupload','Unauthorized\x20attempt\x20to\x20delete\x20bot','Notifications\x20enabled','#RES#\x20if\x20running\x20on\x20server','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','full','split','emitHistory','emit','toIPv4MappedAddress','sendMetricsTelegram','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','::1','placeOrder','log','Notifications\x20enabled\x0a','live','copyFileSync','.zip','Unauthorized\x20attempt\x20to\x20update\x20settings','temporary\x20token\x20generated',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','socket','invalid\x20credentials','function','mode','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Unauthorized\x20attempt\x20to\x20show\x20configuration','6014068tYpwWC','2FA\x20login\x20token\x20generated','botmanager','/:bot/history','init','Backup\x20file\x20uploaded','sort','get','reject','Backup\x20file\x20unzipped\x20and\x20stored','::ffff:127.0.0.1','Access\x20enabled\x20for\x20','Markdown','Session\x20expired\x20for\x20user\x20...','clients','clientip','telegrammsg','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','output-003.log','initclient','/:bot/coins','store-headless','Node.js\x20v','express','42GSglvr','Yes','readdirSync','update-bb','add-bot','running','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','No\x20authentication\x20token','pidExpireLogin','length','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','37645gJjqYb','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','stopPolling','find','username','getHours','bots','args','telegramEvents','Temporary\x20access\x20rejected','getMinutes','node-zip','You\x20can\x20use\x20the\x20following\x20commands:\x0a','show-config','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','0.0.0','Invalid\x20authentication\x20token\x20(1)','Orders','Crypt','/on\x20-\x20start\x20bot(s)\x0a','manual','catch','format','set','simple','size','Unauthorized\x20attempt\x20to\x20update\x20bot','sign','toIPv4Address','family','toString','backup-full','4819570SGGnmA','add','success','Error\x20removing\x20old\x20backup\x20files:','type','expiry','once','Password\x20has\x20been\x20reset\x20to:\x20','handshake','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','mtime','RSA-OAEP','min','/:bot/support','_data','date-fns','latestversion','stringify','20737269ezMELo','3715496IWQmDN','***','lastmsgemitted','inherit','exit','/off\x20-\x20stop\x20bot(s)\x0a','getMonth','assign','bb-settings.json','confirm-message','unlinkSync','private','\x1b[35m','password','hex','statSync','number','callback_query','delete-bot','reinstall','error','Bot\x20Mgr\x20>\x20','stopped','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','logs/','mkdirSync','output-000.log','get-logs','Failed\x20to\x20download\x20','2FA\x20login\x20required','enabled','sockets','started','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','127.0.0.1','425797UhXPys','get-portfolio','4325853yeeLit','Starting\x20new\x20bot\x20|\x20Bot\x20','\x1b[0m','\x1b[36m','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','util','generate','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Unauthorized\x20attempt\x20to\x20confirm\x20message','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','post','bbvNew','connected','botID','sendFile','backup','status','Notifications\x20disabled\x0a','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','filter','api-eu.mixpanel.com','HTML','defaults','listen','send','logs','\x20>\x20','-results.json','build','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','writeFileSync','update-bot','store-settings','node','decrypt','get-backup-files','/:bot/performance','Bot\x20','2FA','Logged\x20out\x20user\x20...','referer','hasOwnProperty','orders','ipc','Login\x20accepted','backup/','<b>Telegram\x20Bot\x20Status:</b>\x0a','from','string','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Restoring\x20bot(s)\x20from\x20backup','Restore\x20backup\x20file\x20','versions','/output-000.log','remove','-config.json','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','bot','User\x20has\x20been\x20validated','pidRefreshToken','test','remoteAddress','2FA\x20login\x20rejected','isIPv4MappedAddress','cloneDeep','getDate','crypto','order','fork'];_0x1a77=function(){return _0x22971a;};return _0x1a77();}init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x6400d9=_0x9832a8;let _0x396b0e=_0x6400d9(0x174);const _0xcaa71e=networkInterfaces(),_0x3f3735={};for(const _0x55ea2d of Object[_0x6400d9(0x1b6)](_0xcaa71e)){for(const _0x51821d of _0xcaa71e[_0x55ea2d]){if((_0x51821d[_0x6400d9(0xdd)]==_0x6400d9(0x21a)||_0x51821d[_0x6400d9(0xdd)]==0x4)&&!_0x51821d['internal']){const _0x5a5793=ipaddr[_0x6400d9(0x1b0)](_0x51821d[_0x6400d9(0x6c)])[_0x6400d9(0x20b)]();_0x5a5793!=_0x6400d9(0xfe)&&(!_0x3f3735[_0x55ea2d]&&(_0x3f3735[_0x55ea2d]=[]),_0x3f3735[_0x55ea2d][_0x6400d9(0x195)](_0x51821d[_0x6400d9(0x6c)]),_0x396b0e=_0x51821d[_0x6400d9(0x6c)]);}}}return{'serverip':_0x396b0e,'netinterfaces':_0x3f3735};}async function startServer(){const _0x65d9fc=_0x9832a8,{serverip:_0x4a3f78,netinterfaces:_0x2e3083}=getServerIP();logger[_0x65d9fc(0xd8)](''),logger[_0x65d9fc(0xd8)](_0x65d9fc(0x8b)),await logger[_0x65d9fc(0x85)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x0a'+(_0x65d9fc(0x1bc)+PORT+_0x65d9fc(0x206))+(_0x65d9fc(0x7c)+_0x4a3f78+':'+PORT+_0x65d9fc(0x83))),logger['simple'](_0x65d9fc(0x8b));if(config['length']!=0x0)for(const _0xe1987d of config){if(_0xe1987d[_0x65d9fc(0x128)]=='enabled'||_0xe1987d[_0x65d9fc(0x128)]==_0x65d9fc(0x6b))await logger['full'](_0x65d9fc(0x1da)+_0xe1987d[_0x65d9fc(0x125)]+_0x65d9fc(0x236)+_0xe1987d[_0x65d9fc(0x1d3)]),startBot([_0xe1987d['botID'],userID],{'cwd':bbpath},function(_0x1b8b14){const _0x1e9448=_0x65d9fc;if(_0x1b8b14)logger[_0x1e9448(0x85)](_0x1b8b14);});else(_0xe1987d[_0x65d9fc(0x128)]==_0x65d9fc(0x6d)||_0xe1987d[_0x65d9fc(0x128)]==_0x65d9fc(0x187))&&await logger[_0x65d9fc(0x85)](_0x65d9fc(0x78)+_0xe1987d[_0x65d9fc(0x125)]+_0x65d9fc(0x236)+_0xe1987d[_0x65d9fc(0x1d3)]);}else!newBot&&logger[_0x65d9fc(0xd8)](_0x65d9fc(0x231));if(newBot)addBot();logger[_0x65d9fc(0xd8)](_0x65d9fc(0x8b)),logger[_0x65d9fc(0xd8)](''),await logger[_0x65d9fc(0x223)](_0x65d9fc(0xb3)+nodeversion),await logger[_0x65d9fc(0x223)]('Network\x20Interfaces:',_0x2e3083);}function _0x511f(_0x866a60,_0x3ba42d){const _0x294fc1=_0x1a77();return _0x511f=function(_0x327e4c,_0x536ef9){_0x327e4c=_0x327e4c-0x6a;let _0x1a7753=_0x294fc1[_0x327e4c];return _0x1a7753;},_0x511f(_0x866a60,_0x3ba42d);}function startSocket(){const _0x40814b=_0x9832a8;io['on'](_0x40814b(0x1c7),_0x157e22=>{const _0x483c43=_0x40814b;let _0x10a049,_0x17d5cc,_0x4afff1,_0x3d3a20,_0x3092e0;const _0x4ff510=_0x157e22[_0x483c43(0xe8)]['headers'][_0x483c43(0x140)];_0x17d5cc=_0x4ff510[_0x483c43(0x224)](/bot[0-9]{3}/);if(_0x17d5cc)_0x4afff1=_0x17d5cc[0x0][_0x483c43(0x224)](/[0-9]{3}/);if(_0x4afff1)_0x10a049=_0x4afff1[0x0];else _0x10a049=_0x483c43(0x9f);const _0x29b0c4=_0x157e22[_0x483c43(0xe8)][_0x483c43(0x7a)]['encryptedUuid'];if(!_0x29b0c4)_0x157e22[_0x483c43(0x88)](_0x483c43(0x128),{'publicKey':secure['publicKey']});else{_0x3d3a20=timelyDecrypt(_0x29b0c4,![]);if(!_0x3d3a20)_0x157e22['emit'](_0x483c43(0x128),{'publicKey':secure[_0x483c43(0x1f9)]});else{_0x3092e0=normalizeIP(_0x157e22[_0x483c43(0x205)]['remoteAddress'])[_0x483c43(0x22c)];if(!devices[_0x3d3a20])devices[_0x3d3a20]={'uuid':_0x3d3a20,'access':{'token':null}};devices[_0x3d3a20]['ip']=_0x3092e0;const _0x15c1a8=addClient(_0x157e22['id'],_0x3d3a20,_0x10a049);setAccess(_0x15c1a8),emitMessages(),_0x157e22['on'](_0x483c43(0x189),_0x2a8b6c=>{const _0x20438f=_0x483c43,_0xab8560=timelyDecrypt(_0x2a8b6c[_0x20438f(0x100)]);if(_0xab8560){_0x2a8b6c={'username':_0x2a8b6c[_0x20438f(0xc4)],'password':_0xab8560},devices[_0x3d3a20][_0x20438f(0x239)]=validateCredentials(_0x2a8b6c,_0x3d3a20);if(devices[_0x3d3a20][_0x20438f(0x239)][_0x20438f(0x1be)]==![]&&devices[_0x3d3a20][_0x20438f(0x239)]['reason']==_0x20438f(0x110))_0x157e22['emit']('status',{'access':devices[_0x3d3a20][_0x20438f(0x239)]}),loginAccess2FA(_0x3d3a20,_0x3092e0);else{if(devices[_0x3d3a20][_0x20438f(0x239)][_0x20438f(0x1be)]==![]&&devices[_0x3d3a20]['access'][_0x20438f(0x227)]=='invalid\x20credentials')_0x157e22[_0x20438f(0x88)](_0x20438f(0x128),{'access':devices[_0x3d3a20][_0x20438f(0x239)]});else devices[_0x3d3a20][_0x20438f(0x239)][_0x20438f(0x1be)]&&devices[_0x3d3a20][_0x20438f(0x239)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x3d3a20)['forEach'](_0x55aacc=>{setAccess(_0x55aacc);}),logger['debug'](_0x20438f(0x1c2)+_0x3d3a20['slice'](-0x8)),setTokenRefresh(_0x3d3a20),setSessionTimeout(_0x20438f(0x189),_0x3d3a20));}}else logger[_0x20438f(0x85)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x157e22['on']('reset-password',()=>{resetPassword();}),_0x157e22['on']('disconnect',_0x5e3541=>{removeClient(_0x157e22['id']);}),_0x10a049==_0x483c43(0x9f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x39b34d){const _0x191773=_0x9832a8;if(_0x39b34d!=_0x191773(0x9f)&&config[_0x191773(0x75)]!=''){if(pid[_0x39b34d])pid[_0x39b34d][_0x191773(0x130)]({'function':_0x191773(0xb0),'args':null});}_0x39b34d!=_0x191773(0x9f)&&broadcastToBots(_0x191773(0xc6),JSON[_0x191773(0xf1)](config));}function reloadBotManager(){const _0x53253e=_0x9832a8;getClientsWithBotID(_0x53253e(0x9f))[_0x53253e(0x71)](_0x4e18ab=>{const _0x4a2b1d=_0x53253e;getSocket(_0x4e18ab['id'])[_0x4a2b1d(0x88)](_0x4a2b1d(0x128),{'access':{'allow':![],'reason':_0x4a2b1d(0x166),'token':null}});});}function getSocket(_0x5f5dde){const _0x244fe7=_0x9832a8;return io[_0x244fe7(0x112)][_0x244fe7(0x112)][_0x244fe7(0xa4)](_0x5f5dde);}function setAccess(_0x3dc57e){const _0x3ef7ec=_0x9832a8,_0x1e4010=getSocket(_0x3dc57e['id']),_0x3415a2=_0x3dc57e[_0x3ef7ec(0x1e6)],_0x2820b3=_0x3dc57e[_0x3ef7ec(0x151)];devices[_0x3415a2][_0x3ef7ec(0x239)]=validateAccess(devices[_0x3415a2]['access'][_0x3ef7ec(0x7f)],_0x3415a2),logger[_0x3ef7ec(0x223)]('Setting\x20access:\x20'+devices[_0x3415a2]['access'][_0x3ef7ec(0x227)]+_0x3ef7ec(0x1ef)+_0x3dc57e['id'][_0x3ef7ec(0x17b)](-0x8)+_0x3ef7ec(0x242)+_0x3415a2[_0x3ef7ec(0x17b)](-0x8)),_0x1e4010[_0x3ef7ec(0x190)](_0x3415a2);if(devices[_0x3415a2][_0x3ef7ec(0x239)][_0x3ef7ec(0x1be)]){_0x1e4010[_0x3ef7ec(0x190)](_0x2820b3);if(_0x2820b3==_0x3ef7ec(0x9f))initializeSocketBotManager(_0x1e4010);else initializeSocketBot(_0x1e4010);initClient(_0x2820b3);}devices[_0x3415a2]['access']['token']&&devices[_0x3415a2][_0x3ef7ec(0x239)][_0x3ef7ec(0x227)]==_0x3ef7ec(0x95)&&setSessionTimeout(_0x3ef7ec(0x13e),_0x3415a2),devices[_0x3415a2][_0x3ef7ec(0x239)]['token']&&devices[_0x3415a2]['access']['reason']==_0x3ef7ec(0x9e)&&setSessionTimeout('login',_0x3415a2),_0x1e4010[_0x3ef7ec(0x88)]('status',{'status':_0x3dc57e['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3415a2][_0x3ef7ec(0x239)],'externalip':devices[_0x3415a2]['ip'],'publicKey':secure[_0x3ef7ec(0x1f9)],'userid':settings[_0x3ef7ec(0x1cf)],'validInstallation':validInstallation}),devices[_0x3415a2][_0x3ef7ec(0x239)][_0x3ef7ec(0x1be)]==![]&&devices[_0x3415a2][_0x3ef7ec(0x239)][_0x3ef7ec(0x227)]==_0x3ef7ec(0x162)&&temporaryAccess2FA(_0x3415a2,devices[_0x3415a2]['ip']);}function setSessionTimeout(_0x441e35,_0x175b09){const _0x4f56a1=_0x9832a8;let _0x3596b8;if(_0x441e35==_0x4f56a1(0x189))_0x3596b8=loginExpiry*0x3c*0x3e8;else _0x3596b8=devices[_0x175b09][_0x4f56a1(0x237)][_0x4f56a1(0xe5)]*0x3c*0x3e8-(new Date()[_0x4f56a1(0x218)]()-devices[_0x175b09][_0x4f56a1(0x237)]['timestamp']);if(devices[_0x175b09][_0x4f56a1(0xbd)])clearTimeout(devices[_0x175b09][_0x4f56a1(0xbd)]);devices[_0x175b09][_0x4f56a1(0xbd)]=setTimeout(()=>{const _0x18e46b=_0x4f56a1;if(devices[_0x175b09][_0x18e46b(0x153)])clearTimeout(devices[_0x175b09]['pidRefreshToken']);removeSocketListeners(_0x175b09),addBlacklist(_0x175b09),devices[_0x175b09][_0x18e46b(0x237)]=null,devices[_0x175b09][_0x18e46b(0x16b)]=null,devices[_0x175b09][_0x18e46b(0x239)]['token']=null,logger[_0x18e46b(0x223)](_0x18e46b(0xaa)+_0x175b09['slice'](-0x8)),devices[_0x175b09][_0x18e46b(0x239)]=validateAccess(devices[_0x175b09][_0x18e46b(0x239)]['token'],_0x175b09),!(devices[_0x175b09][_0x18e46b(0x239)][_0x18e46b(0x1be)]&&devices[_0x175b09][_0x18e46b(0x239)][_0x18e46b(0x227)]==_0x18e46b(0x1d9))&&(_0x441e35==_0x18e46b(0x189)?io['to'](_0x175b09)['emit'](_0x18e46b(0x128),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x175b09)[_0x18e46b(0x88)]('status',{'access':{'allow':![],'reason':_0x18e46b(0x1aa),'token':null}})),devices[_0x175b09][_0x18e46b(0x239)][_0x18e46b(0x7f)]=null;},_0x3596b8);}function setTokenRefresh(_0xe3977f){const _0x594c39=_0x9832a8;if(devices[_0xe3977f]['pidRefreshToken'])clearTimeout(devices[_0xe3977f][_0x594c39(0x153)]);devices[_0xe3977f][_0x594c39(0x153)]=setTimeout(()=>{const _0x498c80=_0x594c39;getClientsWithUuid(_0xe3977f)[_0x498c80(0xbe)]!=0x0?(devices[_0xe3977f][_0x498c80(0x239)]=refreshToken(_0xe3977f),io['to'](_0xe3977f)[_0x498c80(0x88)](_0x498c80(0x128),{'status':_0x498c80(0x124),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xe3977f][_0x498c80(0x239)],'externalip':devices[_0xe3977f]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xe3977f)):clearTimeout(devices[_0xe3977f][_0x498c80(0x153)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2d41d4){const _0x38c1d9=_0x9832a8,_0x3be929=getClient(_0x2d41d4['id'])['uuid'];_0x2d41d4[_0x38c1d9(0x88)]('bots',config),_0x2d41d4[_0x38c1d9(0x88)](_0x38c1d9(0x18a),cleanSettings()),_0x2d41d4['on'](_0x38c1d9(0xb9),_0x253cdb=>{const _0x3d71cf=_0x38c1d9;if(validateAccess(_0x253cdb,_0x3be929)[_0x3d71cf(0x1be)])addBot();else logger[_0x3d71cf(0x85)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x2d41d4['on'](_0x38c1d9(0x137),(_0x2dd128,_0x5ac482)=>{const _0x29e492=_0x38c1d9;if(validateAccess(_0x5ac482,_0x3be929)[_0x29e492(0x1be)])toggleBot(_0x2dd128['botID'],_0x2dd128[_0x29e492(0x128)],_0x2dd128[_0x29e492(0x91)]);else logger[_0x29e492(0x85)](_0x29e492(0xda));}),_0x2d41d4['on']('toggle-bot-mode',(_0x3b46af,_0x36665c)=>{const _0x492b16=_0x38c1d9;if(validateAccess(_0x36665c,_0x3be929)[_0x492b16(0x1be)])toggleBotMode(_0x3b46af);else logger[_0x492b16(0x85)](_0x492b16(0xda));}),_0x2d41d4['on'](_0x38c1d9(0x105),(_0x1a84ec,_0x15fac7)=>{const _0x1a6607=_0x38c1d9;if(validateAccess(_0x15fac7,_0x3be929)['allow'])deleteBot(_0x1a84ec);else logger['full'](_0x1a6607(0x81));}),_0x2d41d4['on'](_0x38c1d9(0x138),(_0x56e415,_0xd57bd)=>{const _0x415133=_0x38c1d9;if(validateAccess(_0xd57bd,_0x3be929)['allow'])storeSettings(_0x56e415,!![]);else logger[_0x415133(0x85)](_0x415133(0x94));}),_0x2d41d4['on'](_0x38c1d9(0xb8),_0x289e21=>{const _0x460cb4=_0x38c1d9;if(validateAccess(_0x289e21,_0x3be929)['allow'])updateBB(_0x460cb4(0x17f));else logger[_0x460cb4(0x85)](_0x460cb4(0x201));}),_0x2d41d4['on'](_0x38c1d9(0x21b),_0x1624ee=>{const _0x57ebc0=_0x38c1d9;if(validateAccess(_0x1624ee,_0x3be929)[_0x57ebc0(0x1be)])updateBB(_0x57ebc0(0x106));else logger[_0x57ebc0(0x85)](_0x57ebc0(0xe9));}),_0x2d41d4['on'](_0x38c1d9(0x13b),_0x18a618=>{const _0x3c0475=_0x38c1d9;if(validateAccess(_0x18a618,_0x3be929)[_0x3c0475(0x1be)]){const _0x188d70=getClient(_0x2d41d4['id']);if(_0x188d70)getBackupFiles(_0x188d70[_0x3c0475(0x1e6)]);else logger['full'](_0x3c0475(0x150));}else logger[_0x3c0475(0x85)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x2d41d4['on'](_0x38c1d9(0x178),(_0x5ac765,_0x5ebea9)=>{const _0x4c95cb=_0x38c1d9;if(validateAccess(_0x5ebea9,_0x3be929)[_0x4c95cb(0x1be)])restoreBackupFile(_0x5ac765);else logger[_0x4c95cb(0x85)](_0x4c95cb(0x235));}),_0x2d41d4['on'](_0x38c1d9(0x70),_0x508738=>{const _0x2a2680=_0x38c1d9;if(validateAccess(_0x508738,_0x3be929)['allow'])getMessages();else logger[_0x2a2680(0x85)](_0x2a2680(0x23c));}),_0x2d41d4['on'](_0x38c1d9(0xfc),(_0x4c0a9e,_0x243ed6)=>{const _0x47d89f=_0x38c1d9;if(validateAccess(_0x243ed6,_0x3be929)[_0x47d89f(0x1be)])confirmMessage(_0x4c0a9e);else logger[_0x47d89f(0x85)](_0x47d89f(0x120));}),_0x2d41d4['on']('logout',_0x42ee00=>{const _0x1b8678=_0x38c1d9;if(validateAccess(_0x42ee00,_0x3be929)[_0x1b8678(0x1be)]){if(devices[_0x3be929]['pidRefreshToken'])clearTimeout(devices[_0x3be929][_0x1b8678(0x153)]);if(devices[_0x3be929][_0x1b8678(0xbd)])clearTimeout(devices[_0x3be929]['pidExpireLogin']);removeSocketListeners(getClient(_0x2d41d4['id'])[_0x1b8678(0x1e6)]),addBlacklist(_0x3be929),devices[_0x3be929][_0x1b8678(0x237)]=null,devices[_0x3be929][_0x1b8678(0x16b)]=null,devices[_0x3be929][_0x1b8678(0x239)][_0x1b8678(0x7f)]=null,logger[_0x1b8678(0x223)](_0x1b8678(0x13f)+_0x3be929[_0x1b8678(0x17b)](-0x8)),io['to'](getClient(_0x2d41d4['id'])[_0x1b8678(0x1e6)])['emit']('status',{'access':{'allow':![],'reason':_0x1b8678(0x22f),'token':null}});}else logger[_0x1b8678(0x85)](_0x1b8678(0x180));});}function initializeSocketBot(_0xd180a2){const _0x3e08fc=_0x9832a8,_0x27915b=getClient(_0xd180a2['id'])['bot'],_0x4e1f91=getClient(_0xd180a2['id'])['uuid'];_0xd180a2['on'](_0x3e08fc(0x10e),(_0x47f4b7,_0x191fb2)=>{const _0x1581c4=_0x3e08fc;if(validateAccess(_0x191fb2,_0x4e1f91)['allow']){if(pid[_0x27915b])pid[_0x27915b][_0x1581c4(0x130)]({'function':_0x1581c4(0x87),'args':_0x47f4b7});}else logger[_0x1581c4(0x85)](_0x1581c4(0x171));}),_0xd180a2['on']('delete-alerts',(_0x48ea9e,_0x34527c)=>{const _0x3b6b24=_0x3e08fc;if(validateAccess(_0x34527c,_0x4e1f91)[_0x3b6b24(0x1be)]){if(pid[_0x27915b])pid[_0x27915b][_0x3b6b24(0x130)]({'function':_0x3b6b24(0x1fb),'args':_0x48ea9e});}else logger[_0x3b6b24(0x85)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0xd180a2['on'](_0x3e08fc(0x117),(_0x5211b4,_0x2457b4)=>{const _0x337a84=_0x3e08fc;if(validateAccess(_0x2457b4,_0x4e1f91)[_0x337a84(0x1be)]){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':_0x337a84(0x1ed),'args':_0x5211b4});}else logger['full'](_0x337a84(0x9b));}),_0xd180a2['on']('store-configuration',(_0x19cbf8,_0x1f38e0)=>{const _0x988c2a=_0x3e08fc;if(validateAccess(_0x1f38e0,_0x4e1f91)[_0x988c2a(0x1be)]){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':'storeConfiguration','args':_0x19cbf8});}else logger[_0x988c2a(0x85)](_0x988c2a(0x179));}),_0xd180a2['on'](_0x3e08fc(0xb2),(_0x5c6917,_0x318f07)=>{const _0x5d21e2=_0x3e08fc;if(validateAccess(_0x318f07,_0x4e1f91)['allow']){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':_0x5d21e2(0x15e),'args':_0x5c6917});}else logger[_0x5d21e2(0x85)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0xd180a2['on']('store-fiat',(_0x3c11d7,_0x1bab6e)=>{const _0x3b295f=_0x3e08fc;if(validateAccess(_0x1bab6e,_0x4e1f91)['allow']){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':_0x3b295f(0x1d8),'args':_0x3c11d7});}else logger[_0x3b295f(0x85)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0xd180a2['on'](_0x3e08fc(0x1ad),_0x514e83=>{const _0x14297b=_0x3e08fc;if(validateAccess(_0x514e83,_0x4e1f91)[_0x14297b(0x1be)]){if(pid[_0x27915b])pid[_0x27915b][_0x14297b(0x130)]({'function':_0x14297b(0x1c8),'args':null});}else logger[_0x14297b(0x85)](_0x14297b(0x11f));}),_0xd180a2['on'](_0x3e08fc(0x73),_0x92b6dd=>{const _0x1d97be=_0x3e08fc;if(validateAccess(_0x92b6dd,_0x4e1f91)[_0x1d97be(0x1be)]){if(pid[_0x27915b])pid[_0x27915b][_0x1d97be(0x130)]({'function':'getStartingBalances','args':null});}else logger[_0x1d97be(0x85)](_0x1d97be(0x8c));}),_0xd180a2['on'](_0x3e08fc(0x6a),(_0x33305d,_0x2aa3fc)=>{const _0x5d94d1=_0x3e08fc;if(validateAccess(_0x2aa3fc,_0x4e1f91)[_0x5d94d1(0x1be)]){if(pid[_0x27915b])pid[_0x27915b][_0x5d94d1(0x130)]({'function':_0x5d94d1(0x8e),'args':_0x33305d});}else logger[_0x5d94d1(0x85)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0xd180a2['on'](_0x3e08fc(0x160),_0x11fa6d=>{const _0x44d64f=_0x3e08fc;if(validateAccess(_0x11fa6d,_0x4e1f91)[_0x44d64f(0x1be)]){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':_0x44d64f(0x1df),'args':null});}else logger['full'](_0x44d64f(0x16e));}),_0xd180a2['on'](_0x3e08fc(0xcd),_0x45d4cd=>{const _0x431fee=_0x3e08fc;if(validateAccess(_0x45d4cd,_0x4e1f91)[_0x431fee(0x1be)]){if(pid[_0x27915b])pid[_0x27915b]['send']({'function':_0x431fee(0x1bb),'args':null});}else logger[_0x431fee(0x85)](_0x431fee(0x9c));}),_0xd180a2['on'](_0x3e08fc(0xb8),_0x6fcae4=>{const _0x4001cd=_0x3e08fc;if(validateAccess(_0x6fcae4,_0x4e1f91)[_0x4001cd(0x1be)])updateBB('update');else logger[_0x4001cd(0x85)](_0x4001cd(0x201));}),_0xd180a2['on'](_0x3e08fc(0x70),_0x2a7bde=>{const _0x447ddf=_0x3e08fc;if(validateAccess(_0x2a7bde,_0x4e1f91)[_0x447ddf(0x1be)])getMessages();else logger[_0x447ddf(0x85)](_0x447ddf(0x23c));}),_0xd180a2['on'](_0x3e08fc(0xfc),(_0x5207cd,_0x4adec1)=>{const _0x2a3213=_0x3e08fc;if(validateAccess(_0x4adec1,_0x4e1f91)[_0x2a3213(0x1be)])confirmMessage(_0x5207cd);else logger[_0x2a3213(0x85)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0xd180a2['on']('logout',_0x425f05=>{const _0x311cf4=_0x3e08fc;if(validateAccess(_0x425f05,_0x4e1f91)[_0x311cf4(0x1be)]){if(devices[_0x4e1f91][_0x311cf4(0x153)])clearTimeout(devices[_0x4e1f91][_0x311cf4(0x153)]);if(devices[_0x4e1f91][_0x311cf4(0xbd)])clearTimeout(devices[_0x4e1f91]['pidExpireLogin']);removeSocketListeners(getClient(_0xd180a2['id'])['uuid']),addBlacklist(_0x4e1f91),devices[_0x4e1f91]['telegramIpApproval']=null,devices[_0x4e1f91][_0x311cf4(0x16b)]=null,devices[_0x4e1f91][_0x311cf4(0x239)][_0x311cf4(0x7f)]=null,logger['debug'](_0x311cf4(0x13f)+_0x4e1f91[_0x311cf4(0x17b)](-0x8)),io['to'](getClient(_0xd180a2['id'])['uuid'])[_0x311cf4(0x88)](_0x311cf4(0x128),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x311cf4(0x85)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x177cbd){getClientsWithUuid(_0x177cbd)['forEach'](_0x28084b=>{const _0x15c025=_0x511f;getSocket(_0x28084b['id'])[_0x15c025(0x1fd)]();});}function cleanSettings(){const _0x22cb54=_0x9832a8;let _0x271d0c=settings;return settings[_0x22cb54(0x1b9)]&&settings[_0x22cb54(0x1b9)]!=''&&(_0x271d0c={..._0x271d0c,'telegramToken':_0x22cb54(0x1ea)}),settings[_0x22cb54(0x1a2)]&&settings[_0x22cb54(0x1a2)]!=''&&(_0x271d0c={..._0x271d0c,'bbPassword':_0x22cb54(0x1ea)}),(settings['bbPassword']&&settings[_0x22cb54(0x1a2)]==_0x22cb54(0xf4)||settings[_0x22cb54(0x1b9)]&&settings['telegramToken']==_0x22cb54(0xf4))&&(_0x271d0c={..._0x271d0c,'restored':{'password':settings['bbPassword']==_0x22cb54(0xf4),'telegram':settings['telegramToken']==_0x22cb54(0xf4)}}),_0x271d0c;}async function updateBB(_0x229af6){const _0x719e60=_0x9832a8;await backupConfigFiles(),installingUpdate=!![],config[_0x719e60(0x71)](_0xd91886=>{const _0x7bd73d=_0x719e60;restartBot(_0xd91886[_0x7bd73d(0x125)]);}),logger[_0x719e60(0x223)]('Starting\x20Balance\x20Bot\x20'+_0x229af6);if(_0x229af6=='update')process[_0x719e60(0x130)]({'update':!![]},_0x3b47cc=>{});else _0x229af6==_0x719e60(0x106)&&process[_0x719e60(0x130)]({'reinstall':!![]},_0x76bba3=>{});}function startBot(_0x43fdd6,_0x3b326e,_0x1d2c2b){const _0x21c8c6=_0x9832a8;if(debugging)_0x43fdd6[_0x21c8c6(0x195)]('-d');let _0x1415e3=![];const _0x2764d2=_0x43fdd6[0x0];_0x3b326e={..._0x3b326e,'stdio':[_0x21c8c6(0xf6),'inherit','inherit',_0x21c8c6(0x143)]},pid[_0x2764d2]=childProcess[_0x21c8c6(0x15c)](botfile,_0x43fdd6,_0x3b326e),pid[_0x2764d2]['on'](_0x21c8c6(0x21f),_0x1fd4af=>{const _0x33a5e3=_0x21c8c6;switch(Object[_0x33a5e3(0x1b6)](_0x1fd4af)[0x0]){case'botname':updateBotName(_0x2764d2,_0x1fd4af[_0x33a5e3(0x1d3)]);break;case _0x33a5e3(0x1e1):updateBotManager();break;case _0x33a5e3(0x128):updateStatus(_0x2764d2,_0x1fd4af['status']);break;case'live':updateLive(_0x2764d2,_0x1fd4af[_0x33a5e3(0x91)]);break;case'started':updateLive(_0x2764d2,_0x1fd4af[_0x33a5e3(0x113)]),io['to'](_0x2764d2)[_0x33a5e3(0x88)](_0x33a5e3(0x128),{'access':{'allow':![],'reason':_0x33a5e3(0x166),'token':null}});break;case _0x33a5e3(0x1f3):_0x1fd4af[_0x33a5e3(0x1f3)]==_0x33a5e3(0x17c)&&restartBot(_0x2764d2);_0x1fd4af[_0x33a5e3(0x1f3)]==_0x33a5e3(0x202)&&toggleBot(_0x2764d2,_0x33a5e3(0x6d),_0x33a5e3(0x109));break;case _0x33a5e3(0x1d7):sendTelegram(_0x2764d2,_0x1fd4af[_0x33a5e3(0x1d7)]);break;case _0x33a5e3(0xad):sendTelegramMsg(_0x1fd4af[_0x33a5e3(0xad)]);break;case'function':io['to'](_0x2764d2)[_0x33a5e3(0x88)](_0x1fd4af[_0x33a5e3(0x99)],_0x1fd4af[_0x33a5e3(0xc7)]);break;}}),pid[_0x2764d2]['on'](_0x21c8c6(0x107),function(_0x3b3a8f){if(_0x1415e3)return;_0x1415e3=!![],_0x1d2c2b(_0x3b3a8f);}),pid[_0x2764d2]['on']('exit',async function(_0xfcc194){const _0x2f18ef=_0x21c8c6;if(installingUpdate)return;if(_0x1415e3)return;_0x1415e3=!![],_0x1d2c2b(null);const _0xa982eb=dbConfig[_0x2f18ef(0xa4)](_0x2f18ef(0xc6))[_0x2f18ef(0xc3)]({'botID':_0x2764d2})[_0x2f18ef(0x210)]();_0xa982eb&&(_0xa982eb[_0x2f18ef(0x128)]==_0x2f18ef(0x111)||_0xa982eb[_0x2f18ef(0x128)]=='new')&&(await sleep(0x3e8),updateLive(_0x2764d2,_0x2f18ef(0x109)),logger[_0x2f18ef(0x85)]('Restarting\x20Bot\x20'+_0x2764d2),startBot([_0x2764d2,userID],{'cwd':bbpath},function(_0x462113){const _0x4eb57c=_0x2f18ef;if(_0x462113)logger[_0x4eb57c(0x85)](_0x462113);}));});}function stopBot(_0x3c6454){const _0x291f37=_0x9832a8;getClientsWithBotID(_0x3c6454)['forEach'](_0x333140=>{const _0x52230c=_0x511f;getSocket(_0x333140['id'])[_0x52230c(0x19d)](!![]),removeClient(_0x333140['id']);}),pid[_0x3c6454]&&(pid[_0x3c6454][_0x291f37(0x202)](),pid[_0x3c6454]=null);}function restartBot(_0x506d9c){const _0x284294=_0x9832a8;if(pid[_0x506d9c])pid[_0x506d9c][_0x284294(0x202)]();}function addBot(){const _0x583960=_0x9832a8;let _0x36721f;for(let _0x53c2c2=0x1;_0x53c2c2<0x3e9;_0x53c2c2++){_0x36721f=_0x53c2c2['toString']()[_0x583960(0x1bf)](0x3,'0');let _0x2ca545=config['find'](_0x4a4ea5=>_0x4a4ea5[_0x583960(0x125)]==_0x36721f);if(!_0x2ca545)break;}if(_0x36721f==='1000'){logger['full'](_0x583960(0x1bd));return;}logger[_0x583960(0x85)](_0x583960(0x119)+_0x36721f),dbConfig[_0x583960(0xa4)](_0x583960(0xc6))[_0x583960(0x195)]({'botID':_0x36721f,'botname':_0x583960(0x13d)+_0x36721f,'status':'new','live':''})['write'](),startBot([_0x36721f,userID],{'cwd':bbpath},function(_0x36196a){const _0x1ea7e8=_0x583960;if(_0x36196a)logger[_0x1ea7e8(0x85)](_0x36196a);}),config=getConfiguration(),io['to'](_0x583960(0x9f))[_0x583960(0x88)](_0x583960(0xc6),config),broadcastToBots(_0x583960(0xc6),JSON[_0x583960(0xf1)](config));}function deleteBot(_0x3b924a){const _0x4a0825=_0x9832a8;getClientsWithBotID(_0x3b924a)[_0x4a0825(0x71)](_0x28814d=>{const _0x56e2e7=_0x4a0825;getSocket(_0x28814d['id'])[_0x56e2e7(0x19d)](!![]),removeClient(_0x28814d['id']);}),dbConfig[_0x4a0825(0xa4)](_0x4a0825(0xc6))['remove']({'botID':_0x3b924a})[_0x4a0825(0x1f2)](),logger[_0x4a0825(0x85)](_0x4a0825(0x1fa)+_0x3b924a),stopBot(_0x3b924a);try{if(fs[_0x4a0825(0x181)](path[_0x4a0825(0x190)](configpath,_0x4a0825(0x245)+_0x3b924a+'-config.json')))fs[_0x4a0825(0xfd)](path['join'](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x14f)));if(fs[_0x4a0825(0x181)](path[_0x4a0825(0x190)](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x1c4))))fs['unlinkSync'](path[_0x4a0825(0x190)](configpath,_0x4a0825(0x245)+_0x3b924a+'-events.json'));if(fs[_0x4a0825(0x181)](path[_0x4a0825(0x190)](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x222))))fs[_0x4a0825(0xfd)](path['join'](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x222)));if(fs['existsSync'](path[_0x4a0825(0x190)](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x133))))fs['unlinkSync'](path['join'](configpath,_0x4a0825(0x245)+_0x3b924a+_0x4a0825(0x133)));}catch(_0x8bb9a){if(_0x8bb9a)logger[_0x4a0825(0x85)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x8bb9a);}config=getConfiguration(),io['to']('botmanager')[_0x4a0825(0x88)](_0x4a0825(0xc6),config),broadcastToBots('bots',JSON[_0x4a0825(0xf1)](config));}function toggleBot(_0xd41293,_0xf2164e,_0x1b9957){const _0x49c283=_0x9832a8;dbConfig['get'](_0x49c283(0xc6))[_0x49c283(0xc3)]({'botID':_0xd41293})[_0x49c283(0xfa)]({'status':_0xf2164e})['assign']({'live':_0x1b9957})[_0x49c283(0x1f2)]();if(_0xf2164e=='enabled'||_0xf2164e=='new')logger['full'](_0x49c283(0x1d5)+_0xd41293),startBot([_0xd41293,userID],{'cwd':bbpath},function(_0x3f484a){const _0x14fb5a=_0x49c283;if(_0x3f484a)logger[_0x14fb5a(0x85)](_0x3f484a);});else(_0xf2164e==_0x49c283(0x6d)||_0xf2164e==_0x49c283(0x187))&&(logger[_0x49c283(0x85)](_0x49c283(0x172)+_0xd41293),stopBot(_0xd41293));config=getConfiguration(),io['to'](_0x49c283(0x9f))[_0x49c283(0x88)](_0x49c283(0xc6),config),broadcastToBots(_0x49c283(0xc6),JSON[_0x49c283(0xf1)](config));}function toggleStatus(_0x5f3dc2){const _0x52fc7e=_0x9832a8;let _0x23e6b6=dbConfig[_0x52fc7e(0xa4)]('bots')[_0x52fc7e(0xc3)]({'botID':_0x5f3dc2})[_0x52fc7e(0x210)](),_0x3f0ee4;if(_0x23e6b6[_0x52fc7e(0x128)]===_0x52fc7e(0x111))_0x3f0ee4=_0x52fc7e(0x6d);else{if(_0x23e6b6[_0x52fc7e(0x128)]==='new')_0x3f0ee4=_0x52fc7e(0x187);else{if(_0x23e6b6[_0x52fc7e(0x128)]==='new-disabled')_0x3f0ee4=_0x52fc7e(0x6b);else{if(_0x23e6b6[_0x52fc7e(0x128)]==='disabled')_0x3f0ee4=_0x52fc7e(0x111);}}}return _0x3f0ee4;}function updateStatus(_0x420f6c,_0x33c055){const _0x57c2d1=_0x9832a8;dbConfig[_0x57c2d1(0xa4)](_0x57c2d1(0xc6))[_0x57c2d1(0xc3)]({'botID':_0x420f6c})[_0x57c2d1(0xfa)]({'status':_0x33c055})[_0x57c2d1(0x1f2)](),config=getConfiguration(),io['to']('botmanager')[_0x57c2d1(0x88)](_0x57c2d1(0xc6),config),broadcastToBots(_0x57c2d1(0xc6),JSON[_0x57c2d1(0xf1)](config));}function updateLive(_0x2daa9c,_0xa8d54c){const _0x2312b9=_0x9832a8;dbConfig[_0x2312b9(0xa4)](_0x2312b9(0xc6))[_0x2312b9(0xc3)]({'botID':_0x2daa9c})[_0x2312b9(0xfa)]({'live':_0xa8d54c})[_0x2312b9(0x1f2)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x2312b9(0xc6),config),broadcastToBots(_0x2312b9(0xc6),JSON[_0x2312b9(0xf1)](config));}function updateBotName(_0x4a470f,_0x1bd334){const _0x240511=_0x9832a8;dbConfig['get'](_0x240511(0xc6))['find']({'botID':_0x4a470f})['assign']({'botname':_0x1bd334})[_0x240511(0x1f2)](),config=getConfiguration(),io['to'](_0x240511(0x9f))[_0x240511(0x88)]('bots',config),broadcastToBots('bots',JSON[_0x240511(0xf1)](config));}function updateBotManager(){const _0x18f301=_0x9832a8;config=getConfiguration(),io['to'](_0x18f301(0x9f))['emit']('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x2d4b44){const _0x344f28=_0x9832a8;if(pid[_0x2d4b44])pid[_0x2d4b44]['send']({'function':_0x344f28(0x1cd),'args':null});else{const _0x1fb2af=configpath+_0x344f28(0x245)+_0x2d4b44+_0x344f28(0x14f),_0x36dfa6=fs[_0x344f28(0x1ab)](_0x1fb2af),_0x4daaab=JSON['parse'](_0x36dfa6),_0x12d4a8=_0x4daaab[_0x344f28(0x151)][0x0][_0x344f28(0x1ce)];_0x4daaab[_0x344f28(0x151)][0x0]['headless']=!_0x12d4a8;const _0x1772c7=JSON['stringify'](_0x4daaab,null,0x2);fs['writeFileSync'](_0x1fb2af,_0x1772c7),config=getConfiguration(),io['to'](_0x344f28(0x9f))['emit'](_0x344f28(0xc6),config),broadcastToBots(_0x344f28(0xc6),JSON[_0x344f28(0xf1)](config));}}function telegramError(_0x2009e1){const _0x4284e6=_0x9832a8;logger[_0x4284e6(0xd8)](getTimeStamp()+_0x4284e6(0x6e));}function validateTelegram(_0xe333d){const _0x75be6b=_0x9832a8;if(_0xe333d[_0x75be6b(0x147)][_0x75be6b(0xc4)]!=settings[_0x75be6b(0x22e)]&&'@'+_0xe333d[_0x75be6b(0x147)][_0x75be6b(0xc4)]!=settings[_0x75be6b(0x22e)])return tgBot[_0x75be6b(0x173)](_0xe333d[_0x75be6b(0x1e4)]['id'],_0x75be6b(0x114),{'parse_mode':'HTML'})[_0x75be6b(0xd5)](_0x2ad9f4=>{telegramError(_0x2ad9f4);}),![];return!![];}async function initTelegram(){const _0x277ac0=_0x9832a8;if(tgBot)tgBot[_0x277ac0(0xc2)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x277ac0(0x1b9)],{'polling':!![]});let _0x151ecd=_0x277ac0(0xcc);_0x151ecd+='\x0a',_0x151ecd+='/enable\x20-\x20enable\x20notifications\x0a',_0x151ecd+=_0x277ac0(0x7b),_0x151ecd+=_0x277ac0(0xbb),_0x151ecd+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x151ecd+=_0x277ac0(0xd3),_0x151ecd+=_0x277ac0(0xf8),_0x151ecd+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x151ecd+=_0x277ac0(0x203),_0x151ecd+=_0x277ac0(0x165),_0x151ecd+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x151ecd+=_0x277ac0(0x84),_0x151ecd+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x151ecd+=_0x277ac0(0x11c),_0x151ecd+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x25c201=_0x277ac0(0x1c0);_0x25c201+='\x0a',_0x25c201+=_0x151ecd,tgBot[_0x277ac0(0x21c)](/\/start/,_0x2acb43=>{const _0x5f0cc3=_0x277ac0;if(!validateTelegram(_0x2acb43))return;if(settings[_0x5f0cc3(0x241)]!=_0x2acb43['chat']['id'])updateSetting('telegramChatId',_0x2acb43[_0x5f0cc3(0x1e4)]['id']);updateSetting(_0x5f0cc3(0x168),!![]),tgBot[_0x5f0cc3(0x173)](_0x2acb43[_0x5f0cc3(0x1e4)]['id'],_0x25c201)['catch'](_0x322863=>{telegramError(_0x322863);});}),tgBot['onText'](/\/enable/,_0x328fe5=>{const _0x492ee8=_0x277ac0;if(!validateTelegram(_0x328fe5))return;if(settings[_0x492ee8(0x241)]!=_0x328fe5['chat']['id'])updateSetting(_0x492ee8(0x241),_0x328fe5[_0x492ee8(0x1e4)]['id']);updateSetting(_0x492ee8(0x168),!![]),tgBot[_0x492ee8(0x173)](_0x328fe5[_0x492ee8(0x1e4)]['id'],_0x492ee8(0x82))[_0x492ee8(0xd5)](_0x1b3c44=>{telegramError(_0x1b3c44);});}),tgBot[_0x277ac0(0x21c)](/\/config/,async _0x2e7e34=>{const _0x2fb332=_0x277ac0;if(!validateTelegram(_0x2e7e34))return;tgBot[_0x2fb332(0x23e)](_0x2fb332(0x104)),tgBot[_0x2fb332(0x173)](_0x2e7e34[_0x2fb332(0x1e4)]['id'],_0x2fb332(0x243),{'reply_markup':{'inline_keyboard':[[{'text':_0x2fb332(0xd1),'callback_data':_0x2fb332(0x142)},{'text':_0x2fb332(0x1ff),'callback_data':'alerts'},{'text':_0x2fb332(0x1e7),'callback_data':_0x2fb332(0x1d2)}]]}})[_0x2fb332(0xd5)](_0x20a26e=>{telegramError(_0x20a26e);}),tgBot['on'](_0x2fb332(0x104),async _0x4258b7=>{const _0x563540=_0x2fb332,_0x5559cd=_0x4258b7['data'],_0x42c0b0=_0x4258b7['message'];tgBot[_0x563540(0x1c9)](_0x4258b7['id'])['then'](async()=>{const _0xc0df15=_0x563540;_0x5559cd==_0xc0df15(0x142)&&(updateSetting('telegramEvents','orders'),updateSetting(_0xc0df15(0x168),!![]),await tgBot[_0xc0df15(0x173)](_0x42c0b0['chat']['id'],_0xc0df15(0x1e5))['catch'](_0x12ad06=>{telegramError(_0x12ad06);}));_0x5559cd==_0xc0df15(0x1c5)&&(updateSetting('telegramEvents',_0xc0df15(0x1c5)),updateSetting(_0xc0df15(0x168),!![]),await tgBot['sendMessage'](_0x42c0b0[_0xc0df15(0x1e4)]['id'],_0xc0df15(0x16a))[_0xc0df15(0xd5)](_0x41ca8e=>{telegramError(_0x41ca8e);}));_0x5559cd==_0xc0df15(0x1d2)&&(updateSetting(_0xc0df15(0xc8),'all'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x42c0b0[_0xc0df15(0x1e4)]['id'],_0xc0df15(0xbf))['catch'](_0x306f8d=>{telegramError(_0x306f8d);}));if(!settings[_0xc0df15(0x241)])tgBot[_0xc0df15(0x173)](_0x42c0b0[_0xc0df15(0x1e4)]['id'],_0xc0df15(0x1f8))[_0xc0df15(0xd5)](_0xfc1b58=>{telegramError(_0xfc1b58);});}),tgBot[_0x563540(0x23e)]('callback_query');});}),tgBot[_0x277ac0(0x21c)](/\/status/,_0x559e80=>{const _0x15c66d=_0x277ac0;if(!validateTelegram(_0x559e80))return;const _0x10978c=getBotsWithMode();let _0x3a26a6='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x43bdcd=>{const _0x3ebcb9=_0x511f,_0x5802eb=_0x10978c[_0x3ebcb9(0xc3)](_0x5548ca=>_0x5548ca[_0x3ebcb9(0x125)]==_0x43bdcd[_0x3ebcb9(0x125)])[_0x3ebcb9(0x9a)];_0x3a26a6+='Bot\x20'+_0x43bdcd['botID']+':\x20'+_0x43bdcd[_0x3ebcb9(0x128)]+'\x20|\x20'+_0x5802eb+_0x3ebcb9(0x236)+_0x43bdcd[_0x3ebcb9(0x91)]+'\x0a';}),_0x3a26a6+='\x0a',_0x3a26a6+=_0x15c66d(0x146),_0x3a26a6+=!settings[_0x15c66d(0x168)]?_0x15c66d(0x129):_0x15c66d(0x90),_0x3a26a6+=settings[_0x15c66d(0x168)]?settings[_0x15c66d(0xc8)]==_0x15c66d(0x1d2)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x15c66d(0x1f7)+settings[_0x15c66d(0xc8)]+_0x15c66d(0x1c6):'',tgBot[_0x15c66d(0x173)](_0x559e80[_0x15c66d(0x1e4)]['id'],_0x3a26a6,{'parse_mode':_0x15c66d(0x12d)})[_0x15c66d(0xd5)](_0x137434=>{telegramError(_0x137434);});}),tgBot['onText'](/\/restart/,_0x544722=>{const _0x3c99be=_0x277ac0;if(!validateTelegram(_0x544722))return;tgBot[_0x3c99be(0x23e)](_0x3c99be(0x104));const _0xe36888=getEnabledBots();if(_0xe36888[_0x3c99be(0xbe)]==0x0)tgBot[_0x3c99be(0x173)](_0x544722[_0x3c99be(0x1e4)]['id'],_0x3c99be(0x6f))[_0x3c99be(0xd5)](_0x23d678=>{telegramError(_0x23d678);});else{if(_0xe36888[_0x3c99be(0xbe)]>0x1)_0xe36888[_0x3c99be(0x195)]({'botID':'all'});let _0xbce7a9=[],_0x20e61f=[];const _0x4f06bf=_0xe36888[_0x3c99be(0xbe)]%0x4==0x0||_0xe36888[_0x3c99be(0xbe)]%0x4==0x3||_0xe36888[_0x3c99be(0xbe)]%0x3==0x1?0x4:0x3;let _0x2ccdc8=0x0;_0xe36888[_0x3c99be(0x71)]((_0x2de9e4,_0x46c216)=>{const _0x40129d=_0x3c99be;if(_0x46c216%_0x4f06bf==0x0)_0x20e61f=[];_0x20e61f['push']({'text':_0x2de9e4[_0x40129d(0x125)]==_0x40129d(0x1d2)?_0x40129d(0x170):'Bot\x20'+_0x2de9e4[_0x40129d(0x125)],'callback_data':_0x2de9e4[_0x40129d(0x125)]}),_0x46c216%_0x4f06bf==0x0&&(_0xbce7a9[_0x2ccdc8]=_0x20e61f,_0x2ccdc8++);}),tgBot['sendMessage'](_0x544722[_0x3c99be(0x1e4)]['id'],_0x3c99be(0x220),{'reply_markup':{'inline_keyboard':_0xbce7a9}})[_0x3c99be(0xd5)](_0x41991a=>{telegramError(_0x41991a);}),tgBot['on']('callback_query',async _0x2a8260=>{const _0x21ecd0=_0x3c99be,_0x24aef3=_0x2a8260[_0x21ecd0(0x1a5)],_0x554262=_0x2a8260['message'];tgBot[_0x21ecd0(0x1c9)](_0x2a8260['id'])[_0x21ecd0(0x1cb)](async()=>{const _0x2800fa=_0x21ecd0;_0x24aef3==_0x2800fa(0x1d2)?config['forEach'](_0x47a0bb=>{restartBot(_0x47a0bb['botID']);}):restartBot(_0x24aef3);}),tgBot[_0x21ecd0(0x23e)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x1efcee=>{const _0x34e3a6=_0x277ac0;if(!validateTelegram(_0x1efcee))return;tgBot['removeListener'](_0x34e3a6(0x104));const _0x26348a=getDisabledBots();if(_0x26348a[_0x34e3a6(0xbe)]==0x0)tgBot[_0x34e3a6(0x173)](_0x1efcee[_0x34e3a6(0x1e4)]['id'],_0x34e3a6(0x193))[_0x34e3a6(0xd5)](_0x261561=>{telegramError(_0x261561);});else{if(_0x26348a['length']>0x1)_0x26348a[_0x34e3a6(0x195)]({'botID':_0x34e3a6(0x1d2)});let _0x3e8ad5=[],_0x33e7d7=[];const _0x113007=_0x26348a['length']%0x4==0x0||_0x26348a[_0x34e3a6(0xbe)]%0x4==0x3||_0x26348a[_0x34e3a6(0xbe)]%0x3==0x1?0x4:0x3;let _0x4ea1a1=0x0;_0x26348a[_0x34e3a6(0x71)]((_0x3190c0,_0x210143)=>{const _0x35227c=_0x34e3a6;if(_0x210143%_0x113007==0x0)_0x33e7d7=[];_0x33e7d7[_0x35227c(0x195)]({'text':_0x3190c0[_0x35227c(0x125)]=='all'?_0x35227c(0x170):_0x35227c(0x13d)+_0x3190c0[_0x35227c(0x125)],'callback_data':_0x3190c0['botID']}),_0x210143%_0x113007==0x0&&(_0x3e8ad5[_0x4ea1a1]=_0x33e7d7,_0x4ea1a1++);}),tgBot['sendMessage'](_0x1efcee[_0x34e3a6(0x1e4)]['id'],_0x34e3a6(0x161),{'reply_markup':{'inline_keyboard':_0x3e8ad5}})[_0x34e3a6(0xd5)](_0x569ffe=>{telegramError(_0x569ffe);}),tgBot['on'](_0x34e3a6(0x104),async _0x2a1e2f=>{const _0xd7f147=_0x34e3a6,_0x496420=_0x2a1e2f[_0xd7f147(0x1a5)],_0x3c8b88=_0x2a1e2f[_0xd7f147(0x21f)];tgBot[_0xd7f147(0x1c9)](_0x2a1e2f['id'])['then'](async()=>{const _0x31c4e6=_0xd7f147;_0x496420=='all'?(tgBot['sendMessage'](_0x3c8b88[_0x31c4e6(0x1e4)]['id'],_0x31c4e6(0x176))[_0x31c4e6(0xd5)](_0x4d0788=>{telegramError(_0x4d0788);}),_0x26348a['forEach'](_0x2601b6=>{const _0x2e00de=_0x31c4e6;if(_0x2601b6[_0x2e00de(0x125)]!=_0x2e00de(0x1d2))toggleBot(_0x2601b6[_0x2e00de(0x125)],toggleStatus(_0x2601b6[_0x2e00de(0x125)]),_0x2e00de(0x109));})):(tgBot[_0x31c4e6(0x173)](_0x3c8b88[_0x31c4e6(0x1e4)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x496420)[_0x31c4e6(0xd5)](_0x1399a5=>{telegramError(_0x1399a5);}),toggleBot(_0x496420,toggleStatus(_0x496420),_0x31c4e6(0x109)));}),tgBot[_0xd7f147(0x23e)]('callback_query');});}}),tgBot[_0x277ac0(0x21c)](/\/off/,_0x4004dd=>{const _0x138c8f=_0x277ac0;if(!validateTelegram(_0x4004dd))return;tgBot[_0x138c8f(0x23e)](_0x138c8f(0x104));const _0x12d77c=getEnabledBots();if(_0x12d77c[_0x138c8f(0xbe)]==0x0)tgBot[_0x138c8f(0x173)](_0x4004dd[_0x138c8f(0x1e4)]['id'],_0x138c8f(0x6f))['catch'](_0x45ba90=>{telegramError(_0x45ba90);});else{if(_0x12d77c['length']>0x1)_0x12d77c[_0x138c8f(0x195)]({'botID':_0x138c8f(0x1d2)});let _0x106f65=[],_0x2fbef6=[];const _0xe61995=_0x12d77c[_0x138c8f(0xbe)]%0x4==0x0||_0x12d77c['length']%0x4==0x3||_0x12d77c[_0x138c8f(0xbe)]%0x3==0x1?0x4:0x3;let _0xd240c3=0x0;_0x12d77c[_0x138c8f(0x71)]((_0x24b9c8,_0x279147)=>{const _0x33fc38=_0x138c8f;if(_0x279147%_0xe61995==0x0)_0x2fbef6=[];_0x2fbef6['push']({'text':_0x24b9c8['botID']==_0x33fc38(0x1d2)?_0x33fc38(0x170):_0x33fc38(0x13d)+_0x24b9c8[_0x33fc38(0x125)],'callback_data':_0x24b9c8[_0x33fc38(0x125)]}),_0x279147%_0xe61995==0x0&&(_0x106f65[_0xd240c3]=_0x2fbef6,_0xd240c3++);}),tgBot[_0x138c8f(0x173)](_0x4004dd[_0x138c8f(0x1e4)]['id'],_0x138c8f(0x212),{'reply_markup':{'inline_keyboard':_0x106f65}})[_0x138c8f(0xd5)](_0x22e23c=>{telegramError(_0x22e23c);}),tgBot['on']('callback_query',async _0x34100a=>{const _0x56e462=_0x138c8f,_0x23f040=_0x34100a[_0x56e462(0x1a5)],_0x415840=_0x34100a[_0x56e462(0x21f)];tgBot[_0x56e462(0x1c9)](_0x34100a['id'])['then'](async()=>{const _0x1e55ad=_0x56e462;_0x23f040==_0x1e55ad(0x1d2)?(tgBot[_0x1e55ad(0x173)](_0x415840[_0x1e55ad(0x1e4)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x1e55ad(0xd5)](_0x56a79c=>{telegramError(_0x56a79c);}),_0x12d77c[_0x1e55ad(0x71)](_0x152558=>{const _0x33d2d8=_0x1e55ad;if(_0x152558[_0x33d2d8(0x125)]!=_0x33d2d8(0x1d2))toggleBot(_0x152558[_0x33d2d8(0x125)],toggleStatus(_0x152558[_0x33d2d8(0x125)]),_0x33d2d8(0x109));})):(tgBot[_0x1e55ad(0x173)](_0x415840[_0x1e55ad(0x1e4)]['id'],_0x1e55ad(0xae)+_0x23f040)[_0x1e55ad(0xd5)](_0x369b35=>{telegramError(_0x369b35);}),toggleBot(_0x23f040,toggleStatus(_0x23f040),'stopped'));}),tgBot[_0x56e462(0x23e)](_0x56e462(0x104));});}}),tgBot[_0x277ac0(0x21c)](/\/metrics/,_0x1d3aa4=>{const _0x58747c=_0x277ac0;if(!validateTelegram(_0x1d3aa4))return;tgBot[_0x58747c(0x23e)](_0x58747c(0x104));const _0x59d0e5=getEnabledBots();if(_0x59d0e5['length']==0x0)tgBot[_0x58747c(0x173)](_0x1d3aa4[_0x58747c(0x1e4)]['id'],_0x58747c(0x6f))[_0x58747c(0xd5)](_0x2c04bb=>{telegramError(_0x2c04bb);});else{if(_0x59d0e5['length']>0x1){let _0x317cbb=[],_0x4c1334=[];const _0x2c8cc5=_0x59d0e5['length']%0x4==0x0||_0x59d0e5[_0x58747c(0xbe)]%0x4==0x3||_0x59d0e5[_0x58747c(0xbe)]%0x3==0x1?0x4:0x3;let _0x11ca17=0x0;_0x59d0e5[_0x58747c(0x71)]((_0x135826,_0xb9ef8c)=>{const _0x1af943=_0x58747c;if(_0xb9ef8c%_0x2c8cc5==0x0)_0x4c1334=[];_0x4c1334[_0x1af943(0x195)]({'text':_0x1af943(0x13d)+_0x135826[_0x1af943(0x125)],'callback_data':_0x135826[_0x1af943(0x125)]}),_0xb9ef8c%_0x2c8cc5==0x0&&(_0x317cbb[_0x11ca17]=_0x4c1334,_0x11ca17++);}),tgBot['sendMessage'](_0x1d3aa4['chat']['id'],_0x58747c(0x191),{'reply_markup':{'inline_keyboard':_0x317cbb}})[_0x58747c(0xd5)](_0xea79ed=>{telegramError(_0xea79ed);}),tgBot['on']('callback_query',async _0x5c8a7e=>{const _0x14fb9a=_0x58747c,_0xb1a678=_0x5c8a7e['data'],_0x306ef3=_0x5c8a7e['message'];tgBot[_0x14fb9a(0x1c9)](_0x5c8a7e['id'])[_0x14fb9a(0x1cb)](async()=>{const _0x5dc5b8=_0x14fb9a;if(pid[_0xb1a678])pid[_0xb1a678][_0x5dc5b8(0x130)]({'function':_0x5dc5b8(0x8a),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x2f0953=_0x59d0e5[0x0][_0x58747c(0x125)];if(pid[_0x2f0953])pid[_0x2f0953][_0x58747c(0x130)]({'function':_0x58747c(0x8a),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x4de777=>{const _0x5b8f21=_0x277ac0;if(!validateTelegram(_0x4de777))return;tgBot[_0x5b8f21(0x23e)]('callback_query');const _0x4beb97=getEnabledBots();if(_0x4beb97[_0x5b8f21(0xbe)]==0x0)tgBot[_0x5b8f21(0x173)](_0x4de777[_0x5b8f21(0x1e4)]['id'],_0x5b8f21(0x6f))[_0x5b8f21(0xd5)](_0x82bbee=>{telegramError(_0x82bbee);});else{if(_0x4beb97[_0x5b8f21(0xbe)]>0x1){let _0x2a712e=[],_0x183250=[];const _0x3b7753=_0x4beb97['length']%0x4==0x0||_0x4beb97[_0x5b8f21(0xbe)]%0x4==0x3||_0x4beb97[_0x5b8f21(0xbe)]%0x3==0x1?0x4:0x3;let _0x5e38dc=0x0;_0x4beb97[_0x5b8f21(0x71)]((_0x4d8a83,_0x36fb10)=>{const _0x29ed97=_0x5b8f21;if(_0x36fb10%_0x3b7753==0x0)_0x183250=[];_0x183250[_0x29ed97(0x195)]({'text':_0x29ed97(0x13d)+_0x4d8a83[_0x29ed97(0x125)],'callback_data':_0x4d8a83[_0x29ed97(0x125)]}),_0x36fb10%_0x3b7753==0x0&&(_0x2a712e[_0x5e38dc]=_0x183250,_0x5e38dc++);}),tgBot[_0x5b8f21(0x173)](_0x4de777[_0x5b8f21(0x1e4)]['id'],_0x5b8f21(0x121),{'reply_markup':{'inline_keyboard':_0x2a712e}})[_0x5b8f21(0xd5)](_0x354c9f=>{telegramError(_0x354c9f);}),tgBot['on'](_0x5b8f21(0x104),async _0x19ada6=>{const _0x5913f4=_0x5b8f21,_0x5ef67f=_0x19ada6['data'],_0x18837c=_0x19ada6['message'];tgBot['answerCallbackQuery'](_0x19ada6['id'])[_0x5913f4(0x1cb)](async()=>{const _0x46ae14=_0x5913f4;if(pid[_0x5ef67f])pid[_0x5ef67f][_0x46ae14(0x130)]({'function':_0x46ae14(0x221),'args':null});}),tgBot['removeListener'](_0x5913f4(0x104));});}else{const _0x3bfc6d=_0x4beb97[0x0][_0x5b8f21(0x125)];if(pid[_0x3bfc6d])pid[_0x3bfc6d][_0x5b8f21(0x130)]({'function':_0x5b8f21(0x221),'args':null});}}}),tgBot[_0x277ac0(0x21c)](/\/update/,async _0x14f5bd=>{const _0x4d152a=_0x277ac0;if(!validateTelegram(_0x14f5bd))return;tgBot['removeListener'](_0x4d152a(0x104)),await getMessages();if(!updateAvailable)tgBot[_0x4d152a(0x173)](_0x14f5bd[_0x4d152a(0x1e4)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x4d152a(0xd5)](_0x21851e=>{telegramError(_0x21851e);});else!validInstallation?tgBot[_0x4d152a(0x173)](_0x14f5bd[_0x4d152a(0x1e4)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x4d152a(0xd5)](_0x22ea28=>{telegramError(_0x22ea28);}):(tgBot['sendMessage'](_0x14f5bd[_0x4d152a(0x1e4)]['id'],_0x4d152a(0x21d),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x4d152a(0xd5)](_0x37b33d=>{telegramError(_0x37b33d);}),tgBot['on'](_0x4d152a(0x104),async _0xcf7ce9=>{const _0x43bf56=_0x4d152a,_0x3b7899=_0xcf7ce9['data'],_0x4d7dbb=_0xcf7ce9[_0x43bf56(0x21f)];tgBot['answerCallbackQuery'](_0xcf7ce9['id'])[_0x43bf56(0x1cb)](async()=>{const _0x41930c=_0x43bf56;_0x3b7899==_0x41930c(0x1cc)&&(await tgBot[_0x41930c(0x173)](_0x4d7dbb['chat']['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x216bc7=>{telegramError(_0x216bc7);}),updateBB(_0x41930c(0x17f))),_0x3b7899=='no'&&await tgBot[_0x41930c(0x173)](_0x4d7dbb[_0x41930c(0x1e4)]['id'],_0x41930c(0xce))['catch'](_0x1df2f7=>{telegramError(_0x1df2f7);});}),tgBot[_0x43bf56(0x23e)]('callback_query');}));}),tgBot[_0x277ac0(0x21c)](/\/reinstall/,async _0xbebd2=>{const _0x4560c6=_0x277ac0;if(!validateTelegram(_0xbebd2))return;tgBot[_0x4560c6(0x23e)](_0x4560c6(0x104)),!validInstallation?tgBot['sendMessage'](_0xbebd2[_0x4560c6(0x1e4)]['id'],_0x4560c6(0x12a))['catch'](_0x215002=>{telegramError(_0x215002);}):(tgBot['sendMessage'](_0xbebd2['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x4560c6(0xb6),'callback_data':_0x4560c6(0x1cc)},{'text':'No','callback_data':'no'}]]}})[_0x4560c6(0xd5)](_0x119229=>{telegramError(_0x119229);}),tgBot['on'](_0x4560c6(0x104),async _0x6d9ceb=>{const _0xea01a2=_0x4560c6,_0x4a4046=_0x6d9ceb[_0xea01a2(0x1a5)],_0x326355=_0x6d9ceb[_0xea01a2(0x21f)];tgBot[_0xea01a2(0x1c9)](_0x6d9ceb['id'])[_0xea01a2(0x1cb)](async()=>{const _0x4bc6d8=_0xea01a2;_0x4a4046==_0x4bc6d8(0x1cc)&&(await tgBot['sendMessage'](_0x326355[_0x4bc6d8(0x1e4)]['id'],_0x4bc6d8(0x17e))['catch'](_0x233e88=>{telegramError(_0x233e88);}),updateBB('reinstall')),_0x4a4046=='no'&&await tgBot['sendMessage'](_0x326355[_0x4bc6d8(0x1e4)]['id'],_0x4bc6d8(0x18d))[_0x4bc6d8(0xd5)](_0x215022=>{telegramError(_0x215022);});}),tgBot[_0xea01a2(0x23e)](_0xea01a2(0x104));}));}),tgBot[_0x277ac0(0x21c)](/\/toggle/,_0x39ca53=>{const _0x32dcf8=_0x277ac0;if(!validateTelegram(_0x39ca53))return;tgBot['removeListener'](_0x32dcf8(0x104));const _0x210d7d=getBotsWithMode();if(_0x210d7d[_0x32dcf8(0xbe)]==0x0)tgBot[_0x32dcf8(0x173)](_0x39ca53['chat']['id'],_0x32dcf8(0x6f))[_0x32dcf8(0xd5)](_0x36c327=>{telegramError(_0x36c327);});else{let _0x5c8f22=[],_0x3321c7=[];const _0x16d1dc=0x2;let _0x8dc006=0x0;_0x210d7d[_0x32dcf8(0x71)]((_0x4fd269,_0x1edda3)=>{const _0x38c548=_0x32dcf8;if(_0x1edda3%_0x16d1dc==0x0)_0x3321c7=[];_0x3321c7['push']({'text':_0x38c548(0x13d)+_0x4fd269['botID']+'\x20('+_0x4fd269[_0x38c548(0x9a)]+')','callback_data':_0x4fd269[_0x38c548(0x125)]}),_0x1edda3%_0x16d1dc==0x0&&(_0x5c8f22[_0x8dc006]=_0x3321c7,_0x8dc006++);}),tgBot['sendMessage'](_0x39ca53[_0x32dcf8(0x1e4)]['id'],_0x32dcf8(0x10a),{'reply_markup':{'inline_keyboard':_0x5c8f22}})[_0x32dcf8(0xd5)](_0x596aeb=>{telegramError(_0x596aeb);}),tgBot['on'](_0x32dcf8(0x104),async _0x3b948a=>{const _0x37eb68=_0x32dcf8,_0x552101=_0x3b948a[_0x37eb68(0x1a5)],_0x59778b=_0x3b948a['message'];tgBot['answerCallbackQuery'](_0x3b948a['id'])[_0x37eb68(0x1cb)](async()=>{const _0x42c4ad=_0x37eb68,_0x3747a1=_0x210d7d[_0x42c4ad(0xc3)](_0x30ee53=>_0x30ee53['botID']==_0x552101),_0x40e936=_0x3747a1[_0x42c4ad(0x9a)]==_0x42c4ad(0x15f)?_0x42c4ad(0xd4):_0x42c4ad(0x15f);tgBot[_0x42c4ad(0x173)](_0x59778b[_0x42c4ad(0x1e4)]['id'],_0x42c4ad(0x1b7)+_0x552101+_0x42c4ad(0x18f)+_0x40e936+_0x42c4ad(0x76))[_0x42c4ad(0xd5)](_0x5cd6ed=>{telegramError(_0x5cd6ed);}),toggleBotMode(_0x552101);}),tgBot[_0x37eb68(0x23e)](_0x37eb68(0x104));});}}),tgBot[_0x277ac0(0x21c)](/\/names/,_0xc4dbd4=>{const _0x26337f=_0x277ac0;if(!validateTelegram(_0xc4dbd4))return;let _0x21ca06='';config['forEach'](_0xa2ad0e=>{const _0x347aa8=_0x511f;_0x21ca06+=_0x347aa8(0x13d)+_0xa2ad0e['botID']+':\x20'+_0xa2ad0e[_0x347aa8(0x1d3)]+'\x0a';}),tgBot[_0x26337f(0x173)](_0xc4dbd4[_0x26337f(0x1e4)]['id'],_0x21ca06,{'parse_mode':'HTML'})[_0x26337f(0xd5)](_0x4e2d1d=>{telegramError(_0x4e2d1d);});}),tgBot['onText'](/\/disable/,_0x5969db=>{const _0xbe0d8b=_0x277ac0;if(!validateTelegram(_0x5969db))return;tgBot['sendMessage'](_0x5969db[_0xbe0d8b(0x1e4)]['id'],_0xbe0d8b(0x229))['catch'](_0x5529af=>{telegramError(_0x5529af);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x277ac0(0x21c)](/\/help/,_0x1805a4=>{const _0x37c1f5=_0x277ac0;if(!validateTelegram(_0x1805a4))return;tgBot['sendMessage'](_0x1805a4[_0x37c1f5(0x1e4)]['id'],_0x151ecd)[_0x37c1f5(0xd5)](_0x114252=>{telegramError(_0x114252);});}),tgBot['on'](_0x277ac0(0x169),_0x2bdf9c=>{const _0x5e7919=_0x277ac0;_0x2bdf9c['toString']()['includes'](_0x5e7919(0x16d))&&(logger[_0x5e7919(0x85)](_0x5e7919(0x22a)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x5e7919(0x9f))[_0x5e7919(0x88)](_0x5e7919(0x199),'Invalid\x20Telegram\x20token'));}),process[_0x277ac0(0xe6)](_0x277ac0(0x182),()=>{const _0x5c99e5=_0x277ac0;if(tgBot)tgBot[_0x5c99e5(0xc2)]();process[_0x5c99e5(0xf7)](0x1);}),process[_0x277ac0(0xe6)]('SIGTERM',()=>{const _0x2d0640=_0x277ac0;if(tgBot)tgBot['stopPolling']();process[_0x2d0640(0xf7)](0x1);});}}function disableTelegram(){const _0x3e80ce=_0x9832a8;tgBot&&(tgBot[_0x3e80ce(0xc2)](),tgBot=null);}function sendTelegram(_0x1ae7dd,_0x3116cf){const _0x4ba42b=_0x9832a8;if(settings[_0x4ba42b(0x168)]){if(settings[_0x4ba42b(0xc8)]=='all'||(_0x3116cf['type']==_0x4ba42b(0x107)||_0x3116cf[_0x4ba42b(0xe4)]==_0x4ba42b(0x198)||_0x3116cf['type']==_0x4ba42b(0xe2))&&settings[_0x4ba42b(0xc8)]==_0x4ba42b(0x1c5)||_0x3116cf[_0x4ba42b(0xe4)]==_0x4ba42b(0x15b)&&settings[_0x4ba42b(0xc8)]=='orders'){if(tgBot&&settings[_0x4ba42b(0x241)]){if(_0x3116cf[_0x4ba42b(0x230)])tgBot['sendMessage'](settings[_0x4ba42b(0x241)],_0x3116cf[_0x4ba42b(0x1d3)]+'\x20>\x20'+_0x3116cf['event'])[_0x4ba42b(0xd5)](_0x3500cd=>{telegramError(_0x3500cd);});else tgBot[_0x4ba42b(0x173)](settings[_0x4ba42b(0x241)],_0x4ba42b(0x13d)+_0x1ae7dd+_0x4ba42b(0x132)+_0x3116cf['event'])['catch'](_0x25992e=>{telegramError(_0x25992e);});}}}}async function sendTelegramMsg(_0x4a55d2,_0x58b658=_0x9832a8(0x12d)){const _0x312a90=_0x9832a8;return settings[_0x312a90(0x168)]&&tgBot&&settings[_0x312a90(0x241)]?(await tgBot['sendMessage'](settings[_0x312a90(0x241)],_0x4a55d2,{'parse_mode':_0x58b658})[_0x312a90(0xd5)](_0x4d4062=>{telegramError(_0x4d4062);}),!![]):![];}function getDeviceWithIp(_0x39fd44){const _0xd256c3=_0x9832a8;return devices[_0xd256c3(0xc3)](_0x20f16b=>_0x20f16b['ip']===_0x39fd44);}function temporaryAccess2FA(_0xe05c06,_0x182e93){const _0x1f9110=_0x9832a8;let _0x6254f7=new Date(),_0x154b8d=![];if(lastIpApproval){if(_0x6254f7-lastIpApproval<0x1388)_0x154b8d=!![];}lastIpApproval=new Date();if(_0x154b8d)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x1f9110(0x23e)](_0x1f9110(0x104)),tgBot['sendMessage'](settings[_0x1f9110(0x241)],_0x1f9110(0x135)+normalizeIP(_0x182e93)[_0x1f9110(0x214)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x1f9110(0x15d),'callback_data':'30'},{'text':_0x1f9110(0xa5),'callback_data':_0x1f9110(0xa5)}]]}})[_0x1f9110(0xd5)](_0x289628=>{telegramError(_0x289628);}),tgBot['on'](_0x1f9110(0x104),async _0x259d9f=>{const _0xedce1d=_0x1f9110,_0x2925b4=_0x259d9f[_0xedce1d(0x1a5)],_0x5aa0ff=_0x259d9f[_0xedce1d(0x21f)];tgBot[_0xedce1d(0x1c9)](_0x259d9f['id'])['then'](async()=>{const _0x499e39=_0xedce1d;devices[_0xe05c06][_0x499e39(0x237)]={'clientip':_0x182e93,'timestamp':new Date()[_0x499e39(0x218)](),'expiry':_0x2925b4},_0x2925b4!=_0x499e39(0xa5)?(await tgBot[_0x499e39(0x173)](_0x5aa0ff['chat']['id'],_0x499e39(0xa8)+_0x2925b4+'\x20minutes',{'parse_mode':'HTML'})[_0x499e39(0xd5)](_0xca9de8=>{telegramError(_0xca9de8);}),io['to'](_0xe05c06)[_0x499e39(0x88)](_0x499e39(0x128),{'access':{'allow':![],'reason':_0x499e39(0x166),'token':null}})):(await tgBot[_0x499e39(0x173)](_0x5aa0ff[_0x499e39(0x1e4)]['id'],_0x499e39(0xc9))[_0x499e39(0xd5)](_0x399695=>{telegramError(_0x399695);}),io['to'](_0xe05c06)[_0x499e39(0x88)]('status',{'access':{'allow':![],'reason':_0x499e39(0x226),'token':null}}));}),tgBot[_0xedce1d(0x23e)](_0xedce1d(0x104));}));}function loginAccess2FA(_0x4d970b,_0x2e5aac){const _0x29e752=_0x9832a8;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x29e752(0x104)),tgBot[_0x29e752(0x173)](settings[_0x29e752(0x241)],_0x29e752(0x1d4)+normalizeIP(_0x2e5aac)[_0x29e752(0x214)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x29e752(0xa5),'callback_data':_0x29e752(0xa5)}]]}})['catch'](_0x170b50=>{telegramError(_0x170b50);}),tgBot['on'](_0x29e752(0x104),async _0x2c55a7=>{const _0x241ab9=_0x29e752,_0x8d63a0=_0x2c55a7[_0x241ab9(0x1a5)],_0x327ccc=_0x2c55a7['message'];tgBot[_0x241ab9(0x1c9)](_0x2c55a7['id'])[_0x241ab9(0x1cb)](async()=>{const _0x10096b=_0x241ab9;devices[_0x4d970b]['telegram2FaApproval']={'clientip':_0x2e5aac,'timestamp':new Date()[_0x10096b(0x218)](),'expiry':_0x8d63a0},_0x8d63a0!='reject'?(await tgBot[_0x10096b(0x173)](_0x327ccc[_0x10096b(0x1e4)]['id'],_0x10096b(0x144),{'parse_mode':_0x10096b(0x12d)})[_0x10096b(0xd5)](_0x1d6762=>{telegramError(_0x1d6762);}),io['to'](_0x4d970b)[_0x10096b(0x88)]('status',{'access':{'allow':![],'reason':_0x10096b(0x166),'token':null}})):(await tgBot[_0x10096b(0x173)](_0x327ccc[_0x10096b(0x1e4)]['id'],_0x10096b(0x23f))[_0x10096b(0xd5)](_0x28a032=>{telegramError(_0x28a032);}),io['to'](_0x4d970b)[_0x10096b(0x88)](_0x10096b(0x128),{'access':{'allow':![],'reason':_0x10096b(0x156),'token':null}}));}),tgBot[_0x241ab9(0x23e)](_0x241ab9(0x104));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x25d4e2=_0x9832a8;return dbConfig[_0x25d4e2(0xa4)](_0x25d4e2(0xc6))['sortBy'](_0x25d4e2(0x125))[_0x25d4e2(0x12b)]({'status':'enabled'})[_0x25d4e2(0x210)]()||[];}function getDisabledBots(){const _0x3dea57=_0x9832a8;return dbConfig[_0x3dea57(0xa4)](_0x3dea57(0xc6))[_0x3dea57(0x238)](_0x3dea57(0x125))[_0x3dea57(0x12b)]({'status':_0x3dea57(0x6d)})[_0x3dea57(0x210)]()||[];}function getBotAttributes(_0xdcffa0){const _0x287ea2=_0x9832a8;let _0x394940={};const _0x583680=configpath+_0x287ea2(0x245)+_0xdcffa0+'-config.json',_0x17244d=fs[_0x287ea2(0x181)](_0x583680);if(_0x17244d){const _0x345c95=fs['readFileSync'](_0x583680);try{const _0x336d8e=JSON[_0x287ea2(0x1b0)](_0x345c95),_0xfd2126=_0x336d8e?_0x336d8e[_0x287ea2(0x151)][0x0][_0x287ea2(0x1ce)]:![];_0x394940[_0x287ea2(0x9a)]=_0xfd2126?_0x287ea2(0x15f):_0x287ea2(0xd4),_0x394940['botname']=_0x336d8e?_0x336d8e[_0x287ea2(0x151)][0x0][_0x287ea2(0x1d3)]:_0x287ea2(0x13d)+_0xdcffa0;}catch(_0x4db900){_0x394940[_0x287ea2(0x9a)]=_0x287ea2(0xd4),_0x394940[_0x287ea2(0x1d3)]=_0x287ea2(0x13d)+_0xdcffa0;}}else _0x394940[_0x287ea2(0x9a)]='manual',_0x394940[_0x287ea2(0x1d3)]=_0x287ea2(0x13d)+_0xdcffa0;return _0x394940;}function getBotsWithMode(){const _0x134fb6=_0x9832a8,_0x4dee91=dbConfig[_0x134fb6(0xa4)](_0x134fb6(0xc6))['sortBy'](_0x134fb6(0x125))['value']()||[];return _0x4dee91['forEach'](_0x9d1999=>{const _0x2de126=_0x134fb6;let _0x16ae31=getBotAttributes(_0x9d1999[_0x2de126(0x125)]);_0x9d1999[_0x2de126(0x9a)]=_0x16ae31[_0x2de126(0x9a)];}),_0x4dee91;}function getBotExchanges(){const _0x578a57=_0x9832a8;let _0x2b7ce2=[];const _0x30bc5c=dbConfig[_0x578a57(0xa4)](_0x578a57(0xc6))['sortBy']('botID')[_0x578a57(0x210)]()||[];_0x30bc5c[_0x578a57(0x71)](_0x2b6af5=>{const _0x5a81fd=_0x578a57;if(_0x2b6af5[_0x5a81fd(0x128)]=='enabled'){const _0x6a7c89=configpath+_0x5a81fd(0x245)+_0x2b6af5['botID']+_0x5a81fd(0x14f),_0x3c8a60=fs['existsSync'](_0x6a7c89);let _0x5db51b;if(_0x3c8a60){const _0x3d24f2=fs[_0x5a81fd(0x1ab)](_0x6a7c89);try{const _0x533a58=JSON[_0x5a81fd(0x1b0)](_0x3d24f2);_0x5db51b=_0x533a58?_0x533a58[_0x5a81fd(0x151)][0x0][_0x5a81fd(0x21e)]:null;}catch(_0xd1db6f){}}if(_0x5db51b)_0x2b7ce2['push'](_0x5db51b);}});const _0x547138=[...new Set(_0x2b7ce2)]['sort']();return _0x547138;}async function initUser(){const _0x3af2ae=_0x9832a8;if(!settings[_0x3af2ae(0x1cf)]){const _0x230098=uuidRandom();mixpanel[_0x3af2ae(0x20d)](_0x230098),updateSetting(_0x3af2ae(0x1cf),_0x230098);}}async function initSecure(){const _0x89d6a=_0x9832a8;let _0x233a42=getSecure();if(!_0x233a42['hasOwnProperty']('secret')){let _0x30c6f1=await generateKeys();_0x233a42[_0x89d6a(0x1f9)]=_0x30c6f1['publicKey'],_0x233a42[_0x89d6a(0x23d)]=_0x30c6f1[_0x89d6a(0x23d)],_0x233a42['secret']=crypto[_0x89d6a(0x184)](0x20)['toString'](_0x89d6a(0x101));;storeSecure(_0x233a42);}}function getSettings(){const _0x43e427=_0x9832a8;return dbSettings[_0x43e427(0xa4)]('settings')[_0x43e427(0x210)]()||{};}function getSecure(){const _0x252da3=_0x9832a8;return dbSecure[_0x252da3(0xa4)](_0x252da3(0x18b))[_0x252da3(0x210)]()||{};}function getBlacklist(){const _0x4a7c8f=_0x9832a8;return dbSecure[_0x4a7c8f(0xa4)](_0x4a7c8f(0x1b3))['value']()||[];}function broadcastToBots(_0x1c4d17,_0x5b33e5){const _0x2268fc=_0x9832a8;config[_0x2268fc(0x71)](_0x2f7e6b=>{const _0x19b0ae=_0x2268fc;if(_0x2f7e6b[_0x19b0ae(0x128)]=='enabled'&&_0x2f7e6b['live']==_0x19b0ae(0xba)||_0x2f7e6b[_0x19b0ae(0x128)]==_0x19b0ae(0x6b)&&_0x2f7e6b[_0x19b0ae(0x91)]==_0x19b0ae(0xba)){if(pid[_0x2f7e6b['botID']])pid[_0x2f7e6b[_0x19b0ae(0x125)]][_0x19b0ae(0x130)]({[_0x1c4d17]:_0x5b33e5});}});}function storeSettings(_0x389a7c,_0x111617=![]){const _0x102116=_0x9832a8;_0x389a7c={...settings,..._0x389a7c};if(_0x111617&&_0x389a7c['bbPassword']!=_0x102116(0x1ea)&&_0x389a7c['bbPassword']!=_0x102116(0xf4)&&_0x389a7c[_0x102116(0x1a2)]!=''){const _0x2c3706=crypt[_0x102116(0x13a)](secure[_0x102116(0x23d)],_0x389a7c['bbPassword'])[_0x102116(0x21f)][_0x102116(0x86)]('@')[0x0],_0x887c92=bcrypt[_0x102116(0x1fe)](_0x2c3706,saltRounds);_0x389a7c={..._0x389a7c,'bbPassword':_0x887c92};}if(_0x111617&&_0x389a7c['telegramToken']!=_0x102116(0x1ea)&&_0x389a7c[_0x102116(0x1b9)]!='***'&&_0x389a7c['telegramToken']!=''){const _0x5e5603=crypt[_0x102116(0x13a)](secure[_0x102116(0x23d)],_0x389a7c[_0x102116(0x1b9)])[_0x102116(0x21f)][_0x102116(0x86)]('@')[0x0];_0x389a7c={..._0x389a7c,'telegramToken':_0x5e5603};}const _0x30b973=_0x389a7c['telegramToken']!=_0x102116(0x1ea)&&_0x389a7c[_0x102116(0x1b9)]!=settings[_0x102116(0x1b9)]||_0x389a7c['telegramUsername']!=settings[_0x102116(0x22e)],_0x1ddd74=_0x389a7c[_0x102116(0x1b9)]==''||_0x389a7c[_0x102116(0x22e)]=='';if(_0x30b973)_0x389a7c[_0x102116(0xc8)]=_0x102116(0x1d2);for(const [_0x3b4600,_0x5972d4]of Object['entries'](_0x389a7c)){if(_0x3b4600==_0x102116(0x1b9)&&_0x5972d4==_0x102116(0x1ea)){_0x389a7c[_0x102116(0x1b9)]=settings[_0x102116(0x1b9)];continue;};if(_0x3b4600==_0x102116(0x1a2)&&_0x5972d4=='************'){_0x389a7c['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x102116(0xd7)](_0x102116(0x1eb)+_0x3b4600,_0x5972d4)[_0x102116(0x1f2)]();}settings=_0x389a7c,io['to'](_0x102116(0x9f))[_0x102116(0x88)](_0x102116(0x18a),cleanSettings()),broadcastToBots(_0x102116(0x217),settings[_0x102116(0x217)]),broadcastToBots('onepagemode',settings['onepagemode']);if(_0x30b973&&!_0x1ddd74)initTelegram();if(_0x30b973&&_0x1ddd74)disableTelegram();getAllClients()[_0x102116(0x71)](_0x1f66d3=>{const _0x5679bd=_0x102116;getSocket(_0x1f66d3['id'])[_0x5679bd(0x88)]('status',{'access':{'allow':![],'reason':_0x5679bd(0x166),'token':null}});});}function updateSetting(_0x24959d,_0x1b8bea){const _0x54e3c7=_0x9832a8;dbSettings[_0x54e3c7(0xd7)]('settings.'+_0x24959d,_0x1b8bea)[_0x54e3c7(0x1f2)](),settings=getSettings(),io['to'](_0x54e3c7(0x9f))[_0x54e3c7(0x88)]('settings',cleanSettings());}function storeSecure(_0xf42010){const _0x2a87d4=_0x9832a8;dbSecure[_0x2a87d4(0xa4)](_0x2a87d4(0x18b))[_0x2a87d4(0x195)](_0xf42010)[_0x2a87d4(0x1f2)](),secure=_0xf42010;}function addBlacklist(_0x36a7a5){const _0x452be8=_0x9832a8;cleanBlacklist();let _0x20e6a7;devices[_0x36a7a5][_0x452be8(0x237)]?_0x20e6a7=Math[_0x452be8(0x1ee)](devices[_0x36a7a5][_0x452be8(0x237)][_0x452be8(0xe5)],loginExpiry):_0x20e6a7=loginExpiry,dbSecure[_0x452be8(0xa4)](_0x452be8(0x1b3))[_0x452be8(0x195)]({'expiry':new Date()['getTime']()+_0x20e6a7*0x3c*0x3e8,'token':devices[_0x36a7a5][_0x452be8(0x239)]['token']})['write'](),blacklist=dbSecure[_0x452be8(0xa4)](_0x452be8(0x1b3))[_0x452be8(0x210)]();}function cleanBlacklist(){const _0xeee243=_0x9832a8;let _0x3c4a70=dbSecure[_0xeee243(0xa4)](_0xeee243(0x1b3))[_0xeee243(0x158)]()[_0xeee243(0x210)](),_0x5b06dd=new Date()[_0xeee243(0x218)]();_0x3c4a70[_0xeee243(0x71)](_0x3ec508=>{const _0x5f0eeb=_0xeee243;_0x3ec508[_0x5f0eeb(0xe5)]<_0x5b06dd&&dbSecure[_0x5f0eeb(0xa4)](_0x5f0eeb(0x1b3))[_0x5f0eeb(0x14e)]({'expiry':_0x3ec508[_0x5f0eeb(0xe5)]})['write']();});}function initStates(){const _0x38b374=_0x9832a8;let _0xe96311=getConfiguration();_0xe96311[_0x38b374(0x71)](_0x46d005=>{const _0x3e529b=_0x38b374;_0x46d005[_0x3e529b(0x91)]='stopped';}),storeConfiguration(_0xe96311);}function onKeys(){const _0x44c4c7=new RSA();return new Promise(_0x1598fd=>{_0x44c4c7['generateKeyPairAsync']()['then'](_0x5cb482=>{_0x1598fd(_0x5cb482);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1aed14=_0x9832a8;let _0xddbbe6=getSettings(),_0x47028c=![];!_0xddbbe6[_0x1aed14(0x141)]('lastmsgtelegram')&&(_0xddbbe6[_0x1aed14(0x1ac)]=0x0,_0x47028c=!![]);!_0xddbbe6['hasOwnProperty']('lastmsgemitted')&&(_0xddbbe6[_0x1aed14(0xf5)]=0x0,_0x47028c=!![]);!_0xddbbe6[_0x1aed14(0x141)](_0x1aed14(0xf0))&&(_0xddbbe6[_0x1aed14(0xf0)]=_0x1aed14(0xcf),_0x47028c=!![]);!_0xddbbe6[_0x1aed14(0x141)](_0x1aed14(0x1e3))&&(_0xddbbe6[_0x1aed14(0x1e3)]=![],_0x47028c=!![]);if(_0x47028c)storeSettings(_0xddbbe6);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x1aed14(0x71)](_0x4b5439=>{const _0x3dba26=_0x1aed14;if(!_0x4b5439[_0x3dba26(0x200)]()){if(!_0x4b5439['name'][_0x3dba26(0x20c)](_0x3dba26(0x196)))fs[_0x3dba26(0xfd)](configbackuppath+_0x4b5439['name']);}else fs[_0x3dba26(0x1d6)](configbackuppath+_0x4b5439[_0x3dba26(0x16c)],{'recursive':!![]});});}catch(_0x185f59){logger[_0x1aed14(0x223)](_0x1aed14(0xe3),_0x185f59);}}function storeConfiguration(_0x13befe){const _0x377612=_0x9832a8;dbConfig['get'](_0x377612(0xc6))[_0x377612(0x14e)]()[_0x377612(0x1f2)](),_0x13befe[_0x377612(0x71)](_0x4eafe6=>{const _0x211772=_0x377612;delete _0x4eafe6[_0x211772(0x9a)];}),dbConfig[_0x377612(0xa4)](_0x377612(0xc6))[_0x377612(0x195)](..._0x13befe)[_0x377612(0x1f2)](),config=_0x13befe;}function resetPassword(){const _0x5bfa87=_0x9832a8;tgBot&&settings[_0x5bfa87(0x241)]&&(tgBot['removeListener'](_0x5bfa87(0x104)),tgBot[_0x5bfa87(0x173)](settings[_0x5bfa87(0x241)],_0x5bfa87(0x207),{'parse_mode':_0x5bfa87(0x12d),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x5bfa87(0x1cc)},{'text':'no','callback_data':'no'}]]}})[_0x5bfa87(0xd5)](_0x18bf7d=>{telegramError(_0x18bf7d);}),tgBot['on'](_0x5bfa87(0x104),async _0x2b29f7=>{const _0x58edcc=_0x5bfa87,_0x2eca5c=_0x2b29f7[_0x58edcc(0x1a5)],_0x519aee=_0x2b29f7[_0x58edcc(0x21f)];tgBot[_0x58edcc(0x1c9)](_0x2b29f7['id'])[_0x58edcc(0x1cb)](async()=>{const _0x4820b1=_0x58edcc;if(_0x2eca5c!='no'){const _0x32f50a=0xf,_0x5706a0=_0x4820b1(0x1fc),_0x434f56=Array[_0x4820b1(0x147)](crypto[_0x4820b1(0x1b1)](new Uint32Array(_0x32f50a)))[_0x4820b1(0x17d)](_0xab4bd4=>_0x5706a0[_0xab4bd4%_0x5706a0[_0x4820b1(0xbe)]])[_0x4820b1(0x190)](''),_0x4732ae=bcrypt[_0x4820b1(0x1fe)](_0x434f56,saltRounds);storeSettings({'bbPassword':_0x4732ae}),await tgBot[_0x4820b1(0x173)](_0x519aee[_0x4820b1(0x1e4)]['id'],_0x4820b1(0xe7)+_0x434f56,{'parse_mode':_0x4820b1(0x12d)})[_0x4820b1(0xd5)](_0x161e75=>{telegramError(_0x161e75);});}else await tgBot[_0x4820b1(0x173)](_0x519aee[_0x4820b1(0x1e4)]['id'],_0x4820b1(0x197))[_0x4820b1(0xd5)](_0x37791e=>{telegramError(_0x37791e);});}),tgBot[_0x58edcc(0x23e)](_0x58edcc(0x104));}));}async function confirmRestore(_0x59d2a4,_0x35a182){const _0x1bc0fa=_0x9832a8;io['to'](_0x1bc0fa(0x9f))['emit'](_0x1bc0fa(0x199),_0x1bc0fa(0x149),_0x1bc0fa(0xe2)),tgBot&&settings[_0x1bc0fa(0x241)]&&(tgBot[_0x1bc0fa(0x23e)](_0x1bc0fa(0x104)),await tgBot[_0x1bc0fa(0x173)](settings[_0x1bc0fa(0x241)],_0x1bc0fa(0x18e),{'parse_mode':_0x1bc0fa(0x12d),'reply_markup':{'inline_keyboard':[[{'text':_0x1bc0fa(0x1cc),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1bc0fa(0xd5)](_0x3a9daa=>{telegramError(_0x3a9daa);}),tgBot['on']('callback_query',async _0x4790e1=>{const _0x2244e8=_0x1bc0fa,_0x42e738=_0x4790e1['data'],_0x2c9154=_0x4790e1[_0x2244e8(0x21f)];tgBot['answerCallbackQuery'](_0x4790e1['id'])[_0x2244e8(0x1cb)](async()=>{const _0x55661c=_0x2244e8;_0x42e738==_0x55661c(0x1cc)?(await tgBot[_0x55661c(0x173)](_0x2c9154[_0x55661c(0x1e4)]['id'],_0x55661c(0x14a),{'parse_mode':_0x55661c(0x12d)})['catch'](_0xea2041=>{telegramError(_0xea2041);}),unzipFile(_0x59d2a4,_0x35a182)):(logger[_0x55661c(0x223)]('Restore\x20process\x20aborted'),await tgBot['sendMessage'](_0x2c9154[_0x55661c(0x1e4)]['id'],'Restore\x20process\x20aborted')['catch'](_0x3c33e5=>{telegramError(_0x3c33e5);}));}),tgBot[_0x2244e8(0x23e)]('callback_query');}));}function getServerTime(){const _0x4fe890=_0x9832a8,_0x4753a8=new Date();return _0x4753a8['getFullYear']()+'/'+(_0x4753a8[_0x4fe890(0xf9)]()+0x1)['toString']()[_0x4fe890(0x1bf)](0x2,'0')+'/'+_0x4753a8[_0x4fe890(0x159)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x4753a8[_0x4fe890(0xc5)]()[_0x4fe890(0xde)]()[_0x4fe890(0x1bf)](0x2,'0')+':'+_0x4753a8[_0x4fe890(0xca)]()[_0x4fe890(0xde)]()[_0x4fe890(0x1bf)](0x2,'0')+':'+_0x4753a8['getSeconds']()['toString']()[_0x4fe890(0x1bf)](0x2,'0');}function getTimeStamp(){const _0x89fa74=_0x9832a8,_0x7b2be7=shiftedTime();return _0x7b2be7[_0x89fa74(0x1ae)]()+'/'+(_0x7b2be7[_0x89fa74(0xf9)]()+0x1)[_0x89fa74(0xde)]()[_0x89fa74(0x1bf)](0x2,'0')+'/'+_0x7b2be7[_0x89fa74(0x159)]()[_0x89fa74(0xde)]()[_0x89fa74(0x1bf)](0x2,'0')+'\x20'+_0x7b2be7[_0x89fa74(0xc5)]()[_0x89fa74(0xde)]()[_0x89fa74(0x1bf)](0x2,'0')+':'+_0x7b2be7[_0x89fa74(0xca)]()['toString']()['padStart'](0x2,'0')+':'+_0x7b2be7[_0x89fa74(0x1a0)]()['toString']()[_0x89fa74(0x1bf)](0x2,'0');}function getCleanTimeStamp(){const _0x4e8292=_0x9832a8,_0x484b63=shiftedTime();return _0x484b63[_0x4e8292(0x1ae)]()+(_0x484b63[_0x4e8292(0xf9)]()+0x1)[_0x4e8292(0xde)]()[_0x4e8292(0x1bf)](0x2,'0')+_0x484b63[_0x4e8292(0x159)]()[_0x4e8292(0xde)]()[_0x4e8292(0x1bf)](0x2,'0')+'-'+_0x484b63[_0x4e8292(0xc5)]()[_0x4e8292(0xde)]()[_0x4e8292(0x1bf)](0x2,'0')+_0x484b63[_0x4e8292(0xca)]()['toString']()[_0x4e8292(0x1bf)](0x2,'0')+_0x484b63[_0x4e8292(0x1a0)]()[_0x4e8292(0xde)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2f6d8e=_0x9832a8,_0x10c2e1=new Date();let _0x1dbd09=_0x10c2e1;if(settings[_0x2f6d8e(0x217)]&&settings[_0x2f6d8e(0x217)]!==0x0)_0x1dbd09=fns[_0x2f6d8e(0xe1)](_0x10c2e1,{'hours':settings[_0x2f6d8e(0x217)]});return _0x1dbd09;}function startScheduler(){const _0x292615=_0x9832a8,_0x3491d8=new Date()['getUTCHours'](),_0x3a7168=shiftedTime()[_0x292615(0xc5)]();_0x3a7168==0x4&&backupConfigFiles();_0x3a7168==0x0&&rotateLogFiles();_0x3491d8%0x6==0x0&&triggerAnalytics();_0x3491d8%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x1a8427){const _0x36248e=_0x9832a8;logger[_0x36248e(0x223)](_0x36248e(0x14b)+_0x1a8427);const _0x11219c=getBotsWithMode();_0x11219c['length']>0x0?confirmRestore(configbackuppath,_0x1a8427):unzipFile(configbackuppath,_0x1a8427);}async function getBackupFiles(_0x12b757=null){const _0x3b0818=_0x9832a8;let _0x3aa1f2=[],_0xd89111=fs[_0x3b0818(0xb7)](configbackuppath,{'withFileTypes':!![]});_0xd89111[_0x3b0818(0xa3)]((_0x18b475,_0x50afb8)=>_0x18b475[_0x3b0818(0x16c)]<_0x50afb8[_0x3b0818(0x16c)]?0x1:_0x50afb8[_0x3b0818(0x16c)]<_0x18b475[_0x3b0818(0x16c)]?-0x1:0x0),_0xd89111[_0x3b0818(0x71)](_0x4e5c65=>{const _0x1d6a5c=_0x3b0818;if(!_0x4e5c65['isDirectory']()&&_0x4e5c65[_0x1d6a5c(0x16c)]['startsWith'](_0x1d6a5c(0x196))&&_0x4e5c65[_0x1d6a5c(0x16c)][_0x1d6a5c(0x19f)](_0x1d6a5c(0x93))){const _0x502582=formatDate(fs['statSync'](configbackuppath+_0x4e5c65['name'])[_0x1d6a5c(0xea)]);_0x3aa1f2[_0x1d6a5c(0x195)]({'name':_0x4e5c65[_0x1d6a5c(0x16c)],'mtime':_0x502582});}});if(_0x12b757)io['to'](_0x12b757)[_0x3b0818(0x88)](_0x3b0818(0x20a),_0x3aa1f2);else return _0x3aa1f2;}async function backupConfigFiles(){const _0x29eb96=_0x9832a8;await zipFiles(_0x29eb96(0xdf));const _0x14d947=getCleanTimeStamp();fs[_0x29eb96(0x92)](zippath+_0x29eb96(0x234),configbackuppath+(_0x29eb96(0x196)+_0x14d947+'.zip'));let _0x585b6d=fs[_0x29eb96(0xb7)](configbackuppath,{'withFileTypes':!![]});_0x585b6d['sort']((_0x35506a,_0x5279c8)=>_0x35506a[_0x29eb96(0x16c)]<_0x5279c8['name']?0x1:_0x5279c8[_0x29eb96(0x16c)]<_0x35506a['name']?-0x1:0x0),_0x585b6d[_0x29eb96(0xbe)]>maxBackups&&fs[_0x29eb96(0xfd)](configbackuppath+_0x585b6d[_0x585b6d[_0x29eb96(0xbe)]-0x1][_0x29eb96(0x16c)]);}function rotateLogFiles(){const _0x675df0=_0x9832a8,_0x1d1ef9=fs[_0x675df0(0x102)](logspath+_0x675df0(0x10d)),_0x5977e6=_0x1d1ef9[_0x675df0(0xd9)]/0x400;if(_0x5977e6>0x64){let _0x1aba7f=fs[_0x675df0(0xb7)](logspath,{'withFileTypes':!![]});_0x1aba7f[_0x675df0(0xa3)]((_0x4fd6db,_0x539c51)=>_0x4fd6db[_0x675df0(0x16c)]<_0x539c51[_0x675df0(0x16c)]?0x1:_0x539c51['name']<_0x4fd6db[_0x675df0(0x16c)]?-0x1:0x0),_0x1aba7f[_0x675df0(0x71)](_0x71ce3=>{const _0x3c7b20=_0x675df0;if(_0x71ce3[_0x3c7b20(0x16c)]==_0x3c7b20(0x1ca))fs['copyFileSync'](logspath+_0x71ce3[_0x3c7b20(0x16c)],logspath+_0x3c7b20(0xaf));if(_0x71ce3[_0x3c7b20(0x16c)]==_0x3c7b20(0x225))fs[_0x3c7b20(0x92)](logspath+_0x71ce3['name'],logspath+_0x3c7b20(0x1ca));_0x71ce3[_0x3c7b20(0x16c)]==_0x3c7b20(0x10d)&&(fs[_0x3c7b20(0x92)](logspath+_0x71ce3[_0x3c7b20(0x16c)],logspath+_0x3c7b20(0x225)),fs[_0x3c7b20(0x136)](logspath+_0x71ce3['name'],''));});}}async function zipFiles(_0x346547){const _0x58dd70=_0x9832a8;let _0x5b7a13;if(_0x346547==_0x58dd70(0x131))_0x5b7a13=logspath;if(_0x346547==_0x58dd70(0x127))_0x5b7a13=configpath;if(_0x346547=='backup-full')_0x5b7a13=configpath;let _0x3c2882=fs[_0x58dd70(0xb7)](_0x5b7a13,{'withFileTypes':!![]});const _0x86f1f=new require(_0x58dd70(0xcb))();_0x3c2882[_0x58dd70(0x71)](_0x1547a0=>{const _0x52f7ac=_0x58dd70;if(!_0x1547a0[_0x52f7ac(0x200)]()){let _0x5f1145=fs['readFileSync'](_0x5b7a13+_0x1547a0[_0x52f7ac(0x16c)]);if(_0x346547==_0x52f7ac(0x127)){const _0x4515f7=/^bot-[0-9]{3}-config.json$/,_0x2714bf=_0x4515f7[_0x52f7ac(0x154)](_0x1547a0[_0x52f7ac(0x16c)]);if(_0x2714bf){const _0x3fed4e=JSON['parse'](_0x5f1145);if(_0x3fed4e[_0x52f7ac(0x151)][0x0]){_0x3fed4e['bot'][0x0]['apiKey']=_0x52f7ac(0xf4),_0x3fed4e['bot'][0x0]['apiSecret']='***';if(_0x3fed4e[_0x52f7ac(0x151)][0x0][_0x52f7ac(0x1e0)])_0x3fed4e[_0x52f7ac(0x151)][0x0][_0x52f7ac(0x1e0)]='***';}_0x5f1145=JSON[_0x52f7ac(0xf1)](_0x3fed4e,null,0x2);}if(_0x1547a0['name']=='bb-settings.json'){const _0x32921e=JSON[_0x52f7ac(0x1b0)](_0x5f1145);if(_0x32921e[_0x52f7ac(0x18a)]['loginRequired'])_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x1d0)]=![];if(_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x1a2)])_0x32921e['settings'][_0x52f7ac(0x1a2)]=_0x52f7ac(0xf4);if(_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x1b9)])_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x1b9)]=_0x52f7ac(0xf4);if(_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x241)])_0x32921e[_0x52f7ac(0x18a)][_0x52f7ac(0x241)]=null;_0x5f1145=JSON['stringify'](_0x32921e,null,0x2);}if(_0x1547a0[_0x52f7ac(0x16c)]!=_0x52f7ac(0x1db))_0x86f1f[_0x52f7ac(0x1a6)](_0x1547a0['name'],_0x5f1145);}else _0x86f1f[_0x52f7ac(0x1a6)](_0x1547a0[_0x52f7ac(0x16c)],_0x5f1145);}});const _0x4d6df4=_0x86f1f[_0x58dd70(0x11e)]({'base64':![],'compression':'DEFLATE'});fs[_0x58dd70(0x136)](zippath+(_0x346547+_0x58dd70(0x93)),_0x4d6df4,_0x58dd70(0x20f));}async function unzipFile(_0x5ec32e,_0x58a1f7){const _0x46aabf=_0x9832a8;fs[_0x46aabf(0xb7)](configpath,{'withFileTypes':!![]})['forEach'](_0x2f5561=>{const _0x777aeb=_0x46aabf;if(!_0x2f5561[_0x777aeb(0x200)]())fs['rmSync'](configpath+_0x2f5561[_0x777aeb(0x16c)]);});const _0x13f658=fs[_0x46aabf(0x1ab)](_0x5ec32e+_0x58a1f7,_0x46aabf(0x20f)),_0x57d727=new require(_0x46aabf(0xcb))(_0x13f658,{'base64':![],'checkCRC32':!![]});Object[_0x46aabf(0x1b6)](_0x57d727[_0x46aabf(0x177)])[_0x46aabf(0x71)](_0x37fd09=>{const _0x297707=_0x46aabf,_0x194407=_0x57d727['files'][_0x37fd09];fs[_0x297707(0x136)](configpath+_0x194407['name'],_0x194407[_0x297707(0xee)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x46aabf(0x71)](_0x236939=>{const _0xf8a2fa=_0x46aabf;if(!_0x236939[_0xf8a2fa(0x200)]())fs[_0xf8a2fa(0x1d6)](temppath+_0x236939['name']);}),logger[_0x46aabf(0x223)](_0x46aabf(0xa6)),process[_0x46aabf(0x130)]({'restore':!![]},_0x24f2aa=>{});}async function getPublicIp(){const _0x12bd92=_0x9832a8;try{const _0x5ea17e=await axios[_0x12bd92(0xa4)](_0x12bd92(0x1c1));publicip=_0x5ea17e[_0x12bd92(0x1a5)]['ip'];}catch(_0x5f1c1c){}}async function triggerAnalytics(){const _0x3463a6=_0x9832a8;if(!publicip)await getPublicIp();const _0x621ccf=getBotsWithMode();let _0x889a82=0x0;_0x621ccf[_0x3463a6(0x71)](_0x6e49a2=>{const _0xbf281a=_0x3463a6;if(_0x6e49a2[_0xbf281a(0x128)]===_0xbf281a(0x111))_0x889a82++;});const _0x56c459=getBotExchanges();mixpanel[_0x3463a6(0x1ba)]('Server',{'distinct_id':settings[_0x3463a6(0x1cf)],'ip':publicip,'version':serverversion,'numbots':_0x621ccf['length'],'numbotsenabled':_0x889a82,'exchanges':_0x56c459});}async function getMessages(){const _0x4160cb=_0x9832a8,_0x419c3b=_0x4160cb(0x167),_0x311e83=new GraphQLClient(_0x419c3b),_0x4793b4={'authorization':_0x4160cb(0xc1)},_0x5b4895=serverversion[_0x4160cb(0x86)]('.'),_0x2e5cc2=_0x5b4895[0x0]+'.'+_0x5b4895[0x1],_0x56cf80=Math[_0x4160cb(0xec)](settings[_0x4160cb(0x1ac)],settings[_0x4160cb(0xf5)]),_0x448eaa={'last':parseInt(_0x56cf80),'bbm':_0x2e5cc2},_0x2d82d4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x27abdb;try{_0x27abdb=await _0x311e83['request'](_0x2d82d4,_0x448eaa,_0x4793b4);}catch(_0xfac76f){}if(_0x27abdb&&_0x27abdb[_0x4160cb(0x1a4)]){let _0x5a8876=settings[_0x4160cb(0x1ac)];newMessages=[];for(const _0x3f1ffb of _0x27abdb[_0x4160cb(0x1a4)]){newMessages[_0x4160cb(0x195)](_0x3f1ffb);if(_0x3f1ffb[_0x4160cb(0x123)])updateSetting(_0x4160cb(0xf0),_0x3f1ffb[_0x4160cb(0x123)]);let _0x1c6393=_0x3f1ffb[_0x4160cb(0x123)]?serverversion>=_0x3f1ffb[_0x4160cb(0x123)]:![];if(!_0x1c6393&&_0x3f1ffb[_0x4160cb(0x103)]>_0x5a8876){if(_0x3f1ffb[_0x4160cb(0x1f1)]===_0x4160cb(0x204)||serverversion[_0x4160cb(0x20c)](_0x3f1ffb[_0x4160cb(0x1f1)])){let _0x54b573=''+_0x3f1ffb[_0x4160cb(0x74)]+'\x0a\x0a'+_0x3f1ffb[_0x4160cb(0x21f)];const _0x55d477=await sendTelegramMsg(toTelegramMarkdown(_0x54b573),_0x4160cb(0xa9));if(_0x55d477)_0x5a8876=_0x3f1ffb[_0x4160cb(0x103)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x4160cb(0x1ac),_0x5a8876),emitMessages();}}function emitMessages(){const _0x166554=_0x9832a8,_0x947f5a=settings['lastmsgemitted'];let _0x407e99=[];newMessages[_0x166554(0x71)](_0x1d99aa=>{const _0x5283c2=_0x166554;_0x1d99aa['number']>_0x947f5a&&_0x407e99[_0x5283c2(0x195)](_0x1d99aa);}),_0x407e99['length']>0x0&&getAllClients()[_0x166554(0x71)](_0x1da8c6=>{const _0x376809=_0x166554;getSocket(_0x1da8c6['id'])[_0x376809(0x88)]('message',_0x407e99);});}function confirmMessage(_0x595d83){const _0x2653a5=_0x9832a8;updateSetting(_0x2653a5(0xf5),Number(_0x595d83));}function isNewerVersion(_0x5f2599,_0x52629e){const _0x1164c0=_0x9832a8,_0x495945=_0x52629e['split']('.'),_0x3a5acd=_0x5f2599[_0x1164c0(0x86)]('.');for(var _0x2f80d1=0x0;_0x2f80d1<_0x3a5acd[_0x1164c0(0xbe)];_0x2f80d1++){const _0x1f8411=~~_0x3a5acd[_0x2f80d1],_0x349761=~~_0x495945[_0x2f80d1];if(_0x1f8411>_0x349761)return!![];if(_0x1f8411<_0x349761)return![];}return![];}function toTelegramMarkdown(_0x233b74){const _0x592dc7=_0x9832a8,_0x2f0dab=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2f1398=/\*{2}(.+?)\*{2}/gim;return _0x233b74=_0x233b74['replace'](_0x2f0dab,_0x592dc7(0x1f5))['replace'](_0x2f1398,_0x592dc7(0x215)),_0x233b74;}async function validateConfigFile(){const _0xb2ca6f=_0x9832a8,_0x335338=dbConfig[_0xb2ca6f(0xa4)](_0xb2ca6f(0xc6))[_0xb2ca6f(0x238)](_0xb2ca6f(0x125))[_0xb2ca6f(0x210)]()||[];if(_0x335338[_0xb2ca6f(0xbe)]==0x0){let _0x260a46=0x0,_0x476e0a=[];const _0x4d8fbc=/^bot-([0-9]{3})-config.json$/,_0x2a1cfe=fs[_0xb2ca6f(0xb7)](configpath);_0x2a1cfe[_0xb2ca6f(0x71)](_0x4c5561=>{const _0x241578=_0xb2ca6f,_0x47d862=_0x4d8fbc[_0x241578(0x1b4)](_0x4c5561);if(_0x47d862){const _0x3ad7cb=_0x47d862[0x1];let _0x428ab6=getBotAttributes(_0x3ad7cb);_0x476e0a[_0x241578(0x195)]({'botID':_0x3ad7cb,'botname':_0x428ab6[_0x241578(0x1d3)],'status':'disabled','live':_0x241578(0x109)}),_0x260a46++;}}),_0x260a46!=0x0&&(dbConfig['get'](_0xb2ca6f(0xc6))[_0xb2ca6f(0xfa)](_0x476e0a)[_0xb2ca6f(0x1f2)](),config=_0x476e0a,restoredConfigFile=_0x260a46);}}async function restoreConfigNotify(_0x111798){const _0x431268=_0x9832a8;let _0x2ad424;if(restoredConfigFile==0x1)_0x2ad424=_0x431268(0x1a7);else _0x2ad424=_0x431268(0x1a8);if(_0x111798)io['to'](_0x431268(0x9f))[_0x431268(0x88)](_0x431268(0x199),_0x2ad424);else{logger[_0x431268(0xd8)](_0x431268(0x8b)),logger['simple'](_0x2ad424),logger[_0x431268(0xd8)]('-----------------------------------------------------------------------------------'),logger[_0x431268(0xd8)]('');if(tgBot&&settings[_0x431268(0x241)]&&settings['telegramEvents']!=_0x431268(0x142))tgBot[_0x431268(0x173)](settings[_0x431268(0x241)],_0x431268(0x108)+_0x2ad424)['catch'](_0x308cee=>{telegramError(_0x308cee);});}}function validateCredentials(_0x2d9bba,_0x5975d9){const _0x585b21=_0x9832a8;if(_0x2d9bba[_0x585b21(0xc4)]==settings['bbUsername']&&bcrypt[_0x585b21(0x1a9)](_0x2d9bba['password'],settings['bbPassword'])){if(settings[_0x585b21(0x19c)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x6d1d8f=generateLoginToken(_0x5975d9);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x6d1d8f};}}else return{'allow':![],'reason':_0x585b21(0x98),'token':null};}function refreshToken(_0x4e8396){const _0x2718b7=_0x9832a8,_0x119962=generateLoginToken(_0x4e8396);return{'allow':!![],'reason':_0x2718b7(0x228),'token':_0x119962};}function validateAccess(_0x2233f0,_0x95f738,_0x4939e7){const _0x2dd46b=_0x9832a8,_0x418229=_0x4939e7?_0x4939e7:devices[_0x95f738]['ip'];let _0x4e25e0;const _0x594106=_0x4c0612=>{const _0x46c7a5=_0x511f;if(settings[_0x46c7a5(0x1d0)]){if(settings[_0x46c7a5(0x19c)]){if(telegram2FaApproved(_0x95f738)){const _0x33181f=generateLoginToken(_0x95f738);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x33181f};}else return{'allow':![],'reason':_0x46c7a5(0x1b5),'token':null};}else return _0x4e25e0=validToken(_0x4c0612,_0x95f738),_0x4e25e0[_0x46c7a5(0x141)](_0x46c7a5(0xe2))?{'allow':!![],'reason':_0x46c7a5(0x232),'token':_0x4c0612}:{'allow':![],'reason':_0x46c7a5(0x1b5),'token':null};}else return{'allow':!![],'reason':_0x46c7a5(0x1d9),'token':null};};if(settings['whitelistEnabled']){let _0x32f9fd=[...settings['whitelist'],_0x2dd46b(0x8d),_0x2dd46b(0xa7),_0x2dd46b(0x115)];if(_0x32f9fd['includes'](_0x418229))return _0x594106(_0x2233f0);else{_0x4e25e0=validToken(_0x2233f0,_0x95f738);if(_0x4e25e0[_0x2dd46b(0x141)](_0x2dd46b(0xe2)))return _0x594106(_0x2233f0);else{if(telegramIpApproved(_0x95f738)){const _0x313235=generateToken(_0x95f738);return _0x4e25e0=_0x594106(_0x2233f0),_0x4e25e0[_0x2dd46b(0x1be)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x313235}:_0x4e25e0;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2dd46b(0x79),'token':null};}}}else return _0x594106(_0x2233f0);}function timelyDecrypt(_0x15abdb,_0x51c9d2=!![]){const _0x972c02=_0x9832a8;if(_0x15abdb)try{const _0xcf9241=crypt[_0x972c02(0x13a)](secure[_0x972c02(0x23d)],_0x15abdb)[_0x972c02(0x21f)],_0x3b0974=_0xcf9241[_0x972c02(0x86)]('@')[0x0],_0x1e327a=_0xcf9241[_0x972c02(0x86)]('@')[0x1],_0x4a1195=new Date()[_0x972c02(0x218)]();if(_0x51c9d2){if(_0x4a1195-_0x1e327a<maxSecretAge*0x3e8)return _0x3b0974;else return![];}else return _0x3b0974;}catch(_0x29055f){return![];}else return![];}const validToken=(_0x5369b9,_0x2af017)=>{const _0x23554c=_0x9832a8,_0x260f21=devices[_0x2af017]['ip'];if(!_0x5369b9)return{'error':_0x23554c(0xbc)};for(let _0x59afaf of blacklist){if(_0x59afaf[_0x23554c(0x7f)]==_0x5369b9)return{'error':_0x23554c(0x1e8)};}let _0x3f9ab2;try{_0x3f9ab2=jwt[_0x23554c(0x23a)](_0x5369b9,secure[_0x23554c(0x213)]+_0x2af017);}catch{return{'error':_0x23554c(0xd0)};}if(!_0x3f9ab2[_0x23554c(0x141)](_0x23554c(0xac))&&!_0x3f9ab2[_0x23554c(0x141)]('username')||!_0x3f9ab2[_0x23554c(0x141)](_0x23554c(0x164)))return{'error':_0x23554c(0x186)};if(!_0x3f9ab2[_0x23554c(0x141)](_0x23554c(0xc4))&&_0x3f9ab2['hasOwnProperty'](_0x23554c(0xac))){const {clientip:_0x3d0444}=_0x3f9ab2;return _0x260f21==_0x3d0444?{'success':_0x23554c(0x152)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x3f9ab2[_0x23554c(0x141)](_0x23554c(0xc4))&&_0x3f9ab2[_0x23554c(0x141)](_0x23554c(0xac))){const {username:_0x165694,clientip:_0x3a9b48}=_0x3f9ab2;return settings['bbUsername']==_0x165694&&_0x260f21==_0x3a9b48?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xd373cc=>{if(_0xd373cc){const _0x1af5d0=devices[_0xd373cc]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x1af5d0},secure['secret']+_0xd373cc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2c29db=>{const _0x1f83dd=_0x9832a8;if(_0x2c29db){const _0x4072d8=devices[_0x2c29db]['ip'];return jwt[_0x1f83dd(0xdb)]({'clientip':_0x4072d8},secure[_0x1f83dd(0x213)]+_0x2c29db,{'expiresIn':devices[_0x2c29db][_0x1f83dd(0x237)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x165bad=>{const _0x4ecb54=_0x9832a8;let _0x18aeb2=![];return devices[_0x165bad][_0x4ecb54(0x237)]&&devices[_0x165bad]['telegramIpApproval']['expiry']!=_0x4ecb54(0xa5)&&(_0x18aeb2=devices[_0x165bad][_0x4ecb54(0x237)]['clientip']==devices[_0x165bad]['ip']&&new Date()['getTime']()-devices[_0x165bad][_0x4ecb54(0x237)][_0x4ecb54(0x1b2)]<devices[_0x165bad]['telegramIpApproval'][_0x4ecb54(0xe5)]*0x3c*0x3e8),_0x18aeb2;},telegram2FaApproved=_0xbac5db=>{const _0x38a711=_0x9832a8;let _0x23c369=![];return devices[_0xbac5db][_0x38a711(0x16b)]&&devices[_0xbac5db][_0x38a711(0x16b)][_0x38a711(0xe5)]!='reject'&&(_0x23c369=devices[_0xbac5db][_0x38a711(0x16b)][_0x38a711(0xac)]==devices[_0xbac5db]['ip']&&new Date()['getTime']()-devices[_0xbac5db][_0x38a711(0x16b)][_0x38a711(0x1b2)]<devices[_0xbac5db][_0x38a711(0x16b)][_0x38a711(0xe5)]*0x3c*0x3e8),_0x23c369;},normalizeIP=_0x55d1a0=>{const _0x3cd825=_0x9832a8;let _0x40b4b5=null,_0x31ce0b=null;if(ipaddr[_0x3cd825(0x244)](_0x55d1a0)){const _0x21cfa3=ipaddr[_0x3cd825(0x1b0)](_0x55d1a0);_0x21cfa3[_0x3cd825(0x72)]()==='ipv6'?(_0x21cfa3[_0x3cd825(0x157)]()&&(_0x40b4b5=_0x21cfa3[_0x3cd825(0xdc)]()[_0x3cd825(0xde)]()),_0x31ce0b=_0x21cfa3[_0x3cd825(0xde)]()):(_0x40b4b5=_0x21cfa3[_0x3cd825(0xde)](),_0x31ce0b=_0x21cfa3[_0x3cd825(0x89)]()['toString']());}return{'show':_0x40b4b5?_0x40b4b5:_0x31ce0b,'store':_0x31ce0b};};function formatDate(_0x11a2e6){const _0x49c1fb=_0x9832a8;return _0x11a2e6['getFullYear']()+'/'+(_0x11a2e6[_0x49c1fb(0xf9)]()+0x1)[_0x49c1fb(0xde)]()['padStart'](0x2,'0')+'/'+_0x11a2e6[_0x49c1fb(0x159)]()[_0x49c1fb(0xde)]()['padStart'](0x2,'0')+'\x20'+_0x11a2e6[_0x49c1fb(0xc5)]()['toString']()['padStart'](0x2,'0')+':'+_0x11a2e6['getMinutes']()[_0x49c1fb(0xde)]()[_0x49c1fb(0x1bf)](0x2,'0')+':'+_0x11a2e6[_0x49c1fb(0x1a0)]()[_0x49c1fb(0xde)]()[_0x49c1fb(0x1bf)](0x2,'0');}function sleep(_0x4c738b){return new Promise(_0x1e2c9f=>setTimeout(_0x1e2c9f,_0x4c738b));}