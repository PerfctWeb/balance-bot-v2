const _0x4b3da4=_0x4b30;(function(_0x24a95e,_0xcb4e05){const _0x3328c6=_0x4b30,_0x1113ad=_0x24a95e();while(!![]){try{const _0x4b5a81=-parseInt(_0x3328c6(0x1bf))/0x1*(parseInt(_0x3328c6(0x1f8))/0x2)+-parseInt(_0x3328c6(0x145))/0x3*(-parseInt(_0x3328c6(0x1fd))/0x4)+-parseInt(_0x3328c6(0x1af))/0x5*(parseInt(_0x3328c6(0x217))/0x6)+-parseInt(_0x3328c6(0x1c8))/0x7*(parseInt(_0x3328c6(0x19a))/0x8)+parseInt(_0x3328c6(0x1e8))/0x9*(parseInt(_0x3328c6(0x203))/0xa)+-parseInt(_0x3328c6(0x13a))/0xb+parseInt(_0x3328c6(0x22d))/0xc*(parseInt(_0x3328c6(0x26c))/0xd);if(_0x4b5a81===_0xcb4e05)break;else _0x1113ad['push'](_0x1113ad['shift']());}catch(_0x3b916f){_0x1113ad['push'](_0x1113ad['shift']());}}}(_0x67f6,0xab5aa));const _0x119c79=function(){let _0x4c8305=!![];return function(_0x23b331,_0x4d8ed1){const _0x4f6249=_0x4c8305?function(){const _0x254258=_0x4b30;if(_0x4d8ed1){const _0x51ccee=_0x4d8ed1[_0x254258(0x229)](_0x23b331,arguments);return _0x4d8ed1=null,_0x51ccee;}}:function(){};return _0x4c8305=![],_0x4f6249;};}(),_0x123db5=_0x119c79(this,function(){const _0x2da735=_0x4b30;return _0x123db5[_0x2da735(0x130)]()['search'](_0x2da735(0x18e))[_0x2da735(0x130)]()['constructor'](_0x123db5)[_0x2da735(0x275)](_0x2da735(0x18e));});_0x123db5();'use strict';process[_0x4b3da4(0x238)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4b3da4(0x1c5)),FileSync=require(_0x4b3da4(0x1db)),fs=require('fs'),fns=require(_0x4b3da4(0x257)),low=require(_0x4b3da4(0x26a)),path=require(_0x4b3da4(0x1be)),crypto=require(_0x4b3da4(0x25e)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x4b3da4(0x1f5))[_0x4b3da4(0x22e)],bcrypt=require(_0x4b3da4(0x230)),jwt=require(_0x4b3da4(0x164)),analyticsLib=require(_0x4b3da4(0x214))['default'],googleAnalytics=require(_0x4b3da4(0x218))['default'],ipaddr=require(_0x4b3da4(0x15a)),argv=require(_0x4b3da4(0x263))(process[_0x4b3da4(0x17a)]['slice'](0x2))[_0x4b3da4(0x17a)],PORT=argv[_0x4b3da4(0x1d7)]||_0x4b3da4(0x190),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4b3da4(0x198)](PORT))return console['log'](_0x4b3da4(0x202)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1);const HOST=argv[_0x4b3da4(0x224)]||null,userID=argv[_0x4b3da4(0x252)]||'';let bbpath=_0x4b3da4(0x158),bbpath2='';const botfile=_0x4b3da4(0x21e),configfile='bb-config.json',settingsfile=_0x4b3da4(0x259),securefile=_0x4b3da4(0x267),validInstallation=fs[_0x4b3da4(0x14c)](_0x4b3da4(0x239));!fs[_0x4b3da4(0x14c)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4b3da4(0x205)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x4b3da4(0x168),configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x4b3da4(0x1ad)](configpath);!fs[_0x4b3da4(0x14c)](configbackuppath)&&fs[_0x4b3da4(0x1ad)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4b3da4(0x21b)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4b3da4(0x21b)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4b3da4(0x21b)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x4b3da4(0x17c)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x4b3da4(0x22a)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4b3da4(0x1d3)),app=express(),http=require(_0x4b3da4(0x133))['createServer'](app);app[_0x4b3da4(0x23d)](express[_0x4b3da4(0x1e5)](path[_0x4b3da4(0x240)](__dirname,bbpath2,_0x4b3da4(0x1f6)))),app[_0x4b3da4(0x23d)](express[_0x4b3da4(0x1e5)](path[_0x4b3da4(0x240)](__dirname,bbpath2,_0x4b3da4(0x183)))),app[_0x4b3da4(0x15e)]('/',function(_0x48e206,_0x3c4f7b){const _0x359d45=_0x4b3da4;_0x3c4f7b['sendFile'](path[_0x359d45(0x240)](__dirname,bbpath2,_0x359d45(0x1f6),'index.html'));}),app[_0x4b3da4(0x15e)](_0x4b3da4(0x1ff),function(_0xf5a029,_0x23978c){const _0x1000ed=_0x4b3da4;_0x23978c['sendFile'](path[_0x1000ed(0x240)](__dirname,bbpath2,'build',_0x1000ed(0x1f3)));}),app['get'](_0x4b3da4(0x179),(_0x5aed7a,_0x49e5b8)=>{const _0x4aad18=_0x4b3da4;_0x49e5b8[_0x4aad18(0x13d)](path[_0x4aad18(0x240)](__dirname,bbpath2,_0x4aad18(0x183),_0x4aad18(0x1f3)));}),app[_0x4b3da4(0x15e)](_0x4b3da4(0x262),(_0x2a2815,_0xd2b8eb)=>{const _0x417e74=_0x4b3da4;_0xd2b8eb['sendFile'](path['join'](__dirname,bbpath2,'build',_0x417e74(0x1f3)));}),app['get'](_0x4b3da4(0x15d),(_0x480be5,_0x428d9a)=>{const _0x363f96=_0x4b3da4;_0x428d9a['sendFile'](path[_0x363f96(0x240)](__dirname,bbpath2,_0x363f96(0x183),_0x363f96(0x1f3)));}),app[_0x4b3da4(0x15e)](_0x4b3da4(0x1ec),(_0x1b07db,_0x5a9fa4)=>{const _0x8da7e8=_0x4b3da4;_0x5a9fa4[_0x8da7e8(0x13d)](path[_0x8da7e8(0x240)](__dirname,bbpath2,_0x8da7e8(0x183),_0x8da7e8(0x1f3)));}),app[_0x4b3da4(0x15e)]('/:bot/configuration',(_0x25e946,_0x43ef92)=>{const _0x1a10a7=_0x4b3da4;_0x43ef92['sendFile'](path[_0x1a10a7(0x240)](__dirname,bbpath2,_0x1a10a7(0x183),_0x1a10a7(0x1f3)));}),app[_0x4b3da4(0x15e)](_0x4b3da4(0x236),(_0x230e59,_0x2109b2)=>{const _0x40aa46=_0x4b3da4;_0x2109b2['sendFile'](path[_0x40aa46(0x240)](__dirname,bbpath2,'build','index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x4b3da4(0x13f)](PORT);const io=require(_0x4b3da4(0x167))(http,{}),analytics=analyticsLib({'app':_0x4b3da4(0x23e),'plugins':[googleAnalytics({'trackingId':_0x4b3da4(0x15c)})]}),TelegramBot=require(_0x4b3da4(0x242));let tgBot;if(settings['telegramToken']&&settings[_0x4b3da4(0x209)]!=''&&settings[_0x4b3da4(0x1a0)]&&settings[_0x4b3da4(0x1a0)]!='')initTelegram();function _0x4b30(_0x503a0c,_0x461b10){const _0x2843ce=_0x67f6();return _0x4b30=function(_0x123db5,_0x119c79){_0x123db5=_0x123db5-0x129;let _0x67f620=_0x2843ce[_0x123db5];return _0x67f620;},_0x4b30(_0x503a0c,_0x461b10);}initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x47ac29=_0x4b3da4;console[_0x47ac29(0x1c4)](''),console[_0x47ac29(0x1c4)]('-----------------------------------------------------------------------------------'),logging(_0x47ac29(0x147)+PORT),console[_0x47ac29(0x1c4)](_0x47ac29(0x20f));if(config['length']!=0x0)config[_0x47ac29(0x15b)](_0x289687=>{const _0x3b2d2d=_0x47ac29;if(_0x289687[_0x3b2d2d(0x204)]==_0x3b2d2d(0x1b8)||_0x289687[_0x3b2d2d(0x204)]==_0x3b2d2d(0x1da))logging(_0x3b2d2d(0x22b)+_0x289687[_0x3b2d2d(0x213)]+_0x3b2d2d(0x16b)+_0x289687[_0x3b2d2d(0x17d)]),startBot([_0x289687[_0x3b2d2d(0x213)],userID],{'cwd':bbpath},function(_0x281471){if(_0x281471)logging(_0x281471);});else(_0x289687[_0x3b2d2d(0x204)]=='disabled'||_0x289687[_0x3b2d2d(0x204)]=='new-disabled')&&logging(_0x3b2d2d(0x246)+_0x289687[_0x3b2d2d(0x213)]+_0x3b2d2d(0x16b)+_0x289687[_0x3b2d2d(0x17d)]);});else!newBot&&console[_0x47ac29(0x1c4)](_0x47ac29(0x149));if(newBot)addBot();console[_0x47ac29(0x1c4)](_0x47ac29(0x20f)),console['log']('');}function startSocket(){const _0x31e8f6=_0x4b3da4;io['on'](_0x31e8f6(0x1df),_0x137fa5=>{const _0x46bcef=_0x31e8f6;let _0x18eed8,_0x815e10,_0x3cb69b,_0x24befc,_0x537cba;const _0x2946c4=_0x137fa5[_0x46bcef(0x189)][_0x46bcef(0x1de)][_0x46bcef(0x142)];_0x815e10=_0x2946c4[_0x46bcef(0x136)](/bot[0-9]{3}/);if(_0x815e10)_0x3cb69b=_0x815e10[0x0]['match'](/[0-9]{3}/);if(_0x3cb69b)_0x18eed8=_0x3cb69b[0x0];else _0x18eed8=_0x46bcef(0x1bc);const _0x4a4462=_0x137fa5[_0x46bcef(0x189)][_0x46bcef(0x1fe)]['encryptedUuid'];if(!_0x4a4462)_0x137fa5[_0x46bcef(0x270)]('status',{'publicKey':secure[_0x46bcef(0x156)]});else{_0x24befc=timelyDecrypt(_0x4a4462,![]);if(!_0x24befc)_0x137fa5[_0x46bcef(0x270)](_0x46bcef(0x204),{'publicKey':secure[_0x46bcef(0x156)]});else{_0x537cba=normalizeIP(_0x137fa5[_0x46bcef(0x1c6)][_0x46bcef(0x14e)])[_0x46bcef(0x243)];if(!devices[_0x24befc])devices[_0x24befc]={'uuid':_0x24befc,'access':{'token':null}};devices[_0x24befc]['ip']=_0x537cba;const _0x32c315=addClient(_0x137fa5['id'],_0x24befc,_0x18eed8);setAccess(_0x32c315),_0x137fa5['on']('login',_0x311a17=>{const _0x5c1b74=_0x46bcef,_0x19b64b=timelyDecrypt(_0x311a17[_0x5c1b74(0x201)]);if(_0x19b64b){_0x311a17={'username':_0x311a17[_0x5c1b74(0x1b2)],'password':_0x19b64b},devices[_0x24befc][_0x5c1b74(0x254)]=validateCredentials(_0x311a17,_0x24befc);if(devices[_0x24befc][_0x5c1b74(0x254)][_0x5c1b74(0x1cf)]==![]&&devices[_0x24befc]['access']['reason']==_0x5c1b74(0x1e0))_0x137fa5[_0x5c1b74(0x270)](_0x5c1b74(0x204),{'access':devices[_0x24befc][_0x5c1b74(0x254)]}),loginAccess2FA(_0x24befc,_0x537cba);else{if(devices[_0x24befc][_0x5c1b74(0x254)][_0x5c1b74(0x1cf)]==![]&&devices[_0x24befc][_0x5c1b74(0x254)]['reason']==_0x5c1b74(0x219))_0x137fa5[_0x5c1b74(0x270)](_0x5c1b74(0x204),{'access':devices[_0x24befc][_0x5c1b74(0x254)]});else devices[_0x24befc][_0x5c1b74(0x254)][_0x5c1b74(0x1cf)]&&devices[_0x24befc][_0x5c1b74(0x254)][_0x5c1b74(0x22f)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x24befc)[_0x5c1b74(0x15b)](_0x31b65b=>{setAccess(_0x31b65b);}),setTokenRefresh(_0x24befc),setSessionTimeout(_0x5c1b74(0x1cd),_0x24befc));}}else logging(_0x5c1b74(0x25c));}),_0x137fa5['on'](_0x46bcef(0x1e9),()=>{resetPassword();}),_0x137fa5['on'](_0x46bcef(0x1b5),_0x2c0378=>{removeClient(_0x137fa5['id']);});}}});}function initClient(_0x34e6c4){const _0xd1aac1=_0x4b3da4;if(_0x34e6c4!=_0xd1aac1(0x1bc)&&config[_0xd1aac1(0x272)]!=''){if(pid[_0x34e6c4])pid[_0x34e6c4][_0xd1aac1(0x21c)]({'function':_0xd1aac1(0x18f),'args':null});}}function getSocket(_0x464785){const _0xc1a87f=_0x4b3da4;return io[_0xc1a87f(0x24c)][_0xc1a87f(0x24c)][_0xc1a87f(0x15e)](_0x464785);}function setAccess(_0x57edf4){const _0x2e3df0=_0x4b3da4,_0x45699d=getSocket(_0x57edf4['id']),_0x7904c1=_0x57edf4[_0x2e3df0(0x1f0)],_0x5c31c7=_0x57edf4[_0x2e3df0(0x1cc)];devices[_0x7904c1][_0x2e3df0(0x254)]=validateAccess(devices[_0x7904c1][_0x2e3df0(0x254)]['token'],_0x7904c1),_0x45699d[_0x2e3df0(0x240)](_0x7904c1);if(devices[_0x7904c1][_0x2e3df0(0x254)][_0x2e3df0(0x1cf)]){_0x45699d[_0x2e3df0(0x240)](_0x5c31c7);if(_0x5c31c7==_0x2e3df0(0x1bc))initializeSocketBotManager(_0x45699d);else initializeSocketBot(_0x45699d);initClient(_0x5c31c7);}devices[_0x7904c1]['access'][_0x2e3df0(0x20a)]&&devices[_0x7904c1][_0x2e3df0(0x254)][_0x2e3df0(0x22f)]==_0x2e3df0(0x23a)&&setSessionTimeout('2FA',_0x7904c1),devices[_0x7904c1]['access'][_0x2e3df0(0x20a)]&&devices[_0x7904c1][_0x2e3df0(0x254)][_0x2e3df0(0x22f)]==_0x2e3df0(0x24d)&&setSessionTimeout('login',_0x7904c1),_0x45699d[_0x2e3df0(0x270)]('status',{'status':_0x57edf4['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x7904c1]['access'],'externalip':devices[_0x7904c1]['ip'],'publicKey':secure[_0x2e3df0(0x156)],'validInstallation':validInstallation}),devices[_0x7904c1]['access'][_0x2e3df0(0x1cf)]==![]&&devices[_0x7904c1][_0x2e3df0(0x254)][_0x2e3df0(0x22f)]==_0x2e3df0(0x26e)&&temporaryAccess2FA(_0x7904c1,devices[_0x7904c1]['ip']);}function setSessionTimeout(_0x13cfdd,_0x5e8198){const _0x11d94d=_0x4b3da4;let _0x392b13;if(_0x13cfdd=='login')_0x392b13=loginExpiry*0x3c*0x3e8;else _0x392b13=devices[_0x5e8198][_0x11d94d(0x1f7)][_0x11d94d(0x1d2)]*0x3c*0x3e8-(new Date()[_0x11d94d(0x12a)]()-devices[_0x5e8198][_0x11d94d(0x1f7)][_0x11d94d(0x176)]);if(devices[_0x5e8198][_0x11d94d(0x165)])clearTimeout(devices[_0x5e8198]['pidExpireLogin']);devices[_0x5e8198][_0x11d94d(0x165)]=setTimeout(()=>{const _0x7f1352=_0x11d94d;if(devices[_0x5e8198][_0x7f1352(0x1c1)])clearTimeout(devices[_0x5e8198]['pidRefreshToken']);removeSocketListeners(_0x5e8198),addBlacklist(_0x5e8198),devices[_0x5e8198][_0x7f1352(0x1f7)]=null,devices[_0x5e8198]['telegram2FaApproval']=null,devices[_0x5e8198][_0x7f1352(0x254)]['token']=null,devices[_0x5e8198][_0x7f1352(0x254)]=validateAccess(devices[_0x5e8198][_0x7f1352(0x254)]['token'],_0x5e8198),!(devices[_0x5e8198][_0x7f1352(0x254)][_0x7f1352(0x1cf)]&&devices[_0x5e8198]['access'][_0x7f1352(0x22f)]==_0x7f1352(0x18c))&&(_0x13cfdd==_0x7f1352(0x1cd)?io['to'](_0x5e8198)[_0x7f1352(0x270)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x5e8198)[_0x7f1352(0x270)](_0x7f1352(0x204),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5e8198][_0x7f1352(0x254)][_0x7f1352(0x20a)]=null;},_0x392b13);}function setTokenRefresh(_0x491957){const _0x20a250=_0x4b3da4;if(devices[_0x491957]['pidRefreshToken'])clearTimeout(devices[_0x491957][_0x20a250(0x1c1)]);devices[_0x491957]['pidRefreshToken']=setTimeout(()=>{const _0x593f38=_0x20a250;getClientsWithUuid(_0x491957)['length']!=0x0?(devices[_0x491957]['access']=refreshToken(_0x491957),io['to'](_0x491957)[_0x593f38(0x270)]('status',{'status':_0x593f38(0x154),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x491957]['access'],'externalip':devices[_0x491957]['ip'],'publicKey':secure[_0x593f38(0x156)],'validInstallation':validInstallation}),setTokenRefresh(_0x491957)):clearTimeout(devices[_0x491957][_0x593f38(0x1c1)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5d0457){const _0x1ea8d3=_0x4b3da4,_0x45a50b=getClient(_0x5d0457['id'])[_0x1ea8d3(0x1f0)];_0x5d0457[_0x1ea8d3(0x270)](_0x1ea8d3(0x237),config),_0x5d0457[_0x1ea8d3(0x270)]('settings',cleanSettings()),_0x5d0457['on'](_0x1ea8d3(0x14a),_0x22f7d5=>{const _0x2dfaf4=_0x1ea8d3;if(validateAccess(_0x22f7d5,_0x45a50b)[_0x2dfaf4(0x1cf)])addBot();else logging(_0x2dfaf4(0x241));}),_0x5d0457['on'](_0x1ea8d3(0x256),(_0x1fc6f8,_0x1c4544)=>{const _0x4b89d1=_0x1ea8d3;if(validateAccess(_0x1c4544,_0x45a50b)[_0x4b89d1(0x1cf)])toggleBot(_0x1fc6f8[_0x4b89d1(0x213)],_0x1fc6f8[_0x4b89d1(0x204)],_0x1fc6f8[_0x4b89d1(0x192)]);else logging(_0x4b89d1(0x1a6));}),_0x5d0457['on'](_0x1ea8d3(0x178),(_0x2780f5,_0x5b5b94)=>{const _0x402c59=_0x1ea8d3;if(validateAccess(_0x5b5b94,_0x45a50b)[_0x402c59(0x1cf)])deleteBot(_0x2780f5);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5d0457['on'](_0x1ea8d3(0x181),(_0x4fa444,_0x11a78c)=>{const _0xc911b2=_0x1ea8d3;if(validateAccess(_0x11a78c,_0x45a50b)[_0xc911b2(0x1cf)])storeSettings(_0x4fa444,!![]);else logging(_0xc911b2(0x255));}),_0x5d0457['on'](_0x1ea8d3(0x222),(_0x9b7fdf,_0x472c0a)=>{if(validateAccess(_0x472c0a,_0x45a50b)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5d0457['on'](_0x1ea8d3(0x24b),_0x5c43fa=>{const _0x35315e=_0x1ea8d3;if(validateAccess(_0x5c43fa,_0x45a50b)[_0x35315e(0x1cf)]){if(devices[_0x45a50b][_0x35315e(0x1c1)])clearTimeout(devices[_0x45a50b]['pidRefreshToken']);if(devices[_0x45a50b][_0x35315e(0x165)])clearTimeout(devices[_0x45a50b][_0x35315e(0x165)]);removeSocketListeners(getClient(_0x5d0457['id'])[_0x35315e(0x1f0)]),addBlacklist(_0x45a50b),devices[_0x45a50b][_0x35315e(0x1f7)]=null,devices[_0x45a50b][_0x35315e(0x1b4)]=null,devices[_0x45a50b]['access']['token']=null,io['to'](getClient(_0x5d0457['id'])[_0x35315e(0x1f0)])['emit'](_0x35315e(0x204),{'access':{'allow':![],'reason':_0x35315e(0x1f2),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x5a7832){const _0x271b4c=_0x4b3da4,_0x5f3f01=getClient(_0x5a7832['id'])['bot'],_0xc977d4=getClient(_0x5a7832['id'])[_0x271b4c(0x1f0)];_0x5a7832['on'](_0x271b4c(0x199),(_0x17d13b,_0x56728c)=>{const _0x34f48a=_0x271b4c;if(validateAccess(_0x56728c,_0xc977d4)['allow']){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x34f48a(0x21c)]({'function':_0x34f48a(0x196),'args':_0x17d13b});}else logging(_0x34f48a(0x207));}),_0x5a7832['on'](_0x271b4c(0x1a2),(_0x299a4e,_0x2c6fa2)=>{const _0x455ff1=_0x271b4c;if(validateAccess(_0x2c6fa2,_0xc977d4)[_0x455ff1(0x1cf)]){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x455ff1(0x21c)]({'function':'getPortfolio','args':_0x299a4e});}else logging(_0x455ff1(0x197));}),_0x5a7832['on'](_0x271b4c(0x19e),(_0x58824d,_0x249f03)=>{const _0x2dd0c8=_0x271b4c;if(validateAccess(_0x249f03,_0xc977d4)[_0x2dd0c8(0x1cf)]){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x2dd0c8(0x21c)]({'function':_0x2dd0c8(0x24f),'args':_0x58824d});}else logging(_0x2dd0c8(0x184));}),_0x5a7832['on'](_0x271b4c(0x14b),(_0x1e9838,_0x5e2694)=>{const _0x2e8ae8=_0x271b4c;if(validateAccess(_0x5e2694,_0xc977d4)[_0x2e8ae8(0x1cf)]){if(pid[_0x5f3f01])pid[_0x5f3f01]['send']({'function':'storeHeadless','args':_0x1e9838});}else logging(_0x2e8ae8(0x1e2));}),_0x5a7832['on'](_0x271b4c(0x12b),_0x15cd45=>{const _0x2951ca=_0x271b4c;if(validateAccess(_0x15cd45,_0xc977d4)[_0x2951ca(0x1cf)]){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x2951ca(0x21c)]({'function':_0x2951ca(0x160),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5a7832['on'](_0x271b4c(0x1ea),(_0xbbc989,_0x5da1f6)=>{const _0x4420ab=_0x271b4c;if(validateAccess(_0x5da1f6,_0xc977d4)['allow']){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x4420ab(0x21c)]({'function':_0x4420ab(0x166),'args':_0xbbc989});}else logging(_0x4420ab(0x13c));}),_0x5a7832['on'](_0x271b4c(0x211),_0x5cb8c8=>{const _0x9a27d0=_0x271b4c;if(validateAccess(_0x5cb8c8,_0xc977d4)[_0x9a27d0(0x1cf)]){if(pid[_0x5f3f01])pid[_0x5f3f01][_0x9a27d0(0x21c)]({'function':'cancelLoading','args':null});}else logging(_0x9a27d0(0x19d));}),_0x5a7832['on'](_0x271b4c(0x24b),_0x23c7ea=>{const _0x2e9063=_0x271b4c;if(validateAccess(_0x23c7ea,_0xc977d4)['allow']){if(devices[_0xc977d4][_0x2e9063(0x1c1)])clearTimeout(devices[_0xc977d4]['pidRefreshToken']);if(devices[_0xc977d4][_0x2e9063(0x165)])clearTimeout(devices[_0xc977d4][_0x2e9063(0x165)]);removeSocketListeners(getClient(_0x5a7832['id'])[_0x2e9063(0x1f0)]),addBlacklist(_0xc977d4),devices[_0xc977d4][_0x2e9063(0x1f7)]=null,devices[_0xc977d4][_0x2e9063(0x1b4)]=null,devices[_0xc977d4]['access'][_0x2e9063(0x20a)]=null,io['to'](getClient(_0x5a7832['id'])[_0x2e9063(0x1f0)])[_0x2e9063(0x270)](_0x2e9063(0x204),{'access':{'allow':![],'reason':_0x2e9063(0x1f2),'token':null}});}else logging(_0x2e9063(0x228));});}function removeSocketListeners(_0x5f0bbc){const _0x1face9=_0x4b3da4;getClientsWithUuid(_0x5f0bbc)[_0x1face9(0x15b)](_0x4d1a12=>{const _0x52e537=_0x1face9;getSocket(_0x4d1a12['id'])[_0x52e537(0x269)]();});}function cleanSettings(){const _0x23236f=_0x4b3da4;let _0x37675f=settings;return settings[_0x23236f(0x209)]&&settings[_0x23236f(0x209)]!=''&&(_0x37675f={..._0x37675f,'telegramToken':'************'}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x37675f={..._0x37675f,'bbPassword':'************'}),_0x37675f;}function updateBB(){const _0x4c4121=_0x4b3da4;installingUpdate=!![],config[_0x4c4121(0x15b)](_0x5bd801=>{const _0x3996cd=_0x4c4121;restartBot(_0x5bd801[_0x3996cd(0x213)]);}),process[_0x4c4121(0x21c)]({'update':!![]},_0x4e2524=>{});}function startBot(_0x21d310,_0x2d455a,_0x2d83ad){const _0x3e5351=_0x4b3da4;let _0x54e5d4=![];const _0x4ab5f3=_0x21d310[0x0];_0x2d455a={..._0x2d455a,'stdio':[_0x3e5351(0x1d9),'inherit',_0x3e5351(0x1d9),'ipc']},pid[_0x4ab5f3]=childProcess[_0x3e5351(0x180)](botfile,_0x21d310,_0x2d455a),pid[_0x4ab5f3]['on'](_0x3e5351(0x268),_0x448daf=>{const _0xa659fd=_0x3e5351;switch(Object[_0xa659fd(0x261)](_0x448daf)[0x0]){case _0xa659fd(0x17d):updateBotName(_0x4ab5f3,_0x448daf['botname']);break;case _0xa659fd(0x204):updateStatus(_0x4ab5f3,_0x448daf[_0xa659fd(0x204)]);break;case'live':updateLive(_0x4ab5f3,_0x448daf[_0xa659fd(0x192)]);break;case _0xa659fd(0x134):updateLive(_0x4ab5f3,_0x448daf[_0xa659fd(0x134)]),io['to'](_0x4ab5f3)['emit'](_0xa659fd(0x204),{'access':{'allow':![],'reason':_0xa659fd(0x1c2),'token':null}});break;case _0xa659fd(0x212):_0x448daf[_0xa659fd(0x212)]==_0xa659fd(0x1b3)&&restartBot(_0x4ab5f3);_0x448daf[_0xa659fd(0x212)]==_0xa659fd(0x253)&&toggleBot(_0x4ab5f3,_0xa659fd(0x1b6),_0xa659fd(0x131));break;case _0xa659fd(0x258):sendTelegram(_0x4ab5f3,_0x448daf[_0xa659fd(0x258)]);break;case _0xa659fd(0x20b):io['to'](_0x4ab5f3)['emit'](_0x448daf[_0xa659fd(0x20b)],_0x448daf['args']);break;}}),pid[_0x4ab5f3]['on'](_0x3e5351(0x225),function(_0x2154bd){if(_0x54e5d4)return;_0x54e5d4=!![],_0x2d83ad(_0x2154bd);}),pid[_0x4ab5f3]['on']('exit',function(_0x1df7eb){const _0x313054=_0x3e5351;if(installingUpdate)return;if(_0x54e5d4)return;_0x54e5d4=!![],_0x2d83ad(null);const _0x23c90f=dbConfig[_0x313054(0x15e)](_0x313054(0x237))[_0x313054(0x227)]({'botID':_0x4ab5f3})['value']();_0x23c90f&&(_0x23c90f[_0x313054(0x204)]==_0x313054(0x1b8)||_0x23c90f[_0x313054(0x204)]==_0x313054(0x1da))&&(updateLive(_0x4ab5f3,'stopped'),logging(_0x313054(0x1eb)+_0x4ab5f3),startBot([_0x4ab5f3,userID],{'cwd':bbpath},function(_0x3aeaf2){if(_0x3aeaf2)logging(_0x3aeaf2);}));});}function stopBot(_0x3ecab2){const _0x13f5db=_0x4b3da4;getClientsWithBotID(_0x3ecab2)[_0x13f5db(0x15b)](_0x53baa1=>{const _0xc1dfad=_0x13f5db;getSocket(_0x53baa1['id'])[_0xc1dfad(0x1b5)](!![]),removeClient(_0x53baa1['id']);});if(pid[_0x3ecab2])pid[_0x3ecab2][_0x13f5db(0x253)]();}function restartBot(_0x174f6a){const _0x56483a=_0x4b3da4;if(pid[_0x174f6a])pid[_0x174f6a][_0x56483a(0x253)]();}function addBot(){const _0x33ff2f=_0x4b3da4;let _0x4a3337;for(let _0x1d59ea=0x1;_0x1d59ea<0x3e9;_0x1d59ea++){_0x4a3337=_0x1d59ea[_0x33ff2f(0x130)]()['padStart'](0x3,'0');let _0x713376=config[_0x33ff2f(0x227)](_0x3ba96f=>_0x3ba96f['botID']==_0x4a3337);if(!_0x713376)break;}if(_0x4a3337===_0x33ff2f(0x1a4)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x33ff2f(0x1e6)+_0x4a3337),dbConfig['get'](_0x33ff2f(0x237))['push']({'botID':_0x4a3337,'botname':_0x33ff2f(0x20e)+_0x4a3337,'status':'new','live':''})['write'](),startBot([_0x4a3337,userID],{'cwd':bbpath},function(_0x2c9f6c){if(_0x2c9f6c)logging(_0x2c9f6c);}),config=getConfiguration(),io['to'](_0x33ff2f(0x1bc))[_0x33ff2f(0x270)]('bots',config);}function deleteBot(_0x3ede40){const _0xe414a8=_0x4b3da4;getClientsWithBotID(_0x3ede40)[_0xe414a8(0x15b)](_0x4982dd=>{getSocket(_0x4982dd['id'])['disconnect'](!![]),removeClient(_0x4982dd['id']);}),dbConfig[_0xe414a8(0x15e)](_0xe414a8(0x237))['remove']({'botID':_0x3ede40})[_0xe414a8(0x185)](),logging(_0xe414a8(0x163)+_0x3ede40),stopBot(_0x3ede40);try{fs[_0xe414a8(0x14f)](path[_0xe414a8(0x240)](configpath,_0xe414a8(0x1c0)+_0x3ede40+'-config.json')),fs[_0xe414a8(0x14f)](path[_0xe414a8(0x240)](configpath,'bot-'+_0x3ede40+'-events.json')),fs[_0xe414a8(0x14f)](path[_0xe414a8(0x240)](configpath,'bot-'+_0x3ede40+'-performance.json')),fs[_0xe414a8(0x14f)](path['join'](configpath,_0xe414a8(0x1c0)+_0x3ede40+_0xe414a8(0x1d0)));}catch(_0x226808){if(_0x226808)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x226808);}config=getConfiguration(),io['to']('botmanager')[_0xe414a8(0x270)](_0xe414a8(0x237),config);}function toggleBot(_0x4065c8,_0x3c61fa,_0xaaa7e){const _0x34d803=_0x4b3da4;dbConfig[_0x34d803(0x15e)]('bots')['find']({'botID':_0x4065c8})['assign']({'status':_0x3c61fa})[_0x34d803(0x1e4)]({'live':_0xaaa7e})['write']();if(_0x3c61fa==_0x34d803(0x1b8)||_0x3c61fa=='new')logging(_0x34d803(0x17b)+_0x4065c8),startBot([_0x4065c8,userID],{'cwd':bbpath},function(_0x30f09a){if(_0x30f09a)logging(_0x30f09a);});else(_0x3c61fa=='disabled'||_0x3c61fa==_0x34d803(0x151))&&(logging(_0x34d803(0x177)+_0x4065c8),stopBot(_0x4065c8));config=getConfiguration(),io['to'](_0x34d803(0x1bc))[_0x34d803(0x270)]('bots',config);}function toggleStatus(_0x6ee77f){const _0x36ab5a=_0x4b3da4;let _0xf73106=dbConfig[_0x36ab5a(0x15e)](_0x36ab5a(0x237))[_0x36ab5a(0x227)]({'botID':_0x6ee77f})[_0x36ab5a(0x19c)](),_0x22a276;if(_0xf73106[_0x36ab5a(0x204)]==='enabled')_0x22a276=_0x36ab5a(0x1b6);else{if(_0xf73106[_0x36ab5a(0x204)]===_0x36ab5a(0x1da))_0x22a276=_0x36ab5a(0x151);else{if(_0xf73106[_0x36ab5a(0x204)]===_0x36ab5a(0x151))_0x22a276='new';else{if(_0xf73106[_0x36ab5a(0x204)]===_0x36ab5a(0x1b6))_0x22a276='enabled';}}}return _0x22a276;}function updateStatus(_0xb40bce,_0x507815){const _0x4c5223=_0x4b3da4;dbConfig[_0x4c5223(0x15e)](_0x4c5223(0x237))[_0x4c5223(0x227)]({'botID':_0xb40bce})[_0x4c5223(0x1e4)]({'status':_0x507815})[_0x4c5223(0x185)](),config=getConfiguration(),io['to'](_0x4c5223(0x1bc))[_0x4c5223(0x270)](_0x4c5223(0x237),config);}function updateLive(_0x4bb291,_0x466588){const _0x330abe=_0x4b3da4;dbConfig[_0x330abe(0x15e)]('bots')[_0x330abe(0x227)]({'botID':_0x4bb291})[_0x330abe(0x1e4)]({'live':_0x466588})['write'](),config=getConfiguration(),io['to'](_0x330abe(0x1bc))['emit'](_0x330abe(0x237),config);}function updateBotName(_0x2d6211,_0x5b62af){const _0x5dc61a=_0x4b3da4;dbConfig['get']('bots')[_0x5dc61a(0x227)]({'botID':_0x2d6211})[_0x5dc61a(0x1e4)]({'botname':_0x5b62af})['write'](),config=getConfiguration(),io['to'](_0x5dc61a(0x1bc))[_0x5dc61a(0x270)](_0x5dc61a(0x237),config);}function telegramError(_0x3d602b){const _0x5bfdf3=_0x4b3da4;console[_0x5bfdf3(0x1c4)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x58cb8a){const _0x338a43=_0x4b3da4;if(_0x58cb8a[_0x338a43(0x266)][_0x338a43(0x1b2)]!=settings[_0x338a43(0x1a0)]&&'@'+_0x58cb8a['from']['username']!=settings[_0x338a43(0x1a0)])return tgBot[_0x338a43(0x175)](_0x58cb8a[_0x338a43(0x248)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'})[_0x338a43(0x21d)](_0x50972b=>{telegramError(_0x50972b);}),![];return!![];}async function initTelegram(){const _0x313858=_0x4b3da4;if(tgBot)tgBot[_0x313858(0x26d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x313858(0x209)],{'polling':!![]});let _0x3e2ab8=_0x313858(0x16c);_0x3e2ab8+='\x0a',_0x3e2ab8+=_0x313858(0x12c),_0x3e2ab8+=_0x313858(0x1f1),_0x3e2ab8+=_0x313858(0x223),_0x3e2ab8+=_0x313858(0x20c),_0x3e2ab8+=_0x313858(0x135),_0x3e2ab8+=_0x313858(0x1d5),_0x3e2ab8+=_0x313858(0x1b1),_0x3e2ab8+=_0x313858(0x1fc);let _0x266e88=_0x313858(0x129);_0x266e88+='\x0a',_0x266e88+=_0x3e2ab8,tgBot[_0x313858(0x153)](/\/start/,_0xfd5b4=>{const _0x1131bf=_0x313858;if(!validateTelegram(_0xfd5b4))return;if(settings[_0x1131bf(0x216)]!=_0xfd5b4['chat']['id'])updateSetting('telegramChatId',_0xfd5b4[_0x1131bf(0x248)]['id']);updateSetting(_0x1131bf(0x1b0),!![]),tgBot[_0x1131bf(0x175)](_0xfd5b4[_0x1131bf(0x248)]['id'],_0x266e88)[_0x1131bf(0x21d)](_0x1b2f1d=>{telegramError(_0x1b2f1d);});}),tgBot[_0x313858(0x153)](/\/enable/,_0x26db82=>{const _0x11358c=_0x313858;if(!validateTelegram(_0x26db82))return;if(settings['telegramChatId']!=_0x26db82[_0x11358c(0x248)]['id'])updateSetting(_0x11358c(0x216),_0x26db82[_0x11358c(0x248)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x11358c(0x175)](_0x26db82[_0x11358c(0x248)]['id'],'Notifications\x20enabled')[_0x11358c(0x21d)](_0x20dfe4=>{telegramError(_0x20dfe4);});}),tgBot['onText'](/\/config/,async _0x3e9056=>{const _0x4fb5f2=_0x313858;if(!validateTelegram(_0x3e9056))return;tgBot[_0x4fb5f2(0x139)](_0x4fb5f2(0x231)),tgBot[_0x4fb5f2(0x175)](_0x3e9056[_0x4fb5f2(0x248)]['id'],_0x4fb5f2(0x235),{'reply_markup':{'inline_keyboard':[[{'text':_0x4fb5f2(0x1fa),'callback_data':'orders'},{'text':_0x4fb5f2(0x265),'callback_data':_0x4fb5f2(0x1c7)},{'text':_0x4fb5f2(0x1ac),'callback_data':_0x4fb5f2(0x264)}]]}})['catch'](_0x2b559b=>{telegramError(_0x2b559b);}),tgBot['on'](_0x4fb5f2(0x231),async _0x2cc689=>{const _0x2b68ae=_0x4fb5f2,_0x3b9acc=_0x2cc689[_0x2b68ae(0x16e)],_0x195f0a=_0x2cc689[_0x2b68ae(0x268)];tgBot[_0x2b68ae(0x12f)](_0x2cc689['id'])['then'](async()=>{const _0x4b986e=_0x2b68ae;_0x3b9acc==_0x4b986e(0x260)&&(updateSetting(_0x4b986e(0x220),_0x4b986e(0x260)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4b986e(0x175)](_0x195f0a[_0x4b986e(0x248)]['id'],_0x4b986e(0x1d4))[_0x4b986e(0x21d)](_0x1e04fc=>{telegramError(_0x1e04fc);}));_0x3b9acc==_0x4b986e(0x1c7)&&(updateSetting(_0x4b986e(0x220),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x4b986e(0x175)](_0x195f0a['chat']['id'],_0x4b986e(0x15f))[_0x4b986e(0x21d)](_0x609c71=>{telegramError(_0x609c71);}));_0x3b9acc==_0x4b986e(0x264)&&(updateSetting(_0x4b986e(0x220),_0x4b986e(0x264)),updateSetting(_0x4b986e(0x1b0),!![]),await tgBot[_0x4b986e(0x175)](_0x195f0a[_0x4b986e(0x248)]['id'],_0x4b986e(0x18b))[_0x4b986e(0x21d)](_0x33287f=>{telegramError(_0x33287f);}));if(!settings[_0x4b986e(0x216)])tgBot[_0x4b986e(0x175)](_0x195f0a[_0x4b986e(0x248)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x28eb3f=>{telegramError(_0x28eb3f);});}),tgBot['removeListener'](_0x2b68ae(0x231));});}),tgBot[_0x313858(0x153)](/\/status/,_0x1ef680=>{const _0x350877=_0x313858;if(!validateTelegram(_0x1ef680))return;let _0x4003d0=_0x350877(0x1d1);config[_0x350877(0x15b)](_0x2fabbf=>{const _0x3dbacb=_0x350877;_0x4003d0+=_0x3dbacb(0x20e)+_0x2fabbf[_0x3dbacb(0x213)]+_0x3dbacb(0x16b)+_0x2fabbf['botname']+':\x20'+_0x2fabbf[_0x3dbacb(0x204)]+_0x3dbacb(0x1fb)+_0x2fabbf['live']+'\x0a';}),_0x4003d0+='\x0a',_0x4003d0+=_0x350877(0x143),_0x4003d0+=!settings['telegramEnabled']?_0x350877(0x1b9):_0x350877(0x1a7),_0x4003d0+=settings[_0x350877(0x1b0)]?settings[_0x350877(0x220)]==_0x350877(0x264)?_0x350877(0x271):'Notifications\x20types:\x20'+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x350877(0x175)](_0x1ef680['chat']['id'],_0x4003d0,{'parse_mode':_0x350877(0x1d8)})[_0x350877(0x21d)](_0x5930ac=>{telegramError(_0x5930ac);});}),tgBot[_0x313858(0x153)](/\/restart/,_0x4e58c5=>{const _0x2c9041=_0x313858;if(!validateTelegram(_0x4e58c5))return;tgBot['removeListener'](_0x2c9041(0x231));const _0x363190=getEnabledBots();if(_0x363190[_0x2c9041(0x24a)]==0x0)tgBot[_0x2c9041(0x175)](_0x4e58c5[_0x2c9041(0x248)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x4aebfa=>{telegramError(_0x4aebfa);});else{if(_0x363190[_0x2c9041(0x24a)]>0x1)_0x363190[_0x2c9041(0x187)]({'botID':_0x2c9041(0x264)});let _0x45279c=[],_0x541765=[];const _0x58a207=_0x363190['length']%0x4==0x0||_0x363190[_0x2c9041(0x24a)]%0x4==0x3||_0x363190[_0x2c9041(0x24a)]%0x3==0x1?0x4:0x3;let _0x3faa88=0x0;_0x363190[_0x2c9041(0x15b)]((_0x302704,_0x3a1f73)=>{const _0x336b4d=_0x2c9041;if(_0x3a1f73%_0x58a207==0x0)_0x541765=[];_0x541765[_0x336b4d(0x187)]({'text':_0x302704[_0x336b4d(0x213)]=='all'?'All\x20bots':_0x336b4d(0x20e)+_0x302704['botID'],'callback_data':_0x302704['botID']}),_0x3a1f73%_0x58a207==0x0&&(_0x45279c[_0x3faa88]=_0x541765,_0x3faa88++);}),tgBot[_0x2c9041(0x175)](_0x4e58c5[_0x2c9041(0x248)]['id'],_0x2c9041(0x1f4),{'reply_markup':{'inline_keyboard':_0x45279c}})[_0x2c9041(0x21d)](_0x1acc6d=>{telegramError(_0x1acc6d);}),tgBot['on'](_0x2c9041(0x231),async _0x4cb582=>{const _0x27431e=_0x2c9041,_0xa56f68=_0x4cb582[_0x27431e(0x16e)],_0x12e6f2=_0x4cb582[_0x27431e(0x268)];tgBot['answerCallbackQuery'](_0x4cb582['id'])[_0x27431e(0x17e)](async()=>{const _0x406ef5=_0x27431e;if(_0xa56f68==_0x406ef5(0x264)){if(settings[_0x406ef5(0x220)]==_0x406ef5(0x260))tgBot[_0x406ef5(0x175)](_0x12e6f2[_0x406ef5(0x248)]['id'],_0x406ef5(0x1ef))[_0x406ef5(0x21d)](_0x3e1bf8=>{telegramError(_0x3e1bf8);});config['forEach'](_0x5d121e=>{restartBot(_0x5d121e['botID']);});}else{if(settings[_0x406ef5(0x220)]==_0x406ef5(0x260))tgBot[_0x406ef5(0x175)](_0x12e6f2['chat']['id'],_0x406ef5(0x23b)+_0xa56f68)[_0x406ef5(0x21d)](_0x7bae1f=>{telegramError(_0x7bae1f);});restartBot(_0xa56f68);}}),tgBot[_0x27431e(0x139)](_0x27431e(0x231));});}}),tgBot[_0x313858(0x153)](/\/on/,_0x47f722=>{const _0x569278=_0x313858;if(!validateTelegram(_0x47f722))return;tgBot[_0x569278(0x139)](_0x569278(0x231));const _0xb5f0b7=getDisabledBots();if(_0xb5f0b7['length']==0x0)tgBot[_0x569278(0x175)](_0x47f722[_0x569278(0x248)]['id'],_0x569278(0x226))['catch'](_0x1a5d7e=>{telegramError(_0x1a5d7e);});else{if(_0xb5f0b7[_0x569278(0x24a)]>0x1)_0xb5f0b7['push']({'botID':_0x569278(0x264)});let _0x1c01c0=[],_0x522f0a=[];const _0xa29318=_0xb5f0b7['length']%0x4==0x0||_0xb5f0b7[_0x569278(0x24a)]%0x4==0x3||_0xb5f0b7[_0x569278(0x24a)]%0x3==0x1?0x4:0x3;let _0xc84da7=0x0;_0xb5f0b7[_0x569278(0x15b)]((_0x72daf6,_0xe36a7f)=>{const _0x1256c1=_0x569278;if(_0xe36a7f%_0xa29318==0x0)_0x522f0a=[];_0x522f0a[_0x1256c1(0x187)]({'text':_0x72daf6[_0x1256c1(0x213)]==_0x1256c1(0x264)?_0x1256c1(0x1e1):'Bot\x20'+_0x72daf6['botID'],'callback_data':_0x72daf6[_0x1256c1(0x213)]}),_0xe36a7f%_0xa29318==0x0&&(_0x1c01c0[_0xc84da7]=_0x522f0a,_0xc84da7++);}),tgBot[_0x569278(0x175)](_0x47f722[_0x569278(0x248)]['id'],_0x569278(0x25f),{'reply_markup':{'inline_keyboard':_0x1c01c0}})[_0x569278(0x21d)](_0x4a7a89=>{telegramError(_0x4a7a89);}),tgBot['on'](_0x569278(0x231),async _0x5b476b=>{const _0x512179=_0x569278,_0x2882d8=_0x5b476b['data'],_0x23e114=_0x5b476b[_0x512179(0x268)];tgBot[_0x512179(0x12f)](_0x5b476b['id'])[_0x512179(0x17e)](async()=>{const _0x534595=_0x512179;if(_0x2882d8=='all'){if(settings['telegramEvents']==_0x534595(0x260))tgBot[_0x534595(0x175)](_0x23e114[_0x534595(0x248)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x534595(0x21d)](_0x3b5dc6=>{telegramError(_0x3b5dc6);});_0xb5f0b7[_0x534595(0x15b)](_0x3f1aa9=>{const _0x1d13f4=_0x534595;if(_0x3f1aa9[_0x1d13f4(0x213)]!=_0x1d13f4(0x264))toggleBot(_0x3f1aa9['botID'],toggleStatus(_0x3f1aa9[_0x1d13f4(0x213)]),_0x1d13f4(0x131));});}else{if(settings[_0x534595(0x220)]=='orders')tgBot['sendMessage'](_0x23e114[_0x534595(0x248)]['id'],_0x534595(0x16a)+_0x2882d8)[_0x534595(0x21d)](_0x12e220=>{telegramError(_0x12e220);});toggleBot(_0x2882d8,toggleStatus(_0x2882d8),_0x534595(0x131));}}),tgBot[_0x512179(0x139)](_0x512179(0x231));});}}),tgBot['onText'](/\/off/,_0x559f0a=>{const _0x3d06bf=_0x313858;if(!validateTelegram(_0x559f0a))return;tgBot[_0x3d06bf(0x139)]('callback_query');const _0x5c1d07=getEnabledBots();if(_0x5c1d07[_0x3d06bf(0x24a)]==0x0)tgBot[_0x3d06bf(0x175)](_0x559f0a[_0x3d06bf(0x248)]['id'],_0x3d06bf(0x247))[_0x3d06bf(0x21d)](_0x375baa=>{telegramError(_0x375baa);});else{if(_0x5c1d07[_0x3d06bf(0x24a)]>0x1)_0x5c1d07[_0x3d06bf(0x187)]({'botID':_0x3d06bf(0x264)});let _0x474756=[],_0x1fcb72=[];const _0x4b3f22=_0x5c1d07[_0x3d06bf(0x24a)]%0x4==0x0||_0x5c1d07[_0x3d06bf(0x24a)]%0x4==0x3||_0x5c1d07[_0x3d06bf(0x24a)]%0x3==0x1?0x4:0x3;let _0x55d714=0x0;_0x5c1d07[_0x3d06bf(0x15b)]((_0x1739b2,_0x52ccd9)=>{const _0x3e96cd=_0x3d06bf;if(_0x52ccd9%_0x4b3f22==0x0)_0x1fcb72=[];_0x1fcb72[_0x3e96cd(0x187)]({'text':_0x1739b2[_0x3e96cd(0x213)]==_0x3e96cd(0x264)?_0x3e96cd(0x1e1):'Bot\x20'+_0x1739b2['botID'],'callback_data':_0x1739b2[_0x3e96cd(0x213)]}),_0x52ccd9%_0x4b3f22==0x0&&(_0x474756[_0x55d714]=_0x1fcb72,_0x55d714++);}),tgBot[_0x3d06bf(0x175)](_0x559f0a[_0x3d06bf(0x248)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x474756}})['catch'](_0xf65bfa=>{telegramError(_0xf65bfa);}),tgBot['on'](_0x3d06bf(0x231),async _0x445bbd=>{const _0x58ecff=_0x3d06bf,_0x1a909a=_0x445bbd[_0x58ecff(0x16e)],_0x5de3ae=_0x445bbd[_0x58ecff(0x268)];tgBot[_0x58ecff(0x12f)](_0x445bbd['id'])[_0x58ecff(0x17e)](async()=>{const _0x9b4045=_0x58ecff;if(_0x1a909a==_0x9b4045(0x264)){if(settings[_0x9b4045(0x220)]=='orders')tgBot['sendMessage'](_0x5de3ae[_0x9b4045(0x248)]['id'],_0x9b4045(0x1d6))['catch'](_0x1f761c=>{telegramError(_0x1f761c);});_0x5c1d07['forEach'](_0xe25618=>{const _0x44c5f2=_0x9b4045;if(_0xe25618['botID']!=_0x44c5f2(0x264))toggleBot(_0xe25618[_0x44c5f2(0x213)],toggleStatus(_0xe25618[_0x44c5f2(0x213)]),_0x44c5f2(0x131));});}else{if(settings['telegramEvents']==_0x9b4045(0x260))tgBot['sendMessage'](_0x5de3ae[_0x9b4045(0x248)]['id'],_0x9b4045(0x173)+_0x1a909a)[_0x9b4045(0x21d)](_0x2574e0=>{telegramError(_0x2574e0);});toggleBot(_0x1a909a,toggleStatus(_0x1a909a),'stopped');}}),tgBot[_0x58ecff(0x139)](_0x58ecff(0x231));});}}),tgBot['onText'](/\/disable/,_0x966461=>{const _0xdd4356=_0x313858;if(!validateTelegram(_0x966461))return;tgBot[_0xdd4356(0x175)](_0x966461['chat']['id'],'Notifications\x20disabled')[_0xdd4356(0x21d)](_0x447b68=>{telegramError(_0x447b68);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x313858(0x153)](/\/help/,_0x6a4e0f=>{const _0x4a7fe3=_0x313858;if(!validateTelegram(_0x6a4e0f))return;tgBot[_0x4a7fe3(0x175)](_0x6a4e0f[_0x4a7fe3(0x248)]['id'],_0x3e2ab8)[_0x4a7fe3(0x21d)](_0x5cd9db=>{telegramError(_0x5cd9db);});}),tgBot['on'](_0x313858(0x1bb),_0x5caf74=>{const _0x2bdf52=_0x313858;_0x5caf74[_0x2bdf52(0x130)]()[_0x2bdf52(0x13e)](_0x2bdf52(0x1ab))&&(logging(_0x2bdf52(0x155)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x2bdf52(0x1bc))[_0x2bdf52(0x270)]('notification',_0x2bdf52(0x155)));}),process['once']('SIGINT',()=>{const _0x3b7bca=_0x313858;if(tgBot)tgBot[_0x3b7bca(0x26d)]();process[_0x3b7bca(0x1e7)](0x1);}),process[_0x313858(0x208)](_0x313858(0x250),()=>{const _0x12c3fb=_0x313858;if(tgBot)tgBot[_0x12c3fb(0x26d)]();process['exit'](0x1);});}}function disableTelegram(){const _0x3a74eb=_0x4b3da4;tgBot&&(tgBot[_0x3a74eb(0x26d)](),tgBot=null);}function sendTelegram(_0x4fa78f,_0x5bd537){const _0x197003=_0x4b3da4;if(settings[_0x197003(0x1b0)]){if(settings[_0x197003(0x220)]==_0x197003(0x264)||(_0x5bd537[_0x197003(0x1ba)]=='error'||_0x5bd537['type']==_0x197003(0x148))&&settings['telegramEvents']=='alerts'||_0x5bd537['type']==_0x197003(0x19b)&&settings[_0x197003(0x220)]==_0x197003(0x260)){if(tgBot&&settings[_0x197003(0x216)]){if(_0x5bd537['showname'])tgBot[_0x197003(0x175)](settings['telegramChatId'],_0x5bd537[_0x197003(0x17d)]+_0x197003(0x171)+_0x5bd537[_0x197003(0x25b)])[_0x197003(0x21d)](_0x239e05=>{telegramError(_0x239e05);});else tgBot[_0x197003(0x175)](settings['telegramChatId'],'Bot\x20'+_0x4fa78f+_0x197003(0x171)+_0x5bd537['event'])[_0x197003(0x21d)](_0xe6800a=>{telegramError(_0xe6800a);});}}}}function getDeviceWithIp(_0x46464e){const _0x43c6a4=_0x4b3da4;return devices[_0x43c6a4(0x227)](_0x1609c8=>_0x1609c8['ip']===_0x46464e);}function temporaryAccess2FA(_0x3dadab,_0x21f073){const _0x1aa9bf=_0x4b3da4;let _0x582106=new Date(),_0x56d849=![];if(lastIpApproval){if(_0x582106-lastIpApproval<0x1388)_0x56d849=!![];}lastIpApproval=new Date();if(_0x56d849)return;tgBot&&settings[_0x1aa9bf(0x216)]&&(tgBot['removeListener'](_0x1aa9bf(0x231)),tgBot[_0x1aa9bf(0x175)](settings[_0x1aa9bf(0x216)],_0x1aa9bf(0x138)+normalizeIP(_0x21f073)['show']+'</b>\x20?',{'parse_mode':_0x1aa9bf(0x1d8),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x1aa9bf(0x152),'callback_data':'15'},{'text':_0x1aa9bf(0x24e),'callback_data':'30'},{'text':'reject','callback_data':_0x1aa9bf(0x157)}]]}})[_0x1aa9bf(0x21d)](_0xa13493=>{telegramError(_0xa13493);}),tgBot['on'](_0x1aa9bf(0x231),async _0x99aa70=>{const _0x65b9a4=_0x1aa9bf,_0x50ac73=_0x99aa70[_0x65b9a4(0x16e)],_0x3dd8e3=_0x99aa70[_0x65b9a4(0x268)];tgBot['answerCallbackQuery'](_0x99aa70['id'])[_0x65b9a4(0x17e)](async()=>{const _0x5aad6e=_0x65b9a4;devices[_0x3dadab][_0x5aad6e(0x1f7)]={'clientip':_0x21f073,'timestamp':new Date()[_0x5aad6e(0x12a)](),'expiry':_0x50ac73},_0x50ac73!='reject'?(await tgBot['sendMessage'](_0x3dd8e3['chat']['id'],_0x5aad6e(0x1ed)+_0x50ac73+_0x5aad6e(0x1aa),{'parse_mode':_0x5aad6e(0x1d8)})[_0x5aad6e(0x21d)](_0x19e01a=>{telegramError(_0x19e01a);}),io['to'](_0x3dadab)['emit'](_0x5aad6e(0x204),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x3dd8e3[_0x5aad6e(0x248)]['id'],_0x5aad6e(0x1a3))[_0x5aad6e(0x21d)](_0x5b3444=>{telegramError(_0x5b3444);}),io['to'](_0x3dadab)['emit'](_0x5aad6e(0x204),{'access':{'allow':![],'reason':_0x5aad6e(0x150),'token':null}}));}),tgBot[_0x65b9a4(0x139)]('callback_query');}));}function loginAccess2FA(_0x2434db,_0x540620){const _0x82e9b0=_0x4b3da4;tgBot&&settings[_0x82e9b0(0x216)]&&(tgBot[_0x82e9b0(0x139)](_0x82e9b0(0x231)),tgBot[_0x82e9b0(0x175)](settings[_0x82e9b0(0x216)],_0x82e9b0(0x195)+normalizeIP(_0x540620)[_0x82e9b0(0x206)]+_0x82e9b0(0x174),{'parse_mode':_0x82e9b0(0x1d8),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})['catch'](_0x4c32b6=>{telegramError(_0x4c32b6);}),tgBot['on']('callback_query',async _0x54564f=>{const _0x47bffc=_0x82e9b0,_0x4da230=_0x54564f['data'],_0x87c90d=_0x54564f[_0x47bffc(0x268)];tgBot[_0x47bffc(0x12f)](_0x54564f['id'])[_0x47bffc(0x17e)](async()=>{const _0x1670df=_0x47bffc;devices[_0x2434db]['telegram2FaApproval']={'clientip':_0x540620,'timestamp':new Date()['getTime'](),'expiry':_0x4da230},_0x4da230!=_0x1670df(0x157)?(await tgBot[_0x1670df(0x175)](_0x87c90d[_0x1670df(0x248)]['id'],_0x1670df(0x1c9),{'parse_mode':_0x1670df(0x1d8)})['catch'](_0x5083d3=>{telegramError(_0x5083d3);}),io['to'](_0x2434db)[_0x1670df(0x270)](_0x1670df(0x204),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x87c90d[_0x1670df(0x248)]['id'],_0x1670df(0x249))['catch'](_0x3e5a88=>{telegramError(_0x3e5a88);}),io['to'](_0x2434db)['emit'](_0x1670df(0x204),{'access':{'allow':![],'reason':_0x1670df(0x1cb),'token':null}}));}),tgBot[_0x47bffc(0x139)]('callback_query');}));}function getConfiguration(){const _0x4f39d2=_0x4b3da4;return dbConfig['get'](_0x4f39d2(0x237))['sortBy']('botID')[_0x4f39d2(0x19c)]()||[];}function getEnabledBots(){const _0x40b447=_0x4b3da4;return dbConfig[_0x40b447(0x15e)]('bots')[_0x40b447(0x191)](_0x40b447(0x213))['filter']({'status':_0x40b447(0x1b8)})[_0x40b447(0x19c)]()||[];}function getDisabledBots(){const _0x5cedb3=_0x4b3da4;return dbConfig[_0x5cedb3(0x15e)](_0x5cedb3(0x237))['sortBy'](_0x5cedb3(0x213))[_0x5cedb3(0x274)]({'status':_0x5cedb3(0x1b6)})[_0x5cedb3(0x19c)]()||[];}function getSettings(){const _0x581952=_0x4b3da4;return dbSettings['get']('settings')[_0x581952(0x19c)]()||{'timeshift':0x0};}function getSecure(){const _0x54d72c=_0x4b3da4;return dbSecure[_0x54d72c(0x15e)](_0x54d72c(0x234))[_0x54d72c(0x19c)]()||{};}function getBlacklist(){const _0xff42f0=_0x4b3da4;return dbSecure[_0xff42f0(0x15e)](_0xff42f0(0x1ce))['value']()||[];}function broadcastToBots(_0x4fdb77,_0x1de398){config['forEach'](_0x18691b=>{const _0x243cc0=_0x4b30;if(_0x18691b[_0x243cc0(0x204)]==_0x243cc0(0x1b8)&&_0x18691b[_0x243cc0(0x192)]=='running'){if(pid[_0x18691b[_0x243cc0(0x213)]])pid[_0x18691b[_0x243cc0(0x213)]][_0x243cc0(0x21c)]({[_0x4fdb77]:_0x1de398});}});}function storeSettings(_0x1ddd52,_0x1e8580=![]){const _0x56ccf6=_0x4b3da4;_0x1ddd52={...settings,..._0x1ddd52};if(_0x1e8580&&_0x1ddd52[_0x56ccf6(0x182)]!=_0x56ccf6(0x16d)&&_0x1ddd52[_0x56ccf6(0x182)]!=''){const _0x22d9ab=crypt[_0x56ccf6(0x162)](secure[_0x56ccf6(0x1a5)],_0x1ddd52[_0x56ccf6(0x182)])['message'][_0x56ccf6(0x172)]('@')[0x0],_0x3aefcb=bcrypt[_0x56ccf6(0x194)](_0x22d9ab,saltRounds);_0x1ddd52={..._0x1ddd52,'bbPassword':_0x3aefcb};}if(_0x1e8580&&_0x1ddd52['telegramToken']!=_0x56ccf6(0x16d)&&_0x1ddd52[_0x56ccf6(0x209)]!=''){const _0x23bca6=crypt[_0x56ccf6(0x162)](secure[_0x56ccf6(0x1a5)],_0x1ddd52[_0x56ccf6(0x209)])[_0x56ccf6(0x268)]['split']('@')[0x0];_0x1ddd52={..._0x1ddd52,'telegramToken':_0x23bca6};}const _0x25f790=_0x1ddd52[_0x56ccf6(0x209)]!='************'&&_0x1ddd52[_0x56ccf6(0x209)]!=settings[_0x56ccf6(0x209)]||_0x1ddd52['telegramUsername']!=settings['telegramUsername'],_0x5c5933=_0x1ddd52[_0x56ccf6(0x209)]==''||_0x1ddd52[_0x56ccf6(0x1a0)]=='';if(_0x25f790)_0x1ddd52['telegramEvents']=_0x56ccf6(0x264);for(const [_0x1c4e69,_0x4fae13]of Object[_0x56ccf6(0x1a1)](_0x1ddd52)){if(_0x1c4e69==_0x56ccf6(0x209)&&_0x4fae13==_0x56ccf6(0x16d)){_0x1ddd52['telegramToken']=settings[_0x56ccf6(0x209)];continue;};if(_0x1c4e69==_0x56ccf6(0x182)&&_0x4fae13==_0x56ccf6(0x16d)){_0x1ddd52[_0x56ccf6(0x182)]=settings[_0x56ccf6(0x182)];continue;};dbSettings['set'](_0x56ccf6(0x1f9)+_0x1c4e69,_0x4fae13)[_0x56ccf6(0x185)]();}settings=_0x1ddd52,io['to']('botmanager')[_0x56ccf6(0x270)](_0x56ccf6(0x25d),cleanSettings()),broadcastToBots('timeshift',settings[_0x56ccf6(0x273)]);if(_0x25f790&&!_0x5c5933)initTelegram();if(_0x25f790&&_0x5c5933)disableTelegram();getAllClients()[_0x56ccf6(0x15b)](_0xca20ab=>{const _0x4df622=_0x56ccf6;getSocket(_0xca20ab['id'])[_0x4df622(0x270)]('status',{'access':{'allow':![],'reason':_0x4df622(0x1c2),'token':null}});});}function updateSetting(_0x4fa909,_0x4b2b37){const _0x2ba460=_0x4b3da4;dbSettings['set'](_0x2ba460(0x1f9)+_0x4fa909,_0x4b2b37)[_0x2ba460(0x185)](),settings=getSettings(),io['to'](_0x2ba460(0x1bc))[_0x2ba460(0x270)](_0x2ba460(0x25d),cleanSettings());}function storeSecure(_0x2fff54){const _0x50465e=_0x4b3da4;dbSecure[_0x50465e(0x15e)](_0x50465e(0x234))[_0x50465e(0x187)](_0x2fff54)[_0x50465e(0x185)](),secure=_0x2fff54;}function addBlacklist(_0x3d076a){const _0x32d74b=_0x4b3da4;cleanBlacklist();let _0x37f94c;devices[_0x3d076a][_0x32d74b(0x1f7)]?_0x37f94c=Math[_0x32d74b(0x12e)](devices[_0x3d076a]['telegramIpApproval'][_0x32d74b(0x1d2)],loginExpiry):_0x37f94c=loginExpiry,dbSecure[_0x32d74b(0x15e)]('blacklist')[_0x32d74b(0x187)]({'expiry':new Date()[_0x32d74b(0x12a)]()+_0x37f94c*0x3c*0x3e8,'token':devices[_0x3d076a][_0x32d74b(0x254)][_0x32d74b(0x20a)]})[_0x32d74b(0x185)](),blacklist=dbSecure[_0x32d74b(0x15e)](_0x32d74b(0x1ce))[_0x32d74b(0x19c)]();}function cleanBlacklist(){const _0x495f55=_0x4b3da4;let _0x22f91c=dbSecure[_0x495f55(0x15e)](_0x495f55(0x1ce))[_0x495f55(0x169)]()[_0x495f55(0x19c)](),_0x35668d=new Date()[_0x495f55(0x12a)]();_0x22f91c[_0x495f55(0x15b)](_0x486ea4=>{const _0x3b98f9=_0x495f55;_0x486ea4[_0x3b98f9(0x1d2)]<_0x35668d&&dbSecure[_0x3b98f9(0x15e)](_0x3b98f9(0x1ce))[_0x3b98f9(0x1dd)]({'expiry':_0x486ea4[_0x3b98f9(0x1d2)]})[_0x3b98f9(0x185)]();});}function initStates(){const _0x433a43=_0x4b3da4;let _0x179a46=getConfiguration();_0x179a46[_0x433a43(0x15b)](_0x52b61b=>{const _0x1e1919=_0x433a43;_0x52b61b[_0x1e1919(0x192)]=_0x1e1919(0x131);}),storeConfiguration(_0x179a46);}function onKeys(){const _0x569bee=new RSA();return new Promise(_0x3d8847=>{const _0x1318be=_0x4b30;_0x569bee[_0x1318be(0x170)]()[_0x1318be(0x17e)](_0x3d4e05=>{_0x3d8847(_0x3d4e05);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x30e200=_0x4b3da4;let _0x56e9c7=getConfiguration(),_0x1c13c5=![];_0x56e9c7['forEach'](_0x1d7fc1=>{const _0x568e48=_0x4b30;if(_0x1d7fc1[_0x568e48(0x204)]==_0x568e48(0x13b))_0x1d7fc1[_0x568e48(0x204)]=_0x568e48(0x1b8),_0x1c13c5=!![];else _0x1d7fc1[_0x568e48(0x204)]==_0x568e48(0x131)&&(_0x1d7fc1[_0x568e48(0x204)]=_0x568e48(0x1b6),_0x1c13c5=!![]);});if(_0x1c13c5)storeConfiguration(_0x56e9c7);let _0x3283cf=getSecure();if(!_0x3283cf['hasOwnProperty'](_0x30e200(0x132))){let _0x48de4a=await generateKeys();_0x3283cf['publicKey']=_0x48de4a[_0x30e200(0x156)],_0x3283cf[_0x30e200(0x1a5)]=_0x48de4a[_0x30e200(0x1a5)],_0x3283cf[_0x30e200(0x132)]=crypto[_0x30e200(0x245)](0x20)['toString'](_0x30e200(0x186));;storeSecure(_0x3283cf);}let _0x92cb77=getSettings();_0x1c13c5=![];!_0x92cb77[_0x30e200(0x23c)](_0x30e200(0x26f))&&(_0x92cb77[_0x30e200(0x26f)]=![],_0x92cb77[_0x30e200(0x1e3)]='',_0x92cb77[_0x30e200(0x182)]='',_0x92cb77[_0x30e200(0x1dc)]=![],_0x1c13c5=!![]);!_0x92cb77[_0x30e200(0x23c)]('whitelistEnabled')&&(_0x92cb77[_0x30e200(0x14d)]=![],_0x92cb77['whitelist']=[],_0x92cb77[_0x30e200(0x144)]=![],_0x1c13c5=!![]);if(!_0x92cb77[_0x30e200(0x23c)](_0x30e200(0x1b0))){if(_0x92cb77['telegramChatId'])_0x92cb77[_0x30e200(0x1b0)]=!![];else _0x92cb77['telegramEnabled']=![];_0x1c13c5=!![];}if(_0x1c13c5)storeSettings(_0x92cb77);}function storeConfiguration(_0x11eba8){const _0x1ffc9b=_0x4b3da4;dbConfig[_0x1ffc9b(0x15e)]('bots')[_0x1ffc9b(0x1dd)]()[_0x1ffc9b(0x185)](),dbConfig['get'](_0x1ffc9b(0x237))[_0x1ffc9b(0x187)](..._0x11eba8)[_0x1ffc9b(0x185)](),config=_0x11eba8;}function resetPassword(){const _0x5078ca=_0x4b3da4;tgBot&&settings[_0x5078ca(0x216)]&&(tgBot['removeListener'](_0x5078ca(0x231)),tgBot[_0x5078ca(0x175)](settings[_0x5078ca(0x216)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x5078ca(0x1d8),'reply_markup':{'inline_keyboard':[[{'text':_0x5078ca(0x16f),'callback_data':_0x5078ca(0x16f)},{'text':'no','callback_data':'no'}]]}})[_0x5078ca(0x21d)](_0x20bc33=>{telegramError(_0x20bc33);}),tgBot['on'](_0x5078ca(0x231),async _0x5084c7=>{const _0x23ecf1=_0x5078ca,_0x4d2462=_0x5084c7[_0x23ecf1(0x16e)],_0x1d4c1d=_0x5084c7[_0x23ecf1(0x268)];tgBot['answerCallbackQuery'](_0x5084c7['id'])[_0x23ecf1(0x17e)](async()=>{const _0x3b9db6=_0x23ecf1;if(_0x4d2462!='no'){const _0x1bc632=0xf,_0x43b6ec='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x1472f8=Array[_0x3b9db6(0x266)](crypto[_0x3b9db6(0x1a9)](new Uint32Array(_0x1bc632)))[_0x3b9db6(0x12d)](_0x333418=>_0x43b6ec[_0x333418%_0x43b6ec[_0x3b9db6(0x24a)]])['join'](''),_0x3e7ae0=bcrypt['hashSync'](_0x1472f8,saltRounds);storeSettings({'bbPassword':_0x3e7ae0}),await tgBot[_0x3b9db6(0x175)](_0x1d4c1d[_0x3b9db6(0x248)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x1472f8,{'parse_mode':'HTML'})[_0x3b9db6(0x21d)](_0x2b1928=>{telegramError(_0x2b1928);});}else await tgBot[_0x3b9db6(0x175)](_0x1d4c1d[_0x3b9db6(0x248)]['id'],_0x3b9db6(0x1bd))[_0x3b9db6(0x21d)](_0x438a4d=>{telegramError(_0x438a4d);});}),tgBot[_0x23ecf1(0x139)](_0x23ecf1(0x231));}));}function logging(_0x1345e8){const _0x2c0e26=_0x4b3da4;console[_0x2c0e26(0x1c4)](getTimeStamp()+_0x2c0e26(0x21f)+_0x1345e8);if(tgBot&&settings[_0x2c0e26(0x216)]&&settings[_0x2c0e26(0x220)]!=_0x2c0e26(0x260))tgBot[_0x2c0e26(0x175)](settings[_0x2c0e26(0x216)],'Bot\x20Mgr\x20>\x20'+_0x1345e8)[_0x2c0e26(0x21d)](_0x3b4701=>{telegramError(_0x3b4701);});}function getServerTime(){const _0x42fd0e=_0x4b3da4,_0x488e75=new Date();return _0x488e75[_0x42fd0e(0x137)]()+'/'+(_0x488e75[_0x42fd0e(0x20d)]()+0x1)['toString']()[_0x42fd0e(0x210)](0x2,'0')+'/'+_0x488e75['getDate']()['toString']()[_0x42fd0e(0x210)](0x2,'0')+'\x20'+_0x488e75[_0x42fd0e(0x23f)]()['toString']()[_0x42fd0e(0x210)](0x2,'0')+':'+_0x488e75[_0x42fd0e(0x140)]()[_0x42fd0e(0x130)]()[_0x42fd0e(0x210)](0x2,'0')+':'+_0x488e75['getSeconds']()[_0x42fd0e(0x130)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1d22bc=_0x4b3da4,_0x491429=shiftedTime();return _0x491429[_0x1d22bc(0x137)]()+'/'+(_0x491429[_0x1d22bc(0x20d)]()+0x1)['toString']()[_0x1d22bc(0x210)](0x2,'0')+'/'+_0x491429['getDate']()[_0x1d22bc(0x130)]()[_0x1d22bc(0x210)](0x2,'0')+'\x20'+_0x491429[_0x1d22bc(0x23f)]()[_0x1d22bc(0x130)]()[_0x1d22bc(0x210)](0x2,'0')+':'+_0x491429[_0x1d22bc(0x140)]()['toString']()['padStart'](0x2,'0')+':'+_0x491429['getSeconds']()[_0x1d22bc(0x130)]()[_0x1d22bc(0x210)](0x2,'0');}function shiftedTime(){const _0x2e71a0=_0x4b3da4,_0x52d467=new Date();let _0x1a5b91=_0x52d467;if(settings[_0x2e71a0(0x273)]&&settings[_0x2e71a0(0x273)]!==0x0)_0x1a5b91=fns[_0x2e71a0(0x193)](_0x52d467,{'hours':settings[_0x2e71a0(0x273)]});return _0x1a5b91;}function startScheduler(){const _0x5d2d40=_0x4b3da4;let _0x10ecbb=new Date()[_0x5d2d40(0x21a)]();_0x10ecbb==0x1&&backupConfigFiles();_0x10ecbb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2f35da=_0x4b3da4;fs[_0x2f35da(0x221)](configpath,{'withFileTypes':!![]})['forEach'](_0x2d4979=>{const _0x4c269f=_0x2f35da;if(!_0x2d4979[_0x4c269f(0x159)]())fs['copyFileSync'](configpath+_0x2d4979[_0x4c269f(0x161)],configbackuppath+_0x2d4979['name']);});}function triggerAnalytics(){const _0x44c029=_0x4b3da4;analytics[_0x44c029(0x18a)]({'title':_0x44c029(0x1ae),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x3eb59e,_0x214c9b){const _0x3a8091=_0x4b3da4;if(_0x3eb59e[_0x3a8091(0x1b2)]==settings[_0x3a8091(0x1e3)]&&bcrypt['compareSync'](_0x3eb59e['password'],settings[_0x3a8091(0x182)])){if(settings[_0x3a8091(0x1dc)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x28f2c2=generateLoginToken(_0x214c9b);return{'allow':!![],'reason':_0x3a8091(0x244),'token':_0x28f2c2};}}else return{'allow':![],'reason':_0x3a8091(0x219),'token':null};}function _0x67f6(){const _0xe8303d=['invalid\x20credentials','getUTCHours','defaults','send','catch','bot.js',':\x20Bot\x20Mgr\x20>\x20','telegramEvents','readdirSync','update-bb','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','host','error','All\x20bots\x20running\x20right\x20now','find','Unauthorized\x20attempt\x20to\x20log\x20out','apply','version','starting\x20bot\x20|\x20Bot\x20','Invalid\x20authentication\x20token\x20(1)','2124TGHymZ','RSA','reason','bcryptjs','callback_query','User\x20has\x20been\x20validated','127.0.0.1','secure','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/:bot/support','bots','env','../install.js','temporary\x20token\x20generated','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','hasOwnProperty','use','Balance\x20Bot','getHours','join','Unauthorized\x20attempt\x20to\x20add\x20bot','node-telegram-bot-api','store','login\x20token\x20generated','randomBytes','idling\x20bot\x20\x20\x20|\x20Bot\x20','No\x20bots\x20running\x20right\x20now','chat','Login\x20rejected','length','logout','sockets','2FA\x20login\x20token\x20generated','30\x20min','storeConfiguration','SIGTERM','::ffff:127.0.0.1','user','kill','access','Unauthorized\x20attempt\x20to\x20update\x20settings','update-bot','date-fns','telegram','bb-settings.json','Token\x20blacklisted','event','Unauthorized\x20login\x20attempt\x20(timeout)','settings','crypto','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','orders','keys','/:bot/performance','yargs/yargs','all','Alerts','from','bb-secure.json','message','removeAllListeners','lowdb','sign','167102TSjUxs','stopPolling','2FA\x20required','loginRequired','emit','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','apiKey','timeshift','filter','search','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','getTime','get-starting-balances','/enable\x20-\x20enable\x20notifications\x0a','map','max','answerCallbackQuery','toString','stopped','secret','http','started','/on\x20-\x20start\x20bot(s)\x0a','match','getFullYear','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','removeListener','15158517SWnrCq','running','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','sendFile','includes','listen','getMinutes','ipv6','referer','<b>Telegram\x20bot\x20status:</b>\x0a','temporaryAccessAllowed','10983jfalAY','toIPv4MappedAddress','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','success','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','add-bot','store-headless','existsSync','whitelistEnabled','remoteAddress','unlinkSync','temporary\x20access\x20rejected','new-disabled','15\x20min','onText','connected','Invalid\x20Telegram\x20token','publicKey','reject','bb/','isDirectory','ipaddr.js','forEach','UA-192771731-1','/:bot/coins','get','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getStartingBalances','name','decrypt','deleted\x20Bot\x20','jsonwebtoken','pidExpireLogin','placeOrder','socket.io','config/','cloneDeep','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','\x20|\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','************','data','yes','generateKeyPairAsync','\x20>\x20','split','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','</b>\x20?','sendMessage','timestamp','disabled\x20Bot\x20','delete-bot','/:bot/portfolio','argv','enabled\x20Bot\x20','RSA-OAEP','botname','then','toIPv4Address','fork','store-settings','bbPassword','build','Unauthorized\x20attempt\x20to\x20store\x20configuration','write','hex','push','Invalid\x20IP\x20address','handshake','page','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','login\x20not\x20required','verify','(((.+)+)+)+$','initclient','3000','sortBy','live','add','hashSync','Allow\x20login\x20from\x20IP\x20address\x20<b>','emitHistory','Unauthorized\x20attempt\x20to\x20get\x20portfolio','test','get-logs','56JZZUqP','order','value','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','store-configuration','login\x20token\x20valid','telegramUsername','entries','get-portfolio','Temporary\x20access\x20rejected','1000','privateKey','Unauthorized\x20attempt\x20to\x20update\x20bot','Notifications\x20enabled\x0a','No\x20authentication\x20token','randomFillSync','\x20minutes','404\x20Not\x20Found','All','mkdirSync','Balance\x20Bot\x20Server','155BZWIoR','telegramEnabled','/status\x20-\x20show\x20bot(s)\x20status\x0a','username','restart','telegram2FaApproval','disconnect','disabled','exp','enabled','Notifications\x20disabled\x0a','type','polling_error','botmanager','Password\x20reset\x20rejected','path','1068087XcQZiN','bot-','pidRefreshToken','reload','login\x20required','log','child_process','conn','alerts','47957MVexQx','Login\x20accepted','temporary\x20access\x20not\x20allowed','2FA\x20login\x20rejected','bot','login','blacklist','allow','-results.json','<b>Balance\x20Bot\x20status:</b>\x0a','expiry','express','Ok,\x20will\x20send\x20order\x20notifications\x20only','/off\x20-\x20stop\x20bot(s)\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','port','HTML','inherit','new','lowdb/adapters/FileSync','f2aRequired','remove','headers','connection','2FA\x20login\x20required','All\x20bots','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','bbUsername','assign','static','starting\x20new\x20bot\x20|\x20Bot\x20','exit','102717atyvIn','reset-password','place-order','restarting\x20Bot\x20','/:bot/history','Access\x20enabled\x20for\x20','isIPv4MappedAddress','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','uuid','/disable\x20-\x20disable\x20notifications\x0a','logged\x20out','index.html','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','hybrid-crypto-js','build2','telegramIpApproval','2imaRIQ','settings.','Orders','\x20/\x20','/help\x20-\x20show\x20available\x20commands\x0a','820KISFqG','auth','/:bot','Invalid\x20authentication\x20token\x20(2)','password','Error:\x20Invalid\x20argument\x20','890MeABgv','status','clients','show','Unauthorized\x20attempt\x20to\x20get\x20logs','once','telegramToken','token','function','/restart\x20-\x20restart\x20bot(s)\x0a','getMonth','Bot\x20','-----------------------------------------------------------------------------------','padStart','cancel-loading','stop','botID','analytics','clientip','telegramChatId','163638rWPveh','@analytics/google-analytics'];_0x67f6=function(){return _0xe8303d;};return _0x67f6();}function refreshToken(_0x382f63){const _0x399415=generateLoginToken(_0x382f63);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x399415};}function validateAccess(_0x3aff3f,_0x4b2865){const _0xf03c2e=_0x4b3da4;let _0x54a966=devices[_0x4b2865]['ip'],_0x1dffea;const _0xceee90=_0x5109f5=>{const _0x20b51e=_0x4b30;if(settings[_0x20b51e(0x26f)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x4b2865)){const _0x7c13ad=generateLoginToken(_0x4b2865);return{'allow':!![],'reason':_0x20b51e(0x24d),'token':_0x7c13ad};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x1dffea=validToken(_0x5109f5,_0x4b2865),_0x1dffea[_0x20b51e(0x23c)](_0x20b51e(0x148))?{'allow':!![],'reason':_0x20b51e(0x19f),'token':_0x5109f5}:{'allow':![],'reason':_0x20b51e(0x1c3),'token':null};}else return{'allow':!![],'reason':_0x20b51e(0x18c),'token':null};};if(settings['whitelistEnabled']){let _0x1ed468=[...settings['whitelist'],'::1',_0xf03c2e(0x251),_0xf03c2e(0x233)];if(_0x1ed468['includes'](_0x54a966))return _0xceee90(_0x3aff3f);else{_0x1dffea=validToken(_0x3aff3f,_0x4b2865);if(_0x1dffea[_0xf03c2e(0x23c)](_0xf03c2e(0x148)))return _0xceee90(_0x3aff3f);else{if(telegramIpApproved(_0x4b2865)){const _0xe99173=generateToken(_0x4b2865);return _0x1dffea=_0xceee90(_0x3aff3f),_0x1dffea[_0xf03c2e(0x1cf)]?{'allow':!![],'reason':_0xf03c2e(0x23a),'token':_0xe99173}:_0x1dffea;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0xf03c2e(0x26e),'token':null}:{'allow':![],'reason':_0xf03c2e(0x1ca),'token':null};}}}else return _0xceee90(_0x3aff3f);}function timelyDecrypt(_0x491349,_0xdb6283=!![]){const _0x4cb30a=_0x4b3da4;if(_0x491349)try{const _0xbf2ed5=crypt[_0x4cb30a(0x162)](secure[_0x4cb30a(0x1a5)],_0x491349)[_0x4cb30a(0x268)],_0x405b18=_0xbf2ed5[_0x4cb30a(0x172)]('@')[0x0],_0x1bd344=_0xbf2ed5[_0x4cb30a(0x172)]('@')[0x1],_0x331d23=new Date()[_0x4cb30a(0x12a)]();if(_0xdb6283){if(_0x331d23-_0x1bd344<maxSecretAge*0x3e8)return _0x405b18;else return![];}else return _0x405b18;}catch(_0x370f34){return![];}else return![];}const validToken=(_0x3d0b8e,_0x274d25)=>{const _0x95ab3a=_0x4b3da4,_0x39e8ed=devices[_0x274d25]['ip'];if(!_0x3d0b8e)return{'error':_0x95ab3a(0x1a8)};for(let _0x289c9c of blacklist){if(_0x289c9c['token']==_0x3d0b8e)return{'error':_0x95ab3a(0x25a)};}let _0x5a66fe;try{_0x5a66fe=jwt[_0x95ab3a(0x18d)](_0x3d0b8e,secure[_0x95ab3a(0x132)]+_0x274d25);}catch{return{'error':_0x95ab3a(0x22c)};}if(!_0x5a66fe[_0x95ab3a(0x23c)](_0x95ab3a(0x215))&&!_0x5a66fe[_0x95ab3a(0x23c)](_0x95ab3a(0x1b2))||!_0x5a66fe[_0x95ab3a(0x23c)](_0x95ab3a(0x1b7)))return{'error':_0x95ab3a(0x200)};if(!_0x5a66fe['hasOwnProperty'](_0x95ab3a(0x1b2))&&_0x5a66fe[_0x95ab3a(0x23c)](_0x95ab3a(0x215))){const {clientip:_0x17fc4d}=_0x5a66fe;return _0x39e8ed==_0x17fc4d?{'success':_0x95ab3a(0x232)}:{'error':_0x95ab3a(0x188)};}else{if(_0x5a66fe[_0x95ab3a(0x23c)](_0x95ab3a(0x1b2))&&_0x5a66fe[_0x95ab3a(0x23c)]('clientip')){const {username:_0x172fb7,clientip:_0xa93b75}=_0x5a66fe;return settings[_0x95ab3a(0x1e3)]==_0x172fb7&&_0x39e8ed==_0xa93b75?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x3e8ca0=>{const _0x4c258a=_0x4b3da4;if(_0x3e8ca0){const _0x417d39=devices[_0x3e8ca0]['ip'];return jwt[_0x4c258a(0x26b)]({'username':settings['bbUsername'],'clientip':_0x417d39},secure[_0x4c258a(0x132)]+_0x3e8ca0,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5f28f3=>{const _0x1db674=_0x4b3da4;if(_0x5f28f3){const _0x5116a3=devices[_0x5f28f3]['ip'];return jwt[_0x1db674(0x26b)]({'clientip':_0x5116a3},secure['secret']+_0x5f28f3,{'expiresIn':devices[_0x5f28f3]['telegramIpApproval'][_0x1db674(0x1d2)]*0x3c});}else return![];},telegramIpApproved=_0x359fad=>{const _0x34e461=_0x4b3da4;let _0x27a503=![];return devices[_0x359fad][_0x34e461(0x1f7)]&&devices[_0x359fad][_0x34e461(0x1f7)][_0x34e461(0x1d2)]!=_0x34e461(0x157)&&(_0x27a503=devices[_0x359fad]['telegramIpApproval'][_0x34e461(0x215)]==devices[_0x359fad]['ip']&&new Date()[_0x34e461(0x12a)]()-devices[_0x359fad][_0x34e461(0x1f7)]['timestamp']<devices[_0x359fad]['telegramIpApproval'][_0x34e461(0x1d2)]*0x3c*0x3e8),_0x27a503;},telegram2FaApproved=_0x223f06=>{const _0x40b316=_0x4b3da4;let _0x45685a=![];return devices[_0x223f06][_0x40b316(0x1b4)]&&devices[_0x223f06][_0x40b316(0x1b4)][_0x40b316(0x1d2)]!=_0x40b316(0x157)&&(_0x45685a=devices[_0x223f06]['telegram2FaApproval'][_0x40b316(0x215)]==devices[_0x223f06]['ip']&&new Date()[_0x40b316(0x12a)]()-devices[_0x223f06][_0x40b316(0x1b4)][_0x40b316(0x176)]<devices[_0x223f06][_0x40b316(0x1b4)]['expiry']*0x3c*0x3e8),_0x45685a;},normalizeIP=_0x88485c=>{const _0x36ec19=_0x4b3da4;let _0x1e86c1=null,_0x188215=null;if(ipaddr['isValid'](_0x88485c)){const _0x3540fa=ipaddr['parse'](_0x88485c);_0x3540fa['kind']()===_0x36ec19(0x141)?(_0x3540fa[_0x36ec19(0x1ee)]()&&(_0x1e86c1=_0x3540fa[_0x36ec19(0x17f)]()['toString']()),_0x188215=_0x3540fa[_0x36ec19(0x130)]()):(_0x1e86c1=_0x3540fa[_0x36ec19(0x130)](),_0x188215=_0x3540fa[_0x36ec19(0x146)]()['toString']());}return{'show':_0x1e86c1?_0x1e86c1:_0x188215,'store':_0x188215};};