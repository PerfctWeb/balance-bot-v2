const _0x4a7735=_0x6f70;(function(_0x36a136,_0x2c95b){const _0x1ac736=_0x6f70,_0x2130f2=_0x36a136();while(!![]){try{const _0x39320d=parseInt(_0x1ac736(0x225))/0x1+-parseInt(_0x1ac736(0x1a5))/0x2*(-parseInt(_0x1ac736(0x1b4))/0x3)+-parseInt(_0x1ac736(0x224))/0x4+-parseInt(_0x1ac736(0x235))/0x5+parseInt(_0x1ac736(0x32b))/0x6*(parseInt(_0x1ac736(0x2e5))/0x7)+parseInt(_0x1ac736(0x262))/0x8*(-parseInt(_0x1ac736(0x339))/0x9)+parseInt(_0x1ac736(0x1e6))/0xa;if(_0x39320d===_0x2c95b)break;else _0x2130f2['push'](_0x2130f2['shift']());}catch(_0x1c2026){_0x2130f2['push'](_0x2130f2['shift']());}}}(_0x5d70,0x5b499));const _0x51b29d=function(){let _0x108713=!![];return function(_0xbac5dc,_0x316cd8){const _0x4a5840=_0x108713?function(){if(_0x316cd8){const _0x7b154e=_0x316cd8['apply'](_0xbac5dc,arguments);return _0x316cd8=null,_0x7b154e;}}:function(){};return _0x108713=![],_0x4a5840;};}(),_0x560c22=_0x51b29d(this,function(){const _0x3dd23a=_0x6f70;return _0x560c22[_0x3dd23a(0x2f4)]()[_0x3dd23a(0x1ce)](_0x3dd23a(0x23a))[_0x3dd23a(0x2f4)]()[_0x3dd23a(0x27c)](_0x560c22)[_0x3dd23a(0x1ce)](_0x3dd23a(0x23a));});_0x560c22();'use strict';process['env'][_0x4a7735(0x26b)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x4a7735(0x1a6)),low=require(_0x4a7735(0x263)),FileSync=require(_0x4a7735(0x244)),path=require(_0x4a7735(0x310)),crypto=require(_0x4a7735(0x2ab)),Crypt=require(_0x4a7735(0x223))[_0x4a7735(0x1b1)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x4a7735(0x299)),ipaddr=require(_0x4a7735(0x18e)),argv=require(_0x4a7735(0x1d1))(process[_0x4a7735(0x33f)][_0x4a7735(0x266)](0x2))['argv'],uuidRandom=require(_0x4a7735(0x2b3)),TelegramBot=require(_0x4a7735(0x2f1)),Mixpanel=require(_0x4a7735(0x27b)),axios=require(_0x4a7735(0x2cc)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x4a7735(0x33b)),{networkInterfaces}=require('os'),PORT=argv[_0x4a7735(0x336)]||_0x4a7735(0x1c4),pattern=/^[0-9]{2,4}$/;!pattern[_0x4a7735(0x1d2)](PORT)&&(console[_0x4a7735(0x33a)](_0x4a7735(0x1b5)+PORT+_0x4a7735(0x303)),process[_0x4a7735(0x1be)](0x1));const HOST=argv[_0x4a7735(0x212)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x4a7735(0x357)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x4a7735(0x1c2),settingsfile=_0x4a7735(0x284),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x4a7735(0x254))[_0x4a7735(0x354)]||_0x4a7735(0x2ef),maxBackups=0xa;let validInstallation=!![];!fs[_0x4a7735(0x2c8)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4a7735(0x275)),configpath=userID?bbpath+_0x4a7735(0x248)+userID+'/':bbpath+_0x4a7735(0x248),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x4a7735(0x197)+userID+'/':bbpath+_0x4a7735(0x197),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x4a7735(0x26c)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x4a7735(0x1e1);!fs[_0x4a7735(0x2c8)](configpath)&&fs[_0x4a7735(0x2c3)](configpath);!fs[_0x4a7735(0x2c8)](configbackuppath)&&fs[_0x4a7735(0x2c3)](configbackuppath);!fs[_0x4a7735(0x2c8)](logspath)&&fs[_0x4a7735(0x2c3)](logspath);!fs[_0x4a7735(0x2c8)](zippath)&&fs[_0x4a7735(0x2c3)](zippath);!fs[_0x4a7735(0x2c8)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4a7735(0x1f2)]({'bots':[]})[_0x4a7735(0x34b)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4a7735(0x1f2)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4a7735(0x1fd),'onepagemode':![]}})[_0x4a7735(0x34b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4a7735(0x1f2)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x4a7735(0x2e6),'rsaStandard':_0x4a7735(0x200)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x4a7735(0x1c7)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x4a7735(0x31d)]!=''&&settings[_0x4a7735(0x2ff)]&&settings[_0x4a7735(0x2ff)]!='')initTelegram();const parseColor=(_0x5abe0c,_0x5d5d50)=>{const _0x5ab817=_0x4a7735,_0x5606ab=/#[A-Z]{3}#/g;if(typeof _0x5abe0c==_0x5ab817(0x2f0)){!_0x5d5d50?_0x5abe0c=_0x5abe0c[_0x5ab817(0x24e)](_0x5606ab,''):(_0x5abe0c=_0x5abe0c[_0x5ab817(0x24e)](/#BLU#/g,'\x1b[34m'),_0x5abe0c=_0x5abe0c['replace'](/#RED#/g,_0x5ab817(0x2cf)),_0x5abe0c=_0x5abe0c[_0x5ab817(0x24e)](/#YEL#/g,'\x1b[33m'),_0x5abe0c=_0x5abe0c[_0x5ab817(0x24e)](/#MAG#/g,'\x1b[35m'),_0x5abe0c=_0x5abe0c['replace'](/#CYA#/g,_0x5ab817(0x252)),_0x5abe0c=_0x5abe0c[_0x5ab817(0x24e)](/#RES#/g,_0x5ab817(0x24b)));;}return _0x5abe0c;},logger={'screen':_0x573e14=>{const _0x6b54bc=_0x4a7735;console[_0x6b54bc(0x33a)](parseColor(_0x573e14,!![]));},'simple':_0xa0cafe=>{const _0x2172b9=_0x4a7735;console['log'](parseColor(_0xa0cafe,!![])),loggerfile[_0x2172b9(0x34b)](util[_0x2172b9(0x1d5)](parseColor(_0xa0cafe,![]))+'\x0a');},'full':async _0x345bf3=>{const _0x14007c=_0x4a7735,_0xcd3aba=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x345bf3;console[_0x14007c(0x33a)](parseColor(_0xcd3aba,!![])),loggerfile[_0x14007c(0x34b)](util[_0x14007c(0x1d5)](parseColor(_0xcd3aba,![]))+'\x0a');if(tgBot&&settings[_0x14007c(0x283)]&&settings['telegramEvents']!=_0x14007c(0x1c0))await tgBot[_0x14007c(0x25f)](settings[_0x14007c(0x283)],_0x14007c(0x255)+parseColor(_0x345bf3,![]))[_0x14007c(0x1bf)](_0x2fc7b3=>{telegramError(_0x2fc7b3);});},'debug':async(_0x5d9c7a,_0xc10728='')=>{const _0x201a54=_0x4a7735,_0x280047=getTimeStamp()+_0x201a54(0x1d0)+_0x5d9c7a;if(debugging)console['log'](parseColor(_0x280047,!![]));loggerfile['write'](util[_0x201a54(0x1d5)](parseColor(_0x280047,![]))+'\x0a');if(_0xc10728){if(debugging)console[_0x201a54(0x33a)](_0xc10728);loggerfile[_0x201a54(0x34b)](util[_0x201a54(0x1d5)](_0xc10728)+'\x0a');}}};process['on'](_0x4a7735(0x2dd),function(_0x12cc37){logger['simple'](_0x12cc37);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4a7735(0x254))[_0x4a7735(0x1c1)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x4a7735(0x20c)),app=express(),http=require(_0x4a7735(0x1bd))[_0x4a7735(0x320)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x4a7735(0x226)](_0x4a7735(0x24d),async(_0x57c576,_0x50821f)=>{const _0x365d1a=_0x4a7735,_0x11f0dc=_0x57c576['params']['type'],_0x416480=getClientsWithBotID('botmanager'),_0x37b372=_0x57c576[_0x365d1a(0x1ca)]['uuid'],_0x3987c6=timelyDecrypt(_0x37b372,![]),_0x3fb106=_0x416480['find'](_0x12633d=>_0x12633d[_0x365d1a(0x294)]==_0x3987c6);if(_0x3fb106){const _0x57a87d=normalizeIP(_0x57c576['socket'][_0x365d1a(0x2b1)])[_0x365d1a(0x34e)],_0x1a71ba=_0x57c576[_0x365d1a(0x1ca)][_0x365d1a(0x276)];if(validateAccess(_0x1a71ba,_0x3987c6,_0x57a87d)[_0x365d1a(0x217)])_0x11f0dc==_0x365d1a(0x28b)&&await backupConfigFiles(),await zipFiles(_0x11f0dc),_0x50821f['download'](zippath+(_0x11f0dc+'.zip'),_0x153b06=>{const _0xc964a7=_0x365d1a;_0x153b06&&(logger[_0xc964a7(0x27e)](_0xc964a7(0x31a)+_0x11f0dc),logger['simple'](_0x153b06));});else logger[_0x365d1a(0x27e)](_0x365d1a(0x291)+_0x11f0dc+_0x365d1a(0x361));}else logger[_0x365d1a(0x27e)](_0x365d1a(0x291)+_0x11f0dc+'\x20(2)');}),app[_0x4a7735(0x335)](_0x4a7735(0x358),async(_0x22e96d,_0x2e1650)=>{const _0x17322e=_0x4a7735,_0x44de12=getClientsWithBotID('botmanager'),_0x1b38f2=_0x22e96d[_0x17322e(0x1ca)][_0x17322e(0x294)],_0x2820c5=timelyDecrypt(_0x1b38f2,![]),_0x246f49=_0x44de12[_0x17322e(0x287)](_0x46dadf=>_0x46dadf[_0x17322e(0x294)]==_0x2820c5);logger['debug'](_0x17322e(0x1a4));if(_0x246f49){const _0x1586e5=normalizeIP(_0x22e96d[_0x17322e(0x22e)]['remoteAddress'])[_0x17322e(0x34e)],_0x6c07b9=_0x22e96d[_0x17322e(0x1ca)][_0x17322e(0x276)];if(validateAccess(_0x6c07b9,_0x2820c5,_0x1586e5)[_0x17322e(0x217)]){if(_0x22e96d[_0x17322e(0x20d)]){const _0x3cb519=_0x22e96d[_0x17322e(0x20d)][_0x17322e(0x21a)];await _0x3cb519['mv'](temppath+_0x3cb519[_0x17322e(0x18c)]),_0x2e1650['send']({'status':!![],'message':'File\x20uploaded'});const _0x53108e=getBotsWithMode();_0x53108e[_0x17322e(0x296)]>0x0?confirmRestore(temppath,_0x3cb519['name']):unzipFile(temppath,_0x3cb519[_0x17322e(0x18c)]);}}else logger[_0x17322e(0x27e)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x17322e(0x27e)](_0x17322e(0x196));}),app[_0x4a7735(0x1d9)](express[_0x4a7735(0x1da)](path[_0x4a7735(0x2c2)](__dirname,bbpath2,'build2'))),app['use'](express[_0x4a7735(0x1da)](path[_0x4a7735(0x2c2)](__dirname,bbpath2,_0x4a7735(0x20e)))),app[_0x4a7735(0x226)]('/',function(_0x338c89,_0x1b12f9){const _0x17e82d=_0x4a7735;_0x1b12f9[_0x17e82d(0x334)](path[_0x17e82d(0x2c2)](__dirname,bbpath2,_0x17e82d(0x2d3),_0x17e82d(0x30d)));}),app[_0x4a7735(0x226)](_0x4a7735(0x359),function(_0x598fa0,_0x1bddac){const _0x5c28d9=_0x4a7735;_0x1bddac['sendFile'](path['join'](__dirname,bbpath2,_0x5c28d9(0x20e),_0x5c28d9(0x30d)));}),app[_0x4a7735(0x226)](_0x4a7735(0x2df),(_0x40c0b2,_0x3c77a1)=>{const _0x49b39a=_0x4a7735;_0x3c77a1[_0x49b39a(0x334)](path[_0x49b39a(0x2c2)](__dirname,bbpath2,'build',_0x49b39a(0x30d)));}),app[_0x4a7735(0x226)](_0x4a7735(0x2f9),(_0x5d58a9,_0x1bafba)=>{const _0x4a2faa=_0x4a7735;_0x1bafba['sendFile'](path[_0x4a2faa(0x2c2)](__dirname,bbpath2,_0x4a2faa(0x20e),'index.html'));}),app[_0x4a7735(0x226)]('/:bot/coins',(_0x5f0cbd,_0x1aa822)=>{const _0x3a82cb=_0x4a7735;_0x1aa822[_0x3a82cb(0x334)](path[_0x3a82cb(0x2c2)](__dirname,bbpath2,'build',_0x3a82cb(0x30d)));}),app[_0x4a7735(0x226)]('/:bot/history',(_0x3f37e7,_0x2ab401)=>{const _0x4f8474=_0x4a7735;_0x2ab401[_0x4f8474(0x334)](path[_0x4f8474(0x2c2)](__dirname,bbpath2,_0x4f8474(0x20e),_0x4f8474(0x30d)));}),app[_0x4a7735(0x226)](_0x4a7735(0x257),(_0x589b35,_0x55343a)=>{const _0x2a3cd3=_0x4a7735;_0x55343a[_0x2a3cd3(0x334)](path[_0x2a3cd3(0x2c2)](__dirname,bbpath2,_0x2a3cd3(0x20e),_0x2a3cd3(0x30d)));}),app['get'](_0x4a7735(0x18a),(_0x42f52e,_0x14dca0)=>{const _0xf534c3=_0x4a7735;_0x14dca0['sendFile'](path[_0xf534c3(0x2c2)](__dirname,bbpath2,_0xf534c3(0x20e),_0xf534c3(0x30d)));});if(HOST)http[_0x4a7735(0x25a)](PORT,HOST);else http[_0x4a7735(0x25a)](PORT);const io=require(_0x4a7735(0x195))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5a08ca=_0x4a7735;let _0x20fd0b=_0x5a08ca(0x2f6);const _0x404f93=networkInterfaces(),_0x5623e9={};for(const _0x4cd1c1 of Object[_0x5a08ca(0x30c)](_0x404f93)){for(const _0x2ccacc of _0x404f93[_0x4cd1c1]){if((_0x2ccacc['family']==_0x5a08ca(0x2e0)||_0x2ccacc[_0x5a08ca(0x199)]==0x4)&&!_0x2ccacc[_0x5a08ca(0x2f3)]){const _0x40ae5b=ipaddr[_0x5a08ca(0x1b7)](_0x2ccacc[_0x5a08ca(0x1a2)])[_0x5a08ca(0x1e3)]();_0x40ae5b!=_0x5a08ca(0x279)&&(!_0x5623e9[_0x4cd1c1]&&(_0x5623e9[_0x4cd1c1]=[]),_0x5623e9[_0x4cd1c1][_0x5a08ca(0x25b)](_0x2ccacc[_0x5a08ca(0x1a2)]),_0x20fd0b=_0x2ccacc['address']);}}}return{'serverip':_0x20fd0b,'netinterfaces':_0x5623e9};}async function startServer(){const _0x323a53=_0x4a7735,{serverip:_0x425170,netinterfaces:_0x463c9c}=getServerIP();logger['simple'](''),logger[_0x323a53(0x2ea)]('-----------------------------------------------------------------------------------'),await logger[_0x323a53(0x27e)](_0x323a53(0x23b)+serverversion+_0x323a53(0x351)+(environment==_0x323a53(0x206)?_0x323a53(0x290):'')+'\x0a'+(_0x323a53(0x30f)+PORT+_0x323a53(0x301))+('=>\x20Go\x20to\x20#CYA#http://'+_0x425170+':'+PORT+_0x323a53(0x305))),logger['simple'](_0x323a53(0x1b6));if(config[_0x323a53(0x296)]!=0x0)for(const _0x2ef18f of config){if(_0x2ef18f[_0x323a53(0x216)]=='enabled'||_0x2ef18f[_0x323a53(0x216)]==_0x323a53(0x1dd))await logger[_0x323a53(0x27e)](_0x323a53(0x352)+_0x2ef18f[_0x323a53(0x348)]+_0x323a53(0x1e0)+_0x2ef18f[_0x323a53(0x233)]),startBot([_0x2ef18f[_0x323a53(0x348)],userID],{'cwd':bbpath},function(_0x5c9c62){if(_0x5c9c62)logger['full'](_0x5c9c62);});else(_0x2ef18f[_0x323a53(0x216)]=='disabled'||_0x2ef18f[_0x323a53(0x216)]==_0x323a53(0x259))&&await logger[_0x323a53(0x27e)](_0x323a53(0x2e2)+_0x2ef18f[_0x323a53(0x348)]+_0x323a53(0x1e0)+_0x2ef18f[_0x323a53(0x233)]);}else!newBot&&logger[_0x323a53(0x2ea)](_0x323a53(0x333));if(newBot)addBot();logger[_0x323a53(0x2ea)](_0x323a53(0x1b6)),logger[_0x323a53(0x2ea)](''),await logger[_0x323a53(0x234)]('Node.js\x20v'+nodeversion),await logger[_0x323a53(0x234)]('Network\x20Interfaces:',_0x463c9c);}function startSocket(){const _0x225ec4=_0x4a7735;io['on'](_0x225ec4(0x22c),_0xe71cd3=>{const _0x3c52cf=_0x225ec4;let _0x202f73,_0x507607,_0x3283e4,_0x58ab30,_0x3d5782;const _0x3135ba=_0xe71cd3[_0x3c52cf(0x2c6)][_0x3c52cf(0x1ca)][_0x3c52cf(0x1d8)];_0x507607=_0x3135ba[_0x3c52cf(0x2ce)](/bot[0-9]{3}/);if(_0x507607)_0x3283e4=_0x507607[0x0][_0x3c52cf(0x2ce)](/[0-9]{3}/);if(_0x3283e4)_0x202f73=_0x3283e4[0x0];else _0x202f73=_0x3c52cf(0x31f);const _0x21f525=_0xe71cd3['handshake'][_0x3c52cf(0x319)]['encryptedUuid'];if(!_0x21f525)_0xe71cd3['emit']('status',{'publicKey':secure[_0x3c52cf(0x35d)]});else{_0x58ab30=timelyDecrypt(_0x21f525,![]);if(!_0x58ab30)_0xe71cd3[_0x3c52cf(0x1cf)]('status',{'publicKey':secure[_0x3c52cf(0x35d)]});else{_0x3d5782=normalizeIP(_0xe71cd3[_0x3c52cf(0x2f8)][_0x3c52cf(0x2b1)])[_0x3c52cf(0x34e)];if(!devices[_0x58ab30])devices[_0x58ab30]={'uuid':_0x58ab30,'access':{'token':null}};devices[_0x58ab30]['ip']=_0x3d5782;const _0x134252=addClient(_0xe71cd3['id'],_0x58ab30,_0x202f73);setAccess(_0x134252),emitMessages(),_0xe71cd3['on']('login',_0x4f3c35=>{const _0x3d3eb3=_0x3c52cf,_0x4cbdc4=timelyDecrypt(_0x4f3c35[_0x3d3eb3(0x26a)]);if(_0x4cbdc4){_0x4f3c35={'username':_0x4f3c35[_0x3d3eb3(0x1e5)],'password':_0x4cbdc4},devices[_0x58ab30][_0x3d3eb3(0x2d8)]=validateCredentials(_0x4f3c35,_0x58ab30);if(devices[_0x58ab30][_0x3d3eb3(0x2d8)][_0x3d3eb3(0x217)]==![]&&devices[_0x58ab30]['access'][_0x3d3eb3(0x1bb)]=='2FA\x20login\x20required')_0xe71cd3[_0x3d3eb3(0x1cf)](_0x3d3eb3(0x216),{'access':devices[_0x58ab30][_0x3d3eb3(0x2d8)]}),loginAccess2FA(_0x58ab30,_0x3d5782);else{if(devices[_0x58ab30][_0x3d3eb3(0x2d8)][_0x3d3eb3(0x217)]==![]&&devices[_0x58ab30][_0x3d3eb3(0x2d8)][_0x3d3eb3(0x1bb)]==_0x3d3eb3(0x210))_0xe71cd3[_0x3d3eb3(0x1cf)](_0x3d3eb3(0x216),{'access':devices[_0x58ab30][_0x3d3eb3(0x2d8)]});else devices[_0x58ab30][_0x3d3eb3(0x2d8)][_0x3d3eb3(0x217)]&&devices[_0x58ab30][_0x3d3eb3(0x2d8)][_0x3d3eb3(0x1bb)]==_0x3d3eb3(0x2aa)&&(getClientsWithUuid(_0x58ab30)['forEach'](_0x4b9e70=>{setAccess(_0x4b9e70);}),logger[_0x3d3eb3(0x234)](_0x3d3eb3(0x267)+_0x58ab30[_0x3d3eb3(0x266)](-0x8)),setTokenRefresh(_0x58ab30),setSessionTimeout(_0x3d3eb3(0x2dc),_0x58ab30));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0xe71cd3['on']('reset-password',()=>{resetPassword();}),_0xe71cd3['on']('disconnect',_0xb8e531=>{removeClient(_0xe71cd3['id']);}),_0x202f73==_0x3c52cf(0x31f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xf9cc48){const _0x17afac=_0x4a7735;if(_0xf9cc48!=_0x17afac(0x31f)&&config[_0x17afac(0x289)]!=''){if(pid[_0xf9cc48])pid[_0xf9cc48]['send']({'function':'initclient','args':null});}_0xf9cc48!='botmanager'&&broadcastToBots(_0x17afac(0x1e9),JSON[_0x17afac(0x1a3)](config));}function reloadBotManager(){getClientsWithBotID('botmanager')['forEach'](_0x386435=>{const _0x4d8185=_0x6f70;getSocket(_0x386435['id'])[_0x4d8185(0x1cf)]('status',{'access':{'allow':![],'reason':_0x4d8185(0x1b9),'token':null}});});}function getSocket(_0x1599d1){const _0x42d3af=_0x4a7735;return io['sockets']['sockets'][_0x42d3af(0x226)](_0x1599d1);}function setAccess(_0x48777f){const _0x429f33=_0x4a7735,_0x31a489=getSocket(_0x48777f['id']),_0x2a7b31=_0x48777f[_0x429f33(0x294)],_0x11fdba=_0x48777f[_0x429f33(0x1c3)];devices[_0x2a7b31][_0x429f33(0x2d8)]=validateAccess(devices[_0x2a7b31][_0x429f33(0x2d8)]['token'],_0x2a7b31),logger[_0x429f33(0x234)]('Setting\x20access:\x20'+devices[_0x2a7b31][_0x429f33(0x2d8)][_0x429f33(0x1bb)]+_0x429f33(0x2d5)+_0x48777f['id'][_0x429f33(0x266)](-0x8)+_0x429f33(0x1a8)+_0x2a7b31[_0x429f33(0x266)](-0x8)),_0x31a489[_0x429f33(0x2c2)](_0x2a7b31);if(devices[_0x2a7b31][_0x429f33(0x2d8)][_0x429f33(0x217)]){_0x31a489[_0x429f33(0x2c2)](_0x11fdba);if(_0x11fdba==_0x429f33(0x31f))initializeSocketBotManager(_0x31a489);else initializeSocketBot(_0x31a489);initClient(_0x11fdba);}devices[_0x2a7b31][_0x429f33(0x2d8)][_0x429f33(0x34f)]&&devices[_0x2a7b31]['access'][_0x429f33(0x1bb)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x429f33(0x265),_0x2a7b31),devices[_0x2a7b31][_0x429f33(0x2d8)]['token']&&devices[_0x2a7b31]['access'][_0x429f33(0x1bb)]==_0x429f33(0x31e)&&setSessionTimeout(_0x429f33(0x2dc),_0x2a7b31),_0x31a489[_0x429f33(0x1cf)](_0x429f33(0x216),{'status':_0x48777f['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2a7b31][_0x429f33(0x2d8)],'externalip':devices[_0x2a7b31]['ip'],'publicKey':secure[_0x429f33(0x35d)],'userid':settings[_0x429f33(0x2d1)],'validInstallation':validInstallation}),devices[_0x2a7b31][_0x429f33(0x2d8)][_0x429f33(0x217)]==![]&&devices[_0x2a7b31][_0x429f33(0x2d8)][_0x429f33(0x1bb)]==_0x429f33(0x1cd)&&temporaryAccess2FA(_0x2a7b31,devices[_0x2a7b31]['ip']);}function setSessionTimeout(_0x4bdaa7,_0x301bf7){const _0x5a1fd8=_0x4a7735;let _0x17b685;if(_0x4bdaa7==_0x5a1fd8(0x2dc))_0x17b685=loginExpiry*0x3c*0x3e8;else _0x17b685=devices[_0x301bf7][_0x5a1fd8(0x193)][_0x5a1fd8(0x1f6)]*0x3c*0x3e8-(new Date()[_0x5a1fd8(0x1ea)]()-devices[_0x301bf7][_0x5a1fd8(0x193)][_0x5a1fd8(0x2e1)]);if(devices[_0x301bf7][_0x5a1fd8(0x26e)])clearTimeout(devices[_0x301bf7][_0x5a1fd8(0x26e)]);devices[_0x301bf7][_0x5a1fd8(0x26e)]=setTimeout(()=>{const _0x4664fe=_0x5a1fd8;if(devices[_0x301bf7][_0x4664fe(0x228)])clearTimeout(devices[_0x301bf7][_0x4664fe(0x228)]);removeSocketListeners(_0x301bf7),addBlacklist(_0x301bf7),devices[_0x301bf7]['telegramIpApproval']=null,devices[_0x301bf7][_0x4664fe(0x280)]=null,devices[_0x301bf7][_0x4664fe(0x2d8)]['token']=null,logger[_0x4664fe(0x234)](_0x4664fe(0x19e)+_0x301bf7[_0x4664fe(0x266)](-0x8)),devices[_0x301bf7][_0x4664fe(0x2d8)]=validateAccess(devices[_0x301bf7][_0x4664fe(0x2d8)][_0x4664fe(0x34f)],_0x301bf7),!(devices[_0x301bf7][_0x4664fe(0x2d8)][_0x4664fe(0x217)]&&devices[_0x301bf7][_0x4664fe(0x2d8)][_0x4664fe(0x1bb)]==_0x4664fe(0x288))&&(_0x4bdaa7==_0x4664fe(0x2dc)?io['to'](_0x301bf7)[_0x4664fe(0x1cf)](_0x4664fe(0x216),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x301bf7)[_0x4664fe(0x1cf)](_0x4664fe(0x216),{'access':{'allow':![],'reason':_0x4664fe(0x325),'token':null}})),devices[_0x301bf7][_0x4664fe(0x2d8)][_0x4664fe(0x34f)]=null;},_0x17b685);}function setTokenRefresh(_0x3ea1c5){const _0xece9c9=_0x4a7735;if(devices[_0x3ea1c5][_0xece9c9(0x228)])clearTimeout(devices[_0x3ea1c5][_0xece9c9(0x228)]);devices[_0x3ea1c5][_0xece9c9(0x228)]=setTimeout(()=>{const _0x2e2564=_0xece9c9;getClientsWithUuid(_0x3ea1c5)[_0x2e2564(0x296)]!=0x0?(devices[_0x3ea1c5]['access']=refreshToken(_0x3ea1c5),io['to'](_0x3ea1c5)[_0x2e2564(0x1cf)](_0x2e2564(0x216),{'status':_0x2e2564(0x214),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3ea1c5][_0x2e2564(0x2d8)],'externalip':devices[_0x3ea1c5]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x3ea1c5)):clearTimeout(devices[_0x3ea1c5][_0x2e2564(0x228)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1bf22c){const _0x799049=_0x4a7735,_0x2775e=getClient(_0x1bf22c['id'])[_0x799049(0x294)];_0x1bf22c[_0x799049(0x1cf)](_0x799049(0x1e9),config),_0x1bf22c[_0x799049(0x1cf)](_0x799049(0x19c),cleanSettings()),_0x1bf22c['on'](_0x799049(0x1ae),_0x1bff7c=>{const _0x9ef82e=_0x799049;if(validateAccess(_0x1bff7c,_0x2775e)['allow'])addBot();else logger[_0x9ef82e(0x27e)](_0x9ef82e(0x307));}),_0x1bf22c['on'](_0x799049(0x286),(_0x15308d,_0x479f1f)=>{const _0x1c5f2e=_0x799049;if(validateAccess(_0x479f1f,_0x2775e)[_0x1c5f2e(0x217)])toggleBot(_0x15308d[_0x1c5f2e(0x348)],_0x15308d['status'],_0x15308d[_0x1c5f2e(0x1f8)]);else logger[_0x1c5f2e(0x27e)](_0x1c5f2e(0x2da));}),_0x1bf22c['on'](_0x799049(0x22d),(_0x1ffc33,_0x2b07ce)=>{const _0x5d61c7=_0x799049;if(validateAccess(_0x2b07ce,_0x2775e)[_0x5d61c7(0x217)])toggleBotMode(_0x1ffc33);else logger[_0x5d61c7(0x27e)](_0x5d61c7(0x2da));}),_0x1bf22c['on'](_0x799049(0x2a1),(_0x53e1b3,_0x516dcc)=>{const _0x52a753=_0x799049;if(validateAccess(_0x516dcc,_0x2775e)[_0x52a753(0x217)])deleteBot(_0x53e1b3);else logger[_0x52a753(0x27e)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x1bf22c['on'](_0x799049(0x1fe),(_0x6833bc,_0x3a5249)=>{const _0x5d8e18=_0x799049;if(validateAccess(_0x3a5249,_0x2775e)[_0x5d8e18(0x217)])storeSettings(_0x6833bc,!![]);else logger['full'](_0x5d8e18(0x236));}),_0x1bf22c['on'](_0x799049(0x1b8),_0x6e29f5=>{const _0x142b04=_0x799049;if(validateAccess(_0x6e29f5,_0x2775e)[_0x142b04(0x217)])updateBB('update');else logger[_0x142b04(0x27e)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x1bf22c['on'](_0x799049(0x343),_0x371862=>{const _0x4c9f5e=_0x799049;if(validateAccess(_0x371862,_0x2775e)[_0x4c9f5e(0x217)])updateBB(_0x4c9f5e(0x32a));else logger[_0x4c9f5e(0x27e)](_0x4c9f5e(0x29e));}),_0x1bf22c['on']('get-backup-files',_0x59b3e2=>{const _0x42b7e0=_0x799049;if(validateAccess(_0x59b3e2,_0x2775e)['allow']){const _0x5a90ed=getClient(_0x1bf22c['id']);if(_0x5a90ed)getBackupFiles(_0x5a90ed[_0x42b7e0(0x294)]);else logger[_0x42b7e0(0x27e)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x42b7e0(0x27e)](_0x42b7e0(0x2cd));}),_0x1bf22c['on'](_0x799049(0x327),(_0xf0b4c9,_0x567b09)=>{const _0x18289f=_0x799049;if(validateAccess(_0x567b09,_0x2775e)[_0x18289f(0x217)])restoreBackupFile(_0xf0b4c9);else logger[_0x18289f(0x27e)](_0x18289f(0x19b));}),_0x1bf22c['on']('get-messages',_0x3844ca=>{const _0x58d58c=_0x799049;if(validateAccess(_0x3844ca,_0x2775e)[_0x58d58c(0x217)])getMessages();else logger['full'](_0x58d58c(0x2be));}),_0x1bf22c['on']('confirm-message',(_0x4e5b42,_0x58e589)=>{const _0x44aedd=_0x799049;if(validateAccess(_0x58e589,_0x2775e)[_0x44aedd(0x217)])confirmMessage(_0x4e5b42);else logger[_0x44aedd(0x27e)](_0x44aedd(0x258));}),_0x1bf22c['on'](_0x799049(0x35e),_0x27d8d9=>{const _0x4876a1=_0x799049;if(validateAccess(_0x27d8d9,_0x2775e)[_0x4876a1(0x217)]){if(devices[_0x2775e][_0x4876a1(0x228)])clearTimeout(devices[_0x2775e][_0x4876a1(0x228)]);if(devices[_0x2775e][_0x4876a1(0x26e)])clearTimeout(devices[_0x2775e][_0x4876a1(0x26e)]);removeSocketListeners(getClient(_0x1bf22c['id'])[_0x4876a1(0x294)]),addBlacklist(_0x2775e),devices[_0x2775e][_0x4876a1(0x193)]=null,devices[_0x2775e][_0x4876a1(0x280)]=null,devices[_0x2775e][_0x4876a1(0x2d8)][_0x4876a1(0x34f)]=null,logger[_0x4876a1(0x234)](_0x4876a1(0x347)+_0x2775e[_0x4876a1(0x266)](-0x8)),io['to'](getClient(_0x1bf22c['id'])[_0x4876a1(0x294)])[_0x4876a1(0x1cf)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x4876a1(0x27e)](_0x4876a1(0x230));});}function initializeSocketBot(_0x5adcbe){const _0x8490bf=_0x4a7735,_0x19edfc=getClient(_0x5adcbe['id'])[_0x8490bf(0x1c3)],_0x346eff=getClient(_0x5adcbe['id'])[_0x8490bf(0x294)];_0x5adcbe['on'](_0x8490bf(0x331),(_0x3b48eb,_0x564721)=>{const _0x237611=_0x8490bf;if(validateAccess(_0x564721,_0x346eff)[_0x237611(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc]['send']({'function':_0x237611(0x35a),'args':_0x3b48eb});}else logger[_0x237611(0x27e)](_0x237611(0x1b2));}),_0x5adcbe['on'](_0x8490bf(0x1ba),(_0x516159,_0x489545)=>{const _0x3737ae=_0x8490bf;if(validateAccess(_0x489545,_0x346eff)['allow']){if(pid[_0x19edfc])pid[_0x19edfc]['send']({'function':_0x3737ae(0x1c6),'args':_0x516159});}else logger[_0x3737ae(0x27e)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5adcbe['on'](_0x8490bf(0x19d),(_0x228a2d,_0x14b7a8)=>{const _0x4b714d=_0x8490bf;if(validateAccess(_0x14b7a8,_0x346eff)[_0x4b714d(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc]['send']({'function':_0x4b714d(0x34c),'args':_0x228a2d});}else logger[_0x4b714d(0x27e)](_0x4b714d(0x314));}),_0x5adcbe['on'](_0x8490bf(0x322),(_0x43c8dc,_0x239944)=>{const _0x3e005=_0x8490bf;if(validateAccess(_0x239944,_0x346eff)[_0x3e005(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x3e005(0x22b)]({'function':_0x3e005(0x24c),'args':_0x43c8dc});}else logger['full'](_0x3e005(0x323));}),_0x5adcbe['on']('store-headless',(_0x30b991,_0x2b9929)=>{const _0x3d980c=_0x8490bf;if(validateAccess(_0x2b9929,_0x346eff)[_0x3d980c(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x3d980c(0x22b)]({'function':'storeHeadless','args':_0x30b991});}else logger['full'](_0x3d980c(0x31c));}),_0x5adcbe['on'](_0x8490bf(0x278),(_0xab8c4e,_0x47e6ec)=>{const _0x25cb16=_0x8490bf;if(validateAccess(_0x47e6ec,_0x346eff)[_0x25cb16(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x25cb16(0x22b)]({'function':'storeFiat','args':_0xab8c4e});}else logger[_0x25cb16(0x27e)](_0x25cb16(0x29d));}),_0x5adcbe['on'](_0x8490bf(0x20a),_0x4bb091=>{const _0x2c92ea=_0x8490bf;if(validateAccess(_0x4bb091,_0x346eff)[_0x2c92ea(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x2c92ea(0x22b)]({'function':'resetHistory','args':null});}else logger[_0x2c92ea(0x27e)](_0x2c92ea(0x23e));}),_0x5adcbe['on'](_0x8490bf(0x1af),_0xfe1848=>{const _0x3fd06a=_0x8490bf;if(validateAccess(_0xfe1848,_0x346eff)['allow']){if(pid[_0x19edfc])pid[_0x19edfc]['send']({'function':_0x3fd06a(0x1ab),'args':null});}else logger[_0x3fd06a(0x27e)](_0x3fd06a(0x2e9));}),_0x5adcbe['on'](_0x8490bf(0x302),(_0x108306,_0x35f212)=>{const _0x42f483=_0x8490bf;if(validateAccess(_0x35f212,_0x346eff)[_0x42f483(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x42f483(0x22b)]({'function':_0x42f483(0x1fb),'args':_0x108306});}else logger[_0x42f483(0x27e)](_0x42f483(0x1de));}),_0x5adcbe['on'](_0x8490bf(0x1ef),_0x1ddb28=>{const _0x47b8e9=_0x8490bf;if(validateAccess(_0x1ddb28,_0x346eff)[_0x47b8e9(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x47b8e9(0x22b)]({'function':_0x47b8e9(0x215),'args':null});}else logger[_0x47b8e9(0x27e)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5adcbe['on'](_0x8490bf(0x1a0),_0x538aa1=>{const _0x1376db=_0x8490bf;if(validateAccess(_0x538aa1,_0x346eff)[_0x1376db(0x217)]){if(pid[_0x19edfc])pid[_0x19edfc][_0x1376db(0x22b)]({'function':'showConfig','args':null});}else logger['full'](_0x1376db(0x28a));}),_0x5adcbe['on'](_0x8490bf(0x1b8),_0x47eba4=>{const _0x5dd448=_0x8490bf;if(validateAccess(_0x47eba4,_0x346eff)[_0x5dd448(0x217)])updateBB(_0x5dd448(0x1cb));else logger[_0x5dd448(0x27e)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x5adcbe['on'](_0x8490bf(0x2ca),_0x7102b7=>{const _0x5a50c9=_0x8490bf;if(validateAccess(_0x7102b7,_0x346eff)[_0x5a50c9(0x217)])getMessages();else logger[_0x5a50c9(0x27e)](_0x5a50c9(0x2be));}),_0x5adcbe['on'](_0x8490bf(0x1f1),(_0x2d5ba2,_0x39f85e)=>{const _0x40d485=_0x8490bf;if(validateAccess(_0x39f85e,_0x346eff)[_0x40d485(0x217)])confirmMessage(_0x2d5ba2);else logger[_0x40d485(0x27e)](_0x40d485(0x258));}),_0x5adcbe['on'](_0x8490bf(0x35e),_0x4ce430=>{const _0x59feba=_0x8490bf;if(validateAccess(_0x4ce430,_0x346eff)[_0x59feba(0x217)]){if(devices[_0x346eff][_0x59feba(0x228)])clearTimeout(devices[_0x346eff][_0x59feba(0x228)]);if(devices[_0x346eff][_0x59feba(0x26e)])clearTimeout(devices[_0x346eff]['pidExpireLogin']);removeSocketListeners(getClient(_0x5adcbe['id'])[_0x59feba(0x294)]),addBlacklist(_0x346eff),devices[_0x346eff][_0x59feba(0x193)]=null,devices[_0x346eff][_0x59feba(0x280)]=null,devices[_0x346eff]['access'][_0x59feba(0x34f)]=null,logger['debug'](_0x59feba(0x347)+_0x346eff[_0x59feba(0x266)](-0x8)),io['to'](getClient(_0x5adcbe['id'])['uuid'])[_0x59feba(0x1cf)](_0x59feba(0x216),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x59feba(0x27e)](_0x59feba(0x230));});}function removeSocketListeners(_0xabeed){getClientsWithUuid(_0xabeed)['forEach'](_0x29c02b=>{const _0x2ea948=_0x6f70;getSocket(_0x29c02b['id'])[_0x2ea948(0x260)]();});}function cleanSettings(){const _0x44b585=_0x4a7735;let _0x49d825=settings;return settings[_0x44b585(0x31d)]&&settings[_0x44b585(0x31d)]!=''&&(_0x49d825={..._0x49d825,'telegramToken':'************'}),settings[_0x44b585(0x29b)]&&settings[_0x44b585(0x29b)]!=''&&(_0x49d825={..._0x49d825,'bbPassword':_0x44b585(0x2a6)}),(settings[_0x44b585(0x29b)]&&settings[_0x44b585(0x29b)]==_0x44b585(0x249)||settings[_0x44b585(0x31d)]&&settings[_0x44b585(0x31d)]==_0x44b585(0x249))&&(_0x49d825={..._0x49d825,'restored':{'password':settings[_0x44b585(0x29b)]==_0x44b585(0x249),'telegram':settings[_0x44b585(0x31d)]==_0x44b585(0x249)}}),_0x49d825;}async function updateBB(_0x3a48c9){const _0xda67d5=_0x4a7735;await backupConfigFiles(),installingUpdate=!![],config[_0xda67d5(0x31b)](_0x3a7be0=>{const _0x442646=_0xda67d5;restartBot(_0x3a7be0[_0x442646(0x348)]);});if(_0x3a48c9==_0xda67d5(0x1cb))process['send']({'update':!![],'environment':environment},_0x365a5f=>{});else _0x3a48c9==_0xda67d5(0x32a)&&process[_0xda67d5(0x22b)]({'reinstall':!![],'environment':environment},_0x1d6d81=>{});}function startBot(_0x564d32,_0x510ea3,_0x4d1c02){const _0xd0ad7a=_0x4a7735;if(debugging)_0x564d32[_0xd0ad7a(0x25b)]('-d');let _0x64c2ab=![];const _0x2c18a4=_0x564d32[0x0];_0x510ea3={..._0x510ea3,'stdio':[_0xd0ad7a(0x2a7),_0xd0ad7a(0x2a7),'inherit','ipc']},pid[_0x2c18a4]=childProcess[_0xd0ad7a(0x2b7)](botfile,_0x564d32,_0x510ea3),pid[_0x2c18a4]['on']('message',_0x116bc1=>{const _0x188bce=_0xd0ad7a;switch(Object['keys'](_0x116bc1)[0x0]){case _0x188bce(0x233):updateBotName(_0x2c18a4,_0x116bc1[_0x188bce(0x233)]);break;case _0x188bce(0x1f5):updateBotManager();break;case _0x188bce(0x216):updateStatus(_0x2c18a4,_0x116bc1[_0x188bce(0x216)]);break;case _0x188bce(0x1f8):updateLive(_0x2c18a4,_0x116bc1[_0x188bce(0x1f8)]);break;case _0x188bce(0x21e):updateLive(_0x2c18a4,_0x116bc1[_0x188bce(0x21e)]),io['to'](_0x2c18a4)[_0x188bce(0x1cf)]('status',{'access':{'allow':![],'reason':_0x188bce(0x1b9),'token':null}});break;case _0x188bce(0x241):_0x116bc1['stop']==_0x188bce(0x2ec)&&restartBot(_0x2c18a4);_0x116bc1[_0x188bce(0x241)]==_0x188bce(0x350)&&toggleBot(_0x2c18a4,_0x188bce(0x229),'stopped');break;case _0x188bce(0x2fc):sendTelegram(_0x2c18a4,_0x116bc1[_0x188bce(0x2fc)]);break;case'telegrammsg':sendTelegramMsg(_0x116bc1['telegrammsg']);break;case _0x188bce(0x298):io['to'](_0x2c18a4)[_0x188bce(0x1cf)](_0x116bc1[_0x188bce(0x298)],_0x116bc1[_0x188bce(0x1f3)]);break;}}),pid[_0x2c18a4]['on']('error',function(_0x56fb2c){if(_0x64c2ab)return;_0x64c2ab=!![],_0x4d1c02(_0x56fb2c);}),pid[_0x2c18a4]['on'](_0xd0ad7a(0x1be),async function(_0x41c687){const _0x42e974=_0xd0ad7a;if(installingUpdate)return;if(_0x64c2ab)return;_0x64c2ab=!![],_0x4d1c02(null);const _0x5e9b93=dbConfig[_0x42e974(0x226)](_0x42e974(0x1e9))[_0x42e974(0x287)]({'botID':_0x2c18a4})[_0x42e974(0x2c5)]();_0x5e9b93&&(_0x5e9b93[_0x42e974(0x216)]=='enabled'||_0x5e9b93[_0x42e974(0x216)]==_0x42e974(0x1dd))&&(await sleep(0x3e8),updateLive(_0x2c18a4,_0x42e974(0x25c)),logger[_0x42e974(0x27e)](_0x42e974(0x221)+_0x2c18a4),startBot([_0x2c18a4,userID],{'cwd':bbpath},function(_0x22efdd){const _0x16d346=_0x42e974;if(_0x22efdd)logger[_0x16d346(0x27e)](_0x22efdd);}));});}function stopBot(_0x54d22b){const _0x4301bb=_0x4a7735;getClientsWithBotID(_0x54d22b)[_0x4301bb(0x31b)](_0x1b0222=>{const _0xa3e969=_0x4301bb;getSocket(_0x1b0222['id'])[_0xa3e969(0x2a5)](!![]),removeClient(_0x1b0222['id']);}),pid[_0x54d22b]&&(pid[_0x54d22b][_0x4301bb(0x350)](),pid[_0x54d22b]=null);}function restartBot(_0x35b4df){const _0x41919a=_0x4a7735;if(pid[_0x35b4df])pid[_0x35b4df][_0x41919a(0x350)]();}function addBot(){const _0x24c0d0=_0x4a7735;let _0x301c15;for(let _0x722b0e=0x1;_0x722b0e<0x3e9;_0x722b0e++){_0x301c15=_0x722b0e['toString']()[_0x24c0d0(0x2a0)](0x3,'0');let _0x541f67=config[_0x24c0d0(0x287)](_0x5a0a60=>_0x5a0a60[_0x24c0d0(0x348)]==_0x301c15);if(!_0x541f67)break;}if(_0x301c15==='1000'){logger[_0x24c0d0(0x27e)](_0x24c0d0(0x2de));return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x301c15),dbConfig[_0x24c0d0(0x226)](_0x24c0d0(0x1e9))[_0x24c0d0(0x25b)]({'botID':_0x301c15,'botname':'Bot\x20'+_0x301c15,'status':_0x24c0d0(0x1dd),'live':''})[_0x24c0d0(0x34b)](),startBot([_0x301c15,userID],{'cwd':bbpath},function(_0x2e29c5){if(_0x2e29c5)logger['full'](_0x2e29c5);}),config=getConfiguration(),io['to'](_0x24c0d0(0x31f))[_0x24c0d0(0x1cf)](_0x24c0d0(0x1e9),config),broadcastToBots(_0x24c0d0(0x1e9),JSON[_0x24c0d0(0x1a3)](config));}function deleteBot(_0x20ffe7){const _0xc940fc=_0x4a7735;getClientsWithBotID(_0x20ffe7)[_0xc940fc(0x31b)](_0x39df36=>{const _0x4ecbac=_0xc940fc;getSocket(_0x39df36['id'])[_0x4ecbac(0x2a5)](!![]),removeClient(_0x39df36['id']);}),dbConfig[_0xc940fc(0x226)](_0xc940fc(0x1e9))[_0xc940fc(0x2b9)]({'botID':_0x20ffe7})[_0xc940fc(0x34b)](),logger[_0xc940fc(0x27e)](_0xc940fc(0x2b0)+_0x20ffe7),stopBot(_0x20ffe7);try{if(fs[_0xc940fc(0x2c8)](path['join'](configpath,'bot-'+_0x20ffe7+'-config.json')))fs['unlinkSync'](path['join'](configpath,_0xc940fc(0x250)+_0x20ffe7+_0xc940fc(0x218)));if(fs['existsSync'](path[_0xc940fc(0x2c2)](configpath,_0xc940fc(0x250)+_0x20ffe7+_0xc940fc(0x240))))fs[_0xc940fc(0x242)](path[_0xc940fc(0x2c2)](configpath,_0xc940fc(0x250)+_0x20ffe7+_0xc940fc(0x240)));if(fs[_0xc940fc(0x2c8)](path['join'](configpath,_0xc940fc(0x250)+_0x20ffe7+'-performance.json')))fs[_0xc940fc(0x242)](path[_0xc940fc(0x2c2)](configpath,_0xc940fc(0x250)+_0x20ffe7+_0xc940fc(0x21d)));if(fs[_0xc940fc(0x2c8)](path[_0xc940fc(0x2c2)](configpath,'bot-'+_0x20ffe7+_0xc940fc(0x251))))fs[_0xc940fc(0x242)](path[_0xc940fc(0x2c2)](configpath,_0xc940fc(0x250)+_0x20ffe7+_0xc940fc(0x251)));}catch(_0x5a82de){if(_0x5a82de)logger[_0xc940fc(0x27e)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x5a82de);}config=getConfiguration(),io['to'](_0xc940fc(0x31f))[_0xc940fc(0x1cf)]('bots',config),broadcastToBots(_0xc940fc(0x1e9),JSON['stringify'](config));}function toggleBot(_0x9894d3,_0x2dcdd5,_0xb71af5){const _0x2d14f7=_0x4a7735;dbConfig[_0x2d14f7(0x226)](_0x2d14f7(0x1e9))[_0x2d14f7(0x287)]({'botID':_0x9894d3})[_0x2d14f7(0x2a3)]({'status':_0x2dcdd5})[_0x2d14f7(0x2a3)]({'live':_0xb71af5})[_0x2d14f7(0x34b)]();if(_0x2dcdd5==_0x2d14f7(0x332)||_0x2dcdd5==_0x2d14f7(0x1dd))logger[_0x2d14f7(0x27e)]('Enabled\x20Bot\x20'+_0x9894d3),startBot([_0x9894d3,userID],{'cwd':bbpath},function(_0x163888){const _0x3864ac=_0x2d14f7;if(_0x163888)logger[_0x3864ac(0x27e)](_0x163888);});else(_0x2dcdd5==_0x2d14f7(0x229)||_0x2dcdd5==_0x2d14f7(0x259))&&(logger[_0x2d14f7(0x27e)]('Disabled\x20Bot\x20'+_0x9894d3),stopBot(_0x9894d3));config=getConfiguration(),io['to'](_0x2d14f7(0x31f))[_0x2d14f7(0x1cf)](_0x2d14f7(0x1e9),config),broadcastToBots(_0x2d14f7(0x1e9),JSON[_0x2d14f7(0x1a3)](config));}function toggleStatus(_0x2afc7b){const _0x282417=_0x4a7735;let _0x2c1130=dbConfig[_0x282417(0x226)](_0x282417(0x1e9))['find']({'botID':_0x2afc7b})['value'](),_0x30c8f3;if(_0x2c1130[_0x282417(0x216)]===_0x282417(0x332))_0x30c8f3='disabled';else{if(_0x2c1130[_0x282417(0x216)]===_0x282417(0x1dd))_0x30c8f3=_0x282417(0x259);else{if(_0x2c1130[_0x282417(0x216)]===_0x282417(0x259))_0x30c8f3=_0x282417(0x1dd);else{if(_0x2c1130['status']===_0x282417(0x229))_0x30c8f3=_0x282417(0x332);}}}return _0x30c8f3;}function updateStatus(_0x5b561f,_0x265861){const _0x489f47=_0x4a7735;dbConfig['get'](_0x489f47(0x1e9))[_0x489f47(0x287)]({'botID':_0x5b561f})['assign']({'status':_0x265861})[_0x489f47(0x34b)](),config=getConfiguration(),io['to'](_0x489f47(0x31f))['emit'](_0x489f47(0x1e9),config),broadcastToBots(_0x489f47(0x1e9),JSON[_0x489f47(0x1a3)](config));}function updateLive(_0x492caf,_0x5ec970){const _0x4d114d=_0x4a7735;dbConfig['get'](_0x4d114d(0x1e9))[_0x4d114d(0x287)]({'botID':_0x492caf})[_0x4d114d(0x2a3)]({'live':_0x5ec970})[_0x4d114d(0x34b)](),config=getConfiguration(),io['to'](_0x4d114d(0x31f))[_0x4d114d(0x1cf)](_0x4d114d(0x1e9),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x4984c8,_0x1044ab){const _0x2df5dd=_0x4a7735;dbConfig['get'](_0x2df5dd(0x1e9))['find']({'botID':_0x4984c8})[_0x2df5dd(0x2a3)]({'botname':_0x1044ab})[_0x2df5dd(0x34b)](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x2df5dd(0x1e9),JSON[_0x2df5dd(0x1a3)](config));}function updateBotManager(){const _0x255658=_0x4a7735;config=getConfiguration(),io['to'](_0x255658(0x31f))[_0x255658(0x1cf)](_0x255658(0x1e9),config),broadcastToBots(_0x255658(0x1e9),JSON[_0x255658(0x1a3)](config));}function toggleBotMode(_0x17c8f0){const _0x12b9e6=_0x4a7735;if(pid[_0x17c8f0])pid[_0x17c8f0][_0x12b9e6(0x22b)]({'function':'toggleBotMode','args':null});else{const _0x1617b8=configpath+_0x12b9e6(0x250)+_0x17c8f0+_0x12b9e6(0x218),_0x1408d4=fs[_0x12b9e6(0x20f)](_0x1617b8),_0x337cc6=JSON[_0x12b9e6(0x1b7)](_0x1408d4),_0x5c0e0d=_0x337cc6[_0x12b9e6(0x1c3)][0x0][_0x12b9e6(0x35c)];_0x337cc6[_0x12b9e6(0x1c3)][0x0][_0x12b9e6(0x35c)]=!_0x5c0e0d;const _0x88146=JSON[_0x12b9e6(0x1a3)](_0x337cc6,null,0x2);fs[_0x12b9e6(0x321)](_0x1617b8,_0x88146),config=getConfiguration(),io['to']('botmanager')[_0x12b9e6(0x1cf)](_0x12b9e6(0x1e9),config),broadcastToBots(_0x12b9e6(0x1e9),JSON[_0x12b9e6(0x1a3)](config));}}function telegramError(_0x311241){const _0x55f6c9=_0x4a7735;logger[_0x55f6c9(0x2ea)](getTimeStamp()+_0x55f6c9(0x2e8));}function validateTelegram(_0x3181af){const _0x27f550=_0x4a7735;if(_0x3181af['from'][_0x27f550(0x1e5)]!=settings[_0x27f550(0x2ff)]&&'@'+_0x3181af['from'][_0x27f550(0x1e5)]!=settings[_0x27f550(0x2ff)])return tgBot[_0x27f550(0x25f)](_0x3181af[_0x27f550(0x19f)]['id'],_0x27f550(0x232),{'parse_mode':_0x27f550(0x328)})[_0x27f550(0x1bf)](_0x4d096d=>{telegramError(_0x4d096d);}),![];return!![];}async function initTelegram(){const _0x32d562=_0x4a7735;if(tgBot)tgBot[_0x32d562(0x2e7)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x32d562(0x31d)],{'polling':!![]});let _0x5350f3=_0x32d562(0x293);_0x5350f3+='\x0a',_0x5350f3+=_0x32d562(0x297),_0x5350f3+=_0x32d562(0x2fa),_0x5350f3+=_0x32d562(0x237),_0x5350f3+=_0x32d562(0x2ed),_0x5350f3+=_0x32d562(0x2d6),_0x5350f3+='/off\x20-\x20stop\x20bot(s)\x0a',_0x5350f3+=_0x32d562(0x1b0),_0x5350f3+=_0x32d562(0x292),_0x5350f3+=_0x32d562(0x201),_0x5350f3+=_0x32d562(0x18f),_0x5350f3+=_0x32d562(0x269),_0x5350f3+=_0x32d562(0x220),_0x5350f3+=_0x32d562(0x315),_0x5350f3+=_0x32d562(0x32d);let _0x7d41ac='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x7d41ac+='\x0a',_0x7d41ac+=_0x5350f3,tgBot[_0x32d562(0x30e)](/\/start/,_0x38a8ec=>{const _0x433d58=_0x32d562;if(!validateTelegram(_0x38a8ec))return;if(settings[_0x433d58(0x283)]!=_0x38a8ec['chat']['id'])updateSetting(_0x433d58(0x283),_0x38a8ec[_0x433d58(0x19f)]['id']);updateSetting(_0x433d58(0x207),!![]),tgBot[_0x433d58(0x25f)](_0x38a8ec[_0x433d58(0x19f)]['id'],_0x7d41ac)[_0x433d58(0x1bf)](_0x172d59=>{telegramError(_0x172d59);});}),tgBot[_0x32d562(0x30e)](/\/enable/,_0x363e92=>{const _0x73d2b3=_0x32d562;if(!validateTelegram(_0x363e92))return;if(settings[_0x73d2b3(0x283)]!=_0x363e92[_0x73d2b3(0x19f)]['id'])updateSetting(_0x73d2b3(0x283),_0x363e92[_0x73d2b3(0x19f)]['id']);updateSetting(_0x73d2b3(0x207),!![]),tgBot[_0x73d2b3(0x25f)](_0x363e92['chat']['id'],_0x73d2b3(0x2fb))[_0x73d2b3(0x1bf)](_0x2cc0ce=>{telegramError(_0x2cc0ce);});}),tgBot[_0x32d562(0x30e)](/\/config/,async _0x512e7f=>{const _0x2a58b5=_0x32d562;if(!validateTelegram(_0x512e7f))return;tgBot['removeListener']('callback_query'),tgBot[_0x2a58b5(0x25f)](_0x512e7f[_0x2a58b5(0x19f)]['id'],_0x2a58b5(0x313),{'reply_markup':{'inline_keyboard':[[{'text':_0x2a58b5(0x2bb),'callback_data':'orders'},{'text':_0x2a58b5(0x1c9),'callback_data':'alerts'},{'text':_0x2a58b5(0x247),'callback_data':'all'}]]}})['catch'](_0x1d1137=>{telegramError(_0x1d1137);}),tgBot['on'](_0x2a58b5(0x2ad),async _0x21e27f=>{const _0x10b24a=_0x2a58b5,_0x4bec8c=_0x21e27f['data'],_0x4c30c1=_0x21e27f['message'];tgBot[_0x10b24a(0x2d7)](_0x21e27f['id'])[_0x10b24a(0x198)](async()=>{const _0x322b51=_0x10b24a;_0x4bec8c==_0x322b51(0x1c0)&&(updateSetting(_0x322b51(0x26f),_0x322b51(0x1c0)),updateSetting('telegramEnabled',!![]),await tgBot[_0x322b51(0x25f)](_0x4c30c1[_0x322b51(0x19f)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x322b51(0x1bf)](_0x36348a=>{telegramError(_0x36348a);}));_0x4bec8c==_0x322b51(0x1a9)&&(updateSetting(_0x322b51(0x26f),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x322b51(0x25f)](_0x4c30c1[_0x322b51(0x19f)]['id'],_0x322b51(0x1dc))[_0x322b51(0x1bf)](_0xbd65d0=>{telegramError(_0xbd65d0);}));_0x4bec8c==_0x322b51(0x2ba)&&(updateSetting(_0x322b51(0x26f),'all'),updateSetting(_0x322b51(0x207),!![]),await tgBot[_0x322b51(0x25f)](_0x4c30c1['chat']['id'],_0x322b51(0x21f))[_0x322b51(0x1bf)](_0x11d608=>{telegramError(_0x11d608);}));if(!settings[_0x322b51(0x283)])tgBot[_0x322b51(0x25f)](_0x4c30c1[_0x322b51(0x19f)]['id'],_0x322b51(0x227))[_0x322b51(0x1bf)](_0x2e63a3=>{telegramError(_0x2e63a3);});}),tgBot[_0x10b24a(0x1bc)](_0x10b24a(0x2ad));});}),tgBot['onText'](/\/status/,_0x36f4c7=>{const _0x2a4481=_0x32d562;if(!validateTelegram(_0x36f4c7))return;const _0x78f48d=getBotsWithMode();let _0x428a6e=_0x2a4481(0x317);config[_0x2a4481(0x31b)](_0x3a2dc7=>{const _0xb0c952=_0x2a4481,_0x5ab961=_0x78f48d[_0xb0c952(0x287)](_0x1327a4=>_0x1327a4[_0xb0c952(0x348)]==_0x3a2dc7[_0xb0c952(0x348)])[_0xb0c952(0x1df)];_0x428a6e+=_0xb0c952(0x28e)+_0x3a2dc7[_0xb0c952(0x348)]+':\x20'+_0x3a2dc7['status']+_0xb0c952(0x1e0)+_0x5ab961+'\x20|\x20'+_0x3a2dc7[_0xb0c952(0x1f8)]+'\x0a';}),_0x428a6e+='\x0a',_0x428a6e+=_0x2a4481(0x273),_0x428a6e+=!settings['telegramEnabled']?_0x2a4481(0x281):_0x2a4481(0x2b8),_0x428a6e+=settings[_0x2a4481(0x207)]?settings['telegramEvents']==_0x2a4481(0x2ba)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2a4481(0x34d)+settings[_0x2a4481(0x26f)]+_0x2a4481(0x27d):'',tgBot[_0x2a4481(0x25f)](_0x36f4c7[_0x2a4481(0x19f)]['id'],_0x428a6e,{'parse_mode':'HTML'})[_0x2a4481(0x1bf)](_0x5dae74=>{telegramError(_0x5dae74);});}),tgBot[_0x32d562(0x30e)](/\/restart/,_0x5d41cf=>{const _0x57ac66=_0x32d562;if(!validateTelegram(_0x5d41cf))return;tgBot[_0x57ac66(0x1bc)](_0x57ac66(0x2ad));const _0x12aa25=getEnabledBots();if(_0x12aa25[_0x57ac66(0x296)]==0x0)tgBot[_0x57ac66(0x25f)](_0x5d41cf[_0x57ac66(0x19f)]['id'],_0x57ac66(0x33c))[_0x57ac66(0x1bf)](_0x18e5f1=>{telegramError(_0x18e5f1);});else{if(_0x12aa25['length']>0x1)_0x12aa25[_0x57ac66(0x25b)]({'botID':_0x57ac66(0x2ba)});let _0x13c7c3=[],_0x327b76=[];const _0x2aa382=_0x12aa25['length']%0x4==0x0||_0x12aa25[_0x57ac66(0x296)]%0x4==0x3||_0x12aa25['length']%0x3==0x1?0x4:0x3;let _0x4f8e84=0x0;_0x12aa25[_0x57ac66(0x31b)]((_0x393570,_0x3bebd5)=>{const _0x2a7f69=_0x57ac66;if(_0x3bebd5%_0x2aa382==0x0)_0x327b76=[];_0x327b76[_0x2a7f69(0x25b)]({'text':_0x393570[_0x2a7f69(0x348)]==_0x2a7f69(0x2ba)?_0x2a7f69(0x2a2):_0x2a7f69(0x28e)+_0x393570[_0x2a7f69(0x348)],'callback_data':_0x393570['botID']}),_0x3bebd5%_0x2aa382==0x0&&(_0x13c7c3[_0x4f8e84]=_0x327b76,_0x4f8e84++);}),tgBot['sendMessage'](_0x5d41cf['chat']['id'],_0x57ac66(0x330),{'reply_markup':{'inline_keyboard':_0x13c7c3}})['catch'](_0x491100=>{telegramError(_0x491100);}),tgBot['on'](_0x57ac66(0x2ad),async _0x4ef3fb=>{const _0x8f55c9=_0x57ac66,_0x3ff6a4=_0x4ef3fb['data'],_0x5add05=_0x4ef3fb['message'];tgBot['answerCallbackQuery'](_0x4ef3fb['id'])[_0x8f55c9(0x198)](async()=>{const _0x3b6e12=_0x8f55c9;_0x3ff6a4==_0x3b6e12(0x2ba)?config[_0x3b6e12(0x31b)](_0x4759f9=>{restartBot(_0x4759f9['botID']);}):restartBot(_0x3ff6a4);}),tgBot[_0x8f55c9(0x1bc)]('callback_query');});}}),tgBot[_0x32d562(0x30e)](/\/on/,_0x3c4f3d=>{const _0x598d65=_0x32d562;if(!validateTelegram(_0x3c4f3d))return;tgBot['removeListener'](_0x598d65(0x2ad));const _0x8e2000=getDisabledBots();if(_0x8e2000[_0x598d65(0x296)]==0x0)tgBot[_0x598d65(0x25f)](_0x3c4f3d[_0x598d65(0x19f)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x598d65(0x1bf)](_0x27d588=>{telegramError(_0x27d588);});else{if(_0x8e2000['length']>0x1)_0x8e2000[_0x598d65(0x25b)]({'botID':_0x598d65(0x2ba)});let _0x2cc053=[],_0x226656=[];const _0xac44e1=_0x8e2000['length']%0x4==0x0||_0x8e2000[_0x598d65(0x296)]%0x4==0x3||_0x8e2000[_0x598d65(0x296)]%0x3==0x1?0x4:0x3;let _0x5e8c22=0x0;_0x8e2000[_0x598d65(0x31b)]((_0x49b141,_0x3ddb9e)=>{const _0x17865b=_0x598d65;if(_0x3ddb9e%_0xac44e1==0x0)_0x226656=[];_0x226656[_0x17865b(0x25b)]({'text':_0x49b141[_0x17865b(0x348)]==_0x17865b(0x2ba)?'All\x20bots':_0x17865b(0x28e)+_0x49b141[_0x17865b(0x348)],'callback_data':_0x49b141[_0x17865b(0x348)]}),_0x3ddb9e%_0xac44e1==0x0&&(_0x2cc053[_0x5e8c22]=_0x226656,_0x5e8c22++);}),tgBot['sendMessage'](_0x3c4f3d[_0x598d65(0x19f)]['id'],_0x598d65(0x2a8),{'reply_markup':{'inline_keyboard':_0x2cc053}})[_0x598d65(0x1bf)](_0x5b97dd=>{telegramError(_0x5b97dd);}),tgBot['on'](_0x598d65(0x2ad),async _0x5c55bf=>{const _0x3acba1=_0x598d65,_0xf911aa=_0x5c55bf[_0x3acba1(0x282)],_0x4da424=_0x5c55bf[_0x3acba1(0x213)];tgBot['answerCallbackQuery'](_0x5c55bf['id'])[_0x3acba1(0x198)](async()=>{const _0x123bfd=_0x3acba1;_0xf911aa==_0x123bfd(0x2ba)?(tgBot['sendMessage'](_0x4da424[_0x123bfd(0x19f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x123bfd(0x1bf)](_0x1cbeb2=>{telegramError(_0x1cbeb2);}),_0x8e2000[_0x123bfd(0x31b)](_0x1cf247=>{const _0x3b47d0=_0x123bfd;if(_0x1cf247[_0x3b47d0(0x348)]!=_0x3b47d0(0x2ba))toggleBot(_0x1cf247[_0x3b47d0(0x348)],toggleStatus(_0x1cf247['botID']),_0x3b47d0(0x25c));})):(tgBot['sendMessage'](_0x4da424[_0x123bfd(0x19f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0xf911aa)['catch'](_0x3c3752=>{telegramError(_0x3c3752);}),toggleBot(_0xf911aa,toggleStatus(_0xf911aa),'stopped'));}),tgBot[_0x3acba1(0x1bc)](_0x3acba1(0x2ad));});}}),tgBot[_0x32d562(0x30e)](/\/off/,_0x267a7b=>{const _0x13d026=_0x32d562;if(!validateTelegram(_0x267a7b))return;tgBot[_0x13d026(0x1bc)]('callback_query');const _0x3f19a0=getEnabledBots();if(_0x3f19a0['length']==0x0)tgBot[_0x13d026(0x25f)](_0x267a7b[_0x13d026(0x19f)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x13d026(0x1bf)](_0x1d1bf1=>{telegramError(_0x1d1bf1);});else{if(_0x3f19a0[_0x13d026(0x296)]>0x1)_0x3f19a0[_0x13d026(0x25b)]({'botID':_0x13d026(0x2ba)});let _0xc33e5b=[],_0xb91e0a=[];const _0x5b37f8=_0x3f19a0[_0x13d026(0x296)]%0x4==0x0||_0x3f19a0[_0x13d026(0x296)]%0x4==0x3||_0x3f19a0[_0x13d026(0x296)]%0x3==0x1?0x4:0x3;let _0x69b11d=0x0;_0x3f19a0[_0x13d026(0x31b)]((_0x2cd235,_0x6c770a)=>{const _0x2332b7=_0x13d026;if(_0x6c770a%_0x5b37f8==0x0)_0xb91e0a=[];_0xb91e0a[_0x2332b7(0x25b)]({'text':_0x2cd235['botID']==_0x2332b7(0x2ba)?'All\x20bots':_0x2332b7(0x28e)+_0x2cd235[_0x2332b7(0x348)],'callback_data':_0x2cd235[_0x2332b7(0x348)]}),_0x6c770a%_0x5b37f8==0x0&&(_0xc33e5b[_0x69b11d]=_0xb91e0a,_0x69b11d++);}),tgBot['sendMessage'](_0x267a7b['chat']['id'],_0x13d026(0x316),{'reply_markup':{'inline_keyboard':_0xc33e5b}})['catch'](_0x56aa5d=>{telegramError(_0x56aa5d);}),tgBot['on'](_0x13d026(0x2ad),async _0x1bce05=>{const _0x1fac1c=_0x13d026,_0x19b56a=_0x1bce05['data'],_0x2bc195=_0x1bce05[_0x1fac1c(0x213)];tgBot['answerCallbackQuery'](_0x1bce05['id'])['then'](async()=>{const _0x325f01=_0x1fac1c;_0x19b56a=='all'?(tgBot[_0x325f01(0x25f)](_0x2bc195[_0x325f01(0x19f)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x325f01(0x1bf)](_0x7d11b7=>{telegramError(_0x7d11b7);}),_0x3f19a0['forEach'](_0x56b8db=>{const _0x19809b=_0x325f01;if(_0x56b8db[_0x19809b(0x348)]!=_0x19809b(0x2ba))toggleBot(_0x56b8db[_0x19809b(0x348)],toggleStatus(_0x56b8db[_0x19809b(0x348)]),'stopped');})):(tgBot['sendMessage'](_0x2bc195['chat']['id'],_0x325f01(0x27f)+_0x19b56a)[_0x325f01(0x1bf)](_0x328ab7=>{telegramError(_0x328ab7);}),toggleBot(_0x19b56a,toggleStatus(_0x19b56a),_0x325f01(0x25c)));}),tgBot[_0x1fac1c(0x1bc)](_0x1fac1c(0x2ad));});}}),tgBot['onText'](/\/metrics/,_0x23bd03=>{const _0x1bd0ba=_0x32d562;if(!validateTelegram(_0x23bd03))return;tgBot[_0x1bd0ba(0x1bc)](_0x1bd0ba(0x2ad));const _0x26601b=getEnabledBots();if(_0x26601b[_0x1bd0ba(0x296)]==0x0)tgBot[_0x1bd0ba(0x25f)](_0x23bd03[_0x1bd0ba(0x19f)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x1bd0ba(0x1bf)](_0x44a765=>{telegramError(_0x44a765);});else{if(_0x26601b['length']>0x1){let _0x529ebc=[],_0x3fdfee=[];const _0x41f950=_0x26601b[_0x1bd0ba(0x296)]%0x4==0x0||_0x26601b[_0x1bd0ba(0x296)]%0x4==0x3||_0x26601b['length']%0x3==0x1?0x4:0x3;let _0x5189db=0x0;_0x26601b[_0x1bd0ba(0x31b)]((_0x166c7a,_0x31da72)=>{const _0x2f6111=_0x1bd0ba;if(_0x31da72%_0x41f950==0x0)_0x3fdfee=[];_0x3fdfee[_0x2f6111(0x25b)]({'text':'Bot\x20'+_0x166c7a[_0x2f6111(0x348)],'callback_data':_0x166c7a[_0x2f6111(0x348)]}),_0x31da72%_0x41f950==0x0&&(_0x529ebc[_0x5189db]=_0x3fdfee,_0x5189db++);}),tgBot[_0x1bd0ba(0x25f)](_0x23bd03['chat']['id'],_0x1bd0ba(0x329),{'reply_markup':{'inline_keyboard':_0x529ebc}})[_0x1bd0ba(0x1bf)](_0x26f878=>{telegramError(_0x26f878);}),tgBot['on']('callback_query',async _0x469fa6=>{const _0x47abde=_0x1bd0ba,_0xcdfd64=_0x469fa6['data'],_0x4d47c0=_0x469fa6[_0x47abde(0x213)];tgBot[_0x47abde(0x2d7)](_0x469fa6['id'])[_0x47abde(0x198)](async()=>{const _0x269a68=_0x47abde;if(pid[_0xcdfd64])pid[_0xcdfd64][_0x269a68(0x22b)]({'function':_0x269a68(0x33e),'args':null});}),tgBot[_0x47abde(0x1bc)](_0x47abde(0x2ad));});}else{const _0x39f73d=_0x26601b[0x0]['botID'];if(pid[_0x39f73d])pid[_0x39f73d]['send']({'function':_0x1bd0ba(0x33e),'args':null});}}}),tgBot[_0x32d562(0x30e)](/\/portfolio/,_0x529e17=>{const _0x10b82a=_0x32d562;if(!validateTelegram(_0x529e17))return;tgBot[_0x10b82a(0x1bc)](_0x10b82a(0x2ad));const _0x46fe59=getEnabledBots();if(_0x46fe59['length']==0x0)tgBot[_0x10b82a(0x25f)](_0x529e17[_0x10b82a(0x19f)]['id'],_0x10b82a(0x33c))['catch'](_0x27697f=>{telegramError(_0x27697f);});else{if(_0x46fe59[_0x10b82a(0x296)]>0x1){let _0x3bec7d=[],_0x46f51b=[];const _0x19046b=_0x46fe59[_0x10b82a(0x296)]%0x4==0x0||_0x46fe59[_0x10b82a(0x296)]%0x4==0x3||_0x46fe59['length']%0x3==0x1?0x4:0x3;let _0x1c5416=0x0;_0x46fe59[_0x10b82a(0x31b)]((_0x2de484,_0xe7c1b5)=>{const _0xd6b0fe=_0x10b82a;if(_0xe7c1b5%_0x19046b==0x0)_0x46f51b=[];_0x46f51b[_0xd6b0fe(0x25b)]({'text':_0xd6b0fe(0x28e)+_0x2de484[_0xd6b0fe(0x348)],'callback_data':_0x2de484[_0xd6b0fe(0x348)]}),_0xe7c1b5%_0x19046b==0x0&&(_0x3bec7d[_0x1c5416]=_0x46f51b,_0x1c5416++);}),tgBot['sendMessage'](_0x529e17[_0x10b82a(0x19f)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x3bec7d}})[_0x10b82a(0x1bf)](_0x5460e9=>{telegramError(_0x5460e9);}),tgBot['on'](_0x10b82a(0x2ad),async _0x583299=>{const _0x5446de=_0x10b82a,_0x8a3b4b=_0x583299[_0x5446de(0x282)],_0x50054c=_0x583299['message'];tgBot[_0x5446de(0x2d7)](_0x583299['id'])[_0x5446de(0x198)](async()=>{const _0x502139=_0x5446de;if(pid[_0x8a3b4b])pid[_0x8a3b4b][_0x502139(0x22b)]({'function':_0x502139(0x28c),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x4cd0e7=_0x46fe59[0x0][_0x10b82a(0x348)];if(pid[_0x4cd0e7])pid[_0x4cd0e7]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x32d562(0x30e)](/\/update/,async _0x38a85a=>{const _0x2fdc25=_0x32d562;if(!validateTelegram(_0x38a85a))return;tgBot[_0x2fdc25(0x1bc)](_0x2fdc25(0x2ad)),await getMessages();if(!updateAvailable)tgBot[_0x2fdc25(0x25f)](_0x38a85a['chat']['id'],_0x2fdc25(0x2d2))[_0x2fdc25(0x1bf)](_0xaabe31=>{telegramError(_0xaabe31);});else!validInstallation?tgBot[_0x2fdc25(0x25f)](_0x38a85a[_0x2fdc25(0x19f)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x184144=>{telegramError(_0x184144);}):(tgBot[_0x2fdc25(0x25f)](_0x38a85a[_0x2fdc25(0x19f)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x2fdc25(0x22f)},{'text':'No','callback_data':'no'}]]}})[_0x2fdc25(0x1bf)](_0x351d2c=>{telegramError(_0x351d2c);}),tgBot['on']('callback_query',async _0x5d5e0e=>{const _0x296929=_0x2fdc25,_0x429c4c=_0x5d5e0e[_0x296929(0x282)],_0x205750=_0x5d5e0e['message'];tgBot[_0x296929(0x2d7)](_0x5d5e0e['id'])[_0x296929(0x198)](async()=>{const _0x567b8c=_0x296929;_0x429c4c==_0x567b8c(0x22f)&&(await tgBot[_0x567b8c(0x25f)](_0x205750[_0x567b8c(0x19f)]['id'],_0x567b8c(0x203))[_0x567b8c(0x1bf)](_0x59f551=>{telegramError(_0x59f551);}),updateBB(_0x567b8c(0x1cb))),_0x429c4c=='no'&&await tgBot['sendMessage'](_0x205750[_0x567b8c(0x19f)]['id'],_0x567b8c(0x2a9))[_0x567b8c(0x1bf)](_0x3410cd=>{telegramError(_0x3410cd);});}),tgBot[_0x296929(0x1bc)]('callback_query');}));}),tgBot[_0x32d562(0x30e)](/\/reinstall/,async _0x233dcc=>{const _0x15b8d9=_0x32d562;if(!validateTelegram(_0x233dcc))return;tgBot[_0x15b8d9(0x1bc)]('callback_query'),!validInstallation?tgBot[_0x15b8d9(0x25f)](_0x233dcc['chat']['id'],_0x15b8d9(0x2c9))[_0x15b8d9(0x1bf)](_0xf2bce1=>{telegramError(_0xf2bce1);}):(tgBot[_0x15b8d9(0x25f)](_0x233dcc['chat']['id'],_0x15b8d9(0x2ac),{'reply_markup':{'inline_keyboard':[[{'text':_0x15b8d9(0x204),'callback_data':_0x15b8d9(0x22f)},{'text':'No','callback_data':'no'}]]}})[_0x15b8d9(0x1bf)](_0x407e6=>{telegramError(_0x407e6);}),tgBot['on']('callback_query',async _0x3262d7=>{const _0x3b8d65=_0x15b8d9,_0xcc97d3=_0x3262d7[_0x3b8d65(0x282)],_0x4bac4b=_0x3262d7['message'];tgBot['answerCallbackQuery'](_0x3262d7['id'])[_0x3b8d65(0x198)](async()=>{const _0x48b880=_0x3b8d65;_0xcc97d3==_0x48b880(0x22f)&&(await tgBot[_0x48b880(0x25f)](_0x4bac4b[_0x48b880(0x19f)]['id'],_0x48b880(0x2af))[_0x48b880(0x1bf)](_0x4ffdc8=>{telegramError(_0x4ffdc8);}),updateBB('reinstall')),_0xcc97d3=='no'&&await tgBot[_0x48b880(0x25f)](_0x4bac4b[_0x48b880(0x19f)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x48b880(0x1bf)](_0x4bfc6f=>{telegramError(_0x4bfc6f);});}),tgBot[_0x3b8d65(0x1bc)](_0x3b8d65(0x2ad));}));}),tgBot[_0x32d562(0x30e)](/\/toggle/,_0x43c067=>{const _0xd7483f=_0x32d562;if(!validateTelegram(_0x43c067))return;tgBot[_0xd7483f(0x1bc)](_0xd7483f(0x2ad));const _0xe797ad=getBotsWithMode();if(_0xe797ad['length']==0x0)tgBot[_0xd7483f(0x25f)](_0x43c067[_0xd7483f(0x19f)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x11a28b=>{telegramError(_0x11a28b);});else{let _0x3bf1d6=[],_0x4555e9=[];const _0x2b5079=0x2;let _0x6920c6=0x0;_0xe797ad[_0xd7483f(0x31b)]((_0x5c59d3,_0x30c238)=>{const _0x21158e=_0xd7483f;if(_0x30c238%_0x2b5079==0x0)_0x4555e9=[];_0x4555e9[_0x21158e(0x25b)]({'text':_0x21158e(0x28e)+_0x5c59d3['botID']+'\x20('+_0x5c59d3[_0x21158e(0x1df)]+')','callback_data':_0x5c59d3[_0x21158e(0x348)]}),_0x30c238%_0x2b5079==0x0&&(_0x3bf1d6[_0x6920c6]=_0x4555e9,_0x6920c6++);}),tgBot[_0xd7483f(0x25f)](_0x43c067['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x3bf1d6}})[_0xd7483f(0x1bf)](_0xab6277=>{telegramError(_0xab6277);}),tgBot['on'](_0xd7483f(0x2ad),async _0x13eca6=>{const _0x872ae=_0xd7483f,_0x1daadd=_0x13eca6[_0x872ae(0x282)],_0x50dd96=_0x13eca6['message'];tgBot[_0x872ae(0x2d7)](_0x13eca6['id'])[_0x872ae(0x198)](async()=>{const _0x371745=_0x872ae,_0x3ca3e1=_0xe797ad[_0x371745(0x287)](_0x1a3c59=>_0x1a3c59[_0x371745(0x348)]==_0x1daadd),_0x2826b6=_0x3ca3e1[_0x371745(0x1df)]==_0x371745(0x271)?_0x371745(0x1ec):_0x371745(0x271);tgBot['sendMessage'](_0x50dd96[_0x371745(0x19f)]['id'],_0x371745(0x192)+_0x1daadd+_0x371745(0x2fd)+_0x2826b6+_0x371745(0x1c5))[_0x371745(0x1bf)](_0x24a49b=>{telegramError(_0x24a49b);}),toggleBotMode(_0x1daadd);}),tgBot['removeListener'](_0x872ae(0x2ad));});}}),tgBot['onText'](/\/names/,_0x9a6890=>{const _0x37dfbb=_0x32d562;if(!validateTelegram(_0x9a6890))return;let _0x18e9a0='';config[_0x37dfbb(0x31b)](_0x105235=>{const _0x2e1621=_0x37dfbb;_0x18e9a0+=_0x2e1621(0x28e)+_0x105235[_0x2e1621(0x348)]+':\x20'+_0x105235[_0x2e1621(0x233)]+'\x0a';}),tgBot[_0x37dfbb(0x25f)](_0x9a6890[_0x37dfbb(0x19f)]['id'],_0x18e9a0,{'parse_mode':'HTML'})[_0x37dfbb(0x1bf)](_0x3bc3d2=>{telegramError(_0x3bc3d2);});}),tgBot['onText'](/\/disable/,_0x442826=>{const _0x3cfbbe=_0x32d562;if(!validateTelegram(_0x442826))return;tgBot[_0x3cfbbe(0x25f)](_0x442826[_0x3cfbbe(0x19f)]['id'],'Notifications\x20disabled')[_0x3cfbbe(0x1bf)](_0x373285=>{telegramError(_0x373285);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x32d562(0x30e)](/\/help/,_0x4fb93a=>{const _0x5a91a6=_0x32d562;if(!validateTelegram(_0x4fb93a))return;tgBot[_0x5a91a6(0x25f)](_0x4fb93a[_0x5a91a6(0x19f)]['id'],_0x5350f3)[_0x5a91a6(0x1bf)](_0x2016ff=>{telegramError(_0x2016ff);});}),tgBot['on'](_0x32d562(0x346),_0x348a11=>{const _0x180bf7=_0x32d562;_0x348a11['toString']()['includes'](_0x180bf7(0x24a))&&(logger[_0x180bf7(0x27e)](_0x180bf7(0x2b4)),tgBot[_0x180bf7(0x2e7)](),tgBot=null,io['to'](_0x180bf7(0x31f))[_0x180bf7(0x1cf)](_0x180bf7(0x1aa),_0x180bf7(0x2b4)));}),process[_0x32d562(0x349)](_0x32d562(0x2bf),()=>{const _0x4e862d=_0x32d562;if(tgBot)tgBot[_0x4e862d(0x2e7)]();process[_0x4e862d(0x1be)](0x1);}),process[_0x32d562(0x349)](_0x32d562(0x338),()=>{const _0xcd1426=_0x32d562;if(tgBot)tgBot[_0xcd1426(0x2e7)]();process[_0xcd1426(0x1be)](0x1);});}}function disableTelegram(){const _0x361f14=_0x4a7735;tgBot&&(tgBot[_0x361f14(0x2e7)](),tgBot=null);}function sendTelegram(_0x8c2dca,_0x1b8a4f){const _0x378174=_0x4a7735;if(settings[_0x378174(0x207)]){if(settings[_0x378174(0x26f)]==_0x378174(0x2ba)||(_0x1b8a4f[_0x378174(0x18d)]=='error'||_0x1b8a4f['type']==_0x378174(0x21b)||_0x1b8a4f[_0x378174(0x18d)]==_0x378174(0x277))&&settings['telegramEvents']==_0x378174(0x1a9)||_0x1b8a4f[_0x378174(0x18d)]==_0x378174(0x1f4)&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x378174(0x283)]){if(_0x1b8a4f['showname'])tgBot['sendMessage'](settings[_0x378174(0x283)],_0x1b8a4f['botname']+_0x378174(0x23c)+_0x1b8a4f['event'])[_0x378174(0x1bf)](_0x3705f5=>{telegramError(_0x3705f5);});else tgBot[_0x378174(0x25f)](settings[_0x378174(0x283)],_0x378174(0x28e)+_0x8c2dca+_0x378174(0x23c)+_0x1b8a4f['event'])[_0x378174(0x1bf)](_0x17b63f=>{telegramError(_0x17b63f);});}}}}async function sendTelegramMsg(_0x56ef8f,_0x5212dd=_0x4a7735(0x328)){const _0x53b49b=_0x4a7735;return settings[_0x53b49b(0x207)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x53b49b(0x25f)](settings[_0x53b49b(0x283)],_0x56ef8f,{'parse_mode':_0x5212dd})[_0x53b49b(0x1bf)](_0x384718=>{telegramError(_0x384718);}),!![]):![];}function getDeviceWithIp(_0x1ea7d0){return devices['find'](_0x17a114=>_0x17a114['ip']===_0x1ea7d0);}function temporaryAccess2FA(_0x27e5ce,_0x5a0ade){const _0x1f4ce5=_0x4a7735;let _0x331571=new Date(),_0x5ca616=![];if(lastIpApproval){if(_0x331571-lastIpApproval<0x1388)_0x5ca616=!![];}lastIpApproval=new Date();if(_0x5ca616)return;tgBot&&settings[_0x1f4ce5(0x283)]&&(tgBot[_0x1f4ce5(0x1bc)](_0x1f4ce5(0x2ad)),tgBot['sendMessage'](settings[_0x1f4ce5(0x283)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5a0ade)[_0x1f4ce5(0x2e4)]+'</b>\x20?',{'parse_mode':_0x1f4ce5(0x328),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x1f4ce5(0x18b),'callback_data':'15'},{'text':_0x1f4ce5(0x29a),'callback_data':'30'},{'text':_0x1f4ce5(0x326),'callback_data':_0x1f4ce5(0x326)}]]}})['catch'](_0x194907=>{telegramError(_0x194907);}),tgBot['on'](_0x1f4ce5(0x2ad),async _0x3a7d7f=>{const _0x3fd958=_0x1f4ce5,_0x3e965a=_0x3a7d7f[_0x3fd958(0x282)],_0xf9572b=_0x3a7d7f[_0x3fd958(0x213)];tgBot[_0x3fd958(0x2d7)](_0x3a7d7f['id'])[_0x3fd958(0x198)](async()=>{const _0x520e8e=_0x3fd958;devices[_0x27e5ce][_0x520e8e(0x193)]={'clientip':_0x5a0ade,'timestamp':new Date()[_0x520e8e(0x1ea)](),'expiry':_0x3e965a},_0x3e965a!=_0x520e8e(0x326)?(await tgBot['sendMessage'](_0xf9572b['chat']['id'],'Access\x20enabled\x20for\x20'+_0x3e965a+'\x20minutes',{'parse_mode':'HTML'})[_0x520e8e(0x1bf)](_0x4ab6a2=>{telegramError(_0x4ab6a2);}),io['to'](_0x27e5ce)[_0x520e8e(0x1cf)](_0x520e8e(0x216),{'access':{'allow':![],'reason':_0x520e8e(0x1b9),'token':null}})):(await tgBot['sendMessage'](_0xf9572b[_0x520e8e(0x19f)]['id'],'Temporary\x20access\x20rejected')[_0x520e8e(0x1bf)](_0x2b547c=>{telegramError(_0x2b547c);}),io['to'](_0x27e5ce)[_0x520e8e(0x1cf)](_0x520e8e(0x216),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x3fd958(0x1bc)](_0x3fd958(0x2ad));}));}function loginAccess2FA(_0x2e2a75,_0x2c6150){const _0x47cbce=_0x4a7735;tgBot&&settings[_0x47cbce(0x283)]&&(tgBot[_0x47cbce(0x1bc)](_0x47cbce(0x2ad)),tgBot[_0x47cbce(0x25f)](settings[_0x47cbce(0x283)],_0x47cbce(0x1ee)+normalizeIP(_0x2c6150)[_0x47cbce(0x2e4)]+'</b>\x20?',{'parse_mode':_0x47cbce(0x328),'reply_markup':{'inline_keyboard':[[{'text':_0x47cbce(0x21c),'callback_data':loginExpiry},{'text':_0x47cbce(0x326),'callback_data':'reject'}]]}})['catch'](_0x1b589c=>{telegramError(_0x1b589c);}),tgBot['on'](_0x47cbce(0x2ad),async _0x23ff8b=>{const _0x594797=_0x47cbce,_0x12454a=_0x23ff8b[_0x594797(0x282)],_0x567768=_0x23ff8b[_0x594797(0x213)];tgBot[_0x594797(0x2d7)](_0x23ff8b['id'])[_0x594797(0x198)](async()=>{const _0x236699=_0x594797;devices[_0x2e2a75]['telegram2FaApproval']={'clientip':_0x2c6150,'timestamp':new Date()[_0x236699(0x1ea)](),'expiry':_0x12454a},_0x12454a!=_0x236699(0x326)?(await tgBot[_0x236699(0x25f)](_0x567768['chat']['id'],_0x236699(0x345),{'parse_mode':_0x236699(0x328)})[_0x236699(0x1bf)](_0x3df672=>{telegramError(_0x3df672);}),io['to'](_0x2e2a75)[_0x236699(0x1cf)](_0x236699(0x216),{'access':{'allow':![],'reason':_0x236699(0x1b9),'token':null}})):(await tgBot['sendMessage'](_0x567768[_0x236699(0x19f)]['id'],_0x236699(0x2e3))['catch'](_0x33a450=>{telegramError(_0x33a450);}),io['to'](_0x2e2a75)[_0x236699(0x1cf)](_0x236699(0x216),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x594797(0x2ad));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5176e3=_0x4a7735;return dbConfig['get'](_0x5176e3(0x1e9))[_0x5176e3(0x27a)]('botID')[_0x5176e3(0x2b5)]({'status':'enabled'})[_0x5176e3(0x2c5)]()||[];}function getDisabledBots(){const _0x31b82c=_0x4a7735;return dbConfig[_0x31b82c(0x226)]('bots')[_0x31b82c(0x27a)](_0x31b82c(0x348))[_0x31b82c(0x2b5)]({'status':_0x31b82c(0x229)})[_0x31b82c(0x2c5)]()||[];}function getBotAttributes(_0x3c5643){const _0x209152=_0x4a7735;let _0x4b51fb={};const _0x3749df=configpath+'bot-'+_0x3c5643+_0x209152(0x218),_0x249c76=fs[_0x209152(0x2c8)](_0x3749df);if(_0x249c76){const _0x5ccbe6=fs[_0x209152(0x20f)](_0x3749df);try{const _0x2b3f6f=JSON[_0x209152(0x1b7)](_0x5ccbe6),_0x3e3b14=_0x2b3f6f?_0x2b3f6f[_0x209152(0x1c3)][0x0][_0x209152(0x35c)]:![];_0x4b51fb['mode']=_0x3e3b14?_0x209152(0x271):_0x209152(0x1ec),_0x4b51fb[_0x209152(0x233)]=_0x2b3f6f?_0x2b3f6f[_0x209152(0x1c3)][0x0][_0x209152(0x233)]:_0x209152(0x28e)+_0x3c5643;}catch(_0x471a4d){_0x4b51fb[_0x209152(0x1df)]=_0x209152(0x1ec),_0x4b51fb[_0x209152(0x233)]=_0x209152(0x28e)+_0x3c5643;}}else _0x4b51fb[_0x209152(0x1df)]=_0x209152(0x1ec),_0x4b51fb[_0x209152(0x233)]=_0x209152(0x28e)+_0x3c5643;return _0x4b51fb;}function getBotsWithMode(){const _0x5456e8=_0x4a7735,_0x4076ba=dbConfig['get'](_0x5456e8(0x1e9))[_0x5456e8(0x27a)]('botID')[_0x5456e8(0x2c5)]()||[];return _0x4076ba['forEach'](_0x513006=>{const _0x350f65=_0x5456e8;let _0x58ad0b=getBotAttributes(_0x513006['botID']);_0x513006[_0x350f65(0x1df)]=_0x58ad0b['mode'];}),_0x4076ba;}function getBotExchanges(){const _0x3da2e0=_0x4a7735;let _0x29ae4c=[];const _0x4c1929=dbConfig[_0x3da2e0(0x226)](_0x3da2e0(0x1e9))[_0x3da2e0(0x27a)](_0x3da2e0(0x348))[_0x3da2e0(0x2c5)]()||[];_0x4c1929['forEach'](_0xe57291=>{const _0x49dd81=_0x3da2e0;if(_0xe57291[_0x49dd81(0x216)]==_0x49dd81(0x332)){const _0x12bf84=configpath+_0x49dd81(0x250)+_0xe57291[_0x49dd81(0x348)]+_0x49dd81(0x218),_0x30b609=fs[_0x49dd81(0x2c8)](_0x12bf84);let _0x15556c;if(_0x30b609){const _0x15e8ba=fs[_0x49dd81(0x20f)](_0x12bf84);try{const _0x445a10=JSON[_0x49dd81(0x1b7)](_0x15e8ba);_0x15556c=_0x445a10?_0x445a10[_0x49dd81(0x1c3)][0x0][_0x49dd81(0x270)]:null;}catch(_0x14e6e0){}}if(_0x15556c)_0x29ae4c[_0x49dd81(0x25b)](_0x15556c);}});const _0x7e50e6=[...new Set(_0x29ae4c)]['sort']();return _0x7e50e6;}async function initUser(){const _0x3aac1f=_0x4a7735;if(!settings[_0x3aac1f(0x2d1)]){const _0x5993d2=uuidRandom();mixpanel[_0x3aac1f(0x32c)](_0x5993d2),updateSetting(_0x3aac1f(0x2d1),_0x5993d2);}}async function initSecure(){const _0x19f4de=_0x4a7735;let _0x18ccd0=getSecure();if(!_0x18ccd0['hasOwnProperty'](_0x19f4de(0x1f0))){let _0x8f05=await generateKeys();_0x18ccd0[_0x19f4de(0x35d)]=_0x8f05[_0x19f4de(0x35d)],_0x18ccd0[_0x19f4de(0x1e8)]=_0x8f05[_0x19f4de(0x1e8)],_0x18ccd0[_0x19f4de(0x1f0)]=crypto['randomBytes'](0x20)[_0x19f4de(0x2f4)](_0x19f4de(0x33d));;storeSecure(_0x18ccd0);}}function getSettings(){const _0x37620c=_0x4a7735;return dbSettings[_0x37620c(0x226)](_0x37620c(0x19c))[_0x37620c(0x2c5)]()||{};}function getSecure(){const _0x2ce7eb=_0x4a7735;return dbSecure[_0x2ce7eb(0x226)](_0x2ce7eb(0x2c1))[_0x2ce7eb(0x2c5)]()||{};}function getBlacklist(){const _0x5e0025=_0x4a7735;return dbSecure[_0x5e0025(0x226)](_0x5e0025(0x246))['value']()||[];}function broadcastToBots(_0x4b555d,_0x42fc5b){const _0x53df54=_0x4a7735;config[_0x53df54(0x31b)](_0x5a1b3b=>{const _0x141008=_0x53df54;if(_0x5a1b3b['status']==_0x141008(0x332)&&_0x5a1b3b[_0x141008(0x1f8)]==_0x141008(0x1a1)||_0x5a1b3b['status']==_0x141008(0x1dd)&&_0x5a1b3b[_0x141008(0x1f8)]==_0x141008(0x1a1)){if(pid[_0x5a1b3b[_0x141008(0x348)]])pid[_0x5a1b3b[_0x141008(0x348)]][_0x141008(0x22b)]({[_0x4b555d]:_0x42fc5b});}});}function storeSettings(_0x20a611,_0x3022af=![]){const _0x21fe4c=_0x4a7735;_0x20a611={...settings,..._0x20a611};if(_0x3022af&&_0x20a611[_0x21fe4c(0x29b)]!=_0x21fe4c(0x2a6)&&_0x20a611[_0x21fe4c(0x29b)]!=_0x21fe4c(0x249)&&_0x20a611[_0x21fe4c(0x29b)]!=''){const _0x385b36=crypt[_0x21fe4c(0x1e2)](secure['privateKey'],_0x20a611[_0x21fe4c(0x29b)])[_0x21fe4c(0x213)][_0x21fe4c(0x285)]('@')[0x0],_0x2b2d0a=bcrypt[_0x21fe4c(0x2d4)](_0x385b36,saltRounds);_0x20a611={..._0x20a611,'bbPassword':_0x2b2d0a};}if(_0x3022af&&_0x20a611[_0x21fe4c(0x31d)]!=_0x21fe4c(0x2a6)&&_0x20a611[_0x21fe4c(0x31d)]!='***'&&_0x20a611[_0x21fe4c(0x31d)]!=''){const _0x5bc6ba=crypt['decrypt'](secure[_0x21fe4c(0x1e8)],_0x20a611[_0x21fe4c(0x31d)])[_0x21fe4c(0x213)][_0x21fe4c(0x285)]('@')[0x0];_0x20a611={..._0x20a611,'telegramToken':_0x5bc6ba};}const _0x11f07c=_0x20a611[_0x21fe4c(0x31d)]!=_0x21fe4c(0x2a6)&&_0x20a611['telegramToken']!=settings['telegramToken']||_0x20a611[_0x21fe4c(0x2ff)]!=settings[_0x21fe4c(0x2ff)],_0x151dc5=_0x20a611[_0x21fe4c(0x31d)]==''||_0x20a611[_0x21fe4c(0x2ff)]=='';if(_0x11f07c)_0x20a611['telegramEvents']=_0x21fe4c(0x2ba);for(const [_0x31e25c,_0x3af478]of Object[_0x21fe4c(0x32e)](_0x20a611)){if(_0x31e25c==_0x21fe4c(0x31d)&&_0x3af478==_0x21fe4c(0x2a6)){_0x20a611[_0x21fe4c(0x31d)]=settings[_0x21fe4c(0x31d)];continue;};if(_0x31e25c==_0x21fe4c(0x29b)&&_0x3af478==_0x21fe4c(0x2a6)){_0x20a611[_0x21fe4c(0x29b)]=settings['bbPassword'];continue;};dbSettings[_0x21fe4c(0x274)](_0x21fe4c(0x324)+_0x31e25c,_0x3af478)[_0x21fe4c(0x34b)]();}settings=_0x20a611,io['to'](_0x21fe4c(0x31f))[_0x21fe4c(0x1cf)]('settings',cleanSettings()),broadcastToBots(_0x21fe4c(0x1ad),settings[_0x21fe4c(0x1ad)]),broadcastToBots(_0x21fe4c(0x295),settings['onepagemode']);if(_0x11f07c&&!_0x151dc5)initTelegram();if(_0x11f07c&&_0x151dc5)disableTelegram();getAllClients()[_0x21fe4c(0x31b)](_0x17dcbb=>{const _0x396a27=_0x21fe4c;getSocket(_0x17dcbb['id'])[_0x396a27(0x1cf)](_0x396a27(0x216),{'access':{'allow':![],'reason':_0x396a27(0x1b9),'token':null}});});}function _0x6f70(_0x32515a,_0x137d2d){const _0x107475=_0x5d70();return _0x6f70=function(_0x560c22,_0x51b29d){_0x560c22=_0x560c22-0x18a;let _0x5d709c=_0x107475[_0x560c22];return _0x5d709c;},_0x6f70(_0x32515a,_0x137d2d);}function updateSetting(_0x3ed169,_0x450b4d){const _0x409cde=_0x4a7735;dbSettings[_0x409cde(0x274)](_0x409cde(0x324)+_0x3ed169,_0x450b4d)[_0x409cde(0x34b)](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0x5bb1b4){const _0x337659=_0x4a7735;dbSecure[_0x337659(0x226)]('secure')[_0x337659(0x25b)](_0x5bb1b4)[_0x337659(0x34b)](),secure=_0x5bb1b4;}function addBlacklist(_0x598997){const _0x1d1f95=_0x4a7735;cleanBlacklist();let _0xd202c8;devices[_0x598997][_0x1d1f95(0x193)]?_0xd202c8=Math[_0x1d1f95(0x1ed)](devices[_0x598997][_0x1d1f95(0x193)][_0x1d1f95(0x1f6)],loginExpiry):_0xd202c8=loginExpiry,dbSecure[_0x1d1f95(0x226)](_0x1d1f95(0x246))[_0x1d1f95(0x25b)]({'expiry':new Date()[_0x1d1f95(0x1ea)]()+_0xd202c8*0x3c*0x3e8,'token':devices[_0x598997][_0x1d1f95(0x2d8)][_0x1d1f95(0x34f)]})['write'](),blacklist=dbSecure[_0x1d1f95(0x226)](_0x1d1f95(0x246))['value']();}function cleanBlacklist(){const _0x5a9a4c=_0x4a7735;let _0x28d37f=dbSecure[_0x5a9a4c(0x226)]('blacklist')[_0x5a9a4c(0x219)]()['value'](),_0xfd55f6=new Date()[_0x5a9a4c(0x1ea)]();_0x28d37f[_0x5a9a4c(0x31b)](_0xa953fe=>{const _0x41fd52=_0x5a9a4c;_0xa953fe[_0x41fd52(0x1f6)]<_0xfd55f6&&dbSecure[_0x41fd52(0x226)](_0x41fd52(0x246))[_0x41fd52(0x2b9)]({'expiry':_0xa953fe[_0x41fd52(0x1f6)]})[_0x41fd52(0x34b)]();});}function initStates(){let _0x606d8b=getConfiguration();_0x606d8b['forEach'](_0x37bafa=>{const _0xd223df=_0x6f70;_0x37bafa['live']=_0xd223df(0x25c);}),storeConfiguration(_0x606d8b);}function onKeys(){const _0x55a53b=new RSA();return new Promise(_0x2bf4dc=>{const _0x4bdac1=_0x6f70;_0x55a53b['generateKeyPairAsync']()[_0x4bdac1(0x198)](_0x294085=>{_0x2bf4dc(_0x294085);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x49616d=_0x4a7735;let _0x36fe0f=getSettings(),_0x631836=![];!_0x36fe0f[_0x49616d(0x32f)](_0x49616d(0x2ae))&&(_0x36fe0f[_0x49616d(0x2ae)]=0x0,_0x631836=!![]);!_0x36fe0f[_0x49616d(0x32f)](_0x49616d(0x239))&&(_0x36fe0f[_0x49616d(0x239)]=0x0,_0x631836=!![]);!_0x36fe0f[_0x49616d(0x32f)](_0x49616d(0x190))&&(_0x36fe0f[_0x49616d(0x190)]='0.0.0',_0x631836=!![]);!_0x36fe0f[_0x49616d(0x32f)](_0x49616d(0x295))&&(_0x36fe0f[_0x49616d(0x295)]=![],_0x631836=!![]);if(_0x631836)storeSettings(_0x36fe0f);try{fs[_0x49616d(0x24f)](configbackuppath,{'withFileTypes':!![]})[_0x49616d(0x31b)](_0x589a7e=>{const _0x4aec5c=_0x49616d;if(!_0x589a7e['isDirectory']()){if(!_0x589a7e['name'][_0x4aec5c(0x205)]('backup-full@'))fs['unlinkSync'](configbackuppath+_0x589a7e[_0x4aec5c(0x18c)]);}else fs[_0x4aec5c(0x1ac)](configbackuppath+_0x589a7e[_0x4aec5c(0x18c)],{'recursive':!![]});});}catch(_0x143a7c){logger['debug']('Error\x20removing\x20old\x20backup\x20files:',_0x143a7c);}}function storeConfiguration(_0x61e5a3){const _0x585284=_0x4a7735;dbConfig['get'](_0x585284(0x1e9))[_0x585284(0x2b9)]()[_0x585284(0x34b)](),_0x61e5a3[_0x585284(0x31b)](_0xdc3b7=>{delete _0xdc3b7['mode'];}),dbConfig['get'](_0x585284(0x1e9))[_0x585284(0x25b)](..._0x61e5a3)['write'](),config=_0x61e5a3;}function resetPassword(){const _0x332049=_0x4a7735;tgBot&&settings[_0x332049(0x283)]&&(tgBot[_0x332049(0x1bc)]('callback_query'),tgBot['sendMessage'](settings[_0x332049(0x283)],_0x332049(0x2c7),{'parse_mode':_0x332049(0x328),'reply_markup':{'inline_keyboard':[[{'text':_0x332049(0x22f),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x332049(0x1bf)](_0x685873=>{telegramError(_0x685873);}),tgBot['on'](_0x332049(0x2ad),async _0x3f7d98=>{const _0x48aff2=_0x332049,_0x106d31=_0x3f7d98[_0x48aff2(0x282)],_0x360de4=_0x3f7d98[_0x48aff2(0x213)];tgBot[_0x48aff2(0x2d7)](_0x3f7d98['id'])[_0x48aff2(0x198)](async()=>{const _0x2f946a=_0x48aff2;if(_0x106d31!='no'){const _0x17bd28=0xf,_0x2c01c0=_0x2f946a(0x300),_0x3bca51=Array[_0x2f946a(0x2b6)](crypto[_0x2f946a(0x353)](new Uint32Array(_0x17bd28)))[_0x2f946a(0x341)](_0x3bd230=>_0x2c01c0[_0x3bd230%_0x2c01c0[_0x2f946a(0x296)]])['join'](''),_0x340c5e=bcrypt[_0x2f946a(0x2d4)](_0x3bca51,saltRounds);storeSettings({'bbPassword':_0x340c5e}),await tgBot[_0x2f946a(0x25f)](_0x360de4[_0x2f946a(0x19f)]['id'],_0x2f946a(0x35b)+_0x3bca51,{'parse_mode':_0x2f946a(0x328)})[_0x2f946a(0x1bf)](_0x468088=>{telegramError(_0x468088);});}else await tgBot[_0x2f946a(0x25f)](_0x360de4[_0x2f946a(0x19f)]['id'],_0x2f946a(0x312))[_0x2f946a(0x1bf)](_0x3aed28=>{telegramError(_0x3aed28);});}),tgBot['removeListener'](_0x48aff2(0x2ad));}));}async function confirmRestore(_0x509d03,_0x394aa0){const _0x3e0d23=_0x4a7735;io['to'](_0x3e0d23(0x31f))[_0x3e0d23(0x1cf)](_0x3e0d23(0x1aa),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x3e0d23(0x277)),tgBot&&settings['telegramChatId']&&(tgBot[_0x3e0d23(0x1bc)]('callback_query'),await tgBot[_0x3e0d23(0x25f)](settings[_0x3e0d23(0x283)],_0x3e0d23(0x243),{'parse_mode':_0x3e0d23(0x328),'reply_markup':{'inline_keyboard':[[{'text':_0x3e0d23(0x22f),'callback_data':_0x3e0d23(0x22f)},{'text':'no','callback_data':'no'}]]}})[_0x3e0d23(0x1bf)](_0x4576c2=>{telegramError(_0x4576c2);}),tgBot['on'](_0x3e0d23(0x2ad),async _0x4e5d6c=>{const _0x1bc4a1=_0x3e0d23,_0x23da03=_0x4e5d6c[_0x1bc4a1(0x282)],_0x892b01=_0x4e5d6c[_0x1bc4a1(0x213)];tgBot['answerCallbackQuery'](_0x4e5d6c['id'])['then'](async()=>{const _0x1ba6c2=_0x1bc4a1;_0x23da03==_0x1ba6c2(0x22f)?(await tgBot[_0x1ba6c2(0x25f)](_0x892b01['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x1ba6c2(0x328)})['catch'](_0x4d49fd=>{telegramError(_0x4d49fd);}),unzipFile(_0x509d03,_0x394aa0)):(logger[_0x1ba6c2(0x234)](_0x1ba6c2(0x342)),await tgBot[_0x1ba6c2(0x25f)](_0x892b01['chat']['id'],_0x1ba6c2(0x342))[_0x1ba6c2(0x1bf)](_0x18a56b=>{telegramError(_0x18a56b);}));}),tgBot[_0x1bc4a1(0x1bc)](_0x1bc4a1(0x2ad));}));}function getServerTime(){const _0x1d4ada=_0x4a7735,_0x1754d8=new Date();return _0x1754d8[_0x1d4ada(0x1c8)]()+'/'+(_0x1754d8[_0x1d4ada(0x2f7)]()+0x1)[_0x1d4ada(0x2f4)]()[_0x1d4ada(0x2a0)](0x2,'0')+'/'+_0x1754d8[_0x1d4ada(0x1fc)]()[_0x1d4ada(0x2f4)]()['padStart'](0x2,'0')+'\x20'+_0x1754d8[_0x1d4ada(0x231)]()['toString']()[_0x1d4ada(0x2a0)](0x2,'0')+':'+_0x1754d8[_0x1d4ada(0x1d7)]()['toString']()['padStart'](0x2,'0')+':'+_0x1754d8[_0x1d4ada(0x35f)]()[_0x1d4ada(0x2f4)]()[_0x1d4ada(0x2a0)](0x2,'0');}function getTimeStamp(){const _0x56e33d=_0x4a7735,_0x570f66=shiftedTime();return _0x570f66[_0x56e33d(0x1c8)]()+'/'+(_0x570f66[_0x56e33d(0x2f7)]()+0x1)['toString']()[_0x56e33d(0x2a0)](0x2,'0')+'/'+_0x570f66[_0x56e33d(0x1fc)]()[_0x56e33d(0x2f4)]()[_0x56e33d(0x2a0)](0x2,'0')+'\x20'+_0x570f66['getHours']()[_0x56e33d(0x2f4)]()['padStart'](0x2,'0')+':'+_0x570f66[_0x56e33d(0x1d7)]()[_0x56e33d(0x2f4)]()['padStart'](0x2,'0')+':'+_0x570f66[_0x56e33d(0x35f)]()['toString']()[_0x56e33d(0x2a0)](0x2,'0');}function getCleanTimeStamp(){const _0x46eeb0=_0x4a7735,_0x450f0f=shiftedTime();return _0x450f0f[_0x46eeb0(0x1c8)]()+(_0x450f0f[_0x46eeb0(0x2f7)]()+0x1)[_0x46eeb0(0x2f4)]()['padStart'](0x2,'0')+_0x450f0f[_0x46eeb0(0x1fc)]()[_0x46eeb0(0x2f4)]()[_0x46eeb0(0x2a0)](0x2,'0')+'-'+_0x450f0f[_0x46eeb0(0x231)]()[_0x46eeb0(0x2f4)]()[_0x46eeb0(0x2a0)](0x2,'0')+_0x450f0f[_0x46eeb0(0x1d7)]()[_0x46eeb0(0x2f4)]()[_0x46eeb0(0x2a0)](0x2,'0')+_0x450f0f[_0x46eeb0(0x35f)]()[_0x46eeb0(0x2f4)]()[_0x46eeb0(0x2a0)](0x2,'0');}function shiftedTime(){const _0x8206cc=_0x4a7735,_0x32688c=new Date();let _0x392ee5=_0x32688c;if(settings[_0x8206cc(0x1ad)]&&settings[_0x8206cc(0x1ad)]!==0x0)_0x392ee5=fns[_0x8206cc(0x2a4)](_0x32688c,{'hours':settings[_0x8206cc(0x1ad)]});return _0x392ee5;}function startScheduler(){const _0xd02427=_0x4a7735,_0x42c7e4=new Date()[_0xd02427(0x29c)](),_0x4e91e7=shiftedTime()[_0xd02427(0x231)]();_0x4e91e7==0x4&&backupConfigFiles();_0x4e91e7==0x0&&rotateLogFiles();_0x42c7e4%0x6==0x0&&triggerAnalytics();_0x42c7e4%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x1e2f50){const _0x50d23d=_0x4a7735;logger[_0x50d23d(0x234)]('Restore\x20backup\x20file\x20'+_0x1e2f50);const _0x34ef2a=getBotsWithMode();_0x34ef2a[_0x50d23d(0x296)]>0x0?confirmRestore(configbackuppath,_0x1e2f50):unzipFile(configbackuppath,_0x1e2f50);}async function getBackupFiles(_0x29bb37=null){const _0x1efe48=_0x4a7735;let _0xbd2945=[],_0x32d103=fs[_0x1efe48(0x24f)](configbackuppath,{'withFileTypes':!![]});_0x32d103[_0x1efe48(0x2c4)]((_0x15edf3,_0x2f88d1)=>_0x15edf3['name']<_0x2f88d1[_0x1efe48(0x18c)]?0x1:_0x2f88d1[_0x1efe48(0x18c)]<_0x15edf3[_0x1efe48(0x18c)]?-0x1:0x0),_0x32d103['forEach'](_0x224345=>{const _0x4b3472=_0x1efe48;if(!_0x224345[_0x4b3472(0x2f2)]()&&_0x224345[_0x4b3472(0x18c)][_0x4b3472(0x205)](_0x4b3472(0x23d))&&_0x224345[_0x4b3472(0x18c)][_0x4b3472(0x1d6)](_0x4b3472(0x306))){const _0x1520d7=formatDate(fs[_0x4b3472(0x238)](configbackuppath+_0x224345['name'])['mtime']);_0xbd2945[_0x4b3472(0x25b)]({'name':_0x224345['name'],'mtime':_0x1520d7});}});if(_0x29bb37)io['to'](_0x29bb37)[_0x1efe48(0x1cf)](_0x1efe48(0x2cb),_0xbd2945);else return _0xbd2945;}async function backupConfigFiles(){const _0x58742b=_0x4a7735;await zipFiles(_0x58742b(0x2f5));const _0x132166=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x58742b(0x22a),configbackuppath+('backup-full@'+_0x132166+_0x58742b(0x306)));let _0x2b8481=fs[_0x58742b(0x24f)](configbackuppath,{'withFileTypes':!![]});_0x2b8481[_0x58742b(0x2c4)]((_0x1c1028,_0xc2e206)=>_0x1c1028['name']<_0xc2e206[_0x58742b(0x18c)]?0x1:_0xc2e206[_0x58742b(0x18c)]<_0x1c1028[_0x58742b(0x18c)]?-0x1:0x0),_0x2b8481[_0x58742b(0x296)]>maxBackups&&fs[_0x58742b(0x242)](configbackuppath+_0x2b8481[_0x2b8481['length']-0x1][_0x58742b(0x18c)]);}function rotateLogFiles(){const _0x38b38a=_0x4a7735,_0x219c2e=fs[_0x38b38a(0x238)](logspath+_0x38b38a(0x264)),_0x507bd8=_0x219c2e['size']/0x400;if(_0x507bd8>0x64){let _0x1608f0=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x1608f0[_0x38b38a(0x2c4)]((_0x43864c,_0x8ad315)=>_0x43864c[_0x38b38a(0x18c)]<_0x8ad315[_0x38b38a(0x18c)]?0x1:_0x8ad315['name']<_0x43864c[_0x38b38a(0x18c)]?-0x1:0x0),_0x1608f0['forEach'](_0x5b9b25=>{const _0xe2eb45=_0x38b38a;if(_0x5b9b25[_0xe2eb45(0x18c)]==_0xe2eb45(0x272))fs[_0xe2eb45(0x1fa)](logspath+_0x5b9b25['name'],logspath+_0xe2eb45(0x318));if(_0x5b9b25['name']==_0xe2eb45(0x20b))fs[_0xe2eb45(0x1fa)](logspath+_0x5b9b25['name'],logspath+_0xe2eb45(0x272));_0x5b9b25['name']=='output-000.log'&&(fs[_0xe2eb45(0x1fa)](logspath+_0x5b9b25['name'],logspath+_0xe2eb45(0x20b)),fs['writeFileSync'](logspath+_0x5b9b25['name'],''));});}}async function zipFiles(_0x24fa40){const _0x8e2294=_0x4a7735;let _0x4db3f9;if(_0x24fa40==_0x8e2294(0x1f7))_0x4db3f9=logspath;if(_0x24fa40==_0x8e2294(0x28b))_0x4db3f9=configpath;if(_0x24fa40=='backup-full')_0x4db3f9=configpath;let _0x61e587=fs[_0x8e2294(0x24f)](_0x4db3f9,{'withFileTypes':!![]});const _0x1a2ec4=new require(_0x8e2294(0x1eb))();_0x61e587[_0x8e2294(0x31b)](_0x36bd73=>{const _0x32363e=_0x8e2294;if(!_0x36bd73[_0x32363e(0x2f2)]()){let _0x181096=fs[_0x32363e(0x20f)](_0x4db3f9+_0x36bd73[_0x32363e(0x18c)]);if(_0x24fa40==_0x32363e(0x28b)){const _0x1e0660=/^bot-[0-9]{3}-config.json$/,_0x3551cc=_0x1e0660[_0x32363e(0x1d2)](_0x36bd73['name']);if(_0x3551cc){const _0x36ad4b=JSON[_0x32363e(0x1b7)](_0x181096);if(_0x36ad4b[_0x32363e(0x1c3)][0x0]){_0x36ad4b[_0x32363e(0x1c3)][0x0][_0x32363e(0x289)]=_0x32363e(0x249),_0x36ad4b[_0x32363e(0x1c3)][0x0]['apiSecret']=_0x32363e(0x249);if(_0x36ad4b[_0x32363e(0x1c3)][0x0][_0x32363e(0x1f9)])_0x36ad4b[_0x32363e(0x1c3)][0x0][_0x32363e(0x1f9)]=_0x32363e(0x249);}_0x181096=JSON[_0x32363e(0x1a3)](_0x36ad4b,null,0x2);}if(_0x36bd73[_0x32363e(0x18c)]==_0x32363e(0x284)){const _0x83d569=JSON[_0x32363e(0x1b7)](_0x181096);if(_0x83d569[_0x32363e(0x19c)][_0x32363e(0x26d)])_0x83d569[_0x32363e(0x19c)][_0x32363e(0x26d)]=![];if(_0x83d569[_0x32363e(0x19c)][_0x32363e(0x29b)])_0x83d569[_0x32363e(0x19c)][_0x32363e(0x29b)]=_0x32363e(0x249);if(_0x83d569[_0x32363e(0x19c)]['telegramToken'])_0x83d569['settings']['telegramToken']=_0x32363e(0x249);if(_0x83d569[_0x32363e(0x19c)][_0x32363e(0x283)])_0x83d569['settings'][_0x32363e(0x283)]=null;_0x181096=JSON[_0x32363e(0x1a3)](_0x83d569,null,0x2);}if(_0x36bd73[_0x32363e(0x18c)]!=_0x32363e(0x211))_0x1a2ec4['file'](_0x36bd73[_0x32363e(0x18c)],_0x181096);}else _0x1a2ec4[_0x32363e(0x2b2)](_0x36bd73[_0x32363e(0x18c)],_0x181096);}});const _0xaab550=_0x1a2ec4[_0x8e2294(0x2ee)]({'base64':![],'compression':'DEFLATE'});fs['writeFileSync'](zippath+(_0x24fa40+_0x8e2294(0x306)),_0xaab550,_0x8e2294(0x304));}async function unzipFile(_0x30b1ec,_0x4ad6fa){const _0x10e712=_0x4a7735;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x10e712(0x31b)](_0x2cc877=>{const _0x5d8c17=_0x10e712;if(!_0x2cc877['isDirectory']())fs[_0x5d8c17(0x1ac)](configpath+_0x2cc877['name']);});const _0x533bf7=fs[_0x10e712(0x20f)](_0x30b1ec+_0x4ad6fa,'binary'),_0x596e14=new require(_0x10e712(0x1eb))(_0x533bf7,{'base64':![],'checkCRC32':!![]});Object[_0x10e712(0x30c)](_0x596e14['files'])[_0x10e712(0x31b)](_0x5352a1=>{const _0x3f265b=_0x10e712,_0x128341=_0x596e14[_0x3f265b(0x20d)][_0x5352a1];fs['writeFileSync'](configpath+_0x128341[_0x3f265b(0x18c)],_0x128341[_0x3f265b(0x1d4)]);}),fs[_0x10e712(0x24f)](temppath,{'withFileTypes':!![]})['forEach'](_0x346cc5=>{const _0x17006e=_0x10e712;if(!_0x346cc5[_0x17006e(0x2f2)]())fs[_0x17006e(0x1ac)](temppath+_0x346cc5[_0x17006e(0x18c)]);}),logger['debug'](_0x10e712(0x2d0)),process[_0x10e712(0x22b)]({'restore':!![]},_0x1a1ae7=>{});}async function getPublicIp(){const _0x495dfc=_0x4a7735;try{const _0x31dfac=await axios[_0x495dfc(0x226)](_0x495dfc(0x23f));publicip=_0x31dfac[_0x495dfc(0x282)]['ip'];}catch(_0x1e650f){}}async function triggerAnalytics(){const _0x57ed83=_0x4a7735;if(!publicip)await getPublicIp();const _0x129c07=getBotsWithMode();let _0x22c898=0x0;_0x129c07[_0x57ed83(0x31b)](_0x595e75=>{const _0xf9f6d=_0x57ed83;if(_0x595e75['status']===_0xf9f6d(0x332))_0x22c898++;});const _0x5177d1=getBotExchanges();mixpanel[_0x57ed83(0x25d)](_0x57ed83(0x30a),{'distinct_id':settings[_0x57ed83(0x2d1)],'ip':publicip,'version':serverversion,'numbots':_0x129c07['length'],'numbotsenabled':_0x22c898,'exchanges':_0x5177d1,'environment':environment});}async function getMessages(){const _0x4d775e=_0x4a7735,_0x36bee8=_0x4d775e(0x1ff),_0x147fcd=new GraphQLClient(_0x36bee8),_0x2bb5b4={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x203bf5=serverversion[_0x4d775e(0x285)]('.'),_0x1e5fe5=_0x203bf5[0x0]+'.'+_0x203bf5[0x1],_0x303b64=Math[_0x4d775e(0x1e7)](settings[_0x4d775e(0x2ae)],settings[_0x4d775e(0x239)]),_0x1b030c={'last':parseInt(_0x303b64),'bbm':_0x1e5fe5},_0x312d79=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x7f637a;try{_0x7f637a=await _0x147fcd[_0x4d775e(0x311)](_0x312d79,_0x1b030c,_0x2bb5b4);}catch(_0x53740c){}if(_0x7f637a&&_0x7f637a[_0x4d775e(0x340)]){let _0x4e8b35=settings['lastmsgtelegram'];newMessages=[];for(const _0x2935a8 of _0x7f637a[_0x4d775e(0x340)]){newMessages[_0x4d775e(0x25b)](_0x2935a8);let _0x445da5=![];_0x2935a8[_0x4d775e(0x30b)]&&(updateSetting(_0x4d775e(0x190),_0x2935a8[_0x4d775e(0x30b)]),_0x445da5=isNewerVersion(serverversion,_0x2935a8['bbvNew'])||serverversion==_0x2935a8[_0x4d775e(0x30b)]);if(!_0x445da5&&_0x2935a8[_0x4d775e(0x1a7)]>_0x4e8b35){if(_0x2935a8['bbvReceive']===_0x4d775e(0x2bd)||serverversion[_0x4d775e(0x205)](_0x2935a8[_0x4d775e(0x245)])){let _0x25de7=''+_0x2935a8[_0x4d775e(0x268)]+'\x0a\x0a'+_0x2935a8[_0x4d775e(0x213)];const _0x377d20=await sendTelegramMsg(toTelegramMarkdown(_0x25de7),_0x4d775e(0x202));if(_0x377d20)_0x4e8b35=_0x2935a8[_0x4d775e(0x1a7)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0x4e8b35),emitMessages();}}function emitMessages(){const _0x5467c5=_0x4a7735,_0x46efaf=settings['lastmsgemitted'];let _0x10b447=[];newMessages[_0x5467c5(0x31b)](_0x186e52=>{const _0x4970c2=_0x5467c5;_0x186e52[_0x4970c2(0x1a7)]>_0x46efaf&&_0x10b447[_0x4970c2(0x25b)](_0x186e52);}),_0x10b447[_0x5467c5(0x296)]>0x0&&getAllClients()[_0x5467c5(0x31b)](_0x1375f1=>{const _0x67ffd0=_0x5467c5;getSocket(_0x1375f1['id'])['emit'](_0x67ffd0(0x213),_0x10b447);});}function confirmMessage(_0x3783b1){const _0x2d67b8=_0x4a7735;updateSetting(_0x2d67b8(0x239),Number(_0x3783b1));}function _0x5d70(){const _0x4f64f6=['format','endsWith','getMinutes','referer','use','static','isValid','Ok,\x20will\x20send\x20alert\x20notifications\x20only','new','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','mode','\x20|\x20','temp/','decrypt','range','toIPv4Address','username','2566490NrnusK','min','privateKey','bots','getTime','node-zip','manual','max','Allow\x20login\x20from\x20IP\x20address\x20<b>','cancel-loading','secret','confirm-message','defaults','args','order','updatebotmanager','expiry','logs','live','apiPassword','copyFileSync','placeOrder','getDate','0.0.0','store-settings','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','RSA-OAEP','/status\x20-\x20show\x20bot(s)\x20status\x0a','Markdown','Starting\x20Balance\x20Bot\x20update','Yes','startsWith','staging','telegramEnabled','2FA\x20login\x20required','Token\x20blacklisted','reset-history','output-001.log','express','files','build','readFileSync','invalid\x20credentials','bb-secure.json','host','message','connected','cancelLoading','status','allow','-config.json','cloneDeep','backupfile','warning','accept','-performance.json','started','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','/update\x20-\x20update\x20Balance\x20Bot\x0a','Restarting\x20Bot\x20','login\x20required','hybrid-crypto-js','1740392jNXCZw','586013fPUWcQ','get','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','pidRefreshToken','disabled','backup-full.zip','send','connection','toggle-bot-mode','socket','yes','Unauthorized\x20attempt\x20to\x20log\x20out','getHours','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','botname','debug','2737950bVlqtG','Unauthorized\x20attempt\x20to\x20update\x20settings','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','statSync','lastmsgemitted','(((.+)+)+)+$','Starting\x20#RED#Balance\x20Bot\x20v','\x20>\x20','backup-full@','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','https://api.ipify.org?format=json','-events.json','stop','unlinkSync','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','lowdb/adapters/FileSync','bbvReceive','blacklist','All','config/','***','404\x20Not\x20Found','\x1b[0m','storeConfiguration','/download/:type','replace','readdirSync','bot-','-results.json','\x1b[36m','temporary\x20token\x20generated','version.json','Bot\x20Mgr\x20>\x20','f2aRequired','/:bot/configuration','Unauthorized\x20attempt\x20to\x20confirm\x20message','new-disabled','listen','push','stopped','track','temporary\x20access\x20not\x20allowed','sendMessage','removeAllListeners','sign','32ZQnqax','lowdb','output-000.log','2FA','slice','Logged\x20in\x20user\x20...','title','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','password','NTBA_FIX_319','createWriteStream','loginRequired','pidExpireLogin','telegramEvents','exchange','auto','output-002.log','<b>Telegram\x20Bot\x20Status:</b>\x0a','set','clients','tkn','success','store-fiat','private','sortBy','mixpanel','constructor','\x20only\x0a','full','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','telegram2FaApproval','Notifications\x20disabled\x0a','data','telegramChatId','bb-settings.json','split','update-bot','find','login\x20not\x20required','apiKey','Unauthorized\x20attempt\x20to\x20show\x20configuration','backup','sendPortfolioTelegram','exp','Bot\x20','Invalid\x20IP\x20address','(staging)','Unauthorized\x20attempt\x20to\x20download\x20','/names\x20-\x20show\x20bot\x20names\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','uuid','onepagemode','length','/enable\x20-\x20enable\x20notifications\x0a','function','jsonwebtoken','30\x20min','bbPassword','getUTCHours','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','No\x20authentication\x20token','padStart','delete-bot','All\x20bots','assign','add','disconnect','************','inherit','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','login\x20token\x20generated','crypto','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','callback_query','lastmsgtelegram','Starting\x20Balance\x20Bot\x20reinstallation','Deleted\x20Bot\x20','remoteAddress','file','uuid-random','Invalid\x20Telegram\x20token','filter','from','fork','Notifications\x20enabled\x0a','remove','all','Orders','bbUsername','any','Unauthorized\x20attempt\x20to\x20get\x20messages','SIGINT','clientip','secure','join','mkdirSync','sort','value','handshake','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','existsSync','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','get-messages','backup-files','axios','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','match','\x1b[31m','Backup\x20file\x20unzipped\x20and\x20stored','userid','Your\x20installation\x20is\x20already\x20up\x20to\x20date','build2','hashSync','\x20|\x20client:\x20...','/on\x20-\x20start\x20bot(s)\x0a','answerCallbackQuery','access','whitelist','Unauthorized\x20attempt\x20to\x20update\x20bot','Invalid\x20authentication\x20token\x20(2)','login','uncaughtException','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/:bot/portfolio','IPv4','timestamp','Idling\x20bot\x20\x20\x20|\x20Bot\x20','Login\x20rejected','show','91nTJODS','sha256','stopPolling',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','simple','temporaryAccessAllowed','restart','/restart\x20-\x20restart\x20bot(s)\x0a','generate','production','string','node-telegram-bot-api','isDirectory','internal','toString','backup-full','[ip-address]','getMonth','conn','/:bot/performance','/disable\x20-\x20disable\x20notifications\x0a','Notifications\x20enabled','telegram','\x20to\x20','verify','telegramUsername','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','#RES#\x20if\x20running\x20locally\x0a','place-order',',\x20must\x20be\x20a\x204\x20digit\x20number','binary','#RES#\x20if\x20running\x20on\x20server','.zip','Unauthorized\x20attempt\x20to\x20add\x20bot','::ffff:127.0.0.1','$1_$2_$3','Server','bbvNew','keys','index.html','onText','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','path','request','Password\x20reset\x20rejected','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20get\x20portfolio','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','<b>Balance\x20Bot\x20Status:</b>\x0a','output-003.log','auth','Failed\x20to\x20download\x20','forEach','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','telegramToken','2FA\x20login\x20token\x20generated','botmanager','createServer','writeFileSync','store-configuration','Unauthorized\x20attempt\x20to\x20store\x20configuration','settings.','temporary\x20access\x20timeout','reject','restore-backup-file','HTML','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','reinstall','272106BrmfPe','alias','/help\x20-\x20show\x20available\x20commands\x0a','entries','hasOwnProperty','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','get-logs','enabled','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','sendFile','post','port','User\x20has\x20been\x20validated','SIGTERM','1598985QzudFA','log','express-fileupload','No\x20bots\x20running\x20right\x20now','hex','sendMetricsTelegram','argv','messages','map','Restore\x20process\x20aborted','reinstall-bb','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Login\x20accepted','polling_error','Logged\x20out\x20user\x20...','botID','once','*$1*','write','getPortfolio','Notifications\x20types:\x20','store','token','kill','#RES#\x20','Starting\x20bot\x20|\x20Bot\x20','randomFillSync','environment','whitelistEnabled','Invalid\x20authentication\x20token\x20(1)','node','/upload-backup','/:bot','emitHistory','Password\x20has\x20been\x20reset\x20to:\x20','headless','publicKey','logout','getSeconds','127.0.0.1','\x20(1)','/:bot/support','15\x20min','name','type','ipaddr.js','/metrics\x20-\x20show\x20bot\x20performance\x0a','latestversion','includes','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','telegramIpApproval','login\x20token\x20valid','socket.io','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','logs/','then','family','compareSync','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','settings','get-portfolio','Session\x20expired\x20for\x20user\x20...','chat','show-config','running','address','stringify','Backup\x20file\x20uploaded','635036rgqjfC','date-fns','number','\x20|\x20user:\x20...','alerts','notification','getStartingBalances','rmSync','timeshift','add-bot','get-starting-balances','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Crypt','Unauthorized\x20attempt\x20to\x20get\x20events','Invalid\x20username\x20or\x20IP\x20address','6yjNDjP','Error:\x20Invalid\x20argument\x20','-----------------------------------------------------------------------------------','parse','update-bb','reload','delete-alerts','reason','removeListener','http','exit','catch','orders','version','bb-config.json','bot','3000','\x20mode','deleteHistoryAlerts','api-eu.mixpanel.com','getFullYear','Alerts','headers','update','toIPv4MappedAddress','2FA\x20required','search','emit',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','yargs/yargs','test','exec','_data'];_0x5d70=function(){return _0x4f64f6;};return _0x5d70();}function isNewerVersion(_0x105238,_0x454bec){const _0x23c1b1=_0x4a7735,_0x31d8f3=_0x454bec[_0x23c1b1(0x285)]('.'),_0x471782=_0x105238['split']('.');for(var _0x27b188=0x0;_0x27b188<_0x471782[_0x23c1b1(0x296)];_0x27b188++){const _0x5c0b28=~~_0x471782[_0x27b188],_0xd72867=~~_0x31d8f3[_0x27b188];if(_0x5c0b28>_0xd72867)return!![];if(_0x5c0b28<_0xd72867)return![];}return![];}function toTelegramMarkdown(_0x34c94b){const _0x4612b3=_0x4a7735,_0x44e5c4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4036d0=/\*{2}(.+?)\*{2}/gim;return _0x34c94b=_0x34c94b[_0x4612b3(0x24e)](_0x44e5c4,_0x4612b3(0x309))[_0x4612b3(0x24e)](_0x4036d0,_0x4612b3(0x34a)),_0x34c94b;}async function validateConfigFile(){const _0x5beb4f=_0x4a7735,_0x46f467=dbConfig[_0x5beb4f(0x226)](_0x5beb4f(0x1e9))['sortBy'](_0x5beb4f(0x348))[_0x5beb4f(0x2c5)]()||[];if(_0x46f467[_0x5beb4f(0x296)]==0x0){let _0x3027f9=0x0,_0x5d5e0d=[];const _0x540d3d=/^bot-([0-9]{3})-config.json$/,_0x239541=fs[_0x5beb4f(0x24f)](configpath);_0x239541[_0x5beb4f(0x31b)](_0x3e8253=>{const _0x420dc7=_0x5beb4f,_0xdd4521=_0x540d3d[_0x420dc7(0x1d3)](_0x3e8253);if(_0xdd4521){const _0x1c62e3=_0xdd4521[0x1];let _0x2ba0cb=getBotAttributes(_0x1c62e3);_0x5d5e0d[_0x420dc7(0x25b)]({'botID':_0x1c62e3,'botname':_0x2ba0cb['botname'],'status':_0x420dc7(0x229),'live':'stopped'}),_0x3027f9++;}}),_0x3027f9!=0x0&&(dbConfig[_0x5beb4f(0x226)](_0x5beb4f(0x1e9))[_0x5beb4f(0x2a3)](_0x5d5e0d)[_0x5beb4f(0x34b)](),config=_0x5d5e0d,restoredConfigFile=_0x3027f9);}}async function restoreConfigNotify(_0x2511aa){const _0x50fdb4=_0x4a7735;let _0x3cfa6c;if(restoredConfigFile==0x1)_0x3cfa6c=_0x50fdb4(0x344);else _0x3cfa6c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x2511aa)io['to'](_0x50fdb4(0x31f))[_0x50fdb4(0x1cf)](_0x50fdb4(0x1aa),_0x3cfa6c);else{logger['simple'](_0x50fdb4(0x1b6)),logger[_0x50fdb4(0x2ea)](_0x3cfa6c),logger[_0x50fdb4(0x2ea)](_0x50fdb4(0x1b6)),logger[_0x50fdb4(0x2ea)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x50fdb4(0x26f)]!=_0x50fdb4(0x1c0))tgBot['sendMessage'](settings[_0x50fdb4(0x283)],_0x50fdb4(0x255)+_0x3cfa6c)[_0x50fdb4(0x1bf)](_0x5de4ed=>{telegramError(_0x5de4ed);});}}function validateCredentials(_0x4106e7,_0x37cdfb){const _0x456ed9=_0x4a7735;if(_0x4106e7[_0x456ed9(0x1e5)]==settings[_0x456ed9(0x2bc)]&&bcrypt[_0x456ed9(0x19a)](_0x4106e7[_0x456ed9(0x26a)],settings[_0x456ed9(0x29b)])){if(settings[_0x456ed9(0x256)])return{'allow':![],'reason':_0x456ed9(0x208),'token':null};else{const _0x53bff7=generateLoginToken(_0x37cdfb);return{'allow':!![],'reason':_0x456ed9(0x2aa),'token':_0x53bff7};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x258b20){const _0x4c45ae=_0x4a7735,_0x66a00a=generateLoginToken(_0x258b20);return{'allow':!![],'reason':_0x4c45ae(0x2aa),'token':_0x66a00a};}function validateAccess(_0x590862,_0x2c7d98,_0x452482){const _0x57bfa3=_0x4a7735,_0x30e83e=_0x452482?_0x452482:devices[_0x2c7d98]['ip'];let _0x3833df;const _0x3ddab3=_0x1c9a9e=>{const _0x5c4c1f=_0x6f70;if(settings[_0x5c4c1f(0x26d)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2c7d98)){const _0x722bec=generateLoginToken(_0x2c7d98);return{'allow':!![],'reason':_0x5c4c1f(0x31e),'token':_0x722bec};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3833df=validToken(_0x1c9a9e,_0x2c7d98),_0x3833df[_0x5c4c1f(0x32f)](_0x5c4c1f(0x277))?{'allow':!![],'reason':_0x5c4c1f(0x194),'token':_0x1c9a9e}:{'allow':![],'reason':_0x5c4c1f(0x222),'token':null};}else return{'allow':!![],'reason':_0x5c4c1f(0x288),'token':null};};if(settings[_0x57bfa3(0x355)]){let _0x214727=[...settings[_0x57bfa3(0x2d9)],'::1',_0x57bfa3(0x308),_0x57bfa3(0x360)];if(_0x214727[_0x57bfa3(0x191)](_0x30e83e))return _0x3ddab3(_0x590862);else{_0x3833df=validToken(_0x590862,_0x2c7d98);if(_0x3833df['hasOwnProperty']('success'))return _0x3ddab3(_0x590862);else{if(telegramIpApproved(_0x2c7d98)){const _0x4bc4eb=generateToken(_0x2c7d98);return _0x3833df=_0x3ddab3(_0x590862),_0x3833df[_0x57bfa3(0x217)]?{'allow':!![],'reason':_0x57bfa3(0x253),'token':_0x4bc4eb}:_0x3833df;}else return settings[_0x57bfa3(0x2eb)]?{'allow':![],'reason':_0x57bfa3(0x1cd),'token':null}:{'allow':![],'reason':_0x57bfa3(0x25e),'token':null};}}}else return _0x3ddab3(_0x590862);}function timelyDecrypt(_0x17d697,_0x15c0cd=!![]){const _0x11ac80=_0x4a7735;if(_0x17d697)try{const _0xb4e05f=crypt[_0x11ac80(0x1e2)](secure[_0x11ac80(0x1e8)],_0x17d697)[_0x11ac80(0x213)],_0x7bb4a1=_0xb4e05f[_0x11ac80(0x285)]('@')[0x0],_0x5439dc=_0xb4e05f[_0x11ac80(0x285)]('@')[0x1],_0x2da9c9=new Date()['getTime']();if(_0x15c0cd){if(_0x2da9c9-_0x5439dc<maxSecretAge*0x3e8)return _0x7bb4a1;else return![];}else return _0x7bb4a1;}catch(_0x3e4d85){return![];}else return![];}const validToken=(_0x287d45,_0x2a9061)=>{const _0x3a4930=_0x4a7735,_0x4bfb13=devices[_0x2a9061]['ip'];if(!_0x287d45)return{'error':_0x3a4930(0x29f)};for(let _0x5387bb of blacklist){if(_0x5387bb['token']==_0x287d45)return{'error':_0x3a4930(0x209)};}let _0x15b852;try{_0x15b852=jwt[_0x3a4930(0x2fe)](_0x287d45,secure['secret']+_0x2a9061);}catch{return{'error':_0x3a4930(0x356)};}if(!_0x15b852['hasOwnProperty']('clientip')&&!_0x15b852[_0x3a4930(0x32f)](_0x3a4930(0x1e5))||!_0x15b852['hasOwnProperty'](_0x3a4930(0x28d)))return{'error':_0x3a4930(0x2db)};if(!_0x15b852[_0x3a4930(0x32f)](_0x3a4930(0x1e5))&&_0x15b852['hasOwnProperty'](_0x3a4930(0x2c0))){const {clientip:_0x372711}=_0x15b852;return _0x4bfb13==_0x372711?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3a4930(0x28f)};}else{if(_0x15b852['hasOwnProperty'](_0x3a4930(0x1e5))&&_0x15b852[_0x3a4930(0x32f)](_0x3a4930(0x2c0))){const {username:_0x1fc41b,clientip:_0x5259fa}=_0x15b852;return settings[_0x3a4930(0x2bc)]==_0x1fc41b&&_0x4bfb13==_0x5259fa?{'success':_0x3a4930(0x337)}:{'error':_0x3a4930(0x1b3)};}}},generateLoginToken=_0x58efdc=>{const _0x417922=_0x4a7735;if(_0x58efdc){const _0x48b143=devices[_0x58efdc]['ip'];return jwt[_0x417922(0x261)]({'username':settings[_0x417922(0x2bc)],'clientip':_0x48b143},secure[_0x417922(0x1f0)]+_0x58efdc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2a4439=>{const _0x272750=_0x4a7735;if(_0x2a4439){const _0x1a5b37=devices[_0x2a4439]['ip'];return jwt[_0x272750(0x261)]({'clientip':_0x1a5b37},secure[_0x272750(0x1f0)]+_0x2a4439,{'expiresIn':devices[_0x2a4439][_0x272750(0x193)][_0x272750(0x1f6)]*0x3c});}else return![];},telegramIpApproved=_0x586ab2=>{const _0x38868d=_0x4a7735;let _0x26c5b9=![];return devices[_0x586ab2][_0x38868d(0x193)]&&devices[_0x586ab2][_0x38868d(0x193)]['expiry']!=_0x38868d(0x326)&&(_0x26c5b9=devices[_0x586ab2]['telegramIpApproval'][_0x38868d(0x2c0)]==devices[_0x586ab2]['ip']&&new Date()[_0x38868d(0x1ea)]()-devices[_0x586ab2][_0x38868d(0x193)][_0x38868d(0x2e1)]<devices[_0x586ab2][_0x38868d(0x193)]['expiry']*0x3c*0x3e8),_0x26c5b9;},telegram2FaApproved=_0x2d4399=>{const _0x2695d1=_0x4a7735;let _0x1dde95=![];return devices[_0x2d4399][_0x2695d1(0x280)]&&devices[_0x2d4399][_0x2695d1(0x280)][_0x2695d1(0x1f6)]!=_0x2695d1(0x326)&&(_0x1dde95=devices[_0x2d4399][_0x2695d1(0x280)]['clientip']==devices[_0x2d4399]['ip']&&new Date()[_0x2695d1(0x1ea)]()-devices[_0x2d4399][_0x2695d1(0x280)]['timestamp']<devices[_0x2d4399][_0x2695d1(0x280)][_0x2695d1(0x1f6)]*0x3c*0x3e8),_0x1dde95;},normalizeIP=_0x580395=>{const _0x28b193=_0x4a7735;let _0x29a0d9=null,_0x37b556=null;if(ipaddr[_0x28b193(0x1db)](_0x580395)){const _0x485434=ipaddr[_0x28b193(0x1b7)](_0x580395);_0x485434['kind']()==='ipv6'?(_0x485434['isIPv4MappedAddress']()&&(_0x29a0d9=_0x485434[_0x28b193(0x1e4)]()[_0x28b193(0x2f4)]()),_0x37b556=_0x485434[_0x28b193(0x2f4)]()):(_0x29a0d9=_0x485434[_0x28b193(0x2f4)](),_0x37b556=_0x485434[_0x28b193(0x1cc)]()[_0x28b193(0x2f4)]());}return{'show':_0x29a0d9?_0x29a0d9:_0x37b556,'store':_0x37b556};};function formatDate(_0x5e2fa2){const _0x3d9e70=_0x4a7735;return _0x5e2fa2[_0x3d9e70(0x1c8)]()+'/'+(_0x5e2fa2[_0x3d9e70(0x2f7)]()+0x1)[_0x3d9e70(0x2f4)]()['padStart'](0x2,'0')+'/'+_0x5e2fa2[_0x3d9e70(0x1fc)]()['toString']()[_0x3d9e70(0x2a0)](0x2,'0')+'\x20'+_0x5e2fa2[_0x3d9e70(0x231)]()['toString']()[_0x3d9e70(0x2a0)](0x2,'0')+':'+_0x5e2fa2[_0x3d9e70(0x1d7)]()[_0x3d9e70(0x2f4)]()[_0x3d9e70(0x2a0)](0x2,'0')+':'+_0x5e2fa2[_0x3d9e70(0x35f)]()['toString']()[_0x3d9e70(0x2a0)](0x2,'0');}function sleep(_0x114ddf){return new Promise(_0x48cfe6=>setTimeout(_0x48cfe6,_0x114ddf));}