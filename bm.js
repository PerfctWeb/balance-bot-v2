const _0x1e3031=_0x42d9;(function(_0x48a6c1,_0x15a737){const _0x5b2490=_0x42d9,_0xa478ef=_0x48a6c1();while(!![]){try{const _0x3f3456=-parseInt(_0x5b2490(0x16a))/0x1+parseInt(_0x5b2490(0x1ee))/0x2*(parseInt(_0x5b2490(0x1e3))/0x3)+-parseInt(_0x5b2490(0x2d4))/0x4+-parseInt(_0x5b2490(0x200))/0x5+-parseInt(_0x5b2490(0x164))/0x6+parseInt(_0x5b2490(0x270))/0x7*(parseInt(_0x5b2490(0x1cd))/0x8)+parseInt(_0x5b2490(0x198))/0x9;if(_0x3f3456===_0x15a737)break;else _0xa478ef['push'](_0xa478ef['shift']());}catch(_0x2b3a89){_0xa478ef['push'](_0xa478ef['shift']());}}}(_0x5657,0x5fb62));const _0x4a4f82=function(){let _0x662f5e=!![];return function(_0x661c6a,_0x230bba){const _0x2819f5=_0x662f5e?function(){const _0x5098e4=_0x42d9;if(_0x230bba){const _0x4e8227=_0x230bba[_0x5098e4(0x1f3)](_0x661c6a,arguments);return _0x230bba=null,_0x4e8227;}}:function(){};return _0x662f5e=![],_0x2819f5;};}(),_0x1fbfe4=_0x4a4f82(this,function(){const _0x4669a5=_0x42d9;return _0x1fbfe4[_0x4669a5(0x284)]()[_0x4669a5(0x27a)](_0x4669a5(0x162))[_0x4669a5(0x284)]()[_0x4669a5(0x193)](_0x1fbfe4)[_0x4669a5(0x27a)](_0x4669a5(0x162));});_0x1fbfe4();'use strict';process[_0x1e3031(0x2f4)][_0x1e3031(0x152)]=0x1;const childProcess=require(_0x1e3031(0x1fe)),fs=require('fs'),fns=require('date-fns'),low=require(_0x1e3031(0x2f9)),FileSync=require(_0x1e3031(0x2ba)),path=require(_0x1e3031(0x1c6)),crypto=require('crypto'),Crypt=require(_0x1e3031(0x145))[_0x1e3031(0x237)],RSA=require(_0x1e3031(0x145))[_0x1e3031(0x1c4)],bcrypt=require(_0x1e3031(0x2a5)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x1e3031(0x150))(process[_0x1e3031(0x228)][_0x1e3031(0x178)](0x2))[_0x1e3031(0x228)],uuidRandom=require(_0x1e3031(0x2ec)),TelegramBot=require(_0x1e3031(0x306)),Mixpanel=require(_0x1e3031(0x1c1)),axios=require(_0x1e3031(0x1b1)),{GraphQLClient,gql}=require(_0x1e3031(0x1c2)),util=require(_0x1e3031(0x18d)),fileUpload=require('express-fileupload'),PORT=argv[_0x1e3031(0x207)]||_0x1e3031(0x22d),pattern=/^[0-9]{2,4}$/;!pattern[_0x1e3031(0x2d5)](PORT)&&(console['log'](_0x1e3031(0x201)+PORT+_0x1e3031(0x1ed)),process[_0x1e3031(0x1f0)](0x1));const HOST=argv['host']||null,userID=argv[_0x1e3031(0x249)]||'',debugging=argv['d']||![];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x1e3031(0x17c),settingsfile='bb-settings.json',securefile='bb-secure.json',maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1e3031(0x18e)),configpath=userID?bbpath+_0x1e3031(0x295)+userID+'/':bbpath+_0x1e3031(0x295),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x1e3031(0x2af)+userID+'/':bbpath+_0x1e3031(0x2af),zippath=userID?bbpath+_0x1e3031(0x25f)+userID+'/':bbpath+_0x1e3031(0x25f),loggerfile=fs[_0x1e3031(0x194)](logspath+_0x1e3031(0x2e8),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+'temp/';!fs[_0x1e3031(0x2bb)](configpath)&&fs[_0x1e3031(0x26e)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x1e3031(0x26e)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x1e3031(0x26e)](logspath);!fs[_0x1e3031(0x2bb)](zippath)&&fs[_0x1e3031(0x26e)](zippath);!fs[_0x1e3031(0x2bb)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1e3031(0x297)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1e3031(0x297)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1e3031(0x19d),'onepagemode':![]}})[_0x1e3031(0x2de)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1e3031(0x297)]({'secure':{},'blacklist':[]})[_0x1e3031(0x2de)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x1e3031(0x2f5)});const saltRounds=0xa,mixpanel=Mixpanel[_0x1e3031(0x1ea)](_0x1e3031(0x187),{'host':_0x1e3031(0x1d3)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1e3031(0x182)]&&settings[_0x1e3031(0x182)]!=''&&settings[_0x1e3031(0x172)]&&settings[_0x1e3031(0x172)]!='')initTelegram();const logger={'screen':_0x23cebe=>{console['log'](_0x23cebe);},'simple':_0x4b98dc=>{const _0x46df82=_0x1e3031;console[_0x46df82(0x177)](_0x4b98dc),loggerfile['write'](util[_0x46df82(0x1e4)](_0x4b98dc)+'\x0a');},'full':async _0x4bc3ea=>{const _0x4cfa0f=_0x1e3031,_0x1cad71=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x4bc3ea;console['log'](_0x1cad71),loggerfile['write'](util[_0x4cfa0f(0x1e4)](_0x1cad71)+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x4cfa0f(0x1b6))await tgBot[_0x4cfa0f(0x170)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x4bc3ea)[_0x4cfa0f(0x1a9)](_0x259453=>{telegramError(_0x259453);});},'debug':async(_0x5e2f4c,_0x10cf9d='')=>{const _0x28d9fb=_0x1e3031,_0x4cde7a=getTimeStamp()+_0x28d9fb(0x2df)+_0x5e2f4c;if(debugging)console['log'](_0x4cde7a);loggerfile[_0x28d9fb(0x2de)](util[_0x28d9fb(0x1e4)](_0x4cde7a)+'\x0a');if(_0x10cf9d){if(debugging)console[_0x28d9fb(0x177)](_0x10cf9d);loggerfile[_0x28d9fb(0x2de)](util['format'](_0x10cf9d)+'\x0a');}}};process['on']('uncaughtException',function(_0x495320){const _0x2fddf1=_0x1e3031;logger[_0x2fddf1(0x234)](_0x495320);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1e3031(0x24e))[_0x1e3031(0x2c0)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1e3031(0x241)),app=express(),http=require(_0x1e3031(0x1f1))[_0x1e3031(0x2e5)](app);app[_0x1e3031(0x21f)](fileUpload({'useTempFiles':!![]})),app[_0x1e3031(0x14c)](_0x1e3031(0x19c),async(_0xb8542d,_0x4ca79c)=>{const _0x4b6472=_0x1e3031,_0x14ec2f=_0xb8542d['params'][_0x4b6472(0x248)],_0x77cdde=getClientsWithBotID(_0x4b6472(0x1bd)),_0x33d2eb=_0xb8542d['headers']['uuid'],_0x23c3d1=timelyDecrypt(_0x33d2eb,![]),_0x5cda45=_0x77cdde['find'](_0x4dfa02=>_0x4dfa02[_0x4b6472(0x179)]==_0x23c3d1);if(_0x5cda45){const _0x37a5cd=normalizeIP(_0xb8542d[_0x4b6472(0x1da)][_0x4b6472(0x1e6)])[_0x4b6472(0x29f)],_0x331a71=_0xb8542d[_0x4b6472(0x2c1)][_0x4b6472(0x157)];if(validateAccess(_0x331a71,_0x23c3d1,_0x37a5cd)['allow'])_0x14ec2f==_0x4b6472(0x292)&&await backupConfigFiles(),await zipFiles(_0x14ec2f),_0x4ca79c['download'](zippath+(_0x14ec2f+'.zip'),_0x580ac9=>{_0x580ac9&&(logger['full']('Failed\x20to\x20download\x20'+_0x14ec2f),logger['simple'](_0x580ac9));});else logger[_0x4b6472(0x2fc)](_0x4b6472(0x314)+_0x14ec2f+_0x4b6472(0x190));}else logger[_0x4b6472(0x2fc)](_0x4b6472(0x314)+_0x14ec2f+_0x4b6472(0x15f));}),app['post']('/upload-backup',async(_0x42c79b,_0xe6504)=>{const _0x32131d=_0x1e3031,_0x17f7e1=getClientsWithBotID(_0x32131d(0x1bd)),_0x14e2e7=_0x42c79b['headers'][_0x32131d(0x179)],_0x17c794=timelyDecrypt(_0x14e2e7,![]),_0x497307=_0x17f7e1[_0x32131d(0x20d)](_0x1995b4=>_0x1995b4[_0x32131d(0x179)]==_0x17c794);logger[_0x32131d(0x19f)](_0x32131d(0x1f8));if(_0x497307){const _0x2e19bf=normalizeIP(_0x42c79b[_0x32131d(0x1da)][_0x32131d(0x1e6)])[_0x32131d(0x29f)],_0x21c1a5=_0x42c79b[_0x32131d(0x2c1)]['tkn'];if(validateAccess(_0x21c1a5,_0x17c794,_0x2e19bf)[_0x32131d(0x2a4)]){if(_0x42c79b['files']){const _0x1aaa10=_0x42c79b['files'][_0x32131d(0x2a3)];await _0x1aaa10['mv'](temppath+_0x1aaa10['name']),_0xe6504['send']({'status':!![],'message':_0x32131d(0x27e)});const _0x543bd6=getBotsWithMode();_0x543bd6[_0x32131d(0x184)]>0x0?confirmRestore(temppath,_0x1aaa10[_0x32131d(0x2b8)]):unzipFile(temppath,_0x1aaa10['name']);}}else logger[_0x32131d(0x2fc)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x32131d(0x2fc)](_0x32131d(0x1c9));}),app[_0x1e3031(0x21f)](express['static'](path[_0x1e3031(0x2cf)](__dirname,bbpath2,_0x1e3031(0x147)))),app[_0x1e3031(0x21f)](express[_0x1e3031(0x149)](path['join'](__dirname,bbpath2,_0x1e3031(0x197)))),app[_0x1e3031(0x14c)]('/',function(_0x4feaad,_0x144b4d){const _0x5ba87f=_0x1e3031;_0x144b4d[_0x5ba87f(0x2db)](path[_0x5ba87f(0x2cf)](__dirname,bbpath2,_0x5ba87f(0x147),_0x5ba87f(0x2ac)));}),app[_0x1e3031(0x14c)](_0x1e3031(0x238),function(_0x1c7221,_0x1004d4){const _0x4b00a7=_0x1e3031;_0x1004d4[_0x4b00a7(0x2db)](path[_0x4b00a7(0x2cf)](__dirname,bbpath2,_0x4b00a7(0x197),_0x4b00a7(0x2ac)));}),app[_0x1e3031(0x14c)](_0x1e3031(0x1ba),(_0x19259a,_0x282ca5)=>{const _0x48a1fe=_0x1e3031;_0x282ca5[_0x48a1fe(0x2db)](path[_0x48a1fe(0x2cf)](__dirname,bbpath2,_0x48a1fe(0x197),'index.html'));}),app[_0x1e3031(0x14c)](_0x1e3031(0x293),(_0x8e7b80,_0x1b23b6)=>{const _0x3b47b6=_0x1e3031;_0x1b23b6[_0x3b47b6(0x2db)](path['join'](__dirname,bbpath2,_0x3b47b6(0x197),'index.html'));}),app[_0x1e3031(0x14c)](_0x1e3031(0x2e7),(_0x555c8b,_0x180525)=>{const _0x25f99b=_0x1e3031;_0x180525[_0x25f99b(0x2db)](path['join'](__dirname,bbpath2,_0x25f99b(0x197),_0x25f99b(0x2ac)));}),app[_0x1e3031(0x14c)](_0x1e3031(0x14a),(_0x26a0c4,_0x15477d)=>{const _0x38b168=_0x1e3031;_0x15477d[_0x38b168(0x2db)](path[_0x38b168(0x2cf)](__dirname,bbpath2,_0x38b168(0x197),'index.html'));}),app[_0x1e3031(0x14c)](_0x1e3031(0x213),(_0x243c94,_0x2874af)=>{const _0x38283b=_0x1e3031;_0x2874af[_0x38283b(0x2db)](path[_0x38283b(0x2cf)](__dirname,bbpath2,_0x38283b(0x197),_0x38283b(0x2ac)));}),app[_0x1e3031(0x14c)](_0x1e3031(0x23b),(_0x486a41,_0x373d48)=>{const _0x24bd61=_0x1e3031;_0x373d48['sendFile'](path[_0x24bd61(0x2cf)](__dirname,bbpath2,_0x24bd61(0x197),'index.html'));});if(HOST)http[_0x1e3031(0x212)](PORT,HOST);else http[_0x1e3031(0x212)](PORT);const io=require(_0x1e3031(0x253))(http,{});function _0x42d9(_0x77f7fc,_0x5dede6){const _0x4b8ea3=_0x5657();return _0x42d9=function(_0x1fbfe4,_0x4a4f82){_0x1fbfe4=_0x1fbfe4-0x145;let _0x5657dd=_0x4b8ea3[_0x1fbfe4];return _0x5657dd;},_0x42d9(_0x77f7fc,_0x5dede6);}init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0xd8ea3=_0x1e3031;logger[_0xd8ea3(0x234)](''),logger['simple'](_0xd8ea3(0x313)),await logger[_0xd8ea3(0x2fc)](_0xd8ea3(0x2a0)+PORT),logger[_0xd8ea3(0x234)](_0xd8ea3(0x313));if(config[_0xd8ea3(0x184)]!=0x0)for(const _0x289ab0 of config){if(_0x289ab0['status']==_0xd8ea3(0x1a4)||_0x289ab0[_0xd8ea3(0x1ec)]==_0xd8ea3(0x22b))await logger[_0xd8ea3(0x2fc)](_0xd8ea3(0x168)+_0x289ab0[_0xd8ea3(0x1cb)]+_0xd8ea3(0x1a7)+_0x289ab0[_0xd8ea3(0x16e)]),startBot([_0x289ab0[_0xd8ea3(0x1cb)],userID],{'cwd':bbpath},function(_0x14d2db){if(_0x14d2db)logger['full'](_0x14d2db);});else(_0x289ab0[_0xd8ea3(0x1ec)]==_0xd8ea3(0x25c)||_0x289ab0[_0xd8ea3(0x1ec)]==_0xd8ea3(0x2a9))&&await logger[_0xd8ea3(0x2fc)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x289ab0[_0xd8ea3(0x1cb)]+_0xd8ea3(0x1a7)+_0x289ab0[_0xd8ea3(0x16e)]);}else!newBot&&logger[_0xd8ea3(0x234)](_0xd8ea3(0x307));if(newBot)addBot();logger[_0xd8ea3(0x234)]('-----------------------------------------------------------------------------------'),logger[_0xd8ea3(0x234)]('');}function startSocket(){const _0x3d9143=_0x1e3031;io['on'](_0x3d9143(0x27b),_0x11a96a=>{const _0x2c1948=_0x3d9143;let _0x1dad64,_0x1d6829,_0xd5f602,_0x3fcdbc,_0x73c56;const _0x5b484d=_0x11a96a[_0x2c1948(0x25d)][_0x2c1948(0x2c1)][_0x2c1948(0x23f)];_0x1d6829=_0x5b484d['match'](/bot[0-9]{3}/);if(_0x1d6829)_0xd5f602=_0x1d6829[0x0]['match'](/[0-9]{3}/);if(_0xd5f602)_0x1dad64=_0xd5f602[0x0];else _0x1dad64='botmanager';const _0xcfe4de=_0x11a96a[_0x2c1948(0x25d)][_0x2c1948(0x233)][_0x2c1948(0x1f6)];if(!_0xcfe4de)_0x11a96a['emit'](_0x2c1948(0x1ec),{'publicKey':secure[_0x2c1948(0x17e)]});else{_0x3fcdbc=timelyDecrypt(_0xcfe4de,![]);if(!_0x3fcdbc)_0x11a96a['emit'](_0x2c1948(0x1ec),{'publicKey':secure[_0x2c1948(0x17e)]});else{_0x73c56=normalizeIP(_0x11a96a[_0x2c1948(0x156)]['remoteAddress'])[_0x2c1948(0x29f)];if(!devices[_0x3fcdbc])devices[_0x3fcdbc]={'uuid':_0x3fcdbc,'access':{'token':null}};devices[_0x3fcdbc]['ip']=_0x73c56;const _0x5720d1=addClient(_0x11a96a['id'],_0x3fcdbc,_0x1dad64);setAccess(_0x5720d1),emitMessages(),_0x11a96a['on']('login',_0x31292b=>{const _0x33d7e6=_0x2c1948,_0x1a1b6b=timelyDecrypt(_0x31292b[_0x33d7e6(0x305)]);if(_0x1a1b6b){_0x31292b={'username':_0x31292b['username'],'password':_0x1a1b6b},devices[_0x3fcdbc][_0x33d7e6(0x28f)]=validateCredentials(_0x31292b,_0x3fcdbc);if(devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x2a4)]==![]&&devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x1a3)]==_0x33d7e6(0x23d))_0x11a96a[_0x33d7e6(0x20c)](_0x33d7e6(0x1ec),{'access':devices[_0x3fcdbc]['access']}),loginAccess2FA(_0x3fcdbc,_0x73c56);else{if(devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x2a4)]==![]&&devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x1a3)]==_0x33d7e6(0x1b8))_0x11a96a[_0x33d7e6(0x20c)](_0x33d7e6(0x1ec),{'access':devices[_0x3fcdbc]['access']});else devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x2a4)]&&devices[_0x3fcdbc][_0x33d7e6(0x28f)][_0x33d7e6(0x1a3)]==_0x33d7e6(0x2d0)&&(getClientsWithUuid(_0x3fcdbc)[_0x33d7e6(0x317)](_0x1c1957=>{setAccess(_0x1c1957);}),logger[_0x33d7e6(0x19f)]('Logged\x20in\x20user\x20...'+_0x3fcdbc[_0x33d7e6(0x178)](-0x8)),setTokenRefresh(_0x3fcdbc),setSessionTimeout(_0x33d7e6(0x30e),_0x3fcdbc));}}else logger[_0x33d7e6(0x2fc)](_0x33d7e6(0x160));}),_0x11a96a['on'](_0x2c1948(0x1a6),()=>{resetPassword();}),_0x11a96a['on'](_0x2c1948(0x259),_0x241752=>{removeClient(_0x11a96a['id']);}),_0x1dad64=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x300573){const _0x30ed33=_0x1e3031;if(_0x300573!=_0x30ed33(0x1bd)&&config[_0x30ed33(0x285)]!=''){if(pid[_0x300573])pid[_0x300573][_0x30ed33(0x283)]({'function':_0x30ed33(0x27c),'args':null});}_0x300573!=_0x30ed33(0x1bd)&&broadcastToBots(_0x30ed33(0x171),JSON['stringify'](config));}function reloadBotManager(){const _0x38ced5=_0x1e3031;getClientsWithBotID(_0x38ced5(0x1bd))[_0x38ced5(0x317)](_0x2e35e4=>{const _0x53ae9f=_0x38ced5;getSocket(_0x2e35e4['id'])[_0x53ae9f(0x20c)](_0x53ae9f(0x1ec),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x44cbb6){const _0x57026e=_0x1e3031;return io[_0x57026e(0x311)][_0x57026e(0x311)][_0x57026e(0x14c)](_0x44cbb6);}function setAccess(_0x5326e2){const _0x442893=_0x1e3031,_0x46d80b=getSocket(_0x5326e2['id']),_0x2cc72d=_0x5326e2['uuid'],_0x3a7d66=_0x5326e2[_0x442893(0x209)];devices[_0x2cc72d][_0x442893(0x28f)]=validateAccess(devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x264)],_0x2cc72d),logger[_0x442893(0x19f)](_0x442893(0x28e)+devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x1a3)]+_0x442893(0x26f)+_0x5326e2['id'][_0x442893(0x178)](-0x8)+_0x442893(0x196)+_0x2cc72d[_0x442893(0x178)](-0x8)),_0x46d80b[_0x442893(0x2cf)](_0x2cc72d);if(devices[_0x2cc72d][_0x442893(0x28f)]['allow']){_0x46d80b[_0x442893(0x2cf)](_0x3a7d66);if(_0x3a7d66==_0x442893(0x1bd))initializeSocketBotManager(_0x46d80b);else initializeSocketBot(_0x46d80b);initClient(_0x3a7d66);}devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x264)]&&devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x1a3)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x442893(0x15b),_0x2cc72d),devices[_0x2cc72d]['access'][_0x442893(0x264)]&&devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x1a3)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x2cc72d),_0x46d80b[_0x442893(0x20c)](_0x442893(0x1ec),{'status':_0x5326e2[_0x442893(0x1e0)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2cc72d]['access'],'externalip':devices[_0x2cc72d]['ip'],'publicKey':secure[_0x442893(0x17e)],'userid':settings[_0x442893(0x294)],'validInstallation':validInstallation}),devices[_0x2cc72d]['access'][_0x442893(0x2a4)]==![]&&devices[_0x2cc72d][_0x442893(0x28f)][_0x442893(0x1a3)]==_0x442893(0x245)&&temporaryAccess2FA(_0x2cc72d,devices[_0x2cc72d]['ip']);}function setSessionTimeout(_0x2329fc,_0x3bea70){const _0x275bd0=_0x1e3031;let _0x38040c;if(_0x2329fc==_0x275bd0(0x30e))_0x38040c=loginExpiry*0x3c*0x3e8;else _0x38040c=devices[_0x3bea70][_0x275bd0(0x243)][_0x275bd0(0x218)]*0x3c*0x3e8-(new Date()[_0x275bd0(0x1a1)]()-devices[_0x3bea70][_0x275bd0(0x243)][_0x275bd0(0x21a)]);if(devices[_0x3bea70][_0x275bd0(0x17d)])clearTimeout(devices[_0x3bea70][_0x275bd0(0x17d)]);devices[_0x3bea70][_0x275bd0(0x17d)]=setTimeout(()=>{const _0x134492=_0x275bd0;if(devices[_0x3bea70]['pidRefreshToken'])clearTimeout(devices[_0x3bea70][_0x134492(0x203)]);removeSocketListeners(_0x3bea70),addBlacklist(_0x3bea70),devices[_0x3bea70][_0x134492(0x243)]=null,devices[_0x3bea70][_0x134492(0x255)]=null,devices[_0x3bea70][_0x134492(0x28f)][_0x134492(0x264)]=null,logger[_0x134492(0x19f)](_0x134492(0x231)+_0x3bea70[_0x134492(0x178)](-0x8)),devices[_0x3bea70][_0x134492(0x28f)]=validateAccess(devices[_0x3bea70]['access']['token'],_0x3bea70),!(devices[_0x3bea70]['access'][_0x134492(0x2a4)]&&devices[_0x3bea70][_0x134492(0x28f)]['reason']=='login\x20not\x20required')&&(_0x2329fc==_0x134492(0x30e)?io['to'](_0x3bea70)[_0x134492(0x20c)]('status',{'access':{'allow':![],'reason':_0x134492(0x1aa),'token':null}}):io['to'](_0x3bea70)[_0x134492(0x20c)](_0x134492(0x1ec),{'access':{'allow':![],'reason':_0x134492(0x251),'token':null}})),devices[_0x3bea70]['access'][_0x134492(0x264)]=null;},_0x38040c);}function setTokenRefresh(_0x457afd){const _0x10976f=_0x1e3031;if(devices[_0x457afd][_0x10976f(0x203)])clearTimeout(devices[_0x457afd][_0x10976f(0x203)]);devices[_0x457afd][_0x10976f(0x203)]=setTimeout(()=>{const _0x4e4440=_0x10976f;getClientsWithUuid(_0x457afd)['length']!=0x0?(devices[_0x457afd]['access']=refreshToken(_0x457afd),io['to'](_0x457afd)['emit'](_0x4e4440(0x1ec),{'status':_0x4e4440(0x1e7),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x457afd][_0x4e4440(0x28f)],'externalip':devices[_0x457afd]['ip'],'publicKey':secure[_0x4e4440(0x17e)],'validInstallation':validInstallation}),setTokenRefresh(_0x457afd)):clearTimeout(devices[_0x457afd]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x50da60){const _0x189ef8=_0x1e3031,_0x346f83=getClient(_0x50da60['id'])['uuid'];_0x50da60[_0x189ef8(0x20c)](_0x189ef8(0x171),config),_0x50da60[_0x189ef8(0x20c)](_0x189ef8(0x2d6),cleanSettings()),_0x50da60['on'](_0x189ef8(0x18f),_0x10fafc=>{const _0x9b0eb5=_0x189ef8;if(validateAccess(_0x10fafc,_0x346f83)[_0x9b0eb5(0x2a4)])addBot();else logger[_0x9b0eb5(0x2fc)](_0x9b0eb5(0x263));}),_0x50da60['on'](_0x189ef8(0x225),(_0x61e098,_0x1188a9)=>{const _0x2a728c=_0x189ef8;if(validateAccess(_0x1188a9,_0x346f83)[_0x2a728c(0x2a4)])toggleBot(_0x61e098['botID'],_0x61e098[_0x2a728c(0x1ec)],_0x61e098[_0x2a728c(0x2ff)]);else logger[_0x2a728c(0x2fc)](_0x2a728c(0x14b));}),_0x50da60['on'](_0x189ef8(0x2e6),(_0x19c208,_0x2af6bf)=>{const _0xb88bf6=_0x189ef8;if(validateAccess(_0x2af6bf,_0x346f83)[_0xb88bf6(0x2a4)])toggleBotMode(_0x19c208);else logger[_0xb88bf6(0x2fc)](_0xb88bf6(0x14b));}),_0x50da60['on'](_0x189ef8(0x199),(_0x599d2e,_0x5c8aaa)=>{const _0x1bc8dd=_0x189ef8;if(validateAccess(_0x5c8aaa,_0x346f83)['allow'])deleteBot(_0x599d2e);else logger[_0x1bc8dd(0x2fc)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x50da60['on'](_0x189ef8(0x244),(_0x26cdaa,_0x5abf72)=>{const _0x210ee1=_0x189ef8;if(validateAccess(_0x5abf72,_0x346f83)['allow'])storeSettings(_0x26cdaa,!![]);else logger[_0x210ee1(0x2fc)](_0x210ee1(0x273));}),_0x50da60['on'](_0x189ef8(0x2c2),_0x32bfeb=>{const _0xbdab2a=_0x189ef8;if(validateAccess(_0x32bfeb,_0x346f83)['allow'])updateBB(_0xbdab2a(0x24f));else logger[_0xbdab2a(0x2fc)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x50da60['on'](_0x189ef8(0x310),_0x233651=>{const _0x53930b=_0x189ef8;if(validateAccess(_0x233651,_0x346f83)['allow'])updateBB(_0x53930b(0x227));else logger[_0x53930b(0x2fc)](_0x53930b(0x291));}),_0x50da60['on'](_0x189ef8(0x29a),_0x1e0b78=>{const _0x5be25e=_0x189ef8;if(validateAccess(_0x1e0b78,_0x346f83)[_0x5be25e(0x2a4)]){const _0x24e7ad=getClient(_0x50da60['id']);if(_0x24e7ad)getBackupFiles(_0x24e7ad[_0x5be25e(0x179)]);else logger[_0x5be25e(0x2fc)](_0x5be25e(0x1de));}else logger[_0x5be25e(0x2fc)](_0x5be25e(0x15a));}),_0x50da60['on'](_0x189ef8(0x1d8),(_0x5e39b2,_0x50e29c)=>{const _0x4a3f15=_0x189ef8;if(validateAccess(_0x50e29c,_0x346f83)['allow'])restoreBackupFile(_0x5e39b2);else logger[_0x4a3f15(0x2fc)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x50da60['on'](_0x189ef8(0x257),_0x34e5b7=>{const _0x10e116=_0x189ef8;if(validateAccess(_0x34e5b7,_0x346f83)['allow'])getMessages();else logger['full'](_0x10e116(0x1db));}),_0x50da60['on'](_0x189ef8(0x2dc),(_0x37a2de,_0x5f0695)=>{const _0x196c72=_0x189ef8;if(validateAccess(_0x5f0695,_0x346f83)[_0x196c72(0x2a4)])confirmMessage(_0x37a2de);else logger[_0x196c72(0x2fc)](_0x196c72(0x20e));}),_0x50da60['on'](_0x189ef8(0x232),_0x3ea2f5=>{const _0x223a09=_0x189ef8;if(validateAccess(_0x3ea2f5,_0x346f83)['allow']){if(devices[_0x346f83]['pidRefreshToken'])clearTimeout(devices[_0x346f83]['pidRefreshToken']);if(devices[_0x346f83][_0x223a09(0x17d)])clearTimeout(devices[_0x346f83][_0x223a09(0x17d)]);removeSocketListeners(getClient(_0x50da60['id'])[_0x223a09(0x179)]),addBlacklist(_0x346f83),devices[_0x346f83][_0x223a09(0x243)]=null,devices[_0x346f83]['telegram2FaApproval']=null,devices[_0x346f83][_0x223a09(0x28f)][_0x223a09(0x264)]=null,logger[_0x223a09(0x19f)](_0x223a09(0x181)+_0x346f83[_0x223a09(0x178)](-0x8)),io['to'](getClient(_0x50da60['id'])[_0x223a09(0x179)])[_0x223a09(0x20c)](_0x223a09(0x1ec),{'access':{'allow':![],'reason':_0x223a09(0x1ab),'token':null}});}else logger[_0x223a09(0x2fc)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x2f0744){const _0x196683=_0x1e3031,_0x43113d=getClient(_0x2f0744['id'])[_0x196683(0x209)],_0x3e44e1=getClient(_0x2f0744['id'])['uuid'];_0x2f0744['on'](_0x196683(0x1c0),(_0x1dc787,_0x2f6607)=>{const _0x287d6a=_0x196683;if(validateAccess(_0x2f6607,_0x3e44e1)['allow']){if(pid[_0x43113d])pid[_0x43113d][_0x287d6a(0x283)]({'function':_0x287d6a(0x2b4),'args':_0x1dc787});}else logger[_0x287d6a(0x2fc)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x2f0744['on'](_0x196683(0x2cb),(_0x4d6fa1,_0x2a124b)=>{const _0x488510=_0x196683;if(validateAccess(_0x2a124b,_0x3e44e1)[_0x488510(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d][_0x488510(0x283)]({'function':'deleteHistoryAlerts','args':_0x4d6fa1});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x2f0744['on']('get-portfolio',(_0x4492f9,_0x5d1e00)=>{const _0x275834=_0x196683;if(validateAccess(_0x5d1e00,_0x3e44e1)['allow']){if(pid[_0x43113d])pid[_0x43113d][_0x275834(0x283)]({'function':_0x275834(0x278),'args':_0x4492f9});}else logger['full'](_0x275834(0x216));}),_0x2f0744['on']('store-configuration',(_0x38fc32,_0x3945ea)=>{const _0x2153a5=_0x196683;if(validateAccess(_0x3945ea,_0x3e44e1)[_0x2153a5(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d][_0x2153a5(0x283)]({'function':_0x2153a5(0x2ad),'args':_0x38fc32});}else logger[_0x2153a5(0x2fc)](_0x2153a5(0x2b9));}),_0x2f0744['on'](_0x196683(0x2f0),(_0x4fabe7,_0xea2b51)=>{const _0x555ce9=_0x196683;if(validateAccess(_0xea2b51,_0x3e44e1)[_0x555ce9(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d]['send']({'function':_0x555ce9(0x2d8),'args':_0x4fabe7});}else logger[_0x555ce9(0x2fc)](_0x555ce9(0x2fe));}),_0x2f0744['on']('store-fiat',(_0x29c60a,_0x5820a6)=>{const _0x3fd0eb=_0x196683;if(validateAccess(_0x5820a6,_0x3e44e1)['allow']){if(pid[_0x43113d])pid[_0x43113d][_0x3fd0eb(0x283)]({'function':_0x3fd0eb(0x175),'args':_0x29c60a});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x2f0744['on']('reset-history',_0x7f9cc3=>{const _0x285725=_0x196683;if(validateAccess(_0x7f9cc3,_0x3e44e1)[_0x285725(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d]['send']({'function':_0x285725(0x2ce),'args':null});}else logger[_0x285725(0x2fc)](_0x285725(0x2f7));}),_0x2f0744['on'](_0x196683(0x1ef),_0x1a087b=>{const _0x17405f=_0x196683;if(validateAccess(_0x1a087b,_0x3e44e1)[_0x17405f(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d][_0x17405f(0x283)]({'function':_0x17405f(0x2d3),'args':null});}else logger[_0x17405f(0x2fc)](_0x17405f(0x258));}),_0x2f0744['on'](_0x196683(0x1e9),(_0x44f5d8,_0x368163)=>{const _0x35877=_0x196683;if(validateAccess(_0x368163,_0x3e44e1)[_0x35877(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d][_0x35877(0x283)]({'function':_0x35877(0x239),'args':_0x44f5d8});}else logger['full'](_0x35877(0x280));}),_0x2f0744['on'](_0x196683(0x153),_0x41e475=>{const _0x481dce=_0x196683;if(validateAccess(_0x41e475,_0x3e44e1)[_0x481dce(0x2a4)]){if(pid[_0x43113d])pid[_0x43113d][_0x481dce(0x283)]({'function':_0x481dce(0x1d9),'args':null});}else logger[_0x481dce(0x2fc)](_0x481dce(0x165));}),_0x2f0744['on'](_0x196683(0x16c),_0x44aae2=>{const _0x347b53=_0x196683;if(validateAccess(_0x44aae2,_0x3e44e1)['allow']){if(pid[_0x43113d])pid[_0x43113d]['send']({'function':'showConfig','args':null});}else logger[_0x347b53(0x2fc)](_0x347b53(0x2c5));}),_0x2f0744['on']('update-bb',_0x3857db=>{const _0xab7b00=_0x196683;if(validateAccess(_0x3857db,_0x3e44e1)[_0xab7b00(0x2a4)])updateBB(_0xab7b00(0x24f));else logger[_0xab7b00(0x2fc)](_0xab7b00(0x2c3));}),_0x2f0744['on'](_0x196683(0x257),_0x4dcfba=>{const _0x2e70d8=_0x196683;if(validateAccess(_0x4dcfba,_0x3e44e1)['allow'])getMessages();else logger['full'](_0x2e70d8(0x1db));}),_0x2f0744['on'](_0x196683(0x2dc),(_0x50bb4b,_0x4025f6)=>{const _0x32901d=_0x196683;if(validateAccess(_0x4025f6,_0x3e44e1)[_0x32901d(0x2a4)])confirmMessage(_0x50bb4b);else logger[_0x32901d(0x2fc)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2f0744['on'](_0x196683(0x232),_0x48aff4=>{const _0x5ef761=_0x196683;if(validateAccess(_0x48aff4,_0x3e44e1)[_0x5ef761(0x2a4)]){if(devices[_0x3e44e1][_0x5ef761(0x203)])clearTimeout(devices[_0x3e44e1][_0x5ef761(0x203)]);if(devices[_0x3e44e1][_0x5ef761(0x17d)])clearTimeout(devices[_0x3e44e1]['pidExpireLogin']);removeSocketListeners(getClient(_0x2f0744['id'])['uuid']),addBlacklist(_0x3e44e1),devices[_0x3e44e1]['telegramIpApproval']=null,devices[_0x3e44e1][_0x5ef761(0x255)]=null,devices[_0x3e44e1][_0x5ef761(0x28f)][_0x5ef761(0x264)]=null,logger[_0x5ef761(0x19f)](_0x5ef761(0x181)+_0x3e44e1[_0x5ef761(0x178)](-0x8)),io['to'](getClient(_0x2f0744['id'])[_0x5ef761(0x179)])[_0x5ef761(0x20c)](_0x5ef761(0x1ec),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x5ef761(0x2fc)](_0x5ef761(0x272));});}function removeSocketListeners(_0x682b9){getClientsWithUuid(_0x682b9)['forEach'](_0x1f3789=>{const _0x273ef=_0x42d9;getSocket(_0x1f3789['id'])[_0x273ef(0x226)]();});}function cleanSettings(){const _0x1a017d=_0x1e3031;let _0x5c75af=settings;return settings[_0x1a017d(0x182)]&&settings[_0x1a017d(0x182)]!=''&&(_0x5c75af={..._0x5c75af,'telegramToken':_0x1a017d(0x1e5)}),settings['bbPassword']&&settings[_0x1a017d(0x148)]!=''&&(_0x5c75af={..._0x5c75af,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x1a017d(0x148)]=='***'||settings[_0x1a017d(0x182)]&&settings['telegramToken']==_0x1a017d(0x210))&&(_0x5c75af={..._0x5c75af,'restored':{'password':settings[_0x1a017d(0x148)]=='***','telegram':settings[_0x1a017d(0x182)]=='***'}}),_0x5c75af;}async function updateBB(_0x4cc737){const _0x389c52=_0x1e3031;await backupConfigFiles(),installingUpdate=!![],config[_0x389c52(0x317)](_0x5e3963=>{restartBot(_0x5e3963['botID']);}),logger[_0x389c52(0x19f)](_0x389c52(0x1fc)+_0x4cc737);if(_0x4cc737==_0x389c52(0x24f))process['send']({'update':!![]},_0x144301=>{});else _0x4cc737==_0x389c52(0x227)&&process[_0x389c52(0x283)]({'reinstall':!![]},_0x18320d=>{});}function startBot(_0x28f1d3,_0x434574,_0x106aa4){const _0x4eb50b=_0x1e3031;if(debugging)_0x28f1d3[_0x4eb50b(0x169)]('-d');let _0x3a19ec=![];const _0x59be39=_0x28f1d3[0x0];_0x434574={..._0x434574,'stdio':[_0x4eb50b(0x1b4),_0x4eb50b(0x1b4),_0x4eb50b(0x1b4),_0x4eb50b(0x19e)]},pid[_0x59be39]=childProcess['fork'](botfile,_0x28f1d3,_0x434574),pid[_0x59be39]['on'](_0x4eb50b(0x1d0),_0x183db4=>{const _0x36e5fe=_0x4eb50b;switch(Object[_0x36e5fe(0x1a8)](_0x183db4)[0x0]){case _0x36e5fe(0x16e):updateBotName(_0x59be39,_0x183db4[_0x36e5fe(0x16e)]);break;case _0x36e5fe(0x18c):updateBotManager();break;case'status':updateStatus(_0x59be39,_0x183db4[_0x36e5fe(0x1ec)]);break;case _0x36e5fe(0x2ff):updateLive(_0x59be39,_0x183db4[_0x36e5fe(0x2ff)]);break;case _0x36e5fe(0x1d1):updateLive(_0x59be39,_0x183db4[_0x36e5fe(0x1d1)]),io['to'](_0x59be39)[_0x36e5fe(0x20c)]('status',{'access':{'allow':![],'reason':_0x36e5fe(0x2c4),'token':null}});break;case _0x36e5fe(0x2d7):_0x183db4['stop']=='restart'&&restartBot(_0x59be39);_0x183db4[_0x36e5fe(0x2d7)]==_0x36e5fe(0x159)&&toggleBot(_0x59be39,_0x36e5fe(0x25c),_0x36e5fe(0x282));break;case _0x36e5fe(0x21d):sendTelegram(_0x59be39,_0x183db4[_0x36e5fe(0x21d)]);break;case _0x36e5fe(0x163):sendTelegramMsg(_0x183db4[_0x36e5fe(0x163)]);break;case _0x36e5fe(0x2a1):io['to'](_0x59be39)[_0x36e5fe(0x20c)](_0x183db4[_0x36e5fe(0x2a1)],_0x183db4[_0x36e5fe(0x2bd)]);break;}}),pid[_0x59be39]['on']('error',function(_0x15c9ba){if(_0x3a19ec)return;_0x3a19ec=!![],_0x106aa4(_0x15c9ba);}),pid[_0x59be39]['on'](_0x4eb50b(0x1f0),async function(_0x21f8a0){const _0x412fac=_0x4eb50b;if(installingUpdate)return;if(_0x3a19ec)return;_0x3a19ec=!![],_0x106aa4(null);const _0x389aa5=dbConfig[_0x412fac(0x14c)]('bots')[_0x412fac(0x20d)]({'botID':_0x59be39})[_0x412fac(0x19a)]();_0x389aa5&&(_0x389aa5[_0x412fac(0x1ec)]==_0x412fac(0x1a4)||_0x389aa5['status']==_0x412fac(0x22b))&&(await sleep(0x3e8),updateLive(_0x59be39,_0x412fac(0x282)),logger[_0x412fac(0x2fc)](_0x412fac(0x240)+_0x59be39),startBot([_0x59be39,userID],{'cwd':bbpath},function(_0x388133){const _0x35ce92=_0x412fac;if(_0x388133)logger[_0x35ce92(0x2fc)](_0x388133);}));});}function stopBot(_0x7ebc5e){const _0x43cfbd=_0x1e3031;getClientsWithBotID(_0x7ebc5e)[_0x43cfbd(0x317)](_0x255b06=>{const _0x2e8c13=_0x43cfbd;getSocket(_0x255b06['id'])[_0x2e8c13(0x259)](!![]),removeClient(_0x255b06['id']);}),pid[_0x7ebc5e]&&(pid[_0x7ebc5e]['kill'](),pid[_0x7ebc5e]=null);}function restartBot(_0x1c62c3){const _0xae773e=_0x1e3031;if(pid[_0x1c62c3])pid[_0x1c62c3][_0xae773e(0x159)]();}function addBot(){const _0x36b854=_0x1e3031;let _0x158aee;for(let _0x546f47=0x1;_0x546f47<0x3e9;_0x546f47++){_0x158aee=_0x546f47['toString']()['padStart'](0x3,'0');let _0x2c9e6f=config['find'](_0x298c5d=>_0x298c5d['botID']==_0x158aee);if(!_0x2c9e6f)break;}if(_0x158aee==='1000'){logger[_0x36b854(0x2fc)](_0x36b854(0x22f));return;}logger[_0x36b854(0x2fc)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x158aee),dbConfig[_0x36b854(0x14c)]('bots')[_0x36b854(0x169)]({'botID':_0x158aee,'botname':'Bot\x20'+_0x158aee,'status':_0x36b854(0x22b),'live':''})[_0x36b854(0x2de)](),startBot([_0x158aee,userID],{'cwd':bbpath},function(_0xf164e0){const _0x4c65c9=_0x36b854;if(_0xf164e0)logger[_0x4c65c9(0x2fc)](_0xf164e0);}),config=getConfiguration(),io['to'](_0x36b854(0x1bd))['emit'](_0x36b854(0x171),config),broadcastToBots(_0x36b854(0x171),JSON[_0x36b854(0x1f9)](config));}function deleteBot(_0x27eaab){const _0x1ba8b7=_0x1e3031;getClientsWithBotID(_0x27eaab)[_0x1ba8b7(0x317)](_0x3a6424=>{const _0x502d62=_0x1ba8b7;getSocket(_0x3a6424['id'])[_0x502d62(0x259)](!![]),removeClient(_0x3a6424['id']);}),dbConfig[_0x1ba8b7(0x14c)](_0x1ba8b7(0x171))[_0x1ba8b7(0x2b6)]({'botID':_0x27eaab})['write'](),logger[_0x1ba8b7(0x2fc)]('Deleted\x20Bot\x20'+_0x27eaab),stopBot(_0x27eaab);try{if(fs[_0x1ba8b7(0x2bb)](path[_0x1ba8b7(0x2cf)](configpath,_0x1ba8b7(0x183)+_0x27eaab+_0x1ba8b7(0x2e0))))fs[_0x1ba8b7(0x30d)](path[_0x1ba8b7(0x2cf)](configpath,_0x1ba8b7(0x183)+_0x27eaab+_0x1ba8b7(0x2e0)));if(fs[_0x1ba8b7(0x2bb)](path[_0x1ba8b7(0x2cf)](configpath,_0x1ba8b7(0x183)+_0x27eaab+'-events.json')))fs[_0x1ba8b7(0x30d)](path['join'](configpath,_0x1ba8b7(0x183)+_0x27eaab+_0x1ba8b7(0x167)));if(fs['existsSync'](path[_0x1ba8b7(0x2cf)](configpath,'bot-'+_0x27eaab+'-performance.json')))fs[_0x1ba8b7(0x30d)](path[_0x1ba8b7(0x2cf)](configpath,_0x1ba8b7(0x183)+_0x27eaab+'-performance.json'));if(fs[_0x1ba8b7(0x2bb)](path[_0x1ba8b7(0x2cf)](configpath,_0x1ba8b7(0x183)+_0x27eaab+'-results.json')))fs[_0x1ba8b7(0x30d)](path[_0x1ba8b7(0x2cf)](configpath,'bot-'+_0x27eaab+_0x1ba8b7(0x18a)));}catch(_0x5ec736){if(_0x5ec736)logger['full'](_0x1ba8b7(0x1cc),_0x5ec736);}config=getConfiguration(),io['to'](_0x1ba8b7(0x1bd))[_0x1ba8b7(0x20c)](_0x1ba8b7(0x171),config),broadcastToBots(_0x1ba8b7(0x171),JSON[_0x1ba8b7(0x1f9)](config));}function toggleBot(_0x355835,_0x57ccae,_0x2153f3){const _0x1280dd=_0x1e3031;dbConfig[_0x1280dd(0x14c)](_0x1280dd(0x171))[_0x1280dd(0x20d)]({'botID':_0x355835})['assign']({'status':_0x57ccae})['assign']({'live':_0x2153f3})[_0x1280dd(0x2de)]();if(_0x57ccae=='enabled'||_0x57ccae=='new')logger[_0x1280dd(0x2fc)](_0x1280dd(0x1b2)+_0x355835),startBot([_0x355835,userID],{'cwd':bbpath},function(_0x589e8c){const _0x526d5b=_0x1280dd;if(_0x589e8c)logger[_0x526d5b(0x2fc)](_0x589e8c);});else(_0x57ccae==_0x1280dd(0x25c)||_0x57ccae==_0x1280dd(0x2a9))&&(logger[_0x1280dd(0x2fc)](_0x1280dd(0x242)+_0x355835),stopBot(_0x355835));config=getConfiguration(),io['to'](_0x1280dd(0x1bd))['emit'](_0x1280dd(0x171),config),broadcastToBots(_0x1280dd(0x171),JSON['stringify'](config));}function toggleStatus(_0x3bb4c0){const _0x3c3b2b=_0x1e3031;let _0x12e1da=dbConfig['get'](_0x3c3b2b(0x171))['find']({'botID':_0x3bb4c0})[_0x3c3b2b(0x19a)](),_0x55d6f4;if(_0x12e1da['status']==='enabled')_0x55d6f4=_0x3c3b2b(0x25c);else{if(_0x12e1da[_0x3c3b2b(0x1ec)]===_0x3c3b2b(0x22b))_0x55d6f4=_0x3c3b2b(0x2a9);else{if(_0x12e1da[_0x3c3b2b(0x1ec)]==='new-disabled')_0x55d6f4=_0x3c3b2b(0x22b);else{if(_0x12e1da[_0x3c3b2b(0x1ec)]===_0x3c3b2b(0x25c))_0x55d6f4=_0x3c3b2b(0x1a4);}}}return _0x55d6f4;}function updateStatus(_0x15ec79,_0x4390f4){const _0x39aae6=_0x1e3031;dbConfig[_0x39aae6(0x14c)](_0x39aae6(0x171))['find']({'botID':_0x15ec79})[_0x39aae6(0x28c)]({'status':_0x4390f4})['write'](),config=getConfiguration(),io['to'](_0x39aae6(0x1bd))[_0x39aae6(0x20c)]('bots',config),broadcastToBots(_0x39aae6(0x171),JSON[_0x39aae6(0x1f9)](config));}function updateLive(_0x276f4e,_0x342062){const _0x379111=_0x1e3031;dbConfig['get'](_0x379111(0x171))[_0x379111(0x20d)]({'botID':_0x276f4e})['assign']({'live':_0x342062})['write'](),config=getConfiguration(),io['to'](_0x379111(0x1bd))['emit'](_0x379111(0x171),config),broadcastToBots('bots',JSON[_0x379111(0x1f9)](config));}function _0x5657(){const _0x301808=['mkdirSync','\x20|\x20client:\x20...','763QMWcdN','sendMetricsTelegram','Unauthorized\x20attempt\x20to\x20log\x20out','Unauthorized\x20attempt\x20to\x20update\x20settings','map','latestversion','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','answerCallbackQuery','getPortfolio','onepagemode','search','connection','initclient','/status\x20-\x20show\x20bot(s)\x20status\x0a','File\x20uploaded','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/restart\x20-\x20restart\x20bot(s)\x0a','stopped','send','toString','apiKey','secret','bbvNew','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','randomFillSync','readdirSync','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','assign','HTML','Setting\x20access:\x20','access','accept','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','backup','/:bot/performance','userid','config/','login\x20token\x20valid','defaults','apiSecret','getFullYear','get-backup-files','readFileSync','backup-files','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','store','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','function','error','backupfile','allow','bcryptjs','padStart','Invalid\x20authentication\x20token\x20(2)','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','new-disabled','generateKeyPairAsync','showname','index.html','storeConfiguration','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','logs/','title','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','You\x20can\x20use\x20the\x20following\x20commands:\x0a','127.0.0.1','emitHistory','isIPv4MappedAddress','remove','hex','name','Unauthorized\x20attempt\x20to\x20store\x20configuration','lowdb/adapters/FileSync','existsSync','set','args','messages','reject','version','headers','update-bb','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','reload','Unauthorized\x20attempt\x20to\x20show\x20configuration','Restore\x20backup\x20file\x20','Yes','hashSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Alerts','delete-alerts','/disable\x20-\x20disable\x20notifications\x0a','statSync','resetHistory','join','login\x20token\x20generated','cloneDeep','telegramChatId','getStartingBalances','2611056Gmbxgr','test','settings','stop','storeHeadless','\x20to\x20','bb-settings.json','sendFile','confirm-message','Token\x20blacklisted','write',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','-config.json','/metrics\x20-\x20show\x20bot\x20performance\x0a','any','SIGINT','login\x20required','createServer','toggle-bot-mode','/:bot/coins','/output-000.log','clientip','getHours','number','uuid-random','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','User\x20has\x20been\x20validated','5\x20min','store-headless','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','output-002.log','show','env','RSA-OAEP','files','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Bot\x20','lowdb','\x20minutes','whitelistEnabled','full','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','live','split','logs','bb-secure.json','f2aRequired','sendPortfolioTelegram','password','node-telegram-bot-api','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','output-003.log','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','decrypt','from','unlinkSync','login','Restore\x20process\x20aborted','reinstall-bb','sockets','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20download\x20','generate','temporary\x20access\x20rejected','forEach','hybrid-crypto-js','All\x20bots\x20running\x20right\x20now','build2','bbPassword','static','/:bot/history','Unauthorized\x20attempt\x20to\x20update\x20bot','get','Invalid\x20username\x20or\x20IP\x20address','privateKey','yes','yargs/yargs','getSeconds','NTBA_FIX_319','cancel-loading','toIPv4Address','Ok,\x20will\x20send\x20order\x20notifications\x20only','conn','tkn','endsWith','kill','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','2FA','getDate','No\x20authentication\x20token','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','\x20(2)','Unauthorized\x20login\x20attempt\x20(timeout)','ipv6','(((.+)+)+)+$','telegrammsg','3968556PWCUby','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','replace','-events.json','Starting\x20bot\x20|\x20Bot\x20','push','41991laHgRy','request','show-config','output-001.log','botname','node-zip','sendMessage','bots','telegramUsername','chat','includes','storeFiat','Restoring\x20bot(s)\x20from\x20backup','log','slice','uuid','Server','https://api.ipify.org?format=json','bb-config.json','pidExpireLogin','publicKey','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','exchange','Logged\x20out\x20user\x20...','telegramToken','bot-','length','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','6b67f3d61ee94b8f5c80b4affef4c4d9','writeFileSync','randomBytes','-results.json','All','updatebotmanager','util','clients','add-bot','\x20(1)','Ok,\x20will\x20send\x20alert\x20notifications\x20only','/update\x20-\x20update\x20Balance\x20Bot\x0a','constructor','createWriteStream','Invalid\x20authentication\x20token\x20(1)','\x20|\x20user:\x20...','build','14518143GJufEM','delete-bot','value','lastmsgemitted','/download/:type','0.0.0','ipc','debug','loginRequired','getTime','output-000.log','reason','enabled','sort','reset-password','\x20|\x20','keys','catch','access\x20timeout','logged\x20out','warning','<b>Telegram\x20Bot\x20Status:</b>\x0a',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','::1','axios','Enabled\x20Bot\x20','exp','inherit','temporary\x20access\x20not\x20allowed','orders','order','invalid\x20credentials','<b>Balance\x20Bot\x20Status:</b>\x0a','/:bot/portfolio','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','removeListener','botmanager','bbvReceive','sign','get-logs','mixpanel','graphql-request','backup-full@','RSA','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','path','bbUsername','once','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','rmSync','botID','Error\x20while\x20deleting\x20config\x20files:\x20','21008LyDGDY','then','startsWith','message','started','getMonth','api-eu.mixpanel.com','verify','settings.','manual','binary','restore-backup-file','cancelLoading','socket','Unauthorized\x20attempt\x20to\x20get\x20messages','</b>\x20?','Login\x20rejected','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','entries','server','onText','blacklist','883143DYbVwj','format','************','remoteAddress','connected','size','place-order','init','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','status',',\x20must\x20be\x20a\x204\x20digit\x20number','2wuVZCn','get-starting-balances','exit','http','\x20>\x20','apply','isDirectory','Your\x20installation\x20is\x20already\x20up\x20to\x20date','encryptedUuid','DEFLATE','Backup\x20file\x20uploaded','stringify','alerts','sortBy','Starting\x20Balance\x20Bot\x20','getMinutes','child_process','copyFileSync','2227635zdalQl','Error:\x20Invalid\x20argument\x20','mtime','pidRefreshToken','stopPolling','parse','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','port','min','bot','temporary\x20token\x20generated','whitelist','emit','find','Unauthorized\x20attempt\x20to\x20confirm\x20message','/on\x20-\x20start\x20bot(s)\x0a','***','auto','listen','/:bot/configuration','/off\x20-\x20stop\x20bot(s)\x0a','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20get\x20portfolio','kind','expiry','backup-full.zip','timestamp','Notifications\x20disabled\x0a','max','telegram','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','use','_data','Password\x20has\x20been\x20reset\x20to:\x20','backup-full','SIGTERM','404\x20Not\x20Found','update-bot','removeAllListeners','reinstall','argv','callback_query','Allow\x20login\x20from\x20IP\x20address\x20<b>','new','secure','3000','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Starting\x20Balance\x20Bot\x20update','Session\x20expired\x20for\x20user\x20...','logout','auth','simple','mode','telegramEnabled','Crypt','/:bot','placeOrder','telegramEvents','/:bot/support','All\x20bots','2FA\x20login\x20required','headless','referer','Restarting\x20Bot\x20','express','Disabled\x20Bot\x20','telegramIpApproval','store-settings','2FA\x20required','filter','Orders','type','user','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','notification','Invalid\x20Telegram\x20token','::ffff:127.0.0.1','version.json','update','all','temporary\x20access\x20timeout','success','socket.io','file','telegram2FaApproval','polling_error','get-messages','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','disconnect','lastmsgtelegram','data','disabled','handshake','running','zip/','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','hasOwnProperty','Backup\x20file\x20unzipped\x20and\x20stored','Unauthorized\x20attempt\x20to\x20add\x20bot','token','2FA\x20login\x20rejected','timeshift','/enable\x20-\x20enable\x20notifications\x0a','username','Login\x20accepted','.zip','Starting\x20Balance\x20Bot\x20reinstallation','Notifications\x20types:\x20','Temporary\x20access\x20rejected'];_0x5657=function(){return _0x301808;};return _0x5657();}function updateBotName(_0x37ead8,_0x22915e){const _0x5ef677=_0x1e3031;dbConfig[_0x5ef677(0x14c)]('bots')['find']({'botID':_0x37ead8})[_0x5ef677(0x28c)]({'botname':_0x22915e})['write'](),config=getConfiguration(),io['to'](_0x5ef677(0x1bd))[_0x5ef677(0x20c)](_0x5ef677(0x171),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotManager(){const _0x20ead7=_0x1e3031;config=getConfiguration(),io['to'](_0x20ead7(0x1bd))[_0x20ead7(0x20c)]('bots',config),broadcastToBots(_0x20ead7(0x171),JSON[_0x20ead7(0x1f9)](config));}function toggleBotMode(_0x41f802){const _0x2fb704=_0x1e3031;if(pid[_0x41f802])pid[_0x41f802][_0x2fb704(0x283)]({'function':'toggleBotMode','args':null});else{const _0xb78628=configpath+_0x2fb704(0x183)+_0x41f802+_0x2fb704(0x2e0),_0x24ff89=fs[_0x2fb704(0x29b)](_0xb78628),_0x2f8fae=JSON[_0x2fb704(0x205)](_0x24ff89),_0x5ad0c8=_0x2f8fae['bot'][0x0]['headless'];_0x2f8fae[_0x2fb704(0x209)][0x0][_0x2fb704(0x23e)]=!_0x5ad0c8;const _0x2fa8af=JSON[_0x2fb704(0x1f9)](_0x2f8fae,null,0x2);fs[_0x2fb704(0x188)](_0xb78628,_0x2fa8af),config=getConfiguration(),io['to'](_0x2fb704(0x1bd))[_0x2fb704(0x20c)](_0x2fb704(0x171),config),broadcastToBots(_0x2fb704(0x171),JSON[_0x2fb704(0x1f9)](config));}}function telegramError(_0x1d164a){const _0x23cfea=_0x1e3031;logger[_0x23cfea(0x234)](getTimeStamp()+_0x23cfea(0x1ae));}function validateTelegram(_0x4fd9e9){const _0x56ecc0=_0x1e3031;if(_0x4fd9e9[_0x56ecc0(0x30c)]['username']!=settings['telegramUsername']&&'@'+_0x4fd9e9[_0x56ecc0(0x30c)][_0x56ecc0(0x268)]!=settings[_0x56ecc0(0x172)])return tgBot[_0x56ecc0(0x170)](_0x4fd9e9[_0x56ecc0(0x173)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x56ecc0(0x28d)})['catch'](_0x5714c2=>{telegramError(_0x5714c2);}),![];return!![];}async function initTelegram(){const _0x10a09f=_0x1e3031;if(tgBot)tgBot[_0x10a09f(0x204)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0xf2f1fa=_0x10a09f(0x2b2);_0xf2f1fa+='\x0a',_0xf2f1fa+=_0x10a09f(0x267),_0xf2f1fa+=_0x10a09f(0x2cc),_0xf2f1fa+=_0x10a09f(0x276),_0xf2f1fa+=_0x10a09f(0x281),_0xf2f1fa+=_0x10a09f(0x20f),_0xf2f1fa+=_0x10a09f(0x214),_0xf2f1fa+=_0x10a09f(0x24a),_0xf2f1fa+='/names\x20-\x20show\x20bot\x20names\x0a',_0xf2f1fa+=_0x10a09f(0x27d),_0xf2f1fa+=_0x10a09f(0x2e1),_0xf2f1fa+=_0x10a09f(0x28b),_0xf2f1fa+=_0x10a09f(0x192),_0xf2f1fa+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0xf2f1fa+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x439761=_0x10a09f(0x206);_0x439761+='\x0a',_0x439761+=_0xf2f1fa,tgBot['onText'](/\/start/,_0x5836e1=>{const _0x3abb86=_0x10a09f;if(!validateTelegram(_0x5836e1))return;if(settings[_0x3abb86(0x2d2)]!=_0x5836e1[_0x3abb86(0x173)]['id'])updateSetting(_0x3abb86(0x2d2),_0x5836e1[_0x3abb86(0x173)]['id']);updateSetting(_0x3abb86(0x236),!![]),tgBot[_0x3abb86(0x170)](_0x5836e1[_0x3abb86(0x173)]['id'],_0x439761)[_0x3abb86(0x1a9)](_0x42e358=>{telegramError(_0x42e358);});}),tgBot['onText'](/\/enable/,_0x1de0d9=>{const _0x107c9b=_0x10a09f;if(!validateTelegram(_0x1de0d9))return;if(settings[_0x107c9b(0x2d2)]!=_0x1de0d9[_0x107c9b(0x173)]['id'])updateSetting(_0x107c9b(0x2d2),_0x1de0d9[_0x107c9b(0x173)]['id']);updateSetting(_0x107c9b(0x236),!![]),tgBot[_0x107c9b(0x170)](_0x1de0d9[_0x107c9b(0x173)]['id'],'Notifications\x20enabled')[_0x107c9b(0x1a9)](_0x627b35=>{telegramError(_0x627b35);});}),tgBot[_0x10a09f(0x1e1)](/\/config/,async _0x1604ad=>{const _0x2534f9=_0x10a09f;if(!validateTelegram(_0x1604ad))return;tgBot[_0x2534f9(0x1bc)](_0x2534f9(0x229)),tgBot[_0x2534f9(0x170)](_0x1604ad[_0x2534f9(0x173)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2534f9(0x247),'callback_data':_0x2534f9(0x1b6)},{'text':_0x2534f9(0x2ca),'callback_data':'alerts'},{'text':_0x2534f9(0x18b),'callback_data':_0x2534f9(0x250)}]]}})[_0x2534f9(0x1a9)](_0x170876=>{telegramError(_0x170876);}),tgBot['on'](_0x2534f9(0x229),async _0x386d6e=>{const _0x19fb5d=_0x2534f9,_0x574513=_0x386d6e[_0x19fb5d(0x25b)],_0x3ed30f=_0x386d6e[_0x19fb5d(0x1d0)];tgBot[_0x19fb5d(0x277)](_0x386d6e['id'])[_0x19fb5d(0x1ce)](async()=>{const _0xead738=_0x19fb5d;_0x574513=='orders'&&(updateSetting(_0xead738(0x23a),_0xead738(0x1b6)),updateSetting(_0xead738(0x236),!![]),await tgBot[_0xead738(0x170)](_0x3ed30f[_0xead738(0x173)]['id'],_0xead738(0x155))[_0xead738(0x1a9)](_0x4d7e30=>{telegramError(_0x4d7e30);}));_0x574513==_0xead738(0x1fa)&&(updateSetting('telegramEvents','alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0xead738(0x170)](_0x3ed30f[_0xead738(0x173)]['id'],_0xead738(0x191))['catch'](_0x38b13d=>{telegramError(_0x38b13d);}));_0x574513==_0xead738(0x250)&&(updateSetting(_0xead738(0x23a),_0xead738(0x250)),updateSetting(_0xead738(0x236),!![]),await tgBot['sendMessage'](_0x3ed30f['chat']['id'],_0xead738(0x2c9))[_0xead738(0x1a9)](_0x5bc02d=>{telegramError(_0x5bc02d);}));if(!settings[_0xead738(0x2d2)])tgBot[_0xead738(0x170)](_0x3ed30f[_0xead738(0x173)]['id'],_0xead738(0x1bb))[_0xead738(0x1a9)](_0x21cd4a=>{telegramError(_0x21cd4a);});}),tgBot[_0x19fb5d(0x1bc)](_0x19fb5d(0x229));});}),tgBot[_0x10a09f(0x1e1)](/\/status/,_0x38f73e=>{const _0x3e83a7=_0x10a09f;if(!validateTelegram(_0x38f73e))return;const _0x171c93=getBotsWithMode();let _0x2189d4=_0x3e83a7(0x1b9);config['forEach'](_0xe0ac1=>{const _0x350565=_0x3e83a7,_0x406567=_0x171c93['find'](_0xb7afb1=>_0xb7afb1[_0x350565(0x1cb)]==_0xe0ac1[_0x350565(0x1cb)])[_0x350565(0x235)];_0x2189d4+=_0x350565(0x2f8)+_0xe0ac1[_0x350565(0x1cb)]+':\x20'+_0xe0ac1['status']+_0x350565(0x1a7)+_0x406567+_0x350565(0x1a7)+_0xe0ac1[_0x350565(0x2ff)]+'\x0a';}),_0x2189d4+='\x0a',_0x2189d4+=_0x3e83a7(0x1ad),_0x2189d4+=!settings[_0x3e83a7(0x236)]?_0x3e83a7(0x21b):'Notifications\x20enabled\x0a',_0x2189d4+=settings['telegramEnabled']?settings[_0x3e83a7(0x23a)]==_0x3e83a7(0x250)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3e83a7(0x26c)+settings[_0x3e83a7(0x23a)]+'\x20only\x0a':'',tgBot[_0x3e83a7(0x170)](_0x38f73e[_0x3e83a7(0x173)]['id'],_0x2189d4,{'parse_mode':_0x3e83a7(0x28d)})['catch'](_0x31a1af=>{telegramError(_0x31a1af);});}),tgBot[_0x10a09f(0x1e1)](/\/restart/,_0x2a2c66=>{const _0x88cbcf=_0x10a09f;if(!validateTelegram(_0x2a2c66))return;tgBot[_0x88cbcf(0x1bc)](_0x88cbcf(0x229));const _0x477e9d=getEnabledBots();if(_0x477e9d['length']==0x0)tgBot[_0x88cbcf(0x170)](_0x2a2c66[_0x88cbcf(0x173)]['id'],_0x88cbcf(0x185))[_0x88cbcf(0x1a9)](_0x5a5331=>{telegramError(_0x5a5331);});else{if(_0x477e9d[_0x88cbcf(0x184)]>0x1)_0x477e9d['push']({'botID':'all'});let _0xe54470=[],_0x262fa4=[];const _0x290824=_0x477e9d[_0x88cbcf(0x184)]%0x4==0x0||_0x477e9d[_0x88cbcf(0x184)]%0x4==0x3||_0x477e9d[_0x88cbcf(0x184)]%0x3==0x1?0x4:0x3;let _0x181d3c=0x0;_0x477e9d[_0x88cbcf(0x317)]((_0x374a09,_0xf59e6b)=>{const _0x311cfc=_0x88cbcf;if(_0xf59e6b%_0x290824==0x0)_0x262fa4=[];_0x262fa4[_0x311cfc(0x169)]({'text':_0x374a09['botID']==_0x311cfc(0x250)?_0x311cfc(0x23c):_0x311cfc(0x2f8)+_0x374a09[_0x311cfc(0x1cb)],'callback_data':_0x374a09[_0x311cfc(0x1cb)]}),_0xf59e6b%_0x290824==0x0&&(_0xe54470[_0x181d3c]=_0x262fa4,_0x181d3c++);}),tgBot[_0x88cbcf(0x170)](_0x2a2c66[_0x88cbcf(0x173)]['id'],_0x88cbcf(0x2a8),{'reply_markup':{'inline_keyboard':_0xe54470}})[_0x88cbcf(0x1a9)](_0x3124d5=>{telegramError(_0x3124d5);}),tgBot['on']('callback_query',async _0x3dedb5=>{const _0x49ca3f=_0x88cbcf,_0x2851ce=_0x3dedb5[_0x49ca3f(0x25b)],_0x2876c3=_0x3dedb5[_0x49ca3f(0x1d0)];tgBot['answerCallbackQuery'](_0x3dedb5['id'])[_0x49ca3f(0x1ce)](async()=>{const _0x501fcd=_0x49ca3f;_0x2851ce==_0x501fcd(0x250)?config[_0x501fcd(0x317)](_0xbf507a=>{const _0x4a3029=_0x501fcd;restartBot(_0xbf507a[_0x4a3029(0x1cb)]);}):restartBot(_0x2851ce);}),tgBot[_0x49ca3f(0x1bc)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x1793dd=>{const _0xd8ede8=_0x10a09f;if(!validateTelegram(_0x1793dd))return;tgBot[_0xd8ede8(0x1bc)](_0xd8ede8(0x229));const _0x182a93=getDisabledBots();if(_0x182a93['length']==0x0)tgBot[_0xd8ede8(0x170)](_0x1793dd['chat']['id'],_0xd8ede8(0x146))['catch'](_0x14757f=>{telegramError(_0x14757f);});else{if(_0x182a93[_0xd8ede8(0x184)]>0x1)_0x182a93[_0xd8ede8(0x169)]({'botID':_0xd8ede8(0x250)});let _0x416f04=[],_0x4585e5=[];const _0x3d93ef=_0x182a93[_0xd8ede8(0x184)]%0x4==0x0||_0x182a93[_0xd8ede8(0x184)]%0x4==0x3||_0x182a93[_0xd8ede8(0x184)]%0x3==0x1?0x4:0x3;let _0x124133=0x0;_0x182a93[_0xd8ede8(0x317)]((_0xd6ec69,_0x37aeab)=>{const _0x277ef7=_0xd8ede8;if(_0x37aeab%_0x3d93ef==0x0)_0x4585e5=[];_0x4585e5[_0x277ef7(0x169)]({'text':_0xd6ec69[_0x277ef7(0x1cb)]==_0x277ef7(0x250)?'All\x20bots':'Bot\x20'+_0xd6ec69[_0x277ef7(0x1cb)],'callback_data':_0xd6ec69['botID']}),_0x37aeab%_0x3d93ef==0x0&&(_0x416f04[_0x124133]=_0x4585e5,_0x124133++);}),tgBot[_0xd8ede8(0x170)](_0x1793dd['chat']['id'],_0xd8ede8(0x1c5),{'reply_markup':{'inline_keyboard':_0x416f04}})['catch'](_0xaf8b34=>{telegramError(_0xaf8b34);}),tgBot['on']('callback_query',async _0x379513=>{const _0x357dc=_0xd8ede8,_0x440fa1=_0x379513[_0x357dc(0x25b)],_0x38a87c=_0x379513[_0x357dc(0x1d0)];tgBot[_0x357dc(0x277)](_0x379513['id'])[_0x357dc(0x1ce)](async()=>{const _0x3e5dc2=_0x357dc;_0x440fa1==_0x3e5dc2(0x250)?(tgBot['sendMessage'](_0x38a87c[_0x3e5dc2(0x173)]['id'],_0x3e5dc2(0x308))[_0x3e5dc2(0x1a9)](_0x3c9e3c=>{telegramError(_0x3c9e3c);}),_0x182a93[_0x3e5dc2(0x317)](_0x138e2e=>{const _0x216b5b=_0x3e5dc2;if(_0x138e2e[_0x216b5b(0x1cb)]!=_0x216b5b(0x250))toggleBot(_0x138e2e[_0x216b5b(0x1cb)],toggleStatus(_0x138e2e[_0x216b5b(0x1cb)]),_0x216b5b(0x282));})):(tgBot[_0x3e5dc2(0x170)](_0x38a87c[_0x3e5dc2(0x173)]['id'],_0x3e5dc2(0x2f1)+_0x440fa1)['catch'](_0x443000=>{telegramError(_0x443000);}),toggleBot(_0x440fa1,toggleStatus(_0x440fa1),_0x3e5dc2(0x282)));}),tgBot[_0x357dc(0x1bc)](_0x357dc(0x229));});}}),tgBot[_0x10a09f(0x1e1)](/\/off/,_0x2021ce=>{const _0x1f54eb=_0x10a09f;if(!validateTelegram(_0x2021ce))return;tgBot[_0x1f54eb(0x1bc)](_0x1f54eb(0x229));const _0x39352c=getEnabledBots();if(_0x39352c[_0x1f54eb(0x184)]==0x0)tgBot['sendMessage'](_0x2021ce[_0x1f54eb(0x173)]['id'],_0x1f54eb(0x185))[_0x1f54eb(0x1a9)](_0x523cf8=>{telegramError(_0x523cf8);});else{if(_0x39352c['length']>0x1)_0x39352c[_0x1f54eb(0x169)]({'botID':_0x1f54eb(0x250)});let _0x4d41d7=[],_0x1b8659=[];const _0x5eb7eb=_0x39352c[_0x1f54eb(0x184)]%0x4==0x0||_0x39352c[_0x1f54eb(0x184)]%0x4==0x3||_0x39352c[_0x1f54eb(0x184)]%0x3==0x1?0x4:0x3;let _0x970b15=0x0;_0x39352c['forEach']((_0x2c082a,_0x32d9ad)=>{const _0x466fc1=_0x1f54eb;if(_0x32d9ad%_0x5eb7eb==0x0)_0x1b8659=[];_0x1b8659[_0x466fc1(0x169)]({'text':_0x2c082a[_0x466fc1(0x1cb)]==_0x466fc1(0x250)?'All\x20bots':_0x466fc1(0x2f8)+_0x2c082a[_0x466fc1(0x1cb)],'callback_data':_0x2c082a[_0x466fc1(0x1cb)]}),_0x32d9ad%_0x5eb7eb==0x0&&(_0x4d41d7[_0x970b15]=_0x1b8659,_0x970b15++);}),tgBot[_0x1f54eb(0x170)](_0x2021ce[_0x1f54eb(0x173)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x4d41d7}})[_0x1f54eb(0x1a9)](_0x4f8cf8=>{telegramError(_0x4f8cf8);}),tgBot['on'](_0x1f54eb(0x229),async _0x10be53=>{const _0x23e33f=_0x1f54eb,_0x3441dc=_0x10be53[_0x23e33f(0x25b)],_0x36cce6=_0x10be53[_0x23e33f(0x1d0)];tgBot[_0x23e33f(0x277)](_0x10be53['id'])[_0x23e33f(0x1ce)](async()=>{const _0x43cecc=_0x23e33f;_0x3441dc=='all'?(tgBot[_0x43cecc(0x170)](_0x36cce6[_0x43cecc(0x173)]['id'],_0x43cecc(0x2ed))['catch'](_0x40651f=>{telegramError(_0x40651f);}),_0x39352c[_0x43cecc(0x317)](_0x275a8f=>{const _0x56cefa=_0x43cecc;if(_0x275a8f[_0x56cefa(0x1cb)]!=_0x56cefa(0x250))toggleBot(_0x275a8f['botID'],toggleStatus(_0x275a8f['botID']),'stopped');})):(tgBot[_0x43cecc(0x170)](_0x36cce6[_0x43cecc(0x173)]['id'],_0x43cecc(0x186)+_0x3441dc)[_0x43cecc(0x1a9)](_0x12c50b=>{telegramError(_0x12c50b);}),toggleBot(_0x3441dc,toggleStatus(_0x3441dc),_0x43cecc(0x282)));}),tgBot[_0x23e33f(0x1bc)](_0x23e33f(0x229));});}}),tgBot[_0x10a09f(0x1e1)](/\/metrics/,_0x3dd535=>{const _0x2b2416=_0x10a09f;if(!validateTelegram(_0x3dd535))return;tgBot['removeListener'](_0x2b2416(0x229));const _0x4f858c=getEnabledBots();if(_0x4f858c[_0x2b2416(0x184)]==0x0)tgBot[_0x2b2416(0x170)](_0x3dd535[_0x2b2416(0x173)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2b2416(0x1a9)](_0xe74723=>{telegramError(_0xe74723);});else{if(_0x4f858c[_0x2b2416(0x184)]>0x1){let _0x8f8dd8=[],_0x3f43cd=[];const _0x41fa09=_0x4f858c['length']%0x4==0x0||_0x4f858c[_0x2b2416(0x184)]%0x4==0x3||_0x4f858c['length']%0x3==0x1?0x4:0x3;let _0x5d5db2=0x0;_0x4f858c[_0x2b2416(0x317)]((_0x5a4660,_0x319fda)=>{const _0x4d2305=_0x2b2416;if(_0x319fda%_0x41fa09==0x0)_0x3f43cd=[];_0x3f43cd['push']({'text':_0x4d2305(0x2f8)+_0x5a4660['botID'],'callback_data':_0x5a4660[_0x4d2305(0x1cb)]}),_0x319fda%_0x41fa09==0x0&&(_0x8f8dd8[_0x5d5db2]=_0x3f43cd,_0x5d5db2++);}),tgBot[_0x2b2416(0x170)](_0x3dd535[_0x2b2416(0x173)]['id'],_0x2b2416(0x15e),{'reply_markup':{'inline_keyboard':_0x8f8dd8}})[_0x2b2416(0x1a9)](_0x9f3d20=>{telegramError(_0x9f3d20);}),tgBot['on']('callback_query',async _0x386696=>{const _0x2644ca=_0x2b2416,_0x1c2f66=_0x386696[_0x2644ca(0x25b)],_0x27d147=_0x386696[_0x2644ca(0x1d0)];tgBot[_0x2644ca(0x277)](_0x386696['id'])[_0x2644ca(0x1ce)](async()=>{const _0x193420=_0x2644ca;if(pid[_0x1c2f66])pid[_0x1c2f66][_0x193420(0x283)]({'function':_0x193420(0x271),'args':null});}),tgBot[_0x2644ca(0x1bc)](_0x2644ca(0x229));});}else{const _0xc63c96=_0x4f858c[0x0][_0x2b2416(0x1cb)];if(pid[_0xc63c96])pid[_0xc63c96][_0x2b2416(0x283)]({'function':_0x2b2416(0x271),'args':null});}}}),tgBot[_0x10a09f(0x1e1)](/\/portfolio/,_0x555019=>{const _0x47719d=_0x10a09f;if(!validateTelegram(_0x555019))return;tgBot['removeListener'](_0x47719d(0x229));const _0x54a67f=getEnabledBots();if(_0x54a67f[_0x47719d(0x184)]==0x0)tgBot[_0x47719d(0x170)](_0x555019[_0x47719d(0x173)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x47719d(0x1a9)](_0x552031=>{telegramError(_0x552031);});else{if(_0x54a67f[_0x47719d(0x184)]>0x1){let _0x5e3ed0=[],_0x24795f=[];const _0x18ae00=_0x54a67f[_0x47719d(0x184)]%0x4==0x0||_0x54a67f[_0x47719d(0x184)]%0x4==0x3||_0x54a67f[_0x47719d(0x184)]%0x3==0x1?0x4:0x3;let _0x938d8b=0x0;_0x54a67f[_0x47719d(0x317)]((_0x352211,_0x523613)=>{const _0x104be3=_0x47719d;if(_0x523613%_0x18ae00==0x0)_0x24795f=[];_0x24795f['push']({'text':'Bot\x20'+_0x352211[_0x104be3(0x1cb)],'callback_data':_0x352211['botID']}),_0x523613%_0x18ae00==0x0&&(_0x5e3ed0[_0x938d8b]=_0x24795f,_0x938d8b++);}),tgBot[_0x47719d(0x170)](_0x555019['chat']['id'],_0x47719d(0x30a),{'reply_markup':{'inline_keyboard':_0x5e3ed0}})[_0x47719d(0x1a9)](_0x1b6d6d=>{telegramError(_0x1b6d6d);}),tgBot['on'](_0x47719d(0x229),async _0x4cbb33=>{const _0x1a06f2=_0x47719d,_0x3d1668=_0x4cbb33[_0x1a06f2(0x25b)],_0xbfe3db=_0x4cbb33[_0x1a06f2(0x1d0)];tgBot[_0x1a06f2(0x277)](_0x4cbb33['id'])[_0x1a06f2(0x1ce)](async()=>{const _0x37f2ba=_0x1a06f2;if(pid[_0x3d1668])pid[_0x3d1668][_0x37f2ba(0x283)]({'function':_0x37f2ba(0x304),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x580234=_0x54a67f[0x0]['botID'];if(pid[_0x580234])pid[_0x580234][_0x47719d(0x283)]({'function':_0x47719d(0x304),'args':null});}}}),tgBot['onText'](/\/update/,async _0x3a4b6c=>{const _0x140979=_0x10a09f;if(!validateTelegram(_0x3a4b6c))return;tgBot[_0x140979(0x1bc)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x140979(0x170)](_0x3a4b6c['chat']['id'],_0x140979(0x1f5))[_0x140979(0x1a9)](_0x97ac4=>{telegramError(_0x97ac4);});else!validInstallation?tgBot[_0x140979(0x170)](_0x3a4b6c[_0x140979(0x173)]['id'],_0x140979(0x27f))[_0x140979(0x1a9)](_0x1d9c68=>{telegramError(_0x1d9c68);}):(tgBot[_0x140979(0x170)](_0x3a4b6c[_0x140979(0x173)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x140979(0x2c7),'callback_data':_0x140979(0x14f)},{'text':'No','callback_data':'no'}]]}})['catch'](_0xc8d985=>{telegramError(_0xc8d985);}),tgBot['on'](_0x140979(0x229),async _0x19976c=>{const _0x1281ba=_0x140979,_0x20e8d0=_0x19976c[_0x1281ba(0x25b)],_0x437485=_0x19976c[_0x1281ba(0x1d0)];tgBot[_0x1281ba(0x277)](_0x19976c['id'])[_0x1281ba(0x1ce)](async()=>{const _0x1a5295=_0x1281ba;_0x20e8d0==_0x1a5295(0x14f)&&(await tgBot[_0x1a5295(0x170)](_0x437485['chat']['id'],_0x1a5295(0x230))[_0x1a5295(0x1a9)](_0x2ac15e=>{telegramError(_0x2ac15e);}),updateBB(_0x1a5295(0x24f))),_0x20e8d0=='no'&&await tgBot[_0x1a5295(0x170)](_0x437485[_0x1a5295(0x173)]['id'],_0x1a5295(0x17f))[_0x1a5295(0x1a9)](_0x119eba=>{telegramError(_0x119eba);});}),tgBot[_0x1281ba(0x1bc)](_0x1281ba(0x229));}));}),tgBot[_0x10a09f(0x1e1)](/\/reinstall/,async _0x17ca04=>{const _0x58de9f=_0x10a09f;if(!validateTelegram(_0x17ca04))return;tgBot[_0x58de9f(0x1bc)]('callback_query'),!validInstallation?tgBot[_0x58de9f(0x170)](_0x17ca04[_0x58de9f(0x173)]['id'],_0x58de9f(0x1af))[_0x58de9f(0x1a9)](_0x3782cb=>{telegramError(_0x3782cb);}):(tgBot[_0x58de9f(0x170)](_0x17ca04[_0x58de9f(0x173)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x58de9f(0x2c7),'callback_data':_0x58de9f(0x14f)},{'text':'No','callback_data':'no'}]]}})[_0x58de9f(0x1a9)](_0x1366bf=>{telegramError(_0x1366bf);}),tgBot['on'](_0x58de9f(0x229),async _0x275305=>{const _0x2a12d9=_0x58de9f,_0x354590=_0x275305[_0x2a12d9(0x25b)],_0x5cfe91=_0x275305['message'];tgBot[_0x2a12d9(0x277)](_0x275305['id'])['then'](async()=>{const _0x5b6875=_0x2a12d9;_0x354590==_0x5b6875(0x14f)&&(await tgBot[_0x5b6875(0x170)](_0x5cfe91['chat']['id'],_0x5b6875(0x26b))['catch'](_0xfdfade=>{telegramError(_0xfdfade);}),updateBB('reinstall')),_0x354590=='no'&&await tgBot[_0x5b6875(0x170)](_0x5cfe91[_0x5b6875(0x173)]['id'],_0x5b6875(0x29d))[_0x5b6875(0x1a9)](_0x2f0805=>{telegramError(_0x2f0805);});}),tgBot[_0x2a12d9(0x1bc)](_0x2a12d9(0x229));}));}),tgBot[_0x10a09f(0x1e1)](/\/toggle/,_0x25ddaa=>{const _0x2f0fb3=_0x10a09f;if(!validateTelegram(_0x25ddaa))return;tgBot[_0x2f0fb3(0x1bc)](_0x2f0fb3(0x229));const _0x371f80=getBotsWithMode();if(_0x371f80['length']==0x0)tgBot['sendMessage'](_0x25ddaa[_0x2f0fb3(0x173)]['id'],_0x2f0fb3(0x185))[_0x2f0fb3(0x1a9)](_0x662eff=>{telegramError(_0x662eff);});else{let _0x597446=[],_0x48c480=[];const _0x38c9d9=0x2;let _0xd4764b=0x0;_0x371f80[_0x2f0fb3(0x317)]((_0x1d906e,_0x147faf)=>{const _0x4aa1b2=_0x2f0fb3;if(_0x147faf%_0x38c9d9==0x0)_0x48c480=[];_0x48c480[_0x4aa1b2(0x169)]({'text':'Bot\x20'+_0x1d906e[_0x4aa1b2(0x1cb)]+'\x20('+_0x1d906e[_0x4aa1b2(0x235)]+')','callback_data':_0x1d906e[_0x4aa1b2(0x1cb)]}),_0x147faf%_0x38c9d9==0x0&&(_0x597446[_0xd4764b]=_0x48c480,_0xd4764b++);}),tgBot[_0x2f0fb3(0x170)](_0x25ddaa['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x597446}})['catch'](_0x5c3fe9=>{telegramError(_0x5c3fe9);}),tgBot['on'](_0x2f0fb3(0x229),async _0x12a518=>{const _0x5532c2=_0x2f0fb3,_0x466ead=_0x12a518[_0x5532c2(0x25b)],_0x87202e=_0x12a518['message'];tgBot[_0x5532c2(0x277)](_0x12a518['id'])[_0x5532c2(0x1ce)](async()=>{const _0x4b082a=_0x5532c2,_0x588394=_0x371f80[_0x4b082a(0x20d)](_0x17d852=>_0x17d852['botID']==_0x466ead),_0x57688d=_0x588394['mode']==_0x4b082a(0x211)?_0x4b082a(0x1d6):_0x4b082a(0x211);tgBot[_0x4b082a(0x170)](_0x87202e[_0x4b082a(0x173)]['id'],_0x4b082a(0x288)+_0x466ead+_0x4b082a(0x2d9)+_0x57688d+'\x20mode')[_0x4b082a(0x1a9)](_0x14a0b4=>{telegramError(_0x14a0b4);}),toggleBotMode(_0x466ead);}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/names/,_0x1fe610=>{const _0x143726=_0x10a09f;if(!validateTelegram(_0x1fe610))return;let _0x2e0396='';config['forEach'](_0x5bb2ff=>{const _0x35d669=_0x42d9;_0x2e0396+=_0x35d669(0x2f8)+_0x5bb2ff['botID']+':\x20'+_0x5bb2ff[_0x35d669(0x16e)]+'\x0a';}),tgBot[_0x143726(0x170)](_0x1fe610['chat']['id'],_0x2e0396,{'parse_mode':_0x143726(0x28d)})['catch'](_0x558db7=>{telegramError(_0x558db7);});}),tgBot[_0x10a09f(0x1e1)](/\/disable/,_0x2a2704=>{const _0x491fea=_0x10a09f;if(!validateTelegram(_0x2a2704))return;tgBot[_0x491fea(0x170)](_0x2a2704[_0x491fea(0x173)]['id'],_0x491fea(0x215))['catch'](_0x4d34e4=>{telegramError(_0x4d34e4);}),updateSetting(_0x491fea(0x236),![]);}),tgBot[_0x10a09f(0x1e1)](/\/help/,_0x1827a7=>{const _0x176aaa=_0x10a09f;if(!validateTelegram(_0x1827a7))return;tgBot['sendMessage'](_0x1827a7[_0x176aaa(0x173)]['id'],_0xf2f1fa)[_0x176aaa(0x1a9)](_0x5a7a80=>{telegramError(_0x5a7a80);});}),tgBot['on'](_0x10a09f(0x256),_0x43c813=>{const _0x242a2f=_0x10a09f;_0x43c813[_0x242a2f(0x284)]()[_0x242a2f(0x174)](_0x242a2f(0x224))&&(logger['full'](_0x242a2f(0x24c)),tgBot[_0x242a2f(0x204)](),tgBot=null,io['to'](_0x242a2f(0x1bd))[_0x242a2f(0x20c)](_0x242a2f(0x24b),'Invalid\x20Telegram\x20token'));}),process['once'](_0x10a09f(0x2e3),()=>{const _0x15a479=_0x10a09f;if(tgBot)tgBot[_0x15a479(0x204)]();process[_0x15a479(0x1f0)](0x1);}),process[_0x10a09f(0x1c8)](_0x10a09f(0x223),()=>{const _0x4551d8=_0x10a09f;if(tgBot)tgBot[_0x4551d8(0x204)]();process[_0x4551d8(0x1f0)](0x1);});}}function disableTelegram(){const _0x7e77c8=_0x1e3031;tgBot&&(tgBot[_0x7e77c8(0x204)](),tgBot=null);}function sendTelegram(_0xb21c5a,_0x538e15){const _0x2a91=_0x1e3031;if(settings[_0x2a91(0x236)]){if(settings[_0x2a91(0x23a)]==_0x2a91(0x250)||(_0x538e15[_0x2a91(0x248)]==_0x2a91(0x2a2)||_0x538e15[_0x2a91(0x248)]==_0x2a91(0x1ac)||_0x538e15[_0x2a91(0x248)]=='success')&&settings['telegramEvents']==_0x2a91(0x1fa)||_0x538e15[_0x2a91(0x248)]==_0x2a91(0x1b7)&&settings[_0x2a91(0x23a)]==_0x2a91(0x1b6)){if(tgBot&&settings[_0x2a91(0x2d2)]){if(_0x538e15[_0x2a91(0x2ab)])tgBot['sendMessage'](settings[_0x2a91(0x2d2)],_0x538e15['botname']+_0x2a91(0x1f2)+_0x538e15['event'])[_0x2a91(0x1a9)](_0x1d2ccd=>{telegramError(_0x1d2ccd);});else tgBot[_0x2a91(0x170)](settings[_0x2a91(0x2d2)],_0x2a91(0x2f8)+_0xb21c5a+'\x20>\x20'+_0x538e15['event'])['catch'](_0x5870ed=>{telegramError(_0x5870ed);});}}}}async function sendTelegramMsg(_0x157660,_0x52276a=_0x1e3031(0x28d)){const _0x6c70d9=_0x1e3031;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await tgBot[_0x6c70d9(0x170)](settings[_0x6c70d9(0x2d2)],_0x157660,{'parse_mode':_0x52276a})[_0x6c70d9(0x1a9)](_0xd63b90=>{telegramError(_0xd63b90);}),!![]):![];}function getDeviceWithIp(_0x50c7b4){return devices['find'](_0x4aca3c=>_0x4aca3c['ip']===_0x50c7b4);}function temporaryAccess2FA(_0x4a1b4f,_0x4395ed){const _0x4345b3=_0x1e3031;let _0x3170f6=new Date(),_0x29e980=![];if(lastIpApproval){if(_0x3170f6-lastIpApproval<0x1388)_0x29e980=!![];}lastIpApproval=new Date();if(_0x29e980)return;tgBot&&settings[_0x4345b3(0x2d2)]&&(tgBot[_0x4345b3(0x1bc)](_0x4345b3(0x229)),tgBot[_0x4345b3(0x170)](settings[_0x4345b3(0x2d2)],_0x4345b3(0x21e)+normalizeIP(_0x4395ed)[_0x4345b3(0x2f3)]+_0x4345b3(0x1dc),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4345b3(0x2ef),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x4345b3(0x2bf),'callback_data':_0x4345b3(0x2bf)}]]}})[_0x4345b3(0x1a9)](_0x362dfa=>{telegramError(_0x362dfa);}),tgBot['on'](_0x4345b3(0x229),async _0x32f961=>{const _0x2f8a2e=_0x4345b3,_0x497bef=_0x32f961[_0x2f8a2e(0x25b)],_0x531e98=_0x32f961[_0x2f8a2e(0x1d0)];tgBot[_0x2f8a2e(0x277)](_0x32f961['id'])[_0x2f8a2e(0x1ce)](async()=>{const _0x497759=_0x2f8a2e;devices[_0x4a1b4f]['telegramIpApproval']={'clientip':_0x4395ed,'timestamp':new Date()[_0x497759(0x1a1)](),'expiry':_0x497bef},_0x497bef!=_0x497759(0x2bf)?(await tgBot[_0x497759(0x170)](_0x531e98['chat']['id'],'Access\x20enabled\x20for\x20'+_0x497bef+_0x497759(0x2fa),{'parse_mode':'HTML'})[_0x497759(0x1a9)](_0x487cfd=>{telegramError(_0x487cfd);}),io['to'](_0x4a1b4f)[_0x497759(0x20c)](_0x497759(0x1ec),{'access':{'allow':![],'reason':_0x497759(0x2c4),'token':null}})):(await tgBot[_0x497759(0x170)](_0x531e98['chat']['id'],_0x497759(0x26d))[_0x497759(0x1a9)](_0x42d9fe=>{telegramError(_0x42d9fe);}),io['to'](_0x4a1b4f)[_0x497759(0x20c)](_0x497759(0x1ec),{'access':{'allow':![],'reason':_0x497759(0x316),'token':null}}));}),tgBot[_0x2f8a2e(0x1bc)](_0x2f8a2e(0x229));}));}function loginAccess2FA(_0x73deeb,_0x503fd6){const _0x343369=_0x1e3031;tgBot&&settings[_0x343369(0x2d2)]&&(tgBot['removeListener'](_0x343369(0x229)),tgBot['sendMessage'](settings[_0x343369(0x2d2)],_0x343369(0x22a)+normalizeIP(_0x503fd6)[_0x343369(0x2f3)]+'</b>\x20?',{'parse_mode':_0x343369(0x28d),'reply_markup':{'inline_keyboard':[[{'text':_0x343369(0x290),'callback_data':loginExpiry},{'text':_0x343369(0x2bf),'callback_data':'reject'}]]}})[_0x343369(0x1a9)](_0x1537dd=>{telegramError(_0x1537dd);}),tgBot['on'](_0x343369(0x229),async _0x2497f7=>{const _0x438ab9=_0x343369,_0x57cf59=_0x2497f7[_0x438ab9(0x25b)],_0x3b11c9=_0x2497f7['message'];tgBot[_0x438ab9(0x277)](_0x2497f7['id'])[_0x438ab9(0x1ce)](async()=>{const _0x84d895=_0x438ab9;devices[_0x73deeb]['telegram2FaApproval']={'clientip':_0x503fd6,'timestamp':new Date()[_0x84d895(0x1a1)](),'expiry':_0x57cf59},_0x57cf59!=_0x84d895(0x2bf)?(await tgBot[_0x84d895(0x170)](_0x3b11c9[_0x84d895(0x173)]['id'],_0x84d895(0x269),{'parse_mode':_0x84d895(0x28d)})[_0x84d895(0x1a9)](_0x19813d=>{telegramError(_0x19813d);}),io['to'](_0x73deeb)[_0x84d895(0x20c)](_0x84d895(0x1ec),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x84d895(0x170)](_0x3b11c9[_0x84d895(0x173)]['id'],_0x84d895(0x1dd))['catch'](_0x24205f=>{telegramError(_0x24205f);}),io['to'](_0x73deeb)[_0x84d895(0x20c)](_0x84d895(0x1ec),{'access':{'allow':![],'reason':_0x84d895(0x265),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x501fa3=_0x1e3031;return dbConfig[_0x501fa3(0x14c)](_0x501fa3(0x171))[_0x501fa3(0x1fb)]('botID')[_0x501fa3(0x246)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x3f8a00=_0x1e3031;return dbConfig[_0x3f8a00(0x14c)]('bots')[_0x3f8a00(0x1fb)](_0x3f8a00(0x1cb))['filter']({'status':'disabled'})[_0x3f8a00(0x19a)]()||[];}function getBotAttributes(_0x19076b){const _0x3e3c12=_0x1e3031;let _0x86c70f={};const _0x4330ba=configpath+_0x3e3c12(0x183)+_0x19076b+_0x3e3c12(0x2e0),_0x595291=fs[_0x3e3c12(0x2bb)](_0x4330ba);if(_0x595291){const _0x2de9ef=fs[_0x3e3c12(0x29b)](_0x4330ba);try{const _0x49a87a=JSON['parse'](_0x2de9ef),_0x24154d=_0x49a87a?_0x49a87a['bot'][0x0]['headless']:![];_0x86c70f[_0x3e3c12(0x235)]=_0x24154d?'auto':'manual',_0x86c70f[_0x3e3c12(0x16e)]=_0x49a87a?_0x49a87a['bot'][0x0][_0x3e3c12(0x16e)]:_0x3e3c12(0x2f8)+_0x19076b;}catch(_0x38d9f0){_0x86c70f['mode']=_0x3e3c12(0x1d6),_0x86c70f[_0x3e3c12(0x16e)]=_0x3e3c12(0x2f8)+_0x19076b;}}else _0x86c70f['mode']='manual',_0x86c70f['botname']=_0x3e3c12(0x2f8)+_0x19076b;return _0x86c70f;}function getBotsWithMode(){const _0x356b60=_0x1e3031,_0x6bf887=dbConfig[_0x356b60(0x14c)](_0x356b60(0x171))[_0x356b60(0x1fb)]('botID')[_0x356b60(0x19a)]()||[];return _0x6bf887[_0x356b60(0x317)](_0x5c1d28=>{const _0x9e350=_0x356b60;let _0x54672f=getBotAttributes(_0x5c1d28['botID']);_0x5c1d28[_0x9e350(0x235)]=_0x54672f[_0x9e350(0x235)];}),_0x6bf887;}function getBotExchanges(){const _0x135cfd=_0x1e3031;let _0x137f0b=[];const _0x534ce4=dbConfig['get'](_0x135cfd(0x171))['sortBy'](_0x135cfd(0x1cb))[_0x135cfd(0x19a)]()||[];_0x534ce4[_0x135cfd(0x317)](_0x2e0bfd=>{const _0x243fe2=_0x135cfd;if(_0x2e0bfd['status']==_0x243fe2(0x1a4)){const _0x2d310a=configpath+_0x243fe2(0x183)+_0x2e0bfd[_0x243fe2(0x1cb)]+'-config.json',_0x3f5a5f=fs['existsSync'](_0x2d310a);let _0x1e347d;if(_0x3f5a5f){const _0x8c97f5=fs['readFileSync'](_0x2d310a);try{const _0x35ee7b=JSON[_0x243fe2(0x205)](_0x8c97f5);_0x1e347d=_0x35ee7b?_0x35ee7b['bot'][0x0][_0x243fe2(0x180)]:null;}catch(_0x430cdc){}}if(_0x1e347d)_0x137f0b['push'](_0x1e347d);}});const _0x57ca28=[...new Set(_0x137f0b)][_0x135cfd(0x1a5)]();return _0x57ca28;}async function initUser(){const _0x278806=_0x1e3031;if(!settings[_0x278806(0x294)]){const _0x542177=uuidRandom();mixpanel['alias'](_0x542177),updateSetting('userid',_0x542177);}}async function initSecure(){const _0x54351e=_0x1e3031;let _0x31711c=getSecure();if(!_0x31711c['hasOwnProperty'](_0x54351e(0x286))){let _0x2f7907=await generateKeys();_0x31711c[_0x54351e(0x17e)]=_0x2f7907['publicKey'],_0x31711c[_0x54351e(0x14e)]=_0x2f7907[_0x54351e(0x14e)],_0x31711c[_0x54351e(0x286)]=crypto[_0x54351e(0x189)](0x20)[_0x54351e(0x284)](_0x54351e(0x2b7));;storeSecure(_0x31711c);}}function getSettings(){const _0x13f11a=_0x1e3031;return dbSettings[_0x13f11a(0x14c)](_0x13f11a(0x2d6))[_0x13f11a(0x19a)]()||{};}function getSecure(){const _0x3e4888=_0x1e3031;return dbSecure['get']('secure')[_0x3e4888(0x19a)]()||{};}function getBlacklist(){const _0x1260f7=_0x1e3031;return dbSecure[_0x1260f7(0x14c)](_0x1260f7(0x1e2))[_0x1260f7(0x19a)]()||[];}function broadcastToBots(_0x11c4b1,_0x38b35e){const _0x489611=_0x1e3031;config[_0x489611(0x317)](_0x4d8e67=>{const _0x442ca4=_0x489611;if(_0x4d8e67['status']==_0x442ca4(0x1a4)&&_0x4d8e67[_0x442ca4(0x2ff)]==_0x442ca4(0x25e)||_0x4d8e67['status']==_0x442ca4(0x22b)&&_0x4d8e67[_0x442ca4(0x2ff)]==_0x442ca4(0x25e)){if(pid[_0x4d8e67[_0x442ca4(0x1cb)]])pid[_0x4d8e67[_0x442ca4(0x1cb)]][_0x442ca4(0x283)]({[_0x11c4b1]:_0x38b35e});}});}function storeSettings(_0x3947ef,_0x40c598=![]){const _0x531236=_0x1e3031;_0x3947ef={...settings,..._0x3947ef};if(_0x40c598&&_0x3947ef[_0x531236(0x148)]!=_0x531236(0x1e5)&&_0x3947ef[_0x531236(0x148)]!=_0x531236(0x210)&&_0x3947ef[_0x531236(0x148)]!=''){const _0x564c84=crypt[_0x531236(0x30b)](secure['privateKey'],_0x3947ef[_0x531236(0x148)])[_0x531236(0x1d0)][_0x531236(0x300)]('@')[0x0],_0x2a36c5=bcrypt[_0x531236(0x2c8)](_0x564c84,saltRounds);_0x3947ef={..._0x3947ef,'bbPassword':_0x2a36c5};}if(_0x40c598&&_0x3947ef[_0x531236(0x182)]!=_0x531236(0x1e5)&&_0x3947ef[_0x531236(0x182)]!='***'&&_0x3947ef[_0x531236(0x182)]!=''){const _0x4b37a9=crypt[_0x531236(0x30b)](secure['privateKey'],_0x3947ef[_0x531236(0x182)])[_0x531236(0x1d0)]['split']('@')[0x0];_0x3947ef={..._0x3947ef,'telegramToken':_0x4b37a9};}const _0xf27a59=_0x3947ef[_0x531236(0x182)]!='************'&&_0x3947ef[_0x531236(0x182)]!=settings['telegramToken']||_0x3947ef[_0x531236(0x172)]!=settings['telegramUsername'],_0x87ea6b=_0x3947ef[_0x531236(0x182)]==''||_0x3947ef[_0x531236(0x172)]=='';if(_0xf27a59)_0x3947ef[_0x531236(0x23a)]=_0x531236(0x250);for(const [_0x14f13c,_0xf6155a]of Object[_0x531236(0x1df)](_0x3947ef)){if(_0x14f13c==_0x531236(0x182)&&_0xf6155a==_0x531236(0x1e5)){_0x3947ef[_0x531236(0x182)]=settings[_0x531236(0x182)];continue;};if(_0x14f13c==_0x531236(0x148)&&_0xf6155a==_0x531236(0x1e5)){_0x3947ef['bbPassword']=settings[_0x531236(0x148)];continue;};dbSettings[_0x531236(0x2bc)](_0x531236(0x1d5)+_0x14f13c,_0xf6155a)[_0x531236(0x2de)]();}settings=_0x3947ef,io['to'](_0x531236(0x1bd))['emit'](_0x531236(0x2d6),cleanSettings()),broadcastToBots(_0x531236(0x266),settings['timeshift']),broadcastToBots(_0x531236(0x279),settings[_0x531236(0x279)]);if(_0xf27a59&&!_0x87ea6b)initTelegram();if(_0xf27a59&&_0x87ea6b)disableTelegram();getAllClients()[_0x531236(0x317)](_0x327b74=>{const _0x3ceb69=_0x531236;getSocket(_0x327b74['id'])[_0x3ceb69(0x20c)](_0x3ceb69(0x1ec),{'access':{'allow':![],'reason':_0x3ceb69(0x2c4),'token':null}});});}function updateSetting(_0x50a121,_0x9ef366){const _0x19ff75=_0x1e3031;dbSettings[_0x19ff75(0x2bc)](_0x19ff75(0x1d5)+_0x50a121,_0x9ef366)[_0x19ff75(0x2de)](),settings=getSettings(),io['to']('botmanager')[_0x19ff75(0x20c)](_0x19ff75(0x2d6),cleanSettings());}function storeSecure(_0x3a1eb4){const _0x65110f=_0x1e3031;dbSecure[_0x65110f(0x14c)](_0x65110f(0x22c))[_0x65110f(0x169)](_0x3a1eb4)[_0x65110f(0x2de)](),secure=_0x3a1eb4;}function addBlacklist(_0xc12db6){const _0x530bf5=_0x1e3031;cleanBlacklist();let _0x30779f;devices[_0xc12db6][_0x530bf5(0x243)]?_0x30779f=Math[_0x530bf5(0x21c)](devices[_0xc12db6][_0x530bf5(0x243)][_0x530bf5(0x218)],loginExpiry):_0x30779f=loginExpiry,dbSecure[_0x530bf5(0x14c)](_0x530bf5(0x1e2))['push']({'expiry':new Date()[_0x530bf5(0x1a1)]()+_0x30779f*0x3c*0x3e8,'token':devices[_0xc12db6]['access'][_0x530bf5(0x264)]})[_0x530bf5(0x2de)](),blacklist=dbSecure[_0x530bf5(0x14c)]('blacklist')[_0x530bf5(0x19a)]();}function cleanBlacklist(){const _0x15a7b5=_0x1e3031;let _0x387657=dbSecure[_0x15a7b5(0x14c)](_0x15a7b5(0x1e2))[_0x15a7b5(0x2d1)]()[_0x15a7b5(0x19a)](),_0x6641b=new Date()[_0x15a7b5(0x1a1)]();_0x387657['forEach'](_0x3e61e8=>{const _0x120954=_0x15a7b5;_0x3e61e8[_0x120954(0x218)]<_0x6641b&&dbSecure[_0x120954(0x14c)](_0x120954(0x1e2))[_0x120954(0x2b6)]({'expiry':_0x3e61e8['expiry']})[_0x120954(0x2de)]();});}function initStates(){const _0x20ce1f=_0x1e3031;let _0x4e6e90=getConfiguration();_0x4e6e90[_0x20ce1f(0x317)](_0x22f5a5=>{const _0x1d6e95=_0x20ce1f;_0x22f5a5[_0x1d6e95(0x2ff)]='stopped';}),storeConfiguration(_0x4e6e90);}function onKeys(){const _0x1a37e6=new RSA();return new Promise(_0x5c8550=>{const _0x3e713a=_0x42d9;_0x1a37e6[_0x3e713a(0x2aa)]()[_0x3e713a(0x1ce)](_0x2aad5d=>{_0x5c8550(_0x2aad5d);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5da043=_0x1e3031;let _0x505edf=getSettings(),_0x1cfc46=![];!_0x505edf['hasOwnProperty']('lastmsgtelegram')&&(_0x505edf[_0x5da043(0x25a)]=0x0,_0x1cfc46=!![]);!_0x505edf['hasOwnProperty'](_0x5da043(0x19b))&&(_0x505edf[_0x5da043(0x19b)]=0x0,_0x1cfc46=!![]);!_0x505edf[_0x5da043(0x261)](_0x5da043(0x275))&&(_0x505edf['latestversion']=_0x5da043(0x19d),_0x1cfc46=!![]);!_0x505edf['hasOwnProperty']('onepagemode')&&(_0x505edf[_0x5da043(0x279)]=![],_0x1cfc46=!![]);if(_0x1cfc46)storeSettings(_0x505edf);}function storeConfiguration(_0x290376){const _0x1af865=_0x1e3031;dbConfig[_0x1af865(0x14c)](_0x1af865(0x171))['remove']()[_0x1af865(0x2de)](),_0x290376['forEach'](_0x549e5b=>{const _0x32184a=_0x1af865;delete _0x549e5b[_0x32184a(0x235)];}),dbConfig[_0x1af865(0x14c)](_0x1af865(0x171))[_0x1af865(0x169)](..._0x290376)[_0x1af865(0x2de)](),config=_0x290376;}function resetPassword(){const _0x43f78d=_0x1e3031;tgBot&&settings[_0x43f78d(0x2d2)]&&(tgBot[_0x43f78d(0x1bc)](_0x43f78d(0x229)),tgBot[_0x43f78d(0x170)](settings['telegramChatId'],_0x43f78d(0x2fd),{'parse_mode':_0x43f78d(0x28d),'reply_markup':{'inline_keyboard':[[{'text':_0x43f78d(0x14f),'callback_data':_0x43f78d(0x14f)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2a9246=>{telegramError(_0x2a9246);}),tgBot['on'](_0x43f78d(0x229),async _0x5701a0=>{const _0x2e9574=_0x43f78d,_0x56778c=_0x5701a0[_0x2e9574(0x25b)],_0x27c8f4=_0x5701a0[_0x2e9574(0x1d0)];tgBot[_0x2e9574(0x277)](_0x5701a0['id'])[_0x2e9574(0x1ce)](async()=>{const _0x3cf4ed=_0x2e9574;if(_0x56778c!='no'){const _0x52aead=0xf,_0x3eea7c=_0x3cf4ed(0x29e),_0x4553c2=Array[_0x3cf4ed(0x30c)](crypto[_0x3cf4ed(0x289)](new Uint32Array(_0x52aead)))[_0x3cf4ed(0x274)](_0x596c11=>_0x3eea7c[_0x596c11%_0x3eea7c[_0x3cf4ed(0x184)]])[_0x3cf4ed(0x2cf)](''),_0x156039=bcrypt[_0x3cf4ed(0x2c8)](_0x4553c2,saltRounds);storeSettings({'bbPassword':_0x156039}),await tgBot[_0x3cf4ed(0x170)](_0x27c8f4['chat']['id'],_0x3cf4ed(0x221)+_0x4553c2,{'parse_mode':_0x3cf4ed(0x28d)})[_0x3cf4ed(0x1a9)](_0x3410d6=>{telegramError(_0x3410d6);});}else await tgBot[_0x3cf4ed(0x170)](_0x27c8f4[_0x3cf4ed(0x173)]['id'],'Password\x20reset\x20rejected')[_0x3cf4ed(0x1a9)](_0x2ada10=>{telegramError(_0x2ada10);});}),tgBot[_0x2e9574(0x1bc)](_0x2e9574(0x229));}));}async function confirmRestore(_0xdea203,_0x50e28c){const _0x3c25f5=_0x1e3031;io['to'](_0x3c25f5(0x1bd))['emit'](_0x3c25f5(0x24b),_0x3c25f5(0x2ae),_0x3c25f5(0x252)),tgBot&&settings[_0x3c25f5(0x2d2)]&&(tgBot[_0x3c25f5(0x1bc)](_0x3c25f5(0x229)),await tgBot[_0x3c25f5(0x170)](settings[_0x3c25f5(0x2d2)],_0x3c25f5(0x1eb),{'parse_mode':_0x3c25f5(0x28d),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x3c25f5(0x14f)},{'text':'no','callback_data':'no'}]]}})[_0x3c25f5(0x1a9)](_0x545db4=>{telegramError(_0x545db4);}),tgBot['on'](_0x3c25f5(0x229),async _0x4937d6=>{const _0x4c1678=_0x3c25f5,_0x266877=_0x4937d6[_0x4c1678(0x25b)],_0x567bdb=_0x4937d6[_0x4c1678(0x1d0)];tgBot[_0x4c1678(0x277)](_0x4937d6['id'])[_0x4c1678(0x1ce)](async()=>{const _0x101a84=_0x4c1678;_0x266877=='yes'?(await tgBot[_0x101a84(0x170)](_0x567bdb[_0x101a84(0x173)]['id'],_0x101a84(0x176),{'parse_mode':'HTML'})[_0x101a84(0x1a9)](_0x3b2dc4=>{telegramError(_0x3b2dc4);}),unzipFile(_0xdea203,_0x50e28c)):(logger['debug'](_0x101a84(0x30f)),await tgBot['sendMessage'](_0x567bdb[_0x101a84(0x173)]['id'],'Restore\x20process\x20aborted')[_0x101a84(0x1a9)](_0x5e363b=>{telegramError(_0x5e363b);}));}),tgBot[_0x4c1678(0x1bc)](_0x4c1678(0x229));}));}function getServerTime(){const _0x1e2b79=_0x1e3031,_0x12800d=new Date();return _0x12800d[_0x1e2b79(0x299)]()+'/'+(_0x12800d[_0x1e2b79(0x1d2)]()+0x1)[_0x1e2b79(0x284)]()[_0x1e2b79(0x2a6)](0x2,'0')+'/'+_0x12800d[_0x1e2b79(0x15c)]()[_0x1e2b79(0x284)]()[_0x1e2b79(0x2a6)](0x2,'0')+'\x20'+_0x12800d[_0x1e2b79(0x2ea)]()[_0x1e2b79(0x284)]()['padStart'](0x2,'0')+':'+_0x12800d[_0x1e2b79(0x1fd)]()[_0x1e2b79(0x284)]()[_0x1e2b79(0x2a6)](0x2,'0')+':'+_0x12800d['getSeconds']()[_0x1e2b79(0x284)]()[_0x1e2b79(0x2a6)](0x2,'0');}function getTimeStamp(){const _0x35e41e=_0x1e3031,_0x2870ba=shiftedTime();return _0x2870ba['getFullYear']()+'/'+(_0x2870ba[_0x35e41e(0x1d2)]()+0x1)[_0x35e41e(0x284)]()['padStart'](0x2,'0')+'/'+_0x2870ba[_0x35e41e(0x15c)]()['toString']()[_0x35e41e(0x2a6)](0x2,'0')+'\x20'+_0x2870ba['getHours']()[_0x35e41e(0x284)]()[_0x35e41e(0x2a6)](0x2,'0')+':'+_0x2870ba[_0x35e41e(0x1fd)]()[_0x35e41e(0x284)]()[_0x35e41e(0x2a6)](0x2,'0')+':'+_0x2870ba[_0x35e41e(0x151)]()[_0x35e41e(0x284)]()[_0x35e41e(0x2a6)](0x2,'0');}function getCleanTimeStamp(){const _0xa34ac=_0x1e3031,_0x4fec8e=shiftedTime();return _0x4fec8e[_0xa34ac(0x299)]()+(_0x4fec8e[_0xa34ac(0x1d2)]()+0x1)[_0xa34ac(0x284)]()[_0xa34ac(0x2a6)](0x2,'0')+_0x4fec8e[_0xa34ac(0x15c)]()[_0xa34ac(0x284)]()[_0xa34ac(0x2a6)](0x2,'0')+'-'+_0x4fec8e[_0xa34ac(0x2ea)]()[_0xa34ac(0x284)]()[_0xa34ac(0x2a6)](0x2,'0')+_0x4fec8e[_0xa34ac(0x1fd)]()[_0xa34ac(0x284)]()[_0xa34ac(0x2a6)](0x2,'0')+_0x4fec8e[_0xa34ac(0x151)]()['toString']()[_0xa34ac(0x2a6)](0x2,'0');}function shiftedTime(){const _0xb090a3=_0x1e3031,_0x217281=new Date();let _0x2e6098=_0x217281;if(settings[_0xb090a3(0x266)]&&settings[_0xb090a3(0x266)]!==0x0)_0x2e6098=fns['add'](_0x217281,{'hours':settings[_0xb090a3(0x266)]});return _0x2e6098;}function startScheduler(){const _0x1757f3=new Date()['getUTCHours'](),_0x1c9484=shiftedTime()['getHours']();_0x1c9484==0x4&&backupConfigFiles();_0x1c9484==0x0&&rotateLogFiles();_0x1757f3%0x6==0x0&&triggerAnalytics();_0x1757f3%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2d27b5){const _0x37bc39=_0x1e3031;logger[_0x37bc39(0x19f)](_0x37bc39(0x2c6)+_0x2d27b5);const _0x50e534=getBotsWithMode();_0x50e534[_0x37bc39(0x184)]>0x0?confirmRestore(configbackuppath,_0x2d27b5):unzipFile(configbackuppath,_0x2d27b5);}async function getBackupFiles(_0x521370=null){const _0x38b1de=_0x1e3031;let _0x5a6bb8=[],_0x9ce936=fs[_0x38b1de(0x28a)](configbackuppath,{'withFileTypes':!![]});_0x9ce936[_0x38b1de(0x1a5)]((_0x4adbbe,_0xc69c12)=>_0x4adbbe[_0x38b1de(0x2b8)]<_0xc69c12['name']?0x1:_0xc69c12[_0x38b1de(0x2b8)]<_0x4adbbe[_0x38b1de(0x2b8)]?-0x1:0x0),_0x9ce936[_0x38b1de(0x317)](_0x5678f0=>{const _0x2734f0=_0x38b1de;if(!_0x5678f0[_0x2734f0(0x1f4)]()&&_0x5678f0[_0x2734f0(0x2b8)][_0x2734f0(0x1cf)](_0x2734f0(0x1c3))&&_0x5678f0['name'][_0x2734f0(0x158)](_0x2734f0(0x26a))){const _0x1625b8=formatDate(fs['statSync'](configbackuppath+_0x5678f0['name'])[_0x2734f0(0x202)]);_0x5a6bb8['push']({'name':_0x5678f0[_0x2734f0(0x2b8)],'mtime':_0x1625b8});}});if(_0x521370)io['to'](_0x521370)[_0x38b1de(0x20c)](_0x38b1de(0x29c),_0x5a6bb8);else return _0x5a6bb8;}async function backupConfigFiles(){const _0x1f0ea4=_0x1e3031;await zipFiles(_0x1f0ea4(0x222));const _0x3c3604=getCleanTimeStamp();fs[_0x1f0ea4(0x1ff)](zippath+_0x1f0ea4(0x219),configbackuppath+(_0x1f0ea4(0x1c3)+_0x3c3604+'.zip'));let _0xa6ec73=fs[_0x1f0ea4(0x28a)](configbackuppath,{'withFileTypes':!![]});_0xa6ec73[_0x1f0ea4(0x1a5)]((_0x241dc1,_0x5710a9)=>_0x241dc1[_0x1f0ea4(0x2b8)]<_0x5710a9['name']?0x1:_0x5710a9[_0x1f0ea4(0x2b8)]<_0x241dc1[_0x1f0ea4(0x2b8)]?-0x1:0x0),_0xa6ec73[_0x1f0ea4(0x184)]>maxBackups&&fs[_0x1f0ea4(0x30d)](configbackuppath+_0xa6ec73[maxBackups][_0x1f0ea4(0x2b8)]);}function rotateLogFiles(){const _0x4be61f=_0x1e3031,_0x4dc30e=fs[_0x4be61f(0x2cd)](logspath+'output-000.log'),_0x77cbc5=_0x4dc30e[_0x4be61f(0x1e8)]/0x400;if(_0x77cbc5>0x64){let _0x295dba=fs[_0x4be61f(0x28a)](logspath,{'withFileTypes':!![]});_0x295dba['sort']((_0x302fc4,_0x5b80f5)=>_0x302fc4[_0x4be61f(0x2b8)]<_0x5b80f5[_0x4be61f(0x2b8)]?0x1:_0x5b80f5[_0x4be61f(0x2b8)]<_0x302fc4[_0x4be61f(0x2b8)]?-0x1:0x0),_0x295dba[_0x4be61f(0x317)](_0x519c14=>{const _0x24e018=_0x4be61f;if(_0x519c14[_0x24e018(0x2b8)]==_0x24e018(0x2f2))fs['copyFileSync'](logspath+_0x519c14['name'],logspath+_0x24e018(0x309));if(_0x519c14['name']==_0x24e018(0x16d))fs[_0x24e018(0x1ff)](logspath+_0x519c14['name'],logspath+_0x24e018(0x2f2));_0x519c14[_0x24e018(0x2b8)]==_0x24e018(0x1a2)&&(fs[_0x24e018(0x1ff)](logspath+_0x519c14['name'],logspath+'output-001.log'),fs[_0x24e018(0x188)](logspath+_0x519c14['name'],''));});}}async function zipFiles(_0x4eb517){const _0x4dbff1=_0x1e3031;let _0x28f807;if(_0x4eb517==_0x4dbff1(0x301))_0x28f807=logspath;if(_0x4eb517=='backup')_0x28f807=configpath;if(_0x4eb517==_0x4dbff1(0x222))_0x28f807=configpath;let _0x3404d6=fs['readdirSync'](_0x28f807,{'withFileTypes':!![]});const _0x170c3e=new require(_0x4dbff1(0x16f))();_0x3404d6[_0x4dbff1(0x317)](_0xe26589=>{const _0x1d8e48=_0x4dbff1;if(!_0xe26589[_0x1d8e48(0x1f4)]()){let _0x3e0832=fs['readFileSync'](_0x28f807+_0xe26589[_0x1d8e48(0x2b8)]);if(_0x4eb517==_0x1d8e48(0x292)){const _0x491e49=/^bot-[0-9]{3}-config.json$/,_0x38f800=_0x491e49[_0x1d8e48(0x2d5)](_0xe26589[_0x1d8e48(0x2b8)]);if(_0x38f800){const _0x148aac=JSON['parse'](_0x3e0832);_0x148aac['bot'][0x0]&&(_0x148aac[_0x1d8e48(0x209)][0x0][_0x1d8e48(0x285)]=_0x1d8e48(0x210),_0x148aac[_0x1d8e48(0x209)][0x0][_0x1d8e48(0x298)]=_0x1d8e48(0x210)),_0x3e0832=JSON[_0x1d8e48(0x1f9)](_0x148aac,null,0x2);}if(_0xe26589[_0x1d8e48(0x2b8)]==_0x1d8e48(0x2da)){const _0x5de892=JSON['parse'](_0x3e0832);if(_0x5de892[_0x1d8e48(0x2d6)][_0x1d8e48(0x1a0)])_0x5de892[_0x1d8e48(0x2d6)][_0x1d8e48(0x1a0)]=![];if(_0x5de892[_0x1d8e48(0x2d6)][_0x1d8e48(0x148)])_0x5de892['settings'][_0x1d8e48(0x148)]='***';if(_0x5de892[_0x1d8e48(0x2d6)][_0x1d8e48(0x182)])_0x5de892[_0x1d8e48(0x2d6)]['telegramToken']=_0x1d8e48(0x210);if(_0x5de892[_0x1d8e48(0x2d6)][_0x1d8e48(0x2d2)])_0x5de892[_0x1d8e48(0x2d6)]['telegramChatId']=null;_0x3e0832=JSON['stringify'](_0x5de892,null,0x2);}if(_0xe26589[_0x1d8e48(0x2b8)]!=_0x1d8e48(0x302))_0x170c3e['file'](_0xe26589[_0x1d8e48(0x2b8)],_0x3e0832);}else _0x170c3e[_0x1d8e48(0x254)](_0xe26589[_0x1d8e48(0x2b8)],_0x3e0832);}});const _0x280a9a=_0x170c3e[_0x4dbff1(0x315)]({'base64':![],'compression':_0x4dbff1(0x1f7)});fs[_0x4dbff1(0x188)](zippath+(_0x4eb517+_0x4dbff1(0x26a)),_0x280a9a,_0x4dbff1(0x1d7));}async function unzipFile(_0x5a0e67,_0x4743ce){const _0x27ff7a=_0x1e3031;fs[_0x27ff7a(0x28a)](configpath,{'withFileTypes':!![]})[_0x27ff7a(0x317)](_0x589da3=>{const _0x1aaf5d=_0x27ff7a;if(!_0x589da3[_0x1aaf5d(0x1f4)]())fs['rmSync'](configpath+_0x589da3[_0x1aaf5d(0x2b8)]);});const _0xf0d98=fs[_0x27ff7a(0x29b)](_0x5a0e67+_0x4743ce,_0x27ff7a(0x1d7)),_0xab9e8f=new require(_0x27ff7a(0x16f))(_0xf0d98,{'base64':![],'checkCRC32':!![]});Object[_0x27ff7a(0x1a8)](_0xab9e8f[_0x27ff7a(0x2f6)])[_0x27ff7a(0x317)](_0xbc4fb8=>{const _0x25d628=_0x27ff7a,_0x43b434=_0xab9e8f[_0x25d628(0x2f6)][_0xbc4fb8];fs[_0x25d628(0x188)](configpath+_0x43b434['name'],_0x43b434[_0x25d628(0x220)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x20bd5b=>{const _0x99a6fc=_0x27ff7a;if(!_0x20bd5b['isDirectory']())fs[_0x99a6fc(0x1ca)](temppath+_0x20bd5b[_0x99a6fc(0x2b8)]);}),logger[_0x27ff7a(0x19f)](_0x27ff7a(0x262)),process[_0x27ff7a(0x283)]({'restore':!![]},_0x4ca92d=>{});}async function getPublicIp(){const _0x5cfc7c=_0x1e3031;try{const _0x30adca=await axios['get'](_0x5cfc7c(0x17b));publicip=_0x30adca[_0x5cfc7c(0x25b)]['ip'];}catch(_0x377c70){}}async function triggerAnalytics(){const _0x193d79=_0x1e3031;if(!publicip)await getPublicIp();const _0x402e33=getBotsWithMode();let _0x143b81=0x0;_0x402e33[_0x193d79(0x317)](_0x32dbba=>{const _0x10aa82=_0x193d79;if(_0x32dbba[_0x10aa82(0x1ec)]===_0x10aa82(0x1a4))_0x143b81++;});const _0x33960d=getBotExchanges();mixpanel['track'](_0x193d79(0x17a),{'distinct_id':settings[_0x193d79(0x294)],'ip':publicip,'version':serverversion,'numbots':_0x402e33[_0x193d79(0x184)],'numbotsenabled':_0x143b81,'exchanges':_0x33960d});}async function getMessages(){const _0xbaab3c=_0x1e3031,_0x4b28d1=_0xbaab3c(0x312),_0x5db108=new GraphQLClient(_0x4b28d1),_0x57d8ca={'authorization':_0xbaab3c(0x260)},_0x555aa4=serverversion['split']('.'),_0x8d0010=_0x555aa4[0x0]+'.'+_0x555aa4[0x1],_0x2c87c3=Math[_0xbaab3c(0x208)](settings[_0xbaab3c(0x25a)],settings[_0xbaab3c(0x19b)]),_0x5c6d76={'last':parseInt(_0x2c87c3),'bbm':_0x8d0010},_0x4c8d77=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4d987e;try{_0x4d987e=await _0x5db108[_0xbaab3c(0x16b)](_0x4c8d77,_0x5c6d76,_0x57d8ca);}catch(_0x34a102){}if(_0x4d987e&&_0x4d987e['messages']){let _0x1b293e=settings[_0xbaab3c(0x25a)];newMessages=[];for(const _0x189e20 of _0x4d987e[_0xbaab3c(0x2be)]){newMessages[_0xbaab3c(0x169)](_0x189e20);if(_0x189e20['bbvNew'])updateSetting('latestversion',_0x189e20[_0xbaab3c(0x287)]);let _0x991265=_0x189e20[_0xbaab3c(0x287)]?serverversion>=_0x189e20['bbvNew']:![];if(!_0x991265&&_0x189e20['number']>_0x1b293e){if(_0x189e20[_0xbaab3c(0x1be)]===_0xbaab3c(0x2e2)||serverversion[_0xbaab3c(0x1cf)](_0x189e20[_0xbaab3c(0x1be)])){let _0x434b1f=''+_0x189e20[_0xbaab3c(0x2b0)]+'\x0a\x0a'+_0x189e20[_0xbaab3c(0x1d0)];const _0x66ed36=await sendTelegramMsg(toTelegramMarkdown(_0x434b1f),'Markdown');if(_0x66ed36)_0x1b293e=_0x189e20[_0xbaab3c(0x2eb)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0xbaab3c(0x25a),_0x1b293e),emitMessages();}}function emitMessages(){const _0x2c5d94=_0x1e3031,_0x6dc4f=settings[_0x2c5d94(0x19b)];let _0x4c0857=[];newMessages['forEach'](_0x50e369=>{const _0x946ee7=_0x2c5d94;_0x50e369[_0x946ee7(0x2eb)]>_0x6dc4f&&_0x4c0857[_0x946ee7(0x169)](_0x50e369);}),_0x4c0857['length']>0x0&&getAllClients()[_0x2c5d94(0x317)](_0x42ac6a=>{const _0x2283cb=_0x2c5d94;getSocket(_0x42ac6a['id'])[_0x2283cb(0x20c)](_0x2283cb(0x1d0),_0x4c0857);});}function confirmMessage(_0x384e47){const _0x3c7067=_0x1e3031;updateSetting(_0x3c7067(0x19b),Number(_0x384e47));}function isNewerVersion(_0x26c432,_0x44db33){const _0x3d469c=_0x1e3031,_0x526810=_0x44db33[_0x3d469c(0x300)]('.'),_0x4cfcb5=_0x26c432['split']('.');for(var _0x3dcd9e=0x0;_0x3dcd9e<_0x4cfcb5[_0x3d469c(0x184)];_0x3dcd9e++){const _0x311d37=~~_0x4cfcb5[_0x3dcd9e],_0x1fc7ec=~~_0x526810[_0x3dcd9e];if(_0x311d37>_0x1fc7ec)return!![];if(_0x311d37<_0x1fc7ec)return![];}return![];}function toTelegramMarkdown(_0x1cc2da){const _0x23863e=_0x1e3031,_0x873e24=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x432314=/\*{2}(.+?)\*{2}/gim;return _0x1cc2da=_0x1cc2da[_0x23863e(0x166)](_0x873e24,'$1_$2_$3')[_0x23863e(0x166)](_0x432314,'*$1*'),_0x1cc2da;}async function validateConfigFile(){const _0x275bab=_0x1e3031,_0x229369=dbConfig['get'](_0x275bab(0x171))[_0x275bab(0x1fb)]('botID')['value']()||[];if(_0x229369[_0x275bab(0x184)]==0x0){let _0x216bc8=0x0,_0x2311bb=[];const _0x5220ce=/^bot-([0-9]{3})-config.json$/,_0x4d81b6=fs[_0x275bab(0x28a)](configpath);_0x4d81b6[_0x275bab(0x317)](_0xb76f95=>{const _0x52de56=_0x275bab,_0x350d34=_0x5220ce['exec'](_0xb76f95);if(_0x350d34){const _0x5451fd=_0x350d34[0x1];let _0x4dd068=getBotAttributes(_0x5451fd);_0x2311bb[_0x52de56(0x169)]({'botID':_0x5451fd,'botname':_0x4dd068[_0x52de56(0x16e)],'status':'disabled','live':_0x52de56(0x282)}),_0x216bc8++;}}),_0x216bc8!=0x0&&(dbConfig['get'](_0x275bab(0x171))[_0x275bab(0x28c)](_0x2311bb)[_0x275bab(0x2de)](),config=_0x2311bb,restoredConfigFile=_0x216bc8);}}async function restoreConfigNotify(_0x2bc45c){const _0x3d84ed=_0x1e3031;let _0x1a933c;if(restoredConfigFile==0x1)_0x1a933c=_0x3d84ed(0x2b1);else _0x1a933c=_0x3d84ed(0x22e);if(_0x2bc45c)io['to'](_0x3d84ed(0x1bd))[_0x3d84ed(0x20c)]('notification',_0x1a933c);else{logger[_0x3d84ed(0x234)](_0x3d84ed(0x313)),logger['simple'](_0x1a933c),logger[_0x3d84ed(0x234)](_0x3d84ed(0x313)),logger[_0x3d84ed(0x234)]('');if(tgBot&&settings[_0x3d84ed(0x2d2)]&&settings['telegramEvents']!=_0x3d84ed(0x1b6))tgBot['sendMessage'](settings[_0x3d84ed(0x2d2)],'Bot\x20Mgr\x20>\x20'+_0x1a933c)[_0x3d84ed(0x1a9)](_0x13602f=>{telegramError(_0x13602f);});}}function validateCredentials(_0x3326ce,_0x197689){const _0x241302=_0x1e3031;if(_0x3326ce[_0x241302(0x268)]==settings[_0x241302(0x1c7)]&&bcrypt['compareSync'](_0x3326ce[_0x241302(0x305)],settings[_0x241302(0x148)])){if(settings[_0x241302(0x303)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x1ac53d=generateLoginToken(_0x197689);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1ac53d};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x163c4b){const _0x407a9=_0x1e3031,_0x3ed971=generateLoginToken(_0x163c4b);return{'allow':!![],'reason':_0x407a9(0x2d0),'token':_0x3ed971};}function validateAccess(_0x5518c7,_0x6125f3,_0x1e7824){const _0x2a70da=_0x1e3031,_0x3c3ad5=_0x1e7824?_0x1e7824:devices[_0x6125f3]['ip'];let _0x2d42e3;const _0x1d6adf=_0x50628f=>{const _0x13ad29=_0x42d9;if(settings[_0x13ad29(0x1a0)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x6125f3)){const _0x1d7f97=generateLoginToken(_0x6125f3);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x1d7f97};}else return{'allow':![],'reason':_0x13ad29(0x2e4),'token':null};}else return _0x2d42e3=validToken(_0x50628f,_0x6125f3),_0x2d42e3[_0x13ad29(0x261)]('success')?{'allow':!![],'reason':_0x13ad29(0x296),'token':_0x50628f}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x2a70da(0x2fb)]){let _0x4496ff=[...settings[_0x2a70da(0x20b)],_0x2a70da(0x1b0),_0x2a70da(0x24d),_0x2a70da(0x2b3)];if(_0x4496ff[_0x2a70da(0x174)](_0x3c3ad5))return _0x1d6adf(_0x5518c7);else{_0x2d42e3=validToken(_0x5518c7,_0x6125f3);if(_0x2d42e3[_0x2a70da(0x261)](_0x2a70da(0x252)))return _0x1d6adf(_0x5518c7);else{if(telegramIpApproved(_0x6125f3)){const _0x58bc5a=generateToken(_0x6125f3);return _0x2d42e3=_0x1d6adf(_0x5518c7),_0x2d42e3[_0x2a70da(0x2a4)]?{'allow':!![],'reason':_0x2a70da(0x20a),'token':_0x58bc5a}:_0x2d42e3;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x2a70da(0x245),'token':null}:{'allow':![],'reason':_0x2a70da(0x1b5),'token':null};}}}else return _0x1d6adf(_0x5518c7);}function timelyDecrypt(_0x2c25e9,_0x4847aa=!![]){const _0x3b3e26=_0x1e3031;if(_0x2c25e9)try{const _0x46a7f3=crypt['decrypt'](secure['privateKey'],_0x2c25e9)['message'],_0x2f982f=_0x46a7f3['split']('@')[0x0],_0x40968a=_0x46a7f3[_0x3b3e26(0x300)]('@')[0x1],_0x36261a=new Date()[_0x3b3e26(0x1a1)]();if(_0x4847aa){if(_0x36261a-_0x40968a<maxSecretAge*0x3e8)return _0x2f982f;else return![];}else return _0x2f982f;}catch(_0x17c729){return![];}else return![];}const validToken=(_0x37c878,_0x529eb8)=>{const _0x33573a=_0x1e3031,_0xdbf45f=devices[_0x529eb8]['ip'];if(!_0x37c878)return{'error':_0x33573a(0x15d)};for(let _0x499a22 of blacklist){if(_0x499a22[_0x33573a(0x264)]==_0x37c878)return{'error':_0x33573a(0x2dd)};}let _0x179848;try{_0x179848=jwt[_0x33573a(0x1d4)](_0x37c878,secure[_0x33573a(0x286)]+_0x529eb8);}catch{return{'error':_0x33573a(0x195)};}if(!_0x179848[_0x33573a(0x261)](_0x33573a(0x2e9))&&!_0x179848[_0x33573a(0x261)](_0x33573a(0x268))||!_0x179848[_0x33573a(0x261)](_0x33573a(0x1b3)))return{'error':_0x33573a(0x2a7)};if(!_0x179848[_0x33573a(0x261)](_0x33573a(0x268))&&_0x179848[_0x33573a(0x261)](_0x33573a(0x2e9))){const {clientip:_0x3908c7}=_0x179848;return _0xdbf45f==_0x3908c7?{'success':_0x33573a(0x2ee)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x179848[_0x33573a(0x261)](_0x33573a(0x268))&&_0x179848[_0x33573a(0x261)](_0x33573a(0x2e9))){const {username:_0x1a19bd,clientip:_0x2147c7}=_0x179848;return settings[_0x33573a(0x1c7)]==_0x1a19bd&&_0xdbf45f==_0x2147c7?{'success':_0x33573a(0x2ee)}:{'error':_0x33573a(0x14d)};}}},generateLoginToken=_0x533424=>{if(_0x533424){const _0x8928c4=devices[_0x533424]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x8928c4},secure['secret']+_0x533424,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5df33b=>{const _0x5d1e62=_0x1e3031;if(_0x5df33b){const _0x43e744=devices[_0x5df33b]['ip'];return jwt[_0x5d1e62(0x1bf)]({'clientip':_0x43e744},secure['secret']+_0x5df33b,{'expiresIn':devices[_0x5df33b]['telegramIpApproval'][_0x5d1e62(0x218)]*0x3c});}else return![];},telegramIpApproved=_0x154586=>{const _0x42e94f=_0x1e3031;let _0x316574=![];return devices[_0x154586][_0x42e94f(0x243)]&&devices[_0x154586][_0x42e94f(0x243)]['expiry']!=_0x42e94f(0x2bf)&&(_0x316574=devices[_0x154586][_0x42e94f(0x243)][_0x42e94f(0x2e9)]==devices[_0x154586]['ip']&&new Date()[_0x42e94f(0x1a1)]()-devices[_0x154586][_0x42e94f(0x243)][_0x42e94f(0x21a)]<devices[_0x154586][_0x42e94f(0x243)]['expiry']*0x3c*0x3e8),_0x316574;},telegram2FaApproved=_0x3d5be4=>{const _0x56fe74=_0x1e3031;let _0x233fb1=![];return devices[_0x3d5be4][_0x56fe74(0x255)]&&devices[_0x3d5be4][_0x56fe74(0x255)][_0x56fe74(0x218)]!='reject'&&(_0x233fb1=devices[_0x3d5be4][_0x56fe74(0x255)][_0x56fe74(0x2e9)]==devices[_0x3d5be4]['ip']&&new Date()[_0x56fe74(0x1a1)]()-devices[_0x3d5be4][_0x56fe74(0x255)][_0x56fe74(0x21a)]<devices[_0x3d5be4][_0x56fe74(0x255)]['expiry']*0x3c*0x3e8),_0x233fb1;},normalizeIP=_0x35761d=>{const _0x56cf00=_0x1e3031;let _0x211a53=null,_0x97182=null;if(ipaddr['isValid'](_0x35761d)){const _0x2cdbd4=ipaddr['parse'](_0x35761d);_0x2cdbd4[_0x56cf00(0x217)]()===_0x56cf00(0x161)?(_0x2cdbd4[_0x56cf00(0x2b5)]()&&(_0x211a53=_0x2cdbd4[_0x56cf00(0x154)]()[_0x56cf00(0x284)]()),_0x97182=_0x2cdbd4['toString']()):(_0x211a53=_0x2cdbd4['toString'](),_0x97182=_0x2cdbd4['toIPv4MappedAddress']()[_0x56cf00(0x284)]());}return{'show':_0x211a53?_0x211a53:_0x97182,'store':_0x97182};};function formatDate(_0x14bc35){const _0xd667da=_0x1e3031;return _0x14bc35['getFullYear']()+'/'+(_0x14bc35[_0xd667da(0x1d2)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x14bc35[_0xd667da(0x15c)]()[_0xd667da(0x284)]()['padStart'](0x2,'0')+'\x20'+_0x14bc35[_0xd667da(0x2ea)]()[_0xd667da(0x284)]()[_0xd667da(0x2a6)](0x2,'0')+':'+_0x14bc35[_0xd667da(0x1fd)]()['toString']()[_0xd667da(0x2a6)](0x2,'0')+':'+_0x14bc35[_0xd667da(0x151)]()['toString']()[_0xd667da(0x2a6)](0x2,'0');}function sleep(_0x11d7ce){return new Promise(_0x1da4b8=>setTimeout(_0x1da4b8,_0x11d7ce));}