const _0x603529=_0x2fa3;(function(_0x3fb835,_0x885f80){const _0x420267=_0x2fa3,_0x4f0c84=_0x3fb835();while(!![]){try{const _0x2363cf=-parseInt(_0x420267(0xec))/0x1*(-parseInt(_0x420267(0x1f8))/0x2)+-parseInt(_0x420267(0x16f))/0x3+parseInt(_0x420267(0xfc))/0x4+parseInt(_0x420267(0x18c))/0x5*(-parseInt(_0x420267(0x177))/0x6)+parseInt(_0x420267(0x149))/0x7+-parseInt(_0x420267(0x169))/0x8+parseInt(_0x420267(0x1a7))/0x9;if(_0x2363cf===_0x885f80)break;else _0x4f0c84['push'](_0x4f0c84['shift']());}catch(_0x3d74ab){_0x4f0c84['push'](_0x4f0c84['shift']());}}}(_0xec94,0xa626b));const _0x4ad45c=function(){let _0x2aea56=!![];return function(_0x456cb0,_0x57016c){const _0xb258b9=_0x2aea56?function(){if(_0x57016c){const _0x129b47=_0x57016c['apply'](_0x456cb0,arguments);return _0x57016c=null,_0x129b47;}}:function(){};return _0x2aea56=![],_0xb258b9;};}(),_0x4d8ee0=_0x4ad45c(this,function(){const _0x187cd8=_0x2fa3;return _0x4d8ee0[_0x187cd8(0x20d)]()[_0x187cd8(0x17a)](_0x187cd8(0x139))[_0x187cd8(0x20d)]()['constructor'](_0x4d8ee0)[_0x187cd8(0x17a)]('(((.+)+)+)+$');});_0x4d8ee0();'use strict';process['env'][_0x603529(0x17f)]=0x1;function _0xec94(){const _0x51b815=['login\x20required','argv','started','Access\x20enabled\x20for\x20','catch','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','ipaddr.js','https://hodlerhacks.com','username','auto','includes','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','storeConfiguration','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','clients','keys','2222392MObMhm','verify','telegramEvents','User\x20has\x20been\x20validated','host','parse','3005664nbOgSa','Invalid\x20authentication\x20token\x20(1)','args','pidRefreshToken','login\x20not\x20required','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','/names\x20-\x20show\x20bot\x20names\x0a','bbPassword','6SJKoPw','reload','hasOwnProperty','search','get-starting-balances','botID','decrypt','port','NTBA_FIX_319','listen','orders','Notifications\x20disabled\x0a','hashSync','restart','deleteHistoryAlerts','telegramIpApproval','getSeconds','accept','deleted\x20Bot\x20','getTime','2FA\x20required','6688970CkVThh','show','disabled','timestamp','unlinkSync','\x20|\x20','Unauthorized\x20attempt\x20to\x20get\x20logs','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','update-bb','toIPv4Address','getDate','lowdb','telegramChatId','\x20>\x20','clientip','settings','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','mkdirSync','getMinutes','then','settings.','UA-192771731-1','2FA\x20login\x20required','blacklist','bot','idling\x20bot\x20\x20\x20|\x20Bot\x20','16287651kijjlo','store-settings','padStart','uuid','sendFile','f2aRequired','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','build2','privateKey','temporary\x20access\x20timeout','allow','Invalid\x20username\x20or\x20IP\x20address','cloneDeep','getHours','temporary\x20access\x20not\x20allowed','store-headless','storeHeadless','all','logged\x20out','<b>Telegram\x20Bot\x20Status:</b>\x0a','/enable\x20-\x20enable\x20notifications\x0a','node-telegram-bot-api','All','Ok,\x20will\x20send\x20order\x20notifications\x20only','1000','bb/','telegramToken','************','-config.json','match','toggleBotMode','update-bot','Unauthorized\x20attempt\x20to\x20update\x20bot','/disable\x20-\x20disable\x20notifications\x0a','No\x20bots\x20running\x20right\x20now','Bot\x20','connection','kill','child_process','disconnect','Unauthorized\x20attempt\x20to\x20update\x20settings','isDirectory','reject','filter','new-disabled','find','secure','slice','/:bot/configuration','error','Invalid\x20Telegram\x20token','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','notification','add-bot','sortBy','2FA','You\x20can\x20use\x20the\x20following\x20commands:\x0a','telegramUsername','reason','log','HTML','Unauthorized\x20attempt\x20to\x20log\x20out','emit','randomBytes','timeshift','placeOrder','getStartingBalances','delete-bot','removeAllListeners','sha256','analytics','2FA\x20login\x20token\x20generated','from','delete-alerts','RSA-OAEP','2FA\x20login\x20rejected','15\x20min','kind','token','static','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','98yoCxcx','entries','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','event','stop','All\x20bots','access','getUTCHours','Unauthorized\x20attempt\x20to\x20store\x20configuration','backup/','stopPolling','getFullYear','disabled\x20Bot\x20','Balance\x20Bot','\x20only\x0a','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','server','Login\x20accepted','sign','/help\x20-\x20show\x20available\x20commands\x0a','isValid','toString','restarting\x20Bot\x20','Alerts','mode','telegramEnabled','password','</b>\x20?','All\x20bots\x20running\x20right\x20now','Notifications\x20disabled','Invalid\x20authentication\x20token\x20(2)','auth','write','test','-----------------------------------------------------------------------------------','login','bots','starting\x20bot\x20|\x20Bot\x20','use','default','running','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','set','telegram','Unauthorized\x20attempt\x20to\x20delete\x20alerts','copyFileSync','login\x20token\x20generated','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','store-configuration','Unauthorized\x20attempt\x20to\x20get\x20portfolio','yargs/yargs','\x20mode','remove','publicKey','SIGINT','get','Temporary\x20access\x20rejected','chat','error\x20while\x20deleting\x20config\x20files:\x20','forEach','push','crypto','temporaryAccessAllowed','/:bot/performance','live','place-order','bot-','readdirSync','Notifications\x20types:\x20','send','yes','ipc','index.html','5153xSqxpK','whitelistEnabled','length','jsonwebtoken','inherit','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','toggle-bot-mode','headers',',\x20must\x20be\x20a\x204\x20digit\x20number','onText','temporary\x20token\x20generated','hybrid-crypto-js','function','loginRequired','Notifications\x20enabled',':\x20Bot\x20Mgr\x20>\x20','4870092TQMoQH','3000','version.json','assign','botmanager','login\x20token\x20valid','/off\x20-\x20stop\x20bot(s)\x0a','::1','/:bot/support','cancel-loading','-results.json','apiKey','sendMessage','Invalid\x20IP\x20address','isIPv4MappedAddress','Bot\x20Mgr\x20>\x20','secret','answerCallbackQuery','bb-settings.json','whitelist','Notifications\x20enabled\x0a','bot.js','conn','express','map','logout','/:bot/history','telegram2FaApproval','connected','5\x20min','Password\x20reset\x20rejected','expiry','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','exp','botname','updatebotmanager','invalid\x20credentials','pidExpireLogin','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','Crypt','status','404\x20Not\x20Found','data','value','stopped','type','http','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','page','add','\x20to\x20','build','/:bot/coins','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Error:\x20Invalid\x20argument\x20','manual','temporary\x20access\x20rejected','bbUsername','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','(((.+)+)+)+$','get-portfolio','enabled','bb-config.json','split','new','success','headless','defaults','encryptedUuid','handshake','callback_query','/on\x20-\x20start\x20bot(s)\x0a','name','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','127939DCeGqe','removeListener','alerts','fork','existsSync','/:bot','polling_error','cancelLoading','exit','RSA','user','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','join','<b>Balance\x20Bot\x20Status:</b>\x0a','message','writeFileSync'];_0xec94=function(){return _0x51b815;};return _0xec94();}const childProcess=require(_0x603529(0x1cd)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require('date-fns'),low=require(_0x603529(0x197)),path=require('path'),crypto=require(_0x603529(0x235)),Crypt=require(_0x603529(0xf7))[_0x603529(0x124)],RSA=require(_0x603529(0xf7))[_0x603529(0x152)],bcrypt=require('bcryptjs'),jwt=require(_0x603529(0xef)),analyticsLib=require(_0x603529(0x1ed))[_0x603529(0x21f)],googleAnalytics=require('@analytics/google-analytics')[_0x603529(0x21f)],ipaddr=require(_0x603529(0x15f)),argv=require(_0x603529(0x22a))(process[_0x603529(0x15a)][_0x603529(0x1d6)](0x2))[_0x603529(0x15a)],PORT=argv[_0x603529(0x17e)]||_0x603529(0xfd),pattern=/^[0-9]{2,4}$/;!pattern[_0x603529(0x219)](PORT)&&(console['log'](_0x603529(0x134)+PORT+_0x603529(0xf4)),process['exit'](0x1));const HOST=argv[_0x603529(0x16d)]||null,userID=argv[_0x603529(0x153)]||'';let bbpath=_0x603529(0x1c0),bbpath2='';const botfile=_0x603529(0x111),configfile=_0x603529(0x13c),settingsfile=_0x603529(0x10e),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x603529(0x14d)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x603529(0x167)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x603529(0x201);!fs[_0x603529(0x14d)](configpath)&&fs[_0x603529(0x19e)](configpath);!fs[_0x603529(0x14d)](configbackuppath)&&fs[_0x603529(0x19e)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x603529(0x141)]({'bots':[]})[_0x603529(0x218)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x603529(0x141)]({'settings':{'timeshift':0x0}})[_0x603529(0x218)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x603529(0x141)]({'secure':{},'blacklist':[]})[_0x603529(0x218)]();let crypt=new Crypt({'md':_0x603529(0x1ec),'rsaStandard':_0x603529(0x1f1)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x603529(0xfe))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x603529(0x113)),app=express(),http=require(_0x603529(0x12b))['createServer'](app);app[_0x603529(0x21e)](express['static'](path[_0x603529(0x155)](__dirname,bbpath2,'build2'))),app[_0x603529(0x21e)](express[_0x603529(0x1f6)](path[_0x603529(0x155)](__dirname,bbpath2,_0x603529(0x130)))),app['get']('/',function(_0x38994e,_0x3271dc){const _0x397e25=_0x603529;_0x3271dc[_0x397e25(0x1ab)](path[_0x397e25(0x155)](__dirname,bbpath2,_0x397e25(0x1ae),_0x397e25(0xeb)));}),app[_0x603529(0x22f)](_0x603529(0x14e),function(_0x29ac1c,_0x3995d3){const _0x1090ae=_0x603529;_0x3995d3[_0x1090ae(0x1ab)](path[_0x1090ae(0x155)](__dirname,bbpath2,_0x1090ae(0x130),_0x1090ae(0xeb)));}),app['get']('/:bot/portfolio',(_0x12a8b,_0x3c02af)=>{const _0x32a611=_0x603529;_0x3c02af[_0x32a611(0x1ab)](path[_0x32a611(0x155)](__dirname,bbpath2,_0x32a611(0x130),'index.html'));}),app['get'](_0x603529(0x237),(_0x5b8050,_0x2a8160)=>{const _0x308706=_0x603529;_0x2a8160[_0x308706(0x1ab)](path[_0x308706(0x155)](__dirname,bbpath2,_0x308706(0x130),_0x308706(0xeb)));}),app[_0x603529(0x22f)](_0x603529(0x131),(_0x45a34a,_0x29f455)=>{const _0x192d7f=_0x603529;_0x29f455[_0x192d7f(0x1ab)](path[_0x192d7f(0x155)](__dirname,bbpath2,'build',_0x192d7f(0xeb)));}),app[_0x603529(0x22f)](_0x603529(0x116),(_0x208ff,_0x1c9e34)=>{const _0x24a6f5=_0x603529;_0x1c9e34[_0x24a6f5(0x1ab)](path[_0x24a6f5(0x155)](__dirname,bbpath2,_0x24a6f5(0x130),_0x24a6f5(0xeb)));}),app[_0x603529(0x22f)](_0x603529(0x1d7),(_0x1f8e30,_0xaf36b9)=>{const _0x3c6711=_0x603529;_0xaf36b9[_0x3c6711(0x1ab)](path[_0x3c6711(0x155)](__dirname,bbpath2,_0x3c6711(0x130),_0x3c6711(0xeb)));}),app[_0x603529(0x22f)](_0x603529(0x104),(_0xf79f6b,_0x14a9e5)=>{const _0x3dd2c4=_0x603529;_0x14a9e5[_0x3dd2c4(0x1ab)](path[_0x3dd2c4(0x155)](__dirname,bbpath2,'build',_0x3dd2c4(0xeb)));});if(HOST)http[_0x603529(0x180)](PORT,HOST);else http[_0x603529(0x180)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x603529(0x205),'plugins':[googleAnalytics({'trackingId':_0x603529(0x1a2)})]}),TelegramBot=require(_0x603529(0x1bc));let tgBot;if(settings[_0x603529(0x1c1)]&&settings[_0x603529(0x1c1)]!=''&&settings['telegramUsername']&&settings[_0x603529(0x1e0)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x1c8470=_0x603529;console['log'](''),console['log'](_0x1c8470(0x21a)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x1c8470(0x1e2)](_0x1c8470(0x21a));if(config[_0x1c8470(0xee)]!=0x0)config[_0x1c8470(0x233)](_0x45b65f=>{const _0x55c804=_0x1c8470;if(_0x45b65f[_0x55c804(0x125)]==_0x55c804(0x13b)||_0x45b65f[_0x55c804(0x125)]=='new')logging(_0x55c804(0x21d)+_0x45b65f['botID']+_0x55c804(0x191)+_0x45b65f['botname']),startBot([_0x45b65f[_0x55c804(0x17c)],userID],{'cwd':bbpath},function(_0x4680ab){if(_0x4680ab)logging(_0x4680ab);});else(_0x45b65f['status']==_0x55c804(0x18e)||_0x45b65f[_0x55c804(0x125)]==_0x55c804(0x1d3))&&logging(_0x55c804(0x1a6)+_0x45b65f['botID']+_0x55c804(0x191)+_0x45b65f[_0x55c804(0x11e)]);});else!newBot&&console['log'](_0x1c8470(0x1ad));if(newBot)addBot();console[_0x1c8470(0x1e2)](_0x1c8470(0x21a)),console['log']('');}function startSocket(){const _0x1d78b3=_0x603529;io['on'](_0x1d78b3(0x1cb),_0x5a280d=>{const _0x88a6ee=_0x1d78b3;let _0x1b7550,_0x5b2488,_0x3cc666,_0x4be7e4,_0x51cb47;const _0x432b86=_0x5a280d[_0x88a6ee(0x143)][_0x88a6ee(0xf3)]['referer'];_0x5b2488=_0x432b86[_0x88a6ee(0x1c4)](/bot[0-9]{3}/);if(_0x5b2488)_0x3cc666=_0x5b2488[0x0]['match'](/[0-9]{3}/);if(_0x3cc666)_0x1b7550=_0x3cc666[0x0];else _0x1b7550=_0x88a6ee(0x100);const _0x13580c=_0x5a280d[_0x88a6ee(0x143)][_0x88a6ee(0x217)][_0x88a6ee(0x142)];if(!_0x13580c)_0x5a280d[_0x88a6ee(0x1e5)](_0x88a6ee(0x125),{'publicKey':secure[_0x88a6ee(0x22d)]});else{_0x4be7e4=timelyDecrypt(_0x13580c,![]);if(!_0x4be7e4)_0x5a280d[_0x88a6ee(0x1e5)](_0x88a6ee(0x125),{'publicKey':secure[_0x88a6ee(0x22d)]});else{_0x51cb47=normalizeIP(_0x5a280d[_0x88a6ee(0x112)]['remoteAddress'])['store'];if(!devices[_0x4be7e4])devices[_0x4be7e4]={'uuid':_0x4be7e4,'access':{'token':null}};devices[_0x4be7e4]['ip']=_0x51cb47;const _0x2f1745=addClient(_0x5a280d['id'],_0x4be7e4,_0x1b7550);setAccess(_0x2f1745),_0x5a280d['on'](_0x88a6ee(0x21b),_0x32a40e=>{const _0x4a6ded=_0x88a6ee,_0x1818b6=timelyDecrypt(_0x32a40e[_0x4a6ded(0x212)]);if(_0x1818b6){_0x32a40e={'username':_0x32a40e[_0x4a6ded(0x161)],'password':_0x1818b6},devices[_0x4be7e4][_0x4a6ded(0x1fe)]=validateCredentials(_0x32a40e,_0x4be7e4);if(devices[_0x4be7e4][_0x4a6ded(0x1fe)]['allow']==![]&&devices[_0x4be7e4][_0x4a6ded(0x1fe)][_0x4a6ded(0x1e1)]==_0x4a6ded(0x1a3))_0x5a280d['emit']('status',{'access':devices[_0x4be7e4][_0x4a6ded(0x1fe)]}),loginAccess2FA(_0x4be7e4,_0x51cb47);else{if(devices[_0x4be7e4][_0x4a6ded(0x1fe)][_0x4a6ded(0x1b1)]==![]&&devices[_0x4be7e4][_0x4a6ded(0x1fe)][_0x4a6ded(0x1e1)]=='invalid\x20credentials')_0x5a280d['emit'](_0x4a6ded(0x125),{'access':devices[_0x4be7e4][_0x4a6ded(0x1fe)]});else devices[_0x4be7e4][_0x4a6ded(0x1fe)][_0x4a6ded(0x1b1)]&&devices[_0x4be7e4][_0x4a6ded(0x1fe)][_0x4a6ded(0x1e1)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x4be7e4)['forEach'](_0x3b6170=>{setAccess(_0x3b6170);}),setTokenRefresh(_0x4be7e4),setSessionTimeout('login',_0x4be7e4));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x5a280d['on']('reset-password',()=>{resetPassword();}),_0x5a280d['on'](_0x88a6ee(0x1ce),_0x1ce1f1=>{removeClient(_0x5a280d['id']);});}}});}function initClient(_0x47b259){const _0x386fca=_0x603529;if(_0x47b259!=_0x386fca(0x100)&&config[_0x386fca(0x107)]!=''){if(pid[_0x47b259])pid[_0x47b259][_0x386fca(0x23d)]({'function':'initclient','args':null});}}function getSocket(_0x41561e){const _0x2335ef=_0x603529;return io['sockets']['sockets'][_0x2335ef(0x22f)](_0x41561e);}function setAccess(_0x519532){const _0x3be355=_0x603529,_0x144931=getSocket(_0x519532['id']),_0x26492d=_0x519532[_0x3be355(0x1aa)],_0x16adee=_0x519532['bot'];devices[_0x26492d][_0x3be355(0x1fe)]=validateAccess(devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1f5)],_0x26492d),_0x144931[_0x3be355(0x155)](_0x26492d);if(devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1b1)]){_0x144931['join'](_0x16adee);if(_0x16adee=='botmanager')initializeSocketBotManager(_0x144931);else initializeSocketBot(_0x144931);initClient(_0x16adee);}devices[_0x26492d]['access']['token']&&devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1e1)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x3be355(0x1de),_0x26492d),devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1f5)]&&devices[_0x26492d]['access'][_0x3be355(0x1e1)]==_0x3be355(0x1ee)&&setSessionTimeout('login',_0x26492d),_0x144931[_0x3be355(0x1e5)](_0x3be355(0x125),{'status':_0x519532[_0x3be355(0x208)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x26492d][_0x3be355(0x1fe)],'externalip':devices[_0x26492d]['ip'],'publicKey':secure[_0x3be355(0x22d)],'validInstallation':validInstallation}),devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1b1)]==![]&&devices[_0x26492d][_0x3be355(0x1fe)][_0x3be355(0x1e1)]==_0x3be355(0x18b)&&temporaryAccess2FA(_0x26492d,devices[_0x26492d]['ip']);}function setSessionTimeout(_0xe32cb3,_0x4572e4){const _0x18d7d8=_0x603529;let _0x2930de;if(_0xe32cb3==_0x18d7d8(0x21b))_0x2930de=loginExpiry*0x3c*0x3e8;else _0x2930de=devices[_0x4572e4][_0x18d7d8(0x186)][_0x18d7d8(0x11b)]*0x3c*0x3e8-(new Date()[_0x18d7d8(0x18a)]()-devices[_0x4572e4][_0x18d7d8(0x186)]['timestamp']);if(devices[_0x4572e4][_0x18d7d8(0x121)])clearTimeout(devices[_0x4572e4][_0x18d7d8(0x121)]);devices[_0x4572e4][_0x18d7d8(0x121)]=setTimeout(()=>{const _0x2dd74a=_0x18d7d8;if(devices[_0x4572e4][_0x2dd74a(0x172)])clearTimeout(devices[_0x4572e4]['pidRefreshToken']);removeSocketListeners(_0x4572e4),addBlacklist(_0x4572e4),devices[_0x4572e4][_0x2dd74a(0x186)]=null,devices[_0x4572e4][_0x2dd74a(0x117)]=null,devices[_0x4572e4][_0x2dd74a(0x1fe)][_0x2dd74a(0x1f5)]=null,devices[_0x4572e4][_0x2dd74a(0x1fe)]=validateAccess(devices[_0x4572e4][_0x2dd74a(0x1fe)][_0x2dd74a(0x1f5)],_0x4572e4),!(devices[_0x4572e4][_0x2dd74a(0x1fe)][_0x2dd74a(0x1b1)]&&devices[_0x4572e4][_0x2dd74a(0x1fe)][_0x2dd74a(0x1e1)]=='login\x20not\x20required')&&(_0xe32cb3=='login'?io['to'](_0x4572e4)[_0x2dd74a(0x1e5)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4572e4)[_0x2dd74a(0x1e5)](_0x2dd74a(0x125),{'access':{'allow':![],'reason':_0x2dd74a(0x1b0),'token':null}})),devices[_0x4572e4][_0x2dd74a(0x1fe)][_0x2dd74a(0x1f5)]=null;},_0x2930de);}function setTokenRefresh(_0x5bac61){const _0x1cdc45=_0x603529;if(devices[_0x5bac61][_0x1cdc45(0x172)])clearTimeout(devices[_0x5bac61]['pidRefreshToken']);devices[_0x5bac61]['pidRefreshToken']=setTimeout(()=>{const _0x1d0f95=_0x1cdc45;getClientsWithUuid(_0x5bac61)[_0x1d0f95(0xee)]!=0x0?(devices[_0x5bac61][_0x1d0f95(0x1fe)]=refreshToken(_0x5bac61),io['to'](_0x5bac61)[_0x1d0f95(0x1e5)](_0x1d0f95(0x125),{'status':_0x1d0f95(0x118),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5bac61][_0x1d0f95(0x1fe)],'externalip':devices[_0x5bac61]['ip'],'publicKey':secure[_0x1d0f95(0x22d)],'validInstallation':validInstallation}),setTokenRefresh(_0x5bac61)):clearTimeout(devices[_0x5bac61]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x55187b){const _0x3adfa4=_0x603529,_0x257130=getClient(_0x55187b['id'])[_0x3adfa4(0x1aa)];_0x55187b[_0x3adfa4(0x1e5)](_0x3adfa4(0x21c),config),_0x55187b[_0x3adfa4(0x1e5)](_0x3adfa4(0x19b),cleanSettings()),_0x55187b['on'](_0x3adfa4(0x1dc),_0x1ba348=>{const _0x53bc5c=_0x3adfa4;if(validateAccess(_0x1ba348,_0x257130)[_0x53bc5c(0x1b1)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x55187b['on'](_0x3adfa4(0x1c6),(_0x17216d,_0x2bef01)=>{const _0x18e9b6=_0x3adfa4;if(validateAccess(_0x2bef01,_0x257130)[_0x18e9b6(0x1b1)])toggleBot(_0x17216d[_0x18e9b6(0x17c)],_0x17216d[_0x18e9b6(0x125)],_0x17216d[_0x18e9b6(0x238)]);else logging(_0x18e9b6(0x1c7));}),_0x55187b['on'](_0x3adfa4(0xf2),(_0x44ff6e,_0x251bd6)=>{const _0x24b1be=_0x3adfa4;if(validateAccess(_0x251bd6,_0x257130)[_0x24b1be(0x1b1)])toggleBotMode(_0x44ff6e);else logging(_0x24b1be(0x1c7));}),_0x55187b['on'](_0x3adfa4(0x1ea),(_0x1cfa46,_0x35db0f)=>{const _0x1136d6=_0x3adfa4;if(validateAccess(_0x35db0f,_0x257130)[_0x1136d6(0x1b1)])deleteBot(_0x1cfa46);else logging(_0x1136d6(0x123));}),_0x55187b['on'](_0x3adfa4(0x1a8),(_0x3cd2e8,_0xebf08e)=>{const _0xa135a9=_0x3adfa4;if(validateAccess(_0xebf08e,_0x257130)['allow'])storeSettings(_0x3cd2e8,!![]);else logging(_0xa135a9(0x1cf));}),_0x55187b['on'](_0x3adfa4(0x194),_0x500b78=>{const _0x3cfe9e=_0x3adfa4;if(validateAccess(_0x500b78,_0x257130)['allow'])updateBB();else logging(_0x3cfe9e(0x1f7));}),_0x55187b['on']('logout',_0x545ad0=>{const _0xb35bb2=_0x3adfa4;if(validateAccess(_0x545ad0,_0x257130)['allow']){if(devices[_0x257130][_0xb35bb2(0x172)])clearTimeout(devices[_0x257130]['pidRefreshToken']);if(devices[_0x257130][_0xb35bb2(0x121)])clearTimeout(devices[_0x257130][_0xb35bb2(0x121)]);removeSocketListeners(getClient(_0x55187b['id'])['uuid']),addBlacklist(_0x257130),devices[_0x257130]['telegramIpApproval']=null,devices[_0x257130][_0xb35bb2(0x117)]=null,devices[_0x257130][_0xb35bb2(0x1fe)][_0xb35bb2(0x1f5)]=null,io['to'](getClient(_0x55187b['id'])[_0xb35bb2(0x1aa)])[_0xb35bb2(0x1e5)](_0xb35bb2(0x125),{'access':{'allow':![],'reason':_0xb35bb2(0x1b9),'token':null}});}else logging(_0xb35bb2(0x1e4));});}function initializeSocketBot(_0x5c89f3){const _0x31b8f4=_0x603529,_0x5f2e35=getClient(_0x5c89f3['id'])[_0x31b8f4(0x1a5)],_0x3a6b2a=getClient(_0x5c89f3['id'])[_0x31b8f4(0x1aa)];_0x5c89f3['on']('get-logs',(_0xea3f27,_0x571af7)=>{const _0x218df9=_0x31b8f4;if(validateAccess(_0x571af7,_0x3a6b2a)[_0x218df9(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35][_0x218df9(0x23d)]({'function':'emitHistory','args':_0xea3f27});}else logging(_0x218df9(0x192));}),_0x5c89f3['on'](_0x31b8f4(0x1f0),(_0x2bbf4c,_0x31fa50)=>{const _0x151862=_0x31b8f4;if(validateAccess(_0x31fa50,_0x3a6b2a)[_0x151862(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35][_0x151862(0x23d)]({'function':_0x151862(0x185),'args':_0x2bbf4c});}else logging(_0x151862(0x224));}),_0x5c89f3['on'](_0x31b8f4(0x13a),(_0x611540,_0x5070b5)=>{const _0x33fe7f=_0x31b8f4;if(validateAccess(_0x5070b5,_0x3a6b2a)['allow']){if(pid[_0x5f2e35])pid[_0x5f2e35]['send']({'function':'getPortfolio','args':_0x611540});}else logging(_0x33fe7f(0x229));}),_0x5c89f3['on'](_0x31b8f4(0x228),(_0x50f4a5,_0xcb279)=>{const _0x45ccb9=_0x31b8f4;if(validateAccess(_0xcb279,_0x3a6b2a)[_0x45ccb9(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35]['send']({'function':_0x45ccb9(0x165),'args':_0x50f4a5});}else logging(_0x45ccb9(0x200));}),_0x5c89f3['on'](_0x31b8f4(0x1b6),(_0x431093,_0x1a8da5)=>{const _0x134cc4=_0x31b8f4;if(validateAccess(_0x1a8da5,_0x3a6b2a)['allow']){if(pid[_0x5f2e35])pid[_0x5f2e35][_0x134cc4(0x23d)]({'function':_0x134cc4(0x1b7),'args':_0x431093});}else logging(_0x134cc4(0xf1));}),_0x5c89f3['on'](_0x31b8f4(0x17b),_0x23300e=>{const _0x2ed123=_0x31b8f4;if(validateAccess(_0x23300e,_0x3a6b2a)[_0x2ed123(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35][_0x2ed123(0x23d)]({'function':_0x2ed123(0x1e9),'args':null});}else logging(_0x2ed123(0x19d));}),_0x5c89f3['on'](_0x31b8f4(0x239),(_0x383a99,_0x56b4d1)=>{const _0x588af5=_0x31b8f4;if(validateAccess(_0x56b4d1,_0x3a6b2a)[_0x588af5(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35][_0x588af5(0x23d)]({'function':_0x588af5(0x1e8),'args':_0x383a99});}else logging(_0x588af5(0x164));}),_0x5c89f3['on'](_0x31b8f4(0x105),_0x3c80d0=>{const _0x435e69=_0x31b8f4;if(validateAccess(_0x3c80d0,_0x3a6b2a)[_0x435e69(0x1b1)]){if(pid[_0x5f2e35])pid[_0x5f2e35]['send']({'function':_0x435e69(0x150),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5c89f3['on'](_0x31b8f4(0x115),_0x3cda8e=>{const _0x314e60=_0x31b8f4;if(validateAccess(_0x3cda8e,_0x3a6b2a)[_0x314e60(0x1b1)]){if(devices[_0x3a6b2a]['pidRefreshToken'])clearTimeout(devices[_0x3a6b2a][_0x314e60(0x172)]);if(devices[_0x3a6b2a][_0x314e60(0x121)])clearTimeout(devices[_0x3a6b2a]['pidExpireLogin']);removeSocketListeners(getClient(_0x5c89f3['id'])['uuid']),addBlacklist(_0x3a6b2a),devices[_0x3a6b2a][_0x314e60(0x186)]=null,devices[_0x3a6b2a]['telegram2FaApproval']=null,devices[_0x3a6b2a][_0x314e60(0x1fe)]['token']=null,io['to'](getClient(_0x5c89f3['id'])[_0x314e60(0x1aa)])[_0x314e60(0x1e5)](_0x314e60(0x125),{'access':{'allow':![],'reason':_0x314e60(0x1b9),'token':null}});}else logging(_0x314e60(0x1e4));});}function removeSocketListeners(_0x218ba4){const _0x3a5b25=_0x603529;getClientsWithUuid(_0x218ba4)[_0x3a5b25(0x233)](_0x29ef68=>{const _0x27a187=_0x3a5b25;getSocket(_0x29ef68['id'])[_0x27a187(0x1eb)]();});}function cleanSettings(){const _0x2e3d92=_0x603529;let _0x2caff1=settings;return settings[_0x2e3d92(0x1c1)]&&settings[_0x2e3d92(0x1c1)]!=''&&(_0x2caff1={..._0x2caff1,'telegramToken':_0x2e3d92(0x1c2)}),settings[_0x2e3d92(0x176)]&&settings['bbPassword']!=''&&(_0x2caff1={..._0x2caff1,'bbPassword':_0x2e3d92(0x1c2)}),_0x2caff1;}function updateBB(){const _0x16b403=_0x603529;installingUpdate=!![],config[_0x16b403(0x233)](_0x12e216=>{const _0x4ec76a=_0x16b403;restartBot(_0x12e216[_0x4ec76a(0x17c)]);}),process[_0x16b403(0x23d)]({'update':!![]},_0x11f9d2=>{});}function startBot(_0x2d5fcc,_0x5bcf24,_0x1af6ce){const _0x3fa2b1=_0x603529;let _0x1528f3=![];const _0x266cf7=_0x2d5fcc[0x0];_0x5bcf24={..._0x5bcf24,'stdio':[_0x3fa2b1(0xf0),'inherit',_0x3fa2b1(0xf0),_0x3fa2b1(0xea)]},pid[_0x266cf7]=childProcess[_0x3fa2b1(0x14c)](botfile,_0x2d5fcc,_0x5bcf24),pid[_0x266cf7]['on']('message',_0x5d6528=>{const _0x1050bf=_0x3fa2b1;switch(Object[_0x1050bf(0x168)](_0x5d6528)[0x0]){case _0x1050bf(0x11e):updateBotName(_0x266cf7,_0x5d6528[_0x1050bf(0x11e)]);break;case _0x1050bf(0x11f):updateBotManager();break;case _0x1050bf(0x125):updateStatus(_0x266cf7,_0x5d6528[_0x1050bf(0x125)]);break;case _0x1050bf(0x238):updateLive(_0x266cf7,_0x5d6528['live']);break;case'started':updateLive(_0x266cf7,_0x5d6528[_0x1050bf(0x15b)]),io['to'](_0x266cf7)[_0x1050bf(0x1e5)]('status',{'access':{'allow':![],'reason':_0x1050bf(0x178),'token':null}});break;case _0x1050bf(0x1fc):_0x5d6528[_0x1050bf(0x1fc)]==_0x1050bf(0x184)&&restartBot(_0x266cf7);_0x5d6528[_0x1050bf(0x1fc)]=='kill'&&toggleBot(_0x266cf7,_0x1050bf(0x18e),_0x1050bf(0x129));break;case _0x1050bf(0x223):sendTelegram(_0x266cf7,_0x5d6528['telegram']);break;case _0x1050bf(0xf8):io['to'](_0x266cf7)[_0x1050bf(0x1e5)](_0x5d6528['function'],_0x5d6528[_0x1050bf(0x171)]);break;}}),pid[_0x266cf7]['on'](_0x3fa2b1(0x1d8),function(_0x464144){if(_0x1528f3)return;_0x1528f3=!![],_0x1af6ce(_0x464144);}),pid[_0x266cf7]['on'](_0x3fa2b1(0x151),function(_0x501a42){const _0x3621d6=_0x3fa2b1;if(installingUpdate)return;if(_0x1528f3)return;_0x1528f3=!![],_0x1af6ce(null);const _0xf69181=dbConfig['get']('bots')[_0x3621d6(0x1d4)]({'botID':_0x266cf7})[_0x3621d6(0x128)]();_0xf69181&&(_0xf69181['status']==_0x3621d6(0x13b)||_0xf69181[_0x3621d6(0x125)]==_0x3621d6(0x13e))&&(updateLive(_0x266cf7,_0x3621d6(0x129)),logging(_0x3621d6(0x20e)+_0x266cf7),startBot([_0x266cf7,userID],{'cwd':bbpath},function(_0x2bd633){if(_0x2bd633)logging(_0x2bd633);}));});}function stopBot(_0x1a262b){const _0x1737f1=_0x603529;getClientsWithBotID(_0x1a262b)[_0x1737f1(0x233)](_0x36b717=>{const _0x378d79=_0x1737f1;getSocket(_0x36b717['id'])[_0x378d79(0x1ce)](!![]),removeClient(_0x36b717['id']);}),pid[_0x1a262b]&&(pid[_0x1a262b][_0x1737f1(0x1cc)](),pid[_0x1a262b]=null);}function restartBot(_0x2e63ef){const _0x787846=_0x603529;if(pid[_0x2e63ef])pid[_0x2e63ef][_0x787846(0x1cc)]();}function addBot(){const _0x58f529=_0x603529;let _0x1a60af;for(let _0x1af4da=0x1;_0x1af4da<0x3e9;_0x1af4da++){_0x1a60af=_0x1af4da[_0x58f529(0x20d)]()[_0x58f529(0x1a9)](0x3,'0');let _0x3a5429=config['find'](_0x2cd91e=>_0x2cd91e[_0x58f529(0x17c)]==_0x1a60af);if(!_0x3a5429)break;}if(_0x1a60af===_0x58f529(0x1bf)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x1a60af),dbConfig['get'](_0x58f529(0x21c))['push']({'botID':_0x1a60af,'botname':_0x58f529(0x1ca)+_0x1a60af,'status':_0x58f529(0x13e),'live':''})[_0x58f529(0x218)](),startBot([_0x1a60af,userID],{'cwd':bbpath},function(_0x3ea033){if(_0x3ea033)logging(_0x3ea033);}),config=getConfiguration(),io['to']('botmanager')[_0x58f529(0x1e5)](_0x58f529(0x21c),config);}function deleteBot(_0x5bbebd){const _0xbaffb2=_0x603529;getClientsWithBotID(_0x5bbebd)[_0xbaffb2(0x233)](_0x64d1dc=>{getSocket(_0x64d1dc['id'])['disconnect'](!![]),removeClient(_0x64d1dc['id']);}),dbConfig['get'](_0xbaffb2(0x21c))[_0xbaffb2(0x22c)]({'botID':_0x5bbebd})[_0xbaffb2(0x218)](),logging(_0xbaffb2(0x189)+_0x5bbebd),stopBot(_0x5bbebd);try{fs['unlinkSync'](path[_0xbaffb2(0x155)](configpath,_0xbaffb2(0x23a)+_0x5bbebd+'-config.json')),fs[_0xbaffb2(0x190)](path['join'](configpath,'bot-'+_0x5bbebd+'-events.json')),fs[_0xbaffb2(0x190)](path[_0xbaffb2(0x155)](configpath,'bot-'+_0x5bbebd+'-performance.json')),fs[_0xbaffb2(0x190)](path['join'](configpath,_0xbaffb2(0x23a)+_0x5bbebd+_0xbaffb2(0x106)));}catch(_0x2e4e3e){if(_0x2e4e3e)logging(_0xbaffb2(0x232),_0x2e4e3e);}config=getConfiguration(),io['to'](_0xbaffb2(0x100))[_0xbaffb2(0x1e5)](_0xbaffb2(0x21c),config);}function toggleBot(_0x2e4801,_0x4781cd,_0x36982a){const _0x4beaeb=_0x603529;dbConfig[_0x4beaeb(0x22f)](_0x4beaeb(0x21c))[_0x4beaeb(0x1d4)]({'botID':_0x2e4801})[_0x4beaeb(0xff)]({'status':_0x4781cd})[_0x4beaeb(0xff)]({'live':_0x36982a})['write']();if(_0x4781cd==_0x4beaeb(0x13b)||_0x4781cd==_0x4beaeb(0x13e))logging('enabled\x20Bot\x20'+_0x2e4801),startBot([_0x2e4801,userID],{'cwd':bbpath},function(_0x18d6e8){if(_0x18d6e8)logging(_0x18d6e8);});else(_0x4781cd==_0x4beaeb(0x18e)||_0x4781cd=='new-disabled')&&(logging(_0x4beaeb(0x204)+_0x2e4801),stopBot(_0x2e4801));config=getConfiguration(),io['to'](_0x4beaeb(0x100))['emit']('bots',config);}function toggleStatus(_0x400248){const _0x4554b7=_0x603529;let _0x512409=dbConfig[_0x4554b7(0x22f)]('bots')[_0x4554b7(0x1d4)]({'botID':_0x400248})[_0x4554b7(0x128)](),_0x1bdbc2;if(_0x512409[_0x4554b7(0x125)]===_0x4554b7(0x13b))_0x1bdbc2=_0x4554b7(0x18e);else{if(_0x512409[_0x4554b7(0x125)]===_0x4554b7(0x13e))_0x1bdbc2=_0x4554b7(0x1d3);else{if(_0x512409[_0x4554b7(0x125)]===_0x4554b7(0x1d3))_0x1bdbc2=_0x4554b7(0x13e);else{if(_0x512409[_0x4554b7(0x125)]===_0x4554b7(0x18e))_0x1bdbc2=_0x4554b7(0x13b);}}}return _0x1bdbc2;}function updateStatus(_0x2b9218,_0xa5b54a){const _0x2c33de=_0x603529;dbConfig['get'](_0x2c33de(0x21c))['find']({'botID':_0x2b9218})[_0x2c33de(0xff)]({'status':_0xa5b54a})[_0x2c33de(0x218)](),config=getConfiguration(),io['to']('botmanager')[_0x2c33de(0x1e5)](_0x2c33de(0x21c),config);}function _0x2fa3(_0x5b249d,_0x5eb86e){const _0x1a7dea=_0xec94();return _0x2fa3=function(_0x4d8ee0,_0x4ad45c){_0x4d8ee0=_0x4d8ee0-0xea;let _0xec9470=_0x1a7dea[_0x4d8ee0];return _0xec9470;},_0x2fa3(_0x5b249d,_0x5eb86e);}function updateLive(_0x5a3f8f,_0x5a8fc3){const _0x26c934=_0x603529;dbConfig[_0x26c934(0x22f)](_0x26c934(0x21c))[_0x26c934(0x1d4)]({'botID':_0x5a3f8f})[_0x26c934(0xff)]({'live':_0x5a8fc3})[_0x26c934(0x218)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x26c934(0x21c),config);}function updateBotName(_0x5095e7,_0xe30ad5){const _0x21ad1a=_0x603529;dbConfig[_0x21ad1a(0x22f)]('bots')[_0x21ad1a(0x1d4)]({'botID':_0x5095e7})[_0x21ad1a(0xff)]({'botname':_0xe30ad5})[_0x21ad1a(0x218)](),config=getConfiguration(),io['to']('botmanager')[_0x21ad1a(0x1e5)](_0x21ad1a(0x21c),config);}function updateBotManager(){const _0xe2729b=_0x603529;config=getConfiguration(),io['to'](_0xe2729b(0x100))[_0xe2729b(0x1e5)]('bots',config);}function toggleBotMode(_0x42ae79){const _0x2e2e7b=_0x603529;if(pid[_0x42ae79])pid[_0x42ae79]['send']({'function':_0x2e2e7b(0x1c5),'args':null});else{const _0x32dcc6=configpath+'bot-'+_0x42ae79+_0x2e2e7b(0x1c3),_0x5a21a2=fs['readFileSync'](_0x32dcc6),_0x3020a6=JSON['parse'](_0x5a21a2),_0x1fc598=_0x3020a6[_0x2e2e7b(0x1a5)][0x0][_0x2e2e7b(0x140)];_0x3020a6['bot'][0x0][_0x2e2e7b(0x140)]=!_0x1fc598;const _0x5dcb08=JSON['stringify'](_0x3020a6,null,0x2);fs[_0x2e2e7b(0x158)](_0x32dcc6,_0x5dcb08),config=getConfiguration(),io['to'](_0x2e2e7b(0x100))[_0x2e2e7b(0x1e5)]('bots',config);}}function telegramError(_0x2762e2){const _0x1ba4a7=_0x603529;console[_0x1ba4a7(0x1e2)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x24f529){const _0x2f3d6b=_0x603529;if(_0x24f529[_0x2f3d6b(0x1ef)]['username']!=settings[_0x2f3d6b(0x1e0)]&&'@'+_0x24f529[_0x2f3d6b(0x1ef)]['username']!=settings[_0x2f3d6b(0x1e0)])return tgBot[_0x2f3d6b(0x108)](_0x24f529[_0x2f3d6b(0x231)]['id'],_0x2f3d6b(0x193),{'parse_mode':_0x2f3d6b(0x1e3)})[_0x2f3d6b(0x15d)](_0x34ac39=>{telegramError(_0x34ac39);}),![];return!![];}async function initTelegram(){const _0x5ac515=_0x603529;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5ac515(0x1c1)],{'polling':!![]});let _0x4f48e4=_0x5ac515(0x1df);_0x4f48e4+='\x0a',_0x4f48e4+=_0x5ac515(0x1bb),_0x4f48e4+=_0x5ac515(0x1c8),_0x4f48e4+=_0x5ac515(0x148),_0x4f48e4+=_0x5ac515(0x19c),_0x4f48e4+=_0x5ac515(0x145),_0x4f48e4+=_0x5ac515(0x102),_0x4f48e4+=_0x5ac515(0x154),_0x4f48e4+=_0x5ac515(0x175),_0x4f48e4+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x4f48e4+=_0x5ac515(0x20b);let _0x14110f=_0x5ac515(0x12c);_0x14110f+='\x0a',_0x14110f+=_0x4f48e4,tgBot['onText'](/\/start/,_0x10a99d=>{const _0x4b0e67=_0x5ac515;if(!validateTelegram(_0x10a99d))return;if(settings[_0x4b0e67(0x198)]!=_0x10a99d[_0x4b0e67(0x231)]['id'])updateSetting(_0x4b0e67(0x198),_0x10a99d[_0x4b0e67(0x231)]['id']);updateSetting(_0x4b0e67(0x211),!![]),tgBot['sendMessage'](_0x10a99d[_0x4b0e67(0x231)]['id'],_0x14110f)['catch'](_0x33b299=>{telegramError(_0x33b299);});}),tgBot[_0x5ac515(0xf5)](/\/enable/,_0x313825=>{const _0xfe4f7c=_0x5ac515;if(!validateTelegram(_0x313825))return;if(settings['telegramChatId']!=_0x313825[_0xfe4f7c(0x231)]['id'])updateSetting('telegramChatId',_0x313825[_0xfe4f7c(0x231)]['id']);updateSetting(_0xfe4f7c(0x211),!![]),tgBot['sendMessage'](_0x313825['chat']['id'],_0xfe4f7c(0xfa))[_0xfe4f7c(0x15d)](_0x5c7d56=>{telegramError(_0x5c7d56);});}),tgBot['onText'](/\/config/,async _0x77cc05=>{const _0x567434=_0x5ac515;if(!validateTelegram(_0x77cc05))return;tgBot[_0x567434(0x14a)]('callback_query'),tgBot[_0x567434(0x108)](_0x77cc05[_0x567434(0x231)]['id'],_0x567434(0x166),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x567434(0x181)},{'text':_0x567434(0x20f),'callback_data':_0x567434(0x14b)},{'text':_0x567434(0x1bd),'callback_data':_0x567434(0x1b8)}]]}})[_0x567434(0x15d)](_0x3a7ee0=>{telegramError(_0x3a7ee0);}),tgBot['on'](_0x567434(0x144),async _0x3bd035=>{const _0x4be3c9=_0x567434,_0x1e7c58=_0x3bd035[_0x4be3c9(0x127)],_0x1c7c4e=_0x3bd035[_0x4be3c9(0x157)];tgBot[_0x4be3c9(0x10d)](_0x3bd035['id'])[_0x4be3c9(0x1a0)](async()=>{const _0x59565b=_0x4be3c9;_0x1e7c58==_0x59565b(0x181)&&(updateSetting(_0x59565b(0x16b),'orders'),updateSetting(_0x59565b(0x211),!![]),await tgBot['sendMessage'](_0x1c7c4e['chat']['id'],_0x59565b(0x1be))[_0x59565b(0x15d)](_0xa50cbf=>{telegramError(_0xa50cbf);}));_0x1e7c58==_0x59565b(0x14b)&&(updateSetting('telegramEvents',_0x59565b(0x14b)),updateSetting(_0x59565b(0x211),!![]),await tgBot[_0x59565b(0x108)](_0x1c7c4e[_0x59565b(0x231)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x59565b(0x15d)](_0x2d3e16=>{telegramError(_0x2d3e16);}));_0x1e7c58==_0x59565b(0x1b8)&&(updateSetting('telegramEvents',_0x59565b(0x1b8)),updateSetting(_0x59565b(0x211),!![]),await tgBot['sendMessage'](_0x1c7c4e[_0x59565b(0x231)]['id'],_0x59565b(0x227))['catch'](_0x196671=>{telegramError(_0x196671);}));if(!settings[_0x59565b(0x198)])tgBot[_0x59565b(0x108)](_0x1c7c4e[_0x59565b(0x231)]['id'],_0x59565b(0x1fa))['catch'](_0x31716e=>{telegramError(_0x31716e);});}),tgBot['removeListener'](_0x4be3c9(0x144));});}),tgBot[_0x5ac515(0xf5)](/\/status/,_0x1a8b0e=>{const _0x5dd882=_0x5ac515;if(!validateTelegram(_0x1a8b0e))return;const _0x581b51=getBotsWithMode();let _0x5d725d=_0x5dd882(0x156);config[_0x5dd882(0x233)](_0x4666e1=>{const _0xe0156b=_0x5dd882,_0x38088e=_0x581b51[_0xe0156b(0x1d4)](_0x14c5ba=>_0x14c5ba[_0xe0156b(0x17c)]==_0x4666e1[_0xe0156b(0x17c)])['mode'];_0x5d725d+=_0xe0156b(0x1ca)+_0x4666e1['botID']+':\x20'+_0x4666e1[_0xe0156b(0x125)]+_0xe0156b(0x191)+_0x38088e+_0xe0156b(0x191)+_0x4666e1['live']+'\x0a';}),_0x5d725d+='\x0a',_0x5d725d+=_0x5dd882(0x1ba),_0x5d725d+=!settings['telegramEnabled']?_0x5dd882(0x182):_0x5dd882(0x110),_0x5d725d+=settings[_0x5dd882(0x211)]?settings[_0x5dd882(0x16b)]=='all'?_0x5dd882(0x147):_0x5dd882(0x23c)+settings['telegramEvents']+_0x5dd882(0x206):'',tgBot[_0x5dd882(0x108)](_0x1a8b0e[_0x5dd882(0x231)]['id'],_0x5d725d,{'parse_mode':_0x5dd882(0x1e3)})[_0x5dd882(0x15d)](_0x48af10=>{telegramError(_0x48af10);});}),tgBot[_0x5ac515(0xf5)](/\/restart/,_0xb73940=>{const _0x2081f1=_0x5ac515;if(!validateTelegram(_0xb73940))return;tgBot[_0x2081f1(0x14a)]('callback_query');const _0x5b1993=getEnabledBots();if(_0x5b1993['length']==0x0)tgBot[_0x2081f1(0x108)](_0xb73940[_0x2081f1(0x231)]['id'],_0x2081f1(0x1c9))[_0x2081f1(0x15d)](_0x4b231e=>{telegramError(_0x4b231e);});else{if(_0x5b1993[_0x2081f1(0xee)]>0x1)_0x5b1993['push']({'botID':_0x2081f1(0x1b8)});let _0x55ddfe=[],_0x330886=[];const _0x20f9e3=_0x5b1993[_0x2081f1(0xee)]%0x4==0x0||_0x5b1993[_0x2081f1(0xee)]%0x4==0x3||_0x5b1993['length']%0x3==0x1?0x4:0x3;let _0x9d44cc=0x0;_0x5b1993['forEach']((_0x29d43e,_0xa44d9f)=>{const _0x20a0f3=_0x2081f1;if(_0xa44d9f%_0x20f9e3==0x0)_0x330886=[];_0x330886[_0x20a0f3(0x234)]({'text':_0x29d43e['botID']==_0x20a0f3(0x1b8)?_0x20a0f3(0x1fd):_0x20a0f3(0x1ca)+_0x29d43e[_0x20a0f3(0x17c)],'callback_data':_0x29d43e[_0x20a0f3(0x17c)]}),_0xa44d9f%_0x20f9e3==0x0&&(_0x55ddfe[_0x9d44cc]=_0x330886,_0x9d44cc++);}),tgBot[_0x2081f1(0x108)](_0xb73940[_0x2081f1(0x231)]['id'],_0x2081f1(0x15e),{'reply_markup':{'inline_keyboard':_0x55ddfe}})[_0x2081f1(0x15d)](_0x484d5f=>{telegramError(_0x484d5f);}),tgBot['on'](_0x2081f1(0x144),async _0xa2e5b9=>{const _0xa36077=_0x2081f1,_0x40c4b2=_0xa2e5b9[_0xa36077(0x127)],_0x2873fc=_0xa2e5b9[_0xa36077(0x157)];tgBot[_0xa36077(0x10d)](_0xa2e5b9['id'])[_0xa36077(0x1a0)](async()=>{const _0x54b46d=_0xa36077;_0x40c4b2==_0x54b46d(0x1b8)?(tgBot['sendMessage'](_0x2873fc['chat']['id'],_0x54b46d(0x133))[_0x54b46d(0x15d)](_0x487f9d=>{telegramError(_0x487f9d);}),config[_0x54b46d(0x233)](_0x2853b2=>{restartBot(_0x2853b2['botID']);})):(tgBot[_0x54b46d(0x108)](_0x2873fc[_0x54b46d(0x231)]['id'],_0x54b46d(0x174)+_0x40c4b2)[_0x54b46d(0x15d)](_0x217f92=>{telegramError(_0x217f92);}),restartBot(_0x40c4b2));}),tgBot[_0xa36077(0x14a)](_0xa36077(0x144));});}}),tgBot[_0x5ac515(0xf5)](/\/on/,_0x2b565b=>{const _0x448d47=_0x5ac515;if(!validateTelegram(_0x2b565b))return;tgBot[_0x448d47(0x14a)](_0x448d47(0x144));const _0x36541f=getDisabledBots();if(_0x36541f[_0x448d47(0xee)]==0x0)tgBot['sendMessage'](_0x2b565b[_0x448d47(0x231)]['id'],_0x448d47(0x214))[_0x448d47(0x15d)](_0x2904c9=>{telegramError(_0x2904c9);});else{if(_0x36541f[_0x448d47(0xee)]>0x1)_0x36541f[_0x448d47(0x234)]({'botID':_0x448d47(0x1b8)});let _0x43cd8a=[],_0x17d923=[];const _0x16a861=_0x36541f[_0x448d47(0xee)]%0x4==0x0||_0x36541f[_0x448d47(0xee)]%0x4==0x3||_0x36541f['length']%0x3==0x1?0x4:0x3;let _0x4dd7f2=0x0;_0x36541f[_0x448d47(0x233)]((_0x16223e,_0x2a5d69)=>{const _0x4687ea=_0x448d47;if(_0x2a5d69%_0x16a861==0x0)_0x17d923=[];_0x17d923[_0x4687ea(0x234)]({'text':_0x16223e[_0x4687ea(0x17c)]==_0x4687ea(0x1b8)?_0x4687ea(0x1fd):_0x4687ea(0x1ca)+_0x16223e['botID'],'callback_data':_0x16223e[_0x4687ea(0x17c)]}),_0x2a5d69%_0x16a861==0x0&&(_0x43cd8a[_0x4dd7f2]=_0x17d923,_0x4dd7f2++);}),tgBot['sendMessage'](_0x2b565b[_0x448d47(0x231)]['id'],_0x448d47(0x221),{'reply_markup':{'inline_keyboard':_0x43cd8a}})[_0x448d47(0x15d)](_0x2b6685=>{telegramError(_0x2b6685);}),tgBot['on'](_0x448d47(0x144),async _0x51e2cd=>{const _0x454bba=_0x448d47,_0x20c9ab=_0x51e2cd[_0x454bba(0x127)],_0x4f0aa6=_0x51e2cd[_0x454bba(0x157)];tgBot[_0x454bba(0x10d)](_0x51e2cd['id'])[_0x454bba(0x1a0)](async()=>{const _0x52e7f9=_0x454bba;_0x20c9ab=='all'?(tgBot[_0x52e7f9(0x108)](_0x4f0aa6[_0x52e7f9(0x231)]['id'],_0x52e7f9(0x138))[_0x52e7f9(0x15d)](_0x39a6d0=>{telegramError(_0x39a6d0);}),_0x36541f['forEach'](_0x12492c=>{const _0x15adb7=_0x52e7f9;if(_0x12492c['botID']!='all')toggleBot(_0x12492c[_0x15adb7(0x17c)],toggleStatus(_0x12492c[_0x15adb7(0x17c)]),'stopped');})):(tgBot[_0x52e7f9(0x108)](_0x4f0aa6['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x20c9ab)[_0x52e7f9(0x15d)](_0x546d1e=>{telegramError(_0x546d1e);}),toggleBot(_0x20c9ab,toggleStatus(_0x20c9ab),_0x52e7f9(0x129)));}),tgBot[_0x454bba(0x14a)](_0x454bba(0x144));});}}),tgBot[_0x5ac515(0xf5)](/\/off/,_0x4cd4ff=>{const _0x2398d6=_0x5ac515;if(!validateTelegram(_0x4cd4ff))return;tgBot['removeListener'](_0x2398d6(0x144));const _0x724638=getEnabledBots();if(_0x724638[_0x2398d6(0xee)]==0x0)tgBot[_0x2398d6(0x108)](_0x4cd4ff[_0x2398d6(0x231)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2398d6(0x15d)](_0x5a6bb1=>{telegramError(_0x5a6bb1);});else{if(_0x724638['length']>0x1)_0x724638[_0x2398d6(0x234)]({'botID':_0x2398d6(0x1b8)});let _0x1253a0=[],_0x2e9536=[];const _0x49d981=_0x724638[_0x2398d6(0xee)]%0x4==0x0||_0x724638['length']%0x4==0x3||_0x724638[_0x2398d6(0xee)]%0x3==0x1?0x4:0x3;let _0x138100=0x0;_0x724638[_0x2398d6(0x233)]((_0xf23b57,_0x3cc19d)=>{const _0x28f985=_0x2398d6;if(_0x3cc19d%_0x49d981==0x0)_0x2e9536=[];_0x2e9536[_0x28f985(0x234)]({'text':_0xf23b57[_0x28f985(0x17c)]==_0x28f985(0x1b8)?_0x28f985(0x1fd):_0x28f985(0x1ca)+_0xf23b57[_0x28f985(0x17c)],'callback_data':_0xf23b57[_0x28f985(0x17c)]}),_0x3cc19d%_0x49d981==0x0&&(_0x1253a0[_0x138100]=_0x2e9536,_0x138100++);}),tgBot[_0x2398d6(0x108)](_0x4cd4ff['chat']['id'],_0x2398d6(0x1da),{'reply_markup':{'inline_keyboard':_0x1253a0}})[_0x2398d6(0x15d)](_0x2dafa8=>{telegramError(_0x2dafa8);}),tgBot['on'](_0x2398d6(0x144),async _0x1e6378=>{const _0x57b0b1=_0x2398d6,_0x4c4541=_0x1e6378[_0x57b0b1(0x127)],_0x1f5af5=_0x1e6378[_0x57b0b1(0x157)];tgBot['answerCallbackQuery'](_0x1e6378['id'])[_0x57b0b1(0x1a0)](async()=>{const _0x1c0c45=_0x57b0b1;_0x4c4541==_0x1c0c45(0x1b8)?(tgBot[_0x1c0c45(0x108)](_0x1f5af5[_0x1c0c45(0x231)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x1c0c45(0x15d)](_0xfde94f=>{telegramError(_0xfde94f);}),_0x724638[_0x1c0c45(0x233)](_0x3d5eff=>{const _0x594d5e=_0x1c0c45;if(_0x3d5eff[_0x594d5e(0x17c)]!=_0x594d5e(0x1b8))toggleBot(_0x3d5eff['botID'],toggleStatus(_0x3d5eff[_0x594d5e(0x17c)]),_0x594d5e(0x129));})):(tgBot[_0x1c0c45(0x108)](_0x1f5af5['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x4c4541)[_0x1c0c45(0x15d)](_0xc24e8d=>{telegramError(_0xc24e8d);}),toggleBot(_0x4c4541,toggleStatus(_0x4c4541),_0x1c0c45(0x129)));}),tgBot[_0x57b0b1(0x14a)]('callback_query');});}}),tgBot['onText'](/\/toggle/,_0x2e6c6b=>{const _0x17a388=_0x5ac515;if(!validateTelegram(_0x2e6c6b))return;tgBot['removeListener'](_0x17a388(0x144));const _0x1755b0=getBotsWithMode();if(_0x1755b0[_0x17a388(0xee)]==0x0)tgBot['sendMessage'](_0x2e6c6b[_0x17a388(0x231)]['id'],_0x17a388(0x1c9))[_0x17a388(0x15d)](_0x3fae27=>{telegramError(_0x3fae27);});else{let _0x55ca10=[],_0x3be920=[];const _0xc27cc5=0x2;let _0x447751=0x0;_0x1755b0[_0x17a388(0x233)]((_0x4fbb29,_0x5afac1)=>{const _0x54eea3=_0x17a388;if(_0x5afac1%_0xc27cc5==0x0)_0x3be920=[];_0x3be920[_0x54eea3(0x234)]({'text':_0x54eea3(0x1ca)+_0x4fbb29[_0x54eea3(0x17c)]+'\x20('+_0x4fbb29[_0x54eea3(0x210)]+')','callback_data':_0x4fbb29['botID']}),_0x5afac1%_0xc27cc5==0x0&&(_0x55ca10[_0x447751]=_0x3be920,_0x447751++);}),tgBot['sendMessage'](_0x2e6c6b[_0x17a388(0x231)]['id'],_0x17a388(0x132),{'reply_markup':{'inline_keyboard':_0x55ca10}})[_0x17a388(0x15d)](_0x393891=>{telegramError(_0x393891);}),tgBot['on'](_0x17a388(0x144),async _0x407e2d=>{const _0x118a21=_0x17a388,_0x44ab39=_0x407e2d[_0x118a21(0x127)],_0x4bcd3b=_0x407e2d[_0x118a21(0x157)];tgBot[_0x118a21(0x10d)](_0x407e2d['id'])[_0x118a21(0x1a0)](async()=>{const _0x4d2376=_0x118a21,_0x5aa733=_0x1755b0[_0x4d2376(0x1d4)](_0x1d2441=>_0x1d2441[_0x4d2376(0x17c)]==_0x44ab39),_0x4708c1=_0x5aa733[_0x4d2376(0x210)]==_0x4d2376(0x162)?_0x4d2376(0x135):_0x4d2376(0x162);tgBot[_0x4d2376(0x108)](_0x4bcd3b[_0x4d2376(0x231)]['id'],_0x4d2376(0x11c)+_0x44ab39+_0x4d2376(0x12f)+_0x4708c1+_0x4d2376(0x22b))[_0x4d2376(0x15d)](_0x5ed0b9=>{telegramError(_0x5ed0b9);}),toggleBotMode(_0x44ab39);}),tgBot[_0x118a21(0x14a)](_0x118a21(0x144));});}}),tgBot[_0x5ac515(0xf5)](/\/names/,_0x5b9a6=>{const _0x4daab4=_0x5ac515;if(!validateTelegram(_0x5b9a6))return;let _0xf070d2='';config['forEach'](_0x416db0=>{const _0x307668=_0x2fa3;_0xf070d2+='Bot\x20'+_0x416db0['botID']+':\x20'+_0x416db0[_0x307668(0x11e)]+'\x0a';}),tgBot[_0x4daab4(0x108)](_0x5b9a6[_0x4daab4(0x231)]['id'],_0xf070d2,{'parse_mode':_0x4daab4(0x1e3)})[_0x4daab4(0x15d)](_0x3120b6=>{telegramError(_0x3120b6);});}),tgBot[_0x5ac515(0xf5)](/\/disable/,_0x1dbf87=>{const _0x4a53df=_0x5ac515;if(!validateTelegram(_0x1dbf87))return;tgBot[_0x4a53df(0x108)](_0x1dbf87['chat']['id'],_0x4a53df(0x215))[_0x4a53df(0x15d)](_0x40eb03=>{telegramError(_0x40eb03);}),updateSetting(_0x4a53df(0x211),![]);}),tgBot[_0x5ac515(0xf5)](/\/help/,_0x4f736a=>{const _0x4f4ab5=_0x5ac515;if(!validateTelegram(_0x4f736a))return;tgBot[_0x4f4ab5(0x108)](_0x4f736a[_0x4f4ab5(0x231)]['id'],_0x4f48e4)[_0x4f4ab5(0x15d)](_0x45b28e=>{telegramError(_0x45b28e);});}),tgBot['on'](_0x5ac515(0x14f),_0x1cf496=>{const _0x109e0b=_0x5ac515;_0x1cf496[_0x109e0b(0x20d)]()[_0x109e0b(0x163)](_0x109e0b(0x126))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x109e0b(0x100))[_0x109e0b(0x1e5)](_0x109e0b(0x1db),_0x109e0b(0x1d9)));}),process['once'](_0x5ac515(0x22e),()=>{const _0x12d050=_0x5ac515;if(tgBot)tgBot[_0x12d050(0x202)]();process[_0x12d050(0x151)](0x1);}),process['once']('SIGTERM',()=>{const _0x2203a8=_0x5ac515;if(tgBot)tgBot['stopPolling']();process[_0x2203a8(0x151)](0x1);});}}function disableTelegram(){const _0x167067=_0x603529;tgBot&&(tgBot[_0x167067(0x202)](),tgBot=null);}function sendTelegram(_0x5dada1,_0x30b60d){const _0x4aad34=_0x603529;if(settings[_0x4aad34(0x211)]){if(settings[_0x4aad34(0x16b)]==_0x4aad34(0x1b8)||(_0x30b60d[_0x4aad34(0x12a)]==_0x4aad34(0x1d8)||_0x30b60d[_0x4aad34(0x12a)]==_0x4aad34(0x13f))&&settings[_0x4aad34(0x16b)]==_0x4aad34(0x14b)||_0x30b60d[_0x4aad34(0x12a)]=='order'&&settings[_0x4aad34(0x16b)]==_0x4aad34(0x181)){if(tgBot&&settings[_0x4aad34(0x198)]){if(_0x30b60d['showname'])tgBot[_0x4aad34(0x108)](settings[_0x4aad34(0x198)],_0x30b60d[_0x4aad34(0x11e)]+'\x20>\x20'+_0x30b60d[_0x4aad34(0x1fb)])[_0x4aad34(0x15d)](_0x17b267=>{telegramError(_0x17b267);});else tgBot[_0x4aad34(0x108)](settings[_0x4aad34(0x198)],_0x4aad34(0x1ca)+_0x5dada1+_0x4aad34(0x199)+_0x30b60d[_0x4aad34(0x1fb)])[_0x4aad34(0x15d)](_0x23dd96=>{telegramError(_0x23dd96);});}}}}function getDeviceWithIp(_0x4e4688){return devices['find'](_0x5d83a1=>_0x5d83a1['ip']===_0x4e4688);}function temporaryAccess2FA(_0x2c2d4f,_0x4753f3){const _0x6dbdea=_0x603529;let _0x2a7090=new Date(),_0x3f137b=![];if(lastIpApproval){if(_0x2a7090-lastIpApproval<0x1388)_0x3f137b=!![];}lastIpApproval=new Date();if(_0x3f137b)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x6dbdea(0x14a)](_0x6dbdea(0x144)),tgBot[_0x6dbdea(0x108)](settings[_0x6dbdea(0x198)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4753f3)[_0x6dbdea(0x18d)]+_0x6dbdea(0x213),{'parse_mode':_0x6dbdea(0x1e3),'reply_markup':{'inline_keyboard':[[{'text':_0x6dbdea(0x119),'callback_data':'5'},{'text':_0x6dbdea(0x1f3),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x6dbdea(0x15d)](_0x2b93ee=>{telegramError(_0x2b93ee);}),tgBot['on'](_0x6dbdea(0x144),async _0x2d4db3=>{const _0x12c2e0=_0x6dbdea,_0x210692=_0x2d4db3['data'],_0x57e7ce=_0x2d4db3['message'];tgBot['answerCallbackQuery'](_0x2d4db3['id'])[_0x12c2e0(0x1a0)](async()=>{const _0x48cea2=_0x12c2e0;devices[_0x2c2d4f][_0x48cea2(0x186)]={'clientip':_0x4753f3,'timestamp':new Date()[_0x48cea2(0x18a)](),'expiry':_0x210692},_0x210692!=_0x48cea2(0x1d1)?(await tgBot[_0x48cea2(0x108)](_0x57e7ce['chat']['id'],_0x48cea2(0x15c)+_0x210692+'\x20minutes',{'parse_mode':'HTML'})[_0x48cea2(0x15d)](_0x51d1b5=>{telegramError(_0x51d1b5);}),io['to'](_0x2c2d4f)[_0x48cea2(0x1e5)](_0x48cea2(0x125),{'access':{'allow':![],'reason':_0x48cea2(0x178),'token':null}})):(await tgBot[_0x48cea2(0x108)](_0x57e7ce[_0x48cea2(0x231)]['id'],_0x48cea2(0x230))[_0x48cea2(0x15d)](_0x10512f=>{telegramError(_0x10512f);}),io['to'](_0x2c2d4f)['emit'](_0x48cea2(0x125),{'access':{'allow':![],'reason':_0x48cea2(0x136),'token':null}}));}),tgBot[_0x12c2e0(0x14a)]('callback_query');}));}function loginAccess2FA(_0x4eefc7,_0x1a9ebc){const _0x25073a=_0x603529;tgBot&&settings[_0x25073a(0x198)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x25073a(0x198)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x1a9ebc)['show']+_0x25073a(0x213),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x25073a(0x188),'callback_data':loginExpiry},{'text':_0x25073a(0x1d1),'callback_data':_0x25073a(0x1d1)}]]}})[_0x25073a(0x15d)](_0x5850c1=>{telegramError(_0x5850c1);}),tgBot['on'](_0x25073a(0x144),async _0x59ec33=>{const _0x44cb81=_0x25073a,_0x1f8a98=_0x59ec33[_0x44cb81(0x127)],_0x369062=_0x59ec33['message'];tgBot[_0x44cb81(0x10d)](_0x59ec33['id'])[_0x44cb81(0x1a0)](async()=>{const _0x4b9452=_0x44cb81;devices[_0x4eefc7][_0x4b9452(0x117)]={'clientip':_0x1a9ebc,'timestamp':new Date()[_0x4b9452(0x18a)](),'expiry':_0x1f8a98},_0x1f8a98!='reject'?(await tgBot['sendMessage'](_0x369062[_0x4b9452(0x231)]['id'],_0x4b9452(0x209),{'parse_mode':_0x4b9452(0x1e3)})[_0x4b9452(0x15d)](_0x2eb0b4=>{telegramError(_0x2eb0b4);}),io['to'](_0x4eefc7)[_0x4b9452(0x1e5)](_0x4b9452(0x125),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4b9452(0x108)](_0x369062[_0x4b9452(0x231)]['id'],'Login\x20rejected')[_0x4b9452(0x15d)](_0x58ad61=>{telegramError(_0x58ad61);}),io['to'](_0x4eefc7)[_0x4b9452(0x1e5)](_0x4b9452(0x125),{'access':{'allow':![],'reason':_0x4b9452(0x1f2),'token':null}}));}),tgBot['removeListener'](_0x44cb81(0x144));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2ac6ab=_0x603529;return dbConfig[_0x2ac6ab(0x22f)](_0x2ac6ab(0x21c))[_0x2ac6ab(0x1dd)](_0x2ac6ab(0x17c))[_0x2ac6ab(0x1d2)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x3f5f67=_0x603529;return dbConfig['get']('bots')[_0x3f5f67(0x1dd)](_0x3f5f67(0x17c))[_0x3f5f67(0x1d2)]({'status':'disabled'})[_0x3f5f67(0x128)]()||[];}function getBotsWithMode(){const _0x22df83=_0x603529,_0x541d23=dbConfig[_0x22df83(0x22f)](_0x22df83(0x21c))[_0x22df83(0x1dd)](_0x22df83(0x17c))[_0x22df83(0x128)]()||[];return _0x541d23[_0x22df83(0x233)](_0x238aa3=>{const _0x10ba98=_0x22df83,_0x3e16b5=configpath+_0x10ba98(0x23a)+_0x238aa3['botID']+'-config.json',_0x351d67=fs[_0x10ba98(0x14d)](_0x3e16b5);if(_0x351d67){const _0x5d9d50=fs['readFileSync'](_0x3e16b5);try{const _0x54f56e=JSON['parse'](_0x5d9d50),_0x1bf114=_0x54f56e?_0x54f56e[_0x10ba98(0x1a5)][0x0][_0x10ba98(0x140)]:![];_0x238aa3[_0x10ba98(0x210)]=_0x1bf114?_0x10ba98(0x162):_0x10ba98(0x135);}catch(_0xdc3b4b){_0x238aa3['mode']=_0x10ba98(0x135);}}else _0x238aa3[_0x10ba98(0x210)]=_0x10ba98(0x135);}),_0x541d23;}function getSettings(){return dbSettings['get']('settings')['value']()||{'timeshift':0x0};}function getSecure(){const _0x4b6f85=_0x603529;return dbSecure[_0x4b6f85(0x22f)](_0x4b6f85(0x1d5))[_0x4b6f85(0x128)]()||{};}function getBlacklist(){const _0x1908c6=_0x603529;return dbSecure['get'](_0x1908c6(0x1a4))[_0x1908c6(0x128)]()||[];}function broadcastToBots(_0x5b07a3,_0x31c512){config['forEach'](_0xc64e65=>{const _0x11740d=_0x2fa3;if(_0xc64e65[_0x11740d(0x125)]==_0x11740d(0x13b)&&_0xc64e65['live']==_0x11740d(0x220)){if(pid[_0xc64e65['botID']])pid[_0xc64e65[_0x11740d(0x17c)]][_0x11740d(0x23d)]({[_0x5b07a3]:_0x31c512});}});}function storeSettings(_0x4e16d2,_0x362bcf=![]){const _0x23e48a=_0x603529;_0x4e16d2={...settings,..._0x4e16d2};if(_0x362bcf&&_0x4e16d2['bbPassword']!=_0x23e48a(0x1c2)&&_0x4e16d2[_0x23e48a(0x176)]!=''){const _0x54e508=crypt[_0x23e48a(0x17d)](secure[_0x23e48a(0x1af)],_0x4e16d2[_0x23e48a(0x176)])[_0x23e48a(0x157)][_0x23e48a(0x13d)]('@')[0x0],_0x4d5276=bcrypt[_0x23e48a(0x183)](_0x54e508,saltRounds);_0x4e16d2={..._0x4e16d2,'bbPassword':_0x4d5276};}if(_0x362bcf&&_0x4e16d2[_0x23e48a(0x1c1)]!=_0x23e48a(0x1c2)&&_0x4e16d2[_0x23e48a(0x1c1)]!=''){const _0x2aaee1=crypt[_0x23e48a(0x17d)](secure[_0x23e48a(0x1af)],_0x4e16d2[_0x23e48a(0x1c1)])[_0x23e48a(0x157)]['split']('@')[0x0];_0x4e16d2={..._0x4e16d2,'telegramToken':_0x2aaee1};}const _0x21d9cc=_0x4e16d2[_0x23e48a(0x1c1)]!=_0x23e48a(0x1c2)&&_0x4e16d2[_0x23e48a(0x1c1)]!=settings[_0x23e48a(0x1c1)]||_0x4e16d2[_0x23e48a(0x1e0)]!=settings['telegramUsername'],_0x94fed8=_0x4e16d2[_0x23e48a(0x1c1)]==''||_0x4e16d2[_0x23e48a(0x1e0)]=='';if(_0x21d9cc)_0x4e16d2[_0x23e48a(0x16b)]=_0x23e48a(0x1b8);for(const [_0x432c35,_0x1d97ee]of Object[_0x23e48a(0x1f9)](_0x4e16d2)){if(_0x432c35==_0x23e48a(0x1c1)&&_0x1d97ee=='************'){_0x4e16d2[_0x23e48a(0x1c1)]=settings['telegramToken'];continue;};if(_0x432c35=='bbPassword'&&_0x1d97ee==_0x23e48a(0x1c2)){_0x4e16d2['bbPassword']=settings[_0x23e48a(0x176)];continue;};dbSettings[_0x23e48a(0x222)]('settings.'+_0x432c35,_0x1d97ee)[_0x23e48a(0x218)]();}settings=_0x4e16d2,io['to'](_0x23e48a(0x100))[_0x23e48a(0x1e5)](_0x23e48a(0x19b),cleanSettings()),broadcastToBots(_0x23e48a(0x1e7),settings['timeshift']);if(_0x21d9cc&&!_0x94fed8)initTelegram();if(_0x21d9cc&&_0x94fed8)disableTelegram();getAllClients()[_0x23e48a(0x233)](_0x1f479b=>{const _0x227c11=_0x23e48a;getSocket(_0x1f479b['id'])[_0x227c11(0x1e5)](_0x227c11(0x125),{'access':{'allow':![],'reason':_0x227c11(0x178),'token':null}});});}function updateSetting(_0x145982,_0x4bcbcc){const _0x5cea4e=_0x603529;dbSettings[_0x5cea4e(0x222)](_0x5cea4e(0x1a1)+_0x145982,_0x4bcbcc)['write'](),settings=getSettings(),io['to'](_0x5cea4e(0x100))[_0x5cea4e(0x1e5)]('settings',cleanSettings());}function storeSecure(_0x709b68){const _0x3d7401=_0x603529;dbSecure[_0x3d7401(0x22f)](_0x3d7401(0x1d5))['push'](_0x709b68)[_0x3d7401(0x218)](),secure=_0x709b68;}function addBlacklist(_0x45e000){const _0x22e3d6=_0x603529;cleanBlacklist();let _0x135dd0;devices[_0x45e000][_0x22e3d6(0x186)]?_0x135dd0=Math['max'](devices[_0x45e000][_0x22e3d6(0x186)][_0x22e3d6(0x11b)],loginExpiry):_0x135dd0=loginExpiry,dbSecure[_0x22e3d6(0x22f)](_0x22e3d6(0x1a4))[_0x22e3d6(0x234)]({'expiry':new Date()[_0x22e3d6(0x18a)]()+_0x135dd0*0x3c*0x3e8,'token':devices[_0x45e000]['access'][_0x22e3d6(0x1f5)]})[_0x22e3d6(0x218)](),blacklist=dbSecure[_0x22e3d6(0x22f)](_0x22e3d6(0x1a4))[_0x22e3d6(0x128)]();}function cleanBlacklist(){const _0x332486=_0x603529;let _0x37b52b=dbSecure['get']('blacklist')[_0x332486(0x1b3)]()[_0x332486(0x128)](),_0xabe028=new Date()[_0x332486(0x18a)]();_0x37b52b[_0x332486(0x233)](_0x5cb21f=>{const _0x5c998b=_0x332486;_0x5cb21f[_0x5c998b(0x11b)]<_0xabe028&&dbSecure[_0x5c998b(0x22f)](_0x5c998b(0x1a4))['remove']({'expiry':_0x5cb21f[_0x5c998b(0x11b)]})[_0x5c998b(0x218)]();});}function initStates(){let _0x11b23d=getConfiguration();_0x11b23d['forEach'](_0xc79995=>{const _0x2f6142=_0x2fa3;_0xc79995[_0x2f6142(0x238)]=_0x2f6142(0x129);}),storeConfiguration(_0x11b23d);}function onKeys(){const _0x4c4027=new RSA();return new Promise(_0x280b6e=>{const _0x238187=_0x2fa3;_0x4c4027['generateKeyPairAsync']()[_0x238187(0x1a0)](_0x26d915=>{_0x280b6e(_0x26d915);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4aedc9=_0x603529;let _0x33fbca=getConfiguration(),_0x1e24fb=![];_0x33fbca[_0x4aedc9(0x233)](_0x57d96a=>{const _0x2528c7=_0x4aedc9;if(_0x57d96a[_0x2528c7(0x125)]=='running')_0x57d96a[_0x2528c7(0x125)]=_0x2528c7(0x13b),_0x1e24fb=!![];else _0x57d96a['status']==_0x2528c7(0x129)&&(_0x57d96a[_0x2528c7(0x125)]=_0x2528c7(0x18e),_0x1e24fb=!![]);});if(_0x1e24fb)storeConfiguration(_0x33fbca);let _0x394d28=getSecure();if(!_0x394d28['hasOwnProperty'](_0x4aedc9(0x10c))){let _0x2511b4=await generateKeys();_0x394d28[_0x4aedc9(0x22d)]=_0x2511b4[_0x4aedc9(0x22d)],_0x394d28['privateKey']=_0x2511b4['privateKey'],_0x394d28['secret']=crypto[_0x4aedc9(0x1e6)](0x20)['toString']('hex');;storeSecure(_0x394d28);}let _0x5dd360=getSettings();_0x1e24fb=![];!_0x5dd360[_0x4aedc9(0x179)]('loginRequired')&&(_0x5dd360['loginRequired']=![],_0x5dd360['bbUsername']='',_0x5dd360[_0x4aedc9(0x176)]='',_0x5dd360['f2aRequired']=![],_0x1e24fb=!![]);!_0x5dd360['hasOwnProperty']('whitelistEnabled')&&(_0x5dd360[_0x4aedc9(0xed)]=![],_0x5dd360[_0x4aedc9(0x10f)]=[],_0x5dd360[_0x4aedc9(0x236)]=![],_0x1e24fb=!![]);if(!_0x5dd360[_0x4aedc9(0x179)]('telegramEnabled')){if(_0x5dd360['telegramChatId'])_0x5dd360[_0x4aedc9(0x211)]=!![];else _0x5dd360['telegramEnabled']=![];_0x1e24fb=!![];}if(_0x1e24fb)storeSettings(_0x5dd360);}function storeConfiguration(_0x53254b){const _0x491f62=_0x603529;dbConfig[_0x491f62(0x22f)](_0x491f62(0x21c))['remove']()[_0x491f62(0x218)](),_0x53254b['forEach'](_0x413427=>{const _0x327b12=_0x491f62;delete _0x413427[_0x327b12(0x210)];}),dbConfig['get']('bots')[_0x491f62(0x234)](..._0x53254b)[_0x491f62(0x218)](),config=_0x53254b;}function resetPassword(){const _0x1eb2fd=_0x603529;tgBot&&settings['telegramChatId']&&(tgBot[_0x1eb2fd(0x14a)](_0x1eb2fd(0x144)),tgBot[_0x1eb2fd(0x108)](settings[_0x1eb2fd(0x198)],_0x1eb2fd(0x207),{'parse_mode':_0x1eb2fd(0x1e3),'reply_markup':{'inline_keyboard':[[{'text':_0x1eb2fd(0x23e),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x1eb2fd(0x15d)](_0x1e921b=>{telegramError(_0x1e921b);}),tgBot['on'](_0x1eb2fd(0x144),async _0x315fb8=>{const _0x5199d9=_0x1eb2fd,_0x39a8cc=_0x315fb8[_0x5199d9(0x127)],_0x5f1a1c=_0x315fb8[_0x5199d9(0x157)];tgBot[_0x5199d9(0x10d)](_0x315fb8['id'])['then'](async()=>{const _0x399fe9=_0x5199d9;if(_0x39a8cc!='no'){const _0x52579c=0xf,_0x4ed5c1='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x2ee843=Array[_0x399fe9(0x1ef)](crypto['randomFillSync'](new Uint32Array(_0x52579c)))[_0x399fe9(0x114)](_0x6877c3=>_0x4ed5c1[_0x6877c3%_0x4ed5c1['length']])[_0x399fe9(0x155)](''),_0x502aca=bcrypt['hashSync'](_0x2ee843,saltRounds);storeSettings({'bbPassword':_0x502aca}),await tgBot['sendMessage'](_0x5f1a1c[_0x399fe9(0x231)]['id'],_0x399fe9(0x122)+_0x2ee843,{'parse_mode':_0x399fe9(0x1e3)})[_0x399fe9(0x15d)](_0x217881=>{telegramError(_0x217881);});}else await tgBot[_0x399fe9(0x108)](_0x5f1a1c[_0x399fe9(0x231)]['id'],_0x399fe9(0x11a))['catch'](_0x168ad9=>{telegramError(_0x168ad9);});}),tgBot[_0x5199d9(0x14a)](_0x5199d9(0x144));}));}function logging(_0xf7c0bc){const _0x186d83=_0x603529;console[_0x186d83(0x1e2)](getTimeStamp()+_0x186d83(0xfb)+_0xf7c0bc);if(tgBot&&settings[_0x186d83(0x198)]&&settings[_0x186d83(0x16b)]!=_0x186d83(0x181))tgBot['sendMessage'](settings[_0x186d83(0x198)],_0x186d83(0x10b)+_0xf7c0bc)['catch'](_0x3d9874=>{telegramError(_0x3d9874);});}function getServerTime(){const _0x34ab3c=_0x603529,_0x79166f=new Date();return _0x79166f[_0x34ab3c(0x203)]()+'/'+(_0x79166f['getMonth']()+0x1)['toString']()[_0x34ab3c(0x1a9)](0x2,'0')+'/'+_0x79166f[_0x34ab3c(0x196)]()[_0x34ab3c(0x20d)]()['padStart'](0x2,'0')+'\x20'+_0x79166f[_0x34ab3c(0x1b4)]()[_0x34ab3c(0x20d)]()[_0x34ab3c(0x1a9)](0x2,'0')+':'+_0x79166f[_0x34ab3c(0x19f)]()[_0x34ab3c(0x20d)]()[_0x34ab3c(0x1a9)](0x2,'0')+':'+_0x79166f[_0x34ab3c(0x187)]()[_0x34ab3c(0x20d)]()[_0x34ab3c(0x1a9)](0x2,'0');}function getTimeStamp(){const _0x5d9896=_0x603529,_0x3890c8=shiftedTime();return _0x3890c8[_0x5d9896(0x203)]()+'/'+(_0x3890c8['getMonth']()+0x1)['toString']()[_0x5d9896(0x1a9)](0x2,'0')+'/'+_0x3890c8[_0x5d9896(0x196)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3890c8['getHours']()[_0x5d9896(0x20d)]()['padStart'](0x2,'0')+':'+_0x3890c8[_0x5d9896(0x19f)]()['toString']()['padStart'](0x2,'0')+':'+_0x3890c8['getSeconds']()[_0x5d9896(0x20d)]()[_0x5d9896(0x1a9)](0x2,'0');}function shiftedTime(){const _0x558b=_0x603529,_0x45d23a=new Date();let _0x17f558=_0x45d23a;if(settings[_0x558b(0x1e7)]&&settings[_0x558b(0x1e7)]!==0x0)_0x17f558=fns[_0x558b(0x12e)](_0x45d23a,{'hours':settings[_0x558b(0x1e7)]});return _0x17f558;}function startScheduler(){const _0xee542e=_0x603529;let _0x112861=new Date()[_0xee542e(0x1ff)]();_0x112861==0x1&&backupConfigFiles();_0x112861==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x6f9d58=_0x603529;fs[_0x6f9d58(0x23b)](configpath,{'withFileTypes':!![]})[_0x6f9d58(0x233)](_0x38b8d5=>{const _0xac1ff1=_0x6f9d58;if(!_0x38b8d5[_0xac1ff1(0x1d0)]())fs[_0xac1ff1(0x225)](configpath+_0x38b8d5[_0xac1ff1(0x146)],configbackuppath+_0x38b8d5[_0xac1ff1(0x146)]);});}function triggerAnalytics(){const _0x3be2a0=_0x603529;analytics[_0x3be2a0(0x12d)]({'title':'Balance\x20Bot\x20Server','href':_0x3be2a0(0x160),'path':'/v'+serverversion});}function validateCredentials(_0x543ef5,_0x23c8fa){const _0x560f99=_0x603529;if(_0x543ef5[_0x560f99(0x161)]==settings[_0x560f99(0x137)]&&bcrypt['compareSync'](_0x543ef5[_0x560f99(0x212)],settings[_0x560f99(0x176)])){if(settings[_0x560f99(0x1ac)])return{'allow':![],'reason':_0x560f99(0x1a3),'token':null};else{const _0x459001=generateLoginToken(_0x23c8fa);return{'allow':!![],'reason':_0x560f99(0x226),'token':_0x459001};}}else return{'allow':![],'reason':_0x560f99(0x120),'token':null};}function refreshToken(_0x5c4a69){const _0x15b7de=_0x603529,_0x529016=generateLoginToken(_0x5c4a69);return{'allow':!![],'reason':_0x15b7de(0x226),'token':_0x529016};}function validateAccess(_0x5e8b27,_0x502715){const _0x31a43a=_0x603529;let _0x6e09c=devices[_0x502715]['ip'],_0x5c2396;const _0x529c0a=_0x2028d7=>{const _0x326237=_0x2fa3;if(settings[_0x326237(0xf9)]){if(settings[_0x326237(0x1ac)]){if(telegram2FaApproved(_0x502715)){const _0x13c451=generateLoginToken(_0x502715);return{'allow':!![],'reason':_0x326237(0x1ee),'token':_0x13c451};}else return{'allow':![],'reason':_0x326237(0x159),'token':null};}else return _0x5c2396=validToken(_0x2028d7,_0x502715),_0x5c2396[_0x326237(0x179)](_0x326237(0x13f))?{'allow':!![],'reason':_0x326237(0x101),'token':_0x2028d7}:{'allow':![],'reason':_0x326237(0x159),'token':null};}else return{'allow':!![],'reason':_0x326237(0x173),'token':null};};if(settings[_0x31a43a(0xed)]){let _0x50b055=[...settings[_0x31a43a(0x10f)],_0x31a43a(0x103),'::ffff:127.0.0.1','127.0.0.1'];if(_0x50b055[_0x31a43a(0x163)](_0x6e09c))return _0x529c0a(_0x5e8b27);else{_0x5c2396=validToken(_0x5e8b27,_0x502715);if(_0x5c2396['hasOwnProperty'](_0x31a43a(0x13f)))return _0x529c0a(_0x5e8b27);else{if(telegramIpApproved(_0x502715)){const _0x3da4fa=generateToken(_0x502715);return _0x5c2396=_0x529c0a(_0x5e8b27),_0x5c2396[_0x31a43a(0x1b1)]?{'allow':!![],'reason':_0x31a43a(0xf6),'token':_0x3da4fa}:_0x5c2396;}else return settings[_0x31a43a(0x236)]?{'allow':![],'reason':_0x31a43a(0x18b),'token':null}:{'allow':![],'reason':_0x31a43a(0x1b5),'token':null};}}}else return _0x529c0a(_0x5e8b27);}function timelyDecrypt(_0x20bf5c,_0x2da514=!![]){const _0x5f540d=_0x603529;if(_0x20bf5c)try{const _0x47a17a=crypt['decrypt'](secure['privateKey'],_0x20bf5c)[_0x5f540d(0x157)],_0x5a4de8=_0x47a17a[_0x5f540d(0x13d)]('@')[0x0],_0x38b8bb=_0x47a17a[_0x5f540d(0x13d)]('@')[0x1],_0x4e1c0c=new Date()['getTime']();if(_0x2da514){if(_0x4e1c0c-_0x38b8bb<maxSecretAge*0x3e8)return _0x5a4de8;else return![];}else return _0x5a4de8;}catch(_0x35cbd3){return![];}else return![];}const validToken=(_0x4bbbdf,_0x282755)=>{const _0x551f17=_0x603529,_0x2aeef3=devices[_0x282755]['ip'];if(!_0x4bbbdf)return{'error':'No\x20authentication\x20token'};for(let _0x52699f of blacklist){if(_0x52699f[_0x551f17(0x1f5)]==_0x4bbbdf)return{'error':'Token\x20blacklisted'};}let _0x1c0191;try{_0x1c0191=jwt[_0x551f17(0x16a)](_0x4bbbdf,secure['secret']+_0x282755);}catch{return{'error':_0x551f17(0x170)};}if(!_0x1c0191['hasOwnProperty'](_0x551f17(0x19a))&&!_0x1c0191['hasOwnProperty']('username')||!_0x1c0191['hasOwnProperty'](_0x551f17(0x11d)))return{'error':_0x551f17(0x216)};if(!_0x1c0191[_0x551f17(0x179)](_0x551f17(0x161))&&_0x1c0191[_0x551f17(0x179)]('clientip')){const {clientip:_0x4986c0}=_0x1c0191;return _0x2aeef3==_0x4986c0?{'success':_0x551f17(0x16c)}:{'error':_0x551f17(0x109)};}else{if(_0x1c0191['hasOwnProperty'](_0x551f17(0x161))&&_0x1c0191[_0x551f17(0x179)]('clientip')){const {username:_0x1e2b53,clientip:_0x585979}=_0x1c0191;return settings['bbUsername']==_0x1e2b53&&_0x2aeef3==_0x585979?{'success':_0x551f17(0x16c)}:{'error':_0x551f17(0x1b2)};}}},generateLoginToken=_0x3b5c61=>{const _0x31e80b=_0x603529;if(_0x3b5c61){const _0x39ea9d=devices[_0x3b5c61]['ip'];return jwt[_0x31e80b(0x20a)]({'username':settings[_0x31e80b(0x137)],'clientip':_0x39ea9d},secure[_0x31e80b(0x10c)]+_0x3b5c61,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x488c0f=>{const _0x242681=_0x603529;if(_0x488c0f){const _0x431baf=devices[_0x488c0f]['ip'];return jwt[_0x242681(0x20a)]({'clientip':_0x431baf},secure[_0x242681(0x10c)]+_0x488c0f,{'expiresIn':devices[_0x488c0f][_0x242681(0x186)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x43d87f=>{const _0x4067cb=_0x603529;let _0x100ff2=![];return devices[_0x43d87f]['telegramIpApproval']&&devices[_0x43d87f][_0x4067cb(0x186)][_0x4067cb(0x11b)]!=_0x4067cb(0x1d1)&&(_0x100ff2=devices[_0x43d87f][_0x4067cb(0x186)][_0x4067cb(0x19a)]==devices[_0x43d87f]['ip']&&new Date()[_0x4067cb(0x18a)]()-devices[_0x43d87f][_0x4067cb(0x186)][_0x4067cb(0x18f)]<devices[_0x43d87f][_0x4067cb(0x186)]['expiry']*0x3c*0x3e8),_0x100ff2;},telegram2FaApproved=_0x42c3f9=>{const _0x2f3e7f=_0x603529;let _0xbc1448=![];return devices[_0x42c3f9][_0x2f3e7f(0x117)]&&devices[_0x42c3f9][_0x2f3e7f(0x117)][_0x2f3e7f(0x11b)]!=_0x2f3e7f(0x1d1)&&(_0xbc1448=devices[_0x42c3f9][_0x2f3e7f(0x117)][_0x2f3e7f(0x19a)]==devices[_0x42c3f9]['ip']&&new Date()[_0x2f3e7f(0x18a)]()-devices[_0x42c3f9]['telegram2FaApproval']['timestamp']<devices[_0x42c3f9][_0x2f3e7f(0x117)][_0x2f3e7f(0x11b)]*0x3c*0x3e8),_0xbc1448;},normalizeIP=_0x940ed5=>{const _0x33012e=_0x603529;let _0x15dc49=null,_0x27ced2=null;if(ipaddr[_0x33012e(0x20c)](_0x940ed5)){const _0xc7697b=ipaddr[_0x33012e(0x16e)](_0x940ed5);_0xc7697b[_0x33012e(0x1f4)]()==='ipv6'?(_0xc7697b[_0x33012e(0x10a)]()&&(_0x15dc49=_0xc7697b[_0x33012e(0x195)]()[_0x33012e(0x20d)]()),_0x27ced2=_0xc7697b['toString']()):(_0x15dc49=_0xc7697b[_0x33012e(0x20d)](),_0x27ced2=_0xc7697b['toIPv4MappedAddress']()[_0x33012e(0x20d)]());}return{'show':_0x15dc49?_0x15dc49:_0x27ced2,'store':_0x27ced2};};