const _0x44aa4b=_0x403d;(function(_0x5c8dc0,_0x14ff9b){const _0x201c51=_0x403d,_0x2fa6f4=_0x5c8dc0();while(!![]){try{const _0x5315d8=parseInt(_0x201c51(0x1f6))/0x1*(-parseInt(_0x201c51(0x27b))/0x2)+-parseInt(_0x201c51(0x3b5))/0x3*(-parseInt(_0x201c51(0x2cd))/0x4)+parseInt(_0x201c51(0x381))/0x5*(parseInt(_0x201c51(0x30d))/0x6)+parseInt(_0x201c51(0x20d))/0x7*(parseInt(_0x201c51(0x249))/0x8)+parseInt(_0x201c51(0x1f0))/0x9+parseInt(_0x201c51(0x3a9))/0xa+parseInt(_0x201c51(0x201))/0xb*(-parseInt(_0x201c51(0x2b9))/0xc);if(_0x5315d8===_0x14ff9b)break;else _0x2fa6f4['push'](_0x2fa6f4['shift']());}catch(_0x168e03){_0x2fa6f4['push'](_0x2fa6f4['shift']());}}}(_0x46d3,0xef897));const _0x16c9b0=function(){let _0x1557ad=!![];return function(_0x10a118,_0x3c9392){const _0xc61a8a=_0x1557ad?function(){const _0x12b39d=_0x403d;if(_0x3c9392){const _0x2e6284=_0x3c9392[_0x12b39d(0x2e5)](_0x10a118,arguments);return _0x3c9392=null,_0x2e6284;}}:function(){};return _0x1557ad=![],_0xc61a8a;};}(),_0x6e18f7=_0x16c9b0(this,function(){const _0x5f4c60=_0x403d;return _0x6e18f7[_0x5f4c60(0x2a7)]()[_0x5f4c60(0x35a)](_0x5f4c60(0x2d1))[_0x5f4c60(0x2a7)]()[_0x5f4c60(0x2f1)](_0x6e18f7)[_0x5f4c60(0x35a)](_0x5f4c60(0x2d1));});_0x6e18f7();'use strict';process[_0x44aa4b(0x1fc)][_0x44aa4b(0x1fb)]=0x1;const childProcess=require(_0x44aa4b(0x272)),fs=require('fs'),fns=require(_0x44aa4b(0x28b)),low=require('lowdb'),FileSync=require(_0x44aa4b(0x24a)),path=require(_0x44aa4b(0x200)),crypto=require('crypto'),Crypt=require(_0x44aa4b(0x307))[_0x44aa4b(0x239)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x44aa4b(0x301)),jwt=require(_0x44aa4b(0x339)),ipaddr=require(_0x44aa4b(0x2cc)),argv=require(_0x44aa4b(0x2b4))(process[_0x44aa4b(0x358)]['slice'](0x2))[_0x44aa4b(0x358)],uuidRandom=require(_0x44aa4b(0x20b)),TelegramBot=require(_0x44aa4b(0x377)),Mixpanel=require(_0x44aa4b(0x2b7)),axios=require(_0x44aa4b(0x334)),{GraphQLClient,gql}=require(_0x44aa4b(0x378)),util=require(_0x44aa4b(0x33a)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x44aa4b(0x22b)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x44aa4b(0x23d)](_0x44aa4b(0x35c)+PORT+_0x44aa4b(0x38b)),process[_0x44aa4b(0x33b)](0x1));const HOST=argv['host']||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x44aa4b(0x2dc)];let bbpath=_0x44aa4b(0x289),bbpath2='';const botfile=_0x44aa4b(0x266),configfile=_0x44aa4b(0x31e),settingsfile=_0x44aa4b(0x25c),securefile=_0x44aa4b(0x2c6),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x44aa4b(0x363)),configpath=userID?bbpath+_0x44aa4b(0x332)+userID+'/':bbpath+_0x44aa4b(0x332),configbackuppath=configpath+_0x44aa4b(0x3c9),logspath=userID?bbpath+_0x44aa4b(0x360)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x44aa4b(0x3ab),loggerfile=fs[_0x44aa4b(0x244)](logspath+_0x44aa4b(0x1f2),{'flags':'a'}),temppath=userID?bbpath+_0x44aa4b(0x21c)+userID+'/':bbpath+_0x44aa4b(0x21c);!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x44aa4b(0x375)](configbackuppath)&&fs[_0x44aa4b(0x2d9)](configbackuppath);function _0x403d(_0x3e383b,_0x18c4d3){const _0x58d6e5=_0x46d3();return _0x403d=function(_0x6e18f7,_0x16c9b0){_0x6e18f7=_0x6e18f7-0x1e6;let _0x46d33d=_0x58d6e5[_0x6e18f7];return _0x46d33d;},_0x403d(_0x3e383b,_0x18c4d3);}!fs[_0x44aa4b(0x375)](logspath)&&fs[_0x44aa4b(0x2d9)](logspath);!fs['existsSync'](zippath)&&fs[_0x44aa4b(0x2d9)](zippath);!fs[_0x44aa4b(0x375)](temppath)&&fs[_0x44aa4b(0x2d9)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x44aa4b(0x35d)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x44aa4b(0x35d)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x44aa4b(0x2ef),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x44aa4b(0x35d)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x44aa4b(0x2d7),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x44aa4b(0x2ad)](_0x44aa4b(0x34a),{'host':_0x44aa4b(0x2f8)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x44aa4b(0x2b2)]!=''&&settings['telegramUsername']&&settings[_0x44aa4b(0x30c)]!='')initTelegram();const parseColor=(_0x45ab18,_0x1458fc)=>{const _0x272f27=_0x44aa4b,_0x517088=/#[A-Z]{3}#/g;!_0x1458fc?_0x45ab18=_0x45ab18[_0x272f27(0x293)](_0x517088,''):(_0x45ab18=_0x45ab18['replace'](/#BLU#/g,'\x1b[34m'),_0x45ab18=_0x45ab18['replace'](/#RED#/g,_0x272f27(0x318)),_0x45ab18=_0x45ab18[_0x272f27(0x293)](/#YEL#/g,_0x272f27(0x356)),_0x45ab18=_0x45ab18[_0x272f27(0x293)](/#RES#/g,'\x1b[0m'));;return _0x45ab18;},logger={'screen':_0x58b2ee=>{const _0x1ec649=_0x44aa4b;console[_0x1ec649(0x23d)](parseColor(_0x58b2ee,!![]));},'simple':_0x35b4d7=>{const _0x497a8f=_0x44aa4b;console[_0x497a8f(0x23d)](parseColor(_0x35b4d7,!![])),loggerfile[_0x497a8f(0x237)](util[_0x497a8f(0x386)](parseColor(_0x35b4d7,![]))+'\x0a');},'full':async _0x44ccd8=>{const _0x3d6dff=_0x44aa4b,_0x4fb3d8=getTimeStamp()+_0x3d6dff(0x2f6)+_0x44ccd8;console[_0x3d6dff(0x23d)](parseColor(_0x4fb3d8,!![])),loggerfile['write'](util['format'](parseColor(_0x4fb3d8,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x3d6dff(0x296)]!=_0x3d6dff(0x34c))await tgBot[_0x3d6dff(0x30e)](settings[_0x3d6dff(0x353)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x44ccd8,![]))['catch'](_0x5581ee=>{telegramError(_0x5581ee);});},'debug':async(_0x4009b1,_0x1fcf29='')=>{const _0x5ed712=_0x44aa4b,_0x572345=getTimeStamp()+_0x5ed712(0x39d)+_0x4009b1;if(debugging)console[_0x5ed712(0x23d)](parseColor(_0x572345,!![]));loggerfile[_0x5ed712(0x237)](util['format'](parseColor(_0x572345,![]))+'\x0a');if(_0x1fcf29){if(debugging)console[_0x5ed712(0x23d)](_0x1fcf29);loggerfile[_0x5ed712(0x237)](util[_0x5ed712(0x386)](_0x1fcf29)+'\x0a');}}};process['on']('uncaughtException',function(_0x113a6a){const _0x19e060=_0x44aa4b;logger[_0x19e060(0x303)](_0x113a6a);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x44aa4b(0x3b6))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x44aa4b(0x254))[_0x44aa4b(0x32f)](app);app[_0x44aa4b(0x311)](fileUpload({'useTempFiles':!![]})),app[_0x44aa4b(0x2ee)](_0x44aa4b(0x34b),async(_0x4611d7,_0x2bf46e)=>{const _0x32956f=_0x44aa4b,_0x9c9cc1=_0x4611d7[_0x32956f(0x2d2)][_0x32956f(0x267)],_0x4a31cc=getClientsWithBotID(_0x32956f(0x2b5)),_0x1173c5=_0x4611d7['headers'][_0x32956f(0x209)],_0x3cac96=timelyDecrypt(_0x1173c5,![]),_0x19e48e=_0x4a31cc[_0x32956f(0x3a3)](_0x30a86a=>_0x30a86a[_0x32956f(0x209)]==_0x3cac96);if(_0x19e48e){const _0x11ba09=normalizeIP(_0x4611d7[_0x32956f(0x2fc)][_0x32956f(0x34e)])[_0x32956f(0x204)],_0x42dd80=_0x4611d7[_0x32956f(0x34d)]['tkn'];if(validateAccess(_0x42dd80,_0x3cac96,_0x11ba09)['allow'])_0x9c9cc1==_0x32956f(0x30a)&&await backupConfigFiles(),await zipFiles(_0x9c9cc1),_0x2bf46e[_0x32956f(0x370)](zippath+(_0x9c9cc1+_0x32956f(0x29f)),_0x5295cb=>{const _0x4f6109=_0x32956f;_0x5295cb&&(logger[_0x4f6109(0x247)]('Failed\x20to\x20download\x20'+_0x9c9cc1),logger[_0x4f6109(0x303)](_0x5295cb));});else logger[_0x32956f(0x247)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x9c9cc1+'\x20(1)');}else logger[_0x32956f(0x247)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x9c9cc1+_0x32956f(0x362));}),app['post']('/upload-backup',async(_0x7b9aa3,_0x538f7b)=>{const _0x8bfede=_0x44aa4b,_0x9327c1=getClientsWithBotID(_0x8bfede(0x2b5)),_0x4b11d2=_0x7b9aa3[_0x8bfede(0x34d)][_0x8bfede(0x209)],_0x118bda=timelyDecrypt(_0x4b11d2,![]),_0x1030ab=_0x9327c1['find'](_0x4f7c4e=>_0x4f7c4e[_0x8bfede(0x209)]==_0x118bda);logger[_0x8bfede(0x203)](_0x8bfede(0x27d));if(_0x1030ab){const _0x334d59=normalizeIP(_0x7b9aa3[_0x8bfede(0x2fc)]['remoteAddress'])['store'],_0x3267ca=_0x7b9aa3[_0x8bfede(0x34d)]['tkn'];if(validateAccess(_0x3267ca,_0x118bda,_0x334d59)[_0x8bfede(0x313)]){if(_0x7b9aa3['files']){const _0x49c298=_0x7b9aa3[_0x8bfede(0x341)]['backupfile'];await _0x49c298['mv'](temppath+_0x49c298['name']),_0x538f7b[_0x8bfede(0x233)]({'status':!![],'message':_0x8bfede(0x3ca)});const _0x1e1392=getBotsWithMode();_0x1e1392[_0x8bfede(0x284)]>0x0?confirmRestore(temppath,_0x49c298[_0x8bfede(0x2e0)]):unzipFile(temppath,_0x49c298[_0x8bfede(0x2e0)]);}}else logger[_0x8bfede(0x247)](_0x8bfede(0x2a0));}else logger[_0x8bfede(0x247)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x44aa4b(0x311)](express[_0x44aa4b(0x2d3)](path[_0x44aa4b(0x39c)](__dirname,bbpath2,_0x44aa4b(0x37a)))),app[_0x44aa4b(0x311)](express[_0x44aa4b(0x2d3)](path['join'](__dirname,bbpath2,'build'))),app[_0x44aa4b(0x2ee)]('/',function(_0x2b9a08,_0x31cf17){const _0x407c93=_0x44aa4b;_0x31cf17[_0x407c93(0x274)](path[_0x407c93(0x39c)](__dirname,bbpath2,_0x407c93(0x37a),_0x407c93(0x394)));}),app[_0x44aa4b(0x2ee)]('/:bot',function(_0xd61920,_0x40d22b){const _0x45f2f3=_0x44aa4b;_0x40d22b['sendFile'](path[_0x45f2f3(0x39c)](__dirname,bbpath2,_0x45f2f3(0x285),'index.html'));}),app['get'](_0x44aa4b(0x344),(_0xf0e764,_0x44a7b4)=>{const _0x3cfbf0=_0x44aa4b;_0x44a7b4[_0x3cfbf0(0x274)](path[_0x3cfbf0(0x39c)](__dirname,bbpath2,'build',_0x3cfbf0(0x394)));}),app['get'](_0x44aa4b(0x291),(_0x51dfe1,_0x58e217)=>{const _0x30c195=_0x44aa4b;_0x58e217[_0x30c195(0x274)](path[_0x30c195(0x39c)](__dirname,bbpath2,_0x30c195(0x285),_0x30c195(0x394)));}),app[_0x44aa4b(0x2ee)]('/:bot/coins',(_0x4af223,_0x2317ae)=>{const _0x3c6ecd=_0x44aa4b;_0x2317ae['sendFile'](path['join'](__dirname,bbpath2,'build',_0x3c6ecd(0x394)));}),app['get']('/:bot/history',(_0x3678dd,_0xf40ead)=>{const _0x2e8fa4=_0x44aa4b;_0xf40ead[_0x2e8fa4(0x274)](path[_0x2e8fa4(0x39c)](__dirname,bbpath2,_0x2e8fa4(0x285),_0x2e8fa4(0x394)));}),app[_0x44aa4b(0x2ee)](_0x44aa4b(0x220),(_0x5aedd7,_0x168de0)=>{const _0x2ad49e=_0x44aa4b;_0x168de0[_0x2ad49e(0x274)](path[_0x2ad49e(0x39c)](__dirname,bbpath2,_0x2ad49e(0x285),_0x2ad49e(0x394)));}),app[_0x44aa4b(0x2ee)](_0x44aa4b(0x33d),(_0x29d837,_0x2e4774)=>{const _0x3baf02=_0x44aa4b;_0x2e4774['sendFile'](path[_0x3baf02(0x39c)](__dirname,bbpath2,_0x3baf02(0x285),_0x3baf02(0x394)));});if(HOST)http[_0x44aa4b(0x2e7)](PORT,HOST);else http[_0x44aa4b(0x2e7)](PORT);const io=require(_0x44aa4b(0x30f))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x7576e2=_0x44aa4b;let _0x1f0855=_0x7576e2(0x29c);const _0x2e9b8a=networkInterfaces(),_0x32ebdf={};for(const _0x4d2f89 of Object[_0x7576e2(0x2a4)](_0x2e9b8a)){for(const _0x1614ed of _0x2e9b8a[_0x4d2f89]){if((_0x1614ed[_0x7576e2(0x23e)]==_0x7576e2(0x306)||_0x1614ed['family']==0x4)&&!_0x1614ed[_0x7576e2(0x32e)]){const _0x2ae188=ipaddr[_0x7576e2(0x2ae)](_0x1614ed[_0x7576e2(0x234)])[_0x7576e2(0x37c)]();_0x2ae188!=_0x7576e2(0x21d)&&(!_0x32ebdf[_0x4d2f89]&&(_0x32ebdf[_0x4d2f89]=[]),_0x32ebdf[_0x4d2f89]['push'](_0x1614ed['address']),_0x1f0855=_0x1614ed['address']);}}}return logger[_0x7576e2(0x203)](_0x7576e2(0x2c5),_0x32ebdf),_0x1f0855;}async function startServer(){const _0x53b19e=_0x44aa4b;logger[_0x53b19e(0x303)](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger[_0x53b19e(0x247)](_0x53b19e(0x214)+serverversion+'#RES#\x0a'+(_0x53b19e(0x2d0)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x53b19e(0x347)+getServerIP()+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),await logger['debug'](_0x53b19e(0x369)+nodeversion),logger[_0x53b19e(0x303)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x349f81 of config){if(_0x349f81[_0x53b19e(0x2e4)]==_0x53b19e(0x312)||_0x349f81[_0x53b19e(0x2e4)]==_0x53b19e(0x1eb))await logger[_0x53b19e(0x247)](_0x53b19e(0x28a)+_0x349f81[_0x53b19e(0x231)]+_0x53b19e(0x36c)+_0x349f81[_0x53b19e(0x359)]),startBot([_0x349f81[_0x53b19e(0x231)],userID],{'cwd':bbpath},function(_0x125ad1){const _0x28ac01=_0x53b19e;if(_0x125ad1)logger[_0x28ac01(0x247)](_0x125ad1);});else(_0x349f81[_0x53b19e(0x2e4)]==_0x53b19e(0x38f)||_0x349f81[_0x53b19e(0x2e4)]==_0x53b19e(0x2c8))&&await logger[_0x53b19e(0x247)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x349f81[_0x53b19e(0x231)]+_0x53b19e(0x36c)+_0x349f81['botname']);}else!newBot&&logger[_0x53b19e(0x303)](_0x53b19e(0x258));if(newBot)addBot();logger['simple'](_0x53b19e(0x280)),logger['simple']('');}function startSocket(){const _0x518765=_0x44aa4b;io['on'](_0x518765(0x208),_0x5461d1=>{const _0x182545=_0x518765;let _0x4c6907,_0x8f7575,_0x4be603,_0x4869c7,_0x1e2b76;const _0x27bf27=_0x5461d1[_0x182545(0x20a)][_0x182545(0x34d)][_0x182545(0x1ec)];_0x8f7575=_0x27bf27[_0x182545(0x2ec)](/bot[0-9]{3}/);if(_0x8f7575)_0x4be603=_0x8f7575[0x0]['match'](/[0-9]{3}/);if(_0x4be603)_0x4c6907=_0x4be603[0x0];else _0x4c6907=_0x182545(0x2b5);const _0x4ab385=_0x5461d1[_0x182545(0x20a)][_0x182545(0x2e3)][_0x182545(0x35f)];if(!_0x4ab385)_0x5461d1[_0x182545(0x310)]('status',{'publicKey':secure[_0x182545(0x1ee)]});else{_0x4869c7=timelyDecrypt(_0x4ab385,![]);if(!_0x4869c7)_0x5461d1[_0x182545(0x310)](_0x182545(0x2e4),{'publicKey':secure['publicKey']});else{_0x1e2b76=normalizeIP(_0x5461d1[_0x182545(0x39b)][_0x182545(0x34e)])[_0x182545(0x204)];if(!devices[_0x4869c7])devices[_0x4869c7]={'uuid':_0x4869c7,'access':{'token':null}};devices[_0x4869c7]['ip']=_0x1e2b76;const _0x322fc2=addClient(_0x5461d1['id'],_0x4869c7,_0x4c6907);setAccess(_0x322fc2),emitMessages(),_0x5461d1['on'](_0x182545(0x382),_0x4719f8=>{const _0x44845a=_0x182545,_0x13043e=timelyDecrypt(_0x4719f8[_0x44845a(0x3c1)]);if(_0x13043e){_0x4719f8={'username':_0x4719f8['username'],'password':_0x13043e},devices[_0x4869c7][_0x44845a(0x1f3)]=validateCredentials(_0x4719f8,_0x4869c7);if(devices[_0x4869c7]['access']['allow']==![]&&devices[_0x4869c7][_0x44845a(0x1f3)][_0x44845a(0x241)]=='2FA\x20login\x20required')_0x5461d1['emit'](_0x44845a(0x2e4),{'access':devices[_0x4869c7][_0x44845a(0x1f3)]}),loginAccess2FA(_0x4869c7,_0x1e2b76);else{if(devices[_0x4869c7][_0x44845a(0x1f3)]['allow']==![]&&devices[_0x4869c7][_0x44845a(0x1f3)][_0x44845a(0x241)]=='invalid\x20credentials')_0x5461d1[_0x44845a(0x310)]('status',{'access':devices[_0x4869c7][_0x44845a(0x1f3)]});else devices[_0x4869c7][_0x44845a(0x1f3)][_0x44845a(0x313)]&&devices[_0x4869c7]['access'][_0x44845a(0x241)]==_0x44845a(0x2a8)&&(getClientsWithUuid(_0x4869c7)[_0x44845a(0x1fd)](_0x634a4c=>{setAccess(_0x634a4c);}),logger[_0x44845a(0x203)](_0x44845a(0x331)+_0x4869c7[_0x44845a(0x398)](-0x8)),setTokenRefresh(_0x4869c7),setSessionTimeout('login',_0x4869c7));}}else logger[_0x44845a(0x247)](_0x44845a(0x305));}),_0x5461d1['on'](_0x182545(0x26e),()=>{resetPassword();}),_0x5461d1['on']('disconnect',_0x5da71e=>{removeClient(_0x5461d1['id']);}),_0x4c6907==_0x182545(0x2b5)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0xad6fd8){const _0x2c4401=_0x44aa4b;if(_0xad6fd8!='botmanager'&&config['apiKey']!=''){if(pid[_0xad6fd8])pid[_0xad6fd8]['send']({'function':_0x2c4401(0x25b),'args':null});}_0xad6fd8!=_0x2c4401(0x2b5)&&broadcastToBots(_0x2c4401(0x300),JSON[_0x2c4401(0x326)](config));}function reloadBotManager(){const _0x55faeb=_0x44aa4b;getClientsWithBotID(_0x55faeb(0x2b5))[_0x55faeb(0x1fd)](_0x4340db=>{const _0x4f0482=_0x55faeb;getSocket(_0x4340db['id'])[_0x4f0482(0x310)]('status',{'access':{'allow':![],'reason':_0x4f0482(0x391),'token':null}});});}function getSocket(_0x48b58a){const _0x3a5e19=_0x44aa4b;return io[_0x3a5e19(0x36b)]['sockets'][_0x3a5e19(0x2ee)](_0x48b58a);}function setAccess(_0x1c38e0){const _0x590a4a=_0x44aa4b,_0x3f3fd2=getSocket(_0x1c38e0['id']),_0x1c077f=_0x1c38e0[_0x590a4a(0x209)],_0x345d91=_0x1c38e0[_0x590a4a(0x2ed)];devices[_0x1c077f][_0x590a4a(0x1f3)]=validateAccess(devices[_0x1c077f][_0x590a4a(0x1f3)]['token'],_0x1c077f),logger[_0x590a4a(0x203)](_0x590a4a(0x226)+devices[_0x1c077f][_0x590a4a(0x1f3)]['reason']+_0x590a4a(0x3a1)+_0x1c38e0['id'][_0x590a4a(0x398)](-0x8)+_0x590a4a(0x2aa)+_0x1c077f[_0x590a4a(0x398)](-0x8)),_0x3f3fd2[_0x590a4a(0x39c)](_0x1c077f);if(devices[_0x1c077f]['access']['allow']){_0x3f3fd2['join'](_0x345d91);if(_0x345d91==_0x590a4a(0x2b5))initializeSocketBotManager(_0x3f3fd2);else initializeSocketBot(_0x3f3fd2);initClient(_0x345d91);}devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x229)]&&devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x241)]==_0x590a4a(0x33e)&&setSessionTimeout(_0x590a4a(0x2bf),_0x1c077f),devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x229)]&&devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x241)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x590a4a(0x382),_0x1c077f),_0x3f3fd2['emit'](_0x590a4a(0x2e4),{'status':_0x1c38e0[_0x590a4a(0x32c)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1c077f][_0x590a4a(0x1f3)],'externalip':devices[_0x1c077f]['ip'],'publicKey':secure[_0x590a4a(0x1ee)],'userid':settings[_0x590a4a(0x346)],'validInstallation':validInstallation}),devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x313)]==![]&&devices[_0x1c077f][_0x590a4a(0x1f3)][_0x590a4a(0x241)]==_0x590a4a(0x3bb)&&temporaryAccess2FA(_0x1c077f,devices[_0x1c077f]['ip']);}function setSessionTimeout(_0x1c59cd,_0x1c8b54){const _0x578de6=_0x44aa4b;let _0x55c02f;if(_0x1c59cd==_0x578de6(0x382))_0x55c02f=loginExpiry*0x3c*0x3e8;else _0x55c02f=devices[_0x1c8b54]['telegramIpApproval'][_0x578de6(0x3c0)]*0x3c*0x3e8-(new Date()[_0x578de6(0x3a6)]()-devices[_0x1c8b54]['telegramIpApproval'][_0x578de6(0x32b)]);if(devices[_0x1c8b54][_0x578de6(0x390)])clearTimeout(devices[_0x1c8b54][_0x578de6(0x390)]);devices[_0x1c8b54][_0x578de6(0x390)]=setTimeout(()=>{const _0x28c660=_0x578de6;if(devices[_0x1c8b54][_0x28c660(0x27e)])clearTimeout(devices[_0x1c8b54]['pidRefreshToken']);removeSocketListeners(_0x1c8b54),addBlacklist(_0x1c8b54),devices[_0x1c8b54][_0x28c660(0x36d)]=null,devices[_0x1c8b54][_0x28c660(0x308)]=null,devices[_0x1c8b54][_0x28c660(0x1f3)][_0x28c660(0x229)]=null,logger['debug'](_0x28c660(0x3c4)+_0x1c8b54['slice'](-0x8)),devices[_0x1c8b54]['access']=validateAccess(devices[_0x1c8b54][_0x28c660(0x1f3)][_0x28c660(0x229)],_0x1c8b54),!(devices[_0x1c8b54][_0x28c660(0x1f3)]['allow']&&devices[_0x1c8b54]['access']['reason']==_0x28c660(0x397))&&(_0x1c59cd==_0x28c660(0x382)?io['to'](_0x1c8b54)[_0x28c660(0x310)](_0x28c660(0x2e4),{'access':{'allow':![],'reason':_0x28c660(0x2bc),'token':null}}):io['to'](_0x1c8b54)[_0x28c660(0x310)](_0x28c660(0x2e4),{'access':{'allow':![],'reason':_0x28c660(0x328),'token':null}})),devices[_0x1c8b54][_0x28c660(0x1f3)]['token']=null;},_0x55c02f);}function setTokenRefresh(_0x2543b1){const _0xb7d294=_0x44aa4b;if(devices[_0x2543b1][_0xb7d294(0x27e)])clearTimeout(devices[_0x2543b1][_0xb7d294(0x27e)]);devices[_0x2543b1][_0xb7d294(0x27e)]=setTimeout(()=>{const _0x579f1d=_0xb7d294;getClientsWithUuid(_0x2543b1)[_0x579f1d(0x284)]!=0x0?(devices[_0x2543b1]['access']=refreshToken(_0x2543b1),io['to'](_0x2543b1)[_0x579f1d(0x310)](_0x579f1d(0x2e4),{'status':_0x579f1d(0x2a6),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2543b1][_0x579f1d(0x1f3)],'externalip':devices[_0x2543b1]['ip'],'publicKey':secure[_0x579f1d(0x1ee)],'validInstallation':validInstallation}),setTokenRefresh(_0x2543b1)):clearTimeout(devices[_0x2543b1]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5892b2){const _0x29bf8b=_0x44aa4b,_0x52a3fb=getClient(_0x5892b2['id'])['uuid'];_0x5892b2['emit'](_0x29bf8b(0x300),config),_0x5892b2[_0x29bf8b(0x310)](_0x29bf8b(0x335),cleanSettings()),_0x5892b2['on'](_0x29bf8b(0x227),_0x20cdee=>{const _0x414ba0=_0x29bf8b;if(validateAccess(_0x20cdee,_0x52a3fb)[_0x414ba0(0x313)])addBot();else logger[_0x414ba0(0x247)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5892b2['on'](_0x29bf8b(0x31d),(_0x51a1bf,_0x1218f4)=>{const _0x5e8c34=_0x29bf8b;if(validateAccess(_0x1218f4,_0x52a3fb)[_0x5e8c34(0x313)])toggleBot(_0x51a1bf[_0x5e8c34(0x231)],_0x51a1bf[_0x5e8c34(0x2e4)],_0x51a1bf[_0x5e8c34(0x217)]);else logger[_0x5e8c34(0x247)](_0x5e8c34(0x2b8));}),_0x5892b2['on'](_0x29bf8b(0x2af),(_0x36cccd,_0xd05488)=>{const _0x36fab7=_0x29bf8b;if(validateAccess(_0xd05488,_0x52a3fb)[_0x36fab7(0x313)])toggleBotMode(_0x36cccd);else logger[_0x36fab7(0x247)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5892b2['on']('delete-bot',(_0x653ca0,_0x2f5074)=>{const _0x509de7=_0x29bf8b;if(validateAccess(_0x2f5074,_0x52a3fb)['allow'])deleteBot(_0x653ca0);else logger['full'](_0x509de7(0x2dd));}),_0x5892b2['on'](_0x29bf8b(0x38d),(_0x497212,_0x3185ed)=>{const _0x3237f6=_0x29bf8b;if(validateAccess(_0x3185ed,_0x52a3fb)['allow'])storeSettings(_0x497212,!![]);else logger[_0x3237f6(0x247)](_0x3237f6(0x212));}),_0x5892b2['on'](_0x29bf8b(0x2c2),_0xa13727=>{const _0x494d8e=_0x29bf8b;if(validateAccess(_0xa13727,_0x52a3fb)[_0x494d8e(0x313)])updateBB('update');else logger[_0x494d8e(0x247)](_0x494d8e(0x242));}),_0x5892b2['on'](_0x29bf8b(0x3c6),_0x4a1938=>{const _0x381979=_0x29bf8b;if(validateAccess(_0x4a1938,_0x52a3fb)[_0x381979(0x313)])updateBB(_0x381979(0x281));else logger[_0x381979(0x247)](_0x381979(0x324));}),_0x5892b2['on'](_0x29bf8b(0x343),_0x4dcd3f=>{const _0x1c3773=_0x29bf8b;if(validateAccess(_0x4dcd3f,_0x52a3fb)['allow']){const _0x20cb82=getClient(_0x5892b2['id']);if(_0x20cb82)getBackupFiles(_0x20cb82[_0x1c3773(0x209)]);else logger[_0x1c3773(0x247)](_0x1c3773(0x278));}else logger['full'](_0x1c3773(0x248));}),_0x5892b2['on'](_0x29bf8b(0x37e),(_0xff4029,_0x225329)=>{const _0x39cc9a=_0x29bf8b;if(validateAccess(_0x225329,_0x52a3fb)[_0x39cc9a(0x313)])restoreBackupFile(_0xff4029);else logger[_0x39cc9a(0x247)](_0x39cc9a(0x340));}),_0x5892b2['on'](_0x29bf8b(0x3a4),_0x26878c=>{const _0x2c52c2=_0x29bf8b;if(validateAccess(_0x26878c,_0x52a3fb)['allow'])getMessages();else logger[_0x2c52c2(0x247)](_0x2c52c2(0x393));}),_0x5892b2['on'](_0x29bf8b(0x368),(_0x47dd12,_0x5b9708)=>{const _0x13968c=_0x29bf8b;if(validateAccess(_0x5b9708,_0x52a3fb)[_0x13968c(0x313)])confirmMessage(_0x47dd12);else logger[_0x13968c(0x247)](_0x13968c(0x3b2));}),_0x5892b2['on']('logout',_0x1d73af=>{const _0x32de7d=_0x29bf8b;if(validateAccess(_0x1d73af,_0x52a3fb)[_0x32de7d(0x313)]){if(devices[_0x52a3fb][_0x32de7d(0x27e)])clearTimeout(devices[_0x52a3fb][_0x32de7d(0x27e)]);if(devices[_0x52a3fb][_0x32de7d(0x390)])clearTimeout(devices[_0x52a3fb]['pidExpireLogin']);removeSocketListeners(getClient(_0x5892b2['id'])[_0x32de7d(0x209)]),addBlacklist(_0x52a3fb),devices[_0x52a3fb][_0x32de7d(0x36d)]=null,devices[_0x52a3fb][_0x32de7d(0x308)]=null,devices[_0x52a3fb][_0x32de7d(0x1f3)]['token']=null,logger[_0x32de7d(0x203)](_0x32de7d(0x38a)+_0x52a3fb['slice'](-0x8)),io['to'](getClient(_0x5892b2['id'])[_0x32de7d(0x209)])[_0x32de7d(0x310)]('status',{'access':{'allow':![],'reason':_0x32de7d(0x384),'token':null}});}else logger['full'](_0x32de7d(0x240));});}function initializeSocketBot(_0x4fa8b3){const _0x32f0ba=_0x44aa4b,_0xa07cd9=getClient(_0x4fa8b3['id'])['bot'],_0x5404e3=getClient(_0x4fa8b3['id'])['uuid'];_0x4fa8b3['on']('get-logs',(_0x1ce613,_0x6a7104)=>{const _0x287b04=_0x403d;if(validateAccess(_0x6a7104,_0x5404e3)[_0x287b04(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x287b04(0x233)]({'function':'emitHistory','args':_0x1ce613});}else logger[_0x287b04(0x247)](_0x287b04(0x1ef));}),_0x4fa8b3['on'](_0x32f0ba(0x37f),(_0x223f51,_0x472322)=>{const _0x16b813=_0x32f0ba;if(validateAccess(_0x472322,_0x5404e3)[_0x16b813(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9]['send']({'function':_0x16b813(0x24e),'args':_0x223f51});}else logger['full'](_0x16b813(0x262));}),_0x4fa8b3['on'](_0x32f0ba(0x2d6),(_0x54b1e0,_0x58272a)=>{const _0x370739=_0x32f0ba;if(validateAccess(_0x58272a,_0x5404e3)[_0x370739(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x370739(0x233)]({'function':_0x370739(0x2ac),'args':_0x54b1e0});}else logger[_0x370739(0x247)](_0x370739(0x2c9));}),_0x4fa8b3['on'](_0x32f0ba(0x2f0),(_0x1ae32d,_0x23aab5)=>{const _0x52e988=_0x32f0ba;if(validateAccess(_0x23aab5,_0x5404e3)[_0x52e988(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x52e988(0x233)]({'function':_0x52e988(0x2e8),'args':_0x1ae32d});}else logger[_0x52e988(0x247)](_0x52e988(0x2ce));}),_0x4fa8b3['on'](_0x32f0ba(0x3a0),(_0x215dab,_0x16f0fc)=>{const _0x5ad433=_0x32f0ba;if(validateAccess(_0x16f0fc,_0x5404e3)[_0x5ad433(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x5ad433(0x233)]({'function':_0x5ad433(0x31a),'args':_0x215dab});}else logger[_0x5ad433(0x247)](_0x5ad433(0x22a));}),_0x4fa8b3['on']('store-fiat',(_0x1ef932,_0x553667)=>{const _0x347864=_0x32f0ba;if(validateAccess(_0x553667,_0x5404e3)[_0x347864(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x347864(0x233)]({'function':_0x347864(0x2e2),'args':_0x1ef932});}else logger[_0x347864(0x247)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x4fa8b3['on'](_0x32f0ba(0x21e),_0x1ff70d=>{const _0x10f409=_0x32f0ba;if(validateAccess(_0x1ff70d,_0x5404e3)[_0x10f409(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x10f409(0x233)]({'function':'resetHistory','args':null});}else logger[_0x10f409(0x247)](_0x10f409(0x21f));}),_0x4fa8b3['on'](_0x32f0ba(0x325),_0x4e2131=>{const _0x1d96dd=_0x32f0ba;if(validateAccess(_0x4e2131,_0x5404e3)[_0x1d96dd(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x1d96dd(0x233)]({'function':_0x1d96dd(0x2fa),'args':null});}else logger[_0x1d96dd(0x247)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4fa8b3['on'](_0x32f0ba(0x2f3),(_0x42785c,_0x1a2d14)=>{const _0x1b529c=_0x32f0ba;if(validateAccess(_0x1a2d14,_0x5404e3)[_0x1b529c(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x1b529c(0x233)]({'function':_0x1b529c(0x26a),'args':_0x42785c});}else logger[_0x1b529c(0x247)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x4fa8b3['on'](_0x32f0ba(0x39a),_0x371e5d=>{const _0xe5360f=_0x32f0ba;if(validateAccess(_0x371e5d,_0x5404e3)[_0xe5360f(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0xe5360f(0x233)]({'function':_0xe5360f(0x27f),'args':null});}else logger[_0xe5360f(0x247)](_0xe5360f(0x1f8));}),_0x4fa8b3['on'](_0x32f0ba(0x23b),_0x414dc9=>{const _0x39bb5e=_0x32f0ba;if(validateAccess(_0x414dc9,_0x5404e3)[_0x39bb5e(0x313)]){if(pid[_0xa07cd9])pid[_0xa07cd9][_0x39bb5e(0x233)]({'function':_0x39bb5e(0x26d),'args':null});}else logger[_0x39bb5e(0x247)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x4fa8b3['on'](_0x32f0ba(0x2c2),_0x57916f=>{const _0x30d7b9=_0x32f0ba;if(validateAccess(_0x57916f,_0x5404e3)[_0x30d7b9(0x313)])updateBB(_0x30d7b9(0x235));else logger['full'](_0x30d7b9(0x242));}),_0x4fa8b3['on']('get-messages',_0x217dfb=>{const _0x14ca37=_0x32f0ba;if(validateAccess(_0x217dfb,_0x5404e3)[_0x14ca37(0x313)])getMessages();else logger[_0x14ca37(0x247)](_0x14ca37(0x393));}),_0x4fa8b3['on']('confirm-message',(_0x3f1f8c,_0x13b8df)=>{const _0x5cc945=_0x32f0ba;if(validateAccess(_0x13b8df,_0x5404e3)['allow'])confirmMessage(_0x3f1f8c);else logger[_0x5cc945(0x247)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4fa8b3['on'](_0x32f0ba(0x315),_0x4a8c06=>{const _0x480298=_0x32f0ba;if(validateAccess(_0x4a8c06,_0x5404e3)['allow']){if(devices[_0x5404e3][_0x480298(0x27e)])clearTimeout(devices[_0x5404e3]['pidRefreshToken']);if(devices[_0x5404e3][_0x480298(0x390)])clearTimeout(devices[_0x5404e3]['pidExpireLogin']);removeSocketListeners(getClient(_0x4fa8b3['id'])[_0x480298(0x209)]),addBlacklist(_0x5404e3),devices[_0x5404e3]['telegramIpApproval']=null,devices[_0x5404e3]['telegram2FaApproval']=null,devices[_0x5404e3][_0x480298(0x1f3)][_0x480298(0x229)]=null,logger[_0x480298(0x203)](_0x480298(0x38a)+_0x5404e3[_0x480298(0x398)](-0x8)),io['to'](getClient(_0x4fa8b3['id'])['uuid'])[_0x480298(0x310)]('status',{'access':{'allow':![],'reason':_0x480298(0x384),'token':null}});}else logger[_0x480298(0x247)](_0x480298(0x240));});}function removeSocketListeners(_0x1808b3){const _0x144962=_0x44aa4b;getClientsWithUuid(_0x1808b3)[_0x144962(0x1fd)](_0x1e5f0a=>{const _0x3747b1=_0x144962;getSocket(_0x1e5f0a['id'])[_0x3747b1(0x3c7)]();});}function cleanSettings(){const _0x1afefb=_0x44aa4b;let _0x31067f=settings;return settings[_0x1afefb(0x2b2)]&&settings['telegramToken']!=''&&(_0x31067f={..._0x31067f,'telegramToken':_0x1afefb(0x22e)}),settings[_0x1afefb(0x255)]&&settings[_0x1afefb(0x255)]!=''&&(_0x31067f={..._0x31067f,'bbPassword':_0x1afefb(0x22e)}),(settings[_0x1afefb(0x255)]&&settings[_0x1afefb(0x255)]==_0x1afefb(0x39f)||settings[_0x1afefb(0x2b2)]&&settings[_0x1afefb(0x2b2)]=='***')&&(_0x31067f={..._0x31067f,'restored':{'password':settings[_0x1afefb(0x255)]==_0x1afefb(0x39f),'telegram':settings[_0x1afefb(0x2b2)]==_0x1afefb(0x39f)}}),_0x31067f;}async function updateBB(_0x47f4be){const _0x3c2fba=_0x44aa4b;await backupConfigFiles(),installingUpdate=!![],config[_0x3c2fba(0x1fd)](_0x43bf92=>{const _0x265c4a=_0x3c2fba;restartBot(_0x43bf92[_0x265c4a(0x231)]);}),logger['debug'](_0x3c2fba(0x29e)+_0x47f4be);if(_0x47f4be==_0x3c2fba(0x235))process['send']({'update':!![]},_0x39cc93=>{});else _0x47f4be=='reinstall'&&process[_0x3c2fba(0x233)]({'reinstall':!![]},_0x2e8490=>{});}function startBot(_0x15543f,_0x333c3e,_0x441e79){const _0x64fea9=_0x44aa4b;if(debugging)_0x15543f[_0x64fea9(0x3af)]('-d');let _0x552ca2=![];const _0x2f2cba=_0x15543f[0x0];_0x333c3e={..._0x333c3e,'stdio':[_0x64fea9(0x351),_0x64fea9(0x351),_0x64fea9(0x351),'ipc']},pid[_0x2f2cba]=childProcess[_0x64fea9(0x27a)](botfile,_0x15543f,_0x333c3e),pid[_0x2f2cba]['on'](_0x64fea9(0x24f),_0x3a944b=>{const _0x3e3f68=_0x64fea9;switch(Object['keys'](_0x3a944b)[0x0]){case'botname':updateBotName(_0x2f2cba,_0x3a944b['botname']);break;case'updatebotmanager':updateBotManager();break;case _0x3e3f68(0x2e4):updateStatus(_0x2f2cba,_0x3a944b['status']);break;case _0x3e3f68(0x217):updateLive(_0x2f2cba,_0x3a944b['live']);break;case _0x3e3f68(0x388):updateLive(_0x2f2cba,_0x3a944b[_0x3e3f68(0x388)]),io['to'](_0x2f2cba)[_0x3e3f68(0x310)](_0x3e3f68(0x2e4),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x3e3f68(0x1ed):_0x3a944b[_0x3e3f68(0x1ed)]==_0x3e3f68(0x252)&&restartBot(_0x2f2cba);_0x3a944b['stop']==_0x3e3f68(0x2a1)&&toggleBot(_0x2f2cba,_0x3e3f68(0x38f),_0x3e3f68(0x309));break;case _0x3e3f68(0x223):sendTelegram(_0x2f2cba,_0x3a944b[_0x3e3f68(0x223)]);break;case _0x3e3f68(0x342):sendTelegramMsg(_0x3a944b[_0x3e3f68(0x342)]);break;case _0x3e3f68(0x371):io['to'](_0x2f2cba)[_0x3e3f68(0x310)](_0x3a944b['function'],_0x3a944b[_0x3e3f68(0x1e7)]);break;}}),pid[_0x2f2cba]['on'](_0x64fea9(0x2bb),function(_0x519df0){if(_0x552ca2)return;_0x552ca2=!![],_0x441e79(_0x519df0);}),pid[_0x2f2cba]['on']('exit',async function(_0x7862d2){const _0x34c396=_0x64fea9;if(installingUpdate)return;if(_0x552ca2)return;_0x552ca2=!![],_0x441e79(null);const _0x197336=dbConfig[_0x34c396(0x2ee)]('bots')[_0x34c396(0x3a3)]({'botID':_0x2f2cba})[_0x34c396(0x3b1)]();_0x197336&&(_0x197336['status']==_0x34c396(0x312)||_0x197336['status']==_0x34c396(0x1eb))&&(await sleep(0x3e8),updateLive(_0x2f2cba,_0x34c396(0x309)),logger['full']('Restarting\x20Bot\x20'+_0x2f2cba),startBot([_0x2f2cba,userID],{'cwd':bbpath},function(_0x3e3c46){const _0x453890=_0x34c396;if(_0x3e3c46)logger[_0x453890(0x247)](_0x3e3c46);}));});}function stopBot(_0x4ecd43){const _0x15be35=_0x44aa4b;getClientsWithBotID(_0x4ecd43)[_0x15be35(0x1fd)](_0x5d0495=>{const _0x2eef7c=_0x15be35;getSocket(_0x5d0495['id'])[_0x2eef7c(0x2a5)](!![]),removeClient(_0x5d0495['id']);}),pid[_0x4ecd43]&&(pid[_0x4ecd43][_0x15be35(0x2a1)](),pid[_0x4ecd43]=null);}function restartBot(_0x378596){const _0x5c57ab=_0x44aa4b;if(pid[_0x378596])pid[_0x378596][_0x5c57ab(0x2a1)]();}function addBot(){const _0x423533=_0x44aa4b;let _0x4e8f48;for(let _0x9d4e7c=0x1;_0x9d4e7c<0x3e9;_0x9d4e7c++){_0x4e8f48=_0x9d4e7c[_0x423533(0x2a7)]()['padStart'](0x3,'0');let _0x4f6ed1=config[_0x423533(0x3a3)](_0x58ad98=>_0x58ad98[_0x423533(0x231)]==_0x4e8f48);if(!_0x4f6ed1)break;}if(_0x4e8f48==='1000'){logger[_0x423533(0x247)](_0x423533(0x320));return;}logger[_0x423533(0x247)](_0x423533(0x2ba)+_0x4e8f48),dbConfig[_0x423533(0x2ee)](_0x423533(0x300))['push']({'botID':_0x4e8f48,'botname':_0x423533(0x33c)+_0x4e8f48,'status':_0x423533(0x1eb),'live':''})[_0x423533(0x237)](),startBot([_0x4e8f48,userID],{'cwd':bbpath},function(_0x330a1d){if(_0x330a1d)logger['full'](_0x330a1d);}),config=getConfiguration(),io['to'](_0x423533(0x2b5))[_0x423533(0x310)]('bots',config),broadcastToBots(_0x423533(0x300),JSON[_0x423533(0x326)](config));}function deleteBot(_0x1a43a3){const _0x528d8e=_0x44aa4b;getClientsWithBotID(_0x1a43a3)[_0x528d8e(0x1fd)](_0x1cdbdf=>{const _0x1fe0be=_0x528d8e;getSocket(_0x1cdbdf['id'])[_0x1fe0be(0x2a5)](!![]),removeClient(_0x1cdbdf['id']);}),dbConfig['get'](_0x528d8e(0x300))['remove']({'botID':_0x1a43a3})[_0x528d8e(0x237)](),logger[_0x528d8e(0x247)](_0x528d8e(0x322)+_0x1a43a3),stopBot(_0x1a43a3);try{if(fs[_0x528d8e(0x375)](path[_0x528d8e(0x39c)](configpath,'bot-'+_0x1a43a3+'-config.json')))fs[_0x528d8e(0x2b1)](path[_0x528d8e(0x39c)](configpath,_0x528d8e(0x211)+_0x1a43a3+_0x528d8e(0x251)));if(fs[_0x528d8e(0x375)](path[_0x528d8e(0x39c)](configpath,'bot-'+_0x1a43a3+_0x528d8e(0x319))))fs[_0x528d8e(0x2b1)](path['join'](configpath,_0x528d8e(0x211)+_0x1a43a3+'-events.json'));if(fs[_0x528d8e(0x375)](path[_0x528d8e(0x39c)](configpath,_0x528d8e(0x211)+_0x1a43a3+_0x528d8e(0x279))))fs[_0x528d8e(0x2b1)](path[_0x528d8e(0x39c)](configpath,_0x528d8e(0x211)+_0x1a43a3+_0x528d8e(0x279)));if(fs[_0x528d8e(0x375)](path[_0x528d8e(0x39c)](configpath,_0x528d8e(0x211)+_0x1a43a3+_0x528d8e(0x3ad))))fs[_0x528d8e(0x2b1)](path[_0x528d8e(0x39c)](configpath,_0x528d8e(0x211)+_0x1a43a3+_0x528d8e(0x3ad)));}catch(_0x4c2cc9){if(_0x4c2cc9)logger[_0x528d8e(0x247)](_0x528d8e(0x3cc),_0x4c2cc9);}config=getConfiguration(),io['to'](_0x528d8e(0x2b5))[_0x528d8e(0x310)](_0x528d8e(0x300),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x759cba,_0x15b42d,_0x55044c){const _0x1652b3=_0x44aa4b;dbConfig[_0x1652b3(0x2ee)](_0x1652b3(0x300))[_0x1652b3(0x3a3)]({'botID':_0x759cba})[_0x1652b3(0x236)]({'status':_0x15b42d})[_0x1652b3(0x236)]({'live':_0x55044c})[_0x1652b3(0x237)]();if(_0x15b42d==_0x1652b3(0x312)||_0x15b42d==_0x1652b3(0x1eb))logger[_0x1652b3(0x247)]('Enabled\x20Bot\x20'+_0x759cba),startBot([_0x759cba,userID],{'cwd':bbpath},function(_0x21b448){if(_0x21b448)logger['full'](_0x21b448);});else(_0x15b42d==_0x1652b3(0x38f)||_0x15b42d==_0x1652b3(0x2c8))&&(logger[_0x1652b3(0x247)]('Disabled\x20Bot\x20'+_0x759cba),stopBot(_0x759cba));config=getConfiguration(),io['to']('botmanager')[_0x1652b3(0x310)](_0x1652b3(0x300),config),broadcastToBots(_0x1652b3(0x300),JSON['stringify'](config));}function toggleStatus(_0x4fd4b4){const _0x5e3aed=_0x44aa4b;let _0x216f76=dbConfig[_0x5e3aed(0x2ee)](_0x5e3aed(0x300))[_0x5e3aed(0x3a3)]({'botID':_0x4fd4b4})['value'](),_0x3877d8;if(_0x216f76[_0x5e3aed(0x2e4)]==='enabled')_0x3877d8='disabled';else{if(_0x216f76[_0x5e3aed(0x2e4)]===_0x5e3aed(0x1eb))_0x3877d8=_0x5e3aed(0x2c8);else{if(_0x216f76[_0x5e3aed(0x2e4)]==='new-disabled')_0x3877d8='new';else{if(_0x216f76[_0x5e3aed(0x2e4)]===_0x5e3aed(0x38f))_0x3877d8=_0x5e3aed(0x312);}}}return _0x3877d8;}function updateStatus(_0x175a30,_0x180df6){const _0x36a938=_0x44aa4b;dbConfig[_0x36a938(0x2ee)]('bots')['find']({'botID':_0x175a30})[_0x36a938(0x236)]({'status':_0x180df6})[_0x36a938(0x237)](),config=getConfiguration(),io['to'](_0x36a938(0x2b5))[_0x36a938(0x310)](_0x36a938(0x300),config),broadcastToBots('bots',JSON[_0x36a938(0x326)](config));}function updateLive(_0x20a47d,_0x11bad7){const _0x367e51=_0x44aa4b;dbConfig[_0x367e51(0x2ee)](_0x367e51(0x300))[_0x367e51(0x3a3)]({'botID':_0x20a47d})[_0x367e51(0x236)]({'live':_0x11bad7})[_0x367e51(0x237)](),config=getConfiguration(),io['to'](_0x367e51(0x2b5))[_0x367e51(0x310)](_0x367e51(0x300),config),broadcastToBots(_0x367e51(0x300),JSON['stringify'](config));}function updateBotName(_0x2cd87e,_0x46488c){const _0x799a1e=_0x44aa4b;dbConfig[_0x799a1e(0x2ee)](_0x799a1e(0x300))[_0x799a1e(0x3a3)]({'botID':_0x2cd87e})[_0x799a1e(0x236)]({'botname':_0x46488c})['write'](),config=getConfiguration(),io['to'](_0x799a1e(0x2b5))[_0x799a1e(0x310)]('bots',config),broadcastToBots(_0x799a1e(0x300),JSON[_0x799a1e(0x326)](config));}function updateBotManager(){const _0x45b7ed=_0x44aa4b;config=getConfiguration(),io['to'](_0x45b7ed(0x2b5))[_0x45b7ed(0x310)](_0x45b7ed(0x300),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x4e2050){const _0x2d3425=_0x44aa4b;if(pid[_0x4e2050])pid[_0x4e2050][_0x2d3425(0x233)]({'function':'toggleBotMode','args':null});else{const _0x5c315a=configpath+'bot-'+_0x4e2050+_0x2d3425(0x251),_0x1cfc17=fs[_0x2d3425(0x302)](_0x5c315a),_0x9994bf=JSON[_0x2d3425(0x2ae)](_0x1cfc17),_0xb38ef7=_0x9994bf['bot'][0x0][_0x2d3425(0x399)];_0x9994bf['bot'][0x0][_0x2d3425(0x399)]=!_0xb38ef7;const _0x9a1582=JSON[_0x2d3425(0x326)](_0x9994bf,null,0x2);fs[_0x2d3425(0x2c4)](_0x5c315a,_0x9a1582),config=getConfiguration(),io['to'](_0x2d3425(0x2b5))[_0x2d3425(0x310)](_0x2d3425(0x300),config),broadcastToBots(_0x2d3425(0x300),JSON[_0x2d3425(0x326)](config));}}function telegramError(_0x32533c){const _0x1dfcd6=_0x44aa4b;logger[_0x1dfcd6(0x303)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x23be93){const _0x469d0c=_0x44aa4b;if(_0x23be93[_0x469d0c(0x3ba)][_0x469d0c(0x28c)]!=settings[_0x469d0c(0x30c)]&&'@'+_0x23be93[_0x469d0c(0x3ba)][_0x469d0c(0x28c)]!=settings[_0x469d0c(0x30c)])return tgBot['sendMessage'](_0x23be93[_0x469d0c(0x36f)]['id'],_0x469d0c(0x257),{'parse_mode':_0x469d0c(0x25e)})[_0x469d0c(0x3b9)](_0x24e3af=>{telegramError(_0x24e3af);}),![];return!![];}async function initTelegram(){const _0x5024ff=_0x44aa4b;if(tgBot)tgBot[_0x5024ff(0x3ac)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5024ff(0x2b2)],{'polling':!![]});let _0x2c7389=_0x5024ff(0x3c5);_0x2c7389+='\x0a',_0x2c7389+=_0x5024ff(0x269),_0x2c7389+=_0x5024ff(0x2f5),_0x2c7389+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2c7389+=_0x5024ff(0x2f7),_0x2c7389+=_0x5024ff(0x354),_0x2c7389+=_0x5024ff(0x243),_0x2c7389+=_0x5024ff(0x253),_0x2c7389+=_0x5024ff(0x2b6),_0x2c7389+=_0x5024ff(0x392),_0x2c7389+=_0x5024ff(0x295),_0x2c7389+=_0x5024ff(0x202),_0x2c7389+=_0x5024ff(0x228),_0x2c7389+=_0x5024ff(0x20f),_0x2c7389+=_0x5024ff(0x372);let _0x462107='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x462107+='\x0a',_0x462107+=_0x2c7389,tgBot['onText'](/\/start/,_0x5350e6=>{const _0x32908f=_0x5024ff;if(!validateTelegram(_0x5350e6))return;if(settings[_0x32908f(0x353)]!=_0x5350e6[_0x32908f(0x36f)]['id'])updateSetting(_0x32908f(0x353),_0x5350e6[_0x32908f(0x36f)]['id']);updateSetting(_0x32908f(0x264),!![]),tgBot[_0x32908f(0x30e)](_0x5350e6[_0x32908f(0x36f)]['id'],_0x462107)[_0x32908f(0x3b9)](_0xc4e803=>{telegramError(_0xc4e803);});}),tgBot['onText'](/\/enable/,_0x590f3b=>{const _0x52f6a8=_0x5024ff;if(!validateTelegram(_0x590f3b))return;if(settings[_0x52f6a8(0x353)]!=_0x590f3b[_0x52f6a8(0x36f)]['id'])updateSetting(_0x52f6a8(0x353),_0x590f3b[_0x52f6a8(0x36f)]['id']);updateSetting(_0x52f6a8(0x264),!![]),tgBot[_0x52f6a8(0x30e)](_0x590f3b[_0x52f6a8(0x36f)]['id'],_0x52f6a8(0x376))[_0x52f6a8(0x3b9)](_0x29a1e5=>{telegramError(_0x29a1e5);});}),tgBot[_0x5024ff(0x298)](/\/config/,async _0x51bcbb=>{const _0xb9294e=_0x5024ff;if(!validateTelegram(_0x51bcbb))return;tgBot['removeListener'](_0xb9294e(0x3c2)),tgBot[_0xb9294e(0x30e)](_0x51bcbb[_0xb9294e(0x36f)]['id'],_0xb9294e(0x3aa),{'reply_markup':{'inline_keyboard':[[{'text':_0xb9294e(0x24b),'callback_data':_0xb9294e(0x34c)},{'text':_0xb9294e(0x210),'callback_data':_0xb9294e(0x215)},{'text':_0xb9294e(0x2f2),'callback_data':'all'}]]}})[_0xb9294e(0x3b9)](_0x519e4f=>{telegramError(_0x519e4f);}),tgBot['on'](_0xb9294e(0x3c2),async _0x1606ad=>{const _0x429d87=_0xb9294e,_0x5b0152=_0x1606ad[_0x429d87(0x31b)],_0x52a0e3=_0x1606ad[_0x429d87(0x24f)];tgBot[_0x429d87(0x20c)](_0x1606ad['id'])['then'](async()=>{const _0x10fa12=_0x429d87;_0x5b0152==_0x10fa12(0x34c)&&(updateSetting('telegramEvents','orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0x10fa12(0x30e)](_0x52a0e3[_0x10fa12(0x36f)]['id'],_0x10fa12(0x2f4))['catch'](_0x966331=>{telegramError(_0x966331);}));_0x5b0152=='alerts'&&(updateSetting(_0x10fa12(0x296),_0x10fa12(0x215)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x52a0e3[_0x10fa12(0x36f)]['id'],_0x10fa12(0x31c))[_0x10fa12(0x3b9)](_0x17a728=>{telegramError(_0x17a728);}));_0x5b0152==_0x10fa12(0x23f)&&(updateSetting(_0x10fa12(0x296),_0x10fa12(0x23f)),updateSetting(_0x10fa12(0x264),!![]),await tgBot[_0x10fa12(0x30e)](_0x52a0e3['chat']['id'],_0x10fa12(0x3a7))[_0x10fa12(0x3b9)](_0x50f30c=>{telegramError(_0x50f30c);}));if(!settings['telegramChatId'])tgBot[_0x10fa12(0x30e)](_0x52a0e3['chat']['id'],_0x10fa12(0x2c3))[_0x10fa12(0x3b9)](_0x2d07a4=>{telegramError(_0x2d07a4);});}),tgBot[_0x429d87(0x218)](_0x429d87(0x3c2));});}),tgBot[_0x5024ff(0x298)](/\/status/,_0x3a76bd=>{const _0x562635=_0x5024ff;if(!validateTelegram(_0x3a76bd))return;const _0xa2c174=getBotsWithMode();let _0x37a9fd=_0x562635(0x352);config[_0x562635(0x1fd)](_0x47c54c=>{const _0x3aabc2=_0x562635,_0x53fe6a=_0xa2c174[_0x3aabc2(0x3a3)](_0x16746e=>_0x16746e['botID']==_0x47c54c[_0x3aabc2(0x231)])[_0x3aabc2(0x27c)];_0x37a9fd+=_0x3aabc2(0x33c)+_0x47c54c['botID']+':\x20'+_0x47c54c[_0x3aabc2(0x2e4)]+_0x3aabc2(0x36c)+_0x53fe6a+_0x3aabc2(0x36c)+_0x47c54c['live']+'\x0a';}),_0x37a9fd+='\x0a',_0x37a9fd+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x37a9fd+=!settings[_0x562635(0x264)]?_0x562635(0x24c):_0x562635(0x26f),_0x37a9fd+=settings[_0x562635(0x264)]?settings[_0x562635(0x296)]==_0x562635(0x23f)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x562635(0x296)]+_0x562635(0x3be):'',tgBot['sendMessage'](_0x3a76bd[_0x562635(0x36f)]['id'],_0x37a9fd,{'parse_mode':_0x562635(0x25e)})['catch'](_0x1c47e8=>{telegramError(_0x1c47e8);});}),tgBot[_0x5024ff(0x298)](/\/restart/,_0x5d1b63=>{const _0x1e6d69=_0x5024ff;if(!validateTelegram(_0x5d1b63))return;tgBot[_0x1e6d69(0x218)]('callback_query');const _0x2a5c66=getEnabledBots();if(_0x2a5c66[_0x1e6d69(0x284)]==0x0)tgBot['sendMessage'](_0x5d1b63[_0x1e6d69(0x36f)]['id'],_0x1e6d69(0x316))[_0x1e6d69(0x3b9)](_0x2e3a1a=>{telegramError(_0x2e3a1a);});else{if(_0x2a5c66[_0x1e6d69(0x284)]>0x1)_0x2a5c66['push']({'botID':_0x1e6d69(0x23f)});let _0x3c3e8c=[],_0x2e5c25=[];const _0x56ef2d=_0x2a5c66['length']%0x4==0x0||_0x2a5c66[_0x1e6d69(0x284)]%0x4==0x3||_0x2a5c66[_0x1e6d69(0x284)]%0x3==0x1?0x4:0x3;let _0x215967=0x0;_0x2a5c66[_0x1e6d69(0x1fd)]((_0xfd3d9e,_0x380d9b)=>{const _0x298f2b=_0x1e6d69;if(_0x380d9b%_0x56ef2d==0x0)_0x2e5c25=[];_0x2e5c25[_0x298f2b(0x3af)]({'text':_0xfd3d9e[_0x298f2b(0x231)]==_0x298f2b(0x23f)?_0x298f2b(0x2a2):_0x298f2b(0x33c)+_0xfd3d9e[_0x298f2b(0x231)],'callback_data':_0xfd3d9e['botID']}),_0x380d9b%_0x56ef2d==0x0&&(_0x3c3e8c[_0x215967]=_0x2e5c25,_0x215967++);}),tgBot[_0x1e6d69(0x30e)](_0x5d1b63[_0x1e6d69(0x36f)]['id'],_0x1e6d69(0x219),{'reply_markup':{'inline_keyboard':_0x3c3e8c}})[_0x1e6d69(0x3b9)](_0x1c2637=>{telegramError(_0x1c2637);}),tgBot['on']('callback_query',async _0x1fe82f=>{const _0x404a8d=_0x1e6d69,_0x52b083=_0x1fe82f['data'],_0x2b9277=_0x1fe82f[_0x404a8d(0x24f)];tgBot[_0x404a8d(0x20c)](_0x1fe82f['id'])[_0x404a8d(0x29b)](async()=>{const _0x297cb2=_0x404a8d;_0x52b083==_0x297cb2(0x23f)?config[_0x297cb2(0x1fd)](_0x60656c=>{restartBot(_0x60656c['botID']);}):restartBot(_0x52b083);}),tgBot[_0x404a8d(0x218)](_0x404a8d(0x3c2));});}}),tgBot[_0x5024ff(0x298)](/\/on/,_0x574b30=>{const _0x484675=_0x5024ff;if(!validateTelegram(_0x574b30))return;tgBot[_0x484675(0x218)](_0x484675(0x3c2));const _0x4660b5=getDisabledBots();if(_0x4660b5[_0x484675(0x284)]==0x0)tgBot[_0x484675(0x30e)](_0x574b30[_0x484675(0x36f)]['id'],_0x484675(0x24d))[_0x484675(0x3b9)](_0x222b0b=>{telegramError(_0x222b0b);});else{if(_0x4660b5[_0x484675(0x284)]>0x1)_0x4660b5[_0x484675(0x3af)]({'botID':_0x484675(0x23f)});let _0x5c99c1=[],_0x578eaf=[];const _0x33405d=_0x4660b5['length']%0x4==0x0||_0x4660b5[_0x484675(0x284)]%0x4==0x3||_0x4660b5[_0x484675(0x284)]%0x3==0x1?0x4:0x3;let _0x43e45d=0x0;_0x4660b5[_0x484675(0x1fd)]((_0x2a4035,_0x5be0c1)=>{const _0x12878c=_0x484675;if(_0x5be0c1%_0x33405d==0x0)_0x578eaf=[];_0x578eaf[_0x12878c(0x3af)]({'text':_0x2a4035[_0x12878c(0x231)]==_0x12878c(0x23f)?_0x12878c(0x2a2):_0x12878c(0x33c)+_0x2a4035[_0x12878c(0x231)],'callback_data':_0x2a4035[_0x12878c(0x231)]}),_0x5be0c1%_0x33405d==0x0&&(_0x5c99c1[_0x43e45d]=_0x578eaf,_0x43e45d++);}),tgBot[_0x484675(0x30e)](_0x574b30[_0x484675(0x36f)]['id'],_0x484675(0x33f),{'reply_markup':{'inline_keyboard':_0x5c99c1}})['catch'](_0x4a4871=>{telegramError(_0x4a4871);}),tgBot['on'](_0x484675(0x3c2),async _0xa772e1=>{const _0x1a4bbc=_0x484675,_0x2ea623=_0xa772e1['data'],_0x5460d1=_0xa772e1[_0x1a4bbc(0x24f)];tgBot[_0x1a4bbc(0x20c)](_0xa772e1['id'])[_0x1a4bbc(0x29b)](async()=>{const _0x7602be=_0x1a4bbc;_0x2ea623==_0x7602be(0x23f)?(tgBot[_0x7602be(0x30e)](_0x5460d1[_0x7602be(0x36f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x7602be(0x3b9)](_0x460367=>{telegramError(_0x460367);}),_0x4660b5[_0x7602be(0x1fd)](_0x3e1dc3=>{const _0x9237d0=_0x7602be;if(_0x3e1dc3['botID']!=_0x9237d0(0x23f))toggleBot(_0x3e1dc3[_0x9237d0(0x231)],toggleStatus(_0x3e1dc3[_0x9237d0(0x231)]),_0x9237d0(0x309));})):(tgBot[_0x7602be(0x30e)](_0x5460d1['chat']['id'],_0x7602be(0x2f9)+_0x2ea623)['catch'](_0xe9ec47=>{telegramError(_0xe9ec47);}),toggleBot(_0x2ea623,toggleStatus(_0x2ea623),_0x7602be(0x309)));}),tgBot[_0x1a4bbc(0x218)]('callback_query');});}}),tgBot[_0x5024ff(0x298)](/\/off/,_0x389121=>{const _0xeed9aa=_0x5024ff;if(!validateTelegram(_0x389121))return;tgBot[_0xeed9aa(0x218)](_0xeed9aa(0x3c2));const _0x5928ab=getEnabledBots();if(_0x5928ab['length']==0x0)tgBot['sendMessage'](_0x389121[_0xeed9aa(0x36f)]['id'],_0xeed9aa(0x316))[_0xeed9aa(0x3b9)](_0x5ca54e=>{telegramError(_0x5ca54e);});else{if(_0x5928ab[_0xeed9aa(0x284)]>0x1)_0x5928ab[_0xeed9aa(0x3af)]({'botID':_0xeed9aa(0x23f)});let _0x2a1a4c=[],_0x33e838=[];const _0x3a23fb=_0x5928ab[_0xeed9aa(0x284)]%0x4==0x0||_0x5928ab[_0xeed9aa(0x284)]%0x4==0x3||_0x5928ab[_0xeed9aa(0x284)]%0x3==0x1?0x4:0x3;let _0x754b7b=0x0;_0x5928ab[_0xeed9aa(0x1fd)]((_0xa5b20b,_0x27913d)=>{const _0x695a2=_0xeed9aa;if(_0x27913d%_0x3a23fb==0x0)_0x33e838=[];_0x33e838[_0x695a2(0x3af)]({'text':_0xa5b20b[_0x695a2(0x231)]=='all'?_0x695a2(0x2a2):_0x695a2(0x33c)+_0xa5b20b[_0x695a2(0x231)],'callback_data':_0xa5b20b['botID']}),_0x27913d%_0x3a23fb==0x0&&(_0x2a1a4c[_0x754b7b]=_0x33e838,_0x754b7b++);}),tgBot['sendMessage'](_0x389121[_0xeed9aa(0x36f)]['id'],_0xeed9aa(0x260),{'reply_markup':{'inline_keyboard':_0x2a1a4c}})[_0xeed9aa(0x3b9)](_0x1cd8c6=>{telegramError(_0x1cd8c6);}),tgBot['on'](_0xeed9aa(0x3c2),async _0x14f19c=>{const _0x1b376e=_0xeed9aa,_0x2cd2af=_0x14f19c[_0x1b376e(0x31b)],_0x3f0fd4=_0x14f19c[_0x1b376e(0x24f)];tgBot[_0x1b376e(0x20c)](_0x14f19c['id'])[_0x1b376e(0x29b)](async()=>{const _0x468331=_0x1b376e;_0x2cd2af==_0x468331(0x23f)?(tgBot[_0x468331(0x30e)](_0x3f0fd4[_0x468331(0x36f)]['id'],_0x468331(0x1f5))[_0x468331(0x3b9)](_0x29a35f=>{telegramError(_0x29a35f);}),_0x5928ab[_0x468331(0x1fd)](_0x16668e=>{const _0x121f14=_0x468331;if(_0x16668e[_0x121f14(0x231)]!='all')toggleBot(_0x16668e[_0x121f14(0x231)],toggleStatus(_0x16668e[_0x121f14(0x231)]),_0x121f14(0x309));})):(tgBot[_0x468331(0x30e)](_0x3f0fd4[_0x468331(0x36f)]['id'],_0x468331(0x389)+_0x2cd2af)['catch'](_0xdfcea8=>{telegramError(_0xdfcea8);}),toggleBot(_0x2cd2af,toggleStatus(_0x2cd2af),_0x468331(0x309)));}),tgBot[_0x1b376e(0x218)](_0x1b376e(0x3c2));});}}),tgBot[_0x5024ff(0x298)](/\/metrics/,_0x1ecdf9=>{const _0xbc6266=_0x5024ff;if(!validateTelegram(_0x1ecdf9))return;tgBot[_0xbc6266(0x218)](_0xbc6266(0x3c2));const _0x1c7ae7=getEnabledBots();if(_0x1c7ae7['length']==0x0)tgBot[_0xbc6266(0x30e)](_0x1ecdf9['chat']['id'],_0xbc6266(0x316))[_0xbc6266(0x3b9)](_0xbac04e=>{telegramError(_0xbac04e);});else{if(_0x1c7ae7[_0xbc6266(0x284)]>0x1){let _0x27e485=[],_0xe6d23a=[];const _0x1f3b86=_0x1c7ae7[_0xbc6266(0x284)]%0x4==0x0||_0x1c7ae7['length']%0x4==0x3||_0x1c7ae7[_0xbc6266(0x284)]%0x3==0x1?0x4:0x3;let _0x3a44bb=0x0;_0x1c7ae7[_0xbc6266(0x1fd)]((_0x41529b,_0x293846)=>{const _0x565329=_0xbc6266;if(_0x293846%_0x1f3b86==0x0)_0xe6d23a=[];_0xe6d23a[_0x565329(0x3af)]({'text':_0x565329(0x33c)+_0x41529b['botID'],'callback_data':_0x41529b['botID']}),_0x293846%_0x1f3b86==0x0&&(_0x27e485[_0x3a44bb]=_0xe6d23a,_0x3a44bb++);}),tgBot[_0xbc6266(0x30e)](_0x1ecdf9['chat']['id'],_0xbc6266(0x3b7),{'reply_markup':{'inline_keyboard':_0x27e485}})[_0xbc6266(0x3b9)](_0x544ca5=>{telegramError(_0x544ca5);}),tgBot['on']('callback_query',async _0x413424=>{const _0x4dc3ac=_0xbc6266,_0x53eb12=_0x413424['data'],_0x5a81c9=_0x413424[_0x4dc3ac(0x24f)];tgBot[_0x4dc3ac(0x20c)](_0x413424['id'])['then'](async()=>{const _0x112f96=_0x4dc3ac;if(pid[_0x53eb12])pid[_0x53eb12][_0x112f96(0x233)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x4dc3ac(0x218)](_0x4dc3ac(0x3c2));});}else{const _0x24b82e=_0x1c7ae7[0x0][_0xbc6266(0x231)];if(pid[_0x24b82e])pid[_0x24b82e][_0xbc6266(0x233)]({'function':_0xbc6266(0x395),'args':null});}}}),tgBot[_0x5024ff(0x298)](/\/portfolio/,_0x1a8fc9=>{const _0x250251=_0x5024ff;if(!validateTelegram(_0x1a8fc9))return;tgBot[_0x250251(0x218)](_0x250251(0x3c2));const _0x12acf3=getEnabledBots();if(_0x12acf3[_0x250251(0x284)]==0x0)tgBot[_0x250251(0x30e)](_0x1a8fc9[_0x250251(0x36f)]['id'],_0x250251(0x316))[_0x250251(0x3b9)](_0x3ab91e=>{telegramError(_0x3ab91e);});else{if(_0x12acf3[_0x250251(0x284)]>0x1){let _0xb77ea9=[],_0x36f669=[];const _0x571a94=_0x12acf3['length']%0x4==0x0||_0x12acf3[_0x250251(0x284)]%0x4==0x3||_0x12acf3['length']%0x3==0x1?0x4:0x3;let _0x1ffc29=0x0;_0x12acf3[_0x250251(0x1fd)]((_0x28e684,_0x45dbcb)=>{const _0x1b6862=_0x250251;if(_0x45dbcb%_0x571a94==0x0)_0x36f669=[];_0x36f669[_0x1b6862(0x3af)]({'text':'Bot\x20'+_0x28e684[_0x1b6862(0x231)],'callback_data':_0x28e684[_0x1b6862(0x231)]}),_0x45dbcb%_0x571a94==0x0&&(_0xb77ea9[_0x1ffc29]=_0x36f669,_0x1ffc29++);}),tgBot[_0x250251(0x30e)](_0x1a8fc9[_0x250251(0x36f)]['id'],_0x250251(0x37d),{'reply_markup':{'inline_keyboard':_0xb77ea9}})[_0x250251(0x3b9)](_0x15fb51=>{telegramError(_0x15fb51);}),tgBot['on'](_0x250251(0x3c2),async _0x113a06=>{const _0x51d8f4=_0x250251,_0x224c9c=_0x113a06['data'],_0x536d93=_0x113a06[_0x51d8f4(0x24f)];tgBot['answerCallbackQuery'](_0x113a06['id'])[_0x51d8f4(0x29b)](async()=>{const _0x4dc3db=_0x51d8f4;if(pid[_0x224c9c])pid[_0x224c9c]['send']({'function':_0x4dc3db(0x304),'args':null});}),tgBot['removeListener'](_0x51d8f4(0x3c2));});}else{const _0x213808=_0x12acf3[0x0][_0x250251(0x231)];if(pid[_0x213808])pid[_0x213808][_0x250251(0x233)]({'function':_0x250251(0x304),'args':null});}}}),tgBot[_0x5024ff(0x298)](/\/update/,async _0x176196=>{const _0x2978a7=_0x5024ff;if(!validateTelegram(_0x176196))return;tgBot[_0x2978a7(0x218)](_0x2978a7(0x3c2)),await getMessages();if(!updateAvailable)tgBot[_0x2978a7(0x30e)](_0x176196[_0x2978a7(0x36f)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')['catch'](_0x4f6f0f=>{telegramError(_0x4f6f0f);});else!validInstallation?tgBot[_0x2978a7(0x30e)](_0x176196[_0x2978a7(0x36f)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x6b5272=>{telegramError(_0x6b5272);}):(tgBot[_0x2978a7(0x30e)](_0x176196[_0x2978a7(0x36f)]['id'],_0x2978a7(0x277),{'reply_markup':{'inline_keyboard':[[{'text':_0x2978a7(0x1e8),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x42f429=>{telegramError(_0x42f429);}),tgBot['on'](_0x2978a7(0x3c2),async _0x1439e5=>{const _0x53e8a5=_0x2978a7,_0xe4544a=_0x1439e5[_0x53e8a5(0x31b)],_0x2b4116=_0x1439e5[_0x53e8a5(0x24f)];tgBot[_0x53e8a5(0x20c)](_0x1439e5['id'])[_0x53e8a5(0x29b)](async()=>{const _0x10e2ad=_0x53e8a5;_0xe4544a==_0x10e2ad(0x271)&&(await tgBot['sendMessage'](_0x2b4116[_0x10e2ad(0x36f)]['id'],_0x10e2ad(0x2c0))[_0x10e2ad(0x3b9)](_0x22766b=>{telegramError(_0x22766b);}),updateBB(_0x10e2ad(0x235))),_0xe4544a=='no'&&await tgBot[_0x10e2ad(0x30e)](_0x2b4116['chat']['id'],_0x10e2ad(0x275))[_0x10e2ad(0x3b9)](_0x4d531b=>{telegramError(_0x4d531b);});}),tgBot['removeListener'](_0x53e8a5(0x3c2));}));}),tgBot[_0x5024ff(0x298)](/\/reinstall/,async _0x59071b=>{const _0x5ed88f=_0x5024ff;if(!validateTelegram(_0x59071b))return;tgBot[_0x5ed88f(0x218)](_0x5ed88f(0x3c2)),!validInstallation?tgBot['sendMessage'](_0x59071b[_0x5ed88f(0x36f)]['id'],_0x5ed88f(0x3bc))['catch'](_0x22330e=>{telegramError(_0x22330e);}):(tgBot[_0x5ed88f(0x30e)](_0x59071b[_0x5ed88f(0x36f)]['id'],_0x5ed88f(0x2be),{'reply_markup':{'inline_keyboard':[[{'text':_0x5ed88f(0x1e8),'callback_data':_0x5ed88f(0x271)},{'text':'No','callback_data':'no'}]]}})[_0x5ed88f(0x3b9)](_0xfcfea5=>{telegramError(_0xfcfea5);}),tgBot['on'](_0x5ed88f(0x3c2),async _0x553420=>{const _0x51efac=_0x5ed88f,_0x5f52e4=_0x553420[_0x51efac(0x31b)],_0x16cb4a=_0x553420[_0x51efac(0x24f)];tgBot[_0x51efac(0x20c)](_0x553420['id'])[_0x51efac(0x29b)](async()=>{const _0x1a1c50=_0x51efac;_0x5f52e4==_0x1a1c50(0x271)&&(await tgBot[_0x1a1c50(0x30e)](_0x16cb4a[_0x1a1c50(0x36f)]['id'],_0x1a1c50(0x380))[_0x1a1c50(0x3b9)](_0x425ee9=>{telegramError(_0x425ee9);}),updateBB(_0x1a1c50(0x281))),_0x5f52e4=='no'&&await tgBot['sendMessage'](_0x16cb4a['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x1a1c50(0x3b9)](_0x5c5aba=>{telegramError(_0x5c5aba);});}),tgBot[_0x51efac(0x218)](_0x51efac(0x3c2));}));}),tgBot[_0x5024ff(0x298)](/\/toggle/,_0x1e6ce7=>{const _0xff4639=_0x5024ff;if(!validateTelegram(_0x1e6ce7))return;tgBot['removeListener'](_0xff4639(0x3c2));const _0x5cdf54=getBotsWithMode();if(_0x5cdf54['length']==0x0)tgBot[_0xff4639(0x30e)](_0x1e6ce7['chat']['id'],_0xff4639(0x316))['catch'](_0x330a67=>{telegramError(_0x330a67);});else{let _0xeadc38=[],_0x481a2f=[];const _0x9345a6=0x2;let _0x493bed=0x0;_0x5cdf54['forEach']((_0x256212,_0x4381fe)=>{const _0x191377=_0xff4639;if(_0x4381fe%_0x9345a6==0x0)_0x481a2f=[];_0x481a2f[_0x191377(0x3af)]({'text':_0x191377(0x33c)+_0x256212[_0x191377(0x231)]+'\x20('+_0x256212[_0x191377(0x27c)]+')','callback_data':_0x256212[_0x191377(0x231)]}),_0x4381fe%_0x9345a6==0x0&&(_0xeadc38[_0x493bed]=_0x481a2f,_0x493bed++);}),tgBot[_0xff4639(0x30e)](_0x1e6ce7['chat']['id'],_0xff4639(0x23c),{'reply_markup':{'inline_keyboard':_0xeadc38}})[_0xff4639(0x3b9)](_0x235f1c=>{telegramError(_0x235f1c);}),tgBot['on'](_0xff4639(0x3c2),async _0x2d523a=>{const _0x3ca989=_0xff4639,_0x624c76=_0x2d523a[_0x3ca989(0x31b)],_0x4a0a71=_0x2d523a[_0x3ca989(0x24f)];tgBot[_0x3ca989(0x20c)](_0x2d523a['id'])[_0x3ca989(0x29b)](async()=>{const _0x423c9e=_0x3ca989,_0x49e599=_0x5cdf54[_0x423c9e(0x3a3)](_0x563239=>_0x563239[_0x423c9e(0x231)]==_0x624c76),_0x15810a=_0x49e599[_0x423c9e(0x27c)]=='auto'?_0x423c9e(0x1f9):_0x423c9e(0x28d);tgBot['sendMessage'](_0x4a0a71[_0x423c9e(0x36f)]['id'],_0x423c9e(0x2cf)+_0x624c76+_0x423c9e(0x205)+_0x15810a+_0x423c9e(0x350))[_0x423c9e(0x3b9)](_0x2e00b7=>{telegramError(_0x2e00b7);}),toggleBotMode(_0x624c76);}),tgBot[_0x3ca989(0x218)](_0x3ca989(0x3c2));});}}),tgBot[_0x5024ff(0x298)](/\/names/,_0x1f2280=>{const _0xe31923=_0x5024ff;if(!validateTelegram(_0x1f2280))return;let _0x21a25a='';config['forEach'](_0x14c247=>{const _0x41dcb4=_0x403d;_0x21a25a+=_0x41dcb4(0x33c)+_0x14c247[_0x41dcb4(0x231)]+':\x20'+_0x14c247[_0x41dcb4(0x359)]+'\x0a';}),tgBot['sendMessage'](_0x1f2280['chat']['id'],_0x21a25a,{'parse_mode':_0xe31923(0x25e)})[_0xe31923(0x3b9)](_0x54c3f1=>{telegramError(_0x54c3f1);});}),tgBot[_0x5024ff(0x298)](/\/disable/,_0x2ff517=>{const _0x496ce2=_0x5024ff;if(!validateTelegram(_0x2ff517))return;tgBot['sendMessage'](_0x2ff517[_0x496ce2(0x36f)]['id'],_0x496ce2(0x287))[_0x496ce2(0x3b9)](_0x23e24b=>{telegramError(_0x23e24b);}),updateSetting(_0x496ce2(0x264),![]);}),tgBot[_0x5024ff(0x298)](/\/help/,_0x4d1fd3=>{const _0x321565=_0x5024ff;if(!validateTelegram(_0x4d1fd3))return;tgBot['sendMessage'](_0x4d1fd3[_0x321565(0x36f)]['id'],_0x2c7389)[_0x321565(0x3b9)](_0x17e006=>{telegramError(_0x17e006);});}),tgBot['on']('polling_error',_0x3c145a=>{const _0x3290df=_0x5024ff;_0x3c145a[_0x3290df(0x2a7)]()[_0x3290df(0x1fe)](_0x3290df(0x225))&&(logger[_0x3290df(0x247)](_0x3290df(0x348)),tgBot[_0x3290df(0x3ac)](),tgBot=null,io['to'](_0x3290df(0x2b5))['emit'](_0x3290df(0x337),_0x3290df(0x348)));}),process['once']('SIGINT',()=>{const _0x1d4baf=_0x5024ff;if(tgBot)tgBot[_0x1d4baf(0x3ac)]();process[_0x1d4baf(0x33b)](0x1);}),process[_0x5024ff(0x25f)](_0x5024ff(0x290),()=>{const _0x2a3cd8=_0x5024ff;if(tgBot)tgBot[_0x2a3cd8(0x3ac)]();process[_0x2a3cd8(0x33b)](0x1);});}}function disableTelegram(){const _0x19fdaf=_0x44aa4b;tgBot&&(tgBot[_0x19fdaf(0x3ac)](),tgBot=null);}function sendTelegram(_0x55751d,_0x1ddb82){const _0x56a83a=_0x44aa4b;if(settings[_0x56a83a(0x264)]){if(settings[_0x56a83a(0x296)]==_0x56a83a(0x23f)||(_0x1ddb82[_0x56a83a(0x267)]==_0x56a83a(0x2bb)||_0x1ddb82[_0x56a83a(0x267)]==_0x56a83a(0x1e9)||_0x1ddb82[_0x56a83a(0x267)]==_0x56a83a(0x2a3))&&settings['telegramEvents']==_0x56a83a(0x215)||_0x1ddb82[_0x56a83a(0x267)]==_0x56a83a(0x28e)&&settings[_0x56a83a(0x296)]==_0x56a83a(0x34c)){if(tgBot&&settings['telegramChatId']){if(_0x1ddb82[_0x56a83a(0x314)])tgBot[_0x56a83a(0x30e)](settings[_0x56a83a(0x353)],_0x1ddb82[_0x56a83a(0x359)]+'\x20>\x20'+_0x1ddb82['event'])[_0x56a83a(0x3b9)](_0x4cda00=>{telegramError(_0x4cda00);});else tgBot[_0x56a83a(0x30e)](settings['telegramChatId'],_0x56a83a(0x33c)+_0x55751d+'\x20>\x20'+_0x1ddb82[_0x56a83a(0x276)])[_0x56a83a(0x3b9)](_0x5dcea8=>{telegramError(_0x5dcea8);});}}}}async function sendTelegramMsg(_0x2ede5f,_0xef0b4a='HTML'){const _0x217e62=_0x44aa4b;return settings[_0x217e62(0x264)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x217e62(0x30e)](settings[_0x217e62(0x353)],_0x2ede5f,{'parse_mode':_0xef0b4a})['catch'](_0x19ddcf=>{telegramError(_0x19ddcf);}),!![]):![];}function getDeviceWithIp(_0x1daae0){const _0x41838c=_0x44aa4b;return devices[_0x41838c(0x3a3)](_0x543301=>_0x543301['ip']===_0x1daae0);}function temporaryAccess2FA(_0x51d707,_0x3cf8ce){const _0x2b920a=_0x44aa4b;let _0x1c1550=new Date(),_0x1ebc43=![];if(lastIpApproval){if(_0x1c1550-lastIpApproval<0x1388)_0x1ebc43=!![];}lastIpApproval=new Date();if(_0x1ebc43)return;tgBot&&settings[_0x2b920a(0x353)]&&(tgBot[_0x2b920a(0x218)](_0x2b920a(0x3c2)),tgBot[_0x2b920a(0x30e)](settings[_0x2b920a(0x353)],_0x2b920a(0x2fd)+normalizeIP(_0x3cf8ce)['show']+'</b>\x20?',{'parse_mode':_0x2b920a(0x25e),'reply_markup':{'inline_keyboard':[[{'text':_0x2b920a(0x20e),'callback_data':'5'},{'text':_0x2b920a(0x25d),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x2b920a(0x294),'callback_data':_0x2b920a(0x294)}]]}})[_0x2b920a(0x3b9)](_0x32efa9=>{telegramError(_0x32efa9);}),tgBot['on'](_0x2b920a(0x3c2),async _0xfa9c51=>{const _0x2bf6a6=_0x2b920a,_0x34a495=_0xfa9c51['data'],_0x56d59e=_0xfa9c51[_0x2bf6a6(0x24f)];tgBot[_0x2bf6a6(0x20c)](_0xfa9c51['id'])[_0x2bf6a6(0x29b)](async()=>{const _0x4574b8=_0x2bf6a6;devices[_0x51d707]['telegramIpApproval']={'clientip':_0x3cf8ce,'timestamp':new Date()[_0x4574b8(0x3a6)](),'expiry':_0x34a495},_0x34a495!=_0x4574b8(0x294)?(await tgBot[_0x4574b8(0x30e)](_0x56d59e[_0x4574b8(0x36f)]['id'],_0x4574b8(0x22f)+_0x34a495+'\x20minutes',{'parse_mode':'HTML'})[_0x4574b8(0x3b9)](_0x20e7d6=>{telegramError(_0x20e7d6);}),io['to'](_0x51d707)['emit'](_0x4574b8(0x2e4),{'access':{'allow':![],'reason':_0x4574b8(0x391),'token':null}})):(await tgBot[_0x4574b8(0x30e)](_0x56d59e['chat']['id'],'Temporary\x20access\x20rejected')['catch'](_0x26533c=>{telegramError(_0x26533c);}),io['to'](_0x51d707)[_0x4574b8(0x310)]('status',{'access':{'allow':![],'reason':_0x4574b8(0x222),'token':null}}));}),tgBot[_0x2bf6a6(0x218)]('callback_query');}));}function loginAccess2FA(_0x409cd9,_0xcdf688){const _0x10d55e=_0x44aa4b;tgBot&&settings[_0x10d55e(0x353)]&&(tgBot[_0x10d55e(0x218)](_0x10d55e(0x3c2)),tgBot[_0x10d55e(0x30e)](settings[_0x10d55e(0x353)],_0x10d55e(0x23a)+normalizeIP(_0xcdf688)['show']+_0x10d55e(0x3b8),{'parse_mode':_0x10d55e(0x25e),'reply_markup':{'inline_keyboard':[[{'text':_0x10d55e(0x299),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x10d55e(0x294)}]]}})[_0x10d55e(0x3b9)](_0x14b675=>{telegramError(_0x14b675);}),tgBot['on'](_0x10d55e(0x3c2),async _0xfc6092=>{const _0xa18f79=_0x10d55e,_0x2e3d9c=_0xfc6092[_0xa18f79(0x31b)],_0x167b8c=_0xfc6092[_0xa18f79(0x24f)];tgBot['answerCallbackQuery'](_0xfc6092['id'])['then'](async()=>{const _0x1546a2=_0xa18f79;devices[_0x409cd9][_0x1546a2(0x308)]={'clientip':_0xcdf688,'timestamp':new Date()[_0x1546a2(0x3a6)](),'expiry':_0x2e3d9c},_0x2e3d9c!=_0x1546a2(0x294)?(await tgBot[_0x1546a2(0x30e)](_0x167b8c[_0x1546a2(0x36f)]['id'],_0x1546a2(0x329),{'parse_mode':_0x1546a2(0x25e)})[_0x1546a2(0x3b9)](_0x39811f=>{telegramError(_0x39811f);}),io['to'](_0x409cd9)[_0x1546a2(0x310)]('status',{'access':{'allow':![],'reason':_0x1546a2(0x391),'token':null}})):(await tgBot['sendMessage'](_0x167b8c[_0x1546a2(0x36f)]['id'],'Login\x20rejected')[_0x1546a2(0x3b9)](_0x5d3517=>{telegramError(_0x5d3517);}),io['to'](_0x409cd9)[_0x1546a2(0x310)](_0x1546a2(0x2e4),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0xa18f79(0x218)](_0xa18f79(0x3c2));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2fb0ba=_0x44aa4b;return dbConfig['get']('bots')[_0x2fb0ba(0x213)](_0x2fb0ba(0x231))[_0x2fb0ba(0x297)]({'status':_0x2fb0ba(0x312)})[_0x2fb0ba(0x3b1)]()||[];}function getDisabledBots(){const _0x433e6e=_0x44aa4b;return dbConfig['get'](_0x433e6e(0x300))[_0x433e6e(0x213)]('botID')[_0x433e6e(0x297)]({'status':'disabled'})[_0x433e6e(0x3b1)]()||[];}function getBotAttributes(_0x4b84b5){const _0x502aac=_0x44aa4b;let _0x5a153f={};const _0xf4057=configpath+_0x502aac(0x211)+_0x4b84b5+'-config.json',_0x2d2a88=fs['existsSync'](_0xf4057);if(_0x2d2a88){const _0x277f95=fs[_0x502aac(0x302)](_0xf4057);try{const _0x5f0932=JSON[_0x502aac(0x2ae)](_0x277f95),_0x39a59f=_0x5f0932?_0x5f0932['bot'][0x0][_0x502aac(0x399)]:![];_0x5a153f['mode']=_0x39a59f?_0x502aac(0x28d):_0x502aac(0x1f9),_0x5a153f[_0x502aac(0x359)]=_0x5f0932?_0x5f0932['bot'][0x0][_0x502aac(0x359)]:'Bot\x20'+_0x4b84b5;}catch(_0x5769cd){_0x5a153f['mode']=_0x502aac(0x1f9),_0x5a153f[_0x502aac(0x359)]=_0x502aac(0x33c)+_0x4b84b5;}}else _0x5a153f[_0x502aac(0x27c)]=_0x502aac(0x1f9),_0x5a153f[_0x502aac(0x359)]=_0x502aac(0x33c)+_0x4b84b5;return _0x5a153f;}function getBotsWithMode(){const _0x255de7=_0x44aa4b,_0x20ab9d=dbConfig[_0x255de7(0x2ee)](_0x255de7(0x300))[_0x255de7(0x213)](_0x255de7(0x231))[_0x255de7(0x3b1)]()||[];return _0x20ab9d[_0x255de7(0x1fd)](_0x27fa60=>{const _0x2e7527=_0x255de7;let _0x3b62e9=getBotAttributes(_0x27fa60[_0x2e7527(0x231)]);_0x27fa60[_0x2e7527(0x27c)]=_0x3b62e9[_0x2e7527(0x27c)];}),_0x20ab9d;}function getBotExchanges(){const _0x53fae0=_0x44aa4b;let _0xc5faff=[];const _0x15ee3d=dbConfig[_0x53fae0(0x2ee)]('bots')[_0x53fae0(0x213)](_0x53fae0(0x231))['value']()||[];_0x15ee3d['forEach'](_0x14ebef=>{const _0x38c549=_0x53fae0;if(_0x14ebef[_0x38c549(0x2e4)]==_0x38c549(0x312)){const _0xf4abdd=configpath+_0x38c549(0x211)+_0x14ebef[_0x38c549(0x231)]+_0x38c549(0x251),_0x5d3079=fs[_0x38c549(0x375)](_0xf4abdd);let _0x175620;if(_0x5d3079){const _0x24a365=fs[_0x38c549(0x302)](_0xf4abdd);try{const _0x478c23=JSON[_0x38c549(0x2ae)](_0x24a365);_0x175620=_0x478c23?_0x478c23[_0x38c549(0x2ed)][0x0][_0x38c549(0x36a)]:null;}catch(_0x293d6b){}}if(_0x175620)_0xc5faff['push'](_0x175620);}});const _0x178e2e=[...new Set(_0xc5faff)][_0x53fae0(0x1f7)]();return _0x178e2e;}async function initUser(){const _0x270c03=_0x44aa4b;if(!settings[_0x270c03(0x346)]){const _0x4abb61=uuidRandom();mixpanel['alias'](_0x4abb61),updateSetting('userid',_0x4abb61);}}async function initSecure(){const _0x3af509=_0x44aa4b;let _0x52051a=getSecure();if(!_0x52051a[_0x3af509(0x3a5)]('secret')){let _0x1fbc46=await generateKeys();_0x52051a[_0x3af509(0x1ee)]=_0x1fbc46[_0x3af509(0x1ee)],_0x52051a[_0x3af509(0x2e9)]=_0x1fbc46['privateKey'],_0x52051a[_0x3af509(0x230)]=crypto[_0x3af509(0x365)](0x20)['toString'](_0x3af509(0x30b));;storeSecure(_0x52051a);}}function getSettings(){const _0x52d03d=_0x44aa4b;return dbSettings[_0x52d03d(0x2ee)]('settings')['value']()||{};}function _0x46d3(){const _0x2db84f=['getMonth','match','bot','get','0.0.0','store-configuration','constructor','All','place-order','Ok,\x20will\x20send\x20order\x20notifications\x20only','/disable\x20-\x20disable\x20notifications\x0a',':\x20Bot\x20Mgr\x20>\x20','/restart\x20-\x20restart\x20bot(s)\x0a','api-eu.mixpanel.com','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','getStartingBalances','request','socket','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','temporaryAccessAllowed','backup-full.zip','bots','bcryptjs','readFileSync','simple','sendPortfolioTelegram','Unauthorized\x20login\x20attempt\x20(timeout)','IPv4','hybrid-crypto-js','telegram2FaApproval','stopped','backup','hex','telegramUsername','53094UGQpdw','sendMessage','socket.io','emit','use','enabled','allow','showname','logout','No\x20bots\x20running\x20right\x20now','toIPv4Address','\x1b[31m','-events.json','storeHeadless','data','Ok,\x20will\x20send\x20alert\x20notifications\x20only','update-bot','bb-config.json','2FA\x20login\x20token\x20generated','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','node-zip','Deleted\x20Bot\x20','output-000.log','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','get-starting-balances','stringify','loginRequired','temporary\x20access\x20timeout','Login\x20accepted','test','timestamp','server','number','internal','createServer','output-001.log','Logged\x20in\x20user\x20...','config/','getSeconds','axios','settings','No\x20authentication\x20token','notification','randomFillSync','jsonwebtoken','util','exit','Bot\x20','/:bot/support','temporary\x20token\x20generated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','files','telegrammsg','get-backup-files','/:bot/portfolio','blacklist','userid','=>\x20Go\x20to\x20#BLU#http://','Invalid\x20Telegram\x20token','backup-full@','6b67f3d61ee94b8f5c80b4affef4c4d9','/download/:type','orders','headers','remoteAddress','Invalid\x20authentication\x20token\x20(2)','\x20mode','inherit','<b>Balance\x20Bot\x20Status:</b>\x0a','telegramChatId','/on\x20-\x20start\x20bot(s)\x0a','apiPassword','\x1b[33m','exp','argv','botname','search','2FA\x20login\x20required','Error:\x20Invalid\x20argument\x20','defaults','messages','encryptedUuid','logs/','clientip','\x20(2)','clients','Password\x20reset\x20rejected','randomBytes','mtime','Markdown','confirm-message','Node.js\x20v','exchange','sockets','\x20|\x20','telegramIpApproval','toIPv4MappedAddress','chat','download','function','/help\x20-\x20show\x20available\x20commands\x0a','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','settings.','existsSync','Notifications\x20enabled','node-telegram-bot-api','graphql-request','Invalid\x20authentication\x20token\x20(1)','build2','ipv6','range','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','restore-backup-file','delete-alerts','Starting\x20Balance\x20Bot\x20reinstallation','295vHiSRF','login','readdirSync','logged\x20out','127.0.0.1','format','cloneDeep','started','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Logged\x20out\x20user\x20...',',\x20must\x20be\x20a\x204\x20digit\x20number','invalid\x20credentials','store-settings','split','disabled','pidExpireLogin','reload','/status\x20-\x20show\x20bot(s)\x20status\x0a','Unauthorized\x20attempt\x20to\x20get\x20messages','index.html','sendMetricsTelegram','Token\x20blacklisted','login\x20not\x20required','slice','headless','cancel-loading','conn','join',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','apiSecret','***','store-headless','\x20|\x20client:\x20...','Invalid\x20IP\x20address','find','get-messages','hasOwnProperty','getTime','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','statSync','6840630dHbvyE','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','zip/','stopPolling','-results.json','kind','push','min','value','Unauthorized\x20attempt\x20to\x20confirm\x20message','timeshift','Bot\x20Mgr\x20>\x20','348CfGnSV','version.json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','</b>\x20?','catch','from','2FA\x20required','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','output-003.log','\x20only\x0a','size','expiry','password','callback_query','Restore\x20process\x20aborted','Session\x20expired\x20for\x20user\x20...','You\x20can\x20use\x20the\x20following\x20commands:\x0a','reinstall-bb','removeAllListeners','running','backup/','File\x20uploaded','Password\x20has\x20been\x20reset\x20to:\x20','Error\x20while\x20deleting\x20config\x20files:\x20','lastmsgtelegram','login\x20token\x20valid','generate','args','Yes','warning','verify','new','referer','stop','publicKey','Unauthorized\x20attempt\x20to\x20get\x20events','15621948mrDNyl','isDirectory','/output-000.log','access','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','1845313Dsygsc','sort','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','manual','any','NTBA_FIX_319','env','forEach','includes','User\x20has\x20been\x20validated','path','32285pCQpKA','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','debug','store','\x20to\x20','onepagemode','startsWith','connection','uuid','handshake','uuid-random','answerCallbackQuery','59192zYDJdE','5\x20min','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Alerts','bot-','Unauthorized\x20attempt\x20to\x20update\x20settings','sortBy','Starting\x20#RED#Balance\x20Bot\x20v','alerts','backup-full','live','removeListener','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getDate','isValid','temp/','private','reset-history','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','/:bot/configuration','output-002.log','temporary\x20access\x20rejected','telegram','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','404\x20Not\x20Found','Setting\x20access:\x20','add-bot','/update\x20-\x20update\x20Balance\x20Bot\x0a','token','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','port','whitelistEnabled','*$1*','************','Access\x20enabled\x20for\x20','secret','botID','generateKeyPairAsync','send','address','update','assign','write','lastmsgemitted','Crypt','Allow\x20login\x20from\x20IP\x20address\x20<b>','show-config','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','log','family','all','Unauthorized\x20attempt\x20to\x20log\x20out','reason','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/off\x20-\x20stop\x20bot(s)\x0a','createWriteStream','$1_$2_$3','file','full','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','1216qCsUti','lowdb/adapters/FileSync','Orders','Notifications\x20disabled\x0a','All\x20bots\x20running\x20right\x20now','deleteHistoryAlerts','message','endsWith','-config.json','restart','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','http','bbPassword','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','set','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','initclient','bb-settings.json','15\x20min','HTML','once','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','::ffff:127.0.0.1','Unauthorized\x20attempt\x20to\x20delete\x20alerts','bbvReceive','telegramEnabled','exec','bot.js','type','add','/enable\x20-\x20enable\x20notifications\x0a','placeOrder','Invalid\x20username\x20or\x20IP\x20address','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','showConfig','reset-password','Notifications\x20enabled\x0a','bbvNew','yes','child_process','f2aRequired','sendFile','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','event','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','-performance.json','fork','2lAUMme','mode','Backup\x20file\x20uploaded','pidRefreshToken','cancelLoading','-----------------------------------------------------------------------------------','reinstall','binary','login\x20required','length','build','bbUsername','Notifications\x20disabled','decrypt','bb/','Starting\x20bot\x20|\x20Bot\x20','date-fns','username','auto','order','map','SIGTERM','/:bot/performance','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','replace','reject','/metrics\x20-\x20show\x20bot\x20performance\x0a','telegramEvents','filter','onText','accept','apiKey','then','[ip-address]','Backup\x20file\x20unzipped\x20and\x20stored','Starting\x20Balance\x20Bot\x20','.zip','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','kill','All\x20bots','success','keys','disconnect','connected','toString','login\x20token\x20generated','latestversion','\x20|\x20user:\x20...','hashSync','getPortfolio','init','parse','toggle-bot-mode','sign','unlinkSync','telegramToken','padStart','yargs/yargs','botmanager','/names\x20-\x20show\x20bot\x20names\x0a','mixpanel','Unauthorized\x20attempt\x20to\x20update\x20bot','7704qVUBPG','Starting\x20new\x20bot\x20|\x20Bot\x20','error','access\x20timeout','title','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','2FA','Starting\x20Balance\x20Bot\x20update','temporary\x20access\x20not\x20allowed','update-bb','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','writeFileSync','Network\x20Interfaces:','bb-secure.json','getHours','new-disabled','Unauthorized\x20attempt\x20to\x20get\x20portfolio','getMinutes','::1','ipaddr.js','16672zgYulf','Unauthorized\x20attempt\x20to\x20store\x20configuration','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','=>\x20Go\x20to\x20#BLU#http://localhost:','(((.+)+)+)+$','params','static','copyFileSync','logs','get-portfolio','sha256','backup-files','mkdirSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','DEFLATE','node','Unauthorized\x20attempt\x20to\x20delete\x20bot','https://api.ipify.org?format=json','track','name','rmSync','storeFiat','auth','status','apply','getFullYear','listen','storeConfiguration','privateKey','isIPv4MappedAddress'];_0x46d3=function(){return _0x2db84f;};return _0x46d3();}function getSecure(){const _0x3f4504=_0x44aa4b;return dbSecure[_0x3f4504(0x2ee)]('secure')[_0x3f4504(0x3b1)]()||{};}function getBlacklist(){const _0x22a968=_0x44aa4b;return dbSecure['get']('blacklist')[_0x22a968(0x3b1)]()||[];}function broadcastToBots(_0x5c420c,_0x5a10d9){const _0xf1767=_0x44aa4b;config[_0xf1767(0x1fd)](_0x325da1=>{const _0x417cd9=_0xf1767;if(_0x325da1['status']=='enabled'&&_0x325da1[_0x417cd9(0x217)]==_0x417cd9(0x3c8)||_0x325da1[_0x417cd9(0x2e4)]==_0x417cd9(0x1eb)&&_0x325da1[_0x417cd9(0x217)]==_0x417cd9(0x3c8)){if(pid[_0x325da1[_0x417cd9(0x231)]])pid[_0x325da1['botID']][_0x417cd9(0x233)]({[_0x5c420c]:_0x5a10d9});}});}function storeSettings(_0x4f94b2,_0x5ccd39=![]){const _0x46abea=_0x44aa4b;_0x4f94b2={...settings,..._0x4f94b2};if(_0x5ccd39&&_0x4f94b2[_0x46abea(0x255)]!=_0x46abea(0x22e)&&_0x4f94b2[_0x46abea(0x255)]!='***'&&_0x4f94b2[_0x46abea(0x255)]!=''){const _0xdecce7=crypt[_0x46abea(0x288)](secure['privateKey'],_0x4f94b2[_0x46abea(0x255)])[_0x46abea(0x24f)][_0x46abea(0x38e)]('@')[0x0],_0x2f091b=bcrypt['hashSync'](_0xdecce7,saltRounds);_0x4f94b2={..._0x4f94b2,'bbPassword':_0x2f091b};}if(_0x5ccd39&&_0x4f94b2[_0x46abea(0x2b2)]!=_0x46abea(0x22e)&&_0x4f94b2['telegramToken']!=_0x46abea(0x39f)&&_0x4f94b2[_0x46abea(0x2b2)]!=''){const _0x33ce05=crypt['decrypt'](secure[_0x46abea(0x2e9)],_0x4f94b2['telegramToken'])[_0x46abea(0x24f)][_0x46abea(0x38e)]('@')[0x0];_0x4f94b2={..._0x4f94b2,'telegramToken':_0x33ce05};}const _0x3d40c9=_0x4f94b2[_0x46abea(0x2b2)]!=_0x46abea(0x22e)&&_0x4f94b2['telegramToken']!=settings['telegramToken']||_0x4f94b2['telegramUsername']!=settings[_0x46abea(0x30c)],_0x4ed1b1=_0x4f94b2[_0x46abea(0x2b2)]==''||_0x4f94b2[_0x46abea(0x30c)]=='';if(_0x3d40c9)_0x4f94b2[_0x46abea(0x296)]=_0x46abea(0x23f);for(const [_0x44bfa0,_0x32a5b7]of Object['entries'](_0x4f94b2)){if(_0x44bfa0==_0x46abea(0x2b2)&&_0x32a5b7==_0x46abea(0x22e)){_0x4f94b2[_0x46abea(0x2b2)]=settings['telegramToken'];continue;};if(_0x44bfa0==_0x46abea(0x255)&&_0x32a5b7==_0x46abea(0x22e)){_0x4f94b2[_0x46abea(0x255)]=settings[_0x46abea(0x255)];continue;};dbSettings[_0x46abea(0x259)](_0x46abea(0x374)+_0x44bfa0,_0x32a5b7)[_0x46abea(0x237)]();}settings=_0x4f94b2,io['to'](_0x46abea(0x2b5))['emit'](_0x46abea(0x335),cleanSettings()),broadcastToBots('timeshift',settings[_0x46abea(0x3b3)]),broadcastToBots(_0x46abea(0x206),settings[_0x46abea(0x206)]);if(_0x3d40c9&&!_0x4ed1b1)initTelegram();if(_0x3d40c9&&_0x4ed1b1)disableTelegram();getAllClients()['forEach'](_0x7cac45=>{const _0x24e2eb=_0x46abea;getSocket(_0x7cac45['id'])[_0x24e2eb(0x310)](_0x24e2eb(0x2e4),{'access':{'allow':![],'reason':_0x24e2eb(0x391),'token':null}});});}function updateSetting(_0x576a32,_0x5f5328){const _0x394a23=_0x44aa4b;dbSettings[_0x394a23(0x259)](_0x394a23(0x374)+_0x576a32,_0x5f5328)[_0x394a23(0x237)](),settings=getSettings(),io['to'](_0x394a23(0x2b5))[_0x394a23(0x310)](_0x394a23(0x335),cleanSettings());}function storeSecure(_0x24204f){const _0x31a413=_0x44aa4b;dbSecure[_0x31a413(0x2ee)]('secure')[_0x31a413(0x3af)](_0x24204f)['write'](),secure=_0x24204f;}function addBlacklist(_0x168768){const _0xa78bf=_0x44aa4b;cleanBlacklist();let _0x35a7f6;devices[_0x168768][_0xa78bf(0x36d)]?_0x35a7f6=Math['max'](devices[_0x168768][_0xa78bf(0x36d)][_0xa78bf(0x3c0)],loginExpiry):_0x35a7f6=loginExpiry,dbSecure['get'](_0xa78bf(0x345))['push']({'expiry':new Date()[_0xa78bf(0x3a6)]()+_0x35a7f6*0x3c*0x3e8,'token':devices[_0x168768][_0xa78bf(0x1f3)]['token']})['write'](),blacklist=dbSecure[_0xa78bf(0x2ee)](_0xa78bf(0x345))[_0xa78bf(0x3b1)]();}function cleanBlacklist(){const _0x307c12=_0x44aa4b;let _0x37011a=dbSecure[_0x307c12(0x2ee)](_0x307c12(0x345))[_0x307c12(0x387)]()[_0x307c12(0x3b1)](),_0x4dd58c=new Date()[_0x307c12(0x3a6)]();_0x37011a[_0x307c12(0x1fd)](_0x3b41b9=>{const _0x1dcdd4=_0x307c12;_0x3b41b9['expiry']<_0x4dd58c&&dbSecure[_0x1dcdd4(0x2ee)](_0x1dcdd4(0x345))['remove']({'expiry':_0x3b41b9[_0x1dcdd4(0x3c0)]})[_0x1dcdd4(0x237)]();});}function initStates(){const _0x33ffdd=_0x44aa4b;let _0x59f3b0=getConfiguration();_0x59f3b0[_0x33ffdd(0x1fd)](_0x41cea9=>{const _0xdd9d3f=_0x33ffdd;_0x41cea9[_0xdd9d3f(0x217)]='stopped';}),storeConfiguration(_0x59f3b0);}function onKeys(){const _0x40845a=new RSA();return new Promise(_0x46948a=>{const _0x1e7e74=_0x403d;_0x40845a[_0x1e7e74(0x232)]()[_0x1e7e74(0x29b)](_0x4279e1=>{_0x46948a(_0x4279e1);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4f6da8=_0x44aa4b;let _0x27b891=getSettings(),_0x1e9728=![];!_0x27b891[_0x4f6da8(0x3a5)](_0x4f6da8(0x3cd))&&(_0x27b891[_0x4f6da8(0x3cd)]=0x0,_0x1e9728=!![]);!_0x27b891[_0x4f6da8(0x3a5)](_0x4f6da8(0x238))&&(_0x27b891[_0x4f6da8(0x238)]=0x0,_0x1e9728=!![]);!_0x27b891['hasOwnProperty'](_0x4f6da8(0x2a9))&&(_0x27b891[_0x4f6da8(0x2a9)]='0.0.0',_0x1e9728=!![]);!_0x27b891['hasOwnProperty'](_0x4f6da8(0x206))&&(_0x27b891[_0x4f6da8(0x206)]=![],_0x1e9728=!![]);if(_0x1e9728)storeSettings(_0x27b891);}function storeConfiguration(_0x1df620){const _0x46ae7e=_0x44aa4b;dbConfig[_0x46ae7e(0x2ee)](_0x46ae7e(0x300))['remove']()[_0x46ae7e(0x237)](),_0x1df620[_0x46ae7e(0x1fd)](_0x326bbd=>{const _0x288f44=_0x46ae7e;delete _0x326bbd[_0x288f44(0x27c)];}),dbConfig['get'](_0x46ae7e(0x300))[_0x46ae7e(0x3af)](..._0x1df620)[_0x46ae7e(0x237)](),config=_0x1df620;}function resetPassword(){const _0xe7e3b4=_0x44aa4b;tgBot&&settings[_0xe7e3b4(0x353)]&&(tgBot[_0xe7e3b4(0x218)](_0xe7e3b4(0x3c2)),tgBot['sendMessage'](settings[_0xe7e3b4(0x353)],_0xe7e3b4(0x292),{'parse_mode':_0xe7e3b4(0x25e),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0xe7e3b4(0x271)},{'text':'no','callback_data':'no'}]]}})['catch'](_0xdf23ad=>{telegramError(_0xdf23ad);}),tgBot['on'](_0xe7e3b4(0x3c2),async _0x41788b=>{const _0x1469d7=_0xe7e3b4,_0x4f5696=_0x41788b[_0x1469d7(0x31b)],_0x16eac6=_0x41788b[_0x1469d7(0x24f)];tgBot[_0x1469d7(0x20c)](_0x41788b['id'])[_0x1469d7(0x29b)](async()=>{const _0x4fc7f1=_0x1469d7;if(_0x4f5696!='no'){const _0x5ac4e8=0xf,_0x2e735b=_0x4fc7f1(0x256),_0x473e50=Array['from'](crypto[_0x4fc7f1(0x338)](new Uint32Array(_0x5ac4e8)))[_0x4fc7f1(0x28f)](_0x597db1=>_0x2e735b[_0x597db1%_0x2e735b[_0x4fc7f1(0x284)]])[_0x4fc7f1(0x39c)](''),_0x142011=bcrypt[_0x4fc7f1(0x2ab)](_0x473e50,saltRounds);storeSettings({'bbPassword':_0x142011}),await tgBot[_0x4fc7f1(0x30e)](_0x16eac6['chat']['id'],_0x4fc7f1(0x3cb)+_0x473e50,{'parse_mode':_0x4fc7f1(0x25e)})[_0x4fc7f1(0x3b9)](_0x3ea7a2=>{telegramError(_0x3ea7a2);});}else await tgBot[_0x4fc7f1(0x30e)](_0x16eac6['chat']['id'],_0x4fc7f1(0x364))[_0x4fc7f1(0x3b9)](_0x4b7001=>{telegramError(_0x4b7001);});}),tgBot[_0x1469d7(0x218)]('callback_query');}));}async function confirmRestore(_0xdacb3d,_0x5d48bb){const _0x1c1f45=_0x44aa4b;io['to'](_0x1c1f45(0x2b5))[_0x1c1f45(0x310)]('notification',_0x1c1f45(0x224),_0x1c1f45(0x2a3)),tgBot&&settings['telegramChatId']&&(tgBot[_0x1c1f45(0x218)](_0x1c1f45(0x3c2)),await tgBot['sendMessage'](settings[_0x1c1f45(0x353)],_0x1c1f45(0x373),{'parse_mode':_0x1c1f45(0x25e),'reply_markup':{'inline_keyboard':[[{'text':_0x1c1f45(0x271),'callback_data':_0x1c1f45(0x271)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2d5012=>{telegramError(_0x2d5012);}),tgBot['on'](_0x1c1f45(0x3c2),async _0x400cf5=>{const _0x4d0ed1=_0x1c1f45,_0x7cdfae=_0x400cf5[_0x4d0ed1(0x31b)],_0x21f5c9=_0x400cf5[_0x4d0ed1(0x24f)];tgBot[_0x4d0ed1(0x20c)](_0x400cf5['id'])[_0x4d0ed1(0x29b)](async()=>{const _0x2ef79c=_0x4d0ed1;_0x7cdfae==_0x2ef79c(0x271)?(await tgBot[_0x2ef79c(0x30e)](_0x21f5c9[_0x2ef79c(0x36f)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'})['catch'](_0x362e60=>{telegramError(_0x362e60);}),unzipFile(_0xdacb3d,_0x5d48bb)):(logger['debug']('Restore\x20process\x20aborted'),await tgBot['sendMessage'](_0x21f5c9['chat']['id'],_0x2ef79c(0x3c3))[_0x2ef79c(0x3b9)](_0x404580=>{telegramError(_0x404580);}));}),tgBot[_0x4d0ed1(0x218)](_0x4d0ed1(0x3c2));}));}function getServerTime(){const _0x2c2330=_0x44aa4b,_0x1afaa7=new Date();return _0x1afaa7[_0x2c2330(0x2e6)]()+'/'+(_0x1afaa7[_0x2c2330(0x2eb)]()+0x1)[_0x2c2330(0x2a7)]()[_0x2c2330(0x2b3)](0x2,'0')+'/'+_0x1afaa7[_0x2c2330(0x21a)]()[_0x2c2330(0x2a7)]()[_0x2c2330(0x2b3)](0x2,'0')+'\x20'+_0x1afaa7['getHours']()[_0x2c2330(0x2a7)]()[_0x2c2330(0x2b3)](0x2,'0')+':'+_0x1afaa7['getMinutes']()[_0x2c2330(0x2a7)]()[_0x2c2330(0x2b3)](0x2,'0')+':'+_0x1afaa7[_0x2c2330(0x333)]()[_0x2c2330(0x2a7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x37b8ab=_0x44aa4b,_0x33139b=shiftedTime();return _0x33139b[_0x37b8ab(0x2e6)]()+'/'+(_0x33139b[_0x37b8ab(0x2eb)]()+0x1)[_0x37b8ab(0x2a7)]()[_0x37b8ab(0x2b3)](0x2,'0')+'/'+_0x33139b[_0x37b8ab(0x21a)]()[_0x37b8ab(0x2a7)]()[_0x37b8ab(0x2b3)](0x2,'0')+'\x20'+_0x33139b[_0x37b8ab(0x2c7)]()[_0x37b8ab(0x2a7)]()['padStart'](0x2,'0')+':'+_0x33139b['getMinutes']()[_0x37b8ab(0x2a7)]()[_0x37b8ab(0x2b3)](0x2,'0')+':'+_0x33139b[_0x37b8ab(0x333)]()['toString']()[_0x37b8ab(0x2b3)](0x2,'0');}function getCleanTimeStamp(){const _0x2331f7=_0x44aa4b,_0x42d669=shiftedTime();return _0x42d669[_0x2331f7(0x2e6)]()+(_0x42d669[_0x2331f7(0x2eb)]()+0x1)[_0x2331f7(0x2a7)]()[_0x2331f7(0x2b3)](0x2,'0')+_0x42d669[_0x2331f7(0x21a)]()['toString']()['padStart'](0x2,'0')+'-'+_0x42d669[_0x2331f7(0x2c7)]()[_0x2331f7(0x2a7)]()[_0x2331f7(0x2b3)](0x2,'0')+_0x42d669[_0x2331f7(0x2ca)]()[_0x2331f7(0x2a7)]()[_0x2331f7(0x2b3)](0x2,'0')+_0x42d669[_0x2331f7(0x333)]()[_0x2331f7(0x2a7)]()[_0x2331f7(0x2b3)](0x2,'0');}function shiftedTime(){const _0x2d0953=_0x44aa4b,_0x376e6d=new Date();let _0x240e3a=_0x376e6d;if(settings[_0x2d0953(0x3b3)]&&settings[_0x2d0953(0x3b3)]!==0x0)_0x240e3a=fns[_0x2d0953(0x268)](_0x376e6d,{'hours':settings[_0x2d0953(0x3b3)]});return _0x240e3a;}function startScheduler(){const _0x24448a=_0x44aa4b,_0x37a96f=new Date()['getUTCHours'](),_0x232db4=shiftedTime()[_0x24448a(0x2c7)]();_0x232db4==0x4&&backupConfigFiles();_0x232db4==0x0&&rotateLogFiles();_0x37a96f%0x6==0x0&&triggerAnalytics();_0x37a96f%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x141a8b){const _0x571179=_0x44aa4b;logger[_0x571179(0x203)]('Restore\x20backup\x20file\x20'+_0x141a8b);const _0xa56388=getBotsWithMode();_0xa56388[_0x571179(0x284)]>0x0?confirmRestore(configbackuppath,_0x141a8b):unzipFile(configbackuppath,_0x141a8b);}async function getBackupFiles(_0x15173c=null){const _0x163b47=_0x44aa4b;let _0x468e6e=[],_0x5bf3cc=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x5bf3cc[_0x163b47(0x1f7)]((_0x1a70f9,_0x2efbf4)=>_0x1a70f9[_0x163b47(0x2e0)]<_0x2efbf4['name']?0x1:_0x2efbf4['name']<_0x1a70f9[_0x163b47(0x2e0)]?-0x1:0x0),_0x5bf3cc[_0x163b47(0x1fd)](_0x200ff9=>{const _0x277997=_0x163b47;if(!_0x200ff9['isDirectory']()&&_0x200ff9[_0x277997(0x2e0)][_0x277997(0x207)](_0x277997(0x349))&&_0x200ff9[_0x277997(0x2e0)][_0x277997(0x250)](_0x277997(0x29f))){const _0x2c746b=formatDate(fs[_0x277997(0x3a8)](configbackuppath+_0x200ff9[_0x277997(0x2e0)])[_0x277997(0x366)]);_0x468e6e[_0x277997(0x3af)]({'name':_0x200ff9[_0x277997(0x2e0)],'mtime':_0x2c746b});}});if(_0x15173c)io['to'](_0x15173c)[_0x163b47(0x310)](_0x163b47(0x2d8),_0x468e6e);else return _0x468e6e;}async function backupConfigFiles(){const _0x937b85=_0x44aa4b;await zipFiles(_0x937b85(0x216));const _0x4e36db=getCleanTimeStamp();fs[_0x937b85(0x2d4)](zippath+_0x937b85(0x2ff),configbackuppath+('backup-full@'+_0x4e36db+_0x937b85(0x29f)));let _0x582ba3=fs[_0x937b85(0x383)](configbackuppath,{'withFileTypes':!![]});_0x582ba3['sort']((_0xdd4c49,_0x14584b)=>_0xdd4c49['name']<_0x14584b[_0x937b85(0x2e0)]?0x1:_0x14584b[_0x937b85(0x2e0)]<_0xdd4c49[_0x937b85(0x2e0)]?-0x1:0x0),_0x582ba3['length']>maxBackups&&fs[_0x937b85(0x2b1)](configbackuppath+_0x582ba3[maxBackups][_0x937b85(0x2e0)]);}function rotateLogFiles(){const _0x819b7f=_0x44aa4b,_0x3b82bf=fs[_0x819b7f(0x3a8)](logspath+_0x819b7f(0x323)),_0x28dc12=_0x3b82bf[_0x819b7f(0x3bf)]/0x400;if(_0x28dc12>0x64){let _0x50f72e=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x50f72e[_0x819b7f(0x1f7)]((_0x38db08,_0x551c59)=>_0x38db08[_0x819b7f(0x2e0)]<_0x551c59['name']?0x1:_0x551c59['name']<_0x38db08['name']?-0x1:0x0),_0x50f72e[_0x819b7f(0x1fd)](_0x452f6f=>{const _0x5f0177=_0x819b7f;if(_0x452f6f[_0x5f0177(0x2e0)]==_0x5f0177(0x221))fs[_0x5f0177(0x2d4)](logspath+_0x452f6f[_0x5f0177(0x2e0)],logspath+_0x5f0177(0x3bd));if(_0x452f6f[_0x5f0177(0x2e0)]==_0x5f0177(0x330))fs['copyFileSync'](logspath+_0x452f6f['name'],logspath+'output-002.log');_0x452f6f[_0x5f0177(0x2e0)]==_0x5f0177(0x323)&&(fs['copyFileSync'](logspath+_0x452f6f['name'],logspath+_0x5f0177(0x330)),fs[_0x5f0177(0x2c4)](logspath+_0x452f6f[_0x5f0177(0x2e0)],''));});}}async function zipFiles(_0x17738b){const _0x331709=_0x44aa4b;let _0x3fba28;if(_0x17738b==_0x331709(0x2d5))_0x3fba28=logspath;if(_0x17738b=='backup')_0x3fba28=configpath;if(_0x17738b==_0x331709(0x216))_0x3fba28=configpath;let _0x7676b9=fs[_0x331709(0x383)](_0x3fba28,{'withFileTypes':!![]});const _0x2c71b3=new require(_0x331709(0x321))();_0x7676b9[_0x331709(0x1fd)](_0x1bdcf7=>{const _0x12a31c=_0x331709;if(!_0x1bdcf7[_0x12a31c(0x1f1)]()){let _0x1362fa=fs[_0x12a31c(0x302)](_0x3fba28+_0x1bdcf7[_0x12a31c(0x2e0)]);if(_0x17738b==_0x12a31c(0x30a)){const _0x3e378b=/^bot-[0-9]{3}-config.json$/,_0x5888f4=_0x3e378b[_0x12a31c(0x32a)](_0x1bdcf7['name']);if(_0x5888f4){const _0x300edd=JSON[_0x12a31c(0x2ae)](_0x1362fa);if(_0x300edd[_0x12a31c(0x2ed)][0x0]){_0x300edd[_0x12a31c(0x2ed)][0x0][_0x12a31c(0x29a)]=_0x12a31c(0x39f),_0x300edd[_0x12a31c(0x2ed)][0x0][_0x12a31c(0x39e)]=_0x12a31c(0x39f);if(_0x300edd[_0x12a31c(0x2ed)][0x0][_0x12a31c(0x355)])_0x300edd[_0x12a31c(0x2ed)][0x0]['apiPassword']=_0x12a31c(0x39f);}_0x1362fa=JSON['stringify'](_0x300edd,null,0x2);}if(_0x1bdcf7[_0x12a31c(0x2e0)]=='bb-settings.json'){const _0x3e4a70=JSON[_0x12a31c(0x2ae)](_0x1362fa);if(_0x3e4a70[_0x12a31c(0x335)][_0x12a31c(0x327)])_0x3e4a70['settings'][_0x12a31c(0x327)]=![];if(_0x3e4a70[_0x12a31c(0x335)]['bbPassword'])_0x3e4a70[_0x12a31c(0x335)]['bbPassword']=_0x12a31c(0x39f);if(_0x3e4a70['settings'][_0x12a31c(0x2b2)])_0x3e4a70[_0x12a31c(0x335)][_0x12a31c(0x2b2)]='***';if(_0x3e4a70[_0x12a31c(0x335)][_0x12a31c(0x353)])_0x3e4a70[_0x12a31c(0x335)][_0x12a31c(0x353)]=null;_0x1362fa=JSON[_0x12a31c(0x326)](_0x3e4a70,null,0x2);}if(_0x1bdcf7[_0x12a31c(0x2e0)]!=_0x12a31c(0x2c6))_0x2c71b3[_0x12a31c(0x246)](_0x1bdcf7[_0x12a31c(0x2e0)],_0x1362fa);}else _0x2c71b3[_0x12a31c(0x246)](_0x1bdcf7['name'],_0x1362fa);}});const _0x9c71db=_0x2c71b3[_0x331709(0x1e6)]({'base64':![],'compression':_0x331709(0x2db)});fs[_0x331709(0x2c4)](zippath+(_0x17738b+'.zip'),_0x9c71db,_0x331709(0x282));}async function unzipFile(_0x34321c,_0xacd8b1){const _0x390a3c=_0x44aa4b;fs[_0x390a3c(0x383)](configpath,{'withFileTypes':!![]})[_0x390a3c(0x1fd)](_0x47cd4f=>{const _0x3a8991=_0x390a3c;if(!_0x47cd4f['isDirectory']())fs[_0x3a8991(0x2e1)](configpath+_0x47cd4f[_0x3a8991(0x2e0)]);});const _0x4ace10=fs[_0x390a3c(0x302)](_0x34321c+_0xacd8b1,_0x390a3c(0x282)),_0xdd7097=new require('node-zip')(_0x4ace10,{'base64':![],'checkCRC32':!![]});Object[_0x390a3c(0x2a4)](_0xdd7097['files'])[_0x390a3c(0x1fd)](_0x1ac0f8=>{const _0x39461e=_0x390a3c,_0x1fa640=_0xdd7097[_0x39461e(0x341)][_0x1ac0f8];fs['writeFileSync'](configpath+_0x1fa640['name'],_0x1fa640['_data']);}),fs[_0x390a3c(0x383)](temppath,{'withFileTypes':!![]})[_0x390a3c(0x1fd)](_0x3a056b=>{if(!_0x3a056b['isDirectory']())fs['rmSync'](temppath+_0x3a056b['name']);}),logger[_0x390a3c(0x203)](_0x390a3c(0x29d)),process[_0x390a3c(0x233)]({'restore':!![]},_0x27b9b8=>{});}async function getPublicIp(){const _0x3666fc=_0x44aa4b;try{const _0x4ba7f8=await axios[_0x3666fc(0x2ee)](_0x3666fc(0x2de));publicip=_0x4ba7f8[_0x3666fc(0x31b)]['ip'];}catch(_0x27d673){}}async function triggerAnalytics(){const _0x5e7c04=_0x44aa4b;if(!publicip)await getPublicIp();const _0x4ad309=getBotsWithMode();let _0xaca4df=0x0;_0x4ad309[_0x5e7c04(0x1fd)](_0x4d5e95=>{const _0x383ad7=_0x5e7c04;if(_0x4d5e95[_0x383ad7(0x2e4)]===_0x383ad7(0x312))_0xaca4df++;});const _0x1d9657=getBotExchanges();mixpanel[_0x5e7c04(0x2df)]('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x4ad309[_0x5e7c04(0x284)],'numbotsenabled':_0xaca4df,'exchanges':_0x1d9657});}async function getMessages(){const _0x377f74=_0x44aa4b,_0x51230d=_0x377f74(0x1f4),_0x44f19e=new GraphQLClient(_0x51230d),_0x5d9377={'authorization':_0x377f74(0x25a)},_0x5dad0=serverversion[_0x377f74(0x38e)]('.'),_0x4be24b=_0x5dad0[0x0]+'.'+_0x5dad0[0x1],_0x3fd7f6=Math[_0x377f74(0x3b0)](settings[_0x377f74(0x3cd)],settings[_0x377f74(0x238)]),_0x480077={'last':parseInt(_0x3fd7f6),'bbm':_0x4be24b},_0x579c68=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x246362;try{_0x246362=await _0x44f19e[_0x377f74(0x2fb)](_0x579c68,_0x480077,_0x5d9377);}catch(_0x4a1659){}if(_0x246362&&_0x246362[_0x377f74(0x35e)]){let _0x4ed7a4=settings[_0x377f74(0x3cd)];newMessages=[];for(const _0x1436e9 of _0x246362[_0x377f74(0x35e)]){newMessages[_0x377f74(0x3af)](_0x1436e9);if(_0x1436e9['bbvNew'])updateSetting('latestversion',_0x1436e9[_0x377f74(0x270)]);let _0x311ed4=_0x1436e9[_0x377f74(0x270)]?serverversion>=_0x1436e9[_0x377f74(0x270)]:![];if(!_0x311ed4&&_0x1436e9[_0x377f74(0x32d)]>_0x4ed7a4){if(_0x1436e9[_0x377f74(0x263)]===_0x377f74(0x1fa)||serverversion['startsWith'](_0x1436e9['bbvReceive'])){let _0x350a0e=''+_0x1436e9[_0x377f74(0x2bd)]+'\x0a\x0a'+_0x1436e9[_0x377f74(0x24f)];const _0x563e28=await sendTelegramMsg(toTelegramMarkdown(_0x350a0e),_0x377f74(0x367));if(_0x563e28)_0x4ed7a4=_0x1436e9[_0x377f74(0x32d)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x377f74(0x3cd),_0x4ed7a4),emitMessages();}}function emitMessages(){const _0x329500=_0x44aa4b,_0x117387=settings[_0x329500(0x238)];let _0x534613=[];newMessages[_0x329500(0x1fd)](_0x1df261=>{const _0x28f65e=_0x329500;_0x1df261['number']>_0x117387&&_0x534613[_0x28f65e(0x3af)](_0x1df261);}),_0x534613[_0x329500(0x284)]>0x0&&getAllClients()['forEach'](_0x4762da=>{const _0x44ae18=_0x329500;getSocket(_0x4762da['id'])[_0x44ae18(0x310)](_0x44ae18(0x24f),_0x534613);});}function confirmMessage(_0x298b8){const _0x245eb2=_0x44aa4b;updateSetting(_0x245eb2(0x238),Number(_0x298b8));}function isNewerVersion(_0x41e925,_0x2a5ed3){const _0x4027f9=_0x44aa4b,_0x4ef9d3=_0x2a5ed3[_0x4027f9(0x38e)]('.'),_0x2d1744=_0x41e925[_0x4027f9(0x38e)]('.');for(var _0x4f484d=0x0;_0x4f484d<_0x2d1744['length'];_0x4f484d++){const _0x58ea33=~~_0x2d1744[_0x4f484d],_0x4340a2=~~_0x4ef9d3[_0x4f484d];if(_0x58ea33>_0x4340a2)return!![];if(_0x58ea33<_0x4340a2)return![];}return![];}function toTelegramMarkdown(_0xe4290f){const _0x46389d=_0x44aa4b,_0x53f146=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5b4683=/\*{2}(.+?)\*{2}/gim;return _0xe4290f=_0xe4290f[_0x46389d(0x293)](_0x53f146,_0x46389d(0x245))[_0x46389d(0x293)](_0x5b4683,_0x46389d(0x22d)),_0xe4290f;}async function validateConfigFile(){const _0xf7bb22=_0x44aa4b,_0x6c05a8=dbConfig['get'](_0xf7bb22(0x300))[_0xf7bb22(0x213)]('botID')[_0xf7bb22(0x3b1)]()||[];if(_0x6c05a8[_0xf7bb22(0x284)]==0x0){let _0x25f4d9=0x0,_0x2ee98f=[];const _0x46f0e5=/^bot-([0-9]{3})-config.json$/,_0x343f21=fs[_0xf7bb22(0x383)](configpath);_0x343f21[_0xf7bb22(0x1fd)](_0xf44e2f=>{const _0x1f3b52=_0xf7bb22,_0x42bc59=_0x46f0e5[_0x1f3b52(0x265)](_0xf44e2f);if(_0x42bc59){const _0x4ccdbb=_0x42bc59[0x1];let _0x5a54af=getBotAttributes(_0x4ccdbb);_0x2ee98f['push']({'botID':_0x4ccdbb,'botname':_0x5a54af['botname'],'status':_0x1f3b52(0x38f),'live':'stopped'}),_0x25f4d9++;}}),_0x25f4d9!=0x0&&(dbConfig[_0xf7bb22(0x2ee)](_0xf7bb22(0x300))[_0xf7bb22(0x236)](_0x2ee98f)['write'](),config=_0x2ee98f,restoredConfigFile=_0x25f4d9);}}async function restoreConfigNotify(_0x5aa90c){const _0x29c363=_0x44aa4b;let _0x25e7ce;if(restoredConfigFile==0x1)_0x25e7ce=_0x29c363(0x2da);else _0x25e7ce=_0x29c363(0x26c);if(_0x5aa90c)io['to'](_0x29c363(0x2b5))[_0x29c363(0x310)](_0x29c363(0x337),_0x25e7ce);else{logger[_0x29c363(0x303)](_0x29c363(0x280)),logger[_0x29c363(0x303)](_0x25e7ce),logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x29c363(0x303)]('');if(tgBot&&settings[_0x29c363(0x353)]&&settings[_0x29c363(0x296)]!=_0x29c363(0x34c))tgBot['sendMessage'](settings[_0x29c363(0x353)],_0x29c363(0x3b4)+_0x25e7ce)['catch'](_0x2a6c66=>{telegramError(_0x2a6c66);});}}function validateCredentials(_0x5472f8,_0x5bb57c){const _0x144e93=_0x44aa4b;if(_0x5472f8['username']==settings[_0x144e93(0x286)]&&bcrypt['compareSync'](_0x5472f8[_0x144e93(0x3c1)],settings['bbPassword'])){if(settings[_0x144e93(0x273)])return{'allow':![],'reason':_0x144e93(0x35b),'token':null};else{const _0x112c28=generateLoginToken(_0x5bb57c);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x112c28};}}else return{'allow':![],'reason':_0x144e93(0x38c),'token':null};}function refreshToken(_0x2f3106){const _0x260134=_0x44aa4b,_0x3f6765=generateLoginToken(_0x2f3106);return{'allow':!![],'reason':_0x260134(0x2a8),'token':_0x3f6765};}function validateAccess(_0x1fc43f,_0x25aac0,_0x215484){const _0x1042ca=_0x44aa4b,_0x46d08d=_0x215484?_0x215484:devices[_0x25aac0]['ip'];let _0x69a3ed;const _0x46ec51=_0xd5452c=>{const _0x417974=_0x403d;if(settings[_0x417974(0x327)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x25aac0)){const _0x3a4b17=generateLoginToken(_0x25aac0);return{'allow':!![],'reason':_0x417974(0x31f),'token':_0x3a4b17};}else return{'allow':![],'reason':_0x417974(0x283),'token':null};}else return _0x69a3ed=validToken(_0xd5452c,_0x25aac0),_0x69a3ed['hasOwnProperty'](_0x417974(0x2a3))?{'allow':!![],'reason':_0x417974(0x3ce),'token':_0xd5452c}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x417974(0x397),'token':null};};if(settings[_0x1042ca(0x22c)]){let _0x1687a4=[...settings['whitelist'],_0x1042ca(0x2cb),_0x1042ca(0x261),_0x1042ca(0x385)];if(_0x1687a4[_0x1042ca(0x1fe)](_0x46d08d))return _0x46ec51(_0x1fc43f);else{_0x69a3ed=validToken(_0x1fc43f,_0x25aac0);if(_0x69a3ed[_0x1042ca(0x3a5)](_0x1042ca(0x2a3)))return _0x46ec51(_0x1fc43f);else{if(telegramIpApproved(_0x25aac0)){const _0x55ad26=generateToken(_0x25aac0);return _0x69a3ed=_0x46ec51(_0x1fc43f),_0x69a3ed[_0x1042ca(0x313)]?{'allow':!![],'reason':_0x1042ca(0x33e),'token':_0x55ad26}:_0x69a3ed;}else return settings[_0x1042ca(0x2fe)]?{'allow':![],'reason':_0x1042ca(0x3bb),'token':null}:{'allow':![],'reason':_0x1042ca(0x2c1),'token':null};}}}else return _0x46ec51(_0x1fc43f);}function timelyDecrypt(_0x531f38,_0x40bfba=!![]){const _0x5ba673=_0x44aa4b;if(_0x531f38)try{const _0x3a0024=crypt[_0x5ba673(0x288)](secure['privateKey'],_0x531f38)['message'],_0x58fccc=_0x3a0024[_0x5ba673(0x38e)]('@')[0x0],_0x318d77=_0x3a0024[_0x5ba673(0x38e)]('@')[0x1],_0x51fcb3=new Date()['getTime']();if(_0x40bfba){if(_0x51fcb3-_0x318d77<maxSecretAge*0x3e8)return _0x58fccc;else return![];}else return _0x58fccc;}catch(_0x1168f0){return![];}else return![];}const validToken=(_0x276c90,_0x2d9304)=>{const _0x39b993=_0x44aa4b,_0xca83ac=devices[_0x2d9304]['ip'];if(!_0x276c90)return{'error':_0x39b993(0x336)};for(let _0x4ed536 of blacklist){if(_0x4ed536['token']==_0x276c90)return{'error':_0x39b993(0x396)};}let _0x1b40a3;try{_0x1b40a3=jwt[_0x39b993(0x1ea)](_0x276c90,secure['secret']+_0x2d9304);}catch{return{'error':_0x39b993(0x379)};}if(!_0x1b40a3[_0x39b993(0x3a5)](_0x39b993(0x361))&&!_0x1b40a3['hasOwnProperty']('username')||!_0x1b40a3['hasOwnProperty'](_0x39b993(0x357)))return{'error':_0x39b993(0x34f)};if(!_0x1b40a3[_0x39b993(0x3a5)](_0x39b993(0x28c))&&_0x1b40a3[_0x39b993(0x3a5)](_0x39b993(0x361))){const {clientip:_0x4d0089}=_0x1b40a3;return _0xca83ac==_0x4d0089?{'success':_0x39b993(0x1ff)}:{'error':_0x39b993(0x3a2)};}else{if(_0x1b40a3[_0x39b993(0x3a5)](_0x39b993(0x28c))&&_0x1b40a3[_0x39b993(0x3a5)](_0x39b993(0x361))){const {username:_0x15d4fe,clientip:_0x5c96c5}=_0x1b40a3;return settings[_0x39b993(0x286)]==_0x15d4fe&&_0xca83ac==_0x5c96c5?{'success':_0x39b993(0x1ff)}:{'error':_0x39b993(0x26b)};}}},generateLoginToken=_0x309d15=>{const _0x8c2286=_0x44aa4b;if(_0x309d15){const _0x293b71=devices[_0x309d15]['ip'];return jwt[_0x8c2286(0x2b0)]({'username':settings[_0x8c2286(0x286)],'clientip':_0x293b71},secure[_0x8c2286(0x230)]+_0x309d15,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x653300=>{const _0x3997a7=_0x44aa4b;if(_0x653300){const _0x16dffe=devices[_0x653300]['ip'];return jwt[_0x3997a7(0x2b0)]({'clientip':_0x16dffe},secure[_0x3997a7(0x230)]+_0x653300,{'expiresIn':devices[_0x653300]['telegramIpApproval'][_0x3997a7(0x3c0)]*0x3c});}else return![];},telegramIpApproved=_0x727f94=>{const _0x3288c6=_0x44aa4b;let _0x546428=![];return devices[_0x727f94][_0x3288c6(0x36d)]&&devices[_0x727f94][_0x3288c6(0x36d)][_0x3288c6(0x3c0)]!='reject'&&(_0x546428=devices[_0x727f94][_0x3288c6(0x36d)][_0x3288c6(0x361)]==devices[_0x727f94]['ip']&&new Date()['getTime']()-devices[_0x727f94][_0x3288c6(0x36d)][_0x3288c6(0x32b)]<devices[_0x727f94][_0x3288c6(0x36d)]['expiry']*0x3c*0x3e8),_0x546428;},telegram2FaApproved=_0x41155f=>{const _0x2d3940=_0x44aa4b;let _0x235f19=![];return devices[_0x41155f][_0x2d3940(0x308)]&&devices[_0x41155f][_0x2d3940(0x308)]['expiry']!='reject'&&(_0x235f19=devices[_0x41155f][_0x2d3940(0x308)]['clientip']==devices[_0x41155f]['ip']&&new Date()[_0x2d3940(0x3a6)]()-devices[_0x41155f][_0x2d3940(0x308)][_0x2d3940(0x32b)]<devices[_0x41155f][_0x2d3940(0x308)][_0x2d3940(0x3c0)]*0x3c*0x3e8),_0x235f19;},normalizeIP=_0x30a102=>{const _0x5f2a4f=_0x44aa4b;let _0x205cd3=null,_0x428f9c=null;if(ipaddr[_0x5f2a4f(0x21b)](_0x30a102)){const _0x210aaf=ipaddr[_0x5f2a4f(0x2ae)](_0x30a102);_0x210aaf[_0x5f2a4f(0x3ae)]()===_0x5f2a4f(0x37b)?(_0x210aaf[_0x5f2a4f(0x2ea)]()&&(_0x205cd3=_0x210aaf[_0x5f2a4f(0x317)]()['toString']()),_0x428f9c=_0x210aaf[_0x5f2a4f(0x2a7)]()):(_0x205cd3=_0x210aaf[_0x5f2a4f(0x2a7)](),_0x428f9c=_0x210aaf[_0x5f2a4f(0x36e)]()[_0x5f2a4f(0x2a7)]());}return{'show':_0x205cd3?_0x205cd3:_0x428f9c,'store':_0x428f9c};};function formatDate(_0x303414){const _0x40cb74=_0x44aa4b;return _0x303414[_0x40cb74(0x2e6)]()+'/'+(_0x303414['getMonth']()+0x1)[_0x40cb74(0x2a7)]()['padStart'](0x2,'0')+'/'+_0x303414[_0x40cb74(0x21a)]()[_0x40cb74(0x2a7)]()[_0x40cb74(0x2b3)](0x2,'0')+'\x20'+_0x303414[_0x40cb74(0x2c7)]()[_0x40cb74(0x2a7)]()[_0x40cb74(0x2b3)](0x2,'0')+':'+_0x303414[_0x40cb74(0x2ca)]()[_0x40cb74(0x2a7)]()[_0x40cb74(0x2b3)](0x2,'0')+':'+_0x303414['getSeconds']()['toString']()[_0x40cb74(0x2b3)](0x2,'0');}function sleep(_0x2682e1){return new Promise(_0x48a85a=>setTimeout(_0x48a85a,_0x2682e1));}