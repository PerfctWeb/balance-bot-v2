const _0x4dcc65=_0xc5a8;(function(_0x59b127,_0x4f8d37){const _0x2efeae=_0xc5a8,_0xf553be=_0x59b127();while(!![]){try{const _0x5379ed=parseInt(_0x2efeae(0x241))/0x1+-parseInt(_0x2efeae(0x2a3))/0x2*(-parseInt(_0x2efeae(0x1c5))/0x3)+-parseInt(_0x2efeae(0x259))/0x4*(-parseInt(_0x2efeae(0x261))/0x5)+parseInt(_0x2efeae(0x2be))/0x6+parseInt(_0x2efeae(0x218))/0x7+parseInt(_0x2efeae(0x209))/0x8+-parseInt(_0x2efeae(0x292))/0x9;if(_0x5379ed===_0x4f8d37)break;else _0xf553be['push'](_0xf553be['shift']());}catch(_0x431d08){_0xf553be['push'](_0xf553be['shift']());}}}(_0x134b,0xdb8f8));const _0x1b14a6=function(){let _0x51723f=!![];return function(_0x322232,_0x2abccb){const _0x5ecd3c=_0x51723f?function(){const _0x58bf49=_0xc5a8;if(_0x2abccb){const _0x2c68ff=_0x2abccb[_0x58bf49(0x2d5)](_0x322232,arguments);return _0x2abccb=null,_0x2c68ff;}}:function(){};return _0x51723f=![],_0x5ecd3c;};}(),_0x3916eb=_0x1b14a6(this,function(){const _0x28dd75=_0xc5a8;return _0x3916eb['toString']()['search']('(((.+)+)+)+$')[_0x28dd75(0x2ac)]()[_0x28dd75(0x286)](_0x3916eb)[_0x28dd75(0x1c6)](_0x28dd75(0x273));});_0x3916eb();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x4dcc65(0x222)),fs=require('fs'),fns=require(_0x4dcc65(0x21d)),low=require(_0x4dcc65(0x1f9)),FileSync=require(_0x4dcc65(0x1a8)),path=require(_0x4dcc65(0x318)),crypto=require('crypto'),Crypt=require(_0x4dcc65(0x27a))[_0x4dcc65(0x328)],RSA=require(_0x4dcc65(0x27a))['RSA'],bcrypt=require(_0x4dcc65(0x219)),jwt=require(_0x4dcc65(0x2bb)),ipaddr=require(_0x4dcc65(0x2cb)),argv=require(_0x4dcc65(0x237))(process[_0x4dcc65(0x1df)]['slice'](0x2))[_0x4dcc65(0x1df)],uuidRandom=require(_0x4dcc65(0x332)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x4dcc65(0x2a7)),axios=require(_0x4dcc65(0x30f)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x4dcc65(0x1b5)),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x4dcc65(0x290)](_0x4dcc65(0x2f8)+PORT+_0x4dcc65(0x1c3)),process[_0x4dcc65(0x2ef)](0x1));const HOST=argv[_0x4dcc65(0x2ae)]||null,userID=argv[_0x4dcc65(0x2ab)]||'';function _0xc5a8(_0x56f35d,_0xea0670){const _0x2fa038=_0x134b();return _0xc5a8=function(_0x3916eb,_0x1b14a6){_0x3916eb=_0x3916eb-0x1a3;let _0x134b64=_0x2fa038[_0x3916eb];return _0x134b64;},_0xc5a8(_0x56f35d,_0xea0670);}let bbpath=_0x4dcc65(0x1bd),bbpath2='';const botfile='bot.js',configfile=_0x4dcc65(0x2b4),settingsfile=_0x4dcc65(0x1eb),securefile=_0x4dcc65(0x25e);let validInstallation=!![];!fs[_0x4dcc65(0x1d5)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4dcc65(0x29d)),configpath=userID?bbpath+_0x4dcc65(0x212)+userID+'/':bbpath+_0x4dcc65(0x212),configbackuppath=configpath+_0x4dcc65(0x24c),logspath=userID?bbpath+_0x4dcc65(0x20a)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x4dcc65(0x303),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'});!fs[_0x4dcc65(0x1d5)](configpath)&&fs[_0x4dcc65(0x240)](configpath);!fs[_0x4dcc65(0x1d5)](configbackuppath)&&fs[_0x4dcc65(0x240)](configbackuppath);!fs[_0x4dcc65(0x1d5)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x4dcc65(0x240)](zippath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4dcc65(0x1b0)]({'bots':[]})[_0x4dcc65(0x1f0)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4dcc65(0x1b0)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4dcc65(0x1a6)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x4dcc65(0x1f0)]();let crypt=new Crypt({'md':_0x4dcc65(0x1f6),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x4dcc65(0x2cc)](_0x4dcc65(0x22b),{'host':_0x4dcc65(0x1ab)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x4dcc65(0x2e0)]!=''&&settings[_0x4dcc65(0x208)]&&settings[_0x4dcc65(0x208)]!='')initTelegram();const logger={'screen':_0x34db64=>{console['log'](_0x34db64);},'simple':_0x1b927d=>{const _0x4b0786=_0x4dcc65;console['log'](_0x1b927d),loggerfile[_0x4b0786(0x1f0)](util[_0x4b0786(0x32a)](_0x1b927d)+'\x0a');},'full':async _0x3f839c=>{const _0x42c771=_0x4dcc65,_0x3e4c70=getTimeStamp()+_0x42c771(0x220)+_0x3f839c;console['log'](_0x3e4c70),loggerfile[_0x42c771(0x1f0)](util[_0x42c771(0x32a)](_0x3e4c70)+'\x0a');if(tgBot&&settings[_0x42c771(0x1f5)]&&settings['telegramEvents']!='orders')await tgBot[_0x42c771(0x2b1)](settings[_0x42c771(0x1f5)],_0x42c771(0x1ef)+_0x3f839c)[_0x42c771(0x28e)](_0x530fa6=>{telegramError(_0x530fa6);});}};process['on'](_0x4dcc65(0x2fe),function(_0x1bf150){const _0x2fb2b6=_0x4dcc65;logger[_0x2fb2b6(0x32d)](_0x1bf150);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4dcc65(0x22d))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x4dcc65(0x201))[_0x4dcc65(0x2b9)](app);app[_0x4dcc65(0x1ed)](_0x4dcc65(0x26f),async(_0x363635,_0x48d38b)=>{const _0xe5d841=_0x4dcc65,_0x4ea58f=_0x363635[_0xe5d841(0x2d7)]['type'],_0x2335a2=getClientsWithBotID(_0xe5d841(0x1bb)),_0x1451c7=_0x363635[_0xe5d841(0x2ca)][_0xe5d841(0x1fd)],_0x46f36e=timelyDecrypt(_0x1451c7,![]),_0x529a2f=_0x2335a2[_0xe5d841(0x2eb)](_0x599ded=>_0x599ded[_0xe5d841(0x1fd)]==_0x46f36e);if(_0x529a2f){const _0x2ea589=normalizeIP(_0x363635[_0xe5d841(0x297)][_0xe5d841(0x334)])['store'],_0x3aeb0b=_0x363635[_0xe5d841(0x2ca)]['tkn'];if(validateAccess(_0x3aeb0b,_0x46f36e,_0x2ea589)[_0xe5d841(0x2a6)])await zipFiles(_0x4ea58f),_0x48d38b[_0xe5d841(0x1c0)](zippath+(_0x4ea58f+_0xe5d841(0x1c7)),_0x325801=>{const _0x279ca4=_0xe5d841;_0x325801&&(logger[_0x279ca4(0x1c2)](_0x279ca4(0x233)+_0x4ea58f),logger[_0x279ca4(0x32d)](_0x325801));});else logger[_0xe5d841(0x1c2)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4ea58f+'\x20(1)');}else logger[_0xe5d841(0x1c2)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4ea58f+'\x20(2)');}),app[_0x4dcc65(0x2c3)](express['static'](path[_0x4dcc65(0x2b3)](__dirname,bbpath2,'build2'))),app[_0x4dcc65(0x2c3)](express['static'](path['join'](__dirname,bbpath2,_0x4dcc65(0x243)))),app[_0x4dcc65(0x1ed)]('/',function(_0x26be91,_0x31b4e5){const _0xa0a1b=_0x4dcc65;_0x31b4e5[_0xa0a1b(0x2cd)](path[_0xa0a1b(0x2b3)](__dirname,bbpath2,_0xa0a1b(0x2cf),_0xa0a1b(0x1ee)));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x1d1),function(_0x5abb09,_0x44388b){const _0x2f46d0=_0x4dcc65;_0x44388b[_0x2f46d0(0x2cd)](path[_0x2f46d0(0x2b3)](__dirname,bbpath2,_0x2f46d0(0x243),_0x2f46d0(0x1ee)));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x1f2),(_0x2192e7,_0x2298c8)=>{const _0x3b2aef=_0x4dcc65;_0x2298c8[_0x3b2aef(0x2cd)](path['join'](__dirname,bbpath2,_0x3b2aef(0x243),'index.html'));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x1fa),(_0x2766c9,_0x4f01fa)=>{const _0x2c68f7=_0x4dcc65;_0x4f01fa[_0x2c68f7(0x2cd)](path[_0x2c68f7(0x2b3)](__dirname,bbpath2,_0x2c68f7(0x243),_0x2c68f7(0x1ee)));}),app['get'](_0x4dcc65(0x246),(_0x4532e3,_0x45a59c)=>{const _0x459048=_0x4dcc65;_0x45a59c[_0x459048(0x2cd)](path['join'](__dirname,bbpath2,'build',_0x459048(0x1ee)));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x299),(_0x5b8204,_0x321872)=>{const _0x153f48=_0x4dcc65;_0x321872[_0x153f48(0x2cd)](path[_0x153f48(0x2b3)](__dirname,bbpath2,_0x153f48(0x243),_0x153f48(0x1ee)));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x239),(_0x20e632,_0x4324b0)=>{const _0x3e5e95=_0x4dcc65;_0x4324b0[_0x3e5e95(0x2cd)](path[_0x3e5e95(0x2b3)](__dirname,bbpath2,'build',_0x3e5e95(0x1ee)));}),app[_0x4dcc65(0x1ed)](_0x4dcc65(0x27b),(_0x574cf1,_0x4edbbf)=>{const _0x5e6387=_0x4dcc65;_0x4edbbf['sendFile'](path['join'](__dirname,bbpath2,'build',_0x5e6387(0x1ee)));});if(HOST)http[_0x4dcc65(0x20e)](PORT,HOST);else http[_0x4dcc65(0x20e)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages();}async function startServer(){const _0x29dfeb=_0x4dcc65;logger[_0x29dfeb(0x32d)](''),logger['simple'](_0x29dfeb(0x326)),await logger[_0x29dfeb(0x1c2)](_0x29dfeb(0x271)+PORT),logger[_0x29dfeb(0x32d)](_0x29dfeb(0x326));if(config[_0x29dfeb(0x30b)]!=0x0)for(const _0x4aaf39 of config){if(_0x4aaf39[_0x29dfeb(0x28c)]==_0x29dfeb(0x1af)||_0x4aaf39[_0x29dfeb(0x28c)]==_0x29dfeb(0x295))await logger[_0x29dfeb(0x1c2)](_0x29dfeb(0x1e5)+_0x4aaf39['botID']+_0x29dfeb(0x2a2)+_0x4aaf39[_0x29dfeb(0x298)]),startBot([_0x4aaf39['botID'],userID],{'cwd':bbpath},function(_0x4e3aea){const _0x5d24c8=_0x29dfeb;if(_0x4e3aea)logger[_0x5d24c8(0x1c2)](_0x4e3aea);});else(_0x4aaf39[_0x29dfeb(0x28c)]==_0x29dfeb(0x24d)||_0x4aaf39['status']==_0x29dfeb(0x2b5))&&await logger[_0x29dfeb(0x1c2)](_0x29dfeb(0x1aa)+_0x4aaf39[_0x29dfeb(0x2c8)]+_0x29dfeb(0x2a2)+_0x4aaf39[_0x29dfeb(0x298)]);}else!newBot&&logger[_0x29dfeb(0x32d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x29dfeb(0x32d)](_0x29dfeb(0x326)),logger[_0x29dfeb(0x32d)]('');}function startSocket(){const _0x441aae=_0x4dcc65;io['on'](_0x441aae(0x2ff),_0x3958b2=>{const _0x14579e=_0x441aae;let _0x56ae32,_0x5754d3,_0x388773,_0x473108,_0x1f26b1;const _0x3767f7=_0x3958b2[_0x14579e(0x2ec)][_0x14579e(0x2ca)][_0x14579e(0x310)];_0x5754d3=_0x3767f7['match'](/bot[0-9]{3}/);if(_0x5754d3)_0x388773=_0x5754d3[0x0]['match'](/[0-9]{3}/);if(_0x388773)_0x56ae32=_0x388773[0x0];else _0x56ae32=_0x14579e(0x1bb);const _0x591447=_0x3958b2[_0x14579e(0x2ec)]['auth'][_0x14579e(0x2d6)];if(!_0x591447)_0x3958b2[_0x14579e(0x238)](_0x14579e(0x28c),{'publicKey':secure[_0x14579e(0x321)]});else{_0x473108=timelyDecrypt(_0x591447,![]);if(!_0x473108)_0x3958b2[_0x14579e(0x238)]('status',{'publicKey':secure['publicKey']});else{_0x1f26b1=normalizeIP(_0x3958b2[_0x14579e(0x325)][_0x14579e(0x334)])[_0x14579e(0x2e1)];if(!devices[_0x473108])devices[_0x473108]={'uuid':_0x473108,'access':{'token':null}};devices[_0x473108]['ip']=_0x1f26b1;const _0x1c3a05=addClient(_0x3958b2['id'],_0x473108,_0x56ae32);setAccess(_0x1c3a05),emitMessages(),_0x3958b2['on'](_0x14579e(0x24a),_0x5ec700=>{const _0x363982=_0x14579e,_0x2cde79=timelyDecrypt(_0x5ec700[_0x363982(0x2bf)]);if(_0x2cde79){_0x5ec700={'username':_0x5ec700[_0x363982(0x25d)],'password':_0x2cde79},devices[_0x473108][_0x363982(0x1ff)]=validateCredentials(_0x5ec700,_0x473108);if(devices[_0x473108][_0x363982(0x1ff)][_0x363982(0x2a6)]==![]&&devices[_0x473108][_0x363982(0x1ff)][_0x363982(0x29f)]=='2FA\x20login\x20required')_0x3958b2[_0x363982(0x238)]('status',{'access':devices[_0x473108][_0x363982(0x1ff)]}),loginAccess2FA(_0x473108,_0x1f26b1);else{if(devices[_0x473108][_0x363982(0x1ff)][_0x363982(0x2a6)]==![]&&devices[_0x473108][_0x363982(0x1ff)][_0x363982(0x29f)]==_0x363982(0x2a5))_0x3958b2[_0x363982(0x238)](_0x363982(0x28c),{'access':devices[_0x473108][_0x363982(0x1ff)]});else devices[_0x473108]['access']['allow']&&devices[_0x473108][_0x363982(0x1ff)][_0x363982(0x29f)]==_0x363982(0x215)&&(getClientsWithUuid(_0x473108)[_0x363982(0x2e4)](_0x12559f=>{setAccess(_0x12559f);}),setTokenRefresh(_0x473108),setSessionTimeout(_0x363982(0x24a),_0x473108));}}else logger[_0x363982(0x1c2)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x3958b2['on'](_0x14579e(0x244),()=>{resetPassword();}),_0x3958b2['on'](_0x14579e(0x289),_0x17a76f=>{removeClient(_0x3958b2['id']);}),_0x56ae32==_0x14579e(0x1bb)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5e5cd3){const _0x57c7df=_0x4dcc65;if(_0x5e5cd3!='botmanager'&&config[_0x57c7df(0x1a7)]!=''){if(pid[_0x5e5cd3])pid[_0x5e5cd3][_0x57c7df(0x1ea)]({'function':_0x57c7df(0x300),'args':null});}}function getSocket(_0x3dd2d9){const _0x55f9fc=_0x4dcc65;return io[_0x55f9fc(0x26b)][_0x55f9fc(0x26b)][_0x55f9fc(0x1ed)](_0x3dd2d9);}function setAccess(_0xa9fad8){const _0x4d6654=_0x4dcc65,_0x4803e1=getSocket(_0xa9fad8['id']),_0x4cd24b=_0xa9fad8['uuid'],_0x18f5b3=_0xa9fad8[_0x4d6654(0x230)];devices[_0x4cd24b][_0x4d6654(0x1ff)]=validateAccess(devices[_0x4cd24b]['access'][_0x4d6654(0x21b)],_0x4cd24b),_0x4803e1[_0x4d6654(0x2b3)](_0x4cd24b);if(devices[_0x4cd24b][_0x4d6654(0x1ff)][_0x4d6654(0x2a6)]){_0x4803e1[_0x4d6654(0x2b3)](_0x18f5b3);if(_0x18f5b3==_0x4d6654(0x1bb))initializeSocketBotManager(_0x4803e1);else initializeSocketBot(_0x4803e1);initClient(_0x18f5b3);}devices[_0x4cd24b][_0x4d6654(0x1ff)][_0x4d6654(0x21b)]&&devices[_0x4cd24b][_0x4d6654(0x1ff)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0x4d6654(0x284),_0x4cd24b),devices[_0x4cd24b][_0x4d6654(0x1ff)][_0x4d6654(0x21b)]&&devices[_0x4cd24b][_0x4d6654(0x1ff)][_0x4d6654(0x29f)]==_0x4d6654(0x2f1)&&setSessionTimeout(_0x4d6654(0x24a),_0x4cd24b),_0x4803e1[_0x4d6654(0x238)](_0x4d6654(0x28c),{'status':_0xa9fad8[_0x4d6654(0x287)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4cd24b]['access'],'externalip':devices[_0x4cd24b]['ip'],'publicKey':secure[_0x4d6654(0x321)],'userid':settings[_0x4d6654(0x1de)],'validInstallation':validInstallation}),devices[_0x4cd24b]['access']['allow']==![]&&devices[_0x4cd24b][_0x4d6654(0x1ff)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x4cd24b,devices[_0x4cd24b]['ip']);}function setSessionTimeout(_0x5a4218,_0x3ef472){const _0x37b35e=_0x4dcc65;let _0x804f9;if(_0x5a4218==_0x37b35e(0x24a))_0x804f9=loginExpiry*0x3c*0x3e8;else _0x804f9=devices[_0x3ef472]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3ef472][_0x37b35e(0x312)][_0x37b35e(0x267)]);if(devices[_0x3ef472][_0x37b35e(0x32c)])clearTimeout(devices[_0x3ef472][_0x37b35e(0x32c)]);devices[_0x3ef472]['pidExpireLogin']=setTimeout(()=>{const _0x224d29=_0x37b35e;if(devices[_0x3ef472][_0x224d29(0x213)])clearTimeout(devices[_0x3ef472][_0x224d29(0x213)]);removeSocketListeners(_0x3ef472),addBlacklist(_0x3ef472),devices[_0x3ef472]['telegramIpApproval']=null,devices[_0x3ef472][_0x224d29(0x278)]=null,devices[_0x3ef472][_0x224d29(0x1ff)][_0x224d29(0x21b)]=null,devices[_0x3ef472][_0x224d29(0x1ff)]=validateAccess(devices[_0x3ef472]['access'][_0x224d29(0x21b)],_0x3ef472),!(devices[_0x3ef472][_0x224d29(0x1ff)]['allow']&&devices[_0x3ef472]['access'][_0x224d29(0x29f)]=='login\x20not\x20required')&&(_0x5a4218==_0x224d29(0x24a)?io['to'](_0x3ef472)[_0x224d29(0x238)](_0x224d29(0x28c),{'access':{'allow':![],'reason':_0x224d29(0x202),'token':null}}):io['to'](_0x3ef472)['emit'](_0x224d29(0x28c),{'access':{'allow':![],'reason':_0x224d29(0x279),'token':null}})),devices[_0x3ef472][_0x224d29(0x1ff)][_0x224d29(0x21b)]=null;},_0x804f9);}function setTokenRefresh(_0x272a3d){const _0xd070d5=_0x4dcc65;if(devices[_0x272a3d][_0xd070d5(0x213)])clearTimeout(devices[_0x272a3d][_0xd070d5(0x213)]);devices[_0x272a3d][_0xd070d5(0x213)]=setTimeout(()=>{const _0x5d8424=_0xd070d5;getClientsWithUuid(_0x272a3d)[_0x5d8424(0x30b)]!=0x0?(devices[_0x272a3d][_0x5d8424(0x1ff)]=refreshToken(_0x272a3d),io['to'](_0x272a3d)['emit']('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x272a3d]['access'],'externalip':devices[_0x272a3d]['ip'],'publicKey':secure[_0x5d8424(0x321)],'validInstallation':validInstallation}),setTokenRefresh(_0x272a3d)):clearTimeout(devices[_0x272a3d][_0x5d8424(0x213)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4740c8){const _0x38a2c6=_0x4dcc65,_0x36840=getClient(_0x4740c8['id'])[_0x38a2c6(0x1fd)];_0x4740c8[_0x38a2c6(0x238)]('bots',config),_0x4740c8[_0x38a2c6(0x238)](_0x38a2c6(0x1f1),cleanSettings()),_0x4740c8['on'](_0x38a2c6(0x2c5),_0x326484=>{const _0x22bc68=_0x38a2c6;if(validateAccess(_0x326484,_0x36840)['allow'])addBot();else logger[_0x22bc68(0x1c2)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x4740c8['on']('update-bot',(_0x27fcb4,_0x2119ec)=>{const _0x5c1d9c=_0x38a2c6;if(validateAccess(_0x2119ec,_0x36840)[_0x5c1d9c(0x2a6)])toggleBot(_0x27fcb4[_0x5c1d9c(0x2c8)],_0x27fcb4['status'],_0x27fcb4['live']);else logger[_0x5c1d9c(0x1c2)](_0x5c1d9c(0x1b7));}),_0x4740c8['on']('toggle-bot-mode',(_0xc5b6e7,_0x784366)=>{const _0x2be269=_0x38a2c6;if(validateAccess(_0x784366,_0x36840)[_0x2be269(0x2a6)])toggleBotMode(_0xc5b6e7);else logger[_0x2be269(0x1c2)](_0x2be269(0x1b7));}),_0x4740c8['on'](_0x38a2c6(0x29a),(_0x22019a,_0x5ea36c)=>{const _0x2083e4=_0x38a2c6;if(validateAccess(_0x5ea36c,_0x36840)[_0x2083e4(0x2a6)])deleteBot(_0x22019a);else logger[_0x2083e4(0x1c2)](_0x2083e4(0x302));}),_0x4740c8['on'](_0x38a2c6(0x29e),(_0x30144f,_0x1481fd)=>{const _0x1dd9fb=_0x38a2c6;if(validateAccess(_0x1481fd,_0x36840)['allow'])storeSettings(_0x30144f,!![]);else logger['full'](_0x1dd9fb(0x21e));}),_0x4740c8['on'](_0x38a2c6(0x282),_0x52ab6b=>{const _0x279203=_0x38a2c6;if(validateAccess(_0x52ab6b,_0x36840)[_0x279203(0x2a6)])updateBB();else logger[_0x279203(0x1c2)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4740c8['on'](_0x38a2c6(0x2a1),_0x4bdb80=>{const _0x51062d=_0x38a2c6;if(validateAccess(_0x4bdb80,_0x36840)[_0x51062d(0x2a6)])getMessages();else logger[_0x51062d(0x1c2)](_0x51062d(0x20d));}),_0x4740c8['on'](_0x38a2c6(0x2aa),(_0x314c41,_0x5c0caf)=>{const _0x2958e5=_0x38a2c6;if(validateAccess(_0x5c0caf,_0x36840)['allow'])confirmMessage(_0x314c41);else logger['full'](_0x2958e5(0x2af));}),_0x4740c8['on'](_0x38a2c6(0x265),_0xb10057=>{const _0x824e9a=_0x38a2c6;if(validateAccess(_0xb10057,_0x36840)['allow']){if(devices[_0x36840][_0x824e9a(0x213)])clearTimeout(devices[_0x36840]['pidRefreshToken']);if(devices[_0x36840][_0x824e9a(0x32c)])clearTimeout(devices[_0x36840][_0x824e9a(0x32c)]);removeSocketListeners(getClient(_0x4740c8['id'])['uuid']),addBlacklist(_0x36840),devices[_0x36840][_0x824e9a(0x312)]=null,devices[_0x36840]['telegram2FaApproval']=null,devices[_0x36840][_0x824e9a(0x1ff)][_0x824e9a(0x21b)]=null,io['to'](getClient(_0x4740c8['id'])[_0x824e9a(0x1fd)])[_0x824e9a(0x238)]('status',{'access':{'allow':![],'reason':_0x824e9a(0x227),'token':null}});}else logger[_0x824e9a(0x1c2)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x11159f){const _0x2dd10c=_0x4dcc65,_0x35d926=getClient(_0x11159f['id'])[_0x2dd10c(0x230)],_0x3a48c4=getClient(_0x11159f['id'])[_0x2dd10c(0x1fd)];_0x11159f['on']('get-logs',(_0x5a32fd,_0x454691)=>{const _0x3701e5=_0x2dd10c;if(validateAccess(_0x454691,_0x3a48c4)[_0x3701e5(0x2a6)]){if(pid[_0x35d926])pid[_0x35d926][_0x3701e5(0x1ea)]({'function':_0x3701e5(0x1e9),'args':_0x5a32fd});}else logger[_0x3701e5(0x1c2)](_0x3701e5(0x22f));}),_0x11159f['on']('delete-alerts',(_0x1b3ac9,_0x2fc254)=>{const _0x993689=_0x2dd10c;if(validateAccess(_0x2fc254,_0x3a48c4)[_0x993689(0x2a6)]){if(pid[_0x35d926])pid[_0x35d926][_0x993689(0x1ea)]({'function':'deleteHistoryAlerts','args':_0x1b3ac9});}else logger[_0x993689(0x1c2)](_0x993689(0x26e));}),_0x11159f['on'](_0x2dd10c(0x28d),(_0x4f2ae2,_0x40d87e)=>{const _0x16293c=_0x2dd10c;if(validateAccess(_0x40d87e,_0x3a48c4)[_0x16293c(0x2a6)]){if(pid[_0x35d926])pid[_0x35d926][_0x16293c(0x1ea)]({'function':_0x16293c(0x1da),'args':_0x4f2ae2});}else logger['full'](_0x16293c(0x276));}),_0x11159f['on'](_0x2dd10c(0x2dc),(_0x4b1489,_0x56484f)=>{const _0x5bc5f2=_0x2dd10c;if(validateAccess(_0x56484f,_0x3a48c4)[_0x5bc5f2(0x2a6)]){if(pid[_0x35d926])pid[_0x35d926][_0x5bc5f2(0x1ea)]({'function':_0x5bc5f2(0x2c0),'args':_0x4b1489});}else logger['full'](_0x5bc5f2(0x1bc));}),_0x11159f['on'](_0x2dd10c(0x2d8),(_0x64f048,_0x236d7d)=>{const _0x11232f=_0x2dd10c;if(validateAccess(_0x236d7d,_0x3a48c4)['allow']){if(pid[_0x35d926])pid[_0x35d926][_0x11232f(0x1ea)]({'function':_0x11232f(0x250),'args':_0x64f048});}else logger[_0x11232f(0x1c2)](_0x11232f(0x2ed));}),_0x11159f['on'](_0x2dd10c(0x25a),_0x1397d4=>{const _0x189de4=_0x2dd10c;if(validateAccess(_0x1397d4,_0x3a48c4)['allow']){if(pid[_0x35d926])pid[_0x35d926][_0x189de4(0x1ea)]({'function':_0x189de4(0x30d),'args':null});}else logger[_0x189de4(0x1c2)](_0x189de4(0x21a));}),_0x11159f['on']('place-order',(_0x37a2cd,_0x3e7748)=>{const _0x31dbc0=_0x2dd10c;if(validateAccess(_0x3e7748,_0x3a48c4)[_0x31dbc0(0x2a6)]){if(pid[_0x35d926])pid[_0x35d926][_0x31dbc0(0x1ea)]({'function':_0x31dbc0(0x1b1),'args':_0x37a2cd});}else logger['full'](_0x31dbc0(0x2d1));}),_0x11159f['on']('cancel-loading',_0x306565=>{const _0x4406a5=_0x2dd10c;if(validateAccess(_0x306565,_0x3a48c4)['allow']){if(pid[_0x35d926])pid[_0x35d926][_0x4406a5(0x1ea)]({'function':_0x4406a5(0x324),'args':null});}else logger[_0x4406a5(0x1c2)](_0x4406a5(0x211));}),_0x11159f['on']('update-bb',_0xcc9f46=>{const _0x3be263=_0x2dd10c;if(validateAccess(_0xcc9f46,_0x3a48c4)[_0x3be263(0x2a6)])updateBB();else logger['full'](_0x3be263(0x260));}),_0x11159f['on']('get-messages',_0x3518a7=>{const _0x11bffd=_0x2dd10c;if(validateAccess(_0x3518a7,_0x3a48c4)[_0x11bffd(0x2a6)])getMessages();else logger[_0x11bffd(0x1c2)](_0x11bffd(0x20d));}),_0x11159f['on']('confirm-message',(_0x559607,_0x364b17)=>{const _0x152a5c=_0x2dd10c;if(validateAccess(_0x364b17,_0x3a48c4)[_0x152a5c(0x2a6)])confirmMessage(_0x559607);else logger['full'](_0x152a5c(0x2af));}),_0x11159f['on'](_0x2dd10c(0x265),_0x58446f=>{const _0x15bf24=_0x2dd10c;if(validateAccess(_0x58446f,_0x3a48c4)[_0x15bf24(0x2a6)]){if(devices[_0x3a48c4][_0x15bf24(0x213)])clearTimeout(devices[_0x3a48c4][_0x15bf24(0x213)]);if(devices[_0x3a48c4][_0x15bf24(0x32c)])clearTimeout(devices[_0x3a48c4]['pidExpireLogin']);removeSocketListeners(getClient(_0x11159f['id'])['uuid']),addBlacklist(_0x3a48c4),devices[_0x3a48c4][_0x15bf24(0x312)]=null,devices[_0x3a48c4][_0x15bf24(0x278)]=null,devices[_0x3a48c4]['access'][_0x15bf24(0x21b)]=null,io['to'](getClient(_0x11159f['id'])[_0x15bf24(0x1fd)])[_0x15bf24(0x238)](_0x15bf24(0x28c),{'access':{'allow':![],'reason':_0x15bf24(0x227),'token':null}});}else logger[_0x15bf24(0x1c2)](_0x15bf24(0x1e0));});}function removeSocketListeners(_0x455964){const _0x2594be=_0x4dcc65;getClientsWithUuid(_0x455964)[_0x2594be(0x2e4)](_0x1dda56=>{const _0x1c6e7f=_0x2594be;getSocket(_0x1dda56['id'])[_0x1c6e7f(0x2c2)]();});}function cleanSettings(){const _0x34d631=_0x4dcc65;let _0x58ea54=settings;return settings[_0x34d631(0x2e0)]&&settings[_0x34d631(0x2e0)]!=''&&(_0x58ea54={..._0x58ea54,'telegramToken':_0x34d631(0x2b6)}),settings[_0x34d631(0x2c1)]&&settings[_0x34d631(0x2c1)]!=''&&(_0x58ea54={..._0x58ea54,'bbPassword':_0x34d631(0x2b6)}),(settings['bbPassword']&&settings[_0x34d631(0x2c1)]==_0x34d631(0x307)||settings[_0x34d631(0x2e0)]&&settings[_0x34d631(0x2e0)]==_0x34d631(0x307))&&(_0x58ea54={..._0x58ea54,'restored':{'password':settings[_0x34d631(0x2c1)]==_0x34d631(0x307),'telegram':settings[_0x34d631(0x2e0)]==_0x34d631(0x307)}}),_0x58ea54;}function updateBB(){const _0x10f17d=_0x4dcc65;installingUpdate=!![],config[_0x10f17d(0x2e4)](_0xbb12ad=>{const _0x323817=_0x10f17d;restartBot(_0xbb12ad[_0x323817(0x2c8)]);}),process['send']({'update':!![]},_0x34eecb=>{});}function startBot(_0x503552,_0x5a2fa8,_0x42545b){const _0x3c39a2=_0x4dcc65;let _0x27b2d4=![];const _0x1d0c3c=_0x503552[0x0];_0x5a2fa8={..._0x5a2fa8,'stdio':[_0x3c39a2(0x2dd),'inherit',_0x3c39a2(0x2dd),_0x3c39a2(0x2a8)]},pid[_0x1d0c3c]=childProcess[_0x3c39a2(0x204)](botfile,_0x503552,_0x5a2fa8),pid[_0x1d0c3c]['on'](_0x3c39a2(0x20b),_0x3f1fff=>{const _0x2cbd80=_0x3c39a2;switch(Object[_0x2cbd80(0x20f)](_0x3f1fff)[0x0]){case _0x2cbd80(0x298):updateBotName(_0x1d0c3c,_0x3f1fff[_0x2cbd80(0x298)]);break;case _0x2cbd80(0x280):updateBotManager();break;case'status':updateStatus(_0x1d0c3c,_0x3f1fff['status']);break;case _0x2cbd80(0x249):updateLive(_0x1d0c3c,_0x3f1fff[_0x2cbd80(0x249)]);break;case _0x2cbd80(0x2f7):updateLive(_0x1d0c3c,_0x3f1fff['started']),io['to'](_0x1d0c3c)[_0x2cbd80(0x238)](_0x2cbd80(0x28c),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x2cbd80(0x25b):_0x3f1fff['stop']==_0x2cbd80(0x2b8)&&restartBot(_0x1d0c3c);_0x3f1fff['stop']==_0x2cbd80(0x2ba)&&toggleBot(_0x1d0c3c,_0x2cbd80(0x24d),_0x2cbd80(0x26d));break;case _0x2cbd80(0x23b):sendTelegram(_0x1d0c3c,_0x3f1fff[_0x2cbd80(0x23b)]);break;case _0x2cbd80(0x272):sendTelegramMsg(_0x3f1fff[_0x2cbd80(0x272)]);break;case'function':io['to'](_0x1d0c3c)[_0x2cbd80(0x238)](_0x3f1fff[_0x2cbd80(0x2d0)],_0x3f1fff[_0x2cbd80(0x1ca)]);break;}}),pid[_0x1d0c3c]['on'](_0x3c39a2(0x1d2),function(_0x134b84){if(_0x27b2d4)return;_0x27b2d4=!![],_0x42545b(_0x134b84);}),pid[_0x1d0c3c]['on'](_0x3c39a2(0x2ef),async function(_0x739470){const _0x1b01d7=_0x3c39a2;if(installingUpdate)return;if(_0x27b2d4)return;_0x27b2d4=!![],_0x42545b(null);const _0x51d91e=dbConfig[_0x1b01d7(0x1ed)](_0x1b01d7(0x2df))['find']({'botID':_0x1d0c3c})['value']();_0x51d91e&&(_0x51d91e[_0x1b01d7(0x28c)]==_0x1b01d7(0x1af)||_0x51d91e[_0x1b01d7(0x28c)]==_0x1b01d7(0x295))&&(await sleep(0x3e8),updateLive(_0x1d0c3c,_0x1b01d7(0x26d)),logger[_0x1b01d7(0x1c2)](_0x1b01d7(0x2c9)+_0x1d0c3c),startBot([_0x1d0c3c,userID],{'cwd':bbpath},function(_0x104d14){const _0x144574=_0x1b01d7;if(_0x104d14)logger[_0x144574(0x1c2)](_0x104d14);}));});}function stopBot(_0x1c17c2){const _0x48b4c6=_0x4dcc65;getClientsWithBotID(_0x1c17c2)[_0x48b4c6(0x2e4)](_0x344300=>{getSocket(_0x344300['id'])['disconnect'](!![]),removeClient(_0x344300['id']);}),pid[_0x1c17c2]&&(pid[_0x1c17c2][_0x48b4c6(0x2ba)](),pid[_0x1c17c2]=null);}function restartBot(_0xf6222e){const _0x467a39=_0x4dcc65;if(pid[_0xf6222e])pid[_0xf6222e][_0x467a39(0x2ba)]();}function addBot(){const _0x599b77=_0x4dcc65;let _0x3265bf;for(let _0x172dc6=0x1;_0x172dc6<0x3e9;_0x172dc6++){_0x3265bf=_0x172dc6[_0x599b77(0x2ac)]()[_0x599b77(0x231)](0x3,'0');let _0x48e701=config[_0x599b77(0x2eb)](_0x2aebe5=>_0x2aebe5['botID']==_0x3265bf);if(!_0x48e701)break;}if(_0x3265bf==='1000'){logger[_0x599b77(0x1c2)](_0x599b77(0x24f));return;}logger[_0x599b77(0x1c2)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x3265bf),dbConfig[_0x599b77(0x1ed)](_0x599b77(0x2df))[_0x599b77(0x2bc)]({'botID':_0x3265bf,'botname':_0x599b77(0x30a)+_0x3265bf,'status':_0x599b77(0x295),'live':''})['write'](),startBot([_0x3265bf,userID],{'cwd':bbpath},function(_0x197228){const _0x31df55=_0x599b77;if(_0x197228)logger[_0x31df55(0x1c2)](_0x197228);}),config=getConfiguration(),io['to'](_0x599b77(0x1bb))[_0x599b77(0x238)](_0x599b77(0x2df),config);}function deleteBot(_0x80a7ef){const _0x3f90bf=_0x4dcc65;getClientsWithBotID(_0x80a7ef)['forEach'](_0x4c0c8d=>{const _0x2ad1fc=_0xc5a8;getSocket(_0x4c0c8d['id'])[_0x2ad1fc(0x289)](!![]),removeClient(_0x4c0c8d['id']);}),dbConfig[_0x3f90bf(0x1ed)](_0x3f90bf(0x2df))['remove']({'botID':_0x80a7ef})['write'](),logger['full'](_0x3f90bf(0x288)+_0x80a7ef),stopBot(_0x80a7ef);try{fs[_0x3f90bf(0x2ce)](path[_0x3f90bf(0x2b3)](configpath,_0x3f90bf(0x1b9)+_0x80a7ef+_0x3f90bf(0x2d2))),fs[_0x3f90bf(0x2ce)](path[_0x3f90bf(0x2b3)](configpath,_0x3f90bf(0x1b9)+_0x80a7ef+_0x3f90bf(0x308))),fs[_0x3f90bf(0x2ce)](path['join'](configpath,_0x3f90bf(0x1b9)+_0x80a7ef+_0x3f90bf(0x248))),fs[_0x3f90bf(0x2ce)](path[_0x3f90bf(0x2b3)](configpath,_0x3f90bf(0x1b9)+_0x80a7ef+'-results.json'));}catch(_0x3b1d5a){if(_0x3b1d5a)logger[_0x3f90bf(0x1c2)](_0x3f90bf(0x2f0),_0x3b1d5a);}config=getConfiguration(),io['to'](_0x3f90bf(0x1bb))[_0x3f90bf(0x238)]('bots',config);}function toggleBot(_0x58389c,_0x1cf0a9,_0x19c8eb){const _0x2a4645=_0x4dcc65;dbConfig[_0x2a4645(0x1ed)](_0x2a4645(0x2df))[_0x2a4645(0x2eb)]({'botID':_0x58389c})['assign']({'status':_0x1cf0a9})[_0x2a4645(0x309)]({'live':_0x19c8eb})[_0x2a4645(0x1f0)]();if(_0x1cf0a9==_0x2a4645(0x1af)||_0x1cf0a9==_0x2a4645(0x295))logger[_0x2a4645(0x1c2)]('enabled\x20Bot\x20'+_0x58389c),startBot([_0x58389c,userID],{'cwd':bbpath},function(_0x8327d3){if(_0x8327d3)logger['full'](_0x8327d3);});else(_0x1cf0a9==_0x2a4645(0x24d)||_0x1cf0a9==_0x2a4645(0x2b5))&&(logger[_0x2a4645(0x1c2)]('disabled\x20Bot\x20'+_0x58389c),stopBot(_0x58389c));config=getConfiguration(),io['to'](_0x2a4645(0x1bb))[_0x2a4645(0x238)](_0x2a4645(0x2df),config);}function toggleStatus(_0x38de26){const _0x56c4c8=_0x4dcc65;let _0x179bfb=dbConfig[_0x56c4c8(0x1ed)]('bots')[_0x56c4c8(0x2eb)]({'botID':_0x38de26})['value'](),_0x15066d;if(_0x179bfb[_0x56c4c8(0x28c)]===_0x56c4c8(0x1af))_0x15066d='disabled';else{if(_0x179bfb[_0x56c4c8(0x28c)]===_0x56c4c8(0x295))_0x15066d=_0x56c4c8(0x2b5);else{if(_0x179bfb[_0x56c4c8(0x28c)]===_0x56c4c8(0x2b5))_0x15066d=_0x56c4c8(0x295);else{if(_0x179bfb[_0x56c4c8(0x28c)]===_0x56c4c8(0x24d))_0x15066d=_0x56c4c8(0x1af);}}}return _0x15066d;}function updateStatus(_0x29f809,_0x1e60d9){const _0x34ed42=_0x4dcc65;dbConfig[_0x34ed42(0x1ed)](_0x34ed42(0x2df))[_0x34ed42(0x2eb)]({'botID':_0x29f809})[_0x34ed42(0x309)]({'status':_0x1e60d9})[_0x34ed42(0x1f0)](),config=getConfiguration(),io['to'](_0x34ed42(0x1bb))[_0x34ed42(0x238)](_0x34ed42(0x2df),config);}function updateLive(_0x1e867c,_0xee5205){const _0x528586=_0x4dcc65;dbConfig[_0x528586(0x1ed)](_0x528586(0x2df))[_0x528586(0x2eb)]({'botID':_0x1e867c})[_0x528586(0x309)]({'live':_0xee5205})[_0x528586(0x1f0)](),config=getConfiguration(),io['to']('botmanager')[_0x528586(0x238)]('bots',config);}function updateBotName(_0x3296d1,_0x40d94f){const _0x4b16e1=_0x4dcc65;dbConfig[_0x4b16e1(0x1ed)]('bots')[_0x4b16e1(0x2eb)]({'botID':_0x3296d1})[_0x4b16e1(0x309)]({'botname':_0x40d94f})[_0x4b16e1(0x1f0)](),config=getConfiguration(),io['to'](_0x4b16e1(0x1bb))[_0x4b16e1(0x238)]('bots',config);}function updateBotManager(){const _0x20d036=_0x4dcc65;config=getConfiguration(),io['to']('botmanager')[_0x20d036(0x238)](_0x20d036(0x2df),config);}function toggleBotMode(_0x3c6553){const _0x3007dd=_0x4dcc65;if(pid[_0x3c6553])pid[_0x3c6553]['send']({'function':_0x3007dd(0x2f3),'args':null});else{const _0x5b4e=configpath+_0x3007dd(0x1b9)+_0x3c6553+_0x3007dd(0x2d2),_0x2787ef=fs['readFileSync'](_0x5b4e),_0x527f13=JSON[_0x3007dd(0x27e)](_0x2787ef),_0x527dae=_0x527f13[_0x3007dd(0x230)][0x0][_0x3007dd(0x1e3)];_0x527f13[_0x3007dd(0x230)][0x0]['headless']=!_0x527dae;const _0x10c8df=JSON[_0x3007dd(0x1a9)](_0x527f13,null,0x2);fs['writeFileSync'](_0x5b4e,_0x10c8df),config=getConfiguration(),io['to'](_0x3007dd(0x1bb))[_0x3007dd(0x238)](_0x3007dd(0x2df),config);}}function telegramError(_0x1af499){const _0x26075b=_0x4dcc65;logger[_0x26075b(0x32d)](getTimeStamp()+_0x26075b(0x2da));}function validateTelegram(_0x987aa4){const _0x3b3144=_0x4dcc65;if(_0x987aa4[_0x3b3144(0x236)][_0x3b3144(0x25d)]!=settings[_0x3b3144(0x208)]&&'@'+_0x987aa4[_0x3b3144(0x236)][_0x3b3144(0x25d)]!=settings[_0x3b3144(0x208)])return tgBot[_0x3b3144(0x2b1)](_0x987aa4[_0x3b3144(0x228)]['id'],_0x3b3144(0x28f),{'parse_mode':_0x3b3144(0x1f8)})[_0x3b3144(0x28e)](_0x7016e2=>{telegramError(_0x7016e2);}),![];return!![];}async function initTelegram(){const _0x50b9c9=_0x4dcc65;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x50b9c9(0x2e0)],{'polling':!![]});let _0x4e557b='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x4e557b+='\x0a',_0x4e557b+=_0x50b9c9(0x32f),_0x4e557b+=_0x50b9c9(0x2fb),_0x4e557b+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x4e557b+=_0x50b9c9(0x1d4),_0x4e557b+=_0x50b9c9(0x245),_0x4e557b+=_0x50b9c9(0x270),_0x4e557b+=_0x50b9c9(0x275),_0x4e557b+=_0x50b9c9(0x1f7),_0x4e557b+=_0x50b9c9(0x32b),_0x4e557b+=_0x50b9c9(0x262),_0x4e557b+=_0x50b9c9(0x268),_0x4e557b+=_0x50b9c9(0x229);let _0x8bfb='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x8bfb+='\x0a',_0x8bfb+=_0x4e557b,tgBot[_0x50b9c9(0x234)](/\/start/,_0x22b05b=>{const _0x10f896=_0x50b9c9;if(!validateTelegram(_0x22b05b))return;if(settings[_0x10f896(0x1f5)]!=_0x22b05b['chat']['id'])updateSetting(_0x10f896(0x1f5),_0x22b05b['chat']['id']);updateSetting(_0x10f896(0x1d3),!![]),tgBot['sendMessage'](_0x22b05b['chat']['id'],_0x8bfb)[_0x10f896(0x28e)](_0x1d446a=>{telegramError(_0x1d446a);});}),tgBot['onText'](/\/enable/,_0x12bd71=>{const _0x1dfafb=_0x50b9c9;if(!validateTelegram(_0x12bd71))return;if(settings[_0x1dfafb(0x1f5)]!=_0x12bd71[_0x1dfafb(0x228)]['id'])updateSetting(_0x1dfafb(0x1f5),_0x12bd71[_0x1dfafb(0x228)]['id']);updateSetting(_0x1dfafb(0x1d3),!![]),tgBot['sendMessage'](_0x12bd71[_0x1dfafb(0x228)]['id'],_0x1dfafb(0x277))[_0x1dfafb(0x28e)](_0x4a447d=>{telegramError(_0x4a447d);});}),tgBot[_0x50b9c9(0x234)](/\/config/,async _0x2f0076=>{const _0x237492=_0x50b9c9;if(!validateTelegram(_0x2f0076))return;tgBot[_0x237492(0x26c)](_0x237492(0x305)),tgBot[_0x237492(0x2b1)](_0x2f0076[_0x237492(0x228)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x237492(0x315),'callback_data':_0x237492(0x2e7)},{'text':_0x237492(0x323),'callback_data':_0x237492(0x200)},{'text':'All','callback_data':_0x237492(0x29c)}]]}})[_0x237492(0x28e)](_0x2c4039=>{telegramError(_0x2c4039);}),tgBot['on']('callback_query',async _0x1c9ae8=>{const _0x3d6413=_0x237492,_0x432a81=_0x1c9ae8['data'],_0x30fecf=_0x1c9ae8[_0x3d6413(0x20b)];tgBot[_0x3d6413(0x254)](_0x1c9ae8['id'])[_0x3d6413(0x224)](async()=>{const _0x274aa3=_0x3d6413;_0x432a81=='orders'&&(updateSetting('telegramEvents',_0x274aa3(0x2e7)),updateSetting(_0x274aa3(0x1d3),!![]),await tgBot[_0x274aa3(0x2b1)](_0x30fecf[_0x274aa3(0x228)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x274aa3(0x28e)](_0x285378=>{telegramError(_0x285378);}));_0x432a81==_0x274aa3(0x200)&&(updateSetting('telegramEvents',_0x274aa3(0x200)),updateSetting(_0x274aa3(0x1d3),!![]),await tgBot[_0x274aa3(0x2b1)](_0x30fecf[_0x274aa3(0x228)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x2fa5ac=>{telegramError(_0x2fa5ac);}));_0x432a81==_0x274aa3(0x29c)&&(updateSetting(_0x274aa3(0x31b),_0x274aa3(0x29c)),updateSetting(_0x274aa3(0x1d3),!![]),await tgBot['sendMessage'](_0x30fecf[_0x274aa3(0x228)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x1ba816=>{telegramError(_0x1ba816);}));if(!settings['telegramChatId'])tgBot[_0x274aa3(0x2b1)](_0x30fecf[_0x274aa3(0x228)]['id'],_0x274aa3(0x2c6))[_0x274aa3(0x28e)](_0x1b843f=>{telegramError(_0x1b843f);});}),tgBot[_0x3d6413(0x26c)]('callback_query');});}),tgBot[_0x50b9c9(0x234)](/\/status/,_0x164578=>{const _0x206962=_0x50b9c9;if(!validateTelegram(_0x164578))return;const _0x3dedd5=getBotsWithMode();let _0x2db361=_0x206962(0x1dc);config[_0x206962(0x2e4)](_0x45df07=>{const _0x579379=_0x206962,_0x378752=_0x3dedd5['find'](_0x2e2013=>_0x2e2013['botID']==_0x45df07[_0x579379(0x2c8)])[_0x579379(0x1ad)];_0x2db361+='Bot\x20'+_0x45df07[_0x579379(0x2c8)]+':\x20'+_0x45df07[_0x579379(0x28c)]+_0x579379(0x2a2)+_0x378752+_0x579379(0x2a2)+_0x45df07[_0x579379(0x249)]+'\x0a';}),_0x2db361+='\x0a',_0x2db361+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x2db361+=!settings[_0x206962(0x1d3)]?_0x206962(0x1fb):_0x206962(0x2e5),_0x2db361+=settings[_0x206962(0x1d3)]?settings[_0x206962(0x31b)]==_0x206962(0x29c)?_0x206962(0x291):_0x206962(0x21c)+settings['telegramEvents']+_0x206962(0x333):'',tgBot['sendMessage'](_0x164578[_0x206962(0x228)]['id'],_0x2db361,{'parse_mode':_0x206962(0x1f8)})[_0x206962(0x28e)](_0x48b35e=>{telegramError(_0x48b35e);});}),tgBot['onText'](/\/restart/,_0x15f14e=>{const _0xdd005e=_0x50b9c9;if(!validateTelegram(_0x15f14e))return;tgBot[_0xdd005e(0x26c)](_0xdd005e(0x305));const _0x259e38=getEnabledBots();if(_0x259e38['length']==0x0)tgBot[_0xdd005e(0x2b1)](_0x15f14e['chat']['id'],_0xdd005e(0x306))[_0xdd005e(0x28e)](_0x16f870=>{telegramError(_0x16f870);});else{if(_0x259e38[_0xdd005e(0x30b)]>0x1)_0x259e38['push']({'botID':'all'});let _0x364a96=[],_0x3e7d8a=[];const _0x18a858=_0x259e38[_0xdd005e(0x30b)]%0x4==0x0||_0x259e38[_0xdd005e(0x30b)]%0x4==0x3||_0x259e38[_0xdd005e(0x30b)]%0x3==0x1?0x4:0x3;let _0x10f6d7=0x0;_0x259e38['forEach']((_0x56a2b2,_0x4bc8a5)=>{const _0x312ad0=_0xdd005e;if(_0x4bc8a5%_0x18a858==0x0)_0x3e7d8a=[];_0x3e7d8a[_0x312ad0(0x2bc)]({'text':_0x56a2b2['botID']==_0x312ad0(0x29c)?_0x312ad0(0x23f):_0x312ad0(0x30a)+_0x56a2b2[_0x312ad0(0x2c8)],'callback_data':_0x56a2b2[_0x312ad0(0x2c8)]}),_0x4bc8a5%_0x18a858==0x0&&(_0x364a96[_0x10f6d7]=_0x3e7d8a,_0x10f6d7++);}),tgBot[_0xdd005e(0x2b1)](_0x15f14e['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x364a96}})[_0xdd005e(0x28e)](_0x34a65f=>{telegramError(_0x34a65f);}),tgBot['on']('callback_query',async _0x36f510=>{const _0xb0e0f9=_0xdd005e,_0x535cfe=_0x36f510['data'],_0xc56001=_0x36f510[_0xb0e0f9(0x20b)];tgBot[_0xb0e0f9(0x254)](_0x36f510['id'])[_0xb0e0f9(0x224)](async()=>{_0x535cfe=='all'?config['forEach'](_0x5c1784=>{restartBot(_0x5c1784['botID']);}):restartBot(_0x535cfe);}),tgBot['removeListener'](_0xb0e0f9(0x305));});}}),tgBot[_0x50b9c9(0x234)](/\/on/,_0x2379c0=>{const _0x3cf783=_0x50b9c9;if(!validateTelegram(_0x2379c0))return;tgBot[_0x3cf783(0x26c)](_0x3cf783(0x305));const _0x209711=getDisabledBots();if(_0x209711['length']==0x0)tgBot[_0x3cf783(0x2b1)](_0x2379c0['chat']['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x224209=>{telegramError(_0x224209);});else{if(_0x209711[_0x3cf783(0x30b)]>0x1)_0x209711[_0x3cf783(0x2bc)]({'botID':'all'});let _0x516381=[],_0x3ca463=[];const _0x3000df=_0x209711[_0x3cf783(0x30b)]%0x4==0x0||_0x209711[_0x3cf783(0x30b)]%0x4==0x3||_0x209711[_0x3cf783(0x30b)]%0x3==0x1?0x4:0x3;let _0x1806fb=0x0;_0x209711[_0x3cf783(0x2e4)]((_0x3d8522,_0x3599fd)=>{const _0x352438=_0x3cf783;if(_0x3599fd%_0x3000df==0x0)_0x3ca463=[];_0x3ca463[_0x352438(0x2bc)]({'text':_0x3d8522[_0x352438(0x2c8)]==_0x352438(0x29c)?_0x352438(0x23f):_0x352438(0x30a)+_0x3d8522['botID'],'callback_data':_0x3d8522[_0x352438(0x2c8)]}),_0x3599fd%_0x3000df==0x0&&(_0x516381[_0x1806fb]=_0x3ca463,_0x1806fb++);}),tgBot[_0x3cf783(0x2b1)](_0x2379c0[_0x3cf783(0x228)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x516381}})[_0x3cf783(0x28e)](_0x43ae53=>{telegramError(_0x43ae53);}),tgBot['on'](_0x3cf783(0x305),async _0x5a87a1=>{const _0x59be57=_0x3cf783,_0x19ba5b=_0x5a87a1[_0x59be57(0x25c)],_0x42a282=_0x5a87a1[_0x59be57(0x20b)];tgBot[_0x59be57(0x254)](_0x5a87a1['id'])[_0x59be57(0x224)](async()=>{const _0x4896ce=_0x59be57;_0x19ba5b==_0x4896ce(0x29c)?(tgBot[_0x4896ce(0x2b1)](_0x42a282[_0x4896ce(0x228)]['id'],_0x4896ce(0x2ee))[_0x4896ce(0x28e)](_0x1e540c=>{telegramError(_0x1e540c);}),_0x209711[_0x4896ce(0x2e4)](_0x28caaa=>{const _0x3db7d4=_0x4896ce;if(_0x28caaa[_0x3db7d4(0x2c8)]!=_0x3db7d4(0x29c))toggleBot(_0x28caaa[_0x3db7d4(0x2c8)],toggleStatus(_0x28caaa['botID']),_0x3db7d4(0x26d));})):(tgBot[_0x4896ce(0x2b1)](_0x42a282[_0x4896ce(0x228)]['id'],_0x4896ce(0x214)+_0x19ba5b)[_0x4896ce(0x28e)](_0x1edadd=>{telegramError(_0x1edadd);}),toggleBot(_0x19ba5b,toggleStatus(_0x19ba5b),_0x4896ce(0x26d)));}),tgBot[_0x59be57(0x26c)](_0x59be57(0x305));});}}),tgBot[_0x50b9c9(0x234)](/\/off/,_0x435ff4=>{const _0x126587=_0x50b9c9;if(!validateTelegram(_0x435ff4))return;tgBot[_0x126587(0x26c)](_0x126587(0x305));const _0x34c2fd=getEnabledBots();if(_0x34c2fd[_0x126587(0x30b)]==0x0)tgBot[_0x126587(0x2b1)](_0x435ff4[_0x126587(0x228)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x126587(0x28e)](_0x31965f=>{telegramError(_0x31965f);});else{if(_0x34c2fd[_0x126587(0x30b)]>0x1)_0x34c2fd[_0x126587(0x2bc)]({'botID':'all'});let _0x4aa6d4=[],_0x15744b=[];const _0x8311f3=_0x34c2fd[_0x126587(0x30b)]%0x4==0x0||_0x34c2fd[_0x126587(0x30b)]%0x4==0x3||_0x34c2fd[_0x126587(0x30b)]%0x3==0x1?0x4:0x3;let _0x1906c8=0x0;_0x34c2fd[_0x126587(0x2e4)]((_0x28f1fc,_0x3e60eb)=>{const _0x46a12c=_0x126587;if(_0x3e60eb%_0x8311f3==0x0)_0x15744b=[];_0x15744b['push']({'text':_0x28f1fc[_0x46a12c(0x2c8)]==_0x46a12c(0x29c)?'All\x20bots':_0x46a12c(0x30a)+_0x28f1fc[_0x46a12c(0x2c8)],'callback_data':_0x28f1fc['botID']}),_0x3e60eb%_0x8311f3==0x0&&(_0x4aa6d4[_0x1906c8]=_0x15744b,_0x1906c8++);}),tgBot['sendMessage'](_0x435ff4['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x4aa6d4}})[_0x126587(0x28e)](_0x49b023=>{telegramError(_0x49b023);}),tgBot['on'](_0x126587(0x305),async _0x27c380=>{const _0x478ba4=_0x126587,_0x26dd49=_0x27c380[_0x478ba4(0x25c)],_0x3b954c=_0x27c380['message'];tgBot[_0x478ba4(0x254)](_0x27c380['id'])[_0x478ba4(0x224)](async()=>{const _0x59719b=_0x478ba4;_0x26dd49==_0x59719b(0x29c)?(tgBot['sendMessage'](_0x3b954c[_0x59719b(0x228)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x59719b(0x28e)](_0x26a040=>{telegramError(_0x26a040);}),_0x34c2fd[_0x59719b(0x2e4)](_0x1b49a0=>{const _0x25fea7=_0x59719b;if(_0x1b49a0[_0x25fea7(0x2c8)]!=_0x25fea7(0x29c))toggleBot(_0x1b49a0[_0x25fea7(0x2c8)],toggleStatus(_0x1b49a0[_0x25fea7(0x2c8)]),_0x25fea7(0x26d));})):(tgBot[_0x59719b(0x2b1)](_0x3b954c[_0x59719b(0x228)]['id'],_0x59719b(0x20c)+_0x26dd49)[_0x59719b(0x28e)](_0x2f18a1=>{telegramError(_0x2f18a1);}),toggleBot(_0x26dd49,toggleStatus(_0x26dd49),_0x59719b(0x26d)));}),tgBot[_0x478ba4(0x26c)](_0x478ba4(0x305));});}}),tgBot['onText'](/\/portfolio/,_0x4ab8ad=>{const _0x3281a7=_0x50b9c9;if(!validateTelegram(_0x4ab8ad))return;tgBot[_0x3281a7(0x26c)](_0x3281a7(0x305));const _0x4f766f=getEnabledBots();if(_0x4f766f[_0x3281a7(0x30b)]==0x0)tgBot['sendMessage'](_0x4ab8ad['chat']['id'],_0x3281a7(0x306))[_0x3281a7(0x28e)](_0x575e0e=>{telegramError(_0x575e0e);});else{if(_0x4f766f['length']>0x1){let _0x583af5=[],_0x2c938e=[];const _0x267fb1=_0x4f766f[_0x3281a7(0x30b)]%0x4==0x0||_0x4f766f[_0x3281a7(0x30b)]%0x4==0x3||_0x4f766f[_0x3281a7(0x30b)]%0x3==0x1?0x4:0x3;let _0x10775b=0x0;_0x4f766f[_0x3281a7(0x2e4)]((_0x477c75,_0x426214)=>{const _0x8b4363=_0x3281a7;if(_0x426214%_0x267fb1==0x0)_0x2c938e=[];_0x2c938e['push']({'text':_0x8b4363(0x30a)+_0x477c75[_0x8b4363(0x2c8)],'callback_data':_0x477c75[_0x8b4363(0x2c8)]}),_0x426214%_0x267fb1==0x0&&(_0x583af5[_0x10775b]=_0x2c938e,_0x10775b++);}),tgBot[_0x3281a7(0x2b1)](_0x4ab8ad[_0x3281a7(0x228)]['id'],_0x3281a7(0x1ce),{'reply_markup':{'inline_keyboard':_0x583af5}})['catch'](_0xec0149=>{telegramError(_0xec0149);}),tgBot['on'](_0x3281a7(0x305),async _0x13e85a=>{const _0x273987=_0x3281a7,_0x4cf7ed=_0x13e85a[_0x273987(0x25c)],_0xeb9c07=_0x13e85a[_0x273987(0x20b)];tgBot[_0x273987(0x254)](_0x13e85a['id'])[_0x273987(0x224)](async()=>{const _0x592caa=_0x273987;if(pid[_0x4cf7ed])pid[_0x4cf7ed][_0x592caa(0x1ea)]({'function':_0x592caa(0x28a),'args':null});}),tgBot[_0x273987(0x26c)](_0x273987(0x305));});}else{const _0x4aa8c1=_0x4f766f[0x0][_0x3281a7(0x2c8)];if(pid[_0x4aa8c1])pid[_0x4aa8c1]['send']({'function':_0x3281a7(0x28a),'args':null});}}}),tgBot[_0x50b9c9(0x234)](/\/update/,async _0x3b0e59=>{const _0x5f582a=_0x50b9c9;if(!validateTelegram(_0x3b0e59))return;tgBot['removeListener'](_0x5f582a(0x305)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x3b0e59[_0x5f582a(0x228)]['id'],_0x5f582a(0x27f))['catch'](_0x3a21a0=>{telegramError(_0x3a21a0);});else!validInstallation?tgBot[_0x5f582a(0x2b1)](_0x3b0e59[_0x5f582a(0x228)]['id'],_0x5f582a(0x22e))[_0x5f582a(0x28e)](_0x559619=>{telegramError(_0x559619);}):(tgBot[_0x5f582a(0x2b1)](_0x3b0e59[_0x5f582a(0x228)]['id'],_0x5f582a(0x322),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x5f582a(0x221)},{'text':'No','callback_data':'no'}]]}})[_0x5f582a(0x28e)](_0x584f6f=>{telegramError(_0x584f6f);}),tgBot['on'](_0x5f582a(0x305),async _0x146988=>{const _0x2b1f7e=_0x5f582a,_0x4513f5=_0x146988[_0x2b1f7e(0x25c)],_0x5f2933=_0x146988[_0x2b1f7e(0x20b)];tgBot[_0x2b1f7e(0x254)](_0x146988['id'])[_0x2b1f7e(0x224)](async()=>{const _0x253d7e=_0x2b1f7e;_0x4513f5==_0x253d7e(0x221)&&(await tgBot[_0x253d7e(0x2b1)](_0x5f2933[_0x253d7e(0x228)]['id'],_0x253d7e(0x2d4))['catch'](_0x3cd1be=>{telegramError(_0x3cd1be);}),updateBB());_0x4513f5=='no'&&await tgBot[_0x253d7e(0x2b1)](_0x5f2933['chat']['id'],_0x253d7e(0x331))[_0x253d7e(0x28e)](_0x5022ce=>{telegramError(_0x5022ce);});if(!settings['telegramChatId'])tgBot['sendMessage'](_0x5f2933[_0x253d7e(0x228)]['id'],_0x253d7e(0x2c6))[_0x253d7e(0x28e)](_0x131ffb=>{telegramError(_0x131ffb);});}),tgBot[_0x2b1f7e(0x26c)]('callback_query');}));}),tgBot[_0x50b9c9(0x234)](/\/toggle/,_0x1b83ce=>{const _0x1d62a3=_0x50b9c9;if(!validateTelegram(_0x1b83ce))return;tgBot[_0x1d62a3(0x26c)](_0x1d62a3(0x305));const _0x327e24=getBotsWithMode();if(_0x327e24['length']==0x0)tgBot['sendMessage'](_0x1b83ce[_0x1d62a3(0x228)]['id'],_0x1d62a3(0x306))[_0x1d62a3(0x28e)](_0x1dfa16=>{telegramError(_0x1dfa16);});else{let _0x3a3cc6=[],_0x42542e=[];const _0x3884fd=0x2;let _0x10cf24=0x0;_0x327e24[_0x1d62a3(0x2e4)]((_0x1f718c,_0x542c01)=>{const _0x9c2b00=_0x1d62a3;if(_0x542c01%_0x3884fd==0x0)_0x42542e=[];_0x42542e[_0x9c2b00(0x2bc)]({'text':_0x9c2b00(0x30a)+_0x1f718c[_0x9c2b00(0x2c8)]+'\x20('+_0x1f718c['mode']+')','callback_data':_0x1f718c[_0x9c2b00(0x2c8)]}),_0x542c01%_0x3884fd==0x0&&(_0x3a3cc6[_0x10cf24]=_0x42542e,_0x10cf24++);}),tgBot[_0x1d62a3(0x2b1)](_0x1b83ce[_0x1d62a3(0x228)]['id'],_0x1d62a3(0x1cf),{'reply_markup':{'inline_keyboard':_0x3a3cc6}})[_0x1d62a3(0x28e)](_0x8f2f1a=>{telegramError(_0x8f2f1a);}),tgBot['on'](_0x1d62a3(0x305),async _0x3280a6=>{const _0x35a643=_0x1d62a3,_0x4a59a0=_0x3280a6[_0x35a643(0x25c)],_0x3709b6=_0x3280a6[_0x35a643(0x20b)];tgBot[_0x35a643(0x254)](_0x3280a6['id'])[_0x35a643(0x224)](async()=>{const _0x60e603=_0x35a643,_0x37cdf2=_0x327e24[_0x60e603(0x2eb)](_0x26f033=>_0x26f033['botID']==_0x4a59a0),_0x2bf50f=_0x37cdf2['mode']=='auto'?'manual':_0x60e603(0x205);tgBot[_0x60e603(0x2b1)](_0x3709b6['chat']['id'],_0x60e603(0x257)+_0x4a59a0+_0x60e603(0x1e8)+_0x2bf50f+_0x60e603(0x1b8))[_0x60e603(0x28e)](_0x12c560=>{telegramError(_0x12c560);}),toggleBotMode(_0x4a59a0);}),tgBot[_0x35a643(0x26c)](_0x35a643(0x305));});}}),tgBot[_0x50b9c9(0x234)](/\/names/,_0x19cd9c=>{const _0x4a1808=_0x50b9c9;if(!validateTelegram(_0x19cd9c))return;let _0x19437b='';config[_0x4a1808(0x2e4)](_0x3d3693=>{const _0x5eea49=_0x4a1808;_0x19437b+=_0x5eea49(0x30a)+_0x3d3693[_0x5eea49(0x2c8)]+':\x20'+_0x3d3693[_0x5eea49(0x298)]+'\x0a';}),tgBot[_0x4a1808(0x2b1)](_0x19cd9c[_0x4a1808(0x228)]['id'],_0x19437b,{'parse_mode':'HTML'})[_0x4a1808(0x28e)](_0x2a739a=>{telegramError(_0x2a739a);});}),tgBot['onText'](/\/disable/,_0x290c3e=>{const _0x37888a=_0x50b9c9;if(!validateTelegram(_0x290c3e))return;tgBot[_0x37888a(0x2b1)](_0x290c3e[_0x37888a(0x228)]['id'],_0x37888a(0x2d3))[_0x37888a(0x28e)](_0x37e43c=>{telegramError(_0x37e43c);}),updateSetting(_0x37888a(0x1d3),![]);}),tgBot['onText'](/\/help/,_0x2fd450=>{const _0x46284c=_0x50b9c9;if(!validateTelegram(_0x2fd450))return;tgBot[_0x46284c(0x2b1)](_0x2fd450[_0x46284c(0x228)]['id'],_0x4e557b)[_0x46284c(0x28e)](_0x212777=>{telegramError(_0x212777);});}),tgBot['on']('polling_error',_0x3f1a13=>{const _0x5c11df=_0x50b9c9;_0x3f1a13[_0x5c11df(0x2ac)]()['includes'](_0x5c11df(0x223))&&(logger[_0x5c11df(0x1c2)]('Invalid\x20Telegram\x20token'),tgBot[_0x5c11df(0x269)](),tgBot=null,io['to'](_0x5c11df(0x1bb))[_0x5c11df(0x238)](_0x5c11df(0x2f6),'Invalid\x20Telegram\x20token'));}),process[_0x50b9c9(0x327)]('SIGINT',()=>{const _0x479668=_0x50b9c9;if(tgBot)tgBot[_0x479668(0x269)]();process[_0x479668(0x2ef)](0x1);}),process[_0x50b9c9(0x327)](_0x50b9c9(0x1ba),()=>{const _0x5717ef=_0x50b9c9;if(tgBot)tgBot['stopPolling']();process[_0x5717ef(0x2ef)](0x1);});}}function disableTelegram(){const _0x4e33c2=_0x4dcc65;tgBot&&(tgBot[_0x4e33c2(0x269)](),tgBot=null);}function sendTelegram(_0xa4d955,_0x48afe4){const _0x2f4380=_0x4dcc65;if(settings['telegramEnabled']){if(settings[_0x2f4380(0x31b)]==_0x2f4380(0x29c)||(_0x48afe4[_0x2f4380(0x2f2)]==_0x2f4380(0x1d2)||_0x48afe4[_0x2f4380(0x2f2)]==_0x2f4380(0x2e6)||_0x48afe4[_0x2f4380(0x2f2)]==_0x2f4380(0x206))&&settings[_0x2f4380(0x31b)]==_0x2f4380(0x200)||_0x48afe4['type']==_0x2f4380(0x242)&&settings[_0x2f4380(0x31b)]==_0x2f4380(0x2e7)){if(tgBot&&settings[_0x2f4380(0x1f5)]){if(_0x48afe4[_0x2f4380(0x1e7)])tgBot['sendMessage'](settings[_0x2f4380(0x1f5)],_0x48afe4[_0x2f4380(0x298)]+_0x2f4380(0x274)+_0x48afe4[_0x2f4380(0x22c)])[_0x2f4380(0x28e)](_0x355b20=>{telegramError(_0x355b20);});else tgBot[_0x2f4380(0x2b1)](settings[_0x2f4380(0x1f5)],_0x2f4380(0x30a)+_0xa4d955+_0x2f4380(0x274)+_0x48afe4['event'])[_0x2f4380(0x28e)](_0x2d52c7=>{telegramError(_0x2d52c7);});}}}}async function sendTelegramMsg(_0x1bf957,_0x34fed1=_0x4dcc65(0x1f8)){const _0x5484f8=_0x4dcc65;return settings['telegramEnabled']&&tgBot&&settings[_0x5484f8(0x1f5)]?(await tgBot['sendMessage'](settings['telegramChatId'],_0x1bf957,{'parse_mode':_0x34fed1})['catch'](_0x1c988b=>{telegramError(_0x1c988b);}),!![]):![];}function getDeviceWithIp(_0xacfbad){return devices['find'](_0x4ed2c8=>_0x4ed2c8['ip']===_0xacfbad);}function temporaryAccess2FA(_0x1ca918,_0x4e621b){const _0x373a7e=_0x4dcc65;let _0x381af5=new Date(),_0x3c8c81=![];if(lastIpApproval){if(_0x381af5-lastIpApproval<0x1388)_0x3c8c81=!![];}lastIpApproval=new Date();if(_0x3c8c81)return;tgBot&&settings[_0x373a7e(0x1f5)]&&(tgBot[_0x373a7e(0x26c)](_0x373a7e(0x305)),tgBot[_0x373a7e(0x2b1)](settings['telegramChatId'],_0x373a7e(0x1d9)+normalizeIP(_0x4e621b)[_0x373a7e(0x225)]+'</b>\x20?',{'parse_mode':_0x373a7e(0x1f8),'reply_markup':{'inline_keyboard':[[{'text':_0x373a7e(0x2ea),'callback_data':'5'},{'text':_0x373a7e(0x2f9),'callback_data':'15'},{'text':_0x373a7e(0x1e4),'callback_data':'30'},{'text':_0x373a7e(0x266),'callback_data':_0x373a7e(0x266)}]]}})[_0x373a7e(0x28e)](_0xcf3375=>{telegramError(_0xcf3375);}),tgBot['on'](_0x373a7e(0x305),async _0x1de8b9=>{const _0x185430=_0x373a7e,_0x3b0ede=_0x1de8b9[_0x185430(0x25c)],_0x3aaa43=_0x1de8b9[_0x185430(0x20b)];tgBot['answerCallbackQuery'](_0x1de8b9['id'])['then'](async()=>{const _0x3742c6=_0x185430;devices[_0x1ca918][_0x3742c6(0x312)]={'clientip':_0x4e621b,'timestamp':new Date()['getTime'](),'expiry':_0x3b0ede},_0x3b0ede!=_0x3742c6(0x266)?(await tgBot[_0x3742c6(0x2b1)](_0x3aaa43[_0x3742c6(0x228)]['id'],'Access\x20enabled\x20for\x20'+_0x3b0ede+_0x3742c6(0x1a3),{'parse_mode':_0x3742c6(0x1f8)})['catch'](_0x37b6f6=>{telegramError(_0x37b6f6);}),io['to'](_0x1ca918)[_0x3742c6(0x238)](_0x3742c6(0x28c),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3742c6(0x2b1)](_0x3aaa43[_0x3742c6(0x228)]['id'],'Temporary\x20access\x20rejected')[_0x3742c6(0x28e)](_0x52eddb=>{telegramError(_0x52eddb);}),io['to'](_0x1ca918)['emit'](_0x3742c6(0x28c),{'access':{'allow':![],'reason':_0x3742c6(0x316),'token':null}}));}),tgBot[_0x185430(0x26c)](_0x185430(0x305));}));}function loginAccess2FA(_0xa7624f,_0x297e8e){const _0x4254c4=_0x4dcc65;tgBot&&settings[_0x4254c4(0x1f5)]&&(tgBot[_0x4254c4(0x26c)](_0x4254c4(0x305)),tgBot['sendMessage'](settings[_0x4254c4(0x1f5)],_0x4254c4(0x207)+normalizeIP(_0x297e8e)[_0x4254c4(0x225)]+'</b>\x20?',{'parse_mode':_0x4254c4(0x1f8),'reply_markup':{'inline_keyboard':[[{'text':_0x4254c4(0x2ad),'callback_data':loginExpiry},{'text':_0x4254c4(0x266),'callback_data':_0x4254c4(0x266)}]]}})[_0x4254c4(0x28e)](_0x42b988=>{telegramError(_0x42b988);}),tgBot['on'](_0x4254c4(0x305),async _0x3b78de=>{const _0x1ab3aa=_0x4254c4,_0x2317c2=_0x3b78de['data'],_0x201a87=_0x3b78de[_0x1ab3aa(0x20b)];tgBot[_0x1ab3aa(0x254)](_0x3b78de['id'])[_0x1ab3aa(0x224)](async()=>{const _0x3e6321=_0x1ab3aa;devices[_0xa7624f][_0x3e6321(0x278)]={'clientip':_0x297e8e,'timestamp':new Date()['getTime'](),'expiry':_0x2317c2},_0x2317c2!=_0x3e6321(0x266)?(await tgBot[_0x3e6321(0x2b1)](_0x201a87[_0x3e6321(0x228)]['id'],_0x3e6321(0x2fa),{'parse_mode':_0x3e6321(0x1f8)})[_0x3e6321(0x28e)](_0x5db512=>{telegramError(_0x5db512);}),io['to'](_0xa7624f)[_0x3e6321(0x238)]('status',{'access':{'allow':![],'reason':_0x3e6321(0x31d),'token':null}})):(await tgBot[_0x3e6321(0x2b1)](_0x201a87[_0x3e6321(0x228)]['id'],_0x3e6321(0x2b7))[_0x3e6321(0x28e)](_0x41e48d=>{telegramError(_0x41e48d);}),io['to'](_0xa7624f)[_0x3e6321(0x238)](_0x3e6321(0x28c),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x1ab3aa(0x26c)](_0x1ab3aa(0x305));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x11fa3f=_0x4dcc65;return dbConfig[_0x11fa3f(0x1ed)](_0x11fa3f(0x2df))['sortBy'](_0x11fa3f(0x2c8))[_0x11fa3f(0x285)]({'status':_0x11fa3f(0x1af)})[_0x11fa3f(0x210)]()||[];}function getDisabledBots(){const _0x48bf67=_0x4dcc65;return dbConfig[_0x48bf67(0x1ed)](_0x48bf67(0x2df))[_0x48bf67(0x2b2)]('botID')[_0x48bf67(0x285)]({'status':_0x48bf67(0x24d)})[_0x48bf67(0x210)]()||[];}function getBotAttributes(_0x225a70){const _0x5525ed=_0x4dcc65;let _0x1d61cf={};const _0x1e14e9=configpath+_0x5525ed(0x1b9)+_0x225a70+'-config.json',_0x554b77=fs['existsSync'](_0x1e14e9);if(_0x554b77){const _0x12a081=fs['readFileSync'](_0x1e14e9);try{const _0x347da8=JSON['parse'](_0x12a081),_0x18e9d6=_0x347da8?_0x347da8['bot'][0x0][_0x5525ed(0x1e3)]:![];_0x1d61cf[_0x5525ed(0x1ad)]=_0x18e9d6?_0x5525ed(0x205):_0x5525ed(0x1c9),_0x1d61cf[_0x5525ed(0x298)]=_0x347da8?_0x347da8['bot'][0x0]['botname']:_0x5525ed(0x30a)+_0x225a70;}catch(_0x1bcb4f){_0x1d61cf[_0x5525ed(0x1ad)]='manual',_0x1d61cf[_0x5525ed(0x298)]='Bot\x20'+_0x225a70;}}else _0x1d61cf[_0x5525ed(0x1ad)]='manual',_0x1d61cf[_0x5525ed(0x298)]=_0x5525ed(0x30a)+_0x225a70;return _0x1d61cf;}function getBotsWithMode(){const _0x1a70f1=_0x4dcc65,_0x1d900a=dbConfig['get'](_0x1a70f1(0x2df))['sortBy']('botID')[_0x1a70f1(0x210)]()||[];return _0x1d900a[_0x1a70f1(0x2e4)](_0x31f8cf=>{const _0x5da21f=_0x1a70f1;let _0x24f262=getBotAttributes(_0x31f8cf[_0x5da21f(0x2c8)]);_0x31f8cf[_0x5da21f(0x1ad)]=_0x24f262['mode'];}),_0x1d900a;}async function initUser(){const _0x1999a0=_0x4dcc65;if(!settings[_0x1999a0(0x1de)]){const _0x286866=uuidRandom();mixpanel[_0x1999a0(0x304)](_0x286866),updateSetting(_0x1999a0(0x1de),_0x286866);}}async function initSecure(){const _0x349414=_0x4dcc65;let _0x29b96c=getSecure();if(!_0x29b96c[_0x349414(0x23c)]('secret')){let _0xdfda48=await generateKeys();_0x29b96c[_0x349414(0x321)]=_0xdfda48['publicKey'],_0x29b96c[_0x349414(0x30c)]=_0xdfda48[_0x349414(0x30c)],_0x29b96c[_0x349414(0x23a)]=crypto[_0x349414(0x31f)](0x20)['toString'](_0x349414(0x258));;storeSecure(_0x29b96c);}}function getSettings(){const _0x5cbff5=_0x4dcc65;return dbSettings[_0x5cbff5(0x1ed)](_0x5cbff5(0x1f1))['value']()||{};}function getSecure(){const _0x12e939=_0x4dcc65;return dbSecure['get'](_0x12e939(0x2de))[_0x12e939(0x210)]()||{};}function getBlacklist(){const _0x2ee2b2=_0x4dcc65;return dbSecure['get']('blacklist')[_0x2ee2b2(0x210)]()||[];}function broadcastToBots(_0x5a3e05,_0x30bd27){const _0x4c2ff3=_0x4dcc65;config[_0x4c2ff3(0x2e4)](_0x82ce4a=>{const _0x158f2e=_0x4c2ff3;if(_0x82ce4a['status']==_0x158f2e(0x1af)&&_0x82ce4a['live']==_0x158f2e(0x1fe)){if(pid[_0x82ce4a[_0x158f2e(0x2c8)]])pid[_0x82ce4a['botID']][_0x158f2e(0x1ea)]({[_0x5a3e05]:_0x30bd27});}});}function storeSettings(_0x36b8de,_0x3446a3=![]){const _0x47bdfd=_0x4dcc65;_0x36b8de={...settings,..._0x36b8de};if(_0x3446a3&&_0x36b8de[_0x47bdfd(0x2c1)]!=_0x47bdfd(0x2b6)&&_0x36b8de[_0x47bdfd(0x2c1)]!=''){const _0x1ab6ea=crypt[_0x47bdfd(0x1bf)](secure[_0x47bdfd(0x30c)],_0x36b8de[_0x47bdfd(0x2c1)])['message'][_0x47bdfd(0x217)]('@')[0x0],_0x2f7ecd=bcrypt[_0x47bdfd(0x313)](_0x1ab6ea,saltRounds);_0x36b8de={..._0x36b8de,'bbPassword':_0x2f7ecd};}if(_0x3446a3&&_0x36b8de[_0x47bdfd(0x2e0)]!='************'&&_0x36b8de[_0x47bdfd(0x2e0)]!=''){const _0x324dcc=crypt['decrypt'](secure[_0x47bdfd(0x30c)],_0x36b8de[_0x47bdfd(0x2e0)])[_0x47bdfd(0x20b)][_0x47bdfd(0x217)]('@')[0x0];_0x36b8de={..._0x36b8de,'telegramToken':_0x324dcc};}const _0x307702=_0x36b8de['telegramToken']!='************'&&_0x36b8de[_0x47bdfd(0x2e0)]!=settings[_0x47bdfd(0x2e0)]||_0x36b8de[_0x47bdfd(0x208)]!=settings[_0x47bdfd(0x208)],_0x5ba77a=_0x36b8de[_0x47bdfd(0x2e0)]==''||_0x36b8de[_0x47bdfd(0x208)]=='';if(_0x307702)_0x36b8de[_0x47bdfd(0x31b)]=_0x47bdfd(0x29c);for(const [_0x1fe9c3,_0x248c25]of Object[_0x47bdfd(0x1ae)](_0x36b8de)){if(_0x1fe9c3==_0x47bdfd(0x2e0)&&_0x248c25==_0x47bdfd(0x2b6)){_0x36b8de[_0x47bdfd(0x2e0)]=settings[_0x47bdfd(0x2e0)];continue;};if(_0x1fe9c3==_0x47bdfd(0x2c1)&&_0x248c25==_0x47bdfd(0x2b6)){_0x36b8de[_0x47bdfd(0x2c1)]=settings['bbPassword'];continue;};dbSettings[_0x47bdfd(0x26a)](_0x47bdfd(0x23e)+_0x1fe9c3,_0x248c25)[_0x47bdfd(0x1f0)]();}settings=_0x36b8de,io['to'](_0x47bdfd(0x1bb))[_0x47bdfd(0x238)](_0x47bdfd(0x1f1),cleanSettings()),broadcastToBots(_0x47bdfd(0x2f5),settings[_0x47bdfd(0x2f5)]);if(_0x307702&&!_0x5ba77a)initTelegram();if(_0x307702&&_0x5ba77a)disableTelegram();getAllClients()[_0x47bdfd(0x2e4)](_0x4eac59=>{const _0xe2aac9=_0x47bdfd;getSocket(_0x4eac59['id'])['emit'](_0xe2aac9(0x28c),{'access':{'allow':![],'reason':_0xe2aac9(0x31d),'token':null}});});}function updateSetting(_0x484bcf,_0x46458a){const _0x385099=_0x4dcc65;dbSettings[_0x385099(0x26a)](_0x385099(0x23e)+_0x484bcf,_0x46458a)['write'](),settings=getSettings(),io['to'](_0x385099(0x1bb))[_0x385099(0x238)](_0x385099(0x1f1),cleanSettings());}function storeSecure(_0x309764){const _0x4569ce=_0x4dcc65;dbSecure[_0x4569ce(0x1ed)]('secure')[_0x4569ce(0x2bc)](_0x309764)[_0x4569ce(0x1f0)](),secure=_0x309764;}function addBlacklist(_0x4b3f2c){const _0x4e3034=_0x4dcc65;cleanBlacklist();let _0x423b46;devices[_0x4b3f2c][_0x4e3034(0x312)]?_0x423b46=Math[_0x4e3034(0x1e1)](devices[_0x4b3f2c]['telegramIpApproval'][_0x4e3034(0x1d7)],loginExpiry):_0x423b46=loginExpiry,dbSecure['get']('blacklist')[_0x4e3034(0x2bc)]({'expiry':new Date()['getTime']()+_0x423b46*0x3c*0x3e8,'token':devices[_0x4b3f2c][_0x4e3034(0x1ff)][_0x4e3034(0x21b)]})[_0x4e3034(0x1f0)](),blacklist=dbSecure[_0x4e3034(0x1ed)](_0x4e3034(0x2e2))[_0x4e3034(0x210)]();}function cleanBlacklist(){const _0x586e6b=_0x4dcc65;let _0x4dfa64=dbSecure['get'](_0x586e6b(0x2e2))[_0x586e6b(0x1dd)]()[_0x586e6b(0x210)](),_0x578c68=new Date()[_0x586e6b(0x1fc)]();_0x4dfa64[_0x586e6b(0x2e4)](_0x2e9e4a=>{const _0x5689b5=_0x586e6b;_0x2e9e4a[_0x5689b5(0x1d7)]<_0x578c68&&dbSecure['get'](_0x5689b5(0x2e2))['remove']({'expiry':_0x2e9e4a['expiry']})['write']();});}function initStates(){let _0x35ce11=getConfiguration();_0x35ce11['forEach'](_0x7642ba=>{const _0x447741=_0xc5a8;_0x7642ba['live']=_0x447741(0x26d);}),storeConfiguration(_0x35ce11);}function onKeys(){const _0x428602=new RSA();return new Promise(_0x29e414=>{const _0x15ad94=_0xc5a8;_0x428602[_0x15ad94(0x1db)]()[_0x15ad94(0x224)](_0x5afd1c=>{_0x29e414(_0x5afd1c);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2a3cc6=_0x4dcc65;let _0x728548=getSettings(),_0x552e34=![];!_0x728548['hasOwnProperty'](_0x2a3cc6(0x283))&&(_0x728548[_0x2a3cc6(0x283)]=0x0,_0x552e34=!![]);!_0x728548[_0x2a3cc6(0x23c)](_0x2a3cc6(0x296))&&(_0x728548[_0x2a3cc6(0x296)]=0x0,_0x552e34=!![]);!_0x728548[_0x2a3cc6(0x23c)](_0x2a3cc6(0x24b))&&(_0x728548[_0x2a3cc6(0x24b)]=_0x2a3cc6(0x1a6),_0x552e34=!![]);if(_0x552e34)storeSettings(_0x728548);}function storeConfiguration(_0x3471d4){const _0x1f8e32=_0x4dcc65;dbConfig['get'](_0x1f8e32(0x2df))[_0x1f8e32(0x30e)]()[_0x1f8e32(0x1f0)](),_0x3471d4[_0x1f8e32(0x2e4)](_0x241a89=>{const _0x2810cb=_0x1f8e32;delete _0x241a89[_0x2810cb(0x1ad)];}),dbConfig[_0x1f8e32(0x1ed)](_0x1f8e32(0x2df))['push'](..._0x3471d4)[_0x1f8e32(0x1f0)](),config=_0x3471d4;}function resetPassword(){const _0x27b306=_0x4dcc65;tgBot&&settings['telegramChatId']&&(tgBot[_0x27b306(0x26c)](_0x27b306(0x305)),tgBot['sendMessage'](settings['telegramChatId'],_0x27b306(0x1ec),{'parse_mode':_0x27b306(0x1f8),'reply_markup':{'inline_keyboard':[[{'text':_0x27b306(0x221),'callback_data':_0x27b306(0x221)},{'text':'no','callback_data':'no'}]]}})[_0x27b306(0x28e)](_0x92d49e=>{telegramError(_0x92d49e);}),tgBot['on']('callback_query',async _0x242361=>{const _0x371dab=_0x27b306,_0x594943=_0x242361[_0x371dab(0x25c)],_0xc1d749=_0x242361[_0x371dab(0x20b)];tgBot['answerCallbackQuery'](_0x242361['id'])[_0x371dab(0x224)](async()=>{const _0x21a6bc=_0x371dab;if(_0x594943!='no'){const _0x29ebdd=0xf,_0x23ca7a='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x5bd0f3=Array[_0x21a6bc(0x236)](crypto[_0x21a6bc(0x29b)](new Uint32Array(_0x29ebdd)))[_0x21a6bc(0x226)](_0x34f2e3=>_0x23ca7a[_0x34f2e3%_0x23ca7a[_0x21a6bc(0x30b)]])[_0x21a6bc(0x2b3)](''),_0xfcee57=bcrypt[_0x21a6bc(0x313)](_0x5bd0f3,saltRounds);storeSettings({'bbPassword':_0xfcee57}),await tgBot[_0x21a6bc(0x2b1)](_0xc1d749[_0x21a6bc(0x228)]['id'],_0x21a6bc(0x264)+_0x5bd0f3,{'parse_mode':_0x21a6bc(0x1f8)})[_0x21a6bc(0x28e)](_0x3d53c1=>{telegramError(_0x3d53c1);});}else await tgBot['sendMessage'](_0xc1d749[_0x21a6bc(0x228)]['id'],_0x21a6bc(0x2bd))[_0x21a6bc(0x28e)](_0x5d76ca=>{telegramError(_0x5d76ca);});}),tgBot['removeListener'](_0x371dab(0x305));}));}function getServerTime(){const _0x73681d=_0x4dcc65,_0x14c594=new Date();return _0x14c594[_0x73681d(0x216)]()+'/'+(_0x14c594[_0x73681d(0x2b0)]()+0x1)[_0x73681d(0x2ac)]()[_0x73681d(0x231)](0x2,'0')+'/'+_0x14c594[_0x73681d(0x31a)]()[_0x73681d(0x2ac)]()[_0x73681d(0x231)](0x2,'0')+'\x20'+_0x14c594['getHours']()['toString']()[_0x73681d(0x231)](0x2,'0')+':'+_0x14c594[_0x73681d(0x2db)]()[_0x73681d(0x2ac)]()[_0x73681d(0x231)](0x2,'0')+':'+_0x14c594['getSeconds']()[_0x73681d(0x2ac)]()[_0x73681d(0x231)](0x2,'0');}function getTimeStamp(){const _0x113720=_0x4dcc65,_0x12d1ab=shiftedTime();return _0x12d1ab['getFullYear']()+'/'+(_0x12d1ab[_0x113720(0x2b0)]()+0x1)[_0x113720(0x2ac)]()['padStart'](0x2,'0')+'/'+_0x12d1ab[_0x113720(0x31a)]()[_0x113720(0x2ac)]()[_0x113720(0x231)](0x2,'0')+'\x20'+_0x12d1ab[_0x113720(0x31c)]()['toString']()[_0x113720(0x231)](0x2,'0')+':'+_0x12d1ab[_0x113720(0x2db)]()[_0x113720(0x2ac)]()['padStart'](0x2,'0')+':'+_0x12d1ab[_0x113720(0x317)]()['toString']()[_0x113720(0x231)](0x2,'0');}function shiftedTime(){const _0x6e86bb=_0x4dcc65,_0x5aff80=new Date();let _0x32edd6=_0x5aff80;if(settings[_0x6e86bb(0x2f5)]&&settings[_0x6e86bb(0x2f5)]!==0x0)_0x32edd6=fns[_0x6e86bb(0x22a)](_0x5aff80,{'hours':settings['timeshift']});return _0x32edd6;}function startScheduler(){const _0x3b37ab=_0x4dcc65,_0x1096c4=new Date()[_0x3b37ab(0x232)](),_0x32e11e=shiftedTime()[_0x3b37ab(0x31c)]();_0x32e11e==0x4&&backupConfigFiles();_0x32e11e==0x0&&rotateLogFiles();_0x1096c4%0x6==0x0&&triggerAnalytics();_0x1096c4%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5df5c6=_0x4dcc65;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x5df5c6(0x2e4)](_0x42c617=>{const _0x1f4c2c=_0x5df5c6;if(!_0x42c617['isDirectory']())fs[_0x1f4c2c(0x235)](configpath+_0x42c617[_0x1f4c2c(0x2e9)],configbackuppath+_0x42c617[_0x1f4c2c(0x2e9)]);});}function rotateLogFiles(){const _0x373c01=_0x4dcc65;let _0x274cd6=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x274cd6[_0x373c01(0x23d)]((_0x26a0ca,_0x3a812c)=>_0x26a0ca[_0x373c01(0x2e9)]<_0x3a812c['name']?0x1:_0x3a812c[_0x373c01(0x2e9)]<_0x26a0ca[_0x373c01(0x2e9)]?-0x1:0x0),_0x274cd6[_0x373c01(0x2e4)](_0x55c1a3=>{const _0x523114=_0x373c01;if(_0x55c1a3[_0x523114(0x2e9)]==_0x523114(0x1d6))fs[_0x523114(0x235)](logspath+_0x55c1a3[_0x523114(0x2e9)],logspath+_0x523114(0x2e8));if(_0x55c1a3['name']=='output-001.log')fs[_0x523114(0x235)](logspath+_0x55c1a3[_0x523114(0x2e9)],logspath+_0x523114(0x1d6));_0x55c1a3['name']=='output-000.log'&&(fs[_0x523114(0x235)](logspath+_0x55c1a3[_0x523114(0x2e9)],logspath+_0x523114(0x1be)),fs[_0x523114(0x25f)](logspath+_0x55c1a3[_0x523114(0x2e9)],''));});}async function zipFiles(_0x1a052d){const _0x32cfa9=_0x4dcc65;let _0x8f6bad;if(_0x1a052d==_0x32cfa9(0x2e3))_0x8f6bad=logspath;if(_0x1a052d==_0x32cfa9(0x293))_0x8f6bad=configpath;let _0x3193fe=fs[_0x32cfa9(0x2fd)](_0x8f6bad,{'withFileTypes':!![]});const _0x48e47f=new require('node-zip')();_0x3193fe[_0x32cfa9(0x2e4)](_0x299189=>{const _0x39ae11=_0x32cfa9;if(!_0x299189['isDirectory']()){let _0x11b731=fs[_0x39ae11(0x1b2)](_0x8f6bad+_0x299189[_0x39ae11(0x2e9)]);const _0xf3e77d=/^bot-[0-9]{3}-config.json$/,_0x1a5b3e=_0xf3e77d[_0x39ae11(0x294)](_0x299189[_0x39ae11(0x2e9)]);if(_0x1a5b3e){const _0x4b6cd9=JSON[_0x39ae11(0x27e)](_0x11b731);_0x4b6cd9[_0x39ae11(0x230)][0x0]['apiKey']='***',_0x4b6cd9[_0x39ae11(0x230)][0x0][_0x39ae11(0x253)]='***',_0x11b731=JSON[_0x39ae11(0x1a9)](_0x4b6cd9,null,0x2);}if(_0x299189[_0x39ae11(0x2e9)]=='bb-settings.json'){const _0x380d53=JSON[_0x39ae11(0x27e)](_0x11b731);if(_0x380d53[_0x39ae11(0x1f1)]['loginRequired'])_0x380d53[_0x39ae11(0x1f1)][_0x39ae11(0x1b6)]=![];if(_0x380d53['settings']['bbPassword'])_0x380d53[_0x39ae11(0x1f1)][_0x39ae11(0x2c1)]=_0x39ae11(0x307);if(_0x380d53[_0x39ae11(0x1f1)]['telegramToken'])_0x380d53['settings'][_0x39ae11(0x2e0)]='***';if(_0x380d53['settings'][_0x39ae11(0x1f5)])_0x380d53[_0x39ae11(0x1f1)][_0x39ae11(0x1f5)]='';_0x11b731=JSON[_0x39ae11(0x1a9)](_0x380d53,null,0x2);}if(_0x299189[_0x39ae11(0x2e9)]!='bb-secure.json')_0x48e47f[_0x39ae11(0x2d9)](_0x299189['name'],_0x11b731);}});const _0x2add1a=_0x48e47f[_0x32cfa9(0x2a9)]({'base64':![],'compression':'DEFLATE'});fs[_0x32cfa9(0x25f)](zippath+(_0x1a052d+_0x32cfa9(0x1c7)),_0x2add1a,_0x32cfa9(0x1cc));}async function getPublicIp(){const _0x4b7807=_0x4dcc65;try{const _0x5374d1=await axios[_0x4b7807(0x1ed)](_0x4b7807(0x1a5));publicip=_0x5374d1[_0x4b7807(0x25c)]['ip'];}catch(_0x42a20d){}}async function triggerAnalytics(){const _0x3dc329=_0x4dcc65;if(!publicip)await getPublicIp();const _0x1c2956=getBotsWithMode();let _0x2d99c3=0x0;_0x1c2956[_0x3dc329(0x2e4)](_0x4aefe4=>{const _0x3052ee=_0x3dc329;if(_0x4aefe4[_0x3052ee(0x28c)]===_0x3052ee(0x1af))_0x2d99c3++;}),mixpanel[_0x3dc329(0x251)](_0x3dc329(0x320),{'distinct_id':settings[_0x3dc329(0x1de)],'ip':publicip,'version':serverversion,'numbots':_0x1c2956[_0x3dc329(0x30b)],'numbotsenabled':_0x2d99c3});}function _0x134b(){const _0x41b802=['http','access\x20timeout','temporary\x20token\x20generated','fork','auto','success','Allow\x20login\x20from\x20IP\x20address\x20<b>','telegramUsername','8960432qEkNxa','logs/','message','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20messages','listen','keys','value','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','config/','pidRefreshToken','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','login\x20token\x20generated','getFullYear','split','5930190djWDkh','bcryptjs','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','token','Notifications\x20types:\x20','date-fns','Unauthorized\x20attempt\x20to\x20update\x20settings','any',':\x20Bot\x20Mgr\x20>\x20','yes','child_process','404\x20Not\x20Found','then','show','map','logged\x20out','chat','/help\x20-\x20show\x20available\x20commands\x0a','add','6b67f3d61ee94b8f5c80b4affef4c4d9','event','version.json','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Unauthorized\x20attempt\x20to\x20get\x20logs','bot','padStart','getUTCHours','Failed\x20to\x20download\x20','onText','copyFileSync','from','yargs/yargs','emit','/:bot/configuration','secret','telegram','hasOwnProperty','sort','settings.','All\x20bots','mkdirSync','1836ZCliOm','order','build','reset-password','/on\x20-\x20start\x20bot(s)\x0a','/:bot/coins','Invalid\x20authentication\x20token\x20(2)','-performance.json','live','login','latestversion','backup/','disabled','login\x20not\x20required','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','storeHeadless','track','No\x20authentication\x20token','apiSecret','answerCallbackQuery','2FA\x20required','sign','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','hex','1094040GYaHqo','get-starting-balances','stop','data','username','bb-secure.json','writeFileSync','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','30idFABd','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','whitelistEnabled','Password\x20has\x20been\x20reset\x20to:\x20','logout','reject','timestamp','/update\x20-\x20update\x20Balance\x20Bot\x0a','stopPolling','set','sockets','removeListener','stopped','Unauthorized\x20attempt\x20to\x20delete\x20alerts','/download/:type','/off\x20-\x20stop\x20bot(s)\x0a','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','telegrammsg','(((.+)+)+)+$','\x20>\x20','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Notifications\x20enabled','telegram2FaApproval','temporary\x20access\x20timeout','hybrid-crypto-js','/:bot/support','includes','Markdown','parse','Your\x20installation\x20is\x20already\x20up\x20to\x20date','updatebotmanager','2FA\x20login\x20required','update-bb','lastmsgtelegram','2FA','filter','constructor','server','deleted\x20Bot\x20','disconnect','sendPortfolioTelegram','Token\x20blacklisted','status','get-portfolio','catch','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','log','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','49001328GWsvJj','backup','test','new','lastmsgemitted','socket','botname','/:bot/history','delete-bot','randomFillSync','all','clients','store-settings','reason','Invalid\x20IP\x20address','get-messages','\x20|\x20','452sFTBDq','f2aRequired','invalid\x20credentials','allow','mixpanel','ipc','generate','confirm-message','user','toString','accept','host','Unauthorized\x20attempt\x20to\x20confirm\x20message','getMonth','sendMessage','sortBy','join','bb-config.json','new-disabled','************','Login\x20rejected','restart','createServer','kill','jsonwebtoken','push','Password\x20reset\x20rejected','6821256tcMEOD','password','storeConfiguration','bbPassword','removeAllListeners','use','exp','add-bot','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','bbUsername','botID','restarting\x20Bot\x20','headers','ipaddr.js','init','sendFile','unlinkSync','build2','function','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','-config.json','Notifications\x20disabled','Starting\x20Balance\x20Bot\x20update','apply','encryptedUuid','params','store-headless','file',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','getMinutes','store-configuration','inherit','secure','bots','telegramToken','store','blacklist','logs','forEach','Notifications\x20enabled\x0a','warning','orders','output-003.log','name','5\x20min','find','handshake','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','exit','error\x20while\x20deleting\x20config\x20files:\x20','2FA\x20login\x20token\x20generated','type','toggleBotMode','replace','timeshift','notification','started','Error:\x20Invalid\x20argument\x20','15\x20min','Login\x20accepted','/disable\x20-\x20disable\x20notifications\x0a','isIPv4MappedAddress','readdirSync','uncaughtException','connection','initclient','title','Unauthorized\x20attempt\x20to\x20delete\x20bot','zip/','alias','callback_query','No\x20bots\x20running\x20right\x20now','***','-events.json','assign','Bot\x20','length','privateKey','getStartingBalances','remove','axios','referer','toIPv4Address','telegramIpApproval','hashSync','bbvReceive','Orders','temporary\x20access\x20rejected','getSeconds','path','Invalid\x20authentication\x20token\x20(1)','getDate','telegramEvents','getHours','reload','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','randomBytes','Server','publicKey','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Alerts','cancelLoading','conn','-----------------------------------------------------------------------------------','once','Crypt','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','format','/status\x20-\x20show\x20bot(s)\x20status\x0a','pidExpireLogin','simple','$1_$2_$3','/enable\x20-\x20enable\x20notifications\x0a','User\x20has\x20been\x20validated','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','uuid-random','\x20only\x0a','remoteAddress','compareSync','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','\x20minutes','*$1*','https://api.ipify.org?format=json','0.0.0','apiKey','lowdb/adapters/FileSync','stringify','idling\x20bot\x20\x20\x20|\x20Bot\x20','api-eu.mixpanel.com','kind','mode','entries','enabled','defaults','placeOrder','readFileSync','bbvNew','toIPv4MappedAddress','util','loginRequired','Unauthorized\x20attempt\x20to\x20update\x20bot','\x20mode','bot-','SIGTERM','botmanager','Unauthorized\x20attempt\x20to\x20store\x20configuration','bb/','output-001.log','decrypt','download','verify','full',',\x20must\x20be\x20a\x204\x20digit\x20number','127.0.0.1','21198hhXNHD','search','.zip','clientip','manual','args','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','binary','login\x20required','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','ipv6','/:bot','error','telegramEnabled','/restart\x20-\x20restart\x20bot(s)\x0a','existsSync','output-002.log','expiry','::ffff:127.0.0.1','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','getPortfolio','generateKeyPairAsync','<b>Balance\x20Bot\x20Status:</b>\x0a','cloneDeep','userid','argv','Unauthorized\x20attempt\x20to\x20log\x20out','max','messages','headless','30\x20min','starting\x20bot\x20|\x20Bot\x20','number','showname','\x20to\x20','emitHistory','send','bb-settings.json','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','get','index.html','Bot\x20Mgr\x20>\x20','write','settings','/:bot/portfolio','exec','Invalid\x20username\x20or\x20IP\x20address','telegramChatId','sha256','/names\x20-\x20show\x20bot\x20names\x0a','HTML','lowdb','/:bot/performance','Notifications\x20disabled\x0a','getTime','uuid','running','access','alerts'];_0x134b=function(){return _0x41b802;};return _0x134b();}async function getMessages(){const _0xb0efa4=_0x4dcc65,_0x301e6f=_0xb0efa4(0x336),_0x5129dc=new GraphQLClient(_0x301e6f),_0x2db1ac={'authorization':_0xb0efa4(0x329)},_0x533464=serverversion[_0xb0efa4(0x217)]('.'),_0x4fbc28=_0x533464[0x0]+'.'+_0x533464[0x1],_0x377a3b=Math['min'](settings[_0xb0efa4(0x283)],settings['lastmsgemitted']),_0x1120f0={'last':parseInt(_0x377a3b),'bbm':_0x4fbc28},_0x11713a=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1b3527;try{_0x1b3527=await _0x5129dc['request'](_0x11713a,_0x1120f0,_0x2db1ac);}catch(_0x2f7ee7){}if(_0x1b3527&&_0x1b3527['messages']){let _0x22d940=settings['lastmsgtelegram'];newMessages=[];for(const _0x7bc1ab of _0x1b3527[_0xb0efa4(0x1e2)]){newMessages[_0xb0efa4(0x2bc)](_0x7bc1ab);if(_0x7bc1ab[_0xb0efa4(0x1b3)])updateSetting(_0xb0efa4(0x24b),_0x7bc1ab[_0xb0efa4(0x1b3)]);let _0x36579e=_0x7bc1ab[_0xb0efa4(0x1b3)]?serverversion>=_0x7bc1ab[_0xb0efa4(0x1b3)]:![];if(!_0x36579e&&_0x7bc1ab[_0xb0efa4(0x1e6)]>_0x22d940){if(_0x7bc1ab[_0xb0efa4(0x314)]===_0xb0efa4(0x21f)||serverversion['startsWith'](_0x7bc1ab[_0xb0efa4(0x314)])){let _0x1ee3de=''+_0x7bc1ab[_0xb0efa4(0x301)]+'\x0a\x0a'+_0x7bc1ab[_0xb0efa4(0x20b)];const _0x5f16e8=await sendTelegramMsg(toTelegramMarkdown(_0x1ee3de),_0xb0efa4(0x27d));if(_0x5f16e8)_0x22d940=_0x7bc1ab[_0xb0efa4(0x1e6)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0xb0efa4(0x283),_0x22d940),emitMessages();}}function emitMessages(){const _0x630c3a=_0x4dcc65,_0x43f011=settings['lastmsgemitted'];let _0xd4b420=[];newMessages[_0x630c3a(0x2e4)](_0x19aacd=>{const _0x200cce=_0x630c3a;_0x19aacd[_0x200cce(0x1e6)]>_0x43f011&&_0xd4b420['push'](_0x19aacd);}),_0xd4b420[_0x630c3a(0x30b)]>0x0&&getAllClients()['forEach'](_0x219450=>{const _0x3408b5=_0x630c3a;getSocket(_0x219450['id'])[_0x3408b5(0x238)](_0x3408b5(0x20b),_0xd4b420);});}function confirmMessage(_0x92632f){const _0x52d21a=_0x4dcc65;updateSetting(_0x52d21a(0x296),Number(_0x92632f));}function isNewerVersion(_0x424f05,_0x534d89){const _0x25e91f=_0x4dcc65,_0x526520=_0x534d89['split']('.'),_0x3c2c2c=_0x424f05['split']('.');for(var _0xfe1a48=0x0;_0xfe1a48<_0x3c2c2c[_0x25e91f(0x30b)];_0xfe1a48++){const _0x33a3e8=~~_0x3c2c2c[_0xfe1a48],_0x3a1329=~~_0x526520[_0xfe1a48];if(_0x33a3e8>_0x3a1329)return!![];if(_0x33a3e8<_0x3a1329)return![];}return![];}function toTelegramMarkdown(_0x11e3fc){const _0x189026=_0x4dcc65,_0x4789a9=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x340df3=/\*{2}(.+?)\*{2}/gim;return _0x11e3fc=_0x11e3fc[_0x189026(0x2f4)](_0x4789a9,_0x189026(0x32e))[_0x189026(0x2f4)](_0x340df3,_0x189026(0x1a4)),_0x11e3fc;}async function validateConfigFile(){const _0x35da80=_0x4dcc65,_0x142c47=dbConfig['get'](_0x35da80(0x2df))[_0x35da80(0x2b2)](_0x35da80(0x2c8))[_0x35da80(0x210)]()||[];if(_0x142c47[_0x35da80(0x30b)]==0x0){let _0x2440d7=0x0,_0x274e55=[];const _0x34ca9c=/^bot-([0-9]{3})-config.json$/,_0x2bc6a5=fs['readdirSync'](configpath);_0x2bc6a5[_0x35da80(0x2e4)](_0x371039=>{const _0x19ca65=_0x35da80,_0x286792=_0x34ca9c[_0x19ca65(0x1f3)](_0x371039);if(_0x286792){const _0xc02f6f=_0x286792[0x1];let _0x34e83f=getBotAttributes(_0xc02f6f);_0x274e55[_0x19ca65(0x2bc)]({'botID':_0xc02f6f,'botname':_0x34e83f[_0x19ca65(0x298)],'status':_0x19ca65(0x24d),'live':'stopped'}),_0x2440d7++;}}),_0x2440d7!=0x0&&(dbConfig[_0x35da80(0x1ed)](_0x35da80(0x2df))['assign'](_0x274e55)[_0x35da80(0x1f0)](),config=_0x274e55,restoredConfigFile=_0x2440d7);}}async function restoreConfigNotify(_0x43c6c0){const _0xe3de5f=_0x4dcc65;let _0x1345e0;if(restoredConfigFile==0x1)_0x1345e0=_0xe3de5f(0x31e);else _0x1345e0=_0xe3de5f(0x1cb);if(_0x43c6c0)io['to'](_0xe3de5f(0x1bb))[_0xe3de5f(0x238)](_0xe3de5f(0x2f6),_0x1345e0);else{logger[_0xe3de5f(0x32d)]('-----------------------------------------------------------------------------------'),logger[_0xe3de5f(0x32d)](_0x1345e0),logger[_0xe3de5f(0x32d)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0xe3de5f(0x1f5)]&&settings[_0xe3de5f(0x31b)]!='orders')tgBot[_0xe3de5f(0x2b1)](settings['telegramChatId'],_0xe3de5f(0x1ef)+_0x1345e0)[_0xe3de5f(0x28e)](_0x5eab59=>{telegramError(_0x5eab59);});}}function validateCredentials(_0x3bef55,_0x44d37d){const _0x4f664e=_0x4dcc65;if(_0x3bef55[_0x4f664e(0x25d)]==settings['bbUsername']&&bcrypt[_0x4f664e(0x335)](_0x3bef55[_0x4f664e(0x2bf)],settings['bbPassword'])){if(settings[_0x4f664e(0x2a4)])return{'allow':![],'reason':_0x4f664e(0x281),'token':null};else{const _0x174ca2=generateLoginToken(_0x44d37d);return{'allow':!![],'reason':_0x4f664e(0x215),'token':_0x174ca2};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0xe6c3ad){const _0x3aaeac=_0x4dcc65,_0x2cb164=generateLoginToken(_0xe6c3ad);return{'allow':!![],'reason':_0x3aaeac(0x215),'token':_0x2cb164};}function validateAccess(_0x16a66a,_0x568690,_0x313e4d){const _0x332987=_0x4dcc65,_0x5bbba0=_0x313e4d?_0x313e4d:devices[_0x568690]['ip'];let _0x5a7c54;const _0x297b08=_0x55c221=>{const _0x35374c=_0xc5a8;if(settings[_0x35374c(0x1b6)]){if(settings[_0x35374c(0x2a4)]){if(telegram2FaApproved(_0x568690)){const _0x2a9fbc=generateLoginToken(_0x568690);return{'allow':!![],'reason':_0x35374c(0x2f1),'token':_0x2a9fbc};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5a7c54=validToken(_0x55c221,_0x568690),_0x5a7c54[_0x35374c(0x23c)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x55c221}:{'allow':![],'reason':_0x35374c(0x1cd),'token':null};}else return{'allow':!![],'reason':_0x35374c(0x24e),'token':null};};if(settings[_0x332987(0x263)]){let _0x13b389=[...settings['whitelist'],'::1',_0x332987(0x1d8),_0x332987(0x1c4)];if(_0x13b389[_0x332987(0x27c)](_0x5bbba0))return _0x297b08(_0x16a66a);else{_0x5a7c54=validToken(_0x16a66a,_0x568690);if(_0x5a7c54['hasOwnProperty'](_0x332987(0x206)))return _0x297b08(_0x16a66a);else{if(telegramIpApproved(_0x568690)){const _0x2aaaaf=generateToken(_0x568690);return _0x5a7c54=_0x297b08(_0x16a66a),_0x5a7c54[_0x332987(0x2a6)]?{'allow':!![],'reason':_0x332987(0x203),'token':_0x2aaaaf}:_0x5a7c54;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x332987(0x255),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x297b08(_0x16a66a);}function timelyDecrypt(_0x19392b,_0x43bd76=!![]){const _0xdcb471=_0x4dcc65;if(_0x19392b)try{const _0x276f7a=crypt[_0xdcb471(0x1bf)](secure[_0xdcb471(0x30c)],_0x19392b)[_0xdcb471(0x20b)],_0x3c9580=_0x276f7a[_0xdcb471(0x217)]('@')[0x0],_0x2bd704=_0x276f7a[_0xdcb471(0x217)]('@')[0x1],_0x1d0566=new Date()[_0xdcb471(0x1fc)]();if(_0x43bd76){if(_0x1d0566-_0x2bd704<maxSecretAge*0x3e8)return _0x3c9580;else return![];}else return _0x3c9580;}catch(_0x240ba1){return![];}else return![];}const validToken=(_0x5bd157,_0x334fec)=>{const _0xd787f6=_0x4dcc65,_0x2290f8=devices[_0x334fec]['ip'];if(!_0x5bd157)return{'error':_0xd787f6(0x252)};for(let _0x5805ce of blacklist){if(_0x5805ce[_0xd787f6(0x21b)]==_0x5bd157)return{'error':_0xd787f6(0x28b)};}let _0x437b21;try{_0x437b21=jwt[_0xd787f6(0x1c1)](_0x5bd157,secure['secret']+_0x334fec);}catch{return{'error':_0xd787f6(0x319)};}if(!_0x437b21[_0xd787f6(0x23c)](_0xd787f6(0x1c8))&&!_0x437b21[_0xd787f6(0x23c)](_0xd787f6(0x25d))||!_0x437b21['hasOwnProperty'](_0xd787f6(0x2c4)))return{'error':_0xd787f6(0x247)};if(!_0x437b21['hasOwnProperty']('username')&&_0x437b21['hasOwnProperty'](_0xd787f6(0x1c8))){const {clientip:_0x471c18}=_0x437b21;return _0x2290f8==_0x471c18?{'success':_0xd787f6(0x330)}:{'error':_0xd787f6(0x2a0)};}else{if(_0x437b21['hasOwnProperty'](_0xd787f6(0x25d))&&_0x437b21[_0xd787f6(0x23c)](_0xd787f6(0x1c8))){const {username:_0x3c0ee3,clientip:_0x487778}=_0x437b21;return settings[_0xd787f6(0x2c7)]==_0x3c0ee3&&_0x2290f8==_0x487778?{'success':_0xd787f6(0x330)}:{'error':_0xd787f6(0x1f4)};}}},generateLoginToken=_0xf9436b=>{const _0x4d6314=_0x4dcc65;if(_0xf9436b){const _0x5c958b=devices[_0xf9436b]['ip'];return jwt[_0x4d6314(0x256)]({'username':settings[_0x4d6314(0x2c7)],'clientip':_0x5c958b},secure[_0x4d6314(0x23a)]+_0xf9436b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x19f575=>{const _0x59c868=_0x4dcc65;if(_0x19f575){const _0x2b2165=devices[_0x19f575]['ip'];return jwt['sign']({'clientip':_0x2b2165},secure[_0x59c868(0x23a)]+_0x19f575,{'expiresIn':devices[_0x19f575]['telegramIpApproval'][_0x59c868(0x1d7)]*0x3c});}else return![];},telegramIpApproved=_0x3b9a45=>{const _0x52bd13=_0x4dcc65;let _0x21493b=![];return devices[_0x3b9a45]['telegramIpApproval']&&devices[_0x3b9a45][_0x52bd13(0x312)][_0x52bd13(0x1d7)]!='reject'&&(_0x21493b=devices[_0x3b9a45][_0x52bd13(0x312)]['clientip']==devices[_0x3b9a45]['ip']&&new Date()['getTime']()-devices[_0x3b9a45][_0x52bd13(0x312)][_0x52bd13(0x267)]<devices[_0x3b9a45][_0x52bd13(0x312)]['expiry']*0x3c*0x3e8),_0x21493b;},telegram2FaApproved=_0x1f53e9=>{const _0x3d42cf=_0x4dcc65;let _0x55543a=![];return devices[_0x1f53e9][_0x3d42cf(0x278)]&&devices[_0x1f53e9][_0x3d42cf(0x278)][_0x3d42cf(0x1d7)]!=_0x3d42cf(0x266)&&(_0x55543a=devices[_0x1f53e9][_0x3d42cf(0x278)][_0x3d42cf(0x1c8)]==devices[_0x1f53e9]['ip']&&new Date()[_0x3d42cf(0x1fc)]()-devices[_0x1f53e9][_0x3d42cf(0x278)][_0x3d42cf(0x267)]<devices[_0x1f53e9]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x55543a;},normalizeIP=_0x1b1add=>{const _0x2b20b0=_0x4dcc65;let _0xf494ee=null,_0x3656c4=null;if(ipaddr['isValid'](_0x1b1add)){const _0x2c154f=ipaddr[_0x2b20b0(0x27e)](_0x1b1add);_0x2c154f[_0x2b20b0(0x1ac)]()===_0x2b20b0(0x1d0)?(_0x2c154f[_0x2b20b0(0x2fc)]()&&(_0xf494ee=_0x2c154f[_0x2b20b0(0x311)]()[_0x2b20b0(0x2ac)]()),_0x3656c4=_0x2c154f[_0x2b20b0(0x2ac)]()):(_0xf494ee=_0x2c154f['toString'](),_0x3656c4=_0x2c154f[_0x2b20b0(0x1b4)]()['toString']());}return{'show':_0xf494ee?_0xf494ee:_0x3656c4,'store':_0x3656c4};};function sleep(_0x59485d){return new Promise(_0x23cff2=>setTimeout(_0x23cff2,_0x59485d));}