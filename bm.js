const _0x2d602e=_0x40ff;(function(_0x37370b,_0x36a892){const _0x84e4=_0x40ff,_0x55e763=_0x37370b();while(!![]){try{const _0x357124=-parseInt(_0x84e4(0x24d))/0x1+-parseInt(_0x84e4(0x2b8))/0x2*(-parseInt(_0x84e4(0x165))/0x3)+-parseInt(_0x84e4(0x10d))/0x4+-parseInt(_0x84e4(0x12f))/0x5+parseInt(_0x84e4(0x2af))/0x6*(-parseInt(_0x84e4(0x189))/0x7)+-parseInt(_0x84e4(0x2bd))/0x8+parseInt(_0x84e4(0x1f3))/0x9;if(_0x357124===_0x36a892)break;else _0x55e763['push'](_0x55e763['shift']());}catch(_0x4bb499){_0x55e763['push'](_0x55e763['shift']());}}}(_0x220d,0x4b9b7));const _0x533edd=function(){let _0x2d1871=!![];return function(_0x2f4475,_0x49aa7e){const _0x343b0c=_0x2d1871?function(){if(_0x49aa7e){const _0x27d629=_0x49aa7e['apply'](_0x2f4475,arguments);return _0x49aa7e=null,_0x27d629;}}:function(){};return _0x2d1871=![],_0x343b0c;};}(),_0x3a223e=_0x533edd(this,function(){const _0x5c5528=_0x40ff;return _0x3a223e[_0x5c5528(0x1ed)]()[_0x5c5528(0x1f1)](_0x5c5528(0x2cc))['toString']()[_0x5c5528(0x2b4)](_0x3a223e)[_0x5c5528(0x1f1)](_0x5c5528(0x2cc));});_0x3a223e();'use strict';process['env'][_0x2d602e(0x1c4)]=0x1;const childProcess=require(_0x2d602e(0x295)),fs=require('fs'),fns=require(_0x2d602e(0x294)),low=require('lowdb'),FileSync=require(_0x2d602e(0x147)),path=require(_0x2d602e(0x213)),crypto=require(_0x2d602e(0x243)),Crypt=require(_0x2d602e(0x106))[_0x2d602e(0x259)],RSA=require(_0x2d602e(0x106))['RSA'],bcrypt=require(_0x2d602e(0x253)),jwt=require(_0x2d602e(0x2e0)),ipaddr=require(_0x2d602e(0x1d8)),argv=require(_0x2d602e(0x14b))(process[_0x2d602e(0x140)][_0x2d602e(0x1fc)](0x2))[_0x2d602e(0x140)],uuidRandom=require('uuid-random'),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x2d602e(0x18d)),axios=require('axios'),{GraphQLClient,gql}=require(_0x2d602e(0x142)),util=require(_0x2d602e(0x17e)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv['port']||_0x2d602e(0x112),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x2d602e(0x216)](_0x2d602e(0x22a)+PORT+_0x2d602e(0xff)),process['exit'](0x1));const HOST=argv[_0x2d602e(0x113)]||null,userID=argv[_0x2d602e(0x245)]||'',debugging=argv['d']||![],nodeversion=process[_0x2d602e(0x1ad)][_0x2d602e(0x200)];let bbpath=_0x2d602e(0x162),bbpath2='';const botfile=_0x2d602e(0x1d0),configfile=_0x2d602e(0x1de),settingsfile='bb-settings.json',securefile=_0x2d602e(0x108),environment=require('./'+bbpath2+'version.json')[_0x2d602e(0x11f)]||_0x2d602e(0x27d),maxBackups=0xa;let validInstallation=!![];!fs[_0x2d602e(0x182)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x2d602e(0x280)+userID+'/':bbpath+_0x2d602e(0x280),configbackuppath=configpath+_0x2d602e(0x234),logspath=userID?bbpath+_0x2d602e(0x2d6)+userID+'/':bbpath+_0x2d602e(0x2d6),zippath=userID?bbpath+_0x2d602e(0x1a1)+userID+'/':bbpath+_0x2d602e(0x1a1),loggerfile=fs[_0x2d602e(0x18f)](logspath+_0x2d602e(0x17b),{'flags':'a'}),temppath=userID?bbpath+_0x2d602e(0x269)+userID+'/':bbpath+'temp/';!fs[_0x2d602e(0x182)](configpath)&&fs[_0x2d602e(0x116)](configpath);!fs[_0x2d602e(0x182)](configbackuppath)&&fs[_0x2d602e(0x116)](configbackuppath);!fs[_0x2d602e(0x182)](logspath)&&fs[_0x2d602e(0x116)](logspath);!fs[_0x2d602e(0x182)](zippath)&&fs[_0x2d602e(0x116)](zippath);!fs[_0x2d602e(0x182)](temppath)&&fs[_0x2d602e(0x116)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2d602e(0x266)]({'bots':[]})[_0x2d602e(0x13b)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2d602e(0x266)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2d602e(0x2cb),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2d602e(0x266)]({'secure':{},'blacklist':[]})[_0x2d602e(0x13b)]();let crypt=new Crypt({'md':_0x2d602e(0x1df),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x2d602e(0x1c7)](_0x2d602e(0x1f8),{'host':_0x2d602e(0x2d9)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2d602e(0x15e)]&&settings['telegramToken']!=''&&settings[_0x2d602e(0x1e2)]&&settings[_0x2d602e(0x1e2)]!='')initTelegram();const parseColor=(_0x28b4c5,_0x27fa1a)=>{const _0x51efa8=_0x2d602e,_0x452de9=/#[A-Z]{3}#/g;if(typeof _0x28b4c5==_0x51efa8(0x1c2)){!_0x27fa1a?_0x28b4c5=_0x28b4c5['replace'](_0x452de9,''):(_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#BLU#/g,'\x1b[34m'),_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#RED#/g,_0x51efa8(0x1e0)),_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#YEL#/g,_0x51efa8(0x11a)),_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#MAG#/g,'\x1b[35m'),_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#CYA#/g,_0x51efa8(0x1a0)),_0x28b4c5=_0x28b4c5[_0x51efa8(0x222)](/#RES#/g,'\x1b[0m'));;}return _0x28b4c5;},logger={'screen':_0xba92e4=>{const _0x2e53d9=_0x2d602e;console[_0x2e53d9(0x216)](parseColor(_0xba92e4,!![]));},'simple':_0x26039e=>{const _0x39b8d8=_0x2d602e;console[_0x39b8d8(0x216)](parseColor(_0x26039e,!![])),loggerfile[_0x39b8d8(0x13b)](util[_0x39b8d8(0x1d6)](parseColor(_0x26039e,![]))+'\x0a');},'full':async _0x6ca7cf=>{const _0x45a3dd=_0x2d602e,_0xc62fd1=getTimeStamp()+_0x45a3dd(0x271)+_0x6ca7cf;console[_0x45a3dd(0x216)](parseColor(_0xc62fd1,!![])),loggerfile[_0x45a3dd(0x13b)](util[_0x45a3dd(0x1d6)](parseColor(_0xc62fd1,![]))+'\x0a');if(tgBot&&settings[_0x45a3dd(0x154)]&&settings[_0x45a3dd(0x1ae)]!=_0x45a3dd(0x238))await tgBot['sendMessage'](settings[_0x45a3dd(0x154)],_0x45a3dd(0x2a4)+parseColor(_0x6ca7cf,![]))[_0x45a3dd(0x25f)](_0x1b2e08=>{telegramError(_0x1b2e08);});},'debug':async(_0x5759c9,_0x284dc0='')=>{const _0x31ffa0=_0x2d602e,_0x399188=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x5759c9;if(debugging)console['log'](parseColor(_0x399188,!![]));loggerfile[_0x31ffa0(0x13b)](util[_0x31ffa0(0x1d6)](parseColor(_0x399188,![]))+'\x0a');if(_0x284dc0){if(debugging)console[_0x31ffa0(0x216)](_0x284dc0);loggerfile[_0x31ffa0(0x13b)](util[_0x31ffa0(0x1d6)](_0x284dc0)+'\x0a');}}};process['on'](_0x2d602e(0x1bd),function(_0x24980e){logger['simple'](_0x24980e);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x2d602e(0x279)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2d602e(0x184)),app=express(),http=require(_0x2d602e(0x1f9))[_0x2d602e(0x145)](app);app[_0x2d602e(0x1a6)](fileUpload({'useTempFiles':!![]})),app[_0x2d602e(0x235)](_0x2d602e(0x256),async(_0x8d437a,_0x7e9691)=>{const _0x1b5061=_0x2d602e,_0x4ca94c=_0x8d437a[_0x1b5061(0x14e)][_0x1b5061(0x27a)],_0x2635d6=getClientsWithBotID(_0x1b5061(0x232)),_0x263329=_0x8d437a[_0x1b5061(0x1d7)][_0x1b5061(0x157)],_0x53be88=timelyDecrypt(_0x263329,![]),_0x1e9b9c=_0x2635d6[_0x1b5061(0x26e)](_0x4f3d17=>_0x4f3d17[_0x1b5061(0x157)]==_0x53be88);if(_0x1e9b9c){const _0x58ab46=normalizeIP(_0x8d437a['socket']['remoteAddress'])[_0x1b5061(0x191)],_0x43b7ac=_0x8d437a[_0x1b5061(0x1d7)][_0x1b5061(0x170)];if(validateAccess(_0x43b7ac,_0x53be88,_0x58ab46)[_0x1b5061(0x261)])_0x4ca94c==_0x1b5061(0x139)&&await backupConfigFiles(),await zipFiles(_0x4ca94c),_0x7e9691[_0x1b5061(0x291)](zippath+(_0x4ca94c+_0x1b5061(0x1fd)),_0x61493a=>{const _0x3a5754=_0x1b5061;_0x61493a&&(logger[_0x3a5754(0x12e)]('Failed\x20to\x20download\x20'+_0x4ca94c),logger[_0x3a5754(0x225)](_0x61493a));});else logger[_0x1b5061(0x12e)](_0x1b5061(0x185)+_0x4ca94c+'\x20(1)');}else logger[_0x1b5061(0x12e)](_0x1b5061(0x185)+_0x4ca94c+'\x20(2)');}),app[_0x2d602e(0x2a8)](_0x2d602e(0x26f),async(_0x39517e,_0x4264f6)=>{const _0x225cae=_0x2d602e,_0x3b4617=getClientsWithBotID('botmanager'),_0x5da64b=_0x39517e[_0x225cae(0x1d7)][_0x225cae(0x157)],_0x17a63c=timelyDecrypt(_0x5da64b,![]),_0x5e1e64=_0x3b4617[_0x225cae(0x26e)](_0x317305=>_0x317305[_0x225cae(0x157)]==_0x17a63c);logger[_0x225cae(0x21d)](_0x225cae(0x2dc));if(_0x5e1e64){const _0x3147d7=normalizeIP(_0x39517e[_0x225cae(0x1f5)][_0x225cae(0x148)])[_0x225cae(0x191)],_0x309672=_0x39517e['headers']['tkn'];if(validateAccess(_0x309672,_0x17a63c,_0x3147d7)[_0x225cae(0x261)]){if(_0x39517e['files']){const _0x49a0a0=_0x39517e[_0x225cae(0x1e3)]['backupfile'];await _0x49a0a0['mv'](temppath+_0x49a0a0[_0x225cae(0x13a)]),_0x4264f6[_0x225cae(0x228)]({'status':!![],'message':_0x225cae(0x17c)});const _0xe80cb9=getBotsWithMode();_0xe80cb9[_0x225cae(0x16f)]>0x0?confirmRestore(temppath,_0x49a0a0[_0x225cae(0x13a)]):unzipFile(temppath,_0x49a0a0[_0x225cae(0x13a)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x225cae(0x12e)](_0x225cae(0x17f));}),app['use'](express['static'](path[_0x2d602e(0x1c1)](__dirname,bbpath2,_0x2d602e(0x15c)))),app[_0x2d602e(0x1a6)](express['static'](path[_0x2d602e(0x1c1)](__dirname,bbpath2,_0x2d602e(0x124)))),app['get']('/',function(_0x4f7064,_0x487b92){const _0x524b23=_0x2d602e;_0x487b92[_0x524b23(0x1ce)](path[_0x524b23(0x1c1)](__dirname,bbpath2,_0x524b23(0x15c),_0x524b23(0x119)));}),app['get'](_0x2d602e(0x2b3),function(_0x41ae2c,_0x50bd6f){const _0x34e725=_0x2d602e;_0x50bd6f[_0x34e725(0x1ce)](path[_0x34e725(0x1c1)](__dirname,bbpath2,_0x34e725(0x124),'index.html'));}),app[_0x2d602e(0x235)](_0x2d602e(0x29a),(_0x57bda3,_0x5e9c33)=>{const _0x22f9ef=_0x2d602e;_0x5e9c33[_0x22f9ef(0x1ce)](path[_0x22f9ef(0x1c1)](__dirname,bbpath2,_0x22f9ef(0x124),_0x22f9ef(0x119)));}),app['get'](_0x2d602e(0x1b4),(_0x2bbd9e,_0x414ca9)=>{const _0x103261=_0x2d602e;_0x414ca9['sendFile'](path[_0x103261(0x1c1)](__dirname,bbpath2,_0x103261(0x124),_0x103261(0x119)));}),app[_0x2d602e(0x235)](_0x2d602e(0x132),(_0x2fcb0f,_0x758830)=>{const _0x1a657f=_0x2d602e;_0x758830[_0x1a657f(0x1ce)](path[_0x1a657f(0x1c1)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x2d602e(0x22c),(_0x4375f0,_0x5b1d24)=>{const _0x3baea6=_0x2d602e;_0x5b1d24[_0x3baea6(0x1ce)](path['join'](__dirname,bbpath2,_0x3baea6(0x124),_0x3baea6(0x119)));}),app[_0x2d602e(0x235)](_0x2d602e(0x248),(_0x2f0fa5,_0x25e324)=>{const _0x4a0c4c=_0x2d602e;_0x25e324[_0x4a0c4c(0x1ce)](path[_0x4a0c4c(0x1c1)](__dirname,bbpath2,_0x4a0c4c(0x124),'index.html'));}),app['get'](_0x2d602e(0x2ba),(_0xb49e66,_0x4282f3)=>{const _0x30afcc=_0x2d602e;_0x4282f3[_0x30afcc(0x1ce)](path[_0x30afcc(0x1c1)](__dirname,bbpath2,_0x30afcc(0x124),_0x30afcc(0x119)));});if(HOST)http[_0x2d602e(0x1ec)](PORT,HOST);else http['listen'](PORT);const io=require(_0x2d602e(0x278))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x428612=_0x2d602e;let _0x51495d=_0x428612(0x29f);const _0x1a62f9=networkInterfaces(),_0x5c6fa7={};for(const _0x3abcd1 of Object[_0x428612(0x14a)](_0x1a62f9)){for(const _0x417c69 of _0x1a62f9[_0x3abcd1]){if((_0x417c69['family']==_0x428612(0x26c)||_0x417c69[_0x428612(0x221)]==0x4)&&!_0x417c69[_0x428612(0x1cd)]){const _0x35e1e9=ipaddr[_0x428612(0x2bb)](_0x417c69[_0x428612(0x2d1)])[_0x428612(0x1f4)]();_0x35e1e9!=_0x428612(0x101)&&(!_0x5c6fa7[_0x3abcd1]&&(_0x5c6fa7[_0x3abcd1]=[]),_0x5c6fa7[_0x3abcd1][_0x428612(0x29e)](_0x417c69['address']),_0x51495d=_0x417c69[_0x428612(0x2d1)]);}}}return{'serverip':_0x51495d,'netinterfaces':_0x5c6fa7};}async function startServer(){const _0x3a4368=_0x2d602e,{serverip:_0xdf094a,netinterfaces:_0x4902ed}=getServerIP();logger[_0x3a4368(0x225)](''),logger[_0x3a4368(0x225)]('-----------------------------------------------------------------------------------'),await logger[_0x3a4368(0x12e)](_0x3a4368(0x14f)+serverversion+_0x3a4368(0x2bc)+(environment=='staging'?_0x3a4368(0x109):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x3a4368(0x12c))+(_0x3a4368(0x168)+_0xdf094a+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger['simple'](_0x3a4368(0x254));if(config[_0x3a4368(0x16f)]!=0x0)for(const _0xcebd6a of config){if(_0xcebd6a[_0x3a4368(0x1cb)]=='enabled'||_0xcebd6a[_0x3a4368(0x1cb)]==_0x3a4368(0x13c))await logger[_0x3a4368(0x12e)](_0x3a4368(0x1e9)+_0xcebd6a[_0x3a4368(0x25c)]+_0x3a4368(0x27c)+_0xcebd6a[_0x3a4368(0x27e)]),startBot([_0xcebd6a[_0x3a4368(0x25c)],userID],{'cwd':bbpath},function(_0x2310ab){const _0x170c86=_0x3a4368;if(_0x2310ab)logger[_0x170c86(0x12e)](_0x2310ab);});else(_0xcebd6a[_0x3a4368(0x1cb)]==_0x3a4368(0x21e)||_0xcebd6a[_0x3a4368(0x1cb)]==_0x3a4368(0x181))&&await logger[_0x3a4368(0x12e)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0xcebd6a[_0x3a4368(0x25c)]+_0x3a4368(0x27c)+_0xcebd6a[_0x3a4368(0x27e)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x3a4368(0x225)](_0x3a4368(0x254)),logger[_0x3a4368(0x225)](''),await logger[_0x3a4368(0x21d)]('Node.js\x20v'+nodeversion),await logger['debug'](_0x3a4368(0x265),_0x4902ed);}function startSocket(){const _0x5f177e=_0x2d602e;io['on'](_0x5f177e(0x2dd),_0x3af7ad=>{const _0x1e19a3=_0x5f177e;let _0x379b55,_0x578a17,_0x58bc72,_0x4339d9,_0x2876ce;const _0x2039de=_0x3af7ad[_0x1e19a3(0x258)][_0x1e19a3(0x1d7)]['referer'];_0x578a17=_0x2039de[_0x1e19a3(0x19e)](/bot[0-9]{3}/);if(_0x578a17)_0x58bc72=_0x578a17[0x0][_0x1e19a3(0x19e)](/[0-9]{3}/);if(_0x58bc72)_0x379b55=_0x58bc72[0x0];else _0x379b55='botmanager';const _0x2d3927=_0x3af7ad[_0x1e19a3(0x258)][_0x1e19a3(0x270)][_0x1e19a3(0x220)];if(!_0x2d3927)_0x3af7ad[_0x1e19a3(0x2d4)](_0x1e19a3(0x1cb),{'publicKey':secure[_0x1e19a3(0x1e7)]});else{_0x4339d9=timelyDecrypt(_0x2d3927,![]);if(!_0x4339d9)_0x3af7ad[_0x1e19a3(0x2d4)](_0x1e19a3(0x1cb),{'publicKey':secure[_0x1e19a3(0x1e7)]});else{_0x2876ce=normalizeIP(_0x3af7ad[_0x1e19a3(0x125)][_0x1e19a3(0x148)])['store'];if(!devices[_0x4339d9])devices[_0x4339d9]={'uuid':_0x4339d9,'access':{'token':null}};devices[_0x4339d9]['ip']=_0x2876ce;const _0x5eeeee=addClient(_0x3af7ad['id'],_0x4339d9,_0x379b55);setAccess(_0x5eeeee),emitMessages(),_0x3af7ad['on'](_0x1e19a3(0x241),_0x5bf219=>{const _0x3b2b50=_0x1e19a3,_0x502b13=timelyDecrypt(_0x5bf219[_0x3b2b50(0x240)]);if(_0x502b13){_0x5bf219={'username':_0x5bf219[_0x3b2b50(0x2a0)],'password':_0x502b13},devices[_0x4339d9][_0x3b2b50(0x209)]=validateCredentials(_0x5bf219,_0x4339d9);if(devices[_0x4339d9][_0x3b2b50(0x209)]['allow']==![]&&devices[_0x4339d9][_0x3b2b50(0x209)][_0x3b2b50(0x1aa)]==_0x3b2b50(0x121))_0x3af7ad[_0x3b2b50(0x2d4)](_0x3b2b50(0x1cb),{'access':devices[_0x4339d9]['access']}),loginAccess2FA(_0x4339d9,_0x2876ce);else{if(devices[_0x4339d9][_0x3b2b50(0x209)]['allow']==![]&&devices[_0x4339d9][_0x3b2b50(0x209)][_0x3b2b50(0x1aa)]==_0x3b2b50(0x187))_0x3af7ad['emit'](_0x3b2b50(0x1cb),{'access':devices[_0x4339d9][_0x3b2b50(0x209)]});else devices[_0x4339d9][_0x3b2b50(0x209)]['allow']&&devices[_0x4339d9]['access'][_0x3b2b50(0x1aa)]==_0x3b2b50(0x1cf)&&(getClientsWithUuid(_0x4339d9)[_0x3b2b50(0x210)](_0x164e75=>{setAccess(_0x164e75);}),logger[_0x3b2b50(0x21d)](_0x3b2b50(0x10e)+_0x4339d9[_0x3b2b50(0x1fc)](-0x8)),setTokenRefresh(_0x4339d9),setSessionTimeout(_0x3b2b50(0x241),_0x4339d9));}}else logger[_0x3b2b50(0x12e)](_0x3b2b50(0x17a));}),_0x3af7ad['on'](_0x1e19a3(0x2c1),()=>{resetPassword();}),_0x3af7ad['on'](_0x1e19a3(0x120),_0x5ce839=>{removeClient(_0x3af7ad['id']);}),_0x379b55==_0x1e19a3(0x232)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1ecb11){const _0x43bc3d=_0x2d602e;if(_0x1ecb11!=_0x43bc3d(0x232)&&config[_0x43bc3d(0x10f)]!=''){if(pid[_0x1ecb11])pid[_0x1ecb11][_0x43bc3d(0x228)]({'function':_0x43bc3d(0x230),'args':null});}_0x1ecb11!=_0x43bc3d(0x232)&&broadcastToBots('bots',JSON['stringify'](config));}function reloadBotManager(){const _0x486396=_0x2d602e;getClientsWithBotID(_0x486396(0x232))[_0x486396(0x210)](_0x3116ab=>{const _0x32d665=_0x486396;getSocket(_0x3116ab['id'])[_0x32d665(0x2d4)]('status',{'access':{'allow':![],'reason':_0x32d665(0x1b7),'token':null}});});}function getSocket(_0xf75498){return io['sockets']['sockets']['get'](_0xf75498);}function setAccess(_0x1aea9c){const _0x42e8ce=_0x2d602e,_0x3a0aba=getSocket(_0x1aea9c['id']),_0x24de0e=_0x1aea9c[_0x42e8ce(0x157)],_0x28e133=_0x1aea9c['bot'];devices[_0x24de0e]['access']=validateAccess(devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x126)],_0x24de0e),logger[_0x42e8ce(0x21d)]('Setting\x20access:\x20'+devices[_0x24de0e]['access'][_0x42e8ce(0x1aa)]+_0x42e8ce(0x178)+_0x1aea9c['id'][_0x42e8ce(0x1fc)](-0x8)+_0x42e8ce(0x292)+_0x24de0e[_0x42e8ce(0x1fc)](-0x8)),_0x3a0aba['join'](_0x24de0e);if(devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x261)]){_0x3a0aba[_0x42e8ce(0x1c1)](_0x28e133);if(_0x28e133==_0x42e8ce(0x232))initializeSocketBotManager(_0x3a0aba);else initializeSocketBot(_0x3a0aba);initClient(_0x28e133);}devices[_0x24de0e][_0x42e8ce(0x209)]['token']&&devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x1aa)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x24de0e),devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x126)]&&devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x1aa)]==_0x42e8ce(0xfa)&&setSessionTimeout('login',_0x24de0e),_0x3a0aba[_0x42e8ce(0x2d4)](_0x42e8ce(0x1cb),{'status':_0x1aea9c[_0x42e8ce(0x2b9)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x24de0e][_0x42e8ce(0x209)],'externalip':devices[_0x24de0e]['ip'],'publicKey':secure[_0x42e8ce(0x1e7)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x24de0e][_0x42e8ce(0x209)][_0x42e8ce(0x261)]==![]&&devices[_0x24de0e]['access']['reason']==_0x42e8ce(0x13d)&&temporaryAccess2FA(_0x24de0e,devices[_0x24de0e]['ip']);}function setSessionTimeout(_0x48fc08,_0x3bb26a){const _0x35120a=_0x2d602e;let _0x3f9257;if(_0x48fc08==_0x35120a(0x241))_0x3f9257=loginExpiry*0x3c*0x3e8;else _0x3f9257=devices[_0x3bb26a][_0x35120a(0x136)][_0x35120a(0x2c6)]*0x3c*0x3e8-(new Date()[_0x35120a(0x24c)]()-devices[_0x3bb26a][_0x35120a(0x136)][_0x35120a(0x186)]);if(devices[_0x3bb26a][_0x35120a(0x18b)])clearTimeout(devices[_0x3bb26a][_0x35120a(0x18b)]);devices[_0x3bb26a]['pidExpireLogin']=setTimeout(()=>{const _0x944e5a=_0x35120a;if(devices[_0x3bb26a][_0x944e5a(0x12b)])clearTimeout(devices[_0x3bb26a][_0x944e5a(0x12b)]);removeSocketListeners(_0x3bb26a),addBlacklist(_0x3bb26a),devices[_0x3bb26a][_0x944e5a(0x136)]=null,devices[_0x3bb26a][_0x944e5a(0x2ce)]=null,devices[_0x3bb26a]['access'][_0x944e5a(0x126)]=null,logger[_0x944e5a(0x21d)]('Session\x20expired\x20for\x20user\x20...'+_0x3bb26a[_0x944e5a(0x1fc)](-0x8)),devices[_0x3bb26a]['access']=validateAccess(devices[_0x3bb26a][_0x944e5a(0x209)][_0x944e5a(0x126)],_0x3bb26a),!(devices[_0x3bb26a][_0x944e5a(0x209)]['allow']&&devices[_0x3bb26a]['access'][_0x944e5a(0x1aa)]=='login\x20not\x20required')&&(_0x48fc08=='login'?io['to'](_0x3bb26a)[_0x944e5a(0x2d4)](_0x944e5a(0x1cb),{'access':{'allow':![],'reason':_0x944e5a(0x2c0),'token':null}}):io['to'](_0x3bb26a)['emit'](_0x944e5a(0x1cb),{'access':{'allow':![],'reason':_0x944e5a(0x25e),'token':null}})),devices[_0x3bb26a][_0x944e5a(0x209)][_0x944e5a(0x126)]=null;},_0x3f9257);}function setTokenRefresh(_0x265f85){const _0x5ab6d8=_0x2d602e;if(devices[_0x265f85][_0x5ab6d8(0x12b)])clearTimeout(devices[_0x265f85]['pidRefreshToken']);devices[_0x265f85][_0x5ab6d8(0x12b)]=setTimeout(()=>{const _0x4e8c20=_0x5ab6d8;getClientsWithUuid(_0x265f85)['length']!=0x0?(devices[_0x265f85][_0x4e8c20(0x209)]=refreshToken(_0x265f85),io['to'](_0x265f85)[_0x4e8c20(0x2d4)]('status',{'status':_0x4e8c20(0x1da),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x265f85]['access'],'externalip':devices[_0x265f85]['ip'],'publicKey':secure[_0x4e8c20(0x1e7)],'validInstallation':validInstallation}),setTokenRefresh(_0x265f85)):clearTimeout(devices[_0x265f85][_0x4e8c20(0x12b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x210232){const _0x53d477=_0x2d602e,_0x31b7d9=getClient(_0x210232['id'])[_0x53d477(0x157)];_0x210232[_0x53d477(0x2d4)](_0x53d477(0x1a2),config),_0x210232['emit'](_0x53d477(0x102),cleanSettings()),_0x210232['on']('add-bot',_0x42dbe5=>{const _0xd1305f=_0x53d477;if(validateAccess(_0x42dbe5,_0x31b7d9)[_0xd1305f(0x261)])addBot();else logger[_0xd1305f(0x12e)](_0xd1305f(0x24e));}),_0x210232['on'](_0x53d477(0x2a6),(_0x439f5c,_0x199195)=>{const _0x23e04b=_0x53d477;if(validateAccess(_0x199195,_0x31b7d9)[_0x23e04b(0x261)])toggleBot(_0x439f5c[_0x23e04b(0x25c)],_0x439f5c['status'],_0x439f5c[_0x23e04b(0x1d2)]);else logger[_0x23e04b(0x12e)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x210232['on'](_0x53d477(0x214),(_0x5bcd48,_0x424ed2)=>{const _0x2f1476=_0x53d477;if(validateAccess(_0x424ed2,_0x31b7d9)[_0x2f1476(0x261)])toggleBotMode(_0x5bcd48);else logger['full'](_0x2f1476(0x201));}),_0x210232['on'](_0x53d477(0x1ea),(_0x2154cd,_0x12cc96)=>{const _0x64da0f=_0x53d477;if(validateAccess(_0x12cc96,_0x31b7d9)[_0x64da0f(0x261)])deleteBot(_0x2154cd);else logger['full'](_0x64da0f(0x15a));}),_0x210232['on'](_0x53d477(0x1ca),(_0x546f2b,_0xf11e82)=>{const _0x117f22=_0x53d477;if(validateAccess(_0xf11e82,_0x31b7d9)[_0x117f22(0x261)])storeSettings(_0x546f2b,!![]);else logger[_0x117f22(0x12e)](_0x117f22(0x1d5));}),_0x210232['on'](_0x53d477(0x10a),_0x52ac7a=>{const _0x621164=_0x53d477;if(validateAccess(_0x52ac7a,_0x31b7d9)[_0x621164(0x261)])updateBB(_0x621164(0x28a));else logger['full'](_0x621164(0x27f));}),_0x210232['on']('reinstall-bb',_0x3dea34=>{const _0x19e99e=_0x53d477;if(validateAccess(_0x3dea34,_0x31b7d9)[_0x19e99e(0x261)])updateBB(_0x19e99e(0x141));else logger[_0x19e99e(0x12e)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x210232['on']('get-backup-files',_0x38a9ef=>{const _0x47782c=_0x53d477;if(validateAccess(_0x38a9ef,_0x31b7d9)[_0x47782c(0x261)]){const _0x31eda5=getClient(_0x210232['id']);if(_0x31eda5)getBackupFiles(_0x31eda5[_0x47782c(0x157)]);else logger[_0x47782c(0x12e)](_0x47782c(0x23d));}else logger['full'](_0x47782c(0x2de));}),_0x210232['on'](_0x53d477(0x179),(_0x3924ff,_0x4782ee)=>{const _0x106611=_0x53d477;if(validateAccess(_0x4782ee,_0x31b7d9)['allow'])restoreBackupFile(_0x3924ff);else logger[_0x106611(0x12e)](_0x106611(0x1f2));}),_0x210232['on']('get-messages',_0x1e0d3e=>{const _0x79e51b=_0x53d477;if(validateAccess(_0x1e0d3e,_0x31b7d9)['allow'])getMessages();else logger['full'](_0x79e51b(0x197));}),_0x210232['on'](_0x53d477(0x24b),(_0x1c80c5,_0x19b3e6)=>{const _0x3a95bf=_0x53d477;if(validateAccess(_0x19b3e6,_0x31b7d9)[_0x3a95bf(0x261)])confirmMessage(_0x1c80c5);else logger[_0x3a95bf(0x12e)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x210232['on'](_0x53d477(0x283),_0x53a3e0=>{const _0x3f6ffb=_0x53d477;if(validateAccess(_0x53a3e0,_0x31b7d9)[_0x3f6ffb(0x261)]){if(devices[_0x31b7d9][_0x3f6ffb(0x12b)])clearTimeout(devices[_0x31b7d9]['pidRefreshToken']);if(devices[_0x31b7d9][_0x3f6ffb(0x18b)])clearTimeout(devices[_0x31b7d9][_0x3f6ffb(0x18b)]);removeSocketListeners(getClient(_0x210232['id'])[_0x3f6ffb(0x157)]),addBlacklist(_0x31b7d9),devices[_0x31b7d9]['telegramIpApproval']=null,devices[_0x31b7d9][_0x3f6ffb(0x2ce)]=null,devices[_0x31b7d9]['access'][_0x3f6ffb(0x126)]=null,logger[_0x3f6ffb(0x21d)](_0x3f6ffb(0x13f)+_0x31b7d9[_0x3f6ffb(0x1fc)](-0x8)),io['to'](getClient(_0x210232['id'])['uuid'])[_0x3f6ffb(0x2d4)](_0x3f6ffb(0x1cb),{'access':{'allow':![],'reason':_0x3f6ffb(0x233),'token':null}});}else logger[_0x3f6ffb(0x12e)](_0x3f6ffb(0x288));});}function initializeSocketBot(_0x587d9e){const _0x3c1cda=_0x2d602e,_0x418315=getClient(_0x587d9e['id'])[_0x3c1cda(0x203)],_0x1f728e=getClient(_0x587d9e['id'])[_0x3c1cda(0x157)];_0x587d9e['on'](_0x3c1cda(0x151),(_0x1ebdb5,_0x534adb)=>{const _0x1c594d=_0x3c1cda;if(validateAccess(_0x534adb,_0x1f728e)[_0x1c594d(0x261)]){if(pid[_0x418315])pid[_0x418315][_0x1c594d(0x228)]({'function':'emitHistory','args':_0x1ebdb5});}else logger[_0x1c594d(0x12e)](_0x1c594d(0x224));}),_0x587d9e['on'](_0x3c1cda(0x293),(_0x40a1c8,_0x4ab725)=>{const _0x306063=_0x3c1cda;if(validateAccess(_0x4ab725,_0x1f728e)[_0x306063(0x261)]){if(pid[_0x418315])pid[_0x418315]['send']({'function':'deleteHistoryAlerts','args':_0x40a1c8});}else logger[_0x306063(0x12e)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x587d9e['on'](_0x3c1cda(0x286),(_0x407a42,_0x16cc58)=>{const _0x30f89f=_0x3c1cda;if(validateAccess(_0x16cc58,_0x1f728e)[_0x30f89f(0x261)]){if(pid[_0x418315])pid[_0x418315][_0x30f89f(0x228)]({'function':_0x30f89f(0x1c0),'args':_0x407a42});}else logger[_0x30f89f(0x12e)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x587d9e['on'](_0x3c1cda(0x1dc),(_0x103530,_0x1d421d)=>{const _0x3d360d=_0x3c1cda;if(validateAccess(_0x1d421d,_0x1f728e)['allow']){if(pid[_0x418315])pid[_0x418315][_0x3d360d(0x228)]({'function':'storeConfiguration','args':_0x103530});}else logger[_0x3d360d(0x12e)](_0x3d360d(0x155));}),_0x587d9e['on']('store-headless',(_0x57626c,_0xa141ef)=>{const _0x3b7033=_0x3c1cda;if(validateAccess(_0xa141ef,_0x1f728e)[_0x3b7033(0x261)]){if(pid[_0x418315])pid[_0x418315][_0x3b7033(0x228)]({'function':_0x3b7033(0x158),'args':_0x57626c});}else logger[_0x3b7033(0x12e)](_0x3b7033(0x2b5));}),_0x587d9e['on']('store-fiat',(_0x553f52,_0x5b43a2)=>{const _0x312423=_0x3c1cda;if(validateAccess(_0x5b43a2,_0x1f728e)[_0x312423(0x261)]){if(pid[_0x418315])pid[_0x418315]['send']({'function':_0x312423(0x267),'args':_0x553f52});}else logger[_0x312423(0x12e)](_0x312423(0x249));}),_0x587d9e['on'](_0x3c1cda(0x2c7),_0x463174=>{const _0x3c045d=_0x3c1cda;if(validateAccess(_0x463174,_0x1f728e)[_0x3c045d(0x261)]){if(pid[_0x418315])pid[_0x418315]['send']({'function':_0x3c045d(0x1bb),'args':null});}else logger[_0x3c045d(0x12e)](_0x3c045d(0x175));}),_0x587d9e['on']('get-starting-balances',_0x3f290e=>{const _0x421a93=_0x3c1cda;if(validateAccess(_0x3f290e,_0x1f728e)[_0x421a93(0x261)]){if(pid[_0x418315])pid[_0x418315][_0x421a93(0x228)]({'function':_0x421a93(0x298),'args':null});}else logger[_0x421a93(0x12e)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x587d9e['on']('place-order',(_0x9330ed,_0x51101b)=>{const _0x1e86d9=_0x3c1cda;if(validateAccess(_0x51101b,_0x1f728e)['allow']){if(pid[_0x418315])pid[_0x418315][_0x1e86d9(0x228)]({'function':_0x1e86d9(0x289),'args':_0x9330ed});}else logger[_0x1e86d9(0x12e)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x587d9e['on']('cancel-loading',_0x206e52=>{const _0x6b522e=_0x3c1cda;if(validateAccess(_0x206e52,_0x1f728e)['allow']){if(pid[_0x418315])pid[_0x418315][_0x6b522e(0x228)]({'function':_0x6b522e(0x2a3),'args':null});}else logger['full'](_0x6b522e(0x1a4));}),_0x587d9e['on'](_0x3c1cda(0x2d3),_0x3ffc38=>{const _0x5dcdda=_0x3c1cda;if(validateAccess(_0x3ffc38,_0x1f728e)[_0x5dcdda(0x261)]){if(pid[_0x418315])pid[_0x418315][_0x5dcdda(0x228)]({'function':_0x5dcdda(0x2b1),'args':null});}else logger[_0x5dcdda(0x12e)](_0x5dcdda(0x137));}),_0x587d9e['on'](_0x3c1cda(0x10a),_0x16912c=>{const _0x211d06=_0x3c1cda;if(validateAccess(_0x16912c,_0x1f728e)['allow'])updateBB(_0x211d06(0x28a));else logger['full'](_0x211d06(0x27f));}),_0x587d9e['on']('get-messages',_0x4c5712=>{const _0x51678f=_0x3c1cda;if(validateAccess(_0x4c5712,_0x1f728e)[_0x51678f(0x261)])getMessages();else logger[_0x51678f(0x12e)](_0x51678f(0x197));}),_0x587d9e['on']('confirm-message',(_0x162e79,_0x3bbe2d)=>{const _0xc6e6fc=_0x3c1cda;if(validateAccess(_0x3bbe2d,_0x1f728e)[_0xc6e6fc(0x261)])confirmMessage(_0x162e79);else logger[_0xc6e6fc(0x12e)](_0xc6e6fc(0x2bf));}),_0x587d9e['on'](_0x3c1cda(0x283),_0x11e0c0=>{const _0x523f50=_0x3c1cda;if(validateAccess(_0x11e0c0,_0x1f728e)[_0x523f50(0x261)]){if(devices[_0x1f728e][_0x523f50(0x12b)])clearTimeout(devices[_0x1f728e][_0x523f50(0x12b)]);if(devices[_0x1f728e]['pidExpireLogin'])clearTimeout(devices[_0x1f728e]['pidExpireLogin']);removeSocketListeners(getClient(_0x587d9e['id'])[_0x523f50(0x157)]),addBlacklist(_0x1f728e),devices[_0x1f728e][_0x523f50(0x136)]=null,devices[_0x1f728e][_0x523f50(0x2ce)]=null,devices[_0x1f728e][_0x523f50(0x209)]['token']=null,logger[_0x523f50(0x21d)](_0x523f50(0x13f)+_0x1f728e[_0x523f50(0x1fc)](-0x8)),io['to'](getClient(_0x587d9e['id'])[_0x523f50(0x157)])[_0x523f50(0x2d4)](_0x523f50(0x1cb),{'access':{'allow':![],'reason':_0x523f50(0x233),'token':null}});}else logger[_0x523f50(0x12e)](_0x523f50(0x288));});}function removeSocketListeners(_0x4a9ea8){const _0x3678fb=_0x2d602e;getClientsWithUuid(_0x4a9ea8)[_0x3678fb(0x210)](_0x152d70=>{const _0xb0da12=_0x3678fb;getSocket(_0x152d70['id'])[_0xb0da12(0x28e)]();});}function cleanSettings(){const _0x50055d=_0x2d602e;let _0x286aec=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x286aec={..._0x286aec,'telegramToken':_0x50055d(0x264)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0x286aec={..._0x286aec,'bbPassword':_0x50055d(0x264)}),(settings[_0x50055d(0x123)]&&settings[_0x50055d(0x123)]==_0x50055d(0x11b)||settings[_0x50055d(0x15e)]&&settings[_0x50055d(0x15e)]==_0x50055d(0x11b))&&(_0x286aec={..._0x286aec,'restored':{'password':settings[_0x50055d(0x123)]==_0x50055d(0x11b),'telegram':settings['telegramToken']==_0x50055d(0x11b)}}),_0x286aec;}async function updateBB(_0x2c8d95){const _0xcca9dd=_0x2d602e;await backupConfigFiles(),installingUpdate=!![],config[_0xcca9dd(0x210)](_0x41b9d4=>{restartBot(_0x41b9d4['botID']);});if(_0x2c8d95==_0xcca9dd(0x28a))process['send']({'update':!![],'environment':environment},_0x514bdb=>{});else _0x2c8d95==_0xcca9dd(0x141)&&process[_0xcca9dd(0x228)]({'reinstall':!![],'environment':environment},_0x519b9e=>{});}function startBot(_0x2a9024,_0x300b98,_0x592131){const _0x50ba49=_0x2d602e;if(debugging)_0x2a9024[_0x50ba49(0x29e)]('-d');let _0x4e6633=![];const _0x4d8d7a=_0x2a9024[0x0];_0x300b98={..._0x300b98,'stdio':[_0x50ba49(0x211),'inherit','inherit','ipc']},pid[_0x4d8d7a]=childProcess[_0x50ba49(0x282)](botfile,_0x2a9024,_0x300b98),pid[_0x4d8d7a]['on'](_0x50ba49(0x194),_0x3029f7=>{const _0x590187=_0x50ba49;switch(Object[_0x590187(0x14a)](_0x3029f7)[0x0]){case _0x590187(0x27e):updateBotName(_0x4d8d7a,_0x3029f7['botname']);break;case _0x590187(0x1b0):updateBotManager();break;case _0x590187(0x1cb):updateStatus(_0x4d8d7a,_0x3029f7[_0x590187(0x1cb)]);break;case _0x590187(0x1d2):updateLive(_0x4d8d7a,_0x3029f7[_0x590187(0x1d2)]);break;case'started':updateLive(_0x4d8d7a,_0x3029f7[_0x590187(0x171)]),io['to'](_0x4d8d7a)['emit'](_0x590187(0x1cb),{'access':{'allow':![],'reason':_0x590187(0x1b7),'token':null}});break;case _0x590187(0x150):_0x3029f7[_0x590187(0x150)]==_0x590187(0x16e)&&restartBot(_0x4d8d7a);_0x3029f7[_0x590187(0x150)]==_0x590187(0x24a)&&toggleBot(_0x4d8d7a,_0x590187(0x21e),_0x590187(0x205));break;case _0x590187(0x19d):sendTelegram(_0x4d8d7a,_0x3029f7['telegram']);break;case _0x590187(0x276):sendTelegramMsg(_0x3029f7['telegrammsg']);break;case'function':io['to'](_0x4d8d7a)['emit'](_0x3029f7[_0x590187(0x16c)],_0x3029f7[_0x590187(0x156)]);break;}}),pid[_0x4d8d7a]['on']('error',function(_0x227f96){if(_0x4e6633)return;_0x4e6633=!![],_0x592131(_0x227f96);}),pid[_0x4d8d7a]['on'](_0x50ba49(0x215),async function(_0x12af23){const _0x4035fd=_0x50ba49;if(installingUpdate)return;if(_0x4e6633)return;_0x4e6633=!![],_0x592131(null);const _0x38ea2d=dbConfig[_0x4035fd(0x235)]('bots')[_0x4035fd(0x26e)]({'botID':_0x4d8d7a})[_0x4035fd(0x118)]();_0x38ea2d&&(_0x38ea2d[_0x4035fd(0x1cb)]==_0x4035fd(0x19f)||_0x38ea2d[_0x4035fd(0x1cb)]==_0x4035fd(0x13c))&&(await sleep(0x3e8),updateLive(_0x4d8d7a,_0x4035fd(0x205)),logger[_0x4035fd(0x12e)](_0x4035fd(0x105)+_0x4d8d7a),startBot([_0x4d8d7a,userID],{'cwd':bbpath},function(_0x469195){const _0x2ecc0a=_0x4035fd;if(_0x469195)logger[_0x2ecc0a(0x12e)](_0x469195);}));});}function stopBot(_0x51a70a){const _0x4cc73f=_0x2d602e;getClientsWithBotID(_0x51a70a)[_0x4cc73f(0x210)](_0x1c72db=>{const _0x4e2083=_0x4cc73f;getSocket(_0x1c72db['id'])[_0x4e2083(0x120)](!![]),removeClient(_0x1c72db['id']);}),pid[_0x51a70a]&&(pid[_0x51a70a][_0x4cc73f(0x24a)](),pid[_0x51a70a]=null);}function restartBot(_0x4a5dd5){if(pid[_0x4a5dd5])pid[_0x4a5dd5]['kill']();}function addBot(){const _0xeae959=_0x2d602e;let _0x2f7229;for(let _0x3f6754=0x1;_0x3f6754<0x3e9;_0x3f6754++){_0x2f7229=_0x3f6754['toString']()['padStart'](0x3,'0');let _0x57a667=config['find'](_0x59ac56=>_0x59ac56[_0xeae959(0x25c)]==_0x2f7229);if(!_0x57a667)break;}if(_0x2f7229===_0xeae959(0x226)){logger[_0xeae959(0x12e)](_0xeae959(0x1b1));return;}logger[_0xeae959(0x12e)](_0xeae959(0x199)+_0x2f7229),dbConfig['get'](_0xeae959(0x1a2))['push']({'botID':_0x2f7229,'botname':_0xeae959(0x231)+_0x2f7229,'status':_0xeae959(0x13c),'live':''})[_0xeae959(0x13b)](),startBot([_0x2f7229,userID],{'cwd':bbpath},function(_0x5e002e){const _0x3c10e5=_0xeae959;if(_0x5e002e)logger[_0x3c10e5(0x12e)](_0x5e002e);}),config=getConfiguration(),io['to'](_0xeae959(0x232))[_0xeae959(0x2d4)](_0xeae959(0x1a2),config),broadcastToBots('bots',JSON[_0xeae959(0x2c4)](config));}function deleteBot(_0x473716){const _0x423c21=_0x2d602e;getClientsWithBotID(_0x473716)[_0x423c21(0x210)](_0x3630eb=>{const _0x14d928=_0x423c21;getSocket(_0x3630eb['id'])[_0x14d928(0x120)](!![]),removeClient(_0x3630eb['id']);}),dbConfig[_0x423c21(0x235)]('bots')[_0x423c21(0x195)]({'botID':_0x473716})[_0x423c21(0x13b)](),logger[_0x423c21(0x12e)](_0x423c21(0x16a)+_0x473716),stopBot(_0x473716);try{if(fs[_0x423c21(0x182)](path[_0x423c21(0x1c1)](configpath,_0x423c21(0x159)+_0x473716+_0x423c21(0xfe))))fs[_0x423c21(0x22f)](path[_0x423c21(0x1c1)](configpath,_0x423c21(0x159)+_0x473716+'-config.json'));if(fs[_0x423c21(0x182)](path['join'](configpath,_0x423c21(0x159)+_0x473716+'-events.json')))fs['unlinkSync'](path[_0x423c21(0x1c1)](configpath,_0x423c21(0x159)+_0x473716+_0x423c21(0x127)));if(fs[_0x423c21(0x182)](path[_0x423c21(0x1c1)](configpath,_0x423c21(0x159)+_0x473716+_0x423c21(0x299))))fs[_0x423c21(0x22f)](path['join'](configpath,_0x423c21(0x159)+_0x473716+_0x423c21(0x299)));if(fs['existsSync'](path['join'](configpath,'bot-'+_0x473716+'-results.json')))fs[_0x423c21(0x22f)](path[_0x423c21(0x1c1)](configpath,'bot-'+_0x473716+_0x423c21(0x281)));}catch(_0x1dfcc5){if(_0x1dfcc5)logger['full']('Error\x20while\x20deleting\x20config\x20files:\x20',_0x1dfcc5);}config=getConfiguration(),io['to'](_0x423c21(0x232))[_0x423c21(0x2d4)](_0x423c21(0x1a2),config),broadcastToBots(_0x423c21(0x1a2),JSON[_0x423c21(0x2c4)](config));}function toggleBot(_0x37e7f8,_0x469db4,_0x552153){const _0x1a6516=_0x2d602e;dbConfig[_0x1a6516(0x235)](_0x1a6516(0x1a2))['find']({'botID':_0x37e7f8})[_0x1a6516(0x144)]({'status':_0x469db4})[_0x1a6516(0x144)]({'live':_0x552153})[_0x1a6516(0x13b)]();if(_0x469db4==_0x1a6516(0x19f)||_0x469db4=='new')logger['full'](_0x1a6516(0x166)+_0x37e7f8),startBot([_0x37e7f8,userID],{'cwd':bbpath},function(_0xa9d011){const _0x3d4ed8=_0x1a6516;if(_0xa9d011)logger[_0x3d4ed8(0x12e)](_0xa9d011);});else(_0x469db4==_0x1a6516(0x21e)||_0x469db4==_0x1a6516(0x181))&&(logger[_0x1a6516(0x12e)](_0x1a6516(0x163)+_0x37e7f8),stopBot(_0x37e7f8));config=getConfiguration(),io['to'](_0x1a6516(0x232))['emit'](_0x1a6516(0x1a2),config),broadcastToBots(_0x1a6516(0x1a2),JSON[_0x1a6516(0x2c4)](config));}function toggleStatus(_0x1fb693){const _0x1553a0=_0x2d602e;let _0x3256e0=dbConfig[_0x1553a0(0x235)]('bots')[_0x1553a0(0x26e)]({'botID':_0x1fb693})[_0x1553a0(0x118)](),_0x153e63;if(_0x3256e0[_0x1553a0(0x1cb)]===_0x1553a0(0x19f))_0x153e63=_0x1553a0(0x21e);else{if(_0x3256e0[_0x1553a0(0x1cb)]===_0x1553a0(0x13c))_0x153e63='new-disabled';else{if(_0x3256e0[_0x1553a0(0x1cb)]===_0x1553a0(0x181))_0x153e63=_0x1553a0(0x13c);else{if(_0x3256e0[_0x1553a0(0x1cb)]==='disabled')_0x153e63=_0x1553a0(0x19f);}}}return _0x153e63;}function updateStatus(_0x270fb8,_0xfcb4b5){const _0x3c59a2=_0x2d602e;dbConfig[_0x3c59a2(0x235)](_0x3c59a2(0x1a2))[_0x3c59a2(0x26e)]({'botID':_0x270fb8})['assign']({'status':_0xfcb4b5})[_0x3c59a2(0x13b)](),config=getConfiguration(),io['to']('botmanager')[_0x3c59a2(0x2d4)](_0x3c59a2(0x1a2),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x593756,_0x218683){const _0x89f6d4=_0x2d602e;dbConfig[_0x89f6d4(0x235)](_0x89f6d4(0x1a2))[_0x89f6d4(0x26e)]({'botID':_0x593756})[_0x89f6d4(0x144)]({'live':_0x218683})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x89f6d4(0x2d4)](_0x89f6d4(0x1a2),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x12b08f,_0x4000bb){const _0x2b8449=_0x2d602e;dbConfig[_0x2b8449(0x235)]('bots')['find']({'botID':_0x12b08f})[_0x2b8449(0x144)]({'botname':_0x4000bb})[_0x2b8449(0x13b)](),config=getConfiguration(),io['to'](_0x2b8449(0x232))['emit'](_0x2b8449(0x1a2),config),broadcastToBots(_0x2b8449(0x1a2),JSON[_0x2b8449(0x2c4)](config));}function _0x220d(){const _0x427ba3=['host','show','Ok,\x20will\x20send\x20alert\x20notifications\x20only','mkdirSync','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','value','index.html','\x1b[33m','***','sortBy','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Invalid\x20IP\x20address','environment','disconnect','2FA\x20login\x20required','SIGINT','bbPassword','build','conn','token','-events.json','endsWith','toggleBotMode','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','pidRefreshToken','#RES#\x20if\x20running\x20locally\x0a','chat','full','1606170XUlzUk','event','isIPv4MappedAddress','/:bot/coins','Restore\x20process\x20aborted','number','/update\x20-\x20update\x20Balance\x20Bot\x0a','telegramIpApproval','Unauthorized\x20attempt\x20to\x20show\x20configuration','Notifications\x20disabled','backup','name','write','new','2FA\x20required','add','Logged\x20out\x20user\x20...','argv','reinstall','graphql-request','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','assign','createServer','decrypt','lowdb/adapters/FileSync','remoteAddress','data','keys','yargs/yargs','latestversion','kind','params','Starting\x20#RED#Balance\x20Bot\x20v','stop','get-logs','timeshift','getUTCHours','telegramChatId','Unauthorized\x20attempt\x20to\x20store\x20configuration','args','uuid','storeHeadless','bot-','Unauthorized\x20attempt\x20to\x20delete\x20bot','exec','build2','Yes','telegramToken','/off\x20-\x20stop\x20bot(s)\x0a','sort','userid','bb/','Disabled\x20Bot\x20','auto','6vbADAm','Enabled\x20Bot\x20','Orders','=>\x20Go\x20to\x20#CYA#http://','/disable\x20-\x20disable\x20notifications\x0a','Deleted\x20Bot\x20','Invalid\x20authentication\x20token\x20(1)','function','User\x20has\x20been\x20validated','restart','length','tkn','started','temporary\x20access\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','hasOwnProperty','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Your\x20installation\x20is\x20already\x20up\x20to\x20date','getMonth','\x20|\x20client:\x20...','restore-backup-file','Unauthorized\x20login\x20attempt\x20(timeout)','/output-000.log','File\x20uploaded','Token\x20blacklisted','util','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','success','new-disabled','existsSync','\x20to\x20','express','Unauthorized\x20attempt\x20to\x20download\x20','timestamp','invalid\x20credentials','alias','1610kLHgaG',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','pidExpireLogin','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','mixpanel','bbvReceive','createWriteStream','/restart\x20-\x20restart\x20bot(s)\x0a','store','generate','any','message','remove','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20get\x20messages','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Starting\x20new\x20bot\x20|\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','privateKey','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','telegram','match','enabled','\x1b[36m','zip/','bots','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','isDirectory','use','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','notification','15\x20min','reason','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Restore\x20backup\x20file\x20','versions','telegramEvents','min','updatebotmanager','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','sendMessage','secret','/:bot/performance','readdirSync','writeFileSync','reload','SIGTERM','/status\x20-\x20show\x20bot(s)\x20status\x0a','Invalid\x20authentication\x20token\x20(2)','resetHistory','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','uncaughtException','Alerts','blacklist','getPortfolio','join','string','clientip','NTBA_FIX_319','HTML','Notifications\x20enabled\x0a','init','telegramEnabled','output-001.log','store-settings','status','All\x20bots\x20running\x20right\x20now','internal','sendFile','login\x20token\x20generated','bot.js','30\x20min','live','readFileSync','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20to\x20update\x20settings','format','headers','ipaddr.js','\x20minutes','connected','answerCallbackQuery','store-configuration','compareSync','bb-config.json','sha256','\x1b[31m','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','telegramUsername','files','settings.','Error\x20removing\x20old\x20backup\x20files:','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','publicKey','exchange','Starting\x20bot\x20|\x20Bot\x20','delete-bot','max','listen','toString','Password\x20reset\x20rejected','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','messages','search','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','17801307VLtKsi','range','socket','warning','Notifications\x20enabled','6b67f3d61ee94b8f5c80b4affef4c4d9','http','copyFileSync','loginRequired','slice','.zip','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','removeListener','node','Unauthorized\x20attempt\x20to\x20update\x20bot','::ffff:127.0.0.1','bot','hex','stopped','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','onepagemode','test','access','127.0.0.1','\x20mode','startsWith','output-000.log','<b>Balance\x20Bot\x20Status:</b>\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','forEach','inherit','title','path','toggle-bot-mode','exit','log','lastmsgtelegram','$1_$2_$3','logs','backup-files','bb-settings.json','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','debug','disabled','Notifications\x20types:\x20','encryptedUuid','family','replace','mode','Unauthorized\x20attempt\x20to\x20get\x20events','simple','1000','getMinutes','send','request','Error:\x20Invalid\x20argument\x20','set','/:bot/history','https://api.ipify.org?format=json','getSeconds','unlinkSync','initclient','Bot\x20','botmanager','logged\x20out','backup/','get','filter','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','orders','statSync','binary','yes','5\x20min','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','::1','sendPortfolioTelegram','password','login','</b>\x20?','crypto','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','user','/enable\x20-\x20enable\x20notifications\x0a','/on\x20-\x20start\x20bot(s)\x0a','/:bot/configuration','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','kill','confirm-message','getTime','430143RVTMhZ','Unauthorized\x20attempt\x20to\x20add\x20bot','login\x20not\x20required','backup-full@','file','includes','bcryptjs','-----------------------------------------------------------------------------------','Login\x20accepted','/download/:type','generateKeyPairAsync','handshake','Crypt','randomFillSync','whitelist','botID','alerts','temporary\x20access\x20timeout','catch','headless','allow','manual','lastmsgemitted','************','Network\x20Interfaces:','defaults','storeFiat','node-zip','temp/','order','Ok,\x20will\x20send\x20order\x20notifications\x20only','IPv4','then','find','/upload-backup','auth',':\x20Bot\x20Mgr\x20>\x20','split','callback_query','verify','login\x20token\x20valid','telegrammsg','padStart','socket.io','version','type','all','\x20|\x20','production','botname','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','config/','-results.json','fork','logout','bbvNew','reject','get-portfolio','stopPolling','Unauthorized\x20attempt\x20to\x20log\x20out','placeOrder','update','Temporary\x20access\x20rejected','Backup\x20file\x20unzipped\x20and\x20stored','whitelistEnabled','removeAllListeners','Starting\x20Balance\x20Bot\x20update','output-002.log','download','\x20|\x20user:\x20...','delete-alerts','date-fns','child_process','login\x20required','sendMetricsTelegram','getStartingBalances','-performance.json','/:bot/portfolio','2FA\x20login\x20rejected','ipv6','Allow\x20login\x20from\x20IP\x20address\x20<b>','push','[ip-address]','username','Notifications\x20disabled\x0a','toIPv4MappedAddress','cancelLoading','Bot\x20Mgr\x20>\x20','Invalid\x20Telegram\x20token','update-bot','No\x20authentication\x20token','post','hashSync','\x20>\x20','f2aRequired','getFullYear','/help\x20-\x20show\x20available\x20commands\x0a','backup-full.zip','14550XbefCp','getDate','showConfig','rmSync','/:bot','constructor','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','once','Login\x20rejected','370488sWeFBb','server','/:bot/support','parse','#RES#\x20','1062360APlBwb','mtime','Unauthorized\x20attempt\x20to\x20confirm\x20message','access\x20timeout','reset-password','secure','*$1*','stringify','No\x20bots\x20running\x20right\x20now','expiry','reset-history','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','cloneDeep','sign','0.0.0','(((.+)+)+)+$','isValid','telegram2FaApproval','backup-full','track','address','onText','show-config','emit','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','logs/','Server','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','api-eu.mixpanel.com','Starting\x20Balance\x20Bot\x20reinstallation','from','Backup\x20file\x20uploaded','connection','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Access\x20enabled\x20for\x20','jsonwebtoken','accept','2FA\x20login\x20token\x20generated','\x20only\x0a','exp','toIPv4Address','-config.json',',\x20must\x20be\x20a\x204\x20digit\x20number','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','private','settings','temporary\x20access\x20not\x20allowed','getHours','Restarting\x20Bot\x20','hybrid-crypto-js','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','bb-secure.json','(staging)','update-bb','showname','bbUsername','2387208BrzMXU','Logged\x20in\x20user\x20...','apiKey','Markdown','You\x20can\x20use\x20the\x20following\x20commands:\x0a','3000'];_0x220d=function(){return _0x427ba3;};return _0x220d();}function updateBotManager(){const _0x2b42a1=_0x2d602e;config=getConfiguration(),io['to']('botmanager')[_0x2b42a1(0x2d4)]('bots',config),broadcastToBots(_0x2b42a1(0x1a2),JSON[_0x2b42a1(0x2c4)](config));}function toggleBotMode(_0x19b745){const _0x2e31de=_0x2d602e;if(pid[_0x19b745])pid[_0x19b745][_0x2e31de(0x228)]({'function':_0x2e31de(0x129),'args':null});else{const _0x5c0e05=configpath+_0x2e31de(0x159)+_0x19b745+_0x2e31de(0xfe),_0x2e2157=fs[_0x2e31de(0x1d3)](_0x5c0e05),_0x3b2166=JSON[_0x2e31de(0x2bb)](_0x2e2157),_0x21b336=_0x3b2166[_0x2e31de(0x203)][0x0][_0x2e31de(0x260)];_0x3b2166[_0x2e31de(0x203)][0x0][_0x2e31de(0x260)]=!_0x21b336;const _0x441be7=JSON[_0x2e31de(0x2c4)](_0x3b2166,null,0x2);fs[_0x2e31de(0x1b6)](_0x5c0e05,_0x441be7),config=getConfiguration(),io['to'](_0x2e31de(0x232))['emit'](_0x2e31de(0x1a2),config),broadcastToBots(_0x2e31de(0x1a2),JSON[_0x2e31de(0x2c4)](config));}}function telegramError(_0x3c596c){const _0x1d06f1=_0x2d602e;logger['simple'](getTimeStamp()+_0x1d06f1(0x18a));}function validateTelegram(_0x346a6f){const _0x2b4440=_0x2d602e;if(_0x346a6f[_0x2b4440(0x2db)][_0x2b4440(0x2a0)]!=settings[_0x2b4440(0x1e2)]&&'@'+_0x346a6f['from'][_0x2b4440(0x2a0)]!=settings[_0x2b4440(0x1e2)])return tgBot[_0x2b4440(0x1b2)](_0x346a6f[_0x2b4440(0x12d)]['id'],_0x2b4440(0x198),{'parse_mode':_0x2b4440(0x1c5)})[_0x2b4440(0x25f)](_0x13ffec=>{telegramError(_0x13ffec);}),![];return!![];}async function initTelegram(){const _0xc9a6bf=_0x2d602e;if(tgBot)tgBot[_0xc9a6bf(0x287)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xc9a6bf(0x15e)],{'polling':!![]});let _0x5c3655=_0xc9a6bf(0x111);_0x5c3655+='\x0a',_0x5c3655+=_0xc9a6bf(0x246),_0x5c3655+=_0xc9a6bf(0x169),_0x5c3655+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x5c3655+=_0xc9a6bf(0x190),_0x5c3655+=_0xc9a6bf(0x247),_0x5c3655+=_0xc9a6bf(0x15f),_0x5c3655+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x5c3655+='/names\x20-\x20show\x20bot\x20names\x0a',_0x5c3655+=_0xc9a6bf(0x1b9),_0x5c3655+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x5c3655+=_0xc9a6bf(0x100),_0x5c3655+=_0xc9a6bf(0x135),_0x5c3655+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x5c3655+=_0xc9a6bf(0x2ad);let _0x5ec609=_0xc9a6bf(0x1a7);_0x5ec609+='\x0a',_0x5ec609+=_0x5c3655,tgBot[_0xc9a6bf(0x2d2)](/\/start/,_0x519342=>{const _0x158e67=_0xc9a6bf;if(!validateTelegram(_0x519342))return;if(settings[_0x158e67(0x154)]!=_0x519342['chat']['id'])updateSetting('telegramChatId',_0x519342[_0x158e67(0x12d)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x158e67(0x1b2)](_0x519342['chat']['id'],_0x5ec609)['catch'](_0x3f58ba=>{telegramError(_0x3f58ba);});}),tgBot[_0xc9a6bf(0x2d2)](/\/enable/,_0x53d77b=>{const _0x281529=_0xc9a6bf;if(!validateTelegram(_0x53d77b))return;if(settings[_0x281529(0x154)]!=_0x53d77b[_0x281529(0x12d)]['id'])updateSetting('telegramChatId',_0x53d77b[_0x281529(0x12d)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x281529(0x1b2)](_0x53d77b['chat']['id'],_0x281529(0x1f7))['catch'](_0x1189ab=>{telegramError(_0x1189ab);});}),tgBot[_0xc9a6bf(0x2d2)](/\/config/,async _0xdd7f07=>{const _0x69d7ae=_0xc9a6bf;if(!validateTelegram(_0xdd7f07))return;tgBot['removeListener'](_0x69d7ae(0x273)),tgBot[_0x69d7ae(0x1b2)](_0xdd7f07[_0x69d7ae(0x12d)]['id'],_0x69d7ae(0x1ef),{'reply_markup':{'inline_keyboard':[[{'text':_0x69d7ae(0x167),'callback_data':'orders'},{'text':_0x69d7ae(0x1be),'callback_data':_0x69d7ae(0x25d)},{'text':'All','callback_data':_0x69d7ae(0x27b)}]]}})[_0x69d7ae(0x25f)](_0x1f886d=>{telegramError(_0x1f886d);}),tgBot['on'](_0x69d7ae(0x273),async _0x2d1f5d=>{const _0x3ec80a=_0x69d7ae,_0x2e832e=_0x2d1f5d[_0x3ec80a(0x149)],_0x12f918=_0x2d1f5d[_0x3ec80a(0x194)];tgBot['answerCallbackQuery'](_0x2d1f5d['id'])[_0x3ec80a(0x26d)](async()=>{const _0x3c1ce6=_0x3ec80a;_0x2e832e=='orders'&&(updateSetting('telegramEvents',_0x3c1ce6(0x238)),updateSetting(_0x3c1ce6(0x1c8),!![]),await tgBot[_0x3c1ce6(0x1b2)](_0x12f918[_0x3c1ce6(0x12d)]['id'],_0x3c1ce6(0x26b))[_0x3c1ce6(0x25f)](_0x53f1f5=>{telegramError(_0x53f1f5);}));_0x2e832e=='alerts'&&(updateSetting(_0x3c1ce6(0x1ae),_0x3c1ce6(0x25d)),updateSetting(_0x3c1ce6(0x1c8),!![]),await tgBot[_0x3c1ce6(0x1b2)](_0x12f918['chat']['id'],_0x3c1ce6(0x115))[_0x3c1ce6(0x25f)](_0x1d1123=>{telegramError(_0x1d1123);}));_0x2e832e==_0x3c1ce6(0x27b)&&(updateSetting('telegramEvents',_0x3c1ce6(0x27b)),updateSetting(_0x3c1ce6(0x1c8),!![]),await tgBot[_0x3c1ce6(0x1b2)](_0x12f918[_0x3c1ce6(0x12d)]['id'],_0x3c1ce6(0x2c8))[_0x3c1ce6(0x25f)](_0x441fdc=>{telegramError(_0x441fdc);}));if(!settings[_0x3c1ce6(0x154)])tgBot['sendMessage'](_0x12f918[_0x3c1ce6(0x12d)]['id'],_0x3c1ce6(0x1e6))[_0x3c1ce6(0x25f)](_0x3d0d13=>{telegramError(_0x3d0d13);});}),tgBot[_0x3ec80a(0x1ff)]('callback_query');});}),tgBot[_0xc9a6bf(0x2d2)](/\/status/,_0x4b0aad=>{const _0x3c56a3=_0xc9a6bf;if(!validateTelegram(_0x4b0aad))return;const _0x517bd9=getBotsWithMode();let _0x2b6cb5=_0x3c56a3(0x20e);config[_0x3c56a3(0x210)](_0xdb997c=>{const _0x1dfed0=_0x3c56a3,_0x2e2038=_0x517bd9[_0x1dfed0(0x26e)](_0x3e6154=>_0x3e6154[_0x1dfed0(0x25c)]==_0xdb997c[_0x1dfed0(0x25c)])[_0x1dfed0(0x223)];_0x2b6cb5+=_0x1dfed0(0x231)+_0xdb997c[_0x1dfed0(0x25c)]+':\x20'+_0xdb997c[_0x1dfed0(0x1cb)]+_0x1dfed0(0x27c)+_0x2e2038+'\x20|\x20'+_0xdb997c[_0x1dfed0(0x1d2)]+'\x0a';}),_0x2b6cb5+='\x0a',_0x2b6cb5+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x2b6cb5+=!settings[_0x3c56a3(0x1c8)]?_0x3c56a3(0x2a1):_0x3c56a3(0x1c6),_0x2b6cb5+=settings['telegramEnabled']?settings[_0x3c56a3(0x1ae)]==_0x3c56a3(0x27b)?_0x3c56a3(0x12a):_0x3c56a3(0x21f)+settings[_0x3c56a3(0x1ae)]+_0x3c56a3(0xfb):'',tgBot[_0x3c56a3(0x1b2)](_0x4b0aad[_0x3c56a3(0x12d)]['id'],_0x2b6cb5,{'parse_mode':_0x3c56a3(0x1c5)})[_0x3c56a3(0x25f)](_0x9e1c1=>{telegramError(_0x9e1c1);});}),tgBot[_0xc9a6bf(0x2d2)](/\/restart/,_0x41b51f=>{const _0xf0ca1c=_0xc9a6bf;if(!validateTelegram(_0x41b51f))return;tgBot[_0xf0ca1c(0x1ff)](_0xf0ca1c(0x273));const _0x2eedb2=getEnabledBots();if(_0x2eedb2[_0xf0ca1c(0x16f)]==0x0)tgBot[_0xf0ca1c(0x1b2)](_0x41b51f[_0xf0ca1c(0x12d)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x5efd82=>{telegramError(_0x5efd82);});else{if(_0x2eedb2['length']>0x1)_0x2eedb2[_0xf0ca1c(0x29e)]({'botID':_0xf0ca1c(0x27b)});let _0x18c7dd=[],_0x1af7d9=[];const _0x20b037=_0x2eedb2[_0xf0ca1c(0x16f)]%0x4==0x0||_0x2eedb2[_0xf0ca1c(0x16f)]%0x4==0x3||_0x2eedb2[_0xf0ca1c(0x16f)]%0x3==0x1?0x4:0x3;let _0x1e0516=0x0;_0x2eedb2[_0xf0ca1c(0x210)]((_0x2e1fe6,_0x4fb37c)=>{const _0x17fbf3=_0xf0ca1c;if(_0x4fb37c%_0x20b037==0x0)_0x1af7d9=[];_0x1af7d9[_0x17fbf3(0x29e)]({'text':_0x2e1fe6[_0x17fbf3(0x25c)]=='all'?'All\x20bots':_0x17fbf3(0x231)+_0x2e1fe6[_0x17fbf3(0x25c)],'callback_data':_0x2e1fe6[_0x17fbf3(0x25c)]}),_0x4fb37c%_0x20b037==0x0&&(_0x18c7dd[_0x1e0516]=_0x1af7d9,_0x1e0516++);}),tgBot[_0xf0ca1c(0x1b2)](_0x41b51f[_0xf0ca1c(0x12d)]['id'],_0xf0ca1c(0x173),{'reply_markup':{'inline_keyboard':_0x18c7dd}})['catch'](_0x3d8eef=>{telegramError(_0x3d8eef);}),tgBot['on'](_0xf0ca1c(0x273),async _0x5d3b4d=>{const _0x91f05f=_0xf0ca1c,_0x447b39=_0x5d3b4d['data'],_0x2fce93=_0x5d3b4d['message'];tgBot[_0x91f05f(0x1db)](_0x5d3b4d['id'])['then'](async()=>{_0x447b39=='all'?config['forEach'](_0x430540=>{restartBot(_0x430540['botID']);}):restartBot(_0x447b39);}),tgBot[_0x91f05f(0x1ff)](_0x91f05f(0x273));});}}),tgBot[_0xc9a6bf(0x2d2)](/\/on/,_0x1786fb=>{const _0x5f337d=_0xc9a6bf;if(!validateTelegram(_0x1786fb))return;tgBot[_0x5f337d(0x1ff)](_0x5f337d(0x273));const _0x4e1e9f=getDisabledBots();if(_0x4e1e9f[_0x5f337d(0x16f)]==0x0)tgBot[_0x5f337d(0x1b2)](_0x1786fb[_0x5f337d(0x12d)]['id'],_0x5f337d(0x1cc))['catch'](_0x1ebe75=>{telegramError(_0x1ebe75);});else{if(_0x4e1e9f[_0x5f337d(0x16f)]>0x1)_0x4e1e9f[_0x5f337d(0x29e)]({'botID':_0x5f337d(0x27b)});let _0x297761=[],_0x445536=[];const _0x57559d=_0x4e1e9f[_0x5f337d(0x16f)]%0x4==0x0||_0x4e1e9f[_0x5f337d(0x16f)]%0x4==0x3||_0x4e1e9f[_0x5f337d(0x16f)]%0x3==0x1?0x4:0x3;let _0x53cc7e=0x0;_0x4e1e9f['forEach']((_0x670e88,_0x4df083)=>{const _0x120303=_0x5f337d;if(_0x4df083%_0x57559d==0x0)_0x445536=[];_0x445536[_0x120303(0x29e)]({'text':_0x670e88[_0x120303(0x25c)]==_0x120303(0x27b)?'All\x20bots':_0x120303(0x231)+_0x670e88[_0x120303(0x25c)],'callback_data':_0x670e88['botID']}),_0x4df083%_0x57559d==0x0&&(_0x297761[_0x53cc7e]=_0x445536,_0x53cc7e++);}),tgBot[_0x5f337d(0x1b2)](_0x1786fb[_0x5f337d(0x12d)]['id'],_0x5f337d(0x21c),{'reply_markup':{'inline_keyboard':_0x297761}})[_0x5f337d(0x25f)](_0x42c195=>{telegramError(_0x42c195);}),tgBot['on'](_0x5f337d(0x273),async _0x1bcb77=>{const _0x7ee486=_0x5f337d,_0xe38e88=_0x1bcb77[_0x7ee486(0x149)],_0x1b70c7=_0x1bcb77[_0x7ee486(0x194)];tgBot['answerCallbackQuery'](_0x1bcb77['id'])[_0x7ee486(0x26d)](async()=>{const _0x48446c=_0x7ee486;_0xe38e88==_0x48446c(0x27b)?(tgBot[_0x48446c(0x1b2)](_0x1b70c7['chat']['id'],_0x48446c(0x20f))[_0x48446c(0x25f)](_0x57a9ba=>{telegramError(_0x57a9ba);}),_0x4e1e9f[_0x48446c(0x210)](_0xe6a6b5=>{const _0x84c35c=_0x48446c;if(_0xe6a6b5[_0x84c35c(0x25c)]!=_0x84c35c(0x27b))toggleBot(_0xe6a6b5['botID'],toggleStatus(_0xe6a6b5['botID']),_0x84c35c(0x205));})):(tgBot[_0x48446c(0x1b2)](_0x1b70c7[_0x48446c(0x12d)]['id'],_0x48446c(0x237)+_0xe38e88)[_0x48446c(0x25f)](_0xf62e56=>{telegramError(_0xf62e56);}),toggleBot(_0xe38e88,toggleStatus(_0xe38e88),_0x48446c(0x205)));}),tgBot[_0x7ee486(0x1ff)](_0x7ee486(0x273));});}}),tgBot[_0xc9a6bf(0x2d2)](/\/off/,_0x2c055c=>{const _0x7bad40=_0xc9a6bf;if(!validateTelegram(_0x2c055c))return;tgBot[_0x7bad40(0x1ff)](_0x7bad40(0x273));const _0x33769e=getEnabledBots();if(_0x33769e[_0x7bad40(0x16f)]==0x0)tgBot[_0x7bad40(0x1b2)](_0x2c055c[_0x7bad40(0x12d)]['id'],_0x7bad40(0x2c5))[_0x7bad40(0x25f)](_0xb89af5=>{telegramError(_0xb89af5);});else{if(_0x33769e[_0x7bad40(0x16f)]>0x1)_0x33769e['push']({'botID':_0x7bad40(0x27b)});let _0x714702=[],_0x42fde7=[];const _0x64a209=_0x33769e[_0x7bad40(0x16f)]%0x4==0x0||_0x33769e[_0x7bad40(0x16f)]%0x4==0x3||_0x33769e['length']%0x3==0x1?0x4:0x3;let _0x43df6e=0x0;_0x33769e['forEach']((_0x3ee51d,_0x50627c)=>{const _0x25fc40=_0x7bad40;if(_0x50627c%_0x64a209==0x0)_0x42fde7=[];_0x42fde7[_0x25fc40(0x29e)]({'text':_0x3ee51d[_0x25fc40(0x25c)]==_0x25fc40(0x27b)?'All\x20bots':_0x25fc40(0x231)+_0x3ee51d['botID'],'callback_data':_0x3ee51d['botID']}),_0x50627c%_0x64a209==0x0&&(_0x714702[_0x43df6e]=_0x42fde7,_0x43df6e++);}),tgBot[_0x7bad40(0x1b2)](_0x2c055c[_0x7bad40(0x12d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x714702}})[_0x7bad40(0x25f)](_0x55e378=>{telegramError(_0x55e378);}),tgBot['on'](_0x7bad40(0x273),async _0x559816=>{const _0x41bd41=_0x7bad40,_0x4d74e8=_0x559816[_0x41bd41(0x149)],_0x2aec6b=_0x559816['message'];tgBot[_0x41bd41(0x1db)](_0x559816['id'])[_0x41bd41(0x26d)](async()=>{const _0xd77b40=_0x41bd41;_0x4d74e8==_0xd77b40(0x27b)?(tgBot[_0xd77b40(0x1b2)](_0x2aec6b[_0xd77b40(0x12d)]['id'],_0xd77b40(0x107))[_0xd77b40(0x25f)](_0x5a8f58=>{telegramError(_0x5a8f58);}),_0x33769e[_0xd77b40(0x210)](_0x525124=>{const _0x2a71d9=_0xd77b40;if(_0x525124[_0x2a71d9(0x25c)]!='all')toggleBot(_0x525124[_0x2a71d9(0x25c)],toggleStatus(_0x525124['botID']),_0x2a71d9(0x205));})):(tgBot['sendMessage'](_0x2aec6b[_0xd77b40(0x12d)]['id'],_0xd77b40(0x18c)+_0x4d74e8)[_0xd77b40(0x25f)](_0x33b781=>{telegramError(_0x33b781);}),toggleBot(_0x4d74e8,toggleStatus(_0x4d74e8),_0xd77b40(0x205)));}),tgBot[_0x41bd41(0x1ff)](_0x41bd41(0x273));});}}),tgBot[_0xc9a6bf(0x2d2)](/\/metrics/,_0x27fec4=>{const _0x136ea=_0xc9a6bf;if(!validateTelegram(_0x27fec4))return;tgBot[_0x136ea(0x1ff)](_0x136ea(0x273));const _0x4d7659=getEnabledBots();if(_0x4d7659['length']==0x0)tgBot['sendMessage'](_0x27fec4[_0x136ea(0x12d)]['id'],_0x136ea(0x2c5))[_0x136ea(0x25f)](_0x39fe2c=>{telegramError(_0x39fe2c);});else{if(_0x4d7659[_0x136ea(0x16f)]>0x1){let _0x55c84f=[],_0x5797d8=[];const _0x26910e=_0x4d7659[_0x136ea(0x16f)]%0x4==0x0||_0x4d7659[_0x136ea(0x16f)]%0x4==0x3||_0x4d7659[_0x136ea(0x16f)]%0x3==0x1?0x4:0x3;let _0x1928b8=0x0;_0x4d7659[_0x136ea(0x210)]((_0x5f3963,_0x4aab9b)=>{const _0x107c98=_0x136ea;if(_0x4aab9b%_0x26910e==0x0)_0x5797d8=[];_0x5797d8[_0x107c98(0x29e)]({'text':'Bot\x20'+_0x5f3963[_0x107c98(0x25c)],'callback_data':_0x5f3963['botID']}),_0x4aab9b%_0x26910e==0x0&&(_0x55c84f[_0x1928b8]=_0x5797d8,_0x1928b8++);}),tgBot[_0x136ea(0x1b2)](_0x27fec4[_0x136ea(0x12d)]['id'],_0x136ea(0x1a3),{'reply_markup':{'inline_keyboard':_0x55c84f}})['catch'](_0x594120=>{telegramError(_0x594120);}),tgBot['on']('callback_query',async _0x27bf71=>{const _0x1bd73c=_0x136ea,_0x2230aa=_0x27bf71['data'],_0x44fe8a=_0x27bf71['message'];tgBot[_0x1bd73c(0x1db)](_0x27bf71['id'])[_0x1bd73c(0x26d)](async()=>{const _0x1a92a8=_0x1bd73c;if(pid[_0x2230aa])pid[_0x2230aa][_0x1a92a8(0x228)]({'function':_0x1a92a8(0x297),'args':null});}),tgBot['removeListener'](_0x1bd73c(0x273));});}else{const _0x248371=_0x4d7659[0x0][_0x136ea(0x25c)];if(pid[_0x248371])pid[_0x248371]['send']({'function':_0x136ea(0x297),'args':null});}}}),tgBot[_0xc9a6bf(0x2d2)](/\/portfolio/,_0x49f710=>{const _0xd567a1=_0xc9a6bf;if(!validateTelegram(_0x49f710))return;tgBot['removeListener'](_0xd567a1(0x273));const _0x42c293=getEnabledBots();if(_0x42c293[_0xd567a1(0x16f)]==0x0)tgBot['sendMessage'](_0x49f710['chat']['id'],_0xd567a1(0x2c5))[_0xd567a1(0x25f)](_0x2ed760=>{telegramError(_0x2ed760);});else{if(_0x42c293[_0xd567a1(0x16f)]>0x1){let _0x5a10ed=[],_0x1aa374=[];const _0x5a3cd4=_0x42c293['length']%0x4==0x0||_0x42c293[_0xd567a1(0x16f)]%0x4==0x3||_0x42c293[_0xd567a1(0x16f)]%0x3==0x1?0x4:0x3;let _0x1519bf=0x0;_0x42c293[_0xd567a1(0x210)]((_0x2cb7b2,_0x310523)=>{const _0x466943=_0xd567a1;if(_0x310523%_0x5a3cd4==0x0)_0x1aa374=[];_0x1aa374['push']({'text':_0x466943(0x231)+_0x2cb7b2[_0x466943(0x25c)],'callback_data':_0x2cb7b2[_0x466943(0x25c)]}),_0x310523%_0x5a3cd4==0x0&&(_0x5a10ed[_0x1519bf]=_0x1aa374,_0x1519bf++);}),tgBot[_0xd567a1(0x1b2)](_0x49f710[_0xd567a1(0x12d)]['id'],_0xd567a1(0x2d5),{'reply_markup':{'inline_keyboard':_0x5a10ed}})[_0xd567a1(0x25f)](_0x38043a=>{telegramError(_0x38043a);}),tgBot['on'](_0xd567a1(0x273),async _0x29054a=>{const _0x402cff=_0xd567a1,_0x4c33b8=_0x29054a['data'],_0x520bd5=_0x29054a[_0x402cff(0x194)];tgBot[_0x402cff(0x1db)](_0x29054a['id'])[_0x402cff(0x26d)](async()=>{const _0x47741a=_0x402cff;if(pid[_0x4c33b8])pid[_0x4c33b8][_0x47741a(0x228)]({'function':_0x47741a(0x23f),'args':null});}),tgBot[_0x402cff(0x1ff)](_0x402cff(0x273));});}else{const _0x45b9cb=_0x42c293[0x0][_0xd567a1(0x25c)];if(pid[_0x45b9cb])pid[_0x45b9cb]['send']({'function':_0xd567a1(0x23f),'args':null});}}}),tgBot['onText'](/\/update/,async _0x7d463d=>{const _0x3a5130=_0xc9a6bf;if(!validateTelegram(_0x7d463d))return;tgBot['removeListener'](_0x3a5130(0x273)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x7d463d[_0x3a5130(0x12d)]['id'],_0x3a5130(0x176))[_0x3a5130(0x25f)](_0x1e6cf9=>{telegramError(_0x1e6cf9);});else!validInstallation?tgBot[_0x3a5130(0x1b2)](_0x7d463d[_0x3a5130(0x12d)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x3a5130(0x25f)](_0x152272=>{telegramError(_0x152272);}):(tgBot[_0x3a5130(0x1b2)](_0x7d463d[_0x3a5130(0x12d)]['id'],_0x3a5130(0x1fe),{'reply_markup':{'inline_keyboard':[[{'text':_0x3a5130(0x15d),'callback_data':_0x3a5130(0x23b)},{'text':'No','callback_data':'no'}]]}})[_0x3a5130(0x25f)](_0x33c74e=>{telegramError(_0x33c74e);}),tgBot['on'](_0x3a5130(0x273),async _0x54c073=>{const _0xd88bac=_0x3a5130,_0x1ed9be=_0x54c073[_0xd88bac(0x149)],_0x1537df=_0x54c073[_0xd88bac(0x194)];tgBot[_0xd88bac(0x1db)](_0x54c073['id'])[_0xd88bac(0x26d)](async()=>{const _0x3f6d6b=_0xd88bac;_0x1ed9be==_0x3f6d6b(0x23b)&&(await tgBot[_0x3f6d6b(0x1b2)](_0x1537df['chat']['id'],_0x3f6d6b(0x28f))[_0x3f6d6b(0x25f)](_0x1c7d13=>{telegramError(_0x1c7d13);}),updateBB(_0x3f6d6b(0x28a))),_0x1ed9be=='no'&&await tgBot[_0x3f6d6b(0x1b2)](_0x1537df[_0x3f6d6b(0x12d)]['id'],_0x3f6d6b(0x117))[_0x3f6d6b(0x25f)](_0x5a9070=>{telegramError(_0x5a9070);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0xc9a6bf(0x2d2)](/\/reinstall/,async _0x3aee43=>{const _0xc01381=_0xc9a6bf;if(!validateTelegram(_0x3aee43))return;tgBot[_0xc01381(0x1ff)](_0xc01381(0x273)),!validInstallation?tgBot[_0xc01381(0x1b2)](_0x3aee43[_0xc01381(0x12d)]['id'],_0xc01381(0x206))['catch'](_0x451a75=>{telegramError(_0x451a75);}):(tgBot[_0xc01381(0x1b2)](_0x3aee43[_0xc01381(0x12d)]['id'],_0xc01381(0x11d),{'reply_markup':{'inline_keyboard':[[{'text':_0xc01381(0x15d),'callback_data':_0xc01381(0x23b)},{'text':'No','callback_data':'no'}]]}})[_0xc01381(0x25f)](_0x40a97a=>{telegramError(_0x40a97a);}),tgBot['on']('callback_query',async _0x594130=>{const _0xb01936=_0xc01381,_0x4c44f9=_0x594130[_0xb01936(0x149)],_0x341dac=_0x594130[_0xb01936(0x194)];tgBot[_0xb01936(0x1db)](_0x594130['id'])[_0xb01936(0x26d)](async()=>{const _0x3411ff=_0xb01936;_0x4c44f9==_0x3411ff(0x23b)&&(await tgBot[_0x3411ff(0x1b2)](_0x341dac['chat']['id'],_0x3411ff(0x2da))[_0x3411ff(0x25f)](_0x1d2ad1=>{telegramError(_0x1d2ad1);}),updateBB(_0x3411ff(0x141))),_0x4c44f9=='no'&&await tgBot[_0x3411ff(0x1b2)](_0x341dac['chat']['id'],_0x3411ff(0x1e1))[_0x3411ff(0x25f)](_0x495510=>{telegramError(_0x495510);});}),tgBot['removeListener'](_0xb01936(0x273));}));}),tgBot[_0xc9a6bf(0x2d2)](/\/toggle/,_0x5e32c0=>{const _0x21a4ed=_0xc9a6bf;if(!validateTelegram(_0x5e32c0))return;tgBot[_0x21a4ed(0x1ff)](_0x21a4ed(0x273));const _0x4a3019=getBotsWithMode();if(_0x4a3019['length']==0x0)tgBot[_0x21a4ed(0x1b2)](_0x5e32c0['chat']['id'],_0x21a4ed(0x2c5))[_0x21a4ed(0x25f)](_0x152c3b=>{telegramError(_0x152c3b);});else{let _0x5ce338=[],_0x29e519=[];const _0xcd48c5=0x2;let _0x510cf1=0x0;_0x4a3019[_0x21a4ed(0x210)]((_0x2d3db1,_0x28866b)=>{const _0x23ff8c=_0x21a4ed;if(_0x28866b%_0xcd48c5==0x0)_0x29e519=[];_0x29e519[_0x23ff8c(0x29e)]({'text':_0x23ff8c(0x231)+_0x2d3db1[_0x23ff8c(0x25c)]+'\x20('+_0x2d3db1['mode']+')','callback_data':_0x2d3db1[_0x23ff8c(0x25c)]}),_0x28866b%_0xcd48c5==0x0&&(_0x5ce338[_0x510cf1]=_0x29e519,_0x510cf1++);}),tgBot[_0x21a4ed(0x1b2)](_0x5e32c0['chat']['id'],_0x21a4ed(0x19a),{'reply_markup':{'inline_keyboard':_0x5ce338}})[_0x21a4ed(0x25f)](_0xe3b7d1=>{telegramError(_0xe3b7d1);}),tgBot['on'](_0x21a4ed(0x273),async _0x511499=>{const _0x10d322=_0x21a4ed,_0x1a5170=_0x511499['data'],_0x355096=_0x511499[_0x10d322(0x194)];tgBot[_0x10d322(0x1db)](_0x511499['id'])['then'](async()=>{const _0x19aea5=_0x10d322,_0x215e70=_0x4a3019[_0x19aea5(0x26e)](_0x269689=>_0x269689[_0x19aea5(0x25c)]==_0x1a5170),_0x50d509=_0x215e70[_0x19aea5(0x223)]==_0x19aea5(0x164)?_0x19aea5(0x262):_0x19aea5(0x164);tgBot[_0x19aea5(0x1b2)](_0x355096[_0x19aea5(0x12d)]['id'],_0x19aea5(0x19c)+_0x1a5170+_0x19aea5(0x183)+_0x50d509+_0x19aea5(0x20b))[_0x19aea5(0x25f)](_0x26958d=>{telegramError(_0x26958d);}),toggleBotMode(_0x1a5170);}),tgBot[_0x10d322(0x1ff)]('callback_query');});}}),tgBot['onText'](/\/names/,_0x458c93=>{const _0x589380=_0xc9a6bf;if(!validateTelegram(_0x458c93))return;let _0x4363cb='';config[_0x589380(0x210)](_0x216401=>{const _0x25df0a=_0x589380;_0x4363cb+=_0x25df0a(0x231)+_0x216401['botID']+':\x20'+_0x216401[_0x25df0a(0x27e)]+'\x0a';}),tgBot[_0x589380(0x1b2)](_0x458c93[_0x589380(0x12d)]['id'],_0x4363cb,{'parse_mode':_0x589380(0x1c5)})[_0x589380(0x25f)](_0x934418=>{telegramError(_0x934418);});}),tgBot[_0xc9a6bf(0x2d2)](/\/disable/,_0x40b538=>{const _0x71757d=_0xc9a6bf;if(!validateTelegram(_0x40b538))return;tgBot[_0x71757d(0x1b2)](_0x40b538[_0x71757d(0x12d)]['id'],_0x71757d(0x138))[_0x71757d(0x25f)](_0x2b418d=>{telegramError(_0x2b418d);}),updateSetting(_0x71757d(0x1c8),![]);}),tgBot[_0xc9a6bf(0x2d2)](/\/help/,_0x213c96=>{const _0x5e4748=_0xc9a6bf;if(!validateTelegram(_0x213c96))return;tgBot['sendMessage'](_0x213c96[_0x5e4748(0x12d)]['id'],_0x5c3655)[_0x5e4748(0x25f)](_0x5da92f=>{telegramError(_0x5da92f);});}),tgBot['on']('polling_error',_0xdd0f25=>{const _0x10a65a=_0xc9a6bf;_0xdd0f25[_0x10a65a(0x1ed)]()[_0x10a65a(0x252)]('404\x20Not\x20Found')&&(logger[_0x10a65a(0x12e)]('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x10a65a(0x232))[_0x10a65a(0x2d4)](_0x10a65a(0x1a8),_0x10a65a(0x2a5)));}),process[_0xc9a6bf(0x2b6)](_0xc9a6bf(0x122),()=>{const _0x21109b=_0xc9a6bf;if(tgBot)tgBot['stopPolling']();process[_0x21109b(0x215)](0x1);}),process[_0xc9a6bf(0x2b6)](_0xc9a6bf(0x1b8),()=>{const _0xa8f638=_0xc9a6bf;if(tgBot)tgBot['stopPolling']();process[_0xa8f638(0x215)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x266d13,_0x229061){const _0x40b595=_0x2d602e;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x40b595(0x27b)||(_0x229061['type']=='error'||_0x229061[_0x40b595(0x27a)]==_0x40b595(0x1f6)||_0x229061[_0x40b595(0x27a)]==_0x40b595(0x180))&&settings[_0x40b595(0x1ae)]=='alerts'||_0x229061['type']==_0x40b595(0x26a)&&settings[_0x40b595(0x1ae)]==_0x40b595(0x238)){if(tgBot&&settings['telegramChatId']){if(_0x229061[_0x40b595(0x10b)])tgBot[_0x40b595(0x1b2)](settings[_0x40b595(0x154)],_0x229061[_0x40b595(0x27e)]+_0x40b595(0x2aa)+_0x229061[_0x40b595(0x130)])['catch'](_0x14a7b9=>{telegramError(_0x14a7b9);});else tgBot[_0x40b595(0x1b2)](settings[_0x40b595(0x154)],_0x40b595(0x231)+_0x266d13+_0x40b595(0x2aa)+_0x229061[_0x40b595(0x130)])[_0x40b595(0x25f)](_0x109cd7=>{telegramError(_0x109cd7);});}}}}async function sendTelegramMsg(_0x3da146,_0xadeaa3=_0x2d602e(0x1c5)){const _0x5c9b7a=_0x2d602e;return settings[_0x5c9b7a(0x1c8)]&&tgBot&&settings[_0x5c9b7a(0x154)]?(await tgBot[_0x5c9b7a(0x1b2)](settings[_0x5c9b7a(0x154)],_0x3da146,{'parse_mode':_0xadeaa3})[_0x5c9b7a(0x25f)](_0x3822cd=>{telegramError(_0x3822cd);}),!![]):![];}function getDeviceWithIp(_0x31257f){return devices['find'](_0x2019a9=>_0x2019a9['ip']===_0x31257f);}function temporaryAccess2FA(_0x1b1d2f,_0xfe3e5a){const _0x19d50f=_0x2d602e;let _0x44b2be=new Date(),_0x1a526e=![];if(lastIpApproval){if(_0x44b2be-lastIpApproval<0x1388)_0x1a526e=!![];}lastIpApproval=new Date();if(_0x1a526e)return;tgBot&&settings[_0x19d50f(0x154)]&&(tgBot[_0x19d50f(0x1ff)](_0x19d50f(0x273)),tgBot['sendMessage'](settings[_0x19d50f(0x154)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0xfe3e5a)[_0x19d50f(0x114)]+_0x19d50f(0x242),{'parse_mode':_0x19d50f(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x19d50f(0x23c),'callback_data':'5'},{'text':_0x19d50f(0x1a9),'callback_data':'15'},{'text':_0x19d50f(0x1d1),'callback_data':'30'},{'text':'reject','callback_data':_0x19d50f(0x285)}]]}})[_0x19d50f(0x25f)](_0x1e93cd=>{telegramError(_0x1e93cd);}),tgBot['on']('callback_query',async _0x44bf9f=>{const _0x342c12=_0x19d50f,_0x275954=_0x44bf9f[_0x342c12(0x149)],_0x534842=_0x44bf9f[_0x342c12(0x194)];tgBot['answerCallbackQuery'](_0x44bf9f['id'])[_0x342c12(0x26d)](async()=>{const _0x4368a3=_0x342c12;devices[_0x1b1d2f][_0x4368a3(0x136)]={'clientip':_0xfe3e5a,'timestamp':new Date()[_0x4368a3(0x24c)](),'expiry':_0x275954},_0x275954!=_0x4368a3(0x285)?(await tgBot[_0x4368a3(0x1b2)](_0x534842[_0x4368a3(0x12d)]['id'],_0x4368a3(0x2df)+_0x275954+_0x4368a3(0x1d9),{'parse_mode':_0x4368a3(0x1c5)})[_0x4368a3(0x25f)](_0xed9b9a=>{telegramError(_0xed9b9a);}),io['to'](_0x1b1d2f)[_0x4368a3(0x2d4)](_0x4368a3(0x1cb),{'access':{'allow':![],'reason':_0x4368a3(0x1b7),'token':null}})):(await tgBot[_0x4368a3(0x1b2)](_0x534842[_0x4368a3(0x12d)]['id'],_0x4368a3(0x28b))[_0x4368a3(0x25f)](_0x28538f=>{telegramError(_0x28538f);}),io['to'](_0x1b1d2f)[_0x4368a3(0x2d4)](_0x4368a3(0x1cb),{'access':{'allow':![],'reason':_0x4368a3(0x172),'token':null}}));}),tgBot[_0x342c12(0x1ff)](_0x342c12(0x273));}));}function loginAccess2FA(_0x4a9824,_0x32dbdf){const _0x2be3ff=_0x2d602e;tgBot&&settings[_0x2be3ff(0x154)]&&(tgBot[_0x2be3ff(0x1ff)](_0x2be3ff(0x273)),tgBot[_0x2be3ff(0x1b2)](settings['telegramChatId'],_0x2be3ff(0x29d)+normalizeIP(_0x32dbdf)[_0x2be3ff(0x114)]+_0x2be3ff(0x242),{'parse_mode':_0x2be3ff(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x2be3ff(0xf9),'callback_data':loginExpiry},{'text':_0x2be3ff(0x285),'callback_data':_0x2be3ff(0x285)}]]}})[_0x2be3ff(0x25f)](_0x104276=>{telegramError(_0x104276);}),tgBot['on'](_0x2be3ff(0x273),async _0x2cc005=>{const _0x43a15a=_0x2be3ff,_0x7e4b1e=_0x2cc005['data'],_0x510885=_0x2cc005[_0x43a15a(0x194)];tgBot[_0x43a15a(0x1db)](_0x2cc005['id'])['then'](async()=>{const _0x38f4a8=_0x43a15a;devices[_0x4a9824]['telegram2FaApproval']={'clientip':_0x32dbdf,'timestamp':new Date()[_0x38f4a8(0x24c)](),'expiry':_0x7e4b1e},_0x7e4b1e!=_0x38f4a8(0x285)?(await tgBot[_0x38f4a8(0x1b2)](_0x510885[_0x38f4a8(0x12d)]['id'],_0x38f4a8(0x255),{'parse_mode':_0x38f4a8(0x1c5)})[_0x38f4a8(0x25f)](_0x470fc1=>{telegramError(_0x470fc1);}),io['to'](_0x4a9824)[_0x38f4a8(0x2d4)]('status',{'access':{'allow':![],'reason':_0x38f4a8(0x1b7),'token':null}})):(await tgBot[_0x38f4a8(0x1b2)](_0x510885[_0x38f4a8(0x12d)]['id'],_0x38f4a8(0x2b7))[_0x38f4a8(0x25f)](_0x30ad56=>{telegramError(_0x30ad56);}),io['to'](_0x4a9824)[_0x38f4a8(0x2d4)](_0x38f4a8(0x1cb),{'access':{'allow':![],'reason':_0x38f4a8(0x29b),'token':null}}));}),tgBot[_0x43a15a(0x1ff)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x35fc98=_0x2d602e;return dbConfig[_0x35fc98(0x235)](_0x35fc98(0x1a2))[_0x35fc98(0x11c)]('botID')[_0x35fc98(0x236)]({'status':_0x35fc98(0x19f)})[_0x35fc98(0x118)]()||[];}function getDisabledBots(){const _0x5d4318=_0x2d602e;return dbConfig[_0x5d4318(0x235)]('bots')[_0x5d4318(0x11c)](_0x5d4318(0x25c))[_0x5d4318(0x236)]({'status':_0x5d4318(0x21e)})[_0x5d4318(0x118)]()||[];}function getBotAttributes(_0x520893){const _0x5e556e=_0x2d602e;let _0x9a7906={};const _0x24f093=configpath+'bot-'+_0x520893+'-config.json',_0x47137d=fs[_0x5e556e(0x182)](_0x24f093);if(_0x47137d){const _0x4160db=fs[_0x5e556e(0x1d3)](_0x24f093);try{const _0x674a9d=JSON[_0x5e556e(0x2bb)](_0x4160db),_0x453b94=_0x674a9d?_0x674a9d[_0x5e556e(0x203)][0x0][_0x5e556e(0x260)]:![];_0x9a7906[_0x5e556e(0x223)]=_0x453b94?_0x5e556e(0x164):_0x5e556e(0x262),_0x9a7906[_0x5e556e(0x27e)]=_0x674a9d?_0x674a9d['bot'][0x0][_0x5e556e(0x27e)]:'Bot\x20'+_0x520893;}catch(_0x4ddf0f){_0x9a7906[_0x5e556e(0x223)]=_0x5e556e(0x262),_0x9a7906[_0x5e556e(0x27e)]=_0x5e556e(0x231)+_0x520893;}}else _0x9a7906[_0x5e556e(0x223)]=_0x5e556e(0x262),_0x9a7906['botname']=_0x5e556e(0x231)+_0x520893;return _0x9a7906;}function getBotsWithMode(){const _0xb65e5=_0x2d602e,_0x30ae5a=dbConfig['get']('bots')[_0xb65e5(0x11c)](_0xb65e5(0x25c))[_0xb65e5(0x118)]()||[];return _0x30ae5a[_0xb65e5(0x210)](_0x241b98=>{const _0x12f464=_0xb65e5;let _0x573e0c=getBotAttributes(_0x241b98[_0x12f464(0x25c)]);_0x241b98['mode']=_0x573e0c['mode'];}),_0x30ae5a;}function getBotExchanges(){const _0x4b5689=_0x2d602e;let _0x233a54=[];const _0x4eeba9=dbConfig['get'](_0x4b5689(0x1a2))['sortBy'](_0x4b5689(0x25c))['value']()||[];_0x4eeba9['forEach'](_0x1226d2=>{const _0x327610=_0x4b5689;if(_0x1226d2[_0x327610(0x1cb)]==_0x327610(0x19f)){const _0x530a6c=configpath+_0x327610(0x159)+_0x1226d2[_0x327610(0x25c)]+_0x327610(0xfe),_0x57c2e8=fs[_0x327610(0x182)](_0x530a6c);let _0x20c534;if(_0x57c2e8){const _0x2024f2=fs['readFileSync'](_0x530a6c);try{const _0x1506c3=JSON[_0x327610(0x2bb)](_0x2024f2);_0x20c534=_0x1506c3?_0x1506c3[_0x327610(0x203)][0x0][_0x327610(0x1e8)]:null;}catch(_0x52eb52){}}if(_0x20c534)_0x233a54[_0x327610(0x29e)](_0x20c534);}});const _0xda7a9f=[...new Set(_0x233a54)][_0x4b5689(0x160)]();return _0xda7a9f;}async function initUser(){const _0xdea16f=_0x2d602e;if(!settings[_0xdea16f(0x161)]){const _0x5b19e8=uuidRandom();mixpanel[_0xdea16f(0x188)](_0x5b19e8),updateSetting(_0xdea16f(0x161),_0x5b19e8);}}async function initSecure(){const _0x23a106=_0x2d602e;let _0x374851=getSecure();if(!_0x374851[_0x23a106(0x174)](_0x23a106(0x1b3))){let _0x1e9d65=await generateKeys();_0x374851[_0x23a106(0x1e7)]=_0x1e9d65['publicKey'],_0x374851[_0x23a106(0x19b)]=_0x1e9d65[_0x23a106(0x19b)],_0x374851[_0x23a106(0x1b3)]=crypto['randomBytes'](0x20)[_0x23a106(0x1ed)](_0x23a106(0x204));;storeSecure(_0x374851);}}function getSettings(){const _0x2f6354=_0x2d602e;return dbSettings['get'](_0x2f6354(0x102))[_0x2f6354(0x118)]()||{};}function getSecure(){const _0x54a4a3=_0x2d602e;return dbSecure[_0x54a4a3(0x235)](_0x54a4a3(0x2c2))[_0x54a4a3(0x118)]()||{};}function getBlacklist(){const _0x341534=_0x2d602e;return dbSecure['get']('blacklist')[_0x341534(0x118)]()||[];}function broadcastToBots(_0x94673b,_0x76792e){const _0x152851=_0x2d602e;config[_0x152851(0x210)](_0x10037d=>{const _0x369bd6=_0x152851;if(_0x10037d[_0x369bd6(0x1cb)]==_0x369bd6(0x19f)&&_0x10037d[_0x369bd6(0x1d2)]=='running'||_0x10037d[_0x369bd6(0x1cb)]=='new'&&_0x10037d['live']=='running'){if(pid[_0x10037d[_0x369bd6(0x25c)]])pid[_0x10037d[_0x369bd6(0x25c)]]['send']({[_0x94673b]:_0x76792e});}});}function storeSettings(_0x23e0ed,_0x551afd=![]){const _0x102c14=_0x2d602e;_0x23e0ed={...settings,..._0x23e0ed};if(_0x551afd&&_0x23e0ed[_0x102c14(0x123)]!=_0x102c14(0x264)&&_0x23e0ed[_0x102c14(0x123)]!=_0x102c14(0x11b)&&_0x23e0ed[_0x102c14(0x123)]!=''){const _0x420138=crypt[_0x102c14(0x146)](secure[_0x102c14(0x19b)],_0x23e0ed[_0x102c14(0x123)])['message']['split']('@')[0x0],_0x526c85=bcrypt[_0x102c14(0x2a9)](_0x420138,saltRounds);_0x23e0ed={..._0x23e0ed,'bbPassword':_0x526c85};}if(_0x551afd&&_0x23e0ed[_0x102c14(0x15e)]!='************'&&_0x23e0ed[_0x102c14(0x15e)]!=_0x102c14(0x11b)&&_0x23e0ed[_0x102c14(0x15e)]!=''){const _0x5975c1=crypt[_0x102c14(0x146)](secure[_0x102c14(0x19b)],_0x23e0ed[_0x102c14(0x15e)])[_0x102c14(0x194)][_0x102c14(0x272)]('@')[0x0];_0x23e0ed={..._0x23e0ed,'telegramToken':_0x5975c1};}const _0x221b97=_0x23e0ed[_0x102c14(0x15e)]!=_0x102c14(0x264)&&_0x23e0ed[_0x102c14(0x15e)]!=settings[_0x102c14(0x15e)]||_0x23e0ed[_0x102c14(0x1e2)]!=settings['telegramUsername'],_0x2f95a9=_0x23e0ed[_0x102c14(0x15e)]==''||_0x23e0ed[_0x102c14(0x1e2)]=='';if(_0x221b97)_0x23e0ed[_0x102c14(0x1ae)]='all';for(const [_0x576e66,_0x1ae076]of Object['entries'](_0x23e0ed)){if(_0x576e66=='telegramToken'&&_0x1ae076==_0x102c14(0x264)){_0x23e0ed[_0x102c14(0x15e)]=settings[_0x102c14(0x15e)];continue;};if(_0x576e66==_0x102c14(0x123)&&_0x1ae076=='************'){_0x23e0ed[_0x102c14(0x123)]=settings['bbPassword'];continue;};dbSettings[_0x102c14(0x22b)](_0x102c14(0x1e4)+_0x576e66,_0x1ae076)[_0x102c14(0x13b)]();}settings=_0x23e0ed,io['to'](_0x102c14(0x232))['emit']('settings',cleanSettings()),broadcastToBots(_0x102c14(0x152),settings[_0x102c14(0x152)]),broadcastToBots(_0x102c14(0x207),settings[_0x102c14(0x207)]);if(_0x221b97&&!_0x2f95a9)initTelegram();if(_0x221b97&&_0x2f95a9)disableTelegram();getAllClients()[_0x102c14(0x210)](_0x35ce88=>{const _0x45e510=_0x102c14;getSocket(_0x35ce88['id'])['emit'](_0x45e510(0x1cb),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x5d5fab,_0x38e1c2){const _0x1d3262=_0x2d602e;dbSettings[_0x1d3262(0x22b)](_0x1d3262(0x1e4)+_0x5d5fab,_0x38e1c2)[_0x1d3262(0x13b)](),settings=getSettings(),io['to'](_0x1d3262(0x232))[_0x1d3262(0x2d4)](_0x1d3262(0x102),cleanSettings());}function storeSecure(_0x3fa995){const _0x385dfa=_0x2d602e;dbSecure[_0x385dfa(0x235)](_0x385dfa(0x2c2))['push'](_0x3fa995)[_0x385dfa(0x13b)](),secure=_0x3fa995;}function addBlacklist(_0x55b9e3){const _0x142367=_0x2d602e;cleanBlacklist();let _0x5ea35c;devices[_0x55b9e3][_0x142367(0x136)]?_0x5ea35c=Math[_0x142367(0x1eb)](devices[_0x55b9e3][_0x142367(0x136)]['expiry'],loginExpiry):_0x5ea35c=loginExpiry,dbSecure[_0x142367(0x235)](_0x142367(0x1bf))[_0x142367(0x29e)]({'expiry':new Date()[_0x142367(0x24c)]()+_0x5ea35c*0x3c*0x3e8,'token':devices[_0x55b9e3][_0x142367(0x209)]['token']})['write'](),blacklist=dbSecure['get'](_0x142367(0x1bf))[_0x142367(0x118)]();}function cleanBlacklist(){const _0xffadd=_0x2d602e;let _0xfa7f7d=dbSecure[_0xffadd(0x235)](_0xffadd(0x1bf))[_0xffadd(0x2c9)]()[_0xffadd(0x118)](),_0x4d5d83=new Date()[_0xffadd(0x24c)]();_0xfa7f7d[_0xffadd(0x210)](_0x3b1fc4=>{const _0x356c00=_0xffadd;_0x3b1fc4['expiry']<_0x4d5d83&&dbSecure[_0x356c00(0x235)](_0x356c00(0x1bf))['remove']({'expiry':_0x3b1fc4['expiry']})['write']();});}function initStates(){let _0xc94439=getConfiguration();_0xc94439['forEach'](_0x896c3c=>{const _0x485059=_0x40ff;_0x896c3c[_0x485059(0x1d2)]=_0x485059(0x205);}),storeConfiguration(_0xc94439);}function onKeys(){const _0x16b998=new RSA();return new Promise(_0x5e2f1b=>{const _0x5ee169=_0x40ff;_0x16b998[_0x5ee169(0x257)]()[_0x5ee169(0x26d)](_0x2889be=>{_0x5e2f1b(_0x2889be);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x6a97ac=_0x2d602e;let _0x106921=getSettings(),_0x4356d3=![];!_0x106921['hasOwnProperty']('lastmsgtelegram')&&(_0x106921[_0x6a97ac(0x217)]=0x0,_0x4356d3=!![]);!_0x106921['hasOwnProperty'](_0x6a97ac(0x263))&&(_0x106921['lastmsgemitted']=0x0,_0x4356d3=!![]);!_0x106921[_0x6a97ac(0x174)]('latestversion')&&(_0x106921[_0x6a97ac(0x14c)]=_0x6a97ac(0x2cb),_0x4356d3=!![]);!_0x106921[_0x6a97ac(0x174)]('onepagemode')&&(_0x106921[_0x6a97ac(0x207)]=![],_0x4356d3=!![]);if(_0x4356d3)storeSettings(_0x106921);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x3ad394=>{const _0x5edd5e=_0x6a97ac;if(!_0x3ad394[_0x5edd5e(0x1a5)]()){if(!_0x3ad394[_0x5edd5e(0x13a)]['startsWith'](_0x5edd5e(0x250)))fs[_0x5edd5e(0x22f)](configbackuppath+_0x3ad394[_0x5edd5e(0x13a)]);}else fs[_0x5edd5e(0x2b2)](configbackuppath+_0x3ad394['name'],{'recursive':!![]});});}catch(_0x3b4c47){logger[_0x6a97ac(0x21d)](_0x6a97ac(0x1e5),_0x3b4c47);}}function storeConfiguration(_0x59569e){const _0x5e7058=_0x2d602e;dbConfig[_0x5e7058(0x235)]('bots')['remove']()[_0x5e7058(0x13b)](),_0x59569e[_0x5e7058(0x210)](_0x54980a=>{delete _0x54980a['mode'];}),dbConfig[_0x5e7058(0x235)](_0x5e7058(0x1a2))[_0x5e7058(0x29e)](..._0x59569e)['write'](),config=_0x59569e;}function resetPassword(){const _0x5d86e9=_0x2d602e;tgBot&&settings[_0x5d86e9(0x154)]&&(tgBot[_0x5d86e9(0x1ff)](_0x5d86e9(0x273)),tgBot[_0x5d86e9(0x1b2)](settings[_0x5d86e9(0x154)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x5d86e9(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x5d86e9(0x23b),'callback_data':_0x5d86e9(0x23b)},{'text':'no','callback_data':'no'}]]}})[_0x5d86e9(0x25f)](_0x5111dd=>{telegramError(_0x5111dd);}),tgBot['on'](_0x5d86e9(0x273),async _0x47ac24=>{const _0x1ebb8c=_0x5d86e9,_0x83ef4b=_0x47ac24['data'],_0x1c4ba6=_0x47ac24['message'];tgBot['answerCallbackQuery'](_0x47ac24['id'])['then'](async()=>{const _0x5e0fb8=_0x40ff;if(_0x83ef4b!='no'){const _0x4066e5=0xf,_0x2ae151=_0x5e0fb8(0x1d4),_0x93e36=Array['from'](crypto[_0x5e0fb8(0x25a)](new Uint32Array(_0x4066e5)))['map'](_0x53bc70=>_0x2ae151[_0x53bc70%_0x2ae151[_0x5e0fb8(0x16f)]])[_0x5e0fb8(0x1c1)](''),_0x1ac0f0=bcrypt[_0x5e0fb8(0x2a9)](_0x93e36,saltRounds);storeSettings({'bbPassword':_0x1ac0f0}),await tgBot[_0x5e0fb8(0x1b2)](_0x1c4ba6[_0x5e0fb8(0x12d)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x93e36,{'parse_mode':_0x5e0fb8(0x1c5)})[_0x5e0fb8(0x25f)](_0x5cda93=>{telegramError(_0x5cda93);});}else await tgBot[_0x5e0fb8(0x1b2)](_0x1c4ba6[_0x5e0fb8(0x12d)]['id'],_0x5e0fb8(0x1ee))['catch'](_0x300588=>{telegramError(_0x300588);});}),tgBot[_0x1ebb8c(0x1ff)](_0x1ebb8c(0x273));}));}async function confirmRestore(_0xd4f07c,_0x7874c5){const _0x14a7c0=_0x2d602e;io['to']('botmanager')['emit'](_0x14a7c0(0x1a8),_0x14a7c0(0x1bc),_0x14a7c0(0x180)),tgBot&&settings[_0x14a7c0(0x154)]&&(tgBot[_0x14a7c0(0x1ff)](_0x14a7c0(0x273)),await tgBot[_0x14a7c0(0x1b2)](settings[_0x14a7c0(0x154)],_0x14a7c0(0x244),{'parse_mode':_0x14a7c0(0x1c5),'reply_markup':{'inline_keyboard':[[{'text':_0x14a7c0(0x23b),'callback_data':_0x14a7c0(0x23b)},{'text':'no','callback_data':'no'}]]}})[_0x14a7c0(0x25f)](_0x4b9943=>{telegramError(_0x4b9943);}),tgBot['on'](_0x14a7c0(0x273),async _0x12cd0e=>{const _0x520eab=_0x14a7c0,_0x58bc2b=_0x12cd0e[_0x520eab(0x149)],_0x122937=_0x12cd0e[_0x520eab(0x194)];tgBot[_0x520eab(0x1db)](_0x12cd0e['id'])[_0x520eab(0x26d)](async()=>{const _0x1d2701=_0x520eab;_0x58bc2b==_0x1d2701(0x23b)?(await tgBot[_0x1d2701(0x1b2)](_0x122937[_0x1d2701(0x12d)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x1d2701(0x1c5)})[_0x1d2701(0x25f)](_0xfc0e12=>{telegramError(_0xfc0e12);}),unzipFile(_0xd4f07c,_0x7874c5)):(logger['debug'](_0x1d2701(0x133)),await tgBot[_0x1d2701(0x1b2)](_0x122937[_0x1d2701(0x12d)]['id'],_0x1d2701(0x133))[_0x1d2701(0x25f)](_0x29e002=>{telegramError(_0x29e002);}));}),tgBot[_0x520eab(0x1ff)]('callback_query');}));}function getServerTime(){const _0x4e9001=_0x2d602e,_0xba5564=new Date();return _0xba5564['getFullYear']()+'/'+(_0xba5564[_0x4e9001(0x177)]()+0x1)[_0x4e9001(0x1ed)]()[_0x4e9001(0x277)](0x2,'0')+'/'+_0xba5564[_0x4e9001(0x2b0)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0xba5564[_0x4e9001(0x104)]()[_0x4e9001(0x1ed)]()[_0x4e9001(0x277)](0x2,'0')+':'+_0xba5564[_0x4e9001(0x227)]()[_0x4e9001(0x1ed)]()[_0x4e9001(0x277)](0x2,'0')+':'+_0xba5564[_0x4e9001(0x22e)]()[_0x4e9001(0x1ed)]()[_0x4e9001(0x277)](0x2,'0');}function getTimeStamp(){const _0x53d695=_0x2d602e,_0x43c9f3=shiftedTime();return _0x43c9f3['getFullYear']()+'/'+(_0x43c9f3[_0x53d695(0x177)]()+0x1)['toString']()[_0x53d695(0x277)](0x2,'0')+'/'+_0x43c9f3[_0x53d695(0x2b0)]()['toString']()[_0x53d695(0x277)](0x2,'0')+'\x20'+_0x43c9f3[_0x53d695(0x104)]()['toString']()[_0x53d695(0x277)](0x2,'0')+':'+_0x43c9f3[_0x53d695(0x227)]()[_0x53d695(0x1ed)]()['padStart'](0x2,'0')+':'+_0x43c9f3[_0x53d695(0x22e)]()[_0x53d695(0x1ed)]()[_0x53d695(0x277)](0x2,'0');}function getCleanTimeStamp(){const _0xf603bb=_0x2d602e,_0x2a417e=shiftedTime();return _0x2a417e['getFullYear']()+(_0x2a417e[_0xf603bb(0x177)]()+0x1)[_0xf603bb(0x1ed)]()[_0xf603bb(0x277)](0x2,'0')+_0x2a417e['getDate']()['toString']()[_0xf603bb(0x277)](0x2,'0')+'-'+_0x2a417e[_0xf603bb(0x104)]()[_0xf603bb(0x1ed)]()[_0xf603bb(0x277)](0x2,'0')+_0x2a417e['getMinutes']()['toString']()[_0xf603bb(0x277)](0x2,'0')+_0x2a417e[_0xf603bb(0x22e)]()[_0xf603bb(0x1ed)]()[_0xf603bb(0x277)](0x2,'0');}function shiftedTime(){const _0x20bb84=_0x2d602e,_0x3c8417=new Date();let _0x5d6b83=_0x3c8417;if(settings['timeshift']&&settings[_0x20bb84(0x152)]!==0x0)_0x5d6b83=fns[_0x20bb84(0x13e)](_0x3c8417,{'hours':settings[_0x20bb84(0x152)]});return _0x5d6b83;}function startScheduler(){const _0x5e3fc1=_0x2d602e,_0xf6ee74=new Date()[_0x5e3fc1(0x153)](),_0x1d79fb=shiftedTime()[_0x5e3fc1(0x104)]();_0x1d79fb==0x4&&backupConfigFiles();_0x1d79fb==0x0&&rotateLogFiles();_0xf6ee74%0x6==0x0&&triggerAnalytics();_0xf6ee74%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x5e5ddd){const _0x10384c=_0x2d602e;logger[_0x10384c(0x21d)](_0x10384c(0x1ac)+_0x5e5ddd);const _0x56615c=getBotsWithMode();_0x56615c[_0x10384c(0x16f)]>0x0?confirmRestore(configbackuppath,_0x5e5ddd):unzipFile(configbackuppath,_0x5e5ddd);}async function getBackupFiles(_0x1d6ed0=null){const _0x3eba22=_0x2d602e;let _0x590d23=[],_0x509f3d=fs[_0x3eba22(0x1b5)](configbackuppath,{'withFileTypes':!![]});_0x509f3d[_0x3eba22(0x160)]((_0x2919cb,_0x5b76ce)=>_0x2919cb[_0x3eba22(0x13a)]<_0x5b76ce[_0x3eba22(0x13a)]?0x1:_0x5b76ce['name']<_0x2919cb[_0x3eba22(0x13a)]?-0x1:0x0),_0x509f3d['forEach'](_0x5840ad=>{const _0x50a621=_0x3eba22;if(!_0x5840ad[_0x50a621(0x1a5)]()&&_0x5840ad[_0x50a621(0x13a)]['startsWith'](_0x50a621(0x250))&&_0x5840ad[_0x50a621(0x13a)][_0x50a621(0x128)](_0x50a621(0x1fd))){const _0x712549=formatDate(fs[_0x50a621(0x239)](configbackuppath+_0x5840ad[_0x50a621(0x13a)])[_0x50a621(0x2be)]);_0x590d23[_0x50a621(0x29e)]({'name':_0x5840ad['name'],'mtime':_0x712549});}});if(_0x1d6ed0)io['to'](_0x1d6ed0)['emit'](_0x3eba22(0x21a),_0x590d23);else return _0x590d23;}async function backupConfigFiles(){const _0x33b4a3=_0x2d602e;await zipFiles(_0x33b4a3(0x2cf));const _0x138031=getCleanTimeStamp();fs[_0x33b4a3(0x1fa)](zippath+_0x33b4a3(0x2ae),configbackuppath+(_0x33b4a3(0x250)+_0x138031+_0x33b4a3(0x1fd)));let _0xda7c1d=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0xda7c1d[_0x33b4a3(0x160)]((_0x759cf1,_0x565a11)=>_0x759cf1[_0x33b4a3(0x13a)]<_0x565a11[_0x33b4a3(0x13a)]?0x1:_0x565a11[_0x33b4a3(0x13a)]<_0x759cf1['name']?-0x1:0x0),_0xda7c1d[_0x33b4a3(0x16f)]>maxBackups&&fs[_0x33b4a3(0x22f)](configbackuppath+_0xda7c1d[_0xda7c1d[_0x33b4a3(0x16f)]-0x1][_0x33b4a3(0x13a)]);}function rotateLogFiles(){const _0x534157=_0x2d602e,_0x28ab8e=fs[_0x534157(0x239)](logspath+'output-000.log'),_0x2ba2f6=_0x28ab8e['size']/0x400;if(_0x2ba2f6>0x64){let _0xbf6354=fs[_0x534157(0x1b5)](logspath,{'withFileTypes':!![]});_0xbf6354[_0x534157(0x160)]((_0x39e8be,_0x4641a5)=>_0x39e8be['name']<_0x4641a5[_0x534157(0x13a)]?0x1:_0x4641a5['name']<_0x39e8be['name']?-0x1:0x0),_0xbf6354['forEach'](_0x2e1f62=>{const _0x5e88f4=_0x534157;if(_0x2e1f62[_0x5e88f4(0x13a)]==_0x5e88f4(0x290))fs[_0x5e88f4(0x1fa)](logspath+_0x2e1f62[_0x5e88f4(0x13a)],logspath+'output-003.log');if(_0x2e1f62['name']==_0x5e88f4(0x1c9))fs['copyFileSync'](logspath+_0x2e1f62[_0x5e88f4(0x13a)],logspath+'output-002.log');_0x2e1f62[_0x5e88f4(0x13a)]==_0x5e88f4(0x20d)&&(fs[_0x5e88f4(0x1fa)](logspath+_0x2e1f62['name'],logspath+_0x5e88f4(0x1c9)),fs[_0x5e88f4(0x1b6)](logspath+_0x2e1f62[_0x5e88f4(0x13a)],''));});}}async function zipFiles(_0xb21dd1){const _0x57167f=_0x2d602e;let _0xf3d598;if(_0xb21dd1==_0x57167f(0x219))_0xf3d598=logspath;if(_0xb21dd1==_0x57167f(0x139))_0xf3d598=configpath;if(_0xb21dd1==_0x57167f(0x2cf))_0xf3d598=configpath;let _0x4f8bf4=fs[_0x57167f(0x1b5)](_0xf3d598,{'withFileTypes':!![]});const _0x582d11=new require('node-zip')();_0x4f8bf4['forEach'](_0x59803a=>{const _0x1a78f4=_0x57167f;if(!_0x59803a[_0x1a78f4(0x1a5)]()){let _0x37733e=fs['readFileSync'](_0xf3d598+_0x59803a['name']);if(_0xb21dd1==_0x1a78f4(0x139)){const _0x1308d1=/^bot-[0-9]{3}-config.json$/,_0x57bf91=_0x1308d1[_0x1a78f4(0x208)](_0x59803a[_0x1a78f4(0x13a)]);if(_0x57bf91){const _0x4d15ef=JSON[_0x1a78f4(0x2bb)](_0x37733e);if(_0x4d15ef['bot'][0x0]){_0x4d15ef[_0x1a78f4(0x203)][0x0][_0x1a78f4(0x10f)]=_0x1a78f4(0x11b),_0x4d15ef[_0x1a78f4(0x203)][0x0]['apiSecret']='***';if(_0x4d15ef[_0x1a78f4(0x203)][0x0]['apiPassword'])_0x4d15ef['bot'][0x0]['apiPassword']=_0x1a78f4(0x11b);}_0x37733e=JSON[_0x1a78f4(0x2c4)](_0x4d15ef,null,0x2);}if(_0x59803a['name']==_0x1a78f4(0x21b)){const _0x1badfd=JSON[_0x1a78f4(0x2bb)](_0x37733e);if(_0x1badfd[_0x1a78f4(0x102)]['loginRequired'])_0x1badfd[_0x1a78f4(0x102)][_0x1a78f4(0x1fb)]=![];if(_0x1badfd[_0x1a78f4(0x102)][_0x1a78f4(0x123)])_0x1badfd[_0x1a78f4(0x102)]['bbPassword']=_0x1a78f4(0x11b);if(_0x1badfd['settings'][_0x1a78f4(0x15e)])_0x1badfd[_0x1a78f4(0x102)][_0x1a78f4(0x15e)]=_0x1a78f4(0x11b);if(_0x1badfd[_0x1a78f4(0x102)][_0x1a78f4(0x154)])_0x1badfd[_0x1a78f4(0x102)][_0x1a78f4(0x154)]=null;_0x37733e=JSON[_0x1a78f4(0x2c4)](_0x1badfd,null,0x2);}if(_0x59803a['name']!=_0x1a78f4(0x108))_0x582d11['file'](_0x59803a['name'],_0x37733e);}else _0x582d11[_0x1a78f4(0x251)](_0x59803a['name'],_0x37733e);}});const _0x51682b=_0x582d11[_0x57167f(0x192)]({'base64':![],'compression':'DEFLATE'});fs[_0x57167f(0x1b6)](zippath+(_0xb21dd1+'.zip'),_0x51682b,_0x57167f(0x23a));}async function unzipFile(_0x2856dd,_0x219128){const _0x527934=_0x2d602e;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x527934(0x210)](_0x339fd5=>{const _0x3a60fe=_0x527934;if(!_0x339fd5['isDirectory']())fs[_0x3a60fe(0x2b2)](configpath+_0x339fd5[_0x3a60fe(0x13a)]);});const _0x3ee8b3=fs[_0x527934(0x1d3)](_0x2856dd+_0x219128,_0x527934(0x23a)),_0x5add09=new require(_0x527934(0x268))(_0x3ee8b3,{'base64':![],'checkCRC32':!![]});Object[_0x527934(0x14a)](_0x5add09[_0x527934(0x1e3)])[_0x527934(0x210)](_0x1b09f4=>{const _0xc2696a=_0x5add09['files'][_0x1b09f4];fs['writeFileSync'](configpath+_0xc2696a['name'],_0xc2696a['_data']);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x527934(0x210)](_0x4d65db=>{const _0x569af0=_0x527934;if(!_0x4d65db[_0x569af0(0x1a5)]())fs['rmSync'](temppath+_0x4d65db[_0x569af0(0x13a)]);}),logger['debug'](_0x527934(0x28c)),process[_0x527934(0x228)]({'restore':!![]},_0x5166b4=>{});}async function getPublicIp(){const _0x489227=_0x2d602e;try{const _0x4f625f=await axios[_0x489227(0x235)](_0x489227(0x22d));publicip=_0x4f625f[_0x489227(0x149)]['ip'];}catch(_0x118829){}}async function triggerAnalytics(){const _0x45c86c=_0x2d602e;if(!publicip)await getPublicIp();const _0x8bc52c=getBotsWithMode();let _0x477c65=0x0;_0x8bc52c[_0x45c86c(0x210)](_0x341476=>{const _0x537ca1=_0x45c86c;if(_0x341476[_0x537ca1(0x1cb)]===_0x537ca1(0x19f))_0x477c65++;});const _0x9410=getBotExchanges();mixpanel[_0x45c86c(0x2d0)](_0x45c86c(0x2d7),{'distinct_id':settings[_0x45c86c(0x161)],'ip':publicip,'version':serverversion,'numbots':_0x8bc52c[_0x45c86c(0x16f)],'numbotsenabled':_0x477c65,'exchanges':_0x9410,'environment':environment});}async function getMessages(){const _0x55cb47=_0x2d602e,_0x1b0c89=_0x55cb47(0x2d8),_0x15e09c=new GraphQLClient(_0x1b0c89),_0x5a3c92={'authorization':_0x55cb47(0x1ab)},_0x250f9b=serverversion[_0x55cb47(0x272)]('.'),_0x23c9f3=_0x250f9b[0x0]+'.'+_0x250f9b[0x1],_0x555c0b=Math[_0x55cb47(0x1af)](settings['lastmsgtelegram'],settings[_0x55cb47(0x263)]),_0x569299={'last':parseInt(_0x555c0b),'bbm':_0x23c9f3},_0x1ce627=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x46681e;try{_0x46681e=await _0x15e09c[_0x55cb47(0x229)](_0x1ce627,_0x569299,_0x5a3c92);}catch(_0x405e3f){}if(_0x46681e&&_0x46681e[_0x55cb47(0x1f0)]){let _0x7d9b2b=settings[_0x55cb47(0x217)];newMessages=[];for(const _0xe17bcc of _0x46681e[_0x55cb47(0x1f0)]){newMessages['push'](_0xe17bcc);let _0x27954f=![];_0xe17bcc['bbvNew']&&(updateSetting('latestversion',_0xe17bcc[_0x55cb47(0x284)]),_0x27954f=isNewerVersion(serverversion,_0xe17bcc[_0x55cb47(0x284)])||serverversion==_0xe17bcc[_0x55cb47(0x284)]);if(!_0x27954f&&_0xe17bcc[_0x55cb47(0x134)]>_0x7d9b2b){if(_0xe17bcc[_0x55cb47(0x18e)]===_0x55cb47(0x193)||serverversion[_0x55cb47(0x20c)](_0xe17bcc['bbvReceive'])){let _0x1b06d5=''+_0xe17bcc[_0x55cb47(0x212)]+'\x0a\x0a'+_0xe17bcc[_0x55cb47(0x194)];const _0x15b17b=await sendTelegramMsg(toTelegramMarkdown(_0x1b06d5),_0x55cb47(0x110));if(_0x15b17b)_0x7d9b2b=_0xe17bcc['number'];}}}updateAvailable=isNewerVersion(settings[_0x55cb47(0x14c)],serverversion),updateSetting(_0x55cb47(0x217),_0x7d9b2b),emitMessages();}}function emitMessages(){const _0x34a540=_0x2d602e,_0x53d351=settings[_0x34a540(0x263)];let _0x5936b6=[];newMessages['forEach'](_0x3d437a=>{const _0x73ccd0=_0x34a540;_0x3d437a[_0x73ccd0(0x134)]>_0x53d351&&_0x5936b6[_0x73ccd0(0x29e)](_0x3d437a);}),_0x5936b6[_0x34a540(0x16f)]>0x0&&getAllClients()['forEach'](_0x6343f0=>{const _0x303049=_0x34a540;getSocket(_0x6343f0['id'])['emit'](_0x303049(0x194),_0x5936b6);});}function confirmMessage(_0x1f9eaf){const _0x43b585=_0x2d602e;updateSetting(_0x43b585(0x263),Number(_0x1f9eaf));}function isNewerVersion(_0x3eb2a0,_0x9c74bb){const _0x33ae54=_0x2d602e,_0x104a49=_0x9c74bb[_0x33ae54(0x272)]('.'),_0x3cc47a=_0x3eb2a0[_0x33ae54(0x272)]('.');for(var _0x3e251d=0x0;_0x3e251d<_0x3cc47a['length'];_0x3e251d++){const _0x1d1752=~~_0x3cc47a[_0x3e251d],_0x319303=~~_0x104a49[_0x3e251d];if(_0x1d1752>_0x319303)return!![];if(_0x1d1752<_0x319303)return![];}return![];}function toTelegramMarkdown(_0x4a662f){const _0x1c0367=_0x2d602e,_0x283363=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5e1181=/\*{2}(.+?)\*{2}/gim;return _0x4a662f=_0x4a662f[_0x1c0367(0x222)](_0x283363,_0x1c0367(0x218))[_0x1c0367(0x222)](_0x5e1181,_0x1c0367(0x2c3)),_0x4a662f;}async function validateConfigFile(){const _0x27017b=_0x2d602e,_0x2c51b8=dbConfig[_0x27017b(0x235)](_0x27017b(0x1a2))['sortBy'](_0x27017b(0x25c))[_0x27017b(0x118)]()||[];if(_0x2c51b8[_0x27017b(0x16f)]==0x0){let _0x440937=0x0,_0x22fd3d=[];const _0x5c9a6c=/^bot-([0-9]{3})-config.json$/,_0x48ac32=fs[_0x27017b(0x1b5)](configpath);_0x48ac32['forEach'](_0x35763e=>{const _0x516a3b=_0x27017b,_0x4eb62e=_0x5c9a6c[_0x516a3b(0x15b)](_0x35763e);if(_0x4eb62e){const _0x168966=_0x4eb62e[0x1];let _0x492aef=getBotAttributes(_0x168966);_0x22fd3d[_0x516a3b(0x29e)]({'botID':_0x168966,'botname':_0x492aef['botname'],'status':_0x516a3b(0x21e),'live':_0x516a3b(0x205)}),_0x440937++;}}),_0x440937!=0x0&&(dbConfig[_0x27017b(0x235)]('bots')[_0x27017b(0x144)](_0x22fd3d)['write'](),config=_0x22fd3d,restoredConfigFile=_0x440937);}}async function restoreConfigNotify(_0xbd3d30){const _0x165200=_0x2d602e;let _0x45462f;if(restoredConfigFile==0x1)_0x45462f=_0x165200(0x143);else _0x45462f=_0x165200(0x196);if(_0xbd3d30)io['to']('botmanager')[_0x165200(0x2d4)](_0x165200(0x1a8),_0x45462f);else{logger[_0x165200(0x225)]('-----------------------------------------------------------------------------------'),logger['simple'](_0x45462f),logger[_0x165200(0x225)]('-----------------------------------------------------------------------------------'),logger[_0x165200(0x225)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x165200(0x1ae)]!='orders')tgBot[_0x165200(0x1b2)](settings[_0x165200(0x154)],_0x165200(0x2a4)+_0x45462f)[_0x165200(0x25f)](_0x3c53e2=>{telegramError(_0x3c53e2);});}}function validateCredentials(_0x59e8d3,_0x61894){const _0x44a9d9=_0x2d602e;if(_0x59e8d3['username']==settings['bbUsername']&&bcrypt[_0x44a9d9(0x1dd)](_0x59e8d3[_0x44a9d9(0x240)],settings[_0x44a9d9(0x123)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x48c26f=generateLoginToken(_0x61894);return{'allow':!![],'reason':_0x44a9d9(0x1cf),'token':_0x48c26f};}}else return{'allow':![],'reason':_0x44a9d9(0x187),'token':null};}function refreshToken(_0x1dea7e){const _0xe21ccc=_0x2d602e,_0x19d4d7=generateLoginToken(_0x1dea7e);return{'allow':!![],'reason':_0xe21ccc(0x1cf),'token':_0x19d4d7};}function validateAccess(_0x590d5d,_0xab61a5,_0x51a944){const _0xd2f4d1=_0x2d602e,_0x6e9a90=_0x51a944?_0x51a944:devices[_0xab61a5]['ip'];let _0x3e6fa9;const _0x1de834=_0x52fac6=>{const _0x2b6cd1=_0x40ff;if(settings['loginRequired']){if(settings[_0x2b6cd1(0x2ab)]){if(telegram2FaApproved(_0xab61a5)){const _0x2e30cc=generateLoginToken(_0xab61a5);return{'allow':!![],'reason':_0x2b6cd1(0xfa),'token':_0x2e30cc};}else return{'allow':![],'reason':_0x2b6cd1(0x296),'token':null};}else return _0x3e6fa9=validToken(_0x52fac6,_0xab61a5),_0x3e6fa9[_0x2b6cd1(0x174)](_0x2b6cd1(0x180))?{'allow':!![],'reason':_0x2b6cd1(0x275),'token':_0x52fac6}:{'allow':![],'reason':_0x2b6cd1(0x296),'token':null};}else return{'allow':!![],'reason':_0x2b6cd1(0x24f),'token':null};};if(settings[_0xd2f4d1(0x28d)]){let _0x238fc3=[...settings[_0xd2f4d1(0x25b)],_0xd2f4d1(0x23e),_0xd2f4d1(0x202),_0xd2f4d1(0x20a)];if(_0x238fc3['includes'](_0x6e9a90))return _0x1de834(_0x590d5d);else{_0x3e6fa9=validToken(_0x590d5d,_0xab61a5);if(_0x3e6fa9[_0xd2f4d1(0x174)](_0xd2f4d1(0x180)))return _0x1de834(_0x590d5d);else{if(telegramIpApproved(_0xab61a5)){const _0xf6fce2=generateToken(_0xab61a5);return _0x3e6fa9=_0x1de834(_0x590d5d),_0x3e6fa9[_0xd2f4d1(0x261)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xf6fce2}:_0x3e6fa9;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0xd2f4d1(0x103),'token':null};}}}else return _0x1de834(_0x590d5d);}function timelyDecrypt(_0x54c669,_0x3a1895=!![]){const _0xaab10c=_0x2d602e;if(_0x54c669)try{const _0x317cb1=crypt[_0xaab10c(0x146)](secure[_0xaab10c(0x19b)],_0x54c669)[_0xaab10c(0x194)],_0x3066d4=_0x317cb1[_0xaab10c(0x272)]('@')[0x0],_0x2be133=_0x317cb1[_0xaab10c(0x272)]('@')[0x1],_0x428661=new Date()[_0xaab10c(0x24c)]();if(_0x3a1895){if(_0x428661-_0x2be133<maxSecretAge*0x3e8)return _0x3066d4;else return![];}else return _0x3066d4;}catch(_0x4de78e){return![];}else return![];}function _0x40ff(_0x291a76,_0x802c0d){const _0x1bb8de=_0x220d();return _0x40ff=function(_0x3a223e,_0x533edd){_0x3a223e=_0x3a223e-0xf9;let _0x220d79=_0x1bb8de[_0x3a223e];return _0x220d79;},_0x40ff(_0x291a76,_0x802c0d);}const validToken=(_0x548ac7,_0x4c1ed5)=>{const _0x1375fb=_0x2d602e,_0x19f785=devices[_0x4c1ed5]['ip'];if(!_0x548ac7)return{'error':_0x1375fb(0x2a7)};for(let _0x2b8d15 of blacklist){if(_0x2b8d15['token']==_0x548ac7)return{'error':_0x1375fb(0x17d)};}let _0x36ab94;try{_0x36ab94=jwt[_0x1375fb(0x274)](_0x548ac7,secure[_0x1375fb(0x1b3)]+_0x4c1ed5);}catch{return{'error':_0x1375fb(0x16b)};}if(!_0x36ab94[_0x1375fb(0x174)]('clientip')&&!_0x36ab94[_0x1375fb(0x174)](_0x1375fb(0x2a0))||!_0x36ab94['hasOwnProperty'](_0x1375fb(0xfc)))return{'error':_0x1375fb(0x1ba)};if(!_0x36ab94[_0x1375fb(0x174)](_0x1375fb(0x2a0))&&_0x36ab94[_0x1375fb(0x174)](_0x1375fb(0x1c3))){const {clientip:_0x5e3390}=_0x36ab94;return _0x19f785==_0x5e3390?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1375fb(0x11e)};}else{if(_0x36ab94[_0x1375fb(0x174)]('username')&&_0x36ab94[_0x1375fb(0x174)]('clientip')){const {username:_0x1e72a4,clientip:_0x13d973}=_0x36ab94;return settings[_0x1375fb(0x10c)]==_0x1e72a4&&_0x19f785==_0x13d973?{'success':_0x1375fb(0x16d)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x4837b3=>{const _0x380f2a=_0x2d602e;if(_0x4837b3){const _0x4a2236=devices[_0x4837b3]['ip'];return jwt[_0x380f2a(0x2ca)]({'username':settings['bbUsername'],'clientip':_0x4a2236},secure['secret']+_0x4837b3,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4af086=>{const _0x372f18=_0x2d602e;if(_0x4af086){const _0x3547a1=devices[_0x4af086]['ip'];return jwt[_0x372f18(0x2ca)]({'clientip':_0x3547a1},secure[_0x372f18(0x1b3)]+_0x4af086,{'expiresIn':devices[_0x4af086][_0x372f18(0x136)][_0x372f18(0x2c6)]*0x3c});}else return![];},telegramIpApproved=_0x51663c=>{const _0x49bde3=_0x2d602e;let _0x4aec34=![];return devices[_0x51663c][_0x49bde3(0x136)]&&devices[_0x51663c][_0x49bde3(0x136)]['expiry']!=_0x49bde3(0x285)&&(_0x4aec34=devices[_0x51663c][_0x49bde3(0x136)][_0x49bde3(0x1c3)]==devices[_0x51663c]['ip']&&new Date()[_0x49bde3(0x24c)]()-devices[_0x51663c][_0x49bde3(0x136)][_0x49bde3(0x186)]<devices[_0x51663c]['telegramIpApproval'][_0x49bde3(0x2c6)]*0x3c*0x3e8),_0x4aec34;},telegram2FaApproved=_0x39a284=>{const _0x4a182e=_0x2d602e;let _0x46c583=![];return devices[_0x39a284][_0x4a182e(0x2ce)]&&devices[_0x39a284][_0x4a182e(0x2ce)]['expiry']!=_0x4a182e(0x285)&&(_0x46c583=devices[_0x39a284]['telegram2FaApproval'][_0x4a182e(0x1c3)]==devices[_0x39a284]['ip']&&new Date()[_0x4a182e(0x24c)]()-devices[_0x39a284]['telegram2FaApproval']['timestamp']<devices[_0x39a284][_0x4a182e(0x2ce)][_0x4a182e(0x2c6)]*0x3c*0x3e8),_0x46c583;},normalizeIP=_0x45f68a=>{const _0x592450=_0x2d602e;let _0x5c4649=null,_0x2584b5=null;if(ipaddr[_0x592450(0x2cd)](_0x45f68a)){const _0x47069d=ipaddr[_0x592450(0x2bb)](_0x45f68a);_0x47069d[_0x592450(0x14d)]()===_0x592450(0x29c)?(_0x47069d[_0x592450(0x131)]()&&(_0x5c4649=_0x47069d[_0x592450(0xfd)]()['toString']()),_0x2584b5=_0x47069d[_0x592450(0x1ed)]()):(_0x5c4649=_0x47069d['toString'](),_0x2584b5=_0x47069d[_0x592450(0x2a2)]()[_0x592450(0x1ed)]());}return{'show':_0x5c4649?_0x5c4649:_0x2584b5,'store':_0x2584b5};};function formatDate(_0x39d526){const _0x258578=_0x2d602e;return _0x39d526[_0x258578(0x2ac)]()+'/'+(_0x39d526[_0x258578(0x177)]()+0x1)[_0x258578(0x1ed)]()[_0x258578(0x277)](0x2,'0')+'/'+_0x39d526[_0x258578(0x2b0)]()['toString']()[_0x258578(0x277)](0x2,'0')+'\x20'+_0x39d526[_0x258578(0x104)]()['toString']()['padStart'](0x2,'0')+':'+_0x39d526[_0x258578(0x227)]()['toString']()[_0x258578(0x277)](0x2,'0')+':'+_0x39d526[_0x258578(0x22e)]()[_0x258578(0x1ed)]()[_0x258578(0x277)](0x2,'0');}function sleep(_0x1d312a){return new Promise(_0x5097a8=>setTimeout(_0x5097a8,_0x1d312a));}