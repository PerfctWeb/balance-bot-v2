const _0x5c15dc=_0x4fdd;(function(_0x1fe351,_0x42dc24){const _0x4bcfba=_0x4fdd,_0x24bd3a=_0x1fe351();while(!![]){try{const _0x83b960=-parseInt(_0x4bcfba(0x118))/0x1+-parseInt(_0x4bcfba(0x1ad))/0x2+parseInt(_0x4bcfba(0x125))/0x3+parseInt(_0x4bcfba(0x167))/0x4*(parseInt(_0x4bcfba(0x1ab))/0x5)+parseInt(_0x4bcfba(0x1e1))/0x6*(parseInt(_0x4bcfba(0x177))/0x7)+parseInt(_0x4bcfba(0x1b7))/0x8*(-parseInt(_0x4bcfba(0x191))/0x9)+-parseInt(_0x4bcfba(0x249))/0xa;if(_0x83b960===_0x42dc24)break;else _0x24bd3a['push'](_0x24bd3a['shift']());}catch(_0x2f1525){_0x24bd3a['push'](_0x24bd3a['shift']());}}}(_0x5105,0xbc7e8));const _0x1b0f39=function(){let _0x32a456=!![];return function(_0x12b6ba,_0x1aa54d){const _0x21651d=_0x32a456?function(){const _0x21dfdc=_0x4fdd;if(_0x1aa54d){const _0x15fbfe=_0x1aa54d[_0x21dfdc(0x1fc)](_0x12b6ba,arguments);return _0x1aa54d=null,_0x15fbfe;}}:function(){};return _0x32a456=![],_0x21651d;};}(),_0xf7bb38=_0x1b0f39(this,function(){const _0x386d9c=_0x4fdd;return _0xf7bb38[_0x386d9c(0x22a)]()[_0x386d9c(0x22b)](_0x386d9c(0x137))[_0x386d9c(0x22a)]()[_0x386d9c(0x1e5)](_0xf7bb38)[_0x386d9c(0x22b)](_0x386d9c(0x137));});function _0x5105(){const _0x39cfcd=['login\x20token\x20generated','set','getHours','150001njpnOM','Invalid\x20IP\x20address','order','stopPolling','All\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20','ipc','error','f2aRequired','token','send','backup/','alerts','4320036kcsPuT','\x20only\x0a','Invalid\x20authentication\x20token\x20(1)','botID','host','length','/:bot/performance','crypto','Unauthorized\x20attempt\x20to\x20add\x20bot','Error:\x20Invalid\x20argument\x20','type','disabled','name','getMinutes','Unauthorized\x20attempt\x20to\x20log\x20out','reason','get','started','(((.+)+)+)+$','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','date-fns','bbPassword','ipaddr.js','cancel-loading','sockets','invalid\x20credentials','getStartingBalances','telegramChatId','logout','/restart\x20-\x20restart\x20bot(s)\x0a','uuid','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','live','hashSync','::1','entries','apiKey','bb-secure.json','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','HTML','2FA\x20required','store','access','verify','/:bot','success','randomFillSync',',\x20must\x20be\x20a\x204\x20digit\x20number','whitelist','existsSync','/:bot/support','telegramEnabled','use','<b>Telegram\x20bot\x20status:</b>\x0a','/:bot/history','http','Notifications\x20disabled\x0a','createServer','-----------------------------------------------------------------------------------','getTime','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','settings','delete-bot','/status\x20-\x20show\x20bot(s)\x20status\x0a','telegramIpApproval','join','348404ZerOVn','temporaryAccessAllowed','listen','callback_query','login','then','blacklist','write','2FA\x20login\x20required','getFullYear','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','express','3000','bb-settings.json','Unauthorized\x20attempt\x20to\x20store\x20configuration','login\x20token\x20valid','2607185QMWjMe','No\x20bots\x20running\x20right\x20now','emit','secret','bb-config.json','starting\x20bot\x20|\x20Bot\x20','No\x20authentication\x20token','fork','inherit','Notifications\x20disabled','sendFile','build2','Invalid\x20authentication\x20token\x20(2)','\x20|\x20','path','notification','All','toIPv4Address','handshake','decrypt','polling_error','access\x20timeout','auth','catch','get-logs','/off\x20-\x20stop\x20bot(s)\x0a','27CyLWeK','parse','node-telegram-bot-api','bots','event','emitHistory','idling\x20bot\x20\x20\x20|\x20Bot\x20','yes','headers','Password\x20reset\x20rejected','privateKey','chat','Token\x20blacklisted','telegramEvents','port','filter','sign','hex','30\x20min','stop','Notifications\x20types:\x20','exp','version','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','allow','default','70TZdiow','enabled\x20Bot\x20','2804218psTpNa','removeListener','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','add','loginRequired','getMonth','storeHeadless','2FA\x20login\x20token\x20generated','copyFileSync','96288fVYmnK','All\x20bots','running','sha256','exit','-config.json','username','bcryptjs','new','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','onText','Access\x20enabled\x20for\x20','password','pidRefreshToken','getPortfolio','remoteAddress','Invalid\x20username\x20or\x20IP\x20address','Bot\x20','error\x20while\x20deleting\x20config\x20files:\x20','update-bb','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','login\x20required','cloneDeep','RSA','forEach','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Invalid\x20Telegram\x20token','randomBytes','telegram','/disable\x20-\x20disable\x20notifications\x0a','/help\x20-\x20show\x20available\x20commands\x0a','test','log','reject','Crypt','-performance.json','1000','Unauthorized\x20attempt\x20to\x20get\x20logs','kill','restarting\x20Bot\x20','hasOwnProperty','answerCallbackQuery','24QCxPbt','Notifications\x20enabled\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','static','constructor','unlinkSync','removeAllListeners','timestamp','lowdb/adapters/FileSync','show','-results.json','match','botname','Unauthorized\x20attempt\x20to\x20get\x20portfolio','@analytics/google-analytics','conn','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','\x20minutes','whitelistEnabled','NTBA_FIX_319','includes','once','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Orders','temporary\x20access\x20rejected','/:bot/configuration','temporary\x20token\x20generated','apply','user','mkdirSync','push','from','clientip','telegramUsername','getDate','isIPv4MappedAddress','env','argv','store-configuration','127.0.0.1','args','bot.js','Login\x20rejected','disconnect',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','404\x20Not\x20Found','UA-192771731-1','orders','all','timeshift','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','disabled\x20Bot\x20','getSeconds','User\x20has\x20been\x20validated','/:bot/portfolio','publicKey','/enable\x20-\x20enable\x20notifications\x0a','reload','bot','enabled','getUTCHours','map','padStart','settings.','function','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','telegramToken','temporary\x20access\x20not\x20allowed','status','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','SIGINT','</b>\x20?','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','toString','search','botmanager','2FA\x20login\x20rejected',':\x20Bot\x20Mgr\x20>\x20','slice','store-settings','clients','get-portfolio','split','build','stopped','bb/','Alerts','\x20>\x20','defaults','compareSync','pidExpireLogin','connection','starting\x20new\x20bot\x20|\x20Bot\x20','::ffff:127.0.0.1','expiry','find','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','place-order','sendMessage','message','login\x20not\x20required','sortBy','5\x20min','17889560xyQWmP','bot-','************','secure','/:bot/coins','encryptedUuid','15\x20min','value','bbUsername','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','data','https://hodlerhacks.com','SIGTERM','config/','Allow\x20login\x20from\x20IP\x20address\x20<b>','server','hybrid-crypto-js','showname','keys','telegram2FaApproval','2FA','page','jsonwebtoken','assign','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20login\x20attempt\x20(public\x20key)','get-starting-balances','/on\x20-\x20start\x20bot(s)\x0a','index.html','readdirSync'];_0x5105=function(){return _0x39cfcd;};return _0x5105();}_0xf7bb38();'use strict';process[_0x5c15dc(0x205)][_0x5c15dc(0x1f4)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x5c15dc(0x1e9)),fs=require('fs'),fns=require(_0x5c15dc(0x139)),low=require('lowdb'),path=require(_0x5c15dc(0x185)),crypto=require(_0x5c15dc(0x12c)),Crypt=require(_0x5c15dc(0x259))[_0x5c15dc(0x1d9)],RSA=require(_0x5c15dc(0x259))[_0x5c15dc(0x1ce)],bcrypt=require(_0x5c15dc(0x1be)),jwt=require(_0x5c15dc(0x10d)),analyticsLib=require('analytics')[_0x5c15dc(0x1aa)],googleAnalytics=require(_0x5c15dc(0x1ef))[_0x5c15dc(0x1aa)],ipaddr=require(_0x5c15dc(0x13b)),argv=require('yargs/yargs')(process[_0x5c15dc(0x206)][_0x5c15dc(0x22f)](0x2))[_0x5c15dc(0x206)],PORT=argv[_0x5c15dc(0x19f)]||_0x5c15dc(0x173),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x5c15dc(0x1d6)](PORT))return console['log'](_0x5c15dc(0x12e)+PORT+_0x5c15dc(0x154)),process['exit'](0x1);const HOST=argv[_0x5c15dc(0x129)]||null,userID=argv[_0x5c15dc(0x1fd)]||'';let bbpath=_0x5c15dc(0x236),bbpath2='';function _0x4fdd(_0x4edced,_0x3ead25){const _0x2ca586=_0x5105();return _0x4fdd=function(_0xf7bb38,_0x1b0f39){_0xf7bb38=_0xf7bb38-0x10b;let _0x5105ce=_0x2ca586[_0xf7bb38];return _0x5105ce;},_0x4fdd(_0x4edced,_0x3ead25);}const botfile=_0x5c15dc(0x20a),configfile=_0x5c15dc(0x17b),settingsfile=_0x5c15dc(0x174),securefile=_0x5c15dc(0x14a);!fs[_0x5c15dc(0x156)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5c15dc(0x231)),configpath=userID?bbpath+_0x5c15dc(0x256)+userID+'/':bbpath+_0x5c15dc(0x256),configbackuppath=configpath+_0x5c15dc(0x123);!fs[_0x5c15dc(0x156)](configpath)&&fs[_0x5c15dc(0x1fe)](configpath);!fs[_0x5c15dc(0x156)](configbackuppath)&&fs[_0x5c15dc(0x1fe)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5c15dc(0x239)]({'bots':[]})[_0x5c15dc(0x16e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5c15dc(0x239)]({'settings':{'timeshift':0x0}})[_0x5c15dc(0x16e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5c15dc(0x239)]({'secure':{},'blacklist':[]})[_0x5c15dc(0x16e)]();let crypt=new Crypt({'md':_0x5c15dc(0x1ba),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x5c15dc(0x1a7)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x5c15dc(0x172)),app=express(),http=require(_0x5c15dc(0x15c))[_0x5c15dc(0x15e)](app);app[_0x5c15dc(0x159)](express['static'](path[_0x5c15dc(0x166)](__dirname,bbpath2,'build2'))),app[_0x5c15dc(0x159)](express[_0x5c15dc(0x1e4)](path[_0x5c15dc(0x166)](__dirname,bbpath2,_0x5c15dc(0x234)))),app[_0x5c15dc(0x135)]('/',function(_0x537fa4,_0x573d0a){const _0x34801c=_0x5c15dc;_0x573d0a['sendFile'](path[_0x34801c(0x166)](__dirname,bbpath2,_0x34801c(0x182),_0x34801c(0x113)));}),app[_0x5c15dc(0x135)](_0x5c15dc(0x151),function(_0x5c0cd6,_0x5d5d10){const _0x134a73=_0x5c15dc;_0x5d5d10[_0x134a73(0x181)](path[_0x134a73(0x166)](__dirname,bbpath2,_0x134a73(0x234),_0x134a73(0x113)));}),app['get'](_0x5c15dc(0x217),(_0x66a79b,_0x338cbd)=>{const _0x363bd3=_0x5c15dc;_0x338cbd[_0x363bd3(0x181)](path[_0x363bd3(0x166)](__dirname,bbpath2,'build',_0x363bd3(0x113)));}),app[_0x5c15dc(0x135)](_0x5c15dc(0x12b),(_0x42f6f1,_0x5cfd40)=>{const _0x366fc2=_0x5c15dc;_0x5cfd40[_0x366fc2(0x181)](path[_0x366fc2(0x166)](__dirname,bbpath2,_0x366fc2(0x234),_0x366fc2(0x113)));}),app['get'](_0x5c15dc(0x24d),(_0x54ceb9,_0x41776c)=>{const _0x2e70b1=_0x5c15dc;_0x41776c['sendFile'](path[_0x2e70b1(0x166)](__dirname,bbpath2,_0x2e70b1(0x234),'index.html'));}),app[_0x5c15dc(0x135)](_0x5c15dc(0x15b),(_0x5be83a,_0x1ce41a)=>{const _0x5ba058=_0x5c15dc;_0x1ce41a['sendFile'](path[_0x5ba058(0x166)](__dirname,bbpath2,_0x5ba058(0x234),_0x5ba058(0x113)));}),app['get'](_0x5c15dc(0x1fa),(_0x52bdd1,_0x2051b3)=>{const _0x5c9e0e=_0x5c15dc;_0x2051b3[_0x5c9e0e(0x181)](path[_0x5c9e0e(0x166)](__dirname,bbpath2,_0x5c9e0e(0x234),_0x5c9e0e(0x113)));}),app[_0x5c15dc(0x135)](_0x5c15dc(0x157),(_0x55f81b,_0x5ea5b7)=>{const _0x26598e=_0x5c15dc;_0x5ea5b7[_0x26598e(0x181)](path[_0x26598e(0x166)](__dirname,bbpath2,_0x26598e(0x234),_0x26598e(0x113)));});if(HOST)http[_0x5c15dc(0x169)](PORT,HOST);else http[_0x5c15dc(0x169)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x5c15dc(0x20f)})]}),TelegramBot=require(_0x5c15dc(0x193));let tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x5c15dc(0x202)]&&settings[_0x5c15dc(0x202)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x937548=_0x5c15dc;console[_0x937548(0x1d7)](''),console['log']('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x937548(0x1d7)](_0x937548(0x15f));if(config[_0x937548(0x12a)]!=0x0)config[_0x937548(0x1cf)](_0x2e08c1=>{const _0x41139d=_0x937548;if(_0x2e08c1[_0x41139d(0x225)]=='enabled'||_0x2e08c1['status']==_0x41139d(0x1bf))logging(_0x41139d(0x17c)+_0x2e08c1[_0x41139d(0x128)]+'\x20|\x20'+_0x2e08c1[_0x41139d(0x1ed)]),startBot([_0x2e08c1[_0x41139d(0x128)],userID],{'cwd':bbpath},function(_0x1339af){if(_0x1339af)logging(_0x1339af);});else(_0x2e08c1[_0x41139d(0x225)]==_0x41139d(0x130)||_0x2e08c1[_0x41139d(0x225)]=='new-disabled')&&logging(_0x41139d(0x197)+_0x2e08c1['botID']+_0x41139d(0x184)+_0x2e08c1[_0x41139d(0x1ed)]);});else!newBot&&console[_0x937548(0x1d7)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0x937548(0x15f)),console['log']('');}function startSocket(){const _0x513cfe=_0x5c15dc;io['on'](_0x513cfe(0x23c),_0x44e7a4=>{const _0x36f3ea=_0x513cfe;let _0x18c6b9,_0x304499,_0x2c4836,_0x4dfecb,_0x5ab4ae;const _0x13f0a3=_0x44e7a4[_0x36f3ea(0x189)][_0x36f3ea(0x199)]['referer'];_0x304499=_0x13f0a3['match'](/bot[0-9]{3}/);if(_0x304499)_0x2c4836=_0x304499[0x0][_0x36f3ea(0x1ec)](/[0-9]{3}/);if(_0x2c4836)_0x18c6b9=_0x2c4836[0x0];else _0x18c6b9='botmanager';const _0x40edf1=_0x44e7a4[_0x36f3ea(0x189)][_0x36f3ea(0x18d)][_0x36f3ea(0x24e)];if(!_0x40edf1)_0x44e7a4[_0x36f3ea(0x179)]('status',{'publicKey':secure[_0x36f3ea(0x218)]});else{_0x4dfecb=timelyDecrypt(_0x40edf1,![]);if(!_0x4dfecb)logging(_0x36f3ea(0x110));else{_0x5ab4ae=normalizeIP(_0x44e7a4[_0x36f3ea(0x1f0)][_0x36f3ea(0x1c6)])[_0x36f3ea(0x14e)];if(!devices[_0x4dfecb])devices[_0x4dfecb]={'uuid':_0x4dfecb,'access':{'token':null}};devices[_0x4dfecb]['ip']=_0x5ab4ae;const _0x135834=addClient(_0x44e7a4['id'],_0x4dfecb,_0x18c6b9);setAccess(_0x135834),_0x44e7a4['on'](_0x36f3ea(0x16b),_0x37e222=>{const _0xd31b79=_0x36f3ea,_0x3a840c=timelyDecrypt(_0x37e222['password']);if(_0x3a840c){_0x37e222={'username':_0x37e222['username'],'password':_0x3a840c},devices[_0x4dfecb][_0xd31b79(0x14f)]=validateCredentials(_0x37e222,_0x4dfecb);if(devices[_0x4dfecb]['access'][_0xd31b79(0x1a9)]==![]&&devices[_0x4dfecb][_0xd31b79(0x14f)][_0xd31b79(0x134)]==_0xd31b79(0x16f))_0x44e7a4[_0xd31b79(0x179)](_0xd31b79(0x225),{'access':devices[_0x4dfecb]['access']}),loginAccess2FA(_0x4dfecb,_0x5ab4ae);else{if(devices[_0x4dfecb][_0xd31b79(0x14f)][_0xd31b79(0x1a9)]==![]&&devices[_0x4dfecb]['access'][_0xd31b79(0x134)]==_0xd31b79(0x13e))_0x44e7a4[_0xd31b79(0x179)]('status',{'access':devices[_0x4dfecb]['access']});else devices[_0x4dfecb]['access']['allow']&&devices[_0x4dfecb][_0xd31b79(0x14f)][_0xd31b79(0x134)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x4dfecb)['forEach'](_0x3659d0=>{setAccess(_0x3659d0);}),setTokenRefresh(_0x4dfecb),setSessionTimeout(_0xd31b79(0x16b),_0x4dfecb));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x44e7a4['on']('reset-password',()=>{resetPassword();}),_0x44e7a4['on'](_0x36f3ea(0x20c),_0x3e0f6d=>{removeClient(_0x44e7a4['id']);});}}});}function initClient(_0x3e72b6){const _0x5560bb=_0x5c15dc;if(_0x3e72b6!=_0x5560bb(0x22c)&&config[_0x5560bb(0x149)]!=''){if(pid[_0x3e72b6])pid[_0x3e72b6][_0x5560bb(0x122)]({'function':'initclient','args':null});}}function getSocket(_0xa2a36f){const _0x3b16c0=_0x5c15dc;return io[_0x3b16c0(0x13d)][_0x3b16c0(0x13d)][_0x3b16c0(0x135)](_0xa2a36f);}function setAccess(_0x2444a2){const _0x5739aa=_0x5c15dc,_0x58a7ff=getSocket(_0x2444a2['id']),_0x109e34=_0x2444a2[_0x5739aa(0x143)],_0x1c5868=_0x2444a2['bot'];devices[_0x109e34][_0x5739aa(0x14f)]=validateAccess(devices[_0x109e34][_0x5739aa(0x14f)][_0x5739aa(0x121)],_0x109e34),_0x58a7ff[_0x5739aa(0x166)](_0x109e34);if(devices[_0x109e34]['access'][_0x5739aa(0x1a9)]){_0x58a7ff['join'](_0x1c5868);if(_0x1c5868==_0x5739aa(0x22c))initializeSocketBotManager(_0x58a7ff);else initializeSocketBot(_0x58a7ff);initClient(_0x1c5868);}devices[_0x109e34][_0x5739aa(0x14f)][_0x5739aa(0x121)]&&devices[_0x109e34][_0x5739aa(0x14f)][_0x5739aa(0x134)]==_0x5739aa(0x1fb)&&setSessionTimeout(_0x5739aa(0x10b),_0x109e34),devices[_0x109e34][_0x5739aa(0x14f)]['token']&&devices[_0x109e34][_0x5739aa(0x14f)][_0x5739aa(0x134)]==_0x5739aa(0x1b5)&&setSessionTimeout('login',_0x109e34),_0x58a7ff[_0x5739aa(0x179)]('status',{'status':_0x2444a2[_0x5739aa(0x258)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x109e34]['access'],'externalip':devices[_0x109e34]['ip'],'publicKey':secure[_0x5739aa(0x218)]}),devices[_0x109e34][_0x5739aa(0x14f)][_0x5739aa(0x1a9)]==![]&&devices[_0x109e34]['access'][_0x5739aa(0x134)]==_0x5739aa(0x14d)&&temporaryAccess2FA(_0x109e34,devices[_0x109e34]['ip']);}function setSessionTimeout(_0x42be2d,_0xad07b0){const _0x57d26e=_0x5c15dc;let _0x3a2afe;if(_0x42be2d==_0x57d26e(0x16b))_0x3a2afe=loginExpiry*0x3c*0x3e8;else _0x3a2afe=devices[_0xad07b0]['telegramIpApproval'][_0x57d26e(0x23f)]*0x3c*0x3e8-(new Date()[_0x57d26e(0x160)]()-devices[_0xad07b0][_0x57d26e(0x165)][_0x57d26e(0x1e8)]);if(devices[_0xad07b0]['pidExpireLogin'])clearTimeout(devices[_0xad07b0][_0x57d26e(0x23b)]);devices[_0xad07b0]['pidExpireLogin']=setTimeout(()=>{const _0x49db9b=_0x57d26e;if(devices[_0xad07b0][_0x49db9b(0x1c4)])clearTimeout(devices[_0xad07b0][_0x49db9b(0x1c4)]);removeSocketListeners(_0xad07b0),addBlacklist(_0xad07b0),devices[_0xad07b0][_0x49db9b(0x165)]=null,devices[_0xad07b0][_0x49db9b(0x25c)]=null,devices[_0xad07b0]['access'][_0x49db9b(0x121)]=null,devices[_0xad07b0][_0x49db9b(0x14f)]=validateAccess(devices[_0xad07b0][_0x49db9b(0x14f)][_0x49db9b(0x121)],_0xad07b0),!(devices[_0xad07b0][_0x49db9b(0x14f)][_0x49db9b(0x1a9)]&&devices[_0xad07b0][_0x49db9b(0x14f)][_0x49db9b(0x134)]=='login\x20not\x20required')&&(_0x42be2d==_0x49db9b(0x16b)?io['to'](_0xad07b0)[_0x49db9b(0x179)](_0x49db9b(0x225),{'access':{'allow':![],'reason':_0x49db9b(0x18c),'token':null}}):io['to'](_0xad07b0)[_0x49db9b(0x179)](_0x49db9b(0x225),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0xad07b0]['access']['token']=null;},_0x3a2afe);}function setTokenRefresh(_0x9f5d98){const _0x4f56f6=_0x5c15dc;if(devices[_0x9f5d98][_0x4f56f6(0x1c4)])clearTimeout(devices[_0x9f5d98][_0x4f56f6(0x1c4)]);devices[_0x9f5d98][_0x4f56f6(0x1c4)]=setTimeout(()=>{const _0x3ba5c0=_0x4f56f6;getClientsWithUuid(_0x9f5d98)[_0x3ba5c0(0x12a)]!=0x0?(devices[_0x9f5d98][_0x3ba5c0(0x14f)]=refreshToken(_0x9f5d98),io['to'](_0x9f5d98)['emit'](_0x3ba5c0(0x225),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x9f5d98][_0x3ba5c0(0x14f)],'externalip':devices[_0x9f5d98]['ip'],'publicKey':secure[_0x3ba5c0(0x218)]}),setTokenRefresh(_0x9f5d98)):clearTimeout(devices[_0x9f5d98][_0x3ba5c0(0x1c4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x503315){const _0x32fcb6=_0x5c15dc,_0x24c9e0=getClient(_0x503315['id'])[_0x32fcb6(0x143)];_0x503315['emit']('bots',config),_0x503315['emit'](_0x32fcb6(0x162),cleanSettings()),_0x503315['on']('add-bot',_0x4d4eef=>{const _0x37e645=_0x32fcb6;if(validateAccess(_0x4d4eef,_0x24c9e0)[_0x37e645(0x1a9)])addBot();else logging(_0x37e645(0x12d));}),_0x503315['on']('update-bot',(_0x490e6c,_0x5e2e4e)=>{const _0x1b4023=_0x32fcb6;if(validateAccess(_0x5e2e4e,_0x24c9e0)[_0x1b4023(0x1a9)])toggleBot(_0x490e6c[_0x1b4023(0x128)],_0x490e6c[_0x1b4023(0x225)],_0x490e6c[_0x1b4023(0x145)]);else logging(_0x1b4023(0x10f));}),_0x503315['on'](_0x32fcb6(0x163),(_0x33ff1a,_0x1b3816)=>{if(validateAccess(_0x1b3816,_0x24c9e0)['allow'])deleteBot(_0x33ff1a);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x503315['on'](_0x32fcb6(0x230),(_0x5ef037,_0x2dc9d4)=>{const _0x42e372=_0x32fcb6;if(validateAccess(_0x2dc9d4,_0x24c9e0)[_0x42e372(0x1a9)])storeSettings(_0x5ef037,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x503315['on'](_0x32fcb6(0x1ca),(_0x5b8478,_0x334ec0)=>{const _0x5cfd32=_0x32fcb6;if(validateAccess(_0x334ec0,_0x24c9e0)[_0x5cfd32(0x1a9)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x503315['on'](_0x32fcb6(0x141),_0x4d8e56=>{const _0x4d56f1=_0x32fcb6;if(validateAccess(_0x4d8e56,_0x24c9e0)[_0x4d56f1(0x1a9)]){if(devices[_0x24c9e0][_0x4d56f1(0x1c4)])clearTimeout(devices[_0x24c9e0]['pidRefreshToken']);if(devices[_0x24c9e0]['pidExpireLogin'])clearTimeout(devices[_0x24c9e0][_0x4d56f1(0x23b)]);removeSocketListeners(getClient(_0x503315['id'])[_0x4d56f1(0x143)]),addBlacklist(_0x24c9e0),devices[_0x24c9e0]['telegramIpApproval']=null,devices[_0x24c9e0][_0x4d56f1(0x25c)]=null,devices[_0x24c9e0]['access']['token']=null,io['to'](getClient(_0x503315['id'])['uuid'])[_0x4d56f1(0x179)](_0x4d56f1(0x225),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4d56f1(0x133));});}function initializeSocketBot(_0x1e1164){const _0x669411=_0x5c15dc,_0x4be023=getClient(_0x1e1164['id'])[_0x669411(0x21b)],_0x1f8a7a=getClient(_0x1e1164['id'])[_0x669411(0x143)];_0x1e1164['on'](_0x669411(0x18f),(_0x51f351,_0x458db6)=>{const _0x3e3fc1=_0x669411;if(validateAccess(_0x458db6,_0x1f8a7a)['allow']){if(pid[_0x4be023])pid[_0x4be023][_0x3e3fc1(0x122)]({'function':_0x3e3fc1(0x196),'args':_0x51f351});}else logging(_0x3e3fc1(0x1dc));}),_0x1e1164['on'](_0x669411(0x232),(_0x471707,_0x1ca714)=>{const _0x28abf7=_0x669411;if(validateAccess(_0x1ca714,_0x1f8a7a)[_0x28abf7(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023][_0x28abf7(0x122)]({'function':_0x28abf7(0x1c5),'args':_0x471707});}else logging(_0x28abf7(0x1ee));}),_0x1e1164['on'](_0x669411(0x207),(_0x422f3f,_0x48ccb8)=>{const _0x5475ae=_0x669411;if(validateAccess(_0x48ccb8,_0x1f8a7a)[_0x5475ae(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023]['send']({'function':'storeConfiguration','args':_0x422f3f});}else logging(_0x5475ae(0x175));}),_0x1e1164['on']('store-headless',(_0x5913b3,_0x223756)=>{const _0x4d4500=_0x669411;if(validateAccess(_0x223756,_0x1f8a7a)[_0x4d4500(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023]['send']({'function':_0x4d4500(0x1b4),'args':_0x5913b3});}else logging(_0x4d4500(0x213));}),_0x1e1164['on'](_0x669411(0x111),_0x4c4133=>{const _0x5238c4=_0x669411;if(validateAccess(_0x4c4133,_0x1f8a7a)[_0x5238c4(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023]['send']({'function':_0x5238c4(0x13f),'args':null});}else logging(_0x5238c4(0x144));}),_0x1e1164['on'](_0x669411(0x243),(_0x1dee36,_0x24e3c1)=>{const _0x4f2961=_0x669411;if(validateAccess(_0x24e3c1,_0x1f8a7a)[_0x4f2961(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023]['send']({'function':'placeOrder','args':_0x1dee36});}else logging(_0x4f2961(0x14b));}),_0x1e1164['on'](_0x669411(0x13c),_0x38fad3=>{const _0x46eded=_0x669411;if(validateAccess(_0x38fad3,_0x1f8a7a)[_0x46eded(0x1a9)]){if(pid[_0x4be023])pid[_0x4be023]['send']({'function':'cancelLoading','args':null});}else logging(_0x46eded(0x1a8));}),_0x1e1164['on'](_0x669411(0x141),_0x56d181=>{const _0x2b5989=_0x669411;if(validateAccess(_0x56d181,_0x1f8a7a)[_0x2b5989(0x1a9)]){if(devices[_0x1f8a7a]['pidRefreshToken'])clearTimeout(devices[_0x1f8a7a]['pidRefreshToken']);if(devices[_0x1f8a7a][_0x2b5989(0x23b)])clearTimeout(devices[_0x1f8a7a][_0x2b5989(0x23b)]);removeSocketListeners(getClient(_0x1e1164['id'])[_0x2b5989(0x143)]),addBlacklist(_0x1f8a7a),devices[_0x1f8a7a][_0x2b5989(0x165)]=null,devices[_0x1f8a7a]['telegram2FaApproval']=null,devices[_0x1f8a7a][_0x2b5989(0x14f)]['token']=null,io['to'](getClient(_0x1e1164['id'])[_0x2b5989(0x143)])[_0x2b5989(0x179)](_0x2b5989(0x225),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x4e84d7){getClientsWithUuid(_0x4e84d7)['forEach'](_0x20adcb=>{const _0x470b72=_0x4fdd;getSocket(_0x20adcb['id'])[_0x470b72(0x1e7)]();});}function cleanSettings(){const _0x370d5d=_0x5c15dc;let _0x398940=settings;return settings['telegramToken']&&settings[_0x370d5d(0x223)]!=''&&(_0x398940={..._0x398940,'telegramToken':_0x370d5d(0x24b)}),settings[_0x370d5d(0x13a)]&&settings['bbPassword']!=''&&(_0x398940={..._0x398940,'bbPassword':_0x370d5d(0x24b)}),_0x398940;}function updateBB(){const _0x438240=_0x5c15dc;process[_0x438240(0x122)]({'update':!![]},_0x2e9b9d=>{});}function startBot(_0x526a5d,_0x5e895d,_0x3be07c){const _0x1e4383=_0x5c15dc;let _0x3194d6=![];const _0x3d9f32=_0x526a5d[0x0];_0x5e895d={..._0x5e895d,'stdio':[_0x1e4383(0x17f),_0x1e4383(0x17f),'inherit',_0x1e4383(0x11e)]},pid[_0x3d9f32]=childProcess[_0x1e4383(0x17e)](botfile,_0x526a5d,_0x5e895d),pid[_0x3d9f32]['on'](_0x1e4383(0x245),_0x3a0e13=>{const _0xfcc891=_0x1e4383;switch(Object[_0xfcc891(0x25b)](_0x3a0e13)[0x0]){case _0xfcc891(0x1ed):updateBotName(_0x3d9f32,_0x3a0e13[_0xfcc891(0x1ed)]);break;case _0xfcc891(0x225):updateStatus(_0x3d9f32,_0x3a0e13[_0xfcc891(0x225)]);break;case _0xfcc891(0x145):updateLive(_0x3d9f32,_0x3a0e13[_0xfcc891(0x145)]);break;case _0xfcc891(0x136):updateLive(_0x3d9f32,_0x3a0e13[_0xfcc891(0x136)]),io['to'](_0x3d9f32)['emit'](_0xfcc891(0x225),{'access':{'allow':![],'reason':_0xfcc891(0x21a),'token':null}});break;case'stop':_0x3a0e13[_0xfcc891(0x1a4)]=='restart'&&stopBot(_0x3d9f32);_0x3a0e13[_0xfcc891(0x1a4)]=='kill'&&toggleBot(_0x3d9f32,_0xfcc891(0x130),'stopped');break;case _0xfcc891(0x1d3):sendTelegram(_0x3d9f32,_0x3a0e13[_0xfcc891(0x1d3)]);break;case _0xfcc891(0x221):io['to'](_0x3d9f32)[_0xfcc891(0x179)](_0x3a0e13[_0xfcc891(0x221)],_0x3a0e13[_0xfcc891(0x209)]);break;}}),pid[_0x3d9f32]['on'](_0x1e4383(0x11f),function(_0x3179b9){if(_0x3194d6)return;_0x3194d6=!![],_0x3be07c(_0x3179b9);}),pid[_0x3d9f32]['on'](_0x1e4383(0x1bb),function(_0x23eba5){const _0x3a04ef=_0x1e4383;if(_0x3194d6)return;_0x3194d6=!![],_0x3be07c(null);const _0x5f0bbe=dbConfig[_0x3a04ef(0x135)](_0x3a04ef(0x194))[_0x3a04ef(0x240)]({'botID':_0x3d9f32})[_0x3a04ef(0x250)]();_0x5f0bbe&&(_0x5f0bbe[_0x3a04ef(0x225)]==_0x3a04ef(0x21c)||_0x5f0bbe[_0x3a04ef(0x225)]==_0x3a04ef(0x1bf))&&(updateLive(_0x3d9f32,_0x3a04ef(0x235)),logging(_0x3a04ef(0x1de)+_0x3d9f32),startBot([_0x3d9f32,userID],{'cwd':bbpath},function(_0x1ddea6){if(_0x1ddea6)logging(_0x1ddea6);}));});}function stopBot(_0x5ddb2b){const _0x23e525=_0x5c15dc;getClientsWithBotID(_0x5ddb2b)[_0x23e525(0x1cf)](_0x5a9675=>{getSocket(_0x5a9675['id'])['disconnect'](!![]),removeClient(_0x5a9675['id']);});if(pid[_0x5ddb2b])pid[_0x5ddb2b][_0x23e525(0x1dd)]();}function addBot(){const _0x5e90cd=_0x5c15dc;let _0x4f5a37;for(let _0x21a155=0x1;_0x21a155<0x3e9;_0x21a155++){_0x4f5a37=_0x21a155[_0x5e90cd(0x22a)]()[_0x5e90cd(0x21f)](0x3,'0');let _0x1db8a3=config[_0x5e90cd(0x240)](_0x11c729=>_0x11c729['botID']==_0x4f5a37);if(!_0x1db8a3)break;}if(_0x4f5a37===_0x5e90cd(0x1db)){logging(_0x5e90cd(0x252));return;}logging(_0x5e90cd(0x23d)+_0x4f5a37),dbConfig['get'](_0x5e90cd(0x194))[_0x5e90cd(0x1ff)]({'botID':_0x4f5a37,'botname':_0x5e90cd(0x1c8)+_0x4f5a37,'status':_0x5e90cd(0x1bf),'live':''})[_0x5e90cd(0x16e)](),startBot([_0x4f5a37,userID],{'cwd':bbpath},function(_0x40f036){if(_0x40f036)logging(_0x40f036);}),config=getConfiguration(),io['to'](_0x5e90cd(0x22c))['emit'](_0x5e90cd(0x194),config);}function deleteBot(_0x2e97f3){const _0xf2b525=_0x5c15dc;getClientsWithBotID(_0x2e97f3)['forEach'](_0x37da03=>{const _0x5ecd61=_0x4fdd;getSocket(_0x37da03['id'])[_0x5ecd61(0x20c)](!![]),removeClient(_0x37da03['id']);}),dbConfig['get'](_0xf2b525(0x194))['remove']({'botID':_0x2e97f3})['write'](),logging('deleted\x20Bot\x20'+_0x2e97f3),stopBot(_0x2e97f3);try{fs[_0xf2b525(0x1e6)](path[_0xf2b525(0x166)](configpath,_0xf2b525(0x24a)+_0x2e97f3+_0xf2b525(0x1bc))),fs[_0xf2b525(0x1e6)](path['join'](configpath,_0xf2b525(0x24a)+_0x2e97f3+'-events.json')),fs['unlinkSync'](path[_0xf2b525(0x166)](configpath,_0xf2b525(0x24a)+_0x2e97f3+_0xf2b525(0x1da))),fs[_0xf2b525(0x1e6)](path['join'](configpath,'bot-'+_0x2e97f3+_0xf2b525(0x1eb)));}catch(_0x4a7435){if(_0x4a7435)logging(_0xf2b525(0x1c9),_0x4a7435);}config=getConfiguration(),io['to'](_0xf2b525(0x22c))[_0xf2b525(0x179)]('bots',config);}function toggleBot(_0x1a24eb,_0x4aabe1,_0x56dbbb){const _0x5057a1=_0x5c15dc;dbConfig['get']('bots')[_0x5057a1(0x240)]({'botID':_0x1a24eb})[_0x5057a1(0x10e)]({'status':_0x4aabe1})[_0x5057a1(0x10e)]({'live':_0x56dbbb})[_0x5057a1(0x16e)]();if(_0x4aabe1==_0x5057a1(0x21c)||_0x4aabe1==_0x5057a1(0x1bf))logging(_0x5057a1(0x1ac)+_0x1a24eb),startBot([_0x1a24eb,userID],{'cwd':bbpath},function(_0x44960d){if(_0x44960d)logging(_0x44960d);});else(_0x4aabe1==_0x5057a1(0x130)||_0x4aabe1=='new-disabled')&&(logging(_0x5057a1(0x214)+_0x1a24eb),stopBot(_0x1a24eb));config=getConfiguration(),io['to'](_0x5057a1(0x22c))[_0x5057a1(0x179)](_0x5057a1(0x194),config);}function toggleStatus(_0x314aaf){const _0x3836c4=_0x5c15dc;let _0x4fa110=dbConfig[_0x3836c4(0x135)](_0x3836c4(0x194))['find']({'botID':_0x314aaf})['value'](),_0x480cac;if(_0x4fa110[_0x3836c4(0x225)]===_0x3836c4(0x21c))_0x480cac=_0x3836c4(0x130);else{if(_0x4fa110[_0x3836c4(0x225)]==='new')_0x480cac='new-disabled';else{if(_0x4fa110['status']==='new-disabled')_0x480cac=_0x3836c4(0x1bf);else{if(_0x4fa110[_0x3836c4(0x225)]===_0x3836c4(0x130))_0x480cac=_0x3836c4(0x21c);}}}return _0x480cac;}function updateStatus(_0x3a4fad,_0x35cd8f){const _0x2f59eb=_0x5c15dc;dbConfig[_0x2f59eb(0x135)](_0x2f59eb(0x194))[_0x2f59eb(0x240)]({'botID':_0x3a4fad})[_0x2f59eb(0x10e)]({'status':_0x35cd8f})[_0x2f59eb(0x16e)](),config=getConfiguration(),io['to'](_0x2f59eb(0x22c))[_0x2f59eb(0x179)](_0x2f59eb(0x194),config);}function updateLive(_0x159d6e,_0x3cb28a){const _0x4dceab=_0x5c15dc;dbConfig['get'](_0x4dceab(0x194))[_0x4dceab(0x240)]({'botID':_0x159d6e})['assign']({'live':_0x3cb28a})[_0x4dceab(0x16e)](),config=getConfiguration(),io['to'](_0x4dceab(0x22c))['emit'](_0x4dceab(0x194),config);}function updateBotName(_0x5a4222,_0x4515fe){const _0x3bda62=_0x5c15dc;dbConfig['get']('bots')[_0x3bda62(0x240)]({'botID':_0x5a4222})[_0x3bda62(0x10e)]({'botname':_0x4515fe})[_0x3bda62(0x16e)](),config=getConfiguration(),io['to'](_0x3bda62(0x22c))['emit'](_0x3bda62(0x194),config);}function telegramError(_0x405157){const _0x240ee6=_0x5c15dc;console[_0x240ee6(0x1d7)](getTimeStamp()+_0x240ee6(0x20d));}function validateTelegram(_0x4c3e7e){const _0x1420cd=_0x5c15dc;if(_0x4c3e7e[_0x1420cd(0x200)][_0x1420cd(0x1bd)]!=settings['telegramUsername']&&'@'+_0x4c3e7e[_0x1420cd(0x200)][_0x1420cd(0x1bd)]!=settings[_0x1420cd(0x202)])return tgBot[_0x1420cd(0x244)](_0x4c3e7e[_0x1420cd(0x19c)]['id'],_0x1420cd(0x1f1),{'parse_mode':'HTML'})[_0x1420cd(0x18e)](_0x25f2e0=>{telegramError(_0x25f2e0);}),![];return!![];}async function initTelegram(){const _0x2e60bc=_0x5c15dc;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2e60bc(0x223)],{'polling':!![]});let _0x27e65e='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x27e65e+='\x0a',_0x27e65e+=_0x2e60bc(0x219),_0x27e65e+=_0x2e60bc(0x1d4),_0x27e65e+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x27e65e+=_0x2e60bc(0x142),_0x27e65e+=_0x2e60bc(0x112),_0x27e65e+=_0x2e60bc(0x190),_0x27e65e+=_0x2e60bc(0x164),_0x27e65e+=_0x2e60bc(0x1d5);let _0x126f69='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x126f69+='\x0a',_0x126f69+=_0x27e65e,tgBot['onText'](/\/start/,_0x471a06=>{const _0x486499=_0x2e60bc;if(!validateTelegram(_0x471a06))return;if(settings['telegramChatId']!=_0x471a06['chat']['id'])updateSetting(_0x486499(0x140),_0x471a06[_0x486499(0x19c)]['id']);updateSetting(_0x486499(0x158),!![]),tgBot[_0x486499(0x244)](_0x471a06[_0x486499(0x19c)]['id'],_0x126f69)[_0x486499(0x18e)](_0x4dcfba=>{telegramError(_0x4dcfba);});}),tgBot[_0x2e60bc(0x1c1)](/\/enable/,_0x1a9eaa=>{const _0x897a89=_0x2e60bc;if(!validateTelegram(_0x1a9eaa))return;if(settings['telegramChatId']!=_0x1a9eaa[_0x897a89(0x19c)]['id'])updateSetting(_0x897a89(0x140),_0x1a9eaa['chat']['id']);updateSetting(_0x897a89(0x158),!![]),tgBot[_0x897a89(0x244)](_0x1a9eaa[_0x897a89(0x19c)]['id'],'Notifications\x20enabled')[_0x897a89(0x18e)](_0x173eb3=>{telegramError(_0x173eb3);});}),tgBot[_0x2e60bc(0x1c1)](/\/config/,async _0x6e99fa=>{const _0x3cb624=_0x2e60bc;if(!validateTelegram(_0x6e99fa))return;tgBot[_0x3cb624(0x1ae)](_0x3cb624(0x16a)),tgBot[_0x3cb624(0x244)](_0x6e99fa[_0x3cb624(0x19c)]['id'],_0x3cb624(0x1af),{'reply_markup':{'inline_keyboard':[[{'text':_0x3cb624(0x1f8),'callback_data':_0x3cb624(0x210)},{'text':_0x3cb624(0x237),'callback_data':_0x3cb624(0x124)},{'text':_0x3cb624(0x187),'callback_data':'all'}]]}})['catch'](_0x317712=>{telegramError(_0x317712);}),tgBot['on'](_0x3cb624(0x16a),async _0x1622ab=>{const _0x336021=_0x3cb624,_0x2d1bff=_0x1622ab[_0x336021(0x253)],_0x7edcfb=_0x1622ab[_0x336021(0x245)];tgBot[_0x336021(0x1e0)](_0x1622ab['id'])[_0x336021(0x16c)](async()=>{const _0x5210c2=_0x336021;_0x2d1bff=='orders'&&(updateSetting(_0x5210c2(0x19e),'orders'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x7edcfb[_0x5210c2(0x19c)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x5210c2(0x18e)](_0x59c854=>{telegramError(_0x59c854);}));_0x2d1bff=='alerts'&&(updateSetting(_0x5210c2(0x19e),_0x5210c2(0x124)),updateSetting(_0x5210c2(0x158),!![]),await tgBot[_0x5210c2(0x244)](_0x7edcfb[_0x5210c2(0x19c)]['id'],_0x5210c2(0x1d0))[_0x5210c2(0x18e)](_0x17eb29=>{telegramError(_0x17eb29);}));_0x2d1bff=='all'&&(updateSetting(_0x5210c2(0x19e),_0x5210c2(0x211)),updateSetting(_0x5210c2(0x158),!![]),await tgBot['sendMessage'](_0x7edcfb['chat']['id'],_0x5210c2(0x171))[_0x5210c2(0x18e)](_0x3ea985=>{telegramError(_0x3ea985);}));if(!settings['telegramChatId'])tgBot[_0x5210c2(0x244)](_0x7edcfb[_0x5210c2(0x19c)]['id'],_0x5210c2(0x229))[_0x5210c2(0x18e)](_0x325279=>{telegramError(_0x325279);});}),tgBot[_0x336021(0x1ae)](_0x336021(0x16a));});}),tgBot[_0x2e60bc(0x1c1)](/\/status/,_0x4edcba=>{const _0x404612=_0x2e60bc;if(!validateTelegram(_0x4edcba))return;let _0x2cf943='<b>Balance\x20Bot\x20status:</b>\x0a';config['forEach'](_0x1acda3=>{const _0x11aa0c=_0x4fdd;_0x2cf943+='Bot\x20'+_0x1acda3[_0x11aa0c(0x128)]+_0x11aa0c(0x184)+_0x1acda3[_0x11aa0c(0x1ed)]+':\x20'+_0x1acda3[_0x11aa0c(0x225)]+'\x20/\x20'+_0x1acda3[_0x11aa0c(0x145)]+'\x0a';}),_0x2cf943+='\x0a',_0x2cf943+=_0x404612(0x15a),_0x2cf943+=!settings[_0x404612(0x158)]?_0x404612(0x15d):_0x404612(0x1e2),_0x2cf943+=settings[_0x404612(0x158)]?settings[_0x404612(0x19e)]==_0x404612(0x211)?_0x404612(0x241):_0x404612(0x1a5)+settings['telegramEvents']+_0x404612(0x126):'',tgBot[_0x404612(0x244)](_0x4edcba[_0x404612(0x19c)]['id'],_0x2cf943,{'parse_mode':'HTML'})[_0x404612(0x18e)](_0x1eecf3=>{telegramError(_0x1eecf3);});}),tgBot[_0x2e60bc(0x1c1)](/\/restart/,_0x3bea7e=>{const _0xd7d767=_0x2e60bc;if(!validateTelegram(_0x3bea7e))return;tgBot['removeListener']('callback_query');const _0x3152fa=getEnabledBots();if(_0x3152fa[_0xd7d767(0x12a)]==0x0)tgBot[_0xd7d767(0x244)](_0x3bea7e['chat']['id'],_0xd7d767(0x178))[_0xd7d767(0x18e)](_0x389b64=>{telegramError(_0x389b64);});else{if(_0x3152fa[_0xd7d767(0x12a)]>0x1)_0x3152fa[_0xd7d767(0x1ff)]({'botID':_0xd7d767(0x211)});let _0x528ffd=[],_0x23a2be=[];const _0x29b17b=_0x3152fa[_0xd7d767(0x12a)]%0x4==0x0||_0x3152fa['length']%0x4==0x3||_0x3152fa[_0xd7d767(0x12a)]%0x3==0x1?0x4:0x3;let _0x311a38=0x0;_0x3152fa[_0xd7d767(0x1cf)]((_0x23bd85,_0x17cb42)=>{const _0x3afde0=_0xd7d767;if(_0x17cb42%_0x29b17b==0x0)_0x23a2be=[];_0x23a2be[_0x3afde0(0x1ff)]({'text':_0x23bd85[_0x3afde0(0x128)]=='all'?_0x3afde0(0x1b8):_0x3afde0(0x1c8)+_0x23bd85[_0x3afde0(0x128)],'callback_data':_0x23bd85[_0x3afde0(0x128)]}),_0x17cb42%_0x29b17b==0x0&&(_0x528ffd[_0x311a38]=_0x23a2be,_0x311a38++);}),tgBot[_0xd7d767(0x244)](_0x3bea7e[_0xd7d767(0x19c)]['id'],_0xd7d767(0x138),{'reply_markup':{'inline_keyboard':_0x528ffd}})[_0xd7d767(0x18e)](_0x36d577=>{telegramError(_0x36d577);}),tgBot['on'](_0xd7d767(0x16a),async _0x167dcd=>{const _0x3a93cf=_0xd7d767,_0x2fbc51=_0x167dcd[_0x3a93cf(0x253)],_0x290e04=_0x167dcd[_0x3a93cf(0x245)];tgBot[_0x3a93cf(0x1e0)](_0x167dcd['id'])[_0x3a93cf(0x16c)](async()=>{const _0x2658c9=_0x3a93cf;if(_0x2fbc51==_0x2658c9(0x211)){if(settings[_0x2658c9(0x19e)]==_0x2658c9(0x210))tgBot[_0x2658c9(0x244)](_0x290e04[_0x2658c9(0x19c)]['id'],_0x2658c9(0x242))[_0x2658c9(0x18e)](_0x4a77c9=>{telegramError(_0x4a77c9);});config[_0x2658c9(0x1cf)](_0x2fbcb9=>{stopBot(_0x2fbcb9['botID']);});}else{if(settings[_0x2658c9(0x19e)]==_0x2658c9(0x210))tgBot[_0x2658c9(0x244)](_0x290e04[_0x2658c9(0x19c)]['id'],_0x2658c9(0x222)+_0x2fbc51)[_0x2658c9(0x18e)](_0x4012c5=>{telegramError(_0x4012c5);});stopBot(_0x2fbc51);}}),tgBot[_0x3a93cf(0x1ae)](_0x3a93cf(0x16a));});}}),tgBot[_0x2e60bc(0x1c1)](/\/on/,_0x563c6f=>{const _0x13301f=_0x2e60bc;if(!validateTelegram(_0x563c6f))return;tgBot[_0x13301f(0x1ae)](_0x13301f(0x16a));const _0x3adefa=getDisabledBots();if(_0x3adefa['length']==0x0)tgBot[_0x13301f(0x244)](_0x563c6f[_0x13301f(0x19c)]['id'],_0x13301f(0x11c))['catch'](_0x45cd4e=>{telegramError(_0x45cd4e);});else{if(_0x3adefa[_0x13301f(0x12a)]>0x1)_0x3adefa[_0x13301f(0x1ff)]({'botID':_0x13301f(0x211)});let _0x219dea=[],_0x4fd6f5=[];const _0xcbdcd0=_0x3adefa[_0x13301f(0x12a)]%0x4==0x0||_0x3adefa[_0x13301f(0x12a)]%0x4==0x3||_0x3adefa[_0x13301f(0x12a)]%0x3==0x1?0x4:0x3;let _0x1a10a7=0x0;_0x3adefa[_0x13301f(0x1cf)]((_0x20f330,_0x39a447)=>{const _0x41a7e8=_0x13301f;if(_0x39a447%_0xcbdcd0==0x0)_0x4fd6f5=[];_0x4fd6f5['push']({'text':_0x20f330[_0x41a7e8(0x128)]=='all'?_0x41a7e8(0x1b8):_0x41a7e8(0x1c8)+_0x20f330[_0x41a7e8(0x128)],'callback_data':_0x20f330[_0x41a7e8(0x128)]}),_0x39a447%_0xcbdcd0==0x0&&(_0x219dea[_0x1a10a7]=_0x4fd6f5,_0x1a10a7++);}),tgBot['sendMessage'](_0x563c6f[_0x13301f(0x19c)]['id'],_0x13301f(0x1f7),{'reply_markup':{'inline_keyboard':_0x219dea}})[_0x13301f(0x18e)](_0x47859b=>{telegramError(_0x47859b);}),tgBot['on'](_0x13301f(0x16a),async _0xe95db9=>{const _0x45fc1f=_0x13301f,_0x59ae92=_0xe95db9['data'],_0x109ea8=_0xe95db9[_0x45fc1f(0x245)];tgBot[_0x45fc1f(0x1e0)](_0xe95db9['id'])[_0x45fc1f(0x16c)](async()=>{const _0x2e50d3=_0x45fc1f;if(_0x59ae92==_0x2e50d3(0x211)){if(settings['telegramEvents']==_0x2e50d3(0x210))tgBot[_0x2e50d3(0x244)](_0x109ea8['chat']['id'],_0x2e50d3(0x161))[_0x2e50d3(0x18e)](_0x8b6438=>{telegramError(_0x8b6438);});_0x3adefa[_0x2e50d3(0x1cf)](_0x4ec3a8=>{const _0x3f37f0=_0x2e50d3;if(_0x4ec3a8['botID']!=_0x3f37f0(0x211))toggleBot(_0x4ec3a8[_0x3f37f0(0x128)],toggleStatus(_0x4ec3a8[_0x3f37f0(0x128)]),_0x3f37f0(0x235));});}else{if(settings['telegramEvents']==_0x2e50d3(0x210))tgBot[_0x2e50d3(0x244)](_0x109ea8[_0x2e50d3(0x19c)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x59ae92)['catch'](_0x2ca9d9=>{telegramError(_0x2ca9d9);});toggleBot(_0x59ae92,toggleStatus(_0x59ae92),_0x2e50d3(0x235));}}),tgBot[_0x45fc1f(0x1ae)]('callback_query');});}}),tgBot[_0x2e60bc(0x1c1)](/\/off/,_0x193796=>{const _0x2542f1=_0x2e60bc;if(!validateTelegram(_0x193796))return;tgBot[_0x2542f1(0x1ae)](_0x2542f1(0x16a));const _0x1a9286=getEnabledBots();if(_0x1a9286['length']==0x0)tgBot[_0x2542f1(0x244)](_0x193796[_0x2542f1(0x19c)]['id'],_0x2542f1(0x178))[_0x2542f1(0x18e)](_0x30b6c3=>{telegramError(_0x30b6c3);});else{if(_0x1a9286[_0x2542f1(0x12a)]>0x1)_0x1a9286['push']({'botID':_0x2542f1(0x211)});let _0x2c3ba5=[],_0x2160fc=[];const _0x437f4f=_0x1a9286[_0x2542f1(0x12a)]%0x4==0x0||_0x1a9286[_0x2542f1(0x12a)]%0x4==0x3||_0x1a9286[_0x2542f1(0x12a)]%0x3==0x1?0x4:0x3;let _0x4c1f3a=0x0;_0x1a9286['forEach']((_0x515cfc,_0x52a7c7)=>{const _0xab048b=_0x2542f1;if(_0x52a7c7%_0x437f4f==0x0)_0x2160fc=[];_0x2160fc['push']({'text':_0x515cfc['botID']==_0xab048b(0x211)?_0xab048b(0x1b8):_0xab048b(0x1c8)+_0x515cfc['botID'],'callback_data':_0x515cfc[_0xab048b(0x128)]}),_0x52a7c7%_0x437f4f==0x0&&(_0x2c3ba5[_0x4c1f3a]=_0x2160fc,_0x4c1f3a++);}),tgBot[_0x2542f1(0x244)](_0x193796[_0x2542f1(0x19c)]['id'],_0x2542f1(0x1c0),{'reply_markup':{'inline_keyboard':_0x2c3ba5}})[_0x2542f1(0x18e)](_0x1846ca=>{telegramError(_0x1846ca);}),tgBot['on']('callback_query',async _0x10bdda=>{const _0x15c461=_0x2542f1,_0x1ef766=_0x10bdda['data'],_0x5f15d2=_0x10bdda[_0x15c461(0x245)];tgBot['answerCallbackQuery'](_0x10bdda['id'])[_0x15c461(0x16c)](async()=>{const _0x443467=_0x15c461;if(_0x1ef766==_0x443467(0x211)){if(settings[_0x443467(0x19e)]==_0x443467(0x210))tgBot[_0x443467(0x244)](_0x5f15d2[_0x443467(0x19c)]['id'],_0x443467(0x226))[_0x443467(0x18e)](_0x4f6cd1=>{telegramError(_0x4f6cd1);});_0x1a9286[_0x443467(0x1cf)](_0x1627f7=>{const _0x1933ed=_0x443467;if(_0x1627f7[_0x1933ed(0x128)]!=_0x1933ed(0x211))toggleBot(_0x1627f7[_0x1933ed(0x128)],toggleStatus(_0x1627f7[_0x1933ed(0x128)]),_0x1933ed(0x235));});}else{if(settings[_0x443467(0x19e)]==_0x443467(0x210))tgBot[_0x443467(0x244)](_0x5f15d2['chat']['id'],_0x443467(0x1b0)+_0x1ef766)['catch'](_0x9bf959=>{telegramError(_0x9bf959);});toggleBot(_0x1ef766,toggleStatus(_0x1ef766),_0x443467(0x235));}}),tgBot[_0x15c461(0x1ae)](_0x15c461(0x16a));});}}),tgBot[_0x2e60bc(0x1c1)](/\/disable/,_0x2eda37=>{const _0x3c1907=_0x2e60bc;if(!validateTelegram(_0x2eda37))return;tgBot['sendMessage'](_0x2eda37[_0x3c1907(0x19c)]['id'],_0x3c1907(0x180))[_0x3c1907(0x18e)](_0x46c408=>{telegramError(_0x46c408);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2e60bc(0x1c1)](/\/help/,_0x304a26=>{const _0x1d319c=_0x2e60bc;if(!validateTelegram(_0x304a26))return;tgBot['sendMessage'](_0x304a26[_0x1d319c(0x19c)]['id'],_0x27e65e)[_0x1d319c(0x18e)](_0x496a5d=>{telegramError(_0x496a5d);});}),tgBot['on'](_0x2e60bc(0x18b),_0x31326e=>{const _0x41f86c=_0x2e60bc;_0x31326e[_0x41f86c(0x22a)]()['includes'](_0x41f86c(0x20e))&&(logging(_0x41f86c(0x1d1)),tgBot[_0x41f86c(0x11b)](),tgBot=null,io['to'](_0x41f86c(0x22c))[_0x41f86c(0x179)](_0x41f86c(0x186),_0x41f86c(0x1d1)));}),process[_0x2e60bc(0x1f6)](_0x2e60bc(0x227),()=>{const _0x441205=_0x2e60bc;if(tgBot)tgBot[_0x441205(0x11b)]();process[_0x441205(0x1bb)](0x1);}),process['once'](_0x2e60bc(0x255),()=>{const _0x3f7459=_0x2e60bc;if(tgBot)tgBot['stopPolling']();process[_0x3f7459(0x1bb)](0x1);});}}function disableTelegram(){const _0x4ab7d5=_0x5c15dc;tgBot&&(tgBot[_0x4ab7d5(0x11b)](),tgBot=null);}function sendTelegram(_0x25bb60,_0x86fa9){const _0x2518b8=_0x5c15dc;if(settings[_0x2518b8(0x158)]){if(settings['telegramEvents']==_0x2518b8(0x211)||(_0x86fa9[_0x2518b8(0x12f)]==_0x2518b8(0x11f)||_0x86fa9[_0x2518b8(0x12f)]=='success')&&settings[_0x2518b8(0x19e)]==_0x2518b8(0x124)||_0x86fa9[_0x2518b8(0x12f)]==_0x2518b8(0x11a)&&settings[_0x2518b8(0x19e)]==_0x2518b8(0x210)){if(tgBot&&settings[_0x2518b8(0x140)]){if(_0x86fa9[_0x2518b8(0x25a)])tgBot['sendMessage'](settings[_0x2518b8(0x140)],_0x86fa9[_0x2518b8(0x1ed)]+_0x2518b8(0x238)+_0x86fa9['event'])['catch'](_0x3dfc0f=>{telegramError(_0x3dfc0f);});else tgBot[_0x2518b8(0x244)](settings[_0x2518b8(0x140)],_0x2518b8(0x1c8)+_0x25bb60+_0x2518b8(0x238)+_0x86fa9[_0x2518b8(0x195)])[_0x2518b8(0x18e)](_0x42d80=>{telegramError(_0x42d80);});}}}}function getDeviceWithIp(_0x412935){const _0x41f611=_0x5c15dc;return devices[_0x41f611(0x240)](_0xaad4c=>_0xaad4c['ip']===_0x412935);}function temporaryAccess2FA(_0x180945,_0x32b01b){const _0x1ea30c=_0x5c15dc;let _0x39f68a=new Date(),_0x389071=![];if(lastIpApproval){if(_0x39f68a-lastIpApproval<0x1388)_0x389071=!![];}lastIpApproval=new Date();if(_0x389071)return;tgBot&&settings[_0x1ea30c(0x140)]&&(tgBot[_0x1ea30c(0x1ae)]('callback_query'),tgBot[_0x1ea30c(0x244)](settings['telegramChatId'],_0x1ea30c(0x1cb)+normalizeIP(_0x32b01b)[_0x1ea30c(0x1ea)]+_0x1ea30c(0x228),{'parse_mode':_0x1ea30c(0x14c),'reply_markup':{'inline_keyboard':[[{'text':_0x1ea30c(0x248),'callback_data':'5'},{'text':_0x1ea30c(0x24f),'callback_data':'15'},{'text':_0x1ea30c(0x1a3),'callback_data':'30'},{'text':'reject','callback_data':_0x1ea30c(0x1d8)}]]}})['catch'](_0x383f3d=>{telegramError(_0x383f3d);}),tgBot['on']('callback_query',async _0x364648=>{const _0x5c0207=_0x1ea30c,_0x3df811=_0x364648['data'],_0x592fc1=_0x364648['message'];tgBot[_0x5c0207(0x1e0)](_0x364648['id'])[_0x5c0207(0x16c)](async()=>{const _0x3f2959=_0x5c0207;devices[_0x180945]['telegramIpApproval']={'clientip':_0x32b01b,'timestamp':new Date()[_0x3f2959(0x160)](),'expiry':_0x3df811},_0x3df811!=_0x3f2959(0x1d8)?(await tgBot[_0x3f2959(0x244)](_0x592fc1[_0x3f2959(0x19c)]['id'],_0x3f2959(0x1c2)+_0x3df811+_0x3f2959(0x1f2),{'parse_mode':_0x3f2959(0x14c)})[_0x3f2959(0x18e)](_0x222a38=>{telegramError(_0x222a38);}),io['to'](_0x180945)[_0x3f2959(0x179)]('status',{'access':{'allow':![],'reason':_0x3f2959(0x21a),'token':null}})):(await tgBot['sendMessage'](_0x592fc1[_0x3f2959(0x19c)]['id'],'Temporary\x20access\x20rejected')[_0x3f2959(0x18e)](_0x4aa1fa=>{telegramError(_0x4aa1fa);}),io['to'](_0x180945)['emit'](_0x3f2959(0x225),{'access':{'allow':![],'reason':_0x3f2959(0x1f9),'token':null}}));}),tgBot[_0x5c0207(0x1ae)](_0x5c0207(0x16a));}));}function loginAccess2FA(_0x31a7d5,_0x4d6158){const _0x3b0219=_0x5c15dc;tgBot&&settings[_0x3b0219(0x140)]&&(tgBot['removeListener'](_0x3b0219(0x16a)),tgBot[_0x3b0219(0x244)](settings[_0x3b0219(0x140)],_0x3b0219(0x257)+normalizeIP(_0x4d6158)[_0x3b0219(0x1ea)]+'</b>\x20?',{'parse_mode':_0x3b0219(0x14c),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3b0219(0x1d8),'callback_data':'reject'}]]}})[_0x3b0219(0x18e)](_0x31e9b7=>{telegramError(_0x31e9b7);}),tgBot['on']('callback_query',async _0x14c2cc=>{const _0x5288a0=_0x3b0219,_0x1000c1=_0x14c2cc['data'],_0x4f98aa=_0x14c2cc['message'];tgBot[_0x5288a0(0x1e0)](_0x14c2cc['id'])[_0x5288a0(0x16c)](async()=>{const _0x53f0ee=_0x5288a0;devices[_0x31a7d5][_0x53f0ee(0x25c)]={'clientip':_0x4d6158,'timestamp':new Date()[_0x53f0ee(0x160)](),'expiry':_0x1000c1},_0x1000c1!=_0x53f0ee(0x1d8)?(await tgBot[_0x53f0ee(0x244)](_0x4f98aa['chat']['id'],'Login\x20accepted',{'parse_mode':_0x53f0ee(0x14c)})[_0x53f0ee(0x18e)](_0x42963f=>{telegramError(_0x42963f);}),io['to'](_0x31a7d5)[_0x53f0ee(0x179)]('status',{'access':{'allow':![],'reason':_0x53f0ee(0x21a),'token':null}})):(await tgBot[_0x53f0ee(0x244)](_0x4f98aa['chat']['id'],_0x53f0ee(0x20b))[_0x53f0ee(0x18e)](_0x170190=>{telegramError(_0x170190);}),io['to'](_0x31a7d5)['emit'](_0x53f0ee(0x225),{'access':{'allow':![],'reason':_0x53f0ee(0x22d),'token':null}}));}),tgBot[_0x5288a0(0x1ae)](_0x5288a0(0x16a));}));}function getConfiguration(){const _0xa8996b=_0x5c15dc;return dbConfig[_0xa8996b(0x135)](_0xa8996b(0x194))[_0xa8996b(0x247)]('botID')[_0xa8996b(0x250)]()||[];}function getEnabledBots(){const _0x15426a=_0x5c15dc;return dbConfig[_0x15426a(0x135)](_0x15426a(0x194))['sortBy'](_0x15426a(0x128))['filter']({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x127eec=_0x5c15dc;return dbConfig[_0x127eec(0x135)](_0x127eec(0x194))['sortBy'](_0x127eec(0x128))[_0x127eec(0x1a0)]({'status':_0x127eec(0x130)})[_0x127eec(0x250)]()||[];}function getSettings(){const _0x345cda=_0x5c15dc;return dbSettings[_0x345cda(0x135)]('settings')[_0x345cda(0x250)]()||{'timeshift':0x0};}function getSecure(){const _0x47859a=_0x5c15dc;return dbSecure['get'](_0x47859a(0x24c))['value']()||{};}function getBlacklist(){const _0x28f36d=_0x5c15dc;return dbSecure[_0x28f36d(0x135)](_0x28f36d(0x16d))[_0x28f36d(0x250)]()||[];}function broadcastToBots(_0x3f1ade,_0x40066c){const _0xbe67a5=_0x5c15dc;config[_0xbe67a5(0x1cf)](_0x1fd9cd=>{const _0x4cd738=_0xbe67a5;if(_0x1fd9cd[_0x4cd738(0x225)]==_0x4cd738(0x21c)&&_0x1fd9cd[_0x4cd738(0x145)]=='running'){if(pid[_0x1fd9cd[_0x4cd738(0x128)]])pid[_0x1fd9cd[_0x4cd738(0x128)]][_0x4cd738(0x122)]({[_0x3f1ade]:_0x40066c});}});}function storeSettings(_0x5be2eb,_0x12aa82=![]){const _0x34a881=_0x5c15dc;_0x5be2eb={...settings,..._0x5be2eb};if(_0x12aa82&&_0x5be2eb[_0x34a881(0x13a)]!='************'&&_0x5be2eb[_0x34a881(0x13a)]!=''){const _0x135e66=crypt[_0x34a881(0x18a)](secure[_0x34a881(0x19b)],_0x5be2eb[_0x34a881(0x13a)])[_0x34a881(0x245)]['split']('@')[0x0],_0x5ab1fd=bcrypt[_0x34a881(0x146)](_0x135e66,saltRounds);_0x5be2eb={..._0x5be2eb,'bbPassword':_0x5ab1fd};}if(_0x12aa82&&_0x5be2eb[_0x34a881(0x223)]!='************'&&_0x5be2eb[_0x34a881(0x223)]!=''){const _0x4fad2c=crypt[_0x34a881(0x18a)](secure[_0x34a881(0x19b)],_0x5be2eb[_0x34a881(0x223)])[_0x34a881(0x245)]['split']('@')[0x0];_0x5be2eb={..._0x5be2eb,'telegramToken':_0x4fad2c};}const _0x253869=_0x5be2eb[_0x34a881(0x223)]!=_0x34a881(0x24b)&&_0x5be2eb[_0x34a881(0x223)]!=settings[_0x34a881(0x223)]||_0x5be2eb[_0x34a881(0x202)]!=settings[_0x34a881(0x202)],_0x5ed631=_0x5be2eb[_0x34a881(0x223)]==''||_0x5be2eb[_0x34a881(0x202)]=='';if(_0x253869)_0x5be2eb[_0x34a881(0x19e)]='all';for(const [_0xcece78,_0x533449]of Object[_0x34a881(0x148)](_0x5be2eb)){if(_0xcece78==_0x34a881(0x223)&&_0x533449==_0x34a881(0x24b)){_0x5be2eb[_0x34a881(0x223)]=settings[_0x34a881(0x223)];continue;};if(_0xcece78==_0x34a881(0x13a)&&_0x533449==_0x34a881(0x24b)){_0x5be2eb[_0x34a881(0x13a)]=settings[_0x34a881(0x13a)];continue;};dbSettings[_0x34a881(0x116)](_0x34a881(0x220)+_0xcece78,_0x533449)[_0x34a881(0x16e)]();}settings=_0x5be2eb,io['to'](_0x34a881(0x22c))[_0x34a881(0x179)](_0x34a881(0x162),cleanSettings()),broadcastToBots(_0x34a881(0x212),settings[_0x34a881(0x212)]);if(_0x253869&&!_0x5ed631)initTelegram();if(_0x253869&&_0x5ed631)disableTelegram();getAllClients()[_0x34a881(0x1cf)](_0x1c5446=>{const _0x3b1db5=_0x34a881;getSocket(_0x1c5446['id'])[_0x3b1db5(0x179)](_0x3b1db5(0x225),{'access':{'allow':![],'reason':_0x3b1db5(0x21a),'token':null}});});}function updateSetting(_0x163eb2,_0x233681){const _0x580316=_0x5c15dc;dbSettings[_0x580316(0x116)](_0x580316(0x220)+_0x163eb2,_0x233681)['write'](),settings=getSettings(),io['to'](_0x580316(0x22c))[_0x580316(0x179)](_0x580316(0x162),cleanSettings());}function storeSecure(_0x10f7a6){const _0x3b73b9=_0x5c15dc;dbSecure['get'](_0x3b73b9(0x24c))[_0x3b73b9(0x1ff)](_0x10f7a6)[_0x3b73b9(0x16e)](),secure=_0x10f7a6;}function addBlacklist(_0x4f9288){const _0x19e1db=_0x5c15dc;cleanBlacklist();let _0x4ef14e;devices[_0x4f9288][_0x19e1db(0x165)]?_0x4ef14e=Math['max'](devices[_0x4f9288][_0x19e1db(0x165)][_0x19e1db(0x23f)],loginExpiry):_0x4ef14e=loginExpiry,dbSecure[_0x19e1db(0x135)](_0x19e1db(0x16d))[_0x19e1db(0x1ff)]({'expiry':new Date()[_0x19e1db(0x160)]()+_0x4ef14e*0x3c*0x3e8,'token':devices[_0x4f9288]['access']['token']})['write'](),blacklist=dbSecure[_0x19e1db(0x135)](_0x19e1db(0x16d))[_0x19e1db(0x250)]();}function cleanBlacklist(){const _0x42b983=_0x5c15dc;let _0x273314=dbSecure['get'](_0x42b983(0x16d))[_0x42b983(0x1cd)]()[_0x42b983(0x250)](),_0x2e5493=new Date()[_0x42b983(0x160)]();_0x273314[_0x42b983(0x1cf)](_0x3828e7=>{const _0x2ffd32=_0x42b983;_0x3828e7[_0x2ffd32(0x23f)]<_0x2e5493&&dbSecure['get'](_0x2ffd32(0x16d))['remove']({'expiry':_0x3828e7['expiry']})['write']();});}function initStates(){const _0x5e7a5a=_0x5c15dc;let _0x20e4f2=getConfiguration();_0x20e4f2[_0x5e7a5a(0x1cf)](_0x13ee9=>{const _0x3daf07=_0x5e7a5a;_0x13ee9[_0x3daf07(0x145)]=_0x3daf07(0x235);}),storeConfiguration(_0x20e4f2);}function onKeys(){const _0x45df67=new RSA();return new Promise(_0x16fc26=>{const _0x495ad6=_0x4fdd;_0x45df67['generateKeyPairAsync']()[_0x495ad6(0x16c)](_0x40e5d8=>{_0x16fc26(_0x40e5d8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x8f20a7=_0x5c15dc;let _0x20bf1e=getConfiguration(),_0x5010a0=![];_0x20bf1e[_0x8f20a7(0x1cf)](_0x5c3f22=>{const _0x58282a=_0x8f20a7;if(_0x5c3f22[_0x58282a(0x225)]==_0x58282a(0x1b9))_0x5c3f22[_0x58282a(0x225)]=_0x58282a(0x21c),_0x5010a0=!![];else _0x5c3f22[_0x58282a(0x225)]==_0x58282a(0x235)&&(_0x5c3f22[_0x58282a(0x225)]='disabled',_0x5010a0=!![]);});if(_0x5010a0)storeConfiguration(_0x20bf1e);let _0x28fb9f=getSecure();if(!_0x28fb9f[_0x8f20a7(0x1df)](_0x8f20a7(0x17a))){let _0x8c032=await generateKeys();_0x28fb9f['publicKey']=_0x8c032[_0x8f20a7(0x218)],_0x28fb9f[_0x8f20a7(0x19b)]=_0x8c032[_0x8f20a7(0x19b)],_0x28fb9f[_0x8f20a7(0x17a)]=crypto[_0x8f20a7(0x1d2)](0x20)[_0x8f20a7(0x22a)](_0x8f20a7(0x1a2));;storeSecure(_0x28fb9f);}let _0x5cd5c7=getSettings();_0x5010a0=![];!_0x5cd5c7[_0x8f20a7(0x1df)](_0x8f20a7(0x1b2))&&(_0x5cd5c7[_0x8f20a7(0x1b2)]=![],_0x5cd5c7['bbUsername']='',_0x5cd5c7[_0x8f20a7(0x13a)]='',_0x5cd5c7[_0x8f20a7(0x120)]=![],_0x5010a0=!![]);!_0x5cd5c7[_0x8f20a7(0x1df)](_0x8f20a7(0x1f3))&&(_0x5cd5c7[_0x8f20a7(0x1f3)]=![],_0x5cd5c7[_0x8f20a7(0x155)]=[],_0x5cd5c7[_0x8f20a7(0x168)]=![],_0x5010a0=!![]);if(!_0x5cd5c7[_0x8f20a7(0x1df)](_0x8f20a7(0x158))){if(_0x5cd5c7[_0x8f20a7(0x140)])_0x5cd5c7[_0x8f20a7(0x158)]=!![];else _0x5cd5c7[_0x8f20a7(0x158)]=![];_0x5010a0=!![];}if(_0x5010a0)storeSettings(_0x5cd5c7);}function storeConfiguration(_0x3c4562){const _0x4c5773=_0x5c15dc;dbConfig['get']('bots')['remove']()[_0x4c5773(0x16e)](),dbConfig[_0x4c5773(0x135)](_0x4c5773(0x194))[_0x4c5773(0x1ff)](..._0x3c4562)[_0x4c5773(0x16e)](),config=_0x3c4562;}function resetPassword(){const _0x82ecaa=_0x5c15dc;tgBot&&settings[_0x82ecaa(0x140)]&&(tgBot[_0x82ecaa(0x1ae)](_0x82ecaa(0x16a)),tgBot[_0x82ecaa(0x244)](settings[_0x82ecaa(0x140)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x82ecaa(0x198),'callback_data':_0x82ecaa(0x198)},{'text':'no','callback_data':'no'}]]}})[_0x82ecaa(0x18e)](_0x13a276=>{telegramError(_0x13a276);}),tgBot['on'](_0x82ecaa(0x16a),async _0x42cad2=>{const _0xbc55fe=_0x82ecaa,_0x368751=_0x42cad2[_0xbc55fe(0x253)],_0x10972f=_0x42cad2['message'];tgBot['answerCallbackQuery'](_0x42cad2['id'])[_0xbc55fe(0x16c)](async()=>{const _0x4d58c9=_0xbc55fe;if(_0x368751!='no'){const _0x401aca=0xf,_0x3745bb=_0x4d58c9(0x1e3),_0x4a97a4=Array[_0x4d58c9(0x200)](crypto[_0x4d58c9(0x153)](new Uint32Array(_0x401aca)))[_0x4d58c9(0x21e)](_0x52bc51=>_0x3745bb[_0x52bc51%_0x3745bb[_0x4d58c9(0x12a)]])[_0x4d58c9(0x166)](''),_0x54da7f=bcrypt[_0x4d58c9(0x146)](_0x4a97a4,saltRounds);storeSettings({'bbPassword':_0x54da7f}),await tgBot[_0x4d58c9(0x244)](_0x10972f['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4a97a4,{'parse_mode':'HTML'})['catch'](_0x3f4ba3=>{telegramError(_0x3f4ba3);});}else await tgBot[_0x4d58c9(0x244)](_0x10972f[_0x4d58c9(0x19c)]['id'],_0x4d58c9(0x19a))[_0x4d58c9(0x18e)](_0x331cc6=>{telegramError(_0x331cc6);});}),tgBot['removeListener'](_0xbc55fe(0x16a));}));}function logging(_0x168bf7){const _0x506138=_0x5c15dc;console['log'](getTimeStamp()+_0x506138(0x22e)+_0x168bf7);if(tgBot&&settings[_0x506138(0x140)]&&settings[_0x506138(0x19e)]!=_0x506138(0x210))tgBot['sendMessage'](settings[_0x506138(0x140)],_0x506138(0x11d)+_0x168bf7)[_0x506138(0x18e)](_0x3292ab=>{telegramError(_0x3292ab);});}function getServerTime(){const _0x518e64=_0x5c15dc,_0x2c7b3d=new Date();return _0x2c7b3d[_0x518e64(0x170)]()+'/'+(_0x2c7b3d['getMonth']()+0x1)[_0x518e64(0x22a)]()[_0x518e64(0x21f)](0x2,'0')+'/'+_0x2c7b3d[_0x518e64(0x203)]()[_0x518e64(0x22a)]()[_0x518e64(0x21f)](0x2,'0')+'\x20'+_0x2c7b3d[_0x518e64(0x117)]()['toString']()[_0x518e64(0x21f)](0x2,'0')+':'+_0x2c7b3d[_0x518e64(0x132)]()['toString']()[_0x518e64(0x21f)](0x2,'0')+':'+_0x2c7b3d[_0x518e64(0x215)]()[_0x518e64(0x22a)]()[_0x518e64(0x21f)](0x2,'0');}function getTimeStamp(){const _0x24e3f0=_0x5c15dc,_0x26f693=shiftedTime();return _0x26f693[_0x24e3f0(0x170)]()+'/'+(_0x26f693[_0x24e3f0(0x1b3)]()+0x1)[_0x24e3f0(0x22a)]()[_0x24e3f0(0x21f)](0x2,'0')+'/'+_0x26f693[_0x24e3f0(0x203)]()[_0x24e3f0(0x22a)]()[_0x24e3f0(0x21f)](0x2,'0')+'\x20'+_0x26f693['getHours']()[_0x24e3f0(0x22a)]()[_0x24e3f0(0x21f)](0x2,'0')+':'+_0x26f693[_0x24e3f0(0x132)]()[_0x24e3f0(0x22a)]()[_0x24e3f0(0x21f)](0x2,'0')+':'+_0x26f693[_0x24e3f0(0x215)]()[_0x24e3f0(0x22a)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x4bc56d=_0x5c15dc,_0x5d745c=new Date();let _0xb2f402=_0x5d745c;if(settings[_0x4bc56d(0x212)]&&settings['timeshift']!==0x0)_0xb2f402=fns[_0x4bc56d(0x1b1)](_0x5d745c,{'hours':settings[_0x4bc56d(0x212)]});return _0xb2f402;}function startScheduler(){const _0x5c881f=_0x5c15dc;let _0x96998d=new Date()[_0x5c881f(0x21d)]();_0x96998d==0x1&&backupConfigFiles();_0x96998d==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4a3e0e=_0x5c15dc;fs[_0x4a3e0e(0x114)](configpath,{'withFileTypes':!![]})['forEach'](_0x515c76=>{const _0xbdd4cd=_0x4a3e0e;if(!_0x515c76['isDirectory']())fs[_0xbdd4cd(0x1b6)](configpath+_0x515c76[_0xbdd4cd(0x131)],configbackuppath+_0x515c76[_0xbdd4cd(0x131)]);});}function triggerAnalytics(){const _0x202a3b=_0x5c15dc;analytics[_0x202a3b(0x10c)]({'title':'Balance\x20Bot\x20Server','href':_0x202a3b(0x254),'path':'/v'+serverversion});}function validateCredentials(_0x46621a,_0x2ad104){const _0x40b133=_0x5c15dc;if(_0x46621a[_0x40b133(0x1bd)]==settings['bbUsername']&&bcrypt[_0x40b133(0x23a)](_0x46621a[_0x40b133(0x1c3)],settings['bbPassword'])){if(settings[_0x40b133(0x120)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x20b242=generateLoginToken(_0x2ad104);return{'allow':!![],'reason':_0x40b133(0x115),'token':_0x20b242};}}else return{'allow':![],'reason':_0x40b133(0x13e),'token':null};}function refreshToken(_0x451051){const _0x37bd4e=_0x5c15dc,_0x5f5946=generateLoginToken(_0x451051);return{'allow':!![],'reason':_0x37bd4e(0x115),'token':_0x5f5946};}function validateAccess(_0x3c4bca,_0x40ddb8){const _0x1fc742=_0x5c15dc;let _0x11833f=devices[_0x40ddb8]['ip'],_0x5aa254;const _0xa27636=_0x284128=>{const _0x28becb=_0x4fdd;if(settings[_0x28becb(0x1b2)]){if(settings[_0x28becb(0x120)]){if(telegram2FaApproved(_0x40ddb8)){const _0xe65fe4=generateLoginToken(_0x40ddb8);return{'allow':!![],'reason':_0x28becb(0x1b5),'token':_0xe65fe4};}else return{'allow':![],'reason':_0x28becb(0x1cc),'token':null};}else return _0x5aa254=validToken(_0x284128,_0x40ddb8),_0x5aa254[_0x28becb(0x1df)](_0x28becb(0x152))?{'allow':!![],'reason':_0x28becb(0x176),'token':_0x284128}:{'allow':![],'reason':_0x28becb(0x1cc),'token':null};}else return{'allow':!![],'reason':_0x28becb(0x246),'token':null};};if(settings[_0x1fc742(0x1f3)]){let _0x1186f5=[...settings[_0x1fc742(0x155)],_0x1fc742(0x147),_0x1fc742(0x23e),_0x1fc742(0x208)];if(_0x1186f5[_0x1fc742(0x1f5)](_0x11833f))return _0xa27636(_0x3c4bca);else{_0x5aa254=validToken(_0x3c4bca,_0x40ddb8);if(_0x5aa254[_0x1fc742(0x1df)](_0x1fc742(0x152)))return _0xa27636(_0x3c4bca);else{if(telegramIpApproved(_0x40ddb8)){const _0x11b3df=generateToken(_0x40ddb8);return _0x5aa254=_0xa27636(_0x3c4bca),_0x5aa254[_0x1fc742(0x1a9)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x11b3df}:_0x5aa254;}else return settings[_0x1fc742(0x168)]?{'allow':![],'reason':_0x1fc742(0x14d),'token':null}:{'allow':![],'reason':_0x1fc742(0x224),'token':null};}}}else return _0xa27636(_0x3c4bca);}function timelyDecrypt(_0x38af4c,_0x539198=!![]){const _0x30ba6b=_0x5c15dc;if(_0x38af4c)try{const _0x33c3c7=crypt[_0x30ba6b(0x18a)](secure[_0x30ba6b(0x19b)],_0x38af4c)[_0x30ba6b(0x245)],_0x416148=_0x33c3c7[_0x30ba6b(0x233)]('@')[0x0],_0x5e2d6e=_0x33c3c7[_0x30ba6b(0x233)]('@')[0x1],_0x3291bc=new Date()[_0x30ba6b(0x160)]();if(_0x539198){if(_0x3291bc-_0x5e2d6e<maxSecretAge*0x3e8)return _0x416148;else return![];}else return _0x416148;}catch(_0x27eab5){return![];}else return![];}const validToken=(_0x23c2f9,_0x5ce8fb)=>{const _0x209286=_0x5c15dc,_0x287d89=devices[_0x5ce8fb]['ip'];if(!_0x23c2f9)return{'error':_0x209286(0x17d)};for(let _0xc13dd6 of blacklist){if(_0xc13dd6[_0x209286(0x121)]==_0x23c2f9)return{'error':_0x209286(0x19d)};}let _0x3eee03;try{_0x3eee03=jwt[_0x209286(0x150)](_0x23c2f9,secure[_0x209286(0x17a)]+_0x5ce8fb);}catch{return{'error':_0x209286(0x127)};}if(!_0x3eee03[_0x209286(0x1df)](_0x209286(0x201))&&!_0x3eee03[_0x209286(0x1df)]('username')||!_0x3eee03[_0x209286(0x1df)](_0x209286(0x1a6)))return{'error':_0x209286(0x183)};if(!_0x3eee03[_0x209286(0x1df)](_0x209286(0x1bd))&&_0x3eee03['hasOwnProperty'](_0x209286(0x201))){const {clientip:_0x306366}=_0x3eee03;return _0x287d89==_0x306366?{'success':_0x209286(0x216)}:{'error':_0x209286(0x119)};}else{if(_0x3eee03[_0x209286(0x1df)](_0x209286(0x1bd))&&_0x3eee03['hasOwnProperty']('clientip')){const {username:_0x3ebd4d,clientip:_0x4497b1}=_0x3eee03;return settings['bbUsername']==_0x3ebd4d&&_0x287d89==_0x4497b1?{'success':_0x209286(0x216)}:{'error':_0x209286(0x1c7)};}}},generateLoginToken=_0x112f02=>{const _0x2e2562=_0x5c15dc;if(_0x112f02){const _0x5da85e=devices[_0x112f02]['ip'];return jwt[_0x2e2562(0x1a1)]({'username':settings[_0x2e2562(0x251)],'clientip':_0x5da85e},secure[_0x2e2562(0x17a)]+_0x112f02,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x21333d=>{const _0x1a765f=_0x5c15dc;if(_0x21333d){const _0x29e900=devices[_0x21333d]['ip'];return jwt[_0x1a765f(0x1a1)]({'clientip':_0x29e900},secure[_0x1a765f(0x17a)]+_0x21333d,{'expiresIn':devices[_0x21333d][_0x1a765f(0x165)][_0x1a765f(0x23f)]*0x3c});}else return![];},telegramIpApproved=_0x494a7a=>{const _0x1e0467=_0x5c15dc;let _0x1b642c=![];return devices[_0x494a7a][_0x1e0467(0x165)]&&devices[_0x494a7a][_0x1e0467(0x165)][_0x1e0467(0x23f)]!=_0x1e0467(0x1d8)&&(_0x1b642c=devices[_0x494a7a][_0x1e0467(0x165)]['clientip']==devices[_0x494a7a]['ip']&&new Date()[_0x1e0467(0x160)]()-devices[_0x494a7a]['telegramIpApproval'][_0x1e0467(0x1e8)]<devices[_0x494a7a]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x1b642c;},telegram2FaApproved=_0x40a59d=>{const _0x3f5b34=_0x5c15dc;let _0x198661=![];return devices[_0x40a59d][_0x3f5b34(0x25c)]&&devices[_0x40a59d][_0x3f5b34(0x25c)][_0x3f5b34(0x23f)]!='reject'&&(_0x198661=devices[_0x40a59d][_0x3f5b34(0x25c)][_0x3f5b34(0x201)]==devices[_0x40a59d]['ip']&&new Date()[_0x3f5b34(0x160)]()-devices[_0x40a59d][_0x3f5b34(0x25c)][_0x3f5b34(0x1e8)]<devices[_0x40a59d]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x198661;},normalizeIP=_0x1f3673=>{const _0x47cec8=_0x5c15dc;let _0x4cac5=null,_0x4cd581=null;if(ipaddr['isValid'](_0x1f3673)){const _0x11b3a0=ipaddr[_0x47cec8(0x192)](_0x1f3673);_0x11b3a0['kind']()==='ipv6'?(_0x11b3a0[_0x47cec8(0x204)]()&&(_0x4cac5=_0x11b3a0[_0x47cec8(0x188)]()[_0x47cec8(0x22a)]()),_0x4cd581=_0x11b3a0[_0x47cec8(0x22a)]()):(_0x4cac5=_0x11b3a0['toString'](),_0x4cd581=_0x11b3a0['toIPv4MappedAddress']()[_0x47cec8(0x22a)]());}return{'show':_0x4cac5?_0x4cac5:_0x4cd581,'store':_0x4cd581};};