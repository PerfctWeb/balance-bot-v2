const _0x25f60e=_0x353c;(function(_0x43fd91,_0x16f14a){const _0x6eabe0=_0x353c,_0x5a95be=_0x43fd91();while(!![]){try{const _0x3d920b=-parseInt(_0x6eabe0(0x1b5))/0x1+-parseInt(_0x6eabe0(0x14e))/0x2*(parseInt(_0x6eabe0(0x205))/0x3)+parseInt(_0x6eabe0(0x299))/0x4*(parseInt(_0x6eabe0(0x283))/0x5)+-parseInt(_0x6eabe0(0x2ef))/0x6+-parseInt(_0x6eabe0(0x2e5))/0x7+-parseInt(_0x6eabe0(0x1ab))/0x8+parseInt(_0x6eabe0(0x285))/0x9*(parseInt(_0x6eabe0(0x185))/0xa);if(_0x3d920b===_0x16f14a)break;else _0x5a95be['push'](_0x5a95be['shift']());}catch(_0x2f56fd){_0x5a95be['push'](_0x5a95be['shift']());}}}(_0x28d8,0x4e362));const _0x1ff014=function(){let _0x38df1a=!![];return function(_0x2da332,_0x19ec6a){const _0x1a6638=_0x38df1a?function(){if(_0x19ec6a){const _0x194ddf=_0x19ec6a['apply'](_0x2da332,arguments);return _0x19ec6a=null,_0x194ddf;}}:function(){};return _0x38df1a=![],_0x1a6638;};}(),_0x17d9bd=_0x1ff014(this,function(){const _0x62ab09=_0x353c;return _0x17d9bd['toString']()[_0x62ab09(0x172)]('(((.+)+)+)+$')['toString']()[_0x62ab09(0x2f0)](_0x17d9bd)[_0x62ab09(0x172)](_0x62ab09(0x34c));});_0x17d9bd();'use strict';process[_0x25f60e(0x29f)][_0x25f60e(0x2fa)]=0x1;const childProcess=require(_0x25f60e(0x25f)),fs=require('fs'),fns=require(_0x25f60e(0x2d8)),low=require(_0x25f60e(0x2b8)),FileSync=require(_0x25f60e(0x180)),path=require(_0x25f60e(0x2e6)),crypto=require(_0x25f60e(0x178)),Crypt=require(_0x25f60e(0x203))[_0x25f60e(0x21b)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x25f60e(0x17a)),jwt=require(_0x25f60e(0x2b5)),ipaddr=require('ipaddr.js'),argv=require(_0x25f60e(0x158))(process[_0x25f60e(0x17e)][_0x25f60e(0x2e1)](0x2))[_0x25f60e(0x17e)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x25f60e(0x282)),axios=require(_0x25f60e(0x2de)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x25f60e(0x1c0)),fileUpload=require(_0x25f60e(0x290)),{networkInterfaces}=require('os'),PORT=argv[_0x25f60e(0x148)]||_0x25f60e(0x2a8),pattern=/^[0-9]{2,4}$/;!pattern[_0x25f60e(0x31c)](PORT)&&(console['log'](_0x25f60e(0x289)+PORT+_0x25f60e(0x326)),process['exit'](0x1));const HOST=argv[_0x25f60e(0x1f4)]||null,userID=argv[_0x25f60e(0x32b)]||'',debugging=argv['d']||![],nodeversion=process[_0x25f60e(0x27a)][_0x25f60e(0x314)];let bbpath='bb/',bbpath2='';const botfile=_0x25f60e(0x165),configfile=_0x25f60e(0x20c),settingsfile=_0x25f60e(0x34d),securefile=_0x25f60e(0x33d),environment=require('./'+bbpath2+'version.json')['environment']||_0x25f60e(0x14c),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x25f60e(0x25a)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x25f60e(0x2d3)+userID+'/':bbpath+_0x25f60e(0x2d3),zippath=userID?bbpath+_0x25f60e(0x317)+userID+'/':bbpath+_0x25f60e(0x317),loggerfile=fs[_0x25f60e(0x2e2)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x25f60e(0x2ed)+userID+'/':bbpath+_0x25f60e(0x2ed);!fs['existsSync'](configpath)&&fs[_0x25f60e(0x226)](configpath);!fs[_0x25f60e(0x2a4)](configbackuppath)&&fs[_0x25f60e(0x226)](configbackuppath);!fs[_0x25f60e(0x2a4)](logspath)&&fs[_0x25f60e(0x226)](logspath);!fs[_0x25f60e(0x2a4)](zippath)&&fs[_0x25f60e(0x226)](zippath);!fs[_0x25f60e(0x2a4)](temppath)&&fs[_0x25f60e(0x226)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x25f60e(0x273)]({'bots':[]})[_0x25f60e(0x217)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x25f60e(0x273)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x25f60e(0x2d0),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x25f60e(0x273)]({'secure':{},'blacklist':[]})[_0x25f60e(0x217)]();let crypt=new Crypt({'md':_0x25f60e(0x22e),'rsaStandard':_0x25f60e(0x233)});const saltRounds=0xa,mixpanel=Mixpanel[_0x25f60e(0x22a)](_0x25f60e(0x1d6),{'host':_0x25f60e(0x200)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x25f60e(0x14a)]&&(settings['telegramToken']!=''&&settings[_0x25f60e(0x14a)]!='***')&&settings[_0x25f60e(0x164)]&&settings[_0x25f60e(0x164)]!='')initTelegram();const parseColor=(_0x3d9abc,_0x35fafa)=>{const _0x4fe944=_0x25f60e,_0x197676=/#[A-Z]{3}#/g;if(typeof _0x3d9abc==_0x4fe944(0x263)){!_0x35fafa?_0x3d9abc=_0x3d9abc[_0x4fe944(0x2c9)](_0x197676,''):(_0x3d9abc=_0x3d9abc[_0x4fe944(0x2c9)](/#BLU#/g,'\x1b[34m'),_0x3d9abc=_0x3d9abc['replace'](/#RED#/g,'\x1b[31m'),_0x3d9abc=_0x3d9abc['replace'](/#YEL#/g,_0x4fe944(0x2b6)),_0x3d9abc=_0x3d9abc['replace'](/#MAG#/g,_0x4fe944(0x1a9)),_0x3d9abc=_0x3d9abc[_0x4fe944(0x2c9)](/#CYA#/g,_0x4fe944(0x1be)),_0x3d9abc=_0x3d9abc[_0x4fe944(0x2c9)](/#RES#/g,_0x4fe944(0x2f9)));;}return _0x3d9abc;},logger={'screen':_0x2bc342=>{const _0x2093f1=_0x25f60e;console[_0x2093f1(0x1e8)](parseColor(_0x2bc342,!![]));},'simple':_0x5782e7=>{const _0x39b83e=_0x25f60e;console['log'](parseColor(_0x5782e7,!![])),loggerfile[_0x39b83e(0x217)](util[_0x39b83e(0x154)](parseColor(_0x5782e7,![]))+'\x0a');},'full':async _0x5a99af=>{const _0x4ef0b7=_0x25f60e,_0x58613a=getTimeStamp()+_0x4ef0b7(0x2bd)+_0x5a99af;console[_0x4ef0b7(0x1e8)](parseColor(_0x58613a,!![])),loggerfile[_0x4ef0b7(0x217)](util[_0x4ef0b7(0x154)](parseColor(_0x58613a,![]))+'\x0a');if(tgBot&&settings[_0x4ef0b7(0x1f3)]&&settings[_0x4ef0b7(0x22f)]!=_0x4ef0b7(0x2c1))await sendTelegram(settings[_0x4ef0b7(0x1f3)],_0x4ef0b7(0x310)+parseColor(_0x5a99af,![]));},'debug':async(_0x1e3896,_0x18c6d6='')=>{const _0x128abc=_0x25f60e,_0x3a629f=getTimeStamp()+_0x128abc(0x215)+_0x1e3896;if(debugging)console[_0x128abc(0x1e8)](parseColor(_0x3a629f,!![]));loggerfile['write'](util[_0x128abc(0x154)](parseColor(_0x3a629f,![]))+'\x0a');if(_0x18c6d6){if(debugging)console[_0x128abc(0x1e8)](_0x18c6d6);loggerfile[_0x128abc(0x217)](util[_0x128abc(0x154)](_0x18c6d6)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x4297af){logger['simple'](_0x4297af);}),process['on'](_0x25f60e(0x1b6),()=>{stopAllBots();}),process['on'](_0x25f60e(0x330),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x25f60e(0x2b7)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x25f60e(0x315)),app=express(),http=require(_0x25f60e(0x187))[_0x25f60e(0x342)](app);app[_0x25f60e(0x347)](fileUpload({'useTempFiles':!![]})),app['get'](_0x25f60e(0x1aa),async(_0x3ccf48,_0x2e2776)=>{const _0x3b90ea=_0x25f60e,_0x37d35c=_0x3ccf48[_0x3b90ea(0x162)][_0x3b90ea(0x26e)],_0x1c5703=getClientsWithBotID('botmanager'),_0x428cd2=_0x3ccf48[_0x3b90ea(0x1ca)][_0x3b90ea(0x157)],_0x7511bf=timelyDecrypt(_0x428cd2,![]),_0x181df0=_0x1c5703['find'](_0x2b167a=>_0x2b167a['uuid']==_0x7511bf);if(_0x181df0){const _0x3df44=normalizeIP(_0x3ccf48['socket'][_0x3b90ea(0x27c)])[_0x3b90ea(0x2f8)],_0x3126ed=_0x3ccf48[_0x3b90ea(0x1ca)]['tkn'];if(validateAccess(_0x3126ed,_0x7511bf,_0x3df44)[_0x3b90ea(0x195)])_0x37d35c==_0x3b90ea(0x259)&&await backupConfigFiles(),await zipFiles(_0x37d35c),_0x2e2776[_0x3b90ea(0x28b)](zippath+(_0x37d35c+_0x3b90ea(0x1ff)),_0x41ce8d=>{const _0x1fc257=_0x3b90ea;_0x41ce8d&&(logger[_0x1fc257(0x1e7)](_0x1fc257(0x167)+_0x37d35c),logger[_0x1fc257(0x1cb)](_0x41ce8d));});else logger[_0x3b90ea(0x1e7)](_0x3b90ea(0x1a0)+_0x37d35c+'\x20(1)');}else logger[_0x3b90ea(0x1e7)](_0x3b90ea(0x1a0)+_0x37d35c+'\x20(2)');}),app['post'](_0x25f60e(0x1f7),async(_0x4655b3,_0x42e54e)=>{const _0x4d072f=_0x25f60e,_0x5e2b7f=getClientsWithBotID('botmanager'),_0x5da730=_0x4655b3['headers']['uuid'],_0x210c4c=timelyDecrypt(_0x5da730,![]),_0x42aae9=_0x5e2b7f[_0x4d072f(0x335)](_0x266d53=>_0x266d53[_0x4d072f(0x157)]==_0x210c4c);logger[_0x4d072f(0x2ec)](_0x4d072f(0x160));if(_0x42aae9){const _0x2b6a6f=normalizeIP(_0x4655b3[_0x4d072f(0x1c9)][_0x4d072f(0x27c)])[_0x4d072f(0x2f8)],_0xc93a3a=_0x4655b3[_0x4d072f(0x1ca)]['tkn'];if(validateAccess(_0xc93a3a,_0x210c4c,_0x2b6a6f)[_0x4d072f(0x195)]){if(_0x4655b3[_0x4d072f(0x2d5)]){const _0x801402=_0x4655b3[_0x4d072f(0x2d5)][_0x4d072f(0x1f5)];await _0x801402['mv'](temppath+_0x801402[_0x4d072f(0x247)]),_0x42e54e[_0x4d072f(0x173)]({'status':!![],'message':_0x4d072f(0x272)});const _0x2bd600=getBotsWithMode();_0x2bd600[_0x4d072f(0x1d9)]>0x0?confirmRestore(temppath,_0x801402['name']):unzipFile(temppath,_0x801402[_0x4d072f(0x247)]);}}else logger['full'](_0x4d072f(0x220));}else logger[_0x4d072f(0x1e7)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express[_0x25f60e(0x1c5)](path[_0x25f60e(0x329)](__dirname,bbpath2,'build2'))),app[_0x25f60e(0x347)](express['static'](path[_0x25f60e(0x329)](__dirname,bbpath2,_0x25f60e(0x1a8)))),app[_0x25f60e(0x2cf)]('/',function(_0x15fefc,_0x442e88){const _0xdaa5c3=_0x25f60e;_0x442e88[_0xdaa5c3(0x295)](path[_0xdaa5c3(0x329)](__dirname,bbpath2,_0xdaa5c3(0x2f7),'index.html'));}),app['get'](_0x25f60e(0x21a),function(_0x5887da,_0x1424d9){const _0x56ff87=_0x25f60e;_0x1424d9[_0x56ff87(0x295)](path['join'](__dirname,bbpath2,_0x56ff87(0x1a8),_0x56ff87(0x1dd)));}),app['get']('/:bot/portfolio',(_0x4dd944,_0x49a653)=>{const _0x231f89=_0x25f60e;_0x49a653[_0x231f89(0x295)](path[_0x231f89(0x329)](__dirname,bbpath2,_0x231f89(0x1a8),_0x231f89(0x1dd)));}),app[_0x25f60e(0x2cf)](_0x25f60e(0x34e),(_0x3deecf,_0xa5bdb6)=>{const _0x4f50ba=_0x25f60e;_0xa5bdb6[_0x4f50ba(0x295)](path[_0x4f50ba(0x329)](__dirname,bbpath2,'build','index.html'));}),app[_0x25f60e(0x2cf)](_0x25f60e(0x25c),(_0x1756ab,_0x88600f)=>{const _0x22f1a2=_0x25f60e;_0x88600f[_0x22f1a2(0x295)](path['join'](__dirname,bbpath2,_0x22f1a2(0x1a8),_0x22f1a2(0x1dd)));}),app[_0x25f60e(0x2cf)](_0x25f60e(0x25b),(_0x389913,_0x5a8719)=>{const _0x5e4599=_0x25f60e;_0x5a8719[_0x5e4599(0x295)](path[_0x5e4599(0x329)](__dirname,bbpath2,'build',_0x5e4599(0x1dd)));}),app[_0x25f60e(0x2cf)](_0x25f60e(0x1bc),(_0x599a9b,_0x386e2f)=>{const _0x40cc74=_0x25f60e;_0x386e2f[_0x40cc74(0x295)](path[_0x40cc74(0x329)](__dirname,bbpath2,_0x40cc74(0x1a8),_0x40cc74(0x1dd)));}),app[_0x25f60e(0x2cf)](_0x25f60e(0x16e),(_0x334b3a,_0x1cf2d1)=>{const _0x303ef2=_0x25f60e;_0x1cf2d1[_0x303ef2(0x295)](path[_0x303ef2(0x329)](__dirname,bbpath2,'build',_0x303ef2(0x1dd)));});if(HOST)http[_0x25f60e(0x2a7)](PORT,HOST);else http[_0x25f60e(0x2a7)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1f796c=_0x25f60e;let _0x517114=_0x1f796c(0x327);const _0xa7a24=networkInterfaces(),_0x51271d={};for(const _0x4d444b of Object[_0x1f796c(0x25e)](_0xa7a24)){for(const _0x42316b of _0xa7a24[_0x4d444b]){if((_0x42316b[_0x1f796c(0x15c)]==_0x1f796c(0x324)||_0x42316b['family']==0x4)&&!_0x42316b[_0x1f796c(0x15e)]){const _0x4a6a49=ipaddr[_0x1f796c(0x2e7)](_0x42316b['address'])[_0x1f796c(0x190)]();_0x4a6a49!='private'&&(!_0x51271d[_0x4d444b]&&(_0x51271d[_0x4d444b]=[]),_0x51271d[_0x4d444b][_0x1f796c(0x19f)](_0x42316b[_0x1f796c(0x2f1)]),_0x517114=_0x42316b[_0x1f796c(0x2f1)]);}}}return{'serverip':_0x517114,'netinterfaces':_0x51271d};}async function startServer(){const _0x487031=_0x25f60e,{serverip:_0x1255b9,netinterfaces:_0x82b1ab}=getServerIP();logger['simple'](''),logger[_0x487031(0x1cb)](_0x487031(0x1af)),await logger['full']('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x487031(0x192)+(environment==_0x487031(0x26f)?_0x487031(0x1b7):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x487031(0x339)+_0x1255b9+':'+PORT+_0x487031(0x1fd))),logger['simple'](_0x487031(0x1af));if(config['length']!=0x0)for(const _0x4217ed of config){const _0x36333f=_0x4217ed[_0x487031(0x16b)]==_0x487031(0x204)?'a':'m';if(_0x4217ed[_0x487031(0x1d3)]==_0x487031(0x2c5)||_0x4217ed['status']==_0x487031(0x21e))await logger[_0x487031(0x1e7)](_0x487031(0x2ea)+_0x36333f+')\x20|\x20Bot\x20'+_0x4217ed[_0x487031(0x1cc)]+_0x487031(0x1dc)+_0x4217ed[_0x487031(0x1a2)]),startBot([_0x4217ed[_0x487031(0x1cc)],userID],{'cwd':bbpath},function(_0x5a6d6c){const _0x2d0d47=_0x487031;if(_0x5a6d6c)logger[_0x2d0d47(0x1e7)](_0x5a6d6c);});else(_0x4217ed[_0x487031(0x1d3)]=='disabled'||_0x4217ed['status']=='new-disabled')&&await logger['full'](_0x487031(0x238)+_0x36333f+_0x487031(0x2d7)+_0x4217ed[_0x487031(0x1cc)]+_0x487031(0x1dc)+_0x4217ed['botname']);}else!newBot&&logger[_0x487031(0x1cb)](_0x487031(0x246));if(newBot)addBot();logger['simple'](_0x487031(0x1af)),logger[_0x487031(0x1cb)](''),await logger[_0x487031(0x2ec)](_0x487031(0x27d)+nodeversion),await logger[_0x487031(0x2ec)](_0x487031(0x29e),_0x82b1ab);}function _0x28d8(){const _0x37d7af=[':\x20Bot\x20Mgr\x20>\x20','-events.json','toString','cancel-loading','orders','SIGTERM','All\x20bots\x20running\x20right\x20now','reply','enabled','HTML','Login\x20accepted','reason','replace','isIPv4MappedAddress','getHours','getMonth','catch','Your\x20installation\x20is\x20already\x20up\x20to\x20date','get','0.0.0','-config.json','getPortfolio','logs/','loginRequired','files','text',')\x20\x20\x20|\x20Bot\x20','date-fns','verify','settings','onepagemode','tempaccess_30_','Allow\x20login\x20from\x20IP\x20address\x20','axios','unlinkSync','toIPv4Address','slice','createWriteStream','Unauthorized\x20login\x20attempt\x20(timeout)','get-portfolio','1791678DxGlXA','path','parse','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','update_no','Starting\x20(','resetpw_no','debug','temp/','output-001.log','3335466FiIuTW','constructor','address','binary','lastmsgtelegram','action','bbUsername','Disabled\x20Bot\x20','build2','store','\x1b[0m','NTBA_FIX_319','temporary\x20access\x20rejected','delete-bot','number','updatebotmanager','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','cancelLoading','started','temporary\x20access\x20not\x20allowed','telegram','/names\x20-\x20show\x20bot\x20names\x0a','launch','then','Alerts','publicKey','inlineKeyboard','Orders','placeOrder','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','access','login2fa_','login','Bot\x20Mgr\x20>\x20','127.0.0.1','/update\x20-\x20update\x20Balance\x20Bot\x0a','restart','node','express','invalid\x20credentials','zip/','resetHistory','bot','Setting\x20access:\x20','All','test','success','hasOwnProperty','initclient','chat','DEFLATE','Session\x20expired\x20for\x20user\x20...','metrics','IPv4','/config\x20-\x20notification\x20types\x20to\x20receive\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','[ip-address]','secret','join','privateKey','user','add-bot','reload','update-bot','reinstall-bb','SIGINT','file','match','ipc','1000','find','/on\x20-\x20start\x20bot(s)\x0a','rmSync','value','=>\x20Go\x20to\x20#CYA#http://','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','config_orders','store-settings','bb-secure.json','storeConfiguration','removeAllListeners','emit','restore_yes_','createServer','username','Restore\x20process\x20confirmed','exp','filter','use','Invalid\x20authentication\x20token\x20(2)','kind','sortBy','Unauthorized\x20attempt\x20to\x20log\x20out','(((.+)+)+)+$','bb-settings.json','/:bot/performance','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','port','message','telegramToken','\x20only\x0a','production','sign','2WmvNaH','stopped','\x20to\x20','Unauthorized\x20attempt\x20to\x20show\x20configuration','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','referer','format','secure','getTime','uuid','yargs/yargs','alerts','login\x20required','disconnect','family','startsWith','internal','hashSync','Backup\x20file\x20uploaded','function','params','f2aRequired','telegramUsername','bot.js','logout','Failed\x20to\x20download\x20','getMinutes','delete-alerts','compareSync','mode','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','apiSecret','/:bot/support','Bot\x20','update','inherit','search','send','padStart','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','randomBytes','toggleBotMode','crypto','latestversion','bcryptjs','from','output-002.log','tempaccess_reject_','argv','getStartingBalances','lowdb/adapters/FileSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','node-zip','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','includes','7190TCnZBA','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','http','Backup\x20file\x20unzipped\x20and\x20stored','sockets','warning','toIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20delete\x20bot','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','any','Unauthorized\x20attempt\x20to\x20confirm\x20message','range','\x20|\x20client:\x20...','#RES#\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','backup-files','allow','Restore\x20backup\x20file\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','store-fiat','bbvNew','\x20mode','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','resetpw_yes','toggle-bot-mode','Unauthorized\x20attempt\x20to\x20delete\x20alerts','push','Unauthorized\x20attempt\x20to\x20download\x20','Password\x20reset\x20rejected','botname','deleteHistoryAlerts','Password\x20has\x20been\x20reset\x20to:\x20','/off\x20-\x20stop\x20bot(s)\x0a','User\x20has\x20been\x20validated','15\x20min','build','\x1b[35m','/download/:type','771256tzlYCl','tempaccess_5_','Enabled\x20Bot\x20','endsWith','-----------------------------------------------------------------------------------','showConfig','store-configuration','2FA\x20login\x20required','logs','forEach','467798pRBbHH','exit','(staging)','bot-','confirm-message','Token\x20blacklisted','Server','/:bot/configuration','timestamp','\x1b[36m','Logged\x20in\x20user\x20...','util','botmanager','telegramIpApproval','/help\x20-\x20show\x20available\x20commands\x0a','Telegram\x20error:','static','backup-full@','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','title','socket','headers','simple','botID','Unauthorized\x20attempt\x20to\x20get\x20events','***','data','names','messages','Invalid\x20authentication\x20token\x20(1)','status','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','bbPassword','6b67f3d61ee94b8f5c80b4affef4c4d9','Deleted\x20Bot\x20','storeFiat','length','command','headless','\x20|\x20','index.html','apiKey','update_yes','set','new-disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','sendMessage','whitelistEnabled','showname','full','log','Login\x20rejected','/disable\x20-\x20disable\x20notifications\x0a','storeHeadless','expiry','Telegraf\x20error:','Notifications\x20enabled\x0a','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','sendMetricsTelegram','logged\x20out','Restore\x20process\x20aborted','telegramChatId','host','backupfile','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','/upload-backup','max','add','Logged\x20out\x20user\x20...','getDate','All\x20bots','#RES#\x20if\x20running\x20on\x20server','settings.','.zip','api-eu.mixpanel.com','toggle','copyFileSync','hybrid-crypto-js','auto','73902YSMDrL','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','stringify','$1_$2_$3','Yes','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','pidRefreshToken','bb-config.json','reinstall_yes','manual','sendPortfolioTelegram','Starting\x20Balance\x20Bot\x20reinstallation','get-messages','https://api.ipify.org?format=json','tempaccess_15_','config',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','getFullYear','write','restore-backup-file','button','/:bot','Crypt','bots','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','new','getSeconds','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','writeFileSync','Restoring\x20bot(s)\x20from\x20backup','get-starting-balances','callback','Unauthorized\x20attempt\x20to\x20update\x20settings','mkdirSync','cloneDeep','close','/enable\x20-\x20enable\x20notifications\x0a','init','Error\x20while\x20deleting\x20config\x20files:\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','userid','sha256','telegramEvents','assign','all','::1','RSA-OAEP','exec','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','-performance.json','temporary\x20access\x20timeout','Idling\x20(','2FA\x20required','remove','stop','Unauthorized\x20attempt\x20to\x20store\x20configuration','Ok,\x20will\x20send\x20order\x20notifications\x20only','telegrammsg','getUTCHours','backup-full','args','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','telegramEnabled','live','output-003.log','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','name','decrypt','Starting\x20Balance\x20Bot\x20update','alias','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','\x20minutes','timeshift','30\x20min','size','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','blacklist','apiPassword','Notifications\x20types:\x20','statSync','access\x20timeout','Access\x20enabled\x20for\x20','request','reset-history','backup','clients','/:bot/history','/:bot/coins','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','keys','child_process','password','generate','readdirSync','string','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','login\x20not\x20required','editMessageReplyMarkup','No\x20bots\x20running\x20right\x20now','disabled','order','No\x20authentication\x20token','generateKeyPairAsync','sort',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','type','staging','token','error','File\x20uploaded','defaults','auth','telegram2FaApproval','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','notification','portfolio','conn','versions','-results.json','remoteAddress','Node.js\x20v','Unauthorized\x20attempt\x20to\x20add\x20bot','accept','yes','Unauthorized\x20attempt\x20to\x20update\x20bot','mixpanel','20dcdgqJ','reinstall_no','17046RsDbtX','2FA\x20login\x20token\x20generated','/status\x20-\x20show\x20bot(s)\x20status\x0a','split','Error:\x20Invalid\x20argument\x20','readFileSync','download','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','exchange','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','login\x20token\x20generated','express-fileupload','server','bbvReceive','ipv6','running','sendFile','pidExpireLogin','encryptedUuid','Unauthorized\x20attempt\x20to\x20get\x20messages','359272EnGoDY','reject','update-bb','toggle_','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Network\x20Interfaces:','env','Notifications\x20disabled','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Temporary\x20access\x20rejected','track','existsSync','Restarting\x20Bot\x20','temporary\x20token\x20generated','listen','3000','kill','lastmsgemitted','map','disable','Invalid\x20username\x20or\x20IP\x20address','portfolio_','isDirectory','config_alerts','reinstall','clientip','************','Markdown','jsonwebtoken','\x1b[33m','version','lowdb','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','mtime','handshake','<b>Telegram\x20Bot\x20Status:</b>\x0a'];_0x28d8=function(){return _0x37d7af;};return _0x28d8();}function startSocket(){io['on']('connection',_0x5bd158=>{const _0x3bdd0c=_0x353c;let _0x439605,_0x3b9550,_0x3544b6,_0xbe2f32,_0x2d150e;const _0x240dde=_0x5bd158['handshake'][_0x3bdd0c(0x1ca)][_0x3bdd0c(0x153)];_0x3b9550=_0x240dde['match'](/bot[0-9]{3}/);if(_0x3b9550)_0x3544b6=_0x3b9550[0x0][_0x3bdd0c(0x332)](/[0-9]{3}/);if(_0x3544b6)_0x439605=_0x3544b6[0x0];else _0x439605='botmanager';const _0x4e17eb=_0x5bd158[_0x3bdd0c(0x2bb)][_0x3bdd0c(0x274)][_0x3bdd0c(0x297)];if(!_0x4e17eb)_0x5bd158[_0x3bdd0c(0x340)](_0x3bdd0c(0x1d3),{'publicKey':secure[_0x3bdd0c(0x308)]});else{_0xbe2f32=timelyDecrypt(_0x4e17eb,![]);if(!_0xbe2f32)_0x5bd158[_0x3bdd0c(0x340)](_0x3bdd0c(0x1d3),{'publicKey':secure[_0x3bdd0c(0x308)]});else{_0x2d150e=normalizeIP(_0x5bd158[_0x3bdd0c(0x279)]['remoteAddress'])[_0x3bdd0c(0x2f8)];if(!devices[_0xbe2f32])devices[_0xbe2f32]={'uuid':_0xbe2f32,'access':{'token':null}};devices[_0xbe2f32]['ip']=_0x2d150e;const _0x22c7af=addClient(_0x5bd158['id'],_0xbe2f32,_0x439605);setAccess(_0x22c7af),emitMessages(),_0x5bd158['on'](_0x3bdd0c(0x30f),_0x17141f=>{const _0x2f4a8=_0x3bdd0c,_0xf9b4e6=timelyDecrypt(_0x17141f[_0x2f4a8(0x260)]);if(_0xf9b4e6){_0x17141f={'username':_0x17141f[_0x2f4a8(0x343)],'password':_0xf9b4e6},devices[_0xbe2f32][_0x2f4a8(0x30d)]=validateCredentials(_0x17141f,_0xbe2f32);if(devices[_0xbe2f32][_0x2f4a8(0x30d)][_0x2f4a8(0x195)]==![]&&devices[_0xbe2f32][_0x2f4a8(0x30d)][_0x2f4a8(0x2c8)]==_0x2f4a8(0x1b2))_0x5bd158[_0x2f4a8(0x340)](_0x2f4a8(0x1d3),{'access':devices[_0xbe2f32][_0x2f4a8(0x30d)]}),loginAccess2FA(_0xbe2f32,_0x2d150e);else{if(devices[_0xbe2f32][_0x2f4a8(0x30d)]['allow']==![]&&devices[_0xbe2f32][_0x2f4a8(0x30d)][_0x2f4a8(0x2c8)]=='invalid\x20credentials')_0x5bd158[_0x2f4a8(0x340)](_0x2f4a8(0x1d3),{'access':devices[_0xbe2f32][_0x2f4a8(0x30d)]});else devices[_0xbe2f32][_0x2f4a8(0x30d)][_0x2f4a8(0x195)]&&devices[_0xbe2f32][_0x2f4a8(0x30d)][_0x2f4a8(0x2c8)]==_0x2f4a8(0x28f)&&(getClientsWithUuid(_0xbe2f32)[_0x2f4a8(0x1b4)](_0xaba96c=>{setAccess(_0xaba96c);}),logger['debug'](_0x2f4a8(0x1bf)+_0xbe2f32['slice'](-0x8)),setTokenRefresh(_0xbe2f32),setSessionTimeout(_0x2f4a8(0x30f),_0xbe2f32));}}else logger[_0x2f4a8(0x1e7)](_0x2f4a8(0x2e3));}),_0x5bd158['on']('reset-password',()=>{resetPassword();}),_0x5bd158['on'](_0x3bdd0c(0x15b),_0x54b32a=>{removeClient(_0x5bd158['id']);}),_0x439605==_0x3bdd0c(0x1c1)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5f4de2){const _0x48d895=_0x25f60e;if(_0x5f4de2!=_0x48d895(0x1c1)&&config['apiKey']!=''){if(pid[_0x5f4de2])pid[_0x5f4de2][_0x48d895(0x173)]({'function':_0x48d895(0x31f),'args':null});}_0x5f4de2!=_0x48d895(0x1c1)&&broadcastToBots(_0x48d895(0x21c),JSON[_0x48d895(0x207)](config));}function reloadBotManager(){const _0x1cb79b=_0x25f60e;getClientsWithBotID(_0x1cb79b(0x1c1))[_0x1cb79b(0x1b4)](_0x51ea4f=>{const _0x5e04ac=_0x1cb79b;getSocket(_0x51ea4f['id'])[_0x5e04ac(0x340)](_0x5e04ac(0x1d3),{'access':{'allow':![],'reason':_0x5e04ac(0x32d),'token':null}});});}function getSocket(_0x39a7a1){const _0x8fa395=_0x25f60e;return io[_0x8fa395(0x189)][_0x8fa395(0x189)][_0x8fa395(0x2cf)](_0x39a7a1);}function setAccess(_0x4ee6fb){const _0x116cbe=_0x25f60e,_0x2eb04c=getSocket(_0x4ee6fb['id']),_0x5b29c2=_0x4ee6fb[_0x116cbe(0x157)],_0x2666c6=_0x4ee6fb[_0x116cbe(0x319)];devices[_0x5b29c2][_0x116cbe(0x30d)]=validateAccess(devices[_0x5b29c2][_0x116cbe(0x30d)][_0x116cbe(0x270)],_0x5b29c2),logger['debug'](_0x116cbe(0x31a)+devices[_0x5b29c2][_0x116cbe(0x30d)][_0x116cbe(0x2c8)]+_0x116cbe(0x191)+_0x4ee6fb['id'][_0x116cbe(0x2e1)](-0x8)+'\x20|\x20user:\x20...'+_0x5b29c2[_0x116cbe(0x2e1)](-0x8)),_0x2eb04c[_0x116cbe(0x329)](_0x5b29c2);if(devices[_0x5b29c2][_0x116cbe(0x30d)][_0x116cbe(0x195)]){_0x2eb04c[_0x116cbe(0x329)](_0x2666c6);if(_0x2666c6==_0x116cbe(0x1c1))initializeSocketBotManager(_0x2eb04c);else initializeSocketBot(_0x2eb04c);initClient(_0x2666c6);}devices[_0x5b29c2][_0x116cbe(0x30d)][_0x116cbe(0x270)]&&devices[_0x5b29c2]['access'][_0x116cbe(0x2c8)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x5b29c2),devices[_0x5b29c2][_0x116cbe(0x30d)]['token']&&devices[_0x5b29c2][_0x116cbe(0x30d)]['reason']==_0x116cbe(0x286)&&setSessionTimeout('login',_0x5b29c2),_0x2eb04c['emit']('status',{'status':_0x4ee6fb[_0x116cbe(0x291)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5b29c2][_0x116cbe(0x30d)],'externalip':devices[_0x5b29c2]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x5b29c2][_0x116cbe(0x30d)][_0x116cbe(0x195)]==![]&&devices[_0x5b29c2][_0x116cbe(0x30d)]['reason']==_0x116cbe(0x239)&&temporaryAccess2FA(_0x5b29c2,devices[_0x5b29c2]['ip']);}function setSessionTimeout(_0x4de108,_0x24fb8){const _0x26f9aa=_0x25f60e;let _0x19653e;if(_0x4de108==_0x26f9aa(0x30f))_0x19653e=loginExpiry*0x3c*0x3e8;else _0x19653e=devices[_0x24fb8][_0x26f9aa(0x1c2)][_0x26f9aa(0x1ec)]*0x3c*0x3e8-(new Date()[_0x26f9aa(0x156)]()-devices[_0x24fb8][_0x26f9aa(0x1c2)][_0x26f9aa(0x1bd)]);if(devices[_0x24fb8][_0x26f9aa(0x296)])clearTimeout(devices[_0x24fb8]['pidExpireLogin']);devices[_0x24fb8][_0x26f9aa(0x296)]=setTimeout(()=>{const _0x36bf9f=_0x26f9aa;if(devices[_0x24fb8][_0x36bf9f(0x20b)])clearTimeout(devices[_0x24fb8][_0x36bf9f(0x20b)]);removeSocketListeners(_0x24fb8),addBlacklist(_0x24fb8),devices[_0x24fb8][_0x36bf9f(0x1c2)]=null,devices[_0x24fb8]['telegram2FaApproval']=null,devices[_0x24fb8][_0x36bf9f(0x30d)][_0x36bf9f(0x270)]=null,logger[_0x36bf9f(0x2ec)](_0x36bf9f(0x322)+_0x24fb8[_0x36bf9f(0x2e1)](-0x8)),devices[_0x24fb8][_0x36bf9f(0x30d)]=validateAccess(devices[_0x24fb8][_0x36bf9f(0x30d)][_0x36bf9f(0x270)],_0x24fb8),!(devices[_0x24fb8]['access'][_0x36bf9f(0x195)]&&devices[_0x24fb8][_0x36bf9f(0x30d)]['reason']==_0x36bf9f(0x265))&&(_0x4de108==_0x36bf9f(0x30f)?io['to'](_0x24fb8)[_0x36bf9f(0x340)](_0x36bf9f(0x1d3),{'access':{'allow':![],'reason':_0x36bf9f(0x255),'token':null}}):io['to'](_0x24fb8)['emit'](_0x36bf9f(0x1d3),{'access':{'allow':![],'reason':_0x36bf9f(0x237),'token':null}})),devices[_0x24fb8]['access'][_0x36bf9f(0x270)]=null;},_0x19653e);}function setTokenRefresh(_0x55b056){const _0x393061=_0x25f60e;if(devices[_0x55b056]['pidRefreshToken'])clearTimeout(devices[_0x55b056][_0x393061(0x20b)]);devices[_0x55b056][_0x393061(0x20b)]=setTimeout(()=>{const _0xda45a=_0x393061;getClientsWithUuid(_0x55b056)[_0xda45a(0x1d9)]!=0x0?(devices[_0x55b056][_0xda45a(0x30d)]=refreshToken(_0x55b056),io['to'](_0x55b056)[_0xda45a(0x340)](_0xda45a(0x1d3),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x55b056][_0xda45a(0x30d)],'externalip':devices[_0x55b056]['ip'],'publicKey':secure[_0xda45a(0x308)],'validInstallation':validInstallation}),setTokenRefresh(_0x55b056)):clearTimeout(devices[_0x55b056][_0xda45a(0x20b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x15a366){const _0x5348ec=_0x25f60e,_0xf1d38c=getClient(_0x15a366['id'])[_0x5348ec(0x157)];_0x15a366['emit']('bots',config),_0x15a366['emit'](_0x5348ec(0x2da),cleanSettings()),_0x15a366['on'](_0x5348ec(0x32c),_0x36a0dc=>{const _0x2b3fee=_0x5348ec;if(validateAccess(_0x36a0dc,_0xf1d38c)['allow'])addBot();else logger[_0x2b3fee(0x1e7)](_0x2b3fee(0x27e));}),_0x15a366['on'](_0x5348ec(0x32e),(_0x19b169,_0x7bfe60)=>{const _0x2ac0b2=_0x5348ec;if(validateAccess(_0x7bfe60,_0xf1d38c)[_0x2ac0b2(0x195)])toggleBot(_0x19b169[_0x2ac0b2(0x1cc)],_0x19b169['status'],_0x19b169[_0x2ac0b2(0x244)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x15a366['on'](_0x5348ec(0x19d),(_0x3bb9fd,_0x5e8903)=>{const _0x3ed68a=_0x5348ec;if(validateAccess(_0x5e8903,_0xf1d38c)[_0x3ed68a(0x195)])toggleBotMode(_0x3bb9fd);else logger['full'](_0x3ed68a(0x281));}),_0x15a366['on'](_0x5348ec(0x2fc),(_0x532109,_0x5eb95e)=>{const _0x4d51d1=_0x5348ec;if(validateAccess(_0x5eb95e,_0xf1d38c)['allow'])deleteBot(_0x532109);else logger[_0x4d51d1(0x1e7)](_0x4d51d1(0x18c));}),_0x15a366['on'](_0x5348ec(0x33c),(_0x4ebaaf,_0x140b67)=>{const _0x847170=_0x5348ec;if(validateAccess(_0x140b67,_0xf1d38c)[_0x847170(0x195)])storeSettings(_0x4ebaaf,!![]);else logger['full'](_0x847170(0x225));}),_0x15a366['on'](_0x5348ec(0x29b),_0x4b9bd7=>{const _0x2d446f=_0x5348ec;if(validateAccess(_0x4b9bd7,_0xf1d38c)[_0x2d446f(0x195)])updateBB(_0x2d446f(0x170));else logger['full'](_0x2d446f(0x21d));}),_0x15a366['on'](_0x5348ec(0x32f),_0x2f102b=>{const _0x1cebab=_0x5348ec;if(validateAccess(_0x2f102b,_0xf1d38c)['allow'])updateBB(_0x1cebab(0x2b1));else logger[_0x1cebab(0x1e7)](_0x1cebab(0x193));}),_0x15a366['on']('get-backup-files',_0x4af49d=>{const _0x452c14=_0x5348ec;if(validateAccess(_0x4af49d,_0xf1d38c)[_0x452c14(0x195)]){const _0x119674=getClient(_0x15a366['id']);if(_0x119674)getBackupFiles(_0x119674[_0x452c14(0x157)]);else logger[_0x452c14(0x1e7)](_0x452c14(0x24b));}else logger[_0x452c14(0x1e7)](_0x452c14(0x175));}),_0x15a366['on'](_0x5348ec(0x218),(_0x5aa6d4,_0x4dde8c)=>{const _0x1c5161=_0x5348ec;if(validateAccess(_0x4dde8c,_0xf1d38c)[_0x1c5161(0x195)])restoreBackupFile(_0x5aa6d4);else logger[_0x1c5161(0x1e7)](_0x1c5161(0x1ef));}),_0x15a366['on'](_0x5348ec(0x211),_0x53107b=>{const _0x28b5ef=_0x5348ec;if(validateAccess(_0x53107b,_0xf1d38c)[_0x28b5ef(0x195)])getMessages();else logger['full'](_0x28b5ef(0x298));}),_0x15a366['on'](_0x5348ec(0x1b9),(_0x54d8cd,_0x15886c)=>{const _0x3922c9=_0x5348ec;if(validateAccess(_0x15886c,_0xf1d38c)[_0x3922c9(0x195)])confirmMessage(_0x54d8cd);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x15a366['on'](_0x5348ec(0x166),_0x4be929=>{const _0x8dd10b=_0x5348ec;if(validateAccess(_0x4be929,_0xf1d38c)[_0x8dd10b(0x195)]){if(devices[_0xf1d38c]['pidRefreshToken'])clearTimeout(devices[_0xf1d38c]['pidRefreshToken']);if(devices[_0xf1d38c][_0x8dd10b(0x296)])clearTimeout(devices[_0xf1d38c][_0x8dd10b(0x296)]);removeSocketListeners(getClient(_0x15a366['id'])[_0x8dd10b(0x157)]),addBlacklist(_0xf1d38c),devices[_0xf1d38c]['telegramIpApproval']=null,devices[_0xf1d38c][_0x8dd10b(0x275)]=null,devices[_0xf1d38c][_0x8dd10b(0x30d)][_0x8dd10b(0x270)]=null,logger[_0x8dd10b(0x2ec)](_0x8dd10b(0x1fa)+_0xf1d38c['slice'](-0x8)),io['to'](getClient(_0x15a366['id'])['uuid'])[_0x8dd10b(0x340)](_0x8dd10b(0x1d3),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x8dd10b(0x1e7)](_0x8dd10b(0x34b));});}function initializeSocketBot(_0x2adba7){const _0x453e70=_0x25f60e,_0x28dc96=getClient(_0x2adba7['id'])[_0x453e70(0x319)],_0x3de24d=getClient(_0x2adba7['id'])['uuid'];_0x2adba7['on']('get-logs',(_0x4f65bc,_0xf70856)=>{const _0x31a4fe=_0x453e70;if(validateAccess(_0xf70856,_0x3de24d)[_0x31a4fe(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0x31a4fe(0x173)]({'function':'emitHistory','args':_0x4f65bc});}else logger[_0x31a4fe(0x1e7)](_0x31a4fe(0x1cd));}),_0x2adba7['on'](_0x453e70(0x169),(_0x4e5fb2,_0xa2d80e)=>{const _0x52717d=_0x453e70;if(validateAccess(_0xa2d80e,_0x3de24d)[_0x52717d(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96]['send']({'function':_0x52717d(0x1a3),'args':_0x4e5fb2});}else logger['full'](_0x52717d(0x19e));}),_0x2adba7['on'](_0x453e70(0x2e4),(_0x5ef8db,_0x555a66)=>{const _0x1bd3c1=_0x453e70;if(validateAccess(_0x555a66,_0x3de24d)[_0x1bd3c1(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0x1bd3c1(0x173)]({'function':_0x1bd3c1(0x2d2),'args':_0x5ef8db});}else logger['full'](_0x1bd3c1(0x22c));}),_0x2adba7['on'](_0x453e70(0x1b1),(_0x3cfbf0,_0x5253d2)=>{const _0x119547=_0x453e70;if(validateAccess(_0x5253d2,_0x3de24d)[_0x119547(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96]['send']({'function':_0x119547(0x33e),'args':_0x3cfbf0});}else logger[_0x119547(0x1e7)](_0x119547(0x23c));}),_0x2adba7['on']('store-headless',(_0x17b0a5,_0x1a9985)=>{const _0x2df2b0=_0x453e70;if(validateAccess(_0x1a9985,_0x3de24d)[_0x2df2b0(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0x2df2b0(0x173)]({'function':_0x2df2b0(0x1eb),'args':_0x17b0a5});}else logger[_0x2df2b0(0x1e7)](_0x2df2b0(0x1d4));}),_0x2adba7['on'](_0x453e70(0x198),(_0x54809,_0x20a95c)=>{const _0x5a28c2=_0x453e70;if(validateAccess(_0x20a95c,_0x3de24d)['allow']){if(pid[_0x28dc96])pid[_0x28dc96][_0x5a28c2(0x173)]({'function':_0x5a28c2(0x1d8),'args':_0x54809});}else logger['full'](_0x5a28c2(0x2a1));}),_0x2adba7['on'](_0x453e70(0x258),_0x2c3093=>{const _0x21b0fd=_0x453e70;if(validateAccess(_0x2c3093,_0x3de24d)[_0x21b0fd(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0x21b0fd(0x173)]({'function':_0x21b0fd(0x318),'args':null});}else logger[_0x21b0fd(0x1e7)](_0x21b0fd(0x2ff));}),_0x2adba7['on'](_0x453e70(0x223),_0x58d53a=>{const _0x103a24=_0x453e70;if(validateAccess(_0x58d53a,_0x3de24d)['allow']){if(pid[_0x28dc96])pid[_0x28dc96]['send']({'function':_0x103a24(0x17f),'args':null});}else logger[_0x103a24(0x1e7)](_0x103a24(0x16c));}),_0x2adba7['on']('place-order',(_0x1a9db6,_0x1242e9)=>{const _0x3e57f8=_0x453e70;if(validateAccess(_0x1242e9,_0x3de24d)[_0x3e57f8(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0x3e57f8(0x173)]({'function':_0x3e57f8(0x30b),'args':_0x1a9db6});}else logger['full'](_0x3e57f8(0x29d));}),_0x2adba7['on'](_0x453e70(0x2c0),_0x45e80b=>{const _0xaec061=_0x453e70;if(validateAccess(_0x45e80b,_0x3de24d)[_0xaec061(0x195)]){if(pid[_0x28dc96])pid[_0x28dc96][_0xaec061(0x173)]({'function':_0xaec061(0x300),'args':null});}else logger[_0xaec061(0x1e7)](_0xaec061(0x28e));}),_0x2adba7['on']('show-config',_0x5b44ff=>{const _0x5038f1=_0x453e70;if(validateAccess(_0x5b44ff,_0x3de24d)['allow']){if(pid[_0x28dc96])pid[_0x28dc96][_0x5038f1(0x173)]({'function':_0x5038f1(0x1b0),'args':null});}else logger[_0x5038f1(0x1e7)](_0x5038f1(0x151));}),_0x2adba7['on'](_0x453e70(0x29b),_0x18e380=>{const _0x38210b=_0x453e70;if(validateAccess(_0x18e380,_0x3de24d)['allow'])updateBB(_0x38210b(0x170));else logger[_0x38210b(0x1e7)](_0x38210b(0x21d));}),_0x2adba7['on'](_0x453e70(0x211),_0x5a8cb3=>{const _0x40ee0c=_0x453e70;if(validateAccess(_0x5a8cb3,_0x3de24d)[_0x40ee0c(0x195)])getMessages();else logger[_0x40ee0c(0x1e7)](_0x40ee0c(0x298));}),_0x2adba7['on'](_0x453e70(0x1b9),(_0x3fe08e,_0x540cd6)=>{const _0xbd4756=_0x453e70;if(validateAccess(_0x540cd6,_0x3de24d)[_0xbd4756(0x195)])confirmMessage(_0x3fe08e);else logger['full'](_0xbd4756(0x18f));}),_0x2adba7['on'](_0x453e70(0x166),_0x1cdfbc=>{const _0x5aca7d=_0x453e70;if(validateAccess(_0x1cdfbc,_0x3de24d)['allow']){if(devices[_0x3de24d][_0x5aca7d(0x20b)])clearTimeout(devices[_0x3de24d][_0x5aca7d(0x20b)]);if(devices[_0x3de24d][_0x5aca7d(0x296)])clearTimeout(devices[_0x3de24d]['pidExpireLogin']);removeSocketListeners(getClient(_0x2adba7['id'])[_0x5aca7d(0x157)]),addBlacklist(_0x3de24d),devices[_0x3de24d][_0x5aca7d(0x1c2)]=null,devices[_0x3de24d][_0x5aca7d(0x275)]=null,devices[_0x3de24d][_0x5aca7d(0x30d)][_0x5aca7d(0x270)]=null,logger[_0x5aca7d(0x2ec)]('Logged\x20out\x20user\x20...'+_0x3de24d['slice'](-0x8)),io['to'](getClient(_0x2adba7['id'])[_0x5aca7d(0x157)])[_0x5aca7d(0x340)](_0x5aca7d(0x1d3),{'access':{'allow':![],'reason':_0x5aca7d(0x1f1),'token':null}});}else logger['full'](_0x5aca7d(0x34b));});}function removeSocketListeners(_0x5ef4d9){const _0x860ea7=_0x25f60e;getClientsWithUuid(_0x5ef4d9)[_0x860ea7(0x1b4)](_0x475503=>{const _0x58a360=_0x860ea7;getSocket(_0x475503['id'])[_0x58a360(0x33f)]();});}function cleanSettings(){const _0x293b22=_0x25f60e;let _0x30f746=settings;return settings[_0x293b22(0x14a)]&&settings[_0x293b22(0x14a)]!=''&&(_0x30f746={..._0x30f746,'telegramToken':_0x293b22(0x2b3)}),settings[_0x293b22(0x1d5)]&&settings[_0x293b22(0x1d5)]!=''&&(_0x30f746={..._0x30f746,'bbPassword':_0x293b22(0x2b3)}),(settings[_0x293b22(0x1d5)]&&settings[_0x293b22(0x1d5)]==_0x293b22(0x1ce)||settings['telegramToken']&&settings['telegramToken']=='***')&&(_0x30f746={..._0x30f746,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x293b22(0x14a)]==_0x293b22(0x1ce)}}),_0x30f746;}async function updateBB(_0x221cea){const _0x4b0f6e=_0x25f60e;await backupConfigFiles(),installingUpdate=!![],config[_0x4b0f6e(0x1b4)](_0x4f9532=>{const _0x461597=_0x4b0f6e;restartBot(_0x4f9532[_0x461597(0x1cc)]);});if(_0x221cea==_0x4b0f6e(0x170))process['send']({'update':!![],'environment':environment},_0x5aca0c=>{});else _0x221cea==_0x4b0f6e(0x2b1)&&process[_0x4b0f6e(0x173)]({'reinstall':!![],'environment':environment},_0x142f53=>{});}function startBot(_0x8981b3,_0x25d285,_0x2d8a19){const _0x4b0894=_0x25f60e;if(debugging)_0x8981b3[_0x4b0894(0x19f)]('-d');let _0x54e46f=![];const _0x470939=_0x8981b3[0x0];_0x25d285={..._0x25d285,'stdio':[_0x4b0894(0x171),_0x4b0894(0x171),_0x4b0894(0x171),_0x4b0894(0x333)]},pid[_0x470939]=childProcess['fork'](botfile,_0x8981b3,_0x25d285),pid[_0x470939]['on']('message',_0x6e3a64=>{const _0x2986a5=_0x4b0894;switch(Object['keys'](_0x6e3a64)[0x0]){case'botname':updateBotName(_0x470939,_0x6e3a64[_0x2986a5(0x1a2)]);break;case _0x2986a5(0x2fe):updateBotManager();break;case'status':updateStatus(_0x470939,_0x6e3a64[_0x2986a5(0x1d3)]);break;case'live':updateLive(_0x470939,_0x6e3a64[_0x2986a5(0x244)]);break;case _0x2986a5(0x301):updateLive(_0x470939,_0x6e3a64[_0x2986a5(0x301)]),io['to'](_0x470939)[_0x2986a5(0x340)](_0x2986a5(0x1d3),{'access':{'allow':![],'reason':_0x2986a5(0x32d),'token':null}});break;case _0x2986a5(0x23b):_0x6e3a64[_0x2986a5(0x23b)]==_0x2986a5(0x313)&&restartBot(_0x470939);_0x6e3a64[_0x2986a5(0x23b)]==_0x2986a5(0x2a9)&&toggleBot(_0x470939,_0x2986a5(0x268),'stopped');break;case _0x2986a5(0x303):sendTelegramBot(_0x470939,_0x6e3a64[_0x2986a5(0x303)]);break;case _0x2986a5(0x23e):sendTelegramMsg(_0x6e3a64[_0x2986a5(0x23e)]);break;case _0x2986a5(0x161):io['to'](_0x470939)['emit'](_0x6e3a64['function'],_0x6e3a64[_0x2986a5(0x241)]);break;}}),pid[_0x470939]['on'](_0x4b0894(0x271),function(_0x2316ae){if(_0x54e46f)return;_0x54e46f=!![],_0x2d8a19(_0x2316ae);}),pid[_0x470939]['on'](_0x4b0894(0x1b6),async function(_0xd9c862){const _0x1a4a6d=_0x4b0894;if(terminating)return;if(installingUpdate){logger[_0x1a4a6d(0x2ec)](_0x1a4a6d(0x186)),io[_0x1a4a6d(0x228)]();return;}if(_0x54e46f)return;_0x54e46f=!![],_0x2d8a19(null);const _0x59e3ca=dbConfig['get'](_0x1a4a6d(0x21c))[_0x1a4a6d(0x335)]({'botID':_0x470939})['value']();_0x59e3ca&&(_0x59e3ca[_0x1a4a6d(0x1d3)]==_0x1a4a6d(0x2c5)||_0x59e3ca['status']==_0x1a4a6d(0x21e))&&(await sleep(0x3e8),updateLive(_0x470939,_0x1a4a6d(0x14f)),logger[_0x1a4a6d(0x1e7)](_0x1a4a6d(0x2a5)+_0x470939),startBot([_0x470939,userID],{'cwd':bbpath},function(_0x834546){const _0x5be866=_0x1a4a6d;if(_0x834546)logger[_0x5be866(0x1e7)](_0x834546);}));});}function stopBot(_0x3c3cfc){const _0x51ae7e=_0x25f60e;getClientsWithBotID(_0x3c3cfc)[_0x51ae7e(0x1b4)](_0x588d3c=>{const _0x38771c=_0x51ae7e;getSocket(_0x588d3c['id'])[_0x38771c(0x15b)](!![]),removeClient(_0x588d3c['id']);}),pid[_0x3c3cfc]&&(pid[_0x3c3cfc][_0x51ae7e(0x2a9)](),pid[_0x3c3cfc]=null);}function stopAllBots(){const _0x38d1a9=_0x25f60e;terminating=!![];const _0x2b3e1b=getEnabledBots();_0x2b3e1b[_0x38d1a9(0x1b4)](_0x2defc2=>{const _0x42d40d=_0x38d1a9;stopBot(_0x2defc2[_0x42d40d(0x1cc)]);});}function restartBot(_0x4c713b){const _0x2536af=_0x25f60e;if(pid[_0x4c713b])pid[_0x4c713b][_0x2536af(0x2a9)]();}function addBot(){const _0x47a8fa=_0x25f60e;let _0x1fe96d;for(let _0x226815=0x1;_0x226815<0x3e9;_0x226815++){_0x1fe96d=_0x226815['toString']()[_0x47a8fa(0x174)](0x3,'0');let _0x1a7edb=config[_0x47a8fa(0x335)](_0xd3eb47=>_0xd3eb47[_0x47a8fa(0x1cc)]==_0x1fe96d);if(!_0x1a7edb)break;}if(_0x1fe96d===_0x47a8fa(0x334)){logger[_0x47a8fa(0x1e7)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x1fe96d),dbConfig[_0x47a8fa(0x2cf)](_0x47a8fa(0x21c))[_0x47a8fa(0x19f)]({'botID':_0x1fe96d,'botname':_0x47a8fa(0x16f)+_0x1fe96d,'status':_0x47a8fa(0x21e),'live':''})['write'](),startBot([_0x1fe96d,userID],{'cwd':bbpath},function(_0xa96ad9){const _0x5245e8=_0x47a8fa;if(_0xa96ad9)logger[_0x5245e8(0x1e7)](_0xa96ad9);}),config=getConfiguration(),io['to'](_0x47a8fa(0x1c1))[_0x47a8fa(0x340)](_0x47a8fa(0x21c),config),broadcastToBots(_0x47a8fa(0x21c),JSON['stringify'](config));}function deleteBot(_0x8c043b){const _0x554655=_0x25f60e;getClientsWithBotID(_0x8c043b)[_0x554655(0x1b4)](_0x14499a=>{const _0x692ef8=_0x554655;getSocket(_0x14499a['id'])[_0x692ef8(0x15b)](!![]),removeClient(_0x14499a['id']);}),dbConfig[_0x554655(0x2cf)](_0x554655(0x21c))[_0x554655(0x23a)]({'botID':_0x8c043b})[_0x554655(0x217)](),logger[_0x554655(0x1e7)](_0x554655(0x1d7)+_0x8c043b),stopBot(_0x8c043b);try{if(fs[_0x554655(0x2a4)](path[_0x554655(0x329)](configpath,'bot-'+_0x8c043b+_0x554655(0x2d1))))fs[_0x554655(0x2df)](path[_0x554655(0x329)](configpath,_0x554655(0x1b8)+_0x8c043b+_0x554655(0x2d1)));if(fs['existsSync'](path[_0x554655(0x329)](configpath,_0x554655(0x1b8)+_0x8c043b+'-events.json')))fs[_0x554655(0x2df)](path[_0x554655(0x329)](configpath,_0x554655(0x1b8)+_0x8c043b+_0x554655(0x2be)));if(fs[_0x554655(0x2a4)](path[_0x554655(0x329)](configpath,'bot-'+_0x8c043b+_0x554655(0x236))))fs[_0x554655(0x2df)](path['join'](configpath,'bot-'+_0x8c043b+'-performance.json'));if(fs[_0x554655(0x2a4)](path[_0x554655(0x329)](configpath,_0x554655(0x1b8)+_0x8c043b+_0x554655(0x27b))))fs[_0x554655(0x2df)](path[_0x554655(0x329)](configpath,_0x554655(0x1b8)+_0x8c043b+'-results.json'));}catch(_0x19a80c){if(_0x19a80c)logger['full'](_0x554655(0x22b),_0x19a80c);}config=getConfiguration(),io['to'](_0x554655(0x1c1))['emit']('bots',config),broadcastToBots(_0x554655(0x21c),JSON[_0x554655(0x207)](config));}function toggleBot(_0x568867,_0x349608,_0x18d51c){const _0x209f1e=_0x25f60e;dbConfig[_0x209f1e(0x2cf)](_0x209f1e(0x21c))[_0x209f1e(0x335)]({'botID':_0x568867})[_0x209f1e(0x230)]({'status':_0x349608})['assign']({'live':_0x18d51c})[_0x209f1e(0x217)]();if(_0x349608=='enabled'||_0x349608==_0x209f1e(0x21e))logger[_0x209f1e(0x1e7)](_0x209f1e(0x1ad)+_0x568867),startBot([_0x568867,userID],{'cwd':bbpath},function(_0x5075da){const _0x42cd50=_0x209f1e;if(_0x5075da)logger[_0x42cd50(0x1e7)](_0x5075da);});else(_0x349608==_0x209f1e(0x268)||_0x349608==_0x209f1e(0x1e1))&&(logger[_0x209f1e(0x1e7)](_0x209f1e(0x2f6)+_0x568867),stopBot(_0x568867));config=getConfiguration(),io['to'](_0x209f1e(0x1c1))[_0x209f1e(0x340)](_0x209f1e(0x21c),config),broadcastToBots('bots',JSON[_0x209f1e(0x207)](config));}function toggleStatus(_0x550e1a){const _0x763a6f=_0x25f60e;let _0x52274e=dbConfig['get']('bots')[_0x763a6f(0x335)]({'botID':_0x550e1a})[_0x763a6f(0x338)](),_0x1b2079;if(_0x52274e[_0x763a6f(0x1d3)]===_0x763a6f(0x2c5))_0x1b2079=_0x763a6f(0x268);else{if(_0x52274e[_0x763a6f(0x1d3)]===_0x763a6f(0x21e))_0x1b2079=_0x763a6f(0x1e1);else{if(_0x52274e['status']===_0x763a6f(0x1e1))_0x1b2079=_0x763a6f(0x21e);else{if(_0x52274e[_0x763a6f(0x1d3)]===_0x763a6f(0x268))_0x1b2079=_0x763a6f(0x2c5);}}}return _0x1b2079;}function updateStatus(_0x24bf62,_0x22674b){const _0x52215c=_0x25f60e;dbConfig['get'](_0x52215c(0x21c))[_0x52215c(0x335)]({'botID':_0x24bf62})[_0x52215c(0x230)]({'status':_0x22674b})[_0x52215c(0x217)](),config=getConfiguration(),io['to'](_0x52215c(0x1c1))[_0x52215c(0x340)](_0x52215c(0x21c),config),broadcastToBots(_0x52215c(0x21c),JSON[_0x52215c(0x207)](config));}function updateLive(_0x57a8cb,_0xa7e122){const _0x4383a=_0x25f60e;dbConfig[_0x4383a(0x2cf)](_0x4383a(0x21c))[_0x4383a(0x335)]({'botID':_0x57a8cb})[_0x4383a(0x230)]({'live':_0xa7e122})[_0x4383a(0x217)](),config=getConfiguration(),io['to'](_0x4383a(0x1c1))[_0x4383a(0x340)]('bots',config),broadcastToBots('bots',JSON[_0x4383a(0x207)](config));}function updateBotName(_0x39f4cb,_0x2ff208){const _0x25471d=_0x25f60e;dbConfig['get'](_0x25471d(0x21c))[_0x25471d(0x335)]({'botID':_0x39f4cb})[_0x25471d(0x230)]({'botname':_0x2ff208})[_0x25471d(0x217)](),config=getConfiguration(),io['to'](_0x25471d(0x1c1))['emit'](_0x25471d(0x21c),config),broadcastToBots(_0x25471d(0x21c),JSON['stringify'](config));}function updateBotManager(){const _0x4a68fa=_0x25f60e;config=getConfiguration(),io['to'](_0x4a68fa(0x1c1))[_0x4a68fa(0x340)](_0x4a68fa(0x21c),config),broadcastToBots('bots',JSON[_0x4a68fa(0x207)](config));}function toggleBotMode(_0x123b2a){const _0x98fb1=_0x25f60e;if(pid[_0x123b2a])pid[_0x123b2a][_0x98fb1(0x173)]({'function':_0x98fb1(0x177),'args':null});else{const _0xd8ca7e=configpath+_0x98fb1(0x1b8)+_0x123b2a+'-config.json',_0x4352f5=fs[_0x98fb1(0x28a)](_0xd8ca7e),_0x4c92a3=JSON['parse'](_0x4352f5),_0x5aea1d=_0x4c92a3[_0x98fb1(0x319)][0x0][_0x98fb1(0x1db)];_0x4c92a3[_0x98fb1(0x319)][0x0]['headless']=!_0x5aea1d;const _0x1e4e0f=JSON['stringify'](_0x4c92a3,null,0x2);fs[_0x98fb1(0x221)](_0xd8ca7e,_0x1e4e0f),config=getConfiguration(),io['to'](_0x98fb1(0x1c1))[_0x98fb1(0x340)](_0x98fb1(0x21c),config),broadcastToBots(_0x98fb1(0x21c),JSON[_0x98fb1(0x207)](config));}}function validateTelegram(_0x296f1f){const _0x5395b0=_0x25f60e;if(_0x296f1f[_0x5395b0(0x17b)][_0x5395b0(0x343)]!=settings[_0x5395b0(0x164)]&&'@'+_0x296f1f['from'][_0x5395b0(0x343)]!=settings['telegramUsername']||_0x296f1f[_0x5395b0(0x320)]['id']!=settings[_0x5395b0(0x1f3)])return sendTelegram(_0x296f1f[_0x5395b0(0x320)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x5395b0(0x2c6)}),![];return!![];}async function initTelegram(){const _0x3d1743=_0x25f60e;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x3d1743(0x14a)]);let _0x5508ab=_0x3d1743(0x1e3);_0x5508ab+='\x0a',_0x5508ab+=_0x3d1743(0x229),_0x5508ab+=_0x3d1743(0x1ea),_0x5508ab+=_0x3d1743(0x325),_0x5508ab+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5508ab+=_0x3d1743(0x336),_0x5508ab+=_0x3d1743(0x1a5),_0x5508ab+=_0x3d1743(0x19b),_0x5508ab+=_0x3d1743(0x304),_0x5508ab+=_0x3d1743(0x287),_0x5508ab+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x5508ab+=_0x3d1743(0x18d),_0x5508ab+=_0x3d1743(0x312),_0x5508ab+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x5508ab+=_0x3d1743(0x1c3);let _0x4355d3=_0x3d1743(0x206);_0x4355d3+='\x0a',_0x4355d3+=_0x5508ab,tgBot[_0x3d1743(0x2cd)]((_0x1f128c,_0x55299b)=>{const _0x11bdfa=_0x3d1743;logger[_0x11bdfa(0x1cb)](getTimeStamp()+_0x11bdfa(0x26d)),logger[_0x11bdfa(0x2ec)](_0x11bdfa(0x1ed),_0x1f128c);}),tgBot[_0x3d1743(0x347)](async(_0x3a9fcd,_0x71ac11)=>{const _0x12e817=_0x3d1743;if(!(!settings[_0x12e817(0x1f3)]&&_0x3a9fcd['update']['message'][_0x12e817(0x2d6)]=='/start')){if(!validateTelegram(_0x3a9fcd))return;}_0x71ac11();}),tgBot[_0x3d1743(0x1da)]('start',async _0x19ab33=>{const _0x3ac71e=_0x3d1743;if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x19ab33[_0x3ac71e(0x320)]['id']);updateSetting(_0x3ac71e(0x243),!![]);if(!validateTelegram(_0x19ab33))return;await sendTelegram(_0x19ab33['chat']['id'],_0x4355d3);}),tgBot[_0x3d1743(0x1da)]('enable',async _0x2aaf4c=>{const _0xbcca55=_0x3d1743;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2aaf4c[_0xbcca55(0x320)]['id'],'Notifications\x20enabled');}),tgBot['command'](_0x3d1743(0x2ac),async _0x4afcc5=>{const _0x962ec1=_0x3d1743;await sendTelegram(_0x4afcc5[_0x962ec1(0x320)]['id'],_0x962ec1(0x2a0)),updateSetting(_0x962ec1(0x243),![]);}),tgBot['command'](_0x3d1743(0x214),async _0x377859=>{const _0x4cdaa2=_0x3d1743,_0x479973=Markup[_0x4cdaa2(0x309)]([Markup[_0x4cdaa2(0x219)][_0x4cdaa2(0x224)](_0x4cdaa2(0x30a),_0x4cdaa2(0x33b)),Markup[_0x4cdaa2(0x219)]['callback'](_0x4cdaa2(0x307),_0x4cdaa2(0x2b0)),Markup[_0x4cdaa2(0x219)][_0x4cdaa2(0x224)](_0x4cdaa2(0x31b),'config_all')]);_0x377859[_0x4cdaa2(0x2c4)](_0x4cdaa2(0x264),_0x479973);}),tgBot[_0x3d1743(0x2f4)](_0x3d1743(0x33b),async _0x1225de=>{const _0x5ad7d7=_0x3d1743;_0x1225de['editMessageReplyMarkup'](),updateSetting(_0x5ad7d7(0x22f),_0x5ad7d7(0x2c1)),updateSetting(_0x5ad7d7(0x243),!![]),await sendTelegram(_0x1225de[_0x5ad7d7(0x320)]['id'],_0x5ad7d7(0x23d));}),tgBot[_0x3d1743(0x2f4)](_0x3d1743(0x2b0),async _0x4fe9a1=>{const _0xedc391=_0x3d1743;_0x4fe9a1[_0xedc391(0x266)](),updateSetting(_0xedc391(0x22f),_0xedc391(0x159)),updateSetting(_0xedc391(0x243),!![]),await sendTelegram(_0x4fe9a1[_0xedc391(0x320)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot['action']('config_all',async _0x17c0b5=>{const _0x50512a=_0x3d1743;_0x17c0b5[_0x50512a(0x266)](),updateSetting(_0x50512a(0x22f),_0x50512a(0x231)),updateSetting(_0x50512a(0x243),!![]),await sendTelegram(_0x17c0b5[_0x50512a(0x320)]['id'],_0x50512a(0x25d));}),tgBot['command'](_0x3d1743(0x1d3),async _0x2b8604=>{const _0x4e91d8=_0x3d1743,_0x5b4648=getBotsWithMode();let _0x276e84='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x4e91d8(0x1b4)](_0x3c83c0=>{const _0x4fa516=_0x4e91d8,_0x15f61d=_0x5b4648['find'](_0x301d65=>_0x301d65[_0x4fa516(0x1cc)]==_0x3c83c0[_0x4fa516(0x1cc)])['mode'];_0x276e84+=_0x4fa516(0x16f)+_0x3c83c0['botID']+':\x20'+_0x3c83c0[_0x4fa516(0x1d3)]+_0x4fa516(0x1dc)+_0x15f61d+'\x20|\x20'+_0x3c83c0['live']+'\x0a';}),_0x276e84+='\x0a',_0x276e84+=_0x4e91d8(0x2bc),_0x276e84+=!settings[_0x4e91d8(0x243)]?'Notifications\x20disabled\x0a':_0x4e91d8(0x1ee),_0x276e84+=settings[_0x4e91d8(0x243)]?settings[_0x4e91d8(0x22f)]=='all'?_0x4e91d8(0x20a):_0x4e91d8(0x253)+settings['telegramEvents']+_0x4e91d8(0x14b):'',await sendTelegram(_0x2b8604['chat']['id'],_0x276e84,{'parse_mode':_0x4e91d8(0x2c6)});}),tgBot[_0x3d1743(0x1da)]('restart',async _0x536fd4=>{const _0x173d69=_0x3d1743,_0x30114e=getEnabledBots();if(_0x30114e[_0x173d69(0x1d9)]==0x0)await sendTelegram(_0x536fd4[_0x173d69(0x320)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x30114e[_0x173d69(0x1d9)]>0x1)_0x30114e[_0x173d69(0x19f)]({'botID':_0x173d69(0x231)});let _0x390bc0=[],_0x145d88=[];const _0x2ff0c1=_0x30114e[_0x173d69(0x1d9)]%0x4==0x0||_0x30114e[_0x173d69(0x1d9)]%0x4==0x3||_0x30114e[_0x173d69(0x1d9)]%0x3==0x1?0x4:0x3;let _0x1a4804=0x0;_0x30114e[_0x173d69(0x1b4)]((_0x1b1f28,_0x5e3725)=>{const _0x3e79db=_0x173d69;if(_0x5e3725%_0x2ff0c1==0x0)_0x145d88=[];_0x145d88[_0x3e79db(0x19f)](Markup[_0x3e79db(0x219)][_0x3e79db(0x224)](_0x1b1f28[_0x3e79db(0x1cc)]==_0x3e79db(0x231)?'All\x20bots':_0x3e79db(0x16f)+_0x1b1f28[_0x3e79db(0x1cc)],'restart_'+_0x1b1f28[_0x3e79db(0x1cc)])),_0x5e3725%_0x2ff0c1==0x0&&(_0x390bc0[_0x1a4804]=_0x145d88,_0x1a4804++);});const _0x3718e0=Markup[_0x173d69(0x309)](_0x390bc0);_0x536fd4[_0x173d69(0x2c4)](_0x173d69(0x276),_0x3718e0);}}),tgBot[_0x3d1743(0x2f4)](/restart_(.+)/,async _0x24347b=>{const _0x3ea5f5=_0x3d1743,_0x5f433c=_0x24347b['match'][0x1];_0x24347b[_0x3ea5f5(0x266)](),_0x5f433c=='all'?config['forEach'](_0xd2976c=>{restartBot(_0xd2976c['botID']);}):restartBot(_0x5f433c);}),tgBot[_0x3d1743(0x1da)]('on',async _0xbf5782=>{const _0x93e443=_0x3d1743,_0xc0e94d=getDisabledBots();if(_0xc0e94d[_0x93e443(0x1d9)]==0x0)await sendTelegram(_0xbf5782[_0x93e443(0x320)]['id'],_0x93e443(0x2c3));else{if(_0xc0e94d[_0x93e443(0x1d9)]>0x1)_0xc0e94d[_0x93e443(0x19f)]({'botID':'all'});let _0x43fb6f=[],_0x1dcc57=[];const _0x40d493=_0xc0e94d['length']%0x4==0x0||_0xc0e94d[_0x93e443(0x1d9)]%0x4==0x3||_0xc0e94d[_0x93e443(0x1d9)]%0x3==0x1?0x4:0x3;let _0x37474e=0x0;_0xc0e94d['forEach']((_0x42789f,_0x11dbaa)=>{const _0x25166d=_0x93e443;if(_0x11dbaa%_0x40d493==0x0)_0x1dcc57=[];_0x1dcc57[_0x25166d(0x19f)](Markup[_0x25166d(0x219)]['callback'](_0x42789f[_0x25166d(0x1cc)]==_0x25166d(0x231)?'All\x20bots':_0x25166d(0x16f)+_0x42789f[_0x25166d(0x1cc)],'on_'+_0x42789f[_0x25166d(0x1cc)])),_0x11dbaa%_0x40d493==0x0&&(_0x43fb6f[_0x37474e]=_0x1dcc57,_0x37474e++);});const _0x56f990=Markup['inlineKeyboard'](_0x43fb6f);_0xbf5782[_0x93e443(0x2c4)](_0x93e443(0x1e2),_0x56f990);}}),tgBot[_0x3d1743(0x2f4)](/on_(.+)/,async _0x5b1757=>{const _0x205815=_0x3d1743,_0x197a20=_0x5b1757[_0x205815(0x332)][0x1];_0x5b1757[_0x205815(0x266)]();if(_0x197a20==_0x205815(0x231)){const _0x2046a9=getDisabledBots();await sendTelegram(_0x5b1757[_0x205815(0x320)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x2046a9['forEach'](_0x9eec3b=>{const _0x133c88=_0x205815;if(_0x9eec3b[_0x133c88(0x1cc)]!='all')toggleBot(_0x9eec3b['botID'],toggleStatus(_0x9eec3b['botID']),'stopped');});}else await sendTelegram(_0x5b1757[_0x205815(0x320)]['id'],_0x205815(0x2e8)+_0x197a20),toggleBot(_0x197a20,toggleStatus(_0x197a20),_0x205815(0x14f));}),tgBot[_0x3d1743(0x1da)]('off',async _0x916575=>{const _0x586872=_0x3d1743,_0xad3519=getEnabledBots();if(_0xad3519[_0x586872(0x1d9)]==0x0)await sendTelegram(_0x916575[_0x586872(0x320)]['id'],_0x586872(0x267));else{if(_0xad3519[_0x586872(0x1d9)]>0x1)_0xad3519[_0x586872(0x19f)]({'botID':_0x586872(0x231)});let _0x3a3ad3=[],_0x6ab54e=[];const _0x1ea1a0=_0xad3519[_0x586872(0x1d9)]%0x4==0x0||_0xad3519['length']%0x4==0x3||_0xad3519[_0x586872(0x1d9)]%0x3==0x1?0x4:0x3;let _0x2bdb3c=0x0;_0xad3519['forEach']((_0x2b12fc,_0x26c759)=>{const _0xbe4755=_0x586872;if(_0x26c759%_0x1ea1a0==0x0)_0x6ab54e=[];_0x6ab54e[_0xbe4755(0x19f)](Markup[_0xbe4755(0x219)][_0xbe4755(0x224)](_0x2b12fc[_0xbe4755(0x1cc)]=='all'?_0xbe4755(0x1fc):_0xbe4755(0x16f)+_0x2b12fc[_0xbe4755(0x1cc)],'off_'+_0x2b12fc[_0xbe4755(0x1cc)])),_0x26c759%_0x1ea1a0==0x0&&(_0x3a3ad3[_0x2bdb3c]=_0x6ab54e,_0x2bdb3c++);});const _0x404eb3=Markup[_0x586872(0x309)](_0x3a3ad3);_0x916575[_0x586872(0x2c4)](_0x586872(0x30c),_0x404eb3);}}),tgBot[_0x3d1743(0x2f4)](/off_(.+)/,async _0xa95d4b=>{const _0x19d543=_0x3d1743,_0x2eceb7=_0xa95d4b[_0x19d543(0x332)][0x1];_0xa95d4b[_0x19d543(0x266)]();if(_0x2eceb7=='all'){const _0x10bb5d=getEnabledBots();await sendTelegram(_0xa95d4b[_0x19d543(0x320)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x10bb5d[_0x19d543(0x1b4)](_0x382119=>{const _0xc49f5d=_0x19d543;if(_0x382119[_0xc49f5d(0x1cc)]!=_0xc49f5d(0x231))toggleBot(_0x382119[_0xc49f5d(0x1cc)],toggleStatus(_0x382119[_0xc49f5d(0x1cc)]),_0xc49f5d(0x14f));});}else await sendTelegram(_0xa95d4b['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x2eceb7),toggleBot(_0x2eceb7,toggleStatus(_0x2eceb7),_0x19d543(0x14f));}),tgBot[_0x3d1743(0x1da)](_0x3d1743(0x323),async _0x27283d=>{const _0xe4074b=_0x3d1743,_0x15a044=getEnabledBots();if(_0x15a044[_0xe4074b(0x1d9)]==0x0)await sendTelegram(_0x27283d[_0xe4074b(0x320)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x15a044[_0xe4074b(0x1d9)]>0x1){let _0x18ebff=[],_0x33dba4=[];const _0x11284e=_0x15a044[_0xe4074b(0x1d9)]%0x4==0x0||_0x15a044[_0xe4074b(0x1d9)]%0x4==0x3||_0x15a044[_0xe4074b(0x1d9)]%0x3==0x1?0x4:0x3;let _0x3cb316=0x0;_0x15a044[_0xe4074b(0x1b4)]((_0x291e03,_0x1189d2)=>{const _0x586b30=_0xe4074b;if(_0x1189d2%_0x11284e==0x0)_0x33dba4=[];_0x33dba4[_0x586b30(0x19f)](Markup[_0x586b30(0x219)][_0x586b30(0x224)](_0x586b30(0x16f)+_0x291e03['botID'],'metrics_'+_0x291e03[_0x586b30(0x1cc)])),_0x1189d2%_0x11284e==0x0&&(_0x18ebff[_0x3cb316]=_0x33dba4,_0x3cb316++);});const _0x256e3a=Markup[_0xe4074b(0x309)](_0x18ebff);_0x27283d[_0xe4074b(0x2c4)](_0xe4074b(0x2b9),_0x256e3a);}else{const _0x327db8=_0x15a044[0x0][_0xe4074b(0x1cc)];if(pid[_0x327db8])pid[_0x327db8][_0xe4074b(0x173)]({'function':_0xe4074b(0x1f0),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x124926=>{const _0x4cc7d6=_0x3d1743,_0x779534=_0x124926[_0x4cc7d6(0x332)][0x1];_0x124926[_0x4cc7d6(0x266)]();if(pid[_0x779534])pid[_0x779534]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot['command'](_0x3d1743(0x278),async _0x360e88=>{const _0x494065=_0x3d1743,_0x321f8d=getEnabledBots();if(_0x321f8d[_0x494065(0x1d9)]==0x0)await sendTelegram(_0x360e88[_0x494065(0x320)]['id'],_0x494065(0x267));else{if(_0x321f8d['length']>0x1){let _0x2428fd=[],_0xf37ec2=[];const _0x3f3523=_0x321f8d[_0x494065(0x1d9)]%0x4==0x0||_0x321f8d[_0x494065(0x1d9)]%0x4==0x3||_0x321f8d['length']%0x3==0x1?0x4:0x3;let _0x58f2bb=0x0;_0x321f8d['forEach']((_0x6e2b60,_0x476a3a)=>{const _0xab1387=_0x494065;if(_0x476a3a%_0x3f3523==0x0)_0xf37ec2=[];_0xf37ec2[_0xab1387(0x19f)](Markup[_0xab1387(0x219)]['callback']('Bot\x20'+_0x6e2b60[_0xab1387(0x1cc)],_0xab1387(0x2ae)+_0x6e2b60['botID'])),_0x476a3a%_0x3f3523==0x0&&(_0x2428fd[_0x58f2bb]=_0xf37ec2,_0x58f2bb++);});const _0x1c875b=Markup[_0x494065(0x309)](_0x2428fd);_0x360e88['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x1c875b);}else{const _0x13c4d5=_0x321f8d[0x0][_0x494065(0x1cc)];if(pid[_0x13c4d5])pid[_0x13c4d5]['send']({'function':_0x494065(0x20f),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x34c1a2=>{const _0xf4c53e=_0x3d1743,_0x36edb6=_0x34c1a2[_0xf4c53e(0x332)][0x1];_0x34c1a2[_0xf4c53e(0x266)]();if(pid[_0x36edb6])pid[_0x36edb6][_0xf4c53e(0x173)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x3d1743(0x1da)](_0x3d1743(0x170),async _0x4c8e3e=>{const _0x595639=_0x3d1743;await getMessages();if(!updateAvailable)await sendTelegram(_0x4c8e3e[_0x595639(0x320)]['id'],_0x595639(0x2ce));else{if(!validInstallation)await sendTelegram(_0x4c8e3e[_0x595639(0x320)]['id'],_0x595639(0x1f6));else{const _0x496069=Markup['inlineKeyboard']([Markup[_0x595639(0x219)][_0x595639(0x224)](_0x595639(0x209),_0x595639(0x1df)),Markup[_0x595639(0x219)]['callback']('No',_0x595639(0x2e9))]);_0x4c8e3e['reply'](_0x595639(0x197),_0x496069);}}}),tgBot[_0x3d1743(0x2f4)](/update_(.+)/,async _0x27d024=>{const _0x1dfda9=_0x3d1743,_0x50d353=_0x27d024[_0x1dfda9(0x332)][0x1];_0x27d024[_0x1dfda9(0x266)](),_0x50d353==_0x1dfda9(0x280)&&(await sendTelegram(_0x27d024[_0x1dfda9(0x320)]['id'],_0x1dfda9(0x249)),updateBB(_0x1dfda9(0x170))),_0x50d353=='no'&&await sendTelegram(_0x27d024['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot['command'](_0x3d1743(0x2b1),async _0x2039b6=>{const _0x1fbe45=_0x3d1743;if(!validInstallation)await sendTelegram(_0x2039b6[_0x1fbe45(0x320)]['id'],_0x1fbe45(0x33a));else{const _0xed35f5=Markup['inlineKeyboard']([Markup[_0x1fbe45(0x219)][_0x1fbe45(0x224)]('Yes',_0x1fbe45(0x20d)),Markup['button'][_0x1fbe45(0x224)]('No',_0x1fbe45(0x284))]);_0x2039b6['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0xed35f5);}}),tgBot['action'](/reinstall_(.+)/,async _0xf0fd3b=>{const _0x41b3c9=_0x3d1743,_0x961178=_0xf0fd3b[_0x41b3c9(0x332)][0x1];_0xf0fd3b[_0x41b3c9(0x266)](),_0x961178==_0x41b3c9(0x280)&&(await sendTelegram(_0xf0fd3b['chat']['id'],_0x41b3c9(0x210)),updateBB(_0x41b3c9(0x2b1))),_0x961178=='no'&&await sendTelegram(_0xf0fd3b['chat']['id'],_0x41b3c9(0x183));}),tgBot['command'](_0x3d1743(0x201),async _0x39b22f=>{const _0x5e060c=_0x3d1743,_0x3e5cc6=getBotsWithMode();if(_0x3e5cc6['length']==0x0)await sendTelegram(_0x39b22f['chat']['id'],_0x5e060c(0x267));else{let _0xae24f1=[],_0x46974c=[];const _0x5be184=0x2;let _0x5c9e9c=0x0;_0x3e5cc6[_0x5e060c(0x1b4)]((_0x306d19,_0xa9edba)=>{const _0xb8b5f5=_0x5e060c;if(_0xa9edba%_0x5be184==0x0)_0x46974c=[];_0x46974c[_0xb8b5f5(0x19f)](Markup['button']['callback'](_0xb8b5f5(0x16f)+_0x306d19[_0xb8b5f5(0x1cc)]+'\x20('+_0x306d19[_0xb8b5f5(0x16b)]+')',_0xb8b5f5(0x29c)+_0x306d19[_0xb8b5f5(0x1cc)])),_0xa9edba%_0x5be184==0x0&&(_0xae24f1[_0x5c9e9c]=_0x46974c,_0x5c9e9c++);});const _0x36e64b=Markup[_0x5e060c(0x309)](_0xae24f1);_0x39b22f[_0x5e060c(0x2c4)](_0x5e060c(0x1c7),_0x36e64b);}}),tgBot[_0x3d1743(0x2f4)](/toggle_(.+)/,async _0x305b51=>{const _0x3034e7=_0x3d1743,_0x5db13d=_0x305b51[_0x3034e7(0x332)][0x1];_0x305b51[_0x3034e7(0x266)]();const _0x5c68c4=getBotsWithMode(),_0x1a817c=_0x5c68c4[_0x3034e7(0x335)](_0x3e8e10=>_0x3e8e10['botID']==_0x5db13d),_0xd78b2d=_0x1a817c[_0x3034e7(0x16b)]==_0x3034e7(0x204)?_0x3034e7(0x20e):_0x3034e7(0x204);await sendTelegram(_0x305b51[_0x3034e7(0x320)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x5db13d+_0x3034e7(0x150)+_0xd78b2d+_0x3034e7(0x19a)),toggleBotMode(_0x5db13d);}),tgBot[_0x3d1743(0x1da)](_0x3d1743(0x1d0),async _0x571fb8=>{const _0x48dc4c=_0x3d1743;let _0x357297='';config[_0x48dc4c(0x1b4)](_0x37d391=>{const _0x135a7a=_0x48dc4c;_0x357297+='Bot\x20'+_0x37d391['botID']+':\x20'+_0x37d391[_0x135a7a(0x1a2)]+'\x0a';}),await sendTelegram(_0x571fb8[_0x48dc4c(0x320)]['id'],_0x357297,{'parse_mode':'HTML'});}),tgBot[_0x3d1743(0x1da)]('help',async _0x22be4e=>{await sendTelegram(_0x22be4e['chat']['id'],_0x5508ab);}),process['once'](_0x3d1743(0x330),()=>tgBot['stop'](_0x3d1743(0x330))),process['once'](_0x3d1743(0x2c2),()=>tgBot[_0x3d1743(0x23b)](_0x3d1743(0x2c2))),tgBot[_0x3d1743(0x305)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x3011df,_0x5b3d4e,_0x568613){const _0x168eb0=_0x25f60e;try{await tgBot[_0x168eb0(0x303)][_0x168eb0(0x1e4)](_0x3011df,_0x5b3d4e,_0x568613);}catch(_0xff5d9c){console[_0x168eb0(0x1e8)](_0x168eb0(0x1c4),_0xff5d9c);}}async function sendTelegramBot(_0x3fd25b,_0x23a169){const _0x4d1de2=_0x25f60e;if(settings['telegramEnabled']){if(settings[_0x4d1de2(0x22f)]==_0x4d1de2(0x231)||(_0x23a169[_0x4d1de2(0x26e)]=='error'||_0x23a169['type']==_0x4d1de2(0x18a)||_0x23a169[_0x4d1de2(0x26e)]=='success')&&settings[_0x4d1de2(0x22f)]==_0x4d1de2(0x159)||_0x23a169[_0x4d1de2(0x26e)]==_0x4d1de2(0x269)&&settings['telegramEvents']==_0x4d1de2(0x2c1)){if(tgBot&&settings[_0x4d1de2(0x1f3)]){if(_0x23a169[_0x4d1de2(0x1e6)])await sendTelegram(settings['telegramChatId'],_0x23a169[_0x4d1de2(0x1a2)]+'\x20>\x20'+_0x23a169['event']);else await sendTelegram(settings[_0x4d1de2(0x1f3)],_0x4d1de2(0x16f)+_0x3fd25b+'\x20>\x20'+_0x23a169['event']);}}}}async function sendTelegramMsg(_0x2670d3,_0x23a355=_0x25f60e(0x2c6)){const _0x10b63d=_0x25f60e;return settings[_0x10b63d(0x243)]&&tgBot&&settings[_0x10b63d(0x1f3)]?(await sendTelegram(settings['telegramChatId'],_0x2670d3,{'parse_mode':_0x23a355}),!![]):![];}function getDeviceWithIp(_0xf1685f){return devices['find'](_0x196331=>_0x196331['ip']===_0xf1685f);}async function temporaryAccess2FA(_0x26bbfa,_0x1642cb){const _0x441638=_0x25f60e;let _0x1a312a=new Date(),_0x19bebe=![];if(lastIpApproval){if(_0x1a312a-lastIpApproval<0x1388)_0x19bebe=!![];}lastIpApproval=new Date();if(_0x19bebe)return;if(tgBot&&settings[_0x441638(0x1f3)]){const _0x55451f=uuidRandom();tmpStorage[_0x55451f]={'uuid':_0x26bbfa,'externalip':_0x1642cb};const _0x17b1c0=Markup[_0x441638(0x309)]([Markup[_0x441638(0x219)][_0x441638(0x224)]('5\x20min',_0x441638(0x1ac)+_0x55451f),Markup[_0x441638(0x219)][_0x441638(0x224)](_0x441638(0x1a7),_0x441638(0x213)+_0x55451f),Markup[_0x441638(0x219)][_0x441638(0x224)](_0x441638(0x24e),_0x441638(0x2dc)+_0x55451f),Markup[_0x441638(0x219)][_0x441638(0x224)](_0x441638(0x29a),_0x441638(0x17d)+_0x55451f)]);await sendTelegram(settings['telegramChatId'],_0x441638(0x34f)+normalizeIP(_0x1642cb)['show']+'\x20?',_0x17b1c0),tgBot[_0x441638(0x2f4)](/tempaccess_(.+)_(.+)/,async _0x3989ae=>{const _0x51e673=_0x441638,_0x26285b=_0x3989ae[_0x51e673(0x332)][0x1],_0x38c709=_0x3989ae[_0x51e673(0x332)][0x2],{uuid:_0x10d994,externalip:_0x33db6f}=tmpStorage[_0x38c709];delete tmpStorage[_0x38c709],_0x3989ae['editMessageReplyMarkup'](),devices[_0x10d994][_0x51e673(0x1c2)]={'clientip':_0x33db6f,'timestamp':new Date()[_0x51e673(0x156)](),'expiry':_0x26285b},_0x26285b!=_0x51e673(0x29a)?(await sendTelegram(_0x3989ae[_0x51e673(0x320)]['id'],_0x51e673(0x256)+_0x26285b+_0x51e673(0x24c),{'parse_mode':_0x51e673(0x2c6)}),io['to'](_0x10d994)[_0x51e673(0x340)](_0x51e673(0x1d3),{'access':{'allow':![],'reason':_0x51e673(0x32d),'token':null}})):(await sendTelegram(_0x3989ae[_0x51e673(0x320)]['id'],_0x51e673(0x2a2)),io['to'](_0x10d994)['emit']('status',{'access':{'allow':![],'reason':_0x51e673(0x2fb),'token':null}}));});}}async function loginAccess2FA(_0x101185,_0x4476ba){const _0x117edd=_0x25f60e;if(tgBot&&settings[_0x117edd(0x1f3)]){const _0xda925=uuidRandom();tmpStorage[_0xda925]={'uuid':_0x101185,'externalip':_0x4476ba};const _0x13f7ac=Markup[_0x117edd(0x309)]([Markup['button'][_0x117edd(0x224)](_0x117edd(0x27f),_0x117edd(0x30e)+loginExpiry+'_'+_0xda925),Markup[_0x117edd(0x219)][_0x117edd(0x224)]('reject','login2fa_reject_'+_0xda925)]);await sendTelegram(settings[_0x117edd(0x1f3)],_0x117edd(0x2dd)+normalizeIP(_0x4476ba)['show']+'\x20?',_0x13f7ac),tgBot[_0x117edd(0x2f4)](/login2fa_(.+)_(.+)/,async _0x5362ad=>{const _0x262559=_0x117edd,_0x3081cb=_0x5362ad['match'][0x1],_0x1e0f2a=_0x5362ad[_0x262559(0x332)][0x2],{uuid:_0x1ead21,externalip:_0x2128f7}=tmpStorage[_0x1e0f2a];delete tmpStorage[_0x1e0f2a],_0x5362ad[_0x262559(0x266)](),devices[_0x1ead21][_0x262559(0x275)]={'clientip':_0x2128f7,'timestamp':new Date()['getTime'](),'expiry':_0x3081cb},_0x3081cb!='reject'?(await sendTelegram(_0x5362ad['chat']['id'],_0x262559(0x2c7),{'parse_mode':_0x262559(0x2c6)}),io['to'](_0x1ead21)[_0x262559(0x340)]('status',{'access':{'allow':![],'reason':_0x262559(0x32d),'token':null}})):(await sendTelegram(_0x5362ad[_0x262559(0x320)]['id'],_0x262559(0x1e9)),io['to'](_0x1ead21)[_0x262559(0x340)](_0x262559(0x1d3),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4882d6=_0x25f60e;return dbConfig[_0x4882d6(0x2cf)]('bots')[_0x4882d6(0x34a)]('botID')[_0x4882d6(0x346)]({'status':_0x4882d6(0x2c5)})[_0x4882d6(0x338)]()||[];}function getDisabledBots(){const _0x59845f=_0x25f60e;return dbConfig[_0x59845f(0x2cf)](_0x59845f(0x21c))[_0x59845f(0x34a)](_0x59845f(0x1cc))[_0x59845f(0x346)]({'status':_0x59845f(0x268)})[_0x59845f(0x338)]()||[];}function getBotAttributes(_0xa7b093){const _0x32563d=_0x25f60e;let _0x1d0898={};const _0x475dc6=configpath+'bot-'+_0xa7b093+_0x32563d(0x2d1),_0x21df38=fs[_0x32563d(0x2a4)](_0x475dc6);if(_0x21df38){const _0x191734=fs[_0x32563d(0x28a)](_0x475dc6);try{const _0xd87b1b=JSON['parse'](_0x191734),_0x45c10e=_0xd87b1b?_0xd87b1b['bot'][0x0][_0x32563d(0x1db)]:![];_0x1d0898[_0x32563d(0x16b)]=_0x45c10e?_0x32563d(0x204):_0x32563d(0x20e),_0x1d0898[_0x32563d(0x1a2)]=_0xd87b1b?_0xd87b1b[_0x32563d(0x319)][0x0][_0x32563d(0x1a2)]:_0x32563d(0x16f)+_0xa7b093;}catch(_0x881430){_0x1d0898[_0x32563d(0x16b)]='manual',_0x1d0898[_0x32563d(0x1a2)]=_0x32563d(0x16f)+_0xa7b093;}}else _0x1d0898[_0x32563d(0x16b)]=_0x32563d(0x20e),_0x1d0898['botname']=_0x32563d(0x16f)+_0xa7b093;return _0x1d0898;}function getBotsWithMode(){const _0xa24f7b=_0x25f60e,_0x4e3ca4=dbConfig[_0xa24f7b(0x2cf)](_0xa24f7b(0x21c))[_0xa24f7b(0x34a)](_0xa24f7b(0x1cc))[_0xa24f7b(0x338)]()||[];return _0x4e3ca4[_0xa24f7b(0x1b4)](_0xc91418=>{const _0x15b4c4=_0xa24f7b;let _0x2d4201=getBotAttributes(_0xc91418[_0x15b4c4(0x1cc)]);_0xc91418[_0x15b4c4(0x16b)]=_0x2d4201[_0x15b4c4(0x16b)];}),_0x4e3ca4;}function getBotExchanges(){const _0x2ff7a8=_0x25f60e;let _0x45f059=[];const _0x1bd0a6=dbConfig['get']('bots')[_0x2ff7a8(0x34a)](_0x2ff7a8(0x1cc))['value']()||[];_0x1bd0a6[_0x2ff7a8(0x1b4)](_0x312714=>{const _0x8a318d=_0x2ff7a8;if(_0x312714[_0x8a318d(0x1d3)]==_0x8a318d(0x2c5)){const _0x489a71=configpath+_0x8a318d(0x1b8)+_0x312714[_0x8a318d(0x1cc)]+_0x8a318d(0x2d1),_0x1dadb4=fs['existsSync'](_0x489a71);let _0x206cce;if(_0x1dadb4){const _0x4b14ca=fs[_0x8a318d(0x28a)](_0x489a71);try{const _0x4c5e6d=JSON['parse'](_0x4b14ca);_0x206cce=_0x4c5e6d?_0x4c5e6d[_0x8a318d(0x319)][0x0][_0x8a318d(0x28d)]:null;}catch(_0xf9984f){}}if(_0x206cce)_0x45f059[_0x8a318d(0x19f)](_0x206cce);}});const _0x46f2f9=[...new Set(_0x45f059)][_0x2ff7a8(0x26c)]();return _0x46f2f9;}async function initUser(){const _0x48695f=_0x25f60e;if(!settings['userid']){const _0x41b8d3=uuidRandom();mixpanel[_0x48695f(0x24a)](_0x41b8d3),updateSetting(_0x48695f(0x22d),_0x41b8d3);}}async function initSecure(){const _0x2628a1=_0x25f60e;let _0x29f01d=getSecure();if(!_0x29f01d[_0x2628a1(0x31e)](_0x2628a1(0x328))){let _0x333060=await generateKeys();_0x29f01d['publicKey']=_0x333060['publicKey'],_0x29f01d[_0x2628a1(0x32a)]=_0x333060['privateKey'],_0x29f01d[_0x2628a1(0x328)]=crypto[_0x2628a1(0x176)](0x20)[_0x2628a1(0x2bf)]('hex');;storeSecure(_0x29f01d);}}function getSettings(){const _0x17fe17=_0x25f60e;return dbSettings[_0x17fe17(0x2cf)](_0x17fe17(0x2da))[_0x17fe17(0x338)]()||{};}function getSecure(){const _0x205645=_0x25f60e;return dbSecure[_0x205645(0x2cf)](_0x205645(0x155))[_0x205645(0x338)]()||{};}function getBlacklist(){const _0x5ec686=_0x25f60e;return dbSecure['get'](_0x5ec686(0x251))['value']()||[];}function broadcastToBots(_0x2bdf0b,_0x4ee727){const _0x3b35b4=_0x25f60e;config[_0x3b35b4(0x1b4)](_0x30fc48=>{const _0xdcf1ae=_0x3b35b4;if(_0x30fc48[_0xdcf1ae(0x1d3)]==_0xdcf1ae(0x2c5)&&_0x30fc48['live']==_0xdcf1ae(0x294)||_0x30fc48[_0xdcf1ae(0x1d3)]==_0xdcf1ae(0x21e)&&_0x30fc48[_0xdcf1ae(0x244)]=='running'){if(pid[_0x30fc48[_0xdcf1ae(0x1cc)]])pid[_0x30fc48[_0xdcf1ae(0x1cc)]]['send']({[_0x2bdf0b]:_0x4ee727});}});}function storeSettings(_0x34be70,_0x3d6d32=![]){const _0x1d5148=_0x25f60e;_0x34be70={...settings,..._0x34be70};if(_0x3d6d32&&_0x34be70[_0x1d5148(0x1d5)]!='************'&&_0x34be70[_0x1d5148(0x1d5)]!=_0x1d5148(0x1ce)&&_0x34be70[_0x1d5148(0x1d5)]!=''){const _0x32cb21=crypt[_0x1d5148(0x248)](secure[_0x1d5148(0x32a)],_0x34be70[_0x1d5148(0x1d5)])[_0x1d5148(0x149)][_0x1d5148(0x288)]('@')[0x0],_0x419a4d=bcrypt[_0x1d5148(0x15f)](_0x32cb21,saltRounds);_0x34be70={..._0x34be70,'bbPassword':_0x419a4d};}if(_0x3d6d32&&_0x34be70['telegramToken']!=_0x1d5148(0x2b3)&&_0x34be70[_0x1d5148(0x14a)]!='***'&&_0x34be70[_0x1d5148(0x14a)]!=''){const _0x32f1dc=crypt[_0x1d5148(0x248)](secure[_0x1d5148(0x32a)],_0x34be70[_0x1d5148(0x14a)])[_0x1d5148(0x149)]['split']('@')[0x0];_0x34be70={..._0x34be70,'telegramToken':_0x32f1dc};}const _0x5952f3=_0x34be70['telegramToken']!=_0x1d5148(0x2b3)&&_0x34be70['telegramToken']!=settings[_0x1d5148(0x14a)]||_0x34be70[_0x1d5148(0x164)]!=settings['telegramUsername'],_0xaab915=_0x34be70[_0x1d5148(0x14a)]==''||_0x34be70[_0x1d5148(0x164)]=='';_0x5952f3&&(_0x34be70[_0x1d5148(0x1f3)]=null,_0x34be70[_0x1d5148(0x22f)]=_0x1d5148(0x231));for(const [_0x2b208f,_0x444626]of Object['entries'](_0x34be70)){if(_0x2b208f=='telegramToken'&&_0x444626=='************'){_0x34be70['telegramToken']=settings['telegramToken'];continue;};if(_0x2b208f==_0x1d5148(0x1d5)&&_0x444626==_0x1d5148(0x2b3)){_0x34be70[_0x1d5148(0x1d5)]=settings[_0x1d5148(0x1d5)];continue;};dbSettings[_0x1d5148(0x1e0)](_0x1d5148(0x1fe)+_0x2b208f,_0x444626)[_0x1d5148(0x217)]();}settings=_0x34be70,io['to'](_0x1d5148(0x1c1))[_0x1d5148(0x340)](_0x1d5148(0x2da),cleanSettings()),broadcastToBots(_0x1d5148(0x24d),settings[_0x1d5148(0x24d)]),broadcastToBots(_0x1d5148(0x2db),settings['onepagemode']);if(_0x5952f3&&!_0xaab915)initTelegram();if(_0x5952f3&&_0xaab915)disableTelegram();getAllClients()[_0x1d5148(0x1b4)](_0x2ee3ac=>{const _0x697a6a=_0x1d5148;getSocket(_0x2ee3ac['id'])[_0x697a6a(0x340)](_0x697a6a(0x1d3),{'access':{'allow':![],'reason':_0x697a6a(0x32d),'token':null}});});}function updateSetting(_0x2da885,_0x361f80){const _0x3ae3e2=_0x25f60e;dbSettings[_0x3ae3e2(0x1e0)](_0x3ae3e2(0x1fe)+_0x2da885,_0x361f80)[_0x3ae3e2(0x217)](),settings=getSettings(),io['to'](_0x3ae3e2(0x1c1))[_0x3ae3e2(0x340)]('settings',cleanSettings());}function storeSecure(_0x4c1256){const _0x2de41c=_0x25f60e;dbSecure[_0x2de41c(0x2cf)](_0x2de41c(0x155))[_0x2de41c(0x19f)](_0x4c1256)[_0x2de41c(0x217)](),secure=_0x4c1256;}function addBlacklist(_0x26b6c7){const _0x4b7b63=_0x25f60e;cleanBlacklist();let _0x16ff96;devices[_0x26b6c7][_0x4b7b63(0x1c2)]?_0x16ff96=Math[_0x4b7b63(0x1f8)](devices[_0x26b6c7][_0x4b7b63(0x1c2)][_0x4b7b63(0x1ec)],loginExpiry):_0x16ff96=loginExpiry,dbSecure[_0x4b7b63(0x2cf)](_0x4b7b63(0x251))['push']({'expiry':new Date()[_0x4b7b63(0x156)]()+_0x16ff96*0x3c*0x3e8,'token':devices[_0x26b6c7]['access'][_0x4b7b63(0x270)]})[_0x4b7b63(0x217)](),blacklist=dbSecure[_0x4b7b63(0x2cf)](_0x4b7b63(0x251))[_0x4b7b63(0x338)]();}function cleanBlacklist(){const _0x32ef1a=_0x25f60e;let _0x190c87=dbSecure[_0x32ef1a(0x2cf)](_0x32ef1a(0x251))[_0x32ef1a(0x227)]()[_0x32ef1a(0x338)](),_0x3c6c5c=new Date()['getTime']();_0x190c87[_0x32ef1a(0x1b4)](_0xe9d042=>{const _0x44751d=_0x32ef1a;_0xe9d042[_0x44751d(0x1ec)]<_0x3c6c5c&&dbSecure[_0x44751d(0x2cf)](_0x44751d(0x251))['remove']({'expiry':_0xe9d042[_0x44751d(0x1ec)]})[_0x44751d(0x217)]();});}function initStates(){const _0x1a7181=_0x25f60e;let _0x3e286a=getConfiguration();_0x3e286a[_0x1a7181(0x1b4)](_0x54db0b=>{const _0x401cfc=_0x1a7181;_0x54db0b['live']=_0x401cfc(0x14f);}),storeConfiguration(_0x3e286a);}function onKeys(){const _0x5d0199=new RSA();return new Promise(_0x257b0e=>{const _0x57503b=_0x353c;_0x5d0199[_0x57503b(0x26b)]()[_0x57503b(0x306)](_0x259c3a=>{_0x257b0e(_0x259c3a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2a9d12=_0x25f60e;let _0x2b0438=getSettings(),_0x1c2c66=![];!_0x2b0438[_0x2a9d12(0x31e)]('lastmsgtelegram')&&(_0x2b0438[_0x2a9d12(0x2f3)]=0x0,_0x1c2c66=!![]);!_0x2b0438[_0x2a9d12(0x31e)]('lastmsgemitted')&&(_0x2b0438[_0x2a9d12(0x2aa)]=0x0,_0x1c2c66=!![]);!_0x2b0438['hasOwnProperty'](_0x2a9d12(0x179))&&(_0x2b0438['latestversion']=_0x2a9d12(0x2d0),_0x1c2c66=!![]);!_0x2b0438['hasOwnProperty'](_0x2a9d12(0x2db))&&(_0x2b0438['onepagemode']=![],_0x1c2c66=!![]);if(_0x1c2c66)storeSettings(_0x2b0438);try{fs[_0x2a9d12(0x262)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x17748c=>{const _0x378096=_0x2a9d12;if(!_0x17748c['isDirectory']()){if(!_0x17748c[_0x378096(0x247)]['startsWith'](_0x378096(0x1c6)))fs[_0x378096(0x2df)](configbackuppath+_0x17748c['name']);}else fs[_0x378096(0x337)](configbackuppath+_0x17748c[_0x378096(0x247)],{'recursive':!![]});});}catch(_0x4b5a59){logger[_0x2a9d12(0x2ec)]('Error\x20removing\x20old\x20backup\x20files:',_0x4b5a59);}}function storeConfiguration(_0x15fded){const _0x5c6187=_0x25f60e;dbConfig[_0x5c6187(0x2cf)](_0x5c6187(0x21c))[_0x5c6187(0x23a)]()[_0x5c6187(0x217)](),dbConfig[_0x5c6187(0x2cf)](_0x5c6187(0x21c))[_0x5c6187(0x19f)](..._0x15fded)['write'](),config=_0x15fded;}async function resetPassword(){const _0x20fa7f=_0x25f60e;if(tgBot&&settings[_0x20fa7f(0x1f3)]){const _0x4ca1c7=Markup[_0x20fa7f(0x309)]([Markup['button'][_0x20fa7f(0x224)](_0x20fa7f(0x280),_0x20fa7f(0x19c)),Markup[_0x20fa7f(0x219)][_0x20fa7f(0x224)]('no',_0x20fa7f(0x2eb))]);await sendTelegram(settings[_0x20fa7f(0x1f3)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0x4ca1c7),tgBot[_0x20fa7f(0x2f4)](/resetpw_(.+)/,async _0x266c36=>{const _0x1a8d14=_0x20fa7f,_0x46fafe=_0x266c36[_0x1a8d14(0x332)][0x1];_0x266c36[_0x1a8d14(0x266)]();if(_0x46fafe!='no'){const _0x446a1c=0xf,_0x2fdf78=_0x1a8d14(0x242),_0x1c83c7=Array[_0x1a8d14(0x17b)](crypto['randomFillSync'](new Uint32Array(_0x446a1c)))[_0x1a8d14(0x2ab)](_0xb42658=>_0x2fdf78[_0xb42658%_0x2fdf78[_0x1a8d14(0x1d9)]])['join'](''),_0x358802=bcrypt[_0x1a8d14(0x15f)](_0x1c83c7,saltRounds);storeSettings({'bbPassword':_0x358802}),await sendTelegram(_0x266c36[_0x1a8d14(0x320)]['id'],_0x1a8d14(0x1a4)+_0x1c83c7,{'parse_mode':_0x1a8d14(0x2c6)});}else await sendTelegram(_0x266c36[_0x1a8d14(0x320)]['id'],_0x1a8d14(0x1a1));});}}async function confirmRestore(_0x2de5f0,_0x4f17e5){const _0x563ba7=_0x25f60e;io['to'](_0x563ba7(0x1c1))[_0x563ba7(0x340)]('notification',_0x563ba7(0x152),_0x563ba7(0x31d));if(tgBot&&settings[_0x563ba7(0x1f3)]){const _0x385965=uuidRandom();tmpStorage[_0x385965]={'path':_0x2de5f0,'filename':_0x4f17e5};const _0x19bcb9=Markup[_0x563ba7(0x309)]([Markup['button'][_0x563ba7(0x224)](_0x563ba7(0x280),_0x563ba7(0x341)+_0x385965),Markup[_0x563ba7(0x219)][_0x563ba7(0x224)]('no','restore_no_'+_0x385965)]);await sendTelegram(settings['telegramChatId'],_0x563ba7(0x235),_0x19bcb9),tgBot['action'](/restore_(.+)_(.+)/,async _0x119369=>{const _0x18125c=_0x563ba7,_0x5c117e=_0x119369[_0x18125c(0x332)][0x1],_0x24575c=_0x119369[_0x18125c(0x332)][0x2],{path:_0x55f6e9,filename:_0x46a20a}=tmpStorage[_0x24575c];delete tmpStorage[_0x24575c],_0x119369['editMessageReplyMarkup'](),_0x5c117e==_0x18125c(0x280)?(logger[_0x18125c(0x2ec)](_0x18125c(0x344)),await sendTelegram(_0x119369[_0x18125c(0x320)]['id'],_0x18125c(0x222),{'parse_mode':_0x18125c(0x2c6)}),unzipFile(_0x55f6e9,_0x46a20a)):(logger['debug'](_0x18125c(0x1f2)),await sendTelegram(_0x119369[_0x18125c(0x320)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0xf01716=_0x25f60e,_0x1b79f0=new Date();return _0x1b79f0[_0xf01716(0x216)]()+'/'+(_0x1b79f0[_0xf01716(0x2cc)]()+0x1)[_0xf01716(0x2bf)]()[_0xf01716(0x174)](0x2,'0')+'/'+_0x1b79f0['getDate']()[_0xf01716(0x2bf)]()['padStart'](0x2,'0')+'\x20'+_0x1b79f0['getHours']()['toString']()[_0xf01716(0x174)](0x2,'0')+':'+_0x1b79f0[_0xf01716(0x168)]()[_0xf01716(0x2bf)]()[_0xf01716(0x174)](0x2,'0')+':'+_0x1b79f0[_0xf01716(0x21f)]()[_0xf01716(0x2bf)]()[_0xf01716(0x174)](0x2,'0');}function getTimeStamp(){const _0x1e8d6a=_0x25f60e,_0x1c1d59=shiftedTime();return _0x1c1d59[_0x1e8d6a(0x216)]()+'/'+(_0x1c1d59[_0x1e8d6a(0x2cc)]()+0x1)[_0x1e8d6a(0x2bf)]()[_0x1e8d6a(0x174)](0x2,'0')+'/'+_0x1c1d59['getDate']()[_0x1e8d6a(0x2bf)]()[_0x1e8d6a(0x174)](0x2,'0')+'\x20'+_0x1c1d59[_0x1e8d6a(0x2cb)]()['toString']()[_0x1e8d6a(0x174)](0x2,'0')+':'+_0x1c1d59['getMinutes']()[_0x1e8d6a(0x2bf)]()['padStart'](0x2,'0')+':'+_0x1c1d59[_0x1e8d6a(0x21f)]()[_0x1e8d6a(0x2bf)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x1c970c=_0x25f60e,_0x4144e9=shiftedTime();return _0x4144e9[_0x1c970c(0x216)]()+(_0x4144e9[_0x1c970c(0x2cc)]()+0x1)[_0x1c970c(0x2bf)]()['padStart'](0x2,'0')+_0x4144e9[_0x1c970c(0x1fb)]()[_0x1c970c(0x2bf)]()[_0x1c970c(0x174)](0x2,'0')+'-'+_0x4144e9[_0x1c970c(0x2cb)]()['toString']()[_0x1c970c(0x174)](0x2,'0')+_0x4144e9[_0x1c970c(0x168)]()[_0x1c970c(0x2bf)]()[_0x1c970c(0x174)](0x2,'0')+_0x4144e9[_0x1c970c(0x21f)]()[_0x1c970c(0x2bf)]()[_0x1c970c(0x174)](0x2,'0');}function shiftedTime(){const _0x14c5ff=_0x25f60e,_0xccd3a0=new Date();let _0x1aa088=_0xccd3a0;if(settings['timeshift']&&settings[_0x14c5ff(0x24d)]!==0x0)_0x1aa088=fns[_0x14c5ff(0x1f9)](_0xccd3a0,{'hours':settings['timeshift']});return _0x1aa088;}function startScheduler(){const _0x1165a4=_0x25f60e,_0x37240b=new Date()[_0x1165a4(0x23f)](),_0x556754=shiftedTime()['getHours']();_0x556754==0x4&&backupConfigFiles();_0x556754==0x0&&rotateLogFiles();_0x37240b%0x6==0x0&&triggerAnalytics();_0x37240b%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x61de7f){const _0x314752=_0x25f60e;logger[_0x314752(0x2ec)](_0x314752(0x196)+_0x61de7f);const _0x1c0dfc=getBotsWithMode();_0x1c0dfc['length']>0x0?confirmRestore(configbackuppath,_0x61de7f):unzipFile(configbackuppath,_0x61de7f);}async function getBackupFiles(_0x28c77a=null){const _0x45cf4e=_0x25f60e;let _0x22b725=[],_0x4f5f51=fs[_0x45cf4e(0x262)](configbackuppath,{'withFileTypes':!![]});_0x4f5f51[_0x45cf4e(0x26c)]((_0x4145d9,_0xef6d11)=>_0x4145d9[_0x45cf4e(0x247)]<_0xef6d11[_0x45cf4e(0x247)]?0x1:_0xef6d11[_0x45cf4e(0x247)]<_0x4145d9[_0x45cf4e(0x247)]?-0x1:0x0),_0x4f5f51[_0x45cf4e(0x1b4)](_0x4e3080=>{const _0x287c78=_0x45cf4e;if(!_0x4e3080[_0x287c78(0x2af)]()&&_0x4e3080[_0x287c78(0x247)]['startsWith']('backup-full@')&&_0x4e3080['name'][_0x287c78(0x1ae)](_0x287c78(0x1ff))){const _0xb11993=formatDate(fs['statSync'](configbackuppath+_0x4e3080[_0x287c78(0x247)])[_0x287c78(0x2ba)]);_0x22b725[_0x287c78(0x19f)]({'name':_0x4e3080[_0x287c78(0x247)],'mtime':_0xb11993});}});if(_0x28c77a)io['to'](_0x28c77a)[_0x45cf4e(0x340)](_0x45cf4e(0x194),_0x22b725);else return _0x22b725;}async function backupConfigFiles(){const _0x53f79a=_0x25f60e;await zipFiles(_0x53f79a(0x240));const _0x2672ba=getCleanTimeStamp();fs[_0x53f79a(0x202)](zippath+'backup-full.zip',configbackuppath+(_0x53f79a(0x1c6)+_0x2672ba+'.zip'));let _0x1de718=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x1de718[_0x53f79a(0x26c)]((_0x210584,_0x58711c)=>_0x210584[_0x53f79a(0x247)]<_0x58711c['name']?0x1:_0x58711c[_0x53f79a(0x247)]<_0x210584[_0x53f79a(0x247)]?-0x1:0x0),_0x1de718[_0x53f79a(0x1d9)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x1de718[_0x1de718[_0x53f79a(0x1d9)]-0x1][_0x53f79a(0x247)]);}function rotateLogFiles(){const _0x22cab4=_0x25f60e,_0x412706=fs[_0x22cab4(0x254)](logspath+'output-000.log'),_0x516f33=_0x412706[_0x22cab4(0x24f)]/0x400;if(_0x516f33>0x64){let _0x5a9c76=fs[_0x22cab4(0x262)](logspath,{'withFileTypes':!![]});_0x5a9c76[_0x22cab4(0x26c)]((_0x264998,_0x1e66df)=>_0x264998[_0x22cab4(0x247)]<_0x1e66df[_0x22cab4(0x247)]?0x1:_0x1e66df['name']<_0x264998[_0x22cab4(0x247)]?-0x1:0x0),_0x5a9c76[_0x22cab4(0x1b4)](_0x25bd6c=>{const _0x4a0083=_0x22cab4;if(_0x25bd6c[_0x4a0083(0x247)]==_0x4a0083(0x17c))fs[_0x4a0083(0x202)](logspath+_0x25bd6c[_0x4a0083(0x247)],logspath+_0x4a0083(0x245));if(_0x25bd6c['name']=='output-001.log')fs[_0x4a0083(0x202)](logspath+_0x25bd6c[_0x4a0083(0x247)],logspath+_0x4a0083(0x17c));_0x25bd6c[_0x4a0083(0x247)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x25bd6c[_0x4a0083(0x247)],logspath+_0x4a0083(0x2ee)),fs[_0x4a0083(0x221)](logspath+_0x25bd6c['name'],''));});}}async function zipFiles(_0x53acf6){const _0x2a3b66=_0x25f60e;let _0x87882f;if(_0x53acf6==_0x2a3b66(0x1b3))_0x87882f=logspath;if(_0x53acf6==_0x2a3b66(0x259))_0x87882f=configpath;if(_0x53acf6==_0x2a3b66(0x240))_0x87882f=configpath;let _0x24d642=fs[_0x2a3b66(0x262)](_0x87882f,{'withFileTypes':!![]});const _0xdcd11f=new require(_0x2a3b66(0x182))();_0x24d642[_0x2a3b66(0x1b4)](_0x164167=>{const _0x49bfb5=_0x2a3b66;if(!_0x164167[_0x49bfb5(0x2af)]()){let _0x3b9c32=fs[_0x49bfb5(0x28a)](_0x87882f+_0x164167[_0x49bfb5(0x247)]);if(_0x53acf6==_0x49bfb5(0x259)){const _0x59b945=/^bot-[0-9]{3}-config.json$/,_0x546661=_0x59b945[_0x49bfb5(0x31c)](_0x164167['name']);if(_0x546661){const _0x420e91=JSON[_0x49bfb5(0x2e7)](_0x3b9c32);if(_0x420e91[_0x49bfb5(0x319)][0x0]){_0x420e91['bot'][0x0][_0x49bfb5(0x1de)]='***',_0x420e91[_0x49bfb5(0x319)][0x0][_0x49bfb5(0x16d)]=_0x49bfb5(0x1ce);if(_0x420e91[_0x49bfb5(0x319)][0x0][_0x49bfb5(0x252)])_0x420e91['bot'][0x0]['apiPassword']='***';}_0x3b9c32=JSON['stringify'](_0x420e91,null,0x2);}if(_0x164167[_0x49bfb5(0x247)]==_0x49bfb5(0x34d)){const _0x3a6bfe=JSON[_0x49bfb5(0x2e7)](_0x3b9c32);if(_0x3a6bfe['settings'][_0x49bfb5(0x2d4)])_0x3a6bfe[_0x49bfb5(0x2da)][_0x49bfb5(0x2d4)]=![];if(_0x3a6bfe[_0x49bfb5(0x2da)]['bbPassword'])_0x3a6bfe['settings']['bbPassword']='***';if(_0x3a6bfe[_0x49bfb5(0x2da)][_0x49bfb5(0x14a)])_0x3a6bfe[_0x49bfb5(0x2da)][_0x49bfb5(0x14a)]='***';if(_0x3a6bfe[_0x49bfb5(0x2da)][_0x49bfb5(0x1f3)])_0x3a6bfe['settings']['telegramChatId']=null;_0x3b9c32=JSON[_0x49bfb5(0x207)](_0x3a6bfe,null,0x2);}if(_0x164167['name']!=_0x49bfb5(0x33d))_0xdcd11f[_0x49bfb5(0x331)](_0x164167[_0x49bfb5(0x247)],_0x3b9c32);}else _0xdcd11f[_0x49bfb5(0x331)](_0x164167[_0x49bfb5(0x247)],_0x3b9c32);}});const _0x3870f2=_0xdcd11f[_0x2a3b66(0x261)]({'base64':![],'compression':_0x2a3b66(0x321)});fs[_0x2a3b66(0x221)](zippath+(_0x53acf6+_0x2a3b66(0x1ff)),_0x3870f2,_0x2a3b66(0x2f2));}async function unzipFile(_0x3ab5f6,_0x2c95ce){const _0x147f7a=_0x25f60e;fs[_0x147f7a(0x262)](configpath,{'withFileTypes':!![]})[_0x147f7a(0x1b4)](_0x5e2337=>{if(!_0x5e2337['isDirectory']())fs['rmSync'](configpath+_0x5e2337['name']);});const _0x48f01a=fs[_0x147f7a(0x28a)](_0x3ab5f6+_0x2c95ce,'binary'),_0xd9716f=new require(_0x147f7a(0x182))(_0x48f01a,{'base64':![],'checkCRC32':!![]});Object[_0x147f7a(0x25e)](_0xd9716f[_0x147f7a(0x2d5)])[_0x147f7a(0x1b4)](_0x59b9cc=>{const _0x23b7e7=_0x147f7a,_0x275c5b=_0xd9716f['files'][_0x59b9cc];fs[_0x23b7e7(0x221)](configpath+_0x275c5b[_0x23b7e7(0x247)],_0x275c5b['_data']);}),fs[_0x147f7a(0x262)](temppath,{'withFileTypes':!![]})[_0x147f7a(0x1b4)](_0x35b2e1=>{const _0x2d1173=_0x147f7a;if(!_0x35b2e1[_0x2d1173(0x2af)]())fs[_0x2d1173(0x337)](temppath+_0x35b2e1['name']);}),logger[_0x147f7a(0x2ec)](_0x147f7a(0x188)),process[_0x147f7a(0x173)]({'restore':!![]},_0x84b6ce=>{});}async function getPublicIp(){const _0xf9138e=_0x25f60e;try{const _0x2af87f=await axios[_0xf9138e(0x2cf)](_0xf9138e(0x212));publicip=_0x2af87f[_0xf9138e(0x1cf)]['ip'];}catch(_0x3fd2d0){}}function _0x353c(_0x205e2f,_0x1804d2){const _0x489eb=_0x28d8();return _0x353c=function(_0x17d9bd,_0x1ff014){_0x17d9bd=_0x17d9bd-0x148;let _0x28d8c0=_0x489eb[_0x17d9bd];return _0x28d8c0;},_0x353c(_0x205e2f,_0x1804d2);}async function triggerAnalytics(){const _0x26ee74=_0x25f60e;if(!publicip)await getPublicIp();const _0x35d7c3=getBotsWithMode();let _0x4e9e01=0x0;_0x35d7c3[_0x26ee74(0x1b4)](_0x1df70a=>{const _0x5a69c3=_0x26ee74;if(_0x1df70a[_0x5a69c3(0x1d3)]==='enabled')_0x4e9e01++;});const _0x3e85f3=getBotExchanges();mixpanel[_0x26ee74(0x2a3)](_0x26ee74(0x1bb),{'distinct_id':settings[_0x26ee74(0x22d)],'ip':publicip,'version':serverversion,'numbots':_0x35d7c3[_0x26ee74(0x1d9)],'numbotsenabled':_0x4e9e01,'exchanges':_0x3e85f3,'environment':environment});}async function getMessages(){const _0x30c037=_0x25f60e,_0x5214ad=_0x30c037(0x28c),_0x3b8c6f=new GraphQLClient(_0x5214ad),_0x373b99={'authorization':_0x30c037(0x250)},_0x374f45=serverversion['split']('.'),_0x50868b=_0x374f45[0x0]+'.'+_0x374f45[0x1],_0x285bb0=Math['min'](settings[_0x30c037(0x2f3)],settings[_0x30c037(0x2aa)]),_0x2177f8={'last':parseInt(_0x285bb0),'bbm':_0x50868b},_0x450e94=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1a481a;try{_0x1a481a=await _0x3b8c6f[_0x30c037(0x257)](_0x450e94,_0x2177f8,_0x373b99);}catch(_0x2e266d){}if(_0x1a481a&&_0x1a481a[_0x30c037(0x1d1)]){let _0x42bcd3=settings[_0x30c037(0x2f3)];newMessages=[];for(const _0xac19d0 of _0x1a481a[_0x30c037(0x1d1)]){newMessages[_0x30c037(0x19f)](_0xac19d0);let _0x386d8c=![];_0xac19d0[_0x30c037(0x199)]&&(updateSetting(_0x30c037(0x179),_0xac19d0['bbvNew']),_0x386d8c=isNewerVersion(serverversion,_0xac19d0[_0x30c037(0x199)])||serverversion==_0xac19d0[_0x30c037(0x199)]);if(!_0x386d8c&&_0xac19d0[_0x30c037(0x2fd)]>_0x42bcd3){if(_0xac19d0[_0x30c037(0x292)]===_0x30c037(0x18e)||serverversion[_0x30c037(0x15d)](_0xac19d0[_0x30c037(0x292)])){let _0x2624a4=''+_0xac19d0[_0x30c037(0x1c8)]+'\x0a\x0a'+_0xac19d0[_0x30c037(0x149)];const _0x2bbd3e=await sendTelegramMsg(toTelegramMarkdown(_0x2624a4),_0x30c037(0x2b4));if(_0x2bbd3e)_0x42bcd3=_0xac19d0[_0x30c037(0x2fd)];}}}updateAvailable=isNewerVersion(settings[_0x30c037(0x179)],serverversion),updateSetting(_0x30c037(0x2f3),_0x42bcd3),emitMessages();}}function emitMessages(){const _0x2ef6f2=_0x25f60e,_0x496383=settings[_0x2ef6f2(0x2aa)];let _0x44128a=[];newMessages[_0x2ef6f2(0x1b4)](_0x2453bc=>{const _0x44bc09=_0x2ef6f2;_0x2453bc[_0x44bc09(0x2fd)]>_0x496383&&_0x44128a[_0x44bc09(0x19f)](_0x2453bc);}),_0x44128a[_0x2ef6f2(0x1d9)]>0x0&&getAllClients()[_0x2ef6f2(0x1b4)](_0x1d0f3b=>{const _0x359608=_0x2ef6f2;getSocket(_0x1d0f3b['id'])[_0x359608(0x340)](_0x359608(0x149),_0x44128a);});}function confirmMessage(_0x245f3d){const _0x1427b1=_0x25f60e;updateSetting(_0x1427b1(0x2aa),Number(_0x245f3d));}function isNewerVersion(_0x153fc2,_0x17787f){const _0x2e72df=_0x25f60e,_0x18a278=_0x17787f[_0x2e72df(0x288)]('.'),_0x32e158=_0x153fc2[_0x2e72df(0x288)]('.');for(var _0x87a6a2=0x0;_0x87a6a2<_0x32e158[_0x2e72df(0x1d9)];_0x87a6a2++){const _0x346f93=~~_0x32e158[_0x87a6a2],_0x1c53fe=~~_0x18a278[_0x87a6a2];if(_0x346f93>_0x1c53fe)return!![];if(_0x346f93<_0x1c53fe)return![];}return![];}function toTelegramMarkdown(_0x3749a3){const _0x32a742=_0x25f60e,_0x217422=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4451b2=/\*{2}(.+?)\*{2}/gim;return _0x3749a3=_0x3749a3[_0x32a742(0x2c9)](_0x217422,_0x32a742(0x208))[_0x32a742(0x2c9)](_0x4451b2,'*$1*'),_0x3749a3;}async function validateConfigFile(){const _0x31e516=_0x25f60e,_0x24ed57=dbConfig['get']('bots')[_0x31e516(0x34a)](_0x31e516(0x1cc))[_0x31e516(0x338)]()||[];if(_0x24ed57[_0x31e516(0x1d9)]==0x0){let _0x59e346=0x0,_0x4ef940=[];const _0x3ae37f=/^bot-([0-9]{3})-config.json$/,_0x3b14c8=fs[_0x31e516(0x262)](configpath);_0x3b14c8['forEach'](_0x42cf47=>{const _0x5605b2=_0x31e516,_0x322c86=_0x3ae37f[_0x5605b2(0x234)](_0x42cf47);if(_0x322c86){const _0x4e031c=_0x322c86[0x1];let _0x251625=getBotAttributes(_0x4e031c);_0x4ef940[_0x5605b2(0x19f)]({'botID':_0x4e031c,'botname':_0x251625[_0x5605b2(0x1a2)],'status':_0x5605b2(0x268),'live':'stopped'}),_0x59e346++;}}),_0x59e346!=0x0&&(dbConfig['get'](_0x31e516(0x21c))['assign'](_0x4ef940)[_0x31e516(0x217)](),config=_0x4ef940,restoredConfigFile=_0x59e346);}}async function restoreConfigNotify(_0xe799af){const _0x111251=_0x25f60e;let _0x3c2b42;if(restoredConfigFile==0x1)_0x3c2b42='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x3c2b42=_0x111251(0x181);if(_0xe799af)io['to'](_0x111251(0x1c1))[_0x111251(0x340)](_0x111251(0x277),_0x3c2b42);else{logger[_0x111251(0x1cb)]('-----------------------------------------------------------------------------------'),logger[_0x111251(0x1cb)](_0x3c2b42),logger[_0x111251(0x1cb)]('-----------------------------------------------------------------------------------'),logger[_0x111251(0x1cb)]('');if(tgBot&&settings[_0x111251(0x1f3)]&&settings[_0x111251(0x22f)]!='orders')await sendTelegram(settings[_0x111251(0x1f3)],'Bot\x20Mgr\x20>\x20'+_0x3c2b42);}}function validateCredentials(_0x46709e,_0x3ff288){const _0x11de47=_0x25f60e;if(_0x46709e[_0x11de47(0x343)]==settings[_0x11de47(0x2f5)]&&bcrypt[_0x11de47(0x16a)](_0x46709e[_0x11de47(0x260)],settings['bbPassword'])){if(settings[_0x11de47(0x163)])return{'allow':![],'reason':_0x11de47(0x1b2),'token':null};else{const _0x150807=generateLoginToken(_0x3ff288);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x150807};}}else return{'allow':![],'reason':_0x11de47(0x316),'token':null};}function refreshToken(_0x567870){const _0x3c5e94=_0x25f60e,_0x2f1061=generateLoginToken(_0x567870);return{'allow':!![],'reason':_0x3c5e94(0x28f),'token':_0x2f1061};}function validateAccess(_0x5a6d2d,_0x5bca78,_0xc7f7ea){const _0x4b3d19=_0x25f60e,_0x57b38d=_0xc7f7ea?_0xc7f7ea:devices[_0x5bca78]['ip'];let _0x15eb2e;const _0x3cd94e=_0x12cafc=>{const _0x3263eb=_0x353c;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x5bca78)){const _0x44482a=generateLoginToken(_0x5bca78);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x44482a};}else return{'allow':![],'reason':_0x3263eb(0x15a),'token':null};}else return _0x15eb2e=validToken(_0x12cafc,_0x5bca78),_0x15eb2e['hasOwnProperty'](_0x3263eb(0x31d))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x12cafc}:{'allow':![],'reason':_0x3263eb(0x15a),'token':null};}else return{'allow':!![],'reason':_0x3263eb(0x265),'token':null};};if(settings[_0x4b3d19(0x1e5)]){let _0x12fda4=[...settings['whitelist'],_0x4b3d19(0x232),'::ffff:127.0.0.1',_0x4b3d19(0x311)];if(_0x12fda4[_0x4b3d19(0x184)](_0x57b38d))return _0x3cd94e(_0x5a6d2d);else{_0x15eb2e=validToken(_0x5a6d2d,_0x5bca78);if(_0x15eb2e[_0x4b3d19(0x31e)](_0x4b3d19(0x31d)))return _0x3cd94e(_0x5a6d2d);else{if(telegramIpApproved(_0x5bca78)){const _0x1db3c9=generateToken(_0x5bca78);return _0x15eb2e=_0x3cd94e(_0x5a6d2d),_0x15eb2e['allow']?{'allow':!![],'reason':_0x4b3d19(0x2a6),'token':_0x1db3c9}:_0x15eb2e;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x4b3d19(0x239),'token':null}:{'allow':![],'reason':_0x4b3d19(0x302),'token':null};}}}else return _0x3cd94e(_0x5a6d2d);}function timelyDecrypt(_0x76b8f3,_0x19b420=!![]){const _0xf03f30=_0x25f60e;if(_0x76b8f3)try{const _0x255b48=crypt[_0xf03f30(0x248)](secure[_0xf03f30(0x32a)],_0x76b8f3)[_0xf03f30(0x149)],_0xcac70f=_0x255b48['split']('@')[0x0],_0x1b8835=_0x255b48[_0xf03f30(0x288)]('@')[0x1],_0x534c26=new Date()['getTime']();if(_0x19b420){if(_0x534c26-_0x1b8835<maxSecretAge*0x3e8)return _0xcac70f;else return![];}else return _0xcac70f;}catch(_0x19c6df){return![];}else return![];}const validToken=(_0x451d67,_0x455789)=>{const _0x301234=_0x25f60e,_0x257096=devices[_0x455789]['ip'];if(!_0x451d67)return{'error':_0x301234(0x26a)};for(let _0x35627d of blacklist){if(_0x35627d['token']==_0x451d67)return{'error':_0x301234(0x1ba)};}let _0x4b6bc6;try{_0x4b6bc6=jwt[_0x301234(0x2d9)](_0x451d67,secure[_0x301234(0x328)]+_0x455789);}catch{return{'error':_0x301234(0x1d2)};}if(!_0x4b6bc6[_0x301234(0x31e)](_0x301234(0x2b2))&&!_0x4b6bc6['hasOwnProperty'](_0x301234(0x343))||!_0x4b6bc6[_0x301234(0x31e)](_0x301234(0x345)))return{'error':_0x301234(0x348)};if(!_0x4b6bc6[_0x301234(0x31e)](_0x301234(0x343))&&_0x4b6bc6['hasOwnProperty'](_0x301234(0x2b2))){const {clientip:_0x1b97d1}=_0x4b6bc6;return _0x257096==_0x1b97d1?{'success':_0x301234(0x1a6)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4b6bc6[_0x301234(0x31e)](_0x301234(0x343))&&_0x4b6bc6['hasOwnProperty'](_0x301234(0x2b2))){const {username:_0x38b634,clientip:_0x33f672}=_0x4b6bc6;return settings[_0x301234(0x2f5)]==_0x38b634&&_0x257096==_0x33f672?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x301234(0x2ad)};}}},generateLoginToken=_0x3873d0=>{const _0x3412e1=_0x25f60e;if(_0x3873d0){const _0x147955=devices[_0x3873d0]['ip'];return jwt[_0x3412e1(0x14d)]({'username':settings[_0x3412e1(0x2f5)],'clientip':_0x147955},secure[_0x3412e1(0x328)]+_0x3873d0,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x18ed46=>{const _0x104c11=_0x25f60e;if(_0x18ed46){const _0xb3d649=devices[_0x18ed46]['ip'];return jwt['sign']({'clientip':_0xb3d649},secure['secret']+_0x18ed46,{'expiresIn':devices[_0x18ed46]['telegramIpApproval'][_0x104c11(0x1ec)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x13a6af=>{const _0x2c6b4f=_0x25f60e;let _0x23f627=![];return devices[_0x13a6af][_0x2c6b4f(0x1c2)]&&devices[_0x13a6af][_0x2c6b4f(0x1c2)][_0x2c6b4f(0x1ec)]!=_0x2c6b4f(0x29a)&&(_0x23f627=devices[_0x13a6af][_0x2c6b4f(0x1c2)][_0x2c6b4f(0x2b2)]==devices[_0x13a6af]['ip']&&new Date()['getTime']()-devices[_0x13a6af]['telegramIpApproval'][_0x2c6b4f(0x1bd)]<devices[_0x13a6af][_0x2c6b4f(0x1c2)][_0x2c6b4f(0x1ec)]*0x3c*0x3e8),_0x23f627;},telegram2FaApproved=_0x5e163f=>{const _0xc47ac7=_0x25f60e;let _0x39830f=![];return devices[_0x5e163f][_0xc47ac7(0x275)]&&devices[_0x5e163f][_0xc47ac7(0x275)][_0xc47ac7(0x1ec)]!=_0xc47ac7(0x29a)&&(_0x39830f=devices[_0x5e163f]['telegram2FaApproval'][_0xc47ac7(0x2b2)]==devices[_0x5e163f]['ip']&&new Date()[_0xc47ac7(0x156)]()-devices[_0x5e163f]['telegram2FaApproval'][_0xc47ac7(0x1bd)]<devices[_0x5e163f][_0xc47ac7(0x275)][_0xc47ac7(0x1ec)]*0x3c*0x3e8),_0x39830f;},normalizeIP=_0x46375f=>{const _0x5e337c=_0x25f60e;let _0x208b89=null,_0x5a8f15=null;if(ipaddr['isValid'](_0x46375f)){const _0x318540=ipaddr[_0x5e337c(0x2e7)](_0x46375f);_0x318540[_0x5e337c(0x349)]()===_0x5e337c(0x293)?(_0x318540[_0x5e337c(0x2ca)]()&&(_0x208b89=_0x318540[_0x5e337c(0x2e0)]()['toString']()),_0x5a8f15=_0x318540[_0x5e337c(0x2bf)]()):(_0x208b89=_0x318540[_0x5e337c(0x2bf)](),_0x5a8f15=_0x318540[_0x5e337c(0x18b)]()[_0x5e337c(0x2bf)]());}return{'show':_0x208b89?_0x208b89:_0x5a8f15,'store':_0x5a8f15};};function formatDate(_0x175605){const _0x4c631d=_0x25f60e;return _0x175605[_0x4c631d(0x216)]()+'/'+(_0x175605[_0x4c631d(0x2cc)]()+0x1)[_0x4c631d(0x2bf)]()[_0x4c631d(0x174)](0x2,'0')+'/'+_0x175605[_0x4c631d(0x1fb)]()[_0x4c631d(0x2bf)]()['padStart'](0x2,'0')+'\x20'+_0x175605[_0x4c631d(0x2cb)]()[_0x4c631d(0x2bf)]()[_0x4c631d(0x174)](0x2,'0')+':'+_0x175605[_0x4c631d(0x168)]()[_0x4c631d(0x2bf)]()['padStart'](0x2,'0')+':'+_0x175605['getSeconds']()[_0x4c631d(0x2bf)]()[_0x4c631d(0x174)](0x2,'0');}function sleep(_0x3e5cd4){return new Promise(_0x31ac38=>setTimeout(_0x31ac38,_0x3e5cd4));}