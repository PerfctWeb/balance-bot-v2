const _0x51c697=_0x1885;(function(_0xbabe5e,_0x3f013a){const _0x3639c6=_0x1885,_0x2a4257=_0xbabe5e();while(!![]){try{const _0x50db35=parseInt(_0x3639c6(0x2d0))/0x1+parseInt(_0x3639c6(0x2b9))/0x2+parseInt(_0x3639c6(0x258))/0x3+-parseInt(_0x3639c6(0x364))/0x4*(parseInt(_0x3639c6(0x2ef))/0x5)+parseInt(_0x3639c6(0x233))/0x6*(-parseInt(_0x3639c6(0x294))/0x7)+-parseInt(_0x3639c6(0x2a1))/0x8*(parseInt(_0x3639c6(0x1ba))/0x9)+parseInt(_0x3639c6(0x23f))/0xa*(parseInt(_0x3639c6(0x1c5))/0xb);if(_0x50db35===_0x3f013a)break;else _0x2a4257['push'](_0x2a4257['shift']());}catch(_0x2d7f76){_0x2a4257['push'](_0x2a4257['shift']());}}}(_0xc894,0xf3ed2));const _0x159bbe=function(){let _0x3e19fd=!![];return function(_0x194ec4,_0x4fa280){const _0x40b774=_0x3e19fd?function(){const _0x520a27=_0x1885;if(_0x4fa280){const _0x514110=_0x4fa280[_0x520a27(0x1bb)](_0x194ec4,arguments);return _0x4fa280=null,_0x514110;}}:function(){};return _0x3e19fd=![],_0x40b774;};}(),_0x3bf2f1=_0x159bbe(this,function(){const _0x340c12=_0x1885;return _0x3bf2f1[_0x340c12(0x2f4)]()[_0x340c12(0x21c)](_0x340c12(0x356))['toString']()[_0x340c12(0x28c)](_0x3bf2f1)[_0x340c12(0x21c)](_0x340c12(0x356));});_0x3bf2f1();'use strict';process[_0x51c697(0x1dd)][_0x51c697(0x24a)]=0x1;const childProcess=require(_0x51c697(0x2e0)),fs=require('fs'),fns=require(_0x51c697(0x321)),low=require(_0x51c697(0x1b1)),FileSync=require(_0x51c697(0x1ea)),path=require('path'),crypto=require(_0x51c697(0x263)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require('hybrid-crypto-js')[_0x51c697(0x21a)],bcrypt=require(_0x51c697(0x250)),jwt=require(_0x51c697(0x367)),ipaddr=require(_0x51c697(0x33b)),argv=require(_0x51c697(0x2b5))(process[_0x51c697(0x2ec)]['slice'](0x2))[_0x51c697(0x2ec)],uuidRandom=require(_0x51c697(0x30f)),TelegramBot=require(_0x51c697(0x229)),Mixpanel=require(_0x51c697(0x30e)),axios=require(_0x51c697(0x1fc)),{GraphQLClient,gql}=require(_0x51c697(0x36e)),util=require(_0x51c697(0x316)),fileUpload=require('express-fileupload'),PORT=argv[_0x51c697(0x2c7)]||_0x51c697(0x361),pattern=/^[0-9]{2,4}$/;!pattern[_0x51c697(0x1cd)](PORT)&&(console[_0x51c697(0x255)](_0x51c697(0x334)+PORT+_0x51c697(0x29d)),process['exit'](0x1));const HOST=argv[_0x51c697(0x205)]||null,userID=argv[_0x51c697(0x1f9)]||'',debugging=argv['d']||![];let bbpath=_0x51c697(0x2df),bbpath2='';const botfile='bot.js',configfile=_0x51c697(0x2dd),settingsfile=_0x51c697(0x293),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x51c697(0x1e6)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x51c697(0x211)),configpath=userID?bbpath+_0x51c697(0x2c1)+userID+'/':bbpath+_0x51c697(0x2c1),configbackuppath=configpath+_0x51c697(0x35b),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x51c697(0x377),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x51c697(0x21f),loggerfile=fs[_0x51c697(0x2fc)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x51c697(0x306)+userID+'/':bbpath+_0x51c697(0x306);!fs[_0x51c697(0x1e6)](configpath)&&fs[_0x51c697(0x309)](configpath);!fs[_0x51c697(0x1e6)](configbackuppath)&&fs[_0x51c697(0x309)](configbackuppath);!fs[_0x51c697(0x1e6)](logspath)&&fs[_0x51c697(0x309)](logspath);!fs[_0x51c697(0x1e6)](zippath)&&fs[_0x51c697(0x309)](zippath);!fs[_0x51c697(0x1e6)](temppath)&&fs[_0x51c697(0x309)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x51c697(0x1fe)]({'bots':[]})[_0x51c697(0x315)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x51c697(0x373)}})[_0x51c697(0x315)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);function _0xc894(){const _0x5335e2=['debug','Notifications\x20enabled','config/','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','deleteHistoryAlerts','getPortfolio','port','<b>Balance\x20Bot\x20Status:</b>\x0a','backup','logs','reject','size','Restore\x20process\x20aborted','onText','getTime','371442SYXsoD','delete-bot','https://api.ipify.org?format=json','Password\x20has\x20been\x20reset\x20to:\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','auth','-events.json','output-001.log','all','startsWith','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','auto','cloneDeep','bb-config.json','version','bb/','child_process','lastmsgemitted','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','botname','readdirSync','name','push','-performance.json','connected','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','getDate','argv','sendMessage','backup-full-003.zip','797865WXOxsn','\x20mode','Temporary\x20access\x20rejected','alerts','enabled\x20Bot\x20','toString',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','value','headers','init','-results.json','listen','pidExpireLogin','createWriteStream','error','length','Backup\x20file\x20uploaded','number','download','get-messages','\x20to\x20','HTML','/enable\x20-\x20enable\x20notifications\x0a','temp/','username','file','mkdirSync','starting\x20new\x20bot\x20|\x20Bot\x20','ipc','store-configuration','get-portfolio','mixpanel','uuid-random','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20delete\x20alerts','ipv6','encryptedUuid','allow','write','util','userid','f2aRequired','backup-full-002.zip','express','temporary\x20access\x20not\x20allowed','Failed\x20to\x20download\x20','Starting\x20Balance\x20Bot\x20update','type','Unauthorized\x20attempt\x20to\x20get\x20messages','rmSync','date-fns','started','::1','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','getMonth','RSA-OAEP','127.0.0.1','live','/:bot/performance','store-headless','fork','restart','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','SIGTERM','stopPolling','***','Bot\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','socket','Error:\x20Invalid\x20argument\x20','build2','No\x20authentication\x20token','reload','\x20only\x0a','telegramUsername','binary','ipaddr.js','data','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','uuid','manual','full','map','inherit','match','send','backup-full-001.zip','handshake','split','store','keys','isValid','backup-files','output-000.log','reason','/:bot/portfolio','entries','/status\x20-\x20show\x20bot(s)\x20status\x0a','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','format','temporary\x20token\x20generated','showname','telegramToken','(((.+)+)+)+$','conn','disconnect','exp','login\x20not\x20required','backup/','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','getStartingBalances','stop','decrypt','3000','Unauthorized\x20attempt\x20to\x20get\x20logs','randomFillSync','20KoIHvu','socket.io','restore-backup-file','jsonwebtoken','Allow\x20login\x20from\x20IP\x20address\x20<b>','Alerts','message','accept','\x20(2)','removeListener','graphql-request','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','2FA\x20required','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','telegramIpApproval','0.0.0','1000','messages','cancel-loading','logs/','15\x20min','set','Yes','/update\x20-\x20update\x20Balance\x20Bot\x0a','Server','add','/download/:type','lowdb','exec','<b>Telegram\x20Bot\x20Status:</b>\x0a','padStart','catch','telegram','\x20minutes','once','yes','2385omiuQx','apply','Invalid\x20username\x20or\x20IP\x20address','unlinkSync','success','new','notification','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Restore\x20backup\x20file\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','apiKey','1793BvONQU','Starting\x20Balance\x20Bot\x20','update-bot','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','mtime','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','reinstall','createServer','test','writeFileSync','sendFile','chat','remove','whitelist','publicKey','lastmsgtelegram','build','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','bbvReceive','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Unauthorized\x20attempt\x20to\x20confirm\x20message','/restart\x20-\x20restart\x20bot(s)\x0a','initclient','from','env','function','filter','sort','login\x20required','/:bot','Markdown','Notifications\x20types:\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','existsSync','files','hex','forEach','lowdb/adapters/FileSync','any','Unauthorized\x20attempt\x20to\x20add\x20bot','telegramChatId','User\x20has\x20been\x20validated','Your\x20installation\x20is\x20already\x20up\x20to\x20date','request','get-backup-files','\x20(1)','toIPv4MappedAddress','login','secret','/help\x20-\x20show\x20available\x20commands\x0a','assign','simple','user','isIPv4MappedAddress','password','axios','</b>\x20?','defaults','Unauthorized\x20attempt\x20to\x20delete\x20bot','post','6b67f3d61ee94b8f5c80b4affef4c4d9','backup-full-004.zip','show','kind','host','compareSync','restarting\x20Bot\x20','All','DEFLATE','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','deleted\x20Bot\x20','Password\x20reset\x20rejected','polling_error','index.html','find','kill','clients','stopped','args','/on\x20-\x20start\x20bot(s)\x0a','apiSecret','running','isDirectory','Ok,\x20will\x20send\x20order\x20notifications\x20only','emit','RSA','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','search','output-002.log','bbUsername','zip/','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','event','latestversion','30\x20min','2FA\x20login\x20required','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/:bot/coins','logged\x20out','backup-full-005.zip','node-telegram-bot-api','showConfig','disabled','logout','timeshift','sortBy','mode','telegramEnabled','Login\x20accepted','replace','1020qnAZSZ','static','invalid\x20credentials','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','blacklist','params','tkn','alias','getSeconds','error\x20while\x20deleting\x20config\x20files:\x20','backup-full.zip','/:bot/history','156810gUkiKp','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Unauthorized\x20attempt\x20to\x20show\x20configuration','use','404\x20Not\x20Found','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','expiry','server','get-logs','getFullYear','.zip','NTBA_FIX_319','sockets','join','login\x20token\x20valid','exit','bbvNew','bcryptjs','enabled','cancelLoading','bots','backupfile','log','Unauthorized\x20login\x20attempt\x20(timeout)','Starting\x20Balance\x20Bot\x20reinstallation','2237610BoiyfV','settings','reset-password','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','connection','hasOwnProperty','show-config','bot','Bot\x20Mgr\x20>\x20','Restoring\x20bot(s)\x20from\x20backup','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','crypto','pidRefreshToken','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','parse','storeHeadless','/disable\x20-\x20disable\x20notifications\x0a','hashSync','max','Unauthorized\x20attempt\x20to\x20update\x20bot','botmanager','generateKeyPairAsync','order','Token\x20blacklisted','_data','-config.json','statSync','includes','settings.','All\x20bots','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','backup-full','temporaryAccessAllowed','headless','backup-full-000.zip','Invalid\x20authentication\x20token\x20(2)','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stringify','callback_query','output-003.log','privateKey','node-zip','No\x20bots\x20running\x20right\x20now','clientip','temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Unauthorized\x20attempt\x20to\x20log\x20out','sha256','orders','toggle-bot-mode','constructor','verify','reinstall-bb','then','getHours','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','version.json','bb-settings.json','75677NjNTvr','token','Notifications\x20disabled\x0a','2FA\x20login\x20token\x20generated','remoteAddress','access','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','new-disabled','Invalid\x20IP\x20address',',\x20must\x20be\x20a\x204\x20digit\x20number','access\x20timeout','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Unauthorized\x20attempt\x20to\x20get\x20portfolio','26792IJWHQJ','removeAllListeners','confirm-message','get','Invalid\x20Telegram\x20token','************','readFileSync','/upload-backup','\x20|\x20','placeOrder','answerCallbackQuery','botID','Unauthorized\x20attempt\x20to\x20download\x20','-----------------------------------------------------------------------------------','getMinutes','copyFileSync','login\x20token\x20generated','sendPortfolioTelegram','bot-','bbPassword','yargs/yargs','update','telegramEvents','status','1698054YdAosk','getUTCHours','toIPv4Address','/:bot/support','sign',':\x20Bot\x20Mgr\x20>\x20'];_0xc894=function(){return _0x5335e2;};return _0xc894();}dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x51c697(0x315)]();let crypt=new Crypt({'md':_0x51c697(0x289),'rsaStandard':_0x51c697(0x326)});const saltRounds=0xa,mixpanel=Mixpanel[_0x51c697(0x2f8)](_0x51c697(0x201),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x51c697(0x355)]&&settings['telegramToken']!=''&&settings[_0x51c697(0x339)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x2a10a3=>{const _0x55e42a=_0x51c697;console[_0x55e42a(0x255)](_0x2a10a3);},'simple':_0x3cfc71=>{const _0x15d901=_0x51c697;console[_0x15d901(0x255)](_0x3cfc71),loggerfile[_0x15d901(0x315)](util[_0x15d901(0x352)](_0x3cfc71)+'\x0a');},'full':async _0xddb899=>{const _0x3af7d3=_0x51c697,_0x1c689f=getTimeStamp()+_0x3af7d3(0x2be)+_0xddb899;console[_0x3af7d3(0x255)](_0x1c689f),loggerfile[_0x3af7d3(0x315)](util[_0x3af7d3(0x352)](_0x1c689f)+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x3af7d3(0x2b7)]!=_0x3af7d3(0x28a))await tgBot[_0x3af7d3(0x2ed)](settings[_0x3af7d3(0x1ed)],_0x3af7d3(0x260)+_0xddb899)[_0x3af7d3(0x1b5)](_0x175232=>{telegramError(_0x175232);});},'debug':async(_0x3ce9ca,_0xe3af27='')=>{const _0x2317f6=_0x51c697,_0xe1d2dd=getTimeStamp()+_0x2317f6(0x2f5)+_0x3ce9ca;if(debugging)console[_0x2317f6(0x255)](_0xe1d2dd);loggerfile[_0x2317f6(0x315)](util[_0x2317f6(0x352)](_0xe1d2dd)+'\x0a');if(_0xe3af27){if(debugging)console[_0x2317f6(0x255)](_0xe3af27);loggerfile['write'](util[_0x2317f6(0x352)](_0xe3af27)+'\x0a');}}};process['on']('uncaughtException',function(_0x40c108){logger['simple'](_0x40c108);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x51c697(0x292))[_0x51c697(0x2de)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x51c697(0x31a)),app=express(),http=require('http')[_0x51c697(0x1cc)](app);app[_0x51c697(0x242)](fileUpload({'useTempFiles':!![]})),app[_0x51c697(0x2a4)](_0x51c697(0x1b0),async(_0x3cb89a,_0x4f99fd)=>{const _0x447537=_0x51c697,_0xd21c15=_0x3cb89a[_0x447537(0x238)]['type'],_0x537635=getClientsWithBotID(_0x447537(0x26c)),_0xdde403=_0x3cb89a['headers'][_0x447537(0x33e)],_0x226d92=timelyDecrypt(_0xdde403,![]),_0x1a0ffc=_0x537635[_0x447537(0x20f)](_0x571d30=>_0x571d30[_0x447537(0x33e)]==_0x226d92);if(_0x1a0ffc){const _0x450fe8=normalizeIP(_0x3cb89a['socket'][_0x447537(0x298)])[_0x447537(0x348)],_0xf79e00=_0x3cb89a[_0x447537(0x2f7)]['tkn'];if(validateAccess(_0xf79e00,_0x226d92,_0x450fe8)['allow'])_0xd21c15=='backup'&&await backupConfigFiles(),await zipFiles(_0xd21c15),_0x4f99fd[_0x447537(0x301)](zippath+(_0xd21c15+_0x447537(0x249)),_0x2b2f88=>{const _0x1b1408=_0x447537;_0x2b2f88&&(logger[_0x1b1408(0x340)](_0x1b1408(0x31c)+_0xd21c15),logger['simple'](_0x2b2f88));});else logger['full'](_0x447537(0x2ad)+_0xd21c15+_0x447537(0x1f2));}else logger['full'](_0x447537(0x2ad)+_0xd21c15+_0x447537(0x36c));}),app[_0x51c697(0x200)](_0x51c697(0x2a8),async(_0x38e4ab,_0x3e040f)=>{const _0x12488a=_0x51c697,_0x18d3da=getClientsWithBotID('botmanager'),_0x119c0f=_0x38e4ab[_0x12488a(0x2f7)][_0x12488a(0x33e)],_0x4d9adb=timelyDecrypt(_0x119c0f,![]),_0x6a7ba2=_0x18d3da['find'](_0x3e1d42=>_0x3e1d42[_0x12488a(0x33e)]==_0x4d9adb);logger['debug'](_0x12488a(0x2ff));if(_0x6a7ba2){const _0x1842eb=normalizeIP(_0x38e4ab[_0x12488a(0x333)][_0x12488a(0x298)])[_0x12488a(0x348)],_0xe78fc1=_0x38e4ab[_0x12488a(0x2f7)][_0x12488a(0x239)];if(validateAccess(_0xe78fc1,_0x4d9adb,_0x1842eb)[_0x12488a(0x314)]){if(_0x38e4ab[_0x12488a(0x1e7)]){const _0x8017bf=_0x38e4ab[_0x12488a(0x1e7)][_0x12488a(0x254)];await _0x8017bf['mv'](temppath+_0x8017bf[_0x12488a(0x2e5)]),_0x3e040f['send']({'status':!![],'message':'File\x20uploaded'});const _0x24913e=getBotsWithMode();_0x24913e[_0x12488a(0x2fe)]>0x0?confirmRestore(temppath,_0x8017bf['name']):unzipFile(temppath,_0x8017bf[_0x12488a(0x2e5)]);}}else logger[_0x12488a(0x340)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x12488a(0x277));}),app[_0x51c697(0x242)](express[_0x51c697(0x234)](path[_0x51c697(0x24c)](__dirname,bbpath2,'build2'))),app[_0x51c697(0x242)](express[_0x51c697(0x234)](path['join'](__dirname,bbpath2,_0x51c697(0x1d5)))),app[_0x51c697(0x2a4)]('/',function(_0x44c63d,_0x731273){const _0x177bbf=_0x51c697;_0x731273['sendFile'](path[_0x177bbf(0x24c)](__dirname,bbpath2,_0x177bbf(0x335),'index.html'));}),app[_0x51c697(0x2a4)](_0x51c697(0x1e2),function(_0x45b3c6,_0x209287){const _0x5857d8=_0x51c697;_0x209287[_0x5857d8(0x1cf)](path[_0x5857d8(0x24c)](__dirname,bbpath2,_0x5857d8(0x1d5),_0x5857d8(0x20e)));}),app['get'](_0x51c697(0x34e),(_0x2e1807,_0x359cb0)=>{const _0x54a8c0=_0x51c697;_0x359cb0[_0x54a8c0(0x1cf)](path[_0x54a8c0(0x24c)](__dirname,bbpath2,'build','index.html'));}),app[_0x51c697(0x2a4)](_0x51c697(0x329),(_0x10ad5e,_0x244c19)=>{const _0x5195b4=_0x51c697;_0x244c19[_0x5195b4(0x1cf)](path['join'](__dirname,bbpath2,_0x5195b4(0x1d5),_0x5195b4(0x20e)));}),app[_0x51c697(0x2a4)](_0x51c697(0x226),(_0x340768,_0x42c838)=>{const _0x4053b1=_0x51c697;_0x42c838[_0x4053b1(0x1cf)](path[_0x4053b1(0x24c)](__dirname,bbpath2,_0x4053b1(0x1d5),'index.html'));}),app['get'](_0x51c697(0x23e),(_0x1763c7,_0x5e8dfe)=>{const _0x416710=_0x51c697;_0x5e8dfe['sendFile'](path[_0x416710(0x24c)](__dirname,bbpath2,_0x416710(0x1d5),_0x416710(0x20e)));}),app[_0x51c697(0x2a4)]('/:bot/configuration',(_0x5a0a0a,_0xa140e)=>{const _0x5d47d2=_0x51c697;_0xa140e[_0x5d47d2(0x1cf)](path['join'](__dirname,bbpath2,'build',_0x5d47d2(0x20e)));}),app[_0x51c697(0x2a4)](_0x51c697(0x2bc),(_0x37b6a8,_0x418031)=>{const _0x540db9=_0x51c697;_0x418031['sendFile'](path['join'](__dirname,bbpath2,_0x540db9(0x1d5),'index.html'));});if(HOST)http[_0x51c697(0x2fa)](PORT,HOST);else http['listen'](PORT);const io=require(_0x51c697(0x365))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x4a82f0=_0x51c697;logger[_0x4a82f0(0x1f8)](''),logger[_0x4a82f0(0x1f8)](_0x4a82f0(0x2ae)),await logger[_0x4a82f0(0x340)](_0x4a82f0(0x29f)+PORT),logger[_0x4a82f0(0x1f8)]('-----------------------------------------------------------------------------------');if(config[_0x4a82f0(0x2fe)]!=0x0)for(const _0x1bf119 of config){if(_0x1bf119[_0x4a82f0(0x2b8)]=='enabled'||_0x1bf119[_0x4a82f0(0x2b8)]==_0x4a82f0(0x1bf))await logger['full']('starting\x20bot\x20|\x20Bot\x20'+_0x1bf119[_0x4a82f0(0x2ac)]+_0x4a82f0(0x2a9)+_0x1bf119[_0x4a82f0(0x2e3)]),startBot([_0x1bf119['botID'],userID],{'cwd':bbpath},function(_0x316250){if(_0x316250)logger['full'](_0x316250);});else(_0x1bf119[_0x4a82f0(0x2b8)]=='disabled'||_0x1bf119[_0x4a82f0(0x2b8)]=='new-disabled')&&await logger['full']('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x1bf119['botID']+_0x4a82f0(0x2a9)+_0x1bf119[_0x4a82f0(0x2e3)]);}else!newBot&&logger[_0x4a82f0(0x1f8)](_0x4a82f0(0x2c4));if(newBot)addBot();logger[_0x4a82f0(0x1f8)](_0x4a82f0(0x2ae)),logger['simple']('');}function startSocket(){const _0x30ecfc=_0x51c697;io['on'](_0x30ecfc(0x25c),_0x505df9=>{const _0x4032a4=_0x30ecfc;let _0x420ebc,_0xa71021,_0x42c537,_0x547511,_0x52913b;const _0x3384e9=_0x505df9[_0x4032a4(0x346)]['headers']['referer'];_0xa71021=_0x3384e9['match'](/bot[0-9]{3}/);if(_0xa71021)_0x42c537=_0xa71021[0x0][_0x4032a4(0x343)](/[0-9]{3}/);if(_0x42c537)_0x420ebc=_0x42c537[0x0];else _0x420ebc=_0x4032a4(0x26c);const _0x191536=_0x505df9[_0x4032a4(0x346)][_0x4032a4(0x2d5)][_0x4032a4(0x313)];if(!_0x191536)_0x505df9['emit'](_0x4032a4(0x2b8),{'publicKey':secure[_0x4032a4(0x1d3)]});else{_0x547511=timelyDecrypt(_0x191536,![]);if(!_0x547511)_0x505df9['emit'](_0x4032a4(0x2b8),{'publicKey':secure[_0x4032a4(0x1d3)]});else{_0x52913b=normalizeIP(_0x505df9[_0x4032a4(0x357)][_0x4032a4(0x298)])[_0x4032a4(0x348)];if(!devices[_0x547511])devices[_0x547511]={'uuid':_0x547511,'access':{'token':null}};devices[_0x547511]['ip']=_0x52913b;const _0x4eb8d3=addClient(_0x505df9['id'],_0x547511,_0x420ebc);setAccess(_0x4eb8d3),emitMessages(),_0x505df9['on'](_0x4032a4(0x1f4),_0x231909=>{const _0x375d0d=_0x4032a4,_0x3e54b8=timelyDecrypt(_0x231909['password']);if(_0x3e54b8){_0x231909={'username':_0x231909['username'],'password':_0x3e54b8},devices[_0x547511][_0x375d0d(0x299)]=validateCredentials(_0x231909,_0x547511);if(devices[_0x547511][_0x375d0d(0x299)]['allow']==![]&&devices[_0x547511][_0x375d0d(0x299)]['reason']==_0x375d0d(0x224))_0x505df9[_0x375d0d(0x219)](_0x375d0d(0x2b8),{'access':devices[_0x547511][_0x375d0d(0x299)]}),loginAccess2FA(_0x547511,_0x52913b);else{if(devices[_0x547511][_0x375d0d(0x299)][_0x375d0d(0x314)]==![]&&devices[_0x547511][_0x375d0d(0x299)][_0x375d0d(0x34d)]==_0x375d0d(0x235))_0x505df9['emit'](_0x375d0d(0x2b8),{'access':devices[_0x547511][_0x375d0d(0x299)]});else devices[_0x547511][_0x375d0d(0x299)][_0x375d0d(0x314)]&&devices[_0x547511][_0x375d0d(0x299)]['reason']==_0x375d0d(0x2b1)&&(getClientsWithUuid(_0x547511)['forEach'](_0x7cf7cd=>{setAccess(_0x7cf7cd);}),setTokenRefresh(_0x547511),setSessionTimeout(_0x375d0d(0x1f4),_0x547511));}}else logger[_0x375d0d(0x340)](_0x375d0d(0x256));}),_0x505df9['on'](_0x4032a4(0x25a),()=>{resetPassword();}),_0x505df9['on'](_0x4032a4(0x358),_0x4994aa=>{removeClient(_0x505df9['id']);}),_0x420ebc==_0x4032a4(0x26c)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x481089){const _0x66e56a=_0x51c697;if(_0x481089!='botmanager'&&config[_0x66e56a(0x1c4)]!=''){if(pid[_0x481089])pid[_0x481089][_0x66e56a(0x344)]({'function':_0x66e56a(0x1db),'args':null});}}function reloadBotManager(){const _0x44bfca=_0x51c697;getClientsWithBotID(_0x44bfca(0x26c))[_0x44bfca(0x1e9)](_0x219c9f=>{const _0x4eb228=_0x44bfca;getSocket(_0x219c9f['id'])['emit']('status',{'access':{'allow':![],'reason':_0x4eb228(0x337),'token':null}});});}function getSocket(_0x18467a){const _0x9927dd=_0x51c697;return io[_0x9927dd(0x24b)][_0x9927dd(0x24b)][_0x9927dd(0x2a4)](_0x18467a);}function setAccess(_0x5c8150){const _0x186064=_0x51c697,_0x126613=getSocket(_0x5c8150['id']),_0x4d94a2=_0x5c8150[_0x186064(0x33e)],_0x15bf2e=_0x5c8150[_0x186064(0x25f)];devices[_0x4d94a2]['access']=validateAccess(devices[_0x4d94a2]['access'][_0x186064(0x295)],_0x4d94a2),_0x126613[_0x186064(0x24c)](_0x4d94a2);if(devices[_0x4d94a2][_0x186064(0x299)][_0x186064(0x314)]){_0x126613['join'](_0x15bf2e);if(_0x15bf2e==_0x186064(0x26c))initializeSocketBotManager(_0x126613);else initializeSocketBot(_0x126613);initClient(_0x15bf2e);}devices[_0x4d94a2]['access'][_0x186064(0x295)]&&devices[_0x4d94a2]['access']['reason']==_0x186064(0x353)&&setSessionTimeout('2FA',_0x4d94a2),devices[_0x4d94a2][_0x186064(0x299)]['token']&&devices[_0x4d94a2][_0x186064(0x299)]['reason']==_0x186064(0x297)&&setSessionTimeout(_0x186064(0x1f4),_0x4d94a2),_0x126613[_0x186064(0x219)](_0x186064(0x2b8),{'status':_0x5c8150[_0x186064(0x246)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4d94a2][_0x186064(0x299)],'externalip':devices[_0x4d94a2]['ip'],'publicKey':secure[_0x186064(0x1d3)],'userid':settings[_0x186064(0x317)],'validInstallation':validInstallation}),devices[_0x4d94a2][_0x186064(0x299)][_0x186064(0x314)]==![]&&devices[_0x4d94a2][_0x186064(0x299)][_0x186064(0x34d)]==_0x186064(0x370)&&temporaryAccess2FA(_0x4d94a2,devices[_0x4d94a2]['ip']);}function setSessionTimeout(_0x326cc0,_0x435559){const _0x569666=_0x51c697;let _0x265941;if(_0x326cc0==_0x569666(0x1f4))_0x265941=loginExpiry*0x3c*0x3e8;else _0x265941=devices[_0x435559][_0x569666(0x372)][_0x569666(0x245)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x435559][_0x569666(0x372)]['timestamp']);if(devices[_0x435559]['pidExpireLogin'])clearTimeout(devices[_0x435559][_0x569666(0x2fb)]);devices[_0x435559][_0x569666(0x2fb)]=setTimeout(()=>{const _0x3f8931=_0x569666;if(devices[_0x435559][_0x3f8931(0x264)])clearTimeout(devices[_0x435559][_0x3f8931(0x264)]);removeSocketListeners(_0x435559),addBlacklist(_0x435559),devices[_0x435559]['telegramIpApproval']=null,devices[_0x435559][_0x3f8931(0x276)]=null,devices[_0x435559][_0x3f8931(0x299)][_0x3f8931(0x295)]=null,devices[_0x435559]['access']=validateAccess(devices[_0x435559][_0x3f8931(0x299)]['token'],_0x435559),!(devices[_0x435559][_0x3f8931(0x299)][_0x3f8931(0x314)]&&devices[_0x435559][_0x3f8931(0x299)]['reason']==_0x3f8931(0x35a))&&(_0x326cc0==_0x3f8931(0x1f4)?io['to'](_0x435559)[_0x3f8931(0x219)](_0x3f8931(0x2b8),{'access':{'allow':![],'reason':_0x3f8931(0x29e),'token':null}}):io['to'](_0x435559)[_0x3f8931(0x219)](_0x3f8931(0x2b8),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x435559][_0x3f8931(0x299)][_0x3f8931(0x295)]=null;},_0x265941);}function setTokenRefresh(_0x1769a4){const _0xbd0c40=_0x51c697;if(devices[_0x1769a4][_0xbd0c40(0x264)])clearTimeout(devices[_0x1769a4][_0xbd0c40(0x264)]);devices[_0x1769a4][_0xbd0c40(0x264)]=setTimeout(()=>{const _0x36688d=_0xbd0c40;getClientsWithUuid(_0x1769a4)[_0x36688d(0x2fe)]!=0x0?(devices[_0x1769a4][_0x36688d(0x299)]=refreshToken(_0x1769a4),io['to'](_0x1769a4)['emit'](_0x36688d(0x2b8),{'status':_0x36688d(0x2e8),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1769a4][_0x36688d(0x299)],'externalip':devices[_0x1769a4]['ip'],'publicKey':secure[_0x36688d(0x1d3)],'validInstallation':validInstallation}),setTokenRefresh(_0x1769a4)):clearTimeout(devices[_0x1769a4][_0x36688d(0x264)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4a6897){const _0x28e96f=_0x51c697,_0x226db8=getClient(_0x4a6897['id'])[_0x28e96f(0x33e)];_0x4a6897[_0x28e96f(0x219)](_0x28e96f(0x253),config),_0x4a6897[_0x28e96f(0x219)](_0x28e96f(0x259),cleanSettings()),_0x4a6897['on']('add-bot',_0x5eaef3=>{const _0xa4b517=_0x28e96f;if(validateAccess(_0x5eaef3,_0x226db8)[_0xa4b517(0x314)])addBot();else logger[_0xa4b517(0x340)](_0xa4b517(0x1ec));}),_0x4a6897['on'](_0x28e96f(0x1c7),(_0x460551,_0x16b665)=>{const _0x22323d=_0x28e96f;if(validateAccess(_0x16b665,_0x226db8)[_0x22323d(0x314)])toggleBot(_0x460551[_0x22323d(0x2ac)],_0x460551['status'],_0x460551[_0x22323d(0x328)]);else logger[_0x22323d(0x340)](_0x22323d(0x26b));}),_0x4a6897['on'](_0x28e96f(0x28b),(_0x367a94,_0x5355ea)=>{const _0x56e451=_0x28e96f;if(validateAccess(_0x5355ea,_0x226db8)[_0x56e451(0x314)])toggleBotMode(_0x367a94);else logger[_0x56e451(0x340)](_0x56e451(0x26b));}),_0x4a6897['on'](_0x28e96f(0x2d1),(_0x26bdb5,_0x5b2e20)=>{const _0x13a10e=_0x28e96f;if(validateAccess(_0x5b2e20,_0x226db8)[_0x13a10e(0x314)])deleteBot(_0x26bdb5);else logger[_0x13a10e(0x340)](_0x13a10e(0x1ff));}),_0x4a6897['on']('store-settings',(_0x307321,_0x5c1fc4)=>{const _0x4bed5f=_0x28e96f;if(validateAccess(_0x5c1fc4,_0x226db8)['allow'])storeSettings(_0x307321,!![]);else logger[_0x4bed5f(0x340)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4a6897['on']('update-bb',_0x3bbe97=>{const _0x5362ca=_0x28e96f;if(validateAccess(_0x3bbe97,_0x226db8)[_0x5362ca(0x314)])updateBB(_0x5362ca(0x2b6));else logger[_0x5362ca(0x340)](_0x5362ca(0x33d));}),_0x4a6897['on'](_0x28e96f(0x28e),_0x52627b=>{const _0x4be1be=_0x28e96f;if(validateAccess(_0x52627b,_0x226db8)['allow'])updateBB(_0x4be1be(0x1cb));else logger['full'](_0x4be1be(0x2c2));}),_0x4a6897['on'](_0x28e96f(0x1f1),_0xe05637=>{const _0x5b5fc1=_0x28e96f;if(validateAccess(_0xe05637,_0x226db8)[_0x5b5fc1(0x314)])getBackupFiles(getClient(_0x4a6897['id'])[_0x5b5fc1(0x33e)]);else logger['full'](_0x5b5fc1(0x2c2));}),_0x4a6897['on'](_0x28e96f(0x366),(_0x41d3ca,_0x57dbdf)=>{const _0x547e1c=_0x28e96f;if(validateAccess(_0x57dbdf,_0x226db8)[_0x547e1c(0x314)])restoreBackupFile(_0x41d3ca);else logger[_0x547e1c(0x340)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x4a6897['on']('get-messages',_0x246f2f=>{const _0x57f682=_0x28e96f;if(validateAccess(_0x246f2f,_0x226db8)[_0x57f682(0x314)])getMessages();else logger[_0x57f682(0x340)](_0x57f682(0x31f));}),_0x4a6897['on'](_0x28e96f(0x2a3),(_0x10c489,_0x401039)=>{const _0x2395a4=_0x28e96f;if(validateAccess(_0x401039,_0x226db8)[_0x2395a4(0x314)])confirmMessage(_0x10c489);else logger[_0x2395a4(0x340)](_0x2395a4(0x1d9));}),_0x4a6897['on'](_0x28e96f(0x22c),_0x580ef0=>{const _0x1de06f=_0x28e96f;if(validateAccess(_0x580ef0,_0x226db8)[_0x1de06f(0x314)]){if(devices[_0x226db8][_0x1de06f(0x264)])clearTimeout(devices[_0x226db8][_0x1de06f(0x264)]);if(devices[_0x226db8][_0x1de06f(0x2fb)])clearTimeout(devices[_0x226db8][_0x1de06f(0x2fb)]);removeSocketListeners(getClient(_0x4a6897['id'])[_0x1de06f(0x33e)]),addBlacklist(_0x226db8),devices[_0x226db8][_0x1de06f(0x372)]=null,devices[_0x226db8][_0x1de06f(0x276)]=null,devices[_0x226db8][_0x1de06f(0x299)]['token']=null,io['to'](getClient(_0x4a6897['id'])['uuid'])[_0x1de06f(0x219)](_0x1de06f(0x2b8),{'access':{'allow':![],'reason':_0x1de06f(0x227),'token':null}});}else logger['full'](_0x1de06f(0x288));});}function initializeSocketBot(_0x782d11){const _0x32aeca=_0x51c697,_0x520dda=getClient(_0x782d11['id'])[_0x32aeca(0x25f)],_0x2b55a5=getClient(_0x782d11['id'])['uuid'];_0x782d11['on'](_0x32aeca(0x247),(_0x5444e6,_0x159b06)=>{const _0x484413=_0x32aeca;if(validateAccess(_0x159b06,_0x2b55a5)[_0x484413(0x314)]){if(pid[_0x520dda])pid[_0x520dda]['send']({'function':'emitHistory','args':_0x5444e6});}else logger['full'](_0x484413(0x362));}),_0x782d11['on']('delete-alerts',(_0x38c6cc,_0x4b4fc3)=>{const _0x27f255=_0x32aeca;if(validateAccess(_0x4b4fc3,_0x2b55a5)[_0x27f255(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x27f255(0x344)]({'function':_0x27f255(0x2c5),'args':_0x38c6cc});}else logger[_0x27f255(0x340)](_0x27f255(0x311));}),_0x782d11['on'](_0x32aeca(0x30d),(_0x313fcc,_0x3f9108)=>{const _0x297da3=_0x32aeca;if(validateAccess(_0x3f9108,_0x2b55a5)[_0x297da3(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x297da3(0x344)]({'function':_0x297da3(0x2c6),'args':_0x313fcc});}else logger[_0x297da3(0x340)](_0x297da3(0x2a0));}),_0x782d11['on'](_0x32aeca(0x30c),(_0x25695f,_0x330d2d)=>{const _0x2f7cb7=_0x32aeca;if(validateAccess(_0x330d2d,_0x2b55a5)['allow']){if(pid[_0x520dda])pid[_0x520dda]['send']({'function':'storeConfiguration','args':_0x25695f});}else logger[_0x2f7cb7(0x340)](_0x2f7cb7(0x310));}),_0x782d11['on'](_0x32aeca(0x32a),(_0x44d16b,_0x1cb7fd)=>{const _0x2b9393=_0x32aeca;if(validateAccess(_0x1cb7fd,_0x2b55a5)[_0x2b9393(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x2b9393(0x344)]({'function':_0x2b9393(0x267),'args':_0x44d16b});}else logger[_0x2b9393(0x340)](_0x2b9393(0x286));}),_0x782d11['on']('get-starting-balances',_0x500d29=>{const _0x50f458=_0x32aeca;if(validateAccess(_0x500d29,_0x2b55a5)[_0x50f458(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x50f458(0x344)]({'function':_0x50f458(0x35e),'args':null});}else logger[_0x50f458(0x340)](_0x50f458(0x25b));}),_0x782d11['on']('place-order',(_0x55fee1,_0x7c2419)=>{const _0x614b57=_0x32aeca;if(validateAccess(_0x7c2419,_0x2b55a5)[_0x614b57(0x314)]){if(pid[_0x520dda])pid[_0x520dda]['send']({'function':_0x614b57(0x2aa),'args':_0x55fee1});}else logger[_0x614b57(0x340)](_0x614b57(0x20a));}),_0x782d11['on'](_0x32aeca(0x376),_0x41a9ef=>{const _0x17c856=_0x32aeca;if(validateAccess(_0x41a9ef,_0x2b55a5)[_0x17c856(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x17c856(0x344)]({'function':_0x17c856(0x252),'args':null});}else logger[_0x17c856(0x340)](_0x17c856(0x35c));}),_0x782d11['on'](_0x32aeca(0x25e),_0x305128=>{const _0x4a620d=_0x32aeca;if(validateAccess(_0x305128,_0x2b55a5)[_0x4a620d(0x314)]){if(pid[_0x520dda])pid[_0x520dda][_0x4a620d(0x344)]({'function':_0x4a620d(0x22a),'args':null});}else logger[_0x4a620d(0x340)](_0x4a620d(0x241));}),_0x782d11['on']('update-bb',_0x8c775d=>{const _0x1d992e=_0x32aeca;if(validateAccess(_0x8c775d,_0x2b55a5)[_0x1d992e(0x314)])updateBB(_0x1d992e(0x2b6));else logger[_0x1d992e(0x340)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x782d11['on'](_0x32aeca(0x302),_0x34b89d=>{const _0x32f1a5=_0x32aeca;if(validateAccess(_0x34b89d,_0x2b55a5)[_0x32f1a5(0x314)])getMessages();else logger[_0x32f1a5(0x340)](_0x32f1a5(0x31f));}),_0x782d11['on']('confirm-message',(_0x489bce,_0x3d4cef)=>{const _0x394526=_0x32aeca;if(validateAccess(_0x3d4cef,_0x2b55a5)[_0x394526(0x314)])confirmMessage(_0x489bce);else logger[_0x394526(0x340)](_0x394526(0x1d9));}),_0x782d11['on']('logout',_0x5c2b2e=>{const _0x49a230=_0x32aeca;if(validateAccess(_0x5c2b2e,_0x2b55a5)[_0x49a230(0x314)]){if(devices[_0x2b55a5]['pidRefreshToken'])clearTimeout(devices[_0x2b55a5][_0x49a230(0x264)]);if(devices[_0x2b55a5][_0x49a230(0x2fb)])clearTimeout(devices[_0x2b55a5][_0x49a230(0x2fb)]);removeSocketListeners(getClient(_0x782d11['id'])[_0x49a230(0x33e)]),addBlacklist(_0x2b55a5),devices[_0x2b55a5][_0x49a230(0x372)]=null,devices[_0x2b55a5][_0x49a230(0x276)]=null,devices[_0x2b55a5][_0x49a230(0x299)][_0x49a230(0x295)]=null,io['to'](getClient(_0x782d11['id'])['uuid'])['emit'](_0x49a230(0x2b8),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x49a230(0x340)](_0x49a230(0x288));});}function removeSocketListeners(_0x24ade8){const _0x502628=_0x51c697;getClientsWithUuid(_0x24ade8)[_0x502628(0x1e9)](_0x2a9da8=>{const _0x522572=_0x502628;getSocket(_0x2a9da8['id'])[_0x522572(0x2a2)]();});}function cleanSettings(){const _0xd1b752=_0x51c697;let _0x480348=settings;return settings['telegramToken']&&settings[_0xd1b752(0x355)]!=''&&(_0x480348={..._0x480348,'telegramToken':_0xd1b752(0x2a6)}),settings['bbPassword']&&settings[_0xd1b752(0x2b4)]!=''&&(_0x480348={..._0x480348,'bbPassword':_0xd1b752(0x2a6)}),(settings['bbPassword']&&settings[_0xd1b752(0x2b4)]=='***'||settings['telegramToken']&&settings[_0xd1b752(0x355)]==_0xd1b752(0x330))&&(_0x480348={..._0x480348,'restored':{'password':settings['bbPassword']==_0xd1b752(0x330),'telegram':settings[_0xd1b752(0x355)]==_0xd1b752(0x330)}}),_0x480348;}async function updateBB(_0x21a4b6){const _0x22d495=_0x51c697;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x181d60=>{restartBot(_0x181d60['botID']);}),logger[_0x22d495(0x2bf)](_0x22d495(0x1c6)+_0x21a4b6);if(_0x21a4b6==_0x22d495(0x2b6))process[_0x22d495(0x344)]({'update':!![]},_0xbd7572=>{});else _0x21a4b6=='reinstall'&&process[_0x22d495(0x344)]({'reinstall':!![]},_0x3d3ec2=>{});}function startBot(_0x2c3bc9,_0x6534ac,_0x5879ca){const _0x2c59a2=_0x51c697;if(debugging)_0x2c3bc9[_0x2c59a2(0x2e6)]('-d');let _0x3244e1=![];const _0x6d14d8=_0x2c3bc9[0x0];_0x6534ac={..._0x6534ac,'stdio':[_0x2c59a2(0x342),_0x2c59a2(0x342),_0x2c59a2(0x342),_0x2c59a2(0x30b)]},pid[_0x6d14d8]=childProcess[_0x2c59a2(0x32b)](botfile,_0x2c3bc9,_0x6534ac),pid[_0x6d14d8]['on'](_0x2c59a2(0x36a),_0x47e398=>{const _0x3e6542=_0x2c59a2;switch(Object[_0x3e6542(0x349)](_0x47e398)[0x0]){case _0x3e6542(0x2e3):updateBotName(_0x6d14d8,_0x47e398[_0x3e6542(0x2e3)]);break;case'updatebotmanager':updateBotManager();break;case _0x3e6542(0x2b8):updateStatus(_0x6d14d8,_0x47e398[_0x3e6542(0x2b8)]);break;case _0x3e6542(0x328):updateLive(_0x6d14d8,_0x47e398[_0x3e6542(0x328)]);break;case _0x3e6542(0x322):updateLive(_0x6d14d8,_0x47e398[_0x3e6542(0x322)]),io['to'](_0x6d14d8)[_0x3e6542(0x219)](_0x3e6542(0x2b8),{'access':{'allow':![],'reason':_0x3e6542(0x337),'token':null}});break;case _0x3e6542(0x35f):_0x47e398[_0x3e6542(0x35f)]==_0x3e6542(0x32c)&&restartBot(_0x6d14d8);_0x47e398[_0x3e6542(0x35f)]==_0x3e6542(0x210)&&toggleBot(_0x6d14d8,_0x3e6542(0x22b),_0x3e6542(0x212));break;case _0x3e6542(0x1b6):sendTelegram(_0x6d14d8,_0x47e398['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x47e398['telegrammsg']);break;case _0x3e6542(0x1de):io['to'](_0x6d14d8)[_0x3e6542(0x219)](_0x47e398[_0x3e6542(0x1de)],_0x47e398[_0x3e6542(0x213)]);break;}}),pid[_0x6d14d8]['on']('error',function(_0x11bc57){if(_0x3244e1)return;_0x3244e1=!![],_0x5879ca(_0x11bc57);}),pid[_0x6d14d8]['on'](_0x2c59a2(0x24e),async function(_0x1ca1f2){const _0x272ce6=_0x2c59a2;if(installingUpdate)return;if(_0x3244e1)return;_0x3244e1=!![],_0x5879ca(null);const _0x2e726c=dbConfig['get'](_0x272ce6(0x253))[_0x272ce6(0x20f)]({'botID':_0x6d14d8})[_0x272ce6(0x2f6)]();_0x2e726c&&(_0x2e726c[_0x272ce6(0x2b8)]=='enabled'||_0x2e726c[_0x272ce6(0x2b8)]==_0x272ce6(0x1bf))&&(await sleep(0x3e8),updateLive(_0x6d14d8,_0x272ce6(0x212)),logger[_0x272ce6(0x340)](_0x272ce6(0x207)+_0x6d14d8),startBot([_0x6d14d8,userID],{'cwd':bbpath},function(_0x44d601){const _0x41d684=_0x272ce6;if(_0x44d601)logger[_0x41d684(0x340)](_0x44d601);}));});}function stopBot(_0xa56679){const _0x31b040=_0x51c697;getClientsWithBotID(_0xa56679)[_0x31b040(0x1e9)](_0x480e94=>{const _0x4cfe34=_0x31b040;getSocket(_0x480e94['id'])[_0x4cfe34(0x358)](!![]),removeClient(_0x480e94['id']);}),pid[_0xa56679]&&(pid[_0xa56679]['kill'](),pid[_0xa56679]=null);}function restartBot(_0x370303){if(pid[_0x370303])pid[_0x370303]['kill']();}function addBot(){const _0x53fd1a=_0x51c697;let _0x37ae92;for(let _0x292001=0x1;_0x292001<0x3e9;_0x292001++){_0x37ae92=_0x292001[_0x53fd1a(0x2f4)]()[_0x53fd1a(0x1b4)](0x3,'0');let _0x3cc5a4=config['find'](_0x84eaaf=>_0x84eaaf[_0x53fd1a(0x2ac)]==_0x37ae92);if(!_0x3cc5a4)break;}if(_0x37ae92===_0x53fd1a(0x374)){logger[_0x53fd1a(0x340)](_0x53fd1a(0x1ca));return;}logger['full'](_0x53fd1a(0x30a)+_0x37ae92),dbConfig[_0x53fd1a(0x2a4)](_0x53fd1a(0x253))['push']({'botID':_0x37ae92,'botname':_0x53fd1a(0x331)+_0x37ae92,'status':_0x53fd1a(0x1bf),'live':''})[_0x53fd1a(0x315)](),startBot([_0x37ae92,userID],{'cwd':bbpath},function(_0x2834e0){const _0x4afde5=_0x53fd1a;if(_0x2834e0)logger[_0x4afde5(0x340)](_0x2834e0);}),config=getConfiguration(),io['to'](_0x53fd1a(0x26c))[_0x53fd1a(0x219)](_0x53fd1a(0x253),config);}function deleteBot(_0x1a0b52){const _0x133093=_0x51c697;getClientsWithBotID(_0x1a0b52)[_0x133093(0x1e9)](_0x55eb2b=>{const _0x24b961=_0x133093;getSocket(_0x55eb2b['id'])[_0x24b961(0x358)](!![]),removeClient(_0x55eb2b['id']);}),dbConfig[_0x133093(0x2a4)]('bots')['remove']({'botID':_0x1a0b52})['write'](),logger['full'](_0x133093(0x20b)+_0x1a0b52),stopBot(_0x1a0b52);try{if(fs[_0x133093(0x1e6)](path[_0x133093(0x24c)](configpath,'bot-'+_0x1a0b52+_0x133093(0x271))))fs['unlinkSync'](path[_0x133093(0x24c)](configpath,_0x133093(0x2b3)+_0x1a0b52+_0x133093(0x271)));if(fs[_0x133093(0x1e6)](path[_0x133093(0x24c)](configpath,_0x133093(0x2b3)+_0x1a0b52+_0x133093(0x2d6))))fs[_0x133093(0x1bd)](path[_0x133093(0x24c)](configpath,_0x133093(0x2b3)+_0x1a0b52+'-events.json'));if(fs[_0x133093(0x1e6)](path[_0x133093(0x24c)](configpath,_0x133093(0x2b3)+_0x1a0b52+_0x133093(0x2e7))))fs['unlinkSync'](path[_0x133093(0x24c)](configpath,'bot-'+_0x1a0b52+_0x133093(0x2e7)));if(fs[_0x133093(0x1e6)](path['join'](configpath,'bot-'+_0x1a0b52+_0x133093(0x2f9))))fs['unlinkSync'](path[_0x133093(0x24c)](configpath,_0x133093(0x2b3)+_0x1a0b52+_0x133093(0x2f9)));}catch(_0x2ee0e7){if(_0x2ee0e7)logger[_0x133093(0x340)](_0x133093(0x23c),_0x2ee0e7);}config=getConfiguration(),io['to'](_0x133093(0x26c))['emit'](_0x133093(0x253),config);}function toggleBot(_0x3ff4e0,_0x5ed752,_0x32be1e){const _0x30248b=_0x51c697;dbConfig[_0x30248b(0x2a4)](_0x30248b(0x253))[_0x30248b(0x20f)]({'botID':_0x3ff4e0})[_0x30248b(0x1f7)]({'status':_0x5ed752})[_0x30248b(0x1f7)]({'live':_0x32be1e})[_0x30248b(0x315)]();if(_0x5ed752==_0x30248b(0x251)||_0x5ed752==_0x30248b(0x1bf))logger[_0x30248b(0x340)](_0x30248b(0x2f3)+_0x3ff4e0),startBot([_0x3ff4e0,userID],{'cwd':bbpath},function(_0x3cee8f){const _0x98cee5=_0x30248b;if(_0x3cee8f)logger[_0x98cee5(0x340)](_0x3cee8f);});else(_0x5ed752==_0x30248b(0x22b)||_0x5ed752==_0x30248b(0x29b))&&(logger[_0x30248b(0x340)]('disabled\x20Bot\x20'+_0x3ff4e0),stopBot(_0x3ff4e0));config=getConfiguration(),io['to'](_0x30248b(0x26c))[_0x30248b(0x219)](_0x30248b(0x253),config);}function toggleStatus(_0x51e01a){const _0x9b2897=_0x51c697;let _0x5e3f8d=dbConfig['get'](_0x9b2897(0x253))['find']({'botID':_0x51e01a})[_0x9b2897(0x2f6)](),_0x533773;if(_0x5e3f8d[_0x9b2897(0x2b8)]===_0x9b2897(0x251))_0x533773=_0x9b2897(0x22b);else{if(_0x5e3f8d[_0x9b2897(0x2b8)]===_0x9b2897(0x1bf))_0x533773=_0x9b2897(0x29b);else{if(_0x5e3f8d[_0x9b2897(0x2b8)]===_0x9b2897(0x29b))_0x533773=_0x9b2897(0x1bf);else{if(_0x5e3f8d['status']==='disabled')_0x533773=_0x9b2897(0x251);}}}return _0x533773;}function updateStatus(_0x6910c3,_0x4e60a9){const _0xa86fed=_0x51c697;dbConfig[_0xa86fed(0x2a4)](_0xa86fed(0x253))[_0xa86fed(0x20f)]({'botID':_0x6910c3})['assign']({'status':_0x4e60a9})[_0xa86fed(0x315)](),config=getConfiguration(),io['to'](_0xa86fed(0x26c))[_0xa86fed(0x219)](_0xa86fed(0x253),config);}function updateLive(_0x3b6113,_0x53563c){const _0x17fb45=_0x51c697;dbConfig['get'](_0x17fb45(0x253))[_0x17fb45(0x20f)]({'botID':_0x3b6113})['assign']({'live':_0x53563c})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x17fb45(0x219)](_0x17fb45(0x253),config);}function updateBotName(_0x47cf4c,_0x57c3f1){const _0x3ff121=_0x51c697;dbConfig[_0x3ff121(0x2a4)](_0x3ff121(0x253))[_0x3ff121(0x20f)]({'botID':_0x47cf4c})[_0x3ff121(0x1f7)]({'botname':_0x57c3f1})[_0x3ff121(0x315)](),config=getConfiguration(),io['to'](_0x3ff121(0x26c))[_0x3ff121(0x219)](_0x3ff121(0x253),config);}function updateBotManager(){const _0x3cc2e5=_0x51c697;config=getConfiguration(),io['to'](_0x3cc2e5(0x26c))[_0x3cc2e5(0x219)]('bots',config);}function toggleBotMode(_0x55842a){const _0x4bc151=_0x51c697;if(pid[_0x55842a])pid[_0x55842a][_0x4bc151(0x344)]({'function':'toggleBotMode','args':null});else{const _0x338f81=configpath+_0x4bc151(0x2b3)+_0x55842a+_0x4bc151(0x271),_0x48e0a8=fs[_0x4bc151(0x2a7)](_0x338f81),_0x3e7cbe=JSON[_0x4bc151(0x266)](_0x48e0a8),_0x2bdd29=_0x3e7cbe[_0x4bc151(0x25f)][0x0][_0x4bc151(0x27a)];_0x3e7cbe[_0x4bc151(0x25f)][0x0][_0x4bc151(0x27a)]=!_0x2bdd29;const _0x4f1301=JSON[_0x4bc151(0x27e)](_0x3e7cbe,null,0x2);fs[_0x4bc151(0x1ce)](_0x338f81,_0x4f1301),config=getConfiguration(),io['to']('botmanager')[_0x4bc151(0x219)](_0x4bc151(0x253),config);}}function telegramError(_0x5b50be){const _0x43374a=_0x51c697;logger['simple'](getTimeStamp()+_0x43374a(0x287));}function validateTelegram(_0x107a69){const _0x295998=_0x51c697;if(_0x107a69['from'][_0x295998(0x307)]!=settings[_0x295998(0x339)]&&'@'+_0x107a69[_0x295998(0x1dc)]['username']!=settings['telegramUsername'])return tgBot['sendMessage'](_0x107a69[_0x295998(0x1d0)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x295998(0x304)})[_0x295998(0x1b5)](_0x57ec90=>{telegramError(_0x57ec90);}),![];return!![];}async function initTelegram(){const _0x305e25=_0x51c697;if(tgBot)tgBot[_0x305e25(0x32f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x305e25(0x355)],{'polling':!![]});let _0x464ea3=_0x305e25(0x332);_0x464ea3+='\x0a',_0x464ea3+=_0x305e25(0x305),_0x464ea3+=_0x305e25(0x268),_0x464ea3+=_0x305e25(0x262),_0x464ea3+=_0x305e25(0x1da),_0x464ea3+=_0x305e25(0x214),_0x464ea3+='/off\x20-\x20stop\x20bot(s)\x0a',_0x464ea3+=_0x305e25(0x36f),_0x464ea3+='/names\x20-\x20show\x20bot\x20names\x0a',_0x464ea3+=_0x305e25(0x350),_0x464ea3+=_0x305e25(0x371),_0x464ea3+=_0x305e25(0x1ad),_0x464ea3+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x464ea3+=_0x305e25(0x1f6);let _0x454599=_0x305e25(0x2c3);_0x454599+='\x0a',_0x454599+=_0x464ea3,tgBot[_0x305e25(0x2ce)](/\/start/,_0x4db153=>{const _0x4d13d5=_0x305e25;if(!validateTelegram(_0x4db153))return;if(settings['telegramChatId']!=_0x4db153['chat']['id'])updateSetting(_0x4d13d5(0x1ed),_0x4db153[_0x4d13d5(0x1d0)]['id']);updateSetting(_0x4d13d5(0x230),!![]),tgBot['sendMessage'](_0x4db153['chat']['id'],_0x454599)[_0x4d13d5(0x1b5)](_0x38feb7=>{telegramError(_0x38feb7);});}),tgBot['onText'](/\/enable/,_0x263db9=>{const _0x3fb837=_0x305e25;if(!validateTelegram(_0x263db9))return;if(settings[_0x3fb837(0x1ed)]!=_0x263db9['chat']['id'])updateSetting(_0x3fb837(0x1ed),_0x263db9[_0x3fb837(0x1d0)]['id']);updateSetting(_0x3fb837(0x230),!![]),tgBot[_0x3fb837(0x2ed)](_0x263db9['chat']['id'],_0x3fb837(0x2c0))[_0x3fb837(0x1b5)](_0x4cc2de=>{telegramError(_0x4cc2de);});}),tgBot[_0x305e25(0x2ce)](/\/config/,async _0x2cd720=>{const _0x4a8cd2=_0x305e25;if(!validateTelegram(_0x2cd720))return;tgBot[_0x4a8cd2(0x36d)]('callback_query'),tgBot[_0x4a8cd2(0x2ed)](_0x2cd720[_0x4a8cd2(0x1d0)]['id'],_0x4a8cd2(0x291),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x4a8cd2(0x369),'callback_data':'alerts'},{'text':_0x4a8cd2(0x208),'callback_data':_0x4a8cd2(0x2d8)}]]}})[_0x4a8cd2(0x1b5)](_0x187c32=>{telegramError(_0x187c32);}),tgBot['on']('callback_query',async _0x5a31ea=>{const _0x2429c2=_0x4a8cd2,_0xf672d2=_0x5a31ea[_0x2429c2(0x33c)],_0x129f47=_0x5a31ea['message'];tgBot['answerCallbackQuery'](_0x5a31ea['id'])[_0x2429c2(0x28f)](async()=>{const _0x418102=_0x2429c2;_0xf672d2==_0x418102(0x28a)&&(updateSetting('telegramEvents',_0x418102(0x28a)),updateSetting(_0x418102(0x230),!![]),await tgBot[_0x418102(0x2ed)](_0x129f47['chat']['id'],_0x418102(0x218))['catch'](_0x909847=>{telegramError(_0x909847);}));_0xf672d2==_0x418102(0x2f2)&&(updateSetting(_0x418102(0x2b7),_0x418102(0x2f2)),updateSetting(_0x418102(0x230),!![]),await tgBot[_0x418102(0x2ed)](_0x129f47[_0x418102(0x1d0)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0xfaabce=>{telegramError(_0xfaabce);}));_0xf672d2=='all'&&(updateSetting(_0x418102(0x2b7),_0x418102(0x2d8)),updateSetting(_0x418102(0x230),!![]),await tgBot[_0x418102(0x2ed)](_0x129f47[_0x418102(0x1d0)]['id'],_0x418102(0x2e2))[_0x418102(0x1b5)](_0x1cce48=>{telegramError(_0x1cce48);}));if(!settings[_0x418102(0x1ed)])tgBot[_0x418102(0x2ed)](_0x129f47[_0x418102(0x1d0)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0xbffcc1=>{telegramError(_0xbffcc1);});}),tgBot['removeListener']('callback_query');});}),tgBot[_0x305e25(0x2ce)](/\/status/,_0x58e92d=>{const _0x57e883=_0x305e25;if(!validateTelegram(_0x58e92d))return;const _0xfb9381=getBotsWithMode();let _0x26685f=_0x57e883(0x2c8);config[_0x57e883(0x1e9)](_0x2357f1=>{const _0x4a3121=_0x57e883,_0x230cb8=_0xfb9381[_0x4a3121(0x20f)](_0x3d3b7a=>_0x3d3b7a[_0x4a3121(0x2ac)]==_0x2357f1[_0x4a3121(0x2ac)])[_0x4a3121(0x22f)];_0x26685f+=_0x4a3121(0x331)+_0x2357f1[_0x4a3121(0x2ac)]+':\x20'+_0x2357f1[_0x4a3121(0x2b8)]+_0x4a3121(0x2a9)+_0x230cb8+_0x4a3121(0x2a9)+_0x2357f1[_0x4a3121(0x328)]+'\x0a';}),_0x26685f+='\x0a',_0x26685f+=_0x57e883(0x1b3),_0x26685f+=!settings[_0x57e883(0x230)]?_0x57e883(0x296):'Notifications\x20enabled\x0a',_0x26685f+=settings[_0x57e883(0x230)]?settings['telegramEvents']=='all'?_0x57e883(0x1c3):_0x57e883(0x1e4)+settings[_0x57e883(0x2b7)]+_0x57e883(0x338):'',tgBot['sendMessage'](_0x58e92d[_0x57e883(0x1d0)]['id'],_0x26685f,{'parse_mode':'HTML'})[_0x57e883(0x1b5)](_0x1a7827=>{telegramError(_0x1a7827);});}),tgBot[_0x305e25(0x2ce)](/\/restart/,_0x5c6112=>{const _0x37fda=_0x305e25;if(!validateTelegram(_0x5c6112))return;tgBot['removeListener']('callback_query');const _0x4259f3=getEnabledBots();if(_0x4259f3[_0x37fda(0x2fe)]==0x0)tgBot[_0x37fda(0x2ed)](_0x5c6112['chat']['id'],_0x37fda(0x283))['catch'](_0x59a9fa=>{telegramError(_0x59a9fa);});else{if(_0x4259f3['length']>0x1)_0x4259f3[_0x37fda(0x2e6)]({'botID':'all'});let _0x7f0f2f=[],_0x5baaff=[];const _0x39ad78=_0x4259f3[_0x37fda(0x2fe)]%0x4==0x0||_0x4259f3[_0x37fda(0x2fe)]%0x4==0x3||_0x4259f3['length']%0x3==0x1?0x4:0x3;let _0xeef67f=0x0;_0x4259f3['forEach']((_0x19f316,_0x186caf)=>{const _0x42ebcd=_0x37fda;if(_0x186caf%_0x39ad78==0x0)_0x5baaff=[];_0x5baaff[_0x42ebcd(0x2e6)]({'text':_0x19f316[_0x42ebcd(0x2ac)]==_0x42ebcd(0x2d8)?_0x42ebcd(0x275):_0x42ebcd(0x331)+_0x19f316[_0x42ebcd(0x2ac)],'callback_data':_0x19f316['botID']}),_0x186caf%_0x39ad78==0x0&&(_0x7f0f2f[_0xeef67f]=_0x5baaff,_0xeef67f++);}),tgBot['sendMessage'](_0x5c6112[_0x37fda(0x1d0)]['id'],_0x37fda(0x236),{'reply_markup':{'inline_keyboard':_0x7f0f2f}})['catch'](_0x1a8e16=>{telegramError(_0x1a8e16);}),tgBot['on'](_0x37fda(0x27f),async _0x4a131b=>{const _0x1e17da=_0x37fda,_0x5d7027=_0x4a131b['data'],_0x3ac362=_0x4a131b[_0x1e17da(0x36a)];tgBot[_0x1e17da(0x2ab)](_0x4a131b['id'])[_0x1e17da(0x28f)](async()=>{const _0x9bb3de=_0x1e17da;_0x5d7027==_0x9bb3de(0x2d8)?config[_0x9bb3de(0x1e9)](_0x4a1028=>{const _0x4c65d1=_0x9bb3de;restartBot(_0x4a1028[_0x4c65d1(0x2ac)]);}):restartBot(_0x5d7027);}),tgBot[_0x1e17da(0x36d)](_0x1e17da(0x27f));});}}),tgBot[_0x305e25(0x2ce)](/\/on/,_0x5a7fad=>{const _0x2106b5=_0x305e25;if(!validateTelegram(_0x5a7fad))return;tgBot[_0x2106b5(0x36d)](_0x2106b5(0x27f));const _0x5a9601=getDisabledBots();if(_0x5a9601[_0x2106b5(0x2fe)]==0x0)tgBot[_0x2106b5(0x2ed)](_0x5a7fad[_0x2106b5(0x1d0)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x2106b5(0x1b5)](_0x2af416=>{telegramError(_0x2af416);});else{if(_0x5a9601[_0x2106b5(0x2fe)]>0x1)_0x5a9601[_0x2106b5(0x2e6)]({'botID':_0x2106b5(0x2d8)});let _0x28c093=[],_0x4d55df=[];const _0x561c22=_0x5a9601['length']%0x4==0x0||_0x5a9601['length']%0x4==0x3||_0x5a9601[_0x2106b5(0x2fe)]%0x3==0x1?0x4:0x3;let _0x165d6e=0x0;_0x5a9601[_0x2106b5(0x1e9)]((_0x2752c2,_0x416ec4)=>{const _0x4599be=_0x2106b5;if(_0x416ec4%_0x561c22==0x0)_0x4d55df=[];_0x4d55df['push']({'text':_0x2752c2['botID']=='all'?_0x4599be(0x275):_0x4599be(0x331)+_0x2752c2[_0x4599be(0x2ac)],'callback_data':_0x2752c2[_0x4599be(0x2ac)]}),_0x416ec4%_0x561c22==0x0&&(_0x28c093[_0x165d6e]=_0x4d55df,_0x165d6e++);}),tgBot['sendMessage'](_0x5a7fad[_0x2106b5(0x1d0)]['id'],_0x2106b5(0x32d),{'reply_markup':{'inline_keyboard':_0x28c093}})[_0x2106b5(0x1b5)](_0x12bad2=>{telegramError(_0x12bad2);}),tgBot['on'](_0x2106b5(0x27f),async _0x100f14=>{const _0x6a47c1=_0x2106b5,_0x4af018=_0x100f14[_0x6a47c1(0x33c)],_0x2c8265=_0x100f14[_0x6a47c1(0x36a)];tgBot[_0x6a47c1(0x2ab)](_0x100f14['id'])[_0x6a47c1(0x28f)](async()=>{const _0x5329d6=_0x6a47c1;_0x4af018==_0x5329d6(0x2d8)?(tgBot['sendMessage'](_0x2c8265[_0x5329d6(0x1d0)]['id'],_0x5329d6(0x27d))[_0x5329d6(0x1b5)](_0x38d5b5=>{telegramError(_0x38d5b5);}),_0x5a9601[_0x5329d6(0x1e9)](_0x1fa04a=>{const _0x9e85d5=_0x5329d6;if(_0x1fa04a['botID']!=_0x9e85d5(0x2d8))toggleBot(_0x1fa04a[_0x9e85d5(0x2ac)],toggleStatus(_0x1fa04a[_0x9e85d5(0x2ac)]),'stopped');})):(tgBot['sendMessage'](_0x2c8265[_0x5329d6(0x1d0)]['id'],_0x5329d6(0x2ea)+_0x4af018)['catch'](_0x390626=>{telegramError(_0x390626);}),toggleBot(_0x4af018,toggleStatus(_0x4af018),_0x5329d6(0x212)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x305e25(0x2ce)](/\/off/,_0x41db4c=>{const _0x2175b1=_0x305e25;if(!validateTelegram(_0x41db4c))return;tgBot[_0x2175b1(0x36d)]('callback_query');const _0x2216db=getEnabledBots();if(_0x2216db['length']==0x0)tgBot[_0x2175b1(0x2ed)](_0x41db4c[_0x2175b1(0x1d0)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2175b1(0x1b5)](_0x1d0d57=>{telegramError(_0x1d0d57);});else{if(_0x2216db['length']>0x1)_0x2216db[_0x2175b1(0x2e6)]({'botID':'all'});let _0x171996=[],_0x3007e6=[];const _0x2bccc2=_0x2216db[_0x2175b1(0x2fe)]%0x4==0x0||_0x2216db['length']%0x4==0x3||_0x2216db[_0x2175b1(0x2fe)]%0x3==0x1?0x4:0x3;let _0x41490c=0x0;_0x2216db['forEach']((_0x393cba,_0x3489fb)=>{const _0x400fd5=_0x2175b1;if(_0x3489fb%_0x2bccc2==0x0)_0x3007e6=[];_0x3007e6[_0x400fd5(0x2e6)]({'text':_0x393cba[_0x400fd5(0x2ac)]==_0x400fd5(0x2d8)?_0x400fd5(0x275):_0x400fd5(0x331)+_0x393cba['botID'],'callback_data':_0x393cba['botID']}),_0x3489fb%_0x2bccc2==0x0&&(_0x171996[_0x41490c]=_0x3007e6,_0x41490c++);}),tgBot[_0x2175b1(0x2ed)](_0x41db4c[_0x2175b1(0x1d0)]['id'],_0x2175b1(0x2da),{'reply_markup':{'inline_keyboard':_0x171996}})[_0x2175b1(0x1b5)](_0x5eeb4c=>{telegramError(_0x5eeb4c);}),tgBot['on'](_0x2175b1(0x27f),async _0x23ebd1=>{const _0x54ca73=_0x2175b1,_0x2b115d=_0x23ebd1[_0x54ca73(0x33c)],_0x5f4ac3=_0x23ebd1['message'];tgBot['answerCallbackQuery'](_0x23ebd1['id'])[_0x54ca73(0x28f)](async()=>{const _0x2865f9=_0x54ca73;_0x2b115d=='all'?(tgBot[_0x2865f9(0x2ed)](_0x5f4ac3[_0x2865f9(0x1d0)]['id'],_0x2865f9(0x2d4))[_0x2865f9(0x1b5)](_0x4d3bcd=>{telegramError(_0x4d3bcd);}),_0x2216db[_0x2865f9(0x1e9)](_0x1db987=>{const _0x4d915b=_0x2865f9;if(_0x1db987[_0x4d915b(0x2ac)]!=_0x4d915b(0x2d8))toggleBot(_0x1db987['botID'],toggleStatus(_0x1db987['botID']),_0x4d915b(0x212));})):(tgBot[_0x2865f9(0x2ed)](_0x5f4ac3[_0x2865f9(0x1d0)]['id'],_0x2865f9(0x225)+_0x2b115d)[_0x2865f9(0x1b5)](_0x5c7490=>{telegramError(_0x5c7490);}),toggleBot(_0x2b115d,toggleStatus(_0x2b115d),_0x2865f9(0x212)));}),tgBot[_0x54ca73(0x36d)](_0x54ca73(0x27f));});}}),tgBot[_0x305e25(0x2ce)](/\/portfolio/,_0x54a16d=>{const _0x1f7a9d=_0x305e25;if(!validateTelegram(_0x54a16d))return;tgBot[_0x1f7a9d(0x36d)](_0x1f7a9d(0x27f));const _0x58bd27=getEnabledBots();if(_0x58bd27[_0x1f7a9d(0x2fe)]==0x0)tgBot[_0x1f7a9d(0x2ed)](_0x54a16d['chat']['id'],_0x1f7a9d(0x283))[_0x1f7a9d(0x1b5)](_0x2e98c9=>{telegramError(_0x2e98c9);});else{if(_0x58bd27[_0x1f7a9d(0x2fe)]>0x1){let _0x5af1fe=[],_0x3406d0=[];const _0x58f199=_0x58bd27[_0x1f7a9d(0x2fe)]%0x4==0x0||_0x58bd27['length']%0x4==0x3||_0x58bd27[_0x1f7a9d(0x2fe)]%0x3==0x1?0x4:0x3;let _0x206ec4=0x0;_0x58bd27[_0x1f7a9d(0x1e9)]((_0x4f4db5,_0x406b02)=>{const _0x65f5f3=_0x1f7a9d;if(_0x406b02%_0x58f199==0x0)_0x3406d0=[];_0x3406d0[_0x65f5f3(0x2e6)]({'text':_0x65f5f3(0x331)+_0x4f4db5[_0x65f5f3(0x2ac)],'callback_data':_0x4f4db5[_0x65f5f3(0x2ac)]}),_0x406b02%_0x58f199==0x0&&(_0x5af1fe[_0x206ec4]=_0x3406d0,_0x206ec4++);}),tgBot['sendMessage'](_0x54a16d[_0x1f7a9d(0x1d0)]['id'],_0x1f7a9d(0x240),{'reply_markup':{'inline_keyboard':_0x5af1fe}})[_0x1f7a9d(0x1b5)](_0x7d7e1b=>{telegramError(_0x7d7e1b);}),tgBot['on']('callback_query',async _0x50587d=>{const _0x1e1815=_0x1f7a9d,_0x1a0039=_0x50587d['data'],_0x12e2a8=_0x50587d[_0x1e1815(0x36a)];tgBot[_0x1e1815(0x2ab)](_0x50587d['id'])[_0x1e1815(0x28f)](async()=>{const _0x508602=_0x1e1815;if(pid[_0x1a0039])pid[_0x1a0039][_0x508602(0x344)]({'function':_0x508602(0x2b2),'args':null});}),tgBot[_0x1e1815(0x36d)](_0x1e1815(0x27f));});}else{const _0x54c9e1=_0x58bd27[0x0][_0x1f7a9d(0x2ac)];if(pid[_0x54c9e1])pid[_0x54c9e1][_0x1f7a9d(0x344)]({'function':_0x1f7a9d(0x2b2),'args':null});}}}),tgBot['onText'](/\/update/,async _0x1a4f15=>{const _0x29c476=_0x305e25;if(!validateTelegram(_0x1a4f15))return;tgBot[_0x29c476(0x36d)](_0x29c476(0x27f)),await getMessages();if(!updateAvailable)tgBot[_0x29c476(0x2ed)](_0x1a4f15['chat']['id'],_0x29c476(0x1ef))[_0x29c476(0x1b5)](_0x46c891=>{telegramError(_0x46c891);});else!validInstallation?tgBot[_0x29c476(0x2ed)](_0x1a4f15['chat']['id'],_0x29c476(0x265))['catch'](_0x137fc2=>{telegramError(_0x137fc2);}):(tgBot[_0x29c476(0x2ed)](_0x1a4f15['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x29c476(0x1b5)](_0x54f70f=>{telegramError(_0x54f70f);}),tgBot['on'](_0x29c476(0x27f),async _0x3bdd88=>{const _0x1ac358=_0x29c476,_0x32146d=_0x3bdd88[_0x1ac358(0x33c)],_0x556ce7=_0x3bdd88['message'];tgBot[_0x1ac358(0x2ab)](_0x3bdd88['id'])[_0x1ac358(0x28f)](async()=>{const _0x5bed7a=_0x1ac358;_0x32146d==_0x5bed7a(0x1b9)&&(await tgBot[_0x5bed7a(0x2ed)](_0x556ce7[_0x5bed7a(0x1d0)]['id'],_0x5bed7a(0x31d))[_0x5bed7a(0x1b5)](_0x304d5c=>{telegramError(_0x304d5c);}),updateBB(_0x5bed7a(0x2b6))),_0x32146d=='no'&&await tgBot[_0x5bed7a(0x2ed)](_0x556ce7[_0x5bed7a(0x1d0)]['id'],_0x5bed7a(0x21b))[_0x5bed7a(0x1b5)](_0x441d76=>{telegramError(_0x441d76);});}),tgBot[_0x1ac358(0x36d)](_0x1ac358(0x27f));}));}),tgBot[_0x305e25(0x2ce)](/\/reinstall/,async _0x54cebf=>{const _0x2adcd3=_0x305e25;if(!validateTelegram(_0x54cebf))return;tgBot[_0x2adcd3(0x36d)]('callback_query'),!validInstallation?tgBot[_0x2adcd3(0x2ed)](_0x54cebf['chat']['id'],_0x2adcd3(0x244))['catch'](_0x46db1e=>{telegramError(_0x46db1e);}):(tgBot[_0x2adcd3(0x2ed)](_0x54cebf['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2adcd3(0x37a),'callback_data':_0x2adcd3(0x1b9)},{'text':'No','callback_data':'no'}]]}})[_0x2adcd3(0x1b5)](_0x218850=>{telegramError(_0x218850);}),tgBot['on'](_0x2adcd3(0x27f),async _0x1f917e=>{const _0x4525de=_0x2adcd3,_0x55e233=_0x1f917e[_0x4525de(0x33c)],_0x37ea92=_0x1f917e[_0x4525de(0x36a)];tgBot['answerCallbackQuery'](_0x1f917e['id'])[_0x4525de(0x28f)](async()=>{const _0x2963a6=_0x4525de;_0x55e233==_0x2963a6(0x1b9)&&(await tgBot['sendMessage'](_0x37ea92[_0x2963a6(0x1d0)]['id'],_0x2963a6(0x257))['catch'](_0x1d4c42=>{telegramError(_0x1d4c42);}),updateBB(_0x2963a6(0x1cb))),_0x55e233=='no'&&await tgBot[_0x2963a6(0x2ed)](_0x37ea92['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x2963a6(0x1b5)](_0x83cd8b=>{telegramError(_0x83cd8b);});}),tgBot[_0x4525de(0x36d)](_0x4525de(0x27f));}));}),tgBot['onText'](/\/toggle/,_0x2318ce=>{const _0x2e6060=_0x305e25;if(!validateTelegram(_0x2318ce))return;tgBot[_0x2e6060(0x36d)](_0x2e6060(0x27f));const _0x4adef4=getBotsWithMode();if(_0x4adef4[_0x2e6060(0x2fe)]==0x0)tgBot[_0x2e6060(0x2ed)](_0x2318ce['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x23897d=>{telegramError(_0x23897d);});else{let _0x3e4764=[],_0x210626=[];const _0x12d175=0x2;let _0x30c5b1=0x0;_0x4adef4[_0x2e6060(0x1e9)]((_0x568fc5,_0x476b0c)=>{const _0x3f6216=_0x2e6060;if(_0x476b0c%_0x12d175==0x0)_0x210626=[];_0x210626[_0x3f6216(0x2e6)]({'text':_0x3f6216(0x331)+_0x568fc5[_0x3f6216(0x2ac)]+'\x20('+_0x568fc5['mode']+')','callback_data':_0x568fc5[_0x3f6216(0x2ac)]}),_0x476b0c%_0x12d175==0x0&&(_0x3e4764[_0x30c5b1]=_0x210626,_0x30c5b1++);}),tgBot[_0x2e6060(0x2ed)](_0x2318ce['chat']['id'],_0x2e6060(0x324),{'reply_markup':{'inline_keyboard':_0x3e4764}})['catch'](_0x16e5f4=>{telegramError(_0x16e5f4);}),tgBot['on'](_0x2e6060(0x27f),async _0x29cc06=>{const _0x447028=_0x2e6060,_0x55b5c3=_0x29cc06[_0x447028(0x33c)],_0x5a87e3=_0x29cc06[_0x447028(0x36a)];tgBot[_0x447028(0x2ab)](_0x29cc06['id'])[_0x447028(0x28f)](async()=>{const _0x2ac029=_0x447028,_0x30d60b=_0x4adef4[_0x2ac029(0x20f)](_0x297b15=>_0x297b15[_0x2ac029(0x2ac)]==_0x55b5c3),_0x26785d=_0x30d60b['mode']==_0x2ac029(0x2db)?_0x2ac029(0x33f):_0x2ac029(0x2db);tgBot[_0x2ac029(0x2ed)](_0x5a87e3[_0x2ac029(0x1d0)]['id'],_0x2ac029(0x1d8)+_0x55b5c3+_0x2ac029(0x303)+_0x26785d+_0x2ac029(0x2f0))[_0x2ac029(0x1b5)](_0x2dbbd5=>{telegramError(_0x2dbbd5);}),toggleBotMode(_0x55b5c3);}),tgBot[_0x447028(0x36d)](_0x447028(0x27f));});}}),tgBot[_0x305e25(0x2ce)](/\/names/,_0x4dd8d9=>{const _0x2b1dd0=_0x305e25;if(!validateTelegram(_0x4dd8d9))return;let _0x5f5722='';config[_0x2b1dd0(0x1e9)](_0x43fa7b=>{const _0x1b28e2=_0x2b1dd0;_0x5f5722+='Bot\x20'+_0x43fa7b['botID']+':\x20'+_0x43fa7b[_0x1b28e2(0x2e3)]+'\x0a';}),tgBot[_0x2b1dd0(0x2ed)](_0x4dd8d9['chat']['id'],_0x5f5722,{'parse_mode':_0x2b1dd0(0x304)})['catch'](_0x147f77=>{telegramError(_0x147f77);});}),tgBot[_0x305e25(0x2ce)](/\/disable/,_0x41ce04=>{const _0x2da36a=_0x305e25;if(!validateTelegram(_0x41ce04))return;tgBot['sendMessage'](_0x41ce04[_0x2da36a(0x1d0)]['id'],'Notifications\x20disabled')[_0x2da36a(0x1b5)](_0x564e61=>{telegramError(_0x564e61);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x305e25(0x2ce)](/\/help/,_0x55eb3d=>{const _0x23a44f=_0x305e25;if(!validateTelegram(_0x55eb3d))return;tgBot[_0x23a44f(0x2ed)](_0x55eb3d[_0x23a44f(0x1d0)]['id'],_0x464ea3)[_0x23a44f(0x1b5)](_0x3728a3=>{telegramError(_0x3728a3);});}),tgBot['on'](_0x305e25(0x20d),_0x33bbc7=>{const _0x1ecc1a=_0x305e25;_0x33bbc7[_0x1ecc1a(0x2f4)]()[_0x1ecc1a(0x273)](_0x1ecc1a(0x243))&&(logger[_0x1ecc1a(0x340)](_0x1ecc1a(0x2a5)),tgBot[_0x1ecc1a(0x32f)](),tgBot=null,io['to'](_0x1ecc1a(0x26c))[_0x1ecc1a(0x219)](_0x1ecc1a(0x1c0),_0x1ecc1a(0x2a5)));}),process[_0x305e25(0x1b8)]('SIGINT',()=>{const _0x5a74f1=_0x305e25;if(tgBot)tgBot[_0x5a74f1(0x32f)]();process[_0x5a74f1(0x24e)](0x1);}),process['once'](_0x305e25(0x32e),()=>{const _0x64c4ca=_0x305e25;if(tgBot)tgBot[_0x64c4ca(0x32f)]();process['exit'](0x1);});}}function disableTelegram(){const _0x2fc2c3=_0x51c697;tgBot&&(tgBot[_0x2fc2c3(0x32f)](),tgBot=null);}function sendTelegram(_0x463f77,_0x4799b5){const _0x4e89d6=_0x51c697;if(settings[_0x4e89d6(0x230)]){if(settings[_0x4e89d6(0x2b7)]=='all'||(_0x4799b5['type']==_0x4e89d6(0x2fd)||_0x4799b5['type']=='warning'||_0x4799b5[_0x4e89d6(0x31e)]=='success')&&settings[_0x4e89d6(0x2b7)]==_0x4e89d6(0x2f2)||_0x4799b5[_0x4e89d6(0x31e)]==_0x4e89d6(0x26e)&&settings['telegramEvents']==_0x4e89d6(0x28a)){if(tgBot&&settings[_0x4e89d6(0x1ed)]){if(_0x4799b5[_0x4e89d6(0x354)])tgBot[_0x4e89d6(0x2ed)](settings[_0x4e89d6(0x1ed)],_0x4799b5['botname']+'\x20>\x20'+_0x4799b5['event'])['catch'](_0x27c64a=>{telegramError(_0x27c64a);});else tgBot[_0x4e89d6(0x2ed)](settings[_0x4e89d6(0x1ed)],'Bot\x20'+_0x463f77+'\x20>\x20'+_0x4799b5[_0x4e89d6(0x221)])[_0x4e89d6(0x1b5)](_0x25fca1=>{telegramError(_0x25fca1);});}}}}async function sendTelegramMsg(_0x5bbc81,_0x5f012b=_0x51c697(0x304)){const _0x35c254=_0x51c697;return settings[_0x35c254(0x230)]&&tgBot&&settings[_0x35c254(0x1ed)]?(await tgBot[_0x35c254(0x2ed)](settings[_0x35c254(0x1ed)],_0x5bbc81,{'parse_mode':_0x5f012b})[_0x35c254(0x1b5)](_0x4beec7=>{telegramError(_0x4beec7);}),!![]):![];}function getDeviceWithIp(_0xe01334){const _0x3f57d8=_0x51c697;return devices[_0x3f57d8(0x20f)](_0xc2ea15=>_0xc2ea15['ip']===_0xe01334);}function temporaryAccess2FA(_0x105581,_0x573e9b){const _0x119e4d=_0x51c697;let _0xa1e1e3=new Date(),_0x152901=![];if(lastIpApproval){if(_0xa1e1e3-lastIpApproval<0x1388)_0x152901=!![];}lastIpApproval=new Date();if(_0x152901)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x119e4d(0x27f)),tgBot['sendMessage'](settings[_0x119e4d(0x1ed)],_0x119e4d(0x35d)+normalizeIP(_0x573e9b)[_0x119e4d(0x203)]+_0x119e4d(0x1fd),{'parse_mode':_0x119e4d(0x304),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x119e4d(0x378),'callback_data':'15'},{'text':_0x119e4d(0x223),'callback_data':'30'},{'text':_0x119e4d(0x2cb),'callback_data':'reject'}]]}})[_0x119e4d(0x1b5)](_0x471550=>{telegramError(_0x471550);}),tgBot['on']('callback_query',async _0x40278d=>{const _0x4c8290=_0x119e4d,_0x50ac72=_0x40278d[_0x4c8290(0x33c)],_0x483b07=_0x40278d[_0x4c8290(0x36a)];tgBot['answerCallbackQuery'](_0x40278d['id'])[_0x4c8290(0x28f)](async()=>{const _0x1ed554=_0x4c8290;devices[_0x105581]['telegramIpApproval']={'clientip':_0x573e9b,'timestamp':new Date()['getTime'](),'expiry':_0x50ac72},_0x50ac72!=_0x1ed554(0x2cb)?(await tgBot[_0x1ed554(0x2ed)](_0x483b07[_0x1ed554(0x1d0)]['id'],'Access\x20enabled\x20for\x20'+_0x50ac72+_0x1ed554(0x1b7),{'parse_mode':_0x1ed554(0x304)})[_0x1ed554(0x1b5)](_0x5e0f57=>{telegramError(_0x5e0f57);}),io['to'](_0x105581)[_0x1ed554(0x219)](_0x1ed554(0x2b8),{'access':{'allow':![],'reason':_0x1ed554(0x337),'token':null}})):(await tgBot['sendMessage'](_0x483b07[_0x1ed554(0x1d0)]['id'],_0x1ed554(0x2f1))[_0x1ed554(0x1b5)](_0x3d4d78=>{telegramError(_0x3d4d78);}),io['to'](_0x105581)[_0x1ed554(0x219)]('status',{'access':{'allow':![],'reason':_0x1ed554(0x285),'token':null}}));}),tgBot[_0x4c8290(0x36d)]('callback_query');}));}function loginAccess2FA(_0x2ec2c7,_0x3143){const _0x18fa22=_0x51c697;tgBot&&settings['telegramChatId']&&(tgBot[_0x18fa22(0x36d)](_0x18fa22(0x27f)),tgBot['sendMessage'](settings[_0x18fa22(0x1ed)],_0x18fa22(0x368)+normalizeIP(_0x3143)[_0x18fa22(0x203)]+_0x18fa22(0x1fd),{'parse_mode':_0x18fa22(0x304),'reply_markup':{'inline_keyboard':[[{'text':_0x18fa22(0x36b),'callback_data':loginExpiry},{'text':_0x18fa22(0x2cb),'callback_data':_0x18fa22(0x2cb)}]]}})[_0x18fa22(0x1b5)](_0x22a56e=>{telegramError(_0x22a56e);}),tgBot['on'](_0x18fa22(0x27f),async _0x2318a9=>{const _0xa9b101=_0x18fa22,_0x16eaf9=_0x2318a9['data'],_0x239336=_0x2318a9[_0xa9b101(0x36a)];tgBot[_0xa9b101(0x2ab)](_0x2318a9['id'])[_0xa9b101(0x28f)](async()=>{const _0x255922=_0xa9b101;devices[_0x2ec2c7][_0x255922(0x276)]={'clientip':_0x3143,'timestamp':new Date()[_0x255922(0x2cf)](),'expiry':_0x16eaf9},_0x16eaf9!=_0x255922(0x2cb)?(await tgBot[_0x255922(0x2ed)](_0x239336['chat']['id'],_0x255922(0x231),{'parse_mode':'HTML'})['catch'](_0x414d56=>{telegramError(_0x414d56);}),io['to'](_0x2ec2c7)[_0x255922(0x219)]('status',{'access':{'allow':![],'reason':_0x255922(0x337),'token':null}})):(await tgBot[_0x255922(0x2ed)](_0x239336[_0x255922(0x1d0)]['id'],'Login\x20rejected')[_0x255922(0x1b5)](_0x39f3a3=>{telegramError(_0x39f3a3);}),io['to'](_0x2ec2c7)[_0x255922(0x219)](_0x255922(0x2b8),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0xa9b101(0x36d)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xdbfdae=_0x51c697;return dbConfig[_0xdbfdae(0x2a4)](_0xdbfdae(0x253))[_0xdbfdae(0x22e)](_0xdbfdae(0x2ac))[_0xdbfdae(0x1df)]({'status':'enabled'})[_0xdbfdae(0x2f6)]()||[];}function getDisabledBots(){const _0x1444cc=_0x51c697;return dbConfig['get']('bots')[_0x1444cc(0x22e)]('botID')[_0x1444cc(0x1df)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x2c3038){const _0x6f873e=_0x51c697;let _0x24e0f6={};const _0x548705=configpath+_0x6f873e(0x2b3)+_0x2c3038+_0x6f873e(0x271),_0x758069=fs['existsSync'](_0x548705);if(_0x758069){const _0x2b5d66=fs[_0x6f873e(0x2a7)](_0x548705);try{const _0x231ca5=JSON[_0x6f873e(0x266)](_0x2b5d66),_0x5bb16f=_0x231ca5?_0x231ca5[_0x6f873e(0x25f)][0x0]['headless']:![];_0x24e0f6[_0x6f873e(0x22f)]=_0x5bb16f?_0x6f873e(0x2db):'manual',_0x24e0f6[_0x6f873e(0x2e3)]=_0x231ca5?_0x231ca5[_0x6f873e(0x25f)][0x0][_0x6f873e(0x2e3)]:'Bot\x20'+_0x2c3038;}catch(_0x927d27){_0x24e0f6[_0x6f873e(0x22f)]=_0x6f873e(0x33f),_0x24e0f6[_0x6f873e(0x2e3)]=_0x6f873e(0x331)+_0x2c3038;}}else _0x24e0f6['mode']=_0x6f873e(0x33f),_0x24e0f6[_0x6f873e(0x2e3)]=_0x6f873e(0x331)+_0x2c3038;return _0x24e0f6;}function getBotsWithMode(){const _0x2b7d2e=_0x51c697,_0x28dba0=dbConfig['get']('bots')['sortBy'](_0x2b7d2e(0x2ac))[_0x2b7d2e(0x2f6)]()||[];return _0x28dba0['forEach'](_0x3021bb=>{const _0x544548=_0x2b7d2e;let _0x56ff58=getBotAttributes(_0x3021bb[_0x544548(0x2ac)]);_0x3021bb[_0x544548(0x22f)]=_0x56ff58['mode'];}),_0x28dba0;}function getBotExchanges(){const _0x29472f=_0x51c697;let _0x1c8d49=[];const _0x5b88bb=dbConfig[_0x29472f(0x2a4)](_0x29472f(0x253))[_0x29472f(0x22e)]('botID')[_0x29472f(0x2f6)]()||[];_0x5b88bb[_0x29472f(0x1e9)](_0x122e65=>{const _0x4d58f5=_0x29472f;if(_0x122e65['status']==_0x4d58f5(0x251)){const _0x3dbe31=configpath+_0x4d58f5(0x2b3)+_0x122e65['botID']+_0x4d58f5(0x271),_0x188a06=fs[_0x4d58f5(0x1e6)](_0x3dbe31);let _0x10a5f7;if(_0x188a06){const _0x54047b=fs[_0x4d58f5(0x2a7)](_0x3dbe31);try{const _0x31a08b=JSON[_0x4d58f5(0x266)](_0x54047b);_0x10a5f7=_0x31a08b?_0x31a08b[_0x4d58f5(0x25f)][0x0]['exchange']:null;}catch(_0x5b4b62){}}if(_0x10a5f7)_0x1c8d49[_0x4d58f5(0x2e6)](_0x10a5f7);}});const _0x12538b=[...new Set(_0x1c8d49)][_0x29472f(0x1e0)]();return _0x12538b;}async function initUser(){const _0x4ef992=_0x51c697;if(!settings[_0x4ef992(0x317)]){const _0x55ffc3=uuidRandom();mixpanel[_0x4ef992(0x23a)](_0x55ffc3),updateSetting('userid',_0x55ffc3);}}async function initSecure(){const _0x5b38e3=_0x51c697;let _0x5a5465=getSecure();if(!_0x5a5465[_0x5b38e3(0x25d)](_0x5b38e3(0x1f5))){let _0x274475=await generateKeys();_0x5a5465[_0x5b38e3(0x1d3)]=_0x274475[_0x5b38e3(0x1d3)],_0x5a5465[_0x5b38e3(0x281)]=_0x274475[_0x5b38e3(0x281)],_0x5a5465[_0x5b38e3(0x1f5)]=crypto['randomBytes'](0x20)['toString'](_0x5b38e3(0x1e8));;storeSecure(_0x5a5465);}}function getSettings(){const _0x124acd=_0x51c697;return dbSettings[_0x124acd(0x2a4)]('settings')[_0x124acd(0x2f6)]()||{};}function getSecure(){const _0x35ac6e=_0x51c697;return dbSecure['get']('secure')[_0x35ac6e(0x2f6)]()||{};}function getBlacklist(){const _0x367f55=_0x51c697;return dbSecure[_0x367f55(0x2a4)](_0x367f55(0x237))[_0x367f55(0x2f6)]()||[];}function broadcastToBots(_0xb566de,_0x36d619){const _0x35a0b2=_0x51c697;config[_0x35a0b2(0x1e9)](_0x58ad53=>{const _0xcfa07f=_0x35a0b2;if(_0x58ad53[_0xcfa07f(0x2b8)]==_0xcfa07f(0x251)&&_0x58ad53['live']==_0xcfa07f(0x216)){if(pid[_0x58ad53[_0xcfa07f(0x2ac)]])pid[_0x58ad53[_0xcfa07f(0x2ac)]][_0xcfa07f(0x344)]({[_0xb566de]:_0x36d619});}});}function storeSettings(_0x59c762,_0x45aa68=![]){const _0x42a85f=_0x51c697;_0x59c762={...settings,..._0x59c762};if(_0x45aa68&&_0x59c762[_0x42a85f(0x2b4)]!=_0x42a85f(0x2a6)&&_0x59c762[_0x42a85f(0x2b4)]!='***'&&_0x59c762[_0x42a85f(0x2b4)]!=''){const _0x500cc1=crypt['decrypt'](secure[_0x42a85f(0x281)],_0x59c762[_0x42a85f(0x2b4)])[_0x42a85f(0x36a)][_0x42a85f(0x347)]('@')[0x0],_0x167ae0=bcrypt[_0x42a85f(0x269)](_0x500cc1,saltRounds);_0x59c762={..._0x59c762,'bbPassword':_0x167ae0};}if(_0x45aa68&&_0x59c762[_0x42a85f(0x355)]!=_0x42a85f(0x2a6)&&_0x59c762[_0x42a85f(0x355)]!=_0x42a85f(0x330)&&_0x59c762[_0x42a85f(0x355)]!=''){const _0x45ae19=crypt['decrypt'](secure[_0x42a85f(0x281)],_0x59c762[_0x42a85f(0x355)])[_0x42a85f(0x36a)][_0x42a85f(0x347)]('@')[0x0];_0x59c762={..._0x59c762,'telegramToken':_0x45ae19};}const _0x80a464=_0x59c762['telegramToken']!=_0x42a85f(0x2a6)&&_0x59c762['telegramToken']!=settings['telegramToken']||_0x59c762[_0x42a85f(0x339)]!=settings[_0x42a85f(0x339)],_0x1f4bcf=_0x59c762[_0x42a85f(0x355)]==''||_0x59c762[_0x42a85f(0x339)]=='';if(_0x80a464)_0x59c762['telegramEvents']=_0x42a85f(0x2d8);for(const [_0x28fa57,_0x2bab1a]of Object[_0x42a85f(0x34f)](_0x59c762)){if(_0x28fa57==_0x42a85f(0x355)&&_0x2bab1a==_0x42a85f(0x2a6)){_0x59c762[_0x42a85f(0x355)]=settings[_0x42a85f(0x355)];continue;};if(_0x28fa57==_0x42a85f(0x2b4)&&_0x2bab1a==_0x42a85f(0x2a6)){_0x59c762[_0x42a85f(0x2b4)]=settings[_0x42a85f(0x2b4)];continue;};dbSettings[_0x42a85f(0x379)](_0x42a85f(0x274)+_0x28fa57,_0x2bab1a)['write']();}settings=_0x59c762,io['to'](_0x42a85f(0x26c))[_0x42a85f(0x219)](_0x42a85f(0x259),cleanSettings()),broadcastToBots(_0x42a85f(0x22d),settings[_0x42a85f(0x22d)]);if(_0x80a464&&!_0x1f4bcf)initTelegram();if(_0x80a464&&_0x1f4bcf)disableTelegram();getAllClients()[_0x42a85f(0x1e9)](_0x24b4d5=>{const _0x4acdc6=_0x42a85f;getSocket(_0x24b4d5['id'])['emit'](_0x4acdc6(0x2b8),{'access':{'allow':![],'reason':_0x4acdc6(0x337),'token':null}});});}function updateSetting(_0x5164f5,_0x5e05f2){const _0x596c6c=_0x51c697;dbSettings[_0x596c6c(0x379)](_0x596c6c(0x274)+_0x5164f5,_0x5e05f2)[_0x596c6c(0x315)](),settings=getSettings(),io['to'](_0x596c6c(0x26c))['emit'](_0x596c6c(0x259),cleanSettings());}function storeSecure(_0x1d5555){const _0x55dc85=_0x51c697;dbSecure[_0x55dc85(0x2a4)]('secure')[_0x55dc85(0x2e6)](_0x1d5555)[_0x55dc85(0x315)](),secure=_0x1d5555;}function addBlacklist(_0x21e8af){const _0x10aa59=_0x51c697;cleanBlacklist();let _0x5ad384;devices[_0x21e8af][_0x10aa59(0x372)]?_0x5ad384=Math[_0x10aa59(0x26a)](devices[_0x21e8af][_0x10aa59(0x372)][_0x10aa59(0x245)],loginExpiry):_0x5ad384=loginExpiry,dbSecure[_0x10aa59(0x2a4)]('blacklist')[_0x10aa59(0x2e6)]({'expiry':new Date()[_0x10aa59(0x2cf)]()+_0x5ad384*0x3c*0x3e8,'token':devices[_0x21e8af][_0x10aa59(0x299)][_0x10aa59(0x295)]})[_0x10aa59(0x315)](),blacklist=dbSecure[_0x10aa59(0x2a4)]('blacklist')[_0x10aa59(0x2f6)]();}function cleanBlacklist(){const _0x13e018=_0x51c697;let _0x342740=dbSecure[_0x13e018(0x2a4)]('blacklist')[_0x13e018(0x2dc)]()[_0x13e018(0x2f6)](),_0x38d6ce=new Date()[_0x13e018(0x2cf)]();_0x342740['forEach'](_0x54359f=>{const _0x47d7c5=_0x13e018;_0x54359f[_0x47d7c5(0x245)]<_0x38d6ce&&dbSecure[_0x47d7c5(0x2a4)](_0x47d7c5(0x237))[_0x47d7c5(0x1d1)]({'expiry':_0x54359f[_0x47d7c5(0x245)]})[_0x47d7c5(0x315)]();});}function initStates(){const _0x27cbe6=_0x51c697;let _0x4cd458=getConfiguration();_0x4cd458[_0x27cbe6(0x1e9)](_0x51e418=>{const _0x5c9ecb=_0x27cbe6;_0x51e418[_0x5c9ecb(0x328)]='stopped';}),storeConfiguration(_0x4cd458);}function onKeys(){const _0x2b72f7=new RSA();return new Promise(_0x2c5224=>{const _0x5725f2=_0x1885;_0x2b72f7[_0x5725f2(0x26d)]()[_0x5725f2(0x28f)](_0x3bace2=>{_0x2c5224(_0x3bace2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3ae635=_0x51c697;let _0x1afd08=getSettings(),_0x2836a5=![];!_0x1afd08['hasOwnProperty']('lastmsgtelegram')&&(_0x1afd08[_0x3ae635(0x1d4)]=0x0,_0x2836a5=!![]);!_0x1afd08['hasOwnProperty']('lastmsgemitted')&&(_0x1afd08[_0x3ae635(0x2e1)]=0x0,_0x2836a5=!![]);!_0x1afd08['hasOwnProperty'](_0x3ae635(0x222))&&(_0x1afd08[_0x3ae635(0x222)]=_0x3ae635(0x373),_0x2836a5=!![]);if(_0x2836a5)storeSettings(_0x1afd08);}function storeConfiguration(_0xa7f3d6){const _0x5cc0ce=_0x51c697;dbConfig[_0x5cc0ce(0x2a4)](_0x5cc0ce(0x253))['remove']()[_0x5cc0ce(0x315)](),_0xa7f3d6['forEach'](_0x3d5b2d=>{delete _0x3d5b2d['mode'];}),dbConfig[_0x5cc0ce(0x2a4)](_0x5cc0ce(0x253))[_0x5cc0ce(0x2e6)](..._0xa7f3d6)[_0x5cc0ce(0x315)](),config=_0xa7f3d6;}function resetPassword(){const _0x18a745=_0x51c697;tgBot&&settings[_0x18a745(0x1ed)]&&(tgBot[_0x18a745(0x36d)](_0x18a745(0x27f)),tgBot[_0x18a745(0x2ed)](settings['telegramChatId'],_0x18a745(0x1c8),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x18a745(0x1b9),'callback_data':_0x18a745(0x1b9)},{'text':'no','callback_data':'no'}]]}})[_0x18a745(0x1b5)](_0x1f5ebf=>{telegramError(_0x1f5ebf);}),tgBot['on'](_0x18a745(0x27f),async _0x757b1c=>{const _0x3b74f2=_0x18a745,_0x4e47b4=_0x757b1c[_0x3b74f2(0x33c)],_0x108532=_0x757b1c[_0x3b74f2(0x36a)];tgBot[_0x3b74f2(0x2ab)](_0x757b1c['id'])[_0x3b74f2(0x28f)](async()=>{const _0x1dec8e=_0x3b74f2;if(_0x4e47b4!='no'){const _0x24eb38=0xf,_0x1774d5=_0x1dec8e(0x1c1),_0x3e3268=Array[_0x1dec8e(0x1dc)](crypto[_0x1dec8e(0x363)](new Uint32Array(_0x24eb38)))[_0x1dec8e(0x341)](_0x4d86f9=>_0x1774d5[_0x4d86f9%_0x1774d5[_0x1dec8e(0x2fe)]])[_0x1dec8e(0x24c)](''),_0x124115=bcrypt[_0x1dec8e(0x269)](_0x3e3268,saltRounds);storeSettings({'bbPassword':_0x124115}),await tgBot[_0x1dec8e(0x2ed)](_0x108532[_0x1dec8e(0x1d0)]['id'],_0x1dec8e(0x2d3)+_0x3e3268,{'parse_mode':_0x1dec8e(0x304)})[_0x1dec8e(0x1b5)](_0x1bb66b=>{telegramError(_0x1bb66b);});}else await tgBot[_0x1dec8e(0x2ed)](_0x108532[_0x1dec8e(0x1d0)]['id'],_0x1dec8e(0x20c))['catch'](_0x3a637e=>{telegramError(_0x3a637e);});}),tgBot[_0x3b74f2(0x36d)](_0x3b74f2(0x27f));}));}async function confirmRestore(_0x5a47f9,_0x1b23d6){const _0x44ac08=_0x51c697;io['to'](_0x44ac08(0x26c))[_0x44ac08(0x219)](_0x44ac08(0x1c0),_0x44ac08(0x351),'success'),tgBot&&settings['telegramChatId']&&(tgBot[_0x44ac08(0x36d)](_0x44ac08(0x27f)),await tgBot[_0x44ac08(0x2ed)](settings[_0x44ac08(0x1ed)],_0x44ac08(0x2e9),{'parse_mode':_0x44ac08(0x304),'reply_markup':{'inline_keyboard':[[{'text':_0x44ac08(0x1b9),'callback_data':_0x44ac08(0x1b9)},{'text':'no','callback_data':'no'}]]}})[_0x44ac08(0x1b5)](_0x4edd6e=>{telegramError(_0x4edd6e);}),tgBot['on'](_0x44ac08(0x27f),async _0x5b3b69=>{const _0x21087b=_0x44ac08,_0x1bbf43=_0x5b3b69[_0x21087b(0x33c)],_0x53f01d=_0x5b3b69['message'];tgBot['answerCallbackQuery'](_0x5b3b69['id'])[_0x21087b(0x28f)](async()=>{const _0x8dc26e=_0x21087b;_0x1bbf43==_0x8dc26e(0x1b9)?(await tgBot[_0x8dc26e(0x2ed)](_0x53f01d[_0x8dc26e(0x1d0)]['id'],_0x8dc26e(0x261),{'parse_mode':_0x8dc26e(0x304)})[_0x8dc26e(0x1b5)](_0x247f46=>{telegramError(_0x247f46);}),unzipFile(_0x5a47f9,_0x1b23d6)):(logger[_0x8dc26e(0x2bf)]('Restore\x20process\x20aborted'),await tgBot[_0x8dc26e(0x2ed)](_0x53f01d[_0x8dc26e(0x1d0)]['id'],_0x8dc26e(0x2cd))['catch'](_0x1b34a5=>{telegramError(_0x1b34a5);}));}),tgBot['removeListener'](_0x21087b(0x27f));}));}function getServerTime(){const _0x32dc38=_0x51c697,_0x54be38=new Date();return _0x54be38[_0x32dc38(0x248)]()+'/'+(_0x54be38[_0x32dc38(0x325)]()+0x1)[_0x32dc38(0x2f4)]()[_0x32dc38(0x1b4)](0x2,'0')+'/'+_0x54be38['getDate']()[_0x32dc38(0x2f4)]()[_0x32dc38(0x1b4)](0x2,'0')+'\x20'+_0x54be38[_0x32dc38(0x290)]()['toString']()[_0x32dc38(0x1b4)](0x2,'0')+':'+_0x54be38[_0x32dc38(0x2af)]()[_0x32dc38(0x2f4)]()[_0x32dc38(0x1b4)](0x2,'0')+':'+_0x54be38[_0x32dc38(0x23b)]()[_0x32dc38(0x2f4)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x18dcee=_0x51c697,_0x4303d2=shiftedTime();return _0x4303d2[_0x18dcee(0x248)]()+'/'+(_0x4303d2[_0x18dcee(0x325)]()+0x1)[_0x18dcee(0x2f4)]()[_0x18dcee(0x1b4)](0x2,'0')+'/'+_0x4303d2[_0x18dcee(0x2eb)]()[_0x18dcee(0x2f4)]()[_0x18dcee(0x1b4)](0x2,'0')+'\x20'+_0x4303d2[_0x18dcee(0x290)]()[_0x18dcee(0x2f4)]()[_0x18dcee(0x1b4)](0x2,'0')+':'+_0x4303d2[_0x18dcee(0x2af)]()[_0x18dcee(0x2f4)]()['padStart'](0x2,'0')+':'+_0x4303d2[_0x18dcee(0x23b)]()['toString']()[_0x18dcee(0x1b4)](0x2,'0');}function shiftedTime(){const _0xeef5c4=_0x51c697,_0x390b4c=new Date();let _0x26f467=_0x390b4c;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x26f467=fns[_0xeef5c4(0x1af)](_0x390b4c,{'hours':settings['timeshift']});return _0x26f467;}function startScheduler(){const _0x2a9bb3=_0x51c697,_0x320f0b=new Date()[_0x2a9bb3(0x2ba)](),_0x5e6d03=shiftedTime()[_0x2a9bb3(0x290)]();_0x5e6d03==0x4&&backupConfigFiles();_0x5e6d03==0x0&&rotateLogFiles();_0x320f0b%0x6==0x0&&triggerAnalytics();_0x320f0b%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2c71ac){const _0x1bf54f=_0x51c697;logger[_0x1bf54f(0x2bf)](_0x1bf54f(0x1c2)+_0x2c71ac);const _0x2fa358=getBotsWithMode();_0x2fa358[_0x1bf54f(0x2fe)]>0x0?confirmRestore(configbackuppath,_0x2c71ac):unzipFile(configbackuppath,_0x2c71ac);}async function getBackupFiles(_0x5e6bdc=null){const _0xabdcdd=_0x51c697;let _0x3b65f8=[],_0xf86a48=fs[_0xabdcdd(0x2e4)](configbackuppath,{'withFileTypes':!![]});_0xf86a48[_0xabdcdd(0x1e0)]((_0x2a8c7c,_0x89810d)=>_0x2a8c7c[_0xabdcdd(0x2e5)]>_0x89810d[_0xabdcdd(0x2e5)]?0x1:_0x89810d[_0xabdcdd(0x2e5)]<_0x2a8c7c[_0xabdcdd(0x2e5)]?-0x1:0x0),_0xf86a48['forEach'](_0x26cc4b=>{const _0x3889d3=_0xabdcdd;if(!_0x26cc4b[_0x3889d3(0x217)]()){const _0x3136fc=formatDate(fs[_0x3889d3(0x272)](configbackuppath+_0x26cc4b['name'])[_0x3889d3(0x1c9)]);_0x3b65f8[_0x3889d3(0x2e6)]({'name':_0x26cc4b[_0x3889d3(0x2e5)],'mtime':_0x3136fc});}});if(_0x5e6bdc)io['to'](_0x5e6bdc)[_0xabdcdd(0x219)](_0xabdcdd(0x34b),_0x3b65f8);else return _0x3b65f8;}async function backupConfigFiles(){const _0x1fe0d9=_0x51c697;await zipFiles(_0x1fe0d9(0x278));let _0x1f1bc3=fs[_0x1fe0d9(0x2e4)](configbackuppath,{'withFileTypes':!![]});_0x1f1bc3[_0x1fe0d9(0x1e0)]((_0x538c87,_0x45aa4b)=>_0x538c87[_0x1fe0d9(0x2e5)]<_0x45aa4b[_0x1fe0d9(0x2e5)]?0x1:_0x45aa4b[_0x1fe0d9(0x2e5)]<_0x538c87['name']?-0x1:0x0),_0x1f1bc3[_0x1fe0d9(0x1e9)](_0x2584ca=>{const _0x35ad5a=_0x1fe0d9;if(_0x2584ca[_0x35ad5a(0x2e5)]==_0x35ad5a(0x202))fs[_0x35ad5a(0x2b0)](configbackuppath+_0x2584ca[_0x35ad5a(0x2e5)],configbackuppath+_0x35ad5a(0x228));if(_0x2584ca[_0x35ad5a(0x2e5)]==_0x35ad5a(0x2ee))fs['copyFileSync'](configbackuppath+_0x2584ca[_0x35ad5a(0x2e5)],configbackuppath+_0x35ad5a(0x202));if(_0x2584ca[_0x35ad5a(0x2e5)]==_0x35ad5a(0x319))fs[_0x35ad5a(0x2b0)](configbackuppath+_0x2584ca[_0x35ad5a(0x2e5)],configbackuppath+_0x35ad5a(0x2ee));if(_0x2584ca['name']==_0x35ad5a(0x345))fs[_0x35ad5a(0x2b0)](configbackuppath+_0x2584ca[_0x35ad5a(0x2e5)],configbackuppath+_0x35ad5a(0x319));if(_0x2584ca[_0x35ad5a(0x2e5)]=='backup-full-000.zip')fs['copyFileSync'](configbackuppath+_0x2584ca[_0x35ad5a(0x2e5)],configbackuppath+_0x35ad5a(0x345));}),fs[_0x1fe0d9(0x2b0)](zippath+_0x1fe0d9(0x23d),configbackuppath+_0x1fe0d9(0x27b));}function rotateLogFiles(){const _0x30a7dc=_0x51c697,_0x1b2327=fs[_0x30a7dc(0x272)](logspath+_0x30a7dc(0x34c)),_0x374d65=_0x1b2327[_0x30a7dc(0x2cc)]/0x400;if(_0x374d65>0x32){let _0x443fb8=fs[_0x30a7dc(0x2e4)](logspath,{'withFileTypes':!![]});_0x443fb8[_0x30a7dc(0x1e0)]((_0x477273,_0x237ff5)=>_0x477273[_0x30a7dc(0x2e5)]<_0x237ff5[_0x30a7dc(0x2e5)]?0x1:_0x237ff5[_0x30a7dc(0x2e5)]<_0x477273[_0x30a7dc(0x2e5)]?-0x1:0x0),_0x443fb8['forEach'](_0x4da637=>{const _0x3faafe=_0x30a7dc;if(_0x4da637[_0x3faafe(0x2e5)]==_0x3faafe(0x21d))fs[_0x3faafe(0x2b0)](logspath+_0x4da637[_0x3faafe(0x2e5)],logspath+_0x3faafe(0x280));if(_0x4da637[_0x3faafe(0x2e5)]==_0x3faafe(0x2d7))fs[_0x3faafe(0x2b0)](logspath+_0x4da637['name'],logspath+_0x3faafe(0x21d));_0x4da637[_0x3faafe(0x2e5)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x4da637[_0x3faafe(0x2e5)],logspath+_0x3faafe(0x2d7)),fs[_0x3faafe(0x1ce)](logspath+_0x4da637[_0x3faafe(0x2e5)],''));});}}async function zipFiles(_0x362f7d){const _0x5dbd85=_0x51c697;let _0x29f7df;if(_0x362f7d==_0x5dbd85(0x2ca))_0x29f7df=logspath;if(_0x362f7d==_0x5dbd85(0x2c9))_0x29f7df=configpath;if(_0x362f7d=='backup-full')_0x29f7df=configpath;let _0x363763=fs[_0x5dbd85(0x2e4)](_0x29f7df,{'withFileTypes':!![]});const _0x8b6861=new require(_0x5dbd85(0x282))();_0x363763['forEach'](_0x18464c=>{const _0x374e58=_0x5dbd85;if(!_0x18464c[_0x374e58(0x217)]()){let _0x945f04=fs['readFileSync'](_0x29f7df+_0x18464c[_0x374e58(0x2e5)]);if(_0x362f7d=='backup'){const _0xbe05c=/^bot-[0-9]{3}-config.json$/,_0x19ca14=_0xbe05c[_0x374e58(0x1cd)](_0x18464c['name']);if(_0x19ca14){const _0x3c3807=JSON[_0x374e58(0x266)](_0x945f04);_0x3c3807[_0x374e58(0x25f)][0x0]&&(_0x3c3807[_0x374e58(0x25f)][0x0]['apiKey']='***',_0x3c3807[_0x374e58(0x25f)][0x0][_0x374e58(0x215)]=_0x374e58(0x330)),_0x945f04=JSON['stringify'](_0x3c3807,null,0x2);}if(_0x18464c[_0x374e58(0x2e5)]==_0x374e58(0x293)){const _0x17a4b6=JSON[_0x374e58(0x266)](_0x945f04);if(_0x17a4b6[_0x374e58(0x259)]['loginRequired'])_0x17a4b6[_0x374e58(0x259)]['loginRequired']=![];if(_0x17a4b6[_0x374e58(0x259)]['bbPassword'])_0x17a4b6[_0x374e58(0x259)][_0x374e58(0x2b4)]=_0x374e58(0x330);if(_0x17a4b6[_0x374e58(0x259)][_0x374e58(0x355)])_0x17a4b6[_0x374e58(0x259)]['telegramToken']=_0x374e58(0x330);if(_0x17a4b6['settings'][_0x374e58(0x1ed)])_0x17a4b6['settings']['telegramChatId']=null;_0x945f04=JSON[_0x374e58(0x27e)](_0x17a4b6,null,0x2);}if(_0x18464c['name']!='bb-secure.json')_0x8b6861[_0x374e58(0x308)](_0x18464c['name'],_0x945f04);}else _0x8b6861[_0x374e58(0x308)](_0x18464c[_0x374e58(0x2e5)],_0x945f04);}});const _0x495b78=_0x8b6861['generate']({'base64':![],'compression':_0x5dbd85(0x209)});fs['writeFileSync'](zippath+(_0x362f7d+'.zip'),_0x495b78,'binary');}async function unzipFile(_0x1d1172,_0x2db1bc){const _0x104401=_0x51c697;fs[_0x104401(0x2e4)](configpath,{'withFileTypes':!![]})[_0x104401(0x1e9)](_0x5d5def=>{const _0x14f259=_0x104401;if(!_0x5d5def[_0x14f259(0x217)]())fs[_0x14f259(0x320)](configpath+_0x5d5def[_0x14f259(0x2e5)]);});const _0x5e8d27=fs[_0x104401(0x2a7)](_0x1d1172+_0x2db1bc,_0x104401(0x33a)),_0x3f67fd=new require(_0x104401(0x282))(_0x5e8d27,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x3f67fd[_0x104401(0x1e7)])[_0x104401(0x1e9)](_0x4a5fc4=>{const _0x29dca6=_0x104401,_0xddc9f5=_0x3f67fd[_0x29dca6(0x1e7)][_0x4a5fc4];fs[_0x29dca6(0x1ce)](configpath+_0xddc9f5[_0x29dca6(0x2e5)],_0xddc9f5[_0x29dca6(0x270)]);}),fs[_0x104401(0x2e4)](temppath,{'withFileTypes':!![]})[_0x104401(0x1e9)](_0x470362=>{const _0x529aec=_0x104401;if(!_0x470362['isDirectory']())fs[_0x529aec(0x320)](temppath+_0x470362[_0x529aec(0x2e5)]);}),logger[_0x104401(0x2bf)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x104401(0x344)]({'restore':!![]},_0x25c874=>{});}async function getPublicIp(){const _0x53756f=_0x51c697;try{const _0x50baa6=await axios['get'](_0x53756f(0x2d2));publicip=_0x50baa6[_0x53756f(0x33c)]['ip'];}catch(_0x475102){}}async function triggerAnalytics(){const _0x1c76c3=_0x51c697;if(!publicip)await getPublicIp();const _0x2f98f8=getBotsWithMode();let _0x3694b0=0x0;_0x2f98f8['forEach'](_0x3d1b49=>{const _0x5daaf5=_0x1885;if(_0x3d1b49[_0x5daaf5(0x2b8)]==='enabled')_0x3694b0++;});const _0x2a23d1=getBotExchanges();mixpanel['track'](_0x1c76c3(0x1ae),{'distinct_id':settings[_0x1c76c3(0x317)],'ip':publicip,'version':serverversion,'numbots':_0x2f98f8['length'],'numbotsenabled':_0x3694b0,'exchanges':_0x2a23d1});}async function getMessages(){const _0x5d60ac=_0x51c697,_0x1e4571=_0x5d60ac(0x29a),_0x197d9f=new GraphQLClient(_0x1e4571),_0x49719b={'authorization':_0x5d60ac(0x1e5)},_0x41fd61=serverversion[_0x5d60ac(0x347)]('.'),_0x324d51=_0x41fd61[0x0]+'.'+_0x41fd61[0x1],_0xfa75ca=Math['min'](settings['lastmsgtelegram'],settings[_0x5d60ac(0x2e1)]),_0x382293={'last':parseInt(_0xfa75ca),'bbm':_0x324d51},_0x11ef01=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4697cd;try{_0x4697cd=await _0x197d9f[_0x5d60ac(0x1f0)](_0x11ef01,_0x382293,_0x49719b);}catch(_0x5e3ba0){}if(_0x4697cd&&_0x4697cd[_0x5d60ac(0x375)]){let _0x244a49=settings[_0x5d60ac(0x1d4)];newMessages=[];for(const _0x54faa1 of _0x4697cd[_0x5d60ac(0x375)]){newMessages[_0x5d60ac(0x2e6)](_0x54faa1);if(_0x54faa1[_0x5d60ac(0x24f)])updateSetting(_0x5d60ac(0x222),_0x54faa1[_0x5d60ac(0x24f)]);let _0x346a95=_0x54faa1[_0x5d60ac(0x24f)]?serverversion>=_0x54faa1[_0x5d60ac(0x24f)]:![];if(!_0x346a95&&_0x54faa1[_0x5d60ac(0x300)]>_0x244a49){if(_0x54faa1[_0x5d60ac(0x1d7)]===_0x5d60ac(0x1eb)||serverversion[_0x5d60ac(0x2d9)](_0x54faa1[_0x5d60ac(0x1d7)])){let _0x18c863=''+_0x54faa1['title']+'\x0a\x0a'+_0x54faa1[_0x5d60ac(0x36a)];const _0x237896=await sendTelegramMsg(toTelegramMarkdown(_0x18c863),_0x5d60ac(0x1e3));if(_0x237896)_0x244a49=_0x54faa1['number'];}}}updateAvailable=isNewerVersion(settings[_0x5d60ac(0x222)],serverversion),updateSetting('lastmsgtelegram',_0x244a49),emitMessages();}}function emitMessages(){const _0x55f6fb=_0x51c697,_0x595b02=settings[_0x55f6fb(0x2e1)];let _0x4b87db=[];newMessages[_0x55f6fb(0x1e9)](_0x4053f8=>{const _0xfc04f2=_0x55f6fb;_0x4053f8[_0xfc04f2(0x300)]>_0x595b02&&_0x4b87db[_0xfc04f2(0x2e6)](_0x4053f8);}),_0x4b87db[_0x55f6fb(0x2fe)]>0x0&&getAllClients()[_0x55f6fb(0x1e9)](_0x4ec4bc=>{const _0x10f063=_0x55f6fb;getSocket(_0x4ec4bc['id'])[_0x10f063(0x219)](_0x10f063(0x36a),_0x4b87db);});}function confirmMessage(_0xd136d1){const _0x5efa2e=_0x51c697;updateSetting(_0x5efa2e(0x2e1),Number(_0xd136d1));}function isNewerVersion(_0x519ed8,_0x28c091){const _0x243d5b=_0x51c697,_0x5c5d86=_0x28c091[_0x243d5b(0x347)]('.'),_0x7c2a13=_0x519ed8[_0x243d5b(0x347)]('.');for(var _0xa58cc0=0x0;_0xa58cc0<_0x7c2a13[_0x243d5b(0x2fe)];_0xa58cc0++){const _0x1dc9de=~~_0x7c2a13[_0xa58cc0],_0xf4b39b=~~_0x5c5d86[_0xa58cc0];if(_0x1dc9de>_0xf4b39b)return!![];if(_0x1dc9de<_0xf4b39b)return![];}return![];}function toTelegramMarkdown(_0x363d31){const _0x3fcf2a=_0x51c697,_0xd63da3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x134d62=/\*{2}(.+?)\*{2}/gim;return _0x363d31=_0x363d31[_0x3fcf2a(0x232)](_0xd63da3,'$1_$2_$3')[_0x3fcf2a(0x232)](_0x134d62,'*$1*'),_0x363d31;}async function validateConfigFile(){const _0x421894=_0x51c697,_0x32b759=dbConfig[_0x421894(0x2a4)](_0x421894(0x253))['sortBy'](_0x421894(0x2ac))[_0x421894(0x2f6)]()||[];if(_0x32b759[_0x421894(0x2fe)]==0x0){let _0x11bd29=0x0,_0x3a6977=[];const _0x1441df=/^bot-([0-9]{3})-config.json$/,_0x4ad3c3=fs[_0x421894(0x2e4)](configpath);_0x4ad3c3[_0x421894(0x1e9)](_0x55ba24=>{const _0x584ac5=_0x421894,_0x35e7e8=_0x1441df[_0x584ac5(0x1b2)](_0x55ba24);if(_0x35e7e8){const _0x5f441a=_0x35e7e8[0x1];let _0x5c3851=getBotAttributes(_0x5f441a);_0x3a6977[_0x584ac5(0x2e6)]({'botID':_0x5f441a,'botname':_0x5c3851[_0x584ac5(0x2e3)],'status':'disabled','live':'stopped'}),_0x11bd29++;}}),_0x11bd29!=0x0&&(dbConfig[_0x421894(0x2a4)](_0x421894(0x253))[_0x421894(0x1f7)](_0x3a6977)[_0x421894(0x315)](),config=_0x3a6977,restoredConfigFile=_0x11bd29);}}async function restoreConfigNotify(_0x40ebe9){const _0x52d739=_0x51c697;let _0x211524;if(restoredConfigFile==0x1)_0x211524=_0x52d739(0x1d6);else _0x211524=_0x52d739(0x220);if(_0x40ebe9)io['to'](_0x52d739(0x26c))[_0x52d739(0x219)](_0x52d739(0x1c0),_0x211524);else{logger[_0x52d739(0x1f8)](_0x52d739(0x2ae)),logger[_0x52d739(0x1f8)](_0x211524),logger[_0x52d739(0x1f8)](_0x52d739(0x2ae)),logger[_0x52d739(0x1f8)]('');if(tgBot&&settings[_0x52d739(0x1ed)]&&settings[_0x52d739(0x2b7)]!=_0x52d739(0x28a))tgBot[_0x52d739(0x2ed)](settings[_0x52d739(0x1ed)],'Bot\x20Mgr\x20>\x20'+_0x211524)[_0x52d739(0x1b5)](_0x3a1d66=>{telegramError(_0x3a1d66);});}}function validateCredentials(_0x40c39b,_0x29044a){const _0x4969a3=_0x51c697;if(_0x40c39b[_0x4969a3(0x307)]==settings[_0x4969a3(0x21e)]&&bcrypt[_0x4969a3(0x206)](_0x40c39b[_0x4969a3(0x1fb)],settings['bbPassword'])){if(settings[_0x4969a3(0x318)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x2231d6=generateLoginToken(_0x29044a);return{'allow':!![],'reason':_0x4969a3(0x2b1),'token':_0x2231d6};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1d385a){const _0x54d8f9=_0x51c697,_0x4c1dea=generateLoginToken(_0x1d385a);return{'allow':!![],'reason':_0x54d8f9(0x2b1),'token':_0x4c1dea};}function validateAccess(_0x2324c4,_0x2e2992,_0x460d63){const _0x404e3c=_0x51c697,_0x2ae4e6=_0x460d63?_0x460d63:devices[_0x2e2992]['ip'];let _0x24c7d9;const _0x349b9f=_0x52ea44=>{const _0x1c4eb2=_0x1885;if(settings['loginRequired']){if(settings[_0x1c4eb2(0x318)]){if(telegram2FaApproved(_0x2e2992)){const _0x3a1d8f=generateLoginToken(_0x2e2992);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3a1d8f};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x24c7d9=validToken(_0x52ea44,_0x2e2992),_0x24c7d9[_0x1c4eb2(0x25d)](_0x1c4eb2(0x1be))?{'allow':!![],'reason':_0x1c4eb2(0x24d),'token':_0x52ea44}:{'allow':![],'reason':_0x1c4eb2(0x1e1),'token':null};}else return{'allow':!![],'reason':_0x1c4eb2(0x35a),'token':null};};if(settings['whitelistEnabled']){let _0xf43698=[...settings[_0x404e3c(0x1d2)],_0x404e3c(0x323),'::ffff:127.0.0.1',_0x404e3c(0x327)];if(_0xf43698[_0x404e3c(0x273)](_0x2ae4e6))return _0x349b9f(_0x2324c4);else{_0x24c7d9=validToken(_0x2324c4,_0x2e2992);if(_0x24c7d9[_0x404e3c(0x25d)](_0x404e3c(0x1be)))return _0x349b9f(_0x2324c4);else{if(telegramIpApproved(_0x2e2992)){const _0x12d7cc=generateToken(_0x2e2992);return _0x24c7d9=_0x349b9f(_0x2324c4),_0x24c7d9['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x12d7cc}:_0x24c7d9;}else return settings[_0x404e3c(0x279)]?{'allow':![],'reason':_0x404e3c(0x370),'token':null}:{'allow':![],'reason':_0x404e3c(0x31b),'token':null};}}}else return _0x349b9f(_0x2324c4);}function timelyDecrypt(_0x36e398,_0x46d347=!![]){const _0x53f108=_0x51c697;if(_0x36e398)try{const _0x3de1f2=crypt[_0x53f108(0x360)](secure[_0x53f108(0x281)],_0x36e398)[_0x53f108(0x36a)],_0x3c692a=_0x3de1f2[_0x53f108(0x347)]('@')[0x0],_0xe98459=_0x3de1f2[_0x53f108(0x347)]('@')[0x1],_0x4a438d=new Date()[_0x53f108(0x2cf)]();if(_0x46d347){if(_0x4a438d-_0xe98459<maxSecretAge*0x3e8)return _0x3c692a;else return![];}else return _0x3c692a;}catch(_0x37c725){return![];}else return![];}function _0x1885(_0xa57ecd,_0x326980){const _0x47a1fe=_0xc894();return _0x1885=function(_0x3bf2f1,_0x159bbe){_0x3bf2f1=_0x3bf2f1-0x1ad;let _0xc894b=_0x47a1fe[_0x3bf2f1];return _0xc894b;},_0x1885(_0xa57ecd,_0x326980);}const validToken=(_0x302d23,_0xdf8135)=>{const _0x125807=_0x51c697,_0x350dc9=devices[_0xdf8135]['ip'];if(!_0x302d23)return{'error':_0x125807(0x336)};for(let _0x17a622 of blacklist){if(_0x17a622[_0x125807(0x295)]==_0x302d23)return{'error':_0x125807(0x26f)};}let _0x20a090;try{_0x20a090=jwt[_0x125807(0x28d)](_0x302d23,secure['secret']+_0xdf8135);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x20a090['hasOwnProperty'](_0x125807(0x284))&&!_0x20a090[_0x125807(0x25d)](_0x125807(0x307))||!_0x20a090[_0x125807(0x25d)](_0x125807(0x359)))return{'error':_0x125807(0x27c)};if(!_0x20a090[_0x125807(0x25d)](_0x125807(0x307))&&_0x20a090['hasOwnProperty'](_0x125807(0x284))){const {clientip:_0x10e89d}=_0x20a090;return _0x350dc9==_0x10e89d?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x125807(0x29c)};}else{if(_0x20a090[_0x125807(0x25d)](_0x125807(0x307))&&_0x20a090[_0x125807(0x25d)](_0x125807(0x284))){const {username:_0x5d2e03,clientip:_0x17a780}=_0x20a090;return settings[_0x125807(0x21e)]==_0x5d2e03&&_0x350dc9==_0x17a780?{'success':_0x125807(0x1ee)}:{'error':_0x125807(0x1bc)};}}},generateLoginToken=_0x1e3a01=>{const _0x258ad5=_0x51c697;if(_0x1e3a01){const _0x28f35e=devices[_0x1e3a01]['ip'];return jwt[_0x258ad5(0x2bd)]({'username':settings['bbUsername'],'clientip':_0x28f35e},secure[_0x258ad5(0x1f5)]+_0x1e3a01,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x83c88f=>{const _0xccb880=_0x51c697;if(_0x83c88f){const _0x5ca55f=devices[_0x83c88f]['ip'];return jwt['sign']({'clientip':_0x5ca55f},secure['secret']+_0x83c88f,{'expiresIn':devices[_0x83c88f][_0xccb880(0x372)][_0xccb880(0x245)]*0x3c});}else return![];},telegramIpApproved=_0x2a0199=>{const _0x1d80a2=_0x51c697;let _0x2d2b79=![];return devices[_0x2a0199][_0x1d80a2(0x372)]&&devices[_0x2a0199]['telegramIpApproval']['expiry']!=_0x1d80a2(0x2cb)&&(_0x2d2b79=devices[_0x2a0199][_0x1d80a2(0x372)][_0x1d80a2(0x284)]==devices[_0x2a0199]['ip']&&new Date()[_0x1d80a2(0x2cf)]()-devices[_0x2a0199]['telegramIpApproval']['timestamp']<devices[_0x2a0199][_0x1d80a2(0x372)][_0x1d80a2(0x245)]*0x3c*0x3e8),_0x2d2b79;},telegram2FaApproved=_0x343f04=>{const _0x426f23=_0x51c697;let _0xe90c5a=![];return devices[_0x343f04][_0x426f23(0x276)]&&devices[_0x343f04][_0x426f23(0x276)][_0x426f23(0x245)]!='reject'&&(_0xe90c5a=devices[_0x343f04][_0x426f23(0x276)][_0x426f23(0x284)]==devices[_0x343f04]['ip']&&new Date()[_0x426f23(0x2cf)]()-devices[_0x343f04]['telegram2FaApproval']['timestamp']<devices[_0x343f04][_0x426f23(0x276)]['expiry']*0x3c*0x3e8),_0xe90c5a;},normalizeIP=_0x1df573=>{const _0x369631=_0x51c697;let _0x2a771d=null,_0x2aa74a=null;if(ipaddr[_0x369631(0x34a)](_0x1df573)){const _0xc2048d=ipaddr['parse'](_0x1df573);_0xc2048d[_0x369631(0x204)]()===_0x369631(0x312)?(_0xc2048d[_0x369631(0x1fa)]()&&(_0x2a771d=_0xc2048d[_0x369631(0x2bb)]()[_0x369631(0x2f4)]()),_0x2aa74a=_0xc2048d[_0x369631(0x2f4)]()):(_0x2a771d=_0xc2048d[_0x369631(0x2f4)](),_0x2aa74a=_0xc2048d[_0x369631(0x1f3)]()[_0x369631(0x2f4)]());}return{'show':_0x2a771d?_0x2a771d:_0x2aa74a,'store':_0x2aa74a};};function formatDate(_0x5a585b){const _0x57b896=_0x51c697;return _0x5a585b[_0x57b896(0x248)]()+'/'+(_0x5a585b[_0x57b896(0x325)]()+0x1)[_0x57b896(0x2f4)]()[_0x57b896(0x1b4)](0x2,'0')+'/'+_0x5a585b['getDate']()[_0x57b896(0x2f4)]()['padStart'](0x2,'0')+'\x20'+_0x5a585b[_0x57b896(0x290)]()[_0x57b896(0x2f4)]()[_0x57b896(0x1b4)](0x2,'0')+':'+_0x5a585b['getMinutes']()[_0x57b896(0x2f4)]()[_0x57b896(0x1b4)](0x2,'0')+':'+_0x5a585b['getSeconds']()[_0x57b896(0x2f4)]()[_0x57b896(0x1b4)](0x2,'0');}function sleep(_0x48eee4){return new Promise(_0x43b60c=>setTimeout(_0x43b60c,_0x48eee4));}