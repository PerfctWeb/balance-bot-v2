const _0xc28578=_0x1365;(function(_0x3da673,_0xc8ddc8){const _0x11f35b=_0x1365,_0x1bb3d6=_0x3da673();while(!![]){try{const _0x28fc7e=parseInt(_0x11f35b(0x16e))/0x1*(parseInt(_0x11f35b(0x208))/0x2)+parseInt(_0x11f35b(0x15e))/0x3+parseInt(_0x11f35b(0x19d))/0x4*(-parseInt(_0x11f35b(0x25e))/0x5)+-parseInt(_0x11f35b(0x186))/0x6*(parseInt(_0x11f35b(0x28a))/0x7)+-parseInt(_0x11f35b(0x1c8))/0x8+-parseInt(_0x11f35b(0x230))/0x9*(-parseInt(_0x11f35b(0x15a))/0xa)+parseInt(_0x11f35b(0x22e))/0xb;if(_0x28fc7e===_0xc8ddc8)break;else _0x1bb3d6['push'](_0x1bb3d6['shift']());}catch(_0x1e8bf9){_0x1bb3d6['push'](_0x1bb3d6['shift']());}}}(_0x2c45,0xbc7a5));const _0x548dad=function(){let _0x3913f1=!![];return function(_0x13df52,_0x17ff0e){const _0x1e0893=_0x3913f1?function(){if(_0x17ff0e){const _0x1c15b3=_0x17ff0e['apply'](_0x13df52,arguments);return _0x17ff0e=null,_0x1c15b3;}}:function(){};return _0x3913f1=![],_0x1e0893;};}(),_0x135436=_0x548dad(this,function(){const _0xda72b5=_0x1365;return _0x135436[_0xda72b5(0x1f2)]()[_0xda72b5(0x23c)](_0xda72b5(0x24b))['toString']()[_0xda72b5(0x1b5)](_0x135436)[_0xda72b5(0x23c)](_0xda72b5(0x24b));});_0x135436();'use strict';process[_0xc28578(0x165)][_0xc28578(0x1de)]=0x1;const childProcess=require('child_process'),FileSync=require(_0xc28578(0x1fd)),fs=require('fs'),fns=require(_0xc28578(0x188)),low=require(_0xc28578(0x21f)),path=require(_0xc28578(0x252)),crypto=require(_0xc28578(0x268)),Crypt=require('hybrid-crypto-js')[_0xc28578(0x287)],RSA=require(_0xc28578(0x254))[_0xc28578(0x1bb)],bcrypt=require(_0xc28578(0x2b4)),jwt=require('jsonwebtoken'),analyticsLib=require(_0xc28578(0x242))[_0xc28578(0x174)],googleAnalytics=require(_0xc28578(0x1d2))['default'],ipaddr=require(_0xc28578(0x1cb)),argv=require(_0xc28578(0x24c))(process[_0xc28578(0x273)][_0xc28578(0x2a5)](0x2))[_0xc28578(0x273)],PORT=argv[_0xc28578(0x229)]||_0xc28578(0x201),pattern=/^[0-9]{2,4}$/;!pattern[_0xc28578(0x18f)](PORT)&&(console[_0xc28578(0x2b5)](_0xc28578(0x1a5)+PORT+_0xc28578(0x1d0)),process[_0xc28578(0x238)](0x1));const HOST=argv['host']||null,userID=argv[_0xc28578(0x2bb)]||'';let bbpath=_0xc28578(0x162),bbpath2='';const botfile=_0xc28578(0x29c),configfile=_0xc28578(0x18a),settingsfile=_0xc28578(0x235),securefile=_0xc28578(0x1ac);let validInstallation=!![];!fs[_0xc28578(0x28c)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xc28578(0x206)),configpath=userID?bbpath+_0xc28578(0x1d5)+userID+'/':bbpath+_0xc28578(0x1d5),configbackuppath=configpath+_0xc28578(0x19b);!fs['existsSync'](configpath)&&fs[_0xc28578(0x1c9)](configpath);!fs[_0xc28578(0x28c)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xc28578(0x164)]({'bots':[]})[_0xc28578(0x185)]();function _0x1365(_0x1746e8,_0x54da2e){const _0x6a00fc=_0x2c45();return _0x1365=function(_0x135436,_0x548dad){_0x135436=_0x135436-0x156;let _0x2c451e=_0x6a00fc[_0x135436];return _0x2c451e;},_0x1365(_0x1746e8,_0x54da2e);}const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xc28578(0x164)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xc28578(0x164)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0xc28578(0x1f0),'rsaStandard':_0xc28578(0x1a8)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xc28578(0x217))[_0xc28578(0x157)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];function _0x2c45(){const _0x29dbbf=['existsSync','args','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','name','f2aRequired','login\x20token\x20valid','restart','User\x20has\x20been\x20validated','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','login','Invalid\x20username\x20or\x20IP\x20address','apiKey','callback_query','2FA\x20required','sign','Access\x20enabled\x20for\x20','bot.js','Invalid\x20authentication\x20token\x20(1)','login\x20not\x20required','Notifications\x20enabled\x0a','settings','server','/status\x20-\x20show\x20bot(s)\x20status\x0a','show','hasOwnProperty','slice','update-bb','blacklist','/off\x20-\x20stop\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20delete\x20alerts','find','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','error','temporary\x20access\x20timeout','Notifications\x20disabled\x0a','username','notification','-----------------------------------------------------------------------------------','match','Unauthorized\x20attempt\x20to\x20update\x20bot','bcryptjs','log','publicKey','Allow\x20login\x20from\x20IP\x20address\x20<b>','hex','pidRefreshToken','verify','user','reason','store-settings','expiry','version','exp','update-bot','56060Aaqywi','isValid','Login\x20accepted','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','2736243OkmGEd','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','/names\x20-\x20show\x20bot\x20names\x0a','uuid','bb/','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','defaults','env','running','get-logs','place-order','success','botmanager','remove','UA-192771731-1','yes','409yJgGLn','clientip','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','telegramEnabled','map','login\x20required','default','toggle-bot-mode','connection','headers','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','toggleBotMode','removeAllListeners','getDate','get','toIPv4MappedAddress','bbPassword','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','mode','writeFileSync','privateKey','Unauthorized\x20attempt\x20to\x20store\x20configuration','padStart','write','6swYUxe','access','date-fns','Unauthorized\x20attempt\x20to\x20get\x20portfolio','bb-config.json','add-bot','bot','logout','Unauthorized\x20attempt\x20to\x20update\x20settings','test','No\x20bots\x20running\x20right\x20now','value','stopPolling','isDirectory','once','delete-alerts','forEach','::1','************','telegramToken','getSeconds','backup/','unlinkSync','69812sNHqSR','live','storeHeadless','orders','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','delete-bot','onText','send','Error:\x20Invalid\x20argument\x20','Orders','/:bot/coins','RSA-OAEP','\x20>\x20','new','getPortfolio','bb-secure.json','auto','order','enabled','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','answerCallbackQuery','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','sortBy','emit','constructor','inherit','Ok,\x20will\x20send\x20alert\x20notifications\x20only','randomFillSync','getStartingBalances','then','RSA','telegramEvents','removeListener','ipv6','telegrammsg','join','telegramUsername','bot-','length','Bot\x20Mgr\x20>\x20','logged\x20out','kill','disabled\x20Bot\x20','89864TFuflq','mkdirSync','sendPortfolioTelegram','ipaddr.js','-results.json','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20delete\x20bot','catch',',\x20must\x20be\x20a\x204\x20digit\x20number','timestamp','@analytics/google-analytics','max','telegramIpApproval','config/','readFileSync','whitelistEnabled','toIPv4Address','\x20|\x20','telegram','temporary\x20access\x20not\x20allowed','readdirSync','reload','NTBA_FIX_319','getTime','-events.json','store','split','idling\x20bot\x20\x20\x20|\x20Bot\x20','secret','storeConfiguration','alerts','socket.io','secure','Invalid\x20authentication\x20token\x20(2)','data','getFullYear','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','encryptedUuid','cloneDeep','all','sha256','reset-password','toString','restarting\x20Bot\x20','No\x20authentication\x20token','Notifications\x20disabled','Password\x20has\x20been\x20reset\x20to:\x20','showname','Invalid\x20IP\x20address','\x20to\x20','manual','/on\x20-\x20start\x20bot(s)\x0a','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','lowdb/adapters/FileSync','invalid\x20credentials','set','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','3000','botname','All\x20bots','getHours','SIGINT','clients','sockets','1478WrQhmh','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','2FA\x20login\x20token\x20generated','enabled\x20Bot\x20','headless','build','handshake','::ffff:127.0.0.1','password','sendMessage','disabled','15\x20min','temporary\x20access\x20rejected','fork','copyFileSync','version.json','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','status','/:bot/configuration','Unauthorized\x20login\x20attempt\x20(timeout)','404\x20Not\x20Found','bbUsername','Alerts','lowdb','/:bot/performance','cancel-loading','event','sendFile','decrypt','temporaryAccessAllowed','parse','new-disabled','/:bot/history','port','store-headless','conn','push','Login\x20rejected','8611867mJlJrz','deleteHistoryAlerts','18DoGEMJ','get-starting-balances','You\x20can\x20use\x20the\x20following\x20commands:\x0a','bots','Unauthorized\x20attempt\x20to\x20log\x20out','bb-settings.json','cancelLoading','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','exit','Invalid\x20Telegram\x20token','function','telegramChatId','search','type','127.0.0.1','includes','index.html','getMinutes','analytics','2FA\x20login\x20rejected','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','connected','error\x20while\x20deleting\x20config\x20files:\x20','Temporary\x20access\x20rejected','message','HTML','Bot\x20','(((.+)+)+)+$','yargs/yargs','temporary\x20token\x20generated','reject','referer','2FA','/:bot/portfolio','path','Balance\x20Bot\x20Server','hybrid-crypto-js','whitelist','getUTCHours','timeshift','filter','updatebotmanager','login\x20token\x20generated','build2','2FA\x20login\x20required','Notifications\x20enabled','40WUlzOY','chat','-performance.json','entries','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','express','stopped','store-configuration','disconnect','Password\x20reset\x20rejected','crypto','pidExpireLogin','from','loginRequired','Ok,\x20will\x20send\x20order\x20notifications\x20only','initclient','-config.json','stop','settings.','hashSync','accept','argv','add','telegram2FaApproval','getMonth','compareSync','Notifications\x20types:\x20','token','starting\x20bot\x20|\x20Bot\x20','/help\x20-\x20show\x20available\x20commands\x0a','allow','stringify','isIPv4MappedAddress','ipc','Unauthorized\x20attempt\x20to\x20get\x20logs','generateKeyPairAsync','started','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','botID','SIGTERM','createServer','Crypt','\x20mode','assign','7599053Dcokrh','kind'];_0x2c45=function(){return _0x29dbbf;};return _0x2c45();}oneTimeMigration(),cleanBlacklist();const express=require(_0xc28578(0x263)),app=express(),http=require('http')[_0xc28578(0x286)](app);app['use'](express['static'](path[_0xc28578(0x1c0)](__dirname,bbpath2,_0xc28578(0x25b)))),app['use'](express['static'](path[_0xc28578(0x1c0)](__dirname,bbpath2,_0xc28578(0x20d)))),app[_0xc28578(0x17c)]('/',function(_0x2dde09,_0x2702b7){const _0x4a488f=_0xc28578;_0x2702b7['sendFile'](path[_0x4a488f(0x1c0)](__dirname,bbpath2,_0x4a488f(0x25b),_0x4a488f(0x240)));}),app['get']('/:bot',function(_0x4372c6,_0x40aadd){const _0x208f3c=_0xc28578;_0x40aadd['sendFile'](path[_0x208f3c(0x1c0)](__dirname,bbpath2,_0x208f3c(0x20d),'index.html'));}),app[_0xc28578(0x17c)](_0xc28578(0x251),(_0x2cd819,_0x38870a)=>{const _0x40fb3e=_0xc28578;_0x38870a[_0x40fb3e(0x223)](path[_0x40fb3e(0x1c0)](__dirname,bbpath2,_0x40fb3e(0x20d),_0x40fb3e(0x240)));}),app['get'](_0xc28578(0x220),(_0x22f083,_0x1c7413)=>{const _0x3ade5c=_0xc28578;_0x1c7413[_0x3ade5c(0x223)](path['join'](__dirname,bbpath2,_0x3ade5c(0x20d),_0x3ade5c(0x240)));}),app['get'](_0xc28578(0x1a7),(_0x559f4c,_0x3edab3)=>{const _0xcca3bc=_0xc28578;_0x3edab3['sendFile'](path[_0xcca3bc(0x1c0)](__dirname,bbpath2,'build',_0xcca3bc(0x240)));}),app['get'](_0xc28578(0x228),(_0x49d071,_0x14a947)=>{const _0x2e15db=_0xc28578;_0x14a947[_0x2e15db(0x223)](path[_0x2e15db(0x1c0)](__dirname,bbpath2,_0x2e15db(0x20d),_0x2e15db(0x240)));}),app[_0xc28578(0x17c)](_0xc28578(0x21a),(_0x351a12,_0x83ff70)=>{const _0x52a4f3=_0xc28578;_0x83ff70[_0x52a4f3(0x223)](path[_0x52a4f3(0x1c0)](__dirname,bbpath2,_0x52a4f3(0x20d),_0x52a4f3(0x240)));}),app[_0xc28578(0x17c)]('/:bot/support',(_0x26f9f0,_0x39ad23)=>{const _0x4268ce=_0xc28578;_0x39ad23[_0x4268ce(0x223)](path['join'](__dirname,bbpath2,_0x4268ce(0x20d),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0xc28578(0x1e7))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0xc28578(0x16c)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0xc28578(0x199)]&&settings[_0xc28578(0x199)]!=''&&settings[_0xc28578(0x1c1)]&&settings[_0xc28578(0x1c1)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x20aef3=_0xc28578;console[_0x20aef3(0x2b5)](''),console[_0x20aef3(0x2b5)](_0x20aef3(0x2b1)),logging(_0x20aef3(0x178)+PORT),console[_0x20aef3(0x2b5)]('-----------------------------------------------------------------------------------');if(config[_0x20aef3(0x1c3)]!=0x0)config['forEach'](_0x4662dd=>{const _0x267a47=_0x20aef3;if(_0x4662dd[_0x267a47(0x219)]==_0x267a47(0x1af)||_0x4662dd[_0x267a47(0x219)]==_0x267a47(0x1aa))logging(_0x267a47(0x27a)+_0x4662dd[_0x267a47(0x284)]+'\x20|\x20'+_0x4662dd[_0x267a47(0x202)]),startBot([_0x4662dd[_0x267a47(0x284)],userID],{'cwd':bbpath},function(_0x2dae51){if(_0x2dae51)logging(_0x2dae51);});else(_0x4662dd[_0x267a47(0x219)]==_0x267a47(0x212)||_0x4662dd['status']==_0x267a47(0x227))&&logging(_0x267a47(0x1e3)+_0x4662dd['botID']+_0x267a47(0x1d9)+_0x4662dd[_0x267a47(0x202)]);});else!newBot&&console['log'](_0x20aef3(0x1b2));if(newBot)addBot();console[_0x20aef3(0x2b5)](_0x20aef3(0x2b1)),console[_0x20aef3(0x2b5)]('');}function startSocket(){const _0x4d3ff5=_0xc28578;io['on'](_0x4d3ff5(0x176),_0x5c4a69=>{const _0x1180a8=_0x4d3ff5;let _0x88d8e1,_0x3da862,_0x22c98f,_0x145c5c,_0x421015;const _0x47e83c=_0x5c4a69[_0x1180a8(0x20e)][_0x1180a8(0x177)][_0x1180a8(0x24f)];_0x3da862=_0x47e83c[_0x1180a8(0x2b2)](/bot[0-9]{3}/);if(_0x3da862)_0x22c98f=_0x3da862[0x0][_0x1180a8(0x2b2)](/[0-9]{3}/);if(_0x22c98f)_0x88d8e1=_0x22c98f[0x0];else _0x88d8e1=_0x1180a8(0x16a);const _0x325423=_0x5c4a69[_0x1180a8(0x20e)]['auth'][_0x1180a8(0x1ed)];if(!_0x325423)_0x5c4a69[_0x1180a8(0x1b4)]('status',{'publicKey':secure['publicKey']});else{_0x145c5c=timelyDecrypt(_0x325423,![]);if(!_0x145c5c)_0x5c4a69[_0x1180a8(0x1b4)](_0x1180a8(0x219),{'publicKey':secure['publicKey']});else{_0x421015=normalizeIP(_0x5c4a69[_0x1180a8(0x22b)]['remoteAddress'])[_0x1180a8(0x1e1)];if(!devices[_0x145c5c])devices[_0x145c5c]={'uuid':_0x145c5c,'access':{'token':null}};devices[_0x145c5c]['ip']=_0x421015;const _0x3503fc=addClient(_0x5c4a69['id'],_0x145c5c,_0x88d8e1);setAccess(_0x3503fc),_0x5c4a69['on'](_0x1180a8(0x295),_0x2ed676=>{const _0x24f84a=_0x1180a8,_0x3f7b7e=timelyDecrypt(_0x2ed676[_0x24f84a(0x210)]);if(_0x3f7b7e){_0x2ed676={'username':_0x2ed676[_0x24f84a(0x2af)],'password':_0x3f7b7e},devices[_0x145c5c][_0x24f84a(0x187)]=validateCredentials(_0x2ed676,_0x145c5c);if(devices[_0x145c5c]['access'][_0x24f84a(0x27c)]==![]&&devices[_0x145c5c][_0x24f84a(0x187)][_0x24f84a(0x2bc)]==_0x24f84a(0x25c))_0x5c4a69['emit'](_0x24f84a(0x219),{'access':devices[_0x145c5c]['access']}),loginAccess2FA(_0x145c5c,_0x421015);else{if(devices[_0x145c5c][_0x24f84a(0x187)]['allow']==![]&&devices[_0x145c5c][_0x24f84a(0x187)][_0x24f84a(0x2bc)]=='invalid\x20credentials')_0x5c4a69[_0x24f84a(0x1b4)](_0x24f84a(0x219),{'access':devices[_0x145c5c][_0x24f84a(0x187)]});else devices[_0x145c5c]['access'][_0x24f84a(0x27c)]&&devices[_0x145c5c][_0x24f84a(0x187)][_0x24f84a(0x2bc)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x145c5c)[_0x24f84a(0x196)](_0x1672b2=>{setAccess(_0x1672b2);}),setTokenRefresh(_0x145c5c),setSessionTimeout('login',_0x145c5c));}}else logging(_0x24f84a(0x21b));}),_0x5c4a69['on'](_0x1180a8(0x1f1),()=>{resetPassword();}),_0x5c4a69['on'](_0x1180a8(0x266),_0x1b92ab=>{removeClient(_0x5c4a69['id']);});}}});}function initClient(_0x1647fa){const _0x173e8a=_0xc28578;if(_0x1647fa!=_0x173e8a(0x16a)&&config[_0x173e8a(0x297)]!=''){if(pid[_0x1647fa])pid[_0x1647fa][_0x173e8a(0x1a4)]({'function':_0x173e8a(0x26d),'args':null});}}function getSocket(_0x3275f8){const _0x473a8f=_0xc28578;return io[_0x473a8f(0x207)][_0x473a8f(0x207)]['get'](_0x3275f8);}function setAccess(_0x21bda8){const _0x2286cc=_0xc28578,_0x51d249=getSocket(_0x21bda8['id']),_0x422c48=_0x21bda8[_0x2286cc(0x161)],_0x362705=_0x21bda8[_0x2286cc(0x18c)];devices[_0x422c48]['access']=validateAccess(devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x279)],_0x422c48),_0x51d249[_0x2286cc(0x1c0)](_0x422c48);if(devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x27c)]){_0x51d249[_0x2286cc(0x1c0)](_0x362705);if(_0x362705==_0x2286cc(0x16a))initializeSocketBotManager(_0x51d249);else initializeSocketBot(_0x51d249);initClient(_0x362705);}devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x279)]&&devices[_0x422c48][_0x2286cc(0x187)]['reason']==_0x2286cc(0x24d)&&setSessionTimeout(_0x2286cc(0x250),_0x422c48),devices[_0x422c48]['access'][_0x2286cc(0x279)]&&devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x2bc)]==_0x2286cc(0x20a)&&setSessionTimeout(_0x2286cc(0x295),_0x422c48),_0x51d249[_0x2286cc(0x1b4)](_0x2286cc(0x219),{'status':_0x21bda8[_0x2286cc(0x2a1)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x422c48][_0x2286cc(0x187)],'externalip':devices[_0x422c48]['ip'],'publicKey':secure[_0x2286cc(0x2b6)],'validInstallation':validInstallation}),devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x27c)]==![]&&devices[_0x422c48][_0x2286cc(0x187)][_0x2286cc(0x2bc)]==_0x2286cc(0x299)&&temporaryAccess2FA(_0x422c48,devices[_0x422c48]['ip']);}function setSessionTimeout(_0x593fc5,_0x2cb42d){const _0x34ad8f=_0xc28578;let _0x4b62ab;if(_0x593fc5=='login')_0x4b62ab=loginExpiry*0x3c*0x3e8;else _0x4b62ab=devices[_0x2cb42d][_0x34ad8f(0x1d4)][_0x34ad8f(0x156)]*0x3c*0x3e8-(new Date()[_0x34ad8f(0x1df)]()-devices[_0x2cb42d]['telegramIpApproval'][_0x34ad8f(0x1d1)]);if(devices[_0x2cb42d][_0x34ad8f(0x269)])clearTimeout(devices[_0x2cb42d][_0x34ad8f(0x269)]);devices[_0x2cb42d][_0x34ad8f(0x269)]=setTimeout(()=>{const _0x5c60d6=_0x34ad8f;if(devices[_0x2cb42d][_0x5c60d6(0x2b9)])clearTimeout(devices[_0x2cb42d][_0x5c60d6(0x2b9)]);removeSocketListeners(_0x2cb42d),addBlacklist(_0x2cb42d),devices[_0x2cb42d]['telegramIpApproval']=null,devices[_0x2cb42d]['telegram2FaApproval']=null,devices[_0x2cb42d]['access'][_0x5c60d6(0x279)]=null,devices[_0x2cb42d]['access']=validateAccess(devices[_0x2cb42d][_0x5c60d6(0x187)]['token'],_0x2cb42d),!(devices[_0x2cb42d]['access']['allow']&&devices[_0x2cb42d][_0x5c60d6(0x187)][_0x5c60d6(0x2bc)]==_0x5c60d6(0x29e))&&(_0x593fc5==_0x5c60d6(0x295)?io['to'](_0x2cb42d)['emit']('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2cb42d)['emit']('status',{'access':{'allow':![],'reason':_0x5c60d6(0x2ad),'token':null}})),devices[_0x2cb42d][_0x5c60d6(0x187)][_0x5c60d6(0x279)]=null;},_0x4b62ab);}function setTokenRefresh(_0x19b1a4){const _0x2efc38=_0xc28578;if(devices[_0x19b1a4][_0x2efc38(0x2b9)])clearTimeout(devices[_0x19b1a4][_0x2efc38(0x2b9)]);devices[_0x19b1a4][_0x2efc38(0x2b9)]=setTimeout(()=>{const _0x3c3504=_0x2efc38;getClientsWithUuid(_0x19b1a4)[_0x3c3504(0x1c3)]!=0x0?(devices[_0x19b1a4][_0x3c3504(0x187)]=refreshToken(_0x19b1a4),io['to'](_0x19b1a4)[_0x3c3504(0x1b4)](_0x3c3504(0x219),{'status':_0x3c3504(0x245),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x19b1a4][_0x3c3504(0x187)],'externalip':devices[_0x19b1a4]['ip'],'publicKey':secure[_0x3c3504(0x2b6)],'validInstallation':validInstallation}),setTokenRefresh(_0x19b1a4)):clearTimeout(devices[_0x19b1a4][_0x3c3504(0x2b9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x987aae){const _0x1ebc4d=_0xc28578,_0x2c6453=getClient(_0x987aae['id'])[_0x1ebc4d(0x161)];_0x987aae[_0x1ebc4d(0x1b4)](_0x1ebc4d(0x233),config),_0x987aae['emit'](_0x1ebc4d(0x2a0),cleanSettings()),_0x987aae['on'](_0x1ebc4d(0x18b),_0xb827d8=>{const _0x273b8e=_0x1ebc4d;if(validateAccess(_0xb827d8,_0x2c6453)[_0x273b8e(0x27c)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x987aae['on'](_0x1ebc4d(0x159),(_0x549f46,_0x1ffbe6)=>{const _0x360328=_0x1ebc4d;if(validateAccess(_0x1ffbe6,_0x2c6453)['allow'])toggleBot(_0x549f46['botID'],_0x549f46[_0x360328(0x219)],_0x549f46[_0x360328(0x19e)]);else logging(_0x360328(0x2b3));}),_0x987aae['on'](_0x1ebc4d(0x175),(_0x52ace2,_0x2ab85f)=>{const _0x43f47c=_0x1ebc4d;if(validateAccess(_0x2ab85f,_0x2c6453)[_0x43f47c(0x27c)])toggleBotMode(_0x52ace2);else logging(_0x43f47c(0x2b3));}),_0x987aae['on'](_0x1ebc4d(0x1a2),(_0x310146,_0x4b8a0e)=>{const _0xaeed27=_0x1ebc4d;if(validateAccess(_0x4b8a0e,_0x2c6453)[_0xaeed27(0x27c)])deleteBot(_0x310146);else logging(_0xaeed27(0x1ce));}),_0x987aae['on'](_0x1ebc4d(0x2bd),(_0x43ae26,_0x472be8)=>{const _0x36f133=_0x1ebc4d;if(validateAccess(_0x472be8,_0x2c6453)[_0x36f133(0x27c)])storeSettings(_0x43ae26,!![]);else logging(_0x36f133(0x18e));}),_0x987aae['on'](_0x1ebc4d(0x2a6),_0x35177d=>{const _0x251dbd=_0x1ebc4d;if(validateAccess(_0x35177d,_0x2c6453)[_0x251dbd(0x27c)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x987aae['on'](_0x1ebc4d(0x18d),_0x47b0df=>{const _0x4f5930=_0x1ebc4d;if(validateAccess(_0x47b0df,_0x2c6453)['allow']){if(devices[_0x2c6453][_0x4f5930(0x2b9)])clearTimeout(devices[_0x2c6453][_0x4f5930(0x2b9)]);if(devices[_0x2c6453][_0x4f5930(0x269)])clearTimeout(devices[_0x2c6453][_0x4f5930(0x269)]);removeSocketListeners(getClient(_0x987aae['id'])['uuid']),addBlacklist(_0x2c6453),devices[_0x2c6453]['telegramIpApproval']=null,devices[_0x2c6453]['telegram2FaApproval']=null,devices[_0x2c6453][_0x4f5930(0x187)]['token']=null,io['to'](getClient(_0x987aae['id'])[_0x4f5930(0x161)])[_0x4f5930(0x1b4)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4f5930(0x234));});}function initializeSocketBot(_0x3ca0ed){const _0x509e93=_0xc28578,_0x57b646=getClient(_0x3ca0ed['id'])[_0x509e93(0x18c)],_0x167758=getClient(_0x3ca0ed['id'])[_0x509e93(0x161)];_0x3ca0ed['on'](_0x509e93(0x167),(_0x4ce2e5,_0x3f7ce0)=>{const _0x113c7d=_0x509e93;if(validateAccess(_0x3f7ce0,_0x167758)[_0x113c7d(0x27c)]){if(pid[_0x57b646])pid[_0x57b646]['send']({'function':'emitHistory','args':_0x4ce2e5});}else logging(_0x113c7d(0x280));}),_0x3ca0ed['on'](_0x509e93(0x195),(_0x35f623,_0x218315)=>{const _0x595397=_0x509e93;if(validateAccess(_0x218315,_0x167758)[_0x595397(0x27c)]){if(pid[_0x57b646])pid[_0x57b646][_0x595397(0x1a4)]({'function':_0x595397(0x22f),'args':_0x35f623});}else logging(_0x595397(0x2a9));}),_0x3ca0ed['on']('get-portfolio',(_0x306443,_0x5c0ff2)=>{const _0x49671d=_0x509e93;if(validateAccess(_0x5c0ff2,_0x167758)[_0x49671d(0x27c)]){if(pid[_0x57b646])pid[_0x57b646]['send']({'function':_0x49671d(0x1ab),'args':_0x306443});}else logging(_0x49671d(0x189));}),_0x3ca0ed['on'](_0x509e93(0x265),(_0x54f11c,_0x520131)=>{const _0x26e6d8=_0x509e93;if(validateAccess(_0x520131,_0x167758)[_0x26e6d8(0x27c)]){if(pid[_0x57b646])pid[_0x57b646]['send']({'function':_0x26e6d8(0x1e5),'args':_0x54f11c});}else logging(_0x26e6d8(0x183));}),_0x3ca0ed['on'](_0x509e93(0x22a),(_0x3e82f6,_0x40f2e6)=>{const _0x1dc956=_0x509e93;if(validateAccess(_0x40f2e6,_0x167758)['allow']){if(pid[_0x57b646])pid[_0x57b646][_0x1dc956(0x1a4)]({'function':_0x1dc956(0x19f),'args':_0x3e82f6});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3ca0ed['on'](_0x509e93(0x231),_0x4bfa36=>{const _0x1d65b4=_0x509e93;if(validateAccess(_0x4bfa36,_0x167758)[_0x1d65b4(0x27c)]){if(pid[_0x57b646])pid[_0x57b646]['send']({'function':_0x1d65b4(0x1b9),'args':null});}else logging(_0x1d65b4(0x15d));}),_0x3ca0ed['on'](_0x509e93(0x168),(_0x138cac,_0x552da1)=>{const _0x31531d=_0x509e93;if(validateAccess(_0x552da1,_0x167758)[_0x31531d(0x27c)]){if(pid[_0x57b646])pid[_0x57b646][_0x31531d(0x1a4)]({'function':'placeOrder','args':_0x138cac});}else logging(_0x31531d(0x163));}),_0x3ca0ed['on'](_0x509e93(0x221),_0x5eccc8=>{const _0x105826=_0x509e93;if(validateAccess(_0x5eccc8,_0x167758)[_0x105826(0x27c)]){if(pid[_0x57b646])pid[_0x57b646]['send']({'function':_0x105826(0x236),'args':null});}else logging(_0x105826(0x209));}),_0x3ca0ed['on'](_0x509e93(0x18d),_0x26b88a=>{const _0x572874=_0x509e93;if(validateAccess(_0x26b88a,_0x167758)[_0x572874(0x27c)]){if(devices[_0x167758][_0x572874(0x2b9)])clearTimeout(devices[_0x167758][_0x572874(0x2b9)]);if(devices[_0x167758][_0x572874(0x269)])clearTimeout(devices[_0x167758][_0x572874(0x269)]);removeSocketListeners(getClient(_0x3ca0ed['id'])['uuid']),addBlacklist(_0x167758),devices[_0x167758][_0x572874(0x1d4)]=null,devices[_0x167758]['telegram2FaApproval']=null,devices[_0x167758][_0x572874(0x187)]['token']=null,io['to'](getClient(_0x3ca0ed['id'])[_0x572874(0x161)])[_0x572874(0x1b4)](_0x572874(0x219),{'access':{'allow':![],'reason':_0x572874(0x1c5),'token':null}});}else logging(_0x572874(0x234));});}function removeSocketListeners(_0x12b4e7){const _0x1b126f=_0xc28578;getClientsWithUuid(_0x12b4e7)[_0x1b126f(0x196)](_0xccc67d=>{const _0x6e5038=_0x1b126f;getSocket(_0xccc67d['id'])[_0x6e5038(0x17a)]();});}function cleanSettings(){const _0x1e964f=_0xc28578;let _0x2d80a5=settings;return settings[_0x1e964f(0x199)]&&settings[_0x1e964f(0x199)]!=''&&(_0x2d80a5={..._0x2d80a5,'telegramToken':_0x1e964f(0x198)}),settings[_0x1e964f(0x17e)]&&settings[_0x1e964f(0x17e)]!=''&&(_0x2d80a5={..._0x2d80a5,'bbPassword':_0x1e964f(0x198)}),_0x2d80a5;}function updateBB(){const _0x5c921f=_0xc28578;installingUpdate=!![],config['forEach'](_0xe5166a=>{const _0x510fe3=_0x1365;restartBot(_0xe5166a[_0x510fe3(0x284)]);}),process[_0x5c921f(0x1a4)]({'update':!![]},_0x55d82f=>{});}function startBot(_0x389ee4,_0x2b4511,_0x484348){const _0x3065d3=_0xc28578;let _0x533ee4=![];const _0x571370=_0x389ee4[0x0];_0x2b4511={..._0x2b4511,'stdio':[_0x3065d3(0x1b6),_0x3065d3(0x1b6),_0x3065d3(0x1b6),_0x3065d3(0x27f)]},pid[_0x571370]=childProcess[_0x3065d3(0x215)](botfile,_0x389ee4,_0x2b4511),pid[_0x571370]['on'](_0x3065d3(0x248),_0xafe4fb=>{const _0x5096a1=_0x3065d3;switch(Object['keys'](_0xafe4fb)[0x0]){case _0x5096a1(0x202):updateBotName(_0x571370,_0xafe4fb['botname']);break;case _0x5096a1(0x259):updateBotManager();break;case _0x5096a1(0x219):updateStatus(_0x571370,_0xafe4fb[_0x5096a1(0x219)]);break;case'live':updateLive(_0x571370,_0xafe4fb[_0x5096a1(0x19e)]);break;case _0x5096a1(0x282):updateLive(_0x571370,_0xafe4fb['started']),io['to'](_0x571370)['emit']('status',{'access':{'allow':![],'reason':_0x5096a1(0x1dd),'token':null}});break;case _0x5096a1(0x26f):_0xafe4fb[_0x5096a1(0x26f)]==_0x5096a1(0x292)&&restartBot(_0x571370);_0xafe4fb[_0x5096a1(0x26f)]==_0x5096a1(0x1c6)&&toggleBot(_0x571370,'disabled',_0x5096a1(0x264));break;case _0x5096a1(0x1da):sendTelegram(_0x571370,_0xafe4fb['telegram']);break;case _0x5096a1(0x1bf):sendTelegramMsg(_0xafe4fb['telegrammsg']);break;case _0x5096a1(0x23a):io['to'](_0x571370)[_0x5096a1(0x1b4)](_0xafe4fb[_0x5096a1(0x23a)],_0xafe4fb[_0x5096a1(0x28d)]);break;}}),pid[_0x571370]['on']('error',function(_0x18819a){if(_0x533ee4)return;_0x533ee4=!![],_0x484348(_0x18819a);}),pid[_0x571370]['on']('exit',function(_0x1ee60d){const _0x38e04e=_0x3065d3;if(installingUpdate)return;if(_0x533ee4)return;_0x533ee4=!![],_0x484348(null);const _0x3bfc70=dbConfig[_0x38e04e(0x17c)](_0x38e04e(0x233))[_0x38e04e(0x2aa)]({'botID':_0x571370})[_0x38e04e(0x191)]();_0x3bfc70&&(_0x3bfc70['status']==_0x38e04e(0x1af)||_0x3bfc70[_0x38e04e(0x219)]==_0x38e04e(0x1aa))&&(updateLive(_0x571370,_0x38e04e(0x264)),logging(_0x38e04e(0x1f3)+_0x571370),startBot([_0x571370,userID],{'cwd':bbpath},function(_0x29ca3b){if(_0x29ca3b)logging(_0x29ca3b);}));});}function stopBot(_0x41a45f){const _0x150655=_0xc28578;getClientsWithBotID(_0x41a45f)[_0x150655(0x196)](_0x2877fd=>{const _0xb05e7f=_0x150655;getSocket(_0x2877fd['id'])[_0xb05e7f(0x266)](!![]),removeClient(_0x2877fd['id']);}),pid[_0x41a45f]&&(pid[_0x41a45f]['kill'](),pid[_0x41a45f]=null);}function restartBot(_0x49fffa){const _0x5cf427=_0xc28578;if(pid[_0x49fffa])pid[_0x49fffa][_0x5cf427(0x1c6)]();}function addBot(){const _0x2d983a=_0xc28578;let _0x10e054;for(let _0x5b5fdf=0x1;_0x5b5fdf<0x3e9;_0x5b5fdf++){_0x10e054=_0x5b5fdf[_0x2d983a(0x1f2)]()[_0x2d983a(0x184)](0x3,'0');let _0x1edde5=config['find'](_0xe7d66e=>_0xe7d66e[_0x2d983a(0x284)]==_0x10e054);if(!_0x1edde5)break;}if(_0x10e054==='1000'){logging(_0x2d983a(0x1ec));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x10e054),dbConfig['get'](_0x2d983a(0x233))[_0x2d983a(0x22c)]({'botID':_0x10e054,'botname':_0x2d983a(0x24a)+_0x10e054,'status':_0x2d983a(0x1aa),'live':''})[_0x2d983a(0x185)](),startBot([_0x10e054,userID],{'cwd':bbpath},function(_0x3e1e21){if(_0x3e1e21)logging(_0x3e1e21);}),config=getConfiguration(),io['to'](_0x2d983a(0x16a))[_0x2d983a(0x1b4)]('bots',config);}function deleteBot(_0x4e384b){const _0x370a2c=_0xc28578;getClientsWithBotID(_0x4e384b)[_0x370a2c(0x196)](_0xe7abec=>{const _0x253cc6=_0x370a2c;getSocket(_0xe7abec['id'])[_0x253cc6(0x266)](!![]),removeClient(_0xe7abec['id']);}),dbConfig[_0x370a2c(0x17c)](_0x370a2c(0x233))[_0x370a2c(0x16b)]({'botID':_0x4e384b})[_0x370a2c(0x185)](),logging('deleted\x20Bot\x20'+_0x4e384b),stopBot(_0x4e384b);try{fs[_0x370a2c(0x19c)](path[_0x370a2c(0x1c0)](configpath,_0x370a2c(0x1c2)+_0x4e384b+_0x370a2c(0x26e))),fs[_0x370a2c(0x19c)](path[_0x370a2c(0x1c0)](configpath,_0x370a2c(0x1c2)+_0x4e384b+_0x370a2c(0x1e0))),fs['unlinkSync'](path[_0x370a2c(0x1c0)](configpath,_0x370a2c(0x1c2)+_0x4e384b+_0x370a2c(0x260))),fs[_0x370a2c(0x19c)](path[_0x370a2c(0x1c0)](configpath,_0x370a2c(0x1c2)+_0x4e384b+_0x370a2c(0x1cc)));}catch(_0x5a021a){if(_0x5a021a)logging(_0x370a2c(0x246),_0x5a021a);}config=getConfiguration(),io['to'](_0x370a2c(0x16a))[_0x370a2c(0x1b4)](_0x370a2c(0x233),config);}function toggleBot(_0x82ef72,_0x3c4111,_0x427642){const _0x26bfbd=_0xc28578;dbConfig[_0x26bfbd(0x17c)](_0x26bfbd(0x233))[_0x26bfbd(0x2aa)]({'botID':_0x82ef72})[_0x26bfbd(0x289)]({'status':_0x3c4111})[_0x26bfbd(0x289)]({'live':_0x427642})[_0x26bfbd(0x185)]();if(_0x3c4111==_0x26bfbd(0x1af)||_0x3c4111==_0x26bfbd(0x1aa))logging(_0x26bfbd(0x20b)+_0x82ef72),startBot([_0x82ef72,userID],{'cwd':bbpath},function(_0x3bd336){if(_0x3bd336)logging(_0x3bd336);});else(_0x3c4111==_0x26bfbd(0x212)||_0x3c4111==_0x26bfbd(0x227))&&(logging(_0x26bfbd(0x1c7)+_0x82ef72),stopBot(_0x82ef72));config=getConfiguration(),io['to'](_0x26bfbd(0x16a))['emit'](_0x26bfbd(0x233),config);}function toggleStatus(_0x2b9e91){const _0x6d5018=_0xc28578;let _0x36cf4f=dbConfig[_0x6d5018(0x17c)](_0x6d5018(0x233))['find']({'botID':_0x2b9e91})['value'](),_0x4862b0;if(_0x36cf4f['status']==='enabled')_0x4862b0=_0x6d5018(0x212);else{if(_0x36cf4f[_0x6d5018(0x219)]===_0x6d5018(0x1aa))_0x4862b0=_0x6d5018(0x227);else{if(_0x36cf4f['status']===_0x6d5018(0x227))_0x4862b0=_0x6d5018(0x1aa);else{if(_0x36cf4f[_0x6d5018(0x219)]===_0x6d5018(0x212))_0x4862b0=_0x6d5018(0x1af);}}}return _0x4862b0;}function updateStatus(_0x2d4ace,_0x2c39ba){const _0x210509=_0xc28578;dbConfig['get'](_0x210509(0x233))['find']({'botID':_0x2d4ace})['assign']({'status':_0x2c39ba})[_0x210509(0x185)](),config=getConfiguration(),io['to']('botmanager')[_0x210509(0x1b4)](_0x210509(0x233),config);}function updateLive(_0x149fd2,_0x46e198){const _0x53e349=_0xc28578;dbConfig[_0x53e349(0x17c)]('bots')[_0x53e349(0x2aa)]({'botID':_0x149fd2})[_0x53e349(0x289)]({'live':_0x46e198})[_0x53e349(0x185)](),config=getConfiguration(),io['to'](_0x53e349(0x16a))[_0x53e349(0x1b4)](_0x53e349(0x233),config);}function updateBotName(_0x11db77,_0x45d51a){const _0x8c268a=_0xc28578;dbConfig[_0x8c268a(0x17c)](_0x8c268a(0x233))[_0x8c268a(0x2aa)]({'botID':_0x11db77})['assign']({'botname':_0x45d51a})[_0x8c268a(0x185)](),config=getConfiguration(),io['to']('botmanager')[_0x8c268a(0x1b4)](_0x8c268a(0x233),config);}function updateBotManager(){const _0x518387=_0xc28578;config=getConfiguration(),io['to'](_0x518387(0x16a))['emit']('bots',config);}function toggleBotMode(_0x2e0090){const _0x432941=_0xc28578;if(pid[_0x2e0090])pid[_0x2e0090][_0x432941(0x1a4)]({'function':_0x432941(0x179),'args':null});else{const _0x134e60=configpath+_0x432941(0x1c2)+_0x2e0090+'-config.json',_0x19f275=fs[_0x432941(0x1d6)](_0x134e60),_0x1dd889=JSON[_0x432941(0x226)](_0x19f275),_0x2f8e74=_0x1dd889[_0x432941(0x18c)][0x0]['headless'];_0x1dd889['bot'][0x0][_0x432941(0x20c)]=!_0x2f8e74;const _0x37b878=JSON[_0x432941(0x27d)](_0x1dd889,null,0x2);fs[_0x432941(0x181)](_0x134e60,_0x37b878),config=getConfiguration(),io['to'](_0x432941(0x16a))['emit'](_0x432941(0x233),config);}}function telegramError(_0x590248){const _0x49dc41=_0xc28578;console[_0x49dc41(0x2b5)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0xe493b5){const _0x1ea61b=_0xc28578;if(_0xe493b5[_0x1ea61b(0x26a)][_0x1ea61b(0x2af)]!=settings[_0x1ea61b(0x1c1)]&&'@'+_0xe493b5[_0x1ea61b(0x26a)][_0x1ea61b(0x2af)]!=settings[_0x1ea61b(0x1c1)])return tgBot['sendMessage'](_0xe493b5[_0x1ea61b(0x25f)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1ea61b(0x249)})[_0x1ea61b(0x1cf)](_0x3572b2=>{telegramError(_0x3572b2);}),![];return!![];}async function initTelegram(){const _0x54167a=_0xc28578;if(tgBot)tgBot[_0x54167a(0x192)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x54167a(0x199)],{'polling':!![]});let _0x1330b6=_0x54167a(0x232);_0x1330b6+='\x0a',_0x1330b6+='/enable\x20-\x20enable\x20notifications\x0a',_0x1330b6+='/disable\x20-\x20disable\x20notifications\x0a',_0x1330b6+=_0x54167a(0x244),_0x1330b6+=_0x54167a(0x1cd),_0x1330b6+=_0x54167a(0x1fb),_0x1330b6+=_0x54167a(0x2a8),_0x1330b6+=_0x54167a(0x283),_0x1330b6+=_0x54167a(0x160),_0x1330b6+=_0x54167a(0x2a2),_0x1330b6+=_0x54167a(0x200),_0x1330b6+=_0x54167a(0x27b);let _0x5c7fd4=_0x54167a(0x15f);_0x5c7fd4+='\x0a',_0x5c7fd4+=_0x1330b6,tgBot[_0x54167a(0x1a3)](/\/start/,_0x50a554=>{const _0x18eace=_0x54167a;if(!validateTelegram(_0x50a554))return;if(settings[_0x18eace(0x23b)]!=_0x50a554[_0x18eace(0x25f)]['id'])updateSetting(_0x18eace(0x23b),_0x50a554[_0x18eace(0x25f)]['id']);updateSetting(_0x18eace(0x171),!![]),tgBot['sendMessage'](_0x50a554[_0x18eace(0x25f)]['id'],_0x5c7fd4)[_0x18eace(0x1cf)](_0x56116a=>{telegramError(_0x56116a);});}),tgBot[_0x54167a(0x1a3)](/\/enable/,_0x32be8a=>{const _0x30bd38=_0x54167a;if(!validateTelegram(_0x32be8a))return;if(settings[_0x30bd38(0x23b)]!=_0x32be8a[_0x30bd38(0x25f)]['id'])updateSetting(_0x30bd38(0x23b),_0x32be8a[_0x30bd38(0x25f)]['id']);updateSetting(_0x30bd38(0x171),!![]),tgBot[_0x30bd38(0x211)](_0x32be8a[_0x30bd38(0x25f)]['id'],_0x30bd38(0x25d))[_0x30bd38(0x1cf)](_0x23ff52=>{telegramError(_0x23ff52);});}),tgBot[_0x54167a(0x1a3)](/\/config/,async _0x4c1c3c=>{const _0x130ce6=_0x54167a;if(!validateTelegram(_0x4c1c3c))return;tgBot[_0x130ce6(0x1bd)](_0x130ce6(0x298)),tgBot[_0x130ce6(0x211)](_0x4c1c3c[_0x130ce6(0x25f)]['id'],_0x130ce6(0x1fc),{'reply_markup':{'inline_keyboard':[[{'text':_0x130ce6(0x1a6),'callback_data':_0x130ce6(0x1a0)},{'text':_0x130ce6(0x21e),'callback_data':_0x130ce6(0x1e6)},{'text':'All','callback_data':'all'}]]}})[_0x130ce6(0x1cf)](_0x321705=>{telegramError(_0x321705);}),tgBot['on'](_0x130ce6(0x298),async _0x5439d1=>{const _0x4b4aa4=_0x130ce6,_0x113211=_0x5439d1[_0x4b4aa4(0x1ea)],_0x2fb2ab=_0x5439d1[_0x4b4aa4(0x248)];tgBot['answerCallbackQuery'](_0x5439d1['id'])['then'](async()=>{const _0x3f6b96=_0x4b4aa4;_0x113211=='orders'&&(updateSetting(_0x3f6b96(0x1bc),_0x3f6b96(0x1a0)),updateSetting(_0x3f6b96(0x171),!![]),await tgBot[_0x3f6b96(0x211)](_0x2fb2ab['chat']['id'],_0x3f6b96(0x26c))[_0x3f6b96(0x1cf)](_0x28e5e0=>{telegramError(_0x28e5e0);}));_0x113211=='alerts'&&(updateSetting(_0x3f6b96(0x1bc),'alerts'),updateSetting(_0x3f6b96(0x171),!![]),await tgBot[_0x3f6b96(0x211)](_0x2fb2ab['chat']['id'],_0x3f6b96(0x1b7))[_0x3f6b96(0x1cf)](_0x1576cf=>{telegramError(_0x1576cf);}));_0x113211==_0x3f6b96(0x1ef)&&(updateSetting(_0x3f6b96(0x1bc),_0x3f6b96(0x1ef)),updateSetting(_0x3f6b96(0x171),!![]),await tgBot[_0x3f6b96(0x211)](_0x2fb2ab['chat']['id'],_0x3f6b96(0x170))[_0x3f6b96(0x1cf)](_0x1d1d1b=>{telegramError(_0x1d1d1b);}));if(!settings[_0x3f6b96(0x23b)])tgBot[_0x3f6b96(0x211)](_0x2fb2ab['chat']['id'],_0x3f6b96(0x1b0))[_0x3f6b96(0x1cf)](_0x2fe2cf=>{telegramError(_0x2fe2cf);});}),tgBot[_0x4b4aa4(0x1bd)]('callback_query');});}),tgBot['onText'](/\/status/,_0x2ae3af=>{const _0x3961fc=_0x54167a;if(!validateTelegram(_0x2ae3af))return;const _0x3e1845=getBotsWithMode();let _0x1ddc8f='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x4b751e=>{const _0x1879a7=_0x1365,_0x2bc785=_0x3e1845[_0x1879a7(0x2aa)](_0x516ba8=>_0x516ba8[_0x1879a7(0x284)]==_0x4b751e[_0x1879a7(0x284)])[_0x1879a7(0x180)];_0x1ddc8f+=_0x1879a7(0x24a)+_0x4b751e[_0x1879a7(0x284)]+':\x20'+_0x4b751e['status']+_0x1879a7(0x1d9)+_0x2bc785+_0x1879a7(0x1d9)+_0x4b751e['live']+'\x0a';}),_0x1ddc8f+='\x0a',_0x1ddc8f+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x1ddc8f+=!settings[_0x3961fc(0x171)]?_0x3961fc(0x2ae):_0x3961fc(0x29f),_0x1ddc8f+=settings[_0x3961fc(0x171)]?settings[_0x3961fc(0x1bc)]==_0x3961fc(0x1ef)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3961fc(0x278)+settings[_0x3961fc(0x1bc)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x2ae3af[_0x3961fc(0x25f)]['id'],_0x1ddc8f,{'parse_mode':_0x3961fc(0x249)})[_0x3961fc(0x1cf)](_0xc1134b=>{telegramError(_0xc1134b);});}),tgBot[_0x54167a(0x1a3)](/\/restart/,_0x44e43a=>{const _0x52d107=_0x54167a;if(!validateTelegram(_0x44e43a))return;tgBot[_0x52d107(0x1bd)](_0x52d107(0x298));const _0x2f4261=getEnabledBots();if(_0x2f4261[_0x52d107(0x1c3)]==0x0)tgBot[_0x52d107(0x211)](_0x44e43a['chat']['id'],_0x52d107(0x190))[_0x52d107(0x1cf)](_0x69f7c2=>{telegramError(_0x69f7c2);});else{if(_0x2f4261[_0x52d107(0x1c3)]>0x1)_0x2f4261['push']({'botID':_0x52d107(0x1ef)});let _0x5538f5=[],_0x62f34=[];const _0x3deb7f=_0x2f4261['length']%0x4==0x0||_0x2f4261[_0x52d107(0x1c3)]%0x4==0x3||_0x2f4261['length']%0x3==0x1?0x4:0x3;let _0x4e8c73=0x0;_0x2f4261['forEach']((_0x4a3ff7,_0x3521be)=>{const _0x1b5e47=_0x52d107;if(_0x3521be%_0x3deb7f==0x0)_0x62f34=[];_0x62f34[_0x1b5e47(0x22c)]({'text':_0x4a3ff7['botID']==_0x1b5e47(0x1ef)?'All\x20bots':_0x1b5e47(0x24a)+_0x4a3ff7[_0x1b5e47(0x284)],'callback_data':_0x4a3ff7[_0x1b5e47(0x284)]}),_0x3521be%_0x3deb7f==0x0&&(_0x5538f5[_0x4e8c73]=_0x62f34,_0x4e8c73++);}),tgBot[_0x52d107(0x211)](_0x44e43a[_0x52d107(0x25f)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x5538f5}})[_0x52d107(0x1cf)](_0x3137b2=>{telegramError(_0x3137b2);}),tgBot['on'](_0x52d107(0x298),async _0x318262=>{const _0x1d31c5=_0x52d107,_0x60fff=_0x318262[_0x1d31c5(0x1ea)],_0x35fd16=_0x318262[_0x1d31c5(0x248)];tgBot['answerCallbackQuery'](_0x318262['id'])[_0x1d31c5(0x1ba)](async()=>{const _0x3a7170=_0x1d31c5;_0x60fff=='all'?(tgBot[_0x3a7170(0x211)](_0x35fd16[_0x3a7170(0x25f)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x3a7170(0x1cf)](_0x480e49=>{telegramError(_0x480e49);}),config[_0x3a7170(0x196)](_0x50d650=>{const _0x5cf019=_0x3a7170;restartBot(_0x50d650[_0x5cf019(0x284)]);})):(tgBot[_0x3a7170(0x211)](_0x35fd16['chat']['id'],_0x3a7170(0x294)+_0x60fff)[_0x3a7170(0x1cf)](_0x4d2183=>{telegramError(_0x4d2183);}),restartBot(_0x60fff));}),tgBot[_0x1d31c5(0x1bd)](_0x1d31c5(0x298));});}}),tgBot[_0x54167a(0x1a3)](/\/on/,_0x1eeb70=>{const _0x4804d3=_0x54167a;if(!validateTelegram(_0x1eeb70))return;tgBot[_0x4804d3(0x1bd)]('callback_query');const _0xda8a20=getDisabledBots();if(_0xda8a20[_0x4804d3(0x1c3)]==0x0)tgBot['sendMessage'](_0x1eeb70['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0x4804d3(0x1cf)](_0x3c639b=>{telegramError(_0x3c639b);});else{if(_0xda8a20['length']>0x1)_0xda8a20[_0x4804d3(0x22c)]({'botID':_0x4804d3(0x1ef)});let _0x4f7261=[],_0x3c32bd=[];const _0x2475e1=_0xda8a20[_0x4804d3(0x1c3)]%0x4==0x0||_0xda8a20[_0x4804d3(0x1c3)]%0x4==0x3||_0xda8a20[_0x4804d3(0x1c3)]%0x3==0x1?0x4:0x3;let _0x368a26=0x0;_0xda8a20['forEach']((_0x154f11,_0x16846b)=>{const _0x8ffed1=_0x4804d3;if(_0x16846b%_0x2475e1==0x0)_0x3c32bd=[];_0x3c32bd[_0x8ffed1(0x22c)]({'text':_0x154f11['botID']==_0x8ffed1(0x1ef)?_0x8ffed1(0x203):_0x8ffed1(0x24a)+_0x154f11[_0x8ffed1(0x284)],'callback_data':_0x154f11['botID']}),_0x16846b%_0x2475e1==0x0&&(_0x4f7261[_0x368a26]=_0x3c32bd,_0x368a26++);}),tgBot[_0x4804d3(0x211)](_0x1eeb70['chat']['id'],_0x4804d3(0x237),{'reply_markup':{'inline_keyboard':_0x4f7261}})[_0x4804d3(0x1cf)](_0xca6a4f=>{telegramError(_0xca6a4f);}),tgBot['on']('callback_query',async _0x2ee9a6=>{const _0xbd8601=_0x4804d3,_0x1c2181=_0x2ee9a6[_0xbd8601(0x1ea)],_0x43471a=_0x2ee9a6[_0xbd8601(0x248)];tgBot[_0xbd8601(0x1b1)](_0x2ee9a6['id'])[_0xbd8601(0x1ba)](async()=>{const _0x2084cc=_0xbd8601;_0x1c2181==_0x2084cc(0x1ef)?(tgBot[_0x2084cc(0x211)](_0x43471a[_0x2084cc(0x25f)]['id'],_0x2084cc(0x218))[_0x2084cc(0x1cf)](_0x27eb0a=>{telegramError(_0x27eb0a);}),_0xda8a20[_0x2084cc(0x196)](_0x1e2fb7=>{const _0x2efe26=_0x2084cc;if(_0x1e2fb7[_0x2efe26(0x284)]!=_0x2efe26(0x1ef))toggleBot(_0x1e2fb7[_0x2efe26(0x284)],toggleStatus(_0x1e2fb7[_0x2efe26(0x284)]),_0x2efe26(0x264));})):(tgBot['sendMessage'](_0x43471a[_0x2084cc(0x25f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1c2181)[_0x2084cc(0x1cf)](_0xeac0d6=>{telegramError(_0xeac0d6);}),toggleBot(_0x1c2181,toggleStatus(_0x1c2181),_0x2084cc(0x264)));}),tgBot[_0xbd8601(0x1bd)](_0xbd8601(0x298));});}}),tgBot[_0x54167a(0x1a3)](/\/off/,_0x22fb11=>{const _0x118c8d=_0x54167a;if(!validateTelegram(_0x22fb11))return;tgBot[_0x118c8d(0x1bd)](_0x118c8d(0x298));const _0x32599b=getEnabledBots();if(_0x32599b[_0x118c8d(0x1c3)]==0x0)tgBot[_0x118c8d(0x211)](_0x22fb11[_0x118c8d(0x25f)]['id'],_0x118c8d(0x190))[_0x118c8d(0x1cf)](_0x16231b=>{telegramError(_0x16231b);});else{if(_0x32599b[_0x118c8d(0x1c3)]>0x1)_0x32599b['push']({'botID':_0x118c8d(0x1ef)});let _0x597e89=[],_0x5cf26e=[];const _0x4366f6=_0x32599b[_0x118c8d(0x1c3)]%0x4==0x0||_0x32599b['length']%0x4==0x3||_0x32599b[_0x118c8d(0x1c3)]%0x3==0x1?0x4:0x3;let _0x1f1134=0x0;_0x32599b[_0x118c8d(0x196)]((_0x10612c,_0x45c4e8)=>{const _0x2aa4fd=_0x118c8d;if(_0x45c4e8%_0x4366f6==0x0)_0x5cf26e=[];_0x5cf26e[_0x2aa4fd(0x22c)]({'text':_0x10612c[_0x2aa4fd(0x284)]==_0x2aa4fd(0x1ef)?_0x2aa4fd(0x203):'Bot\x20'+_0x10612c['botID'],'callback_data':_0x10612c[_0x2aa4fd(0x284)]}),_0x45c4e8%_0x4366f6==0x0&&(_0x597e89[_0x1f1134]=_0x5cf26e,_0x1f1134++);}),tgBot[_0x118c8d(0x211)](_0x22fb11[_0x118c8d(0x25f)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x597e89}})[_0x118c8d(0x1cf)](_0x493a7f=>{telegramError(_0x493a7f);}),tgBot['on'](_0x118c8d(0x298),async _0x4da854=>{const _0xf5858=_0x118c8d,_0x1b8d14=_0x4da854[_0xf5858(0x1ea)],_0xf48424=_0x4da854[_0xf5858(0x248)];tgBot[_0xf5858(0x1b1)](_0x4da854['id'])[_0xf5858(0x1ba)](async()=>{const _0x15ee8c=_0xf5858;_0x1b8d14==_0x15ee8c(0x1ef)?(tgBot[_0x15ee8c(0x211)](_0xf48424[_0x15ee8c(0x25f)]['id'],_0x15ee8c(0x2ab))[_0x15ee8c(0x1cf)](_0x421097=>{telegramError(_0x421097);}),_0x32599b[_0x15ee8c(0x196)](_0x2c9fc8=>{const _0x505700=_0x15ee8c;if(_0x2c9fc8[_0x505700(0x284)]!=_0x505700(0x1ef))toggleBot(_0x2c9fc8['botID'],toggleStatus(_0x2c9fc8['botID']),_0x505700(0x264));})):(tgBot[_0x15ee8c(0x211)](_0xf48424['chat']['id'],_0x15ee8c(0x1a1)+_0x1b8d14)[_0x15ee8c(0x1cf)](_0x436a41=>{telegramError(_0x436a41);}),toggleBot(_0x1b8d14,toggleStatus(_0x1b8d14),'stopped'));}),tgBot[_0xf5858(0x1bd)]('callback_query');});}}),tgBot[_0x54167a(0x1a3)](/\/portfolio/,_0x2955e6=>{const _0x34d0e1=_0x54167a;if(!validateTelegram(_0x2955e6))return;tgBot[_0x34d0e1(0x1bd)]('callback_query');const _0xe3dc54=getEnabledBots();if(_0xe3dc54[_0x34d0e1(0x1c3)]==0x0)tgBot['sendMessage'](_0x2955e6[_0x34d0e1(0x25f)]['id'],_0x34d0e1(0x190))['catch'](_0x26ea0a=>{telegramError(_0x26ea0a);});else{if(_0xe3dc54[_0x34d0e1(0x1c3)]>0x1){let _0x17b115=[],_0x195d5b=[];const _0x1316f4=_0xe3dc54[_0x34d0e1(0x1c3)]%0x4==0x0||_0xe3dc54['length']%0x4==0x3||_0xe3dc54[_0x34d0e1(0x1c3)]%0x3==0x1?0x4:0x3;let _0x1dd70c=0x0;_0xe3dc54[_0x34d0e1(0x196)]((_0x2ac2ff,_0x210d2e)=>{const _0x11f0b7=_0x34d0e1;if(_0x210d2e%_0x1316f4==0x0)_0x195d5b=[];_0x195d5b[_0x11f0b7(0x22c)]({'text':_0x11f0b7(0x24a)+_0x2ac2ff[_0x11f0b7(0x284)],'callback_data':_0x2ac2ff[_0x11f0b7(0x284)]}),_0x210d2e%_0x1316f4==0x0&&(_0x17b115[_0x1dd70c]=_0x195d5b,_0x1dd70c++);}),tgBot[_0x34d0e1(0x211)](_0x2955e6[_0x34d0e1(0x25f)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x17b115}})['catch'](_0x4d0666=>{telegramError(_0x4d0666);}),tgBot['on'](_0x34d0e1(0x298),async _0xdc06a9=>{const _0x20d9cf=_0x34d0e1,_0x2758d7=_0xdc06a9[_0x20d9cf(0x1ea)],_0x48ace1=_0xdc06a9['message'];tgBot['answerCallbackQuery'](_0xdc06a9['id'])[_0x20d9cf(0x1ba)](async()=>{const _0x4f60a3=_0x20d9cf;if(pid[_0x2758d7])pid[_0x2758d7][_0x4f60a3(0x1a4)]({'function':_0x4f60a3(0x1ca),'args':null});}),tgBot[_0x20d9cf(0x1bd)](_0x20d9cf(0x298));});}else{const _0x853b79=_0xe3dc54[0x0][_0x34d0e1(0x284)];if(pid[_0x853b79])pid[_0x853b79][_0x34d0e1(0x1a4)]({'function':_0x34d0e1(0x1ca),'args':null});}}}),tgBot[_0x54167a(0x1a3)](/\/toggle/,_0x342fb7=>{const _0x3f68ef=_0x54167a;if(!validateTelegram(_0x342fb7))return;tgBot[_0x3f68ef(0x1bd)](_0x3f68ef(0x298));const _0x367359=getBotsWithMode();if(_0x367359[_0x3f68ef(0x1c3)]==0x0)tgBot['sendMessage'](_0x342fb7[_0x3f68ef(0x25f)]['id'],_0x3f68ef(0x190))[_0x3f68ef(0x1cf)](_0x565cb8=>{telegramError(_0x565cb8);});else{let _0x19696a=[],_0x25a412=[];const _0x1a7986=0x2;let _0x500dd8=0x0;_0x367359[_0x3f68ef(0x196)]((_0x372999,_0x447928)=>{const _0x59c4fd=_0x3f68ef;if(_0x447928%_0x1a7986==0x0)_0x25a412=[];_0x25a412[_0x59c4fd(0x22c)]({'text':_0x59c4fd(0x24a)+_0x372999[_0x59c4fd(0x284)]+'\x20('+_0x372999[_0x59c4fd(0x180)]+')','callback_data':_0x372999['botID']}),_0x447928%_0x1a7986==0x0&&(_0x19696a[_0x500dd8]=_0x25a412,_0x500dd8++);}),tgBot[_0x3f68ef(0x211)](_0x342fb7[_0x3f68ef(0x25f)]['id'],_0x3f68ef(0x17f),{'reply_markup':{'inline_keyboard':_0x19696a}})['catch'](_0x420577=>{telegramError(_0x420577);}),tgBot['on'](_0x3f68ef(0x298),async _0x3e3f59=>{const _0xc5f3fe=_0x3f68ef,_0x3b928c=_0x3e3f59[_0xc5f3fe(0x1ea)],_0x21c0f0=_0x3e3f59['message'];tgBot[_0xc5f3fe(0x1b1)](_0x3e3f59['id'])['then'](async()=>{const _0x148337=_0xc5f3fe,_0x2fd559=_0x367359[_0x148337(0x2aa)](_0x313c60=>_0x313c60[_0x148337(0x284)]==_0x3b928c),_0x508135=_0x2fd559[_0x148337(0x180)]==_0x148337(0x1ad)?_0x148337(0x1fa):_0x148337(0x1ad);tgBot[_0x148337(0x211)](_0x21c0f0['chat']['id'],_0x148337(0x28e)+_0x3b928c+_0x148337(0x1f9)+_0x508135+_0x148337(0x288))[_0x148337(0x1cf)](_0x2d4407=>{telegramError(_0x2d4407);}),toggleBotMode(_0x3b928c);}),tgBot['removeListener'](_0xc5f3fe(0x298));});}}),tgBot[_0x54167a(0x1a3)](/\/names/,_0x3dc1ef=>{const _0x11a791=_0x54167a;if(!validateTelegram(_0x3dc1ef))return;let _0xa77228='';config[_0x11a791(0x196)](_0x12253a=>{const _0x37b144=_0x11a791;_0xa77228+=_0x37b144(0x24a)+_0x12253a['botID']+':\x20'+_0x12253a[_0x37b144(0x202)]+'\x0a';}),tgBot['sendMessage'](_0x3dc1ef[_0x11a791(0x25f)]['id'],_0xa77228,{'parse_mode':_0x11a791(0x249)})['catch'](_0xb5ab5e=>{telegramError(_0xb5ab5e);});}),tgBot[_0x54167a(0x1a3)](/\/disable/,_0x4db5f0=>{const _0x35ee29=_0x54167a;if(!validateTelegram(_0x4db5f0))return;tgBot[_0x35ee29(0x211)](_0x4db5f0[_0x35ee29(0x25f)]['id'],_0x35ee29(0x1f5))[_0x35ee29(0x1cf)](_0x41f6fd=>{telegramError(_0x41f6fd);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x45c11e=>{if(!validateTelegram(_0x45c11e))return;tgBot['sendMessage'](_0x45c11e['chat']['id'],_0x1330b6)['catch'](_0x5d3c2e=>{telegramError(_0x5d3c2e);});}),tgBot['on']('polling_error',_0x48a6bf=>{const _0x5c235b=_0x54167a;_0x48a6bf[_0x5c235b(0x1f2)]()[_0x5c235b(0x23f)](_0x5c235b(0x21c))&&(logging(_0x5c235b(0x239)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x5c235b(0x16a))[_0x5c235b(0x1b4)](_0x5c235b(0x2b0),_0x5c235b(0x239)));}),process[_0x54167a(0x194)](_0x54167a(0x205),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x54167a(0x194)](_0x54167a(0x285),()=>{const _0x2bd33d=_0x54167a;if(tgBot)tgBot[_0x2bd33d(0x192)]();process['exit'](0x1);});}}function disableTelegram(){const _0x5c3169=_0xc28578;tgBot&&(tgBot[_0x5c3169(0x192)](),tgBot=null);}function sendTelegram(_0x3a7413,_0x4f23a0){const _0x26b435=_0xc28578;if(settings['telegramEnabled']){if(settings[_0x26b435(0x1bc)]=='all'||(_0x4f23a0['type']==_0x26b435(0x2ac)||_0x4f23a0[_0x26b435(0x23d)]==_0x26b435(0x169))&&settings[_0x26b435(0x1bc)]==_0x26b435(0x1e6)||_0x4f23a0['type']==_0x26b435(0x1ae)&&settings[_0x26b435(0x1bc)]==_0x26b435(0x1a0)){if(tgBot&&settings[_0x26b435(0x23b)]){if(_0x4f23a0[_0x26b435(0x1f7)])tgBot[_0x26b435(0x211)](settings[_0x26b435(0x23b)],_0x4f23a0[_0x26b435(0x202)]+_0x26b435(0x1a9)+_0x4f23a0[_0x26b435(0x222)])['catch'](_0x1c4afd=>{telegramError(_0x1c4afd);});else tgBot[_0x26b435(0x211)](settings[_0x26b435(0x23b)],_0x26b435(0x24a)+_0x3a7413+_0x26b435(0x1a9)+_0x4f23a0['event'])[_0x26b435(0x1cf)](_0x36a380=>{telegramError(_0x36a380);});}}}}function sendTelegramMsg(_0x92a2c0){const _0x26bfb3=_0xc28578;settings[_0x26bfb3(0x171)]&&(tgBot&&settings['telegramChatId']&&tgBot[_0x26bfb3(0x211)](settings[_0x26bfb3(0x23b)],_0x92a2c0)[_0x26bfb3(0x1cf)](_0x259b15=>{telegramError(_0x259b15);}));}function getDeviceWithIp(_0x4dbb35){const _0x4cfadd=_0xc28578;return devices[_0x4cfadd(0x2aa)](_0x37af1b=>_0x37af1b['ip']===_0x4dbb35);}function temporaryAccess2FA(_0x460e73,_0x2b21b1){const _0x2f4c00=_0xc28578;let _0x4f0bad=new Date(),_0x478593=![];if(lastIpApproval){if(_0x4f0bad-lastIpApproval<0x1388)_0x478593=!![];}lastIpApproval=new Date();if(_0x478593)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x2f4c00(0x1bd)](_0x2f4c00(0x298)),tgBot[_0x2f4c00(0x211)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x2b21b1)[_0x2f4c00(0x2a3)]+'</b>\x20?',{'parse_mode':_0x2f4c00(0x249),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x2f4c00(0x213),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x2f4c00(0x24e),'callback_data':_0x2f4c00(0x24e)}]]}})['catch'](_0x292451=>{telegramError(_0x292451);}),tgBot['on'](_0x2f4c00(0x298),async _0x234470=>{const _0x976aa9=_0x2f4c00,_0x3159e3=_0x234470[_0x976aa9(0x1ea)],_0x1549e1=_0x234470[_0x976aa9(0x248)];tgBot[_0x976aa9(0x1b1)](_0x234470['id'])['then'](async()=>{const _0x2d7eb7=_0x976aa9;devices[_0x460e73][_0x2d7eb7(0x1d4)]={'clientip':_0x2b21b1,'timestamp':new Date()[_0x2d7eb7(0x1df)](),'expiry':_0x3159e3},_0x3159e3!=_0x2d7eb7(0x24e)?(await tgBot[_0x2d7eb7(0x211)](_0x1549e1[_0x2d7eb7(0x25f)]['id'],_0x2d7eb7(0x29b)+_0x3159e3+'\x20minutes',{'parse_mode':'HTML'})[_0x2d7eb7(0x1cf)](_0x556d1e=>{telegramError(_0x556d1e);}),io['to'](_0x460e73)[_0x2d7eb7(0x1b4)](_0x2d7eb7(0x219),{'access':{'allow':![],'reason':_0x2d7eb7(0x1dd),'token':null}})):(await tgBot[_0x2d7eb7(0x211)](_0x1549e1[_0x2d7eb7(0x25f)]['id'],_0x2d7eb7(0x247))[_0x2d7eb7(0x1cf)](_0x3f4183=>{telegramError(_0x3f4183);}),io['to'](_0x460e73)[_0x2d7eb7(0x1b4)]('status',{'access':{'allow':![],'reason':_0x2d7eb7(0x214),'token':null}}));}),tgBot[_0x976aa9(0x1bd)](_0x976aa9(0x298));}));}function loginAccess2FA(_0xd2c1cd,_0x3e9fca){const _0x2edcaf=_0xc28578;tgBot&&settings[_0x2edcaf(0x23b)]&&(tgBot[_0x2edcaf(0x1bd)]('callback_query'),tgBot[_0x2edcaf(0x211)](settings['telegramChatId'],_0x2edcaf(0x2b7)+normalizeIP(_0x3e9fca)[_0x2edcaf(0x2a3)]+'</b>\x20?',{'parse_mode':_0x2edcaf(0x249),'reply_markup':{'inline_keyboard':[[{'text':_0x2edcaf(0x272),'callback_data':loginExpiry},{'text':_0x2edcaf(0x24e),'callback_data':_0x2edcaf(0x24e)}]]}})[_0x2edcaf(0x1cf)](_0x5314dd=>{telegramError(_0x5314dd);}),tgBot['on'](_0x2edcaf(0x298),async _0x3c54aa=>{const _0x23d632=_0x2edcaf,_0x30521a=_0x3c54aa[_0x23d632(0x1ea)],_0x4c955=_0x3c54aa[_0x23d632(0x248)];tgBot['answerCallbackQuery'](_0x3c54aa['id'])[_0x23d632(0x1ba)](async()=>{const _0x391bf5=_0x23d632;devices[_0xd2c1cd][_0x391bf5(0x275)]={'clientip':_0x3e9fca,'timestamp':new Date()['getTime'](),'expiry':_0x30521a},_0x30521a!=_0x391bf5(0x24e)?(await tgBot[_0x391bf5(0x211)](_0x4c955[_0x391bf5(0x25f)]['id'],_0x391bf5(0x15c),{'parse_mode':_0x391bf5(0x249)})[_0x391bf5(0x1cf)](_0x5c1d61=>{telegramError(_0x5c1d61);}),io['to'](_0xd2c1cd)[_0x391bf5(0x1b4)](_0x391bf5(0x219),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x391bf5(0x211)](_0x4c955[_0x391bf5(0x25f)]['id'],_0x391bf5(0x22d))[_0x391bf5(0x1cf)](_0x49441e=>{telegramError(_0x49441e);}),io['to'](_0xd2c1cd)[_0x391bf5(0x1b4)](_0x391bf5(0x219),{'access':{'allow':![],'reason':_0x391bf5(0x243),'token':null}}));}),tgBot[_0x23d632(0x1bd)](_0x23d632(0x298));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3e914f=_0xc28578;return dbConfig[_0x3e914f(0x17c)](_0x3e914f(0x233))[_0x3e914f(0x1b3)](_0x3e914f(0x284))[_0x3e914f(0x258)]({'status':_0x3e914f(0x1af)})['value']()||[];}function getDisabledBots(){const _0x395a31=_0xc28578;return dbConfig[_0x395a31(0x17c)](_0x395a31(0x233))[_0x395a31(0x1b3)](_0x395a31(0x284))[_0x395a31(0x258)]({'status':_0x395a31(0x212)})['value']()||[];}function getBotsWithMode(){const _0x247992=_0xc28578,_0x1a6068=dbConfig[_0x247992(0x17c)]('bots')[_0x247992(0x1b3)]('botID')[_0x247992(0x191)]()||[];return _0x1a6068[_0x247992(0x196)](_0x585f4c=>{const _0x23f511=_0x247992,_0x15e771=configpath+_0x23f511(0x1c2)+_0x585f4c[_0x23f511(0x284)]+_0x23f511(0x26e),_0xba3d7e=fs[_0x23f511(0x28c)](_0x15e771);if(_0xba3d7e){const _0x4669f5=fs[_0x23f511(0x1d6)](_0x15e771);try{const _0x481e9c=JSON[_0x23f511(0x226)](_0x4669f5),_0x42df70=_0x481e9c?_0x481e9c[_0x23f511(0x18c)][0x0][_0x23f511(0x20c)]:![];_0x585f4c[_0x23f511(0x180)]=_0x42df70?_0x23f511(0x1ad):_0x23f511(0x1fa);}catch(_0x1afee3){_0x585f4c[_0x23f511(0x180)]=_0x23f511(0x1fa);}}else _0x585f4c['mode']=_0x23f511(0x1fa);}),_0x1a6068;}function getSettings(){const _0x53c2e0=_0xc28578;return dbSettings[_0x53c2e0(0x17c)](_0x53c2e0(0x2a0))[_0x53c2e0(0x191)]()||{'timeshift':0x0};}function getSecure(){const _0x13da38=_0xc28578;return dbSecure[_0x13da38(0x17c)](_0x13da38(0x1e8))[_0x13da38(0x191)]()||{};}function getBlacklist(){const _0x5b1b7f=_0xc28578;return dbSecure[_0x5b1b7f(0x17c)](_0x5b1b7f(0x2a7))['value']()||[];}function broadcastToBots(_0x3d42c5,_0x3e3473){config['forEach'](_0x3833e4=>{const _0x383181=_0x1365;if(_0x3833e4['status']==_0x383181(0x1af)&&_0x3833e4[_0x383181(0x19e)]==_0x383181(0x166)){if(pid[_0x3833e4[_0x383181(0x284)]])pid[_0x3833e4[_0x383181(0x284)]][_0x383181(0x1a4)]({[_0x3d42c5]:_0x3e3473});}});}function storeSettings(_0x407bb4,_0x1f32c8=![]){const _0x4c8e94=_0xc28578;_0x407bb4={...settings,..._0x407bb4};if(_0x1f32c8&&_0x407bb4[_0x4c8e94(0x17e)]!=_0x4c8e94(0x198)&&_0x407bb4[_0x4c8e94(0x17e)]!=''){const _0x5e1f4e=crypt[_0x4c8e94(0x224)](secure[_0x4c8e94(0x182)],_0x407bb4['bbPassword'])['message'][_0x4c8e94(0x1e2)]('@')[0x0],_0x4feb4e=bcrypt[_0x4c8e94(0x271)](_0x5e1f4e,saltRounds);_0x407bb4={..._0x407bb4,'bbPassword':_0x4feb4e};}if(_0x1f32c8&&_0x407bb4[_0x4c8e94(0x199)]!=_0x4c8e94(0x198)&&_0x407bb4[_0x4c8e94(0x199)]!=''){const _0x111ac3=crypt[_0x4c8e94(0x224)](secure[_0x4c8e94(0x182)],_0x407bb4[_0x4c8e94(0x199)])[_0x4c8e94(0x248)]['split']('@')[0x0];_0x407bb4={..._0x407bb4,'telegramToken':_0x111ac3};}const _0x5604b5=_0x407bb4[_0x4c8e94(0x199)]!=_0x4c8e94(0x198)&&_0x407bb4[_0x4c8e94(0x199)]!=settings['telegramToken']||_0x407bb4[_0x4c8e94(0x1c1)]!=settings[_0x4c8e94(0x1c1)],_0x5e0aeb=_0x407bb4['telegramToken']==''||_0x407bb4[_0x4c8e94(0x1c1)]=='';if(_0x5604b5)_0x407bb4[_0x4c8e94(0x1bc)]=_0x4c8e94(0x1ef);for(const [_0x5c9628,_0x19631c]of Object[_0x4c8e94(0x261)](_0x407bb4)){if(_0x5c9628==_0x4c8e94(0x199)&&_0x19631c==_0x4c8e94(0x198)){_0x407bb4[_0x4c8e94(0x199)]=settings[_0x4c8e94(0x199)];continue;};if(_0x5c9628==_0x4c8e94(0x17e)&&_0x19631c==_0x4c8e94(0x198)){_0x407bb4['bbPassword']=settings[_0x4c8e94(0x17e)];continue;};dbSettings[_0x4c8e94(0x1ff)]('settings.'+_0x5c9628,_0x19631c)[_0x4c8e94(0x185)]();}settings=_0x407bb4,io['to'](_0x4c8e94(0x16a))[_0x4c8e94(0x1b4)](_0x4c8e94(0x2a0),cleanSettings()),broadcastToBots(_0x4c8e94(0x257),settings[_0x4c8e94(0x257)]);if(_0x5604b5&&!_0x5e0aeb)initTelegram();if(_0x5604b5&&_0x5e0aeb)disableTelegram();getAllClients()[_0x4c8e94(0x196)](_0x346c99=>{const _0x2fe1af=_0x4c8e94;getSocket(_0x346c99['id'])[_0x2fe1af(0x1b4)]('status',{'access':{'allow':![],'reason':_0x2fe1af(0x1dd),'token':null}});});}function updateSetting(_0x572182,_0x4c84d0){const _0x2d015c=_0xc28578;dbSettings[_0x2d015c(0x1ff)](_0x2d015c(0x270)+_0x572182,_0x4c84d0)['write'](),settings=getSettings(),io['to'](_0x2d015c(0x16a))[_0x2d015c(0x1b4)](_0x2d015c(0x2a0),cleanSettings());}function storeSecure(_0x4ae215){const _0x583e2f=_0xc28578;dbSecure['get'](_0x583e2f(0x1e8))[_0x583e2f(0x22c)](_0x4ae215)['write'](),secure=_0x4ae215;}function addBlacklist(_0x1be341){const _0x1a5812=_0xc28578;cleanBlacklist();let _0x1d35bf;devices[_0x1be341][_0x1a5812(0x1d4)]?_0x1d35bf=Math[_0x1a5812(0x1d3)](devices[_0x1be341][_0x1a5812(0x1d4)][_0x1a5812(0x156)],loginExpiry):_0x1d35bf=loginExpiry,dbSecure['get'](_0x1a5812(0x2a7))[_0x1a5812(0x22c)]({'expiry':new Date()[_0x1a5812(0x1df)]()+_0x1d35bf*0x3c*0x3e8,'token':devices[_0x1be341][_0x1a5812(0x187)][_0x1a5812(0x279)]})[_0x1a5812(0x185)](),blacklist=dbSecure[_0x1a5812(0x17c)](_0x1a5812(0x2a7))[_0x1a5812(0x191)]();}function cleanBlacklist(){const _0x5e1c45=_0xc28578;let _0x5cdd27=dbSecure[_0x5e1c45(0x17c)](_0x5e1c45(0x2a7))[_0x5e1c45(0x1ee)]()['value'](),_0x3b91df=new Date()[_0x5e1c45(0x1df)]();_0x5cdd27[_0x5e1c45(0x196)](_0x2ef309=>{const _0x4e9ff6=_0x5e1c45;_0x2ef309[_0x4e9ff6(0x156)]<_0x3b91df&&dbSecure['get'](_0x4e9ff6(0x2a7))[_0x4e9ff6(0x16b)]({'expiry':_0x2ef309[_0x4e9ff6(0x156)]})[_0x4e9ff6(0x185)]();});}function initStates(){let _0x3e0823=getConfiguration();_0x3e0823['forEach'](_0x41af41=>{const _0x3a71cd=_0x1365;_0x41af41[_0x3a71cd(0x19e)]='stopped';}),storeConfiguration(_0x3e0823);}function onKeys(){const _0x4f667d=new RSA();return new Promise(_0x165b30=>{const _0x3e50a6=_0x1365;_0x4f667d[_0x3e50a6(0x281)]()[_0x3e50a6(0x1ba)](_0x43738e=>{_0x165b30(_0x43738e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x46156b=_0xc28578;let _0x2a137d=getConfiguration(),_0x2aa576=![];_0x2a137d['forEach'](_0x41b497=>{const _0x329404=_0x1365;if(_0x41b497[_0x329404(0x219)]==_0x329404(0x166))_0x41b497[_0x329404(0x219)]='enabled',_0x2aa576=!![];else _0x41b497[_0x329404(0x219)]==_0x329404(0x264)&&(_0x41b497[_0x329404(0x219)]='disabled',_0x2aa576=!![]);});if(_0x2aa576)storeConfiguration(_0x2a137d);let _0x4af83=getSecure();if(!_0x4af83['hasOwnProperty'](_0x46156b(0x1e4))){let _0x24a164=await generateKeys();_0x4af83[_0x46156b(0x2b6)]=_0x24a164[_0x46156b(0x2b6)],_0x4af83['privateKey']=_0x24a164[_0x46156b(0x182)],_0x4af83[_0x46156b(0x1e4)]=crypto['randomBytes'](0x20)[_0x46156b(0x1f2)](_0x46156b(0x2b8));;storeSecure(_0x4af83);}let _0x43eddc=getSettings();_0x2aa576=![];!_0x43eddc[_0x46156b(0x2a4)](_0x46156b(0x26b))&&(_0x43eddc[_0x46156b(0x26b)]=![],_0x43eddc['bbUsername']='',_0x43eddc['bbPassword']='',_0x43eddc[_0x46156b(0x290)]=![],_0x2aa576=!![]);!_0x43eddc[_0x46156b(0x2a4)](_0x46156b(0x1d7))&&(_0x43eddc[_0x46156b(0x1d7)]=![],_0x43eddc[_0x46156b(0x255)]=[],_0x43eddc[_0x46156b(0x225)]=![],_0x2aa576=!![]);if(!_0x43eddc[_0x46156b(0x2a4)]('telegramEnabled')){if(_0x43eddc[_0x46156b(0x23b)])_0x43eddc['telegramEnabled']=!![];else _0x43eddc[_0x46156b(0x171)]=![];_0x2aa576=!![];}if(_0x2aa576)storeSettings(_0x43eddc);}function storeConfiguration(_0x279b2e){const _0x45aa90=_0xc28578;dbConfig[_0x45aa90(0x17c)]('bots')[_0x45aa90(0x16b)]()[_0x45aa90(0x185)](),_0x279b2e['forEach'](_0x2a17f0=>{const _0x36f1a7=_0x45aa90;delete _0x2a17f0[_0x36f1a7(0x180)];}),dbConfig[_0x45aa90(0x17c)](_0x45aa90(0x233))[_0x45aa90(0x22c)](..._0x279b2e)[_0x45aa90(0x185)](),config=_0x279b2e;}function resetPassword(){const _0x3f285d=_0xc28578;tgBot&&settings[_0x3f285d(0x23b)]&&(tgBot[_0x3f285d(0x1bd)](_0x3f285d(0x298)),tgBot[_0x3f285d(0x211)](settings['telegramChatId'],_0x3f285d(0x262),{'parse_mode':_0x3f285d(0x249),'reply_markup':{'inline_keyboard':[[{'text':_0x3f285d(0x16d),'callback_data':_0x3f285d(0x16d)},{'text':'no','callback_data':'no'}]]}})[_0x3f285d(0x1cf)](_0x1b829e=>{telegramError(_0x1b829e);}),tgBot['on']('callback_query',async _0x2bab21=>{const _0x2ce9f6=_0x3f285d,_0x5b8632=_0x2bab21[_0x2ce9f6(0x1ea)],_0x45e62d=_0x2bab21[_0x2ce9f6(0x248)];tgBot[_0x2ce9f6(0x1b1)](_0x2bab21['id'])['then'](async()=>{const _0x3ddc57=_0x2ce9f6;if(_0x5b8632!='no'){const _0x5bc77d=0xf,_0x333779='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x30cf46=Array[_0x3ddc57(0x26a)](crypto[_0x3ddc57(0x1b8)](new Uint32Array(_0x5bc77d)))[_0x3ddc57(0x172)](_0x16f2f8=>_0x333779[_0x16f2f8%_0x333779[_0x3ddc57(0x1c3)]])[_0x3ddc57(0x1c0)](''),_0x1bc56b=bcrypt['hashSync'](_0x30cf46,saltRounds);storeSettings({'bbPassword':_0x1bc56b}),await tgBot['sendMessage'](_0x45e62d[_0x3ddc57(0x25f)]['id'],_0x3ddc57(0x1f6)+_0x30cf46,{'parse_mode':_0x3ddc57(0x249)})['catch'](_0x173d20=>{telegramError(_0x173d20);});}else await tgBot['sendMessage'](_0x45e62d['chat']['id'],_0x3ddc57(0x267))['catch'](_0x42476a=>{telegramError(_0x42476a);});}),tgBot[_0x2ce9f6(0x1bd)]('callback_query');}));}function logging(_0x45c3db){const _0x5820a3=_0xc28578;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x45c3db);if(tgBot&&settings[_0x5820a3(0x23b)]&&settings['telegramEvents']!=_0x5820a3(0x1a0))tgBot[_0x5820a3(0x211)](settings['telegramChatId'],_0x5820a3(0x1c4)+_0x45c3db)['catch'](_0x401725=>{telegramError(_0x401725);});}function getServerTime(){const _0x5da409=_0xc28578,_0x208113=new Date();return _0x208113[_0x5da409(0x1eb)]()+'/'+(_0x208113[_0x5da409(0x276)]()+0x1)[_0x5da409(0x1f2)]()[_0x5da409(0x184)](0x2,'0')+'/'+_0x208113[_0x5da409(0x17b)]()[_0x5da409(0x1f2)]()[_0x5da409(0x184)](0x2,'0')+'\x20'+_0x208113[_0x5da409(0x204)]()[_0x5da409(0x1f2)]()[_0x5da409(0x184)](0x2,'0')+':'+_0x208113[_0x5da409(0x241)]()[_0x5da409(0x1f2)]()['padStart'](0x2,'0')+':'+_0x208113[_0x5da409(0x19a)]()[_0x5da409(0x1f2)]()[_0x5da409(0x184)](0x2,'0');}function getTimeStamp(){const _0x1cf302=_0xc28578,_0x5089a0=shiftedTime();return _0x5089a0[_0x1cf302(0x1eb)]()+'/'+(_0x5089a0[_0x1cf302(0x276)]()+0x1)[_0x1cf302(0x1f2)]()[_0x1cf302(0x184)](0x2,'0')+'/'+_0x5089a0[_0x1cf302(0x17b)]()['toString']()[_0x1cf302(0x184)](0x2,'0')+'\x20'+_0x5089a0[_0x1cf302(0x204)]()[_0x1cf302(0x1f2)]()[_0x1cf302(0x184)](0x2,'0')+':'+_0x5089a0[_0x1cf302(0x241)]()['toString']()[_0x1cf302(0x184)](0x2,'0')+':'+_0x5089a0['getSeconds']()[_0x1cf302(0x1f2)]()[_0x1cf302(0x184)](0x2,'0');}function shiftedTime(){const _0x1f54c4=_0xc28578,_0x3746ac=new Date();let _0x6dba7d=_0x3746ac;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x6dba7d=fns[_0x1f54c4(0x274)](_0x3746ac,{'hours':settings[_0x1f54c4(0x257)]});return _0x6dba7d;}function startScheduler(){const _0x147071=_0xc28578;let _0x5340b3=new Date()[_0x147071(0x256)]();_0x5340b3==0x1&&backupConfigFiles();_0x5340b3==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0xc7063a=_0xc28578;fs[_0xc7063a(0x1dc)](configpath,{'withFileTypes':!![]})[_0xc7063a(0x196)](_0x68c5bf=>{const _0x195a81=_0xc7063a;if(!_0x68c5bf[_0x195a81(0x193)]())fs[_0x195a81(0x216)](configpath+_0x68c5bf['name'],configbackuppath+_0x68c5bf[_0x195a81(0x28f)]);});}function triggerAnalytics(){const _0x27add7=_0xc28578;analytics['page']({'title':_0x27add7(0x253),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x1fcd0e,_0x1ea325){const _0x56090a=_0xc28578;if(_0x1fcd0e[_0x56090a(0x2af)]==settings[_0x56090a(0x21d)]&&bcrypt[_0x56090a(0x277)](_0x1fcd0e['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x56090a(0x25c),'token':null};else{const _0x3bcabf=generateLoginToken(_0x1ea325);return{'allow':!![],'reason':_0x56090a(0x25a),'token':_0x3bcabf};}}else return{'allow':![],'reason':_0x56090a(0x1fe),'token':null};}function refreshToken(_0x4820a9){const _0x551fd9=generateLoginToken(_0x4820a9);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x551fd9};}function validateAccess(_0x19bf89,_0xe16790){const _0x16b25f=_0xc28578;let _0x118077=devices[_0xe16790]['ip'],_0x9c6646;const _0x3fe2d5=_0x3e2463=>{const _0x58d522=_0x1365;if(settings[_0x58d522(0x26b)]){if(settings[_0x58d522(0x290)]){if(telegram2FaApproved(_0xe16790)){const _0x55f3c2=generateLoginToken(_0xe16790);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x55f3c2};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x9c6646=validToken(_0x3e2463,_0xe16790),_0x9c6646[_0x58d522(0x2a4)](_0x58d522(0x169))?{'allow':!![],'reason':_0x58d522(0x291),'token':_0x3e2463}:{'allow':![],'reason':_0x58d522(0x173),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x29538d=[...settings[_0x16b25f(0x255)],_0x16b25f(0x197),_0x16b25f(0x20f),_0x16b25f(0x23e)];if(_0x29538d[_0x16b25f(0x23f)](_0x118077))return _0x3fe2d5(_0x19bf89);else{_0x9c6646=validToken(_0x19bf89,_0xe16790);if(_0x9c6646[_0x16b25f(0x2a4)](_0x16b25f(0x169)))return _0x3fe2d5(_0x19bf89);else{if(telegramIpApproved(_0xe16790)){const _0x3f0dd3=generateToken(_0xe16790);return _0x9c6646=_0x3fe2d5(_0x19bf89),_0x9c6646[_0x16b25f(0x27c)]?{'allow':!![],'reason':_0x16b25f(0x24d),'token':_0x3f0dd3}:_0x9c6646;}else return settings[_0x16b25f(0x225)]?{'allow':![],'reason':_0x16b25f(0x299),'token':null}:{'allow':![],'reason':_0x16b25f(0x1db),'token':null};}}}else return _0x3fe2d5(_0x19bf89);}function timelyDecrypt(_0x1a3793,_0x2781fa=!![]){const _0x47433b=_0xc28578;if(_0x1a3793)try{const _0x15f3a6=crypt[_0x47433b(0x224)](secure[_0x47433b(0x182)],_0x1a3793)[_0x47433b(0x248)],_0x36ff65=_0x15f3a6[_0x47433b(0x1e2)]('@')[0x0],_0x5e268e=_0x15f3a6[_0x47433b(0x1e2)]('@')[0x1],_0x5497fc=new Date()[_0x47433b(0x1df)]();if(_0x2781fa){if(_0x5497fc-_0x5e268e<maxSecretAge*0x3e8)return _0x36ff65;else return![];}else return _0x36ff65;}catch(_0x493a06){return![];}else return![];}const validToken=(_0x1aa516,_0x5e561f)=>{const _0x4a0f43=_0xc28578,_0x1607fa=devices[_0x5e561f]['ip'];if(!_0x1aa516)return{'error':_0x4a0f43(0x1f4)};for(let _0x24797e of blacklist){if(_0x24797e[_0x4a0f43(0x279)]==_0x1aa516)return{'error':'Token\x20blacklisted'};}let _0x3f558c;try{_0x3f558c=jwt[_0x4a0f43(0x2ba)](_0x1aa516,secure[_0x4a0f43(0x1e4)]+_0x5e561f);}catch{return{'error':_0x4a0f43(0x29d)};}if(!_0x3f558c['hasOwnProperty']('clientip')&&!_0x3f558c[_0x4a0f43(0x2a4)](_0x4a0f43(0x2af))||!_0x3f558c[_0x4a0f43(0x2a4)](_0x4a0f43(0x158)))return{'error':_0x4a0f43(0x1e9)};if(!_0x3f558c['hasOwnProperty'](_0x4a0f43(0x2af))&&_0x3f558c[_0x4a0f43(0x2a4)]('clientip')){const {clientip:_0x162ead}=_0x3f558c;return _0x1607fa==_0x162ead?{'success':_0x4a0f43(0x293)}:{'error':_0x4a0f43(0x1f8)};}else{if(_0x3f558c[_0x4a0f43(0x2a4)](_0x4a0f43(0x2af))&&_0x3f558c[_0x4a0f43(0x2a4)](_0x4a0f43(0x16f))){const {username:_0x551b88,clientip:_0xad6223}=_0x3f558c;return settings['bbUsername']==_0x551b88&&_0x1607fa==_0xad6223?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x4a0f43(0x296)};}}},generateLoginToken=_0x4791aa=>{const _0x46de1a=_0xc28578;if(_0x4791aa){const _0x5ac612=devices[_0x4791aa]['ip'];return jwt[_0x46de1a(0x29a)]({'username':settings[_0x46de1a(0x21d)],'clientip':_0x5ac612},secure[_0x46de1a(0x1e4)]+_0x4791aa,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x55df91=>{const _0x9d6fb7=_0xc28578;if(_0x55df91){const _0x3bfee7=devices[_0x55df91]['ip'];return jwt[_0x9d6fb7(0x29a)]({'clientip':_0x3bfee7},secure[_0x9d6fb7(0x1e4)]+_0x55df91,{'expiresIn':devices[_0x55df91]['telegramIpApproval'][_0x9d6fb7(0x156)]*0x3c});}else return![];},telegramIpApproved=_0x12fbc0=>{const _0x337e19=_0xc28578;let _0x4ed896=![];return devices[_0x12fbc0]['telegramIpApproval']&&devices[_0x12fbc0][_0x337e19(0x1d4)][_0x337e19(0x156)]!='reject'&&(_0x4ed896=devices[_0x12fbc0][_0x337e19(0x1d4)][_0x337e19(0x16f)]==devices[_0x12fbc0]['ip']&&new Date()[_0x337e19(0x1df)]()-devices[_0x12fbc0][_0x337e19(0x1d4)][_0x337e19(0x1d1)]<devices[_0x12fbc0][_0x337e19(0x1d4)][_0x337e19(0x156)]*0x3c*0x3e8),_0x4ed896;},telegram2FaApproved=_0x206210=>{const _0x4921f1=_0xc28578;let _0x5242a1=![];return devices[_0x206210][_0x4921f1(0x275)]&&devices[_0x206210]['telegram2FaApproval'][_0x4921f1(0x156)]!=_0x4921f1(0x24e)&&(_0x5242a1=devices[_0x206210]['telegram2FaApproval'][_0x4921f1(0x16f)]==devices[_0x206210]['ip']&&new Date()[_0x4921f1(0x1df)]()-devices[_0x206210][_0x4921f1(0x275)][_0x4921f1(0x1d1)]<devices[_0x206210][_0x4921f1(0x275)][_0x4921f1(0x156)]*0x3c*0x3e8),_0x5242a1;},normalizeIP=_0xc79d0b=>{const _0x25943b=_0xc28578;let _0x27f92b=null,_0x1e2e87=null;if(ipaddr[_0x25943b(0x15b)](_0xc79d0b)){const _0xe04268=ipaddr[_0x25943b(0x226)](_0xc79d0b);_0xe04268[_0x25943b(0x28b)]()===_0x25943b(0x1be)?(_0xe04268[_0x25943b(0x27e)]()&&(_0x27f92b=_0xe04268[_0x25943b(0x1d8)]()['toString']()),_0x1e2e87=_0xe04268[_0x25943b(0x1f2)]()):(_0x27f92b=_0xe04268[_0x25943b(0x1f2)](),_0x1e2e87=_0xe04268[_0x25943b(0x17d)]()['toString']());}return{'show':_0x27f92b?_0x27f92b:_0x1e2e87,'store':_0x1e2e87};};