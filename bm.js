const _0x561a8e=_0x2903;(function(_0x3ce58f,_0x3920b4){const _0x214d03=_0x2903,_0x1c4363=_0x3ce58f();while(!![]){try{const _0x4a5ada=-parseInt(_0x214d03(0x396))/0x1*(-parseInt(_0x214d03(0x35f))/0x2)+parseInt(_0x214d03(0x2fa))/0x3*(parseInt(_0x214d03(0x2df))/0x4)+-parseInt(_0x214d03(0x1cb))/0x5+-parseInt(_0x214d03(0x307))/0x6+-parseInt(_0x214d03(0x2e8))/0x7+parseInt(_0x214d03(0x20d))/0x8+parseInt(_0x214d03(0x1d9))/0x9*(parseInt(_0x214d03(0x36d))/0xa);if(_0x4a5ada===_0x3920b4)break;else _0x1c4363['push'](_0x1c4363['shift']());}catch(_0x1b74c6){_0x1c4363['push'](_0x1c4363['shift']());}}}(_0x9d20,0xe75b9));const _0x2a3937=function(){let _0x43b7b9=!![];return function(_0x57b73e,_0x449845){const _0x675ee6=_0x43b7b9?function(){const _0x2444c0=_0x2903;if(_0x449845){const _0xf94ae3=_0x449845[_0x2444c0(0x2a4)](_0x57b73e,arguments);return _0x449845=null,_0xf94ae3;}}:function(){};return _0x43b7b9=![],_0x675ee6;};}(),_0x3a5573=_0x2a3937(this,function(){const _0x21a888=_0x2903;return _0x3a5573[_0x21a888(0x381)]()[_0x21a888(0x286)](_0x21a888(0x27d))[_0x21a888(0x381)]()[_0x21a888(0x25d)](_0x3a5573)[_0x21a888(0x286)](_0x21a888(0x27d));});_0x3a5573();'use strict';process[_0x561a8e(0x212)][_0x561a8e(0x27c)]=0x1;const childProcess=require(_0x561a8e(0x301)),fs=require('fs'),fns=require(_0x561a8e(0x308)),low=require(_0x561a8e(0x225)),FileSync=require(_0x561a8e(0x2cd)),path=require('path'),crypto=require(_0x561a8e(0x260)),Crypt=require('hybrid-crypto-js')[_0x561a8e(0x2bb)],RSA=require('hybrid-crypto-js')[_0x561a8e(0x280)],bcrypt=require(_0x561a8e(0x353)),jwt=require(_0x561a8e(0x2ec)),ipaddr=require(_0x561a8e(0x360)),argv=require(_0x561a8e(0x2d5))(process[_0x561a8e(0x22e)][_0x561a8e(0x2a5)](0x2))[_0x561a8e(0x22e)],uuidRandom=require(_0x561a8e(0x3a8)),TelegramBot=require(_0x561a8e(0x236)),Mixpanel=require(_0x561a8e(0x37e)),axios=require(_0x561a8e(0x214)),{GraphQLClient,gql}=require(_0x561a8e(0x3a1)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x561a8e(0x329)]||_0x561a8e(0x31a),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x561a8e(0x2a7)](_0x561a8e(0x369)+PORT+_0x561a8e(0x296)),process['exit'](0x1));const HOST=argv[_0x561a8e(0x2a3)]||null,userID=argv[_0x561a8e(0x2ad)]||'',debugging=argv['d']||![],nodeversion=process[_0x561a8e(0x2d0)][_0x561a8e(0x22b)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile=_0x561a8e(0x1e3),securefile=_0x561a8e(0x29d),environment=require('./'+bbpath2+'version.json')[_0x561a8e(0x3ad)]||_0x561a8e(0x2ac),maxBackups=0xa;let validInstallation=!![];!fs[_0x561a8e(0x1d4)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x561a8e(0x261)+userID+'/':bbpath+_0x561a8e(0x261),configbackuppath=configpath+_0x561a8e(0x2d4),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x561a8e(0x2cf)+userID+'/':bbpath+_0x561a8e(0x2cf),loggerfile=fs[_0x561a8e(0x1e2)](logspath+_0x561a8e(0x21c),{'flags':'a'}),temppath=userID?bbpath+_0x561a8e(0x239)+userID+'/':bbpath+'temp/';!fs[_0x561a8e(0x1d4)](configpath)&&fs[_0x561a8e(0x386)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x561a8e(0x1d4)](logspath)&&fs[_0x561a8e(0x386)](logspath);!fs['existsSync'](zippath)&&fs[_0x561a8e(0x386)](zippath);!fs[_0x561a8e(0x1d4)](temppath)&&fs[_0x561a8e(0x386)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x561a8e(0x361)]({'bots':[]})[_0x561a8e(0x36e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x561a8e(0x36e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x561a8e(0x361)]({'secure':{},'blacklist':[]})[_0x561a8e(0x36e)]();let crypt=new Crypt({'md':_0x561a8e(0x333),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x561a8e(0x277)](_0x561a8e(0x29f),{'host':_0x561a8e(0x34d)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x561a8e(0x2f8)]!=''&&settings[_0x561a8e(0x39d)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x28285e,_0x4a8bc9)=>{const _0x2fbafa=_0x561a8e,_0xc886ff=/#[A-Z]{3}#/g;if(typeof _0x28285e==_0x2fbafa(0x292)){!_0x4a8bc9?_0x28285e=_0x28285e[_0x2fbafa(0x38d)](_0xc886ff,''):(_0x28285e=_0x28285e[_0x2fbafa(0x38d)](/#BLU#/g,_0x2fbafa(0x1fa)),_0x28285e=_0x28285e['replace'](/#RED#/g,'\x1b[31m'),_0x28285e=_0x28285e[_0x2fbafa(0x38d)](/#YEL#/g,_0x2fbafa(0x256)),_0x28285e=_0x28285e[_0x2fbafa(0x38d)](/#MAG#/g,_0x2fbafa(0x27f)),_0x28285e=_0x28285e[_0x2fbafa(0x38d)](/#CYA#/g,'\x1b[36m'),_0x28285e=_0x28285e[_0x2fbafa(0x38d)](/#RES#/g,_0x2fbafa(0x1f6)));;}return _0x28285e;},logger={'screen':_0x114e39=>{const _0xd13040=_0x561a8e;console[_0xd13040(0x2a7)](parseColor(_0x114e39,!![]));},'simple':_0x4935a1=>{const _0x4e5c2a=_0x561a8e;console[_0x4e5c2a(0x2a7)](parseColor(_0x4935a1,!![])),loggerfile['write'](util['format'](parseColor(_0x4935a1,![]))+'\x0a');},'full':async _0x563422=>{const _0x296363=_0x561a8e,_0x50349a=getTimeStamp()+_0x296363(0x349)+_0x563422;console[_0x296363(0x2a7)](parseColor(_0x50349a,!![])),loggerfile['write'](util[_0x296363(0x24e)](parseColor(_0x50349a,![]))+'\x0a');if(tgBot&&settings[_0x296363(0x368)]&&settings[_0x296363(0x35b)]!=_0x296363(0x2be))await tgBot[_0x296363(0x346)](settings[_0x296363(0x368)],_0x296363(0x270)+parseColor(_0x563422,![]))[_0x296363(0x215)](_0x24c1c3=>{telegramError(_0x24c1c3);});},'debug':async(_0x48e2c7,_0x5a96c5='')=>{const _0x15de8e=_0x561a8e,_0x578e54=getTimeStamp()+_0x15de8e(0x359)+_0x48e2c7;if(debugging)console[_0x15de8e(0x2a7)](parseColor(_0x578e54,!![]));loggerfile[_0x15de8e(0x36e)](util[_0x15de8e(0x24e)](parseColor(_0x578e54,![]))+'\x0a');if(_0x5a96c5){if(debugging)console[_0x15de8e(0x2a7)](_0x5a96c5);loggerfile[_0x15de8e(0x36e)](util[_0x15de8e(0x24e)](_0x5a96c5)+'\x0a');}}};process['on']('uncaughtException',function(_0x5a337f){const _0x4bb649=_0x561a8e;logger[_0x4bb649(0x20e)](_0x5a337f);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x561a8e(0x337)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x561a8e(0x28c)),app=express(),http=require(_0x561a8e(0x242))[_0x561a8e(0x249)](app);app[_0x561a8e(0x3a9)](fileUpload({'useTempFiles':!![]})),app[_0x561a8e(0x254)](_0x561a8e(0x37c),async(_0x51bd9a,_0x42f3f4)=>{const _0x3d4c46=_0x561a8e,_0x4654c0=_0x51bd9a[_0x3d4c46(0x2eb)][_0x3d4c46(0x1e9)],_0x3a13a4=getClientsWithBotID(_0x3d4c46(0x39b)),_0x3e00fa=_0x51bd9a[_0x3d4c46(0x1f2)][_0x3d4c46(0x1d7)],_0x1a32a6=timelyDecrypt(_0x3e00fa,![]),_0x54cea6=_0x3a13a4[_0x3d4c46(0x246)](_0x32f5f4=>_0x32f5f4[_0x3d4c46(0x1d7)]==_0x1a32a6);if(_0x54cea6){const _0x413af5=normalizeIP(_0x51bd9a[_0x3d4c46(0x2fb)][_0x3d4c46(0x38f)])[_0x3d4c46(0x1eb)],_0x130de8=_0x51bd9a[_0x3d4c46(0x1f2)][_0x3d4c46(0x380)];if(validateAccess(_0x130de8,_0x1a32a6,_0x413af5)[_0x3d4c46(0x2fd)])_0x4654c0==_0x3d4c46(0x30c)&&await backupConfigFiles(),await zipFiles(_0x4654c0),_0x42f3f4[_0x3d4c46(0x2b6)](zippath+(_0x4654c0+'.zip'),_0x74f0e2=>{const _0xa2b6ce=_0x3d4c46;_0x74f0e2&&(logger['full'](_0xa2b6ce(0x2ce)+_0x4654c0),logger[_0xa2b6ce(0x20e)](_0x74f0e2));});else logger[_0x3d4c46(0x383)](_0x3d4c46(0x276)+_0x4654c0+_0x3d4c46(0x26f));}else logger['full'](_0x3d4c46(0x276)+_0x4654c0+_0x3d4c46(0x23f));}),app['post'](_0x561a8e(0x32b),async(_0x10228e,_0x2db68c)=>{const _0x2f3cc4=_0x561a8e,_0x5db1ae=getClientsWithBotID('botmanager'),_0x2be594=_0x10228e[_0x2f3cc4(0x1f2)][_0x2f3cc4(0x1d7)],_0x57e7d5=timelyDecrypt(_0x2be594,![]),_0x4c5c4a=_0x5db1ae[_0x2f3cc4(0x246)](_0x11bf45=>_0x11bf45['uuid']==_0x57e7d5);logger[_0x2f3cc4(0x235)](_0x2f3cc4(0x237));if(_0x4c5c4a){const _0x6c5837=normalizeIP(_0x10228e[_0x2f3cc4(0x2fb)]['remoteAddress'])[_0x2f3cc4(0x1eb)],_0x34deac=_0x10228e[_0x2f3cc4(0x1f2)][_0x2f3cc4(0x380)];if(validateAccess(_0x34deac,_0x57e7d5,_0x6c5837)[_0x2f3cc4(0x2fd)]){if(_0x10228e[_0x2f3cc4(0x399)]){const _0x4a863d=_0x10228e[_0x2f3cc4(0x399)][_0x2f3cc4(0x3ac)];await _0x4a863d['mv'](temppath+_0x4a863d[_0x2f3cc4(0x1f4)]),_0x2db68c[_0x2f3cc4(0x24c)]({'status':!![],'message':_0x2f3cc4(0x355)});const _0x410da0=getBotsWithMode();_0x410da0[_0x2f3cc4(0x27b)]>0x0?confirmRestore(temppath,_0x4a863d[_0x2f3cc4(0x1f4)]):unzipFile(temppath,_0x4a863d['name']);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x2f3cc4(0x383)](_0x2f3cc4(0x2ef));}),app[_0x561a8e(0x3a9)](express['static'](path[_0x561a8e(0x1f5)](__dirname,bbpath2,'build2'))),app[_0x561a8e(0x3a9)](express[_0x561a8e(0x347)](path[_0x561a8e(0x1f5)](__dirname,bbpath2,_0x561a8e(0x34c)))),app[_0x561a8e(0x254)]('/',function(_0x4f3a3f,_0x598180){const _0x1f08de=_0x561a8e;_0x598180[_0x1f08de(0x24f)](path[_0x1f08de(0x1f5)](__dirname,bbpath2,_0x1f08de(0x32d),_0x1f08de(0x2c3)));}),app[_0x561a8e(0x254)](_0x561a8e(0x364),function(_0x423841,_0x4c8677){const _0x883452=_0x561a8e;_0x4c8677['sendFile'](path[_0x883452(0x1f5)](__dirname,bbpath2,_0x883452(0x34c),_0x883452(0x2c3)));}),app['get'](_0x561a8e(0x35a),(_0x3156e3,_0x4cc0ea)=>{const _0x42280c=_0x561a8e;_0x4cc0ea[_0x42280c(0x24f)](path[_0x42280c(0x1f5)](__dirname,bbpath2,_0x42280c(0x34c),_0x42280c(0x2c3)));}),app[_0x561a8e(0x254)](_0x561a8e(0x1f7),(_0x2b045f,_0xad269a)=>{const _0x4af97f=_0x561a8e;_0xad269a[_0x4af97f(0x24f)](path[_0x4af97f(0x1f5)](__dirname,bbpath2,'build',_0x4af97f(0x2c3)));}),app[_0x561a8e(0x254)](_0x561a8e(0x2fe),(_0x493536,_0x4139b0)=>{const _0x18dbe2=_0x561a8e;_0x4139b0[_0x18dbe2(0x24f)](path[_0x18dbe2(0x1f5)](__dirname,bbpath2,_0x18dbe2(0x34c),_0x18dbe2(0x2c3)));}),app[_0x561a8e(0x254)](_0x561a8e(0x2b1),(_0x44778c,_0x372d2b)=>{const _0x5b22fd=_0x561a8e;_0x372d2b['sendFile'](path[_0x5b22fd(0x1f5)](__dirname,bbpath2,_0x5b22fd(0x34c),_0x5b22fd(0x2c3)));}),app[_0x561a8e(0x254)]('/:bot/configuration',(_0x16dec5,_0x393b3e)=>{const _0x1463c2=_0x561a8e;_0x393b3e[_0x1463c2(0x24f)](path['join'](__dirname,bbpath2,_0x1463c2(0x34c),_0x1463c2(0x2c3)));}),app['get'](_0x561a8e(0x339),(_0xb2c865,_0x533d75)=>{const _0x3df4a8=_0x561a8e;_0x533d75['sendFile'](path[_0x3df4a8(0x1f5)](__dirname,bbpath2,_0x3df4a8(0x34c),_0x3df4a8(0x2c3)));});if(HOST)http[_0x561a8e(0x265)](PORT,HOST);else http['listen'](PORT);const io=require(_0x561a8e(0x388))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x175855=_0x561a8e;let _0x471730=_0x175855(0x36b);const _0x14b8a6=networkInterfaces(),_0xc04d98={};for(const _0x47a1d8 of Object[_0x175855(0x2a6)](_0x14b8a6)){for(const _0x5d1144 of _0x14b8a6[_0x47a1d8]){if((_0x5d1144[_0x175855(0x1e0)]==_0x175855(0x28a)||_0x5d1144[_0x175855(0x1e0)]==0x4)&&!_0x5d1144['internal']){const _0x532127=ipaddr[_0x175855(0x2a8)](_0x5d1144['address'])[_0x175855(0x335)]();_0x532127!=_0x175855(0x20b)&&(!_0xc04d98[_0x47a1d8]&&(_0xc04d98[_0x47a1d8]=[]),_0xc04d98[_0x47a1d8][_0x175855(0x377)](_0x5d1144[_0x175855(0x251)]),_0x471730=_0x5d1144['address']);}}}return{'serverip':_0x471730,'netinterfaces':_0xc04d98};}async function startServer(){const _0x92321c=_0x561a8e,{serverip:_0x5e51e4,netinterfaces:_0x35f465}=getServerIP();logger[_0x92321c(0x20e)](''),logger[_0x92321c(0x20e)]('-----------------------------------------------------------------------------------'),await logger[_0x92321c(0x383)](_0x92321c(0x29a)+serverversion+_0x92321c(0x2b0)+(environment=='staging'?_0x92321c(0x238):'')+'\x0a'+(_0x92321c(0x38c)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x92321c(0x3aa)+_0x5e51e4+':'+PORT+_0x92321c(0x228))),logger[_0x92321c(0x20e)]('-----------------------------------------------------------------------------------');if(config[_0x92321c(0x27b)]!=0x0)for(const _0x122a1a of config){if(_0x122a1a[_0x92321c(0x394)]==_0x92321c(0x1f3)||_0x122a1a[_0x92321c(0x394)]=='new')await logger[_0x92321c(0x383)](_0x92321c(0x2bf)+_0x122a1a[_0x92321c(0x243)]+'\x20|\x20'+_0x122a1a[_0x92321c(0x331)]),startBot([_0x122a1a['botID'],userID],{'cwd':bbpath},function(_0x938dc0){const _0x4790b1=_0x92321c;if(_0x938dc0)logger[_0x4790b1(0x383)](_0x938dc0);});else(_0x122a1a['status']=='disabled'||_0x122a1a[_0x92321c(0x394)]==_0x92321c(0x2e3))&&await logger['full'](_0x92321c(0x23a)+_0x122a1a['botID']+_0x92321c(0x273)+_0x122a1a[_0x92321c(0x331)]);}else!newBot&&logger['simple'](_0x92321c(0x26a));if(newBot)addBot();logger[_0x92321c(0x20e)](_0x92321c(0x2e6)),logger['simple'](''),await logger[_0x92321c(0x235)](_0x92321c(0x274)+nodeversion),await logger[_0x92321c(0x235)](_0x92321c(0x370),_0x35f465);}function startSocket(){const _0x1f08fc=_0x561a8e;io['on'](_0x1f08fc(0x323),_0x58aa90=>{const _0x2843d9=_0x1f08fc;let _0x176d49,_0x5e47ba,_0x5bad8a,_0x389a5d,_0x2e7461;const _0x3ffa8a=_0x58aa90[_0x2843d9(0x1cf)][_0x2843d9(0x1f2)][_0x2843d9(0x2c4)];_0x5e47ba=_0x3ffa8a[_0x2843d9(0x311)](/bot[0-9]{3}/);if(_0x5e47ba)_0x5bad8a=_0x5e47ba[0x0][_0x2843d9(0x311)](/[0-9]{3}/);if(_0x5bad8a)_0x176d49=_0x5bad8a[0x0];else _0x176d49='botmanager';const _0x173a04=_0x58aa90[_0x2843d9(0x1cf)]['auth'][_0x2843d9(0x3a6)];if(!_0x173a04)_0x58aa90[_0x2843d9(0x3a5)]('status',{'publicKey':secure[_0x2843d9(0x1de)]});else{_0x389a5d=timelyDecrypt(_0x173a04,![]);if(!_0x389a5d)_0x58aa90[_0x2843d9(0x3a5)](_0x2843d9(0x394),{'publicKey':secure[_0x2843d9(0x1de)]});else{_0x2e7461=normalizeIP(_0x58aa90[_0x2843d9(0x299)][_0x2843d9(0x38f)])['store'];if(!devices[_0x389a5d])devices[_0x389a5d]={'uuid':_0x389a5d,'access':{'token':null}};devices[_0x389a5d]['ip']=_0x2e7461;const _0x26ae37=addClient(_0x58aa90['id'],_0x389a5d,_0x176d49);setAccess(_0x26ae37),emitMessages(),_0x58aa90['on'](_0x2843d9(0x320),_0x50cb9d=>{const _0x3feeb8=_0x2843d9,_0x503ece=timelyDecrypt(_0x50cb9d[_0x3feeb8(0x392)]);if(_0x503ece){_0x50cb9d={'username':_0x50cb9d['username'],'password':_0x503ece},devices[_0x389a5d]['access']=validateCredentials(_0x50cb9d,_0x389a5d);if(devices[_0x389a5d][_0x3feeb8(0x362)]['allow']==![]&&devices[_0x389a5d][_0x3feeb8(0x362)][_0x3feeb8(0x220)]=='2FA\x20login\x20required')_0x58aa90[_0x3feeb8(0x3a5)](_0x3feeb8(0x394),{'access':devices[_0x389a5d]['access']}),loginAccess2FA(_0x389a5d,_0x2e7461);else{if(devices[_0x389a5d][_0x3feeb8(0x362)][_0x3feeb8(0x2fd)]==![]&&devices[_0x389a5d][_0x3feeb8(0x362)][_0x3feeb8(0x220)]==_0x3feeb8(0x264))_0x58aa90[_0x3feeb8(0x3a5)](_0x3feeb8(0x394),{'access':devices[_0x389a5d][_0x3feeb8(0x362)]});else devices[_0x389a5d][_0x3feeb8(0x362)][_0x3feeb8(0x2fd)]&&devices[_0x389a5d][_0x3feeb8(0x362)][_0x3feeb8(0x220)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x389a5d)[_0x3feeb8(0x2f2)](_0x2648ef=>{setAccess(_0x2648ef);}),logger[_0x3feeb8(0x235)](_0x3feeb8(0x358)+_0x389a5d[_0x3feeb8(0x2a5)](-0x8)),setTokenRefresh(_0x389a5d),setSessionTimeout(_0x3feeb8(0x320),_0x389a5d));}}else logger[_0x3feeb8(0x383)](_0x3feeb8(0x204));}),_0x58aa90['on'](_0x2843d9(0x315),()=>{resetPassword();}),_0x58aa90['on'](_0x2843d9(0x324),_0xabe018=>{removeClient(_0x58aa90['id']);}),_0x176d49==_0x2843d9(0x39b)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x44f29f){const _0x4cdd5c=_0x561a8e;if(_0x44f29f!='botmanager'&&config[_0x4cdd5c(0x1f8)]!=''){if(pid[_0x44f29f])pid[_0x44f29f][_0x4cdd5c(0x24c)]({'function':_0x4cdd5c(0x27e),'args':null});}_0x44f29f!='botmanager'&&broadcastToBots('bots',JSON[_0x4cdd5c(0x2d1)](config));}function reloadBotManager(){const _0x3b7666=_0x561a8e;getClientsWithBotID(_0x3b7666(0x39b))['forEach'](_0x221230=>{const _0x2d22b9=_0x3b7666;getSocket(_0x221230['id'])[_0x2d22b9(0x3a5)]('status',{'access':{'allow':![],'reason':_0x2d22b9(0x31b),'token':null}});});}function getSocket(_0x42d670){const _0x1922d1=_0x561a8e;return io[_0x1922d1(0x23d)][_0x1922d1(0x23d)][_0x1922d1(0x254)](_0x42d670);}function setAccess(_0x4c5acb){const _0x173207=_0x561a8e,_0x3c761f=getSocket(_0x4c5acb['id']),_0x5b2298=_0x4c5acb[_0x173207(0x1d7)],_0x311b89=_0x4c5acb[_0x173207(0x1ca)];devices[_0x5b2298][_0x173207(0x362)]=validateAccess(devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x2c9)],_0x5b2298),logger[_0x173207(0x235)]('Setting\x20access:\x20'+devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x220)]+_0x173207(0x2d8)+_0x4c5acb['id'][_0x173207(0x2a5)](-0x8)+_0x173207(0x309)+_0x5b2298[_0x173207(0x2a5)](-0x8)),_0x3c761f[_0x173207(0x1f5)](_0x5b2298);if(devices[_0x5b2298]['access'][_0x173207(0x2fd)]){_0x3c761f[_0x173207(0x1f5)](_0x311b89);if(_0x311b89==_0x173207(0x39b))initializeSocketBotManager(_0x3c761f);else initializeSocketBot(_0x3c761f);initClient(_0x311b89);}devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x2c9)]&&devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x220)]==_0x173207(0x2ee)&&setSessionTimeout(_0x173207(0x1cc),_0x5b2298),devices[_0x5b2298]['access'][_0x173207(0x2c9)]&&devices[_0x5b2298][_0x173207(0x362)]['reason']==_0x173207(0x2e5)&&setSessionTimeout('login',_0x5b2298),_0x3c761f[_0x173207(0x3a5)](_0x173207(0x394),{'status':_0x4c5acb[_0x173207(0x259)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5b2298][_0x173207(0x362)],'externalip':devices[_0x5b2298]['ip'],'publicKey':secure[_0x173207(0x1de)],'userid':settings[_0x173207(0x352)],'validInstallation':validInstallation}),devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x2fd)]==![]&&devices[_0x5b2298][_0x173207(0x362)][_0x173207(0x220)]==_0x173207(0x38e)&&temporaryAccess2FA(_0x5b2298,devices[_0x5b2298]['ip']);}function setSessionTimeout(_0x26597a,_0x5a4784){const _0x195a80=_0x561a8e;let _0xf81a93;if(_0x26597a==_0x195a80(0x320))_0xf81a93=loginExpiry*0x3c*0x3e8;else _0xf81a93=devices[_0x5a4784][_0x195a80(0x30d)]['expiry']*0x3c*0x3e8-(new Date()[_0x195a80(0x2db)]()-devices[_0x5a4784]['telegramIpApproval'][_0x195a80(0x387)]);if(devices[_0x5a4784]['pidExpireLogin'])clearTimeout(devices[_0x5a4784]['pidExpireLogin']);devices[_0x5a4784][_0x195a80(0x379)]=setTimeout(()=>{const _0x5e53bf=_0x195a80;if(devices[_0x5a4784][_0x5e53bf(0x29e)])clearTimeout(devices[_0x5a4784][_0x5e53bf(0x29e)]);removeSocketListeners(_0x5a4784),addBlacklist(_0x5a4784),devices[_0x5a4784][_0x5e53bf(0x30d)]=null,devices[_0x5a4784][_0x5e53bf(0x31d)]=null,devices[_0x5a4784][_0x5e53bf(0x362)][_0x5e53bf(0x2c9)]=null,logger['debug'](_0x5e53bf(0x330)+_0x5a4784[_0x5e53bf(0x2a5)](-0x8)),devices[_0x5a4784]['access']=validateAccess(devices[_0x5a4784][_0x5e53bf(0x362)][_0x5e53bf(0x2c9)],_0x5a4784),!(devices[_0x5a4784][_0x5e53bf(0x362)][_0x5e53bf(0x2fd)]&&devices[_0x5a4784][_0x5e53bf(0x362)][_0x5e53bf(0x220)]==_0x5e53bf(0x26e))&&(_0x26597a==_0x5e53bf(0x320)?io['to'](_0x5a4784)[_0x5e53bf(0x3a5)]('status',{'access':{'allow':![],'reason':_0x5e53bf(0x26d),'token':null}}):io['to'](_0x5a4784)[_0x5e53bf(0x3a5)]('status',{'access':{'allow':![],'reason':_0x5e53bf(0x2b4),'token':null}})),devices[_0x5a4784]['access'][_0x5e53bf(0x2c9)]=null;},_0xf81a93);}function setTokenRefresh(_0x28e360){const _0x43c58c=_0x561a8e;if(devices[_0x28e360][_0x43c58c(0x29e)])clearTimeout(devices[_0x28e360][_0x43c58c(0x29e)]);devices[_0x28e360]['pidRefreshToken']=setTimeout(()=>{const _0x16160a=_0x43c58c;getClientsWithUuid(_0x28e360)['length']!=0x0?(devices[_0x28e360][_0x16160a(0x362)]=refreshToken(_0x28e360),io['to'](_0x28e360)[_0x16160a(0x3a5)](_0x16160a(0x394),{'status':_0x16160a(0x263),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x28e360][_0x16160a(0x362)],'externalip':devices[_0x28e360]['ip'],'publicKey':secure[_0x16160a(0x1de)],'validInstallation':validInstallation}),setTokenRefresh(_0x28e360)):clearTimeout(devices[_0x28e360][_0x16160a(0x29e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x52a15d){const _0x1b1f05=_0x561a8e,_0x36c0c7=getClient(_0x52a15d['id'])[_0x1b1f05(0x1d7)];_0x52a15d['emit'](_0x1b1f05(0x2aa),config),_0x52a15d[_0x1b1f05(0x3a5)](_0x1b1f05(0x319),cleanSettings()),_0x52a15d['on'](_0x1b1f05(0x227),_0x30a747=>{const _0x1ec9ac=_0x1b1f05;if(validateAccess(_0x30a747,_0x36c0c7)[_0x1ec9ac(0x2fd)])addBot();else logger[_0x1ec9ac(0x383)](_0x1ec9ac(0x31e));}),_0x52a15d['on'](_0x1b1f05(0x2f0),(_0x228256,_0x563c74)=>{const _0x58554e=_0x1b1f05;if(validateAccess(_0x563c74,_0x36c0c7)[_0x58554e(0x2fd)])toggleBot(_0x228256[_0x58554e(0x243)],_0x228256[_0x58554e(0x394)],_0x228256[_0x58554e(0x1e5)]);else logger[_0x58554e(0x383)](_0x58554e(0x1d6));}),_0x52a15d['on'](_0x1b1f05(0x1ec),(_0x50398b,_0x3d1f79)=>{const _0x27c852=_0x1b1f05;if(validateAccess(_0x3d1f79,_0x36c0c7)[_0x27c852(0x2fd)])toggleBotMode(_0x50398b);else logger[_0x27c852(0x383)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x52a15d['on'](_0x1b1f05(0x336),(_0x4e17de,_0x18b4de)=>{const _0x344e20=_0x1b1f05;if(validateAccess(_0x18b4de,_0x36c0c7)[_0x344e20(0x2fd)])deleteBot(_0x4e17de);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x52a15d['on'](_0x1b1f05(0x35d),(_0x4c38d7,_0x5ff4fb)=>{const _0x5e2ee8=_0x1b1f05;if(validateAccess(_0x5ff4fb,_0x36c0c7)[_0x5e2ee8(0x2fd)])storeSettings(_0x4c38d7,!![]);else logger[_0x5e2ee8(0x383)](_0x5e2ee8(0x3a2));}),_0x52a15d['on'](_0x1b1f05(0x241),_0x4ca753=>{const _0x204cca=_0x1b1f05;if(validateAccess(_0x4ca753,_0x36c0c7)[_0x204cca(0x2fd)])updateBB(_0x204cca(0x2c1));else logger[_0x204cca(0x383)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x52a15d['on'](_0x1b1f05(0x2f3),_0x415801=>{const _0x4e7c45=_0x1b1f05;if(validateAccess(_0x415801,_0x36c0c7)['allow'])updateBB(_0x4e7c45(0x33f));else logger[_0x4e7c45(0x383)](_0x4e7c45(0x350));}),_0x52a15d['on'](_0x1b1f05(0x37b),_0x113943=>{const _0x1ff769=_0x1b1f05;if(validateAccess(_0x113943,_0x36c0c7)['allow']){const _0x1e0623=getClient(_0x52a15d['id']);if(_0x1e0623)getBackupFiles(_0x1e0623[_0x1ff769(0x1d7)]);else logger[_0x1ff769(0x383)](_0x1ff769(0x1ea));}else logger['full'](_0x1ff769(0x35c));}),_0x52a15d['on'](_0x1b1f05(0x334),(_0x3ceb07,_0x45fe8d)=>{const _0xdf4e8d=_0x1b1f05;if(validateAccess(_0x45fe8d,_0x36c0c7)[_0xdf4e8d(0x2fd)])restoreBackupFile(_0x3ceb07);else logger['full'](_0xdf4e8d(0x317));}),_0x52a15d['on'](_0x1b1f05(0x247),_0x54e749=>{if(validateAccess(_0x54e749,_0x36c0c7)['allow'])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x52a15d['on']('confirm-message',(_0x197d1c,_0xd199c2)=>{const _0x2ce97f=_0x1b1f05;if(validateAccess(_0xd199c2,_0x36c0c7)[_0x2ce97f(0x2fd)])confirmMessage(_0x197d1c);else logger[_0x2ce97f(0x383)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x52a15d['on'](_0x1b1f05(0x33b),_0x11c704=>{const _0x7a875c=_0x1b1f05;if(validateAccess(_0x11c704,_0x36c0c7)[_0x7a875c(0x2fd)]){if(devices[_0x36c0c7][_0x7a875c(0x29e)])clearTimeout(devices[_0x36c0c7][_0x7a875c(0x29e)]);if(devices[_0x36c0c7][_0x7a875c(0x379)])clearTimeout(devices[_0x36c0c7][_0x7a875c(0x379)]);removeSocketListeners(getClient(_0x52a15d['id'])['uuid']),addBlacklist(_0x36c0c7),devices[_0x36c0c7][_0x7a875c(0x30d)]=null,devices[_0x36c0c7][_0x7a875c(0x31d)]=null,devices[_0x36c0c7][_0x7a875c(0x362)][_0x7a875c(0x2c9)]=null,logger[_0x7a875c(0x235)](_0x7a875c(0x205)+_0x36c0c7[_0x7a875c(0x2a5)](-0x8)),io['to'](getClient(_0x52a15d['id'])[_0x7a875c(0x1d7)])[_0x7a875c(0x3a5)](_0x7a875c(0x394),{'access':{'allow':![],'reason':_0x7a875c(0x28e),'token':null}});}else logger[_0x7a875c(0x383)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x3253d3){const _0x1e90bd=_0x561a8e,_0x225644=getClient(_0x3253d3['id'])['bot'],_0x25696e=getClient(_0x3253d3['id'])[_0x1e90bd(0x1d7)];_0x3253d3['on']('get-logs',(_0x3a5313,_0x3cdbcb)=>{const _0x1984a0=_0x1e90bd;if(validateAccess(_0x3cdbcb,_0x25696e)[_0x1984a0(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x1984a0(0x24c)]({'function':_0x1984a0(0x2c2),'args':_0x3a5313});}else logger[_0x1984a0(0x383)](_0x1984a0(0x310));}),_0x3253d3['on'](_0x1e90bd(0x290),(_0x1d93c9,_0x2b57e5)=>{const _0x33dfd3=_0x1e90bd;if(validateAccess(_0x2b57e5,_0x25696e)['allow']){if(pid[_0x225644])pid[_0x225644]['send']({'function':'deleteHistoryAlerts','args':_0x1d93c9});}else logger[_0x33dfd3(0x383)](_0x33dfd3(0x356));}),_0x3253d3['on'](_0x1e90bd(0x244),(_0x4309b3,_0x4563d9)=>{const _0x34e63e=_0x1e90bd;if(validateAccess(_0x4563d9,_0x25696e)[_0x34e63e(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x34e63e(0x24c)]({'function':_0x34e63e(0x1f9),'args':_0x4309b3});}else logger[_0x34e63e(0x383)](_0x34e63e(0x24d));}),_0x3253d3['on'](_0x1e90bd(0x223),(_0x54eef6,_0x41144d)=>{const _0x2764ca=_0x1e90bd;if(validateAccess(_0x41144d,_0x25696e)[_0x2764ca(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x2764ca(0x24c)]({'function':_0x2764ca(0x2e7),'args':_0x54eef6});}else logger[_0x2764ca(0x383)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3253d3['on'](_0x1e90bd(0x1db),(_0x269fae,_0x8edbe8)=>{const _0x17849d=_0x1e90bd;if(validateAccess(_0x8edbe8,_0x25696e)[_0x17849d(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x17849d(0x24c)]({'function':_0x17849d(0x2cc),'args':_0x269fae});}else logger[_0x17849d(0x383)](_0x17849d(0x2ae));}),_0x3253d3['on'](_0x1e90bd(0x1f1),(_0xd20189,_0x564c4c)=>{const _0x265924=_0x1e90bd;if(validateAccess(_0x564c4c,_0x25696e)['allow']){if(pid[_0x225644])pid[_0x225644][_0x265924(0x24c)]({'function':_0x265924(0x25a),'args':_0xd20189});}else logger[_0x265924(0x383)](_0x265924(0x22c));}),_0x3253d3['on'](_0x1e90bd(0x306),_0x1c7f3d=>{const _0x1372cb=_0x1e90bd;if(validateAccess(_0x1c7f3d,_0x25696e)[_0x1372cb(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x1372cb(0x24c)]({'function':'resetHistory','args':null});}else logger['full'](_0x1372cb(0x258));}),_0x3253d3['on'](_0x1e90bd(0x21e),_0x1de9f4=>{const _0xed45f0=_0x1e90bd;if(validateAccess(_0x1de9f4,_0x25696e)[_0xed45f0(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0xed45f0(0x24c)]({'function':'getStartingBalances','args':null});}else logger[_0xed45f0(0x383)](_0xed45f0(0x341));}),_0x3253d3['on']('place-order',(_0x14dddc,_0x5c4eef)=>{const _0x16aaa7=_0x1e90bd;if(validateAccess(_0x5c4eef,_0x25696e)[_0x16aaa7(0x2fd)]){if(pid[_0x225644])pid[_0x225644]['send']({'function':_0x16aaa7(0x32a),'args':_0x14dddc});}else logger[_0x16aaa7(0x383)](_0x16aaa7(0x2c7));}),_0x3253d3['on']('cancel-loading',_0x11692f=>{const _0x5daa2d=_0x1e90bd;if(validateAccess(_0x11692f,_0x25696e)[_0x5daa2d(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x5daa2d(0x24c)]({'function':'cancelLoading','args':null});}else logger[_0x5daa2d(0x383)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3253d3['on']('show-config',_0x2e367c=>{const _0x47e7c6=_0x1e90bd;if(validateAccess(_0x2e367c,_0x25696e)[_0x47e7c6(0x2fd)]){if(pid[_0x225644])pid[_0x225644][_0x47e7c6(0x24c)]({'function':_0x47e7c6(0x39c),'args':null});}else logger[_0x47e7c6(0x383)](_0x47e7c6(0x302));}),_0x3253d3['on'](_0x1e90bd(0x241),_0x40a3b0=>{const _0x3f1a26=_0x1e90bd;if(validateAccess(_0x40a3b0,_0x25696e)[_0x3f1a26(0x2fd)])updateBB(_0x3f1a26(0x2c1));else logger[_0x3f1a26(0x383)](_0x3f1a26(0x397));}),_0x3253d3['on'](_0x1e90bd(0x247),_0x585790=>{const _0x2b60b0=_0x1e90bd;if(validateAccess(_0x585790,_0x25696e)[_0x2b60b0(0x2fd)])getMessages();else logger[_0x2b60b0(0x383)](_0x2b60b0(0x2b3));}),_0x3253d3['on'](_0x1e90bd(0x326),(_0x4fbc0c,_0x20086e)=>{const _0x569285=_0x1e90bd;if(validateAccess(_0x20086e,_0x25696e)[_0x569285(0x2fd)])confirmMessage(_0x4fbc0c);else logger[_0x569285(0x383)](_0x569285(0x29b));}),_0x3253d3['on'](_0x1e90bd(0x33b),_0xe577cf=>{const _0x113831=_0x1e90bd;if(validateAccess(_0xe577cf,_0x25696e)[_0x113831(0x2fd)]){if(devices[_0x25696e]['pidRefreshToken'])clearTimeout(devices[_0x25696e][_0x113831(0x29e)]);if(devices[_0x25696e]['pidExpireLogin'])clearTimeout(devices[_0x25696e][_0x113831(0x379)]);removeSocketListeners(getClient(_0x3253d3['id'])['uuid']),addBlacklist(_0x25696e),devices[_0x25696e]['telegramIpApproval']=null,devices[_0x25696e][_0x113831(0x31d)]=null,devices[_0x25696e]['access']['token']=null,logger[_0x113831(0x235)](_0x113831(0x205)+_0x25696e['slice'](-0x8)),io['to'](getClient(_0x3253d3['id'])[_0x113831(0x1d7)])[_0x113831(0x3a5)](_0x113831(0x394),{'access':{'allow':![],'reason':_0x113831(0x28e),'token':null}});}else logger[_0x113831(0x383)](_0x113831(0x2f7));});}function removeSocketListeners(_0x460fd3){getClientsWithUuid(_0x460fd3)['forEach'](_0x48cb12=>{const _0x434242=_0x2903;getSocket(_0x48cb12['id'])[_0x434242(0x37d)]();});}function cleanSettings(){const _0x3ee938=_0x561a8e;let _0x3849d8=settings;return settings[_0x3ee938(0x2f8)]&&settings[_0x3ee938(0x2f8)]!=''&&(_0x3849d8={..._0x3849d8,'telegramToken':_0x3ee938(0x391)}),settings[_0x3ee938(0x25f)]&&settings[_0x3ee938(0x25f)]!=''&&(_0x3849d8={..._0x3849d8,'bbPassword':_0x3ee938(0x391)}),(settings['bbPassword']&&settings[_0x3ee938(0x25f)]==_0x3ee938(0x2f6)||settings['telegramToken']&&settings[_0x3ee938(0x2f8)]=='***')&&(_0x3849d8={..._0x3849d8,'restored':{'password':settings[_0x3ee938(0x25f)]==_0x3ee938(0x2f6),'telegram':settings[_0x3ee938(0x2f8)]=='***'}}),_0x3849d8;}function _0x2903(_0x4ee70c,_0x214da9){const _0x57b2bb=_0x9d20();return _0x2903=function(_0x3a5573,_0x2a3937){_0x3a5573=_0x3a5573-0x1c6;let _0x9d209c=_0x57b2bb[_0x3a5573];return _0x9d209c;},_0x2903(_0x4ee70c,_0x214da9);}async function updateBB(_0x292d5c){const _0x552839=_0x561a8e;await backupConfigFiles(),installingUpdate=!![],config[_0x552839(0x2f2)](_0x410522=>{const _0x43d31d=_0x552839;restartBot(_0x410522[_0x43d31d(0x243)]);});if(_0x292d5c==_0x552839(0x2c1))process[_0x552839(0x24c)]({'update':!![],'environment':environment},_0x523373=>{});else _0x292d5c==_0x552839(0x33f)&&process[_0x552839(0x24c)]({'reinstall':!![],'environment':environment},_0x57edc0=>{});}function startBot(_0x4c31f5,_0x1b51f9,_0x1f202c){const _0x42b5f2=_0x561a8e;if(debugging)_0x4c31f5[_0x42b5f2(0x377)]('-d');let _0xbd77b8=![];const _0x200e50=_0x4c31f5[0x0];_0x1b51f9={..._0x1b51f9,'stdio':[_0x42b5f2(0x293),_0x42b5f2(0x293),_0x42b5f2(0x293),_0x42b5f2(0x2e1)]},pid[_0x200e50]=childProcess[_0x42b5f2(0x2cb)](botfile,_0x4c31f5,_0x1b51f9),pid[_0x200e50]['on'](_0x42b5f2(0x313),_0x1d83f9=>{const _0x10f072=_0x42b5f2;switch(Object['keys'](_0x1d83f9)[0x0]){case _0x10f072(0x331):updateBotName(_0x200e50,_0x1d83f9[_0x10f072(0x331)]);break;case'updatebotmanager':updateBotManager();break;case _0x10f072(0x394):updateStatus(_0x200e50,_0x1d83f9['status']);break;case _0x10f072(0x1e5):updateLive(_0x200e50,_0x1d83f9[_0x10f072(0x1e5)]);break;case _0x10f072(0x33c):updateLive(_0x200e50,_0x1d83f9['started']),io['to'](_0x200e50)[_0x10f072(0x3a5)]('status',{'access':{'allow':![],'reason':_0x10f072(0x31b),'token':null}});break;case _0x10f072(0x22a):_0x1d83f9[_0x10f072(0x22a)]==_0x10f072(0x371)&&restartBot(_0x200e50);_0x1d83f9[_0x10f072(0x22a)]==_0x10f072(0x22f)&&toggleBot(_0x200e50,_0x10f072(0x21a),_0x10f072(0x390));break;case _0x10f072(0x39f):sendTelegram(_0x200e50,_0x1d83f9['telegram']);break;case _0x10f072(0x23b):sendTelegramMsg(_0x1d83f9[_0x10f072(0x23b)]);break;case _0x10f072(0x36a):io['to'](_0x200e50)[_0x10f072(0x3a5)](_0x1d83f9[_0x10f072(0x36a)],_0x1d83f9[_0x10f072(0x267)]);break;}}),pid[_0x200e50]['on'](_0x42b5f2(0x305),function(_0x40bca5){if(_0xbd77b8)return;_0xbd77b8=!![],_0x1f202c(_0x40bca5);}),pid[_0x200e50]['on'](_0x42b5f2(0x34f),async function(_0x844157){const _0x2b6ff1=_0x42b5f2;if(installingUpdate)return;if(_0xbd77b8)return;_0xbd77b8=!![],_0x1f202c(null);const _0x5edccb=dbConfig[_0x2b6ff1(0x254)](_0x2b6ff1(0x2aa))[_0x2b6ff1(0x246)]({'botID':_0x200e50})[_0x2b6ff1(0x2bc)]();_0x5edccb&&(_0x5edccb[_0x2b6ff1(0x394)]==_0x2b6ff1(0x1f3)||_0x5edccb[_0x2b6ff1(0x394)]==_0x2b6ff1(0x1d5))&&(await sleep(0x3e8),updateLive(_0x200e50,_0x2b6ff1(0x390)),logger[_0x2b6ff1(0x383)]('Restarting\x20Bot\x20'+_0x200e50),startBot([_0x200e50,userID],{'cwd':bbpath},function(_0x1b757e){const _0x4f3a42=_0x2b6ff1;if(_0x1b757e)logger[_0x4f3a42(0x383)](_0x1b757e);}));});}function stopBot(_0x5bbe10){const _0xf90b08=_0x561a8e;getClientsWithBotID(_0x5bbe10)['forEach'](_0x52ccc6=>{const _0x565a26=_0x2903;getSocket(_0x52ccc6['id'])[_0x565a26(0x324)](!![]),removeClient(_0x52ccc6['id']);}),pid[_0x5bbe10]&&(pid[_0x5bbe10][_0xf90b08(0x22f)](),pid[_0x5bbe10]=null);}function restartBot(_0xaae4ff){const _0x506a24=_0x561a8e;if(pid[_0xaae4ff])pid[_0xaae4ff][_0x506a24(0x22f)]();}function addBot(){const _0x36b2b5=_0x561a8e;let _0x1c62b7;for(let _0x4cfde6=0x1;_0x4cfde6<0x3e9;_0x4cfde6++){_0x1c62b7=_0x4cfde6[_0x36b2b5(0x381)]()['padStart'](0x3,'0');let _0x628a3=config[_0x36b2b5(0x246)](_0x4e2014=>_0x4e2014[_0x36b2b5(0x243)]==_0x1c62b7);if(!_0x628a3)break;}if(_0x1c62b7===_0x36b2b5(0x262)){logger[_0x36b2b5(0x383)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full'](_0x36b2b5(0x1dc)+_0x1c62b7),dbConfig[_0x36b2b5(0x254)]('bots')[_0x36b2b5(0x377)]({'botID':_0x1c62b7,'botname':_0x36b2b5(0x25c)+_0x1c62b7,'status':_0x36b2b5(0x1d5),'live':''})[_0x36b2b5(0x36e)](),startBot([_0x1c62b7,userID],{'cwd':bbpath},function(_0x2b4bdd){const _0x219b33=_0x36b2b5;if(_0x2b4bdd)logger[_0x219b33(0x383)](_0x2b4bdd);}),config=getConfiguration(),io['to'](_0x36b2b5(0x39b))['emit'](_0x36b2b5(0x2aa),config),broadcastToBots(_0x36b2b5(0x2aa),JSON[_0x36b2b5(0x2d1)](config));}function deleteBot(_0x59704f){const _0x34e0b1=_0x561a8e;getClientsWithBotID(_0x59704f)[_0x34e0b1(0x2f2)](_0x43dddb=>{const _0x29b2cd=_0x34e0b1;getSocket(_0x43dddb['id'])[_0x29b2cd(0x324)](!![]),removeClient(_0x43dddb['id']);}),dbConfig['get'](_0x34e0b1(0x2aa))[_0x34e0b1(0x25e)]({'botID':_0x59704f})[_0x34e0b1(0x36e)](),logger['full'](_0x34e0b1(0x284)+_0x59704f),stopBot(_0x59704f);try{if(fs[_0x34e0b1(0x1d4)](path['join'](configpath,'bot-'+_0x59704f+_0x34e0b1(0x1fd))))fs[_0x34e0b1(0x38b)](path['join'](configpath,_0x34e0b1(0x203)+_0x59704f+_0x34e0b1(0x1fd)));if(fs['existsSync'](path[_0x34e0b1(0x1f5)](configpath,_0x34e0b1(0x203)+_0x59704f+_0x34e0b1(0x2c5))))fs['unlinkSync'](path['join'](configpath,'bot-'+_0x59704f+_0x34e0b1(0x2c5)));if(fs[_0x34e0b1(0x1d4)](path[_0x34e0b1(0x1f5)](configpath,'bot-'+_0x59704f+_0x34e0b1(0x3a3))))fs[_0x34e0b1(0x38b)](path[_0x34e0b1(0x1f5)](configpath,_0x34e0b1(0x203)+_0x59704f+_0x34e0b1(0x3a3)));if(fs[_0x34e0b1(0x1d4)](path[_0x34e0b1(0x1f5)](configpath,_0x34e0b1(0x203)+_0x59704f+_0x34e0b1(0x1d2))))fs[_0x34e0b1(0x38b)](path['join'](configpath,'bot-'+_0x59704f+_0x34e0b1(0x1d2)));}catch(_0x11aac2){if(_0x11aac2)logger[_0x34e0b1(0x383)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x11aac2);}config=getConfiguration(),io['to']('botmanager')[_0x34e0b1(0x3a5)](_0x34e0b1(0x2aa),config),broadcastToBots('bots',JSON[_0x34e0b1(0x2d1)](config));}function toggleBot(_0xddf87b,_0x3adfef,_0x43dde1){const _0xfe1763=_0x561a8e;dbConfig[_0xfe1763(0x254)](_0xfe1763(0x2aa))['find']({'botID':_0xddf87b})['assign']({'status':_0x3adfef})[_0xfe1763(0x1d0)]({'live':_0x43dde1})[_0xfe1763(0x36e)]();if(_0x3adfef==_0xfe1763(0x1f3)||_0x3adfef==_0xfe1763(0x1d5))logger[_0xfe1763(0x383)]('Enabled\x20Bot\x20'+_0xddf87b),startBot([_0xddf87b,userID],{'cwd':bbpath},function(_0xd390fe){const _0x244f1a=_0xfe1763;if(_0xd390fe)logger[_0x244f1a(0x383)](_0xd390fe);});else(_0x3adfef==_0xfe1763(0x21a)||_0x3adfef==_0xfe1763(0x2e3))&&(logger['full'](_0xfe1763(0x221)+_0xddf87b),stopBot(_0xddf87b));config=getConfiguration(),io['to']('botmanager')['emit'](_0xfe1763(0x2aa),config),broadcastToBots(_0xfe1763(0x2aa),JSON['stringify'](config));}function toggleStatus(_0x36052f){const _0x54e4c4=_0x561a8e;let _0x510cd9=dbConfig[_0x54e4c4(0x254)](_0x54e4c4(0x2aa))[_0x54e4c4(0x246)]({'botID':_0x36052f})[_0x54e4c4(0x2bc)](),_0x971e4f;if(_0x510cd9[_0x54e4c4(0x394)]===_0x54e4c4(0x1f3))_0x971e4f=_0x54e4c4(0x21a);else{if(_0x510cd9[_0x54e4c4(0x394)]===_0x54e4c4(0x1d5))_0x971e4f=_0x54e4c4(0x2e3);else{if(_0x510cd9[_0x54e4c4(0x394)]==='new-disabled')_0x971e4f=_0x54e4c4(0x1d5);else{if(_0x510cd9[_0x54e4c4(0x394)]===_0x54e4c4(0x21a))_0x971e4f='enabled';}}}return _0x971e4f;}function updateStatus(_0xd2638,_0x470081){const _0x5c58a6=_0x561a8e;dbConfig[_0x5c58a6(0x254)](_0x5c58a6(0x2aa))['find']({'botID':_0xd2638})['assign']({'status':_0x470081})['write'](),config=getConfiguration(),io['to'](_0x5c58a6(0x39b))[_0x5c58a6(0x3a5)](_0x5c58a6(0x2aa),config),broadcastToBots(_0x5c58a6(0x2aa),JSON['stringify'](config));}function updateLive(_0x2b436c,_0x251f65){const _0x1fadb8=_0x561a8e;dbConfig['get'](_0x1fadb8(0x2aa))['find']({'botID':_0x2b436c})[_0x1fadb8(0x1d0)]({'live':_0x251f65})[_0x1fadb8(0x36e)](),config=getConfiguration(),io['to'](_0x1fadb8(0x39b))[_0x1fadb8(0x3a5)](_0x1fadb8(0x2aa),config),broadcastToBots(_0x1fadb8(0x2aa),JSON[_0x1fadb8(0x2d1)](config));}function updateBotName(_0x3d2e43,_0x3af8c8){const _0x149771=_0x561a8e;dbConfig['get'](_0x149771(0x2aa))[_0x149771(0x246)]({'botID':_0x3d2e43})[_0x149771(0x1d0)]({'botname':_0x3af8c8})[_0x149771(0x36e)](),config=getConfiguration(),io['to'](_0x149771(0x39b))['emit']('bots',config),broadcastToBots(_0x149771(0x2aa),JSON['stringify'](config));}function updateBotManager(){const _0x4db628=_0x561a8e;config=getConfiguration(),io['to'](_0x4db628(0x39b))['emit']('bots',config),broadcastToBots(_0x4db628(0x2aa),JSON[_0x4db628(0x2d1)](config));}function toggleBotMode(_0x337d31){const _0x54ebc0=_0x561a8e;if(pid[_0x337d31])pid[_0x337d31]['send']({'function':'toggleBotMode','args':null});else{const _0x189260=configpath+_0x54ebc0(0x203)+_0x337d31+'-config.json',_0x5bfdf8=fs[_0x54ebc0(0x2dc)](_0x189260),_0x51034e=JSON[_0x54ebc0(0x2a8)](_0x5bfdf8),_0x60934b=_0x51034e[_0x54ebc0(0x1ca)][0x0][_0x54ebc0(0x2d2)];_0x51034e[_0x54ebc0(0x1ca)][0x0]['headless']=!_0x60934b;const _0x5b7ece=JSON[_0x54ebc0(0x2d1)](_0x51034e,null,0x2);fs[_0x54ebc0(0x2f5)](_0x189260,_0x5b7ece),config=getConfiguration(),io['to'](_0x54ebc0(0x39b))[_0x54ebc0(0x3a5)](_0x54ebc0(0x2aa),config),broadcastToBots('bots',JSON[_0x54ebc0(0x2d1)](config));}}function _0x9d20(){const _0x3c5a19=['includes','logout','started','stopPolling','messages','reinstall','blacklist','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Ok,\x20will\x20send\x20alert\x20notifications\x20only','backup-full.zip','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','\x20only\x0a','sendMessage','static','Notifications\x20types:\x20orders\x20and\x20alerts\x0a',':\x20Bot\x20Mgr\x20>\x20','Orders','HTML','build','api-eu.mixpanel.com','generate','exit','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','loginRequired','userid','bcryptjs','Allow\x20login\x20from\x20IP\x20address\x20<b>','File\x20uploaded','Unauthorized\x20attempt\x20to\x20delete\x20alerts','min','Logged\x20in\x20user\x20...',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','/:bot/portfolio','telegramEvents','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','store-settings','Your\x20installation\x20is\x20already\x20up\x20to\x20date','126TcTrCX','ipaddr.js','defaults','access','all','/:bot','Notifications\x20enabled\x0a','Invalid\x20Telegram\x20token','temporary\x20access\x20not\x20allowed','telegramChatId','Error:\x20Invalid\x20argument\x20','function','[ip-address]','node-zip','3800IMBrep','write','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Network\x20Interfaces:','restart','show','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','privateKey','push','sign','pidExpireLogin','notification','get-backup-files','/download/:type','removeAllListeners','mixpanel','All\x20bots\x20running\x20right\x20now','tkn','toString','isValid','full','sort','answerCallbackQuery','mkdirSync','timestamp','socket.io','15\x20min','output-001.log','unlinkSync','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','replace','2FA\x20required','remoteAddress','stopped','************','password','/restart\x20-\x20restart\x20bot(s)\x0a','status','getHours','3779PYURIT','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','copyFileSync','files','manual','botmanager','showConfig','telegramUsername','startsWith','telegram','getFullYear','graphql-request','Unauthorized\x20attempt\x20to\x20update\x20settings','-performance.json','secret','emit','encryptedUuid','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','uuid-random','use','=>\x20Go\x20to\x20#CYA#http://','login\x20token\x20generated','backupfile','environment','exchange','randomFillSync','login\x20required','\x20mode','settings.','bot','6432085HIXeIt','2FA','add','event','handshake','assign','::ffff:127.0.0.1','-results.json','yes','existsSync','new','Unauthorized\x20attempt\x20to\x20update\x20bot','uuid','toIPv4Address','68778jGKBEz','kind','store-headless','Starting\x20new\x20bot\x20|\x20Bot\x20','track','publicKey','hasOwnProperty','family','temporaryAccessAllowed','createWriteStream','bb-settings.json','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','live','</b>\x20?','backup-files','username','type','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','store','toggle-bot-mode','timeshift','split','Server','apiPassword','store-fiat','headers','enabled','name','join','\x1b[0m','/:bot/performance','apiKey','getPortfolio','\x1b[34m','Login\x20accepted','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','-config.json','accept','whitelist','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','data','Notifications\x20disabled\x0a','bot-','Unauthorized\x20login\x20attempt\x20(timeout)','Logged\x20out\x20user\x20...','chat','clientip','output-000.log','callback_query','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','private','sortBy','1003240jSJheN','simple','onepagemode','verify','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','env','set','axios','catch','2FA\x20login\x20rejected','Invalid\x20username\x20or\x20IP\x20address','30\x20min','/off\x20-\x20stop\x20bot(s)\x0a','disabled','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','/output-000.log','Invalid\x20authentication\x20token\x20(1)','get-starting-balances','decrypt','reason','Disabled\x20Bot\x20','success','store-configuration','All','lowdb','getDate','add-bot','#RES#\x20if\x20running\x20on\x20server','sendPortfolioTelegram','stop','node','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','padStart','argv','kill','getMonth','.zip','hashSync','file','map','debug','node-telegram-bot-api','Backup\x20file\x20uploaded','(staging)','temp/','Idling\x20bot\x20\x20\x20|\x20Bot\x20','telegrammsg','compareSync','sockets','Markdown','\x20(2)','showname','update-bb','http','botID','get-portfolio','rmSync','find','get-messages','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','createServer','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','/help\x20-\x20show\x20available\x20commands\x0a','send','Unauthorized\x20attempt\x20to\x20get\x20portfolio','format','sendFile','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','address','All\x20bots','Invalid\x20authentication\x20token\x20(2)','get','0.0.0','\x1b[33m','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','server','storeFiat','secure','Bot\x20','constructor','remove','bbPassword','crypto','config/','1000','connected','invalid\x20credentials','listen','Error\x20removing\x20old\x20backup\x20files:','args','from','/metrics\x20-\x20show\x20bot\x20performance\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Token\x20blacklisted','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','access\x20timeout','login\x20not\x20required','\x20(1)','Bot\x20Mgr\x20>\x20','bbUsername','onText','\x20|\x20','Node.js\x20v','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Unauthorized\x20attempt\x20to\x20download\x20','init','removeListener','Alerts','_data','length','NTBA_FIX_319','(((.+)+)+)+$','initclient','\x1b[35m','RSA','Starting\x20Balance\x20Bot\x20reinstallation','exec','No\x20bots\x20running\x20right\x20now','Deleted\x20Bot\x20','max','search','getSeconds','404\x20Not\x20Found','2FA\x20login\x20required','IPv4','running','express','expiry','logged\x20out','Ok,\x20will\x20send\x20order\x20notifications\x20only','delete-alerts','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','string','inherit','output-003.log','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',',\x20must\x20be\x20a\x204\x20digit\x20number','Invalid\x20IP\x20address','readdirSync','conn','Starting\x20#RED#Balance\x20Bot\x20v','Unauthorized\x20attempt\x20to\x20confirm\x20message','once','bb-secure.json','pidRefreshToken','6b67f3d61ee94b8f5c80b4affef4c4d9','then','lastmsgemitted','getMinutes','host','apply','slice','keys','log','parse','/on\x20-\x20start\x20bot(s)\x0a','bots','getUTCHours','production','user','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','\x20to\x20','#RES#\x20','/:bot/history','request','Unauthorized\x20attempt\x20to\x20get\x20messages','temporary\x20access\x20timeout','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','download','sendMetricsTelegram','order','Starting\x20Balance\x20Bot\x20update','Yes','Crypt','value','isIPv4MappedAddress','orders','Starting\x20bot\x20|\x20Bot\x20','title','update','emitHistory','index.html','referer','-events.json','statSync','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','\x20minutes','token','polling_error','fork','storeHeadless','lowdb/adapters/FileSync','Failed\x20to\x20download\x20','zip/','versions','stringify','headless','apiSecret','backup/','yargs/yargs','Password\x20has\x20been\x20reset\x20to:\x20','/names\x20-\x20show\x20bot\x20names\x0a','\x20|\x20client:\x20...','alerts','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','getTime','readFileSync','size','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','140PkATqk','https://api.ipify.org?format=json','ipc','/update\x20-\x20update\x20Balance\x20Bot\x0a','new-disabled','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','2FA\x20login\x20token\x20generated','-----------------------------------------------------------------------------------','storeConfiguration','3939726hSNqxF','User\x20has\x20been\x20validated','whitelistEnabled','params','jsonwebtoken','backup-full@','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','update-bot','number','forEach','reinstall-bb','ipv6','writeFileSync','***','Unauthorized\x20attempt\x20to\x20log\x20out','telegramToken','reject','5661KSFpoF','socket','No\x20authentication\x20token','allow','/:bot/coins','<b>Telegram\x20Bot\x20Status:</b>\x0a','filter','child_process','Unauthorized\x20attempt\x20to\x20show\x20configuration','bbvNew','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','error','reset-history','3219666aOhAlQ','date-fns','\x20|\x20user:\x20...','any','output-002.log','backup','telegramIpApproval','cloneDeep','telegramEnabled','Unauthorized\x20attempt\x20to\x20get\x20events','match','bbvReceive','message','mode','reset-password','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','latestversion','settings','3000','reload','Access\x20enabled\x20for\x20','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20add\x20bot','binary','login','auto','<b>Balance\x20Bot\x20Status:</b>\x0a','connection','disconnect','isDirectory','confirm-message','127.0.0.1','/disable\x20-\x20disable\x20notifications\x0a','port','placeOrder','/upload-backup','You\x20can\x20use\x20the\x20following\x20commands:\x0a','build2','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','SIGTERM','Session\x20expired\x20for\x20user\x20...','botname','entries','sha256','restore-backup-file','range','delete-bot','version','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','/:bot/support'];_0x9d20=function(){return _0x3c5a19;};return _0x9d20();}function telegramError(_0x49919a){logger['simple'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0xaeb084){const _0x4a40af=_0x561a8e;if(_0xaeb084[_0x4a40af(0x268)]['username']!=settings[_0x4a40af(0x39d)]&&'@'+_0xaeb084[_0x4a40af(0x268)][_0x4a40af(0x1e8)]!=settings[_0x4a40af(0x39d)])return tgBot[_0x4a40af(0x346)](_0xaeb084[_0x4a40af(0x206)]['id'],_0x4a40af(0x257),{'parse_mode':_0x4a40af(0x34b)})[_0x4a40af(0x215)](_0x2529f5=>{telegramError(_0x2529f5);}),![];return!![];}async function initTelegram(){const _0x4113d7=_0x561a8e;if(tgBot)tgBot[_0x4113d7(0x33d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x5d9909=_0x4113d7(0x32c);_0x5d9909+='\x0a',_0x5d9909+='/enable\x20-\x20enable\x20notifications\x0a',_0x5d9909+=_0x4113d7(0x328),_0x5d9909+=_0x4113d7(0x248),_0x5d9909+=_0x4113d7(0x393),_0x5d9909+=_0x4113d7(0x2a9),_0x5d9909+=_0x4113d7(0x219),_0x5d9909+=_0x4113d7(0x344),_0x5d9909+=_0x4113d7(0x2d7),_0x5d9909+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x5d9909+=_0x4113d7(0x269),_0x5d9909+=_0x4113d7(0x211),_0x5d9909+=_0x4113d7(0x2e2),_0x5d9909+=_0x4113d7(0x2da),_0x5d9909+=_0x4113d7(0x24b);let _0x5e6422=_0x4113d7(0x32e);_0x5e6422+='\x0a',_0x5e6422+=_0x5d9909,tgBot[_0x4113d7(0x272)](/\/start/,_0x12509c=>{const _0x284c9b=_0x4113d7;if(!validateTelegram(_0x12509c))return;if(settings[_0x284c9b(0x368)]!=_0x12509c[_0x284c9b(0x206)]['id'])updateSetting(_0x284c9b(0x368),_0x12509c['chat']['id']);updateSetting(_0x284c9b(0x30f),!![]),tgBot[_0x284c9b(0x346)](_0x12509c['chat']['id'],_0x5e6422)[_0x284c9b(0x215)](_0x48e788=>{telegramError(_0x48e788);});}),tgBot[_0x4113d7(0x272)](/\/enable/,_0x3c658d=>{const _0x84a01d=_0x4113d7;if(!validateTelegram(_0x3c658d))return;if(settings['telegramChatId']!=_0x3c658d[_0x84a01d(0x206)]['id'])updateSetting(_0x84a01d(0x368),_0x3c658d[_0x84a01d(0x206)]['id']);updateSetting(_0x84a01d(0x30f),!![]),tgBot[_0x84a01d(0x346)](_0x3c658d[_0x84a01d(0x206)]['id'],'Notifications\x20enabled')[_0x84a01d(0x215)](_0x2cfdbb=>{telegramError(_0x2cfdbb);});}),tgBot[_0x4113d7(0x272)](/\/config/,async _0x27ec43=>{const _0x1bb5f3=_0x4113d7;if(!validateTelegram(_0x27ec43))return;tgBot['removeListener'](_0x1bb5f3(0x209)),tgBot[_0x1bb5f3(0x346)](_0x27ec43['chat']['id'],_0x1bb5f3(0x26c),{'reply_markup':{'inline_keyboard':[[{'text':_0x1bb5f3(0x34a),'callback_data':_0x1bb5f3(0x2be)},{'text':_0x1bb5f3(0x279),'callback_data':_0x1bb5f3(0x2d9)},{'text':_0x1bb5f3(0x224),'callback_data':_0x1bb5f3(0x363)}]]}})['catch'](_0x558a62=>{telegramError(_0x558a62);}),tgBot['on'](_0x1bb5f3(0x209),async _0x1b473d=>{const _0x565be6=_0x1bb5f3,_0x4a93bb=_0x1b473d[_0x565be6(0x201)],_0x48cfdf=_0x1b473d['message'];tgBot['answerCallbackQuery'](_0x1b473d['id'])[_0x565be6(0x2a0)](async()=>{const _0x3c5eb9=_0x565be6;_0x4a93bb==_0x3c5eb9(0x2be)&&(updateSetting(_0x3c5eb9(0x35b),_0x3c5eb9(0x2be)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3c5eb9(0x346)](_0x48cfdf[_0x3c5eb9(0x206)]['id'],_0x3c5eb9(0x28f))[_0x3c5eb9(0x215)](_0x2b3eac=>{telegramError(_0x2b3eac);}));_0x4a93bb=='alerts'&&(updateSetting(_0x3c5eb9(0x35b),_0x3c5eb9(0x2d9)),updateSetting(_0x3c5eb9(0x30f),!![]),await tgBot[_0x3c5eb9(0x346)](_0x48cfdf[_0x3c5eb9(0x206)]['id'],_0x3c5eb9(0x342))[_0x3c5eb9(0x215)](_0x4ad5b6=>{telegramError(_0x4ad5b6);}));_0x4a93bb=='all'&&(updateSetting('telegramEvents',_0x3c5eb9(0x363)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3c5eb9(0x346)](_0x48cfdf[_0x3c5eb9(0x206)]['id'],_0x3c5eb9(0x2e4))[_0x3c5eb9(0x215)](_0x1460d8=>{telegramError(_0x1460d8);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x48cfdf['chat']['id'],_0x3c5eb9(0x2b5))[_0x3c5eb9(0x215)](_0x2b3fe6=>{telegramError(_0x2b3fe6);});}),tgBot[_0x565be6(0x278)]('callback_query');});}),tgBot[_0x4113d7(0x272)](/\/status/,_0x32f51e=>{const _0x71c52d=_0x4113d7;if(!validateTelegram(_0x32f51e))return;const _0x24c078=getBotsWithMode();let _0x1e9384=_0x71c52d(0x322);config[_0x71c52d(0x2f2)](_0x305651=>{const _0x3a9b01=_0x71c52d,_0x5ace77=_0x24c078['find'](_0x1ec75c=>_0x1ec75c[_0x3a9b01(0x243)]==_0x305651[_0x3a9b01(0x243)])[_0x3a9b01(0x314)];_0x1e9384+='Bot\x20'+_0x305651[_0x3a9b01(0x243)]+':\x20'+_0x305651[_0x3a9b01(0x394)]+_0x3a9b01(0x273)+_0x5ace77+'\x20|\x20'+_0x305651[_0x3a9b01(0x1e5)]+'\x0a';}),_0x1e9384+='\x0a',_0x1e9384+=_0x71c52d(0x2ff),_0x1e9384+=!settings[_0x71c52d(0x30f)]?_0x71c52d(0x202):_0x71c52d(0x365),_0x1e9384+=settings[_0x71c52d(0x30f)]?settings[_0x71c52d(0x35b)]==_0x71c52d(0x363)?_0x71c52d(0x348):'Notifications\x20types:\x20'+settings[_0x71c52d(0x35b)]+_0x71c52d(0x345):'',tgBot[_0x71c52d(0x346)](_0x32f51e[_0x71c52d(0x206)]['id'],_0x1e9384,{'parse_mode':_0x71c52d(0x34b)})[_0x71c52d(0x215)](_0x11f714=>{telegramError(_0x11f714);});}),tgBot[_0x4113d7(0x272)](/\/restart/,_0x1bfeae=>{const _0x15b3b0=_0x4113d7;if(!validateTelegram(_0x1bfeae))return;tgBot[_0x15b3b0(0x278)](_0x15b3b0(0x209));const _0x529e16=getEnabledBots();if(_0x529e16[_0x15b3b0(0x27b)]==0x0)tgBot[_0x15b3b0(0x346)](_0x1bfeae[_0x15b3b0(0x206)]['id'],_0x15b3b0(0x283))[_0x15b3b0(0x215)](_0x30aab4=>{telegramError(_0x30aab4);});else{if(_0x529e16['length']>0x1)_0x529e16[_0x15b3b0(0x377)]({'botID':_0x15b3b0(0x363)});let _0x57c574=[],_0x36c4be=[];const _0x41302b=_0x529e16[_0x15b3b0(0x27b)]%0x4==0x0||_0x529e16['length']%0x4==0x3||_0x529e16[_0x15b3b0(0x27b)]%0x3==0x1?0x4:0x3;let _0xe605ad=0x0;_0x529e16[_0x15b3b0(0x2f2)]((_0x2be8b0,_0x4c18b9)=>{const _0x261488=_0x15b3b0;if(_0x4c18b9%_0x41302b==0x0)_0x36c4be=[];_0x36c4be[_0x261488(0x377)]({'text':_0x2be8b0[_0x261488(0x243)]=='all'?_0x261488(0x252):_0x261488(0x25c)+_0x2be8b0[_0x261488(0x243)],'callback_data':_0x2be8b0['botID']}),_0x4c18b9%_0x41302b==0x0&&(_0x57c574[_0xe605ad]=_0x36c4be,_0xe605ad++);}),tgBot['sendMessage'](_0x1bfeae['chat']['id'],_0x15b3b0(0x295),{'reply_markup':{'inline_keyboard':_0x57c574}})[_0x15b3b0(0x215)](_0xbe5814=>{telegramError(_0xbe5814);}),tgBot['on'](_0x15b3b0(0x209),async _0x5a575b=>{const _0x778c95=_0x15b3b0,_0x62ed2=_0x5a575b[_0x778c95(0x201)],_0x33f8b3=_0x5a575b[_0x778c95(0x313)];tgBot[_0x778c95(0x385)](_0x5a575b['id'])[_0x778c95(0x2a0)](async()=>{const _0x49e539=_0x778c95;_0x62ed2=='all'?config[_0x49e539(0x2f2)](_0x149424=>{const _0x15a7e4=_0x49e539;restartBot(_0x149424[_0x15a7e4(0x243)]);}):restartBot(_0x62ed2);}),tgBot[_0x778c95(0x278)](_0x778c95(0x209));});}}),tgBot['onText'](/\/on/,_0x5e64c7=>{const _0x1f49c3=_0x4113d7;if(!validateTelegram(_0x5e64c7))return;tgBot['removeListener'](_0x1f49c3(0x209));const _0x1e33d9=getDisabledBots();if(_0x1e33d9[_0x1f49c3(0x27b)]==0x0)tgBot[_0x1f49c3(0x346)](_0x5e64c7[_0x1f49c3(0x206)]['id'],_0x1f49c3(0x37f))[_0x1f49c3(0x215)](_0x5d1376=>{telegramError(_0x5d1376);});else{if(_0x1e33d9[_0x1f49c3(0x27b)]>0x1)_0x1e33d9[_0x1f49c3(0x377)]({'botID':_0x1f49c3(0x363)});let _0x227575=[],_0x19110b=[];const _0x5e7632=_0x1e33d9[_0x1f49c3(0x27b)]%0x4==0x0||_0x1e33d9['length']%0x4==0x3||_0x1e33d9[_0x1f49c3(0x27b)]%0x3==0x1?0x4:0x3;let _0x20c3b2=0x0;_0x1e33d9[_0x1f49c3(0x2f2)]((_0x4cc0d7,_0x26adb9)=>{const _0x122829=_0x1f49c3;if(_0x26adb9%_0x5e7632==0x0)_0x19110b=[];_0x19110b[_0x122829(0x377)]({'text':_0x4cc0d7[_0x122829(0x243)]=='all'?_0x122829(0x252):_0x122829(0x25c)+_0x4cc0d7[_0x122829(0x243)],'callback_data':_0x4cc0d7[_0x122829(0x243)]}),_0x26adb9%_0x5e7632==0x0&&(_0x227575[_0x20c3b2]=_0x19110b,_0x20c3b2++);}),tgBot[_0x1f49c3(0x346)](_0x5e64c7[_0x1f49c3(0x206)]['id'],_0x1f49c3(0x375),{'reply_markup':{'inline_keyboard':_0x227575}})['catch'](_0x168e21=>{telegramError(_0x168e21);}),tgBot['on']('callback_query',async _0x5b1b58=>{const _0x293886=_0x1f49c3,_0x2a5033=_0x5b1b58[_0x293886(0x201)],_0x3455a4=_0x5b1b58['message'];tgBot[_0x293886(0x385)](_0x5b1b58['id'])[_0x293886(0x2a0)](async()=>{const _0x2c276a=_0x293886;_0x2a5033==_0x2c276a(0x363)?(tgBot[_0x2c276a(0x346)](_0x3455a4['chat']['id'],_0x2c276a(0x24a))[_0x2c276a(0x215)](_0x5b157f=>{telegramError(_0x5b157f);}),_0x1e33d9[_0x2c276a(0x2f2)](_0x4e112b=>{const _0x567dfa=_0x2c276a;if(_0x4e112b[_0x567dfa(0x243)]!=_0x567dfa(0x363))toggleBot(_0x4e112b[_0x567dfa(0x243)],toggleStatus(_0x4e112b[_0x567dfa(0x243)]),_0x567dfa(0x390));})):(tgBot[_0x2c276a(0x346)](_0x3455a4[_0x2c276a(0x206)]['id'],_0x2c276a(0x1fc)+_0x2a5033)['catch'](_0x3ea524=>{telegramError(_0x3ea524);}),toggleBot(_0x2a5033,toggleStatus(_0x2a5033),_0x2c276a(0x390)));}),tgBot[_0x293886(0x278)](_0x293886(0x209));});}}),tgBot[_0x4113d7(0x272)](/\/off/,_0x3fb583=>{const _0x2fcccd=_0x4113d7;if(!validateTelegram(_0x3fb583))return;tgBot[_0x2fcccd(0x278)]('callback_query');const _0x505123=getEnabledBots();if(_0x505123['length']==0x0)tgBot['sendMessage'](_0x3fb583['chat']['id'],_0x2fcccd(0x283))['catch'](_0x991666=>{telegramError(_0x991666);});else{if(_0x505123[_0x2fcccd(0x27b)]>0x1)_0x505123[_0x2fcccd(0x377)]({'botID':_0x2fcccd(0x363)});let _0x43f824=[],_0x4fafa6=[];const _0x16a2ae=_0x505123['length']%0x4==0x0||_0x505123[_0x2fcccd(0x27b)]%0x4==0x3||_0x505123[_0x2fcccd(0x27b)]%0x3==0x1?0x4:0x3;let _0x2ca2ce=0x0;_0x505123[_0x2fcccd(0x2f2)]((_0x1c0ffd,_0x559e5d)=>{const _0x2cf2f5=_0x2fcccd;if(_0x559e5d%_0x16a2ae==0x0)_0x4fafa6=[];_0x4fafa6[_0x2cf2f5(0x377)]({'text':_0x1c0ffd['botID']==_0x2cf2f5(0x363)?_0x2cf2f5(0x252):_0x2cf2f5(0x25c)+_0x1c0ffd['botID'],'callback_data':_0x1c0ffd['botID']}),_0x559e5d%_0x16a2ae==0x0&&(_0x43f824[_0x2ca2ce]=_0x4fafa6,_0x2ca2ce++);}),tgBot[_0x2fcccd(0x346)](_0x3fb583['chat']['id'],_0x2fcccd(0x3a7),{'reply_markup':{'inline_keyboard':_0x43f824}})[_0x2fcccd(0x215)](_0x52aed0=>{telegramError(_0x52aed0);}),tgBot['on'](_0x2fcccd(0x209),async _0x2adcb8=>{const _0x23a95f=_0x2fcccd,_0x177aad=_0x2adcb8[_0x23a95f(0x201)],_0x5d7dd1=_0x2adcb8[_0x23a95f(0x313)];tgBot[_0x23a95f(0x385)](_0x2adcb8['id'])[_0x23a95f(0x2a0)](async()=>{const _0x19015f=_0x23a95f;_0x177aad==_0x19015f(0x363)?(tgBot[_0x19015f(0x346)](_0x5d7dd1['chat']['id'],_0x19015f(0x20a))[_0x19015f(0x215)](_0x2431e8=>{telegramError(_0x2431e8);}),_0x505123[_0x19015f(0x2f2)](_0x484b0c=>{const _0x1b1f52=_0x19015f;if(_0x484b0c[_0x1b1f52(0x243)]!=_0x1b1f52(0x363))toggleBot(_0x484b0c[_0x1b1f52(0x243)],toggleStatus(_0x484b0c[_0x1b1f52(0x243)]),_0x1b1f52(0x390));})):(tgBot[_0x19015f(0x346)](_0x5d7dd1[_0x19015f(0x206)]['id'],_0x19015f(0x304)+_0x177aad)[_0x19015f(0x215)](_0x357b64=>{telegramError(_0x357b64);}),toggleBot(_0x177aad,toggleStatus(_0x177aad),_0x19015f(0x390)));}),tgBot[_0x23a95f(0x278)](_0x23a95f(0x209));});}}),tgBot[_0x4113d7(0x272)](/\/metrics/,_0x1d38af=>{const _0x3d4ed4=_0x4113d7;if(!validateTelegram(_0x1d38af))return;tgBot[_0x3d4ed4(0x278)]('callback_query');const _0x50ad74=getEnabledBots();if(_0x50ad74['length']==0x0)tgBot[_0x3d4ed4(0x346)](_0x1d38af['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x3d4ed4(0x215)](_0x105c26=>{telegramError(_0x105c26);});else{if(_0x50ad74['length']>0x1){let _0x33c605=[],_0x2a0249=[];const _0x4ef000=_0x50ad74[_0x3d4ed4(0x27b)]%0x4==0x0||_0x50ad74['length']%0x4==0x3||_0x50ad74[_0x3d4ed4(0x27b)]%0x3==0x1?0x4:0x3;let _0x23c3aa=0x0;_0x50ad74[_0x3d4ed4(0x2f2)]((_0xea7eb0,_0x23590e)=>{const _0x3f4068=_0x3d4ed4;if(_0x23590e%_0x4ef000==0x0)_0x2a0249=[];_0x2a0249[_0x3f4068(0x377)]({'text':_0x3f4068(0x25c)+_0xea7eb0['botID'],'callback_data':_0xea7eb0[_0x3f4068(0x243)]}),_0x23590e%_0x4ef000==0x0&&(_0x33c605[_0x23c3aa]=_0x2a0249,_0x23c3aa++);}),tgBot['sendMessage'](_0x1d38af[_0x3d4ed4(0x206)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x33c605}})[_0x3d4ed4(0x215)](_0x201965=>{telegramError(_0x201965);}),tgBot['on'](_0x3d4ed4(0x209),async _0x1f7870=>{const _0xb775ab=_0x3d4ed4,_0x3806d9=_0x1f7870['data'],_0x3a9795=_0x1f7870[_0xb775ab(0x313)];tgBot[_0xb775ab(0x385)](_0x1f7870['id'])[_0xb775ab(0x2a0)](async()=>{const _0x12cd94=_0xb775ab;if(pid[_0x3806d9])pid[_0x3806d9]['send']({'function':_0x12cd94(0x2b7),'args':null});}),tgBot[_0xb775ab(0x278)](_0xb775ab(0x209));});}else{const _0x5c95d2=_0x50ad74[0x0]['botID'];if(pid[_0x5c95d2])pid[_0x5c95d2][_0x3d4ed4(0x24c)]({'function':_0x3d4ed4(0x2b7),'args':null});}}}),tgBot[_0x4113d7(0x272)](/\/portfolio/,_0xc1e49f=>{const _0x241e3a=_0x4113d7;if(!validateTelegram(_0xc1e49f))return;tgBot['removeListener'](_0x241e3a(0x209));const _0x55a4f3=getEnabledBots();if(_0x55a4f3[_0x241e3a(0x27b)]==0x0)tgBot[_0x241e3a(0x346)](_0xc1e49f[_0x241e3a(0x206)]['id'],_0x241e3a(0x283))['catch'](_0x1c3d42=>{telegramError(_0x1c3d42);});else{if(_0x55a4f3[_0x241e3a(0x27b)]>0x1){let _0x206079=[],_0x1e76d2=[];const _0x2cf462=_0x55a4f3[_0x241e3a(0x27b)]%0x4==0x0||_0x55a4f3[_0x241e3a(0x27b)]%0x4==0x3||_0x55a4f3['length']%0x3==0x1?0x4:0x3;let _0x5a6c0b=0x0;_0x55a4f3['forEach']((_0x7e8df1,_0x32862a)=>{const _0x5f3544=_0x241e3a;if(_0x32862a%_0x2cf462==0x0)_0x1e76d2=[];_0x1e76d2[_0x5f3544(0x377)]({'text':'Bot\x20'+_0x7e8df1[_0x5f3544(0x243)],'callback_data':_0x7e8df1[_0x5f3544(0x243)]}),_0x32862a%_0x2cf462==0x0&&(_0x206079[_0x5a6c0b]=_0x1e76d2,_0x5a6c0b++);}),tgBot[_0x241e3a(0x346)](_0xc1e49f[_0x241e3a(0x206)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x206079}})[_0x241e3a(0x215)](_0x476d4a=>{telegramError(_0x476d4a);}),tgBot['on'](_0x241e3a(0x209),async _0x524d11=>{const _0x49fe6c=_0x241e3a,_0x168f91=_0x524d11['data'],_0x172831=_0x524d11[_0x49fe6c(0x313)];tgBot[_0x49fe6c(0x385)](_0x524d11['id'])[_0x49fe6c(0x2a0)](async()=>{const _0x552d28=_0x49fe6c;if(pid[_0x168f91])pid[_0x168f91][_0x552d28(0x24c)]({'function':_0x552d28(0x229),'args':null});}),tgBot[_0x49fe6c(0x278)](_0x49fe6c(0x209));});}else{const _0x4d023b=_0x55a4f3[0x0][_0x241e3a(0x243)];if(pid[_0x4d023b])pid[_0x4d023b][_0x241e3a(0x24c)]({'function':_0x241e3a(0x229),'args':null});}}}),tgBot[_0x4113d7(0x272)](/\/update/,async _0x20e3eb=>{const _0x54f5a3=_0x4113d7;if(!validateTelegram(_0x20e3eb))return;tgBot['removeListener'](_0x54f5a3(0x209)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x20e3eb[_0x54f5a3(0x206)]['id'],_0x54f5a3(0x35e))[_0x54f5a3(0x215)](_0x3004d1=>{telegramError(_0x3004d1);});else!validInstallation?tgBot['sendMessage'](_0x20e3eb[_0x54f5a3(0x206)]['id'],_0x54f5a3(0x275))[_0x54f5a3(0x215)](_0xb3472b=>{telegramError(_0xb3472b);}):(tgBot[_0x54f5a3(0x346)](_0x20e3eb['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x54f5a3(0x2ba),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x54f5a3(0x215)](_0x351f75=>{telegramError(_0x351f75);}),tgBot['on']('callback_query',async _0x6fbbbd=>{const _0x980885=_0x54f5a3,_0x354355=_0x6fbbbd['data'],_0x529554=_0x6fbbbd[_0x980885(0x313)];tgBot[_0x980885(0x385)](_0x6fbbbd['id'])[_0x980885(0x2a0)](async()=>{const _0x3120fc=_0x980885;_0x354355=='yes'&&(await tgBot['sendMessage'](_0x529554[_0x3120fc(0x206)]['id'],_0x3120fc(0x2b9))[_0x3120fc(0x215)](_0x741849=>{telegramError(_0x741849);}),updateBB(_0x3120fc(0x2c1))),_0x354355=='no'&&await tgBot['sendMessage'](_0x529554['chat']['id'],_0x3120fc(0x36f))[_0x3120fc(0x215)](_0x2042c9=>{telegramError(_0x2042c9);});}),tgBot[_0x980885(0x278)](_0x980885(0x209));}));}),tgBot[_0x4113d7(0x272)](/\/reinstall/,async _0x20216a=>{const _0x3903b9=_0x4113d7;if(!validateTelegram(_0x20216a))return;tgBot[_0x3903b9(0x278)]('callback_query'),!validInstallation?tgBot[_0x3903b9(0x346)](_0x20216a[_0x3903b9(0x206)]['id'],_0x3903b9(0x291))[_0x3903b9(0x215)](_0x2ea8a0=>{telegramError(_0x2ea8a0);}):(tgBot[_0x3903b9(0x346)](_0x20216a['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x3903b9(0x2ba),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})['catch'](_0x3addf7=>{telegramError(_0x3addf7);}),tgBot['on'](_0x3903b9(0x209),async _0x362009=>{const _0x4766db=_0x3903b9,_0x33f168=_0x362009[_0x4766db(0x201)],_0x16aa76=_0x362009[_0x4766db(0x313)];tgBot[_0x4766db(0x385)](_0x362009['id'])[_0x4766db(0x2a0)](async()=>{const _0x28ca9b=_0x4766db;_0x33f168==_0x28ca9b(0x1d3)&&(await tgBot['sendMessage'](_0x16aa76[_0x28ca9b(0x206)]['id'],_0x28ca9b(0x281))['catch'](_0x46e07b=>{telegramError(_0x46e07b);}),updateBB(_0x28ca9b(0x33f))),_0x33f168=='no'&&await tgBot[_0x28ca9b(0x346)](_0x16aa76[_0x28ca9b(0x206)]['id'],_0x28ca9b(0x200))[_0x28ca9b(0x215)](_0x16a9ad=>{telegramError(_0x16a9ad);});}),tgBot['removeListener']('callback_query');}));}),tgBot[_0x4113d7(0x272)](/\/toggle/,_0x47f6a7=>{const _0x1c1b28=_0x4113d7;if(!validateTelegram(_0x47f6a7))return;tgBot[_0x1c1b28(0x278)](_0x1c1b28(0x209));const _0x12aaba=getBotsWithMode();if(_0x12aaba[_0x1c1b28(0x27b)]==0x0)tgBot[_0x1c1b28(0x346)](_0x47f6a7[_0x1c1b28(0x206)]['id'],_0x1c1b28(0x283))[_0x1c1b28(0x215)](_0x2e3917=>{telegramError(_0x2e3917);});else{let _0x543b87=[],_0x3afb02=[];const _0x2bcd47=0x2;let _0x2c7dce=0x0;_0x12aaba[_0x1c1b28(0x2f2)]((_0x3cfcdb,_0x559543)=>{const _0x574074=_0x1c1b28;if(_0x559543%_0x2bcd47==0x0)_0x3afb02=[];_0x3afb02[_0x574074(0x377)]({'text':_0x574074(0x25c)+_0x3cfcdb[_0x574074(0x243)]+'\x20('+_0x3cfcdb['mode']+')','callback_data':_0x3cfcdb[_0x574074(0x243)]}),_0x559543%_0x2bcd47==0x0&&(_0x543b87[_0x2c7dce]=_0x3afb02,_0x2c7dce++);}),tgBot[_0x1c1b28(0x346)](_0x47f6a7[_0x1c1b28(0x206)]['id'],_0x1c1b28(0x374),{'reply_markup':{'inline_keyboard':_0x543b87}})['catch'](_0x2c909c=>{telegramError(_0x2c909c);}),tgBot['on'](_0x1c1b28(0x209),async _0x13597f=>{const _0x479749=_0x1c1b28,_0x4a943a=_0x13597f[_0x479749(0x201)],_0xc6d636=_0x13597f[_0x479749(0x313)];tgBot[_0x479749(0x385)](_0x13597f['id'])[_0x479749(0x2a0)](async()=>{const _0x573fa0=_0x479749,_0x170388=_0x12aaba[_0x573fa0(0x246)](_0x3cd2a8=>_0x3cd2a8['botID']==_0x4a943a),_0x23d574=_0x170388[_0x573fa0(0x314)]==_0x573fa0(0x321)?_0x573fa0(0x39a):_0x573fa0(0x321);tgBot['sendMessage'](_0xc6d636[_0x573fa0(0x206)]['id'],_0x573fa0(0x250)+_0x4a943a+_0x573fa0(0x2af)+_0x23d574+_0x573fa0(0x1c8))[_0x573fa0(0x215)](_0x1f1a62=>{telegramError(_0x1f1a62);}),toggleBotMode(_0x4a943a);}),tgBot[_0x479749(0x278)](_0x479749(0x209));});}}),tgBot[_0x4113d7(0x272)](/\/names/,_0x29f52b=>{const _0x4a1876=_0x4113d7;if(!validateTelegram(_0x29f52b))return;let _0x56e801='';config[_0x4a1876(0x2f2)](_0x190aa0=>{const _0x5b1f81=_0x4a1876;_0x56e801+=_0x5b1f81(0x25c)+_0x190aa0[_0x5b1f81(0x243)]+':\x20'+_0x190aa0[_0x5b1f81(0x331)]+'\x0a';}),tgBot[_0x4a1876(0x346)](_0x29f52b['chat']['id'],_0x56e801,{'parse_mode':_0x4a1876(0x34b)})[_0x4a1876(0x215)](_0x492b7f=>{telegramError(_0x492b7f);});}),tgBot['onText'](/\/disable/,_0x5e8e11=>{const _0x5c69ea=_0x4113d7;if(!validateTelegram(_0x5e8e11))return;tgBot['sendMessage'](_0x5e8e11[_0x5c69ea(0x206)]['id'],'Notifications\x20disabled')[_0x5c69ea(0x215)](_0x1a2102=>{telegramError(_0x1a2102);}),updateSetting(_0x5c69ea(0x30f),![]);}),tgBot[_0x4113d7(0x272)](/\/help/,_0x59ae1b=>{const _0x10e0bd=_0x4113d7;if(!validateTelegram(_0x59ae1b))return;tgBot[_0x10e0bd(0x346)](_0x59ae1b[_0x10e0bd(0x206)]['id'],_0x5d9909)[_0x10e0bd(0x215)](_0x11383e=>{telegramError(_0x11383e);});}),tgBot['on'](_0x4113d7(0x2ca),_0x38c2e2=>{const _0x3b78ff=_0x4113d7;_0x38c2e2['toString']()[_0x3b78ff(0x33a)](_0x3b78ff(0x288))&&(logger['full'](_0x3b78ff(0x366)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x3b78ff(0x39b))['emit']('notification',_0x3b78ff(0x366)));}),process[_0x4113d7(0x29c)]('SIGINT',()=>{const _0x2266e3=_0x4113d7;if(tgBot)tgBot[_0x2266e3(0x33d)]();process[_0x2266e3(0x34f)](0x1);}),process[_0x4113d7(0x29c)](_0x4113d7(0x32f),()=>{const _0x13e4fb=_0x4113d7;if(tgBot)tgBot[_0x13e4fb(0x33d)]();process[_0x13e4fb(0x34f)](0x1);});}}function disableTelegram(){const _0xd19dd1=_0x561a8e;tgBot&&(tgBot[_0xd19dd1(0x33d)](),tgBot=null);}function sendTelegram(_0x56f878,_0x3d801b){const _0x45011b=_0x561a8e;if(settings[_0x45011b(0x30f)]){if(settings[_0x45011b(0x35b)]==_0x45011b(0x363)||(_0x3d801b[_0x45011b(0x1e9)]=='error'||_0x3d801b[_0x45011b(0x1e9)]=='warning'||_0x3d801b[_0x45011b(0x1e9)]=='success')&&settings[_0x45011b(0x35b)]==_0x45011b(0x2d9)||_0x3d801b[_0x45011b(0x1e9)]==_0x45011b(0x2b8)&&settings[_0x45011b(0x35b)]==_0x45011b(0x2be)){if(tgBot&&settings[_0x45011b(0x368)]){if(_0x3d801b[_0x45011b(0x240)])tgBot[_0x45011b(0x346)](settings[_0x45011b(0x368)],_0x3d801b['botname']+'\x20>\x20'+_0x3d801b[_0x45011b(0x1ce)])[_0x45011b(0x215)](_0x1dbf67=>{telegramError(_0x1dbf67);});else tgBot[_0x45011b(0x346)](settings['telegramChatId'],'Bot\x20'+_0x56f878+'\x20>\x20'+_0x3d801b[_0x45011b(0x1ce)])[_0x45011b(0x215)](_0x3d9d61=>{telegramError(_0x3d9d61);});}}}}async function sendTelegramMsg(_0x1aa5cb,_0xf86bbe=_0x561a8e(0x34b)){const _0x1dc12c=_0x561a8e;return settings[_0x1dc12c(0x30f)]&&tgBot&&settings[_0x1dc12c(0x368)]?(await tgBot[_0x1dc12c(0x346)](settings[_0x1dc12c(0x368)],_0x1aa5cb,{'parse_mode':_0xf86bbe})['catch'](_0x3b82bd=>{telegramError(_0x3b82bd);}),!![]):![];}function getDeviceWithIp(_0x3826dd){const _0x136611=_0x561a8e;return devices[_0x136611(0x246)](_0x1d4f76=>_0x1d4f76['ip']===_0x3826dd);}function temporaryAccess2FA(_0x5c0760,_0x2a52bd){const _0x41aaaa=_0x561a8e;let _0x1731c6=new Date(),_0x10a739=![];if(lastIpApproval){if(_0x1731c6-lastIpApproval<0x1388)_0x10a739=!![];}lastIpApproval=new Date();if(_0x10a739)return;tgBot&&settings[_0x41aaaa(0x368)]&&(tgBot['removeListener'](_0x41aaaa(0x209)),tgBot[_0x41aaaa(0x346)](settings[_0x41aaaa(0x368)],_0x41aaaa(0x338)+normalizeIP(_0x2a52bd)[_0x41aaaa(0x372)]+_0x41aaaa(0x1e6),{'parse_mode':_0x41aaaa(0x34b),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x41aaaa(0x389),'callback_data':'15'},{'text':_0x41aaaa(0x218),'callback_data':'30'},{'text':_0x41aaaa(0x2f9),'callback_data':_0x41aaaa(0x2f9)}]]}})[_0x41aaaa(0x215)](_0x411ea6=>{telegramError(_0x411ea6);}),tgBot['on'](_0x41aaaa(0x209),async _0x1f49ed=>{const _0x3dba48=_0x41aaaa,_0x38b3e5=_0x1f49ed[_0x3dba48(0x201)],_0x479475=_0x1f49ed[_0x3dba48(0x313)];tgBot[_0x3dba48(0x385)](_0x1f49ed['id'])[_0x3dba48(0x2a0)](async()=>{const _0x178805=_0x3dba48;devices[_0x5c0760]['telegramIpApproval']={'clientip':_0x2a52bd,'timestamp':new Date()[_0x178805(0x2db)](),'expiry':_0x38b3e5},_0x38b3e5!=_0x178805(0x2f9)?(await tgBot[_0x178805(0x346)](_0x479475['chat']['id'],_0x178805(0x31c)+_0x38b3e5+_0x178805(0x2c8),{'parse_mode':_0x178805(0x34b)})[_0x178805(0x215)](_0x394b6e=>{telegramError(_0x394b6e);}),io['to'](_0x5c0760)[_0x178805(0x3a5)](_0x178805(0x394),{'access':{'allow':![],'reason':_0x178805(0x31b),'token':null}})):(await tgBot[_0x178805(0x346)](_0x479475['chat']['id'],'Temporary\x20access\x20rejected')[_0x178805(0x215)](_0x73331c=>{telegramError(_0x73331c);}),io['to'](_0x5c0760)[_0x178805(0x3a5)](_0x178805(0x394),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x3dba48(0x278)]('callback_query');}));}function loginAccess2FA(_0x1ad938,_0x4e332c){const _0x4eb1aa=_0x561a8e;tgBot&&settings[_0x4eb1aa(0x368)]&&(tgBot[_0x4eb1aa(0x278)](_0x4eb1aa(0x209)),tgBot[_0x4eb1aa(0x346)](settings[_0x4eb1aa(0x368)],_0x4eb1aa(0x354)+normalizeIP(_0x4e332c)['show']+_0x4eb1aa(0x1e6),{'parse_mode':_0x4eb1aa(0x34b),'reply_markup':{'inline_keyboard':[[{'text':_0x4eb1aa(0x1fe),'callback_data':loginExpiry},{'text':_0x4eb1aa(0x2f9),'callback_data':_0x4eb1aa(0x2f9)}]]}})[_0x4eb1aa(0x215)](_0x4ac2d7=>{telegramError(_0x4ac2d7);}),tgBot['on']('callback_query',async _0x42ed00=>{const _0x53100c=_0x4eb1aa,_0x125185=_0x42ed00[_0x53100c(0x201)],_0x5692b8=_0x42ed00[_0x53100c(0x313)];tgBot['answerCallbackQuery'](_0x42ed00['id'])[_0x53100c(0x2a0)](async()=>{const _0x4da3f1=_0x53100c;devices[_0x1ad938][_0x4da3f1(0x31d)]={'clientip':_0x4e332c,'timestamp':new Date()[_0x4da3f1(0x2db)](),'expiry':_0x125185},_0x125185!=_0x4da3f1(0x2f9)?(await tgBot[_0x4da3f1(0x346)](_0x5692b8['chat']['id'],_0x4da3f1(0x1fb),{'parse_mode':_0x4da3f1(0x34b)})[_0x4da3f1(0x215)](_0x5d7b3e=>{telegramError(_0x5d7b3e);}),io['to'](_0x1ad938)[_0x4da3f1(0x3a5)](_0x4da3f1(0x394),{'access':{'allow':![],'reason':_0x4da3f1(0x31b),'token':null}})):(await tgBot[_0x4da3f1(0x346)](_0x5692b8['chat']['id'],'Login\x20rejected')['catch'](_0x12af7f=>{telegramError(_0x12af7f);}),io['to'](_0x1ad938)['emit'](_0x4da3f1(0x394),{'access':{'allow':![],'reason':_0x4da3f1(0x216),'token':null}}));}),tgBot[_0x53100c(0x278)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2e0475=_0x561a8e;return dbConfig[_0x2e0475(0x254)](_0x2e0475(0x2aa))[_0x2e0475(0x20c)]('botID')[_0x2e0475(0x300)]({'status':_0x2e0475(0x1f3)})['value']()||[];}function getDisabledBots(){const _0x424811=_0x561a8e;return dbConfig[_0x424811(0x254)](_0x424811(0x2aa))[_0x424811(0x20c)](_0x424811(0x243))[_0x424811(0x300)]({'status':_0x424811(0x21a)})[_0x424811(0x2bc)]()||[];}function getBotAttributes(_0x2e3339){const _0x36ec9d=_0x561a8e;let _0x282d58={};const _0x4a3380=configpath+_0x36ec9d(0x203)+_0x2e3339+_0x36ec9d(0x1fd),_0x21e65c=fs['existsSync'](_0x4a3380);if(_0x21e65c){const _0x14cc6c=fs['readFileSync'](_0x4a3380);try{const _0x1d9cc2=JSON['parse'](_0x14cc6c),_0x2dcb44=_0x1d9cc2?_0x1d9cc2[_0x36ec9d(0x1ca)][0x0]['headless']:![];_0x282d58['mode']=_0x2dcb44?'auto':_0x36ec9d(0x39a),_0x282d58[_0x36ec9d(0x331)]=_0x1d9cc2?_0x1d9cc2[_0x36ec9d(0x1ca)][0x0]['botname']:'Bot\x20'+_0x2e3339;}catch(_0xea8f1c){_0x282d58[_0x36ec9d(0x314)]=_0x36ec9d(0x39a),_0x282d58[_0x36ec9d(0x331)]=_0x36ec9d(0x25c)+_0x2e3339;}}else _0x282d58[_0x36ec9d(0x314)]=_0x36ec9d(0x39a),_0x282d58['botname']='Bot\x20'+_0x2e3339;return _0x282d58;}function getBotsWithMode(){const _0x32b30e=_0x561a8e,_0x4d9cb0=dbConfig[_0x32b30e(0x254)](_0x32b30e(0x2aa))[_0x32b30e(0x20c)](_0x32b30e(0x243))['value']()||[];return _0x4d9cb0[_0x32b30e(0x2f2)](_0x294a18=>{const _0x3f6d4f=_0x32b30e;let _0x4b5c2b=getBotAttributes(_0x294a18['botID']);_0x294a18['mode']=_0x4b5c2b[_0x3f6d4f(0x314)];}),_0x4d9cb0;}function getBotExchanges(){const _0x420ac8=_0x561a8e;let _0x4250de=[];const _0xef64e6=dbConfig[_0x420ac8(0x254)](_0x420ac8(0x2aa))[_0x420ac8(0x20c)](_0x420ac8(0x243))[_0x420ac8(0x2bc)]()||[];_0xef64e6[_0x420ac8(0x2f2)](_0x2d3acd=>{const _0x2e1e27=_0x420ac8;if(_0x2d3acd['status']==_0x2e1e27(0x1f3)){const _0x16b3e5=configpath+_0x2e1e27(0x203)+_0x2d3acd['botID']+'-config.json',_0x1d76ff=fs['existsSync'](_0x16b3e5);let _0x26195f;if(_0x1d76ff){const _0x2ad81b=fs['readFileSync'](_0x16b3e5);try{const _0x4e1a4b=JSON[_0x2e1e27(0x2a8)](_0x2ad81b);_0x26195f=_0x4e1a4b?_0x4e1a4b['bot'][0x0][_0x2e1e27(0x3ae)]:null;}catch(_0xd8a556){}}if(_0x26195f)_0x4250de[_0x2e1e27(0x377)](_0x26195f);}});const _0x35e165=[...new Set(_0x4250de)][_0x420ac8(0x384)]();return _0x35e165;}async function initUser(){const _0x202e2d=_0x561a8e;if(!settings['userid']){const _0x2c25f8=uuidRandom();mixpanel['alias'](_0x2c25f8),updateSetting(_0x202e2d(0x352),_0x2c25f8);}}async function initSecure(){const _0x565cd0=_0x561a8e;let _0x24df2b=getSecure();if(!_0x24df2b['hasOwnProperty'](_0x565cd0(0x3a4))){let _0x3b3db7=await generateKeys();_0x24df2b[_0x565cd0(0x1de)]=_0x3b3db7[_0x565cd0(0x1de)],_0x24df2b['privateKey']=_0x3b3db7[_0x565cd0(0x376)],_0x24df2b[_0x565cd0(0x3a4)]=crypto['randomBytes'](0x20)[_0x565cd0(0x381)]('hex');;storeSecure(_0x24df2b);}}function getSettings(){const _0x5e0edd=_0x561a8e;return dbSettings[_0x5e0edd(0x254)](_0x5e0edd(0x319))[_0x5e0edd(0x2bc)]()||{};}function getSecure(){const _0x44b50d=_0x561a8e;return dbSecure[_0x44b50d(0x254)]('secure')[_0x44b50d(0x2bc)]()||{};}function getBlacklist(){const _0x53d455=_0x561a8e;return dbSecure['get'](_0x53d455(0x340))[_0x53d455(0x2bc)]()||[];}function broadcastToBots(_0x167387,_0x396861){config['forEach'](_0x1250bb=>{const _0x5529c6=_0x2903;if(_0x1250bb['status']==_0x5529c6(0x1f3)&&_0x1250bb[_0x5529c6(0x1e5)]==_0x5529c6(0x28b)||_0x1250bb['status']==_0x5529c6(0x1d5)&&_0x1250bb[_0x5529c6(0x1e5)]=='running'){if(pid[_0x1250bb[_0x5529c6(0x243)]])pid[_0x1250bb[_0x5529c6(0x243)]]['send']({[_0x167387]:_0x396861});}});}function storeSettings(_0x186fca,_0x46fb6f=![]){const _0x2c2829=_0x561a8e;_0x186fca={...settings,..._0x186fca};if(_0x46fb6f&&_0x186fca[_0x2c2829(0x25f)]!=_0x2c2829(0x391)&&_0x186fca['bbPassword']!=_0x2c2829(0x2f6)&&_0x186fca[_0x2c2829(0x25f)]!=''){const _0x1d3e5e=crypt[_0x2c2829(0x21f)](secure['privateKey'],_0x186fca['bbPassword'])[_0x2c2829(0x313)][_0x2c2829(0x1ee)]('@')[0x0],_0x17e34d=bcrypt['hashSync'](_0x1d3e5e,saltRounds);_0x186fca={..._0x186fca,'bbPassword':_0x17e34d};}if(_0x46fb6f&&_0x186fca[_0x2c2829(0x2f8)]!=_0x2c2829(0x391)&&_0x186fca[_0x2c2829(0x2f8)]!='***'&&_0x186fca[_0x2c2829(0x2f8)]!=''){const _0x4b7eea=crypt[_0x2c2829(0x21f)](secure[_0x2c2829(0x376)],_0x186fca['telegramToken'])['message'][_0x2c2829(0x1ee)]('@')[0x0];_0x186fca={..._0x186fca,'telegramToken':_0x4b7eea};}const _0x4936ac=_0x186fca[_0x2c2829(0x2f8)]!=_0x2c2829(0x391)&&_0x186fca['telegramToken']!=settings[_0x2c2829(0x2f8)]||_0x186fca[_0x2c2829(0x39d)]!=settings['telegramUsername'],_0x42ac18=_0x186fca[_0x2c2829(0x2f8)]==''||_0x186fca[_0x2c2829(0x39d)]=='';if(_0x4936ac)_0x186fca['telegramEvents']=_0x2c2829(0x363);for(const [_0x4ab85b,_0x79d0ed]of Object[_0x2c2829(0x332)](_0x186fca)){if(_0x4ab85b=='telegramToken'&&_0x79d0ed=='************'){_0x186fca[_0x2c2829(0x2f8)]=settings[_0x2c2829(0x2f8)];continue;};if(_0x4ab85b==_0x2c2829(0x25f)&&_0x79d0ed==_0x2c2829(0x391)){_0x186fca['bbPassword']=settings[_0x2c2829(0x25f)];continue;};dbSettings[_0x2c2829(0x213)](_0x2c2829(0x1c9)+_0x4ab85b,_0x79d0ed)['write']();}settings=_0x186fca,io['to'](_0x2c2829(0x39b))['emit'](_0x2c2829(0x319),cleanSettings()),broadcastToBots(_0x2c2829(0x1ed),settings[_0x2c2829(0x1ed)]),broadcastToBots(_0x2c2829(0x20f),settings[_0x2c2829(0x20f)]);if(_0x4936ac&&!_0x42ac18)initTelegram();if(_0x4936ac&&_0x42ac18)disableTelegram();getAllClients()['forEach'](_0x177172=>{const _0x5a8b9f=_0x2c2829;getSocket(_0x177172['id'])[_0x5a8b9f(0x3a5)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x1f029e,_0x4598c5){const _0x2515f0=_0x561a8e;dbSettings[_0x2515f0(0x213)](_0x2515f0(0x1c9)+_0x1f029e,_0x4598c5)['write'](),settings=getSettings(),io['to']('botmanager')[_0x2515f0(0x3a5)](_0x2515f0(0x319),cleanSettings());}function storeSecure(_0x5edea3){const _0x3b107a=_0x561a8e;dbSecure[_0x3b107a(0x254)](_0x3b107a(0x25b))[_0x3b107a(0x377)](_0x5edea3)[_0x3b107a(0x36e)](),secure=_0x5edea3;}function addBlacklist(_0x5dc1b3){const _0x3c76b3=_0x561a8e;cleanBlacklist();let _0x16da1d;devices[_0x5dc1b3][_0x3c76b3(0x30d)]?_0x16da1d=Math[_0x3c76b3(0x285)](devices[_0x5dc1b3][_0x3c76b3(0x30d)][_0x3c76b3(0x28d)],loginExpiry):_0x16da1d=loginExpiry,dbSecure[_0x3c76b3(0x254)](_0x3c76b3(0x340))[_0x3c76b3(0x377)]({'expiry':new Date()['getTime']()+_0x16da1d*0x3c*0x3e8,'token':devices[_0x5dc1b3][_0x3c76b3(0x362)][_0x3c76b3(0x2c9)]})[_0x3c76b3(0x36e)](),blacklist=dbSecure['get'](_0x3c76b3(0x340))[_0x3c76b3(0x2bc)]();}function cleanBlacklist(){const _0x165b8c=_0x561a8e;let _0xea9a04=dbSecure[_0x165b8c(0x254)]('blacklist')[_0x165b8c(0x30e)]()['value'](),_0x268a2a=new Date()[_0x165b8c(0x2db)]();_0xea9a04['forEach'](_0x4c7f3a=>{const _0x2cc96d=_0x165b8c;_0x4c7f3a['expiry']<_0x268a2a&&dbSecure[_0x2cc96d(0x254)](_0x2cc96d(0x340))['remove']({'expiry':_0x4c7f3a[_0x2cc96d(0x28d)]})[_0x2cc96d(0x36e)]();});}function initStates(){const _0x16a2b3=_0x561a8e;let _0x24ebf4=getConfiguration();_0x24ebf4[_0x16a2b3(0x2f2)](_0x4b4db4=>{const _0x3d4bda=_0x16a2b3;_0x4b4db4[_0x3d4bda(0x1e5)]=_0x3d4bda(0x390);}),storeConfiguration(_0x24ebf4);}function onKeys(){const _0x88eca7=new RSA();return new Promise(_0x5d7a50=>{const _0x3d2e7a=_0x2903;_0x88eca7['generateKeyPairAsync']()[_0x3d2e7a(0x2a0)](_0x146f63=>{_0x5d7a50(_0x146f63);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5490dc=_0x561a8e;let _0x2f42d5=getSettings(),_0x4886d9=![];!_0x2f42d5['hasOwnProperty'](_0x5490dc(0x316))&&(_0x2f42d5[_0x5490dc(0x316)]=0x0,_0x4886d9=!![]);!_0x2f42d5[_0x5490dc(0x1df)](_0x5490dc(0x2a1))&&(_0x2f42d5[_0x5490dc(0x2a1)]=0x0,_0x4886d9=!![]);!_0x2f42d5[_0x5490dc(0x1df)]('latestversion')&&(_0x2f42d5[_0x5490dc(0x318)]=_0x5490dc(0x255),_0x4886d9=!![]);!_0x2f42d5[_0x5490dc(0x1df)](_0x5490dc(0x20f))&&(_0x2f42d5[_0x5490dc(0x20f)]=![],_0x4886d9=!![]);if(_0x4886d9)storeSettings(_0x2f42d5);try{fs[_0x5490dc(0x298)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x2c91f7=>{const _0x518e76=_0x5490dc;if(!_0x2c91f7[_0x518e76(0x325)]()){if(!_0x2c91f7[_0x518e76(0x1f4)][_0x518e76(0x39e)](_0x518e76(0x2ed)))fs[_0x518e76(0x38b)](configbackuppath+_0x2c91f7[_0x518e76(0x1f4)]);}else fs[_0x518e76(0x245)](configbackuppath+_0x2c91f7['name'],{'recursive':!![]});});}catch(_0x4ca4c5){logger[_0x5490dc(0x235)](_0x5490dc(0x266),_0x4ca4c5);}}function storeConfiguration(_0x5b57c8){const _0x574df2=_0x561a8e;dbConfig[_0x574df2(0x254)](_0x574df2(0x2aa))[_0x574df2(0x25e)]()[_0x574df2(0x36e)](),_0x5b57c8[_0x574df2(0x2f2)](_0x3cfed2=>{const _0x64e952=_0x574df2;delete _0x3cfed2[_0x64e952(0x314)];}),dbConfig[_0x574df2(0x254)](_0x574df2(0x2aa))[_0x574df2(0x377)](..._0x5b57c8)[_0x574df2(0x36e)](),config=_0x5b57c8;}function resetPassword(){const _0x1d3152=_0x561a8e;tgBot&&settings[_0x1d3152(0x368)]&&(tgBot['removeListener'](_0x1d3152(0x209)),tgBot[_0x1d3152(0x346)](settings[_0x1d3152(0x368)],_0x1d3152(0x2de),{'parse_mode':_0x1d3152(0x34b),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x1d3152(0x1d3)},{'text':'no','callback_data':'no'}]]}})[_0x1d3152(0x215)](_0x5cb294=>{telegramError(_0x5cb294);}),tgBot['on']('callback_query',async _0x108e52=>{const _0x46d2a7=_0x1d3152,_0x553f01=_0x108e52[_0x46d2a7(0x201)],_0xbc95cc=_0x108e52[_0x46d2a7(0x313)];tgBot[_0x46d2a7(0x385)](_0x108e52['id'])['then'](async()=>{const _0x163c61=_0x46d2a7;if(_0x553f01!='no'){const _0x45794d=0xf,_0xe623a8='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x5ac1de=Array['from'](crypto[_0x163c61(0x1c6)](new Uint32Array(_0x45794d)))[_0x163c61(0x234)](_0x233a2c=>_0xe623a8[_0x233a2c%_0xe623a8[_0x163c61(0x27b)]])['join'](''),_0x1dafd8=bcrypt[_0x163c61(0x232)](_0x5ac1de,saltRounds);storeSettings({'bbPassword':_0x1dafd8}),await tgBot[_0x163c61(0x346)](_0xbc95cc[_0x163c61(0x206)]['id'],_0x163c61(0x2d6)+_0x5ac1de,{'parse_mode':_0x163c61(0x34b)})[_0x163c61(0x215)](_0x3e9e73=>{telegramError(_0x3e9e73);});}else await tgBot[_0x163c61(0x346)](_0xbc95cc[_0x163c61(0x206)]['id'],'Password\x20reset\x20rejected')[_0x163c61(0x215)](_0x2fadae=>{telegramError(_0x2fadae);});}),tgBot[_0x46d2a7(0x278)](_0x46d2a7(0x209));}));}async function confirmRestore(_0x3b3704,_0x40d9ad){const _0x547bde=_0x561a8e;io['to'](_0x547bde(0x39b))[_0x547bde(0x3a5)](_0x547bde(0x37a),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x547bde(0x222)),tgBot&&settings[_0x547bde(0x368)]&&(tgBot[_0x547bde(0x278)](_0x547bde(0x209)),await tgBot[_0x547bde(0x346)](settings[_0x547bde(0x368)],_0x547bde(0x1e4),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x8b3a4b=>{telegramError(_0x8b3a4b);}),tgBot['on']('callback_query',async _0x10dfc9=>{const _0x367904=_0x547bde,_0x45bf59=_0x10dfc9[_0x367904(0x201)],_0x1096db=_0x10dfc9[_0x367904(0x313)];tgBot[_0x367904(0x385)](_0x10dfc9['id'])['then'](async()=>{const _0x1977d3=_0x367904;_0x45bf59==_0x1977d3(0x1d3)?(await tgBot[_0x1977d3(0x346)](_0x1096db[_0x1977d3(0x206)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'})['catch'](_0x4a17dc=>{telegramError(_0x4a17dc);}),unzipFile(_0x3b3704,_0x40d9ad)):(logger[_0x1977d3(0x235)]('Restore\x20process\x20aborted'),await tgBot[_0x1977d3(0x346)](_0x1096db[_0x1977d3(0x206)]['id'],'Restore\x20process\x20aborted')[_0x1977d3(0x215)](_0x5315f1=>{telegramError(_0x5315f1);}));}),tgBot[_0x367904(0x278)](_0x367904(0x209));}));}function getServerTime(){const _0x3f6f1a=_0x561a8e,_0x48c706=new Date();return _0x48c706[_0x3f6f1a(0x3a0)]()+'/'+(_0x48c706['getMonth']()+0x1)[_0x3f6f1a(0x381)]()[_0x3f6f1a(0x22d)](0x2,'0')+'/'+_0x48c706[_0x3f6f1a(0x226)]()[_0x3f6f1a(0x381)]()[_0x3f6f1a(0x22d)](0x2,'0')+'\x20'+_0x48c706['getHours']()[_0x3f6f1a(0x381)]()['padStart'](0x2,'0')+':'+_0x48c706[_0x3f6f1a(0x2a2)]()['toString']()[_0x3f6f1a(0x22d)](0x2,'0')+':'+_0x48c706['getSeconds']()['toString']()[_0x3f6f1a(0x22d)](0x2,'0');}function getTimeStamp(){const _0x4dc719=_0x561a8e,_0x27670b=shiftedTime();return _0x27670b[_0x4dc719(0x3a0)]()+'/'+(_0x27670b['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x27670b[_0x4dc719(0x226)]()[_0x4dc719(0x381)]()[_0x4dc719(0x22d)](0x2,'0')+'\x20'+_0x27670b[_0x4dc719(0x395)]()[_0x4dc719(0x381)]()[_0x4dc719(0x22d)](0x2,'0')+':'+_0x27670b[_0x4dc719(0x2a2)]()[_0x4dc719(0x381)]()[_0x4dc719(0x22d)](0x2,'0')+':'+_0x27670b[_0x4dc719(0x287)]()['toString']()[_0x4dc719(0x22d)](0x2,'0');}function getCleanTimeStamp(){const _0x3f8b90=_0x561a8e,_0x239f38=shiftedTime();return _0x239f38[_0x3f8b90(0x3a0)]()+(_0x239f38[_0x3f8b90(0x230)]()+0x1)[_0x3f8b90(0x381)]()[_0x3f8b90(0x22d)](0x2,'0')+_0x239f38[_0x3f8b90(0x226)]()[_0x3f8b90(0x381)]()[_0x3f8b90(0x22d)](0x2,'0')+'-'+_0x239f38[_0x3f8b90(0x395)]()[_0x3f8b90(0x381)]()[_0x3f8b90(0x22d)](0x2,'0')+_0x239f38[_0x3f8b90(0x2a2)]()[_0x3f8b90(0x381)]()[_0x3f8b90(0x22d)](0x2,'0')+_0x239f38[_0x3f8b90(0x287)]()['toString']()[_0x3f8b90(0x22d)](0x2,'0');}function shiftedTime(){const _0x7813d=_0x561a8e,_0x10f0a8=new Date();let _0x161d6d=_0x10f0a8;if(settings['timeshift']&&settings[_0x7813d(0x1ed)]!==0x0)_0x161d6d=fns[_0x7813d(0x1cd)](_0x10f0a8,{'hours':settings['timeshift']});return _0x161d6d;}function startScheduler(){const _0x2567ea=_0x561a8e,_0xf51b2f=new Date()[_0x2567ea(0x2ab)](),_0x7a194d=shiftedTime()['getHours']();_0x7a194d==0x4&&backupConfigFiles();_0x7a194d==0x0&&rotateLogFiles();_0xf51b2f%0x6==0x0&&triggerAnalytics();_0xf51b2f%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3572f4){logger['debug']('Restore\x20backup\x20file\x20'+_0x3572f4);const _0x40d220=getBotsWithMode();_0x40d220['length']>0x0?confirmRestore(configbackuppath,_0x3572f4):unzipFile(configbackuppath,_0x3572f4);}async function getBackupFiles(_0x1d34d8=null){const _0x361bcb=_0x561a8e;let _0x1c85a3=[],_0x3d1dc4=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3d1dc4[_0x361bcb(0x384)]((_0x186da1,_0xce54e2)=>_0x186da1[_0x361bcb(0x1f4)]<_0xce54e2[_0x361bcb(0x1f4)]?0x1:_0xce54e2[_0x361bcb(0x1f4)]<_0x186da1[_0x361bcb(0x1f4)]?-0x1:0x0),_0x3d1dc4[_0x361bcb(0x2f2)](_0x493fe5=>{const _0x20b081=_0x361bcb;if(!_0x493fe5[_0x20b081(0x325)]()&&_0x493fe5[_0x20b081(0x1f4)][_0x20b081(0x39e)]('backup-full@')&&_0x493fe5['name']['endsWith'](_0x20b081(0x231))){const _0x7e27ed=formatDate(fs[_0x20b081(0x2c6)](configbackuppath+_0x493fe5['name'])['mtime']);_0x1c85a3[_0x20b081(0x377)]({'name':_0x493fe5[_0x20b081(0x1f4)],'mtime':_0x7e27ed});}});if(_0x1d34d8)io['to'](_0x1d34d8)[_0x361bcb(0x3a5)](_0x361bcb(0x1e7),_0x1c85a3);else return _0x1c85a3;}async function backupConfigFiles(){const _0x594b87=_0x561a8e;await zipFiles('backup-full');const _0x295aa8=getCleanTimeStamp();fs[_0x594b87(0x398)](zippath+_0x594b87(0x343),configbackuppath+(_0x594b87(0x2ed)+_0x295aa8+_0x594b87(0x231)));let _0x354eb0=fs[_0x594b87(0x298)](configbackuppath,{'withFileTypes':!![]});_0x354eb0[_0x594b87(0x384)]((_0x3a0bc4,_0x3911d9)=>_0x3a0bc4['name']<_0x3911d9[_0x594b87(0x1f4)]?0x1:_0x3911d9['name']<_0x3a0bc4['name']?-0x1:0x0),_0x354eb0[_0x594b87(0x27b)]>maxBackups&&fs[_0x594b87(0x38b)](configbackuppath+_0x354eb0[_0x354eb0[_0x594b87(0x27b)]-0x1][_0x594b87(0x1f4)]);}function rotateLogFiles(){const _0x82fe7d=_0x561a8e,_0x1e1135=fs[_0x82fe7d(0x2c6)](logspath+_0x82fe7d(0x208)),_0x389183=_0x1e1135[_0x82fe7d(0x2dd)]/0x400;if(_0x389183>0x64){let _0x4109a3=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x4109a3[_0x82fe7d(0x384)]((_0x5a8dfe,_0x5d2f0c)=>_0x5a8dfe[_0x82fe7d(0x1f4)]<_0x5d2f0c[_0x82fe7d(0x1f4)]?0x1:_0x5d2f0c[_0x82fe7d(0x1f4)]<_0x5a8dfe[_0x82fe7d(0x1f4)]?-0x1:0x0),_0x4109a3[_0x82fe7d(0x2f2)](_0x41294b=>{const _0x4f8b5a=_0x82fe7d;if(_0x41294b[_0x4f8b5a(0x1f4)]==_0x4f8b5a(0x30b))fs[_0x4f8b5a(0x398)](logspath+_0x41294b[_0x4f8b5a(0x1f4)],logspath+_0x4f8b5a(0x294));if(_0x41294b[_0x4f8b5a(0x1f4)]=='output-001.log')fs[_0x4f8b5a(0x398)](logspath+_0x41294b['name'],logspath+_0x4f8b5a(0x30b));_0x41294b[_0x4f8b5a(0x1f4)]=='output-000.log'&&(fs[_0x4f8b5a(0x398)](logspath+_0x41294b['name'],logspath+_0x4f8b5a(0x38a)),fs[_0x4f8b5a(0x2f5)](logspath+_0x41294b['name'],''));});}}async function zipFiles(_0x543330){const _0x37c54d=_0x561a8e;let _0x58a552;if(_0x543330=='logs')_0x58a552=logspath;if(_0x543330==_0x37c54d(0x30c))_0x58a552=configpath;if(_0x543330=='backup-full')_0x58a552=configpath;let _0x325653=fs[_0x37c54d(0x298)](_0x58a552,{'withFileTypes':!![]});const _0x67af12=new require(_0x37c54d(0x36c))();_0x325653[_0x37c54d(0x2f2)](_0xd3a9bc=>{const _0x1f90c8=_0x37c54d;if(!_0xd3a9bc['isDirectory']()){let _0x396786=fs[_0x1f90c8(0x2dc)](_0x58a552+_0xd3a9bc['name']);if(_0x543330==_0x1f90c8(0x30c)){const _0x3551b9=/^bot-[0-9]{3}-config.json$/,_0x33381c=_0x3551b9['test'](_0xd3a9bc[_0x1f90c8(0x1f4)]);if(_0x33381c){const _0x2a4738=JSON[_0x1f90c8(0x2a8)](_0x396786);if(_0x2a4738['bot'][0x0]){_0x2a4738[_0x1f90c8(0x1ca)][0x0][_0x1f90c8(0x1f8)]=_0x1f90c8(0x2f6),_0x2a4738[_0x1f90c8(0x1ca)][0x0][_0x1f90c8(0x2d3)]=_0x1f90c8(0x2f6);if(_0x2a4738['bot'][0x0][_0x1f90c8(0x1f0)])_0x2a4738['bot'][0x0][_0x1f90c8(0x1f0)]='***';}_0x396786=JSON[_0x1f90c8(0x2d1)](_0x2a4738,null,0x2);}if(_0xd3a9bc[_0x1f90c8(0x1f4)]==_0x1f90c8(0x1e3)){const _0x126f2f=JSON[_0x1f90c8(0x2a8)](_0x396786);if(_0x126f2f[_0x1f90c8(0x319)][_0x1f90c8(0x351)])_0x126f2f[_0x1f90c8(0x319)][_0x1f90c8(0x351)]=![];if(_0x126f2f['settings'][_0x1f90c8(0x25f)])_0x126f2f[_0x1f90c8(0x319)][_0x1f90c8(0x25f)]=_0x1f90c8(0x2f6);if(_0x126f2f['settings'][_0x1f90c8(0x2f8)])_0x126f2f['settings'][_0x1f90c8(0x2f8)]='***';if(_0x126f2f[_0x1f90c8(0x319)][_0x1f90c8(0x368)])_0x126f2f[_0x1f90c8(0x319)]['telegramChatId']=null;_0x396786=JSON[_0x1f90c8(0x2d1)](_0x126f2f,null,0x2);}if(_0xd3a9bc[_0x1f90c8(0x1f4)]!='bb-secure.json')_0x67af12[_0x1f90c8(0x233)](_0xd3a9bc[_0x1f90c8(0x1f4)],_0x396786);}else _0x67af12[_0x1f90c8(0x233)](_0xd3a9bc[_0x1f90c8(0x1f4)],_0x396786);}});const _0x52154d=_0x67af12[_0x37c54d(0x34e)]({'base64':![],'compression':'DEFLATE'});fs[_0x37c54d(0x2f5)](zippath+(_0x543330+_0x37c54d(0x231)),_0x52154d,_0x37c54d(0x31f));}async function unzipFile(_0x453b6c,_0x3b6924){const _0x363149=_0x561a8e;fs[_0x363149(0x298)](configpath,{'withFileTypes':!![]})[_0x363149(0x2f2)](_0x410644=>{const _0x3d3701=_0x363149;if(!_0x410644[_0x3d3701(0x325)]())fs[_0x3d3701(0x245)](configpath+_0x410644[_0x3d3701(0x1f4)]);});const _0x4d2b05=fs[_0x363149(0x2dc)](_0x453b6c+_0x3b6924,_0x363149(0x31f)),_0x3f224b=new require(_0x363149(0x36c))(_0x4d2b05,{'base64':![],'checkCRC32':!![]});Object[_0x363149(0x2a6)](_0x3f224b[_0x363149(0x399)])[_0x363149(0x2f2)](_0x182a14=>{const _0x3b167a=_0x363149,_0x3b27c7=_0x3f224b['files'][_0x182a14];fs[_0x3b167a(0x2f5)](configpath+_0x3b27c7['name'],_0x3b27c7[_0x3b167a(0x27a)]);}),fs[_0x363149(0x298)](temppath,{'withFileTypes':!![]})['forEach'](_0x58fd00=>{const _0x212149=_0x363149;if(!_0x58fd00['isDirectory']())fs['rmSync'](temppath+_0x58fd00[_0x212149(0x1f4)]);}),logger[_0x363149(0x235)]('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x56e7ac=>{});}async function getPublicIp(){const _0x51d661=_0x561a8e;try{const _0x68be91=await axios[_0x51d661(0x254)](_0x51d661(0x2e0));publicip=_0x68be91[_0x51d661(0x201)]['ip'];}catch(_0x8aeaa3){}}async function triggerAnalytics(){const _0x358b4f=_0x561a8e;if(!publicip)await getPublicIp();const _0x3e81a9=getBotsWithMode();let _0x184a4c=0x0;_0x3e81a9[_0x358b4f(0x2f2)](_0x4ffc0d=>{const _0x525ef7=_0x358b4f;if(_0x4ffc0d[_0x525ef7(0x394)]===_0x525ef7(0x1f3))_0x184a4c++;});const _0x25d852=getBotExchanges();mixpanel[_0x358b4f(0x1dd)](_0x358b4f(0x1ef),{'distinct_id':settings[_0x358b4f(0x352)],'ip':publicip,'version':serverversion,'numbots':_0x3e81a9[_0x358b4f(0x27b)],'numbotsenabled':_0x184a4c,'exchanges':_0x25d852,'environment':environment});}async function getMessages(){const _0x20355=_0x561a8e,_0xd0c69c='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x28e827=new GraphQLClient(_0xd0c69c),_0x35e93e={'authorization':_0x20355(0x21b)},_0x1bcccc=serverversion['split']('.'),_0x55e7c7=_0x1bcccc[0x0]+'.'+_0x1bcccc[0x1],_0x44453b=Math[_0x20355(0x357)](settings[_0x20355(0x316)],settings[_0x20355(0x2a1)]),_0x4c64c2={'last':parseInt(_0x44453b),'bbm':_0x55e7c7},_0x35e960=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4a98b2;try{_0x4a98b2=await _0x28e827[_0x20355(0x2b2)](_0x35e960,_0x4c64c2,_0x35e93e);}catch(_0x33e475){}if(_0x4a98b2&&_0x4a98b2['messages']){let _0x55fbe7=settings[_0x20355(0x316)];newMessages=[];for(const _0xd510b3 of _0x4a98b2[_0x20355(0x33e)]){newMessages[_0x20355(0x377)](_0xd510b3);let _0x32075c=![];_0xd510b3['bbvNew']&&(updateSetting('latestversion',_0xd510b3[_0x20355(0x303)]),_0x32075c=isNewerVersion(serverversion,_0xd510b3[_0x20355(0x303)])||serverversion==_0xd510b3[_0x20355(0x303)]);if(!_0x32075c&&_0xd510b3[_0x20355(0x2f1)]>_0x55fbe7){if(_0xd510b3['bbvReceive']===_0x20355(0x30a)||serverversion[_0x20355(0x39e)](_0xd510b3[_0x20355(0x312)])){let _0x21a375=''+_0xd510b3[_0x20355(0x2c0)]+'\x0a\x0a'+_0xd510b3[_0x20355(0x313)];const _0x4a55cf=await sendTelegramMsg(toTelegramMarkdown(_0x21a375),_0x20355(0x23e));if(_0x4a55cf)_0x55fbe7=_0xd510b3['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x20355(0x316),_0x55fbe7),emitMessages();}}function emitMessages(){const _0x24693c=_0x561a8e,_0xa48fa=settings[_0x24693c(0x2a1)];let _0x5eb765=[];newMessages[_0x24693c(0x2f2)](_0x16f714=>{_0x16f714['number']>_0xa48fa&&_0x5eb765['push'](_0x16f714);}),_0x5eb765[_0x24693c(0x27b)]>0x0&&getAllClients()[_0x24693c(0x2f2)](_0x2b6d39=>{const _0x311df8=_0x24693c;getSocket(_0x2b6d39['id'])[_0x311df8(0x3a5)](_0x311df8(0x313),_0x5eb765);});}function confirmMessage(_0x313c69){const _0x1ccc2d=_0x561a8e;updateSetting(_0x1ccc2d(0x2a1),Number(_0x313c69));}function isNewerVersion(_0x57de5e,_0x30e067){const _0x3a5aca=_0x561a8e,_0x35c69c=_0x30e067[_0x3a5aca(0x1ee)]('.'),_0x30c99f=_0x57de5e['split']('.');for(var _0x447956=0x0;_0x447956<_0x30c99f['length'];_0x447956++){const _0x32df95=~~_0x30c99f[_0x447956],_0x5ab4bd=~~_0x35c69c[_0x447956];if(_0x32df95>_0x5ab4bd)return!![];if(_0x32df95<_0x5ab4bd)return![];}return![];}function toTelegramMarkdown(_0x24bf2b){const _0x53f5de=_0x561a8e,_0x30425d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x37eebc=/\*{2}(.+?)\*{2}/gim;return _0x24bf2b=_0x24bf2b[_0x53f5de(0x38d)](_0x30425d,'$1_$2_$3')['replace'](_0x37eebc,'*$1*'),_0x24bf2b;}async function validateConfigFile(){const _0x2d34ba=_0x561a8e,_0x3babe1=dbConfig['get'](_0x2d34ba(0x2aa))[_0x2d34ba(0x20c)](_0x2d34ba(0x243))['value']()||[];if(_0x3babe1[_0x2d34ba(0x27b)]==0x0){let _0x56a357=0x0,_0x425cd4=[];const _0x38e50b=/^bot-([0-9]{3})-config.json$/,_0x41ab50=fs['readdirSync'](configpath);_0x41ab50[_0x2d34ba(0x2f2)](_0x4f3362=>{const _0x2d9afc=_0x2d34ba,_0x13fd8=_0x38e50b[_0x2d9afc(0x282)](_0x4f3362);if(_0x13fd8){const _0x419f87=_0x13fd8[0x1];let _0x1a4850=getBotAttributes(_0x419f87);_0x425cd4['push']({'botID':_0x419f87,'botname':_0x1a4850['botname'],'status':_0x2d9afc(0x21a),'live':_0x2d9afc(0x390)}),_0x56a357++;}}),_0x56a357!=0x0&&(dbConfig['get']('bots')['assign'](_0x425cd4)[_0x2d34ba(0x36e)](),config=_0x425cd4,restoredConfigFile=_0x56a357);}}async function restoreConfigNotify(_0x222e7c){const _0x2bf26c=_0x561a8e;let _0x1ce70b;if(restoredConfigFile==0x1)_0x1ce70b=_0x2bf26c(0x373);else _0x1ce70b='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x222e7c)io['to']('botmanager')[_0x2bf26c(0x3a5)]('notification',_0x1ce70b);else{logger[_0x2bf26c(0x20e)](_0x2bf26c(0x2e6)),logger[_0x2bf26c(0x20e)](_0x1ce70b),logger[_0x2bf26c(0x20e)](_0x2bf26c(0x2e6)),logger[_0x2bf26c(0x20e)]('');if(tgBot&&settings[_0x2bf26c(0x368)]&&settings[_0x2bf26c(0x35b)]!=_0x2bf26c(0x2be))tgBot[_0x2bf26c(0x346)](settings[_0x2bf26c(0x368)],_0x2bf26c(0x270)+_0x1ce70b)[_0x2bf26c(0x215)](_0x3ba901=>{telegramError(_0x3ba901);});}}function validateCredentials(_0x2d9c5d,_0x550732){const _0xbfe2d7=_0x561a8e;if(_0x2d9c5d[_0xbfe2d7(0x1e8)]==settings['bbUsername']&&bcrypt[_0xbfe2d7(0x23c)](_0x2d9c5d[_0xbfe2d7(0x392)],settings[_0xbfe2d7(0x25f)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0xbfe2d7(0x289),'token':null};else{const _0xbf4ec8=generateLoginToken(_0x550732);return{'allow':!![],'reason':_0xbfe2d7(0x3ab),'token':_0xbf4ec8};}}else return{'allow':![],'reason':_0xbfe2d7(0x264),'token':null};}function refreshToken(_0x2cf21d){const _0x34bacd=_0x561a8e,_0x436ced=generateLoginToken(_0x2cf21d);return{'allow':!![],'reason':_0x34bacd(0x3ab),'token':_0x436ced};}function validateAccess(_0x42b53f,_0x352922,_0x53698d){const _0x59961e=_0x561a8e,_0x219f17=_0x53698d?_0x53698d:devices[_0x352922]['ip'];let _0x1f6ded;const _0x362926=_0x24359f=>{const _0x4dbc22=_0x2903;if(settings[_0x4dbc22(0x351)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x352922)){const _0x5e03af=generateLoginToken(_0x352922);return{'allow':!![],'reason':_0x4dbc22(0x2e5),'token':_0x5e03af};}else return{'allow':![],'reason':_0x4dbc22(0x1c7),'token':null};}else return _0x1f6ded=validToken(_0x24359f,_0x352922),_0x1f6ded[_0x4dbc22(0x1df)](_0x4dbc22(0x222))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x24359f}:{'allow':![],'reason':_0x4dbc22(0x1c7),'token':null};}else return{'allow':!![],'reason':_0x4dbc22(0x26e),'token':null};};if(settings[_0x59961e(0x2ea)]){let _0x68630c=[...settings[_0x59961e(0x1ff)],'::1',_0x59961e(0x1d1),_0x59961e(0x327)];if(_0x68630c['includes'](_0x219f17))return _0x362926(_0x42b53f);else{_0x1f6ded=validToken(_0x42b53f,_0x352922);if(_0x1f6ded[_0x59961e(0x1df)](_0x59961e(0x222)))return _0x362926(_0x42b53f);else{if(telegramIpApproved(_0x352922)){const _0xaa6c28=generateToken(_0x352922);return _0x1f6ded=_0x362926(_0x42b53f),_0x1f6ded[_0x59961e(0x2fd)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xaa6c28}:_0x1f6ded;}else return settings[_0x59961e(0x1e1)]?{'allow':![],'reason':_0x59961e(0x38e),'token':null}:{'allow':![],'reason':_0x59961e(0x367),'token':null};}}}else return _0x362926(_0x42b53f);}function timelyDecrypt(_0x4ddec1,_0x32e3de=!![]){const _0x4f4ff6=_0x561a8e;if(_0x4ddec1)try{const _0x31e58e=crypt[_0x4f4ff6(0x21f)](secure[_0x4f4ff6(0x376)],_0x4ddec1)[_0x4f4ff6(0x313)],_0x4898ba=_0x31e58e['split']('@')[0x0],_0x14e041=_0x31e58e[_0x4f4ff6(0x1ee)]('@')[0x1],_0x14d568=new Date()[_0x4f4ff6(0x2db)]();if(_0x32e3de){if(_0x14d568-_0x14e041<maxSecretAge*0x3e8)return _0x4898ba;else return![];}else return _0x4898ba;}catch(_0x541a5a){return![];}else return![];}const validToken=(_0x1799fa,_0x524362)=>{const _0x55fd76=_0x561a8e,_0x3ecab5=devices[_0x524362]['ip'];if(!_0x1799fa)return{'error':_0x55fd76(0x2fc)};for(let _0x2c69d7 of blacklist){if(_0x2c69d7[_0x55fd76(0x2c9)]==_0x1799fa)return{'error':_0x55fd76(0x26b)};}let _0x401b04;try{_0x401b04=jwt[_0x55fd76(0x210)](_0x1799fa,secure[_0x55fd76(0x3a4)]+_0x524362);}catch{return{'error':_0x55fd76(0x21d)};}if(!_0x401b04['hasOwnProperty'](_0x55fd76(0x207))&&!_0x401b04[_0x55fd76(0x1df)](_0x55fd76(0x1e8))||!_0x401b04[_0x55fd76(0x1df)]('exp'))return{'error':_0x55fd76(0x253)};if(!_0x401b04[_0x55fd76(0x1df)](_0x55fd76(0x1e8))&&_0x401b04[_0x55fd76(0x1df)]('clientip')){const {clientip:_0x42ef03}=_0x401b04;return _0x3ecab5==_0x42ef03?{'success':_0x55fd76(0x2e9)}:{'error':_0x55fd76(0x297)};}else{if(_0x401b04['hasOwnProperty'](_0x55fd76(0x1e8))&&_0x401b04[_0x55fd76(0x1df)](_0x55fd76(0x207))){const {username:_0x24dcf8,clientip:_0x4b3fe8}=_0x401b04;return settings['bbUsername']==_0x24dcf8&&_0x3ecab5==_0x4b3fe8?{'success':_0x55fd76(0x2e9)}:{'error':_0x55fd76(0x217)};}}},generateLoginToken=_0x47e00f=>{const _0x140a21=_0x561a8e;if(_0x47e00f){const _0x2e00d9=devices[_0x47e00f]['ip'];return jwt[_0x140a21(0x378)]({'username':settings[_0x140a21(0x271)],'clientip':_0x2e00d9},secure[_0x140a21(0x3a4)]+_0x47e00f,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x69fc62=>{const _0x2f1511=_0x561a8e;if(_0x69fc62){const _0x24c67a=devices[_0x69fc62]['ip'];return jwt[_0x2f1511(0x378)]({'clientip':_0x24c67a},secure[_0x2f1511(0x3a4)]+_0x69fc62,{'expiresIn':devices[_0x69fc62][_0x2f1511(0x30d)][_0x2f1511(0x28d)]*0x3c});}else return![];},telegramIpApproved=_0x1b4b4e=>{const _0x55c879=_0x561a8e;let _0x4bff45=![];return devices[_0x1b4b4e][_0x55c879(0x30d)]&&devices[_0x1b4b4e]['telegramIpApproval'][_0x55c879(0x28d)]!='reject'&&(_0x4bff45=devices[_0x1b4b4e][_0x55c879(0x30d)][_0x55c879(0x207)]==devices[_0x1b4b4e]['ip']&&new Date()[_0x55c879(0x2db)]()-devices[_0x1b4b4e][_0x55c879(0x30d)][_0x55c879(0x387)]<devices[_0x1b4b4e][_0x55c879(0x30d)][_0x55c879(0x28d)]*0x3c*0x3e8),_0x4bff45;},telegram2FaApproved=_0x2690de=>{const _0x3dd3a4=_0x561a8e;let _0x38c3e2=![];return devices[_0x2690de][_0x3dd3a4(0x31d)]&&devices[_0x2690de][_0x3dd3a4(0x31d)]['expiry']!=_0x3dd3a4(0x2f9)&&(_0x38c3e2=devices[_0x2690de]['telegram2FaApproval']['clientip']==devices[_0x2690de]['ip']&&new Date()[_0x3dd3a4(0x2db)]()-devices[_0x2690de]['telegram2FaApproval']['timestamp']<devices[_0x2690de][_0x3dd3a4(0x31d)]['expiry']*0x3c*0x3e8),_0x38c3e2;},normalizeIP=_0x5b5c59=>{const _0x50dd0f=_0x561a8e;let _0x56411a=null,_0x59dffb=null;if(ipaddr[_0x50dd0f(0x382)](_0x5b5c59)){const _0x5e3158=ipaddr[_0x50dd0f(0x2a8)](_0x5b5c59);_0x5e3158[_0x50dd0f(0x1da)]()===_0x50dd0f(0x2f4)?(_0x5e3158[_0x50dd0f(0x2bd)]()&&(_0x56411a=_0x5e3158[_0x50dd0f(0x1d8)]()[_0x50dd0f(0x381)]()),_0x59dffb=_0x5e3158['toString']()):(_0x56411a=_0x5e3158[_0x50dd0f(0x381)](),_0x59dffb=_0x5e3158['toIPv4MappedAddress']()[_0x50dd0f(0x381)]());}return{'show':_0x56411a?_0x56411a:_0x59dffb,'store':_0x59dffb};};function formatDate(_0x5a3d92){const _0x54f3d0=_0x561a8e;return _0x5a3d92[_0x54f3d0(0x3a0)]()+'/'+(_0x5a3d92[_0x54f3d0(0x230)]()+0x1)[_0x54f3d0(0x381)]()[_0x54f3d0(0x22d)](0x2,'0')+'/'+_0x5a3d92[_0x54f3d0(0x226)]()['toString']()[_0x54f3d0(0x22d)](0x2,'0')+'\x20'+_0x5a3d92[_0x54f3d0(0x395)]()[_0x54f3d0(0x381)]()[_0x54f3d0(0x22d)](0x2,'0')+':'+_0x5a3d92[_0x54f3d0(0x2a2)]()[_0x54f3d0(0x381)]()['padStart'](0x2,'0')+':'+_0x5a3d92[_0x54f3d0(0x287)]()['toString']()[_0x54f3d0(0x22d)](0x2,'0');}function sleep(_0x143d57){return new Promise(_0x506c23=>setTimeout(_0x506c23,_0x143d57));}