const _0x5695c8=_0x4411;(function(_0x22252f,_0xfb57ef){const _0x2493b2=_0x4411,_0x4b9071=_0x22252f();while(!![]){try{const _0x35c56e=parseInt(_0x2493b2(0x2d9))/0x1+-parseInt(_0x2493b2(0x239))/0x2*(-parseInt(_0x2493b2(0x284))/0x3)+parseInt(_0x2493b2(0x140))/0x4+parseInt(_0x2493b2(0x143))/0x5+-parseInt(_0x2493b2(0x2d4))/0x6+-parseInt(_0x2493b2(0x27d))/0x7+-parseInt(_0x2493b2(0x2cf))/0x8*(parseInt(_0x2493b2(0x25f))/0x9);if(_0x35c56e===_0xfb57ef)break;else _0x4b9071['push'](_0x4b9071['shift']());}catch(_0x5673a2){_0x4b9071['push'](_0x4b9071['shift']());}}}(_0x38ce,0xc528d));const _0x58383e=function(){let _0x5dde32=!![];return function(_0x3d089d,_0x24185b){const _0x19e39f=_0x5dde32?function(){const _0x5c8bf5=_0x4411;if(_0x24185b){const _0x1cfc66=_0x24185b[_0x5c8bf5(0x104)](_0x3d089d,arguments);return _0x24185b=null,_0x1cfc66;}}:function(){};return _0x5dde32=![],_0x19e39f;};}(),_0x5de15c=_0x58383e(this,function(){const _0x4d71cd=_0x4411;return _0x5de15c['toString']()[_0x4d71cd(0x2b3)](_0x4d71cd(0xf0))[_0x4d71cd(0x256)]()[_0x4d71cd(0xf9)](_0x5de15c)[_0x4d71cd(0x2b3)](_0x4d71cd(0xf0));});_0x5de15c();'use strict';process[_0x5695c8(0x1aa)][_0x5695c8(0x206)]=0x1;const childProcess=require(_0x5695c8(0x117)),fs=require('fs'),fns=require(_0x5695c8(0xe7)),low=require(_0x5695c8(0x259)),FileSync=require(_0x5695c8(0x1ca)),path=require(_0x5695c8(0xfc)),crypto=require(_0x5695c8(0x248)),Crypt=require('hybrid-crypto-js')[_0x5695c8(0x211)],RSA=require(_0x5695c8(0x279))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x5695c8(0x20c)),ipaddr=require(_0x5695c8(0x296)),argv=require(_0x5695c8(0x167))(process[_0x5695c8(0x15c)]['slice'](0x2))[_0x5695c8(0x15c)],uuidRandom=require(_0x5695c8(0xe9)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x5695c8(0x286)),axios=require(_0x5695c8(0x27c)),{GraphQLClient,gql}=require(_0x5695c8(0x291)),util=require(_0x5695c8(0xdf)),fileUpload=require(_0x5695c8(0x269)),{networkInterfaces}=require('os'),PORT=argv[_0x5695c8(0xff)]||_0x5695c8(0x2c3),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x5695c8(0x141)](_0x5695c8(0x28e)+PORT+_0x5695c8(0x126)),process[_0x5695c8(0x1b6)](0x1));const HOST=argv['host']||null,userID=argv[_0x5695c8(0x14a)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x5695c8(0xef)];let bbpath='bb/',bbpath2='';const botfile=_0x5695c8(0x1ea),configfile='bb-config.json',settingsfile=_0x5695c8(0x1b7),securefile='bb-secure.json',environment=require('./'+bbpath2+'version.json')['environment']||_0x5695c8(0x197),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5695c8(0x169)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x5695c8(0x2d6),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x5695c8(0xfb),zippath=userID?bbpath+_0x5695c8(0x12d)+userID+'/':bbpath+_0x5695c8(0x12d),loggerfile=fs[_0x5695c8(0x215)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x5695c8(0x1df)+userID+'/':bbpath+_0x5695c8(0x1df);!fs[_0x5695c8(0x154)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x5695c8(0x154)](configbackuppath)&&fs[_0x5695c8(0x1e4)](configbackuppath);!fs[_0x5695c8(0x154)](logspath)&&fs[_0x5695c8(0x1e4)](logspath);!fs[_0x5695c8(0x154)](zippath)&&fs[_0x5695c8(0x1e4)](zippath);!fs[_0x5695c8(0x154)](temppath)&&fs[_0x5695c8(0x1e4)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x5695c8(0x24a)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5695c8(0x1d7)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5695c8(0x1c8),'onepagemode':![]}})[_0x5695c8(0x24a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5695c8(0x1d7)]({'secure':{},'blacklist':[]})[_0x5695c8(0x24a)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x5695c8(0x17a)](_0x5695c8(0x201),{'host':_0x5695c8(0x16f)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x5695c8(0x220)]!=''&&settings['telegramToken']!=_0x5695c8(0x2a9))&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0xfe59aa,_0x55a87d)=>{const _0x31deb4=_0x5695c8,_0x7bfb6e=/#[A-Z]{3}#/g;if(typeof _0xfe59aa==_0x31deb4(0x153)){!_0x55a87d?_0xfe59aa=_0xfe59aa['replace'](_0x7bfb6e,''):(_0xfe59aa=_0xfe59aa[_0x31deb4(0x1a6)](/#BLU#/g,_0x31deb4(0x12e)),_0xfe59aa=_0xfe59aa[_0x31deb4(0x1a6)](/#RED#/g,_0x31deb4(0x25c)),_0xfe59aa=_0xfe59aa[_0x31deb4(0x1a6)](/#YEL#/g,_0x31deb4(0x229)),_0xfe59aa=_0xfe59aa[_0x31deb4(0x1a6)](/#MAG#/g,_0x31deb4(0x105)),_0xfe59aa=_0xfe59aa['replace'](/#CYA#/g,'\x1b[36m'),_0xfe59aa=_0xfe59aa[_0x31deb4(0x1a6)](/#RES#/g,'\x1b[0m'));;}return _0xfe59aa;},logger={'screen':_0x599336=>{const _0x25e8c2=_0x5695c8;console[_0x25e8c2(0x141)](parseColor(_0x599336,!![]));},'simple':_0x25dc01=>{const _0x2f8502=_0x5695c8;console[_0x2f8502(0x141)](parseColor(_0x25dc01,!![])),loggerfile[_0x2f8502(0x24a)](util[_0x2f8502(0x139)](parseColor(_0x25dc01,![]))+'\x0a');},'full':async _0x1ac299=>{const _0x459488=_0x5695c8,_0x8ed58d=getTimeStamp()+_0x459488(0x1bf)+_0x1ac299;console[_0x459488(0x141)](parseColor(_0x8ed58d,!![])),loggerfile[_0x459488(0x24a)](util[_0x459488(0x139)](parseColor(_0x8ed58d,![]))+'\x0a');if(tgBot&&settings[_0x459488(0x2b9)]&&settings[_0x459488(0x1f6)]!=_0x459488(0x21e))await sendTelegram(settings[_0x459488(0x2b9)],_0x459488(0xf1)+parseColor(_0x1ac299,![]));},'debug':async(_0x1c05f9,_0x5b8585='')=>{const _0x4a0c9a=_0x5695c8,_0x7a362e=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x1c05f9;if(debugging)console[_0x4a0c9a(0x141)](parseColor(_0x7a362e,!![]));loggerfile['write'](util[_0x4a0c9a(0x139)](parseColor(_0x7a362e,![]))+'\x0a');if(_0x5b8585){if(debugging)console[_0x4a0c9a(0x141)](_0x5b8585);loggerfile['write'](util['format'](_0x5b8585)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x4bd197){const _0x134685=_0x5695c8;logger[_0x134685(0x175)](_0x4bd197);}),process['on'](_0x5695c8(0x1b6),()=>{stopAllBots();}),process['on'](_0x5695c8(0x157),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5695c8(0x158))[_0x5695c8(0x1e6)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5695c8(0x1c0)),app=express(),http=require(_0x5695c8(0x1eb))['createServer'](app);app[_0x5695c8(0x299)](fileUpload({'useTempFiles':!![]})),app[_0x5695c8(0x12f)](_0x5695c8(0x112),async(_0x82107a,_0xb026cc)=>{const _0xfe1bc5=_0x5695c8,_0x2e99e7=_0x82107a[_0xfe1bc5(0x273)][_0xfe1bc5(0x26d)],_0x5d7ed5=getClientsWithBotID(_0xfe1bc5(0x119)),_0x17c663=_0x82107a['headers']['uuid'],_0x425126=timelyDecrypt(_0x17c663,![]),_0x4c14e4=_0x5d7ed5[_0xfe1bc5(0x1fc)](_0x47838a=>_0x47838a[_0xfe1bc5(0x234)]==_0x425126);if(_0x4c14e4){const _0x3e3b3a=normalizeIP(_0x82107a[_0xfe1bc5(0x195)][_0xfe1bc5(0x1f8)])[_0xfe1bc5(0x27b)],_0x15ea69=_0x82107a[_0xfe1bc5(0x163)][_0xfe1bc5(0x266)];if(validateAccess(_0x15ea69,_0x425126,_0x3e3b3a)[_0xfe1bc5(0x14e)])_0x2e99e7==_0xfe1bc5(0x1f1)&&await backupConfigFiles(),await zipFiles(_0x2e99e7),_0xb026cc[_0xfe1bc5(0x1ab)](zippath+(_0x2e99e7+'.zip'),_0x558c61=>{const _0x4bdba1=_0xfe1bc5;_0x558c61&&(logger[_0x4bdba1(0x12a)](_0x4bdba1(0x16e)+_0x2e99e7),logger[_0x4bdba1(0x175)](_0x558c61));});else logger['full'](_0xfe1bc5(0x159)+_0x2e99e7+_0xfe1bc5(0x22d));}else logger[_0xfe1bc5(0x12a)](_0xfe1bc5(0x159)+_0x2e99e7+_0xfe1bc5(0x21f));}),app[_0x5695c8(0x2d2)](_0x5695c8(0xdc),async(_0x24c854,_0x1a241c)=>{const _0x5d9ace=_0x5695c8,_0xf75448=getClientsWithBotID('botmanager'),_0x19c843=_0x24c854[_0x5d9ace(0x163)][_0x5d9ace(0x234)],_0x225bad=timelyDecrypt(_0x19c843,![]),_0x1f8812=_0xf75448[_0x5d9ace(0x1fc)](_0x37df24=>_0x37df24[_0x5d9ace(0x234)]==_0x225bad);logger[_0x5d9ace(0xf3)](_0x5d9ace(0x146));if(_0x1f8812){const _0x507096=normalizeIP(_0x24c854[_0x5d9ace(0x195)]['remoteAddress'])[_0x5d9ace(0x27b)],_0x16db14=_0x24c854[_0x5d9ace(0x163)][_0x5d9ace(0x266)];if(validateAccess(_0x16db14,_0x225bad,_0x507096)['allow']){if(_0x24c854[_0x5d9ace(0x12b)]){const _0x216725=_0x24c854[_0x5d9ace(0x12b)][_0x5d9ace(0x200)];await _0x216725['mv'](temppath+_0x216725[_0x5d9ace(0x166)]),_0x1a241c['send']({'status':!![],'message':_0x5d9ace(0x274)});const _0x4da7a4=getBotsWithMode();_0x4da7a4['length']>0x0?confirmRestore(temppath,_0x216725['name']):unzipFile(temppath,_0x216725['name']);}}else logger[_0x5d9ace(0x12a)](_0x5d9ace(0x2ad));}else logger[_0x5d9ace(0x12a)](_0x5d9ace(0x23b));}),app[_0x5695c8(0x299)](express[_0x5695c8(0xf8)](path[_0x5695c8(0x1d3)](__dirname,bbpath2,_0x5695c8(0xe2)))),app['use'](express[_0x5695c8(0xf8)](path[_0x5695c8(0x1d3)](__dirname,bbpath2,_0x5695c8(0x1e5)))),app[_0x5695c8(0x12f)]('/',function(_0x100144,_0x5a4021){const _0x222771=_0x5695c8;_0x5a4021[_0x222771(0x1f4)](path['join'](__dirname,bbpath2,_0x222771(0xe2),_0x222771(0x1b3)));}),app[_0x5695c8(0x12f)](_0x5695c8(0xe8),function(_0x30881c,_0x31d6be){const _0x3c2d3d=_0x5695c8;_0x31d6be['sendFile'](path[_0x3c2d3d(0x1d3)](__dirname,bbpath2,_0x3c2d3d(0x1e5),'index.html'));}),app['get']('/:bot/portfolio',(_0x436a8b,_0x4d4612)=>{const _0x4c9eef=_0x5695c8;_0x4d4612[_0x4c9eef(0x1f4)](path[_0x4c9eef(0x1d3)](__dirname,bbpath2,_0x4c9eef(0x1e5),_0x4c9eef(0x1b3)));}),app[_0x5695c8(0x12f)](_0x5695c8(0x1fb),(_0x463f2b,_0x46b7e4)=>{const _0x3ddd71=_0x5695c8;_0x46b7e4[_0x3ddd71(0x1f4)](path[_0x3ddd71(0x1d3)](__dirname,bbpath2,_0x3ddd71(0x1e5),'index.html'));}),app[_0x5695c8(0x12f)](_0x5695c8(0x287),(_0xc7f88e,_0x3b3213)=>{const _0x499425=_0x5695c8;_0x3b3213[_0x499425(0x1f4)](path['join'](__dirname,bbpath2,_0x499425(0x1e5),_0x499425(0x1b3)));}),app[_0x5695c8(0x12f)](_0x5695c8(0x251),(_0x142983,_0x285c4e)=>{const _0xe9800e=_0x5695c8;_0x285c4e[_0xe9800e(0x1f4)](path[_0xe9800e(0x1d3)](__dirname,bbpath2,_0xe9800e(0x1e5),_0xe9800e(0x1b3)));}),app['get']('/:bot/configuration',(_0x29e995,_0x1d77ee)=>{const _0x203d27=_0x5695c8;_0x1d77ee[_0x203d27(0x1f4)](path[_0x203d27(0x1d3)](__dirname,bbpath2,'build',_0x203d27(0x1b3)));}),app[_0x5695c8(0x12f)](_0x5695c8(0x263),(_0x4c0c16,_0xe20a0e)=>{const _0xe6b09e=_0x5695c8;_0xe20a0e[_0xe6b09e(0x1f4)](path[_0xe6b09e(0x1d3)](__dirname,bbpath2,_0xe6b09e(0x1e5),_0xe6b09e(0x1b3)));});if(HOST)http[_0x5695c8(0x156)](PORT,HOST);else http[_0x5695c8(0x156)](PORT);const io=require(_0x5695c8(0x26b))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x56909c=_0x5695c8;let _0x2928d4=_0x56909c(0x10a);const _0x5750d7=networkInterfaces(),_0x58987f={};for(const _0x584c5e of Object[_0x56909c(0x1c3)](_0x5750d7)){for(const _0x11e330 of _0x5750d7[_0x584c5e]){if((_0x11e330['family']==_0x56909c(0x191)||_0x11e330[_0x56909c(0x161)]==0x4)&&!_0x11e330[_0x56909c(0x29f)]){const _0x375348=ipaddr['parse'](_0x11e330[_0x56909c(0x2a3)])[_0x56909c(0x203)]();_0x375348!='private'&&(!_0x58987f[_0x584c5e]&&(_0x58987f[_0x584c5e]=[]),_0x58987f[_0x584c5e]['push'](_0x11e330[_0x56909c(0x2a3)]),_0x2928d4=_0x11e330[_0x56909c(0x2a3)]);}}}return{'serverip':_0x2928d4,'netinterfaces':_0x58987f};}async function startServer(){const _0x32a3de=_0x5695c8,{serverip:_0x151081,netinterfaces:_0x329292}=getServerIP();logger[_0x32a3de(0x175)](''),logger[_0x32a3de(0x175)]('-----------------------------------------------------------------------------------'),await logger[_0x32a3de(0x12a)](_0x32a3de(0x17b)+serverversion+'#RES#\x20'+(environment==_0x32a3de(0x1b1)?_0x32a3de(0x29d):'')+'\x0a'+(_0x32a3de(0x285)+PORT+_0x32a3de(0x179))+('=>\x20Go\x20to\x20#CYA#http://'+_0x151081+':'+PORT+_0x32a3de(0x2a5))),logger[_0x32a3de(0x175)](_0x32a3de(0x22f));if(config[_0x32a3de(0x1e2)]!=0x0)for(const _0x2fc72e of config){const _0x181274=_0x2fc72e[_0x32a3de(0x24f)]==_0x32a3de(0x115)?'a':'m';if(_0x2fc72e[_0x32a3de(0x25e)]==_0x32a3de(0x198)||_0x2fc72e[_0x32a3de(0x25e)]==_0x32a3de(0x1de))await logger['full'](_0x32a3de(0x1f5)+_0x181274+')\x20|\x20Bot\x20'+_0x2fc72e[_0x32a3de(0x293)]+'\x20|\x20'+_0x2fc72e[_0x32a3de(0x155)]),startBot([_0x2fc72e[_0x32a3de(0x293)],userID],{'cwd':bbpath},function(_0x30add6){const _0x45bded=_0x32a3de;if(_0x30add6)logger[_0x45bded(0x12a)](_0x30add6);});else(_0x2fc72e[_0x32a3de(0x25e)]=='disabled'||_0x2fc72e[_0x32a3de(0x25e)]==_0x32a3de(0xe3))&&await logger[_0x32a3de(0x12a)]('Idling\x20('+_0x181274+_0x32a3de(0x237)+_0x2fc72e[_0x32a3de(0x293)]+_0x32a3de(0x103)+_0x2fc72e[_0x32a3de(0x155)]);}else!newBot&&logger[_0x32a3de(0x175)](_0x32a3de(0x26e));if(newBot)addBot();logger['simple'](_0x32a3de(0x22f)),logger[_0x32a3de(0x175)](''),await logger[_0x32a3de(0xf3)](_0x32a3de(0x218)+nodeversion),await logger['debug']('Network\x20Interfaces:',_0x329292);}function startSocket(){const _0x25c18a=_0x5695c8;io['on'](_0x25c18a(0xe5),_0x4c80e2=>{const _0x53bc41=_0x25c18a;let _0x1e8d10,_0x53d591,_0xfc8614,_0x238f34,_0xf8a3f4;const _0x5e61a8=_0x4c80e2['handshake']['headers'][_0x53bc41(0x1b2)];_0x53d591=_0x5e61a8[_0x53bc41(0x2a6)](/bot[0-9]{3}/);if(_0x53d591)_0xfc8614=_0x53d591[0x0]['match'](/[0-9]{3}/);if(_0xfc8614)_0x1e8d10=_0xfc8614[0x0];else _0x1e8d10=_0x53bc41(0x119);const _0x14bdc2=_0x4c80e2['handshake'][_0x53bc41(0x29a)]['encryptedUuid'];if(!_0x14bdc2)_0x4c80e2[_0x53bc41(0x113)](_0x53bc41(0x25e),{'publicKey':secure['publicKey']});else{_0x238f34=timelyDecrypt(_0x14bdc2,![]);if(!_0x238f34)_0x4c80e2[_0x53bc41(0x113)](_0x53bc41(0x25e),{'publicKey':secure['publicKey']});else{_0xf8a3f4=normalizeIP(_0x4c80e2[_0x53bc41(0x13a)][_0x53bc41(0x1f8)])[_0x53bc41(0x27b)];if(!devices[_0x238f34])devices[_0x238f34]={'uuid':_0x238f34,'access':{'token':null}};devices[_0x238f34]['ip']=_0xf8a3f4;const _0x2cdecd=addClient(_0x4c80e2['id'],_0x238f34,_0x1e8d10);setAccess(_0x2cdecd),emitMessages(),_0x4c80e2['on'](_0x53bc41(0x110),_0x55b92d=>{const _0x5a024c=_0x53bc41,_0x31485e=timelyDecrypt(_0x55b92d[_0x5a024c(0x29b)]);if(_0x31485e){_0x55b92d={'username':_0x55b92d['username'],'password':_0x31485e},devices[_0x238f34][_0x5a024c(0x1fe)]=validateCredentials(_0x55b92d,_0x238f34);if(devices[_0x238f34][_0x5a024c(0x1fe)]['allow']==![]&&devices[_0x238f34][_0x5a024c(0x1fe)][_0x5a024c(0xf5)]=='2FA\x20login\x20required')_0x4c80e2[_0x5a024c(0x113)]('status',{'access':devices[_0x238f34]['access']}),loginAccess2FA(_0x238f34,_0xf8a3f4);else{if(devices[_0x238f34][_0x5a024c(0x1fe)][_0x5a024c(0x14e)]==![]&&devices[_0x238f34][_0x5a024c(0x1fe)]['reason']==_0x5a024c(0x213))_0x4c80e2[_0x5a024c(0x113)]('status',{'access':devices[_0x238f34][_0x5a024c(0x1fe)]});else devices[_0x238f34][_0x5a024c(0x1fe)][_0x5a024c(0x14e)]&&devices[_0x238f34][_0x5a024c(0x1fe)][_0x5a024c(0xf5)]==_0x5a024c(0x1f9)&&(getClientsWithUuid(_0x238f34)[_0x5a024c(0x294)](_0x460420=>{setAccess(_0x460420);}),logger[_0x5a024c(0xf3)](_0x5a024c(0x15d)+_0x238f34['slice'](-0x8)),setTokenRefresh(_0x238f34),setSessionTimeout(_0x5a024c(0x110),_0x238f34));}}else logger[_0x5a024c(0x12a)](_0x5a024c(0xfa));}),_0x4c80e2['on']('reset-password',()=>{resetPassword();}),_0x4c80e2['on'](_0x53bc41(0x1a1),_0x21e2cf=>{removeClient(_0x4c80e2['id']);}),_0x1e8d10=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5c4479){const _0x36db23=_0x5695c8;if(_0x5c4479!='botmanager'&&config['apiKey']!=''){if(pid[_0x5c4479])pid[_0x5c4479][_0x36db23(0x271)]({'function':_0x36db23(0xfe),'args':null});}_0x5c4479!=_0x36db23(0x119)&&broadcastToBots('bots',JSON[_0x36db23(0x2d8)](config));}function reloadBotManager(){const _0x27d479=_0x5695c8;getClientsWithBotID(_0x27d479(0x119))[_0x27d479(0x294)](_0x1228f4=>{const _0x228e09=_0x27d479;getSocket(_0x1228f4['id'])[_0x228e09(0x113)](_0x228e09(0x25e),{'access':{'allow':![],'reason':_0x228e09(0x18e),'token':null}});});}function getSocket(_0x25f8cf){return io['sockets']['sockets']['get'](_0x25f8cf);}function setAccess(_0x1f41c4){const _0x54a5dd=_0x5695c8,_0x4554d0=getSocket(_0x1f41c4['id']),_0x2467f0=_0x1f41c4[_0x54a5dd(0x234)],_0x289411=_0x1f41c4['bot'];devices[_0x2467f0][_0x54a5dd(0x1fe)]=validateAccess(devices[_0x2467f0]['access'][_0x54a5dd(0xf2)],_0x2467f0),logger['debug'](_0x54a5dd(0x264)+devices[_0x2467f0][_0x54a5dd(0x1fe)][_0x54a5dd(0xf5)]+_0x54a5dd(0x222)+_0x1f41c4['id'][_0x54a5dd(0x22a)](-0x8)+_0x54a5dd(0x276)+_0x2467f0[_0x54a5dd(0x22a)](-0x8)),_0x4554d0['join'](_0x2467f0);if(devices[_0x2467f0]['access'][_0x54a5dd(0x14e)]){_0x4554d0[_0x54a5dd(0x1d3)](_0x289411);if(_0x289411==_0x54a5dd(0x119))initializeSocketBotManager(_0x4554d0);else initializeSocketBot(_0x4554d0);initClient(_0x289411);}devices[_0x2467f0][_0x54a5dd(0x1fe)]['token']&&devices[_0x2467f0]['access'][_0x54a5dd(0xf5)]==_0x54a5dd(0xea)&&setSessionTimeout(_0x54a5dd(0x19d),_0x2467f0),devices[_0x2467f0][_0x54a5dd(0x1fe)]['token']&&devices[_0x2467f0][_0x54a5dd(0x1fe)][_0x54a5dd(0xf5)]==_0x54a5dd(0x124)&&setSessionTimeout(_0x54a5dd(0x110),_0x2467f0),_0x4554d0[_0x54a5dd(0x113)](_0x54a5dd(0x25e),{'status':_0x1f41c4[_0x54a5dd(0x149)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2467f0][_0x54a5dd(0x1fe)],'externalip':devices[_0x2467f0]['ip'],'publicKey':secure[_0x54a5dd(0x1c7)],'userid':settings[_0x54a5dd(0x27e)],'validInstallation':validInstallation}),devices[_0x2467f0][_0x54a5dd(0x1fe)][_0x54a5dd(0x14e)]==![]&&devices[_0x2467f0][_0x54a5dd(0x1fe)][_0x54a5dd(0xf5)]==_0x54a5dd(0x277)&&temporaryAccess2FA(_0x2467f0,devices[_0x2467f0]['ip']);}function setSessionTimeout(_0x1a2700,_0x1e40c1){const _0x6b0c1d=_0x5695c8;let _0x26683b;if(_0x1a2700==_0x6b0c1d(0x110))_0x26683b=loginExpiry*0x3c*0x3e8;else _0x26683b=devices[_0x1e40c1]['telegramIpApproval'][_0x6b0c1d(0x186)]*0x3c*0x3e8-(new Date()[_0x6b0c1d(0x278)]()-devices[_0x1e40c1][_0x6b0c1d(0x20e)][_0x6b0c1d(0xe4)]);if(devices[_0x1e40c1][_0x6b0c1d(0x2bc)])clearTimeout(devices[_0x1e40c1][_0x6b0c1d(0x2bc)]);devices[_0x1e40c1][_0x6b0c1d(0x2bc)]=setTimeout(()=>{const _0x32ca9e=_0x6b0c1d;if(devices[_0x1e40c1]['pidRefreshToken'])clearTimeout(devices[_0x1e40c1][_0x32ca9e(0x1cd)]);removeSocketListeners(_0x1e40c1),addBlacklist(_0x1e40c1),devices[_0x1e40c1]['telegramIpApproval']=null,devices[_0x1e40c1][_0x32ca9e(0xe6)]=null,devices[_0x1e40c1][_0x32ca9e(0x1fe)][_0x32ca9e(0xf2)]=null,logger[_0x32ca9e(0xf3)](_0x32ca9e(0x102)+_0x1e40c1[_0x32ca9e(0x22a)](-0x8)),devices[_0x1e40c1]['access']=validateAccess(devices[_0x1e40c1][_0x32ca9e(0x1fe)][_0x32ca9e(0xf2)],_0x1e40c1),!(devices[_0x1e40c1][_0x32ca9e(0x1fe)][_0x32ca9e(0x14e)]&&devices[_0x1e40c1][_0x32ca9e(0x1fe)]['reason']==_0x32ca9e(0x1bc))&&(_0x1a2700=='login'?io['to'](_0x1e40c1)[_0x32ca9e(0x113)]('status',{'access':{'allow':![],'reason':_0x32ca9e(0x135),'token':null}}):io['to'](_0x1e40c1)[_0x32ca9e(0x113)](_0x32ca9e(0x25e),{'access':{'allow':![],'reason':_0x32ca9e(0x290),'token':null}})),devices[_0x1e40c1][_0x32ca9e(0x1fe)][_0x32ca9e(0xf2)]=null;},_0x26683b);}function setTokenRefresh(_0x29b4a9){const _0x39d859=_0x5695c8;if(devices[_0x29b4a9]['pidRefreshToken'])clearTimeout(devices[_0x29b4a9]['pidRefreshToken']);devices[_0x29b4a9][_0x39d859(0x1cd)]=setTimeout(()=>{const _0x301ff7=_0x39d859;getClientsWithUuid(_0x29b4a9)[_0x301ff7(0x1e2)]!=0x0?(devices[_0x29b4a9][_0x301ff7(0x1fe)]=refreshToken(_0x29b4a9),io['to'](_0x29b4a9)[_0x301ff7(0x113)]('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x29b4a9]['access'],'externalip':devices[_0x29b4a9]['ip'],'publicKey':secure[_0x301ff7(0x1c7)],'validInstallation':validInstallation}),setTokenRefresh(_0x29b4a9)):clearTimeout(devices[_0x29b4a9][_0x301ff7(0x1cd)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2eae1b){const _0x2953cf=_0x5695c8,_0x318526=getClient(_0x2eae1b['id'])[_0x2953cf(0x234)];_0x2eae1b[_0x2953cf(0x113)](_0x2953cf(0x168),config),_0x2eae1b[_0x2953cf(0x113)](_0x2953cf(0x235),cleanSettings()),_0x2eae1b['on'](_0x2953cf(0x24d),_0x448c23=>{const _0x59d3a5=_0x2953cf;if(validateAccess(_0x448c23,_0x318526)[_0x59d3a5(0x14e)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x2eae1b['on']('update-bot',(_0x5687b5,_0x37c165)=>{const _0x10080d=_0x2953cf;if(validateAccess(_0x37c165,_0x318526)[_0x10080d(0x14e)])toggleBot(_0x5687b5[_0x10080d(0x293)],_0x5687b5[_0x10080d(0x25e)],_0x5687b5[_0x10080d(0x19a)]);else logger[_0x10080d(0x12a)](_0x10080d(0x2bb));}),_0x2eae1b['on'](_0x2953cf(0x187),(_0x3ee113,_0x26609b)=>{const _0x4c6577=_0x2953cf;if(validateAccess(_0x26609b,_0x318526)['allow'])toggleBotMode(_0x3ee113);else logger[_0x4c6577(0x12a)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x2eae1b['on']('delete-bot',(_0x57e89a,_0x2f6792)=>{const _0x5f4ccc=_0x2953cf;if(validateAccess(_0x2f6792,_0x318526)['allow'])deleteBot(_0x57e89a);else logger[_0x5f4ccc(0x12a)](_0x5f4ccc(0x162));}),_0x2eae1b['on'](_0x2953cf(0x245),(_0x4c2073,_0x34eed4)=>{const _0x243031=_0x2953cf;if(validateAccess(_0x34eed4,_0x318526)[_0x243031(0x14e)])storeSettings(_0x4c2073,!![]);else logger[_0x243031(0x12a)](_0x243031(0x160));}),_0x2eae1b['on'](_0x2953cf(0x18d),_0x326503=>{const _0x459cfe=_0x2953cf;if(validateAccess(_0x326503,_0x318526)[_0x459cfe(0x14e)])updateBB(_0x459cfe(0x2b4));else logger[_0x459cfe(0x12a)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x2eae1b['on'](_0x2953cf(0x18f),_0x46b040=>{const _0x4a09d9=_0x2953cf;if(validateAccess(_0x46b040,_0x318526)[_0x4a09d9(0x14e)])updateBB(_0x4a09d9(0x1ad));else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x2eae1b['on'](_0x2953cf(0x183),_0x29e7af=>{const _0x99e751=_0x2953cf;if(validateAccess(_0x29e7af,_0x318526)[_0x99e751(0x14e)]){const _0x41c25c=getClient(_0x2eae1b['id']);if(_0x41c25c)getBackupFiles(_0x41c25c[_0x99e751(0x234)]);else logger[_0x99e751(0x12a)](_0x99e751(0xed));}else logger[_0x99e751(0x12a)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x2eae1b['on'](_0x2953cf(0x13c),(_0x47039e,_0x25ed33)=>{const _0x53f079=_0x2953cf;if(validateAccess(_0x25ed33,_0x318526)[_0x53f079(0x14e)])restoreBackupFile(_0x47039e);else logger[_0x53f079(0x12a)](_0x53f079(0x25b));}),_0x2eae1b['on']('get-messages',_0x38d39e=>{const _0x262f16=_0x2953cf;if(validateAccess(_0x38d39e,_0x318526)[_0x262f16(0x14e)])getMessages();else logger[_0x262f16(0x12a)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2eae1b['on'](_0x2953cf(0x28b),(_0x1bedf7,_0x174fc6)=>{const _0x6698a4=_0x2953cf;if(validateAccess(_0x174fc6,_0x318526)[_0x6698a4(0x14e)])confirmMessage(_0x1bedf7);else logger[_0x6698a4(0x12a)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2eae1b['on']('logout',_0x4248e6=>{const _0x551ed3=_0x2953cf;if(validateAccess(_0x4248e6,_0x318526)[_0x551ed3(0x14e)]){if(devices[_0x318526][_0x551ed3(0x1cd)])clearTimeout(devices[_0x318526][_0x551ed3(0x1cd)]);if(devices[_0x318526][_0x551ed3(0x2bc)])clearTimeout(devices[_0x318526][_0x551ed3(0x2bc)]);removeSocketListeners(getClient(_0x2eae1b['id'])['uuid']),addBlacklist(_0x318526),devices[_0x318526][_0x551ed3(0x20e)]=null,devices[_0x318526][_0x551ed3(0xe6)]=null,devices[_0x318526]['access']['token']=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x318526['slice'](-0x8)),io['to'](getClient(_0x2eae1b['id'])['uuid'])[_0x551ed3(0x113)](_0x551ed3(0x25e),{'access':{'allow':![],'reason':_0x551ed3(0x1d8),'token':null}});}else logger[_0x551ed3(0x12a)](_0x551ed3(0x14d));});}function initializeSocketBot(_0x5ae733){const _0x1327c8=_0x5695c8,_0x2616e8=getClient(_0x5ae733['id'])[_0x1327c8(0x255)],_0x567bae=getClient(_0x5ae733['id'])[_0x1327c8(0x234)];_0x5ae733['on']('get-logs',(_0xffd889,_0x5ebb21)=>{const _0x50bf5a=_0x1327c8;if(validateAccess(_0x5ebb21,_0x567bae)[_0x50bf5a(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8]['send']({'function':_0x50bf5a(0x1bb),'args':_0xffd889});}else logger['full'](_0x50bf5a(0x2a4));}),_0x5ae733['on']('delete-alerts',(_0x2aba0d,_0x322d39)=>{const _0x24090f=_0x1327c8;if(validateAccess(_0x322d39,_0x567bae)['allow']){if(pid[_0x2616e8])pid[_0x2616e8][_0x24090f(0x271)]({'function':_0x24090f(0x2d0),'args':_0x2aba0d});}else logger[_0x24090f(0x12a)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5ae733['on'](_0x1327c8(0x11c),(_0x2f1036,_0xb72b4a)=>{const _0x5366c1=_0x1327c8;if(validateAccess(_0xb72b4a,_0x567bae)[_0x5366c1(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8]['send']({'function':_0x5366c1(0x1e9),'args':_0x2f1036});}else logger['full'](_0x5366c1(0x174));}),_0x5ae733['on'](_0x1327c8(0x1d4),(_0xc18c63,_0x3480a2)=>{const _0x34ad1a=_0x1327c8;if(validateAccess(_0x3480a2,_0x567bae)[_0x34ad1a(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x34ad1a(0x271)]({'function':'storeConfiguration','args':_0xc18c63});}else logger[_0x34ad1a(0x12a)](_0x34ad1a(0x192));}),_0x5ae733['on'](_0x1327c8(0x108),(_0x3e867b,_0x183e07)=>{const _0x2a0982=_0x1327c8;if(validateAccess(_0x183e07,_0x567bae)[_0x2a0982(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x2a0982(0x271)]({'function':'storeHeadless','args':_0x3e867b});}else logger[_0x2a0982(0x12a)](_0x2a0982(0x2ab));}),_0x5ae733['on'](_0x1327c8(0x14b),(_0x363115,_0x52c1e5)=>{const _0x2b20f4=_0x1327c8;if(validateAccess(_0x52c1e5,_0x567bae)['allow']){if(pid[_0x2616e8])pid[_0x2616e8]['send']({'function':_0x2b20f4(0x2b2),'args':_0x363115});}else logger[_0x2b20f4(0x12a)](_0x2b20f4(0x1c1));}),_0x5ae733['on'](_0x1327c8(0x267),_0xffe41=>{const _0x307e51=_0x1327c8;if(validateAccess(_0xffe41,_0x567bae)[_0x307e51(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x307e51(0x271)]({'function':_0x307e51(0x14f),'args':null});}else logger[_0x307e51(0x12a)](_0x307e51(0x282));}),_0x5ae733['on'](_0x1327c8(0x172),_0x432803=>{const _0x30a173=_0x1327c8;if(validateAccess(_0x432803,_0x567bae)[_0x30a173(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x30a173(0x271)]({'function':_0x30a173(0x12c),'args':null});}else logger[_0x30a173(0x12a)](_0x30a173(0x1a7));}),_0x5ae733['on'](_0x1327c8(0x257),(_0x4173b1,_0x2a642f)=>{const _0x47bc34=_0x1327c8;if(validateAccess(_0x2a642f,_0x567bae)[_0x47bc34(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x47bc34(0x271)]({'function':'placeOrder','args':_0x4173b1});}else logger[_0x47bc34(0x12a)](_0x47bc34(0x262));}),_0x5ae733['on'](_0x1327c8(0x1e0),_0x19c804=>{const _0x3a661e=_0x1327c8;if(validateAccess(_0x19c804,_0x567bae)[_0x3a661e(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8][_0x3a661e(0x271)]({'function':'cancelLoading','args':null});}else logger[_0x3a661e(0x12a)](_0x3a661e(0x2aa));}),_0x5ae733['on'](_0x1327c8(0x188),_0x3afdd5=>{const _0x19aad1=_0x1327c8;if(validateAccess(_0x3afdd5,_0x567bae)[_0x19aad1(0x14e)]){if(pid[_0x2616e8])pid[_0x2616e8]['send']({'function':'showConfig','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x5ae733['on'](_0x1327c8(0x18d),_0x535aa9=>{const _0x2b2423=_0x1327c8;if(validateAccess(_0x535aa9,_0x567bae)[_0x2b2423(0x14e)])updateBB(_0x2b2423(0x2b4));else logger['full'](_0x2b2423(0x148));}),_0x5ae733['on'](_0x1327c8(0x261),_0x2c46af=>{const _0x4a646e=_0x1327c8;if(validateAccess(_0x2c46af,_0x567bae)[_0x4a646e(0x14e)])getMessages();else logger[_0x4a646e(0x12a)](_0x4a646e(0x221));}),_0x5ae733['on'](_0x1327c8(0x28b),(_0xff3f5e,_0x5ca1b3)=>{const _0xda652d=_0x1327c8;if(validateAccess(_0x5ca1b3,_0x567bae)[_0xda652d(0x14e)])confirmMessage(_0xff3f5e);else logger[_0xda652d(0x12a)](_0xda652d(0x24c));}),_0x5ae733['on']('logout',_0x448191=>{const _0x2b50b8=_0x1327c8;if(validateAccess(_0x448191,_0x567bae)[_0x2b50b8(0x14e)]){if(devices[_0x567bae]['pidRefreshToken'])clearTimeout(devices[_0x567bae]['pidRefreshToken']);if(devices[_0x567bae][_0x2b50b8(0x2bc)])clearTimeout(devices[_0x567bae][_0x2b50b8(0x2bc)]);removeSocketListeners(getClient(_0x5ae733['id'])[_0x2b50b8(0x234)]),addBlacklist(_0x567bae),devices[_0x567bae]['telegramIpApproval']=null,devices[_0x567bae]['telegram2FaApproval']=null,devices[_0x567bae][_0x2b50b8(0x1fe)][_0x2b50b8(0xf2)]=null,logger['debug'](_0x2b50b8(0x122)+_0x567bae[_0x2b50b8(0x22a)](-0x8)),io['to'](getClient(_0x5ae733['id'])[_0x2b50b8(0x234)])[_0x2b50b8(0x113)](_0x2b50b8(0x25e),{'access':{'allow':![],'reason':_0x2b50b8(0x1d8),'token':null}});}else logger[_0x2b50b8(0x12a)](_0x2b50b8(0x14d));});}function removeSocketListeners(_0x56f341){const _0x2dca7e=_0x5695c8;getClientsWithUuid(_0x56f341)[_0x2dca7e(0x294)](_0x4ff782=>{const _0x285249=_0x2dca7e;getSocket(_0x4ff782['id'])[_0x285249(0xe0)]();});}function cleanSettings(){const _0x214b68=_0x5695c8;let _0x2cb64e=settings;return settings[_0x214b68(0x220)]&&settings['telegramToken']!=''&&(_0x2cb64e={..._0x2cb64e,'telegramToken':'************'}),settings[_0x214b68(0x241)]&&settings[_0x214b68(0x241)]!=''&&(_0x2cb64e={..._0x2cb64e,'bbPassword':_0x214b68(0x133)}),(settings['bbPassword']&&settings[_0x214b68(0x241)]=='***'||settings[_0x214b68(0x220)]&&settings[_0x214b68(0x220)]=='***')&&(_0x2cb64e={..._0x2cb64e,'restored':{'password':settings['bbPassword']==_0x214b68(0x2a9),'telegram':settings[_0x214b68(0x220)]==_0x214b68(0x2a9)}}),_0x2cb64e;}async function updateBB(_0x4bb260){const _0x3a2a4f=_0x5695c8;await backupConfigFiles(),installingUpdate=!![],config[_0x3a2a4f(0x294)](_0x37d565=>{const _0x1dd689=_0x3a2a4f;restartBot(_0x37d565[_0x1dd689(0x293)]);});if(_0x4bb260==_0x3a2a4f(0x2b4))process[_0x3a2a4f(0x271)]({'update':!![],'environment':environment},_0x3b64eb=>{});else _0x4bb260==_0x3a2a4f(0x1ad)&&process[_0x3a2a4f(0x271)]({'reinstall':!![],'environment':environment},_0x1cc4a9=>{});}function startBot(_0x26e674,_0x22aa13,_0x232e78){const _0x1327c4=_0x5695c8;if(debugging)_0x26e674[_0x1327c4(0x29e)]('-d');let _0xfa30ae=![];const _0x526bf1=_0x26e674[0x0];_0x22aa13={..._0x22aa13,'stdio':[_0x1327c4(0x18c),_0x1327c4(0x18c),_0x1327c4(0x18c),_0x1327c4(0x151)]},pid[_0x526bf1]=childProcess[_0x1327c4(0x202)](botfile,_0x26e674,_0x22aa13),pid[_0x526bf1]['on'](_0x1327c4(0x24e),_0x4de67c=>{const _0x139d4d=_0x1327c4;switch(Object[_0x139d4d(0x1c3)](_0x4de67c)[0x0]){case _0x139d4d(0x155):updateBotName(_0x526bf1,_0x4de67c[_0x139d4d(0x155)]);break;case _0x139d4d(0x275):updateBotManager();break;case _0x139d4d(0x25e):updateStatus(_0x526bf1,_0x4de67c[_0x139d4d(0x25e)]);break;case'live':updateLive(_0x526bf1,_0x4de67c[_0x139d4d(0x19a)]);break;case'started':updateLive(_0x526bf1,_0x4de67c[_0x139d4d(0x258)]),io['to'](_0x526bf1)['emit'](_0x139d4d(0x25e),{'access':{'allow':![],'reason':_0x139d4d(0x18e),'token':null}});break;case _0x139d4d(0xda):_0x4de67c['stop']==_0x139d4d(0x23a)&&restartBot(_0x526bf1);_0x4de67c[_0x139d4d(0xda)]==_0x139d4d(0x10c)&&toggleBot(_0x526bf1,_0x139d4d(0x101),_0x139d4d(0x204));break;case _0x139d4d(0x1b8):sendTelegramBot(_0x526bf1,_0x4de67c[_0x139d4d(0x1b8)]);break;case _0x139d4d(0x120):sendTelegramMsg(_0x4de67c[_0x139d4d(0x120)]);break;case _0x139d4d(0x2bd):io['to'](_0x526bf1)[_0x139d4d(0x113)](_0x4de67c['function'],_0x4de67c['args']);break;}}),pid[_0x526bf1]['on']('error',function(_0x4a1a99){if(_0xfa30ae)return;_0xfa30ae=!![],_0x232e78(_0x4a1a99);}),pid[_0x526bf1]['on'](_0x1327c4(0x1b6),async function(_0x5c8ee1){const _0x2dd600=_0x1327c4;if(terminating)return;if(installingUpdate){logger[_0x2dd600(0xf3)]('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io[_0x2dd600(0xf6)]();return;}if(_0xfa30ae)return;_0xfa30ae=!![],_0x232e78(null);const _0x3e8ec6=dbConfig[_0x2dd600(0x12f)](_0x2dd600(0x168))[_0x2dd600(0x1fc)]({'botID':_0x526bf1})['value']();_0x3e8ec6&&(_0x3e8ec6[_0x2dd600(0x25e)]==_0x2dd600(0x198)||_0x3e8ec6['status']==_0x2dd600(0x1de))&&(await sleep(0x3e8),updateLive(_0x526bf1,_0x2dd600(0x204)),logger[_0x2dd600(0x12a)](_0x2dd600(0x26a)+_0x526bf1),startBot([_0x526bf1,userID],{'cwd':bbpath},function(_0x42b86f){const _0x272110=_0x2dd600;if(_0x42b86f)logger[_0x272110(0x12a)](_0x42b86f);}));});}function stopBot(_0x3efd07){const _0x2b3a8b=_0x5695c8;getClientsWithBotID(_0x3efd07)[_0x2b3a8b(0x294)](_0x16323b=>{getSocket(_0x16323b['id'])['disconnect'](!![]),removeClient(_0x16323b['id']);}),pid[_0x3efd07]&&(pid[_0x3efd07][_0x2b3a8b(0x10c)](),pid[_0x3efd07]=null);}function stopAllBots(){terminating=!![];const _0x3195ce=getEnabledBots();_0x3195ce['forEach'](_0xa82e43=>{const _0x54ff46=_0x4411;stopBot(_0xa82e43[_0x54ff46(0x293)]);});}function restartBot(_0x15e340){const _0x214536=_0x5695c8;if(pid[_0x15e340])pid[_0x15e340][_0x214536(0x10c)]();}function addBot(){const _0x18a20a=_0x5695c8;let _0x378253;for(let _0x51a5ba=0x1;_0x51a5ba<0x3e9;_0x51a5ba++){_0x378253=_0x51a5ba['toString']()['padStart'](0x3,'0');let _0x16351b=config[_0x18a20a(0x1fc)](_0x1616b3=>_0x1616b3[_0x18a20a(0x293)]==_0x378253);if(!_0x16351b)break;}if(_0x378253==='1000'){logger[_0x18a20a(0x12a)](_0x18a20a(0x1ba));return;}logger['full'](_0x18a20a(0x1a2)+_0x378253),dbConfig[_0x18a20a(0x12f)](_0x18a20a(0x168))[_0x18a20a(0x29e)]({'botID':_0x378253,'botname':_0x18a20a(0x1d1)+_0x378253,'status':'new','live':''})[_0x18a20a(0x24a)](),startBot([_0x378253,userID],{'cwd':bbpath},function(_0x9cef53){const _0x57fef7=_0x18a20a;if(_0x9cef53)logger[_0x57fef7(0x12a)](_0x9cef53);}),config=getConfiguration(),io['to'](_0x18a20a(0x119))['emit'](_0x18a20a(0x168),config),broadcastToBots(_0x18a20a(0x168),JSON[_0x18a20a(0x2d8)](config));}function deleteBot(_0x5c4395){const _0x23b20d=_0x5695c8;getClientsWithBotID(_0x5c4395)['forEach'](_0x27510c=>{const _0x43d0d3=_0x4411;getSocket(_0x27510c['id'])[_0x43d0d3(0x1a1)](!![]),removeClient(_0x27510c['id']);}),dbConfig[_0x23b20d(0x12f)](_0x23b20d(0x168))[_0x23b20d(0x106)]({'botID':_0x5c4395})[_0x23b20d(0x24a)](),logger[_0x23b20d(0x12a)](_0x23b20d(0x1f2)+_0x5c4395),stopBot(_0x5c4395);try{if(fs['existsSync'](path['join'](configpath,'bot-'+_0x5c4395+'-config.json')))fs[_0x23b20d(0x2c8)](path[_0x23b20d(0x1d3)](configpath,_0x23b20d(0x1ac)+_0x5c4395+_0x23b20d(0x2ce)));if(fs[_0x23b20d(0x154)](path[_0x23b20d(0x1d3)](configpath,_0x23b20d(0x1ac)+_0x5c4395+_0x23b20d(0x272))))fs[_0x23b20d(0x2c8)](path[_0x23b20d(0x1d3)](configpath,_0x23b20d(0x1ac)+_0x5c4395+_0x23b20d(0x272)));if(fs[_0x23b20d(0x154)](path[_0x23b20d(0x1d3)](configpath,_0x23b20d(0x1ac)+_0x5c4395+'-performance.json')))fs['unlinkSync'](path[_0x23b20d(0x1d3)](configpath,_0x23b20d(0x1ac)+_0x5c4395+_0x23b20d(0x170)));if(fs[_0x23b20d(0x154)](path['join'](configpath,_0x23b20d(0x1ac)+_0x5c4395+_0x23b20d(0x22e))))fs[_0x23b20d(0x2c8)](path['join'](configpath,_0x23b20d(0x1ac)+_0x5c4395+'-results.json'));}catch(_0x32c265){if(_0x32c265)logger[_0x23b20d(0x12a)](_0x23b20d(0x10b),_0x32c265);}config=getConfiguration(),io['to'](_0x23b20d(0x119))[_0x23b20d(0x113)](_0x23b20d(0x168),config),broadcastToBots('bots',JSON[_0x23b20d(0x2d8)](config));}function toggleBot(_0xebc98c,_0x556933,_0x4eba8a){const _0x5efc97=_0x5695c8;dbConfig[_0x5efc97(0x12f)](_0x5efc97(0x168))['find']({'botID':_0xebc98c})[_0x5efc97(0x13f)]({'status':_0x556933})[_0x5efc97(0x13f)]({'live':_0x4eba8a})[_0x5efc97(0x24a)]();if(_0x556933==_0x5efc97(0x198)||_0x556933=='new')logger['full'](_0x5efc97(0x233)+_0xebc98c),startBot([_0xebc98c,userID],{'cwd':bbpath},function(_0x19aa0a){const _0x2f0698=_0x5efc97;if(_0x19aa0a)logger[_0x2f0698(0x12a)](_0x19aa0a);});else(_0x556933==_0x5efc97(0x101)||_0x556933==_0x5efc97(0xe3))&&(logger[_0x5efc97(0x12a)](_0x5efc97(0x16c)+_0xebc98c),stopBot(_0xebc98c));config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x5efc97(0x168),JSON[_0x5efc97(0x2d8)](config));}function toggleStatus(_0x7ce0b2){const _0x407653=_0x5695c8;let _0x248012=dbConfig[_0x407653(0x12f)](_0x407653(0x168))[_0x407653(0x1fc)]({'botID':_0x7ce0b2})[_0x407653(0x15f)](),_0x4682d0;if(_0x248012['status']==='enabled')_0x4682d0='disabled';else{if(_0x248012[_0x407653(0x25e)]===_0x407653(0x1de))_0x4682d0='new-disabled';else{if(_0x248012[_0x407653(0x25e)]===_0x407653(0xe3))_0x4682d0='new';else{if(_0x248012[_0x407653(0x25e)]===_0x407653(0x101))_0x4682d0=_0x407653(0x198);}}}return _0x4682d0;}function updateStatus(_0x31cc64,_0x1498a4){const _0x2a7809=_0x5695c8;dbConfig[_0x2a7809(0x12f)](_0x2a7809(0x168))[_0x2a7809(0x1fc)]({'botID':_0x31cc64})[_0x2a7809(0x13f)]({'status':_0x1498a4})[_0x2a7809(0x24a)](),config=getConfiguration(),io['to'](_0x2a7809(0x119))[_0x2a7809(0x113)](_0x2a7809(0x168),config),broadcastToBots(_0x2a7809(0x168),JSON[_0x2a7809(0x2d8)](config));}function updateLive(_0xd9a1f6,_0x75ae11){const _0xbb0a3a=_0x5695c8;dbConfig[_0xbb0a3a(0x12f)]('bots')[_0xbb0a3a(0x1fc)]({'botID':_0xd9a1f6})['assign']({'live':_0x75ae11})['write'](),config=getConfiguration(),io['to'](_0xbb0a3a(0x119))[_0xbb0a3a(0x113)](_0xbb0a3a(0x168),config),broadcastToBots(_0xbb0a3a(0x168),JSON[_0xbb0a3a(0x2d8)](config));}function updateBotName(_0x4de11e,_0x3b94d1){const _0x31bb75=_0x5695c8;dbConfig[_0x31bb75(0x12f)](_0x31bb75(0x168))[_0x31bb75(0x1fc)]({'botID':_0x4de11e})[_0x31bb75(0x13f)]({'botname':_0x3b94d1})['write'](),config=getConfiguration(),io['to'](_0x31bb75(0x119))[_0x31bb75(0x113)]('bots',config),broadcastToBots(_0x31bb75(0x168),JSON[_0x31bb75(0x2d8)](config));}function updateBotManager(){const _0x17b66a=_0x5695c8;config=getConfiguration(),io['to']('botmanager')[_0x17b66a(0x113)](_0x17b66a(0x168),config),broadcastToBots('bots',JSON[_0x17b66a(0x2d8)](config));}function toggleBotMode(_0x54b8d8){const _0x1e246c=_0x5695c8;if(pid[_0x54b8d8])pid[_0x54b8d8]['send']({'function':_0x1e246c(0x1cc),'args':null});else{const _0x1e8974=configpath+_0x1e246c(0x1ac)+_0x54b8d8+'-config.json',_0x499742=fs['readFileSync'](_0x1e8974),_0x3871df=JSON[_0x1e246c(0x21c)](_0x499742),_0x17e263=_0x3871df[_0x1e246c(0x255)][0x0][_0x1e246c(0xe1)];_0x3871df['bot'][0x0][_0x1e246c(0xe1)]=!_0x17e263;const _0x678098=JSON['stringify'](_0x3871df,null,0x2);fs[_0x1e246c(0x2a7)](_0x1e8974,_0x678098),config=getConfiguration(),io['to'](_0x1e246c(0x119))[_0x1e246c(0x113)](_0x1e246c(0x168),config),broadcastToBots('bots',JSON[_0x1e246c(0x2d8)](config));}}function validateTelegram(_0x3988a2){const _0x373cb3=_0x5695c8;if(_0x3988a2[_0x373cb3(0x227)][_0x373cb3(0x24b)]!=settings['telegramUsername']&&'@'+_0x3988a2[_0x373cb3(0x227)]['username']!=settings[_0x373cb3(0x2ba)]||_0x3988a2[_0x373cb3(0x244)]['id']!=settings[_0x373cb3(0x2b9)])return sendTelegram(_0x3988a2[_0x373cb3(0x244)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x373cb3(0x1a3)}),![];return!![];}async function initTelegram(){const _0x28c76a=_0x5695c8;if(tgBot)tgBot[_0x28c76a(0xda)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x28c76a(0x220)]);let _0x26bb65=_0x28c76a(0x23c);_0x26bb65+='\x0a',_0x26bb65+='/enable\x20-\x20enable\x20notifications\x0a',_0x26bb65+=_0x28c76a(0x2be),_0x26bb65+=_0x28c76a(0x217),_0x26bb65+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x26bb65+='/on\x20-\x20start\x20bot(s)\x0a',_0x26bb65+=_0x28c76a(0x270),_0x26bb65+=_0x28c76a(0x193),_0x26bb65+=_0x28c76a(0x1e7),_0x26bb65+=_0x28c76a(0x29c),_0x26bb65+=_0x28c76a(0x17f),_0x26bb65+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x26bb65+=_0x28c76a(0x121),_0x26bb65+=_0x28c76a(0x2c9),_0x26bb65+=_0x28c76a(0x1f3);let _0x516ad9=_0x28c76a(0x236);_0x516ad9+='\x0a',_0x516ad9+=_0x26bb65,tgBot[_0x28c76a(0x1da)]((_0x51d333,_0x5c9c07)=>{const _0x46dbdd=_0x28c76a;logger[_0x46dbdd(0x175)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x46dbdd(0xf3)](_0x46dbdd(0x1ed),_0x51d333);}),tgBot['use'](async(_0x59db03,_0x4a4b2e)=>{const _0x2ad07a=_0x28c76a;if(!(!settings['telegramChatId']&&_0x59db03[_0x2ad07a(0x2b4)][_0x2ad07a(0x24e)][_0x2ad07a(0x22c)]==_0x2ad07a(0x138))){if(!validateTelegram(_0x59db03))return;}_0x4a4b2e();}),tgBot['command'](_0x28c76a(0x109),async _0x4ca6d0=>{const _0x2c9213=_0x28c76a;if(!settings[_0x2c9213(0x2b9)])updateSetting('telegramChatId',_0x4ca6d0[_0x2c9213(0x244)]['id']);updateSetting(_0x2c9213(0x2d7),!![]);if(!validateTelegram(_0x4ca6d0))return;await sendTelegram(_0x4ca6d0[_0x2c9213(0x244)]['id'],_0x516ad9);}),tgBot['command'](_0x28c76a(0x1d5),async _0x372fe8=>{const _0x514536=_0x28c76a;updateSetting(_0x514536(0x2d7),!![]),await sendTelegram(_0x372fe8[_0x514536(0x244)]['id'],_0x514536(0x145));}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x127),async _0xff7200=>{const _0x545670=_0x28c76a;await sendTelegram(_0xff7200[_0x545670(0x244)]['id'],'Notifications\x20disabled'),updateSetting(_0x545670(0x2d7),![]);}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x2c7),async _0x3e4449=>{const _0x6f62d7=_0x28c76a,_0x5c116a=Markup[_0x6f62d7(0x297)]([Markup[_0x6f62d7(0x1b4)][_0x6f62d7(0x298)](_0x6f62d7(0x180),_0x6f62d7(0x216)),Markup[_0x6f62d7(0x1b4)][_0x6f62d7(0x298)](_0x6f62d7(0x214),_0x6f62d7(0x182)),Markup[_0x6f62d7(0x1b4)][_0x6f62d7(0x298)](_0x6f62d7(0x2d3),_0x6f62d7(0x2a2))]);_0x3e4449[_0x6f62d7(0x207)](_0x6f62d7(0x208),_0x5c116a);}),tgBot[_0x28c76a(0x1e8)](_0x28c76a(0x216),async _0x7ec381=>{const _0x215f19=_0x28c76a;_0x7ec381[_0x215f19(0x219)](),updateSetting(_0x215f19(0x1f6),_0x215f19(0x21e)),updateSetting(_0x215f19(0x2d7),!![]),await sendTelegram(_0x7ec381['chat']['id'],_0x215f19(0x147));}),tgBot[_0x28c76a(0x1e8)](_0x28c76a(0x182),async _0x5e1c97=>{const _0x182839=_0x28c76a;_0x5e1c97[_0x182839(0x219)](),updateSetting(_0x182839(0x1f6),_0x182839(0x1fa)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x5e1c97[_0x182839(0x244)]['id'],_0x182839(0x2c5));}),tgBot[_0x28c76a(0x1e8)]('config_all',async _0x5b488f=>{const _0x20d4ae=_0x28c76a;_0x5b488f[_0x20d4ae(0x219)](),updateSetting('telegramEvents',_0x20d4ae(0x118)),updateSetting(_0x20d4ae(0x2d7),!![]),await sendTelegram(_0x5b488f[_0x20d4ae(0x244)]['id'],_0x20d4ae(0x243));}),tgBot['command']('status',async _0x15ca0f=>{const _0xe91162=_0x28c76a,_0x4459f7=getBotsWithMode();let _0x4a79b2=_0xe91162(0x23d);config[_0xe91162(0x294)](_0x414056=>{const _0xdcdc57=_0xe91162,_0x5735e6=_0x4459f7[_0xdcdc57(0x1fc)](_0x8110a6=>_0x8110a6[_0xdcdc57(0x293)]==_0x414056[_0xdcdc57(0x293)])[_0xdcdc57(0x24f)];_0x4a79b2+='Bot\x20'+_0x414056['botID']+':\x20'+_0x414056[_0xdcdc57(0x25e)]+_0xdcdc57(0x103)+_0x5735e6+_0xdcdc57(0x103)+_0x414056[_0xdcdc57(0x19a)]+'\x0a';}),_0x4a79b2+='\x0a',_0x4a79b2+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x4a79b2+=!settings[_0xe91162(0x2d7)]?_0xe91162(0x2c0):_0xe91162(0x231),_0x4a79b2+=settings['telegramEnabled']?settings[_0xe91162(0x1f6)]==_0xe91162(0x118)?_0xe91162(0x131):_0xe91162(0x21b)+settings[_0xe91162(0x1f6)]+_0xe91162(0x16a):'',await sendTelegram(_0x15ca0f['chat']['id'],_0x4a79b2,{'parse_mode':_0xe91162(0x1a3)});}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x23a),async _0x16ea77=>{const _0x1715dc=_0x28c76a,_0x2e21e8=getEnabledBots();if(_0x2e21e8['length']==0x0)await sendTelegram(_0x16ea77[_0x1715dc(0x244)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2e21e8['length']>0x1)_0x2e21e8['push']({'botID':_0x1715dc(0x118)});let _0x5d3d2c=[],_0x4b0eda=[];const _0x3ea95d=_0x2e21e8['length']%0x4==0x0||_0x2e21e8[_0x1715dc(0x1e2)]%0x4==0x3||_0x2e21e8[_0x1715dc(0x1e2)]%0x3==0x1?0x4:0x3;let _0x341f89=0x0;_0x2e21e8[_0x1715dc(0x294)]((_0x3237d5,_0xf2f4f4)=>{const _0x181ec2=_0x1715dc;if(_0xf2f4f4%_0x3ea95d==0x0)_0x4b0eda=[];_0x4b0eda[_0x181ec2(0x29e)](Markup[_0x181ec2(0x1b4)]['callback'](_0x3237d5[_0x181ec2(0x293)]=='all'?_0x181ec2(0x10e):_0x181ec2(0x1d1)+_0x3237d5['botID'],'restart_'+_0x3237d5['botID'])),_0xf2f4f4%_0x3ea95d==0x0&&(_0x5d3d2c[_0x341f89]=_0x4b0eda,_0x341f89++);});const _0x3a2209=Markup['inlineKeyboard'](_0x5d3d2c);_0x16ea77[_0x1715dc(0x207)](_0x1715dc(0x189),_0x3a2209);}}),tgBot['action'](/restart_(.+)/,async _0xf4c30b=>{const _0x413744=_0x28c76a,_0x18ce1d=_0xf4c30b[_0x413744(0x2a6)][0x1];_0xf4c30b[_0x413744(0x219)](),_0x18ce1d==_0x413744(0x118)?config[_0x413744(0x294)](_0x2955be=>{restartBot(_0x2955be['botID']);}):restartBot(_0x18ce1d);}),tgBot[_0x28c76a(0x2b5)]('on',async _0x1baa2a=>{const _0x1fe086=_0x28c76a,_0x3abb48=getDisabledBots();if(_0x3abb48['length']==0x0)await sendTelegram(_0x1baa2a[_0x1fe086(0x244)]['id'],_0x1fe086(0x1cb));else{if(_0x3abb48[_0x1fe086(0x1e2)]>0x1)_0x3abb48['push']({'botID':_0x1fe086(0x118)});let _0x125757=[],_0x595a1d=[];const _0x4bf677=_0x3abb48[_0x1fe086(0x1e2)]%0x4==0x0||_0x3abb48[_0x1fe086(0x1e2)]%0x4==0x3||_0x3abb48['length']%0x3==0x1?0x4:0x3;let _0x286c67=0x0;_0x3abb48[_0x1fe086(0x294)]((_0xc5fc4d,_0xb00a1a)=>{const _0xcae3df=_0x1fe086;if(_0xb00a1a%_0x4bf677==0x0)_0x595a1d=[];_0x595a1d[_0xcae3df(0x29e)](Markup['button'][_0xcae3df(0x298)](_0xc5fc4d[_0xcae3df(0x293)]==_0xcae3df(0x118)?_0xcae3df(0x10e):_0xcae3df(0x1d1)+_0xc5fc4d[_0xcae3df(0x293)],'on_'+_0xc5fc4d[_0xcae3df(0x293)])),_0xb00a1a%_0x4bf677==0x0&&(_0x125757[_0x286c67]=_0x595a1d,_0x286c67++);});const _0xaa96de=Markup['inlineKeyboard'](_0x125757);_0x1baa2a['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0xaa96de);}}),tgBot[_0x28c76a(0x1e8)](/on_(.+)/,async _0x256871=>{const _0x48ee6f=_0x28c76a,_0x1d5e74=_0x256871[_0x48ee6f(0x2a6)][0x1];_0x256871[_0x48ee6f(0x219)]();if(_0x1d5e74=='all'){const _0x2b1f77=getDisabledBots();await sendTelegram(_0x256871[_0x48ee6f(0x244)]['id'],_0x48ee6f(0x142)),_0x2b1f77[_0x48ee6f(0x294)](_0x4339b9=>{const _0xb4881f=_0x48ee6f;if(_0x4339b9['botID']!=_0xb4881f(0x118))toggleBot(_0x4339b9[_0xb4881f(0x293)],toggleStatus(_0x4339b9['botID']),_0xb4881f(0x204));});}else await sendTelegram(_0x256871[_0x48ee6f(0x244)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1d5e74),toggleBot(_0x1d5e74,toggleStatus(_0x1d5e74),_0x48ee6f(0x204));}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x2b7),async _0x38395c=>{const _0x529584=_0x28c76a,_0x22bd2b=getEnabledBots();if(_0x22bd2b[_0x529584(0x1e2)]==0x0)await sendTelegram(_0x38395c[_0x529584(0x244)]['id'],_0x529584(0x20b));else{if(_0x22bd2b[_0x529584(0x1e2)]>0x1)_0x22bd2b[_0x529584(0x29e)]({'botID':_0x529584(0x118)});let _0x2fd6e8=[],_0x316d8d=[];const _0x38656a=_0x22bd2b[_0x529584(0x1e2)]%0x4==0x0||_0x22bd2b[_0x529584(0x1e2)]%0x4==0x3||_0x22bd2b['length']%0x3==0x1?0x4:0x3;let _0x37adb0=0x0;_0x22bd2b['forEach']((_0x2d4372,_0x1f54d9)=>{const _0x464207=_0x529584;if(_0x1f54d9%_0x38656a==0x0)_0x316d8d=[];_0x316d8d['push'](Markup[_0x464207(0x1b4)]['callback'](_0x2d4372['botID']==_0x464207(0x118)?_0x464207(0x10e):'Bot\x20'+_0x2d4372[_0x464207(0x293)],'off_'+_0x2d4372['botID'])),_0x1f54d9%_0x38656a==0x0&&(_0x2fd6e8[_0x37adb0]=_0x316d8d,_0x37adb0++);});const _0x5edeaa=Markup[_0x529584(0x297)](_0x2fd6e8);_0x38395c[_0x529584(0x207)](_0x529584(0x268),_0x5edeaa);}}),tgBot[_0x28c76a(0x1e8)](/off_(.+)/,async _0x547d08=>{const _0x3e2ff4=_0x28c76a,_0x275015=_0x547d08[_0x3e2ff4(0x2a6)][0x1];_0x547d08[_0x3e2ff4(0x219)]();if(_0x275015==_0x3e2ff4(0x118)){const _0x422f7d=getEnabledBots();await sendTelegram(_0x547d08[_0x3e2ff4(0x244)]['id'],_0x3e2ff4(0x17c)),_0x422f7d[_0x3e2ff4(0x294)](_0x19069f=>{const _0x452db2=_0x3e2ff4;if(_0x19069f[_0x452db2(0x293)]!=_0x452db2(0x118))toggleBot(_0x19069f['botID'],toggleStatus(_0x19069f['botID']),_0x452db2(0x204));});}else await sendTelegram(_0x547d08[_0x3e2ff4(0x244)]['id'],_0x3e2ff4(0x2cd)+_0x275015),toggleBot(_0x275015,toggleStatus(_0x275015),_0x3e2ff4(0x204));}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x2c2),async _0x1e6d77=>{const _0x57b8df=_0x28c76a,_0x40ac27=getEnabledBots();if(_0x40ac27[_0x57b8df(0x1e2)]==0x0)await sendTelegram(_0x1e6d77[_0x57b8df(0x244)]['id'],_0x57b8df(0x20b));else{if(_0x40ac27[_0x57b8df(0x1e2)]>0x1){let _0x18eed2=[],_0x487739=[];const _0xceed75=_0x40ac27[_0x57b8df(0x1e2)]%0x4==0x0||_0x40ac27[_0x57b8df(0x1e2)]%0x4==0x3||_0x40ac27['length']%0x3==0x1?0x4:0x3;let _0x3b6b0f=0x0;_0x40ac27[_0x57b8df(0x294)]((_0x447610,_0x3b1a11)=>{const _0x1ab037=_0x57b8df;if(_0x3b1a11%_0xceed75==0x0)_0x487739=[];_0x487739[_0x1ab037(0x29e)](Markup['button'][_0x1ab037(0x298)](_0x1ab037(0x1d1)+_0x447610[_0x1ab037(0x293)],'metrics_'+_0x447610['botID'])),_0x3b1a11%_0xceed75==0x0&&(_0x18eed2[_0x3b6b0f]=_0x487739,_0x3b6b0f++);});const _0x21ab82=Markup['inlineKeyboard'](_0x18eed2);_0x1e6d77[_0x57b8df(0x207)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x21ab82);}else{const _0x261373=_0x40ac27[0x0][_0x57b8df(0x293)];if(pid[_0x261373])pid[_0x261373][_0x57b8df(0x271)]({'function':_0x57b8df(0xdb),'args':null});}}}),tgBot[_0x28c76a(0x1e8)](/metrics_(.+)/,async _0x285633=>{const _0x50cd11=_0x28c76a,_0x282e35=_0x285633[_0x50cd11(0x2a6)][0x1];_0x285633[_0x50cd11(0x219)]();if(pid[_0x282e35])pid[_0x282e35]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0xee),async _0x5d6854=>{const _0x478321=_0x28c76a,_0x212bf4=getEnabledBots();if(_0x212bf4[_0x478321(0x1e2)]==0x0)await sendTelegram(_0x5d6854[_0x478321(0x244)]['id'],_0x478321(0x20b));else{if(_0x212bf4[_0x478321(0x1e2)]>0x1){let _0xc597d2=[],_0x25fe2f=[];const _0x58435f=_0x212bf4[_0x478321(0x1e2)]%0x4==0x0||_0x212bf4[_0x478321(0x1e2)]%0x4==0x3||_0x212bf4[_0x478321(0x1e2)]%0x3==0x1?0x4:0x3;let _0x147473=0x0;_0x212bf4[_0x478321(0x294)]((_0x282948,_0xe0fb30)=>{const _0x4f7ac4=_0x478321;if(_0xe0fb30%_0x58435f==0x0)_0x25fe2f=[];_0x25fe2f[_0x4f7ac4(0x29e)](Markup[_0x4f7ac4(0x1b4)][_0x4f7ac4(0x298)](_0x4f7ac4(0x1d1)+_0x282948['botID'],_0x4f7ac4(0x173)+_0x282948[_0x4f7ac4(0x293)])),_0xe0fb30%_0x58435f==0x0&&(_0xc597d2[_0x147473]=_0x25fe2f,_0x147473++);});const _0x5637ae=Markup[_0x478321(0x297)](_0xc597d2);_0x5d6854[_0x478321(0x207)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x5637ae);}else{const _0x883891=_0x212bf4[0x0][_0x478321(0x293)];if(pid[_0x883891])pid[_0x883891][_0x478321(0x271)]({'function':_0x478321(0x23e),'args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x59db24=>{const _0x4f4e78=_0x28c76a,_0x40576c=_0x59db24[_0x4f4e78(0x2a6)][0x1];_0x59db24[_0x4f4e78(0x219)]();if(pid[_0x40576c])pid[_0x40576c][_0x4f4e78(0x271)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x2b4),async _0xae1031=>{const _0x34f687=_0x28c76a;await getMessages();if(!updateAvailable)await sendTelegram(_0xae1031[_0x34f687(0x244)]['id'],_0x34f687(0x212));else{if(!validInstallation)await sendTelegram(_0xae1031['chat']['id'],_0x34f687(0x238));else{const _0x376b03=Markup['inlineKeyboard']([Markup['button'][_0x34f687(0x298)](_0x34f687(0x107),'update_yes'),Markup['button']['callback']('No',_0x34f687(0x26c))]);_0xae1031['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x376b03);}}}),tgBot['action'](/update_(.+)/,async _0x314309=>{const _0x51a657=_0x28c76a,_0x1f089b=_0x314309['match'][0x1];_0x314309[_0x51a657(0x219)](),_0x1f089b==_0x51a657(0x1bd)&&(await sendTelegram(_0x314309[_0x51a657(0x244)]['id'],_0x51a657(0x28a)),updateBB(_0x51a657(0x2b4))),_0x1f089b=='no'&&await sendTelegram(_0x314309[_0x51a657(0x244)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later');}),tgBot[_0x28c76a(0x2b5)]('reinstall',async _0x2661b9=>{const _0x44f2ea=_0x28c76a;if(!validInstallation)await sendTelegram(_0x2661b9[_0x44f2ea(0x244)]['id'],_0x44f2ea(0x17d));else{const _0x154623=Markup[_0x44f2ea(0x297)]([Markup[_0x44f2ea(0x1b4)][_0x44f2ea(0x298)](_0x44f2ea(0x107),'reinstall_yes'),Markup[_0x44f2ea(0x1b4)]['callback']('No',_0x44f2ea(0x1f0))]);_0x2661b9['reply'](_0x44f2ea(0x164),_0x154623);}}),tgBot['action'](/reinstall_(.+)/,async _0x6236d6=>{const _0x144a4e=_0x28c76a,_0x498065=_0x6236d6['match'][0x1];_0x6236d6['editMessageReplyMarkup'](),_0x498065=='yes'&&(await sendTelegram(_0x6236d6[_0x144a4e(0x244)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x144a4e(0x1ad))),_0x498065=='no'&&await sendTelegram(_0x6236d6[_0x144a4e(0x244)]['id'],_0x144a4e(0x2c6));}),tgBot['command'](_0x28c76a(0x2cc),async _0x684945=>{const _0x1408e1=_0x28c76a,_0x5dfb08=getBotsWithMode();if(_0x5dfb08['length']==0x0)await sendTelegram(_0x684945[_0x1408e1(0x244)]['id'],_0x1408e1(0x20b));else{let _0x53df4d=[],_0x3d6672=[];const _0xb11506=0x2;let _0x50e71c=0x0;_0x5dfb08['forEach']((_0x12d5eb,_0x19d059)=>{const _0x1dbbd4=_0x1408e1;if(_0x19d059%_0xb11506==0x0)_0x3d6672=[];_0x3d6672['push'](Markup[_0x1dbbd4(0x1b4)]['callback'](_0x1dbbd4(0x1d1)+_0x12d5eb['botID']+'\x20('+_0x12d5eb['mode']+')',_0x1dbbd4(0x28f)+_0x12d5eb[_0x1dbbd4(0x293)])),_0x19d059%_0xb11506==0x0&&(_0x53df4d[_0x50e71c]=_0x3d6672,_0x50e71c++);});const _0x4afabd=Markup[_0x1408e1(0x297)](_0x53df4d);_0x684945[_0x1408e1(0x207)](_0x1408e1(0x2cb),_0x4afabd);}}),tgBot['action'](/toggle_(.+)/,async _0x2b39c3=>{const _0x2d536e=_0x28c76a,_0x25a6d3=_0x2b39c3[_0x2d536e(0x2a6)][0x1];_0x2b39c3[_0x2d536e(0x219)]();const _0x5b95b0=getBotsWithMode(),_0x31c3e4=_0x5b95b0[_0x2d536e(0x1fc)](_0x1099c1=>_0x1099c1[_0x2d536e(0x293)]==_0x25a6d3),_0x18f120=_0x31c3e4[_0x2d536e(0x24f)]==_0x2d536e(0x115)?_0x2d536e(0x2b6):_0x2d536e(0x115);await sendTelegram(_0x2b39c3['chat']['id'],_0x2d536e(0x1d6)+_0x25a6d3+_0x2d536e(0x210)+_0x18f120+_0x2d536e(0x14c)),toggleBotMode(_0x25a6d3);}),tgBot[_0x28c76a(0x2b5)](_0x28c76a(0x1c6),async _0x9cc437=>{const _0x2a7be3=_0x28c76a;let _0x2accc4='';config[_0x2a7be3(0x294)](_0x246e73=>{const _0x5a6aac=_0x2a7be3;_0x2accc4+=_0x5a6aac(0x1d1)+_0x246e73['botID']+':\x20'+_0x246e73['botname']+'\x0a';}),await sendTelegram(_0x9cc437['chat']['id'],_0x2accc4,{'parse_mode':_0x2a7be3(0x1a3)});}),tgBot['command']('help',async _0x3952ee=>{const _0x2f0998=_0x28c76a;await sendTelegram(_0x3952ee[_0x2f0998(0x244)]['id'],_0x26bb65);}),process['once'](_0x28c76a(0x157),()=>tgBot[_0x28c76a(0xda)](_0x28c76a(0x157))),process[_0x28c76a(0x254)](_0x28c76a(0x28d),()=>tgBot['stop']('SIGTERM')),tgBot[_0x28c76a(0x1c4)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x4de81e,_0x5b42ec,_0x54f320){const _0x5326d3=_0x5695c8;try{await tgBot[_0x5326d3(0x1b8)][_0x5326d3(0x19e)](_0x4de81e,_0x5b42ec,_0x54f320);}catch(_0xb2afee){console[_0x5326d3(0x141)](_0x5326d3(0x1be),_0xb2afee);}}async function sendTelegramBot(_0x2116ee,_0x3a78dd){const _0x2e041d=_0x5695c8;if(settings[_0x2e041d(0x2d7)]){if(settings[_0x2e041d(0x1f6)]==_0x2e041d(0x118)||(_0x3a78dd[_0x2e041d(0x26d)]==_0x2e041d(0xde)||_0x3a78dd[_0x2e041d(0x26d)]==_0x2e041d(0x184)||_0x3a78dd['type']==_0x2e041d(0x116))&&settings[_0x2e041d(0x1f6)]=='alerts'||_0x3a78dd[_0x2e041d(0x26d)]=='order'&&settings[_0x2e041d(0x1f6)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x3a78dd[_0x2e041d(0x1dd)])await sendTelegram(settings[_0x2e041d(0x2b9)],_0x3a78dd[_0x2e041d(0x155)]+'\x20>\x20'+_0x3a78dd['event']);else await sendTelegram(settings[_0x2e041d(0x2b9)],_0x2e041d(0x1d1)+_0x2116ee+'\x20>\x20'+_0x3a78dd[_0x2e041d(0x20d)]);}}}}async function sendTelegramMsg(_0x47334f,_0x539454='HTML'){const _0x39a9af=_0x5695c8;return settings[_0x39a9af(0x2d7)]&&tgBot&&settings[_0x39a9af(0x2b9)]?(await sendTelegram(settings[_0x39a9af(0x2b9)],_0x47334f,{'parse_mode':_0x539454}),!![]):![];}function getDeviceWithIp(_0x27724b){const _0x170186=_0x5695c8;return devices[_0x170186(0x1fc)](_0x2a9581=>_0x2a9581['ip']===_0x27724b);}async function temporaryAccess2FA(_0x39347e,_0x3e830e){const _0xf05204=_0x5695c8;let _0x953d7c=new Date(),_0x554d8f=![];if(lastIpApproval){if(_0x953d7c-lastIpApproval<0x1388)_0x554d8f=!![];}lastIpApproval=new Date();if(_0x554d8f)return;if(tgBot&&settings[_0xf05204(0x2b9)]){const _0x105e60=uuidRandom();tmpStorage[_0x105e60]={'uuid':_0x39347e,'externalip':_0x3e830e};const _0x43376a=Markup[_0xf05204(0x297)]([Markup['button']['callback'](_0xf05204(0x252),_0xf05204(0x2b1)+_0x105e60),Markup['button']['callback'](_0xf05204(0x292),'tempaccess_15_'+_0x105e60),Markup[_0xf05204(0x1b4)][_0xf05204(0x298)](_0xf05204(0x2b8),'tempaccess_30_'+_0x105e60),Markup[_0xf05204(0x1b4)][_0xf05204(0x298)]('reject',_0xf05204(0x11b)+_0x105e60)]);await sendTelegram(settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x3e830e)[_0xf05204(0x1d2)]+'\x20?',_0x43376a),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x37d5db=>{const _0x26b48b=_0xf05204,_0xcd3fa7=_0x37d5db[_0x26b48b(0x2a6)][0x1],_0x4e3cf9=_0x37d5db[_0x26b48b(0x2a6)][0x2],{uuid:_0x3789e0,externalip:_0x52e7a0}=tmpStorage[_0x4e3cf9];delete tmpStorage[_0x4e3cf9],_0x37d5db[_0x26b48b(0x219)](),devices[_0x3789e0]['telegramIpApproval']={'clientip':_0x52e7a0,'timestamp':new Date()[_0x26b48b(0x278)](),'expiry':_0xcd3fa7},_0xcd3fa7!=_0x26b48b(0x11e)?(await sendTelegram(_0x37d5db['chat']['id'],_0x26b48b(0x18b)+_0xcd3fa7+_0x26b48b(0x1dc),{'parse_mode':'HTML'}),io['to'](_0x3789e0)['emit'](_0x26b48b(0x25e),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x37d5db['chat']['id'],'Temporary\x20access\x20rejected'),io['to'](_0x3789e0)[_0x26b48b(0x113)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x1feb49,_0x5c0701){const _0x226b55=_0x5695c8;if(tgBot&&settings[_0x226b55(0x2b9)]){const _0x3ec016=uuidRandom();tmpStorage[_0x3ec016]={'uuid':_0x1feb49,'externalip':_0x5c0701};const _0x38fdba=Markup[_0x226b55(0x297)]([Markup[_0x226b55(0x1b4)][_0x226b55(0x298)](_0x226b55(0x152),_0x226b55(0x247)+loginExpiry+'_'+_0x3ec016),Markup[_0x226b55(0x1b4)][_0x226b55(0x298)](_0x226b55(0x11e),'login2fa_reject_'+_0x3ec016)]);await sendTelegram(settings['telegramChatId'],_0x226b55(0x20a)+normalizeIP(_0x5c0701)[_0x226b55(0x1d2)]+'\x20?',_0x38fdba),tgBot[_0x226b55(0x1e8)](/login2fa_(.+)_(.+)/,async _0x27d0a8=>{const _0x134a0f=_0x226b55,_0x3a74c1=_0x27d0a8[_0x134a0f(0x2a6)][0x1],_0x2c07df=_0x27d0a8['match'][0x2],{uuid:_0x412c75,externalip:_0xc35371}=tmpStorage[_0x2c07df];delete tmpStorage[_0x2c07df],_0x27d0a8['editMessageReplyMarkup'](),devices[_0x412c75][_0x134a0f(0xe6)]={'clientip':_0xc35371,'timestamp':new Date()[_0x134a0f(0x278)](),'expiry':_0x3a74c1},_0x3a74c1!='reject'?(await sendTelegram(_0x27d0a8['chat']['id'],_0x134a0f(0x190),{'parse_mode':_0x134a0f(0x1a3)}),io['to'](_0x412c75)[_0x134a0f(0x113)](_0x134a0f(0x25e),{'access':{'allow':![],'reason':_0x134a0f(0x18e),'token':null}})):(await sendTelegram(_0x27d0a8[_0x134a0f(0x244)]['id'],_0x134a0f(0x181)),io['to'](_0x412c75)['emit']('status',{'access':{'allow':![],'reason':_0x134a0f(0x295),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x52e2f4=_0x5695c8;return dbConfig[_0x52e2f4(0x12f)](_0x52e2f4(0x168))[_0x52e2f4(0x253)](_0x52e2f4(0x293))[_0x52e2f4(0x19b)]({'status':'enabled'})[_0x52e2f4(0x15f)]()||[];}function getDisabledBots(){const _0x3da31b=_0x5695c8;return dbConfig[_0x3da31b(0x12f)](_0x3da31b(0x168))['sortBy'](_0x3da31b(0x293))['filter']({'status':_0x3da31b(0x101)})['value']()||[];}function getBotAttributes(_0x2378e8){const _0x28ce75=_0x5695c8;let _0x117adc={};const _0x2e05eb=configpath+_0x28ce75(0x1ac)+_0x2378e8+_0x28ce75(0x2ce),_0x5f4261=fs['existsSync'](_0x2e05eb);if(_0x5f4261){const _0x3a4c4a=fs[_0x28ce75(0x1b5)](_0x2e05eb);try{const _0x557128=JSON['parse'](_0x3a4c4a),_0x5317f4=_0x557128?_0x557128[_0x28ce75(0x255)][0x0]['headless']:![];_0x117adc[_0x28ce75(0x24f)]=_0x5317f4?_0x28ce75(0x115):_0x28ce75(0x2b6),_0x117adc['botname']=_0x557128?_0x557128[_0x28ce75(0x255)][0x0][_0x28ce75(0x155)]:'Bot\x20'+_0x2378e8;}catch(_0x2e10a8){_0x117adc[_0x28ce75(0x24f)]='manual',_0x117adc[_0x28ce75(0x155)]=_0x28ce75(0x1d1)+_0x2378e8;}}else _0x117adc[_0x28ce75(0x24f)]=_0x28ce75(0x2b6),_0x117adc[_0x28ce75(0x155)]=_0x28ce75(0x1d1)+_0x2378e8;return _0x117adc;}function getBotsWithMode(){const _0x340050=_0x5695c8,_0x47dcfb=dbConfig['get'](_0x340050(0x168))[_0x340050(0x253)](_0x340050(0x293))['value']()||[];return _0x47dcfb[_0x340050(0x294)](_0x317e07=>{const _0x5d3da4=_0x340050;let _0x3a1ecc=getBotAttributes(_0x317e07[_0x5d3da4(0x293)]);_0x317e07[_0x5d3da4(0x24f)]=_0x3a1ecc[_0x5d3da4(0x24f)];}),_0x47dcfb;}function getBotExchanges(){const _0x2b4b88=_0x5695c8;let _0x55d668=[];const _0x9c8b9f=dbConfig[_0x2b4b88(0x12f)](_0x2b4b88(0x168))[_0x2b4b88(0x253)](_0x2b4b88(0x293))[_0x2b4b88(0x15f)]()||[];_0x9c8b9f[_0x2b4b88(0x294)](_0xe24315=>{const _0x279654=_0x2b4b88;if(_0xe24315[_0x279654(0x25e)]=='enabled'){const _0x1abc84=configpath+_0x279654(0x1ac)+_0xe24315[_0x279654(0x293)]+_0x279654(0x2ce),_0x2cb93f=fs[_0x279654(0x154)](_0x1abc84);let _0x13a302;if(_0x2cb93f){const _0x57d31e=fs['readFileSync'](_0x1abc84);try{const _0x41fcc5=JSON[_0x279654(0x21c)](_0x57d31e);_0x13a302=_0x41fcc5?_0x41fcc5[_0x279654(0x255)][0x0][_0x279654(0x288)]:null;}catch(_0x3b1a3e){}}if(_0x13a302)_0x55d668[_0x279654(0x29e)](_0x13a302);}});const _0x30a989=[...new Set(_0x55d668)][_0x2b4b88(0x2d1)]();return _0x30a989;}async function initUser(){const _0x4e98d5=_0x5695c8;if(!settings[_0x4e98d5(0x27e)]){const _0x489a28=uuidRandom();mixpanel[_0x4e98d5(0xec)](_0x489a28),updateSetting(_0x4e98d5(0x27e),_0x489a28);}}async function initSecure(){const _0x36232e=_0x5695c8;let _0x1a7dce=getSecure();if(!_0x1a7dce[_0x36232e(0x144)](_0x36232e(0x1c2))){let _0x53c561=await generateKeys();_0x1a7dce['publicKey']=_0x53c561[_0x36232e(0x1c7)],_0x1a7dce[_0x36232e(0x1a8)]=_0x53c561[_0x36232e(0x1a8)],_0x1a7dce[_0x36232e(0x1c2)]=crypto[_0x36232e(0x194)](0x20)[_0x36232e(0x256)](_0x36232e(0x289));;storeSecure(_0x1a7dce);}}function getSettings(){const _0x8daad2=_0x5695c8;return dbSettings[_0x8daad2(0x12f)]('settings')['value']()||{};}function getSecure(){const _0x3bb28e=_0x5695c8;return dbSecure[_0x3bb28e(0x12f)](_0x3bb28e(0x2bf))[_0x3bb28e(0x15f)]()||{};}function getBlacklist(){const _0x3c77f9=_0x5695c8;return dbSecure[_0x3c77f9(0x12f)](_0x3c77f9(0x11a))[_0x3c77f9(0x15f)]()||[];}function broadcastToBots(_0x3b370d,_0x1cd424){const _0x55e2bc=_0x5695c8;config[_0x55e2bc(0x294)](_0x3d251e=>{const _0x4a01d9=_0x55e2bc;if(_0x3d251e[_0x4a01d9(0x25e)]==_0x4a01d9(0x198)&&_0x3d251e[_0x4a01d9(0x19a)]=='running'||_0x3d251e[_0x4a01d9(0x25e)]==_0x4a01d9(0x1de)&&_0x3d251e['live']==_0x4a01d9(0x27a)){if(pid[_0x3d251e[_0x4a01d9(0x293)]])pid[_0x3d251e[_0x4a01d9(0x293)]][_0x4a01d9(0x271)]({[_0x3b370d]:_0x1cd424});}});}function storeSettings(_0x2d652c,_0x1b3789=![]){const _0x140836=_0x5695c8;_0x2d652c={...settings,..._0x2d652c};if(_0x1b3789&&_0x2d652c['bbPassword']!=_0x140836(0x133)&&_0x2d652c['bbPassword']!=_0x140836(0x2a9)&&_0x2d652c[_0x140836(0x241)]!=''){const _0x502187=crypt[_0x140836(0x230)](secure[_0x140836(0x1a8)],_0x2d652c[_0x140836(0x241)])[_0x140836(0x24e)]['split']('@')[0x0],_0x356d82=bcrypt['hashSync'](_0x502187,saltRounds);_0x2d652c={..._0x2d652c,'bbPassword':_0x356d82};}if(_0x1b3789&&_0x2d652c[_0x140836(0x220)]!=_0x140836(0x133)&&_0x2d652c[_0x140836(0x220)]!=_0x140836(0x2a9)&&_0x2d652c[_0x140836(0x220)]!=''){const _0x402c04=crypt[_0x140836(0x230)](secure['privateKey'],_0x2d652c[_0x140836(0x220)])[_0x140836(0x24e)][_0x140836(0x1ff)]('@')[0x0];_0x2d652c={..._0x2d652c,'telegramToken':_0x402c04};}const _0x1acd32=_0x2d652c[_0x140836(0x220)]!=_0x140836(0x133)&&_0x2d652c[_0x140836(0x220)]!=settings['telegramToken']||_0x2d652c[_0x140836(0x2ba)]!=settings[_0x140836(0x2ba)],_0x92dd0d=_0x2d652c[_0x140836(0x220)]==''||_0x2d652c['telegramUsername']=='';_0x1acd32&&(_0x2d652c[_0x140836(0x2b9)]=null,_0x2d652c[_0x140836(0x1f6)]=_0x140836(0x118));for(const [_0x2b3eb6,_0x3b7961]of Object[_0x140836(0x1ef)](_0x2d652c)){if(_0x2b3eb6==_0x140836(0x220)&&_0x3b7961==_0x140836(0x133)){_0x2d652c[_0x140836(0x220)]=settings[_0x140836(0x220)];continue;};if(_0x2b3eb6==_0x140836(0x241)&&_0x3b7961==_0x140836(0x133)){_0x2d652c[_0x140836(0x241)]=settings['bbPassword'];continue;};dbSettings[_0x140836(0x178)](_0x140836(0x224)+_0x2b3eb6,_0x3b7961)['write']();}settings=_0x2d652c,io['to'](_0x140836(0x119))['emit']('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x140836(0x1a9)]),broadcastToBots(_0x140836(0x114),settings[_0x140836(0x114)]);if(_0x1acd32&&!_0x92dd0d)initTelegram();if(_0x1acd32&&_0x92dd0d)disableTelegram();getAllClients()[_0x140836(0x294)](_0x52b27e=>{getSocket(_0x52b27e['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x40b399,_0x54f3a5){const _0xce7205=_0x5695c8;dbSettings[_0xce7205(0x178)](_0xce7205(0x224)+_0x40b399,_0x54f3a5)[_0xce7205(0x24a)](),settings=getSettings(),io['to'](_0xce7205(0x119))[_0xce7205(0x113)](_0xce7205(0x235),cleanSettings());}function storeSecure(_0x577919){const _0x222a88=_0x5695c8;dbSecure['get'](_0x222a88(0x2bf))['push'](_0x577919)[_0x222a88(0x24a)](),secure=_0x577919;}function addBlacklist(_0x151d0a){const _0x35d2e8=_0x5695c8;cleanBlacklist();let _0x2dcfd5;devices[_0x151d0a][_0x35d2e8(0x20e)]?_0x2dcfd5=Math[_0x35d2e8(0x28c)](devices[_0x151d0a][_0x35d2e8(0x20e)][_0x35d2e8(0x186)],loginExpiry):_0x2dcfd5=loginExpiry,dbSecure[_0x35d2e8(0x12f)](_0x35d2e8(0x11a))[_0x35d2e8(0x29e)]({'expiry':new Date()['getTime']()+_0x2dcfd5*0x3c*0x3e8,'token':devices[_0x151d0a][_0x35d2e8(0x1fe)]['token']})[_0x35d2e8(0x24a)](),blacklist=dbSecure['get']('blacklist')[_0x35d2e8(0x15f)]();}function cleanBlacklist(){const _0x574fa5=_0x5695c8;let _0x5181c0=dbSecure[_0x574fa5(0x12f)](_0x574fa5(0x11a))[_0x574fa5(0xfd)]()[_0x574fa5(0x15f)](),_0x4657b2=new Date()['getTime']();_0x5181c0[_0x574fa5(0x294)](_0x5bf8ad=>{const _0x4f39ac=_0x574fa5;_0x5bf8ad[_0x4f39ac(0x186)]<_0x4657b2&&dbSecure[_0x4f39ac(0x12f)](_0x4f39ac(0x11a))[_0x4f39ac(0x106)]({'expiry':_0x5bf8ad[_0x4f39ac(0x186)]})['write']();});}function initStates(){const _0x274071=_0x5695c8;let _0x106d9b=getConfiguration();_0x106d9b[_0x274071(0x294)](_0x5c24e8=>{const _0x364e4c=_0x274071;_0x5c24e8[_0x364e4c(0x19a)]='stopped';}),storeConfiguration(_0x106d9b);}function onKeys(){const _0x29195e=new RSA();return new Promise(_0x2b9847=>{const _0x2985b4=_0x4411;_0x29195e['generateKeyPairAsync']()[_0x2985b4(0x11f)](_0x50162a=>{_0x2b9847(_0x50162a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1b8e0d=_0x5695c8;let _0x1314e1=getSettings(),_0x58c8c3=![];!_0x1314e1['hasOwnProperty'](_0x1b8e0d(0x15a))&&(_0x1314e1['lastmsgtelegram']=0x0,_0x58c8c3=!![]);!_0x1314e1[_0x1b8e0d(0x144)]('lastmsgemitted')&&(_0x1314e1[_0x1b8e0d(0xeb)]=0x0,_0x58c8c3=!![]);!_0x1314e1[_0x1b8e0d(0x144)](_0x1b8e0d(0x15b))&&(_0x1314e1[_0x1b8e0d(0x15b)]='0.0.0',_0x58c8c3=!![]);!_0x1314e1['hasOwnProperty']('onepagemode')&&(_0x1314e1[_0x1b8e0d(0x114)]=![],_0x58c8c3=!![]);if(_0x58c8c3)storeSettings(_0x1314e1);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x1b8e0d(0x294)](_0x59b128=>{const _0xaacd07=_0x1b8e0d;if(!_0x59b128[_0xaacd07(0xdd)]()){if(!_0x59b128[_0xaacd07(0x166)][_0xaacd07(0x2c4)](_0xaacd07(0x185)))fs[_0xaacd07(0x2c8)](configbackuppath+_0x59b128[_0xaacd07(0x166)]);}else fs[_0xaacd07(0x171)](configbackuppath+_0x59b128['name'],{'recursive':!![]});});}catch(_0x27ca90){logger['debug'](_0x1b8e0d(0x2ac),_0x27ca90);}}function storeConfiguration(_0x432341){const _0x2fa74f=_0x5695c8;dbConfig[_0x2fa74f(0x12f)](_0x2fa74f(0x168))['remove']()[_0x2fa74f(0x24a)](),dbConfig[_0x2fa74f(0x12f)](_0x2fa74f(0x168))[_0x2fa74f(0x29e)](..._0x432341)['write'](),config=_0x432341;}async function resetPassword(){const _0x3d32c2=_0x5695c8;if(tgBot&&settings[_0x3d32c2(0x2b9)]){const _0x3f97b9=Markup['inlineKeyboard']([Markup[_0x3d32c2(0x1b4)][_0x3d32c2(0x298)]('yes',_0x3d32c2(0x199)),Markup[_0x3d32c2(0x1b4)][_0x3d32c2(0x298)]('no',_0x3d32c2(0x136))]);await sendTelegram(settings[_0x3d32c2(0x2b9)],_0x3d32c2(0x209),_0x3f97b9),tgBot['action'](/resetpw_(.+)/,async _0x12a8f9=>{const _0x7876ea=_0x3d32c2,_0x4bfe81=_0x12a8f9[_0x7876ea(0x2a6)][0x1];_0x12a8f9['editMessageReplyMarkup']();if(_0x4bfe81!='no'){const _0x24efc4=0xf,_0x3cf269=_0x7876ea(0x1fd),_0x2434a6=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x24efc4)))['map'](_0x1a7814=>_0x3cf269[_0x1a7814%_0x3cf269[_0x7876ea(0x1e2)]])[_0x7876ea(0x1d3)](''),_0x489405=bcrypt[_0x7876ea(0x1b9)](_0x2434a6,saltRounds);storeSettings({'bbPassword':_0x489405}),await sendTelegram(_0x12a8f9[_0x7876ea(0x244)]['id'],_0x7876ea(0x1cf)+_0x2434a6,{'parse_mode':_0x7876ea(0x1a3)});}else await sendTelegram(_0x12a8f9[_0x7876ea(0x244)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x33b363,_0x37be33){const _0x5d4013=_0x5695c8;io['to'](_0x5d4013(0x119))[_0x5d4013(0x113)]('notification',_0x5d4013(0x129),_0x5d4013(0x116));if(tgBot&&settings['telegramChatId']){const _0x5e8cf7=uuidRandom();tmpStorage[_0x5e8cf7]={'path':_0x33b363,'filename':_0x37be33};const _0x106e6d=Markup['inlineKeyboard']([Markup[_0x5d4013(0x1b4)][_0x5d4013(0x298)](_0x5d4013(0x1bd),_0x5d4013(0x2c1)+_0x5e8cf7),Markup[_0x5d4013(0x1b4)][_0x5d4013(0x298)]('no',_0x5d4013(0x128)+_0x5e8cf7)]);await sendTelegram(settings['telegramChatId'],_0x5d4013(0x1ce),_0x106e6d),tgBot[_0x5d4013(0x1e8)](/restore_(.+)_(.+)/,async _0x3ea748=>{const _0xe49be5=_0x5d4013,_0x2095af=_0x3ea748[_0xe49be5(0x2a6)][0x1],_0x370b7e=_0x3ea748[_0xe49be5(0x2a6)][0x2],{path:_0x14e725,filename:_0x159745}=tmpStorage[_0x370b7e];delete tmpStorage[_0x370b7e],_0x3ea748[_0xe49be5(0x219)](),_0x2095af==_0xe49be5(0x1bd)?(logger[_0xe49be5(0xf3)](_0xe49be5(0x19c)),await sendTelegram(_0x3ea748['chat']['id'],_0xe49be5(0x10d),{'parse_mode':'HTML'}),unzipFile(_0x14e725,_0x159745)):(logger[_0xe49be5(0xf3)](_0xe49be5(0xf4)),await sendTelegram(_0x3ea748['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x30f504=_0x5695c8,_0x4a5527=new Date();return _0x4a5527[_0x30f504(0x1a0)]()+'/'+(_0x4a5527[_0x30f504(0x1e3)]()+0x1)[_0x30f504(0x256)]()[_0x30f504(0x1a4)](0x2,'0')+'/'+_0x4a5527[_0x30f504(0x22b)]()[_0x30f504(0x256)]()[_0x30f504(0x1a4)](0x2,'0')+'\x20'+_0x4a5527[_0x30f504(0x1d9)]()[_0x30f504(0x256)]()[_0x30f504(0x1a4)](0x2,'0')+':'+_0x4a5527['getMinutes']()[_0x30f504(0x256)]()[_0x30f504(0x1a4)](0x2,'0')+':'+_0x4a5527[_0x30f504(0x232)]()[_0x30f504(0x256)]()[_0x30f504(0x1a4)](0x2,'0');}function getTimeStamp(){const _0x378ac1=_0x5695c8,_0x5a734f=shiftedTime();return _0x5a734f[_0x378ac1(0x1a0)]()+'/'+(_0x5a734f[_0x378ac1(0x1e3)]()+0x1)[_0x378ac1(0x256)]()[_0x378ac1(0x1a4)](0x2,'0')+'/'+_0x5a734f['getDate']()[_0x378ac1(0x256)]()[_0x378ac1(0x1a4)](0x2,'0')+'\x20'+_0x5a734f[_0x378ac1(0x1d9)]()[_0x378ac1(0x256)]()[_0x378ac1(0x1a4)](0x2,'0')+':'+_0x5a734f[_0x378ac1(0x25d)]()[_0x378ac1(0x256)]()[_0x378ac1(0x1a4)](0x2,'0')+':'+_0x5a734f['getSeconds']()[_0x378ac1(0x256)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x553c94=_0x5695c8,_0x5de0c1=shiftedTime();return _0x5de0c1[_0x553c94(0x1a0)]()+(_0x5de0c1['getMonth']()+0x1)[_0x553c94(0x256)]()[_0x553c94(0x1a4)](0x2,'0')+_0x5de0c1[_0x553c94(0x22b)]()[_0x553c94(0x256)]()[_0x553c94(0x1a4)](0x2,'0')+'-'+_0x5de0c1[_0x553c94(0x1d9)]()[_0x553c94(0x256)]()[_0x553c94(0x1a4)](0x2,'0')+_0x5de0c1[_0x553c94(0x25d)]()[_0x553c94(0x256)]()[_0x553c94(0x1a4)](0x2,'0')+_0x5de0c1[_0x553c94(0x232)]()[_0x553c94(0x256)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2890d6=_0x5695c8,_0x3ed6d3=new Date();let _0x3d337e=_0x3ed6d3;if(settings[_0x2890d6(0x1a9)]&&settings['timeshift']!==0x0)_0x3d337e=fns[_0x2890d6(0x150)](_0x3ed6d3,{'hours':settings['timeshift']});return _0x3d337e;}function startScheduler(){const _0x571c7f=_0x5695c8,_0x33014b=new Date()[_0x571c7f(0x1f7)](),_0x1996d6=shiftedTime()['getHours']();_0x1996d6==0x4&&backupConfigFiles();_0x1996d6==0x0&&rotateLogFiles();_0x33014b%0x6==0x0&&triggerAnalytics();_0x33014b%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x1cd70a){const _0x5cb8c3=_0x5695c8;logger[_0x5cb8c3(0xf3)]('Restore\x20backup\x20file\x20'+_0x1cd70a);const _0x22262d=getBotsWithMode();_0x22262d[_0x5cb8c3(0x1e2)]>0x0?confirmRestore(configbackuppath,_0x1cd70a):unzipFile(configbackuppath,_0x1cd70a);}async function getBackupFiles(_0x373901=null){const _0x7a9170=_0x5695c8;let _0xe402ba=[],_0x3c5665=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3c5665[_0x7a9170(0x2d1)]((_0x1cc405,_0x24b03d)=>_0x1cc405['name']<_0x24b03d['name']?0x1:_0x24b03d[_0x7a9170(0x166)]<_0x1cc405[_0x7a9170(0x166)]?-0x1:0x0),_0x3c5665[_0x7a9170(0x294)](_0x481ef4=>{const _0x56db4e=_0x7a9170;if(!_0x481ef4['isDirectory']()&&_0x481ef4[_0x56db4e(0x166)]['startsWith']('backup-full@')&&_0x481ef4['name'][_0x56db4e(0x111)](_0x56db4e(0x21d))){const _0x74f8a1=formatDate(fs[_0x56db4e(0x132)](configbackuppath+_0x481ef4['name'])[_0x56db4e(0x13d)]);_0xe402ba[_0x56db4e(0x29e)]({'name':_0x481ef4['name'],'mtime':_0x74f8a1});}});if(_0x373901)io['to'](_0x373901)[_0x7a9170(0x113)]('backup-files',_0xe402ba);else return _0xe402ba;}function _0x4411(_0x3b993b,_0x319d7c){const _0x12a4c2=_0x38ce();return _0x4411=function(_0x5de15c,_0x58383e){_0x5de15c=_0x5de15c-0xda;let _0x38ceb7=_0x12a4c2[_0x5de15c];return _0x38ceb7;},_0x4411(_0x3b993b,_0x319d7c);}async function backupConfigFiles(){const _0x35efb9=_0x5695c8;await zipFiles('backup-full');const _0x2ca3c9=getCleanTimeStamp();fs[_0x35efb9(0x242)](zippath+_0x35efb9(0x228),configbackuppath+(_0x35efb9(0x185)+_0x2ca3c9+_0x35efb9(0x21d)));let _0x394052=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x394052[_0x35efb9(0x2d1)]((_0x4b0983,_0x4fd560)=>_0x4b0983[_0x35efb9(0x166)]<_0x4fd560['name']?0x1:_0x4fd560['name']<_0x4b0983['name']?-0x1:0x0),_0x394052['length']>maxBackups&&fs[_0x35efb9(0x2c8)](configbackuppath+_0x394052[_0x394052[_0x35efb9(0x1e2)]-0x1][_0x35efb9(0x166)]);}function rotateLogFiles(){const _0x308e22=_0x5695c8,_0x124daa=fs[_0x308e22(0x132)](logspath+_0x308e22(0x13b)),_0x342909=_0x124daa['size']/0x400;if(_0x342909>0x64){let _0x165185=fs[_0x308e22(0x281)](logspath,{'withFileTypes':!![]});_0x165185[_0x308e22(0x2d1)]((_0x499fb2,_0x1a513d)=>_0x499fb2['name']<_0x1a513d[_0x308e22(0x166)]?0x1:_0x1a513d[_0x308e22(0x166)]<_0x499fb2['name']?-0x1:0x0),_0x165185[_0x308e22(0x294)](_0x10453f=>{const _0x212522=_0x308e22;if(_0x10453f[_0x212522(0x166)]==_0x212522(0x20f))fs[_0x212522(0x242)](logspath+_0x10453f[_0x212522(0x166)],logspath+'output-003.log');if(_0x10453f[_0x212522(0x166)]==_0x212522(0x1d0))fs[_0x212522(0x242)](logspath+_0x10453f[_0x212522(0x166)],logspath+_0x212522(0x20f));_0x10453f[_0x212522(0x166)]==_0x212522(0x13b)&&(fs['copyFileSync'](logspath+_0x10453f['name'],logspath+_0x212522(0x1d0)),fs[_0x212522(0x2a7)](logspath+_0x10453f[_0x212522(0x166)],''));});}}async function zipFiles(_0x581140){const _0x51c40e=_0x5695c8;let _0x192c38;if(_0x581140==_0x51c40e(0x134))_0x192c38=logspath;if(_0x581140==_0x51c40e(0x1f1))_0x192c38=configpath;if(_0x581140==_0x51c40e(0x23f))_0x192c38=configpath;let _0x448e34=fs['readdirSync'](_0x192c38,{'withFileTypes':!![]});const _0x54a85d=new require(_0x51c40e(0x1c5))();_0x448e34[_0x51c40e(0x294)](_0x2bee21=>{const _0x5ca780=_0x51c40e;if(!_0x2bee21['isDirectory']()){let _0x4648f6=fs[_0x5ca780(0x1b5)](_0x192c38+_0x2bee21[_0x5ca780(0x166)]);if(_0x581140==_0x5ca780(0x1f1)){const _0x1c842e=/^bot-[0-9]{3}-config.json$/,_0x44c14d=_0x1c842e['test'](_0x2bee21[_0x5ca780(0x166)]);if(_0x44c14d){const _0x14fde5=JSON[_0x5ca780(0x21c)](_0x4648f6);if(_0x14fde5[_0x5ca780(0x255)][0x0]){_0x14fde5[_0x5ca780(0x255)][0x0][_0x5ca780(0x205)]='***',_0x14fde5['bot'][0x0][_0x5ca780(0x130)]=_0x5ca780(0x2a9);if(_0x14fde5[_0x5ca780(0x255)][0x0][_0x5ca780(0x1ee)])_0x14fde5[_0x5ca780(0x255)][0x0][_0x5ca780(0x1ee)]=_0x5ca780(0x2a9);}_0x4648f6=JSON[_0x5ca780(0x2d8)](_0x14fde5,null,0x2);}if(_0x2bee21[_0x5ca780(0x166)]==_0x5ca780(0x1b7)){const _0x2723bd=JSON['parse'](_0x4648f6);if(_0x2723bd[_0x5ca780(0x235)][_0x5ca780(0x225)])_0x2723bd[_0x5ca780(0x235)][_0x5ca780(0x225)]=![];if(_0x2723bd[_0x5ca780(0x235)]['bbPassword'])_0x2723bd[_0x5ca780(0x235)][_0x5ca780(0x241)]=_0x5ca780(0x2a9);if(_0x2723bd[_0x5ca780(0x235)][_0x5ca780(0x220)])_0x2723bd['settings'][_0x5ca780(0x220)]=_0x5ca780(0x2a9);if(_0x2723bd['settings'][_0x5ca780(0x2b9)])_0x2723bd['settings'][_0x5ca780(0x2b9)]=null;_0x4648f6=JSON[_0x5ca780(0x2d8)](_0x2723bd,null,0x2);}if(_0x2bee21['name']!=_0x5ca780(0x250))_0x54a85d['file'](_0x2bee21['name'],_0x4648f6);}else _0x54a85d[_0x5ca780(0x137)](_0x2bee21['name'],_0x4648f6);}});const _0x249166=_0x54a85d[_0x51c40e(0x1c9)]({'base64':![],'compression':_0x51c40e(0x17e)});fs[_0x51c40e(0x2a7)](zippath+(_0x581140+'.zip'),_0x249166,'binary');}function _0x38ce(){const _0xcf070=['Bot\x20Mgr\x20>\x20starting\x20all\x20bots','2894110THDgph','hasOwnProperty','Notifications\x20enabled','Backup\x20file\x20uploaded','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','server','user','store-fiat','\x20mode','Unauthorized\x20attempt\x20to\x20log\x20out','allow','resetHistory','add','ipc','accept','string','existsSync','botname','listen','SIGINT','version.json','Unauthorized\x20attempt\x20to\x20download\x20','lastmsgtelegram','latestversion','argv','Logged\x20in\x20user\x20...','data','value','Unauthorized\x20attempt\x20to\x20update\x20settings','family','Unauthorized\x20attempt\x20to\x20delete\x20bot','headers','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','min','name','yargs/yargs','bots','clients','\x20only\x0a','f2aRequired','Disabled\x20Bot\x20','sign','Failed\x20to\x20download\x20','api-eu.mixpanel.com','-performance.json','rmSync','get-starting-balances','portfolio_','Unauthorized\x20attempt\x20to\x20get\x20portfolio','simple','track','Invalid\x20authentication\x20token\x20(2)','set','#RES#\x20if\x20running\x20locally\x0a','init','Starting\x20#RED#Balance\x20Bot\x20v','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','DEFLATE','/metrics\x20-\x20show\x20bot\x20performance\x0a','Orders','Login\x20rejected','config_alerts','get-backup-files','warning','backup-full@','expiry','toggle-bot-mode','show-config','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','User\x20has\x20been\x20validated','Access\x20enabled\x20for\x20','inherit','update-bb','reload','reinstall-bb','Login\x20accepted','IPv4','Unauthorized\x20attempt\x20to\x20store\x20configuration','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','randomBytes','socket','temporary\x20access\x20not\x20allowed','production','enabled','resetpw_yes','live','filter','Restore\x20process\x20confirmed','2FA','sendMessage','2FA\x20login\x20required','getFullYear','disconnect','Starting\x20new\x20bot\x20|\x20Bot\x20','HTML','padStart','Server','replace','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','privateKey','timeshift','env','download','bot-','reinstall','binary','bbUsername','Backup\x20file\x20unzipped\x20and\x20stored','staging','referer','index.html','button','readFileSync','exit','bb-settings.json','telegram','hashSync','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','emitHistory','login\x20not\x20required','yes','Telegram\x20error:',':\x20Bot\x20Mgr\x20>\x20','express','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','secret','keys','launch','node-zip','names','publicKey','0.0.0','generate','lowdb/adapters/FileSync','All\x20bots\x20running\x20right\x20now','toggleBotMode','pidRefreshToken','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Password\x20has\x20been\x20reset\x20to:\x20','output-001.log','Bot\x20','show','join','store-configuration','enable','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','defaults','logged\x20out','getHours','catch','isValid','\x20minutes','showname','new','temp/','cancel-loading','clientip','length','getMonth','mkdirSync','build','version','/names\x20-\x20show\x20bot\x20names\x0a','action','getPortfolio','bot.js','http','any','Telegraf\x20error:','apiPassword','entries','reinstall_no','backup','Deleted\x20Bot\x20','/help\x20-\x20show\x20available\x20commands\x0a','sendFile','Starting\x20(','telegramEvents','getUTCHours','remoteAddress','login\x20token\x20generated','alerts','/:bot/performance','find','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','access','split','backupfile','6b67f3d61ee94b8f5c80b4affef4c4d9','fork','range','stopped','apiKey','NTBA_FIX_319','reply','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Allow\x20login\x20from\x20IP\x20address\x20','No\x20bots\x20running\x20right\x20now','jsonwebtoken','event','telegramIpApproval','output-002.log','\x20to\x20','Crypt','Your\x20installation\x20is\x20already\x20up\x20to\x20date','invalid\x20credentials','Alerts','createWriteStream','config_orders','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Node.js\x20v','editMessageReplyMarkup','bbvReceive','Notifications\x20types:\x20','parse','.zip','orders','\x20(2)','telegramToken','Unauthorized\x20attempt\x20to\x20get\x20messages','\x20|\x20client:\x20...','::ffff:127.0.0.1','settings.','loginRequired','Invalid\x20IP\x20address','from','backup-full.zip','\x1b[33m','slice','getDate','text','\x20(1)','-results.json','-----------------------------------------------------------------------------------','decrypt','Notifications\x20enabled\x0a','getSeconds','Enabled\x20Bot\x20','uuid','settings','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a',')\x20\x20\x20|\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','10JWvKvO','restart','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','You\x20can\x20use\x20the\x20following\x20commands:\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','sendPortfolioTelegram','backup-full','title','bbPassword','copyFileSync','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','chat','store-settings','exp','login2fa_','crypto','toIPv4MappedAddress','write','username','Unauthorized\x20attempt\x20to\x20confirm\x20message','add-bot','message','mode','bb-secure.json','/:bot/history','5\x20min','sortBy','once','bot','toString','place-order','started','lowdb','request','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','\x1b[31m','getMinutes','status','685251zsOolp','Markdown','get-messages','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/:bot/support','Setting\x20access:\x20','127.0.0.1','tkn','reset-history','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','express-fileupload','Restarting\x20Bot\x20','socket.io','update_no','type','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','/off\x20-\x20stop\x20bot(s)\x0a','send','-events.json','params','File\x20uploaded','updatebotmanager','\x20|\x20user:\x20...','2FA\x20required','getTime','hybrid-crypto-js','running','store','axios','4004728ULFzPi','userid','isIPv4MappedAddress','::1','readdirSync','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','login\x20token\x20valid','15825MfLvtQ','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','mixpanel','/:bot/coins','exchange','hex','Starting\x20Balance\x20Bot\x20update','confirm-message','max','SIGTERM','Error:\x20Invalid\x20argument\x20','toggle_','temporary\x20access\x20timeout','graphql-request','15\x20min','botID','forEach','2FA\x20login\x20rejected','ipaddr.js','inlineKeyboard','callback','use','auth','password','/status\x20-\x20show\x20bot(s)\x20status\x0a','(staging)','push','internal','bbvNew','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','config_all','address','Unauthorized\x20attempt\x20to\x20get\x20events','#RES#\x20if\x20running\x20on\x20server','match','writeFileSync','compareSync','***','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Error\x20removing\x20old\x20backup\x20files:','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','includes','temporaryAccessAllowed','Token\x20blacklisted','tempaccess_5_','storeFiat','search','update','command','manual','off','30\x20min','telegramChatId','telegramUsername','Unauthorized\x20attempt\x20to\x20update\x20bot','pidExpireLogin','function','/disable\x20-\x20disable\x20notifications\x0a','secure','Notifications\x20disabled\x0a','restore_yes_','metrics','3000','startsWith','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','config','unlinkSync','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Invalid\x20username\x20or\x20IP\x20address','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','toggle','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','-config.json','136xpRWTV','deleteHistoryAlerts','sort','post','All','2336586NzraqK','*$1*','config/','telegramEnabled','stringify','1559135Wwrlxf','stop','sendMetricsTelegram','/upload-backup','isDirectory','error','util','removeAllListeners','headless','build2','new-disabled','timestamp','connection','telegram2FaApproval','date-fns','/:bot','uuid-random','temporary\x20token\x20generated','lastmsgemitted','alias','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','portfolio','node','(((.+)+)+)+$','Bot\x20Mgr\x20>\x20','token','debug','Restore\x20process\x20aborted','reason','close','messages','static','constructor','Unauthorized\x20login\x20attempt\x20(timeout)','logs/','path','cloneDeep','initclient','port','$1_$2_$3','disabled','Session\x20expired\x20for\x20user\x20...','\x20|\x20','apply','\x1b[35m','remove','Yes','store-headless','start','[ip-address]','Error\x20while\x20deleting\x20config\x20files:\x20','kill','Restoring\x20bot(s)\x20from\x20backup','All\x20bots','login\x20required','login','endsWith','/download/:type','emit','onepagemode','auto','success','child_process','all','botmanager','blacklist','tempaccess_reject_','get-portfolio','Invalid\x20authentication\x20token\x20(1)','reject','then','telegrammsg','/update\x20-\x20update\x20Balance\x20Bot\x0a','Logged\x20out\x20user\x20...','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','2FA\x20login\x20token\x20generated','number',',\x20must\x20be\x20a\x204\x20digit\x20number','disable','restore_no_','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','full','files','getStartingBalances','zip/','\x1b[34m','get','apiSecret','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','statSync','************','logs','access\x20timeout','resetpw_no','file','/start','format','conn','output-000.log','restore-backup-file','mtime','toIPv4Address','assign','3596524qphxqk','log'];_0x38ce=function(){return _0xcf070;};return _0x38ce();}async function unzipFile(_0x13f690,_0xf5ce17){const _0x180c79=_0x5695c8;fs[_0x180c79(0x281)](configpath,{'withFileTypes':!![]})[_0x180c79(0x294)](_0x2eb3f1=>{const _0x517e01=_0x180c79;if(!_0x2eb3f1[_0x517e01(0xdd)]())fs[_0x517e01(0x171)](configpath+_0x2eb3f1['name']);});const _0x3682c5=fs[_0x180c79(0x1b5)](_0x13f690+_0xf5ce17,_0x180c79(0x1ae)),_0x261c7=new require(_0x180c79(0x1c5))(_0x3682c5,{'base64':![],'checkCRC32':!![]});Object[_0x180c79(0x1c3)](_0x261c7['files'])[_0x180c79(0x294)](_0x16081f=>{const _0x53e36e=_0x180c79,_0x428ef9=_0x261c7[_0x53e36e(0x12b)][_0x16081f];fs[_0x53e36e(0x2a7)](configpath+_0x428ef9[_0x53e36e(0x166)],_0x428ef9['_data']);}),fs[_0x180c79(0x281)](temppath,{'withFileTypes':!![]})[_0x180c79(0x294)](_0x5bce18=>{const _0x5cbc80=_0x180c79;if(!_0x5bce18[_0x5cbc80(0xdd)]())fs[_0x5cbc80(0x171)](temppath+_0x5bce18[_0x5cbc80(0x166)]);}),logger['debug'](_0x180c79(0x1b0)),process['send']({'restore':!![]},_0x58d060=>{});}async function getPublicIp(){const _0x5ce4e2=_0x5695c8;try{const _0x56acb1=await axios[_0x5ce4e2(0x12f)]('https://api.ipify.org?format=json');publicip=_0x56acb1[_0x5ce4e2(0x15e)]['ip'];}catch(_0x4147d6){}}async function triggerAnalytics(){const _0x3bf2fa=_0x5695c8;if(!publicip)await getPublicIp();const _0x644b15=getBotsWithMode();let _0x5e8c32=0x0;_0x644b15[_0x3bf2fa(0x294)](_0x1ed82c=>{const _0x55877c=_0x3bf2fa;if(_0x1ed82c[_0x55877c(0x25e)]===_0x55877c(0x198))_0x5e8c32++;});const _0x17311b=getBotExchanges();mixpanel[_0x3bf2fa(0x176)](_0x3bf2fa(0x1a5),{'distinct_id':settings[_0x3bf2fa(0x27e)],'ip':publicip,'version':serverversion,'numbots':_0x644b15['length'],'numbotsenabled':_0x5e8c32,'exchanges':_0x17311b,'environment':environment});}async function getMessages(){const _0x4bb807=_0x5695c8,_0x467364=_0x4bb807(0x123),_0x1e4ff0=new GraphQLClient(_0x467364),_0x1b9fce={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x447cf8=serverversion[_0x4bb807(0x1ff)]('.'),_0x57436f=_0x447cf8[0x0]+'.'+_0x447cf8[0x1],_0x4b2ef4=Math[_0x4bb807(0x165)](settings[_0x4bb807(0x15a)],settings[_0x4bb807(0xeb)]),_0x5d5056={'last':parseInt(_0x4b2ef4),'bbm':_0x57436f},_0x3e79db=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x638726;try{_0x638726=await _0x1e4ff0[_0x4bb807(0x25a)](_0x3e79db,_0x5d5056,_0x1b9fce);}catch(_0x44e340){}if(_0x638726&&_0x638726['messages']){let _0x8f5434=settings[_0x4bb807(0x15a)];newMessages=[];for(const _0x213f0b of _0x638726[_0x4bb807(0xf7)]){newMessages[_0x4bb807(0x29e)](_0x213f0b);let _0x45efcf=![];_0x213f0b[_0x4bb807(0x2a0)]&&(updateSetting(_0x4bb807(0x15b),_0x213f0b[_0x4bb807(0x2a0)]),_0x45efcf=isNewerVersion(serverversion,_0x213f0b[_0x4bb807(0x2a0)])||serverversion==_0x213f0b[_0x4bb807(0x2a0)]);if(!_0x45efcf&&_0x213f0b['number']>_0x8f5434){if(_0x213f0b[_0x4bb807(0x21a)]===_0x4bb807(0x1ec)||serverversion[_0x4bb807(0x2c4)](_0x213f0b[_0x4bb807(0x21a)])){let _0x297346=''+_0x213f0b[_0x4bb807(0x240)]+'\x0a\x0a'+_0x213f0b[_0x4bb807(0x24e)];const _0x5bb3a0=await sendTelegramMsg(toTelegramMarkdown(_0x297346),_0x4bb807(0x260));if(_0x5bb3a0)_0x8f5434=_0x213f0b[_0x4bb807(0x125)];}}}updateAvailable=isNewerVersion(settings[_0x4bb807(0x15b)],serverversion),updateSetting('lastmsgtelegram',_0x8f5434),emitMessages();}}function emitMessages(){const _0x433fa9=_0x5695c8,_0x17f196=settings[_0x433fa9(0xeb)];let _0xe19e77=[];newMessages[_0x433fa9(0x294)](_0xac0b1d=>{const _0x24c4c7=_0x433fa9;_0xac0b1d[_0x24c4c7(0x125)]>_0x17f196&&_0xe19e77[_0x24c4c7(0x29e)](_0xac0b1d);}),_0xe19e77[_0x433fa9(0x1e2)]>0x0&&getAllClients()[_0x433fa9(0x294)](_0x3b9ef8=>{const _0x1ca7ae=_0x433fa9;getSocket(_0x3b9ef8['id'])['emit'](_0x1ca7ae(0x24e),_0xe19e77);});}function confirmMessage(_0x29f5e3){const _0x6ee7dc=_0x5695c8;updateSetting(_0x6ee7dc(0xeb),Number(_0x29f5e3));}function isNewerVersion(_0x37443c,_0x3942b0){const _0x5bf811=_0x5695c8,_0x4fbbe5=_0x3942b0[_0x5bf811(0x1ff)]('.'),_0x499836=_0x37443c[_0x5bf811(0x1ff)]('.');for(var _0x4d917b=0x0;_0x4d917b<_0x499836['length'];_0x4d917b++){const _0x666478=~~_0x499836[_0x4d917b],_0x4440bf=~~_0x4fbbe5[_0x4d917b];if(_0x666478>_0x4440bf)return!![];if(_0x666478<_0x4440bf)return![];}return![];}function toTelegramMarkdown(_0x523dcf){const _0x4b9b12=_0x5695c8,_0x3ad4c3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x431f75=/\*{2}(.+?)\*{2}/gim;return _0x523dcf=_0x523dcf[_0x4b9b12(0x1a6)](_0x3ad4c3,_0x4b9b12(0x100))[_0x4b9b12(0x1a6)](_0x431f75,_0x4b9b12(0x2d5)),_0x523dcf;}async function validateConfigFile(){const _0x393591=_0x5695c8,_0x21709e=dbConfig[_0x393591(0x12f)](_0x393591(0x168))[_0x393591(0x253)](_0x393591(0x293))['value']()||[];if(_0x21709e[_0x393591(0x1e2)]==0x0){let _0x5d730d=0x0,_0x317bab=[];const _0x48c693=/^bot-([0-9]{3})-config.json$/,_0x3ca685=fs[_0x393591(0x281)](configpath);_0x3ca685[_0x393591(0x294)](_0x373dcf=>{const _0x14431e=_0x393591,_0x4ad7a9=_0x48c693['exec'](_0x373dcf);if(_0x4ad7a9){const _0x5e92a2=_0x4ad7a9[0x1];let _0x143bae=getBotAttributes(_0x5e92a2);_0x317bab[_0x14431e(0x29e)]({'botID':_0x5e92a2,'botname':_0x143bae[_0x14431e(0x155)],'status':_0x14431e(0x101),'live':_0x14431e(0x204)}),_0x5d730d++;}}),_0x5d730d!=0x0&&(dbConfig[_0x393591(0x12f)]('bots')[_0x393591(0x13f)](_0x317bab)[_0x393591(0x24a)](),config=_0x317bab,restoredConfigFile=_0x5d730d);}}async function restoreConfigNotify(_0x1e9820){const _0x3502df=_0x5695c8;let _0x31c682;if(restoredConfigFile==0x1)_0x31c682=_0x3502df(0x2a1);else _0x31c682=_0x3502df(0x26f);if(_0x1e9820)io['to'](_0x3502df(0x119))[_0x3502df(0x113)]('notification',_0x31c682);else{logger[_0x3502df(0x175)](_0x3502df(0x22f)),logger['simple'](_0x31c682),logger[_0x3502df(0x175)](_0x3502df(0x22f)),logger[_0x3502df(0x175)]('');if(tgBot&&settings[_0x3502df(0x2b9)]&&settings['telegramEvents']!='orders')await sendTelegram(settings[_0x3502df(0x2b9)],_0x3502df(0xf1)+_0x31c682);}}function validateCredentials(_0x5700d9,_0xdd76ee){const _0x4c5b02=_0x5695c8;if(_0x5700d9[_0x4c5b02(0x24b)]==settings['bbUsername']&&bcrypt[_0x4c5b02(0x2a8)](_0x5700d9[_0x4c5b02(0x29b)],settings[_0x4c5b02(0x241)])){if(settings[_0x4c5b02(0x16b)])return{'allow':![],'reason':_0x4c5b02(0x19f),'token':null};else{const _0x291451=generateLoginToken(_0xdd76ee);return{'allow':!![],'reason':_0x4c5b02(0x1f9),'token':_0x291451};}}else return{'allow':![],'reason':_0x4c5b02(0x213),'token':null};}function refreshToken(_0x3e8c01){const _0x4a323d=_0x5695c8,_0x1afba7=generateLoginToken(_0x3e8c01);return{'allow':!![],'reason':_0x4a323d(0x1f9),'token':_0x1afba7};}function validateAccess(_0x275531,_0xaa1630,_0x2e0e78){const _0x1ef247=_0x5695c8,_0x5a9ea0=_0x2e0e78?_0x2e0e78:devices[_0xaa1630]['ip'];let _0x4a8996;const _0x2929c7=_0x17e9eb=>{const _0x41b6f7=_0x4411;if(settings[_0x41b6f7(0x225)]){if(settings[_0x41b6f7(0x16b)]){if(telegram2FaApproved(_0xaa1630)){const _0x1ab977=generateLoginToken(_0xaa1630);return{'allow':!![],'reason':_0x41b6f7(0x124),'token':_0x1ab977};}else return{'allow':![],'reason':_0x41b6f7(0x10f),'token':null};}else return _0x4a8996=validToken(_0x17e9eb,_0xaa1630),_0x4a8996[_0x41b6f7(0x144)](_0x41b6f7(0x116))?{'allow':!![],'reason':_0x41b6f7(0x283),'token':_0x17e9eb}:{'allow':![],'reason':_0x41b6f7(0x10f),'token':null};}else return{'allow':!![],'reason':_0x41b6f7(0x1bc),'token':null};};if(settings['whitelistEnabled']){let _0x30f364=[...settings['whitelist'],_0x1ef247(0x280),_0x1ef247(0x223),_0x1ef247(0x265)];if(_0x30f364[_0x1ef247(0x2ae)](_0x5a9ea0))return _0x2929c7(_0x275531);else{_0x4a8996=validToken(_0x275531,_0xaa1630);if(_0x4a8996[_0x1ef247(0x144)](_0x1ef247(0x116)))return _0x2929c7(_0x275531);else{if(telegramIpApproved(_0xaa1630)){const _0x69ef17=generateToken(_0xaa1630);return _0x4a8996=_0x2929c7(_0x275531),_0x4a8996[_0x1ef247(0x14e)]?{'allow':!![],'reason':_0x1ef247(0xea),'token':_0x69ef17}:_0x4a8996;}else return settings[_0x1ef247(0x2af)]?{'allow':![],'reason':_0x1ef247(0x277),'token':null}:{'allow':![],'reason':_0x1ef247(0x196),'token':null};}}}else return _0x2929c7(_0x275531);}function timelyDecrypt(_0x5e40a4,_0x23e2f4=!![]){const _0x28ce81=_0x5695c8;if(_0x5e40a4)try{const _0x25b377=crypt['decrypt'](secure[_0x28ce81(0x1a8)],_0x5e40a4)[_0x28ce81(0x24e)],_0x55a796=_0x25b377['split']('@')[0x0],_0x20d4dc=_0x25b377[_0x28ce81(0x1ff)]('@')[0x1],_0xa46a60=new Date()[_0x28ce81(0x278)]();if(_0x23e2f4){if(_0xa46a60-_0x20d4dc<maxSecretAge*0x3e8)return _0x55a796;else return![];}else return _0x55a796;}catch(_0x153e82){return![];}else return![];}const validToken=(_0x2779b5,_0x197845)=>{const _0x5f3519=_0x5695c8,_0x164737=devices[_0x197845]['ip'];if(!_0x2779b5)return{'error':'No\x20authentication\x20token'};for(let _0x26e423 of blacklist){if(_0x26e423[_0x5f3519(0xf2)]==_0x2779b5)return{'error':_0x5f3519(0x2b0)};}let _0x2a8203;try{_0x2a8203=jwt['verify'](_0x2779b5,secure[_0x5f3519(0x1c2)]+_0x197845);}catch{return{'error':_0x5f3519(0x11d)};}if(!_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x1e1))&&!_0x2a8203['hasOwnProperty'](_0x5f3519(0x24b))||!_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x246)))return{'error':_0x5f3519(0x177)};if(!_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x24b))&&_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x1e1))){const {clientip:_0x1ad9a6}=_0x2a8203;return _0x164737==_0x1ad9a6?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x5f3519(0x226)};}else{if(_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x24b))&&_0x2a8203[_0x5f3519(0x144)](_0x5f3519(0x1e1))){const {username:_0xee9c8c,clientip:_0x3e456a}=_0x2a8203;return settings[_0x5f3519(0x1af)]==_0xee9c8c&&_0x164737==_0x3e456a?{'success':_0x5f3519(0x18a)}:{'error':_0x5f3519(0x2ca)};}}},generateLoginToken=_0x40d56e=>{const _0xd8b94a=_0x5695c8;if(_0x40d56e){const _0x43832b=devices[_0x40d56e]['ip'];return jwt[_0xd8b94a(0x16d)]({'username':settings[_0xd8b94a(0x1af)],'clientip':_0x43832b},secure[_0xd8b94a(0x1c2)]+_0x40d56e,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x291bc6=>{const _0x49ab4d=_0x5695c8;if(_0x291bc6){const _0x414c87=devices[_0x291bc6]['ip'];return jwt[_0x49ab4d(0x16d)]({'clientip':_0x414c87},secure[_0x49ab4d(0x1c2)]+_0x291bc6,{'expiresIn':devices[_0x291bc6]['telegramIpApproval'][_0x49ab4d(0x186)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x211485=>{const _0x18877d=_0x5695c8;let _0x23ede1=![];return devices[_0x211485][_0x18877d(0x20e)]&&devices[_0x211485][_0x18877d(0x20e)]['expiry']!='reject'&&(_0x23ede1=devices[_0x211485][_0x18877d(0x20e)][_0x18877d(0x1e1)]==devices[_0x211485]['ip']&&new Date()[_0x18877d(0x278)]()-devices[_0x211485]['telegramIpApproval'][_0x18877d(0xe4)]<devices[_0x211485][_0x18877d(0x20e)][_0x18877d(0x186)]*0x3c*0x3e8),_0x23ede1;},telegram2FaApproved=_0xeda02c=>{const _0x54ea8b=_0x5695c8;let _0x366a59=![];return devices[_0xeda02c][_0x54ea8b(0xe6)]&&devices[_0xeda02c][_0x54ea8b(0xe6)][_0x54ea8b(0x186)]!=_0x54ea8b(0x11e)&&(_0x366a59=devices[_0xeda02c][_0x54ea8b(0xe6)]['clientip']==devices[_0xeda02c]['ip']&&new Date()[_0x54ea8b(0x278)]()-devices[_0xeda02c][_0x54ea8b(0xe6)]['timestamp']<devices[_0xeda02c][_0x54ea8b(0xe6)][_0x54ea8b(0x186)]*0x3c*0x3e8),_0x366a59;},normalizeIP=_0x1a59f7=>{const _0x9167f1=_0x5695c8;let _0x485bba=null,_0x21aadd=null;if(ipaddr[_0x9167f1(0x1db)](_0x1a59f7)){const _0x269056=ipaddr[_0x9167f1(0x21c)](_0x1a59f7);_0x269056['kind']()==='ipv6'?(_0x269056[_0x9167f1(0x27f)]()&&(_0x485bba=_0x269056[_0x9167f1(0x13e)]()[_0x9167f1(0x256)]()),_0x21aadd=_0x269056[_0x9167f1(0x256)]()):(_0x485bba=_0x269056[_0x9167f1(0x256)](),_0x21aadd=_0x269056[_0x9167f1(0x249)]()[_0x9167f1(0x256)]());}return{'show':_0x485bba?_0x485bba:_0x21aadd,'store':_0x21aadd};};function formatDate(_0x5c136d){const _0x485ee4=_0x5695c8;return _0x5c136d[_0x485ee4(0x1a0)]()+'/'+(_0x5c136d['getMonth']()+0x1)[_0x485ee4(0x256)]()[_0x485ee4(0x1a4)](0x2,'0')+'/'+_0x5c136d['getDate']()[_0x485ee4(0x256)]()[_0x485ee4(0x1a4)](0x2,'0')+'\x20'+_0x5c136d['getHours']()[_0x485ee4(0x256)]()[_0x485ee4(0x1a4)](0x2,'0')+':'+_0x5c136d[_0x485ee4(0x25d)]()[_0x485ee4(0x256)]()[_0x485ee4(0x1a4)](0x2,'0')+':'+_0x5c136d[_0x485ee4(0x232)]()[_0x485ee4(0x256)]()[_0x485ee4(0x1a4)](0x2,'0');}function sleep(_0x498a51){return new Promise(_0x3f01e6=>setTimeout(_0x3f01e6,_0x498a51));}