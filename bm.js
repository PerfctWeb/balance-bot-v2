const _0x3d59f8=_0x3fb5;(function(_0x375604,_0x1ba03a){const _0x21966e=_0x3fb5,_0x193d1f=_0x375604();while(!![]){try{const _0x29dc68=parseInt(_0x21966e(0x185))/0x1+parseInt(_0x21966e(0x14e))/0x2*(-parseInt(_0x21966e(0x1da))/0x3)+-parseInt(_0x21966e(0x270))/0x4+parseInt(_0x21966e(0x1c2))/0x5*(parseInt(_0x21966e(0x1ae))/0x6)+parseInt(_0x21966e(0x179))/0x7+-parseInt(_0x21966e(0x157))/0x8+parseInt(_0x21966e(0x1dd))/0x9*(-parseInt(_0x21966e(0x155))/0xa);if(_0x29dc68===_0x1ba03a)break;else _0x193d1f['push'](_0x193d1f['shift']());}catch(_0x3342d1){_0x193d1f['push'](_0x193d1f['shift']());}}}(_0x6543,0x74d6d));const _0x39dc51=function(){let _0x5dd5e5=!![];return function(_0x2567df,_0x1daf7e){const _0x5242d9=_0x5dd5e5?function(){const _0x475eb5=_0x3fb5;if(_0x1daf7e){const _0x56c001=_0x1daf7e[_0x475eb5(0x20e)](_0x2567df,arguments);return _0x1daf7e=null,_0x56c001;}}:function(){};return _0x5dd5e5=![],_0x5242d9;};}(),_0x227571=_0x39dc51(this,function(){const _0x30a246=_0x3fb5;return _0x227571[_0x30a246(0x263)]()[_0x30a246(0x1e8)](_0x30a246(0x247))[_0x30a246(0x263)]()[_0x30a246(0x1ba)](_0x227571)['search']('(((.+)+)+)+$');});_0x227571();'use strict';process[_0x3d59f8(0x217)][_0x3d59f8(0x26a)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x3d59f8(0x158)),fs=require('fs'),fns=require(_0x3d59f8(0x149)),low=require(_0x3d59f8(0x19e)),path=require(_0x3d59f8(0x241)),crypto=require(_0x3d59f8(0x11f)),Crypt=require('hybrid-crypto-js')[_0x3d59f8(0x1f0)],RSA=require(_0x3d59f8(0x277))[_0x3d59f8(0x1cb)],bcrypt=require(_0x3d59f8(0x16c)),jwt=require(_0x3d59f8(0x195)),analyticsLib=require(_0x3d59f8(0x169))[_0x3d59f8(0x13c)],googleAnalytics=require('@analytics/google-analytics')[_0x3d59f8(0x13c)],ipaddr=require(_0x3d59f8(0x242)),argv=require('yargs/yargs')(process[_0x3d59f8(0x254)][_0x3d59f8(0x15d)](0x2))[_0x3d59f8(0x254)],PORT=argv[_0x3d59f8(0x11b)]||_0x3d59f8(0x180),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x3d59f8(0x268)](_0x3d59f8(0x258)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x3d59f8(0x144)](0x1));const HOST=argv[_0x3d59f8(0x1ca)]||null,userID=argv[_0x3d59f8(0x147)]||'';let bbpath=_0x3d59f8(0x210),bbpath2='';const botfile=_0x3d59f8(0x1bc),configfile=_0x3d59f8(0x1ee),settingsfile='bb-settings.json',securefile=_0x3d59f8(0x269);let validInstallation=!![];!fs[_0x3d59f8(0x246)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x3d59f8(0x154)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x3d59f8(0x239);!fs[_0x3d59f8(0x246)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x3d59f8(0x246)](configbackuppath)&&fs[_0x3d59f8(0x124)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3d59f8(0x1b8)]({'bots':[]})[_0x3d59f8(0x1c7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3d59f8(0x1b8)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3d59f8(0x1b8)]({'secure':{},'blacklist':[]})[_0x3d59f8(0x1c7)]();let crypt=new Crypt({'md':_0x3d59f8(0x13a),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3d59f8(0x208))[_0x3d59f8(0x127)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x3d59f8(0x136)),app=express(),http=require(_0x3d59f8(0x11d))['createServer'](app);app[_0x3d59f8(0x1d0)](express[_0x3d59f8(0x26f)](path['join'](__dirname,bbpath2,_0x3d59f8(0x23d)))),app[_0x3d59f8(0x1d0)](express[_0x3d59f8(0x26f)](path['join'](__dirname,bbpath2,_0x3d59f8(0x1f2)))),app[_0x3d59f8(0x1c6)]('/',function(_0xb2245f,_0x32e61b){const _0x1768fb=_0x3d59f8;_0x32e61b['sendFile'](path[_0x1768fb(0x219)](__dirname,bbpath2,_0x1768fb(0x23d),_0x1768fb(0x21f)));}),app[_0x3d59f8(0x1c6)](_0x3d59f8(0x197),function(_0x1124e8,_0xd14fb9){const _0xbd81a8=_0x3d59f8;_0xd14fb9[_0xbd81a8(0x125)](path[_0xbd81a8(0x219)](__dirname,bbpath2,_0xbd81a8(0x1f2),'index.html'));}),app[_0x3d59f8(0x1c6)]('/:bot/portfolio',(_0x188b18,_0x415109)=>{const _0x114644=_0x3d59f8;_0x415109['sendFile'](path[_0x114644(0x219)](__dirname,bbpath2,_0x114644(0x1f2),_0x114644(0x21f)));}),app[_0x3d59f8(0x1c6)](_0x3d59f8(0x1a0),(_0x4ba3ae,_0x4c5d1)=>{const _0x2031ee=_0x3d59f8;_0x4c5d1[_0x2031ee(0x125)](path[_0x2031ee(0x219)](__dirname,bbpath2,_0x2031ee(0x1f2),_0x2031ee(0x21f)));}),app[_0x3d59f8(0x1c6)]('/:bot/coins',(_0xaefa0e,_0x3c3771)=>{const _0x45de29=_0x3d59f8;_0x3c3771[_0x45de29(0x125)](path[_0x45de29(0x219)](__dirname,bbpath2,'build',_0x45de29(0x21f)));}),app['get'](_0x3d59f8(0x1aa),(_0x525076,_0x361680)=>{const _0x258539=_0x3d59f8;_0x361680[_0x258539(0x125)](path[_0x258539(0x219)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x3d59f8(0x1e4),(_0x4b0bc9,_0x49496b)=>{const _0x2848f3=_0x3d59f8;_0x49496b['sendFile'](path[_0x2848f3(0x219)](__dirname,bbpath2,_0x2848f3(0x1f2),_0x2848f3(0x21f)));}),app[_0x3d59f8(0x1c6)](_0x3d59f8(0x19c),(_0x5b0fc3,_0x1bdb8e)=>{const _0x1eb582=_0x3d59f8;_0x1bdb8e[_0x1eb582(0x125)](path[_0x1eb582(0x219)](__dirname,bbpath2,_0x1eb582(0x1f2),_0x1eb582(0x21f)));});if(HOST)http[_0x3d59f8(0x130)](PORT,HOST);else http[_0x3d59f8(0x130)](PORT);const io=require(_0x3d59f8(0x24c))(http,{}),analytics=analyticsLib({'app':_0x3d59f8(0x16f),'plugins':[googleAnalytics({'trackingId':_0x3d59f8(0x262)})]}),TelegramBot=require(_0x3d59f8(0x182));let tgBot;if(settings[_0x3d59f8(0x135)]&&settings[_0x3d59f8(0x135)]!=''&&settings[_0x3d59f8(0x156)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x505730=_0x3d59f8;console[_0x505730(0x268)](''),console[_0x505730(0x268)](_0x505730(0x1a3)),logging(_0x505730(0x177)+PORT),console[_0x505730(0x268)](_0x505730(0x1a3));if(config[_0x505730(0x1b4)]!=0x0)config['forEach'](_0x14e144=>{const _0x488ba7=_0x505730;if(_0x14e144[_0x488ba7(0x20a)]==_0x488ba7(0x26c)||_0x14e144[_0x488ba7(0x20a)]==_0x488ba7(0x19b))logging(_0x488ba7(0x170)+_0x14e144['botID']+_0x488ba7(0x172)+_0x14e144[_0x488ba7(0x18e)]),startBot([_0x14e144[_0x488ba7(0x256)],userID],{'cwd':bbpath},function(_0x1c574a){if(_0x1c574a)logging(_0x1c574a);});else(_0x14e144[_0x488ba7(0x20a)]==_0x488ba7(0x272)||_0x14e144[_0x488ba7(0x20a)]==_0x488ba7(0x238))&&logging(_0x488ba7(0x167)+_0x14e144['botID']+_0x488ba7(0x172)+_0x14e144[_0x488ba7(0x18e)]);});else!newBot&&console[_0x505730(0x268)](_0x505730(0x25c));if(newBot)addBot();console['log'](_0x505730(0x1a3)),console[_0x505730(0x268)]('');}function startSocket(){const _0x3542f2=_0x3d59f8;io['on'](_0x3542f2(0x16a),_0x47a7ed=>{const _0x2997f3=_0x3542f2;let _0x51c8dc,_0x17965d,_0x33bbcf,_0xbcb575,_0x3d4693;const _0x993668=_0x47a7ed[_0x2997f3(0x215)]['headers'][_0x2997f3(0x14a)];_0x17965d=_0x993668[_0x2997f3(0x13f)](/bot[0-9]{3}/);if(_0x17965d)_0x33bbcf=_0x17965d[0x0][_0x2997f3(0x13f)](/[0-9]{3}/);if(_0x33bbcf)_0x51c8dc=_0x33bbcf[0x0];else _0x51c8dc=_0x2997f3(0x226);const _0x14eecf=_0x47a7ed['handshake'][_0x2997f3(0x22e)][_0x2997f3(0x1af)];if(!_0x14eecf)_0x47a7ed[_0x2997f3(0x1ec)](_0x2997f3(0x20a),{'publicKey':secure[_0x2997f3(0x1d4)]});else{_0xbcb575=timelyDecrypt(_0x14eecf,![]);if(!_0xbcb575)_0x47a7ed['emit'](_0x2997f3(0x20a),{'publicKey':secure[_0x2997f3(0x1d4)]});else{_0x3d4693=normalizeIP(_0x47a7ed[_0x2997f3(0x165)][_0x2997f3(0x23e)])[_0x2997f3(0x265)];if(!devices[_0xbcb575])devices[_0xbcb575]={'uuid':_0xbcb575,'access':{'token':null}};devices[_0xbcb575]['ip']=_0x3d4693;const _0x190ab5=addClient(_0x47a7ed['id'],_0xbcb575,_0x51c8dc);setAccess(_0x190ab5),_0x47a7ed['on'](_0x2997f3(0x1d7),_0x47ed3d=>{const _0x57e2b2=_0x2997f3,_0x377190=timelyDecrypt(_0x47ed3d[_0x57e2b2(0x131)]);if(_0x377190){_0x47ed3d={'username':_0x47ed3d[_0x57e2b2(0x120)],'password':_0x377190},devices[_0xbcb575][_0x57e2b2(0x1c9)]=validateCredentials(_0x47ed3d,_0xbcb575);if(devices[_0xbcb575][_0x57e2b2(0x1c9)][_0x57e2b2(0x218)]==![]&&devices[_0xbcb575]['access']['reason']==_0x57e2b2(0x1b6))_0x47a7ed[_0x57e2b2(0x1ec)](_0x57e2b2(0x20a),{'access':devices[_0xbcb575][_0x57e2b2(0x1c9)]}),loginAccess2FA(_0xbcb575,_0x3d4693);else{if(devices[_0xbcb575][_0x57e2b2(0x1c9)][_0x57e2b2(0x218)]==![]&&devices[_0xbcb575]['access'][_0x57e2b2(0x214)]=='invalid\x20credentials')_0x47a7ed[_0x57e2b2(0x1ec)]('status',{'access':devices[_0xbcb575][_0x57e2b2(0x1c9)]});else devices[_0xbcb575][_0x57e2b2(0x1c9)][_0x57e2b2(0x218)]&&devices[_0xbcb575]['access'][_0x57e2b2(0x214)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0xbcb575)[_0x57e2b2(0x178)](_0x4e4c35=>{setAccess(_0x4e4c35);}),setTokenRefresh(_0xbcb575),setSessionTimeout(_0x57e2b2(0x1d7),_0xbcb575));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x47a7ed['on'](_0x2997f3(0x1d1),()=>{resetPassword();}),_0x47a7ed['on'](_0x2997f3(0x20c),_0x47d7a3=>{removeClient(_0x47a7ed['id']);});}}});}function initClient(_0xd038d7){const _0x53f33f=_0x3d59f8;if(_0xd038d7!=_0x53f33f(0x226)&&config[_0x53f33f(0x198)]!=''){if(pid[_0xd038d7])pid[_0xd038d7][_0x53f33f(0x1c0)]({'function':_0x53f33f(0x1a1),'args':null});}}function getSocket(_0x209f6f){const _0x430010=_0x3d59f8;return io[_0x430010(0x189)]['sockets'][_0x430010(0x1c6)](_0x209f6f);}function setAccess(_0x5b96d2){const _0x42107d=_0x3d59f8,_0x50b50b=getSocket(_0x5b96d2['id']),_0x4ad04a=_0x5b96d2[_0x42107d(0x1e7)],_0x662799=_0x5b96d2[_0x42107d(0x21e)];devices[_0x4ad04a][_0x42107d(0x1c9)]=validateAccess(devices[_0x4ad04a][_0x42107d(0x1c9)]['token'],_0x4ad04a),_0x50b50b[_0x42107d(0x219)](_0x4ad04a);if(devices[_0x4ad04a][_0x42107d(0x1c9)]['allow']){_0x50b50b['join'](_0x662799);if(_0x662799=='botmanager')initializeSocketBotManager(_0x50b50b);else initializeSocketBot(_0x50b50b);initClient(_0x662799);}devices[_0x4ad04a]['access'][_0x42107d(0x1e3)]&&devices[_0x4ad04a][_0x42107d(0x1c9)][_0x42107d(0x214)]==_0x42107d(0x1b1)&&setSessionTimeout(_0x42107d(0x20d),_0x4ad04a),devices[_0x4ad04a][_0x42107d(0x1c9)][_0x42107d(0x1e3)]&&devices[_0x4ad04a][_0x42107d(0x1c9)][_0x42107d(0x214)]==_0x42107d(0x235)&&setSessionTimeout(_0x42107d(0x1d7),_0x4ad04a),_0x50b50b['emit']('status',{'status':_0x5b96d2[_0x42107d(0x152)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4ad04a][_0x42107d(0x1c9)],'externalip':devices[_0x4ad04a]['ip'],'publicKey':secure[_0x42107d(0x1d4)],'validInstallation':validInstallation}),devices[_0x4ad04a][_0x42107d(0x1c9)]['allow']==![]&&devices[_0x4ad04a][_0x42107d(0x1c9)][_0x42107d(0x214)]=='2FA\x20required'&&temporaryAccess2FA(_0x4ad04a,devices[_0x4ad04a]['ip']);}function setSessionTimeout(_0x23524a,_0x3d653d){const _0x3373ed=_0x3d59f8;let _0x423a41;if(_0x23524a==_0x3373ed(0x1d7))_0x423a41=loginExpiry*0x3c*0x3e8;else _0x423a41=devices[_0x3d653d][_0x3373ed(0x1c8)][_0x3373ed(0x1fe)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3d653d]['telegramIpApproval'][_0x3373ed(0x17f)]);if(devices[_0x3d653d][_0x3373ed(0x212)])clearTimeout(devices[_0x3d653d][_0x3373ed(0x212)]);devices[_0x3d653d][_0x3373ed(0x212)]=setTimeout(()=>{const _0x833635=_0x3373ed;if(devices[_0x3d653d]['pidRefreshToken'])clearTimeout(devices[_0x3d653d][_0x833635(0x12c)]);removeSocketListeners(_0x3d653d),addBlacklist(_0x3d653d),devices[_0x3d653d][_0x833635(0x1c8)]=null,devices[_0x3d653d][_0x833635(0x209)]=null,devices[_0x3d653d][_0x833635(0x1c9)][_0x833635(0x1e3)]=null,devices[_0x3d653d][_0x833635(0x1c9)]=validateAccess(devices[_0x3d653d][_0x833635(0x1c9)]['token'],_0x3d653d),!(devices[_0x3d653d][_0x833635(0x1c9)][_0x833635(0x218)]&&devices[_0x3d653d]['access'][_0x833635(0x214)]==_0x833635(0x1a6))&&(_0x23524a==_0x833635(0x1d7)?io['to'](_0x3d653d)[_0x833635(0x1ec)](_0x833635(0x20a),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3d653d)['emit'](_0x833635(0x20a),{'access':{'allow':![],'reason':_0x833635(0x137),'token':null}})),devices[_0x3d653d][_0x833635(0x1c9)][_0x833635(0x1e3)]=null;},_0x423a41);}function setTokenRefresh(_0x42674f){const _0xe76142=_0x3d59f8;if(devices[_0x42674f][_0xe76142(0x12c)])clearTimeout(devices[_0x42674f]['pidRefreshToken']);devices[_0x42674f][_0xe76142(0x12c)]=setTimeout(()=>{const _0x3dbca7=_0xe76142;getClientsWithUuid(_0x42674f)[_0x3dbca7(0x1b4)]!=0x0?(devices[_0x42674f][_0x3dbca7(0x1c9)]=refreshToken(_0x42674f),io['to'](_0x42674f)['emit'](_0x3dbca7(0x20a),{'status':_0x3dbca7(0x194),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x42674f][_0x3dbca7(0x1c9)],'externalip':devices[_0x42674f]['ip'],'publicKey':secure[_0x3dbca7(0x1d4)],'validInstallation':validInstallation}),setTokenRefresh(_0x42674f)):clearTimeout(devices[_0x42674f][_0x3dbca7(0x12c)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3cf68a){const _0x336f8f=_0x3d59f8,_0xa465b7=getClient(_0x3cf68a['id'])[_0x336f8f(0x1e7)];_0x3cf68a[_0x336f8f(0x1ec)](_0x336f8f(0x267),config),_0x3cf68a[_0x336f8f(0x1ec)]('settings',cleanSettings()),_0x3cf68a['on'](_0x336f8f(0x1ed),_0x8fa4f9=>{const _0x2cca30=_0x336f8f;if(validateAccess(_0x8fa4f9,_0xa465b7)['allow'])addBot();else logging(_0x2cca30(0x129));}),_0x3cf68a['on'](_0x336f8f(0x245),(_0x204162,_0x5c8745)=>{const _0x1f016f=_0x336f8f;if(validateAccess(_0x5c8745,_0xa465b7)[_0x1f016f(0x218)])toggleBot(_0x204162[_0x1f016f(0x256)],_0x204162[_0x1f016f(0x20a)],_0x204162[_0x1f016f(0x1a5)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3cf68a['on'](_0x336f8f(0x1dc),(_0x5b6006,_0x567c58)=>{const _0x318b2d=_0x336f8f;if(validateAccess(_0x567c58,_0xa465b7)[_0x318b2d(0x218)])toggleBotMode(_0x5b6006);else logging(_0x318b2d(0x243));}),_0x3cf68a['on'](_0x336f8f(0x26d),(_0x2fc5dd,_0x1a7623)=>{const _0x4f3cee=_0x336f8f;if(validateAccess(_0x1a7623,_0xa465b7)[_0x4f3cee(0x218)])deleteBot(_0x2fc5dd);else logging(_0x4f3cee(0x188));}),_0x3cf68a['on'](_0x336f8f(0x1ea),(_0x1b107e,_0x56d82e)=>{const _0x54c20e=_0x336f8f;if(validateAccess(_0x56d82e,_0xa465b7)[_0x54c20e(0x218)])storeSettings(_0x1b107e,!![]);else logging(_0x54c20e(0x275));}),_0x3cf68a['on'](_0x336f8f(0x1ac),_0x496fde=>{const _0x3a5358=_0x336f8f;if(validateAccess(_0x496fde,_0xa465b7)[_0x3a5358(0x218)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3cf68a['on'](_0x336f8f(0x274),_0x87dbf=>{const _0x2cb0a5=_0x336f8f;if(validateAccess(_0x87dbf,_0xa465b7)[_0x2cb0a5(0x218)]){if(devices[_0xa465b7][_0x2cb0a5(0x12c)])clearTimeout(devices[_0xa465b7]['pidRefreshToken']);if(devices[_0xa465b7][_0x2cb0a5(0x212)])clearTimeout(devices[_0xa465b7][_0x2cb0a5(0x212)]);removeSocketListeners(getClient(_0x3cf68a['id'])['uuid']),addBlacklist(_0xa465b7),devices[_0xa465b7]['telegramIpApproval']=null,devices[_0xa465b7][_0x2cb0a5(0x209)]=null,devices[_0xa465b7][_0x2cb0a5(0x1c9)][_0x2cb0a5(0x1e3)]=null,io['to'](getClient(_0x3cf68a['id'])[_0x2cb0a5(0x1e7)])[_0x2cb0a5(0x1ec)]('status',{'access':{'allow':![],'reason':_0x2cb0a5(0x1eb),'token':null}});}else logging(_0x2cb0a5(0x1c1));});}function initializeSocketBot(_0x1b8436){const _0x20eaf7=_0x3d59f8,_0x59ba32=getClient(_0x1b8436['id'])['bot'],_0x4bb636=getClient(_0x1b8436['id'])[_0x20eaf7(0x1e7)];_0x1b8436['on']('get-logs',(_0xf5b979,_0x450836)=>{const _0x2bb8e1=_0x20eaf7;if(validateAccess(_0x450836,_0x4bb636)['allow']){if(pid[_0x59ba32])pid[_0x59ba32][_0x2bb8e1(0x1c0)]({'function':_0x2bb8e1(0x25f),'args':_0xf5b979});}else logging(_0x2bb8e1(0x126));}),_0x1b8436['on']('delete-alerts',(_0x57b98f,_0x2941e9)=>{const _0x3f50d=_0x20eaf7;if(validateAccess(_0x2941e9,_0x4bb636)[_0x3f50d(0x218)]){if(pid[_0x59ba32])pid[_0x59ba32][_0x3f50d(0x1c0)]({'function':_0x3f50d(0x1de),'args':_0x57b98f});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x1b8436['on'](_0x20eaf7(0x203),(_0x2d746f,_0x1f08de)=>{const _0x463060=_0x20eaf7;if(validateAccess(_0x1f08de,_0x4bb636)[_0x463060(0x218)]){if(pid[_0x59ba32])pid[_0x59ba32][_0x463060(0x1c0)]({'function':'getPortfolio','args':_0x2d746f});}else logging(_0x463060(0x1f8));}),_0x1b8436['on']('store-configuration',(_0x54b146,_0x4201d8)=>{const _0x33b744=_0x20eaf7;if(validateAccess(_0x4201d8,_0x4bb636)[_0x33b744(0x218)]){if(pid[_0x59ba32])pid[_0x59ba32]['send']({'function':_0x33b744(0x273),'args':_0x54b146});}else logging(_0x33b744(0x18f));}),_0x1b8436['on'](_0x20eaf7(0x1e1),(_0x3d6e16,_0x4963aa)=>{const _0x2c3e69=_0x20eaf7;if(validateAccess(_0x4963aa,_0x4bb636)[_0x2c3e69(0x218)]){if(pid[_0x59ba32])pid[_0x59ba32][_0x2c3e69(0x1c0)]({'function':_0x2c3e69(0x204),'args':_0x3d6e16});}else logging(_0x2c3e69(0x18c));}),_0x1b8436['on'](_0x20eaf7(0x236),_0x5ddf60=>{const _0x50f87d=_0x20eaf7;if(validateAccess(_0x5ddf60,_0x4bb636)['allow']){if(pid[_0x59ba32])pid[_0x59ba32][_0x50f87d(0x1c0)]({'function':_0x50f87d(0x174),'args':null});}else logging(_0x50f87d(0x184));}),_0x1b8436['on']('place-order',(_0x3dfb87,_0x221d13)=>{const _0xaf63d5=_0x20eaf7;if(validateAccess(_0x221d13,_0x4bb636)[_0xaf63d5(0x218)]){if(pid[_0x59ba32])pid[_0x59ba32][_0xaf63d5(0x1c0)]({'function':_0xaf63d5(0x12e),'args':_0x3dfb87});}else logging(_0xaf63d5(0x253));}),_0x1b8436['on'](_0x20eaf7(0x260),_0xe54e7a=>{const _0x2aafa1=_0x20eaf7;if(validateAccess(_0xe54e7a,_0x4bb636)['allow']){if(pid[_0x59ba32])pid[_0x59ba32][_0x2aafa1(0x1c0)]({'function':_0x2aafa1(0x199),'args':null});}else logging(_0x2aafa1(0x244));}),_0x1b8436['on'](_0x20eaf7(0x274),_0x35d488=>{const _0x5561d2=_0x20eaf7;if(validateAccess(_0x35d488,_0x4bb636)[_0x5561d2(0x218)]){if(devices[_0x4bb636][_0x5561d2(0x12c)])clearTimeout(devices[_0x4bb636][_0x5561d2(0x12c)]);if(devices[_0x4bb636]['pidExpireLogin'])clearTimeout(devices[_0x4bb636]['pidExpireLogin']);removeSocketListeners(getClient(_0x1b8436['id'])['uuid']),addBlacklist(_0x4bb636),devices[_0x4bb636][_0x5561d2(0x1c8)]=null,devices[_0x4bb636]['telegram2FaApproval']=null,devices[_0x4bb636][_0x5561d2(0x1c9)][_0x5561d2(0x1e3)]=null,io['to'](getClient(_0x1b8436['id'])[_0x5561d2(0x1e7)])['emit']('status',{'access':{'allow':![],'reason':_0x5561d2(0x1eb),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1fa409){getClientsWithUuid(_0x1fa409)['forEach'](_0x4b16a2=>{const _0x50fd5e=_0x3fb5;getSocket(_0x4b16a2['id'])[_0x50fd5e(0x1be)]();});}function cleanSettings(){const _0x248c24=_0x3d59f8;let _0x11e89d=settings;return settings[_0x248c24(0x135)]&&settings[_0x248c24(0x135)]!=''&&(_0x11e89d={..._0x11e89d,'telegramToken':_0x248c24(0x19f)}),settings['bbPassword']&&settings[_0x248c24(0x1f9)]!=''&&(_0x11e89d={..._0x11e89d,'bbPassword':_0x248c24(0x19f)}),_0x11e89d;}function updateBB(){const _0x4b9f9a=_0x3d59f8;installingUpdate=!![],config[_0x4b9f9a(0x178)](_0x1799f2=>{const _0x753e44=_0x4b9f9a;restartBot(_0x1799f2[_0x753e44(0x256)]);}),process['send']({'update':!![]},_0x398f9f=>{});}function startBot(_0x1ab0c4,_0x90c6a1,_0x3690b8){const _0x4e48f3=_0x3d59f8;let _0x515668=![];const _0x539aa9=_0x1ab0c4[0x0];_0x90c6a1={..._0x90c6a1,'stdio':['inherit','inherit',_0x4e48f3(0x17a),_0x4e48f3(0x1ad)]},pid[_0x539aa9]=childProcess['fork'](botfile,_0x1ab0c4,_0x90c6a1),pid[_0x539aa9]['on'](_0x4e48f3(0x173),_0x4894f8=>{const _0x52c444=_0x4e48f3;switch(Object[_0x52c444(0x142)](_0x4894f8)[0x0]){case'botname':updateBotName(_0x539aa9,_0x4894f8[_0x52c444(0x18e)]);break;case _0x52c444(0x166):updateBotManager();break;case'status':updateStatus(_0x539aa9,_0x4894f8['status']);break;case _0x52c444(0x1a5):updateLive(_0x539aa9,_0x4894f8['live']);break;case _0x52c444(0x118):updateLive(_0x539aa9,_0x4894f8[_0x52c444(0x118)]),io['to'](_0x539aa9)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x52c444(0x15c):_0x4894f8[_0x52c444(0x15c)]==_0x52c444(0x21a)&&restartBot(_0x539aa9);_0x4894f8[_0x52c444(0x15c)]=='kill'&&toggleBot(_0x539aa9,_0x52c444(0x272),_0x52c444(0x12f));break;case _0x52c444(0x196):sendTelegram(_0x539aa9,_0x4894f8[_0x52c444(0x196)]);break;case _0x52c444(0x255):io['to'](_0x539aa9)['emit'](_0x4894f8[_0x52c444(0x255)],_0x4894f8[_0x52c444(0x20f)]);break;}}),pid[_0x539aa9]['on'](_0x4e48f3(0x223),function(_0x34eb0c){if(_0x515668)return;_0x515668=!![],_0x3690b8(_0x34eb0c);}),pid[_0x539aa9]['on'](_0x4e48f3(0x144),function(_0xdfe662){const _0x259897=_0x4e48f3;if(installingUpdate)return;if(_0x515668)return;_0x515668=!![],_0x3690b8(null);const _0x3591c1=dbConfig[_0x259897(0x1c6)]('bots')[_0x259897(0x1a4)]({'botID':_0x539aa9})['value']();_0x3591c1&&(_0x3591c1['status']=='enabled'||_0x3591c1[_0x259897(0x20a)]=='new')&&(updateLive(_0x539aa9,_0x259897(0x12f)),logging(_0x259897(0x24a)+_0x539aa9),startBot([_0x539aa9,userID],{'cwd':bbpath},function(_0x2c8ad0){if(_0x2c8ad0)logging(_0x2c8ad0);}));});}function stopBot(_0x2a01ab){const _0x297202=_0x3d59f8;getClientsWithBotID(_0x2a01ab)[_0x297202(0x178)](_0x232d97=>{const _0x59326b=_0x297202;getSocket(_0x232d97['id'])[_0x59326b(0x20c)](!![]),removeClient(_0x232d97['id']);}),pid[_0x2a01ab]&&(pid[_0x2a01ab][_0x297202(0x26e)](),pid[_0x2a01ab]=null);}function restartBot(_0x14c50c){const _0x4e84f4=_0x3d59f8;if(pid[_0x14c50c])pid[_0x14c50c][_0x4e84f4(0x26e)]();}function addBot(){const _0x4505ac=_0x3d59f8;let _0x41c47f;for(let _0x391110=0x1;_0x391110<0x3e9;_0x391110++){_0x41c47f=_0x391110['toString']()['padStart'](0x3,'0');let _0x2134e5=config[_0x4505ac(0x1a4)](_0xa1c972=>_0xa1c972[_0x4505ac(0x256)]==_0x41c47f);if(!_0x2134e5)break;}if(_0x41c47f===_0x4505ac(0x1f5)){logging(_0x4505ac(0x15f));return;}logging(_0x4505ac(0x160)+_0x41c47f),dbConfig['get'](_0x4505ac(0x267))['push']({'botID':_0x41c47f,'botname':'Bot\x20'+_0x41c47f,'status':'new','live':''})['write'](),startBot([_0x41c47f,userID],{'cwd':bbpath},function(_0x55a1c2){if(_0x55a1c2)logging(_0x55a1c2);}),config=getConfiguration(),io['to'](_0x4505ac(0x226))['emit'](_0x4505ac(0x267),config);}function deleteBot(_0x3f01d4){const _0x85b5f2=_0x3d59f8;getClientsWithBotID(_0x3f01d4)[_0x85b5f2(0x178)](_0x35636b=>{getSocket(_0x35636b['id'])['disconnect'](!![]),removeClient(_0x35636b['id']);}),dbConfig['get'](_0x85b5f2(0x267))[_0x85b5f2(0x264)]({'botID':_0x3f01d4})[_0x85b5f2(0x1c7)](),logging(_0x85b5f2(0x1d3)+_0x3f01d4),stopBot(_0x3f01d4);try{fs[_0x85b5f2(0x240)](path['join'](configpath,'bot-'+_0x3f01d4+_0x85b5f2(0x1a8))),fs[_0x85b5f2(0x240)](path[_0x85b5f2(0x219)](configpath,_0x85b5f2(0x1cc)+_0x3f01d4+_0x85b5f2(0x15b))),fs[_0x85b5f2(0x240)](path[_0x85b5f2(0x219)](configpath,_0x85b5f2(0x1cc)+_0x3f01d4+_0x85b5f2(0x200))),fs[_0x85b5f2(0x240)](path[_0x85b5f2(0x219)](configpath,_0x85b5f2(0x1cc)+_0x3f01d4+_0x85b5f2(0x1cd)));}catch(_0x48d374){if(_0x48d374)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x48d374);}config=getConfiguration(),io['to']('botmanager')[_0x85b5f2(0x1ec)](_0x85b5f2(0x267),config);}function toggleBot(_0x1564a5,_0x29dbda,_0x1e59e8){const _0x20a1e1=_0x3d59f8;dbConfig[_0x20a1e1(0x1c6)](_0x20a1e1(0x267))[_0x20a1e1(0x1a4)]({'botID':_0x1564a5})[_0x20a1e1(0x237)]({'status':_0x29dbda})[_0x20a1e1(0x237)]({'live':_0x1e59e8})[_0x20a1e1(0x1c7)]();if(_0x29dbda==_0x20a1e1(0x26c)||_0x29dbda=='new')logging('enabled\x20Bot\x20'+_0x1564a5),startBot([_0x1564a5,userID],{'cwd':bbpath},function(_0x111cba){if(_0x111cba)logging(_0x111cba);});else(_0x29dbda==_0x20a1e1(0x272)||_0x29dbda==_0x20a1e1(0x238))&&(logging('disabled\x20Bot\x20'+_0x1564a5),stopBot(_0x1564a5));config=getConfiguration(),io['to']('botmanager')['emit'](_0x20a1e1(0x267),config);}function toggleStatus(_0x27abad){const _0x2fd252=_0x3d59f8;let _0x14f8ab=dbConfig['get'](_0x2fd252(0x267))[_0x2fd252(0x1a4)]({'botID':_0x27abad})[_0x2fd252(0x230)](),_0x3a1743;if(_0x14f8ab[_0x2fd252(0x20a)]===_0x2fd252(0x26c))_0x3a1743=_0x2fd252(0x272);else{if(_0x14f8ab['status']==='new')_0x3a1743='new-disabled';else{if(_0x14f8ab[_0x2fd252(0x20a)]==='new-disabled')_0x3a1743=_0x2fd252(0x19b);else{if(_0x14f8ab[_0x2fd252(0x20a)]==='disabled')_0x3a1743=_0x2fd252(0x26c);}}}return _0x3a1743;}function updateStatus(_0x567afe,_0x5a14bc){const _0x5e4598=_0x3d59f8;dbConfig[_0x5e4598(0x1c6)](_0x5e4598(0x267))['find']({'botID':_0x567afe})['assign']({'status':_0x5a14bc})[_0x5e4598(0x1c7)](),config=getConfiguration(),io['to'](_0x5e4598(0x226))[_0x5e4598(0x1ec)](_0x5e4598(0x267),config);}function _0x3fb5(_0x2d4710,_0x46747a){const _0x2594e6=_0x6543();return _0x3fb5=function(_0x227571,_0x39dc51){_0x227571=_0x227571-0x117;let _0x6543f1=_0x2594e6[_0x227571];return _0x6543f1;},_0x3fb5(_0x2d4710,_0x46747a);}function updateLive(_0x468dd4,_0x214f35){const _0x3b3d5=_0x3d59f8;dbConfig['get'](_0x3b3d5(0x267))[_0x3b3d5(0x1a4)]({'botID':_0x468dd4})[_0x3b3d5(0x237)]({'live':_0x214f35})[_0x3b3d5(0x1c7)](),config=getConfiguration(),io['to']('botmanager')[_0x3b3d5(0x1ec)](_0x3b3d5(0x267),config);}function updateBotName(_0x2e1a91,_0x227380){const _0x1914b6=_0x3d59f8;dbConfig[_0x1914b6(0x1c6)](_0x1914b6(0x267))['find']({'botID':_0x2e1a91})[_0x1914b6(0x237)]({'botname':_0x227380})[_0x1914b6(0x1c7)](),config=getConfiguration(),io['to'](_0x1914b6(0x226))[_0x1914b6(0x1ec)]('bots',config);}function updateBotManager(){const _0x3dd34d=_0x3d59f8;config=getConfiguration(),io['to'](_0x3dd34d(0x226))[_0x3dd34d(0x1ec)]('bots',config);}function toggleBotMode(_0x45b628){const _0x4bd38c=_0x3d59f8;if(pid[_0x45b628])pid[_0x45b628][_0x4bd38c(0x1c0)]({'function':_0x4bd38c(0x1a2),'args':null});else{const _0x2abaca=configpath+'bot-'+_0x45b628+'-config.json',_0x58c76a=fs[_0x4bd38c(0x1cf)](_0x2abaca),_0x4c91e3=JSON[_0x4bd38c(0x140)](_0x58c76a),_0x2ddfbf=_0x4c91e3[_0x4bd38c(0x21e)][0x0]['headless'];_0x4c91e3['bot'][0x0][_0x4bd38c(0x17c)]=!_0x2ddfbf;const _0x266f32=JSON['stringify'](_0x4c91e3,null,0x2);fs[_0x4bd38c(0x1c3)](_0x2abaca,_0x266f32),config=getConfiguration(),io['to'](_0x4bd38c(0x226))[_0x4bd38c(0x1ec)](_0x4bd38c(0x267),config);}}function telegramError(_0x5a4aa7){const _0x40adbd=_0x3d59f8;console['log'](getTimeStamp()+_0x40adbd(0x21b));}function validateTelegram(_0xbf415){const _0x5d4197=_0x3d59f8;if(_0xbf415[_0x5d4197(0x181)][_0x5d4197(0x120)]!=settings[_0x5d4197(0x156)]&&'@'+_0xbf415[_0x5d4197(0x181)][_0x5d4197(0x120)]!=settings[_0x5d4197(0x156)])return tgBot['sendMessage'](_0xbf415['chat']['id'],_0x5d4197(0x18b),{'parse_mode':'HTML'})[_0x5d4197(0x122)](_0x210485=>{telegramError(_0x210485);}),![];return!![];}function _0x6543(){const _0x1640d6=['/on\x20-\x20start\x20bot(s)\x0a','length','Login\x20accepted','2FA\x20login\x20required','404\x20Not\x20Found','defaults','getUTCHours','constructor','toIPv4Address','bot.js','\x20>\x20','removeAllListeners','page','send','Unauthorized\x20attempt\x20to\x20log\x20out','10cKtOCn','writeFileSync','\x20to\x20','Notifications\x20enabled\x0a','get','write','telegramIpApproval','access','host','RSA','bot-','-results.json','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','readFileSync','use','reset-password','loginRequired','deleted\x20Bot\x20','publicKey','event','Orders','login','Ok,\x20will\x20send\x20alert\x20notifications\x20only','show','207267cisdwX','max','toggle-bot-mode','9bDvBgj','deleteHistoryAlerts','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','clientip','store-headless','exp','token','/:bot/configuration','All','::1','uuid','search','whitelistEnabled','store-settings','logged\x20out','emit','add-bot','bb-config.json','copyFileSync','Crypt','timeshift','build','type','getHours','1000','User\x20has\x20been\x20validated','<b>Balance\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','bbPassword','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','running','secure','filter','expiry','Invalid\x20authentication\x20token\x20(1)','-performance.json','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','notification','get-portfolio','storeHeadless','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','<b>Telegram\x20Bot\x20Status:</b>\x0a','login\x20required','version.json','telegram2FaApproval','status','Invalid\x20Telegram\x20token','disconnect','2FA','apply','args','bb/','getFullYear','pidExpireLogin','once','reason','handshake','alerts','env','allow','join','restart',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/status\x20-\x20show\x20bot(s)\x20status\x0a','manual','bot','index.html','accept','2FA\x20required','push','error','getSeconds','orders','botmanager','randomFillSync','Token\x20blacklisted','/disable\x20-\x20disable\x20notifications\x0a','secret','privateKey','\x20mode','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','auth','removeListener','value','reload','::ffff:127.0.0.1','showname',':\x20Bot\x20Mgr\x20>\x20','2FA\x20login\x20token\x20generated','get-starting-balances','assign','new-disabled','backup/','/help\x20-\x20show\x20available\x20commands\x0a','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Notifications\x20disabled','build2','remoteAddress','SIGINT','unlinkSync','path','ipaddr.js','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','update-bot','existsSync','(((.+)+)+)+$','ipv6','getTime','restarting\x20Bot\x20','includes','socket.io','map','success','bbUsername','getMinutes','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','argv','function','botID','Bot\x20','Error:\x20Invalid\x20argument\x20','HTML','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Balance\x20Bot\x20Server','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','temporaryAccessAllowed','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','emitHistory','cancel-loading','settings.','UA-192771731-1','toString','remove','store','callback_query','bots','log','bb-secure.json','NTBA_FIX_319','set','enabled','delete-bot','kill','static','1268464dFQApZ','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','disabled','storeConfiguration','logout','Unauthorized\x20attempt\x20to\x20update\x20settings','invalid\x20credentials','hybrid-crypto-js','blacklist','started','login\x20token\x20generated','f2aRequired','port','all','http','hasOwnProperty','crypto','username','order','catch','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','mkdirSync','sendFile','Unauthorized\x20attempt\x20to\x20get\x20logs','version','entries','Unauthorized\x20attempt\x20to\x20add\x20bot','yes','padStart','pidRefreshToken','stopPolling','placeOrder','stopped','listen','password','hashSync','Notifications\x20disabled\x0a','/enable\x20-\x20enable\x20notifications\x0a','telegramToken','express','temporary\x20access\x20timeout','telegramChatId','\x20only\x0a','sha256','sendMessage','default','All\x20bots','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','match','parse','polling_error','keys','temporary\x20access\x20not\x20allowed','exit','decrypt','onText','user','</b>\x20?','date-fns','referer','Password\x20reset\x20rejected','randomBytes','/names\x20-\x20show\x20bot\x20names\x0a','2XggMJK','Alerts','Temporary\x20access\x20rejected','add','server','settings','config/','3747940aoTipl','telegramUsername','3875640jQlaxM','lowdb/adapters/FileSync','/restart\x20-\x20restart\x20bot(s)\x0a','reject','-events.json','stop','slice','answerCallbackQuery','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','starting\x20new\x20bot\x20|\x20Bot\x20','127.0.0.1','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','getDate','Invalid\x20IP\x20address','conn','updatebotmanager','idling\x20bot\x20\x20\x20|\x20Bot\x20','Access\x20enabled\x20for\x20','analytics','connection','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','bcryptjs','chat','telegramEvents','Balance\x20Bot','starting\x20bot\x20|\x20Bot\x20','then','\x20|\x20','message','getStartingBalances','/off\x20-\x20stop\x20bot(s)\x0a','sortBy','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','forEach','4646068QRPHcD','inherit','isDirectory','headless','data','telegramEnabled','timestamp','3000','from','node-telegram-bot-api','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','703771ZkqzbW','isValid','2FA\x20login\x20rejected','Unauthorized\x20attempt\x20to\x20delete\x20bot','sockets','auto','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','sign','botname','Unauthorized\x20attempt\x20to\x20store\x20configuration','whitelist','Ok,\x20will\x20send\x20order\x20notifications\x20only','5\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','connected','jsonwebtoken','telegram','/:bot','apiKey','cancelLoading','split','new','/:bot/support','All\x20bots\x20running\x20right\x20now','lowdb','************','/:bot/performance','initclient','toggleBotMode','-----------------------------------------------------------------------------------','find','live','login\x20not\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','-config.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/:bot/history','verify','update-bb','ipc','1069596iGAJKe','encryptedUuid','compareSync','temporary\x20token\x20generated','mode'];_0x6543=function(){return _0x1640d6;};return _0x6543();}async function initTelegram(){const _0x2a6f4c=_0x3d59f8;if(tgBot)tgBot[_0x2a6f4c(0x12d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2a6f4c(0x135)],{'polling':!![]});let _0x2fd014=_0x2a6f4c(0x1a7);_0x2fd014+='\x0a',_0x2fd014+=_0x2a6f4c(0x134),_0x2fd014+=_0x2a6f4c(0x229),_0x2fd014+=_0x2a6f4c(0x22d),_0x2fd014+=_0x2a6f4c(0x159),_0x2fd014+=_0x2a6f4c(0x1b3),_0x2fd014+=_0x2a6f4c(0x175),_0x2fd014+=_0x2a6f4c(0x25e),_0x2fd014+=_0x2a6f4c(0x14d),_0x2fd014+=_0x2a6f4c(0x21c),_0x2fd014+=_0x2a6f4c(0x23a);let _0x4a074c=_0x2a6f4c(0x271);_0x4a074c+='\x0a',_0x4a074c+=_0x2fd014,tgBot['onText'](/\/start/,_0x3cbf64=>{const _0x5aa5e1=_0x2a6f4c;if(!validateTelegram(_0x3cbf64))return;if(settings[_0x5aa5e1(0x138)]!=_0x3cbf64[_0x5aa5e1(0x16d)]['id'])updateSetting(_0x5aa5e1(0x138),_0x3cbf64[_0x5aa5e1(0x16d)]['id']);updateSetting(_0x5aa5e1(0x17e),!![]),tgBot[_0x5aa5e1(0x13b)](_0x3cbf64[_0x5aa5e1(0x16d)]['id'],_0x4a074c)[_0x5aa5e1(0x122)](_0x3f1b53=>{telegramError(_0x3f1b53);});}),tgBot[_0x2a6f4c(0x146)](/\/enable/,_0x42ab86=>{const _0x41f1dd=_0x2a6f4c;if(!validateTelegram(_0x42ab86))return;if(settings[_0x41f1dd(0x138)]!=_0x42ab86['chat']['id'])updateSetting(_0x41f1dd(0x138),_0x42ab86[_0x41f1dd(0x16d)]['id']);updateSetting(_0x41f1dd(0x17e),!![]),tgBot[_0x41f1dd(0x13b)](_0x42ab86[_0x41f1dd(0x16d)]['id'],'Notifications\x20enabled')[_0x41f1dd(0x122)](_0x325edf=>{telegramError(_0x325edf);});}),tgBot[_0x2a6f4c(0x146)](/\/config/,async _0xe85349=>{const _0x45489d=_0x2a6f4c;if(!validateTelegram(_0xe85349))return;tgBot[_0x45489d(0x22f)](_0x45489d(0x266)),tgBot['sendMessage'](_0xe85349[_0x45489d(0x16d)]['id'],_0x45489d(0x1a9),{'reply_markup':{'inline_keyboard':[[{'text':_0x45489d(0x1d6),'callback_data':'orders'},{'text':_0x45489d(0x14f),'callback_data':_0x45489d(0x216)},{'text':_0x45489d(0x1e5),'callback_data':'all'}]]}})[_0x45489d(0x122)](_0xe4d36d=>{telegramError(_0xe4d36d);}),tgBot['on'](_0x45489d(0x266),async _0x3cacde=>{const _0x1f82e9=_0x45489d,_0x2e7dc8=_0x3cacde[_0x1f82e9(0x17d)],_0x2ff3bd=_0x3cacde[_0x1f82e9(0x173)];tgBot[_0x1f82e9(0x15e)](_0x3cacde['id'])[_0x1f82e9(0x171)](async()=>{const _0x2995a0=_0x1f82e9;_0x2e7dc8==_0x2995a0(0x225)&&(updateSetting('telegramEvents',_0x2995a0(0x225)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x2ff3bd[_0x2995a0(0x16d)]['id'],_0x2995a0(0x191))['catch'](_0x2c846e=>{telegramError(_0x2c846e);}));_0x2e7dc8=='alerts'&&(updateSetting(_0x2995a0(0x16e),_0x2995a0(0x216)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2995a0(0x13b)](_0x2ff3bd[_0x2995a0(0x16d)]['id'],_0x2995a0(0x1d8))['catch'](_0x4e4b18=>{telegramError(_0x4e4b18);}));_0x2e7dc8==_0x2995a0(0x11c)&&(updateSetting(_0x2995a0(0x16e),_0x2995a0(0x11c)),updateSetting(_0x2995a0(0x17e),!![]),await tgBot[_0x2995a0(0x13b)](_0x2ff3bd[_0x2995a0(0x16d)]['id'],_0x2995a0(0x123))[_0x2995a0(0x122)](_0x3680a7=>{telegramError(_0x3680a7);}));if(!settings[_0x2995a0(0x138)])tgBot[_0x2995a0(0x13b)](_0x2ff3bd[_0x2995a0(0x16d)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2995a0(0x122)](_0x4177db=>{telegramError(_0x4177db);});}),tgBot[_0x1f82e9(0x22f)]('callback_query');});}),tgBot[_0x2a6f4c(0x146)](/\/status/,_0x374e8d=>{const _0x4f6e1c=_0x2a6f4c;if(!validateTelegram(_0x374e8d))return;const _0x155bea=getBotsWithMode();let _0x261741=_0x4f6e1c(0x1f7);config[_0x4f6e1c(0x178)](_0x2b7eda=>{const _0x156ee9=_0x4f6e1c,_0x2c1d25=_0x155bea[_0x156ee9(0x1a4)](_0x35fbaa=>_0x35fbaa['botID']==_0x2b7eda[_0x156ee9(0x256)])[_0x156ee9(0x1b2)];_0x261741+=_0x156ee9(0x257)+_0x2b7eda[_0x156ee9(0x256)]+':\x20'+_0x2b7eda[_0x156ee9(0x20a)]+_0x156ee9(0x172)+_0x2c1d25+_0x156ee9(0x172)+_0x2b7eda['live']+'\x0a';}),_0x261741+='\x0a',_0x261741+=_0x4f6e1c(0x206),_0x261741+=!settings[_0x4f6e1c(0x17e)]?_0x4f6e1c(0x133):_0x4f6e1c(0x1c5),_0x261741+=settings[_0x4f6e1c(0x17e)]?settings[_0x4f6e1c(0x16e)]==_0x4f6e1c(0x11c)?_0x4f6e1c(0x205):'Notifications\x20types:\x20'+settings[_0x4f6e1c(0x16e)]+_0x4f6e1c(0x139):'',tgBot[_0x4f6e1c(0x13b)](_0x374e8d[_0x4f6e1c(0x16d)]['id'],_0x261741,{'parse_mode':_0x4f6e1c(0x259)})[_0x4f6e1c(0x122)](_0x580195=>{telegramError(_0x580195);});}),tgBot['onText'](/\/restart/,_0x5ccb7f=>{const _0x1acd55=_0x2a6f4c;if(!validateTelegram(_0x5ccb7f))return;tgBot[_0x1acd55(0x22f)](_0x1acd55(0x266));const _0x2763ef=getEnabledBots();if(_0x2763ef[_0x1acd55(0x1b4)]==0x0)tgBot[_0x1acd55(0x13b)](_0x5ccb7f['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2f81a9=>{telegramError(_0x2f81a9);});else{if(_0x2763ef[_0x1acd55(0x1b4)]>0x1)_0x2763ef['push']({'botID':'all'});let _0x4138a1=[],_0x459012=[];const _0x330983=_0x2763ef[_0x1acd55(0x1b4)]%0x4==0x0||_0x2763ef[_0x1acd55(0x1b4)]%0x4==0x3||_0x2763ef[_0x1acd55(0x1b4)]%0x3==0x1?0x4:0x3;let _0x5af20f=0x0;_0x2763ef[_0x1acd55(0x178)]((_0x207973,_0x2a602b)=>{const _0x98a8fa=_0x1acd55;if(_0x2a602b%_0x330983==0x0)_0x459012=[];_0x459012[_0x98a8fa(0x222)]({'text':_0x207973[_0x98a8fa(0x256)]==_0x98a8fa(0x11c)?_0x98a8fa(0x13d):_0x98a8fa(0x257)+_0x207973[_0x98a8fa(0x256)],'callback_data':_0x207973[_0x98a8fa(0x256)]}),_0x2a602b%_0x330983==0x0&&(_0x4138a1[_0x5af20f]=_0x459012,_0x5af20f++);}),tgBot[_0x1acd55(0x13b)](_0x5ccb7f[_0x1acd55(0x16d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x4138a1}})['catch'](_0x45cee3=>{telegramError(_0x45cee3);}),tgBot['on'](_0x1acd55(0x266),async _0x5f1b78=>{const _0x4f7be4=_0x1acd55,_0x161f73=_0x5f1b78[_0x4f7be4(0x17d)],_0x2e8be5=_0x5f1b78[_0x4f7be4(0x173)];tgBot[_0x4f7be4(0x15e)](_0x5f1b78['id'])[_0x4f7be4(0x171)](async()=>{const _0x15cc6e=_0x4f7be4;_0x161f73==_0x15cc6e(0x11c)?(tgBot['sendMessage'](_0x2e8be5[_0x15cc6e(0x16d)]['id'],_0x15cc6e(0x162))[_0x15cc6e(0x122)](_0x40cf8b=>{telegramError(_0x40cf8b);}),config[_0x15cc6e(0x178)](_0x17f6f9=>{const _0x3edc92=_0x15cc6e;restartBot(_0x17f6f9[_0x3edc92(0x256)]);})):(tgBot[_0x15cc6e(0x13b)](_0x2e8be5[_0x15cc6e(0x16d)]['id'],_0x15cc6e(0x1fa)+_0x161f73)['catch'](_0x5cc262=>{telegramError(_0x5cc262);}),restartBot(_0x161f73));}),tgBot[_0x4f7be4(0x22f)]('callback_query');});}}),tgBot[_0x2a6f4c(0x146)](/\/on/,_0x337287=>{const _0x35c909=_0x2a6f4c;if(!validateTelegram(_0x337287))return;tgBot[_0x35c909(0x22f)](_0x35c909(0x266));const _0xfe0eb0=getDisabledBots();if(_0xfe0eb0[_0x35c909(0x1b4)]==0x0)tgBot[_0x35c909(0x13b)](_0x337287[_0x35c909(0x16d)]['id'],_0x35c909(0x19d))['catch'](_0x124d2a=>{telegramError(_0x124d2a);});else{if(_0xfe0eb0['length']>0x1)_0xfe0eb0[_0x35c909(0x222)]({'botID':_0x35c909(0x11c)});let _0x1dd6e8=[],_0x4be177=[];const _0x7b8dd=_0xfe0eb0['length']%0x4==0x0||_0xfe0eb0[_0x35c909(0x1b4)]%0x4==0x3||_0xfe0eb0[_0x35c909(0x1b4)]%0x3==0x1?0x4:0x3;let _0x5aa73f=0x0;_0xfe0eb0[_0x35c909(0x178)]((_0x143e98,_0x1e0d96)=>{const _0x3d0a0e=_0x35c909;if(_0x1e0d96%_0x7b8dd==0x0)_0x4be177=[];_0x4be177[_0x3d0a0e(0x222)]({'text':_0x143e98[_0x3d0a0e(0x256)]==_0x3d0a0e(0x11c)?_0x3d0a0e(0x13d):'Bot\x20'+_0x143e98[_0x3d0a0e(0x256)],'callback_data':_0x143e98[_0x3d0a0e(0x256)]}),_0x1e0d96%_0x7b8dd==0x0&&(_0x1dd6e8[_0x5aa73f]=_0x4be177,_0x5aa73f++);}),tgBot[_0x35c909(0x13b)](_0x337287[_0x35c909(0x16d)]['id'],_0x35c909(0x16b),{'reply_markup':{'inline_keyboard':_0x1dd6e8}})[_0x35c909(0x122)](_0x3acd68=>{telegramError(_0x3acd68);}),tgBot['on'](_0x35c909(0x266),async _0x2c4668=>{const _0x2a1a28=_0x35c909,_0x13212b=_0x2c4668[_0x2a1a28(0x17d)],_0x3995d1=_0x2c4668[_0x2a1a28(0x173)];tgBot[_0x2a1a28(0x15e)](_0x2c4668['id'])[_0x2a1a28(0x171)](async()=>{const _0x57c43e=_0x2a1a28;_0x13212b=='all'?(tgBot['sendMessage'](_0x3995d1[_0x57c43e(0x16d)]['id'],_0x57c43e(0x1ce))[_0x57c43e(0x122)](_0x41945f=>{telegramError(_0x41945f);}),_0xfe0eb0[_0x57c43e(0x178)](_0x1f49a2=>{const _0x23f7ec=_0x57c43e;if(_0x1f49a2[_0x23f7ec(0x256)]!=_0x23f7ec(0x11c))toggleBot(_0x1f49a2[_0x23f7ec(0x256)],toggleStatus(_0x1f49a2['botID']),_0x23f7ec(0x12f));})):(tgBot[_0x57c43e(0x13b)](_0x3995d1[_0x57c43e(0x16d)]['id'],_0x57c43e(0x1df)+_0x13212b)[_0x57c43e(0x122)](_0x2fa004=>{telegramError(_0x2fa004);}),toggleBot(_0x13212b,toggleStatus(_0x13212b),_0x57c43e(0x12f)));}),tgBot[_0x2a1a28(0x22f)]('callback_query');});}}),tgBot[_0x2a6f4c(0x146)](/\/off/,_0x43f7ab=>{const _0x1c91f1=_0x2a6f4c;if(!validateTelegram(_0x43f7ab))return;tgBot[_0x1c91f1(0x22f)](_0x1c91f1(0x266));const _0x424ea7=getEnabledBots();if(_0x424ea7[_0x1c91f1(0x1b4)]==0x0)tgBot[_0x1c91f1(0x13b)](_0x43f7ab[_0x1c91f1(0x16d)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x211719=>{telegramError(_0x211719);});else{if(_0x424ea7[_0x1c91f1(0x1b4)]>0x1)_0x424ea7[_0x1c91f1(0x222)]({'botID':_0x1c91f1(0x11c)});let _0x5aae6f=[],_0x2f4c97=[];const _0x47c3c1=_0x424ea7['length']%0x4==0x0||_0x424ea7[_0x1c91f1(0x1b4)]%0x4==0x3||_0x424ea7['length']%0x3==0x1?0x4:0x3;let _0x3530ed=0x0;_0x424ea7[_0x1c91f1(0x178)]((_0x53a228,_0x7c8f87)=>{const _0x151419=_0x1c91f1;if(_0x7c8f87%_0x47c3c1==0x0)_0x2f4c97=[];_0x2f4c97[_0x151419(0x222)]({'text':_0x53a228[_0x151419(0x256)]=='all'?_0x151419(0x13d):_0x151419(0x257)+_0x53a228[_0x151419(0x256)],'callback_data':_0x53a228[_0x151419(0x256)]}),_0x7c8f87%_0x47c3c1==0x0&&(_0x5aae6f[_0x3530ed]=_0x2f4c97,_0x3530ed++);}),tgBot[_0x1c91f1(0x13b)](_0x43f7ab['chat']['id'],_0x1c91f1(0x25a),{'reply_markup':{'inline_keyboard':_0x5aae6f}})['catch'](_0x5439ad=>{telegramError(_0x5439ad);}),tgBot['on'](_0x1c91f1(0x266),async _0x42ea8e=>{const _0x2c082e=_0x1c91f1,_0x3cdb85=_0x42ea8e[_0x2c082e(0x17d)],_0x22cc22=_0x42ea8e['message'];tgBot[_0x2c082e(0x15e)](_0x42ea8e['id'])[_0x2c082e(0x171)](async()=>{const _0x5e540b=_0x2c082e;_0x3cdb85==_0x5e540b(0x11c)?(tgBot[_0x5e540b(0x13b)](_0x22cc22[_0x5e540b(0x16d)]['id'],_0x5e540b(0x201))[_0x5e540b(0x122)](_0x112d27=>{telegramError(_0x112d27);}),_0x424ea7['forEach'](_0x7c8f2a=>{const _0x7d20f5=_0x5e540b;if(_0x7c8f2a[_0x7d20f5(0x256)]!=_0x7d20f5(0x11c))toggleBot(_0x7c8f2a[_0x7d20f5(0x256)],toggleStatus(_0x7c8f2a['botID']),_0x7d20f5(0x12f));})):(tgBot[_0x5e540b(0x13b)](_0x22cc22[_0x5e540b(0x16d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x3cdb85)['catch'](_0x5ab32c=>{telegramError(_0x5ab32c);}),toggleBot(_0x3cdb85,toggleStatus(_0x3cdb85),_0x5e540b(0x12f)));}),tgBot[_0x2c082e(0x22f)](_0x2c082e(0x266));});}}),tgBot[_0x2a6f4c(0x146)](/\/toggle/,_0x19d888=>{const _0x705069=_0x2a6f4c;if(!validateTelegram(_0x19d888))return;tgBot[_0x705069(0x22f)](_0x705069(0x266));const _0x396251=getBotsWithMode();if(_0x396251[_0x705069(0x1b4)]==0x0)tgBot[_0x705069(0x13b)](_0x19d888[_0x705069(0x16d)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x705069(0x122)](_0x306f93=>{telegramError(_0x306f93);});else{let _0x3971d9=[],_0x2cfbf1=[];const _0x236bdc=0x2;let _0x4a881d=0x0;_0x396251['forEach']((_0x4c25a6,_0x58b9e6)=>{const _0x19e593=_0x705069;if(_0x58b9e6%_0x236bdc==0x0)_0x2cfbf1=[];_0x2cfbf1[_0x19e593(0x222)]({'text':_0x19e593(0x257)+_0x4c25a6[_0x19e593(0x256)]+'\x20('+_0x4c25a6[_0x19e593(0x1b2)]+')','callback_data':_0x4c25a6['botID']}),_0x58b9e6%_0x236bdc==0x0&&(_0x3971d9[_0x4a881d]=_0x2cfbf1,_0x4a881d++);}),tgBot['sendMessage'](_0x19d888[_0x705069(0x16d)]['id'],_0x705069(0x193),{'reply_markup':{'inline_keyboard':_0x3971d9}})['catch'](_0x52b3d5=>{telegramError(_0x52b3d5);}),tgBot['on'](_0x705069(0x266),async _0x2d251d=>{const _0xc7c6bb=_0x705069,_0x1ba8a8=_0x2d251d['data'],_0x49cc04=_0x2d251d[_0xc7c6bb(0x173)];tgBot[_0xc7c6bb(0x15e)](_0x2d251d['id'])[_0xc7c6bb(0x171)](async()=>{const _0x189741=_0xc7c6bb,_0x2c3057=_0x396251[_0x189741(0x1a4)](_0x4f8206=>_0x4f8206['botID']==_0x1ba8a8),_0x4bece8=_0x2c3057[_0x189741(0x1b2)]==_0x189741(0x18a)?'manual':'auto';tgBot[_0x189741(0x13b)](_0x49cc04['chat']['id'],_0x189741(0x23b)+_0x1ba8a8+_0x189741(0x1c4)+_0x4bece8+_0x189741(0x22c))['catch'](_0x102094=>{telegramError(_0x102094);}),toggleBotMode(_0x1ba8a8);}),tgBot['removeListener'](_0xc7c6bb(0x266));});}}),tgBot['onText'](/\/names/,_0x1270e3=>{const _0xaaa0ac=_0x2a6f4c;if(!validateTelegram(_0x1270e3))return;let _0x95ee8b='';config[_0xaaa0ac(0x178)](_0x12d00a=>{const _0x2d2822=_0xaaa0ac;_0x95ee8b+='Bot\x20'+_0x12d00a[_0x2d2822(0x256)]+':\x20'+_0x12d00a[_0x2d2822(0x18e)]+'\x0a';}),tgBot[_0xaaa0ac(0x13b)](_0x1270e3['chat']['id'],_0x95ee8b,{'parse_mode':_0xaaa0ac(0x259)})[_0xaaa0ac(0x122)](_0x1a4d0b=>{telegramError(_0x1a4d0b);});}),tgBot[_0x2a6f4c(0x146)](/\/disable/,_0xfe47fa=>{const _0x4dda27=_0x2a6f4c;if(!validateTelegram(_0xfe47fa))return;tgBot[_0x4dda27(0x13b)](_0xfe47fa['chat']['id'],_0x4dda27(0x23c))[_0x4dda27(0x122)](_0x9e9e6d=>{telegramError(_0x9e9e6d);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x23dd49=>{const _0x3e3de6=_0x2a6f4c;if(!validateTelegram(_0x23dd49))return;tgBot['sendMessage'](_0x23dd49[_0x3e3de6(0x16d)]['id'],_0x2fd014)['catch'](_0x263e9e=>{telegramError(_0x263e9e);});}),tgBot['on'](_0x2a6f4c(0x141),_0x187e31=>{const _0x1443a5=_0x2a6f4c;_0x187e31[_0x1443a5(0x263)]()[_0x1443a5(0x24b)](_0x1443a5(0x1b7))&&(logging(_0x1443a5(0x20b)),tgBot[_0x1443a5(0x12d)](),tgBot=null,io['to'](_0x1443a5(0x226))[_0x1443a5(0x1ec)](_0x1443a5(0x202),'Invalid\x20Telegram\x20token'));}),process[_0x2a6f4c(0x213)](_0x2a6f4c(0x23f),()=>{const _0x44f32b=_0x2a6f4c;if(tgBot)tgBot[_0x44f32b(0x12d)]();process[_0x44f32b(0x144)](0x1);}),process['once']('SIGTERM',()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x22d1cc,_0x183015){const _0x37ed88=_0x3d59f8;if(settings['telegramEnabled']){if(settings[_0x37ed88(0x16e)]=='all'||(_0x183015['type']=='error'||_0x183015[_0x37ed88(0x1f3)]=='success')&&settings[_0x37ed88(0x16e)]==_0x37ed88(0x216)||_0x183015[_0x37ed88(0x1f3)]==_0x37ed88(0x121)&&settings[_0x37ed88(0x16e)]=='orders'){if(tgBot&&settings[_0x37ed88(0x138)]){if(_0x183015[_0x37ed88(0x233)])tgBot[_0x37ed88(0x13b)](settings[_0x37ed88(0x138)],_0x183015[_0x37ed88(0x18e)]+_0x37ed88(0x1bd)+_0x183015[_0x37ed88(0x1d5)])[_0x37ed88(0x122)](_0xa929d=>{telegramError(_0xa929d);});else tgBot['sendMessage'](settings[_0x37ed88(0x138)],_0x37ed88(0x257)+_0x22d1cc+_0x37ed88(0x1bd)+_0x183015['event'])[_0x37ed88(0x122)](_0x4bbbcc=>{telegramError(_0x4bbbcc);});}}}}function getDeviceWithIp(_0x58d478){return devices['find'](_0x4bc96f=>_0x4bc96f['ip']===_0x58d478);}function temporaryAccess2FA(_0x583929,_0x1d1921){const _0x2cb88e=_0x3d59f8;let _0x1b7a3c=new Date(),_0x3f33ef=![];if(lastIpApproval){if(_0x1b7a3c-lastIpApproval<0x1388)_0x3f33ef=!![];}lastIpApproval=new Date();if(_0x3f33ef)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x2cb88e(0x22f)](_0x2cb88e(0x266)),tgBot[_0x2cb88e(0x13b)](settings['telegramChatId'],_0x2cb88e(0x251)+normalizeIP(_0x1d1921)[_0x2cb88e(0x1d9)]+_0x2cb88e(0x148),{'parse_mode':_0x2cb88e(0x259),'reply_markup':{'inline_keyboard':[[{'text':_0x2cb88e(0x192),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x2cb88e(0x15a),'callback_data':_0x2cb88e(0x15a)}]]}})[_0x2cb88e(0x122)](_0x105a53=>{telegramError(_0x105a53);}),tgBot['on']('callback_query',async _0x2c98ae=>{const _0x2a0e09=_0x2cb88e,_0x45817c=_0x2c98ae['data'],_0x471b6f=_0x2c98ae['message'];tgBot[_0x2a0e09(0x15e)](_0x2c98ae['id'])[_0x2a0e09(0x171)](async()=>{const _0x339546=_0x2a0e09;devices[_0x583929][_0x339546(0x1c8)]={'clientip':_0x1d1921,'timestamp':new Date()[_0x339546(0x249)](),'expiry':_0x45817c},_0x45817c!='reject'?(await tgBot[_0x339546(0x13b)](_0x471b6f[_0x339546(0x16d)]['id'],_0x339546(0x168)+_0x45817c+'\x20minutes',{'parse_mode':'HTML'})[_0x339546(0x122)](_0x3c9af0=>{telegramError(_0x3c9af0);}),io['to'](_0x583929)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x471b6f[_0x339546(0x16d)]['id'],_0x339546(0x150))[_0x339546(0x122)](_0x3f3279=>{telegramError(_0x3f3279);}),io['to'](_0x583929)[_0x339546(0x1ec)](_0x339546(0x20a),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x2a0e09(0x22f)](_0x2a0e09(0x266));}));}function loginAccess2FA(_0x2b275a,_0x59588d){const _0x5f39de=_0x3d59f8;tgBot&&settings[_0x5f39de(0x138)]&&(tgBot[_0x5f39de(0x22f)]('callback_query'),tgBot[_0x5f39de(0x13b)](settings[_0x5f39de(0x138)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x59588d)[_0x5f39de(0x1d9)]+_0x5f39de(0x148),{'parse_mode':_0x5f39de(0x259),'reply_markup':{'inline_keyboard':[[{'text':_0x5f39de(0x220),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x5f39de(0x15a)}]]}})[_0x5f39de(0x122)](_0x13541c=>{telegramError(_0x13541c);}),tgBot['on'](_0x5f39de(0x266),async _0x359c6=>{const _0x54fa25=_0x5f39de,_0x33d5ac=_0x359c6[_0x54fa25(0x17d)],_0x3a1a5b=_0x359c6[_0x54fa25(0x173)];tgBot['answerCallbackQuery'](_0x359c6['id'])['then'](async()=>{const _0x2c0d88=_0x54fa25;devices[_0x2b275a]['telegram2FaApproval']={'clientip':_0x59588d,'timestamp':new Date()[_0x2c0d88(0x249)](),'expiry':_0x33d5ac},_0x33d5ac!=_0x2c0d88(0x15a)?(await tgBot[_0x2c0d88(0x13b)](_0x3a1a5b[_0x2c0d88(0x16d)]['id'],_0x2c0d88(0x1b5),{'parse_mode':'HTML'})['catch'](_0x1c974d=>{telegramError(_0x1c974d);}),io['to'](_0x2b275a)['emit'](_0x2c0d88(0x20a),{'access':{'allow':![],'reason':_0x2c0d88(0x231),'token':null}})):(await tgBot[_0x2c0d88(0x13b)](_0x3a1a5b[_0x2c0d88(0x16d)]['id'],'Login\x20rejected')[_0x2c0d88(0x122)](_0x10eab8=>{telegramError(_0x10eab8);}),io['to'](_0x2b275a)[_0x2c0d88(0x1ec)](_0x2c0d88(0x20a),{'access':{'allow':![],'reason':_0x2c0d88(0x187),'token':null}}));}),tgBot[_0x54fa25(0x22f)](_0x54fa25(0x266));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x295ad2=_0x3d59f8;return dbConfig[_0x295ad2(0x1c6)](_0x295ad2(0x267))[_0x295ad2(0x176)]('botID')[_0x295ad2(0x1fd)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x1c8051=_0x3d59f8;return dbConfig[_0x1c8051(0x1c6)]('bots')[_0x1c8051(0x176)]('botID')[_0x1c8051(0x1fd)]({'status':_0x1c8051(0x272)})[_0x1c8051(0x230)]()||[];}function getBotsWithMode(){const _0x5e34ea=_0x3d59f8,_0x3d4428=dbConfig[_0x5e34ea(0x1c6)](_0x5e34ea(0x267))['sortBy']('botID')[_0x5e34ea(0x230)]()||[];return _0x3d4428[_0x5e34ea(0x178)](_0x183ced=>{const _0xbe613e=_0x5e34ea,_0x36aee8=configpath+_0xbe613e(0x1cc)+_0x183ced[_0xbe613e(0x256)]+'-config.json',_0x46afb7=fs[_0xbe613e(0x246)](_0x36aee8);if(_0x46afb7){const _0x426ed8=fs[_0xbe613e(0x1cf)](_0x36aee8);try{const _0x27af84=JSON[_0xbe613e(0x140)](_0x426ed8),_0x2f35b6=_0x27af84?_0x27af84[_0xbe613e(0x21e)][0x0]['headless']:![];_0x183ced[_0xbe613e(0x1b2)]=_0x2f35b6?_0xbe613e(0x18a):_0xbe613e(0x21d);}catch(_0x400a9e){_0x183ced[_0xbe613e(0x1b2)]=_0xbe613e(0x21d);}}else _0x183ced[_0xbe613e(0x1b2)]='manual';}),_0x3d4428;}function getSettings(){const _0x46af47=_0x3d59f8;return dbSettings[_0x46af47(0x1c6)](_0x46af47(0x153))[_0x46af47(0x230)]()||{'timeshift':0x0};}function getSecure(){const _0x406379=_0x3d59f8;return dbSecure[_0x406379(0x1c6)](_0x406379(0x1fc))['value']()||{};}function getBlacklist(){const _0x5c7984=_0x3d59f8;return dbSecure['get']('blacklist')[_0x5c7984(0x230)]()||[];}function broadcastToBots(_0x150485,_0x12355e){config['forEach'](_0x548cb8=>{const _0x6eb94e=_0x3fb5;if(_0x548cb8[_0x6eb94e(0x20a)]==_0x6eb94e(0x26c)&&_0x548cb8[_0x6eb94e(0x1a5)]==_0x6eb94e(0x1fb)){if(pid[_0x548cb8[_0x6eb94e(0x256)]])pid[_0x548cb8[_0x6eb94e(0x256)]][_0x6eb94e(0x1c0)]({[_0x150485]:_0x12355e});}});}function storeSettings(_0x2c105c,_0x219a89=![]){const _0x14249a=_0x3d59f8;_0x2c105c={...settings,..._0x2c105c};if(_0x219a89&&_0x2c105c[_0x14249a(0x1f9)]!=_0x14249a(0x19f)&&_0x2c105c[_0x14249a(0x1f9)]!=''){const _0x1994a9=crypt[_0x14249a(0x145)](secure[_0x14249a(0x22b)],_0x2c105c[_0x14249a(0x1f9)])[_0x14249a(0x173)]['split']('@')[0x0],_0x420db1=bcrypt[_0x14249a(0x132)](_0x1994a9,saltRounds);_0x2c105c={..._0x2c105c,'bbPassword':_0x420db1};}if(_0x219a89&&_0x2c105c[_0x14249a(0x135)]!=_0x14249a(0x19f)&&_0x2c105c[_0x14249a(0x135)]!=''){const _0x1dc042=crypt['decrypt'](secure[_0x14249a(0x22b)],_0x2c105c[_0x14249a(0x135)])[_0x14249a(0x173)][_0x14249a(0x19a)]('@')[0x0];_0x2c105c={..._0x2c105c,'telegramToken':_0x1dc042};}const _0x182937=_0x2c105c[_0x14249a(0x135)]!='************'&&_0x2c105c[_0x14249a(0x135)]!=settings[_0x14249a(0x135)]||_0x2c105c[_0x14249a(0x156)]!=settings[_0x14249a(0x156)],_0x127334=_0x2c105c[_0x14249a(0x135)]==''||_0x2c105c[_0x14249a(0x156)]=='';if(_0x182937)_0x2c105c['telegramEvents']=_0x14249a(0x11c);for(const [_0x198938,_0x1c7dda]of Object[_0x14249a(0x128)](_0x2c105c)){if(_0x198938==_0x14249a(0x135)&&_0x1c7dda==_0x14249a(0x19f)){_0x2c105c[_0x14249a(0x135)]=settings[_0x14249a(0x135)];continue;};if(_0x198938==_0x14249a(0x1f9)&&_0x1c7dda==_0x14249a(0x19f)){_0x2c105c[_0x14249a(0x1f9)]=settings[_0x14249a(0x1f9)];continue;};dbSettings[_0x14249a(0x26b)](_0x14249a(0x261)+_0x198938,_0x1c7dda)[_0x14249a(0x1c7)]();}settings=_0x2c105c,io['to'](_0x14249a(0x226))[_0x14249a(0x1ec)]('settings',cleanSettings()),broadcastToBots(_0x14249a(0x1f1),settings[_0x14249a(0x1f1)]);if(_0x182937&&!_0x127334)initTelegram();if(_0x182937&&_0x127334)disableTelegram();getAllClients()[_0x14249a(0x178)](_0x278339=>{const _0x2258b6=_0x14249a;getSocket(_0x278339['id'])[_0x2258b6(0x1ec)](_0x2258b6(0x20a),{'access':{'allow':![],'reason':_0x2258b6(0x231),'token':null}});});}function updateSetting(_0x38e6ca,_0xe8b40e){const _0x50ad11=_0x3d59f8;dbSettings['set'](_0x50ad11(0x261)+_0x38e6ca,_0xe8b40e)[_0x50ad11(0x1c7)](),settings=getSettings(),io['to'](_0x50ad11(0x226))[_0x50ad11(0x1ec)]('settings',cleanSettings());}function storeSecure(_0x3404fc){const _0x1db0e9=_0x3d59f8;dbSecure[_0x1db0e9(0x1c6)](_0x1db0e9(0x1fc))[_0x1db0e9(0x222)](_0x3404fc)[_0x1db0e9(0x1c7)](),secure=_0x3404fc;}function addBlacklist(_0x298fe7){const _0x5dd90b=_0x3d59f8;cleanBlacklist();let _0x743cea;devices[_0x298fe7][_0x5dd90b(0x1c8)]?_0x743cea=Math[_0x5dd90b(0x1db)](devices[_0x298fe7]['telegramIpApproval'][_0x5dd90b(0x1fe)],loginExpiry):_0x743cea=loginExpiry,dbSecure[_0x5dd90b(0x1c6)](_0x5dd90b(0x117))[_0x5dd90b(0x222)]({'expiry':new Date()[_0x5dd90b(0x249)]()+_0x743cea*0x3c*0x3e8,'token':devices[_0x298fe7][_0x5dd90b(0x1c9)][_0x5dd90b(0x1e3)]})[_0x5dd90b(0x1c7)](),blacklist=dbSecure['get'](_0x5dd90b(0x117))[_0x5dd90b(0x230)]();}function cleanBlacklist(){const _0xde2515=_0x3d59f8;let _0x3af8df=dbSecure['get'](_0xde2515(0x117))['cloneDeep']()[_0xde2515(0x230)](),_0x2b1d8c=new Date()[_0xde2515(0x249)]();_0x3af8df['forEach'](_0x47ee9c=>{const _0xf262d6=_0xde2515;_0x47ee9c[_0xf262d6(0x1fe)]<_0x2b1d8c&&dbSecure[_0xf262d6(0x1c6)](_0xf262d6(0x117))['remove']({'expiry':_0x47ee9c[_0xf262d6(0x1fe)]})[_0xf262d6(0x1c7)]();});}function initStates(){const _0x4700a9=_0x3d59f8;let _0x177aad=getConfiguration();_0x177aad[_0x4700a9(0x178)](_0x23eb97=>{const _0x2e0597=_0x4700a9;_0x23eb97[_0x2e0597(0x1a5)]=_0x2e0597(0x12f);}),storeConfiguration(_0x177aad);}function onKeys(){const _0x54e6df=new RSA();return new Promise(_0x384606=>{const _0x2022fb=_0x3fb5;_0x54e6df[_0x2022fb(0x252)]()[_0x2022fb(0x171)](_0x39d1de=>{_0x384606(_0x39d1de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2fb6e5=_0x3d59f8;let _0x37c323=getConfiguration(),_0x4de572=![];_0x37c323['forEach'](_0xdafa07=>{const _0x5423a4=_0x3fb5;if(_0xdafa07['status']==_0x5423a4(0x1fb))_0xdafa07[_0x5423a4(0x20a)]=_0x5423a4(0x26c),_0x4de572=!![];else _0xdafa07[_0x5423a4(0x20a)]==_0x5423a4(0x12f)&&(_0xdafa07[_0x5423a4(0x20a)]=_0x5423a4(0x272),_0x4de572=!![]);});if(_0x4de572)storeConfiguration(_0x37c323);let _0x11fdf8=getSecure();if(!_0x11fdf8[_0x2fb6e5(0x11e)]('secret')){let _0x524e09=await generateKeys();_0x11fdf8['publicKey']=_0x524e09['publicKey'],_0x11fdf8[_0x2fb6e5(0x22b)]=_0x524e09[_0x2fb6e5(0x22b)],_0x11fdf8[_0x2fb6e5(0x22a)]=crypto[_0x2fb6e5(0x14c)](0x20)[_0x2fb6e5(0x263)]('hex');;storeSecure(_0x11fdf8);}let _0x2d2edb=getSettings();_0x4de572=![];!_0x2d2edb[_0x2fb6e5(0x11e)](_0x2fb6e5(0x1d2))&&(_0x2d2edb[_0x2fb6e5(0x1d2)]=![],_0x2d2edb['bbUsername']='',_0x2d2edb['bbPassword']='',_0x2d2edb[_0x2fb6e5(0x11a)]=![],_0x4de572=!![]);!_0x2d2edb[_0x2fb6e5(0x11e)](_0x2fb6e5(0x1e9))&&(_0x2d2edb[_0x2fb6e5(0x1e9)]=![],_0x2d2edb[_0x2fb6e5(0x190)]=[],_0x2d2edb[_0x2fb6e5(0x25d)]=![],_0x4de572=!![]);if(!_0x2d2edb[_0x2fb6e5(0x11e)](_0x2fb6e5(0x17e))){if(_0x2d2edb[_0x2fb6e5(0x138)])_0x2d2edb[_0x2fb6e5(0x17e)]=!![];else _0x2d2edb[_0x2fb6e5(0x17e)]=![];_0x4de572=!![];}if(_0x4de572)storeSettings(_0x2d2edb);}function storeConfiguration(_0x1cc94c){const _0x226d00=_0x3d59f8;dbConfig[_0x226d00(0x1c6)](_0x226d00(0x267))[_0x226d00(0x264)]()[_0x226d00(0x1c7)](),_0x1cc94c[_0x226d00(0x178)](_0x31de6c=>{const _0x489ee6=_0x226d00;delete _0x31de6c[_0x489ee6(0x1b2)];}),dbConfig['get'](_0x226d00(0x267))[_0x226d00(0x222)](..._0x1cc94c)['write'](),config=_0x1cc94c;}function resetPassword(){const _0x110ba7=_0x3d59f8;tgBot&&settings['telegramChatId']&&(tgBot[_0x110ba7(0x22f)]('callback_query'),tgBot['sendMessage'](settings[_0x110ba7(0x138)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x110ba7(0x12a),'callback_data':_0x110ba7(0x12a)},{'text':'no','callback_data':'no'}]]}})[_0x110ba7(0x122)](_0x5ede7a=>{telegramError(_0x5ede7a);}),tgBot['on']('callback_query',async _0x1161cd=>{const _0x75ec42=_0x110ba7,_0x1ffdc5=_0x1161cd[_0x75ec42(0x17d)],_0x2cbf3a=_0x1161cd[_0x75ec42(0x173)];tgBot[_0x75ec42(0x15e)](_0x1161cd['id'])['then'](async()=>{const _0x9f4925=_0x75ec42;if(_0x1ffdc5!='no'){const _0xa32e09=0xf,_0x4164f0=_0x9f4925(0x13e),_0x51895a=Array[_0x9f4925(0x181)](crypto[_0x9f4925(0x227)](new Uint32Array(_0xa32e09)))[_0x9f4925(0x24d)](_0x352e3a=>_0x4164f0[_0x352e3a%_0x4164f0[_0x9f4925(0x1b4)]])[_0x9f4925(0x219)](''),_0x47332f=bcrypt[_0x9f4925(0x132)](_0x51895a,saltRounds);storeSettings({'bbPassword':_0x47332f}),await tgBot['sendMessage'](_0x2cbf3a[_0x9f4925(0x16d)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x51895a,{'parse_mode':_0x9f4925(0x259)})['catch'](_0x555ca1=>{telegramError(_0x555ca1);});}else await tgBot[_0x9f4925(0x13b)](_0x2cbf3a[_0x9f4925(0x16d)]['id'],_0x9f4925(0x14b))['catch'](_0x3ab205=>{telegramError(_0x3ab205);});}),tgBot[_0x75ec42(0x22f)](_0x75ec42(0x266));}));}function logging(_0x5999cc){const _0x48a54f=_0x3d59f8;console[_0x48a54f(0x268)](getTimeStamp()+_0x48a54f(0x234)+_0x5999cc);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x48a54f(0x225))tgBot[_0x48a54f(0x13b)](settings[_0x48a54f(0x138)],_0x48a54f(0x183)+_0x5999cc)[_0x48a54f(0x122)](_0x1caa4b=>{telegramError(_0x1caa4b);});}function getServerTime(){const _0x45d77a=_0x3d59f8,_0x1d4ba8=new Date();return _0x1d4ba8['getFullYear']()+'/'+(_0x1d4ba8['getMonth']()+0x1)[_0x45d77a(0x263)]()[_0x45d77a(0x12b)](0x2,'0')+'/'+_0x1d4ba8[_0x45d77a(0x163)]()[_0x45d77a(0x263)]()['padStart'](0x2,'0')+'\x20'+_0x1d4ba8['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x1d4ba8['getMinutes']()[_0x45d77a(0x263)]()[_0x45d77a(0x12b)](0x2,'0')+':'+_0x1d4ba8['getSeconds']()['toString']()[_0x45d77a(0x12b)](0x2,'0');}function getTimeStamp(){const _0x496ffb=_0x3d59f8,_0x530040=shiftedTime();return _0x530040[_0x496ffb(0x211)]()+'/'+(_0x530040['getMonth']()+0x1)[_0x496ffb(0x263)]()[_0x496ffb(0x12b)](0x2,'0')+'/'+_0x530040[_0x496ffb(0x163)]()[_0x496ffb(0x263)]()[_0x496ffb(0x12b)](0x2,'0')+'\x20'+_0x530040[_0x496ffb(0x1f4)]()['toString']()[_0x496ffb(0x12b)](0x2,'0')+':'+_0x530040[_0x496ffb(0x250)]()[_0x496ffb(0x263)]()[_0x496ffb(0x12b)](0x2,'0')+':'+_0x530040[_0x496ffb(0x224)]()[_0x496ffb(0x263)]()[_0x496ffb(0x12b)](0x2,'0');}function shiftedTime(){const _0x4b3b80=_0x3d59f8,_0x162697=new Date();let _0x327e65=_0x162697;if(settings[_0x4b3b80(0x1f1)]&&settings['timeshift']!==0x0)_0x327e65=fns[_0x4b3b80(0x151)](_0x162697,{'hours':settings['timeshift']});return _0x327e65;}function startScheduler(){const _0x3fe9c9=_0x3d59f8;let _0x55b36e=new Date()[_0x3fe9c9(0x1b9)]();_0x55b36e==0x1&&backupConfigFiles();_0x55b36e==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x266773=_0x3d59f8;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x266773(0x178)](_0x578ce6=>{const _0x5b90b8=_0x266773;if(!_0x578ce6[_0x5b90b8(0x17b)]())fs[_0x5b90b8(0x1ef)](configpath+_0x578ce6['name'],configbackuppath+_0x578ce6['name']);});}function triggerAnalytics(){const _0xff9144=_0x3d59f8;analytics[_0xff9144(0x1bf)]({'title':_0xff9144(0x25b),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x15394d,_0x3a5642){const _0x4b7742=_0x3d59f8;if(_0x15394d[_0x4b7742(0x120)]==settings[_0x4b7742(0x24f)]&&bcrypt[_0x4b7742(0x1b0)](_0x15394d['password'],settings['bbPassword'])){if(settings[_0x4b7742(0x11a)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x5780ed=generateLoginToken(_0x3a5642);return{'allow':!![],'reason':_0x4b7742(0x119),'token':_0x5780ed};}}else return{'allow':![],'reason':_0x4b7742(0x276),'token':null};}function refreshToken(_0x44cf86){const _0x3f0214=_0x3d59f8,_0x3f7b5b=generateLoginToken(_0x44cf86);return{'allow':!![],'reason':_0x3f0214(0x119),'token':_0x3f7b5b};}function validateAccess(_0x1566b1,_0xf36277){const _0x1a810f=_0x3d59f8;let _0x58bc68=devices[_0xf36277]['ip'],_0x1d4dac;const _0x1c35f6=_0x10d7d7=>{const _0x42038b=_0x3fb5;if(settings[_0x42038b(0x1d2)]){if(settings[_0x42038b(0x11a)]){if(telegram2FaApproved(_0xf36277)){const _0x5e76c1=generateLoginToken(_0xf36277);return{'allow':!![],'reason':_0x42038b(0x235),'token':_0x5e76c1};}else return{'allow':![],'reason':_0x42038b(0x207),'token':null};}else return _0x1d4dac=validToken(_0x10d7d7,_0xf36277),_0x1d4dac['hasOwnProperty'](_0x42038b(0x24e))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x10d7d7}:{'allow':![],'reason':_0x42038b(0x207),'token':null};}else return{'allow':!![],'reason':_0x42038b(0x1a6),'token':null};};if(settings[_0x1a810f(0x1e9)]){let _0x1190a8=[...settings['whitelist'],_0x1a810f(0x1e6),_0x1a810f(0x232),_0x1a810f(0x161)];if(_0x1190a8[_0x1a810f(0x24b)](_0x58bc68))return _0x1c35f6(_0x1566b1);else{_0x1d4dac=validToken(_0x1566b1,_0xf36277);if(_0x1d4dac[_0x1a810f(0x11e)]('success'))return _0x1c35f6(_0x1566b1);else{if(telegramIpApproved(_0xf36277)){const _0x267525=generateToken(_0xf36277);return _0x1d4dac=_0x1c35f6(_0x1566b1),_0x1d4dac[_0x1a810f(0x218)]?{'allow':!![],'reason':_0x1a810f(0x1b1),'token':_0x267525}:_0x1d4dac;}else return settings[_0x1a810f(0x25d)]?{'allow':![],'reason':_0x1a810f(0x221),'token':null}:{'allow':![],'reason':_0x1a810f(0x143),'token':null};}}}else return _0x1c35f6(_0x1566b1);}function timelyDecrypt(_0x523f3c,_0x2cf0bf=!![]){const _0x20d544=_0x3d59f8;if(_0x523f3c)try{const _0x1aeda3=crypt[_0x20d544(0x145)](secure[_0x20d544(0x22b)],_0x523f3c)[_0x20d544(0x173)],_0xf190d=_0x1aeda3[_0x20d544(0x19a)]('@')[0x0],_0x44f2a3=_0x1aeda3['split']('@')[0x1],_0x23a76f=new Date()[_0x20d544(0x249)]();if(_0x2cf0bf){if(_0x23a76f-_0x44f2a3<maxSecretAge*0x3e8)return _0xf190d;else return![];}else return _0xf190d;}catch(_0x44a64f){return![];}else return![];}const validToken=(_0x10352b,_0x4a7859)=>{const _0x57a2ce=_0x3d59f8,_0x50e391=devices[_0x4a7859]['ip'];if(!_0x10352b)return{'error':'No\x20authentication\x20token'};for(let _0x2f21d0 of blacklist){if(_0x2f21d0['token']==_0x10352b)return{'error':_0x57a2ce(0x228)};}let _0x44890e;try{_0x44890e=jwt[_0x57a2ce(0x1ab)](_0x10352b,secure[_0x57a2ce(0x22a)]+_0x4a7859);}catch{return{'error':_0x57a2ce(0x1ff)};}if(!_0x44890e['hasOwnProperty'](_0x57a2ce(0x1e0))&&!_0x44890e[_0x57a2ce(0x11e)](_0x57a2ce(0x120))||!_0x44890e['hasOwnProperty'](_0x57a2ce(0x1e2)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x44890e[_0x57a2ce(0x11e)](_0x57a2ce(0x120))&&_0x44890e[_0x57a2ce(0x11e)]('clientip')){const {clientip:_0x31e2de}=_0x44890e;return _0x50e391==_0x31e2de?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x57a2ce(0x164)};}else{if(_0x44890e['hasOwnProperty']('username')&&_0x44890e[_0x57a2ce(0x11e)](_0x57a2ce(0x1e0))){const {username:_0x26df41,clientip:_0x8043a}=_0x44890e;return settings[_0x57a2ce(0x24f)]==_0x26df41&&_0x50e391==_0x8043a?{'success':_0x57a2ce(0x1f6)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x33f16f=>{const _0x839e1d=_0x3d59f8;if(_0x33f16f){const _0x4a6d15=devices[_0x33f16f]['ip'];return jwt[_0x839e1d(0x18d)]({'username':settings[_0x839e1d(0x24f)],'clientip':_0x4a6d15},secure[_0x839e1d(0x22a)]+_0x33f16f,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x26b108=>{const _0x2e9269=_0x3d59f8;if(_0x26b108){const _0x4a194e=devices[_0x26b108]['ip'];return jwt['sign']({'clientip':_0x4a194e},secure[_0x2e9269(0x22a)]+_0x26b108,{'expiresIn':devices[_0x26b108][_0x2e9269(0x1c8)][_0x2e9269(0x1fe)]*0x3c});}else return![];},telegramIpApproved=_0x2c42ce=>{const _0x11830f=_0x3d59f8;let _0x217e60=![];return devices[_0x2c42ce][_0x11830f(0x1c8)]&&devices[_0x2c42ce][_0x11830f(0x1c8)][_0x11830f(0x1fe)]!=_0x11830f(0x15a)&&(_0x217e60=devices[_0x2c42ce]['telegramIpApproval']['clientip']==devices[_0x2c42ce]['ip']&&new Date()[_0x11830f(0x249)]()-devices[_0x2c42ce][_0x11830f(0x1c8)][_0x11830f(0x17f)]<devices[_0x2c42ce]['telegramIpApproval'][_0x11830f(0x1fe)]*0x3c*0x3e8),_0x217e60;},telegram2FaApproved=_0x13c6d1=>{const _0x38fc23=_0x3d59f8;let _0x7383a7=![];return devices[_0x13c6d1][_0x38fc23(0x209)]&&devices[_0x13c6d1]['telegram2FaApproval'][_0x38fc23(0x1fe)]!='reject'&&(_0x7383a7=devices[_0x13c6d1][_0x38fc23(0x209)]['clientip']==devices[_0x13c6d1]['ip']&&new Date()[_0x38fc23(0x249)]()-devices[_0x13c6d1][_0x38fc23(0x209)][_0x38fc23(0x17f)]<devices[_0x13c6d1]['telegram2FaApproval'][_0x38fc23(0x1fe)]*0x3c*0x3e8),_0x7383a7;},normalizeIP=_0x17039b=>{const _0x26a158=_0x3d59f8;let _0x340ba5=null,_0x2dcb7c=null;if(ipaddr[_0x26a158(0x186)](_0x17039b)){const _0x5f1634=ipaddr[_0x26a158(0x140)](_0x17039b);_0x5f1634['kind']()===_0x26a158(0x248)?(_0x5f1634['isIPv4MappedAddress']()&&(_0x340ba5=_0x5f1634[_0x26a158(0x1bb)]()['toString']()),_0x2dcb7c=_0x5f1634[_0x26a158(0x263)]()):(_0x340ba5=_0x5f1634[_0x26a158(0x263)](),_0x2dcb7c=_0x5f1634['toIPv4MappedAddress']()[_0x26a158(0x263)]());}return{'show':_0x340ba5?_0x340ba5:_0x2dcb7c,'store':_0x2dcb7c};};