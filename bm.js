const _0x19a7f6=_0x2c7c;(function(_0x56c5d2,_0x49ee71){const _0x413482=_0x2c7c,_0x4a2619=_0x56c5d2();while(!![]){try{const _0xe93788=-parseInt(_0x413482(0x10d))/0x1*(-parseInt(_0x413482(0x1e7))/0x2)+-parseInt(_0x413482(0xb0))/0x3*(-parseInt(_0x413482(0xbf))/0x4)+parseInt(_0x413482(0x143))/0x5*(-parseInt(_0x413482(0x11d))/0x6)+parseInt(_0x413482(0x1d8))/0x7+-parseInt(_0x413482(0xf5))/0x8+-parseInt(_0x413482(0x1dc))/0x9+parseInt(_0x413482(0x108))/0xa;if(_0xe93788===_0x49ee71)break;else _0x4a2619['push'](_0x4a2619['shift']());}catch(_0x4eefd1){_0x4a2619['push'](_0x4a2619['shift']());}}}(_0x588a,0xdf434));const _0x197a9a=function(){let _0x7ab1c5=!![];return function(_0x49519c,_0x469b87){const _0x34b0d0=_0x7ab1c5?function(){const _0x546c55=_0x2c7c;if(_0x469b87){const _0x5ed118=_0x469b87[_0x546c55(0x1a0)](_0x49519c,arguments);return _0x469b87=null,_0x5ed118;}}:function(){};return _0x7ab1c5=![],_0x34b0d0;};}(),_0x52ae00=_0x197a9a(this,function(){const _0x4f2fda=_0x2c7c;return _0x52ae00[_0x4f2fda(0x192)]()['search'](_0x4f2fda(0x14a))[_0x4f2fda(0x192)]()[_0x4f2fda(0x132)](_0x52ae00)['search'](_0x4f2fda(0x14a));});_0x52ae00();'use strict';process['env'][_0x19a7f6(0x1fd)]=0x1;const childProcess=require(_0x19a7f6(0x268)),fs=require('fs'),fns=require(_0x19a7f6(0x289)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x19a7f6(0xe8)),crypto=require(_0x19a7f6(0x19a)),Crypt=require(_0x19a7f6(0x247))[_0x19a7f6(0xc6)],RSA=require(_0x19a7f6(0x247))[_0x19a7f6(0xad)],bcrypt=require(_0x19a7f6(0xfd)),jwt=require(_0x19a7f6(0x17b)),ipaddr=require('ipaddr.js'),argv=require('yargs/yargs')(process[_0x19a7f6(0x26b)]['slice'](0x2))[_0x19a7f6(0x26b)],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x19a7f6(0x20c)),axios=require(_0x19a7f6(0xe3)),{GraphQLClient,gql}=require(_0x19a7f6(0xb6)),util=require(_0x19a7f6(0xfc)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x19a7f6(0x1ad)]||_0x19a7f6(0xf2),pattern=/^[0-9]{2,4}$/;!pattern[_0x19a7f6(0x21e)](PORT)&&(console[_0x19a7f6(0x1cd)](_0x19a7f6(0x9b)+PORT+_0x19a7f6(0xa3)),process[_0x19a7f6(0x159)](0x1));const HOST=argv['host']||null,userID=argv[_0x19a7f6(0xfe)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x19a7f6(0xdc)];let bbpath=_0x19a7f6(0x157),bbpath2='';const botfile=_0x19a7f6(0x1de),configfile=_0x19a7f6(0x1a2),settingsfile=_0x19a7f6(0x1a5),securefile=_0x19a7f6(0x124),environment=require('./'+bbpath2+_0x19a7f6(0x1af))[_0x19a7f6(0x125)]||_0x19a7f6(0x165),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x19a7f6(0x26c)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x19a7f6(0xbe),configbackuppath=configpath+_0x19a7f6(0x13e),logspath=userID?bbpath+_0x19a7f6(0x9d)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x19a7f6(0x249),loggerfile=fs[_0x19a7f6(0x260)](logspath+_0x19a7f6(0xcd),{'flags':'a'}),temppath=userID?bbpath+_0x19a7f6(0x1f8)+userID+'/':bbpath+_0x19a7f6(0x1f8);!fs[_0x19a7f6(0xc0)](configpath)&&fs[_0x19a7f6(0xa4)](configpath);!fs[_0x19a7f6(0xc0)](configbackuppath)&&fs[_0x19a7f6(0xa4)](configbackuppath);!fs[_0x19a7f6(0xc0)](logspath)&&fs[_0x19a7f6(0xa4)](logspath);!fs['existsSync'](zippath)&&fs[_0x19a7f6(0xa4)](zippath);!fs[_0x19a7f6(0xc0)](temppath)&&fs[_0x19a7f6(0xa4)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x19a7f6(0x287)]({'bots':[]})[_0x19a7f6(0x96)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x19a7f6(0x96)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x19a7f6(0x287)]({'secure':{},'blacklist':[]})[_0x19a7f6(0x96)]();let crypt=new Crypt({'md':_0x19a7f6(0x12b),'rsaStandard':_0x19a7f6(0x15f)});const saltRounds=0xa,mixpanel=Mixpanel[_0x19a7f6(0x1ac)](_0x19a7f6(0x147),{'host':_0x19a7f6(0x230)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings['telegramToken']!=''&&settings[_0x19a7f6(0xef)]!=_0x19a7f6(0x9e))&&settings[_0x19a7f6(0x136)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x34492b,_0x18bc08)=>{const _0x540119=_0x19a7f6,_0x5742a0=/#[A-Z]{3}#/g;if(typeof _0x34492b==_0x540119(0x104)){!_0x18bc08?_0x34492b=_0x34492b[_0x540119(0xd8)](_0x5742a0,''):(_0x34492b=_0x34492b[_0x540119(0xd8)](/#BLU#/g,_0x540119(0x107)),_0x34492b=_0x34492b[_0x540119(0xd8)](/#RED#/g,_0x540119(0x25e)),_0x34492b=_0x34492b[_0x540119(0xd8)](/#YEL#/g,_0x540119(0x1d5)),_0x34492b=_0x34492b[_0x540119(0xd8)](/#MAG#/g,_0x540119(0x10f)),_0x34492b=_0x34492b[_0x540119(0xd8)](/#CYA#/g,_0x540119(0x14b)),_0x34492b=_0x34492b[_0x540119(0xd8)](/#RES#/g,_0x540119(0x223)));;}return _0x34492b;},logger={'screen':_0x30a7fa=>{const _0x25777b=_0x19a7f6;console[_0x25777b(0x1cd)](parseColor(_0x30a7fa,!![]));},'simple':_0x15a44d=>{const _0x5f1d9a=_0x19a7f6;console[_0x5f1d9a(0x1cd)](parseColor(_0x15a44d,!![])),loggerfile[_0x5f1d9a(0x96)](util[_0x5f1d9a(0x234)](parseColor(_0x15a44d,![]))+'\x0a');},'full':async _0x2d8ae1=>{const _0x58e8f5=_0x19a7f6,_0x56ef55=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2d8ae1;console[_0x58e8f5(0x1cd)](parseColor(_0x56ef55,!![])),loggerfile[_0x58e8f5(0x96)](util[_0x58e8f5(0x234)](parseColor(_0x56ef55,![]))+'\x0a');if(tgBot&&settings[_0x58e8f5(0xb8)]&&settings[_0x58e8f5(0xaf)]!=_0x58e8f5(0x1f9))await sendTelegram(settings['telegramChatId'],_0x58e8f5(0x24e)+parseColor(_0x2d8ae1,![]));},'debug':async(_0x2f3303,_0x9ef4ba='')=>{const _0x1607b2=_0x19a7f6,_0xedcb5b=getTimeStamp()+_0x1607b2(0x276)+_0x2f3303;if(debugging)console['log'](parseColor(_0xedcb5b,!![]));loggerfile['write'](util[_0x1607b2(0x234)](parseColor(_0xedcb5b,![]))+'\x0a');if(_0x9ef4ba){if(debugging)console[_0x1607b2(0x1cd)](_0x9ef4ba);loggerfile[_0x1607b2(0x96)](util[_0x1607b2(0x234)](_0x9ef4ba)+'\x0a');}}};let terminating=![];process['on'](_0x19a7f6(0x1ce),function(_0x141b0a){const _0x5851e6=_0x19a7f6;logger[_0x5851e6(0x93)](_0x141b0a);}),process['on'](_0x19a7f6(0x159),()=>{const _0x258f4d=_0x19a7f6;console[_0x258f4d(0x1cd)](_0x258f4d(0x1ca)),stopAllBots(),process[_0x258f4d(0x159)](0x0);}),process['on'](_0x19a7f6(0x145),()=>{const _0x34d210=_0x19a7f6;console[_0x34d210(0x1cd)](_0x34d210(0x264)),stopAllBots(),process[_0x34d210(0x159)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x19a7f6(0x1af))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x19a7f6(0x16c)),app=express(),http=require(_0x19a7f6(0x189))[_0x19a7f6(0xe5)](app);app[_0x19a7f6(0x18e)](fileUpload({'useTempFiles':!![]})),app[_0x19a7f6(0x12d)](_0x19a7f6(0x1eb),async(_0x55b71d,_0x150488)=>{const _0x543e11=_0x19a7f6,_0x55c48b=_0x55b71d[_0x543e11(0x197)][_0x543e11(0x16d)],_0x3f946a=getClientsWithBotID(_0x543e11(0x138)),_0x34f046=_0x55b71d[_0x543e11(0x17e)][_0x543e11(0x1f4)],_0x34dfcd=timelyDecrypt(_0x34f046,![]),_0x5eb3a5=_0x3f946a['find'](_0x5f2071=>_0x5f2071[_0x543e11(0x1f4)]==_0x34dfcd);if(_0x5eb3a5){const _0x1e9a38=normalizeIP(_0x55b71d[_0x543e11(0xd3)][_0x543e11(0x18a)])[_0x543e11(0x1e8)],_0x3a7dc7=_0x55b71d[_0x543e11(0x17e)]['tkn'];if(validateAccess(_0x3a7dc7,_0x34dfcd,_0x1e9a38)['allow'])_0x55c48b=='backup'&&await backupConfigFiles(),await zipFiles(_0x55c48b),_0x150488[_0x543e11(0x172)](zippath+(_0x55c48b+_0x543e11(0xbc)),_0x276307=>{const _0x2325a3=_0x543e11;_0x276307&&(logger['full'](_0x2325a3(0xe7)+_0x55c48b),logger[_0x2325a3(0x93)](_0x276307));});else logger['full'](_0x543e11(0xf8)+_0x55c48b+_0x543e11(0x244));}else logger['full'](_0x543e11(0xf8)+_0x55c48b+_0x543e11(0x115));}),app[_0x19a7f6(0x1c1)]('/upload-backup',async(_0x54b212,_0x32ce8b)=>{const _0x130bee=_0x19a7f6,_0x42756d=getClientsWithBotID('botmanager'),_0x249a13=_0x54b212[_0x130bee(0x17e)][_0x130bee(0x1f4)],_0x13abd8=timelyDecrypt(_0x249a13,![]),_0x238657=_0x42756d['find'](_0x4b351d=>_0x4b351d[_0x130bee(0x1f4)]==_0x13abd8);logger[_0x130bee(0x1f0)](_0x130bee(0x225));if(_0x238657){const _0x49a648=normalizeIP(_0x54b212[_0x130bee(0xd3)][_0x130bee(0x18a)])[_0x130bee(0x1e8)],_0x1b06bd=_0x54b212[_0x130bee(0x17e)]['tkn'];if(validateAccess(_0x1b06bd,_0x13abd8,_0x49a648)['allow']){if(_0x54b212[_0x130bee(0x1ba)]){const _0x39994d=_0x54b212['files']['backupfile'];await _0x39994d['mv'](temppath+_0x39994d[_0x130bee(0xa7)]),_0x32ce8b[_0x130bee(0x224)]({'status':!![],'message':'File\x20uploaded'});const _0x1258d0=getBotsWithMode();_0x1258d0[_0x130bee(0x248)]>0x0?confirmRestore(temppath,_0x39994d[_0x130bee(0xa7)]):unzipFile(temppath,_0x39994d[_0x130bee(0xa7)]);}}else logger[_0x130bee(0x1be)](_0x130bee(0x14e));}else logger['full'](_0x130bee(0xf6));}),app[_0x19a7f6(0x18e)](express[_0x19a7f6(0x1b3)](path[_0x19a7f6(0xde)](__dirname,bbpath2,_0x19a7f6(0x12f)))),app[_0x19a7f6(0x18e)](express['static'](path['join'](__dirname,bbpath2,_0x19a7f6(0x12c)))),app[_0x19a7f6(0x12d)]('/',function(_0x299423,_0x4f4706){const _0x1b13fc=_0x19a7f6;_0x4f4706[_0x1b13fc(0x24a)](path[_0x1b13fc(0xde)](__dirname,bbpath2,_0x1b13fc(0x12f),_0x1b13fc(0x26f)));}),app[_0x19a7f6(0x12d)]('/:bot',function(_0x32d83e,_0x370935){const _0x554bc4=_0x19a7f6;_0x370935[_0x554bc4(0x24a)](path[_0x554bc4(0xde)](__dirname,bbpath2,_0x554bc4(0x12c),'index.html'));}),app[_0x19a7f6(0x12d)](_0x19a7f6(0x246),(_0x13ef2a,_0x5b5a1e)=>{const _0x5a46c9=_0x19a7f6;_0x5b5a1e[_0x5a46c9(0x24a)](path[_0x5a46c9(0xde)](__dirname,bbpath2,_0x5a46c9(0x12c),_0x5a46c9(0x26f)));}),app[_0x19a7f6(0x12d)](_0x19a7f6(0x1e6),(_0x3b2939,_0x196d99)=>{const _0x3c0825=_0x19a7f6;_0x196d99[_0x3c0825(0x24a)](path[_0x3c0825(0xde)](__dirname,bbpath2,_0x3c0825(0x12c),_0x3c0825(0x26f)));}),app['get']('/:bot/coins',(_0xd079,_0x5f545b)=>{const _0x561f3b=_0x19a7f6;_0x5f545b[_0x561f3b(0x24a)](path[_0x561f3b(0xde)](__dirname,bbpath2,_0x561f3b(0x12c),_0x561f3b(0x26f)));}),app[_0x19a7f6(0x12d)](_0x19a7f6(0x99),(_0x5b6415,_0x16f3fc)=>{const _0x8219f9=_0x19a7f6;_0x16f3fc[_0x8219f9(0x24a)](path[_0x8219f9(0xde)](__dirname,bbpath2,_0x8219f9(0x12c),_0x8219f9(0x26f)));}),app[_0x19a7f6(0x12d)]('/:bot/configuration',(_0x2a237a,_0x5cef0d)=>{const _0x222416=_0x19a7f6;_0x5cef0d[_0x222416(0x24a)](path[_0x222416(0xde)](__dirname,bbpath2,_0x222416(0x12c),'index.html'));}),app[_0x19a7f6(0x12d)](_0x19a7f6(0xda),(_0x1cbfe7,_0x16767f)=>{const _0x18f8f0=_0x19a7f6;_0x16767f[_0x18f8f0(0x24a)](path[_0x18f8f0(0xde)](__dirname,bbpath2,_0x18f8f0(0x12c),_0x18f8f0(0x26f)));});if(HOST)http[_0x19a7f6(0x139)](PORT,HOST);else http[_0x19a7f6(0x139)](PORT);const io=require(_0x19a7f6(0x1c2))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xb71840=_0x19a7f6;let _0x574ce3=_0xb71840(0x204);const _0x3f2a01=networkInterfaces(),_0x11394e={};for(const _0xf82949 of Object[_0xb71840(0x1b0)](_0x3f2a01)){for(const _0x105031 of _0x3f2a01[_0xf82949]){if((_0x105031['family']==_0xb71840(0x1ed)||_0x105031[_0xb71840(0x15b)]==0x4)&&!_0x105031[_0xb71840(0x221)]){const _0x5abe6c=ipaddr[_0xb71840(0x1ef)](_0x105031[_0xb71840(0x288)])['range']();_0x5abe6c!=_0xb71840(0xa2)&&(!_0x11394e[_0xf82949]&&(_0x11394e[_0xf82949]=[]),_0x11394e[_0xf82949]['push'](_0x105031[_0xb71840(0x288)]),_0x574ce3=_0x105031[_0xb71840(0x288)]);}}}return{'serverip':_0x574ce3,'netinterfaces':_0x11394e};}async function startServer(){const _0x41fde9=_0x19a7f6,{serverip:_0x58c58c,netinterfaces:_0xe48424}=getServerIP();logger['simple'](''),logger[_0x41fde9(0x93)](_0x41fde9(0x24b)),await logger[_0x41fde9(0x1be)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x41fde9(0x205)+(environment==_0x41fde9(0x207)?'(staging)':'')+'\x0a'+(_0x41fde9(0x23b)+PORT+_0x41fde9(0x1a8))+('=>\x20Go\x20to\x20#CYA#http://'+_0x58c58c+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x41fde9(0x93)](_0x41fde9(0x24b));if(config['length']!=0x0)for(const _0x468a05 of config){const _0x3c65d3=_0x468a05['mode']==_0x41fde9(0x228)?'a':'m';if(_0x468a05[_0x41fde9(0x10e)]==_0x41fde9(0x259)||_0x468a05['status']==_0x41fde9(0x1a3))await logger[_0x41fde9(0x1be)](_0x41fde9(0x184)+_0x3c65d3+_0x41fde9(0x1d2)+_0x468a05[_0x41fde9(0x1dd)]+'\x20|\x20'+_0x468a05[_0x41fde9(0x209)]),startBot([_0x468a05[_0x41fde9(0x1dd)],userID],{'cwd':bbpath},function(_0x57cccb){const _0x1eb36a=_0x41fde9;if(_0x57cccb)logger[_0x1eb36a(0x1be)](_0x57cccb);});else(_0x468a05[_0x41fde9(0x10e)]=='disabled'||_0x468a05[_0x41fde9(0x10e)]==_0x41fde9(0xcb))&&await logger['full'](_0x41fde9(0xff)+_0x3c65d3+')\x20\x20\x20|\x20Bot\x20'+_0x468a05[_0x41fde9(0x1dd)]+'\x20|\x20'+_0x468a05[_0x41fde9(0x209)]);}else!newBot&&logger[_0x41fde9(0x93)](_0x41fde9(0x1bb));if(newBot)addBot();logger[_0x41fde9(0x93)](_0x41fde9(0x24b)),logger[_0x41fde9(0x93)](''),await logger[_0x41fde9(0x1f0)](_0x41fde9(0x1e2)+nodeversion),await logger[_0x41fde9(0x1f0)]('Network\x20Interfaces:',_0xe48424);}function startSocket(){io['on']('connection',_0x2e292c=>{const _0x4db5f6=_0x2c7c;let _0x139701,_0x5bbf1f,_0x1cf974,_0x34d3ce,_0x518df8;const _0x25a40c=_0x2e292c['handshake'][_0x4db5f6(0x17e)][_0x4db5f6(0xe0)];_0x5bbf1f=_0x25a40c[_0x4db5f6(0x191)](/bot[0-9]{3}/);if(_0x5bbf1f)_0x1cf974=_0x5bbf1f[0x0][_0x4db5f6(0x191)](/[0-9]{3}/);if(_0x1cf974)_0x139701=_0x1cf974[0x0];else _0x139701=_0x4db5f6(0x138);const _0x17ec25=_0x2e292c[_0x4db5f6(0x1fb)]['auth'][_0x4db5f6(0xed)];if(!_0x17ec25)_0x2e292c[_0x4db5f6(0xc3)](_0x4db5f6(0x10e),{'publicKey':secure[_0x4db5f6(0x20d)]});else{_0x34d3ce=timelyDecrypt(_0x17ec25,![]);if(!_0x34d3ce)_0x2e292c[_0x4db5f6(0xc3)](_0x4db5f6(0x10e),{'publicKey':secure[_0x4db5f6(0x20d)]});else{_0x518df8=normalizeIP(_0x2e292c[_0x4db5f6(0x24f)][_0x4db5f6(0x18a)])['store'];if(!devices[_0x34d3ce])devices[_0x34d3ce]={'uuid':_0x34d3ce,'access':{'token':null}};devices[_0x34d3ce]['ip']=_0x518df8;const _0x47b677=addClient(_0x2e292c['id'],_0x34d3ce,_0x139701);setAccess(_0x47b677),emitMessages(),_0x2e292c['on'](_0x4db5f6(0x279),_0x255bd6=>{const _0x3d532e=_0x4db5f6,_0x422f09=timelyDecrypt(_0x255bd6[_0x3d532e(0x22f)]);if(_0x422f09){_0x255bd6={'username':_0x255bd6[_0x3d532e(0x1aa)],'password':_0x422f09},devices[_0x34d3ce][_0x3d532e(0x15d)]=validateCredentials(_0x255bd6,_0x34d3ce);if(devices[_0x34d3ce][_0x3d532e(0x15d)][_0x3d532e(0xf9)]==![]&&devices[_0x34d3ce][_0x3d532e(0x15d)][_0x3d532e(0x22a)]=='2FA\x20login\x20required')_0x2e292c[_0x3d532e(0xc3)]('status',{'access':devices[_0x34d3ce]['access']}),loginAccess2FA(_0x34d3ce,_0x518df8);else{if(devices[_0x34d3ce]['access'][_0x3d532e(0xf9)]==![]&&devices[_0x34d3ce][_0x3d532e(0x15d)][_0x3d532e(0x22a)]=='invalid\x20credentials')_0x2e292c['emit'](_0x3d532e(0x10e),{'access':devices[_0x34d3ce][_0x3d532e(0x15d)]});else devices[_0x34d3ce][_0x3d532e(0x15d)][_0x3d532e(0xf9)]&&devices[_0x34d3ce][_0x3d532e(0x15d)][_0x3d532e(0x22a)]==_0x3d532e(0x1a9)&&(getClientsWithUuid(_0x34d3ce)[_0x3d532e(0x240)](_0x487663=>{setAccess(_0x487663);}),logger[_0x3d532e(0x1f0)](_0x3d532e(0x18d)+_0x34d3ce['slice'](-0x8)),setTokenRefresh(_0x34d3ce),setSessionTimeout(_0x3d532e(0x279),_0x34d3ce));}}else logger['full'](_0x3d532e(0x274));}),_0x2e292c['on']('reset-password',()=>{resetPassword();}),_0x2e292c['on'](_0x4db5f6(0x171),_0x442044=>{removeClient(_0x2e292c['id']);}),_0x139701==_0x4db5f6(0x138)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1ed224){const _0x5e1039=_0x19a7f6;if(_0x1ed224!=_0x5e1039(0x138)&&config['apiKey']!=''){if(pid[_0x1ed224])pid[_0x1ed224][_0x5e1039(0x224)]({'function':_0x5e1039(0x280),'args':null});}_0x1ed224!=_0x5e1039(0x138)&&broadcastToBots('bots',JSON[_0x5e1039(0x12a)](config));}function reloadBotManager(){const _0x57a79a=_0x19a7f6;getClientsWithBotID(_0x57a79a(0x138))[_0x57a79a(0x240)](_0x5d358a=>{const _0x335e00=_0x57a79a;getSocket(_0x5d358a['id'])[_0x335e00(0xc3)](_0x335e00(0x10e),{'access':{'allow':![],'reason':_0x335e00(0x21b),'token':null}});});}function getSocket(_0x57c436){const _0x102263=_0x19a7f6;return io[_0x102263(0x281)][_0x102263(0x281)]['get'](_0x57c436);}function setAccess(_0x1fc383){const _0x379262=_0x19a7f6,_0x225017=getSocket(_0x1fc383['id']),_0x5c2ab0=_0x1fc383[_0x379262(0x1f4)],_0xb4bf35=_0x1fc383[_0x379262(0x1cc)];devices[_0x5c2ab0][_0x379262(0x15d)]=validateAccess(devices[_0x5c2ab0][_0x379262(0x15d)]['token'],_0x5c2ab0),logger[_0x379262(0x1f0)]('Setting\x20access:\x20'+devices[_0x5c2ab0][_0x379262(0x15d)]['reason']+_0x379262(0x18f)+_0x1fc383['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x5c2ab0[_0x379262(0xc8)](-0x8)),_0x225017[_0x379262(0xde)](_0x5c2ab0);if(devices[_0x5c2ab0]['access'][_0x379262(0xf9)]){_0x225017[_0x379262(0xde)](_0xb4bf35);if(_0xb4bf35==_0x379262(0x138))initializeSocketBotManager(_0x225017);else initializeSocketBot(_0x225017);initClient(_0xb4bf35);}devices[_0x5c2ab0]['access'][_0x379262(0x222)]&&devices[_0x5c2ab0][_0x379262(0x15d)][_0x379262(0x22a)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x379262(0x16f),_0x5c2ab0),devices[_0x5c2ab0]['access'][_0x379262(0x222)]&&devices[_0x5c2ab0][_0x379262(0x15d)][_0x379262(0x22a)]==_0x379262(0x238)&&setSessionTimeout('login',_0x5c2ab0),_0x225017['emit'](_0x379262(0x10e),{'status':_0x1fc383['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5c2ab0][_0x379262(0x15d)],'externalip':devices[_0x5c2ab0]['ip'],'publicKey':secure[_0x379262(0x20d)],'userid':settings[_0x379262(0x1d3)],'validInstallation':validInstallation}),devices[_0x5c2ab0]['access'][_0x379262(0xf9)]==![]&&devices[_0x5c2ab0][_0x379262(0x15d)]['reason']==_0x379262(0x98)&&temporaryAccess2FA(_0x5c2ab0,devices[_0x5c2ab0]['ip']);}function setSessionTimeout(_0x450e8f,_0xc2d286){const _0x23f147=_0x19a7f6;let _0x3ece62;if(_0x450e8f==_0x23f147(0x279))_0x3ece62=loginExpiry*0x3c*0x3e8;else _0x3ece62=devices[_0xc2d286][_0x23f147(0x20f)][_0x23f147(0xd5)]*0x3c*0x3e8-(new Date()[_0x23f147(0x11e)]()-devices[_0xc2d286][_0x23f147(0x20f)][_0x23f147(0x1f7)]);if(devices[_0xc2d286][_0x23f147(0x167)])clearTimeout(devices[_0xc2d286][_0x23f147(0x167)]);devices[_0xc2d286][_0x23f147(0x167)]=setTimeout(()=>{const _0x4e7d89=_0x23f147;if(devices[_0xc2d286]['pidRefreshToken'])clearTimeout(devices[_0xc2d286][_0x4e7d89(0xc4)]);removeSocketListeners(_0xc2d286),addBlacklist(_0xc2d286),devices[_0xc2d286][_0x4e7d89(0x20f)]=null,devices[_0xc2d286][_0x4e7d89(0x243)]=null,devices[_0xc2d286]['access'][_0x4e7d89(0x222)]=null,logger[_0x4e7d89(0x1f0)]('Session\x20expired\x20for\x20user\x20...'+_0xc2d286[_0x4e7d89(0xc8)](-0x8)),devices[_0xc2d286][_0x4e7d89(0x15d)]=validateAccess(devices[_0xc2d286][_0x4e7d89(0x15d)]['token'],_0xc2d286),!(devices[_0xc2d286]['access'][_0x4e7d89(0xf9)]&&devices[_0xc2d286][_0x4e7d89(0x15d)][_0x4e7d89(0x22a)]==_0x4e7d89(0xb1))&&(_0x450e8f=='login'?io['to'](_0xc2d286)[_0x4e7d89(0xc3)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0xc2d286)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0xc2d286][_0x4e7d89(0x15d)][_0x4e7d89(0x222)]=null;},_0x3ece62);}function setTokenRefresh(_0x511bdc){const _0x18b495=_0x19a7f6;if(devices[_0x511bdc][_0x18b495(0xc4)])clearTimeout(devices[_0x511bdc][_0x18b495(0xc4)]);devices[_0x511bdc][_0x18b495(0xc4)]=setTimeout(()=>{const _0x364d58=_0x18b495;getClientsWithUuid(_0x511bdc)['length']!=0x0?(devices[_0x511bdc][_0x364d58(0x15d)]=refreshToken(_0x511bdc),io['to'](_0x511bdc)['emit'](_0x364d58(0x10e),{'status':_0x364d58(0x150),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x511bdc][_0x364d58(0x15d)],'externalip':devices[_0x511bdc]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x511bdc)):clearTimeout(devices[_0x511bdc][_0x364d58(0xc4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x36c253){const _0x21d238=_0x19a7f6,_0x1aa3ce=getClient(_0x36c253['id'])[_0x21d238(0x1f4)];_0x36c253['emit'](_0x21d238(0xe9),config),_0x36c253['emit']('settings',cleanSettings()),_0x36c253['on'](_0x21d238(0x183),_0x307c62=>{const _0x215a38=_0x21d238;if(validateAccess(_0x307c62,_0x1aa3ce)['allow'])addBot();else logger[_0x215a38(0x1be)](_0x215a38(0x219));}),_0x36c253['on'](_0x21d238(0x113),(_0x429ac3,_0x453598)=>{const _0x4929cb=_0x21d238;if(validateAccess(_0x453598,_0x1aa3ce)[_0x4929cb(0xf9)])toggleBot(_0x429ac3[_0x4929cb(0x1dd)],_0x429ac3['status'],_0x429ac3['live']);else logger[_0x4929cb(0x1be)](_0x4929cb(0x19c));}),_0x36c253['on'](_0x21d238(0x182),(_0xc6a07,_0x27b6b5)=>{const _0x31a1c8=_0x21d238;if(validateAccess(_0x27b6b5,_0x1aa3ce)[_0x31a1c8(0xf9)])toggleBotMode(_0xc6a07);else logger[_0x31a1c8(0x1be)](_0x31a1c8(0x19c));}),_0x36c253['on'](_0x21d238(0x141),(_0x4438b9,_0x4adf80)=>{const _0x521141=_0x21d238;if(validateAccess(_0x4adf80,_0x1aa3ce)[_0x521141(0xf9)])deleteBot(_0x4438b9);else logger[_0x521141(0x1be)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x36c253['on'](_0x21d238(0x241),(_0x1f82a3,_0x198e0c)=>{const _0x4efd31=_0x21d238;if(validateAccess(_0x198e0c,_0x1aa3ce)['allow'])storeSettings(_0x1f82a3,!![]);else logger['full'](_0x4efd31(0x26e));}),_0x36c253['on']('update-bb',_0x479300=>{const _0x3378f8=_0x21d238;if(validateAccess(_0x479300,_0x1aa3ce)[_0x3378f8(0xf9)])updateBB('update');else logger[_0x3378f8(0x1be)](_0x3378f8(0x1cb));}),_0x36c253['on'](_0x21d238(0xa6),_0x836b1c=>{const _0x190371=_0x21d238;if(validateAccess(_0x836b1c,_0x1aa3ce)[_0x190371(0xf9)])updateBB(_0x190371(0x149));else logger[_0x190371(0x1be)](_0x190371(0xd7));}),_0x36c253['on'](_0x21d238(0x13d),_0x1e19bf=>{const _0x3803c4=_0x21d238;if(validateAccess(_0x1e19bf,_0x1aa3ce)['allow']){const _0x96d482=getClient(_0x36c253['id']);if(_0x96d482)getBackupFiles(_0x96d482[_0x3803c4(0x1f4)]);else logger[_0x3803c4(0x1be)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x3803c4(0x1be)](_0x3803c4(0x202));}),_0x36c253['on']('restore-backup-file',(_0x2e07c6,_0xa83535)=>{const _0xebae89=_0x21d238;if(validateAccess(_0xa83535,_0x1aa3ce)[_0xebae89(0xf9)])restoreBackupFile(_0x2e07c6);else logger[_0xebae89(0x1be)](_0xebae89(0x27f));}),_0x36c253['on'](_0x21d238(0x23c),_0x4b95ee=>{const _0x249d87=_0x21d238;if(validateAccess(_0x4b95ee,_0x1aa3ce)['allow'])getMessages();else logger['full'](_0x249d87(0x13c));}),_0x36c253['on'](_0x21d238(0x153),(_0x9dd4da,_0xb0b2a9)=>{const _0x2a5732=_0x21d238;if(validateAccess(_0xb0b2a9,_0x1aa3ce)[_0x2a5732(0xf9)])confirmMessage(_0x9dd4da);else logger[_0x2a5732(0x1be)](_0x2a5732(0x9a));}),_0x36c253['on'](_0x21d238(0xd9),_0x2b3736=>{const _0xe2adb=_0x21d238;if(validateAccess(_0x2b3736,_0x1aa3ce)['allow']){if(devices[_0x1aa3ce][_0xe2adb(0xc4)])clearTimeout(devices[_0x1aa3ce]['pidRefreshToken']);if(devices[_0x1aa3ce][_0xe2adb(0x167)])clearTimeout(devices[_0x1aa3ce][_0xe2adb(0x167)]);removeSocketListeners(getClient(_0x36c253['id'])['uuid']),addBlacklist(_0x1aa3ce),devices[_0x1aa3ce][_0xe2adb(0x20f)]=null,devices[_0x1aa3ce][_0xe2adb(0x243)]=null,devices[_0x1aa3ce][_0xe2adb(0x15d)][_0xe2adb(0x222)]=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x1aa3ce[_0xe2adb(0xc8)](-0x8)),io['to'](getClient(_0x36c253['id'])[_0xe2adb(0x1f4)])[_0xe2adb(0xc3)](_0xe2adb(0x10e),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0xe2adb(0x1be)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x33225f){const _0x26a1ee=_0x19a7f6,_0x4505a8=getClient(_0x33225f['id'])[_0x26a1ee(0x1cc)],_0x4f6d79=getClient(_0x33225f['id'])[_0x26a1ee(0x1f4)];_0x33225f['on'](_0x26a1ee(0x18c),(_0x580bf1,_0x2d3a83)=>{const _0x26a7d5=_0x26a1ee;if(validateAccess(_0x2d3a83,_0x4f6d79)['allow']){if(pid[_0x4505a8])pid[_0x4505a8][_0x26a7d5(0x224)]({'function':_0x26a7d5(0x1fa),'args':_0x580bf1});}else logger[_0x26a7d5(0x1be)](_0x26a7d5(0x110));}),_0x33225f['on'](_0x26a1ee(0xf4),(_0x3b7506,_0x36bbd1)=>{const _0x41a118=_0x26a1ee;if(validateAccess(_0x36bbd1,_0x4f6d79)[_0x41a118(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8]['send']({'function':_0x41a118(0x16e),'args':_0x3b7506});}else logger[_0x41a118(0x1be)](_0x41a118(0x105));}),_0x33225f['on'](_0x26a1ee(0xdf),(_0x5bfa5f,_0x283d6b)=>{const _0x531a63=_0x26a1ee;if(validateAccess(_0x283d6b,_0x4f6d79)[_0x531a63(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8][_0x531a63(0x224)]({'function':_0x531a63(0x229),'args':_0x5bfa5f});}else logger[_0x531a63(0x1be)](_0x531a63(0x206));}),_0x33225f['on'](_0x26a1ee(0x23f),(_0x4aa42c,_0x4f707e)=>{const _0xf7d1b7=_0x26a1ee;if(validateAccess(_0x4f707e,_0x4f6d79)[_0xf7d1b7(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8][_0xf7d1b7(0x224)]({'function':_0xf7d1b7(0x262),'args':_0x4aa42c});}else logger[_0xf7d1b7(0x1be)](_0xf7d1b7(0x24c));}),_0x33225f['on'](_0x26a1ee(0x162),(_0x29bbca,_0x168cac)=>{const _0x734b19=_0x26a1ee;if(validateAccess(_0x168cac,_0x4f6d79)[_0x734b19(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8][_0x734b19(0x224)]({'function':_0x734b19(0x1ea),'args':_0x29bbca});}else logger[_0x734b19(0x1be)](_0x734b19(0x1e9));}),_0x33225f['on']('store-fiat',(_0x181193,_0x140d58)=>{const _0x3a9796=_0x26a1ee;if(validateAccess(_0x140d58,_0x4f6d79)['allow']){if(pid[_0x4505a8])pid[_0x4505a8][_0x3a9796(0x224)]({'function':'storeFiat','args':_0x181193});}else logger[_0x3a9796(0x1be)](_0x3a9796(0x208));}),_0x33225f['on'](_0x26a1ee(0x116),_0x57058a=>{const _0x165d03=_0x26a1ee;if(validateAccess(_0x57058a,_0x4f6d79)['allow']){if(pid[_0x4505a8])pid[_0x4505a8][_0x165d03(0x224)]({'function':_0x165d03(0x269),'args':null});}else logger['full'](_0x165d03(0x1b1));}),_0x33225f['on'](_0x26a1ee(0x16a),_0x1ba632=>{const _0x56e511=_0x26a1ee;if(validateAccess(_0x1ba632,_0x4f6d79)[_0x56e511(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8][_0x56e511(0x224)]({'function':_0x56e511(0x23e),'args':null});}else logger[_0x56e511(0x1be)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x33225f['on'](_0x26a1ee(0x20b),(_0x3f3b03,_0x1b124a)=>{const _0x3e11ff=_0x26a1ee;if(validateAccess(_0x1b124a,_0x4f6d79)[_0x3e11ff(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8]['send']({'function':'placeOrder','args':_0x3f3b03});}else logger[_0x3e11ff(0x1be)](_0x3e11ff(0x22e));}),_0x33225f['on'](_0x26a1ee(0x101),_0x15815d=>{const _0x36711d=_0x26a1ee;if(validateAccess(_0x15815d,_0x4f6d79)[_0x36711d(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8][_0x36711d(0x224)]({'function':_0x36711d(0x200),'args':null});}else logger[_0x36711d(0x1be)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x33225f['on'](_0x26a1ee(0x188),_0x51e99e=>{const _0x3957bc=_0x26a1ee;if(validateAccess(_0x51e99e,_0x4f6d79)[_0x3957bc(0xf9)]){if(pid[_0x4505a8])pid[_0x4505a8]['send']({'function':_0x3957bc(0x119),'args':null});}else logger['full'](_0x3957bc(0xc1));}),_0x33225f['on']('update-bb',_0x2a0030=>{const _0x2ed6e5=_0x26a1ee;if(validateAccess(_0x2a0030,_0x4f6d79)[_0x2ed6e5(0xf9)])updateBB('update');else logger[_0x2ed6e5(0x1be)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x33225f['on'](_0x26a1ee(0x23c),_0x53f865=>{const _0x43be0f=_0x26a1ee;if(validateAccess(_0x53f865,_0x4f6d79)['allow'])getMessages();else logger[_0x43be0f(0x1be)](_0x43be0f(0x13c));}),_0x33225f['on'](_0x26a1ee(0x153),(_0x308581,_0x2fe463)=>{const _0x320c7e=_0x26a1ee;if(validateAccess(_0x2fe463,_0x4f6d79)['allow'])confirmMessage(_0x308581);else logger[_0x320c7e(0x1be)](_0x320c7e(0x9a));}),_0x33225f['on'](_0x26a1ee(0xd9),_0x705a62=>{const _0x4647b4=_0x26a1ee;if(validateAccess(_0x705a62,_0x4f6d79)[_0x4647b4(0xf9)]){if(devices[_0x4f6d79][_0x4647b4(0xc4)])clearTimeout(devices[_0x4f6d79][_0x4647b4(0xc4)]);if(devices[_0x4f6d79][_0x4647b4(0x167)])clearTimeout(devices[_0x4f6d79][_0x4647b4(0x167)]);removeSocketListeners(getClient(_0x33225f['id'])[_0x4647b4(0x1f4)]),addBlacklist(_0x4f6d79),devices[_0x4f6d79][_0x4647b4(0x20f)]=null,devices[_0x4f6d79][_0x4647b4(0x243)]=null,devices[_0x4f6d79][_0x4647b4(0x15d)][_0x4647b4(0x222)]=null,logger[_0x4647b4(0x1f0)]('Logged\x20out\x20user\x20...'+_0x4f6d79[_0x4647b4(0xc8)](-0x8)),io['to'](getClient(_0x33225f['id'])['uuid'])[_0x4647b4(0xc3)](_0x4647b4(0x10e),{'access':{'allow':![],'reason':_0x4647b4(0x271),'token':null}});}else logger[_0x4647b4(0x1be)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x365a89){const _0x16be29=_0x19a7f6;getClientsWithUuid(_0x365a89)[_0x16be29(0x240)](_0x30e560=>{const _0x5db693=_0x16be29;getSocket(_0x30e560['id'])[_0x5db693(0x135)]();});}function cleanSettings(){const _0x4c16be=_0x19a7f6;let _0x4d1834=settings;return settings[_0x4c16be(0xef)]&&settings[_0x4c16be(0xef)]!=''&&(_0x4d1834={..._0x4d1834,'telegramToken':'************'}),settings[_0x4c16be(0xb7)]&&settings[_0x4c16be(0xb7)]!=''&&(_0x4d1834={..._0x4d1834,'bbPassword':_0x4c16be(0x1f3)}),(settings[_0x4c16be(0xb7)]&&settings[_0x4c16be(0xb7)]==_0x4c16be(0x9e)||settings['telegramToken']&&settings[_0x4c16be(0xef)]==_0x4c16be(0x9e))&&(_0x4d1834={..._0x4d1834,'restored':{'password':settings['bbPassword']==_0x4c16be(0x9e),'telegram':settings[_0x4c16be(0xef)]=='***'}}),_0x4d1834;}async function updateBB(_0x1440d2){const _0x20c830=_0x19a7f6;await backupConfigFiles(),installingUpdate=!![],config[_0x20c830(0x240)](_0xa818d9=>{restartBot(_0xa818d9['botID']);});if(_0x1440d2==_0x20c830(0x1d7))process[_0x20c830(0x224)]({'update':!![],'environment':environment},_0x3e0f72=>{});else _0x1440d2==_0x20c830(0x149)&&process[_0x20c830(0x224)]({'reinstall':!![],'environment':environment},_0x2743de=>{});}function startBot(_0x43d9cc,_0x9cacde,_0x2ed451){const _0x164b8d=_0x19a7f6;if(debugging)_0x43d9cc[_0x164b8d(0x214)]('-d');let _0x4c51a8=![];const _0x2b7125=_0x43d9cc[0x0];_0x9cacde={..._0x9cacde,'stdio':['inherit',_0x164b8d(0xb3),_0x164b8d(0xb3),'ipc']},pid[_0x2b7125]=childProcess[_0x164b8d(0x226)](botfile,_0x43d9cc,_0x9cacde),pid[_0x2b7125]['on'](_0x164b8d(0x199),_0x11ff9a=>{const _0xa03132=_0x164b8d;switch(Object['keys'](_0x11ff9a)[0x0]){case _0xa03132(0x209):updateBotName(_0x2b7125,_0x11ff9a[_0xa03132(0x209)]);break;case _0xa03132(0x18b):updateBotManager();break;case _0xa03132(0x10e):updateStatus(_0x2b7125,_0x11ff9a[_0xa03132(0x10e)]);break;case _0xa03132(0xac):updateLive(_0x2b7125,_0x11ff9a[_0xa03132(0xac)]);break;case _0xa03132(0x1c0):updateLive(_0x2b7125,_0x11ff9a[_0xa03132(0x1c0)]),io['to'](_0x2b7125)[_0xa03132(0xc3)](_0xa03132(0x10e),{'access':{'allow':![],'reason':_0xa03132(0x21b),'token':null}});break;case _0xa03132(0x25d):_0x11ff9a[_0xa03132(0x25d)]==_0xa03132(0x25f)&&restartBot(_0x2b7125);_0x11ff9a[_0xa03132(0x25d)]=='kill'&&toggleBot(_0x2b7125,_0xa03132(0xfa),_0xa03132(0xee));break;case _0xa03132(0x24d):sendTelegramBot(_0x2b7125,_0x11ff9a[_0xa03132(0x24d)]);break;case _0xa03132(0x22d):sendTelegramMsg(_0x11ff9a[_0xa03132(0x22d)]);break;case _0xa03132(0x1b6):io['to'](_0x2b7125)[_0xa03132(0xc3)](_0x11ff9a[_0xa03132(0x1b6)],_0x11ff9a['args']);break;}}),pid[_0x2b7125]['on'](_0x164b8d(0x254),function(_0x3b270d){if(_0x4c51a8)return;_0x4c51a8=!![],_0x2ed451(_0x3b270d);}),pid[_0x2b7125]['on'](_0x164b8d(0x159),async function(_0x289cd4){const _0x4b1fe3=_0x164b8d;if(terminating)return;if(installingUpdate){logger[_0x4b1fe3(0x1f0)]('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io[_0x4b1fe3(0x151)]();return;}if(_0x4c51a8)return;_0x4c51a8=!![],_0x2ed451(null);const _0x45213c=dbConfig[_0x4b1fe3(0x12d)](_0x4b1fe3(0xe9))[_0x4b1fe3(0x164)]({'botID':_0x2b7125})[_0x4b1fe3(0x1c5)]();_0x45213c&&(_0x45213c['status']==_0x4b1fe3(0x259)||_0x45213c[_0x4b1fe3(0x10e)]=='new')&&(await sleep(0x3e8),updateLive(_0x2b7125,_0x4b1fe3(0xee)),logger['full'](_0x4b1fe3(0x277)+_0x2b7125),startBot([_0x2b7125,userID],{'cwd':bbpath},function(_0x417d23){const _0x121fba=_0x4b1fe3;if(_0x417d23)logger[_0x121fba(0x1be)](_0x417d23);}));});}function stopBot(_0x19964a){const _0x27e377=_0x19a7f6;getClientsWithBotID(_0x19964a)[_0x27e377(0x240)](_0x25e6de=>{const _0x166441=_0x27e377;getSocket(_0x25e6de['id'])[_0x166441(0x171)](!![]),removeClient(_0x25e6de['id']);}),pid[_0x19964a]&&(pid[_0x19964a][_0x27e377(0x19d)](),pid[_0x19964a]=null);}function stopAllBots(){const _0xa382e2=_0x19a7f6;terminating=!![];const _0x23fbea=getEnabledBots();_0x23fbea[_0xa382e2(0x240)](_0x41220a=>{stopBot(_0x41220a['botID']);});}function restartBot(_0xc0d925){if(pid[_0xc0d925])pid[_0xc0d925]['kill']();}function addBot(){const _0x47797e=_0x19a7f6;let _0x2a10f2;for(let _0x396894=0x1;_0x396894<0x3e9;_0x396894++){_0x2a10f2=_0x396894['toString']()[_0x47797e(0x181)](0x3,'0');let _0x532ab7=config[_0x47797e(0x164)](_0x2601be=>_0x2601be[_0x47797e(0x1dd)]==_0x2a10f2);if(!_0x532ab7)break;}if(_0x2a10f2===_0x47797e(0x237)){logger[_0x47797e(0x1be)](_0x47797e(0x1e5));return;}logger[_0x47797e(0x1be)](_0x47797e(0x239)+_0x2a10f2),dbConfig[_0x47797e(0x12d)]('bots')[_0x47797e(0x214)]({'botID':_0x2a10f2,'botname':'Bot\x20'+_0x2a10f2,'status':_0x47797e(0x1a3),'live':''})[_0x47797e(0x96)](),startBot([_0x2a10f2,userID],{'cwd':bbpath},function(_0x17d69e){const _0x492f72=_0x47797e;if(_0x17d69e)logger[_0x492f72(0x1be)](_0x17d69e);}),config=getConfiguration(),io['to'](_0x47797e(0x138))[_0x47797e(0xc3)]('bots',config),broadcastToBots(_0x47797e(0xe9),JSON[_0x47797e(0x12a)](config));}function deleteBot(_0x2a0913){const _0x3d15d8=_0x19a7f6;getClientsWithBotID(_0x2a0913)[_0x3d15d8(0x240)](_0x273d92=>{const _0x291f0e=_0x3d15d8;getSocket(_0x273d92['id'])[_0x291f0e(0x171)](!![]),removeClient(_0x273d92['id']);}),dbConfig[_0x3d15d8(0x12d)](_0x3d15d8(0xe9))[_0x3d15d8(0xd4)]({'botID':_0x2a0913})[_0x3d15d8(0x96)](),logger[_0x3d15d8(0x1be)]('Deleted\x20Bot\x20'+_0x2a0913),stopBot(_0x2a0913);try{if(fs['existsSync'](path[_0x3d15d8(0xde)](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x126))))fs[_0x3d15d8(0x1fe)](path[_0x3d15d8(0xde)](configpath,_0x3d15d8(0x251)+_0x2a0913+'-config.json'));if(fs[_0x3d15d8(0xc0)](path[_0x3d15d8(0xde)](configpath,'bot-'+_0x2a0913+_0x3d15d8(0x220))))fs[_0x3d15d8(0x1fe)](path[_0x3d15d8(0xde)](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x220)));if(fs[_0x3d15d8(0xc0)](path[_0x3d15d8(0xde)](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x286))))fs[_0x3d15d8(0x1fe)](path[_0x3d15d8(0xde)](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x286)));if(fs['existsSync'](path['join'](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x275))))fs[_0x3d15d8(0x1fe)](path['join'](configpath,_0x3d15d8(0x251)+_0x2a0913+_0x3d15d8(0x275)));}catch(_0x4ed7e4){if(_0x4ed7e4)logger['full'](_0x3d15d8(0xdb),_0x4ed7e4);}config=getConfiguration(),io['to'](_0x3d15d8(0x138))[_0x3d15d8(0xc3)](_0x3d15d8(0xe9),config),broadcastToBots(_0x3d15d8(0xe9),JSON[_0x3d15d8(0x12a)](config));}function toggleBot(_0x255643,_0xb390ef,_0x3369fd){const _0x2344fa=_0x19a7f6;dbConfig[_0x2344fa(0x12d)]('bots')[_0x2344fa(0x164)]({'botID':_0x255643})['assign']({'status':_0xb390ef})['assign']({'live':_0x3369fd})['write']();if(_0xb390ef==_0x2344fa(0x259)||_0xb390ef==_0x2344fa(0x1a3))logger[_0x2344fa(0x1be)](_0x2344fa(0x9c)+_0x255643),startBot([_0x255643,userID],{'cwd':bbpath},function(_0x3c241b){if(_0x3c241b)logger['full'](_0x3c241b);});else(_0xb390ef==_0x2344fa(0xfa)||_0xb390ef==_0x2344fa(0xcb))&&(logger['full'](_0x2344fa(0xe2)+_0x255643),stopBot(_0x255643));config=getConfiguration(),io['to'](_0x2344fa(0x138))[_0x2344fa(0xc3)](_0x2344fa(0xe9),config),broadcastToBots(_0x2344fa(0xe9),JSON[_0x2344fa(0x12a)](config));}function toggleStatus(_0x3b844a){const _0xbc8381=_0x19a7f6;let _0x5ea1a9=dbConfig[_0xbc8381(0x12d)]('bots')['find']({'botID':_0x3b844a})[_0xbc8381(0x1c5)](),_0x32d50b;if(_0x5ea1a9['status']===_0xbc8381(0x259))_0x32d50b=_0xbc8381(0xfa);else{if(_0x5ea1a9[_0xbc8381(0x10e)]===_0xbc8381(0x1a3))_0x32d50b=_0xbc8381(0xcb);else{if(_0x5ea1a9['status']===_0xbc8381(0xcb))_0x32d50b=_0xbc8381(0x1a3);else{if(_0x5ea1a9['status']===_0xbc8381(0xfa))_0x32d50b=_0xbc8381(0x259);}}}return _0x32d50b;}function updateStatus(_0x59d4f6,_0x38eec5){const _0x295c26=_0x19a7f6;dbConfig['get'](_0x295c26(0xe9))[_0x295c26(0x164)]({'botID':_0x59d4f6})['assign']({'status':_0x38eec5})['write'](),config=getConfiguration(),io['to'](_0x295c26(0x138))[_0x295c26(0xc3)](_0x295c26(0xe9),config),broadcastToBots(_0x295c26(0xe9),JSON['stringify'](config));}function updateLive(_0x1e63c1,_0x2b444a){const _0x15b3a5=_0x19a7f6;dbConfig['get'](_0x15b3a5(0xe9))[_0x15b3a5(0x164)]({'botID':_0x1e63c1})[_0x15b3a5(0x185)]({'live':_0x2b444a})[_0x15b3a5(0x96)](),config=getConfiguration(),io['to'](_0x15b3a5(0x138))[_0x15b3a5(0xc3)](_0x15b3a5(0xe9),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x523d03,_0x32965b){const _0xb7be67=_0x19a7f6;dbConfig[_0xb7be67(0x12d)]('bots')[_0xb7be67(0x164)]({'botID':_0x523d03})['assign']({'botname':_0x32965b})['write'](),config=getConfiguration(),io['to']('botmanager')[_0xb7be67(0xc3)]('bots',config),broadcastToBots(_0xb7be67(0xe9),JSON['stringify'](config));}function updateBotManager(){const _0xc2cd6a=_0x19a7f6;config=getConfiguration(),io['to'](_0xc2cd6a(0x138))[_0xc2cd6a(0xc3)](_0xc2cd6a(0xe9),config),broadcastToBots(_0xc2cd6a(0xe9),JSON[_0xc2cd6a(0x12a)](config));}function toggleBotMode(_0x20fe1e){const _0x2a9838=_0x19a7f6;if(pid[_0x20fe1e])pid[_0x20fe1e][_0x2a9838(0x224)]({'function':'toggleBotMode','args':null});else{const _0x29ed36=configpath+_0x2a9838(0x251)+_0x20fe1e+_0x2a9838(0x126),_0x42db1d=fs['readFileSync'](_0x29ed36),_0x2fcb38=JSON[_0x2a9838(0x1ef)](_0x42db1d),_0x5241ec=_0x2fcb38[_0x2a9838(0x1cc)][0x0][_0x2a9838(0xd1)];_0x2fcb38[_0x2a9838(0x1cc)][0x0]['headless']=!_0x5241ec;const _0x205928=JSON[_0x2a9838(0x12a)](_0x2fcb38,null,0x2);fs[_0x2a9838(0x16b)](_0x29ed36,_0x205928),config=getConfiguration(),io['to'](_0x2a9838(0x138))[_0x2a9838(0xc3)](_0x2a9838(0xe9),config),broadcastToBots('bots',JSON[_0x2a9838(0x12a)](config));}}function validateTelegram(_0x187c6d){const _0x4a45e9=_0x19a7f6;if(_0x187c6d[_0x4a45e9(0x211)][_0x4a45e9(0x1aa)]!=settings[_0x4a45e9(0x136)]&&'@'+_0x187c6d[_0x4a45e9(0x211)]['username']!=settings[_0x4a45e9(0x136)]||_0x187c6d['chat']['id']!=settings['telegramChatId'])return sendTelegram(_0x187c6d[_0x4a45e9(0x256)]['id'],_0x4a45e9(0x1fc),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x41637b=_0x19a7f6;if(tgBot)tgBot[_0x41637b(0x25d)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x41637b(0xef)]);let _0x2a86b4=_0x41637b(0x213);_0x2a86b4+='\x0a',_0x2a86b4+=_0x41637b(0x19f),_0x2a86b4+=_0x41637b(0x203),_0x2a86b4+=_0x41637b(0xf0),_0x2a86b4+=_0x41637b(0x180),_0x2a86b4+='/on\x20-\x20start\x20bot(s)\x0a',_0x2a86b4+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2a86b4+=_0x41637b(0x22c),_0x2a86b4+='/names\x20-\x20show\x20bot\x20names\x0a',_0x2a86b4+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x2a86b4+=_0x41637b(0xc2),_0x2a86b4+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x2a86b4+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x2a86b4+=_0x41637b(0x19e),_0x2a86b4+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3259f2=_0x41637b(0x133);_0x3259f2+='\x0a',_0x3259f2+=_0x2a86b4,tgBot[_0x41637b(0xa5)]((_0xeb6358,_0x3017d5)=>{const _0x413b6b=_0x41637b;logger[_0x413b6b(0x93)](getTimeStamp()+_0x413b6b(0xcf)),logger[_0x413b6b(0x1f0)]('Telegraf\x20error:',_0xeb6358);}),tgBot[_0x41637b(0x18e)](async(_0x1562e6,_0x112044)=>{const _0x9781c7=_0x41637b;if(!(!settings[_0x9781c7(0xb8)]&&_0x1562e6['update']['message'][_0x9781c7(0x227)]==_0x9781c7(0x26a))){if(!validateTelegram(_0x1562e6))return;}_0x112044();}),tgBot[_0x41637b(0x267)](_0x41637b(0x102),async _0x3f7c22=>{const _0x5b8363=_0x41637b;if(!settings[_0x5b8363(0xb8)])updateSetting('telegramChatId',_0x3f7c22[_0x5b8363(0x256)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x3f7c22))return;await sendTelegram(_0x3f7c22['chat']['id'],_0x3259f2);}),tgBot['command'](_0x41637b(0x123),async _0x51db8b=>{const _0x1a2e33=_0x41637b;updateSetting(_0x1a2e33(0xcc),!![]),await sendTelegram(_0x51db8b[_0x1a2e33(0x256)]['id'],'Notifications\x20enabled');}),tgBot[_0x41637b(0x267)](_0x41637b(0x177),async _0x373f36=>{const _0x103122=_0x41637b;await sendTelegram(_0x373f36[_0x103122(0x256)]['id'],_0x103122(0x15c)),updateSetting(_0x103122(0xcc),![]);}),tgBot[_0x41637b(0x267)](_0x41637b(0x233),async _0xae36f7=>{const _0x533056=_0x41637b,_0x55e98a=Markup[_0x533056(0x142)]([Markup[_0x533056(0xa1)][_0x533056(0x169)](_0x533056(0xf7),_0x533056(0x196)),Markup[_0x533056(0xa1)][_0x533056(0x169)](_0x533056(0x10c),_0x533056(0x1bf)),Markup[_0x533056(0xa1)][_0x533056(0x169)](_0x533056(0xb4),_0x533056(0x187))]);_0xae36f7['reply'](_0x533056(0x17f),_0x55e98a);}),tgBot[_0x41637b(0x13f)](_0x41637b(0x196),async _0x40184a=>{const _0x4d48f4=_0x41637b;_0x40184a[_0x4d48f4(0x212)](),updateSetting('telegramEvents',_0x4d48f4(0x1f9)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x40184a[_0x4d48f4(0x256)]['id'],_0x4d48f4(0x23a));}),tgBot['action'](_0x41637b(0x1bf),async _0x2151d2=>{const _0x38815c=_0x41637b;_0x2151d2[_0x38815c(0x212)](),updateSetting(_0x38815c(0xaf),_0x38815c(0xbb)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2151d2[_0x38815c(0x256)]['id'],_0x38815c(0x128));}),tgBot[_0x41637b(0x13f)](_0x41637b(0x187),async _0x2e8b19=>{const _0x50afa0=_0x41637b;_0x2e8b19[_0x50afa0(0x212)](),updateSetting(_0x50afa0(0xaf),_0x50afa0(0xe6)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2e8b19[_0x50afa0(0x256)]['id'],_0x50afa0(0x13a));}),tgBot[_0x41637b(0x267)](_0x41637b(0x10e),async _0x343d36=>{const _0x716d4b=_0x41637b,_0x4ceb81=getBotsWithMode();let _0x725000=_0x716d4b(0x130);config[_0x716d4b(0x240)](_0x49c444=>{const _0x2992ce=_0x716d4b,_0x16bd36=_0x4ceb81[_0x2992ce(0x164)](_0x9a7648=>_0x9a7648[_0x2992ce(0x1dd)]==_0x49c444[_0x2992ce(0x1dd)])[_0x2992ce(0x1a4)];_0x725000+=_0x2992ce(0x156)+_0x49c444[_0x2992ce(0x1dd)]+':\x20'+_0x49c444[_0x2992ce(0x10e)]+_0x2992ce(0x134)+_0x16bd36+_0x2992ce(0x134)+_0x49c444[_0x2992ce(0xac)]+'\x0a';}),_0x725000+='\x0a',_0x725000+=_0x716d4b(0x103),_0x725000+=!settings[_0x716d4b(0xcc)]?_0x716d4b(0x27c):_0x716d4b(0x10a),_0x725000+=settings[_0x716d4b(0xcc)]?settings[_0x716d4b(0xaf)]==_0x716d4b(0xe6)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x716d4b(0x1ee)+settings[_0x716d4b(0xaf)]+_0x716d4b(0x216):'',await sendTelegram(_0x343d36[_0x716d4b(0x256)]['id'],_0x725000,{'parse_mode':'HTML'});}),tgBot[_0x41637b(0x267)](_0x41637b(0x25f),async _0x595537=>{const _0x4006b5=_0x41637b,_0x2bf275=getEnabledBots();if(_0x2bf275[_0x4006b5(0x248)]==0x0)await sendTelegram(_0x595537['chat']['id'],_0x4006b5(0x1c3));else{if(_0x2bf275[_0x4006b5(0x248)]>0x1)_0x2bf275[_0x4006b5(0x214)]({'botID':'all'});let _0x347f79=[],_0x219744=[];const _0x482393=_0x2bf275['length']%0x4==0x0||_0x2bf275[_0x4006b5(0x248)]%0x4==0x3||_0x2bf275[_0x4006b5(0x248)]%0x3==0x1?0x4:0x3;let _0x13efa7=0x0;_0x2bf275[_0x4006b5(0x240)]((_0x44393e,_0x2baff2)=>{const _0x5b6091=_0x4006b5;if(_0x2baff2%_0x482393==0x0)_0x219744=[];_0x219744[_0x5b6091(0x214)](Markup[_0x5b6091(0xa1)][_0x5b6091(0x169)](_0x44393e[_0x5b6091(0x1dd)]=='all'?_0x5b6091(0xec):_0x5b6091(0x156)+_0x44393e['botID'],_0x5b6091(0x218)+_0x44393e[_0x5b6091(0x1dd)])),_0x2baff2%_0x482393==0x0&&(_0x347f79[_0x13efa7]=_0x219744,_0x13efa7++);});const _0x112f1e=Markup[_0x4006b5(0x142)](_0x347f79);_0x595537[_0x4006b5(0xd2)](_0x4006b5(0x170),_0x112f1e);}}),tgBot[_0x41637b(0x13f)](/restart_(.+)/,async _0x1550e3=>{const _0xbb958d=_0x41637b,_0x49dfa5=_0x1550e3['match'][0x1];_0x1550e3[_0xbb958d(0x212)](),_0x49dfa5==_0xbb958d(0xe6)?config[_0xbb958d(0x240)](_0x2668a0=>{restartBot(_0x2668a0['botID']);}):restartBot(_0x49dfa5);}),tgBot[_0x41637b(0x267)]('on',async _0x5a7f28=>{const _0x3fea9e=_0x41637b,_0x3e35ab=getDisabledBots();if(_0x3e35ab[_0x3fea9e(0x248)]==0x0)await sendTelegram(_0x5a7f28[_0x3fea9e(0x256)]['id'],_0x3fea9e(0x1b9));else{if(_0x3e35ab['length']>0x1)_0x3e35ab['push']({'botID':_0x3fea9e(0xe6)});let _0x1ccc87=[],_0x74db71=[];const _0x157d68=_0x3e35ab[_0x3fea9e(0x248)]%0x4==0x0||_0x3e35ab[_0x3fea9e(0x248)]%0x4==0x3||_0x3e35ab[_0x3fea9e(0x248)]%0x3==0x1?0x4:0x3;let _0x1a9a5f=0x0;_0x3e35ab[_0x3fea9e(0x240)]((_0x3d4301,_0x1f8498)=>{const _0x543a12=_0x3fea9e;if(_0x1f8498%_0x157d68==0x0)_0x74db71=[];_0x74db71[_0x543a12(0x214)](Markup['button'][_0x543a12(0x169)](_0x3d4301[_0x543a12(0x1dd)]==_0x543a12(0xe6)?_0x543a12(0xec):_0x543a12(0x156)+_0x3d4301['botID'],'on_'+_0x3d4301[_0x543a12(0x1dd)])),_0x1f8498%_0x157d68==0x0&&(_0x1ccc87[_0x1a9a5f]=_0x74db71,_0x1a9a5f++);});const _0xf16f66=Markup[_0x3fea9e(0x142)](_0x1ccc87);_0x5a7f28[_0x3fea9e(0xd2)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0xf16f66);}}),tgBot['action'](/on_(.+)/,async _0x5aea7f=>{const _0x5cbf28=_0x41637b,_0x4456ab=_0x5aea7f[_0x5cbf28(0x191)][0x1];_0x5aea7f[_0x5cbf28(0x212)]();if(_0x4456ab=='all'){const _0x16c8bc=getDisabledBots();await sendTelegram(_0x5aea7f['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x16c8bc['forEach'](_0x286f34=>{const _0x4376cc=_0x5cbf28;if(_0x286f34[_0x4376cc(0x1dd)]!=_0x4376cc(0xe6))toggleBot(_0x286f34[_0x4376cc(0x1dd)],toggleStatus(_0x286f34[_0x4376cc(0x1dd)]),_0x4376cc(0xee));});}else await sendTelegram(_0x5aea7f[_0x5cbf28(0x256)]['id'],_0x5cbf28(0xf1)+_0x4456ab),toggleBot(_0x4456ab,toggleStatus(_0x4456ab),_0x5cbf28(0xee));}),tgBot[_0x41637b(0x267)](_0x41637b(0x1df),async _0x332b0e=>{const _0x50fbd6=_0x41637b,_0x2034f1=getEnabledBots();if(_0x2034f1[_0x50fbd6(0x248)]==0x0)await sendTelegram(_0x332b0e[_0x50fbd6(0x256)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2034f1[_0x50fbd6(0x248)]>0x1)_0x2034f1[_0x50fbd6(0x214)]({'botID':_0x50fbd6(0xe6)});let _0x317dff=[],_0x27a4c7=[];const _0xd98af7=_0x2034f1[_0x50fbd6(0x248)]%0x4==0x0||_0x2034f1['length']%0x4==0x3||_0x2034f1[_0x50fbd6(0x248)]%0x3==0x1?0x4:0x3;let _0x14d456=0x0;_0x2034f1[_0x50fbd6(0x240)]((_0x4511a2,_0x832c7)=>{const _0x3e9a33=_0x50fbd6;if(_0x832c7%_0xd98af7==0x0)_0x27a4c7=[];_0x27a4c7[_0x3e9a33(0x214)](Markup[_0x3e9a33(0xa1)]['callback'](_0x4511a2[_0x3e9a33(0x1dd)]==_0x3e9a33(0xe6)?_0x3e9a33(0xec):_0x3e9a33(0x156)+_0x4511a2[_0x3e9a33(0x1dd)],_0x3e9a33(0x257)+_0x4511a2['botID'])),_0x832c7%_0xd98af7==0x0&&(_0x317dff[_0x14d456]=_0x27a4c7,_0x14d456++);});const _0x4f669b=Markup[_0x50fbd6(0x142)](_0x317dff);_0x332b0e[_0x50fbd6(0xd2)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x4f669b);}}),tgBot[_0x41637b(0x13f)](/off_(.+)/,async _0x33a119=>{const _0x51abfc=_0x41637b,_0x471f15=_0x33a119['match'][0x1];_0x33a119['editMessageReplyMarkup']();if(_0x471f15==_0x51abfc(0xe6)){const _0x45f1e1=getEnabledBots();await sendTelegram(_0x33a119[_0x51abfc(0x256)]['id'],_0x51abfc(0x21f)),_0x45f1e1[_0x51abfc(0x240)](_0x14f79a=>{const _0x481bdb=_0x51abfc;if(_0x14f79a[_0x481bdb(0x1dd)]!='all')toggleBot(_0x14f79a['botID'],toggleStatus(_0x14f79a[_0x481bdb(0x1dd)]),_0x481bdb(0xee));});}else await sendTelegram(_0x33a119[_0x51abfc(0x256)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x471f15),toggleBot(_0x471f15,toggleStatus(_0x471f15),'stopped');}),tgBot[_0x41637b(0x267)](_0x41637b(0xb2),async _0x51b446=>{const _0x149370=_0x41637b,_0x222b03=getEnabledBots();if(_0x222b03[_0x149370(0x248)]==0x0)await sendTelegram(_0x51b446['chat']['id'],_0x149370(0x1c3));else{if(_0x222b03[_0x149370(0x248)]>0x1){let _0x402320=[],_0x30a05d=[];const _0x61d839=_0x222b03[_0x149370(0x248)]%0x4==0x0||_0x222b03['length']%0x4==0x3||_0x222b03[_0x149370(0x248)]%0x3==0x1?0x4:0x3;let _0x2d66c0=0x0;_0x222b03[_0x149370(0x240)]((_0x3d18cb,_0x50eeb1)=>{const _0x477768=_0x149370;if(_0x50eeb1%_0x61d839==0x0)_0x30a05d=[];_0x30a05d['push'](Markup['button']['callback'](_0x477768(0x156)+_0x3d18cb[_0x477768(0x1dd)],_0x477768(0x186)+_0x3d18cb[_0x477768(0x1dd)])),_0x50eeb1%_0x61d839==0x0&&(_0x402320[_0x2d66c0]=_0x30a05d,_0x2d66c0++);});const _0xef4460=Markup[_0x149370(0x142)](_0x402320);_0x51b446['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0xef4460);}else{const _0x5e0829=_0x222b03[0x0][_0x149370(0x1dd)];if(pid[_0x5e0829])pid[_0x5e0829][_0x149370(0x224)]({'function':_0x149370(0xba),'args':null});}}}),tgBot[_0x41637b(0x13f)](/metrics_(.+)/,async _0x1caae2=>{const _0x1a61b7=_0x41637b,_0x116f9e=_0x1caae2[_0x1a61b7(0x191)][0x1];_0x1caae2[_0x1a61b7(0x212)]();if(pid[_0x116f9e])pid[_0x116f9e][_0x1a61b7(0x224)]({'function':'sendMetricsTelegram','args':null});}),tgBot['command'](_0x41637b(0x1c9),async _0x394809=>{const _0x12242a=_0x41637b,_0x58dbef=getEnabledBots();if(_0x58dbef[_0x12242a(0x248)]==0x0)await sendTelegram(_0x394809[_0x12242a(0x256)]['id'],_0x12242a(0x1c3));else{if(_0x58dbef['length']>0x1){let _0x926910=[],_0x4601f=[];const _0xf45adb=_0x58dbef[_0x12242a(0x248)]%0x4==0x0||_0x58dbef[_0x12242a(0x248)]%0x4==0x3||_0x58dbef[_0x12242a(0x248)]%0x3==0x1?0x4:0x3;let _0x17f807=0x0;_0x58dbef['forEach']((_0xe7093d,_0x4f5e4f)=>{const _0x3af4d7=_0x12242a;if(_0x4f5e4f%_0xf45adb==0x0)_0x4601f=[];_0x4601f[_0x3af4d7(0x214)](Markup[_0x3af4d7(0xa1)]['callback'](_0x3af4d7(0x156)+_0xe7093d[_0x3af4d7(0x1dd)],_0x3af4d7(0x242)+_0xe7093d[_0x3af4d7(0x1dd)])),_0x4f5e4f%_0xf45adb==0x0&&(_0x926910[_0x17f807]=_0x4601f,_0x17f807++);});const _0x2ea0f9=Markup[_0x12242a(0x142)](_0x926910);_0x394809[_0x12242a(0xd2)](_0x12242a(0x1cf),_0x2ea0f9);}else{const _0x1a541e=_0x58dbef[0x0]['botID'];if(pid[_0x1a541e])pid[_0x1a541e][_0x12242a(0x224)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['action'](/portfolio_(.+)/,async _0x41f207=>{const _0x1c9323=_0x41637b,_0x35dda7=_0x41f207[_0x1c9323(0x191)][0x1];_0x41f207[_0x1c9323(0x212)]();if(pid[_0x35dda7])pid[_0x35dda7][_0x1c9323(0x224)]({'function':_0x1c9323(0x1ab),'args':null});}),tgBot[_0x41637b(0x267)](_0x41637b(0x1d7),async _0x1767df=>{const _0x5b463a=_0x41637b;await getMessages();if(!updateAvailable)await sendTelegram(_0x1767df[_0x5b463a(0x256)]['id'],_0x5b463a(0x95));else{if(!validInstallation)await sendTelegram(_0x1767df[_0x5b463a(0x256)]['id'],_0x5b463a(0x12e));else{const _0x487e7e=Markup['inlineKeyboard']([Markup[_0x5b463a(0xa1)][_0x5b463a(0x169)]('Yes','update_yes'),Markup[_0x5b463a(0xa1)][_0x5b463a(0x169)]('No','update_no')]);_0x1767df[_0x5b463a(0xd2)](_0x5b463a(0x1e4),_0x487e7e);}}}),tgBot[_0x41637b(0x13f)](/update_(.+)/,async _0x526ef7=>{const _0x12a0ae=_0x41637b,_0x470166=_0x526ef7[_0x12a0ae(0x191)][0x1];_0x526ef7[_0x12a0ae(0x212)](),_0x470166==_0x12a0ae(0x166)&&(await sendTelegram(_0x526ef7[_0x12a0ae(0x256)]['id'],_0x12a0ae(0x160)),updateBB('update')),_0x470166=='no'&&await sendTelegram(_0x526ef7['chat']['id'],_0x12a0ae(0x27a));}),tgBot['command'](_0x41637b(0x149),async _0x59bdd5=>{const _0x57ad51=_0x41637b;if(!validInstallation)await sendTelegram(_0x59bdd5[_0x57ad51(0x256)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x369427=Markup[_0x57ad51(0x142)]([Markup[_0x57ad51(0xa1)][_0x57ad51(0x169)](_0x57ad51(0x253),_0x57ad51(0x1f6)),Markup[_0x57ad51(0xa1)]['callback']('No',_0x57ad51(0x1e3))]);_0x59bdd5[_0x57ad51(0xd2)](_0x57ad51(0x285),_0x369427);}}),tgBot[_0x41637b(0x13f)](/reinstall_(.+)/,async _0x43088a=>{const _0x3acbb2=_0x41637b,_0x160ddf=_0x43088a[_0x3acbb2(0x191)][0x1];_0x43088a[_0x3acbb2(0x212)](),_0x160ddf==_0x3acbb2(0x166)&&(await sendTelegram(_0x43088a[_0x3acbb2(0x256)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x3acbb2(0x149))),_0x160ddf=='no'&&await sendTelegram(_0x43088a[_0x3acbb2(0x256)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x41637b(0x267)](_0x41637b(0x111),async _0x4ec0c4=>{const _0x3c31b3=_0x41637b,_0x3d9657=getBotsWithMode();if(_0x3d9657[_0x3c31b3(0x248)]==0x0)await sendTelegram(_0x4ec0c4['chat']['id'],_0x3c31b3(0x1c3));else{let _0x83c32e=[],_0x344f4e=[];const _0x59d704=0x2;let _0x5eec98=0x0;_0x3d9657['forEach']((_0xc9467d,_0x4ddbae)=>{const _0x508672=_0x3c31b3;if(_0x4ddbae%_0x59d704==0x0)_0x344f4e=[];_0x344f4e[_0x508672(0x214)](Markup[_0x508672(0xa1)]['callback'](_0x508672(0x156)+_0xc9467d[_0x508672(0x1dd)]+'\x20('+_0xc9467d[_0x508672(0x1a4)]+')',_0x508672(0x1f5)+_0xc9467d[_0x508672(0x1dd)])),_0x4ddbae%_0x59d704==0x0&&(_0x83c32e[_0x5eec98]=_0x344f4e,_0x5eec98++);});const _0x28a2ff=Markup[_0x3c31b3(0x142)](_0x83c32e);_0x4ec0c4[_0x3c31b3(0xd2)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x28a2ff);}}),tgBot[_0x41637b(0x13f)](/toggle_(.+)/,async _0x5456c6=>{const _0x159426=_0x41637b,_0xfcad16=_0x5456c6[_0x159426(0x191)][0x1];_0x5456c6[_0x159426(0x212)]();const _0x53fd99=getBotsWithMode(),_0x578e40=_0x53fd99[_0x159426(0x164)](_0xfaf008=>_0xfaf008[_0x159426(0x1dd)]==_0xfcad16),_0x347f10=_0x578e40['mode']=='auto'?'manual':_0x159426(0x228);await sendTelegram(_0x5456c6[_0x159426(0x256)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0xfcad16+_0x159426(0x23d)+_0x347f10+_0x159426(0x215)),toggleBotMode(_0xfcad16);}),tgBot[_0x41637b(0x267)](_0x41637b(0x100),async _0x45452c=>{const _0x140b94=_0x41637b;let _0x117627='';config[_0x140b94(0x240)](_0x2f4597=>{const _0x2e9447=_0x140b94;_0x117627+=_0x2e9447(0x156)+_0x2f4597[_0x2e9447(0x1dd)]+':\x20'+_0x2f4597[_0x2e9447(0x209)]+'\x0a';}),await sendTelegram(_0x45452c[_0x140b94(0x256)]['id'],_0x117627,{'parse_mode':_0x140b94(0x1b5)});}),tgBot[_0x41637b(0x267)](_0x41637b(0x9f),async _0x5b63f2=>{await sendTelegram(_0x5b63f2['chat']['id'],_0x2a86b4);}),process[_0x41637b(0x17c)](_0x41637b(0x145),()=>tgBot[_0x41637b(0x25d)](_0x41637b(0x145))),process['once']('SIGTERM',()=>tgBot['stop']('SIGTERM')),tgBot[_0x41637b(0x174)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x307bf7,_0x141e1e,_0xc13308){const _0x43a055=_0x19a7f6;try{await tgBot[_0x43a055(0x24d)][_0x43a055(0xb9)](_0x307bf7,_0x141e1e,_0xc13308);}catch(_0x35ba99){console[_0x43a055(0x1cd)]('Telegram\x20error:',_0x35ba99);}}async function sendTelegramBot(_0x448277,_0x3ae3ba){const _0x269a7a=_0x19a7f6;if(settings[_0x269a7a(0xcc)]){if(settings['telegramEvents']==_0x269a7a(0xe6)||(_0x3ae3ba[_0x269a7a(0x16d)]==_0x269a7a(0x254)||_0x3ae3ba[_0x269a7a(0x16d)]==_0x269a7a(0x129)||_0x3ae3ba[_0x269a7a(0x16d)]==_0x269a7a(0x258))&&settings['telegramEvents']==_0x269a7a(0xbb)||_0x3ae3ba[_0x269a7a(0x16d)]==_0x269a7a(0x20e)&&settings[_0x269a7a(0xaf)]==_0x269a7a(0x1f9)){if(tgBot&&settings[_0x269a7a(0xb8)]){if(_0x3ae3ba['showname'])await sendTelegram(settings['telegramChatId'],_0x3ae3ba[_0x269a7a(0x209)]+_0x269a7a(0x1d4)+_0x3ae3ba[_0x269a7a(0x1d9)]);else await sendTelegram(settings['telegramChatId'],_0x269a7a(0x156)+_0x448277+_0x269a7a(0x1d4)+_0x3ae3ba[_0x269a7a(0x1d9)]);}}}}async function sendTelegramMsg(_0x526380,_0x1ffa77='HTML'){const _0xf24ea9=_0x19a7f6;return settings[_0xf24ea9(0xcc)]&&tgBot&&settings[_0xf24ea9(0xb8)]?(await sendTelegram(settings['telegramChatId'],_0x526380,{'parse_mode':_0x1ffa77}),!![]):![];}function getDeviceWithIp(_0x3add48){const _0x5640ee=_0x19a7f6;return devices[_0x5640ee(0x164)](_0x24ad58=>_0x24ad58['ip']===_0x3add48);}function _0x588a(){const _0x306117=['write','readdirSync','2FA\x20required','/:bot/history','Unauthorized\x20attempt\x20to\x20confirm\x20message','Error:\x20Invalid\x20argument\x20','Enabled\x20Bot\x20','logs/','***','help','size','button','private',',\x20must\x20be\x20a\x204\x20digit\x20number','mkdirSync','catch','reinstall-bb','name','number','https://api.ipify.org?format=json','getMonth','::ffff:127.0.0.1','live','RSA','notification','telegramEvents','1286367FVkoWj','login\x20not\x20required','metrics','inherit','All','f2aRequired','graphql-request','bbPassword','telegramChatId','sendMessage','sendMetricsTelegram','alerts','.zip','entries','config/','12xbNOJN','existsSync','Unauthorized\x20attempt\x20to\x20show\x20configuration','/metrics\x20-\x20show\x20bot\x20performance\x0a','emit','pidRefreshToken','bbUsername','Crypt','hex','slice','apiKey','Backup\x20file\x20unzipped\x20and\x20stored','new-disabled','telegramEnabled','/output-000.log','settings',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','onepagemode','headless','reply','socket','remove','expiry','getHours','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','replace','logout','/:bot/support','Error\x20while\x20deleting\x20config\x20files:\x20','node','exchange','join','get-portfolio','referer','DEFLATE','Disabled\x20Bot\x20','axios','getFullYear','createServer','all','Failed\x20to\x20download\x20','path','bots','blacklist','output-002.log','All\x20bots','encryptedUuid','stopped','telegramToken','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','3000','cloneDeep','delete-alerts','5057912qhwxGh','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Orders','Unauthorized\x20attempt\x20to\x20download\x20','allow','disabled','Password\x20has\x20been\x20reset\x20to:\x20','util','bcryptjs','user','Idling\x20(','names','cancel-loading','start','<b>Telegram\x20Bot\x20Status:</b>\x0a','string','Unauthorized\x20attempt\x20to\x20delete\x20alerts','exp','\x1b[34m','18146140GoZaEq','binary','Notifications\x20enabled\x0a','resetpw_no','Alerts','28ZdwYQT','status','\x1b[35m','Unauthorized\x20attempt\x20to\x20get\x20events','toggle','Invalid\x20username\x20or\x20IP\x20address','update-bot','Server','\x20(2)','reset-history','accept','User\x20has\x20been\x20validated','showConfig','Restore\x20process\x20aborted','toIPv4Address','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','3937026ArbEhd','getTime','statSync','backup','mtime','file','enable','bb-secure.json','environment','-config.json','settings.','Ok,\x20will\x20send\x20alert\x20notifications\x20only','warning','stringify','sha256','build','get','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','build2','<b>Balance\x20Bot\x20Status:</b>\x0a','then','constructor','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','\x20|\x20','removeAllListeners','telegramUsername','endsWith','botmanager','listen','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','No\x20authentication\x20token','Unauthorized\x20attempt\x20to\x20get\x20messages','get-backup-files','backup/','action','decrypt','delete-bot','inlineKeyboard','10INdmaS','lastmsgemitted','SIGINT','tempaccess_15_','6b67f3d61ee94b8f5c80b4affef4c4d9','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','reinstall','(((.+)+)+)+$','\x1b[36m','Restore\x20backup\x20file\x20','backup-full@','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','sortBy','connected','close','Markdown','confirm-message','timeshift','node-zip','Bot\x20','bb/','invalid\x20credentials','exit','Invalid\x20IP\x20address','family','Notifications\x20disabled','access','_data','RSA-OAEP','Starting\x20Balance\x20Bot\x20update','readFileSync','store-headless','sort','find','production','yes','pidExpireLogin','getMinutes','callback','get-starting-balances','writeFileSync','express','type','deleteHistoryAlerts','2FA','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','disconnect','download','copyFileSync','launch','request','Restore\x20process\x20confirmed','disable','bbvReceive','reject','isDirectory','jsonwebtoken','once','whitelistEnabled','headers','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/restart\x20-\x20restart\x20bot(s)\x0a','padStart','toggle-bot-mode','add-bot','Starting\x20(','assign','metrics_','config_all','show-config','http','remoteAddress','updatebotmanager','get-logs','Logged\x20in\x20user\x20...','use','\x20|\x20client:\x20...','generateKeyPairAsync','match','toString','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','secure','restore_no_','config_orders','params','latestversion','message','crypto','max','Unauthorized\x20attempt\x20to\x20update\x20bot','kill','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','/enable\x20-\x20enable\x20notifications\x0a','apply','backup-files','bb-config.json','new','mode','bb-settings.json','hashSync','temporary\x20token\x20generated','#RES#\x20if\x20running\x20locally\x0a','login\x20token\x20generated','username','sendPortfolioTelegram','init','port','15\x20min','version.json','keys','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','sign','static','tempaccess_reject_','HTML','function','127.0.0.1','any','All\x20bots\x20running\x20right\x20now','files','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','manual','getDate','full','config_alerts','started','post','socket.io','No\x20bots\x20running\x20right\x20now','getUTCHours','value','tempaccess_30_','backup-full','Invalid\x20authentication\x20token\x20(2)','portfolio','BM\x20received\x20exit\x20signal','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','bot','log','uncaughtException','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','compareSync','Restoring\x20bot(s)\x20from\x20backup',')\x20|\x20Bot\x20','userid','\x20>\x20','\x1b[33m','verify','update','780752UKjkst','event','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','isValid','11173248aHuFsn','botID','bot.js','off','2FA\x20login\x20rejected','data','Node.js\x20v','reinstall_no','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/:bot/performance','63430tmDXxf','store','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','storeHeadless','/download/:type','generate','IPv4','Notifications\x20types:\x20','parse','debug','clientip','secret','************','uuid','toggle_','reinstall_yes','timestamp','temp/','orders','emitHistory','handshake','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','NTBA_FIX_319','unlinkSync','add','cancelLoading','bbvNew','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','/disable\x20-\x20disable\x20notifications\x0a','[ip-address]','#RES#\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','staging','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','botname','show','place-order','mixpanel','publicKey','order','telegramIpApproval','privateKey','from','editMessageReplyMarkup','You\x20can\x20use\x20the\x20following\x20commands:\x0a','push','\x20mode','\x20only\x0a','rmSync','restart_','Unauthorized\x20attempt\x20to\x20add\x20bot','apiPassword','reload','$1_$2_$3','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','test','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','-events.json','internal','token','\x1b[0m','send','Backup\x20file\x20uploaded','fork','text','auto','getPortfolio','reason','2FA\x20login\x20required','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','telegrammsg','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','password','api-eu.mixpanel.com','output-003.log','output-001.log','config','format','loginRequired','0.0.0','1000','2FA\x20login\x20token\x20generated','Starting\x20new\x20bot\x20|\x20Bot\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','get-messages','\x20to\x20','getStartingBalances','store-configuration','forEach','store-settings','portfolio_','telegram2FaApproval','\x20(1)','getSeconds','/:bot/portfolio','hybrid-crypto-js','length','zip/','sendFile','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20store\x20configuration','telegram','Bot\x20Mgr\x20>\x20','conn','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','bot-','includes','Yes','error','30\x20min','chat','off_','success','enabled','hasOwnProperty','lastmsgtelegram','min','stop','\x1b[31m','restart','createWriteStream','resetpw_yes','storeConfiguration','messages','BM\x20received\x20sigint\x20signal','output-000.log','\x20minutes','command','child_process','resetHistory','/start','argv','clients','Token\x20blacklisted','Unauthorized\x20attempt\x20to\x20update\x20settings','index.html','Login\x20rejected','logged\x20out','whitelist','login\x20required','Unauthorized\x20login\x20attempt\x20(timeout)','-results.json',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Restarting\x20Bot\x20','title','login','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','split','Notifications\x20disabled\x0a','filter','startsWith','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','initclient','sockets','logs','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Error\x20removing\x20old\x20backup\x20files:','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','-performance.json','defaults','address','date-fns','simple','Access\x20enabled\x20for\x20','Your\x20installation\x20is\x20already\x20up\x20to\x20date'];_0x588a=function(){return _0x306117;};return _0x588a();}async function temporaryAccess2FA(_0x2541f5,_0x387f47){const _0x25e42a=_0x19a7f6;let _0x1e5f8a=new Date(),_0x15d1ea=![];if(lastIpApproval){if(_0x1e5f8a-lastIpApproval<0x1388)_0x15d1ea=!![];}lastIpApproval=new Date();if(_0x15d1ea)return;if(tgBot&&settings['telegramChatId']){const _0x50b5e2=uuidRandom();tmpStorage[_0x50b5e2]={'uuid':_0x2541f5,'externalip':_0x387f47};const _0x3657f5=Markup['inlineKeyboard']([Markup[_0x25e42a(0xa1)][_0x25e42a(0x169)]('5\x20min','tempaccess_5_'+_0x50b5e2),Markup[_0x25e42a(0xa1)]['callback'](_0x25e42a(0x1ae),_0x25e42a(0x146)+_0x50b5e2),Markup['button'][_0x25e42a(0x169)](_0x25e42a(0x255),_0x25e42a(0x1c6)+_0x50b5e2),Markup[_0x25e42a(0xa1)]['callback'](_0x25e42a(0x179),_0x25e42a(0x1b4)+_0x50b5e2)]);await sendTelegram(settings[_0x25e42a(0xb8)],_0x25e42a(0x283)+normalizeIP(_0x387f47)[_0x25e42a(0x20a)]+'\x20?',_0x3657f5),tgBot[_0x25e42a(0x13f)](/tempaccess_(.+)_(.+)/,async _0x5aaf6f=>{const _0x181228=_0x25e42a,_0x424648=_0x5aaf6f['match'][0x1],_0x435547=_0x5aaf6f[_0x181228(0x191)][0x2],{uuid:_0x568402,externalip:_0x1f6ed1}=tmpStorage[_0x435547];delete tmpStorage[_0x435547],_0x5aaf6f[_0x181228(0x212)](),devices[_0x568402]['telegramIpApproval']={'clientip':_0x1f6ed1,'timestamp':new Date()['getTime'](),'expiry':_0x424648},_0x424648!='reject'?(await sendTelegram(_0x5aaf6f[_0x181228(0x256)]['id'],_0x181228(0x94)+_0x424648+_0x181228(0x266),{'parse_mode':_0x181228(0x1b5)}),io['to'](_0x568402)[_0x181228(0xc3)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x5aaf6f[_0x181228(0x256)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x568402)[_0x181228(0xc3)](_0x181228(0x10e),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x6ca699,_0x5a2e97){const _0x1267c7=_0x19a7f6;if(tgBot&&settings[_0x1267c7(0xb8)]){const _0x18d3b4=uuidRandom();tmpStorage[_0x18d3b4]={'uuid':_0x6ca699,'externalip':_0x5a2e97};const _0xe01d86=Markup[_0x1267c7(0x142)]([Markup[_0x1267c7(0xa1)][_0x1267c7(0x169)](_0x1267c7(0x117),'login2fa_'+loginExpiry+'_'+_0x18d3b4),Markup[_0x1267c7(0xa1)][_0x1267c7(0x169)](_0x1267c7(0x179),'login2fa_reject_'+_0x18d3b4)]);await sendTelegram(settings[_0x1267c7(0xb8)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x5a2e97)[_0x1267c7(0x20a)]+'\x20?',_0xe01d86),tgBot[_0x1267c7(0x13f)](/login2fa_(.+)_(.+)/,async _0x2396a3=>{const _0x5223ae=_0x1267c7,_0x38b048=_0x2396a3['match'][0x1],_0x382eb8=_0x2396a3['match'][0x2],{uuid:_0x2977a8,externalip:_0x5958b1}=tmpStorage[_0x382eb8];delete tmpStorage[_0x382eb8],_0x2396a3[_0x5223ae(0x212)](),devices[_0x2977a8][_0x5223ae(0x243)]={'clientip':_0x5958b1,'timestamp':new Date()[_0x5223ae(0x11e)](),'expiry':_0x38b048},_0x38b048!='reject'?(await sendTelegram(_0x2396a3['chat']['id'],'Login\x20accepted',{'parse_mode':_0x5223ae(0x1b5)}),io['to'](_0x2977a8)[_0x5223ae(0xc3)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x2396a3['chat']['id'],_0x5223ae(0x270)),io['to'](_0x2977a8)[_0x5223ae(0xc3)](_0x5223ae(0x10e),{'access':{'allow':![],'reason':_0x5223ae(0x1e0),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x379c37=_0x19a7f6;return dbConfig[_0x379c37(0x12d)]('bots')[_0x379c37(0x14f)](_0x379c37(0x1dd))[_0x379c37(0x27d)]({'status':_0x379c37(0x259)})[_0x379c37(0x1c5)]()||[];}function getDisabledBots(){const _0x208b77=_0x19a7f6;return dbConfig[_0x208b77(0x12d)](_0x208b77(0xe9))[_0x208b77(0x14f)]('botID')[_0x208b77(0x27d)]({'status':_0x208b77(0xfa)})['value']()||[];}function getBotAttributes(_0x190b00){const _0x10ea82=_0x19a7f6;let _0x45118b={};const _0x477046=configpath+_0x10ea82(0x251)+_0x190b00+_0x10ea82(0x126),_0x5196c4=fs[_0x10ea82(0xc0)](_0x477046);if(_0x5196c4){const _0x5000db=fs[_0x10ea82(0x161)](_0x477046);try{const _0x3d027c=JSON[_0x10ea82(0x1ef)](_0x5000db),_0x3671bf=_0x3d027c?_0x3d027c[_0x10ea82(0x1cc)][0x0][_0x10ea82(0xd1)]:![];_0x45118b[_0x10ea82(0x1a4)]=_0x3671bf?_0x10ea82(0x228):_0x10ea82(0x1bc),_0x45118b[_0x10ea82(0x209)]=_0x3d027c?_0x3d027c[_0x10ea82(0x1cc)][0x0]['botname']:_0x10ea82(0x156)+_0x190b00;}catch(_0x48c787){_0x45118b[_0x10ea82(0x1a4)]='manual',_0x45118b[_0x10ea82(0x209)]=_0x10ea82(0x156)+_0x190b00;}}else _0x45118b[_0x10ea82(0x1a4)]=_0x10ea82(0x1bc),_0x45118b[_0x10ea82(0x209)]=_0x10ea82(0x156)+_0x190b00;return _0x45118b;}function getBotsWithMode(){const _0xef0002=_0x19a7f6,_0x16c655=dbConfig[_0xef0002(0x12d)](_0xef0002(0xe9))[_0xef0002(0x14f)](_0xef0002(0x1dd))[_0xef0002(0x1c5)]()||[];return _0x16c655['forEach'](_0x1d277e=>{const _0x4a9fbe=_0xef0002;let _0x2d98da=getBotAttributes(_0x1d277e[_0x4a9fbe(0x1dd)]);_0x1d277e[_0x4a9fbe(0x1a4)]=_0x2d98da[_0x4a9fbe(0x1a4)];}),_0x16c655;}function getBotExchanges(){const _0xafdfaa=_0x19a7f6;let _0x280b0b=[];const _0x5254bc=dbConfig[_0xafdfaa(0x12d)]('bots')[_0xafdfaa(0x14f)](_0xafdfaa(0x1dd))['value']()||[];_0x5254bc['forEach'](_0x1f3569=>{const _0x23b29e=_0xafdfaa;if(_0x1f3569[_0x23b29e(0x10e)]=='enabled'){const _0x14536e=configpath+'bot-'+_0x1f3569[_0x23b29e(0x1dd)]+_0x23b29e(0x126),_0x36c588=fs['existsSync'](_0x14536e);let _0x3d581f;if(_0x36c588){const _0x1cefc3=fs[_0x23b29e(0x161)](_0x14536e);try{const _0x24ea0f=JSON[_0x23b29e(0x1ef)](_0x1cefc3);_0x3d581f=_0x24ea0f?_0x24ea0f['bot'][0x0][_0x23b29e(0xdd)]:null;}catch(_0x3e0e97){}}if(_0x3d581f)_0x280b0b[_0x23b29e(0x214)](_0x3d581f);}});const _0x23f4b3=[...new Set(_0x280b0b)]['sort']();return _0x23f4b3;}async function initUser(){const _0x5e33b3=_0x19a7f6;if(!settings[_0x5e33b3(0x1d3)]){const _0x38145d=uuidRandom();mixpanel['alias'](_0x38145d),updateSetting(_0x5e33b3(0x1d3),_0x38145d);}}async function initSecure(){const _0xb4f968=_0x19a7f6;let _0x318667=getSecure();if(!_0x318667[_0xb4f968(0x25a)](_0xb4f968(0x1f2))){let _0x5c5491=await generateKeys();_0x318667[_0xb4f968(0x20d)]=_0x5c5491['publicKey'],_0x318667[_0xb4f968(0x210)]=_0x5c5491[_0xb4f968(0x210)],_0x318667[_0xb4f968(0x1f2)]=crypto['randomBytes'](0x20)[_0xb4f968(0x192)](_0xb4f968(0xc7));;storeSecure(_0x318667);}}function getSettings(){const _0x5337c8=_0x19a7f6;return dbSettings[_0x5337c8(0x12d)]('settings')[_0x5337c8(0x1c5)]()||{};}function getSecure(){const _0x57d515=_0x19a7f6;return dbSecure[_0x57d515(0x12d)](_0x57d515(0x194))[_0x57d515(0x1c5)]()||{};}function getBlacklist(){const _0x43e338=_0x19a7f6;return dbSecure['get'](_0x43e338(0xea))['value']()||[];}function broadcastToBots(_0x25c2d6,_0x2b62ac){config['forEach'](_0x4f6f4a=>{const _0x16418d=_0x2c7c;if(_0x4f6f4a['status']==_0x16418d(0x259)&&_0x4f6f4a[_0x16418d(0xac)]=='running'||_0x4f6f4a['status']=='new'&&_0x4f6f4a[_0x16418d(0xac)]=='running'){if(pid[_0x4f6f4a[_0x16418d(0x1dd)]])pid[_0x4f6f4a[_0x16418d(0x1dd)]]['send']({[_0x25c2d6]:_0x2b62ac});}});}function storeSettings(_0x399e33,_0x2e01c2=![]){const _0x175cde=_0x19a7f6;_0x399e33={...settings,..._0x399e33};if(_0x2e01c2&&_0x399e33[_0x175cde(0xb7)]!=_0x175cde(0x1f3)&&_0x399e33['bbPassword']!='***'&&_0x399e33[_0x175cde(0xb7)]!=''){const _0x21f2da=crypt['decrypt'](secure[_0x175cde(0x210)],_0x399e33[_0x175cde(0xb7)])[_0x175cde(0x199)][_0x175cde(0x27b)]('@')[0x0],_0x2e96e0=bcrypt['hashSync'](_0x21f2da,saltRounds);_0x399e33={..._0x399e33,'bbPassword':_0x2e96e0};}if(_0x2e01c2&&_0x399e33['telegramToken']!='************'&&_0x399e33[_0x175cde(0xef)]!=_0x175cde(0x9e)&&_0x399e33[_0x175cde(0xef)]!=''){const _0x5c27ab=crypt[_0x175cde(0x140)](secure[_0x175cde(0x210)],_0x399e33['telegramToken'])[_0x175cde(0x199)][_0x175cde(0x27b)]('@')[0x0];_0x399e33={..._0x399e33,'telegramToken':_0x5c27ab};}const _0x39e3bd=_0x399e33['telegramToken']!='************'&&_0x399e33[_0x175cde(0xef)]!=settings['telegramToken']||_0x399e33[_0x175cde(0x136)]!=settings['telegramUsername'],_0x3d16ae=_0x399e33[_0x175cde(0xef)]==''||_0x399e33[_0x175cde(0x136)]=='';_0x39e3bd&&(_0x399e33[_0x175cde(0xb8)]=null,_0x399e33[_0x175cde(0xaf)]='all');for(const [_0x1e6332,_0x2efedc]of Object[_0x175cde(0xbd)](_0x399e33)){if(_0x1e6332==_0x175cde(0xef)&&_0x2efedc==_0x175cde(0x1f3)){_0x399e33[_0x175cde(0xef)]=settings[_0x175cde(0xef)];continue;};if(_0x1e6332==_0x175cde(0xb7)&&_0x2efedc==_0x175cde(0x1f3)){_0x399e33['bbPassword']=settings['bbPassword'];continue;};dbSettings['set'](_0x175cde(0x127)+_0x1e6332,_0x2efedc)['write']();}settings=_0x399e33,io['to'](_0x175cde(0x138))[_0x175cde(0xc3)](_0x175cde(0xce),cleanSettings()),broadcastToBots('timeshift',settings[_0x175cde(0x154)]),broadcastToBots(_0x175cde(0xd0),settings[_0x175cde(0xd0)]);if(_0x39e3bd&&!_0x3d16ae)initTelegram();if(_0x39e3bd&&_0x3d16ae)disableTelegram();getAllClients()[_0x175cde(0x240)](_0x8c6fcf=>{const _0x34b37d=_0x175cde;getSocket(_0x8c6fcf['id'])[_0x34b37d(0xc3)](_0x34b37d(0x10e),{'access':{'allow':![],'reason':_0x34b37d(0x21b),'token':null}});});}function _0x2c7c(_0x3d9e02,_0x354ffe){const _0x33b81a=_0x588a();return _0x2c7c=function(_0x52ae00,_0x197a9a){_0x52ae00=_0x52ae00-0x93;let _0x588a37=_0x33b81a[_0x52ae00];return _0x588a37;},_0x2c7c(_0x3d9e02,_0x354ffe);}function updateSetting(_0x4687fb,_0x10ce9f){const _0x3d3ca6=_0x19a7f6;dbSettings['set'](_0x3d3ca6(0x127)+_0x4687fb,_0x10ce9f)['write'](),settings=getSettings(),io['to'](_0x3d3ca6(0x138))[_0x3d3ca6(0xc3)](_0x3d3ca6(0xce),cleanSettings());}function storeSecure(_0x5a1c8c){const _0x4b4fc7=_0x19a7f6;dbSecure[_0x4b4fc7(0x12d)]('secure')['push'](_0x5a1c8c)[_0x4b4fc7(0x96)](),secure=_0x5a1c8c;}function addBlacklist(_0x1f5b8c){const _0x1bd2a1=_0x19a7f6;cleanBlacklist();let _0x58c97e;devices[_0x1f5b8c][_0x1bd2a1(0x20f)]?_0x58c97e=Math[_0x1bd2a1(0x19b)](devices[_0x1f5b8c][_0x1bd2a1(0x20f)][_0x1bd2a1(0xd5)],loginExpiry):_0x58c97e=loginExpiry,dbSecure[_0x1bd2a1(0x12d)](_0x1bd2a1(0xea))[_0x1bd2a1(0x214)]({'expiry':new Date()[_0x1bd2a1(0x11e)]()+_0x58c97e*0x3c*0x3e8,'token':devices[_0x1f5b8c][_0x1bd2a1(0x15d)][_0x1bd2a1(0x222)]})[_0x1bd2a1(0x96)](),blacklist=dbSecure[_0x1bd2a1(0x12d)]('blacklist')[_0x1bd2a1(0x1c5)]();}function cleanBlacklist(){const _0x495af9=_0x19a7f6;let _0x1f020f=dbSecure[_0x495af9(0x12d)](_0x495af9(0xea))[_0x495af9(0xf3)]()[_0x495af9(0x1c5)](),_0x5721f7=new Date()[_0x495af9(0x11e)]();_0x1f020f[_0x495af9(0x240)](_0x5eb488=>{const _0x244fb6=_0x495af9;_0x5eb488[_0x244fb6(0xd5)]<_0x5721f7&&dbSecure[_0x244fb6(0x12d)]('blacklist')['remove']({'expiry':_0x5eb488[_0x244fb6(0xd5)]})['write']();});}function initStates(){const _0x49bf01=_0x19a7f6;let _0x5b4b85=getConfiguration();_0x5b4b85[_0x49bf01(0x240)](_0x333d58=>{const _0x393d26=_0x49bf01;_0x333d58['live']=_0x393d26(0xee);}),storeConfiguration(_0x5b4b85);}function onKeys(){const _0xf8bfe2=new RSA();return new Promise(_0x3f29f9=>{const _0x566c03=_0x2c7c;_0xf8bfe2[_0x566c03(0x190)]()[_0x566c03(0x131)](_0x4ec488=>{_0x3f29f9(_0x4ec488);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1c2ad5=_0x19a7f6;let _0x4843ff=getSettings(),_0x1b2d31=![];!_0x4843ff['hasOwnProperty']('lastmsgtelegram')&&(_0x4843ff[_0x1c2ad5(0x25b)]=0x0,_0x1b2d31=!![]);!_0x4843ff['hasOwnProperty'](_0x1c2ad5(0x144))&&(_0x4843ff[_0x1c2ad5(0x144)]=0x0,_0x1b2d31=!![]);!_0x4843ff['hasOwnProperty']('latestversion')&&(_0x4843ff['latestversion']=_0x1c2ad5(0x236),_0x1b2d31=!![]);!_0x4843ff[_0x1c2ad5(0x25a)](_0x1c2ad5(0xd0))&&(_0x4843ff[_0x1c2ad5(0xd0)]=![],_0x1b2d31=!![]);if(_0x1b2d31)storeSettings(_0x4843ff);try{fs[_0x1c2ad5(0x97)](configbackuppath,{'withFileTypes':!![]})[_0x1c2ad5(0x240)](_0x1ffc08=>{const _0x31239c=_0x1c2ad5;if(!_0x1ffc08[_0x31239c(0x17a)]()){if(!_0x1ffc08[_0x31239c(0xa7)][_0x31239c(0x27e)](_0x31239c(0x14d)))fs[_0x31239c(0x1fe)](configbackuppath+_0x1ffc08['name']);}else fs[_0x31239c(0x217)](configbackuppath+_0x1ffc08[_0x31239c(0xa7)],{'recursive':!![]});});}catch(_0x488c3d){logger[_0x1c2ad5(0x1f0)](_0x1c2ad5(0x284),_0x488c3d);}}function storeConfiguration(_0xbb2682){const _0x3d2377=_0x19a7f6;dbConfig['get'](_0x3d2377(0xe9))[_0x3d2377(0xd4)]()[_0x3d2377(0x96)](),dbConfig[_0x3d2377(0x12d)](_0x3d2377(0xe9))[_0x3d2377(0x214)](..._0xbb2682)[_0x3d2377(0x96)](),config=_0xbb2682;}async function resetPassword(){const _0x1b69e2=_0x19a7f6;if(tgBot&&settings['telegramChatId']){const _0x6636a8=Markup[_0x1b69e2(0x142)]([Markup[_0x1b69e2(0xa1)][_0x1b69e2(0x169)](_0x1b69e2(0x166),_0x1b69e2(0x261)),Markup[_0x1b69e2(0xa1)][_0x1b69e2(0x169)]('no',_0x1b69e2(0x10b))]);await sendTelegram(settings[_0x1b69e2(0xb8)],_0x1b69e2(0x21d),_0x6636a8),tgBot[_0x1b69e2(0x13f)](/resetpw_(.+)/,async _0x5df503=>{const _0x4d8045=_0x1b69e2,_0x51afe0=_0x5df503[_0x4d8045(0x191)][0x1];_0x5df503['editMessageReplyMarkup']();if(_0x51afe0!='no'){const _0x3857d4=0xf,_0x348bd2=_0x4d8045(0x1da),_0x42d04d=Array[_0x4d8045(0x211)](crypto['randomFillSync'](new Uint32Array(_0x3857d4)))['map'](_0x3cd9dc=>_0x348bd2[_0x3cd9dc%_0x348bd2['length']])['join'](''),_0x1ac88d=bcrypt[_0x4d8045(0x1a6)](_0x42d04d,saltRounds);storeSettings({'bbPassword':_0x1ac88d}),await sendTelegram(_0x5df503[_0x4d8045(0x256)]['id'],_0x4d8045(0xfb)+_0x42d04d,{'parse_mode':'HTML'});}else await sendTelegram(_0x5df503['chat']['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x19e5f6,_0x83123d){const _0x279f10=_0x19a7f6;io['to'](_0x279f10(0x138))[_0x279f10(0xc3)]('notification',_0x279f10(0x250),'success');if(tgBot&&settings[_0x279f10(0xb8)]){const _0x2b13e3=uuidRandom();tmpStorage[_0x2b13e3]={'path':_0x19e5f6,'filename':_0x83123d};const _0x4b10f6=Markup[_0x279f10(0x142)]([Markup[_0x279f10(0xa1)][_0x279f10(0x169)](_0x279f10(0x166),'restore_yes_'+_0x2b13e3),Markup[_0x279f10(0xa1)][_0x279f10(0x169)]('no',_0x279f10(0x195)+_0x2b13e3)]);await sendTelegram(settings[_0x279f10(0xb8)],_0x279f10(0x148),_0x4b10f6),tgBot[_0x279f10(0x13f)](/restore_(.+)_(.+)/,async _0x18abe8=>{const _0x41f03f=_0x279f10,_0xf9728c=_0x18abe8[_0x41f03f(0x191)][0x1],_0x25a656=_0x18abe8[_0x41f03f(0x191)][0x2],{path:_0x5b08ad,filename:_0x4de578}=tmpStorage[_0x25a656];delete tmpStorage[_0x25a656],_0x18abe8[_0x41f03f(0x212)](),_0xf9728c==_0x41f03f(0x166)?(logger[_0x41f03f(0x1f0)](_0x41f03f(0x176)),await sendTelegram(_0x18abe8[_0x41f03f(0x256)]['id'],_0x41f03f(0x1d1),{'parse_mode':'HTML'}),unzipFile(_0x5b08ad,_0x4de578)):(logger[_0x41f03f(0x1f0)]('Restore\x20process\x20aborted'),await sendTelegram(_0x18abe8[_0x41f03f(0x256)]['id'],_0x41f03f(0x11a)));});}}function getServerTime(){const _0x958d67=_0x19a7f6,_0x193dab=new Date();return _0x193dab[_0x958d67(0xe4)]()+'/'+(_0x193dab['getMonth']()+0x1)[_0x958d67(0x192)]()[_0x958d67(0x181)](0x2,'0')+'/'+_0x193dab[_0x958d67(0x1bd)]()['toString']()[_0x958d67(0x181)](0x2,'0')+'\x20'+_0x193dab[_0x958d67(0xd6)]()['toString']()['padStart'](0x2,'0')+':'+_0x193dab['getMinutes']()[_0x958d67(0x192)]()[_0x958d67(0x181)](0x2,'0')+':'+_0x193dab[_0x958d67(0x245)]()[_0x958d67(0x192)]()[_0x958d67(0x181)](0x2,'0');}function getTimeStamp(){const _0x101d79=_0x19a7f6,_0x3ed011=shiftedTime();return _0x3ed011['getFullYear']()+'/'+(_0x3ed011[_0x101d79(0xaa)]()+0x1)[_0x101d79(0x192)]()[_0x101d79(0x181)](0x2,'0')+'/'+_0x3ed011[_0x101d79(0x1bd)]()[_0x101d79(0x192)]()['padStart'](0x2,'0')+'\x20'+_0x3ed011[_0x101d79(0xd6)]()['toString']()[_0x101d79(0x181)](0x2,'0')+':'+_0x3ed011[_0x101d79(0x168)]()[_0x101d79(0x192)]()[_0x101d79(0x181)](0x2,'0')+':'+_0x3ed011['getSeconds']()[_0x101d79(0x192)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x449de7=_0x19a7f6,_0x4a78cc=shiftedTime();return _0x4a78cc[_0x449de7(0xe4)]()+(_0x4a78cc[_0x449de7(0xaa)]()+0x1)[_0x449de7(0x192)]()[_0x449de7(0x181)](0x2,'0')+_0x4a78cc[_0x449de7(0x1bd)]()['toString']()[_0x449de7(0x181)](0x2,'0')+'-'+_0x4a78cc['getHours']()[_0x449de7(0x192)]()[_0x449de7(0x181)](0x2,'0')+_0x4a78cc[_0x449de7(0x168)]()[_0x449de7(0x192)]()['padStart'](0x2,'0')+_0x4a78cc[_0x449de7(0x245)]()[_0x449de7(0x192)]()[_0x449de7(0x181)](0x2,'0');}function shiftedTime(){const _0x5ca04d=_0x19a7f6,_0x5209c8=new Date();let _0xce0b5=_0x5209c8;if(settings[_0x5ca04d(0x154)]&&settings[_0x5ca04d(0x154)]!==0x0)_0xce0b5=fns[_0x5ca04d(0x1ff)](_0x5209c8,{'hours':settings['timeshift']});return _0xce0b5;}function startScheduler(){const _0x2c4966=_0x19a7f6,_0x1f4b30=new Date()[_0x2c4966(0x1c4)](),_0x585b8c=shiftedTime()[_0x2c4966(0xd6)]();_0x585b8c==0x4&&backupConfigFiles();_0x585b8c==0x0&&rotateLogFiles();_0x1f4b30%0x6==0x0&&triggerAnalytics();_0x1f4b30%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x404fac){const _0x431e40=_0x19a7f6;logger[_0x431e40(0x1f0)](_0x431e40(0x14c)+_0x404fac);const _0x3b8dee=getBotsWithMode();_0x3b8dee[_0x431e40(0x248)]>0x0?confirmRestore(configbackuppath,_0x404fac):unzipFile(configbackuppath,_0x404fac);}async function getBackupFiles(_0x24150c=null){const _0x1ea137=_0x19a7f6;let _0x190e02=[],_0x2d943e=fs[_0x1ea137(0x97)](configbackuppath,{'withFileTypes':!![]});_0x2d943e[_0x1ea137(0x163)]((_0x2efbaf,_0x24e793)=>_0x2efbaf[_0x1ea137(0xa7)]<_0x24e793[_0x1ea137(0xa7)]?0x1:_0x24e793[_0x1ea137(0xa7)]<_0x2efbaf[_0x1ea137(0xa7)]?-0x1:0x0),_0x2d943e[_0x1ea137(0x240)](_0xf4781a=>{const _0x4e71b6=_0x1ea137;if(!_0xf4781a[_0x4e71b6(0x17a)]()&&_0xf4781a[_0x4e71b6(0xa7)]['startsWith'](_0x4e71b6(0x14d))&&_0xf4781a[_0x4e71b6(0xa7)][_0x4e71b6(0x137)](_0x4e71b6(0xbc))){const _0x471c58=formatDate(fs[_0x4e71b6(0x11f)](configbackuppath+_0xf4781a[_0x4e71b6(0xa7)])[_0x4e71b6(0x121)]);_0x190e02[_0x4e71b6(0x214)]({'name':_0xf4781a[_0x4e71b6(0xa7)],'mtime':_0x471c58});}});if(_0x24150c)io['to'](_0x24150c)[_0x1ea137(0xc3)](_0x1ea137(0x1a1),_0x190e02);else return _0x190e02;}async function backupConfigFiles(){const _0x193b24=_0x19a7f6;await zipFiles(_0x193b24(0x1c7));const _0x4542eb=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+(_0x193b24(0x14d)+_0x4542eb+_0x193b24(0xbc)));let _0x55825d=fs[_0x193b24(0x97)](configbackuppath,{'withFileTypes':!![]});_0x55825d[_0x193b24(0x163)]((_0x269f49,_0x34413e)=>_0x269f49[_0x193b24(0xa7)]<_0x34413e[_0x193b24(0xa7)]?0x1:_0x34413e[_0x193b24(0xa7)]<_0x269f49[_0x193b24(0xa7)]?-0x1:0x0),_0x55825d[_0x193b24(0x248)]>maxBackups&&fs[_0x193b24(0x1fe)](configbackuppath+_0x55825d[_0x55825d[_0x193b24(0x248)]-0x1]['name']);}function rotateLogFiles(){const _0x312bf4=_0x19a7f6,_0x5e67ee=fs['statSync'](logspath+_0x312bf4(0x265)),_0x7f1ff7=_0x5e67ee[_0x312bf4(0xa0)]/0x400;if(_0x7f1ff7>0x64){let _0x2276c6=fs[_0x312bf4(0x97)](logspath,{'withFileTypes':!![]});_0x2276c6[_0x312bf4(0x163)]((_0x1ad4cd,_0x41a359)=>_0x1ad4cd[_0x312bf4(0xa7)]<_0x41a359['name']?0x1:_0x41a359[_0x312bf4(0xa7)]<_0x1ad4cd['name']?-0x1:0x0),_0x2276c6['forEach'](_0x31e5fa=>{const _0x2f4bdb=_0x312bf4;if(_0x31e5fa[_0x2f4bdb(0xa7)]=='output-002.log')fs[_0x2f4bdb(0x173)](logspath+_0x31e5fa[_0x2f4bdb(0xa7)],logspath+_0x2f4bdb(0x231));if(_0x31e5fa[_0x2f4bdb(0xa7)]=='output-001.log')fs[_0x2f4bdb(0x173)](logspath+_0x31e5fa['name'],logspath+_0x2f4bdb(0xeb));_0x31e5fa['name']=='output-000.log'&&(fs[_0x2f4bdb(0x173)](logspath+_0x31e5fa['name'],logspath+_0x2f4bdb(0x232)),fs[_0x2f4bdb(0x16b)](logspath+_0x31e5fa['name'],''));});}}async function zipFiles(_0x112f64){const _0x6c7b5f=_0x19a7f6;let _0x1c9273;if(_0x112f64==_0x6c7b5f(0x282))_0x1c9273=logspath;if(_0x112f64==_0x6c7b5f(0x120))_0x1c9273=configpath;if(_0x112f64==_0x6c7b5f(0x1c7))_0x1c9273=configpath;let _0x86715c=fs[_0x6c7b5f(0x97)](_0x1c9273,{'withFileTypes':!![]});const _0x31b6fa=new require(_0x6c7b5f(0x155))();_0x86715c[_0x6c7b5f(0x240)](_0x3e6104=>{const _0x501f57=_0x6c7b5f;if(!_0x3e6104['isDirectory']()){let _0x377cde=fs['readFileSync'](_0x1c9273+_0x3e6104['name']);if(_0x112f64==_0x501f57(0x120)){const _0x2c22cd=/^bot-[0-9]{3}-config.json$/,_0x456890=_0x2c22cd[_0x501f57(0x21e)](_0x3e6104['name']);if(_0x456890){const _0x2dc7a3=JSON[_0x501f57(0x1ef)](_0x377cde);if(_0x2dc7a3[_0x501f57(0x1cc)][0x0]){_0x2dc7a3[_0x501f57(0x1cc)][0x0][_0x501f57(0xc9)]=_0x501f57(0x9e),_0x2dc7a3[_0x501f57(0x1cc)][0x0]['apiSecret']='***';if(_0x2dc7a3[_0x501f57(0x1cc)][0x0][_0x501f57(0x21a)])_0x2dc7a3[_0x501f57(0x1cc)][0x0]['apiPassword']='***';}_0x377cde=JSON[_0x501f57(0x12a)](_0x2dc7a3,null,0x2);}if(_0x3e6104['name']==_0x501f57(0x1a5)){const _0x33b44f=JSON['parse'](_0x377cde);if(_0x33b44f[_0x501f57(0xce)]['loginRequired'])_0x33b44f[_0x501f57(0xce)][_0x501f57(0x235)]=![];if(_0x33b44f['settings'][_0x501f57(0xb7)])_0x33b44f[_0x501f57(0xce)]['bbPassword']=_0x501f57(0x9e);if(_0x33b44f[_0x501f57(0xce)][_0x501f57(0xef)])_0x33b44f[_0x501f57(0xce)][_0x501f57(0xef)]='***';if(_0x33b44f[_0x501f57(0xce)][_0x501f57(0xb8)])_0x33b44f[_0x501f57(0xce)][_0x501f57(0xb8)]=null;_0x377cde=JSON[_0x501f57(0x12a)](_0x33b44f,null,0x2);}if(_0x3e6104[_0x501f57(0xa7)]!=_0x501f57(0x124))_0x31b6fa['file'](_0x3e6104[_0x501f57(0xa7)],_0x377cde);}else _0x31b6fa[_0x501f57(0x122)](_0x3e6104[_0x501f57(0xa7)],_0x377cde);}});const _0x571e65=_0x31b6fa[_0x6c7b5f(0x1ec)]({'base64':![],'compression':_0x6c7b5f(0xe1)});fs[_0x6c7b5f(0x16b)](zippath+(_0x112f64+'.zip'),_0x571e65,_0x6c7b5f(0x109));}async function unzipFile(_0x3e516d,_0x5e6ee3){const _0x5a6858=_0x19a7f6;fs[_0x5a6858(0x97)](configpath,{'withFileTypes':!![]})[_0x5a6858(0x240)](_0x7640ec=>{const _0x2b75e5=_0x5a6858;if(!_0x7640ec[_0x2b75e5(0x17a)]())fs[_0x2b75e5(0x217)](configpath+_0x7640ec[_0x2b75e5(0xa7)]);});const _0x3a85ed=fs[_0x5a6858(0x161)](_0x3e516d+_0x5e6ee3,_0x5a6858(0x109)),_0x583666=new require(_0x5a6858(0x155))(_0x3a85ed,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x583666[_0x5a6858(0x1ba)])[_0x5a6858(0x240)](_0x2d5b5c=>{const _0x19af25=_0x5a6858,_0x508d24=_0x583666['files'][_0x2d5b5c];fs[_0x19af25(0x16b)](configpath+_0x508d24[_0x19af25(0xa7)],_0x508d24[_0x19af25(0x15e)]);}),fs[_0x5a6858(0x97)](temppath,{'withFileTypes':!![]})[_0x5a6858(0x240)](_0xb87113=>{const _0x3d91c5=_0x5a6858;if(!_0xb87113[_0x3d91c5(0x17a)]())fs[_0x3d91c5(0x217)](temppath+_0xb87113[_0x3d91c5(0xa7)]);}),logger[_0x5a6858(0x1f0)](_0x5a6858(0xca)),process['send']({'restore':!![]},_0x24bf8d=>{});}async function getPublicIp(){const _0x410513=_0x19a7f6;try{const _0x31004b=await axios['get'](_0x410513(0xa9));publicip=_0x31004b[_0x410513(0x1e1)]['ip'];}catch(_0x55fd19){}}async function triggerAnalytics(){const _0x12026d=_0x19a7f6;if(!publicip)await getPublicIp();const _0xb88bd3=getBotsWithMode();let _0x1a631f=0x0;_0xb88bd3['forEach'](_0x35d6a1=>{const _0x5c2045=_0x2c7c;if(_0x35d6a1[_0x5c2045(0x10e)]===_0x5c2045(0x259))_0x1a631f++;});const _0xdbc4ba=getBotExchanges();mixpanel['track'](_0x12026d(0x114),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0xb88bd3['length'],'numbotsenabled':_0x1a631f,'exchanges':_0xdbc4ba,'environment':environment});}async function getMessages(){const _0x3b8ab8=_0x19a7f6,_0x208182='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x251940=new GraphQLClient(_0x208182),_0x14858d={'authorization':_0x3b8ab8(0x193)},_0x483e3b=serverversion[_0x3b8ab8(0x27b)]('.'),_0xbbd298=_0x483e3b[0x0]+'.'+_0x483e3b[0x1],_0x1bcec9=Math[_0x3b8ab8(0x25c)](settings[_0x3b8ab8(0x25b)],settings[_0x3b8ab8(0x144)]),_0x3032eb={'last':parseInt(_0x1bcec9),'bbm':_0xbbd298},_0x11fff4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x12a19b;try{_0x12a19b=await _0x251940[_0x3b8ab8(0x175)](_0x11fff4,_0x3032eb,_0x14858d);}catch(_0x17d2ca){}if(_0x12a19b&&_0x12a19b[_0x3b8ab8(0x263)]){let _0x24501d=settings['lastmsgtelegram'];newMessages=[];for(const _0x4ec238 of _0x12a19b[_0x3b8ab8(0x263)]){newMessages[_0x3b8ab8(0x214)](_0x4ec238);let _0x330b2f=![];_0x4ec238[_0x3b8ab8(0x201)]&&(updateSetting('latestversion',_0x4ec238['bbvNew']),_0x330b2f=isNewerVersion(serverversion,_0x4ec238[_0x3b8ab8(0x201)])||serverversion==_0x4ec238[_0x3b8ab8(0x201)]);if(!_0x330b2f&&_0x4ec238[_0x3b8ab8(0xa8)]>_0x24501d){if(_0x4ec238[_0x3b8ab8(0x178)]===_0x3b8ab8(0x1b8)||serverversion[_0x3b8ab8(0x27e)](_0x4ec238[_0x3b8ab8(0x178)])){let _0x4fb086=''+_0x4ec238[_0x3b8ab8(0x278)]+'\x0a\x0a'+_0x4ec238[_0x3b8ab8(0x199)];const _0xc8582e=await sendTelegramMsg(toTelegramMarkdown(_0x4fb086),_0x3b8ab8(0x152));if(_0xc8582e)_0x24501d=_0x4ec238[_0x3b8ab8(0xa8)];}}}updateAvailable=isNewerVersion(settings[_0x3b8ab8(0x198)],serverversion),updateSetting(_0x3b8ab8(0x25b),_0x24501d),emitMessages();}}function emitMessages(){const _0x371d4b=_0x19a7f6,_0x15baf8=settings[_0x371d4b(0x144)];let _0xf4a05b=[];newMessages[_0x371d4b(0x240)](_0x5c0adb=>{const _0x11ccbc=_0x371d4b;_0x5c0adb[_0x11ccbc(0xa8)]>_0x15baf8&&_0xf4a05b[_0x11ccbc(0x214)](_0x5c0adb);}),_0xf4a05b['length']>0x0&&getAllClients()[_0x371d4b(0x240)](_0x5e8df8=>{const _0x1c0552=_0x371d4b;getSocket(_0x5e8df8['id'])[_0x1c0552(0xc3)](_0x1c0552(0x199),_0xf4a05b);});}function confirmMessage(_0x31441e){const _0x43c626=_0x19a7f6;updateSetting(_0x43c626(0x144),Number(_0x31441e));}function isNewerVersion(_0x4703d2,_0x3c3100){const _0x2ccbde=_0x19a7f6,_0x59734b=_0x3c3100[_0x2ccbde(0x27b)]('.'),_0x2a48c0=_0x4703d2['split']('.');for(var _0x20a74b=0x0;_0x20a74b<_0x2a48c0['length'];_0x20a74b++){const _0x5a98ac=~~_0x2a48c0[_0x20a74b],_0x31bb6f=~~_0x59734b[_0x20a74b];if(_0x5a98ac>_0x31bb6f)return!![];if(_0x5a98ac<_0x31bb6f)return![];}return![];}function toTelegramMarkdown(_0x73385c){const _0xb7224f=_0x19a7f6,_0x162756=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x24ac99=/\*{2}(.+?)\*{2}/gim;return _0x73385c=_0x73385c[_0xb7224f(0xd8)](_0x162756,_0xb7224f(0x21c))[_0xb7224f(0xd8)](_0x24ac99,'*$1*'),_0x73385c;}async function validateConfigFile(){const _0x1d9bd0=_0x19a7f6,_0x24c9ce=dbConfig[_0x1d9bd0(0x12d)]('bots')['sortBy'](_0x1d9bd0(0x1dd))[_0x1d9bd0(0x1c5)]()||[];if(_0x24c9ce[_0x1d9bd0(0x248)]==0x0){let _0x37544f=0x0,_0x58b218=[];const _0x2e573d=/^bot-([0-9]{3})-config.json$/,_0x12da65=fs['readdirSync'](configpath);_0x12da65[_0x1d9bd0(0x240)](_0x134732=>{const _0x213bef=_0x1d9bd0,_0x1361e2=_0x2e573d['exec'](_0x134732);if(_0x1361e2){const _0x26bc69=_0x1361e2[0x1];let _0x1ff02c=getBotAttributes(_0x26bc69);_0x58b218[_0x213bef(0x214)]({'botID':_0x26bc69,'botname':_0x1ff02c[_0x213bef(0x209)],'status':_0x213bef(0xfa),'live':_0x213bef(0xee)}),_0x37544f++;}}),_0x37544f!=0x0&&(dbConfig['get'](_0x1d9bd0(0xe9))[_0x1d9bd0(0x185)](_0x58b218)[_0x1d9bd0(0x96)](),config=_0x58b218,restoredConfigFile=_0x37544f);}}async function restoreConfigNotify(_0x3f0103){const _0x6c306d=_0x19a7f6;let _0x2e58f5;if(restoredConfigFile==0x1)_0x2e58f5=_0x6c306d(0x11c);else _0x2e58f5='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x3f0103)io['to'](_0x6c306d(0x138))[_0x6c306d(0xc3)](_0x6c306d(0xae),_0x2e58f5);else{logger[_0x6c306d(0x93)](_0x6c306d(0x24b)),logger['simple'](_0x2e58f5),logger[_0x6c306d(0x93)](_0x6c306d(0x24b)),logger[_0x6c306d(0x93)]('');if(tgBot&&settings[_0x6c306d(0xb8)]&&settings[_0x6c306d(0xaf)]!=_0x6c306d(0x1f9))await sendTelegram(settings[_0x6c306d(0xb8)],_0x6c306d(0x24e)+_0x2e58f5);}}function validateCredentials(_0x1df790,_0x2be6a4){const _0x3c6170=_0x19a7f6;if(_0x1df790['username']==settings[_0x3c6170(0xc5)]&&bcrypt[_0x3c6170(0x1d0)](_0x1df790[_0x3c6170(0x22f)],settings[_0x3c6170(0xb7)])){if(settings[_0x3c6170(0xb5)])return{'allow':![],'reason':_0x3c6170(0x22b),'token':null};else{const _0x52ad14=generateLoginToken(_0x2be6a4);return{'allow':!![],'reason':_0x3c6170(0x1a9),'token':_0x52ad14};}}else return{'allow':![],'reason':_0x3c6170(0x158),'token':null};}function refreshToken(_0x48eff8){const _0x49bf4b=_0x19a7f6,_0x494f54=generateLoginToken(_0x48eff8);return{'allow':!![],'reason':_0x49bf4b(0x1a9),'token':_0x494f54};}function validateAccess(_0x49e9e9,_0x84a05a,_0x3a3e84){const _0x489de7=_0x19a7f6,_0x2f9ad7=_0x3a3e84?_0x3a3e84:devices[_0x84a05a]['ip'];let _0x43fbf3;const _0x1c3db3=_0x1e7c1d=>{const _0x2694a7=_0x2c7c;if(settings[_0x2694a7(0x235)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x84a05a)){const _0x3638eb=generateLoginToken(_0x84a05a);return{'allow':!![],'reason':_0x2694a7(0x238),'token':_0x3638eb};}else return{'allow':![],'reason':_0x2694a7(0x273),'token':null};}else return _0x43fbf3=validToken(_0x1e7c1d,_0x84a05a),_0x43fbf3[_0x2694a7(0x25a)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1e7c1d}:{'allow':![],'reason':_0x2694a7(0x273),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x489de7(0x17d)]){let _0x4ccf5e=[...settings[_0x489de7(0x272)],'::1',_0x489de7(0xab),_0x489de7(0x1b7)];if(_0x4ccf5e[_0x489de7(0x252)](_0x2f9ad7))return _0x1c3db3(_0x49e9e9);else{_0x43fbf3=validToken(_0x49e9e9,_0x84a05a);if(_0x43fbf3[_0x489de7(0x25a)](_0x489de7(0x258)))return _0x1c3db3(_0x49e9e9);else{if(telegramIpApproved(_0x84a05a)){const _0x57b588=generateToken(_0x84a05a);return _0x43fbf3=_0x1c3db3(_0x49e9e9),_0x43fbf3[_0x489de7(0xf9)]?{'allow':!![],'reason':_0x489de7(0x1a7),'token':_0x57b588}:_0x43fbf3;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x489de7(0x98),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1c3db3(_0x49e9e9);}function timelyDecrypt(_0x2033bf,_0x3a924d=!![]){const _0x5d57ea=_0x19a7f6;if(_0x2033bf)try{const _0x3da556=crypt['decrypt'](secure['privateKey'],_0x2033bf)[_0x5d57ea(0x199)],_0x1a6bbd=_0x3da556[_0x5d57ea(0x27b)]('@')[0x0],_0x4a5f2d=_0x3da556['split']('@')[0x1],_0x2d51f1=new Date()[_0x5d57ea(0x11e)]();if(_0x3a924d){if(_0x2d51f1-_0x4a5f2d<maxSecretAge*0x3e8)return _0x1a6bbd;else return![];}else return _0x1a6bbd;}catch(_0x4dc4b0){return![];}else return![];}const validToken=(_0x22094e,_0x48deae)=>{const _0x593015=_0x19a7f6,_0x230748=devices[_0x48deae]['ip'];if(!_0x22094e)return{'error':_0x593015(0x13b)};for(let _0x508de8 of blacklist){if(_0x508de8[_0x593015(0x222)]==_0x22094e)return{'error':_0x593015(0x26d)};}let _0x7d1645;try{_0x7d1645=jwt[_0x593015(0x1d6)](_0x22094e,secure[_0x593015(0x1f2)]+_0x48deae);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x7d1645[_0x593015(0x25a)](_0x593015(0x1f1))&&!_0x7d1645['hasOwnProperty'](_0x593015(0x1aa))||!_0x7d1645[_0x593015(0x25a)](_0x593015(0x106)))return{'error':_0x593015(0x1c8)};if(!_0x7d1645['hasOwnProperty'](_0x593015(0x1aa))&&_0x7d1645['hasOwnProperty']('clientip')){const {clientip:_0x5d97be}=_0x7d1645;return _0x230748==_0x5d97be?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x593015(0x15a)};}else{if(_0x7d1645[_0x593015(0x25a)](_0x593015(0x1aa))&&_0x7d1645[_0x593015(0x25a)](_0x593015(0x1f1))){const {username:_0x59b190,clientip:_0x3b57da}=_0x7d1645;return settings[_0x593015(0xc5)]==_0x59b190&&_0x230748==_0x3b57da?{'success':_0x593015(0x118)}:{'error':_0x593015(0x112)};}}},generateLoginToken=_0x290acb=>{const _0x1a75d4=_0x19a7f6;if(_0x290acb){const _0xdacf38=devices[_0x290acb]['ip'];return jwt[_0x1a75d4(0x1b2)]({'username':settings['bbUsername'],'clientip':_0xdacf38},secure[_0x1a75d4(0x1f2)]+_0x290acb,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x2626a4=>{const _0x2b07fb=_0x19a7f6;if(_0x2626a4){const _0x2e3a2a=devices[_0x2626a4]['ip'];return jwt[_0x2b07fb(0x1b2)]({'clientip':_0x2e3a2a},secure[_0x2b07fb(0x1f2)]+_0x2626a4,{'expiresIn':devices[_0x2626a4][_0x2b07fb(0x20f)][_0x2b07fb(0xd5)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x5e7b38=>{const _0x3551a6=_0x19a7f6;let _0x217611=![];return devices[_0x5e7b38][_0x3551a6(0x20f)]&&devices[_0x5e7b38][_0x3551a6(0x20f)][_0x3551a6(0xd5)]!='reject'&&(_0x217611=devices[_0x5e7b38][_0x3551a6(0x20f)]['clientip']==devices[_0x5e7b38]['ip']&&new Date()[_0x3551a6(0x11e)]()-devices[_0x5e7b38][_0x3551a6(0x20f)]['timestamp']<devices[_0x5e7b38][_0x3551a6(0x20f)][_0x3551a6(0xd5)]*0x3c*0x3e8),_0x217611;},telegram2FaApproved=_0x3fbe3a=>{const _0x26e430=_0x19a7f6;let _0x22ca36=![];return devices[_0x3fbe3a]['telegram2FaApproval']&&devices[_0x3fbe3a][_0x26e430(0x243)][_0x26e430(0xd5)]!=_0x26e430(0x179)&&(_0x22ca36=devices[_0x3fbe3a][_0x26e430(0x243)][_0x26e430(0x1f1)]==devices[_0x3fbe3a]['ip']&&new Date()[_0x26e430(0x11e)]()-devices[_0x3fbe3a]['telegram2FaApproval'][_0x26e430(0x1f7)]<devices[_0x3fbe3a][_0x26e430(0x243)][_0x26e430(0xd5)]*0x3c*0x3e8),_0x22ca36;},normalizeIP=_0x4f497d=>{const _0x50fd3d=_0x19a7f6;let _0x33c7a0=null,_0x23e70c=null;if(ipaddr[_0x50fd3d(0x1db)](_0x4f497d)){const _0x12d95e=ipaddr[_0x50fd3d(0x1ef)](_0x4f497d);_0x12d95e['kind']()==='ipv6'?(_0x12d95e['isIPv4MappedAddress']()&&(_0x33c7a0=_0x12d95e[_0x50fd3d(0x11b)]()[_0x50fd3d(0x192)]()),_0x23e70c=_0x12d95e[_0x50fd3d(0x192)]()):(_0x33c7a0=_0x12d95e['toString'](),_0x23e70c=_0x12d95e['toIPv4MappedAddress']()[_0x50fd3d(0x192)]());}return{'show':_0x33c7a0?_0x33c7a0:_0x23e70c,'store':_0x23e70c};};function formatDate(_0x33d566){const _0x3b4a9a=_0x19a7f6;return _0x33d566[_0x3b4a9a(0xe4)]()+'/'+(_0x33d566[_0x3b4a9a(0xaa)]()+0x1)[_0x3b4a9a(0x192)]()[_0x3b4a9a(0x181)](0x2,'0')+'/'+_0x33d566[_0x3b4a9a(0x1bd)]()[_0x3b4a9a(0x192)]()['padStart'](0x2,'0')+'\x20'+_0x33d566['getHours']()['toString']()[_0x3b4a9a(0x181)](0x2,'0')+':'+_0x33d566[_0x3b4a9a(0x168)]()[_0x3b4a9a(0x192)]()[_0x3b4a9a(0x181)](0x2,'0')+':'+_0x33d566[_0x3b4a9a(0x245)]()['toString']()[_0x3b4a9a(0x181)](0x2,'0');}function sleep(_0x11ea6c){return new Promise(_0x458d41=>setTimeout(_0x458d41,_0x11ea6c));}