const _0x503401=_0x47dd;(function(_0x152cbb,_0x102c5c){const _0x198b0a=_0x47dd,_0x50e704=_0x152cbb();while(!![]){try{const _0x57e1fa=-parseInt(_0x198b0a(0x2ec))/0x1*(parseInt(_0x198b0a(0x2d9))/0x2)+parseInt(_0x198b0a(0x2c1))/0x3*(-parseInt(_0x198b0a(0x20e))/0x4)+parseInt(_0x198b0a(0x1fd))/0x5+-parseInt(_0x198b0a(0x2ae))/0x6*(-parseInt(_0x198b0a(0x2e8))/0x7)+-parseInt(_0x198b0a(0x2f6))/0x8*(-parseInt(_0x198b0a(0x233))/0x9)+-parseInt(_0x198b0a(0x1ed))/0xa*(parseInt(_0x198b0a(0x2cb))/0xb)+parseInt(_0x198b0a(0x287))/0xc*(parseInt(_0x198b0a(0x1d4))/0xd);if(_0x57e1fa===_0x102c5c)break;else _0x50e704['push'](_0x50e704['shift']());}catch(_0xc8d689){_0x50e704['push'](_0x50e704['shift']());}}}(_0x462b,0xcbaff));const _0x3058c7=function(){let _0x497741=!![];return function(_0x3d7a93,_0x56324){const _0x1973aa=_0x497741?function(){const _0x4e51f9=_0x47dd;if(_0x56324){const _0x5b2e7a=_0x56324[_0x4e51f9(0x28a)](_0x3d7a93,arguments);return _0x56324=null,_0x5b2e7a;}}:function(){};return _0x497741=![],_0x1973aa;};}(),_0xa36cbc=_0x3058c7(this,function(){const _0x2397aa=_0x47dd;return _0xa36cbc[_0x2397aa(0x2c4)]()['search']('(((.+)+)+)+$')[_0x2397aa(0x2c4)]()[_0x2397aa(0x2ab)](_0xa36cbc)['search']('(((.+)+)+)+$');});_0xa36cbc();'use strict';process['env'][_0x503401(0x2e4)]=0x1;const childProcess=require(_0x503401(0x1dd)),FileSync=require(_0x503401(0x2c6)),fs=require('fs'),fns=require(_0x503401(0x2d2)),low=require(_0x503401(0x1fa)),path=require(_0x503401(0x1ce)),crypto=require(_0x503401(0x2d5)),Crypt=require(_0x503401(0x21b))[_0x503401(0x2eb)],RSA=require('hybrid-crypto-js')[_0x503401(0x28e)],bcrypt=require(_0x503401(0x2c8)),jwt=require(_0x503401(0x2fc)),analyticsLib=require('analytics')[_0x503401(0x1cb)],googleAnalytics=require(_0x503401(0x2e6))[_0x503401(0x1cb)],ipaddr=require(_0x503401(0x2de)),argv=require(_0x503401(0x1d3))(process[_0x503401(0x293)]['slice'](0x2))['argv'],PORT=argv[_0x503401(0x2af)]||_0x503401(0x23f),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x503401(0x2ef)](PORT))return console['log'](_0x503401(0x282)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x503401(0x24c)](0x1);const HOST=argv['host']||null,userID=argv[_0x503401(0x2a8)]||'';let bbpath=_0x503401(0x296),bbpath2='';const botfile=_0x503401(0x200),configfile=_0x503401(0x207),settingsfile=_0x503401(0x20a),securefile='bb-secure.json',validInstallation=fs[_0x503401(0x2b1)]('../install.js');!fs[_0x503401(0x2b1)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x503401(0x2a6);!fs[_0x503401(0x2b1)](configpath)&&fs[_0x503401(0x309)](configpath);!fs[_0x503401(0x2b1)](configbackuppath)&&fs[_0x503401(0x309)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x503401(0x1f3)]({'bots':[]})[_0x503401(0x1d0)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x503401(0x1f3)]({'settings':{'timeshift':0x0}})[_0x503401(0x1d0)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x503401(0x1f3)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x503401(0x2fb),'rsaStandard':_0x503401(0x201)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x503401(0x24b))[_0x503401(0x274)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x503401(0x1e4)),app=express(),http=require(_0x503401(0x1ff))[_0x503401(0x221)](app);app[_0x503401(0x2d4)](express[_0x503401(0x222)](path[_0x503401(0x1fb)](__dirname,bbpath2,_0x503401(0x1e8)))),app[_0x503401(0x2d4)](express[_0x503401(0x222)](path[_0x503401(0x1fb)](__dirname,bbpath2,_0x503401(0x29f)))),app['get']('/',function(_0x1e8e6a,_0xaaa9a3){const _0xed4ff7=_0x503401;_0xaaa9a3[_0xed4ff7(0x2d8)](path[_0xed4ff7(0x1fb)](__dirname,bbpath2,_0xed4ff7(0x1e8),_0xed4ff7(0x1f0)));}),app[_0x503401(0x271)](_0x503401(0x2e9),function(_0x216a81,_0x376213){const _0x2ced34=_0x503401;_0x376213[_0x2ced34(0x2d8)](path[_0x2ced34(0x1fb)](__dirname,bbpath2,_0x2ced34(0x29f),_0x2ced34(0x1f0)));}),app[_0x503401(0x271)](_0x503401(0x1f2),(_0x569923,_0x5adcdf)=>{const _0x1748ff=_0x503401;_0x5adcdf[_0x1748ff(0x2d8)](path[_0x1748ff(0x1fb)](__dirname,bbpath2,_0x1748ff(0x29f),_0x1748ff(0x1f0)));}),app[_0x503401(0x271)](_0x503401(0x2e5),(_0x50984b,_0x58f300)=>{const _0x265114=_0x503401;_0x58f300[_0x265114(0x2d8)](path['join'](__dirname,bbpath2,_0x265114(0x29f),'index.html'));}),app[_0x503401(0x271)](_0x503401(0x1e6),(_0x30f264,_0x527714)=>{const _0x425c2a=_0x503401;_0x527714[_0x425c2a(0x2d8)](path['join'](__dirname,bbpath2,_0x425c2a(0x29f),_0x425c2a(0x1f0)));}),app[_0x503401(0x271)]('/:bot/history',(_0x279a22,_0x4d7479)=>{const _0x26d892=_0x503401;_0x4d7479[_0x26d892(0x2d8)](path[_0x26d892(0x1fb)](__dirname,bbpath2,_0x26d892(0x29f),_0x26d892(0x1f0)));}),app['get']('/:bot/configuration',(_0x3d3010,_0x3cef77)=>{const _0x3daa85=_0x503401;_0x3cef77['sendFile'](path[_0x3daa85(0x1fb)](__dirname,bbpath2,_0x3daa85(0x29f),'index.html'));}),app[_0x503401(0x271)](_0x503401(0x299),(_0xb05b8e,_0x134975)=>{const _0x2a983b=_0x503401;_0x134975[_0x2a983b(0x2d8)](path[_0x2a983b(0x1fb)](__dirname,bbpath2,_0x2a983b(0x29f),_0x2a983b(0x1f0)));});if(HOST)http[_0x503401(0x2ad)](PORT,HOST);else http['listen'](PORT);const io=require(_0x503401(0x2c7))(http,{}),analytics=analyticsLib({'app':_0x503401(0x211),'plugins':[googleAnalytics({'trackingId':_0x503401(0x2bf)})]}),TelegramBot=require(_0x503401(0x27f));let tgBot;if(settings[_0x503401(0x1df)]&&settings[_0x503401(0x1df)]!=''&&settings[_0x503401(0x21d)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x581f41=_0x503401;console[_0x581f41(0x227)](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x581f41(0x1ef)+PORT),console['log'](_0x581f41(0x25b));if(config[_0x581f41(0x239)]!=0x0)config[_0x581f41(0x2e0)](_0x464346=>{const _0xaa3cb3=_0x581f41;if(_0x464346['status']==_0xaa3cb3(0x258)||_0x464346[_0xaa3cb3(0x281)]=='new')logging(_0xaa3cb3(0x2f8)+_0x464346[_0xaa3cb3(0x22a)]+_0xaa3cb3(0x23a)+_0x464346[_0xaa3cb3(0x289)]),startBot([_0x464346[_0xaa3cb3(0x22a)],userID],{'cwd':bbpath},function(_0x505e18){if(_0x505e18)logging(_0x505e18);});else(_0x464346[_0xaa3cb3(0x281)]==_0xaa3cb3(0x2f9)||_0x464346[_0xaa3cb3(0x281)]==_0xaa3cb3(0x1e0))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x464346[_0xaa3cb3(0x22a)]+_0xaa3cb3(0x23a)+_0x464346['botname']);});else!newBot&&console[_0x581f41(0x227)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0x581f41(0x25b)),console[_0x581f41(0x227)]('');}function startSocket(){const _0x5796b2=_0x503401;io['on'](_0x5796b2(0x231),_0x5b6eb6=>{const _0x47d624=_0x5796b2;let _0x3e7c95,_0x4e8f4a,_0x465ac5,_0x31a751,_0x15b505;const _0x716555=_0x5b6eb6[_0x47d624(0x2f4)][_0x47d624(0x2fa)]['referer'];_0x4e8f4a=_0x716555[_0x47d624(0x229)](/bot[0-9]{3}/);if(_0x4e8f4a)_0x465ac5=_0x4e8f4a[0x0][_0x47d624(0x229)](/[0-9]{3}/);if(_0x465ac5)_0x3e7c95=_0x465ac5[0x0];else _0x3e7c95='botmanager';const _0x177a8c=_0x5b6eb6[_0x47d624(0x2f4)][_0x47d624(0x21a)][_0x47d624(0x266)];if(!_0x177a8c)_0x5b6eb6[_0x47d624(0x213)](_0x47d624(0x281),{'publicKey':secure[_0x47d624(0x2a2)]});else{_0x31a751=timelyDecrypt(_0x177a8c,![]);if(!_0x31a751)_0x5b6eb6[_0x47d624(0x213)]('status',{'publicKey':secure[_0x47d624(0x2a2)]});else{_0x15b505=normalizeIP(_0x5b6eb6[_0x47d624(0x214)][_0x47d624(0x2db)])[_0x47d624(0x29a)];if(!devices[_0x31a751])devices[_0x31a751]={'uuid':_0x31a751,'access':{'token':null}};devices[_0x31a751]['ip']=_0x15b505;const _0x12bde7=addClient(_0x5b6eb6['id'],_0x31a751,_0x3e7c95);setAccess(_0x12bde7),_0x5b6eb6['on'](_0x47d624(0x301),_0x5c109b=>{const _0x1642d1=_0x47d624,_0xc2960d=timelyDecrypt(_0x5c109b['password']);if(_0xc2960d){_0x5c109b={'username':_0x5c109b[_0x1642d1(0x21e)],'password':_0xc2960d},devices[_0x31a751]['access']=validateCredentials(_0x5c109b,_0x31a751);if(devices[_0x31a751][_0x1642d1(0x237)][_0x1642d1(0x241)]==![]&&devices[_0x31a751][_0x1642d1(0x237)][_0x1642d1(0x1e5)]=='2FA\x20login\x20required')_0x5b6eb6[_0x1642d1(0x213)]('status',{'access':devices[_0x31a751][_0x1642d1(0x237)]}),loginAccess2FA(_0x31a751,_0x15b505);else{if(devices[_0x31a751]['access']['allow']==![]&&devices[_0x31a751][_0x1642d1(0x237)]['reason']==_0x1642d1(0x220))_0x5b6eb6[_0x1642d1(0x213)](_0x1642d1(0x281),{'access':devices[_0x31a751][_0x1642d1(0x237)]});else devices[_0x31a751][_0x1642d1(0x237)][_0x1642d1(0x241)]&&devices[_0x31a751][_0x1642d1(0x237)][_0x1642d1(0x1e5)]==_0x1642d1(0x306)&&(getClientsWithUuid(_0x31a751)[_0x1642d1(0x2e0)](_0x24bd42=>{setAccess(_0x24bd42);}),setTokenRefresh(_0x31a751),setSessionTimeout('login',_0x31a751));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x5b6eb6['on'](_0x47d624(0x256),()=>{resetPassword();}),_0x5b6eb6['on']('disconnect',_0x10c7ee=>{removeClient(_0x5b6eb6['id']);});}}});}function initClient(_0x4ec97d){const _0x68a4d7=_0x503401;if(_0x4ec97d!=_0x68a4d7(0x2e2)&&config['apiKey']!=''){if(pid[_0x4ec97d])pid[_0x4ec97d][_0x68a4d7(0x300)]({'function':_0x68a4d7(0x255),'args':null});}}function getSocket(_0x1861f3){const _0x584189=_0x503401;return io[_0x584189(0x26c)][_0x584189(0x26c)][_0x584189(0x271)](_0x1861f3);}function setAccess(_0x38d08c){const _0x2f01de=_0x503401,_0x14b485=getSocket(_0x38d08c['id']),_0x2bd0ab=_0x38d08c[_0x2f01de(0x26d)],_0x4bfedd=_0x38d08c[_0x2f01de(0x26a)];devices[_0x2bd0ab]['access']=validateAccess(devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x25a)],_0x2bd0ab),_0x14b485['join'](_0x2bd0ab);if(devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x241)]){_0x14b485[_0x2f01de(0x1fb)](_0x4bfedd);if(_0x4bfedd==_0x2f01de(0x2e2))initializeSocketBotManager(_0x14b485);else initializeSocketBot(_0x14b485);initClient(_0x4bfedd);}devices[_0x2bd0ab]['access'][_0x2f01de(0x25a)]&&devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x1e5)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x2bd0ab),devices[_0x2bd0ab]['access']['token']&&devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x1e5)]==_0x2f01de(0x28d)&&setSessionTimeout(_0x2f01de(0x301),_0x2bd0ab),_0x14b485[_0x2f01de(0x213)](_0x2f01de(0x281),{'status':_0x38d08c[_0x2f01de(0x2b2)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2bd0ab][_0x2f01de(0x237)],'externalip':devices[_0x2bd0ab]['ip'],'publicKey':secure[_0x2f01de(0x2a2)],'validInstallation':validInstallation}),devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x241)]==![]&&devices[_0x2bd0ab][_0x2f01de(0x237)][_0x2f01de(0x1e5)]==_0x2f01de(0x1f7)&&temporaryAccess2FA(_0x2bd0ab,devices[_0x2bd0ab]['ip']);}function setSessionTimeout(_0x4a42ba,_0x28c6b3){const _0x203e2f=_0x503401;let _0x2ab42c;if(_0x4a42ba==_0x203e2f(0x301))_0x2ab42c=loginExpiry*0x3c*0x3e8;else _0x2ab42c=devices[_0x28c6b3]['telegramIpApproval'][_0x203e2f(0x215)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x28c6b3][_0x203e2f(0x304)]['timestamp']);if(devices[_0x28c6b3][_0x203e2f(0x2cf)])clearTimeout(devices[_0x28c6b3][_0x203e2f(0x2cf)]);devices[_0x28c6b3][_0x203e2f(0x2cf)]=setTimeout(()=>{const _0x544a98=_0x203e2f;if(devices[_0x28c6b3][_0x544a98(0x24e)])clearTimeout(devices[_0x28c6b3][_0x544a98(0x24e)]);removeSocketListeners(_0x28c6b3),addBlacklist(_0x28c6b3),devices[_0x28c6b3]['telegramIpApproval']=null,devices[_0x28c6b3][_0x544a98(0x272)]=null,devices[_0x28c6b3]['access']['token']=null,devices[_0x28c6b3][_0x544a98(0x237)]=validateAccess(devices[_0x28c6b3][_0x544a98(0x237)]['token'],_0x28c6b3),!(devices[_0x28c6b3]['access'][_0x544a98(0x241)]&&devices[_0x28c6b3][_0x544a98(0x237)][_0x544a98(0x1e5)]==_0x544a98(0x292))&&(_0x4a42ba==_0x544a98(0x301)?io['to'](_0x28c6b3)['emit']('status',{'access':{'allow':![],'reason':_0x544a98(0x260),'token':null}}):io['to'](_0x28c6b3)[_0x544a98(0x213)]('status',{'access':{'allow':![],'reason':_0x544a98(0x29c),'token':null}})),devices[_0x28c6b3][_0x544a98(0x237)][_0x544a98(0x25a)]=null;},_0x2ab42c);}function setTokenRefresh(_0x271efb){const _0xab1991=_0x503401;if(devices[_0x271efb][_0xab1991(0x24e)])clearTimeout(devices[_0x271efb][_0xab1991(0x24e)]);devices[_0x271efb][_0xab1991(0x24e)]=setTimeout(()=>{const _0x5c8f14=_0xab1991;getClientsWithUuid(_0x271efb)[_0x5c8f14(0x239)]!=0x0?(devices[_0x271efb]['access']=refreshToken(_0x271efb),io['to'](_0x271efb)[_0x5c8f14(0x213)](_0x5c8f14(0x281),{'status':_0x5c8f14(0x1f4),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x271efb]['access'],'externalip':devices[_0x271efb]['ip'],'publicKey':secure[_0x5c8f14(0x2a2)],'validInstallation':validInstallation}),setTokenRefresh(_0x271efb)):clearTimeout(devices[_0x271efb]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2dd3ca){const _0x282a7a=_0x503401,_0x44294f=getClient(_0x2dd3ca['id'])[_0x282a7a(0x26d)];_0x2dd3ca[_0x282a7a(0x213)](_0x282a7a(0x2fe),config),_0x2dd3ca[_0x282a7a(0x213)](_0x282a7a(0x2f7),cleanSettings()),_0x2dd3ca['on'](_0x282a7a(0x2ba),_0x329688=>{const _0x481834=_0x282a7a;if(validateAccess(_0x329688,_0x44294f)[_0x481834(0x241)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x2dd3ca['on'](_0x282a7a(0x22d),(_0x1837fe,_0x27f768)=>{const _0x21a32c=_0x282a7a;if(validateAccess(_0x27f768,_0x44294f)[_0x21a32c(0x241)])toggleBot(_0x1837fe[_0x21a32c(0x22a)],_0x1837fe[_0x21a32c(0x281)],_0x1837fe['live']);else logging(_0x21a32c(0x22e));}),_0x2dd3ca['on'](_0x282a7a(0x20c),(_0x1f600b,_0x24a86f)=>{const _0xc71523=_0x282a7a;if(validateAccess(_0x24a86f,_0x44294f)[_0xc71523(0x241)])deleteBot(_0x1f600b);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x2dd3ca['on'](_0x282a7a(0x1e7),(_0x3d6d39,_0x50ecc5)=>{const _0x3f6e22=_0x282a7a;if(validateAccess(_0x50ecc5,_0x44294f)[_0x3f6e22(0x241)])storeSettings(_0x3d6d39,!![]);else logging(_0x3f6e22(0x268));}),_0x2dd3ca['on'](_0x282a7a(0x2b7),(_0x27adf4,_0x265120)=>{const _0x5a7261=_0x282a7a;if(validateAccess(_0x265120,_0x44294f)[_0x5a7261(0x241)])updateBB();else logging(_0x5a7261(0x268));}),_0x2dd3ca['on'](_0x282a7a(0x295),_0xc22583=>{const _0x23fef1=_0x282a7a;if(validateAccess(_0xc22583,_0x44294f)['allow']){if(devices[_0x44294f]['pidRefreshToken'])clearTimeout(devices[_0x44294f]['pidRefreshToken']);if(devices[_0x44294f][_0x23fef1(0x2cf)])clearTimeout(devices[_0x44294f][_0x23fef1(0x2cf)]);removeSocketListeners(getClient(_0x2dd3ca['id'])[_0x23fef1(0x26d)]),addBlacklist(_0x44294f),devices[_0x44294f]['telegramIpApproval']=null,devices[_0x44294f][_0x23fef1(0x272)]=null,devices[_0x44294f][_0x23fef1(0x237)][_0x23fef1(0x25a)]=null,io['to'](getClient(_0x2dd3ca['id'])[_0x23fef1(0x26d)])[_0x23fef1(0x213)]('status',{'access':{'allow':![],'reason':_0x23fef1(0x2ed),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x58a23d){const _0x9a90ed=_0x503401,_0x35d76c=getClient(_0x58a23d['id'])[_0x9a90ed(0x26a)],_0x5545a3=getClient(_0x58a23d['id'])['uuid'];_0x58a23d['on']('get-logs',(_0x2ffcfa,_0x31694e)=>{const _0x55591c=_0x9a90ed;if(validateAccess(_0x31694e,_0x5545a3)['allow']){if(pid[_0x35d76c])pid[_0x35d76c][_0x55591c(0x300)]({'function':_0x55591c(0x284),'args':_0x2ffcfa});}else logging(_0x55591c(0x1f1));}),_0x58a23d['on']('get-portfolio',(_0x2618cc,_0x2e169b)=>{const _0x2a0ff6=_0x9a90ed;if(validateAccess(_0x2e169b,_0x5545a3)[_0x2a0ff6(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c][_0x2a0ff6(0x300)]({'function':_0x2a0ff6(0x24f),'args':_0x2618cc});}else logging(_0x2a0ff6(0x294));}),_0x58a23d['on']('store-configuration',(_0x4bf5ae,_0x27c585)=>{const _0x4f5ffa=_0x9a90ed;if(validateAccess(_0x27c585,_0x5545a3)[_0x4f5ffa(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c][_0x4f5ffa(0x300)]({'function':_0x4f5ffa(0x2b5),'args':_0x4bf5ae});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x58a23d['on']('store-headless',(_0x54292c,_0x456e38)=>{const _0x20f686=_0x9a90ed;if(validateAccess(_0x456e38,_0x5545a3)[_0x20f686(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c][_0x20f686(0x300)]({'function':'storeHeadless','args':_0x54292c});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x58a23d['on'](_0x9a90ed(0x21f),_0x240443=>{const _0x2dc99e=_0x9a90ed;if(validateAccess(_0x240443,_0x5545a3)[_0x2dc99e(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c][_0x2dc99e(0x300)]({'function':_0x2dc99e(0x27e),'args':null});}else logging(_0x2dc99e(0x30e));}),_0x58a23d['on'](_0x9a90ed(0x247),(_0x379d5f,_0x33029d)=>{const _0x5ace6f=_0x9a90ed;if(validateAccess(_0x33029d,_0x5545a3)[_0x5ace6f(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c]['send']({'function':_0x5ace6f(0x1cf),'args':_0x379d5f});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x58a23d['on'](_0x9a90ed(0x259),_0x576317=>{const _0x36fbf6=_0x9a90ed;if(validateAccess(_0x576317,_0x5545a3)[_0x36fbf6(0x241)]){if(pid[_0x35d76c])pid[_0x35d76c][_0x36fbf6(0x300)]({'function':'cancelLoading','args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x58a23d['on'](_0x9a90ed(0x295),_0x49acab=>{const _0x4be522=_0x9a90ed;if(validateAccess(_0x49acab,_0x5545a3)[_0x4be522(0x241)]){if(devices[_0x5545a3]['pidRefreshToken'])clearTimeout(devices[_0x5545a3][_0x4be522(0x24e)]);if(devices[_0x5545a3][_0x4be522(0x2cf)])clearTimeout(devices[_0x5545a3]['pidExpireLogin']);removeSocketListeners(getClient(_0x58a23d['id'])['uuid']),addBlacklist(_0x5545a3),devices[_0x5545a3][_0x4be522(0x304)]=null,devices[_0x5545a3]['telegram2FaApproval']=null,devices[_0x5545a3]['access']['token']=null,io['to'](getClient(_0x58a23d['id'])['uuid'])[_0x4be522(0x213)](_0x4be522(0x281),{'access':{'allow':![],'reason':_0x4be522(0x2ed),'token':null}});}else logging(_0x4be522(0x24a));});}function removeSocketListeners(_0x44a5a5){const _0x511afb=_0x503401;getClientsWithUuid(_0x44a5a5)[_0x511afb(0x2e0)](_0x2de0e3=>{getSocket(_0x2de0e3['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4ee1fa=_0x503401;let _0x5e1a02=settings;return settings[_0x4ee1fa(0x1df)]&&settings[_0x4ee1fa(0x1df)]!=''&&(_0x5e1a02={..._0x5e1a02,'telegramToken':'************'}),settings[_0x4ee1fa(0x2d6)]&&settings['bbPassword']!=''&&(_0x5e1a02={..._0x5e1a02,'bbPassword':'************'}),_0x5e1a02;}function updateBB(){const _0x176f37=_0x503401;installingUpdate=!![],config[_0x176f37(0x2e0)](_0x2930fe=>{const _0x29058d=_0x176f37;restartBot(_0x2930fe[_0x29058d(0x22a)]);}),process['send']({'update':!![]},_0x3f182d=>{});}function startBot(_0x8bd21d,_0x1cfcfd,_0x59bca6){const _0xb3ec41=_0x503401;let _0xeef3ec=![];const _0x3ec0f0=_0x8bd21d[0x0];_0x1cfcfd={..._0x1cfcfd,'stdio':[_0xb3ec41(0x2d1),_0xb3ec41(0x2d1),_0xb3ec41(0x2d1),_0xb3ec41(0x23e)]},pid[_0x3ec0f0]=childProcess['fork'](botfile,_0x8bd21d,_0x1cfcfd),pid[_0x3ec0f0]['on']('message',_0x335e78=>{const _0x422eb4=_0xb3ec41;switch(Object[_0x422eb4(0x235)](_0x335e78)[0x0]){case _0x422eb4(0x289):updateBotName(_0x3ec0f0,_0x335e78['botname']);break;case _0x422eb4(0x281):updateStatus(_0x3ec0f0,_0x335e78[_0x422eb4(0x281)]);break;case _0x422eb4(0x2a0):updateLive(_0x3ec0f0,_0x335e78['live']);break;case _0x422eb4(0x267):updateLive(_0x3ec0f0,_0x335e78['started']),io['to'](_0x3ec0f0)[_0x422eb4(0x213)]('status',{'access':{'allow':![],'reason':_0x422eb4(0x217),'token':null}});break;case'stop':_0x335e78[_0x422eb4(0x276)]==_0x422eb4(0x242)&&restartBot(_0x3ec0f0);_0x335e78[_0x422eb4(0x276)]==_0x422eb4(0x224)&&toggleBot(_0x3ec0f0,_0x422eb4(0x2f9),'stopped');break;case _0x422eb4(0x28c):sendTelegram(_0x3ec0f0,_0x335e78['telegram']);break;case _0x422eb4(0x1ee):io['to'](_0x3ec0f0)['emit'](_0x335e78[_0x422eb4(0x1ee)],_0x335e78['args']);break;}}),pid[_0x3ec0f0]['on']('error',function(_0x8dfa32){if(_0xeef3ec)return;_0xeef3ec=!![],_0x59bca6(_0x8dfa32);}),pid[_0x3ec0f0]['on'](_0xb3ec41(0x24c),function(_0x47b2d9){const _0x4b3e1f=_0xb3ec41;if(installingUpdate)return;if(_0xeef3ec)return;_0xeef3ec=!![],_0x59bca6(null);const _0x426535=dbConfig[_0x4b3e1f(0x271)](_0x4b3e1f(0x2fe))[_0x4b3e1f(0x2fd)]({'botID':_0x3ec0f0})[_0x4b3e1f(0x310)]();_0x426535&&(_0x426535[_0x4b3e1f(0x281)]==_0x4b3e1f(0x258)||_0x426535[_0x4b3e1f(0x281)]==_0x4b3e1f(0x2dc))&&(updateLive(_0x3ec0f0,_0x4b3e1f(0x20d)),logging(_0x4b3e1f(0x291)+_0x3ec0f0),startBot([_0x3ec0f0,userID],{'cwd':bbpath},function(_0x551098){if(_0x551098)logging(_0x551098);}));});}function stopBot(_0x3a8dcd){getClientsWithBotID(_0x3a8dcd)['forEach'](_0x2156d2=>{getSocket(_0x2156d2['id'])['disconnect'](!![]),removeClient(_0x2156d2['id']);});if(pid[_0x3a8dcd])pid[_0x3a8dcd]['kill']();}function restartBot(_0x34fdda){if(pid[_0x34fdda])pid[_0x34fdda]['kill']();}function addBot(){const _0x100017=_0x503401;let _0x3faa0c;for(let _0x504923=0x1;_0x504923<0x3e9;_0x504923++){_0x3faa0c=_0x504923[_0x100017(0x2c4)]()[_0x100017(0x1fe)](0x3,'0');let _0x34331f=config[_0x100017(0x2fd)](_0xbdc4c8=>_0xbdc4c8['botID']==_0x3faa0c);if(!_0x34331f)break;}if(_0x3faa0c===_0x100017(0x25e)){logging(_0x100017(0x245));return;}logging(_0x100017(0x2b0)+_0x3faa0c),dbConfig[_0x100017(0x271)](_0x100017(0x2fe))[_0x100017(0x2f2)]({'botID':_0x3faa0c,'botname':_0x100017(0x275)+_0x3faa0c,'status':_0x100017(0x2dc),'live':''})[_0x100017(0x1d0)](),startBot([_0x3faa0c,userID],{'cwd':bbpath},function(_0x4d12cb){if(_0x4d12cb)logging(_0x4d12cb);}),config=getConfiguration(),io['to'](_0x100017(0x2e2))[_0x100017(0x213)]('bots',config);}function deleteBot(_0x5cb729){const _0x216e54=_0x503401;getClientsWithBotID(_0x5cb729)[_0x216e54(0x2e0)](_0x2a18ae=>{const _0x3c8fed=_0x216e54;getSocket(_0x2a18ae['id'])[_0x3c8fed(0x2c3)](!![]),removeClient(_0x2a18ae['id']);}),dbConfig[_0x216e54(0x271)]('bots')[_0x216e54(0x2b6)]({'botID':_0x5cb729})['write'](),logging(_0x216e54(0x25d)+_0x5cb729),stopBot(_0x5cb729);try{fs[_0x216e54(0x261)](path[_0x216e54(0x1fb)](configpath,_0x216e54(0x24d)+_0x5cb729+_0x216e54(0x1d1))),fs[_0x216e54(0x261)](path[_0x216e54(0x1fb)](configpath,_0x216e54(0x24d)+_0x5cb729+'-events.json')),fs['unlinkSync'](path[_0x216e54(0x1fb)](configpath,'bot-'+_0x5cb729+'-performance.json')),fs[_0x216e54(0x261)](path[_0x216e54(0x1fb)](configpath,_0x216e54(0x24d)+_0x5cb729+_0x216e54(0x250)));}catch(_0x55ac84){if(_0x55ac84)logging(_0x216e54(0x298),_0x55ac84);}config=getConfiguration(),io['to'](_0x216e54(0x2e2))[_0x216e54(0x213)](_0x216e54(0x2fe),config);}function toggleBot(_0x1f170e,_0xae9c29,_0x46d7a0){const _0x30e870=_0x503401;dbConfig[_0x30e870(0x271)](_0x30e870(0x2fe))[_0x30e870(0x2fd)]({'botID':_0x1f170e})[_0x30e870(0x243)]({'status':_0xae9c29})[_0x30e870(0x243)]({'live':_0x46d7a0})['write']();if(_0xae9c29==_0x30e870(0x258)||_0xae9c29==_0x30e870(0x2dc))logging(_0x30e870(0x27b)+_0x1f170e),startBot([_0x1f170e,userID],{'cwd':bbpath},function(_0x517122){if(_0x517122)logging(_0x517122);});else(_0xae9c29==_0x30e870(0x2f9)||_0xae9c29==_0x30e870(0x1e0))&&(logging(_0x30e870(0x2cd)+_0x1f170e),stopBot(_0x1f170e));config=getConfiguration(),io['to'](_0x30e870(0x2e2))[_0x30e870(0x213)]('bots',config);}function toggleStatus(_0x300a29){const _0x549976=_0x503401;let _0x353436=dbConfig[_0x549976(0x271)]('bots')[_0x549976(0x2fd)]({'botID':_0x300a29})[_0x549976(0x310)](),_0x2ec8d0;if(_0x353436[_0x549976(0x281)]===_0x549976(0x258))_0x2ec8d0=_0x549976(0x2f9);else{if(_0x353436[_0x549976(0x281)]===_0x549976(0x2dc))_0x2ec8d0='new-disabled';else{if(_0x353436[_0x549976(0x281)]===_0x549976(0x1e0))_0x2ec8d0=_0x549976(0x2dc);else{if(_0x353436[_0x549976(0x281)]===_0x549976(0x2f9))_0x2ec8d0=_0x549976(0x258);}}}return _0x2ec8d0;}function updateStatus(_0x104a5f,_0x46b632){const _0x27798f=_0x503401;dbConfig[_0x27798f(0x271)]('bots')['find']({'botID':_0x104a5f})[_0x27798f(0x243)]({'status':_0x46b632})[_0x27798f(0x1d0)](),config=getConfiguration(),io['to'](_0x27798f(0x2e2))[_0x27798f(0x213)](_0x27798f(0x2fe),config);}function updateLive(_0x9cdd88,_0x3f330e){const _0x6b8d8a=_0x503401;dbConfig[_0x6b8d8a(0x271)]('bots')[_0x6b8d8a(0x2fd)]({'botID':_0x9cdd88})[_0x6b8d8a(0x243)]({'live':_0x3f330e})['write'](),config=getConfiguration(),io['to'](_0x6b8d8a(0x2e2))[_0x6b8d8a(0x213)](_0x6b8d8a(0x2fe),config);}function updateBotName(_0x49b9fb,_0x450a2f){const _0x239d3d=_0x503401;dbConfig['get']('bots')[_0x239d3d(0x2fd)]({'botID':_0x49b9fb})[_0x239d3d(0x243)]({'botname':_0x450a2f})[_0x239d3d(0x1d0)](),config=getConfiguration(),io['to']('botmanager')[_0x239d3d(0x213)](_0x239d3d(0x2fe),config);}function telegramError(_0x529fc3){const _0x572e46=_0x503401;console[_0x572e46(0x227)](getTimeStamp()+_0x572e46(0x238));}function _0x462b(){const _0x3c063d=['started','Unauthorized\x20attempt\x20to\x20update\x20settings','error','bot','loginRequired','sockets','uuid','15\x20min','isIPv4MappedAddress','/help\x20-\x20show\x20available\x20commands\x0a','get','telegram2FaApproval','hex','version','Bot\x20','stop','blacklist','sign','getMinutes','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','enabled\x20Bot\x20','temporary\x20access\x20not\x20allowed','removeListener','getStartingBalances','node-telegram-bot-api','settings.','status','Error:\x20Invalid\x20argument\x20','/enable\x20-\x20enable\x20notifications\x0a','emitHistory','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','onText','12hunkWV','reject','botname','apply','copyFileSync','telegram','2FA\x20login\x20token\x20generated','RSA','whitelistEnabled','Token\x20blacklisted','restarting\x20Bot\x20','login\x20not\x20required','argv','Unauthorized\x20attempt\x20to\x20get\x20portfolio','logout','bb/','orders','error\x20while\x20deleting\x20config\x20files:\x20','/:bot/support','store','chat','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Invalid\x20username\x20or\x20IP\x20address','build','live','running','publicKey','/restart\x20-\x20restart\x20bot(s)\x0a','type','getMonth','backup/','https://hodlerhacks.com','user','getHours','add','constructor','all','listen','2791122IYhpSh','port','starting\x20new\x20bot\x20|\x20Bot\x20','existsSync','server','hasOwnProperty','success','storeConfiguration','remove','update-bb','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','sortBy','add-bot','HTML','getFullYear','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','polling_error','UA-192771731-1','timestamp','139182RlVLzs','All','disconnect','toString','\x20/\x20','lowdb/adapters/FileSync','socket.io','bcryptjs','filter','Notifications\x20disabled','352bSMIyW','temporary\x20token\x20generated','disabled\x20Bot\x20','max','pidExpireLogin','secret','inherit','date-fns','data','use','crypto','bbPassword','getDate','sendFile','2048714HLWtJs','<b>Telegram\x20bot\x20status:</b>\x0a','remoteAddress','new','/off\x20-\x20stop\x20bot(s)\x0a','ipaddr.js','telegramChatId','forEach','entries','botmanager','login\x20required','NTBA_FIX_319','/:bot/performance','@analytics/google-analytics','::1','7nxsocl','/:bot','clientip','Crypt','1qbXLlc','logged\x20out','bbUsername','test','whitelist','set','push','parse','handshake','All\x20bots\x20running\x20right\x20now','104soTwLR','settings','starting\x20bot\x20|\x20Bot\x20','disabled','headers','sha256','jsonwebtoken','find','bots','temporary\x20access\x20rejected','send','login','sendMessage','toIPv4Address','telegramIpApproval','getSeconds','login\x20token\x20generated','\x20>\x20','</b>\x20?','mkdirSync','Invalid\x20IP\x20address','hashSync','Login\x20rejected','catch','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','toIPv4MappedAddress','value','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','temporaryAccessAllowed','************','notification','default','includes','exp','path','placeOrder','write','-config.json','randomFillSync','yargs/yargs','3113604hEIeyL','getUTCHours','2FA\x20login\x20required','secure','Notifications\x20enabled\x0a','No\x20bots\x20running\x20right\x20now','30\x20min','Balance\x20Bot\x20Server','All\x20bots','child_process','ipv6','telegramToken','new-disabled','decrypt','timeshift','Temporary\x20access\x20rejected','express','reason','/:bot/coins','store-settings','build2','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','callback_query','User\x20has\x20been\x20validated','140520TfKNXd','function','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','index.html','Unauthorized\x20attempt\x20to\x20get\x20logs','/:bot/portfolio','defaults','connected','::ffff:127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','2FA\x20required','Invalid\x20Telegram\x20token','kind','lowdb','join','randomBytes','7595830KORVCN','padStart','http','bot.js','RSA-OAEP','\x20minutes','privateKey','telegramEnabled','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Access\x20enabled\x20for\x20','bb-config.json','5\x20min','event','bb-settings.json','f2aRequired','delete-bot','stopped','124JqkZuI','Ok,\x20will\x20send\x20alert\x20notifications\x20only','telegramEvents','Balance\x20Bot','login\x20token\x20valid','emit','conn','expiry','answerCallbackQuery','reload','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getTime','auth','hybrid-crypto-js','showname','telegramUsername','username','get-starting-balances','invalid\x20credentials','createServer','static','name','kill','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','stopPolling','log','Ok,\x20will\x20send\x20order\x20notifications\x20only','match','botID','127.0.0.1','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','update-bot','Unauthorized\x20attempt\x20to\x20update\x20bot','once','/on\x20-\x20start\x20bot(s)\x0a','connection','from','1054161vxJFyS','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','keys','password','access',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','length','\x20|\x20','split','Allow\x20login\x20from\x20IP\x20address\x20<b>','isDirectory','ipc','3000','Password\x20reset\x20rejected','allow','restart','assign','yes','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Alerts','place-order','show','Orders','Unauthorized\x20attempt\x20to\x20log\x20out','version.json','exit','bot-','pidRefreshToken','getPortfolio','-results.json','Login\x20accepted','message','then','2FA\x20login\x20rejected','initclient','reset-password','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','enabled','cancel-loading','token','-----------------------------------------------------------------------------------','alerts','deleted\x20Bot\x20','1000','404\x20Not\x20Found','access\x20timeout','unlinkSync',':\x20Bot\x20Mgr\x20>\x20','Notifications\x20disabled\x0a','/disable\x20-\x20disable\x20notifications\x0a','cloneDeep','encryptedUuid'];_0x462b=function(){return _0x3c063d;};return _0x462b();}function validateTelegram(_0x537f42){const _0x41ba90=_0x503401;if(_0x537f42[_0x41ba90(0x232)][_0x41ba90(0x21e)]!=settings[_0x41ba90(0x21d)]&&'@'+_0x537f42[_0x41ba90(0x232)]['username']!=settings[_0x41ba90(0x21d)])return tgBot[_0x41ba90(0x302)](_0x537f42[_0x41ba90(0x29b)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x41ba90(0x2bb)})[_0x41ba90(0x30d)](_0x6b0627=>{telegramError(_0x6b0627);}),![];return!![];}async function initTelegram(){const _0x18682f=_0x503401;if(tgBot)tgBot[_0x18682f(0x226)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x18682f(0x1df)],{'polling':!![]});let _0x24befa='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x24befa+='\x0a',_0x24befa+=_0x18682f(0x283),_0x24befa+=_0x18682f(0x264),_0x24befa+=_0x18682f(0x205),_0x24befa+=_0x18682f(0x2a3),_0x24befa+=_0x18682f(0x230),_0x24befa+=_0x18682f(0x2dd),_0x24befa+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x24befa+=_0x18682f(0x270);let _0x5d446a='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5d446a+='\x0a',_0x5d446a+=_0x24befa,tgBot[_0x18682f(0x286)](/\/start/,_0x513bb4=>{const _0x1f15ab=_0x18682f;if(!validateTelegram(_0x513bb4))return;if(settings[_0x1f15ab(0x2df)]!=_0x513bb4[_0x1f15ab(0x29b)]['id'])updateSetting('telegramChatId',_0x513bb4[_0x1f15ab(0x29b)]['id']);updateSetting(_0x1f15ab(0x204),!![]),tgBot['sendMessage'](_0x513bb4['chat']['id'],_0x5d446a)['catch'](_0x23b355=>{telegramError(_0x23b355);});}),tgBot[_0x18682f(0x286)](/\/enable/,_0x144fba=>{const _0x3486aa=_0x18682f;if(!validateTelegram(_0x144fba))return;if(settings[_0x3486aa(0x2df)]!=_0x144fba[_0x3486aa(0x29b)]['id'])updateSetting(_0x3486aa(0x2df),_0x144fba['chat']['id']);updateSetting(_0x3486aa(0x204),!![]),tgBot[_0x3486aa(0x302)](_0x144fba['chat']['id'],'Notifications\x20enabled')['catch'](_0x4c6cbb=>{telegramError(_0x4c6cbb);});}),tgBot['onText'](/\/config/,async _0x316651=>{const _0x381cb2=_0x18682f;if(!validateTelegram(_0x316651))return;tgBot['removeListener'](_0x381cb2(0x1eb)),tgBot['sendMessage'](_0x316651[_0x381cb2(0x29b)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x381cb2(0x249),'callback_data':_0x381cb2(0x297)},{'text':_0x381cb2(0x246),'callback_data':_0x381cb2(0x25c)},{'text':_0x381cb2(0x2c2),'callback_data':_0x381cb2(0x2ac)}]]}})[_0x381cb2(0x30d)](_0x2e7621=>{telegramError(_0x2e7621);}),tgBot['on'](_0x381cb2(0x1eb),async _0x5c6533=>{const _0x573d8d=_0x381cb2,_0x5cfcfc=_0x5c6533[_0x573d8d(0x2d3)],_0x560b58=_0x5c6533[_0x573d8d(0x252)];tgBot['answerCallbackQuery'](_0x5c6533['id'])['then'](async()=>{const _0x436756=_0x573d8d;_0x5cfcfc=='orders'&&(updateSetting(_0x436756(0x210),'orders'),updateSetting(_0x436756(0x204),!![]),await tgBot['sendMessage'](_0x560b58[_0x436756(0x29b)]['id'],_0x436756(0x228))['catch'](_0x5c3e50=>{telegramError(_0x5c3e50);}));_0x5cfcfc==_0x436756(0x25c)&&(updateSetting(_0x436756(0x210),'alerts'),updateSetting(_0x436756(0x204),!![]),await tgBot[_0x436756(0x302)](_0x560b58[_0x436756(0x29b)]['id'],_0x436756(0x20f))[_0x436756(0x30d)](_0x437094=>{telegramError(_0x437094);}));_0x5cfcfc=='all'&&(updateSetting(_0x436756(0x210),_0x436756(0x2ac)),updateSetting(_0x436756(0x204),!![]),await tgBot['sendMessage'](_0x560b58[_0x436756(0x29b)]['id'],_0x436756(0x225))[_0x436756(0x30d)](_0xeadd98=>{telegramError(_0xeadd98);}));if(!settings['telegramChatId'])tgBot[_0x436756(0x302)](_0x560b58[_0x436756(0x29b)]['id'],_0x436756(0x257))[_0x436756(0x30d)](_0xbf4cf7=>{telegramError(_0xbf4cf7);});}),tgBot['removeListener'](_0x573d8d(0x1eb));});}),tgBot[_0x18682f(0x286)](/\/status/,_0xc3fd88=>{const _0x473ddc=_0x18682f;if(!validateTelegram(_0xc3fd88))return;let _0x3894ad='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x473ddc(0x2e0)](_0x384232=>{const _0x1f906a=_0x473ddc;_0x3894ad+=_0x1f906a(0x275)+_0x384232[_0x1f906a(0x22a)]+_0x1f906a(0x23a)+_0x384232[_0x1f906a(0x289)]+':\x20'+_0x384232[_0x1f906a(0x281)]+_0x1f906a(0x2c5)+_0x384232[_0x1f906a(0x2a0)]+'\x0a';}),_0x3894ad+='\x0a',_0x3894ad+=_0x473ddc(0x2da),_0x3894ad+=!settings['telegramEnabled']?_0x473ddc(0x263):_0x473ddc(0x1d8),_0x3894ad+=settings[_0x473ddc(0x204)]?settings[_0x473ddc(0x210)]==_0x473ddc(0x2ac)?_0x473ddc(0x1e9):'Notifications\x20types:\x20'+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0x473ddc(0x302)](_0xc3fd88['chat']['id'],_0x3894ad,{'parse_mode':_0x473ddc(0x2bb)})['catch'](_0x3b9106=>{telegramError(_0x3b9106);});}),tgBot[_0x18682f(0x286)](/\/restart/,_0x5ca3dc=>{const _0x24a8f7=_0x18682f;if(!validateTelegram(_0x5ca3dc))return;tgBot['removeListener'](_0x24a8f7(0x1eb));const _0x33181e=getEnabledBots();if(_0x33181e['length']==0x0)tgBot[_0x24a8f7(0x302)](_0x5ca3dc[_0x24a8f7(0x29b)]['id'],_0x24a8f7(0x1d9))[_0x24a8f7(0x30d)](_0x44b844=>{telegramError(_0x44b844);});else{if(_0x33181e['length']>0x1)_0x33181e[_0x24a8f7(0x2f2)]({'botID':_0x24a8f7(0x2ac)});let _0x179393=[],_0x3a446d=[];const _0x3134fa=_0x33181e['length']%0x4==0x0||_0x33181e[_0x24a8f7(0x239)]%0x4==0x3||_0x33181e['length']%0x3==0x1?0x4:0x3;let _0x2babb4=0x0;_0x33181e[_0x24a8f7(0x2e0)]((_0x48dc50,_0x5b41de)=>{const _0x3dea4a=_0x24a8f7;if(_0x5b41de%_0x3134fa==0x0)_0x3a446d=[];_0x3a446d['push']({'text':_0x48dc50[_0x3dea4a(0x22a)]==_0x3dea4a(0x2ac)?'All\x20bots':_0x3dea4a(0x275)+_0x48dc50[_0x3dea4a(0x22a)],'callback_data':_0x48dc50['botID']}),_0x5b41de%_0x3134fa==0x0&&(_0x179393[_0x2babb4]=_0x3a446d,_0x2babb4++);}),tgBot[_0x24a8f7(0x302)](_0x5ca3dc[_0x24a8f7(0x29b)]['id'],_0x24a8f7(0x218),{'reply_markup':{'inline_keyboard':_0x179393}})[_0x24a8f7(0x30d)](_0x3b8604=>{telegramError(_0x3b8604);}),tgBot['on'](_0x24a8f7(0x1eb),async _0x4acf01=>{const _0x721535=_0x24a8f7,_0x3a63f6=_0x4acf01[_0x721535(0x2d3)],_0x529b78=_0x4acf01[_0x721535(0x252)];tgBot['answerCallbackQuery'](_0x4acf01['id'])[_0x721535(0x253)](async()=>{const _0x188bd7=_0x721535;if(_0x3a63f6=='all'){if(settings[_0x188bd7(0x210)]==_0x188bd7(0x297))tgBot[_0x188bd7(0x302)](_0x529b78[_0x188bd7(0x29b)]['id'],_0x188bd7(0x285))[_0x188bd7(0x30d)](_0xbb78be=>{telegramError(_0xbb78be);});config[_0x188bd7(0x2e0)](_0x2b0961=>{restartBot(_0x2b0961['botID']);});}else{if(settings['telegramEvents']==_0x188bd7(0x297))tgBot[_0x188bd7(0x302)](_0x529b78[_0x188bd7(0x29b)]['id'],_0x188bd7(0x29d)+_0x3a63f6)[_0x188bd7(0x30d)](_0x463c76=>{telegramError(_0x463c76);});restartBot(_0x3a63f6);}}),tgBot[_0x721535(0x27d)]('callback_query');});}}),tgBot[_0x18682f(0x286)](/\/on/,_0x4c4eef=>{const _0x22d464=_0x18682f;if(!validateTelegram(_0x4c4eef))return;tgBot[_0x22d464(0x27d)](_0x22d464(0x1eb));const _0x30858d=getDisabledBots();if(_0x30858d[_0x22d464(0x239)]==0x0)tgBot['sendMessage'](_0x4c4eef[_0x22d464(0x29b)]['id'],_0x22d464(0x2f5))[_0x22d464(0x30d)](_0x163ac2=>{telegramError(_0x163ac2);});else{if(_0x30858d['length']>0x1)_0x30858d['push']({'botID':_0x22d464(0x2ac)});let _0x3dda84=[],_0xa5df5=[];const _0x3b9898=_0x30858d['length']%0x4==0x0||_0x30858d[_0x22d464(0x239)]%0x4==0x3||_0x30858d[_0x22d464(0x239)]%0x3==0x1?0x4:0x3;let _0x5f2378=0x0;_0x30858d['forEach']((_0x1d57bb,_0x16c81e)=>{const _0x38a2b2=_0x22d464;if(_0x16c81e%_0x3b9898==0x0)_0xa5df5=[];_0xa5df5[_0x38a2b2(0x2f2)]({'text':_0x1d57bb[_0x38a2b2(0x22a)]==_0x38a2b2(0x2ac)?_0x38a2b2(0x1dc):'Bot\x20'+_0x1d57bb[_0x38a2b2(0x22a)],'callback_data':_0x1d57bb[_0x38a2b2(0x22a)]}),_0x16c81e%_0x3b9898==0x0&&(_0x3dda84[_0x5f2378]=_0xa5df5,_0x5f2378++);}),tgBot[_0x22d464(0x302)](_0x4c4eef[_0x22d464(0x29b)]['id'],_0x22d464(0x1f6),{'reply_markup':{'inline_keyboard':_0x3dda84}})[_0x22d464(0x30d)](_0x1773c7=>{telegramError(_0x1773c7);}),tgBot['on']('callback_query',async _0x1c96da=>{const _0x2f561d=_0x22d464,_0x2720a4=_0x1c96da[_0x2f561d(0x2d3)],_0x6b65c4=_0x1c96da[_0x2f561d(0x252)];tgBot[_0x2f561d(0x216)](_0x1c96da['id'])[_0x2f561d(0x253)](async()=>{const _0x5d29fa=_0x2f561d;if(_0x2720a4==_0x5d29fa(0x2ac)){if(settings[_0x5d29fa(0x210)]==_0x5d29fa(0x297))tgBot[_0x5d29fa(0x302)](_0x6b65c4[_0x5d29fa(0x29b)]['id'],_0x5d29fa(0x2b8))[_0x5d29fa(0x30d)](_0x17267d=>{telegramError(_0x17267d);});_0x30858d[_0x5d29fa(0x2e0)](_0xd309ce=>{const _0xbe4829=_0x5d29fa;if(_0xd309ce[_0xbe4829(0x22a)]!=_0xbe4829(0x2ac))toggleBot(_0xd309ce['botID'],toggleStatus(_0xd309ce[_0xbe4829(0x22a)]),_0xbe4829(0x20d));});}else{if(settings[_0x5d29fa(0x210)]=='orders')tgBot[_0x5d29fa(0x302)](_0x6b65c4[_0x5d29fa(0x29b)]['id'],_0x5d29fa(0x27a)+_0x2720a4)[_0x5d29fa(0x30d)](_0x135eea=>{telegramError(_0x135eea);});toggleBot(_0x2720a4,toggleStatus(_0x2720a4),_0x5d29fa(0x20d));}}),tgBot[_0x2f561d(0x27d)](_0x2f561d(0x1eb));});}}),tgBot[_0x18682f(0x286)](/\/off/,_0x2bb8ba=>{const _0x21ed47=_0x18682f;if(!validateTelegram(_0x2bb8ba))return;tgBot[_0x21ed47(0x27d)](_0x21ed47(0x1eb));const _0x1a9e57=getEnabledBots();if(_0x1a9e57[_0x21ed47(0x239)]==0x0)tgBot[_0x21ed47(0x302)](_0x2bb8ba[_0x21ed47(0x29b)]['id'],_0x21ed47(0x1d9))['catch'](_0x459747=>{telegramError(_0x459747);});else{if(_0x1a9e57[_0x21ed47(0x239)]>0x1)_0x1a9e57[_0x21ed47(0x2f2)]({'botID':'all'});let _0x5130ae=[],_0x4399e1=[];const _0x2ea8e0=_0x1a9e57[_0x21ed47(0x239)]%0x4==0x0||_0x1a9e57[_0x21ed47(0x239)]%0x4==0x3||_0x1a9e57[_0x21ed47(0x239)]%0x3==0x1?0x4:0x3;let _0x41c7e1=0x0;_0x1a9e57[_0x21ed47(0x2e0)]((_0x6c8ab1,_0x5e6d71)=>{const _0x57cced=_0x21ed47;if(_0x5e6d71%_0x2ea8e0==0x0)_0x4399e1=[];_0x4399e1[_0x57cced(0x2f2)]({'text':_0x6c8ab1[_0x57cced(0x22a)]==_0x57cced(0x2ac)?_0x57cced(0x1dc):_0x57cced(0x275)+_0x6c8ab1['botID'],'callback_data':_0x6c8ab1[_0x57cced(0x22a)]}),_0x5e6d71%_0x2ea8e0==0x0&&(_0x5130ae[_0x41c7e1]=_0x4399e1,_0x41c7e1++);}),tgBot[_0x21ed47(0x302)](_0x2bb8ba[_0x21ed47(0x29b)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5130ae}})[_0x21ed47(0x30d)](_0x5dbcbf=>{telegramError(_0x5dbcbf);}),tgBot['on'](_0x21ed47(0x1eb),async _0x20a347=>{const _0x2d7228=_0x21ed47,_0x3373ea=_0x20a347['data'],_0x218977=_0x20a347['message'];tgBot[_0x2d7228(0x216)](_0x20a347['id'])['then'](async()=>{const _0x3a750e=_0x2d7228;if(_0x3373ea==_0x3a750e(0x2ac)){if(settings[_0x3a750e(0x210)]==_0x3a750e(0x297))tgBot[_0x3a750e(0x302)](_0x218977[_0x3a750e(0x29b)]['id'],_0x3a750e(0x1ea))[_0x3a750e(0x30d)](_0x5436f4=>{telegramError(_0x5436f4);});_0x1a9e57[_0x3a750e(0x2e0)](_0x456a47=>{const _0x5b181f=_0x3a750e;if(_0x456a47[_0x5b181f(0x22a)]!='all')toggleBot(_0x456a47[_0x5b181f(0x22a)],toggleStatus(_0x456a47[_0x5b181f(0x22a)]),_0x5b181f(0x20d));});}else{if(settings[_0x3a750e(0x210)]==_0x3a750e(0x297))tgBot[_0x3a750e(0x302)](_0x218977[_0x3a750e(0x29b)]['id'],_0x3a750e(0x22c)+_0x3373ea)[_0x3a750e(0x30d)](_0x5f2271=>{telegramError(_0x5f2271);});toggleBot(_0x3373ea,toggleStatus(_0x3373ea),_0x3a750e(0x20d));}}),tgBot['removeListener'](_0x2d7228(0x1eb));});}}),tgBot[_0x18682f(0x286)](/\/disable/,_0x4da993=>{const _0x36311b=_0x18682f;if(!validateTelegram(_0x4da993))return;tgBot[_0x36311b(0x302)](_0x4da993[_0x36311b(0x29b)]['id'],_0x36311b(0x2ca))[_0x36311b(0x30d)](_0x222a1b=>{telegramError(_0x222a1b);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x18682f(0x286)](/\/help/,_0x480253=>{const _0x1e6995=_0x18682f;if(!validateTelegram(_0x480253))return;tgBot[_0x1e6995(0x302)](_0x480253[_0x1e6995(0x29b)]['id'],_0x24befa)[_0x1e6995(0x30d)](_0x5830d0=>{telegramError(_0x5830d0);});}),tgBot['on'](_0x18682f(0x2be),_0x37a976=>{const _0x5b52a4=_0x18682f;_0x37a976[_0x5b52a4(0x2c4)]()[_0x5b52a4(0x1cc)](_0x5b52a4(0x25f))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x5b52a4(0x226)](),tgBot=null,io['to'](_0x5b52a4(0x2e2))[_0x5b52a4(0x213)](_0x5b52a4(0x1ca),_0x5b52a4(0x1f8)));}),process[_0x18682f(0x22f)]('SIGINT',()=>{const _0x602de7=_0x18682f;if(tgBot)tgBot[_0x602de7(0x226)]();process[_0x602de7(0x24c)](0x1);}),process[_0x18682f(0x22f)]('SIGTERM',()=>{const _0x7e0f30=_0x18682f;if(tgBot)tgBot[_0x7e0f30(0x226)]();process[_0x7e0f30(0x24c)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x19d4e7,_0x56a260){const _0x5d259b=_0x503401;if(settings[_0x5d259b(0x204)]){if(settings[_0x5d259b(0x210)]=='all'||(_0x56a260['type']==_0x5d259b(0x269)||_0x56a260[_0x5d259b(0x2a4)]==_0x5d259b(0x2b4))&&settings['telegramEvents']=='alerts'||_0x56a260[_0x5d259b(0x2a4)]=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x5d259b(0x2df)]){if(_0x56a260[_0x5d259b(0x21c)])tgBot[_0x5d259b(0x302)](settings[_0x5d259b(0x2df)],_0x56a260[_0x5d259b(0x289)]+_0x5d259b(0x307)+_0x56a260[_0x5d259b(0x209)])[_0x5d259b(0x30d)](_0x4ebe44=>{telegramError(_0x4ebe44);});else tgBot[_0x5d259b(0x302)](settings[_0x5d259b(0x2df)],_0x5d259b(0x275)+_0x19d4e7+_0x5d259b(0x307)+_0x56a260[_0x5d259b(0x209)])[_0x5d259b(0x30d)](_0x544ca9=>{telegramError(_0x544ca9);});}}}}function getDeviceWithIp(_0x1e2f22){const _0x278de0=_0x503401;return devices[_0x278de0(0x2fd)](_0x171ca8=>_0x171ca8['ip']===_0x1e2f22);}function temporaryAccess2FA(_0x2b8c89,_0x75ea1a){const _0x11eae9=_0x503401;let _0xf8f8af=new Date(),_0x3593b1=![];if(lastIpApproval){if(_0xf8f8af-lastIpApproval<0x1388)_0x3593b1=!![];}lastIpApproval=new Date();if(_0x3593b1)return;tgBot&&settings[_0x11eae9(0x2df)]&&(tgBot[_0x11eae9(0x27d)](_0x11eae9(0x1eb)),tgBot['sendMessage'](settings['telegramChatId'],_0x11eae9(0x311)+normalizeIP(_0x75ea1a)[_0x11eae9(0x248)]+_0x11eae9(0x308),{'parse_mode':_0x11eae9(0x2bb),'reply_markup':{'inline_keyboard':[[{'text':_0x11eae9(0x208),'callback_data':'5'},{'text':_0x11eae9(0x26e),'callback_data':'15'},{'text':_0x11eae9(0x1da),'callback_data':'30'},{'text':_0x11eae9(0x288),'callback_data':'reject'}]]}})[_0x11eae9(0x30d)](_0x5b742d=>{telegramError(_0x5b742d);}),tgBot['on'](_0x11eae9(0x1eb),async _0x14f1de=>{const _0x33ecca=_0x11eae9,_0x355bdd=_0x14f1de['data'],_0x485219=_0x14f1de['message'];tgBot[_0x33ecca(0x216)](_0x14f1de['id'])[_0x33ecca(0x253)](async()=>{const _0x2fb6a3=_0x33ecca;devices[_0x2b8c89][_0x2fb6a3(0x304)]={'clientip':_0x75ea1a,'timestamp':new Date()[_0x2fb6a3(0x219)](),'expiry':_0x355bdd},_0x355bdd!=_0x2fb6a3(0x288)?(await tgBot[_0x2fb6a3(0x302)](_0x485219['chat']['id'],_0x2fb6a3(0x206)+_0x355bdd+_0x2fb6a3(0x202),{'parse_mode':_0x2fb6a3(0x2bb)})['catch'](_0x573f94=>{telegramError(_0x573f94);}),io['to'](_0x2b8c89)[_0x2fb6a3(0x213)](_0x2fb6a3(0x281),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x2fb6a3(0x302)](_0x485219[_0x2fb6a3(0x29b)]['id'],_0x2fb6a3(0x1e3))[_0x2fb6a3(0x30d)](_0x59ce61=>{telegramError(_0x59ce61);}),io['to'](_0x2b8c89)[_0x2fb6a3(0x213)](_0x2fb6a3(0x281),{'access':{'allow':![],'reason':_0x2fb6a3(0x2ff),'token':null}}));}),tgBot[_0x33ecca(0x27d)](_0x33ecca(0x1eb));}));}function loginAccess2FA(_0x2e6b9d,_0x5e1a27){const _0x1801f1=_0x503401;tgBot&&settings['telegramChatId']&&(tgBot[_0x1801f1(0x27d)]('callback_query'),tgBot['sendMessage'](settings['telegramChatId'],_0x1801f1(0x23c)+normalizeIP(_0x5e1a27)[_0x1801f1(0x248)]+_0x1801f1(0x308),{'parse_mode':_0x1801f1(0x2bb),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x1801f1(0x288),'callback_data':_0x1801f1(0x288)}]]}})[_0x1801f1(0x30d)](_0x5914fe=>{telegramError(_0x5914fe);}),tgBot['on'](_0x1801f1(0x1eb),async _0x24340f=>{const _0xfc044d=_0x1801f1,_0x3f0fc6=_0x24340f[_0xfc044d(0x2d3)],_0x4db46d=_0x24340f[_0xfc044d(0x252)];tgBot[_0xfc044d(0x216)](_0x24340f['id'])[_0xfc044d(0x253)](async()=>{const _0x2fa231=_0xfc044d;devices[_0x2e6b9d][_0x2fa231(0x272)]={'clientip':_0x5e1a27,'timestamp':new Date()[_0x2fa231(0x219)](),'expiry':_0x3f0fc6},_0x3f0fc6!=_0x2fa231(0x288)?(await tgBot[_0x2fa231(0x302)](_0x4db46d['chat']['id'],_0x2fa231(0x251),{'parse_mode':'HTML'})[_0x2fa231(0x30d)](_0x67af35=>{telegramError(_0x67af35);}),io['to'](_0x2e6b9d)[_0x2fa231(0x213)]('status',{'access':{'allow':![],'reason':_0x2fa231(0x217),'token':null}})):(await tgBot['sendMessage'](_0x4db46d[_0x2fa231(0x29b)]['id'],_0x2fa231(0x30c))[_0x2fa231(0x30d)](_0x4eed6a=>{telegramError(_0x4eed6a);}),io['to'](_0x2e6b9d)[_0x2fa231(0x213)](_0x2fa231(0x281),{'access':{'allow':![],'reason':_0x2fa231(0x254),'token':null}}));}),tgBot[_0xfc044d(0x27d)](_0xfc044d(0x1eb));}));}function getConfiguration(){const _0x4de35a=_0x503401;return dbConfig[_0x4de35a(0x271)](_0x4de35a(0x2fe))[_0x4de35a(0x2b9)](_0x4de35a(0x22a))[_0x4de35a(0x310)]()||[];}function getEnabledBots(){const _0x4f3976=_0x503401;return dbConfig['get'](_0x4f3976(0x2fe))['sortBy'](_0x4f3976(0x22a))[_0x4f3976(0x2c9)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x21fb2a=_0x503401;return dbConfig[_0x21fb2a(0x271)](_0x21fb2a(0x2fe))[_0x21fb2a(0x2b9)](_0x21fb2a(0x22a))[_0x21fb2a(0x2c9)]({'status':_0x21fb2a(0x2f9)})[_0x21fb2a(0x310)]()||[];}function getSettings(){const _0x41c137=_0x503401;return dbSettings[_0x41c137(0x271)](_0x41c137(0x2f7))['value']()||{'timeshift':0x0};}function getSecure(){const _0x32fe31=_0x503401;return dbSecure['get']('secure')[_0x32fe31(0x310)]()||{};}function getBlacklist(){const _0x2492d2=_0x503401;return dbSecure['get'](_0x2492d2(0x277))[_0x2492d2(0x310)]()||[];}function broadcastToBots(_0x38d6f7,_0x12b167){const _0x5411d6=_0x503401;config[_0x5411d6(0x2e0)](_0x5cf187=>{const _0x52bc3d=_0x5411d6;if(_0x5cf187[_0x52bc3d(0x281)]==_0x52bc3d(0x258)&&_0x5cf187[_0x52bc3d(0x2a0)]==_0x52bc3d(0x2a1)){if(pid[_0x5cf187[_0x52bc3d(0x22a)]])pid[_0x5cf187[_0x52bc3d(0x22a)]]['send']({[_0x38d6f7]:_0x12b167});}});}function storeSettings(_0x4e9d21,_0xd3bdfa=![]){const _0xc5555b=_0x503401;_0x4e9d21={...settings,..._0x4e9d21};if(_0xd3bdfa&&_0x4e9d21[_0xc5555b(0x2d6)]!='************'&&_0x4e9d21['bbPassword']!=''){const _0x246921=crypt['decrypt'](secure['privateKey'],_0x4e9d21['bbPassword'])[_0xc5555b(0x252)][_0xc5555b(0x23b)]('@')[0x0],_0x214a73=bcrypt[_0xc5555b(0x30b)](_0x246921,saltRounds);_0x4e9d21={..._0x4e9d21,'bbPassword':_0x214a73};}if(_0xd3bdfa&&_0x4e9d21[_0xc5555b(0x1df)]!='************'&&_0x4e9d21[_0xc5555b(0x1df)]!=''){const _0x19f480=crypt[_0xc5555b(0x1e1)](secure[_0xc5555b(0x203)],_0x4e9d21['telegramToken'])['message']['split']('@')[0x0];_0x4e9d21={..._0x4e9d21,'telegramToken':_0x19f480};}const _0x482c54=_0x4e9d21[_0xc5555b(0x1df)]!=_0xc5555b(0x1c9)&&_0x4e9d21[_0xc5555b(0x1df)]!=settings[_0xc5555b(0x1df)]||_0x4e9d21[_0xc5555b(0x21d)]!=settings['telegramUsername'],_0x5ef412=_0x4e9d21['telegramToken']==''||_0x4e9d21['telegramUsername']=='';if(_0x482c54)_0x4e9d21[_0xc5555b(0x210)]=_0xc5555b(0x2ac);for(const [_0x33911c,_0xb6083c]of Object[_0xc5555b(0x2e1)](_0x4e9d21)){if(_0x33911c==_0xc5555b(0x1df)&&_0xb6083c==_0xc5555b(0x1c9)){_0x4e9d21[_0xc5555b(0x1df)]=settings[_0xc5555b(0x1df)];continue;};if(_0x33911c==_0xc5555b(0x2d6)&&_0xb6083c==_0xc5555b(0x1c9)){_0x4e9d21[_0xc5555b(0x2d6)]=settings[_0xc5555b(0x2d6)];continue;};dbSettings[_0xc5555b(0x2f1)](_0xc5555b(0x280)+_0x33911c,_0xb6083c)[_0xc5555b(0x1d0)]();}settings=_0x4e9d21,io['to']('botmanager')[_0xc5555b(0x213)]('settings',cleanSettings()),broadcastToBots(_0xc5555b(0x1e2),settings[_0xc5555b(0x1e2)]);if(_0x482c54&&!_0x5ef412)initTelegram();if(_0x482c54&&_0x5ef412)disableTelegram();getAllClients()[_0xc5555b(0x2e0)](_0x539169=>{const _0x2f5f14=_0xc5555b;getSocket(_0x539169['id'])[_0x2f5f14(0x213)](_0x2f5f14(0x281),{'access':{'allow':![],'reason':_0x2f5f14(0x217),'token':null}});});}function updateSetting(_0x4d7be8,_0x3a052a){const _0x1ee196=_0x503401;dbSettings[_0x1ee196(0x2f1)](_0x1ee196(0x280)+_0x4d7be8,_0x3a052a)[_0x1ee196(0x1d0)](),settings=getSettings(),io['to'](_0x1ee196(0x2e2))['emit']('settings',cleanSettings());}function storeSecure(_0x1faa79){const _0x18a0a1=_0x503401;dbSecure[_0x18a0a1(0x271)](_0x18a0a1(0x1d7))[_0x18a0a1(0x2f2)](_0x1faa79)[_0x18a0a1(0x1d0)](),secure=_0x1faa79;}function addBlacklist(_0x48b9ec){const _0x2dae1e=_0x503401;cleanBlacklist();let _0x3e88eb;devices[_0x48b9ec][_0x2dae1e(0x304)]?_0x3e88eb=Math[_0x2dae1e(0x2ce)](devices[_0x48b9ec][_0x2dae1e(0x304)][_0x2dae1e(0x215)],loginExpiry):_0x3e88eb=loginExpiry,dbSecure[_0x2dae1e(0x271)](_0x2dae1e(0x277))[_0x2dae1e(0x2f2)]({'expiry':new Date()['getTime']()+_0x3e88eb*0x3c*0x3e8,'token':devices[_0x48b9ec][_0x2dae1e(0x237)][_0x2dae1e(0x25a)]})[_0x2dae1e(0x1d0)](),blacklist=dbSecure[_0x2dae1e(0x271)]('blacklist')[_0x2dae1e(0x310)]();}function cleanBlacklist(){const _0x2d8c9f=_0x503401;let _0x1e5bf3=dbSecure[_0x2d8c9f(0x271)]('blacklist')[_0x2d8c9f(0x265)]()['value'](),_0x188b6a=new Date()[_0x2d8c9f(0x219)]();_0x1e5bf3[_0x2d8c9f(0x2e0)](_0x30d68c=>{const _0x19c650=_0x2d8c9f;_0x30d68c['expiry']<_0x188b6a&&dbSecure['get'](_0x19c650(0x277))[_0x19c650(0x2b6)]({'expiry':_0x30d68c[_0x19c650(0x215)]})['write']();});}function initStates(){const _0x1c5df2=_0x503401;let _0x386846=getConfiguration();_0x386846[_0x1c5df2(0x2e0)](_0x1d9ab2=>{const _0x1dbe11=_0x1c5df2;_0x1d9ab2[_0x1dbe11(0x2a0)]=_0x1dbe11(0x20d);}),storeConfiguration(_0x386846);}function onKeys(){const _0x1c5d3a=new RSA();return new Promise(_0x3b3275=>{_0x1c5d3a['generateKeyPairAsync']()['then'](_0x13d32b=>{_0x3b3275(_0x13d32b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5189d4=_0x503401;let _0x2d33e7=getConfiguration(),_0x4fdc91=![];_0x2d33e7[_0x5189d4(0x2e0)](_0x247682=>{const _0x5cb140=_0x5189d4;if(_0x247682[_0x5cb140(0x281)]==_0x5cb140(0x2a1))_0x247682[_0x5cb140(0x281)]=_0x5cb140(0x258),_0x4fdc91=!![];else _0x247682[_0x5cb140(0x281)]=='stopped'&&(_0x247682['status']=_0x5cb140(0x2f9),_0x4fdc91=!![]);});if(_0x4fdc91)storeConfiguration(_0x2d33e7);let _0x42f160=getSecure();if(!_0x42f160[_0x5189d4(0x2b3)](_0x5189d4(0x2d0))){let _0x206c0d=await generateKeys();_0x42f160['publicKey']=_0x206c0d[_0x5189d4(0x2a2)],_0x42f160[_0x5189d4(0x203)]=_0x206c0d[_0x5189d4(0x203)],_0x42f160[_0x5189d4(0x2d0)]=crypto[_0x5189d4(0x1fc)](0x20)[_0x5189d4(0x2c4)](_0x5189d4(0x273));;storeSecure(_0x42f160);}let _0x41019e=getSettings();_0x4fdc91=![];!_0x41019e['hasOwnProperty'](_0x5189d4(0x26b))&&(_0x41019e[_0x5189d4(0x26b)]=![],_0x41019e[_0x5189d4(0x2ee)]='',_0x41019e[_0x5189d4(0x2d6)]='',_0x41019e[_0x5189d4(0x20b)]=![],_0x4fdc91=!![]);!_0x41019e[_0x5189d4(0x2b3)](_0x5189d4(0x28f))&&(_0x41019e[_0x5189d4(0x28f)]=![],_0x41019e['whitelist']=[],_0x41019e['temporaryAccessAllowed']=![],_0x4fdc91=!![]);if(!_0x41019e[_0x5189d4(0x2b3)](_0x5189d4(0x204))){if(_0x41019e[_0x5189d4(0x2df)])_0x41019e[_0x5189d4(0x204)]=!![];else _0x41019e[_0x5189d4(0x204)]=![];_0x4fdc91=!![];}if(_0x4fdc91)storeSettings(_0x41019e);}function storeConfiguration(_0xcae6bb){const _0x253e39=_0x503401;dbConfig['get'](_0x253e39(0x2fe))[_0x253e39(0x2b6)]()[_0x253e39(0x1d0)](),dbConfig[_0x253e39(0x271)](_0x253e39(0x2fe))[_0x253e39(0x2f2)](..._0xcae6bb)[_0x253e39(0x1d0)](),config=_0xcae6bb;}function resetPassword(){const _0x2af764=_0x503401;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x2af764(0x1eb)),tgBot[_0x2af764(0x302)](settings[_0x2af764(0x2df)],_0x2af764(0x2bd),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2af764(0x244)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x53da38=>{telegramError(_0x53da38);}),tgBot['on'](_0x2af764(0x1eb),async _0x1a0ba3=>{const _0x42177e=_0x2af764,_0xa20f6d=_0x1a0ba3[_0x42177e(0x2d3)],_0x44d302=_0x1a0ba3['message'];tgBot[_0x42177e(0x216)](_0x1a0ba3['id'])[_0x42177e(0x253)](async()=>{const _0x3cb017=_0x42177e;if(_0xa20f6d!='no'){const _0x295582=0xf,_0x3d2a7d=_0x3cb017(0x234),_0xeba286=Array[_0x3cb017(0x232)](crypto[_0x3cb017(0x1d2)](new Uint32Array(_0x295582)))['map'](_0x1ede30=>_0x3d2a7d[_0x1ede30%_0x3d2a7d[_0x3cb017(0x239)]])[_0x3cb017(0x1fb)](''),_0x34d03f=bcrypt['hashSync'](_0xeba286,saltRounds);storeSettings({'bbPassword':_0x34d03f}),await tgBot['sendMessage'](_0x44d302[_0x3cb017(0x29b)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0xeba286,{'parse_mode':_0x3cb017(0x2bb)})[_0x3cb017(0x30d)](_0x5dd3b9=>{telegramError(_0x5dd3b9);});}else await tgBot['sendMessage'](_0x44d302[_0x3cb017(0x29b)]['id'],_0x3cb017(0x240))['catch'](_0x58514b=>{telegramError(_0x58514b);});}),tgBot[_0x42177e(0x27d)]('callback_query');}));}function logging(_0x4717cd){const _0x21178c=_0x503401;console[_0x21178c(0x227)](getTimeStamp()+_0x21178c(0x262)+_0x4717cd);if(tgBot&&settings[_0x21178c(0x2df)]&&settings[_0x21178c(0x210)]!=_0x21178c(0x297))tgBot[_0x21178c(0x302)](settings[_0x21178c(0x2df)],'Bot\x20Mgr\x20>\x20'+_0x4717cd)[_0x21178c(0x30d)](_0x41a9ef=>{telegramError(_0x41a9ef);});}function getServerTime(){const _0x4ea082=_0x503401,_0x2d9957=new Date();return _0x2d9957['getFullYear']()+'/'+(_0x2d9957[_0x4ea082(0x2a5)]()+0x1)[_0x4ea082(0x2c4)]()['padStart'](0x2,'0')+'/'+_0x2d9957[_0x4ea082(0x2d7)]()[_0x4ea082(0x2c4)]()[_0x4ea082(0x1fe)](0x2,'0')+'\x20'+_0x2d9957[_0x4ea082(0x2a9)]()[_0x4ea082(0x2c4)]()['padStart'](0x2,'0')+':'+_0x2d9957[_0x4ea082(0x279)]()[_0x4ea082(0x2c4)]()['padStart'](0x2,'0')+':'+_0x2d9957[_0x4ea082(0x305)]()[_0x4ea082(0x2c4)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x147bfd=_0x503401,_0x4738ee=shiftedTime();return _0x4738ee[_0x147bfd(0x2bc)]()+'/'+(_0x4738ee['getMonth']()+0x1)[_0x147bfd(0x2c4)]()[_0x147bfd(0x1fe)](0x2,'0')+'/'+_0x4738ee[_0x147bfd(0x2d7)]()[_0x147bfd(0x2c4)]()[_0x147bfd(0x1fe)](0x2,'0')+'\x20'+_0x4738ee[_0x147bfd(0x2a9)]()[_0x147bfd(0x2c4)]()[_0x147bfd(0x1fe)](0x2,'0')+':'+_0x4738ee[_0x147bfd(0x279)]()[_0x147bfd(0x2c4)]()['padStart'](0x2,'0')+':'+_0x4738ee['getSeconds']()['toString']()['padStart'](0x2,'0');}function _0x47dd(_0x1e929e,_0x418f03){const _0x38f1c5=_0x462b();return _0x47dd=function(_0xa36cbc,_0x3058c7){_0xa36cbc=_0xa36cbc-0x1c8;let _0x462bb9=_0x38f1c5[_0xa36cbc];return _0x462bb9;},_0x47dd(_0x1e929e,_0x418f03);}function shiftedTime(){const _0x1e8a7c=_0x503401,_0x4053e2=new Date();let _0x4a9292=_0x4053e2;if(settings['timeshift']&&settings[_0x1e8a7c(0x1e2)]!==0x0)_0x4a9292=fns[_0x1e8a7c(0x2aa)](_0x4053e2,{'hours':settings[_0x1e8a7c(0x1e2)]});return _0x4a9292;}function startScheduler(){const _0x3b7030=_0x503401;let _0x1f81b1=new Date()[_0x3b7030(0x1d5)]();_0x1f81b1==0x1&&backupConfigFiles();_0x1f81b1==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3db449=_0x503401;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3db449(0x2e0)](_0x3419ba=>{const _0x9244e2=_0x3db449;if(!_0x3419ba[_0x9244e2(0x23d)]())fs[_0x9244e2(0x28b)](configpath+_0x3419ba[_0x9244e2(0x223)],configbackuppath+_0x3419ba[_0x9244e2(0x223)]);});}function triggerAnalytics(){const _0x37b4eb=_0x503401;analytics['page']({'title':_0x37b4eb(0x1db),'href':_0x37b4eb(0x2a7),'path':'/v'+serverversion});}function validateCredentials(_0x460312,_0x2d8cd3){const _0x190d47=_0x503401;if(_0x460312[_0x190d47(0x21e)]==settings[_0x190d47(0x2ee)]&&bcrypt['compareSync'](_0x460312[_0x190d47(0x236)],settings[_0x190d47(0x2d6)])){if(settings[_0x190d47(0x20b)])return{'allow':![],'reason':_0x190d47(0x1d6),'token':null};else{const _0x27505a=generateLoginToken(_0x2d8cd3);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x27505a};}}else return{'allow':![],'reason':_0x190d47(0x220),'token':null};}function refreshToken(_0x2d032c){const _0x41aa14=_0x503401,_0x273ced=generateLoginToken(_0x2d032c);return{'allow':!![],'reason':_0x41aa14(0x306),'token':_0x273ced};}function validateAccess(_0x8256c2,_0x25c8f1){const _0x1bf995=_0x503401;let _0xa84bbb=devices[_0x25c8f1]['ip'],_0x459b54;const _0x41fd1e=_0x7548bf=>{const _0x38cd99=_0x47dd;if(settings['loginRequired']){if(settings[_0x38cd99(0x20b)]){if(telegram2FaApproved(_0x25c8f1)){const _0x8fa076=generateLoginToken(_0x25c8f1);return{'allow':!![],'reason':_0x38cd99(0x28d),'token':_0x8fa076};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x459b54=validToken(_0x7548bf,_0x25c8f1),_0x459b54['hasOwnProperty'](_0x38cd99(0x2b4))?{'allow':!![],'reason':_0x38cd99(0x212),'token':_0x7548bf}:{'allow':![],'reason':_0x38cd99(0x2e3),'token':null};}else return{'allow':!![],'reason':_0x38cd99(0x292),'token':null};};if(settings['whitelistEnabled']){let _0x3d66bf=[...settings[_0x1bf995(0x2f0)],_0x1bf995(0x2e7),_0x1bf995(0x1f5),_0x1bf995(0x22b)];if(_0x3d66bf['includes'](_0xa84bbb))return _0x41fd1e(_0x8256c2);else{_0x459b54=validToken(_0x8256c2,_0x25c8f1);if(_0x459b54[_0x1bf995(0x2b3)](_0x1bf995(0x2b4)))return _0x41fd1e(_0x8256c2);else{if(telegramIpApproved(_0x25c8f1)){const _0x104f3f=generateToken(_0x25c8f1);return _0x459b54=_0x41fd1e(_0x8256c2),_0x459b54[_0x1bf995(0x241)]?{'allow':!![],'reason':_0x1bf995(0x2cc),'token':_0x104f3f}:_0x459b54;}else return settings[_0x1bf995(0x1c8)]?{'allow':![],'reason':_0x1bf995(0x1f7),'token':null}:{'allow':![],'reason':_0x1bf995(0x27c),'token':null};}}}else return _0x41fd1e(_0x8256c2);}function timelyDecrypt(_0x39620e,_0x25679b=!![]){const _0x2e10bb=_0x503401;if(_0x39620e)try{const _0x14c9ad=crypt['decrypt'](secure['privateKey'],_0x39620e)['message'],_0x5e82bb=_0x14c9ad[_0x2e10bb(0x23b)]('@')[0x0],_0x29c4d8=_0x14c9ad['split']('@')[0x1],_0x594075=new Date()[_0x2e10bb(0x219)]();if(_0x25679b){if(_0x594075-_0x29c4d8<maxSecretAge*0x3e8)return _0x5e82bb;else return![];}else return _0x5e82bb;}catch(_0x5d9c21){return![];}else return![];}const validToken=(_0x3f318f,_0x3d14a8)=>{const _0x67afa8=_0x503401,_0x32eae8=devices[_0x3d14a8]['ip'];if(!_0x3f318f)return{'error':'No\x20authentication\x20token'};for(let _0x43c68c of blacklist){if(_0x43c68c[_0x67afa8(0x25a)]==_0x3f318f)return{'error':_0x67afa8(0x290)};}let _0x5e53ad;try{_0x5e53ad=jwt['verify'](_0x3f318f,secure[_0x67afa8(0x2d0)]+_0x3d14a8);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x2ea))&&!_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x21e))||!_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x1cd)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x21e))&&_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x2ea))){const {clientip:_0x4c6ff2}=_0x5e53ad;return _0x32eae8==_0x4c6ff2?{'success':_0x67afa8(0x1ec)}:{'error':_0x67afa8(0x30a)};}else{if(_0x5e53ad['hasOwnProperty'](_0x67afa8(0x21e))&&_0x5e53ad[_0x67afa8(0x2b3)](_0x67afa8(0x2ea))){const {username:_0x2d56dd,clientip:_0x44ef7d}=_0x5e53ad;return settings[_0x67afa8(0x2ee)]==_0x2d56dd&&_0x32eae8==_0x44ef7d?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x67afa8(0x29e)};}}},generateLoginToken=_0x406cc8=>{const _0x3363e9=_0x503401;if(_0x406cc8){const _0x10c778=devices[_0x406cc8]['ip'];return jwt[_0x3363e9(0x278)]({'username':settings['bbUsername'],'clientip':_0x10c778},secure['secret']+_0x406cc8,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3413a8=>{const _0x579eb3=_0x503401;if(_0x3413a8){const _0x1550a4=devices[_0x3413a8]['ip'];return jwt[_0x579eb3(0x278)]({'clientip':_0x1550a4},secure[_0x579eb3(0x2d0)]+_0x3413a8,{'expiresIn':devices[_0x3413a8]['telegramIpApproval'][_0x579eb3(0x215)]*0x3c});}else return![];},telegramIpApproved=_0x261809=>{const _0x1c624d=_0x503401;let _0x4fc3d3=![];return devices[_0x261809]['telegramIpApproval']&&devices[_0x261809][_0x1c624d(0x304)][_0x1c624d(0x215)]!=_0x1c624d(0x288)&&(_0x4fc3d3=devices[_0x261809][_0x1c624d(0x304)][_0x1c624d(0x2ea)]==devices[_0x261809]['ip']&&new Date()[_0x1c624d(0x219)]()-devices[_0x261809][_0x1c624d(0x304)][_0x1c624d(0x2c0)]<devices[_0x261809][_0x1c624d(0x304)][_0x1c624d(0x215)]*0x3c*0x3e8),_0x4fc3d3;},telegram2FaApproved=_0x3ec8a4=>{const _0x2055b9=_0x503401;let _0x519bad=![];return devices[_0x3ec8a4][_0x2055b9(0x272)]&&devices[_0x3ec8a4][_0x2055b9(0x272)]['expiry']!=_0x2055b9(0x288)&&(_0x519bad=devices[_0x3ec8a4][_0x2055b9(0x272)][_0x2055b9(0x2ea)]==devices[_0x3ec8a4]['ip']&&new Date()[_0x2055b9(0x219)]()-devices[_0x3ec8a4][_0x2055b9(0x272)]['timestamp']<devices[_0x3ec8a4][_0x2055b9(0x272)][_0x2055b9(0x215)]*0x3c*0x3e8),_0x519bad;},normalizeIP=_0x24fdba=>{const _0x57b5c1=_0x503401;let _0x200316=null,_0x5346da=null;if(ipaddr['isValid'](_0x24fdba)){const _0x19a7e6=ipaddr[_0x57b5c1(0x2f3)](_0x24fdba);_0x19a7e6[_0x57b5c1(0x1f9)]()===_0x57b5c1(0x1de)?(_0x19a7e6[_0x57b5c1(0x26f)]()&&(_0x200316=_0x19a7e6[_0x57b5c1(0x303)]()[_0x57b5c1(0x2c4)]()),_0x5346da=_0x19a7e6[_0x57b5c1(0x2c4)]()):(_0x200316=_0x19a7e6[_0x57b5c1(0x2c4)](),_0x5346da=_0x19a7e6[_0x57b5c1(0x30f)]()[_0x57b5c1(0x2c4)]());}return{'show':_0x200316?_0x200316:_0x5346da,'store':_0x5346da};};