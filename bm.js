const _0x172695=_0x1b5a;(function(_0x3af55b,_0x585f96){const _0x5d2582=_0x1b5a,_0x2a6689=_0x3af55b();while(!![]){try{const _0x101006=-parseInt(_0x5d2582(0x168))/0x1*(parseInt(_0x5d2582(0x272))/0x2)+-parseInt(_0x5d2582(0x16c))/0x3+-parseInt(_0x5d2582(0x1cb))/0x4+-parseInt(_0x5d2582(0x24b))/0x5*(-parseInt(_0x5d2582(0x20e))/0x6)+parseInt(_0x5d2582(0x1b8))/0x7+-parseInt(_0x5d2582(0x26c))/0x8*(parseInt(_0x5d2582(0x1ca))/0x9)+parseInt(_0x5d2582(0x1cc))/0xa;if(_0x101006===_0x585f96)break;else _0x2a6689['push'](_0x2a6689['shift']());}catch(_0x2dc6ed){_0x2a6689['push'](_0x2a6689['shift']());}}}(_0x586b,0x1ba4a));const _0x48bf9d=function(){let _0x5e679c=!![];return function(_0x5929de,_0x394af2){const _0x24d10f=_0x5e679c?function(){if(_0x394af2){const _0x4e724d=_0x394af2['apply'](_0x5929de,arguments);return _0x394af2=null,_0x4e724d;}}:function(){};return _0x5e679c=![],_0x24d10f;};}(),_0x1e073f=_0x48bf9d(this,function(){const _0x4d4b79=_0x1b5a;return _0x1e073f[_0x4d4b79(0x204)]()['search'](_0x4d4b79(0x1af))[_0x4d4b79(0x204)]()['constructor'](_0x1e073f)[_0x4d4b79(0x1cd)]('(((.+)+)+)+$');});_0x1e073f();'use strict';process[_0x172695(0x1b5)][_0x172695(0x21a)]=0x1;const childProcess=require(_0x172695(0x1fc)),FileSync=require(_0x172695(0x1fb)),fs=require('fs'),fns=require(_0x172695(0x1f0)),low=require('lowdb'),path=require(_0x172695(0x252)),crypto=require(_0x172695(0x13b)),Crypt=require('hybrid-crypto-js')[_0x172695(0x1c9)],RSA=require(_0x172695(0x1bf))['RSA'],bcrypt=require(_0x172695(0x1b1)),jwt=require(_0x172695(0x132)),analyticsLib=require(_0x172695(0x1a9))['default'],googleAnalytics=require(_0x172695(0x1ef))[_0x172695(0x16b)],ipaddr=require(_0x172695(0x24c)),argv=require(_0x172695(0x156))(process[_0x172695(0x270)]['slice'](0x2))[_0x172695(0x270)],PORT=argv[_0x172695(0x20c)]||_0x172695(0x247),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x172695(0x15f)](PORT))return console['log'](_0x172695(0x1e4)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1);const HOST=argv[_0x172695(0x1d9)]||null,userID=argv[_0x172695(0x131)]||'';let bbpath=_0x172695(0x1c1),bbpath2='';const botfile=_0x172695(0x1a1),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x172695(0x145);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x172695(0x1a6)+userID+'/':bbpath+_0x172695(0x1a6),configbackuppath=configpath+'backup/';function _0x586b(){const _0x52b652=['mkdirSync','-----------------------------------------------------------------------------------','Error:\x20Invalid\x20argument\x20','logout','onText','toIPv4MappedAddress','new-disabled','Unauthorized\x20attempt\x20to\x20update\x20bot','hex','Temporary\x20access\x20rejected','UA-192771731-1','get','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','@analytics/google-analytics','date-fns','telegramChatId','exit','</b>\x20?','node-telegram-bot-api','add','get-starting-balances','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','build2','enabled','once','lowdb/adapters/FileSync','child_process','SIGINT','expiry','secret','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','decrypt','invalid\x20credentials','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','toString','Token\x20blacklisted','access\x20timeout','::1','/:bot/portfolio','removeAllListeners','No\x20bots\x20running\x20right\x20now','bot-','port','login\x20required','578178EtTRRi','Alerts','send','RSA-OAEP','use','connected','conn','getTime','fork','orders','toIPv4Address','match','NTBA_FIX_319','Bot\x20Mgr\x20>\x20','notification','pidRefreshToken','pidExpireLogin','HTML','message','error','botmanager','cloneDeep','Ok,\x20will\x20send\x20alert\x20notifications\x20only','telegramIpApproval','initclient','then','starting\x20new\x20bot\x20|\x20Bot\x20','parse','Unauthorized\x20attempt\x20to\x20add\x20bot','login\x20token\x20generated','show','split','Login\x20accepted','whitelistEnabled','page','sendMessage','headers','telegram2FaApproval','Orders','Unauthorized\x20attempt\x20to\x20get\x20portfolio','settings','value','blacklist','from','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20log\x20out','log','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','publicKey','live','order','5\x20min','copyFileSync','/off\x20-\x20stop\x20bot(s)\x0a','loginRequired','referer','getMinutes','3000','auth','store-settings','Balance\x20Bot\x20Server','10oRrmIn','ipaddr.js','stopPolling','timeshift','args','entries','running','path','2FA\x20required','f2aRequired','listen','SIGTERM','Password\x20reset\x20rejected','<b>Telegram\x20bot\x20status:</b>\x0a','-config.json','callback_query','sha256','/disable\x20-\x20disable\x20notifications\x0a','kill','keys','clientip','storeConfiguration','password','error\x20while\x20deleting\x20config\x20files:\x20','polling_error','max','find','uuid','telegramToken','defaults','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','restarting\x20Bot\x20','inherit','56ztOPsl','login','readdirSync','stop','argv','logged\x20out','26914NyTglH','new','user','jsonwebtoken','Invalid\x20authentication\x20token\x20(1)','bot','storeHeadless','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','\x20>\x20','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','secure','answerCallbackQuery','crypto','/help\x20-\x20show\x20available\x20commands\x0a','disabled','2FA\x20login\x20token\x20generated','timestamp','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','************','Ok,\x20will\x20send\x20order\x20notifications\x20only','join','sockets','bb-secure.json','\x20|\x20','assign','/restart\x20-\x20restart\x20bot(s)\x0a','reload','data','sendFile','/:bot/performance','temporary\x20token\x20generated','started','handshake','\x20/\x20','-results.json','access','telegramUsername','Invalid\x20IP\x20address','temporary\x20access\x20not\x20allowed','yargs/yargs','-performance.json','allow','Unauthorized\x20attempt\x20to\x20delete\x20bot','write','stopped','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','length','getPortfolio','test','type','Unauthorized\x20attempt\x20to\x20update\x20settings','hashSync','removeListener','isIPv4MappedAddress','token','yes','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','1qtvcdH','sortBy','404\x20Not\x20Found','default','419055ilklCn','Access\x20enabled\x20for\x20','bots','/:bot/history','getDate','login\x20not\x20required','reject','bbUsername','randomFillSync','accept','all','remoteAddress','Invalid\x20authentication\x20token\x20(2)','set','Allow\x20login\x20from\x20IP\x20address\x20<b>','express','map','add-bot','build','kind','status','\x20only\x0a','telegramEvents','telegramEnabled','existsSync','hasOwnProperty','static','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','getHours','function','2FA','/on\x20-\x20start\x20bot(s)\x0a','No\x20authentication\x20token','get-portfolio','User\x20has\x20been\x20validated','update-bb','alerts','idling\x20bot\x20\x20\x20|\x20Bot\x20','randomBytes','isDirectory','telegram','event','whitelist','ipc','You\x20can\x20use\x20the\x20following\x20commands:\x0a','showname','createServer','placeOrder','All\x20bots','cancel-loading','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','version.json','sign','bot.js','disconnect','chat','Login\x20rejected','getSeconds','config/','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','success','analytics','store','Notifications\x20enabled\x0a','padStart','reason','Bot\x20','(((.+)+)+)+$','index.html','bcryptjs','includes','emit','reset-password','env','privateKey','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','841834QxhlEt','temporaryAccessAllowed','Password\x20has\x20been\x20reset\x20to:\x20','verify','deleted\x20Bot\x20','exp','settings.','hybrid-crypto-js','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','bb/','1000','getMonth','disabled\x20Bot\x20','forEach','/:bot/configuration','login\x20token\x20valid','filter','Crypt','103239XuzXsm','401316UMGKCu','1340060ouypWm','search','catch','username','store-headless','name','bbPassword','botname','place-order','get-logs','getFullYear','Balance\x20Bot','remove','host','push','<b>Balance\x20Bot\x20status:</b>\x0a','botID','unlinkSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','2FA\x20login\x20required','All','Notifications\x20disabled\x0a'];_0x586b=function(){return _0x52b652;};return _0x586b();}!fs[_0x172695(0x184)](configpath)&&fs[_0x172695(0x1e2)](configpath);!fs[_0x172695(0x184)](configbackuppath)&&fs[_0x172695(0x1e2)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x172695(0x268)]({'bots':[]})[_0x172695(0x15a)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x172695(0x268)]({'settings':{'timeshift':0x0}})[_0x172695(0x15a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x172695(0x268)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x172695(0x25b),'rsaStandard':_0x172695(0x211)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x172695(0x19f))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x172695(0x17b)),app=express(),http=require('http')[_0x172695(0x19a)](app);app[_0x172695(0x212)](express[_0x172695(0x186)](path[_0x172695(0x143)](__dirname,bbpath2,_0x172695(0x1f8)))),app['use'](express[_0x172695(0x186)](path[_0x172695(0x143)](__dirname,bbpath2,_0x172695(0x17e)))),app[_0x172695(0x1ed)]('/',function(_0x1241d2,_0x27f5e3){const _0x1b22b7=_0x172695;_0x27f5e3['sendFile'](path[_0x1b22b7(0x143)](__dirname,bbpath2,_0x1b22b7(0x1f8),_0x1b22b7(0x1b0)));}),app[_0x172695(0x1ed)]('/:bot',function(_0x2de250,_0x30ce0f){const _0x1374a5=_0x172695;_0x30ce0f[_0x1374a5(0x14b)](path['join'](__dirname,bbpath2,'build',_0x1374a5(0x1b0)));}),app[_0x172695(0x1ed)](_0x172695(0x208),(_0x16004a,_0x2eca30)=>{const _0xc4e8ec=_0x172695;_0x2eca30[_0xc4e8ec(0x14b)](path[_0xc4e8ec(0x143)](__dirname,bbpath2,_0xc4e8ec(0x17e),'index.html'));}),app[_0x172695(0x1ed)](_0x172695(0x14c),(_0x5baa4d,_0x1d63da)=>{const _0xc6b512=_0x172695;_0x1d63da[_0xc6b512(0x14b)](path['join'](__dirname,bbpath2,_0xc6b512(0x17e),_0xc6b512(0x1b0)));}),app[_0x172695(0x1ed)]('/:bot/coins',(_0x2a37af,_0x57617e)=>{const _0x17f1df=_0x172695;_0x57617e['sendFile'](path[_0x17f1df(0x143)](__dirname,bbpath2,_0x17f1df(0x17e),_0x17f1df(0x1b0)));}),app[_0x172695(0x1ed)](_0x172695(0x16f),(_0x98e961,_0x52c661)=>{const _0x2518ed=_0x172695;_0x52c661[_0x2518ed(0x14b)](path[_0x2518ed(0x143)](__dirname,bbpath2,_0x2518ed(0x17e),_0x2518ed(0x1b0)));}),app[_0x172695(0x1ed)](_0x172695(0x1c6),(_0x2f0adb,_0x38ba60)=>{const _0x16076b=_0x172695;_0x38ba60[_0x16076b(0x14b)](path[_0x16076b(0x143)](__dirname,bbpath2,_0x16076b(0x17e),_0x16076b(0x1b0)));}),app['get']('/:bot/support',(_0xc3c0ee,_0x1c8e6e)=>{const _0x48bc1d=_0x172695;_0x1c8e6e[_0x48bc1d(0x14b)](path['join'](__dirname,bbpath2,_0x48bc1d(0x17e),_0x48bc1d(0x1b0)));});if(HOST)http['listen'](PORT,HOST);else http[_0x172695(0x255)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x172695(0x1d7),'plugins':[googleAnalytics({'trackingId':_0x172695(0x1ec)})]}),TelegramBot=require(_0x172695(0x1f4));let tgBot;if(settings['telegramToken']&&settings[_0x172695(0x267)]!=''&&settings[_0x172695(0x153)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x278aec=_0x172695;console[_0x278aec(0x23c)](''),console[_0x278aec(0x23c)](_0x278aec(0x1e3)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x278aec(0x23c)]('-----------------------------------------------------------------------------------');if(config[_0x278aec(0x15d)]!=0x0)config['forEach'](_0x11f1eb=>{const _0x4f75b2=_0x278aec;if(_0x11f1eb['status']==_0x4f75b2(0x1f9)||_0x11f1eb[_0x4f75b2(0x180)]==_0x4f75b2(0x130))logging('starting\x20bot\x20|\x20Bot\x20'+_0x11f1eb[_0x4f75b2(0x1dc)]+_0x4f75b2(0x146)+_0x11f1eb['botname']),startBot([_0x11f1eb[_0x4f75b2(0x1dc)],userID],{'cwd':bbpath},function(_0xa2ab95){if(_0xa2ab95)logging(_0xa2ab95);});else(_0x11f1eb[_0x4f75b2(0x180)]==_0x4f75b2(0x13d)||_0x11f1eb[_0x4f75b2(0x180)]=='new-disabled')&&logging(_0x4f75b2(0x191)+_0x11f1eb[_0x4f75b2(0x1dc)]+_0x4f75b2(0x146)+_0x11f1eb[_0x4f75b2(0x1d3)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x278aec(0x23c)](_0x278aec(0x1e3)),console[_0x278aec(0x23c)]('');}function _0x1b5a(_0x1fec02,_0x370cf2){const _0x178841=_0x586b();return _0x1b5a=function(_0x1e073f,_0x48bf9d){_0x1e073f=_0x1e073f-0x130;let _0x586b72=_0x178841[_0x1e073f];return _0x586b72;},_0x1b5a(_0x1fec02,_0x370cf2);}function startSocket(){io['on']('connection',_0x55d696=>{const _0x3d0419=_0x1b5a;let _0x488eb1,_0x103925,_0x5b6f79,_0x1202e1,_0x47044c;const _0x573a09=_0x55d696['handshake'][_0x3d0419(0x232)][_0x3d0419(0x245)];_0x103925=_0x573a09[_0x3d0419(0x219)](/bot[0-9]{3}/);if(_0x103925)_0x5b6f79=_0x103925[0x0][_0x3d0419(0x219)](/[0-9]{3}/);if(_0x5b6f79)_0x488eb1=_0x5b6f79[0x0];else _0x488eb1=_0x3d0419(0x222);const _0x2d6a45=_0x55d696[_0x3d0419(0x14f)][_0x3d0419(0x248)]['encryptedUuid'];if(!_0x2d6a45)_0x55d696[_0x3d0419(0x1b3)](_0x3d0419(0x180),{'publicKey':secure[_0x3d0419(0x23e)]});else{_0x1202e1=timelyDecrypt(_0x2d6a45,![]);if(!_0x1202e1)_0x55d696['emit'](_0x3d0419(0x180),{'publicKey':secure['publicKey']});else{_0x47044c=normalizeIP(_0x55d696[_0x3d0419(0x214)][_0x3d0419(0x177)])[_0x3d0419(0x1aa)];if(!devices[_0x1202e1])devices[_0x1202e1]={'uuid':_0x1202e1,'access':{'token':null}};devices[_0x1202e1]['ip']=_0x47044c;const _0x1ed1bf=addClient(_0x55d696['id'],_0x1202e1,_0x488eb1);setAccess(_0x1ed1bf),_0x55d696['on'](_0x3d0419(0x26d),_0x54c49c=>{const _0x340d9c=_0x3d0419,_0x5d3da9=timelyDecrypt(_0x54c49c[_0x340d9c(0x261)]);if(_0x5d3da9){_0x54c49c={'username':_0x54c49c[_0x340d9c(0x1cf)],'password':_0x5d3da9},devices[_0x1202e1][_0x340d9c(0x152)]=validateCredentials(_0x54c49c,_0x1202e1);if(devices[_0x1202e1][_0x340d9c(0x152)][_0x340d9c(0x158)]==![]&&devices[_0x1202e1][_0x340d9c(0x152)]['reason']==_0x340d9c(0x1df))_0x55d696[_0x340d9c(0x1b3)](_0x340d9c(0x180),{'access':devices[_0x1202e1][_0x340d9c(0x152)]}),loginAccess2FA(_0x1202e1,_0x47044c);else{if(devices[_0x1202e1][_0x340d9c(0x152)][_0x340d9c(0x158)]==![]&&devices[_0x1202e1][_0x340d9c(0x152)][_0x340d9c(0x1ad)]=='invalid\x20credentials')_0x55d696[_0x340d9c(0x1b3)](_0x340d9c(0x180),{'access':devices[_0x1202e1][_0x340d9c(0x152)]});else devices[_0x1202e1][_0x340d9c(0x152)][_0x340d9c(0x158)]&&devices[_0x1202e1][_0x340d9c(0x152)][_0x340d9c(0x1ad)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1202e1)[_0x340d9c(0x1c5)](_0xf3be23=>{setAccess(_0xf3be23);}),setTokenRefresh(_0x1202e1),setSessionTimeout(_0x340d9c(0x26d),_0x1202e1));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x55d696['on'](_0x3d0419(0x1b4),()=>{resetPassword();}),_0x55d696['on'](_0x3d0419(0x1a2),_0x8aaf4d=>{removeClient(_0x55d696['id']);});}}});}function initClient(_0x58b8ca){const _0x3410ce=_0x172695;if(_0x58b8ca!=_0x3410ce(0x222)&&config['apiKey']!=''){if(pid[_0x58b8ca])pid[_0x58b8ca][_0x3410ce(0x210)]({'function':_0x3410ce(0x226),'args':null});}}function getSocket(_0x573275){const _0x1c8fd0=_0x172695;return io[_0x1c8fd0(0x144)][_0x1c8fd0(0x144)][_0x1c8fd0(0x1ed)](_0x573275);}function setAccess(_0x5c3bd9){const _0x4bd593=_0x172695,_0x589793=getSocket(_0x5c3bd9['id']),_0x1a8aa9=_0x5c3bd9[_0x4bd593(0x266)],_0xb31d59=_0x5c3bd9['bot'];devices[_0x1a8aa9]['access']=validateAccess(devices[_0x1a8aa9][_0x4bd593(0x152)]['token'],_0x1a8aa9),_0x589793[_0x4bd593(0x143)](_0x1a8aa9);if(devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x158)]){_0x589793[_0x4bd593(0x143)](_0xb31d59);if(_0xb31d59==_0x4bd593(0x222))initializeSocketBotManager(_0x589793);else initializeSocketBot(_0x589793);initClient(_0xb31d59);}devices[_0x1a8aa9][_0x4bd593(0x152)]['token']&&devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x1ad)]==_0x4bd593(0x14d)&&setSessionTimeout(_0x4bd593(0x18a),_0x1a8aa9),devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x165)]&&devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x1ad)]==_0x4bd593(0x13e)&&setSessionTimeout('login',_0x1a8aa9),_0x589793[_0x4bd593(0x1b3)]('status',{'status':_0x5c3bd9['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1a8aa9][_0x4bd593(0x152)],'externalip':devices[_0x1a8aa9]['ip'],'publicKey':secure[_0x4bd593(0x23e)]}),devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x158)]==![]&&devices[_0x1a8aa9][_0x4bd593(0x152)][_0x4bd593(0x1ad)]==_0x4bd593(0x253)&&temporaryAccess2FA(_0x1a8aa9,devices[_0x1a8aa9]['ip']);}function setSessionTimeout(_0x226077,_0x4418bf){const _0x3d309f=_0x172695;let _0x3141d0;if(_0x226077==_0x3d309f(0x26d))_0x3141d0=loginExpiry*0x3c*0x3e8;else _0x3141d0=devices[_0x4418bf][_0x3d309f(0x225)]['expiry']*0x3c*0x3e8-(new Date()[_0x3d309f(0x215)]()-devices[_0x4418bf]['telegramIpApproval'][_0x3d309f(0x13f)]);if(devices[_0x4418bf]['pidExpireLogin'])clearTimeout(devices[_0x4418bf][_0x3d309f(0x21e)]);devices[_0x4418bf][_0x3d309f(0x21e)]=setTimeout(()=>{const _0x5457db=_0x3d309f;if(devices[_0x4418bf][_0x5457db(0x21d)])clearTimeout(devices[_0x4418bf][_0x5457db(0x21d)]);removeSocketListeners(_0x4418bf),addBlacklist(_0x4418bf),devices[_0x4418bf][_0x5457db(0x225)]=null,devices[_0x4418bf][_0x5457db(0x233)]=null,devices[_0x4418bf][_0x5457db(0x152)][_0x5457db(0x165)]=null,devices[_0x4418bf][_0x5457db(0x152)]=validateAccess(devices[_0x4418bf][_0x5457db(0x152)][_0x5457db(0x165)],_0x4418bf),!(devices[_0x4418bf][_0x5457db(0x152)][_0x5457db(0x158)]&&devices[_0x4418bf][_0x5457db(0x152)][_0x5457db(0x1ad)]==_0x5457db(0x171))&&(_0x226077==_0x5457db(0x26d)?io['to'](_0x4418bf)[_0x5457db(0x1b3)](_0x5457db(0x180),{'access':{'allow':![],'reason':_0x5457db(0x206),'token':null}}):io['to'](_0x4418bf)[_0x5457db(0x1b3)](_0x5457db(0x180),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x4418bf]['access'][_0x5457db(0x165)]=null;},_0x3141d0);}function setTokenRefresh(_0x4e3395){const _0x249a92=_0x172695;if(devices[_0x4e3395][_0x249a92(0x21d)])clearTimeout(devices[_0x4e3395]['pidRefreshToken']);devices[_0x4e3395][_0x249a92(0x21d)]=setTimeout(()=>{const _0x5ba209=_0x249a92;getClientsWithUuid(_0x4e3395)['length']!=0x0?(devices[_0x4e3395][_0x5ba209(0x152)]=refreshToken(_0x4e3395),io['to'](_0x4e3395)[_0x5ba209(0x1b3)](_0x5ba209(0x180),{'status':_0x5ba209(0x213),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4e3395][_0x5ba209(0x152)],'externalip':devices[_0x4e3395]['ip'],'publicKey':secure[_0x5ba209(0x23e)]}),setTokenRefresh(_0x4e3395)):clearTimeout(devices[_0x4e3395]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x10b1e7){const _0x2572b3=_0x172695,_0x59b1da=getClient(_0x10b1e7['id'])[_0x2572b3(0x266)];_0x10b1e7[_0x2572b3(0x1b3)](_0x2572b3(0x16e),config),_0x10b1e7[_0x2572b3(0x1b3)](_0x2572b3(0x236),cleanSettings()),_0x10b1e7['on'](_0x2572b3(0x17d),_0x3f858b=>{const _0x37dd64=_0x2572b3;if(validateAccess(_0x3f858b,_0x59b1da)['allow'])addBot();else logging(_0x37dd64(0x22a));}),_0x10b1e7['on']('update-bot',(_0x36d137,_0x241653)=>{const _0x310f4d=_0x2572b3;if(validateAccess(_0x241653,_0x59b1da)[_0x310f4d(0x158)])toggleBot(_0x36d137[_0x310f4d(0x1dc)],_0x36d137[_0x310f4d(0x180)],_0x36d137['live']);else logging(_0x310f4d(0x1e9));}),_0x10b1e7['on']('delete-bot',(_0x4ead00,_0x597244)=>{const _0x3305d9=_0x2572b3;if(validateAccess(_0x597244,_0x59b1da)['allow'])deleteBot(_0x4ead00);else logging(_0x3305d9(0x159));}),_0x10b1e7['on'](_0x2572b3(0x249),(_0x2074a5,_0x5b4c82)=>{const _0x2d6794=_0x2572b3;if(validateAccess(_0x5b4c82,_0x59b1da)[_0x2d6794(0x158)])storeSettings(_0x2074a5,!![]);else logging(_0x2d6794(0x161));}),_0x10b1e7['on'](_0x2572b3(0x18f),(_0x2595a5,_0x4ed58a)=>{const _0x3c4050=_0x2572b3;if(validateAccess(_0x4ed58a,_0x59b1da)[_0x3c4050(0x158)])updateBB();else logging(_0x3c4050(0x161));}),_0x10b1e7['on'](_0x2572b3(0x1e5),_0xf01b8e=>{const _0x7f9275=_0x2572b3;if(validateAccess(_0xf01b8e,_0x59b1da)[_0x7f9275(0x158)]){if(devices[_0x59b1da][_0x7f9275(0x21d)])clearTimeout(devices[_0x59b1da][_0x7f9275(0x21d)]);if(devices[_0x59b1da][_0x7f9275(0x21e)])clearTimeout(devices[_0x59b1da][_0x7f9275(0x21e)]);removeSocketListeners(getClient(_0x10b1e7['id'])[_0x7f9275(0x266)]),addBlacklist(_0x59b1da),devices[_0x59b1da][_0x7f9275(0x225)]=null,devices[_0x59b1da][_0x7f9275(0x233)]=null,devices[_0x59b1da][_0x7f9275(0x152)][_0x7f9275(0x165)]=null,io['to'](getClient(_0x10b1e7['id'])[_0x7f9275(0x266)])[_0x7f9275(0x1b3)]('status',{'access':{'allow':![],'reason':_0x7f9275(0x271),'token':null}});}else logging(_0x7f9275(0x23b));});}function initializeSocketBot(_0x9ba65d){const _0x229e17=_0x172695,_0x1747cd=getClient(_0x9ba65d['id'])[_0x229e17(0x134)],_0x204884=getClient(_0x9ba65d['id'])[_0x229e17(0x266)];_0x9ba65d['on'](_0x229e17(0x1d5),(_0x35928b,_0x51fec6)=>{const _0xbec4d7=_0x229e17;if(validateAccess(_0x51fec6,_0x204884)[_0xbec4d7(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0xbec4d7(0x210)]({'function':'emitHistory','args':_0x35928b});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x9ba65d['on'](_0x229e17(0x18d),(_0xf92c94,_0x14a417)=>{const _0x14e858=_0x229e17;if(validateAccess(_0x14a417,_0x204884)['allow']){if(pid[_0x1747cd])pid[_0x1747cd]['send']({'function':_0x14e858(0x15e),'args':_0xf92c94});}else logging(_0x14e858(0x235));}),_0x9ba65d['on']('store-configuration',(_0x5ac093,_0xe08e56)=>{const _0x4f55bc=_0x229e17;if(validateAccess(_0xe08e56,_0x204884)[_0x4f55bc(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0x4f55bc(0x210)]({'function':_0x4f55bc(0x260),'args':_0x5ac093});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x9ba65d['on'](_0x229e17(0x1d0),(_0x20d307,_0x392dbb)=>{const _0x1fac16=_0x229e17;if(validateAccess(_0x392dbb,_0x204884)[_0x1fac16(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0x1fac16(0x210)]({'function':_0x1fac16(0x135),'args':_0x20d307});}else logging(_0x1fac16(0x19e));}),_0x9ba65d['on'](_0x229e17(0x1f6),_0x1f1463=>{const _0x48ea9e=_0x229e17;if(validateAccess(_0x1f1463,_0x204884)[_0x48ea9e(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0x48ea9e(0x210)]({'function':'getStartingBalances','args':null});}else logging(_0x48ea9e(0x269));}),_0x9ba65d['on'](_0x229e17(0x1d4),(_0x4d13fa,_0x265028)=>{const _0x47aa27=_0x229e17;if(validateAccess(_0x265028,_0x204884)[_0x47aa27(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0x47aa27(0x210)]({'function':_0x47aa27(0x19b),'args':_0x4d13fa});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x9ba65d['on'](_0x229e17(0x19d),_0x58f84b=>{const _0x823807=_0x229e17;if(validateAccess(_0x58f84b,_0x204884)[_0x823807(0x158)]){if(pid[_0x1747cd])pid[_0x1747cd][_0x823807(0x210)]({'function':'cancelLoading','args':null});}else logging(_0x823807(0x15c));}),_0x9ba65d['on'](_0x229e17(0x1e5),_0x2bfe83=>{const _0x1897d3=_0x229e17;if(validateAccess(_0x2bfe83,_0x204884)['allow']){if(devices[_0x204884][_0x1897d3(0x21d)])clearTimeout(devices[_0x204884][_0x1897d3(0x21d)]);if(devices[_0x204884]['pidExpireLogin'])clearTimeout(devices[_0x204884]['pidExpireLogin']);removeSocketListeners(getClient(_0x9ba65d['id'])['uuid']),addBlacklist(_0x204884),devices[_0x204884][_0x1897d3(0x225)]=null,devices[_0x204884]['telegram2FaApproval']=null,devices[_0x204884]['access']['token']=null,io['to'](getClient(_0x9ba65d['id'])[_0x1897d3(0x266)])[_0x1897d3(0x1b3)](_0x1897d3(0x180),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x1897d3(0x23b));});}function removeSocketListeners(_0x45f7a7){getClientsWithUuid(_0x45f7a7)['forEach'](_0x227b8f=>{const _0x449987=_0x1b5a;getSocket(_0x227b8f['id'])[_0x449987(0x209)]();});}function cleanSettings(){const _0x22c9ed=_0x172695;let _0x1cae09=settings;return settings['telegramToken']&&settings[_0x22c9ed(0x267)]!=''&&(_0x1cae09={..._0x1cae09,'telegramToken':'************'}),settings[_0x22c9ed(0x1d2)]&&settings[_0x22c9ed(0x1d2)]!=''&&(_0x1cae09={..._0x1cae09,'bbPassword':'************'}),_0x1cae09;}function updateBB(){installingUpdate=!![],config['forEach'](_0x4cbfec=>{const _0x38e7e4=_0x1b5a;restartBot(_0x4cbfec[_0x38e7e4(0x1dc)]);}),process['send']({'update':!![]},_0x2fe2c5=>{});}function startBot(_0x1343a1,_0x206882,_0x1722ed){const _0xc10c59=_0x172695;let _0x29daf0=![];const _0x26aadf=_0x1343a1[0x0];_0x206882={..._0x206882,'stdio':[_0xc10c59(0x26b),_0xc10c59(0x26b),'inherit',_0xc10c59(0x197)]},pid[_0x26aadf]=childProcess[_0xc10c59(0x216)](botfile,_0x1343a1,_0x206882),pid[_0x26aadf]['on'](_0xc10c59(0x220),_0x4bbc88=>{const _0x4e4d46=_0xc10c59;switch(Object[_0x4e4d46(0x25e)](_0x4bbc88)[0x0]){case _0x4e4d46(0x1d3):updateBotName(_0x26aadf,_0x4bbc88['botname']);break;case _0x4e4d46(0x180):updateStatus(_0x26aadf,_0x4bbc88[_0x4e4d46(0x180)]);break;case'live':updateLive(_0x26aadf,_0x4bbc88['live']);break;case _0x4e4d46(0x14e):updateLive(_0x26aadf,_0x4bbc88[_0x4e4d46(0x14e)]),io['to'](_0x26aadf)['emit'](_0x4e4d46(0x180),{'access':{'allow':![],'reason':_0x4e4d46(0x149),'token':null}});break;case _0x4e4d46(0x26f):_0x4bbc88[_0x4e4d46(0x26f)]=='restart'&&restartBot(_0x26aadf);_0x4bbc88[_0x4e4d46(0x26f)]=='kill'&&toggleBot(_0x26aadf,_0x4e4d46(0x13d),_0x4e4d46(0x15b));break;case _0x4e4d46(0x194):sendTelegram(_0x26aadf,_0x4bbc88[_0x4e4d46(0x194)]);break;case _0x4e4d46(0x189):io['to'](_0x26aadf)[_0x4e4d46(0x1b3)](_0x4bbc88[_0x4e4d46(0x189)],_0x4bbc88[_0x4e4d46(0x24f)]);break;}}),pid[_0x26aadf]['on'](_0xc10c59(0x221),function(_0x3500d3){if(_0x29daf0)return;_0x29daf0=!![],_0x1722ed(_0x3500d3);}),pid[_0x26aadf]['on'](_0xc10c59(0x1f2),function(_0x33eda1){const _0x36ae02=_0xc10c59;if(installingUpdate)return;if(_0x29daf0)return;_0x29daf0=!![],_0x1722ed(null);const _0x500bd4=dbConfig[_0x36ae02(0x1ed)]('bots')[_0x36ae02(0x265)]({'botID':_0x26aadf})[_0x36ae02(0x237)]();_0x500bd4&&(_0x500bd4[_0x36ae02(0x180)]==_0x36ae02(0x1f9)||_0x500bd4[_0x36ae02(0x180)]==_0x36ae02(0x130))&&(updateLive(_0x26aadf,_0x36ae02(0x15b)),logging(_0x36ae02(0x26a)+_0x26aadf),startBot([_0x26aadf,userID],{'cwd':bbpath},function(_0x3f4cc7){if(_0x3f4cc7)logging(_0x3f4cc7);}));});}function stopBot(_0x31c7e0){const _0xfe4af8=_0x172695;getClientsWithBotID(_0x31c7e0)[_0xfe4af8(0x1c5)](_0x58be22=>{const _0x5c5976=_0xfe4af8;getSocket(_0x58be22['id'])[_0x5c5976(0x1a2)](!![]),removeClient(_0x58be22['id']);});if(pid[_0x31c7e0])pid[_0x31c7e0][_0xfe4af8(0x25d)]();}function restartBot(_0x546543){if(pid[_0x546543])pid[_0x546543]['kill']();}function addBot(){const _0x592166=_0x172695;let _0x13db6a;for(let _0x39f89a=0x1;_0x39f89a<0x3e9;_0x39f89a++){_0x13db6a=_0x39f89a['toString']()[_0x592166(0x1ac)](0x3,'0');let _0x3e5802=config['find'](_0x2b12f4=>_0x2b12f4[_0x592166(0x1dc)]==_0x13db6a);if(!_0x3e5802)break;}if(_0x13db6a===_0x592166(0x1c2)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x592166(0x228)+_0x13db6a),dbConfig[_0x592166(0x1ed)]('bots')[_0x592166(0x1da)]({'botID':_0x13db6a,'botname':_0x592166(0x1ae)+_0x13db6a,'status':_0x592166(0x130),'live':''})[_0x592166(0x15a)](),startBot([_0x13db6a,userID],{'cwd':bbpath},function(_0x4a084d){if(_0x4a084d)logging(_0x4a084d);}),config=getConfiguration(),io['to']('botmanager')[_0x592166(0x1b3)]('bots',config);}function deleteBot(_0x486df1){const _0x1c1e0e=_0x172695;getClientsWithBotID(_0x486df1)[_0x1c1e0e(0x1c5)](_0xa6b606=>{const _0x1425a3=_0x1c1e0e;getSocket(_0xa6b606['id'])[_0x1425a3(0x1a2)](!![]),removeClient(_0xa6b606['id']);}),dbConfig['get'](_0x1c1e0e(0x16e))[_0x1c1e0e(0x1d8)]({'botID':_0x486df1})[_0x1c1e0e(0x15a)](),logging(_0x1c1e0e(0x1bc)+_0x486df1),stopBot(_0x486df1);try{fs['unlinkSync'](path[_0x1c1e0e(0x143)](configpath,_0x1c1e0e(0x20b)+_0x486df1+_0x1c1e0e(0x259))),fs[_0x1c1e0e(0x1dd)](path[_0x1c1e0e(0x143)](configpath,_0x1c1e0e(0x20b)+_0x486df1+'-events.json')),fs[_0x1c1e0e(0x1dd)](path[_0x1c1e0e(0x143)](configpath,_0x1c1e0e(0x20b)+_0x486df1+_0x1c1e0e(0x157))),fs[_0x1c1e0e(0x1dd)](path[_0x1c1e0e(0x143)](configpath,_0x1c1e0e(0x20b)+_0x486df1+_0x1c1e0e(0x151)));}catch(_0x3bfb40){if(_0x3bfb40)logging(_0x1c1e0e(0x262),_0x3bfb40);}config=getConfiguration(),io['to'](_0x1c1e0e(0x222))[_0x1c1e0e(0x1b3)]('bots',config);}function toggleBot(_0x39d634,_0x3539bc,_0x44e9e9){const _0x4d237=_0x172695;dbConfig[_0x4d237(0x1ed)](_0x4d237(0x16e))[_0x4d237(0x265)]({'botID':_0x39d634})['assign']({'status':_0x3539bc})[_0x4d237(0x147)]({'live':_0x44e9e9})[_0x4d237(0x15a)]();if(_0x3539bc=='enabled'||_0x3539bc==_0x4d237(0x130))logging('enabled\x20Bot\x20'+_0x39d634),startBot([_0x39d634,userID],{'cwd':bbpath},function(_0x54a3b8){if(_0x54a3b8)logging(_0x54a3b8);});else(_0x3539bc==_0x4d237(0x13d)||_0x3539bc=='new-disabled')&&(logging(_0x4d237(0x1c4)+_0x39d634),stopBot(_0x39d634));config=getConfiguration(),io['to'](_0x4d237(0x222))[_0x4d237(0x1b3)](_0x4d237(0x16e),config);}function toggleStatus(_0xe7cdf0){const _0x243cba=_0x172695;let _0x496f90=dbConfig[_0x243cba(0x1ed)](_0x243cba(0x16e))[_0x243cba(0x265)]({'botID':_0xe7cdf0})['value'](),_0x256e4d;if(_0x496f90['status']==='enabled')_0x256e4d=_0x243cba(0x13d);else{if(_0x496f90[_0x243cba(0x180)]===_0x243cba(0x130))_0x256e4d=_0x243cba(0x1e8);else{if(_0x496f90[_0x243cba(0x180)]===_0x243cba(0x1e8))_0x256e4d='new';else{if(_0x496f90[_0x243cba(0x180)]===_0x243cba(0x13d))_0x256e4d=_0x243cba(0x1f9);}}}return _0x256e4d;}function updateStatus(_0x1f9708,_0x4fc958){const _0x971232=_0x172695;dbConfig[_0x971232(0x1ed)](_0x971232(0x16e))[_0x971232(0x265)]({'botID':_0x1f9708})[_0x971232(0x147)]({'status':_0x4fc958})[_0x971232(0x15a)](),config=getConfiguration(),io['to']('botmanager')[_0x971232(0x1b3)](_0x971232(0x16e),config);}function updateLive(_0x223801,_0x43b705){const _0x5614cc=_0x172695;dbConfig[_0x5614cc(0x1ed)]('bots')[_0x5614cc(0x265)]({'botID':_0x223801})['assign']({'live':_0x43b705})['write'](),config=getConfiguration(),io['to'](_0x5614cc(0x222))[_0x5614cc(0x1b3)](_0x5614cc(0x16e),config);}function updateBotName(_0x1872d9,_0x4c93b1){const _0x597311=_0x172695;dbConfig['get']('bots')[_0x597311(0x265)]({'botID':_0x1872d9})['assign']({'botname':_0x4c93b1})['write'](),config=getConfiguration(),io['to'](_0x597311(0x222))[_0x597311(0x1b3)](_0x597311(0x16e),config);}function telegramError(_0x453f7e){const _0x5e57bd=_0x172695;console[_0x5e57bd(0x23c)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x12c2f0){const _0x1dfa4f=_0x172695;if(_0x12c2f0[_0x1dfa4f(0x239)][_0x1dfa4f(0x1cf)]!=settings[_0x1dfa4f(0x153)]&&'@'+_0x12c2f0[_0x1dfa4f(0x239)][_0x1dfa4f(0x1cf)]!=settings[_0x1dfa4f(0x153)])return tgBot[_0x1dfa4f(0x231)](_0x12c2f0[_0x1dfa4f(0x1a3)]['id'],_0x1dfa4f(0x167),{'parse_mode':_0x1dfa4f(0x21f)})[_0x1dfa4f(0x1ce)](_0x4bcaa1=>{telegramError(_0x4bcaa1);}),![];return!![];}async function initTelegram(){const _0x1b8d1d=_0x172695;if(tgBot)tgBot[_0x1b8d1d(0x24d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1b8d1d(0x267)],{'polling':!![]});let _0x43794c=_0x1b8d1d(0x198);_0x43794c+='\x0a',_0x43794c+='/enable\x20-\x20enable\x20notifications\x0a',_0x43794c+=_0x1b8d1d(0x25c),_0x43794c+=_0x1b8d1d(0x203),_0x43794c+=_0x1b8d1d(0x148),_0x43794c+=_0x1b8d1d(0x18b),_0x43794c+=_0x1b8d1d(0x243),_0x43794c+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x43794c+=_0x1b8d1d(0x13c);let _0x2f2973=_0x1b8d1d(0x1b7);_0x2f2973+='\x0a',_0x2f2973+=_0x43794c,tgBot[_0x1b8d1d(0x1e6)](/\/start/,_0x2dda04=>{const _0x23b4c7=_0x1b8d1d;if(!validateTelegram(_0x2dda04))return;if(settings[_0x23b4c7(0x1f1)]!=_0x2dda04['chat']['id'])updateSetting(_0x23b4c7(0x1f1),_0x2dda04['chat']['id']);updateSetting(_0x23b4c7(0x183),!![]),tgBot['sendMessage'](_0x2dda04[_0x23b4c7(0x1a3)]['id'],_0x2f2973)[_0x23b4c7(0x1ce)](_0x447b2c=>{telegramError(_0x447b2c);});}),tgBot[_0x1b8d1d(0x1e6)](/\/enable/,_0x297d0b=>{const _0x3b51af=_0x1b8d1d;if(!validateTelegram(_0x297d0b))return;if(settings[_0x3b51af(0x1f1)]!=_0x297d0b[_0x3b51af(0x1a3)]['id'])updateSetting(_0x3b51af(0x1f1),_0x297d0b[_0x3b51af(0x1a3)]['id']);updateSetting(_0x3b51af(0x183),!![]),tgBot[_0x3b51af(0x231)](_0x297d0b[_0x3b51af(0x1a3)]['id'],'Notifications\x20enabled')[_0x3b51af(0x1ce)](_0x59a4c3=>{telegramError(_0x59a4c3);});}),tgBot[_0x1b8d1d(0x1e6)](/\/config/,async _0x4ecde3=>{const _0x388175=_0x1b8d1d;if(!validateTelegram(_0x4ecde3))return;tgBot[_0x388175(0x163)](_0x388175(0x25a)),tgBot[_0x388175(0x231)](_0x4ecde3['chat']['id'],_0x388175(0x1ee),{'reply_markup':{'inline_keyboard':[[{'text':_0x388175(0x234),'callback_data':_0x388175(0x217)},{'text':_0x388175(0x20f),'callback_data':_0x388175(0x190)},{'text':_0x388175(0x1e0),'callback_data':'all'}]]}})[_0x388175(0x1ce)](_0x2f1aaf=>{telegramError(_0x2f1aaf);}),tgBot['on'](_0x388175(0x25a),async _0x15eff7=>{const _0x37f439=_0x388175,_0x178fad=_0x15eff7[_0x37f439(0x14a)],_0x3c2806=_0x15eff7['message'];tgBot[_0x37f439(0x13a)](_0x15eff7['id'])['then'](async()=>{const _0xaaf9e=_0x37f439;_0x178fad=='orders'&&(updateSetting(_0xaaf9e(0x182),_0xaaf9e(0x217)),updateSetting('telegramEnabled',!![]),await tgBot[_0xaaf9e(0x231)](_0x3c2806['chat']['id'],_0xaaf9e(0x142))[_0xaaf9e(0x1ce)](_0x55a1aa=>{telegramError(_0x55a1aa);}));_0x178fad==_0xaaf9e(0x190)&&(updateSetting('telegramEvents',_0xaaf9e(0x190)),updateSetting('telegramEnabled',!![]),await tgBot[_0xaaf9e(0x231)](_0x3c2806[_0xaaf9e(0x1a3)]['id'],_0xaaf9e(0x224))[_0xaaf9e(0x1ce)](_0x2bcb83=>{telegramError(_0x2bcb83);}));_0x178fad=='all'&&(updateSetting(_0xaaf9e(0x182),_0xaaf9e(0x176)),updateSetting(_0xaaf9e(0x183),!![]),await tgBot[_0xaaf9e(0x231)](_0x3c2806[_0xaaf9e(0x1a3)]['id'],_0xaaf9e(0x23a))[_0xaaf9e(0x1ce)](_0x4795c3=>{telegramError(_0x4795c3);}));if(!settings[_0xaaf9e(0x1f1)])tgBot[_0xaaf9e(0x231)](_0x3c2806[_0xaaf9e(0x1a3)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0xaaf9e(0x1ce)](_0xe980c7=>{telegramError(_0xe980c7);});}),tgBot['removeListener'](_0x37f439(0x25a));});}),tgBot[_0x1b8d1d(0x1e6)](/\/status/,_0x3acdc2=>{const _0x3c3c61=_0x1b8d1d;if(!validateTelegram(_0x3acdc2))return;let _0x5920d4=_0x3c3c61(0x1db);config['forEach'](_0x385c95=>{const _0x11148f=_0x3c3c61;_0x5920d4+=_0x11148f(0x1ae)+_0x385c95['botID']+_0x11148f(0x146)+_0x385c95[_0x11148f(0x1d3)]+':\x20'+_0x385c95[_0x11148f(0x180)]+_0x11148f(0x150)+_0x385c95[_0x11148f(0x23f)]+'\x0a';}),_0x5920d4+='\x0a',_0x5920d4+=_0x3c3c61(0x258),_0x5920d4+=!settings[_0x3c3c61(0x183)]?_0x3c3c61(0x1e1):_0x3c3c61(0x1ab),_0x5920d4+=settings[_0x3c3c61(0x183)]?settings[_0x3c3c61(0x182)]=='all'?_0x3c3c61(0x140):'Notifications\x20types:\x20'+settings[_0x3c3c61(0x182)]+_0x3c3c61(0x181):'',tgBot['sendMessage'](_0x3acdc2[_0x3c3c61(0x1a3)]['id'],_0x5920d4,{'parse_mode':_0x3c3c61(0x21f)})[_0x3c3c61(0x1ce)](_0x833fb0=>{telegramError(_0x833fb0);});}),tgBot[_0x1b8d1d(0x1e6)](/\/restart/,_0x1f5768=>{const _0x400a96=_0x1b8d1d;if(!validateTelegram(_0x1f5768))return;tgBot[_0x400a96(0x163)](_0x400a96(0x25a));const _0x5b5c0d=getEnabledBots();if(_0x5b5c0d[_0x400a96(0x15d)]==0x0)tgBot[_0x400a96(0x231)](_0x1f5768[_0x400a96(0x1a3)]['id'],_0x400a96(0x20a))['catch'](_0x5820d9=>{telegramError(_0x5820d9);});else{if(_0x5b5c0d[_0x400a96(0x15d)]>0x1)_0x5b5c0d[_0x400a96(0x1da)]({'botID':_0x400a96(0x176)});let _0x3c82d3=[],_0x34a43e=[];const _0x38986c=_0x5b5c0d[_0x400a96(0x15d)]%0x4==0x0||_0x5b5c0d[_0x400a96(0x15d)]%0x4==0x3||_0x5b5c0d[_0x400a96(0x15d)]%0x3==0x1?0x4:0x3;let _0x48a0be=0x0;_0x5b5c0d['forEach']((_0x507323,_0x8c3a31)=>{const _0x2dde13=_0x400a96;if(_0x8c3a31%_0x38986c==0x0)_0x34a43e=[];_0x34a43e[_0x2dde13(0x1da)]({'text':_0x507323[_0x2dde13(0x1dc)]==_0x2dde13(0x176)?'All\x20bots':_0x2dde13(0x1ae)+_0x507323[_0x2dde13(0x1dc)],'callback_data':_0x507323[_0x2dde13(0x1dc)]}),_0x8c3a31%_0x38986c==0x0&&(_0x3c82d3[_0x48a0be]=_0x34a43e,_0x48a0be++);}),tgBot[_0x400a96(0x231)](_0x1f5768[_0x400a96(0x1a3)]['id'],_0x400a96(0x136),{'reply_markup':{'inline_keyboard':_0x3c82d3}})['catch'](_0x1dd956=>{telegramError(_0x1dd956);}),tgBot['on'](_0x400a96(0x25a),async _0x49b1a9=>{const _0x4e8e74=_0x400a96,_0x337f2b=_0x49b1a9[_0x4e8e74(0x14a)],_0x1bad6b=_0x49b1a9['message'];tgBot[_0x4e8e74(0x13a)](_0x49b1a9['id'])[_0x4e8e74(0x227)](async()=>{const _0x4b94e0=_0x4e8e74;if(_0x337f2b==_0x4b94e0(0x176)){if(settings[_0x4b94e0(0x182)]=='orders')tgBot[_0x4b94e0(0x231)](_0x1bad6b[_0x4b94e0(0x1a3)]['id'],_0x4b94e0(0x23d))[_0x4b94e0(0x1ce)](_0x3fcda7=>{telegramError(_0x3fcda7);});config['forEach'](_0x3d127b=>{restartBot(_0x3d127b['botID']);});}else{if(settings[_0x4b94e0(0x182)]=='orders')tgBot['sendMessage'](_0x1bad6b[_0x4b94e0(0x1a3)]['id'],_0x4b94e0(0x1c0)+_0x337f2b)[_0x4b94e0(0x1ce)](_0x291b8e=>{telegramError(_0x291b8e);});restartBot(_0x337f2b);}}),tgBot[_0x4e8e74(0x163)]('callback_query');});}}),tgBot[_0x1b8d1d(0x1e6)](/\/on/,_0x5a2fa1=>{const _0x296bd0=_0x1b8d1d;if(!validateTelegram(_0x5a2fa1))return;tgBot['removeListener'](_0x296bd0(0x25a));const _0x5b6292=getDisabledBots();if(_0x5b6292[_0x296bd0(0x15d)]==0x0)tgBot['sendMessage'](_0x5a2fa1[_0x296bd0(0x1a3)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x296bd0(0x1ce)](_0xad25c2=>{telegramError(_0xad25c2);});else{if(_0x5b6292[_0x296bd0(0x15d)]>0x1)_0x5b6292[_0x296bd0(0x1da)]({'botID':'all'});let _0x4d351b=[],_0x45b96c=[];const _0x5177f7=_0x5b6292[_0x296bd0(0x15d)]%0x4==0x0||_0x5b6292['length']%0x4==0x3||_0x5b6292[_0x296bd0(0x15d)]%0x3==0x1?0x4:0x3;let _0x37f24e=0x0;_0x5b6292[_0x296bd0(0x1c5)]((_0xaa7947,_0x39bf71)=>{const _0x1b3d5e=_0x296bd0;if(_0x39bf71%_0x5177f7==0x0)_0x45b96c=[];_0x45b96c[_0x1b3d5e(0x1da)]({'text':_0xaa7947['botID']==_0x1b3d5e(0x176)?_0x1b3d5e(0x19c):_0x1b3d5e(0x1ae)+_0xaa7947[_0x1b3d5e(0x1dc)],'callback_data':_0xaa7947[_0x1b3d5e(0x1dc)]}),_0x39bf71%_0x5177f7==0x0&&(_0x4d351b[_0x37f24e]=_0x45b96c,_0x37f24e++);}),tgBot[_0x296bd0(0x231)](_0x5a2fa1[_0x296bd0(0x1a3)]['id'],_0x296bd0(0x187),{'reply_markup':{'inline_keyboard':_0x4d351b}})['catch'](_0x1ecbfe=>{telegramError(_0x1ecbfe);}),tgBot['on'](_0x296bd0(0x25a),async _0x214dc7=>{const _0x27347d=_0x296bd0,_0x422c52=_0x214dc7['data'],_0x5acd60=_0x214dc7[_0x27347d(0x220)];tgBot[_0x27347d(0x13a)](_0x214dc7['id'])[_0x27347d(0x227)](async()=>{const _0x1aa450=_0x27347d;if(_0x422c52==_0x1aa450(0x176)){if(settings[_0x1aa450(0x182)]==_0x1aa450(0x217))tgBot[_0x1aa450(0x231)](_0x5acd60[_0x1aa450(0x1a3)]['id'],_0x1aa450(0x1f7))[_0x1aa450(0x1ce)](_0x451ce8=>{telegramError(_0x451ce8);});_0x5b6292[_0x1aa450(0x1c5)](_0x561b15=>{const _0x292a35=_0x1aa450;if(_0x561b15[_0x292a35(0x1dc)]!=_0x292a35(0x176))toggleBot(_0x561b15[_0x292a35(0x1dc)],toggleStatus(_0x561b15[_0x292a35(0x1dc)]),_0x292a35(0x15b));});}else{if(settings['telegramEvents']=='orders')tgBot['sendMessage'](_0x5acd60[_0x1aa450(0x1a3)]['id'],_0x1aa450(0x138)+_0x422c52)[_0x1aa450(0x1ce)](_0xb04e2c=>{telegramError(_0xb04e2c);});toggleBot(_0x422c52,toggleStatus(_0x422c52),_0x1aa450(0x15b));}}),tgBot['removeListener'](_0x27347d(0x25a));});}}),tgBot['onText'](/\/off/,_0x334cf5=>{const _0x11c4ef=_0x1b8d1d;if(!validateTelegram(_0x334cf5))return;tgBot[_0x11c4ef(0x163)]('callback_query');const _0x26a79c=getEnabledBots();if(_0x26a79c['length']==0x0)tgBot[_0x11c4ef(0x231)](_0x334cf5[_0x11c4ef(0x1a3)]['id'],_0x11c4ef(0x20a))[_0x11c4ef(0x1ce)](_0x18e9da=>{telegramError(_0x18e9da);});else{if(_0x26a79c[_0x11c4ef(0x15d)]>0x1)_0x26a79c['push']({'botID':_0x11c4ef(0x176)});let _0x586157=[],_0x4ec6bc=[];const _0x5f0ee8=_0x26a79c[_0x11c4ef(0x15d)]%0x4==0x0||_0x26a79c[_0x11c4ef(0x15d)]%0x4==0x3||_0x26a79c[_0x11c4ef(0x15d)]%0x3==0x1?0x4:0x3;let _0x28d672=0x0;_0x26a79c[_0x11c4ef(0x1c5)]((_0x3c0348,_0x391ae0)=>{const _0x552156=_0x11c4ef;if(_0x391ae0%_0x5f0ee8==0x0)_0x4ec6bc=[];_0x4ec6bc['push']({'text':_0x3c0348[_0x552156(0x1dc)]==_0x552156(0x176)?_0x552156(0x19c):'Bot\x20'+_0x3c0348[_0x552156(0x1dc)],'callback_data':_0x3c0348[_0x552156(0x1dc)]}),_0x391ae0%_0x5f0ee8==0x0&&(_0x586157[_0x28d672]=_0x4ec6bc,_0x28d672++);}),tgBot[_0x11c4ef(0x231)](_0x334cf5['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x586157}})[_0x11c4ef(0x1ce)](_0x54957c=>{telegramError(_0x54957c);}),tgBot['on'](_0x11c4ef(0x25a),async _0x2f3479=>{const _0x3aba7d=_0x11c4ef,_0x134c64=_0x2f3479[_0x3aba7d(0x14a)],_0xff1177=_0x2f3479[_0x3aba7d(0x220)];tgBot[_0x3aba7d(0x13a)](_0x2f3479['id'])[_0x3aba7d(0x227)](async()=>{const _0x397771=_0x3aba7d;if(_0x134c64=='all'){if(settings['telegramEvents']==_0x397771(0x217))tgBot['sendMessage'](_0xff1177['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x397771(0x1ce)](_0x19cd66=>{telegramError(_0x19cd66);});_0x26a79c[_0x397771(0x1c5)](_0x56e2cb=>{const _0x4ad3b7=_0x397771;if(_0x56e2cb[_0x4ad3b7(0x1dc)]!=_0x4ad3b7(0x176))toggleBot(_0x56e2cb[_0x4ad3b7(0x1dc)],toggleStatus(_0x56e2cb['botID']),_0x4ad3b7(0x15b));});}else{if(settings['telegramEvents']==_0x397771(0x217))tgBot[_0x397771(0x231)](_0xff1177['chat']['id'],_0x397771(0x1de)+_0x134c64)['catch'](_0x14f7b3=>{telegramError(_0x14f7b3);});toggleBot(_0x134c64,toggleStatus(_0x134c64),_0x397771(0x15b));}}),tgBot[_0x3aba7d(0x163)](_0x3aba7d(0x25a));});}}),tgBot[_0x1b8d1d(0x1e6)](/\/disable/,_0x3fbbbf=>{const _0x5e4117=_0x1b8d1d;if(!validateTelegram(_0x3fbbbf))return;tgBot['sendMessage'](_0x3fbbbf['chat']['id'],'Notifications\x20disabled')[_0x5e4117(0x1ce)](_0x5a4a78=>{telegramError(_0x5a4a78);}),updateSetting(_0x5e4117(0x183),![]);}),tgBot[_0x1b8d1d(0x1e6)](/\/help/,_0x5820f7=>{const _0x109d07=_0x1b8d1d;if(!validateTelegram(_0x5820f7))return;tgBot['sendMessage'](_0x5820f7[_0x109d07(0x1a3)]['id'],_0x43794c)[_0x109d07(0x1ce)](_0x1e9b03=>{telegramError(_0x1e9b03);});}),tgBot['on'](_0x1b8d1d(0x263),_0x700caa=>{const _0x3f625b=_0x1b8d1d;_0x700caa['toString']()[_0x3f625b(0x1b2)](_0x3f625b(0x16a))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x3f625b(0x24d)](),tgBot=null,io['to'](_0x3f625b(0x222))[_0x3f625b(0x1b3)](_0x3f625b(0x21c),'Invalid\x20Telegram\x20token'));}),process[_0x1b8d1d(0x1fa)](_0x1b8d1d(0x1fd),()=>{const _0x4f3286=_0x1b8d1d;if(tgBot)tgBot[_0x4f3286(0x24d)]();process['exit'](0x1);}),process[_0x1b8d1d(0x1fa)](_0x1b8d1d(0x256),()=>{const _0x57ba78=_0x1b8d1d;if(tgBot)tgBot['stopPolling']();process[_0x57ba78(0x1f2)](0x1);});}}function disableTelegram(){const _0x5283fd=_0x172695;tgBot&&(tgBot[_0x5283fd(0x24d)](),tgBot=null);}function sendTelegram(_0x334b7b,_0x1ef34a){const _0x57f8ea=_0x172695;if(settings[_0x57f8ea(0x183)]){if(settings[_0x57f8ea(0x182)]=='all'||(_0x1ef34a[_0x57f8ea(0x160)]==_0x57f8ea(0x221)||_0x1ef34a['type']==_0x57f8ea(0x1a8))&&settings[_0x57f8ea(0x182)]=='alerts'||_0x1ef34a['type']==_0x57f8ea(0x240)&&settings[_0x57f8ea(0x182)]==_0x57f8ea(0x217)){if(tgBot&&settings[_0x57f8ea(0x1f1)]){if(_0x1ef34a[_0x57f8ea(0x199)])tgBot[_0x57f8ea(0x231)](settings['telegramChatId'],_0x1ef34a[_0x57f8ea(0x1d3)]+'\x20>\x20'+_0x1ef34a[_0x57f8ea(0x195)])[_0x57f8ea(0x1ce)](_0xe84ebe=>{telegramError(_0xe84ebe);});else tgBot[_0x57f8ea(0x231)](settings['telegramChatId'],_0x57f8ea(0x1ae)+_0x334b7b+_0x57f8ea(0x137)+_0x1ef34a[_0x57f8ea(0x195)])[_0x57f8ea(0x1ce)](_0x311682=>{telegramError(_0x311682);});}}}}function getDeviceWithIp(_0x2f77ca){const _0x42cdc7=_0x172695;return devices[_0x42cdc7(0x265)](_0x5c98f5=>_0x5c98f5['ip']===_0x2f77ca);}function temporaryAccess2FA(_0x5c83be,_0x32e885){const _0x50deeb=_0x172695;let _0x5583ec=new Date(),_0x9110a5=![];if(lastIpApproval){if(_0x5583ec-lastIpApproval<0x1388)_0x9110a5=!![];}lastIpApproval=new Date();if(_0x9110a5)return;tgBot&&settings[_0x50deeb(0x1f1)]&&(tgBot[_0x50deeb(0x163)](_0x50deeb(0x25a)),tgBot['sendMessage'](settings[_0x50deeb(0x1f1)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x32e885)[_0x50deeb(0x22c)]+_0x50deeb(0x1f3),{'parse_mode':_0x50deeb(0x21f),'reply_markup':{'inline_keyboard':[[{'text':_0x50deeb(0x241),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x50deeb(0x172),'callback_data':_0x50deeb(0x172)}]]}})['catch'](_0x385a93=>{telegramError(_0x385a93);}),tgBot['on']('callback_query',async _0x1e2194=>{const _0x4acdfa=_0x50deeb,_0x5b009b=_0x1e2194['data'],_0x48f053=_0x1e2194[_0x4acdfa(0x220)];tgBot[_0x4acdfa(0x13a)](_0x1e2194['id'])[_0x4acdfa(0x227)](async()=>{const _0x38e542=_0x4acdfa;devices[_0x5c83be][_0x38e542(0x225)]={'clientip':_0x32e885,'timestamp':new Date()['getTime'](),'expiry':_0x5b009b},_0x5b009b!=_0x38e542(0x172)?(await tgBot[_0x38e542(0x231)](_0x48f053[_0x38e542(0x1a3)]['id'],_0x38e542(0x16d)+_0x5b009b+'\x20minutes',{'parse_mode':_0x38e542(0x21f)})[_0x38e542(0x1ce)](_0x4108e6=>{telegramError(_0x4108e6);}),io['to'](_0x5c83be)[_0x38e542(0x1b3)](_0x38e542(0x180),{'access':{'allow':![],'reason':_0x38e542(0x149),'token':null}})):(await tgBot[_0x38e542(0x231)](_0x48f053[_0x38e542(0x1a3)]['id'],_0x38e542(0x1eb))[_0x38e542(0x1ce)](_0x35124d=>{telegramError(_0x35124d);}),io['to'](_0x5c83be)[_0x38e542(0x1b3)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x4acdfa(0x163)]('callback_query');}));}function loginAccess2FA(_0x104777,_0x1a543e){const _0x2b8b75=_0x172695;tgBot&&settings['telegramChatId']&&(tgBot[_0x2b8b75(0x163)](_0x2b8b75(0x25a)),tgBot[_0x2b8b75(0x231)](settings['telegramChatId'],_0x2b8b75(0x17a)+normalizeIP(_0x1a543e)['show']+_0x2b8b75(0x1f3),{'parse_mode':_0x2b8b75(0x21f),'reply_markup':{'inline_keyboard':[[{'text':_0x2b8b75(0x175),'callback_data':loginExpiry},{'text':_0x2b8b75(0x172),'callback_data':_0x2b8b75(0x172)}]]}})[_0x2b8b75(0x1ce)](_0x42eecf=>{telegramError(_0x42eecf);}),tgBot['on'](_0x2b8b75(0x25a),async _0x1d2870=>{const _0x216f73=_0x2b8b75,_0x3490cd=_0x1d2870['data'],_0x174530=_0x1d2870[_0x216f73(0x220)];tgBot[_0x216f73(0x13a)](_0x1d2870['id'])[_0x216f73(0x227)](async()=>{const _0x1aeb26=_0x216f73;devices[_0x104777][_0x1aeb26(0x233)]={'clientip':_0x1a543e,'timestamp':new Date()[_0x1aeb26(0x215)](),'expiry':_0x3490cd},_0x3490cd!='reject'?(await tgBot[_0x1aeb26(0x231)](_0x174530['chat']['id'],_0x1aeb26(0x22e),{'parse_mode':_0x1aeb26(0x21f)})[_0x1aeb26(0x1ce)](_0x4ed7c2=>{telegramError(_0x4ed7c2);}),io['to'](_0x104777)[_0x1aeb26(0x1b3)]('status',{'access':{'allow':![],'reason':_0x1aeb26(0x149),'token':null}})):(await tgBot['sendMessage'](_0x174530['chat']['id'],_0x1aeb26(0x1a4))['catch'](_0xa60fb1=>{telegramError(_0xa60fb1);}),io['to'](_0x104777)[_0x1aeb26(0x1b3)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x216f73(0x163)]('callback_query');}));}function getConfiguration(){const _0x50271c=_0x172695;return dbConfig[_0x50271c(0x1ed)](_0x50271c(0x16e))[_0x50271c(0x169)](_0x50271c(0x1dc))[_0x50271c(0x237)]()||[];}function getEnabledBots(){const _0xc58d4b=_0x172695;return dbConfig['get'](_0xc58d4b(0x16e))[_0xc58d4b(0x169)](_0xc58d4b(0x1dc))[_0xc58d4b(0x1c8)]({'status':_0xc58d4b(0x1f9)})[_0xc58d4b(0x237)]()||[];}function getDisabledBots(){const _0x309d3a=_0x172695;return dbConfig[_0x309d3a(0x1ed)](_0x309d3a(0x16e))[_0x309d3a(0x169)]('botID')[_0x309d3a(0x1c8)]({'status':_0x309d3a(0x13d)})[_0x309d3a(0x237)]()||[];}function getSettings(){const _0x2af962=_0x172695;return dbSettings[_0x2af962(0x1ed)](_0x2af962(0x236))[_0x2af962(0x237)]()||{'timeshift':0x0};}function getSecure(){const _0x59631c=_0x172695;return dbSecure[_0x59631c(0x1ed)](_0x59631c(0x139))[_0x59631c(0x237)]()||{};}function getBlacklist(){const _0x5bcaa9=_0x172695;return dbSecure['get'](_0x5bcaa9(0x238))[_0x5bcaa9(0x237)]()||[];}function broadcastToBots(_0x2f45e1,_0x190e58){config['forEach'](_0x9dae42=>{const _0x4eb6bf=_0x1b5a;if(_0x9dae42[_0x4eb6bf(0x180)]=='enabled'&&_0x9dae42[_0x4eb6bf(0x23f)]==_0x4eb6bf(0x251)){if(pid[_0x9dae42['botID']])pid[_0x9dae42['botID']]['send']({[_0x2f45e1]:_0x190e58});}});}function storeSettings(_0x5be552,_0x20a440=![]){const _0x21649e=_0x172695;_0x5be552={...settings,..._0x5be552};if(_0x20a440&&_0x5be552['bbPassword']!=_0x21649e(0x141)&&_0x5be552[_0x21649e(0x1d2)]!=''){const _0x4369b0=crypt[_0x21649e(0x201)](secure[_0x21649e(0x1b6)],_0x5be552[_0x21649e(0x1d2)])['message']['split']('@')[0x0],_0x5c74a0=bcrypt[_0x21649e(0x162)](_0x4369b0,saltRounds);_0x5be552={..._0x5be552,'bbPassword':_0x5c74a0};}if(_0x20a440&&_0x5be552[_0x21649e(0x267)]!=_0x21649e(0x141)&&_0x5be552['telegramToken']!=''){const _0x4fbfe6=crypt['decrypt'](secure[_0x21649e(0x1b6)],_0x5be552[_0x21649e(0x267)])['message'][_0x21649e(0x22d)]('@')[0x0];_0x5be552={..._0x5be552,'telegramToken':_0x4fbfe6};}const _0x536a8f=_0x5be552['telegramToken']!='************'&&_0x5be552[_0x21649e(0x267)]!=settings[_0x21649e(0x267)]||_0x5be552[_0x21649e(0x153)]!=settings['telegramUsername'],_0x118750=_0x5be552[_0x21649e(0x267)]==''||_0x5be552[_0x21649e(0x153)]=='';if(_0x536a8f)_0x5be552[_0x21649e(0x182)]=_0x21649e(0x176);for(const [_0x1a0550,_0x2ca43e]of Object[_0x21649e(0x250)](_0x5be552)){if(_0x1a0550==_0x21649e(0x267)&&_0x2ca43e==_0x21649e(0x141)){_0x5be552['telegramToken']=settings['telegramToken'];continue;};if(_0x1a0550=='bbPassword'&&_0x2ca43e==_0x21649e(0x141)){_0x5be552[_0x21649e(0x1d2)]=settings[_0x21649e(0x1d2)];continue;};dbSettings[_0x21649e(0x179)](_0x21649e(0x1be)+_0x1a0550,_0x2ca43e)[_0x21649e(0x15a)]();}settings=_0x5be552,io['to']('botmanager')[_0x21649e(0x1b3)](_0x21649e(0x236),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x536a8f&&!_0x118750)initTelegram();if(_0x536a8f&&_0x118750)disableTelegram();getAllClients()[_0x21649e(0x1c5)](_0x16b8d1=>{const _0x433d91=_0x21649e;getSocket(_0x16b8d1['id'])[_0x433d91(0x1b3)]('status',{'access':{'allow':![],'reason':_0x433d91(0x149),'token':null}});});}function updateSetting(_0x11330e,_0x418518){const _0x586fe1=_0x172695;dbSettings[_0x586fe1(0x179)](_0x586fe1(0x1be)+_0x11330e,_0x418518)[_0x586fe1(0x15a)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x586fe1(0x236),cleanSettings());}function storeSecure(_0xcac42e){const _0x3001ef=_0x172695;dbSecure[_0x3001ef(0x1ed)]('secure')[_0x3001ef(0x1da)](_0xcac42e)[_0x3001ef(0x15a)](),secure=_0xcac42e;}function addBlacklist(_0x311567){const _0x99bbfd=_0x172695;cleanBlacklist();let _0x56bb20;devices[_0x311567][_0x99bbfd(0x225)]?_0x56bb20=Math[_0x99bbfd(0x264)](devices[_0x311567][_0x99bbfd(0x225)][_0x99bbfd(0x1fe)],loginExpiry):_0x56bb20=loginExpiry,dbSecure['get'](_0x99bbfd(0x238))['push']({'expiry':new Date()[_0x99bbfd(0x215)]()+_0x56bb20*0x3c*0x3e8,'token':devices[_0x311567][_0x99bbfd(0x152)][_0x99bbfd(0x165)]})[_0x99bbfd(0x15a)](),blacklist=dbSecure[_0x99bbfd(0x1ed)](_0x99bbfd(0x238))[_0x99bbfd(0x237)]();}function cleanBlacklist(){const _0x3403b2=_0x172695;let _0x5f37dd=dbSecure[_0x3403b2(0x1ed)](_0x3403b2(0x238))[_0x3403b2(0x223)]()[_0x3403b2(0x237)](),_0x1ec27b=new Date()['getTime']();_0x5f37dd['forEach'](_0x364160=>{const _0x29666b=_0x3403b2;_0x364160[_0x29666b(0x1fe)]<_0x1ec27b&&dbSecure[_0x29666b(0x1ed)](_0x29666b(0x238))[_0x29666b(0x1d8)]({'expiry':_0x364160[_0x29666b(0x1fe)]})[_0x29666b(0x15a)]();});}function initStates(){const _0x333375=_0x172695;let _0x48b398=getConfiguration();_0x48b398[_0x333375(0x1c5)](_0x292a67=>{const _0x3d9d3e=_0x333375;_0x292a67[_0x3d9d3e(0x23f)]=_0x3d9d3e(0x15b);}),storeConfiguration(_0x48b398);}function onKeys(){const _0x557d4b=new RSA();return new Promise(_0x2febaf=>{_0x557d4b['generateKeyPairAsync']()['then'](_0x251d23=>{_0x2febaf(_0x251d23);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1418d8=_0x172695;let _0x14ab33=getConfiguration(),_0x5c508e=![];_0x14ab33[_0x1418d8(0x1c5)](_0x414cd4=>{const _0x48b96a=_0x1418d8;if(_0x414cd4[_0x48b96a(0x180)]==_0x48b96a(0x251))_0x414cd4[_0x48b96a(0x180)]=_0x48b96a(0x1f9),_0x5c508e=!![];else _0x414cd4[_0x48b96a(0x180)]==_0x48b96a(0x15b)&&(_0x414cd4['status']=_0x48b96a(0x13d),_0x5c508e=!![]);});if(_0x5c508e)storeConfiguration(_0x14ab33);let _0x578927=getSecure();if(!_0x578927['hasOwnProperty'](_0x1418d8(0x1ff))){let _0x1805fe=await generateKeys();_0x578927[_0x1418d8(0x23e)]=_0x1805fe[_0x1418d8(0x23e)],_0x578927['privateKey']=_0x1805fe[_0x1418d8(0x1b6)],_0x578927[_0x1418d8(0x1ff)]=crypto[_0x1418d8(0x192)](0x20)['toString'](_0x1418d8(0x1ea));;storeSecure(_0x578927);}let _0x4ac76a=getSettings();_0x5c508e=![];!_0x4ac76a[_0x1418d8(0x185)](_0x1418d8(0x244))&&(_0x4ac76a['loginRequired']=![],_0x4ac76a['bbUsername']='',_0x4ac76a['bbPassword']='',_0x4ac76a[_0x1418d8(0x254)]=![],_0x5c508e=!![]);!_0x4ac76a[_0x1418d8(0x185)](_0x1418d8(0x22f))&&(_0x4ac76a[_0x1418d8(0x22f)]=![],_0x4ac76a[_0x1418d8(0x196)]=[],_0x4ac76a['temporaryAccessAllowed']=![],_0x5c508e=!![]);if(!_0x4ac76a[_0x1418d8(0x185)]('telegramEnabled')){if(_0x4ac76a[_0x1418d8(0x1f1)])_0x4ac76a[_0x1418d8(0x183)]=!![];else _0x4ac76a[_0x1418d8(0x183)]=![];_0x5c508e=!![];}if(_0x5c508e)storeSettings(_0x4ac76a);}function storeConfiguration(_0x5bc6b1){const _0x49403e=_0x172695;dbConfig[_0x49403e(0x1ed)](_0x49403e(0x16e))[_0x49403e(0x1d8)]()[_0x49403e(0x15a)](),dbConfig[_0x49403e(0x1ed)]('bots')[_0x49403e(0x1da)](..._0x5bc6b1)[_0x49403e(0x15a)](),config=_0x5bc6b1;}function resetPassword(){const _0x5924f4=_0x172695;tgBot&&settings[_0x5924f4(0x1f1)]&&(tgBot[_0x5924f4(0x163)]('callback_query'),tgBot[_0x5924f4(0x231)](settings[_0x5924f4(0x1f1)],_0x5924f4(0x200),{'parse_mode':_0x5924f4(0x21f),'reply_markup':{'inline_keyboard':[[{'text':_0x5924f4(0x166),'callback_data':_0x5924f4(0x166)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x558d14=>{telegramError(_0x558d14);}),tgBot['on']('callback_query',async _0x6342a1=>{const _0x7b254d=_0x5924f4,_0x10143c=_0x6342a1['data'],_0x43c061=_0x6342a1[_0x7b254d(0x220)];tgBot[_0x7b254d(0x13a)](_0x6342a1['id'])[_0x7b254d(0x227)](async()=>{const _0x1ca685=_0x7b254d;if(_0x10143c!='no'){const _0x203ddb=0xf,_0x2e7643=_0x1ca685(0x1a7),_0x3541a8=Array['from'](crypto[_0x1ca685(0x174)](new Uint32Array(_0x203ddb)))[_0x1ca685(0x17c)](_0x2cedfc=>_0x2e7643[_0x2cedfc%_0x2e7643[_0x1ca685(0x15d)]])[_0x1ca685(0x143)](''),_0x24e125=bcrypt[_0x1ca685(0x162)](_0x3541a8,saltRounds);storeSettings({'bbPassword':_0x24e125}),await tgBot[_0x1ca685(0x231)](_0x43c061[_0x1ca685(0x1a3)]['id'],_0x1ca685(0x1ba)+_0x3541a8,{'parse_mode':_0x1ca685(0x21f)})[_0x1ca685(0x1ce)](_0x24542a=>{telegramError(_0x24542a);});}else await tgBot[_0x1ca685(0x231)](_0x43c061['chat']['id'],_0x1ca685(0x257))[_0x1ca685(0x1ce)](_0x3b88e3=>{telegramError(_0x3b88e3);});}),tgBot[_0x7b254d(0x163)]('callback_query');}));}function logging(_0x5da25f){const _0x55e82a=_0x172695;console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x5da25f);if(tgBot&&settings['telegramChatId']&&settings[_0x55e82a(0x182)]!=_0x55e82a(0x217))tgBot[_0x55e82a(0x231)](settings['telegramChatId'],_0x55e82a(0x21b)+_0x5da25f)[_0x55e82a(0x1ce)](_0x709eb6=>{telegramError(_0x709eb6);});}function getServerTime(){const _0x1e00e0=_0x172695,_0x55e446=new Date();return _0x55e446[_0x1e00e0(0x1d6)]()+'/'+(_0x55e446[_0x1e00e0(0x1c3)]()+0x1)[_0x1e00e0(0x204)]()[_0x1e00e0(0x1ac)](0x2,'0')+'/'+_0x55e446[_0x1e00e0(0x170)]()[_0x1e00e0(0x204)]()['padStart'](0x2,'0')+'\x20'+_0x55e446[_0x1e00e0(0x188)]()['toString']()[_0x1e00e0(0x1ac)](0x2,'0')+':'+_0x55e446[_0x1e00e0(0x246)]()[_0x1e00e0(0x204)]()['padStart'](0x2,'0')+':'+_0x55e446[_0x1e00e0(0x1a5)]()['toString']()[_0x1e00e0(0x1ac)](0x2,'0');}function getTimeStamp(){const _0xf4fce8=_0x172695,_0x2bdd1c=shiftedTime();return _0x2bdd1c[_0xf4fce8(0x1d6)]()+'/'+(_0x2bdd1c['getMonth']()+0x1)[_0xf4fce8(0x204)]()[_0xf4fce8(0x1ac)](0x2,'0')+'/'+_0x2bdd1c[_0xf4fce8(0x170)]()[_0xf4fce8(0x204)]()[_0xf4fce8(0x1ac)](0x2,'0')+'\x20'+_0x2bdd1c[_0xf4fce8(0x188)]()[_0xf4fce8(0x204)]()[_0xf4fce8(0x1ac)](0x2,'0')+':'+_0x2bdd1c[_0xf4fce8(0x246)]()[_0xf4fce8(0x204)]()[_0xf4fce8(0x1ac)](0x2,'0')+':'+_0x2bdd1c[_0xf4fce8(0x1a5)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x406aa2=_0x172695,_0x129b86=new Date();let _0x2e76b1=_0x129b86;if(settings['timeshift']&&settings[_0x406aa2(0x24e)]!==0x0)_0x2e76b1=fns[_0x406aa2(0x1f5)](_0x129b86,{'hours':settings[_0x406aa2(0x24e)]});return _0x2e76b1;}function startScheduler(){let _0x4698ae=new Date()['getUTCHours']();_0x4698ae==0x1&&backupConfigFiles();_0x4698ae==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x1ca7c4=_0x172695;fs[_0x1ca7c4(0x26e)](configpath,{'withFileTypes':!![]})[_0x1ca7c4(0x1c5)](_0x3232a1=>{const _0x378af7=_0x1ca7c4;if(!_0x3232a1[_0x378af7(0x193)]())fs[_0x378af7(0x242)](configpath+_0x3232a1[_0x378af7(0x1d1)],configbackuppath+_0x3232a1[_0x378af7(0x1d1)]);});}function triggerAnalytics(){const _0x423b58=_0x172695;analytics[_0x423b58(0x230)]({'title':_0x423b58(0x24a),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x46c52,_0x35d6d1){const _0x3ecb0f=_0x172695;if(_0x46c52['username']==settings['bbUsername']&&bcrypt['compareSync'](_0x46c52[_0x3ecb0f(0x261)],settings[_0x3ecb0f(0x1d2)])){if(settings[_0x3ecb0f(0x254)])return{'allow':![],'reason':_0x3ecb0f(0x1df),'token':null};else{const _0x138cc5=generateLoginToken(_0x35d6d1);return{'allow':!![],'reason':_0x3ecb0f(0x22b),'token':_0x138cc5};}}else return{'allow':![],'reason':_0x3ecb0f(0x202),'token':null};}function refreshToken(_0x8e1075){const _0x1faad1=_0x172695,_0x3b8caa=generateLoginToken(_0x8e1075);return{'allow':!![],'reason':_0x1faad1(0x22b),'token':_0x3b8caa};}function validateAccess(_0x53909f,_0x46f2d8){const _0x4378bd=_0x172695;let _0x4361af=devices[_0x46f2d8]['ip'],_0x106e33;const _0x1f18ca=_0x1030f7=>{const _0x3c6b04=_0x1b5a;if(settings[_0x3c6b04(0x244)]){if(settings[_0x3c6b04(0x254)]){if(telegram2FaApproved(_0x46f2d8)){const _0x45f7f7=generateLoginToken(_0x46f2d8);return{'allow':!![],'reason':_0x3c6b04(0x13e),'token':_0x45f7f7};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x106e33=validToken(_0x1030f7,_0x46f2d8),_0x106e33[_0x3c6b04(0x185)](_0x3c6b04(0x1a8))?{'allow':!![],'reason':_0x3c6b04(0x1c7),'token':_0x1030f7}:{'allow':![],'reason':_0x3c6b04(0x20d),'token':null};}else return{'allow':!![],'reason':_0x3c6b04(0x171),'token':null};};if(settings[_0x4378bd(0x22f)]){let _0x3fe915=[...settings[_0x4378bd(0x196)],_0x4378bd(0x207),'::ffff:127.0.0.1','127.0.0.1'];if(_0x3fe915[_0x4378bd(0x1b2)](_0x4361af))return _0x1f18ca(_0x53909f);else{_0x106e33=validToken(_0x53909f,_0x46f2d8);if(_0x106e33[_0x4378bd(0x185)](_0x4378bd(0x1a8)))return _0x1f18ca(_0x53909f);else{if(telegramIpApproved(_0x46f2d8)){const _0x14e048=generateToken(_0x46f2d8);return _0x106e33=_0x1f18ca(_0x53909f),_0x106e33[_0x4378bd(0x158)]?{'allow':!![],'reason':_0x4378bd(0x14d),'token':_0x14e048}:_0x106e33;}else return settings[_0x4378bd(0x1b9)]?{'allow':![],'reason':_0x4378bd(0x253),'token':null}:{'allow':![],'reason':_0x4378bd(0x155),'token':null};}}}else return _0x1f18ca(_0x53909f);}function timelyDecrypt(_0x562978,_0x585226=!![]){const _0x4e0b1d=_0x172695;if(_0x562978)try{const _0x44e604=crypt['decrypt'](secure[_0x4e0b1d(0x1b6)],_0x562978)[_0x4e0b1d(0x220)],_0x359e10=_0x44e604['split']('@')[0x0],_0x3493c4=_0x44e604[_0x4e0b1d(0x22d)]('@')[0x1],_0x52e210=new Date()[_0x4e0b1d(0x215)]();if(_0x585226){if(_0x52e210-_0x3493c4<maxSecretAge*0x3e8)return _0x359e10;else return![];}else return _0x359e10;}catch(_0xce5f41){return![];}else return![];}const validToken=(_0x4c0139,_0x3619db)=>{const _0x31c521=_0x172695,_0x8388fc=devices[_0x3619db]['ip'];if(!_0x4c0139)return{'error':_0x31c521(0x18c)};for(let _0x27d387 of blacklist){if(_0x27d387[_0x31c521(0x165)]==_0x4c0139)return{'error':_0x31c521(0x205)};}let _0x48266c;try{_0x48266c=jwt[_0x31c521(0x1bb)](_0x4c0139,secure[_0x31c521(0x1ff)]+_0x3619db);}catch{return{'error':_0x31c521(0x133)};}if(!_0x48266c['hasOwnProperty'](_0x31c521(0x25f))&&!_0x48266c[_0x31c521(0x185)]('username')||!_0x48266c[_0x31c521(0x185)](_0x31c521(0x1bd)))return{'error':_0x31c521(0x178)};if(!_0x48266c[_0x31c521(0x185)](_0x31c521(0x1cf))&&_0x48266c[_0x31c521(0x185)]('clientip')){const {clientip:_0x596f82}=_0x48266c;return _0x8388fc==_0x596f82?{'success':_0x31c521(0x18e)}:{'error':_0x31c521(0x154)};}else{if(_0x48266c[_0x31c521(0x185)]('username')&&_0x48266c[_0x31c521(0x185)](_0x31c521(0x25f))){const {username:_0x4c09a6,clientip:_0x1742e8}=_0x48266c;return settings['bbUsername']==_0x4c09a6&&_0x8388fc==_0x1742e8?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x24c2ab=>{const _0xc5f53e=_0x172695;if(_0x24c2ab){const _0x2f4906=devices[_0x24c2ab]['ip'];return jwt[_0xc5f53e(0x1a0)]({'username':settings[_0xc5f53e(0x173)],'clientip':_0x2f4906},secure['secret']+_0x24c2ab,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x267ce8=>{const _0x14cc62=_0x172695;if(_0x267ce8){const _0x42ef6a=devices[_0x267ce8]['ip'];return jwt[_0x14cc62(0x1a0)]({'clientip':_0x42ef6a},secure[_0x14cc62(0x1ff)]+_0x267ce8,{'expiresIn':devices[_0x267ce8][_0x14cc62(0x225)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x4f54db=>{const _0xacdba5=_0x172695;let _0x15b37a=![];return devices[_0x4f54db]['telegramIpApproval']&&devices[_0x4f54db]['telegramIpApproval'][_0xacdba5(0x1fe)]!='reject'&&(_0x15b37a=devices[_0x4f54db]['telegramIpApproval'][_0xacdba5(0x25f)]==devices[_0x4f54db]['ip']&&new Date()[_0xacdba5(0x215)]()-devices[_0x4f54db][_0xacdba5(0x225)]['timestamp']<devices[_0x4f54db]['telegramIpApproval'][_0xacdba5(0x1fe)]*0x3c*0x3e8),_0x15b37a;},telegram2FaApproved=_0x1f922c=>{const _0x2c22d2=_0x172695;let _0x3258f3=![];return devices[_0x1f922c]['telegram2FaApproval']&&devices[_0x1f922c][_0x2c22d2(0x233)]['expiry']!=_0x2c22d2(0x172)&&(_0x3258f3=devices[_0x1f922c]['telegram2FaApproval']['clientip']==devices[_0x1f922c]['ip']&&new Date()[_0x2c22d2(0x215)]()-devices[_0x1f922c][_0x2c22d2(0x233)][_0x2c22d2(0x13f)]<devices[_0x1f922c][_0x2c22d2(0x233)][_0x2c22d2(0x1fe)]*0x3c*0x3e8),_0x3258f3;},normalizeIP=_0x8ad8ec=>{const _0x13d796=_0x172695;let _0x283ea1=null,_0x5e0a73=null;if(ipaddr['isValid'](_0x8ad8ec)){const _0x5e3368=ipaddr[_0x13d796(0x229)](_0x8ad8ec);_0x5e3368[_0x13d796(0x17f)]()==='ipv6'?(_0x5e3368[_0x13d796(0x164)]()&&(_0x283ea1=_0x5e3368[_0x13d796(0x218)]()[_0x13d796(0x204)]()),_0x5e0a73=_0x5e3368[_0x13d796(0x204)]()):(_0x283ea1=_0x5e3368['toString'](),_0x5e0a73=_0x5e3368[_0x13d796(0x1e7)]()['toString']());}return{'show':_0x283ea1?_0x283ea1:_0x5e0a73,'store':_0x5e0a73};};