const _0x364c62=_0x3694;(function(_0x28528e,_0x5213e2){const _0x416958=_0x3694,_0x57dae8=_0x28528e();while(!![]){try{const _0x481e85=-parseInt(_0x416958(0x2a9))/0x1*(-parseInt(_0x416958(0x2ff))/0x2)+parseInt(_0x416958(0x2b6))/0x3+-parseInt(_0x416958(0x30e))/0x4*(-parseInt(_0x416958(0x1ee))/0x5)+parseInt(_0x416958(0x291))/0x6*(parseInt(_0x416958(0x1ed))/0x7)+-parseInt(_0x416958(0x33c))/0x8+-parseInt(_0x416958(0x1ea))/0x9+-parseInt(_0x416958(0x33b))/0xa*(parseInt(_0x416958(0x1fe))/0xb);if(_0x481e85===_0x5213e2)break;else _0x57dae8['push'](_0x57dae8['shift']());}catch(_0x5cb9c0){_0x57dae8['push'](_0x57dae8['shift']());}}}(_0xefcf,0x8faad));const _0x6c53e0=function(){let _0x276fbb=!![];return function(_0x5c48da,_0x3d72e8){const _0x3373a0=_0x276fbb?function(){const _0x1c1907=_0x3694;if(_0x3d72e8){const _0x115dd1=_0x3d72e8[_0x1c1907(0x2d7)](_0x5c48da,arguments);return _0x3d72e8=null,_0x115dd1;}}:function(){};return _0x276fbb=![],_0x3373a0;};}(),_0x257584=_0x6c53e0(this,function(){const _0x40816d=_0x3694;return _0x257584[_0x40816d(0x211)]()[_0x40816d(0x23d)](_0x40816d(0x2bb))[_0x40816d(0x211)]()[_0x40816d(0x283)](_0x257584)[_0x40816d(0x23d)](_0x40816d(0x2bb));});_0x257584();'use strict';process[_0x364c62(0x22c)][_0x364c62(0x27f)]=0x1;const childProcess=require(_0x364c62(0x2f5)),FileSync=require(_0x364c62(0x266)),fs=require('fs'),fns=require(_0x364c62(0x32a)),low=require(_0x364c62(0x2b4)),path=require(_0x364c62(0x30c)),crypto=require(_0x364c62(0x302)),Crypt=require(_0x364c62(0x30a))[_0x364c62(0x251)],RSA=require(_0x364c62(0x30a))[_0x364c62(0x282)],bcrypt=require(_0x364c62(0x2fa)),jwt=require(_0x364c62(0x2a6)),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require('@analytics/google-analytics-v3')[_0x364c62(0x1e7)],ipaddr=require(_0x364c62(0x2b3)),argv=require(_0x364c62(0x340))(process['argv'][_0x364c62(0x203)](0x2))['argv'],PORT=argv[_0x364c62(0x1f0)]||_0x364c62(0x323),pattern=/^[0-9]{2,4}$/;!pattern[_0x364c62(0x25c)](PORT)&&(console[_0x364c62(0x2f3)](_0x364c62(0x1ec)+PORT+_0x364c62(0x2d2)),process[_0x364c62(0x32f)](0x1));const HOST=argv[_0x364c62(0x246)]||null,userID=argv[_0x364c62(0x318)]||'';let bbpath=_0x364c62(0x1e0),bbpath2='';const botfile='bot.js',configfile=_0x364c62(0x342),settingsfile='bb-settings.json',securefile=_0x364c62(0x240);let validInstallation=!![];!fs[_0x364c62(0x2af)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x364c62(0x30f)),configpath=userID?bbpath+_0x364c62(0x344)+userID+'/':bbpath+_0x364c62(0x344),configbackuppath=configpath+_0x364c62(0x233);!fs[_0x364c62(0x2af)](configpath)&&fs[_0x364c62(0x1e2)](configpath);!fs[_0x364c62(0x2af)](configbackuppath)&&fs[_0x364c62(0x1e2)](configbackuppath);function _0xefcf(){const _0x1cc230=['2FA\x20login\x20required','toggleBotMode','node-telegram-bot-api','status','Ok,\x20will\x20send\x20order\x20notifications\x20only','\x20>\x20','new','log','telegrammsg','child_process','isValid','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','token','getMonth','bcryptjs','login\x20not\x20required','/on\x20-\x20start\x20bot(s)\x0a','place-order','manual','1240WVnCOQ','HTML','login\x20required','crypto','Password\x20reset\x20rejected','static','RSA-OAEP','publicKey','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','-results.json','type','hybrid-crypto-js','headers','path','compareSync','4pkIpND','clients','http','login\x20token\x20valid','telegram','Unauthorized\x20attempt\x20to\x20update\x20settings','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','cancelLoading','copyFileSync','kill','user','stopped','************','isIPv4MappedAddress','write','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','password','apiKey','catch','/:bot/coins','forEach','3000','once','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','sortBy','ipv6','error','stopPolling','date-fns','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','timeshift','alerts','join','exit','update-bb','mode','getHours','push','whitelistEnabled','Invalid\x20authentication\x20token\x20(2)','All\x20bots','cancel-loading','botID','404\x20Not\x20Found','store-settings','370NWXWmP','3311376vFWngh','includes','telegramUsername','\x20mode','yargs/yargs',':\x20Bot\x20Mgr\x20>\x20','bb-config.json','kind','config/','127.0.0.1','build2','username','Login\x20accepted','bb/','loginRequired','mkdirSync','from','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','initclient','default','keys','get-starting-balances','3708441JvWKQk','add-bot','Error:\x20Invalid\x20argument\x20','259ZGUprj','2653885jTNEQi','event','port','success','login\x20token\x20generated','Notifications\x20enabled\x0a','clientip','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','stringify','find','secret','showname','Bot\x20','Login\x20rejected','referer','accept','334554CbTIUp','readFileSync','</b>\x20?','index.html','sendFile','slice','store-configuration','assign','new-disabled','message','\x20minutes','updatebotmanager','getSeconds','pidRefreshToken','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','SIGINT','ipc','restarting\x20Bot\x20','set','toString','randomFillSync','privateKey','Balance\x20Bot','reload','You\x20can\x20use\x20the\x20following\x20commands:\x0a','pidExpireLogin','Balance\x20Bot\x20Server','allow','parse','2FA','remove','https://hodlerhacks.com','sendPortfolioTelegram','conn','<b>Balance\x20Bot\x20Status:</b>\x0a','show','Invalid\x20authentication\x20token\x20(1)','settings','started','Unauthorized\x20attempt\x20to\x20store\x20configuration','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','deleteHistoryAlerts','/:bot/performance','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','encryptedUuid','data','env','handshake','timestamp','temporaryAccessAllowed','listen','-performance.json','restart','backup/','getTime','\x20only\x0a','reset-password','-config.json','logout','fork','connection','15\x20min','callback_query','search','telegramIpApproval','placeOrder','bb-secure.json','-events.json','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Invalid\x20username\x20or\x20IP\x20address','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','host','yes','bbUsername','stop','Orders','2FA\x20required','answerCallbackQuery','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','/disable\x20-\x20disable\x20notifications\x0a','hasOwnProperty','temporary\x20access\x20not\x20allowed','Crypt','No\x20bots\x20running\x20right\x20now','getPortfolio','args','access','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Invalid\x20Telegram\x20token','Access\x20enabled\x20for\x20','/names\x20-\x20show\x20bot\x20names\x0a','storeHeadless','cloneDeep','test','defaults','Unauthorized\x20login\x20attempt\x20(timeout)','Alerts','entries','\x20to\x20','padStart','inherit','unlinkSync','Unauthorized\x20attempt\x20to\x20get\x20logs','lowdb/adapters/FileSync','length','botmanager','all','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Notifications\x20disabled','/:bot','toggle-bot-mode','decrypt','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','function','whitelist','2FA\x20login\x20token\x20generated','Temporary\x20access\x20rejected','/help\x20-\x20show\x20available\x20commands\x0a','::1','enabled','getMinutes','/restart\x20-\x20restart\x20bot(s)\x0a','removeListener','writeFileSync','Bot\x20Mgr\x20>\x20','User\x20has\x20been\x20validated','server','NTBA_FIX_319','match','chat','RSA','constructor','telegramToken','SIGTERM','settings.','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','5\x20min','sha256','-----------------------------------------------------------------------------------','telegramEnabled','Ok,\x20will\x20send\x20alert\x20notifications\x20only','getFullYear','split','logged\x20out','35292arZdPp','Notifications\x20disabled\x0a','bots','build','emit','add','removeAllListeners','send','filter','/status\x20-\x20show\x20bot(s)\x20status\x0a',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','bot-','get-portfolio','botname','sockets','login','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','sign','store-headless','orders','hashSync','jsonwebtoken','notification','/:bot/configuration','1134URiyQe','emitHistory','value','Unauthorized\x20attempt\x20to\x20delete\x20alerts','All','live','existsSync','bbPassword','socket.io','max','ipaddr.js','lowdb','/:bot/history','3264777bXmODE','sendMessage','All\x20bots\x20running\x20right\x20now','uuid','createServer','(((.+)+)+)+$','auto','No\x20authentication\x20token','page','\x20|\x20','1000','running','remoteAddress','2FA\x20login\x20rejected','headless','reject','disconnect','get-logs','get','Unauthorized\x20attempt\x20to\x20delete\x20bot','toIPv4Address','temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20log\x20out','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','telegram2FaApproval','starting\x20new\x20bot\x20|\x20Bot\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','expiry','onText','f2aRequired','use','apply','reason','telegramEvents','delete-bot','telegramChatId','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','generateKeyPairAsync','update-bot','name','getUTCHours','bot','then','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','order','blacklist','disabled','starting\x20bot\x20|\x20Bot\x20','version','Password\x20has\x20been\x20reset\x20to:\x20','isDirectory','Unauthorized\x20attempt\x20to\x20update\x20bot'];_0xefcf=function(){return _0x1cc230;};return _0xefcf();}const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x364c62(0x25d)]({'bots':[]})[_0x364c62(0x31c)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x364c62(0x25d)]({'settings':{'timeshift':0x0}})[_0x364c62(0x31c)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x364c62(0x25d)]({'secure':{},'blacklist':[]})[_0x364c62(0x31c)]();function _0x3694(_0x1c7ba8,_0x21ee72){const _0x17e83a=_0xefcf();return _0x3694=function(_0x257584,_0x6c53e0){_0x257584=_0x257584-0x1dd;let _0xefcf7f=_0x17e83a[_0x257584];return _0xefcf7f;},_0x3694(_0x1c7ba8,_0x21ee72);}let crypt=new Crypt({'md':_0x364c62(0x28a),'rsaStandard':_0x364c62(0x305)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x364c62(0x2e8)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x364c62(0x310))[_0x364c62(0x2ba)](app);app[_0x364c62(0x2d6)](express[_0x364c62(0x304)](path[_0x364c62(0x32e)](__dirname,bbpath2,_0x364c62(0x1dd)))),app['use'](express[_0x364c62(0x304)](path[_0x364c62(0x32e)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x5c8a72,_0x1e5bda){const _0x52ecb9=_0x364c62;_0x1e5bda[_0x52ecb9(0x202)](path['join'](__dirname,bbpath2,_0x52ecb9(0x1dd),_0x52ecb9(0x201)));}),app[_0x364c62(0x2c8)](_0x364c62(0x26c),function(_0x56717e,_0x313906){const _0x32ba9b=_0x364c62;_0x313906[_0x32ba9b(0x202)](path[_0x32ba9b(0x32e)](__dirname,bbpath2,'build',_0x32ba9b(0x201)));}),app['get']('/:bot/portfolio',(_0x427d16,_0x5118fe)=>{const _0x45dcaf=_0x364c62;_0x5118fe[_0x45dcaf(0x202)](path[_0x45dcaf(0x32e)](__dirname,bbpath2,'build',_0x45dcaf(0x201)));}),app['get'](_0x364c62(0x228),(_0x1b9f90,_0x384f96)=>{const _0x405d85=_0x364c62;_0x384f96['sendFile'](path[_0x405d85(0x32e)](__dirname,bbpath2,_0x405d85(0x294),_0x405d85(0x201)));}),app[_0x364c62(0x2c8)](_0x364c62(0x321),(_0x569d31,_0x3c8706)=>{const _0x1a2bcf=_0x364c62;_0x3c8706[_0x1a2bcf(0x202)](path[_0x1a2bcf(0x32e)](__dirname,bbpath2,'build',_0x1a2bcf(0x201)));}),app[_0x364c62(0x2c8)](_0x364c62(0x2b5),(_0x576533,_0x22135b)=>{const _0x301230=_0x364c62;_0x22135b[_0x301230(0x202)](path[_0x301230(0x32e)](__dirname,bbpath2,'build',_0x301230(0x201)));}),app['get'](_0x364c62(0x2a8),(_0x223180,_0x5034ec)=>{const _0x4e8a8f=_0x364c62;_0x5034ec[_0x4e8a8f(0x202)](path[_0x4e8a8f(0x32e)](__dirname,bbpath2,_0x4e8a8f(0x294),_0x4e8a8f(0x201)));}),app[_0x364c62(0x2c8)]('/:bot/support',(_0x18543c,_0x48df46)=>{const _0x327e82=_0x364c62;_0x48df46[_0x327e82(0x202)](path[_0x327e82(0x32e)](__dirname,bbpath2,_0x327e82(0x294),_0x327e82(0x201)));});if(HOST)http[_0x364c62(0x230)](PORT,HOST);else http[_0x364c62(0x230)](PORT);const io=require(_0x364c62(0x2b1))(http,{}),analytics=Analytics({'app':_0x364c62(0x214),'plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x364c62(0x2ee));let tgBot;if(settings[_0x364c62(0x284)]&&settings[_0x364c62(0x284)]!=''&&settings[_0x364c62(0x33e)]&&settings[_0x364c62(0x33e)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x2c6c43=_0x364c62;console[_0x2c6c43(0x2f3)](''),console[_0x2c6c43(0x2f3)](_0x2c6c43(0x28b)),logging(_0x2c6c43(0x325)+PORT),console[_0x2c6c43(0x2f3)](_0x2c6c43(0x28b));if(config[_0x2c6c43(0x267)]!=0x0)config[_0x2c6c43(0x322)](_0x1199eb=>{const _0x6553f6=_0x2c6c43;if(_0x1199eb[_0x6553f6(0x2ef)]==_0x6553f6(0x277)||_0x1199eb[_0x6553f6(0x2ef)]==_0x6553f6(0x2f2))logging(_0x6553f6(0x2e7)+_0x1199eb[_0x6553f6(0x338)]+'\x20|\x20'+_0x1199eb[_0x6553f6(0x29e)]),startBot([_0x1199eb['botID'],userID],{'cwd':bbpath},function(_0x3efb45){if(_0x3efb45)logging(_0x3efb45);});else(_0x1199eb[_0x6553f6(0x2ef)]==_0x6553f6(0x2e6)||_0x1199eb['status']==_0x6553f6(0x206))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x1199eb['botID']+_0x6553f6(0x2bf)+_0x1199eb['botname']);});else!newBot&&console[_0x2c6c43(0x2f3)](_0x2c6c43(0x2e3));if(newBot)addBot();console[_0x2c6c43(0x2f3)](_0x2c6c43(0x28b)),console[_0x2c6c43(0x2f3)]('');}function startSocket(){const _0x40372b=_0x364c62;io['on'](_0x40372b(0x23a),_0x560f24=>{const _0x3e3b6e=_0x40372b;let _0x1d022d,_0x11d565,_0x3c9f1a,_0x3686e6,_0x2714b0;const _0x345a8e=_0x560f24['handshake'][_0x3e3b6e(0x30b)][_0x3e3b6e(0x1fc)];_0x11d565=_0x345a8e[_0x3e3b6e(0x280)](/bot[0-9]{3}/);if(_0x11d565)_0x3c9f1a=_0x11d565[0x0][_0x3e3b6e(0x280)](/[0-9]{3}/);if(_0x3c9f1a)_0x1d022d=_0x3c9f1a[0x0];else _0x1d022d=_0x3e3b6e(0x268);const _0x1e9494=_0x560f24[_0x3e3b6e(0x22d)]['auth'][_0x3e3b6e(0x22a)];if(!_0x1e9494)_0x560f24[_0x3e3b6e(0x295)]('status',{'publicKey':secure[_0x3e3b6e(0x306)]});else{_0x3686e6=timelyDecrypt(_0x1e9494,![]);if(!_0x3686e6)_0x560f24[_0x3e3b6e(0x295)](_0x3e3b6e(0x2ef),{'publicKey':secure['publicKey']});else{_0x2714b0=normalizeIP(_0x560f24[_0x3e3b6e(0x21f)][_0x3e3b6e(0x2c2)])['store'];if(!devices[_0x3686e6])devices[_0x3686e6]={'uuid':_0x3686e6,'access':{'token':null}};devices[_0x3686e6]['ip']=_0x2714b0;const _0x3edd28=addClient(_0x560f24['id'],_0x3686e6,_0x1d022d);setAccess(_0x3edd28),_0x560f24['on'](_0x3e3b6e(0x2a0),_0x47020a=>{const _0x1cad14=_0x3e3b6e,_0x58a63d=timelyDecrypt(_0x47020a[_0x1cad14(0x31e)]);if(_0x58a63d){_0x47020a={'username':_0x47020a[_0x1cad14(0x1de)],'password':_0x58a63d},devices[_0x3686e6]['access']=validateCredentials(_0x47020a,_0x3686e6);if(devices[_0x3686e6][_0x1cad14(0x255)][_0x1cad14(0x219)]==![]&&devices[_0x3686e6]['access'][_0x1cad14(0x2d8)]==_0x1cad14(0x2ec))_0x560f24[_0x1cad14(0x295)](_0x1cad14(0x2ef),{'access':devices[_0x3686e6][_0x1cad14(0x255)]}),loginAccess2FA(_0x3686e6,_0x2714b0);else{if(devices[_0x3686e6][_0x1cad14(0x255)][_0x1cad14(0x219)]==![]&&devices[_0x3686e6][_0x1cad14(0x255)]['reason']=='invalid\x20credentials')_0x560f24[_0x1cad14(0x295)](_0x1cad14(0x2ef),{'access':devices[_0x3686e6][_0x1cad14(0x255)]});else devices[_0x3686e6][_0x1cad14(0x255)][_0x1cad14(0x219)]&&devices[_0x3686e6][_0x1cad14(0x255)][_0x1cad14(0x2d8)]==_0x1cad14(0x1f2)&&(getClientsWithUuid(_0x3686e6)[_0x1cad14(0x322)](_0x3aab63=>{setAccess(_0x3aab63);}),setTokenRefresh(_0x3686e6),setSessionTimeout('login',_0x3686e6));}}else logging(_0x1cad14(0x25e));}),_0x560f24['on'](_0x3e3b6e(0x236),()=>{resetPassword();}),_0x560f24['on']('disconnect',_0x8327c7=>{removeClient(_0x560f24['id']);});}}});}function initClient(_0x306d79){const _0x401d56=_0x364c62;if(_0x306d79!=_0x401d56(0x268)&&config[_0x401d56(0x31f)]!=''){if(pid[_0x306d79])pid[_0x306d79][_0x401d56(0x298)]({'function':_0x401d56(0x1e6),'args':null});}}function getSocket(_0x2051eb){const _0x34a692=_0x364c62;return io[_0x34a692(0x29f)]['sockets'][_0x34a692(0x2c8)](_0x2051eb);}function setAccess(_0x524584){const _0x51f14f=_0x364c62,_0xb8a68c=getSocket(_0x524584['id']),_0x2f4287=_0x524584[_0x51f14f(0x2b9)],_0xef55bd=_0x524584['bot'];devices[_0x2f4287][_0x51f14f(0x255)]=validateAccess(devices[_0x2f4287][_0x51f14f(0x255)][_0x51f14f(0x2f8)],_0x2f4287),_0xb8a68c[_0x51f14f(0x32e)](_0x2f4287);if(devices[_0x2f4287][_0x51f14f(0x255)][_0x51f14f(0x219)]){_0xb8a68c[_0x51f14f(0x32e)](_0xef55bd);if(_0xef55bd==_0x51f14f(0x268))initializeSocketBotManager(_0xb8a68c);else initializeSocketBot(_0xb8a68c);initClient(_0xef55bd);}devices[_0x2f4287][_0x51f14f(0x255)][_0x51f14f(0x2f8)]&&devices[_0x2f4287][_0x51f14f(0x255)][_0x51f14f(0x2d8)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x51f14f(0x21b),_0x2f4287),devices[_0x2f4287][_0x51f14f(0x255)]['token']&&devices[_0x2f4287][_0x51f14f(0x255)][_0x51f14f(0x2d8)]==_0x51f14f(0x273)&&setSessionTimeout('login',_0x2f4287),_0xb8a68c[_0x51f14f(0x295)](_0x51f14f(0x2ef),{'status':_0x524584[_0x51f14f(0x27e)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2f4287]['access'],'externalip':devices[_0x2f4287]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x2f4287]['access']['allow']==![]&&devices[_0x2f4287][_0x51f14f(0x255)]['reason']==_0x51f14f(0x24b)&&temporaryAccess2FA(_0x2f4287,devices[_0x2f4287]['ip']);}function setSessionTimeout(_0x1b13df,_0x445ea2){const _0x6200b8=_0x364c62;let _0x457be7;if(_0x1b13df==_0x6200b8(0x2a0))_0x457be7=loginExpiry*0x3c*0x3e8;else _0x457be7=devices[_0x445ea2][_0x6200b8(0x23e)][_0x6200b8(0x2d3)]*0x3c*0x3e8-(new Date()[_0x6200b8(0x234)]()-devices[_0x445ea2]['telegramIpApproval'][_0x6200b8(0x22e)]);if(devices[_0x445ea2]['pidExpireLogin'])clearTimeout(devices[_0x445ea2][_0x6200b8(0x217)]);devices[_0x445ea2][_0x6200b8(0x217)]=setTimeout(()=>{const _0x5ac825=_0x6200b8;if(devices[_0x445ea2][_0x5ac825(0x20b)])clearTimeout(devices[_0x445ea2][_0x5ac825(0x20b)]);removeSocketListeners(_0x445ea2),addBlacklist(_0x445ea2),devices[_0x445ea2][_0x5ac825(0x23e)]=null,devices[_0x445ea2][_0x5ac825(0x2d0)]=null,devices[_0x445ea2][_0x5ac825(0x255)]['token']=null,devices[_0x445ea2][_0x5ac825(0x255)]=validateAccess(devices[_0x445ea2][_0x5ac825(0x255)][_0x5ac825(0x2f8)],_0x445ea2),!(devices[_0x445ea2][_0x5ac825(0x255)][_0x5ac825(0x219)]&&devices[_0x445ea2]['access']['reason']==_0x5ac825(0x2fb))&&(_0x1b13df=='login'?io['to'](_0x445ea2)[_0x5ac825(0x295)](_0x5ac825(0x2ef),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x445ea2)[_0x5ac825(0x295)]('status',{'access':{'allow':![],'reason':_0x5ac825(0x2cd),'token':null}})),devices[_0x445ea2][_0x5ac825(0x255)][_0x5ac825(0x2f8)]=null;},_0x457be7);}function setTokenRefresh(_0x300bb8){if(devices[_0x300bb8]['pidRefreshToken'])clearTimeout(devices[_0x300bb8]['pidRefreshToken']);devices[_0x300bb8]['pidRefreshToken']=setTimeout(()=>{const _0x1ead70=_0x3694;getClientsWithUuid(_0x300bb8)['length']!=0x0?(devices[_0x300bb8][_0x1ead70(0x255)]=refreshToken(_0x300bb8),io['to'](_0x300bb8)[_0x1ead70(0x295)]('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x300bb8][_0x1ead70(0x255)],'externalip':devices[_0x300bb8]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x300bb8)):clearTimeout(devices[_0x300bb8][_0x1ead70(0x20b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2995f8){const _0x260344=_0x364c62,_0x36a8c5=getClient(_0x2995f8['id'])[_0x260344(0x2b9)];_0x2995f8[_0x260344(0x295)]('bots',config),_0x2995f8[_0x260344(0x295)](_0x260344(0x223),cleanSettings()),_0x2995f8['on'](_0x260344(0x1eb),_0xbe3dbb=>{const _0x4f005d=_0x260344;if(validateAccess(_0xbe3dbb,_0x36a8c5)[_0x4f005d(0x219)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x2995f8['on'](_0x260344(0x2de),(_0x1ec29c,_0x3483f0)=>{const _0x2bc71b=_0x260344;if(validateAccess(_0x3483f0,_0x36a8c5)[_0x2bc71b(0x219)])toggleBot(_0x1ec29c['botID'],_0x1ec29c['status'],_0x1ec29c[_0x2bc71b(0x2ae)]);else logging(_0x2bc71b(0x2eb));}),_0x2995f8['on'](_0x260344(0x26d),(_0xdadb51,_0x3711a5)=>{const _0x366e66=_0x260344;if(validateAccess(_0x3711a5,_0x36a8c5)['allow'])toggleBotMode(_0xdadb51);else logging(_0x366e66(0x2eb));}),_0x2995f8['on'](_0x260344(0x2da),(_0x504d9d,_0x5803f7)=>{const _0x15cc1a=_0x260344;if(validateAccess(_0x5803f7,_0x36a8c5)[_0x15cc1a(0x219)])deleteBot(_0x504d9d);else logging(_0x15cc1a(0x2c9));}),_0x2995f8['on'](_0x260344(0x33a),(_0x184202,_0x15e7d3)=>{const _0x33364f=_0x260344;if(validateAccess(_0x15e7d3,_0x36a8c5)[_0x33364f(0x219)])storeSettings(_0x184202,!![]);else logging(_0x33364f(0x313));}),_0x2995f8['on'](_0x260344(0x330),_0x35c3c2=>{const _0x4f49da=_0x260344;if(validateAccess(_0x35c3c2,_0x36a8c5)[_0x4f49da(0x219)])updateBB();else logging(_0x4f49da(0x256));}),_0x2995f8['on'](_0x260344(0x238),_0x38e250=>{const _0x4e2871=_0x260344;if(validateAccess(_0x38e250,_0x36a8c5)[_0x4e2871(0x219)]){if(devices[_0x36a8c5][_0x4e2871(0x20b)])clearTimeout(devices[_0x36a8c5][_0x4e2871(0x20b)]);if(devices[_0x36a8c5]['pidExpireLogin'])clearTimeout(devices[_0x36a8c5]['pidExpireLogin']);removeSocketListeners(getClient(_0x2995f8['id'])[_0x4e2871(0x2b9)]),addBlacklist(_0x36a8c5),devices[_0x36a8c5][_0x4e2871(0x23e)]=null,devices[_0x36a8c5]['telegram2FaApproval']=null,devices[_0x36a8c5][_0x4e2871(0x255)][_0x4e2871(0x2f8)]=null,io['to'](getClient(_0x2995f8['id'])[_0x4e2871(0x2b9)])['emit'](_0x4e2871(0x2ef),{'access':{'allow':![],'reason':_0x4e2871(0x290),'token':null}});}else logging(_0x4e2871(0x2cc));});}function initializeSocketBot(_0x122f57){const _0x450341=_0x364c62,_0x331b4f=getClient(_0x122f57['id'])[_0x450341(0x2e1)],_0x410841=getClient(_0x122f57['id'])[_0x450341(0x2b9)];_0x122f57['on'](_0x450341(0x2c7),(_0x4f8fbf,_0x9285b3)=>{const _0x533471=_0x450341;if(validateAccess(_0x9285b3,_0x410841)['allow']){if(pid[_0x331b4f])pid[_0x331b4f][_0x533471(0x298)]({'function':_0x533471(0x2aa),'args':_0x4f8fbf});}else logging(_0x533471(0x265));}),_0x122f57['on']('delete-alerts',(_0xc788e1,_0x3595a6)=>{const _0x516a22=_0x450341;if(validateAccess(_0x3595a6,_0x410841)[_0x516a22(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f][_0x516a22(0x298)]({'function':_0x516a22(0x227),'args':_0xc788e1});}else logging(_0x516a22(0x2ac));}),_0x122f57['on'](_0x450341(0x29d),(_0x5d1e65,_0x1b41e1)=>{const _0xc2f0d8=_0x450341;if(validateAccess(_0x1b41e1,_0x410841)[_0xc2f0d8(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f]['send']({'function':_0xc2f0d8(0x253),'args':_0x5d1e65});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x122f57['on'](_0x450341(0x204),(_0x1ac386,_0x55d124)=>{const _0x318a9b=_0x450341;if(validateAccess(_0x55d124,_0x410841)[_0x318a9b(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f]['send']({'function':'storeConfiguration','args':_0x1ac386});}else logging(_0x318a9b(0x225));}),_0x122f57['on'](_0x450341(0x2a3),(_0x842cc7,_0x53ad30)=>{const _0x28f441=_0x450341;if(validateAccess(_0x53ad30,_0x410841)['allow']){if(pid[_0x331b4f])pid[_0x331b4f][_0x28f441(0x298)]({'function':_0x28f441(0x25a),'args':_0x842cc7});}else logging(_0x28f441(0x2dc));}),_0x122f57['on'](_0x450341(0x1e9),_0x50dd64=>{const _0x519ad4=_0x450341;if(validateAccess(_0x50dd64,_0x410841)[_0x519ad4(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f][_0x519ad4(0x298)]({'function':'getStartingBalances','args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x122f57['on'](_0x450341(0x2fd),(_0x4cb4bc,_0x41c49c)=>{const _0x13d42f=_0x450341;if(validateAccess(_0x41c49c,_0x410841)[_0x13d42f(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f][_0x13d42f(0x298)]({'function':_0x13d42f(0x23f),'args':_0x4cb4bc});}else logging(_0x13d42f(0x287));}),_0x122f57['on'](_0x450341(0x337),_0x1cdfb1=>{const _0x18ecef=_0x450341;if(validateAccess(_0x1cdfb1,_0x410841)[_0x18ecef(0x219)]){if(pid[_0x331b4f])pid[_0x331b4f][_0x18ecef(0x298)]({'function':_0x18ecef(0x315),'args':null});}else logging(_0x18ecef(0x245));}),_0x122f57['on'](_0x450341(0x238),_0x469b37=>{const _0x1948af=_0x450341;if(validateAccess(_0x469b37,_0x410841)[_0x1948af(0x219)]){if(devices[_0x410841][_0x1948af(0x20b)])clearTimeout(devices[_0x410841][_0x1948af(0x20b)]);if(devices[_0x410841]['pidExpireLogin'])clearTimeout(devices[_0x410841][_0x1948af(0x217)]);removeSocketListeners(getClient(_0x122f57['id'])[_0x1948af(0x2b9)]),addBlacklist(_0x410841),devices[_0x410841][_0x1948af(0x23e)]=null,devices[_0x410841][_0x1948af(0x2d0)]=null,devices[_0x410841][_0x1948af(0x255)][_0x1948af(0x2f8)]=null,io['to'](getClient(_0x122f57['id'])[_0x1948af(0x2b9)])[_0x1948af(0x295)](_0x1948af(0x2ef),{'access':{'allow':![],'reason':_0x1948af(0x290),'token':null}});}else logging(_0x1948af(0x2cc));});}function removeSocketListeners(_0x5d1999){getClientsWithUuid(_0x5d1999)['forEach'](_0x47a638=>{const _0xb75eba=_0x3694;getSocket(_0x47a638['id'])[_0xb75eba(0x297)]();});}function cleanSettings(){const _0x411db4=_0x364c62;let _0x2f0666=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x2f0666={..._0x2f0666,'telegramToken':_0x411db4(0x31a)}),settings[_0x411db4(0x2b0)]&&settings[_0x411db4(0x2b0)]!=''&&(_0x2f0666={..._0x2f0666,'bbPassword':_0x411db4(0x31a)}),_0x2f0666;}function updateBB(){const _0x1f95c5=_0x364c62;installingUpdate=!![],config[_0x1f95c5(0x322)](_0x1de21e=>{const _0x3fa32f=_0x1f95c5;restartBot(_0x1de21e[_0x3fa32f(0x338)]);}),process[_0x1f95c5(0x298)]({'update':!![]},_0x4d7816=>{});}function startBot(_0x198124,_0x5bec62,_0x3c4a52){const _0xcc124a=_0x364c62;let _0x3021d4=![];const _0x208a2d=_0x198124[0x0];_0x5bec62={..._0x5bec62,'stdio':[_0xcc124a(0x263),'inherit',_0xcc124a(0x263),_0xcc124a(0x20e)]},pid[_0x208a2d]=childProcess[_0xcc124a(0x239)](botfile,_0x198124,_0x5bec62),pid[_0x208a2d]['on']('message',_0x2107dc=>{const _0x4a7bf5=_0xcc124a;switch(Object[_0x4a7bf5(0x1e8)](_0x2107dc)[0x0]){case _0x4a7bf5(0x29e):updateBotName(_0x208a2d,_0x2107dc[_0x4a7bf5(0x29e)]);break;case _0x4a7bf5(0x209):updateBotManager();break;case _0x4a7bf5(0x2ef):updateStatus(_0x208a2d,_0x2107dc[_0x4a7bf5(0x2ef)]);break;case _0x4a7bf5(0x2ae):updateLive(_0x208a2d,_0x2107dc[_0x4a7bf5(0x2ae)]);break;case _0x4a7bf5(0x224):updateLive(_0x208a2d,_0x2107dc['started']),io['to'](_0x208a2d)[_0x4a7bf5(0x295)](_0x4a7bf5(0x2ef),{'access':{'allow':![],'reason':_0x4a7bf5(0x215),'token':null}});break;case _0x4a7bf5(0x249):_0x2107dc['stop']==_0x4a7bf5(0x232)&&restartBot(_0x208a2d);_0x2107dc[_0x4a7bf5(0x249)]==_0x4a7bf5(0x317)&&toggleBot(_0x208a2d,_0x4a7bf5(0x2e6),_0x4a7bf5(0x319));break;case _0x4a7bf5(0x312):sendTelegram(_0x208a2d,_0x2107dc[_0x4a7bf5(0x312)]);break;case _0x4a7bf5(0x2f4):sendTelegramMsg(_0x2107dc[_0x4a7bf5(0x2f4)]);break;case _0x4a7bf5(0x271):io['to'](_0x208a2d)[_0x4a7bf5(0x295)](_0x2107dc['function'],_0x2107dc[_0x4a7bf5(0x254)]);break;}}),pid[_0x208a2d]['on'](_0xcc124a(0x328),function(_0x81063c){if(_0x3021d4)return;_0x3021d4=!![],_0x3c4a52(_0x81063c);}),pid[_0x208a2d]['on'](_0xcc124a(0x32f),function(_0x27c2ee){const _0x17d833=_0xcc124a;if(installingUpdate)return;if(_0x3021d4)return;_0x3021d4=!![],_0x3c4a52(null);const _0x393b31=dbConfig[_0x17d833(0x2c8)](_0x17d833(0x293))[_0x17d833(0x1f7)]({'botID':_0x208a2d})[_0x17d833(0x2ab)]();_0x393b31&&(_0x393b31[_0x17d833(0x2ef)]==_0x17d833(0x277)||_0x393b31[_0x17d833(0x2ef)]==_0x17d833(0x2f2))&&(updateLive(_0x208a2d,_0x17d833(0x319)),logging(_0x17d833(0x20f)+_0x208a2d),startBot([_0x208a2d,userID],{'cwd':bbpath},function(_0x5d9469){if(_0x5d9469)logging(_0x5d9469);}));});}function stopBot(_0x3af558){const _0x47e2f9=_0x364c62;getClientsWithBotID(_0x3af558)[_0x47e2f9(0x322)](_0x4db5b9=>{const _0x218130=_0x47e2f9;getSocket(_0x4db5b9['id'])[_0x218130(0x2c6)](!![]),removeClient(_0x4db5b9['id']);}),pid[_0x3af558]&&(pid[_0x3af558][_0x47e2f9(0x317)](),pid[_0x3af558]=null);}function restartBot(_0x1e3b0a){const _0x5d2c7e=_0x364c62;if(pid[_0x1e3b0a])pid[_0x1e3b0a][_0x5d2c7e(0x317)]();}function addBot(){const _0x3a76c7=_0x364c62;let _0x59a6ca;for(let _0x14782f=0x1;_0x14782f<0x3e9;_0x14782f++){_0x59a6ca=_0x14782f['toString']()[_0x3a76c7(0x262)](0x3,'0');let _0x13abbb=config[_0x3a76c7(0x1f7)](_0x57e588=>_0x57e588['botID']==_0x59a6ca);if(!_0x13abbb)break;}if(_0x59a6ca===_0x3a76c7(0x2c0)){logging(_0x3a76c7(0x270));return;}logging(_0x3a76c7(0x2d1)+_0x59a6ca),dbConfig[_0x3a76c7(0x2c8)]('bots')[_0x3a76c7(0x333)]({'botID':_0x59a6ca,'botname':_0x3a76c7(0x1fa)+_0x59a6ca,'status':_0x3a76c7(0x2f2),'live':''})[_0x3a76c7(0x31c)](),startBot([_0x59a6ca,userID],{'cwd':bbpath},function(_0x479e3b){if(_0x479e3b)logging(_0x479e3b);}),config=getConfiguration(),io['to'](_0x3a76c7(0x268))[_0x3a76c7(0x295)](_0x3a76c7(0x293),config);}function deleteBot(_0x87df88){const _0x3da1ae=_0x364c62;getClientsWithBotID(_0x87df88)[_0x3da1ae(0x322)](_0x384d2f=>{const _0x59ba72=_0x3da1ae;getSocket(_0x384d2f['id'])[_0x59ba72(0x2c6)](!![]),removeClient(_0x384d2f['id']);}),dbConfig[_0x3da1ae(0x2c8)](_0x3da1ae(0x293))[_0x3da1ae(0x21c)]({'botID':_0x87df88})['write'](),logging('deleted\x20Bot\x20'+_0x87df88),stopBot(_0x87df88);try{fs['unlinkSync'](path['join'](configpath,_0x3da1ae(0x29c)+_0x87df88+_0x3da1ae(0x237))),fs[_0x3da1ae(0x264)](path[_0x3da1ae(0x32e)](configpath,_0x3da1ae(0x29c)+_0x87df88+_0x3da1ae(0x241))),fs[_0x3da1ae(0x264)](path[_0x3da1ae(0x32e)](configpath,_0x3da1ae(0x29c)+_0x87df88+_0x3da1ae(0x231))),fs[_0x3da1ae(0x264)](path['join'](configpath,_0x3da1ae(0x29c)+_0x87df88+_0x3da1ae(0x308)));}catch(_0x4ac836){if(_0x4ac836)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x4ac836);}config=getConfiguration(),io['to'](_0x3da1ae(0x268))[_0x3da1ae(0x295)]('bots',config);}function toggleBot(_0x178118,_0x2a1b06,_0x217eb5){const _0x3ffe65=_0x364c62;dbConfig[_0x3ffe65(0x2c8)](_0x3ffe65(0x293))[_0x3ffe65(0x1f7)]({'botID':_0x178118})[_0x3ffe65(0x205)]({'status':_0x2a1b06})[_0x3ffe65(0x205)]({'live':_0x217eb5})['write']();if(_0x2a1b06==_0x3ffe65(0x277)||_0x2a1b06==_0x3ffe65(0x2f2))logging('enabled\x20Bot\x20'+_0x178118),startBot([_0x178118,userID],{'cwd':bbpath},function(_0x2e7725){if(_0x2e7725)logging(_0x2e7725);});else(_0x2a1b06==_0x3ffe65(0x2e6)||_0x2a1b06==_0x3ffe65(0x206))&&(logging('disabled\x20Bot\x20'+_0x178118),stopBot(_0x178118));config=getConfiguration(),io['to'](_0x3ffe65(0x268))[_0x3ffe65(0x295)](_0x3ffe65(0x293),config);}function toggleStatus(_0x4cc790){const _0x59c695=_0x364c62;let _0x6f405=dbConfig['get'](_0x59c695(0x293))[_0x59c695(0x1f7)]({'botID':_0x4cc790})[_0x59c695(0x2ab)](),_0x401edc;if(_0x6f405['status']===_0x59c695(0x277))_0x401edc=_0x59c695(0x2e6);else{if(_0x6f405[_0x59c695(0x2ef)]===_0x59c695(0x2f2))_0x401edc='new-disabled';else{if(_0x6f405[_0x59c695(0x2ef)]===_0x59c695(0x206))_0x401edc=_0x59c695(0x2f2);else{if(_0x6f405[_0x59c695(0x2ef)]==='disabled')_0x401edc=_0x59c695(0x277);}}}return _0x401edc;}function updateStatus(_0x3e3740,_0x119cfb){const _0x686299=_0x364c62;dbConfig[_0x686299(0x2c8)](_0x686299(0x293))[_0x686299(0x1f7)]({'botID':_0x3e3740})[_0x686299(0x205)]({'status':_0x119cfb})[_0x686299(0x31c)](),config=getConfiguration(),io['to'](_0x686299(0x268))[_0x686299(0x295)](_0x686299(0x293),config);}function updateLive(_0x5ee7ce,_0x2fa90a){const _0x2f8e04=_0x364c62;dbConfig[_0x2f8e04(0x2c8)](_0x2f8e04(0x293))[_0x2f8e04(0x1f7)]({'botID':_0x5ee7ce})[_0x2f8e04(0x205)]({'live':_0x2fa90a})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x2f8e04(0x295)](_0x2f8e04(0x293),config);}function updateBotName(_0x2557ae,_0x5beb02){const _0x465cd3=_0x364c62;dbConfig[_0x465cd3(0x2c8)](_0x465cd3(0x293))[_0x465cd3(0x1f7)]({'botID':_0x2557ae})[_0x465cd3(0x205)]({'botname':_0x5beb02})['write'](),config=getConfiguration(),io['to'](_0x465cd3(0x268))[_0x465cd3(0x295)]('bots',config);}function updateBotManager(){const _0x5790a3=_0x364c62;config=getConfiguration(),io['to'](_0x5790a3(0x268))[_0x5790a3(0x295)](_0x5790a3(0x293),config);}function toggleBotMode(_0xaa8be8){const _0x464dc2=_0x364c62;if(pid[_0xaa8be8])pid[_0xaa8be8][_0x464dc2(0x298)]({'function':_0x464dc2(0x2ed),'args':null});else{const _0x213193=configpath+_0x464dc2(0x29c)+_0xaa8be8+'-config.json',_0xff883=fs['readFileSync'](_0x213193),_0x26ad8a=JSON[_0x464dc2(0x21a)](_0xff883),_0x33f276=_0x26ad8a['bot'][0x0]['headless'];_0x26ad8a[_0x464dc2(0x2e1)][0x0][_0x464dc2(0x2c4)]=!_0x33f276;const _0x5acc0a=JSON[_0x464dc2(0x1f6)](_0x26ad8a,null,0x2);fs[_0x464dc2(0x27b)](_0x213193,_0x5acc0a),config=getConfiguration(),io['to'](_0x464dc2(0x268))[_0x464dc2(0x295)](_0x464dc2(0x293),config);}}function telegramError(_0x5e59fb){const _0x316c0d=_0x364c62;console[_0x316c0d(0x2f3)](getTimeStamp()+_0x316c0d(0x29b));}function validateTelegram(_0x47ca90){const _0x4a3005=_0x364c62;if(_0x47ca90[_0x4a3005(0x1e3)][_0x4a3005(0x1de)]!=settings['telegramUsername']&&'@'+_0x47ca90[_0x4a3005(0x1e3)][_0x4a3005(0x1de)]!=settings[_0x4a3005(0x33e)])return tgBot[_0x4a3005(0x2b7)](_0x47ca90['chat']['id'],_0x4a3005(0x26f),{'parse_mode':_0x4a3005(0x300)})['catch'](_0x1b1072=>{telegramError(_0x1b1072);}),![];return!![];}async function initTelegram(){const _0x37405f=_0x364c62;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x37405f(0x284)],{'polling':!![]});let _0x58bb5c=_0x37405f(0x216);_0x58bb5c+='\x0a',_0x58bb5c+='/enable\x20-\x20enable\x20notifications\x0a',_0x58bb5c+=_0x37405f(0x24e),_0x58bb5c+=_0x37405f(0x229),_0x58bb5c+=_0x37405f(0x279),_0x58bb5c+=_0x37405f(0x2fc),_0x58bb5c+='/off\x20-\x20stop\x20bot(s)\x0a',_0x58bb5c+=_0x37405f(0x1e4),_0x58bb5c+=_0x37405f(0x259),_0x58bb5c+=_0x37405f(0x29a),_0x58bb5c+=_0x37405f(0x20c),_0x58bb5c+=_0x37405f(0x275);let _0x34cdf5='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x34cdf5+='\x0a',_0x34cdf5+=_0x58bb5c,tgBot[_0x37405f(0x2d4)](/\/start/,_0xf49ebe=>{const _0x566c0d=_0x37405f;if(!validateTelegram(_0xf49ebe))return;if(settings[_0x566c0d(0x2db)]!=_0xf49ebe['chat']['id'])updateSetting('telegramChatId',_0xf49ebe[_0x566c0d(0x281)]['id']);updateSetting(_0x566c0d(0x28c),!![]),tgBot[_0x566c0d(0x2b7)](_0xf49ebe['chat']['id'],_0x34cdf5)[_0x566c0d(0x320)](_0x2c7824=>{telegramError(_0x2c7824);});}),tgBot[_0x37405f(0x2d4)](/\/enable/,_0x3a48f0=>{const _0x192ebd=_0x37405f;if(!validateTelegram(_0x3a48f0))return;if(settings[_0x192ebd(0x2db)]!=_0x3a48f0[_0x192ebd(0x281)]['id'])updateSetting('telegramChatId',_0x3a48f0['chat']['id']);updateSetting(_0x192ebd(0x28c),!![]),tgBot[_0x192ebd(0x2b7)](_0x3a48f0[_0x192ebd(0x281)]['id'],'Notifications\x20enabled')[_0x192ebd(0x320)](_0x24fc5d=>{telegramError(_0x24fc5d);});}),tgBot[_0x37405f(0x2d4)](/\/config/,async _0x2ace69=>{const _0x22c21d=_0x37405f;if(!validateTelegram(_0x2ace69))return;tgBot[_0x22c21d(0x27a)](_0x22c21d(0x23c)),tgBot[_0x22c21d(0x2b7)](_0x2ace69['chat']['id'],_0x22c21d(0x1f5),{'reply_markup':{'inline_keyboard':[[{'text':_0x22c21d(0x24a),'callback_data':_0x22c21d(0x2a4)},{'text':_0x22c21d(0x25f),'callback_data':_0x22c21d(0x32d)},{'text':_0x22c21d(0x2ad),'callback_data':_0x22c21d(0x269)}]]}})[_0x22c21d(0x320)](_0x34ae88=>{telegramError(_0x34ae88);}),tgBot['on'](_0x22c21d(0x23c),async _0xaff2ae=>{const _0x1bf89e=_0x22c21d,_0x1c5104=_0xaff2ae[_0x1bf89e(0x22b)],_0xa4cdca=_0xaff2ae[_0x1bf89e(0x207)];tgBot[_0x1bf89e(0x24c)](_0xaff2ae['id'])[_0x1bf89e(0x2e2)](async()=>{const _0xadb23b=_0x1bf89e;_0x1c5104==_0xadb23b(0x2a4)&&(updateSetting(_0xadb23b(0x2d9),_0xadb23b(0x2a4)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0xa4cdca[_0xadb23b(0x281)]['id'],_0xadb23b(0x2f0))[_0xadb23b(0x320)](_0x11c361=>{telegramError(_0x11c361);}));_0x1c5104==_0xadb23b(0x32d)&&(updateSetting(_0xadb23b(0x2d9),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0xadb23b(0x2b7)](_0xa4cdca['chat']['id'],_0xadb23b(0x28d))[_0xadb23b(0x320)](_0x3c548e=>{telegramError(_0x3c548e);}));_0x1c5104==_0xadb23b(0x269)&&(updateSetting(_0xadb23b(0x2d9),_0xadb23b(0x269)),updateSetting(_0xadb23b(0x28c),!![]),await tgBot[_0xadb23b(0x2b7)](_0xa4cdca[_0xadb23b(0x281)]['id'],_0xadb23b(0x288))[_0xadb23b(0x320)](_0x199d9d=>{telegramError(_0x199d9d);}));if(!settings[_0xadb23b(0x2db)])tgBot['sendMessage'](_0xa4cdca[_0xadb23b(0x281)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x574a77=>{telegramError(_0x574a77);});}),tgBot[_0x1bf89e(0x27a)](_0x1bf89e(0x23c));});}),tgBot[_0x37405f(0x2d4)](/\/status/,_0x209a04=>{const _0xa8c5bf=_0x37405f;if(!validateTelegram(_0x209a04))return;const _0xe5bddc=getBotsWithMode();let _0x41bd46=_0xa8c5bf(0x220);config['forEach'](_0x571b03=>{const _0xc7ce5f=_0xa8c5bf,_0x14d65f=_0xe5bddc[_0xc7ce5f(0x1f7)](_0x151f97=>_0x151f97[_0xc7ce5f(0x338)]==_0x571b03[_0xc7ce5f(0x338)])[_0xc7ce5f(0x331)];_0x41bd46+=_0xc7ce5f(0x1fa)+_0x571b03[_0xc7ce5f(0x338)]+':\x20'+_0x571b03[_0xc7ce5f(0x2ef)]+_0xc7ce5f(0x2bf)+_0x14d65f+_0xc7ce5f(0x2bf)+_0x571b03[_0xc7ce5f(0x2ae)]+'\x0a';}),_0x41bd46+='\x0a',_0x41bd46+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x41bd46+=!settings[_0xa8c5bf(0x28c)]?_0xa8c5bf(0x292):_0xa8c5bf(0x1f3),_0x41bd46+=settings[_0xa8c5bf(0x28c)]?settings['telegramEvents']==_0xa8c5bf(0x269)?_0xa8c5bf(0x2a1):'Notifications\x20types:\x20'+settings[_0xa8c5bf(0x2d9)]+_0xa8c5bf(0x235):'',tgBot[_0xa8c5bf(0x2b7)](_0x209a04['chat']['id'],_0x41bd46,{'parse_mode':_0xa8c5bf(0x300)})[_0xa8c5bf(0x320)](_0xccc750=>{telegramError(_0xccc750);});}),tgBot['onText'](/\/restart/,_0x5d28d4=>{const _0x1b816e=_0x37405f;if(!validateTelegram(_0x5d28d4))return;tgBot[_0x1b816e(0x27a)](_0x1b816e(0x23c));const _0x11bab7=getEnabledBots();if(_0x11bab7['length']==0x0)tgBot['sendMessage'](_0x5d28d4[_0x1b816e(0x281)]['id'],_0x1b816e(0x252))[_0x1b816e(0x320)](_0x36bace=>{telegramError(_0x36bace);});else{if(_0x11bab7['length']>0x1)_0x11bab7['push']({'botID':_0x1b816e(0x269)});let _0x1656a2=[],_0x1ec2f2=[];const _0x463a51=_0x11bab7[_0x1b816e(0x267)]%0x4==0x0||_0x11bab7['length']%0x4==0x3||_0x11bab7[_0x1b816e(0x267)]%0x3==0x1?0x4:0x3;let _0x48df17=0x0;_0x11bab7['forEach']((_0x448993,_0x590cb3)=>{const _0xcb1d75=_0x1b816e;if(_0x590cb3%_0x463a51==0x0)_0x1ec2f2=[];_0x1ec2f2[_0xcb1d75(0x333)]({'text':_0x448993['botID']==_0xcb1d75(0x269)?_0xcb1d75(0x336):'Bot\x20'+_0x448993[_0xcb1d75(0x338)],'callback_data':_0x448993['botID']}),_0x590cb3%_0x463a51==0x0&&(_0x1656a2[_0x48df17]=_0x1ec2f2,_0x48df17++);}),tgBot[_0x1b816e(0x2b7)](_0x5d28d4[_0x1b816e(0x281)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x1656a2}})[_0x1b816e(0x320)](_0x364f76=>{telegramError(_0x364f76);}),tgBot['on']('callback_query',async _0x255ee3=>{const _0x18f04d=_0x1b816e,_0x46aaf0=_0x255ee3['data'],_0x19002a=_0x255ee3[_0x18f04d(0x207)];tgBot[_0x18f04d(0x24c)](_0x255ee3['id'])[_0x18f04d(0x2e2)](async()=>{const _0x16e8d9=_0x18f04d;_0x46aaf0==_0x16e8d9(0x269)?(tgBot[_0x16e8d9(0x2b7)](_0x19002a[_0x16e8d9(0x281)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x536bde=>{telegramError(_0x536bde);}),config[_0x16e8d9(0x322)](_0xf3b668=>{const _0x1bd74a=_0x16e8d9;restartBot(_0xf3b668[_0x1bd74a(0x338)]);})):(tgBot[_0x16e8d9(0x2b7)](_0x19002a['chat']['id'],_0x16e8d9(0x26a)+_0x46aaf0)[_0x16e8d9(0x320)](_0x438431=>{telegramError(_0x438431);}),restartBot(_0x46aaf0));}),tgBot[_0x18f04d(0x27a)](_0x18f04d(0x23c));});}}),tgBot[_0x37405f(0x2d4)](/\/on/,_0x2e4181=>{const _0x198687=_0x37405f;if(!validateTelegram(_0x2e4181))return;tgBot[_0x198687(0x27a)]('callback_query');const _0x2162e6=getDisabledBots();if(_0x2162e6[_0x198687(0x267)]==0x0)tgBot[_0x198687(0x2b7)](_0x2e4181[_0x198687(0x281)]['id'],_0x198687(0x2b8))[_0x198687(0x320)](_0x148266=>{telegramError(_0x148266);});else{if(_0x2162e6['length']>0x1)_0x2162e6['push']({'botID':_0x198687(0x269)});let _0x46961d=[],_0xc078ac=[];const _0x4e402f=_0x2162e6['length']%0x4==0x0||_0x2162e6[_0x198687(0x267)]%0x4==0x3||_0x2162e6['length']%0x3==0x1?0x4:0x3;let _0x4c3175=0x0;_0x2162e6['forEach']((_0x4eb01a,_0x494129)=>{const _0x11ab3b=_0x198687;if(_0x494129%_0x4e402f==0x0)_0xc078ac=[];_0xc078ac[_0x11ab3b(0x333)]({'text':_0x4eb01a[_0x11ab3b(0x338)]==_0x11ab3b(0x269)?_0x11ab3b(0x336):_0x11ab3b(0x1fa)+_0x4eb01a[_0x11ab3b(0x338)],'callback_data':_0x4eb01a[_0x11ab3b(0x338)]}),_0x494129%_0x4e402f==0x0&&(_0x46961d[_0x4c3175]=_0xc078ac,_0x4c3175++);}),tgBot[_0x198687(0x2b7)](_0x2e4181[_0x198687(0x281)]['id'],_0x198687(0x31d),{'reply_markup':{'inline_keyboard':_0x46961d}})[_0x198687(0x320)](_0x2a5bd6=>{telegramError(_0x2a5bd6);}),tgBot['on']('callback_query',async _0x125784=>{const _0x57c3d4=_0x198687,_0x23ffeb=_0x125784[_0x57c3d4(0x22b)],_0x53740e=_0x125784[_0x57c3d4(0x207)];tgBot[_0x57c3d4(0x24c)](_0x125784['id'])[_0x57c3d4(0x2e2)](async()=>{const _0x74b628=_0x57c3d4;_0x23ffeb==_0x74b628(0x269)?(tgBot[_0x74b628(0x2b7)](_0x53740e[_0x74b628(0x281)]['id'],_0x74b628(0x226))[_0x74b628(0x320)](_0x5b78db=>{telegramError(_0x5b78db);}),_0x2162e6[_0x74b628(0x322)](_0x5c74bc=>{const _0x1089bc=_0x74b628;if(_0x5c74bc[_0x1089bc(0x338)]!=_0x1089bc(0x269))toggleBot(_0x5c74bc[_0x1089bc(0x338)],toggleStatus(_0x5c74bc[_0x1089bc(0x338)]),_0x1089bc(0x319));})):(tgBot[_0x74b628(0x2b7)](_0x53740e['chat']['id'],_0x74b628(0x307)+_0x23ffeb)[_0x74b628(0x320)](_0x5c4bd2=>{telegramError(_0x5c4bd2);}),toggleBot(_0x23ffeb,toggleStatus(_0x23ffeb),_0x74b628(0x319)));}),tgBot[_0x57c3d4(0x27a)](_0x57c3d4(0x23c));});}}),tgBot[_0x37405f(0x2d4)](/\/off/,_0x1ab5ca=>{const _0x4838b1=_0x37405f;if(!validateTelegram(_0x1ab5ca))return;tgBot[_0x4838b1(0x27a)](_0x4838b1(0x23c));const _0x2c8d1e=getEnabledBots();if(_0x2c8d1e[_0x4838b1(0x267)]==0x0)tgBot[_0x4838b1(0x2b7)](_0x1ab5ca[_0x4838b1(0x281)]['id'],_0x4838b1(0x252))[_0x4838b1(0x320)](_0x410e35=>{telegramError(_0x410e35);});else{if(_0x2c8d1e['length']>0x1)_0x2c8d1e[_0x4838b1(0x333)]({'botID':_0x4838b1(0x269)});let _0x3ef179=[],_0x2e148b=[];const _0x4b83d8=_0x2c8d1e[_0x4838b1(0x267)]%0x4==0x0||_0x2c8d1e[_0x4838b1(0x267)]%0x4==0x3||_0x2c8d1e['length']%0x3==0x1?0x4:0x3;let _0x5c5c24=0x0;_0x2c8d1e[_0x4838b1(0x322)]((_0x61a2ab,_0x111b0d)=>{const _0x241176=_0x4838b1;if(_0x111b0d%_0x4b83d8==0x0)_0x2e148b=[];_0x2e148b['push']({'text':_0x61a2ab[_0x241176(0x338)]=='all'?_0x241176(0x336):_0x241176(0x1fa)+_0x61a2ab[_0x241176(0x338)],'callback_data':_0x61a2ab[_0x241176(0x338)]}),_0x111b0d%_0x4b83d8==0x0&&(_0x3ef179[_0x5c5c24]=_0x2e148b,_0x5c5c24++);}),tgBot[_0x4838b1(0x2b7)](_0x1ab5ca[_0x4838b1(0x281)]['id'],_0x4838b1(0x2cf),{'reply_markup':{'inline_keyboard':_0x3ef179}})['catch'](_0x491ff7=>{telegramError(_0x491ff7);}),tgBot['on'](_0x4838b1(0x23c),async _0x39460f=>{const _0x283aec=_0x4838b1,_0x1ecf8b=_0x39460f['data'],_0x264300=_0x39460f[_0x283aec(0x207)];tgBot[_0x283aec(0x24c)](_0x39460f['id'])[_0x283aec(0x2e2)](async()=>{const _0x4ac082=_0x283aec;_0x1ecf8b==_0x4ac082(0x269)?(tgBot[_0x4ac082(0x2b7)](_0x264300[_0x4ac082(0x281)]['id'],_0x4ac082(0x2ce))[_0x4ac082(0x320)](_0x89268d=>{telegramError(_0x89268d);}),_0x2c8d1e['forEach'](_0x21aa8e=>{const _0x69cc70=_0x4ac082;if(_0x21aa8e['botID']!='all')toggleBot(_0x21aa8e[_0x69cc70(0x338)],toggleStatus(_0x21aa8e[_0x69cc70(0x338)]),_0x69cc70(0x319));})):(tgBot['sendMessage'](_0x264300[_0x4ac082(0x281)]['id'],_0x4ac082(0x2f7)+_0x1ecf8b)[_0x4ac082(0x320)](_0x3f9323=>{telegramError(_0x3f9323);}),toggleBot(_0x1ecf8b,toggleStatus(_0x1ecf8b),_0x4ac082(0x319)));}),tgBot[_0x283aec(0x27a)]('callback_query');});}}),tgBot[_0x37405f(0x2d4)](/\/portfolio/,_0x5025ab=>{const _0x33da43=_0x37405f;if(!validateTelegram(_0x5025ab))return;tgBot[_0x33da43(0x27a)](_0x33da43(0x23c));const _0x311359=getEnabledBots();if(_0x311359[_0x33da43(0x267)]==0x0)tgBot[_0x33da43(0x2b7)](_0x5025ab['chat']['id'],_0x33da43(0x252))[_0x33da43(0x320)](_0x59575f=>{telegramError(_0x59575f);});else{if(_0x311359[_0x33da43(0x267)]>0x1){let _0x1b5b1c=[],_0x3914c6=[];const _0x1999c4=_0x311359[_0x33da43(0x267)]%0x4==0x0||_0x311359[_0x33da43(0x267)]%0x4==0x3||_0x311359[_0x33da43(0x267)]%0x3==0x1?0x4:0x3;let _0x3dce92=0x0;_0x311359['forEach']((_0x34287d,_0x3b8d67)=>{const _0x5c2d03=_0x33da43;if(_0x3b8d67%_0x1999c4==0x0)_0x3914c6=[];_0x3914c6['push']({'text':_0x5c2d03(0x1fa)+_0x34287d[_0x5c2d03(0x338)],'callback_data':_0x34287d[_0x5c2d03(0x338)]}),_0x3b8d67%_0x1999c4==0x0&&(_0x1b5b1c[_0x3dce92]=_0x3914c6,_0x3dce92++);}),tgBot[_0x33da43(0x2b7)](_0x5025ab['chat']['id'],_0x33da43(0x314),{'reply_markup':{'inline_keyboard':_0x1b5b1c}})[_0x33da43(0x320)](_0x3a9ee9=>{telegramError(_0x3a9ee9);}),tgBot['on'](_0x33da43(0x23c),async _0x3bb99f=>{const _0x4d1781=_0x33da43,_0x137a7e=_0x3bb99f[_0x4d1781(0x22b)],_0x1fbe43=_0x3bb99f['message'];tgBot[_0x4d1781(0x24c)](_0x3bb99f['id'])[_0x4d1781(0x2e2)](async()=>{const _0x3bc0f7=_0x4d1781;if(pid[_0x137a7e])pid[_0x137a7e]['send']({'function':_0x3bc0f7(0x21e),'args':null});}),tgBot[_0x4d1781(0x27a)]('callback_query');});}else{const _0x4021df=_0x311359[0x0][_0x33da43(0x338)];if(pid[_0x4021df])pid[_0x4021df][_0x33da43(0x298)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x37405f(0x2d4)](/\/toggle/,_0x589c22=>{const _0xfcc69d=_0x37405f;if(!validateTelegram(_0x589c22))return;tgBot[_0xfcc69d(0x27a)](_0xfcc69d(0x23c));const _0x3e9543=getBotsWithMode();if(_0x3e9543[_0xfcc69d(0x267)]==0x0)tgBot[_0xfcc69d(0x2b7)](_0x589c22[_0xfcc69d(0x281)]['id'],'No\x20bots\x20running\x20right\x20now')[_0xfcc69d(0x320)](_0x3eed05=>{telegramError(_0x3eed05);});else{let _0x320ae1=[],_0x2fb527=[];const _0x8db39a=0x2;let _0x2b5370=0x0;_0x3e9543[_0xfcc69d(0x322)]((_0x14ce99,_0x1909a6)=>{const _0x5a6d75=_0xfcc69d;if(_0x1909a6%_0x8db39a==0x0)_0x2fb527=[];_0x2fb527[_0x5a6d75(0x333)]({'text':_0x5a6d75(0x1fa)+_0x14ce99[_0x5a6d75(0x338)]+'\x20('+_0x14ce99[_0x5a6d75(0x331)]+')','callback_data':_0x14ce99[_0x5a6d75(0x338)]}),_0x1909a6%_0x8db39a==0x0&&(_0x320ae1[_0x2b5370]=_0x2fb527,_0x2b5370++);}),tgBot['sendMessage'](_0x589c22[_0xfcc69d(0x281)]['id'],_0xfcc69d(0x24d),{'reply_markup':{'inline_keyboard':_0x320ae1}})[_0xfcc69d(0x320)](_0x3d91ea=>{telegramError(_0x3d91ea);}),tgBot['on'](_0xfcc69d(0x23c),async _0x2b1de2=>{const _0x39eb3b=_0xfcc69d,_0x229eed=_0x2b1de2[_0x39eb3b(0x22b)],_0x27cd0f=_0x2b1de2[_0x39eb3b(0x207)];tgBot[_0x39eb3b(0x24c)](_0x2b1de2['id'])[_0x39eb3b(0x2e2)](async()=>{const _0x25a84b=_0x39eb3b,_0x557a1c=_0x3e9543['find'](_0x2416ee=>_0x2416ee[_0x25a84b(0x338)]==_0x229eed),_0xa8d474=_0x557a1c[_0x25a84b(0x331)]==_0x25a84b(0x2bc)?_0x25a84b(0x2fe):'auto';tgBot[_0x25a84b(0x2b7)](_0x27cd0f[_0x25a84b(0x281)]['id'],_0x25a84b(0x32b)+_0x229eed+_0x25a84b(0x261)+_0xa8d474+_0x25a84b(0x33f))['catch'](_0x260377=>{telegramError(_0x260377);}),toggleBotMode(_0x229eed);}),tgBot[_0x39eb3b(0x27a)](_0x39eb3b(0x23c));});}}),tgBot[_0x37405f(0x2d4)](/\/names/,_0x4ef95b=>{const _0x221a23=_0x37405f;if(!validateTelegram(_0x4ef95b))return;let _0x2da1b7='';config[_0x221a23(0x322)](_0x23e1b9=>{const _0x4e88c4=_0x221a23;_0x2da1b7+='Bot\x20'+_0x23e1b9['botID']+':\x20'+_0x23e1b9[_0x4e88c4(0x29e)]+'\x0a';}),tgBot['sendMessage'](_0x4ef95b[_0x221a23(0x281)]['id'],_0x2da1b7,{'parse_mode':_0x221a23(0x300)})['catch'](_0x568598=>{telegramError(_0x568598);});}),tgBot[_0x37405f(0x2d4)](/\/disable/,_0x10c080=>{const _0x4337d1=_0x37405f;if(!validateTelegram(_0x10c080))return;tgBot[_0x4337d1(0x2b7)](_0x10c080['chat']['id'],_0x4337d1(0x26b))['catch'](_0x54bf9a=>{telegramError(_0x54bf9a);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x37405f(0x2d4)](/\/help/,_0x84168a=>{const _0x6545c0=_0x37405f;if(!validateTelegram(_0x84168a))return;tgBot[_0x6545c0(0x2b7)](_0x84168a['chat']['id'],_0x58bb5c)[_0x6545c0(0x320)](_0x465707=>{telegramError(_0x465707);});}),tgBot['on']('polling_error',_0x389e90=>{const _0x3e2e01=_0x37405f;_0x389e90[_0x3e2e01(0x211)]()[_0x3e2e01(0x33d)](_0x3e2e01(0x339))&&(logging(_0x3e2e01(0x257)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x3e2e01(0x295)](_0x3e2e01(0x2a7),_0x3e2e01(0x257)));}),process[_0x37405f(0x324)](_0x37405f(0x20d),()=>{const _0x2157e2=_0x37405f;if(tgBot)tgBot[_0x2157e2(0x329)]();process[_0x2157e2(0x32f)](0x1);}),process['once'](_0x37405f(0x285),()=>{const _0x3fbcfe=_0x37405f;if(tgBot)tgBot[_0x3fbcfe(0x329)]();process[_0x3fbcfe(0x32f)](0x1);});}}function disableTelegram(){const _0x1fea41=_0x364c62;tgBot&&(tgBot[_0x1fea41(0x329)](),tgBot=null);}function sendTelegram(_0x5c77d7,_0x2b8c78){const _0x31ab73=_0x364c62;if(settings[_0x31ab73(0x28c)]){if(settings[_0x31ab73(0x2d9)]==_0x31ab73(0x269)||(_0x2b8c78[_0x31ab73(0x309)]==_0x31ab73(0x328)||_0x2b8c78[_0x31ab73(0x309)]==_0x31ab73(0x1f1))&&settings[_0x31ab73(0x2d9)]==_0x31ab73(0x32d)||_0x2b8c78[_0x31ab73(0x309)]==_0x31ab73(0x2e4)&&settings[_0x31ab73(0x2d9)]==_0x31ab73(0x2a4)){if(tgBot&&settings[_0x31ab73(0x2db)]){if(_0x2b8c78[_0x31ab73(0x1f9)])tgBot[_0x31ab73(0x2b7)](settings[_0x31ab73(0x2db)],_0x2b8c78[_0x31ab73(0x29e)]+_0x31ab73(0x2f1)+_0x2b8c78[_0x31ab73(0x1ef)])[_0x31ab73(0x320)](_0x7e85d1=>{telegramError(_0x7e85d1);});else tgBot[_0x31ab73(0x2b7)](settings[_0x31ab73(0x2db)],_0x31ab73(0x1fa)+_0x5c77d7+_0x31ab73(0x2f1)+_0x2b8c78[_0x31ab73(0x1ef)])[_0x31ab73(0x320)](_0x44008e=>{telegramError(_0x44008e);});}}}}function sendTelegramMsg(_0x34f75b){const _0x1af340=_0x364c62;settings[_0x1af340(0x28c)]&&(tgBot&&settings[_0x1af340(0x2db)]&&tgBot[_0x1af340(0x2b7)](settings['telegramChatId'],_0x34f75b,{'parse_mode':_0x1af340(0x300)})[_0x1af340(0x320)](_0x5e2100=>{telegramError(_0x5e2100);}));}function getDeviceWithIp(_0xc36bfa){const _0xbd05b7=_0x364c62;return devices[_0xbd05b7(0x1f7)](_0x466eee=>_0x466eee['ip']===_0xc36bfa);}function temporaryAccess2FA(_0x37f2de,_0xb52df9){const _0x58565f=_0x364c62;let _0x298232=new Date(),_0x4c3d18=![];if(lastIpApproval){if(_0x298232-lastIpApproval<0x1388)_0x4c3d18=!![];}lastIpApproval=new Date();if(_0x4c3d18)return;tgBot&&settings[_0x58565f(0x2db)]&&(tgBot[_0x58565f(0x27a)](_0x58565f(0x23c)),tgBot[_0x58565f(0x2b7)](settings[_0x58565f(0x2db)],_0x58565f(0x1e5)+normalizeIP(_0xb52df9)[_0x58565f(0x221)]+_0x58565f(0x200),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x58565f(0x289),'callback_data':'5'},{'text':_0x58565f(0x23b),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x58565f(0x2c5),'callback_data':_0x58565f(0x2c5)}]]}})['catch'](_0x33526c=>{telegramError(_0x33526c);}),tgBot['on'](_0x58565f(0x23c),async _0x4a053f=>{const _0x1ce278=_0x58565f,_0x198db1=_0x4a053f[_0x1ce278(0x22b)],_0x4797ab=_0x4a053f[_0x1ce278(0x207)];tgBot[_0x1ce278(0x24c)](_0x4a053f['id'])['then'](async()=>{const _0xb1b963=_0x1ce278;devices[_0x37f2de][_0xb1b963(0x23e)]={'clientip':_0xb52df9,'timestamp':new Date()[_0xb1b963(0x234)](),'expiry':_0x198db1},_0x198db1!=_0xb1b963(0x2c5)?(await tgBot[_0xb1b963(0x2b7)](_0x4797ab['chat']['id'],_0xb1b963(0x258)+_0x198db1+_0xb1b963(0x208),{'parse_mode':_0xb1b963(0x300)})[_0xb1b963(0x320)](_0x11c337=>{telegramError(_0x11c337);}),io['to'](_0x37f2de)[_0xb1b963(0x295)](_0xb1b963(0x2ef),{'access':{'allow':![],'reason':_0xb1b963(0x215),'token':null}})):(await tgBot['sendMessage'](_0x4797ab[_0xb1b963(0x281)]['id'],_0xb1b963(0x274))[_0xb1b963(0x320)](_0x21e551=>{telegramError(_0x21e551);}),io['to'](_0x37f2de)['emit']('status',{'access':{'allow':![],'reason':_0xb1b963(0x2cb),'token':null}}));}),tgBot[_0x1ce278(0x27a)](_0x1ce278(0x23c));}));}function loginAccess2FA(_0x2ca70a,_0x10b364){const _0x428a68=_0x364c62;tgBot&&settings[_0x428a68(0x2db)]&&(tgBot['removeListener'](_0x428a68(0x23c)),tgBot['sendMessage'](settings[_0x428a68(0x2db)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x10b364)['show']+_0x428a68(0x200),{'parse_mode':_0x428a68(0x300),'reply_markup':{'inline_keyboard':[[{'text':_0x428a68(0x1fd),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x428a68(0x2c5)}]]}})[_0x428a68(0x320)](_0x64d41e=>{telegramError(_0x64d41e);}),tgBot['on']('callback_query',async _0x1dda2c=>{const _0x2e0928=_0x428a68,_0x1964d3=_0x1dda2c['data'],_0x125102=_0x1dda2c[_0x2e0928(0x207)];tgBot[_0x2e0928(0x24c)](_0x1dda2c['id'])['then'](async()=>{const _0x288dd8=_0x2e0928;devices[_0x2ca70a][_0x288dd8(0x2d0)]={'clientip':_0x10b364,'timestamp':new Date()[_0x288dd8(0x234)](),'expiry':_0x1964d3},_0x1964d3!=_0x288dd8(0x2c5)?(await tgBot['sendMessage'](_0x125102['chat']['id'],_0x288dd8(0x1df),{'parse_mode':_0x288dd8(0x300)})[_0x288dd8(0x320)](_0x21ac0f=>{telegramError(_0x21ac0f);}),io['to'](_0x2ca70a)[_0x288dd8(0x295)](_0x288dd8(0x2ef),{'access':{'allow':![],'reason':_0x288dd8(0x215),'token':null}})):(await tgBot['sendMessage'](_0x125102[_0x288dd8(0x281)]['id'],_0x288dd8(0x1fb))[_0x288dd8(0x320)](_0x4dd3a3=>{telegramError(_0x4dd3a3);}),io['to'](_0x2ca70a)[_0x288dd8(0x295)](_0x288dd8(0x2ef),{'access':{'allow':![],'reason':_0x288dd8(0x2c3),'token':null}}));}),tgBot[_0x2e0928(0x27a)](_0x2e0928(0x23c));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x17aacf=_0x364c62;return dbConfig[_0x17aacf(0x2c8)]('bots')[_0x17aacf(0x326)](_0x17aacf(0x338))['filter']({'status':'enabled'})[_0x17aacf(0x2ab)]()||[];}function getDisabledBots(){const _0x4d9462=_0x364c62;return dbConfig['get'](_0x4d9462(0x293))['sortBy'](_0x4d9462(0x338))[_0x4d9462(0x299)]({'status':_0x4d9462(0x2e6)})[_0x4d9462(0x2ab)]()||[];}function getBotsWithMode(){const _0x4f5df1=_0x364c62,_0x454879=dbConfig[_0x4f5df1(0x2c8)](_0x4f5df1(0x293))[_0x4f5df1(0x326)](_0x4f5df1(0x338))[_0x4f5df1(0x2ab)]()||[];return _0x454879[_0x4f5df1(0x322)](_0x4b15f1=>{const _0x465c60=_0x4f5df1,_0x363250=configpath+'bot-'+_0x4b15f1[_0x465c60(0x338)]+_0x465c60(0x237),_0x59a82f=fs[_0x465c60(0x2af)](_0x363250);if(_0x59a82f){const _0x15c459=fs[_0x465c60(0x1ff)](_0x363250);try{const _0x5153eb=JSON[_0x465c60(0x21a)](_0x15c459),_0x15264a=_0x5153eb?_0x5153eb[_0x465c60(0x2e1)][0x0][_0x465c60(0x2c4)]:![];_0x4b15f1[_0x465c60(0x331)]=_0x15264a?'auto':_0x465c60(0x2fe);}catch(_0x1279b8){_0x4b15f1['mode']=_0x465c60(0x2fe);}}else _0x4b15f1[_0x465c60(0x331)]='manual';}),_0x454879;}function getSettings(){const _0x477578=_0x364c62;return dbSettings['get'](_0x477578(0x223))[_0x477578(0x2ab)]()||{'timeshift':0x0};}function getSecure(){const _0x3f0d7a=_0x364c62;return dbSecure[_0x3f0d7a(0x2c8)]('secure')[_0x3f0d7a(0x2ab)]()||{};}function getBlacklist(){const _0x156e8b=_0x364c62;return dbSecure['get'](_0x156e8b(0x2e5))['value']()||[];}function broadcastToBots(_0x2c7779,_0x154bf6){const _0x398e55=_0x364c62;config[_0x398e55(0x322)](_0xb8a78b=>{const _0x549bc6=_0x398e55;if(_0xb8a78b[_0x549bc6(0x2ef)]==_0x549bc6(0x277)&&_0xb8a78b[_0x549bc6(0x2ae)]=='running'){if(pid[_0xb8a78b[_0x549bc6(0x338)]])pid[_0xb8a78b[_0x549bc6(0x338)]][_0x549bc6(0x298)]({[_0x2c7779]:_0x154bf6});}});}function storeSettings(_0x2a9a6b,_0x52b16a=![]){const _0x2cccf9=_0x364c62;_0x2a9a6b={...settings,..._0x2a9a6b};if(_0x52b16a&&_0x2a9a6b['bbPassword']!='************'&&_0x2a9a6b['bbPassword']!=''){const _0x5a0e4d=crypt[_0x2cccf9(0x26e)](secure[_0x2cccf9(0x213)],_0x2a9a6b[_0x2cccf9(0x2b0)])[_0x2cccf9(0x207)][_0x2cccf9(0x28f)]('@')[0x0],_0x4d3d9f=bcrypt[_0x2cccf9(0x2a5)](_0x5a0e4d,saltRounds);_0x2a9a6b={..._0x2a9a6b,'bbPassword':_0x4d3d9f};}if(_0x52b16a&&_0x2a9a6b['telegramToken']!=_0x2cccf9(0x31a)&&_0x2a9a6b[_0x2cccf9(0x284)]!=''){const _0x5aabc3=crypt['decrypt'](secure[_0x2cccf9(0x213)],_0x2a9a6b['telegramToken'])[_0x2cccf9(0x207)]['split']('@')[0x0];_0x2a9a6b={..._0x2a9a6b,'telegramToken':_0x5aabc3};}const _0x545139=_0x2a9a6b[_0x2cccf9(0x284)]!=_0x2cccf9(0x31a)&&_0x2a9a6b[_0x2cccf9(0x284)]!=settings[_0x2cccf9(0x284)]||_0x2a9a6b[_0x2cccf9(0x33e)]!=settings[_0x2cccf9(0x33e)],_0x209e14=_0x2a9a6b[_0x2cccf9(0x284)]==''||_0x2a9a6b[_0x2cccf9(0x33e)]=='';if(_0x545139)_0x2a9a6b['telegramEvents']=_0x2cccf9(0x269);for(const [_0x32c909,_0x39b7ff]of Object[_0x2cccf9(0x260)](_0x2a9a6b)){if(_0x32c909==_0x2cccf9(0x284)&&_0x39b7ff==_0x2cccf9(0x31a)){_0x2a9a6b[_0x2cccf9(0x284)]=settings[_0x2cccf9(0x284)];continue;};if(_0x32c909==_0x2cccf9(0x2b0)&&_0x39b7ff=='************'){_0x2a9a6b['bbPassword']=settings[_0x2cccf9(0x2b0)];continue;};dbSettings[_0x2cccf9(0x210)]('settings.'+_0x32c909,_0x39b7ff)[_0x2cccf9(0x31c)]();}settings=_0x2a9a6b,io['to'](_0x2cccf9(0x268))['emit'](_0x2cccf9(0x223),cleanSettings()),broadcastToBots(_0x2cccf9(0x32c),settings[_0x2cccf9(0x32c)]);if(_0x545139&&!_0x209e14)initTelegram();if(_0x545139&&_0x209e14)disableTelegram();getAllClients()[_0x2cccf9(0x322)](_0x32a49c=>{getSocket(_0x32a49c['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x1e8ae9,_0x1c80e2){const _0x4e8e80=_0x364c62;dbSettings[_0x4e8e80(0x210)](_0x4e8e80(0x286)+_0x1e8ae9,_0x1c80e2)[_0x4e8e80(0x31c)](),settings=getSettings(),io['to']('botmanager')[_0x4e8e80(0x295)](_0x4e8e80(0x223),cleanSettings());}function storeSecure(_0x4dab47){const _0x2bf340=_0x364c62;dbSecure[_0x2bf340(0x2c8)]('secure')[_0x2bf340(0x333)](_0x4dab47)[_0x2bf340(0x31c)](),secure=_0x4dab47;}function addBlacklist(_0x4e6159){const _0x41fc8f=_0x364c62;cleanBlacklist();let _0x1379ec;devices[_0x4e6159][_0x41fc8f(0x23e)]?_0x1379ec=Math[_0x41fc8f(0x2b2)](devices[_0x4e6159][_0x41fc8f(0x23e)][_0x41fc8f(0x2d3)],loginExpiry):_0x1379ec=loginExpiry,dbSecure[_0x41fc8f(0x2c8)](_0x41fc8f(0x2e5))[_0x41fc8f(0x333)]({'expiry':new Date()[_0x41fc8f(0x234)]()+_0x1379ec*0x3c*0x3e8,'token':devices[_0x4e6159][_0x41fc8f(0x255)][_0x41fc8f(0x2f8)]})['write'](),blacklist=dbSecure[_0x41fc8f(0x2c8)]('blacklist')[_0x41fc8f(0x2ab)]();}function cleanBlacklist(){const _0x3f53e4=_0x364c62;let _0x5cb508=dbSecure['get'](_0x3f53e4(0x2e5))[_0x3f53e4(0x25b)]()['value'](),_0x4e3a65=new Date()[_0x3f53e4(0x234)]();_0x5cb508[_0x3f53e4(0x322)](_0x4aa066=>{const _0x3e9d4f=_0x3f53e4;_0x4aa066['expiry']<_0x4e3a65&&dbSecure['get'](_0x3e9d4f(0x2e5))['remove']({'expiry':_0x4aa066[_0x3e9d4f(0x2d3)]})['write']();});}function initStates(){let _0x447305=getConfiguration();_0x447305['forEach'](_0x5ae7e5=>{const _0xec6013=_0x3694;_0x5ae7e5[_0xec6013(0x2ae)]=_0xec6013(0x319);}),storeConfiguration(_0x447305);}function onKeys(){const _0x578f0b=new RSA();return new Promise(_0x38297b=>{const _0x78089e=_0x3694;_0x578f0b[_0x78089e(0x2dd)]()['then'](_0x1477e7=>{_0x38297b(_0x1477e7);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1e7cae=_0x364c62;let _0x5cd14e=getConfiguration(),_0x55169d=![];_0x5cd14e[_0x1e7cae(0x322)](_0xaa434=>{const _0x3ff5a9=_0x1e7cae;if(_0xaa434['status']==_0x3ff5a9(0x2c1))_0xaa434[_0x3ff5a9(0x2ef)]='enabled',_0x55169d=!![];else _0xaa434[_0x3ff5a9(0x2ef)]==_0x3ff5a9(0x319)&&(_0xaa434['status']=_0x3ff5a9(0x2e6),_0x55169d=!![]);});if(_0x55169d)storeConfiguration(_0x5cd14e);let _0x11f768=getSecure();if(!_0x11f768[_0x1e7cae(0x24f)]('secret')){let _0x413c08=await generateKeys();_0x11f768[_0x1e7cae(0x306)]=_0x413c08[_0x1e7cae(0x306)],_0x11f768[_0x1e7cae(0x213)]=_0x413c08[_0x1e7cae(0x213)],_0x11f768[_0x1e7cae(0x1f8)]=crypto['randomBytes'](0x20)['toString']('hex'),storeSecure(_0x11f768);}let _0x55d570=getSettings();_0x55169d=![];!_0x55d570[_0x1e7cae(0x24f)](_0x1e7cae(0x1e1))&&(_0x55d570[_0x1e7cae(0x1e1)]=![],_0x55d570['bbUsername']='',_0x55d570[_0x1e7cae(0x2b0)]='',_0x55d570[_0x1e7cae(0x2d5)]=![],_0x55169d=!![]);!_0x55d570[_0x1e7cae(0x24f)](_0x1e7cae(0x334))&&(_0x55d570[_0x1e7cae(0x334)]=![],_0x55d570[_0x1e7cae(0x272)]=[],_0x55d570[_0x1e7cae(0x22f)]=![],_0x55169d=!![]);if(!_0x55d570[_0x1e7cae(0x24f)](_0x1e7cae(0x28c))){if(_0x55d570['telegramChatId'])_0x55d570[_0x1e7cae(0x28c)]=!![];else _0x55d570[_0x1e7cae(0x28c)]=![];_0x55169d=!![];}if(_0x55169d)storeSettings(_0x55d570);}function storeConfiguration(_0x286e8a){const _0x3546df=_0x364c62;dbConfig[_0x3546df(0x2c8)](_0x3546df(0x293))['remove']()[_0x3546df(0x31c)](),_0x286e8a[_0x3546df(0x322)](_0x5a382b=>{const _0x23a477=_0x3546df;delete _0x5a382b[_0x23a477(0x331)];}),dbConfig[_0x3546df(0x2c8)]('bots')[_0x3546df(0x333)](..._0x286e8a)[_0x3546df(0x31c)](),config=_0x286e8a;}function resetPassword(){const _0x29347e=_0x364c62;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x29347e(0x23c)),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x29347e(0x300),'reply_markup':{'inline_keyboard':[[{'text':_0x29347e(0x247),'callback_data':_0x29347e(0x247)},{'text':'no','callback_data':'no'}]]}})[_0x29347e(0x320)](_0x3846be=>{telegramError(_0x3846be);}),tgBot['on'](_0x29347e(0x23c),async _0x4b89cf=>{const _0x203062=_0x29347e,_0x280209=_0x4b89cf[_0x203062(0x22b)],_0x39f376=_0x4b89cf[_0x203062(0x207)];tgBot[_0x203062(0x24c)](_0x4b89cf['id'])[_0x203062(0x2e2)](async()=>{const _0x1e4761=_0x203062;if(_0x280209!='no'){const _0x286b3b=0xf,_0x476ba5=_0x1e4761(0x242),_0x5cb96f=Array[_0x1e4761(0x1e3)](crypto[_0x1e4761(0x212)](new Uint32Array(_0x286b3b)))['map'](_0x25c0a3=>_0x476ba5[_0x25c0a3%_0x476ba5['length']])[_0x1e4761(0x32e)](''),_0x4f939c=bcrypt[_0x1e4761(0x2a5)](_0x5cb96f,saltRounds);storeSettings({'bbPassword':_0x4f939c}),await tgBot['sendMessage'](_0x39f376[_0x1e4761(0x281)]['id'],_0x1e4761(0x2e9)+_0x5cb96f,{'parse_mode':_0x1e4761(0x300)})['catch'](_0x1f1897=>{telegramError(_0x1f1897);});}else await tgBot['sendMessage'](_0x39f376[_0x1e4761(0x281)]['id'],_0x1e4761(0x303))[_0x1e4761(0x320)](_0xe440f7=>{telegramError(_0xe440f7);});}),tgBot[_0x203062(0x27a)]('callback_query');}));}function logging(_0x4c5a80){const _0x2b0bd4=_0x364c62;console[_0x2b0bd4(0x2f3)](getTimeStamp()+_0x2b0bd4(0x341)+_0x4c5a80);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x2b0bd4(0x2a4))tgBot['sendMessage'](settings[_0x2b0bd4(0x2db)],_0x2b0bd4(0x27c)+_0x4c5a80)[_0x2b0bd4(0x320)](_0x59341b=>{telegramError(_0x59341b);});}function getServerTime(){const _0x2e2069=_0x364c62,_0x5dde52=new Date();return _0x5dde52[_0x2e2069(0x28e)]()+'/'+(_0x5dde52['getMonth']()+0x1)['toString']()[_0x2e2069(0x262)](0x2,'0')+'/'+_0x5dde52['getDate']()[_0x2e2069(0x211)]()['padStart'](0x2,'0')+'\x20'+_0x5dde52['getHours']()[_0x2e2069(0x211)]()[_0x2e2069(0x262)](0x2,'0')+':'+_0x5dde52[_0x2e2069(0x278)]()[_0x2e2069(0x211)]()[_0x2e2069(0x262)](0x2,'0')+':'+_0x5dde52[_0x2e2069(0x20a)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x811c14=_0x364c62,_0x210882=shiftedTime();return _0x210882['getFullYear']()+'/'+(_0x210882[_0x811c14(0x2f9)]()+0x1)[_0x811c14(0x211)]()[_0x811c14(0x262)](0x2,'0')+'/'+_0x210882['getDate']()[_0x811c14(0x211)]()[_0x811c14(0x262)](0x2,'0')+'\x20'+_0x210882[_0x811c14(0x332)]()['toString']()[_0x811c14(0x262)](0x2,'0')+':'+_0x210882['getMinutes']()[_0x811c14(0x211)]()['padStart'](0x2,'0')+':'+_0x210882['getSeconds']()['toString']()[_0x811c14(0x262)](0x2,'0');}function shiftedTime(){const _0x1a1267=_0x364c62,_0x5df461=new Date();let _0x4077a4=_0x5df461;if(settings[_0x1a1267(0x32c)]&&settings[_0x1a1267(0x32c)]!==0x0)_0x4077a4=fns[_0x1a1267(0x296)](_0x5df461,{'hours':settings[_0x1a1267(0x32c)]});return _0x4077a4;}function startScheduler(){const _0x71f640=_0x364c62;let _0x755ec9=new Date()[_0x71f640(0x2e0)]();_0x755ec9==0x1&&backupConfigFiles();_0x755ec9==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x18d264=_0x364c62;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x18d264(0x322)](_0x3e9376=>{const _0x2ab12d=_0x18d264;if(!_0x3e9376[_0x2ab12d(0x2ea)]())fs[_0x2ab12d(0x316)](configpath+_0x3e9376['name'],configbackuppath+_0x3e9376[_0x2ab12d(0x2df)]);});}async function triggerAnalytics(){const _0x5c40e5=_0x364c62;analytics[_0x5c40e5(0x2be)]({'title':_0x5c40e5(0x218),'href':_0x5c40e5(0x21d),'path':'/v'+serverversion});}function validateCredentials(_0x461421,_0x12e074){const _0x248990=_0x364c62;if(_0x461421[_0x248990(0x1de)]==settings['bbUsername']&&bcrypt[_0x248990(0x30d)](_0x461421[_0x248990(0x31e)],settings['bbPassword'])){if(settings[_0x248990(0x2d5)])return{'allow':![],'reason':_0x248990(0x2ec),'token':null};else{const _0x51964b=generateLoginToken(_0x12e074);return{'allow':!![],'reason':_0x248990(0x1f2),'token':_0x51964b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x421f11){const _0x5586a2=generateLoginToken(_0x421f11);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x5586a2};}function validateAccess(_0x2ff87c,_0x183cc0){const _0x11a417=_0x364c62;let _0x4ebf96=devices[_0x183cc0]['ip'],_0x154581;const _0xaefc7f=_0x421463=>{const _0x115428=_0x3694;if(settings[_0x115428(0x1e1)]){if(settings[_0x115428(0x2d5)]){if(telegram2FaApproved(_0x183cc0)){const _0x15cd7a=generateLoginToken(_0x183cc0);return{'allow':!![],'reason':_0x115428(0x273),'token':_0x15cd7a};}else return{'allow':![],'reason':_0x115428(0x301),'token':null};}else return _0x154581=validToken(_0x421463,_0x183cc0),_0x154581[_0x115428(0x24f)](_0x115428(0x1f1))?{'allow':!![],'reason':_0x115428(0x311),'token':_0x421463}:{'allow':![],'reason':_0x115428(0x301),'token':null};}else return{'allow':!![],'reason':_0x115428(0x2fb),'token':null};};if(settings['whitelistEnabled']){let _0x32bffb=[...settings['whitelist'],_0x11a417(0x276),'::ffff:127.0.0.1',_0x11a417(0x345)];if(_0x32bffb['includes'](_0x4ebf96))return _0xaefc7f(_0x2ff87c);else{_0x154581=validToken(_0x2ff87c,_0x183cc0);if(_0x154581[_0x11a417(0x24f)]('success'))return _0xaefc7f(_0x2ff87c);else{if(telegramIpApproved(_0x183cc0)){const _0x4e0c39=generateToken(_0x183cc0);return _0x154581=_0xaefc7f(_0x2ff87c),_0x154581[_0x11a417(0x219)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4e0c39}:_0x154581;}else return settings[_0x11a417(0x22f)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x11a417(0x250),'token':null};}}}else return _0xaefc7f(_0x2ff87c);}function timelyDecrypt(_0x3f057d,_0x20e817=!![]){const _0x2a325=_0x364c62;if(_0x3f057d)try{const _0x2357f5=crypt[_0x2a325(0x26e)](secure[_0x2a325(0x213)],_0x3f057d)['message'],_0x41ef5b=_0x2357f5[_0x2a325(0x28f)]('@')[0x0],_0x492412=_0x2357f5[_0x2a325(0x28f)]('@')[0x1],_0x3a1e15=new Date()['getTime']();if(_0x20e817){if(_0x3a1e15-_0x492412<maxSecretAge*0x3e8)return _0x41ef5b;else return![];}else return _0x41ef5b;}catch(_0x1ddb79){return![];}else return![];}const validToken=(_0x22503d,_0x360c0a)=>{const _0x346d72=_0x364c62,_0x2359e9=devices[_0x360c0a]['ip'];if(!_0x22503d)return{'error':_0x346d72(0x2bd)};for(let _0x3fed6c of blacklist){if(_0x3fed6c[_0x346d72(0x2f8)]==_0x22503d)return{'error':'Token\x20blacklisted'};}let _0x291c60;try{_0x291c60=jwt['verify'](_0x22503d,secure[_0x346d72(0x1f8)]+_0x360c0a);}catch{return{'error':_0x346d72(0x222)};}if(!_0x291c60[_0x346d72(0x24f)]('clientip')&&!_0x291c60[_0x346d72(0x24f)](_0x346d72(0x1de))||!_0x291c60[_0x346d72(0x24f)]('exp'))return{'error':_0x346d72(0x335)};if(!_0x291c60['hasOwnProperty'](_0x346d72(0x1de))&&_0x291c60[_0x346d72(0x24f)]('clientip')){const {clientip:_0x7c19dc}=_0x291c60;return _0x2359e9==_0x7c19dc?{'success':_0x346d72(0x27d)}:{'error':_0x346d72(0x244)};}else{if(_0x291c60[_0x346d72(0x24f)](_0x346d72(0x1de))&&_0x291c60[_0x346d72(0x24f)](_0x346d72(0x1f4))){const {username:_0x2046fb,clientip:_0x15a96b}=_0x291c60;return settings['bbUsername']==_0x2046fb&&_0x2359e9==_0x15a96b?{'success':_0x346d72(0x27d)}:{'error':_0x346d72(0x243)};}}},generateLoginToken=_0x255180=>{const _0x1fce76=_0x364c62;if(_0x255180){const _0x586921=devices[_0x255180]['ip'];return jwt[_0x1fce76(0x2a2)]({'username':settings[_0x1fce76(0x248)],'clientip':_0x586921},secure[_0x1fce76(0x1f8)]+_0x255180,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4c009f=>{const _0x6dd6a6=_0x364c62;if(_0x4c009f){const _0x4e1452=devices[_0x4c009f]['ip'];return jwt['sign']({'clientip':_0x4e1452},secure['secret']+_0x4c009f,{'expiresIn':devices[_0x4c009f]['telegramIpApproval'][_0x6dd6a6(0x2d3)]*0x3c});}else return![];},telegramIpApproved=_0x31ae62=>{const _0x2619b4=_0x364c62;let _0x2f9532=![];return devices[_0x31ae62][_0x2619b4(0x23e)]&&devices[_0x31ae62][_0x2619b4(0x23e)][_0x2619b4(0x2d3)]!=_0x2619b4(0x2c5)&&(_0x2f9532=devices[_0x31ae62][_0x2619b4(0x23e)]['clientip']==devices[_0x31ae62]['ip']&&new Date()[_0x2619b4(0x234)]()-devices[_0x31ae62][_0x2619b4(0x23e)][_0x2619b4(0x22e)]<devices[_0x31ae62][_0x2619b4(0x23e)][_0x2619b4(0x2d3)]*0x3c*0x3e8),_0x2f9532;},telegram2FaApproved=_0x2a72b8=>{const _0x5195a4=_0x364c62;let _0x43bfd9=![];return devices[_0x2a72b8]['telegram2FaApproval']&&devices[_0x2a72b8]['telegram2FaApproval'][_0x5195a4(0x2d3)]!='reject'&&(_0x43bfd9=devices[_0x2a72b8]['telegram2FaApproval'][_0x5195a4(0x1f4)]==devices[_0x2a72b8]['ip']&&new Date()[_0x5195a4(0x234)]()-devices[_0x2a72b8]['telegram2FaApproval'][_0x5195a4(0x22e)]<devices[_0x2a72b8]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x43bfd9;},normalizeIP=_0x1d91ff=>{const _0x488479=_0x364c62;let _0x1a29ce=null,_0x57d0ea=null;if(ipaddr[_0x488479(0x2f6)](_0x1d91ff)){const _0x16d468=ipaddr[_0x488479(0x21a)](_0x1d91ff);_0x16d468[_0x488479(0x343)]()===_0x488479(0x327)?(_0x16d468[_0x488479(0x31b)]()&&(_0x1a29ce=_0x16d468[_0x488479(0x2ca)]()['toString']()),_0x57d0ea=_0x16d468[_0x488479(0x211)]()):(_0x1a29ce=_0x16d468[_0x488479(0x211)](),_0x57d0ea=_0x16d468['toIPv4MappedAddress']()[_0x488479(0x211)]());}return{'show':_0x1a29ce?_0x1a29ce:_0x57d0ea,'store':_0x57d0ea};};