const _0x1e3ee4=_0x43a8;(function(_0x18a355,_0xba3309){const _0x108754=_0x43a8,_0x27702f=_0x18a355();while(!![]){try{const _0x5c650c=-parseInt(_0x108754(0x2c4))/0x1*(-parseInt(_0x108754(0x2b2))/0x2)+parseInt(_0x108754(0x161))/0x3*(parseInt(_0x108754(0x28b))/0x4)+parseInt(_0x108754(0x295))/0x5*(parseInt(_0x108754(0x1bb))/0x6)+parseInt(_0x108754(0x24a))/0x7+parseInt(_0x108754(0x1d7))/0x8+-parseInt(_0x108754(0x2cb))/0x9*(-parseInt(_0x108754(0x1a1))/0xa)+-parseInt(_0x108754(0x2c9))/0xb;if(_0x5c650c===_0xba3309)break;else _0x27702f['push'](_0x27702f['shift']());}catch(_0x2279bd){_0x27702f['push'](_0x27702f['shift']());}}}(_0x3544,0x79805));const _0x42c36b=function(){let _0x3083e6=!![];return function(_0xc07e24,_0x5530a6){const _0x2557ce=_0x3083e6?function(){const _0x1187fd=_0x43a8;if(_0x5530a6){const _0x4b7642=_0x5530a6[_0x1187fd(0x287)](_0xc07e24,arguments);return _0x5530a6=null,_0x4b7642;}}:function(){};return _0x3083e6=![],_0x2557ce;};}(),_0xd92bcc=_0x42c36b(this,function(){const _0x3f5a4d=_0x43a8;return _0xd92bcc[_0x3f5a4d(0x1d1)]()[_0x3f5a4d(0x206)](_0x3f5a4d(0x1cf))[_0x3f5a4d(0x1d1)]()[_0x3f5a4d(0x269)](_0xd92bcc)[_0x3f5a4d(0x206)]('(((.+)+)+)+$');});_0xd92bcc();'use strict';process[_0x1e3ee4(0x25e)][_0x1e3ee4(0x19b)]=0x1;const childProcess=require(_0x1e3ee4(0x187)),fs=require('fs'),fns=require(_0x1e3ee4(0x1b7)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x1e3ee4(0x2dd)),crypto=require(_0x1e3ee4(0x22c)),Crypt=require('hybrid-crypto-js')[_0x1e3ee4(0x15d)],RSA=require(_0x1e3ee4(0x2f2))[_0x1e3ee4(0x2e8)],bcrypt=require(_0x1e3ee4(0x2b7)),jwt=require(_0x1e3ee4(0x239)),ipaddr=require(_0x1e3ee4(0x1ba)),argv=require(_0x1e3ee4(0x168))(process[_0x1e3ee4(0x1e2)][_0x1e3ee4(0x22e)](0x2))['argv'],uuidRandom=require('uuid-random'),TelegramBot=require(_0x1e3ee4(0x14f)),Mixpanel=require(_0x1e3ee4(0x175)),axios=require(_0x1e3ee4(0x201)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x1e3ee4(0x274)),PORT=argv[_0x1e3ee4(0x1fa)]||_0x1e3ee4(0x192),pattern=/^[0-9]{2,4}$/;!pattern[_0x1e3ee4(0x1d8)](PORT)&&(console['log'](_0x1e3ee4(0x178)+PORT+_0x1e3ee4(0x2a4)),process['exit'](0x1));const HOST=argv[_0x1e3ee4(0x155)]||null,userID=argv[_0x1e3ee4(0x243)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x1e3ee4(0x171),configfile=_0x1e3ee4(0x2eb),settingsfile=_0x1e3ee4(0x1f5),securefile=_0x1e3ee4(0x1ab);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1e3ee4(0x1b4)),configpath=userID?bbpath+_0x1e3ee4(0x23a)+userID+'/':bbpath+_0x1e3ee4(0x23a),configbackuppath=configpath+_0x1e3ee4(0x29a),logspath=userID?bbpath+_0x1e3ee4(0x2a8)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x1e3ee4(0x154),loggerfile=fs[_0x1e3ee4(0x2d9)](logspath+_0x1e3ee4(0x1f2),{'flags':'a'}),temppath=userID?bbpath+_0x1e3ee4(0x2d7)+userID+'/':bbpath+_0x1e3ee4(0x2d7);!fs['existsSync'](configpath)&&fs[_0x1e3ee4(0x29f)](configpath);!fs[_0x1e3ee4(0x1b1)](configbackuppath)&&fs[_0x1e3ee4(0x29f)](configbackuppath);!fs[_0x1e3ee4(0x1b1)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x1e3ee4(0x1b1)](zippath)&&fs[_0x1e3ee4(0x29f)](zippath);!fs['existsSync'](temppath)&&fs[_0x1e3ee4(0x29f)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x1e3ee4(0x23c)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1e3ee4(0x2a6)}})[_0x1e3ee4(0x2ae)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x1e3ee4(0x26a),'rsaStandard':_0x1e3ee4(0x25b)});const saltRounds=0xa,mixpanel=Mixpanel[_0x1e3ee4(0x1c9)](_0x1e3ee4(0x1d0),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1e3ee4(0x20a)]&&settings[_0x1e3ee4(0x20a)]!=''&&settings[_0x1e3ee4(0x282)]&&settings[_0x1e3ee4(0x282)]!='')initTelegram();const logger={'screen':_0x57cf33=>{console['log'](_0x57cf33);},'simple':_0x2c54a8=>{const _0x39f011=_0x1e3ee4;console['log'](_0x2c54a8),loggerfile[_0x39f011(0x2ae)](util[_0x39f011(0x162)](_0x2c54a8)+'\x0a');},'full':async _0x2a6da3=>{const _0x35251e=_0x1e3ee4,_0x43a05f=getTimeStamp()+_0x35251e(0x2cc)+_0x2a6da3;console['log'](_0x43a05f),loggerfile[_0x35251e(0x2ae)](util[_0x35251e(0x162)](_0x43a05f)+'\x0a');if(tgBot&&settings[_0x35251e(0x181)]&&settings[_0x35251e(0x22b)]!='orders')await tgBot[_0x35251e(0x246)](settings[_0x35251e(0x181)],_0x35251e(0x29e)+_0x2a6da3)[_0x35251e(0x262)](_0x278da0=>{telegramError(_0x278da0);});}};process['on'](_0x1e3ee4(0x202),function(_0x177cde){const _0x449068=_0x1e3ee4;logger[_0x449068(0x164)](_0x177cde);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x1e3ee4(0x277)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1e3ee4(0x299)),app=express(),http=require(_0x1e3ee4(0x17e))[_0x1e3ee4(0x245)](app);function _0x3544(){const _0x37e337=['2FA\x20login\x20token\x20generated','cloneDeep','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','catch','stopped','delete-alerts','push','randomBytes','getTime','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','constructor','sha256','Login\x20accepted','login\x20not\x20required','assign','Restore\x20process\x20aborted','Unauthorized\x20attempt\x20to\x20store\x20configuration','copyFileSync','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','readFileSync','express-fileupload','Invalid\x20authentication\x20token\x20(1)','order','version','length','showname','settings.','deleteHistoryAlerts','getFullYear','starting\x20bot\x20|\x20Bot\x20','File\x20uploaded','new','forEach','onText','telegramUsername','Invalid\x20authentication\x20token\x20(2)','all','Unauthorized\x20login\x20attempt\x20(timeout)','whitelistEnabled','apply','alerts','exec','Restoring\x20bot(s)\x20from\x20backup','20jFXBsw','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','padStart','output-002.log','full','userid','split','2FA\x20login\x20required','store-headless','entries','948110pDwgkW','All\x20bots\x20running\x20right\x20now','access','encryptedUuid','express','backup/','auto','publicKey','auth','Bot\x20Mgr\x20>\x20','mkdirSync','unlinkSync','reject','/update\x20-\x20update\x20Balance\x20Bot\x0a','blacklist',',\x20must\x20be\x20a\x204\x20digit\x20number','idling\x20bot\x20\x20\x20|\x20Bot\x20','0.0.0','compareSync','logs/','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bot-','output-001.log','/download/:type','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','write','backupfile','-events.json','filter','1966DyNuQe','ipc','telegram','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','socket.io','bcryptjs','warning','Alerts','Invalid\x20Telegram\x20token','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20get\x20logs','function','includes','botID','botmanager','show-config','</b>\x20?','38kbzppG','number','index.html','success','Unauthorized\x20attempt\x20to\x20download\x20','16525080IxurwA','login\x20required','9kcAZqO',':\x20Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','\x20(2)','messages','************','sign','event','/:bot/history','status','add-bot','enabled\x20Bot\x20','temp/','::1','createWriteStream','telegramIpApproval','hashSync','getMonth','path','Unauthorized\x20attempt\x20to\x20get\x20messages','loginRequired','Password\x20reset\x20rejected','remoteAddress','callback_query','error\x20while\x20deleting\x20config\x20files:\x20','Starting\x20Balance\x20Bot\x20update','listen','args','once','RSA','decrypt','1000','bb-config.json','username','chat','emit','$1_$2_$3','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','hybrid-crypto-js','file','-config.json','node-telegram-bot-api','temporary\x20access\x20rejected','build','timestamp','bots','zip/','host','set','verify','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','randomFillSync','telegramEnabled','/upload-backup','disabled\x20Bot\x20','Crypt','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','params','handshake','442662SylaDa','format','login','simple','latestversion','then','output-000.log','yargs/yargs','***','toIPv4Address','\x20|\x20','timeshift','\x20(1)','bot','store','stop','bot.js','Unauthorized\x20attempt\x20to\x20log\x20out','exit','getHours','mixpanel','server','All\x20bots','Error:\x20Invalid\x20argument\x20','telegram2FaApproval','expiry','find','use','readdirSync','http','temporary\x20access\x20not\x20allowed','name','telegramChatId','/names\x20-\x20show\x20bot\x20names\x0a','access\x20timeout','bbPassword','2FA\x20login\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','child_process','message','get-logs','manual','output-003.log','Allow\x20login\x20from\x20IP\x20address\x20<b>','/restart\x20-\x20restart\x20bot(s)\x0a','logged\x20out','static','replace','orders','3000','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','started','notification','isValid','temporaryAccessAllowed','cancel-loading','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','NTBA_FIX_319','secret','live','disconnect','get',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','4229350TLYGrO','privateKey','stopPolling','temporary\x20token\x20generated','reason','isDirectory','logs','headless','Token\x20blacklisted','SIGINT','bb-secure.json','size','Failed\x20to\x20download\x20','.zip','Password\x20has\x20been\x20reset\x20to:\x20','parse','existsSync','Orders','from','clients','telegrammsg','reload','date-fns','<b>Balance\x20Bot\x20Status:</b>\x0a','/disable\x20-\x20disable\x20notifications\x0a','ipaddr.js','6KGrXeg','Ok,\x20will\x20send\x20alert\x20notifications\x20only','\x20only\x0a','inherit','store-configuration','pidRefreshToken','invalid\x20credentials','apiKey','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','cancelLoading','Unauthorized\x20attempt\x20to\x20delete\x20alerts','new-disabled','tkn','connection','init','reset-password','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Server','sendFile','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','(((.+)+)+)+$','6b67f3d61ee94b8f5c80b4affef4c4d9','toString','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','uuid','join','Unauthorized\x20attempt\x20to\x20confirm\x20message','headers','2875504TGHOqM','test','download','logout','pidExpireLogin','node-zip','backup','\x20mode','Login\x20rejected','Unauthorized\x20attempt\x20to\x20add\x20bot','isIPv4MappedAddress','argv','getSeconds','/:bot/support','remove','lastmsgemitted','*$1*','getStartingBalances','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','show','clientip','removeListener','bbvNew','2FA','any','rmSync','alias','/output-000.log','Unauthorized\x20attempt\x20to\x20delete\x20bot','conn','bb-settings.json','generate','All','place-order','/off\x20-\x20stop\x20bot(s)\x0a','port','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','127.0.0.1','socket','token','apiSecret','axios','uncaughtException','confirm-message','Your\x20installation\x20is\x20already\x20up\x20to\x20date','keys','search','error','404\x20Not\x20Found','Bot\x20','telegramToken','enabled','login\x20token\x20generated','HTML','value','sortBy','answerCallbackQuery','yes','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Notifications\x20disabled\x0a','-results.json','store-settings','/:bot/portfolio','toggle-bot-mode','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getPortfolio','exp','add','Temporary\x20access\x20rejected','/on\x20-\x20start\x20bot(s)\x0a','30\x20min','accept','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','botname','5\x20min','initclient','running','No\x20authentication\x20token','match','kill','mode','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','emitHistory','telegramEvents','crypto','statSync','slice','writeFileSync','toggleBotMode','type','send','login\x20token\x20valid','/:bot/configuration','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','sockets','You\x20can\x20use\x20the\x20following\x20commands:\x0a','secure','jsonwebtoken','config/','DEFLATE','defaults','get-starting-balances','post','sort','Unauthorized\x20attempt\x20to\x20update\x20bot','restarting\x20Bot\x20','data','user','stringify','createServer','sendMessage','bbUsername','allow','Ok,\x20will\x20send\x20order\x20notifications\x20only','1769810nAxODo','binary','Notifications\x20types:\x20','settings','disabled','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','password','removeAllListeners','startsWith','No\x20bots\x20running\x20right\x20now','toIPv4MappedAddress','hasOwnProperty','2FA\x20required','build2','get-messages','bbvReceive','https://api.ipify.org?format=json','RSA-OAEP','files','connected','env'];_0x3544=function(){return _0x37e337;};return _0x3544();}app[_0x1e3ee4(0x17c)](fileUpload({'useTempFiles':!![]})),app[_0x1e3ee4(0x19f)](_0x1e3ee4(0x2ac),async(_0x495f87,_0x332b3e)=>{const _0x22554a=_0x1e3ee4,_0x40abc7=_0x495f87[_0x22554a(0x15f)][_0x22554a(0x231)],_0x2f2f7e=getClientsWithBotID('botmanager'),_0x4dfa99=_0x495f87[_0x22554a(0x1d6)][_0x22554a(0x1d3)],_0x29d536=timelyDecrypt(_0x4dfa99,![]),_0x231124=_0x2f2f7e[_0x22554a(0x17b)](_0x339680=>_0x339680['uuid']==_0x29d536);if(_0x231124){const _0xfa71a6=normalizeIP(_0x495f87['socket'][_0x22554a(0x2e1)])[_0x22554a(0x16f)],_0x2cbec3=_0x495f87[_0x22554a(0x1d6)][_0x22554a(0x1c7)];if(validateAccess(_0x2cbec3,_0x29d536,_0xfa71a6)['allow'])await zipFiles(_0x40abc7),_0x332b3e[_0x22554a(0x1d9)](zippath+(_0x40abc7+'.zip'),_0x1e08e1=>{const _0x1fa476=_0x22554a;_0x1e08e1&&(logger['full'](_0x1fa476(0x1ad)+_0x40abc7),logger[_0x1fa476(0x164)](_0x1e08e1));});else logger[_0x22554a(0x28f)](_0x22554a(0x2c8)+_0x40abc7+_0x22554a(0x16d));}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x40abc7+_0x22554a(0x2ce));}),app[_0x1e3ee4(0x23e)](_0x1e3ee4(0x15b),async(_0x412257,_0x36ef42)=>{const _0x3111ff=_0x1e3ee4,_0x177198=getClientsWithBotID(_0x3111ff(0x2c1)),_0x281c68=_0x412257[_0x3111ff(0x1d6)][_0x3111ff(0x1d3)],_0x42bce2=timelyDecrypt(_0x281c68,![]),_0x5acc1d=_0x177198['find'](_0x525abb=>_0x525abb[_0x3111ff(0x1d3)]==_0x42bce2);if(_0x5acc1d){const _0x1eb7ad=normalizeIP(_0x412257[_0x3111ff(0x1fe)][_0x3111ff(0x2e1)])[_0x3111ff(0x16f)],_0x52a23c=_0x412257[_0x3111ff(0x1d6)]['tkn'];if(validateAccess(_0x52a23c,_0x42bce2,_0x1eb7ad)[_0x3111ff(0x248)]){if(_0x412257[_0x3111ff(0x25c)]){const _0x4b5d22=_0x412257[_0x3111ff(0x25c)][_0x3111ff(0x2af)];await _0x4b5d22['mv'](temppath+_0x4b5d22[_0x3111ff(0x180)]),_0x36ef42[_0x3111ff(0x232)]({'status':!![],'message':_0x3111ff(0x27e)});const _0x13c148=getBotsWithMode();_0x13c148['length']>0x0?confirmRestore(temppath,_0x4b5d22[_0x3111ff(0x180)]):unzipFile(temppath,_0x4b5d22[_0x3111ff(0x180)]);}}else logger[_0x3111ff(0x28f)](_0x3111ff(0x1fc));}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x1e3ee4(0x17c)](express[_0x1e3ee4(0x18f)](path[_0x1e3ee4(0x1d4)](__dirname,bbpath2,_0x1e3ee4(0x257)))),app[_0x1e3ee4(0x17c)](express[_0x1e3ee4(0x18f)](path['join'](__dirname,bbpath2,'build'))),app[_0x1e3ee4(0x19f)]('/',function(_0x54e972,_0x17b10b){const _0x56efb7=_0x1e3ee4;_0x17b10b[_0x56efb7(0x1cd)](path[_0x56efb7(0x1d4)](__dirname,bbpath2,_0x56efb7(0x257),_0x56efb7(0x2c6)));}),app[_0x1e3ee4(0x19f)]('/:bot',function(_0x5bc9af,_0x54f634){const _0x210c45=_0x1e3ee4;_0x54f634['sendFile'](path[_0x210c45(0x1d4)](__dirname,bbpath2,'build',_0x210c45(0x2c6)));}),app['get'](_0x1e3ee4(0x216),(_0x234c33,_0x25f210)=>{const _0x4b4a92=_0x1e3ee4;_0x25f210[_0x4b4a92(0x1cd)](path[_0x4b4a92(0x1d4)](__dirname,bbpath2,_0x4b4a92(0x151),_0x4b4a92(0x2c6)));}),app[_0x1e3ee4(0x19f)]('/:bot/performance',(_0x2ab67e,_0x1618a4)=>{const _0x4baa3c=_0x1e3ee4;_0x1618a4[_0x4baa3c(0x1cd)](path['join'](__dirname,bbpath2,_0x4baa3c(0x151),_0x4baa3c(0x2c6)));}),app[_0x1e3ee4(0x19f)]('/:bot/coins',(_0x543826,_0x2f2742)=>{const _0x43fb76=_0x1e3ee4;_0x2f2742['sendFile'](path[_0x43fb76(0x1d4)](__dirname,bbpath2,_0x43fb76(0x151),'index.html'));}),app[_0x1e3ee4(0x19f)](_0x1e3ee4(0x2d3),(_0x125230,_0x1eeef0)=>{const _0x5d3a68=_0x1e3ee4;_0x1eeef0[_0x5d3a68(0x1cd)](path[_0x5d3a68(0x1d4)](__dirname,bbpath2,'build',_0x5d3a68(0x2c6)));}),app[_0x1e3ee4(0x19f)](_0x1e3ee4(0x234),(_0x5239a0,_0x679a28)=>{const _0x495291=_0x1e3ee4;_0x679a28[_0x495291(0x1cd)](path[_0x495291(0x1d4)](__dirname,bbpath2,'build',_0x495291(0x2c6)));}),app[_0x1e3ee4(0x19f)](_0x1e3ee4(0x1e4),(_0x151e3b,_0x39062d)=>{const _0x54c650=_0x1e3ee4;_0x39062d['sendFile'](path[_0x54c650(0x1d4)](__dirname,bbpath2,'build',_0x54c650(0x2c6)));});if(HOST)http[_0x1e3ee4(0x2e5)](PORT,HOST);else http[_0x1e3ee4(0x2e5)](PORT);const io=require(_0x1e3ee4(0x2b6))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x2963fe=_0x1e3ee4;logger['simple'](''),logger[_0x2963fe(0x164)](_0x2963fe(0x271)),await logger[_0x2963fe(0x28f)](_0x2963fe(0x220)+PORT),logger[_0x2963fe(0x164)]('-----------------------------------------------------------------------------------');if(config[_0x2963fe(0x278)]!=0x0)for(const _0x4869e9 of config){if(_0x4869e9['status']==_0x2963fe(0x20b)||_0x4869e9[_0x2963fe(0x2d4)]==_0x2963fe(0x27f))await logger[_0x2963fe(0x28f)](_0x2963fe(0x27d)+_0x4869e9[_0x2963fe(0x2c0)]+_0x2963fe(0x16b)+_0x4869e9['botname']),startBot([_0x4869e9[_0x2963fe(0x2c0)],userID],{'cwd':bbpath},function(_0x118606){const _0x3143a2=_0x2963fe;if(_0x118606)logger[_0x3143a2(0x28f)](_0x118606);});else(_0x4869e9[_0x2963fe(0x2d4)]=='disabled'||_0x4869e9[_0x2963fe(0x2d4)]==_0x2963fe(0x1c6))&&await logger['full'](_0x2963fe(0x2a5)+_0x4869e9[_0x2963fe(0x2c0)]+_0x2963fe(0x16b)+_0x4869e9[_0x2963fe(0x221)]);}else!newBot&&logger[_0x2963fe(0x164)](_0x2963fe(0x268));if(newBot)addBot();logger['simple'](_0x2963fe(0x271)),logger[_0x2963fe(0x164)]('');}function startSocket(){const _0xd6359f=_0x1e3ee4;io['on'](_0xd6359f(0x1c8),_0x8f6795=>{const _0xe953c3=_0xd6359f;let _0x2eb4e8,_0x541503,_0x27ec24,_0x4f88ee,_0x2fa3eb;const _0x511927=_0x8f6795[_0xe953c3(0x160)][_0xe953c3(0x1d6)]['referer'];_0x541503=_0x511927['match'](/bot[0-9]{3}/);if(_0x541503)_0x27ec24=_0x541503[0x0][_0xe953c3(0x226)](/[0-9]{3}/);if(_0x27ec24)_0x2eb4e8=_0x27ec24[0x0];else _0x2eb4e8=_0xe953c3(0x2c1);const _0x1747a8=_0x8f6795[_0xe953c3(0x160)][_0xe953c3(0x29d)][_0xe953c3(0x298)];if(!_0x1747a8)_0x8f6795[_0xe953c3(0x2ee)]('status',{'publicKey':secure[_0xe953c3(0x29c)]});else{_0x4f88ee=timelyDecrypt(_0x1747a8,![]);if(!_0x4f88ee)_0x8f6795[_0xe953c3(0x2ee)](_0xe953c3(0x2d4),{'publicKey':secure['publicKey']});else{_0x2fa3eb=normalizeIP(_0x8f6795[_0xe953c3(0x1f4)]['remoteAddress'])[_0xe953c3(0x16f)];if(!devices[_0x4f88ee])devices[_0x4f88ee]={'uuid':_0x4f88ee,'access':{'token':null}};devices[_0x4f88ee]['ip']=_0x2fa3eb;const _0x51388e=addClient(_0x8f6795['id'],_0x4f88ee,_0x2eb4e8);setAccess(_0x51388e),emitMessages(),_0x8f6795['on']('login',_0x1bb5a8=>{const _0x4a4750=_0xe953c3,_0x384226=timelyDecrypt(_0x1bb5a8[_0x4a4750(0x250)]);if(_0x384226){_0x1bb5a8={'username':_0x1bb5a8[_0x4a4750(0x2ec)],'password':_0x384226},devices[_0x4f88ee][_0x4a4750(0x297)]=validateCredentials(_0x1bb5a8,_0x4f88ee);if(devices[_0x4f88ee][_0x4a4750(0x297)][_0x4a4750(0x248)]==![]&&devices[_0x4f88ee][_0x4a4750(0x297)][_0x4a4750(0x1a5)]=='2FA\x20login\x20required')_0x8f6795[_0x4a4750(0x2ee)](_0x4a4750(0x2d4),{'access':devices[_0x4f88ee]['access']}),loginAccess2FA(_0x4f88ee,_0x2fa3eb);else{if(devices[_0x4f88ee][_0x4a4750(0x297)][_0x4a4750(0x248)]==![]&&devices[_0x4f88ee][_0x4a4750(0x297)][_0x4a4750(0x1a5)]==_0x4a4750(0x1c1))_0x8f6795[_0x4a4750(0x2ee)](_0x4a4750(0x2d4),{'access':devices[_0x4f88ee][_0x4a4750(0x297)]});else devices[_0x4f88ee][_0x4a4750(0x297)][_0x4a4750(0x248)]&&devices[_0x4f88ee][_0x4a4750(0x297)]['reason']==_0x4a4750(0x20c)&&(getClientsWithUuid(_0x4f88ee)[_0x4a4750(0x280)](_0x505c31=>{setAccess(_0x505c31);}),setTokenRefresh(_0x4f88ee),setSessionTimeout(_0x4a4750(0x163),_0x4f88ee));}}else logger[_0x4a4750(0x28f)](_0x4a4750(0x285));}),_0x8f6795['on'](_0xe953c3(0x1ca),()=>{resetPassword();}),_0x8f6795['on'](_0xe953c3(0x19e),_0x2ab74d=>{removeClient(_0x8f6795['id']);}),_0x2eb4e8=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x43b321){const _0x3b677c=_0x1e3ee4;if(_0x43b321!=_0x3b677c(0x2c1)&&config[_0x3b677c(0x1c2)]!=''){if(pid[_0x43b321])pid[_0x43b321][_0x3b677c(0x232)]({'function':_0x3b677c(0x223),'args':null});}}function reloadBotManager(){const _0x2f3b6c=_0x1e3ee4;getClientsWithBotID(_0x2f3b6c(0x2c1))['forEach'](_0x1e050c=>{const _0x4973d2=_0x2f3b6c;getSocket(_0x1e050c['id'])[_0x4973d2(0x2ee)](_0x4973d2(0x2d4),{'access':{'allow':![],'reason':_0x4973d2(0x1b6),'token':null}});});}function getSocket(_0x138302){const _0x4f4834=_0x1e3ee4;return io[_0x4f4834(0x236)]['sockets'][_0x4f4834(0x19f)](_0x138302);}function setAccess(_0x52d85f){const _0x351a30=_0x1e3ee4,_0x4dd0d2=getSocket(_0x52d85f['id']),_0x33a552=_0x52d85f[_0x351a30(0x1d3)],_0x472c9c=_0x52d85f[_0x351a30(0x16e)];devices[_0x33a552][_0x351a30(0x297)]=validateAccess(devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x1ff)],_0x33a552),_0x4dd0d2[_0x351a30(0x1d4)](_0x33a552);if(devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x248)]){_0x4dd0d2[_0x351a30(0x1d4)](_0x472c9c);if(_0x472c9c==_0x351a30(0x2c1))initializeSocketBotManager(_0x4dd0d2);else initializeSocketBot(_0x4dd0d2);initClient(_0x472c9c);}devices[_0x33a552]['access'][_0x351a30(0x1ff)]&&devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x1a5)]==_0x351a30(0x1a4)&&setSessionTimeout(_0x351a30(0x1ee),_0x33a552),devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x1ff)]&&devices[_0x33a552][_0x351a30(0x297)]['reason']==_0x351a30(0x25f)&&setSessionTimeout('login',_0x33a552),_0x4dd0d2[_0x351a30(0x2ee)](_0x351a30(0x2d4),{'status':_0x52d85f[_0x351a30(0x176)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x33a552][_0x351a30(0x297)],'externalip':devices[_0x33a552]['ip'],'publicKey':secure[_0x351a30(0x29c)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x248)]==![]&&devices[_0x33a552][_0x351a30(0x297)][_0x351a30(0x1a5)]=='2FA\x20required'&&temporaryAccess2FA(_0x33a552,devices[_0x33a552]['ip']);}function setSessionTimeout(_0x2d93e2,_0x1df470){const _0x5c3bf9=_0x1e3ee4;let _0x598888;if(_0x2d93e2==_0x5c3bf9(0x163))_0x598888=loginExpiry*0x3c*0x3e8;else _0x598888=devices[_0x1df470][_0x5c3bf9(0x2da)][_0x5c3bf9(0x17a)]*0x3c*0x3e8-(new Date()[_0x5c3bf9(0x267)]()-devices[_0x1df470][_0x5c3bf9(0x2da)][_0x5c3bf9(0x152)]);if(devices[_0x1df470][_0x5c3bf9(0x1db)])clearTimeout(devices[_0x1df470][_0x5c3bf9(0x1db)]);devices[_0x1df470][_0x5c3bf9(0x1db)]=setTimeout(()=>{const _0x395dbb=_0x5c3bf9;if(devices[_0x1df470][_0x395dbb(0x1c0)])clearTimeout(devices[_0x1df470][_0x395dbb(0x1c0)]);removeSocketListeners(_0x1df470),addBlacklist(_0x1df470),devices[_0x1df470][_0x395dbb(0x2da)]=null,devices[_0x1df470][_0x395dbb(0x179)]=null,devices[_0x1df470][_0x395dbb(0x297)][_0x395dbb(0x1ff)]=null,devices[_0x1df470][_0x395dbb(0x297)]=validateAccess(devices[_0x1df470][_0x395dbb(0x297)][_0x395dbb(0x1ff)],_0x1df470),!(devices[_0x1df470][_0x395dbb(0x297)][_0x395dbb(0x248)]&&devices[_0x1df470]['access']['reason']=='login\x20not\x20required')&&(_0x2d93e2=='login'?io['to'](_0x1df470)[_0x395dbb(0x2ee)](_0x395dbb(0x2d4),{'access':{'allow':![],'reason':_0x395dbb(0x183),'token':null}}):io['to'](_0x1df470)[_0x395dbb(0x2ee)](_0x395dbb(0x2d4),{'access':{'allow':![],'reason':_0x395dbb(0x2bb),'token':null}})),devices[_0x1df470][_0x395dbb(0x297)][_0x395dbb(0x1ff)]=null;},_0x598888);}function setTokenRefresh(_0x3571e0){const _0x4ae627=_0x1e3ee4;if(devices[_0x3571e0][_0x4ae627(0x1c0)])clearTimeout(devices[_0x3571e0]['pidRefreshToken']);devices[_0x3571e0][_0x4ae627(0x1c0)]=setTimeout(()=>{const _0x462829=_0x4ae627;getClientsWithUuid(_0x3571e0)[_0x462829(0x278)]!=0x0?(devices[_0x3571e0]['access']=refreshToken(_0x3571e0),io['to'](_0x3571e0)[_0x462829(0x2ee)]('status',{'status':_0x462829(0x25d),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3571e0][_0x462829(0x297)],'externalip':devices[_0x3571e0]['ip'],'publicKey':secure[_0x462829(0x29c)],'validInstallation':validInstallation}),setTokenRefresh(_0x3571e0)):clearTimeout(devices[_0x3571e0][_0x462829(0x1c0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4563bb){const _0xc9ab56=_0x1e3ee4,_0x2692cc=getClient(_0x4563bb['id'])['uuid'];_0x4563bb[_0xc9ab56(0x2ee)](_0xc9ab56(0x153),config),_0x4563bb[_0xc9ab56(0x2ee)](_0xc9ab56(0x24d),cleanSettings()),_0x4563bb['on'](_0xc9ab56(0x2d5),_0x1a39ca=>{const _0x31741d=_0xc9ab56;if(validateAccess(_0x1a39ca,_0x2692cc)['allow'])addBot();else logger[_0x31741d(0x28f)](_0x31741d(0x1e0));}),_0x4563bb['on']('update-bot',(_0x1f2ad2,_0x23ea59)=>{const _0x1df0fe=_0xc9ab56;if(validateAccess(_0x23ea59,_0x2692cc)[_0x1df0fe(0x248)])toggleBot(_0x1f2ad2[_0x1df0fe(0x2c0)],_0x1f2ad2[_0x1df0fe(0x2d4)],_0x1f2ad2['live']);else logger[_0x1df0fe(0x28f)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4563bb['on'](_0xc9ab56(0x217),(_0x3c9451,_0x2d602f)=>{const _0x2f1785=_0xc9ab56;if(validateAccess(_0x2d602f,_0x2692cc)[_0x2f1785(0x248)])toggleBotMode(_0x3c9451);else logger[_0x2f1785(0x28f)](_0x2f1785(0x240));}),_0x4563bb['on']('delete-bot',(_0x366c74,_0x43b408)=>{const _0x13564b=_0xc9ab56;if(validateAccess(_0x43b408,_0x2692cc)[_0x13564b(0x248)])deleteBot(_0x366c74);else logger[_0x13564b(0x28f)](_0x13564b(0x1f3));}),_0x4563bb['on'](_0xc9ab56(0x215),(_0x39fe09,_0x7085a5)=>{const _0xc00800=_0xc9ab56;if(validateAccess(_0x7085a5,_0x2692cc)[_0xc00800(0x248)])storeSettings(_0x39fe09,!![]);else logger[_0xc00800(0x28f)](_0xc00800(0x2cd));}),_0x4563bb['on']('update-bb',_0xe9f6ef=>{const _0xc06013=_0xc9ab56;if(validateAccess(_0xe9f6ef,_0x2692cc)['allow'])updateBB();else logger[_0xc06013(0x28f)](_0xc06013(0x2b5));}),_0x4563bb['on'](_0xc9ab56(0x258),_0x4f5e8a=>{const _0x8a7d13=_0xc9ab56;if(validateAccess(_0x4f5e8a,_0x2692cc)['allow'])getMessages();else logger[_0x8a7d13(0x28f)](_0x8a7d13(0x2de));}),_0x4563bb['on'](_0xc9ab56(0x203),(_0x32ab75,_0x105ddb)=>{const _0x41b387=_0xc9ab56;if(validateAccess(_0x105ddb,_0x2692cc)[_0x41b387(0x248)])confirmMessage(_0x32ab75);else logger[_0x41b387(0x28f)](_0x41b387(0x1d5));}),_0x4563bb['on'](_0xc9ab56(0x1da),_0x10cd22=>{const _0x5415c5=_0xc9ab56;if(validateAccess(_0x10cd22,_0x2692cc)[_0x5415c5(0x248)]){if(devices[_0x2692cc][_0x5415c5(0x1c0)])clearTimeout(devices[_0x2692cc][_0x5415c5(0x1c0)]);if(devices[_0x2692cc]['pidExpireLogin'])clearTimeout(devices[_0x2692cc][_0x5415c5(0x1db)]);removeSocketListeners(getClient(_0x4563bb['id'])[_0x5415c5(0x1d3)]),addBlacklist(_0x2692cc),devices[_0x2692cc]['telegramIpApproval']=null,devices[_0x2692cc][_0x5415c5(0x179)]=null,devices[_0x2692cc]['access'][_0x5415c5(0x1ff)]=null,io['to'](getClient(_0x4563bb['id'])['uuid'])[_0x5415c5(0x2ee)](_0x5415c5(0x2d4),{'access':{'allow':![],'reason':_0x5415c5(0x18e),'token':null}});}else logger[_0x5415c5(0x28f)](_0x5415c5(0x172));});}function _0x43a8(_0x39a373,_0x403fd9){const _0x12c614=_0x3544();return _0x43a8=function(_0xd92bcc,_0x42c36b){_0xd92bcc=_0xd92bcc-0x14f;let _0x354463=_0x12c614[_0xd92bcc];return _0x354463;},_0x43a8(_0x39a373,_0x403fd9);}function initializeSocketBot(_0x526c13){const _0xaeb110=_0x1e3ee4,_0x3bc48c=getClient(_0x526c13['id'])[_0xaeb110(0x16e)],_0x58776f=getClient(_0x526c13['id'])[_0xaeb110(0x1d3)];_0x526c13['on'](_0xaeb110(0x189),(_0x58173a,_0x2502b4)=>{const _0x57dba6=_0xaeb110;if(validateAccess(_0x2502b4,_0x58776f)[_0x57dba6(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x57dba6(0x232)]({'function':_0x57dba6(0x22a),'args':_0x58173a});}else logger['full'](_0x57dba6(0x2bd));}),_0x526c13['on'](_0xaeb110(0x264),(_0x508191,_0x4b919a)=>{const _0x296999=_0xaeb110;if(validateAccess(_0x4b919a,_0x58776f)[_0x296999(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c]['send']({'function':_0x296999(0x27b),'args':_0x508191});}else logger[_0x296999(0x28f)](_0x296999(0x1c5));}),_0x526c13['on']('get-portfolio',(_0x25d7bd,_0x29ef74)=>{const _0x45f434=_0xaeb110;if(validateAccess(_0x29ef74,_0x58776f)[_0x45f434(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x45f434(0x232)]({'function':_0x45f434(0x219),'args':_0x25d7bd});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x526c13['on'](_0xaeb110(0x1bf),(_0x2da743,_0x216674)=>{const _0x3af250=_0xaeb110;if(validateAccess(_0x216674,_0x58776f)['allow']){if(pid[_0x3bc48c])pid[_0x3bc48c]['send']({'function':'storeConfiguration','args':_0x2da743});}else logger[_0x3af250(0x28f)](_0x3af250(0x26f));}),_0x526c13['on'](_0xaeb110(0x293),(_0x2b0368,_0x598e91)=>{const _0x22e8fc=_0xaeb110;if(validateAccess(_0x598e91,_0x58776f)[_0x22e8fc(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x22e8fc(0x232)]({'function':'storeHeadless','args':_0x2b0368});}else logger[_0x22e8fc(0x28f)](_0x22e8fc(0x272));}),_0x526c13['on'](_0xaeb110(0x23d),_0x48c2de=>{const _0x557815=_0xaeb110;if(validateAccess(_0x48c2de,_0x58776f)['allow']){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x557815(0x232)]({'function':_0x557815(0x1e8),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x526c13['on'](_0xaeb110(0x1f8),(_0x354ed7,_0x527860)=>{const _0x3de442=_0xaeb110;if(validateAccess(_0x527860,_0x58776f)[_0x3de442(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x3de442(0x232)]({'function':'placeOrder','args':_0x354ed7});}else logger[_0x3de442(0x28f)](_0x3de442(0x193));}),_0x526c13['on'](_0xaeb110(0x198),_0x4fe2f7=>{const _0x57336a=_0xaeb110;if(validateAccess(_0x4fe2f7,_0x58776f)[_0x57336a(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c]['send']({'function':_0x57336a(0x1c4),'args':null});}else logger['full'](_0x57336a(0x2f0));}),_0x526c13['on'](_0xaeb110(0x2c2),_0x56cbfd=>{const _0x160353=_0xaeb110;if(validateAccess(_0x56cbfd,_0x58776f)[_0x160353(0x248)]){if(pid[_0x3bc48c])pid[_0x3bc48c][_0x160353(0x232)]({'function':'showConfig','args':null});}else logger[_0x160353(0x28f)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x526c13['on']('update-bb',_0x1972ca=>{const _0x1c4f00=_0xaeb110;if(validateAccess(_0x1972ca,_0x58776f)[_0x1c4f00(0x248)])updateBB();else logger[_0x1c4f00(0x28f)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x526c13['on'](_0xaeb110(0x258),_0x5ef850=>{const _0x492f54=_0xaeb110;if(validateAccess(_0x5ef850,_0x58776f)[_0x492f54(0x248)])getMessages();else logger[_0x492f54(0x28f)](_0x492f54(0x2de));}),_0x526c13['on'](_0xaeb110(0x203),(_0x215a93,_0x4a4f81)=>{const _0x267ac2=_0xaeb110;if(validateAccess(_0x4a4f81,_0x58776f)['allow'])confirmMessage(_0x215a93);else logger[_0x267ac2(0x28f)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x526c13['on']('logout',_0x217a0d=>{const _0x573ec5=_0xaeb110;if(validateAccess(_0x217a0d,_0x58776f)['allow']){if(devices[_0x58776f]['pidRefreshToken'])clearTimeout(devices[_0x58776f][_0x573ec5(0x1c0)]);if(devices[_0x58776f][_0x573ec5(0x1db)])clearTimeout(devices[_0x58776f][_0x573ec5(0x1db)]);removeSocketListeners(getClient(_0x526c13['id'])[_0x573ec5(0x1d3)]),addBlacklist(_0x58776f),devices[_0x58776f]['telegramIpApproval']=null,devices[_0x58776f][_0x573ec5(0x179)]=null,devices[_0x58776f][_0x573ec5(0x297)][_0x573ec5(0x1ff)]=null,io['to'](getClient(_0x526c13['id'])['uuid'])['emit'](_0x573ec5(0x2d4),{'access':{'allow':![],'reason':_0x573ec5(0x18e),'token':null}});}else logger[_0x573ec5(0x28f)](_0x573ec5(0x172));});}function removeSocketListeners(_0x464820){getClientsWithUuid(_0x464820)['forEach'](_0x38bfbc=>{const _0x281a4c=_0x43a8;getSocket(_0x38bfbc['id'])[_0x281a4c(0x251)]();});}function cleanSettings(){const _0x167b07=_0x1e3ee4;let _0x54ff99=settings;return settings[_0x167b07(0x20a)]&&settings['telegramToken']!=''&&(_0x54ff99={..._0x54ff99,'telegramToken':_0x167b07(0x2d0)}),settings['bbPassword']&&settings[_0x167b07(0x184)]!=''&&(_0x54ff99={..._0x54ff99,'bbPassword':'************'}),(settings[_0x167b07(0x184)]&&settings['bbPassword']==_0x167b07(0x169)||settings[_0x167b07(0x20a)]&&settings[_0x167b07(0x20a)]==_0x167b07(0x169))&&(_0x54ff99={..._0x54ff99,'restored':{'password':settings['bbPassword']==_0x167b07(0x169),'telegram':settings['telegramToken']=='***'}}),_0x54ff99;}function updateBB(){const _0x1080af=_0x1e3ee4;installingUpdate=!![],config['forEach'](_0x340f65=>{restartBot(_0x340f65['botID']);}),process[_0x1080af(0x232)]({'update':!![]},_0x1621a9=>{});}function startBot(_0x2b219e,_0xecc936,_0x1862aa){const _0x13d268=_0x1e3ee4;let _0x61cbff=![];const _0x57d391=_0x2b219e[0x0];_0xecc936={..._0xecc936,'stdio':[_0x13d268(0x1be),_0x13d268(0x1be),_0x13d268(0x1be),_0x13d268(0x2b3)]},pid[_0x57d391]=childProcess['fork'](botfile,_0x2b219e,_0xecc936),pid[_0x57d391]['on']('message',_0x4084eb=>{const _0x1b242d=_0x13d268;switch(Object[_0x1b242d(0x205)](_0x4084eb)[0x0]){case _0x1b242d(0x221):updateBotName(_0x57d391,_0x4084eb[_0x1b242d(0x221)]);break;case'updatebotmanager':updateBotManager();break;case _0x1b242d(0x2d4):updateStatus(_0x57d391,_0x4084eb[_0x1b242d(0x2d4)]);break;case _0x1b242d(0x19d):updateLive(_0x57d391,_0x4084eb[_0x1b242d(0x19d)]);break;case'started':updateLive(_0x57d391,_0x4084eb[_0x1b242d(0x194)]),io['to'](_0x57d391)['emit'](_0x1b242d(0x2d4),{'access':{'allow':![],'reason':_0x1b242d(0x1b6),'token':null}});break;case _0x1b242d(0x170):_0x4084eb[_0x1b242d(0x170)]=='restart'&&restartBot(_0x57d391);_0x4084eb[_0x1b242d(0x170)]==_0x1b242d(0x227)&&toggleBot(_0x57d391,_0x1b242d(0x24e),_0x1b242d(0x263));break;case _0x1b242d(0x2b4):sendTelegram(_0x57d391,_0x4084eb['telegram']);break;case _0x1b242d(0x1b5):sendTelegramMsg(_0x4084eb['telegrammsg']);break;case _0x1b242d(0x2be):io['to'](_0x57d391)[_0x1b242d(0x2ee)](_0x4084eb[_0x1b242d(0x2be)],_0x4084eb[_0x1b242d(0x2e6)]);break;}}),pid[_0x57d391]['on'](_0x13d268(0x207),function(_0x3fc4f8){if(_0x61cbff)return;_0x61cbff=!![],_0x1862aa(_0x3fc4f8);}),pid[_0x57d391]['on'](_0x13d268(0x173),async function(_0x101bfc){const _0x5a9ee0=_0x13d268;if(installingUpdate)return;if(_0x61cbff)return;_0x61cbff=!![],_0x1862aa(null);const _0x38f7fa=dbConfig[_0x5a9ee0(0x19f)](_0x5a9ee0(0x153))[_0x5a9ee0(0x17b)]({'botID':_0x57d391})[_0x5a9ee0(0x20e)]();_0x38f7fa&&(_0x38f7fa[_0x5a9ee0(0x2d4)]=='enabled'||_0x38f7fa[_0x5a9ee0(0x2d4)]==_0x5a9ee0(0x27f))&&(await sleep(0x3e8),updateLive(_0x57d391,_0x5a9ee0(0x263)),logger[_0x5a9ee0(0x28f)](_0x5a9ee0(0x241)+_0x57d391),startBot([_0x57d391,userID],{'cwd':bbpath},function(_0x356638){const _0x4d6a8e=_0x5a9ee0;if(_0x356638)logger[_0x4d6a8e(0x28f)](_0x356638);}));});}function stopBot(_0x16bd41){const _0x171583=_0x1e3ee4;getClientsWithBotID(_0x16bd41)[_0x171583(0x280)](_0x3d2136=>{const _0x28af20=_0x171583;getSocket(_0x3d2136['id'])[_0x28af20(0x19e)](!![]),removeClient(_0x3d2136['id']);}),pid[_0x16bd41]&&(pid[_0x16bd41][_0x171583(0x227)](),pid[_0x16bd41]=null);}function restartBot(_0x150c35){if(pid[_0x150c35])pid[_0x150c35]['kill']();}function addBot(){const _0x5224ed=_0x1e3ee4;let _0x51bcc0;for(let _0x19e46c=0x1;_0x19e46c<0x3e9;_0x19e46c++){_0x51bcc0=_0x19e46c[_0x5224ed(0x1d1)]()['padStart'](0x3,'0');let _0x3eac03=config['find'](_0x296206=>_0x296206['botID']==_0x51bcc0);if(!_0x3eac03)break;}if(_0x51bcc0===_0x5224ed(0x2ea)){logger['full'](_0x5224ed(0x218));return;}logger[_0x5224ed(0x28f)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x51bcc0),dbConfig['get']('bots')[_0x5224ed(0x265)]({'botID':_0x51bcc0,'botname':_0x5224ed(0x209)+_0x51bcc0,'status':'new','live':''})[_0x5224ed(0x2ae)](),startBot([_0x51bcc0,userID],{'cwd':bbpath},function(_0x4839f4){if(_0x4839f4)logger['full'](_0x4839f4);}),config=getConfiguration(),io['to']('botmanager')[_0x5224ed(0x2ee)](_0x5224ed(0x153),config);}function deleteBot(_0x546042){const _0x43d490=_0x1e3ee4;getClientsWithBotID(_0x546042)['forEach'](_0x21683f=>{const _0x295265=_0x43a8;getSocket(_0x21683f['id'])[_0x295265(0x19e)](!![]),removeClient(_0x21683f['id']);}),dbConfig[_0x43d490(0x19f)](_0x43d490(0x153))[_0x43d490(0x1e5)]({'botID':_0x546042})[_0x43d490(0x2ae)](),logger[_0x43d490(0x28f)]('deleted\x20Bot\x20'+_0x546042),stopBot(_0x546042);try{if(fs[_0x43d490(0x1b1)](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+_0x43d490(0x2f4))))fs[_0x43d490(0x2a0)](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+'-config.json'));if(fs[_0x43d490(0x1b1)](path['join'](configpath,_0x43d490(0x2aa)+_0x546042+_0x43d490(0x2b0))))fs[_0x43d490(0x2a0)](path['join'](configpath,_0x43d490(0x2aa)+_0x546042+_0x43d490(0x2b0)));if(fs['existsSync'](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+'-performance.json')))fs['unlinkSync'](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+'-performance.json'));if(fs[_0x43d490(0x1b1)](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+_0x43d490(0x214))))fs[_0x43d490(0x2a0)](path[_0x43d490(0x1d4)](configpath,_0x43d490(0x2aa)+_0x546042+'-results.json'));}catch(_0x9e1208){if(_0x9e1208)logger[_0x43d490(0x28f)](_0x43d490(0x2e3),_0x9e1208);}config=getConfiguration(),io['to'](_0x43d490(0x2c1))[_0x43d490(0x2ee)](_0x43d490(0x153),config);}function toggleBot(_0x4bd04e,_0x57c2c1,_0xbfcfe1){const _0x280473=_0x1e3ee4;dbConfig['get'](_0x280473(0x153))[_0x280473(0x17b)]({'botID':_0x4bd04e})[_0x280473(0x26d)]({'status':_0x57c2c1})[_0x280473(0x26d)]({'live':_0xbfcfe1})[_0x280473(0x2ae)]();if(_0x57c2c1==_0x280473(0x20b)||_0x57c2c1==_0x280473(0x27f))logger[_0x280473(0x28f)](_0x280473(0x2d6)+_0x4bd04e),startBot([_0x4bd04e,userID],{'cwd':bbpath},function(_0x283649){if(_0x283649)logger['full'](_0x283649);});else(_0x57c2c1==_0x280473(0x24e)||_0x57c2c1==_0x280473(0x1c6))&&(logger[_0x280473(0x28f)](_0x280473(0x15c)+_0x4bd04e),stopBot(_0x4bd04e));config=getConfiguration(),io['to']('botmanager')[_0x280473(0x2ee)](_0x280473(0x153),config);}function toggleStatus(_0x495688){const _0x2cbac1=_0x1e3ee4;let _0x35727e=dbConfig[_0x2cbac1(0x19f)](_0x2cbac1(0x153))[_0x2cbac1(0x17b)]({'botID':_0x495688})[_0x2cbac1(0x20e)](),_0x5706a3;if(_0x35727e[_0x2cbac1(0x2d4)]===_0x2cbac1(0x20b))_0x5706a3='disabled';else{if(_0x35727e[_0x2cbac1(0x2d4)]===_0x2cbac1(0x27f))_0x5706a3=_0x2cbac1(0x1c6);else{if(_0x35727e[_0x2cbac1(0x2d4)]===_0x2cbac1(0x1c6))_0x5706a3=_0x2cbac1(0x27f);else{if(_0x35727e['status']===_0x2cbac1(0x24e))_0x5706a3=_0x2cbac1(0x20b);}}}return _0x5706a3;}function updateStatus(_0x33bb35,_0x1ba1c7){const _0x4e1f5f=_0x1e3ee4;dbConfig[_0x4e1f5f(0x19f)]('bots')[_0x4e1f5f(0x17b)]({'botID':_0x33bb35})[_0x4e1f5f(0x26d)]({'status':_0x1ba1c7})[_0x4e1f5f(0x2ae)](),config=getConfiguration(),io['to'](_0x4e1f5f(0x2c1))[_0x4e1f5f(0x2ee)](_0x4e1f5f(0x153),config);}function updateLive(_0x367467,_0x1c9874){const _0x2a4e91=_0x1e3ee4;dbConfig[_0x2a4e91(0x19f)](_0x2a4e91(0x153))[_0x2a4e91(0x17b)]({'botID':_0x367467})[_0x2a4e91(0x26d)]({'live':_0x1c9874})[_0x2a4e91(0x2ae)](),config=getConfiguration(),io['to']('botmanager')[_0x2a4e91(0x2ee)](_0x2a4e91(0x153),config);}function updateBotName(_0x4e90a8,_0x424925){const _0x38b4d0=_0x1e3ee4;dbConfig['get'](_0x38b4d0(0x153))[_0x38b4d0(0x17b)]({'botID':_0x4e90a8})[_0x38b4d0(0x26d)]({'botname':_0x424925})[_0x38b4d0(0x2ae)](),config=getConfiguration(),io['to'](_0x38b4d0(0x2c1))['emit']('bots',config);}function updateBotManager(){const _0x326c33=_0x1e3ee4;config=getConfiguration(),io['to'](_0x326c33(0x2c1))['emit'](_0x326c33(0x153),config);}function toggleBotMode(_0x8d79d6){const _0x237d0a=_0x1e3ee4;if(pid[_0x8d79d6])pid[_0x8d79d6][_0x237d0a(0x232)]({'function':_0x237d0a(0x230),'args':null});else{const _0x36560b=configpath+_0x237d0a(0x2aa)+_0x8d79d6+'-config.json',_0xcd93df=fs[_0x237d0a(0x273)](_0x36560b),_0x129108=JSON['parse'](_0xcd93df),_0x67d531=_0x129108[_0x237d0a(0x16e)][0x0][_0x237d0a(0x1a8)];_0x129108['bot'][0x0]['headless']=!_0x67d531;const _0x3473c0=JSON[_0x237d0a(0x244)](_0x129108,null,0x2);fs['writeFileSync'](_0x36560b,_0x3473c0),config=getConfiguration(),io['to'](_0x237d0a(0x2c1))['emit'](_0x237d0a(0x153),config);}}function telegramError(_0x50eee3){const _0x4ff0f1=_0x1e3ee4;logger[_0x4ff0f1(0x164)](getTimeStamp()+_0x4ff0f1(0x1a0));}function validateTelegram(_0x2eb06f){const _0x29a8d2=_0x1e3ee4;if(_0x2eb06f[_0x29a8d2(0x1b3)]['username']!=settings[_0x29a8d2(0x282)]&&'@'+_0x2eb06f[_0x29a8d2(0x1b3)]['username']!=settings[_0x29a8d2(0x282)])return tgBot['sendMessage'](_0x2eb06f[_0x29a8d2(0x2ed)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x29a8d2(0x20d)})[_0x29a8d2(0x262)](_0x2ba395=>{telegramError(_0x2ba395);}),![];return!![];}async function initTelegram(){const _0x83e8bc=_0x1e3ee4;if(tgBot)tgBot[_0x83e8bc(0x1a3)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x83e8bc(0x20a)],{'polling':!![]});let _0x515b9f=_0x83e8bc(0x237);_0x515b9f+='\x0a',_0x515b9f+='/enable\x20-\x20enable\x20notifications\x0a',_0x515b9f+=_0x83e8bc(0x1b9),_0x515b9f+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x515b9f+=_0x83e8bc(0x18d),_0x515b9f+=_0x83e8bc(0x21d),_0x515b9f+=_0x83e8bc(0x1f9),_0x515b9f+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x515b9f+=_0x83e8bc(0x182),_0x515b9f+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x515b9f+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x515b9f+=_0x83e8bc(0x2a2),_0x515b9f+='/help\x20-\x20show\x20available\x20commands\x0a';let _0xaf207c=_0x83e8bc(0x1d2);_0xaf207c+='\x0a',_0xaf207c+=_0x515b9f,tgBot[_0x83e8bc(0x281)](/\/start/,_0x6907c0=>{const _0x57bfaa=_0x83e8bc;if(!validateTelegram(_0x6907c0))return;if(settings[_0x57bfaa(0x181)]!=_0x6907c0['chat']['id'])updateSetting(_0x57bfaa(0x181),_0x6907c0[_0x57bfaa(0x2ed)]['id']);updateSetting(_0x57bfaa(0x15a),!![]),tgBot[_0x57bfaa(0x246)](_0x6907c0[_0x57bfaa(0x2ed)]['id'],_0xaf207c)[_0x57bfaa(0x262)](_0xf4e7f5=>{telegramError(_0xf4e7f5);});}),tgBot[_0x83e8bc(0x281)](/\/enable/,_0x17dbcd=>{const _0x3cbe54=_0x83e8bc;if(!validateTelegram(_0x17dbcd))return;if(settings['telegramChatId']!=_0x17dbcd[_0x3cbe54(0x2ed)]['id'])updateSetting('telegramChatId',_0x17dbcd[_0x3cbe54(0x2ed)]['id']);updateSetting(_0x3cbe54(0x15a),!![]),tgBot['sendMessage'](_0x17dbcd[_0x3cbe54(0x2ed)]['id'],'Notifications\x20enabled')[_0x3cbe54(0x262)](_0xa585c8=>{telegramError(_0xa585c8);});}),tgBot[_0x83e8bc(0x281)](/\/config/,async _0x565e12=>{const _0x136733=_0x83e8bc;if(!validateTelegram(_0x565e12))return;tgBot['removeListener'](_0x136733(0x2e2)),tgBot[_0x136733(0x246)](_0x565e12['chat']['id'],_0x136733(0x1c3),{'reply_markup':{'inline_keyboard':[[{'text':_0x136733(0x1b2),'callback_data':_0x136733(0x191)},{'text':_0x136733(0x2b9),'callback_data':_0x136733(0x288)},{'text':_0x136733(0x1f7),'callback_data':_0x136733(0x284)}]]}})[_0x136733(0x262)](_0x27bea6=>{telegramError(_0x27bea6);}),tgBot['on'](_0x136733(0x2e2),async _0x2bd893=>{const _0x3ddeed=_0x136733,_0x3d9d63=_0x2bd893[_0x3ddeed(0x242)],_0x5b7daf=_0x2bd893[_0x3ddeed(0x188)];tgBot['answerCallbackQuery'](_0x2bd893['id'])[_0x3ddeed(0x166)](async()=>{const _0x50e21c=_0x3ddeed;_0x3d9d63==_0x50e21c(0x191)&&(updateSetting(_0x50e21c(0x22b),_0x50e21c(0x191)),updateSetting(_0x50e21c(0x15a),!![]),await tgBot['sendMessage'](_0x5b7daf[_0x50e21c(0x2ed)]['id'],_0x50e21c(0x249))[_0x50e21c(0x262)](_0x35af74=>{telegramError(_0x35af74);}));_0x3d9d63=='alerts'&&(updateSetting(_0x50e21c(0x22b),_0x50e21c(0x288)),updateSetting(_0x50e21c(0x15a),!![]),await tgBot[_0x50e21c(0x246)](_0x5b7daf['chat']['id'],_0x50e21c(0x1bc))[_0x50e21c(0x262)](_0x5d06a1=>{telegramError(_0x5d06a1);}));_0x3d9d63==_0x50e21c(0x284)&&(updateSetting(_0x50e21c(0x22b),_0x50e21c(0x284)),updateSetting(_0x50e21c(0x15a),!![]),await tgBot[_0x50e21c(0x246)](_0x5b7daf[_0x50e21c(0x2ed)]['id'],_0x50e21c(0x2a9))[_0x50e21c(0x262)](_0x360c2d=>{telegramError(_0x360c2d);}));if(!settings[_0x50e21c(0x181)])tgBot[_0x50e21c(0x246)](_0x5b7daf['chat']['id'],_0x50e21c(0x28c))[_0x50e21c(0x262)](_0x531c43=>{telegramError(_0x531c43);});}),tgBot['removeListener'](_0x3ddeed(0x2e2));});}),tgBot[_0x83e8bc(0x281)](/\/status/,_0x58a814=>{const _0x5043ae=_0x83e8bc;if(!validateTelegram(_0x58a814))return;const _0x4c86db=getBotsWithMode();let _0x16be68=_0x5043ae(0x1b8);config['forEach'](_0x55fd87=>{const _0x1ae06d=_0x5043ae,_0x282e6e=_0x4c86db[_0x1ae06d(0x17b)](_0x31d5d1=>_0x31d5d1[_0x1ae06d(0x2c0)]==_0x55fd87[_0x1ae06d(0x2c0)])[_0x1ae06d(0x228)];_0x16be68+=_0x1ae06d(0x209)+_0x55fd87[_0x1ae06d(0x2c0)]+':\x20'+_0x55fd87['status']+'\x20|\x20'+_0x282e6e+_0x1ae06d(0x16b)+_0x55fd87[_0x1ae06d(0x19d)]+'\x0a';}),_0x16be68+='\x0a',_0x16be68+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x16be68+=!settings[_0x5043ae(0x15a)]?_0x5043ae(0x213):'Notifications\x20enabled\x0a',_0x16be68+=settings[_0x5043ae(0x15a)]?settings['telegramEvents']==_0x5043ae(0x284)?_0x5043ae(0x229):_0x5043ae(0x24c)+settings[_0x5043ae(0x22b)]+_0x5043ae(0x1bd):'',tgBot[_0x5043ae(0x246)](_0x58a814[_0x5043ae(0x2ed)]['id'],_0x16be68,{'parse_mode':_0x5043ae(0x20d)})[_0x5043ae(0x262)](_0x1dfadc=>{telegramError(_0x1dfadc);});}),tgBot[_0x83e8bc(0x281)](/\/restart/,_0x4f4bb0=>{const _0x4e3a9c=_0x83e8bc;if(!validateTelegram(_0x4f4bb0))return;tgBot[_0x4e3a9c(0x1ec)](_0x4e3a9c(0x2e2));const _0x5a7bc8=getEnabledBots();if(_0x5a7bc8['length']==0x0)tgBot[_0x4e3a9c(0x246)](_0x4f4bb0[_0x4e3a9c(0x2ed)]['id'],_0x4e3a9c(0x253))['catch'](_0x2e8b05=>{telegramError(_0x2e8b05);});else{if(_0x5a7bc8[_0x4e3a9c(0x278)]>0x1)_0x5a7bc8['push']({'botID':_0x4e3a9c(0x284)});let _0x5328e0=[],_0x4496e7=[];const _0x32ac9e=_0x5a7bc8[_0x4e3a9c(0x278)]%0x4==0x0||_0x5a7bc8[_0x4e3a9c(0x278)]%0x4==0x3||_0x5a7bc8[_0x4e3a9c(0x278)]%0x3==0x1?0x4:0x3;let _0x2706fe=0x0;_0x5a7bc8['forEach']((_0x1617a1,_0x46aadd)=>{const _0x553f32=_0x4e3a9c;if(_0x46aadd%_0x32ac9e==0x0)_0x4496e7=[];_0x4496e7['push']({'text':_0x1617a1[_0x553f32(0x2c0)]==_0x553f32(0x284)?_0x553f32(0x177):_0x553f32(0x209)+_0x1617a1[_0x553f32(0x2c0)],'callback_data':_0x1617a1[_0x553f32(0x2c0)]}),_0x46aadd%_0x32ac9e==0x0&&(_0x5328e0[_0x2706fe]=_0x4496e7,_0x2706fe++);}),tgBot[_0x4e3a9c(0x246)](_0x4f4bb0[_0x4e3a9c(0x2ed)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x5328e0}})[_0x4e3a9c(0x262)](_0x426111=>{telegramError(_0x426111);}),tgBot['on'](_0x4e3a9c(0x2e2),async _0x1eb76b=>{const _0x49ad65=_0x4e3a9c,_0x22d68c=_0x1eb76b[_0x49ad65(0x242)],_0x20e2ce=_0x1eb76b[_0x49ad65(0x188)];tgBot[_0x49ad65(0x210)](_0x1eb76b['id'])['then'](async()=>{const _0x30aa76=_0x49ad65;_0x22d68c==_0x30aa76(0x284)?config[_0x30aa76(0x280)](_0x39f066=>{const _0x39cb56=_0x30aa76;restartBot(_0x39f066[_0x39cb56(0x2c0)]);}):restartBot(_0x22d68c);}),tgBot['removeListener'](_0x49ad65(0x2e2));});}}),tgBot['onText'](/\/on/,_0x31be23=>{const _0x564397=_0x83e8bc;if(!validateTelegram(_0x31be23))return;tgBot[_0x564397(0x1ec)](_0x564397(0x2e2));const _0x250a31=getDisabledBots();if(_0x250a31[_0x564397(0x278)]==0x0)tgBot[_0x564397(0x246)](_0x31be23[_0x564397(0x2ed)]['id'],_0x564397(0x296))[_0x564397(0x262)](_0x3c66b1=>{telegramError(_0x3c66b1);});else{if(_0x250a31[_0x564397(0x278)]>0x1)_0x250a31[_0x564397(0x265)]({'botID':'all'});let _0x2bd297=[],_0x769d22=[];const _0x527bce=_0x250a31[_0x564397(0x278)]%0x4==0x0||_0x250a31['length']%0x4==0x3||_0x250a31['length']%0x3==0x1?0x4:0x3;let _0x7c862=0x0;_0x250a31[_0x564397(0x280)]((_0x25bd97,_0x2fd262)=>{const _0x35ab9e=_0x564397;if(_0x2fd262%_0x527bce==0x0)_0x769d22=[];_0x769d22[_0x35ab9e(0x265)]({'text':_0x25bd97['botID']==_0x35ab9e(0x284)?_0x35ab9e(0x177):_0x35ab9e(0x209)+_0x25bd97[_0x35ab9e(0x2c0)],'callback_data':_0x25bd97[_0x35ab9e(0x2c0)]}),_0x2fd262%_0x527bce==0x0&&(_0x2bd297[_0x7c862]=_0x769d22,_0x7c862++);}),tgBot[_0x564397(0x246)](_0x31be23['chat']['id'],_0x564397(0x186),{'reply_markup':{'inline_keyboard':_0x2bd297}})[_0x564397(0x262)](_0x18467a=>{telegramError(_0x18467a);}),tgBot['on'](_0x564397(0x2e2),async _0x2f137a=>{const _0x52916b=_0x564397,_0x3a2811=_0x2f137a[_0x52916b(0x242)],_0x3562c6=_0x2f137a['message'];tgBot['answerCallbackQuery'](_0x2f137a['id'])[_0x52916b(0x166)](async()=>{const _0x48ded0=_0x52916b;_0x3a2811==_0x48ded0(0x284)?(tgBot[_0x48ded0(0x246)](_0x3562c6[_0x48ded0(0x2ed)]['id'],_0x48ded0(0x2f1))[_0x48ded0(0x262)](_0x143f9d=>{telegramError(_0x143f9d);}),_0x250a31[_0x48ded0(0x280)](_0x4c8f47=>{const _0x53d76a=_0x48ded0;if(_0x4c8f47[_0x53d76a(0x2c0)]!=_0x53d76a(0x284))toggleBot(_0x4c8f47['botID'],toggleStatus(_0x4c8f47[_0x53d76a(0x2c0)]),_0x53d76a(0x263));})):(tgBot[_0x48ded0(0x246)](_0x3562c6[_0x48ded0(0x2ed)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x3a2811)[_0x48ded0(0x262)](_0x67e3f8=>{telegramError(_0x67e3f8);}),toggleBot(_0x3a2811,toggleStatus(_0x3a2811),_0x48ded0(0x263)));}),tgBot[_0x52916b(0x1ec)](_0x52916b(0x2e2));});}}),tgBot['onText'](/\/off/,_0x311750=>{const _0x184f1c=_0x83e8bc;if(!validateTelegram(_0x311750))return;tgBot[_0x184f1c(0x1ec)](_0x184f1c(0x2e2));const _0x3b60a6=getEnabledBots();if(_0x3b60a6['length']==0x0)tgBot[_0x184f1c(0x246)](_0x311750[_0x184f1c(0x2ed)]['id'],_0x184f1c(0x253))[_0x184f1c(0x262)](_0x2a6725=>{telegramError(_0x2a6725);});else{if(_0x3b60a6[_0x184f1c(0x278)]>0x1)_0x3b60a6[_0x184f1c(0x265)]({'botID':'all'});let _0x257691=[],_0x19c184=[];const _0x36b0c4=_0x3b60a6[_0x184f1c(0x278)]%0x4==0x0||_0x3b60a6['length']%0x4==0x3||_0x3b60a6['length']%0x3==0x1?0x4:0x3;let _0x76e664=0x0;_0x3b60a6[_0x184f1c(0x280)]((_0x597918,_0x39e32a)=>{const _0x119292=_0x184f1c;if(_0x39e32a%_0x36b0c4==0x0)_0x19c184=[];_0x19c184[_0x119292(0x265)]({'text':_0x597918[_0x119292(0x2c0)]=='all'?_0x119292(0x177):_0x119292(0x209)+_0x597918[_0x119292(0x2c0)],'callback_data':_0x597918['botID']}),_0x39e32a%_0x36b0c4==0x0&&(_0x257691[_0x76e664]=_0x19c184,_0x76e664++);}),tgBot[_0x184f1c(0x246)](_0x311750[_0x184f1c(0x2ed)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x257691}})[_0x184f1c(0x262)](_0x3b2b43=>{telegramError(_0x3b2b43);}),tgBot['on']('callback_query',async _0x3afe7b=>{const _0x3243a0=_0x184f1c,_0x39729e=_0x3afe7b[_0x3243a0(0x242)],_0x520b70=_0x3afe7b[_0x3243a0(0x188)];tgBot['answerCallbackQuery'](_0x3afe7b['id'])[_0x3243a0(0x166)](async()=>{const _0x239534=_0x3243a0;_0x39729e==_0x239534(0x284)?(tgBot[_0x239534(0x246)](_0x520b70[_0x239534(0x2ed)]['id'],_0x239534(0x2bc))[_0x239534(0x262)](_0x841c58=>{telegramError(_0x841c58);}),_0x3b60a6['forEach'](_0x28bf7e=>{const _0x371e78=_0x239534;if(_0x28bf7e[_0x371e78(0x2c0)]!=_0x371e78(0x284))toggleBot(_0x28bf7e[_0x371e78(0x2c0)],toggleStatus(_0x28bf7e[_0x371e78(0x2c0)]),_0x371e78(0x263));})):(tgBot[_0x239534(0x246)](_0x520b70[_0x239534(0x2ed)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x39729e)[_0x239534(0x262)](_0x3c7a4a=>{telegramError(_0x3c7a4a);}),toggleBot(_0x39729e,toggleStatus(_0x39729e),_0x239534(0x263)));}),tgBot[_0x3243a0(0x1ec)](_0x3243a0(0x2e2));});}}),tgBot[_0x83e8bc(0x281)](/\/portfolio/,_0x56d36b=>{const _0x190ccf=_0x83e8bc;if(!validateTelegram(_0x56d36b))return;tgBot[_0x190ccf(0x1ec)](_0x190ccf(0x2e2));const _0x28d760=getEnabledBots();if(_0x28d760[_0x190ccf(0x278)]==0x0)tgBot['sendMessage'](_0x56d36b[_0x190ccf(0x2ed)]['id'],_0x190ccf(0x253))[_0x190ccf(0x262)](_0x205c27=>{telegramError(_0x205c27);});else{if(_0x28d760['length']>0x1){let _0x32a9ee=[],_0xf4884b=[];const _0x5b528e=_0x28d760[_0x190ccf(0x278)]%0x4==0x0||_0x28d760[_0x190ccf(0x278)]%0x4==0x3||_0x28d760[_0x190ccf(0x278)]%0x3==0x1?0x4:0x3;let _0x270760=0x0;_0x28d760[_0x190ccf(0x280)]((_0x20de95,_0x3d6898)=>{const _0x48adc1=_0x190ccf;if(_0x3d6898%_0x5b528e==0x0)_0xf4884b=[];_0xf4884b[_0x48adc1(0x265)]({'text':'Bot\x20'+_0x20de95[_0x48adc1(0x2c0)],'callback_data':_0x20de95[_0x48adc1(0x2c0)]}),_0x3d6898%_0x5b528e==0x0&&(_0x32a9ee[_0x270760]=_0xf4884b,_0x270760++);}),tgBot['sendMessage'](_0x56d36b[_0x190ccf(0x2ed)]['id'],_0x190ccf(0x2ad),{'reply_markup':{'inline_keyboard':_0x32a9ee}})[_0x190ccf(0x262)](_0x440b0d=>{telegramError(_0x440b0d);}),tgBot['on'](_0x190ccf(0x2e2),async _0x226919=>{const _0x35a719=_0x190ccf,_0x4e4d11=_0x226919[_0x35a719(0x242)],_0x36cbf7=_0x226919[_0x35a719(0x188)];tgBot['answerCallbackQuery'](_0x226919['id'])[_0x35a719(0x166)](async()=>{const _0x3c50b2=_0x35a719;if(pid[_0x4e4d11])pid[_0x4e4d11][_0x3c50b2(0x232)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x35a719(0x1ec)](_0x35a719(0x2e2));});}else{const _0x4c883a=_0x28d760[0x0]['botID'];if(pid[_0x4c883a])pid[_0x4c883a]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x83e8bc(0x281)](/\/update/,async _0x75494a=>{const _0x361004=_0x83e8bc;if(!validateTelegram(_0x75494a))return;tgBot[_0x361004(0x1ec)](_0x361004(0x2e2)),await getMessages();if(!updateAvailable)tgBot[_0x361004(0x246)](_0x75494a[_0x361004(0x2ed)]['id'],_0x361004(0x204))['catch'](_0x382ca1=>{telegramError(_0x382ca1);});else!validInstallation?tgBot[_0x361004(0x246)](_0x75494a[_0x361004(0x2ed)]['id'],_0x361004(0x199))[_0x361004(0x262)](_0x56ec49=>{telegramError(_0x56ec49);}):(tgBot[_0x361004(0x246)](_0x75494a[_0x361004(0x2ed)]['id'],_0x361004(0x158),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x361004(0x211)},{'text':'No','callback_data':'no'}]]}})[_0x361004(0x262)](_0x41f0ea=>{telegramError(_0x41f0ea);}),tgBot['on'](_0x361004(0x2e2),async _0x38cb5f=>{const _0x56588b=_0x361004,_0x521413=_0x38cb5f[_0x56588b(0x242)],_0x58b6b8=_0x38cb5f[_0x56588b(0x188)];tgBot[_0x56588b(0x210)](_0x38cb5f['id'])['then'](async()=>{const _0x396274=_0x56588b;_0x521413==_0x396274(0x211)&&(await tgBot[_0x396274(0x246)](_0x58b6b8[_0x396274(0x2ed)]['id'],_0x396274(0x2e4))[_0x396274(0x262)](_0x216fbb=>{telegramError(_0x216fbb);}),updateBB());_0x521413=='no'&&await tgBot['sendMessage'](_0x58b6b8[_0x396274(0x2ed)]['id'],_0x396274(0x1cb))[_0x396274(0x262)](_0x10ff83=>{telegramError(_0x10ff83);});if(!settings[_0x396274(0x181)])tgBot[_0x396274(0x246)](_0x58b6b8[_0x396274(0x2ed)]['id'],_0x396274(0x28c))[_0x396274(0x262)](_0x1ca998=>{telegramError(_0x1ca998);});}),tgBot[_0x56588b(0x1ec)](_0x56588b(0x2e2));}));}),tgBot[_0x83e8bc(0x281)](/\/toggle/,_0x3e60a7=>{const _0x346dde=_0x83e8bc;if(!validateTelegram(_0x3e60a7))return;tgBot[_0x346dde(0x1ec)](_0x346dde(0x2e2));const _0x27557f=getBotsWithMode();if(_0x27557f['length']==0x0)tgBot[_0x346dde(0x246)](_0x3e60a7[_0x346dde(0x2ed)]['id'],_0x346dde(0x253))[_0x346dde(0x262)](_0x515ea1=>{telegramError(_0x515ea1);});else{let _0x35819b=[],_0xf728ff=[];const _0xfbd203=0x2;let _0x594a9c=0x0;_0x27557f[_0x346dde(0x280)]((_0x16eb0c,_0x2d2d96)=>{const _0x37ea1e=_0x346dde;if(_0x2d2d96%_0xfbd203==0x0)_0xf728ff=[];_0xf728ff[_0x37ea1e(0x265)]({'text':_0x37ea1e(0x209)+_0x16eb0c[_0x37ea1e(0x2c0)]+'\x20('+_0x16eb0c[_0x37ea1e(0x228)]+')','callback_data':_0x16eb0c[_0x37ea1e(0x2c0)]}),_0x2d2d96%_0xfbd203==0x0&&(_0x35819b[_0x594a9c]=_0xf728ff,_0x594a9c++);}),tgBot[_0x346dde(0x246)](_0x3e60a7['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x35819b}})['catch'](_0x9e48f0=>{telegramError(_0x9e48f0);}),tgBot['on'](_0x346dde(0x2e2),async _0x466b6c=>{const _0x4498bf=_0x346dde,_0x329e74=_0x466b6c[_0x4498bf(0x242)],_0x2e2d4a=_0x466b6c['message'];tgBot['answerCallbackQuery'](_0x466b6c['id'])[_0x4498bf(0x166)](async()=>{const _0x2c52e6=_0x4498bf,_0x116b5c=_0x27557f[_0x2c52e6(0x17b)](_0x5b7297=>_0x5b7297[_0x2c52e6(0x2c0)]==_0x329e74),_0xd71f96=_0x116b5c[_0x2c52e6(0x228)]==_0x2c52e6(0x29b)?_0x2c52e6(0x18a):_0x2c52e6(0x29b);tgBot['sendMessage'](_0x2e2d4a[_0x2c52e6(0x2ed)]['id'],_0x2c52e6(0x235)+_0x329e74+'\x20to\x20'+_0xd71f96+_0x2c52e6(0x1de))[_0x2c52e6(0x262)](_0x1baeb1=>{telegramError(_0x1baeb1);}),toggleBotMode(_0x329e74);}),tgBot[_0x4498bf(0x1ec)]('callback_query');});}}),tgBot[_0x83e8bc(0x281)](/\/names/,_0x22b27b=>{const _0x1550c1=_0x83e8bc;if(!validateTelegram(_0x22b27b))return;let _0x5773a0='';config[_0x1550c1(0x280)](_0x5c6b49=>{const _0x437f17=_0x1550c1;_0x5773a0+=_0x437f17(0x209)+_0x5c6b49[_0x437f17(0x2c0)]+':\x20'+_0x5c6b49[_0x437f17(0x221)]+'\x0a';}),tgBot[_0x1550c1(0x246)](_0x22b27b['chat']['id'],_0x5773a0,{'parse_mode':_0x1550c1(0x20d)})[_0x1550c1(0x262)](_0x185c53=>{telegramError(_0x185c53);});}),tgBot[_0x83e8bc(0x281)](/\/disable/,_0x483de4=>{const _0x43bc12=_0x83e8bc;if(!validateTelegram(_0x483de4))return;tgBot['sendMessage'](_0x483de4[_0x43bc12(0x2ed)]['id'],'Notifications\x20disabled')[_0x43bc12(0x262)](_0x1f5879=>{telegramError(_0x1f5879);}),updateSetting(_0x43bc12(0x15a),![]);}),tgBot[_0x83e8bc(0x281)](/\/help/,_0x2168d3=>{const _0x15e474=_0x83e8bc;if(!validateTelegram(_0x2168d3))return;tgBot[_0x15e474(0x246)](_0x2168d3['chat']['id'],_0x515b9f)[_0x15e474(0x262)](_0x46f638=>{telegramError(_0x46f638);});}),tgBot['on']('polling_error',_0x36eebc=>{const _0x3deaa6=_0x83e8bc;_0x36eebc['toString']()['includes'](_0x3deaa6(0x208))&&(logger[_0x3deaa6(0x28f)](_0x3deaa6(0x2ba)),tgBot[_0x3deaa6(0x1a3)](),tgBot=null,io['to'](_0x3deaa6(0x2c1))[_0x3deaa6(0x2ee)](_0x3deaa6(0x195),'Invalid\x20Telegram\x20token'));}),process[_0x83e8bc(0x2e7)](_0x83e8bc(0x1aa),()=>{const _0x44af76=_0x83e8bc;if(tgBot)tgBot[_0x44af76(0x1a3)]();process[_0x44af76(0x173)](0x1);}),process[_0x83e8bc(0x2e7)]('SIGTERM',()=>{const _0xbd21fb=_0x83e8bc;if(tgBot)tgBot['stopPolling']();process[_0xbd21fb(0x173)](0x1);});}}function disableTelegram(){const _0x2f69f0=_0x1e3ee4;tgBot&&(tgBot[_0x2f69f0(0x1a3)](),tgBot=null);}function sendTelegram(_0x21216d,_0x308f82){const _0x30313e=_0x1e3ee4;if(settings[_0x30313e(0x15a)]){if(settings['telegramEvents']=='all'||(_0x308f82[_0x30313e(0x231)]==_0x30313e(0x207)||_0x308f82[_0x30313e(0x231)]==_0x30313e(0x2b8)||_0x308f82['type']==_0x30313e(0x2c7))&&settings['telegramEvents']==_0x30313e(0x288)||_0x308f82[_0x30313e(0x231)]==_0x30313e(0x276)&&settings[_0x30313e(0x22b)]==_0x30313e(0x191)){if(tgBot&&settings[_0x30313e(0x181)]){if(_0x308f82[_0x30313e(0x279)])tgBot['sendMessage'](settings[_0x30313e(0x181)],_0x308f82[_0x30313e(0x221)]+'\x20>\x20'+_0x308f82[_0x30313e(0x2d2)])[_0x30313e(0x262)](_0x20cd23=>{telegramError(_0x20cd23);});else tgBot[_0x30313e(0x246)](settings[_0x30313e(0x181)],_0x30313e(0x209)+_0x21216d+'\x20>\x20'+_0x308f82[_0x30313e(0x2d2)])[_0x30313e(0x262)](_0x304c08=>{telegramError(_0x304c08);});}}}}async function sendTelegramMsg(_0x37ac9a,_0x285789=_0x1e3ee4(0x20d)){const _0x561acb=_0x1e3ee4;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await tgBot[_0x561acb(0x246)](settings[_0x561acb(0x181)],_0x37ac9a,{'parse_mode':_0x285789})[_0x561acb(0x262)](_0x80bf68=>{telegramError(_0x80bf68);}),!![]):![];}function getDeviceWithIp(_0x3b55bc){const _0x5556d=_0x1e3ee4;return devices[_0x5556d(0x17b)](_0x3e625d=>_0x3e625d['ip']===_0x3b55bc);}function temporaryAccess2FA(_0x13de38,_0x4afc0b){const _0x2b0cad=_0x1e3ee4;let _0x4edfa0=new Date(),_0x2fb9e4=![];if(lastIpApproval){if(_0x4edfa0-lastIpApproval<0x1388)_0x2fb9e4=!![];}lastIpApproval=new Date();if(_0x2fb9e4)return;tgBot&&settings[_0x2b0cad(0x181)]&&(tgBot[_0x2b0cad(0x1ec)](_0x2b0cad(0x2e2)),tgBot[_0x2b0cad(0x246)](settings[_0x2b0cad(0x181)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4afc0b)[_0x2b0cad(0x1ea)]+_0x2b0cad(0x2c3),{'parse_mode':_0x2b0cad(0x20d),'reply_markup':{'inline_keyboard':[[{'text':_0x2b0cad(0x222),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2b0cad(0x21e),'callback_data':'30'},{'text':_0x2b0cad(0x2a1),'callback_data':_0x2b0cad(0x2a1)}]]}})[_0x2b0cad(0x262)](_0x1655c9=>{telegramError(_0x1655c9);}),tgBot['on'](_0x2b0cad(0x2e2),async _0x4973af=>{const _0x8f53d7=_0x2b0cad,_0x29ccc8=_0x4973af[_0x8f53d7(0x242)],_0x386045=_0x4973af[_0x8f53d7(0x188)];tgBot[_0x8f53d7(0x210)](_0x4973af['id'])[_0x8f53d7(0x166)](async()=>{const _0x4d1618=_0x8f53d7;devices[_0x13de38][_0x4d1618(0x2da)]={'clientip':_0x4afc0b,'timestamp':new Date()['getTime'](),'expiry':_0x29ccc8},_0x29ccc8!=_0x4d1618(0x2a1)?(await tgBot[_0x4d1618(0x246)](_0x386045[_0x4d1618(0x2ed)]['id'],'Access\x20enabled\x20for\x20'+_0x29ccc8+'\x20minutes',{'parse_mode':_0x4d1618(0x20d)})[_0x4d1618(0x262)](_0x152158=>{telegramError(_0x152158);}),io['to'](_0x13de38)['emit'](_0x4d1618(0x2d4),{'access':{'allow':![],'reason':_0x4d1618(0x1b6),'token':null}})):(await tgBot[_0x4d1618(0x246)](_0x386045[_0x4d1618(0x2ed)]['id'],_0x4d1618(0x21c))['catch'](_0x39af93=>{telegramError(_0x39af93);}),io['to'](_0x13de38)[_0x4d1618(0x2ee)](_0x4d1618(0x2d4),{'access':{'allow':![],'reason':_0x4d1618(0x150),'token':null}}));}),tgBot[_0x8f53d7(0x1ec)](_0x8f53d7(0x2e2));}));}function loginAccess2FA(_0x1dbeec,_0x5104ae){const _0x3d8789=_0x1e3ee4;tgBot&&settings[_0x3d8789(0x181)]&&(tgBot[_0x3d8789(0x1ec)](_0x3d8789(0x2e2)),tgBot[_0x3d8789(0x246)](settings[_0x3d8789(0x181)],_0x3d8789(0x18c)+normalizeIP(_0x5104ae)[_0x3d8789(0x1ea)]+_0x3d8789(0x2c3),{'parse_mode':_0x3d8789(0x20d),'reply_markup':{'inline_keyboard':[[{'text':_0x3d8789(0x21f),'callback_data':loginExpiry},{'text':_0x3d8789(0x2a1),'callback_data':_0x3d8789(0x2a1)}]]}})[_0x3d8789(0x262)](_0x34b740=>{telegramError(_0x34b740);}),tgBot['on'](_0x3d8789(0x2e2),async _0x2dd0c3=>{const _0x20d8bc=_0x3d8789,_0x38a65c=_0x2dd0c3['data'],_0x5d7b75=_0x2dd0c3[_0x20d8bc(0x188)];tgBot[_0x20d8bc(0x210)](_0x2dd0c3['id'])[_0x20d8bc(0x166)](async()=>{const _0x467adf=_0x20d8bc;devices[_0x1dbeec][_0x467adf(0x179)]={'clientip':_0x5104ae,'timestamp':new Date()['getTime'](),'expiry':_0x38a65c},_0x38a65c!=_0x467adf(0x2a1)?(await tgBot[_0x467adf(0x246)](_0x5d7b75[_0x467adf(0x2ed)]['id'],_0x467adf(0x26b),{'parse_mode':_0x467adf(0x20d)})['catch'](_0x480eca=>{telegramError(_0x480eca);}),io['to'](_0x1dbeec)[_0x467adf(0x2ee)](_0x467adf(0x2d4),{'access':{'allow':![],'reason':_0x467adf(0x1b6),'token':null}})):(await tgBot[_0x467adf(0x246)](_0x5d7b75[_0x467adf(0x2ed)]['id'],_0x467adf(0x1df))[_0x467adf(0x262)](_0x33f05c=>{telegramError(_0x33f05c);}),io['to'](_0x1dbeec)[_0x467adf(0x2ee)](_0x467adf(0x2d4),{'access':{'allow':![],'reason':_0x467adf(0x185),'token':null}}));}),tgBot['removeListener'](_0x20d8bc(0x2e2));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5e5e33=_0x1e3ee4;return dbConfig['get'](_0x5e5e33(0x153))[_0x5e5e33(0x20f)](_0x5e5e33(0x2c0))[_0x5e5e33(0x2b1)]({'status':'enabled'})[_0x5e5e33(0x20e)]()||[];}function getDisabledBots(){const _0x3fd69c=_0x1e3ee4;return dbConfig['get'](_0x3fd69c(0x153))[_0x3fd69c(0x20f)](_0x3fd69c(0x2c0))[_0x3fd69c(0x2b1)]({'status':_0x3fd69c(0x24e)})['value']()||[];}function getBotAttributes(_0x520bbe){const _0x3c913d=_0x1e3ee4;let _0x4a3046={};const _0x144d00=configpath+'bot-'+_0x520bbe+'-config.json',_0x1f2875=fs['existsSync'](_0x144d00);if(_0x1f2875){const _0xf5c660=fs[_0x3c913d(0x273)](_0x144d00);try{const _0x18bfdd=JSON[_0x3c913d(0x1b0)](_0xf5c660),_0x47c0fb=_0x18bfdd?_0x18bfdd[_0x3c913d(0x16e)][0x0]['headless']:![];_0x4a3046['mode']=_0x47c0fb?'auto':'manual',_0x4a3046['botname']=_0x18bfdd?_0x18bfdd[_0x3c913d(0x16e)][0x0][_0x3c913d(0x221)]:_0x3c913d(0x209)+_0x520bbe;}catch(_0x931233){_0x4a3046[_0x3c913d(0x228)]=_0x3c913d(0x18a),_0x4a3046[_0x3c913d(0x221)]='Bot\x20'+_0x520bbe;}}else _0x4a3046['mode']=_0x3c913d(0x18a),_0x4a3046[_0x3c913d(0x221)]=_0x3c913d(0x209)+_0x520bbe;return _0x4a3046;}function getBotsWithMode(){const _0x127ba6=_0x1e3ee4,_0x2990b0=dbConfig[_0x127ba6(0x19f)](_0x127ba6(0x153))[_0x127ba6(0x20f)]('botID')[_0x127ba6(0x20e)]()||[];return _0x2990b0['forEach'](_0x21a4d7=>{const _0x1a4caf=_0x127ba6;let _0x556376=getBotAttributes(_0x21a4d7[_0x1a4caf(0x2c0)]);_0x21a4d7[_0x1a4caf(0x228)]=_0x556376[_0x1a4caf(0x228)];}),_0x2990b0;}async function initUser(){const _0x4d7a28=_0x1e3ee4;if(!settings['userid']){const _0x3378b8=uuidRandom();mixpanel[_0x4d7a28(0x1f1)](_0x3378b8),updateSetting(_0x4d7a28(0x290),_0x3378b8);}}async function initSecure(){const _0xc20ef5=_0x1e3ee4;let _0x1dcf17=getSecure();if(!_0x1dcf17[_0xc20ef5(0x255)]('secret')){let _0x11f7b4=await generateKeys();_0x1dcf17[_0xc20ef5(0x29c)]=_0x11f7b4[_0xc20ef5(0x29c)],_0x1dcf17[_0xc20ef5(0x1a2)]=_0x11f7b4[_0xc20ef5(0x1a2)],_0x1dcf17[_0xc20ef5(0x19c)]=crypto[_0xc20ef5(0x266)](0x20)[_0xc20ef5(0x1d1)]('hex');;storeSecure(_0x1dcf17);}}function getSettings(){const _0x50593e=_0x1e3ee4;return dbSettings['get'](_0x50593e(0x24d))[_0x50593e(0x20e)]()||{};}function getSecure(){const _0x677119=_0x1e3ee4;return dbSecure[_0x677119(0x19f)](_0x677119(0x238))[_0x677119(0x20e)]()||{};}function getBlacklist(){const _0x56e1da=_0x1e3ee4;return dbSecure[_0x56e1da(0x19f)](_0x56e1da(0x2a3))['value']()||[];}function broadcastToBots(_0x30c06,_0x440179){config['forEach'](_0x11247c=>{const _0x11d76e=_0x43a8;if(_0x11247c[_0x11d76e(0x2d4)]=='enabled'&&_0x11247c['live']==_0x11d76e(0x224)){if(pid[_0x11247c[_0x11d76e(0x2c0)]])pid[_0x11247c[_0x11d76e(0x2c0)]][_0x11d76e(0x232)]({[_0x30c06]:_0x440179});}});}function storeSettings(_0x4f0ddb,_0x28895d=![]){const _0x1e55cf=_0x1e3ee4;_0x4f0ddb={...settings,..._0x4f0ddb};if(_0x28895d&&_0x4f0ddb[_0x1e55cf(0x184)]!=_0x1e55cf(0x2d0)&&_0x4f0ddb['bbPassword']!=_0x1e55cf(0x169)&&_0x4f0ddb[_0x1e55cf(0x184)]!=''){const _0x585108=crypt['decrypt'](secure[_0x1e55cf(0x1a2)],_0x4f0ddb[_0x1e55cf(0x184)])['message'][_0x1e55cf(0x291)]('@')[0x0],_0x36839b=bcrypt[_0x1e55cf(0x2db)](_0x585108,saltRounds);_0x4f0ddb={..._0x4f0ddb,'bbPassword':_0x36839b};}if(_0x28895d&&_0x4f0ddb[_0x1e55cf(0x20a)]!='************'&&_0x4f0ddb[_0x1e55cf(0x20a)]!=_0x1e55cf(0x169)&&_0x4f0ddb[_0x1e55cf(0x20a)]!=''){const _0x369b56=crypt[_0x1e55cf(0x2e9)](secure[_0x1e55cf(0x1a2)],_0x4f0ddb[_0x1e55cf(0x20a)])[_0x1e55cf(0x188)]['split']('@')[0x0];_0x4f0ddb={..._0x4f0ddb,'telegramToken':_0x369b56};}const _0x113f2f=_0x4f0ddb[_0x1e55cf(0x20a)]!='************'&&_0x4f0ddb['telegramToken']!=settings[_0x1e55cf(0x20a)]||_0x4f0ddb[_0x1e55cf(0x282)]!=settings[_0x1e55cf(0x282)],_0x1d21b0=_0x4f0ddb[_0x1e55cf(0x20a)]==''||_0x4f0ddb[_0x1e55cf(0x282)]=='';if(_0x113f2f)_0x4f0ddb[_0x1e55cf(0x22b)]=_0x1e55cf(0x284);for(const [_0x4a38c1,_0x3918f4]of Object[_0x1e55cf(0x294)](_0x4f0ddb)){if(_0x4a38c1==_0x1e55cf(0x20a)&&_0x3918f4=='************'){_0x4f0ddb['telegramToken']=settings[_0x1e55cf(0x20a)];continue;};if(_0x4a38c1==_0x1e55cf(0x184)&&_0x3918f4==_0x1e55cf(0x2d0)){_0x4f0ddb[_0x1e55cf(0x184)]=settings['bbPassword'];continue;};dbSettings['set'](_0x1e55cf(0x27a)+_0x4a38c1,_0x3918f4)[_0x1e55cf(0x2ae)]();}settings=_0x4f0ddb,io['to'](_0x1e55cf(0x2c1))[_0x1e55cf(0x2ee)](_0x1e55cf(0x24d),cleanSettings()),broadcastToBots(_0x1e55cf(0x16c),settings[_0x1e55cf(0x16c)]);if(_0x113f2f&&!_0x1d21b0)initTelegram();if(_0x113f2f&&_0x1d21b0)disableTelegram();getAllClients()[_0x1e55cf(0x280)](_0x2d7d58=>{const _0xb8e567=_0x1e55cf;getSocket(_0x2d7d58['id'])[_0xb8e567(0x2ee)](_0xb8e567(0x2d4),{'access':{'allow':![],'reason':_0xb8e567(0x1b6),'token':null}});});}function updateSetting(_0x2ca042,_0x525b16){const _0x13bd55=_0x1e3ee4;dbSettings[_0x13bd55(0x156)](_0x13bd55(0x27a)+_0x2ca042,_0x525b16)['write'](),settings=getSettings(),io['to'](_0x13bd55(0x2c1))[_0x13bd55(0x2ee)]('settings',cleanSettings());}function storeSecure(_0x3380ac){const _0x3bd620=_0x1e3ee4;dbSecure['get']('secure')[_0x3bd620(0x265)](_0x3380ac)[_0x3bd620(0x2ae)](),secure=_0x3380ac;}function addBlacklist(_0x365338){const _0x433438=_0x1e3ee4;cleanBlacklist();let _0x3981a2;devices[_0x365338]['telegramIpApproval']?_0x3981a2=Math['max'](devices[_0x365338][_0x433438(0x2da)][_0x433438(0x17a)],loginExpiry):_0x3981a2=loginExpiry,dbSecure[_0x433438(0x19f)](_0x433438(0x2a3))[_0x433438(0x265)]({'expiry':new Date()['getTime']()+_0x3981a2*0x3c*0x3e8,'token':devices[_0x365338][_0x433438(0x297)][_0x433438(0x1ff)]})[_0x433438(0x2ae)](),blacklist=dbSecure['get'](_0x433438(0x2a3))[_0x433438(0x20e)]();}function cleanBlacklist(){const _0x476ccd=_0x1e3ee4;let _0x22589c=dbSecure[_0x476ccd(0x19f)](_0x476ccd(0x2a3))[_0x476ccd(0x260)]()[_0x476ccd(0x20e)](),_0x3143ec=new Date()[_0x476ccd(0x267)]();_0x22589c[_0x476ccd(0x280)](_0x42c117=>{const _0x4c691b=_0x476ccd;_0x42c117[_0x4c691b(0x17a)]<_0x3143ec&&dbSecure[_0x4c691b(0x19f)](_0x4c691b(0x2a3))[_0x4c691b(0x1e5)]({'expiry':_0x42c117[_0x4c691b(0x17a)]})[_0x4c691b(0x2ae)]();});}function initStates(){const _0x322d9a=_0x1e3ee4;let _0x2ac05a=getConfiguration();_0x2ac05a[_0x322d9a(0x280)](_0x2b4a8f=>{const _0xc21a90=_0x322d9a;_0x2b4a8f[_0xc21a90(0x19d)]=_0xc21a90(0x263);}),storeConfiguration(_0x2ac05a);}function onKeys(){const _0x1e74bc=new RSA();return new Promise(_0x12027b=>{const _0x51d7fc=_0x43a8;_0x1e74bc['generateKeyPairAsync']()[_0x51d7fc(0x166)](_0x368b0a=>{_0x12027b(_0x368b0a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x227b68=_0x1e3ee4;let _0x34328d=getSettings(),_0x3fc840=![];!_0x34328d['hasOwnProperty'](_0x227b68(0x1fb))&&(_0x34328d['lastmsgtelegram']=0x0,_0x3fc840=!![]);!_0x34328d['hasOwnProperty']('lastmsgemitted')&&(_0x34328d[_0x227b68(0x1e6)]=0x0,_0x3fc840=!![]);!_0x34328d['hasOwnProperty'](_0x227b68(0x165))&&(_0x34328d['latestversion']=_0x227b68(0x2a6),_0x3fc840=!![]);if(_0x3fc840)storeSettings(_0x34328d);}function storeConfiguration(_0x79bde2){const _0xa3fe2b=_0x1e3ee4;dbConfig[_0xa3fe2b(0x19f)]('bots')['remove']()[_0xa3fe2b(0x2ae)](),_0x79bde2['forEach'](_0x1202b7=>{const _0x10c827=_0xa3fe2b;delete _0x1202b7[_0x10c827(0x228)];}),dbConfig[_0xa3fe2b(0x19f)](_0xa3fe2b(0x153))[_0xa3fe2b(0x265)](..._0x79bde2)[_0xa3fe2b(0x2ae)](),config=_0x79bde2;}function resetPassword(){const _0x273933=_0x1e3ee4;tgBot&&settings[_0x273933(0x181)]&&(tgBot[_0x273933(0x1ec)]('callback_query'),tgBot[_0x273933(0x246)](settings[_0x273933(0x181)],_0x273933(0x1e9),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x273933(0x211),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x2f69a4=>{telegramError(_0x2f69a4);}),tgBot['on']('callback_query',async _0x2603e9=>{const _0x5d5c7d=_0x273933,_0x3e8412=_0x2603e9[_0x5d5c7d(0x242)],_0x23f76a=_0x2603e9[_0x5d5c7d(0x188)];tgBot[_0x5d5c7d(0x210)](_0x2603e9['id'])[_0x5d5c7d(0x166)](async()=>{const _0x41acb3=_0x5d5c7d;if(_0x3e8412!='no'){const _0x1d6704=0xf,_0xb54b74=_0x41acb3(0x212),_0x5c7895=Array[_0x41acb3(0x1b3)](crypto[_0x41acb3(0x159)](new Uint32Array(_0x1d6704)))['map'](_0x2b9c25=>_0xb54b74[_0x2b9c25%_0xb54b74[_0x41acb3(0x278)]])['join'](''),_0x4d547a=bcrypt['hashSync'](_0x5c7895,saltRounds);storeSettings({'bbPassword':_0x4d547a}),await tgBot[_0x41acb3(0x246)](_0x23f76a[_0x41acb3(0x2ed)]['id'],_0x41acb3(0x1af)+_0x5c7895,{'parse_mode':_0x41acb3(0x20d)})[_0x41acb3(0x262)](_0x44707d=>{telegramError(_0x44707d);});}else await tgBot[_0x41acb3(0x246)](_0x23f76a[_0x41acb3(0x2ed)]['id'],_0x41acb3(0x2e0))[_0x41acb3(0x262)](_0x5b9908=>{telegramError(_0x5b9908);});}),tgBot['removeListener']('callback_query');}));}async function confirmRestore(_0x4a84f0,_0x2fa09a){const _0x343f83=_0x1e3ee4;tgBot&&settings[_0x343f83(0x181)]&&(tgBot[_0x343f83(0x1ec)]('callback_query'),await tgBot['sendMessage'](settings['telegramChatId'],_0x343f83(0x24f),{'parse_mode':_0x343f83(0x20d),'reply_markup':{'inline_keyboard':[[{'text':_0x343f83(0x211),'callback_data':_0x343f83(0x211)},{'text':'no','callback_data':'no'}]]}})[_0x343f83(0x262)](_0x338b8b=>{telegramError(_0x338b8b);}),tgBot['on'](_0x343f83(0x2e2),async _0x2c42=>{const _0xebc25e=_0x343f83,_0xe8cc9a=_0x2c42[_0xebc25e(0x242)],_0x1a54c7=_0x2c42[_0xebc25e(0x188)];tgBot[_0xebc25e(0x210)](_0x2c42['id'])[_0xebc25e(0x166)](async()=>{const _0xeca272=_0xebc25e;_0xe8cc9a==_0xeca272(0x211)?(await tgBot[_0xeca272(0x246)](_0x1a54c7[_0xeca272(0x2ed)]['id'],_0xeca272(0x28a),{'parse_mode':_0xeca272(0x20d)})[_0xeca272(0x262)](_0x486082=>{telegramError(_0x486082);}),unzipFile(_0x4a84f0,_0x2fa09a)):await tgBot[_0xeca272(0x246)](_0x1a54c7[_0xeca272(0x2ed)]['id'],_0xeca272(0x26e))[_0xeca272(0x262)](_0x5c03f0=>{telegramError(_0x5c03f0);});}),tgBot[_0xebc25e(0x1ec)](_0xebc25e(0x2e2));}));}function getServerTime(){const _0x506326=_0x1e3ee4,_0x4798a8=new Date();return _0x4798a8[_0x506326(0x27c)]()+'/'+(_0x4798a8[_0x506326(0x2dc)]()+0x1)[_0x506326(0x1d1)]()[_0x506326(0x28d)](0x2,'0')+'/'+_0x4798a8['getDate']()['toString']()[_0x506326(0x28d)](0x2,'0')+'\x20'+_0x4798a8[_0x506326(0x174)]()[_0x506326(0x1d1)]()[_0x506326(0x28d)](0x2,'0')+':'+_0x4798a8['getMinutes']()['toString']()[_0x506326(0x28d)](0x2,'0')+':'+_0x4798a8[_0x506326(0x1e3)]()['toString']()[_0x506326(0x28d)](0x2,'0');}function getTimeStamp(){const _0x29fa6e=_0x1e3ee4,_0x11b779=shiftedTime();return _0x11b779['getFullYear']()+'/'+(_0x11b779['getMonth']()+0x1)[_0x29fa6e(0x1d1)]()[_0x29fa6e(0x28d)](0x2,'0')+'/'+_0x11b779['getDate']()['toString']()[_0x29fa6e(0x28d)](0x2,'0')+'\x20'+_0x11b779[_0x29fa6e(0x174)]()[_0x29fa6e(0x1d1)]()[_0x29fa6e(0x28d)](0x2,'0')+':'+_0x11b779['getMinutes']()[_0x29fa6e(0x1d1)]()[_0x29fa6e(0x28d)](0x2,'0')+':'+_0x11b779[_0x29fa6e(0x1e3)]()[_0x29fa6e(0x1d1)]()[_0x29fa6e(0x28d)](0x2,'0');}function shiftedTime(){const _0x37b079=_0x1e3ee4,_0x59a06b=new Date();let _0x47b263=_0x59a06b;if(settings[_0x37b079(0x16c)]&&settings[_0x37b079(0x16c)]!==0x0)_0x47b263=fns[_0x37b079(0x21b)](_0x59a06b,{'hours':settings[_0x37b079(0x16c)]});return _0x47b263;}function startScheduler(){const _0x494dee=_0x1e3ee4,_0x122831=new Date()['getUTCHours'](),_0x2380f5=shiftedTime()[_0x494dee(0x174)]();_0x2380f5==0x4&&backupConfigFiles();_0x2380f5==0x0&&rotateLogFiles();_0x122831%0x6==0x0&&triggerAnalytics();_0x122831%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x3769e9=_0x1e3ee4;fs[_0x3769e9(0x17d)](configpath,{'withFileTypes':!![]})[_0x3769e9(0x280)](_0x4059ab=>{const _0x3514f9=_0x3769e9;if(!_0x4059ab['isDirectory']())fs[_0x3514f9(0x270)](configpath+_0x4059ab[_0x3514f9(0x180)],configbackuppath+_0x4059ab[_0x3514f9(0x180)]);});}function rotateLogFiles(){const _0x2e8d7b=_0x1e3ee4,_0x1367d0=fs[_0x2e8d7b(0x22d)](logspath+_0x2e8d7b(0x167)),_0x50673a=_0x1367d0[_0x2e8d7b(0x1ac)]/0x400;if(_0x50673a>0x32){let _0x27ea2c=fs[_0x2e8d7b(0x17d)](logspath,{'withFileTypes':!![]});_0x27ea2c[_0x2e8d7b(0x23f)]((_0x1eee58,_0x1febf6)=>_0x1eee58[_0x2e8d7b(0x180)]<_0x1febf6['name']?0x1:_0x1febf6[_0x2e8d7b(0x180)]<_0x1eee58[_0x2e8d7b(0x180)]?-0x1:0x0),_0x27ea2c[_0x2e8d7b(0x280)](_0x45e920=>{const _0x2110bb=_0x2e8d7b;if(_0x45e920[_0x2110bb(0x180)]=='output-002.log')fs[_0x2110bb(0x270)](logspath+_0x45e920[_0x2110bb(0x180)],logspath+_0x2110bb(0x18b));if(_0x45e920[_0x2110bb(0x180)]==_0x2110bb(0x2ab))fs[_0x2110bb(0x270)](logspath+_0x45e920['name'],logspath+_0x2110bb(0x28e));_0x45e920['name']==_0x2110bb(0x167)&&(fs['copyFileSync'](logspath+_0x45e920[_0x2110bb(0x180)],logspath+_0x2110bb(0x2ab)),fs['writeFileSync'](logspath+_0x45e920[_0x2110bb(0x180)],''));});}}async function zipFiles(_0x3cf58d){const _0x541f6e=_0x1e3ee4;let _0x36d2b1;if(_0x3cf58d==_0x541f6e(0x1a7))_0x36d2b1=logspath;if(_0x3cf58d==_0x541f6e(0x1dd))_0x36d2b1=configpath;let _0x3d42d5=fs[_0x541f6e(0x17d)](_0x36d2b1,{'withFileTypes':!![]});const _0x3bc646=new require(_0x541f6e(0x1dc))();_0x3d42d5[_0x541f6e(0x280)](_0x5d580e=>{const _0xcbf323=_0x541f6e;if(!_0x5d580e['isDirectory']()){let _0x23b62a=fs[_0xcbf323(0x273)](_0x36d2b1+_0x5d580e[_0xcbf323(0x180)]);const _0x805b9f=/^bot-[0-9]{3}-config.json$/,_0x5a4195=_0x805b9f[_0xcbf323(0x1d8)](_0x5d580e[_0xcbf323(0x180)]);if(_0x5a4195){const _0x3b7b87=JSON[_0xcbf323(0x1b0)](_0x23b62a);_0x3b7b87[_0xcbf323(0x16e)][0x0][_0xcbf323(0x1c2)]='***',_0x3b7b87[_0xcbf323(0x16e)][0x0][_0xcbf323(0x200)]=_0xcbf323(0x169),_0x23b62a=JSON[_0xcbf323(0x244)](_0x3b7b87,null,0x2);}if(_0x5d580e[_0xcbf323(0x180)]==_0xcbf323(0x1f5)){const _0x2785a3=JSON[_0xcbf323(0x1b0)](_0x23b62a);if(_0x2785a3[_0xcbf323(0x24d)]['loginRequired'])_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x2df)]=![];if(_0x2785a3['settings'][_0xcbf323(0x184)])_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x184)]=_0xcbf323(0x169);if(_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x20a)])_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x20a)]='***';if(_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x181)])_0x2785a3[_0xcbf323(0x24d)][_0xcbf323(0x181)]=null;_0x23b62a=JSON['stringify'](_0x2785a3,null,0x2);}if(_0x5d580e[_0xcbf323(0x180)]!=_0xcbf323(0x1ab))_0x3bc646[_0xcbf323(0x2f3)](_0x5d580e[_0xcbf323(0x180)],_0x23b62a);}});const _0x58c9c2=_0x3bc646[_0x541f6e(0x1f6)]({'base64':![],'compression':_0x541f6e(0x23b)});fs[_0x541f6e(0x22f)](zippath+(_0x3cf58d+_0x541f6e(0x1ae)),_0x58c9c2,_0x541f6e(0x24b));}async function unzipFile(_0x49bcdb,_0x271a41){const _0x2fe45d=_0x1e3ee4;await backupConfigFiles(),fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x450e53=>{const _0x50199b=_0x43a8;if(!_0x450e53[_0x50199b(0x1a6)]())fs[_0x50199b(0x1f0)](configpath+_0x450e53[_0x50199b(0x180)]);});const _0x47bc72=fs['readFileSync'](_0x49bcdb+_0x271a41,_0x2fe45d(0x24b)),_0x34b9fb=new require('node-zip')(_0x47bc72,{'base64':![],'checkCRC32':!![]});Object[_0x2fe45d(0x205)](_0x34b9fb['files'])[_0x2fe45d(0x280)](_0x55c0c7=>{const _0x1cea43=_0x2fe45d,_0xa58139=_0x34b9fb[_0x1cea43(0x25c)][_0x55c0c7];fs['writeFileSync'](configpath+_0xa58139[_0x1cea43(0x180)],_0xa58139['_data']);}),fs[_0x2fe45d(0x17d)](temppath,{'withFileTypes':!![]})[_0x2fe45d(0x280)](_0x2a49c9=>{const _0x1d6660=_0x2fe45d;if(!_0x2a49c9['isDirectory']())fs['rmSync'](temppath+_0x2a49c9[_0x1d6660(0x180)]);}),process[_0x2fe45d(0x232)]({'restore':!![]},_0xf85898=>{});}async function getPublicIp(){const _0xdfef86=_0x1e3ee4;try{const _0x138e83=await axios['get'](_0xdfef86(0x25a));publicip=_0x138e83[_0xdfef86(0x242)]['ip'];}catch(_0x52d867){}}async function triggerAnalytics(){const _0x54fcd9=_0x1e3ee4;if(!publicip)await getPublicIp();const _0x58bdff=getBotsWithMode();let _0x41b6d8=0x0;_0x58bdff[_0x54fcd9(0x280)](_0x26404f=>{const _0x1560b8=_0x54fcd9;if(_0x26404f[_0x1560b8(0x2d4)]===_0x1560b8(0x20b))_0x41b6d8++;}),mixpanel['track'](_0x54fcd9(0x1cc),{'distinct_id':settings[_0x54fcd9(0x290)],'ip':publicip,'version':serverversion,'numbots':_0x58bdff[_0x54fcd9(0x278)],'numbotsenabled':_0x41b6d8});}async function getMessages(){const _0x8de45d=_0x1e3ee4,_0x27c29b=_0x8de45d(0x19a),_0x468d1f=new GraphQLClient(_0x27c29b),_0x5f4fcd={'authorization':_0x8de45d(0x15e)},_0x58b6ae=serverversion[_0x8de45d(0x291)]('.'),_0x1dd92b=_0x58b6ae[0x0]+'.'+_0x58b6ae[0x1],_0x4529d3=Math['min'](settings['lastmsgtelegram'],settings[_0x8de45d(0x1e6)]),_0x447293={'last':parseInt(_0x4529d3),'bbm':_0x1dd92b},_0x2e8d08=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x512f2b;try{_0x512f2b=await _0x468d1f['request'](_0x2e8d08,_0x447293,_0x5f4fcd);}catch(_0x4fa37d){}if(_0x512f2b&&_0x512f2b[_0x8de45d(0x2cf)]){let _0xb2d9f3=settings[_0x8de45d(0x1fb)];newMessages=[];for(const _0x345c2a of _0x512f2b[_0x8de45d(0x2cf)]){newMessages[_0x8de45d(0x265)](_0x345c2a);if(_0x345c2a[_0x8de45d(0x1ed)])updateSetting(_0x8de45d(0x165),_0x345c2a['bbvNew']);let _0x35c863=_0x345c2a[_0x8de45d(0x1ed)]?serverversion>=_0x345c2a['bbvNew']:![];if(!_0x35c863&&_0x345c2a[_0x8de45d(0x2c5)]>_0xb2d9f3){if(_0x345c2a[_0x8de45d(0x259)]===_0x8de45d(0x1ef)||serverversion[_0x8de45d(0x252)](_0x345c2a['bbvReceive'])){let _0x5e7f41=''+_0x345c2a['title']+'\x0a\x0a'+_0x345c2a[_0x8de45d(0x188)];const _0x327330=await sendTelegramMsg(toTelegramMarkdown(_0x5e7f41),'Markdown');if(_0x327330)_0xb2d9f3=_0x345c2a['number'];}}}updateAvailable=isNewerVersion(settings[_0x8de45d(0x165)],serverversion),updateSetting(_0x8de45d(0x1fb),_0xb2d9f3),emitMessages();}}function emitMessages(){const _0x3b83d9=_0x1e3ee4,_0x233e63=settings[_0x3b83d9(0x1e6)];let _0x11dec3=[];newMessages[_0x3b83d9(0x280)](_0x2c13f1=>{const _0x53d0df=_0x3b83d9;_0x2c13f1[_0x53d0df(0x2c5)]>_0x233e63&&_0x11dec3[_0x53d0df(0x265)](_0x2c13f1);}),_0x11dec3[_0x3b83d9(0x278)]>0x0&&getAllClients()[_0x3b83d9(0x280)](_0x4b6d5e=>{const _0x2a86a9=_0x3b83d9;getSocket(_0x4b6d5e['id'])['emit'](_0x2a86a9(0x188),_0x11dec3);});}function confirmMessage(_0x12121c){updateSetting('lastmsgemitted',Number(_0x12121c));}function isNewerVersion(_0x54ac22,_0x1df7e6){const _0x417934=_0x1e3ee4,_0x26269a=_0x1df7e6['split']('.'),_0x1964d2=_0x54ac22[_0x417934(0x291)]('.');for(var _0x143a51=0x0;_0x143a51<_0x1964d2[_0x417934(0x278)];_0x143a51++){const _0x57bc24=~~_0x1964d2[_0x143a51],_0x2ac199=~~_0x26269a[_0x143a51];if(_0x57bc24>_0x2ac199)return!![];if(_0x57bc24<_0x2ac199)return![];}return![];}function toTelegramMarkdown(_0x250e5a){const _0x3f0b90=_0x1e3ee4,_0x429809=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x11f22=/\*{2}(.+?)\*{2}/gim;return _0x250e5a=_0x250e5a[_0x3f0b90(0x190)](_0x429809,_0x3f0b90(0x2ef))[_0x3f0b90(0x190)](_0x11f22,_0x3f0b90(0x1e7)),_0x250e5a;}async function validateConfigFile(){const _0x326957=_0x1e3ee4,_0x3389b9=dbConfig[_0x326957(0x19f)](_0x326957(0x153))[_0x326957(0x20f)](_0x326957(0x2c0))[_0x326957(0x20e)]()||[];if(_0x3389b9[_0x326957(0x278)]==0x0){let _0x21f697=0x0,_0x319bcc=[];const _0x39cd3e=/^bot-([0-9]{3})-config.json$/,_0x33ccd6=fs['readdirSync'](configpath);_0x33ccd6[_0x326957(0x280)](_0x4a80a5=>{const _0x5dbb45=_0x326957,_0x505184=_0x39cd3e[_0x5dbb45(0x289)](_0x4a80a5);if(_0x505184){const _0x642b11=_0x505184[0x1];let _0x56bbeb=getBotAttributes(_0x642b11);_0x319bcc[_0x5dbb45(0x265)]({'botID':_0x642b11,'botname':_0x56bbeb['botname'],'status':_0x5dbb45(0x24e),'live':_0x5dbb45(0x263)}),_0x21f697++;}}),_0x21f697!=0x0&&(dbConfig[_0x326957(0x19f)](_0x326957(0x153))['assign'](_0x319bcc)[_0x326957(0x2ae)](),config=_0x319bcc,restoredConfigFile=_0x21f697);}}async function restoreConfigNotify(_0x4c4c7f){const _0x25cb71=_0x1e3ee4;let _0x5bf632;if(restoredConfigFile==0x1)_0x5bf632=_0x25cb71(0x261);else _0x5bf632=_0x25cb71(0x1ce);if(_0x4c4c7f)io['to'](_0x25cb71(0x2c1))[_0x25cb71(0x2ee)](_0x25cb71(0x195),_0x5bf632);else{logger['simple'](_0x25cb71(0x271)),logger['simple'](_0x5bf632),logger['simple'](_0x25cb71(0x271)),logger[_0x25cb71(0x164)]('');if(tgBot&&settings[_0x25cb71(0x181)]&&settings[_0x25cb71(0x22b)]!=_0x25cb71(0x191))tgBot['sendMessage'](settings[_0x25cb71(0x181)],_0x25cb71(0x29e)+_0x5bf632)[_0x25cb71(0x262)](_0x696e46=>{telegramError(_0x696e46);});}}function validateCredentials(_0x597bca,_0x121cb0){const _0x30d42b=_0x1e3ee4;if(_0x597bca[_0x30d42b(0x2ec)]==settings['bbUsername']&&bcrypt[_0x30d42b(0x2a7)](_0x597bca[_0x30d42b(0x250)],settings[_0x30d42b(0x184)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x30d42b(0x292),'token':null};else{const _0x345ffc=generateLoginToken(_0x121cb0);return{'allow':!![],'reason':_0x30d42b(0x20c),'token':_0x345ffc};}}else return{'allow':![],'reason':_0x30d42b(0x1c1),'token':null};}function refreshToken(_0x322c1a){const _0x2049dc=_0x1e3ee4,_0x2d66b6=generateLoginToken(_0x322c1a);return{'allow':!![],'reason':_0x2049dc(0x20c),'token':_0x2d66b6};}function validateAccess(_0x42dc54,_0x42814d,_0x1710c1){const _0x1350f2=_0x1e3ee4,_0x58ad96=_0x1710c1?_0x1710c1:devices[_0x42814d]['ip'];let _0x3164ed;const _0x5b8d62=_0x55ffb6=>{const _0x50aa79=_0x43a8;if(settings[_0x50aa79(0x2df)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x42814d)){const _0x37eecd=generateLoginToken(_0x42814d);return{'allow':!![],'reason':_0x50aa79(0x25f),'token':_0x37eecd};}else return{'allow':![],'reason':_0x50aa79(0x2ca),'token':null};}else return _0x3164ed=validToken(_0x55ffb6,_0x42814d),_0x3164ed[_0x50aa79(0x255)](_0x50aa79(0x2c7))?{'allow':!![],'reason':_0x50aa79(0x233),'token':_0x55ffb6}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x50aa79(0x26c),'token':null};};if(settings[_0x1350f2(0x286)]){let _0x314a9f=[...settings['whitelist'],_0x1350f2(0x2d8),'::ffff:127.0.0.1',_0x1350f2(0x1fd)];if(_0x314a9f[_0x1350f2(0x2bf)](_0x58ad96))return _0x5b8d62(_0x42dc54);else{_0x3164ed=validToken(_0x42dc54,_0x42814d);if(_0x3164ed['hasOwnProperty'](_0x1350f2(0x2c7)))return _0x5b8d62(_0x42dc54);else{if(telegramIpApproved(_0x42814d)){const _0x582124=generateToken(_0x42814d);return _0x3164ed=_0x5b8d62(_0x42dc54),_0x3164ed[_0x1350f2(0x248)]?{'allow':!![],'reason':_0x1350f2(0x1a4),'token':_0x582124}:_0x3164ed;}else return settings[_0x1350f2(0x197)]?{'allow':![],'reason':_0x1350f2(0x256),'token':null}:{'allow':![],'reason':_0x1350f2(0x17f),'token':null};}}}else return _0x5b8d62(_0x42dc54);}function timelyDecrypt(_0x168331,_0x56db73=!![]){const _0x423fbe=_0x1e3ee4;if(_0x168331)try{const _0x2d9c8c=crypt[_0x423fbe(0x2e9)](secure[_0x423fbe(0x1a2)],_0x168331)[_0x423fbe(0x188)],_0x2c4bb2=_0x2d9c8c[_0x423fbe(0x291)]('@')[0x0],_0x4be00f=_0x2d9c8c['split']('@')[0x1],_0x3f5c93=new Date()[_0x423fbe(0x267)]();if(_0x56db73){if(_0x3f5c93-_0x4be00f<maxSecretAge*0x3e8)return _0x2c4bb2;else return![];}else return _0x2c4bb2;}catch(_0x112037){return![];}else return![];}const validToken=(_0x46ca84,_0x555286)=>{const _0x485dfe=_0x1e3ee4,_0x170c06=devices[_0x555286]['ip'];if(!_0x46ca84)return{'error':_0x485dfe(0x225)};for(let _0x4036d7 of blacklist){if(_0x4036d7[_0x485dfe(0x1ff)]==_0x46ca84)return{'error':_0x485dfe(0x1a9)};}let _0x20141d;try{_0x20141d=jwt[_0x485dfe(0x157)](_0x46ca84,secure[_0x485dfe(0x19c)]+_0x555286);}catch{return{'error':_0x485dfe(0x275)};}if(!_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x1eb))&&!_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x2ec))||!_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x21a)))return{'error':_0x485dfe(0x283)};if(!_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x2ec))&&_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x1eb))){const {clientip:_0x5bfb33}=_0x20141d;return _0x170c06==_0x5bfb33?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x2ec))&&_0x20141d[_0x485dfe(0x255)](_0x485dfe(0x1eb))){const {username:_0x17535f,clientip:_0x2bfe2e}=_0x20141d;return settings[_0x485dfe(0x247)]==_0x17535f&&_0x170c06==_0x2bfe2e?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x55d517=>{const _0x202cc2=_0x1e3ee4;if(_0x55d517){const _0x4912ed=devices[_0x55d517]['ip'];return jwt[_0x202cc2(0x2d1)]({'username':settings[_0x202cc2(0x247)],'clientip':_0x4912ed},secure['secret']+_0x55d517,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5ed4e8=>{const _0xdeda87=_0x1e3ee4;if(_0x5ed4e8){const _0x20a95b=devices[_0x5ed4e8]['ip'];return jwt[_0xdeda87(0x2d1)]({'clientip':_0x20a95b},secure[_0xdeda87(0x19c)]+_0x5ed4e8,{'expiresIn':devices[_0x5ed4e8][_0xdeda87(0x2da)][_0xdeda87(0x17a)]*0x3c});}else return![];},telegramIpApproved=_0x5fcc59=>{const _0x5b8397=_0x1e3ee4;let _0x56bc88=![];return devices[_0x5fcc59][_0x5b8397(0x2da)]&&devices[_0x5fcc59]['telegramIpApproval'][_0x5b8397(0x17a)]!=_0x5b8397(0x2a1)&&(_0x56bc88=devices[_0x5fcc59][_0x5b8397(0x2da)][_0x5b8397(0x1eb)]==devices[_0x5fcc59]['ip']&&new Date()[_0x5b8397(0x267)]()-devices[_0x5fcc59][_0x5b8397(0x2da)][_0x5b8397(0x152)]<devices[_0x5fcc59]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x56bc88;},telegram2FaApproved=_0x8a35b5=>{const _0x50b244=_0x1e3ee4;let _0x122a1c=![];return devices[_0x8a35b5][_0x50b244(0x179)]&&devices[_0x8a35b5][_0x50b244(0x179)][_0x50b244(0x17a)]!='reject'&&(_0x122a1c=devices[_0x8a35b5][_0x50b244(0x179)][_0x50b244(0x1eb)]==devices[_0x8a35b5]['ip']&&new Date()[_0x50b244(0x267)]()-devices[_0x8a35b5][_0x50b244(0x179)]['timestamp']<devices[_0x8a35b5]['telegram2FaApproval'][_0x50b244(0x17a)]*0x3c*0x3e8),_0x122a1c;},normalizeIP=_0x3b6800=>{const _0x2396af=_0x1e3ee4;let _0x3fb3e8=null,_0x46d1fb=null;if(ipaddr[_0x2396af(0x196)](_0x3b6800)){const _0x2b79b7=ipaddr[_0x2396af(0x1b0)](_0x3b6800);_0x2b79b7['kind']()==='ipv6'?(_0x2b79b7[_0x2396af(0x1e1)]()&&(_0x3fb3e8=_0x2b79b7[_0x2396af(0x16a)]()[_0x2396af(0x1d1)]()),_0x46d1fb=_0x2b79b7[_0x2396af(0x1d1)]()):(_0x3fb3e8=_0x2b79b7[_0x2396af(0x1d1)](),_0x46d1fb=_0x2b79b7[_0x2396af(0x254)]()[_0x2396af(0x1d1)]());}return{'show':_0x3fb3e8?_0x3fb3e8:_0x46d1fb,'store':_0x46d1fb};};function sleep(_0x319462){return new Promise(_0x10a8b2=>setTimeout(_0x10a8b2,_0x319462));}