const _0xb2b351=_0x778f;(function(_0x10de42,_0x5afc8b){const _0x4dfe2e=_0x778f,_0x599fb3=_0x10de42();while(!![]){try{const _0xb53f63=parseInt(_0x4dfe2e(0x235))/0x1*(-parseInt(_0x4dfe2e(0x240))/0x2)+parseInt(_0x4dfe2e(0x164))/0x3+-parseInt(_0x4dfe2e(0x2ef))/0x4+parseInt(_0x4dfe2e(0x1ef))/0x5+parseInt(_0x4dfe2e(0x224))/0x6+parseInt(_0x4dfe2e(0x13b))/0x7+-parseInt(_0x4dfe2e(0x22a))/0x8*(parseInt(_0x4dfe2e(0x1e5))/0x9);if(_0xb53f63===_0x5afc8b)break;else _0x599fb3['push'](_0x599fb3['shift']());}catch(_0x289f73){_0x599fb3['push'](_0x599fb3['shift']());}}}(_0x3a9d,0xc3284));const _0xad1c18=function(){let _0x3e2435=!![];return function(_0x16ff92,_0x206fe2){const _0x28ff56=_0x3e2435?function(){if(_0x206fe2){const _0x2b781d=_0x206fe2['apply'](_0x16ff92,arguments);return _0x206fe2=null,_0x2b781d;}}:function(){};return _0x3e2435=![],_0x28ff56;};}(),_0x49d814=_0xad1c18(this,function(){const _0x50b0a2=_0x778f;return _0x49d814[_0x50b0a2(0x247)]()['search']('(((.+)+)+)+$')[_0x50b0a2(0x247)]()[_0x50b0a2(0x115)](_0x49d814)[_0x50b0a2(0x170)](_0x50b0a2(0x15c));});_0x49d814();'use strict';process[_0xb2b351(0x196)][_0xb2b351(0xf0)]=0x1;const childProcess=require(_0xb2b351(0x145)),fs=require('fs'),fns=require(_0xb2b351(0x1d6)),low=require('lowdb'),FileSync=require(_0xb2b351(0x1ee)),path=require(_0xb2b351(0x1ca)),crypto=require('crypto'),forge=require(_0xb2b351(0x2d7)),bcrypt=require('bcryptjs'),jwt=require(_0xb2b351(0x1d3)),ipaddr=require(_0xb2b351(0xfa)),argv=require(_0xb2b351(0x1db))(process[_0xb2b351(0x218)][_0xb2b351(0x263)](0x2))['argv'],uuidRandom=require(_0xb2b351(0x2dc)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require('mixpanel'),axios=require(_0xb2b351(0x2f4)),{GraphQLClient,gql}=require(_0xb2b351(0x2a9)),util=require(_0xb2b351(0x28d)),fileUpload=require(_0xb2b351(0x209)),{networkInterfaces}=require('os'),JSZip=require(_0xb2b351(0x2a3)),PORT=argv[_0xb2b351(0x1f5)]||_0xb2b351(0x292),pattern=/^[0-9]{2,4}$/;!pattern[_0xb2b351(0x2d8)](PORT)&&(console[_0xb2b351(0x2ee)]('Error:\x20Invalid\x20argument\x20'+PORT+_0xb2b351(0x29f)),process[_0xb2b351(0x160)](0x1));const HOST=argv[_0xb2b351(0x2d4)]||null,userID=argv[_0xb2b351(0xed)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0xb2b351(0x150)];let bbpath=_0xb2b351(0x182),bbpath2='';const botfile=_0xb2b351(0x1dd),configfile=_0xb2b351(0x297),settingsfile='bb-settings.json',securefile=_0xb2b351(0x283),environment=require('./'+bbpath2+_0xb2b351(0x174))['environment']||_0xb2b351(0x206),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0xb2b351(0x2a0)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xb2b351(0x1f1)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0xb2b351(0x234),logspath=userID?bbpath+_0xb2b351(0x1ac)+userID+'/':bbpath+_0xb2b351(0x1ac),zippath=userID?bbpath+_0xb2b351(0x1f2)+userID+'/':bbpath+_0xb2b351(0x1f2),loggerfile=fs[_0xb2b351(0x16b)](logspath+_0xb2b351(0x216),{'flags':'a'}),temppath=userID?bbpath+_0xb2b351(0x23c)+userID+'/':bbpath+_0xb2b351(0x23c);!fs[_0xb2b351(0x2a0)](configpath)&&fs[_0xb2b351(0x135)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0xb2b351(0x2a0)](logspath)&&fs[_0xb2b351(0x135)](logspath);!fs['existsSync'](zippath)&&fs[_0xb2b351(0x135)](zippath);!fs[_0xb2b351(0x2a0)](temppath)&&fs[_0xb2b351(0x135)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xb2b351(0x116)]({'bots':[]})[_0xb2b351(0x175)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xb2b351(0x116)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0xb2b351(0x175)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0xb2b351(0x175)]();const saltRounds=0xa,mixpanel=Mixpanel[_0xb2b351(0x18a)](_0xb2b351(0x1ce),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xb2b351(0x290)]&&(settings[_0xb2b351(0x290)]!=''&&settings['telegramToken']!=_0xb2b351(0x24e))&&settings[_0xb2b351(0x213)]&&settings[_0xb2b351(0x213)]!='')initTelegram();const parseColor=(_0x347abb,_0x5c087b)=>{const _0x22630c=_0xb2b351,_0x39c156=/#[A-Z]{3}#/g;if(typeof _0x347abb==_0x22630c(0x1d5)){!_0x5c087b?_0x347abb=_0x347abb[_0x22630c(0x1ad)](_0x39c156,''):(_0x347abb=_0x347abb[_0x22630c(0x1ad)](/#BLU#/g,_0x22630c(0x119)),_0x347abb=_0x347abb[_0x22630c(0x1ad)](/#RED#/g,_0x22630c(0x1d8)),_0x347abb=_0x347abb['replace'](/#YEL#/g,_0x22630c(0x141)),_0x347abb=_0x347abb[_0x22630c(0x1ad)](/#MAG#/g,_0x22630c(0x181)),_0x347abb=_0x347abb[_0x22630c(0x1ad)](/#CYA#/g,'\x1b[36m'),_0x347abb=_0x347abb[_0x22630c(0x1ad)](/#RES#/g,_0x22630c(0x17c)));;}return _0x347abb;},logger={'screen':_0x3733ec=>{const _0x2f7f48=_0xb2b351;console[_0x2f7f48(0x2ee)](parseColor(_0x3733ec,!![]));},'simple':_0x450f83=>{const _0x32c39d=_0xb2b351;console[_0x32c39d(0x2ee)](parseColor(_0x450f83,!![])),loggerfile['write'](util[_0x32c39d(0x298)](parseColor(_0x450f83,![]))+'\x0a');},'full':async _0x4f9153=>{const _0x29d3ef=_0xb2b351,_0x4430c8=getTimeStamp()+_0x29d3ef(0x2c6)+_0x4f9153;console[_0x29d3ef(0x2ee)](parseColor(_0x4430c8,!![])),loggerfile[_0x29d3ef(0x175)](util['format'](parseColor(_0x4430c8,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x29d3ef(0x1c8)]!=_0x29d3ef(0x11d))await sendTelegram(settings[_0x29d3ef(0x274)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x4f9153,![]));},'debug':async(_0x2b9e3a,_0x4aa0e5='')=>{const _0x4892dc=_0xb2b351,_0x3ae487=getTimeStamp()+_0x4892dc(0x2df)+_0x2b9e3a;if(debugging)console[_0x4892dc(0x2ee)](parseColor(_0x3ae487,!![]));loggerfile[_0x4892dc(0x175)](util['format'](parseColor(_0x3ae487,![]))+'\x0a');if(_0x4aa0e5){if(debugging)console['log'](_0x4aa0e5);loggerfile['write'](util['format'](_0x4aa0e5)+'\x0a');}}};let terminating=![];process['on'](_0xb2b351(0x2e5),function(_0x23e4fa){const _0x49e866=_0xb2b351;_0x23e4fa['toString']()[_0x49e866(0x10f)](_0x49e866(0x19a))?(logger['simple'](_0x49e866(0x26b)+_0x23e4fa[_0x49e866(0x1f5)]+_0x49e866(0x19f)),process[_0x49e866(0x266)]({'terminate':!![]},_0x2fc9c7=>{})):logger[_0x49e866(0x219)](_0x23e4fa);}),process['on']('exit',()=>{const _0x164ea5=_0xb2b351;stopAllBots(),process[_0x164ea5(0x160)](0x0);}),process['on'](_0xb2b351(0x21c),()=>{const _0x18e7d8=_0xb2b351;stopAllBots(),process[_0x18e7d8(0x160)](0x0);}),process['on'](_0xb2b351(0x191),()=>{const _0x2300a4=_0xb2b351;stopAllBots(),process[_0x2300a4(0x160)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xb2b351(0x174))[_0xb2b351(0x111)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0xb2b351(0x254))[_0xb2b351(0x125)](app);app[_0xb2b351(0x2be)](fileUpload({'useTempFiles':!![]})),app[_0xb2b351(0x28e)](_0xb2b351(0x2d3),async(_0x13e240,_0xc24040)=>{const _0x151e3e=_0xb2b351,_0x4e69dc=_0x13e240[_0x151e3e(0x1e2)][_0x151e3e(0x15b)],_0x1dd295=getClientsWithBotID(_0x151e3e(0x199)),_0x57c1bb=_0x13e240[_0x151e3e(0x13f)][_0x151e3e(0x1a9)],_0x25413d=timelyDecrypt(_0x57c1bb,![]),_0x329ef6=_0x1dd295[_0x151e3e(0x20a)](_0x5c27bd=>_0x5c27bd[_0x151e3e(0x1a9)]==_0x25413d);if(_0x329ef6){const _0x5aecbc=normalizeIP(_0x13e240[_0x151e3e(0xf4)][_0x151e3e(0x17d)])[_0x151e3e(0x225)],_0x5119a0=_0x13e240[_0x151e3e(0x13f)]['tkn'];if(validateAccess(_0x5119a0,_0x25413d,_0x5aecbc)['allow'])_0x4e69dc=='backup'&&await backupConfigFiles(),await zipFiles(_0x4e69dc),_0xc24040[_0x151e3e(0x16f)](zippath+(_0x4e69dc+_0x151e3e(0x262)),_0x4e815d=>{const _0x731c0b=_0x151e3e;_0x4e815d&&(logger[_0x731c0b(0x1da)](_0x731c0b(0x131)+_0x4e69dc),logger[_0x731c0b(0x219)](_0x4e815d));});else logger[_0x151e3e(0x1da)](_0x151e3e(0x1fc)+_0x4e69dc+_0x151e3e(0x299));}else logger['full'](_0x151e3e(0x1fc)+_0x4e69dc+_0x151e3e(0x10b));}),app[_0xb2b351(0x13a)]('/upload-backup',async(_0x5e7a16,_0x2ac7b1)=>{const _0x5920e3=_0xb2b351,_0x142018=getClientsWithBotID(_0x5920e3(0x199)),_0x245de4=_0x5e7a16['headers'][_0x5920e3(0x1a9)],_0x443ab1=timelyDecrypt(_0x245de4,![]),_0x5476b8=_0x142018['find'](_0x37318a=>_0x37318a['uuid']==_0x443ab1);logger[_0x5920e3(0x1b6)](_0x5920e3(0x1bc));if(_0x5476b8){const _0x57896e=normalizeIP(_0x5e7a16[_0x5920e3(0xf4)]['remoteAddress'])['store'],_0x47e637=_0x5e7a16[_0x5920e3(0x13f)]['tkn'];if(validateAccess(_0x47e637,_0x443ab1,_0x57896e)[_0x5920e3(0x2de)]){if(_0x5e7a16[_0x5920e3(0x167)]){const _0x56472a=_0x5e7a16['files'][_0x5920e3(0x24c)];await _0x56472a['mv'](temppath+_0x56472a[_0x5920e3(0x236)]),_0x2ac7b1[_0x5920e3(0x266)]({'status':!![],'message':_0x5920e3(0x2dd)});const _0x1fe3dc=getBotsWithMode();_0x1fe3dc[_0x5920e3(0x2ca)]>0x0?confirmRestore(temppath,_0x56472a[_0x5920e3(0x236)]):unzipFile(temppath,_0x56472a['name']);}}else logger[_0x5920e3(0x1da)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x5920e3(0x1da)](_0x5920e3(0x24f));}),app[_0xb2b351(0x2be)](express['static'](path[_0xb2b351(0x10e)](__dirname,bbpath2,_0xb2b351(0x271)))),app['use'](express[_0xb2b351(0x1d9)](path['join'](__dirname,bbpath2,_0xb2b351(0x2ec)))),app['get']('/',function(_0xb5644,_0x5a4541){const _0x142c80=_0xb2b351;_0x5a4541[_0x142c80(0x137)](path[_0x142c80(0x10e)](__dirname,bbpath2,_0x142c80(0x271),_0x142c80(0x100)));}),app[_0xb2b351(0x28e)](_0xb2b351(0x2d2),function(_0x59d378,_0x15d2cd){const _0xfb66e8=_0xb2b351;_0x15d2cd['sendFile'](path[_0xfb66e8(0x10e)](__dirname,bbpath2,_0xfb66e8(0x2ec),_0xfb66e8(0x100)));}),app[_0xb2b351(0x28e)]('/:bot/portfolio',(_0x9cf6e5,_0x3a466a)=>{const _0x515534=_0xb2b351;_0x3a466a[_0x515534(0x137)](path['join'](__dirname,bbpath2,_0x515534(0x2ec),'index.html'));}),app[_0xb2b351(0x28e)](_0xb2b351(0x21f),(_0x35ea52,_0x57eba5)=>{const _0x5e4e85=_0xb2b351;_0x57eba5[_0x5e4e85(0x137)](path[_0x5e4e85(0x10e)](__dirname,bbpath2,_0x5e4e85(0x2ec),_0x5e4e85(0x100)));}),app[_0xb2b351(0x28e)]('/:bot/coins',(_0x24290f,_0x1211de)=>{const _0x4a7cb4=_0xb2b351;_0x1211de[_0x4a7cb4(0x137)](path[_0x4a7cb4(0x10e)](__dirname,bbpath2,_0x4a7cb4(0x2ec),_0x4a7cb4(0x100)));}),app[_0xb2b351(0x28e)](_0xb2b351(0x2b1),(_0x4b4ce7,_0x2ebcb8)=>{const _0x2d54b8=_0xb2b351;_0x2ebcb8[_0x2d54b8(0x137)](path['join'](__dirname,bbpath2,_0x2d54b8(0x2ec),_0x2d54b8(0x100)));}),app[_0xb2b351(0x28e)](_0xb2b351(0x11e),(_0x4ecdc9,_0x54c2c1)=>{const _0x4de6f1=_0xb2b351;_0x54c2c1[_0x4de6f1(0x137)](path['join'](__dirname,bbpath2,_0x4de6f1(0x2ec),_0x4de6f1(0x100)));}),app[_0xb2b351(0x28e)](_0xb2b351(0x18f),(_0x4002c5,_0x4d48b3)=>{const _0x3de9e2=_0xb2b351;_0x4d48b3[_0x3de9e2(0x137)](path[_0x3de9e2(0x10e)](__dirname,bbpath2,_0x3de9e2(0x2ec),_0x3de9e2(0x100)));});if(HOST)http[_0xb2b351(0x2b3)](PORT,HOST);else http[_0xb2b351(0x2b3)](PORT);const io=require(_0xb2b351(0x2c2))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x331182=_0xb2b351;let _0x2e5135=_0x331182(0x288);const _0x324ac8=networkInterfaces(),_0x31610a={};for(const _0x5ecd1c of Object[_0x331182(0x1de)](_0x324ac8)){for(const _0x32490b of _0x324ac8[_0x5ecd1c]){if((_0x32490b[_0x331182(0x155)]==_0x331182(0xfd)||_0x32490b['family']==0x4)&&!_0x32490b['internal']){const _0xc3d923=ipaddr[_0x331182(0x15e)](_0x32490b[_0x331182(0x296)])['range']();_0xc3d923!='private'&&(!_0x31610a[_0x5ecd1c]&&(_0x31610a[_0x5ecd1c]=[]),_0x31610a[_0x5ecd1c][_0x331182(0x2bf)](_0x32490b[_0x331182(0x296)]),_0x2e5135=_0x32490b[_0x331182(0x296)]);}}}return{'serverip':_0x2e5135,'netinterfaces':_0x31610a};}async function startServer(){const _0x20426f=_0xb2b351,{serverip:_0x5b14d3,netinterfaces:_0x5fc1a4}=getServerIP();logger[_0x20426f(0x219)](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger['full'](_0x20426f(0x205)+serverversion+_0x20426f(0x16e)+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x20426f(0x245)+PORT+_0x20426f(0x2cf))+(_0x20426f(0x13d)+_0x5b14d3+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x20426f(0x219)](_0x20426f(0x113));if(config[_0x20426f(0x2ca)]!=0x0)for(const _0x30fd43 of config){const _0xe13704=_0x30fd43[_0x20426f(0x130)]==_0x20426f(0xf7)?'a':'m';if(_0x30fd43[_0x20426f(0x1e8)]=='enabled'||_0x30fd43[_0x20426f(0x1e8)]==_0x20426f(0x23e))await logger[_0x20426f(0x1da)](_0x20426f(0x17e)+_0xe13704+_0x20426f(0x127)+_0x30fd43['botID']+_0x20426f(0x27a)+_0x30fd43[_0x20426f(0x24b)]),startBot([_0x30fd43[_0x20426f(0x28f)],userID],{'cwd':bbpath},function(_0x16f255){const _0x21a7bf=_0x20426f;if(_0x16f255)logger[_0x21a7bf(0x1da)](_0x16f255);});else(_0x30fd43['status']==_0x20426f(0x2d0)||_0x30fd43[_0x20426f(0x1e8)]==_0x20426f(0x1c6))&&await logger[_0x20426f(0x1da)](_0x20426f(0x129)+_0xe13704+_0x20426f(0x1bd)+_0x30fd43['botID']+_0x20426f(0x27a)+_0x30fd43['botname']);}else!newBot&&logger[_0x20426f(0x219)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x20426f(0x219)](_0x20426f(0x113)),logger[_0x20426f(0x219)](''),await logger[_0x20426f(0x1b6)](_0x20426f(0x1d0)+nodeversion),await logger[_0x20426f(0x1b6)](_0x20426f(0x2e4),_0x5fc1a4);}function startSocket(){const _0x5710ad=_0xb2b351;io['on'](_0x5710ad(0x166),_0x4d8365=>{const _0x1720c5=_0x5710ad;let _0x5beade,_0x3660a7,_0x40e4fc,_0x52129a,_0x44177e;const _0x811163=_0x4d8365[_0x1720c5(0x2a2)][_0x1720c5(0x13f)]['referer'];_0x3660a7=_0x811163[_0x1720c5(0x269)](/bot[0-9]{3}/);if(_0x3660a7)_0x40e4fc=_0x3660a7[0x0]['match'](/[0-9]{3}/);if(_0x40e4fc)_0x5beade=_0x40e4fc[0x0];else _0x5beade='botmanager';const _0x391591=_0x4d8365[_0x1720c5(0x2a2)][_0x1720c5(0x19e)][_0x1720c5(0x2eb)];if(!_0x391591)_0x4d8365[_0x1720c5(0x1c4)](_0x1720c5(0x1e8),{'publicKey':secure[_0x1720c5(0x2bc)]});else{_0x52129a=timelyDecrypt(_0x391591,![]);if(!_0x52129a)_0x4d8365[_0x1720c5(0x1c4)]('status',{'publicKey':secure[_0x1720c5(0x2bc)]});else{_0x44177e=normalizeIP(_0x4d8365[_0x1720c5(0x118)][_0x1720c5(0x17d)])[_0x1720c5(0x225)];if(!devices[_0x52129a])devices[_0x52129a]={'uuid':_0x52129a,'access':{'token':null}};devices[_0x52129a]['ip']=_0x44177e;const _0x755990=addClient(_0x4d8365['id'],_0x52129a,_0x5beade);setAccess(_0x755990),emitMessages(),_0x4d8365['on']('login',_0x326aa1=>{const _0x4f014c=_0x1720c5,_0x54f7d7=timelyDecrypt(_0x326aa1[_0x4f014c(0x101)],!![],_0x4f014c(0x2e8));if(_0x54f7d7){_0x326aa1={'username':_0x326aa1['username'],'password':_0x54f7d7},devices[_0x52129a][_0x4f014c(0x220)]=validateCredentials(_0x326aa1,_0x52129a);if(devices[_0x52129a]['access'][_0x4f014c(0x2de)]==![]&&devices[_0x52129a]['access']['reason']==_0x4f014c(0x228))_0x4d8365[_0x4f014c(0x1c4)]('status',{'access':devices[_0x52129a][_0x4f014c(0x220)]}),loginAccess2FA(_0x52129a,_0x44177e);else{if(devices[_0x52129a][_0x4f014c(0x220)][_0x4f014c(0x2de)]==![]&&devices[_0x52129a][_0x4f014c(0x220)][_0x4f014c(0x14f)]=='invalid\x20credentials')_0x4d8365[_0x4f014c(0x1c4)]('status',{'access':devices[_0x52129a]['access']});else devices[_0x52129a][_0x4f014c(0x220)]['allow']&&devices[_0x52129a][_0x4f014c(0x220)]['reason']==_0x4f014c(0x2af)&&(getClientsWithUuid(_0x52129a)[_0x4f014c(0x268)](_0x3f1af3=>{setAccess(_0x3f1af3);}),logger[_0x4f014c(0x1b6)](_0x4f014c(0x27b)+_0x52129a[_0x4f014c(0x263)](-0x8)),setTokenRefresh(_0x52129a),setSessionTimeout(_0x4f014c(0x1b7),_0x52129a));}}else logger[_0x4f014c(0x1da)](_0x4f014c(0x2ae));}),_0x4d8365['on'](_0x1720c5(0x1b4),()=>{resetPassword();}),_0x4d8365['on'](_0x1720c5(0x227),_0x4b45ea=>{removeClient(_0x4d8365['id']);}),_0x5beade=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x108541){const _0x5a0991=_0xb2b351;if(_0x108541!=_0x5a0991(0x199)&&config[_0x5a0991(0x21b)]!=''){if(pid[_0x108541])pid[_0x108541][_0x5a0991(0x266)]({'function':_0x5a0991(0x270),'args':null});}_0x108541!='botmanager'&&broadcastToBots(_0x5a0991(0x1e0),JSON['stringify'](config));}function reloadBotManager(){const _0x110338=_0xb2b351;getClientsWithBotID(_0x110338(0x199))[_0x110338(0x268)](_0x35df8a=>{const _0x3a9181=_0x110338;getSocket(_0x35df8a['id'])[_0x3a9181(0x1c4)](_0x3a9181(0x1e8),{'access':{'allow':![],'reason':_0x3a9181(0x1df),'token':null}});});}function getSocket(_0x545304){const _0x5bacd5=_0xb2b351,_0x5b303d=io[_0x5bacd5(0x2ac)][_0x5bacd5(0x28e)]('/');return _0x5b303d['sockets']['get'](_0x545304);}function setAccess(_0x2e37af){const _0x50a520=_0xb2b351,_0x63658e=getSocket(_0x2e37af['id']),_0x35ba0=_0x2e37af[_0x50a520(0x1a9)],_0x12375a=_0x2e37af[_0x50a520(0x1f0)];devices[_0x35ba0][_0x50a520(0x220)]=validateAccess(devices[_0x35ba0][_0x50a520(0x220)]['token'],_0x35ba0),logger[_0x50a520(0x1b6)]('Setting\x20access:\x20'+devices[_0x35ba0][_0x50a520(0x220)][_0x50a520(0x14f)]+'\x20|\x20client:\x20...'+_0x2e37af['id']['slice'](-0x8)+_0x50a520(0x2c1)+_0x35ba0['slice'](-0x8)),_0x63658e[_0x50a520(0x10e)](_0x35ba0);if(devices[_0x35ba0][_0x50a520(0x220)][_0x50a520(0x2de)]){_0x63658e[_0x50a520(0x10e)](_0x12375a);if(_0x12375a==_0x50a520(0x199))initializeSocketBotManager(_0x63658e);else initializeSocketBot(_0x63658e);initClient(_0x12375a);}devices[_0x35ba0]['access'][_0x50a520(0x190)]&&devices[_0x35ba0][_0x50a520(0x220)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0x50a520(0x232),_0x35ba0),devices[_0x35ba0][_0x50a520(0x220)][_0x50a520(0x190)]&&devices[_0x35ba0][_0x50a520(0x220)]['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x50a520(0x1b7),_0x35ba0),_0x63658e[_0x50a520(0x1c4)](_0x50a520(0x1e8),{'status':_0x2e37af[_0x50a520(0x25d)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x35ba0][_0x50a520(0x220)],'externalip':devices[_0x35ba0]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x50a520(0x2c9)],'validInstallation':validInstallation}),devices[_0x35ba0][_0x50a520(0x220)][_0x50a520(0x2de)]==![]&&devices[_0x35ba0][_0x50a520(0x220)][_0x50a520(0x14f)]=='2FA\x20required'&&temporaryAccess2FA(_0x35ba0,devices[_0x35ba0]['ip']);}function setSessionTimeout(_0xb9ee48,_0x47b9e9){const _0x9ffdd1=_0xb2b351;let _0xb61db;if(_0xb9ee48=='login')_0xb61db=loginExpiry*0x3c*0x3e8;else _0xb61db=devices[_0x47b9e9]['telegramIpApproval'][_0x9ffdd1(0x1f3)]*0x3c*0x3e8-(new Date()[_0x9ffdd1(0x2aa)]()-devices[_0x47b9e9]['telegramIpApproval'][_0x9ffdd1(0x20f)]);if(devices[_0x47b9e9][_0x9ffdd1(0x12e)])clearTimeout(devices[_0x47b9e9][_0x9ffdd1(0x12e)]);devices[_0x47b9e9][_0x9ffdd1(0x12e)]=setTimeout(()=>{const _0x56bb32=_0x9ffdd1;if(devices[_0x47b9e9][_0x56bb32(0x2f5)])clearTimeout(devices[_0x47b9e9][_0x56bb32(0x2f5)]);removeSocketListeners(_0x47b9e9),addBlacklist(_0x47b9e9),devices[_0x47b9e9][_0x56bb32(0x287)]=null,devices[_0x47b9e9][_0x56bb32(0x186)]=null,devices[_0x47b9e9][_0x56bb32(0x220)][_0x56bb32(0x190)]=null,logger[_0x56bb32(0x1b6)](_0x56bb32(0x22c)+_0x47b9e9[_0x56bb32(0x263)](-0x8)),devices[_0x47b9e9][_0x56bb32(0x220)]=validateAccess(devices[_0x47b9e9][_0x56bb32(0x220)][_0x56bb32(0x190)],_0x47b9e9),!(devices[_0x47b9e9][_0x56bb32(0x220)][_0x56bb32(0x2de)]&&devices[_0x47b9e9][_0x56bb32(0x220)][_0x56bb32(0x14f)]==_0x56bb32(0x1e7))&&(_0xb9ee48==_0x56bb32(0x1b7)?io['to'](_0x47b9e9)[_0x56bb32(0x1c4)](_0x56bb32(0x1e8),{'access':{'allow':![],'reason':_0x56bb32(0x29d),'token':null}}):io['to'](_0x47b9e9)[_0x56bb32(0x1c4)]('status',{'access':{'allow':![],'reason':_0x56bb32(0x2b7),'token':null}})),devices[_0x47b9e9]['access']['token']=null;},_0xb61db);}function setTokenRefresh(_0xc0ea67){const _0xadabc3=_0xb2b351;if(devices[_0xc0ea67][_0xadabc3(0x2f5)])clearTimeout(devices[_0xc0ea67][_0xadabc3(0x2f5)]);devices[_0xc0ea67]['pidRefreshToken']=setTimeout(()=>{const _0x21eafa=_0xadabc3;getClientsWithUuid(_0xc0ea67)[_0x21eafa(0x2ca)]!=0x0?(devices[_0xc0ea67]['access']=refreshToken(_0xc0ea67),io['to'](_0xc0ea67)[_0x21eafa(0x1c4)](_0x21eafa(0x1e8),{'status':_0x21eafa(0x105),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xc0ea67][_0x21eafa(0x220)],'externalip':devices[_0xc0ea67]['ip'],'publicKey':secure[_0x21eafa(0x2bc)],'validInstallation':validInstallation}),setTokenRefresh(_0xc0ea67)):clearTimeout(devices[_0xc0ea67][_0x21eafa(0x2f5)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x6d2828){const _0x4b428f=_0xb2b351,_0xb47452=getClient(_0x6d2828['id'])[_0x4b428f(0x1a9)];_0x6d2828[_0x4b428f(0x1c4)](_0x4b428f(0x1e0),config),_0x6d2828[_0x4b428f(0x1c4)](_0x4b428f(0x2ea),cleanSettings()),_0x6d2828['on'](_0x4b428f(0x25b),_0x4c7d67=>{const _0x555846=_0x4b428f;if(validateAccess(_0x4c7d67,_0xb47452)[_0x555846(0x2de)])addBot();else logger[_0x555846(0x1da)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x6d2828['on'](_0x4b428f(0x238),(_0x34033e,_0x33737a)=>{const _0x11a51f=_0x4b428f;if(validateAccess(_0x33737a,_0xb47452)[_0x11a51f(0x2de)])toggleBot(_0x34033e['botID'],_0x34033e[_0x11a51f(0x1e8)],_0x34033e['live']);else logger[_0x11a51f(0x1da)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x6d2828['on'](_0x4b428f(0x250),(_0x3f27f0,_0x14803)=>{const _0x1bf3a6=_0x4b428f;if(validateAccess(_0x14803,_0xb47452)['allow'])toggleBotMode(_0x3f27f0);else logger[_0x1bf3a6(0x1da)](_0x1bf3a6(0x248));}),_0x6d2828['on'](_0x4b428f(0x264),(_0x5a4f91,_0x448696)=>{const _0x4e3fc6=_0x4b428f;if(validateAccess(_0x448696,_0xb47452)[_0x4e3fc6(0x2de)])deleteBot(_0x5a4f91);else logger['full'](_0x4e3fc6(0x23b));}),_0x6d2828['on'](_0x4b428f(0x1b8),(_0x579d87,_0x45502f)=>{const _0x5e9334=_0x4b428f;if(validateAccess(_0x45502f,_0xb47452)[_0x5e9334(0x2de)])storeSettings(_0x579d87,!![]);else logger[_0x5e9334(0x1da)](_0x5e9334(0x139));}),_0x6d2828['on'](_0x4b428f(0x2d5),_0x2db9ea=>{const _0x402072=_0x4b428f;if(validateAccess(_0x2db9ea,_0xb47452)[_0x402072(0x2de)])updateBB(_0x402072(0x121));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x6d2828['on'](_0x4b428f(0x1d1),_0x3beee3=>{const _0x27473f=_0x4b428f;if(validateAccess(_0x3beee3,_0xb47452)[_0x27473f(0x2de)])updateBB(_0x27473f(0x27c));else logger[_0x27473f(0x1da)](_0x27473f(0x13e));}),_0x6d2828['on'](_0x4b428f(0x26e),_0x51deb8=>{const _0x18f834=_0x4b428f;if(validateAccess(_0x51deb8,_0xb47452)[_0x18f834(0x2de)]){const _0x2b50cf=getClient(_0x6d2828['id']);if(_0x2b50cf)getBackupFiles(_0x2b50cf['uuid']);else logger[_0x18f834(0x1da)](_0x18f834(0x2a5));}else logger[_0x18f834(0x1da)](_0x18f834(0x2e7));}),_0x6d2828['on']('restore-backup-file',(_0x58b828,_0x3ce661)=>{const _0x5837e3=_0x4b428f;if(validateAccess(_0x3ce661,_0xb47452)[_0x5837e3(0x2de)])restoreBackupFile(_0x58b828);else logger[_0x5837e3(0x1da)](_0x5837e3(0x188));}),_0x6d2828['on']('get-messages',_0x3b939a=>{const _0x14420e=_0x4b428f;if(validateAccess(_0x3b939a,_0xb47452)[_0x14420e(0x2de)])getMessages();else logger['full'](_0x14420e(0x255));}),_0x6d2828['on'](_0x4b428f(0x18d),(_0x298696,_0x4af01b)=>{const _0x39f39b=_0x4b428f;if(validateAccess(_0x4af01b,_0xb47452)[_0x39f39b(0x2de)])confirmMessage(_0x298696);else logger[_0x39f39b(0x1da)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x6d2828['on'](_0x4b428f(0x200),_0x28c400=>{const _0x1b4a14=_0x4b428f;if(validateAccess(_0x28c400,_0xb47452)['allow']){if(devices[_0xb47452][_0x1b4a14(0x2f5)])clearTimeout(devices[_0xb47452]['pidRefreshToken']);if(devices[_0xb47452][_0x1b4a14(0x12e)])clearTimeout(devices[_0xb47452][_0x1b4a14(0x12e)]);removeSocketListeners(getClient(_0x6d2828['id'])[_0x1b4a14(0x1a9)]),addBlacklist(_0xb47452),devices[_0xb47452][_0x1b4a14(0x287)]=null,devices[_0xb47452][_0x1b4a14(0x186)]=null,devices[_0xb47452][_0x1b4a14(0x220)][_0x1b4a14(0x190)]=null,logger['debug'](_0x1b4a14(0x201)+_0xb47452[_0x1b4a14(0x263)](-0x8)),io['to'](getClient(_0x6d2828['id'])[_0x1b4a14(0x1a9)])[_0x1b4a14(0x1c4)](_0x1b4a14(0x1e8),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x1b4a14(0x2e0));});}function initializeSocketBot(_0xfa9b3d){const _0xedc08b=_0xb2b351,_0x55b6d6=getClient(_0xfa9b3d['id'])[_0xedc08b(0x1f0)],_0x3a28f5=getClient(_0xfa9b3d['id'])[_0xedc08b(0x1a9)];_0xfa9b3d['on'](_0xedc08b(0x2e9),(_0x19d0fa,_0x539f44)=>{const _0x5d6139=_0xedc08b;if(validateAccess(_0x539f44,_0x3a28f5)['allow']){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x5d6139(0x266)]({'function':'emitHistory','args':_0x19d0fa});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0xfa9b3d['on']('delete-alerts',(_0xdfe0fc,_0x10f08b)=>{const _0x377d68=_0xedc08b;if(validateAccess(_0x10f08b,_0x3a28f5)['allow']){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x377d68(0x266)]({'function':_0x377d68(0x185),'args':_0xdfe0fc});}else logger['full'](_0x377d68(0x265));}),_0xfa9b3d['on']('get-portfolio',(_0x19b8a0,_0x42457f)=>{const _0x21d83a=_0xedc08b;if(validateAccess(_0x42457f,_0x3a28f5)[_0x21d83a(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x21d83a(0x266)]({'function':_0x21d83a(0x2d9),'args':_0x19b8a0});}else logger[_0x21d83a(0x1da)](_0x21d83a(0x159));}),_0xfa9b3d['on']('store-configuration',(_0x81f049,_0x2eb9c3)=>{const _0x1a1cc0=_0xedc08b;if(validateAccess(_0x2eb9c3,_0x3a28f5)[_0x1a1cc0(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x1a1cc0(0x266)]({'function':_0x1a1cc0(0x14b),'args':_0x81f049});}else logger[_0x1a1cc0(0x1da)](_0x1a1cc0(0x2cb));}),_0xfa9b3d['on'](_0xedc08b(0x29e),(_0x149e5a,_0x45161d)=>{const _0x3146f0=_0xedc08b;if(validateAccess(_0x45161d,_0x3a28f5)['allow']){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x3146f0(0x266)]({'function':'storeHeadless','args':_0x149e5a});}else logger['full'](_0x3146f0(0x151));}),_0xfa9b3d['on'](_0xedc08b(0x180),(_0x1bfd97,_0x2b211d)=>{const _0x26481d=_0xedc08b;if(validateAccess(_0x2b211d,_0x3a28f5)[_0x26481d(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x26481d(0x266)]({'function':'storeFiat','args':_0x1bfd97});}else logger[_0x26481d(0x1da)](_0x26481d(0x144));}),_0xfa9b3d['on']('reset-history',_0x53e74e=>{const _0x549bfb=_0xedc08b;if(validateAccess(_0x53e74e,_0x3a28f5)[_0x549bfb(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x549bfb(0x266)]({'function':'resetHistory','args':null});}else logger[_0x549bfb(0x1da)](_0x549bfb(0x276));}),_0xfa9b3d['on'](_0xedc08b(0x18e),_0x461bb9=>{const _0x3eb80c=_0xedc08b;if(validateAccess(_0x461bb9,_0x3a28f5)[_0x3eb80c(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x3eb80c(0x266)]({'function':_0x3eb80c(0x1f8),'args':null});}else logger[_0x3eb80c(0x1da)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0xfa9b3d['on'](_0xedc08b(0x194),(_0x54e008,_0x4aa426)=>{const _0x304a9e=_0xedc08b;if(validateAccess(_0x4aa426,_0x3a28f5)[_0x304a9e(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x304a9e(0x266)]({'function':'placeOrder','args':_0x54e008});}else logger[_0x304a9e(0x1da)](_0x304a9e(0x2bd));}),_0xfa9b3d['on'](_0xedc08b(0x1be),_0x19ad88=>{const _0x23e7da=_0xedc08b;if(validateAccess(_0x19ad88,_0x3a28f5)[_0x23e7da(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x23e7da(0x266)]({'function':_0x23e7da(0x149),'args':null});}else logger[_0x23e7da(0x1da)](_0x23e7da(0x204));}),_0xfa9b3d['on'](_0xedc08b(0x154),_0x3a43f7=>{const _0x45295f=_0xedc08b;if(validateAccess(_0x3a43f7,_0x3a28f5)[_0x45295f(0x2de)]){if(pid[_0x55b6d6])pid[_0x55b6d6][_0x45295f(0x266)]({'function':_0x45295f(0x226),'args':null});}else logger[_0x45295f(0x1da)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0xfa9b3d['on'](_0xedc08b(0x2d5),_0x463b3f=>{const _0x4a86a9=_0xedc08b;if(validateAccess(_0x463b3f,_0x3a28f5)[_0x4a86a9(0x2de)])updateBB(_0x4a86a9(0x121));else logger[_0x4a86a9(0x1da)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0xfa9b3d['on']('get-messages',_0x7a1380=>{const _0x17965a=_0xedc08b;if(validateAccess(_0x7a1380,_0x3a28f5)[_0x17965a(0x2de)])getMessages();else logger[_0x17965a(0x1da)](_0x17965a(0x255));}),_0xfa9b3d['on']('confirm-message',(_0x4d0e22,_0x573965)=>{const _0x4874b7=_0xedc08b;if(validateAccess(_0x573965,_0x3a28f5)['allow'])confirmMessage(_0x4d0e22);else logger[_0x4874b7(0x1da)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0xfa9b3d['on'](_0xedc08b(0x200),_0x279cec=>{const _0x2d0536=_0xedc08b;if(validateAccess(_0x279cec,_0x3a28f5)['allow']){if(devices[_0x3a28f5][_0x2d0536(0x2f5)])clearTimeout(devices[_0x3a28f5][_0x2d0536(0x2f5)]);if(devices[_0x3a28f5]['pidExpireLogin'])clearTimeout(devices[_0x3a28f5][_0x2d0536(0x12e)]);removeSocketListeners(getClient(_0xfa9b3d['id'])[_0x2d0536(0x1a9)]),addBlacklist(_0x3a28f5),devices[_0x3a28f5][_0x2d0536(0x287)]=null,devices[_0x3a28f5][_0x2d0536(0x186)]=null,devices[_0x3a28f5][_0x2d0536(0x220)][_0x2d0536(0x190)]=null,logger[_0x2d0536(0x1b6)](_0x2d0536(0x201)+_0x3a28f5[_0x2d0536(0x263)](-0x8)),io['to'](getClient(_0xfa9b3d['id'])[_0x2d0536(0x1a9)])[_0x2d0536(0x1c4)](_0x2d0536(0x1e8),{'access':{'allow':![],'reason':_0x2d0536(0x1f6),'token':null}});}else logger[_0x2d0536(0x1da)](_0x2d0536(0x2e0));});}function removeSocketListeners(_0x380773){getClientsWithUuid(_0x380773)['forEach'](_0x3e4242=>{const _0xb8ad8d=_0x778f;getSocket(_0x3e4242['id'])[_0xb8ad8d(0x2a1)]();});}function cleanSettings(){const _0x42c280=_0xb2b351;let _0x539e7c=settings;return settings[_0x42c280(0x290)]&&settings[_0x42c280(0x290)]!=''&&(_0x539e7c={..._0x539e7c,'telegramToken':_0x42c280(0x1ab)}),settings[_0x42c280(0xef)]&&settings[_0x42c280(0xef)]!=''&&(_0x539e7c={..._0x539e7c,'bbPassword':'************'}),settings[_0x42c280(0x140)]&&settings[_0x42c280(0x140)]!=''&&(_0x539e7c={..._0x539e7c,'marketcapApi':_0x42c280(0x1ab)}),(settings[_0x42c280(0xef)]&&settings[_0x42c280(0xef)]==_0x42c280(0x24e)||settings[_0x42c280(0x290)]&&settings[_0x42c280(0x290)]==_0x42c280(0x24e)||settings['marketcapApi']&&settings['marketcapApi']=='***')&&(_0x539e7c={..._0x539e7c,'restored':{'password':settings['bbPassword']==_0x42c280(0x24e),'telegram':settings[_0x42c280(0x290)]==_0x42c280(0x24e),'marketcap':settings['marketcapApi']==_0x42c280(0x24e)}}),_0x539e7c;}async function updateBB(_0x392ed6){const _0x2e05f6=_0xb2b351;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x3831cd=>{const _0x6d25d0=_0x778f;restartBot(_0x3831cd[_0x6d25d0(0x28f)]);});if(_0x392ed6==_0x2e05f6(0x121))process[_0x2e05f6(0x266)]({'update':!![],'environment':environment},_0x4b58d7=>{});else _0x392ed6==_0x2e05f6(0x27c)&&process[_0x2e05f6(0x266)]({'reinstall':!![],'environment':environment},_0x55e2aa=>{});}function startBot(_0x87586e,_0x419b0a,_0x4894d6){const _0x3a2280=_0xb2b351;if(debugging)_0x87586e[_0x3a2280(0x2bf)]('-d');let _0x3cb4ac=![];const _0x52f56f=_0x87586e[0x0];_0x419b0a={..._0x419b0a,'stdio':['inherit',_0x3a2280(0x1a0),_0x3a2280(0x1a0),_0x3a2280(0x26d)]},pid[_0x52f56f]=childProcess[_0x3a2280(0x256)](botfile,_0x87586e,_0x419b0a),pid[_0x52f56f]['on'](_0x3a2280(0xf2),_0x266f5b=>{const _0x30c29b=_0x3a2280;switch(Object[_0x30c29b(0x1de)](_0x266f5b)[0x0]){case'botname':updateBotName(_0x52f56f,_0x266f5b['botname']);break;case _0x30c29b(0x173):updateBotManager();break;case _0x30c29b(0x1e8):updateStatus(_0x52f56f,_0x266f5b['status']);break;case _0x30c29b(0x17a):updateLive(_0x52f56f,_0x266f5b[_0x30c29b(0x17a)]);break;case'started':updateLive(_0x52f56f,_0x266f5b[_0x30c29b(0x295)]),io['to'](_0x52f56f)['emit'](_0x30c29b(0x1e8),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x30c29b(0x161):_0x266f5b[_0x30c29b(0x161)]=='restart'&&restartBot(_0x52f56f);_0x266f5b['stop']==_0x30c29b(0x293)&&toggleBot(_0x52f56f,_0x30c29b(0x2d0),_0x30c29b(0x2ad));break;case _0x30c29b(0x1dc):sendTelegramBot(_0x52f56f,_0x266f5b[_0x30c29b(0x1dc)]);break;case'telegrammsg':sendTelegramMsg(_0x266f5b[_0x30c29b(0x29a)]);break;case _0x30c29b(0x195):io['to'](_0x52f56f)[_0x30c29b(0x1c4)](_0x266f5b[_0x30c29b(0x195)],_0x266f5b['args']);break;}}),pid[_0x52f56f]['on']('error',function(_0xed1f8){if(_0x3cb4ac)return;_0x3cb4ac=!![],_0x4894d6(_0xed1f8);}),pid[_0x52f56f]['on'](_0x3a2280(0x160),async function(_0x46924d){const _0x37c12b=_0x3a2280;if(terminating)return;if(installingUpdate){io['close']();return;}if(_0x3cb4ac)return;_0x3cb4ac=!![],_0x4894d6(null);const _0x107a57=dbConfig['get'](_0x37c12b(0x1e0))[_0x37c12b(0x20a)]({'botID':_0x52f56f})[_0x37c12b(0x1cd)]();_0x107a57&&(_0x107a57['status']==_0x37c12b(0x289)||_0x107a57[_0x37c12b(0x1e8)]=='new')&&(await sleep(0x3e8),updateLive(_0x52f56f,_0x37c12b(0x2ad)),logger[_0x37c12b(0x1da)](_0x37c12b(0x11b)+_0x52f56f),startBot([_0x52f56f,userID],{'cwd':bbpath},function(_0x465bbf){const _0x1c33e3=_0x37c12b;if(_0x465bbf)logger[_0x1c33e3(0x1da)](_0x465bbf);}));});}function stopBot(_0x2aa675){getClientsWithBotID(_0x2aa675)['forEach'](_0x416a25=>{const _0x49c2ea=_0x778f;getSocket(_0x416a25['id'])[_0x49c2ea(0x227)](!![]),removeClient(_0x416a25['id']);}),pid[_0x2aa675]&&(pid[_0x2aa675]['kill'](),pid[_0x2aa675]=null);}function stopAllBots(){const _0x4de293=_0xb2b351;terminating=!![];const _0x5843cc=getEnabledBots();_0x5843cc[_0x4de293(0x268)](_0x372819=>{stopBot(_0x372819['botID']);});}function restartBot(_0x2b9d62){const _0x1d2584=_0xb2b351;if(pid[_0x2b9d62])pid[_0x2b9d62][_0x1d2584(0x293)]();}function addBot(){const _0x3046d9=_0xb2b351;let _0x56d93b;for(let _0x217373=0x1;_0x217373<0x3e9;_0x217373++){_0x56d93b=_0x217373[_0x3046d9(0x247)]()['padStart'](0x3,'0');let _0xc31a47=config[_0x3046d9(0x20a)](_0x27f41d=>_0x27f41d['botID']==_0x56d93b);if(!_0xc31a47)break;}if(_0x56d93b===_0x3046d9(0x1cf)){logger['full'](_0x3046d9(0x12b));return;}logger[_0x3046d9(0x1da)](_0x3046d9(0x210)+_0x56d93b),dbConfig[_0x3046d9(0x28e)](_0x3046d9(0x1e0))[_0x3046d9(0x2bf)]({'botID':_0x56d93b,'botname':_0x3046d9(0x1a8)+_0x56d93b,'status':'new','live':''})[_0x3046d9(0x175)](),startBot([_0x56d93b,userID],{'cwd':bbpath},function(_0xc37f8){if(_0xc37f8)logger['full'](_0xc37f8);}),config=getConfiguration(),io['to'](_0x3046d9(0x199))[_0x3046d9(0x1c4)](_0x3046d9(0x1e0),config),broadcastToBots(_0x3046d9(0x1e0),JSON[_0x3046d9(0x1c9)](config));}function deleteBot(_0x455772){const _0x114246=_0xb2b351;getClientsWithBotID(_0x455772)[_0x114246(0x268)](_0x7d2082=>{getSocket(_0x7d2082['id'])['disconnect'](!![]),removeClient(_0x7d2082['id']);}),dbConfig[_0x114246(0x28e)](_0x114246(0x1e0))['remove']({'botID':_0x455772})['write'](),logger['full'](_0x114246(0x1c5)+_0x455772),stopBot(_0x455772);try{if(fs[_0x114246(0x2a0)](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+'-config.json')))fs[_0x114246(0x29c)](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x168)));if(fs['existsSync'](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x22e))))fs[_0x114246(0x29c)](path['join'](configpath,'bot-'+_0x455772+_0x114246(0x22e)));if(fs[_0x114246(0x2a0)](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x1eb))))fs[_0x114246(0x29c)](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x1eb)));if(fs[_0x114246(0x2a0)](path['join'](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x25e))))fs[_0x114246(0x29c)](path[_0x114246(0x10e)](configpath,_0x114246(0x2c5)+_0x455772+_0x114246(0x25e)));}catch(_0x2d2bfa){if(_0x2d2bfa)logger[_0x114246(0x1da)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x2d2bfa);}config=getConfiguration(),io['to'](_0x114246(0x199))['emit'](_0x114246(0x1e0),config),broadcastToBots(_0x114246(0x1e0),JSON[_0x114246(0x1c9)](config));}function toggleBot(_0x6d3d4,_0x19c255,_0x53ced8){const _0x12c350=_0xb2b351;dbConfig['get'](_0x12c350(0x1e0))[_0x12c350(0x20a)]({'botID':_0x6d3d4})[_0x12c350(0x13c)]({'status':_0x19c255})['assign']({'live':_0x53ced8})[_0x12c350(0x175)]();if(_0x19c255==_0x12c350(0x289)||_0x19c255==_0x12c350(0x23e))logger['full']('Enabled\x20Bot\x20'+_0x6d3d4),startBot([_0x6d3d4,userID],{'cwd':bbpath},function(_0x1b0c04){if(_0x1b0c04)logger['full'](_0x1b0c04);});else(_0x19c255=='disabled'||_0x19c255==_0x12c350(0x1c6))&&(logger[_0x12c350(0x1da)]('Disabled\x20Bot\x20'+_0x6d3d4),stopBot(_0x6d3d4));config=getConfiguration(),io['to']('botmanager')[_0x12c350(0x1c4)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleStatus(_0x501fb9){const _0x5e8487=_0xb2b351;let _0x590da7=dbConfig[_0x5e8487(0x28e)]('bots')[_0x5e8487(0x20a)]({'botID':_0x501fb9})[_0x5e8487(0x1cd)](),_0x5b1e39;if(_0x590da7[_0x5e8487(0x1e8)]===_0x5e8487(0x289))_0x5b1e39='disabled';else{if(_0x590da7[_0x5e8487(0x1e8)]===_0x5e8487(0x23e))_0x5b1e39=_0x5e8487(0x1c6);else{if(_0x590da7[_0x5e8487(0x1e8)]===_0x5e8487(0x1c6))_0x5b1e39=_0x5e8487(0x23e);else{if(_0x590da7[_0x5e8487(0x1e8)]===_0x5e8487(0x2d0))_0x5b1e39=_0x5e8487(0x289);}}}return _0x5b1e39;}function updateStatus(_0x1224a1,_0x22f7b1){const _0x5c4927=_0xb2b351;dbConfig['get'](_0x5c4927(0x1e0))[_0x5c4927(0x20a)]({'botID':_0x1224a1})[_0x5c4927(0x13c)]({'status':_0x22f7b1})['write'](),config=getConfiguration(),io['to'](_0x5c4927(0x199))['emit'](_0x5c4927(0x1e0),config),broadcastToBots(_0x5c4927(0x1e0),JSON[_0x5c4927(0x1c9)](config));}function updateLive(_0xc5aeb7,_0x1f658d){const _0x24625c=_0xb2b351;dbConfig[_0x24625c(0x28e)](_0x24625c(0x1e0))[_0x24625c(0x20a)]({'botID':_0xc5aeb7})['assign']({'live':_0x1f658d})['write'](),config=getConfiguration(),io['to'](_0x24625c(0x199))[_0x24625c(0x1c4)]('bots',config),broadcastToBots(_0x24625c(0x1e0),JSON[_0x24625c(0x1c9)](config));}function _0x778f(_0x22467c,_0x359006){const _0x5b7cb0=_0x3a9d();return _0x778f=function(_0x49d814,_0xad1c18){_0x49d814=_0x49d814-0xe8;let _0x3a9dc2=_0x5b7cb0[_0x49d814];return _0x3a9dc2;},_0x778f(_0x22467c,_0x359006);}function updateBotName(_0x7af790,_0x328ba4){const _0xd5abc=_0xb2b351;dbConfig[_0xd5abc(0x28e)](_0xd5abc(0x1e0))['find']({'botID':_0x7af790})[_0xd5abc(0x13c)]({'botname':_0x328ba4})[_0xd5abc(0x175)](),config=getConfiguration(),io['to'](_0xd5abc(0x199))[_0xd5abc(0x1c4)](_0xd5abc(0x1e0),config),broadcastToBots(_0xd5abc(0x1e0),JSON[_0xd5abc(0x1c9)](config));}function updateBotManager(){const _0x1e1a3c=_0xb2b351;config=getConfiguration(),io['to'](_0x1e1a3c(0x199))[_0x1e1a3c(0x1c4)]('bots',config),broadcastToBots(_0x1e1a3c(0x1e0),JSON[_0x1e1a3c(0x1c9)](config));}function toggleBotMode(_0x130826){const _0x24d56f=_0xb2b351;if(pid[_0x130826])pid[_0x130826][_0x24d56f(0x266)]({'function':_0x24d56f(0x280),'args':null});else{const _0x4f2280=configpath+_0x24d56f(0x2c5)+_0x130826+'-config.json',_0x4237a9=fs['readFileSync'](_0x4f2280),_0xa2df28=JSON[_0x24d56f(0x15e)](_0x4237a9),_0x418f4a=_0xa2df28[_0x24d56f(0x1f0)][0x0][_0x24d56f(0x143)];_0xa2df28['bot'][0x0]['headless']=!_0x418f4a;const _0x3e6801=JSON[_0x24d56f(0x1c9)](_0xa2df28,null,0x2);fs[_0x24d56f(0x2b5)](_0x4f2280,_0x3e6801),config=getConfiguration(),io['to'](_0x24d56f(0x199))[_0x24d56f(0x1c4)](_0x24d56f(0x1e0),config),broadcastToBots(_0x24d56f(0x1e0),JSON[_0x24d56f(0x1c9)](config));}}function validateTelegram(_0xa758b1){const _0x2db04b=_0xb2b351;if(_0xa758b1[_0x2db04b(0x294)][_0x2db04b(0x23f)]!=settings['telegramUsername']&&'@'+_0xa758b1[_0x2db04b(0x294)][_0x2db04b(0x23f)]!=settings[_0x2db04b(0x213)]||_0xa758b1[_0x2db04b(0x285)]['id']!=settings['telegramChatId'])return sendTelegram(_0xa758b1[_0x2db04b(0x285)]['id'],_0x2db04b(0x163),{'parse_mode':_0x2db04b(0x2e1)}),![];return!![];}async function initTelegram(){const _0x152596=_0xb2b351;if(tgBot)tgBot[_0x152596(0x161)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x152596(0x290)]);let _0x3309c9=_0x152596(0x19d);_0x3309c9+='\x0a',_0x3309c9+=_0x152596(0x124),_0x3309c9+=_0x152596(0x148),_0x3309c9+=_0x152596(0x1c2),_0x3309c9+=_0x152596(0x171),_0x3309c9+=_0x152596(0x1a2),_0x3309c9+=_0x152596(0xfe),_0x3309c9+=_0x152596(0x133),_0x3309c9+=_0x152596(0x286),_0x3309c9+=_0x152596(0x230),_0x3309c9+=_0x152596(0x15f),_0x3309c9+=_0x152596(0x2e2),_0x3309c9+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3309c9+=_0x152596(0x1ba),_0x3309c9+=_0x152596(0x102);let _0x4aaa20=_0x152596(0x243);_0x4aaa20+='\x0a',_0x4aaa20+=_0x3309c9,tgBot[_0x152596(0x203)]((_0x407cbd,_0x207014)=>{const _0x418c8a=_0x152596;logger[_0x418c8a(0x219)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x418c8a(0x1b6)]('Telegraf\x20error:',_0x407cbd);}),tgBot[_0x152596(0x2be)](async(_0x53ed5d,_0x5bfb1c)=>{const _0x281d53=_0x152596;if(!(!settings[_0x281d53(0x274)]&&_0x53ed5d[_0x281d53(0x121)]['message'][_0x281d53(0x114)]==_0x281d53(0x162))){if(!validateTelegram(_0x53ed5d))return;}_0x5bfb1c();}),tgBot[_0x152596(0x279)](_0x152596(0x2bb),async _0x4cef49=>{const _0x26e371=_0x152596;if(!settings[_0x26e371(0x274)])updateSetting(_0x26e371(0x274),_0x4cef49[_0x26e371(0x285)]['id']);updateSetting(_0x26e371(0x22d),!![]);if(!validateTelegram(_0x4cef49))return;await sendTelegram(_0x4cef49[_0x26e371(0x285)]['id'],_0x4aaa20);}),tgBot[_0x152596(0x279)](_0x152596(0x1bb),async _0x52625f=>{const _0x1b2ea2=_0x152596;updateSetting(_0x1b2ea2(0x22d),!![]),await sendTelegram(_0x52625f[_0x1b2ea2(0x285)]['id'],_0x1b2ea2(0x12f));}),tgBot[_0x152596(0x279)](_0x152596(0x15a),async _0x14560=>{const _0x3e91fb=_0x152596;await sendTelegram(_0x14560[_0x3e91fb(0x285)]['id'],'Notifications\x20disabled'),updateSetting(_0x3e91fb(0x22d),![]);}),tgBot[_0x152596(0x279)](_0x152596(0x146),async _0x1a97d3=>{const _0x1f84db=_0x152596,_0x477db9=Markup['inlineKeyboard']([Markup['button'][_0x1f84db(0x2b6)]('Orders',_0x1f84db(0x109)),Markup[_0x1f84db(0x282)]['callback'](_0x1f84db(0x277),_0x1f84db(0x110)),Markup['button'][_0x1f84db(0x2b6)](_0x1f84db(0x2f3),'config_all')]);_0x1a97d3[_0x1f84db(0x229)](_0x1f84db(0x2f6),_0x477db9);}),tgBot['action'](_0x152596(0x109),async _0x97f1dc=>{const _0x40b54b=_0x152596;_0x97f1dc[_0x40b54b(0x11f)](),updateSetting(_0x40b54b(0x1c8),_0x40b54b(0x11d)),updateSetting(_0x40b54b(0x22d),!![]),await sendTelegram(_0x97f1dc[_0x40b54b(0x285)]['id'],_0x40b54b(0x1ff));}),tgBot[_0x152596(0x29b)]('config_alerts',async _0x32fd02=>{const _0x1536e0=_0x152596;_0x32fd02['editMessageReplyMarkup'](),updateSetting(_0x1536e0(0x1c8),'alerts'),updateSetting(_0x1536e0(0x22d),!![]),await sendTelegram(_0x32fd02[_0x1536e0(0x285)]['id'],_0x1536e0(0x260));}),tgBot[_0x152596(0x29b)](_0x152596(0x1fb),async _0xaca9c=>{const _0x37ee65=_0x152596;_0xaca9c['editMessageReplyMarkup'](),updateSetting(_0x37ee65(0x1c8),'all'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xaca9c['chat']['id'],_0x37ee65(0x10a));}),tgBot['command'](_0x152596(0x1e8),async _0x3dd783=>{const _0x45568d=_0x152596,_0x1acfaf=getBotsWithMode();let _0x4c19f5=_0x45568d(0xff);config[_0x45568d(0x268)](_0x3e5c4d=>{const _0x2bef5b=_0x45568d,_0x30cd04=_0x1acfaf[_0x2bef5b(0x20a)](_0x8ce988=>_0x8ce988[_0x2bef5b(0x28f)]==_0x3e5c4d[_0x2bef5b(0x28f)])[_0x2bef5b(0x130)];_0x4c19f5+=_0x2bef5b(0x1a8)+_0x3e5c4d[_0x2bef5b(0x28f)]+':\x20'+_0x3e5c4d[_0x2bef5b(0x1e8)]+_0x2bef5b(0x27a)+_0x30cd04+_0x2bef5b(0x27a)+_0x3e5c4d[_0x2bef5b(0x17a)]+'\x0a';}),_0x4c19f5+='\x0a',_0x4c19f5+=_0x45568d(0x136),_0x4c19f5+=!settings[_0x45568d(0x22d)]?_0x45568d(0x19c):'Notifications\x20enabled\x0a',_0x4c19f5+=settings[_0x45568d(0x22d)]?settings['telegramEvents']==_0x45568d(0x1af)?_0x45568d(0x197):_0x45568d(0x1a4)+settings['telegramEvents']+_0x45568d(0x278):'',await sendTelegram(_0x3dd783[_0x45568d(0x285)]['id'],_0x4c19f5,{'parse_mode':_0x45568d(0x2e1)});}),tgBot['command'](_0x152596(0xf8),async _0x28ecb3=>{const _0x3c7958=_0x152596,_0x2196bb=getEnabledBots();if(_0x2196bb[_0x3c7958(0x2ca)]==0x0)await sendTelegram(_0x28ecb3[_0x3c7958(0x285)]['id'],_0x3c7958(0x1fe));else{if(_0x2196bb[_0x3c7958(0x2ca)]>0x1)_0x2196bb[_0x3c7958(0x2bf)]({'botID':_0x3c7958(0x1af)});let _0x534dae=[],_0x2a3078=[];const _0x112799=_0x2196bb[_0x3c7958(0x2ca)]%0x4==0x0||_0x2196bb[_0x3c7958(0x2ca)]%0x4==0x3||_0x2196bb[_0x3c7958(0x2ca)]%0x3==0x1?0x4:0x3;let _0x3d2970=0x0;_0x2196bb[_0x3c7958(0x268)]((_0xff2ffe,_0x2ab508)=>{const _0x58a4ed=_0x3c7958;if(_0x2ab508%_0x112799==0x0)_0x2a3078=[];_0x2a3078[_0x58a4ed(0x2bf)](Markup['button'][_0x58a4ed(0x2b6)](_0xff2ffe[_0x58a4ed(0x28f)]==_0x58a4ed(0x1af)?'All\x20bots':_0x58a4ed(0x1a8)+_0xff2ffe[_0x58a4ed(0x28f)],'restart_'+_0xff2ffe[_0x58a4ed(0x28f)])),_0x2ab508%_0x112799==0x0&&(_0x534dae[_0x3d2970]=_0x2a3078,_0x3d2970++);});const _0x31db29=Markup['inlineKeyboard'](_0x534dae);_0x28ecb3['reply'](_0x3c7958(0x214),_0x31db29);}}),tgBot[_0x152596(0x29b)](/restart_(.+)/,async _0x4098f3=>{const _0x1e0ac2=_0x152596,_0x4c0958=_0x4098f3['match'][0x1];_0x4098f3['editMessageReplyMarkup'](),_0x4c0958==_0x1e0ac2(0x1af)?config[_0x1e0ac2(0x268)](_0x1a399b=>{const _0x4e5ad5=_0x1e0ac2;restartBot(_0x1a399b[_0x4e5ad5(0x28f)]);}):restartBot(_0x4c0958);}),tgBot[_0x152596(0x279)]('on',async _0xe44419=>{const _0xa6aba5=_0x152596,_0x34aad2=getDisabledBots();if(_0x34aad2[_0xa6aba5(0x2ca)]==0x0)await sendTelegram(_0xe44419['chat']['id'],_0xa6aba5(0x112));else{if(_0x34aad2[_0xa6aba5(0x2ca)]>0x1)_0x34aad2[_0xa6aba5(0x2bf)]({'botID':_0xa6aba5(0x1af)});let _0x5da89e=[],_0x31e948=[];const _0x3ff72a=_0x34aad2[_0xa6aba5(0x2ca)]%0x4==0x0||_0x34aad2[_0xa6aba5(0x2ca)]%0x4==0x3||_0x34aad2[_0xa6aba5(0x2ca)]%0x3==0x1?0x4:0x3;let _0x5cbeff=0x0;_0x34aad2[_0xa6aba5(0x268)]((_0x4e8638,_0x52676b)=>{const _0x47a63c=_0xa6aba5;if(_0x52676b%_0x3ff72a==0x0)_0x31e948=[];_0x31e948['push'](Markup[_0x47a63c(0x282)][_0x47a63c(0x2b6)](_0x4e8638[_0x47a63c(0x28f)]==_0x47a63c(0x1af)?'All\x20bots':'Bot\x20'+_0x4e8638[_0x47a63c(0x28f)],_0x47a63c(0x261)+_0x4e8638[_0x47a63c(0x28f)])),_0x52676b%_0x3ff72a==0x0&&(_0x5da89e[_0x5cbeff]=_0x31e948,_0x5cbeff++);});const _0x62dc87=Markup[_0xa6aba5(0x1e4)](_0x5da89e);_0xe44419['reply'](_0xa6aba5(0x1c0),_0x62dc87);}}),tgBot['action'](/on_(.+)/,async _0x37d1bd=>{const _0x25b722=_0x152596,_0xf5c401=_0x37d1bd[_0x25b722(0x269)][0x1];_0x37d1bd[_0x25b722(0x11f)]();if(_0xf5c401==_0x25b722(0x1af)){const _0x28abfc=getDisabledBots();await sendTelegram(_0x37d1bd['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x28abfc[_0x25b722(0x268)](_0x6388b8=>{const _0x21c0ba=_0x25b722;if(_0x6388b8[_0x21c0ba(0x28f)]!='all')toggleBot(_0x6388b8[_0x21c0ba(0x28f)],toggleStatus(_0x6388b8[_0x21c0ba(0x28f)]),_0x21c0ba(0x2ad));});}else await sendTelegram(_0x37d1bd['chat']['id'],_0x25b722(0x104)+_0xf5c401),toggleBot(_0xf5c401,toggleStatus(_0xf5c401),_0x25b722(0x2ad));}),tgBot[_0x152596(0x279)](_0x152596(0xe8),async _0xfa267c=>{const _0x145c31=_0x152596,_0x57d8e9=getEnabledBots();if(_0x57d8e9[_0x145c31(0x2ca)]==0x0)await sendTelegram(_0xfa267c[_0x145c31(0x285)]['id'],_0x145c31(0x1fe));else{if(_0x57d8e9[_0x145c31(0x2ca)]>0x1)_0x57d8e9[_0x145c31(0x2bf)]({'botID':_0x145c31(0x1af)});let _0x46ce0f=[],_0x4964f9=[];const _0x4f7286=_0x57d8e9[_0x145c31(0x2ca)]%0x4==0x0||_0x57d8e9[_0x145c31(0x2ca)]%0x4==0x3||_0x57d8e9[_0x145c31(0x2ca)]%0x3==0x1?0x4:0x3;let _0x4c3f01=0x0;_0x57d8e9['forEach']((_0x2f22e3,_0x30a3d2)=>{const _0x14ece2=_0x145c31;if(_0x30a3d2%_0x4f7286==0x0)_0x4964f9=[];_0x4964f9[_0x14ece2(0x2bf)](Markup[_0x14ece2(0x282)][_0x14ece2(0x2b6)](_0x2f22e3['botID']==_0x14ece2(0x1af)?_0x14ece2(0x120):'Bot\x20'+_0x2f22e3[_0x14ece2(0x28f)],_0x14ece2(0x223)+_0x2f22e3['botID'])),_0x30a3d2%_0x4f7286==0x0&&(_0x46ce0f[_0x4c3f01]=_0x4964f9,_0x4c3f01++);});const _0x1e971e=Markup[_0x145c31(0x1e4)](_0x46ce0f);_0xfa267c[_0x145c31(0x229)](_0x145c31(0x192),_0x1e971e);}}),tgBot['action'](/off_(.+)/,async _0x160372=>{const _0x2c82f9=_0x152596,_0xd30595=_0x160372[_0x2c82f9(0x269)][0x1];_0x160372[_0x2c82f9(0x11f)]();if(_0xd30595=='all'){const _0x2c78e4=getEnabledBots();await sendTelegram(_0x160372[_0x2c82f9(0x285)]['id'],_0x2c82f9(0xeb)),_0x2c78e4[_0x2c82f9(0x268)](_0x8350cf=>{const _0x57943a=_0x2c82f9;if(_0x8350cf[_0x57943a(0x28f)]!=_0x57943a(0x1af))toggleBot(_0x8350cf[_0x57943a(0x28f)],toggleStatus(_0x8350cf[_0x57943a(0x28f)]),_0x57943a(0x2ad));});}else await sendTelegram(_0x160372[_0x2c82f9(0x285)]['id'],_0x2c82f9(0x1e1)+_0xd30595),toggleBot(_0xd30595,toggleStatus(_0xd30595),_0x2c82f9(0x2ad));}),tgBot['command']('metrics',async _0x1e2c5a=>{const _0x376dcc=_0x152596,_0x361122=getEnabledBots();if(_0x361122['length']==0x0)await sendTelegram(_0x1e2c5a[_0x376dcc(0x285)]['id'],_0x376dcc(0x1fe));else{if(_0x361122['length']>0x1){let _0x2f3caa=[],_0xeffb72=[];const _0xe5b0ea=_0x361122['length']%0x4==0x0||_0x361122[_0x376dcc(0x2ca)]%0x4==0x3||_0x361122[_0x376dcc(0x2ca)]%0x3==0x1?0x4:0x3;let _0x38dfa7=0x0;_0x361122[_0x376dcc(0x268)]((_0x54f126,_0x18a128)=>{const _0x53324a=_0x376dcc;if(_0x18a128%_0xe5b0ea==0x0)_0xeffb72=[];_0xeffb72[_0x53324a(0x2bf)](Markup[_0x53324a(0x282)][_0x53324a(0x2b6)](_0x53324a(0x1a8)+_0x54f126[_0x53324a(0x28f)],'metrics_'+_0x54f126['botID'])),_0x18a128%_0xe5b0ea==0x0&&(_0x2f3caa[_0x38dfa7]=_0xeffb72,_0x38dfa7++);});const _0xa1bd0f=Markup[_0x376dcc(0x1e4)](_0x2f3caa);_0x1e2c5a['reply'](_0x376dcc(0x207),_0xa1bd0f);}else{const _0x233ce6=_0x361122[0x0][_0x376dcc(0x28f)];if(pid[_0x233ce6])pid[_0x233ce6]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x152596(0x29b)](/metrics_(.+)/,async _0x2434bb=>{const _0x4c2661=_0x152596,_0x493f4f=_0x2434bb[_0x4c2661(0x269)][0x1];_0x2434bb[_0x4c2661(0x11f)]();if(pid[_0x493f4f])pid[_0x493f4f][_0x4c2661(0x266)]({'function':'sendMetricsTelegram','args':null});}),tgBot['command'](_0x152596(0x24a),async _0x241d7c=>{const _0x178281=_0x152596,_0x1123ef=getEnabledBots();if(_0x1123ef[_0x178281(0x2ca)]==0x0)await sendTelegram(_0x241d7c[_0x178281(0x285)]['id'],_0x178281(0x1fe));else{if(_0x1123ef[_0x178281(0x2ca)]>0x1){let _0x46b80d=[],_0x3aa0f9=[];const _0x366b47=_0x1123ef[_0x178281(0x2ca)]%0x4==0x0||_0x1123ef[_0x178281(0x2ca)]%0x4==0x3||_0x1123ef[_0x178281(0x2ca)]%0x3==0x1?0x4:0x3;let _0x46b889=0x0;_0x1123ef[_0x178281(0x268)]((_0x4528d5,_0x1ed0cb)=>{const _0x7ac734=_0x178281;if(_0x1ed0cb%_0x366b47==0x0)_0x3aa0f9=[];_0x3aa0f9['push'](Markup[_0x7ac734(0x282)]['callback'](_0x7ac734(0x1a8)+_0x4528d5[_0x7ac734(0x28f)],'portfolio_'+_0x4528d5[_0x7ac734(0x28f)])),_0x1ed0cb%_0x366b47==0x0&&(_0x46b80d[_0x46b889]=_0x3aa0f9,_0x46b889++);});const _0x3b28bf=Markup['inlineKeyboard'](_0x46b80d);_0x241d7c[_0x178281(0x229)](_0x178281(0x1b9),_0x3b28bf);}else{const _0x1686d7=_0x1123ef[0x0][_0x178281(0x28f)];if(pid[_0x1686d7])pid[_0x1686d7][_0x178281(0x266)]({'function':_0x178281(0x103),'args':null});}}}),tgBot[_0x152596(0x29b)](/portfolio_(.+)/,async _0x426fa6=>{const _0x2a8d20=_0x152596,_0x2a3ea5=_0x426fa6['match'][0x1];_0x426fa6[_0x2a8d20(0x11f)]();if(pid[_0x2a3ea5])pid[_0x2a3ea5][_0x2a8d20(0x266)]({'function':_0x2a8d20(0x103),'args':null});}),tgBot[_0x152596(0x279)](_0x152596(0x121),async _0x283de8=>{const _0x376fde=_0x152596;await getMessages();if(!updateAvailable)await sendTelegram(_0x283de8[_0x376fde(0x285)]['id'],_0x376fde(0x11a));else{if(!validInstallation)await sendTelegram(_0x283de8[_0x376fde(0x285)]['id'],_0x376fde(0x1c3));else{const _0x3a7521=Markup[_0x376fde(0x1e4)]([Markup['button'][_0x376fde(0x2b6)]('Yes',_0x376fde(0x10d)),Markup[_0x376fde(0x282)]['callback']('No','update_no')]);_0x283de8[_0x376fde(0x229)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x3a7521);}}}),tgBot['action'](/update_(.+)/,async _0x744bd=>{const _0x6573da=_0x152596,_0x3a0e28=_0x744bd[_0x6573da(0x269)][0x1];_0x744bd['editMessageReplyMarkup'](),_0x3a0e28==_0x6573da(0x241)&&(await sendTelegram(_0x744bd[_0x6573da(0x285)]['id'],_0x6573da(0x128)),updateBB(_0x6573da(0x121))),_0x3a0e28=='no'&&await sendTelegram(_0x744bd['chat']['id'],_0x6573da(0x2a4));}),tgBot[_0x152596(0x279)](_0x152596(0x27c),async _0x22cd3f=>{const _0x4847e0=_0x152596;if(!validInstallation)await sendTelegram(_0x22cd3f[_0x4847e0(0x285)]['id'],_0x4847e0(0x17f));else{const _0x41457e=Markup[_0x4847e0(0x1e4)]([Markup[_0x4847e0(0x282)][_0x4847e0(0x2b6)](_0x4847e0(0x1f9),_0x4847e0(0x26c)),Markup[_0x4847e0(0x282)][_0x4847e0(0x2b6)]('No','reinstall_no')]);_0x22cd3f['reply'](_0x4847e0(0x1b5),_0x41457e);}}),tgBot[_0x152596(0x29b)](/reinstall_(.+)/,async _0x3f6482=>{const _0x515bcc=_0x152596,_0x474e93=_0x3f6482[_0x515bcc(0x269)][0x1];_0x3f6482[_0x515bcc(0x11f)](),_0x474e93==_0x515bcc(0x241)&&(await sendTelegram(_0x3f6482['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB('reinstall')),_0x474e93=='no'&&await sendTelegram(_0x3f6482[_0x515bcc(0x285)]['id'],_0x515bcc(0x10c));}),tgBot[_0x152596(0x279)](_0x152596(0x134),async _0x1fdad9=>{const _0x1af572=_0x152596,_0x74873f=getBotsWithMode();if(_0x74873f[_0x1af572(0x2ca)]==0x0)await sendTelegram(_0x1fdad9[_0x1af572(0x285)]['id'],_0x1af572(0x1fe));else{let _0x47b4db=[],_0x36d147=[];const _0x54fa4f=0x2;let _0x397e3b=0x0;_0x74873f['forEach']((_0x113e8a,_0x2b4b87)=>{const _0x3994b7=_0x1af572;if(_0x2b4b87%_0x54fa4f==0x0)_0x36d147=[];_0x36d147['push'](Markup[_0x3994b7(0x282)][_0x3994b7(0x2b6)](_0x3994b7(0x1a8)+_0x113e8a[_0x3994b7(0x28f)]+'\x20('+_0x113e8a[_0x3994b7(0x130)]+')','toggle_'+_0x113e8a[_0x3994b7(0x28f)])),_0x2b4b87%_0x54fa4f==0x0&&(_0x47b4db[_0x397e3b]=_0x36d147,_0x397e3b++);});const _0x547b4f=Markup['inlineKeyboard'](_0x47b4db);_0x1fdad9['reply'](_0x1af572(0xf5),_0x547b4f);}}),tgBot[_0x152596(0x29b)](/toggle_(.+)/,async _0xa47d70=>{const _0x30e99f=_0x152596,_0x3b2c29=_0xa47d70[_0x30e99f(0x269)][0x1];_0xa47d70[_0x30e99f(0x11f)]();const _0x3c720d=getBotsWithMode(),_0x146e53=_0x3c720d[_0x30e99f(0x20a)](_0x5e6314=>_0x5e6314[_0x30e99f(0x28f)]==_0x3b2c29),_0x2542d3=_0x146e53[_0x30e99f(0x130)]=='auto'?_0x30e99f(0x1b3):'auto';await sendTelegram(_0xa47d70[_0x30e99f(0x285)]['id'],_0x30e99f(0x2b9)+_0x3b2c29+_0x30e99f(0x242)+_0x2542d3+'\x20mode'),toggleBotMode(_0x3b2c29);}),tgBot['command'](_0x152596(0x18c),async _0x111f4c=>{const _0x5b85a9=_0x152596;let _0x39c86e='';config[_0x5b85a9(0x268)](_0x419e84=>{const _0x34ceaf=_0x5b85a9;_0x39c86e+=_0x34ceaf(0x1a8)+_0x419e84[_0x34ceaf(0x28f)]+':\x20'+_0x419e84[_0x34ceaf(0x24b)]+'\x0a';}),await sendTelegram(_0x111f4c[_0x5b85a9(0x285)]['id'],_0x39c86e,{'parse_mode':_0x5b85a9(0x2e1)});}),tgBot[_0x152596(0x279)]('help',async _0x454c1b=>{const _0x587d16=_0x152596;await sendTelegram(_0x454c1b[_0x587d16(0x285)]['id'],_0x3309c9);}),process[_0x152596(0xf3)]('SIGINT',()=>tgBot['stop'](_0x152596(0x191))),process[_0x152596(0xf3)]('SIGTERM',()=>tgBot[_0x152596(0x161)](_0x152596(0x21c))),tgBot[_0x152596(0x2cd)]();}}function disableTelegram(){const _0x63f179=_0xb2b351;tgBot&&tgBot[_0x63f179(0x161)]();}async function sendTelegram(_0x53b71e,_0x1523bc,_0x5a970b){const _0x35bf06=_0xb2b351;_0x5a970b={..._0x5a970b,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x35bf06(0x2b0)](_0x53b71e,_0x1523bc,_0x5a970b);}catch(_0x1e7228){console[_0x35bf06(0x2ee)](_0x35bf06(0xf1),_0x1e7228);}}async function sendTelegramBot(_0x5efe84,_0x47c065){const _0x73bae8=_0xb2b351;if(settings[_0x73bae8(0x22d)]){if(settings[_0x73bae8(0x1c8)]==_0x73bae8(0x1af)||(_0x47c065[_0x73bae8(0x15b)]==_0x73bae8(0x2b2)||_0x47c065[_0x73bae8(0x15b)]==_0x73bae8(0x275)||_0x47c065[_0x73bae8(0x15b)]==_0x73bae8(0x284))&&settings[_0x73bae8(0x1c8)]==_0x73bae8(0x20c)||_0x47c065[_0x73bae8(0x15b)]==_0x73bae8(0x2a7)&&settings[_0x73bae8(0x1c8)]==_0x73bae8(0x11d)){if(tgBot&&settings[_0x73bae8(0x274)]){if(_0x47c065[_0x73bae8(0x249)])await sendTelegram(settings['telegramChatId'],_0x47c065['botname']+'\x20>\x20'+_0x47c065[_0x73bae8(0x126)]);else await sendTelegram(settings[_0x73bae8(0x274)],_0x73bae8(0x1a8)+_0x5efe84+_0x73bae8(0x1ae)+_0x47c065[_0x73bae8(0x126)]);}}}}async function sendTelegramMsg(_0x160b80,_0x4382cc=_0xb2b351(0x2e1)){const _0x42823c=_0xb2b351;return settings[_0x42823c(0x22d)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings['telegramChatId'],_0x160b80,{'parse_mode':_0x4382cc}),!![]):![];}function getDeviceWithIp(_0x409dd3){const _0x3c0a7b=_0xb2b351;return devices[_0x3c0a7b(0x20a)](_0x1bfb8a=>_0x1bfb8a['ip']===_0x409dd3);}async function temporaryAccess2FA(_0x5743eb,_0x5778cf){const _0x2a8163=_0xb2b351;let _0x52c9ba=new Date(),_0x309b72=![];if(lastIpApproval){if(_0x52c9ba-lastIpApproval<0x1388)_0x309b72=!![];}lastIpApproval=new Date();if(_0x309b72)return;if(tgBot&&settings[_0x2a8163(0x274)]){const _0x30286b=uuidRandom();tmpStorage[_0x30286b]={'uuid':_0x5743eb,'externalip':_0x5778cf};const _0x1305b5=Markup[_0x2a8163(0x1e4)]([Markup['button'][_0x2a8163(0x2b6)](_0x2a8163(0x1b1),'tempaccess_5_'+_0x30286b),Markup[_0x2a8163(0x282)][_0x2a8163(0x2b6)](_0x2a8163(0x25f),_0x2a8163(0x1ed)+_0x30286b),Markup[_0x2a8163(0x282)][_0x2a8163(0x2b6)](_0x2a8163(0x198),_0x2a8163(0x123)+_0x30286b),Markup[_0x2a8163(0x282)][_0x2a8163(0x2b6)](_0x2a8163(0x1fd),'tempaccess_reject_'+_0x30286b)]);await sendTelegram(settings[_0x2a8163(0x274)],_0x2a8163(0x252)+normalizeIP(_0x5778cf)[_0x2a8163(0xf6)]+'\x20?',_0x1305b5),tgBot[_0x2a8163(0x29b)](/tempaccess_(.+)_(.+)/,async _0x22e989=>{const _0x54b96a=_0x2a8163,_0x3983c6=_0x22e989['match'][0x1],_0x558d45=_0x22e989[_0x54b96a(0x269)][0x2],{uuid:_0x531063,externalip:_0x6f8b69}=tmpStorage[_0x558d45];delete tmpStorage[_0x558d45],_0x22e989['editMessageReplyMarkup'](),devices[_0x531063][_0x54b96a(0x287)]={'clientip':_0x6f8b69,'timestamp':new Date()[_0x54b96a(0x2aa)](),'expiry':_0x3983c6},_0x3983c6!=_0x54b96a(0x1fd)?(await sendTelegram(_0x22e989[_0x54b96a(0x285)]['id'],'Access\x20enabled\x20for\x20'+_0x3983c6+_0x54b96a(0x2ab),{'parse_mode':_0x54b96a(0x2e1)}),io['to'](_0x531063)[_0x54b96a(0x1c4)]('status',{'access':{'allow':![],'reason':_0x54b96a(0x1df),'token':null}})):(await sendTelegram(_0x22e989[_0x54b96a(0x285)]['id'],_0x54b96a(0x18b)),io['to'](_0x531063)[_0x54b96a(0x1c4)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x515973,_0x43ac37){const _0x48f018=_0xb2b351;if(tgBot&&settings[_0x48f018(0x274)]){const _0xf0ad2=uuidRandom();tmpStorage[_0xf0ad2]={'uuid':_0x515973,'externalip':_0x43ac37};const _0x3224f0=Markup[_0x48f018(0x1e4)]([Markup[_0x48f018(0x282)][_0x48f018(0x2b6)]('accept',_0x48f018(0x157)+loginExpiry+'_'+_0xf0ad2),Markup[_0x48f018(0x282)][_0x48f018(0x2b6)](_0x48f018(0x1fd),_0x48f018(0x2f1)+_0xf0ad2)]);await sendTelegram(settings[_0x48f018(0x274)],_0x48f018(0x2c3)+normalizeIP(_0x43ac37)['show']+'\x20?',_0x3224f0),tgBot[_0x48f018(0x29b)](/login2fa_(.+)_(.+)/,async _0x447d68=>{const _0x40a619=_0x48f018,_0x38754d=_0x447d68[_0x40a619(0x269)][0x1],_0x1a6db1=_0x447d68[_0x40a619(0x269)][0x2],{uuid:_0x3650d1,externalip:_0x32a010}=tmpStorage[_0x1a6db1];delete tmpStorage[_0x1a6db1],_0x447d68['editMessageReplyMarkup'](),devices[_0x3650d1][_0x40a619(0x186)]={'clientip':_0x32a010,'timestamp':new Date()[_0x40a619(0x2aa)](),'expiry':_0x38754d},_0x38754d!='reject'?(await sendTelegram(_0x447d68[_0x40a619(0x285)]['id'],_0x40a619(0x257),{'parse_mode':'HTML'}),io['to'](_0x3650d1)[_0x40a619(0x1c4)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x447d68[_0x40a619(0x285)]['id'],_0x40a619(0x17b)),io['to'](_0x3650d1)[_0x40a619(0x1c4)]('status',{'access':{'allow':![],'reason':_0x40a619(0x2c4),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x219c71=_0xb2b351;return dbConfig[_0x219c71(0x28e)](_0x219c71(0x1e0))[_0x219c71(0x239)](_0x219c71(0x28f))[_0x219c71(0x11c)]({'status':_0x219c71(0x289)})[_0x219c71(0x1cd)]()||[];}function getDisabledBots(){const _0x3e7534=_0xb2b351;return dbConfig['get'](_0x3e7534(0x1e0))[_0x3e7534(0x239)](_0x3e7534(0x28f))[_0x3e7534(0x11c)]({'status':_0x3e7534(0x2d0)})['value']()||[];}function getBotAttributes(_0x1ec896){const _0x5608b9=_0xb2b351;let _0x463191={};const _0x1b4457=configpath+'bot-'+_0x1ec896+'-config.json',_0x5ee9c8=fs[_0x5608b9(0x2a0)](_0x1b4457);if(_0x5ee9c8){const _0x139e73=fs[_0x5608b9(0x2cc)](_0x1b4457);try{const _0x44af84=JSON[_0x5608b9(0x15e)](_0x139e73),_0x535df3=_0x44af84?_0x44af84[_0x5608b9(0x1f0)][0x0][_0x5608b9(0x143)]:![];_0x463191['mode']=_0x535df3?_0x5608b9(0xf7):_0x5608b9(0x1b3),_0x463191[_0x5608b9(0x24b)]=_0x44af84?_0x44af84['bot'][0x0][_0x5608b9(0x24b)]:'Bot\x20'+_0x1ec896;}catch(_0x424dfd){_0x463191['mode']=_0x5608b9(0x1b3),_0x463191[_0x5608b9(0x24b)]=_0x5608b9(0x1a8)+_0x1ec896;}}else _0x463191['mode']='manual',_0x463191['botname']=_0x5608b9(0x1a8)+_0x1ec896;return _0x463191;}function getBotsWithMode(){const _0x2288b9=_0xb2b351,_0x65ce8=dbConfig['get']('bots')[_0x2288b9(0x239)]('botID')[_0x2288b9(0x1cd)]()||[];return _0x65ce8['forEach'](_0x20643a=>{const _0x6a4bc3=_0x2288b9;let _0x149290=getBotAttributes(_0x20643a[_0x6a4bc3(0x28f)]);_0x20643a[_0x6a4bc3(0x130)]=_0x149290[_0x6a4bc3(0x130)];}),_0x65ce8;}function getBotExchanges(){const _0x4ccd7f=_0xb2b351;let _0x4c9ad0=[];const _0x1a21b9=dbConfig[_0x4ccd7f(0x28e)](_0x4ccd7f(0x1e0))[_0x4ccd7f(0x239)](_0x4ccd7f(0x28f))[_0x4ccd7f(0x1cd)]()||[];_0x1a21b9[_0x4ccd7f(0x268)](_0x259dcc=>{const _0x199128=_0x4ccd7f;if(_0x259dcc[_0x199128(0x1e8)]==_0x199128(0x289)){const _0x5f42d3=configpath+'bot-'+_0x259dcc[_0x199128(0x28f)]+_0x199128(0x168),_0x1edc76=fs[_0x199128(0x2a0)](_0x5f42d3);let _0x373261;if(_0x1edc76){const _0x348fe9=fs[_0x199128(0x2cc)](_0x5f42d3);try{const _0x3944dc=JSON[_0x199128(0x15e)](_0x348fe9);_0x373261=_0x3944dc?_0x3944dc[_0x199128(0x1f0)][0x0][_0x199128(0x187)]:null;}catch(_0x7c813f){}}if(_0x373261)_0x4c9ad0[_0x199128(0x2bf)](_0x373261);}});const _0x25402d=[...new Set(_0x4c9ad0)][_0x4ccd7f(0x169)]();return _0x25402d;}async function initUser(){const _0x15fff1=_0xb2b351;if(!settings[_0x15fff1(0x2c9)]){const _0x2075fe=uuidRandom();mixpanel[_0x15fff1(0x12c)](_0x2075fe),updateSetting(_0x15fff1(0x2c9),_0x2075fe);}}async function initSecure(){const _0x205f02=_0xb2b351;let _0x5126ee=getSecure();if(!_0x5126ee['hasOwnProperty'](_0x205f02(0x2c0))){let _0x2f62e3=await generateKeys();_0x5126ee[_0x205f02(0x2bc)]=_0x2f62e3[_0x205f02(0x2bc)],_0x5126ee[_0x205f02(0x246)]=_0x2f62e3[_0x205f02(0x246)],_0x5126ee[_0x205f02(0x2c0)]=crypto[_0x205f02(0xea)](0x20)[_0x205f02(0x247)]('hex');;storeSecure(_0x5126ee);}}function getSettings(){const _0x5af6d5=_0xb2b351;return dbSettings[_0x5af6d5(0x28e)](_0x5af6d5(0x2ea))['value']()||{};}function getSecure(){const _0x7349e1=_0xb2b351;return dbSecure[_0x7349e1(0x28e)](_0x7349e1(0xfc))[_0x7349e1(0x1cd)]()||{};}function _0x3a9d(){const _0x3519f=['cancelLoading','hashSync','storeConfiguration','min','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Invalid\x20IP\x20address','reason','node','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','logs','lastmsgemitted','show-config','family','backup-full@','login2fa_','isIPv4MappedAddress','Unauthorized\x20attempt\x20to\x20get\x20portfolio','disable','type','(((.+)+)+)+$','onepagemode','parse','/metrics\x20-\x20show\x20bot\x20performance\x0a','exit','stop','/start','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','1000851GUpBcX','padStart','connection','files','-config.json','sort','track','createWriteStream','cloneDeep','kind','#RES#\x20','download','search','/restart\x20-\x20restart\x20bot(s)\x0a','Invalid\x20authentication\x20token\x20(2)','updatebotmanager','version.json','write','getFullYear','bbUsername','max','Password\x20has\x20been\x20reset\x20to:\x20','live','Login\x20rejected','\x1b[0m','remoteAddress','Starting\x20(','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','store-fiat','\x1b[35m','bb/','getDate','bbvNew','deleteHistoryAlerts','telegram2FaApproval','exchange','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','notification','init','Temporary\x20access\x20rejected','names','confirm-message','get-starting-balances','/:bot/support','token','SIGINT','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','toIPv4MappedAddress','place-order','function','env','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','30\x20min','botmanager','address\x20already\x20in\x20use','map','Notifications\x20disabled\x0a','You\x20can\x20use\x20the\x20following\x20commands:\x0a','auth','#RES#','inherit','temporary\x20access\x20not\x20allowed','/on\x20-\x20start\x20bot(s)\x0a','Restore\x20backup\x20file\x20','Notifications\x20types:\x20','clientip','output-002.log','rmSync','Bot\x20','uuid','getMonth','************','logs/','replace','\x20>\x20','all','apiSecret','5\x20min','data','manual','reset-password','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','debug','login','store-settings','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','enable','Backup\x20file\x20uploaded',')\x20\x20\x20|\x20Bot\x20','cancel-loading','CoinMarketCap\x20API\x20key\x20validated','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','BCT','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','emit','Deleted\x20Bot\x20','new-disabled','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegramEvents','stringify','path','generateAsync','DEFLATE','value','6b67f3d61ee94b8f5c80b4affef4c4d9','1000','Node.js\x20v','reinstall-bb','Server','jsonwebtoken','::ffff:127.0.0.1','string','date-fns','copyFileSync','\x1b[31m','static','full','yargs/yargs','telegram','bot.js','keys','reload','bots','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','params','getSeconds','inlineKeyboard','21735ZmYQCL','sign','login\x20not\x20required','status','isValid','settings.','-performance.json','exp','tempaccess_15_','lowdb/adapters/FileSync','5817530pgLBSu','bot','clients','zip/','expiry','binary','port','logged\x20out','backup-full','getStartingBalances','Yes','login\x20required','config_all','Unauthorized\x20attempt\x20to\x20download\x20','reject','No\x20bots\x20running\x20right\x20now','Ok,\x20will\x20send\x20order\x20notifications\x20only','logout','Logged\x20out\x20user\x20...','sha256','catch','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Starting\x20#RED#Balance\x20Bot\x20v','production','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','status\x20code\x20401','express-fileupload','find','startsWith','alerts','readdirSync','login\x20token\x20valid','timestamp','Starting\x20new\x20bot\x20|\x20Bot\x20','invalid\x20credentials','create','telegramUsername','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','https://api.ipify.org?format=json','/output-000.log','set','argv','simple','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','apiKey','SIGTERM','Markdown','statSync','/:bot/performance','access','getUTCHours','lastmsgtelegram','off_','7432716jrgJMg','store','showConfig','disconnect','2FA\x20login\x20required','reply','200mhoOfF','compareSync','Session\x20expired\x20for\x20user\x20...','telegramEnabled','-events.json','bbvReceive','/status\x20-\x20show\x20bot(s)\x20status\x0a','getMinutes','2FA','messages','backup/','12442BCeGUV','name','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','update-bot','sortBy','output-000.log','Unauthorized\x20attempt\x20to\x20delete\x20bot','temp/','loadAsync','new','username','204lrwdjn','yes','\x20to\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','apiPassword','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','privateKey','toString','Unauthorized\x20attempt\x20to\x20update\x20bot','showname','portfolio','botname','backupfile','$1_$2_$3','***','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','toggle-bot-mode','getHours','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','backup-full.zip','http','Unauthorized\x20attempt\x20to\x20get\x20messages','fork','Login\x20accepted','rsa','resetpw_no','code','add-bot','request','server','-results.json','15\x20min','Ok,\x20will\x20send\x20alert\x20notifications\x20only','on_','.zip','slice','delete-bot','Unauthorized\x20attempt\x20to\x20delete\x20alerts','send','decode64','forEach','match','2FA\x20login\x20token\x20generated','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','reinstall_yes','ipc','get-backup-files','number','initclient','build2','backup','privateKeyFromPem','telegramChatId','warning','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Alerts','\x20only\x0a','command','\x20|\x20','Logged\x20in\x20user\x20...','reinstall','size','verify','timeshift','toggleBotMode','ipv6','button','bb-secure.json','success','chat','/names\x20-\x20show\x20bot\x20names\x0a','telegramIpApproval','[ip-address]','enabled','backup-files','latestversion','Invalid\x20authentication\x20token\x20(1)','util','get','botID','telegramToken','Backup\x20file\x20unzipped\x20and\x20stored','3000','kill','from','started','address','bb-config.json','format','\x20(1)','telegrammsg','action','unlinkSync','access\x20timeout','store-headless',',\x20must\x20be\x20a\x204\x20digit\x20number','existsSync','removeAllListeners','handshake','jszip','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','remove','order','2FA\x20required','graphql-request','getTime','\x20minutes','_nsps','stopped','Unauthorized\x20login\x20attempt\x20(timeout)','login\x20token\x20generated','sendMessage','/:bot/history','error','listen','running','writeFileSync','callback','temporary\x20access\x20timeout','hasOwnProperty','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','restore_no_','start','publicKey','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','use','push','secret','\x20|\x20user:\x20...','socket.io','Allow\x20login\x20from\x20IP\x20address\x20','2FA\x20login\x20rejected','bot-',':\x20Bot\x20Mgr\x20>\x20','endsWith','privateKeyToPem','userid','length','Unauthorized\x20attempt\x20to\x20store\x20configuration','readFileSync','launch','ETH','#RES#\x20if\x20running\x20locally\x0a','disabled','No\x20authentication\x20token','/:bot','/download/:type','host','update-bb','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','node-forge','test','getPortfolio','blacklist','whitelist','uuid-random','File\x20uploaded','allow',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Unauthorized\x20attempt\x20to\x20log\x20out','HTML','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','decrypt','Network\x20Interfaces:','uncaughtException','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','|@|','get-logs','settings','encryptedUuid','build','loginRequired','log','5258264dIYFdM','::1','login2fa_reject_','Restoring\x20bot(s)\x20from\x20backup','All','axios','pidRefreshToken','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','off','title','randomBytes','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Restore\x20process\x20aborted','user','publicKeyToPem','bbPassword','NTBA_FIX_319','Telegram\x20error:','message','once','socket','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','show','auto','restart','output-001.log','ipaddr.js','whitelistEnabled','secure','IPv4','/off\x20-\x20stop\x20bot(s)\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','index.html','password','/help\x20-\x20show\x20available\x20commands\x0a','sendPortfolioTelegram','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','connected','exec','isDirectory','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','config_orders','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','\x20(2)','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','update_yes','join','includes','config_alerts','version','All\x20bots\x20running\x20right\x20now','-----------------------------------------------------------------------------------','text','constructor','defaults','Error\x20details:','conn','\x1b[34m','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Restarting\x20Bot\x20','filter','orders','/:bot/configuration','editMessageReplyMarkup','All\x20bots','update','f2aRequired','tempaccess_30_','/enable\x20-\x20enable\x20notifications\x0a','createServer','event',')\x20|\x20Bot\x20','Starting\x20Balance\x20Bot\x20update','Idling\x20(','split','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','alias','User\x20has\x20been\x20validated','pidExpireLogin','Notifications\x20enabled','mode','Failed\x20to\x20download\x20','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','toggle','mkdirSync','<b>Telegram\x20Bot\x20Status:</b>\x0a','sendFile','Token\x20blacklisted','Unauthorized\x20attempt\x20to\x20update\x20settings','post','4952360yhBvsg','assign','=>\x20Go\x20to\x20#CYA#http://','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','headers','marketcapApi','\x1b[33m','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','headless','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','child_process','config','pki','/disable\x20-\x20disable\x20notifications\x0a'];_0x3a9d=function(){return _0x3519f;};return _0x3a9d();}function getBlacklist(){const _0x2c6d9d=_0xb2b351;return dbSecure['get'](_0x2c6d9d(0x2da))[_0x2c6d9d(0x1cd)]()||[];}function broadcastToBots(_0xa1e5da,_0x16d65a){const _0xd13d76=_0xb2b351;config[_0xd13d76(0x268)](_0x5f18b5=>{const _0x4c408a=_0xd13d76;if(_0x5f18b5[_0x4c408a(0x1e8)]==_0x4c408a(0x289)&&_0x5f18b5[_0x4c408a(0x17a)]=='running'||_0x5f18b5[_0x4c408a(0x1e8)]==_0x4c408a(0x23e)&&_0x5f18b5[_0x4c408a(0x17a)]==_0x4c408a(0x2b4)){if(pid[_0x5f18b5[_0x4c408a(0x28f)]])pid[_0x5f18b5[_0x4c408a(0x28f)]][_0x4c408a(0x266)]({[_0xa1e5da]:_0x16d65a});}});}async function storeSettings(_0x57f1e4,_0x5bda24=![]){const _0x3cda1b=_0xb2b351;_0x57f1e4={...settings,..._0x57f1e4};if(_0x5bda24&&_0x57f1e4[_0x3cda1b(0xef)]!='************'&&_0x57f1e4[_0x3cda1b(0xef)]!='***'&&_0x57f1e4[_0x3cda1b(0xef)]!=''){const _0xebb353=decryptRSA(secure[_0x3cda1b(0x246)],_0x57f1e4['bbPassword'])[_0x3cda1b(0x12a)](_0x3cda1b(0x2e8))[0x0],_0x230027=bcrypt[_0x3cda1b(0x14a)](_0xebb353,saltRounds);_0x57f1e4={..._0x57f1e4,'bbPassword':_0x230027};}if(_0x5bda24&&_0x57f1e4['telegramToken']!='************'&&_0x57f1e4[_0x3cda1b(0x290)]!='***'&&_0x57f1e4[_0x3cda1b(0x290)]!=''){const _0x4f479b=decryptRSA(secure[_0x3cda1b(0x246)],_0x57f1e4['telegramToken'])[_0x3cda1b(0x12a)](_0x3cda1b(0x2e8))[0x0];_0x57f1e4={..._0x57f1e4,'telegramToken':_0x4f479b};}if(_0x5bda24&&_0x57f1e4[_0x3cda1b(0x140)]!=_0x3cda1b(0x1ab)&&_0x57f1e4['marketcapApi']!=_0x3cda1b(0x24e)&&_0x57f1e4[_0x3cda1b(0x140)]!=''){const _0x237f80=decryptRSA(secure[_0x3cda1b(0x246)],_0x57f1e4['marketcapApi'])[_0x3cda1b(0x12a)](_0x3cda1b(0x2e8))[0x0];_0x57f1e4={..._0x57f1e4,'marketcapApi':_0x237f80};}const _0x26c812=_0x57f1e4[_0x3cda1b(0x290)]!=_0x3cda1b(0x1ab)&&_0x57f1e4[_0x3cda1b(0x290)]!=settings['telegramToken']||_0x57f1e4[_0x3cda1b(0x213)]!=settings[_0x3cda1b(0x213)],_0x36c74b=_0x57f1e4[_0x3cda1b(0x290)]==''||_0x57f1e4[_0x3cda1b(0x213)]=='',_0x13ae55=_0x57f1e4[_0x3cda1b(0x140)]&&_0x57f1e4[_0x3cda1b(0x140)]!=_0x3cda1b(0x1ab)&&_0x57f1e4[_0x3cda1b(0x140)]!=settings[_0x3cda1b(0x290)];_0x26c812&&(_0x57f1e4[_0x3cda1b(0x274)]=null,_0x57f1e4[_0x3cda1b(0x1c8)]=_0x3cda1b(0x1af));for(const [_0x1bc2e7,_0x491ba2]of Object['entries'](_0x57f1e4)){if(_0x1bc2e7==_0x3cda1b(0x290)&&_0x491ba2==_0x3cda1b(0x1ab)){_0x57f1e4[_0x3cda1b(0x290)]=settings['telegramToken'];continue;};if(_0x1bc2e7==_0x3cda1b(0xef)&&_0x491ba2==_0x3cda1b(0x1ab)){_0x57f1e4['bbPassword']=settings[_0x3cda1b(0xef)];continue;};if(_0x1bc2e7==_0x3cda1b(0x140)&&_0x491ba2==_0x3cda1b(0x1ab)){_0x57f1e4['marketcapApi']=settings[_0x3cda1b(0x140)];continue;};dbSettings[_0x3cda1b(0x217)](_0x3cda1b(0x1ea)+_0x1bc2e7,_0x491ba2)[_0x3cda1b(0x175)]();}settings=_0x57f1e4,io['to'](_0x3cda1b(0x199))[_0x3cda1b(0x1c4)](_0x3cda1b(0x2ea),cleanSettings()),broadcastToBots(_0x3cda1b(0x27f),settings[_0x3cda1b(0x27f)]),broadcastToBots(_0x3cda1b(0x15d),settings['onepagemode']),broadcastToBots('marketcapApi',settings[_0x3cda1b(0x140)]);if(_0x26c812&&!_0x36c74b)initTelegram();if(_0x26c812&&_0x36c74b)disableTelegram();getAllClients()[_0x3cda1b(0x268)](_0x54c31d=>{const _0xdfc702=_0x3cda1b;getSocket(_0x54c31d['id'])[_0xdfc702(0x1c4)](_0xdfc702(0x1e8),{'access':{'allow':![],'reason':_0xdfc702(0x1df),'token':null}});}),_0x13ae55&&(await sleep(0xbb8),testMarketcapApi(_0x57f1e4[_0x3cda1b(0x140)]));}async function testMarketcapApi(_0x4d88aa){const _0x57906f=_0xb2b351,_0x3a29d9=[_0x57906f(0x1c1),_0x57906f(0x2ce)];try{await axios[_0x57906f(0x28e)]('https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest',{'headers':{'X-CMC_PRO_API_KEY':_0x4d88aa},'params':{'symbol':_0x3a29d9[_0x57906f(0x247)]()}});}catch(_0xdd79bd){_0xdd79bd[_0x57906f(0x247)]()['includes'](_0x57906f(0x208))?(io['to'](_0x57906f(0x199))[_0x57906f(0x1c4)]('notification','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x57906f(0x1da)](_0x57906f(0x21a))):(io['to']('botmanager')[_0x57906f(0x1c4)]('notification',_0x57906f(0x132)),logger[_0x57906f(0x1da)](_0x57906f(0x132)),logger[_0x57906f(0x1b6)](_0x57906f(0x117),_0xdd79bd[_0x57906f(0x247)]()+'\x20-\x20'+_0xdd79bd[_0x57906f(0x25a)]));return;}logger[_0x57906f(0x1b6)](_0x57906f(0x1bf));}function updateSetting(_0x1e015b,_0xf80a98){const _0x3f6c7d=_0xb2b351;dbSettings[_0x3f6c7d(0x217)](_0x3f6c7d(0x1ea)+_0x1e015b,_0xf80a98)[_0x3f6c7d(0x175)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x3f6c7d(0x2ea),cleanSettings());}function storeSecure(_0x49e02e){const _0x4de899=_0xb2b351;dbSecure[_0x4de899(0x28e)](_0x4de899(0xfc))[_0x4de899(0x2bf)](_0x49e02e)[_0x4de899(0x175)](),secure=_0x49e02e;}function addBlacklist(_0xf597e1){const _0x1a4f6e=_0xb2b351;cleanBlacklist();let _0x60c38a;devices[_0xf597e1][_0x1a4f6e(0x287)]?_0x60c38a=Math[_0x1a4f6e(0x178)](devices[_0xf597e1]['telegramIpApproval'][_0x1a4f6e(0x1f3)],loginExpiry):_0x60c38a=loginExpiry,dbSecure['get']('blacklist')[_0x1a4f6e(0x2bf)]({'expiry':new Date()[_0x1a4f6e(0x2aa)]()+_0x60c38a*0x3c*0x3e8,'token':devices[_0xf597e1][_0x1a4f6e(0x220)][_0x1a4f6e(0x190)]})[_0x1a4f6e(0x175)](),blacklist=dbSecure[_0x1a4f6e(0x28e)](_0x1a4f6e(0x2da))[_0x1a4f6e(0x1cd)]();}function cleanBlacklist(){const _0x26cd27=_0xb2b351;let _0x5071da=dbSecure[_0x26cd27(0x28e)](_0x26cd27(0x2da))[_0x26cd27(0x16c)]()[_0x26cd27(0x1cd)](),_0x42876e=new Date()['getTime']();_0x5071da[_0x26cd27(0x268)](_0x4b2857=>{const _0x1be9bf=_0x26cd27;_0x4b2857['expiry']<_0x42876e&&dbSecure[_0x1be9bf(0x28e)](_0x1be9bf(0x2da))[_0x1be9bf(0x2a6)]({'expiry':_0x4b2857[_0x1be9bf(0x1f3)]})[_0x1be9bf(0x175)]();});}function initStates(){const _0x1da8f1=_0xb2b351;let _0x2cd7cf=getConfiguration();_0x2cd7cf[_0x1da8f1(0x268)](_0x3c1a5c=>{_0x3c1a5c['live']='stopped';}),storeConfiguration(_0x2cd7cf);}async function generateKeys(){const _0x16d095=_0xb2b351,_0x4a48d5=forge[_0x16d095(0x147)][_0x16d095(0x258)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x52cc35=forge[_0x16d095(0x147)][_0x16d095(0x2c8)](_0x4a48d5[_0x16d095(0x246)]),_0x4c1663=forge[_0x16d095(0x147)][_0x16d095(0xee)](_0x4a48d5['publicKey']);return{'privateKey':_0x52cc35,'publicKey':_0x4c1663};}async function oneTimeMigration(){const _0x934aa4=_0xb2b351;let _0x5c0840=getSettings(),_0x4023b1=![];!_0x5c0840[_0x934aa4(0x2b8)](_0x934aa4(0x222))&&(_0x5c0840[_0x934aa4(0x222)]=0x0,_0x4023b1=!![]);!_0x5c0840[_0x934aa4(0x2b8)](_0x934aa4(0x153))&&(_0x5c0840[_0x934aa4(0x153)]=0x0,_0x4023b1=!![]);!_0x5c0840[_0x934aa4(0x2b8)]('latestversion')&&(_0x5c0840['latestversion']='0.0.0',_0x4023b1=!![]);!_0x5c0840[_0x934aa4(0x2b8)](_0x934aa4(0x15d))&&(_0x5c0840['onepagemode']=![],_0x4023b1=!![]);!_0x5c0840['hasOwnProperty'](_0x934aa4(0x140))&&(_0x5c0840[_0x934aa4(0x140)]='',_0x4023b1=!![]);if(_0x4023b1)storeSettings(_0x5c0840);try{fs[_0x934aa4(0x20d)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x5d5150=>{const _0x175929=_0x934aa4;if(!_0x5d5150[_0x175929(0x107)]()){if(!_0x5d5150[_0x175929(0x236)][_0x175929(0x20b)](_0x175929(0x156)))fs[_0x175929(0x29c)](configbackuppath+_0x5d5150[_0x175929(0x236)]);}else fs[_0x175929(0x1a7)](configbackuppath+_0x5d5150[_0x175929(0x236)],{'recursive':!![]});});}catch(_0x3691da){logger[_0x934aa4(0x1b6)]('Error\x20removing\x20old\x20backup\x20files:',_0x3691da);}}function storeConfiguration(_0x24cd14){const _0x1a5114=_0xb2b351;dbConfig[_0x1a5114(0x28e)](_0x1a5114(0x1e0))[_0x1a5114(0x2a6)]()[_0x1a5114(0x175)](),dbConfig[_0x1a5114(0x28e)]('bots')['push'](..._0x24cd14)[_0x1a5114(0x175)](),config=_0x24cd14;}async function resetPassword(){const _0x3673ae=_0xb2b351;if(tgBot&&settings[_0x3673ae(0x274)]){const _0x52293d=Markup[_0x3673ae(0x1e4)]([Markup[_0x3673ae(0x282)][_0x3673ae(0x2b6)](_0x3673ae(0x241),'resetpw_yes'),Markup[_0x3673ae(0x282)][_0x3673ae(0x2b6)]('no',_0x3673ae(0x259))]);await sendTelegram(settings[_0x3673ae(0x274)],_0x3673ae(0x1c7),_0x52293d),tgBot[_0x3673ae(0x29b)](/resetpw_(.+)/,async _0x38c0b3=>{const _0x497818=_0x3673ae,_0xf258eb=_0x38c0b3[_0x497818(0x269)][0x1];_0x38c0b3[_0x497818(0x11f)]();if(_0xf258eb!='no'){const _0x4e79a9=0xf,_0xb632f1=_0x497818(0x142),_0x5b4f81=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x4e79a9)))[_0x497818(0x19b)](_0x21dbec=>_0xb632f1[_0x21dbec%_0xb632f1['length']])['join'](''),_0x89a358=bcrypt['hashSync'](_0x5b4f81,saltRounds);storeSettings({'bbPassword':_0x89a358}),await sendTelegram(_0x38c0b3[_0x497818(0x285)]['id'],_0x497818(0x179)+_0x5b4f81,{'parse_mode':'HTML'});}else await sendTelegram(_0x38c0b3[_0x497818(0x285)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x585be4,_0x36800b){const _0x59b686=_0xb2b351;io['to'](_0x59b686(0x199))[_0x59b686(0x1c4)](_0x59b686(0x189),_0x59b686(0x108),'success');if(tgBot&&settings[_0x59b686(0x274)]){const _0x46038d=uuidRandom();tmpStorage[_0x46038d]={'path':_0x585be4,'filename':_0x36800b};const _0x1fee48=Markup['inlineKeyboard']([Markup[_0x59b686(0x282)][_0x59b686(0x2b6)](_0x59b686(0x241),'restore_yes_'+_0x46038d),Markup[_0x59b686(0x282)][_0x59b686(0x2b6)]('no',_0x59b686(0x2ba)+_0x46038d)]);await sendTelegram(settings[_0x59b686(0x274)],_0x59b686(0x2d6),_0x1fee48),tgBot['action'](/restore_(.+)_(.+)/,async _0x44ed63=>{const _0x39062a=_0x59b686,_0x3f20ee=_0x44ed63[_0x39062a(0x269)][0x1],_0x5abb09=_0x44ed63['match'][0x2],{path:_0x3c7485,filename:_0x4ef6b5}=tmpStorage[_0x5abb09];delete tmpStorage[_0x5abb09],_0x44ed63[_0x39062a(0x11f)](),_0x3f20ee==_0x39062a(0x241)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x44ed63[_0x39062a(0x285)]['id'],_0x39062a(0x2f2),{'parse_mode':_0x39062a(0x2e1)}),unzipFile(_0x3c7485,_0x4ef6b5)):(logger['debug']('Restore\x20process\x20aborted'),await sendTelegram(_0x44ed63[_0x39062a(0x285)]['id'],_0x39062a(0xec)));});}}function getServerTime(){const _0x48734d=_0xb2b351,_0x1f968c=new Date();return _0x1f968c[_0x48734d(0x176)]()+'/'+(_0x1f968c[_0x48734d(0x1aa)]()+0x1)[_0x48734d(0x247)]()['padStart'](0x2,'0')+'/'+_0x1f968c[_0x48734d(0x183)]()[_0x48734d(0x247)]()[_0x48734d(0x165)](0x2,'0')+'\x20'+_0x1f968c[_0x48734d(0x251)]()['toString']()[_0x48734d(0x165)](0x2,'0')+':'+_0x1f968c[_0x48734d(0x231)]()[_0x48734d(0x247)]()['padStart'](0x2,'0')+':'+_0x1f968c[_0x48734d(0x1e3)]()[_0x48734d(0x247)]()[_0x48734d(0x165)](0x2,'0');}function getTimeStamp(){const _0x49c060=_0xb2b351,_0x1ea101=shiftedTime();return _0x1ea101[_0x49c060(0x176)]()+'/'+(_0x1ea101[_0x49c060(0x1aa)]()+0x1)['toString']()[_0x49c060(0x165)](0x2,'0')+'/'+_0x1ea101[_0x49c060(0x183)]()[_0x49c060(0x247)]()[_0x49c060(0x165)](0x2,'0')+'\x20'+_0x1ea101[_0x49c060(0x251)]()[_0x49c060(0x247)]()[_0x49c060(0x165)](0x2,'0')+':'+_0x1ea101['getMinutes']()[_0x49c060(0x247)]()['padStart'](0x2,'0')+':'+_0x1ea101[_0x49c060(0x1e3)]()['toString']()[_0x49c060(0x165)](0x2,'0');}function getCleanTimeStamp(){const _0x4ca18a=_0xb2b351,_0x101c9d=shiftedTime();return _0x101c9d[_0x4ca18a(0x176)]()+(_0x101c9d[_0x4ca18a(0x1aa)]()+0x1)[_0x4ca18a(0x247)]()['padStart'](0x2,'0')+_0x101c9d['getDate']()[_0x4ca18a(0x247)]()[_0x4ca18a(0x165)](0x2,'0')+'-'+_0x101c9d[_0x4ca18a(0x251)]()['toString']()[_0x4ca18a(0x165)](0x2,'0')+_0x101c9d['getMinutes']()[_0x4ca18a(0x247)]()['padStart'](0x2,'0')+_0x101c9d[_0x4ca18a(0x1e3)]()[_0x4ca18a(0x247)]()[_0x4ca18a(0x165)](0x2,'0');}function shiftedTime(){const _0x53bb4c=_0xb2b351,_0x18ad8e=new Date();let _0xb5be63=_0x18ad8e;if(settings[_0x53bb4c(0x27f)]&&settings[_0x53bb4c(0x27f)]!==0x0)_0xb5be63=fns['add'](_0x18ad8e,{'hours':settings[_0x53bb4c(0x27f)]});return _0xb5be63;}async function startScheduler(){const _0x26670b=_0xb2b351,_0x366bad=new Date()[_0x26670b(0x221)](),_0xa23885=shiftedTime()[_0x26670b(0x251)]();_0xa23885==0x4&&backupConfigFiles(),_0xa23885==0x0&&rotateLogFiles(),_0x366bad%0x6==0x0&&triggerAnalytics(),_0x366bad%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x4b004e){const _0x7b11e7=_0xb2b351;logger['debug'](_0x7b11e7(0x1a3)+_0x4b004e);const _0x4f28eb=getBotsWithMode();_0x4f28eb['length']>0x0?confirmRestore(configbackuppath,_0x4b004e):unzipFile(configbackuppath,_0x4b004e);}async function getBackupFiles(_0x3d1540=null){const _0xd8feb8=_0xb2b351;let _0x5a848b=[],_0x18053e=fs[_0xd8feb8(0x20d)](configbackuppath,{'withFileTypes':!![]});_0x18053e[_0xd8feb8(0x169)]((_0x12cf05,_0x42f740)=>_0x12cf05[_0xd8feb8(0x236)]<_0x42f740['name']?0x1:_0x42f740['name']<_0x12cf05[_0xd8feb8(0x236)]?-0x1:0x0),_0x18053e['forEach'](_0x1adaa4=>{const _0x27aaeb=_0xd8feb8;if(!_0x1adaa4[_0x27aaeb(0x107)]()&&_0x1adaa4['name'][_0x27aaeb(0x20b)](_0x27aaeb(0x156))&&_0x1adaa4[_0x27aaeb(0x236)][_0x27aaeb(0x2c7)](_0x27aaeb(0x262))){const _0x3692fa=formatDate(fs[_0x27aaeb(0x21e)](configbackuppath+_0x1adaa4[_0x27aaeb(0x236)])['mtime']);_0x5a848b[_0x27aaeb(0x2bf)]({'name':_0x1adaa4[_0x27aaeb(0x236)],'mtime':_0x3692fa});}});if(_0x3d1540)io['to'](_0x3d1540)[_0xd8feb8(0x1c4)](_0xd8feb8(0x28a),_0x5a848b);else return _0x5a848b;}async function backupConfigFiles(){const _0x135165=_0xb2b351;await zipFiles(_0x135165(0x1f7));const _0x247eff=getCleanTimeStamp();fs[_0x135165(0x1d7)](zippath+_0x135165(0x253),configbackuppath+(_0x135165(0x156)+_0x247eff+_0x135165(0x262)));let _0x339783=fs[_0x135165(0x20d)](configbackuppath,{'withFileTypes':!![]});_0x339783[_0x135165(0x169)]((_0x3258a8,_0x360cbc)=>_0x3258a8['name']<_0x360cbc[_0x135165(0x236)]?0x1:_0x360cbc[_0x135165(0x236)]<_0x3258a8[_0x135165(0x236)]?-0x1:0x0),_0x339783['length']>maxBackups&&fs[_0x135165(0x29c)](configbackuppath+_0x339783[_0x339783[_0x135165(0x2ca)]-0x1][_0x135165(0x236)]);}function rotateLogFiles(){const _0x70d755=_0xb2b351,_0x1ee529=fs['statSync'](logspath+_0x70d755(0x23a)),_0x4574e7=_0x1ee529[_0x70d755(0x27d)]/0x400;if(_0x4574e7>0x64){let _0x303e3c=fs[_0x70d755(0x20d)](logspath,{'withFileTypes':!![]});_0x303e3c[_0x70d755(0x169)]((_0x45871d,_0x392b58)=>_0x45871d[_0x70d755(0x236)]<_0x392b58[_0x70d755(0x236)]?0x1:_0x392b58[_0x70d755(0x236)]<_0x45871d[_0x70d755(0x236)]?-0x1:0x0),_0x303e3c['forEach'](_0x51d97c=>{const _0x4d6653=_0x70d755;if(_0x51d97c[_0x4d6653(0x236)]==_0x4d6653(0x1a6))fs['copyFileSync'](logspath+_0x51d97c[_0x4d6653(0x236)],logspath+'output-003.log');if(_0x51d97c[_0x4d6653(0x236)]==_0x4d6653(0xf9))fs[_0x4d6653(0x1d7)](logspath+_0x51d97c[_0x4d6653(0x236)],logspath+_0x4d6653(0x1a6));_0x51d97c[_0x4d6653(0x236)]==_0x4d6653(0x23a)&&(fs[_0x4d6653(0x1d7)](logspath+_0x51d97c['name'],logspath+_0x4d6653(0xf9)),fs[_0x4d6653(0x2b5)](logspath+_0x51d97c[_0x4d6653(0x236)],''));});}}async function zipFiles(_0x2f2fef){const _0x3ab763=_0xb2b351;let _0x53be22;if(_0x2f2fef==_0x3ab763(0x152))_0x53be22=logspath;if(_0x2f2fef==_0x3ab763(0x272))_0x53be22=configpath;if(_0x2f2fef==_0x3ab763(0x1f7))_0x53be22=configpath;let _0xee0e0e=fs[_0x3ab763(0x20d)](_0x53be22,{'withFileTypes':!![]});const _0x202f70=new JSZip();_0xee0e0e[_0x3ab763(0x268)](_0x158556=>{const _0x8814fa=_0x3ab763;if(!_0x158556[_0x8814fa(0x107)]()){let _0x28ab36=fs['readFileSync'](_0x53be22+_0x158556['name']);if(_0x2f2fef=='backup'){const _0x5472e1=/^bot-[0-9]{3}-config.json$/,_0x45f364=_0x5472e1[_0x8814fa(0x2d8)](_0x158556[_0x8814fa(0x236)]);if(_0x45f364){const _0x5a8034=JSON[_0x8814fa(0x15e)](_0x28ab36);if(_0x5a8034[_0x8814fa(0x1f0)][0x0]){_0x5a8034['bot'][0x0][_0x8814fa(0x21b)]=_0x8814fa(0x24e),_0x5a8034[_0x8814fa(0x1f0)][0x0][_0x8814fa(0x1b0)]='***';if(_0x5a8034['bot'][0x0][_0x8814fa(0x244)])_0x5a8034[_0x8814fa(0x1f0)][0x0][_0x8814fa(0x244)]=_0x8814fa(0x24e);}_0x28ab36=JSON[_0x8814fa(0x1c9)](_0x5a8034,null,0x2);}if(_0x158556[_0x8814fa(0x236)]=='bb-settings.json'){const _0x45895b=JSON[_0x8814fa(0x15e)](_0x28ab36);if(_0x45895b[_0x8814fa(0x2ea)]['loginRequired'])_0x45895b['settings'][_0x8814fa(0x2ed)]=![];if(_0x45895b['settings'][_0x8814fa(0xef)])_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0xef)]=_0x8814fa(0x24e);if(_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0x290)])_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0x290)]=_0x8814fa(0x24e);if(_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0x274)])_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0x274)]=null;if(_0x45895b[_0x8814fa(0x2ea)][_0x8814fa(0x140)])_0x45895b['settings']['marketcapApi']=_0x8814fa(0x24e);_0x28ab36=JSON[_0x8814fa(0x1c9)](_0x45895b,null,0x2);}if(_0x158556[_0x8814fa(0x236)]!=_0x8814fa(0x283))_0x202f70['file'](_0x158556[_0x8814fa(0x236)],_0x28ab36);}else _0x202f70['file'](_0x158556['name'],_0x28ab36);}});const _0x5995d2=await _0x202f70[_0x3ab763(0x1cb)]({'type':_0x3ab763(0x1d5),'base64':![],'compression':_0x3ab763(0x1cc)});fs[_0x3ab763(0x2b5)](zippath+(_0x2f2fef+'.zip'),_0x5995d2,_0x3ab763(0x1f4));}async function unzipFile(_0x1072d7,_0x40a216){const _0x2b6075=_0xb2b351;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x2b6075(0x268)](_0x39f147=>{const _0x25d98d=_0x2b6075;if(!_0x39f147[_0x25d98d(0x107)]())fs[_0x25d98d(0x1a7)](configpath+_0x39f147[_0x25d98d(0x236)]);});const _0x2de971=fs[_0x2b6075(0x2cc)](_0x1072d7+_0x40a216,_0x2b6075(0x1f4)),_0x3969b5=await JSZip[_0x2b6075(0x23d)](_0x2de971,{'base64':![],'checkCRC32':!![]});for(const _0x3a89b9 of Object[_0x2b6075(0x1de)](_0x3969b5[_0x2b6075(0x167)])){const _0x12b445=_0x3969b5['files'][_0x3a89b9],_0x5eabf5=await _0x12b445['async']('string');fs[_0x2b6075(0x2b5)](configpath+_0x12b445[_0x2b6075(0x236)],_0x5eabf5);}fs[_0x2b6075(0x20d)](temppath,{'withFileTypes':!![]})['forEach'](_0x303510=>{const _0x5e36fd=_0x2b6075;if(!_0x303510[_0x5e36fd(0x107)]())fs[_0x5e36fd(0x1a7)](temppath+_0x303510[_0x5e36fd(0x236)]);}),logger[_0x2b6075(0x1b6)](_0x2b6075(0x291)),process[_0x2b6075(0x266)]({'restore':!![]},_0x4a5166=>{});}async function getPublicIp(){const _0x20c5d4=_0xb2b351;try{const _0x2dae57=await axios[_0x20c5d4(0x28e)](_0x20c5d4(0x215));publicip=_0x2dae57[_0x20c5d4(0x1b2)]['ip'];}catch(_0x28b105){}}async function triggerAnalytics(){const _0x1fb5dc=_0xb2b351;if(!publicip)await getPublicIp();const _0x2b9b2e=getBotsWithMode();let _0x3450cc=0x0;_0x2b9b2e[_0x1fb5dc(0x268)](_0x36f853=>{const _0x5dcf82=_0x1fb5dc;if(_0x36f853[_0x5dcf82(0x1e8)]===_0x5dcf82(0x289))_0x3450cc++;});const _0x41058d=getBotExchanges();mixpanel[_0x1fb5dc(0x16a)](_0x1fb5dc(0x1d2),{'distinct_id':settings[_0x1fb5dc(0x2c9)],'ip':publicip,'version':serverversion,'numbots':_0x2b9b2e[_0x1fb5dc(0x2ca)],'numbotsenabled':_0x3450cc,'exchanges':_0x41058d,'environment':environment});}async function getMessages(){const _0x1ba9df=_0xb2b351,_0x3320bd=_0x1ba9df(0x14d),_0x2f9a33=new GraphQLClient(_0x3320bd),_0x56cd16={'authorization':_0x1ba9df(0x237)},_0x4a3646=serverversion[_0x1ba9df(0x12a)]('.'),_0x3c74d0=_0x4a3646[0x0]+'.'+_0x4a3646[0x1],_0x18b83e=Math[_0x1ba9df(0x14c)](settings[_0x1ba9df(0x222)],settings['lastmsgemitted']),_0x28bdb1={'last':parseInt(_0x18b83e),'bbm':_0x3c74d0},_0x4e81cd=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x10df01;try{_0x10df01=await _0x2f9a33[_0x1ba9df(0x25c)](_0x4e81cd,_0x28bdb1,_0x56cd16);}catch(_0x46c727){}if(_0x10df01&&_0x10df01['messages']){let _0xd32e0c=settings[_0x1ba9df(0x222)];newMessages=[];for(const _0x365f28 of _0x10df01[_0x1ba9df(0x233)]){newMessages[_0x1ba9df(0x2bf)](_0x365f28);let _0x4fca7=![];_0x365f28['bbvNew']&&(updateSetting(_0x1ba9df(0x28b),_0x365f28['bbvNew']),_0x4fca7=isNewerVersion(serverversion,_0x365f28[_0x1ba9df(0x184)])||serverversion==_0x365f28[_0x1ba9df(0x184)]);if(!_0x4fca7&&_0x365f28['number']>_0xd32e0c){if(_0x365f28[_0x1ba9df(0x22f)]==='any'||serverversion[_0x1ba9df(0x20b)](_0x365f28[_0x1ba9df(0x22f)])){let _0x13c644=''+_0x365f28[_0x1ba9df(0xe9)]+'\x0a\x0a'+_0x365f28['message'];const _0x1fe310=await sendTelegramMsg(toTelegramMarkdown(_0x13c644),_0x1ba9df(0x21d));if(_0x1fe310)_0xd32e0c=_0x365f28[_0x1ba9df(0x26f)];}}}updateAvailable=isNewerVersion(settings[_0x1ba9df(0x28b)],serverversion),updateSetting('lastmsgtelegram',_0xd32e0c),emitMessages();}}function emitMessages(){const _0xa0e3c8=_0xb2b351,_0x720987=settings[_0xa0e3c8(0x153)];let _0x56ce7a=[];newMessages[_0xa0e3c8(0x268)](_0x453af0=>{const _0xffd956=_0xa0e3c8;_0x453af0[_0xffd956(0x26f)]>_0x720987&&_0x56ce7a[_0xffd956(0x2bf)](_0x453af0);}),_0x56ce7a['length']>0x0&&getAllClients()[_0xa0e3c8(0x268)](_0x5492f5=>{const _0x3ff9e8=_0xa0e3c8;getSocket(_0x5492f5['id'])[_0x3ff9e8(0x1c4)](_0x3ff9e8(0xf2),_0x56ce7a);});}function confirmMessage(_0x24ccb7){const _0x3d799e=_0xb2b351;updateSetting(_0x3d799e(0x153),Number(_0x24ccb7));}function isNewerVersion(_0x8a97bc,_0x5cfe5c){const _0x4e6bce=_0xb2b351,_0x20b93b=_0x5cfe5c[_0x4e6bce(0x12a)]('.'),_0x13cdda=_0x8a97bc['split']('.');for(var _0x128aac=0x0;_0x128aac<_0x13cdda[_0x4e6bce(0x2ca)];_0x128aac++){const _0x3bf7ee=~~_0x13cdda[_0x128aac],_0x4cb315=~~_0x20b93b[_0x128aac];if(_0x3bf7ee>_0x4cb315)return!![];if(_0x3bf7ee<_0x4cb315)return![];}return![];}function toTelegramMarkdown(_0x4eca5d){const _0x18ec71=_0xb2b351,_0x9d070e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1e527e=/\*{2}(.+?)\*{2}/gim;return _0x4eca5d=_0x4eca5d[_0x18ec71(0x1ad)](_0x9d070e,_0x18ec71(0x24d))['replace'](_0x1e527e,'*$1*'),_0x4eca5d;}async function validateConfigFile(){const _0x5d7a8e=_0xb2b351,_0x2b0819=dbConfig['get'](_0x5d7a8e(0x1e0))[_0x5d7a8e(0x239)]('botID')[_0x5d7a8e(0x1cd)]()||[];if(_0x2b0819[_0x5d7a8e(0x2ca)]==0x0){let _0x3f9c77=0x0,_0x10ebca=[];const _0x563235=/^bot-([0-9]{3})-config.json$/,_0x173b60=fs[_0x5d7a8e(0x20d)](configpath);_0x173b60['forEach'](_0x3df91a=>{const _0x197997=_0x5d7a8e,_0x356379=_0x563235[_0x197997(0x106)](_0x3df91a);if(_0x356379){const _0x1d74d5=_0x356379[0x1];let _0x5d556e=getBotAttributes(_0x1d74d5);_0x10ebca[_0x197997(0x2bf)]({'botID':_0x1d74d5,'botname':_0x5d556e[_0x197997(0x24b)],'status':_0x197997(0x2d0),'live':_0x197997(0x2ad)}),_0x3f9c77++;}}),_0x3f9c77!=0x0&&(dbConfig[_0x5d7a8e(0x28e)](_0x5d7a8e(0x1e0))[_0x5d7a8e(0x13c)](_0x10ebca)[_0x5d7a8e(0x175)](),config=_0x10ebca,restoredConfigFile=_0x3f9c77);}}async function restoreConfigNotify(_0x4e5944){const _0x562512=_0xb2b351;let _0x422fa1;if(restoredConfigFile==0x1)_0x422fa1='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x422fa1='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x4e5944)io['to'](_0x562512(0x199))[_0x562512(0x1c4)](_0x562512(0x189),_0x422fa1);else{logger[_0x562512(0x219)](_0x562512(0x113)),logger[_0x562512(0x219)](_0x422fa1),logger[_0x562512(0x219)]('-----------------------------------------------------------------------------------'),logger[_0x562512(0x219)]('');if(tgBot&&settings[_0x562512(0x274)]&&settings['telegramEvents']!=_0x562512(0x11d))await sendTelegram(settings[_0x562512(0x274)],_0x562512(0x2e6)+_0x422fa1);}}function decryptRSA(_0x1b74e5,_0x313205){const _0x4dd0ba=_0xb2b351,_0x2ad162=forge[_0x4dd0ba(0x147)][_0x4dd0ba(0x273)](_0x1b74e5),_0x41d879=_0x2ad162[_0x4dd0ba(0x2e3)](forge[_0x4dd0ba(0x28d)][_0x4dd0ba(0x267)](_0x313205),'RSA-OAEP',{'md':forge['md'][_0x4dd0ba(0x202)][_0x4dd0ba(0x212)](),'mgf1':{'md':forge['md'][_0x4dd0ba(0x202)][_0x4dd0ba(0x212)]()}});return _0x41d879;}function validateCredentials(_0x440943,_0x48c1c3){const _0x10dc59=_0xb2b351;if(_0x440943[_0x10dc59(0x23f)]==settings[_0x10dc59(0x177)]&&bcrypt[_0x10dc59(0x22b)](_0x440943[_0x10dc59(0x101)],settings[_0x10dc59(0xef)])){if(settings[_0x10dc59(0x122)])return{'allow':![],'reason':_0x10dc59(0x228),'token':null};else{const _0x3201b9=generateLoginToken(_0x48c1c3);return{'allow':!![],'reason':_0x10dc59(0x2af),'token':_0x3201b9};}}else return{'allow':![],'reason':_0x10dc59(0x211),'token':null};}function refreshToken(_0x3fb611){const _0x2b4c04=generateLoginToken(_0x3fb611);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2b4c04};}function validateAccess(_0x3f4b7f,_0x32802d,_0x544b71){const _0x14502c=_0xb2b351,_0x2f9ac2=_0x544b71?_0x544b71:devices[_0x32802d]['ip'];let _0xad848d;const _0x57c2d1=_0x2c6c06=>{const _0x19a050=_0x778f;if(settings['loginRequired']){if(settings[_0x19a050(0x122)]){if(telegram2FaApproved(_0x32802d)){const _0x6c5dea=generateLoginToken(_0x32802d);return{'allow':!![],'reason':_0x19a050(0x26a),'token':_0x6c5dea};}else return{'allow':![],'reason':_0x19a050(0x1fa),'token':null};}else return _0xad848d=validToken(_0x2c6c06,_0x32802d),_0xad848d[_0x19a050(0x2b8)](_0x19a050(0x284))?{'allow':!![],'reason':_0x19a050(0x20e),'token':_0x2c6c06}:{'allow':![],'reason':_0x19a050(0x1fa),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x14502c(0xfb)]){let _0x1a605d=[...settings[_0x14502c(0x2db)],_0x14502c(0x2f0),_0x14502c(0x1d4),'127.0.0.1'];if(_0x1a605d[_0x14502c(0x10f)](_0x2f9ac2))return _0x57c2d1(_0x3f4b7f);else{_0xad848d=validToken(_0x3f4b7f,_0x32802d);if(_0xad848d[_0x14502c(0x2b8)]('success'))return _0x57c2d1(_0x3f4b7f);else{if(telegramIpApproved(_0x32802d)){const _0x430c6a=generateToken(_0x32802d);return _0xad848d=_0x57c2d1(_0x3f4b7f),_0xad848d['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x430c6a}:_0xad848d;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x14502c(0x2a8),'token':null}:{'allow':![],'reason':_0x14502c(0x1a1),'token':null};}}}else return _0x57c2d1(_0x3f4b7f);}function timelyDecrypt(_0x42df3b,_0x5d0611,_0x42cf12='@'){const _0x2cfe8e=_0xb2b351;if(_0x42df3b)try{const _0x4e1824=decryptRSA(secure[_0x2cfe8e(0x246)],_0x42df3b),_0x470d41=_0x4e1824['split'](_0x42cf12)[0x0],_0x583f1=_0x4e1824[_0x2cfe8e(0x12a)](_0x42cf12)[0x1],_0x3de0ff=new Date()[_0x2cfe8e(0x2aa)]();if(_0x5d0611){if(_0x3de0ff-_0x583f1<maxSecretAge*0x3e8)return _0x470d41;else return![];}else return _0x470d41;}catch(_0x569ad1){return![];}else return![];}const validToken=(_0x2178ef,_0x574743)=>{const _0x2145a9=_0xb2b351,_0x39306e=devices[_0x574743]['ip'];if(!_0x2178ef)return{'error':_0x2145a9(0x2d1)};for(let _0x24c386 of blacklist){if(_0x24c386['token']==_0x2178ef)return{'error':_0x2145a9(0x138)};}let _0x4d5699;try{_0x4d5699=jwt[_0x2145a9(0x27e)](_0x2178ef,secure[_0x2145a9(0x2c0)]+_0x574743);}catch{return{'error':_0x2145a9(0x28c)};}if(!_0x4d5699[_0x2145a9(0x2b8)](_0x2145a9(0x1a5))&&!_0x4d5699[_0x2145a9(0x2b8)](_0x2145a9(0x23f))||!_0x4d5699[_0x2145a9(0x2b8)](_0x2145a9(0x1ec)))return{'error':_0x2145a9(0x172)};if(!_0x4d5699[_0x2145a9(0x2b8)]('username')&&_0x4d5699[_0x2145a9(0x2b8)](_0x2145a9(0x1a5))){const {clientip:_0x3feea9}=_0x4d5699;return _0x39306e==_0x3feea9?{'success':_0x2145a9(0x12d)}:{'error':_0x2145a9(0x14e)};}else{if(_0x4d5699['hasOwnProperty'](_0x2145a9(0x23f))&&_0x4d5699[_0x2145a9(0x2b8)]('clientip')){const {username:_0x1308ab,clientip:_0x4127e8}=_0x4d5699;return settings['bbUsername']==_0x1308ab&&_0x39306e==_0x4127e8?{'success':_0x2145a9(0x12d)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x2bec57=>{const _0x26617c=_0xb2b351;if(_0x2bec57){const _0x47b0ae=devices[_0x2bec57]['ip'];return jwt[_0x26617c(0x1e6)]({'username':settings[_0x26617c(0x177)],'clientip':_0x47b0ae},secure['secret']+_0x2bec57,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1fd01b=>{const _0xb36ccd=_0xb2b351;if(_0x1fd01b){const _0x49cf24=devices[_0x1fd01b]['ip'];return jwt[_0xb36ccd(0x1e6)]({'clientip':_0x49cf24},secure[_0xb36ccd(0x2c0)]+_0x1fd01b,{'expiresIn':devices[_0x1fd01b]['telegramIpApproval'][_0xb36ccd(0x1f3)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x577b7c=>{const _0x21b155=_0xb2b351;let _0xb58a3a=![];return devices[_0x577b7c][_0x21b155(0x287)]&&devices[_0x577b7c][_0x21b155(0x287)]['expiry']!=_0x21b155(0x1fd)&&(_0xb58a3a=devices[_0x577b7c][_0x21b155(0x287)][_0x21b155(0x1a5)]==devices[_0x577b7c]['ip']&&new Date()[_0x21b155(0x2aa)]()-devices[_0x577b7c][_0x21b155(0x287)]['timestamp']<devices[_0x577b7c][_0x21b155(0x287)][_0x21b155(0x1f3)]*0x3c*0x3e8),_0xb58a3a;},telegram2FaApproved=_0x2cf310=>{const _0x39c541=_0xb2b351;let _0x2c676d=![];return devices[_0x2cf310][_0x39c541(0x186)]&&devices[_0x2cf310][_0x39c541(0x186)][_0x39c541(0x1f3)]!=_0x39c541(0x1fd)&&(_0x2c676d=devices[_0x2cf310][_0x39c541(0x186)][_0x39c541(0x1a5)]==devices[_0x2cf310]['ip']&&new Date()['getTime']()-devices[_0x2cf310][_0x39c541(0x186)][_0x39c541(0x20f)]<devices[_0x2cf310][_0x39c541(0x186)][_0x39c541(0x1f3)]*0x3c*0x3e8),_0x2c676d;},normalizeIP=_0x2f74f0=>{const _0x832a46=_0xb2b351;let _0x2c5678=null,_0x42ab53=null;if(ipaddr[_0x832a46(0x1e9)](_0x2f74f0)){const _0x32c75f=ipaddr[_0x832a46(0x15e)](_0x2f74f0);_0x32c75f[_0x832a46(0x16d)]()===_0x832a46(0x281)?(_0x32c75f[_0x832a46(0x158)]()&&(_0x2c5678=_0x32c75f['toIPv4Address']()['toString']()),_0x42ab53=_0x32c75f[_0x832a46(0x247)]()):(_0x2c5678=_0x32c75f[_0x832a46(0x247)](),_0x42ab53=_0x32c75f[_0x832a46(0x193)]()[_0x832a46(0x247)]());}return{'show':_0x2c5678?_0x2c5678:_0x42ab53,'store':_0x42ab53};};function formatDate(_0x1f5dee){const _0xeafd80=_0xb2b351;return _0x1f5dee['getFullYear']()+'/'+(_0x1f5dee[_0xeafd80(0x1aa)]()+0x1)[_0xeafd80(0x247)]()['padStart'](0x2,'0')+'/'+_0x1f5dee[_0xeafd80(0x183)]()[_0xeafd80(0x247)]()[_0xeafd80(0x165)](0x2,'0')+'\x20'+_0x1f5dee['getHours']()[_0xeafd80(0x247)]()['padStart'](0x2,'0')+':'+_0x1f5dee['getMinutes']()[_0xeafd80(0x247)]()['padStart'](0x2,'0')+':'+_0x1f5dee[_0xeafd80(0x1e3)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x329817){return new Promise(_0x5f10e5=>setTimeout(_0x5f10e5,_0x329817));}