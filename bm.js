const _0x7bd06e=_0x257d;(function(_0x433ffb,_0x2e4087){const _0x202057=_0x257d,_0x4e6dbe=_0x433ffb();while(!![]){try{const _0x4bb896=parseInt(_0x202057(0x250))/0x1*(parseInt(_0x202057(0x26a))/0x2)+parseInt(_0x202057(0x109))/0x3*(-parseInt(_0x202057(0x28a))/0x4)+parseInt(_0x202057(0xca))/0x5*(parseInt(_0x202057(0x145))/0x6)+-parseInt(_0x202057(0x26c))/0x7+-parseInt(_0x202057(0x231))/0x8*(parseInt(_0x202057(0x141))/0x9)+-parseInt(_0x202057(0x21f))/0xa*(-parseInt(_0x202057(0x23c))/0xb)+-parseInt(_0x202057(0xda))/0xc*(parseInt(_0x202057(0x225))/0xd);if(_0x4bb896===_0x2e4087)break;else _0x4e6dbe['push'](_0x4e6dbe['shift']());}catch(_0x196ea1){_0x4e6dbe['push'](_0x4e6dbe['shift']());}}}(_0x3f08,0xa97d9));const _0x589575=function(){let _0x4cb0db=!![];return function(_0x1ead16,_0x326761){const _0xdf3746=_0x4cb0db?function(){const _0x3427b3=_0x257d;if(_0x326761){const _0x2fd17a=_0x326761[_0x3427b3(0x233)](_0x1ead16,arguments);return _0x326761=null,_0x2fd17a;}}:function(){};return _0x4cb0db=![],_0xdf3746;};}(),_0xe2bd18=_0x589575(this,function(){const _0x2fb4f9=_0x257d;return _0xe2bd18[_0x2fb4f9(0x1f2)]()[_0x2fb4f9(0x279)]('(((.+)+)+)+$')[_0x2fb4f9(0x1f2)]()[_0x2fb4f9(0x156)](_0xe2bd18)[_0x2fb4f9(0x279)](_0x2fb4f9(0x216));});_0xe2bd18();'use strict';process[_0x7bd06e(0x1e4)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x7bd06e(0x146)),fs=require('fs'),fns=require('date-fns'),low=require(_0x7bd06e(0x25c)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x7bd06e(0x10b)),crypto=require(_0x7bd06e(0x265)),Crypt=require('hybrid-crypto-js')[_0x7bd06e(0x1ef)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x7bd06e(0xf1)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x7bd06e(0x1c5))(process[_0x7bd06e(0x1a5)]['slice'](0x2))[_0x7bd06e(0x1a5)],uuidRandom=require(_0x7bd06e(0x1d3)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require('mixpanel'),axios=require(_0x7bd06e(0x245)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x7bd06e(0x266)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x7bd06e(0x199)]||_0x7bd06e(0x20d),pattern=/^[0-9]{2,4}$/;!pattern[_0x7bd06e(0x152)](PORT)&&(console[_0x7bd06e(0x26d)](_0x7bd06e(0x1a2)+PORT+_0x7bd06e(0x154)),process[_0x7bd06e(0x128)](0x1));const HOST=argv[_0x7bd06e(0x130)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x7bd06e(0x27d)];let bbpath='bb/',bbpath2='';const botfile=_0x7bd06e(0x198),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x7bd06e(0x227),environment=require('./'+bbpath2+_0x7bd06e(0x1ca))[_0x7bd06e(0x2a3)]||_0x7bd06e(0x105),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x7bd06e(0x12d)),configpath=userID?bbpath+_0x7bd06e(0x215)+userID+'/':bbpath+_0x7bd06e(0x215),configbackuppath=configpath+_0x7bd06e(0xfb),logspath=userID?bbpath+_0x7bd06e(0x296)+userID+'/':bbpath+_0x7bd06e(0x296),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x7bd06e(0x136),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x7bd06e(0x19e)+userID+'/':bbpath+'temp/';!fs[_0x7bd06e(0x1a4)](configpath)&&fs[_0x7bd06e(0x1cf)](configpath);!fs[_0x7bd06e(0x1a4)](configbackuppath)&&fs[_0x7bd06e(0x1cf)](configbackuppath);!fs[_0x7bd06e(0x1a4)](logspath)&&fs[_0x7bd06e(0x1cf)](logspath);!fs[_0x7bd06e(0x1a4)](zippath)&&fs[_0x7bd06e(0x1cf)](zippath);!fs[_0x7bd06e(0x1a4)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x7bd06e(0x173)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x7bd06e(0x173)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x7bd06e(0x173)]({'secure':{},'blacklist':[]})[_0x7bd06e(0x15c)]();let crypt=new Crypt({'md':_0x7bd06e(0x166),'rsaStandard':_0x7bd06e(0x134)});const saltRounds=0xa,mixpanel=Mixpanel[_0x7bd06e(0x24e)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x7bd06e(0x249)]!=''&&settings[_0x7bd06e(0x1f8)]&&settings[_0x7bd06e(0x1f8)]!='')initTelegram();const parseColor=(_0x469e45,_0x8aa136)=>{const _0x4ac410=_0x7bd06e,_0x45b5f4=/#[A-Z]{3}#/g;if(typeof _0x469e45==_0x4ac410(0x242)){!_0x8aa136?_0x469e45=_0x469e45[_0x4ac410(0x131)](_0x45b5f4,''):(_0x469e45=_0x469e45['replace'](/#BLU#/g,_0x4ac410(0x235)),_0x469e45=_0x469e45[_0x4ac410(0x131)](/#RED#/g,'\x1b[31m'),_0x469e45=_0x469e45[_0x4ac410(0x131)](/#YEL#/g,_0x4ac410(0x1c9)),_0x469e45=_0x469e45[_0x4ac410(0x131)](/#MAG#/g,_0x4ac410(0x254)),_0x469e45=_0x469e45['replace'](/#CYA#/g,_0x4ac410(0x1f3)),_0x469e45=_0x469e45[_0x4ac410(0x131)](/#RES#/g,_0x4ac410(0x1f0)));;}return _0x469e45;},logger={'screen':_0x2d736a=>{const _0x2807fb=_0x7bd06e;console[_0x2807fb(0x26d)](parseColor(_0x2d736a,!![]));},'simple':_0x5435b3=>{const _0x58c853=_0x7bd06e;console['log'](parseColor(_0x5435b3,!![])),loggerfile[_0x58c853(0x15c)](util[_0x58c853(0x292)](parseColor(_0x5435b3,![]))+'\x0a');},'full':async _0x4c53e3=>{const _0x1829c9=_0x7bd06e,_0x53f806=getTimeStamp()+_0x1829c9(0x2a7)+_0x4c53e3;console['log'](parseColor(_0x53f806,!![])),loggerfile['write'](util[_0x1829c9(0x292)](parseColor(_0x53f806,![]))+'\x0a');if(tgBot&&settings[_0x1829c9(0x10a)]&&settings[_0x1829c9(0x171)]!=_0x1829c9(0x10d))await tgBot[_0x1829c9(0x170)](settings['telegramChatId'],_0x1829c9(0x2ab)+parseColor(_0x4c53e3,![]))[_0x1829c9(0x1db)](_0x18f199=>{telegramError(_0x18f199);});},'debug':async(_0x4be347,_0x4a9c23='')=>{const _0x28cb6b=_0x7bd06e,_0x5ed3f0=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x4be347;if(debugging)console[_0x28cb6b(0x26d)](parseColor(_0x5ed3f0,!![]));loggerfile[_0x28cb6b(0x15c)](util[_0x28cb6b(0x292)](parseColor(_0x5ed3f0,![]))+'\x0a');if(_0x4a9c23){if(debugging)console[_0x28cb6b(0x26d)](_0x4a9c23);loggerfile[_0x28cb6b(0x15c)](util[_0x28cb6b(0x292)](_0x4a9c23)+'\x0a');}}};process['on'](_0x7bd06e(0xee),function(_0x164fc1){const _0x38eb9a=_0x7bd06e;logger[_0x38eb9a(0x11f)](_0x164fc1);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x7bd06e(0x1ca))[_0x7bd06e(0xfc)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x7bd06e(0xf0)),app=express(),http=require(_0x7bd06e(0x112))['createServer'](app);app[_0x7bd06e(0x20c)](fileUpload({'useTempFiles':!![]})),app[_0x7bd06e(0x137)](_0x7bd06e(0xd8),async(_0x39ae14,_0x4d7150)=>{const _0x287bea=_0x7bd06e,_0x3c8de3=_0x39ae14[_0x287bea(0x161)][_0x287bea(0x115)],_0x2bdf31=getClientsWithBotID(_0x287bea(0x11d)),_0x154db0=_0x39ae14['headers'][_0x287bea(0x291)],_0x498d40=timelyDecrypt(_0x154db0,![]),_0x450225=_0x2bdf31[_0x287bea(0x1bd)](_0x2e9956=>_0x2e9956[_0x287bea(0x291)]==_0x498d40);if(_0x450225){const _0x24c164=normalizeIP(_0x39ae14[_0x287bea(0x206)][_0x287bea(0xf7)])[_0x287bea(0x24a)],_0x5c55aa=_0x39ae14['headers']['tkn'];if(validateAccess(_0x5c55aa,_0x498d40,_0x24c164)['allow'])_0x3c8de3==_0x287bea(0x18b)&&await backupConfigFiles(),await zipFiles(_0x3c8de3),_0x4d7150[_0x287bea(0x129)](zippath+(_0x3c8de3+_0x287bea(0x28c)),_0xa58d46=>{const _0x379839=_0x287bea;_0xa58d46&&(logger['full'](_0x379839(0x264)+_0x3c8de3),logger[_0x379839(0x11f)](_0xa58d46));});else logger['full'](_0x287bea(0x1d7)+_0x3c8de3+_0x287bea(0x1a9));}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3c8de3+'\x20(2)');}),app[_0x7bd06e(0x17d)](_0x7bd06e(0x187),async(_0x47d2cb,_0x393e24)=>{const _0xe8e9b1=_0x7bd06e,_0x20dab5=getClientsWithBotID(_0xe8e9b1(0x11d)),_0x5e8e77=_0x47d2cb[_0xe8e9b1(0x15b)][_0xe8e9b1(0x291)],_0x510a8f=timelyDecrypt(_0x5e8e77,![]),_0x52765c=_0x20dab5[_0xe8e9b1(0x1bd)](_0x4d7a6f=>_0x4d7a6f[_0xe8e9b1(0x291)]==_0x510a8f);logger[_0xe8e9b1(0x18c)](_0xe8e9b1(0x102));if(_0x52765c){const _0x5c824f=normalizeIP(_0x47d2cb[_0xe8e9b1(0x206)][_0xe8e9b1(0xf7)])[_0xe8e9b1(0x24a)],_0x107dd4=_0x47d2cb[_0xe8e9b1(0x15b)]['tkn'];if(validateAccess(_0x107dd4,_0x510a8f,_0x5c824f)[_0xe8e9b1(0x194)]){if(_0x47d2cb[_0xe8e9b1(0xe5)]){const _0x301994=_0x47d2cb[_0xe8e9b1(0xe5)][_0xe8e9b1(0x1bb)];await _0x301994['mv'](temppath+_0x301994['name']),_0x393e24[_0xe8e9b1(0x261)]({'status':!![],'message':'File\x20uploaded'});const _0x2fdb9b=getBotsWithMode();_0x2fdb9b[_0xe8e9b1(0x143)]>0x0?confirmRestore(temppath,_0x301994[_0xe8e9b1(0x159)]):unzipFile(temppath,_0x301994[_0xe8e9b1(0x159)]);}}else logger[_0xe8e9b1(0xe3)](_0xe8e9b1(0x132));}else logger[_0xe8e9b1(0xe3)](_0xe8e9b1(0x243));}),app[_0x7bd06e(0x20c)](express[_0x7bd06e(0x15d)](path[_0x7bd06e(0x1e0)](__dirname,bbpath2,_0x7bd06e(0xf3)))),app[_0x7bd06e(0x20c)](express[_0x7bd06e(0x15d)](path[_0x7bd06e(0x1e0)](__dirname,bbpath2,'build'))),app[_0x7bd06e(0x137)]('/',function(_0x1acfde,_0x264367){const _0x29018a=_0x7bd06e;_0x264367[_0x29018a(0x139)](path['join'](__dirname,bbpath2,'build2','index.html'));}),app[_0x7bd06e(0x137)](_0x7bd06e(0x14b),function(_0x12f2b0,_0x44ffcc){const _0x1de47e=_0x7bd06e;_0x44ffcc[_0x1de47e(0x139)](path[_0x1de47e(0x1e0)](__dirname,bbpath2,'build',_0x1de47e(0x24b)));}),app['get'](_0x7bd06e(0x1e5),(_0x323412,_0x38f5c9)=>{const _0x49c974=_0x7bd06e;_0x38f5c9[_0x49c974(0x139)](path[_0x49c974(0x1e0)](__dirname,bbpath2,_0x49c974(0x29a),_0x49c974(0x24b)));}),app[_0x7bd06e(0x137)]('/:bot/performance',(_0x58fe3,_0x6819cc)=>{const _0x6f1c1e=_0x7bd06e;_0x6819cc[_0x6f1c1e(0x139)](path['join'](__dirname,bbpath2,_0x6f1c1e(0x29a),'index.html'));}),app[_0x7bd06e(0x137)]('/:bot/coins',(_0x44b42d,_0x3cec7d)=>{const _0x226ae1=_0x7bd06e;_0x3cec7d['sendFile'](path[_0x226ae1(0x1e0)](__dirname,bbpath2,_0x226ae1(0x29a),_0x226ae1(0x24b)));}),app[_0x7bd06e(0x137)](_0x7bd06e(0x1ab),(_0x539cb4,_0x33db43)=>{const _0x5bcbd3=_0x7bd06e;_0x33db43[_0x5bcbd3(0x139)](path[_0x5bcbd3(0x1e0)](__dirname,bbpath2,_0x5bcbd3(0x29a),_0x5bcbd3(0x24b)));}),app[_0x7bd06e(0x137)](_0x7bd06e(0xcc),(_0x538ad2,_0x406f25)=>{const _0x17b568=_0x7bd06e;_0x406f25['sendFile'](path[_0x17b568(0x1e0)](__dirname,bbpath2,_0x17b568(0x29a),_0x17b568(0x24b)));}),app[_0x7bd06e(0x137)]('/:bot/support',(_0x35f04b,_0x1cb9cc)=>{const _0x4543df=_0x7bd06e;_0x1cb9cc['sendFile'](path['join'](__dirname,bbpath2,_0x4543df(0x29a),'index.html'));});if(HOST)http[_0x7bd06e(0x252)](PORT,HOST);else http[_0x7bd06e(0x252)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x16a319=_0x7bd06e;let _0xfcf397=_0x16a319(0xea);const _0xf99199=networkInterfaces(),_0x385552={};for(const _0x5b4e2a of Object[_0x16a319(0x160)](_0xf99199)){for(const _0x17b888 of _0xf99199[_0x5b4e2a]){if((_0x17b888[_0x16a319(0x165)]==_0x16a319(0x176)||_0x17b888[_0x16a319(0x165)]==0x4)&&!_0x17b888[_0x16a319(0x219)]){const _0x52ddbf=ipaddr[_0x16a319(0xfd)](_0x17b888[_0x16a319(0x1c0)])[_0x16a319(0x17e)]();_0x52ddbf!=_0x16a319(0x1dc)&&(!_0x385552[_0x5b4e2a]&&(_0x385552[_0x5b4e2a]=[]),_0x385552[_0x5b4e2a][_0x16a319(0x1b3)](_0x17b888['address']),_0xfcf397=_0x17b888[_0x16a319(0x1c0)]);}}}return{'serverip':_0xfcf397,'netinterfaces':_0x385552};}async function startServer(){const _0x4b68ea=_0x7bd06e,{serverip:_0x255d17,netinterfaces:_0x347e68}=getServerIP();logger['simple'](''),logger[_0x4b68ea(0x11f)](_0x4b68ea(0x2aa)),await logger['full']('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x20'+(environment=='staging'?'(staging)':'')+'\x0a'+(_0x4b68ea(0x2a0)+PORT+_0x4b68ea(0x1dd))+(_0x4b68ea(0x13b)+_0x255d17+':'+PORT+_0x4b68ea(0x167))),logger['simple'](_0x4b68ea(0x2aa));if(config[_0x4b68ea(0x143)]!=0x0)for(const _0x25bc2e of config){if(_0x25bc2e[_0x4b68ea(0x1d9)]=='enabled'||_0x25bc2e[_0x4b68ea(0x1d9)]=='new')await logger[_0x4b68ea(0xe3)](_0x4b68ea(0x299)+_0x25bc2e[_0x4b68ea(0x213)]+_0x4b68ea(0x1fc)+_0x25bc2e['botname']),startBot([_0x25bc2e[_0x4b68ea(0x213)],userID],{'cwd':bbpath},function(_0xb67f58){const _0x2f2c9b=_0x4b68ea;if(_0xb67f58)logger[_0x2f2c9b(0xe3)](_0xb67f58);});else(_0x25bc2e[_0x4b68ea(0x1d9)]==_0x4b68ea(0x1ba)||_0x25bc2e['status']==_0x4b68ea(0x290))&&await logger['full']('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x25bc2e[_0x4b68ea(0x213)]+_0x4b68ea(0x1fc)+_0x25bc2e[_0x4b68ea(0x232)]);}else!newBot&&logger[_0x4b68ea(0x11f)](_0x4b68ea(0x1ac));if(newBot)addBot();logger[_0x4b68ea(0x11f)](_0x4b68ea(0x2aa)),logger[_0x4b68ea(0x11f)](''),await logger[_0x4b68ea(0x18c)]('Node.js\x20v'+nodeversion),await logger[_0x4b68ea(0x18c)](_0x4b68ea(0x288),_0x347e68);}function startSocket(){const _0x51b128=_0x7bd06e;io['on'](_0x51b128(0x15e),_0x15c231=>{const _0x37cbe6=_0x51b128;let _0x111f0b,_0x1a646a,_0x526930,_0x2cd6c5,_0x4f713c;const _0x1e7ca5=_0x15c231[_0x37cbe6(0x1a7)][_0x37cbe6(0x15b)][_0x37cbe6(0x189)];_0x1a646a=_0x1e7ca5[_0x37cbe6(0x114)](/bot[0-9]{3}/);if(_0x1a646a)_0x526930=_0x1a646a[0x0]['match'](/[0-9]{3}/);if(_0x526930)_0x111f0b=_0x526930[0x0];else _0x111f0b='botmanager';const _0x22095e=_0x15c231['handshake']['auth'][_0x37cbe6(0x10c)];if(!_0x22095e)_0x15c231[_0x37cbe6(0xd7)](_0x37cbe6(0x1d9),{'publicKey':secure[_0x37cbe6(0x210)]});else{_0x2cd6c5=timelyDecrypt(_0x22095e,![]);if(!_0x2cd6c5)_0x15c231[_0x37cbe6(0xd7)](_0x37cbe6(0x1d9),{'publicKey':secure[_0x37cbe6(0x210)]});else{_0x4f713c=normalizeIP(_0x15c231['conn'][_0x37cbe6(0xf7)])[_0x37cbe6(0x24a)];if(!devices[_0x2cd6c5])devices[_0x2cd6c5]={'uuid':_0x2cd6c5,'access':{'token':null}};devices[_0x2cd6c5]['ip']=_0x4f713c;const _0x314e43=addClient(_0x15c231['id'],_0x2cd6c5,_0x111f0b);setAccess(_0x314e43),emitMessages(),_0x15c231['on'](_0x37cbe6(0x294),_0x27487c=>{const _0x3d6a43=_0x37cbe6,_0x3a114d=timelyDecrypt(_0x27487c[_0x3d6a43(0x278)]);if(_0x3a114d){_0x27487c={'username':_0x27487c[_0x3d6a43(0x271)],'password':_0x3a114d},devices[_0x2cd6c5][_0x3d6a43(0x29c)]=validateCredentials(_0x27487c,_0x2cd6c5);if(devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0x194)]==![]&&devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0xdd)]=='2FA\x20login\x20required')_0x15c231[_0x3d6a43(0xd7)](_0x3d6a43(0x1d9),{'access':devices[_0x2cd6c5][_0x3d6a43(0x29c)]}),loginAccess2FA(_0x2cd6c5,_0x4f713c);else{if(devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0x194)]==![]&&devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0xdd)]=='invalid\x20credentials')_0x15c231['emit'](_0x3d6a43(0x1d9),{'access':devices[_0x2cd6c5][_0x3d6a43(0x29c)]});else devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0x194)]&&devices[_0x2cd6c5][_0x3d6a43(0x29c)][_0x3d6a43(0xdd)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2cd6c5)[_0x3d6a43(0x275)](_0x308a8e=>{setAccess(_0x308a8e);}),logger[_0x3d6a43(0x18c)](_0x3d6a43(0x1b1)+_0x2cd6c5['slice'](-0x8)),setTokenRefresh(_0x2cd6c5),setSessionTimeout('login',_0x2cd6c5));}}else logger[_0x3d6a43(0xe3)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x15c231['on'](_0x37cbe6(0x1df),()=>{resetPassword();}),_0x15c231['on'](_0x37cbe6(0x196),_0x1b5df2=>{removeClient(_0x15c231['id']);}),_0x111f0b==_0x37cbe6(0x11d)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x56857a){const _0x2105f6=_0x7bd06e;if(_0x56857a!='botmanager'&&config[_0x2105f6(0xdc)]!=''){if(pid[_0x56857a])pid[_0x56857a][_0x2105f6(0x261)]({'function':_0x2105f6(0x1fa),'args':null});}_0x56857a!=_0x2105f6(0x11d)&&broadcastToBots(_0x2105f6(0x247),JSON[_0x2105f6(0x11a)](config));}function reloadBotManager(){const _0x1a7571=_0x7bd06e;getClientsWithBotID('botmanager')[_0x1a7571(0x275)](_0x425cf1=>{const _0x5067ee=_0x1a7571;getSocket(_0x425cf1['id'])[_0x5067ee(0xd7)](_0x5067ee(0x1d9),{'access':{'allow':![],'reason':_0x5067ee(0x133),'token':null}});});}function getSocket(_0x141cd0){const _0x37b2da=_0x7bd06e;return io[_0x37b2da(0x282)][_0x37b2da(0x282)]['get'](_0x141cd0);}function setAccess(_0x223a65){const _0x4bba4d=_0x7bd06e,_0x461366=getSocket(_0x223a65['id']),_0x5673a2=_0x223a65['uuid'],_0x104354=_0x223a65[_0x4bba4d(0x178)];devices[_0x5673a2][_0x4bba4d(0x29c)]=validateAccess(devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0x1d1)],_0x5673a2),logger['debug']('Setting\x20access:\x20'+devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0xdd)]+_0x4bba4d(0x1b5)+_0x223a65['id']['slice'](-0x8)+_0x4bba4d(0x1e6)+_0x5673a2[_0x4bba4d(0x25b)](-0x8)),_0x461366['join'](_0x5673a2);if(devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0x194)]){_0x461366[_0x4bba4d(0x1e0)](_0x104354);if(_0x104354=='botmanager')initializeSocketBotManager(_0x461366);else initializeSocketBot(_0x461366);initClient(_0x104354);}devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0x1d1)]&&devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0xdd)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x4bba4d(0x19a),_0x5673a2),devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0x1d1)]&&devices[_0x5673a2][_0x4bba4d(0x29c)]['reason']==_0x4bba4d(0x168)&&setSessionTimeout(_0x4bba4d(0x294),_0x5673a2),_0x461366['emit'](_0x4bba4d(0x1d9),{'status':_0x223a65['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5673a2][_0x4bba4d(0x29c)],'externalip':devices[_0x5673a2]['ip'],'publicKey':secure[_0x4bba4d(0x210)],'userid':settings[_0x4bba4d(0x157)],'validInstallation':validInstallation}),devices[_0x5673a2][_0x4bba4d(0x29c)][_0x4bba4d(0x194)]==![]&&devices[_0x5673a2]['access'][_0x4bba4d(0xdd)]=='2FA\x20required'&&temporaryAccess2FA(_0x5673a2,devices[_0x5673a2]['ip']);}function setSessionTimeout(_0x486779,_0x557d38){const _0x5d567d=_0x7bd06e;let _0x36bae5;if(_0x486779==_0x5d567d(0x294))_0x36bae5=loginExpiry*0x3c*0x3e8;else _0x36bae5=devices[_0x557d38]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x5d567d(0x14a)]()-devices[_0x557d38][_0x5d567d(0x1f1)]['timestamp']);if(devices[_0x557d38][_0x5d567d(0x1b9)])clearTimeout(devices[_0x557d38]['pidExpireLogin']);devices[_0x557d38]['pidExpireLogin']=setTimeout(()=>{const _0x1ed7d2=_0x5d567d;if(devices[_0x557d38][_0x1ed7d2(0x123)])clearTimeout(devices[_0x557d38]['pidRefreshToken']);removeSocketListeners(_0x557d38),addBlacklist(_0x557d38),devices[_0x557d38][_0x1ed7d2(0x1f1)]=null,devices[_0x557d38][_0x1ed7d2(0x2a9)]=null,devices[_0x557d38][_0x1ed7d2(0x29c)][_0x1ed7d2(0x1d1)]=null,logger[_0x1ed7d2(0x18c)](_0x1ed7d2(0x259)+_0x557d38[_0x1ed7d2(0x25b)](-0x8)),devices[_0x557d38][_0x1ed7d2(0x29c)]=validateAccess(devices[_0x557d38]['access'][_0x1ed7d2(0x1d1)],_0x557d38),!(devices[_0x557d38][_0x1ed7d2(0x29c)][_0x1ed7d2(0x194)]&&devices[_0x557d38][_0x1ed7d2(0x29c)][_0x1ed7d2(0xdd)]=='login\x20not\x20required')&&(_0x486779=='login'?io['to'](_0x557d38)['emit'](_0x1ed7d2(0x1d9),{'access':{'allow':![],'reason':_0x1ed7d2(0x184),'token':null}}):io['to'](_0x557d38)[_0x1ed7d2(0xd7)](_0x1ed7d2(0x1d9),{'access':{'allow':![],'reason':_0x1ed7d2(0x22b),'token':null}})),devices[_0x557d38][_0x1ed7d2(0x29c)][_0x1ed7d2(0x1d1)]=null;},_0x36bae5);}function setTokenRefresh(_0x4457bd){const _0x5caaf3=_0x7bd06e;if(devices[_0x4457bd][_0x5caaf3(0x123)])clearTimeout(devices[_0x4457bd]['pidRefreshToken']);devices[_0x4457bd]['pidRefreshToken']=setTimeout(()=>{const _0x64ed9e=_0x5caaf3;getClientsWithUuid(_0x4457bd)[_0x64ed9e(0x143)]!=0x0?(devices[_0x4457bd][_0x64ed9e(0x29c)]=refreshToken(_0x4457bd),io['to'](_0x4457bd)[_0x64ed9e(0xd7)](_0x64ed9e(0x1d9),{'status':_0x64ed9e(0x1c2),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4457bd]['access'],'externalip':devices[_0x4457bd]['ip'],'publicKey':secure[_0x64ed9e(0x210)],'validInstallation':validInstallation}),setTokenRefresh(_0x4457bd)):clearTimeout(devices[_0x4457bd][_0x64ed9e(0x123)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x221ca7){const _0x57a131=_0x7bd06e,_0x5c85b3=getClient(_0x221ca7['id'])[_0x57a131(0x291)];_0x221ca7[_0x57a131(0xd7)](_0x57a131(0x247),config),_0x221ca7[_0x57a131(0xd7)](_0x57a131(0x135),cleanSettings()),_0x221ca7['on'](_0x57a131(0x1b6),_0x3152e8=>{const _0x2982c3=_0x57a131;if(validateAccess(_0x3152e8,_0x5c85b3)['allow'])addBot();else logger[_0x2982c3(0xe3)](_0x2982c3(0x11e));}),_0x221ca7['on'](_0x57a131(0x241),(_0x455231,_0x166a7c)=>{const _0x18ff31=_0x57a131;if(validateAccess(_0x166a7c,_0x5c85b3)['allow'])toggleBot(_0x455231[_0x18ff31(0x213)],_0x455231[_0x18ff31(0x1d9)],_0x455231[_0x18ff31(0x27a)]);else logger[_0x18ff31(0xe3)](_0x18ff31(0x1ed));}),_0x221ca7['on'](_0x57a131(0x274),(_0x5bd4df,_0x5859b0)=>{const _0x2b71a3=_0x57a131;if(validateAccess(_0x5859b0,_0x5c85b3)[_0x2b71a3(0x194)])toggleBotMode(_0x5bd4df);else logger[_0x2b71a3(0xe3)](_0x2b71a3(0x1ed));}),_0x221ca7['on'](_0x57a131(0x204),(_0x3af938,_0xa83fdd)=>{const _0xc3525=_0x57a131;if(validateAccess(_0xa83fdd,_0x5c85b3)['allow'])deleteBot(_0x3af938);else logger[_0xc3525(0xe3)](_0xc3525(0x17c));}),_0x221ca7['on'](_0x57a131(0x144),(_0x91f79d,_0x133c78)=>{const _0x520a7a=_0x57a131;if(validateAccess(_0x133c78,_0x5c85b3)[_0x520a7a(0x194)])storeSettings(_0x91f79d,!![]);else logger[_0x520a7a(0xe3)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x221ca7['on'](_0x57a131(0x29e),_0x520053=>{const _0x42c9af=_0x57a131;if(validateAccess(_0x520053,_0x5c85b3)[_0x42c9af(0x194)])updateBB(_0x42c9af(0x236));else logger[_0x42c9af(0xe3)](_0x42c9af(0x172));}),_0x221ca7['on'](_0x57a131(0x218),_0x1fc7ab=>{const _0x43bf59=_0x57a131;if(validateAccess(_0x1fc7ab,_0x5c85b3)['allow'])updateBB('reinstall');else logger[_0x43bf59(0xe3)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x221ca7['on'](_0x57a131(0x118),_0x5ae243=>{const _0x1df04f=_0x57a131;if(validateAccess(_0x5ae243,_0x5c85b3)[_0x1df04f(0x194)]){const _0x23e9fd=getClient(_0x221ca7['id']);if(_0x23e9fd)getBackupFiles(_0x23e9fd[_0x1df04f(0x291)]);else logger[_0x1df04f(0xe3)](_0x1df04f(0x28b));}else logger['full']('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x221ca7['on'](_0x57a131(0xf2),(_0x5f5c8f,_0x1e0a73)=>{const _0x3c0370=_0x57a131;if(validateAccess(_0x1e0a73,_0x5c85b3)[_0x3c0370(0x194)])restoreBackupFile(_0x5f5c8f);else logger[_0x3c0370(0xe3)](_0x3c0370(0x203));}),_0x221ca7['on'](_0x57a131(0xd9),_0x4a0d97=>{const _0x19a68=_0x57a131;if(validateAccess(_0x4a0d97,_0x5c85b3)[_0x19a68(0x194)])getMessages();else logger['full'](_0x19a68(0xe0));}),_0x221ca7['on'](_0x57a131(0xe4),(_0x17f720,_0xe75c70)=>{const _0x313bb4=_0x57a131;if(validateAccess(_0xe75c70,_0x5c85b3)[_0x313bb4(0x194)])confirmMessage(_0x17f720);else logger[_0x313bb4(0xe3)](_0x313bb4(0x21d));}),_0x221ca7['on'](_0x57a131(0x224),_0x4cf06b=>{const _0x558084=_0x57a131;if(validateAccess(_0x4cf06b,_0x5c85b3)[_0x558084(0x194)]){if(devices[_0x5c85b3][_0x558084(0x123)])clearTimeout(devices[_0x5c85b3][_0x558084(0x123)]);if(devices[_0x5c85b3]['pidExpireLogin'])clearTimeout(devices[_0x5c85b3][_0x558084(0x1b9)]);removeSocketListeners(getClient(_0x221ca7['id'])['uuid']),addBlacklist(_0x5c85b3),devices[_0x5c85b3][_0x558084(0x1f1)]=null,devices[_0x5c85b3][_0x558084(0x2a9)]=null,devices[_0x5c85b3]['access'][_0x558084(0x1d1)]=null,logger[_0x558084(0x18c)](_0x558084(0x1ae)+_0x5c85b3[_0x558084(0x25b)](-0x8)),io['to'](getClient(_0x221ca7['id'])[_0x558084(0x291)])[_0x558084(0xd7)](_0x558084(0x1d9),{'access':{'allow':![],'reason':_0x558084(0xeb),'token':null}});}else logger[_0x558084(0xe3)](_0x558084(0x1d8));});}function initializeSocketBot(_0x41d50c){const _0x220de7=_0x7bd06e,_0x364b4e=getClient(_0x41d50c['id'])[_0x220de7(0x178)],_0x20b6f9=getClient(_0x41d50c['id'])[_0x220de7(0x291)];_0x41d50c['on'](_0x220de7(0x207),(_0x3e3788,_0x19cee2)=>{const _0x36ad58=_0x220de7;if(validateAccess(_0x19cee2,_0x20b6f9)[_0x36ad58(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x36ad58(0x261)]({'function':_0x36ad58(0x244),'args':_0x3e3788});}else logger['full'](_0x36ad58(0x169));}),_0x41d50c['on']('delete-alerts',(_0x27f958,_0x1025e4)=>{const _0xc46c6=_0x220de7;if(validateAccess(_0x1025e4,_0x20b6f9)[_0xc46c6(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0xc46c6(0x261)]({'function':_0xc46c6(0x13f),'args':_0x27f958});}else logger[_0xc46c6(0xe3)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x41d50c['on'](_0x220de7(0x181),(_0x2a81f1,_0x4c4466)=>{const _0x3892c3=_0x220de7;if(validateAccess(_0x4c4466,_0x20b6f9)['allow']){if(pid[_0x364b4e])pid[_0x364b4e]['send']({'function':_0x3892c3(0x175),'args':_0x2a81f1});}else logger['full'](_0x3892c3(0x2a4));}),_0x41d50c['on'](_0x220de7(0x285),(_0x14899c,_0x5672f4)=>{const _0x20aa5b=_0x220de7;if(validateAccess(_0x5672f4,_0x20b6f9)[_0x20aa5b(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x20aa5b(0x261)]({'function':_0x20aa5b(0x205),'args':_0x14899c});}else logger['full'](_0x20aa5b(0x1cb));}),_0x41d50c['on'](_0x220de7(0x177),(_0x342029,_0x30a67c)=>{const _0x43d91c=_0x220de7;if(validateAccess(_0x30a67c,_0x20b6f9)[_0x43d91c(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x43d91c(0x261)]({'function':_0x43d91c(0xfa),'args':_0x342029});}else logger[_0x43d91c(0xe3)](_0x43d91c(0x190));}),_0x41d50c['on'](_0x220de7(0xed),(_0x75ec4b,_0x1c951d)=>{const _0x3a4fbe=_0x220de7;if(validateAccess(_0x1c951d,_0x20b6f9)[_0x3a4fbe(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x3a4fbe(0x261)]({'function':_0x3a4fbe(0x1c6),'args':_0x75ec4b});}else logger[_0x3a4fbe(0xe3)](_0x3a4fbe(0x151));}),_0x41d50c['on'](_0x220de7(0x22d),_0x4508e4=>{const _0x4599bf=_0x220de7;if(validateAccess(_0x4508e4,_0x20b6f9)[_0x4599bf(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x4599bf(0x261)]({'function':_0x4599bf(0x246),'args':null});}else logger[_0x4599bf(0xe3)](_0x4599bf(0x19d));}),_0x41d50c['on']('get-starting-balances',_0x4fbb7f=>{const _0x467dcf=_0x220de7;if(validateAccess(_0x4fbb7f,_0x20b6f9)[_0x467dcf(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e]['send']({'function':'getStartingBalances','args':null});}else logger[_0x467dcf(0xe3)](_0x467dcf(0xf9));}),_0x41d50c['on'](_0x220de7(0x120),(_0x1642a1,_0x5e0fa4)=>{const _0x18e2a0=_0x220de7;if(validateAccess(_0x5e0fa4,_0x20b6f9)[_0x18e2a0(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x18e2a0(0x261)]({'function':_0x18e2a0(0x103),'args':_0x1642a1});}else logger[_0x18e2a0(0xe3)](_0x18e2a0(0x1a6));}),_0x41d50c['on'](_0x220de7(0x260),_0x255abf=>{const _0x317a87=_0x220de7;if(validateAccess(_0x255abf,_0x20b6f9)[_0x317a87(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x317a87(0x261)]({'function':_0x317a87(0xd6),'args':null});}else logger[_0x317a87(0xe3)](_0x317a87(0x222));}),_0x41d50c['on'](_0x220de7(0x121),_0x4bde76=>{const _0x4d5224=_0x220de7;if(validateAccess(_0x4bde76,_0x20b6f9)[_0x4d5224(0x194)]){if(pid[_0x364b4e])pid[_0x364b4e][_0x4d5224(0x261)]({'function':_0x4d5224(0x24d),'args':null});}else logger[_0x4d5224(0xe3)](_0x4d5224(0xf8));}),_0x41d50c['on']('update-bb',_0x472664=>{const _0x1a1034=_0x220de7;if(validateAccess(_0x472664,_0x20b6f9)[_0x1a1034(0x194)])updateBB(_0x1a1034(0x236));else logger[_0x1a1034(0xe3)](_0x1a1034(0x172));}),_0x41d50c['on']('get-messages',_0x558da6=>{const _0x2bc259=_0x220de7;if(validateAccess(_0x558da6,_0x20b6f9)['allow'])getMessages();else logger[_0x2bc259(0xe3)](_0x2bc259(0xe0));}),_0x41d50c['on'](_0x220de7(0xe4),(_0x328812,_0x1f6df9)=>{const _0x262573=_0x220de7;if(validateAccess(_0x1f6df9,_0x20b6f9)[_0x262573(0x194)])confirmMessage(_0x328812);else logger[_0x262573(0xe3)](_0x262573(0x21d));}),_0x41d50c['on'](_0x220de7(0x224),_0x466ae5=>{const _0x1296b0=_0x220de7;if(validateAccess(_0x466ae5,_0x20b6f9)[_0x1296b0(0x194)]){if(devices[_0x20b6f9][_0x1296b0(0x123)])clearTimeout(devices[_0x20b6f9][_0x1296b0(0x123)]);if(devices[_0x20b6f9][_0x1296b0(0x1b9)])clearTimeout(devices[_0x20b6f9][_0x1296b0(0x1b9)]);removeSocketListeners(getClient(_0x41d50c['id'])['uuid']),addBlacklist(_0x20b6f9),devices[_0x20b6f9]['telegramIpApproval']=null,devices[_0x20b6f9][_0x1296b0(0x2a9)]=null,devices[_0x20b6f9][_0x1296b0(0x29c)]['token']=null,logger[_0x1296b0(0x18c)](_0x1296b0(0x1ae)+_0x20b6f9[_0x1296b0(0x25b)](-0x8)),io['to'](getClient(_0x41d50c['id'])[_0x1296b0(0x291)])[_0x1296b0(0xd7)](_0x1296b0(0x1d9),{'access':{'allow':![],'reason':_0x1296b0(0xeb),'token':null}});}else logger['full'](_0x1296b0(0x1d8));});}function removeSocketListeners(_0x1da08e){const _0x29a075=_0x7bd06e;getClientsWithUuid(_0x1da08e)[_0x29a075(0x275)](_0x2ae305=>{const _0x28b8f7=_0x29a075;getSocket(_0x2ae305['id'])[_0x28b8f7(0x1aa)]();});}function cleanSettings(){const _0x1c6296=_0x7bd06e;let _0x10eed4=settings;return settings[_0x1c6296(0x249)]&&settings[_0x1c6296(0x249)]!=''&&(_0x10eed4={..._0x10eed4,'telegramToken':_0x1c6296(0x12c)}),settings[_0x1c6296(0x22a)]&&settings[_0x1c6296(0x22a)]!=''&&(_0x10eed4={..._0x10eed4,'bbPassword':'************'}),(settings[_0x1c6296(0x22a)]&&settings[_0x1c6296(0x22a)]=='***'||settings[_0x1c6296(0x249)]&&settings[_0x1c6296(0x249)]==_0x1c6296(0x1c4))&&(_0x10eed4={..._0x10eed4,'restored':{'password':settings[_0x1c6296(0x22a)]=='***','telegram':settings[_0x1c6296(0x249)]==_0x1c6296(0x1c4)}}),_0x10eed4;}async function updateBB(_0x3f28fa){const _0x1387af=_0x7bd06e;await backupConfigFiles(),installingUpdate=!![],config[_0x1387af(0x275)](_0xb4e21b=>{restartBot(_0xb4e21b['botID']);});if(_0x3f28fa=='update')process[_0x1387af(0x261)]({'update':!![],'environment':environment},_0xaecf92=>{});else _0x3f28fa==_0x1387af(0x253)&&process[_0x1387af(0x261)]({'reinstall':!![],'environment':environment},_0x51287b=>{});}function startBot(_0x32c91a,_0x4474b9,_0x23c147){const _0x2911f6=_0x7bd06e;if(debugging)_0x32c91a['push']('-d');let _0x401fcd=![];const _0x5e063e=_0x32c91a[0x0];_0x4474b9={..._0x4474b9,'stdio':['inherit',_0x2911f6(0x1d2),_0x2911f6(0x1d2),_0x2911f6(0x239)]},pid[_0x5e063e]=childProcess[_0x2911f6(0x258)](botfile,_0x32c91a,_0x4474b9),pid[_0x5e063e]['on']('message',_0x18e09a=>{const _0x43c4da=_0x2911f6;switch(Object[_0x43c4da(0x160)](_0x18e09a)[0x0]){case'botname':updateBotName(_0x5e063e,_0x18e09a[_0x43c4da(0x232)]);break;case _0x43c4da(0x163):updateBotManager();break;case'status':updateStatus(_0x5e063e,_0x18e09a[_0x43c4da(0x1d9)]);break;case _0x43c4da(0x27a):updateLive(_0x5e063e,_0x18e09a[_0x43c4da(0x27a)]);break;case _0x43c4da(0x277):updateLive(_0x5e063e,_0x18e09a[_0x43c4da(0x277)]),io['to'](_0x5e063e)['emit']('status',{'access':{'allow':![],'reason':_0x43c4da(0x133),'token':null}});break;case'stop':_0x18e09a[_0x43c4da(0x17b)]=='restart'&&restartBot(_0x5e063e);_0x18e09a[_0x43c4da(0x17b)]==_0x43c4da(0x25d)&&toggleBot(_0x5e063e,_0x43c4da(0x1ba),_0x43c4da(0x228));break;case'telegram':sendTelegram(_0x5e063e,_0x18e09a['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x18e09a[_0x43c4da(0x1fb)]);break;case _0x43c4da(0x21c):io['to'](_0x5e063e)[_0x43c4da(0xd7)](_0x18e09a['function'],_0x18e09a[_0x43c4da(0x23f)]);break;}}),pid[_0x5e063e]['on']('error',function(_0x5c6340){if(_0x401fcd)return;_0x401fcd=!![],_0x23c147(_0x5c6340);}),pid[_0x5e063e]['on']('exit',async function(_0x231795){const _0x19639f=_0x2911f6;if(installingUpdate)return;if(_0x401fcd)return;_0x401fcd=!![],_0x23c147(null);const _0x2737aa=dbConfig['get'](_0x19639f(0x247))[_0x19639f(0x1bd)]({'botID':_0x5e063e})['value']();_0x2737aa&&(_0x2737aa[_0x19639f(0x1d9)]=='enabled'||_0x2737aa['status']==_0x19639f(0x1a0))&&(await sleep(0x3e8),updateLive(_0x5e063e,_0x19639f(0x228)),logger[_0x19639f(0xe3)](_0x19639f(0x1e9)+_0x5e063e),startBot([_0x5e063e,userID],{'cwd':bbpath},function(_0x59a628){if(_0x59a628)logger['full'](_0x59a628);}));});}function stopBot(_0x1144a0){const _0x70e167=_0x7bd06e;getClientsWithBotID(_0x1144a0)[_0x70e167(0x275)](_0x71389d=>{getSocket(_0x71389d['id'])['disconnect'](!![]),removeClient(_0x71389d['id']);}),pid[_0x1144a0]&&(pid[_0x1144a0][_0x70e167(0x25d)](),pid[_0x1144a0]=null);}function restartBot(_0x55d964){const _0x3c3618=_0x7bd06e;if(pid[_0x55d964])pid[_0x55d964][_0x3c3618(0x25d)]();}function addBot(){const _0x5cb968=_0x7bd06e;let _0xad611;for(let _0xd83424=0x1;_0xd83424<0x3e9;_0xd83424++){_0xad611=_0xd83424['toString']()[_0x5cb968(0x1cd)](0x3,'0');let _0x17e7a1=config[_0x5cb968(0x1bd)](_0x461175=>_0x461175[_0x5cb968(0x213)]==_0xad611);if(!_0x17e7a1)break;}if(_0xad611===_0x5cb968(0xe6)){logger[_0x5cb968(0xe3)](_0x5cb968(0x22f));return;}logger[_0x5cb968(0xe3)](_0x5cb968(0xf4)+_0xad611),dbConfig[_0x5cb968(0x137)]('bots')[_0x5cb968(0x1b3)]({'botID':_0xad611,'botname':_0x5cb968(0x24c)+_0xad611,'status':_0x5cb968(0x1a0),'live':''})[_0x5cb968(0x15c)](),startBot([_0xad611,userID],{'cwd':bbpath},function(_0x41cdc6){const _0x498fe2=_0x5cb968;if(_0x41cdc6)logger[_0x498fe2(0xe3)](_0x41cdc6);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x5cb968(0x247),config),broadcastToBots('bots',JSON[_0x5cb968(0x11a)](config));}function deleteBot(_0x56f5fa){const _0x443f49=_0x7bd06e;getClientsWithBotID(_0x56f5fa)[_0x443f49(0x275)](_0x89a186=>{const _0xd9ae55=_0x443f49;getSocket(_0x89a186['id'])[_0xd9ae55(0x196)](!![]),removeClient(_0x89a186['id']);}),dbConfig[_0x443f49(0x137)]('bots')[_0x443f49(0x1f4)]({'botID':_0x56f5fa})[_0x443f49(0x15c)](),logger[_0x443f49(0xe3)](_0x443f49(0x209)+_0x56f5fa),stopBot(_0x56f5fa);try{if(fs[_0x443f49(0x1a4)](path[_0x443f49(0x1e0)](configpath,_0x443f49(0x12b)+_0x56f5fa+_0x443f49(0x16c))))fs['unlinkSync'](path[_0x443f49(0x1e0)](configpath,_0x443f49(0x12b)+_0x56f5fa+_0x443f49(0x16c)));if(fs[_0x443f49(0x1a4)](path['join'](configpath,'bot-'+_0x56f5fa+'-events.json')))fs[_0x443f49(0x297)](path[_0x443f49(0x1e0)](configpath,'bot-'+_0x56f5fa+'-events.json'));if(fs['existsSync'](path['join'](configpath,'bot-'+_0x56f5fa+_0x443f49(0x262))))fs[_0x443f49(0x297)](path[_0x443f49(0x1e0)](configpath,_0x443f49(0x12b)+_0x56f5fa+'-performance.json'));if(fs[_0x443f49(0x1a4)](path['join'](configpath,_0x443f49(0x12b)+_0x56f5fa+_0x443f49(0x1ec))))fs['unlinkSync'](path[_0x443f49(0x1e0)](configpath,_0x443f49(0x12b)+_0x56f5fa+_0x443f49(0x1ec)));}catch(_0x28384f){if(_0x28384f)logger[_0x443f49(0xe3)](_0x443f49(0xe2),_0x28384f);}config=getConfiguration(),io['to'](_0x443f49(0x11d))[_0x443f49(0xd7)](_0x443f49(0x247),config),broadcastToBots(_0x443f49(0x247),JSON[_0x443f49(0x11a)](config));}function _0x257d(_0x5e29bf,_0x33b8bb){const _0x4ff7a5=_0x3f08();return _0x257d=function(_0xe2bd18,_0x589575){_0xe2bd18=_0xe2bd18-0xc9;let _0x3f0836=_0x4ff7a5[_0xe2bd18];return _0x3f0836;},_0x257d(_0x5e29bf,_0x33b8bb);}function toggleBot(_0x9e19a2,_0x5f55e4,_0x12ec4a){const _0x32d775=_0x7bd06e;dbConfig[_0x32d775(0x137)](_0x32d775(0x247))['find']({'botID':_0x9e19a2})[_0x32d775(0x13d)]({'status':_0x5f55e4})['assign']({'live':_0x12ec4a})[_0x32d775(0x15c)]();if(_0x5f55e4=='enabled'||_0x5f55e4==_0x32d775(0x1a0))logger[_0x32d775(0xe3)](_0x32d775(0x23b)+_0x9e19a2),startBot([_0x9e19a2,userID],{'cwd':bbpath},function(_0x427c50){if(_0x427c50)logger['full'](_0x427c50);});else(_0x5f55e4==_0x32d775(0x1ba)||_0x5f55e4==_0x32d775(0x290))&&(logger['full'](_0x32d775(0x22e)+_0x9e19a2),stopBot(_0x9e19a2));config=getConfiguration(),io['to'](_0x32d775(0x11d))[_0x32d775(0xd7)]('bots',config),broadcastToBots('bots',JSON[_0x32d775(0x11a)](config));}function toggleStatus(_0x5a5ba0){const _0x555d1d=_0x7bd06e;let _0x1a5c66=dbConfig[_0x555d1d(0x137)](_0x555d1d(0x247))[_0x555d1d(0x1bd)]({'botID':_0x5a5ba0})[_0x555d1d(0x107)](),_0x3b273a;if(_0x1a5c66['status']===_0x555d1d(0x20a))_0x3b273a=_0x555d1d(0x1ba);else{if(_0x1a5c66[_0x555d1d(0x1d9)]===_0x555d1d(0x1a0))_0x3b273a=_0x555d1d(0x290);else{if(_0x1a5c66['status']==='new-disabled')_0x3b273a=_0x555d1d(0x1a0);else{if(_0x1a5c66[_0x555d1d(0x1d9)]===_0x555d1d(0x1ba))_0x3b273a='enabled';}}}return _0x3b273a;}function updateStatus(_0x45c07d,_0x21d771){const _0x7027d7=_0x7bd06e;dbConfig[_0x7027d7(0x137)](_0x7027d7(0x247))['find']({'botID':_0x45c07d})[_0x7027d7(0x13d)]({'status':_0x21d771})['write'](),config=getConfiguration(),io['to'](_0x7027d7(0x11d))[_0x7027d7(0xd7)]('bots',config),broadcastToBots(_0x7027d7(0x247),JSON[_0x7027d7(0x11a)](config));}function updateLive(_0x5e3464,_0x5bd0ed){const _0x1c5987=_0x7bd06e;dbConfig[_0x1c5987(0x137)]('bots')[_0x1c5987(0x1bd)]({'botID':_0x5e3464})[_0x1c5987(0x13d)]({'live':_0x5bd0ed})['write'](),config=getConfiguration(),io['to'](_0x1c5987(0x11d))[_0x1c5987(0xd7)](_0x1c5987(0x247),config),broadcastToBots(_0x1c5987(0x247),JSON[_0x1c5987(0x11a)](config));}function updateBotName(_0x4f6328,_0x3b2174){const _0x453132=_0x7bd06e;dbConfig[_0x453132(0x137)](_0x453132(0x247))[_0x453132(0x1bd)]({'botID':_0x4f6328})[_0x453132(0x13d)]({'botname':_0x3b2174})['write'](),config=getConfiguration(),io['to'](_0x453132(0x11d))[_0x453132(0xd7)](_0x453132(0x247),config),broadcastToBots('bots',JSON[_0x453132(0x11a)](config));}function updateBotManager(){const _0x34dc51=_0x7bd06e;config=getConfiguration(),io['to'](_0x34dc51(0x11d))[_0x34dc51(0xd7)](_0x34dc51(0x247),config),broadcastToBots('bots',JSON[_0x34dc51(0x11a)](config));}function toggleBotMode(_0xbeed77){const _0x3da8dc=_0x7bd06e;if(pid[_0xbeed77])pid[_0xbeed77][_0x3da8dc(0x261)]({'function':_0x3da8dc(0x110),'args':null});else{const _0x259dce=configpath+'bot-'+_0xbeed77+'-config.json',_0x1f0f4d=fs[_0x3da8dc(0x191)](_0x259dce),_0x31a7f8=JSON['parse'](_0x1f0f4d),_0x152719=_0x31a7f8[_0x3da8dc(0x178)][0x0][_0x3da8dc(0x28f)];_0x31a7f8[_0x3da8dc(0x178)][0x0][_0x3da8dc(0x28f)]=!_0x152719;const _0x1ecd86=JSON[_0x3da8dc(0x11a)](_0x31a7f8,null,0x2);fs[_0x3da8dc(0xcb)](_0x259dce,_0x1ecd86),config=getConfiguration(),io['to'](_0x3da8dc(0x11d))[_0x3da8dc(0xd7)](_0x3da8dc(0x247),config),broadcastToBots(_0x3da8dc(0x247),JSON[_0x3da8dc(0x11a)](config));}}function telegramError(_0xd68e00){const _0xf8a414=_0x7bd06e;logger['simple'](getTimeStamp()+_0xf8a414(0x238));}function validateTelegram(_0x698a48){const _0x74a1c9=_0x7bd06e;if(_0x698a48[_0x74a1c9(0xf6)][_0x74a1c9(0x271)]!=settings[_0x74a1c9(0x1f8)]&&'@'+_0x698a48[_0x74a1c9(0xf6)][_0x74a1c9(0x271)]!=settings[_0x74a1c9(0x1f8)])return tgBot[_0x74a1c9(0x170)](_0x698a48[_0x74a1c9(0x220)]['id'],_0x74a1c9(0x13e),{'parse_mode':'HTML'})[_0x74a1c9(0x1db)](_0x19f0ce=>{telegramError(_0x19f0ce);}),![];return!![];}async function initTelegram(){const _0x1a3f49=_0x7bd06e;if(tgBot)tgBot[_0x1a3f49(0x18e)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1a3f49(0x249)],{'polling':!![]});let _0x53a578='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x53a578+='\x0a',_0x53a578+=_0x1a3f49(0x230),_0x53a578+='/disable\x20-\x20disable\x20notifications\x0a',_0x53a578+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x53a578+=_0x1a3f49(0x10f),_0x53a578+=_0x1a3f49(0x14f),_0x53a578+=_0x1a3f49(0x16d),_0x53a578+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x53a578+=_0x1a3f49(0x1bc),_0x53a578+=_0x1a3f49(0x256),_0x53a578+=_0x1a3f49(0x214),_0x53a578+=_0x1a3f49(0x1eb),_0x53a578+=_0x1a3f49(0x268),_0x53a578+=_0x1a3f49(0x20f),_0x53a578+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x53e0a4=_0x1a3f49(0x223);_0x53e0a4+='\x0a',_0x53e0a4+=_0x53a578,tgBot[_0x1a3f49(0xe9)](/\/start/,_0x48a600=>{const _0x39754d=_0x1a3f49;if(!validateTelegram(_0x48a600))return;if(settings[_0x39754d(0x10a)]!=_0x48a600[_0x39754d(0x220)]['id'])updateSetting(_0x39754d(0x10a),_0x48a600[_0x39754d(0x220)]['id']);updateSetting(_0x39754d(0x212),!![]),tgBot[_0x39754d(0x170)](_0x48a600[_0x39754d(0x220)]['id'],_0x53e0a4)[_0x39754d(0x1db)](_0x54c681=>{telegramError(_0x54c681);});}),tgBot[_0x1a3f49(0xe9)](/\/enable/,_0x36e4bb=>{const _0x40bef5=_0x1a3f49;if(!validateTelegram(_0x36e4bb))return;if(settings[_0x40bef5(0x10a)]!=_0x36e4bb[_0x40bef5(0x220)]['id'])updateSetting(_0x40bef5(0x10a),_0x36e4bb[_0x40bef5(0x220)]['id']);updateSetting(_0x40bef5(0x212),!![]),tgBot['sendMessage'](_0x36e4bb['chat']['id'],_0x40bef5(0x119))['catch'](_0x29e5e8=>{telegramError(_0x29e5e8);});}),tgBot[_0x1a3f49(0xe9)](/\/config/,async _0x911d88=>{const _0x5f031c=_0x1a3f49;if(!validateTelegram(_0x911d88))return;tgBot[_0x5f031c(0x155)](_0x5f031c(0xc9)),tgBot[_0x5f031c(0x170)](_0x911d88['chat']['id'],_0x5f031c(0x28e),{'reply_markup':{'inline_keyboard':[[{'text':_0x5f031c(0x26e),'callback_data':_0x5f031c(0x10d)},{'text':_0x5f031c(0x12a),'callback_data':_0x5f031c(0xef)},{'text':_0x5f031c(0x13a),'callback_data':_0x5f031c(0x19f)}]]}})[_0x5f031c(0x1db)](_0x568436=>{telegramError(_0x568436);}),tgBot['on'](_0x5f031c(0xc9),async _0x338afe=>{const _0x1f9b56=_0x5f031c,_0x44dc22=_0x338afe[_0x1f9b56(0x23e)],_0x30aa74=_0x338afe[_0x1f9b56(0x1d0)];tgBot[_0x1f9b56(0x255)](_0x338afe['id'])[_0x1f9b56(0x149)](async()=>{const _0x137e2a=_0x1f9b56;_0x44dc22==_0x137e2a(0x10d)&&(updateSetting(_0x137e2a(0x171),'orders'),updateSetting(_0x137e2a(0x212),!![]),await tgBot[_0x137e2a(0x170)](_0x30aa74['chat']['id'],_0x137e2a(0x293))[_0x137e2a(0x1db)](_0x5eb0dc=>{telegramError(_0x5eb0dc);}));_0x44dc22==_0x137e2a(0xef)&&(updateSetting('telegramEvents',_0x137e2a(0xef)),updateSetting(_0x137e2a(0x212),!![]),await tgBot[_0x137e2a(0x170)](_0x30aa74['chat']['id'],_0x137e2a(0x127))['catch'](_0x44e3a2=>{telegramError(_0x44e3a2);}));_0x44dc22==_0x137e2a(0x19f)&&(updateSetting(_0x137e2a(0x171),_0x137e2a(0x19f)),updateSetting(_0x137e2a(0x212),!![]),await tgBot['sendMessage'](_0x30aa74['chat']['id'],_0x137e2a(0x17a))[_0x137e2a(0x1db)](_0x5d6c80=>{telegramError(_0x5d6c80);}));if(!settings[_0x137e2a(0x10a)])tgBot[_0x137e2a(0x170)](_0x30aa74[_0x137e2a(0x220)]['id'],_0x137e2a(0xdb))[_0x137e2a(0x1db)](_0x3a7970=>{telegramError(_0x3a7970);});}),tgBot[_0x1f9b56(0x155)](_0x1f9b56(0xc9));});}),tgBot[_0x1a3f49(0xe9)](/\/status/,_0x18df11=>{const _0x3351cd=_0x1a3f49;if(!validateTelegram(_0x18df11))return;const _0xa5af03=getBotsWithMode();let _0x5721f6=_0x3351cd(0x183);config[_0x3351cd(0x275)](_0x288db2=>{const _0x5d3674=_0x3351cd,_0x4fbc43=_0xa5af03[_0x5d3674(0x1bd)](_0x2d8fd7=>_0x2d8fd7[_0x5d3674(0x213)]==_0x288db2[_0x5d3674(0x213)])[_0x5d3674(0x273)];_0x5721f6+=_0x5d3674(0x24c)+_0x288db2[_0x5d3674(0x213)]+':\x20'+_0x288db2[_0x5d3674(0x1d9)]+_0x5d3674(0x1fc)+_0x4fbc43+_0x5d3674(0x1fc)+_0x288db2[_0x5d3674(0x27a)]+'\x0a';}),_0x5721f6+='\x0a',_0x5721f6+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x5721f6+=!settings['telegramEnabled']?_0x3351cd(0x2a2):_0x3351cd(0x126),_0x5721f6+=settings[_0x3351cd(0x212)]?settings[_0x3351cd(0x171)]==_0x3351cd(0x19f)?_0x3351cd(0x193):_0x3351cd(0xfe)+settings['telegramEvents']+_0x3351cd(0x283):'',tgBot[_0x3351cd(0x170)](_0x18df11[_0x3351cd(0x220)]['id'],_0x5721f6,{'parse_mode':_0x3351cd(0x200)})[_0x3351cd(0x1db)](_0x3bd4a4=>{telegramError(_0x3bd4a4);});}),tgBot[_0x1a3f49(0xe9)](/\/restart/,_0x4f2daa=>{const _0x59374a=_0x1a3f49;if(!validateTelegram(_0x4f2daa))return;tgBot[_0x59374a(0x155)]('callback_query');const _0x592666=getEnabledBots();if(_0x592666[_0x59374a(0x143)]==0x0)tgBot['sendMessage'](_0x4f2daa[_0x59374a(0x220)]['id'],_0x59374a(0x138))['catch'](_0x3f11b4=>{telegramError(_0x3f11b4);});else{if(_0x592666[_0x59374a(0x143)]>0x1)_0x592666[_0x59374a(0x1b3)]({'botID':_0x59374a(0x19f)});let _0x39e4d5=[],_0x564a3e=[];const _0x433834=_0x592666[_0x59374a(0x143)]%0x4==0x0||_0x592666[_0x59374a(0x143)]%0x4==0x3||_0x592666['length']%0x3==0x1?0x4:0x3;let _0x12667b=0x0;_0x592666['forEach']((_0x526a5b,_0x4e3917)=>{const _0x84daaf=_0x59374a;if(_0x4e3917%_0x433834==0x0)_0x564a3e=[];_0x564a3e[_0x84daaf(0x1b3)]({'text':_0x526a5b[_0x84daaf(0x213)]==_0x84daaf(0x19f)?'All\x20bots':'Bot\x20'+_0x526a5b[_0x84daaf(0x213)],'callback_data':_0x526a5b[_0x84daaf(0x213)]}),_0x4e3917%_0x433834==0x0&&(_0x39e4d5[_0x12667b]=_0x564a3e,_0x12667b++);}),tgBot[_0x59374a(0x170)](_0x4f2daa[_0x59374a(0x220)]['id'],_0x59374a(0xd0),{'reply_markup':{'inline_keyboard':_0x39e4d5}})[_0x59374a(0x1db)](_0x3f6c51=>{telegramError(_0x3f6c51);}),tgBot['on'](_0x59374a(0xc9),async _0x4900b0=>{const _0x989cdb=_0x59374a,_0x7a6f82=_0x4900b0[_0x989cdb(0x23e)],_0x58ec2d=_0x4900b0[_0x989cdb(0x1d0)];tgBot[_0x989cdb(0x255)](_0x4900b0['id'])['then'](async()=>{const _0x53c6c2=_0x989cdb;_0x7a6f82==_0x53c6c2(0x19f)?config[_0x53c6c2(0x275)](_0x29d7bc=>{const _0x300cf3=_0x53c6c2;restartBot(_0x29d7bc[_0x300cf3(0x213)]);}):restartBot(_0x7a6f82);}),tgBot[_0x989cdb(0x155)](_0x989cdb(0xc9));});}}),tgBot[_0x1a3f49(0xe9)](/\/on/,_0xe28fe4=>{const _0x21091e=_0x1a3f49;if(!validateTelegram(_0xe28fe4))return;tgBot[_0x21091e(0x155)](_0x21091e(0xc9));const _0x31e57b=getDisabledBots();if(_0x31e57b[_0x21091e(0x143)]==0x0)tgBot[_0x21091e(0x170)](_0xe28fe4[_0x21091e(0x220)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x21091e(0x1db)](_0x21af77=>{telegramError(_0x21af77);});else{if(_0x31e57b[_0x21091e(0x143)]>0x1)_0x31e57b[_0x21091e(0x1b3)]({'botID':'all'});let _0x41281c=[],_0x3e54ea=[];const _0x402581=_0x31e57b['length']%0x4==0x0||_0x31e57b[_0x21091e(0x143)]%0x4==0x3||_0x31e57b['length']%0x3==0x1?0x4:0x3;let _0x4e6c2e=0x0;_0x31e57b[_0x21091e(0x275)]((_0x1d39b0,_0x234f78)=>{const _0x11927d=_0x21091e;if(_0x234f78%_0x402581==0x0)_0x3e54ea=[];_0x3e54ea[_0x11927d(0x1b3)]({'text':_0x1d39b0[_0x11927d(0x213)]==_0x11927d(0x19f)?'All\x20bots':_0x11927d(0x24c)+_0x1d39b0[_0x11927d(0x213)],'callback_data':_0x1d39b0[_0x11927d(0x213)]}),_0x234f78%_0x402581==0x0&&(_0x41281c[_0x4e6c2e]=_0x3e54ea,_0x4e6c2e++);}),tgBot['sendMessage'](_0xe28fe4[_0x21091e(0x220)]['id'],_0x21091e(0x11b),{'reply_markup':{'inline_keyboard':_0x41281c}})[_0x21091e(0x1db)](_0x525e9d=>{telegramError(_0x525e9d);}),tgBot['on'](_0x21091e(0xc9),async _0x3930ec=>{const _0x11109b=_0x21091e,_0xcd4efb=_0x3930ec[_0x11109b(0x23e)],_0x1dcce1=_0x3930ec['message'];tgBot['answerCallbackQuery'](_0x3930ec['id'])[_0x11109b(0x149)](async()=>{const _0x41875d=_0x11109b;_0xcd4efb==_0x41875d(0x19f)?(tgBot[_0x41875d(0x170)](_0x1dcce1[_0x41875d(0x220)]['id'],_0x41875d(0x124))[_0x41875d(0x1db)](_0x33917a=>{telegramError(_0x33917a);}),_0x31e57b[_0x41875d(0x275)](_0x1b0293=>{const _0x205daa=_0x41875d;if(_0x1b0293[_0x205daa(0x213)]!=_0x205daa(0x19f))toggleBot(_0x1b0293[_0x205daa(0x213)],toggleStatus(_0x1b0293[_0x205daa(0x213)]),_0x205daa(0x228));})):(tgBot[_0x41875d(0x170)](_0x1dcce1[_0x41875d(0x220)]['id'],_0x41875d(0x295)+_0xcd4efb)[_0x41875d(0x1db)](_0x196983=>{telegramError(_0x196983);}),toggleBot(_0xcd4efb,toggleStatus(_0xcd4efb),_0x41875d(0x228)));}),tgBot[_0x11109b(0x155)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x2215af=>{const _0x22982a=_0x1a3f49;if(!validateTelegram(_0x2215af))return;tgBot['removeListener'](_0x22982a(0xc9));const _0x114d87=getEnabledBots();if(_0x114d87[_0x22982a(0x143)]==0x0)tgBot['sendMessage'](_0x2215af['chat']['id'],_0x22982a(0x138))[_0x22982a(0x1db)](_0x5b0c10=>{telegramError(_0x5b0c10);});else{if(_0x114d87[_0x22982a(0x143)]>0x1)_0x114d87[_0x22982a(0x1b3)]({'botID':_0x22982a(0x19f)});let _0x51b09f=[],_0x3ae7cb=[];const _0x56d048=_0x114d87[_0x22982a(0x143)]%0x4==0x0||_0x114d87[_0x22982a(0x143)]%0x4==0x3||_0x114d87['length']%0x3==0x1?0x4:0x3;let _0x4dc734=0x0;_0x114d87[_0x22982a(0x275)]((_0x3fba15,_0x59b92e)=>{const _0x1615e2=_0x22982a;if(_0x59b92e%_0x56d048==0x0)_0x3ae7cb=[];_0x3ae7cb['push']({'text':_0x3fba15[_0x1615e2(0x213)]=='all'?_0x1615e2(0xdf):_0x1615e2(0x24c)+_0x3fba15['botID'],'callback_data':_0x3fba15[_0x1615e2(0x213)]}),_0x59b92e%_0x56d048==0x0&&(_0x51b09f[_0x4dc734]=_0x3ae7cb,_0x4dc734++);}),tgBot[_0x22982a(0x170)](_0x2215af[_0x22982a(0x220)]['id'],_0x22982a(0x23a),{'reply_markup':{'inline_keyboard':_0x51b09f}})[_0x22982a(0x1db)](_0x2e169d=>{telegramError(_0x2e169d);}),tgBot['on']('callback_query',async _0x40d86d=>{const _0x3bf972=_0x22982a,_0x210830=_0x40d86d[_0x3bf972(0x23e)],_0x2e3583=_0x40d86d[_0x3bf972(0x1d0)];tgBot['answerCallbackQuery'](_0x40d86d['id'])[_0x3bf972(0x149)](async()=>{const _0x24f2e4=_0x3bf972;_0x210830=='all'?(tgBot['sendMessage'](_0x2e3583[_0x24f2e4(0x220)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')['catch'](_0x10d2ae=>{telegramError(_0x10d2ae);}),_0x114d87[_0x24f2e4(0x275)](_0x5855f1=>{const _0x13e340=_0x24f2e4;if(_0x5855f1[_0x13e340(0x213)]!=_0x13e340(0x19f))toggleBot(_0x5855f1[_0x13e340(0x213)],toggleStatus(_0x5855f1[_0x13e340(0x213)]),'stopped');})):(tgBot[_0x24f2e4(0x170)](_0x2e3583[_0x24f2e4(0x220)]['id'],_0x24f2e4(0x18f)+_0x210830)['catch'](_0xdcf598=>{telegramError(_0xdcf598);}),toggleBot(_0x210830,toggleStatus(_0x210830),'stopped'));}),tgBot[_0x3bf972(0x155)](_0x3bf972(0xc9));});}}),tgBot[_0x1a3f49(0xe9)](/\/metrics/,_0x5cf2e1=>{const _0x51de6f=_0x1a3f49;if(!validateTelegram(_0x5cf2e1))return;tgBot['removeListener'](_0x51de6f(0xc9));const _0x41b50d=getEnabledBots();if(_0x41b50d['length']==0x0)tgBot[_0x51de6f(0x170)](_0x5cf2e1[_0x51de6f(0x220)]['id'],_0x51de6f(0x138))[_0x51de6f(0x1db)](_0x35070c=>{telegramError(_0x35070c);});else{if(_0x41b50d['length']>0x1){let _0x1b0bb4=[],_0x3eefb4=[];const _0x5d0797=_0x41b50d[_0x51de6f(0x143)]%0x4==0x0||_0x41b50d['length']%0x4==0x3||_0x41b50d[_0x51de6f(0x143)]%0x3==0x1?0x4:0x3;let _0x4f1961=0x0;_0x41b50d['forEach']((_0x11684d,_0x1ea4b4)=>{const _0x266963=_0x51de6f;if(_0x1ea4b4%_0x5d0797==0x0)_0x3eefb4=[];_0x3eefb4[_0x266963(0x1b3)]({'text':_0x266963(0x24c)+_0x11684d[_0x266963(0x213)],'callback_data':_0x11684d['botID']}),_0x1ea4b4%_0x5d0797==0x0&&(_0x1b0bb4[_0x4f1961]=_0x3eefb4,_0x4f1961++);}),tgBot['sendMessage'](_0x5cf2e1[_0x51de6f(0x220)]['id'],_0x51de6f(0x287),{'reply_markup':{'inline_keyboard':_0x1b0bb4}})[_0x51de6f(0x1db)](_0x3d3298=>{telegramError(_0x3d3298);}),tgBot['on']('callback_query',async _0x38fe1f=>{const _0x2a96cf=_0x51de6f,_0x16e462=_0x38fe1f['data'],_0x17878f=_0x38fe1f[_0x2a96cf(0x1d0)];tgBot[_0x2a96cf(0x255)](_0x38fe1f['id'])[_0x2a96cf(0x149)](async()=>{const _0x4a107d=_0x2a96cf;if(pid[_0x16e462])pid[_0x16e462][_0x4a107d(0x261)]({'function':_0x4a107d(0xe8),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x372103=_0x41b50d[0x0]['botID'];if(pid[_0x372103])pid[_0x372103][_0x51de6f(0x261)]({'function':_0x51de6f(0xe8),'args':null});}}}),tgBot[_0x1a3f49(0xe9)](/\/portfolio/,_0x495c0f=>{const _0x2f1735=_0x1a3f49;if(!validateTelegram(_0x495c0f))return;tgBot[_0x2f1735(0x155)](_0x2f1735(0xc9));const _0x632cc0=getEnabledBots();if(_0x632cc0[_0x2f1735(0x143)]==0x0)tgBot[_0x2f1735(0x170)](_0x495c0f[_0x2f1735(0x220)]['id'],_0x2f1735(0x138))[_0x2f1735(0x1db)](_0x43f886=>{telegramError(_0x43f886);});else{if(_0x632cc0['length']>0x1){let _0x5b4fda=[],_0x5481b8=[];const _0x300b80=_0x632cc0[_0x2f1735(0x143)]%0x4==0x0||_0x632cc0[_0x2f1735(0x143)]%0x4==0x3||_0x632cc0[_0x2f1735(0x143)]%0x3==0x1?0x4:0x3;let _0x4c33af=0x0;_0x632cc0[_0x2f1735(0x275)]((_0x29117b,_0x3c06c4)=>{const _0x52b3a6=_0x2f1735;if(_0x3c06c4%_0x300b80==0x0)_0x5481b8=[];_0x5481b8[_0x52b3a6(0x1b3)]({'text':_0x52b3a6(0x24c)+_0x29117b[_0x52b3a6(0x213)],'callback_data':_0x29117b['botID']}),_0x3c06c4%_0x300b80==0x0&&(_0x5b4fda[_0x4c33af]=_0x5481b8,_0x4c33af++);}),tgBot[_0x2f1735(0x170)](_0x495c0f['chat']['id'],_0x2f1735(0x1ad),{'reply_markup':{'inline_keyboard':_0x5b4fda}})['catch'](_0x535f93=>{telegramError(_0x535f93);}),tgBot['on'](_0x2f1735(0xc9),async _0x4b0172=>{const _0x2a8106=_0x2f1735,_0x3552ea=_0x4b0172[_0x2a8106(0x23e)],_0x570d5a=_0x4b0172[_0x2a8106(0x1d0)];tgBot[_0x2a8106(0x255)](_0x4b0172['id'])[_0x2a8106(0x149)](async()=>{const _0x1e108a=_0x2a8106;if(pid[_0x3552ea])pid[_0x3552ea][_0x1e108a(0x261)]({'function':_0x1e108a(0x1be),'args':null});}),tgBot['removeListener'](_0x2a8106(0xc9));});}else{const _0x403deb=_0x632cc0[0x0][_0x2f1735(0x213)];if(pid[_0x403deb])pid[_0x403deb][_0x2f1735(0x261)]({'function':_0x2f1735(0x1be),'args':null});}}}),tgBot[_0x1a3f49(0xe9)](/\/update/,async _0x41db1c=>{const _0xaedb9a=_0x1a3f49;if(!validateTelegram(_0x41db1c))return;tgBot[_0xaedb9a(0x155)](_0xaedb9a(0xc9)),await getMessages();if(!updateAvailable)tgBot[_0xaedb9a(0x170)](_0x41db1c[_0xaedb9a(0x220)]['id'],_0xaedb9a(0x148))[_0xaedb9a(0x1db)](_0x29d466=>{telegramError(_0x29d466);});else!validInstallation?tgBot[_0xaedb9a(0x170)](_0x41db1c['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')['catch'](_0x1fc560=>{telegramError(_0x1fc560);}):(tgBot[_0xaedb9a(0x170)](_0x41db1c[_0xaedb9a(0x220)]['id'],_0xaedb9a(0x257),{'reply_markup':{'inline_keyboard':[[{'text':_0xaedb9a(0x174),'callback_data':_0xaedb9a(0x286)},{'text':'No','callback_data':'no'}]]}})[_0xaedb9a(0x1db)](_0x28a8ce=>{telegramError(_0x28a8ce);}),tgBot['on'](_0xaedb9a(0xc9),async _0x4d4700=>{const _0x252eec=_0xaedb9a,_0x33a605=_0x4d4700[_0x252eec(0x23e)],_0x1dd70d=_0x4d4700['message'];tgBot[_0x252eec(0x255)](_0x4d4700['id'])[_0x252eec(0x149)](async()=>{const _0x1164d1=_0x252eec;_0x33a605==_0x1164d1(0x286)&&(await tgBot[_0x1164d1(0x170)](_0x1dd70d['chat']['id'],_0x1164d1(0x19b))[_0x1164d1(0x1db)](_0x5b2e0e=>{telegramError(_0x5b2e0e);}),updateBB(_0x1164d1(0x236))),_0x33a605=='no'&&await tgBot[_0x1164d1(0x170)](_0x1dd70d['chat']['id'],_0x1164d1(0x1de))[_0x1164d1(0x1db)](_0x4e4a98=>{telegramError(_0x4e4a98);});}),tgBot[_0x252eec(0x155)](_0x252eec(0xc9));}));}),tgBot['onText'](/\/reinstall/,async _0x4d1de2=>{const _0x56bee6=_0x1a3f49;if(!validateTelegram(_0x4d1de2))return;tgBot['removeListener'](_0x56bee6(0xc9)),!validInstallation?tgBot[_0x56bee6(0x170)](_0x4d1de2[_0x56bee6(0x220)]['id'],_0x56bee6(0x197))[_0x56bee6(0x1db)](_0x4a47b4=>{telegramError(_0x4a47b4);}):(tgBot[_0x56bee6(0x170)](_0x4d1de2[_0x56bee6(0x220)]['id'],_0x56bee6(0x1c3),{'reply_markup':{'inline_keyboard':[[{'text':_0x56bee6(0x174),'callback_data':_0x56bee6(0x286)},{'text':'No','callback_data':'no'}]]}})[_0x56bee6(0x1db)](_0xc6140b=>{telegramError(_0xc6140b);}),tgBot['on'](_0x56bee6(0xc9),async _0x3b2fa8=>{const _0x4d73ec=_0x56bee6,_0x4581a8=_0x3b2fa8['data'],_0x7426c9=_0x3b2fa8[_0x4d73ec(0x1d0)];tgBot['answerCallbackQuery'](_0x3b2fa8['id'])[_0x4d73ec(0x149)](async()=>{const _0x3a5fbd=_0x4d73ec;_0x4581a8==_0x3a5fbd(0x286)&&(await tgBot['sendMessage'](_0x7426c9[_0x3a5fbd(0x220)]['id'],_0x3a5fbd(0x1d6))[_0x3a5fbd(0x1db)](_0x3e09f3=>{telegramError(_0x3e09f3);}),updateBB(_0x3a5fbd(0x253))),_0x4581a8=='no'&&await tgBot[_0x3a5fbd(0x170)](_0x7426c9[_0x3a5fbd(0x220)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x3a5fbd(0x1db)](_0x28b688=>{telegramError(_0x28b688);});}),tgBot[_0x4d73ec(0x155)](_0x4d73ec(0xc9));}));}),tgBot[_0x1a3f49(0xe9)](/\/toggle/,_0x49f2e5=>{const _0x55b451=_0x1a3f49;if(!validateTelegram(_0x49f2e5))return;tgBot['removeListener'](_0x55b451(0xc9));const _0x42c888=getBotsWithMode();if(_0x42c888[_0x55b451(0x143)]==0x0)tgBot[_0x55b451(0x170)](_0x49f2e5[_0x55b451(0x220)]['id'],_0x55b451(0x138))['catch'](_0x16a395=>{telegramError(_0x16a395);});else{let _0xda50f7=[],_0x8d1ac5=[];const _0x445daa=0x2;let _0xde8229=0x0;_0x42c888['forEach']((_0x42b2ed,_0x383287)=>{const _0x4bb917=_0x55b451;if(_0x383287%_0x445daa==0x0)_0x8d1ac5=[];_0x8d1ac5[_0x4bb917(0x1b3)]({'text':_0x4bb917(0x24c)+_0x42b2ed[_0x4bb917(0x213)]+'\x20('+_0x42b2ed[_0x4bb917(0x273)]+')','callback_data':_0x42b2ed[_0x4bb917(0x213)]}),_0x383287%_0x445daa==0x0&&(_0xda50f7[_0xde8229]=_0x8d1ac5,_0xde8229++);}),tgBot[_0x55b451(0x170)](_0x49f2e5[_0x55b451(0x220)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0xda50f7}})[_0x55b451(0x1db)](_0x503067=>{telegramError(_0x503067);}),tgBot['on'](_0x55b451(0xc9),async _0x22df84=>{const _0x332409=_0x55b451,_0x3c324d=_0x22df84['data'],_0x2c2717=_0x22df84[_0x332409(0x1d0)];tgBot['answerCallbackQuery'](_0x22df84['id'])[_0x332409(0x149)](async()=>{const _0xa44465=_0x332409,_0x3a8974=_0x42c888['find'](_0x305d35=>_0x305d35['botID']==_0x3c324d),_0xd321b4=_0x3a8974[_0xa44465(0x273)]=='auto'?_0xa44465(0x14d):_0xa44465(0x106);tgBot['sendMessage'](_0x2c2717['chat']['id'],_0xa44465(0x24f)+_0x3c324d+'\x20to\x20'+_0xd321b4+_0xa44465(0xec))[_0xa44465(0x1db)](_0x3b48b6=>{telegramError(_0x3b48b6);}),toggleBotMode(_0x3c324d);}),tgBot['removeListener'](_0x332409(0xc9));});}}),tgBot['onText'](/\/names/,_0x4e27f7=>{const _0x403b04=_0x1a3f49;if(!validateTelegram(_0x4e27f7))return;let _0x14e12a='';config['forEach'](_0x389e44=>{const _0x4fc1e6=_0x257d;_0x14e12a+=_0x4fc1e6(0x24c)+_0x389e44[_0x4fc1e6(0x213)]+':\x20'+_0x389e44[_0x4fc1e6(0x232)]+'\x0a';}),tgBot['sendMessage'](_0x4e27f7[_0x403b04(0x220)]['id'],_0x14e12a,{'parse_mode':'HTML'})[_0x403b04(0x1db)](_0x3d3e33=>{telegramError(_0x3d3e33);});}),tgBot['onText'](/\/disable/,_0xa095b6=>{const _0x34bafe=_0x1a3f49;if(!validateTelegram(_0xa095b6))return;tgBot['sendMessage'](_0xa095b6['chat']['id'],_0x34bafe(0x18a))[_0x34bafe(0x1db)](_0x398877=>{telegramError(_0x398877);}),updateSetting(_0x34bafe(0x212),![]);}),tgBot[_0x1a3f49(0xe9)](/\/help/,_0x43afb4=>{const _0x547e9f=_0x1a3f49;if(!validateTelegram(_0x43afb4))return;tgBot[_0x547e9f(0x170)](_0x43afb4[_0x547e9f(0x220)]['id'],_0x53a578)[_0x547e9f(0x1db)](_0x264f86=>{telegramError(_0x264f86);});}),tgBot['on'](_0x1a3f49(0x13c),_0x5394fb=>{const _0x36dc34=_0x1a3f49;_0x5394fb[_0x36dc34(0x1f2)]()[_0x36dc34(0x284)](_0x36dc34(0x1e2))&&(logger[_0x36dc34(0xe3)](_0x36dc34(0x211)),tgBot[_0x36dc34(0x18e)](),tgBot=null,io['to'](_0x36dc34(0x11d))['emit'](_0x36dc34(0x16f),_0x36dc34(0x211)));}),process[_0x1a3f49(0x208)](_0x1a3f49(0x1b2),()=>{const _0x1cd915=_0x1a3f49;if(tgBot)tgBot[_0x1cd915(0x18e)]();process['exit'](0x1);}),process[_0x1a3f49(0x208)](_0x1a3f49(0x179),()=>{const _0x4d0358=_0x1a3f49;if(tgBot)tgBot[_0x4d0358(0x18e)]();process[_0x4d0358(0x128)](0x1);});}}function disableTelegram(){const _0x7533b6=_0x7bd06e;tgBot&&(tgBot[_0x7533b6(0x18e)](),tgBot=null);}function sendTelegram(_0x1ca451,_0xff40fd){const _0x359cd0=_0x7bd06e;if(settings[_0x359cd0(0x212)]){if(settings[_0x359cd0(0x171)]==_0x359cd0(0x19f)||(_0xff40fd[_0x359cd0(0x115)]==_0x359cd0(0x1b0)||_0xff40fd[_0x359cd0(0x115)]=='warning'||_0xff40fd[_0x359cd0(0x115)]==_0x359cd0(0x1b4))&&settings['telegramEvents']==_0x359cd0(0xef)||_0xff40fd[_0x359cd0(0x115)]==_0x359cd0(0x281)&&settings['telegramEvents']==_0x359cd0(0x10d)){if(tgBot&&settings[_0x359cd0(0x10a)]){if(_0xff40fd[_0x359cd0(0x16e)])tgBot['sendMessage'](settings['telegramChatId'],_0xff40fd[_0x359cd0(0x232)]+_0x359cd0(0x186)+_0xff40fd[_0x359cd0(0x15a)])['catch'](_0x3a1ac3=>{telegramError(_0x3a1ac3);});else tgBot['sendMessage'](settings['telegramChatId'],_0x359cd0(0x24c)+_0x1ca451+'\x20>\x20'+_0xff40fd[_0x359cd0(0x15a)])[_0x359cd0(0x1db)](_0x19c2fb=>{telegramError(_0x19c2fb);});}}}}async function sendTelegramMsg(_0x2dc5b8,_0x1fa595=_0x7bd06e(0x200)){const _0x3de7af=_0x7bd06e;return settings[_0x3de7af(0x212)]&&tgBot&&settings[_0x3de7af(0x10a)]?(await tgBot[_0x3de7af(0x170)](settings['telegramChatId'],_0x2dc5b8,{'parse_mode':_0x1fa595})[_0x3de7af(0x1db)](_0x176707=>{telegramError(_0x176707);}),!![]):![];}function getDeviceWithIp(_0x3b2c3f){return devices['find'](_0x274401=>_0x274401['ip']===_0x3b2c3f);}function temporaryAccess2FA(_0x16b73d,_0x4bca70){const _0x58b8e=_0x7bd06e;let _0x5ceb66=new Date(),_0x28f1e2=![];if(lastIpApproval){if(_0x5ceb66-lastIpApproval<0x1388)_0x28f1e2=!![];}lastIpApproval=new Date();if(_0x28f1e2)return;tgBot&&settings[_0x58b8e(0x10a)]&&(tgBot[_0x58b8e(0x155)](_0x58b8e(0xc9)),tgBot[_0x58b8e(0x170)](settings['telegramChatId'],_0x58b8e(0x1c1)+normalizeIP(_0x4bca70)[_0x58b8e(0xf5)]+_0x58b8e(0x1d5),{'parse_mode':_0x58b8e(0x200),'reply_markup':{'inline_keyboard':[[{'text':_0x58b8e(0x27f),'callback_data':'5'},{'text':_0x58b8e(0x11c),'callback_data':'15'},{'text':_0x58b8e(0x20b),'callback_data':'30'},{'text':'reject','callback_data':_0x58b8e(0x29b)}]]}})[_0x58b8e(0x1db)](_0x2f82e3=>{telegramError(_0x2f82e3);}),tgBot['on'](_0x58b8e(0xc9),async _0x4ea2ec=>{const _0x253d3c=_0x58b8e,_0x1cc17a=_0x4ea2ec[_0x253d3c(0x23e)],_0x4d6cc3=_0x4ea2ec[_0x253d3c(0x1d0)];tgBot['answerCallbackQuery'](_0x4ea2ec['id'])[_0x253d3c(0x149)](async()=>{const _0x5f08ba=_0x253d3c;devices[_0x16b73d][_0x5f08ba(0x1f1)]={'clientip':_0x4bca70,'timestamp':new Date()['getTime'](),'expiry':_0x1cc17a},_0x1cc17a!=_0x5f08ba(0x29b)?(await tgBot[_0x5f08ba(0x170)](_0x4d6cc3[_0x5f08ba(0x220)]['id'],_0x5f08ba(0x12e)+_0x1cc17a+_0x5f08ba(0xe7),{'parse_mode':'HTML'})[_0x5f08ba(0x1db)](_0x37227f=>{telegramError(_0x37227f);}),io['to'](_0x16b73d)['emit']('status',{'access':{'allow':![],'reason':_0x5f08ba(0x133),'token':null}})):(await tgBot['sendMessage'](_0x4d6cc3[_0x5f08ba(0x220)]['id'],_0x5f08ba(0x1af))[_0x5f08ba(0x1db)](_0x1dead2=>{telegramError(_0x1dead2);}),io['to'](_0x16b73d)['emit'](_0x5f08ba(0x1d9),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x253d3c(0x155)]('callback_query');}));}function loginAccess2FA(_0x42382d,_0x53993e){const _0x84ecb2=_0x7bd06e;tgBot&&settings['telegramChatId']&&(tgBot[_0x84ecb2(0x155)]('callback_query'),tgBot[_0x84ecb2(0x170)](settings[_0x84ecb2(0x10a)],_0x84ecb2(0x26f)+normalizeIP(_0x53993e)[_0x84ecb2(0xf5)]+_0x84ecb2(0x1d5),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x84ecb2(0x1db)](_0x53bc5d=>{telegramError(_0x53bc5d);}),tgBot['on'](_0x84ecb2(0xc9),async _0x1532db=>{const _0x309bae=_0x84ecb2,_0x3d7c2b=_0x1532db[_0x309bae(0x23e)],_0x5eec74=_0x1532db[_0x309bae(0x1d0)];tgBot[_0x309bae(0x255)](_0x1532db['id'])[_0x309bae(0x149)](async()=>{const _0x3cf068=_0x309bae;devices[_0x42382d]['telegram2FaApproval']={'clientip':_0x53993e,'timestamp':new Date()[_0x3cf068(0x14a)](),'expiry':_0x3d7c2b},_0x3d7c2b!=_0x3cf068(0x29b)?(await tgBot[_0x3cf068(0x170)](_0x5eec74['chat']['id'],_0x3cf068(0x14e),{'parse_mode':_0x3cf068(0x200)})[_0x3cf068(0x1db)](_0x52831b=>{telegramError(_0x52831b);}),io['to'](_0x42382d)[_0x3cf068(0xd7)](_0x3cf068(0x1d9),{'access':{'allow':![],'reason':_0x3cf068(0x133),'token':null}})):(await tgBot[_0x3cf068(0x170)](_0x5eec74[_0x3cf068(0x220)]['id'],'Login\x20rejected')['catch'](_0x40d689=>{telegramError(_0x40d689);}),io['to'](_0x42382d)[_0x3cf068(0xd7)](_0x3cf068(0x1d9),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x309bae(0x155)](_0x309bae(0xc9));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xebb82b=_0x7bd06e;return dbConfig['get'](_0xebb82b(0x247))['sortBy']('botID')[_0xebb82b(0x1a8)]({'status':'enabled'})[_0xebb82b(0x107)]()||[];}function getDisabledBots(){const _0xb62a29=_0x7bd06e;return dbConfig['get'](_0xb62a29(0x247))[_0xb62a29(0xd3)](_0xb62a29(0x213))[_0xb62a29(0x1a8)]({'status':_0xb62a29(0x1ba)})['value']()||[];}function getBotAttributes(_0x29582e){const _0x1790fb=_0x7bd06e;let _0x58b4e9={};const _0x3a4244=configpath+_0x1790fb(0x12b)+_0x29582e+_0x1790fb(0x16c),_0x17e451=fs[_0x1790fb(0x1a4)](_0x3a4244);if(_0x17e451){const _0x46d45a=fs['readFileSync'](_0x3a4244);try{const _0x762e49=JSON[_0x1790fb(0xfd)](_0x46d45a),_0x2ba73c=_0x762e49?_0x762e49[_0x1790fb(0x178)][0x0]['headless']:![];_0x58b4e9[_0x1790fb(0x273)]=_0x2ba73c?'auto':_0x1790fb(0x14d),_0x58b4e9[_0x1790fb(0x232)]=_0x762e49?_0x762e49[_0x1790fb(0x178)][0x0][_0x1790fb(0x232)]:_0x1790fb(0x24c)+_0x29582e;}catch(_0x5bbc09){_0x58b4e9[_0x1790fb(0x273)]=_0x1790fb(0x14d),_0x58b4e9['botname']=_0x1790fb(0x24c)+_0x29582e;}}else _0x58b4e9[_0x1790fb(0x273)]='manual',_0x58b4e9[_0x1790fb(0x232)]=_0x1790fb(0x24c)+_0x29582e;return _0x58b4e9;}function getBotsWithMode(){const _0x1174bd=_0x7bd06e,_0x1be32c=dbConfig[_0x1174bd(0x137)]('bots')[_0x1174bd(0xd3)](_0x1174bd(0x213))[_0x1174bd(0x107)]()||[];return _0x1be32c[_0x1174bd(0x275)](_0x1c64f9=>{const _0x3f2141=_0x1174bd;let _0x2cd594=getBotAttributes(_0x1c64f9[_0x3f2141(0x213)]);_0x1c64f9[_0x3f2141(0x273)]=_0x2cd594[_0x3f2141(0x273)];}),_0x1be32c;}function getBotExchanges(){const _0x66dff1=_0x7bd06e;let _0x1b45b6=[];const _0x3fa339=dbConfig['get'](_0x66dff1(0x247))[_0x66dff1(0xd3)](_0x66dff1(0x213))[_0x66dff1(0x107)]()||[];_0x3fa339[_0x66dff1(0x275)](_0xaea4cd=>{const _0xbeb365=_0x66dff1;if(_0xaea4cd[_0xbeb365(0x1d9)]=='enabled'){const _0x3c1e97=configpath+_0xbeb365(0x12b)+_0xaea4cd['botID']+'-config.json',_0x2ac573=fs[_0xbeb365(0x1a4)](_0x3c1e97);let _0x4aa1cf;if(_0x2ac573){const _0x1354ba=fs[_0xbeb365(0x191)](_0x3c1e97);try{const _0x1816ac=JSON[_0xbeb365(0xfd)](_0x1354ba);_0x4aa1cf=_0x1816ac?_0x1816ac[_0xbeb365(0x178)][0x0][_0xbeb365(0x1e7)]:null;}catch(_0x55cb73){}}if(_0x4aa1cf)_0x1b45b6[_0xbeb365(0x1b3)](_0x4aa1cf);}});const _0x520793=[...new Set(_0x1b45b6)][_0x66dff1(0x280)]();return _0x520793;}async function initUser(){const _0xa3fe62=_0x7bd06e;if(!settings['userid']){const _0x9f38d1=uuidRandom();mixpanel[_0xa3fe62(0x1ea)](_0x9f38d1),updateSetting(_0xa3fe62(0x157),_0x9f38d1);}}async function initSecure(){const _0x17f50b=_0x7bd06e;let _0x1fb1ba=getSecure();if(!_0x1fb1ba['hasOwnProperty'](_0x17f50b(0x117))){let _0x10c8d7=await generateKeys();_0x1fb1ba[_0x17f50b(0x210)]=_0x10c8d7[_0x17f50b(0x210)],_0x1fb1ba[_0x17f50b(0x1f7)]=_0x10c8d7[_0x17f50b(0x1f7)],_0x1fb1ba[_0x17f50b(0x117)]=crypto[_0x17f50b(0x188)](0x20)['toString'](_0x17f50b(0x1c8));;storeSecure(_0x1fb1ba);}}function getSettings(){const _0x5f8403=_0x7bd06e;return dbSettings[_0x5f8403(0x137)]('settings')[_0x5f8403(0x107)]()||{};}function getSecure(){const _0x5ddb97=_0x7bd06e;return dbSecure[_0x5ddb97(0x137)](_0x5ddb97(0x25e))[_0x5ddb97(0x107)]()||{};}function getBlacklist(){const _0x4cf8fb=_0x7bd06e;return dbSecure[_0x4cf8fb(0x137)](_0x4cf8fb(0x140))[_0x4cf8fb(0x107)]()||[];}function broadcastToBots(_0x3e0ee2,_0xf4efc6){const _0x1c0f7a=_0x7bd06e;config[_0x1c0f7a(0x275)](_0xffe6d4=>{const _0x3d2ddb=_0x1c0f7a;if(_0xffe6d4[_0x3d2ddb(0x1d9)]==_0x3d2ddb(0x20a)&&_0xffe6d4['live']==_0x3d2ddb(0x25a)||_0xffe6d4[_0x3d2ddb(0x1d9)]==_0x3d2ddb(0x1a0)&&_0xffe6d4[_0x3d2ddb(0x27a)]==_0x3d2ddb(0x25a)){if(pid[_0xffe6d4[_0x3d2ddb(0x213)]])pid[_0xffe6d4[_0x3d2ddb(0x213)]][_0x3d2ddb(0x261)]({[_0x3e0ee2]:_0xf4efc6});}});}function storeSettings(_0x232d22,_0x17b6f2=![]){const _0x20ab6f=_0x7bd06e;_0x232d22={...settings,..._0x232d22};if(_0x17b6f2&&_0x232d22[_0x20ab6f(0x22a)]!=_0x20ab6f(0x12c)&&_0x232d22[_0x20ab6f(0x22a)]!=_0x20ab6f(0x1c4)&&_0x232d22[_0x20ab6f(0x22a)]!=''){const _0x7fc19f=crypt['decrypt'](secure[_0x20ab6f(0x1f7)],_0x232d22[_0x20ab6f(0x22a)])[_0x20ab6f(0x1d0)][_0x20ab6f(0x104)]('@')[0x0],_0x4892f7=bcrypt[_0x20ab6f(0x1e1)](_0x7fc19f,saltRounds);_0x232d22={..._0x232d22,'bbPassword':_0x4892f7};}if(_0x17b6f2&&_0x232d22[_0x20ab6f(0x249)]!='************'&&_0x232d22[_0x20ab6f(0x249)]!=_0x20ab6f(0x1c4)&&_0x232d22['telegramToken']!=''){const _0x2c88ec=crypt[_0x20ab6f(0x10e)](secure[_0x20ab6f(0x1f7)],_0x232d22[_0x20ab6f(0x249)])['message'][_0x20ab6f(0x104)]('@')[0x0];_0x232d22={..._0x232d22,'telegramToken':_0x2c88ec};}const _0x5e2c4d=_0x232d22[_0x20ab6f(0x249)]!=_0x20ab6f(0x12c)&&_0x232d22[_0x20ab6f(0x249)]!=settings[_0x20ab6f(0x249)]||_0x232d22[_0x20ab6f(0x1f8)]!=settings['telegramUsername'],_0xc7a8d0=_0x232d22['telegramToken']==''||_0x232d22[_0x20ab6f(0x1f8)]=='';if(_0x5e2c4d)_0x232d22[_0x20ab6f(0x171)]=_0x20ab6f(0x19f);for(const [_0x3bb497,_0x3bdb31]of Object['entries'](_0x232d22)){if(_0x3bb497==_0x20ab6f(0x249)&&_0x3bdb31=='************'){_0x232d22['telegramToken']=settings[_0x20ab6f(0x249)];continue;};if(_0x3bb497==_0x20ab6f(0x22a)&&_0x3bdb31==_0x20ab6f(0x12c)){_0x232d22[_0x20ab6f(0x22a)]=settings['bbPassword'];continue;};dbSettings['set']('settings.'+_0x3bb497,_0x3bdb31)[_0x20ab6f(0x15c)]();}settings=_0x232d22,io['to'](_0x20ab6f(0x11d))['emit']('settings',cleanSettings()),broadcastToBots(_0x20ab6f(0x1e8),settings['timeshift']),broadcastToBots(_0x20ab6f(0x1b7),settings[_0x20ab6f(0x1b7)]);if(_0x5e2c4d&&!_0xc7a8d0)initTelegram();if(_0x5e2c4d&&_0xc7a8d0)disableTelegram();getAllClients()[_0x20ab6f(0x275)](_0x1fba42=>{const _0x5ae7fb=_0x20ab6f;getSocket(_0x1fba42['id'])[_0x5ae7fb(0xd7)](_0x5ae7fb(0x1d9),{'access':{'allow':![],'reason':_0x5ae7fb(0x133),'token':null}});});}function updateSetting(_0x47417f,_0x452bb0){const _0x426166=_0x7bd06e;dbSettings[_0x426166(0x27e)](_0x426166(0x251)+_0x47417f,_0x452bb0)[_0x426166(0x15c)](),settings=getSettings(),io['to'](_0x426166(0x11d))['emit'](_0x426166(0x135),cleanSettings());}function storeSecure(_0x98eac1){const _0x4470b9=_0x7bd06e;dbSecure[_0x4470b9(0x137)]('secure')[_0x4470b9(0x1b3)](_0x98eac1)[_0x4470b9(0x15c)](),secure=_0x98eac1;}function addBlacklist(_0x8d0a8f){const _0xad7b1f=_0x7bd06e;cleanBlacklist();let _0x3f7ab5;devices[_0x8d0a8f][_0xad7b1f(0x1f1)]?_0x3f7ab5=Math[_0xad7b1f(0x19c)](devices[_0x8d0a8f][_0xad7b1f(0x1f1)]['expiry'],loginExpiry):_0x3f7ab5=loginExpiry,dbSecure[_0xad7b1f(0x137)](_0xad7b1f(0x140))[_0xad7b1f(0x1b3)]({'expiry':new Date()[_0xad7b1f(0x14a)]()+_0x3f7ab5*0x3c*0x3e8,'token':devices[_0x8d0a8f][_0xad7b1f(0x29c)][_0xad7b1f(0x1d1)]})[_0xad7b1f(0x15c)](),blacklist=dbSecure[_0xad7b1f(0x137)](_0xad7b1f(0x140))[_0xad7b1f(0x107)]();}function cleanBlacklist(){const _0x5e866c=_0x7bd06e;let _0x2c63b6=dbSecure[_0x5e866c(0x137)](_0x5e866c(0x140))[_0x5e866c(0x270)]()[_0x5e866c(0x107)](),_0x3da922=new Date()['getTime']();_0x2c63b6[_0x5e866c(0x275)](_0x2e1760=>{const _0x266ac3=_0x5e866c;_0x2e1760[_0x266ac3(0x150)]<_0x3da922&&dbSecure['get'](_0x266ac3(0x140))[_0x266ac3(0x1f4)]({'expiry':_0x2e1760[_0x266ac3(0x150)]})[_0x266ac3(0x15c)]();});}function initStates(){const _0x3ceb56=_0x7bd06e;let _0x3dc0bf=getConfiguration();_0x3dc0bf[_0x3ceb56(0x275)](_0x1b4993=>{const _0x43d2a3=_0x3ceb56;_0x1b4993[_0x43d2a3(0x27a)]='stopped';}),storeConfiguration(_0x3dc0bf);}function onKeys(){const _0x501e0e=new RSA();return new Promise(_0x3f47e0=>{const _0x276566=_0x257d;_0x501e0e['generateKeyPairAsync']()[_0x276566(0x149)](_0x345d06=>{_0x3f47e0(_0x345d06);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xa1ad71=_0x7bd06e;let _0x144f43=getSettings(),_0x8414d6=![];!_0x144f43[_0xa1ad71(0x298)](_0xa1ad71(0x12f))&&(_0x144f43['lastmsgtelegram']=0x0,_0x8414d6=!![]);!_0x144f43[_0xa1ad71(0x298)](_0xa1ad71(0x289))&&(_0x144f43[_0xa1ad71(0x289)]=0x0,_0x8414d6=!![]);!_0x144f43[_0xa1ad71(0x298)]('latestversion')&&(_0x144f43[_0xa1ad71(0x25f)]=_0xa1ad71(0x1e3),_0x8414d6=!![]);!_0x144f43[_0xa1ad71(0x298)](_0xa1ad71(0x1b7))&&(_0x144f43[_0xa1ad71(0x1b7)]=![],_0x8414d6=!![]);if(_0x8414d6)storeSettings(_0x144f43);try{fs[_0xa1ad71(0x147)](configbackuppath,{'withFileTypes':!![]})[_0xa1ad71(0x275)](_0x19c15d=>{const _0x585a96=_0xa1ad71;if(!_0x19c15d[_0x585a96(0x248)]()){if(!_0x19c15d[_0x585a96(0x159)]['startsWith'](_0x585a96(0x122)))fs['unlinkSync'](configbackuppath+_0x19c15d[_0x585a96(0x159)]);}else fs['rmSync'](configbackuppath+_0x19c15d[_0x585a96(0x159)],{'recursive':!![]});});}catch(_0x429b05){logger[_0xa1ad71(0x18c)](_0xa1ad71(0x276),_0x429b05);}}function storeConfiguration(_0xc3fe26){const _0x3d13bc=_0x7bd06e;dbConfig['get']('bots')['remove']()['write'](),_0xc3fe26[_0x3d13bc(0x275)](_0x526716=>{const _0x20e0ad=_0x3d13bc;delete _0x526716[_0x20e0ad(0x273)];}),dbConfig['get'](_0x3d13bc(0x247))['push'](..._0xc3fe26)[_0x3d13bc(0x15c)](),config=_0xc3fe26;}function resetPassword(){const _0x20e9dd=_0x7bd06e;tgBot&&settings['telegramChatId']&&(tgBot[_0x20e9dd(0x155)](_0x20e9dd(0xc9)),tgBot[_0x20e9dd(0x170)](settings['telegramChatId'],_0x20e9dd(0x17f),{'parse_mode':_0x20e9dd(0x200),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x20e9dd(0x286)},{'text':'no','callback_data':'no'}]]}})[_0x20e9dd(0x1db)](_0x156001=>{telegramError(_0x156001);}),tgBot['on'](_0x20e9dd(0xc9),async _0x3ab8c6=>{const _0x3f49b1=_0x20e9dd,_0x5b98e4=_0x3ab8c6[_0x3f49b1(0x23e)],_0x2cc6f9=_0x3ab8c6['message'];tgBot[_0x3f49b1(0x255)](_0x3ab8c6['id'])[_0x3f49b1(0x149)](async()=>{const _0x6b7975=_0x3f49b1;if(_0x5b98e4!='no'){const _0x3e44f7=0xf,_0x45c547=_0x6b7975(0x1cc),_0x3d2ca1=Array[_0x6b7975(0xf6)](crypto[_0x6b7975(0x29f)](new Uint32Array(_0x3e44f7)))['map'](_0x538b28=>_0x45c547[_0x538b28%_0x45c547[_0x6b7975(0x143)]])[_0x6b7975(0x1e0)](''),_0x1da508=bcrypt['hashSync'](_0x3d2ca1,saltRounds);storeSettings({'bbPassword':_0x1da508}),await tgBot['sendMessage'](_0x2cc6f9[_0x6b7975(0x220)]['id'],_0x6b7975(0x125)+_0x3d2ca1,{'parse_mode':'HTML'})[_0x6b7975(0x1db)](_0x1f8d44=>{telegramError(_0x1f8d44);});}else await tgBot[_0x6b7975(0x170)](_0x2cc6f9[_0x6b7975(0x220)]['id'],_0x6b7975(0x263))['catch'](_0xb99a40=>{telegramError(_0xb99a40);});}),tgBot[_0x3f49b1(0x155)]('callback_query');}));}async function confirmRestore(_0x514881,_0x1d8025){const _0x269bfb=_0x7bd06e;io['to'](_0x269bfb(0x11d))['emit']('notification',_0x269bfb(0x180),_0x269bfb(0x1b4)),tgBot&&settings[_0x269bfb(0x10a)]&&(tgBot[_0x269bfb(0x155)](_0x269bfb(0xc9)),await tgBot[_0x269bfb(0x170)](settings['telegramChatId'],_0x269bfb(0x1d4),{'parse_mode':_0x269bfb(0x200),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x269bfb(0x286)},{'text':'no','callback_data':'no'}]]}})[_0x269bfb(0x1db)](_0x351a6e=>{telegramError(_0x351a6e);}),tgBot['on']('callback_query',async _0xf98717=>{const _0x34727a=_0x269bfb,_0xe2d0f4=_0xf98717[_0x34727a(0x23e)],_0x13004c=_0xf98717[_0x34727a(0x1d0)];tgBot[_0x34727a(0x255)](_0xf98717['id'])[_0x34727a(0x149)](async()=>{const _0x43f5c2=_0x34727a;_0xe2d0f4==_0x43f5c2(0x286)?(await tgBot['sendMessage'](_0x13004c[_0x43f5c2(0x220)]['id'],_0x43f5c2(0x229),{'parse_mode':_0x43f5c2(0x200)})[_0x43f5c2(0x1db)](_0x1adb3f=>{telegramError(_0x1adb3f);}),unzipFile(_0x514881,_0x1d8025)):(logger[_0x43f5c2(0x18c)](_0x43f5c2(0x1ff)),await tgBot[_0x43f5c2(0x170)](_0x13004c[_0x43f5c2(0x220)]['id'],_0x43f5c2(0x1ff))[_0x43f5c2(0x1db)](_0xba9870=>{telegramError(_0xba9870);}));}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x4a3955=_0x7bd06e,_0x59855b=new Date();return _0x59855b[_0x4a3955(0x226)]()+'/'+(_0x59855b[_0x4a3955(0xd5)]()+0x1)[_0x4a3955(0x1f2)]()[_0x4a3955(0x1cd)](0x2,'0')+'/'+_0x59855b[_0x4a3955(0x1da)]()[_0x4a3955(0x1f2)]()[_0x4a3955(0x1cd)](0x2,'0')+'\x20'+_0x59855b['getHours']()[_0x4a3955(0x1f2)]()['padStart'](0x2,'0')+':'+_0x59855b[_0x4a3955(0x22c)]()['toString']()['padStart'](0x2,'0')+':'+_0x59855b['getSeconds']()[_0x4a3955(0x1f2)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x46b693=_0x7bd06e,_0x483541=shiftedTime();return _0x483541['getFullYear']()+'/'+(_0x483541[_0x46b693(0xd5)]()+0x1)[_0x46b693(0x1f2)]()[_0x46b693(0x1cd)](0x2,'0')+'/'+_0x483541[_0x46b693(0x1da)]()[_0x46b693(0x1f2)]()[_0x46b693(0x1cd)](0x2,'0')+'\x20'+_0x483541[_0x46b693(0x1ee)]()['toString']()[_0x46b693(0x1cd)](0x2,'0')+':'+_0x483541[_0x46b693(0x22c)]()['toString']()[_0x46b693(0x1cd)](0x2,'0')+':'+_0x483541[_0x46b693(0x237)]()[_0x46b693(0x1f2)]()[_0x46b693(0x1cd)](0x2,'0');}function getCleanTimeStamp(){const _0x3e8eb4=_0x7bd06e,_0x4c8a10=shiftedTime();return _0x4c8a10['getFullYear']()+(_0x4c8a10[_0x3e8eb4(0xd5)]()+0x1)[_0x3e8eb4(0x1f2)]()[_0x3e8eb4(0x1cd)](0x2,'0')+_0x4c8a10['getDate']()[_0x3e8eb4(0x1f2)]()[_0x3e8eb4(0x1cd)](0x2,'0')+'-'+_0x4c8a10[_0x3e8eb4(0x1ee)]()['toString']()[_0x3e8eb4(0x1cd)](0x2,'0')+_0x4c8a10['getMinutes']()[_0x3e8eb4(0x1f2)]()[_0x3e8eb4(0x1cd)](0x2,'0')+_0x4c8a10[_0x3e8eb4(0x237)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x13e0c8=_0x7bd06e,_0x75c7f6=new Date();let _0x315566=_0x75c7f6;if(settings[_0x13e0c8(0x1e8)]&&settings[_0x13e0c8(0x1e8)]!==0x0)_0x315566=fns[_0x13e0c8(0x164)](_0x75c7f6,{'hours':settings[_0x13e0c8(0x1e8)]});return _0x315566;}function startScheduler(){const _0x45d204=_0x7bd06e,_0x1da16d=new Date()[_0x45d204(0x201)](),_0x53568f=shiftedTime()[_0x45d204(0x1ee)]();_0x53568f==0x4&&backupConfigFiles();_0x53568f==0x0&&rotateLogFiles();_0x1da16d%0x6==0x0&&triggerAnalytics();_0x1da16d%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x558111){const _0x1c9aec=_0x7bd06e;logger[_0x1c9aec(0x18c)](_0x1c9aec(0xd1)+_0x558111);const _0x58a964=getBotsWithMode();_0x58a964[_0x1c9aec(0x143)]>0x0?confirmRestore(configbackuppath,_0x558111):unzipFile(configbackuppath,_0x558111);}async function getBackupFiles(_0x54706f=null){const _0x521bae=_0x7bd06e;let _0x4fff02=[],_0x3f8ab2=fs[_0x521bae(0x147)](configbackuppath,{'withFileTypes':!![]});_0x3f8ab2[_0x521bae(0x280)]((_0x1d230a,_0x1552ef)=>_0x1d230a[_0x521bae(0x159)]<_0x1552ef[_0x521bae(0x159)]?0x1:_0x1552ef[_0x521bae(0x159)]<_0x1d230a[_0x521bae(0x159)]?-0x1:0x0),_0x3f8ab2[_0x521bae(0x275)](_0x4a6c4b=>{const _0x11b976=_0x521bae;if(!_0x4a6c4b['isDirectory']()&&_0x4a6c4b[_0x11b976(0x159)]['startsWith'](_0x11b976(0x122))&&_0x4a6c4b[_0x11b976(0x159)][_0x11b976(0xd2)](_0x11b976(0x28c))){const _0xa2103c=formatDate(fs['statSync'](configbackuppath+_0x4a6c4b[_0x11b976(0x159)])[_0x11b976(0x267)]);_0x4fff02[_0x11b976(0x1b3)]({'name':_0x4a6c4b[_0x11b976(0x159)],'mtime':_0xa2103c});}});if(_0x54706f)io['to'](_0x54706f)[_0x521bae(0xd7)]('backup-files',_0x4fff02);else return _0x4fff02;}async function backupConfigFiles(){const _0x1154da=_0x7bd06e;await zipFiles(_0x1154da(0x182));const _0x46607f=getCleanTimeStamp();fs[_0x1154da(0x158)](zippath+_0x1154da(0x234),configbackuppath+(_0x1154da(0x122)+_0x46607f+'.zip'));let _0x30b0df=fs[_0x1154da(0x147)](configbackuppath,{'withFileTypes':!![]});_0x30b0df[_0x1154da(0x280)]((_0x45c549,_0x359490)=>_0x45c549['name']<_0x359490[_0x1154da(0x159)]?0x1:_0x359490[_0x1154da(0x159)]<_0x45c549['name']?-0x1:0x0),_0x30b0df[_0x1154da(0x143)]>maxBackups&&fs[_0x1154da(0x297)](configbackuppath+_0x30b0df[_0x30b0df['length']-0x1][_0x1154da(0x159)]);}function rotateLogFiles(){const _0x45b3d1=_0x7bd06e,_0xed0ec6=fs[_0x45b3d1(0x23d)](logspath+_0x45b3d1(0x202)),_0x512ffc=_0xed0ec6[_0x45b3d1(0x162)]/0x400;if(_0x512ffc>0x64){let _0x5f3176=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x5f3176[_0x45b3d1(0x280)]((_0xf280a5,_0x31bf63)=>_0xf280a5[_0x45b3d1(0x159)]<_0x31bf63[_0x45b3d1(0x159)]?0x1:_0x31bf63[_0x45b3d1(0x159)]<_0xf280a5[_0x45b3d1(0x159)]?-0x1:0x0),_0x5f3176[_0x45b3d1(0x275)](_0x257a7e=>{const _0x246803=_0x45b3d1;if(_0x257a7e[_0x246803(0x159)]=='output-002.log')fs['copyFileSync'](logspath+_0x257a7e[_0x246803(0x159)],logspath+_0x246803(0x1f6));if(_0x257a7e[_0x246803(0x159)]==_0x246803(0x113))fs[_0x246803(0x158)](logspath+_0x257a7e[_0x246803(0x159)],logspath+'output-002.log');_0x257a7e[_0x246803(0x159)]==_0x246803(0x202)&&(fs[_0x246803(0x158)](logspath+_0x257a7e[_0x246803(0x159)],logspath+_0x246803(0x113)),fs[_0x246803(0xcb)](logspath+_0x257a7e[_0x246803(0x159)],''));});}}async function zipFiles(_0xeb8561){const _0x390db2=_0x7bd06e;let _0x3f8632;if(_0xeb8561==_0x390db2(0x2a8))_0x3f8632=logspath;if(_0xeb8561==_0x390db2(0x18b))_0x3f8632=configpath;if(_0xeb8561==_0x390db2(0x182))_0x3f8632=configpath;let _0x25d768=fs[_0x390db2(0x147)](_0x3f8632,{'withFileTypes':!![]});const _0xa33091=new require(_0x390db2(0x1f5))();_0x25d768['forEach'](_0x559fa8=>{const _0x30ac25=_0x390db2;if(!_0x559fa8[_0x30ac25(0x248)]()){let _0x5cf1da=fs['readFileSync'](_0x3f8632+_0x559fa8[_0x30ac25(0x159)]);if(_0xeb8561==_0x30ac25(0x18b)){const _0xad7626=/^bot-[0-9]{3}-config.json$/,_0x11a500=_0xad7626[_0x30ac25(0x152)](_0x559fa8[_0x30ac25(0x159)]);if(_0x11a500){const _0x22fd35=JSON[_0x30ac25(0xfd)](_0x5cf1da);if(_0x22fd35[_0x30ac25(0x178)][0x0]){_0x22fd35[_0x30ac25(0x178)][0x0][_0x30ac25(0xdc)]=_0x30ac25(0x1c4),_0x22fd35[_0x30ac25(0x178)][0x0]['apiSecret']=_0x30ac25(0x1c4);if(_0x22fd35[_0x30ac25(0x178)][0x0][_0x30ac25(0x29d)])_0x22fd35[_0x30ac25(0x178)][0x0]['apiPassword']=_0x30ac25(0x1c4);}_0x5cf1da=JSON['stringify'](_0x22fd35,null,0x2);}if(_0x559fa8[_0x30ac25(0x159)]==_0x30ac25(0xd4)){const _0x589594=JSON[_0x30ac25(0xfd)](_0x5cf1da);if(_0x589594[_0x30ac25(0x135)][_0x30ac25(0x27c)])_0x589594['settings'][_0x30ac25(0x27c)]=![];if(_0x589594[_0x30ac25(0x135)][_0x30ac25(0x22a)])_0x589594[_0x30ac25(0x135)][_0x30ac25(0x22a)]=_0x30ac25(0x1c4);if(_0x589594[_0x30ac25(0x135)][_0x30ac25(0x249)])_0x589594[_0x30ac25(0x135)]['telegramToken']=_0x30ac25(0x1c4);if(_0x589594['settings'][_0x30ac25(0x10a)])_0x589594[_0x30ac25(0x135)]['telegramChatId']=null;_0x5cf1da=JSON[_0x30ac25(0x11a)](_0x589594,null,0x2);}if(_0x559fa8[_0x30ac25(0x159)]!=_0x30ac25(0x227))_0xa33091[_0x30ac25(0x2a1)](_0x559fa8[_0x30ac25(0x159)],_0x5cf1da);}else _0xa33091[_0x30ac25(0x2a1)](_0x559fa8[_0x30ac25(0x159)],_0x5cf1da);}});const _0x4e26b4=_0xa33091['generate']({'base64':![],'compression':'DEFLATE'});fs[_0x390db2(0xcb)](zippath+(_0xeb8561+_0x390db2(0x28c)),_0x4e26b4,_0x390db2(0x111));}async function unzipFile(_0x6cad33,_0x4e1107){const _0xf43711=_0x7bd06e;fs[_0xf43711(0x147)](configpath,{'withFileTypes':!![]})['forEach'](_0x59aca2=>{const _0x499afb=_0xf43711;if(!_0x59aca2[_0x499afb(0x248)]())fs['rmSync'](configpath+_0x59aca2[_0x499afb(0x159)]);});const _0x558811=fs[_0xf43711(0x191)](_0x6cad33+_0x4e1107,_0xf43711(0x111)),_0x5ed8e1=new require(_0xf43711(0x1f5))(_0x558811,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x5ed8e1[_0xf43711(0xe5)])['forEach'](_0x558f75=>{const _0x2cca1f=_0xf43711,_0x3254c8=_0x5ed8e1[_0x2cca1f(0xe5)][_0x558f75];fs[_0x2cca1f(0xcb)](configpath+_0x3254c8[_0x2cca1f(0x159)],_0x3254c8[_0x2cca1f(0x15f)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0xf43711(0x275)](_0x4ac503=>{const _0x4c5474=_0xf43711;if(!_0x4ac503[_0x4c5474(0x248)]())fs[_0x4c5474(0xcd)](temppath+_0x4ac503[_0x4c5474(0x159)]);}),logger['debug'](_0xf43711(0xe1)),process[_0xf43711(0x261)]({'restore':!![]},_0x5184f2=>{});}async function getPublicIp(){const _0x361ece=_0x7bd06e;try{const _0x37c102=await axios[_0x361ece(0x137)](_0x361ece(0x217));publicip=_0x37c102['data']['ip'];}catch(_0x1c0aec){}}async function triggerAnalytics(){const _0x3d087a=_0x7bd06e;if(!publicip)await getPublicIp();const _0x4c5961=getBotsWithMode();let _0x27e254=0x0;_0x4c5961[_0x3d087a(0x275)](_0x4732d7=>{const _0x38ef03=_0x3d087a;if(_0x4732d7[_0x38ef03(0x1d9)]===_0x38ef03(0x20a))_0x27e254++;});const _0x36ab01=getBotExchanges();mixpanel['track'](_0x3d087a(0x1b8),{'distinct_id':settings[_0x3d087a(0x157)],'ip':publicip,'version':serverversion,'numbots':_0x4c5961[_0x3d087a(0x143)],'numbotsenabled':_0x27e254,'exchanges':_0x36ab01,'environment':environment});}async function getMessages(){const _0x2b20b4=_0x7bd06e,_0x2e14ab=_0x2b20b4(0x16a),_0x4b2afd=new GraphQLClient(_0x2e14ab),_0x2933ae={'authorization':_0x2b20b4(0x221)},_0x24aa93=serverversion[_0x2b20b4(0x104)]('.'),_0x36a3fd=_0x24aa93[0x0]+'.'+_0x24aa93[0x1],_0x4b70da=Math[_0x2b20b4(0x16b)](settings[_0x2b20b4(0x12f)],settings[_0x2b20b4(0x289)]),_0x2e587b={'last':parseInt(_0x4b70da),'bbm':_0x36a3fd},_0x52fdf9=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3030a3;try{_0x3030a3=await _0x4b2afd['request'](_0x52fdf9,_0x2e587b,_0x2933ae);}catch(_0x5764c0){}if(_0x3030a3&&_0x3030a3[_0x2b20b4(0x14c)]){let _0x463151=settings['lastmsgtelegram'];newMessages=[];for(const _0x51526c of _0x3030a3[_0x2b20b4(0x14c)]){newMessages[_0x2b20b4(0x1b3)](_0x51526c);let _0x45b235=![];_0x51526c[_0x2b20b4(0x1fe)]&&(updateSetting(_0x2b20b4(0x25f),_0x51526c[_0x2b20b4(0x1fe)]),_0x45b235=isNewerVersion(serverversion,_0x51526c[_0x2b20b4(0x1fe)])||serverversion==_0x51526c['bbvNew']);if(!_0x45b235&&_0x51526c[_0x2b20b4(0xff)]>_0x463151){if(_0x51526c['bbvReceive']===_0x2b20b4(0x1a3)||serverversion[_0x2b20b4(0x20e)](_0x51526c[_0x2b20b4(0x26b)])){let _0x4740b0=''+_0x51526c[_0x2b20b4(0x1a1)]+'\x0a\x0a'+_0x51526c['message'];const _0x279d8e=await sendTelegramMsg(toTelegramMarkdown(_0x4740b0),'Markdown');if(_0x279d8e)_0x463151=_0x51526c[_0x2b20b4(0xff)];}}}updateAvailable=isNewerVersion(settings[_0x2b20b4(0x25f)],serverversion),updateSetting(_0x2b20b4(0x12f),_0x463151),emitMessages();}}function emitMessages(){const _0x19419e=_0x7bd06e,_0x54659c=settings['lastmsgemitted'];let _0x40786d=[];newMessages[_0x19419e(0x275)](_0x5f91d0=>{const _0x2e6f1d=_0x19419e;_0x5f91d0[_0x2e6f1d(0xff)]>_0x54659c&&_0x40786d['push'](_0x5f91d0);}),_0x40786d[_0x19419e(0x143)]>0x0&&getAllClients()[_0x19419e(0x275)](_0x479942=>{const _0x483e90=_0x19419e;getSocket(_0x479942['id'])[_0x483e90(0xd7)](_0x483e90(0x1d0),_0x40786d);});}function confirmMessage(_0x5e464e){const _0x7168f7=_0x7bd06e;updateSetting(_0x7168f7(0x289),Number(_0x5e464e));}function isNewerVersion(_0x6e2fcb,_0x2d6b26){const _0x28514b=_0x7bd06e,_0x182ec0=_0x2d6b26['split']('.'),_0x7479d6=_0x6e2fcb['split']('.');for(var _0x18c006=0x0;_0x18c006<_0x7479d6[_0x28514b(0x143)];_0x18c006++){const _0x4ced31=~~_0x7479d6[_0x18c006],_0x263dc8=~~_0x182ec0[_0x18c006];if(_0x4ced31>_0x263dc8)return!![];if(_0x4ced31<_0x263dc8)return![];}return![];}function toTelegramMarkdown(_0x47a669){const _0x58a6cd=_0x7bd06e,_0x5cc01e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2b4d2a=/\*{2}(.+?)\*{2}/gim;return _0x47a669=_0x47a669[_0x58a6cd(0x131)](_0x5cc01e,'$1_$2_$3')[_0x58a6cd(0x131)](_0x2b4d2a,_0x58a6cd(0x1bf)),_0x47a669;}async function validateConfigFile(){const _0x166643=_0x7bd06e,_0x539a9f=dbConfig[_0x166643(0x137)](_0x166643(0x247))['sortBy'](_0x166643(0x213))['value']()||[];if(_0x539a9f['length']==0x0){let _0x4c7cc7=0x0,_0x3039bb=[];const _0x5f5bc9=/^bot-([0-9]{3})-config.json$/,_0x1a4196=fs['readdirSync'](configpath);_0x1a4196[_0x166643(0x275)](_0x3caad8=>{const _0x599b70=_0x166643,_0x4bfe49=_0x5f5bc9[_0x599b70(0x21b)](_0x3caad8);if(_0x4bfe49){const _0x14e65c=_0x4bfe49[0x1];let _0x16b2c6=getBotAttributes(_0x14e65c);_0x3039bb[_0x599b70(0x1b3)]({'botID':_0x14e65c,'botname':_0x16b2c6[_0x599b70(0x232)],'status':_0x599b70(0x1ba),'live':_0x599b70(0x228)}),_0x4c7cc7++;}}),_0x4c7cc7!=0x0&&(dbConfig[_0x166643(0x137)](_0x166643(0x247))[_0x166643(0x13d)](_0x3039bb)[_0x166643(0x15c)](),config=_0x3039bb,restoredConfigFile=_0x4c7cc7);}}async function restoreConfigNotify(_0x49b945){const _0x2b1362=_0x7bd06e;let _0x3eb9cb;if(restoredConfigFile==0x1)_0x3eb9cb=_0x2b1362(0x1c7);else _0x3eb9cb=_0x2b1362(0x153);if(_0x49b945)io['to'](_0x2b1362(0x11d))[_0x2b1362(0xd7)]('notification',_0x3eb9cb);else{logger[_0x2b1362(0x11f)]('-----------------------------------------------------------------------------------'),logger['simple'](_0x3eb9cb),logger['simple'](_0x2b1362(0x2aa)),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings[_0x2b1362(0x171)]!=_0x2b1362(0x10d))tgBot['sendMessage'](settings['telegramChatId'],_0x2b1362(0x2ab)+_0x3eb9cb)[_0x2b1362(0x1db)](_0x4f8cfc=>{telegramError(_0x4f8cfc);});}}function validateCredentials(_0x2f68b8,_0x151f33){const _0x19a868=_0x7bd06e;if(_0x2f68b8[_0x19a868(0x271)]==settings[_0x19a868(0x1fd)]&&bcrypt['compareSync'](_0x2f68b8[_0x19a868(0x278)],settings[_0x19a868(0x22a)])){if(settings[_0x19a868(0x27b)])return{'allow':![],'reason':_0x19a868(0x108),'token':null};else{const _0x55714b=generateLoginToken(_0x151f33);return{'allow':!![],'reason':_0x19a868(0xce),'token':_0x55714b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x54ed28){const _0x4e2d33=_0x7bd06e,_0x4b46c7=generateLoginToken(_0x54ed28);return{'allow':!![],'reason':_0x4e2d33(0xce),'token':_0x4b46c7};}function validateAccess(_0x3444dd,_0x40870d,_0x4357d9){const _0x49555e=_0x7bd06e,_0x59c1af=_0x4357d9?_0x4357d9:devices[_0x40870d]['ip'];let _0x8b2758;const _0x5e90d5=_0x4a5079=>{const _0xa4e13=_0x257d;if(settings[_0xa4e13(0x27c)]){if(settings[_0xa4e13(0x27b)]){if(telegram2FaApproved(_0x40870d)){const _0x41365b=generateLoginToken(_0x40870d);return{'allow':!![],'reason':_0xa4e13(0x168),'token':_0x41365b};}else return{'allow':![],'reason':_0xa4e13(0x272),'token':null};}else return _0x8b2758=validToken(_0x4a5079,_0x40870d),_0x8b2758[_0xa4e13(0x298)](_0xa4e13(0x1b4))?{'allow':!![],'reason':_0xa4e13(0x101),'token':_0x4a5079}:{'allow':![],'reason':_0xa4e13(0x272),'token':null};}else return{'allow':!![],'reason':_0xa4e13(0x195),'token':null};};if(settings['whitelistEnabled']){let _0x389995=[...settings[_0x49555e(0x142)],_0x49555e(0x192),_0x49555e(0x185),'127.0.0.1'];if(_0x389995[_0x49555e(0x284)](_0x59c1af))return _0x5e90d5(_0x3444dd);else{_0x8b2758=validToken(_0x3444dd,_0x40870d);if(_0x8b2758[_0x49555e(0x298)]('success'))return _0x5e90d5(_0x3444dd);else{if(telegramIpApproved(_0x40870d)){const _0x4cefd1=generateToken(_0x40870d);return _0x8b2758=_0x5e90d5(_0x3444dd),_0x8b2758[_0x49555e(0x194)]?{'allow':!![],'reason':_0x49555e(0x116),'token':_0x4cefd1}:_0x8b2758;}else return settings[_0x49555e(0x21a)]?{'allow':![],'reason':_0x49555e(0x21e),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x5e90d5(_0x3444dd);}function timelyDecrypt(_0x507955,_0x527af2=!![]){const _0x2ed8bb=_0x7bd06e;if(_0x507955)try{const _0x32d87c=crypt[_0x2ed8bb(0x10e)](secure['privateKey'],_0x507955)['message'],_0x25e053=_0x32d87c[_0x2ed8bb(0x104)]('@')[0x0],_0x1c2469=_0x32d87c[_0x2ed8bb(0x104)]('@')[0x1],_0xa487eb=new Date()[_0x2ed8bb(0x14a)]();if(_0x527af2){if(_0xa487eb-_0x1c2469<maxSecretAge*0x3e8)return _0x25e053;else return![];}else return _0x25e053;}catch(_0x2d026f){return![];}else return![];}const validToken=(_0x5dd89c,_0x5420dd)=>{const _0x3b407a=_0x7bd06e,_0x45d7b1=devices[_0x5420dd]['ip'];if(!_0x5dd89c)return{'error':_0x3b407a(0xde)};for(let _0x4a9374 of blacklist){if(_0x4a9374[_0x3b407a(0x1d1)]==_0x5dd89c)return{'error':_0x3b407a(0x18d)};}let _0x3789d6;try{_0x3789d6=jwt[_0x3b407a(0x2a6)](_0x5dd89c,secure[_0x3b407a(0x117)]+_0x5420dd);}catch{return{'error':_0x3b407a(0x1ce)};}if(!_0x3789d6['hasOwnProperty'](_0x3b407a(0x28d))&&!_0x3789d6[_0x3b407a(0x298)](_0x3b407a(0x271))||!_0x3789d6[_0x3b407a(0x298)]('exp'))return{'error':_0x3b407a(0x240)};if(!_0x3789d6[_0x3b407a(0x298)](_0x3b407a(0x271))&&_0x3789d6[_0x3b407a(0x298)]('clientip')){const {clientip:_0x8047cd}=_0x3789d6;return _0x45d7b1==_0x8047cd?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3b407a(0x1f9)};}else{if(_0x3789d6['hasOwnProperty'](_0x3b407a(0x271))&&_0x3789d6[_0x3b407a(0x298)]('clientip')){const {username:_0x466b3e,clientip:_0x23fc2b}=_0x3789d6;return settings[_0x3b407a(0x1fd)]==_0x466b3e&&_0x45d7b1==_0x23fc2b?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x23d2cc=>{const _0xb73c11=_0x7bd06e;if(_0x23d2cc){const _0x35905e=devices[_0x23d2cc]['ip'];return jwt[_0xb73c11(0x100)]({'username':settings[_0xb73c11(0x1fd)],'clientip':_0x35905e},secure[_0xb73c11(0x117)]+_0x23d2cc,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x306d74=>{const _0x4d4efc=_0x7bd06e;if(_0x306d74){const _0x352ac1=devices[_0x306d74]['ip'];return jwt[_0x4d4efc(0x100)]({'clientip':_0x352ac1},secure['secret']+_0x306d74,{'expiresIn':devices[_0x306d74]['telegramIpApproval'][_0x4d4efc(0x150)]*0x3c});}else return![];},telegramIpApproved=_0x50e730=>{const _0x25cfc9=_0x7bd06e;let _0x16bad2=![];return devices[_0x50e730]['telegramIpApproval']&&devices[_0x50e730]['telegramIpApproval'][_0x25cfc9(0x150)]!=_0x25cfc9(0x29b)&&(_0x16bad2=devices[_0x50e730]['telegramIpApproval']['clientip']==devices[_0x50e730]['ip']&&new Date()[_0x25cfc9(0x14a)]()-devices[_0x50e730][_0x25cfc9(0x1f1)][_0x25cfc9(0x2a5)]<devices[_0x50e730][_0x25cfc9(0x1f1)][_0x25cfc9(0x150)]*0x3c*0x3e8),_0x16bad2;},telegram2FaApproved=_0x401d7f=>{const _0x8d3ce8=_0x7bd06e;let _0x547091=![];return devices[_0x401d7f][_0x8d3ce8(0x2a9)]&&devices[_0x401d7f][_0x8d3ce8(0x2a9)][_0x8d3ce8(0x150)]!=_0x8d3ce8(0x29b)&&(_0x547091=devices[_0x401d7f][_0x8d3ce8(0x2a9)][_0x8d3ce8(0x28d)]==devices[_0x401d7f]['ip']&&new Date()[_0x8d3ce8(0x14a)]()-devices[_0x401d7f][_0x8d3ce8(0x2a9)][_0x8d3ce8(0x2a5)]<devices[_0x401d7f][_0x8d3ce8(0x2a9)][_0x8d3ce8(0x150)]*0x3c*0x3e8),_0x547091;},normalizeIP=_0x5c1555=>{const _0x50420c=_0x7bd06e;let _0x4341ce=null,_0x433705=null;if(ipaddr[_0x50420c(0xcf)](_0x5c1555)){const _0x316a61=ipaddr[_0x50420c(0xfd)](_0x5c1555);_0x316a61['kind']()===_0x50420c(0x269)?(_0x316a61['isIPv4MappedAddress']()&&(_0x4341ce=_0x316a61['toIPv4Address']()[_0x50420c(0x1f2)]()),_0x433705=_0x316a61[_0x50420c(0x1f2)]()):(_0x4341ce=_0x316a61['toString'](),_0x433705=_0x316a61['toIPv4MappedAddress']()[_0x50420c(0x1f2)]());}return{'show':_0x4341ce?_0x4341ce:_0x433705,'store':_0x433705};};function formatDate(_0x3f3017){const _0x5c19fa=_0x7bd06e;return _0x3f3017[_0x5c19fa(0x226)]()+'/'+(_0x3f3017[_0x5c19fa(0xd5)]()+0x1)['toString']()[_0x5c19fa(0x1cd)](0x2,'0')+'/'+_0x3f3017[_0x5c19fa(0x1da)]()[_0x5c19fa(0x1f2)]()[_0x5c19fa(0x1cd)](0x2,'0')+'\x20'+_0x3f3017['getHours']()['toString']()[_0x5c19fa(0x1cd)](0x2,'0')+':'+_0x3f3017[_0x5c19fa(0x22c)]()[_0x5c19fa(0x1f2)]()[_0x5c19fa(0x1cd)](0x2,'0')+':'+_0x3f3017[_0x5c19fa(0x237)]()[_0x5c19fa(0x1f2)]()[_0x5c19fa(0x1cd)](0x2,'0');}function _0x3f08(){const _0x2a6c06=['NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','hex','\x1b[33m','version.json','Unauthorized\x20attempt\x20to\x20store\x20configuration','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','padStart','Invalid\x20authentication\x20token\x20(1)','mkdirSync','message','token','inherit','uuid-random','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','</b>\x20?','Starting\x20Balance\x20Bot\x20reinstallation','Unauthorized\x20attempt\x20to\x20download\x20','Unauthorized\x20attempt\x20to\x20log\x20out','status','getDate','catch','private','#RES#\x20if\x20running\x20locally\x0a','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','reset-password','join','hashSync','404\x20Not\x20Found','0.0.0','env','/:bot/portfolio','\x20|\x20user:\x20...','exchange','timeshift','Restarting\x20Bot\x20','alias','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','-results.json','Unauthorized\x20attempt\x20to\x20update\x20bot','getHours','Crypt','\x1b[0m','telegramIpApproval','toString','\x1b[36m','remove','node-zip','output-003.log','privateKey','telegramUsername','Invalid\x20IP\x20address','initclient','telegrammsg','\x20|\x20','bbUsername','bbvNew','Restore\x20process\x20aborted','HTML','getUTCHours','output-000.log','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','delete-bot','storeConfiguration','socket','get-logs','once','Deleted\x20Bot\x20','enabled','30\x20min','use','3000','startsWith','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','publicKey','Invalid\x20Telegram\x20token','telegramEnabled','botID','/metrics\x20-\x20show\x20bot\x20performance\x0a','config/','(((.+)+)+)+$','https://api.ipify.org?format=json','reinstall-bb','internal','temporaryAccessAllowed','exec','function','Unauthorized\x20attempt\x20to\x20confirm\x20message','2FA\x20required','3650pJYxOT','chat','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','logout','589277lPXIbs','getFullYear','bb-secure.json','stopped','Restoring\x20bot(s)\x20from\x20backup','bbPassword','temporary\x20access\x20timeout','getMinutes','reset-history','Disabled\x20Bot\x20','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','/enable\x20-\x20enable\x20notifications\x0a','48cuVsMF','botname','apply','backup-full.zip','\x1b[34m','update','getSeconds',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','ipc','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Enabled\x20Bot\x20','16049XMQAsc','statSync','data','args','Invalid\x20authentication\x20token\x20(2)','update-bot','string','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','emitHistory','axios','resetHistory','bots','isDirectory','telegramToken','store','index.html','Bot\x20','showConfig','init','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','1LBkfqD','settings.','listen','reinstall','\x1b[35m','answerCallbackQuery','/status\x20-\x20show\x20bot(s)\x20status\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','fork','Session\x20expired\x20for\x20user\x20...','running','slice','lowdb','kill','secure','latestversion','cancel-loading','send','-performance.json','Password\x20reset\x20rejected','Failed\x20to\x20download\x20','crypto','util','mtime','/update\x20-\x20update\x20Balance\x20Bot\x0a','ipv6','2693358aqdUsZ','bbvReceive','5475645gzjQJV','log','Orders','Allow\x20login\x20from\x20IP\x20address\x20<b>','cloneDeep','username','login\x20required','mode','toggle-bot-mode','forEach','Error\x20removing\x20old\x20backup\x20files:','started','password','search','live','f2aRequired','loginRequired','node','set','5\x20min','sort','order','sockets','\x20only\x0a','includes','store-configuration','yes','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Network\x20Interfaces:','lastmsgemitted','164eHXoCA','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','.zip','clientip','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','headless','new-disabled','uuid','format','Ok,\x20will\x20send\x20order\x20notifications\x20only','login','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','logs/','unlinkSync','hasOwnProperty','Starting\x20bot\x20|\x20Bot\x20','build','reject','access','apiPassword','update-bb','randomFillSync','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','file','Notifications\x20disabled\x0a','environment','Unauthorized\x20attempt\x20to\x20get\x20portfolio','timestamp','verify',':\x20Bot\x20Mgr\x20>\x20','logs','telegram2FaApproval','-----------------------------------------------------------------------------------','Bot\x20Mgr\x20>\x20','callback_query','5xCDOko','writeFileSync','/:bot/configuration','rmSync','login\x20token\x20generated','isValid','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Restore\x20backup\x20file\x20','endsWith','sortBy','bb-settings.json','getMonth','cancelLoading','emit','/download/:type','get-messages','12FmQvrb','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','apiKey','reason','No\x20authentication\x20token','All\x20bots','Unauthorized\x20attempt\x20to\x20get\x20messages','Backup\x20file\x20unzipped\x20and\x20stored','Error\x20while\x20deleting\x20config\x20files:\x20','full','confirm-message','files','1000','\x20minutes','sendMetricsTelegram','onText','[ip-address]','logged\x20out','\x20mode','store-fiat','uncaughtException','alerts','express','bcryptjs','restore-backup-file','build2','Starting\x20new\x20bot\x20|\x20Bot\x20','show','from','remoteAddress','Unauthorized\x20attempt\x20to\x20show\x20configuration','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','storeHeadless','backup/','version','parse','Notifications\x20types:\x20','number','sign','login\x20token\x20valid','Backup\x20file\x20uploaded','placeOrder','split','production','auto','value','2FA\x20login\x20required','9102GshRJJ','telegramChatId','path','encryptedUuid','orders','decrypt','/restart\x20-\x20restart\x20bot(s)\x0a','toggleBotMode','binary','http','output-001.log','match','type','temporary\x20token\x20generated','secret','get-backup-files','Notifications\x20enabled','stringify','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','15\x20min','botmanager','Unauthorized\x20attempt\x20to\x20add\x20bot','simple','place-order','show-config','backup-full@','pidRefreshToken','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Password\x20has\x20been\x20reset\x20to:\x20','Notifications\x20enabled\x0a','Ok,\x20will\x20send\x20alert\x20notifications\x20only','exit','download','Alerts','bot-','************','clients','Access\x20enabled\x20for\x20','lastmsgtelegram','host','replace','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','reload','RSA-OAEP','settings','zip/','get','No\x20bots\x20running\x20right\x20now','sendFile','All','=>\x20Go\x20to\x20#CYA#http://','polling_error','assign','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','deleteHistoryAlerts','blacklist','1247634MAgwfi','whitelist','length','store-settings','3592398JwPObc','child_process','readdirSync','Your\x20installation\x20is\x20already\x20up\x20to\x20date','then','getTime','/:bot','messages','manual','Login\x20accepted','/on\x20-\x20start\x20bot(s)\x0a','expiry','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','test','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run',',\x20must\x20be\x20a\x204\x20digit\x20number','removeListener','constructor','userid','copyFileSync','name','event','headers','write','static','connection','_data','keys','params','size','updatebotmanager','add','family','sha256','#RES#\x20if\x20running\x20on\x20server','2FA\x20login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20get\x20events','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','min','-config.json','/off\x20-\x20stop\x20bot(s)\x0a','showname','notification','sendMessage','telegramEvents','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','defaults','Yes','getPortfolio','IPv4','store-headless','bot','SIGTERM','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','stop','Unauthorized\x20attempt\x20to\x20delete\x20bot','post','range','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','get-portfolio','backup-full','<b>Balance\x20Bot\x20Status:</b>\x0a','access\x20timeout','::ffff:127.0.0.1','\x20>\x20','/upload-backup','randomBytes','referer','Notifications\x20disabled','backup','debug','Token\x20blacklisted','stopPolling','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','readFileSync','::1','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','allow','login\x20not\x20required','disconnect','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','bot.js','port','2FA','Starting\x20Balance\x20Bot\x20update','max','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','temp/','all','new','title','Error:\x20Invalid\x20argument\x20','any','existsSync','argv','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','handshake','filter','\x20(1)','removeAllListeners','/:bot/history','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Logged\x20out\x20user\x20...','Temporary\x20access\x20rejected','error','Logged\x20in\x20user\x20...','SIGINT','push','success','\x20|\x20client:\x20...','add-bot','onepagemode','Server','pidExpireLogin','disabled','backupfile','/names\x20-\x20show\x20bot\x20names\x0a','find','sendPortfolioTelegram','*$1*','address','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','connected','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','***','yargs/yargs','storeFiat'];_0x3f08=function(){return _0x2a6c06;};return _0x3f08();}function sleep(_0x247649){return new Promise(_0x315845=>setTimeout(_0x315845,_0x247649));}