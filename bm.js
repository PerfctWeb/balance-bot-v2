const _0x3aeeec=_0xb1d3;(function(_0x551e17,_0x8ee0ab){const _0x3ce3f3=_0xb1d3,_0x1c6f6e=_0x551e17();while(!![]){try{const _0x15414f=parseInt(_0x3ce3f3(0x23a))/0x1+-parseInt(_0x3ce3f3(0x318))/0x2*(parseInt(_0x3ce3f3(0x2ec))/0x3)+parseInt(_0x3ce3f3(0x32e))/0x4+parseInt(_0x3ce3f3(0x2d0))/0x5*(parseInt(_0x3ce3f3(0x28c))/0x6)+parseInt(_0x3ce3f3(0x2bb))/0x7*(parseInt(_0x3ce3f3(0x299))/0x8)+parseInt(_0x3ce3f3(0x295))/0x9*(parseInt(_0x3ce3f3(0x203))/0xa)+-parseInt(_0x3ce3f3(0x2e3))/0xb*(parseInt(_0x3ce3f3(0x240))/0xc);if(_0x15414f===_0x8ee0ab)break;else _0x1c6f6e['push'](_0x1c6f6e['shift']());}catch(_0x2919f3){_0x1c6f6e['push'](_0x1c6f6e['shift']());}}}(_0x1d67,0xb2205));const _0x421279=function(){let _0x2d3de1=!![];return function(_0xe12677,_0x5c1bad){const _0x22803b=_0x2d3de1?function(){if(_0x5c1bad){const _0x34f99f=_0x5c1bad['apply'](_0xe12677,arguments);return _0x5c1bad=null,_0x34f99f;}}:function(){};return _0x2d3de1=![],_0x22803b;};}(),_0x48bf2f=_0x421279(this,function(){const _0x528189=_0xb1d3;return _0x48bf2f['toString']()[_0x528189(0x2b7)](_0x528189(0x227))[_0x528189(0x2bd)]()[_0x528189(0x22d)](_0x48bf2f)[_0x528189(0x2b7)](_0x528189(0x227));});_0x48bf2f();'use strict';process[_0x3aeeec(0x2a3)][_0x3aeeec(0x293)]=0x1;const childProcess=require(_0x3aeeec(0x214)),fs=require('fs'),fns=require(_0x3aeeec(0x1bb)),low=require(_0x3aeeec(0x2c3)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x3aeeec(0x294)),crypto=require('crypto'),Crypt=require(_0x3aeeec(0x2c2))[_0x3aeeec(0x25d)],RSA=require(_0x3aeeec(0x2c2))[_0x3aeeec(0x2eb)],bcrypt=require(_0x3aeeec(0x1ef)),jwt=require('jsonwebtoken'),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require('@analytics/google-analytics-v3')[_0x3aeeec(0x277)],ipaddr=require(_0x3aeeec(0x27e)),argv=require(_0x3aeeec(0x290))(process[_0x3aeeec(0x2d1)][_0x3aeeec(0x233)](0x2))['argv'],uuidRandom=require(_0x3aeeec(0x1b9)),Mixpanel=require(_0x3aeeec(0x2cb)),axios=require(_0x3aeeec(0x1cd)),{GraphQLClient,gql}=require('graphql-request'),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x3aeeec(0x1f7)](PORT)&&(console[_0x3aeeec(0x25b)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x3aeeec(0x298)),process[_0x3aeeec(0x304)](0x1));const HOST=argv['host']||null,userID=argv[_0x3aeeec(0x2a4)]||'';let bbpath=_0x3aeeec(0x31e),bbpath2='';const botfile=_0x3aeeec(0x2e7),configfile=_0x3aeeec(0x26c),settingsfile=_0x3aeeec(0x266),securefile=_0x3aeeec(0x259);let validInstallation=!![];!fs[_0x3aeeec(0x20b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3aeeec(0x260)),configpath=userID?bbpath+_0x3aeeec(0x223)+userID+'/':bbpath+_0x3aeeec(0x223),configbackuppath=configpath+_0x3aeeec(0x1c2);!fs[_0x3aeeec(0x20b)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x3aeeec(0x20b)](configbackuppath)&&fs[_0x3aeeec(0x1f0)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3aeeec(0x2db)]({'settings':{'timeshift':0x0,'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3aeeec(0x2f5)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3aeeec(0x2db)]({'secure':{},'blacklist':[]})[_0x3aeeec(0x1bd)]();let crypt=new Crypt({'md':_0x3aeeec(0x30b),'rsaStandard':_0x3aeeec(0x1e6)});const saltRounds=0xa,mixpanel=Mixpanel[_0x3aeeec(0x255)](_0x3aeeec(0x238),{'host':_0x3aeeec(0x1fa)}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':_0x3aeeec(0x2dd)})]});function _0x1d67(){const _0x5b8af2=[':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','update-bot','toIPv4MappedAddress','0.0.0','\x20|\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','onText','store-configuration','ipv6','secure','telegram','readFileSync','/restart\x20-\x20restart\x20bot(s)\x0a','disconnect','listen','show','isValid','auth','exit','place-order','catch','password','connection','stopped','sendMessage','sha256','cloneDeep','5\x20min','access\x20timeout','timeshift','login\x20token\x20generated','No\x20bots\x20running\x20right\x20now','getHours','Allow\x20login\x20from\x20IP\x20address\x20<b>','yes','-results.json','push','answerCallbackQuery','2573554czPfua','127.0.0.1','hashSync','sockets','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','stopPolling','bb/','callback_query','Unauthorized\x20attempt\x20to\x20delete\x20bot','polling_error','http','length','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','getStartingBalances','bbvNew','referer','login\x20required','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','privateKey','send','cancelLoading','type','5413816ywxlaZ','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','bots','use','-performance.json','manual','latestversion','isDirectory','sortBy','assign','number','page','uuid-random','build','date-fns','add','write','sendPortfolioTelegram','<b>Telegram\x20Bot\x20Status:</b>\x0a','All\x20bots','/names\x20-\x20show\x20bot\x20names\x0a','backup/','access','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','unlinkSync','server','min','/update\x20-\x20update\x20Balance\x20Bot\x0a','sendFile','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','uuid','getMonth','axios','2FA\x20required','2FA\x20login\x20rejected','telegramToken','createServer','get-messages','-config.json','/:bot/support','add-bot','get-portfolio','forEach','isIPv4MappedAddress','toIPv4Address','delete-alerts','bbUsername','Bot\x20','login','data','ipc','headers','readdirSync','toggle-bot-mode','enabled','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','event','RSA-OAEP','exp','socket.io','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','/:bot/configuration','store-headless','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','order','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','bcryptjs','mkdirSync','reset-password','pidRefreshToken','storeConfiguration','get-logs','telegram2FaApproval','error','test','auto','all','api-eu.mixpanel.com','temporary\x20access\x20not\x20allowed','getSeconds','User\x20has\x20been\x20validated','idling\x20bot\x20\x20\x20|\x20Bot\x20','handshake','/enable\x20-\x20enable\x20notifications\x0a','request','Password\x20reset\x20rejected','140jIHWyf','bot','login\x20token\x20valid','loginRequired','-events.json','running','publicKey','Invalid\x20Telegram\x20token','existsSync','logged\x20out','restarting\x20Bot\x20','telegramChatId','Notifications\x20disabled','find','disabled','split','encryptedUuid','child_process','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','reason','30\x20min','f2aRequired','$1_$2_$3','timestamp','match','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','from','/help\x20-\x20show\x20available\x20commands\x0a','remoteAddress','removeListener','SIGINT','config/','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','/:bot/portfolio','message','(((.+)+)+)+$','keys','-----------------------------------------------------------------------------------','botmanager','userid','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','constructor','Temporary\x20access\x20rejected','stringify','alias','Your\x20installation\x20is\x20already\x20up\x20to\x20date','logout','slice','hasOwnProperty','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','cancel-loading','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','6b67f3d61ee94b8f5c80b4affef4c4d9','Access\x20enabled\x20for\x20','812673ADbVKw','https://hodlerhacks.com','writeFileSync','/on\x20-\x20start\x20bot(s)\x0a','invalid\x20credentials','disabled\x20Bot\x20','12znRuzT','************','Yes','Login\x20accepted','telegramIpApproval','remove','confirm-message','error\x20while\x20deleting\x20config\x20files:\x20','allow','temporaryAccessAllowed','lastmsgtelegram','telegramEnabled','alerts','then','store-settings','enabled\x20Bot\x20','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','emit','startsWith','max','removeAllListeners','init','once','whitelist','stop','bb-secure.json','value','log','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Crypt','track','clientip','clients','Orders','includes','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','fork','join','bb-settings.json','compareSync','kill','https://api.ipify.org?format=json','bot-','Login\x20rejected','bb-config.json','temporary\x20token\x20generated','index.html','update-bb','2FA\x20login\x20required','login\x20not\x20required','get-starting-balances','*$1*','get','restart','reload','default','headless','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20log\x20out','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','blacklist','\x20only\x0a','ipaddr.js','telegramUsername','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Server','kind','getDate','node-telegram-bot-api','Unauthorized\x20login\x20attempt\x20(timeout)','new-disabled','secret','telegramEvents','status','botname','::ffff:127.0.0.1','6pMRkHm','You\x20can\x20use\x20the\x20following\x20commands:\x0a','token','filter','yargs/yargs','getMinutes','/:bot','NTBA_FIX_319','path','478611nNAihF','Ok,\x20will\x20send\x20alert\x20notifications\x20only','live',',\x20must\x20be\x20a\x204\x20digit\x20number','2669336AKsEEm','404\x20Not\x20Found','\x20>\x20','</b>\x20?','deleted\x20Bot\x20','generateKeyPairAsync','toggleBotMode','static','getFullYear','/:bot/coins','env','user','Bot\x20Mgr\x20>\x20','chat','lastmsgemitted','Invalid\x20authentication\x20token\x20(1)','getTime','expiry','2FA\x20login\x20token\x20generated','notification','placeOrder','\x20minutes','inherit','HTML','decrypt','Invalid\x20username\x20or\x20IP\x20address','new','version.json','map','botID','search','args','mode','Token\x20blacklisted','14PBYOEE','Unauthorized\x20attempt\x20to\x20add\x20bot','toString','sign','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','function','conn','hybrid-crypto-js','lowdb','Alerts','Unauthorized\x20attempt\x20to\x20get\x20logs','Notifications\x20types:\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Balance\x20Bot\x20Server','padStart','mixpanel','Unauthorized\x20attempt\x20to\x20update\x20settings','any','Markdown','reject','7162810FfIUxB','argv','name','Unauthorized\x20attempt\x20to\x20get\x20messages','showname','parse','pidExpireLogin','settings.','build2','deleteHistoryAlerts','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','defaults','/:bot/history','UA-192771731-1','bbPassword','replace','Unauthorized\x20attempt\x20to\x20confirm\x20message','orders','/:bot/performance','32935617bwgEIC','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','\x20to\x20','set','bot.js','telegrammsg','temporary\x20access\x20rejected','Notifications\x20enabled\x0a','RSA','3pdUOyo','temporary\x20access\x20timeout','express','settings','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','username'];_0x1d67=function(){return _0x5b8af2;};return _0x1d67();}let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3aeeec(0x2b4))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3aeeec(0x2ee)),app=express(),http=require(_0x3aeeec(0x322))[_0x3aeeec(0x1d1)](app);app[_0x3aeeec(0x1b0)](express['static'](path['join'](__dirname,bbpath2,_0x3aeeec(0x2d8)))),app[_0x3aeeec(0x1b0)](express[_0x3aeeec(0x2a0)](path[_0x3aeeec(0x265)](__dirname,bbpath2,_0x3aeeec(0x1ba)))),app[_0x3aeeec(0x274)]('/',function(_0x1f470c,_0x47d883){const _0x385ff3=_0x3aeeec;_0x47d883[_0x385ff3(0x1c9)](path['join'](__dirname,bbpath2,_0x385ff3(0x2d8),_0x385ff3(0x26e)));}),app['get'](_0x3aeeec(0x292),function(_0x18a3ed,_0x302ac0){const _0x2412c6=_0x3aeeec;_0x302ac0[_0x2412c6(0x1c9)](path[_0x2412c6(0x265)](__dirname,bbpath2,_0x2412c6(0x1ba),'index.html'));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x225),(_0x210bd1,_0x13df25)=>{const _0x12aba7=_0x3aeeec;_0x13df25[_0x12aba7(0x1c9)](path[_0x12aba7(0x265)](__dirname,bbpath2,_0x12aba7(0x1ba),_0x12aba7(0x26e)));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x2e2),(_0x6c2ccc,_0x41f4b7)=>{const _0xe0ce84=_0x3aeeec;_0x41f4b7[_0xe0ce84(0x1c9)](path[_0xe0ce84(0x265)](__dirname,bbpath2,_0xe0ce84(0x1ba),'index.html'));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x2a2),(_0x172b92,_0x1c44f5)=>{const _0x431d8a=_0x3aeeec;_0x1c44f5[_0x431d8a(0x1c9)](path[_0x431d8a(0x265)](__dirname,bbpath2,_0x431d8a(0x1ba),_0x431d8a(0x26e)));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x2dc),(_0x540a30,_0x19911a)=>{const _0x5a507c=_0x3aeeec;_0x19911a[_0x5a507c(0x1c9)](path[_0x5a507c(0x265)](__dirname,bbpath2,_0x5a507c(0x1ba),_0x5a507c(0x26e)));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x1ea),(_0x1e0a9f,_0x3d12b4)=>{const _0xf3419d=_0x3aeeec;_0x3d12b4[_0xf3419d(0x1c9)](path[_0xf3419d(0x265)](__dirname,bbpath2,_0xf3419d(0x1ba),_0xf3419d(0x26e)));}),app[_0x3aeeec(0x274)](_0x3aeeec(0x1d4),(_0x546ba1,_0x171ad1)=>{const _0x565ae9=_0x3aeeec;_0x171ad1[_0x565ae9(0x1c9)](path[_0x565ae9(0x265)](__dirname,bbpath2,_0x565ae9(0x1ba),_0x565ae9(0x26e)));});if(HOST)http[_0x3aeeec(0x300)](PORT,HOST);else http[_0x3aeeec(0x300)](PORT);const io=require(_0x3aeeec(0x1e8))(http,{}),TelegramBot=require(_0x3aeeec(0x284));let tgBot;if(settings[_0x3aeeec(0x1d0)]&&settings[_0x3aeeec(0x1d0)]!=''&&settings[_0x3aeeec(0x27f)]&&settings[_0x3aeeec(0x27f)]!='')initTelegram();init();async function init(){await initUser(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x122aad=_0x3aeeec;console['log'](''),console['log'](_0x122aad(0x229)),logging(_0x122aad(0x215)+PORT),console[_0x122aad(0x25b)](_0x122aad(0x229));if(config[_0x122aad(0x323)]!=0x0)config['forEach'](_0x14718a=>{const _0x3223ac=_0x122aad;if(_0x14718a[_0x3223ac(0x289)]==_0x3223ac(0x1e3)||_0x14718a[_0x3223ac(0x289)]==_0x3223ac(0x2b3))logging('starting\x20bot\x20|\x20Bot\x20'+_0x14718a[_0x3223ac(0x2b6)]+_0x3223ac(0x2f6)+_0x14718a['botname']),startBot([_0x14718a[_0x3223ac(0x2b6)],userID],{'cwd':bbpath},function(_0x176e8b){if(_0x176e8b)logging(_0x176e8b);});else(_0x14718a[_0x3223ac(0x289)]==_0x3223ac(0x211)||_0x14718a[_0x3223ac(0x289)]==_0x3223ac(0x286))&&logging(_0x3223ac(0x1fe)+_0x14718a['botID']+_0x3223ac(0x2f6)+_0x14718a[_0x3223ac(0x28a)]);});else!newBot&&console[_0x122aad(0x25b)](_0x122aad(0x2c8));if(newBot)addBot();console['log'](_0x122aad(0x229)),console['log']('');}function startSocket(){const _0x444b24=_0x3aeeec;io['on'](_0x444b24(0x308),_0x5e30e9=>{const _0x98e2a7=_0x444b24;let _0x5c5fc7,_0x29b9fd,_0x11f21b,_0x22b597,_0x9bd768;const _0x405fdb=_0x5e30e9[_0x98e2a7(0x1ff)][_0x98e2a7(0x1e0)][_0x98e2a7(0x327)];_0x29b9fd=_0x405fdb[_0x98e2a7(0x21b)](/bot[0-9]{3}/);if(_0x29b9fd)_0x11f21b=_0x29b9fd[0x0][_0x98e2a7(0x21b)](/[0-9]{3}/);if(_0x11f21b)_0x5c5fc7=_0x11f21b[0x0];else _0x5c5fc7='botmanager';const _0x5da9b6=_0x5e30e9[_0x98e2a7(0x1ff)][_0x98e2a7(0x303)][_0x98e2a7(0x213)];if(!_0x5da9b6)_0x5e30e9[_0x98e2a7(0x251)](_0x98e2a7(0x289),{'publicKey':secure[_0x98e2a7(0x209)]});else{_0x22b597=timelyDecrypt(_0x5da9b6,![]);if(!_0x22b597)_0x5e30e9[_0x98e2a7(0x251)](_0x98e2a7(0x289),{'publicKey':secure[_0x98e2a7(0x209)]});else{_0x9bd768=normalizeIP(_0x5e30e9[_0x98e2a7(0x2c1)][_0x98e2a7(0x220)])['store'];if(!devices[_0x22b597])devices[_0x22b597]={'uuid':_0x22b597,'access':{'token':null}};devices[_0x22b597]['ip']=_0x9bd768;const _0x2bc874=addClient(_0x5e30e9['id'],_0x22b597,_0x5c5fc7);setAccess(_0x2bc874),emitMessages(),_0x5e30e9['on'](_0x98e2a7(0x1dd),_0x23afda=>{const _0x51d0e5=_0x98e2a7,_0x1caff9=timelyDecrypt(_0x23afda['password']);if(_0x1caff9){_0x23afda={'username':_0x23afda[_0x51d0e5(0x2f1)],'password':_0x1caff9},devices[_0x22b597][_0x51d0e5(0x1c3)]=validateCredentials(_0x23afda,_0x22b597);if(devices[_0x22b597][_0x51d0e5(0x1c3)][_0x51d0e5(0x248)]==![]&&devices[_0x22b597][_0x51d0e5(0x1c3)]['reason']==_0x51d0e5(0x270))_0x5e30e9['emit']('status',{'access':devices[_0x22b597][_0x51d0e5(0x1c3)]}),loginAccess2FA(_0x22b597,_0x9bd768);else{if(devices[_0x22b597][_0x51d0e5(0x1c3)][_0x51d0e5(0x248)]==![]&&devices[_0x22b597][_0x51d0e5(0x1c3)][_0x51d0e5(0x216)]==_0x51d0e5(0x23e))_0x5e30e9[_0x51d0e5(0x251)](_0x51d0e5(0x289),{'access':devices[_0x22b597][_0x51d0e5(0x1c3)]});else devices[_0x22b597]['access']['allow']&&devices[_0x22b597][_0x51d0e5(0x1c3)][_0x51d0e5(0x216)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x22b597)['forEach'](_0x26f2fb=>{setAccess(_0x26f2fb);}),setTokenRefresh(_0x22b597),setSessionTimeout(_0x51d0e5(0x1dd),_0x22b597));}}else logging(_0x51d0e5(0x285));}),_0x5e30e9['on'](_0x98e2a7(0x1f1),()=>{resetPassword();}),_0x5e30e9['on'](_0x98e2a7(0x2ff),_0x26d748=>{removeClient(_0x5e30e9['id']);});}}});}function initClient(_0x38b7e){const _0x325b39=_0x3aeeec;if(_0x38b7e!=_0x325b39(0x22a)&&config['apiKey']!=''){if(pid[_0x38b7e])pid[_0x38b7e][_0x325b39(0x32b)]({'function':'initclient','args':null});}}function getSocket(_0x5abed0){const _0x525403=_0x3aeeec;return io[_0x525403(0x31b)][_0x525403(0x31b)][_0x525403(0x274)](_0x5abed0);}function setAccess(_0x1e53a1){const _0x131e5b=_0x3aeeec,_0x494b46=getSocket(_0x1e53a1['id']),_0x24b4eb=_0x1e53a1['uuid'],_0x17374e=_0x1e53a1[_0x131e5b(0x204)];devices[_0x24b4eb][_0x131e5b(0x1c3)]=validateAccess(devices[_0x24b4eb]['access'][_0x131e5b(0x28e)],_0x24b4eb),_0x494b46[_0x131e5b(0x265)](_0x24b4eb);if(devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x248)]){_0x494b46['join'](_0x17374e);if(_0x17374e==_0x131e5b(0x22a))initializeSocketBotManager(_0x494b46);else initializeSocketBot(_0x494b46);initClient(_0x17374e);}devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x28e)]&&devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x216)]==_0x131e5b(0x26d)&&setSessionTimeout('2FA',_0x24b4eb),devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x28e)]&&devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x216)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x131e5b(0x1dd),_0x24b4eb),_0x494b46[_0x131e5b(0x251)](_0x131e5b(0x289),{'status':_0x1e53a1[_0x131e5b(0x1c6)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x24b4eb][_0x131e5b(0x1c3)],'externalip':devices[_0x24b4eb]['ip'],'publicKey':secure[_0x131e5b(0x209)],'userid':settings[_0x131e5b(0x22b)],'validInstallation':validInstallation}),devices[_0x24b4eb][_0x131e5b(0x1c3)]['allow']==![]&&devices[_0x24b4eb][_0x131e5b(0x1c3)][_0x131e5b(0x216)]==_0x131e5b(0x1ce)&&temporaryAccess2FA(_0x24b4eb,devices[_0x24b4eb]['ip']);}function setSessionTimeout(_0xb3c81,_0x4fd3e6){const _0x64769d=_0x3aeeec;let _0x8f071c;if(_0xb3c81==_0x64769d(0x1dd))_0x8f071c=loginExpiry*0x3c*0x3e8;else _0x8f071c=devices[_0x4fd3e6]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x64769d(0x2a9)]()-devices[_0x4fd3e6][_0x64769d(0x244)][_0x64769d(0x21a)]);if(devices[_0x4fd3e6][_0x64769d(0x2d6)])clearTimeout(devices[_0x4fd3e6][_0x64769d(0x2d6)]);devices[_0x4fd3e6][_0x64769d(0x2d6)]=setTimeout(()=>{const _0x4dddb6=_0x64769d;if(devices[_0x4fd3e6][_0x4dddb6(0x1f2)])clearTimeout(devices[_0x4fd3e6][_0x4dddb6(0x1f2)]);removeSocketListeners(_0x4fd3e6),addBlacklist(_0x4fd3e6),devices[_0x4fd3e6][_0x4dddb6(0x244)]=null,devices[_0x4fd3e6][_0x4dddb6(0x1f5)]=null,devices[_0x4fd3e6][_0x4dddb6(0x1c3)][_0x4dddb6(0x28e)]=null,devices[_0x4fd3e6]['access']=validateAccess(devices[_0x4fd3e6][_0x4dddb6(0x1c3)][_0x4dddb6(0x28e)],_0x4fd3e6),!(devices[_0x4fd3e6][_0x4dddb6(0x1c3)][_0x4dddb6(0x248)]&&devices[_0x4fd3e6]['access'][_0x4dddb6(0x216)]==_0x4dddb6(0x271))&&(_0xb3c81=='login'?io['to'](_0x4fd3e6)['emit'](_0x4dddb6(0x289),{'access':{'allow':![],'reason':_0x4dddb6(0x30e),'token':null}}):io['to'](_0x4fd3e6)[_0x4dddb6(0x251)](_0x4dddb6(0x289),{'access':{'allow':![],'reason':_0x4dddb6(0x2ed),'token':null}})),devices[_0x4fd3e6]['access']['token']=null;},_0x8f071c);}function setTokenRefresh(_0x404f18){const _0x3fe2b5=_0x3aeeec;if(devices[_0x404f18][_0x3fe2b5(0x1f2)])clearTimeout(devices[_0x404f18][_0x3fe2b5(0x1f2)]);devices[_0x404f18]['pidRefreshToken']=setTimeout(()=>{const _0x3bcb47=_0x3fe2b5;getClientsWithUuid(_0x404f18)[_0x3bcb47(0x323)]!=0x0?(devices[_0x404f18][_0x3bcb47(0x1c3)]=refreshToken(_0x404f18),io['to'](_0x404f18)[_0x3bcb47(0x251)](_0x3bcb47(0x289),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x404f18][_0x3bcb47(0x1c3)],'externalip':devices[_0x404f18]['ip'],'publicKey':secure[_0x3bcb47(0x209)],'validInstallation':validInstallation}),setTokenRefresh(_0x404f18)):clearTimeout(devices[_0x404f18]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4d442f){const _0x3563ee=_0x3aeeec,_0xfbcdf5=getClient(_0x4d442f['id'])[_0x3563ee(0x1cb)];_0x4d442f[_0x3563ee(0x251)](_0x3563ee(0x330),config),_0x4d442f[_0x3563ee(0x251)](_0x3563ee(0x2ef),cleanSettings()),_0x4d442f['on'](_0x3563ee(0x1d5),_0x360620=>{const _0x39ab3e=_0x3563ee;if(validateAccess(_0x360620,_0xfbcdf5)['allow'])addBot();else logging(_0x39ab3e(0x2bc));}),_0x4d442f['on'](_0x3563ee(0x2f3),(_0x3ce29f,_0x139837)=>{const _0x3fc3e5=_0x3563ee;if(validateAccess(_0x139837,_0xfbcdf5)[_0x3fc3e5(0x248)])toggleBot(_0x3ce29f[_0x3fc3e5(0x2b6)],_0x3ce29f[_0x3fc3e5(0x289)],_0x3ce29f[_0x3fc3e5(0x297)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4d442f['on'](_0x3563ee(0x1e2),(_0x83576f,_0x1cff7b)=>{const _0x252d97=_0x3563ee;if(validateAccess(_0x1cff7b,_0xfbcdf5)[_0x252d97(0x248)])toggleBotMode(_0x83576f);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4d442f['on']('delete-bot',(_0x3d74f3,_0x2c55ba)=>{const _0x620ac4=_0x3563ee;if(validateAccess(_0x2c55ba,_0xfbcdf5)[_0x620ac4(0x248)])deleteBot(_0x3d74f3);else logging(_0x620ac4(0x320));}),_0x4d442f['on'](_0x3563ee(0x24e),(_0xff223e,_0x5bc5f7)=>{const _0x45f768=_0x3563ee;if(validateAccess(_0x5bc5f7,_0xfbcdf5)[_0x45f768(0x248)])storeSettings(_0xff223e,!![]);else logging(_0x45f768(0x2cc));}),_0x4d442f['on'](_0x3563ee(0x26f),_0x5ec423=>{const _0x21b3df=_0x3563ee;if(validateAccess(_0x5ec423,_0xfbcdf5)['allow'])updateBB();else logging(_0x21b3df(0x21c));}),_0x4d442f['on'](_0x3563ee(0x1d2),_0x5bf524=>{const _0x5cfea6=_0x3563ee;if(validateAccess(_0x5bf524,_0xfbcdf5)[_0x5cfea6(0x248)])getMessages();else logging(_0x5cfea6(0x2d3));}),_0x4d442f['on']('confirm-message',(_0x2f4f96,_0x510eba)=>{const _0x4c6807=_0x3563ee;if(validateAccess(_0x510eba,_0xfbcdf5)[_0x4c6807(0x248)])confirmMessage(_0x2f4f96);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4d442f['on'](_0x3563ee(0x232),_0x4fc3ab=>{const _0x115906=_0x3563ee;if(validateAccess(_0x4fc3ab,_0xfbcdf5)[_0x115906(0x248)]){if(devices[_0xfbcdf5][_0x115906(0x1f2)])clearTimeout(devices[_0xfbcdf5][_0x115906(0x1f2)]);if(devices[_0xfbcdf5]['pidExpireLogin'])clearTimeout(devices[_0xfbcdf5][_0x115906(0x2d6)]);removeSocketListeners(getClient(_0x4d442f['id'])['uuid']),addBlacklist(_0xfbcdf5),devices[_0xfbcdf5][_0x115906(0x244)]=null,devices[_0xfbcdf5][_0x115906(0x1f5)]=null,devices[_0xfbcdf5][_0x115906(0x1c3)][_0x115906(0x28e)]=null,io['to'](getClient(_0x4d442f['id'])[_0x115906(0x1cb)])[_0x115906(0x251)](_0x115906(0x289),{'access':{'allow':![],'reason':_0x115906(0x20c),'token':null}});}else logging(_0x115906(0x27a));});}function initializeSocketBot(_0x1493f6){const _0x2040ff=_0x3aeeec,_0x2e7392=getClient(_0x1493f6['id'])[_0x2040ff(0x204)],_0x541009=getClient(_0x1493f6['id'])[_0x2040ff(0x1cb)];_0x1493f6['on'](_0x2040ff(0x1f4),(_0x455304,_0x14a8be)=>{const _0x3354e4=_0x2040ff;if(validateAccess(_0x14a8be,_0x541009)[_0x3354e4(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x3354e4(0x32b)]({'function':'emitHistory','args':_0x455304});}else logging(_0x3354e4(0x2c5));}),_0x1493f6['on'](_0x2040ff(0x1da),(_0xe644c3,_0x5c9e26)=>{const _0x9d387b=_0x2040ff;if(validateAccess(_0x5c9e26,_0x541009)[_0x9d387b(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x9d387b(0x32b)]({'function':_0x9d387b(0x2d9),'args':_0xe644c3});}else logging(_0x9d387b(0x25c));}),_0x1493f6['on'](_0x2040ff(0x1d6),(_0x31f744,_0x5cddce)=>{const _0x2519f2=_0x2040ff;if(validateAccess(_0x5cddce,_0x541009)[_0x2519f2(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x2519f2(0x32b)]({'function':'getPortfolio','args':_0x31f744});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x1493f6['on'](_0x2040ff(0x2f9),(_0x3c4454,_0x4d3960)=>{const _0x4e7880=_0x2040ff;if(validateAccess(_0x4d3960,_0x541009)[_0x4e7880(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392]['send']({'function':_0x4e7880(0x1f3),'args':_0x3c4454});}else logging(_0x4e7880(0x2f7));}),_0x1493f6['on'](_0x2040ff(0x1eb),(_0x23fe1c,_0x5c83f3)=>{const _0x3f0b8c=_0x2040ff;if(validateAccess(_0x5c83f3,_0x541009)[_0x3f0b8c(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392]['send']({'function':'storeHeadless','args':_0x23fe1c});}else logging(_0x3f0b8c(0x237));}),_0x1493f6['on'](_0x2040ff(0x272),_0x45e451=>{const _0x241676=_0x2040ff;if(validateAccess(_0x45e451,_0x541009)[_0x241676(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x241676(0x32b)]({'function':_0x241676(0x325),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x1493f6['on'](_0x2040ff(0x305),(_0x3812bb,_0x3b108e)=>{const _0x3ea7c4=_0x2040ff;if(validateAccess(_0x3b108e,_0x541009)[_0x3ea7c4(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x3ea7c4(0x32b)]({'function':_0x3ea7c4(0x2ad),'args':_0x3812bb});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x1493f6['on'](_0x2040ff(0x236),_0x16b439=>{const _0x2d2514=_0x2040ff;if(validateAccess(_0x16b439,_0x541009)[_0x2d2514(0x248)]){if(pid[_0x2e7392])pid[_0x2e7392][_0x2d2514(0x32b)]({'function':_0x2d2514(0x32c),'args':null});}else logging(_0x2d2514(0x250));}),_0x1493f6['on'](_0x2040ff(0x26f),_0x2e5da1=>{const _0x5a290b=_0x2040ff;if(validateAccess(_0x2e5da1,_0x541009)['allow'])updateBB();else logging(_0x5a290b(0x21c));}),_0x1493f6['on'](_0x2040ff(0x1d2),_0x474ed8=>{const _0x4aca79=_0x2040ff;if(validateAccess(_0x474ed8,_0x541009)[_0x4aca79(0x248)])getMessages();else logging(_0x4aca79(0x2d3));}),_0x1493f6['on'](_0x2040ff(0x246),(_0x3e267f,_0x2e9568)=>{const _0x3bc45c=_0x2040ff;if(validateAccess(_0x2e9568,_0x541009)[_0x3bc45c(0x248)])confirmMessage(_0x3e267f);else logging(_0x3bc45c(0x2e0));}),_0x1493f6['on'](_0x2040ff(0x232),_0x279211=>{const _0x382bee=_0x2040ff;if(validateAccess(_0x279211,_0x541009)['allow']){if(devices[_0x541009][_0x382bee(0x1f2)])clearTimeout(devices[_0x541009][_0x382bee(0x1f2)]);if(devices[_0x541009][_0x382bee(0x2d6)])clearTimeout(devices[_0x541009][_0x382bee(0x2d6)]);removeSocketListeners(getClient(_0x1493f6['id'])[_0x382bee(0x1cb)]),addBlacklist(_0x541009),devices[_0x541009][_0x382bee(0x244)]=null,devices[_0x541009][_0x382bee(0x1f5)]=null,devices[_0x541009][_0x382bee(0x1c3)][_0x382bee(0x28e)]=null,io['to'](getClient(_0x1493f6['id'])['uuid'])[_0x382bee(0x251)]('status',{'access':{'allow':![],'reason':_0x382bee(0x20c),'token':null}});}else logging(_0x382bee(0x27a));});}function removeSocketListeners(_0x4ddbce){getClientsWithUuid(_0x4ddbce)['forEach'](_0x4fa22e=>{const _0x5a008e=_0xb1d3;getSocket(_0x4fa22e['id'])[_0x5a008e(0x254)]();});}function cleanSettings(){const _0x1842d3=_0x3aeeec;let _0x2c5868=settings;return settings[_0x1842d3(0x1d0)]&&settings[_0x1842d3(0x1d0)]!=''&&(_0x2c5868={..._0x2c5868,'telegramToken':_0x1842d3(0x241)}),settings['bbPassword']&&settings[_0x1842d3(0x2de)]!=''&&(_0x2c5868={..._0x2c5868,'bbPassword':_0x1842d3(0x241)}),_0x2c5868;}function updateBB(){const _0x55b634=_0x3aeeec;installingUpdate=!![],config[_0x55b634(0x1d7)](_0x1eea4d=>{restartBot(_0x1eea4d['botID']);}),process[_0x55b634(0x32b)]({'update':!![]},_0x876efd=>{});}function startBot(_0x54a3e9,_0x1c8a7f,_0x218b91){const _0x5a0e5e=_0x3aeeec;let _0x4903a8=![];const _0x1b8205=_0x54a3e9[0x0];_0x1c8a7f={..._0x1c8a7f,'stdio':['inherit',_0x5a0e5e(0x2af),_0x5a0e5e(0x2af),_0x5a0e5e(0x1df)]},pid[_0x1b8205]=childProcess[_0x5a0e5e(0x264)](botfile,_0x54a3e9,_0x1c8a7f),pid[_0x1b8205]['on'](_0x5a0e5e(0x226),_0x50a5c1=>{const _0x6a13b8=_0x5a0e5e;switch(Object[_0x6a13b8(0x228)](_0x50a5c1)[0x0]){case _0x6a13b8(0x28a):updateBotName(_0x1b8205,_0x50a5c1[_0x6a13b8(0x28a)]);break;case'updatebotmanager':updateBotManager();break;case _0x6a13b8(0x289):updateStatus(_0x1b8205,_0x50a5c1[_0x6a13b8(0x289)]);break;case'live':updateLive(_0x1b8205,_0x50a5c1['live']);break;case'started':updateLive(_0x1b8205,_0x50a5c1['started']),io['to'](_0x1b8205)['emit'](_0x6a13b8(0x289),{'access':{'allow':![],'reason':_0x6a13b8(0x276),'token':null}});break;case'stop':_0x50a5c1[_0x6a13b8(0x258)]==_0x6a13b8(0x275)&&restartBot(_0x1b8205);_0x50a5c1['stop']==_0x6a13b8(0x268)&&toggleBot(_0x1b8205,'disabled',_0x6a13b8(0x309));break;case'telegram':sendTelegram(_0x1b8205,_0x50a5c1[_0x6a13b8(0x2fc)]);break;case'telegrammsg':sendTelegramMsg(_0x50a5c1[_0x6a13b8(0x2e8)]);break;case _0x6a13b8(0x2c0):io['to'](_0x1b8205)[_0x6a13b8(0x251)](_0x50a5c1[_0x6a13b8(0x2c0)],_0x50a5c1[_0x6a13b8(0x2b8)]);break;}}),pid[_0x1b8205]['on'](_0x5a0e5e(0x1f6),function(_0x17469b){if(_0x4903a8)return;_0x4903a8=!![],_0x218b91(_0x17469b);}),pid[_0x1b8205]['on'](_0x5a0e5e(0x304),function(_0x134758){const _0x45b257=_0x5a0e5e;if(installingUpdate)return;if(_0x4903a8)return;_0x4903a8=!![],_0x218b91(null);const _0x4114a7=dbConfig['get'](_0x45b257(0x330))[_0x45b257(0x210)]({'botID':_0x1b8205})[_0x45b257(0x25a)]();_0x4114a7&&(_0x4114a7['status']=='enabled'||_0x4114a7['status']==_0x45b257(0x2b3))&&(updateLive(_0x1b8205,'stopped'),logging(_0x45b257(0x20d)+_0x1b8205),startBot([_0x1b8205,userID],{'cwd':bbpath},function(_0x517fb4){if(_0x517fb4)logging(_0x517fb4);}));});}function stopBot(_0x1ae7dc){const _0xeccec6=_0x3aeeec;getClientsWithBotID(_0x1ae7dc)['forEach'](_0x5b75b6=>{getSocket(_0x5b75b6['id'])['disconnect'](!![]),removeClient(_0x5b75b6['id']);}),pid[_0x1ae7dc]&&(pid[_0x1ae7dc][_0xeccec6(0x268)](),pid[_0x1ae7dc]=null);}function restartBot(_0x1b48f6){const _0x214f92=_0x3aeeec;if(pid[_0x1b48f6])pid[_0x1b48f6][_0x214f92(0x268)]();}function addBot(){const _0x12449f=_0x3aeeec;let _0xed69af;for(let _0x4fa3fd=0x1;_0x4fa3fd<0x3e9;_0x4fa3fd++){_0xed69af=_0x4fa3fd[_0x12449f(0x2bd)]()[_0x12449f(0x2ca)](0x3,'0');let _0x511bce=config[_0x12449f(0x210)](_0x544ff6=>_0x544ff6['botID']==_0xed69af);if(!_0x511bce)break;}if(_0xed69af==='1000'){logging(_0x12449f(0x1e4));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0xed69af),dbConfig[_0x12449f(0x274)](_0x12449f(0x330))[_0x12449f(0x316)]({'botID':_0xed69af,'botname':_0x12449f(0x1dc)+_0xed69af,'status':'new','live':''})[_0x12449f(0x1bd)](),startBot([_0xed69af,userID],{'cwd':bbpath},function(_0x32bc94){if(_0x32bc94)logging(_0x32bc94);}),config=getConfiguration(),io['to']('botmanager')[_0x12449f(0x251)]('bots',config);}function deleteBot(_0x23478a){const _0x78ea0b=_0x3aeeec;getClientsWithBotID(_0x23478a)['forEach'](_0x5d834f=>{const _0x21ab73=_0xb1d3;getSocket(_0x5d834f['id'])[_0x21ab73(0x2ff)](!![]),removeClient(_0x5d834f['id']);}),dbConfig['get'](_0x78ea0b(0x330))['remove']({'botID':_0x23478a})[_0x78ea0b(0x1bd)](),logging(_0x78ea0b(0x29d)+_0x23478a),stopBot(_0x23478a);try{fs[_0x78ea0b(0x1c5)](path[_0x78ea0b(0x265)](configpath,'bot-'+_0x23478a+_0x78ea0b(0x1d3))),fs['unlinkSync'](path[_0x78ea0b(0x265)](configpath,_0x78ea0b(0x26a)+_0x23478a+_0x78ea0b(0x207))),fs[_0x78ea0b(0x1c5)](path[_0x78ea0b(0x265)](configpath,_0x78ea0b(0x26a)+_0x23478a+_0x78ea0b(0x1b1))),fs[_0x78ea0b(0x1c5)](path[_0x78ea0b(0x265)](configpath,_0x78ea0b(0x26a)+_0x23478a+_0x78ea0b(0x315)));}catch(_0x6a37f1){if(_0x6a37f1)logging(_0x78ea0b(0x247),_0x6a37f1);}config=getConfiguration(),io['to']('botmanager')[_0x78ea0b(0x251)](_0x78ea0b(0x330),config);}function toggleBot(_0x5caf05,_0x396592,_0x592008){const _0x1234a1=_0x3aeeec;dbConfig[_0x1234a1(0x274)](_0x1234a1(0x330))[_0x1234a1(0x210)]({'botID':_0x5caf05})[_0x1234a1(0x1b6)]({'status':_0x396592})[_0x1234a1(0x1b6)]({'live':_0x592008})[_0x1234a1(0x1bd)]();if(_0x396592==_0x1234a1(0x1e3)||_0x396592==_0x1234a1(0x2b3))logging(_0x1234a1(0x24f)+_0x5caf05),startBot([_0x5caf05,userID],{'cwd':bbpath},function(_0x4c9c22){if(_0x4c9c22)logging(_0x4c9c22);});else(_0x396592==_0x1234a1(0x211)||_0x396592=='new-disabled')&&(logging(_0x1234a1(0x23f)+_0x5caf05),stopBot(_0x5caf05));config=getConfiguration(),io['to'](_0x1234a1(0x22a))['emit'](_0x1234a1(0x330),config);}function toggleStatus(_0x44989){const _0x42dc4f=_0x3aeeec;let _0x25d9b6=dbConfig[_0x42dc4f(0x274)](_0x42dc4f(0x330))[_0x42dc4f(0x210)]({'botID':_0x44989})[_0x42dc4f(0x25a)](),_0x2b7cfa;if(_0x25d9b6[_0x42dc4f(0x289)]==='enabled')_0x2b7cfa=_0x42dc4f(0x211);else{if(_0x25d9b6[_0x42dc4f(0x289)]==='new')_0x2b7cfa=_0x42dc4f(0x286);else{if(_0x25d9b6[_0x42dc4f(0x289)]===_0x42dc4f(0x286))_0x2b7cfa=_0x42dc4f(0x2b3);else{if(_0x25d9b6['status']==='disabled')_0x2b7cfa=_0x42dc4f(0x1e3);}}}return _0x2b7cfa;}function updateStatus(_0x451029,_0x157335){const _0x38532a=_0x3aeeec;dbConfig[_0x38532a(0x274)](_0x38532a(0x330))[_0x38532a(0x210)]({'botID':_0x451029})[_0x38532a(0x1b6)]({'status':_0x157335})[_0x38532a(0x1bd)](),config=getConfiguration(),io['to'](_0x38532a(0x22a))[_0x38532a(0x251)](_0x38532a(0x330),config);}function updateLive(_0x541588,_0x5a766e){const _0x56dec0=_0x3aeeec;dbConfig[_0x56dec0(0x274)](_0x56dec0(0x330))[_0x56dec0(0x210)]({'botID':_0x541588})[_0x56dec0(0x1b6)]({'live':_0x5a766e})[_0x56dec0(0x1bd)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x56dec0(0x330),config);}function updateBotName(_0x49e1ff,_0x45dde9){const _0x484d20=_0x3aeeec;dbConfig[_0x484d20(0x274)]('bots')[_0x484d20(0x210)]({'botID':_0x49e1ff})[_0x484d20(0x1b6)]({'botname':_0x45dde9})[_0x484d20(0x1bd)](),config=getConfiguration(),io['to'](_0x484d20(0x22a))[_0x484d20(0x251)](_0x484d20(0x330),config);}function updateBotManager(){const _0x539433=_0x3aeeec;config=getConfiguration(),io['to'](_0x539433(0x22a))[_0x539433(0x251)](_0x539433(0x330),config);}function toggleBotMode(_0x4ee6a3){const _0x3dcfc6=_0x3aeeec;if(pid[_0x4ee6a3])pid[_0x4ee6a3][_0x3dcfc6(0x32b)]({'function':_0x3dcfc6(0x29f),'args':null});else{const _0x4cf46b=configpath+_0x3dcfc6(0x26a)+_0x4ee6a3+_0x3dcfc6(0x1d3),_0x170552=fs[_0x3dcfc6(0x2fd)](_0x4cf46b),_0x371525=JSON[_0x3dcfc6(0x2d5)](_0x170552),_0x616104=_0x371525[_0x3dcfc6(0x204)][0x0][_0x3dcfc6(0x278)];_0x371525[_0x3dcfc6(0x204)][0x0][_0x3dcfc6(0x278)]=!_0x616104;const _0x3138dc=JSON[_0x3dcfc6(0x22f)](_0x371525,null,0x2);fs[_0x3dcfc6(0x23c)](_0x4cf46b,_0x3138dc),config=getConfiguration(),io['to']('botmanager')['emit'](_0x3dcfc6(0x330),config);}}function telegramError(_0x159d83){const _0x30ca89=_0x3aeeec;console[_0x30ca89(0x25b)](getTimeStamp()+_0x30ca89(0x2f2));}function validateTelegram(_0x417d34){const _0x57838d=_0x3aeeec;if(_0x417d34[_0x57838d(0x21e)][_0x57838d(0x2f1)]!=settings[_0x57838d(0x27f)]&&'@'+_0x417d34['from'][_0x57838d(0x2f1)]!=settings[_0x57838d(0x27f)])return tgBot[_0x57838d(0x30a)](_0x417d34[_0x57838d(0x2a6)]['id'],_0x57838d(0x224),{'parse_mode':_0x57838d(0x2b0)})['catch'](_0x37da98=>{telegramError(_0x37da98);}),![];return!![];}async function initTelegram(){const _0x5ec668=_0x3aeeec;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5ec668(0x1d0)],{'polling':!![]});let _0x3be59f=_0x5ec668(0x28d);_0x3be59f+='\x0a',_0x3be59f+=_0x5ec668(0x200),_0x3be59f+='/disable\x20-\x20disable\x20notifications\x0a',_0x3be59f+=_0x5ec668(0x21d),_0x3be59f+=_0x5ec668(0x2fe),_0x3be59f+=_0x5ec668(0x23d),_0x3be59f+='/off\x20-\x20stop\x20bot(s)\x0a',_0x3be59f+=_0x5ec668(0x32f),_0x3be59f+=_0x5ec668(0x1c1),_0x3be59f+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x3be59f+=_0x5ec668(0x1ee),_0x3be59f+=_0x5ec668(0x1c8),_0x3be59f+=_0x5ec668(0x21f);let _0x275c67=_0x5ec668(0x2c7);_0x275c67+='\x0a',_0x275c67+=_0x3be59f,tgBot[_0x5ec668(0x2f8)](/\/start/,_0x173823=>{const _0x4ebafb=_0x5ec668;if(!validateTelegram(_0x173823))return;if(settings[_0x4ebafb(0x20e)]!=_0x173823['chat']['id'])updateSetting('telegramChatId',_0x173823['chat']['id']);updateSetting(_0x4ebafb(0x24b),!![]),tgBot[_0x4ebafb(0x30a)](_0x173823['chat']['id'],_0x275c67)[_0x4ebafb(0x306)](_0x5a4c88=>{telegramError(_0x5a4c88);});}),tgBot[_0x5ec668(0x2f8)](/\/enable/,_0x3c133a=>{const _0x16e4ab=_0x5ec668;if(!validateTelegram(_0x3c133a))return;if(settings[_0x16e4ab(0x20e)]!=_0x3c133a[_0x16e4ab(0x2a6)]['id'])updateSetting(_0x16e4ab(0x20e),_0x3c133a[_0x16e4ab(0x2a6)]['id']);updateSetting(_0x16e4ab(0x24b),!![]),tgBot[_0x16e4ab(0x30a)](_0x3c133a[_0x16e4ab(0x2a6)]['id'],'Notifications\x20enabled')[_0x16e4ab(0x306)](_0x2baa1d=>{telegramError(_0x2baa1d);});}),tgBot['onText'](/\/config/,async _0x50c709=>{const _0x1f77ab=_0x5ec668;if(!validateTelegram(_0x50c709))return;tgBot[_0x1f77ab(0x221)](_0x1f77ab(0x31f)),tgBot[_0x1f77ab(0x30a)](_0x50c709[_0x1f77ab(0x2a6)]['id'],_0x1f77ab(0x329),{'reply_markup':{'inline_keyboard':[[{'text':_0x1f77ab(0x261),'callback_data':_0x1f77ab(0x2e1)},{'text':_0x1f77ab(0x2c4),'callback_data':_0x1f77ab(0x24c)},{'text':'All','callback_data':_0x1f77ab(0x1f9)}]]}})[_0x1f77ab(0x306)](_0x1db240=>{telegramError(_0x1db240);}),tgBot['on']('callback_query',async _0x1c9287=>{const _0x1e2406=_0x1f77ab,_0x1b028c=_0x1c9287['data'],_0x468be8=_0x1c9287['message'];tgBot[_0x1e2406(0x317)](_0x1c9287['id'])[_0x1e2406(0x24d)](async()=>{const _0x1f2b24=_0x1e2406;_0x1b028c==_0x1f2b24(0x2e1)&&(updateSetting(_0x1f2b24(0x288),'orders'),updateSetting(_0x1f2b24(0x24b),!![]),await tgBot[_0x1f2b24(0x30a)](_0x468be8[_0x1f2b24(0x2a6)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x1f2b24(0x306)](_0x51d2cf=>{telegramError(_0x51d2cf);}));_0x1b028c==_0x1f2b24(0x24c)&&(updateSetting(_0x1f2b24(0x288),_0x1f2b24(0x24c)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x468be8[_0x1f2b24(0x2a6)]['id'],_0x1f2b24(0x296))['catch'](_0xb2039f=>{telegramError(_0xb2039f);}));_0x1b028c==_0x1f2b24(0x1f9)&&(updateSetting(_0x1f2b24(0x288),_0x1f2b24(0x1f9)),updateSetting(_0x1f2b24(0x24b),!![]),await tgBot['sendMessage'](_0x468be8[_0x1f2b24(0x2a6)]['id'],_0x1f2b24(0x2f0))[_0x1f2b24(0x306)](_0xf3583f=>{telegramError(_0xf3583f);}));if(!settings[_0x1f2b24(0x20e)])tgBot['sendMessage'](_0x468be8['chat']['id'],_0x1f2b24(0x22c))[_0x1f2b24(0x306)](_0xca4485=>{telegramError(_0xca4485);});}),tgBot[_0x1e2406(0x221)](_0x1e2406(0x31f));});}),tgBot[_0x5ec668(0x2f8)](/\/status/,_0x3ac079=>{const _0x55078d=_0x5ec668;if(!validateTelegram(_0x3ac079))return;const _0x56f4ad=getBotsWithMode();let _0x560587='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x55078d(0x1d7)](_0x2cee79=>{const _0x3aece9=_0x55078d,_0x4c34d0=_0x56f4ad[_0x3aece9(0x210)](_0x4f904c=>_0x4f904c['botID']==_0x2cee79[_0x3aece9(0x2b6)])[_0x3aece9(0x2b9)];_0x560587+='Bot\x20'+_0x2cee79['botID']+':\x20'+_0x2cee79['status']+_0x3aece9(0x2f6)+_0x4c34d0+_0x3aece9(0x2f6)+_0x2cee79['live']+'\x0a';}),_0x560587+='\x0a',_0x560587+=_0x55078d(0x1bf),_0x560587+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':_0x55078d(0x2ea),_0x560587+=settings[_0x55078d(0x24b)]?settings[_0x55078d(0x288)]==_0x55078d(0x1f9)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x55078d(0x2c6)+settings[_0x55078d(0x288)]+_0x55078d(0x27d):'',tgBot['sendMessage'](_0x3ac079[_0x55078d(0x2a6)]['id'],_0x560587,{'parse_mode':_0x55078d(0x2b0)})['catch'](_0x267f2a=>{telegramError(_0x267f2a);});}),tgBot[_0x5ec668(0x2f8)](/\/restart/,_0x4d7d57=>{const _0x306e45=_0x5ec668;if(!validateTelegram(_0x4d7d57))return;tgBot['removeListener'](_0x306e45(0x31f));const _0x50fa72=getEnabledBots();if(_0x50fa72['length']==0x0)tgBot[_0x306e45(0x30a)](_0x4d7d57['chat']['id'],_0x306e45(0x311))[_0x306e45(0x306)](_0x5adbeb=>{telegramError(_0x5adbeb);});else{if(_0x50fa72[_0x306e45(0x323)]>0x1)_0x50fa72[_0x306e45(0x316)]({'botID':_0x306e45(0x1f9)});let _0x44fb79=[],_0x4c9de1=[];const _0x2a5135=_0x50fa72[_0x306e45(0x323)]%0x4==0x0||_0x50fa72[_0x306e45(0x323)]%0x4==0x3||_0x50fa72[_0x306e45(0x323)]%0x3==0x1?0x4:0x3;let _0x5318dd=0x0;_0x50fa72[_0x306e45(0x1d7)]((_0x46944a,_0x1fb41b)=>{const _0x45053e=_0x306e45;if(_0x1fb41b%_0x2a5135==0x0)_0x4c9de1=[];_0x4c9de1[_0x45053e(0x316)]({'text':_0x46944a['botID']=='all'?_0x45053e(0x1c0):'Bot\x20'+_0x46944a[_0x45053e(0x2b6)],'callback_data':_0x46944a[_0x45053e(0x2b6)]}),_0x1fb41b%_0x2a5135==0x0&&(_0x44fb79[_0x5318dd]=_0x4c9de1,_0x5318dd++);}),tgBot['sendMessage'](_0x4d7d57[_0x306e45(0x2a6)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x44fb79}})[_0x306e45(0x306)](_0x53d6a9=>{telegramError(_0x53d6a9);}),tgBot['on']('callback_query',async _0x225178=>{const _0x3ed3aa=_0x306e45,_0xc47240=_0x225178[_0x3ed3aa(0x1de)],_0x479363=_0x225178[_0x3ed3aa(0x226)];tgBot[_0x3ed3aa(0x317)](_0x225178['id'])['then'](async()=>{const _0x55f4ab=_0x3ed3aa;_0xc47240==_0x55f4ab(0x1f9)?(tgBot[_0x55f4ab(0x30a)](_0x479363[_0x55f4ab(0x2a6)]['id'],_0x55f4ab(0x324))[_0x55f4ab(0x306)](_0xbbacf4=>{telegramError(_0xbbacf4);}),config['forEach'](_0x24d94b=>{const _0x1c0333=_0x55f4ab;restartBot(_0x24d94b[_0x1c0333(0x2b6)]);})):(tgBot[_0x55f4ab(0x30a)](_0x479363[_0x55f4ab(0x2a6)]['id'],_0x55f4ab(0x263)+_0xc47240)[_0x55f4ab(0x306)](_0x3ec99d=>{telegramError(_0x3ec99d);}),restartBot(_0xc47240));}),tgBot[_0x3ed3aa(0x221)](_0x3ed3aa(0x31f));});}}),tgBot['onText'](/\/on/,_0x17b746=>{const _0x247099=_0x5ec668;if(!validateTelegram(_0x17b746))return;tgBot['removeListener']('callback_query');const _0x1bd221=getDisabledBots();if(_0x1bd221[_0x247099(0x323)]==0x0)tgBot[_0x247099(0x30a)](_0x17b746[_0x247099(0x2a6)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x247099(0x306)](_0x1cc64e=>{telegramError(_0x1cc64e);});else{if(_0x1bd221[_0x247099(0x323)]>0x1)_0x1bd221['push']({'botID':_0x247099(0x1f9)});let _0x4eb1fb=[],_0x551384=[];const _0x39c457=_0x1bd221[_0x247099(0x323)]%0x4==0x0||_0x1bd221[_0x247099(0x323)]%0x4==0x3||_0x1bd221[_0x247099(0x323)]%0x3==0x1?0x4:0x3;let _0x2ebd2e=0x0;_0x1bd221[_0x247099(0x1d7)]((_0x3d8714,_0x582cf8)=>{const _0x41acac=_0x247099;if(_0x582cf8%_0x39c457==0x0)_0x551384=[];_0x551384[_0x41acac(0x316)]({'text':_0x3d8714['botID']==_0x41acac(0x1f9)?_0x41acac(0x1c0):_0x41acac(0x1dc)+_0x3d8714[_0x41acac(0x2b6)],'callback_data':_0x3d8714[_0x41acac(0x2b6)]}),_0x582cf8%_0x39c457==0x0&&(_0x4eb1fb[_0x2ebd2e]=_0x551384,_0x2ebd2e++);}),tgBot['sendMessage'](_0x17b746[_0x247099(0x2a6)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x4eb1fb}})[_0x247099(0x306)](_0x54e9d7=>{telegramError(_0x54e9d7);}),tgBot['on'](_0x247099(0x31f),async _0x303cb5=>{const _0x35aef7=_0x247099,_0x1e4206=_0x303cb5[_0x35aef7(0x1de)],_0x3eecdf=_0x303cb5[_0x35aef7(0x226)];tgBot['answerCallbackQuery'](_0x303cb5['id'])[_0x35aef7(0x24d)](async()=>{const _0x37ecb1=_0x35aef7;_0x1e4206==_0x37ecb1(0x1f9)?(tgBot[_0x37ecb1(0x30a)](_0x3eecdf[_0x37ecb1(0x2a6)]['id'],_0x37ecb1(0x1ca))[_0x37ecb1(0x306)](_0x2e9c14=>{telegramError(_0x2e9c14);}),_0x1bd221[_0x37ecb1(0x1d7)](_0x3cb2f7=>{const _0x56b0ab=_0x37ecb1;if(_0x3cb2f7[_0x56b0ab(0x2b6)]!='all')toggleBot(_0x3cb2f7['botID'],toggleStatus(_0x3cb2f7[_0x56b0ab(0x2b6)]),_0x56b0ab(0x309));})):(tgBot[_0x37ecb1(0x30a)](_0x3eecdf['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1e4206)[_0x37ecb1(0x306)](_0xbd3446=>{telegramError(_0xbd3446);}),toggleBot(_0x1e4206,toggleStatus(_0x1e4206),_0x37ecb1(0x309)));}),tgBot[_0x35aef7(0x221)](_0x35aef7(0x31f));});}}),tgBot['onText'](/\/off/,_0x3829ab=>{const _0x3476aa=_0x5ec668;if(!validateTelegram(_0x3829ab))return;tgBot[_0x3476aa(0x221)](_0x3476aa(0x31f));const _0x34ee40=getEnabledBots();if(_0x34ee40[_0x3476aa(0x323)]==0x0)tgBot['sendMessage'](_0x3829ab['chat']['id'],_0x3476aa(0x311))[_0x3476aa(0x306)](_0x1c2831=>{telegramError(_0x1c2831);});else{if(_0x34ee40['length']>0x1)_0x34ee40[_0x3476aa(0x316)]({'botID':_0x3476aa(0x1f9)});let _0x32aaf9=[],_0x38dfe6=[];const _0x4ff4a4=_0x34ee40[_0x3476aa(0x323)]%0x4==0x0||_0x34ee40[_0x3476aa(0x323)]%0x4==0x3||_0x34ee40[_0x3476aa(0x323)]%0x3==0x1?0x4:0x3;let _0x28edc5=0x0;_0x34ee40['forEach']((_0x596a55,_0x1d74d6)=>{const _0x265999=_0x3476aa;if(_0x1d74d6%_0x4ff4a4==0x0)_0x38dfe6=[];_0x38dfe6[_0x265999(0x316)]({'text':_0x596a55['botID']==_0x265999(0x1f9)?'All\x20bots':_0x265999(0x1dc)+_0x596a55[_0x265999(0x2b6)],'callback_data':_0x596a55[_0x265999(0x2b6)]}),_0x1d74d6%_0x4ff4a4==0x0&&(_0x32aaf9[_0x28edc5]=_0x38dfe6,_0x28edc5++);}),tgBot['sendMessage'](_0x3829ab[_0x3476aa(0x2a6)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x32aaf9}})[_0x3476aa(0x306)](_0x2dd4de=>{telegramError(_0x2dd4de);}),tgBot['on']('callback_query',async _0x288e9a=>{const _0x37c218=_0x3476aa,_0x5cf402=_0x288e9a[_0x37c218(0x1de)],_0x3ba5ca=_0x288e9a[_0x37c218(0x226)];tgBot[_0x37c218(0x317)](_0x288e9a['id'])[_0x37c218(0x24d)](async()=>{const _0x1a90ff=_0x37c218;_0x5cf402==_0x1a90ff(0x1f9)?(tgBot[_0x1a90ff(0x30a)](_0x3ba5ca[_0x1a90ff(0x2a6)]['id'],_0x1a90ff(0x279))[_0x1a90ff(0x306)](_0x5b1b3a=>{telegramError(_0x5b1b3a);}),_0x34ee40[_0x1a90ff(0x1d7)](_0x197e6f=>{const _0x50b266=_0x1a90ff;if(_0x197e6f[_0x50b266(0x2b6)]!=_0x50b266(0x1f9))toggleBot(_0x197e6f['botID'],toggleStatus(_0x197e6f[_0x50b266(0x2b6)]),_0x50b266(0x309));})):(tgBot[_0x1a90ff(0x30a)](_0x3ba5ca[_0x1a90ff(0x2a6)]['id'],_0x1a90ff(0x1ec)+_0x5cf402)[_0x1a90ff(0x306)](_0xffa047=>{telegramError(_0xffa047);}),toggleBot(_0x5cf402,toggleStatus(_0x5cf402),_0x1a90ff(0x309)));}),tgBot[_0x37c218(0x221)]('callback_query');});}}),tgBot[_0x5ec668(0x2f8)](/\/portfolio/,_0x4b5db4=>{const _0x3ff33c=_0x5ec668;if(!validateTelegram(_0x4b5db4))return;tgBot['removeListener']('callback_query');const _0x3c11bb=getEnabledBots();if(_0x3c11bb[_0x3ff33c(0x323)]==0x0)tgBot['sendMessage'](_0x4b5db4[_0x3ff33c(0x2a6)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x3ff33c(0x306)](_0x2dc152=>{telegramError(_0x2dc152);});else{if(_0x3c11bb['length']>0x1){let _0x313128=[],_0x45f518=[];const _0x438db0=_0x3c11bb[_0x3ff33c(0x323)]%0x4==0x0||_0x3c11bb[_0x3ff33c(0x323)]%0x4==0x3||_0x3c11bb['length']%0x3==0x1?0x4:0x3;let _0x3180e3=0x0;_0x3c11bb[_0x3ff33c(0x1d7)]((_0x5851b7,_0x1fefbd)=>{const _0x53d63a=_0x3ff33c;if(_0x1fefbd%_0x438db0==0x0)_0x45f518=[];_0x45f518['push']({'text':_0x53d63a(0x1dc)+_0x5851b7[_0x53d63a(0x2b6)],'callback_data':_0x5851b7[_0x53d63a(0x2b6)]}),_0x1fefbd%_0x438db0==0x0&&(_0x313128[_0x3180e3]=_0x45f518,_0x3180e3++);}),tgBot[_0x3ff33c(0x30a)](_0x4b5db4['chat']['id'],_0x3ff33c(0x2da),{'reply_markup':{'inline_keyboard':_0x313128}})['catch'](_0x156559=>{telegramError(_0x156559);}),tgBot['on'](_0x3ff33c(0x31f),async _0x8493e7=>{const _0x1ebb5e=_0x3ff33c,_0x13befb=_0x8493e7[_0x1ebb5e(0x1de)],_0x4afb59=_0x8493e7[_0x1ebb5e(0x226)];tgBot[_0x1ebb5e(0x317)](_0x8493e7['id'])['then'](async()=>{const _0x240753=_0x1ebb5e;if(pid[_0x13befb])pid[_0x13befb][_0x240753(0x32b)]({'function':_0x240753(0x1be),'args':null});}),tgBot[_0x1ebb5e(0x221)]('callback_query');});}else{const _0x7a0da9=_0x3c11bb[0x0]['botID'];if(pid[_0x7a0da9])pid[_0x7a0da9][_0x3ff33c(0x32b)]({'function':_0x3ff33c(0x1be),'args':null});}}}),tgBot[_0x5ec668(0x2f8)](/\/update/,async _0x581e41=>{const _0x1934ea=_0x5ec668;if(!validateTelegram(_0x581e41))return;tgBot[_0x1934ea(0x221)](_0x1934ea(0x31f)),await getMessages();if(!updateAvailable)tgBot[_0x1934ea(0x30a)](_0x581e41['chat']['id'],_0x1934ea(0x231))[_0x1934ea(0x306)](_0x1957f2=>{telegramError(_0x1957f2);});else!validInstallation?tgBot[_0x1934ea(0x30a)](_0x581e41[_0x1934ea(0x2a6)]['id'],_0x1934ea(0x2bf))[_0x1934ea(0x306)](_0x50156a=>{telegramError(_0x50156a);}):(tgBot[_0x1934ea(0x30a)](_0x581e41[_0x1934ea(0x2a6)]['id'],_0x1934ea(0x31c),{'reply_markup':{'inline_keyboard':[[{'text':_0x1934ea(0x242),'callback_data':_0x1934ea(0x314)},{'text':'No','callback_data':'no'}]]}})[_0x1934ea(0x306)](_0x49b244=>{telegramError(_0x49b244);}),tgBot['on'](_0x1934ea(0x31f),async _0xc93d03=>{const _0x275297=_0x1934ea,_0xba4d6e=_0xc93d03['data'],_0x40ad0e=_0xc93d03[_0x275297(0x226)];tgBot['answerCallbackQuery'](_0xc93d03['id'])['then'](async()=>{const _0x453181=_0x275297;_0xba4d6e==_0x453181(0x314)&&(await tgBot[_0x453181(0x30a)](_0x40ad0e['chat']['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x176599=>{telegramError(_0x176599);}),updateBB());_0xba4d6e=='no'&&await tgBot[_0x453181(0x30a)](_0x40ad0e[_0x453181(0x2a6)]['id'],_0x453181(0x1c4))[_0x453181(0x306)](_0x10d5a2=>{telegramError(_0x10d5a2);});if(!settings[_0x453181(0x20e)])tgBot[_0x453181(0x30a)](_0x40ad0e['chat']['id'],_0x453181(0x22c))[_0x453181(0x306)](_0x331c0a=>{telegramError(_0x331c0a);});}),tgBot[_0x275297(0x221)](_0x275297(0x31f));}));}),tgBot[_0x5ec668(0x2f8)](/\/toggle/,_0x21fab5=>{const _0x14a208=_0x5ec668;if(!validateTelegram(_0x21fab5))return;tgBot[_0x14a208(0x221)](_0x14a208(0x31f));const _0x3748de=getBotsWithMode();if(_0x3748de['length']==0x0)tgBot[_0x14a208(0x30a)](_0x21fab5[_0x14a208(0x2a6)]['id'],_0x14a208(0x311))[_0x14a208(0x306)](_0x5a72bf=>{telegramError(_0x5a72bf);});else{let _0x32c50f=[],_0x5e54dd=[];const _0x18224a=0x2;let _0x209046=0x0;_0x3748de[_0x14a208(0x1d7)]((_0x2abc8c,_0x28637b)=>{const _0x55d17c=_0x14a208;if(_0x28637b%_0x18224a==0x0)_0x5e54dd=[];_0x5e54dd['push']({'text':_0x55d17c(0x1dc)+_0x2abc8c['botID']+'\x20('+_0x2abc8c[_0x55d17c(0x2b9)]+')','callback_data':_0x2abc8c['botID']}),_0x28637b%_0x18224a==0x0&&(_0x32c50f[_0x209046]=_0x5e54dd,_0x209046++);}),tgBot[_0x14a208(0x30a)](_0x21fab5[_0x14a208(0x2a6)]['id'],_0x14a208(0x2e4),{'reply_markup':{'inline_keyboard':_0x32c50f}})[_0x14a208(0x306)](_0x4fc2e6=>{telegramError(_0x4fc2e6);}),tgBot['on'](_0x14a208(0x31f),async _0x29e65d=>{const _0x3c9787=_0x14a208,_0x4c26ea=_0x29e65d[_0x3c9787(0x1de)],_0x186bd8=_0x29e65d['message'];tgBot[_0x3c9787(0x317)](_0x29e65d['id'])['then'](async()=>{const _0x2c5385=_0x3c9787,_0x510a0c=_0x3748de[_0x2c5385(0x210)](_0x228788=>_0x228788[_0x2c5385(0x2b6)]==_0x4c26ea),_0x5609eb=_0x510a0c[_0x2c5385(0x2b9)]==_0x2c5385(0x1f8)?_0x2c5385(0x1b2):'auto';tgBot[_0x2c5385(0x30a)](_0x186bd8[_0x2c5385(0x2a6)]['id'],_0x2c5385(0x1e9)+_0x4c26ea+_0x2c5385(0x2e5)+_0x5609eb+'\x20mode')[_0x2c5385(0x306)](_0x187386=>{telegramError(_0x187386);}),toggleBotMode(_0x4c26ea);}),tgBot[_0x3c9787(0x221)](_0x3c9787(0x31f));});}}),tgBot[_0x5ec668(0x2f8)](/\/names/,_0x56dd30=>{const _0x2a8de8=_0x5ec668;if(!validateTelegram(_0x56dd30))return;let _0x2e2151='';config['forEach'](_0x3b65c9=>{const _0x4002db=_0xb1d3;_0x2e2151+=_0x4002db(0x1dc)+_0x3b65c9[_0x4002db(0x2b6)]+':\x20'+_0x3b65c9['botname']+'\x0a';}),tgBot[_0x2a8de8(0x30a)](_0x56dd30[_0x2a8de8(0x2a6)]['id'],_0x2e2151,{'parse_mode':_0x2a8de8(0x2b0)})[_0x2a8de8(0x306)](_0x12e8bb=>{telegramError(_0x12e8bb);});}),tgBot['onText'](/\/disable/,_0x232085=>{const _0x3ac76c=_0x5ec668;if(!validateTelegram(_0x232085))return;tgBot[_0x3ac76c(0x30a)](_0x232085[_0x3ac76c(0x2a6)]['id'],_0x3ac76c(0x20f))[_0x3ac76c(0x306)](_0x526968=>{telegramError(_0x526968);}),updateSetting(_0x3ac76c(0x24b),![]);}),tgBot[_0x5ec668(0x2f8)](/\/help/,_0x1b8e29=>{const _0x16cf6d=_0x5ec668;if(!validateTelegram(_0x1b8e29))return;tgBot['sendMessage'](_0x1b8e29[_0x16cf6d(0x2a6)]['id'],_0x3be59f)['catch'](_0x5ee006=>{telegramError(_0x5ee006);});}),tgBot['on'](_0x5ec668(0x321),_0x1278d8=>{const _0x149f96=_0x5ec668;_0x1278d8[_0x149f96(0x2bd)]()[_0x149f96(0x262)](_0x149f96(0x29a))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x149f96(0x31d)](),tgBot=null,io['to']('botmanager')[_0x149f96(0x251)](_0x149f96(0x2ac),_0x149f96(0x20a)));}),process[_0x5ec668(0x256)](_0x5ec668(0x222),()=>{const _0x76057e=_0x5ec668;if(tgBot)tgBot[_0x76057e(0x31d)]();process['exit'](0x1);}),process[_0x5ec668(0x256)]('SIGTERM',()=>{const _0x442e9a=_0x5ec668;if(tgBot)tgBot['stopPolling']();process[_0x442e9a(0x304)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x8804aa,_0x50ba0f){const _0x23dfae=_0x3aeeec;if(settings[_0x23dfae(0x24b)]){if(settings[_0x23dfae(0x288)]==_0x23dfae(0x1f9)||(_0x50ba0f['type']==_0x23dfae(0x1f6)||_0x50ba0f[_0x23dfae(0x32d)]=='success')&&settings[_0x23dfae(0x288)]=='alerts'||_0x50ba0f[_0x23dfae(0x32d)]==_0x23dfae(0x1ed)&&settings[_0x23dfae(0x288)]=='orders'){if(tgBot&&settings[_0x23dfae(0x20e)]){if(_0x50ba0f[_0x23dfae(0x2d4)])tgBot[_0x23dfae(0x30a)](settings['telegramChatId'],_0x50ba0f[_0x23dfae(0x28a)]+_0x23dfae(0x29b)+_0x50ba0f[_0x23dfae(0x1e5)])['catch'](_0x1cd430=>{telegramError(_0x1cd430);});else tgBot['sendMessage'](settings[_0x23dfae(0x20e)],'Bot\x20'+_0x8804aa+_0x23dfae(0x29b)+_0x50ba0f['event'])[_0x23dfae(0x306)](_0x445fe7=>{telegramError(_0x445fe7);});}}}}async function sendTelegramMsg(_0x45420b,_0x229ebe=_0x3aeeec(0x2b0)){const _0x61b08e=_0x3aeeec;return settings[_0x61b08e(0x24b)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x61b08e(0x30a)](settings['telegramChatId'],_0x45420b,{'parse_mode':_0x229ebe})[_0x61b08e(0x306)](_0x4cad22=>{telegramError(_0x4cad22);}),!![]):![];}function getDeviceWithIp(_0x4da7eb){const _0x13b5ee=_0x3aeeec;return devices[_0x13b5ee(0x210)](_0x327cf0=>_0x327cf0['ip']===_0x4da7eb);}function temporaryAccess2FA(_0x56d331,_0xa0e17c){const _0x9fcb19=_0x3aeeec;let _0x48aafc=new Date(),_0x207fa2=![];if(lastIpApproval){if(_0x48aafc-lastIpApproval<0x1388)_0x207fa2=!![];}lastIpApproval=new Date();if(_0x207fa2)return;tgBot&&settings[_0x9fcb19(0x20e)]&&(tgBot['removeListener'](_0x9fcb19(0x31f)),tgBot['sendMessage'](settings[_0x9fcb19(0x20e)],_0x9fcb19(0x235)+normalizeIP(_0xa0e17c)[_0x9fcb19(0x301)]+_0x9fcb19(0x29c),{'parse_mode':_0x9fcb19(0x2b0),'reply_markup':{'inline_keyboard':[[{'text':_0x9fcb19(0x30d),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x9fcb19(0x217),'callback_data':'30'},{'text':_0x9fcb19(0x2cf),'callback_data':_0x9fcb19(0x2cf)}]]}})[_0x9fcb19(0x306)](_0x32ba09=>{telegramError(_0x32ba09);}),tgBot['on'](_0x9fcb19(0x31f),async _0x4c17c4=>{const _0x16eb76=_0x9fcb19,_0x3ae6b0=_0x4c17c4[_0x16eb76(0x1de)],_0x1c0d79=_0x4c17c4['message'];tgBot['answerCallbackQuery'](_0x4c17c4['id'])[_0x16eb76(0x24d)](async()=>{const _0x1c5908=_0x16eb76;devices[_0x56d331][_0x1c5908(0x244)]={'clientip':_0xa0e17c,'timestamp':new Date()[_0x1c5908(0x2a9)](),'expiry':_0x3ae6b0},_0x3ae6b0!=_0x1c5908(0x2cf)?(await tgBot['sendMessage'](_0x1c0d79[_0x1c5908(0x2a6)]['id'],_0x1c5908(0x239)+_0x3ae6b0+_0x1c5908(0x2ae),{'parse_mode':'HTML'})[_0x1c5908(0x306)](_0x2a911c=>{telegramError(_0x2a911c);}),io['to'](_0x56d331)[_0x1c5908(0x251)](_0x1c5908(0x289),{'access':{'allow':![],'reason':_0x1c5908(0x276),'token':null}})):(await tgBot[_0x1c5908(0x30a)](_0x1c0d79[_0x1c5908(0x2a6)]['id'],_0x1c5908(0x22e))[_0x1c5908(0x306)](_0x3da13c=>{telegramError(_0x3da13c);}),io['to'](_0x56d331)[_0x1c5908(0x251)](_0x1c5908(0x289),{'access':{'allow':![],'reason':_0x1c5908(0x2e9),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x17e056,_0x127cb9){const _0x4a76e7=_0x3aeeec;tgBot&&settings[_0x4a76e7(0x20e)]&&(tgBot[_0x4a76e7(0x221)](_0x4a76e7(0x31f)),tgBot[_0x4a76e7(0x30a)](settings['telegramChatId'],_0x4a76e7(0x313)+normalizeIP(_0x127cb9)['show']+_0x4a76e7(0x29c),{'parse_mode':_0x4a76e7(0x2b0),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x4a76e7(0x2cf),'callback_data':_0x4a76e7(0x2cf)}]]}})[_0x4a76e7(0x306)](_0x128336=>{telegramError(_0x128336);}),tgBot['on']('callback_query',async _0x1ddb9a=>{const _0x7e73f9=_0x4a76e7,_0x1c03c5=_0x1ddb9a[_0x7e73f9(0x1de)],_0x133684=_0x1ddb9a['message'];tgBot[_0x7e73f9(0x317)](_0x1ddb9a['id'])[_0x7e73f9(0x24d)](async()=>{const _0x28af23=_0x7e73f9;devices[_0x17e056][_0x28af23(0x1f5)]={'clientip':_0x127cb9,'timestamp':new Date()[_0x28af23(0x2a9)](),'expiry':_0x1c03c5},_0x1c03c5!=_0x28af23(0x2cf)?(await tgBot['sendMessage'](_0x133684[_0x28af23(0x2a6)]['id'],_0x28af23(0x243),{'parse_mode':_0x28af23(0x2b0)})[_0x28af23(0x306)](_0x2843d7=>{telegramError(_0x2843d7);}),io['to'](_0x17e056)[_0x28af23(0x251)](_0x28af23(0x289),{'access':{'allow':![],'reason':_0x28af23(0x276),'token':null}})):(await tgBot[_0x28af23(0x30a)](_0x133684[_0x28af23(0x2a6)]['id'],_0x28af23(0x26b))[_0x28af23(0x306)](_0x2ab1e0=>{telegramError(_0x2ab1e0);}),io['to'](_0x17e056)['emit'](_0x28af23(0x289),{'access':{'allow':![],'reason':_0x28af23(0x1cf),'token':null}}));}),tgBot[_0x7e73f9(0x221)](_0x7e73f9(0x31f));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x465c3c=_0x3aeeec;return dbConfig[_0x465c3c(0x274)](_0x465c3c(0x330))[_0x465c3c(0x1b5)](_0x465c3c(0x2b6))[_0x465c3c(0x28f)]({'status':_0x465c3c(0x1e3)})[_0x465c3c(0x25a)]()||[];}function getDisabledBots(){const _0x152fa9=_0x3aeeec;return dbConfig[_0x152fa9(0x274)]('bots')[_0x152fa9(0x1b5)]('botID')[_0x152fa9(0x28f)]({'status':_0x152fa9(0x211)})[_0x152fa9(0x25a)]()||[];}function getBotsWithMode(){const _0x200770=_0x3aeeec,_0x576c73=dbConfig[_0x200770(0x274)](_0x200770(0x330))[_0x200770(0x1b5)](_0x200770(0x2b6))[_0x200770(0x25a)]()||[];return _0x576c73['forEach'](_0x4946a2=>{const _0x3ad68b=_0x200770,_0x267a9c=configpath+_0x3ad68b(0x26a)+_0x4946a2[_0x3ad68b(0x2b6)]+_0x3ad68b(0x1d3),_0xe95e98=fs[_0x3ad68b(0x20b)](_0x267a9c);if(_0xe95e98){const _0x216dcb=fs['readFileSync'](_0x267a9c);try{const _0x12df37=JSON[_0x3ad68b(0x2d5)](_0x216dcb),_0xd9277=_0x12df37?_0x12df37[_0x3ad68b(0x204)][0x0]['headless']:![];_0x4946a2[_0x3ad68b(0x2b9)]=_0xd9277?_0x3ad68b(0x1f8):_0x3ad68b(0x1b2);}catch(_0x5f3e56){_0x4946a2['mode']=_0x3ad68b(0x1b2);}}else _0x4946a2[_0x3ad68b(0x2b9)]='manual';}),_0x576c73;}async function initUser(){const _0x3739c3=_0x3aeeec;if(!settings['userid']){const _0x91de88=uuidRandom();mixpanel[_0x3739c3(0x230)](_0x91de88),updateSetting('userid',_0x91de88);}}function getSettings(){const _0x12475d=_0x3aeeec;return dbSettings[_0x12475d(0x274)](_0x12475d(0x2ef))[_0x12475d(0x25a)]()||{'timeshift':0x0,'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x12475d(0x2f5)};}function getSecure(){const _0x483b38=_0x3aeeec;return dbSecure[_0x483b38(0x274)](_0x483b38(0x2fb))[_0x483b38(0x25a)]()||{};}function getBlacklist(){const _0x20fda3=_0x3aeeec;return dbSecure[_0x20fda3(0x274)](_0x20fda3(0x27c))['value']()||[];}function broadcastToBots(_0x5de462,_0x2c706a){config['forEach'](_0x3d26e6=>{const _0xe6b017=_0xb1d3;if(_0x3d26e6[_0xe6b017(0x289)]==_0xe6b017(0x1e3)&&_0x3d26e6[_0xe6b017(0x297)]==_0xe6b017(0x208)){if(pid[_0x3d26e6[_0xe6b017(0x2b6)]])pid[_0x3d26e6[_0xe6b017(0x2b6)]][_0xe6b017(0x32b)]({[_0x5de462]:_0x2c706a});}});}function storeSettings(_0x5c0763,_0x4d12dc=![]){const _0x3832ba=_0x3aeeec;_0x5c0763={...settings,..._0x5c0763};if(_0x4d12dc&&_0x5c0763[_0x3832ba(0x2de)]!='************'&&_0x5c0763['bbPassword']!=''){const _0x6077fb=crypt[_0x3832ba(0x2b1)](secure[_0x3832ba(0x32a)],_0x5c0763[_0x3832ba(0x2de)])[_0x3832ba(0x226)][_0x3832ba(0x212)]('@')[0x0],_0x1431f3=bcrypt[_0x3832ba(0x31a)](_0x6077fb,saltRounds);_0x5c0763={..._0x5c0763,'bbPassword':_0x1431f3};}if(_0x4d12dc&&_0x5c0763[_0x3832ba(0x1d0)]!=_0x3832ba(0x241)&&_0x5c0763[_0x3832ba(0x1d0)]!=''){const _0xf033e2=crypt[_0x3832ba(0x2b1)](secure[_0x3832ba(0x32a)],_0x5c0763[_0x3832ba(0x1d0)])['message'][_0x3832ba(0x212)]('@')[0x0];_0x5c0763={..._0x5c0763,'telegramToken':_0xf033e2};}const _0xf02023=_0x5c0763[_0x3832ba(0x1d0)]!=_0x3832ba(0x241)&&_0x5c0763['telegramToken']!=settings[_0x3832ba(0x1d0)]||_0x5c0763['telegramUsername']!=settings[_0x3832ba(0x27f)],_0x58fb1a=_0x5c0763[_0x3832ba(0x1d0)]==''||_0x5c0763[_0x3832ba(0x27f)]=='';if(_0xf02023)_0x5c0763[_0x3832ba(0x288)]=_0x3832ba(0x1f9);for(const [_0x1ef825,_0x49333a]of Object['entries'](_0x5c0763)){if(_0x1ef825==_0x3832ba(0x1d0)&&_0x49333a=='************'){_0x5c0763[_0x3832ba(0x1d0)]=settings[_0x3832ba(0x1d0)];continue;};if(_0x1ef825=='bbPassword'&&_0x49333a==_0x3832ba(0x241)){_0x5c0763['bbPassword']=settings[_0x3832ba(0x2de)];continue;};dbSettings[_0x3832ba(0x2e6)]('settings.'+_0x1ef825,_0x49333a)[_0x3832ba(0x1bd)]();}settings=_0x5c0763,io['to']('botmanager')['emit']('settings',cleanSettings()),broadcastToBots(_0x3832ba(0x30f),settings[_0x3832ba(0x30f)]);if(_0xf02023&&!_0x58fb1a)initTelegram();if(_0xf02023&&_0x58fb1a)disableTelegram();getAllClients()[_0x3832ba(0x1d7)](_0x38a52e=>{const _0x2af269=_0x3832ba;getSocket(_0x38a52e['id'])[_0x2af269(0x251)]('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x545a3c,_0x47ef5c){const _0x199009=_0x3aeeec;dbSettings[_0x199009(0x2e6)](_0x199009(0x2d7)+_0x545a3c,_0x47ef5c)[_0x199009(0x1bd)](),settings=getSettings(),io['to']('botmanager')[_0x199009(0x251)](_0x199009(0x2ef),cleanSettings());}function storeSecure(_0x3087ea){const _0x4db2ef=_0x3aeeec;dbSecure[_0x4db2ef(0x274)](_0x4db2ef(0x2fb))['push'](_0x3087ea)['write'](),secure=_0x3087ea;}function addBlacklist(_0x2f7976){const _0x2a942d=_0x3aeeec;cleanBlacklist();let _0x562bfd;devices[_0x2f7976][_0x2a942d(0x244)]?_0x562bfd=Math[_0x2a942d(0x253)](devices[_0x2f7976][_0x2a942d(0x244)][_0x2a942d(0x2aa)],loginExpiry):_0x562bfd=loginExpiry,dbSecure['get'](_0x2a942d(0x27c))[_0x2a942d(0x316)]({'expiry':new Date()['getTime']()+_0x562bfd*0x3c*0x3e8,'token':devices[_0x2f7976][_0x2a942d(0x1c3)][_0x2a942d(0x28e)]})[_0x2a942d(0x1bd)](),blacklist=dbSecure[_0x2a942d(0x274)](_0x2a942d(0x27c))[_0x2a942d(0x25a)]();}function _0xb1d3(_0x191d8e,_0x2e3ee7){const _0x378f44=_0x1d67();return _0xb1d3=function(_0x48bf2f,_0x421279){_0x48bf2f=_0x48bf2f-0x1b0;let _0x1d6708=_0x378f44[_0x48bf2f];return _0x1d6708;},_0xb1d3(_0x191d8e,_0x2e3ee7);}function cleanBlacklist(){const _0x300123=_0x3aeeec;let _0x18c9c0=dbSecure['get'](_0x300123(0x27c))[_0x300123(0x30c)]()[_0x300123(0x25a)](),_0x5f04b6=new Date()[_0x300123(0x2a9)]();_0x18c9c0['forEach'](_0x647469=>{const _0x4ed7de=_0x300123;_0x647469['expiry']<_0x5f04b6&&dbSecure[_0x4ed7de(0x274)](_0x4ed7de(0x27c))[_0x4ed7de(0x245)]({'expiry':_0x647469['expiry']})[_0x4ed7de(0x1bd)]();});}function initStates(){let _0x51466d=getConfiguration();_0x51466d['forEach'](_0x6d296=>{const _0x10d413=_0xb1d3;_0x6d296[_0x10d413(0x297)]=_0x10d413(0x309);}),storeConfiguration(_0x51466d);}function onKeys(){const _0x5b9aef=new RSA();return new Promise(_0x46e246=>{const _0x533341=_0xb1d3;_0x5b9aef[_0x533341(0x29e)]()[_0x533341(0x24d)](_0x2fa44=>{_0x46e246(_0x2fa44);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x16e714=_0x3aeeec;let _0x59edba=getSettings(),_0x12221d=![];!_0x59edba[_0x16e714(0x234)](_0x16e714(0x24a))&&(_0x59edba[_0x16e714(0x24a)]=0x0,_0x12221d=!![]);!_0x59edba[_0x16e714(0x234)](_0x16e714(0x2a7))&&(_0x59edba[_0x16e714(0x2a7)]=0x0,_0x12221d=!![]);!_0x59edba[_0x16e714(0x234)](_0x16e714(0x1b3))&&(_0x59edba[_0x16e714(0x1b3)]='0.0.0',_0x12221d=!![]);if(_0x12221d)storeSettings(_0x59edba);}function storeConfiguration(_0x11353c){const _0x3dc6ef=_0x3aeeec;dbConfig[_0x3dc6ef(0x274)]('bots')[_0x3dc6ef(0x245)]()[_0x3dc6ef(0x1bd)](),_0x11353c[_0x3dc6ef(0x1d7)](_0x2075de=>{delete _0x2075de['mode'];}),dbConfig[_0x3dc6ef(0x274)](_0x3dc6ef(0x330))[_0x3dc6ef(0x316)](..._0x11353c)[_0x3dc6ef(0x1bd)](),config=_0x11353c;}function resetPassword(){const _0x42bb97=_0x3aeeec;tgBot&&settings[_0x42bb97(0x20e)]&&(tgBot[_0x42bb97(0x221)](_0x42bb97(0x31f)),tgBot[_0x42bb97(0x30a)](settings[_0x42bb97(0x20e)],_0x42bb97(0x280),{'parse_mode':_0x42bb97(0x2b0),'reply_markup':{'inline_keyboard':[[{'text':_0x42bb97(0x314),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x53758d=>{telegramError(_0x53758d);}),tgBot['on'](_0x42bb97(0x31f),async _0x1abefa=>{const _0xb1d85e=_0x42bb97,_0x5b926f=_0x1abefa[_0xb1d85e(0x1de)],_0x28fd14=_0x1abefa[_0xb1d85e(0x226)];tgBot[_0xb1d85e(0x317)](_0x1abefa['id'])[_0xb1d85e(0x24d)](async()=>{const _0x2cc8cf=_0xb1d85e;if(_0x5b926f!='no'){const _0x2faa1d=0xf,_0x2d0d95='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x420194=Array[_0x2cc8cf(0x21e)](crypto['randomFillSync'](new Uint32Array(_0x2faa1d)))[_0x2cc8cf(0x2b5)](_0x531cbd=>_0x2d0d95[_0x531cbd%_0x2d0d95[_0x2cc8cf(0x323)]])[_0x2cc8cf(0x265)](''),_0x7147=bcrypt[_0x2cc8cf(0x31a)](_0x420194,saltRounds);storeSettings({'bbPassword':_0x7147}),await tgBot[_0x2cc8cf(0x30a)](_0x28fd14[_0x2cc8cf(0x2a6)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x420194,{'parse_mode':'HTML'})[_0x2cc8cf(0x306)](_0x6cf75f=>{telegramError(_0x6cf75f);});}else await tgBot['sendMessage'](_0x28fd14[_0x2cc8cf(0x2a6)]['id'],_0x2cc8cf(0x202))['catch'](_0x415183=>{telegramError(_0x415183);});}),tgBot['removeListener'](_0xb1d85e(0x31f));}));}function logging(_0x27774a){const _0x1fbd0e=_0x3aeeec;console[_0x1fbd0e(0x25b)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x27774a);if(tgBot&&settings[_0x1fbd0e(0x20e)]&&settings[_0x1fbd0e(0x288)]!=_0x1fbd0e(0x2e1))tgBot[_0x1fbd0e(0x30a)](settings[_0x1fbd0e(0x20e)],_0x1fbd0e(0x2a5)+_0x27774a)[_0x1fbd0e(0x306)](_0x3462fc=>{telegramError(_0x3462fc);});}function getServerTime(){const _0x1c62ab=_0x3aeeec,_0x2a2a90=new Date();return _0x2a2a90['getFullYear']()+'/'+(_0x2a2a90[_0x1c62ab(0x1cc)]()+0x1)[_0x1c62ab(0x2bd)]()[_0x1c62ab(0x2ca)](0x2,'0')+'/'+_0x2a2a90[_0x1c62ab(0x283)]()['toString']()[_0x1c62ab(0x2ca)](0x2,'0')+'\x20'+_0x2a2a90[_0x1c62ab(0x312)]()['toString']()[_0x1c62ab(0x2ca)](0x2,'0')+':'+_0x2a2a90['getMinutes']()[_0x1c62ab(0x2bd)]()[_0x1c62ab(0x2ca)](0x2,'0')+':'+_0x2a2a90['getSeconds']()[_0x1c62ab(0x2bd)]()[_0x1c62ab(0x2ca)](0x2,'0');}function getTimeStamp(){const _0x1a6bed=_0x3aeeec,_0x24a300=shiftedTime();return _0x24a300[_0x1a6bed(0x2a1)]()+'/'+(_0x24a300[_0x1a6bed(0x1cc)]()+0x1)['toString']()[_0x1a6bed(0x2ca)](0x2,'0')+'/'+_0x24a300['getDate']()['toString']()[_0x1a6bed(0x2ca)](0x2,'0')+'\x20'+_0x24a300[_0x1a6bed(0x312)]()[_0x1a6bed(0x2bd)]()[_0x1a6bed(0x2ca)](0x2,'0')+':'+_0x24a300[_0x1a6bed(0x291)]()[_0x1a6bed(0x2bd)]()['padStart'](0x2,'0')+':'+_0x24a300[_0x1a6bed(0x1fc)]()[_0x1a6bed(0x2bd)]()[_0x1a6bed(0x2ca)](0x2,'0');}function shiftedTime(){const _0x2071a8=_0x3aeeec,_0x1c0277=new Date();let _0x433d39=_0x1c0277;if(settings[_0x2071a8(0x30f)]&&settings[_0x2071a8(0x30f)]!==0x0)_0x433d39=fns[_0x2071a8(0x1bc)](_0x1c0277,{'hours':settings[_0x2071a8(0x30f)]});return _0x433d39;}function startScheduler(){let _0x4d6434=new Date()['getUTCHours']();_0x4d6434==0x1&&backupConfigFiles();_0x4d6434==0x9&&triggerAnalytics();_0x4d6434%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x75c864=_0x3aeeec;fs[_0x75c864(0x1e1)](configpath,{'withFileTypes':!![]})['forEach'](_0xb7b4e8=>{const _0x3d69e2=_0x75c864;if(!_0xb7b4e8[_0x3d69e2(0x1b4)]())fs['copyFileSync'](configpath+_0xb7b4e8[_0x3d69e2(0x2d2)],configbackuppath+_0xb7b4e8[_0x3d69e2(0x2d2)]);});}async function getPublicIp(){const _0x501db5=_0x3aeeec;try{const _0x45a7ca=await axios[_0x501db5(0x274)](_0x501db5(0x269));publicip=_0x45a7ca['data']['ip'];}catch(_0x4be0ba){}}async function triggerAnalytics(_0x543fff=![]){const _0x5a4d80=_0x3aeeec;if(!publicip)await getPublicIp();const _0x59bc8f=getBotsWithMode();let _0x1a43c1=0x0;_0x59bc8f[_0x5a4d80(0x1d7)](_0x23e3b2=>{const _0x329b40=_0x5a4d80;if(_0x23e3b2['status']===_0x329b40(0x1e3))_0x1a43c1++;}),mixpanel[_0x5a4d80(0x25e)](_0x5a4d80(0x281),{'distinct_id':settings[_0x5a4d80(0x22b)],'ip':publicip,'version':serverversion,'numbots':_0x59bc8f['length'],'numbotsenabled':_0x1a43c1}),!_0x543fff&&analytics[_0x5a4d80(0x1b8)]({'title':_0x5a4d80(0x2c9),'href':_0x5a4d80(0x23b),'path':'/v'+serverversion});}async function getMessages(){const _0x2a2dbb=_0x3aeeec,_0x5f4ecd=_0x2a2dbb(0x27b),_0x594918=new GraphQLClient(_0x5f4ecd),_0x3c15e7={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x361dd7=serverversion[_0x2a2dbb(0x212)]('.'),_0x41f7c6=_0x361dd7[0x0]+'.'+_0x361dd7[0x1],_0x33fdaa=Math[_0x2a2dbb(0x1c7)](settings[_0x2a2dbb(0x24a)],settings[_0x2a2dbb(0x2a7)]),_0x5da8ff={'last':parseInt(_0x33fdaa),'bbm':_0x41f7c6},_0x52dd7c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3d49d9;try{_0x3d49d9=await _0x594918[_0x2a2dbb(0x201)](_0x52dd7c,_0x5da8ff,_0x3c15e7);}catch(_0x228529){}if(_0x3d49d9&&_0x3d49d9['messages']){let _0x33b531=settings['lastmsgtelegram'];for(const _0x30f0b8 of _0x3d49d9['messages']){newMessages[_0x2a2dbb(0x316)](_0x30f0b8);if(_0x30f0b8[_0x2a2dbb(0x326)])updateSetting(_0x2a2dbb(0x1b3),_0x30f0b8[_0x2a2dbb(0x326)]);let _0x371a82=_0x30f0b8[_0x2a2dbb(0x326)]?serverversion>=_0x30f0b8['bbvNew']:![];if(!_0x371a82&&_0x30f0b8['number']>_0x33b531){if(_0x30f0b8['bbvReceive']===_0x2a2dbb(0x2cd)||serverversion[_0x2a2dbb(0x252)](_0x30f0b8['bbvReceive'])){let _0x354839=''+_0x30f0b8['title']+'\x0a\x0a'+_0x30f0b8[_0x2a2dbb(0x226)];const _0x1c7b0b=await sendTelegramMsg(toTelegramMarkdown(_0x354839),_0x2a2dbb(0x2ce));if(_0x1c7b0b)_0x33b531=_0x30f0b8['number'];}}}updateAvailable=isNewerVersion(settings[_0x2a2dbb(0x1b3)],serverversion),updateSetting(_0x2a2dbb(0x24a),_0x33b531),emitMessages();}}function emitMessages(){const _0xf7e4bb=_0x3aeeec,_0x4b4c55=settings[_0xf7e4bb(0x2a7)];let _0x4e64a1=[];newMessages[_0xf7e4bb(0x1d7)](_0x11767d=>{const _0x5ec1fd=_0xf7e4bb;_0x11767d[_0x5ec1fd(0x1b7)]>_0x4b4c55&&_0x4e64a1[_0x5ec1fd(0x316)](_0x11767d);}),_0x4e64a1[_0xf7e4bb(0x323)]>0x0&&getAllClients()['forEach'](_0x5422f4=>{const _0x14f13e=_0xf7e4bb;getSocket(_0x5422f4['id'])[_0x14f13e(0x251)](_0x14f13e(0x226),_0x4e64a1);});}function confirmMessage(_0x7b4507){updateSetting('lastmsgemitted',Number(_0x7b4507));}function isNewerVersion(_0x33e9d2,_0x168e4d){const _0x428cc0=_0x3aeeec,_0x34915a=_0x168e4d[_0x428cc0(0x212)]('.'),_0x31f538=_0x33e9d2[_0x428cc0(0x212)]('.');for(var _0x8004e6=0x0;_0x8004e6<_0x31f538[_0x428cc0(0x323)];_0x8004e6++){const _0x28c9d7=~~_0x31f538[_0x8004e6],_0x483c38=~~_0x34915a[_0x8004e6];if(_0x28c9d7>_0x483c38)return!![];if(_0x28c9d7<_0x483c38)return![];}return![];}function toTelegramMarkdown(_0x1e022e){const _0x1918df=_0x3aeeec,_0x1f4f73=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xdbd0b9=/\*{2}(.+?)\*{2}/gim;return _0x1e022e=_0x1e022e[_0x1918df(0x2df)](_0x1f4f73,_0x1918df(0x219))[_0x1918df(0x2df)](_0xdbd0b9,_0x1918df(0x273)),_0x1e022e;}function validateCredentials(_0x56fe60,_0x49da27){const _0x16b2a9=_0x3aeeec;if(_0x56fe60['username']==settings['bbUsername']&&bcrypt[_0x16b2a9(0x267)](_0x56fe60[_0x16b2a9(0x307)],settings[_0x16b2a9(0x2de)])){if(settings[_0x16b2a9(0x218)])return{'allow':![],'reason':_0x16b2a9(0x270),'token':null};else{const _0x1c39c8=generateLoginToken(_0x49da27);return{'allow':!![],'reason':_0x16b2a9(0x310),'token':_0x1c39c8};}}else return{'allow':![],'reason':_0x16b2a9(0x23e),'token':null};}function refreshToken(_0x1cdd0c){const _0x290c6d=generateLoginToken(_0x1cdd0c);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x290c6d};}function validateAccess(_0x6e6c81,_0x24adf4){const _0x3309a3=_0x3aeeec;let _0x2f3dc1=devices[_0x24adf4]['ip'],_0x5afc0a;const _0x4a574c=_0x307e1b=>{const _0x239882=_0xb1d3;if(settings[_0x239882(0x206)]){if(settings[_0x239882(0x218)]){if(telegram2FaApproved(_0x24adf4)){const _0x305b7c=generateLoginToken(_0x24adf4);return{'allow':!![],'reason':_0x239882(0x2ab),'token':_0x305b7c};}else return{'allow':![],'reason':_0x239882(0x328),'token':null};}else return _0x5afc0a=validToken(_0x307e1b,_0x24adf4),_0x5afc0a[_0x239882(0x234)]('success')?{'allow':!![],'reason':_0x239882(0x205),'token':_0x307e1b}:{'allow':![],'reason':_0x239882(0x328),'token':null};}else return{'allow':!![],'reason':_0x239882(0x271),'token':null};};if(settings['whitelistEnabled']){let _0x542e2d=[...settings[_0x3309a3(0x257)],'::1',_0x3309a3(0x28b),_0x3309a3(0x319)];if(_0x542e2d[_0x3309a3(0x262)](_0x2f3dc1))return _0x4a574c(_0x6e6c81);else{_0x5afc0a=validToken(_0x6e6c81,_0x24adf4);if(_0x5afc0a[_0x3309a3(0x234)]('success'))return _0x4a574c(_0x6e6c81);else{if(telegramIpApproved(_0x24adf4)){const _0x3314ca=generateToken(_0x24adf4);return _0x5afc0a=_0x4a574c(_0x6e6c81),_0x5afc0a[_0x3309a3(0x248)]?{'allow':!![],'reason':_0x3309a3(0x26d),'token':_0x3314ca}:_0x5afc0a;}else return settings[_0x3309a3(0x249)]?{'allow':![],'reason':_0x3309a3(0x1ce),'token':null}:{'allow':![],'reason':_0x3309a3(0x1fb),'token':null};}}}else return _0x4a574c(_0x6e6c81);}function timelyDecrypt(_0x1ae6bb,_0x23be1e=!![]){const _0x4c9cc5=_0x3aeeec;if(_0x1ae6bb)try{const _0x3fba61=crypt[_0x4c9cc5(0x2b1)](secure[_0x4c9cc5(0x32a)],_0x1ae6bb)[_0x4c9cc5(0x226)],_0x45b03e=_0x3fba61['split']('@')[0x0],_0x442b2d=_0x3fba61['split']('@')[0x1],_0x480a19=new Date()[_0x4c9cc5(0x2a9)]();if(_0x23be1e){if(_0x480a19-_0x442b2d<maxSecretAge*0x3e8)return _0x45b03e;else return![];}else return _0x45b03e;}catch(_0x44ed9e){return![];}else return![];}const validToken=(_0x5d1bab,_0x5b3822)=>{const _0x207d11=_0x3aeeec,_0x4d01ce=devices[_0x5b3822]['ip'];if(!_0x5d1bab)return{'error':'No\x20authentication\x20token'};for(let _0x2b6145 of blacklist){if(_0x2b6145[_0x207d11(0x28e)]==_0x5d1bab)return{'error':_0x207d11(0x2ba)};}let _0x1b05c7;try{_0x1b05c7=jwt['verify'](_0x5d1bab,secure[_0x207d11(0x287)]+_0x5b3822);}catch{return{'error':_0x207d11(0x2a8)};}if(!_0x1b05c7[_0x207d11(0x234)](_0x207d11(0x25f))&&!_0x1b05c7['hasOwnProperty'](_0x207d11(0x2f1))||!_0x1b05c7[_0x207d11(0x234)](_0x207d11(0x1e7)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x1b05c7[_0x207d11(0x234)]('username')&&_0x1b05c7[_0x207d11(0x234)](_0x207d11(0x25f))){const {clientip:_0x55422f}=_0x1b05c7;return _0x4d01ce==_0x55422f?{'success':_0x207d11(0x1fd)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x1b05c7['hasOwnProperty'](_0x207d11(0x2f1))&&_0x1b05c7[_0x207d11(0x234)](_0x207d11(0x25f))){const {username:_0x58feef,clientip:_0x204725}=_0x1b05c7;return settings[_0x207d11(0x1db)]==_0x58feef&&_0x4d01ce==_0x204725?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x207d11(0x2b2)};}}},generateLoginToken=_0x3679ff=>{const _0x9969a3=_0x3aeeec;if(_0x3679ff){const _0x10e457=devices[_0x3679ff]['ip'];return jwt['sign']({'username':settings[_0x9969a3(0x1db)],'clientip':_0x10e457},secure[_0x9969a3(0x287)]+_0x3679ff,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x27b6aa=>{const _0x507500=_0x3aeeec;if(_0x27b6aa){const _0x3e95d4=devices[_0x27b6aa]['ip'];return jwt[_0x507500(0x2be)]({'clientip':_0x3e95d4},secure[_0x507500(0x287)]+_0x27b6aa,{'expiresIn':devices[_0x27b6aa][_0x507500(0x244)][_0x507500(0x2aa)]*0x3c});}else return![];},telegramIpApproved=_0xc9ced5=>{const _0x2edebd=_0x3aeeec;let _0x2208ae=![];return devices[_0xc9ced5][_0x2edebd(0x244)]&&devices[_0xc9ced5]['telegramIpApproval'][_0x2edebd(0x2aa)]!=_0x2edebd(0x2cf)&&(_0x2208ae=devices[_0xc9ced5][_0x2edebd(0x244)][_0x2edebd(0x25f)]==devices[_0xc9ced5]['ip']&&new Date()[_0x2edebd(0x2a9)]()-devices[_0xc9ced5][_0x2edebd(0x244)]['timestamp']<devices[_0xc9ced5][_0x2edebd(0x244)][_0x2edebd(0x2aa)]*0x3c*0x3e8),_0x2208ae;},telegram2FaApproved=_0x2e169a=>{const _0x47df00=_0x3aeeec;let _0x5ecead=![];return devices[_0x2e169a][_0x47df00(0x1f5)]&&devices[_0x2e169a][_0x47df00(0x1f5)][_0x47df00(0x2aa)]!=_0x47df00(0x2cf)&&(_0x5ecead=devices[_0x2e169a][_0x47df00(0x1f5)][_0x47df00(0x25f)]==devices[_0x2e169a]['ip']&&new Date()[_0x47df00(0x2a9)]()-devices[_0x2e169a][_0x47df00(0x1f5)][_0x47df00(0x21a)]<devices[_0x2e169a][_0x47df00(0x1f5)][_0x47df00(0x2aa)]*0x3c*0x3e8),_0x5ecead;},normalizeIP=_0x558815=>{const _0x44aeed=_0x3aeeec;let _0x3f0ee8=null,_0x1e517a=null;if(ipaddr[_0x44aeed(0x302)](_0x558815)){const _0x4a18a1=ipaddr[_0x44aeed(0x2d5)](_0x558815);_0x4a18a1[_0x44aeed(0x282)]()===_0x44aeed(0x2fa)?(_0x4a18a1[_0x44aeed(0x1d8)]()&&(_0x3f0ee8=_0x4a18a1[_0x44aeed(0x1d9)]()[_0x44aeed(0x2bd)]()),_0x1e517a=_0x4a18a1[_0x44aeed(0x2bd)]()):(_0x3f0ee8=_0x4a18a1[_0x44aeed(0x2bd)](),_0x1e517a=_0x4a18a1[_0x44aeed(0x2f4)]()['toString']());}return{'show':_0x3f0ee8?_0x3f0ee8:_0x1e517a,'store':_0x1e517a};};function sleep(_0x153835){return new Promise(_0x135dc4=>setTimeout(_0x135dc4,_0x153835));}