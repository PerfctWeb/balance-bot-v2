const _0x35474e=_0xf8eb;(function(_0x52cf22,_0x48aa50){const _0x4d3543=_0xf8eb,_0x98108f=_0x52cf22();while(!![]){try{const _0xc0c125=-parseInt(_0x4d3543(0x1c8))/0x1+-parseInt(_0x4d3543(0x26f))/0x2+parseInt(_0x4d3543(0x1d1))/0x3*(parseInt(_0x4d3543(0x2f5))/0x4)+parseInt(_0x4d3543(0x357))/0x5+parseInt(_0x4d3543(0x2d5))/0x6+parseInt(_0x4d3543(0x1fd))/0x7+parseInt(_0x4d3543(0x28c))/0x8*(-parseInt(_0x4d3543(0x27c))/0x9);if(_0xc0c125===_0x48aa50)break;else _0x98108f['push'](_0x98108f['shift']());}catch(_0x5a1ba3){_0x98108f['push'](_0x98108f['shift']());}}}(_0x23e1,0x2a43f));const _0x55e60c=function(){let _0x3e69da=!![];return function(_0x32f588,_0xa7c471){const _0x196b63=_0x3e69da?function(){const _0x46ddd8=_0xf8eb;if(_0xa7c471){const _0x5586f7=_0xa7c471[_0x46ddd8(0x323)](_0x32f588,arguments);return _0xa7c471=null,_0x5586f7;}}:function(){};return _0x3e69da=![],_0x196b63;};}(),_0x38d186=_0x55e60c(this,function(){const _0x3c878a=_0xf8eb;return _0x38d186[_0x3c878a(0x304)]()['search'](_0x3c878a(0x213))['toString']()[_0x3c878a(0x211)](_0x38d186)[_0x3c878a(0x309)](_0x3c878a(0x213));});_0x38d186();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x35474e(0x321)),fs=require('fs'),fns=require(_0x35474e(0x1e6)),low=require(_0x35474e(0x2d1)),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x35474e(0x273)),Crypt=require(_0x35474e(0x335))['Crypt'],RSA=require(_0x35474e(0x335))['RSA'],bcrypt=require(_0x35474e(0x246)),jwt=require(_0x35474e(0x334)),ipaddr=require(_0x35474e(0x33d)),argv=require('yargs/yargs')(process['argv'][_0x35474e(0x34a)](0x2))[_0x35474e(0x20d)],uuidRandom=require('uuid-random'),TelegramBot=require(_0x35474e(0x23b)),Mixpanel=require(_0x35474e(0x1a7)),axios=require(_0x35474e(0x2ba)),{GraphQLClient,gql}=require(_0x35474e(0x345)),util=require(_0x35474e(0x325)),fileUpload=require(_0x35474e(0x361)),PORT=argv[_0x35474e(0x2b5)]||_0x35474e(0x34d),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x35474e(0x1ca)](_0x35474e(0x261)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x35474e(0x31d)](0x1));const HOST=argv[_0x35474e(0x232)]||null,userID=argv['user']||'',debugging=argv['d']||![];let bbpath=_0x35474e(0x36b),bbpath2='';const botfile=_0x35474e(0x2cc),configfile='bb-config.json',settingsfile=_0x35474e(0x1fa),securefile=_0x35474e(0x228),maxBackups=0xa;let validInstallation=!![];!fs[_0x35474e(0x1ad)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x35474e(0x1ea)+userID+'/':bbpath+_0x35474e(0x1ea),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x35474e(0x1f1)+userID+'/':bbpath+_0x35474e(0x1f1),loggerfile=fs[_0x35474e(0x2b4)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x35474e(0x265)+userID+'/':bbpath+_0x35474e(0x265);!fs[_0x35474e(0x1ad)](configpath)&&fs[_0x35474e(0x1f7)](configpath);!fs[_0x35474e(0x1ad)](configbackuppath)&&fs[_0x35474e(0x1f7)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x35474e(0x1ad)](zippath)&&fs[_0x35474e(0x1f7)](zippath);!fs['existsSync'](temppath)&&fs[_0x35474e(0x1f7)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x35474e(0x2e1)]({'bots':[]})[_0x35474e(0x354)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x35474e(0x2e1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x35474e(0x2e1)]({'secure':{},'blacklist':[]})[_0x35474e(0x354)]();let crypt=new Crypt({'md':_0x35474e(0x20a),'rsaStandard':_0x35474e(0x26b)});const saltRounds=0xa,mixpanel=Mixpanel[_0x35474e(0x32d)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x35474e(0x2d3)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x35474e(0x27d)]&&settings[_0x35474e(0x27d)]!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0xc6e15f=>{const _0x6a1fc6=_0x35474e;console[_0x6a1fc6(0x1ca)](_0xc6e15f);},'simple':_0x16d0f0=>{const _0x52d2a1=_0x35474e;console[_0x52d2a1(0x1ca)](_0x16d0f0),loggerfile['write'](util[_0x52d2a1(0x1e9)](_0x16d0f0)+'\x0a');},'full':async _0x2306d6=>{const _0x23653b=_0x35474e,_0x5a6aa4=getTimeStamp()+_0x23653b(0x322)+_0x2306d6;console['log'](_0x5a6aa4),loggerfile[_0x23653b(0x354)](util[_0x23653b(0x1e9)](_0x5a6aa4)+'\x0a');if(tgBot&&settings[_0x23653b(0x1ce)]&&settings[_0x23653b(0x22e)]!='orders')await tgBot[_0x23653b(0x28f)](settings['telegramChatId'],_0x23653b(0x329)+_0x2306d6)['catch'](_0x4b606a=>{telegramError(_0x4b606a);});},'debug':async(_0xf6b96a,_0x4960a4='')=>{const _0x4c100b=_0x35474e,_0x1fffe4=getTimeStamp()+_0x4c100b(0x35c)+_0xf6b96a;if(debugging)console[_0x4c100b(0x1ca)](_0x1fffe4);loggerfile[_0x4c100b(0x354)](util[_0x4c100b(0x1e9)](_0x1fffe4)+'\x0a');if(_0x4960a4){if(debugging)console[_0x4c100b(0x1ca)](_0x4960a4);loggerfile[_0x4c100b(0x354)](util[_0x4c100b(0x1e9)](_0x4960a4)+'\x0a');}}};process['on'](_0x35474e(0x1b5),function(_0x132623){const _0x54c077=_0x35474e;logger[_0x54c077(0x231)](_0x132623);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x35474e(0x2bf))[_0x35474e(0x32e)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x35474e(0x1fb)),app=express(),http=require(_0x35474e(0x1bf))[_0x35474e(0x31b)](app);app[_0x35474e(0x33a)](fileUpload({'useTempFiles':!![]})),app[_0x35474e(0x2e8)](_0x35474e(0x19d),async(_0x2b2ace,_0x484eac)=>{const _0x371635=_0x35474e,_0x4350c6=_0x2b2ace[_0x371635(0x1d4)][_0x371635(0x364)],_0x59e710=getClientsWithBotID(_0x371635(0x295)),_0x3f34b5=_0x2b2ace['headers'][_0x371635(0x29b)],_0x576c85=timelyDecrypt(_0x3f34b5,![]),_0x51b5ca=_0x59e710[_0x371635(0x29c)](_0x2b3ab4=>_0x2b3ab4[_0x371635(0x29b)]==_0x576c85);if(_0x51b5ca){const _0x2be866=normalizeIP(_0x2b2ace[_0x371635(0x1fc)][_0x371635(0x1f3)])[_0x371635(0x22f)],_0x2192d5=_0x2b2ace['headers']['tkn'];if(validateAccess(_0x2192d5,_0x576c85,_0x2be866)[_0x371635(0x2aa)])_0x4350c6==_0x371635(0x1b1)&&await backupConfigFiles(),await zipFiles(_0x4350c6),_0x484eac[_0x371635(0x256)](zippath+(_0x4350c6+_0x371635(0x320)),_0x48863b=>{const _0x32be06=_0x371635;_0x48863b&&(logger[_0x32be06(0x1c3)](_0x32be06(0x219)+_0x4350c6),logger[_0x32be06(0x231)](_0x48863b));});else logger[_0x371635(0x1c3)](_0x371635(0x26c)+_0x4350c6+_0x371635(0x237));}else logger['full'](_0x371635(0x26c)+_0x4350c6+_0x371635(0x1b3));}),app[_0x35474e(0x1e5)](_0x35474e(0x279),async(_0x5438e7,_0x46ceb4)=>{const _0x57d892=_0x35474e,_0x2f5cae=getClientsWithBotID(_0x57d892(0x295)),_0x51994d=_0x5438e7[_0x57d892(0x2ec)][_0x57d892(0x29b)],_0x170d62=timelyDecrypt(_0x51994d,![]),_0x4c4bc2=_0x2f5cae[_0x57d892(0x29c)](_0x2ff6d0=>_0x2ff6d0['uuid']==_0x170d62);logger[_0x57d892(0x1e8)]('Backup\x20file\x20uploaded');if(_0x4c4bc2){const _0x169b3e=normalizeIP(_0x5438e7['socket'][_0x57d892(0x1f3)])['store'],_0x22709e=_0x5438e7[_0x57d892(0x2ec)][_0x57d892(0x333)];if(validateAccess(_0x22709e,_0x170d62,_0x169b3e)['allow']){if(_0x5438e7[_0x57d892(0x236)]){const _0x526362=_0x5438e7[_0x57d892(0x236)][_0x57d892(0x2bb)];await _0x526362['mv'](temppath+_0x526362[_0x57d892(0x34b)]),_0x46ceb4['send']({'status':!![],'message':_0x57d892(0x338)});const _0x100f5b=getBotsWithMode();_0x100f5b[_0x57d892(0x326)]>0x0?confirmRestore(temppath,_0x526362[_0x57d892(0x34b)]):unzipFile(temppath,_0x526362['name']);}}else logger['full'](_0x57d892(0x214));}else logger[_0x57d892(0x1c3)](_0x57d892(0x337));}),app[_0x35474e(0x33a)](express['static'](path['join'](__dirname,bbpath2,_0x35474e(0x247)))),app[_0x35474e(0x33a)](express['static'](path['join'](__dirname,bbpath2,_0x35474e(0x23a)))),app[_0x35474e(0x2e8)]('/',function(_0x19ef90,_0x163ca8){const _0x37330e=_0x35474e;_0x163ca8[_0x37330e(0x1a6)](path[_0x37330e(0x23c)](__dirname,bbpath2,'build2',_0x37330e(0x2eb)));}),app[_0x35474e(0x2e8)](_0x35474e(0x30b),function(_0x9773db,_0x4a55ec){const _0x3914db=_0x35474e;_0x4a55ec[_0x3914db(0x1a6)](path[_0x3914db(0x23c)](__dirname,bbpath2,_0x3914db(0x23a),_0x3914db(0x2eb)));}),app[_0x35474e(0x2e8)](_0x35474e(0x252),(_0x18daa9,_0x4ed951)=>{const _0x2e9576=_0x35474e;_0x4ed951[_0x2e9576(0x1a6)](path[_0x2e9576(0x23c)](__dirname,bbpath2,'build','index.html'));}),app['get']('/:bot/performance',(_0x271790,_0x498914)=>{const _0x18def0=_0x35474e;_0x498914[_0x18def0(0x1a6)](path[_0x18def0(0x23c)](__dirname,bbpath2,'build','index.html'));}),app[_0x35474e(0x2e8)](_0x35474e(0x2ae),(_0x23c630,_0x2f88e8)=>{const _0x303004=_0x35474e;_0x2f88e8[_0x303004(0x1a6)](path[_0x303004(0x23c)](__dirname,bbpath2,_0x303004(0x23a),_0x303004(0x2eb)));}),app[_0x35474e(0x2e8)](_0x35474e(0x2b6),(_0xc5a207,_0x5eb7dd)=>{const _0x4978cb=_0x35474e;_0x5eb7dd[_0x4978cb(0x1a6)](path[_0x4978cb(0x23c)](__dirname,bbpath2,_0x4978cb(0x23a),_0x4978cb(0x2eb)));}),app[_0x35474e(0x2e8)](_0x35474e(0x286),(_0x21cd47,_0x40ec58)=>{const _0x4da731=_0x35474e;_0x40ec58[_0x4da731(0x1a6)](path[_0x4da731(0x23c)](__dirname,bbpath2,_0x4da731(0x23a),_0x4da731(0x2eb)));}),app[_0x35474e(0x2e8)](_0x35474e(0x1d6),(_0x423bfa,_0x495d37)=>{const _0x49e2de=_0x35474e;_0x495d37['sendFile'](path[_0x49e2de(0x23c)](__dirname,bbpath2,_0x49e2de(0x23a),_0x49e2de(0x2eb)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x1370c0=_0x35474e;logger[_0x1370c0(0x231)](''),logger['simple'](_0x1370c0(0x26e)),await logger[_0x1370c0(0x1c3)](_0x1370c0(0x317)+PORT),logger[_0x1370c0(0x231)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x225551 of config){if(_0x225551['status']==_0x1370c0(0x30a)||_0x225551[_0x1370c0(0x26d)]==_0x1370c0(0x2e2))await logger[_0x1370c0(0x1c3)](_0x1370c0(0x2cf)+_0x225551[_0x1370c0(0x2d9)]+'\x20|\x20'+_0x225551['botname']),startBot([_0x225551[_0x1370c0(0x2d9)],userID],{'cwd':bbpath},function(_0x389d20){if(_0x389d20)logger['full'](_0x389d20);});else(_0x225551[_0x1370c0(0x26d)]==_0x1370c0(0x1f0)||_0x225551[_0x1370c0(0x26d)]=='new-disabled')&&await logger['full'](_0x1370c0(0x1ee)+_0x225551[_0x1370c0(0x2d9)]+_0x1370c0(0x29e)+_0x225551['botname']);}else!newBot&&logger['simple'](_0x1370c0(0x1bb));if(newBot)addBot();logger[_0x1370c0(0x231)](_0x1370c0(0x26e)),logger[_0x1370c0(0x231)]('');}function startSocket(){const _0x138fc1=_0x35474e;io['on'](_0x138fc1(0x331),_0x5b91b3=>{const _0x9fa1ce=_0x138fc1;let _0x17ea81,_0xbdd958,_0xade80a,_0x1bb81c,_0x160985;const _0x3c3902=_0x5b91b3['handshake']['headers'][_0x9fa1ce(0x2e9)];_0xbdd958=_0x3c3902[_0x9fa1ce(0x1f4)](/bot[0-9]{3}/);if(_0xbdd958)_0xade80a=_0xbdd958[0x0][_0x9fa1ce(0x1f4)](/[0-9]{3}/);if(_0xade80a)_0x17ea81=_0xade80a[0x0];else _0x17ea81=_0x9fa1ce(0x295);const _0x1b69cd=_0x5b91b3[_0x9fa1ce(0x24a)][_0x9fa1ce(0x341)][_0x9fa1ce(0x2de)];if(!_0x1b69cd)_0x5b91b3['emit'](_0x9fa1ce(0x26d),{'publicKey':secure['publicKey']});else{_0x1bb81c=timelyDecrypt(_0x1b69cd,![]);if(!_0x1bb81c)_0x5b91b3[_0x9fa1ce(0x2f4)](_0x9fa1ce(0x26d),{'publicKey':secure['publicKey']});else{_0x160985=normalizeIP(_0x5b91b3[_0x9fa1ce(0x271)][_0x9fa1ce(0x1f3)])[_0x9fa1ce(0x22f)];if(!devices[_0x1bb81c])devices[_0x1bb81c]={'uuid':_0x1bb81c,'access':{'token':null}};devices[_0x1bb81c]['ip']=_0x160985;const _0x85cfbd=addClient(_0x5b91b3['id'],_0x1bb81c,_0x17ea81);setAccess(_0x85cfbd),emitMessages(),_0x5b91b3['on'](_0x9fa1ce(0x2c9),_0x3e701e=>{const _0x5b81ed=_0x9fa1ce,_0x269463=timelyDecrypt(_0x3e701e[_0x5b81ed(0x2d8)]);if(_0x269463){_0x3e701e={'username':_0x3e701e['username'],'password':_0x269463},devices[_0x1bb81c]['access']=validateCredentials(_0x3e701e,_0x1bb81c);if(devices[_0x1bb81c][_0x5b81ed(0x2e7)][_0x5b81ed(0x2aa)]==![]&&devices[_0x1bb81c]['access']['reason']==_0x5b81ed(0x2b7))_0x5b91b3[_0x5b81ed(0x2f4)](_0x5b81ed(0x26d),{'access':devices[_0x1bb81c][_0x5b81ed(0x2e7)]}),loginAccess2FA(_0x1bb81c,_0x160985);else{if(devices[_0x1bb81c]['access'][_0x5b81ed(0x2aa)]==![]&&devices[_0x1bb81c]['access'][_0x5b81ed(0x32a)]=='invalid\x20credentials')_0x5b91b3[_0x5b81ed(0x2f4)](_0x5b81ed(0x26d),{'access':devices[_0x1bb81c][_0x5b81ed(0x2e7)]});else devices[_0x1bb81c][_0x5b81ed(0x2e7)]['allow']&&devices[_0x1bb81c]['access'][_0x5b81ed(0x32a)]==_0x5b81ed(0x28d)&&(getClientsWithUuid(_0x1bb81c)[_0x5b81ed(0x223)](_0xba2eff=>{setAccess(_0xba2eff);}),logger['debug']('Logged\x20in\x20user\x20...'+_0x1bb81c[_0x5b81ed(0x34a)](-0x8)),setTokenRefresh(_0x1bb81c),setSessionTimeout(_0x5b81ed(0x2c9),_0x1bb81c));}}else logger['full'](_0x5b81ed(0x305));}),_0x5b91b3['on']('reset-password',()=>{resetPassword();}),_0x5b91b3['on']('disconnect',_0x106e15=>{removeClient(_0x5b91b3['id']);}),_0x17ea81==_0x9fa1ce(0x295)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x5207b5){const _0x4a1eaf=_0x35474e;if(_0x5207b5!=_0x4a1eaf(0x295)&&config[_0x4a1eaf(0x220)]!=''){if(pid[_0x5207b5])pid[_0x5207b5][_0x4a1eaf(0x2b8)]({'function':_0x4a1eaf(0x2e5),'args':null});}_0x5207b5!=_0x4a1eaf(0x295)&&broadcastToBots(_0x4a1eaf(0x2f9),JSON[_0x4a1eaf(0x342)](config));}function reloadBotManager(){const _0xb67dc4=_0x35474e;getClientsWithBotID('botmanager')[_0xb67dc4(0x223)](_0x19b089=>{const _0x25697e=_0xb67dc4;getSocket(_0x19b089['id'])[_0x25697e(0x2f4)]('status',{'access':{'allow':![],'reason':_0x25697e(0x19c),'token':null}});});}function getSocket(_0x39f2a7){const _0x11b025=_0x35474e;return io[_0x11b025(0x36c)]['sockets'][_0x11b025(0x2e8)](_0x39f2a7);}function setAccess(_0x553c13){const _0x4e4913=_0x35474e,_0xc0581f=getSocket(_0x553c13['id']),_0x29d353=_0x553c13['uuid'],_0x41d130=_0x553c13[_0x4e4913(0x352)];devices[_0x29d353][_0x4e4913(0x2e7)]=validateAccess(devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x1bd)],_0x29d353),logger[_0x4e4913(0x1e8)](_0x4e4913(0x2ab)+devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x32a)]+'\x20|\x20client:\x20...'+_0x553c13['id'][_0x4e4913(0x34a)](-0x8)+_0x4e4913(0x369)+_0x29d353['slice'](-0x8)),_0xc0581f[_0x4e4913(0x23c)](_0x29d353);if(devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x2aa)]){_0xc0581f[_0x4e4913(0x23c)](_0x41d130);if(_0x41d130==_0x4e4913(0x295))initializeSocketBotManager(_0xc0581f);else initializeSocketBot(_0xc0581f);initClient(_0x41d130);}devices[_0x29d353][_0x4e4913(0x2e7)]['token']&&devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x32a)]==_0x4e4913(0x2cd)&&setSessionTimeout(_0x4e4913(0x1c4),_0x29d353),devices[_0x29d353]['access']['token']&&devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x32a)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x4e4913(0x2c9),_0x29d353),_0xc0581f[_0x4e4913(0x2f4)](_0x4e4913(0x26d),{'status':_0x553c13[_0x4e4913(0x1a1)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x29d353]['access'],'externalip':devices[_0x29d353]['ip'],'publicKey':secure[_0x4e4913(0x311)],'userid':settings[_0x4e4913(0x35f)],'validInstallation':validInstallation}),devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x2aa)]==![]&&devices[_0x29d353][_0x4e4913(0x2e7)][_0x4e4913(0x32a)]=='2FA\x20required'&&temporaryAccess2FA(_0x29d353,devices[_0x29d353]['ip']);}function setSessionTimeout(_0x28cbfc,_0x22ae9d){const _0x5ac825=_0x35474e;let _0xfc6a25;if(_0x28cbfc=='login')_0xfc6a25=loginExpiry*0x3c*0x3e8;else _0xfc6a25=devices[_0x22ae9d][_0x5ac825(0x233)][_0x5ac825(0x243)]*0x3c*0x3e8-(new Date()[_0x5ac825(0x287)]()-devices[_0x22ae9d][_0x5ac825(0x233)][_0x5ac825(0x294)]);if(devices[_0x22ae9d]['pidExpireLogin'])clearTimeout(devices[_0x22ae9d][_0x5ac825(0x2c3)]);devices[_0x22ae9d][_0x5ac825(0x2c3)]=setTimeout(()=>{const _0x5354f5=_0x5ac825;if(devices[_0x22ae9d][_0x5354f5(0x35e)])clearTimeout(devices[_0x22ae9d][_0x5354f5(0x35e)]);removeSocketListeners(_0x22ae9d),addBlacklist(_0x22ae9d),devices[_0x22ae9d]['telegramIpApproval']=null,devices[_0x22ae9d]['telegram2FaApproval']=null,devices[_0x22ae9d][_0x5354f5(0x2e7)][_0x5354f5(0x1bd)]=null,logger[_0x5354f5(0x1e8)]('Session\x20expired\x20for\x20user\x20...'+_0x22ae9d[_0x5354f5(0x34a)](-0x8)),devices[_0x22ae9d]['access']=validateAccess(devices[_0x22ae9d][_0x5354f5(0x2e7)][_0x5354f5(0x1bd)],_0x22ae9d),!(devices[_0x22ae9d][_0x5354f5(0x2e7)][_0x5354f5(0x2aa)]&&devices[_0x22ae9d][_0x5354f5(0x2e7)][_0x5354f5(0x32a)]==_0x5354f5(0x280))&&(_0x28cbfc==_0x5354f5(0x2c9)?io['to'](_0x22ae9d)[_0x5354f5(0x2f4)](_0x5354f5(0x26d),{'access':{'allow':![],'reason':_0x5354f5(0x2be),'token':null}}):io['to'](_0x22ae9d)[_0x5354f5(0x2f4)](_0x5354f5(0x26d),{'access':{'allow':![],'reason':_0x5354f5(0x2c8),'token':null}})),devices[_0x22ae9d][_0x5354f5(0x2e7)][_0x5354f5(0x1bd)]=null;},_0xfc6a25);}function setTokenRefresh(_0x252a4a){const _0x166ba5=_0x35474e;if(devices[_0x252a4a][_0x166ba5(0x35e)])clearTimeout(devices[_0x252a4a][_0x166ba5(0x35e)]);devices[_0x252a4a][_0x166ba5(0x35e)]=setTimeout(()=>{const _0x18c5b1=_0x166ba5;getClientsWithUuid(_0x252a4a)[_0x18c5b1(0x326)]!=0x0?(devices[_0x252a4a][_0x18c5b1(0x2e7)]=refreshToken(_0x252a4a),io['to'](_0x252a4a)[_0x18c5b1(0x2f4)]('status',{'status':_0x18c5b1(0x259),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x252a4a][_0x18c5b1(0x2e7)],'externalip':devices[_0x252a4a]['ip'],'publicKey':secure[_0x18c5b1(0x311)],'validInstallation':validInstallation}),setTokenRefresh(_0x252a4a)):clearTimeout(devices[_0x252a4a][_0x18c5b1(0x35e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4a3ceb){const _0x25057a=_0x35474e,_0x4cf40a=getClient(_0x4a3ceb['id'])[_0x25057a(0x29b)];_0x4a3ceb[_0x25057a(0x2f4)]('bots',config),_0x4a3ceb['emit'](_0x25057a(0x20f),cleanSettings()),_0x4a3ceb['on'](_0x25057a(0x292),_0x321add=>{const _0x175c7d=_0x25057a;if(validateAccess(_0x321add,_0x4cf40a)['allow'])addBot();else logger[_0x175c7d(0x1c3)](_0x175c7d(0x212));}),_0x4a3ceb['on'](_0x25057a(0x2ee),(_0x47bf8b,_0x37f97d)=>{const _0x1ace8d=_0x25057a;if(validateAccess(_0x37f97d,_0x4cf40a)[_0x1ace8d(0x2aa)])toggleBot(_0x47bf8b['botID'],_0x47bf8b[_0x1ace8d(0x26d)],_0x47bf8b[_0x1ace8d(0x266)]);else logger[_0x1ace8d(0x1c3)](_0x1ace8d(0x1cc));}),_0x4a3ceb['on'](_0x25057a(0x263),(_0x11873d,_0x2dd6e4)=>{const _0x572902=_0x25057a;if(validateAccess(_0x2dd6e4,_0x4cf40a)[_0x572902(0x2aa)])toggleBotMode(_0x11873d);else logger['full'](_0x572902(0x1cc));}),_0x4a3ceb['on'](_0x25057a(0x1c6),(_0x1b353c,_0x2522e5)=>{const _0x2ff02f=_0x25057a;if(validateAccess(_0x2522e5,_0x4cf40a)[_0x2ff02f(0x2aa)])deleteBot(_0x1b353c);else logger['full'](_0x2ff02f(0x27a));}),_0x4a3ceb['on']('store-settings',(_0x459b31,_0x4c7114)=>{const _0xee0106=_0x25057a;if(validateAccess(_0x4c7114,_0x4cf40a)['allow'])storeSettings(_0x459b31,!![]);else logger[_0xee0106(0x1c3)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4a3ceb['on'](_0x25057a(0x224),_0x4d6fa9=>{const _0x19c985=_0x25057a;if(validateAccess(_0x4d6fa9,_0x4cf40a)[_0x19c985(0x2aa)])updateBB(_0x19c985(0x1c9));else logger['full'](_0x19c985(0x33b));}),_0x4a3ceb['on'](_0x25057a(0x1de),_0x5a9209=>{const _0xaec577=_0x25057a;if(validateAccess(_0x5a9209,_0x4cf40a)[_0xaec577(0x2aa)])updateBB(_0xaec577(0x1b6));else logger['full'](_0xaec577(0x2fe));}),_0x4a3ceb['on'](_0x25057a(0x22d),_0x585148=>{const _0x336cd5=_0x25057a;if(validateAccess(_0x585148,_0x4cf40a)['allow']){const _0x397eaa=getClient(_0x4a3ceb['id']);if(_0x397eaa)getBackupFiles(_0x397eaa['uuid']);else logger['full']('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x336cd5(0x1c3)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x4a3ceb['on'](_0x25057a(0x1a5),(_0x3d706e,_0x404be4)=>{const _0x5fb73b=_0x25057a;if(validateAccess(_0x404be4,_0x4cf40a)[_0x5fb73b(0x2aa)])restoreBackupFile(_0x3d706e);else logger[_0x5fb73b(0x1c3)](_0x5fb73b(0x360));}),_0x4a3ceb['on'](_0x25057a(0x25e),_0x465ff9=>{const _0x4ffba9=_0x25057a;if(validateAccess(_0x465ff9,_0x4cf40a)[_0x4ffba9(0x2aa)])getMessages();else logger['full'](_0x4ffba9(0x2dd));}),_0x4a3ceb['on'](_0x25057a(0x358),(_0xe52aa2,_0x3301c9)=>{const _0x21473b=_0x25057a;if(validateAccess(_0x3301c9,_0x4cf40a)[_0x21473b(0x2aa)])confirmMessage(_0xe52aa2);else logger[_0x21473b(0x1c3)](_0x21473b(0x34c));}),_0x4a3ceb['on']('logout',_0x176650=>{const _0x162629=_0x25057a;if(validateAccess(_0x176650,_0x4cf40a)[_0x162629(0x2aa)]){if(devices[_0x4cf40a][_0x162629(0x35e)])clearTimeout(devices[_0x4cf40a][_0x162629(0x35e)]);if(devices[_0x4cf40a]['pidExpireLogin'])clearTimeout(devices[_0x4cf40a][_0x162629(0x2c3)]);removeSocketListeners(getClient(_0x4a3ceb['id'])[_0x162629(0x29b)]),addBlacklist(_0x4cf40a),devices[_0x4cf40a][_0x162629(0x233)]=null,devices[_0x4cf40a][_0x162629(0x258)]=null,devices[_0x4cf40a][_0x162629(0x2e7)][_0x162629(0x1bd)]=null,logger[_0x162629(0x1e8)](_0x162629(0x2fa)+_0x4cf40a[_0x162629(0x34a)](-0x8)),io['to'](getClient(_0x4a3ceb['id'])[_0x162629(0x29b)])[_0x162629(0x2f4)](_0x162629(0x26d),{'access':{'allow':![],'reason':_0x162629(0x300),'token':null}});}else logger[_0x162629(0x1c3)](_0x162629(0x25c));});}function initializeSocketBot(_0x2cd0c4){const _0x432427=_0x35474e,_0x2aec55=getClient(_0x2cd0c4['id'])[_0x432427(0x352)],_0x5a382b=getClient(_0x2cd0c4['id'])[_0x432427(0x29b)];_0x2cd0c4['on'](_0x432427(0x251),(_0x4b7755,_0x762183)=>{const _0xd89bdf=_0x432427;if(validateAccess(_0x762183,_0x5a382b)[_0xd89bdf(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':_0xd89bdf(0x35b),'args':_0x4b7755});}else logger[_0xd89bdf(0x1c3)](_0xd89bdf(0x35d));}),_0x2cd0c4['on'](_0x432427(0x362),(_0x3f60e0,_0x136199)=>{const _0x4f6109=_0x432427;if(validateAccess(_0x136199,_0x5a382b)[_0x4f6109(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55][_0x4f6109(0x2b8)]({'function':_0x4f6109(0x2d4),'args':_0x3f60e0});}else logger['full'](_0x4f6109(0x288));}),_0x2cd0c4['on']('get-portfolio',(_0xe85831,_0x1f2e7f)=>{const _0x197f31=_0x432427;if(validateAccess(_0x1f2e7f,_0x5a382b)[_0x197f31(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55][_0x197f31(0x2b8)]({'function':'getPortfolio','args':_0xe85831});}else logger[_0x197f31(0x1c3)](_0x197f31(0x1fe));}),_0x2cd0c4['on'](_0x432427(0x226),(_0x3ddf63,_0x12efdb)=>{const _0x37a8e7=_0x432427;if(validateAccess(_0x12efdb,_0x5a382b)['allow']){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':_0x37a8e7(0x235),'args':_0x3ddf63});}else logger[_0x37a8e7(0x1c3)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x2cd0c4['on'](_0x432427(0x25a),(_0x2c2f69,_0x30e056)=>{const _0x56fcd9=_0x432427;if(validateAccess(_0x30e056,_0x5a382b)[_0x56fcd9(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':'storeHeadless','args':_0x2c2f69});}else logger['full'](_0x56fcd9(0x1b8));}),_0x2cd0c4['on'](_0x432427(0x1c2),(_0x346219,_0x3cd148)=>{const _0x27296a=_0x432427;if(validateAccess(_0x3cd148,_0x5a382b)['allow']){if(pid[_0x2aec55])pid[_0x2aec55][_0x27296a(0x2b8)]({'function':_0x27296a(0x1b7),'args':_0x346219});}else logger[_0x27296a(0x1c3)](_0x27296a(0x2bd));}),_0x2cd0c4['on'](_0x432427(0x30e),_0x27ab3f=>{const _0x336bca=_0x432427;if(validateAccess(_0x27ab3f,_0x5a382b)['allow']){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':_0x336bca(0x1e1),'args':null});}else logger[_0x336bca(0x1c3)](_0x336bca(0x2b2));}),_0x2cd0c4['on']('get-starting-balances',_0xe85db1=>{const _0x14e79f=_0x432427;if(validateAccess(_0xe85db1,_0x5a382b)['allow']){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':_0x14e79f(0x34f),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x2cd0c4['on'](_0x432427(0x28b),(_0x1b4664,_0x169185)=>{const _0x9920=_0x432427;if(validateAccess(_0x169185,_0x5a382b)[_0x9920(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55][_0x9920(0x2b8)]({'function':_0x9920(0x29d),'args':_0x1b4664});}else logger['full'](_0x9920(0x1b4));}),_0x2cd0c4['on'](_0x432427(0x327),_0x225590=>{const _0x2504d1=_0x432427;if(validateAccess(_0x225590,_0x5a382b)[_0x2504d1(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55][_0x2504d1(0x2b8)]({'function':_0x2504d1(0x1ff),'args':null});}else logger[_0x2504d1(0x1c3)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x2cd0c4['on'](_0x432427(0x1ec),_0x374abe=>{const _0x4ba38e=_0x432427;if(validateAccess(_0x374abe,_0x5a382b)[_0x4ba38e(0x2aa)]){if(pid[_0x2aec55])pid[_0x2aec55]['send']({'function':_0x4ba38e(0x278),'args':null});}else logger[_0x4ba38e(0x1c3)](_0x4ba38e(0x215));}),_0x2cd0c4['on'](_0x432427(0x224),_0xce7fa6=>{const _0x4de41a=_0x432427;if(validateAccess(_0xce7fa6,_0x5a382b)[_0x4de41a(0x2aa)])updateBB('update');else logger[_0x4de41a(0x1c3)](_0x4de41a(0x33b));}),_0x2cd0c4['on']('get-messages',_0x1c1f25=>{const _0x16704e=_0x432427;if(validateAccess(_0x1c1f25,_0x5a382b)['allow'])getMessages();else logger['full'](_0x16704e(0x2dd));}),_0x2cd0c4['on'](_0x432427(0x358),(_0x5c9605,_0x569272)=>{const _0xe40624=_0x432427;if(validateAccess(_0x569272,_0x5a382b)[_0xe40624(0x2aa)])confirmMessage(_0x5c9605);else logger[_0xe40624(0x1c3)](_0xe40624(0x34c));}),_0x2cd0c4['on'](_0x432427(0x1df),_0x3ee48d=>{const _0x42ab6d=_0x432427;if(validateAccess(_0x3ee48d,_0x5a382b)[_0x42ab6d(0x2aa)]){if(devices[_0x5a382b][_0x42ab6d(0x35e)])clearTimeout(devices[_0x5a382b][_0x42ab6d(0x35e)]);if(devices[_0x5a382b]['pidExpireLogin'])clearTimeout(devices[_0x5a382b]['pidExpireLogin']);removeSocketListeners(getClient(_0x2cd0c4['id'])[_0x42ab6d(0x29b)]),addBlacklist(_0x5a382b),devices[_0x5a382b][_0x42ab6d(0x233)]=null,devices[_0x5a382b][_0x42ab6d(0x258)]=null,devices[_0x5a382b][_0x42ab6d(0x2e7)][_0x42ab6d(0x1bd)]=null,logger[_0x42ab6d(0x1e8)](_0x42ab6d(0x2fa)+_0x5a382b['slice'](-0x8)),io['to'](getClient(_0x2cd0c4['id'])[_0x42ab6d(0x29b)])[_0x42ab6d(0x2f4)]('status',{'access':{'allow':![],'reason':_0x42ab6d(0x300),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x105c35){const _0x3fcb31=_0x35474e;getClientsWithUuid(_0x105c35)[_0x3fcb31(0x223)](_0x493331=>{const _0x1dbdcd=_0x3fcb31;getSocket(_0x493331['id'])[_0x1dbdcd(0x36d)]();});}function cleanSettings(){const _0x5280e5=_0x35474e;let _0x3f90cc=settings;return settings[_0x5280e5(0x27d)]&&settings['telegramToken']!=''&&(_0x3f90cc={..._0x3f90cc,'telegramToken':_0x5280e5(0x348)}),settings[_0x5280e5(0x2ca)]&&settings[_0x5280e5(0x2ca)]!=''&&(_0x3f90cc={..._0x3f90cc,'bbPassword':_0x5280e5(0x348)}),(settings['bbPassword']&&settings[_0x5280e5(0x2ca)]=='***'||settings[_0x5280e5(0x27d)]&&settings['telegramToken']==_0x5280e5(0x253))&&(_0x3f90cc={..._0x3f90cc,'restored':{'password':settings[_0x5280e5(0x2ca)]=='***','telegram':settings[_0x5280e5(0x27d)]==_0x5280e5(0x253)}}),_0x3f90cc;}async function updateBB(_0x1acc23){const _0x34727a=_0x35474e;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x7ccb26=>{const _0x4b71ee=_0xf8eb;restartBot(_0x7ccb26[_0x4b71ee(0x2d9)]);}),logger[_0x34727a(0x1e8)](_0x34727a(0x2f1)+_0x1acc23);if(_0x1acc23==_0x34727a(0x1c9))process[_0x34727a(0x2b8)]({'update':!![]},_0xaa64c3=>{});else _0x1acc23=='reinstall'&&process['send']({'reinstall':!![]},_0x46fb81=>{});}function startBot(_0x577ca0,_0x36abf0,_0x3779ff){const _0x56e734=_0x35474e;if(debugging)_0x577ca0[_0x56e734(0x238)]('-d');let _0xf2069a=![];const _0x5729c1=_0x577ca0[0x0];_0x36abf0={..._0x36abf0,'stdio':[_0x56e734(0x2c2),_0x56e734(0x2c2),_0x56e734(0x2c2),_0x56e734(0x1eb)]},pid[_0x5729c1]=childProcess['fork'](botfile,_0x577ca0,_0x36abf0),pid[_0x5729c1]['on'](_0x56e734(0x274),_0x3480e2=>{const _0x503c33=_0x56e734;switch(Object['keys'](_0x3480e2)[0x0]){case _0x503c33(0x230):updateBotName(_0x5729c1,_0x3480e2[_0x503c33(0x230)]);break;case _0x503c33(0x30d):updateBotManager();break;case _0x503c33(0x26d):updateStatus(_0x5729c1,_0x3480e2[_0x503c33(0x26d)]);break;case _0x503c33(0x266):updateLive(_0x5729c1,_0x3480e2[_0x503c33(0x266)]);break;case _0x503c33(0x267):updateLive(_0x5729c1,_0x3480e2[_0x503c33(0x267)]),io['to'](_0x5729c1)['emit'](_0x503c33(0x26d),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x503c33(0x1aa):_0x3480e2[_0x503c33(0x1aa)]==_0x503c33(0x2a0)&&restartBot(_0x5729c1);_0x3480e2[_0x503c33(0x1aa)]==_0x503c33(0x1e0)&&toggleBot(_0x5729c1,_0x503c33(0x1f0),_0x503c33(0x2f6));break;case _0x503c33(0x1c1):sendTelegram(_0x5729c1,_0x3480e2[_0x503c33(0x1c1)]);break;case _0x503c33(0x1c0):sendTelegramMsg(_0x3480e2[_0x503c33(0x1c0)]);break;case _0x503c33(0x1e4):io['to'](_0x5729c1)[_0x503c33(0x2f4)](_0x3480e2[_0x503c33(0x1e4)],_0x3480e2['args']);break;}}),pid[_0x5729c1]['on'](_0x56e734(0x254),function(_0x78ac2b){if(_0xf2069a)return;_0xf2069a=!![],_0x3779ff(_0x78ac2b);}),pid[_0x5729c1]['on'](_0x56e734(0x31d),async function(_0x160b02){const _0xf353e4=_0x56e734;if(installingUpdate)return;if(_0xf2069a)return;_0xf2069a=!![],_0x3779ff(null);const _0xb9b026=dbConfig[_0xf353e4(0x2e8)](_0xf353e4(0x2f9))['find']({'botID':_0x5729c1})[_0xf353e4(0x312)]();_0xb9b026&&(_0xb9b026['status']==_0xf353e4(0x30a)||_0xb9b026[_0xf353e4(0x26d)]==_0xf353e4(0x2e2))&&(await sleep(0x3e8),updateLive(_0x5729c1,'stopped'),logger[_0xf353e4(0x1c3)](_0xf353e4(0x351)+_0x5729c1),startBot([_0x5729c1,userID],{'cwd':bbpath},function(_0x37b18d){const _0x1d44a2=_0xf353e4;if(_0x37b18d)logger[_0x1d44a2(0x1c3)](_0x37b18d);}));});}function stopBot(_0x3ab9b2){const _0x327541=_0x35474e;getClientsWithBotID(_0x3ab9b2)[_0x327541(0x223)](_0x462a15=>{const _0x5957ff=_0x327541;getSocket(_0x462a15['id'])[_0x5957ff(0x27e)](!![]),removeClient(_0x462a15['id']);}),pid[_0x3ab9b2]&&(pid[_0x3ab9b2][_0x327541(0x1e0)](),pid[_0x3ab9b2]=null);}function restartBot(_0x1c90d8){const _0x10ecf1=_0x35474e;if(pid[_0x1c90d8])pid[_0x1c90d8][_0x10ecf1(0x1e0)]();}function addBot(){const _0x1a0bc8=_0x35474e;let _0x273f3e;for(let _0x2f37ae=0x1;_0x2f37ae<0x3e9;_0x2f37ae++){_0x273f3e=_0x2f37ae['toString']()['padStart'](0x3,'0');let _0x47be28=config[_0x1a0bc8(0x29c)](_0x4682e7=>_0x4682e7[_0x1a0bc8(0x2d9)]==_0x273f3e);if(!_0x47be28)break;}if(_0x273f3e===_0x1a0bc8(0x21e)){logger[_0x1a0bc8(0x1c3)](_0x1a0bc8(0x297));return;}logger[_0x1a0bc8(0x1c3)](_0x1a0bc8(0x2d0)+_0x273f3e),dbConfig['get']('bots')[_0x1a0bc8(0x238)]({'botID':_0x273f3e,'botname':_0x1a0bc8(0x21c)+_0x273f3e,'status':'new','live':''})[_0x1a0bc8(0x354)](),startBot([_0x273f3e,userID],{'cwd':bbpath},function(_0x485df7){const _0x267c0e=_0x1a0bc8;if(_0x485df7)logger[_0x267c0e(0x1c3)](_0x485df7);}),config=getConfiguration(),io['to'](_0x1a0bc8(0x295))[_0x1a0bc8(0x2f4)](_0x1a0bc8(0x2f9),config),broadcastToBots(_0x1a0bc8(0x2f9),JSON['stringify'](config));}function deleteBot(_0x34ee94){const _0x41e42c=_0x35474e;getClientsWithBotID(_0x34ee94)[_0x41e42c(0x223)](_0x4fc21c=>{const _0x4bdc29=_0x41e42c;getSocket(_0x4fc21c['id'])[_0x4bdc29(0x27e)](!![]),removeClient(_0x4fc21c['id']);}),dbConfig[_0x41e42c(0x2e8)](_0x41e42c(0x2f9))[_0x41e42c(0x262)]({'botID':_0x34ee94})['write'](),logger[_0x41e42c(0x1c3)](_0x41e42c(0x2b3)+_0x34ee94),stopBot(_0x34ee94);try{if(fs[_0x41e42c(0x1ad)](path[_0x41e42c(0x23c)](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x208))))fs[_0x41e42c(0x19e)](path[_0x41e42c(0x23c)](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x208)));if(fs[_0x41e42c(0x1ad)](path[_0x41e42c(0x23c)](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x281))))fs[_0x41e42c(0x19e)](path['join'](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x281)));if(fs['existsSync'](path[_0x41e42c(0x23c)](configpath,_0x41e42c(0x19f)+_0x34ee94+'-performance.json')))fs[_0x41e42c(0x19e)](path['join'](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x1dc)));if(fs[_0x41e42c(0x1ad)](path['join'](configpath,'bot-'+_0x34ee94+_0x41e42c(0x20e))))fs[_0x41e42c(0x19e)](path['join'](configpath,_0x41e42c(0x19f)+_0x34ee94+_0x41e42c(0x20e)));}catch(_0x32d567){if(_0x32d567)logger[_0x41e42c(0x1c3)](_0x41e42c(0x225),_0x32d567);}config=getConfiguration(),io['to'](_0x41e42c(0x295))[_0x41e42c(0x2f4)](_0x41e42c(0x2f9),config),broadcastToBots(_0x41e42c(0x2f9),JSON[_0x41e42c(0x342)](config));}function toggleBot(_0x2f8f86,_0x478c3f,_0x36706b){const _0x4eb646=_0x35474e;dbConfig[_0x4eb646(0x2e8)](_0x4eb646(0x2f9))[_0x4eb646(0x29c)]({'botID':_0x2f8f86})[_0x4eb646(0x34e)]({'status':_0x478c3f})['assign']({'live':_0x36706b})['write']();if(_0x478c3f=='enabled'||_0x478c3f==_0x4eb646(0x2e2))logger[_0x4eb646(0x1c3)](_0x4eb646(0x1f9)+_0x2f8f86),startBot([_0x2f8f86,userID],{'cwd':bbpath},function(_0xc2b5d2){const _0x18e54a=_0x4eb646;if(_0xc2b5d2)logger[_0x18e54a(0x1c3)](_0xc2b5d2);});else(_0x478c3f==_0x4eb646(0x1f0)||_0x478c3f==_0x4eb646(0x289))&&(logger[_0x4eb646(0x1c3)](_0x4eb646(0x23f)+_0x2f8f86),stopBot(_0x2f8f86));config=getConfiguration(),io['to'](_0x4eb646(0x295))[_0x4eb646(0x2f4)](_0x4eb646(0x2f9),config),broadcastToBots(_0x4eb646(0x2f9),JSON[_0x4eb646(0x342)](config));}function _0xf8eb(_0x41bfb6,_0x28842e){const _0x281ce8=_0x23e1();return _0xf8eb=function(_0x38d186,_0x55e60c){_0x38d186=_0x38d186-0x19c;let _0x23e127=_0x281ce8[_0x38d186];return _0x23e127;},_0xf8eb(_0x41bfb6,_0x28842e);}function toggleStatus(_0x2d779b){const _0x19c77e=_0x35474e;let _0x208757=dbConfig[_0x19c77e(0x2e8)]('bots')['find']({'botID':_0x2d779b})[_0x19c77e(0x312)](),_0x4e0b06;if(_0x208757[_0x19c77e(0x26d)]===_0x19c77e(0x30a))_0x4e0b06=_0x19c77e(0x1f0);else{if(_0x208757[_0x19c77e(0x26d)]==='new')_0x4e0b06=_0x19c77e(0x289);else{if(_0x208757[_0x19c77e(0x26d)]===_0x19c77e(0x289))_0x4e0b06=_0x19c77e(0x2e2);else{if(_0x208757[_0x19c77e(0x26d)]===_0x19c77e(0x1f0))_0x4e0b06=_0x19c77e(0x30a);}}}return _0x4e0b06;}function updateStatus(_0x5244ae,_0xce1c46){const _0x1579e7=_0x35474e;dbConfig[_0x1579e7(0x2e8)](_0x1579e7(0x2f9))['find']({'botID':_0x5244ae})[_0x1579e7(0x34e)]({'status':_0xce1c46})[_0x1579e7(0x354)](),config=getConfiguration(),io['to'](_0x1579e7(0x295))[_0x1579e7(0x2f4)](_0x1579e7(0x2f9),config),broadcastToBots(_0x1579e7(0x2f9),JSON['stringify'](config));}function updateLive(_0xfd220d,_0x3c1323){const _0x275aa6=_0x35474e;dbConfig[_0x275aa6(0x2e8)]('bots')['find']({'botID':_0xfd220d})[_0x275aa6(0x34e)]({'live':_0x3c1323})[_0x275aa6(0x354)](),config=getConfiguration(),io['to'](_0x275aa6(0x295))[_0x275aa6(0x2f4)](_0x275aa6(0x2f9),config),broadcastToBots('bots',JSON[_0x275aa6(0x342)](config));}function updateBotName(_0x4f9825,_0x57ac49){const _0x16d374=_0x35474e;dbConfig['get'](_0x16d374(0x2f9))['find']({'botID':_0x4f9825})[_0x16d374(0x34e)]({'botname':_0x57ac49})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x16d374(0x2f4)](_0x16d374(0x2f9),config),broadcastToBots(_0x16d374(0x2f9),JSON[_0x16d374(0x342)](config));}function updateBotManager(){const _0x43b3c2=_0x35474e;config=getConfiguration(),io['to'](_0x43b3c2(0x295))[_0x43b3c2(0x2f4)](_0x43b3c2(0x2f9),config),broadcastToBots(_0x43b3c2(0x2f9),JSON[_0x43b3c2(0x342)](config));}function toggleBotMode(_0x413294){const _0x363e5c=_0x35474e;if(pid[_0x413294])pid[_0x413294]['send']({'function':_0x363e5c(0x1d9),'args':null});else{const _0x510b30=configpath+_0x363e5c(0x19f)+_0x413294+'-config.json',_0x55b50e=fs[_0x363e5c(0x340)](_0x510b30),_0x214817=JSON[_0x363e5c(0x2ce)](_0x55b50e),_0x5bfa4c=_0x214817[_0x363e5c(0x352)][0x0][_0x363e5c(0x27b)];_0x214817[_0x363e5c(0x352)][0x0][_0x363e5c(0x27b)]=!_0x5bfa4c;const _0x4ae480=JSON[_0x363e5c(0x342)](_0x214817,null,0x2);fs[_0x363e5c(0x296)](_0x510b30,_0x4ae480),config=getConfiguration(),io['to']('botmanager')[_0x363e5c(0x2f4)]('bots',config),broadcastToBots(_0x363e5c(0x2f9),JSON[_0x363e5c(0x342)](config));}}function telegramError(_0x2c5a3a){const _0x4f2490=_0x35474e;logger[_0x4f2490(0x231)](getTimeStamp()+_0x4f2490(0x1ef));}function validateTelegram(_0x2f1a9c){const _0x287afc=_0x35474e;if(_0x2f1a9c['from'][_0x287afc(0x239)]!=settings[_0x287afc(0x347)]&&'@'+_0x2f1a9c[_0x287afc(0x2af)]['username']!=settings[_0x287afc(0x347)])return tgBot[_0x287afc(0x28f)](_0x2f1a9c['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x287afc(0x2d2)})[_0x287afc(0x36a)](_0x33d3ff=>{telegramError(_0x33d3ff);}),![];return!![];}async function initTelegram(){const _0x5127e6=_0x35474e;if(tgBot)tgBot[_0x5127e6(0x2ad)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5127e6(0x27d)],{'polling':!![]});let _0x4ff2c4='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x4ff2c4+='\x0a',_0x4ff2c4+=_0x5127e6(0x234),_0x4ff2c4+=_0x5127e6(0x344),_0x4ff2c4+=_0x5127e6(0x1c5),_0x4ff2c4+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x4ff2c4+=_0x5127e6(0x32c),_0x4ff2c4+=_0x5127e6(0x270),_0x4ff2c4+=_0x5127e6(0x264),_0x4ff2c4+=_0x5127e6(0x1ac),_0x4ff2c4+=_0x5127e6(0x330),_0x4ff2c4+=_0x5127e6(0x307),_0x4ff2c4+=_0x5127e6(0x2a1),_0x4ff2c4+=_0x5127e6(0x2c5),_0x4ff2c4+=_0x5127e6(0x20b),_0x4ff2c4+=_0x5127e6(0x31e);let _0x1a8649=_0x5127e6(0x210);_0x1a8649+='\x0a',_0x1a8649+=_0x4ff2c4,tgBot['onText'](/\/start/,_0x549562=>{const _0x4e2dd7=_0x5127e6;if(!validateTelegram(_0x549562))return;if(settings[_0x4e2dd7(0x1ce)]!=_0x549562[_0x4e2dd7(0x2f2)]['id'])updateSetting('telegramChatId',_0x549562[_0x4e2dd7(0x2f2)]['id']);updateSetting(_0x4e2dd7(0x1dd),!![]),tgBot['sendMessage'](_0x549562[_0x4e2dd7(0x2f2)]['id'],_0x1a8649)[_0x4e2dd7(0x36a)](_0x2e14b2=>{telegramError(_0x2e14b2);});}),tgBot[_0x5127e6(0x2c0)](/\/enable/,_0x46ee8e=>{const _0x33b714=_0x5127e6;if(!validateTelegram(_0x46ee8e))return;if(settings[_0x33b714(0x1ce)]!=_0x46ee8e[_0x33b714(0x2f2)]['id'])updateSetting(_0x33b714(0x1ce),_0x46ee8e[_0x33b714(0x2f2)]['id']);updateSetting(_0x33b714(0x1dd),!![]),tgBot['sendMessage'](_0x46ee8e[_0x33b714(0x2f2)]['id'],'Notifications\x20enabled')[_0x33b714(0x36a)](_0x52d0b8=>{telegramError(_0x52d0b8);});}),tgBot[_0x5127e6(0x2c0)](/\/config/,async _0x5b1c18=>{const _0x5530db=_0x5127e6;if(!validateTelegram(_0x5b1c18))return;tgBot['removeListener'](_0x5530db(0x1d0)),tgBot[_0x5530db(0x28f)](_0x5b1c18[_0x5530db(0x2f2)]['id'],_0x5530db(0x2f3),{'reply_markup':{'inline_keyboard':[[{'text':_0x5530db(0x2a3),'callback_data':_0x5530db(0x1cb)},{'text':_0x5530db(0x31c),'callback_data':_0x5530db(0x29f)},{'text':_0x5530db(0x1db),'callback_data':'all'}]]}})['catch'](_0x10128c=>{telegramError(_0x10128c);}),tgBot['on'](_0x5530db(0x1d0),async _0x39ee8b=>{const _0x54aed4=_0x5530db,_0x23a1bf=_0x39ee8b[_0x54aed4(0x306)],_0x32d9f1=_0x39ee8b[_0x54aed4(0x274)];tgBot['answerCallbackQuery'](_0x39ee8b['id'])['then'](async()=>{const _0x2b6b26=_0x54aed4;_0x23a1bf==_0x2b6b26(0x1cb)&&(updateSetting(_0x2b6b26(0x22e),_0x2b6b26(0x1cb)),updateSetting('telegramEnabled',!![]),await tgBot[_0x2b6b26(0x28f)](_0x32d9f1[_0x2b6b26(0x2f2)]['id'],_0x2b6b26(0x1e3))['catch'](_0x425fa9=>{telegramError(_0x425fa9);}));_0x23a1bf==_0x2b6b26(0x29f)&&(updateSetting(_0x2b6b26(0x22e),_0x2b6b26(0x29f)),updateSetting(_0x2b6b26(0x1dd),!![]),await tgBot[_0x2b6b26(0x28f)](_0x32d9f1['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x5ec769=>{telegramError(_0x5ec769);}));_0x23a1bf==_0x2b6b26(0x21d)&&(updateSetting('telegramEvents',_0x2b6b26(0x21d)),updateSetting(_0x2b6b26(0x1dd),!![]),await tgBot[_0x2b6b26(0x28f)](_0x32d9f1['chat']['id'],_0x2b6b26(0x2ed))[_0x2b6b26(0x36a)](_0x35cd53=>{telegramError(_0x35cd53);}));if(!settings['telegramChatId'])tgBot[_0x2b6b26(0x28f)](_0x32d9f1[_0x2b6b26(0x2f2)]['id'],_0x2b6b26(0x216))[_0x2b6b26(0x36a)](_0x3063c3=>{telegramError(_0x3063c3);});}),tgBot[_0x54aed4(0x2cb)](_0x54aed4(0x1d0));});}),tgBot[_0x5127e6(0x2c0)](/\/status/,_0x10e76c=>{const _0x3a2ad2=_0x5127e6;if(!validateTelegram(_0x10e76c))return;const _0xd04522=getBotsWithMode();let _0x55eb11=_0x3a2ad2(0x222);config[_0x3a2ad2(0x223)](_0x173b24=>{const _0x2b2a1c=_0x3a2ad2,_0x4f3191=_0xd04522[_0x2b2a1c(0x29c)](_0xb01f78=>_0xb01f78[_0x2b2a1c(0x2d9)]==_0x173b24[_0x2b2a1c(0x2d9)])['mode'];_0x55eb11+=_0x2b2a1c(0x21c)+_0x173b24[_0x2b2a1c(0x2d9)]+':\x20'+_0x173b24[_0x2b2a1c(0x26d)]+_0x2b2a1c(0x29e)+_0x4f3191+_0x2b2a1c(0x29e)+_0x173b24['live']+'\x0a';}),_0x55eb11+='\x0a',_0x55eb11+=_0x3a2ad2(0x203),_0x55eb11+=!settings[_0x3a2ad2(0x1dd)]?_0x3a2ad2(0x217):'Notifications\x20enabled\x0a',_0x55eb11+=settings['telegramEnabled']?settings[_0x3a2ad2(0x22e)]==_0x3a2ad2(0x21d)?_0x3a2ad2(0x25d):_0x3a2ad2(0x33e)+settings[_0x3a2ad2(0x22e)]+'\x20only\x0a':'',tgBot[_0x3a2ad2(0x28f)](_0x10e76c['chat']['id'],_0x55eb11,{'parse_mode':_0x3a2ad2(0x2d2)})[_0x3a2ad2(0x36a)](_0x10ad02=>{telegramError(_0x10ad02);});}),tgBot[_0x5127e6(0x2c0)](/\/restart/,_0x12c2f4=>{const _0x4cb7e9=_0x5127e6;if(!validateTelegram(_0x12c2f4))return;tgBot[_0x4cb7e9(0x2cb)]('callback_query');const _0x3e9004=getEnabledBots();if(_0x3e9004[_0x4cb7e9(0x326)]==0x0)tgBot['sendMessage'](_0x12c2f4[_0x4cb7e9(0x2f2)]['id'],_0x4cb7e9(0x2e4))[_0x4cb7e9(0x36a)](_0x533cce=>{telegramError(_0x533cce);});else{if(_0x3e9004[_0x4cb7e9(0x326)]>0x1)_0x3e9004[_0x4cb7e9(0x238)]({'botID':_0x4cb7e9(0x21d)});let _0x3a1a5f=[],_0x443d56=[];const _0x4dc6eb=_0x3e9004[_0x4cb7e9(0x326)]%0x4==0x0||_0x3e9004[_0x4cb7e9(0x326)]%0x4==0x3||_0x3e9004[_0x4cb7e9(0x326)]%0x3==0x1?0x4:0x3;let _0x145581=0x0;_0x3e9004[_0x4cb7e9(0x223)]((_0x3b1f12,_0x2e6751)=>{const _0x2fdbc4=_0x4cb7e9;if(_0x2e6751%_0x4dc6eb==0x0)_0x443d56=[];_0x443d56[_0x2fdbc4(0x238)]({'text':_0x3b1f12['botID']==_0x2fdbc4(0x21d)?_0x2fdbc4(0x22a):_0x2fdbc4(0x21c)+_0x3b1f12[_0x2fdbc4(0x2d9)],'callback_data':_0x3b1f12[_0x2fdbc4(0x2d9)]}),_0x2e6751%_0x4dc6eb==0x0&&(_0x3a1a5f[_0x145581]=_0x443d56,_0x145581++);}),tgBot['sendMessage'](_0x12c2f4[_0x4cb7e9(0x2f2)]['id'],_0x4cb7e9(0x249),{'reply_markup':{'inline_keyboard':_0x3a1a5f}})[_0x4cb7e9(0x36a)](_0x19e912=>{telegramError(_0x19e912);}),tgBot['on'](_0x4cb7e9(0x1d0),async _0x34a7a5=>{const _0x7a6d5c=_0x4cb7e9,_0x29da21=_0x34a7a5[_0x7a6d5c(0x306)],_0x47ee9c=_0x34a7a5[_0x7a6d5c(0x274)];tgBot[_0x7a6d5c(0x314)](_0x34a7a5['id'])[_0x7a6d5c(0x260)](async()=>{const _0xa13428=_0x7a6d5c;_0x29da21==_0xa13428(0x21d)?config[_0xa13428(0x223)](_0x335e95=>{const _0x16770d=_0xa13428;restartBot(_0x335e95[_0x16770d(0x2d9)]);}):restartBot(_0x29da21);}),tgBot[_0x7a6d5c(0x2cb)](_0x7a6d5c(0x1d0));});}}),tgBot[_0x5127e6(0x2c0)](/\/on/,_0x5cdf60=>{const _0x479847=_0x5127e6;if(!validateTelegram(_0x5cdf60))return;tgBot[_0x479847(0x2cb)](_0x479847(0x1d0));const _0x59565f=getDisabledBots();if(_0x59565f['length']==0x0)tgBot[_0x479847(0x28f)](_0x5cdf60[_0x479847(0x2f2)]['id'],_0x479847(0x1d2))[_0x479847(0x36a)](_0x53448e=>{telegramError(_0x53448e);});else{if(_0x59565f['length']>0x1)_0x59565f[_0x479847(0x238)]({'botID':_0x479847(0x21d)});let _0x1a9649=[],_0x137d2a=[];const _0x53bc47=_0x59565f[_0x479847(0x326)]%0x4==0x0||_0x59565f[_0x479847(0x326)]%0x4==0x3||_0x59565f['length']%0x3==0x1?0x4:0x3;let _0x47f991=0x0;_0x59565f[_0x479847(0x223)]((_0x23b14e,_0x153c02)=>{const _0x13205a=_0x479847;if(_0x153c02%_0x53bc47==0x0)_0x137d2a=[];_0x137d2a[_0x13205a(0x238)]({'text':_0x23b14e[_0x13205a(0x2d9)]==_0x13205a(0x21d)?_0x13205a(0x22a):'Bot\x20'+_0x23b14e[_0x13205a(0x2d9)],'callback_data':_0x23b14e[_0x13205a(0x2d9)]}),_0x153c02%_0x53bc47==0x0&&(_0x1a9649[_0x47f991]=_0x137d2a,_0x47f991++);}),tgBot[_0x479847(0x28f)](_0x5cdf60['chat']['id'],_0x479847(0x303),{'reply_markup':{'inline_keyboard':_0x1a9649}})['catch'](_0x568560=>{telegramError(_0x568560);}),tgBot['on']('callback_query',async _0x73199a=>{const _0xb3a1b3=_0x479847,_0x465148=_0x73199a['data'],_0x391465=_0x73199a['message'];tgBot['answerCallbackQuery'](_0x73199a['id'])[_0xb3a1b3(0x260)](async()=>{const _0x50d40f=_0xb3a1b3;_0x465148==_0x50d40f(0x21d)?(tgBot[_0x50d40f(0x28f)](_0x391465['chat']['id'],_0x50d40f(0x1a8))['catch'](_0x36a64b=>{telegramError(_0x36a64b);}),_0x59565f['forEach'](_0x12561a=>{const _0x21f4ca=_0x50d40f;if(_0x12561a['botID']!=_0x21f4ca(0x21d))toggleBot(_0x12561a[_0x21f4ca(0x2d9)],toggleStatus(_0x12561a['botID']),_0x21f4ca(0x2f6));})):(tgBot[_0x50d40f(0x28f)](_0x391465[_0x50d40f(0x2f2)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x465148)[_0x50d40f(0x36a)](_0x16fa20=>{telegramError(_0x16fa20);}),toggleBot(_0x465148,toggleStatus(_0x465148),_0x50d40f(0x2f6)));}),tgBot['removeListener'](_0xb3a1b3(0x1d0));});}}),tgBot[_0x5127e6(0x2c0)](/\/off/,_0x3998ef=>{const _0x1304b9=_0x5127e6;if(!validateTelegram(_0x3998ef))return;tgBot[_0x1304b9(0x2cb)](_0x1304b9(0x1d0));const _0x4b82be=getEnabledBots();if(_0x4b82be[_0x1304b9(0x326)]==0x0)tgBot[_0x1304b9(0x28f)](_0x3998ef[_0x1304b9(0x2f2)]['id'],_0x1304b9(0x2e4))[_0x1304b9(0x36a)](_0x8cea50=>{telegramError(_0x8cea50);});else{if(_0x4b82be[_0x1304b9(0x326)]>0x1)_0x4b82be[_0x1304b9(0x238)]({'botID':_0x1304b9(0x21d)});let _0x360203=[],_0x4adc8c=[];const _0x416411=_0x4b82be['length']%0x4==0x0||_0x4b82be['length']%0x4==0x3||_0x4b82be['length']%0x3==0x1?0x4:0x3;let _0x1d7ab8=0x0;_0x4b82be[_0x1304b9(0x223)]((_0x21c56d,_0x2dd6a9)=>{const _0x2a2d69=_0x1304b9;if(_0x2dd6a9%_0x416411==0x0)_0x4adc8c=[];_0x4adc8c[_0x2a2d69(0x238)]({'text':_0x21c56d[_0x2a2d69(0x2d9)]==_0x2a2d69(0x21d)?_0x2a2d69(0x22a):'Bot\x20'+_0x21c56d[_0x2a2d69(0x2d9)],'callback_data':_0x21c56d['botID']}),_0x2dd6a9%_0x416411==0x0&&(_0x360203[_0x1d7ab8]=_0x4adc8c,_0x1d7ab8++);}),tgBot['sendMessage'](_0x3998ef[_0x1304b9(0x2f2)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x360203}})['catch'](_0x261a3e=>{telegramError(_0x261a3e);}),tgBot['on']('callback_query',async _0xcca87e=>{const _0x38b315=_0x1304b9,_0x2cf189=_0xcca87e[_0x38b315(0x306)],_0x5b4820=_0xcca87e[_0x38b315(0x274)];tgBot[_0x38b315(0x314)](_0xcca87e['id'])[_0x38b315(0x260)](async()=>{const _0x1719a8=_0x38b315;_0x2cf189==_0x1719a8(0x21d)?(tgBot[_0x1719a8(0x28f)](_0x5b4820[_0x1719a8(0x2f2)]['id'],_0x1719a8(0x2e0))[_0x1719a8(0x36a)](_0x47e924=>{telegramError(_0x47e924);}),_0x4b82be[_0x1719a8(0x223)](_0x360a06=>{const _0x4d4d20=_0x1719a8;if(_0x360a06[_0x4d4d20(0x2d9)]!=_0x4d4d20(0x21d))toggleBot(_0x360a06[_0x4d4d20(0x2d9)],toggleStatus(_0x360a06['botID']),_0x4d4d20(0x2f6));})):(tgBot[_0x1719a8(0x28f)](_0x5b4820[_0x1719a8(0x2f2)]['id'],_0x1719a8(0x2ea)+_0x2cf189)[_0x1719a8(0x36a)](_0x2e915a=>{telegramError(_0x2e915a);}),toggleBot(_0x2cf189,toggleStatus(_0x2cf189),_0x1719a8(0x2f6)));}),tgBot[_0x38b315(0x2cb)](_0x38b315(0x1d0));});}}),tgBot[_0x5127e6(0x2c0)](/\/metrics/,_0x74b42f=>{const _0x1dfb36=_0x5127e6;if(!validateTelegram(_0x74b42f))return;tgBot[_0x1dfb36(0x2cb)](_0x1dfb36(0x1d0));const _0x54470d=getEnabledBots();if(_0x54470d['length']==0x0)tgBot[_0x1dfb36(0x28f)](_0x74b42f[_0x1dfb36(0x2f2)]['id'],_0x1dfb36(0x2e4))[_0x1dfb36(0x36a)](_0xaca2c4=>{telegramError(_0xaca2c4);});else{if(_0x54470d[_0x1dfb36(0x326)]>0x1){let _0x481ee0=[],_0x910d88=[];const _0x3c5e65=_0x54470d[_0x1dfb36(0x326)]%0x4==0x0||_0x54470d['length']%0x4==0x3||_0x54470d[_0x1dfb36(0x326)]%0x3==0x1?0x4:0x3;let _0x5f13e0=0x0;_0x54470d[_0x1dfb36(0x223)]((_0x189c51,_0x4c83b2)=>{const _0x47a018=_0x1dfb36;if(_0x4c83b2%_0x3c5e65==0x0)_0x910d88=[];_0x910d88[_0x47a018(0x238)]({'text':_0x47a018(0x21c)+_0x189c51[_0x47a018(0x2d9)],'callback_data':_0x189c51['botID']}),_0x4c83b2%_0x3c5e65==0x0&&(_0x481ee0[_0x5f13e0]=_0x910d88,_0x5f13e0++);}),tgBot['sendMessage'](_0x74b42f['chat']['id'],_0x1dfb36(0x2e6),{'reply_markup':{'inline_keyboard':_0x481ee0}})[_0x1dfb36(0x36a)](_0x427378=>{telegramError(_0x427378);}),tgBot['on']('callback_query',async _0x1ba6dc=>{const _0x225ba3=_0x1dfb36,_0x5c732c=_0x1ba6dc[_0x225ba3(0x306)],_0x2e959b=_0x1ba6dc[_0x225ba3(0x274)];tgBot[_0x225ba3(0x314)](_0x1ba6dc['id'])['then'](async()=>{const _0x3b87ae=_0x225ba3;if(pid[_0x5c732c])pid[_0x5c732c][_0x3b87ae(0x2b8)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x225ba3(0x2cb)]('callback_query');});}else{const _0x4ad096=_0x54470d[0x0][_0x1dfb36(0x2d9)];if(pid[_0x4ad096])pid[_0x4ad096][_0x1dfb36(0x2b8)]({'function':_0x1dfb36(0x2b0),'args':null});}}}),tgBot[_0x5127e6(0x2c0)](/\/portfolio/,_0x2d57ae=>{const _0x44b92b=_0x5127e6;if(!validateTelegram(_0x2d57ae))return;tgBot['removeListener'](_0x44b92b(0x1d0));const _0x33343c=getEnabledBots();if(_0x33343c[_0x44b92b(0x326)]==0x0)tgBot[_0x44b92b(0x28f)](_0x2d57ae[_0x44b92b(0x2f2)]['id'],_0x44b92b(0x2e4))['catch'](_0x5c3cc0=>{telegramError(_0x5c3cc0);});else{if(_0x33343c['length']>0x1){let _0x68ea65=[],_0x259083=[];const _0x353bf6=_0x33343c[_0x44b92b(0x326)]%0x4==0x0||_0x33343c[_0x44b92b(0x326)]%0x4==0x3||_0x33343c[_0x44b92b(0x326)]%0x3==0x1?0x4:0x3;let _0x4e5c0d=0x0;_0x33343c[_0x44b92b(0x223)]((_0x3dcec5,_0x37e88d)=>{const _0xf7262b=_0x44b92b;if(_0x37e88d%_0x353bf6==0x0)_0x259083=[];_0x259083[_0xf7262b(0x238)]({'text':_0xf7262b(0x21c)+_0x3dcec5['botID'],'callback_data':_0x3dcec5['botID']}),_0x37e88d%_0x353bf6==0x0&&(_0x68ea65[_0x4e5c0d]=_0x259083,_0x4e5c0d++);}),tgBot[_0x44b92b(0x28f)](_0x2d57ae[_0x44b92b(0x2f2)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x68ea65}})[_0x44b92b(0x36a)](_0x214e07=>{telegramError(_0x214e07);}),tgBot['on'](_0x44b92b(0x1d0),async _0x1e356f=>{const _0x2a4dc3=_0x44b92b,_0x55ff41=_0x1e356f[_0x2a4dc3(0x306)],_0x27a42a=_0x1e356f[_0x2a4dc3(0x274)];tgBot[_0x2a4dc3(0x314)](_0x1e356f['id'])['then'](async()=>{const _0x389354=_0x2a4dc3;if(pid[_0x55ff41])pid[_0x55ff41][_0x389354(0x2b8)]({'function':'sendPortfolioTelegram','args':null});}),tgBot['removeListener'](_0x2a4dc3(0x1d0));});}else{const _0x2e0adc=_0x33343c[0x0][_0x44b92b(0x2d9)];if(pid[_0x2e0adc])pid[_0x2e0adc][_0x44b92b(0x2b8)]({'function':_0x44b92b(0x1ed),'args':null});}}}),tgBot[_0x5127e6(0x2c0)](/\/update/,async _0x347482=>{const _0x2c0e82=_0x5127e6;if(!validateTelegram(_0x347482))return;tgBot['removeListener'](_0x2c0e82(0x1d0)),await getMessages();if(!updateAvailable)tgBot[_0x2c0e82(0x28f)](_0x347482[_0x2c0e82(0x2f2)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x2c0e82(0x36a)](_0x465fd1=>{telegramError(_0x465fd1);});else!validInstallation?tgBot[_0x2c0e82(0x28f)](_0x347482[_0x2c0e82(0x2f2)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x2c0e82(0x36a)](_0xac9566=>{telegramError(_0xac9566);}):(tgBot[_0x2c0e82(0x28f)](_0x347482['chat']['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2c0e82(0x1f6),'callback_data':_0x2c0e82(0x248)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x46dc4e=>{telegramError(_0x46dc4e);}),tgBot['on'](_0x2c0e82(0x1d0),async _0x4592ef=>{const _0x3264f4=_0x2c0e82,_0x3249f9=_0x4592ef['data'],_0x28ecfd=_0x4592ef['message'];tgBot[_0x3264f4(0x314)](_0x4592ef['id'])[_0x3264f4(0x260)](async()=>{const _0x6fe3a6=_0x3264f4;_0x3249f9==_0x6fe3a6(0x248)&&(await tgBot[_0x6fe3a6(0x28f)](_0x28ecfd[_0x6fe3a6(0x2f2)]['id'],_0x6fe3a6(0x336))['catch'](_0x49a7d3=>{telegramError(_0x49a7d3);}),updateBB(_0x6fe3a6(0x1c9))),_0x3249f9=='no'&&await tgBot[_0x6fe3a6(0x28f)](_0x28ecfd[_0x6fe3a6(0x2f2)]['id'],_0x6fe3a6(0x2ef))[_0x6fe3a6(0x36a)](_0xb339e0=>{telegramError(_0xb339e0);});}),tgBot[_0x3264f4(0x2cb)](_0x3264f4(0x1d0));}));}),tgBot['onText'](/\/reinstall/,async _0xf03dde=>{const _0x2797f9=_0x5127e6;if(!validateTelegram(_0xf03dde))return;tgBot[_0x2797f9(0x2cb)](_0x2797f9(0x1d0)),!validInstallation?tgBot[_0x2797f9(0x28f)](_0xf03dde[_0x2797f9(0x2f2)]['id'],_0x2797f9(0x308))['catch'](_0x4c92ad=>{telegramError(_0x4c92ad);}):(tgBot[_0x2797f9(0x28f)](_0xf03dde[_0x2797f9(0x2f2)]['id'],_0x2797f9(0x24c),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x2797f9(0x36a)](_0x267b0c=>{telegramError(_0x267b0c);}),tgBot['on'](_0x2797f9(0x1d0),async _0x4e12d7=>{const _0x4922cc=_0x2797f9,_0x52c695=_0x4e12d7[_0x4922cc(0x306)],_0x50b232=_0x4e12d7[_0x4922cc(0x274)];tgBot[_0x4922cc(0x314)](_0x4e12d7['id'])[_0x4922cc(0x260)](async()=>{const _0xc6e406=_0x4922cc;_0x52c695==_0xc6e406(0x248)&&(await tgBot[_0xc6e406(0x28f)](_0x50b232[_0xc6e406(0x2f2)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0xc6e406(0x36a)](_0x1b5c1b=>{telegramError(_0x1b5c1b);}),updateBB(_0xc6e406(0x1b6))),_0x52c695=='no'&&await tgBot[_0xc6e406(0x28f)](_0x50b232[_0xc6e406(0x2f2)]['id'],_0xc6e406(0x1a3))[_0xc6e406(0x36a)](_0x5d0a87=>{telegramError(_0x5d0a87);});}),tgBot[_0x4922cc(0x2cb)](_0x4922cc(0x1d0));}));}),tgBot['onText'](/\/toggle/,_0x2db6b9=>{const _0x11f376=_0x5127e6;if(!validateTelegram(_0x2db6b9))return;tgBot[_0x11f376(0x2cb)](_0x11f376(0x1d0));const _0x333592=getBotsWithMode();if(_0x333592[_0x11f376(0x326)]==0x0)tgBot[_0x11f376(0x28f)](_0x2db6b9[_0x11f376(0x2f2)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x11f376(0x36a)](_0x1d0887=>{telegramError(_0x1d0887);});else{let _0x2ef591=[],_0x3301cb=[];const _0x3f1df8=0x2;let _0x555948=0x0;_0x333592[_0x11f376(0x223)]((_0x1b7c20,_0x201a6c)=>{const _0x58630f=_0x11f376;if(_0x201a6c%_0x3f1df8==0x0)_0x3301cb=[];_0x3301cb[_0x58630f(0x238)]({'text':_0x58630f(0x21c)+_0x1b7c20[_0x58630f(0x2d9)]+'\x20('+_0x1b7c20[_0x58630f(0x316)]+')','callback_data':_0x1b7c20[_0x58630f(0x2d9)]}),_0x201a6c%_0x3f1df8==0x0&&(_0x2ef591[_0x555948]=_0x3301cb,_0x555948++);}),tgBot[_0x11f376(0x28f)](_0x2db6b9[_0x11f376(0x2f2)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x2ef591}})[_0x11f376(0x36a)](_0x51cd1b=>{telegramError(_0x51cd1b);}),tgBot['on'](_0x11f376(0x1d0),async _0x41a073=>{const _0x7ed9a7=_0x11f376,_0x4a961f=_0x41a073['data'],_0x221049=_0x41a073['message'];tgBot['answerCallbackQuery'](_0x41a073['id'])['then'](async()=>{const _0x30b892=_0xf8eb,_0x242b18=_0x333592[_0x30b892(0x29c)](_0x160439=>_0x160439[_0x30b892(0x2d9)]==_0x4a961f),_0x46a09b=_0x242b18[_0x30b892(0x316)]==_0x30b892(0x301)?'manual':_0x30b892(0x301);tgBot[_0x30b892(0x28f)](_0x221049[_0x30b892(0x2f2)]['id'],_0x30b892(0x367)+_0x4a961f+_0x30b892(0x2d6)+_0x46a09b+_0x30b892(0x363))[_0x30b892(0x36a)](_0x532ba4=>{telegramError(_0x532ba4);}),toggleBotMode(_0x4a961f);}),tgBot[_0x7ed9a7(0x2cb)](_0x7ed9a7(0x1d0));});}}),tgBot[_0x5127e6(0x2c0)](/\/names/,_0xd2e489=>{const _0x13dafb=_0x5127e6;if(!validateTelegram(_0xd2e489))return;let _0x5a05fc='';config['forEach'](_0x507e52=>{const _0x5e2146=_0xf8eb;_0x5a05fc+='Bot\x20'+_0x507e52[_0x5e2146(0x2d9)]+':\x20'+_0x507e52[_0x5e2146(0x230)]+'\x0a';}),tgBot[_0x13dafb(0x28f)](_0xd2e489[_0x13dafb(0x2f2)]['id'],_0x5a05fc,{'parse_mode':_0x13dafb(0x2d2)})[_0x13dafb(0x36a)](_0x3308b8=>{telegramError(_0x3308b8);});}),tgBot[_0x5127e6(0x2c0)](/\/disable/,_0x357537=>{const _0x40e39a=_0x5127e6;if(!validateTelegram(_0x357537))return;tgBot[_0x40e39a(0x28f)](_0x357537[_0x40e39a(0x2f2)]['id'],_0x40e39a(0x2c6))['catch'](_0x28f03a=>{telegramError(_0x28f03a);}),updateSetting(_0x40e39a(0x1dd),![]);}),tgBot[_0x5127e6(0x2c0)](/\/help/,_0x49ea0a=>{const _0x1c1e2c=_0x5127e6;if(!validateTelegram(_0x49ea0a))return;tgBot[_0x1c1e2c(0x28f)](_0x49ea0a['chat']['id'],_0x4ff2c4)[_0x1c1e2c(0x36a)](_0x20621c=>{telegramError(_0x20621c);});}),tgBot['on'](_0x5127e6(0x30c),_0x274751=>{const _0x3a6bf0=_0x5127e6;_0x274751['toString']()[_0x3a6bf0(0x2fd)](_0x3a6bf0(0x2a8))&&(logger[_0x3a6bf0(0x1c3)](_0x3a6bf0(0x2a6)),tgBot[_0x3a6bf0(0x2ad)](),tgBot=null,io['to'](_0x3a6bf0(0x295))[_0x3a6bf0(0x2f4)](_0x3a6bf0(0x209),_0x3a6bf0(0x2a6)));}),process['once'](_0x5127e6(0x1ae),()=>{const _0x48fe74=_0x5127e6;if(tgBot)tgBot[_0x48fe74(0x2ad)]();process[_0x48fe74(0x31d)](0x1);}),process[_0x5127e6(0x315)](_0x5127e6(0x1d8),()=>{const _0x45d27f=_0x5127e6;if(tgBot)tgBot['stopPolling']();process[_0x45d27f(0x31d)](0x1);});}}function disableTelegram(){const _0x8d5aa5=_0x35474e;tgBot&&(tgBot[_0x8d5aa5(0x2ad)](),tgBot=null);}function sendTelegram(_0xfecef,_0x4a3d1d){const _0x1775d6=_0x35474e;if(settings[_0x1775d6(0x1dd)]){if(settings[_0x1775d6(0x22e)]==_0x1775d6(0x21d)||(_0x4a3d1d[_0x1775d6(0x364)]==_0x1775d6(0x254)||_0x4a3d1d[_0x1775d6(0x364)]=='warning'||_0x4a3d1d[_0x1775d6(0x364)]=='success')&&settings[_0x1775d6(0x22e)]==_0x1775d6(0x29f)||_0x4a3d1d[_0x1775d6(0x364)]=='order'&&settings[_0x1775d6(0x22e)]==_0x1775d6(0x1cb)){if(tgBot&&settings[_0x1775d6(0x1ce)]){if(_0x4a3d1d[_0x1775d6(0x356)])tgBot[_0x1775d6(0x28f)](settings[_0x1775d6(0x1ce)],_0x4a3d1d[_0x1775d6(0x230)]+_0x1775d6(0x2b9)+_0x4a3d1d[_0x1775d6(0x240)])[_0x1775d6(0x36a)](_0x42cfce=>{telegramError(_0x42cfce);});else tgBot['sendMessage'](settings['telegramChatId'],_0x1775d6(0x21c)+_0xfecef+'\x20>\x20'+_0x4a3d1d['event'])[_0x1775d6(0x36a)](_0x2ab8f5=>{telegramError(_0x2ab8f5);});}}}}async function sendTelegramMsg(_0x136c4f,_0x27df13=_0x35474e(0x2d2)){const _0x2891ca=_0x35474e;return settings[_0x2891ca(0x1dd)]&&tgBot&&settings[_0x2891ca(0x1ce)]?(await tgBot['sendMessage'](settings[_0x2891ca(0x1ce)],_0x136c4f,{'parse_mode':_0x27df13})[_0x2891ca(0x36a)](_0x377762=>{telegramError(_0x377762);}),!![]):![];}function getDeviceWithIp(_0x29e801){const _0x3990f1=_0x35474e;return devices[_0x3990f1(0x29c)](_0x416bf4=>_0x416bf4['ip']===_0x29e801);}function temporaryAccess2FA(_0x59c7e2,_0x33762c){const _0x1c9307=_0x35474e;let _0x575d20=new Date(),_0x321250=![];if(lastIpApproval){if(_0x575d20-lastIpApproval<0x1388)_0x321250=!![];}lastIpApproval=new Date();if(_0x321250)return;tgBot&&settings[_0x1c9307(0x1ce)]&&(tgBot[_0x1c9307(0x2cb)](_0x1c9307(0x1d0)),tgBot['sendMessage'](settings[_0x1c9307(0x1ce)],_0x1c9307(0x272)+normalizeIP(_0x33762c)[_0x1c9307(0x283)]+_0x1c9307(0x332),{'parse_mode':_0x1c9307(0x2d2),'reply_markup':{'inline_keyboard':[[{'text':_0x1c9307(0x276),'callback_data':'5'},{'text':_0x1c9307(0x31a),'callback_data':'15'},{'text':_0x1c9307(0x353),'callback_data':'30'},{'text':_0x1c9307(0x2e3),'callback_data':'reject'}]]}})['catch'](_0x55b7e7=>{telegramError(_0x55b7e7);}),tgBot['on'](_0x1c9307(0x1d0),async _0x22f25f=>{const _0x50c001=_0x1c9307,_0x1a8a4c=_0x22f25f[_0x50c001(0x306)],_0x3fcc3d=_0x22f25f[_0x50c001(0x274)];tgBot[_0x50c001(0x314)](_0x22f25f['id'])[_0x50c001(0x260)](async()=>{const _0x120db0=_0x50c001;devices[_0x59c7e2]['telegramIpApproval']={'clientip':_0x33762c,'timestamp':new Date()[_0x120db0(0x287)](),'expiry':_0x1a8a4c},_0x1a8a4c!='reject'?(await tgBot[_0x120db0(0x28f)](_0x3fcc3d[_0x120db0(0x2f2)]['id'],_0x120db0(0x290)+_0x1a8a4c+_0x120db0(0x366),{'parse_mode':_0x120db0(0x2d2)})['catch'](_0x130d23=>{telegramError(_0x130d23);}),io['to'](_0x59c7e2)[_0x120db0(0x2f4)]('status',{'access':{'allow':![],'reason':_0x120db0(0x19c),'token':null}})):(await tgBot[_0x120db0(0x28f)](_0x3fcc3d[_0x120db0(0x2f2)]['id'],_0x120db0(0x32b))['catch'](_0x5c874d=>{telegramError(_0x5c874d);}),io['to'](_0x59c7e2)[_0x120db0(0x2f4)]('status',{'access':{'allow':![],'reason':_0x120db0(0x2dc),'token':null}}));}),tgBot['removeListener'](_0x50c001(0x1d0));}));}function loginAccess2FA(_0x36ee66,_0x301f7d){const _0x4acff3=_0x35474e;tgBot&&settings[_0x4acff3(0x1ce)]&&(tgBot['removeListener'](_0x4acff3(0x1d0)),tgBot[_0x4acff3(0x28f)](settings[_0x4acff3(0x1ce)],_0x4acff3(0x24b)+normalizeIP(_0x301f7d)[_0x4acff3(0x283)]+_0x4acff3(0x332),{'parse_mode':_0x4acff3(0x2d2),'reply_markup':{'inline_keyboard':[[{'text':_0x4acff3(0x25b),'callback_data':loginExpiry},{'text':_0x4acff3(0x2e3),'callback_data':_0x4acff3(0x2e3)}]]}})[_0x4acff3(0x36a)](_0x36e7a1=>{telegramError(_0x36e7a1);}),tgBot['on'](_0x4acff3(0x1d0),async _0x15dbaf=>{const _0x3ed9d2=_0x4acff3,_0x2c478c=_0x15dbaf[_0x3ed9d2(0x306)],_0x3e802a=_0x15dbaf[_0x3ed9d2(0x274)];tgBot[_0x3ed9d2(0x314)](_0x15dbaf['id'])[_0x3ed9d2(0x260)](async()=>{const _0x4b80fa=_0x3ed9d2;devices[_0x36ee66][_0x4b80fa(0x258)]={'clientip':_0x301f7d,'timestamp':new Date()[_0x4b80fa(0x287)](),'expiry':_0x2c478c},_0x2c478c!=_0x4b80fa(0x2e3)?(await tgBot['sendMessage'](_0x3e802a[_0x4b80fa(0x2f2)]['id'],_0x4b80fa(0x2a4),{'parse_mode':_0x4b80fa(0x2d2)})[_0x4b80fa(0x36a)](_0x2e9c5b=>{telegramError(_0x2e9c5b);}),io['to'](_0x36ee66)[_0x4b80fa(0x2f4)](_0x4b80fa(0x26d),{'access':{'allow':![],'reason':_0x4b80fa(0x19c),'token':null}})):(await tgBot['sendMessage'](_0x3e802a[_0x4b80fa(0x2f2)]['id'],'Login\x20rejected')['catch'](_0x501ef6=>{telegramError(_0x501ef6);}),io['to'](_0x36ee66)[_0x4b80fa(0x2f4)](_0x4b80fa(0x26d),{'access':{'allow':![],'reason':_0x4b80fa(0x269),'token':null}}));}),tgBot[_0x3ed9d2(0x2cb)](_0x3ed9d2(0x1d0));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5d5acc=_0x35474e;return dbConfig[_0x5d5acc(0x2e8)]('bots')[_0x5d5acc(0x319)](_0x5d5acc(0x2d9))[_0x5d5acc(0x299)]({'status':_0x5d5acc(0x30a)})[_0x5d5acc(0x312)]()||[];}function getDisabledBots(){const _0x331a80=_0x35474e;return dbConfig[_0x331a80(0x2e8)](_0x331a80(0x2f9))[_0x331a80(0x319)]('botID')[_0x331a80(0x299)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x2f62da){const _0x3dd1ae=_0x35474e;let _0x3e8fab={};const _0x49075c=configpath+_0x3dd1ae(0x19f)+_0x2f62da+_0x3dd1ae(0x208),_0x1c69e7=fs[_0x3dd1ae(0x1ad)](_0x49075c);if(_0x1c69e7){const _0x21b175=fs['readFileSync'](_0x49075c);try{const _0x54ea71=JSON['parse'](_0x21b175),_0x2c7ae3=_0x54ea71?_0x54ea71[_0x3dd1ae(0x352)][0x0]['headless']:![];_0x3e8fab['mode']=_0x2c7ae3?_0x3dd1ae(0x301):_0x3dd1ae(0x302),_0x3e8fab['botname']=_0x54ea71?_0x54ea71[_0x3dd1ae(0x352)][0x0][_0x3dd1ae(0x230)]:_0x3dd1ae(0x21c)+_0x2f62da;}catch(_0x23b22e){_0x3e8fab[_0x3dd1ae(0x316)]=_0x3dd1ae(0x302),_0x3e8fab[_0x3dd1ae(0x230)]=_0x3dd1ae(0x21c)+_0x2f62da;}}else _0x3e8fab[_0x3dd1ae(0x316)]='manual',_0x3e8fab[_0x3dd1ae(0x230)]='Bot\x20'+_0x2f62da;return _0x3e8fab;}function getBotsWithMode(){const _0x36619f=_0x35474e,_0x4215cb=dbConfig['get'](_0x36619f(0x2f9))[_0x36619f(0x319)](_0x36619f(0x2d9))['value']()||[];return _0x4215cb[_0x36619f(0x223)](_0x5d65f0=>{const _0x10cef6=_0x36619f;let _0x214339=getBotAttributes(_0x5d65f0[_0x10cef6(0x2d9)]);_0x5d65f0[_0x10cef6(0x316)]=_0x214339[_0x10cef6(0x316)];}),_0x4215cb;}function getBotExchanges(){const _0x3d5b03=_0x35474e;let _0x1514f7=[];const _0x671cb5=dbConfig[_0x3d5b03(0x2e8)](_0x3d5b03(0x2f9))[_0x3d5b03(0x319)](_0x3d5b03(0x2d9))[_0x3d5b03(0x312)]()||[];_0x671cb5[_0x3d5b03(0x223)](_0x566391=>{const _0x37fa2f=_0x3d5b03;if(_0x566391['status']==_0x37fa2f(0x30a)){const _0x33e4b8=configpath+_0x37fa2f(0x19f)+_0x566391[_0x37fa2f(0x2d9)]+_0x37fa2f(0x208),_0x53a639=fs[_0x37fa2f(0x1ad)](_0x33e4b8);let _0x5044a4;if(_0x53a639){const _0x229012=fs['readFileSync'](_0x33e4b8);try{const _0x33b6f6=JSON[_0x37fa2f(0x2ce)](_0x229012);_0x5044a4=_0x33b6f6?_0x33b6f6[_0x37fa2f(0x352)][0x0][_0x37fa2f(0x282)]:null;}catch(_0xb0aa35){}}if(_0x5044a4)_0x1514f7['push'](_0x5044a4);}});const _0x47df24=[...new Set(_0x1514f7)]['sort']();return _0x47df24;}function _0x23e1(){const _0x5acb04=['exec','params','lastmsgtelegram','/:bot/support','getDate','SIGTERM','toggleBotMode','Server','All','-performance.json','telegramEnabled','reinstall-bb','logout','kill','resetHistory','generateKeyPairAsync','Ok,\x20will\x20send\x20order\x20notifications\x20only','function','post','date-fns','login\x20required','debug','format','config/','ipc','show-config','sendPortfolioTelegram','Idling\x20bot\x20\x20\x20|\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','disabled','zip/','clientip','remoteAddress','match','privateKey','Yes','mkdirSync','hasOwnProperty','Enabled\x20Bot\x20','bb-settings.json','express','socket','915572mfEmBr','Unauthorized\x20attempt\x20to\x20get\x20portfolio','cancelLoading','bbvReceive','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','apiSecret','<b>Telegram\x20Bot\x20Status:</b>\x0a','https://api.ipify.org?format=json','success','bbUsername','onepagemode','-config.json','notification','sha256','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','toIPv4Address','argv','-results.json','settings','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','constructor','Unauthorized\x20attempt\x20to\x20add\x20bot','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','Unauthorized\x20attempt\x20to\x20show\x20configuration','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Notifications\x20disabled\x0a','whitelist','Failed\x20to\x20download\x20','2FA\x20login\x20token\x20generated','latestversion','Bot\x20','all','1000','Invalid\x20username\x20or\x20IP\x20address','apiKey','randomFillSync','<b>Balance\x20Bot\x20Status:</b>\x0a','forEach','update-bb','Error\x20while\x20deleting\x20config\x20files:\x20','store-configuration','compareSync','bb-secure.json','*$1*','All\x20bots','getSeconds','temporary\x20access\x20not\x20allowed','get-backup-files','telegramEvents','store','botname','simple','host','telegramIpApproval','/enable\x20-\x20enable\x20notifications\x0a','storeConfiguration','files','\x20(1)','push','username','build','node-telegram-bot-api','join','backup-files','::1','Disabled\x20Bot\x20','event','backup-full','Restore\x20process\x20aborted','expiry','split','alias','bcryptjs','build2','yes','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','handshake','Allow\x20login\x20from\x20IP\x20address\x20<b>','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','blacklist','toIPv4MappedAddress','kind','track','get-logs','/:bot/portfolio','***','error','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','download','Invalid\x20authentication\x20token\x20(2)','telegram2FaApproval','connected','store-headless','accept','Unauthorized\x20attempt\x20to\x20log\x20out','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','get-messages','startsWith','then','Error:\x20Invalid\x20argument\x20','remove','toggle-bot-mode','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','temp/','live','started','set','2FA\x20login\x20rejected','mtime','RSA-OAEP','Unauthorized\x20attempt\x20to\x20download\x20','status','-----------------------------------------------------------------------------------','32444xhPlti','/off\x20-\x20stop\x20bot(s)\x0a','conn','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','crypto','message','2FA\x20required','5\x20min','size','showConfig','/upload-backup','Unauthorized\x20attempt\x20to\x20delete\x20bot','headless','3333411oiMaEd','telegramToken','disconnect','verify','login\x20not\x20required','-events.json','exchange','show','Password\x20has\x20been\x20reset\x20to:\x20','_data','/:bot/configuration','getTime','Unauthorized\x20attempt\x20to\x20delete\x20alerts','new-disabled','padStart','place-order','8iTtUna','login\x20token\x20generated','readdirSync','sendMessage','Access\x20enabled\x20for\x20','endsWith','add-bot','invalid\x20credentials','timestamp','botmanager','writeFileSync','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','test','filter','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','uuid','find','placeOrder','\x20|\x20','alerts','restart','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','getMonth','Orders','Login\x20accepted','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Invalid\x20Telegram\x20token','Password\x20reset\x20rejected','404\x20Not\x20Found','Markdown','allow','Setting\x20access:\x20','any','stopPolling','/:bot/coins','from','sendMetricsTelegram','rmSync','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Deleted\x20Bot\x20','createWriteStream','port','/:bot/history','2FA\x20login\x20required','send','\x20>\x20','axios','backupfile','output-002.log','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','access\x20timeout','version.json','onText','hashSync','inherit','pidExpireLogin','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','/update\x20-\x20update\x20Balance\x20Bot\x0a','Notifications\x20disabled','f2aRequired','temporary\x20access\x20timeout','login','bbPassword','removeListener','bot.js','temporary\x20token\x20generated','parse','Starting\x20bot\x20|\x20Bot\x20','Starting\x20new\x20bot\x20|\x20Bot\x20','lowdb','HTML','api-eu.mixpanel.com','deleteHistoryAlerts','1531776NfwGwg','\x20to\x20','copyFileSync','password','botID','Invalid\x20authentication\x20token\x20(1)','entries','temporary\x20access\x20rejected','Unauthorized\x20attempt\x20to\x20get\x20messages','encryptedUuid','cloneDeep','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','defaults','new','reject','No\x20bots\x20running\x20right\x20now','initclient','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','access','get','referer','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','index.html','headers','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','update-bot','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Starting\x20Balance\x20Bot\x20','chat','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','emit','820vSgbeN','stopped','secure','getMinutes','bots','Logged\x20out\x20user\x20...','getFullYear','output-001.log','includes','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','isDirectory','logged\x20out','auto','manual','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','toString','Unauthorized\x20login\x20attempt\x20(timeout)','data','/metrics\x20-\x20show\x20bot\x20performance\x0a','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','search','enabled','/:bot','polling_error','updatebotmanager','reset-history','Backup\x20file\x20unzipped\x20and\x20stored','lastmsgemitted','publicKey','value','binary','answerCallbackQuery','once','mode','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','messages','sortBy','15\x20min','createServer','Alerts','exit','/help\x20-\x20show\x20available\x20commands\x0a','getHours','.zip','child_process',':\x20Bot\x20Mgr\x20>\x20','apply','Restoring\x20bot(s)\x20from\x20backup','util','length','cancel-loading','logs','Bot\x20Mgr\x20>\x20','reason','Temporary\x20access\x20rejected','/on\x20-\x20start\x20bot(s)\x0a','init','version','number','/status\x20-\x20show\x20bot(s)\x20status\x0a','connection','</b>\x20?','tkn','jsonwebtoken','hybrid-crypto-js','Starting\x20Balance\x20Bot\x20update','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','File\x20uploaded','statSync','use','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','running','ipaddr.js','Notifications\x20types:\x20','timeshift','readFileSync','auth','stringify','::ffff:127.0.0.1','/disable\x20-\x20disable\x20notifications\x0a','graphql-request','sort','telegramUsername','************','decrypt','slice','name','Unauthorized\x20attempt\x20to\x20confirm\x20message','3000','assign','getStartingBalances','exp','Restarting\x20Bot\x20','bot','30\x20min','write','request','showname','737140iuVfLJ','confirm-message','min','login\x20token\x20valid','emitHistory',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Unauthorized\x20attempt\x20to\x20get\x20events','pidRefreshToken','userid','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','express-fileupload','delete-alerts','\x20mode','type','add','\x20minutes','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','bbvNew','\x20|\x20user:\x20...','catch','bb/','sockets','removeAllListeners','reload','/download/:type','unlinkSync','bot-','generate','server','User\x20has\x20been\x20validated','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','loginRequired','restore-backup-file','sendFile','mixpanel','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','secret','stop','temporaryAccessAllowed','/names\x20-\x20show\x20bot\x20names\x0a','existsSync','SIGINT','whitelistEnabled','DEFLATE','backup','replace','\x20(2)','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','uncaughtException','reinstall','storeFiat','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','backup-full@','output-000.log','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Token\x20blacklisted','token','Invalid\x20IP\x20address','http','telegrammsg','telegram','store-fiat','full','2FA','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','delete-bot','map','61540PFBrom','update','log','orders','Unauthorized\x20attempt\x20to\x20update\x20bot','$1_$2_$3','telegramChatId','node-zip','callback_query','1284fnPQMD','All\x20bots\x20running\x20right\x20now'];_0x23e1=function(){return _0x5acb04;};return _0x23e1();}async function initUser(){const _0x57a277=_0x35474e;if(!settings['userid']){const _0x539efe=uuidRandom();mixpanel[_0x57a277(0x245)](_0x539efe),updateSetting(_0x57a277(0x35f),_0x539efe);}}async function initSecure(){const _0x387199=_0x35474e;let _0x411026=getSecure();if(!_0x411026[_0x387199(0x1f8)]('secret')){let _0x33b4c2=await generateKeys();_0x411026[_0x387199(0x311)]=_0x33b4c2[_0x387199(0x311)],_0x411026[_0x387199(0x1f5)]=_0x33b4c2[_0x387199(0x1f5)],_0x411026[_0x387199(0x1a9)]=crypto['randomBytes'](0x20)[_0x387199(0x304)]('hex');;storeSecure(_0x411026);}}function getSettings(){const _0x4d2271=_0x35474e;return dbSettings['get'](_0x4d2271(0x20f))[_0x4d2271(0x312)]()||{};}function getSecure(){const _0x9256fc=_0x35474e;return dbSecure[_0x9256fc(0x2e8)]('secure')[_0x9256fc(0x312)]()||{};}function getBlacklist(){const _0x2a2d45=_0x35474e;return dbSecure['get'](_0x2a2d45(0x24d))[_0x2a2d45(0x312)]()||[];}function broadcastToBots(_0x21a00b,_0x150232){const _0x4b4883=_0x35474e;config[_0x4b4883(0x223)](_0x6d19a7=>{const _0x3c7a56=_0x4b4883;if(_0x6d19a7[_0x3c7a56(0x26d)]==_0x3c7a56(0x30a)&&_0x6d19a7[_0x3c7a56(0x266)]==_0x3c7a56(0x33c)||_0x6d19a7[_0x3c7a56(0x26d)]==_0x3c7a56(0x2e2)&&_0x6d19a7[_0x3c7a56(0x266)]==_0x3c7a56(0x33c)){if(pid[_0x6d19a7[_0x3c7a56(0x2d9)]])pid[_0x6d19a7[_0x3c7a56(0x2d9)]]['send']({[_0x21a00b]:_0x150232});}});}function storeSettings(_0x21cb31,_0x3d933a=![]){const _0x39ba4a=_0x35474e;_0x21cb31={...settings,..._0x21cb31};if(_0x3d933a&&_0x21cb31['bbPassword']!='************'&&_0x21cb31[_0x39ba4a(0x2ca)]!=_0x39ba4a(0x253)&&_0x21cb31[_0x39ba4a(0x2ca)]!=''){const _0x3b554b=crypt[_0x39ba4a(0x349)](secure['privateKey'],_0x21cb31['bbPassword'])['message'][_0x39ba4a(0x244)]('@')[0x0],_0xbb9108=bcrypt['hashSync'](_0x3b554b,saltRounds);_0x21cb31={..._0x21cb31,'bbPassword':_0xbb9108};}if(_0x3d933a&&_0x21cb31[_0x39ba4a(0x27d)]!=_0x39ba4a(0x348)&&_0x21cb31[_0x39ba4a(0x27d)]!=_0x39ba4a(0x253)&&_0x21cb31[_0x39ba4a(0x27d)]!=''){const _0x5ccee7=crypt[_0x39ba4a(0x349)](secure[_0x39ba4a(0x1f5)],_0x21cb31['telegramToken'])[_0x39ba4a(0x274)]['split']('@')[0x0];_0x21cb31={..._0x21cb31,'telegramToken':_0x5ccee7};}const _0x4b6c4e=_0x21cb31[_0x39ba4a(0x27d)]!=_0x39ba4a(0x348)&&_0x21cb31[_0x39ba4a(0x27d)]!=settings[_0x39ba4a(0x27d)]||_0x21cb31[_0x39ba4a(0x347)]!=settings[_0x39ba4a(0x347)],_0x340941=_0x21cb31['telegramToken']==''||_0x21cb31[_0x39ba4a(0x347)]=='';if(_0x4b6c4e)_0x21cb31[_0x39ba4a(0x22e)]=_0x39ba4a(0x21d);for(const [_0x32c6c7,_0x1061f7]of Object[_0x39ba4a(0x2db)](_0x21cb31)){if(_0x32c6c7==_0x39ba4a(0x27d)&&_0x1061f7==_0x39ba4a(0x348)){_0x21cb31[_0x39ba4a(0x27d)]=settings[_0x39ba4a(0x27d)];continue;};if(_0x32c6c7==_0x39ba4a(0x2ca)&&_0x1061f7=='************'){_0x21cb31[_0x39ba4a(0x2ca)]=settings[_0x39ba4a(0x2ca)];continue;};dbSettings['set']('settings.'+_0x32c6c7,_0x1061f7)[_0x39ba4a(0x354)]();}settings=_0x21cb31,io['to'](_0x39ba4a(0x295))['emit'](_0x39ba4a(0x20f),cleanSettings()),broadcastToBots(_0x39ba4a(0x33f),settings[_0x39ba4a(0x33f)]),broadcastToBots('onepagemode',settings['onepagemode']);if(_0x4b6c4e&&!_0x340941)initTelegram();if(_0x4b6c4e&&_0x340941)disableTelegram();getAllClients()[_0x39ba4a(0x223)](_0x5e1bf5=>{const _0x2e5c06=_0x39ba4a;getSocket(_0x5e1bf5['id'])[_0x2e5c06(0x2f4)](_0x2e5c06(0x26d),{'access':{'allow':![],'reason':_0x2e5c06(0x19c),'token':null}});});}function updateSetting(_0xaa88d3,_0x48274a){const _0x26f82d=_0x35474e;dbSettings[_0x26f82d(0x268)]('settings.'+_0xaa88d3,_0x48274a)['write'](),settings=getSettings(),io['to']('botmanager')[_0x26f82d(0x2f4)](_0x26f82d(0x20f),cleanSettings());}function storeSecure(_0x2f405e){const _0x305a13=_0x35474e;dbSecure[_0x305a13(0x2e8)](_0x305a13(0x2f7))[_0x305a13(0x238)](_0x2f405e)[_0x305a13(0x354)](),secure=_0x2f405e;}function addBlacklist(_0x2f19c5){const _0x1a01ce=_0x35474e;cleanBlacklist();let _0x49e35f;devices[_0x2f19c5][_0x1a01ce(0x233)]?_0x49e35f=Math['max'](devices[_0x2f19c5][_0x1a01ce(0x233)][_0x1a01ce(0x243)],loginExpiry):_0x49e35f=loginExpiry,dbSecure[_0x1a01ce(0x2e8)]('blacklist')['push']({'expiry':new Date()[_0x1a01ce(0x287)]()+_0x49e35f*0x3c*0x3e8,'token':devices[_0x2f19c5][_0x1a01ce(0x2e7)]['token']})[_0x1a01ce(0x354)](),blacklist=dbSecure[_0x1a01ce(0x2e8)](_0x1a01ce(0x24d))[_0x1a01ce(0x312)]();}function cleanBlacklist(){const _0x27140c=_0x35474e;let _0x5a4bc0=dbSecure['get'](_0x27140c(0x24d))[_0x27140c(0x2df)]()['value'](),_0x2f718c=new Date()[_0x27140c(0x287)]();_0x5a4bc0[_0x27140c(0x223)](_0x3c8ee3=>{const _0x64443d=_0x27140c;_0x3c8ee3[_0x64443d(0x243)]<_0x2f718c&&dbSecure[_0x64443d(0x2e8)](_0x64443d(0x24d))[_0x64443d(0x262)]({'expiry':_0x3c8ee3[_0x64443d(0x243)]})[_0x64443d(0x354)]();});}function initStates(){let _0x4682c9=getConfiguration();_0x4682c9['forEach'](_0x55bd0a=>{const _0x3a3022=_0xf8eb;_0x55bd0a[_0x3a3022(0x266)]=_0x3a3022(0x2f6);}),storeConfiguration(_0x4682c9);}function onKeys(){const _0x3e4b50=new RSA();return new Promise(_0x23e583=>{const _0x375bfb=_0xf8eb;_0x3e4b50[_0x375bfb(0x1e2)]()['then'](_0x5039de=>{_0x23e583(_0x5039de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1b303a=_0x35474e;let _0x375e53=getSettings(),_0x3bc117=![];!_0x375e53[_0x1b303a(0x1f8)](_0x1b303a(0x1d5))&&(_0x375e53[_0x1b303a(0x1d5)]=0x0,_0x3bc117=!![]);!_0x375e53['hasOwnProperty'](_0x1b303a(0x310))&&(_0x375e53[_0x1b303a(0x310)]=0x0,_0x3bc117=!![]);!_0x375e53[_0x1b303a(0x1f8)](_0x1b303a(0x21b))&&(_0x375e53[_0x1b303a(0x21b)]='0.0.0',_0x3bc117=!![]);!_0x375e53[_0x1b303a(0x1f8)](_0x1b303a(0x207))&&(_0x375e53[_0x1b303a(0x207)]=![],_0x3bc117=!![]);if(_0x3bc117)storeSettings(_0x375e53);}function storeConfiguration(_0x4b5353){const _0x4c9ef0=_0x35474e;dbConfig[_0x4c9ef0(0x2e8)](_0x4c9ef0(0x2f9))[_0x4c9ef0(0x262)]()[_0x4c9ef0(0x354)](),_0x4b5353[_0x4c9ef0(0x223)](_0xf0aa1e=>{const _0x27f2d6=_0x4c9ef0;delete _0xf0aa1e[_0x27f2d6(0x316)];}),dbConfig[_0x4c9ef0(0x2e8)]('bots')['push'](..._0x4b5353)['write'](),config=_0x4b5353;}function resetPassword(){const _0x2296e6=_0x35474e;tgBot&&settings[_0x2296e6(0x1ce)]&&(tgBot['removeListener'](_0x2296e6(0x1d0)),tgBot[_0x2296e6(0x28f)](settings['telegramChatId'],_0x2296e6(0x29a),{'parse_mode':_0x2296e6(0x2d2),'reply_markup':{'inline_keyboard':[[{'text':_0x2296e6(0x248),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x2296e6(0x36a)](_0xd3d161=>{telegramError(_0xd3d161);}),tgBot['on']('callback_query',async _0x58b497=>{const _0x59d51c=_0x2296e6,_0x15a599=_0x58b497[_0x59d51c(0x306)],_0x15e960=_0x58b497[_0x59d51c(0x274)];tgBot[_0x59d51c(0x314)](_0x58b497['id'])[_0x59d51c(0x260)](async()=>{const _0x325efe=_0x59d51c;if(_0x15a599!='no'){const _0x1d2fa8=0xf,_0xdf4490=_0x325efe(0x2c4),_0x393617=Array['from'](crypto[_0x325efe(0x221)](new Uint32Array(_0x1d2fa8)))[_0x325efe(0x1c7)](_0x30077a=>_0xdf4490[_0x30077a%_0xdf4490[_0x325efe(0x326)]])[_0x325efe(0x23c)](''),_0x579b22=bcrypt[_0x325efe(0x2c1)](_0x393617,saltRounds);storeSettings({'bbPassword':_0x579b22}),await tgBot[_0x325efe(0x28f)](_0x15e960[_0x325efe(0x2f2)]['id'],_0x325efe(0x284)+_0x393617,{'parse_mode':_0x325efe(0x2d2)})[_0x325efe(0x36a)](_0x23a713=>{telegramError(_0x23a713);});}else await tgBot['sendMessage'](_0x15e960[_0x325efe(0x2f2)]['id'],_0x325efe(0x2a7))[_0x325efe(0x36a)](_0x14c4fc=>{telegramError(_0x14c4fc);});}),tgBot[_0x59d51c(0x2cb)](_0x59d51c(0x1d0));}));}async function confirmRestore(_0x1e51da,_0x3223dd){const _0x42b3d4=_0x35474e;io['to']('botmanager')['emit']('notification',_0x42b3d4(0x255),_0x42b3d4(0x205)),tgBot&&settings[_0x42b3d4(0x1ce)]&&(tgBot[_0x42b3d4(0x2cb)]('callback_query'),await tgBot[_0x42b3d4(0x28f)](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x42b3d4(0x2d2),'reply_markup':{'inline_keyboard':[[{'text':_0x42b3d4(0x248),'callback_data':_0x42b3d4(0x248)},{'text':'no','callback_data':'no'}]]}})[_0x42b3d4(0x36a)](_0x15e924=>{telegramError(_0x15e924);}),tgBot['on']('callback_query',async _0x3cde5b=>{const _0x472e5b=_0x42b3d4,_0x2af63f=_0x3cde5b[_0x472e5b(0x306)],_0x49c4ca=_0x3cde5b['message'];tgBot['answerCallbackQuery'](_0x3cde5b['id'])[_0x472e5b(0x260)](async()=>{const _0x5ddc0b=_0x472e5b;_0x2af63f==_0x5ddc0b(0x248)?(await tgBot[_0x5ddc0b(0x28f)](_0x49c4ca['chat']['id'],_0x5ddc0b(0x324),{'parse_mode':_0x5ddc0b(0x2d2)})['catch'](_0x266d40=>{telegramError(_0x266d40);}),unzipFile(_0x1e51da,_0x3223dd)):(logger[_0x5ddc0b(0x1e8)](_0x5ddc0b(0x242)),await tgBot['sendMessage'](_0x49c4ca['chat']['id'],_0x5ddc0b(0x242))[_0x5ddc0b(0x36a)](_0x2ae01b=>{telegramError(_0x2ae01b);}));}),tgBot[_0x472e5b(0x2cb)](_0x472e5b(0x1d0));}));}function getServerTime(){const _0x4ad006=_0x35474e,_0x3e3a56=new Date();return _0x3e3a56[_0x4ad006(0x2fb)]()+'/'+(_0x3e3a56[_0x4ad006(0x2a2)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x3e3a56[_0x4ad006(0x1d7)]()[_0x4ad006(0x304)]()['padStart'](0x2,'0')+'\x20'+_0x3e3a56[_0x4ad006(0x31f)]()[_0x4ad006(0x304)]()[_0x4ad006(0x28a)](0x2,'0')+':'+_0x3e3a56[_0x4ad006(0x2f8)]()[_0x4ad006(0x304)]()[_0x4ad006(0x28a)](0x2,'0')+':'+_0x3e3a56[_0x4ad006(0x22b)]()['toString']()[_0x4ad006(0x28a)](0x2,'0');}function getTimeStamp(){const _0x5c45a2=_0x35474e,_0x561407=shiftedTime();return _0x561407[_0x5c45a2(0x2fb)]()+'/'+(_0x561407[_0x5c45a2(0x2a2)]()+0x1)['toString']()[_0x5c45a2(0x28a)](0x2,'0')+'/'+_0x561407[_0x5c45a2(0x1d7)]()[_0x5c45a2(0x304)]()[_0x5c45a2(0x28a)](0x2,'0')+'\x20'+_0x561407['getHours']()[_0x5c45a2(0x304)]()['padStart'](0x2,'0')+':'+_0x561407['getMinutes']()[_0x5c45a2(0x304)]()['padStart'](0x2,'0')+':'+_0x561407[_0x5c45a2(0x22b)]()['toString']()[_0x5c45a2(0x28a)](0x2,'0');}function getCleanTimeStamp(){const _0x3fad63=_0x35474e,_0x1d5973=shiftedTime();return _0x1d5973['getFullYear']()+(_0x1d5973[_0x3fad63(0x2a2)]()+0x1)['toString']()[_0x3fad63(0x28a)](0x2,'0')+_0x1d5973[_0x3fad63(0x1d7)]()[_0x3fad63(0x304)]()[_0x3fad63(0x28a)](0x2,'0')+'-'+_0x1d5973[_0x3fad63(0x31f)]()[_0x3fad63(0x304)]()[_0x3fad63(0x28a)](0x2,'0')+_0x1d5973[_0x3fad63(0x2f8)]()[_0x3fad63(0x304)]()[_0x3fad63(0x28a)](0x2,'0')+_0x1d5973[_0x3fad63(0x22b)]()['toString']()[_0x3fad63(0x28a)](0x2,'0');}function shiftedTime(){const _0x24ca35=_0x35474e,_0x3469e7=new Date();let _0x39d25b=_0x3469e7;if(settings[_0x24ca35(0x33f)]&&settings[_0x24ca35(0x33f)]!==0x0)_0x39d25b=fns[_0x24ca35(0x365)](_0x3469e7,{'hours':settings['timeshift']});return _0x39d25b;}function startScheduler(){const _0x176f0f=_0x35474e,_0x5ab0ab=new Date()['getUTCHours'](),_0xb04fb2=shiftedTime()[_0x176f0f(0x31f)]();_0xb04fb2==0x4&&backupConfigFiles();_0xb04fb2==0x0&&rotateLogFiles();_0x5ab0ab%0x6==0x0&&triggerAnalytics();_0x5ab0ab%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x529605){const _0x45f97d=_0x35474e;logger['debug']('Restore\x20backup\x20file\x20'+_0x529605);const _0x3c0f85=getBotsWithMode();_0x3c0f85[_0x45f97d(0x326)]>0x0?confirmRestore(configbackuppath,_0x529605):unzipFile(configbackuppath,_0x529605);}async function getBackupFiles(_0x305bc8=null){const _0x133ae9=_0x35474e;let _0x1c46eb=[],_0x39b534=fs[_0x133ae9(0x28e)](configbackuppath,{'withFileTypes':!![]});_0x39b534[_0x133ae9(0x346)]((_0x22b40f,_0x51cdc5)=>_0x22b40f['name']<_0x51cdc5['name']?0x1:_0x51cdc5[_0x133ae9(0x34b)]<_0x22b40f[_0x133ae9(0x34b)]?-0x1:0x0),_0x39b534[_0x133ae9(0x223)](_0x5d0440=>{const _0x5e5aae=_0x133ae9;if(!_0x5d0440[_0x5e5aae(0x2ff)]()&&_0x5d0440[_0x5e5aae(0x34b)][_0x5e5aae(0x25f)](_0x5e5aae(0x1b9))&&_0x5d0440[_0x5e5aae(0x34b)][_0x5e5aae(0x291)]('.zip')){const _0xb5684e=formatDate(fs['statSync'](configbackuppath+_0x5d0440['name'])[_0x5e5aae(0x26a)]);_0x1c46eb['push']({'name':_0x5d0440[_0x5e5aae(0x34b)],'mtime':_0xb5684e});}});if(_0x305bc8)io['to'](_0x305bc8)[_0x133ae9(0x2f4)](_0x133ae9(0x23d),_0x1c46eb);else return _0x1c46eb;}async function backupConfigFiles(){const _0x57f5ba=_0x35474e;await zipFiles(_0x57f5ba(0x241));const _0x3d5480=getCleanTimeStamp();fs['copyFileSync'](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0x3d5480+_0x57f5ba(0x320)));let _0x3496ba=fs[_0x57f5ba(0x28e)](configbackuppath,{'withFileTypes':!![]});_0x3496ba[_0x57f5ba(0x346)]((_0x520f1b,_0x4d29f8)=>_0x520f1b['name']<_0x4d29f8[_0x57f5ba(0x34b)]?0x1:_0x4d29f8['name']<_0x520f1b[_0x57f5ba(0x34b)]?-0x1:0x0),_0x3496ba[_0x57f5ba(0x326)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3496ba[maxBackups]['name']);}function rotateLogFiles(){const _0x222f12=_0x35474e,_0x2cba91=fs[_0x222f12(0x339)](logspath+'output-000.log'),_0x430520=_0x2cba91[_0x222f12(0x277)]/0x400;if(_0x430520>0x64){let _0x40ad64=fs[_0x222f12(0x28e)](logspath,{'withFileTypes':!![]});_0x40ad64[_0x222f12(0x346)]((_0x146b53,_0x14022b)=>_0x146b53[_0x222f12(0x34b)]<_0x14022b[_0x222f12(0x34b)]?0x1:_0x14022b['name']<_0x146b53[_0x222f12(0x34b)]?-0x1:0x0),_0x40ad64[_0x222f12(0x223)](_0x309072=>{const _0x409da1=_0x222f12;if(_0x309072[_0x409da1(0x34b)]==_0x409da1(0x2bc))fs['copyFileSync'](logspath+_0x309072[_0x409da1(0x34b)],logspath+'output-003.log');if(_0x309072['name']==_0x409da1(0x2fc))fs[_0x409da1(0x2d7)](logspath+_0x309072[_0x409da1(0x34b)],logspath+_0x409da1(0x2bc));_0x309072[_0x409da1(0x34b)]==_0x409da1(0x1ba)&&(fs['copyFileSync'](logspath+_0x309072['name'],logspath+_0x409da1(0x2fc)),fs[_0x409da1(0x296)](logspath+_0x309072[_0x409da1(0x34b)],''));});}}async function zipFiles(_0x17c30e){const _0x260ccf=_0x35474e;let _0x21f437;if(_0x17c30e==_0x260ccf(0x328))_0x21f437=logspath;if(_0x17c30e==_0x260ccf(0x1b1))_0x21f437=configpath;if(_0x17c30e==_0x260ccf(0x241))_0x21f437=configpath;let _0x8b172d=fs[_0x260ccf(0x28e)](_0x21f437,{'withFileTypes':!![]});const _0x7bc617=new require(_0x260ccf(0x1cf))();_0x8b172d[_0x260ccf(0x223)](_0x49ee64=>{const _0x35938a=_0x260ccf;if(!_0x49ee64[_0x35938a(0x2ff)]()){let _0x595beb=fs[_0x35938a(0x340)](_0x21f437+_0x49ee64[_0x35938a(0x34b)]);if(_0x17c30e==_0x35938a(0x1b1)){const _0x2e4946=/^bot-[0-9]{3}-config.json$/,_0x591f31=_0x2e4946[_0x35938a(0x298)](_0x49ee64[_0x35938a(0x34b)]);if(_0x591f31){const _0xe17ef9=JSON[_0x35938a(0x2ce)](_0x595beb);_0xe17ef9[_0x35938a(0x352)][0x0]&&(_0xe17ef9[_0x35938a(0x352)][0x0][_0x35938a(0x220)]='***',_0xe17ef9[_0x35938a(0x352)][0x0][_0x35938a(0x202)]=_0x35938a(0x253)),_0x595beb=JSON[_0x35938a(0x342)](_0xe17ef9,null,0x2);}if(_0x49ee64['name']=='bb-settings.json'){const _0x4a58d1=JSON[_0x35938a(0x2ce)](_0x595beb);if(_0x4a58d1[_0x35938a(0x20f)]['loginRequired'])_0x4a58d1[_0x35938a(0x20f)][_0x35938a(0x1a4)]=![];if(_0x4a58d1['settings']['bbPassword'])_0x4a58d1[_0x35938a(0x20f)][_0x35938a(0x2ca)]=_0x35938a(0x253);if(_0x4a58d1[_0x35938a(0x20f)][_0x35938a(0x27d)])_0x4a58d1['settings'][_0x35938a(0x27d)]=_0x35938a(0x253);if(_0x4a58d1[_0x35938a(0x20f)][_0x35938a(0x1ce)])_0x4a58d1[_0x35938a(0x20f)]['telegramChatId']=null;_0x595beb=JSON['stringify'](_0x4a58d1,null,0x2);}if(_0x49ee64[_0x35938a(0x34b)]!=_0x35938a(0x228))_0x7bc617['file'](_0x49ee64[_0x35938a(0x34b)],_0x595beb);}else _0x7bc617['file'](_0x49ee64['name'],_0x595beb);}});const _0x4aef4b=_0x7bc617[_0x260ccf(0x1a0)]({'base64':![],'compression':_0x260ccf(0x1b0)});fs['writeFileSync'](zippath+(_0x17c30e+_0x260ccf(0x320)),_0x4aef4b,_0x260ccf(0x313));}async function unzipFile(_0x23d783,_0x54577d){const _0x150e74=_0x35474e;fs[_0x150e74(0x28e)](configpath,{'withFileTypes':!![]})[_0x150e74(0x223)](_0x292de5=>{const _0x4eabd0=_0x150e74;if(!_0x292de5[_0x4eabd0(0x2ff)]())fs[_0x4eabd0(0x2b1)](configpath+_0x292de5[_0x4eabd0(0x34b)]);});const _0x40016e=fs[_0x150e74(0x340)](_0x23d783+_0x54577d,_0x150e74(0x313)),_0xb44118=new require(_0x150e74(0x1cf))(_0x40016e,{'base64':![],'checkCRC32':!![]});Object['keys'](_0xb44118['files'])[_0x150e74(0x223)](_0x1f44de=>{const _0x4bed09=_0x150e74,_0x2f2e51=_0xb44118[_0x4bed09(0x236)][_0x1f44de];fs[_0x4bed09(0x296)](configpath+_0x2f2e51[_0x4bed09(0x34b)],_0x2f2e51[_0x4bed09(0x285)]);}),fs[_0x150e74(0x28e)](temppath,{'withFileTypes':!![]})[_0x150e74(0x223)](_0x1fa283=>{const _0x5e8d62=_0x150e74;if(!_0x1fa283[_0x5e8d62(0x2ff)]())fs['rmSync'](temppath+_0x1fa283[_0x5e8d62(0x34b)]);}),logger[_0x150e74(0x1e8)](_0x150e74(0x30f)),process[_0x150e74(0x2b8)]({'restore':!![]},_0x4b8653=>{});}async function getPublicIp(){const _0xbf1ca5=_0x35474e;try{const _0x4f1c36=await axios[_0xbf1ca5(0x2e8)](_0xbf1ca5(0x204));publicip=_0x4f1c36[_0xbf1ca5(0x306)]['ip'];}catch(_0x3eaf22){}}async function triggerAnalytics(){const _0x40ef78=_0x35474e;if(!publicip)await getPublicIp();const _0xb0b8e5=getBotsWithMode();let _0x15dd70=0x0;_0xb0b8e5[_0x40ef78(0x223)](_0xb06760=>{const _0x5956dc=_0x40ef78;if(_0xb06760[_0x5956dc(0x26d)]===_0x5956dc(0x30a))_0x15dd70++;});const _0x118c88=getBotExchanges();mixpanel[_0x40ef78(0x250)](_0x40ef78(0x1da),{'distinct_id':settings[_0x40ef78(0x35f)],'ip':publicip,'version':serverversion,'numbots':_0xb0b8e5[_0x40ef78(0x326)],'numbotsenabled':_0x15dd70,'exchanges':_0x118c88});}async function getMessages(){const _0x2383a8=_0x35474e,_0x5e1422=_0x2383a8(0x201),_0x75f9=new GraphQLClient(_0x5e1422),_0x2d663e={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x1f4761=serverversion['split']('.'),_0x3f8226=_0x1f4761[0x0]+'.'+_0x1f4761[0x1],_0x213f9d=Math[_0x2383a8(0x359)](settings[_0x2383a8(0x1d5)],settings['lastmsgemitted']),_0x488a68={'last':parseInt(_0x213f9d),'bbm':_0x3f8226},_0x107483=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x43eeff;try{_0x43eeff=await _0x75f9[_0x2383a8(0x355)](_0x107483,_0x488a68,_0x2d663e);}catch(_0x1f47c6){}if(_0x43eeff&&_0x43eeff[_0x2383a8(0x318)]){let _0x2c1ea3=settings[_0x2383a8(0x1d5)];newMessages=[];for(const _0x2bfd6e of _0x43eeff['messages']){newMessages[_0x2383a8(0x238)](_0x2bfd6e);if(_0x2bfd6e[_0x2383a8(0x368)])updateSetting(_0x2383a8(0x21b),_0x2bfd6e[_0x2383a8(0x368)]);let _0xd9f4da=_0x2bfd6e['bbvNew']?serverversion>=_0x2bfd6e['bbvNew']:![];if(!_0xd9f4da&&_0x2bfd6e[_0x2383a8(0x32f)]>_0x2c1ea3){if(_0x2bfd6e['bbvReceive']===_0x2383a8(0x2ac)||serverversion[_0x2383a8(0x25f)](_0x2bfd6e[_0x2383a8(0x200)])){let _0x462d4c=''+_0x2bfd6e['title']+'\x0a\x0a'+_0x2bfd6e['message'];const _0x113a17=await sendTelegramMsg(toTelegramMarkdown(_0x462d4c),_0x2383a8(0x2a9));if(_0x113a17)_0x2c1ea3=_0x2bfd6e[_0x2383a8(0x32f)];}}}updateAvailable=isNewerVersion(settings[_0x2383a8(0x21b)],serverversion),updateSetting(_0x2383a8(0x1d5),_0x2c1ea3),emitMessages();}}function emitMessages(){const _0xcf20af=_0x35474e,_0x455426=settings['lastmsgemitted'];let _0x1fc09e=[];newMessages[_0xcf20af(0x223)](_0x50b602=>{const _0xf07f0e=_0xcf20af;_0x50b602[_0xf07f0e(0x32f)]>_0x455426&&_0x1fc09e['push'](_0x50b602);}),_0x1fc09e['length']>0x0&&getAllClients()[_0xcf20af(0x223)](_0xcf1078=>{const _0x42ea4f=_0xcf20af;getSocket(_0xcf1078['id'])[_0x42ea4f(0x2f4)](_0x42ea4f(0x274),_0x1fc09e);});}function confirmMessage(_0x3d3f8e){updateSetting('lastmsgemitted',Number(_0x3d3f8e));}function isNewerVersion(_0x507dac,_0x1d1780){const _0x2a686f=_0x35474e,_0xfba7de=_0x1d1780[_0x2a686f(0x244)]('.'),_0x242ae7=_0x507dac[_0x2a686f(0x244)]('.');for(var _0x3ce792=0x0;_0x3ce792<_0x242ae7[_0x2a686f(0x326)];_0x3ce792++){const _0x422615=~~_0x242ae7[_0x3ce792],_0x11ee06=~~_0xfba7de[_0x3ce792];if(_0x422615>_0x11ee06)return!![];if(_0x422615<_0x11ee06)return![];}return![];}function toTelegramMarkdown(_0x2ebac6){const _0x3c1eaf=_0x35474e,_0x3166fb=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x484d34=/\*{2}(.+?)\*{2}/gim;return _0x2ebac6=_0x2ebac6[_0x3c1eaf(0x1b2)](_0x3166fb,_0x3c1eaf(0x1cd))['replace'](_0x484d34,_0x3c1eaf(0x229)),_0x2ebac6;}async function validateConfigFile(){const _0x57b477=_0x35474e,_0x5010d8=dbConfig[_0x57b477(0x2e8)](_0x57b477(0x2f9))[_0x57b477(0x319)](_0x57b477(0x2d9))[_0x57b477(0x312)]()||[];if(_0x5010d8[_0x57b477(0x326)]==0x0){let _0x42ac0b=0x0,_0x34c078=[];const _0x53342b=/^bot-([0-9]{3})-config.json$/,_0x3ee7a6=fs[_0x57b477(0x28e)](configpath);_0x3ee7a6['forEach'](_0x2c4bb6=>{const _0x81bbfc=_0x57b477,_0x2430be=_0x53342b[_0x81bbfc(0x1d3)](_0x2c4bb6);if(_0x2430be){const _0x1f8d3d=_0x2430be[0x1];let _0xce1a94=getBotAttributes(_0x1f8d3d);_0x34c078['push']({'botID':_0x1f8d3d,'botname':_0xce1a94['botname'],'status':_0x81bbfc(0x1f0),'live':_0x81bbfc(0x2f6)}),_0x42ac0b++;}}),_0x42ac0b!=0x0&&(dbConfig[_0x57b477(0x2e8)](_0x57b477(0x2f9))[_0x57b477(0x34e)](_0x34c078)[_0x57b477(0x354)](),config=_0x34c078,restoredConfigFile=_0x42ac0b);}}async function restoreConfigNotify(_0x5e1932){const _0x154bda=_0x35474e;let _0x2b14fe;if(restoredConfigFile==0x1)_0x2b14fe=_0x154bda(0x2f0);else _0x2b14fe=_0x154bda(0x2a5);if(_0x5e1932)io['to'](_0x154bda(0x295))[_0x154bda(0x2f4)](_0x154bda(0x209),_0x2b14fe);else{logger[_0x154bda(0x231)](_0x154bda(0x26e)),logger[_0x154bda(0x231)](_0x2b14fe),logger[_0x154bda(0x231)]('-----------------------------------------------------------------------------------'),logger['simple']('');if(tgBot&&settings[_0x154bda(0x1ce)]&&settings[_0x154bda(0x22e)]!=_0x154bda(0x1cb))tgBot['sendMessage'](settings[_0x154bda(0x1ce)],_0x154bda(0x329)+_0x2b14fe)[_0x154bda(0x36a)](_0x25d6fd=>{telegramError(_0x25d6fd);});}}function validateCredentials(_0x13bd46,_0x3dad5c){const _0x446885=_0x35474e;if(_0x13bd46[_0x446885(0x239)]==settings[_0x446885(0x206)]&&bcrypt[_0x446885(0x227)](_0x13bd46['password'],settings[_0x446885(0x2ca)])){if(settings[_0x446885(0x2c7)])return{'allow':![],'reason':_0x446885(0x2b7),'token':null};else{const _0x16d503=generateLoginToken(_0x3dad5c);return{'allow':!![],'reason':_0x446885(0x28d),'token':_0x16d503};}}else return{'allow':![],'reason':_0x446885(0x293),'token':null};}function refreshToken(_0x273702){const _0x5a33b6=_0x35474e,_0x28b4b7=generateLoginToken(_0x273702);return{'allow':!![],'reason':_0x5a33b6(0x28d),'token':_0x28b4b7};}function validateAccess(_0x3e854a,_0x558d57,_0x5a3c10){const _0xac9f7d=_0x35474e,_0x495185=_0x5a3c10?_0x5a3c10:devices[_0x558d57]['ip'];let _0x1b5b6f;const _0x593f51=_0x137b2c=>{const _0x157ab8=_0xf8eb;if(settings['loginRequired']){if(settings[_0x157ab8(0x2c7)]){if(telegram2FaApproved(_0x558d57)){const _0x534231=generateLoginToken(_0x558d57);return{'allow':!![],'reason':_0x157ab8(0x21a),'token':_0x534231};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x1b5b6f=validToken(_0x137b2c,_0x558d57),_0x1b5b6f[_0x157ab8(0x1f8)]('success')?{'allow':!![],'reason':_0x157ab8(0x35a),'token':_0x137b2c}:{'allow':![],'reason':_0x157ab8(0x1e7),'token':null};}else return{'allow':!![],'reason':_0x157ab8(0x280),'token':null};};if(settings[_0xac9f7d(0x1af)]){let _0x41161e=[...settings[_0xac9f7d(0x218)],_0xac9f7d(0x23e),_0xac9f7d(0x343),'127.0.0.1'];if(_0x41161e[_0xac9f7d(0x2fd)](_0x495185))return _0x593f51(_0x3e854a);else{_0x1b5b6f=validToken(_0x3e854a,_0x558d57);if(_0x1b5b6f[_0xac9f7d(0x1f8)](_0xac9f7d(0x205)))return _0x593f51(_0x3e854a);else{if(telegramIpApproved(_0x558d57)){const _0x1a47a2=generateToken(_0x558d57);return _0x1b5b6f=_0x593f51(_0x3e854a),_0x1b5b6f['allow']?{'allow':!![],'reason':_0xac9f7d(0x2cd),'token':_0x1a47a2}:_0x1b5b6f;}else return settings[_0xac9f7d(0x1ab)]?{'allow':![],'reason':_0xac9f7d(0x275),'token':null}:{'allow':![],'reason':_0xac9f7d(0x22c),'token':null};}}}else return _0x593f51(_0x3e854a);}function timelyDecrypt(_0x5df5e9,_0x8b9f5d=!![]){const _0x2ad832=_0x35474e;if(_0x5df5e9)try{const _0x554ff8=crypt[_0x2ad832(0x349)](secure[_0x2ad832(0x1f5)],_0x5df5e9)[_0x2ad832(0x274)],_0x961356=_0x554ff8[_0x2ad832(0x244)]('@')[0x0],_0x133546=_0x554ff8['split']('@')[0x1],_0x1c0ee0=new Date()[_0x2ad832(0x287)]();if(_0x8b9f5d){if(_0x1c0ee0-_0x133546<maxSecretAge*0x3e8)return _0x961356;else return![];}else return _0x961356;}catch(_0x48a546){return![];}else return![];}const validToken=(_0x5b1f68,_0x42a293)=>{const _0x2361fa=_0x35474e,_0x1ebb27=devices[_0x42a293]['ip'];if(!_0x5b1f68)return{'error':'No\x20authentication\x20token'};for(let _0x532b11 of blacklist){if(_0x532b11[_0x2361fa(0x1bd)]==_0x5b1f68)return{'error':_0x2361fa(0x1bc)};}let _0x4460ae;try{_0x4460ae=jwt[_0x2361fa(0x27f)](_0x5b1f68,secure['secret']+_0x42a293);}catch{return{'error':_0x2361fa(0x2da)};}if(!_0x4460ae[_0x2361fa(0x1f8)](_0x2361fa(0x1f2))&&!_0x4460ae[_0x2361fa(0x1f8)](_0x2361fa(0x239))||!_0x4460ae['hasOwnProperty'](_0x2361fa(0x350)))return{'error':_0x2361fa(0x257)};if(!_0x4460ae['hasOwnProperty']('username')&&_0x4460ae['hasOwnProperty']('clientip')){const {clientip:_0x120640}=_0x4460ae;return _0x1ebb27==_0x120640?{'success':_0x2361fa(0x1a2)}:{'error':_0x2361fa(0x1be)};}else{if(_0x4460ae[_0x2361fa(0x1f8)](_0x2361fa(0x239))&&_0x4460ae[_0x2361fa(0x1f8)]('clientip')){const {username:_0x15b4d0,clientip:_0x131604}=_0x4460ae;return settings['bbUsername']==_0x15b4d0&&_0x1ebb27==_0x131604?{'success':_0x2361fa(0x1a2)}:{'error':_0x2361fa(0x21f)};}}},generateLoginToken=_0x1b96cf=>{const _0x4471a3=_0x35474e;if(_0x1b96cf){const _0x1f6319=devices[_0x1b96cf]['ip'];return jwt['sign']({'username':settings[_0x4471a3(0x206)],'clientip':_0x1f6319},secure[_0x4471a3(0x1a9)]+_0x1b96cf,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x57e632=>{const _0x10c738=_0x35474e;if(_0x57e632){const _0x319647=devices[_0x57e632]['ip'];return jwt['sign']({'clientip':_0x319647},secure[_0x10c738(0x1a9)]+_0x57e632,{'expiresIn':devices[_0x57e632]['telegramIpApproval'][_0x10c738(0x243)]*0x3c});}else return![];},telegramIpApproved=_0x4cc3d9=>{const _0x10d14=_0x35474e;let _0x5d3f54=![];return devices[_0x4cc3d9]['telegramIpApproval']&&devices[_0x4cc3d9][_0x10d14(0x233)][_0x10d14(0x243)]!=_0x10d14(0x2e3)&&(_0x5d3f54=devices[_0x4cc3d9][_0x10d14(0x233)][_0x10d14(0x1f2)]==devices[_0x4cc3d9]['ip']&&new Date()[_0x10d14(0x287)]()-devices[_0x4cc3d9][_0x10d14(0x233)][_0x10d14(0x294)]<devices[_0x4cc3d9]['telegramIpApproval'][_0x10d14(0x243)]*0x3c*0x3e8),_0x5d3f54;},telegram2FaApproved=_0x1b1005=>{const _0x635b61=_0x35474e;let _0x10d47e=![];return devices[_0x1b1005][_0x635b61(0x258)]&&devices[_0x1b1005]['telegram2FaApproval'][_0x635b61(0x243)]!=_0x635b61(0x2e3)&&(_0x10d47e=devices[_0x1b1005]['telegram2FaApproval'][_0x635b61(0x1f2)]==devices[_0x1b1005]['ip']&&new Date()[_0x635b61(0x287)]()-devices[_0x1b1005][_0x635b61(0x258)][_0x635b61(0x294)]<devices[_0x1b1005][_0x635b61(0x258)][_0x635b61(0x243)]*0x3c*0x3e8),_0x10d47e;},normalizeIP=_0x4baf3b=>{const _0x14b5c1=_0x35474e;let _0x3bf9ae=null,_0x46d533=null;if(ipaddr['isValid'](_0x4baf3b)){const _0x74b4b1=ipaddr['parse'](_0x4baf3b);_0x74b4b1[_0x14b5c1(0x24f)]()==='ipv6'?(_0x74b4b1['isIPv4MappedAddress']()&&(_0x3bf9ae=_0x74b4b1[_0x14b5c1(0x20c)]()[_0x14b5c1(0x304)]()),_0x46d533=_0x74b4b1['toString']()):(_0x3bf9ae=_0x74b4b1[_0x14b5c1(0x304)](),_0x46d533=_0x74b4b1[_0x14b5c1(0x24e)]()[_0x14b5c1(0x304)]());}return{'show':_0x3bf9ae?_0x3bf9ae:_0x46d533,'store':_0x46d533};};function formatDate(_0x32e2ed){const _0x52ba05=_0x35474e;return _0x32e2ed[_0x52ba05(0x2fb)]()+'/'+(_0x32e2ed['getMonth']()+0x1)[_0x52ba05(0x304)]()[_0x52ba05(0x28a)](0x2,'0')+'/'+_0x32e2ed[_0x52ba05(0x1d7)]()[_0x52ba05(0x304)]()[_0x52ba05(0x28a)](0x2,'0')+'\x20'+_0x32e2ed[_0x52ba05(0x31f)]()[_0x52ba05(0x304)]()[_0x52ba05(0x28a)](0x2,'0')+':'+_0x32e2ed[_0x52ba05(0x2f8)]()[_0x52ba05(0x304)]()['padStart'](0x2,'0')+':'+_0x32e2ed['getSeconds']()['toString']()[_0x52ba05(0x28a)](0x2,'0');}function sleep(_0x26c0bb){return new Promise(_0x4065f7=>setTimeout(_0x4065f7,_0x26c0bb));}