const _0xb9d65b=_0x4f79;(function(_0x20f26e,_0x3dc20e){const _0x1d4bc0=_0x4f79,_0x28e7df=_0x20f26e();while(!![]){try{const _0x215f49=parseInt(_0x1d4bc0(0x1a3))/0x1*(-parseInt(_0x1d4bc0(0x14a))/0x2)+parseInt(_0x1d4bc0(0x262))/0x3+-parseInt(_0x1d4bc0(0x1e3))/0x4+-parseInt(_0x1d4bc0(0x1e8))/0x5*(parseInt(_0x1d4bc0(0x19e))/0x6)+parseInt(_0x1d4bc0(0x238))/0x7*(-parseInt(_0x1d4bc0(0x13c))/0x8)+-parseInt(_0x1d4bc0(0x1d0))/0x9*(parseInt(_0x1d4bc0(0x266))/0xa)+parseInt(_0x1d4bc0(0x2ac))/0xb;if(_0x215f49===_0x3dc20e)break;else _0x28e7df['push'](_0x28e7df['shift']());}catch(_0x27fb55){_0x28e7df['push'](_0x28e7df['shift']());}}}(_0x3ec7,0xdceec));const _0x569bc4=function(){let _0x2cda6f=!![];return function(_0xb9e5c3,_0x1d9d9b){const _0x1ba06d=_0x2cda6f?function(){const _0x320fb3=_0x4f79;if(_0x1d9d9b){const _0x2f0da0=_0x1d9d9b[_0x320fb3(0x222)](_0xb9e5c3,arguments);return _0x1d9d9b=null,_0x2f0da0;}}:function(){};return _0x2cda6f=![],_0x1ba06d;};}(),_0x2cc766=_0x569bc4(this,function(){const _0x3ff23c=_0x4f79;return _0x2cc766[_0x3ff23c(0x1a6)]()['search'](_0x3ff23c(0x1e6))['toString']()[_0x3ff23c(0x2ad)](_0x2cc766)['search'](_0x3ff23c(0x1e6));});_0x2cc766();'use strict';process[_0xb9d65b(0x136)][_0xb9d65b(0x16a)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require(_0xb9d65b(0x29d)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0xb9d65b(0x1e2)),crypto=require(_0xb9d65b(0x2c8)),Crypt=require(_0xb9d65b(0x177))[_0xb9d65b(0x1f2)],RSA=require('hybrid-crypto-js')[_0xb9d65b(0x1ec)],bcrypt=require('bcryptjs'),jwt=require(_0xb9d65b(0x1a2)),ipaddr=require(_0xb9d65b(0x273)),argv=require(_0xb9d65b(0x181))(process[_0xb9d65b(0x292)][_0xb9d65b(0x1c9)](0x2))[_0xb9d65b(0x292)],uuidRandom=require('uuid-random'),TelegramBot=require(_0xb9d65b(0x19b)),Mixpanel=require(_0xb9d65b(0x1cd)),axios=require(_0xb9d65b(0x215)),{GraphQLClient,gql}=require(_0xb9d65b(0x283)),util=require(_0xb9d65b(0x156)),fileUpload=require(_0xb9d65b(0x138)),PORT=argv[_0xb9d65b(0x212)]||_0xb9d65b(0x17a),pattern=/^[0-9]{2,4}$/;!pattern[_0xb9d65b(0x279)](PORT)&&(console['log'](_0xb9d65b(0x201)+PORT+_0xb9d65b(0x236)),process['exit'](0x1));const HOST=argv['host']||null,userID=argv[_0xb9d65b(0x1ac)]||'';let bbpath=_0xb9d65b(0x1c8),bbpath2='';const botfile=_0xb9d65b(0x25f),configfile=_0xb9d65b(0x137),settingsfile=_0xb9d65b(0x1b4),securefile=_0xb9d65b(0x1c5);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0xb9d65b(0x260),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0xb9d65b(0x1d3)+userID+'/':bbpath+_0xb9d65b(0x1d3),zippath=userID?bbpath+_0xb9d65b(0x289)+userID+'/':bbpath+'zip/',loggerfile=fs[_0xb9d65b(0x148)](logspath+_0xb9d65b(0x13e),{'flags':'a'}),temppath=userID?bbpath+_0xb9d65b(0x143)+userID+'/':bbpath+_0xb9d65b(0x143);!fs[_0xb9d65b(0x2c9)](configpath)&&fs[_0xb9d65b(0x28b)](configpath);!fs[_0xb9d65b(0x2c9)](configbackuppath)&&fs[_0xb9d65b(0x28b)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0xb9d65b(0x28b)](logspath);!fs[_0xb9d65b(0x2c9)](zippath)&&fs[_0xb9d65b(0x28b)](zippath);!fs[_0xb9d65b(0x2c9)](temppath)&&fs[_0xb9d65b(0x28b)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0xb9d65b(0x18c)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xb9d65b(0x2a8)}})[_0xb9d65b(0x18c)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xb9d65b(0x197)]({'secure':{},'blacklist':[]})[_0xb9d65b(0x18c)]();let crypt=new Crypt({'md':_0xb9d65b(0x149),'rsaStandard':_0xb9d65b(0x169)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0xb9d65b(0x2d2)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xb9d65b(0x155)]&&settings[_0xb9d65b(0x155)]!=''&&settings[_0xb9d65b(0x14f)]&&settings[_0xb9d65b(0x14f)]!='')initTelegram();const logger={'screen':_0x96d01a=>{const _0x4bea40=_0xb9d65b;console[_0x4bea40(0x1c1)](_0x96d01a);},'simple':_0x430c85=>{const _0x3c1356=_0xb9d65b;console['log'](_0x430c85),loggerfile[_0x3c1356(0x18c)](util['format'](_0x430c85)+'\x0a');},'full':async _0x21fe1d=>{const _0x4e80d7=_0xb9d65b,_0x1dd19e=getTimeStamp()+_0x4e80d7(0x1ab)+_0x21fe1d;console['log'](_0x1dd19e),loggerfile['write'](util[_0x4e80d7(0x256)](_0x1dd19e)+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x4e80d7(0x1fe))await tgBot[_0x4e80d7(0x19f)](settings[_0x4e80d7(0x13d)],_0x4e80d7(0x134)+_0x21fe1d)[_0x4e80d7(0x163)](_0x4176b1=>{telegramError(_0x4176b1);});}};process['on']('uncaughtException',function(_0x5d48d5){const _0x231312=_0xb9d65b;logger[_0x231312(0x242)](_0x5d48d5);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xb9d65b(0x25c))[_0xb9d65b(0x15c)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xb9d65b(0x1a0)),app=express(),http=require('http')[_0xb9d65b(0x258)](app);app[_0xb9d65b(0x2b5)](fileUpload({'useTempFiles':!![]})),app[_0xb9d65b(0x1c2)]('/download/:type',async(_0x230ed9,_0x186ab6)=>{const _0x17df19=_0xb9d65b,_0x2701f4=_0x230ed9['params']['type'],_0x3c402e=getClientsWithBotID('botmanager'),_0x3800a4=_0x230ed9[_0x17df19(0x2af)][_0x17df19(0x259)],_0x3cc897=timelyDecrypt(_0x3800a4,![]),_0x16e494=_0x3c402e[_0x17df19(0x2a7)](_0x171281=>_0x171281[_0x17df19(0x259)]==_0x3cc897);if(_0x16e494){const _0x105b68=normalizeIP(_0x230ed9[_0x17df19(0x247)]['remoteAddress'])[_0x17df19(0x1de)],_0x4fa155=_0x230ed9[_0x17df19(0x2af)][_0x17df19(0x1f4)];if(validateAccess(_0x4fa155,_0x3cc897,_0x105b68)[_0x17df19(0x139)])await zipFiles(_0x2701f4),_0x186ab6['download'](zippath+(_0x2701f4+_0x17df19(0x1bf)),_0x2f6233=>{const _0x43c72a=_0x17df19;_0x2f6233&&(logger[_0x43c72a(0x13b)](_0x43c72a(0x232)+_0x2701f4),logger['simple'](_0x2f6233));});else logger[_0x17df19(0x13b)](_0x17df19(0x141)+_0x2701f4+_0x17df19(0x196));}else logger[_0x17df19(0x13b)](_0x17df19(0x141)+_0x2701f4+_0x17df19(0x233));}),app[_0xb9d65b(0x216)]('/upload-backup',async(_0x30c3a6,_0x43a0f0)=>{const _0x19b208=_0xb9d65b,_0x4f4fa6=getClientsWithBotID('botmanager'),_0x4c87fb=_0x30c3a6[_0x19b208(0x2af)][_0x19b208(0x259)],_0x451cc8=timelyDecrypt(_0x4c87fb,![]),_0x3374c0=_0x4f4fa6[_0x19b208(0x2a7)](_0x62e2bc=>_0x62e2bc['uuid']==_0x451cc8);if(_0x3374c0){const _0x513165=normalizeIP(_0x30c3a6[_0x19b208(0x247)]['remoteAddress'])[_0x19b208(0x1de)],_0x48b81b=_0x30c3a6[_0x19b208(0x2af)][_0x19b208(0x1f4)];if(validateAccess(_0x48b81b,_0x451cc8,_0x513165)['allow']){if(_0x30c3a6[_0x19b208(0x2b2)]){const _0x5aed8b=_0x30c3a6[_0x19b208(0x2b2)][_0x19b208(0x1d7)];await _0x5aed8b['mv'](temppath+_0x5aed8b[_0x19b208(0x208)]),_0x43a0f0[_0x19b208(0x16b)]({'status':!![],'message':_0x19b208(0x18f)});const _0x207e48=getBotsWithMode();_0x207e48[_0x19b208(0x12e)]>0x0?confirmRestore(temppath,_0x5aed8b[_0x19b208(0x208)]):unzipFile(temppath,_0x5aed8b[_0x19b208(0x208)]);}}else logger[_0x19b208(0x13b)](_0x19b208(0x1e9));}else logger[_0x19b208(0x13b)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0xb9d65b(0x2b5)](express['static'](path[_0xb9d65b(0x168)](__dirname,bbpath2,_0xb9d65b(0x1c4)))),app[_0xb9d65b(0x2b5)](express[_0xb9d65b(0x1aa)](path[_0xb9d65b(0x168)](__dirname,bbpath2,_0xb9d65b(0x27a)))),app['get']('/',function(_0x25f8b6,_0x4e8477){const _0x2d6e25=_0xb9d65b;_0x4e8477[_0x2d6e25(0x1e4)](path['join'](__dirname,bbpath2,_0x2d6e25(0x1c4),_0x2d6e25(0x1b9)));}),app['get'](_0xb9d65b(0x2b9),function(_0x42030b,_0x49ed09){const _0x2356a3=_0xb9d65b;_0x49ed09['sendFile'](path[_0x2356a3(0x168)](__dirname,bbpath2,_0x2356a3(0x27a),'index.html'));}),app[_0xb9d65b(0x1c2)]('/:bot/portfolio',(_0x416c60,_0x40fba1)=>{const _0x2176b0=_0xb9d65b;_0x40fba1['sendFile'](path[_0x2176b0(0x168)](__dirname,bbpath2,'build',_0x2176b0(0x1b9)));}),app[_0xb9d65b(0x1c2)](_0xb9d65b(0x135),(_0x5a6a53,_0x565b96)=>{const _0x5c656e=_0xb9d65b;_0x565b96[_0x5c656e(0x1e4)](path[_0x5c656e(0x168)](__dirname,bbpath2,_0x5c656e(0x27a),_0x5c656e(0x1b9)));}),app['get'](_0xb9d65b(0x297),(_0x38078e,_0x4784b5)=>{const _0x5d1d9c=_0xb9d65b;_0x4784b5[_0x5d1d9c(0x1e4)](path[_0x5d1d9c(0x168)](__dirname,bbpath2,_0x5d1d9c(0x27a),_0x5d1d9c(0x1b9)));}),app['get'](_0xb9d65b(0x271),(_0x30ccd9,_0x3efc12)=>{const _0x569cc2=_0xb9d65b;_0x3efc12[_0x569cc2(0x1e4)](path['join'](__dirname,bbpath2,'build',_0x569cc2(0x1b9)));}),app[_0xb9d65b(0x1c2)](_0xb9d65b(0x25d),(_0x25c073,_0x33f69b)=>{const _0x55285d=_0xb9d65b;_0x33f69b[_0x55285d(0x1e4)](path[_0x55285d(0x168)](__dirname,bbpath2,'build',_0x55285d(0x1b9)));}),app[_0xb9d65b(0x1c2)]('/:bot/support',(_0x5e8f35,_0x2f87b3)=>{const _0x2199e9=_0xb9d65b;_0x2f87b3[_0x2199e9(0x1e4)](path['join'](__dirname,bbpath2,_0x2199e9(0x27a),_0x2199e9(0x1b9)));});if(HOST)http['listen'](PORT,HOST);else http[_0xb9d65b(0x183)](PORT);const io=require(_0xb9d65b(0x160))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x2faab7=_0xb9d65b;logger[_0x2faab7(0x242)](''),logger[_0x2faab7(0x242)](_0x2faab7(0x2b8)),await logger['full'](_0x2faab7(0x223)+PORT),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x2faab7(0x12e)]!=0x0)for(const _0x57543c of config){if(_0x57543c[_0x2faab7(0x230)]=='enabled'||_0x57543c[_0x2faab7(0x230)]==_0x2faab7(0x293))await logger[_0x2faab7(0x13b)](_0x2faab7(0x1a5)+_0x57543c['botID']+_0x2faab7(0x2c7)+_0x57543c['botname']),startBot([_0x57543c[_0x2faab7(0x1b0)],userID],{'cwd':bbpath},function(_0x75e03){const _0x47ecf5=_0x2faab7;if(_0x75e03)logger[_0x47ecf5(0x13b)](_0x75e03);});else(_0x57543c[_0x2faab7(0x230)]=='disabled'||_0x57543c[_0x2faab7(0x230)]=='new-disabled')&&await logger[_0x2faab7(0x13b)]('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x57543c[_0x2faab7(0x1b0)]+_0x2faab7(0x2c7)+_0x57543c[_0x2faab7(0x240)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x2faab7(0x242)](_0x2faab7(0x2b8)),logger[_0x2faab7(0x242)]('');}function startSocket(){const _0x273281=_0xb9d65b;io['on'](_0x273281(0x2b3),_0x277da2=>{const _0x10d984=_0x273281;let _0x456d44,_0x425ee7,_0x5ca443,_0x18ed94,_0x3c513a;const _0x2e341b=_0x277da2[_0x10d984(0x250)][_0x10d984(0x2af)][_0x10d984(0x176)];_0x425ee7=_0x2e341b[_0x10d984(0x14d)](/bot[0-9]{3}/);if(_0x425ee7)_0x5ca443=_0x425ee7[0x0][_0x10d984(0x14d)](/[0-9]{3}/);if(_0x5ca443)_0x456d44=_0x5ca443[0x0];else _0x456d44=_0x10d984(0x166);const _0x530a3c=_0x277da2['handshake'][_0x10d984(0x1f0)][_0x10d984(0x220)];if(!_0x530a3c)_0x277da2[_0x10d984(0x147)]('status',{'publicKey':secure[_0x10d984(0x13f)]});else{_0x18ed94=timelyDecrypt(_0x530a3c,![]);if(!_0x18ed94)_0x277da2['emit']('status',{'publicKey':secure['publicKey']});else{_0x3c513a=normalizeIP(_0x277da2['conn'][_0x10d984(0x1d6)])['store'];if(!devices[_0x18ed94])devices[_0x18ed94]={'uuid':_0x18ed94,'access':{'token':null}};devices[_0x18ed94]['ip']=_0x3c513a;const _0x235359=addClient(_0x277da2['id'],_0x18ed94,_0x456d44);setAccess(_0x235359),emitMessages(),_0x277da2['on']('login',_0x397dd7=>{const _0x37b317=_0x10d984,_0x53cd07=timelyDecrypt(_0x397dd7[_0x37b317(0x26d)]);if(_0x53cd07){_0x397dd7={'username':_0x397dd7[_0x37b317(0x140)],'password':_0x53cd07},devices[_0x18ed94][_0x37b317(0x1b6)]=validateCredentials(_0x397dd7,_0x18ed94);if(devices[_0x18ed94][_0x37b317(0x1b6)]['allow']==![]&&devices[_0x18ed94][_0x37b317(0x1b6)][_0x37b317(0x1cc)]==_0x37b317(0x1ba))_0x277da2['emit'](_0x37b317(0x230),{'access':devices[_0x18ed94][_0x37b317(0x1b6)]}),loginAccess2FA(_0x18ed94,_0x3c513a);else{if(devices[_0x18ed94][_0x37b317(0x1b6)][_0x37b317(0x139)]==![]&&devices[_0x18ed94][_0x37b317(0x1b6)][_0x37b317(0x1cc)]==_0x37b317(0x21c))_0x277da2[_0x37b317(0x147)](_0x37b317(0x230),{'access':devices[_0x18ed94][_0x37b317(0x1b6)]});else devices[_0x18ed94][_0x37b317(0x1b6)][_0x37b317(0x139)]&&devices[_0x18ed94][_0x37b317(0x1b6)][_0x37b317(0x1cc)]==_0x37b317(0x291)&&(getClientsWithUuid(_0x18ed94)['forEach'](_0x48ecc2=>{setAccess(_0x48ecc2);}),setTokenRefresh(_0x18ed94),setSessionTimeout(_0x37b317(0x26f),_0x18ed94));}}else logger[_0x37b317(0x13b)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x277da2['on'](_0x10d984(0x225),()=>{resetPassword();}),_0x277da2['on'](_0x10d984(0x17e),_0x3657d9=>{removeClient(_0x277da2['id']);}),_0x456d44=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x25cc84){const _0x200175=_0xb9d65b;if(_0x25cc84!=_0x200175(0x166)&&config['apiKey']!=''){if(pid[_0x25cc84])pid[_0x25cc84][_0x200175(0x16b)]({'function':_0x200175(0x133),'args':null});}}function reloadBotManager(){const _0x562767=_0xb9d65b;getClientsWithBotID('botmanager')[_0x562767(0x1dc)](_0x5e31c0=>{const _0x447626=_0x562767;getSocket(_0x5e31c0['id'])['emit'](_0x447626(0x230),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x28ccc1){const _0x5604bd=_0xb9d65b;return io[_0x5604bd(0x28d)][_0x5604bd(0x28d)][_0x5604bd(0x1c2)](_0x28ccc1);}function setAccess(_0x5ad52e){const _0x185f63=_0xb9d65b,_0x49a689=getSocket(_0x5ad52e['id']),_0x35b110=_0x5ad52e['uuid'],_0x3e287a=_0x5ad52e['bot'];devices[_0x35b110][_0x185f63(0x1b6)]=validateAccess(devices[_0x35b110]['access'][_0x185f63(0x2a6)],_0x35b110),_0x49a689[_0x185f63(0x168)](_0x35b110);if(devices[_0x35b110][_0x185f63(0x1b6)][_0x185f63(0x139)]){_0x49a689[_0x185f63(0x168)](_0x3e287a);if(_0x3e287a==_0x185f63(0x166))initializeSocketBotManager(_0x49a689);else initializeSocketBot(_0x49a689);initClient(_0x3e287a);}devices[_0x35b110]['access']['token']&&devices[_0x35b110]['access']['reason']==_0x185f63(0x1c7)&&setSessionTimeout(_0x185f63(0x1d8),_0x35b110),devices[_0x35b110][_0x185f63(0x1b6)][_0x185f63(0x2a6)]&&devices[_0x35b110][_0x185f63(0x1b6)][_0x185f63(0x1cc)]==_0x185f63(0x298)&&setSessionTimeout(_0x185f63(0x26f),_0x35b110),_0x49a689[_0x185f63(0x147)]('status',{'status':_0x5ad52e[_0x185f63(0x237)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x35b110][_0x185f63(0x1b6)],'externalip':devices[_0x35b110]['ip'],'publicKey':secure[_0x185f63(0x13f)],'userid':settings[_0x185f63(0x1be)],'validInstallation':validInstallation}),devices[_0x35b110]['access'][_0x185f63(0x139)]==![]&&devices[_0x35b110][_0x185f63(0x1b6)][_0x185f63(0x1cc)]==_0x185f63(0x2c4)&&temporaryAccess2FA(_0x35b110,devices[_0x35b110]['ip']);}function setSessionTimeout(_0x28bfc2,_0x42d88b){const _0x2b2082=_0xb9d65b;let _0x42f8e6;if(_0x28bfc2==_0x2b2082(0x26f))_0x42f8e6=loginExpiry*0x3c*0x3e8;else _0x42f8e6=devices[_0x42d88b]['telegramIpApproval'][_0x2b2082(0x2bb)]*0x3c*0x3e8-(new Date()[_0x2b2082(0x274)]()-devices[_0x42d88b][_0x2b2082(0x1b1)][_0x2b2082(0x189)]);if(devices[_0x42d88b]['pidExpireLogin'])clearTimeout(devices[_0x42d88b][_0x2b2082(0x272)]);devices[_0x42d88b]['pidExpireLogin']=setTimeout(()=>{const _0x3b864f=_0x2b2082;if(devices[_0x42d88b][_0x3b864f(0x2b0)])clearTimeout(devices[_0x42d88b]['pidRefreshToken']);removeSocketListeners(_0x42d88b),addBlacklist(_0x42d88b),devices[_0x42d88b][_0x3b864f(0x1b1)]=null,devices[_0x42d88b]['telegram2FaApproval']=null,devices[_0x42d88b][_0x3b864f(0x1b6)]['token']=null,devices[_0x42d88b]['access']=validateAccess(devices[_0x42d88b][_0x3b864f(0x1b6)][_0x3b864f(0x2a6)],_0x42d88b),!(devices[_0x42d88b]['access']['allow']&&devices[_0x42d88b][_0x3b864f(0x1b6)][_0x3b864f(0x1cc)]==_0x3b864f(0x2cf))&&(_0x28bfc2==_0x3b864f(0x26f)?io['to'](_0x42d88b)['emit']('status',{'access':{'allow':![],'reason':_0x3b864f(0x235),'token':null}}):io['to'](_0x42d88b)[_0x3b864f(0x147)](_0x3b864f(0x230),{'access':{'allow':![],'reason':_0x3b864f(0x2cd),'token':null}})),devices[_0x42d88b]['access'][_0x3b864f(0x2a6)]=null;},_0x42f8e6);}function setTokenRefresh(_0x19578e){const _0x591655=_0xb9d65b;if(devices[_0x19578e][_0x591655(0x2b0)])clearTimeout(devices[_0x19578e][_0x591655(0x2b0)]);devices[_0x19578e][_0x591655(0x2b0)]=setTimeout(()=>{const _0x2331df=_0x591655;getClientsWithUuid(_0x19578e)[_0x2331df(0x12e)]!=0x0?(devices[_0x19578e][_0x2331df(0x1b6)]=refreshToken(_0x19578e),io['to'](_0x19578e)[_0x2331df(0x147)]('status',{'status':_0x2331df(0x203),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x19578e]['access'],'externalip':devices[_0x19578e]['ip'],'publicKey':secure[_0x2331df(0x13f)],'validInstallation':validInstallation}),setTokenRefresh(_0x19578e)):clearTimeout(devices[_0x19578e]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4da26d){const _0x87fb37=_0xb9d65b,_0x3a6c5d=getClient(_0x4da26d['id'])[_0x87fb37(0x259)];_0x4da26d[_0x87fb37(0x147)](_0x87fb37(0x2b6),config),_0x4da26d[_0x87fb37(0x147)](_0x87fb37(0x25a),cleanSettings()),_0x4da26d['on']('add-bot',_0x1fc28e=>{const _0x622eb3=_0x87fb37;if(validateAccess(_0x1fc28e,_0x3a6c5d)['allow'])addBot();else logger[_0x622eb3(0x13b)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x4da26d['on'](_0x87fb37(0x1ae),(_0x371d42,_0x16a68c)=>{const _0x113cea=_0x87fb37;if(validateAccess(_0x16a68c,_0x3a6c5d)['allow'])toggleBot(_0x371d42['botID'],_0x371d42['status'],_0x371d42[_0x113cea(0x1f7)]);else logger[_0x113cea(0x13b)](_0x113cea(0x28e));}),_0x4da26d['on'](_0x87fb37(0x178),(_0x19d111,_0x5a72ab)=>{const _0x17a1d2=_0x87fb37;if(validateAccess(_0x5a72ab,_0x3a6c5d)[_0x17a1d2(0x139)])toggleBotMode(_0x19d111);else logger[_0x17a1d2(0x13b)](_0x17a1d2(0x28e));}),_0x4da26d['on'](_0x87fb37(0x269),(_0x28247a,_0x406f5d)=>{const _0x22ca01=_0x87fb37;if(validateAccess(_0x406f5d,_0x3a6c5d)['allow'])deleteBot(_0x28247a);else logger[_0x22ca01(0x13b)](_0x22ca01(0x202));}),_0x4da26d['on']('store-settings',(_0x29909d,_0x466ae4)=>{const _0xb2c2d2=_0x87fb37;if(validateAccess(_0x466ae4,_0x3a6c5d)['allow'])storeSettings(_0x29909d,!![]);else logger['full'](_0xb2c2d2(0x23e));}),_0x4da26d['on'](_0x87fb37(0x25b),_0xd88fd9=>{const _0x1d97df=_0x87fb37;if(validateAccess(_0xd88fd9,_0x3a6c5d)[_0x1d97df(0x139)])updateBB();else logger['full'](_0x1d97df(0x200));}),_0x4da26d['on'](_0x87fb37(0x20c),_0x134e08=>{const _0x499091=_0x87fb37;if(validateAccess(_0x134e08,_0x3a6c5d)[_0x499091(0x139)])getMessages();else logger[_0x499091(0x13b)](_0x499091(0x16f));}),_0x4da26d['on'](_0x87fb37(0x1db),(_0x27fe2b,_0x240c27)=>{const _0x2e1700=_0x87fb37;if(validateAccess(_0x240c27,_0x3a6c5d)[_0x2e1700(0x139)])confirmMessage(_0x27fe2b);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4da26d['on'](_0x87fb37(0x226),_0x7de856=>{const _0x28e964=_0x87fb37;if(validateAccess(_0x7de856,_0x3a6c5d)[_0x28e964(0x139)]){if(devices[_0x3a6c5d][_0x28e964(0x2b0)])clearTimeout(devices[_0x3a6c5d][_0x28e964(0x2b0)]);if(devices[_0x3a6c5d]['pidExpireLogin'])clearTimeout(devices[_0x3a6c5d][_0x28e964(0x272)]);removeSocketListeners(getClient(_0x4da26d['id'])[_0x28e964(0x259)]),addBlacklist(_0x3a6c5d),devices[_0x3a6c5d][_0x28e964(0x1b1)]=null,devices[_0x3a6c5d]['telegram2FaApproval']=null,devices[_0x3a6c5d]['access'][_0x28e964(0x2a6)]=null,io['to'](getClient(_0x4da26d['id'])[_0x28e964(0x259)])[_0x28e964(0x147)](_0x28e964(0x230),{'access':{'allow':![],'reason':_0x28e964(0x1bc),'token':null}});}else logger[_0x28e964(0x13b)](_0x28e964(0x2b1));});}function initializeSocketBot(_0x2992a9){const _0x371e69=_0xb9d65b,_0x55f67e=getClient(_0x2992a9['id'])[_0x371e69(0x2c2)],_0x59c42e=getClient(_0x2992a9['id'])[_0x371e69(0x259)];_0x2992a9['on']('get-logs',(_0x434283,_0x2c20ca)=>{const _0x188aaf=_0x371e69;if(validateAccess(_0x2c20ca,_0x59c42e)[_0x188aaf(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e][_0x188aaf(0x16b)]({'function':_0x188aaf(0x2ab),'args':_0x434283});}else logger[_0x188aaf(0x13b)]('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x2992a9['on'](_0x371e69(0x22c),(_0xa1bf61,_0x134385)=>{const _0x31ea0f=_0x371e69;if(validateAccess(_0x134385,_0x59c42e)[_0x31ea0f(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e]['send']({'function':_0x31ea0f(0x253),'args':_0xa1bf61});}else logger['full'](_0x31ea0f(0x23f));}),_0x2992a9['on'](_0x371e69(0x191),(_0x10051c,_0x52772b)=>{const _0x7c1cd9=_0x371e69;if(validateAccess(_0x52772b,_0x59c42e)['allow']){if(pid[_0x55f67e])pid[_0x55f67e][_0x7c1cd9(0x16b)]({'function':_0x7c1cd9(0x22a),'args':_0x10051c});}else logger[_0x7c1cd9(0x13b)](_0x7c1cd9(0x278));}),_0x2992a9['on'](_0x371e69(0x1b7),(_0x11e490,_0x176dc0)=>{const _0x1dccf3=_0x371e69;if(validateAccess(_0x176dc0,_0x59c42e)[_0x1dccf3(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e][_0x1dccf3(0x16b)]({'function':_0x1dccf3(0x21d),'args':_0x11e490});}else logger['full'](_0x1dccf3(0x12a));}),_0x2992a9['on'](_0x371e69(0x164),(_0x3abc56,_0x547df2)=>{const _0x183ba7=_0x371e69;if(validateAccess(_0x547df2,_0x59c42e)[_0x183ba7(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e]['send']({'function':_0x183ba7(0x1e7),'args':_0x3abc56});}else logger[_0x183ba7(0x13b)](_0x183ba7(0x2d3));}),_0x2992a9['on']('get-starting-balances',_0xeddfc4=>{const _0x5c4cef=_0x371e69;if(validateAccess(_0xeddfc4,_0x59c42e)['allow']){if(pid[_0x55f67e])pid[_0x55f67e]['send']({'function':_0x5c4cef(0x187),'args':null});}else logger['full'](_0x5c4cef(0x27d));}),_0x2992a9['on'](_0x371e69(0x265),(_0x3a0770,_0x4e0a10)=>{const _0x54f439=_0x371e69;if(validateAccess(_0x4e0a10,_0x59c42e)[_0x54f439(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e][_0x54f439(0x16b)]({'function':_0x54f439(0x20f),'args':_0x3a0770});}else logger[_0x54f439(0x13b)](_0x54f439(0x1b5));}),_0x2992a9['on'](_0x371e69(0x221),_0x43c36c=>{const _0x38a3b8=_0x371e69;if(validateAccess(_0x43c36c,_0x59c42e)[_0x38a3b8(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e][_0x38a3b8(0x16b)]({'function':_0x38a3b8(0x125),'args':null});}else logger[_0x38a3b8(0x13b)](_0x38a3b8(0x152));}),_0x2992a9['on']('show-config',_0x461409=>{const _0x53fd48=_0x371e69;if(validateAccess(_0x461409,_0x59c42e)[_0x53fd48(0x139)]){if(pid[_0x55f67e])pid[_0x55f67e][_0x53fd48(0x16b)]({'function':_0x53fd48(0x2a5),'args':null});}else logger[_0x53fd48(0x13b)](_0x53fd48(0x1f9));}),_0x2992a9['on'](_0x371e69(0x25b),_0x3c47cd=>{const _0x2fd797=_0x371e69;if(validateAccess(_0x3c47cd,_0x59c42e)[_0x2fd797(0x139)])updateBB();else logger[_0x2fd797(0x13b)](_0x2fd797(0x200));}),_0x2992a9['on'](_0x371e69(0x20c),_0x5d0533=>{const _0x153b7e=_0x371e69;if(validateAccess(_0x5d0533,_0x59c42e)[_0x153b7e(0x139)])getMessages();else logger['full'](_0x153b7e(0x16f));}),_0x2992a9['on']('confirm-message',(_0x20a477,_0x2c8ac7)=>{const _0x39bd9a=_0x371e69;if(validateAccess(_0x2c8ac7,_0x59c42e)[_0x39bd9a(0x139)])confirmMessage(_0x20a477);else logger[_0x39bd9a(0x13b)](_0x39bd9a(0x219));}),_0x2992a9['on'](_0x371e69(0x226),_0x518619=>{const _0x238462=_0x371e69;if(validateAccess(_0x518619,_0x59c42e)[_0x238462(0x139)]){if(devices[_0x59c42e][_0x238462(0x2b0)])clearTimeout(devices[_0x59c42e]['pidRefreshToken']);if(devices[_0x59c42e][_0x238462(0x272)])clearTimeout(devices[_0x59c42e][_0x238462(0x272)]);removeSocketListeners(getClient(_0x2992a9['id'])[_0x238462(0x259)]),addBlacklist(_0x59c42e),devices[_0x59c42e][_0x238462(0x1b1)]=null,devices[_0x59c42e][_0x238462(0x1c3)]=null,devices[_0x59c42e][_0x238462(0x1b6)][_0x238462(0x2a6)]=null,io['to'](getClient(_0x2992a9['id'])[_0x238462(0x259)])[_0x238462(0x147)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x238462(0x13b)](_0x238462(0x2b1));});}function removeSocketListeners(_0x4830bf){const _0xfa21d4=_0xb9d65b;getClientsWithUuid(_0x4830bf)[_0xfa21d4(0x1dc)](_0x2dc850=>{const _0x459c12=_0xfa21d4;getSocket(_0x2dc850['id'])[_0x459c12(0x130)]();});}function cleanSettings(){const _0x3af059=_0xb9d65b;let _0x54d5d5=settings;return settings[_0x3af059(0x155)]&&settings['telegramToken']!=''&&(_0x54d5d5={..._0x54d5d5,'telegramToken':_0x3af059(0x241)}),settings[_0x3af059(0x179)]&&settings['bbPassword']!=''&&(_0x54d5d5={..._0x54d5d5,'bbPassword':'************'}),(settings[_0x3af059(0x179)]&&settings[_0x3af059(0x179)]==_0x3af059(0x29e)||settings['telegramToken']&&settings[_0x3af059(0x155)]==_0x3af059(0x29e))&&(_0x54d5d5={..._0x54d5d5,'restored':{'password':settings[_0x3af059(0x179)]==_0x3af059(0x29e),'telegram':settings[_0x3af059(0x155)]==_0x3af059(0x29e)}}),_0x54d5d5;}function updateBB(){const _0x220d85=_0xb9d65b;installingUpdate=!![],config[_0x220d85(0x1dc)](_0x4b4619=>{const _0x246aed=_0x220d85;restartBot(_0x4b4619[_0x246aed(0x1b0)]);}),process['send']({'update':!![]},_0x4c6d0b=>{});}function startBot(_0x247925,_0x2dbfcb,_0x3e0b18){const _0x38dde9=_0xb9d65b;let _0x5f225c=![];const _0x171aad=_0x247925[0x0];_0x2dbfcb={..._0x2dbfcb,'stdio':[_0x38dde9(0x252),'inherit',_0x38dde9(0x252),'ipc']},pid[_0x171aad]=childProcess[_0x38dde9(0x1a9)](botfile,_0x247925,_0x2dbfcb),pid[_0x171aad]['on'](_0x38dde9(0x129),_0x597966=>{const _0x307a65=_0x38dde9;switch(Object[_0x307a65(0x285)](_0x597966)[0x0]){case _0x307a65(0x240):updateBotName(_0x171aad,_0x597966[_0x307a65(0x240)]);break;case _0x307a65(0x195):updateBotManager();break;case _0x307a65(0x230):updateStatus(_0x171aad,_0x597966['status']);break;case'live':updateLive(_0x171aad,_0x597966['live']);break;case _0x307a65(0x29b):updateLive(_0x171aad,_0x597966[_0x307a65(0x29b)]),io['to'](_0x171aad)['emit']('status',{'access':{'allow':![],'reason':_0x307a65(0x1ca),'token':null}});break;case'stop':_0x597966[_0x307a65(0x24c)]==_0x307a65(0x180)&&restartBot(_0x171aad);_0x597966[_0x307a65(0x24c)]==_0x307a65(0x1d1)&&toggleBot(_0x171aad,_0x307a65(0x1b2),'stopped');break;case'telegram':sendTelegram(_0x171aad,_0x597966[_0x307a65(0x150)]);break;case'telegrammsg':sendTelegramMsg(_0x597966[_0x307a65(0x268)]);break;case _0x307a65(0x20b):io['to'](_0x171aad)[_0x307a65(0x147)](_0x597966[_0x307a65(0x20b)],_0x597966[_0x307a65(0x22b)]);break;}}),pid[_0x171aad]['on'](_0x38dde9(0x270),function(_0x28b541){if(_0x5f225c)return;_0x5f225c=!![],_0x3e0b18(_0x28b541);}),pid[_0x171aad]['on'](_0x38dde9(0x1d9),async function(_0x495d23){const _0x53294c=_0x38dde9;if(installingUpdate)return;if(_0x5f225c)return;_0x5f225c=!![],_0x3e0b18(null);const _0x1260fa=dbConfig[_0x53294c(0x1c2)](_0x53294c(0x2b6))[_0x53294c(0x2a7)]({'botID':_0x171aad})[_0x53294c(0x154)]();_0x1260fa&&(_0x1260fa[_0x53294c(0x230)]=='enabled'||_0x1260fa[_0x53294c(0x230)]==_0x53294c(0x293))&&(await sleep(0x3e8),updateLive(_0x171aad,_0x53294c(0x15b)),logger[_0x53294c(0x13b)](_0x53294c(0x171)+_0x171aad),startBot([_0x171aad,userID],{'cwd':bbpath},function(_0xeaa0e8){const _0x2809c1=_0x53294c;if(_0xeaa0e8)logger[_0x2809c1(0x13b)](_0xeaa0e8);}));});}function stopBot(_0x53208a){const _0x26020=_0xb9d65b;getClientsWithBotID(_0x53208a)[_0x26020(0x1dc)](_0x1dd316=>{getSocket(_0x1dd316['id'])['disconnect'](!![]),removeClient(_0x1dd316['id']);}),pid[_0x53208a]&&(pid[_0x53208a][_0x26020(0x1d1)](),pid[_0x53208a]=null);}function restartBot(_0x10c579){const _0x57f1e7=_0xb9d65b;if(pid[_0x10c579])pid[_0x10c579][_0x57f1e7(0x1d1)]();}function addBot(){const _0x55a891=_0xb9d65b;let _0x4aa706;for(let _0x4ebcdb=0x1;_0x4ebcdb<0x3e9;_0x4ebcdb++){_0x4aa706=_0x4ebcdb[_0x55a891(0x1a6)]()[_0x55a891(0x182)](0x3,'0');let _0x2c9ffa=config[_0x55a891(0x2a7)](_0x438fd6=>_0x438fd6[_0x55a891(0x1b0)]==_0x4aa706);if(!_0x2c9ffa)break;}if(_0x4aa706===_0x55a891(0x2a2)){logger['full']('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x55a891(0x13b)](_0x55a891(0x1fb)+_0x4aa706),dbConfig['get'](_0x55a891(0x2b6))['push']({'botID':_0x4aa706,'botname':_0x55a891(0x228)+_0x4aa706,'status':'new','live':''})[_0x55a891(0x18c)](),startBot([_0x4aa706,userID],{'cwd':bbpath},function(_0x5abc0b){if(_0x5abc0b)logger['full'](_0x5abc0b);}),config=getConfiguration(),io['to'](_0x55a891(0x166))[_0x55a891(0x147)](_0x55a891(0x2b6),config);}function deleteBot(_0x1a2315){const _0xcca805=_0xb9d65b;getClientsWithBotID(_0x1a2315)[_0xcca805(0x1dc)](_0x30a89b=>{getSocket(_0x30a89b['id'])['disconnect'](!![]),removeClient(_0x30a89b['id']);}),dbConfig[_0xcca805(0x1c2)](_0xcca805(0x2b6))[_0xcca805(0x290)]({'botID':_0x1a2315})[_0xcca805(0x18c)](),logger[_0xcca805(0x13b)](_0xcca805(0x284)+_0x1a2315),stopBot(_0x1a2315);try{if(fs[_0xcca805(0x2c9)](path[_0xcca805(0x168)](configpath,_0xcca805(0x217)+_0x1a2315+'-config.json')))fs['unlinkSync'](path[_0xcca805(0x168)](configpath,'bot-'+_0x1a2315+_0xcca805(0x2a1)));if(fs[_0xcca805(0x2c9)](path[_0xcca805(0x168)](configpath,_0xcca805(0x217)+_0x1a2315+_0xcca805(0x128))))fs[_0xcca805(0x23c)](path[_0xcca805(0x168)](configpath,'bot-'+_0x1a2315+_0xcca805(0x128)));if(fs[_0xcca805(0x2c9)](path[_0xcca805(0x168)](configpath,_0xcca805(0x217)+_0x1a2315+'-performance.json')))fs[_0xcca805(0x23c)](path[_0xcca805(0x168)](configpath,_0xcca805(0x217)+_0x1a2315+_0xcca805(0x1d2)));if(fs[_0xcca805(0x2c9)](path['join'](configpath,_0xcca805(0x217)+_0x1a2315+_0xcca805(0x1c0))))fs['unlinkSync'](path[_0xcca805(0x168)](configpath,_0xcca805(0x217)+_0x1a2315+'-results.json'));}catch(_0x21ec83){if(_0x21ec83)logger[_0xcca805(0x13b)](_0xcca805(0x12c),_0x21ec83);}config=getConfiguration(),io['to'](_0xcca805(0x166))['emit']('bots',config);}function toggleBot(_0x20a4b7,_0x2c92eb,_0x5c848b){const _0x235108=_0xb9d65b;dbConfig[_0x235108(0x1c2)](_0x235108(0x2b6))[_0x235108(0x2a7)]({'botID':_0x20a4b7})[_0x235108(0x281)]({'status':_0x2c92eb})[_0x235108(0x281)]({'live':_0x5c848b})[_0x235108(0x18c)]();if(_0x2c92eb==_0x235108(0x227)||_0x2c92eb==_0x235108(0x293))logger[_0x235108(0x13b)]('enabled\x20Bot\x20'+_0x20a4b7),startBot([_0x20a4b7,userID],{'cwd':bbpath},function(_0x275cfe){const _0x2c50a9=_0x235108;if(_0x275cfe)logger[_0x2c50a9(0x13b)](_0x275cfe);});else(_0x2c92eb==_0x235108(0x1b2)||_0x2c92eb=='new-disabled')&&(logger[_0x235108(0x13b)](_0x235108(0x126)+_0x20a4b7),stopBot(_0x20a4b7));config=getConfiguration(),io['to']('botmanager')['emit'](_0x235108(0x2b6),config);}function toggleStatus(_0x128521){const _0x162896=_0xb9d65b;let _0x182e40=dbConfig['get'](_0x162896(0x2b6))[_0x162896(0x2a7)]({'botID':_0x128521})[_0x162896(0x154)](),_0x5628dc;if(_0x182e40[_0x162896(0x230)]===_0x162896(0x227))_0x5628dc='disabled';else{if(_0x182e40[_0x162896(0x230)]===_0x162896(0x293))_0x5628dc=_0x162896(0x12d);else{if(_0x182e40[_0x162896(0x230)]===_0x162896(0x12d))_0x5628dc=_0x162896(0x293);else{if(_0x182e40[_0x162896(0x230)]===_0x162896(0x1b2))_0x5628dc=_0x162896(0x227);}}}return _0x5628dc;}function updateStatus(_0xd2a882,_0x3ad902){const _0x585d0a=_0xb9d65b;dbConfig['get'](_0x585d0a(0x2b6))[_0x585d0a(0x2a7)]({'botID':_0xd2a882})[_0x585d0a(0x281)]({'status':_0x3ad902})[_0x585d0a(0x18c)](),config=getConfiguration(),io['to'](_0x585d0a(0x166))[_0x585d0a(0x147)]('bots',config);}function updateLive(_0x2ff464,_0x2636c8){const _0x2f0dbf=_0xb9d65b;dbConfig[_0x2f0dbf(0x1c2)](_0x2f0dbf(0x2b6))[_0x2f0dbf(0x2a7)]({'botID':_0x2ff464})[_0x2f0dbf(0x281)]({'live':_0x2636c8})[_0x2f0dbf(0x18c)](),config=getConfiguration(),io['to']('botmanager')[_0x2f0dbf(0x147)]('bots',config);}function updateBotName(_0x5ddfc0,_0x2dcc51){const _0x477f33=_0xb9d65b;dbConfig['get'](_0x477f33(0x2b6))[_0x477f33(0x2a7)]({'botID':_0x5ddfc0})[_0x477f33(0x281)]({'botname':_0x2dcc51})[_0x477f33(0x18c)](),config=getConfiguration(),io['to'](_0x477f33(0x166))[_0x477f33(0x147)](_0x477f33(0x2b6),config);}function updateBotManager(){const _0x526372=_0xb9d65b;config=getConfiguration(),io['to']('botmanager')[_0x526372(0x147)](_0x526372(0x2b6),config);}function toggleBotMode(_0x5c8654){const _0x3dc353=_0xb9d65b;if(pid[_0x5c8654])pid[_0x5c8654]['send']({'function':'toggleBotMode','args':null});else{const _0x3ca89a=configpath+'bot-'+_0x5c8654+_0x3dc353(0x2a1),_0x1fe93e=fs[_0x3dc353(0x255)](_0x3ca89a),_0x434cee=JSON[_0x3dc353(0x213)](_0x1fe93e),_0x50acf1=_0x434cee[_0x3dc353(0x2c2)][0x0]['headless'];_0x434cee['bot'][0x0][_0x3dc353(0x145)]=!_0x50acf1;const _0x5823a0=JSON[_0x3dc353(0x170)](_0x434cee,null,0x2);fs[_0x3dc353(0x1a1)](_0x3ca89a,_0x5823a0),config=getConfiguration(),io['to'](_0x3dc353(0x166))[_0x3dc353(0x147)](_0x3dc353(0x2b6),config);}}function telegramError(_0x50e68b){const _0x1b501c=_0xb9d65b;logger['simple'](getTimeStamp()+_0x1b501c(0x19d));}function validateTelegram(_0x354a5a){const _0x4b59a4=_0xb9d65b;if(_0x354a5a[_0x4b59a4(0x185)][_0x4b59a4(0x140)]!=settings[_0x4b59a4(0x14f)]&&'@'+_0x354a5a[_0x4b59a4(0x185)][_0x4b59a4(0x140)]!=settings['telegramUsername'])return tgBot[_0x4b59a4(0x19f)](_0x354a5a['chat']['id'],_0x4b59a4(0x2c0),{'parse_mode':_0x4b59a4(0x190)})[_0x4b59a4(0x163)](_0x425bd8=>{telegramError(_0x425bd8);}),![];return!![];}async function initTelegram(){const _0x20b76e=_0xb9d65b;if(tgBot)tgBot[_0x20b76e(0x234)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x4fd8f9=_0x20b76e(0x2bf);_0x4fd8f9+='\x0a',_0x4fd8f9+=_0x20b76e(0x1bb),_0x4fd8f9+=_0x20b76e(0x192),_0x4fd8f9+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x4fd8f9+=_0x20b76e(0x23d),_0x4fd8f9+=_0x20b76e(0x2ba),_0x4fd8f9+=_0x20b76e(0x204),_0x4fd8f9+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x4fd8f9+=_0x20b76e(0x198),_0x4fd8f9+=_0x20b76e(0x12f),_0x4fd8f9+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x4fd8f9+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x4fd8f9+=_0x20b76e(0x2a3);let _0x44d18c=_0x20b76e(0x282);_0x44d18c+='\x0a',_0x44d18c+=_0x4fd8f9,tgBot[_0x20b76e(0x21e)](/\/start/,_0x3205c5=>{const _0x5c3170=_0x20b76e;if(!validateTelegram(_0x3205c5))return;if(settings[_0x5c3170(0x13d)]!=_0x3205c5['chat']['id'])updateSetting('telegramChatId',_0x3205c5['chat']['id']);updateSetting(_0x5c3170(0x1dd),!![]),tgBot[_0x5c3170(0x19f)](_0x3205c5[_0x5c3170(0x28f)]['id'],_0x44d18c)[_0x5c3170(0x163)](_0x4efb8c=>{telegramError(_0x4efb8c);});}),tgBot[_0x20b76e(0x21e)](/\/enable/,_0x52253f=>{const _0xd36e7f=_0x20b76e;if(!validateTelegram(_0x52253f))return;if(settings[_0xd36e7f(0x13d)]!=_0x52253f['chat']['id'])updateSetting('telegramChatId',_0x52253f[_0xd36e7f(0x28f)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0xd36e7f(0x19f)](_0x52253f['chat']['id'],_0xd36e7f(0x1c6))['catch'](_0x10cab8=>{telegramError(_0x10cab8);});}),tgBot[_0x20b76e(0x21e)](/\/config/,async _0x1cc9a0=>{const _0x934c08=_0x20b76e;if(!validateTelegram(_0x1cc9a0))return;tgBot['removeListener'](_0x934c08(0x2a0)),tgBot[_0x934c08(0x19f)](_0x1cc9a0[_0x934c08(0x28f)]['id'],_0x934c08(0x21f),{'reply_markup':{'inline_keyboard':[[{'text':_0x934c08(0x18a),'callback_data':_0x934c08(0x1fe)},{'text':_0x934c08(0x257),'callback_data':_0x934c08(0x22d)},{'text':_0x934c08(0x1e0),'callback_data':_0x934c08(0x294)}]]}})[_0x934c08(0x163)](_0x4337d3=>{telegramError(_0x4337d3);}),tgBot['on']('callback_query',async _0x5ea1de=>{const _0x33dd21=_0x934c08,_0x2e7320=_0x5ea1de['data'],_0xd6379a=_0x5ea1de[_0x33dd21(0x129)];tgBot[_0x33dd21(0x184)](_0x5ea1de['id'])['then'](async()=>{const _0x2063b4=_0x33dd21;_0x2e7320==_0x2063b4(0x1fe)&&(updateSetting(_0x2063b4(0x245),_0x2063b4(0x1fe)),updateSetting(_0x2063b4(0x1dd),!![]),await tgBot[_0x2063b4(0x19f)](_0xd6379a[_0x2063b4(0x28f)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x2063b4(0x163)](_0x14b2ef=>{telegramError(_0x14b2ef);}));_0x2e7320==_0x2063b4(0x22d)&&(updateSetting(_0x2063b4(0x245),'alerts'),updateSetting(_0x2063b4(0x1dd),!![]),await tgBot[_0x2063b4(0x19f)](_0xd6379a[_0x2063b4(0x28f)]['id'],_0x2063b4(0x1bd))[_0x2063b4(0x163)](_0x5760b4=>{telegramError(_0x5760b4);}));_0x2e7320=='all'&&(updateSetting(_0x2063b4(0x245),'all'),updateSetting('telegramEnabled',!![]),await tgBot[_0x2063b4(0x19f)](_0xd6379a['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x2063b4(0x163)](_0x2d64c5=>{telegramError(_0x2d64c5);}));if(!settings[_0x2063b4(0x13d)])tgBot[_0x2063b4(0x19f)](_0xd6379a[_0x2063b4(0x28f)]['id'],_0x2063b4(0x229))[_0x2063b4(0x163)](_0x2b9885=>{telegramError(_0x2b9885);});}),tgBot['removeListener'](_0x33dd21(0x2a0));});}),tgBot[_0x20b76e(0x21e)](/\/status/,_0x4dbbb7=>{const _0x582404=_0x20b76e;if(!validateTelegram(_0x4dbbb7))return;const _0x2510ac=getBotsWithMode();let _0x336ad9=_0x582404(0x1cb);config['forEach'](_0x46c5c4=>{const _0x1cfa74=_0x582404,_0x4f31fe=_0x2510ac[_0x1cfa74(0x2a7)](_0x2c2218=>_0x2c2218[_0x1cfa74(0x1b0)]==_0x46c5c4['botID'])[_0x1cfa74(0x264)];_0x336ad9+=_0x1cfa74(0x228)+_0x46c5c4[_0x1cfa74(0x1b0)]+':\x20'+_0x46c5c4['status']+'\x20|\x20'+_0x4f31fe+'\x20|\x20'+_0x46c5c4[_0x1cfa74(0x1f7)]+'\x0a';}),_0x336ad9+='\x0a',_0x336ad9+=_0x582404(0x211),_0x336ad9+=!settings[_0x582404(0x1dd)]?_0x582404(0x159):'Notifications\x20enabled\x0a',_0x336ad9+=settings[_0x582404(0x1dd)]?settings[_0x582404(0x245)]=='all'?_0x582404(0x15a):_0x582404(0x1d5)+settings[_0x582404(0x245)]+_0x582404(0x2c5):'',tgBot[_0x582404(0x19f)](_0x4dbbb7[_0x582404(0x28f)]['id'],_0x336ad9,{'parse_mode':_0x582404(0x190)})[_0x582404(0x163)](_0x17829a=>{telegramError(_0x17829a);});}),tgBot[_0x20b76e(0x21e)](/\/restart/,_0xc30062=>{const _0x33d605=_0x20b76e;if(!validateTelegram(_0xc30062))return;tgBot[_0x33d605(0x24f)](_0x33d605(0x2a0));const _0x29b253=getEnabledBots();if(_0x29b253[_0x33d605(0x12e)]==0x0)tgBot[_0x33d605(0x19f)](_0xc30062[_0x33d605(0x28f)]['id'],_0x33d605(0x286))[_0x33d605(0x163)](_0x109371=>{telegramError(_0x109371);});else{if(_0x29b253[_0x33d605(0x12e)]>0x1)_0x29b253[_0x33d605(0x1fa)]({'botID':_0x33d605(0x294)});let _0x39f381=[],_0x1158eb=[];const _0xadbbad=_0x29b253[_0x33d605(0x12e)]%0x4==0x0||_0x29b253['length']%0x4==0x3||_0x29b253[_0x33d605(0x12e)]%0x3==0x1?0x4:0x3;let _0x47a941=0x0;_0x29b253[_0x33d605(0x1dc)]((_0x56594b,_0x3e9cfa)=>{const _0x4b55a0=_0x33d605;if(_0x3e9cfa%_0xadbbad==0x0)_0x1158eb=[];_0x1158eb[_0x4b55a0(0x1fa)]({'text':_0x56594b[_0x4b55a0(0x1b0)]==_0x4b55a0(0x294)?'All\x20bots':_0x4b55a0(0x228)+_0x56594b[_0x4b55a0(0x1b0)],'callback_data':_0x56594b[_0x4b55a0(0x1b0)]}),_0x3e9cfa%_0xadbbad==0x0&&(_0x39f381[_0x47a941]=_0x1158eb,_0x47a941++);}),tgBot[_0x33d605(0x19f)](_0xc30062[_0x33d605(0x28f)]['id'],_0x33d605(0x246),{'reply_markup':{'inline_keyboard':_0x39f381}})[_0x33d605(0x163)](_0x23ca95=>{telegramError(_0x23ca95);}),tgBot['on'](_0x33d605(0x2a0),async _0x1cf7d2=>{const _0x21df81=_0x33d605,_0x11b053=_0x1cf7d2['data'],_0x10c987=_0x1cf7d2[_0x21df81(0x129)];tgBot['answerCallbackQuery'](_0x1cf7d2['id'])['then'](async()=>{const _0x197fb7=_0x21df81;_0x11b053==_0x197fb7(0x294)?config[_0x197fb7(0x1dc)](_0x3936e8=>{const _0x5dd139=_0x197fb7;restartBot(_0x3936e8[_0x5dd139(0x1b0)]);}):restartBot(_0x11b053);}),tgBot[_0x21df81(0x24f)](_0x21df81(0x2a0));});}}),tgBot[_0x20b76e(0x21e)](/\/on/,_0x55815c=>{const _0x163459=_0x20b76e;if(!validateTelegram(_0x55815c))return;tgBot[_0x163459(0x24f)](_0x163459(0x2a0));const _0x4ed999=getDisabledBots();if(_0x4ed999[_0x163459(0x12e)]==0x0)tgBot[_0x163459(0x19f)](_0x55815c[_0x163459(0x28f)]['id'],_0x163459(0x244))[_0x163459(0x163)](_0x39e93f=>{telegramError(_0x39e93f);});else{if(_0x4ed999[_0x163459(0x12e)]>0x1)_0x4ed999[_0x163459(0x1fa)]({'botID':_0x163459(0x294)});let _0x47e68c=[],_0x3a9fc1=[];const _0xa51dfe=_0x4ed999[_0x163459(0x12e)]%0x4==0x0||_0x4ed999[_0x163459(0x12e)]%0x4==0x3||_0x4ed999[_0x163459(0x12e)]%0x3==0x1?0x4:0x3;let _0x3755e5=0x0;_0x4ed999[_0x163459(0x1dc)]((_0x394230,_0x534634)=>{const _0x312b9f=_0x163459;if(_0x534634%_0xa51dfe==0x0)_0x3a9fc1=[];_0x3a9fc1['push']({'text':_0x394230[_0x312b9f(0x1b0)]==_0x312b9f(0x294)?_0x312b9f(0x132):_0x312b9f(0x228)+_0x394230[_0x312b9f(0x1b0)],'callback_data':_0x394230[_0x312b9f(0x1b0)]}),_0x534634%_0xa51dfe==0x0&&(_0x47e68c[_0x3755e5]=_0x3a9fc1,_0x3755e5++);}),tgBot[_0x163459(0x19f)](_0x55815c[_0x163459(0x28f)]['id'],_0x163459(0x172),{'reply_markup':{'inline_keyboard':_0x47e68c}})[_0x163459(0x163)](_0x3e0047=>{telegramError(_0x3e0047);}),tgBot['on'](_0x163459(0x2a0),async _0x5c4814=>{const _0x4271d6=_0x163459,_0x1550c3=_0x5c4814['data'],_0xdf4537=_0x5c4814[_0x4271d6(0x129)];tgBot[_0x4271d6(0x184)](_0x5c4814['id'])[_0x4271d6(0x275)](async()=>{const _0x232364=_0x4271d6;_0x1550c3=='all'?(tgBot['sendMessage'](_0xdf4537[_0x232364(0x28f)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x232364(0x163)](_0x40fa1c=>{telegramError(_0x40fa1c);}),_0x4ed999['forEach'](_0x5bf06c=>{const _0x3b520b=_0x232364;if(_0x5bf06c[_0x3b520b(0x1b0)]!=_0x3b520b(0x294))toggleBot(_0x5bf06c['botID'],toggleStatus(_0x5bf06c[_0x3b520b(0x1b0)]),_0x3b520b(0x15b));})):(tgBot[_0x232364(0x19f)](_0xdf4537[_0x232364(0x28f)]['id'],_0x232364(0x28a)+_0x1550c3)[_0x232364(0x163)](_0x44ac73=>{telegramError(_0x44ac73);}),toggleBot(_0x1550c3,toggleStatus(_0x1550c3),_0x232364(0x15b)));}),tgBot[_0x4271d6(0x24f)](_0x4271d6(0x2a0));});}}),tgBot[_0x20b76e(0x21e)](/\/off/,_0x2266d2=>{const _0x509580=_0x20b76e;if(!validateTelegram(_0x2266d2))return;tgBot['removeListener'](_0x509580(0x2a0));const _0x2a3e68=getEnabledBots();if(_0x2a3e68[_0x509580(0x12e)]==0x0)tgBot['sendMessage'](_0x2266d2['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x3700da=>{telegramError(_0x3700da);});else{if(_0x2a3e68[_0x509580(0x12e)]>0x1)_0x2a3e68[_0x509580(0x1fa)]({'botID':_0x509580(0x294)});let _0x337577=[],_0x4020a0=[];const _0x1cabb7=_0x2a3e68[_0x509580(0x12e)]%0x4==0x0||_0x2a3e68['length']%0x4==0x3||_0x2a3e68['length']%0x3==0x1?0x4:0x3;let _0x416a4e=0x0;_0x2a3e68[_0x509580(0x1dc)]((_0x4db34e,_0x4d59ac)=>{const _0x2f767f=_0x509580;if(_0x4d59ac%_0x1cabb7==0x0)_0x4020a0=[];_0x4020a0[_0x2f767f(0x1fa)]({'text':_0x4db34e[_0x2f767f(0x1b0)]==_0x2f767f(0x294)?_0x2f767f(0x132):'Bot\x20'+_0x4db34e[_0x2f767f(0x1b0)],'callback_data':_0x4db34e[_0x2f767f(0x1b0)]}),_0x4d59ac%_0x1cabb7==0x0&&(_0x337577[_0x416a4e]=_0x4020a0,_0x416a4e++);}),tgBot[_0x509580(0x19f)](_0x2266d2['chat']['id'],_0x509580(0x26e),{'reply_markup':{'inline_keyboard':_0x337577}})['catch'](_0x14a32f=>{telegramError(_0x14a32f);}),tgBot['on'](_0x509580(0x2a0),async _0x4f354a=>{const _0x2ca18c=_0x509580,_0x23f325=_0x4f354a['data'],_0x4588c7=_0x4f354a[_0x2ca18c(0x129)];tgBot['answerCallbackQuery'](_0x4f354a['id'])['then'](async()=>{const _0x271c4f=_0x2ca18c;_0x23f325==_0x271c4f(0x294)?(tgBot[_0x271c4f(0x19f)](_0x4588c7[_0x271c4f(0x28f)]['id'],_0x271c4f(0x193))[_0x271c4f(0x163)](_0x345d92=>{telegramError(_0x345d92);}),_0x2a3e68['forEach'](_0x454a23=>{const _0x3a5a5c=_0x271c4f;if(_0x454a23[_0x3a5a5c(0x1b0)]!='all')toggleBot(_0x454a23[_0x3a5a5c(0x1b0)],toggleStatus(_0x454a23[_0x3a5a5c(0x1b0)]),_0x3a5a5c(0x15b));})):(tgBot[_0x271c4f(0x19f)](_0x4588c7[_0x271c4f(0x28f)]['id'],_0x271c4f(0x161)+_0x23f325)[_0x271c4f(0x163)](_0x5412a1=>{telegramError(_0x5412a1);}),toggleBot(_0x23f325,toggleStatus(_0x23f325),'stopped'));}),tgBot[_0x2ca18c(0x24f)](_0x2ca18c(0x2a0));});}}),tgBot[_0x20b76e(0x21e)](/\/portfolio/,_0x1aee31=>{const _0x4574cd=_0x20b76e;if(!validateTelegram(_0x1aee31))return;tgBot[_0x4574cd(0x24f)](_0x4574cd(0x2a0));const _0xbb69e4=getEnabledBots();if(_0xbb69e4[_0x4574cd(0x12e)]==0x0)tgBot[_0x4574cd(0x19f)](_0x1aee31[_0x4574cd(0x28f)]['id'],_0x4574cd(0x286))['catch'](_0x5bf67d=>{telegramError(_0x5bf67d);});else{if(_0xbb69e4[_0x4574cd(0x12e)]>0x1){let _0x546384=[],_0x41729f=[];const _0x329dd0=_0xbb69e4[_0x4574cd(0x12e)]%0x4==0x0||_0xbb69e4[_0x4574cd(0x12e)]%0x4==0x3||_0xbb69e4[_0x4574cd(0x12e)]%0x3==0x1?0x4:0x3;let _0x8ce113=0x0;_0xbb69e4[_0x4574cd(0x1dc)]((_0x2af4df,_0x49aacb)=>{const _0x2c6349=_0x4574cd;if(_0x49aacb%_0x329dd0==0x0)_0x41729f=[];_0x41729f[_0x2c6349(0x1fa)]({'text':_0x2c6349(0x228)+_0x2af4df[_0x2c6349(0x1b0)],'callback_data':_0x2af4df[_0x2c6349(0x1b0)]}),_0x49aacb%_0x329dd0==0x0&&(_0x546384[_0x8ce113]=_0x41729f,_0x8ce113++);}),tgBot['sendMessage'](_0x1aee31['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x546384}})[_0x4574cd(0x163)](_0x15ccf6=>{telegramError(_0x15ccf6);}),tgBot['on'](_0x4574cd(0x2a0),async _0x74d709=>{const _0x238450=_0x4574cd,_0x4d0b85=_0x74d709[_0x238450(0x2cb)],_0x3fd6f0=_0x74d709[_0x238450(0x129)];tgBot[_0x238450(0x184)](_0x74d709['id'])[_0x238450(0x275)](async()=>{const _0x380b9c=_0x238450;if(pid[_0x4d0b85])pid[_0x4d0b85]['send']({'function':_0x380b9c(0x1f3),'args':null});}),tgBot[_0x238450(0x24f)](_0x238450(0x2a0));});}else{const _0xe66d17=_0xbb69e4[0x0][_0x4574cd(0x1b0)];if(pid[_0xe66d17])pid[_0xe66d17][_0x4574cd(0x16b)]({'function':_0x4574cd(0x1f3),'args':null});}}}),tgBot[_0x20b76e(0x21e)](/\/update/,async _0x3874ca=>{const _0x5da836=_0x20b76e;if(!validateTelegram(_0x3874ca))return;tgBot[_0x5da836(0x24f)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x5da836(0x19f)](_0x3874ca[_0x5da836(0x28f)]['id'],_0x5da836(0x174))['catch'](_0x2e0256=>{telegramError(_0x2e0256);});else!validInstallation?tgBot['sendMessage'](_0x3874ca[_0x5da836(0x28f)]['id'],_0x5da836(0x2bc))['catch'](_0x4aab9b=>{telegramError(_0x4aab9b);}):(tgBot[_0x5da836(0x19f)](_0x3874ca[_0x5da836(0x28f)]['id'],_0x5da836(0x26a),{'reply_markup':{'inline_keyboard':[[{'text':_0x5da836(0x15e),'callback_data':_0x5da836(0x1e1)},{'text':'No','callback_data':'no'}]]}})[_0x5da836(0x163)](_0x4b7a52=>{telegramError(_0x4b7a52);}),tgBot['on'](_0x5da836(0x2a0),async _0x2deb7=>{const _0x1ce5e4=_0x5da836,_0x44b618=_0x2deb7['data'],_0x57c7be=_0x2deb7[_0x1ce5e4(0x129)];tgBot[_0x1ce5e4(0x184)](_0x2deb7['id'])[_0x1ce5e4(0x275)](async()=>{const _0x1a00e7=_0x1ce5e4;_0x44b618==_0x1a00e7(0x1e1)&&(await tgBot[_0x1a00e7(0x19f)](_0x57c7be[_0x1a00e7(0x28f)]['id'],_0x1a00e7(0x28c))[_0x1a00e7(0x163)](_0x30b12f=>{telegramError(_0x30b12f);}),updateBB());_0x44b618=='no'&&await tgBot[_0x1a00e7(0x19f)](_0x57c7be['chat']['id'],_0x1a00e7(0x16e))[_0x1a00e7(0x163)](_0x2122ba=>{telegramError(_0x2122ba);});if(!settings[_0x1a00e7(0x13d)])tgBot[_0x1a00e7(0x19f)](_0x57c7be['chat']['id'],_0x1a00e7(0x229))[_0x1a00e7(0x163)](_0x4caa34=>{telegramError(_0x4caa34);});}),tgBot['removeListener']('callback_query');}));}),tgBot['onText'](/\/toggle/,_0x19a242=>{const _0x4477a8=_0x20b76e;if(!validateTelegram(_0x19a242))return;tgBot[_0x4477a8(0x24f)](_0x4477a8(0x2a0));const _0x3d1dac=getBotsWithMode();if(_0x3d1dac[_0x4477a8(0x12e)]==0x0)tgBot[_0x4477a8(0x19f)](_0x19a242['chat']['id'],_0x4477a8(0x286))['catch'](_0x30d723=>{telegramError(_0x30d723);});else{let _0x581c99=[],_0x565507=[];const _0x34455f=0x2;let _0x26c98c=0x0;_0x3d1dac[_0x4477a8(0x1dc)]((_0xcfb8e1,_0x83dd2c)=>{const _0x4debfe=_0x4477a8;if(_0x83dd2c%_0x34455f==0x0)_0x565507=[];_0x565507[_0x4debfe(0x1fa)]({'text':_0x4debfe(0x228)+_0xcfb8e1[_0x4debfe(0x1b0)]+'\x20('+_0xcfb8e1['mode']+')','callback_data':_0xcfb8e1['botID']}),_0x83dd2c%_0x34455f==0x0&&(_0x581c99[_0x26c98c]=_0x565507,_0x26c98c++);}),tgBot[_0x4477a8(0x19f)](_0x19a242['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x581c99}})[_0x4477a8(0x163)](_0x3796b9=>{telegramError(_0x3796b9);}),tgBot['on'](_0x4477a8(0x2a0),async _0x24a59f=>{const _0xe47a6c=_0x4477a8,_0x3abe9b=_0x24a59f[_0xe47a6c(0x2cb)],_0x5e68cd=_0x24a59f[_0xe47a6c(0x129)];tgBot['answerCallbackQuery'](_0x24a59f['id'])[_0xe47a6c(0x275)](async()=>{const _0x255fc5=_0xe47a6c,_0x3f1365=_0x3d1dac[_0x255fc5(0x2a7)](_0x387f69=>_0x387f69['botID']==_0x3abe9b),_0x288761=_0x3f1365[_0x255fc5(0x264)]==_0x255fc5(0x231)?_0x255fc5(0x162):_0x255fc5(0x231);tgBot[_0x255fc5(0x19f)](_0x5e68cd[_0x255fc5(0x28f)]['id'],_0x255fc5(0x1af)+_0x3abe9b+_0x255fc5(0x23a)+_0x288761+_0x255fc5(0x199))[_0x255fc5(0x163)](_0x25ec42=>{telegramError(_0x25ec42);}),toggleBotMode(_0x3abe9b);}),tgBot[_0xe47a6c(0x24f)](_0xe47a6c(0x2a0));});}}),tgBot[_0x20b76e(0x21e)](/\/names/,_0x2df54c=>{const _0x31cb17=_0x20b76e;if(!validateTelegram(_0x2df54c))return;let _0xbe79f3='';config[_0x31cb17(0x1dc)](_0x4cb56e=>{const _0x3bce86=_0x31cb17;_0xbe79f3+=_0x3bce86(0x228)+_0x4cb56e['botID']+':\x20'+_0x4cb56e[_0x3bce86(0x240)]+'\x0a';}),tgBot[_0x31cb17(0x19f)](_0x2df54c[_0x31cb17(0x28f)]['id'],_0xbe79f3,{'parse_mode':_0x31cb17(0x190)})[_0x31cb17(0x163)](_0x3af561=>{telegramError(_0x3af561);});}),tgBot[_0x20b76e(0x21e)](/\/disable/,_0x1b767b=>{const _0x433296=_0x20b76e;if(!validateTelegram(_0x1b767b))return;tgBot[_0x433296(0x19f)](_0x1b767b[_0x433296(0x28f)]['id'],_0x433296(0x27e))[_0x433296(0x163)](_0x33c589=>{telegramError(_0x33c589);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x20b76e(0x21e)](/\/help/,_0x56438a=>{const _0x7ecb4=_0x20b76e;if(!validateTelegram(_0x56438a))return;tgBot[_0x7ecb4(0x19f)](_0x56438a[_0x7ecb4(0x28f)]['id'],_0x4fd8f9)[_0x7ecb4(0x163)](_0x2932b1=>{telegramError(_0x2932b1);});}),tgBot['on'](_0x20b76e(0x23b),_0x460c70=>{const _0x5bf03a=_0x20b76e;_0x460c70[_0x5bf03a(0x1a6)]()[_0x5bf03a(0x26c)](_0x5bf03a(0x153))&&(logger[_0x5bf03a(0x13b)](_0x5bf03a(0x263)),tgBot[_0x5bf03a(0x234)](),tgBot=null,io['to'](_0x5bf03a(0x166))[_0x5bf03a(0x147)](_0x5bf03a(0x1eb),_0x5bf03a(0x263)));}),process['once'](_0x20b76e(0x1f6),()=>{const _0x5931eb=_0x20b76e;if(tgBot)tgBot[_0x5931eb(0x234)]();process[_0x5931eb(0x1d9)](0x1);}),process['once']('SIGTERM',()=>{const _0x98ec92=_0x20b76e;if(tgBot)tgBot[_0x98ec92(0x234)]();process[_0x98ec92(0x1d9)](0x1);});}}function disableTelegram(){const _0x878546=_0xb9d65b;tgBot&&(tgBot[_0x878546(0x234)](),tgBot=null);}function sendTelegram(_0x49cfdd,_0x9e02ef){const _0x44d08c=_0xb9d65b;if(settings[_0x44d08c(0x1dd)]){if(settings[_0x44d08c(0x245)]==_0x44d08c(0x294)||(_0x9e02ef[_0x44d08c(0x276)]==_0x44d08c(0x270)||_0x9e02ef[_0x44d08c(0x276)]==_0x44d08c(0x254)||_0x9e02ef[_0x44d08c(0x276)]==_0x44d08c(0x2d4))&&settings[_0x44d08c(0x245)]==_0x44d08c(0x22d)||_0x9e02ef[_0x44d08c(0x276)]==_0x44d08c(0x1f5)&&settings[_0x44d08c(0x245)]==_0x44d08c(0x1fe)){if(tgBot&&settings[_0x44d08c(0x13d)]){if(_0x9e02ef['showname'])tgBot[_0x44d08c(0x19f)](settings[_0x44d08c(0x13d)],_0x9e02ef[_0x44d08c(0x240)]+_0x44d08c(0x2b4)+_0x9e02ef[_0x44d08c(0x158)])[_0x44d08c(0x163)](_0x49323c=>{telegramError(_0x49323c);});else tgBot[_0x44d08c(0x19f)](settings[_0x44d08c(0x13d)],_0x44d08c(0x228)+_0x49cfdd+'\x20>\x20'+_0x9e02ef[_0x44d08c(0x158)])['catch'](_0x1d9bb8=>{telegramError(_0x1d9bb8);});}}}}async function sendTelegramMsg(_0x596a39,_0x2dbd50=_0xb9d65b(0x190)){const _0x535200=_0xb9d65b;return settings[_0x535200(0x1dd)]&&tgBot&&settings[_0x535200(0x13d)]?(await tgBot[_0x535200(0x19f)](settings[_0x535200(0x13d)],_0x596a39,{'parse_mode':_0x2dbd50})[_0x535200(0x163)](_0x316e7d=>{telegramError(_0x316e7d);}),!![]):![];}function getDeviceWithIp(_0x683b0b){const _0x2f981d=_0xb9d65b;return devices[_0x2f981d(0x2a7)](_0x449c5d=>_0x449c5d['ip']===_0x683b0b);}function temporaryAccess2FA(_0x5226bd,_0x3df0a0){const _0x45ae6a=_0xb9d65b;let _0x48bbde=new Date(),_0x2f8a25=![];if(lastIpApproval){if(_0x48bbde-lastIpApproval<0x1388)_0x2f8a25=!![];}lastIpApproval=new Date();if(_0x2f8a25)return;tgBot&&settings[_0x45ae6a(0x13d)]&&(tgBot[_0x45ae6a(0x24f)](_0x45ae6a(0x2a0)),tgBot[_0x45ae6a(0x19f)](settings[_0x45ae6a(0x13d)],_0x45ae6a(0x2aa)+normalizeIP(_0x3df0a0)['show']+_0x45ae6a(0x17b),{'parse_mode':_0x45ae6a(0x190),'reply_markup':{'inline_keyboard':[[{'text':_0x45ae6a(0x295),'callback_data':'5'},{'text':_0x45ae6a(0x1ed),'callback_data':'15'},{'text':_0x45ae6a(0x1ee),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})['catch'](_0x48b8d6=>{telegramError(_0x48b8d6);}),tgBot['on'](_0x45ae6a(0x2a0),async _0x50725d=>{const _0x51f127=_0x45ae6a,_0x395ef7=_0x50725d[_0x51f127(0x2cb)],_0x5280ef=_0x50725d[_0x51f127(0x129)];tgBot[_0x51f127(0x184)](_0x50725d['id'])[_0x51f127(0x275)](async()=>{const _0x561a97=_0x51f127;devices[_0x5226bd][_0x561a97(0x1b1)]={'clientip':_0x3df0a0,'timestamp':new Date()[_0x561a97(0x274)](),'expiry':_0x395ef7},_0x395ef7!=_0x561a97(0x22e)?(await tgBot[_0x561a97(0x19f)](_0x5280ef['chat']['id'],_0x561a97(0x24b)+_0x395ef7+_0x561a97(0x248),{'parse_mode':_0x561a97(0x190)})[_0x561a97(0x163)](_0xe771db=>{telegramError(_0xe771db);}),io['to'](_0x5226bd)[_0x561a97(0x147)](_0x561a97(0x230),{'access':{'allow':![],'reason':_0x561a97(0x1ca),'token':null}})):(await tgBot[_0x561a97(0x19f)](_0x5280ef['chat']['id'],'Temporary\x20access\x20rejected')[_0x561a97(0x163)](_0x2a301b=>{telegramError(_0x2a301b);}),io['to'](_0x5226bd)[_0x561a97(0x147)](_0x561a97(0x230),{'access':{'allow':![],'reason':_0x561a97(0x20a),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x936b80,_0x8ccce5){const _0x327b88=_0xb9d65b;tgBot&&settings[_0x327b88(0x13d)]&&(tgBot[_0x327b88(0x24f)](_0x327b88(0x2a0)),tgBot['sendMessage'](settings[_0x327b88(0x13d)],_0x327b88(0x210)+normalizeIP(_0x8ccce5)[_0x327b88(0x1ff)]+_0x327b88(0x17b),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x327b88(0x165),'callback_data':loginExpiry},{'text':_0x327b88(0x22e),'callback_data':'reject'}]]}})[_0x327b88(0x163)](_0x16e2ff=>{telegramError(_0x16e2ff);}),tgBot['on'](_0x327b88(0x2a0),async _0x5d4f20=>{const _0x27bad0=_0x327b88,_0x11dec4=_0x5d4f20[_0x27bad0(0x2cb)],_0xddad57=_0x5d4f20[_0x27bad0(0x129)];tgBot[_0x27bad0(0x184)](_0x5d4f20['id'])[_0x27bad0(0x275)](async()=>{const _0x48acf2=_0x27bad0;devices[_0x936b80][_0x48acf2(0x1c3)]={'clientip':_0x8ccce5,'timestamp':new Date()['getTime'](),'expiry':_0x11dec4},_0x11dec4!=_0x48acf2(0x22e)?(await tgBot['sendMessage'](_0xddad57[_0x48acf2(0x28f)]['id'],_0x48acf2(0x1ef),{'parse_mode':'HTML'})[_0x48acf2(0x163)](_0x169b87=>{telegramError(_0x169b87);}),io['to'](_0x936b80)[_0x48acf2(0x147)](_0x48acf2(0x230),{'access':{'allow':![],'reason':_0x48acf2(0x1ca),'token':null}})):(await tgBot[_0x48acf2(0x19f)](_0xddad57['chat']['id'],_0x48acf2(0x14c))[_0x48acf2(0x163)](_0x4aec5e=>{telegramError(_0x4aec5e);}),io['to'](_0x936b80)['emit'](_0x48acf2(0x230),{'access':{'allow':![],'reason':_0x48acf2(0x29a),'token':null}}));}),tgBot[_0x27bad0(0x24f)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3f3161=_0xb9d65b;return dbConfig['get'](_0x3f3161(0x2b6))[_0x3f3161(0x17d)]('botID')[_0x3f3161(0x1a7)]({'status':_0x3f3161(0x227)})[_0x3f3161(0x154)]()||[];}function getDisabledBots(){const _0x2f8f1a=_0xb9d65b;return dbConfig[_0x2f8f1a(0x1c2)](_0x2f8f1a(0x2b6))['sortBy'](_0x2f8f1a(0x1b0))[_0x2f8f1a(0x1a7)]({'status':_0x2f8f1a(0x1b2)})[_0x2f8f1a(0x154)]()||[];}function getBotAttributes(_0x30c525){const _0x5dd94a=_0xb9d65b;let _0x2a27df={};const _0x3cd853=configpath+'bot-'+_0x30c525+'-config.json',_0x347fc6=fs[_0x5dd94a(0x2c9)](_0x3cd853);if(_0x347fc6){const _0x2e04b0=fs[_0x5dd94a(0x255)](_0x3cd853);try{const _0x170dd7=JSON[_0x5dd94a(0x213)](_0x2e04b0),_0x5df8d3=_0x170dd7?_0x170dd7[_0x5dd94a(0x2c2)][0x0][_0x5dd94a(0x145)]:![];_0x2a27df[_0x5dd94a(0x264)]=_0x5df8d3?'auto':_0x5dd94a(0x162),_0x2a27df['botname']=_0x170dd7?_0x170dd7[_0x5dd94a(0x2c2)][0x0][_0x5dd94a(0x240)]:_0x5dd94a(0x228)+_0x30c525;}catch(_0x57131a){_0x2a27df[_0x5dd94a(0x264)]='manual',_0x2a27df[_0x5dd94a(0x240)]='Bot\x20'+_0x30c525;}}else _0x2a27df[_0x5dd94a(0x264)]='manual',_0x2a27df[_0x5dd94a(0x240)]=_0x5dd94a(0x228)+_0x30c525;return _0x2a27df;}function getBotsWithMode(){const _0x1393c2=_0xb9d65b,_0x52389e=dbConfig['get'](_0x1393c2(0x2b6))['sortBy']('botID')['value']()||[];return _0x52389e[_0x1393c2(0x1dc)](_0x43d584=>{const _0x237a0f=_0x1393c2;let _0x32ef60=getBotAttributes(_0x43d584[_0x237a0f(0x1b0)]);_0x43d584[_0x237a0f(0x264)]=_0x32ef60['mode'];}),_0x52389e;}function getBotExchanges(){const _0x145bf4=_0xb9d65b;let _0x34ea86=[];const _0x3d4dd4=dbConfig['get'](_0x145bf4(0x2b6))[_0x145bf4(0x17d)](_0x145bf4(0x1b0))[_0x145bf4(0x154)]()||[];_0x3d4dd4[_0x145bf4(0x1dc)](_0x484d1c=>{const _0xcc546c=_0x145bf4;if(_0x484d1c[_0xcc546c(0x230)]==_0xcc546c(0x227)){const _0x15344b=configpath+_0xcc546c(0x217)+_0x484d1c[_0xcc546c(0x1b0)]+'-config.json',_0x392bea=fs['existsSync'](_0x15344b);let _0x2c9199;if(_0x392bea){const _0x1c7217=fs[_0xcc546c(0x255)](_0x15344b);try{const _0x108d0f=JSON[_0xcc546c(0x213)](_0x1c7217);_0x2c9199=_0x108d0f?_0x108d0f[_0xcc546c(0x2c2)][0x0]['exchange']:null;}catch(_0x45f8de){}}if(_0x2c9199)_0x34ea86['push'](_0x2c9199);}});const _0x80709a=[...new Set(_0x34ea86)][_0x145bf4(0x224)]();return _0x80709a;}async function initUser(){const _0x132435=_0xb9d65b;if(!settings['userid']){const _0x23c87d=uuidRandom();mixpanel['alias'](_0x23c87d),updateSetting(_0x132435(0x1be),_0x23c87d);}}async function initSecure(){const _0x380a65=_0xb9d65b;let _0x584023=getSecure();if(!_0x584023[_0x380a65(0x24d)](_0x380a65(0x2c3))){let _0x88dc57=await generateKeys();_0x584023[_0x380a65(0x13f)]=_0x88dc57['publicKey'],_0x584023[_0x380a65(0x142)]=_0x88dc57[_0x380a65(0x142)],_0x584023['secret']=crypto[_0x380a65(0x25e)](0x20)[_0x380a65(0x1a6)](_0x380a65(0x15d));;storeSecure(_0x584023);}}function getSettings(){const _0xc84fb4=_0xb9d65b;return dbSettings[_0xc84fb4(0x1c2)](_0xc84fb4(0x25a))[_0xc84fb4(0x154)]()||{};}function getSecure(){const _0xf31646=_0xb9d65b;return dbSecure[_0xf31646(0x1c2)](_0xf31646(0x1b3))[_0xf31646(0x154)]()||{};}function getBlacklist(){const _0x2a3b2b=_0xb9d65b;return dbSecure['get'](_0x2a3b2b(0x287))[_0x2a3b2b(0x154)]()||[];}function broadcastToBots(_0x5eeda3,_0x641078){const _0x5214c4=_0xb9d65b;config[_0x5214c4(0x1dc)](_0x3e230c=>{const _0x240ff9=_0x5214c4;if(_0x3e230c[_0x240ff9(0x230)]==_0x240ff9(0x227)&&_0x3e230c[_0x240ff9(0x1f7)]==_0x240ff9(0x188)){if(pid[_0x3e230c[_0x240ff9(0x1b0)]])pid[_0x3e230c['botID']]['send']({[_0x5eeda3]:_0x641078});}});}function storeSettings(_0x50bd89,_0xfddfa3=![]){const _0x3a634c=_0xb9d65b;_0x50bd89={...settings,..._0x50bd89};if(_0xfddfa3&&_0x50bd89['bbPassword']!=_0x3a634c(0x241)&&_0x50bd89['bbPassword']!=_0x3a634c(0x29e)&&_0x50bd89[_0x3a634c(0x179)]!=''){const _0x218ca0=crypt['decrypt'](secure[_0x3a634c(0x142)],_0x50bd89['bbPassword'])[_0x3a634c(0x129)][_0x3a634c(0x21a)]('@')[0x0],_0x1cb9b7=bcrypt[_0x3a634c(0x2bd)](_0x218ca0,saltRounds);_0x50bd89={..._0x50bd89,'bbPassword':_0x1cb9b7};}if(_0xfddfa3&&_0x50bd89[_0x3a634c(0x155)]!='************'&&_0x50bd89[_0x3a634c(0x155)]!='***'&&_0x50bd89[_0x3a634c(0x155)]!=''){const _0x217d2b=crypt['decrypt'](secure[_0x3a634c(0x142)],_0x50bd89[_0x3a634c(0x155)])['message'][_0x3a634c(0x21a)]('@')[0x0];_0x50bd89={..._0x50bd89,'telegramToken':_0x217d2b};}const _0x5561de=_0x50bd89[_0x3a634c(0x155)]!=_0x3a634c(0x241)&&_0x50bd89['telegramToken']!=settings['telegramToken']||_0x50bd89[_0x3a634c(0x14f)]!=settings['telegramUsername'],_0x306ac5=_0x50bd89['telegramToken']==''||_0x50bd89[_0x3a634c(0x14f)]=='';if(_0x5561de)_0x50bd89[_0x3a634c(0x245)]='all';for(const [_0x8cc1a2,_0x56cb5e]of Object[_0x3a634c(0x1a4)](_0x50bd89)){if(_0x8cc1a2==_0x3a634c(0x155)&&_0x56cb5e==_0x3a634c(0x241)){_0x50bd89['telegramToken']=settings[_0x3a634c(0x155)];continue;};if(_0x8cc1a2==_0x3a634c(0x179)&&_0x56cb5e=='************'){_0x50bd89[_0x3a634c(0x179)]=settings[_0x3a634c(0x179)];continue;};dbSettings[_0x3a634c(0x157)](_0x3a634c(0x13a)+_0x8cc1a2,_0x56cb5e)[_0x3a634c(0x18c)]();}settings=_0x50bd89,io['to'](_0x3a634c(0x166))[_0x3a634c(0x147)]('settings',cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x5561de&&!_0x306ac5)initTelegram();if(_0x5561de&&_0x306ac5)disableTelegram();getAllClients()[_0x3a634c(0x1dc)](_0x5a76a2=>{const _0xd5bf6b=_0x3a634c;getSocket(_0x5a76a2['id'])[_0xd5bf6b(0x147)](_0xd5bf6b(0x230),{'access':{'allow':![],'reason':_0xd5bf6b(0x1ca),'token':null}});});}function updateSetting(_0x4705b3,_0x463365){const _0x1f7f28=_0xb9d65b;dbSettings[_0x1f7f28(0x157)](_0x1f7f28(0x13a)+_0x4705b3,_0x463365)[_0x1f7f28(0x18c)](),settings=getSettings(),io['to'](_0x1f7f28(0x166))['emit'](_0x1f7f28(0x25a),cleanSettings());}function storeSecure(_0x3dd7ca){const _0x3199bb=_0xb9d65b;dbSecure[_0x3199bb(0x1c2)]('secure')[_0x3199bb(0x1fa)](_0x3dd7ca)[_0x3199bb(0x18c)](),secure=_0x3dd7ca;}function addBlacklist(_0x4ab418){const _0x4bf0d2=_0xb9d65b;cleanBlacklist();let _0x578fd8;devices[_0x4ab418][_0x4bf0d2(0x1b1)]?_0x578fd8=Math[_0x4bf0d2(0x1fc)](devices[_0x4ab418][_0x4bf0d2(0x1b1)][_0x4bf0d2(0x2bb)],loginExpiry):_0x578fd8=loginExpiry,dbSecure['get'](_0x4bf0d2(0x287))[_0x4bf0d2(0x1fa)]({'expiry':new Date()[_0x4bf0d2(0x274)]()+_0x578fd8*0x3c*0x3e8,'token':devices[_0x4ab418][_0x4bf0d2(0x1b6)][_0x4bf0d2(0x2a6)]})[_0x4bf0d2(0x18c)](),blacklist=dbSecure['get'](_0x4bf0d2(0x287))[_0x4bf0d2(0x154)]();}function cleanBlacklist(){const _0x2bbc4e=_0xb9d65b;let _0x298a7b=dbSecure[_0x2bbc4e(0x1c2)](_0x2bbc4e(0x287))[_0x2bbc4e(0x280)]()[_0x2bbc4e(0x154)](),_0x2400ab=new Date()[_0x2bbc4e(0x274)]();_0x298a7b['forEach'](_0x12dbc1=>{const _0x17ca81=_0x2bbc4e;_0x12dbc1['expiry']<_0x2400ab&&dbSecure[_0x17ca81(0x1c2)](_0x17ca81(0x287))[_0x17ca81(0x290)]({'expiry':_0x12dbc1[_0x17ca81(0x2bb)]})[_0x17ca81(0x18c)]();});}function initStates(){let _0x1ccda2=getConfiguration();_0x1ccda2['forEach'](_0x23926f=>{const _0x1cfeee=_0x4f79;_0x23926f['live']=_0x1cfeee(0x15b);}),storeConfiguration(_0x1ccda2);}function onKeys(){const _0x19a884=new RSA();return new Promise(_0x44ae20=>{const _0x3392fa=_0x4f79;_0x19a884[_0x3392fa(0x209)]()['then'](_0x2d7e76=>{_0x44ae20(_0x2d7e76);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xe7c7e6=_0xb9d65b;let _0x26b038=getSettings(),_0x2ef156=![];!_0x26b038['hasOwnProperty'](_0xe7c7e6(0x20e))&&(_0x26b038['lastmsgtelegram']=0x0,_0x2ef156=!![]);!_0x26b038[_0xe7c7e6(0x24d)]('lastmsgemitted')&&(_0x26b038[_0xe7c7e6(0x14b)]=0x0,_0x2ef156=!![]);!_0x26b038[_0xe7c7e6(0x24d)]('latestversion')&&(_0x26b038[_0xe7c7e6(0x26b)]=_0xe7c7e6(0x2a8),_0x2ef156=!![]);if(_0x2ef156)storeSettings(_0x26b038);}function storeConfiguration(_0x7f944c){const _0x154e8f=_0xb9d65b;dbConfig[_0x154e8f(0x1c2)](_0x154e8f(0x2b6))[_0x154e8f(0x290)]()[_0x154e8f(0x18c)](),_0x7f944c['forEach'](_0x2bdd22=>{delete _0x2bdd22['mode'];}),dbConfig['get'](_0x154e8f(0x2b6))[_0x154e8f(0x1fa)](..._0x7f944c)[_0x154e8f(0x18c)](),config=_0x7f944c;}function resetPassword(){const _0xdf6e4b=_0xb9d65b;tgBot&&settings['telegramChatId']&&(tgBot[_0xdf6e4b(0x24f)](_0xdf6e4b(0x2a0)),tgBot[_0xdf6e4b(0x19f)](settings[_0xdf6e4b(0x13d)],_0xdf6e4b(0x127),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0xdf6e4b(0x1e1)},{'text':'no','callback_data':'no'}]]}})[_0xdf6e4b(0x163)](_0x2750bb=>{telegramError(_0x2750bb);}),tgBot['on']('callback_query',async _0x46c8fb=>{const _0x661ba3=_0xdf6e4b,_0x53be19=_0x46c8fb[_0x661ba3(0x2cb)],_0x2c5bc1=_0x46c8fb[_0x661ba3(0x129)];tgBot['answerCallbackQuery'](_0x46c8fb['id'])[_0x661ba3(0x275)](async()=>{const _0x1d7fbc=_0x661ba3;if(_0x53be19!='no'){const _0x4b1533=0xf,_0x546e1d=_0x1d7fbc(0x20d),_0x1fcd31=Array[_0x1d7fbc(0x185)](crypto['randomFillSync'](new Uint32Array(_0x4b1533)))[_0x1d7fbc(0x205)](_0x1aa8b0=>_0x546e1d[_0x1aa8b0%_0x546e1d[_0x1d7fbc(0x12e)]])[_0x1d7fbc(0x168)](''),_0x20abcc=bcrypt[_0x1d7fbc(0x2bd)](_0x1fcd31,saltRounds);storeSettings({'bbPassword':_0x20abcc}),await tgBot[_0x1d7fbc(0x19f)](_0x2c5bc1['chat']['id'],_0x1d7fbc(0x146)+_0x1fcd31,{'parse_mode':_0x1d7fbc(0x190)})[_0x1d7fbc(0x163)](_0x4177a5=>{telegramError(_0x4177a5);});}else await tgBot['sendMessage'](_0x2c5bc1['chat']['id'],_0x1d7fbc(0x1a8))[_0x1d7fbc(0x163)](_0x4ea459=>{telegramError(_0x4ea459);});}),tgBot[_0x661ba3(0x24f)]('callback_query');}));}async function confirmRestore(_0x6d1082,_0x4bd74a){const _0x4db5d8=_0xb9d65b;tgBot&&settings[_0x4db5d8(0x13d)]&&(tgBot[_0x4db5d8(0x24f)](_0x4db5d8(0x2a0)),await tgBot[_0x4db5d8(0x19f)](settings['telegramChatId'],_0x4db5d8(0x14e),{'parse_mode':_0x4db5d8(0x190),'reply_markup':{'inline_keyboard':[[{'text':_0x4db5d8(0x1e1),'callback_data':_0x4db5d8(0x1e1)},{'text':'no','callback_data':'no'}]]}})[_0x4db5d8(0x163)](_0x387e40=>{telegramError(_0x387e40);}),tgBot['on'](_0x4db5d8(0x2a0),async _0x3c6352=>{const _0x7d4486=_0x4db5d8,_0x3810f7=_0x3c6352['data'],_0x2be1db=_0x3c6352[_0x7d4486(0x129)];tgBot[_0x7d4486(0x184)](_0x3c6352['id'])[_0x7d4486(0x275)](async()=>{const _0x4f7df6=_0x7d4486;_0x3810f7==_0x4f7df6(0x1e1)?(await tgBot[_0x4f7df6(0x19f)](_0x2be1db[_0x4f7df6(0x28f)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x4f7df6(0x190)})[_0x4f7df6(0x163)](_0x13d232=>{telegramError(_0x13d232);}),unzipFile(_0x6d1082,_0x4bd74a)):await tgBot[_0x4f7df6(0x19f)](_0x2be1db[_0x4f7df6(0x28f)]['id'],'Restore\x20process\x20aborted')['catch'](_0x4509b0=>{telegramError(_0x4509b0);});}),tgBot[_0x7d4486(0x24f)](_0x7d4486(0x2a0));}));}function getServerTime(){const _0x504a60=_0xb9d65b,_0x4a2e80=new Date();return _0x4a2e80[_0x504a60(0x27b)]()+'/'+(_0x4a2e80[_0x504a60(0x267)]()+0x1)[_0x504a60(0x1a6)]()[_0x504a60(0x182)](0x2,'0')+'/'+_0x4a2e80[_0x504a60(0x2c1)]()[_0x504a60(0x1a6)]()[_0x504a60(0x182)](0x2,'0')+'\x20'+_0x4a2e80[_0x504a60(0x29f)]()[_0x504a60(0x1a6)]()['padStart'](0x2,'0')+':'+_0x4a2e80[_0x504a60(0x2ce)]()[_0x504a60(0x1a6)]()['padStart'](0x2,'0')+':'+_0x4a2e80[_0x504a60(0x22f)]()[_0x504a60(0x1a6)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4a1050=_0xb9d65b,_0x294a4b=shiftedTime();return _0x294a4b[_0x4a1050(0x27b)]()+'/'+(_0x294a4b[_0x4a1050(0x267)]()+0x1)[_0x4a1050(0x1a6)]()['padStart'](0x2,'0')+'/'+_0x294a4b[_0x4a1050(0x2c1)]()[_0x4a1050(0x1a6)]()[_0x4a1050(0x182)](0x2,'0')+'\x20'+_0x294a4b[_0x4a1050(0x29f)]()[_0x4a1050(0x1a6)]()[_0x4a1050(0x182)](0x2,'0')+':'+_0x294a4b[_0x4a1050(0x2ce)]()[_0x4a1050(0x1a6)]()[_0x4a1050(0x182)](0x2,'0')+':'+_0x294a4b[_0x4a1050(0x22f)]()['toString']()['padStart'](0x2,'0');}function _0x3ec7(){const _0x2f309d=['settings.','full','8FaETnp','telegramChatId','/output-000.log','publicKey','username','Unauthorized\x20attempt\x20to\x20download\x20','privateKey','temp/','*$1*','headless','Password\x20has\x20been\x20reset\x20to:\x20','emit','createWriteStream','sha256','1381442jQXloj','lastmsgemitted','Login\x20rejected','match','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','telegramUsername','telegram','rmSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','404\x20Not\x20Found','value','telegramToken','util','set','event','Notifications\x20disabled\x0a','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','stopped','version','hex','Yes','readdirSync','socket.io','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','manual','catch','store-headless','accept','botmanager','login\x20token\x20valid','join','RSA-OAEP','NTBA_FIX_319','send','temporaryAccessAllowed','output-001.log','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unauthorized\x20attempt\x20to\x20get\x20messages','stringify','restarting\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','::1','Your\x20installation\x20is\x20already\x20up\x20to\x20date','isValid','referer','hybrid-crypto-js','toggle-bot-mode','bbPassword','3000','</b>\x20?','$1_$2_$3','sortBy','disconnect','User\x20has\x20been\x20validated','restart','yargs/yargs','padStart','listen','answerCallbackQuery','from','whitelist','getStartingBalances','running','timestamp','Orders','Invalid\x20authentication\x20token\x20(2)','write','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','bbUsername','File\x20uploaded','HTML','get-portfolio','/disable\x20-\x20disable\x20notifications\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','::ffff:127.0.0.1','updatebotmanager','\x20(1)','defaults','/names\x20-\x20show\x20bot\x20names\x0a','\x20mode','exec','node-telegram-bot-api','add',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','6ptVqxC','sendMessage','express','writeFileSync','jsonwebtoken','1GHyVyJ','entries','starting\x20bot\x20|\x20Bot\x20','toString','filter','Password\x20reset\x20rejected','fork','static',':\x20Bot\x20Mgr\x20>\x20','user','timeshift','update-bot','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','botID','telegramIpApproval','disabled','secure','bb-settings.json','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','access','store-configuration','number','index.html','2FA\x20login\x20required','/enable\x20-\x20enable\x20notifications\x0a','logged\x20out','Ok,\x20will\x20send\x20alert\x20notifications\x20only','userid','.zip','-results.json','log','get','telegram2FaApproval','build2','bb-secure.json','Notifications\x20enabled','temporary\x20token\x20generated','bb/','slice','reload','<b>Balance\x20Bot\x20Status:</b>\x0a','reason','mixpanel','logs','No\x20authentication\x20token','27rrRlkn','kill','-performance.json','logs/','bbvNew','Notifications\x20types:\x20','remoteAddress','backupfile','2FA','exit','verify','confirm-message','forEach','telegramEnabled','store','copyFileSync','All','yes','path','6086336kQSWIO','sendFile','title','(((.+)+)+)+$','storeHeadless','4727570NZUGYh','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','clientip','notification','RSA','15\x20min','30\x20min','Login\x20accepted','auth','whitelistEnabled','Crypt','sendPortfolioTelegram','tkn','order','SIGINT','live','output-002.log','Unauthorized\x20attempt\x20to\x20show\x20configuration','push','starting\x20new\x20bot\x20|\x20Bot\x20','max','toIPv4Address','orders','show','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','connected','/off\x20-\x20stop\x20bot(s)\x0a','map','Invalid\x20authentication\x20token\x20(1)','request','name','generateKeyPairAsync','temporary\x20access\x20rejected','function','get-messages','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','lastmsgtelegram','placeOrder','Allow\x20login\x20from\x20IP\x20address\x20<b>','<b>Telegram\x20Bot\x20Status:</b>\x0a','port','parse','f2aRequired','axios','post','bot-','127.0.0.1','Unauthorized\x20attempt\x20to\x20confirm\x20message','split','generate','invalid\x20credentials','storeConfiguration','onText','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','encryptedUuid','cancel-loading','apply','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','sort','reset-password','logout','enabled','Bot\x20','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','getPortfolio','args','delete-alerts','alerts','reject','getSeconds','status','auto','Failed\x20to\x20download\x20','\x20(2)','stopPolling','access\x20timeout',',\x20must\x20be\x20a\x204\x20digit\x20number','server','11820599aIamaJ','bbvReceive','\x20to\x20','polling_error','unlinkSync','/restart\x20-\x20restart\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','Unauthorized\x20attempt\x20to\x20delete\x20alerts','botname','************','simple','Markdown','All\x20bots\x20running\x20right\x20now','telegramEvents','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','socket','\x20minutes','apiKey','replace','Access\x20enabled\x20for\x20','stop','hasOwnProperty','isIPv4MappedAddress','removeListener','handshake','any','inherit','deleteHistoryAlerts','warning','readFileSync','format','Alerts','createServer','uuid','settings','update-bb','version.json','/:bot/configuration','randomBytes','bot.js','config/','login\x20required','3478998LaRdsp','Invalid\x20Telegram\x20token','mode','place-order','537250rOdGsX','getMonth','telegrammsg','delete-bot','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','latestversion','includes','password','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','login','error','/:bot/history','pidExpireLogin','ipaddr.js','getTime','then','type','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20get\x20portfolio','test','build','getFullYear','Server','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Notifications\x20disabled','size','cloneDeep','assign','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','graphql-request','deleted\x20Bot\x20','keys','No\x20bots\x20running\x20right\x20now','blacklist','binary','zip/','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','mkdirSync','Starting\x20Balance\x20Bot\x20update','sockets','Unauthorized\x20attempt\x20to\x20update\x20bot','chat','remove','login\x20token\x20generated','argv','new','all','5\x20min','decrypt','/:bot/coins','2FA\x20login\x20token\x20generated','node-zip','2FA\x20login\x20rejected','started','loginRequired','lowdb','***','getHours','callback_query','-config.json','1000','/help\x20-\x20show\x20available\x20commands\x0a','isDirectory','showConfig','token','find','0.0.0','DEFLATE','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','emitHistory','52282175IPUSAq','constructor','backup','headers','pidRefreshToken','Unauthorized\x20attempt\x20to\x20log\x20out','files','connection','\x20>\x20','use','bots','temporary\x20access\x20not\x20allowed','-----------------------------------------------------------------------------------','/:bot','/on\x20-\x20start\x20bot(s)\x0a','expiry','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','hashSync','messages','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','getDate','bot','secret','2FA\x20required','\x20only\x0a','sign','\x20|\x20','crypto','existsSync','https://api.ipify.org?format=json','data','toIPv4MappedAddress','temporary\x20access\x20timeout','getMinutes','login\x20not\x20required','ipv6','track','api-eu.mixpanel.com','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','success','cancelLoading','disabled\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','-events.json','message','Unauthorized\x20attempt\x20to\x20store\x20configuration','_data','error\x20while\x20deleting\x20config\x20files:\x20','new-disabled','length','/status\x20-\x20show\x20bot(s)\x20status\x0a','removeAllListeners','Invalid\x20IP\x20address','All\x20bots','initclient','Bot\x20Mgr\x20>\x20','/:bot/performance','env','bb-config.json','express-fileupload','allow'];_0x3ec7=function(){return _0x2f309d;};return _0x3ec7();}function shiftedTime(){const _0x5307c7=_0xb9d65b,_0xa1e3f8=new Date();let _0x328e3e=_0xa1e3f8;if(settings[_0x5307c7(0x1ad)]&&settings[_0x5307c7(0x1ad)]!==0x0)_0x328e3e=fns[_0x5307c7(0x19c)](_0xa1e3f8,{'hours':settings[_0x5307c7(0x1ad)]});return _0x328e3e;}function startScheduler(){const _0x15a4d2=new Date()['getUTCHours'](),_0x515c7e=shiftedTime()['getHours']();_0x515c7e==0x4&&backupConfigFiles();_0x515c7e==0x0&&rotateLogFiles();_0x15a4d2%0x6==0x0&&triggerAnalytics();_0x15a4d2%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function _0x4f79(_0x5be543,_0x5d6b52){const _0x27fa07=_0x3ec7();return _0x4f79=function(_0x2cc766,_0x569bc4){_0x2cc766=_0x2cc766-0x125;let _0x3ec7d6=_0x27fa07[_0x2cc766];return _0x3ec7d6;},_0x4f79(_0x5be543,_0x5d6b52);}async function backupConfigFiles(){const _0xbba51d=_0xb9d65b;fs[_0xbba51d(0x15f)](configpath,{'withFileTypes':!![]})[_0xbba51d(0x1dc)](_0x5e3910=>{const _0xbd9442=_0xbba51d;if(!_0x5e3910[_0xbd9442(0x2a4)]())fs['copyFileSync'](configpath+_0x5e3910[_0xbd9442(0x208)],configbackuppath+_0x5e3910[_0xbd9442(0x208)]);});}function rotateLogFiles(){const _0x229d03=_0xb9d65b,_0x4964c6=fs['statSync'](logspath+'output-000.log'),_0x5824b7=_0x4964c6[_0x229d03(0x27f)]/0x400;if(_0x5824b7>0x32){let _0x16e082=fs[_0x229d03(0x15f)](logspath,{'withFileTypes':!![]});_0x16e082[_0x229d03(0x224)]((_0x4d3cc7,_0x1cbf14)=>_0x4d3cc7[_0x229d03(0x208)]<_0x1cbf14['name']?0x1:_0x1cbf14[_0x229d03(0x208)]<_0x4d3cc7[_0x229d03(0x208)]?-0x1:0x0),_0x16e082[_0x229d03(0x1dc)](_0x169037=>{const _0x408e6f=_0x229d03;if(_0x169037['name']==_0x408e6f(0x1f8))fs[_0x408e6f(0x1df)](logspath+_0x169037[_0x408e6f(0x208)],logspath+'output-003.log');if(_0x169037[_0x408e6f(0x208)]==_0x408e6f(0x16d))fs[_0x408e6f(0x1df)](logspath+_0x169037[_0x408e6f(0x208)],logspath+_0x408e6f(0x1f8));_0x169037[_0x408e6f(0x208)]=='output-000.log'&&(fs[_0x408e6f(0x1df)](logspath+_0x169037[_0x408e6f(0x208)],logspath+_0x408e6f(0x16d)),fs[_0x408e6f(0x1a1)](logspath+_0x169037[_0x408e6f(0x208)],''));});}}async function zipFiles(_0x5784d5){const _0x15537b=_0xb9d65b;let _0x35e3b3;if(_0x5784d5==_0x15537b(0x1ce))_0x35e3b3=logspath;if(_0x5784d5==_0x15537b(0x2ae))_0x35e3b3=configpath;let _0x526f1c=fs[_0x15537b(0x15f)](_0x35e3b3,{'withFileTypes':!![]});const _0x5113b7=new require(_0x15537b(0x299))();_0x526f1c[_0x15537b(0x1dc)](_0x5036b3=>{const _0x845596=_0x15537b;if(!_0x5036b3[_0x845596(0x2a4)]()){let _0x18f6f8=fs[_0x845596(0x255)](_0x35e3b3+_0x5036b3['name']);const _0x473aa4=/^bot-[0-9]{3}-config.json$/,_0x256784=_0x473aa4[_0x845596(0x279)](_0x5036b3['name']);if(_0x256784){const _0x1eef8f=JSON['parse'](_0x18f6f8);_0x1eef8f[_0x845596(0x2c2)][0x0][_0x845596(0x249)]=_0x845596(0x29e),_0x1eef8f[_0x845596(0x2c2)][0x0]['apiSecret']='***',_0x18f6f8=JSON[_0x845596(0x170)](_0x1eef8f,null,0x2);}if(_0x5036b3[_0x845596(0x208)]==_0x845596(0x1b4)){const _0x306dd8=JSON[_0x845596(0x213)](_0x18f6f8);if(_0x306dd8[_0x845596(0x25a)][_0x845596(0x29c)])_0x306dd8[_0x845596(0x25a)][_0x845596(0x29c)]=![];if(_0x306dd8['settings'][_0x845596(0x179)])_0x306dd8[_0x845596(0x25a)][_0x845596(0x179)]='***';if(_0x306dd8[_0x845596(0x25a)]['telegramToken'])_0x306dd8[_0x845596(0x25a)][_0x845596(0x155)]=_0x845596(0x29e);if(_0x306dd8[_0x845596(0x25a)]['telegramChatId'])_0x306dd8[_0x845596(0x25a)][_0x845596(0x13d)]=null;_0x18f6f8=JSON[_0x845596(0x170)](_0x306dd8,null,0x2);}if(_0x5036b3[_0x845596(0x208)]!='bb-secure.json')_0x5113b7['file'](_0x5036b3['name'],_0x18f6f8);}});const _0x36eb99=_0x5113b7[_0x15537b(0x21b)]({'base64':![],'compression':_0x15537b(0x2a9)});fs[_0x15537b(0x1a1)](zippath+(_0x5784d5+_0x15537b(0x1bf)),_0x36eb99,_0x15537b(0x288));}async function unzipFile(_0x15a371,_0x2d8057){const _0x680b9b=_0xb9d65b;await backupConfigFiles(),fs[_0x680b9b(0x15f)](configpath,{'withFileTypes':!![]})['forEach'](_0x1a71c8=>{const _0x44a612=_0x680b9b;if(!_0x1a71c8['isDirectory']())fs[_0x44a612(0x151)](configpath+_0x1a71c8['name']);});const _0x2f9292=fs[_0x680b9b(0x255)](_0x15a371+_0x2d8057,_0x680b9b(0x288)),_0x171ff9=new require(_0x680b9b(0x299))(_0x2f9292,{'base64':![],'checkCRC32':!![]});Object[_0x680b9b(0x285)](_0x171ff9[_0x680b9b(0x2b2)])[_0x680b9b(0x1dc)](_0x388bb8=>{const _0x29f764=_0x680b9b,_0xce4629=_0x171ff9[_0x29f764(0x2b2)][_0x388bb8];fs[_0x29f764(0x1a1)](configpath+_0xce4629[_0x29f764(0x208)],_0xce4629[_0x29f764(0x12b)]);}),fs[_0x680b9b(0x15f)](temppath,{'withFileTypes':!![]})[_0x680b9b(0x1dc)](_0x1e2521=>{const _0x26f9a9=_0x680b9b;if(!_0x1e2521['isDirectory']())fs[_0x26f9a9(0x151)](temppath+_0x1e2521[_0x26f9a9(0x208)]);}),process['send']({'restore':!![]},_0x85fc47=>{});}async function getPublicIp(){const _0x303a2a=_0xb9d65b;try{const _0x188078=await axios[_0x303a2a(0x1c2)](_0x303a2a(0x2ca));publicip=_0x188078['data']['ip'];}catch(_0x398e4d){}}async function triggerAnalytics(){const _0x41c0eb=_0xb9d65b;if(!publicip)await getPublicIp();const _0x188cd3=getBotsWithMode();let _0x20946c=0x0;_0x188cd3[_0x41c0eb(0x1dc)](_0xff82d0=>{const _0x22bcbf=_0x41c0eb;if(_0xff82d0['status']===_0x22bcbf(0x227))_0x20946c++;});const _0x23759b=getBotExchanges();mixpanel[_0x41c0eb(0x2d1)](_0x41c0eb(0x27c),{'distinct_id':settings[_0x41c0eb(0x1be)],'ip':publicip,'version':serverversion,'numbots':_0x188cd3['length'],'numbotsenabled':_0x20946c,'exchanges':_0x23759b});}async function getMessages(){const _0x5d2b03=_0xb9d65b,_0x3ab677='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x45b8b7=new GraphQLClient(_0x3ab677),_0x83105d={'authorization':_0x5d2b03(0x18d)},_0x5f4702=serverversion['split']('.'),_0x2b9433=_0x5f4702[0x0]+'.'+_0x5f4702[0x1],_0x1004ba=Math['min'](settings[_0x5d2b03(0x20e)],settings[_0x5d2b03(0x14b)]),_0x1b208e={'last':parseInt(_0x1004ba),'bbm':_0x2b9433},_0x39edd5=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3ce75f;try{_0x3ce75f=await _0x45b8b7[_0x5d2b03(0x207)](_0x39edd5,_0x1b208e,_0x83105d);}catch(_0x483cbc){}if(_0x3ce75f&&_0x3ce75f[_0x5d2b03(0x2be)]){let _0x5b1bb4=settings['lastmsgtelegram'];newMessages=[];for(const _0x5ad2ba of _0x3ce75f[_0x5d2b03(0x2be)]){newMessages[_0x5d2b03(0x1fa)](_0x5ad2ba);if(_0x5ad2ba[_0x5d2b03(0x1d4)])updateSetting('latestversion',_0x5ad2ba[_0x5d2b03(0x1d4)]);let _0x29a27a=_0x5ad2ba[_0x5d2b03(0x1d4)]?serverversion>=_0x5ad2ba[_0x5d2b03(0x1d4)]:![];if(!_0x29a27a&&_0x5ad2ba['number']>_0x5b1bb4){if(_0x5ad2ba[_0x5d2b03(0x239)]===_0x5d2b03(0x251)||serverversion['startsWith'](_0x5ad2ba['bbvReceive'])){let _0x38eadc=''+_0x5ad2ba[_0x5d2b03(0x1e5)]+'\x0a\x0a'+_0x5ad2ba[_0x5d2b03(0x129)];const _0x2557c6=await sendTelegramMsg(toTelegramMarkdown(_0x38eadc),_0x5d2b03(0x243));if(_0x2557c6)_0x5b1bb4=_0x5ad2ba[_0x5d2b03(0x1b8)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x5d2b03(0x20e),_0x5b1bb4),emitMessages();}}function emitMessages(){const _0x7be347=_0xb9d65b,_0x3e2777=settings[_0x7be347(0x14b)];let _0x407f3c=[];newMessages[_0x7be347(0x1dc)](_0x142e12=>{const _0x4df260=_0x7be347;_0x142e12[_0x4df260(0x1b8)]>_0x3e2777&&_0x407f3c['push'](_0x142e12);}),_0x407f3c[_0x7be347(0x12e)]>0x0&&getAllClients()[_0x7be347(0x1dc)](_0x44d8a7=>{const _0xec7de8=_0x7be347;getSocket(_0x44d8a7['id'])[_0xec7de8(0x147)]('message',_0x407f3c);});}function confirmMessage(_0x2b2020){const _0x5743ba=_0xb9d65b;updateSetting(_0x5743ba(0x14b),Number(_0x2b2020));}function isNewerVersion(_0x2af398,_0x48a7e7){const _0x3569f9=_0xb9d65b,_0x51a3f6=_0x48a7e7[_0x3569f9(0x21a)]('.'),_0x5b3134=_0x2af398['split']('.');for(var _0x58cd74=0x0;_0x58cd74<_0x5b3134['length'];_0x58cd74++){const _0x19fe61=~~_0x5b3134[_0x58cd74],_0x31fb9b=~~_0x51a3f6[_0x58cd74];if(_0x19fe61>_0x31fb9b)return!![];if(_0x19fe61<_0x31fb9b)return![];}return![];}function toTelegramMarkdown(_0x4133f2){const _0x4105cc=_0xb9d65b,_0x2a9980=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4da15a=/\*{2}(.+?)\*{2}/gim;return _0x4133f2=_0x4133f2[_0x4105cc(0x24a)](_0x2a9980,_0x4105cc(0x17c))['replace'](_0x4da15a,_0x4105cc(0x144)),_0x4133f2;}async function validateConfigFile(){const _0xadede5=_0xb9d65b,_0x13f6a3=dbConfig[_0xadede5(0x1c2)](_0xadede5(0x2b6))[_0xadede5(0x17d)](_0xadede5(0x1b0))[_0xadede5(0x154)]()||[];if(_0x13f6a3[_0xadede5(0x12e)]==0x0){let _0x5e31d6=0x0,_0x3b5626=[];const _0x201d0c=/^bot-([0-9]{3})-config.json$/,_0x28a278=fs[_0xadede5(0x15f)](configpath);_0x28a278[_0xadede5(0x1dc)](_0xb63b1e=>{const _0xf6df5a=_0xadede5,_0x380f99=_0x201d0c[_0xf6df5a(0x19a)](_0xb63b1e);if(_0x380f99){const _0xef646c=_0x380f99[0x1];let _0x4706f6=getBotAttributes(_0xef646c);_0x3b5626['push']({'botID':_0xef646c,'botname':_0x4706f6[_0xf6df5a(0x240)],'status':_0xf6df5a(0x1b2),'live':'stopped'}),_0x5e31d6++;}}),_0x5e31d6!=0x0&&(dbConfig['get']('bots')[_0xadede5(0x281)](_0x3b5626)[_0xadede5(0x18c)](),config=_0x3b5626,restoredConfigFile=_0x5e31d6);}}async function restoreConfigNotify(_0x293f1e){const _0x169f13=_0xb9d65b;let _0xc5cd3e;if(restoredConfigFile==0x1)_0xc5cd3e='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0xc5cd3e=_0x169f13(0x277);if(_0x293f1e)io['to'](_0x169f13(0x166))[_0x169f13(0x147)](_0x169f13(0x1eb),_0xc5cd3e);else{logger[_0x169f13(0x242)](_0x169f13(0x2b8)),logger[_0x169f13(0x242)](_0xc5cd3e),logger[_0x169f13(0x242)](_0x169f13(0x2b8)),logger[_0x169f13(0x242)]('');if(tgBot&&settings[_0x169f13(0x13d)]&&settings['telegramEvents']!=_0x169f13(0x1fe))tgBot['sendMessage'](settings['telegramChatId'],_0x169f13(0x134)+_0xc5cd3e)[_0x169f13(0x163)](_0x244605=>{telegramError(_0x244605);});}}function validateCredentials(_0x4edcce,_0x45656c){const _0x4febec=_0xb9d65b;if(_0x4edcce[_0x4febec(0x140)]==settings['bbUsername']&&bcrypt['compareSync'](_0x4edcce[_0x4febec(0x26d)],settings[_0x4febec(0x179)])){if(settings[_0x4febec(0x214)])return{'allow':![],'reason':_0x4febec(0x1ba),'token':null};else{const _0x531fde=generateLoginToken(_0x45656c);return{'allow':!![],'reason':_0x4febec(0x291),'token':_0x531fde};}}else return{'allow':![],'reason':_0x4febec(0x21c),'token':null};}function refreshToken(_0x535edc){const _0x111020=_0xb9d65b,_0x519de0=generateLoginToken(_0x535edc);return{'allow':!![],'reason':_0x111020(0x291),'token':_0x519de0};}function validateAccess(_0x181ef8,_0xbc02b7,_0x355d3a){const _0x3969ce=_0xb9d65b,_0xb36eb7=_0x355d3a?_0x355d3a:devices[_0xbc02b7]['ip'];let _0x5f14a3;const _0x2fc437=_0x411576=>{const _0xeb59b7=_0x4f79;if(settings['loginRequired']){if(settings[_0xeb59b7(0x214)]){if(telegram2FaApproved(_0xbc02b7)){const _0x13ef3f=generateLoginToken(_0xbc02b7);return{'allow':!![],'reason':_0xeb59b7(0x298),'token':_0x13ef3f};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5f14a3=validToken(_0x411576,_0xbc02b7),_0x5f14a3[_0xeb59b7(0x24d)](_0xeb59b7(0x2d4))?{'allow':!![],'reason':_0xeb59b7(0x167),'token':_0x411576}:{'allow':![],'reason':_0xeb59b7(0x261),'token':null};}else return{'allow':!![],'reason':_0xeb59b7(0x2cf),'token':null};};if(settings[_0x3969ce(0x1f1)]){let _0x288796=[...settings[_0x3969ce(0x186)],_0x3969ce(0x173),_0x3969ce(0x194),_0x3969ce(0x218)];if(_0x288796[_0x3969ce(0x26c)](_0xb36eb7))return _0x2fc437(_0x181ef8);else{_0x5f14a3=validToken(_0x181ef8,_0xbc02b7);if(_0x5f14a3[_0x3969ce(0x24d)](_0x3969ce(0x2d4)))return _0x2fc437(_0x181ef8);else{if(telegramIpApproved(_0xbc02b7)){const _0x1f4ee=generateToken(_0xbc02b7);return _0x5f14a3=_0x2fc437(_0x181ef8),_0x5f14a3[_0x3969ce(0x139)]?{'allow':!![],'reason':_0x3969ce(0x1c7),'token':_0x1f4ee}:_0x5f14a3;}else return settings[_0x3969ce(0x16c)]?{'allow':![],'reason':_0x3969ce(0x2c4),'token':null}:{'allow':![],'reason':_0x3969ce(0x2b7),'token':null};}}}else return _0x2fc437(_0x181ef8);}function timelyDecrypt(_0x4eb28a,_0x46130f=!![]){const _0x5a015d=_0xb9d65b;if(_0x4eb28a)try{const _0x8a57d1=crypt[_0x5a015d(0x296)](secure['privateKey'],_0x4eb28a)['message'],_0x2a7ee3=_0x8a57d1[_0x5a015d(0x21a)]('@')[0x0],_0x4a3199=_0x8a57d1['split']('@')[0x1],_0x4896cb=new Date()['getTime']();if(_0x46130f){if(_0x4896cb-_0x4a3199<maxSecretAge*0x3e8)return _0x2a7ee3;else return![];}else return _0x2a7ee3;}catch(_0x3416dc){return![];}else return![];}const validToken=(_0x5cef49,_0x33ea5f)=>{const _0x559cfe=_0xb9d65b,_0x1a582b=devices[_0x33ea5f]['ip'];if(!_0x5cef49)return{'error':_0x559cfe(0x1cf)};for(let _0x3b2da2 of blacklist){if(_0x3b2da2[_0x559cfe(0x2a6)]==_0x5cef49)return{'error':'Token\x20blacklisted'};}let _0xa7493c;try{_0xa7493c=jwt[_0x559cfe(0x1da)](_0x5cef49,secure['secret']+_0x33ea5f);}catch{return{'error':_0x559cfe(0x206)};}if(!_0xa7493c['hasOwnProperty'](_0x559cfe(0x1ea))&&!_0xa7493c[_0x559cfe(0x24d)](_0x559cfe(0x140))||!_0xa7493c['hasOwnProperty']('exp'))return{'error':_0x559cfe(0x18b)};if(!_0xa7493c['hasOwnProperty'](_0x559cfe(0x140))&&_0xa7493c[_0x559cfe(0x24d)](_0x559cfe(0x1ea))){const {clientip:_0x5210e7}=_0xa7493c;return _0x1a582b==_0x5210e7?{'success':_0x559cfe(0x17f)}:{'error':_0x559cfe(0x131)};}else{if(_0xa7493c[_0x559cfe(0x24d)](_0x559cfe(0x140))&&_0xa7493c[_0x559cfe(0x24d)](_0x559cfe(0x1ea))){const {username:_0x19f974,clientip:_0x1351e3}=_0xa7493c;return settings[_0x559cfe(0x18e)]==_0x19f974&&_0x1a582b==_0x1351e3?{'success':_0x559cfe(0x17f)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x401190=>{const _0xbb0d0b=_0xb9d65b;if(_0x401190){const _0x145f63=devices[_0x401190]['ip'];return jwt[_0xbb0d0b(0x2c6)]({'username':settings['bbUsername'],'clientip':_0x145f63},secure['secret']+_0x401190,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x38d4b1=>{const _0x3b073d=_0xb9d65b;if(_0x38d4b1){const _0x2fbd21=devices[_0x38d4b1]['ip'];return jwt[_0x3b073d(0x2c6)]({'clientip':_0x2fbd21},secure[_0x3b073d(0x2c3)]+_0x38d4b1,{'expiresIn':devices[_0x38d4b1][_0x3b073d(0x1b1)][_0x3b073d(0x2bb)]*0x3c});}else return![];},telegramIpApproved=_0x2a9cf4=>{const _0x5ecfae=_0xb9d65b;let _0x3bff30=![];return devices[_0x2a9cf4][_0x5ecfae(0x1b1)]&&devices[_0x2a9cf4][_0x5ecfae(0x1b1)][_0x5ecfae(0x2bb)]!=_0x5ecfae(0x22e)&&(_0x3bff30=devices[_0x2a9cf4][_0x5ecfae(0x1b1)]['clientip']==devices[_0x2a9cf4]['ip']&&new Date()[_0x5ecfae(0x274)]()-devices[_0x2a9cf4][_0x5ecfae(0x1b1)][_0x5ecfae(0x189)]<devices[_0x2a9cf4][_0x5ecfae(0x1b1)][_0x5ecfae(0x2bb)]*0x3c*0x3e8),_0x3bff30;},telegram2FaApproved=_0x510520=>{const _0x48601c=_0xb9d65b;let _0x2e4ba6=![];return devices[_0x510520][_0x48601c(0x1c3)]&&devices[_0x510520][_0x48601c(0x1c3)][_0x48601c(0x2bb)]!='reject'&&(_0x2e4ba6=devices[_0x510520][_0x48601c(0x1c3)][_0x48601c(0x1ea)]==devices[_0x510520]['ip']&&new Date()[_0x48601c(0x274)]()-devices[_0x510520][_0x48601c(0x1c3)]['timestamp']<devices[_0x510520][_0x48601c(0x1c3)][_0x48601c(0x2bb)]*0x3c*0x3e8),_0x2e4ba6;},normalizeIP=_0x4fb22f=>{const _0x3acb5f=_0xb9d65b;let _0x2ffedc=null,_0x5dbb61=null;if(ipaddr[_0x3acb5f(0x175)](_0x4fb22f)){const _0x36d777=ipaddr[_0x3acb5f(0x213)](_0x4fb22f);_0x36d777['kind']()===_0x3acb5f(0x2d0)?(_0x36d777[_0x3acb5f(0x24e)]()&&(_0x2ffedc=_0x36d777[_0x3acb5f(0x1fd)]()['toString']()),_0x5dbb61=_0x36d777[_0x3acb5f(0x1a6)]()):(_0x2ffedc=_0x36d777['toString'](),_0x5dbb61=_0x36d777[_0x3acb5f(0x2cc)]()['toString']());}return{'show':_0x2ffedc?_0x2ffedc:_0x5dbb61,'store':_0x5dbb61};};function sleep(_0x6140dc){return new Promise(_0x2523ee=>setTimeout(_0x2523ee,_0x6140dc));}