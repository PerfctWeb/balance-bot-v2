const _0x21c4ad=_0x4321;(function(_0x2e7a9a,_0x4935ea){const _0xdaa87f=_0x4321,_0x1dea4e=_0x2e7a9a();while(!![]){try{const _0x522384=-parseInt(_0xdaa87f(0x234))/0x1*(-parseInt(_0xdaa87f(0x2f0))/0x2)+-parseInt(_0xdaa87f(0x2ed))/0x3*(parseInt(_0xdaa87f(0x292))/0x4)+parseInt(_0xdaa87f(0x2b2))/0x5*(parseInt(_0xdaa87f(0x25a))/0x6)+-parseInt(_0xdaa87f(0x1b6))/0x7*(-parseInt(_0xdaa87f(0x1ac))/0x8)+-parseInt(_0xdaa87f(0x2bb))/0x9*(-parseInt(_0xdaa87f(0x26e))/0xa)+parseInt(_0xdaa87f(0x2fd))/0xb+-parseInt(_0xdaa87f(0x293))/0xc*(parseInt(_0xdaa87f(0x2ce))/0xd);if(_0x522384===_0x4935ea)break;else _0x1dea4e['push'](_0x1dea4e['shift']());}catch(_0x19699b){_0x1dea4e['push'](_0x1dea4e['shift']());}}}(_0x53df,0x197db));const _0x203e4c=function(){let _0x4e7a86=!![];return function(_0x238820,_0x1a63a5){const _0xe802df=_0x4e7a86?function(){const _0x129fa7=_0x4321;if(_0x1a63a5){const _0x5ec052=_0x1a63a5[_0x129fa7(0x147)](_0x238820,arguments);return _0x1a63a5=null,_0x5ec052;}}:function(){};return _0x4e7a86=![],_0xe802df;};}(),_0x46e1c8=_0x203e4c(this,function(){const _0x540b59=_0x4321;return _0x46e1c8[_0x540b59(0x28d)]()[_0x540b59(0x21e)](_0x540b59(0x143))[_0x540b59(0x28d)]()[_0x540b59(0x260)](_0x46e1c8)['search'](_0x540b59(0x143));});_0x46e1c8();'use strict';process[_0x21c4ad(0x2c9)][_0x21c4ad(0x2e6)]=0x1;const childProcess=require(_0x21c4ad(0x287)),fs=require('fs'),fns=require('date-fns'),low=require(_0x21c4ad(0x29b)),FileSync=require(_0x21c4ad(0x23d)),path=require(_0x21c4ad(0x2a0)),crypto=require(_0x21c4ad(0x178)),forge=require(_0x21c4ad(0xf7)),bcrypt=require(_0x21c4ad(0x21c)),jwt=require(_0x21c4ad(0x232)),ipaddr=require(_0x21c4ad(0x156)),argv=require('yargs/yargs')(process[_0x21c4ad(0x138)][_0x21c4ad(0x11a)](0x2))[_0x21c4ad(0x138)],uuidRandom=require(_0x21c4ad(0x230)),{Telegraf,Markup}=require(_0x21c4ad(0x261)),Mixpanel=require(_0x21c4ad(0x253)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x21c4ad(0x27a)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x21c4ad(0x1b2)),PORT=argv[_0x21c4ad(0x1c0)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x21c4ad(0x251)](_0x21c4ad(0x2f8)+PORT+_0x21c4ad(0x2b4)),process['exit'](0x1));const HOST=argv[_0x21c4ad(0x2c0)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions']['node'];let bbpath=_0x21c4ad(0xf6),bbpath2='';const botfile='bot.js',configfile=_0x21c4ad(0x2d6),settingsfile=_0x21c4ad(0x2cc),securefile=_0x21c4ad(0x113),environment=require('./'+bbpath2+_0x21c4ad(0x10c))[_0x21c4ad(0x15e)]||_0x21c4ad(0x1d5),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x21c4ad(0x192)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x21c4ad(0x25b)),configpath=userID?bbpath+_0x21c4ad(0x29c)+userID+'/':bbpath+_0x21c4ad(0x29c),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x21c4ad(0x244)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x21c4ad(0x185)+userID+'/':bbpath+_0x21c4ad(0x185),loggerfile=fs[_0x21c4ad(0x279)](logspath+_0x21c4ad(0x1d8),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x21c4ad(0x2b5);!fs[_0x21c4ad(0x192)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x21c4ad(0x192)](configbackuppath)&&fs[_0x21c4ad(0x102)](configbackuppath);!fs[_0x21c4ad(0x192)](logspath)&&fs[_0x21c4ad(0x102)](logspath);!fs[_0x21c4ad(0x192)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x21c4ad(0x192)](temppath)&&fs[_0x21c4ad(0x102)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x21c4ad(0x131)]({'bots':[]})[_0x21c4ad(0x283)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x21c4ad(0x131)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x21c4ad(0x237),'onepagemode':![],'marketcapApi':''}})[_0x21c4ad(0x283)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x21c4ad(0x131)]({'secure':{},'blacklist':[]})[_0x21c4ad(0x283)]();const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x21c4ad(0x19c),{'host':_0x21c4ad(0x2ae)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings['telegramToken']!=''&&settings[_0x21c4ad(0x132)]!='***')&&settings[_0x21c4ad(0x254)]&&settings[_0x21c4ad(0x254)]!='')initTelegram();const parseColor=(_0x2e2f95,_0x484ac0)=>{const _0x3a7437=_0x21c4ad,_0x286a70=/#[A-Z]{3}#/g;if(typeof _0x2e2f95=='string'){!_0x484ac0?_0x2e2f95=_0x2e2f95[_0x3a7437(0x111)](_0x286a70,''):(_0x2e2f95=_0x2e2f95[_0x3a7437(0x111)](/#BLU#/g,_0x3a7437(0x182)),_0x2e2f95=_0x2e2f95[_0x3a7437(0x111)](/#RED#/g,_0x3a7437(0x296)),_0x2e2f95=_0x2e2f95['replace'](/#YEL#/g,'\x1b[33m'),_0x2e2f95=_0x2e2f95['replace'](/#MAG#/g,_0x3a7437(0x118)),_0x2e2f95=_0x2e2f95[_0x3a7437(0x111)](/#CYA#/g,_0x3a7437(0x1ee)),_0x2e2f95=_0x2e2f95['replace'](/#RES#/g,_0x3a7437(0x2b3)));;}return _0x2e2f95;},logger={'screen':_0x9dec18=>{const _0x3fecfc=_0x21c4ad;console[_0x3fecfc(0x251)](parseColor(_0x9dec18,!![]));},'simple':_0x5ddc29=>{const _0x2876d5=_0x21c4ad;console[_0x2876d5(0x251)](parseColor(_0x5ddc29,!![])),loggerfile['write'](util['format'](parseColor(_0x5ddc29,![]))+'\x0a');},'full':async _0xb65111=>{const _0x1d6596=_0x21c4ad,_0x5c0a42=getTimeStamp()+_0x1d6596(0x188)+_0xb65111;console['log'](parseColor(_0x5c0a42,!![])),loggerfile[_0x1d6596(0x283)](util[_0x1d6596(0x2ff)](parseColor(_0x5c0a42,![]))+'\x0a');if(tgBot&&settings[_0x1d6596(0x1c8)]&&settings[_0x1d6596(0x2e5)]!=_0x1d6596(0x110))await sendTelegram(settings['telegramChatId'],_0x1d6596(0xfc)+parseColor(_0xb65111,![]));},'debug':async(_0x27f354,_0x1b683e='')=>{const _0x4831cb=_0x21c4ad,_0x5caea5=getTimeStamp()+_0x4831cb(0x269)+_0x27f354;if(debugging)console[_0x4831cb(0x251)](parseColor(_0x5caea5,!![]));loggerfile[_0x4831cb(0x283)](util['format'](parseColor(_0x5caea5,![]))+'\x0a');if(_0x1b683e){if(debugging)console[_0x4831cb(0x251)](_0x1b683e);loggerfile[_0x4831cb(0x283)](util['format'](_0x1b683e)+'\x0a');}}};let terminating=![];process['on'](_0x21c4ad(0x273),function(_0x557741){const _0x13f5ce=_0x21c4ad;_0x557741[_0x13f5ce(0x28d)]()[_0x13f5ce(0x186)](_0x13f5ce(0x276))?(logger[_0x13f5ce(0x114)](_0x13f5ce(0x168)+_0x557741[_0x13f5ce(0x1c0)]+_0x13f5ce(0x128)),process[_0x13f5ce(0x142)]({'terminate':!![]},_0x593b25=>{})):logger[_0x13f5ce(0x114)](_0x557741);}),process['on']('exit',()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x21c4ad(0x1af),()=>{const _0x4625b3=_0x21c4ad;stopAllBots(),process[_0x4625b3(0x112)](0x0);}),process['on']('SIGINT',()=>{const _0x26381e=_0x21c4ad;stopAllBots(),process[_0x26381e(0x112)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x21c4ad(0x10c))[_0x21c4ad(0x154)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x21c4ad(0x1d6)),app=express(),http=require(_0x21c4ad(0x2e7))['createServer'](app);app[_0x21c4ad(0x20a)](fileUpload({'useTempFiles':!![]})),app['get'](_0x21c4ad(0x201),async(_0x3a39d6,_0x34307e)=>{const _0x2ae4f=_0x21c4ad,_0x354422=_0x3a39d6[_0x2ae4f(0x29e)][_0x2ae4f(0x262)],_0x16c3b2=getClientsWithBotID('botmanager'),_0x134475=_0x3a39d6[_0x2ae4f(0x200)][_0x2ae4f(0x289)],_0x19619d=timelyDecrypt(_0x134475,![]),_0xec64a5=_0x16c3b2[_0x2ae4f(0x229)](_0x31ae81=>_0x31ae81[_0x2ae4f(0x289)]==_0x19619d);if(_0xec64a5){const _0x538d3f=normalizeIP(_0x3a39d6[_0x2ae4f(0x1ec)][_0x2ae4f(0x2e8)])['store'],_0x22dee8=_0x3a39d6[_0x2ae4f(0x200)][_0x2ae4f(0x17b)];if(validateAccess(_0x22dee8,_0x19619d,_0x538d3f)['allow'])_0x354422==_0x2ae4f(0x1a8)&&await backupConfigFiles(),await zipFiles(_0x354422),_0x34307e[_0x2ae4f(0x233)](zippath+(_0x354422+'.zip'),_0x135d93=>{const _0x1721ea=_0x2ae4f;_0x135d93&&(logger[_0x1721ea(0x23e)](_0x1721ea(0x1ff)+_0x354422),logger[_0x1721ea(0x114)](_0x135d93));});else logger[_0x2ae4f(0x23e)](_0x2ae4f(0x22c)+_0x354422+_0x2ae4f(0x225));}else logger[_0x2ae4f(0x23e)](_0x2ae4f(0x22c)+_0x354422+'\x20(2)');}),app[_0x21c4ad(0x16b)](_0x21c4ad(0x265),async(_0x2556f7,_0x1aeef1)=>{const _0x5e3b2e=_0x21c4ad,_0xdcabcf=getClientsWithBotID(_0x5e3b2e(0x246)),_0x288146=_0x2556f7[_0x5e3b2e(0x200)][_0x5e3b2e(0x289)],_0x3fa64b=timelyDecrypt(_0x288146,![]),_0xbd5522=_0xdcabcf['find'](_0xa260c7=>_0xa260c7[_0x5e3b2e(0x289)]==_0x3fa64b);logger[_0x5e3b2e(0x259)](_0x5e3b2e(0xf0));if(_0xbd5522){const _0x453aad=normalizeIP(_0x2556f7[_0x5e3b2e(0x1ec)]['remoteAddress'])[_0x5e3b2e(0x153)],_0x35a958=_0x2556f7[_0x5e3b2e(0x200)][_0x5e3b2e(0x17b)];if(validateAccess(_0x35a958,_0x3fa64b,_0x453aad)['allow']){if(_0x2556f7[_0x5e3b2e(0x2dd)]){const _0x536a6a=_0x2556f7[_0x5e3b2e(0x2dd)][_0x5e3b2e(0x26c)];await _0x536a6a['mv'](temppath+_0x536a6a['name']),_0x1aeef1[_0x5e3b2e(0x142)]({'status':!![],'message':_0x5e3b2e(0x1ce)});const _0x5e8bbf=getBotsWithMode();_0x5e8bbf[_0x5e3b2e(0x243)]>0x0?confirmRestore(temppath,_0x536a6a[_0x5e3b2e(0x23f)]):unzipFile(temppath,_0x536a6a[_0x5e3b2e(0x23f)]);}}else logger[_0x5e3b2e(0x23e)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x5e3b2e(0x249));}),app[_0x21c4ad(0x20a)](express[_0x21c4ad(0x1ca)](path[_0x21c4ad(0x2e9)](__dirname,bbpath2,_0x21c4ad(0x1a6)))),app[_0x21c4ad(0x20a)](express[_0x21c4ad(0x1ca)](path[_0x21c4ad(0x2e9)](__dirname,bbpath2,_0x21c4ad(0x145)))),app['get']('/',function(_0x4df23d,_0x43dd0e){const _0x4285cb=_0x21c4ad;_0x43dd0e['sendFile'](path[_0x4285cb(0x2e9)](__dirname,bbpath2,_0x4285cb(0x1a6),_0x4285cb(0x27c)));}),app[_0x21c4ad(0x103)]('/:bot',function(_0x281c5f,_0x2130fe){const _0x25e2ca=_0x21c4ad;_0x2130fe[_0x25e2ca(0x18b)](path['join'](__dirname,bbpath2,_0x25e2ca(0x145),_0x25e2ca(0x27c)));}),app['get'](_0x21c4ad(0x106),(_0x4c41de,_0x5cae97)=>{const _0x3b2385=_0x21c4ad;_0x5cae97['sendFile'](path[_0x3b2385(0x2e9)](__dirname,bbpath2,'build',_0x3b2385(0x27c)));}),app['get'](_0x21c4ad(0x2ad),(_0x94f3dc,_0x13c988)=>{const _0x38bc08=_0x21c4ad;_0x13c988[_0x38bc08(0x18b)](path[_0x38bc08(0x2e9)](__dirname,bbpath2,_0x38bc08(0x145),_0x38bc08(0x27c)));}),app[_0x21c4ad(0x103)]('/:bot/coins',(_0x4b734d,_0x514f58)=>{const _0x40f4aa=_0x21c4ad;_0x514f58[_0x40f4aa(0x18b)](path['join'](__dirname,bbpath2,_0x40f4aa(0x145),'index.html'));}),app['get'](_0x21c4ad(0x16e),(_0x8a17a1,_0x388970)=>{const _0x29fbb6=_0x21c4ad;_0x388970[_0x29fbb6(0x18b)](path[_0x29fbb6(0x2e9)](__dirname,bbpath2,_0x29fbb6(0x145),'index.html'));}),app[_0x21c4ad(0x103)](_0x21c4ad(0x19e),(_0x2769fe,_0x1b348a)=>{const _0x49a057=_0x21c4ad;_0x1b348a[_0x49a057(0x18b)](path[_0x49a057(0x2e9)](__dirname,bbpath2,_0x49a057(0x145),_0x49a057(0x27c)));}),app[_0x21c4ad(0x103)](_0x21c4ad(0x1df),(_0x3b3fa4,_0x343ca2)=>{const _0x489d55=_0x21c4ad;_0x343ca2[_0x489d55(0x18b)](path[_0x489d55(0x2e9)](__dirname,bbpath2,'build',_0x489d55(0x27c)));});if(HOST)http['listen'](PORT,HOST);else http[_0x21c4ad(0x239)](PORT);const io=require(_0x21c4ad(0x280))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1ca22e=_0x21c4ad;let _0x57b8dd=_0x1ca22e(0x152);const _0x22df9b=networkInterfaces(),_0x3edecb={};for(const _0x21a17c of Object[_0x1ca22e(0x1b9)](_0x22df9b)){for(const _0x386151 of _0x22df9b[_0x21a17c]){if((_0x386151[_0x1ca22e(0x1db)]==_0x1ca22e(0x21f)||_0x386151[_0x1ca22e(0x1db)]==0x4)&&!_0x386151['internal']){const _0x59cab2=ipaddr[_0x1ca22e(0x2eb)](_0x386151[_0x1ca22e(0x2a2)])[_0x1ca22e(0x126)]();_0x59cab2!='private'&&(!_0x3edecb[_0x21a17c]&&(_0x3edecb[_0x21a17c]=[]),_0x3edecb[_0x21a17c]['push'](_0x386151['address']),_0x57b8dd=_0x386151[_0x1ca22e(0x2a2)]);}}}return{'serverip':_0x57b8dd,'netinterfaces':_0x3edecb};}async function startServer(){const _0x2a0259=_0x21c4ad,{serverip:_0x55e7a3,netinterfaces:_0x183133}=getServerIP();logger[_0x2a0259(0x114)](''),logger['simple'](_0x2a0259(0x256)),await logger[_0x2a0259(0x23e)](_0x2a0259(0x2d4)+serverversion+_0x2a0259(0x284)+(environment==_0x2a0259(0x219)?_0x2a0259(0x26f):'')+'\x0a'+(_0x2a0259(0x127)+PORT+_0x2a0259(0x25d))+(_0x2a0259(0x217)+_0x55e7a3+':'+PORT+_0x2a0259(0x250))),logger[_0x2a0259(0x114)](_0x2a0259(0x256));if(config[_0x2a0259(0x243)]!=0x0)for(const _0xc2dac8 of config){const _0x15cd20=_0xc2dac8['mode']==_0x2a0259(0x2d0)?'a':'m';if(_0xc2dac8['status']==_0x2a0259(0x125)||_0xc2dac8['status']==_0x2a0259(0x24d))await logger[_0x2a0259(0x23e)](_0x2a0259(0x271)+_0x15cd20+_0x2a0259(0x235)+_0xc2dac8[_0x2a0259(0x162)]+'\x20|\x20'+_0xc2dac8[_0x2a0259(0x176)]),startBot([_0xc2dac8['botID'],userID],{'cwd':bbpath},function(_0x4bc8a6){const _0x1b8683=_0x2a0259;if(_0x4bc8a6)logger[_0x1b8683(0x23e)](_0x4bc8a6);});else(_0xc2dac8[_0x2a0259(0x13b)]==_0x2a0259(0x137)||_0xc2dac8['status']=='new-disabled')&&await logger['full'](_0x2a0259(0x105)+_0x15cd20+')\x20\x20\x20|\x20Bot\x20'+_0xc2dac8[_0x2a0259(0x162)]+_0x2a0259(0x10a)+_0xc2dac8['botname']);}else!newBot&&logger[_0x2a0259(0x114)](_0x2a0259(0x1e6));if(newBot)addBot();logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x2a0259(0x114)](''),await logger['debug']('Node.js\x20v'+nodeversion),await logger[_0x2a0259(0x259)](_0x2a0259(0x1c4),_0x183133);}function startSocket(){const _0x5574b9=_0x21c4ad;io['on'](_0x5574b9(0x10d),_0xb36bc4=>{const _0x5487ad=_0x5574b9;let _0x1ba64c,_0x456cd8,_0x320d19,_0x53be82,_0x4bfd6e;const _0x1b11b6=_0xb36bc4[_0x5487ad(0x27b)][_0x5487ad(0x200)]['referer'];_0x456cd8=_0x1b11b6[_0x5487ad(0x277)](/bot[0-9]{3}/);if(_0x456cd8)_0x320d19=_0x456cd8[0x0]['match'](/[0-9]{3}/);if(_0x320d19)_0x1ba64c=_0x320d19[0x0];else _0x1ba64c=_0x5487ad(0x246);const _0x6ec716=_0xb36bc4[_0x5487ad(0x27b)]['auth'][_0x5487ad(0x2a3)];if(!_0x6ec716)_0xb36bc4[_0x5487ad(0x291)]('status',{'publicKey':secure[_0x5487ad(0x247)]});else{_0x53be82=timelyDecrypt(_0x6ec716,![]);if(!_0x53be82)_0xb36bc4[_0x5487ad(0x291)]('status',{'publicKey':secure[_0x5487ad(0x247)]});else{_0x4bfd6e=normalizeIP(_0xb36bc4['conn'][_0x5487ad(0x2e8)])[_0x5487ad(0x153)];if(!devices[_0x53be82])devices[_0x53be82]={'uuid':_0x53be82,'access':{'token':null}};devices[_0x53be82]['ip']=_0x4bfd6e;const _0x320ce9=addClient(_0xb36bc4['id'],_0x53be82,_0x1ba64c);setAccess(_0x320ce9),emitMessages(),_0xb36bc4['on'](_0x5487ad(0x1a4),_0x2ce654=>{const _0x39b995=_0x5487ad,_0x342307=timelyDecrypt(_0x2ce654['password'],!![],_0x39b995(0x148));if(_0x342307){_0x2ce654={'username':_0x2ce654[_0x39b995(0x1ad)],'password':_0x342307},devices[_0x53be82]['access']=validateCredentials(_0x2ce654,_0x53be82);if(devices[_0x53be82]['access'][_0x39b995(0x1d0)]==![]&&devices[_0x53be82][_0x39b995(0x2e2)][_0x39b995(0x100)]==_0x39b995(0x1bd))_0xb36bc4['emit'](_0x39b995(0x13b),{'access':devices[_0x53be82]['access']}),loginAccess2FA(_0x53be82,_0x4bfd6e);else{if(devices[_0x53be82][_0x39b995(0x2e2)]['allow']==![]&&devices[_0x53be82][_0x39b995(0x2e2)][_0x39b995(0x100)]==_0x39b995(0x181))_0xb36bc4['emit'](_0x39b995(0x13b),{'access':devices[_0x53be82]['access']});else devices[_0x53be82][_0x39b995(0x2e2)][_0x39b995(0x1d0)]&&devices[_0x53be82][_0x39b995(0x2e2)][_0x39b995(0x100)]==_0x39b995(0x2d5)&&(getClientsWithUuid(_0x53be82)['forEach'](_0x45f133=>{setAccess(_0x45f133);}),logger[_0x39b995(0x259)]('Logged\x20in\x20user\x20...'+_0x53be82[_0x39b995(0x11a)](-0x8)),setTokenRefresh(_0x53be82),setSessionTimeout(_0x39b995(0x1a4),_0x53be82));}}else logger[_0x39b995(0x23e)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0xb36bc4['on'](_0x5487ad(0x1bf),()=>{resetPassword();}),_0xb36bc4['on'](_0x5487ad(0x22d),_0x3ed67b=>{removeClient(_0xb36bc4['id']);}),_0x1ba64c==_0x5487ad(0x246)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x587501){const _0x133a6c=_0x21c4ad;if(_0x587501!=_0x133a6c(0x246)&&config[_0x133a6c(0x157)]!=''){if(pid[_0x587501])pid[_0x587501][_0x133a6c(0x142)]({'function':_0x133a6c(0x158),'args':null});}_0x587501!=_0x133a6c(0x246)&&broadcastToBots(_0x133a6c(0x144),JSON['stringify'](config));}function reloadBotManager(){const _0x11fb84=_0x21c4ad;getClientsWithBotID(_0x11fb84(0x246))[_0x11fb84(0x163)](_0x11a3a3=>{const _0x34834d=_0x11fb84;getSocket(_0x11a3a3['id'])['emit'](_0x34834d(0x13b),{'access':{'allow':![],'reason':_0x34834d(0x116),'token':null}});});}function _0x53df(){const _0x2fff92=['=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','#RES#','async','restore_yes_','Bot\x20','rmSync','removeAllListeners','split','/metrics\x20-\x20show\x20bot\x20performance\x0a','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','defaults','telegramToken','reset-history','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Your\x20installation\x20is\x20already\x20up\x20to\x20date','No\x20bots\x20running\x20right\x20now','disabled','argv','Telegram\x20error:','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','status','metrics','data','tempaccess_reject_','sign','Deleted\x20Bot\x20','backup-files','send','(((.+)+)+)+$','bots','build','https://api.ipify.org?format=json','apply','|@|','any','launch','toggleBotMode','rsa','CoinMarketCap\x20API\x20key\x20validated','Starting\x20Balance\x20Bot\x20reinstallation','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','BCT','generateAsync','[ip-address]','store','version','names','ipaddr.js','apiKey','initclient','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','error','updatebotmanager','_nsps','alias','environment','pidExpireLogin','unlinkSync','size','botID','forEach','DEFLATE','hashSync','exp','get-backup-files','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','emitHistory','assign','post','Unauthorized\x20attempt\x20to\x20get\x20messages','privateKey','/:bot/history','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','cancel-loading','expiry','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','copyFileSync','Logged\x20out\x20user\x20...','secure','botname','Restore\x20process\x20confirmed','crypto','mtime','isIPv4MappedAddress','tkn','Setting\x20access:\x20','notification','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getUTCHours','invalid\x20credentials','\x1b[34m','isDirectory','SIGINT','zip/','includes','Do\x20you\x20want\x20to\x20reset\x20your\x20password?',':\x20Bot\x20Mgr\x20>\x20','sha256','compareSync','sendFile','stopped','chat','toggle-bot-mode','headless','Backup\x20file\x20unzipped\x20and\x20stored','startsWith','existsSync','off_','config_orders','function','privateKeyFromPem','started','stringify','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','*$1*','f2aRequired','6b67f3d61ee94b8f5c80b4affef4c4d9','Unauthorized\x20attempt\x20to\x20log\x20out','/:bot/configuration','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','settings','getPortfolio','Starting\x20new\x20bot\x20|\x20Bot\x20','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','login','value','build2','cancelLoading','backup','writeFileSync','pidRefreshToken','mode','136kqmYTT','username','-config.json','SIGTERM','logged\x20out','getStartingBalances','jszip','Login\x20accepted','Ok,\x20will\x20send\x20alert\x20notifications\x20only','logout','80913vgOiAc','Error\x20details:','portfolio','keys','::1','pki','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','2FA\x20login\x20required','randomFillSync','reset-password','port','inlineKeyboard','get-portfolio','Disabled\x20Bot\x20','Network\x20Interfaces:','bot','loginRequired','endsWith','telegramChatId','lastmsgtelegram','static','reinstall_no','push','verify','File\x20uploaded','order','allow','update','HTML','sendPortfolioTelegram','timeshift','production','express','update-bb','/output-000.log','login\x20token\x20valid','file','family','::ffff:127.0.0.1','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','blacklist','/:bot/support','Unauthorized\x20attempt\x20to\x20add\x20bot','string','cloneDeep','hex','getMonth','Temporary\x20access\x20rejected','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','messages','filter','Telegraf\x20error:','yes','Session\x20expired\x20for\x20user\x20...','socket','Unauthorized\x20attempt\x20to\x20confirm\x20message','\x1b[36m','storeConfiguration','place-order','readFileSync','tempaccess_5_','loadAsync','Password\x20reset\x20rejected','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','all','live','All','temporary\x20token\x20generated','test','Invalid\x20username\x20or\x20IP\x20address','tempaccess_30_','storeHeadless','Notifications\x20disabled','Failed\x20to\x20download\x20','headers','/download/:type','kind','randomBytes','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','request','track','text','alerts','output-000.log','use','temporary\x20access\x20timeout','set','backup-full@','update_yes','Unauthorized\x20attempt\x20to\x20update\x20bot','remove','message','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','connected','timestamp','Access\x20enabled\x20for\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','=>\x20Go\x20to\x20#CYA#http://','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','staging','exec','getTime','bcryptjs','entries','search','IPv4','get-logs','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','apiSecret','***','logs','\x20(1)','ipc','hasOwnProperty','2FA','find','disable','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Unauthorized\x20attempt\x20to\x20download\x20','disconnect','from','.zip','uuid-random','access\x20timeout','jsonwebtoken','download','138271CWoukX',')\x20|\x20Bot\x20','restore-backup-file','0.0.0','action','listen','event','delete-bot','storeFiat','lowdb/adapters/FileSync','full','name','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Notifications\x20enabled','close','length','logs/','showConfig','botmanager','publicKey','command','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','-performance.json','temporary\x20access\x20rejected','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','new','ETH','password','#RES#\x20if\x20running\x20on\x20server','log','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','mixpanel','telegramUsername','showname','-----------------------------------------------------------------------------------','portfolio_','getMinutes','debug','6rpehbX','clients','\x20|\x20client:\x20...','#RES#\x20if\x20running\x20locally\x0a','2FA\x20login\x20token\x20generated','sortBy','constructor','telegraf','type','All\x20bots','reinstall-bb','/upload-backup','User\x20has\x20been\x20validated','/help\x20-\x20show\x20available\x20commands\x0a','getHours',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','editMessageReplyMarkup','Notifications\x20enabled\x0a','backupfile','onepagemode','110170MNkFmZ','(staging)','Error\x20while\x20deleting\x20config\x20files:\x20','Starting\x20(','whitelistEnabled','uncaughtException','Alerts','restart_','address\x20already\x20in\x20use','match','bbvReceive','createWriteStream','util','handshake','index.html','marketcapApi','bot-','success','socket.io','telegram','\x20only\x0a','write','#RES#\x20','update_no','token','child_process','binary','uuid','reinstall','kill','generateKeyPair','toString','config','1000','/on\x20-\x20start\x20bot(s)\x0a','emit','680788UHPrxA','12HindQA','secret','placeOrder','\x1b[31m','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','confirm-message','Notifications\x20types:\x20','bbvNew','lowdb','config/','tempaccess_15_','params','<b>Balance\x20Bot\x20Status:</b>\x0a','path','\x20minutes','address','encryptedUuid','\x20|\x20user:\x20...','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Password\x20has\x20been\x20reset\x20to:\x20','Server','config_alerts','number','create','bbPassword','Starting\x20Balance\x20Bot\x20update','/:bot/performance','api-eu.mixpanel.com','userid','output-001.log','2FA\x20required','425330OWmKZP','\x1b[0m',',\x20must\x20be\x20a\x204\x20digit\x20number','temp/','getDate','getFullYear','manual','5\x20min','catch','54KFMTrV','max','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20get\x20portfolio','************','host','toggle','Yes','RSA-OAEP','store-headless','stop','login\x20not\x20required','-events.json','readdirSync','env','-results.json','login\x20required','bb-settings.json','map','5176730xsTxWA','sockets','auto','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','telegrammsg','statSync','Starting\x20#RED#Balance\x20Bot\x20v','login\x20token\x20generated','bb-config.json','Ok,\x20will\x20send\x20order\x20notifications\x20only','Restore\x20backup\x20file\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','code','button','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','files','store-settings','show-config','30\x20min','telegramIpApproval','access','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','\x20mode','telegramEvents','NTBA_FIX_319','http','remoteAddress','join','on_','parse','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','3ygnEug','server','apiPassword','2rkBghw','/start','bbUsername','output-002.log','/status\x20-\x20show\x20bot(s)\x20status\x0a','Unauthorized\x20attempt\x20to\x20store\x20configuration','sendMessage','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Error:\x20Invalid\x20argument\x20','running','Markdown','accept','config_all','2055636xNiDzN','start','format','clientip','callback','sort','Invalid\x20IP\x20address','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Backup\x20file\x20uploaded','sendMetricsTelegram','off','Unauthorized\x20attempt\x20to\x20update\x20settings','inherit','/update\x20-\x20update\x20Balance\x20Bot\x0a','bb/','node-forge','new-disabled','output-003.log','args','/enable\x20-\x20enable\x20notifications\x0a','Bot\x20Mgr\x20>\x20','reply','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','once','reason','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','mkdirSync','get','getSeconds','Idling\x20(','/:bot/portfolio','isValid','show','deleteHistoryAlerts','\x20|\x20','reject','version.json','connection','Error\x20removing\x20old\x20backup\x20files:','exchange','orders','replace','exit','bb-secure.json','simple','\x20>\x20','reload','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','\x1b[35m','padStart','slice','\x20-\x20','decrypt','title','publicKeyToPem','telegramEnabled','lastmsgemitted','settings.','telegram2FaApproval','Allow\x20login\x20from\x20IP\x20address\x20','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','enabled','range'];_0x53df=function(){return _0x2fff92;};return _0x53df();}function getSocket(_0x1863d5){const _0xf4094d=_0x21c4ad,_0x1e52e3=io[_0xf4094d(0x15c)]['get']('/');return _0x1e52e3[_0xf4094d(0x2cf)]['get'](_0x1863d5);}function setAccess(_0x25bbf3){const _0x45b236=_0x21c4ad,_0x1d3b44=getSocket(_0x25bbf3['id']),_0x42189d=_0x25bbf3[_0x45b236(0x289)],_0x3ec059=_0x25bbf3[_0x45b236(0x1c5)];devices[_0x42189d][_0x45b236(0x2e2)]=validateAccess(devices[_0x42189d]['access'][_0x45b236(0x286)],_0x42189d),logger[_0x45b236(0x259)](_0x45b236(0x17c)+devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x100)]+_0x45b236(0x25c)+_0x25bbf3['id'][_0x45b236(0x11a)](-0x8)+_0x45b236(0x2a4)+_0x42189d[_0x45b236(0x11a)](-0x8)),_0x1d3b44[_0x45b236(0x2e9)](_0x42189d);if(devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x1d0)]){_0x1d3b44[_0x45b236(0x2e9)](_0x3ec059);if(_0x3ec059==_0x45b236(0x246))initializeSocketBotManager(_0x1d3b44);else initializeSocketBot(_0x1d3b44);initClient(_0x3ec059);}devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x286)]&&devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x100)]==_0x45b236(0x1f9)&&setSessionTimeout(_0x45b236(0x228),_0x42189d),devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x286)]&&devices[_0x42189d][_0x45b236(0x2e2)][_0x45b236(0x100)]==_0x45b236(0x25e)&&setSessionTimeout(_0x45b236(0x1a4),_0x42189d),_0x1d3b44[_0x45b236(0x291)](_0x45b236(0x13b),{'status':_0x25bbf3[_0x45b236(0x2ee)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x42189d][_0x45b236(0x2e2)],'externalip':devices[_0x42189d]['ip'],'publicKey':secure[_0x45b236(0x247)],'userid':settings[_0x45b236(0x2af)],'validInstallation':validInstallation}),devices[_0x42189d][_0x45b236(0x2e2)]['allow']==![]&&devices[_0x42189d][_0x45b236(0x2e2)]['reason']==_0x45b236(0x2b1)&&temporaryAccess2FA(_0x42189d,devices[_0x42189d]['ip']);}function setSessionTimeout(_0x24de88,_0x3e35ed){const _0xe14314=_0x21c4ad;let _0x57b9f6;if(_0x24de88==_0xe14314(0x1a4))_0x57b9f6=loginExpiry*0x3c*0x3e8;else _0x57b9f6=devices[_0x3e35ed][_0xe14314(0x2e1)][_0xe14314(0x171)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3e35ed][_0xe14314(0x2e1)][_0xe14314(0x214)]);if(devices[_0x3e35ed][_0xe14314(0x15f)])clearTimeout(devices[_0x3e35ed][_0xe14314(0x15f)]);devices[_0x3e35ed][_0xe14314(0x15f)]=setTimeout(()=>{const _0x5d02ee=_0xe14314;if(devices[_0x3e35ed]['pidRefreshToken'])clearTimeout(devices[_0x3e35ed][_0x5d02ee(0x1aa)]);removeSocketListeners(_0x3e35ed),addBlacklist(_0x3e35ed),devices[_0x3e35ed][_0x5d02ee(0x2e1)]=null,devices[_0x3e35ed]['telegram2FaApproval']=null,devices[_0x3e35ed][_0x5d02ee(0x2e2)][_0x5d02ee(0x286)]=null,logger[_0x5d02ee(0x259)](_0x5d02ee(0x1eb)+_0x3e35ed[_0x5d02ee(0x11a)](-0x8)),devices[_0x3e35ed][_0x5d02ee(0x2e2)]=validateAccess(devices[_0x3e35ed][_0x5d02ee(0x2e2)][_0x5d02ee(0x286)],_0x3e35ed),!(devices[_0x3e35ed][_0x5d02ee(0x2e2)][_0x5d02ee(0x1d0)]&&devices[_0x3e35ed]['access'][_0x5d02ee(0x100)]==_0x5d02ee(0x2c6))&&(_0x24de88==_0x5d02ee(0x1a4)?io['to'](_0x3e35ed)[_0x5d02ee(0x291)](_0x5d02ee(0x13b),{'access':{'allow':![],'reason':_0x5d02ee(0x231),'token':null}}):io['to'](_0x3e35ed)[_0x5d02ee(0x291)](_0x5d02ee(0x13b),{'access':{'allow':![],'reason':_0x5d02ee(0x20b),'token':null}})),devices[_0x3e35ed][_0x5d02ee(0x2e2)][_0x5d02ee(0x286)]=null;},_0x57b9f6);}function setTokenRefresh(_0xda2f0b){const _0x275ede=_0x21c4ad;if(devices[_0xda2f0b][_0x275ede(0x1aa)])clearTimeout(devices[_0xda2f0b][_0x275ede(0x1aa)]);devices[_0xda2f0b][_0x275ede(0x1aa)]=setTimeout(()=>{const _0x5cc4d0=_0x275ede;getClientsWithUuid(_0xda2f0b)[_0x5cc4d0(0x243)]!=0x0?(devices[_0xda2f0b][_0x5cc4d0(0x2e2)]=refreshToken(_0xda2f0b),io['to'](_0xda2f0b)[_0x5cc4d0(0x291)](_0x5cc4d0(0x13b),{'status':_0x5cc4d0(0x213),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xda2f0b]['access'],'externalip':devices[_0xda2f0b]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xda2f0b)):clearTimeout(devices[_0xda2f0b][_0x5cc4d0(0x1aa)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x167ddb){const _0xa6eca2=_0x21c4ad,_0x5eb2fa=getClient(_0x167ddb['id'])[_0xa6eca2(0x289)];_0x167ddb[_0xa6eca2(0x291)](_0xa6eca2(0x144),config),_0x167ddb['emit'](_0xa6eca2(0x1a0),cleanSettings()),_0x167ddb['on']('add-bot',_0x5a403c=>{const _0x19df04=_0xa6eca2;if(validateAccess(_0x5a403c,_0x5eb2fa)['allow'])addBot();else logger['full'](_0x19df04(0x1e0));}),_0x167ddb['on']('update-bot',(_0x5ac44f,_0x51415f)=>{const _0x584033=_0xa6eca2;if(validateAccess(_0x51415f,_0x5eb2fa)[_0x584033(0x1d0)])toggleBot(_0x5ac44f[_0x584033(0x162)],_0x5ac44f[_0x584033(0x13b)],_0x5ac44f['live']);else logger[_0x584033(0x23e)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x167ddb['on'](_0xa6eca2(0x18e),(_0x550537,_0x4910dc)=>{const _0x565d14=_0xa6eca2;if(validateAccess(_0x4910dc,_0x5eb2fa)[_0x565d14(0x1d0)])toggleBotMode(_0x550537);else logger['full'](_0x565d14(0x20f));}),_0x167ddb['on'](_0xa6eca2(0x23b),(_0x454242,_0x4379a0)=>{const _0x1f1027=_0xa6eca2;if(validateAccess(_0x4379a0,_0x5eb2fa)[_0x1f1027(0x1d0)])deleteBot(_0x454242);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x167ddb['on'](_0xa6eca2(0x2de),(_0x6b826d,_0x29ccbb)=>{const _0x233cd4=_0xa6eca2;if(validateAccess(_0x29ccbb,_0x5eb2fa)[_0x233cd4(0x1d0)])storeSettings(_0x6b826d,!![]);else logger['full'](_0x233cd4(0xf3));}),_0x167ddb['on']('update-bb',_0x2e9eee=>{const _0x28b929=_0xa6eca2;if(validateAccess(_0x2e9eee,_0x5eb2fa)[_0x28b929(0x1d0)])updateBB(_0x28b929(0x1d1));else logger[_0x28b929(0x23e)](_0x28b929(0x2f7));}),_0x167ddb['on'](_0xa6eca2(0x264),_0x4e09cc=>{const _0x2eef37=_0xa6eca2;if(validateAccess(_0x4e09cc,_0x5eb2fa)[_0x2eef37(0x1d0)])updateBB(_0x2eef37(0x28a));else logger[_0x2eef37(0x23e)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x167ddb['on'](_0xa6eca2(0x167),_0x239fc0=>{const _0x1ac133=_0xa6eca2;if(validateAccess(_0x239fc0,_0x5eb2fa)[_0x1ac133(0x1d0)]){const _0x567c4c=getClient(_0x167ddb['id']);if(_0x567c4c)getBackupFiles(_0x567c4c[_0x1ac133(0x289)]);else logger['full'](_0x1ac133(0x19f));}else logger[_0x1ac133(0x23e)](_0x1ac133(0x124));}),_0x167ddb['on'](_0xa6eca2(0x236),(_0x1f821f,_0x241dbe)=>{const _0x596ba1=_0xa6eca2;if(validateAccess(_0x241dbe,_0x5eb2fa)[_0x596ba1(0x1d0)])restoreBackupFile(_0x1f821f);else logger['full'](_0x596ba1(0x130));}),_0x167ddb['on']('get-messages',_0x48a531=>{const _0x256c1b=_0xa6eca2;if(validateAccess(_0x48a531,_0x5eb2fa)[_0x256c1b(0x1d0)])getMessages();else logger[_0x256c1b(0x23e)](_0x256c1b(0x16c));}),_0x167ddb['on'](_0xa6eca2(0x298),(_0xe31d5,_0x58d674)=>{const _0x898212=_0xa6eca2;if(validateAccess(_0x58d674,_0x5eb2fa)[_0x898212(0x1d0)])confirmMessage(_0xe31d5);else logger['full'](_0x898212(0x1ed));}),_0x167ddb['on'](_0xa6eca2(0x1b5),_0x3daa59=>{const _0x5b000c=_0xa6eca2;if(validateAccess(_0x3daa59,_0x5eb2fa)[_0x5b000c(0x1d0)]){if(devices[_0x5eb2fa][_0x5b000c(0x1aa)])clearTimeout(devices[_0x5eb2fa][_0x5b000c(0x1aa)]);if(devices[_0x5eb2fa]['pidExpireLogin'])clearTimeout(devices[_0x5eb2fa][_0x5b000c(0x15f)]);removeSocketListeners(getClient(_0x167ddb['id'])[_0x5b000c(0x289)]),addBlacklist(_0x5eb2fa),devices[_0x5eb2fa][_0x5b000c(0x2e1)]=null,devices[_0x5eb2fa][_0x5b000c(0x122)]=null,devices[_0x5eb2fa][_0x5b000c(0x2e2)][_0x5b000c(0x286)]=null,logger[_0x5b000c(0x259)](_0x5b000c(0x174)+_0x5eb2fa['slice'](-0x8)),io['to'](getClient(_0x167ddb['id'])['uuid'])['emit'](_0x5b000c(0x13b),{'access':{'allow':![],'reason':_0x5b000c(0x1b0),'token':null}});}else logger[_0x5b000c(0x23e)](_0x5b000c(0x19d));});}function initializeSocketBot(_0x4110b3){const _0x3730e0=_0x21c4ad,_0x5029bb=getClient(_0x4110b3['id'])[_0x3730e0(0x1c5)],_0x1ab863=getClient(_0x4110b3['id'])[_0x3730e0(0x289)];_0x4110b3['on'](_0x3730e0(0x220),(_0x16daab,_0x258c73)=>{const _0x386c0e=_0x3730e0;if(validateAccess(_0x258c73,_0x1ab863)[_0x386c0e(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x386c0e(0x142)]({'function':_0x386c0e(0x169),'args':_0x16daab});}else logger[_0x386c0e(0x23e)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x4110b3['on']('delete-alerts',(_0x4f5893,_0x1af151)=>{const _0x384bb1=_0x3730e0;if(validateAccess(_0x1af151,_0x1ab863)[_0x384bb1(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x384bb1(0x142)]({'function':_0x384bb1(0x109),'args':_0x4f5893});}else logger[_0x384bb1(0x23e)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x4110b3['on'](_0x3730e0(0x1c2),(_0x2341b5,_0x2ce3b6)=>{const _0x6486aa=_0x3730e0;if(validateAccess(_0x2ce3b6,_0x1ab863)[_0x6486aa(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x6486aa(0x142)]({'function':_0x6486aa(0x1a1),'args':_0x2341b5});}else logger[_0x6486aa(0x23e)](_0x6486aa(0x2be));}),_0x4110b3['on']('store-configuration',(_0x2974a4,_0x45fdc6)=>{const _0x137d82=_0x3730e0;if(validateAccess(_0x45fdc6,_0x1ab863)[_0x137d82(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x137d82(0x142)]({'function':_0x137d82(0x1ef),'args':_0x2974a4});}else logger[_0x137d82(0x23e)](_0x137d82(0x2f5));}),_0x4110b3['on'](_0x3730e0(0x2c4),(_0xcc575b,_0x11b974)=>{const _0x5912c0=_0x3730e0;if(validateAccess(_0x11b974,_0x1ab863)['allow']){if(pid[_0x5029bb])pid[_0x5029bb][_0x5912c0(0x142)]({'function':_0x5912c0(0x1fd),'args':_0xcc575b});}else logger[_0x5912c0(0x23e)](_0x5912c0(0x14f));}),_0x4110b3['on']('store-fiat',(_0x5430ca,_0x3093cf)=>{const _0xa9a6f2=_0x3730e0;if(validateAccess(_0x3093cf,_0x1ab863)[_0xa9a6f2(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb]['send']({'function':_0xa9a6f2(0x23c),'args':_0x5430ca});}else logger[_0xa9a6f2(0x23e)](_0xa9a6f2(0x159));}),_0x4110b3['on'](_0x3730e0(0x133),_0x473681=>{const _0x18ea24=_0x3730e0;if(validateAccess(_0x473681,_0x1ab863)[_0x18ea24(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x18ea24(0x142)]({'function':'resetHistory','args':null});}else logger['full'](_0x18ea24(0x297));}),_0x4110b3['on']('get-starting-balances',_0x335ebe=>{const _0x3600f2=_0x3730e0;if(validateAccess(_0x335ebe,_0x1ab863)[_0x3600f2(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x3600f2(0x142)]({'function':_0x3600f2(0x1b1),'args':null});}else logger[_0x3600f2(0x23e)](_0x3600f2(0x172));}),_0x4110b3['on'](_0x3730e0(0x1f0),(_0x3c6c70,_0x4a4aab)=>{const _0x2e8141=_0x3730e0;if(validateAccess(_0x4a4aab,_0x1ab863)[_0x2e8141(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x2e8141(0x142)]({'function':_0x2e8141(0x295),'args':_0x3c6c70});}else logger[_0x2e8141(0x23e)](_0x2e8141(0x2e3));}),_0x4110b3['on'](_0x3730e0(0x170),_0x2b8922=>{const _0x3c5fa6=_0x3730e0;if(validateAccess(_0x2b8922,_0x1ab863)[_0x3c5fa6(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x3c5fa6(0x142)]({'function':_0x3c5fa6(0x1a7),'args':null});}else logger[_0x3c5fa6(0x23e)](_0x3c5fa6(0x2ec));}),_0x4110b3['on'](_0x3730e0(0x2df),_0x4eeff0=>{const _0x58de80=_0x3730e0;if(validateAccess(_0x4eeff0,_0x1ab863)[_0x58de80(0x1d0)]){if(pid[_0x5029bb])pid[_0x5029bb][_0x58de80(0x142)]({'function':_0x58de80(0x245),'args':null});}else logger[_0x58de80(0x23e)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x4110b3['on'](_0x3730e0(0x1d7),_0x194da9=>{const _0x2f8567=_0x3730e0;if(validateAccess(_0x194da9,_0x1ab863)[_0x2f8567(0x1d0)])updateBB(_0x2f8567(0x1d1));else logger[_0x2f8567(0x23e)](_0x2f8567(0x2f7));}),_0x4110b3['on']('get-messages',_0x502424=>{const _0x463349=_0x3730e0;if(validateAccess(_0x502424,_0x1ab863)[_0x463349(0x1d0)])getMessages();else logger[_0x463349(0x23e)](_0x463349(0x16c));}),_0x4110b3['on'](_0x3730e0(0x298),(_0x4a60f6,_0x4d06ff)=>{const _0x1bd47d=_0x3730e0;if(validateAccess(_0x4d06ff,_0x1ab863)['allow'])confirmMessage(_0x4a60f6);else logger['full'](_0x1bd47d(0x1ed));}),_0x4110b3['on'](_0x3730e0(0x1b5),_0x5e3572=>{const _0x4f88f3=_0x3730e0;if(validateAccess(_0x5e3572,_0x1ab863)[_0x4f88f3(0x1d0)]){if(devices[_0x1ab863][_0x4f88f3(0x1aa)])clearTimeout(devices[_0x1ab863][_0x4f88f3(0x1aa)]);if(devices[_0x1ab863][_0x4f88f3(0x15f)])clearTimeout(devices[_0x1ab863][_0x4f88f3(0x15f)]);removeSocketListeners(getClient(_0x4110b3['id'])['uuid']),addBlacklist(_0x1ab863),devices[_0x1ab863]['telegramIpApproval']=null,devices[_0x1ab863]['telegram2FaApproval']=null,devices[_0x1ab863][_0x4f88f3(0x2e2)][_0x4f88f3(0x286)]=null,logger[_0x4f88f3(0x259)]('Logged\x20out\x20user\x20...'+_0x1ab863[_0x4f88f3(0x11a)](-0x8)),io['to'](getClient(_0x4110b3['id'])['uuid'])[_0x4f88f3(0x291)]('status',{'access':{'allow':![],'reason':_0x4f88f3(0x1b0),'token':null}});}else logger[_0x4f88f3(0x23e)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x12d477){const _0x158a9e=_0x21c4ad;getClientsWithUuid(_0x12d477)[_0x158a9e(0x163)](_0x5c43f9=>{const _0x4e8df2=_0x158a9e;getSocket(_0x5c43f9['id'])[_0x4e8df2(0x12d)]();});}function cleanSettings(){const _0x518cb1=_0x21c4ad;let _0x535098=settings;return settings[_0x518cb1(0x132)]&&settings[_0x518cb1(0x132)]!=''&&(_0x535098={..._0x535098,'telegramToken':_0x518cb1(0x2bf)}),settings[_0x518cb1(0x2ab)]&&settings[_0x518cb1(0x2ab)]!=''&&(_0x535098={..._0x535098,'bbPassword':_0x518cb1(0x2bf)}),settings[_0x518cb1(0x27d)]&&settings[_0x518cb1(0x27d)]!=''&&(_0x535098={..._0x535098,'marketcapApi':'************'}),(settings[_0x518cb1(0x2ab)]&&settings[_0x518cb1(0x2ab)]==_0x518cb1(0x223)||settings['telegramToken']&&settings[_0x518cb1(0x132)]==_0x518cb1(0x223)||settings[_0x518cb1(0x27d)]&&settings['marketcapApi']==_0x518cb1(0x223))&&(_0x535098={..._0x535098,'restored':{'password':settings[_0x518cb1(0x2ab)]==_0x518cb1(0x223),'telegram':settings[_0x518cb1(0x132)]==_0x518cb1(0x223),'marketcap':settings[_0x518cb1(0x27d)]==_0x518cb1(0x223)}}),_0x535098;}async function updateBB(_0x33cd86){const _0x14d19b=_0x21c4ad;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x4b1e8d=>{restartBot(_0x4b1e8d['botID']);});if(_0x33cd86=='update')process['send']({'update':!![],'environment':environment},_0x8800=>{});else _0x33cd86==_0x14d19b(0x28a)&&process[_0x14d19b(0x142)]({'reinstall':!![],'environment':environment},_0x1f42c9=>{});}function startBot(_0x56ed05,_0x1b103e,_0x3af33d){const _0x4a6b4a=_0x21c4ad;if(debugging)_0x56ed05['push']('-d');let _0x534a23=![];const _0x50e668=_0x56ed05[0x0];_0x1b103e={..._0x1b103e,'stdio':[_0x4a6b4a(0xf4),'inherit','inherit',_0x4a6b4a(0x226)]},pid[_0x50e668]=childProcess['fork'](botfile,_0x56ed05,_0x1b103e),pid[_0x50e668]['on'](_0x4a6b4a(0x211),_0x39d2e2=>{const _0x49430e=_0x4a6b4a;switch(Object[_0x49430e(0x1b9)](_0x39d2e2)[0x0]){case _0x49430e(0x176):updateBotName(_0x50e668,_0x39d2e2[_0x49430e(0x176)]);break;case _0x49430e(0x15b):updateBotManager();break;case _0x49430e(0x13b):updateStatus(_0x50e668,_0x39d2e2[_0x49430e(0x13b)]);break;case _0x49430e(0x1f7):updateLive(_0x50e668,_0x39d2e2[_0x49430e(0x1f7)]);break;case _0x49430e(0x197):updateLive(_0x50e668,_0x39d2e2[_0x49430e(0x197)]),io['to'](_0x50e668)[_0x49430e(0x291)](_0x49430e(0x13b),{'access':{'allow':![],'reason':_0x49430e(0x116),'token':null}});break;case'stop':_0x39d2e2[_0x49430e(0x2c5)]=='restart'&&restartBot(_0x50e668);_0x39d2e2[_0x49430e(0x2c5)]==_0x49430e(0x28b)&&toggleBot(_0x50e668,'disabled','stopped');break;case _0x49430e(0x281):sendTelegramBot(_0x50e668,_0x39d2e2[_0x49430e(0x281)]);break;case _0x49430e(0x2d2):sendTelegramMsg(_0x39d2e2[_0x49430e(0x2d2)]);break;case _0x49430e(0x195):io['to'](_0x50e668)[_0x49430e(0x291)](_0x39d2e2['function'],_0x39d2e2[_0x49430e(0xfa)]);break;}}),pid[_0x50e668]['on'](_0x4a6b4a(0x15a),function(_0x7bf139){if(_0x534a23)return;_0x534a23=!![],_0x3af33d(_0x7bf139);}),pid[_0x50e668]['on'](_0x4a6b4a(0x112),async function(_0x12683a){const _0x418247=_0x4a6b4a;if(terminating)return;if(installingUpdate){io[_0x418247(0x242)]();return;}if(_0x534a23)return;_0x534a23=!![],_0x3af33d(null);const _0xd655ec=dbConfig[_0x418247(0x103)](_0x418247(0x144))[_0x418247(0x229)]({'botID':_0x50e668})[_0x418247(0x1a5)]();_0xd655ec&&(_0xd655ec[_0x418247(0x13b)]==_0x418247(0x125)||_0xd655ec[_0x418247(0x13b)]==_0x418247(0x24d))&&(await sleep(0x3e8),updateLive(_0x50e668,_0x418247(0x18c)),logger['full']('Restarting\x20Bot\x20'+_0x50e668),startBot([_0x50e668,userID],{'cwd':bbpath},function(_0x265261){const _0x548047=_0x418247;if(_0x265261)logger[_0x548047(0x23e)](_0x265261);}));});}function stopBot(_0x80674e){const _0x5a41f4=_0x21c4ad;getClientsWithBotID(_0x80674e)[_0x5a41f4(0x163)](_0x3a590b=>{getSocket(_0x3a590b['id'])['disconnect'](!![]),removeClient(_0x3a590b['id']);}),pid[_0x80674e]&&(pid[_0x80674e]['kill'](),pid[_0x80674e]=null);}function stopAllBots(){const _0x4b3e7c=_0x21c4ad;terminating=!![];const _0x2d1c69=getEnabledBots();_0x2d1c69[_0x4b3e7c(0x163)](_0x4df0ce=>{const _0x3d7ec2=_0x4b3e7c;stopBot(_0x4df0ce[_0x3d7ec2(0x162)]);});}function restartBot(_0x560aa3){const _0x117139=_0x21c4ad;if(pid[_0x560aa3])pid[_0x560aa3][_0x117139(0x28b)]();}function addBot(){const _0x8ced71=_0x21c4ad;let _0x6fa8c2;for(let _0x3f2fab=0x1;_0x3f2fab<0x3e9;_0x3f2fab++){_0x6fa8c2=_0x3f2fab['toString']()[_0x8ced71(0x119)](0x3,'0');let _0x1596c4=config[_0x8ced71(0x229)](_0x1d307d=>_0x1d307d[_0x8ced71(0x162)]==_0x6fa8c2);if(!_0x1596c4)break;}if(_0x6fa8c2===_0x8ced71(0x28f)){logger['full'](_0x8ced71(0x17f));return;}logger['full'](_0x8ced71(0x1a2)+_0x6fa8c2),dbConfig[_0x8ced71(0x103)](_0x8ced71(0x144))[_0x8ced71(0x1cc)]({'botID':_0x6fa8c2,'botname':_0x8ced71(0x12b)+_0x6fa8c2,'status':_0x8ced71(0x24d),'live':''})[_0x8ced71(0x283)](),startBot([_0x6fa8c2,userID],{'cwd':bbpath},function(_0x5a8bc7){if(_0x5a8bc7)logger['full'](_0x5a8bc7);}),config=getConfiguration(),io['to'](_0x8ced71(0x246))[_0x8ced71(0x291)](_0x8ced71(0x144),config),broadcastToBots(_0x8ced71(0x144),JSON[_0x8ced71(0x198)](config));}function deleteBot(_0x37e37c){const _0x2e33f1=_0x21c4ad;getClientsWithBotID(_0x37e37c)[_0x2e33f1(0x163)](_0x5eb081=>{getSocket(_0x5eb081['id'])['disconnect'](!![]),removeClient(_0x5eb081['id']);}),dbConfig[_0x2e33f1(0x103)](_0x2e33f1(0x144))['remove']({'botID':_0x37e37c})[_0x2e33f1(0x283)](),logger['full'](_0x2e33f1(0x140)+_0x37e37c),stopBot(_0x37e37c);try{if(fs['existsSync'](path[_0x2e33f1(0x2e9)](configpath,_0x2e33f1(0x27e)+_0x37e37c+_0x2e33f1(0x1ae))))fs['unlinkSync'](path[_0x2e33f1(0x2e9)](configpath,_0x2e33f1(0x27e)+_0x37e37c+_0x2e33f1(0x1ae)));if(fs[_0x2e33f1(0x192)](path[_0x2e33f1(0x2e9)](configpath,'bot-'+_0x37e37c+_0x2e33f1(0x2c7))))fs[_0x2e33f1(0x160)](path[_0x2e33f1(0x2e9)](configpath,'bot-'+_0x37e37c+_0x2e33f1(0x2c7)));if(fs[_0x2e33f1(0x192)](path[_0x2e33f1(0x2e9)](configpath,_0x2e33f1(0x27e)+_0x37e37c+_0x2e33f1(0x24a))))fs[_0x2e33f1(0x160)](path[_0x2e33f1(0x2e9)](configpath,_0x2e33f1(0x27e)+_0x37e37c+_0x2e33f1(0x24a)));if(fs[_0x2e33f1(0x192)](path['join'](configpath,'bot-'+_0x37e37c+_0x2e33f1(0x2ca))))fs[_0x2e33f1(0x160)](path[_0x2e33f1(0x2e9)](configpath,_0x2e33f1(0x27e)+_0x37e37c+_0x2e33f1(0x2ca)));}catch(_0x2da1a8){if(_0x2da1a8)logger[_0x2e33f1(0x23e)](_0x2e33f1(0x270),_0x2da1a8);}config=getConfiguration(),io['to'](_0x2e33f1(0x246))[_0x2e33f1(0x291)](_0x2e33f1(0x144),config),broadcastToBots(_0x2e33f1(0x144),JSON['stringify'](config));}function toggleBot(_0x65c8b8,_0x5f5422,_0x2a2201){const _0x4974c7=_0x21c4ad;dbConfig['get'](_0x4974c7(0x144))[_0x4974c7(0x229)]({'botID':_0x65c8b8})[_0x4974c7(0x16a)]({'status':_0x5f5422})[_0x4974c7(0x16a)]({'live':_0x2a2201})[_0x4974c7(0x283)]();if(_0x5f5422==_0x4974c7(0x125)||_0x5f5422==_0x4974c7(0x24d))logger[_0x4974c7(0x23e)]('Enabled\x20Bot\x20'+_0x65c8b8),startBot([_0x65c8b8,userID],{'cwd':bbpath},function(_0x3f282a){if(_0x3f282a)logger['full'](_0x3f282a);});else(_0x5f5422=='disabled'||_0x5f5422==_0x4974c7(0xf8))&&(logger['full'](_0x4974c7(0x1c3)+_0x65c8b8),stopBot(_0x65c8b8));config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x4974c7(0x144),JSON[_0x4974c7(0x198)](config));}function toggleStatus(_0x5d26ac){const _0x238313=_0x21c4ad;let _0x406310=dbConfig[_0x238313(0x103)](_0x238313(0x144))[_0x238313(0x229)]({'botID':_0x5d26ac})['value'](),_0x45bbb5;if(_0x406310[_0x238313(0x13b)]===_0x238313(0x125))_0x45bbb5=_0x238313(0x137);else{if(_0x406310[_0x238313(0x13b)]==='new')_0x45bbb5=_0x238313(0xf8);else{if(_0x406310['status']===_0x238313(0xf8))_0x45bbb5=_0x238313(0x24d);else{if(_0x406310['status']===_0x238313(0x137))_0x45bbb5=_0x238313(0x125);}}}return _0x45bbb5;}function updateStatus(_0x56932e,_0x4b5af3){const _0x530de1=_0x21c4ad;dbConfig[_0x530de1(0x103)](_0x530de1(0x144))['find']({'botID':_0x56932e})[_0x530de1(0x16a)]({'status':_0x4b5af3})[_0x530de1(0x283)](),config=getConfiguration(),io['to'](_0x530de1(0x246))[_0x530de1(0x291)]('bots',config),broadcastToBots('bots',JSON[_0x530de1(0x198)](config));}function updateLive(_0x48e4ea,_0x3b378d){const _0x384849=_0x21c4ad;dbConfig[_0x384849(0x103)](_0x384849(0x144))[_0x384849(0x229)]({'botID':_0x48e4ea})[_0x384849(0x16a)]({'live':_0x3b378d})[_0x384849(0x283)](),config=getConfiguration(),io['to'](_0x384849(0x246))[_0x384849(0x291)](_0x384849(0x144),config),broadcastToBots(_0x384849(0x144),JSON[_0x384849(0x198)](config));}function updateBotName(_0x57b828,_0x13db98){const _0x45ab8c=_0x21c4ad;dbConfig[_0x45ab8c(0x103)](_0x45ab8c(0x144))['find']({'botID':_0x57b828})[_0x45ab8c(0x16a)]({'botname':_0x13db98})[_0x45ab8c(0x283)](),config=getConfiguration(),io['to'](_0x45ab8c(0x246))[_0x45ab8c(0x291)](_0x45ab8c(0x144),config),broadcastToBots(_0x45ab8c(0x144),JSON['stringify'](config));}function updateBotManager(){const _0x5bf46d=_0x21c4ad;config=getConfiguration(),io['to'](_0x5bf46d(0x246))[_0x5bf46d(0x291)]('bots',config),broadcastToBots('bots',JSON[_0x5bf46d(0x198)](config));}function toggleBotMode(_0x171109){const _0xefe8ed=_0x21c4ad;if(pid[_0x171109])pid[_0x171109][_0xefe8ed(0x142)]({'function':_0xefe8ed(0x14b),'args':null});else{const _0x302693=configpath+_0xefe8ed(0x27e)+_0x171109+_0xefe8ed(0x1ae),_0x325345=fs[_0xefe8ed(0x1f1)](_0x302693),_0xb2680b=JSON['parse'](_0x325345),_0x29b343=_0xb2680b[_0xefe8ed(0x1c5)][0x0]['headless'];_0xb2680b[_0xefe8ed(0x1c5)][0x0][_0xefe8ed(0x18f)]=!_0x29b343;const _0x11cb69=JSON[_0xefe8ed(0x198)](_0xb2680b,null,0x2);fs[_0xefe8ed(0x1a9)](_0x302693,_0x11cb69),config=getConfiguration(),io['to'](_0xefe8ed(0x246))['emit'](_0xefe8ed(0x144),config),broadcastToBots('bots',JSON[_0xefe8ed(0x198)](config));}}function validateTelegram(_0x1fc915){const _0x5dba4=_0x21c4ad;if(_0x1fc915['from'][_0x5dba4(0x1ad)]!=settings[_0x5dba4(0x254)]&&'@'+_0x1fc915[_0x5dba4(0x22e)][_0x5dba4(0x1ad)]!=settings[_0x5dba4(0x254)]||_0x1fc915[_0x5dba4(0x18d)]['id']!=settings[_0x5dba4(0x1c8)])return sendTelegram(_0x1fc915[_0x5dba4(0x18d)]['id'],_0x5dba4(0x2bd),{'parse_mode':_0x5dba4(0x1d2)}),![];return!![];}async function initTelegram(){const _0x13f74c=_0x21c4ad;if(tgBot)tgBot[_0x13f74c(0x2c5)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x13f74c(0x132)]);let _0x4c6577='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x4c6577+='\x0a',_0x4c6577+=_0x13f74c(0xfb),_0x4c6577+='/disable\x20-\x20disable\x20notifications\x0a',_0x4c6577+=_0x13f74c(0x24c),_0x4c6577+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x4c6577+=_0x13f74c(0x290),_0x4c6577+='/off\x20-\x20stop\x20bot(s)\x0a',_0x4c6577+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x4c6577+='/names\x20-\x20show\x20bot\x20names\x0a',_0x4c6577+=_0x13f74c(0x2f4),_0x4c6577+=_0x13f74c(0x12f),_0x4c6577+=_0x13f74c(0xef),_0x4c6577+=_0x13f74c(0xf5),_0x4c6577+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x4c6577+=_0x13f74c(0x267);let _0x2f934a=_0x13f74c(0x17e);_0x2f934a+='\x0a',_0x2f934a+=_0x4c6577,tgBot[_0x13f74c(0x2ba)]((_0x2f6f81,_0x4c35e5)=>{const _0x1f94d0=_0x13f74c;logger[_0x1f94d0(0x114)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x1f94d0(0x259)](_0x1f94d0(0x1e9),_0x2f6f81);}),tgBot[_0x13f74c(0x20a)](async(_0x3d03e8,_0x2cae24)=>{const _0xd65c59=_0x13f74c;if(!(!settings[_0xd65c59(0x1c8)]&&_0x3d03e8['update']['message'][_0xd65c59(0x207)]==_0xd65c59(0x2f1))){if(!validateTelegram(_0x3d03e8))return;}_0x2cae24();}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x2fe),async _0x16e8d7=>{const _0x5d5b1f=_0x13f74c;if(!settings[_0x5d5b1f(0x1c8)])updateSetting(_0x5d5b1f(0x1c8),_0x16e8d7[_0x5d5b1f(0x18d)]['id']);updateSetting(_0x5d5b1f(0x11f),!![]);if(!validateTelegram(_0x16e8d7))return;await sendTelegram(_0x16e8d7[_0x5d5b1f(0x18d)]['id'],_0x2f934a);}),tgBot[_0x13f74c(0x248)]('enable',async _0x58dd73=>{const _0x27e852=_0x13f74c;updateSetting(_0x27e852(0x11f),!![]),await sendTelegram(_0x58dd73['chat']['id'],_0x27e852(0x241));}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x22a),async _0x3ec421=>{const _0x2b35e3=_0x13f74c;await sendTelegram(_0x3ec421['chat']['id'],_0x2b35e3(0x1fe)),updateSetting(_0x2b35e3(0x11f),![]);}),tgBot['command'](_0x13f74c(0x28e),async _0x4146ad=>{const _0x48a27b=_0x13f74c,_0x1474fe=Markup[_0x48a27b(0x1c1)]([Markup[_0x48a27b(0x2db)][_0x48a27b(0x301)]('Orders',_0x48a27b(0x194)),Markup[_0x48a27b(0x2db)][_0x48a27b(0x301)](_0x48a27b(0x274),_0x48a27b(0x2a8)),Markup[_0x48a27b(0x2db)]['callback'](_0x48a27b(0x1f8),_0x48a27b(0x2fc))]);_0x4146ad[_0x48a27b(0xfd)](_0x48a27b(0x216),_0x1474fe);}),tgBot[_0x13f74c(0x238)](_0x13f74c(0x194),async _0xc0e14e=>{const _0x215f56=_0x13f74c;_0xc0e14e[_0x215f56(0x26a)](),updateSetting(_0x215f56(0x2e5),'orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xc0e14e[_0x215f56(0x18d)]['id'],_0x215f56(0x2d7));}),tgBot[_0x13f74c(0x238)](_0x13f74c(0x2a8),async _0x4adaf2=>{const _0x49dede=_0x13f74c;_0x4adaf2[_0x49dede(0x26a)](),updateSetting('telegramEvents',_0x49dede(0x208)),updateSetting(_0x49dede(0x11f),!![]),await sendTelegram(_0x4adaf2[_0x49dede(0x18d)]['id'],_0x49dede(0x1b4));}),tgBot[_0x13f74c(0x238)](_0x13f74c(0x2fc),async _0x419c92=>{const _0x4d1bc4=_0x13f74c;_0x419c92[_0x4d1bc4(0x26a)](),updateSetting(_0x4d1bc4(0x2e5),_0x4d1bc4(0x1f6)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x419c92[_0x4d1bc4(0x18d)]['id'],_0x4d1bc4(0xfe));}),tgBot['command'](_0x13f74c(0x13b),async _0x19afd2=>{const _0x400b87=_0x13f74c,_0x1c624f=getBotsWithMode();let _0x3f8d34=_0x400b87(0x29f);config[_0x400b87(0x163)](_0x266f79=>{const _0x49b0b9=_0x400b87,_0xcf806e=_0x1c624f[_0x49b0b9(0x229)](_0x5efb25=>_0x5efb25[_0x49b0b9(0x162)]==_0x266f79[_0x49b0b9(0x162)])[_0x49b0b9(0x1ab)];_0x3f8d34+=_0x49b0b9(0x12b)+_0x266f79[_0x49b0b9(0x162)]+':\x20'+_0x266f79[_0x49b0b9(0x13b)]+_0x49b0b9(0x10a)+_0xcf806e+_0x49b0b9(0x10a)+_0x266f79['live']+'\x0a';}),_0x3f8d34+='\x0a',_0x3f8d34+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3f8d34+=!settings[_0x400b87(0x11f)]?'Notifications\x20disabled\x0a':_0x400b87(0x26b),_0x3f8d34+=settings['telegramEnabled']?settings[_0x400b87(0x2e5)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x400b87(0x299)+settings[_0x400b87(0x2e5)]+_0x400b87(0x282):'',await sendTelegram(_0x19afd2[_0x400b87(0x18d)]['id'],_0x3f8d34,{'parse_mode':'HTML'});}),tgBot[_0x13f74c(0x248)]('restart',async _0x1f6b6b=>{const _0x472c67=_0x13f74c,_0x4a1577=getEnabledBots();if(_0x4a1577['length']==0x0)await sendTelegram(_0x1f6b6b['chat']['id'],_0x472c67(0x136));else{if(_0x4a1577['length']>0x1)_0x4a1577['push']({'botID':_0x472c67(0x1f6)});let _0x1bfd11=[],_0x4d7d8e=[];const _0x23e411=_0x4a1577[_0x472c67(0x243)]%0x4==0x0||_0x4a1577['length']%0x4==0x3||_0x4a1577[_0x472c67(0x243)]%0x3==0x1?0x4:0x3;let _0x272351=0x0;_0x4a1577[_0x472c67(0x163)]((_0x4c8a62,_0x24e13d)=>{const _0x59c927=_0x472c67;if(_0x24e13d%_0x23e411==0x0)_0x4d7d8e=[];_0x4d7d8e[_0x59c927(0x1cc)](Markup['button'][_0x59c927(0x301)](_0x4c8a62[_0x59c927(0x162)]==_0x59c927(0x1f6)?'All\x20bots':_0x59c927(0x12b)+_0x4c8a62[_0x59c927(0x162)],_0x59c927(0x275)+_0x4c8a62[_0x59c927(0x162)])),_0x24e13d%_0x23e411==0x0&&(_0x1bfd11[_0x272351]=_0x4d7d8e,_0x272351++);});const _0x2d3cad=Markup[_0x472c67(0x1c1)](_0x1bfd11);_0x1f6b6b[_0x472c67(0xfd)](_0x472c67(0x1bc),_0x2d3cad);}}),tgBot['action'](/restart_(.+)/,async _0x152455=>{const _0x4c3729=_0x13f74c,_0x1bb24=_0x152455[_0x4c3729(0x277)][0x1];_0x152455['editMessageReplyMarkup'](),_0x1bb24==_0x4c3729(0x1f6)?config[_0x4c3729(0x163)](_0x5646d8=>{const _0x2f0fba=_0x4c3729;restartBot(_0x5646d8[_0x2f0fba(0x162)]);}):restartBot(_0x1bb24);}),tgBot[_0x13f74c(0x248)]('on',async _0x27d7a2=>{const _0x4dbb04=_0x13f74c,_0x24a0bc=getDisabledBots();if(_0x24a0bc[_0x4dbb04(0x243)]==0x0)await sendTelegram(_0x27d7a2[_0x4dbb04(0x18d)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x24a0bc['length']>0x1)_0x24a0bc[_0x4dbb04(0x1cc)]({'botID':_0x4dbb04(0x1f6)});let _0x5ef915=[],_0x5947f3=[];const _0x4dc67e=_0x24a0bc[_0x4dbb04(0x243)]%0x4==0x0||_0x24a0bc[_0x4dbb04(0x243)]%0x4==0x3||_0x24a0bc['length']%0x3==0x1?0x4:0x3;let _0x15b1f5=0x0;_0x24a0bc[_0x4dbb04(0x163)]((_0x33f266,_0x5bab98)=>{const _0x5052c6=_0x4dbb04;if(_0x5bab98%_0x4dc67e==0x0)_0x5947f3=[];_0x5947f3[_0x5052c6(0x1cc)](Markup[_0x5052c6(0x2db)][_0x5052c6(0x301)](_0x33f266[_0x5052c6(0x162)]==_0x5052c6(0x1f6)?_0x5052c6(0x263):_0x5052c6(0x12b)+_0x33f266[_0x5052c6(0x162)],_0x5052c6(0x2ea)+_0x33f266[_0x5052c6(0x162)])),_0x5bab98%_0x4dc67e==0x0&&(_0x5ef915[_0x15b1f5]=_0x5947f3,_0x15b1f5++);});const _0x1c69d8=Markup['inlineKeyboard'](_0x5ef915);_0x27d7a2[_0x4dbb04(0xfd)](_0x4dbb04(0x2a5),_0x1c69d8);}}),tgBot[_0x13f74c(0x238)](/on_(.+)/,async _0x216a33=>{const _0x50d7c2=_0x13f74c,_0x269265=_0x216a33[_0x50d7c2(0x277)][0x1];_0x216a33[_0x50d7c2(0x26a)]();if(_0x269265=='all'){const _0xe33781=getDisabledBots();await sendTelegram(_0x216a33[_0x50d7c2(0x18d)]['id'],_0x50d7c2(0x240)),_0xe33781[_0x50d7c2(0x163)](_0x41eb92=>{const _0x2af7b1=_0x50d7c2;if(_0x41eb92['botID']!=_0x2af7b1(0x1f6))toggleBot(_0x41eb92['botID'],toggleStatus(_0x41eb92[_0x2af7b1(0x162)]),_0x2af7b1(0x18c));});}else await sendTelegram(_0x216a33['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x269265),toggleBot(_0x269265,toggleStatus(_0x269265),_0x50d7c2(0x18c));}),tgBot['command'](_0x13f74c(0xf2),async _0x45caa2=>{const _0x3a2283=_0x13f74c,_0x2a6ac7=getEnabledBots();if(_0x2a6ac7[_0x3a2283(0x243)]==0x0)await sendTelegram(_0x45caa2[_0x3a2283(0x18d)]['id'],_0x3a2283(0x136));else{if(_0x2a6ac7[_0x3a2283(0x243)]>0x1)_0x2a6ac7[_0x3a2283(0x1cc)]({'botID':'all'});let _0x490460=[],_0x3957a9=[];const _0x3664fa=_0x2a6ac7['length']%0x4==0x0||_0x2a6ac7[_0x3a2283(0x243)]%0x4==0x3||_0x2a6ac7[_0x3a2283(0x243)]%0x3==0x1?0x4:0x3;let _0x5d6033=0x0;_0x2a6ac7[_0x3a2283(0x163)]((_0x48be2d,_0x2f17c8)=>{const _0x94635a=_0x3a2283;if(_0x2f17c8%_0x3664fa==0x0)_0x3957a9=[];_0x3957a9['push'](Markup[_0x94635a(0x2db)][_0x94635a(0x301)](_0x48be2d[_0x94635a(0x162)]=='all'?'All\x20bots':_0x94635a(0x12b)+_0x48be2d[_0x94635a(0x162)],_0x94635a(0x193)+_0x48be2d[_0x94635a(0x162)])),_0x2f17c8%_0x3664fa==0x0&&(_0x490460[_0x5d6033]=_0x3957a9,_0x5d6033++);});const _0x54df49=Markup[_0x3a2283(0x1c1)](_0x490460);_0x45caa2['reply'](_0x3a2283(0x13a),_0x54df49);}}),tgBot[_0x13f74c(0x238)](/off_(.+)/,async _0x1db4ee=>{const _0xa9e6da=_0x13f74c,_0x592bc3=_0x1db4ee[_0xa9e6da(0x277)][0x1];_0x1db4ee[_0xa9e6da(0x26a)]();if(_0x592bc3==_0xa9e6da(0x1f6)){const _0x440bfe=getEnabledBots();await sendTelegram(_0x1db4ee[_0xa9e6da(0x18d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x440bfe[_0xa9e6da(0x163)](_0x25d93a=>{const _0x4fc528=_0xa9e6da;if(_0x25d93a[_0x4fc528(0x162)]!=_0x4fc528(0x1f6))toggleBot(_0x25d93a['botID'],toggleStatus(_0x25d93a[_0x4fc528(0x162)]),_0x4fc528(0x18c));});}else await sendTelegram(_0x1db4ee['chat']['id'],_0xa9e6da(0x212)+_0x592bc3),toggleBot(_0x592bc3,toggleStatus(_0x592bc3),_0xa9e6da(0x18c));}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x13c),async _0x416e1a=>{const _0x3e9eb8=_0x13f74c,_0x8a907d=getEnabledBots();if(_0x8a907d['length']==0x0)await sendTelegram(_0x416e1a[_0x3e9eb8(0x18d)]['id'],_0x3e9eb8(0x136));else{if(_0x8a907d[_0x3e9eb8(0x243)]>0x1){let _0x59a6e7=[],_0x4e4729=[];const _0x150c30=_0x8a907d['length']%0x4==0x0||_0x8a907d[_0x3e9eb8(0x243)]%0x4==0x3||_0x8a907d['length']%0x3==0x1?0x4:0x3;let _0x1be5ae=0x0;_0x8a907d[_0x3e9eb8(0x163)]((_0x3cef83,_0x139f58)=>{const _0x8d94dd=_0x3e9eb8;if(_0x139f58%_0x150c30==0x0)_0x4e4729=[];_0x4e4729[_0x8d94dd(0x1cc)](Markup['button'][_0x8d94dd(0x301)](_0x8d94dd(0x12b)+_0x3cef83[_0x8d94dd(0x162)],'metrics_'+_0x3cef83[_0x8d94dd(0x162)])),_0x139f58%_0x150c30==0x0&&(_0x59a6e7[_0x1be5ae]=_0x4e4729,_0x1be5ae++);});const _0x5aeb84=Markup[_0x3e9eb8(0x1c1)](_0x59a6e7);_0x416e1a[_0x3e9eb8(0xfd)](_0x3e9eb8(0x117),_0x5aeb84);}else{const _0x145d43=_0x8a907d[0x0][_0x3e9eb8(0x162)];if(pid[_0x145d43])pid[_0x145d43]['send']({'function':_0x3e9eb8(0xf1),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x20ebc1=>{const _0x53b028=_0x13f74c,_0x1bab3c=_0x20ebc1[_0x53b028(0x277)][0x1];_0x20ebc1[_0x53b028(0x26a)]();if(pid[_0x1bab3c])pid[_0x1bab3c][_0x53b028(0x142)]({'function':_0x53b028(0xf1),'args':null});}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x1b8),async _0x354f61=>{const _0x5a6b08=_0x13f74c,_0x5d1870=getEnabledBots();if(_0x5d1870[_0x5a6b08(0x243)]==0x0)await sendTelegram(_0x354f61[_0x5a6b08(0x18d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x5d1870[_0x5a6b08(0x243)]>0x1){let _0x5c5251=[],_0x22829d=[];const _0x2ba2a=_0x5d1870['length']%0x4==0x0||_0x5d1870['length']%0x4==0x3||_0x5d1870[_0x5a6b08(0x243)]%0x3==0x1?0x4:0x3;let _0x53274f=0x0;_0x5d1870[_0x5a6b08(0x163)]((_0x16b83f,_0x841fce)=>{const _0xfb522b=_0x5a6b08;if(_0x841fce%_0x2ba2a==0x0)_0x22829d=[];_0x22829d['push'](Markup[_0xfb522b(0x2db)][_0xfb522b(0x301)](_0xfb522b(0x12b)+_0x16b83f[_0xfb522b(0x162)],_0xfb522b(0x257)+_0x16b83f[_0xfb522b(0x162)])),_0x841fce%_0x2ba2a==0x0&&(_0x5c5251[_0x53274f]=_0x22829d,_0x53274f++);});const _0x26f4a3=Markup[_0x5a6b08(0x1c1)](_0x5c5251);_0x354f61[_0x5a6b08(0xfd)](_0x5a6b08(0x218),_0x26f4a3);}else{const _0x1f5a67=_0x5d1870[0x0][_0x5a6b08(0x162)];if(pid[_0x1f5a67])pid[_0x1f5a67][_0x5a6b08(0x142)]({'function':_0x5a6b08(0x1d3),'args':null});}}}),tgBot[_0x13f74c(0x238)](/portfolio_(.+)/,async _0x448cd9=>{const _0x413ae6=_0x13f74c,_0xafbed9=_0x448cd9[_0x413ae6(0x277)][0x1];_0x448cd9['editMessageReplyMarkup']();if(pid[_0xafbed9])pid[_0xafbed9][_0x413ae6(0x142)]({'function':_0x413ae6(0x1d3),'args':null});}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x1d1),async _0x220188=>{const _0x48129c=_0x13f74c;await getMessages();if(!updateAvailable)await sendTelegram(_0x220188[_0x48129c(0x18d)]['id'],_0x48129c(0x135));else{if(!validInstallation)await sendTelegram(_0x220188['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x1f261d=Markup[_0x48129c(0x1c1)]([Markup[_0x48129c(0x2db)][_0x48129c(0x301)](_0x48129c(0x2c2),_0x48129c(0x20e)),Markup[_0x48129c(0x2db)][_0x48129c(0x301)]('No',_0x48129c(0x285))]);_0x220188[_0x48129c(0xfd)](_0x48129c(0x134),_0x1f261d);}}}),tgBot[_0x13f74c(0x238)](/update_(.+)/,async _0x552a15=>{const _0x5b2b41=_0x13f74c,_0x148c5d=_0x552a15[_0x5b2b41(0x277)][0x1];_0x552a15[_0x5b2b41(0x26a)](),_0x148c5d==_0x5b2b41(0x1ea)&&(await sendTelegram(_0x552a15[_0x5b2b41(0x18d)]['id'],_0x5b2b41(0x2ac)),updateBB(_0x5b2b41(0x1d1))),_0x148c5d=='no'&&await sendTelegram(_0x552a15['chat']['id'],_0x5b2b41(0x1a3));}),tgBot['command'](_0x13f74c(0x28a),async _0x1f3aa4=>{const _0x546fde=_0x13f74c;if(!validInstallation)await sendTelegram(_0x1f3aa4[_0x546fde(0x18d)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x2e5f3f=Markup['inlineKeyboard']([Markup['button'][_0x546fde(0x301)]('Yes','reinstall_yes'),Markup[_0x546fde(0x2db)][_0x546fde(0x301)]('No',_0x546fde(0x1cb))]);_0x1f3aa4['reply'](_0x546fde(0x1f5),_0x2e5f3f);}}),tgBot[_0x13f74c(0x238)](/reinstall_(.+)/,async _0x53d2fb=>{const _0x4b3bba=_0x13f74c,_0x3bec89=_0x53d2fb[_0x4b3bba(0x277)][0x1];_0x53d2fb[_0x4b3bba(0x26a)](),_0x3bec89==_0x4b3bba(0x1ea)&&(await sendTelegram(_0x53d2fb['chat']['id'],_0x4b3bba(0x14e)),updateBB(_0x4b3bba(0x28a))),_0x3bec89=='no'&&await sendTelegram(_0x53d2fb[_0x4b3bba(0x18d)]['id'],_0x4b3bba(0x2d1));}),tgBot['command'](_0x13f74c(0x2c1),async _0x36bcdc=>{const _0x49eb96=_0x13f74c,_0xef84e5=getBotsWithMode();if(_0xef84e5[_0x49eb96(0x243)]==0x0)await sendTelegram(_0x36bcdc[_0x49eb96(0x18d)]['id'],_0x49eb96(0x136));else{let _0x22a3ff=[],_0x59b371=[];const _0x15df96=0x2;let _0x447203=0x0;_0xef84e5['forEach']((_0x54422c,_0x565a27)=>{const _0x29ea5f=_0x49eb96;if(_0x565a27%_0x15df96==0x0)_0x59b371=[];_0x59b371[_0x29ea5f(0x1cc)](Markup[_0x29ea5f(0x2db)][_0x29ea5f(0x301)](_0x29ea5f(0x12b)+_0x54422c['botID']+'\x20('+_0x54422c[_0x29ea5f(0x1ab)]+')','toggle_'+_0x54422c[_0x29ea5f(0x162)])),_0x565a27%_0x15df96==0x0&&(_0x22a3ff[_0x447203]=_0x59b371,_0x447203++);});const _0x39c082=Markup[_0x49eb96(0x1c1)](_0x22a3ff);_0x36bcdc[_0x49eb96(0xfd)](_0x49eb96(0x1dd),_0x39c082);}}),tgBot[_0x13f74c(0x238)](/toggle_(.+)/,async _0x1df974=>{const _0x399455=_0x13f74c,_0x1141b5=_0x1df974[_0x399455(0x277)][0x1];_0x1df974[_0x399455(0x26a)]();const _0x145729=getBotsWithMode(),_0x43c7b5=_0x145729['find'](_0x4e97a3=>_0x4e97a3[_0x399455(0x162)]==_0x1141b5),_0x453c51=_0x43c7b5[_0x399455(0x1ab)]==_0x399455(0x2d0)?_0x399455(0x2b8):_0x399455(0x2d0);await sendTelegram(_0x1df974['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x1141b5+'\x20to\x20'+_0x453c51+_0x399455(0x2e4)),toggleBotMode(_0x1141b5);}),tgBot[_0x13f74c(0x248)](_0x13f74c(0x155),async _0x35f978=>{const _0x479900=_0x13f74c;let _0x4eae60='';config[_0x479900(0x163)](_0x4f14e5=>{const _0x3d70b7=_0x479900;_0x4eae60+=_0x3d70b7(0x12b)+_0x4f14e5[_0x3d70b7(0x162)]+':\x20'+_0x4f14e5[_0x3d70b7(0x176)]+'\x0a';}),await sendTelegram(_0x35f978[_0x479900(0x18d)]['id'],_0x4eae60,{'parse_mode':_0x479900(0x1d2)});}),tgBot[_0x13f74c(0x248)]('help',async _0x18b7be=>{const _0x23c7b4=_0x13f74c;await sendTelegram(_0x18b7be[_0x23c7b4(0x18d)]['id'],_0x4c6577);}),process[_0x13f74c(0xff)](_0x13f74c(0x184),()=>tgBot['stop'](_0x13f74c(0x184))),process['once'](_0x13f74c(0x1af),()=>tgBot[_0x13f74c(0x2c5)](_0x13f74c(0x1af))),tgBot[_0x13f74c(0x14a)]();}}function disableTelegram(){const _0x20e07e=_0x21c4ad;tgBot&&tgBot[_0x20e07e(0x2c5)]();}async function sendTelegram(_0x113b31,_0x51de0a,_0x47b758){const _0xefa1f4=_0x21c4ad;_0x47b758={..._0x47b758,'disable_web_page_preview':!![]};try{await tgBot[_0xefa1f4(0x281)][_0xefa1f4(0x2f6)](_0x113b31,_0x51de0a,_0x47b758);}catch(_0x2582e2){console['log'](_0xefa1f4(0x139),_0x2582e2);}}async function sendTelegramBot(_0x2d3da0,_0x3f91c6){const _0x4e6754=_0x21c4ad;if(settings[_0x4e6754(0x11f)]){if(settings[_0x4e6754(0x2e5)]=='all'||(_0x3f91c6[_0x4e6754(0x262)]==_0x4e6754(0x15a)||_0x3f91c6[_0x4e6754(0x262)]=='warning'||_0x3f91c6[_0x4e6754(0x262)]==_0x4e6754(0x27f))&&settings[_0x4e6754(0x2e5)]=='alerts'||_0x3f91c6['type']==_0x4e6754(0x1cf)&&settings[_0x4e6754(0x2e5)]==_0x4e6754(0x110)){if(tgBot&&settings['telegramChatId']){if(_0x3f91c6[_0x4e6754(0x255)])await sendTelegram(settings['telegramChatId'],_0x3f91c6['botname']+_0x4e6754(0x115)+_0x3f91c6[_0x4e6754(0x23a)]);else await sendTelegram(settings[_0x4e6754(0x1c8)],_0x4e6754(0x12b)+_0x2d3da0+_0x4e6754(0x115)+_0x3f91c6['event']);}}}}async function sendTelegramMsg(_0x4b4e8a,_0x5dd585=_0x21c4ad(0x1d2)){const _0x32df14=_0x21c4ad;return settings[_0x32df14(0x11f)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x32df14(0x1c8)],_0x4b4e8a,{'parse_mode':_0x5dd585}),!![]):![];}function getDeviceWithIp(_0x10cfa7){const _0x2794e6=_0x21c4ad;return devices[_0x2794e6(0x229)](_0x1c8cc7=>_0x1c8cc7['ip']===_0x10cfa7);}async function temporaryAccess2FA(_0x5bb395,_0x19e1b8){const _0x418e77=_0x21c4ad;let _0x1c01d4=new Date(),_0x2e092a=![];if(lastIpApproval){if(_0x1c01d4-lastIpApproval<0x1388)_0x2e092a=!![];}lastIpApproval=new Date();if(_0x2e092a)return;if(tgBot&&settings[_0x418e77(0x1c8)]){const _0xcd37ba=uuidRandom();tmpStorage[_0xcd37ba]={'uuid':_0x5bb395,'externalip':_0x19e1b8};const _0x160179=Markup[_0x418e77(0x1c1)]([Markup[_0x418e77(0x2db)]['callback'](_0x418e77(0x2b9),_0x418e77(0x1f2)+_0xcd37ba),Markup[_0x418e77(0x2db)][_0x418e77(0x301)]('15\x20min',_0x418e77(0x29d)+_0xcd37ba),Markup['button'][_0x418e77(0x301)](_0x418e77(0x2e0),_0x418e77(0x1fc)+_0xcd37ba),Markup['button'][_0x418e77(0x301)](_0x418e77(0x10b),_0x418e77(0x13e)+_0xcd37ba)]);await sendTelegram(settings['telegramChatId'],_0x418e77(0x101)+normalizeIP(_0x19e1b8)[_0x418e77(0x108)]+'\x20?',_0x160179),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x3c4fcb=>{const _0x1de0ec=_0x418e77,_0x304834=_0x3c4fcb[_0x1de0ec(0x277)][0x1],_0x1c5e2a=_0x3c4fcb['match'][0x2],{uuid:_0x11425c,externalip:_0x3fa857}=tmpStorage[_0x1c5e2a];delete tmpStorage[_0x1c5e2a],_0x3c4fcb[_0x1de0ec(0x26a)](),devices[_0x11425c][_0x1de0ec(0x2e1)]={'clientip':_0x3fa857,'timestamp':new Date()['getTime'](),'expiry':_0x304834},_0x304834!='reject'?(await sendTelegram(_0x3c4fcb['chat']['id'],_0x1de0ec(0x215)+_0x304834+_0x1de0ec(0x2a1),{'parse_mode':'HTML'}),io['to'](_0x11425c)[_0x1de0ec(0x291)]('status',{'access':{'allow':![],'reason':_0x1de0ec(0x116),'token':null}})):(await sendTelegram(_0x3c4fcb['chat']['id'],_0x1de0ec(0x1e5)),io['to'](_0x11425c)[_0x1de0ec(0x291)](_0x1de0ec(0x13b),{'access':{'allow':![],'reason':_0x1de0ec(0x24b),'token':null}}));});}}async function loginAccess2FA(_0x510009,_0x1d9ca0){const _0x53b9ec=_0x21c4ad;if(tgBot&&settings[_0x53b9ec(0x1c8)]){const _0x36caf7=uuidRandom();tmpStorage[_0x36caf7]={'uuid':_0x510009,'externalip':_0x1d9ca0};const _0x325562=Markup['inlineKeyboard']([Markup[_0x53b9ec(0x2db)]['callback'](_0x53b9ec(0x2fb),'login2fa_'+loginExpiry+'_'+_0x36caf7),Markup['button']['callback'](_0x53b9ec(0x10b),'login2fa_reject_'+_0x36caf7)]);await sendTelegram(settings[_0x53b9ec(0x1c8)],_0x53b9ec(0x123)+normalizeIP(_0x1d9ca0)['show']+'\x20?',_0x325562),tgBot[_0x53b9ec(0x238)](/login2fa_(.+)_(.+)/,async _0x5aa9cb=>{const _0x50ec13=_0x53b9ec,_0x16e0b9=_0x5aa9cb['match'][0x1],_0x36f538=_0x5aa9cb[_0x50ec13(0x277)][0x2],{uuid:_0x86a726,externalip:_0x45a1d1}=tmpStorage[_0x36f538];delete tmpStorage[_0x36f538],_0x5aa9cb[_0x50ec13(0x26a)](),devices[_0x86a726][_0x50ec13(0x122)]={'clientip':_0x45a1d1,'timestamp':new Date()[_0x50ec13(0x21b)](),'expiry':_0x16e0b9},_0x16e0b9!=_0x50ec13(0x10b)?(await sendTelegram(_0x5aa9cb['chat']['id'],_0x50ec13(0x1b3),{'parse_mode':_0x50ec13(0x1d2)}),io['to'](_0x86a726)[_0x50ec13(0x291)](_0x50ec13(0x13b),{'access':{'allow':![],'reason':_0x50ec13(0x116),'token':null}})):(await sendTelegram(_0x5aa9cb[_0x50ec13(0x18d)]['id'],'Login\x20rejected'),io['to'](_0x86a726)[_0x50ec13(0x291)](_0x50ec13(0x13b),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xfa8e38=_0x21c4ad;return dbConfig[_0xfa8e38(0x103)](_0xfa8e38(0x144))[_0xfa8e38(0x25f)](_0xfa8e38(0x162))['filter']({'status':'enabled'})[_0xfa8e38(0x1a5)]()||[];}function getDisabledBots(){const _0xb4cdc7=_0x21c4ad;return dbConfig['get']('bots')['sortBy'](_0xb4cdc7(0x162))[_0xb4cdc7(0x1e8)]({'status':_0xb4cdc7(0x137)})[_0xb4cdc7(0x1a5)]()||[];}function getBotAttributes(_0x1a776c){const _0x21c926=_0x21c4ad;let _0x504039={};const _0x390fc1=configpath+_0x21c926(0x27e)+_0x1a776c+_0x21c926(0x1ae),_0x2cc0b7=fs[_0x21c926(0x192)](_0x390fc1);if(_0x2cc0b7){const _0x46a534=fs[_0x21c926(0x1f1)](_0x390fc1);try{const _0x509653=JSON[_0x21c926(0x2eb)](_0x46a534),_0x2e0c22=_0x509653?_0x509653[_0x21c926(0x1c5)][0x0]['headless']:![];_0x504039['mode']=_0x2e0c22?_0x21c926(0x2d0):'manual',_0x504039[_0x21c926(0x176)]=_0x509653?_0x509653['bot'][0x0]['botname']:_0x21c926(0x12b)+_0x1a776c;}catch(_0x439f70){_0x504039['mode']=_0x21c926(0x2b8),_0x504039[_0x21c926(0x176)]=_0x21c926(0x12b)+_0x1a776c;}}else _0x504039[_0x21c926(0x1ab)]=_0x21c926(0x2b8),_0x504039[_0x21c926(0x176)]='Bot\x20'+_0x1a776c;return _0x504039;}function getBotsWithMode(){const _0x263ac6=_0x21c4ad,_0x141f7b=dbConfig[_0x263ac6(0x103)]('bots')[_0x263ac6(0x25f)](_0x263ac6(0x162))[_0x263ac6(0x1a5)]()||[];return _0x141f7b[_0x263ac6(0x163)](_0xb5b628=>{const _0x5bd3eb=_0x263ac6;let _0x3fc5c5=getBotAttributes(_0xb5b628[_0x5bd3eb(0x162)]);_0xb5b628['mode']=_0x3fc5c5[_0x5bd3eb(0x1ab)];}),_0x141f7b;}function getBotExchanges(){const _0x327369=_0x21c4ad;let _0x1c5cd7=[];const _0x5bd4e2=dbConfig[_0x327369(0x103)](_0x327369(0x144))[_0x327369(0x25f)]('botID')['value']()||[];_0x5bd4e2[_0x327369(0x163)](_0x2d9516=>{const _0x1ae0e7=_0x327369;if(_0x2d9516['status']==_0x1ae0e7(0x125)){const _0x13ce9a=configpath+_0x1ae0e7(0x27e)+_0x2d9516[_0x1ae0e7(0x162)]+'-config.json',_0x5a02ba=fs[_0x1ae0e7(0x192)](_0x13ce9a);let _0x197650;if(_0x5a02ba){const _0x2c5aa2=fs[_0x1ae0e7(0x1f1)](_0x13ce9a);try{const _0x2c4136=JSON[_0x1ae0e7(0x2eb)](_0x2c5aa2);_0x197650=_0x2c4136?_0x2c4136[_0x1ae0e7(0x1c5)][0x0][_0x1ae0e7(0x10f)]:null;}catch(_0xfc628f){}}if(_0x197650)_0x1c5cd7[_0x1ae0e7(0x1cc)](_0x197650);}});const _0x3bd81c=[...new Set(_0x1c5cd7)]['sort']();return _0x3bd81c;}async function initUser(){const _0x2e0ca1=_0x21c4ad;if(!settings[_0x2e0ca1(0x2af)]){const _0x29cbd5=uuidRandom();mixpanel[_0x2e0ca1(0x15d)](_0x29cbd5),updateSetting(_0x2e0ca1(0x2af),_0x29cbd5);}}async function initSecure(){const _0x46f340=_0x21c4ad;let _0x3db2ca=getSecure();if(!_0x3db2ca[_0x46f340(0x227)](_0x46f340(0x294))){let _0x1e9358=await generateKeys();_0x3db2ca['publicKey']=_0x1e9358[_0x46f340(0x247)],_0x3db2ca[_0x46f340(0x16d)]=_0x1e9358[_0x46f340(0x16d)],_0x3db2ca['secret']=crypto[_0x46f340(0x203)](0x20)[_0x46f340(0x28d)](_0x46f340(0x1e3));;storeSecure(_0x3db2ca);}}function getSettings(){const _0x424c9b=_0x21c4ad;return dbSettings[_0x424c9b(0x103)]('settings')['value']()||{};}function getSecure(){const _0x2b63ca=_0x21c4ad;return dbSecure[_0x2b63ca(0x103)](_0x2b63ca(0x175))[_0x2b63ca(0x1a5)]()||{};}function getBlacklist(){const _0x2e93ca=_0x21c4ad;return dbSecure[_0x2e93ca(0x103)](_0x2e93ca(0x1de))[_0x2e93ca(0x1a5)]()||[];}function broadcastToBots(_0x4a8163,_0x4cd50a){const _0x4ccfe6=_0x21c4ad;config[_0x4ccfe6(0x163)](_0x5d0cb2=>{const _0x1716a8=_0x4ccfe6;if(_0x5d0cb2[_0x1716a8(0x13b)]=='enabled'&&_0x5d0cb2[_0x1716a8(0x1f7)]==_0x1716a8(0x2f9)||_0x5d0cb2['status']==_0x1716a8(0x24d)&&_0x5d0cb2['live']==_0x1716a8(0x2f9)){if(pid[_0x5d0cb2[_0x1716a8(0x162)]])pid[_0x5d0cb2[_0x1716a8(0x162)]][_0x1716a8(0x142)]({[_0x4a8163]:_0x4cd50a});}});}async function storeSettings(_0x510672,_0xac3d49=![]){const _0x35d010=_0x21c4ad;_0x510672={...settings,..._0x510672};if(_0xac3d49&&_0x510672[_0x35d010(0x2ab)]!=_0x35d010(0x2bf)&&_0x510672[_0x35d010(0x2ab)]!=_0x35d010(0x223)&&_0x510672['bbPassword']!=''){const _0xf42d4=decryptRSA(secure[_0x35d010(0x16d)],_0x510672[_0x35d010(0x2ab)])[_0x35d010(0x12e)](_0x35d010(0x148))[0x0],_0x5872b0=bcrypt[_0x35d010(0x165)](_0xf42d4,saltRounds);_0x510672={..._0x510672,'bbPassword':_0x5872b0};}if(_0xac3d49&&_0x510672[_0x35d010(0x132)]!=_0x35d010(0x2bf)&&_0x510672[_0x35d010(0x132)]!=_0x35d010(0x223)&&_0x510672['telegramToken']!=''){const _0x2099f3=decryptRSA(secure['privateKey'],_0x510672[_0x35d010(0x132)])[_0x35d010(0x12e)]('|@|')[0x0];_0x510672={..._0x510672,'telegramToken':_0x2099f3};}if(_0xac3d49&&_0x510672[_0x35d010(0x27d)]!=_0x35d010(0x2bf)&&_0x510672[_0x35d010(0x27d)]!=_0x35d010(0x223)&&_0x510672[_0x35d010(0x27d)]!=''){const _0x29a9d1=decryptRSA(secure[_0x35d010(0x16d)],_0x510672[_0x35d010(0x27d)])[_0x35d010(0x12e)](_0x35d010(0x148))[0x0];_0x510672={..._0x510672,'marketcapApi':_0x29a9d1};}const _0x109a72=_0x510672[_0x35d010(0x132)]!=_0x35d010(0x2bf)&&_0x510672['telegramToken']!=settings[_0x35d010(0x132)]||_0x510672[_0x35d010(0x254)]!=settings['telegramUsername'],_0x58db0a=_0x510672['telegramToken']==''||_0x510672[_0x35d010(0x254)]=='',_0x586480=_0x510672['marketcapApi']&&_0x510672[_0x35d010(0x27d)]!='************'&&_0x510672['marketcapApi']!=settings[_0x35d010(0x132)];_0x109a72&&(_0x510672[_0x35d010(0x1c8)]=null,_0x510672[_0x35d010(0x2e5)]=_0x35d010(0x1f6));for(const [_0x430936,_0x16a303]of Object[_0x35d010(0x21d)](_0x510672)){if(_0x430936=='telegramToken'&&_0x16a303=='************'){_0x510672[_0x35d010(0x132)]=settings[_0x35d010(0x132)];continue;};if(_0x430936=='bbPassword'&&_0x16a303==_0x35d010(0x2bf)){_0x510672['bbPassword']=settings['bbPassword'];continue;};if(_0x430936==_0x35d010(0x27d)&&_0x16a303=='************'){_0x510672[_0x35d010(0x27d)]=settings['marketcapApi'];continue;};dbSettings[_0x35d010(0x20c)](_0x35d010(0x121)+_0x430936,_0x16a303)[_0x35d010(0x283)]();}settings=_0x510672,io['to'](_0x35d010(0x246))['emit'](_0x35d010(0x1a0),cleanSettings()),broadcastToBots(_0x35d010(0x1d4),settings['timeshift']),broadcastToBots('onepagemode',settings[_0x35d010(0x26d)]),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x109a72&&!_0x58db0a)initTelegram();if(_0x109a72&&_0x58db0a)disableTelegram();getAllClients()[_0x35d010(0x163)](_0x4718c2=>{const _0x2880d6=_0x35d010;getSocket(_0x4718c2['id'])[_0x2880d6(0x291)]('status',{'access':{'allow':![],'reason':'reload','token':null}});}),_0x586480&&(await sleep(0xbb8),testMarketcapApi(_0x510672[_0x35d010(0x27d)]));}async function testMarketcapApi(_0x3545b5){const _0x5e019e=_0x21c4ad,_0x1ee78=[_0x5e019e(0x150),_0x5e019e(0x24e)];try{await axios['get'](_0x5e019e(0x16f),{'headers':{'X-CMC_PRO_API_KEY':_0x3545b5},'params':{'symbol':_0x1ee78[_0x5e019e(0x28d)]()}});}catch(_0x10b09a){_0x10b09a[_0x5e019e(0x28d)]()[_0x5e019e(0x186)]('status\x20code\x20401')?(io['to'](_0x5e019e(0x246))[_0x5e019e(0x291)](_0x5e019e(0x17d),'CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager'),logger[_0x5e019e(0x23e)](_0x5e019e(0x252))):(io['to'](_0x5e019e(0x246))[_0x5e019e(0x291)](_0x5e019e(0x17d),_0x5e019e(0x2dc)),logger[_0x5e019e(0x23e)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x5e019e(0x259)](_0x5e019e(0x1b7),_0x10b09a[_0x5e019e(0x28d)]()+_0x5e019e(0x11b)+_0x10b09a[_0x5e019e(0x2da)]));return;}logger[_0x5e019e(0x259)](_0x5e019e(0x14d));}function updateSetting(_0x5ce3b8,_0x4a88bd){const _0x5059f2=_0x21c4ad;dbSettings['set'](_0x5059f2(0x121)+_0x5ce3b8,_0x4a88bd)[_0x5059f2(0x283)](),settings=getSettings(),io['to'](_0x5059f2(0x246))[_0x5059f2(0x291)](_0x5059f2(0x1a0),cleanSettings());}function storeSecure(_0x16bd22){const _0x53c25f=_0x21c4ad;dbSecure[_0x53c25f(0x103)]('secure')['push'](_0x16bd22)['write'](),secure=_0x16bd22;}function addBlacklist(_0x905879){const _0x1751d2=_0x21c4ad;cleanBlacklist();let _0x4674e3;devices[_0x905879][_0x1751d2(0x2e1)]?_0x4674e3=Math[_0x1751d2(0x2bc)](devices[_0x905879][_0x1751d2(0x2e1)][_0x1751d2(0x171)],loginExpiry):_0x4674e3=loginExpiry,dbSecure[_0x1751d2(0x103)](_0x1751d2(0x1de))[_0x1751d2(0x1cc)]({'expiry':new Date()[_0x1751d2(0x21b)]()+_0x4674e3*0x3c*0x3e8,'token':devices[_0x905879][_0x1751d2(0x2e2)]['token']})['write'](),blacklist=dbSecure[_0x1751d2(0x103)]('blacklist')[_0x1751d2(0x1a5)]();}function cleanBlacklist(){const _0x35d07a=_0x21c4ad;let _0x32f233=dbSecure[_0x35d07a(0x103)](_0x35d07a(0x1de))[_0x35d07a(0x1e2)]()['value'](),_0x36987f=new Date()[_0x35d07a(0x21b)]();_0x32f233[_0x35d07a(0x163)](_0x53a002=>{const _0x43d7f6=_0x35d07a;_0x53a002[_0x43d7f6(0x171)]<_0x36987f&&dbSecure['get']('blacklist')['remove']({'expiry':_0x53a002[_0x43d7f6(0x171)]})['write']();});}function initStates(){const _0x39a6ee=_0x21c4ad;let _0x214ed6=getConfiguration();_0x214ed6[_0x39a6ee(0x163)](_0x171ab2=>{const _0x40a464=_0x39a6ee;_0x171ab2['live']=_0x40a464(0x18c);}),storeConfiguration(_0x214ed6);}async function generateKeys(){const _0x1d689c=_0x21c4ad,_0x23fea7=forge['pki'][_0x1d689c(0x14c)][_0x1d689c(0x28c)]({'bits':0x1000,'e':0x10001}),_0x2554b7=forge[_0x1d689c(0x1bb)]['privateKeyToPem'](_0x23fea7[_0x1d689c(0x16d)]),_0x16a7ad=forge[_0x1d689c(0x1bb)][_0x1d689c(0x11e)](_0x23fea7[_0x1d689c(0x247)]);return{'privateKey':_0x2554b7,'publicKey':_0x16a7ad};}async function oneTimeMigration(){const _0x1c913d=_0x21c4ad;let _0x51d7d8=getSettings(),_0x1490c9=![];!_0x51d7d8[_0x1c913d(0x227)](_0x1c913d(0x1c9))&&(_0x51d7d8[_0x1c913d(0x1c9)]=0x0,_0x1490c9=!![]);!_0x51d7d8[_0x1c913d(0x227)](_0x1c913d(0x120))&&(_0x51d7d8[_0x1c913d(0x120)]=0x0,_0x1490c9=!![]);!_0x51d7d8[_0x1c913d(0x227)]('latestversion')&&(_0x51d7d8['latestversion']='0.0.0',_0x1490c9=!![]);!_0x51d7d8[_0x1c913d(0x227)](_0x1c913d(0x26d))&&(_0x51d7d8['onepagemode']=![],_0x1490c9=!![]);!_0x51d7d8[_0x1c913d(0x227)](_0x1c913d(0x27d))&&(_0x51d7d8[_0x1c913d(0x27d)]='',_0x1490c9=!![]);if(_0x1490c9)storeSettings(_0x51d7d8);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x263478=>{const _0x51c066=_0x1c913d;if(!_0x263478[_0x51c066(0x183)]()){if(!_0x263478[_0x51c066(0x23f)][_0x51c066(0x191)](_0x51c066(0x20d)))fs[_0x51c066(0x160)](configbackuppath+_0x263478[_0x51c066(0x23f)]);}else fs[_0x51c066(0x12c)](configbackuppath+_0x263478[_0x51c066(0x23f)],{'recursive':!![]});});}catch(_0x2eca39){logger[_0x1c913d(0x259)](_0x1c913d(0x10e),_0x2eca39);}}function storeConfiguration(_0x19c54d){const _0x4494e7=_0x21c4ad;dbConfig[_0x4494e7(0x103)](_0x4494e7(0x144))[_0x4494e7(0x210)]()[_0x4494e7(0x283)](),dbConfig[_0x4494e7(0x103)](_0x4494e7(0x144))['push'](..._0x19c54d)[_0x4494e7(0x283)](),config=_0x19c54d;}async function resetPassword(){const _0x9f3e9e=_0x21c4ad;if(tgBot&&settings[_0x9f3e9e(0x1c8)]){const _0xd753ef=Markup['inlineKeyboard']([Markup[_0x9f3e9e(0x2db)][_0x9f3e9e(0x301)]('yes','resetpw_yes'),Markup[_0x9f3e9e(0x2db)][_0x9f3e9e(0x301)]('no','resetpw_no')]);await sendTelegram(settings['telegramChatId'],_0x9f3e9e(0x187),_0xd753ef),tgBot[_0x9f3e9e(0x238)](/resetpw_(.+)/,async _0x48dae7=>{const _0x17e4d9=_0x9f3e9e,_0x31e52d=_0x48dae7[_0x17e4d9(0x277)][0x1];_0x48dae7[_0x17e4d9(0x26a)]();if(_0x31e52d!='no'){const _0x264544=0xf,_0x28619e=_0x17e4d9(0x199),_0x2bb699=Array[_0x17e4d9(0x22e)](crypto[_0x17e4d9(0x1be)](new Uint32Array(_0x264544)))[_0x17e4d9(0x2cd)](_0x41d11d=>_0x28619e[_0x41d11d%_0x28619e[_0x17e4d9(0x243)]])[_0x17e4d9(0x2e9)](''),_0x1fda2e=bcrypt[_0x17e4d9(0x165)](_0x2bb699,saltRounds);storeSettings({'bbPassword':_0x1fda2e}),await sendTelegram(_0x48dae7[_0x17e4d9(0x18d)]['id'],_0x17e4d9(0x2a6)+_0x2bb699,{'parse_mode':_0x17e4d9(0x1d2)});}else await sendTelegram(_0x48dae7[_0x17e4d9(0x18d)]['id'],_0x17e4d9(0x1f4));});}}async function confirmRestore(_0x14e15b,_0x115075){const _0x50cf9c=_0x21c4ad;io['to'](_0x50cf9c(0x246))[_0x50cf9c(0x291)](_0x50cf9c(0x17d),_0x50cf9c(0x221),_0x50cf9c(0x27f));if(tgBot&&settings[_0x50cf9c(0x1c8)]){const _0x381a60=uuidRandom();tmpStorage[_0x381a60]={'path':_0x14e15b,'filename':_0x115075};const _0x48b846=Markup[_0x50cf9c(0x1c1)]([Markup['button']['callback'](_0x50cf9c(0x1ea),_0x50cf9c(0x12a)+_0x381a60),Markup[_0x50cf9c(0x2db)]['callback']('no','restore_no_'+_0x381a60)]);await sendTelegram(settings[_0x50cf9c(0x1c8)],_0x50cf9c(0x204),_0x48b846),tgBot[_0x50cf9c(0x238)](/restore_(.+)_(.+)/,async _0x49275c=>{const _0x4bb18a=_0x50cf9c,_0x1648a7=_0x49275c['match'][0x1],_0x49d222=_0x49275c['match'][0x2],{path:_0x3a46ba,filename:_0xcb9d87}=tmpStorage[_0x49d222];delete tmpStorage[_0x49d222],_0x49275c[_0x4bb18a(0x26a)](),_0x1648a7==_0x4bb18a(0x1ea)?(logger[_0x4bb18a(0x259)](_0x4bb18a(0x177)),await sendTelegram(_0x49275c[_0x4bb18a(0x18d)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'}),unzipFile(_0x3a46ba,_0xcb9d87)):(logger[_0x4bb18a(0x259)]('Restore\x20process\x20aborted'),await sendTelegram(_0x49275c['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x4335b3=_0x21c4ad,_0x262e76=new Date();return _0x262e76[_0x4335b3(0x2b7)]()+'/'+(_0x262e76['getMonth']()+0x1)[_0x4335b3(0x28d)]()[_0x4335b3(0x119)](0x2,'0')+'/'+_0x262e76['getDate']()['toString']()[_0x4335b3(0x119)](0x2,'0')+'\x20'+_0x262e76[_0x4335b3(0x268)]()['toString']()[_0x4335b3(0x119)](0x2,'0')+':'+_0x262e76[_0x4335b3(0x258)]()[_0x4335b3(0x28d)]()[_0x4335b3(0x119)](0x2,'0')+':'+_0x262e76['getSeconds']()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1f8e28=_0x21c4ad,_0x1d736b=shiftedTime();return _0x1d736b[_0x1f8e28(0x2b7)]()+'/'+(_0x1d736b['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x1d736b[_0x1f8e28(0x2b6)]()[_0x1f8e28(0x28d)]()[_0x1f8e28(0x119)](0x2,'0')+'\x20'+_0x1d736b[_0x1f8e28(0x268)]()[_0x1f8e28(0x28d)]()[_0x1f8e28(0x119)](0x2,'0')+':'+_0x1d736b[_0x1f8e28(0x258)]()[_0x1f8e28(0x28d)]()[_0x1f8e28(0x119)](0x2,'0')+':'+_0x1d736b[_0x1f8e28(0x104)]()[_0x1f8e28(0x28d)]()[_0x1f8e28(0x119)](0x2,'0');}function getCleanTimeStamp(){const _0x5a6801=_0x21c4ad,_0x451156=shiftedTime();return _0x451156[_0x5a6801(0x2b7)]()+(_0x451156[_0x5a6801(0x1e4)]()+0x1)[_0x5a6801(0x28d)]()[_0x5a6801(0x119)](0x2,'0')+_0x451156[_0x5a6801(0x2b6)]()[_0x5a6801(0x28d)]()[_0x5a6801(0x119)](0x2,'0')+'-'+_0x451156[_0x5a6801(0x268)]()[_0x5a6801(0x28d)]()[_0x5a6801(0x119)](0x2,'0')+_0x451156[_0x5a6801(0x258)]()[_0x5a6801(0x28d)]()[_0x5a6801(0x119)](0x2,'0')+_0x451156[_0x5a6801(0x104)]()[_0x5a6801(0x28d)]()[_0x5a6801(0x119)](0x2,'0');}function shiftedTime(){const _0x24f72b=_0x21c4ad,_0x1320c0=new Date();let _0x3e096f=_0x1320c0;if(settings['timeshift']&&settings[_0x24f72b(0x1d4)]!==0x0)_0x3e096f=fns['add'](_0x1320c0,{'hours':settings[_0x24f72b(0x1d4)]});return _0x3e096f;}async function startScheduler(){const _0x5e0bc1=_0x21c4ad,_0x1b2be2=new Date()[_0x5e0bc1(0x180)](),_0x3da240=shiftedTime()['getHours']();_0x3da240==0x4&&backupConfigFiles(),_0x3da240==0x0&&rotateLogFiles(),_0x1b2be2%0x6==0x0&&triggerAnalytics(),_0x1b2be2%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x1ee7dc){const _0x593cc7=_0x21c4ad;logger[_0x593cc7(0x259)](_0x593cc7(0x2d8)+_0x1ee7dc);const _0x55612f=getBotsWithMode();_0x55612f[_0x593cc7(0x243)]>0x0?confirmRestore(configbackuppath,_0x1ee7dc):unzipFile(configbackuppath,_0x1ee7dc);}async function getBackupFiles(_0xc6cb90=null){const _0x5c54ed=_0x21c4ad;let _0x486299=[],_0x4898de=fs[_0x5c54ed(0x2c8)](configbackuppath,{'withFileTypes':!![]});_0x4898de['sort']((_0x6a9547,_0xa88542)=>_0x6a9547[_0x5c54ed(0x23f)]<_0xa88542[_0x5c54ed(0x23f)]?0x1:_0xa88542[_0x5c54ed(0x23f)]<_0x6a9547[_0x5c54ed(0x23f)]?-0x1:0x0),_0x4898de[_0x5c54ed(0x163)](_0x7ab541=>{const _0x48144c=_0x5c54ed;if(!_0x7ab541[_0x48144c(0x183)]()&&_0x7ab541[_0x48144c(0x23f)]['startsWith'](_0x48144c(0x20d))&&_0x7ab541[_0x48144c(0x23f)][_0x48144c(0x1c7)](_0x48144c(0x22f))){const _0x1d68c2=formatDate(fs[_0x48144c(0x2d3)](configbackuppath+_0x7ab541['name'])[_0x48144c(0x179)]);_0x486299['push']({'name':_0x7ab541[_0x48144c(0x23f)],'mtime':_0x1d68c2});}});if(_0xc6cb90)io['to'](_0xc6cb90)[_0x5c54ed(0x291)](_0x5c54ed(0x141),_0x486299);else return _0x486299;}async function backupConfigFiles(){const _0x5b0d31=_0x21c4ad;await zipFiles('backup-full');const _0xf9f6cf=getCleanTimeStamp();fs[_0x5b0d31(0x173)](zippath+'backup-full.zip',configbackuppath+('backup-full@'+_0xf9f6cf+_0x5b0d31(0x22f)));let _0x41c351=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x41c351[_0x5b0d31(0x302)]((_0x27e189,_0x4c3958)=>_0x27e189['name']<_0x4c3958[_0x5b0d31(0x23f)]?0x1:_0x4c3958['name']<_0x27e189[_0x5b0d31(0x23f)]?-0x1:0x0),_0x41c351[_0x5b0d31(0x243)]>maxBackups&&fs[_0x5b0d31(0x160)](configbackuppath+_0x41c351[_0x41c351[_0x5b0d31(0x243)]-0x1]['name']);}function rotateLogFiles(){const _0x15359f=_0x21c4ad,_0x19f3d0=fs[_0x15359f(0x2d3)](logspath+_0x15359f(0x209)),_0x2d3665=_0x19f3d0[_0x15359f(0x161)]/0x400;if(_0x2d3665>0x64){let _0x40e622=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x40e622[_0x15359f(0x302)]((_0x39dc41,_0x4d1858)=>_0x39dc41[_0x15359f(0x23f)]<_0x4d1858['name']?0x1:_0x4d1858[_0x15359f(0x23f)]<_0x39dc41['name']?-0x1:0x0),_0x40e622['forEach'](_0x44077d=>{const _0x2cec1a=_0x15359f;if(_0x44077d[_0x2cec1a(0x23f)]==_0x2cec1a(0x2f3))fs[_0x2cec1a(0x173)](logspath+_0x44077d[_0x2cec1a(0x23f)],logspath+_0x2cec1a(0xf9));if(_0x44077d['name']==_0x2cec1a(0x2b0))fs[_0x2cec1a(0x173)](logspath+_0x44077d[_0x2cec1a(0x23f)],logspath+_0x2cec1a(0x2f3));_0x44077d[_0x2cec1a(0x23f)]==_0x2cec1a(0x209)&&(fs[_0x2cec1a(0x173)](logspath+_0x44077d[_0x2cec1a(0x23f)],logspath+_0x2cec1a(0x2b0)),fs[_0x2cec1a(0x1a9)](logspath+_0x44077d[_0x2cec1a(0x23f)],''));});}}async function zipFiles(_0x4be1f2){const _0x15dad0=_0x21c4ad;let _0x228cd7;if(_0x4be1f2==_0x15dad0(0x224))_0x228cd7=logspath;if(_0x4be1f2==_0x15dad0(0x1a8))_0x228cd7=configpath;if(_0x4be1f2=='backup-full')_0x228cd7=configpath;let _0x281ffe=fs[_0x15dad0(0x2c8)](_0x228cd7,{'withFileTypes':!![]});const _0x46989b=new JSZip();_0x281ffe['forEach'](_0x3453e3=>{const _0x59bce6=_0x15dad0;if(!_0x3453e3['isDirectory']()){let _0x302cf6=fs[_0x59bce6(0x1f1)](_0x228cd7+_0x3453e3['name']);if(_0x4be1f2==_0x59bce6(0x1a8)){const _0x415bc4=/^bot-[0-9]{3}-config.json$/,_0x1e4b7d=_0x415bc4[_0x59bce6(0x1fa)](_0x3453e3[_0x59bce6(0x23f)]);if(_0x1e4b7d){const _0x4023f6=JSON[_0x59bce6(0x2eb)](_0x302cf6);if(_0x4023f6[_0x59bce6(0x1c5)][0x0]){_0x4023f6[_0x59bce6(0x1c5)][0x0][_0x59bce6(0x157)]=_0x59bce6(0x223),_0x4023f6[_0x59bce6(0x1c5)][0x0][_0x59bce6(0x222)]=_0x59bce6(0x223);if(_0x4023f6['bot'][0x0][_0x59bce6(0x2ef)])_0x4023f6[_0x59bce6(0x1c5)][0x0]['apiPassword']='***';}_0x302cf6=JSON[_0x59bce6(0x198)](_0x4023f6,null,0x2);}if(_0x3453e3[_0x59bce6(0x23f)]==_0x59bce6(0x2cc)){const _0xd69b0=JSON[_0x59bce6(0x2eb)](_0x302cf6);if(_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x1c6)])_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x1c6)]=![];if(_0xd69b0['settings']['bbPassword'])_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x2ab)]=_0x59bce6(0x223);if(_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x132)])_0xd69b0[_0x59bce6(0x1a0)]['telegramToken']=_0x59bce6(0x223);if(_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x1c8)])_0xd69b0['settings'][_0x59bce6(0x1c8)]=null;if(_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x27d)])_0xd69b0[_0x59bce6(0x1a0)][_0x59bce6(0x27d)]='***';_0x302cf6=JSON['stringify'](_0xd69b0,null,0x2);}if(_0x3453e3['name']!=_0x59bce6(0x113))_0x46989b[_0x59bce6(0x1da)](_0x3453e3['name'],_0x302cf6);}else _0x46989b[_0x59bce6(0x1da)](_0x3453e3[_0x59bce6(0x23f)],_0x302cf6);}});const _0x431e8d=await _0x46989b[_0x15dad0(0x151)]({'type':_0x15dad0(0x1e1),'base64':![],'compression':_0x15dad0(0x164)});fs[_0x15dad0(0x1a9)](zippath+(_0x4be1f2+_0x15dad0(0x22f)),_0x431e8d,_0x15dad0(0x288));}async function unzipFile(_0x424112,_0x113c70){const _0x4a8a18=_0x21c4ad;fs[_0x4a8a18(0x2c8)](configpath,{'withFileTypes':!![]})[_0x4a8a18(0x163)](_0xd2069b=>{const _0x235437=_0x4a8a18;if(!_0xd2069b[_0x235437(0x183)]())fs[_0x235437(0x12c)](configpath+_0xd2069b[_0x235437(0x23f)]);});const _0x38520b=fs[_0x4a8a18(0x1f1)](_0x424112+_0x113c70,_0x4a8a18(0x288)),_0x1da7ab=await JSZip[_0x4a8a18(0x1f3)](_0x38520b,{'base64':![],'checkCRC32':!![]});for(const _0xb81db8 of Object[_0x4a8a18(0x1b9)](_0x1da7ab[_0x4a8a18(0x2dd)])){const _0x48f674=_0x1da7ab[_0x4a8a18(0x2dd)][_0xb81db8],_0x556ffd=await _0x48f674[_0x4a8a18(0x129)](_0x4a8a18(0x1e1));fs[_0x4a8a18(0x1a9)](configpath+_0x48f674[_0x4a8a18(0x23f)],_0x556ffd);}fs[_0x4a8a18(0x2c8)](temppath,{'withFileTypes':!![]})['forEach'](_0x354a22=>{const _0x2a1023=_0x4a8a18;if(!_0x354a22[_0x2a1023(0x183)]())fs[_0x2a1023(0x12c)](temppath+_0x354a22[_0x2a1023(0x23f)]);}),logger[_0x4a8a18(0x259)](_0x4a8a18(0x190)),process[_0x4a8a18(0x142)]({'restore':!![]},_0x3836e3=>{});}async function getPublicIp(){const _0x2966d5=_0x21c4ad;try{const _0x16578e=await axios[_0x2966d5(0x103)](_0x2966d5(0x146));publicip=_0x16578e[_0x2966d5(0x13d)]['ip'];}catch(_0x18c48e){}}async function triggerAnalytics(){const _0xdf44dd=_0x21c4ad;if(!publicip)await getPublicIp();const _0x4fd03c=getBotsWithMode();let _0x57849b=0x0;_0x4fd03c[_0xdf44dd(0x163)](_0x28dea0=>{const _0x3dbae7=_0xdf44dd;if(_0x28dea0['status']===_0x3dbae7(0x125))_0x57849b++;});const _0x2c6ca4=getBotExchanges();mixpanel[_0xdf44dd(0x206)](_0xdf44dd(0x2a7),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x4fd03c[_0xdf44dd(0x243)],'numbotsenabled':_0x57849b,'exchanges':_0x2c6ca4,'environment':environment});}async function getMessages(){const _0x57e938=_0x21c4ad,_0x4c0c30='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5e59d4=new GraphQLClient(_0x4c0c30),_0x5518c8={'authorization':_0x57e938(0x2d9)},_0x410362=serverversion['split']('.'),_0x31fe8f=_0x410362[0x0]+'.'+_0x410362[0x1],_0x1f21b8=Math['min'](settings['lastmsgtelegram'],settings[_0x57e938(0x120)]),_0x38ac42={'last':parseInt(_0x1f21b8),'bbm':_0x31fe8f},_0x3a16f9=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x2f7595;try{_0x2f7595=await _0x5e59d4[_0x57e938(0x205)](_0x3a16f9,_0x38ac42,_0x5518c8);}catch(_0x5bf506){}if(_0x2f7595&&_0x2f7595['messages']){let _0x35ee04=settings['lastmsgtelegram'];newMessages=[];for(const _0x103a06 of _0x2f7595[_0x57e938(0x1e7)]){newMessages[_0x57e938(0x1cc)](_0x103a06);let _0x1555ec=![];_0x103a06[_0x57e938(0x29a)]&&(updateSetting('latestversion',_0x103a06[_0x57e938(0x29a)]),_0x1555ec=isNewerVersion(serverversion,_0x103a06[_0x57e938(0x29a)])||serverversion==_0x103a06[_0x57e938(0x29a)]);if(!_0x1555ec&&_0x103a06[_0x57e938(0x2a9)]>_0x35ee04){if(_0x103a06['bbvReceive']===_0x57e938(0x149)||serverversion[_0x57e938(0x191)](_0x103a06[_0x57e938(0x278)])){let _0x3a0ac6=''+_0x103a06[_0x57e938(0x11d)]+'\x0a\x0a'+_0x103a06[_0x57e938(0x211)];const _0xf1a33d=await sendTelegramMsg(toTelegramMarkdown(_0x3a0ac6),_0x57e938(0x2fa));if(_0xf1a33d)_0x35ee04=_0x103a06[_0x57e938(0x2a9)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x57e938(0x1c9),_0x35ee04),emitMessages();}}function emitMessages(){const _0x452f27=_0x21c4ad,_0x1615e6=settings['lastmsgemitted'];let _0x49807f=[];newMessages['forEach'](_0x2b6726=>{const _0x374a8b=_0x4321;_0x2b6726['number']>_0x1615e6&&_0x49807f[_0x374a8b(0x1cc)](_0x2b6726);}),_0x49807f[_0x452f27(0x243)]>0x0&&getAllClients()[_0x452f27(0x163)](_0x4f90ad=>{const _0xe662e=_0x452f27;getSocket(_0x4f90ad['id'])['emit'](_0xe662e(0x211),_0x49807f);});}function confirmMessage(_0x5eaf68){const _0x2634ab=_0x21c4ad;updateSetting(_0x2634ab(0x120),Number(_0x5eaf68));}function isNewerVersion(_0x28a09f,_0x55c4b0){const _0x5e9992=_0x21c4ad,_0x28dc5e=_0x55c4b0[_0x5e9992(0x12e)]('.'),_0x4be41a=_0x28a09f[_0x5e9992(0x12e)]('.');for(var _0x5f289e=0x0;_0x5f289e<_0x4be41a[_0x5e9992(0x243)];_0x5f289e++){const _0x231f02=~~_0x4be41a[_0x5f289e],_0x5ad26e=~~_0x28dc5e[_0x5f289e];if(_0x231f02>_0x5ad26e)return!![];if(_0x231f02<_0x5ad26e)return![];}return![];}function toTelegramMarkdown(_0x16b7eb){const _0x126460=_0x21c4ad,_0x441261=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xce8367=/\*{2}(.+?)\*{2}/gim;return _0x16b7eb=_0x16b7eb[_0x126460(0x111)](_0x441261,'$1_$2_$3')[_0x126460(0x111)](_0xce8367,_0x126460(0x19a)),_0x16b7eb;}async function validateConfigFile(){const _0x4cbde5=_0x21c4ad,_0x3ca292=dbConfig[_0x4cbde5(0x103)]('bots')[_0x4cbde5(0x25f)](_0x4cbde5(0x162))[_0x4cbde5(0x1a5)]()||[];if(_0x3ca292['length']==0x0){let _0x4ff265=0x0,_0x4c2b8c=[];const _0x33fcfa=/^bot-([0-9]{3})-config.json$/,_0x158038=fs[_0x4cbde5(0x2c8)](configpath);_0x158038[_0x4cbde5(0x163)](_0xfae261=>{const _0x483c74=_0x4cbde5,_0x5c1e2d=_0x33fcfa[_0x483c74(0x21a)](_0xfae261);if(_0x5c1e2d){const _0x379cea=_0x5c1e2d[0x1];let _0xa6cd02=getBotAttributes(_0x379cea);_0x4c2b8c[_0x483c74(0x1cc)]({'botID':_0x379cea,'botname':_0xa6cd02[_0x483c74(0x176)],'status':'disabled','live':'stopped'}),_0x4ff265++;}}),_0x4ff265!=0x0&&(dbConfig[_0x4cbde5(0x103)](_0x4cbde5(0x144))['assign'](_0x4c2b8c)[_0x4cbde5(0x283)](),config=_0x4c2b8c,restoredConfigFile=_0x4ff265);}}async function restoreConfigNotify(_0x108dfe){const _0x42b88a=_0x21c4ad;let _0x46ef01;if(restoredConfigFile==0x1)_0x46ef01=_0x42b88a(0x22b);else _0x46ef01='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x108dfe)io['to'](_0x42b88a(0x246))[_0x42b88a(0x291)](_0x42b88a(0x17d),_0x46ef01);else{logger[_0x42b88a(0x114)]('-----------------------------------------------------------------------------------'),logger[_0x42b88a(0x114)](_0x46ef01),logger[_0x42b88a(0x114)](_0x42b88a(0x256)),logger[_0x42b88a(0x114)]('');if(tgBot&&settings[_0x42b88a(0x1c8)]&&settings['telegramEvents']!=_0x42b88a(0x110))await sendTelegram(settings[_0x42b88a(0x1c8)],_0x42b88a(0xfc)+_0x46ef01);}}function decryptRSA(_0x35e3b1,_0x10c473){const _0x10d1cd=_0x21c4ad,_0x8bbd36=forge[_0x10d1cd(0x1bb)][_0x10d1cd(0x196)](_0x35e3b1),_0x2d7965=_0x8bbd36[_0x10d1cd(0x11c)](forge[_0x10d1cd(0x27a)]['decode64'](_0x10c473),_0x10d1cd(0x2c3),{'md':forge['md']['sha256'][_0x10d1cd(0x2aa)](),'mgf1':{'md':forge['md'][_0x10d1cd(0x189)][_0x10d1cd(0x2aa)]()}});return _0x2d7965;}function validateCredentials(_0x36121d,_0x2bc16a){const _0x330280=_0x21c4ad;if(_0x36121d[_0x330280(0x1ad)]==settings[_0x330280(0x2f2)]&&bcrypt[_0x330280(0x18a)](_0x36121d[_0x330280(0x24f)],settings['bbPassword'])){if(settings[_0x330280(0x19b)])return{'allow':![],'reason':_0x330280(0x1bd),'token':null};else{const _0x1aba77=generateLoginToken(_0x2bc16a);return{'allow':!![],'reason':_0x330280(0x2d5),'token':_0x1aba77};}}else return{'allow':![],'reason':_0x330280(0x181),'token':null};}function refreshToken(_0x2afd8f){const _0x11cd88=_0x21c4ad,_0x520a39=generateLoginToken(_0x2afd8f);return{'allow':!![],'reason':_0x11cd88(0x2d5),'token':_0x520a39};}function validateAccess(_0x742775,_0x367c79,_0x287dd3){const _0x1d190e=_0x21c4ad,_0x5aa505=_0x287dd3?_0x287dd3:devices[_0x367c79]['ip'];let _0x41f83;const _0x1f59f9=_0x59e4ae=>{const _0x2a0e29=_0x4321;if(settings[_0x2a0e29(0x1c6)]){if(settings[_0x2a0e29(0x19b)]){if(telegram2FaApproved(_0x367c79)){const _0x369f34=generateLoginToken(_0x367c79);return{'allow':!![],'reason':_0x2a0e29(0x25e),'token':_0x369f34};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x41f83=validToken(_0x59e4ae,_0x367c79),_0x41f83[_0x2a0e29(0x227)]('success')?{'allow':!![],'reason':_0x2a0e29(0x1d9),'token':_0x59e4ae}:{'allow':![],'reason':_0x2a0e29(0x2cb),'token':null};}else return{'allow':!![],'reason':_0x2a0e29(0x2c6),'token':null};};if(settings[_0x1d190e(0x272)]){let _0x1f9f87=[...settings['whitelist'],_0x1d190e(0x1ba),_0x1d190e(0x1dc),'127.0.0.1'];if(_0x1f9f87[_0x1d190e(0x186)](_0x5aa505))return _0x1f59f9(_0x742775);else{_0x41f83=validToken(_0x742775,_0x367c79);if(_0x41f83['hasOwnProperty'](_0x1d190e(0x27f)))return _0x1f59f9(_0x742775);else{if(telegramIpApproved(_0x367c79)){const _0x33df3b=generateToken(_0x367c79);return _0x41f83=_0x1f59f9(_0x742775),_0x41f83[_0x1d190e(0x1d0)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x33df3b}:_0x41f83;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x1d190e(0x2b1),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1f59f9(_0x742775);}function _0x4321(_0x5e926e,_0x1c8cad){const _0x17d32b=_0x53df();return _0x4321=function(_0x46e1c8,_0x203e4c){_0x46e1c8=_0x46e1c8-0xef;let _0x53dfa1=_0x17d32b[_0x46e1c8];return _0x53dfa1;},_0x4321(_0x5e926e,_0x1c8cad);}function timelyDecrypt(_0x2dd068,_0x5771eb,_0x16dd9e='@'){const _0x13827d=_0x21c4ad;if(_0x2dd068)try{const _0x2516dc=decryptRSA(secure['privateKey'],_0x2dd068),_0x168f2f=_0x2516dc[_0x13827d(0x12e)](_0x16dd9e)[0x0],_0x1f100f=_0x2516dc[_0x13827d(0x12e)](_0x16dd9e)[0x1],_0x37cffd=new Date()[_0x13827d(0x21b)]();if(_0x5771eb){if(_0x37cffd-_0x1f100f<maxSecretAge*0x3e8)return _0x168f2f;else return![];}else return _0x168f2f;}catch(_0xd04f35){return![];}else return![];}const validToken=(_0xa38c2f,_0x3bfa5d)=>{const _0x34c4f2=_0x21c4ad,_0x49095a=devices[_0x3bfa5d]['ip'];if(!_0xa38c2f)return{'error':'No\x20authentication\x20token'};for(let _0x26105e of blacklist){if(_0x26105e[_0x34c4f2(0x286)]==_0xa38c2f)return{'error':'Token\x20blacklisted'};}let _0x5474fb;try{_0x5474fb=jwt[_0x34c4f2(0x1cd)](_0xa38c2f,secure['secret']+_0x3bfa5d);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x5474fb['hasOwnProperty']('clientip')&&!_0x5474fb[_0x34c4f2(0x227)]('username')||!_0x5474fb[_0x34c4f2(0x227)](_0x34c4f2(0x166)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5474fb['hasOwnProperty'](_0x34c4f2(0x1ad))&&_0x5474fb['hasOwnProperty'](_0x34c4f2(0x300))){const {clientip:_0xd073fa}=_0x5474fb;return _0x49095a==_0xd073fa?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x34c4f2(0x303)};}else{if(_0x5474fb['hasOwnProperty'](_0x34c4f2(0x1ad))&&_0x5474fb[_0x34c4f2(0x227)]('clientip')){const {username:_0x585ec7,clientip:_0x48884e}=_0x5474fb;return settings[_0x34c4f2(0x2f2)]==_0x585ec7&&_0x49095a==_0x48884e?{'success':_0x34c4f2(0x266)}:{'error':_0x34c4f2(0x1fb)};}}},generateLoginToken=_0x3cccb1=>{const _0x4e2369=_0x21c4ad;if(_0x3cccb1){const _0x31f700=devices[_0x3cccb1]['ip'];return jwt[_0x4e2369(0x13f)]({'username':settings[_0x4e2369(0x2f2)],'clientip':_0x31f700},secure[_0x4e2369(0x294)]+_0x3cccb1,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x16a074=>{const _0x3bdfec=_0x21c4ad;if(_0x16a074){const _0x517514=devices[_0x16a074]['ip'];return jwt[_0x3bdfec(0x13f)]({'clientip':_0x517514},secure['secret']+_0x16a074,{'expiresIn':devices[_0x16a074][_0x3bdfec(0x2e1)][_0x3bdfec(0x171)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x2cd2cb=>{const _0x291387=_0x21c4ad;let _0x1b871d=![];return devices[_0x2cd2cb][_0x291387(0x2e1)]&&devices[_0x2cd2cb][_0x291387(0x2e1)][_0x291387(0x171)]!=_0x291387(0x10b)&&(_0x1b871d=devices[_0x2cd2cb][_0x291387(0x2e1)]['clientip']==devices[_0x2cd2cb]['ip']&&new Date()['getTime']()-devices[_0x2cd2cb][_0x291387(0x2e1)][_0x291387(0x214)]<devices[_0x2cd2cb]['telegramIpApproval'][_0x291387(0x171)]*0x3c*0x3e8),_0x1b871d;},telegram2FaApproved=_0x4e588b=>{const _0x4578dc=_0x21c4ad;let _0x48a34a=![];return devices[_0x4e588b][_0x4578dc(0x122)]&&devices[_0x4e588b][_0x4578dc(0x122)][_0x4578dc(0x171)]!='reject'&&(_0x48a34a=devices[_0x4e588b][_0x4578dc(0x122)][_0x4578dc(0x300)]==devices[_0x4e588b]['ip']&&new Date()[_0x4578dc(0x21b)]()-devices[_0x4e588b]['telegram2FaApproval'][_0x4578dc(0x214)]<devices[_0x4e588b][_0x4578dc(0x122)][_0x4578dc(0x171)]*0x3c*0x3e8),_0x48a34a;},normalizeIP=_0x227110=>{const _0x30359d=_0x21c4ad;let _0x43e2d6=null,_0x593684=null;if(ipaddr[_0x30359d(0x107)](_0x227110)){const _0x353b9d=ipaddr[_0x30359d(0x2eb)](_0x227110);_0x353b9d[_0x30359d(0x202)]()==='ipv6'?(_0x353b9d[_0x30359d(0x17a)]()&&(_0x43e2d6=_0x353b9d['toIPv4Address']()[_0x30359d(0x28d)]()),_0x593684=_0x353b9d[_0x30359d(0x28d)]()):(_0x43e2d6=_0x353b9d[_0x30359d(0x28d)](),_0x593684=_0x353b9d['toIPv4MappedAddress']()[_0x30359d(0x28d)]());}return{'show':_0x43e2d6?_0x43e2d6:_0x593684,'store':_0x593684};};function formatDate(_0x109c9d){const _0x12aa04=_0x21c4ad;return _0x109c9d[_0x12aa04(0x2b7)]()+'/'+(_0x109c9d['getMonth']()+0x1)[_0x12aa04(0x28d)]()[_0x12aa04(0x119)](0x2,'0')+'/'+_0x109c9d[_0x12aa04(0x2b6)]()['toString']()[_0x12aa04(0x119)](0x2,'0')+'\x20'+_0x109c9d[_0x12aa04(0x268)]()['toString']()[_0x12aa04(0x119)](0x2,'0')+':'+_0x109c9d[_0x12aa04(0x258)]()[_0x12aa04(0x28d)]()[_0x12aa04(0x119)](0x2,'0')+':'+_0x109c9d['getSeconds']()[_0x12aa04(0x28d)]()['padStart'](0x2,'0');}function sleep(_0x5ac5a7){return new Promise(_0x17e515=>setTimeout(_0x17e515,_0x5ac5a7));}