const _0x158c2b=_0x3e2b;(function(_0x436272,_0x255dba){const _0xa93c9=_0x3e2b,_0x2b9b77=_0x436272();while(!![]){try{const _0x2237c1=-parseInt(_0xa93c9(0x27d))/0x1*(parseInt(_0xa93c9(0x15b))/0x2)+-parseInt(_0xa93c9(0x16d))/0x3+parseInt(_0xa93c9(0x1ec))/0x4*(parseInt(_0xa93c9(0x289))/0x5)+-parseInt(_0xa93c9(0x177))/0x6+parseInt(_0xa93c9(0x17c))/0x7*(-parseInt(_0xa93c9(0x195))/0x8)+-parseInt(_0xa93c9(0x244))/0x9+parseInt(_0xa93c9(0x183))/0xa;if(_0x2237c1===_0x255dba)break;else _0x2b9b77['push'](_0x2b9b77['shift']());}catch(_0x2ff7a2){_0x2b9b77['push'](_0x2b9b77['shift']());}}}(_0x3b13,0xc873d));const _0x4cc13c=function(){let _0x1ed13b=!![];return function(_0x5001d2,_0x1751a3){const _0x47d0f4=_0x1ed13b?function(){const _0x17f511=_0x3e2b;if(_0x1751a3){const _0x2c748b=_0x1751a3[_0x17f511(0x20d)](_0x5001d2,arguments);return _0x1751a3=null,_0x2c748b;}}:function(){};return _0x1ed13b=![],_0x47d0f4;};}(),_0x2f22d3=_0x4cc13c(this,function(){const _0x4d7136=_0x3e2b;return _0x2f22d3[_0x4d7136(0x21c)]()[_0x4d7136(0x228)](_0x4d7136(0x1c2))[_0x4d7136(0x21c)]()[_0x4d7136(0x238)](_0x2f22d3)[_0x4d7136(0x228)](_0x4d7136(0x1c2));});_0x2f22d3();'use strict';process[_0x158c2b(0x170)][_0x158c2b(0x214)]=0x1;const childProcess=require(_0x158c2b(0x1c0)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x158c2b(0x233)),low=require(_0x158c2b(0x1da)),path=require(_0x158c2b(0x274)),crypto=require('crypto'),Crypt=require('hybrid-crypto-js')[_0x158c2b(0x19f)],RSA=require(_0x158c2b(0x198))[_0x158c2b(0x1a4)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),analyticsLib=require(_0x158c2b(0x160))[_0x158c2b(0x253)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x158c2b(0x245)),argv=require(_0x158c2b(0x17d))(process[_0x158c2b(0x188)][_0x158c2b(0x18c)](0x2))[_0x158c2b(0x188)],PORT=argv[_0x158c2b(0x273)]||_0x158c2b(0x1aa),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log'](_0x158c2b(0x1f6)+PORT+_0x158c2b(0x209)),process[_0x158c2b(0x17e)](0x1);function _0x3e2b(_0x18278c,_0x340637){const _0x47e174=_0x3b13();return _0x3e2b=function(_0x2f22d3,_0x4cc13c){_0x2f22d3=_0x2f22d3-0x149;let _0x3b1334=_0x47e174[_0x2f22d3];return _0x3b1334;},_0x3e2b(_0x18278c,_0x340637);}const HOST=argv['host']||null,userID=argv[_0x158c2b(0x27c)]||'';let bbpath=_0x158c2b(0x246),bbpath2='';const botfile=_0x158c2b(0x1cd),configfile=_0x158c2b(0x150),settingsfile=_0x158c2b(0x1ff),securefile=_0x158c2b(0x1d1);let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x158c2b(0x16e)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x158c2b(0x26b),configbackuppath=configpath+_0x158c2b(0x241);!fs['existsSync'](configpath)&&fs[_0x158c2b(0x1ea)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x158c2b(0x1ea)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x158c2b(0x1c7)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x158c2b(0x1c7)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x158c2b(0x1d7),'rsaStandard':_0x158c2b(0x21f)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x158c2b(0x1bc)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x158c2b(0x1f3)),app=express(),http=require('http')[_0x158c2b(0x26c)](app);app[_0x158c2b(0x282)](express[_0x158c2b(0x1dd)](path[_0x158c2b(0x25f)](__dirname,bbpath2,'build2'))),app['use'](express[_0x158c2b(0x1dd)](path[_0x158c2b(0x25f)](__dirname,bbpath2,_0x158c2b(0x155)))),app['get']('/',function(_0x3a93da,_0x5d6429){const _0x552f27=_0x158c2b;_0x5d6429[_0x552f27(0x152)](path[_0x552f27(0x25f)](__dirname,bbpath2,'build2',_0x552f27(0x1ed)));}),app[_0x158c2b(0x258)]('/:bot',function(_0xf7bedf,_0x54413b){const _0x40590e=_0x158c2b;_0x54413b['sendFile'](path[_0x40590e(0x25f)](__dirname,bbpath2,_0x40590e(0x155),_0x40590e(0x1ed)));}),app[_0x158c2b(0x258)](_0x158c2b(0x217),(_0x436b00,_0x25922b)=>{const _0x4a5e85=_0x158c2b;_0x25922b['sendFile'](path['join'](__dirname,bbpath2,_0x4a5e85(0x155),_0x4a5e85(0x1ed)));}),app[_0x158c2b(0x258)](_0x158c2b(0x1a3),(_0x2afcea,_0xacb917)=>{const _0x2de8a7=_0x158c2b;_0xacb917[_0x2de8a7(0x152)](path['join'](__dirname,bbpath2,'build',_0x2de8a7(0x1ed)));}),app[_0x158c2b(0x258)]('/:bot/coins',(_0x4e49a4,_0x229058)=>{const _0xae8917=_0x158c2b;_0x229058[_0xae8917(0x152)](path[_0xae8917(0x25f)](__dirname,bbpath2,_0xae8917(0x155),_0xae8917(0x1ed)));}),app[_0x158c2b(0x258)](_0x158c2b(0x1ac),(_0x2be58f,_0xa62e34)=>{const _0x245bc3=_0x158c2b;_0xa62e34['sendFile'](path[_0x245bc3(0x25f)](__dirname,bbpath2,_0x245bc3(0x155),_0x245bc3(0x1ed)));}),app[_0x158c2b(0x258)](_0x158c2b(0x26e),(_0x451024,_0x2321c2)=>{const _0x58ee2f=_0x158c2b;_0x2321c2[_0x58ee2f(0x152)](path[_0x58ee2f(0x25f)](__dirname,bbpath2,_0x58ee2f(0x155),_0x58ee2f(0x1ed)));}),app['get'](_0x158c2b(0x263),(_0x4fb933,_0x20a9a4)=>{const _0x3803d9=_0x158c2b;_0x20a9a4[_0x3803d9(0x152)](path[_0x3803d9(0x25f)](__dirname,bbpath2,_0x3803d9(0x155),_0x3803d9(0x1ed)));});if(HOST)http[_0x158c2b(0x25c)](PORT,HOST);else http[_0x158c2b(0x25c)](PORT);const io=require(_0x158c2b(0x28f))(http,{}),analytics=analyticsLib({'app':_0x158c2b(0x1ce),'plugins':[googleAnalytics({'trackingId':_0x158c2b(0x28a)})]}),TelegramBot=require(_0x158c2b(0x256));let tgBot;if(settings[_0x158c2b(0x189)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x158c2b(0x1d5)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x1870a6=_0x158c2b;console[_0x1870a6(0x200)](''),console[_0x1870a6(0x200)](_0x1870a6(0x1fb)),logging(_0x1870a6(0x18a)+PORT),console[_0x1870a6(0x200)](_0x1870a6(0x1fb));if(config['length']!=0x0)config[_0x1870a6(0x266)](_0xea39af=>{const _0x4f4920=_0x1870a6;if(_0xea39af['status']==_0x4f4920(0x255)||_0xea39af[_0x4f4920(0x176)]=='new')logging(_0x4f4920(0x275)+_0xea39af[_0x4f4920(0x27f)]+_0x4f4920(0x1d0)+_0xea39af[_0x4f4920(0x23d)]),startBot([_0xea39af['botID'],userID],{'cwd':bbpath},function(_0x5a38c8){if(_0x5a38c8)logging(_0x5a38c8);});else(_0xea39af['status']==_0x4f4920(0x279)||_0xea39af[_0x4f4920(0x176)]==_0x4f4920(0x224))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0xea39af['botID']+_0x4f4920(0x1d0)+_0xea39af[_0x4f4920(0x23d)]);});else!newBot&&console[_0x1870a6(0x200)](_0x1870a6(0x1b4));if(newBot)addBot();console[_0x1870a6(0x200)](_0x1870a6(0x1fb)),console[_0x1870a6(0x200)]('');}function startSocket(){io['on']('connection',_0x20730a=>{const _0xe67c0f=_0x3e2b;let _0x2c2135,_0x3e2a8f,_0x44a69a,_0x3ec783,_0x5d0ddf;const _0x465ffa=_0x20730a['handshake'][_0xe67c0f(0x254)][_0xe67c0f(0x242)];_0x3e2a8f=_0x465ffa[_0xe67c0f(0x1b9)](/bot[0-9]{3}/);if(_0x3e2a8f)_0x44a69a=_0x3e2a8f[0x0][_0xe67c0f(0x1b9)](/[0-9]{3}/);if(_0x44a69a)_0x2c2135=_0x44a69a[0x0];else _0x2c2135=_0xe67c0f(0x210);const _0x44c54e=_0x20730a[_0xe67c0f(0x18f)][_0xe67c0f(0x28c)]['encryptedUuid'];if(!_0x44c54e)_0x20730a[_0xe67c0f(0x1dc)](_0xe67c0f(0x176),{'publicKey':secure[_0xe67c0f(0x1bf)]});else{_0x3ec783=timelyDecrypt(_0x44c54e,![]);if(!_0x3ec783)_0x20730a[_0xe67c0f(0x1dc)](_0xe67c0f(0x176),{'publicKey':secure[_0xe67c0f(0x1bf)]});else{_0x5d0ddf=normalizeIP(_0x20730a['conn'][_0xe67c0f(0x1f8)])[_0xe67c0f(0x19a)];if(!devices[_0x3ec783])devices[_0x3ec783]={'uuid':_0x3ec783,'access':{'token':null}};devices[_0x3ec783]['ip']=_0x5d0ddf;const _0x1e6729=addClient(_0x20730a['id'],_0x3ec783,_0x2c2135);setAccess(_0x1e6729),_0x20730a['on'](_0xe67c0f(0x22e),_0x6162dc=>{const _0x205f3e=_0xe67c0f,_0x4475d3=timelyDecrypt(_0x6162dc[_0x205f3e(0x1c8)]);if(_0x4475d3){_0x6162dc={'username':_0x6162dc[_0x205f3e(0x1b6)],'password':_0x4475d3},devices[_0x3ec783]['access']=validateCredentials(_0x6162dc,_0x3ec783);if(devices[_0x3ec783][_0x205f3e(0x1ba)][_0x205f3e(0x1e2)]==![]&&devices[_0x3ec783][_0x205f3e(0x1ba)][_0x205f3e(0x14c)]==_0x205f3e(0x1a7))_0x20730a[_0x205f3e(0x1dc)](_0x205f3e(0x176),{'access':devices[_0x3ec783][_0x205f3e(0x1ba)]}),loginAccess2FA(_0x3ec783,_0x5d0ddf);else{if(devices[_0x3ec783][_0x205f3e(0x1ba)][_0x205f3e(0x1e2)]==![]&&devices[_0x3ec783][_0x205f3e(0x1ba)][_0x205f3e(0x14c)]=='invalid\x20credentials')_0x20730a[_0x205f3e(0x1dc)](_0x205f3e(0x176),{'access':devices[_0x3ec783][_0x205f3e(0x1ba)]});else devices[_0x3ec783]['access'][_0x205f3e(0x1e2)]&&devices[_0x3ec783][_0x205f3e(0x1ba)]['reason']==_0x205f3e(0x1f5)&&(getClientsWithUuid(_0x3ec783)[_0x205f3e(0x266)](_0x54ad68=>{setAccess(_0x54ad68);}),setTokenRefresh(_0x3ec783),setSessionTimeout(_0x205f3e(0x22e),_0x3ec783));}}else logging(_0x205f3e(0x203));}),_0x20730a['on'](_0xe67c0f(0x24c),()=>{resetPassword();}),_0x20730a['on']('disconnect',_0x528ba0=>{removeClient(_0x20730a['id']);});}}});}function initClient(_0x507c01){const _0x3dbb13=_0x158c2b;if(_0x507c01!=_0x3dbb13(0x210)&&config['apiKey']!=''){if(pid[_0x507c01])pid[_0x507c01]['send']({'function':_0x3dbb13(0x158),'args':null});}}function getSocket(_0x44862d){const _0x502e2c=_0x158c2b;return io['sockets']['sockets'][_0x502e2c(0x258)](_0x44862d);}function setAccess(_0x4cae65){const _0x8ec10=_0x158c2b,_0x3ab77f=getSocket(_0x4cae65['id']),_0x20028c=_0x4cae65[_0x8ec10(0x17b)],_0x5efc70=_0x4cae65['bot'];devices[_0x20028c][_0x8ec10(0x1ba)]=validateAccess(devices[_0x20028c][_0x8ec10(0x1ba)]['token'],_0x20028c),_0x3ab77f[_0x8ec10(0x25f)](_0x20028c);if(devices[_0x20028c]['access'][_0x8ec10(0x1e2)]){_0x3ab77f['join'](_0x5efc70);if(_0x5efc70==_0x8ec10(0x210))initializeSocketBotManager(_0x3ab77f);else initializeSocketBot(_0x3ab77f);initClient(_0x5efc70);}devices[_0x20028c]['access'][_0x8ec10(0x179)]&&devices[_0x20028c][_0x8ec10(0x1ba)]['reason']==_0x8ec10(0x215)&&setSessionTimeout(_0x8ec10(0x157),_0x20028c),devices[_0x20028c]['access'][_0x8ec10(0x179)]&&devices[_0x20028c][_0x8ec10(0x1ba)][_0x8ec10(0x14c)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x8ec10(0x22e),_0x20028c),_0x3ab77f[_0x8ec10(0x1dc)](_0x8ec10(0x176),{'status':_0x4cae65[_0x8ec10(0x24e)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x20028c][_0x8ec10(0x1ba)],'externalip':devices[_0x20028c]['ip'],'publicKey':secure[_0x8ec10(0x1bf)],'validInstallation':validInstallation}),devices[_0x20028c][_0x8ec10(0x1ba)]['allow']==![]&&devices[_0x20028c]['access'][_0x8ec10(0x14c)]==_0x8ec10(0x1ef)&&temporaryAccess2FA(_0x20028c,devices[_0x20028c]['ip']);}function setSessionTimeout(_0x6f08b1,_0x205c7a){const _0x56c7d1=_0x158c2b;let _0x623f4d;if(_0x6f08b1==_0x56c7d1(0x22e))_0x623f4d=loginExpiry*0x3c*0x3e8;else _0x623f4d=devices[_0x205c7a][_0x56c7d1(0x202)][_0x56c7d1(0x156)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x205c7a][_0x56c7d1(0x202)][_0x56c7d1(0x174)]);if(devices[_0x205c7a][_0x56c7d1(0x172)])clearTimeout(devices[_0x205c7a][_0x56c7d1(0x172)]);devices[_0x205c7a][_0x56c7d1(0x172)]=setTimeout(()=>{const _0x418b83=_0x56c7d1;if(devices[_0x205c7a]['pidRefreshToken'])clearTimeout(devices[_0x205c7a][_0x418b83(0x186)]);removeSocketListeners(_0x205c7a),addBlacklist(_0x205c7a),devices[_0x205c7a][_0x418b83(0x202)]=null,devices[_0x205c7a][_0x418b83(0x204)]=null,devices[_0x205c7a][_0x418b83(0x1ba)]['token']=null,devices[_0x205c7a][_0x418b83(0x1ba)]=validateAccess(devices[_0x205c7a]['access'][_0x418b83(0x179)],_0x205c7a),!(devices[_0x205c7a][_0x418b83(0x1ba)]['allow']&&devices[_0x205c7a][_0x418b83(0x1ba)]['reason']=='login\x20not\x20required')&&(_0x6f08b1==_0x418b83(0x22e)?io['to'](_0x205c7a)['emit'](_0x418b83(0x176),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x205c7a)[_0x418b83(0x1dc)](_0x418b83(0x176),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x205c7a][_0x418b83(0x1ba)][_0x418b83(0x179)]=null;},_0x623f4d);}function setTokenRefresh(_0x2ff98f){const _0x5bdc49=_0x158c2b;if(devices[_0x2ff98f]['pidRefreshToken'])clearTimeout(devices[_0x2ff98f][_0x5bdc49(0x186)]);devices[_0x2ff98f]['pidRefreshToken']=setTimeout(()=>{const _0x137755=_0x5bdc49;getClientsWithUuid(_0x2ff98f)[_0x137755(0x25d)]!=0x0?(devices[_0x2ff98f][_0x137755(0x1ba)]=refreshToken(_0x2ff98f),io['to'](_0x2ff98f)['emit']('status',{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2ff98f][_0x137755(0x1ba)],'externalip':devices[_0x2ff98f]['ip'],'publicKey':secure[_0x137755(0x1bf)],'validInstallation':validInstallation}),setTokenRefresh(_0x2ff98f)):clearTimeout(devices[_0x2ff98f][_0x137755(0x186)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x555543){const _0x3bf27a=_0x158c2b,_0x49a82d=getClient(_0x555543['id'])[_0x3bf27a(0x17b)];_0x555543[_0x3bf27a(0x1dc)](_0x3bf27a(0x208),config),_0x555543['emit'](_0x3bf27a(0x20b),cleanSettings()),_0x555543['on'](_0x3bf27a(0x1b7),_0x19e515=>{if(validateAccess(_0x19e515,_0x49a82d)['allow'])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x555543['on'](_0x3bf27a(0x1a5),(_0x275d98,_0x52b179)=>{const _0x5469b8=_0x3bf27a;if(validateAccess(_0x52b179,_0x49a82d)[_0x5469b8(0x1e2)])toggleBot(_0x275d98['botID'],_0x275d98[_0x5469b8(0x176)],_0x275d98[_0x5469b8(0x1c1)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x555543['on'](_0x3bf27a(0x252),(_0x25423f,_0x2c127e)=>{const _0x5f3062=_0x3bf27a;if(validateAccess(_0x2c127e,_0x49a82d)[_0x5f3062(0x1e2)])deleteBot(_0x25423f);else logging(_0x5f3062(0x15c));}),_0x555543['on']('store-settings',(_0x5d297d,_0x1cab6e)=>{const _0x80a42e=_0x3bf27a;if(validateAccess(_0x1cab6e,_0x49a82d)['allow'])storeSettings(_0x5d297d,!![]);else logging(_0x80a42e(0x1c3));}),_0x555543['on'](_0x3bf27a(0x1a0),(_0x1e83dc,_0x518804)=>{const _0x485594=_0x3bf27a;if(validateAccess(_0x518804,_0x49a82d)[_0x485594(0x1e2)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x555543['on'](_0x3bf27a(0x1eb),_0x11aadb=>{const _0x4243c2=_0x3bf27a;if(validateAccess(_0x11aadb,_0x49a82d)[_0x4243c2(0x1e2)]){if(devices[_0x49a82d][_0x4243c2(0x186)])clearTimeout(devices[_0x49a82d][_0x4243c2(0x186)]);if(devices[_0x49a82d][_0x4243c2(0x172)])clearTimeout(devices[_0x49a82d][_0x4243c2(0x172)]);removeSocketListeners(getClient(_0x555543['id'])['uuid']),addBlacklist(_0x49a82d),devices[_0x49a82d]['telegramIpApproval']=null,devices[_0x49a82d][_0x4243c2(0x204)]=null,devices[_0x49a82d][_0x4243c2(0x1ba)][_0x4243c2(0x179)]=null,io['to'](getClient(_0x555543['id'])[_0x4243c2(0x17b)])[_0x4243c2(0x1dc)]('status',{'access':{'allow':![],'reason':_0x4243c2(0x1d3),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x532fc0){const _0x535c53=_0x158c2b,_0x15d1c8=getClient(_0x532fc0['id'])[_0x535c53(0x1a9)],_0x5e2439=getClient(_0x532fc0['id'])[_0x535c53(0x17b)];_0x532fc0['on'](_0x535c53(0x1c6),(_0xee343f,_0x135009)=>{const _0x1ef056=_0x535c53;if(validateAccess(_0x135009,_0x5e2439)[_0x1ef056(0x1e2)]){if(pid[_0x15d1c8])pid[_0x15d1c8]['send']({'function':_0x1ef056(0x1e4),'args':_0xee343f});}else logging(_0x1ef056(0x14b));}),_0x532fc0['on'](_0x535c53(0x1f2),(_0x293bc2,_0x272b17)=>{const _0x44f89b=_0x535c53;if(validateAccess(_0x272b17,_0x5e2439)[_0x44f89b(0x1e2)]){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x44f89b(0x1a2)]({'function':_0x44f89b(0x151),'args':_0x293bc2});}else logging(_0x44f89b(0x1ad));}),_0x532fc0['on'](_0x535c53(0x286),(_0x2de984,_0x69f43e)=>{const _0x24e84a=_0x535c53;if(validateAccess(_0x69f43e,_0x5e2439)['allow']){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x24e84a(0x1a2)]({'function':_0x24e84a(0x1ee),'args':_0x2de984});}else logging(_0x24e84a(0x16f));}),_0x532fc0['on'](_0x535c53(0x22d),(_0x2d2708,_0x506695)=>{const _0x1c8f92=_0x535c53;if(validateAccess(_0x506695,_0x5e2439)['allow']){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x1c8f92(0x1a2)]({'function':'storeConfiguration','args':_0x2d2708});}else logging(_0x1c8f92(0x26a));}),_0x532fc0['on']('store-headless',(_0x16f173,_0x59b88d)=>{const _0x4b5afc=_0x535c53;if(validateAccess(_0x59b88d,_0x5e2439)['allow']){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x4b5afc(0x1a2)]({'function':_0x4b5afc(0x268),'args':_0x16f173});}else logging(_0x4b5afc(0x23f));}),_0x532fc0['on']('get-starting-balances',_0x5e50e3=>{const _0x5d372e=_0x535c53;if(validateAccess(_0x5e50e3,_0x5e2439)[_0x5d372e(0x1e2)]){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x5d372e(0x1a2)]({'function':_0x5d372e(0x1bd),'args':null});}else logging(_0x5d372e(0x227));}),_0x532fc0['on']('place-order',(_0x2c881d,_0x2f315f)=>{const _0x49b801=_0x535c53;if(validateAccess(_0x2f315f,_0x5e2439)['allow']){if(pid[_0x15d1c8])pid[_0x15d1c8][_0x49b801(0x1a2)]({'function':'placeOrder','args':_0x2c881d});}else logging(_0x49b801(0x218));}),_0x532fc0['on'](_0x535c53(0x17f),_0x2ad1ad=>{const _0x380226=_0x535c53;if(validateAccess(_0x2ad1ad,_0x5e2439)[_0x380226(0x1e2)]){if(pid[_0x15d1c8])pid[_0x15d1c8]['send']({'function':'cancelLoading','args':null});}else logging(_0x380226(0x199));}),_0x532fc0['on']('logout',_0x1939e1=>{const _0x22643a=_0x535c53;if(validateAccess(_0x1939e1,_0x5e2439)['allow']){if(devices[_0x5e2439]['pidRefreshToken'])clearTimeout(devices[_0x5e2439][_0x22643a(0x186)]);if(devices[_0x5e2439]['pidExpireLogin'])clearTimeout(devices[_0x5e2439][_0x22643a(0x172)]);removeSocketListeners(getClient(_0x532fc0['id'])['uuid']),addBlacklist(_0x5e2439),devices[_0x5e2439][_0x22643a(0x202)]=null,devices[_0x5e2439][_0x22643a(0x204)]=null,devices[_0x5e2439]['access'][_0x22643a(0x179)]=null,io['to'](getClient(_0x532fc0['id'])['uuid'])['emit'](_0x22643a(0x176),{'access':{'allow':![],'reason':_0x22643a(0x1d3),'token':null}});}else logging(_0x22643a(0x171));});}function removeSocketListeners(_0x232cff){const _0x5b16c0=_0x158c2b;getClientsWithUuid(_0x232cff)[_0x5b16c0(0x266)](_0x42f7e5=>{const _0x595a9a=_0x5b16c0;getSocket(_0x42f7e5['id'])[_0x595a9a(0x18b)]();});}function cleanSettings(){const _0x2ad07c=_0x158c2b;let _0x578784=settings;return settings[_0x2ad07c(0x189)]&&settings[_0x2ad07c(0x189)]!=''&&(_0x578784={..._0x578784,'telegramToken':'************'}),settings[_0x2ad07c(0x226)]&&settings['bbPassword']!=''&&(_0x578784={..._0x578784,'bbPassword':_0x2ad07c(0x1ae)}),_0x578784;}function updateBB(){const _0x5a2d58=_0x158c2b;installingUpdate=!![],config[_0x5a2d58(0x266)](_0x22d98b=>{const _0x4e3531=_0x5a2d58;restartBot(_0x22d98b[_0x4e3531(0x27f)]);}),process[_0x5a2d58(0x1a2)]({'update':!![]},_0x4b5a60=>{});}function startBot(_0xd88d02,_0x24fd15,_0x55cb8e){const _0x7d2039=_0x158c2b;let _0x533d83=![];const _0x302f9c=_0xd88d02[0x0];_0x24fd15={..._0x24fd15,'stdio':[_0x7d2039(0x239),'inherit',_0x7d2039(0x239),_0x7d2039(0x1de)]},pid[_0x302f9c]=childProcess[_0x7d2039(0x1cc)](botfile,_0xd88d02,_0x24fd15),pid[_0x302f9c]['on'](_0x7d2039(0x20c),_0x1876b5=>{const _0x56609e=_0x7d2039;switch(Object[_0x56609e(0x190)](_0x1876b5)[0x0]){case _0x56609e(0x23d):updateBotName(_0x302f9c,_0x1876b5[_0x56609e(0x23d)]);break;case _0x56609e(0x176):updateStatus(_0x302f9c,_0x1876b5[_0x56609e(0x176)]);break;case'live':updateLive(_0x302f9c,_0x1876b5[_0x56609e(0x1c1)]);break;case _0x56609e(0x1a8):updateLive(_0x302f9c,_0x1876b5[_0x56609e(0x1a8)]),io['to'](_0x302f9c)[_0x56609e(0x1dc)](_0x56609e(0x176),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x56609e(0x1bb):_0x1876b5['stop']==_0x56609e(0x178)&&restartBot(_0x302f9c);_0x1876b5['stop']=='kill'&&toggleBot(_0x302f9c,_0x56609e(0x279),_0x56609e(0x276));break;case _0x56609e(0x270):sendTelegram(_0x302f9c,_0x1876b5[_0x56609e(0x270)]);break;case _0x56609e(0x250):io['to'](_0x302f9c)['emit'](_0x1876b5[_0x56609e(0x250)],_0x1876b5[_0x56609e(0x164)]);break;}}),pid[_0x302f9c]['on'](_0x7d2039(0x22f),function(_0xa351ae){if(_0x533d83)return;_0x533d83=!![],_0x55cb8e(_0xa351ae);}),pid[_0x302f9c]['on'](_0x7d2039(0x17e),function(_0x5c59d6){const _0xbbe3ee=_0x7d2039;if(installingUpdate)return;if(_0x533d83)return;_0x533d83=!![],_0x55cb8e(null);const _0x22f098=dbConfig[_0xbbe3ee(0x258)](_0xbbe3ee(0x208))[_0xbbe3ee(0x27e)]({'botID':_0x302f9c})[_0xbbe3ee(0x182)]();_0x22f098&&(_0x22f098[_0xbbe3ee(0x176)]==_0xbbe3ee(0x255)||_0x22f098[_0xbbe3ee(0x176)]==_0xbbe3ee(0x1b0))&&(updateLive(_0x302f9c,_0xbbe3ee(0x276)),logging('restarting\x20Bot\x20'+_0x302f9c),startBot([_0x302f9c,userID],{'cwd':bbpath},function(_0x5b7f27){if(_0x5b7f27)logging(_0x5b7f27);}));});}function stopBot(_0xc1fdef){const _0x5986d0=_0x158c2b;getClientsWithBotID(_0xc1fdef)['forEach'](_0x462a29=>{const _0x20ee58=_0x3e2b;getSocket(_0x462a29['id'])[_0x20ee58(0x223)](!![]),removeClient(_0x462a29['id']);});if(pid[_0xc1fdef])pid[_0xc1fdef][_0x5986d0(0x240)]();}function restartBot(_0x1e0a83){const _0x22224c=_0x158c2b;if(pid[_0x1e0a83])pid[_0x1e0a83][_0x22224c(0x240)]();}function addBot(){const _0x1a3da3=_0x158c2b;let _0x1beda3;for(let _0x2ce40a=0x1;_0x2ce40a<0x3e9;_0x2ce40a++){_0x1beda3=_0x2ce40a[_0x1a3da3(0x21c)]()[_0x1a3da3(0x260)](0x3,'0');let _0x35cb43=config[_0x1a3da3(0x27e)](_0x2f49f0=>_0x2f49f0[_0x1a3da3(0x27f)]==_0x1beda3);if(!_0x35cb43)break;}if(_0x1beda3===_0x1a3da3(0x1e1)){logging(_0x1a3da3(0x15f));return;}logging(_0x1a3da3(0x1d9)+_0x1beda3),dbConfig[_0x1a3da3(0x258)](_0x1a3da3(0x208))[_0x1a3da3(0x14a)]({'botID':_0x1beda3,'botname':_0x1a3da3(0x283)+_0x1beda3,'status':_0x1a3da3(0x1b0),'live':''})[_0x1a3da3(0x18d)](),startBot([_0x1beda3,userID],{'cwd':bbpath},function(_0x3343c2){if(_0x3343c2)logging(_0x3343c2);}),config=getConfiguration(),io['to'](_0x1a3da3(0x210))['emit']('bots',config);}function deleteBot(_0x4a33ca){const _0x2ca833=_0x158c2b;getClientsWithBotID(_0x4a33ca)[_0x2ca833(0x266)](_0x163a92=>{getSocket(_0x163a92['id'])['disconnect'](!![]),removeClient(_0x163a92['id']);}),dbConfig['get']('bots')[_0x2ca833(0x277)]({'botID':_0x4a33ca})['write'](),logging(_0x2ca833(0x173)+_0x4a33ca),stopBot(_0x4a33ca);try{fs['unlinkSync'](path[_0x2ca833(0x25f)](configpath,_0x2ca833(0x20f)+_0x4a33ca+_0x2ca833(0x247))),fs[_0x2ca833(0x24b)](path['join'](configpath,'bot-'+_0x4a33ca+_0x2ca833(0x1fd))),fs[_0x2ca833(0x24b)](path[_0x2ca833(0x25f)](configpath,'bot-'+_0x4a33ca+_0x2ca833(0x261))),fs['unlinkSync'](path[_0x2ca833(0x25f)](configpath,_0x2ca833(0x20f)+_0x4a33ca+_0x2ca833(0x162)));}catch(_0x4e27e6){if(_0x4e27e6)logging(_0x2ca833(0x20a),_0x4e27e6);}config=getConfiguration(),io['to']('botmanager')[_0x2ca833(0x1dc)](_0x2ca833(0x208),config);}function toggleBot(_0x247e81,_0x54ed9b,_0x318169){const _0x5ac0b6=_0x158c2b;dbConfig[_0x5ac0b6(0x258)](_0x5ac0b6(0x208))[_0x5ac0b6(0x27e)]({'botID':_0x247e81})[_0x5ac0b6(0x15e)]({'status':_0x54ed9b})[_0x5ac0b6(0x15e)]({'live':_0x318169})[_0x5ac0b6(0x18d)]();if(_0x54ed9b=='enabled'||_0x54ed9b==_0x5ac0b6(0x1b0))logging(_0x5ac0b6(0x285)+_0x247e81),startBot([_0x247e81,userID],{'cwd':bbpath},function(_0x18c895){if(_0x18c895)logging(_0x18c895);});else(_0x54ed9b==_0x5ac0b6(0x279)||_0x54ed9b==_0x5ac0b6(0x224))&&(logging('disabled\x20Bot\x20'+_0x247e81),stopBot(_0x247e81));config=getConfiguration(),io['to'](_0x5ac0b6(0x210))[_0x5ac0b6(0x1dc)](_0x5ac0b6(0x208),config);}function toggleStatus(_0x483a18){const _0xe3f7c0=_0x158c2b;let _0x3156ad=dbConfig[_0xe3f7c0(0x258)](_0xe3f7c0(0x208))[_0xe3f7c0(0x27e)]({'botID':_0x483a18})[_0xe3f7c0(0x182)](),_0x50a727;if(_0x3156ad[_0xe3f7c0(0x176)]===_0xe3f7c0(0x255))_0x50a727=_0xe3f7c0(0x279);else{if(_0x3156ad[_0xe3f7c0(0x176)]===_0xe3f7c0(0x1b0))_0x50a727=_0xe3f7c0(0x224);else{if(_0x3156ad[_0xe3f7c0(0x176)]==='new-disabled')_0x50a727=_0xe3f7c0(0x1b0);else{if(_0x3156ad[_0xe3f7c0(0x176)]===_0xe3f7c0(0x279))_0x50a727=_0xe3f7c0(0x255);}}}return _0x50a727;}function updateStatus(_0x9d40e3,_0xc189b6){const _0x279d54=_0x158c2b;dbConfig[_0x279d54(0x258)](_0x279d54(0x208))[_0x279d54(0x27e)]({'botID':_0x9d40e3})['assign']({'status':_0xc189b6})[_0x279d54(0x18d)](),config=getConfiguration(),io['to']('botmanager')[_0x279d54(0x1dc)](_0x279d54(0x208),config);}function updateLive(_0x1885b1,_0x142c84){const _0x5a108f=_0x158c2b;dbConfig[_0x5a108f(0x258)]('bots')[_0x5a108f(0x27e)]({'botID':_0x1885b1})[_0x5a108f(0x15e)]({'live':_0x142c84})['write'](),config=getConfiguration(),io['to'](_0x5a108f(0x210))[_0x5a108f(0x1dc)](_0x5a108f(0x208),config);}function updateBotName(_0x29a114,_0x5f4c3a){const _0x522b1b=_0x158c2b;dbConfig[_0x522b1b(0x258)]('bots')['find']({'botID':_0x29a114})[_0x522b1b(0x15e)]({'botname':_0x5f4c3a})[_0x522b1b(0x18d)](),config=getConfiguration(),io['to'](_0x522b1b(0x210))[_0x522b1b(0x1dc)](_0x522b1b(0x208),config);}function telegramError(_0x210eec){const _0x4d0ae4=_0x158c2b;console[_0x4d0ae4(0x200)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x86f0f2){const _0x42f1d0=_0x158c2b;if(_0x86f0f2[_0x42f1d0(0x1e8)]['username']!=settings[_0x42f1d0(0x1d5)]&&'@'+_0x86f0f2['from'][_0x42f1d0(0x1b6)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x86f0f2[_0x42f1d0(0x1d2)]['id'],_0x42f1d0(0x169),{'parse_mode':_0x42f1d0(0x166)})[_0x42f1d0(0x1b5)](_0x4d0f5a=>{telegramError(_0x4d0f5a);}),![];return!![];}async function initTelegram(){const _0x137f37=_0x158c2b;if(tgBot)tgBot[_0x137f37(0x1c4)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x54fec9=_0x137f37(0x21a);_0x54fec9+='\x0a',_0x54fec9+=_0x137f37(0x1b1),_0x54fec9+=_0x137f37(0x1e6),_0x54fec9+=_0x137f37(0x19c),_0x54fec9+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x54fec9+='/on\x20-\x20start\x20bot(s)\x0a',_0x54fec9+=_0x137f37(0x220),_0x54fec9+=_0x137f37(0x1a6),_0x54fec9+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x509b0d=_0x137f37(0x251);_0x509b0d+='\x0a',_0x509b0d+=_0x54fec9,tgBot['onText'](/\/start/,_0x11fffb=>{const _0x3ef080=_0x137f37;if(!validateTelegram(_0x11fffb))return;if(settings['telegramChatId']!=_0x11fffb[_0x3ef080(0x1d2)]['id'])updateSetting(_0x3ef080(0x231),_0x11fffb[_0x3ef080(0x1d2)]['id']);updateSetting(_0x3ef080(0x21d),!![]),tgBot[_0x3ef080(0x248)](_0x11fffb[_0x3ef080(0x1d2)]['id'],_0x509b0d)[_0x3ef080(0x1b5)](_0x559019=>{telegramError(_0x559019);});}),tgBot[_0x137f37(0x191)](/\/enable/,_0x19fe5a=>{const _0x47d803=_0x137f37;if(!validateTelegram(_0x19fe5a))return;if(settings[_0x47d803(0x231)]!=_0x19fe5a[_0x47d803(0x1d2)]['id'])updateSetting(_0x47d803(0x231),_0x19fe5a['chat']['id']);updateSetting(_0x47d803(0x21d),!![]),tgBot[_0x47d803(0x248)](_0x19fe5a[_0x47d803(0x1d2)]['id'],_0x47d803(0x194))[_0x47d803(0x1b5)](_0x2d4bb3=>{telegramError(_0x2d4bb3);});}),tgBot[_0x137f37(0x191)](/\/config/,async _0x1f41f7=>{const _0x172631=_0x137f37;if(!validateTelegram(_0x1f41f7))return;tgBot[_0x172631(0x1df)](_0x172631(0x290)),tgBot[_0x172631(0x248)](_0x1f41f7[_0x172631(0x1d2)]['id'],_0x172631(0x23e),{'reply_markup':{'inline_keyboard':[[{'text':_0x172631(0x26d),'callback_data':_0x172631(0x163)},{'text':_0x172631(0x196),'callback_data':_0x172631(0x236)},{'text':_0x172631(0x193),'callback_data':_0x172631(0x14d)}]]}})[_0x172631(0x1b5)](_0x30512b=>{telegramError(_0x30512b);}),tgBot['on'](_0x172631(0x290),async _0x2d3701=>{const _0x5c8307=_0x172631,_0x31279e=_0x2d3701[_0x5c8307(0x28b)],_0x286d3b=_0x2d3701[_0x5c8307(0x20c)];tgBot[_0x5c8307(0x20e)](_0x2d3701['id'])[_0x5c8307(0x19d)](async()=>{const _0x30ff1d=_0x5c8307;_0x31279e=='orders'&&(updateSetting(_0x30ff1d(0x219),_0x30ff1d(0x163)),updateSetting(_0x30ff1d(0x21d),!![]),await tgBot['sendMessage'](_0x286d3b[_0x30ff1d(0x1d2)]['id'],_0x30ff1d(0x237))[_0x30ff1d(0x1b5)](_0x47aa9c=>{telegramError(_0x47aa9c);}));_0x31279e==_0x30ff1d(0x236)&&(updateSetting(_0x30ff1d(0x219),_0x30ff1d(0x236)),updateSetting(_0x30ff1d(0x21d),!![]),await tgBot[_0x30ff1d(0x248)](_0x286d3b[_0x30ff1d(0x1d2)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x30ff1d(0x1b5)](_0x3439f9=>{telegramError(_0x3439f9);}));_0x31279e==_0x30ff1d(0x14d)&&(updateSetting('telegramEvents',_0x30ff1d(0x14d)),updateSetting(_0x30ff1d(0x21d),!![]),await tgBot[_0x30ff1d(0x248)](_0x286d3b[_0x30ff1d(0x1d2)]['id'],_0x30ff1d(0x1e7))['catch'](_0x3c6e58=>{telegramError(_0x3c6e58);}));if(!settings[_0x30ff1d(0x231)])tgBot['sendMessage'](_0x286d3b[_0x30ff1d(0x1d2)]['id'],_0x30ff1d(0x23c))[_0x30ff1d(0x1b5)](_0x2deae8=>{telegramError(_0x2deae8);});}),tgBot['removeListener'](_0x5c8307(0x290));});}),tgBot['onText'](/\/status/,_0x14400e=>{const _0x205189=_0x137f37;if(!validateTelegram(_0x14400e))return;let _0x5eb980=_0x205189(0x22b);config[_0x205189(0x266)](_0x4b5da2=>{const _0x3fbd42=_0x205189;_0x5eb980+='Bot\x20'+_0x4b5da2['botID']+_0x3fbd42(0x1d0)+_0x4b5da2[_0x3fbd42(0x23d)]+':\x20'+_0x4b5da2['status']+_0x3fbd42(0x1db)+_0x4b5da2['live']+'\x0a';}),_0x5eb980+='\x0a',_0x5eb980+=_0x205189(0x25b),_0x5eb980+=!settings[_0x205189(0x21d)]?_0x205189(0x267):_0x205189(0x221),_0x5eb980+=settings[_0x205189(0x21d)]?settings[_0x205189(0x219)]==_0x205189(0x14d)?_0x205189(0x23b):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x205189(0x287):'',tgBot[_0x205189(0x248)](_0x14400e[_0x205189(0x1d2)]['id'],_0x5eb980,{'parse_mode':_0x205189(0x166)})[_0x205189(0x1b5)](_0xfd3855=>{telegramError(_0xfd3855);});}),tgBot[_0x137f37(0x191)](/\/restart/,_0x3e4f67=>{const _0x52f49d=_0x137f37;if(!validateTelegram(_0x3e4f67))return;tgBot[_0x52f49d(0x1df)]('callback_query');const _0x42cd5d=getEnabledBots();if(_0x42cd5d[_0x52f49d(0x25d)]==0x0)tgBot[_0x52f49d(0x248)](_0x3e4f67[_0x52f49d(0x1d2)]['id'],_0x52f49d(0x159))[_0x52f49d(0x1b5)](_0x21c3bf=>{telegramError(_0x21c3bf);});else{if(_0x42cd5d[_0x52f49d(0x25d)]>0x1)_0x42cd5d[_0x52f49d(0x14a)]({'botID':'all'});let _0x1abdaf=[],_0x5c8912=[];const _0x4dfc53=_0x42cd5d[_0x52f49d(0x25d)]%0x4==0x0||_0x42cd5d['length']%0x4==0x3||_0x42cd5d[_0x52f49d(0x25d)]%0x3==0x1?0x4:0x3;let _0xc6a9=0x0;_0x42cd5d[_0x52f49d(0x266)]((_0x4a8ec6,_0x11f4fb)=>{const _0x3014ed=_0x52f49d;if(_0x11f4fb%_0x4dfc53==0x0)_0x5c8912=[];_0x5c8912[_0x3014ed(0x14a)]({'text':_0x4a8ec6[_0x3014ed(0x27f)]==_0x3014ed(0x14d)?_0x3014ed(0x1f4):_0x3014ed(0x283)+_0x4a8ec6[_0x3014ed(0x27f)],'callback_data':_0x4a8ec6[_0x3014ed(0x27f)]}),_0x11f4fb%_0x4dfc53==0x0&&(_0x1abdaf[_0xc6a9]=_0x5c8912,_0xc6a9++);}),tgBot[_0x52f49d(0x248)](_0x3e4f67[_0x52f49d(0x1d2)]['id'],_0x52f49d(0x181),{'reply_markup':{'inline_keyboard':_0x1abdaf}})[_0x52f49d(0x1b5)](_0xb79594=>{telegramError(_0xb79594);}),tgBot['on'](_0x52f49d(0x290),async _0x404e23=>{const _0xb20a10=_0x52f49d,_0x592dac=_0x404e23[_0xb20a10(0x28b)],_0x59c45f=_0x404e23['message'];tgBot[_0xb20a10(0x20e)](_0x404e23['id'])['then'](async()=>{const _0xf78258=_0xb20a10;if(_0x592dac==_0xf78258(0x14d)){if(settings['telegramEvents']==_0xf78258(0x163))tgBot[_0xf78258(0x248)](_0x59c45f[_0xf78258(0x1d2)]['id'],_0xf78258(0x28e))[_0xf78258(0x1b5)](_0xee7fe6=>{telegramError(_0xee7fe6);});config[_0xf78258(0x266)](_0x4df4f8=>{restartBot(_0x4df4f8['botID']);});}else{if(settings[_0xf78258(0x219)]==_0xf78258(0x163))tgBot['sendMessage'](_0x59c45f['chat']['id'],_0xf78258(0x1ab)+_0x592dac)[_0xf78258(0x1b5)](_0x3c3c9b=>{telegramError(_0x3c3c9b);});restartBot(_0x592dac);}}),tgBot[_0xb20a10(0x1df)](_0xb20a10(0x290));});}}),tgBot[_0x137f37(0x191)](/\/on/,_0x3f0fea=>{const _0x1dc8e4=_0x137f37;if(!validateTelegram(_0x3f0fea))return;tgBot['removeListener'](_0x1dc8e4(0x290));const _0x3e6642=getDisabledBots();if(_0x3e6642[_0x1dc8e4(0x25d)]==0x0)tgBot[_0x1dc8e4(0x248)](_0x3f0fea[_0x1dc8e4(0x1d2)]['id'],_0x1dc8e4(0x1f0))[_0x1dc8e4(0x1b5)](_0x21e82c=>{telegramError(_0x21e82c);});else{if(_0x3e6642['length']>0x1)_0x3e6642[_0x1dc8e4(0x14a)]({'botID':_0x1dc8e4(0x14d)});let _0x5006ca=[],_0x31bfcd=[];const _0x50873e=_0x3e6642[_0x1dc8e4(0x25d)]%0x4==0x0||_0x3e6642[_0x1dc8e4(0x25d)]%0x4==0x3||_0x3e6642[_0x1dc8e4(0x25d)]%0x3==0x1?0x4:0x3;let _0x334dd7=0x0;_0x3e6642[_0x1dc8e4(0x266)]((_0x27f66a,_0x225356)=>{const _0x19495d=_0x1dc8e4;if(_0x225356%_0x50873e==0x0)_0x31bfcd=[];_0x31bfcd[_0x19495d(0x14a)]({'text':_0x27f66a[_0x19495d(0x27f)]==_0x19495d(0x14d)?_0x19495d(0x1f4):'Bot\x20'+_0x27f66a['botID'],'callback_data':_0x27f66a[_0x19495d(0x27f)]}),_0x225356%_0x50873e==0x0&&(_0x5006ca[_0x334dd7]=_0x31bfcd,_0x334dd7++);}),tgBot[_0x1dc8e4(0x248)](_0x3f0fea['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x5006ca}})[_0x1dc8e4(0x1b5)](_0x2cdbae=>{telegramError(_0x2cdbae);}),tgBot['on']('callback_query',async _0x38f069=>{const _0x983b7e=_0x1dc8e4,_0xa2ac5f=_0x38f069[_0x983b7e(0x28b)],_0x44f46b=_0x38f069[_0x983b7e(0x20c)];tgBot[_0x983b7e(0x20e)](_0x38f069['id'])[_0x983b7e(0x19d)](async()=>{const _0xca4f4=_0x983b7e;if(_0xa2ac5f==_0xca4f4(0x14d)){if(settings[_0xca4f4(0x219)]==_0xca4f4(0x163))tgBot['sendMessage'](_0x44f46b[_0xca4f4(0x1d2)]['id'],_0xca4f4(0x205))[_0xca4f4(0x1b5)](_0x49307a=>{telegramError(_0x49307a);});_0x3e6642[_0xca4f4(0x266)](_0x482da6=>{const _0x1975a3=_0xca4f4;if(_0x482da6[_0x1975a3(0x27f)]!='all')toggleBot(_0x482da6[_0x1975a3(0x27f)],toggleStatus(_0x482da6[_0x1975a3(0x27f)]),_0x1975a3(0x276));});}else{if(settings['telegramEvents']==_0xca4f4(0x163))tgBot[_0xca4f4(0x248)](_0x44f46b[_0xca4f4(0x1d2)]['id'],_0xca4f4(0x21b)+_0xa2ac5f)[_0xca4f4(0x1b5)](_0x3e699d=>{telegramError(_0x3e699d);});toggleBot(_0xa2ac5f,toggleStatus(_0xa2ac5f),_0xca4f4(0x276));}}),tgBot[_0x983b7e(0x1df)](_0x983b7e(0x290));});}}),tgBot[_0x137f37(0x191)](/\/off/,_0x4ed423=>{const _0x3fdc33=_0x137f37;if(!validateTelegram(_0x4ed423))return;tgBot[_0x3fdc33(0x1df)]('callback_query');const _0x12f700=getEnabledBots();if(_0x12f700['length']==0x0)tgBot['sendMessage'](_0x4ed423[_0x3fdc33(0x1d2)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0xc94642=>{telegramError(_0xc94642);});else{if(_0x12f700[_0x3fdc33(0x25d)]>0x1)_0x12f700[_0x3fdc33(0x14a)]({'botID':'all'});let _0x57ad6d=[],_0x34fcf7=[];const _0x1b5d52=_0x12f700[_0x3fdc33(0x25d)]%0x4==0x0||_0x12f700[_0x3fdc33(0x25d)]%0x4==0x3||_0x12f700[_0x3fdc33(0x25d)]%0x3==0x1?0x4:0x3;let _0x3d3a2b=0x0;_0x12f700[_0x3fdc33(0x266)]((_0x22e2fe,_0x16992c)=>{const _0x56a655=_0x3fdc33;if(_0x16992c%_0x1b5d52==0x0)_0x34fcf7=[];_0x34fcf7[_0x56a655(0x14a)]({'text':_0x22e2fe[_0x56a655(0x27f)]==_0x56a655(0x14d)?'All\x20bots':'Bot\x20'+_0x22e2fe['botID'],'callback_data':_0x22e2fe[_0x56a655(0x27f)]}),_0x16992c%_0x1b5d52==0x0&&(_0x57ad6d[_0x3d3a2b]=_0x34fcf7,_0x3d3a2b++);}),tgBot['sendMessage'](_0x4ed423['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x57ad6d}})[_0x3fdc33(0x1b5)](_0x4e149d=>{telegramError(_0x4e149d);}),tgBot['on']('callback_query',async _0x361fe5=>{const _0xe35a0a=_0x3fdc33,_0x372255=_0x361fe5[_0xe35a0a(0x28b)],_0x2859ab=_0x361fe5[_0xe35a0a(0x20c)];tgBot[_0xe35a0a(0x20e)](_0x361fe5['id'])['then'](async()=>{const _0x3e3ed8=_0xe35a0a;if(_0x372255=='all'){if(settings['telegramEvents']==_0x3e3ed8(0x163))tgBot[_0x3e3ed8(0x248)](_0x2859ab[_0x3e3ed8(0x1d2)]['id'],_0x3e3ed8(0x27b))[_0x3e3ed8(0x1b5)](_0x124b40=>{telegramError(_0x124b40);});_0x12f700[_0x3e3ed8(0x266)](_0x4074e2=>{const _0x3128cf=_0x3e3ed8;if(_0x4074e2[_0x3128cf(0x27f)]!=_0x3128cf(0x14d))toggleBot(_0x4074e2[_0x3128cf(0x27f)],toggleStatus(_0x4074e2[_0x3128cf(0x27f)]),_0x3128cf(0x276));});}else{if(settings['telegramEvents']==_0x3e3ed8(0x163))tgBot['sendMessage'](_0x2859ab[_0x3e3ed8(0x1d2)]['id'],_0x3e3ed8(0x1b8)+_0x372255)[_0x3e3ed8(0x1b5)](_0x9db6c3=>{telegramError(_0x9db6c3);});toggleBot(_0x372255,toggleStatus(_0x372255),_0x3e3ed8(0x276));}}),tgBot[_0xe35a0a(0x1df)](_0xe35a0a(0x290));});}}),tgBot[_0x137f37(0x191)](/\/disable/,_0x1d72bb=>{const _0x134545=_0x137f37;if(!validateTelegram(_0x1d72bb))return;tgBot[_0x134545(0x248)](_0x1d72bb['chat']['id'],_0x134545(0x291))[_0x134545(0x1b5)](_0x23992d=>{telegramError(_0x23992d);}),updateSetting(_0x134545(0x21d),![]);}),tgBot[_0x137f37(0x191)](/\/help/,_0x334f44=>{const _0x4a33f7=_0x137f37;if(!validateTelegram(_0x334f44))return;tgBot[_0x4a33f7(0x248)](_0x334f44['chat']['id'],_0x54fec9)[_0x4a33f7(0x1b5)](_0x42fa4d=>{telegramError(_0x42fa4d);});}),tgBot['on'](_0x137f37(0x1d4),_0x33c434=>{const _0x4cbe5e=_0x137f37;_0x33c434['toString']()[_0x4cbe5e(0x271)](_0x4cbe5e(0x167))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x4cbe5e(0x1c4)](),tgBot=null,io['to'](_0x4cbe5e(0x210))[_0x4cbe5e(0x1dc)](_0x4cbe5e(0x24f),_0x4cbe5e(0x1d6)));}),process['once']('SIGINT',()=>{const _0x457cf8=_0x137f37;if(tgBot)tgBot[_0x457cf8(0x1c4)]();process[_0x457cf8(0x17e)](0x1);}),process['once'](_0x137f37(0x265),()=>{const _0x4d8afd=_0x137f37;if(tgBot)tgBot[_0x4d8afd(0x1c4)]();process[_0x4d8afd(0x17e)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x1fbe42,_0x52027d){const _0xa86a7=_0x158c2b;if(settings[_0xa86a7(0x21d)]){if(settings[_0xa86a7(0x219)]=='all'||(_0x52027d[_0xa86a7(0x216)]==_0xa86a7(0x22f)||_0x52027d[_0xa86a7(0x216)]=='success')&&settings[_0xa86a7(0x219)]=='alerts'||_0x52027d[_0xa86a7(0x216)]=='order'&&settings['telegramEvents']=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x52027d['showname'])tgBot['sendMessage'](settings[_0xa86a7(0x231)],_0x52027d[_0xa86a7(0x23d)]+_0xa86a7(0x25e)+_0x52027d[_0xa86a7(0x243)])[_0xa86a7(0x1b5)](_0x453901=>{telegramError(_0x453901);});else tgBot[_0xa86a7(0x248)](settings[_0xa86a7(0x231)],_0xa86a7(0x283)+_0x1fbe42+_0xa86a7(0x25e)+_0x52027d[_0xa86a7(0x243)])[_0xa86a7(0x1b5)](_0x49013d=>{telegramError(_0x49013d);});}}}}function getDeviceWithIp(_0x2b03d4){const _0x1ccfab=_0x158c2b;return devices[_0x1ccfab(0x27e)](_0x1c8207=>_0x1c8207['ip']===_0x2b03d4);}function temporaryAccess2FA(_0x314560,_0x18a636){const _0x3e2f39=_0x158c2b;let _0x4283b4=new Date(),_0x4fee61=![];if(lastIpApproval){if(_0x4283b4-lastIpApproval<0x1388)_0x4fee61=!![];}lastIpApproval=new Date();if(_0x4fee61)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x3e2f39(0x1df)](_0x3e2f39(0x290)),tgBot['sendMessage'](settings[_0x3e2f39(0x231)],_0x3e2f39(0x24d)+normalizeIP(_0x18a636)[_0x3e2f39(0x15a)]+_0x3e2f39(0x187),{'parse_mode':_0x3e2f39(0x166),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x3e2f39(0x1e3),'callback_data':'15'},{'text':_0x3e2f39(0x278),'callback_data':'30'},{'text':_0x3e2f39(0x14f),'callback_data':_0x3e2f39(0x14f)}]]}})[_0x3e2f39(0x1b5)](_0x5d7725=>{telegramError(_0x5d7725);}),tgBot['on'](_0x3e2f39(0x290),async _0x4636a3=>{const _0x247851=_0x3e2f39,_0x5d5bf0=_0x4636a3['data'],_0x126a9a=_0x4636a3[_0x247851(0x20c)];tgBot[_0x247851(0x20e)](_0x4636a3['id'])['then'](async()=>{const _0x131664=_0x247851;devices[_0x314560][_0x131664(0x202)]={'clientip':_0x18a636,'timestamp':new Date()['getTime'](),'expiry':_0x5d5bf0},_0x5d5bf0!=_0x131664(0x14f)?(await tgBot['sendMessage'](_0x126a9a['chat']['id'],_0x131664(0x1e5)+_0x5d5bf0+_0x131664(0x288),{'parse_mode':_0x131664(0x166)})[_0x131664(0x1b5)](_0x48f6ea=>{telegramError(_0x48f6ea);}),io['to'](_0x314560)['emit'](_0x131664(0x176),{'access':{'allow':![],'reason':_0x131664(0x1ca),'token':null}})):(await tgBot[_0x131664(0x248)](_0x126a9a[_0x131664(0x1d2)]['id'],_0x131664(0x149))['catch'](_0x3fa6f6=>{telegramError(_0x3fa6f6);}),io['to'](_0x314560)[_0x131664(0x1dc)](_0x131664(0x176),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x247851(0x1df)]('callback_query');}));}function loginAccess2FA(_0x30fdc6,_0x31abef){const _0x3328e4=_0x158c2b;tgBot&&settings[_0x3328e4(0x231)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x3328e4(0x248)](settings[_0x3328e4(0x231)],_0x3328e4(0x1c9)+normalizeIP(_0x31abef)[_0x3328e4(0x15a)]+_0x3328e4(0x187),{'parse_mode':_0x3328e4(0x166),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x3328e4(0x1b5)](_0xa8bfe8=>{telegramError(_0xa8bfe8);}),tgBot['on']('callback_query',async _0x33d130=>{const _0x237a8c=_0x3328e4,_0x5e585b=_0x33d130['data'],_0x4a4830=_0x33d130[_0x237a8c(0x20c)];tgBot[_0x237a8c(0x20e)](_0x33d130['id'])[_0x237a8c(0x19d)](async()=>{const _0x4e0e15=_0x237a8c;devices[_0x30fdc6][_0x4e0e15(0x204)]={'clientip':_0x31abef,'timestamp':new Date()[_0x4e0e15(0x292)](),'expiry':_0x5e585b},_0x5e585b!=_0x4e0e15(0x14f)?(await tgBot[_0x4e0e15(0x248)](_0x4a4830['chat']['id'],_0x4e0e15(0x1fc),{'parse_mode':_0x4e0e15(0x166)})['catch'](_0x511b32=>{telegramError(_0x511b32);}),io['to'](_0x30fdc6)[_0x4e0e15(0x1dc)](_0x4e0e15(0x176),{'access':{'allow':![],'reason':_0x4e0e15(0x1ca),'token':null}})):(await tgBot['sendMessage'](_0x4a4830['chat']['id'],_0x4e0e15(0x212))['catch'](_0x3a0e35=>{telegramError(_0x3a0e35);}),io['to'](_0x30fdc6)[_0x4e0e15(0x1dc)](_0x4e0e15(0x176),{'access':{'allow':![],'reason':_0x4e0e15(0x1cb),'token':null}}));}),tgBot[_0x237a8c(0x1df)](_0x237a8c(0x290));}));}function getConfiguration(){const _0x1dcd6e=_0x158c2b;return dbConfig['get']('bots')[_0x1dcd6e(0x18e)](_0x1dcd6e(0x27f))[_0x1dcd6e(0x182)]()||[];}function getEnabledBots(){const _0x56a2c2=_0x158c2b;return dbConfig['get'](_0x56a2c2(0x208))[_0x56a2c2(0x18e)](_0x56a2c2(0x27f))[_0x56a2c2(0x229)]({'status':_0x56a2c2(0x255)})[_0x56a2c2(0x182)]()||[];}function getDisabledBots(){const _0x1bf6c1=_0x158c2b;return dbConfig[_0x1bf6c1(0x258)](_0x1bf6c1(0x208))[_0x1bf6c1(0x18e)](_0x1bf6c1(0x27f))[_0x1bf6c1(0x229)]({'status':'disabled'})[_0x1bf6c1(0x182)]()||[];}function getSettings(){const _0x23e24b=_0x158c2b;return dbSettings['get'](_0x23e24b(0x20b))[_0x23e24b(0x182)]()||{'timeshift':0x0};}function getSecure(){const _0x46de1b=_0x158c2b;return dbSecure[_0x46de1b(0x258)](_0x46de1b(0x1b2))[_0x46de1b(0x182)]()||{};}function getBlacklist(){const _0x19ec6f=_0x158c2b;return dbSecure[_0x19ec6f(0x258)](_0x19ec6f(0x1c5))['value']()||[];}function broadcastToBots(_0x122e19,_0x3b9671){const _0x1173d2=_0x158c2b;config[_0x1173d2(0x266)](_0x5218ea=>{const _0x516d93=_0x1173d2;if(_0x5218ea[_0x516d93(0x176)]==_0x516d93(0x255)&&_0x5218ea[_0x516d93(0x1c1)]==_0x516d93(0x19e)){if(pid[_0x5218ea[_0x516d93(0x27f)]])pid[_0x5218ea[_0x516d93(0x27f)]]['send']({[_0x122e19]:_0x3b9671});}});}function storeSettings(_0x366251,_0xb79717=![]){const _0x1b032f=_0x158c2b;_0x366251={...settings,..._0x366251};if(_0xb79717&&_0x366251[_0x1b032f(0x226)]!='************'&&_0x366251[_0x1b032f(0x226)]!=''){const _0x53c761=crypt['decrypt'](secure[_0x1b032f(0x14e)],_0x366251[_0x1b032f(0x226)])[_0x1b032f(0x20c)][_0x1b032f(0x222)]('@')[0x0],_0x13f00d=bcrypt[_0x1b032f(0x249)](_0x53c761,saltRounds);_0x366251={..._0x366251,'bbPassword':_0x13f00d};}if(_0xb79717&&_0x366251[_0x1b032f(0x189)]!=_0x1b032f(0x1ae)&&_0x366251[_0x1b032f(0x189)]!=''){const _0x51cb0f=crypt[_0x1b032f(0x1f7)](secure['privateKey'],_0x366251['telegramToken'])[_0x1b032f(0x20c)][_0x1b032f(0x222)]('@')[0x0];_0x366251={..._0x366251,'telegramToken':_0x51cb0f};}const _0x7f1150=_0x366251[_0x1b032f(0x189)]!=_0x1b032f(0x1ae)&&_0x366251['telegramToken']!=settings[_0x1b032f(0x189)]||_0x366251[_0x1b032f(0x1d5)]!=settings[_0x1b032f(0x1d5)],_0x436eed=_0x366251[_0x1b032f(0x189)]==''||_0x366251[_0x1b032f(0x1d5)]=='';if(_0x7f1150)_0x366251['telegramEvents']=_0x1b032f(0x14d);for(const [_0x4fd35c,_0x3a148d]of Object[_0x1b032f(0x234)](_0x366251)){if(_0x4fd35c==_0x1b032f(0x189)&&_0x3a148d==_0x1b032f(0x1ae)){_0x366251[_0x1b032f(0x189)]=settings['telegramToken'];continue;};if(_0x4fd35c==_0x1b032f(0x226)&&_0x3a148d==_0x1b032f(0x1ae)){_0x366251[_0x1b032f(0x226)]=settings['bbPassword'];continue;};dbSettings[_0x1b032f(0x232)](_0x1b032f(0x1f9)+_0x4fd35c,_0x3a148d)[_0x1b032f(0x18d)]();}settings=_0x366251,io['to']('botmanager')['emit']('settings',cleanSettings()),broadcastToBots(_0x1b032f(0x1e9),settings[_0x1b032f(0x1e9)]);if(_0x7f1150&&!_0x436eed)initTelegram();if(_0x7f1150&&_0x436eed)disableTelegram();getAllClients()[_0x1b032f(0x266)](_0x2bd736=>{const _0x1b3850=_0x1b032f;getSocket(_0x2bd736['id'])[_0x1b3850(0x1dc)](_0x1b3850(0x176),{'access':{'allow':![],'reason':_0x1b3850(0x1ca),'token':null}});});}function updateSetting(_0x4e860b,_0x3882f6){const _0x467fd8=_0x158c2b;dbSettings[_0x467fd8(0x232)](_0x467fd8(0x1f9)+_0x4e860b,_0x3882f6)[_0x467fd8(0x18d)](),settings=getSettings(),io['to'](_0x467fd8(0x210))[_0x467fd8(0x1dc)](_0x467fd8(0x20b),cleanSettings());}function storeSecure(_0x2c2142){const _0x11c372=_0x158c2b;dbSecure[_0x11c372(0x258)]('secure')[_0x11c372(0x14a)](_0x2c2142)[_0x11c372(0x18d)](),secure=_0x2c2142;}function addBlacklist(_0x52fc18){const _0x3f6f5e=_0x158c2b;cleanBlacklist();let _0x5560c7;devices[_0x52fc18][_0x3f6f5e(0x202)]?_0x5560c7=Math[_0x3f6f5e(0x230)](devices[_0x52fc18][_0x3f6f5e(0x202)][_0x3f6f5e(0x156)],loginExpiry):_0x5560c7=loginExpiry,dbSecure['get'](_0x3f6f5e(0x1c5))[_0x3f6f5e(0x14a)]({'expiry':new Date()[_0x3f6f5e(0x292)]()+_0x5560c7*0x3c*0x3e8,'token':devices[_0x52fc18][_0x3f6f5e(0x1ba)][_0x3f6f5e(0x179)]})['write'](),blacklist=dbSecure[_0x3f6f5e(0x258)]('blacklist')['value']();}function cleanBlacklist(){const _0x46118d=_0x158c2b;let _0x19c62f=dbSecure[_0x46118d(0x258)](_0x46118d(0x1c5))[_0x46118d(0x17a)]()[_0x46118d(0x182)](),_0x349803=new Date()[_0x46118d(0x292)]();_0x19c62f[_0x46118d(0x266)](_0x2ca039=>{const _0x3478d8=_0x46118d;_0x2ca039['expiry']<_0x349803&&dbSecure[_0x3478d8(0x258)](_0x3478d8(0x1c5))[_0x3478d8(0x277)]({'expiry':_0x2ca039[_0x3478d8(0x156)]})[_0x3478d8(0x18d)]();});}function initStates(){const _0x210f13=_0x158c2b;let _0x564d5e=getConfiguration();_0x564d5e[_0x210f13(0x266)](_0x451ea3=>{const _0x3aac10=_0x210f13;_0x451ea3[_0x3aac10(0x1c1)]=_0x3aac10(0x276);}),storeConfiguration(_0x564d5e);}function onKeys(){const _0x47c6d5=new RSA();return new Promise(_0x517fd3=>{const _0x57d4a9=_0x3e2b;_0x47c6d5['generateKeyPairAsync']()[_0x57d4a9(0x19d)](_0x495f29=>{_0x517fd3(_0x495f29);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4495e1=_0x158c2b;let _0x4ecbcf=getConfiguration(),_0x396be5=![];_0x4ecbcf[_0x4495e1(0x266)](_0x46b450=>{const _0x4659f1=_0x4495e1;if(_0x46b450[_0x4659f1(0x176)]==_0x4659f1(0x19e))_0x46b450[_0x4659f1(0x176)]=_0x4659f1(0x255),_0x396be5=!![];else _0x46b450['status']==_0x4659f1(0x276)&&(_0x46b450['status']='disabled',_0x396be5=!![]);});if(_0x396be5)storeConfiguration(_0x4ecbcf);let _0x5eaa80=getSecure();if(!_0x5eaa80[_0x4495e1(0x25a)](_0x4495e1(0x192))){let _0x8835a6=await generateKeys();_0x5eaa80[_0x4495e1(0x1bf)]=_0x8835a6[_0x4495e1(0x1bf)],_0x5eaa80['privateKey']=_0x8835a6['privateKey'],_0x5eaa80[_0x4495e1(0x192)]=crypto[_0x4495e1(0x15d)](0x20)[_0x4495e1(0x21c)](_0x4495e1(0x262));;storeSecure(_0x5eaa80);}let _0x3a2a61=getSettings();_0x396be5=![];!_0x3a2a61['hasOwnProperty']('loginRequired')&&(_0x3a2a61[_0x4495e1(0x24a)]=![],_0x3a2a61[_0x4495e1(0x1d8)]='',_0x3a2a61['bbPassword']='',_0x3a2a61[_0x4495e1(0x184)]=![],_0x396be5=!![]);!_0x3a2a61[_0x4495e1(0x25a)](_0x4495e1(0x207))&&(_0x3a2a61[_0x4495e1(0x207)]=![],_0x3a2a61[_0x4495e1(0x235)]=[],_0x3a2a61['temporaryAccessAllowed']=![],_0x396be5=!![]);if(!_0x3a2a61[_0x4495e1(0x25a)]('telegramEnabled')){if(_0x3a2a61['telegramChatId'])_0x3a2a61[_0x4495e1(0x21d)]=!![];else _0x3a2a61[_0x4495e1(0x21d)]=![];_0x396be5=!![];}if(_0x396be5)storeSettings(_0x3a2a61);}function storeConfiguration(_0x309abd){const _0x206c33=_0x158c2b;dbConfig[_0x206c33(0x258)](_0x206c33(0x208))[_0x206c33(0x277)]()[_0x206c33(0x18d)](),dbConfig[_0x206c33(0x258)](_0x206c33(0x208))[_0x206c33(0x14a)](..._0x309abd)['write'](),config=_0x309abd;}function _0x3b13(){const _0x4ce607=['login','error','max','telegramChatId','set','date-fns','entries','whitelist','alerts','Ok,\x20will\x20send\x20order\x20notifications\x20only','constructor','inherit','temporary\x20access\x20not\x20allowed','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','botname','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','kill','backup/','referer','event','982359sJSPVy','ipaddr.js','bb/','-config.json','sendMessage','hashSync','loginRequired','unlinkSync','reset-password','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','server','notification','function','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','delete-bot','default','headers','enabled','node-telegram-bot-api','::1','get','compareSync','hasOwnProperty','<b>Telegram\x20bot\x20status:</b>\x0a','listen','length','\x20>\x20','join','padStart','-performance.json','hex','/:bot/support','No\x20authentication\x20token','SIGTERM','forEach','Notifications\x20disabled\x0a','storeHeadless','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20attempt\x20to\x20store\x20configuration','config/','createServer','Orders','/:bot/configuration','invalid\x20credentials','telegram','includes','toIPv4MappedAddress','port','path','starting\x20bot\x20|\x20Bot\x20','stopped','remove','30\x20min','disabled','page','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','user','9885BWRZPQ','find','botID','getFullYear','Invalid\x20IP\x20address','use','Bot\x20','login\x20not\x20required','enabled\x20Bot\x20','get-portfolio','\x20only\x0a','\x20minutes','191155XyzNXK','UA-192771731-1','data','auth','getHours','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','socket.io','callback_query','Notifications\x20disabled','getTime','Temporary\x20access\x20rejected','push','Unauthorized\x20attempt\x20to\x20get\x20logs','reason','all','privateKey','reject','bb-config.json','deleteHistoryAlerts','sendFile','ipv6','isIPv4MappedAddress','build','expiry','2FA','initclient','No\x20bots\x20running\x20right\x20now','show','240yMqNAr','Unauthorized\x20attempt\x20to\x20delete\x20bot','randomBytes','assign','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','analytics','name','-results.json','orders','args','sign','HTML','404\x20Not\x20Found','clientip','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','temporaryAccessAllowed','map','getMinutes','3127092YqeUfI','clients','Unauthorized\x20attempt\x20to\x20get\x20portfolio','env','Unauthorized\x20attempt\x20to\x20log\x20out','pidExpireLogin','deleted\x20Bot\x20','timestamp','getMonth','status','3836844lZRyLM','restart','token','cloneDeep','uuid','11342149mVopjc','yargs/yargs','exit','cancel-loading','kind','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','value','42716190EEWLRy','f2aRequired','exp','pidRefreshToken','</b>\x20?','argv','telegramToken','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','removeAllListeners','slice','write','sortBy','handshake','keys','onText','secret','All','Notifications\x20enabled','8NADfBC','Alerts','127.0.0.1','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','store','https://hodlerhacks.com','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','then','running','Crypt','update-bb','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','send','/:bot/performance','RSA','update-bot','/status\x20-\x20show\x20bot(s)\x20status\x0a','2FA\x20login\x20required','started','bot','3000','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','/:bot/history','Unauthorized\x20attempt\x20to\x20delete\x20alerts','************','User\x20has\x20been\x20validated','new','/enable\x20-\x20enable\x20notifications\x0a','secure','2FA\x20login\x20token\x20generated','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','catch','username','add-bot','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','match','access','stop','version','getStartingBalances','login\x20token\x20valid','publicKey','child_process','live','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20update\x20settings','stopPolling','blacklist','get-logs','defaults','password','Allow\x20login\x20from\x20IP\x20address\x20<b>','reload','2FA\x20login\x20rejected','fork','bot.js','Balance\x20Bot','isDirectory','\x20|\x20','bb-secure.json','chat','logged\x20out','polling_error','telegramUsername','Invalid\x20Telegram\x20token','sha256','bbUsername','starting\x20new\x20bot\x20|\x20Bot\x20','lowdb','\x20/\x20','emit','static','ipc','removeListener','yes','1000','allow','15\x20min','emitHistory','Access\x20enabled\x20for\x20','/disable\x20-\x20disable\x20notifications\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','from','timeshift','mkdirSync','logout','120lMIayz','index.html','getPortfolio','2FA\x20required','All\x20bots\x20running\x20right\x20now','getUTCHours','delete-alerts','express','All\x20bots','login\x20token\x20generated','Error:\x20Invalid\x20argument\x20','decrypt','remoteAddress','settings.','readdirSync','-----------------------------------------------------------------------------------','Login\x20accepted','-events.json','getSeconds','bb-settings.json','log','getDate','telegramIpApproval','Unauthorized\x20login\x20attempt\x20(timeout)','telegram2FaApproval','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','randomFillSync','whitelistEnabled','bots',',\x20must\x20be\x20a\x204\x20digit\x20number','error\x20while\x20deleting\x20config\x20files:\x20','settings','message','apply','answerCallbackQuery','bot-','botmanager','Invalid\x20username\x20or\x20IP\x20address','Login\x20rejected','login\x20required','NTBA_FIX_319','temporary\x20token\x20generated','type','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','telegramEvents','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','toString','telegramEnabled','isValid','RSA-OAEP','/off\x20-\x20stop\x20bot(s)\x0a','Notifications\x20enabled\x0a','split','disconnect','new-disabled','Bot\x20Mgr\x20>\x20','bbPassword','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','search','filter','copyFileSync','<b>Balance\x20Bot\x20status:</b>\x0a','verify','store-configuration'];_0x3b13=function(){return _0x4ce607;};return _0x3b13();}function resetPassword(){const _0x3d052d=_0x158c2b;tgBot&&settings[_0x3d052d(0x231)]&&(tgBot[_0x3d052d(0x1df)](_0x3d052d(0x290)),tgBot[_0x3d052d(0x248)](settings[_0x3d052d(0x231)],_0x3d052d(0x269),{'parse_mode':_0x3d052d(0x166),'reply_markup':{'inline_keyboard':[[{'text':_0x3d052d(0x1e0),'callback_data':_0x3d052d(0x1e0)},{'text':'no','callback_data':'no'}]]}})[_0x3d052d(0x1b5)](_0x16880c=>{telegramError(_0x16880c);}),tgBot['on']('callback_query',async _0x9537ac=>{const _0x3e3434=_0x3d052d,_0xe61220=_0x9537ac[_0x3e3434(0x28b)],_0x49a233=_0x9537ac[_0x3e3434(0x20c)];tgBot[_0x3e3434(0x20e)](_0x9537ac['id'])[_0x3e3434(0x19d)](async()=>{const _0x45d188=_0x3e3434;if(_0xe61220!='no'){const _0x495d73=0xf,_0x2a9c9f=_0x45d188(0x1a1),_0x3d8889=Array[_0x45d188(0x1e8)](crypto[_0x45d188(0x206)](new Uint32Array(_0x495d73)))[_0x45d188(0x16b)](_0x2d65ed=>_0x2a9c9f[_0x2d65ed%_0x2a9c9f[_0x45d188(0x25d)]])[_0x45d188(0x25f)](''),_0x58d00b=bcrypt[_0x45d188(0x249)](_0x3d8889,saltRounds);storeSettings({'bbPassword':_0x58d00b}),await tgBot[_0x45d188(0x248)](_0x49a233[_0x45d188(0x1d2)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x3d8889,{'parse_mode':_0x45d188(0x166)})[_0x45d188(0x1b5)](_0x293f96=>{telegramError(_0x293f96);});}else await tgBot[_0x45d188(0x248)](_0x49a233['chat']['id'],'Password\x20reset\x20rejected')[_0x45d188(0x1b5)](_0x6b4ea4=>{telegramError(_0x6b4ea4);});}),tgBot[_0x3e3434(0x1df)](_0x3e3434(0x290));}));}function logging(_0x40c861){const _0x42ace0=_0x158c2b;console[_0x42ace0(0x200)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x40c861);if(tgBot&&settings[_0x42ace0(0x231)]&&settings['telegramEvents']!=_0x42ace0(0x163))tgBot[_0x42ace0(0x248)](settings[_0x42ace0(0x231)],_0x42ace0(0x225)+_0x40c861)[_0x42ace0(0x1b5)](_0x41e5d5=>{telegramError(_0x41e5d5);});}function getServerTime(){const _0xdbd49e=_0x158c2b,_0x21edf9=new Date();return _0x21edf9[_0xdbd49e(0x280)]()+'/'+(_0x21edf9[_0xdbd49e(0x175)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x21edf9[_0xdbd49e(0x201)]()[_0xdbd49e(0x21c)]()[_0xdbd49e(0x260)](0x2,'0')+'\x20'+_0x21edf9['getHours']()[_0xdbd49e(0x21c)]()[_0xdbd49e(0x260)](0x2,'0')+':'+_0x21edf9[_0xdbd49e(0x16c)]()[_0xdbd49e(0x21c)]()[_0xdbd49e(0x260)](0x2,'0')+':'+_0x21edf9[_0xdbd49e(0x1fe)]()[_0xdbd49e(0x21c)]()[_0xdbd49e(0x260)](0x2,'0');}function getTimeStamp(){const _0x24fad6=_0x158c2b,_0x31f953=shiftedTime();return _0x31f953[_0x24fad6(0x280)]()+'/'+(_0x31f953[_0x24fad6(0x175)]()+0x1)[_0x24fad6(0x21c)]()[_0x24fad6(0x260)](0x2,'0')+'/'+_0x31f953[_0x24fad6(0x201)]()[_0x24fad6(0x21c)]()[_0x24fad6(0x260)](0x2,'0')+'\x20'+_0x31f953[_0x24fad6(0x28d)]()[_0x24fad6(0x21c)]()[_0x24fad6(0x260)](0x2,'0')+':'+_0x31f953[_0x24fad6(0x16c)]()[_0x24fad6(0x21c)]()['padStart'](0x2,'0')+':'+_0x31f953[_0x24fad6(0x1fe)]()[_0x24fad6(0x21c)]()[_0x24fad6(0x260)](0x2,'0');}function shiftedTime(){const _0x2f07ae=_0x158c2b,_0x535ac1=new Date();let _0x478527=_0x535ac1;if(settings[_0x2f07ae(0x1e9)]&&settings[_0x2f07ae(0x1e9)]!==0x0)_0x478527=fns['add'](_0x535ac1,{'hours':settings['timeshift']});return _0x478527;}function startScheduler(){const _0x30d18a=_0x158c2b;let _0x1ce9f3=new Date()[_0x30d18a(0x1f1)]();_0x1ce9f3==0x1&&backupConfigFiles();_0x1ce9f3==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x22ffd5=_0x158c2b;fs[_0x22ffd5(0x1fa)](configpath,{'withFileTypes':!![]})['forEach'](_0x27fb95=>{const _0x32ed13=_0x22ffd5;if(!_0x27fb95[_0x32ed13(0x1cf)]())fs[_0x32ed13(0x22a)](configpath+_0x27fb95[_0x32ed13(0x161)],configbackuppath+_0x27fb95[_0x32ed13(0x161)]);});}function triggerAnalytics(){const _0x3486f7=_0x158c2b;analytics[_0x3486f7(0x27a)]({'title':'Balance\x20Bot\x20Server','href':_0x3486f7(0x19b),'path':'/v'+serverversion});}function validateCredentials(_0x16ae89,_0x1f4479){const _0x3fa285=_0x158c2b;if(_0x16ae89['username']==settings[_0x3fa285(0x1d8)]&&bcrypt[_0x3fa285(0x259)](_0x16ae89[_0x3fa285(0x1c8)],settings[_0x3fa285(0x226)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x3fa285(0x1a7),'token':null};else{const _0x25c00e=generateLoginToken(_0x1f4479);return{'allow':!![],'reason':_0x3fa285(0x1f5),'token':_0x25c00e};}}else return{'allow':![],'reason':_0x3fa285(0x26f),'token':null};}function refreshToken(_0x370e75){const _0xc1f37=_0x158c2b,_0x2cc481=generateLoginToken(_0x370e75);return{'allow':!![],'reason':_0xc1f37(0x1f5),'token':_0x2cc481};}function validateAccess(_0x198543,_0x447721){const _0x2addca=_0x158c2b;let _0x28d664=devices[_0x447721]['ip'],_0xd23380;const _0x5cc7d4=_0x13f2c1=>{const _0x526f9f=_0x3e2b;if(settings[_0x526f9f(0x24a)]){if(settings[_0x526f9f(0x184)]){if(telegram2FaApproved(_0x447721)){const _0x3167fc=generateLoginToken(_0x447721);return{'allow':!![],'reason':_0x526f9f(0x1b3),'token':_0x3167fc};}else return{'allow':![],'reason':_0x526f9f(0x213),'token':null};}else return _0xd23380=validToken(_0x13f2c1,_0x447721),_0xd23380['hasOwnProperty']('success')?{'allow':!![],'reason':_0x526f9f(0x1be),'token':_0x13f2c1}:{'allow':![],'reason':_0x526f9f(0x213),'token':null};}else return{'allow':!![],'reason':_0x526f9f(0x284),'token':null};};if(settings[_0x2addca(0x207)]){let _0x3536c0=[...settings[_0x2addca(0x235)],_0x2addca(0x257),'::ffff:127.0.0.1',_0x2addca(0x197)];if(_0x3536c0['includes'](_0x28d664))return _0x5cc7d4(_0x198543);else{_0xd23380=validToken(_0x198543,_0x447721);if(_0xd23380[_0x2addca(0x25a)]('success'))return _0x5cc7d4(_0x198543);else{if(telegramIpApproved(_0x447721)){const _0x142cd2=generateToken(_0x447721);return _0xd23380=_0x5cc7d4(_0x198543),_0xd23380['allow']?{'allow':!![],'reason':_0x2addca(0x215),'token':_0x142cd2}:_0xd23380;}else return settings[_0x2addca(0x16a)]?{'allow':![],'reason':_0x2addca(0x1ef),'token':null}:{'allow':![],'reason':_0x2addca(0x23a),'token':null};}}}else return _0x5cc7d4(_0x198543);}function timelyDecrypt(_0x48b287,_0x3a6162=!![]){const _0x403079=_0x158c2b;if(_0x48b287)try{const _0x14d148=crypt[_0x403079(0x1f7)](secure['privateKey'],_0x48b287)[_0x403079(0x20c)],_0x309d59=_0x14d148[_0x403079(0x222)]('@')[0x0],_0x164fb1=_0x14d148[_0x403079(0x222)]('@')[0x1],_0xcaeb16=new Date()[_0x403079(0x292)]();if(_0x3a6162){if(_0xcaeb16-_0x164fb1<maxSecretAge*0x3e8)return _0x309d59;else return![];}else return _0x309d59;}catch(_0x12e5d7){return![];}else return![];}const validToken=(_0x55dc62,_0x108d0a)=>{const _0x3522d5=_0x158c2b,_0x2de059=devices[_0x108d0a]['ip'];if(!_0x55dc62)return{'error':_0x3522d5(0x264)};for(let _0x12ec26 of blacklist){if(_0x12ec26[_0x3522d5(0x179)]==_0x55dc62)return{'error':'Token\x20blacklisted'};}let _0x7bec01;try{_0x7bec01=jwt[_0x3522d5(0x22c)](_0x55dc62,secure[_0x3522d5(0x192)]+_0x108d0a);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x168))&&!_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x1b6))||!_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x185)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x1b6))&&_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x168))){const {clientip:_0x128a4e}=_0x7bec01;return _0x2de059==_0x128a4e?{'success':_0x3522d5(0x1af)}:{'error':_0x3522d5(0x281)};}else{if(_0x7bec01['hasOwnProperty'](_0x3522d5(0x1b6))&&_0x7bec01[_0x3522d5(0x25a)](_0x3522d5(0x168))){const {username:_0x15b6ac,clientip:_0x2e1cb3}=_0x7bec01;return settings['bbUsername']==_0x15b6ac&&_0x2de059==_0x2e1cb3?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3522d5(0x211)};}}},generateLoginToken=_0x49ce3a=>{const _0x5dc0=_0x158c2b;if(_0x49ce3a){const _0x2c3901=devices[_0x49ce3a]['ip'];return jwt['sign']({'username':settings[_0x5dc0(0x1d8)],'clientip':_0x2c3901},secure[_0x5dc0(0x192)]+_0x49ce3a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x303302=>{const _0x10f807=_0x158c2b;if(_0x303302){const _0x47d016=devices[_0x303302]['ip'];return jwt[_0x10f807(0x165)]({'clientip':_0x47d016},secure[_0x10f807(0x192)]+_0x303302,{'expiresIn':devices[_0x303302][_0x10f807(0x202)][_0x10f807(0x156)]*0x3c});}else return![];},telegramIpApproved=_0x3eebda=>{const _0x491326=_0x158c2b;let _0x56ccc4=![];return devices[_0x3eebda]['telegramIpApproval']&&devices[_0x3eebda]['telegramIpApproval'][_0x491326(0x156)]!=_0x491326(0x14f)&&(_0x56ccc4=devices[_0x3eebda][_0x491326(0x202)][_0x491326(0x168)]==devices[_0x3eebda]['ip']&&new Date()['getTime']()-devices[_0x3eebda]['telegramIpApproval'][_0x491326(0x174)]<devices[_0x3eebda][_0x491326(0x202)][_0x491326(0x156)]*0x3c*0x3e8),_0x56ccc4;},telegram2FaApproved=_0x3c0cba=>{const _0x53a675=_0x158c2b;let _0x5dfa52=![];return devices[_0x3c0cba]['telegram2FaApproval']&&devices[_0x3c0cba][_0x53a675(0x204)]['expiry']!=_0x53a675(0x14f)&&(_0x5dfa52=devices[_0x3c0cba][_0x53a675(0x204)][_0x53a675(0x168)]==devices[_0x3c0cba]['ip']&&new Date()[_0x53a675(0x292)]()-devices[_0x3c0cba][_0x53a675(0x204)][_0x53a675(0x174)]<devices[_0x3c0cba]['telegram2FaApproval'][_0x53a675(0x156)]*0x3c*0x3e8),_0x5dfa52;},normalizeIP=_0x485361=>{const _0x374de3=_0x158c2b;let _0x420b79=null,_0x24275c=null;if(ipaddr[_0x374de3(0x21e)](_0x485361)){const _0x36940c=ipaddr['parse'](_0x485361);_0x36940c[_0x374de3(0x180)]()===_0x374de3(0x153)?(_0x36940c[_0x374de3(0x154)]()&&(_0x420b79=_0x36940c['toIPv4Address']()[_0x374de3(0x21c)]()),_0x24275c=_0x36940c[_0x374de3(0x21c)]()):(_0x420b79=_0x36940c['toString'](),_0x24275c=_0x36940c[_0x374de3(0x272)]()[_0x374de3(0x21c)]());}return{'show':_0x420b79?_0x420b79:_0x24275c,'store':_0x24275c};};