const _0x5780eb=_0x39b1;(function(_0x2dd718,_0x37ef73){const _0x28f13c=_0x39b1,_0x4666d6=_0x2dd718();while(!![]){try{const _0x8c3c6f=-parseInt(_0x28f13c(0x215))/0x1+-parseInt(_0x28f13c(0x21d))/0x2+-parseInt(_0x28f13c(0x173))/0x3*(-parseInt(_0x28f13c(0x1c1))/0x4)+-parseInt(_0x28f13c(0xed))/0x5+parseInt(_0x28f13c(0x18e))/0x6*(-parseInt(_0x28f13c(0x1f8))/0x7)+-parseInt(_0x28f13c(0x1c8))/0x8*(parseInt(_0x28f13c(0xf4))/0x9)+parseInt(_0x28f13c(0x105))/0xa*(parseInt(_0x28f13c(0x1ef))/0xb);if(_0x8c3c6f===_0x37ef73)break;else _0x4666d6['push'](_0x4666d6['shift']());}catch(_0x34b089){_0x4666d6['push'](_0x4666d6['shift']());}}}(_0x3593,0x57980));const _0xe5f14b=function(){let _0x44a987=!![];return function(_0x2e1cf6,_0x566d9a){const _0x156a06=_0x44a987?function(){const _0x389a1e=_0x39b1;if(_0x566d9a){const _0x233dac=_0x566d9a[_0x389a1e(0x1eb)](_0x2e1cf6,arguments);return _0x566d9a=null,_0x233dac;}}:function(){};return _0x44a987=![],_0x156a06;};}(),_0x2473d0=_0xe5f14b(this,function(){const _0x3e6fa0=_0x39b1;return _0x2473d0[_0x3e6fa0(0x21b)]()[_0x3e6fa0(0x104)]('(((.+)+)+)+$')[_0x3e6fa0(0x21b)]()[_0x3e6fa0(0x1a0)](_0x2473d0)[_0x3e6fa0(0x104)]('(((.+)+)+)+$');});_0x2473d0();'use strict';process[_0x5780eb(0x14f)]['NTBA_FIX_319']=0x1;function _0x39b1(_0x34f6fb,_0x619468){const _0x24ac53=_0x3593();return _0x39b1=function(_0x2473d0,_0xe5f14b){_0x2473d0=_0x2473d0-0xdb;let _0x359371=_0x24ac53[_0x2473d0];return _0x359371;},_0x39b1(_0x34f6fb,_0x619468);}const childProcess=require(_0x5780eb(0x140)),FileSync=require(_0x5780eb(0x219)),fs=require('fs'),fns=require('date-fns'),low=require(_0x5780eb(0x1b8)),path=require('path'),crypto=require('crypto'),Crypt=require('hybrid-crypto-js')[_0x5780eb(0x122)],RSA=require(_0x5780eb(0x10d))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x5780eb(0x1d6)),analyticsLib=require(_0x5780eb(0x1c3))[_0x5780eb(0x1b1)],googleAnalytics=require(_0x5780eb(0x19f))[_0x5780eb(0x1b1)],ipaddr=require('ipaddr.js'),argv=require(_0x5780eb(0x1fb))(process[_0x5780eb(0x1db)]['slice'](0x2))[_0x5780eb(0x1db)],PORT=argv[_0x5780eb(0x1fa)]||_0x5780eb(0x1dc),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x5780eb(0x1cc)](PORT))return console[_0x5780eb(0x174)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x5780eb(0x15e)](0x1);const HOST=argv[_0x5780eb(0xfb)]||null,userID=argv['user']||'';let bbpath=_0x5780eb(0x16a),bbpath2='';const botfile='bot.js',configfile=_0x5780eb(0x1a8),settingsfile=_0x5780eb(0x1b3),securefile=_0x5780eb(0x16e);!fs[_0x5780eb(0x1e8)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5780eb(0x1ad)),configpath=userID?bbpath+_0x5780eb(0x1a5)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x5780eb(0x1be)](configpath);!fs[_0x5780eb(0x1e8)](configbackuppath)&&fs[_0x5780eb(0x1be)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5780eb(0x159)]({'bots':[]})[_0x5780eb(0x153)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5780eb(0x159)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5780eb(0x159)]({'secure':{},'blacklist':[]})[_0x5780eb(0x153)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x5780eb(0x207)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5780eb(0x21c))[_0x5780eb(0x214)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x5780eb(0x163)),app=express(),http=require('http')['createServer'](app);app[_0x5780eb(0x1e4)](express[_0x5780eb(0x195)](path[_0x5780eb(0xe4)](__dirname,bbpath2,'build2'))),app['use'](express[_0x5780eb(0x195)](path['join'](__dirname,bbpath2,'build'))),app['get']('/',function(_0x1e2db4,_0x1f0409){const _0xd68edc=_0x5780eb;_0x1f0409[_0xd68edc(0x16d)](path[_0xd68edc(0xe4)](__dirname,bbpath2,_0xd68edc(0x15d),_0xd68edc(0xe6)));}),app[_0x5780eb(0x12f)](_0x5780eb(0x218),function(_0x40a244,_0x2c284b){const _0x4967c8=_0x5780eb;_0x2c284b[_0x4967c8(0x16d)](path['join'](__dirname,bbpath2,_0x4967c8(0xe5),_0x4967c8(0xe6)));}),app[_0x5780eb(0x12f)]('/:bot/portfolio',(_0x371ea7,_0x137a59)=>{const _0x1283b9=_0x5780eb;_0x137a59[_0x1283b9(0x16d)](path[_0x1283b9(0xe4)](__dirname,bbpath2,_0x1283b9(0xe5),_0x1283b9(0xe6)));}),app[_0x5780eb(0x12f)]('/:bot/performance',(_0x2677d4,_0x5c46d9)=>{const _0x1351e1=_0x5780eb;_0x5c46d9[_0x1351e1(0x16d)](path[_0x1351e1(0xe4)](__dirname,bbpath2,_0x1351e1(0xe5),_0x1351e1(0xe6)));}),app[_0x5780eb(0x12f)](_0x5780eb(0x132),(_0x3a97c3,_0x19c251)=>{const _0x5073e2=_0x5780eb;_0x19c251['sendFile'](path[_0x5073e2(0xe4)](__dirname,bbpath2,'build',_0x5073e2(0xe6)));}),app[_0x5780eb(0x12f)](_0x5780eb(0xef),(_0xe923fe,_0xfd217c)=>{const _0x5bfecc=_0x5780eb;_0xfd217c[_0x5bfecc(0x16d)](path['join'](__dirname,bbpath2,_0x5bfecc(0xe5),_0x5bfecc(0xe6)));}),app['get'](_0x5780eb(0x210),(_0x58817c,_0x424448)=>{const _0x250392=_0x5780eb;_0x424448['sendFile'](path[_0x250392(0xe4)](__dirname,bbpath2,_0x250392(0xe5),'index.html'));}),app[_0x5780eb(0x12f)](_0x5780eb(0x1f2),(_0x37fd83,_0x13c432)=>{const _0x24253b=_0x5780eb;_0x13c432[_0x24253b(0x16d)](path['join'](__dirname,bbpath2,_0x24253b(0xe5),_0x24253b(0xe6)));});if(HOST)http[_0x5780eb(0x138)](PORT,HOST);else http['listen'](PORT);const io=require(_0x5780eb(0x13c))(http,{}),analytics=analyticsLib({'app':_0x5780eb(0x139),'plugins':[googleAnalytics({'trackingId':_0x5780eb(0x1d5)})]}),TelegramBot=require(_0x5780eb(0x137));let tgBot;if(settings[_0x5780eb(0x110)]&&settings[_0x5780eb(0x110)]!=''&&settings[_0x5780eb(0x1fd)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x26f4e9=_0x5780eb;console[_0x26f4e9(0x174)](''),console[_0x26f4e9(0x174)](_0x26f4e9(0x1f9)),logging(_0x26f4e9(0x190)+PORT),console[_0x26f4e9(0x174)]('-----------------------------------------------------------------------------------');if(config[_0x26f4e9(0x160)]!=0x0)config[_0x26f4e9(0x201)](_0x101b83=>{const _0x45cc61=_0x26f4e9;if(_0x101b83[_0x45cc61(0x1d8)]=='enabled'||_0x101b83[_0x45cc61(0x1d8)]==_0x45cc61(0x1b7))logging(_0x45cc61(0xe2)+_0x101b83[_0x45cc61(0x1c2)]+_0x45cc61(0x101)+_0x101b83[_0x45cc61(0x19b)]),startBot([_0x101b83[_0x45cc61(0x1c2)],userID],{'cwd':bbpath},function(_0x41fcb7){if(_0x41fcb7)logging(_0x41fcb7);});else(_0x101b83['status']==_0x45cc61(0x1fe)||_0x101b83['status']==_0x45cc61(0x169))&&logging(_0x45cc61(0x1c6)+_0x101b83[_0x45cc61(0x1c2)]+_0x45cc61(0x101)+_0x101b83[_0x45cc61(0x19b)]);});else!newBot&&console['log'](_0x26f4e9(0x1d3));if(newBot)addBot();console[_0x26f4e9(0x174)](_0x26f4e9(0x1f9)),console[_0x26f4e9(0x174)]('');}function startSocket(){const _0x25e443=_0x5780eb;io['on'](_0x25e443(0x175),_0x1a8e16=>{const _0xfebf8d=_0x25e443;let _0x3e3651,_0x976ca2,_0x108c42,_0x2240a5,_0x21b259;const _0xb8206b=_0x1a8e16[_0xfebf8d(0x217)][_0xfebf8d(0xeb)][_0xfebf8d(0x172)];_0x976ca2=_0xb8206b[_0xfebf8d(0x1b0)](/bot[0-9]{3}/);if(_0x976ca2)_0x108c42=_0x976ca2[0x0][_0xfebf8d(0x1b0)](/[0-9]{3}/);if(_0x108c42)_0x3e3651=_0x108c42[0x0];else _0x3e3651=_0xfebf8d(0xf8);const _0x4910=_0x1a8e16[_0xfebf8d(0x217)]['auth'][_0xfebf8d(0x192)];if(!_0x4910)_0x1a8e16[_0xfebf8d(0x1d9)](_0xfebf8d(0x1d8),{'publicKey':secure['publicKey']});else{_0x2240a5=timelyDecrypt(_0x4910,![]);if(!_0x2240a5)_0x1a8e16['emit'](_0xfebf8d(0x1d8),{'publicKey':secure[_0xfebf8d(0x1bf)]});else{_0x21b259=normalizeIP(_0x1a8e16[_0xfebf8d(0x14b)][_0xfebf8d(0x124)])[_0xfebf8d(0x17a)];if(!devices[_0x2240a5])devices[_0x2240a5]={'uuid':_0x2240a5,'access':{'token':null}};devices[_0x2240a5]['ip']=_0x21b259;const _0x2f69fa=addClient(_0x1a8e16['id'],_0x2240a5,_0x3e3651);setAccess(_0x2f69fa),_0x1a8e16['on'](_0xfebf8d(0x1f4),_0x823c0a=>{const _0x88455b=_0xfebf8d,_0x1b2023=timelyDecrypt(_0x823c0a[_0x88455b(0x142)]);if(_0x1b2023){_0x823c0a={'username':_0x823c0a[_0x88455b(0x1f7)],'password':_0x1b2023},devices[_0x2240a5]['access']=validateCredentials(_0x823c0a,_0x2240a5);if(devices[_0x2240a5][_0x88455b(0xf9)][_0x88455b(0x1f1)]==![]&&devices[_0x2240a5]['access'][_0x88455b(0x17b)]==_0x88455b(0xf7))_0x1a8e16['emit'](_0x88455b(0x1d8),{'access':devices[_0x2240a5]['access']}),loginAccess2FA(_0x2240a5,_0x21b259);else{if(devices[_0x2240a5][_0x88455b(0xf9)][_0x88455b(0x1f1)]==![]&&devices[_0x2240a5]['access'][_0x88455b(0x17b)]=='invalid\x20credentials')_0x1a8e16[_0x88455b(0x1d9)](_0x88455b(0x1d8),{'access':devices[_0x2240a5][_0x88455b(0xf9)]});else devices[_0x2240a5]['access'][_0x88455b(0x1f1)]&&devices[_0x2240a5]['access'][_0x88455b(0x17b)]==_0x88455b(0x1ca)&&(getClientsWithUuid(_0x2240a5)[_0x88455b(0x201)](_0x3dd2a7=>{setAccess(_0x3dd2a7);}),setTokenRefresh(_0x2240a5),setSessionTimeout(_0x88455b(0x1f4),_0x2240a5));}}else logging(_0x88455b(0x1c7));}),_0x1a8e16['on'](_0xfebf8d(0x10f),()=>{resetPassword();}),_0x1a8e16['on'](_0xfebf8d(0x1cd),_0xf9fc99=>{removeClient(_0x1a8e16['id']);});}}});}function initClient(_0x4b3d88){const _0x2b827b=_0x5780eb;if(_0x4b3d88!='botmanager'&&config[_0x2b827b(0x111)]!=''){if(pid[_0x4b3d88])pid[_0x4b3d88][_0x2b827b(0x1d0)]({'function':_0x2b827b(0x18d),'args':null});}}function getSocket(_0x101465){const _0x3a3b4b=_0x5780eb;return io[_0x3a3b4b(0x178)][_0x3a3b4b(0x178)][_0x3a3b4b(0x12f)](_0x101465);}function setAccess(_0x54e68b){const _0x22d7b0=_0x5780eb,_0x23ec47=getSocket(_0x54e68b['id']),_0x1a1a36=_0x54e68b[_0x22d7b0(0x1a9)],_0x2c6bcc=_0x54e68b[_0x22d7b0(0x1d7)];devices[_0x1a1a36][_0x22d7b0(0xf9)]=validateAccess(devices[_0x1a1a36][_0x22d7b0(0xf9)][_0x22d7b0(0x18c)],_0x1a1a36),_0x23ec47['join'](_0x1a1a36);if(devices[_0x1a1a36][_0x22d7b0(0xf9)]['allow']){_0x23ec47[_0x22d7b0(0xe4)](_0x2c6bcc);if(_0x2c6bcc=='botmanager')initializeSocketBotManager(_0x23ec47);else initializeSocketBot(_0x23ec47);initClient(_0x2c6bcc);}devices[_0x1a1a36][_0x22d7b0(0xf9)]['token']&&devices[_0x1a1a36][_0x22d7b0(0xf9)][_0x22d7b0(0x17b)]=='temporary\x20token\x20generated'&&setSessionTimeout('2FA',_0x1a1a36),devices[_0x1a1a36][_0x22d7b0(0xf9)]['token']&&devices[_0x1a1a36]['access'][_0x22d7b0(0x17b)]==_0x22d7b0(0x11f)&&setSessionTimeout('login',_0x1a1a36),_0x23ec47[_0x22d7b0(0x1d9)](_0x22d7b0(0x1d8),{'status':_0x54e68b['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1a1a36]['access'],'externalip':devices[_0x1a1a36]['ip'],'publicKey':secure['publicKey']}),devices[_0x1a1a36][_0x22d7b0(0xf9)][_0x22d7b0(0x1f1)]==![]&&devices[_0x1a1a36][_0x22d7b0(0xf9)][_0x22d7b0(0x17b)]=='2FA\x20required'&&temporaryAccess2FA(_0x1a1a36,devices[_0x1a1a36]['ip']);}function setSessionTimeout(_0x5236a2,_0x5c9893){const _0x1e3289=_0x5780eb;let _0x215142;if(_0x5236a2==_0x1e3289(0x1f4))_0x215142=loginExpiry*0x3c*0x3e8;else _0x215142=devices[_0x5c9893][_0x1e3289(0x206)][_0x1e3289(0x167)]*0x3c*0x3e8-(new Date()[_0x1e3289(0x117)]()-devices[_0x5c9893][_0x1e3289(0x206)][_0x1e3289(0x176)]);if(devices[_0x5c9893][_0x1e3289(0x116)])clearTimeout(devices[_0x5c9893][_0x1e3289(0x116)]);devices[_0x5c9893][_0x1e3289(0x116)]=setTimeout(()=>{const _0x5b00bc=_0x1e3289;if(devices[_0x5c9893][_0x5b00bc(0x212)])clearTimeout(devices[_0x5c9893][_0x5b00bc(0x212)]);removeSocketListeners(_0x5c9893),addBlacklist(_0x5c9893),devices[_0x5c9893][_0x5b00bc(0x206)]=null,devices[_0x5c9893][_0x5b00bc(0x1f5)]=null,devices[_0x5c9893][_0x5b00bc(0xf9)][_0x5b00bc(0x18c)]=null,devices[_0x5c9893][_0x5b00bc(0xf9)]=validateAccess(devices[_0x5c9893]['access'][_0x5b00bc(0x18c)],_0x5c9893),!(devices[_0x5c9893]['access'][_0x5b00bc(0x1f1)]&&devices[_0x5c9893][_0x5b00bc(0xf9)][_0x5b00bc(0x17b)]==_0x5b00bc(0x182))&&(_0x5236a2==_0x5b00bc(0x1f4)?io['to'](_0x5c9893)[_0x5b00bc(0x1d9)](_0x5b00bc(0x1d8),{'access':{'allow':![],'reason':_0x5b00bc(0x14a),'token':null}}):io['to'](_0x5c9893)[_0x5b00bc(0x1d9)]('status',{'access':{'allow':![],'reason':_0x5b00bc(0x151),'token':null}})),devices[_0x5c9893][_0x5b00bc(0xf9)]['token']=null;},_0x215142);}function setTokenRefresh(_0x4650f1){const _0x5af167=_0x5780eb;if(devices[_0x4650f1][_0x5af167(0x212)])clearTimeout(devices[_0x4650f1]['pidRefreshToken']);devices[_0x4650f1][_0x5af167(0x212)]=setTimeout(()=>{const _0x1d90d5=_0x5af167;getClientsWithUuid(_0x4650f1)[_0x1d90d5(0x160)]!=0x0?(devices[_0x4650f1][_0x1d90d5(0xf9)]=refreshToken(_0x4650f1),io['to'](_0x4650f1)[_0x1d90d5(0x1d9)](_0x1d90d5(0x1d8),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4650f1]['access'],'externalip':devices[_0x4650f1]['ip'],'publicKey':secure['publicKey']}),setTokenRefresh(_0x4650f1)):clearTimeout(devices[_0x4650f1][_0x1d90d5(0x212)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x521d6f){const _0x3ecf93=_0x5780eb,_0x326973=getClient(_0x521d6f['id'])[_0x3ecf93(0x1a9)];_0x521d6f[_0x3ecf93(0x1d9)](_0x3ecf93(0x10c),config),_0x521d6f['emit'](_0x3ecf93(0x107),cleanSettings()),_0x521d6f['on'](_0x3ecf93(0x13f),_0x419d3f=>{if(validateAccess(_0x419d3f,_0x326973)['allow'])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x521d6f['on'](_0x3ecf93(0xdd),(_0x412498,_0x1debc4)=>{const _0x4da60f=_0x3ecf93;if(validateAccess(_0x1debc4,_0x326973)[_0x4da60f(0x1f1)])toggleBot(_0x412498[_0x4da60f(0x1c2)],_0x412498[_0x4da60f(0x1d8)],_0x412498[_0x4da60f(0x1e3)]);else logging(_0x4da60f(0x14e));}),_0x521d6f['on'](_0x3ecf93(0x18b),(_0x26a07d,_0x1233da)=>{const _0x4e9e22=_0x3ecf93;if(validateAccess(_0x1233da,_0x326973)[_0x4e9e22(0x1f1)])deleteBot(_0x26a07d);else logging(_0x4e9e22(0x131));}),_0x521d6f['on'](_0x3ecf93(0xe3),(_0x3c001d,_0x1d07fc)=>{const _0x4b0d1d=_0x3ecf93;if(validateAccess(_0x1d07fc,_0x326973)[_0x4b0d1d(0x1f1)])storeSettings(_0x3c001d,!![]);else logging(_0x4b0d1d(0x1ac));}),_0x521d6f['on'](_0x3ecf93(0x213),(_0xa2a6b3,_0x3954ac)=>{if(validateAccess(_0x3954ac,_0x326973)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x521d6f['on']('logout',_0x1b45ae=>{const _0x5b04f1=_0x3ecf93;if(validateAccess(_0x1b45ae,_0x326973)[_0x5b04f1(0x1f1)]){if(devices[_0x326973][_0x5b04f1(0x212)])clearTimeout(devices[_0x326973][_0x5b04f1(0x212)]);if(devices[_0x326973][_0x5b04f1(0x116)])clearTimeout(devices[_0x326973][_0x5b04f1(0x116)]);removeSocketListeners(getClient(_0x521d6f['id'])['uuid']),addBlacklist(_0x326973),devices[_0x326973][_0x5b04f1(0x206)]=null,devices[_0x326973]['telegram2FaApproval']=null,devices[_0x326973]['access'][_0x5b04f1(0x18c)]=null,io['to'](getClient(_0x521d6f['id'])[_0x5b04f1(0x1a9)])[_0x5b04f1(0x1d9)](_0x5b04f1(0x1d8),{'access':{'allow':![],'reason':_0x5b04f1(0x1b4),'token':null}});}else logging(_0x5b04f1(0xfc));});}function initializeSocketBot(_0x432601){const _0x3d8c1a=_0x5780eb,_0x363a7f=getClient(_0x432601['id'])[_0x3d8c1a(0x1d7)],_0x36a9cc=getClient(_0x432601['id'])[_0x3d8c1a(0x1a9)];_0x432601['on'](_0x3d8c1a(0x200),(_0x403c1f,_0x4c6757)=>{const _0x36ec2b=_0x3d8c1a;if(validateAccess(_0x4c6757,_0x36a9cc)[_0x36ec2b(0x1f1)]){if(pid[_0x363a7f])pid[_0x363a7f]['send']({'function':_0x36ec2b(0x198),'args':_0x403c1f});}else logging(_0x36ec2b(0x1bb));}),_0x432601['on'](_0x3d8c1a(0x112),(_0x935422,_0x127a83)=>{const _0x345f10=_0x3d8c1a;if(validateAccess(_0x127a83,_0x36a9cc)[_0x345f10(0x1f1)]){if(pid[_0x363a7f])pid[_0x363a7f][_0x345f10(0x1d0)]({'function':_0x345f10(0x147),'args':_0x935422});}else logging(_0x345f10(0x211));}),_0x432601['on']('store-configuration',(_0x4c8ed6,_0x44739c)=>{const _0x41e32b=_0x3d8c1a;if(validateAccess(_0x44739c,_0x36a9cc)[_0x41e32b(0x1f1)]){if(pid[_0x363a7f])pid[_0x363a7f][_0x41e32b(0x1d0)]({'function':'storeConfiguration','args':_0x4c8ed6});}else logging(_0x41e32b(0x126));}),_0x432601['on'](_0x3d8c1a(0x189),(_0x5c51fe,_0x4aa8ef)=>{const _0x168c03=_0x3d8c1a;if(validateAccess(_0x4aa8ef,_0x36a9cc)['allow']){if(pid[_0x363a7f])pid[_0x363a7f][_0x168c03(0x1d0)]({'function':'storeHeadless','args':_0x5c51fe});}else logging(_0x168c03(0xec));}),_0x432601['on'](_0x3d8c1a(0x20f),_0x50be1e=>{if(validateAccess(_0x50be1e,_0x36a9cc)['allow']){if(pid[_0x363a7f])pid[_0x363a7f]['send']({'function':'getStartingBalances','args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x432601['on'](_0x3d8c1a(0x154),(_0x585527,_0x3c85e3)=>{const _0x335eed=_0x3d8c1a;if(validateAccess(_0x3c85e3,_0x36a9cc)[_0x335eed(0x1f1)]){if(pid[_0x363a7f])pid[_0x363a7f]['send']({'function':_0x335eed(0xdb),'args':_0x585527});}else logging(_0x335eed(0x10e));}),_0x432601['on'](_0x3d8c1a(0x102),_0x3f9517=>{const _0x5c1c51=_0x3d8c1a;if(validateAccess(_0x3f9517,_0x36a9cc)[_0x5c1c51(0x1f1)]){if(pid[_0x363a7f])pid[_0x363a7f]['send']({'function':'cancelLoading','args':null});}else logging(_0x5c1c51(0x191));}),_0x432601['on']('logout',_0x409e0e=>{const _0x34301a=_0x3d8c1a;if(validateAccess(_0x409e0e,_0x36a9cc)[_0x34301a(0x1f1)]){if(devices[_0x36a9cc][_0x34301a(0x212)])clearTimeout(devices[_0x36a9cc][_0x34301a(0x212)]);if(devices[_0x36a9cc]['pidExpireLogin'])clearTimeout(devices[_0x36a9cc][_0x34301a(0x116)]);removeSocketListeners(getClient(_0x432601['id'])[_0x34301a(0x1a9)]),addBlacklist(_0x36a9cc),devices[_0x36a9cc]['telegramIpApproval']=null,devices[_0x36a9cc][_0x34301a(0x1f5)]=null,devices[_0x36a9cc][_0x34301a(0xf9)][_0x34301a(0x18c)]=null,io['to'](getClient(_0x432601['id'])[_0x34301a(0x1a9)])[_0x34301a(0x1d9)]('status',{'access':{'allow':![],'reason':_0x34301a(0x1b4),'token':null}});}else logging(_0x34301a(0xfc));});}function removeSocketListeners(_0x1e99da){const _0x52b877=_0x5780eb;getClientsWithUuid(_0x1e99da)[_0x52b877(0x201)](_0x1ba8fc=>{getSocket(_0x1ba8fc['id'])['removeAllListeners']();});}function _0x3593(){const _0x14a76c=['new-disabled','bb/','HTML','generateKeyPairAsync','sendFile','bb-secure.json','readdirSync','sendMessage','stopped','referer','1131777ZasIoJ','log','connection','timestamp','fork','sockets','includes','store','reason','Password\x20has\x20been\x20reset\x20to:\x20','-results.json','chat','stopPolling','telegramChatId','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','login\x20not\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','30\x20min','show','Bot\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','Notifications\x20disabled\x0a','store-headless','bbUsername','delete-bot','token','initclient','20196uOiEoV','exp','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','encryptedUuid','reject','catch','static','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','padStart','emitHistory','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','notification','botname','loginRequired','No\x20authentication\x20token','polling_error','@analytics/google-analytics','constructor','hashSync','5\x20min','Notifications\x20enabled','yes','config/','login\x20required','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bb-config.json','uuid','Login\x20accepted','compareSync','Unauthorized\x20attempt\x20to\x20update\x20settings','clients','temporary\x20token\x20generated','set','match','default','running','bb-settings.json','logged\x20out','User\x20has\x20been\x20validated','getHours','new','lowdb','Notifications\x20enabled\x0a','restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20logs','<b>Telegram\x20bot\x20status:</b>\x0a','assign','mkdirSync','publicKey','settings.','4wiQQEa','botID','analytics','args','2FA\x20login\x20rejected','idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20login\x20attempt\x20(timeout)','19048sjQSka','unlinkSync','login\x20token\x20generated','All','test','disconnect','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','decrypt','send','parse','secure','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','/restart\x20-\x20restart\x20bot(s)\x0a','UA-192771731-1','jsonwebtoken','bot','status','emit','Balance\x20Bot\x20Server','argv','3000','1000','-events.json','ipv6','Token\x20blacklisted','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','removeListener','live','use','blacklist','Notifications\x20types:\x20','Invalid\x20username\x20or\x20IP\x20address','existsSync','whitelistEnabled','Invalid\x20authentication\x20token\x20(2)','apply','getMinutes','Ok,\x20will\x20send\x20alert\x20notifications\x20only','hex','33AMlcZZ','telegramEvents','allow','/:bot/support','inherit','login','telegram2FaApproval','<b>Balance\x20Bot\x20status:</b>\x0a','username','476hGWECG','-----------------------------------------------------------------------------------','port','yargs/yargs',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','telegramUsername','disabled','value','get-logs','forEach','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','entries','Invalid\x20authentication\x20token\x20(1)','getDate','telegramIpApproval','RSA-OAEP','isValid','f2aRequired','/off\x20-\x20stop\x20bot(s)\x0a','kill','https://hodlerhacks.com','timeshift','15\x20min','get-starting-balances','/:bot/configuration','Unauthorized\x20attempt\x20to\x20get\x20portfolio','pidRefreshToken','update-bb','version','710442kLQMim','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','handshake','/:bot','lowdb/adapters/FileSync','isIPv4MappedAddress','toString','version.json','211290esbYeY','placeOrder','</b>\x20?','update-bot','enabled','::ffff:127.0.0.1','find','split','starting\x20bot\x20|\x20Bot\x20','store-settings','join','build','index.html','\x20>\x20','error','temporaryAccessAllowed','getUTCHours','headers','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','1343780auyoyJ','************','/:bot/history','2FA\x20required','event','push','/disable\x20-\x20disable\x20notifications\x0a','1863dtOrjA','getSeconds','\x20only\x0a','2FA\x20login\x20required','botmanager','access','add','host','Unauthorized\x20attempt\x20to\x20log\x20out','SIGINT','telegramEnabled','Login\x20rejected','randomFillSync','\x20|\x20','cancel-loading','type','search','5960410ujYnzN','orders','settings','callback_query','Invalid\x20Telegram\x20token','Orders','/status\x20-\x20show\x20bot(s)\x20status\x0a','bots','hybrid-crypto-js','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','reset-password','telegramToken','apiKey','get-portfolio','getFullYear','remove','sign','pidExpireLogin','getTime','cloneDeep','getMonth','onText','temporary\x20access\x20rejected','404\x20Not\x20Found','clientip','data','2FA\x20login\x20token\x20generated','success','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Crypt','Invalid\x20IP\x20address','remoteAddress','message','Unauthorized\x20attempt\x20to\x20store\x20configuration','All\x20bots','starting\x20new\x20bot\x20|\x20Bot\x20','answerCallbackQuery','bot-','telegram','accept','from','function','get','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Unauthorized\x20attempt\x20to\x20delete\x20bot','/:bot/coins','error\x20while\x20deleting\x20config\x20files:\x20','privateKey','hasOwnProperty','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','node-telegram-bot-api','listen','Balance\x20Bot','started','Bot\x20Mgr\x20>\x20','socket.io','Access\x20enabled\x20for\x20','\x20/\x20','add-bot','child_process','kind','password','page','reload','secret','sortBy','getPortfolio','No\x20bots\x20running\x20right\x20now','alerts','access\x20timeout','conn','invalid\x20credentials','Alerts','Unauthorized\x20attempt\x20to\x20update\x20bot','env','deleted\x20Bot\x20','temporary\x20access\x20timeout','name','write','place-order','bbPassword','Password\x20reset\x20rejected','all','then','defaults','filter','randomBytes','/on\x20-\x20start\x20bot(s)\x0a','build2','exit','whitelist','length','verify','copyFileSync','express','once','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20order\x20notifications\x20only','expiry','stop'];_0x3593=function(){return _0x14a76c;};return _0x3593();}function cleanSettings(){const _0x41449e=_0x5780eb;let _0x33458d=settings;return settings[_0x41449e(0x110)]&&settings[_0x41449e(0x110)]!=''&&(_0x33458d={..._0x33458d,'telegramToken':'************'}),settings[_0x41449e(0x155)]&&settings['bbPassword']!=''&&(_0x33458d={..._0x33458d,'bbPassword':_0x41449e(0xee)}),_0x33458d;}function updateBB(){const _0x16f693=_0x5780eb;installingUpdate=!![],config[_0x16f693(0x201)](_0x241f68=>{restartBot(_0x241f68['botID']);}),process['send']({'update':!![]},_0x1b4922=>{});}function startBot(_0x28e3b4,_0x1c87a,_0x7b1bac){const _0x2bc633=_0x5780eb;let _0x25e31d=![];const _0xa1ac58=_0x28e3b4[0x0];_0x1c87a={..._0x1c87a,'stdio':[_0x2bc633(0x1f3),_0x2bc633(0x1f3),_0x2bc633(0x1f3),'ipc']},pid[_0xa1ac58]=childProcess[_0x2bc633(0x177)](botfile,_0x28e3b4,_0x1c87a),pid[_0xa1ac58]['on'](_0x2bc633(0x125),_0x57078d=>{const _0x21dae5=_0x2bc633;switch(Object['keys'](_0x57078d)[0x0]){case _0x21dae5(0x19b):updateBotName(_0xa1ac58,_0x57078d[_0x21dae5(0x19b)]);break;case _0x21dae5(0x1d8):updateStatus(_0xa1ac58,_0x57078d[_0x21dae5(0x1d8)]);break;case _0x21dae5(0x1e3):updateLive(_0xa1ac58,_0x57078d[_0x21dae5(0x1e3)]);break;case'started':updateLive(_0xa1ac58,_0x57078d[_0x21dae5(0x13a)]),io['to'](_0xa1ac58)[_0x21dae5(0x1d9)](_0x21dae5(0x1d8),{'access':{'allow':![],'reason':_0x21dae5(0x144),'token':null}});break;case'stop':_0x57078d[_0x21dae5(0x168)]=='restart'&&restartBot(_0xa1ac58);_0x57078d[_0x21dae5(0x168)]=='kill'&&toggleBot(_0xa1ac58,_0x21dae5(0x1fe),'stopped');break;case _0x21dae5(0x12b):sendTelegram(_0xa1ac58,_0x57078d['telegram']);break;case _0x21dae5(0x12e):io['to'](_0xa1ac58)[_0x21dae5(0x1d9)](_0x57078d[_0x21dae5(0x12e)],_0x57078d[_0x21dae5(0x1c4)]);break;}}),pid[_0xa1ac58]['on']('error',function(_0x3ff46b){if(_0x25e31d)return;_0x25e31d=!![],_0x7b1bac(_0x3ff46b);}),pid[_0xa1ac58]['on'](_0x2bc633(0x15e),function(_0x5e54f3){const _0x77fa8c=_0x2bc633;if(installingUpdate)return;if(_0x25e31d)return;_0x25e31d=!![],_0x7b1bac(null);const _0x5b2d3e=dbConfig[_0x77fa8c(0x12f)](_0x77fa8c(0x10c))[_0x77fa8c(0xe0)]({'botID':_0xa1ac58})['value']();_0x5b2d3e&&(_0x5b2d3e[_0x77fa8c(0x1d8)]==_0x77fa8c(0xde)||_0x5b2d3e[_0x77fa8c(0x1d8)]==_0x77fa8c(0x1b7))&&(updateLive(_0xa1ac58,'stopped'),logging(_0x77fa8c(0x1ba)+_0xa1ac58),startBot([_0xa1ac58,userID],{'cwd':bbpath},function(_0x1fe704){if(_0x1fe704)logging(_0x1fe704);}));});}function stopBot(_0x2b90d4){const _0x1396d6=_0x5780eb;getClientsWithBotID(_0x2b90d4)[_0x1396d6(0x201)](_0xe020f8=>{const _0x53c16b=_0x1396d6;getSocket(_0xe020f8['id'])[_0x53c16b(0x1cd)](!![]),removeClient(_0xe020f8['id']);});if(pid[_0x2b90d4])pid[_0x2b90d4][_0x1396d6(0x20b)]();}function restartBot(_0x3b27d6){const _0x473153=_0x5780eb;if(pid[_0x3b27d6])pid[_0x3b27d6][_0x473153(0x20b)]();}function addBot(){const _0x55978a=_0x5780eb;let _0x143f1a;for(let _0x10ff5a=0x1;_0x10ff5a<0x3e9;_0x10ff5a++){_0x143f1a=_0x10ff5a[_0x55978a(0x21b)]()['padStart'](0x3,'0');let _0x1a8677=config['find'](_0x3c23ce=>_0x3c23ce[_0x55978a(0x1c2)]==_0x143f1a);if(!_0x1a8677)break;}if(_0x143f1a===_0x55978a(0x1dd)){logging(_0x55978a(0x181));return;}logging(_0x55978a(0x128)+_0x143f1a),dbConfig[_0x55978a(0x12f)]('bots')[_0x55978a(0xf2)]({'botID':_0x143f1a,'botname':_0x55978a(0x186)+_0x143f1a,'status':_0x55978a(0x1b7),'live':''})['write'](),startBot([_0x143f1a,userID],{'cwd':bbpath},function(_0x4cfbfe){if(_0x4cfbfe)logging(_0x4cfbfe);}),config=getConfiguration(),io['to'](_0x55978a(0xf8))[_0x55978a(0x1d9)](_0x55978a(0x10c),config);}function deleteBot(_0x36c79d){const _0x42ff88=_0x5780eb;getClientsWithBotID(_0x36c79d)[_0x42ff88(0x201)](_0x545297=>{const _0x35569d=_0x42ff88;getSocket(_0x545297['id'])[_0x35569d(0x1cd)](!![]),removeClient(_0x545297['id']);}),dbConfig[_0x42ff88(0x12f)](_0x42ff88(0x10c))[_0x42ff88(0x114)]({'botID':_0x36c79d})[_0x42ff88(0x153)](),logging(_0x42ff88(0x150)+_0x36c79d),stopBot(_0x36c79d);try{fs[_0x42ff88(0x1c9)](path[_0x42ff88(0xe4)](configpath,_0x42ff88(0x12a)+_0x36c79d+'-config.json')),fs[_0x42ff88(0x1c9)](path[_0x42ff88(0xe4)](configpath,_0x42ff88(0x12a)+_0x36c79d+_0x42ff88(0x1de))),fs['unlinkSync'](path[_0x42ff88(0xe4)](configpath,_0x42ff88(0x12a)+_0x36c79d+'-performance.json')),fs[_0x42ff88(0x1c9)](path['join'](configpath,_0x42ff88(0x12a)+_0x36c79d+_0x42ff88(0x17d)));}catch(_0x58dbc0){if(_0x58dbc0)logging(_0x42ff88(0x133),_0x58dbc0);}config=getConfiguration(),io['to'](_0x42ff88(0xf8))[_0x42ff88(0x1d9)](_0x42ff88(0x10c),config);}function toggleBot(_0x4cba39,_0x2b5ed3,_0x520351){const _0x3d7fc8=_0x5780eb;dbConfig[_0x3d7fc8(0x12f)](_0x3d7fc8(0x10c))[_0x3d7fc8(0xe0)]({'botID':_0x4cba39})[_0x3d7fc8(0x1bd)]({'status':_0x2b5ed3})['assign']({'live':_0x520351})[_0x3d7fc8(0x153)]();if(_0x2b5ed3==_0x3d7fc8(0xde)||_0x2b5ed3=='new')logging('enabled\x20Bot\x20'+_0x4cba39),startBot([_0x4cba39,userID],{'cwd':bbpath},function(_0x8a2167){if(_0x8a2167)logging(_0x8a2167);});else(_0x2b5ed3==_0x3d7fc8(0x1fe)||_0x2b5ed3=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x4cba39),stopBot(_0x4cba39));config=getConfiguration(),io['to']('botmanager')[_0x3d7fc8(0x1d9)]('bots',config);}function toggleStatus(_0x50b889){const _0x1a64d6=_0x5780eb;let _0x25cf8d=dbConfig['get'](_0x1a64d6(0x10c))[_0x1a64d6(0xe0)]({'botID':_0x50b889})[_0x1a64d6(0x1ff)](),_0x504ceb;if(_0x25cf8d[_0x1a64d6(0x1d8)]==='enabled')_0x504ceb='disabled';else{if(_0x25cf8d['status']===_0x1a64d6(0x1b7))_0x504ceb=_0x1a64d6(0x169);else{if(_0x25cf8d[_0x1a64d6(0x1d8)]===_0x1a64d6(0x169))_0x504ceb=_0x1a64d6(0x1b7);else{if(_0x25cf8d['status']===_0x1a64d6(0x1fe))_0x504ceb=_0x1a64d6(0xde);}}}return _0x504ceb;}function updateStatus(_0x8af0f4,_0xc98bc5){const _0x363364=_0x5780eb;dbConfig['get'](_0x363364(0x10c))[_0x363364(0xe0)]({'botID':_0x8af0f4})[_0x363364(0x1bd)]({'status':_0xc98bc5})[_0x363364(0x153)](),config=getConfiguration(),io['to'](_0x363364(0xf8))[_0x363364(0x1d9)]('bots',config);}function updateLive(_0x2ea8f9,_0x3e2e21){const _0x31dd72=_0x5780eb;dbConfig[_0x31dd72(0x12f)](_0x31dd72(0x10c))[_0x31dd72(0xe0)]({'botID':_0x2ea8f9})[_0x31dd72(0x1bd)]({'live':_0x3e2e21})[_0x31dd72(0x153)](),config=getConfiguration(),io['to'](_0x31dd72(0xf8))[_0x31dd72(0x1d9)](_0x31dd72(0x10c),config);}function updateBotName(_0x829324,_0x2e4000){const _0xed2dd3=_0x5780eb;dbConfig[_0xed2dd3(0x12f)](_0xed2dd3(0x10c))[_0xed2dd3(0xe0)]({'botID':_0x829324})['assign']({'botname':_0x2e4000})[_0xed2dd3(0x153)](),config=getConfiguration(),io['to'](_0xed2dd3(0xf8))[_0xed2dd3(0x1d9)](_0xed2dd3(0x10c),config);}function telegramError(_0x59985a){const _0xf784a3=_0x5780eb;console[_0xf784a3(0x174)](getTimeStamp()+_0xf784a3(0x1fc));}function validateTelegram(_0x1cf0ee){const _0x528787=_0x5780eb;if(_0x1cf0ee[_0x528787(0x12d)][_0x528787(0x1f7)]!=settings['telegramUsername']&&'@'+_0x1cf0ee['from'][_0x528787(0x1f7)]!=settings[_0x528787(0x1fd)])return tgBot['sendMessage'](_0x1cf0ee[_0x528787(0x17e)]['id'],_0x528787(0x1ce),{'parse_mode':'HTML'})[_0x528787(0x194)](_0x28e0bf=>{telegramError(_0x28e0bf);}),![];return!![];}async function initTelegram(){const _0x3f8031=_0x5780eb;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3f8031(0x110)],{'polling':!![]});let _0x1189fc=_0x3f8031(0x183);_0x1189fc+='\x0a',_0x1189fc+='/enable\x20-\x20enable\x20notifications\x0a',_0x1189fc+=_0x3f8031(0xf3),_0x1189fc+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x1189fc+=_0x3f8031(0x1d4),_0x1189fc+=_0x3f8031(0x15c),_0x1189fc+=_0x3f8031(0x20a),_0x1189fc+=_0x3f8031(0x10b),_0x1189fc+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x26bcf3='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x26bcf3+='\x0a',_0x26bcf3+=_0x1189fc,tgBot['onText'](/\/start/,_0x5b8c04=>{const _0x19d348=_0x3f8031;if(!validateTelegram(_0x5b8c04))return;if(settings[_0x19d348(0x180)]!=_0x5b8c04[_0x19d348(0x17e)]['id'])updateSetting(_0x19d348(0x180),_0x5b8c04[_0x19d348(0x17e)]['id']);updateSetting(_0x19d348(0xfe),!![]),tgBot[_0x19d348(0x170)](_0x5b8c04[_0x19d348(0x17e)]['id'],_0x26bcf3)[_0x19d348(0x194)](_0x20e858=>{telegramError(_0x20e858);});}),tgBot['onText'](/\/enable/,_0x44a251=>{const _0x200efa=_0x3f8031;if(!validateTelegram(_0x44a251))return;if(settings['telegramChatId']!=_0x44a251['chat']['id'])updateSetting(_0x200efa(0x180),_0x44a251[_0x200efa(0x17e)]['id']);updateSetting(_0x200efa(0xfe),!![]),tgBot[_0x200efa(0x170)](_0x44a251['chat']['id'],_0x200efa(0x1a3))[_0x200efa(0x194)](_0x337181=>{telegramError(_0x337181);});}),tgBot[_0x3f8031(0x11a)](/\/config/,async _0xb779a5=>{const _0xfbbe1b=_0x3f8031;if(!validateTelegram(_0xb779a5))return;tgBot[_0xfbbe1b(0x1e2)](_0xfbbe1b(0x108)),tgBot[_0xfbbe1b(0x170)](_0xb779a5[_0xfbbe1b(0x17e)]['id'],_0xfbbe1b(0x199),{'reply_markup':{'inline_keyboard':[[{'text':_0xfbbe1b(0x10a),'callback_data':_0xfbbe1b(0x106)},{'text':_0xfbbe1b(0x14d),'callback_data':'alerts'},{'text':_0xfbbe1b(0x1cb),'callback_data':_0xfbbe1b(0x157)}]]}})['catch'](_0x87cb35=>{telegramError(_0x87cb35);}),tgBot['on']('callback_query',async _0x1568fc=>{const _0x21d7aa=_0xfbbe1b,_0x569b83=_0x1568fc['data'],_0x3e4437=_0x1568fc[_0x21d7aa(0x125)];tgBot['answerCallbackQuery'](_0x1568fc['id'])[_0x21d7aa(0x158)](async()=>{const _0x55dc58=_0x21d7aa;_0x569b83==_0x55dc58(0x106)&&(updateSetting(_0x55dc58(0x1f0),_0x55dc58(0x106)),updateSetting(_0x55dc58(0xfe),!![]),await tgBot[_0x55dc58(0x170)](_0x3e4437[_0x55dc58(0x17e)]['id'],_0x55dc58(0x166))[_0x55dc58(0x194)](_0x3b41f4=>{telegramError(_0x3b41f4);}));_0x569b83==_0x55dc58(0x149)&&(updateSetting('telegramEvents',_0x55dc58(0x149)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x3e4437[_0x55dc58(0x17e)]['id'],_0x55dc58(0x1ed))[_0x55dc58(0x194)](_0x408072=>{telegramError(_0x408072);}));_0x569b83==_0x55dc58(0x157)&&(updateSetting(_0x55dc58(0x1f0),_0x55dc58(0x157)),updateSetting(_0x55dc58(0xfe),!![]),await tgBot['sendMessage'](_0x3e4437[_0x55dc58(0x17e)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x55dc58(0x194)](_0x281d9d=>{telegramError(_0x281d9d);}));if(!settings[_0x55dc58(0x180)])tgBot[_0x55dc58(0x170)](_0x3e4437[_0x55dc58(0x17e)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x55dc58(0x194)](_0x4c330d=>{telegramError(_0x4c330d);});}),tgBot[_0x21d7aa(0x1e2)](_0x21d7aa(0x108));});}),tgBot[_0x3f8031(0x11a)](/\/status/,_0x388a90=>{const _0x39c8f5=_0x3f8031;if(!validateTelegram(_0x388a90))return;let _0x43c392=_0x39c8f5(0x1f6);config['forEach'](_0x1b38e3=>{const _0x572180=_0x39c8f5;_0x43c392+=_0x572180(0x186)+_0x1b38e3['botID']+_0x572180(0x101)+_0x1b38e3[_0x572180(0x19b)]+':\x20'+_0x1b38e3[_0x572180(0x1d8)]+_0x572180(0x13e)+_0x1b38e3['live']+'\x0a';}),_0x43c392+='\x0a',_0x43c392+=_0x39c8f5(0x1bc),_0x43c392+=!settings[_0x39c8f5(0xfe)]?_0x39c8f5(0x188):_0x39c8f5(0x1b9),_0x43c392+=settings[_0x39c8f5(0xfe)]?settings['telegramEvents']==_0x39c8f5(0x157)?_0x39c8f5(0x196):_0x39c8f5(0x1e6)+settings[_0x39c8f5(0x1f0)]+_0x39c8f5(0xf6):'',tgBot[_0x39c8f5(0x170)](_0x388a90[_0x39c8f5(0x17e)]['id'],_0x43c392,{'parse_mode':_0x39c8f5(0x16b)})[_0x39c8f5(0x194)](_0x345346=>{telegramError(_0x345346);});}),tgBot['onText'](/\/restart/,_0x2ba58b=>{const _0x1de118=_0x3f8031;if(!validateTelegram(_0x2ba58b))return;tgBot[_0x1de118(0x1e2)](_0x1de118(0x108));const _0x5c8b30=getEnabledBots();if(_0x5c8b30[_0x1de118(0x160)]==0x0)tgBot[_0x1de118(0x170)](_0x2ba58b['chat']['id'],_0x1de118(0x148))[_0x1de118(0x194)](_0x1c4229=>{telegramError(_0x1c4229);});else{if(_0x5c8b30[_0x1de118(0x160)]>0x1)_0x5c8b30[_0x1de118(0xf2)]({'botID':_0x1de118(0x157)});let _0xcda798=[],_0x5e5759=[];const _0x1d1f42=_0x5c8b30['length']%0x4==0x0||_0x5c8b30['length']%0x4==0x3||_0x5c8b30[_0x1de118(0x160)]%0x3==0x1?0x4:0x3;let _0x5f1577=0x0;_0x5c8b30[_0x1de118(0x201)]((_0x29c04e,_0xc12c09)=>{const _0x3005dd=_0x1de118;if(_0xc12c09%_0x1d1f42==0x0)_0x5e5759=[];_0x5e5759[_0x3005dd(0xf2)]({'text':_0x29c04e[_0x3005dd(0x1c2)]==_0x3005dd(0x157)?_0x3005dd(0x127):_0x3005dd(0x186)+_0x29c04e[_0x3005dd(0x1c2)],'callback_data':_0x29c04e['botID']}),_0xc12c09%_0x1d1f42==0x0&&(_0xcda798[_0x5f1577]=_0x5e5759,_0x5f1577++);}),tgBot[_0x1de118(0x170)](_0x2ba58b[_0x1de118(0x17e)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0xcda798}})[_0x1de118(0x194)](_0x525750=>{telegramError(_0x525750);}),tgBot['on'](_0x1de118(0x108),async _0x4ea089=>{const _0x1c89c3=_0x1de118,_0x568da3=_0x4ea089[_0x1c89c3(0x11e)],_0x949c9f=_0x4ea089[_0x1c89c3(0x125)];tgBot[_0x1c89c3(0x129)](_0x4ea089['id'])[_0x1c89c3(0x158)](async()=>{const _0x565d79=_0x1c89c3;if(_0x568da3==_0x565d79(0x157)){if(settings[_0x565d79(0x1f0)]==_0x565d79(0x106))tgBot[_0x565d79(0x170)](_0x949c9f[_0x565d79(0x17e)]['id'],_0x565d79(0x136))['catch'](_0x123013=>{telegramError(_0x123013);});config[_0x565d79(0x201)](_0x8d2f22=>{const _0x167690=_0x565d79;restartBot(_0x8d2f22[_0x167690(0x1c2)]);});}else{if(settings[_0x565d79(0x1f0)]==_0x565d79(0x106))tgBot[_0x565d79(0x170)](_0x949c9f[_0x565d79(0x17e)]['id'],_0x565d79(0x202)+_0x568da3)[_0x565d79(0x194)](_0x20c7d2=>{telegramError(_0x20c7d2);});restartBot(_0x568da3);}}),tgBot['removeListener'](_0x1c89c3(0x108));});}}),tgBot['onText'](/\/on/,_0x42f6f1=>{const _0x3c107d=_0x3f8031;if(!validateTelegram(_0x42f6f1))return;tgBot['removeListener'](_0x3c107d(0x108));const _0x2151f0=getDisabledBots();if(_0x2151f0['length']==0x0)tgBot[_0x3c107d(0x170)](_0x42f6f1[_0x3c107d(0x17e)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x3c107d(0x194)](_0x26e1f4=>{telegramError(_0x26e1f4);});else{if(_0x2151f0[_0x3c107d(0x160)]>0x1)_0x2151f0[_0x3c107d(0xf2)]({'botID':_0x3c107d(0x157)});let _0x25127b=[],_0x2033a8=[];const _0x418453=_0x2151f0[_0x3c107d(0x160)]%0x4==0x0||_0x2151f0[_0x3c107d(0x160)]%0x4==0x3||_0x2151f0[_0x3c107d(0x160)]%0x3==0x1?0x4:0x3;let _0x46d80c=0x0;_0x2151f0[_0x3c107d(0x201)]((_0x3ee05a,_0x48f2b9)=>{const _0x3ae9ed=_0x3c107d;if(_0x48f2b9%_0x418453==0x0)_0x2033a8=[];_0x2033a8[_0x3ae9ed(0xf2)]({'text':_0x3ee05a['botID']==_0x3ae9ed(0x157)?'All\x20bots':_0x3ae9ed(0x186)+_0x3ee05a[_0x3ae9ed(0x1c2)],'callback_data':_0x3ee05a[_0x3ae9ed(0x1c2)]}),_0x48f2b9%_0x418453==0x0&&(_0x25127b[_0x46d80c]=_0x2033a8,_0x46d80c++);}),tgBot[_0x3c107d(0x170)](_0x42f6f1[_0x3c107d(0x17e)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x25127b}})[_0x3c107d(0x194)](_0x5e871e=>{telegramError(_0x5e871e);}),tgBot['on'](_0x3c107d(0x108),async _0x583486=>{const _0x2ed5a8=_0x3c107d,_0x571f95=_0x583486[_0x2ed5a8(0x11e)],_0x25aeba=_0x583486[_0x2ed5a8(0x125)];tgBot['answerCallbackQuery'](_0x583486['id'])[_0x2ed5a8(0x158)](async()=>{const _0xf4e74=_0x2ed5a8;if(_0x571f95==_0xf4e74(0x157)){if(settings['telegramEvents']==_0xf4e74(0x106))tgBot[_0xf4e74(0x170)](_0x25aeba[_0xf4e74(0x17e)]['id'],_0xf4e74(0x121))['catch'](_0x26485a=>{telegramError(_0x26485a);});_0x2151f0[_0xf4e74(0x201)](_0x200129=>{const _0x163455=_0xf4e74;if(_0x200129[_0x163455(0x1c2)]!=_0x163455(0x157))toggleBot(_0x200129[_0x163455(0x1c2)],toggleStatus(_0x200129[_0x163455(0x1c2)]),_0x163455(0x171));});}else{if(settings[_0xf4e74(0x1f0)]==_0xf4e74(0x106))tgBot[_0xf4e74(0x170)](_0x25aeba['chat']['id'],_0xf4e74(0x216)+_0x571f95)[_0xf4e74(0x194)](_0x13b7c9=>{telegramError(_0x13b7c9);});toggleBot(_0x571f95,toggleStatus(_0x571f95),_0xf4e74(0x171));}}),tgBot[_0x2ed5a8(0x1e2)](_0x2ed5a8(0x108));});}}),tgBot[_0x3f8031(0x11a)](/\/off/,_0x5bef80=>{const _0x5173b8=_0x3f8031;if(!validateTelegram(_0x5bef80))return;tgBot[_0x5173b8(0x1e2)](_0x5173b8(0x108));const _0x2daeb1=getEnabledBots();if(_0x2daeb1[_0x5173b8(0x160)]==0x0)tgBot['sendMessage'](_0x5bef80[_0x5173b8(0x17e)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5173b8(0x194)](_0x57f5d8=>{telegramError(_0x57f5d8);});else{if(_0x2daeb1[_0x5173b8(0x160)]>0x1)_0x2daeb1[_0x5173b8(0xf2)]({'botID':_0x5173b8(0x157)});let _0x5885e3=[],_0x46ff2b=[];const _0x3ca459=_0x2daeb1['length']%0x4==0x0||_0x2daeb1[_0x5173b8(0x160)]%0x4==0x3||_0x2daeb1['length']%0x3==0x1?0x4:0x3;let _0x32eb2c=0x0;_0x2daeb1[_0x5173b8(0x201)]((_0x46088c,_0x3eb38b)=>{const _0xec4ccc=_0x5173b8;if(_0x3eb38b%_0x3ca459==0x0)_0x46ff2b=[];_0x46ff2b['push']({'text':_0x46088c[_0xec4ccc(0x1c2)]==_0xec4ccc(0x157)?'All\x20bots':'Bot\x20'+_0x46088c[_0xec4ccc(0x1c2)],'callback_data':_0x46088c[_0xec4ccc(0x1c2)]}),_0x3eb38b%_0x3ca459==0x0&&(_0x5885e3[_0x32eb2c]=_0x46ff2b,_0x32eb2c++);}),tgBot[_0x5173b8(0x170)](_0x5bef80['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5885e3}})[_0x5173b8(0x194)](_0x53baea=>{telegramError(_0x53baea);}),tgBot['on'](_0x5173b8(0x108),async _0x400ad3=>{const _0x8bd2f4=_0x5173b8,_0x340ad0=_0x400ad3[_0x8bd2f4(0x11e)],_0x261aef=_0x400ad3[_0x8bd2f4(0x125)];tgBot[_0x8bd2f4(0x129)](_0x400ad3['id'])['then'](async()=>{const _0x7dc680=_0x8bd2f4;if(_0x340ad0==_0x7dc680(0x157)){if(settings[_0x7dc680(0x1f0)]==_0x7dc680(0x106))tgBot['sendMessage'](_0x261aef[_0x7dc680(0x17e)]['id'],_0x7dc680(0x1e1))[_0x7dc680(0x194)](_0x5858d5=>{telegramError(_0x5858d5);});_0x2daeb1[_0x7dc680(0x201)](_0x293358=>{const _0x1763cf=_0x7dc680;if(_0x293358['botID']!=_0x1763cf(0x157))toggleBot(_0x293358[_0x1763cf(0x1c2)],toggleStatus(_0x293358['botID']),'stopped');});}else{if(settings[_0x7dc680(0x1f0)]=='orders')tgBot[_0x7dc680(0x170)](_0x261aef[_0x7dc680(0x17e)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x340ad0)[_0x7dc680(0x194)](_0x56fc2d=>{telegramError(_0x56fc2d);});toggleBot(_0x340ad0,toggleStatus(_0x340ad0),_0x7dc680(0x171));}}),tgBot[_0x8bd2f4(0x1e2)](_0x8bd2f4(0x108));});}}),tgBot[_0x3f8031(0x11a)](/\/disable/,_0x45b010=>{const _0x5777d1=_0x3f8031;if(!validateTelegram(_0x45b010))return;tgBot['sendMessage'](_0x45b010['chat']['id'],'Notifications\x20disabled')[_0x5777d1(0x194)](_0x17b555=>{telegramError(_0x17b555);}),updateSetting(_0x5777d1(0xfe),![]);}),tgBot['onText'](/\/help/,_0x3f769a=>{const _0x2feb78=_0x3f8031;if(!validateTelegram(_0x3f769a))return;tgBot[_0x2feb78(0x170)](_0x3f769a[_0x2feb78(0x17e)]['id'],_0x1189fc)[_0x2feb78(0x194)](_0x131638=>{telegramError(_0x131638);});}),tgBot['on'](_0x3f8031(0x19e),_0x52311f=>{const _0x2b2071=_0x3f8031;_0x52311f[_0x2b2071(0x21b)]()['includes'](_0x2b2071(0x11c))&&(logging(_0x2b2071(0x109)),tgBot[_0x2b2071(0x17f)](),tgBot=null,io['to']('botmanager')[_0x2b2071(0x1d9)](_0x2b2071(0x19a),'Invalid\x20Telegram\x20token'));}),process[_0x3f8031(0x164)](_0x3f8031(0xfd),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x3f8031(0x164)]('SIGTERM',()=>{const _0x25096d=_0x3f8031;if(tgBot)tgBot[_0x25096d(0x17f)]();process[_0x25096d(0x15e)](0x1);});}}function disableTelegram(){const _0x18d169=_0x5780eb;tgBot&&(tgBot[_0x18d169(0x17f)](),tgBot=null);}function sendTelegram(_0x1d82d7,_0x45b406){const _0x223d5d=_0x5780eb;if(settings[_0x223d5d(0xfe)]){if(settings[_0x223d5d(0x1f0)]==_0x223d5d(0x157)||(_0x45b406[_0x223d5d(0x103)]==_0x223d5d(0xe8)||_0x45b406[_0x223d5d(0x103)]=='success')&&settings['telegramEvents']=='alerts'||_0x45b406[_0x223d5d(0x103)]=='order'&&settings[_0x223d5d(0x1f0)]=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x45b406['showname'])tgBot['sendMessage'](settings[_0x223d5d(0x180)],_0x45b406[_0x223d5d(0x19b)]+_0x223d5d(0xe7)+_0x45b406[_0x223d5d(0xf1)])['catch'](_0x3c944d=>{telegramError(_0x3c944d);});else tgBot[_0x223d5d(0x170)](settings[_0x223d5d(0x180)],_0x223d5d(0x186)+_0x1d82d7+'\x20>\x20'+_0x45b406['event'])[_0x223d5d(0x194)](_0x292395=>{telegramError(_0x292395);});}}}}function getDeviceWithIp(_0x4ce240){const _0x48425f=_0x5780eb;return devices[_0x48425f(0xe0)](_0x441d7b=>_0x441d7b['ip']===_0x4ce240);}function temporaryAccess2FA(_0x4bb2e3,_0x232dcf){const _0x3ae9ce=_0x5780eb;let _0x318d3b=new Date(),_0x1eb686=![];if(lastIpApproval){if(_0x318d3b-lastIpApproval<0x1388)_0x1eb686=!![];}lastIpApproval=new Date();if(_0x1eb686)return;tgBot&&settings[_0x3ae9ce(0x180)]&&(tgBot[_0x3ae9ce(0x1e2)]('callback_query'),tgBot['sendMessage'](settings[_0x3ae9ce(0x180)],_0x3ae9ce(0x130)+normalizeIP(_0x232dcf)['show']+_0x3ae9ce(0xdc),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3ae9ce(0x1a2),'callback_data':'5'},{'text':_0x3ae9ce(0x20e),'callback_data':'15'},{'text':_0x3ae9ce(0x184),'callback_data':'30'},{'text':_0x3ae9ce(0x193),'callback_data':'reject'}]]}})['catch'](_0x55ea2c=>{telegramError(_0x55ea2c);}),tgBot['on']('callback_query',async _0x27e957=>{const _0x336e55=_0x3ae9ce,_0x5c47a1=_0x27e957[_0x336e55(0x11e)],_0x47d903=_0x27e957[_0x336e55(0x125)];tgBot[_0x336e55(0x129)](_0x27e957['id'])[_0x336e55(0x158)](async()=>{const _0x5b8d5b=_0x336e55;devices[_0x4bb2e3][_0x5b8d5b(0x206)]={'clientip':_0x232dcf,'timestamp':new Date()[_0x5b8d5b(0x117)](),'expiry':_0x5c47a1},_0x5c47a1!=_0x5b8d5b(0x193)?(await tgBot[_0x5b8d5b(0x170)](_0x47d903['chat']['id'],_0x5b8d5b(0x13d)+_0x5c47a1+'\x20minutes',{'parse_mode':_0x5b8d5b(0x16b)})[_0x5b8d5b(0x194)](_0x5da46c=>{telegramError(_0x5da46c);}),io['to'](_0x4bb2e3)[_0x5b8d5b(0x1d9)](_0x5b8d5b(0x1d8),{'access':{'allow':![],'reason':_0x5b8d5b(0x144),'token':null}})):(await tgBot[_0x5b8d5b(0x170)](_0x47d903[_0x5b8d5b(0x17e)]['id'],_0x5b8d5b(0x165))[_0x5b8d5b(0x194)](_0x5201bf=>{telegramError(_0x5201bf);}),io['to'](_0x4bb2e3)[_0x5b8d5b(0x1d9)]('status',{'access':{'allow':![],'reason':_0x5b8d5b(0x11b),'token':null}}));}),tgBot[_0x336e55(0x1e2)](_0x336e55(0x108));}));}function loginAccess2FA(_0x13b025,_0xf72f0e){const _0x4f535f=_0x5780eb;tgBot&&settings[_0x4f535f(0x180)]&&(tgBot[_0x4f535f(0x1e2)](_0x4f535f(0x108)),tgBot['sendMessage'](settings[_0x4f535f(0x180)],_0x4f535f(0x187)+normalizeIP(_0xf72f0e)[_0x4f535f(0x185)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4f535f(0x12c),'callback_data':loginExpiry},{'text':_0x4f535f(0x193),'callback_data':_0x4f535f(0x193)}]]}})[_0x4f535f(0x194)](_0xedbb6d=>{telegramError(_0xedbb6d);}),tgBot['on'](_0x4f535f(0x108),async _0x27a204=>{const _0x17bcec=_0x4f535f,_0x159cb9=_0x27a204[_0x17bcec(0x11e)],_0x11c44f=_0x27a204[_0x17bcec(0x125)];tgBot['answerCallbackQuery'](_0x27a204['id'])[_0x17bcec(0x158)](async()=>{const _0x1325bd=_0x17bcec;devices[_0x13b025][_0x1325bd(0x1f5)]={'clientip':_0xf72f0e,'timestamp':new Date()[_0x1325bd(0x117)](),'expiry':_0x159cb9},_0x159cb9!=_0x1325bd(0x193)?(await tgBot[_0x1325bd(0x170)](_0x11c44f[_0x1325bd(0x17e)]['id'],_0x1325bd(0x1aa),{'parse_mode':_0x1325bd(0x16b)})[_0x1325bd(0x194)](_0x1ca705=>{telegramError(_0x1ca705);}),io['to'](_0x13b025)[_0x1325bd(0x1d9)](_0x1325bd(0x1d8),{'access':{'allow':![],'reason':_0x1325bd(0x144),'token':null}})):(await tgBot[_0x1325bd(0x170)](_0x11c44f['chat']['id'],_0x1325bd(0xff))[_0x1325bd(0x194)](_0x5450b8=>{telegramError(_0x5450b8);}),io['to'](_0x13b025)[_0x1325bd(0x1d9)](_0x1325bd(0x1d8),{'access':{'allow':![],'reason':_0x1325bd(0x1c5),'token':null}}));}),tgBot[_0x17bcec(0x1e2)](_0x17bcec(0x108));}));}function getConfiguration(){const _0x389817=_0x5780eb;return dbConfig['get'](_0x389817(0x10c))[_0x389817(0x146)](_0x389817(0x1c2))[_0x389817(0x1ff)]()||[];}function getEnabledBots(){const _0x42c872=_0x5780eb;return dbConfig[_0x42c872(0x12f)](_0x42c872(0x10c))[_0x42c872(0x146)]('botID')[_0x42c872(0x15a)]({'status':_0x42c872(0xde)})[_0x42c872(0x1ff)]()||[];}function getDisabledBots(){const _0x6970b0=_0x5780eb;return dbConfig[_0x6970b0(0x12f)]('bots')[_0x6970b0(0x146)]('botID')[_0x6970b0(0x15a)]({'status':_0x6970b0(0x1fe)})[_0x6970b0(0x1ff)]()||[];}function getSettings(){const _0x3e35e2=_0x5780eb;return dbSettings[_0x3e35e2(0x12f)](_0x3e35e2(0x107))[_0x3e35e2(0x1ff)]()||{'timeshift':0x0};}function getSecure(){const _0x194ce5=_0x5780eb;return dbSecure[_0x194ce5(0x12f)]('secure')['value']()||{};}function getBlacklist(){const _0x2030ce=_0x5780eb;return dbSecure[_0x2030ce(0x12f)]('blacklist')[_0x2030ce(0x1ff)]()||[];}function broadcastToBots(_0x3f2f16,_0x12a270){const _0x327b1b=_0x5780eb;config[_0x327b1b(0x201)](_0x22bee4=>{const _0x9420d9=_0x327b1b;if(_0x22bee4['status']==_0x9420d9(0xde)&&_0x22bee4[_0x9420d9(0x1e3)]==_0x9420d9(0x1b2)){if(pid[_0x22bee4['botID']])pid[_0x22bee4[_0x9420d9(0x1c2)]][_0x9420d9(0x1d0)]({[_0x3f2f16]:_0x12a270});}});}function storeSettings(_0x590ac7,_0xc79cd4=![]){const _0x31e0d2=_0x5780eb;_0x590ac7={...settings,..._0x590ac7};if(_0xc79cd4&&_0x590ac7[_0x31e0d2(0x155)]!=_0x31e0d2(0xee)&&_0x590ac7['bbPassword']!=''){const _0x1c8b3d=crypt['decrypt'](secure[_0x31e0d2(0x134)],_0x590ac7[_0x31e0d2(0x155)])['message']['split']('@')[0x0],_0x463e41=bcrypt[_0x31e0d2(0x1a1)](_0x1c8b3d,saltRounds);_0x590ac7={..._0x590ac7,'bbPassword':_0x463e41};}if(_0xc79cd4&&_0x590ac7[_0x31e0d2(0x110)]!=_0x31e0d2(0xee)&&_0x590ac7[_0x31e0d2(0x110)]!=''){const _0x4b27fc=crypt[_0x31e0d2(0x1cf)](secure['privateKey'],_0x590ac7['telegramToken'])[_0x31e0d2(0x125)]['split']('@')[0x0];_0x590ac7={..._0x590ac7,'telegramToken':_0x4b27fc};}const _0x5ad3a8=_0x590ac7[_0x31e0d2(0x110)]!=_0x31e0d2(0xee)&&_0x590ac7[_0x31e0d2(0x110)]!=settings['telegramToken']||_0x590ac7[_0x31e0d2(0x1fd)]!=settings[_0x31e0d2(0x1fd)],_0xdde77c=_0x590ac7[_0x31e0d2(0x110)]==''||_0x590ac7[_0x31e0d2(0x1fd)]=='';if(_0x5ad3a8)_0x590ac7['telegramEvents']=_0x31e0d2(0x157);for(const [_0x1a2b54,_0x3cb0bc]of Object[_0x31e0d2(0x203)](_0x590ac7)){if(_0x1a2b54==_0x31e0d2(0x110)&&_0x3cb0bc==_0x31e0d2(0xee)){_0x590ac7[_0x31e0d2(0x110)]=settings[_0x31e0d2(0x110)];continue;};if(_0x1a2b54==_0x31e0d2(0x155)&&_0x3cb0bc=='************'){_0x590ac7[_0x31e0d2(0x155)]=settings[_0x31e0d2(0x155)];continue;};dbSettings[_0x31e0d2(0x1af)](_0x31e0d2(0x1c0)+_0x1a2b54,_0x3cb0bc)[_0x31e0d2(0x153)]();}settings=_0x590ac7,io['to'](_0x31e0d2(0xf8))[_0x31e0d2(0x1d9)]('settings',cleanSettings()),broadcastToBots(_0x31e0d2(0x20d),settings[_0x31e0d2(0x20d)]);if(_0x5ad3a8&&!_0xdde77c)initTelegram();if(_0x5ad3a8&&_0xdde77c)disableTelegram();getAllClients()['forEach'](_0x5e2341=>{const _0x46997a=_0x31e0d2;getSocket(_0x5e2341['id'])[_0x46997a(0x1d9)](_0x46997a(0x1d8),{'access':{'allow':![],'reason':_0x46997a(0x144),'token':null}});});}function updateSetting(_0x4f74c6,_0x5be34a){const _0x398e0d=_0x5780eb;dbSettings[_0x398e0d(0x1af)](_0x398e0d(0x1c0)+_0x4f74c6,_0x5be34a)['write'](),settings=getSettings(),io['to'](_0x398e0d(0xf8))[_0x398e0d(0x1d9)](_0x398e0d(0x107),cleanSettings());}function storeSecure(_0x2f8157){const _0x4b302c=_0x5780eb;dbSecure['get'](_0x4b302c(0x1d2))[_0x4b302c(0xf2)](_0x2f8157)[_0x4b302c(0x153)](),secure=_0x2f8157;}function addBlacklist(_0x20e02e){const _0x24a7a2=_0x5780eb;cleanBlacklist();let _0x210365;devices[_0x20e02e]['telegramIpApproval']?_0x210365=Math['max'](devices[_0x20e02e][_0x24a7a2(0x206)]['expiry'],loginExpiry):_0x210365=loginExpiry,dbSecure[_0x24a7a2(0x12f)]('blacklist')[_0x24a7a2(0xf2)]({'expiry':new Date()[_0x24a7a2(0x117)]()+_0x210365*0x3c*0x3e8,'token':devices[_0x20e02e][_0x24a7a2(0xf9)]['token']})['write'](),blacklist=dbSecure[_0x24a7a2(0x12f)](_0x24a7a2(0x1e5))[_0x24a7a2(0x1ff)]();}function cleanBlacklist(){const _0x324c08=_0x5780eb;let _0x539d4a=dbSecure[_0x324c08(0x12f)]('blacklist')[_0x324c08(0x118)]()[_0x324c08(0x1ff)](),_0x52dbb6=new Date()[_0x324c08(0x117)]();_0x539d4a['forEach'](_0x26a2b9=>{const _0x1ae565=_0x324c08;_0x26a2b9[_0x1ae565(0x167)]<_0x52dbb6&&dbSecure[_0x1ae565(0x12f)]('blacklist')['remove']({'expiry':_0x26a2b9[_0x1ae565(0x167)]})[_0x1ae565(0x153)]();});}function initStates(){let _0x4834a0=getConfiguration();_0x4834a0['forEach'](_0x5503d9=>{const _0x29560b=_0x39b1;_0x5503d9[_0x29560b(0x1e3)]=_0x29560b(0x171);}),storeConfiguration(_0x4834a0);}function onKeys(){const _0x2068c7=new RSA();return new Promise(_0x5872be=>{const _0x1be78e=_0x39b1;_0x2068c7[_0x1be78e(0x16c)]()[_0x1be78e(0x158)](_0x46b197=>{_0x5872be(_0x46b197);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4e83bb=_0x5780eb;let _0x22b437=getConfiguration(),_0x42e15f=![];_0x22b437[_0x4e83bb(0x201)](_0x564434=>{const _0x362fb8=_0x4e83bb;if(_0x564434['status']==_0x362fb8(0x1b2))_0x564434[_0x362fb8(0x1d8)]='enabled',_0x42e15f=!![];else _0x564434['status']==_0x362fb8(0x171)&&(_0x564434[_0x362fb8(0x1d8)]=_0x362fb8(0x1fe),_0x42e15f=!![]);});if(_0x42e15f)storeConfiguration(_0x22b437);let _0x3224c7=getSecure();if(!_0x3224c7[_0x4e83bb(0x135)](_0x4e83bb(0x145))){let _0x231f6f=await generateKeys();_0x3224c7['publicKey']=_0x231f6f[_0x4e83bb(0x1bf)],_0x3224c7[_0x4e83bb(0x134)]=_0x231f6f[_0x4e83bb(0x134)],_0x3224c7[_0x4e83bb(0x145)]=crypto[_0x4e83bb(0x15b)](0x20)[_0x4e83bb(0x21b)](_0x4e83bb(0x1ee));;storeSecure(_0x3224c7);}let _0x7c0128=getSettings();_0x42e15f=![];!_0x7c0128['hasOwnProperty'](_0x4e83bb(0x19c))&&(_0x7c0128[_0x4e83bb(0x19c)]=![],_0x7c0128[_0x4e83bb(0x18a)]='',_0x7c0128[_0x4e83bb(0x155)]='',_0x7c0128[_0x4e83bb(0x209)]=![],_0x42e15f=!![]);!_0x7c0128[_0x4e83bb(0x135)](_0x4e83bb(0x1e9))&&(_0x7c0128[_0x4e83bb(0x1e9)]=![],_0x7c0128['whitelist']=[],_0x7c0128[_0x4e83bb(0xe9)]=![],_0x42e15f=!![]);if(!_0x7c0128[_0x4e83bb(0x135)](_0x4e83bb(0xfe))){if(_0x7c0128[_0x4e83bb(0x180)])_0x7c0128[_0x4e83bb(0xfe)]=!![];else _0x7c0128[_0x4e83bb(0xfe)]=![];_0x42e15f=!![];}if(_0x42e15f)storeSettings(_0x7c0128);}function storeConfiguration(_0x37594a){const _0x529dac=_0x5780eb;dbConfig[_0x529dac(0x12f)]('bots')[_0x529dac(0x114)]()[_0x529dac(0x153)](),dbConfig[_0x529dac(0x12f)](_0x529dac(0x10c))[_0x529dac(0xf2)](..._0x37594a)[_0x529dac(0x153)](),config=_0x37594a;}function resetPassword(){const _0x2b62ce=_0x5780eb;tgBot&&settings[_0x2b62ce(0x180)]&&(tgBot[_0x2b62ce(0x1e2)](_0x2b62ce(0x108)),tgBot[_0x2b62ce(0x170)](settings[_0x2b62ce(0x180)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2b62ce(0x16b),'reply_markup':{'inline_keyboard':[[{'text':_0x2b62ce(0x1a4),'callback_data':_0x2b62ce(0x1a4)},{'text':'no','callback_data':'no'}]]}})[_0x2b62ce(0x194)](_0x964d4b=>{telegramError(_0x964d4b);}),tgBot['on'](_0x2b62ce(0x108),async _0x4a6790=>{const _0x30083a=_0x2b62ce,_0x324da1=_0x4a6790[_0x30083a(0x11e)],_0x2db388=_0x4a6790[_0x30083a(0x125)];tgBot[_0x30083a(0x129)](_0x4a6790['id'])['then'](async()=>{const _0x59f605=_0x30083a;if(_0x324da1!='no'){const _0x4344b0=0xf,_0x47f85d=_0x59f605(0x1a7),_0x3f406e=Array[_0x59f605(0x12d)](crypto[_0x59f605(0x100)](new Uint32Array(_0x4344b0)))['map'](_0x392ddb=>_0x47f85d[_0x392ddb%_0x47f85d[_0x59f605(0x160)]])[_0x59f605(0xe4)](''),_0x592eb9=bcrypt[_0x59f605(0x1a1)](_0x3f406e,saltRounds);storeSettings({'bbPassword':_0x592eb9}),await tgBot[_0x59f605(0x170)](_0x2db388[_0x59f605(0x17e)]['id'],_0x59f605(0x17c)+_0x3f406e,{'parse_mode':_0x59f605(0x16b)})[_0x59f605(0x194)](_0x1e7d7c=>{telegramError(_0x1e7d7c);});}else await tgBot[_0x59f605(0x170)](_0x2db388[_0x59f605(0x17e)]['id'],_0x59f605(0x156))['catch'](_0x381942=>{telegramError(_0x381942);});}),tgBot[_0x30083a(0x1e2)](_0x30083a(0x108));}));}function logging(_0x46fa93){const _0x441085=_0x5780eb;console[_0x441085(0x174)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x46fa93);if(tgBot&&settings[_0x441085(0x180)]&&settings[_0x441085(0x1f0)]!=_0x441085(0x106))tgBot[_0x441085(0x170)](settings['telegramChatId'],_0x441085(0x13b)+_0x46fa93)['catch'](_0x268ecc=>{telegramError(_0x268ecc);});}function getServerTime(){const _0x8152dd=_0x5780eb,_0x211fba=new Date();return _0x211fba[_0x8152dd(0x113)]()+'/'+(_0x211fba[_0x8152dd(0x119)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x211fba[_0x8152dd(0x205)]()[_0x8152dd(0x21b)]()[_0x8152dd(0x197)](0x2,'0')+'\x20'+_0x211fba[_0x8152dd(0x1b6)]()['toString']()[_0x8152dd(0x197)](0x2,'0')+':'+_0x211fba[_0x8152dd(0x1ec)]()[_0x8152dd(0x21b)]()['padStart'](0x2,'0')+':'+_0x211fba[_0x8152dd(0xf5)]()[_0x8152dd(0x21b)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x15da1a=_0x5780eb,_0x243f82=shiftedTime();return _0x243f82['getFullYear']()+'/'+(_0x243f82[_0x15da1a(0x119)]()+0x1)[_0x15da1a(0x21b)]()[_0x15da1a(0x197)](0x2,'0')+'/'+_0x243f82[_0x15da1a(0x205)]()['toString']()[_0x15da1a(0x197)](0x2,'0')+'\x20'+_0x243f82[_0x15da1a(0x1b6)]()[_0x15da1a(0x21b)]()[_0x15da1a(0x197)](0x2,'0')+':'+_0x243f82['getMinutes']()[_0x15da1a(0x21b)]()[_0x15da1a(0x197)](0x2,'0')+':'+_0x243f82[_0x15da1a(0xf5)]()[_0x15da1a(0x21b)]()['padStart'](0x2,'0');}function shiftedTime(){const _0xc2decf=_0x5780eb,_0x2e0ccb=new Date();let _0x1b040b=_0x2e0ccb;if(settings[_0xc2decf(0x20d)]&&settings[_0xc2decf(0x20d)]!==0x0)_0x1b040b=fns[_0xc2decf(0xfa)](_0x2e0ccb,{'hours':settings[_0xc2decf(0x20d)]});return _0x1b040b;}function startScheduler(){const _0x47035b=_0x5780eb;let _0x3a5c58=new Date()[_0x47035b(0xea)]();_0x3a5c58==0x1&&backupConfigFiles();_0x3a5c58==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2a74ee=_0x5780eb;fs[_0x2a74ee(0x16f)](configpath,{'withFileTypes':!![]})['forEach'](_0x3ad177=>{const _0x524e75=_0x2a74ee;if(!_0x3ad177['isDirectory']())fs[_0x524e75(0x162)](configpath+_0x3ad177[_0x524e75(0x152)],configbackuppath+_0x3ad177['name']);});}function triggerAnalytics(){const _0x3b557c=_0x5780eb;analytics[_0x3b557c(0x143)]({'title':_0x3b557c(0x1da),'href':_0x3b557c(0x20c),'path':'/v'+serverversion});}function validateCredentials(_0xaff876,_0x591c4e){const _0xa7003a=_0x5780eb;if(_0xaff876[_0xa7003a(0x1f7)]==settings[_0xa7003a(0x18a)]&&bcrypt[_0xa7003a(0x1ab)](_0xaff876[_0xa7003a(0x142)],settings[_0xa7003a(0x155)])){if(settings[_0xa7003a(0x209)])return{'allow':![],'reason':_0xa7003a(0xf7),'token':null};else{const _0x6e1dd4=generateLoginToken(_0x591c4e);return{'allow':!![],'reason':_0xa7003a(0x1ca),'token':_0x6e1dd4};}}else return{'allow':![],'reason':_0xa7003a(0x14c),'token':null};}function refreshToken(_0x5b3c9f){const _0x262a66=_0x5780eb,_0x557c3f=generateLoginToken(_0x5b3c9f);return{'allow':!![],'reason':_0x262a66(0x1ca),'token':_0x557c3f};}function validateAccess(_0x579732,_0x23cc9b){const _0x6ebd5d=_0x5780eb;let _0x1a4cd3=devices[_0x23cc9b]['ip'],_0x608e4d;const _0x5c7618=_0x3970bf=>{const _0x5a141e=_0x39b1;if(settings['loginRequired']){if(settings[_0x5a141e(0x209)]){if(telegram2FaApproved(_0x23cc9b)){const _0x55723c=generateLoginToken(_0x23cc9b);return{'allow':!![],'reason':_0x5a141e(0x11f),'token':_0x55723c};}else return{'allow':![],'reason':_0x5a141e(0x1a6),'token':null};}else return _0x608e4d=validToken(_0x3970bf,_0x23cc9b),_0x608e4d[_0x5a141e(0x135)](_0x5a141e(0x120))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3970bf}:{'allow':![],'reason':_0x5a141e(0x1a6),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x1f018c=[...settings[_0x6ebd5d(0x15f)],'::1',_0x6ebd5d(0xdf),'127.0.0.1'];if(_0x1f018c[_0x6ebd5d(0x179)](_0x1a4cd3))return _0x5c7618(_0x579732);else{_0x608e4d=validToken(_0x579732,_0x23cc9b);if(_0x608e4d[_0x6ebd5d(0x135)](_0x6ebd5d(0x120)))return _0x5c7618(_0x579732);else{if(telegramIpApproved(_0x23cc9b)){const _0x451c47=generateToken(_0x23cc9b);return _0x608e4d=_0x5c7618(_0x579732),_0x608e4d[_0x6ebd5d(0x1f1)]?{'allow':!![],'reason':_0x6ebd5d(0x1ae),'token':_0x451c47}:_0x608e4d;}else return settings[_0x6ebd5d(0xe9)]?{'allow':![],'reason':_0x6ebd5d(0xf0),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x5c7618(_0x579732);}function timelyDecrypt(_0x5c76fc,_0x131c36=!![]){const _0x3118e1=_0x5780eb;if(_0x5c76fc)try{const _0x35fcd7=crypt[_0x3118e1(0x1cf)](secure[_0x3118e1(0x134)],_0x5c76fc)['message'],_0x1c2f13=_0x35fcd7['split']('@')[0x0],_0x39d75a=_0x35fcd7[_0x3118e1(0xe1)]('@')[0x1],_0x2678f6=new Date()[_0x3118e1(0x117)]();if(_0x131c36){if(_0x2678f6-_0x39d75a<maxSecretAge*0x3e8)return _0x1c2f13;else return![];}else return _0x1c2f13;}catch(_0x15eb5a){return![];}else return![];}const validToken=(_0x4dae9f,_0x2d577e)=>{const _0x2b4341=_0x5780eb,_0x57daf9=devices[_0x2d577e]['ip'];if(!_0x4dae9f)return{'error':_0x2b4341(0x19d)};for(let _0xce651a of blacklist){if(_0xce651a[_0x2b4341(0x18c)]==_0x4dae9f)return{'error':_0x2b4341(0x1e0)};}let _0x214090;try{_0x214090=jwt[_0x2b4341(0x161)](_0x4dae9f,secure[_0x2b4341(0x145)]+_0x2d577e);}catch{return{'error':_0x2b4341(0x204)};}if(!_0x214090[_0x2b4341(0x135)](_0x2b4341(0x11d))&&!_0x214090[_0x2b4341(0x135)](_0x2b4341(0x1f7))||!_0x214090['hasOwnProperty'](_0x2b4341(0x18f)))return{'error':_0x2b4341(0x1ea)};if(!_0x214090['hasOwnProperty'](_0x2b4341(0x1f7))&&_0x214090['hasOwnProperty']('clientip')){const {clientip:_0x5baca4}=_0x214090;return _0x57daf9==_0x5baca4?{'success':_0x2b4341(0x1b5)}:{'error':_0x2b4341(0x123)};}else{if(_0x214090['hasOwnProperty']('username')&&_0x214090[_0x2b4341(0x135)]('clientip')){const {username:_0x41df36,clientip:_0x22924a}=_0x214090;return settings['bbUsername']==_0x41df36&&_0x57daf9==_0x22924a?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x2b4341(0x1e7)};}}},generateLoginToken=_0x3fefd1=>{const _0x1b12f6=_0x5780eb;if(_0x3fefd1){const _0x38e533=devices[_0x3fefd1]['ip'];return jwt[_0x1b12f6(0x115)]({'username':settings[_0x1b12f6(0x18a)],'clientip':_0x38e533},secure[_0x1b12f6(0x145)]+_0x3fefd1,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2282ca=>{const _0x4e74de=_0x5780eb;if(_0x2282ca){const _0x1ad2c0=devices[_0x2282ca]['ip'];return jwt[_0x4e74de(0x115)]({'clientip':_0x1ad2c0},secure['secret']+_0x2282ca,{'expiresIn':devices[_0x2282ca]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x25b12f=>{const _0x38345e=_0x5780eb;let _0x1704f9=![];return devices[_0x25b12f][_0x38345e(0x206)]&&devices[_0x25b12f][_0x38345e(0x206)][_0x38345e(0x167)]!=_0x38345e(0x193)&&(_0x1704f9=devices[_0x25b12f][_0x38345e(0x206)][_0x38345e(0x11d)]==devices[_0x25b12f]['ip']&&new Date()[_0x38345e(0x117)]()-devices[_0x25b12f][_0x38345e(0x206)]['timestamp']<devices[_0x25b12f][_0x38345e(0x206)][_0x38345e(0x167)]*0x3c*0x3e8),_0x1704f9;},telegram2FaApproved=_0x33db96=>{const _0x4775a8=_0x5780eb;let _0x183aaf=![];return devices[_0x33db96][_0x4775a8(0x1f5)]&&devices[_0x33db96][_0x4775a8(0x1f5)][_0x4775a8(0x167)]!=_0x4775a8(0x193)&&(_0x183aaf=devices[_0x33db96]['telegram2FaApproval'][_0x4775a8(0x11d)]==devices[_0x33db96]['ip']&&new Date()[_0x4775a8(0x117)]()-devices[_0x33db96][_0x4775a8(0x1f5)][_0x4775a8(0x176)]<devices[_0x33db96]['telegram2FaApproval'][_0x4775a8(0x167)]*0x3c*0x3e8),_0x183aaf;},normalizeIP=_0x36c0fe=>{const _0x10dc09=_0x5780eb;let _0x209631=null,_0x524e3c=null;if(ipaddr[_0x10dc09(0x208)](_0x36c0fe)){const _0x427e52=ipaddr[_0x10dc09(0x1d1)](_0x36c0fe);_0x427e52[_0x10dc09(0x141)]()===_0x10dc09(0x1df)?(_0x427e52[_0x10dc09(0x21a)]()&&(_0x209631=_0x427e52['toIPv4Address']()[_0x10dc09(0x21b)]()),_0x524e3c=_0x427e52['toString']()):(_0x209631=_0x427e52[_0x10dc09(0x21b)](),_0x524e3c=_0x427e52['toIPv4MappedAddress']()[_0x10dc09(0x21b)]());}return{'show':_0x209631?_0x209631:_0x524e3c,'store':_0x524e3c};};