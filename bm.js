const _0x183dae=_0x15c7;(function(_0x49ec31,_0x498e32){const _0x35ebfe=_0x15c7,_0xb31ff=_0x49ec31();while(!![]){try{const _0x18a702=parseInt(_0x35ebfe(0x116))/0x1+-parseInt(_0x35ebfe(0x2c2))/0x2+-parseInt(_0x35ebfe(0x299))/0x3*(-parseInt(_0x35ebfe(0x2bc))/0x4)+parseInt(_0x35ebfe(0x1f5))/0x5*(-parseInt(_0x35ebfe(0x251))/0x6)+-parseInt(_0x35ebfe(0x2f6))/0x7*(parseInt(_0x35ebfe(0x121))/0x8)+parseInt(_0x35ebfe(0x12a))/0x9+-parseInt(_0x35ebfe(0x266))/0xa*(-parseInt(_0x35ebfe(0x179))/0xb);if(_0x18a702===_0x498e32)break;else _0xb31ff['push'](_0xb31ff['shift']());}catch(_0x156315){_0xb31ff['push'](_0xb31ff['shift']());}}}(_0x4201,0x7d1c3));const _0x1a48d4=function(){let _0x12ebd9=!![];return function(_0x3edcb6,_0x4d9998){const _0x37f418=_0x12ebd9?function(){const _0x13886a=_0x15c7;if(_0x4d9998){const _0xb81d6=_0x4d9998[_0x13886a(0x119)](_0x3edcb6,arguments);return _0x4d9998=null,_0xb81d6;}}:function(){};return _0x12ebd9=![],_0x37f418;};}(),_0x354aef=_0x1a48d4(this,function(){const _0x43c915=_0x15c7;return _0x354aef[_0x43c915(0x189)]()[_0x43c915(0x234)]('(((.+)+)+)+$')[_0x43c915(0x189)]()[_0x43c915(0x29a)](_0x354aef)['search'](_0x43c915(0x17e));});_0x354aef();'use strict';process['env'][_0x183dae(0x2e3)]=0x1;const childProcess=require(_0x183dae(0x216)),fs=require('fs'),fns=require(_0x183dae(0x2df)),low=require(_0x183dae(0x21d)),FileSync=require(_0x183dae(0x21e)),path=require(_0x183dae(0x2f0)),crypto=require(_0x183dae(0x271)),forge=require(_0x183dae(0x117)),bcrypt=require(_0x183dae(0x29b)),jwt=require(_0x183dae(0x175)),ipaddr=require(_0x183dae(0x2e5)),argv=require(_0x183dae(0x11f))(process[_0x183dae(0x1ad)][_0x183dae(0x29c)](0x2))['argv'],uuidRandom=require(_0x183dae(0x14d)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x183dae(0x147)),axios=require(_0x183dae(0x2b6)),{GraphQLClient,gql}=require(_0x183dae(0x1ee)),util=require(_0x183dae(0x2b5)),fileUpload=require(_0x183dae(0x256)),{networkInterfaces}=require('os'),JSZip=require(_0x183dae(0x2af)),PORT=argv[_0x183dae(0x15a)]||_0x183dae(0x28b),pattern=/^[0-9]{2,4}$/;!pattern[_0x183dae(0x2c8)](PORT)&&(console[_0x183dae(0x282)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x183dae(0x1b3)),process[_0x183dae(0x259)](0x1));const HOST=argv[_0x183dae(0x255)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x183dae(0x15e)]['node'];let bbpath=_0x183dae(0x1f4),bbpath2='';const botfile=_0x183dae(0x126),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x183dae(0x2b9),environment=require('./'+bbpath2+_0x183dae(0x2d2))[_0x183dae(0x16b)]||_0x183dae(0x1b4),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x183dae(0x1c6)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x183dae(0x232)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x183dae(0x1d4),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x183dae(0x130),zippath=userID?bbpath+_0x183dae(0x288)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x183dae(0x19a)](logspath+_0x183dae(0x169),{'flags':'a'}),temppath=userID?bbpath+_0x183dae(0x143)+userID+'/':bbpath+_0x183dae(0x143);!fs[_0x183dae(0x1c6)](configpath)&&fs[_0x183dae(0x239)](configpath);!fs[_0x183dae(0x1c6)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x183dae(0x1c6)](logspath)&&fs[_0x183dae(0x239)](logspath);!fs[_0x183dae(0x1c6)](zippath)&&fs[_0x183dae(0x239)](zippath);!fs[_0x183dae(0x1c6)](temppath)&&fs[_0x183dae(0x239)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x183dae(0x124)]({'bots':[]})[_0x183dae(0x18d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x183dae(0x124)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x183dae(0x18d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x183dae(0x18d)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x183dae(0x231)](_0x183dae(0x12c),{'host':_0x183dae(0x269)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x183dae(0x23e)]&&(settings[_0x183dae(0x23e)]!=''&&settings[_0x183dae(0x23e)]!=_0x183dae(0x1f7))&&settings[_0x183dae(0x14a)]&&settings[_0x183dae(0x14a)]!='')initTelegram();const parseColor=(_0x1527a3,_0x21a012)=>{const _0x80f982=_0x183dae,_0x5b25f4=/#[A-Z]{3}#/g;if(typeof _0x1527a3==_0x80f982(0x2bf)){!_0x21a012?_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](_0x5b25f4,''):(_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](/#BLU#/g,'\x1b[34m'),_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](/#RED#/g,'\x1b[31m'),_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](/#YEL#/g,_0x80f982(0x176)),_0x1527a3=_0x1527a3['replace'](/#MAG#/g,_0x80f982(0x11d)),_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](/#CYA#/g,_0x80f982(0x2d4)),_0x1527a3=_0x1527a3[_0x80f982(0x1ea)](/#RES#/g,'\x1b[0m'));;}return _0x1527a3;},logger={'screen':_0x54508d=>{const _0x2a1034=_0x183dae;console[_0x2a1034(0x282)](parseColor(_0x54508d,!![]));},'simple':_0x25cb5b=>{const _0x1b9150=_0x183dae;console[_0x1b9150(0x282)](parseColor(_0x25cb5b,!![])),loggerfile['write'](util[_0x1b9150(0x1e0)](parseColor(_0x25cb5b,![]))+'\x0a');},'full':async _0x947782=>{const _0x382e91=_0x183dae,_0x107fea=getTimeStamp()+_0x382e91(0x187)+_0x947782;console[_0x382e91(0x282)](parseColor(_0x107fea,!![])),loggerfile[_0x382e91(0x18d)](util['format'](parseColor(_0x107fea,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x382e91(0x1e1))await sendTelegram(settings[_0x382e91(0x2ed)],_0x382e91(0x233)+parseColor(_0x947782,![]));},'debug':async(_0x5e4927,_0x4127df='')=>{const _0x5d83b7=_0x183dae,_0xd8cd63=getTimeStamp()+_0x5d83b7(0x17c)+_0x5e4927;if(debugging)console[_0x5d83b7(0x282)](parseColor(_0xd8cd63,!![]));loggerfile[_0x5d83b7(0x18d)](util[_0x5d83b7(0x1e0)](parseColor(_0xd8cd63,![]))+'\x0a');if(_0x4127df){if(debugging)console[_0x5d83b7(0x282)](_0x4127df);loggerfile[_0x5d83b7(0x18d)](util[_0x5d83b7(0x1e0)](_0x4127df)+'\x0a');}}};let terminating=![];process['on'](_0x183dae(0x1fe),function(_0x42368c){const _0x41c391=_0x183dae;_0x42368c[_0x41c391(0x189)]()[_0x41c391(0x11a)]('address\x20already\x20in\x20use')?(logger[_0x41c391(0x1f9)](_0x41c391(0x11c)+_0x42368c[_0x41c391(0x15a)]+_0x41c391(0x19f)),process[_0x41c391(0x25c)]({'terminate':!![]},_0x18bc30=>{})):logger[_0x41c391(0x1f9)](_0x42368c);}),process['on'](_0x183dae(0x259),()=>{const _0x3d77bd=_0x183dae;stopAllBots(),process[_0x3d77bd(0x259)](0x0);}),process['on']('SIGTERM',()=>{const _0x78c8b6=_0x183dae;stopAllBots(),process[_0x78c8b6(0x259)](0x0);}),process['on'](_0x183dae(0x190),()=>{const _0x401f84=_0x183dae;stopAllBots(),process[_0x401f84(0x259)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x183dae(0x2d2))[_0x183dae(0x1dd)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x183dae(0x236)),app=express(),http=require(_0x183dae(0x17d))[_0x183dae(0x203)](app);app[_0x183dae(0x1ba)](fileUpload({'useTempFiles':!![]})),app[_0x183dae(0x217)](_0x183dae(0x1b0),async(_0x50b0d9,_0x638150)=>{const _0x466a23=_0x183dae,_0x43bbb8=_0x50b0d9[_0x466a23(0x2c0)]['type'],_0xd57d1b=getClientsWithBotID(_0x466a23(0x2bb)),_0x9a3b4=_0x50b0d9[_0x466a23(0x2ca)][_0x466a23(0x1ab)],_0x588338=timelyDecrypt(_0x9a3b4,![]),_0x47adb8=_0xd57d1b[_0x466a23(0x230)](_0xe83a00=>_0xe83a00['uuid']==_0x588338);if(_0x47adb8){const _0x5af5b2=normalizeIP(_0x50b0d9[_0x466a23(0x23a)][_0x466a23(0x1ce)])[_0x466a23(0x294)],_0x5977a9=_0x50b0d9['headers'][_0x466a23(0x140)];if(validateAccess(_0x5977a9,_0x588338,_0x5af5b2)[_0x466a23(0x248)])_0x43bbb8==_0x466a23(0x137)&&await backupConfigFiles(),await zipFiles(_0x43bbb8),_0x638150[_0x466a23(0x265)](zippath+(_0x43bbb8+_0x466a23(0x2e8)),_0x62abc0=>{const _0x540d4d=_0x466a23;_0x62abc0&&(logger[_0x540d4d(0x26e)](_0x540d4d(0x17a)+_0x43bbb8),logger['simple'](_0x62abc0));});else logger[_0x466a23(0x26e)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x43bbb8+_0x466a23(0x193));}else logger[_0x466a23(0x26e)](_0x466a23(0x1c5)+_0x43bbb8+_0x466a23(0x15f));}),app[_0x183dae(0x1a4)]('/upload-backup',async(_0x247e55,_0x3d1446)=>{const _0x3b9043=_0x183dae,_0x763358=getClientsWithBotID(_0x3b9043(0x2bb)),_0xd71f33=_0x247e55[_0x3b9043(0x2ca)][_0x3b9043(0x1ab)],_0x18c2cc=timelyDecrypt(_0xd71f33,![]),_0x14e0c2=_0x763358[_0x3b9043(0x230)](_0x534189=>_0x534189[_0x3b9043(0x1ab)]==_0x18c2cc);logger[_0x3b9043(0x1f6)](_0x3b9043(0x213));if(_0x14e0c2){const _0x51f5cc=normalizeIP(_0x247e55['socket'][_0x3b9043(0x1ce)])['store'],_0x4eb71f=_0x247e55['headers'][_0x3b9043(0x140)];if(validateAccess(_0x4eb71f,_0x18c2cc,_0x51f5cc)[_0x3b9043(0x248)]){if(_0x247e55[_0x3b9043(0x1a3)]){const _0x22991b=_0x247e55[_0x3b9043(0x1a3)][_0x3b9043(0x2b8)];await _0x22991b['mv'](temppath+_0x22991b[_0x3b9043(0x2fb)]),_0x3d1446[_0x3b9043(0x25c)]({'status':!![],'message':_0x3b9043(0x19e)});const _0xcede94=getBotsWithMode();_0xcede94[_0x3b9043(0x2b1)]>0x0?confirmRestore(temppath,_0x22991b[_0x3b9043(0x2fb)]):unzipFile(temppath,_0x22991b[_0x3b9043(0x2fb)]);}}else logger[_0x3b9043(0x26e)](_0x3b9043(0x144));}else logger[_0x3b9043(0x26e)](_0x3b9043(0x28c));}),app['use'](express['static'](path[_0x183dae(0x250)](__dirname,bbpath2,_0x183dae(0xf4)))),app['use'](express['static'](path['join'](__dirname,bbpath2,_0x183dae(0x2c9)))),app[_0x183dae(0x217)]('/',function(_0x127730,_0x5014c8){const _0x6634ed=_0x183dae;_0x5014c8[_0x6634ed(0x103)](path[_0x6634ed(0x250)](__dirname,bbpath2,_0x6634ed(0xf4),_0x6634ed(0x1fb)));}),app['get']('/:bot',function(_0x586087,_0x3cd816){const _0x274836=_0x183dae;_0x3cd816[_0x274836(0x103)](path[_0x274836(0x250)](__dirname,bbpath2,'build',_0x274836(0x1fb)));}),app[_0x183dae(0x217)](_0x183dae(0x235),(_0x1e8f3b,_0xdffeeb)=>{const _0x518006=_0x183dae;_0xdffeeb[_0x518006(0x103)](path[_0x518006(0x250)](__dirname,bbpath2,_0x518006(0x2c9),_0x518006(0x1fb)));}),app[_0x183dae(0x217)](_0x183dae(0x281),(_0x51d357,_0x845c90)=>{const _0x136f91=_0x183dae;_0x845c90[_0x136f91(0x103)](path[_0x136f91(0x250)](__dirname,bbpath2,_0x136f91(0x2c9),'index.html'));}),app[_0x183dae(0x217)](_0x183dae(0x132),(_0x19e6b7,_0x599986)=>{const _0xab7bf2=_0x183dae;_0x599986['sendFile'](path['join'](__dirname,bbpath2,_0xab7bf2(0x2c9),'index.html'));}),app['get'](_0x183dae(0x208),(_0x33ba91,_0x5ad865)=>{const _0x4fae3f=_0x183dae;_0x5ad865['sendFile'](path[_0x4fae3f(0x250)](__dirname,bbpath2,_0x4fae3f(0x2c9),_0x4fae3f(0x1fb)));}),app[_0x183dae(0x217)](_0x183dae(0x300),(_0x11f9c0,_0x13b3e9)=>{const _0x27509e=_0x183dae;_0x13b3e9[_0x27509e(0x103)](path[_0x27509e(0x250)](__dirname,bbpath2,_0x27509e(0x2c9),_0x27509e(0x1fb)));}),app['get']('/:bot/support',(_0xddc677,_0x7be248)=>{const _0x29bec8=_0x183dae;_0x7be248[_0x29bec8(0x103)](path['join'](__dirname,bbpath2,_0x29bec8(0x2c9),_0x29bec8(0x1fb)));});if(HOST)http['listen'](PORT,HOST);else http[_0x183dae(0x30c)](PORT);const io=require('socket.io')(http,{});function _0x4201(){const _0x43731c=['defaults','-results.json','bot.js','Invalid\x20username\x20or\x20IP\x20address','set','/status\x20-\x20show\x20bot(s)\x20status\x0a','2230560NITvkS','button','6b67f3d61ee94b8f5c80b4affef4c4d9','backup-full@','bbvReceive','reset-password','logs/','temporaryAccessAllowed','/:bot/coins','args','Restore\x20process\x20confirmed','Ok,\x20will\x20send\x20alert\x20notifications\x20only','marketcapApi','backup','Unauthorized\x20attempt\x20to\x20delete\x20bot','get-logs','30\x20min','<b>Balance\x20Bot\x20Status:</b>\x0a','referer','store-fiat','mode','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','tkn','/start','cancel-loading','temp/','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','lastmsgemitted','loadAsync','mixpanel','latestversion','disabled','telegramUsername','generateAsync','emit','uuid-random','toIPv4MappedAddress','forEach','access\x20timeout','add-bot','Starting\x20(','Restore\x20backup\x20file\x20','Access\x20enabled\x20for\x20','hashSync','access','Notifications\x20disabled\x0a','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Your\x20installation\x20is\x20already\x20up\x20to\x20date','port','No\x20authentication\x20token','getMinutes','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','versions','\x20(2)','update','telegramEvents','CoinMarketCap\x20API\x20key\x20validated','|@|','callback','Password\x20reset\x20rejected','All','sendMessage','/backup\x20-\x20receive\x20backup\x20files\x0a','/output-000.log','command','environment','startsWith','\x20|\x20client:\x20...','sortBy','readFileSync','place-order','parse','2FA\x20required','generateKeyPair','Unauthorized\x20attempt\x20to\x20confirm\x20message','jsonwebtoken','\x1b[33m','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','rmSync','1133mBMXfG','Failed\x20to\x20download\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','http','(((.+)+)+)+$','Unauthorized\x20attempt\x20to\x20show\x20configuration','inherit','secret','showname','value','login\x20not\x20required','bbvNew','output-001.log',':\x20Bot\x20Mgr\x20>\x20','size','toString','bot-','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','config_orders','write','family','apiSecret','SIGINT','connected','2FA\x20login\x20required','\x20(1)','error','chat','get-backup-files','15\x20min','replyWithDocument','login2fa_','createWriteStream','copyFileSync','sort','config_alerts','File\x20uploaded','#RES#','bot','add','text','files','post','reply','/off\x20-\x20stop\x20bot(s)\x0a','connection','isIPv4MappedAddress','Notifications\x20enabled\x0a','Starting\x20#RED#Balance\x20Bot\x20v','uuid','restore_yes_','argv','reinstall','Unauthorized\x20attempt\x20to\x20add\x20bot','/download/:type','storeFiat','sendPortfolioTelegram',',\x20must\x20be\x20a\x204\x20digit\x20number','production','https://api.ipify.org?format=json','live','logged\x20out','yes','getHours','use','/update\x20-\x20update\x20Balance\x20Bot\x0a','showConfig','ETH','create','unlinkSync','sha256','getStartingBalances','blacklist','map','toIPv4Address','Unauthorized\x20attempt\x20to\x20download\x20','existsSync','initclient','username','resetHistory','Unauthorized\x20login\x20attempt\x20(timeout)','padStart','names','Unauthorized\x20attempt\x20to\x20get\x20portfolio','remoteAddress','Starting\x20new\x20bot\x20|\x20Bot\x20','\x20mode','messages','manual','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','config/','settings','privateKeyFromPem','stopped','Server','tempaccess_15_','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','pki','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','version','delete-bot','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','format','orders','toggle','stringify','Yes','getSeconds','tempaccess_30_','get-starting-balances','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','replace','assign','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','editMessageReplyMarkup','graphql-request','telegramEnabled','randomBytes','function','staging','Enabled\x20Bot\x20','bb/','145FdKhYH','debug','***','whitelistEnabled','simple','alias','index.html','User\x20has\x20been\x20validated',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','uncaughtException','privateKey','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','/names\x20-\x20show\x20bot\x20names\x0a','handshake','createServer','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Unauthorized\x20attempt\x20to\x20delete\x20alerts','hasOwnProperty','async','/:bot/history','SIGTERM','stop','all','min','pidExpireLogin','catch','telegram','loginRequired','reason','Logged\x20out\x20user\x20...','Backup\x20file\x20uploaded','hex','auth','child_process','get','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','inlineKeyboard','Notifications\x20types:\x20','encryptedUuid','\x20files\x20over\x20Telegram:','lowdb','lowdb/adapters/FileSync','verify','Restoring\x20bot(s)\x20from\x20backup','timestamp','/logs\x20-\x20receive\x20log\x20files\x0a','output-000.log','code','updatebotmanager','bbUsername','publicKeyToPem','onepagemode','clientip','2FA\x20login\x20rejected','getPortfolio','update-bb','pidRefreshToken','Invalid\x20authentication\x20token\x20(1)','\x20to\x20','find','init','clients','Bot\x20Mgr\x20>\x20','search','/:bot/portfolio','express','title','Session\x20expired\x20for\x20user\x20...','mkdirSync','socket','metrics','Error\x20removing\x20old\x20backup\x20files:','emitHistory','telegramToken','storeHeadless','auto','2FA\x20login\x20token\x20generated','Bot\x20','#RES#\x20if\x20running\x20locally\x0a','RSA-OAEP','getFullYear','ipc','keys','allow','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','any','All\x20bots','login\x20token\x20generated','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','0.0.0','join','109962AOyMFb','confirm-message','IPv4','settings.','host','express-fileupload','/disable\x20-\x20disable\x20notifications\x0a','decrypt','exit','notification','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','send','Unauthorized\x20attempt\x20to\x20update\x20settings','\x20|\x20user:\x20...','Telegraf\x20error:','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','delete-alerts','invalid\x20credentials','readdirSync','-----------------------------------------------------------------------------------','download','130030VRXVav','#RES#\x20if\x20running\x20on\x20server','show','api-eu.mixpanel.com','Alerts','toggle-bot-mode','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Restore\x20process\x20aborted','full','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Idling\x20(','crypto','exec','help','config','Password\x20has\x20been\x20reset\x20to:\x20','enable','action','config_all','isDirectory','backup-full','************','exp','store-settings','restore_no_','*$1*','reject','/:bot/performance','log','reload','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','off_','status','getDate','zip/','deleteHistoryAlerts','once','3000','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','backup-full.zip','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','private','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','accept','Logged\x20in\x20user\x20...','status\x20code\x20401','store','reinstall_no','enabled','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','All\x20bots\x20running\x20right\x20now','3zMgoox','constructor','bcryptjs','slice','bots','statSync','Notifications\x20enabled','show-config',')\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20messages','temporary\x20token\x20generated','\x20-\x20','close','restart','getTime','botID','address','getUTCHours','Error\x20while\x20deleting\x20config\x20files:\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','lastmsgtelegram','\x20|\x20','jszip','-events.json','length','Unauthorized\x20attempt\x20to\x20store\x20configuration','Setting\x20access:\x20','#RES#\x20','util','axios','type','backupfile','bb-secure.json','telegrammsg','botmanager','475172AZOZvL','5\x20min','Login\x20rejected','string','params','<b>Telegram\x20Bot\x20Status:</b>\x0a','1834524MSkPWk','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','token',')\x20|\x20Bot\x20','number','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','test','build','headers','alerts','removeAllListeners','match','split','isValid','toggle_','disable','version.json','/on\x20-\x20start\x20bot(s)\x0a','\x1b[36m','from','login','on_','\x20>\x20','remove','BCT','storeConfiguration','push','telegram2FaApproval','store-configuration','date-fns','Node.js\x20v','/help\x20-\x20show\x20available\x20commands\x0a','botname','NTBA_FIX_319','Starting\x20Balance\x20Bot\x20update','ipaddr.js','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','[ip-address]','.zip','cancelLoading','_nsps','message','telegramIpApproval','telegramChatId','bbPassword','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','path','disconnect','rsa','fork','publicKey','off','5006267jCOHXZ','f2aRequired','order','No\x20bots\x20running\x20right\x20now','writeFileSync','name','Error\x20sending\x20','new-disabled','mtime','Unauthorized\x20attempt\x20to\x20get\x20events','/:bot/configuration','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','file','kill','output-002.log','password','sign','HTML','sendMetricsTelegram','binary','1000','Backup\x20file\x20unzipped\x20and\x20stored','listen','get-messages','Unauthorized\x20attempt\x20to\x20update\x20bot','Temporary\x20access\x20rejected','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','build2','output-003.log','Markdown','conn','request','Disabled\x20Bot\x20','=>\x20Go\x20to\x20#CYA#http://','portfolio','start','success','warning','logs','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','then','127.0.0.1','sendFile','Notifications\x20disabled','expiry','headless','metrics_','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','store-headless','new','compareSync','timeshift','logout','event','portfolio_','getMonth','placeOrder','DEFLATE','/enable\x20-\x20enable\x20notifications\x0a','kind','entries','970435EIxKoB','node-forge','Invalid\x20authentication\x20token\x20(2)','apply','includes','toggleBotMode','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','\x1b[35m','userid','yargs/yargs','apiPassword','8jvNKnr','\x20minutes','-config.json'];_0x4201=function(){return _0x43731c;};return _0x4201();}init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x503cae=_0x183dae;let _0x111b10=_0x503cae(0x2e7);const _0x376db7=networkInterfaces(),_0x39c33e={};for(const _0x4cb92c of Object['keys'](_0x376db7)){for(const _0x1265dd of _0x376db7[_0x4cb92c]){if((_0x1265dd[_0x503cae(0x18e)]==_0x503cae(0x253)||_0x1265dd[_0x503cae(0x18e)]==0x4)&&!_0x1265dd['internal']){const _0x25bf04=ipaddr[_0x503cae(0x171)](_0x1265dd[_0x503cae(0x2a9)])['range']();_0x25bf04!=_0x503cae(0x28f)&&(!_0x39c33e[_0x4cb92c]&&(_0x39c33e[_0x4cb92c]=[]),_0x39c33e[_0x4cb92c]['push'](_0x1265dd[_0x503cae(0x2a9)]),_0x111b10=_0x1265dd[_0x503cae(0x2a9)]);}}}return{'serverip':_0x111b10,'netinterfaces':_0x39c33e};}async function startServer(){const _0x52d30a=_0x183dae,{serverip:_0x46dec0,netinterfaces:_0x163ad7}=getServerIP();logger[_0x52d30a(0x1f9)](''),logger[_0x52d30a(0x1f9)](_0x52d30a(0x264)),await logger[_0x52d30a(0x26e)](_0x52d30a(0x1aa)+serverversion+_0x52d30a(0x2b4)+(environment==_0x52d30a(0x1f2)?'(staging)':'')+'\x0a'+(_0x52d30a(0x260)+PORT+_0x52d30a(0x243))+(_0x52d30a(0xfa)+_0x46dec0+':'+PORT+_0x52d30a(0x267))),logger[_0x52d30a(0x1f9)](_0x52d30a(0x264));if(config['length']!=0x0)for(const _0x1e9803 of config){const _0x26c300=_0x1e9803[_0x52d30a(0x13e)]==_0x52d30a(0x240)?'a':'m';if(_0x1e9803[_0x52d30a(0x286)]==_0x52d30a(0x296)||_0x1e9803[_0x52d30a(0x286)]==_0x52d30a(0x10a))await logger[_0x52d30a(0x26e)](_0x52d30a(0x152)+_0x26c300+_0x52d30a(0x2c5)+_0x1e9803[_0x52d30a(0x2a8)]+'\x20|\x20'+_0x1e9803[_0x52d30a(0x2e2)]),startBot([_0x1e9803[_0x52d30a(0x2a8)],userID],{'cwd':bbpath},function(_0x2c193b){const _0x1ff4b3=_0x52d30a;if(_0x2c193b)logger[_0x1ff4b3(0x26e)](_0x2c193b);});else(_0x1e9803['status']=='disabled'||_0x1e9803[_0x52d30a(0x286)]==_0x52d30a(0x2fd))&&await logger['full'](_0x52d30a(0x270)+_0x26c300+_0x52d30a(0x2a1)+_0x1e9803[_0x52d30a(0x2a8)]+_0x52d30a(0x2ae)+_0x1e9803[_0x52d30a(0x2e2)]);}else!newBot&&logger[_0x52d30a(0x1f9)](_0x52d30a(0x1df));if(newBot)addBot();logger[_0x52d30a(0x1f9)](_0x52d30a(0x264)),logger[_0x52d30a(0x1f9)](''),await logger[_0x52d30a(0x1f6)](_0x52d30a(0x2e0)+nodeversion),await logger[_0x52d30a(0x1f6)]('Network\x20Interfaces:',_0x163ad7);}function startSocket(){const _0x548919=_0x183dae;io['on'](_0x548919(0x1a7),_0x2ddb6c=>{const _0x49e0cb=_0x548919;let _0x255450,_0x544d19,_0x349c1e,_0x27cfbc,_0x5cb80e;const _0x36146a=_0x2ddb6c[_0x49e0cb(0x202)][_0x49e0cb(0x2ca)][_0x49e0cb(0x13c)];_0x544d19=_0x36146a['match'](/bot[0-9]{3}/);if(_0x544d19)_0x349c1e=_0x544d19[0x0][_0x49e0cb(0x2cd)](/[0-9]{3}/);if(_0x349c1e)_0x255450=_0x349c1e[0x0];else _0x255450=_0x49e0cb(0x2bb);const _0x44fe09=_0x2ddb6c[_0x49e0cb(0x202)][_0x49e0cb(0x215)][_0x49e0cb(0x21b)];if(!_0x44fe09)_0x2ddb6c[_0x49e0cb(0x14c)](_0x49e0cb(0x286),{'publicKey':secure[_0x49e0cb(0x2f4)]});else{_0x27cfbc=timelyDecrypt(_0x44fe09,![]);if(!_0x27cfbc)_0x2ddb6c[_0x49e0cb(0x14c)]('status',{'publicKey':secure[_0x49e0cb(0x2f4)]});else{_0x5cb80e=normalizeIP(_0x2ddb6c[_0x49e0cb(0xf7)][_0x49e0cb(0x1ce)])[_0x49e0cb(0x294)];if(!devices[_0x27cfbc])devices[_0x27cfbc]={'uuid':_0x27cfbc,'access':{'token':null}};devices[_0x27cfbc]['ip']=_0x5cb80e;const _0x13dd55=addClient(_0x2ddb6c['id'],_0x27cfbc,_0x255450);setAccess(_0x13dd55),emitMessages(),_0x2ddb6c['on'](_0x49e0cb(0x2d6),_0x3f7b19=>{const _0xfefd2b=_0x49e0cb,_0xba4caf=timelyDecrypt(_0x3f7b19[_0xfefd2b(0x305)],!![],_0xfefd2b(0x163));if(_0xba4caf){_0x3f7b19={'username':_0x3f7b19[_0xfefd2b(0x1c8)],'password':_0xba4caf},devices[_0x27cfbc][_0xfefd2b(0x156)]=validateCredentials(_0x3f7b19,_0x27cfbc);if(devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x248)]==![]&&devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x211)]==_0xfefd2b(0x192))_0x2ddb6c[_0xfefd2b(0x14c)](_0xfefd2b(0x286),{'access':devices[_0x27cfbc][_0xfefd2b(0x156)]}),loginAccess2FA(_0x27cfbc,_0x5cb80e);else{if(devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x248)]==![]&&devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x211)]==_0xfefd2b(0x262))_0x2ddb6c['emit'](_0xfefd2b(0x286),{'access':devices[_0x27cfbc]['access']});else devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x248)]&&devices[_0x27cfbc][_0xfefd2b(0x156)][_0xfefd2b(0x211)]==_0xfefd2b(0x24c)&&(getClientsWithUuid(_0x27cfbc)[_0xfefd2b(0x14f)](_0x45bdf5=>{setAccess(_0x45bdf5);}),logger[_0xfefd2b(0x1f6)](_0xfefd2b(0x292)+_0x27cfbc[_0xfefd2b(0x29c)](-0x8)),setTokenRefresh(_0x27cfbc),setSessionTimeout(_0xfefd2b(0x2d6),_0x27cfbc));}}else logger[_0xfefd2b(0x26e)](_0xfefd2b(0x1ca));}),_0x2ddb6c['on'](_0x49e0cb(0x12f),()=>{resetPassword();}),_0x2ddb6c['on'](_0x49e0cb(0x2f1),_0x59c7d9=>{removeClient(_0x2ddb6c['id']);}),_0x255450=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x815308){const _0x30d8c4=_0x183dae;if(_0x815308!=_0x30d8c4(0x2bb)&&config['apiKey']!=''){if(pid[_0x815308])pid[_0x815308][_0x30d8c4(0x25c)]({'function':_0x30d8c4(0x1c7),'args':null});}_0x815308!=_0x30d8c4(0x2bb)&&broadcastToBots(_0x30d8c4(0x29d),JSON[_0x30d8c4(0x1e3)](config));}function reloadBotManager(){getClientsWithBotID('botmanager')['forEach'](_0x2cb969=>{const _0x21ecff=_0x15c7;getSocket(_0x2cb969['id'])[_0x21ecff(0x14c)](_0x21ecff(0x286),{'access':{'allow':![],'reason':_0x21ecff(0x283),'token':null}});});}function getSocket(_0x24ef0d){const _0x4cdf01=_0x183dae,_0x249a61=io[_0x4cdf01(0x2ea)]['get']('/');return _0x249a61['sockets'][_0x4cdf01(0x217)](_0x24ef0d);}function setAccess(_0x144423){const _0x41f167=_0x183dae,_0xdcbaef=getSocket(_0x144423['id']),_0x3926e7=_0x144423[_0x41f167(0x1ab)],_0x1b5662=_0x144423['bot'];devices[_0x3926e7][_0x41f167(0x156)]=validateAccess(devices[_0x3926e7][_0x41f167(0x156)][_0x41f167(0x2c4)],_0x3926e7),logger['debug'](_0x41f167(0x2b3)+devices[_0x3926e7]['access'][_0x41f167(0x211)]+_0x41f167(0x16d)+_0x144423['id'][_0x41f167(0x29c)](-0x8)+_0x41f167(0x25e)+_0x3926e7[_0x41f167(0x29c)](-0x8)),_0xdcbaef['join'](_0x3926e7);if(devices[_0x3926e7]['access']['allow']){_0xdcbaef[_0x41f167(0x250)](_0x1b5662);if(_0x1b5662==_0x41f167(0x2bb))initializeSocketBotManager(_0xdcbaef);else initializeSocketBot(_0xdcbaef);initClient(_0x1b5662);}devices[_0x3926e7][_0x41f167(0x156)][_0x41f167(0x2c4)]&&devices[_0x3926e7][_0x41f167(0x156)][_0x41f167(0x211)]==_0x41f167(0x2a3)&&setSessionTimeout('2FA',_0x3926e7),devices[_0x3926e7]['access'][_0x41f167(0x2c4)]&&devices[_0x3926e7][_0x41f167(0x156)]['reason']=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x3926e7),_0xdcbaef['emit']('status',{'status':_0x144423['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3926e7][_0x41f167(0x156)],'externalip':devices[_0x3926e7]['ip'],'publicKey':secure[_0x41f167(0x2f4)],'userid':settings[_0x41f167(0x11e)],'validInstallation':validInstallation}),devices[_0x3926e7][_0x41f167(0x156)][_0x41f167(0x248)]==![]&&devices[_0x3926e7][_0x41f167(0x156)]['reason']==_0x41f167(0x172)&&temporaryAccess2FA(_0x3926e7,devices[_0x3926e7]['ip']);}function setSessionTimeout(_0x523d87,_0x3835fe){const _0xb5b47d=_0x183dae;let _0x1f0627;if(_0x523d87==_0xb5b47d(0x2d6))_0x1f0627=loginExpiry*0x3c*0x3e8;else _0x1f0627=devices[_0x3835fe][_0xb5b47d(0x2ec)][_0xb5b47d(0x105)]*0x3c*0x3e8-(new Date()[_0xb5b47d(0x2a7)]()-devices[_0x3835fe][_0xb5b47d(0x2ec)][_0xb5b47d(0x221)]);if(devices[_0x3835fe][_0xb5b47d(0x20d)])clearTimeout(devices[_0x3835fe][_0xb5b47d(0x20d)]);devices[_0x3835fe][_0xb5b47d(0x20d)]=setTimeout(()=>{const _0x4a884d=_0xb5b47d;if(devices[_0x3835fe]['pidRefreshToken'])clearTimeout(devices[_0x3835fe][_0x4a884d(0x22d)]);removeSocketListeners(_0x3835fe),addBlacklist(_0x3835fe),devices[_0x3835fe][_0x4a884d(0x2ec)]=null,devices[_0x3835fe][_0x4a884d(0x2dd)]=null,devices[_0x3835fe]['access'][_0x4a884d(0x2c4)]=null,logger[_0x4a884d(0x1f6)](_0x4a884d(0x238)+_0x3835fe[_0x4a884d(0x29c)](-0x8)),devices[_0x3835fe][_0x4a884d(0x156)]=validateAccess(devices[_0x3835fe][_0x4a884d(0x156)][_0x4a884d(0x2c4)],_0x3835fe),!(devices[_0x3835fe][_0x4a884d(0x156)][_0x4a884d(0x248)]&&devices[_0x3835fe][_0x4a884d(0x156)][_0x4a884d(0x211)]==_0x4a884d(0x184))&&(_0x523d87==_0x4a884d(0x2d6)?io['to'](_0x3835fe)[_0x4a884d(0x14c)](_0x4a884d(0x286),{'access':{'allow':![],'reason':_0x4a884d(0x150),'token':null}}):io['to'](_0x3835fe)['emit'](_0x4a884d(0x286),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x3835fe][_0x4a884d(0x156)]['token']=null;},_0x1f0627);}function setTokenRefresh(_0x380c01){const _0x248242=_0x183dae;if(devices[_0x380c01][_0x248242(0x22d)])clearTimeout(devices[_0x380c01][_0x248242(0x22d)]);devices[_0x380c01]['pidRefreshToken']=setTimeout(()=>{const _0x969979=_0x248242;getClientsWithUuid(_0x380c01)[_0x969979(0x2b1)]!=0x0?(devices[_0x380c01][_0x969979(0x156)]=refreshToken(_0x380c01),io['to'](_0x380c01)['emit'](_0x969979(0x286),{'status':_0x969979(0x191),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x380c01][_0x969979(0x156)],'externalip':devices[_0x380c01]['ip'],'publicKey':secure[_0x969979(0x2f4)],'validInstallation':validInstallation}),setTokenRefresh(_0x380c01)):clearTimeout(devices[_0x380c01][_0x969979(0x22d)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1d100b){const _0x209a77=_0x183dae,_0x4f0830=getClient(_0x1d100b['id'])[_0x209a77(0x1ab)];_0x1d100b[_0x209a77(0x14c)]('bots',config),_0x1d100b[_0x209a77(0x14c)]('settings',cleanSettings()),_0x1d100b['on'](_0x209a77(0x151),_0x5c0c8d=>{const _0x1fa4c0=_0x209a77;if(validateAccess(_0x5c0c8d,_0x4f0830)[_0x1fa4c0(0x248)])addBot();else logger['full'](_0x1fa4c0(0x1af));}),_0x1d100b['on']('update-bot',(_0x2b51e3,_0x5d4057)=>{const _0x2a062e=_0x209a77;if(validateAccess(_0x5d4057,_0x4f0830)[_0x2a062e(0x248)])toggleBot(_0x2b51e3['botID'],_0x2b51e3[_0x2a062e(0x286)],_0x2b51e3['live']);else logger[_0x2a062e(0x26e)](_0x2a062e(0xf1));}),_0x1d100b['on'](_0x209a77(0x26b),(_0x4e3bb2,_0xe05e4b)=>{const _0x550b40=_0x209a77;if(validateAccess(_0xe05e4b,_0x4f0830)[_0x550b40(0x248)])toggleBotMode(_0x4e3bb2);else logger[_0x550b40(0x26e)](_0x550b40(0xf1));}),_0x1d100b['on'](_0x209a77(0x1de),(_0x5b5004,_0x38aea5)=>{const _0x32bc61=_0x209a77;if(validateAccess(_0x38aea5,_0x4f0830)[_0x32bc61(0x248)])deleteBot(_0x5b5004);else logger[_0x32bc61(0x26e)](_0x32bc61(0x138));}),_0x1d100b['on'](_0x209a77(0x27d),(_0x573098,_0x4c9199)=>{const _0x3d7088=_0x209a77;if(validateAccess(_0x4c9199,_0x4f0830)[_0x3d7088(0x248)])storeSettings(_0x573098,!![]);else logger[_0x3d7088(0x26e)](_0x3d7088(0x25d));}),_0x1d100b['on'](_0x209a77(0x22c),_0x3e73c4=>{const _0x2b4758=_0x209a77;if(validateAccess(_0x3e73c4,_0x4f0830)[_0x2b4758(0x248)])updateBB(_0x2b4758(0x160));else logger[_0x2b4758(0x26e)](_0x2b4758(0x249));}),_0x1d100b['on']('reinstall-bb',_0x4cd1fa=>{const _0x3fa23c=_0x209a77;if(validateAccess(_0x4cd1fa,_0x4f0830)[_0x3fa23c(0x248)])updateBB(_0x3fa23c(0x1ae));else logger[_0x3fa23c(0x26e)](_0x3fa23c(0x1dc));}),_0x1d100b['on'](_0x209a77(0x196),_0x35bc38=>{const _0x38236f=_0x209a77;if(validateAccess(_0x35bc38,_0x4f0830)[_0x38236f(0x248)]){const _0x5d1a7a=getClient(_0x1d100b['id']);if(_0x5d1a7a)getBackupFiles(_0x5d1a7a[_0x38236f(0x1ab)]);else logger['full'](_0x38236f(0x1e8));}else logger[_0x38236f(0x26e)](_0x38236f(0x290));}),_0x1d100b['on']('restore-backup-file',(_0x5ec0e0,_0x2a13e8)=>{const _0x2ff9ef=_0x209a77;if(validateAccess(_0x2a13e8,_0x4f0830)['allow'])restoreBackupFile(_0x5ec0e0);else logger[_0x2ff9ef(0x26e)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x1d100b['on'](_0x209a77(0x30d),_0x498805=>{const _0x34ec9e=_0x209a77;if(validateAccess(_0x498805,_0x4f0830)['allow'])getMessages();else logger[_0x34ec9e(0x26e)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x1d100b['on'](_0x209a77(0x252),(_0x501933,_0x2d6db9)=>{const _0x493ce7=_0x209a77;if(validateAccess(_0x2d6db9,_0x4f0830)['allow'])confirmMessage(_0x501933);else logger['full'](_0x493ce7(0x174));}),_0x1d100b['on'](_0x209a77(0x10d),_0x57dabb=>{const _0x2ab5b8=_0x209a77;if(validateAccess(_0x57dabb,_0x4f0830)[_0x2ab5b8(0x248)]){if(devices[_0x4f0830][_0x2ab5b8(0x22d)])clearTimeout(devices[_0x4f0830]['pidRefreshToken']);if(devices[_0x4f0830][_0x2ab5b8(0x20d)])clearTimeout(devices[_0x4f0830][_0x2ab5b8(0x20d)]);removeSocketListeners(getClient(_0x1d100b['id'])['uuid']),addBlacklist(_0x4f0830),devices[_0x4f0830][_0x2ab5b8(0x2ec)]=null,devices[_0x4f0830][_0x2ab5b8(0x2dd)]=null,devices[_0x4f0830][_0x2ab5b8(0x156)][_0x2ab5b8(0x2c4)]=null,logger[_0x2ab5b8(0x1f6)](_0x2ab5b8(0x212)+_0x4f0830[_0x2ab5b8(0x29c)](-0x8)),io['to'](getClient(_0x1d100b['id'])['uuid'])[_0x2ab5b8(0x14c)](_0x2ab5b8(0x286),{'access':{'allow':![],'reason':_0x2ab5b8(0x1b7),'token':null}});}else logger[_0x2ab5b8(0x26e)](_0x2ab5b8(0x24e));});}function initializeSocketBot(_0xc46b75){const _0x594390=_0x183dae,_0x478b2e=getClient(_0xc46b75['id'])[_0x594390(0x1a0)],_0x2390cd=getClient(_0xc46b75['id'])['uuid'];_0xc46b75['on'](_0x594390(0x139),(_0x32e0ff,_0x1c22e1)=>{const _0x150b38=_0x594390;if(validateAccess(_0x1c22e1,_0x2390cd)[_0x150b38(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x150b38(0x25c)]({'function':_0x150b38(0x23d),'args':_0x32e0ff});}else logger[_0x150b38(0x26e)](_0x150b38(0x2ff));}),_0xc46b75['on'](_0x594390(0x261),(_0x1d6e68,_0x316916)=>{const _0x629b58=_0x594390;if(validateAccess(_0x316916,_0x2390cd)['allow']){if(pid[_0x478b2e])pid[_0x478b2e][_0x629b58(0x25c)]({'function':_0x629b58(0x289),'args':_0x1d6e68});}else logger[_0x629b58(0x26e)](_0x629b58(0x205));}),_0xc46b75['on']('get-portfolio',(_0x254aa1,_0x1052b4)=>{const _0x6f059e=_0x594390;if(validateAccess(_0x1052b4,_0x2390cd)[_0x6f059e(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x6f059e(0x25c)]({'function':_0x6f059e(0x22b),'args':_0x254aa1});}else logger[_0x6f059e(0x26e)](_0x6f059e(0x1cd));}),_0xc46b75['on'](_0x594390(0x2de),(_0x11835a,_0x286a3d)=>{const _0x53138a=_0x594390;if(validateAccess(_0x286a3d,_0x2390cd)['allow']){if(pid[_0x478b2e])pid[_0x478b2e]['send']({'function':_0x53138a(0x2db),'args':_0x11835a});}else logger[_0x53138a(0x26e)](_0x53138a(0x2b2));}),_0xc46b75['on'](_0x594390(0x109),(_0x321212,_0x575997)=>{const _0x25cdd3=_0x594390;if(validateAccess(_0x575997,_0x2390cd)[_0x25cdd3(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x25cdd3(0x25c)]({'function':_0x25cdd3(0x23f),'args':_0x321212});}else logger[_0x25cdd3(0x26e)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0xc46b75['on'](_0x594390(0x13d),(_0x8d4c8c,_0x5e53bd)=>{const _0x58d4df=_0x594390;if(validateAccess(_0x5e53bd,_0x2390cd)[_0x58d4df(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e]['send']({'function':_0x58d4df(0x1b1),'args':_0x8d4c8c});}else logger[_0x58d4df(0x26e)](_0x58d4df(0x1d3));}),_0xc46b75['on']('reset-history',_0x5e9f35=>{const _0x34d2ca=_0x594390;if(validateAccess(_0x5e9f35,_0x2390cd)[_0x34d2ca(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x34d2ca(0x25c)]({'function':_0x34d2ca(0x1c9),'args':null});}else logger['full'](_0x34d2ca(0x100));}),_0xc46b75['on'](_0x594390(0x1e7),_0x354585=>{const _0x2baef9=_0x594390;if(validateAccess(_0x354585,_0x2390cd)[_0x2baef9(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x2baef9(0x25c)]({'function':_0x2baef9(0x1c1),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0xc46b75['on'](_0x594390(0x170),(_0x5921e6,_0x1e974e)=>{const _0x1aa6de=_0x594390;if(validateAccess(_0x1e974e,_0x2390cd)[_0x1aa6de(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e]['send']({'function':_0x1aa6de(0x111),'args':_0x5921e6});}else logger[_0x1aa6de(0x26e)](_0x1aa6de(0x284));}),_0xc46b75['on'](_0x594390(0x142),_0x3c9d59=>{const _0x4c37a8=_0x594390;if(validateAccess(_0x3c9d59,_0x2390cd)[_0x4c37a8(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e][_0x4c37a8(0x25c)]({'function':_0x4c37a8(0x2e9),'args':null});}else logger[_0x4c37a8(0x26e)](_0x4c37a8(0x177));}),_0xc46b75['on'](_0x594390(0x2a0),_0x595117=>{const _0x26b761=_0x594390;if(validateAccess(_0x595117,_0x2390cd)[_0x26b761(0x248)]){if(pid[_0x478b2e])pid[_0x478b2e]['send']({'function':_0x26b761(0x1bc),'args':null});}else logger[_0x26b761(0x26e)](_0x26b761(0x17f));}),_0xc46b75['on'](_0x594390(0x22c),_0x27cf63=>{const _0x161b25=_0x594390;if(validateAccess(_0x27cf63,_0x2390cd)[_0x161b25(0x248)])updateBB(_0x161b25(0x160));else logger[_0x161b25(0x26e)](_0x161b25(0x249));}),_0xc46b75['on']('get-messages',_0x26a28a=>{const _0x259e4b=_0x594390;if(validateAccess(_0x26a28a,_0x2390cd)[_0x259e4b(0x248)])getMessages();else logger[_0x259e4b(0x26e)](_0x259e4b(0x2a2));}),_0xc46b75['on'](_0x594390(0x252),(_0x6dbf9f,_0x6afe50)=>{const _0x58b039=_0x594390;if(validateAccess(_0x6afe50,_0x2390cd)[_0x58b039(0x248)])confirmMessage(_0x6dbf9f);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0xc46b75['on'](_0x594390(0x10d),_0x31c247=>{const _0x41d71e=_0x594390;if(validateAccess(_0x31c247,_0x2390cd)[_0x41d71e(0x248)]){if(devices[_0x2390cd][_0x41d71e(0x22d)])clearTimeout(devices[_0x2390cd][_0x41d71e(0x22d)]);if(devices[_0x2390cd][_0x41d71e(0x20d)])clearTimeout(devices[_0x2390cd][_0x41d71e(0x20d)]);removeSocketListeners(getClient(_0xc46b75['id'])[_0x41d71e(0x1ab)]),addBlacklist(_0x2390cd),devices[_0x2390cd][_0x41d71e(0x2ec)]=null,devices[_0x2390cd]['telegram2FaApproval']=null,devices[_0x2390cd][_0x41d71e(0x156)][_0x41d71e(0x2c4)]=null,logger[_0x41d71e(0x1f6)](_0x41d71e(0x212)+_0x2390cd['slice'](-0x8)),io['to'](getClient(_0xc46b75['id'])[_0x41d71e(0x1ab)])['emit'](_0x41d71e(0x286),{'access':{'allow':![],'reason':_0x41d71e(0x1b7),'token':null}});}else logger[_0x41d71e(0x26e)](_0x41d71e(0x24e));});}function removeSocketListeners(_0x1a5e16){const _0x175fc2=_0x183dae;getClientsWithUuid(_0x1a5e16)[_0x175fc2(0x14f)](_0x9871ed=>{const _0x47dda3=_0x175fc2;getSocket(_0x9871ed['id'])[_0x47dda3(0x2cc)]();});}function cleanSettings(){const _0x4bde57=_0x183dae;let _0x577096=settings;return settings['telegramToken']&&settings[_0x4bde57(0x23e)]!=''&&(_0x577096={..._0x577096,'telegramToken':_0x4bde57(0x27b)}),settings['bbPassword']&&settings[_0x4bde57(0x2ee)]!=''&&(_0x577096={..._0x577096,'bbPassword':_0x4bde57(0x27b)}),settings['marketcapApi']&&settings['marketcapApi']!=''&&(_0x577096={..._0x577096,'marketcapApi':_0x4bde57(0x27b)}),(settings[_0x4bde57(0x2ee)]&&settings[_0x4bde57(0x2ee)]==_0x4bde57(0x1f7)||settings[_0x4bde57(0x23e)]&&settings[_0x4bde57(0x23e)]==_0x4bde57(0x1f7)||settings['marketcapApi']&&settings[_0x4bde57(0x136)]==_0x4bde57(0x1f7))&&(_0x577096={..._0x577096,'restored':{'password':settings['bbPassword']==_0x4bde57(0x1f7),'telegram':settings[_0x4bde57(0x23e)]==_0x4bde57(0x1f7),'marketcap':settings['marketcapApi']=='***'}}),_0x577096;}async function updateBB(_0x4b1f16){const _0x3c5fea=_0x183dae;await backupConfigFiles(),installingUpdate=!![],config[_0x3c5fea(0x14f)](_0x381272=>{const _0x323139=_0x3c5fea;restartBot(_0x381272[_0x323139(0x2a8)]);});if(_0x4b1f16=='update')process[_0x3c5fea(0x25c)]({'update':!![],'environment':environment},_0x3c7bb4=>{});else _0x4b1f16==_0x3c5fea(0x1ae)&&process['send']({'reinstall':!![],'environment':environment},_0x295eb9=>{});}function startBot(_0x5d4662,_0x11ff63,_0x54cf7b){const _0xbf9faa=_0x183dae;if(debugging)_0x5d4662['push']('-d');let _0x1b9b73=![];const _0x576a26=_0x5d4662[0x0];_0x11ff63={..._0x11ff63,'stdio':['inherit',_0xbf9faa(0x180),'inherit',_0xbf9faa(0x246)]},pid[_0x576a26]=childProcess[_0xbf9faa(0x2f3)](botfile,_0x5d4662,_0x11ff63),pid[_0x576a26]['on'](_0xbf9faa(0x2eb),_0x58db63=>{const _0x561bc3=_0xbf9faa;switch(Object[_0x561bc3(0x247)](_0x58db63)[0x0]){case _0x561bc3(0x2e2):updateBotName(_0x576a26,_0x58db63['botname']);break;case _0x561bc3(0x225):updateBotManager();break;case _0x561bc3(0x286):updateStatus(_0x576a26,_0x58db63[_0x561bc3(0x286)]);break;case _0x561bc3(0x1b6):updateLive(_0x576a26,_0x58db63[_0x561bc3(0x1b6)]);break;case'started':updateLive(_0x576a26,_0x58db63['started']),io['to'](_0x576a26)[_0x561bc3(0x14c)](_0x561bc3(0x286),{'access':{'allow':![],'reason':_0x561bc3(0x283),'token':null}});break;case _0x561bc3(0x20a):_0x58db63[_0x561bc3(0x20a)]==_0x561bc3(0x2a6)&&restartBot(_0x576a26);_0x58db63['stop']==_0x561bc3(0x303)&&toggleBot(_0x576a26,_0x561bc3(0x149),'stopped');break;case _0x561bc3(0x20f):sendTelegramBot(_0x576a26,_0x58db63[_0x561bc3(0x20f)]);break;case _0x561bc3(0x2ba):sendTelegramMsg(_0x58db63[_0x561bc3(0x2ba)]);break;case _0x561bc3(0x1f1):io['to'](_0x576a26)[_0x561bc3(0x14c)](_0x58db63[_0x561bc3(0x1f1)],_0x58db63[_0x561bc3(0x133)]);break;}}),pid[_0x576a26]['on'](_0xbf9faa(0x194),function(_0x33711e){if(_0x1b9b73)return;_0x1b9b73=!![],_0x54cf7b(_0x33711e);}),pid[_0x576a26]['on'](_0xbf9faa(0x259),async function(_0x5d8548){const _0x46c5cf=_0xbf9faa;if(terminating)return;if(installingUpdate){io[_0x46c5cf(0x2a5)]();return;}if(_0x1b9b73)return;_0x1b9b73=!![],_0x54cf7b(null);const _0x584467=dbConfig['get'](_0x46c5cf(0x29d))[_0x46c5cf(0x230)]({'botID':_0x576a26})['value']();_0x584467&&(_0x584467[_0x46c5cf(0x286)]==_0x46c5cf(0x296)||_0x584467['status']==_0x46c5cf(0x10a))&&(await sleep(0x3e8),updateLive(_0x576a26,_0x46c5cf(0x1d7)),logger[_0x46c5cf(0x26e)]('Restarting\x20Bot\x20'+_0x576a26),startBot([_0x576a26,userID],{'cwd':bbpath},function(_0x352641){if(_0x352641)logger['full'](_0x352641);}));});}function stopBot(_0xa30808){getClientsWithBotID(_0xa30808)['forEach'](_0x235bb5=>{const _0x248b24=_0x15c7;getSocket(_0x235bb5['id'])[_0x248b24(0x2f1)](!![]),removeClient(_0x235bb5['id']);}),pid[_0xa30808]&&(pid[_0xa30808]['kill'](),pid[_0xa30808]=null);}function stopAllBots(){const _0x4c4181=_0x183dae;terminating=!![];const _0x4885a4=getEnabledBots();_0x4885a4[_0x4c4181(0x14f)](_0x229662=>{const _0x573b70=_0x4c4181;stopBot(_0x229662[_0x573b70(0x2a8)]);});}function restartBot(_0x118801){if(pid[_0x118801])pid[_0x118801]['kill']();}function addBot(){const _0x2ef38e=_0x183dae;let _0x205ac3;for(let _0x4af5f6=0x1;_0x4af5f6<0x3e9;_0x4af5f6++){_0x205ac3=_0x4af5f6['toString']()[_0x2ef38e(0x1cb)](0x3,'0');let _0x4c9b21=config[_0x2ef38e(0x230)](_0x11c222=>_0x11c222[_0x2ef38e(0x2a8)]==_0x205ac3);if(!_0x4c9b21)break;}if(_0x205ac3===_0x2ef38e(0x30a)){logger[_0x2ef38e(0x26e)](_0x2ef38e(0x1ec));return;}logger['full'](_0x2ef38e(0x1cf)+_0x205ac3),dbConfig[_0x2ef38e(0x217)](_0x2ef38e(0x29d))['push']({'botID':_0x205ac3,'botname':_0x2ef38e(0x242)+_0x205ac3,'status':'new','live':''})[_0x2ef38e(0x18d)](),startBot([_0x205ac3,userID],{'cwd':bbpath},function(_0x543eb3){const _0x2eefad=_0x2ef38e;if(_0x543eb3)logger[_0x2eefad(0x26e)](_0x543eb3);}),config=getConfiguration(),io['to'](_0x2ef38e(0x2bb))[_0x2ef38e(0x14c)](_0x2ef38e(0x29d),config),broadcastToBots(_0x2ef38e(0x29d),JSON['stringify'](config));}function deleteBot(_0x5db939){const _0x460948=_0x183dae;getClientsWithBotID(_0x5db939)[_0x460948(0x14f)](_0x493efe=>{getSocket(_0x493efe['id'])['disconnect'](!![]),removeClient(_0x493efe['id']);}),dbConfig[_0x460948(0x217)](_0x460948(0x29d))[_0x460948(0x2d9)]({'botID':_0x5db939})[_0x460948(0x18d)](),logger[_0x460948(0x26e)]('Deleted\x20Bot\x20'+_0x5db939),stopBot(_0x5db939);try{if(fs[_0x460948(0x1c6)](path['join'](configpath,'bot-'+_0x5db939+_0x460948(0x123))))fs[_0x460948(0x1bf)](path[_0x460948(0x250)](configpath,_0x460948(0x18a)+_0x5db939+_0x460948(0x123)));if(fs[_0x460948(0x1c6)](path[_0x460948(0x250)](configpath,'bot-'+_0x5db939+_0x460948(0x2b0))))fs[_0x460948(0x1bf)](path[_0x460948(0x250)](configpath,_0x460948(0x18a)+_0x5db939+_0x460948(0x2b0)));if(fs[_0x460948(0x1c6)](path[_0x460948(0x250)](configpath,_0x460948(0x18a)+_0x5db939+'-performance.json')))fs['unlinkSync'](path[_0x460948(0x250)](configpath,'bot-'+_0x5db939+'-performance.json'));if(fs['existsSync'](path[_0x460948(0x250)](configpath,'bot-'+_0x5db939+_0x460948(0x125))))fs[_0x460948(0x1bf)](path['join'](configpath,_0x460948(0x18a)+_0x5db939+'-results.json'));}catch(_0x352f89){if(_0x352f89)logger[_0x460948(0x26e)](_0x460948(0x2ab),_0x352f89);}config=getConfiguration(),io['to'](_0x460948(0x2bb))[_0x460948(0x14c)](_0x460948(0x29d),config),broadcastToBots('bots',JSON[_0x460948(0x1e3)](config));}function toggleBot(_0x4b3568,_0x406c51,_0x255dff){const _0xa28d85=_0x183dae;dbConfig[_0xa28d85(0x217)]('bots')['find']({'botID':_0x4b3568})[_0xa28d85(0x1eb)]({'status':_0x406c51})['assign']({'live':_0x255dff})[_0xa28d85(0x18d)]();if(_0x406c51==_0xa28d85(0x296)||_0x406c51==_0xa28d85(0x10a))logger['full'](_0xa28d85(0x1f3)+_0x4b3568),startBot([_0x4b3568,userID],{'cwd':bbpath},function(_0x1c7121){if(_0x1c7121)logger['full'](_0x1c7121);});else(_0x406c51==_0xa28d85(0x149)||_0x406c51=='new-disabled')&&(logger[_0xa28d85(0x26e)](_0xa28d85(0xf9)+_0x4b3568),stopBot(_0x4b3568));config=getConfiguration(),io['to']('botmanager')[_0xa28d85(0x14c)](_0xa28d85(0x29d),config),broadcastToBots(_0xa28d85(0x29d),JSON[_0xa28d85(0x1e3)](config));}function toggleStatus(_0x55b298){const _0x4776cf=_0x183dae;let _0x55a795=dbConfig[_0x4776cf(0x217)](_0x4776cf(0x29d))[_0x4776cf(0x230)]({'botID':_0x55b298})[_0x4776cf(0x183)](),_0x308dde;if(_0x55a795[_0x4776cf(0x286)]===_0x4776cf(0x296))_0x308dde='disabled';else{if(_0x55a795[_0x4776cf(0x286)]===_0x4776cf(0x10a))_0x308dde=_0x4776cf(0x2fd);else{if(_0x55a795['status']===_0x4776cf(0x2fd))_0x308dde=_0x4776cf(0x10a);else{if(_0x55a795[_0x4776cf(0x286)]===_0x4776cf(0x149))_0x308dde='enabled';}}}return _0x308dde;}function updateStatus(_0x28a92d,_0x1e3485){const _0x5518d1=_0x183dae;dbConfig[_0x5518d1(0x217)](_0x5518d1(0x29d))[_0x5518d1(0x230)]({'botID':_0x28a92d})[_0x5518d1(0x1eb)]({'status':_0x1e3485})[_0x5518d1(0x18d)](),config=getConfiguration(),io['to'](_0x5518d1(0x2bb))['emit'](_0x5518d1(0x29d),config),broadcastToBots(_0x5518d1(0x29d),JSON['stringify'](config));}function updateLive(_0x4aece9,_0x143e6c){const _0x1682a7=_0x183dae;dbConfig[_0x1682a7(0x217)](_0x1682a7(0x29d))[_0x1682a7(0x230)]({'botID':_0x4aece9})['assign']({'live':_0x143e6c})[_0x1682a7(0x18d)](),config=getConfiguration(),io['to']('botmanager')[_0x1682a7(0x14c)](_0x1682a7(0x29d),config),broadcastToBots(_0x1682a7(0x29d),JSON['stringify'](config));}function updateBotName(_0x31c6ec,_0x7773ab){const _0x2a2a1a=_0x183dae;dbConfig[_0x2a2a1a(0x217)](_0x2a2a1a(0x29d))['find']({'botID':_0x31c6ec})[_0x2a2a1a(0x1eb)]({'botname':_0x7773ab})[_0x2a2a1a(0x18d)](),config=getConfiguration(),io['to'](_0x2a2a1a(0x2bb))[_0x2a2a1a(0x14c)](_0x2a2a1a(0x29d),config),broadcastToBots(_0x2a2a1a(0x29d),JSON[_0x2a2a1a(0x1e3)](config));}function updateBotManager(){const _0x2058bf=_0x183dae;config=getConfiguration(),io['to'](_0x2058bf(0x2bb))[_0x2058bf(0x14c)](_0x2058bf(0x29d),config),broadcastToBots(_0x2058bf(0x29d),JSON[_0x2058bf(0x1e3)](config));}function toggleBotMode(_0x1c61c5){const _0x34a276=_0x183dae;if(pid[_0x1c61c5])pid[_0x1c61c5][_0x34a276(0x25c)]({'function':_0x34a276(0x11b),'args':null});else{const _0x13850f=configpath+_0x34a276(0x18a)+_0x1c61c5+'-config.json',_0x3f5a5b=fs['readFileSync'](_0x13850f),_0x166c13=JSON[_0x34a276(0x171)](_0x3f5a5b),_0x16d67c=_0x166c13[_0x34a276(0x1a0)][0x0][_0x34a276(0x106)];_0x166c13['bot'][0x0][_0x34a276(0x106)]=!_0x16d67c;const _0x19d7ba=JSON[_0x34a276(0x1e3)](_0x166c13,null,0x2);fs[_0x34a276(0x2fa)](_0x13850f,_0x19d7ba),config=getConfiguration(),io['to'](_0x34a276(0x2bb))['emit'](_0x34a276(0x29d),config),broadcastToBots(_0x34a276(0x29d),JSON['stringify'](config));}}function validateTelegram(_0x3ec0c3){const _0x2217d8=_0x183dae;if(_0x3ec0c3['from']['username']!=settings[_0x2217d8(0x14a)]&&'@'+_0x3ec0c3[_0x2217d8(0x2d5)][_0x2217d8(0x1c8)]!=settings[_0x2217d8(0x14a)]||_0x3ec0c3[_0x2217d8(0x195)]['id']!=settings[_0x2217d8(0x2ed)])return sendTelegram(_0x3ec0c3['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2217d8(0x307)}),![];return!![];}async function initTelegram(){const _0x35463e=_0x183dae;tgBot&&(await tgBot[_0x35463e(0x20a)](),await sleep(0x7d0));tgBot=new Telegraf(settings[_0x35463e(0x23e)]);let _0x5531f0='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5531f0+='\x0a',_0x5531f0+=_0x35463e(0x113),_0x5531f0+=_0x35463e(0x257),_0x5531f0+=_0x35463e(0x200),_0x5531f0+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x5531f0+=_0x35463e(0x2d3),_0x5531f0+=_0x35463e(0x1a6),_0x5531f0+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x5531f0+=_0x35463e(0x201),_0x5531f0+=_0x35463e(0x129),_0x5531f0+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x5531f0+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x5531f0+=_0x35463e(0x222),_0x5531f0+=_0x35463e(0x168),_0x5531f0+=_0x35463e(0x1bb),_0x5531f0+=_0x35463e(0x218),_0x5531f0+=_0x35463e(0x2e1);let _0x206168=_0x35463e(0x24d);_0x206168+='\x0a',_0x206168+=_0x5531f0,tgBot[_0x35463e(0x20e)]((_0x2880fd,_0x4c2ef1)=>{const _0x3a7e06=_0x35463e;logger[_0x3a7e06(0x1f9)](getTimeStamp()+_0x3a7e06(0x1fd)),logger['debug'](_0x3a7e06(0x25f),_0x2880fd);}),tgBot[_0x35463e(0x1ba)](async(_0x3b3e90,_0x30a953)=>{const _0x490a78=_0x35463e;if(!(!settings['telegramChatId']&&_0x3b3e90['update']['message'][_0x490a78(0x1a2)]==_0x490a78(0x141))){if(!validateTelegram(_0x3b3e90))return;}_0x30a953();}),tgBot[_0x35463e(0x16a)](_0x35463e(0xfc),async _0x5ae1a9=>{const _0x209919=_0x35463e;if(_0x5ae1a9[_0x209919(0x2d5)][_0x209919(0x1c8)]==settings[_0x209919(0x14a)]||'@'+_0x5ae1a9[_0x209919(0x2d5)][_0x209919(0x1c8)]==settings[_0x209919(0x14a)]){if(!settings['telegramChatId'])updateSetting(_0x209919(0x2ed),_0x5ae1a9[_0x209919(0x195)]['id']);}if(!validateTelegram(_0x5ae1a9))return;updateSetting(_0x209919(0x1ef),!![]),await sendTelegram(_0x5ae1a9[_0x209919(0x195)]['id'],_0x206168);}),tgBot[_0x35463e(0x16a)](_0x35463e(0x276),async _0x270eb1=>{const _0x46956a=_0x35463e;updateSetting(_0x46956a(0x1ef),!![]),await sendTelegram(_0x270eb1[_0x46956a(0x195)]['id'],_0x46956a(0x29f));}),tgBot[_0x35463e(0x16a)](_0x35463e(0x2d1),async _0x505458=>{const _0x1e745a=_0x35463e;await sendTelegram(_0x505458[_0x1e745a(0x195)]['id'],_0x1e745a(0x104)),updateSetting('telegramEnabled',![]);}),tgBot[_0x35463e(0x16a)](_0x35463e(0x274),async _0x556896=>{const _0x5246dc=_0x35463e,_0xb0d60e=Markup[_0x5246dc(0x219)]([Markup[_0x5246dc(0x12b)][_0x5246dc(0x164)]('Orders',_0x5246dc(0x18c)),Markup[_0x5246dc(0x12b)][_0x5246dc(0x164)](_0x5246dc(0x26a),_0x5246dc(0x19d)),Markup[_0x5246dc(0x12b)][_0x5246dc(0x164)](_0x5246dc(0x166),_0x5246dc(0x278))]);_0x556896[_0x5246dc(0x1a5)](_0x5246dc(0xf3),_0xb0d60e);}),tgBot[_0x35463e(0x277)](_0x35463e(0x18c),async _0x1b41a2=>{const _0x393347=_0x35463e;_0x1b41a2['editMessageReplyMarkup'](),updateSetting(_0x393347(0x161),_0x393347(0x1e1)),updateSetting(_0x393347(0x1ef),!![]),await sendTelegram(_0x1b41a2[_0x393347(0x195)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0x35463e(0x277)]('config_alerts',async _0x259755=>{const _0x5715d2=_0x35463e;_0x259755['editMessageReplyMarkup'](),updateSetting(_0x5715d2(0x161),_0x5715d2(0x2cb)),updateSetting(_0x5715d2(0x1ef),!![]),await sendTelegram(_0x259755[_0x5715d2(0x195)]['id'],_0x5715d2(0x135));}),tgBot[_0x35463e(0x277)](_0x35463e(0x278),async _0xfeef8e=>{const _0xa29e44=_0x35463e;_0xfeef8e[_0xa29e44(0x1ed)](),updateSetting(_0xa29e44(0x161),_0xa29e44(0x20b)),updateSetting(_0xa29e44(0x1ef),!![]),await sendTelegram(_0xfeef8e[_0xa29e44(0x195)]['id'],_0xa29e44(0x1da));}),tgBot[_0x35463e(0x16a)](_0x35463e(0x286),async _0x3035e6=>{const _0x5cee32=_0x35463e,_0x565444=getBotsWithMode();let _0xade080=_0x5cee32(0x13b);config[_0x5cee32(0x14f)](_0x329ef2=>{const _0xde8ec1=_0x5cee32,_0x561807=_0x565444[_0xde8ec1(0x230)](_0xad0a15=>_0xad0a15[_0xde8ec1(0x2a8)]==_0x329ef2[_0xde8ec1(0x2a8)])[_0xde8ec1(0x13e)];_0xade080+=_0xde8ec1(0x242)+_0x329ef2[_0xde8ec1(0x2a8)]+':\x20'+_0x329ef2[_0xde8ec1(0x286)]+_0xde8ec1(0x2ae)+_0x561807+_0xde8ec1(0x2ae)+_0x329ef2[_0xde8ec1(0x1b6)]+'\x0a';}),_0xade080+='\x0a',_0xade080+=_0x5cee32(0x2c1),_0xade080+=!settings[_0x5cee32(0x1ef)]?_0x5cee32(0x157):_0x5cee32(0x1a9),_0xade080+=settings[_0x5cee32(0x1ef)]?settings[_0x5cee32(0x161)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x5cee32(0x21a)+settings[_0x5cee32(0x161)]+'\x20only\x0a':'',await sendTelegram(_0x3035e6[_0x5cee32(0x195)]['id'],_0xade080,{'parse_mode':_0x5cee32(0x307)});}),tgBot[_0x35463e(0x16a)](_0x35463e(0x2a6),async _0x4d1616=>{const _0x5973e1=_0x35463e,_0x18982f=getEnabledBots();if(_0x18982f[_0x5973e1(0x2b1)]==0x0)await sendTelegram(_0x4d1616[_0x5973e1(0x195)]['id'],_0x5973e1(0x2f9));else{if(_0x18982f[_0x5973e1(0x2b1)]>0x1)_0x18982f[_0x5973e1(0x2dc)]({'botID':_0x5973e1(0x20b)});let _0x67a47=[],_0x5d1ad3=[];const _0x4ba02c=_0x18982f[_0x5973e1(0x2b1)]%0x4==0x0||_0x18982f[_0x5973e1(0x2b1)]%0x4==0x3||_0x18982f[_0x5973e1(0x2b1)]%0x3==0x1?0x4:0x3;let _0x431e12=0x0;_0x18982f[_0x5973e1(0x14f)]((_0x51f23a,_0x30c368)=>{const _0x2141b7=_0x5973e1;if(_0x30c368%_0x4ba02c==0x0)_0x5d1ad3=[];_0x5d1ad3[_0x2141b7(0x2dc)](Markup['button'][_0x2141b7(0x164)](_0x51f23a[_0x2141b7(0x2a8)]==_0x2141b7(0x20b)?'All\x20bots':_0x2141b7(0x242)+_0x51f23a['botID'],'restart_'+_0x51f23a['botID'])),_0x30c368%_0x4ba02c==0x0&&(_0x67a47[_0x431e12]=_0x5d1ad3,_0x431e12++);});const _0x2c6751=Markup['inlineKeyboard'](_0x67a47);_0x4d1616[_0x5973e1(0x1a5)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0x2c6751);}}),tgBot[_0x35463e(0x277)](/restart_(.+)/,async _0x589656=>{const _0xb32700=_0x35463e,_0x276c1a=_0x589656['match'][0x1];_0x589656[_0xb32700(0x1ed)](),_0x276c1a==_0xb32700(0x20b)?config[_0xb32700(0x14f)](_0x47bcf0=>{restartBot(_0x47bcf0['botID']);}):restartBot(_0x276c1a);}),tgBot[_0x35463e(0x16a)]('on',async _0x1e2fe0=>{const _0x1a8974=_0x35463e,_0x3b8b7f=getDisabledBots();if(_0x3b8b7f[_0x1a8974(0x2b1)]==0x0)await sendTelegram(_0x1e2fe0[_0x1a8974(0x195)]['id'],_0x1a8974(0x298));else{if(_0x3b8b7f[_0x1a8974(0x2b1)]>0x1)_0x3b8b7f[_0x1a8974(0x2dc)]({'botID':_0x1a8974(0x20b)});let _0x1613fd=[],_0x19829a=[];const _0x193747=_0x3b8b7f[_0x1a8974(0x2b1)]%0x4==0x0||_0x3b8b7f[_0x1a8974(0x2b1)]%0x4==0x3||_0x3b8b7f[_0x1a8974(0x2b1)]%0x3==0x1?0x4:0x3;let _0x3f8082=0x0;_0x3b8b7f[_0x1a8974(0x14f)]((_0x207241,_0x2e5c78)=>{const _0x1f61fc=_0x1a8974;if(_0x2e5c78%_0x193747==0x0)_0x19829a=[];_0x19829a[_0x1f61fc(0x2dc)](Markup['button']['callback'](_0x207241[_0x1f61fc(0x2a8)]==_0x1f61fc(0x20b)?_0x1f61fc(0x24b):'Bot\x20'+_0x207241[_0x1f61fc(0x2a8)],_0x1f61fc(0x2d7)+_0x207241[_0x1f61fc(0x2a8)])),_0x2e5c78%_0x193747==0x0&&(_0x1613fd[_0x3f8082]=_0x19829a,_0x3f8082++);});const _0x1dc359=Markup[_0x1a8974(0x219)](_0x1613fd);_0x1e2fe0[_0x1a8974(0x1a5)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x1dc359);}}),tgBot[_0x35463e(0x277)](/on_(.+)/,async _0x560fcc=>{const _0x5cd4ec=_0x35463e,_0x5a9a5e=_0x560fcc[_0x5cd4ec(0x2cd)][0x1];_0x560fcc[_0x5cd4ec(0x1ed)]();if(_0x5a9a5e==_0x5cd4ec(0x20b)){const _0x1933b6=getDisabledBots();await sendTelegram(_0x560fcc['chat']['id'],_0x5cd4ec(0x13f)),_0x1933b6[_0x5cd4ec(0x14f)](_0x1cd2cd=>{const _0x185924=_0x5cd4ec;if(_0x1cd2cd[_0x185924(0x2a8)]!=_0x185924(0x20b))toggleBot(_0x1cd2cd['botID'],toggleStatus(_0x1cd2cd[_0x185924(0x2a8)]),_0x185924(0x1d7));});}else await sendTelegram(_0x560fcc['chat']['id'],_0x5cd4ec(0x297)+_0x5a9a5e),toggleBot(_0x5a9a5e,toggleStatus(_0x5a9a5e),_0x5cd4ec(0x1d7));}),tgBot[_0x35463e(0x16a)](_0x35463e(0x2f5),async _0x3ed2ee=>{const _0x19ffe2=_0x35463e,_0x297f8f=getEnabledBots();if(_0x297f8f[_0x19ffe2(0x2b1)]==0x0)await sendTelegram(_0x3ed2ee[_0x19ffe2(0x195)]['id'],_0x19ffe2(0x2f9));else{if(_0x297f8f[_0x19ffe2(0x2b1)]>0x1)_0x297f8f[_0x19ffe2(0x2dc)]({'botID':'all'});let _0x3fb27d=[],_0x2ec56d=[];const _0x297423=_0x297f8f[_0x19ffe2(0x2b1)]%0x4==0x0||_0x297f8f[_0x19ffe2(0x2b1)]%0x4==0x3||_0x297f8f[_0x19ffe2(0x2b1)]%0x3==0x1?0x4:0x3;let _0x480473=0x0;_0x297f8f[_0x19ffe2(0x14f)]((_0x37b6b6,_0x119cd5)=>{const _0x45a909=_0x19ffe2;if(_0x119cd5%_0x297423==0x0)_0x2ec56d=[];_0x2ec56d[_0x45a909(0x2dc)](Markup['button']['callback'](_0x37b6b6[_0x45a909(0x2a8)]==_0x45a909(0x20b)?_0x45a909(0x24b):_0x45a909(0x242)+_0x37b6b6[_0x45a909(0x2a8)],_0x45a909(0x285)+_0x37b6b6[_0x45a909(0x2a8)])),_0x119cd5%_0x297423==0x0&&(_0x3fb27d[_0x480473]=_0x2ec56d,_0x480473++);});const _0x4f110c=Markup[_0x19ffe2(0x219)](_0x3fb27d);_0x3ed2ee[_0x19ffe2(0x1a5)](_0x19ffe2(0x28e),_0x4f110c);}}),tgBot[_0x35463e(0x277)](/off_(.+)/,async _0x51c592=>{const _0x5ed49e=_0x35463e,_0x4ffe81=_0x51c592[_0x5ed49e(0x2cd)][0x1];_0x51c592['editMessageReplyMarkup']();if(_0x4ffe81==_0x5ed49e(0x20b)){const _0x249392=getEnabledBots();await sendTelegram(_0x51c592[_0x5ed49e(0x195)]['id'],_0x5ed49e(0x2c7)),_0x249392[_0x5ed49e(0x14f)](_0x538caf=>{const _0x46f20f=_0x5ed49e;if(_0x538caf[_0x46f20f(0x2a8)]!=_0x46f20f(0x20b))toggleBot(_0x538caf[_0x46f20f(0x2a8)],toggleStatus(_0x538caf[_0x46f20f(0x2a8)]),'stopped');});}else await sendTelegram(_0x51c592[_0x5ed49e(0x195)]['id'],_0x5ed49e(0x15d)+_0x4ffe81),toggleBot(_0x4ffe81,toggleStatus(_0x4ffe81),_0x5ed49e(0x1d7));}),tgBot['command'](_0x35463e(0x23b),async _0x376abf=>{const _0x35a896=_0x35463e,_0x4de118=getEnabledBots();if(_0x4de118[_0x35a896(0x2b1)]==0x0)await sendTelegram(_0x376abf[_0x35a896(0x195)]['id'],_0x35a896(0x2f9));else{if(_0x4de118[_0x35a896(0x2b1)]>0x1){let _0x1cdac8=[],_0x4aa59e=[];const _0x2806f7=_0x4de118[_0x35a896(0x2b1)]%0x4==0x0||_0x4de118[_0x35a896(0x2b1)]%0x4==0x3||_0x4de118[_0x35a896(0x2b1)]%0x3==0x1?0x4:0x3;let _0x3ec791=0x0;_0x4de118[_0x35a896(0x14f)]((_0x112431,_0x4901e7)=>{const _0x555d34=_0x35a896;if(_0x4901e7%_0x2806f7==0x0)_0x4aa59e=[];_0x4aa59e[_0x555d34(0x2dc)](Markup[_0x555d34(0x12b)][_0x555d34(0x164)](_0x555d34(0x242)+_0x112431['botID'],_0x555d34(0x107)+_0x112431['botID'])),_0x4901e7%_0x2806f7==0x0&&(_0x1cdac8[_0x3ec791]=_0x4aa59e,_0x3ec791++);});const _0x4ada74=Markup[_0x35a896(0x219)](_0x1cdac8);_0x376abf[_0x35a896(0x1a5)](_0x35a896(0x204),_0x4ada74);}else{const _0xf4c00f=_0x4de118[0x0][_0x35a896(0x2a8)];if(pid[_0xf4c00f])pid[_0xf4c00f][_0x35a896(0x25c)]({'function':_0x35a896(0x308),'args':null});}}}),tgBot[_0x35463e(0x277)](/metrics_(.+)/,async _0x53e4a9=>{const _0x2da829=_0x35463e,_0x116dca=_0x53e4a9[_0x2da829(0x2cd)][0x1];_0x53e4a9['editMessageReplyMarkup']();if(pid[_0x116dca])pid[_0x116dca][_0x2da829(0x25c)]({'function':_0x2da829(0x308),'args':null});}),tgBot[_0x35463e(0x16a)](_0x35463e(0xfb),async _0x127ce8=>{const _0x1d672e=_0x35463e,_0x2dd7d5=getEnabledBots();if(_0x2dd7d5[_0x1d672e(0x2b1)]==0x0)await sendTelegram(_0x127ce8['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x2dd7d5['length']>0x1){let _0xb2938=[],_0x23872c=[];const _0x1d0930=_0x2dd7d5[_0x1d672e(0x2b1)]%0x4==0x0||_0x2dd7d5[_0x1d672e(0x2b1)]%0x4==0x3||_0x2dd7d5[_0x1d672e(0x2b1)]%0x3==0x1?0x4:0x3;let _0x19afbe=0x0;_0x2dd7d5[_0x1d672e(0x14f)]((_0x3c4d98,_0xfb2cd7)=>{const _0x1d726e=_0x1d672e;if(_0xfb2cd7%_0x1d0930==0x0)_0x23872c=[];_0x23872c[_0x1d726e(0x2dc)](Markup[_0x1d726e(0x12b)][_0x1d726e(0x164)](_0x1d726e(0x242)+_0x3c4d98[_0x1d726e(0x2a8)],_0x1d726e(0x10f)+_0x3c4d98[_0x1d726e(0x2a8)])),_0xfb2cd7%_0x1d0930==0x0&&(_0xb2938[_0x19afbe]=_0x23872c,_0x19afbe++);});const _0x2dfe71=Markup[_0x1d672e(0x219)](_0xb2938);_0x127ce8[_0x1d672e(0x1a5)](_0x1d672e(0x26f),_0x2dfe71);}else{const _0xbad12c=_0x2dd7d5[0x0][_0x1d672e(0x2a8)];if(pid[_0xbad12c])pid[_0xbad12c][_0x1d672e(0x25c)]({'function':_0x1d672e(0x1b2),'args':null});}}}),tgBot[_0x35463e(0x277)](/portfolio_(.+)/,async _0x501d01=>{const _0x51a162=_0x35463e,_0x1bad43=_0x501d01['match'][0x1];_0x501d01[_0x51a162(0x1ed)]();if(pid[_0x1bad43])pid[_0x1bad43]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot['command'](_0x35463e(0xff),async _0x4c723d=>{const _0x11a2ba=_0x35463e,_0x540f3d='logs';await zipFiles(_0x540f3d);const _0x3d17a9=zippath+(_0x540f3d+_0x11a2ba(0x2e8));_0x4c723d[_0x11a2ba(0x198)]({'source':_0x3d17a9})[_0x11a2ba(0x101)](()=>{})[_0x11a2ba(0x20e)](_0x4117ba=>logger[_0x11a2ba(0x1f6)]('Error\x20sending\x20'+_0x540f3d+'\x20files\x20over\x20Telegram:',_0x4117ba));}),tgBot[_0x35463e(0x16a)]('backup',async _0x4704b0=>{const _0xbec723=_0x35463e,_0x2780be=_0xbec723(0x137);await backupConfigFiles(),await zipFiles(_0x2780be);const _0xba82a2=zippath+(_0x2780be+_0xbec723(0x2e8));_0x4704b0[_0xbec723(0x198)]({'source':_0xba82a2})[_0xbec723(0x101)](()=>{})['catch'](_0x107778=>logger['debug'](_0xbec723(0x2fc)+_0x2780be+_0xbec723(0x21c),_0x107778));}),tgBot[_0x35463e(0x16a)](_0x35463e(0x160),async _0x19b47f=>{const _0x20d47d=_0x35463e;await getMessages();if(!updateAvailable)await sendTelegram(_0x19b47f[_0x20d47d(0x195)]['id'],_0x20d47d(0x159));else{if(!validInstallation)await sendTelegram(_0x19b47f[_0x20d47d(0x195)]['id'],_0x20d47d(0x2ef));else{const _0x23cd0f=Markup[_0x20d47d(0x219)]([Markup[_0x20d47d(0x12b)][_0x20d47d(0x164)](_0x20d47d(0x1e4),'update_yes'),Markup[_0x20d47d(0x12b)][_0x20d47d(0x164)]('No','update_no')]);_0x19b47f['reply'](_0x20d47d(0x301),_0x23cd0f);}}}),tgBot['action'](/update_(.+)/,async _0x2568f3=>{const _0x552ba5=_0x35463e,_0x4be868=_0x2568f3[_0x552ba5(0x2cd)][0x1];_0x2568f3[_0x552ba5(0x1ed)](),_0x4be868==_0x552ba5(0x1b8)&&(await sendTelegram(_0x2568f3[_0x552ba5(0x195)]['id'],_0x552ba5(0x2e4)),updateBB(_0x552ba5(0x160))),_0x4be868=='no'&&await sendTelegram(_0x2568f3['chat']['id'],_0x552ba5(0x25b));}),tgBot[_0x35463e(0x16a)](_0x35463e(0x1ae),async _0x28d23c=>{const _0x184d52=_0x35463e;if(!validInstallation)await sendTelegram(_0x28d23c[_0x184d52(0x195)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x3e6e35=Markup['inlineKeyboard']([Markup[_0x184d52(0x12b)][_0x184d52(0x164)]('Yes','reinstall_yes'),Markup[_0x184d52(0x12b)][_0x184d52(0x164)]('No',_0x184d52(0x295))]);_0x28d23c[_0x184d52(0x1a5)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x3e6e35);}}),tgBot[_0x35463e(0x277)](/reinstall_(.+)/,async _0x37a9ab=>{const _0x31e047=_0x35463e,_0x175bc3=_0x37a9ab[_0x31e047(0x2cd)][0x1];_0x37a9ab[_0x31e047(0x1ed)](),_0x175bc3==_0x31e047(0x1b8)&&(await sendTelegram(_0x37a9ab[_0x31e047(0x195)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB('reinstall')),_0x175bc3=='no'&&await sendTelegram(_0x37a9ab['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot['command'](_0x35463e(0x1e2),async _0x57e876=>{const _0x171c7c=_0x35463e,_0x3eff38=getBotsWithMode();if(_0x3eff38[_0x171c7c(0x2b1)]==0x0)await sendTelegram(_0x57e876[_0x171c7c(0x195)]['id'],_0x171c7c(0x2f9));else{let _0x3c8400=[],_0xa36e3b=[];const _0x9b515e=0x2;let _0x5559a6=0x0;_0x3eff38['forEach']((_0x2195e2,_0x592789)=>{const _0x95be9=_0x171c7c;if(_0x592789%_0x9b515e==0x0)_0xa36e3b=[];_0xa36e3b[_0x95be9(0x2dc)](Markup[_0x95be9(0x12b)][_0x95be9(0x164)](_0x95be9(0x242)+_0x2195e2[_0x95be9(0x2a8)]+'\x20('+_0x2195e2[_0x95be9(0x13e)]+')',_0x95be9(0x2d0)+_0x2195e2['botID'])),_0x592789%_0x9b515e==0x0&&(_0x3c8400[_0x5559a6]=_0xa36e3b,_0x5559a6++);});const _0x1a0268=Markup[_0x171c7c(0x219)](_0x3c8400);_0x57e876[_0x171c7c(0x1a5)](_0x171c7c(0x18b),_0x1a0268);}}),tgBot[_0x35463e(0x277)](/toggle_(.+)/,async _0x274414=>{const _0x5187e1=_0x35463e,_0x422e4e=_0x274414['match'][0x1];_0x274414[_0x5187e1(0x1ed)]();const _0x135c91=getBotsWithMode(),_0x521585=_0x135c91[_0x5187e1(0x230)](_0x37c08e=>_0x37c08e[_0x5187e1(0x2a8)]==_0x422e4e),_0xd720c7=_0x521585[_0x5187e1(0x13e)]=='auto'?_0x5187e1(0x1d2):_0x5187e1(0x240);await sendTelegram(_0x274414[_0x5187e1(0x195)]['id'],_0x5187e1(0x2ac)+_0x422e4e+_0x5187e1(0x22f)+_0xd720c7+_0x5187e1(0x1d0)),toggleBotMode(_0x422e4e);}),tgBot[_0x35463e(0x16a)](_0x35463e(0x1cc),async _0x594fdd=>{const _0x35495e=_0x35463e;let _0x202962='';config[_0x35495e(0x14f)](_0xbdc45b=>{const _0x2763f3=_0x35495e;_0x202962+=_0x2763f3(0x242)+_0xbdc45b[_0x2763f3(0x2a8)]+':\x20'+_0xbdc45b['botname']+'\x0a';}),await sendTelegram(_0x594fdd[_0x35495e(0x195)]['id'],_0x202962,{'parse_mode':'HTML'});}),tgBot['command'](_0x35463e(0x273),async _0x2afb53=>{await sendTelegram(_0x2afb53['chat']['id'],_0x5531f0);}),process['once'](_0x35463e(0x190),()=>tgBot[_0x35463e(0x20a)](_0x35463e(0x190))),process[_0x35463e(0x28a)](_0x35463e(0x209),()=>tgBot[_0x35463e(0x20a)](_0x35463e(0x209))),tgBot['launch']();}function disableTelegram(){const _0x590b44=_0x183dae;tgBot&&tgBot[_0x590b44(0x20a)]();}async function sendTelegram(_0x349f70,_0x23b578,_0x2c22ed){const _0x30f27b=_0x183dae;_0x2c22ed={..._0x2c22ed,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x30f27b(0x167)](_0x349f70,_0x23b578,_0x2c22ed);}catch(_0x2634b9){console[_0x30f27b(0x282)]('Telegram\x20error:',_0x2634b9);}}async function sendTelegramBot(_0x483c34,_0x29c44d){const _0x36bcb6=_0x183dae;if(settings[_0x36bcb6(0x1ef)]){if(settings[_0x36bcb6(0x161)]==_0x36bcb6(0x20b)||(_0x29c44d[_0x36bcb6(0x2b7)]==_0x36bcb6(0x194)||_0x29c44d[_0x36bcb6(0x2b7)]==_0x36bcb6(0xfe)||_0x29c44d['type']=='success')&&settings['telegramEvents']==_0x36bcb6(0x2cb)||_0x29c44d['type']==_0x36bcb6(0x2f8)&&settings[_0x36bcb6(0x161)]=='orders'){if(tgBot&&settings[_0x36bcb6(0x2ed)]){if(_0x29c44d[_0x36bcb6(0x182)])await sendTelegram(settings['telegramChatId'],_0x29c44d[_0x36bcb6(0x2e2)]+_0x36bcb6(0x2d8)+_0x29c44d['event']);else await sendTelegram(settings[_0x36bcb6(0x2ed)],_0x36bcb6(0x242)+_0x483c34+_0x36bcb6(0x2d8)+_0x29c44d[_0x36bcb6(0x10e)]);}}}}async function sendTelegramMsg(_0x40c7a3,_0x1220cd=_0x183dae(0x307)){const _0xdccb82=_0x183dae;return settings['telegramEnabled']&&tgBot&&settings[_0xdccb82(0x2ed)]?(await sendTelegram(settings['telegramChatId'],_0x40c7a3,{'parse_mode':_0x1220cd}),!![]):![];}function getDeviceWithIp(_0xf4e242){return devices['find'](_0x1b667e=>_0x1b667e['ip']===_0xf4e242);}async function temporaryAccess2FA(_0x747359,_0x16cdc5){const _0x2cc00a=_0x183dae;let _0x5cf349=new Date(),_0x415543=![];if(lastIpApproval){if(_0x5cf349-lastIpApproval<0x1388)_0x415543=!![];}lastIpApproval=new Date();if(_0x415543)return;if(tgBot&&settings[_0x2cc00a(0x2ed)]){const _0x3f6fdf=uuidRandom();tmpStorage[_0x3f6fdf]={'uuid':_0x747359,'externalip':_0x16cdc5};const _0x4e371e=Markup[_0x2cc00a(0x219)]([Markup[_0x2cc00a(0x12b)][_0x2cc00a(0x164)](_0x2cc00a(0x2bd),'tempaccess_5_'+_0x3f6fdf),Markup[_0x2cc00a(0x12b)]['callback'](_0x2cc00a(0x197),_0x2cc00a(0x1d9)+_0x3f6fdf),Markup[_0x2cc00a(0x12b)][_0x2cc00a(0x164)](_0x2cc00a(0x13a),_0x2cc00a(0x1e6)+_0x3f6fdf),Markup[_0x2cc00a(0x12b)]['callback'](_0x2cc00a(0x280),'tempaccess_reject_'+_0x3f6fdf)]);await sendTelegram(settings['telegramChatId'],_0x2cc00a(0x17b)+normalizeIP(_0x16cdc5)[_0x2cc00a(0x268)]+'\x20?',_0x4e371e),tgBot[_0x2cc00a(0x277)](/tempaccess_(.+)_(.+)/,async _0x200d12=>{const _0x5325fc=_0x2cc00a,_0x4628ff=_0x200d12['match'][0x1],_0x3e9ed7=_0x200d12[_0x5325fc(0x2cd)][0x2],{uuid:_0x1ac3e2,externalip:_0x5ce7fa}=tmpStorage[_0x3e9ed7];delete tmpStorage[_0x3e9ed7],_0x200d12[_0x5325fc(0x1ed)](),devices[_0x1ac3e2][_0x5325fc(0x2ec)]={'clientip':_0x5ce7fa,'timestamp':new Date()['getTime'](),'expiry':_0x4628ff},_0x4628ff!=_0x5325fc(0x280)?(await sendTelegram(_0x200d12[_0x5325fc(0x195)]['id'],_0x5325fc(0x154)+_0x4628ff+_0x5325fc(0x122),{'parse_mode':_0x5325fc(0x307)}),io['to'](_0x1ac3e2)[_0x5325fc(0x14c)](_0x5325fc(0x286),{'access':{'allow':![],'reason':_0x5325fc(0x283),'token':null}})):(await sendTelegram(_0x200d12[_0x5325fc(0x195)]['id'],_0x5325fc(0xf2)),io['to'](_0x1ac3e2)[_0x5325fc(0x14c)](_0x5325fc(0x286),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x5f12d1,_0x4435f7){const _0x3c8f26=_0x183dae;if(tgBot&&settings[_0x3c8f26(0x2ed)]){const _0x2b21dd=uuidRandom();tmpStorage[_0x2b21dd]={'uuid':_0x5f12d1,'externalip':_0x4435f7};const _0x32b9aa=Markup[_0x3c8f26(0x219)]([Markup[_0x3c8f26(0x12b)][_0x3c8f26(0x164)](_0x3c8f26(0x291),_0x3c8f26(0x199)+loginExpiry+'_'+_0x2b21dd),Markup[_0x3c8f26(0x12b)][_0x3c8f26(0x164)](_0x3c8f26(0x280),'login2fa_reject_'+_0x2b21dd)]);await sendTelegram(settings[_0x3c8f26(0x2ed)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x4435f7)[_0x3c8f26(0x268)]+'\x20?',_0x32b9aa),tgBot[_0x3c8f26(0x277)](/login2fa_(.+)_(.+)/,async _0x257796=>{const _0x4a48a5=_0x3c8f26,_0x427273=_0x257796[_0x4a48a5(0x2cd)][0x1],_0x4bf674=_0x257796[_0x4a48a5(0x2cd)][0x2],{uuid:_0x3a510d,externalip:_0x55372b}=tmpStorage[_0x4bf674];delete tmpStorage[_0x4bf674],_0x257796[_0x4a48a5(0x1ed)](),devices[_0x3a510d][_0x4a48a5(0x2dd)]={'clientip':_0x55372b,'timestamp':new Date()[_0x4a48a5(0x2a7)](),'expiry':_0x427273},_0x427273!=_0x4a48a5(0x280)?(await sendTelegram(_0x257796[_0x4a48a5(0x195)]['id'],'Login\x20accepted',{'parse_mode':_0x4a48a5(0x307)}),io['to'](_0x3a510d)['emit'](_0x4a48a5(0x286),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x257796[_0x4a48a5(0x195)]['id'],_0x4a48a5(0x2be)),io['to'](_0x3a510d)[_0x4a48a5(0x14c)]('status',{'access':{'allow':![],'reason':_0x4a48a5(0x22a),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xb573bb=_0x183dae;return dbConfig[_0xb573bb(0x217)](_0xb573bb(0x29d))[_0xb573bb(0x16e)](_0xb573bb(0x2a8))['filter']({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0xd551fd=_0x183dae;return dbConfig[_0xd551fd(0x217)]('bots')[_0xd551fd(0x16e)](_0xd551fd(0x2a8))['filter']({'status':'disabled'})[_0xd551fd(0x183)]()||[];}function getBotAttributes(_0x12ed67){const _0x2da0a0=_0x183dae;let _0x2a950c={};const _0x2963d5=configpath+_0x2da0a0(0x18a)+_0x12ed67+_0x2da0a0(0x123),_0x39df4e=fs['existsSync'](_0x2963d5);if(_0x39df4e){const _0x147007=fs[_0x2da0a0(0x16f)](_0x2963d5);try{const _0x25e8fb=JSON[_0x2da0a0(0x171)](_0x147007),_0x2bc33f=_0x25e8fb?_0x25e8fb[_0x2da0a0(0x1a0)][0x0][_0x2da0a0(0x106)]:![];_0x2a950c[_0x2da0a0(0x13e)]=_0x2bc33f?_0x2da0a0(0x240):_0x2da0a0(0x1d2),_0x2a950c['botname']=_0x25e8fb?_0x25e8fb[_0x2da0a0(0x1a0)][0x0][_0x2da0a0(0x2e2)]:_0x2da0a0(0x242)+_0x12ed67;}catch(_0x1c7216){_0x2a950c[_0x2da0a0(0x13e)]=_0x2da0a0(0x1d2),_0x2a950c['botname']='Bot\x20'+_0x12ed67;}}else _0x2a950c[_0x2da0a0(0x13e)]=_0x2da0a0(0x1d2),_0x2a950c['botname']='Bot\x20'+_0x12ed67;return _0x2a950c;}function getBotsWithMode(){const _0x52ba75=_0x183dae,_0x410433=dbConfig[_0x52ba75(0x217)](_0x52ba75(0x29d))[_0x52ba75(0x16e)](_0x52ba75(0x2a8))[_0x52ba75(0x183)]()||[];return _0x410433['forEach'](_0x4a129c=>{const _0x37d91f=_0x52ba75;let _0x21d745=getBotAttributes(_0x4a129c[_0x37d91f(0x2a8)]);_0x4a129c[_0x37d91f(0x13e)]=_0x21d745[_0x37d91f(0x13e)];}),_0x410433;}function getBotExchanges(){const _0x496724=_0x183dae;let _0x2f3326=[];const _0x4a2889=dbConfig[_0x496724(0x217)](_0x496724(0x29d))[_0x496724(0x16e)](_0x496724(0x2a8))[_0x496724(0x183)]()||[];_0x4a2889[_0x496724(0x14f)](_0x4cf6d2=>{const _0x42b25c=_0x496724;if(_0x4cf6d2[_0x42b25c(0x286)]=='enabled'){const _0xcc8056=configpath+_0x42b25c(0x18a)+_0x4cf6d2[_0x42b25c(0x2a8)]+_0x42b25c(0x123),_0x463aa3=fs[_0x42b25c(0x1c6)](_0xcc8056);let _0x242ea1;if(_0x463aa3){const _0x1bea10=fs[_0x42b25c(0x16f)](_0xcc8056);try{const _0x4a6a2f=JSON['parse'](_0x1bea10);_0x242ea1=_0x4a6a2f?_0x4a6a2f[_0x42b25c(0x1a0)][0x0]['exchange']:null;}catch(_0x5f38e0){}}if(_0x242ea1)_0x2f3326['push'](_0x242ea1);}});const _0x4e29a1=[...new Set(_0x2f3326)]['sort']();return _0x4e29a1;}async function initUser(){const _0x22f1af=_0x183dae;if(!settings[_0x22f1af(0x11e)]){const _0xff9633=uuidRandom();mixpanel[_0x22f1af(0x1fa)](_0xff9633),updateSetting(_0x22f1af(0x11e),_0xff9633);}}async function initSecure(){const _0x5c258b=_0x183dae;let _0x44b7cc=getSecure();if(!_0x44b7cc['hasOwnProperty'](_0x5c258b(0x181))){let _0x358018=await generateKeys();_0x44b7cc[_0x5c258b(0x2f4)]=_0x358018[_0x5c258b(0x2f4)],_0x44b7cc[_0x5c258b(0x1ff)]=_0x358018[_0x5c258b(0x1ff)],_0x44b7cc[_0x5c258b(0x181)]=crypto[_0x5c258b(0x1f0)](0x20)['toString'](_0x5c258b(0x214));;storeSecure(_0x44b7cc);}}function getSettings(){const _0x4d821f=_0x183dae;return dbSettings[_0x4d821f(0x217)]('settings')[_0x4d821f(0x183)]()||{};}function getSecure(){const _0xc3e892=_0x183dae;return dbSecure['get']('secure')[_0xc3e892(0x183)]()||{};}function getBlacklist(){const _0x2a1bfd=_0x183dae;return dbSecure['get'](_0x2a1bfd(0x1c2))[_0x2a1bfd(0x183)]()||[];}function broadcastToBots(_0x30761b,_0x93e8c3){const _0x38c4b3=_0x183dae;config[_0x38c4b3(0x14f)](_0x2662b0=>{const _0x131af2=_0x38c4b3;if(_0x2662b0[_0x131af2(0x286)]==_0x131af2(0x296)&&_0x2662b0['live']=='running'||_0x2662b0[_0x131af2(0x286)]=='new'&&_0x2662b0[_0x131af2(0x1b6)]=='running'){if(pid[_0x2662b0[_0x131af2(0x2a8)]])pid[_0x2662b0[_0x131af2(0x2a8)]]['send']({[_0x30761b]:_0x93e8c3});}});}async function storeSettings(_0x3ea928,_0x28849d=![]){const _0xee201b=_0x183dae;_0x3ea928={...settings,..._0x3ea928};if(_0x28849d&&_0x3ea928['bbPassword']!=_0xee201b(0x27b)&&_0x3ea928['bbPassword']!=_0xee201b(0x1f7)&&_0x3ea928[_0xee201b(0x2ee)]!=''){const _0x4c24f6=decryptRSA(secure[_0xee201b(0x1ff)],_0x3ea928[_0xee201b(0x2ee)])[_0xee201b(0x2ce)]('|@|')[0x0],_0x46a430=bcrypt[_0xee201b(0x155)](_0x4c24f6,saltRounds);_0x3ea928={..._0x3ea928,'bbPassword':_0x46a430};}if(_0x28849d&&_0x3ea928['telegramToken']!=_0xee201b(0x27b)&&_0x3ea928[_0xee201b(0x23e)]!='***'&&_0x3ea928['telegramToken']!=''){const _0x58dd31=decryptRSA(secure[_0xee201b(0x1ff)],_0x3ea928[_0xee201b(0x23e)])[_0xee201b(0x2ce)](_0xee201b(0x163))[0x0];_0x3ea928={..._0x3ea928,'telegramToken':_0x58dd31};}if(_0x28849d&&_0x3ea928[_0xee201b(0x136)]!='************'&&_0x3ea928['marketcapApi']!='***'&&_0x3ea928[_0xee201b(0x136)]!=''){const _0x5e7d15=decryptRSA(secure['privateKey'],_0x3ea928['marketcapApi'])[_0xee201b(0x2ce)](_0xee201b(0x163))[0x0];_0x3ea928={..._0x3ea928,'marketcapApi':_0x5e7d15};}const _0x80f92=_0x3ea928['telegramToken']!=_0xee201b(0x27b)&&_0x3ea928['telegramToken']!=settings[_0xee201b(0x23e)]||_0x3ea928[_0xee201b(0x14a)]!=settings['telegramUsername'],_0x23b2a4=_0x3ea928['telegramToken']==''||_0x3ea928[_0xee201b(0x14a)]=='',_0x18b7a6=_0x3ea928[_0xee201b(0x136)]&&_0x3ea928['marketcapApi']!=_0xee201b(0x27b)&&_0x3ea928[_0xee201b(0x136)]!=settings[_0xee201b(0x23e)];_0x80f92&&(_0x3ea928[_0xee201b(0x2ed)]=null,_0x3ea928[_0xee201b(0x161)]=_0xee201b(0x20b));for(const [_0x5a3cd3,_0x121647]of Object[_0xee201b(0x115)](_0x3ea928)){if(_0x5a3cd3==_0xee201b(0x23e)&&_0x121647==_0xee201b(0x27b)){_0x3ea928[_0xee201b(0x23e)]=settings['telegramToken'];continue;};if(_0x5a3cd3==_0xee201b(0x2ee)&&_0x121647=='************'){_0x3ea928[_0xee201b(0x2ee)]=settings['bbPassword'];continue;};if(_0x5a3cd3==_0xee201b(0x136)&&_0x121647=='************'){_0x3ea928['marketcapApi']=settings[_0xee201b(0x136)];continue;};dbSettings[_0xee201b(0x128)](_0xee201b(0x254)+_0x5a3cd3,_0x121647)[_0xee201b(0x18d)]();}settings=_0x3ea928,io['to'](_0xee201b(0x2bb))['emit'](_0xee201b(0x1d5),cleanSettings()),broadcastToBots(_0xee201b(0x10c),settings['timeshift']),broadcastToBots(_0xee201b(0x228),settings[_0xee201b(0x228)]),broadcastToBots(_0xee201b(0x136),settings[_0xee201b(0x136)]);if(_0x80f92&&!_0x23b2a4)initTelegram();if(_0x80f92&&_0x23b2a4)disableTelegram();getAllClients()[_0xee201b(0x14f)](_0x9a908=>{const _0x248466=_0xee201b;getSocket(_0x9a908['id'])[_0x248466(0x14c)](_0x248466(0x286),{'access':{'allow':![],'reason':_0x248466(0x283),'token':null}});}),_0x18b7a6&&(await sleep(0xbb8),testMarketcapApi(_0x3ea928[_0xee201b(0x136)]));}async function testMarketcapApi(_0xc81544){const _0x193d89=_0x183dae,_0x221f9=[_0x193d89(0x2da),_0x193d89(0x1bd)];try{await axios[_0x193d89(0x217)](_0x193d89(0x26c),{'headers':{'X-CMC_PRO_API_KEY':_0xc81544},'params':{'symbol':_0x221f9[_0x193d89(0x189)]()}});}catch(_0x2456e9){_0x2456e9[_0x193d89(0x189)]()[_0x193d89(0x11a)](_0x193d89(0x293))?(io['to'](_0x193d89(0x2bb))[_0x193d89(0x14c)](_0x193d89(0x25a),_0x193d89(0x108)),logger[_0x193d89(0x26e)](_0x193d89(0x108))):(io['to']('botmanager')[_0x193d89(0x14c)](_0x193d89(0x25a),_0x193d89(0x2c3)),logger['full'](_0x193d89(0x2c3)),logger['debug']('Error\x20details:',_0x2456e9[_0x193d89(0x189)]()+_0x193d89(0x2a4)+_0x2456e9[_0x193d89(0x224)]));return;}logger[_0x193d89(0x1f6)](_0x193d89(0x162));}function updateSetting(_0x4def0c,_0x3673db){const _0x2b7d97=_0x183dae;dbSettings[_0x2b7d97(0x128)]('settings.'+_0x4def0c,_0x3673db)['write'](),settings=getSettings(),io['to'](_0x2b7d97(0x2bb))['emit']('settings',cleanSettings());}function storeSecure(_0x1b95ab){const _0x1c66db=_0x183dae;dbSecure['get']('secure')[_0x1c66db(0x2dc)](_0x1b95ab)['write'](),secure=_0x1b95ab;}function addBlacklist(_0x3dac4b){const _0xb0680=_0x183dae;cleanBlacklist();let _0x35ccb1;devices[_0x3dac4b][_0xb0680(0x2ec)]?_0x35ccb1=Math['max'](devices[_0x3dac4b]['telegramIpApproval'][_0xb0680(0x105)],loginExpiry):_0x35ccb1=loginExpiry,dbSecure[_0xb0680(0x217)](_0xb0680(0x1c2))['push']({'expiry':new Date()['getTime']()+_0x35ccb1*0x3c*0x3e8,'token':devices[_0x3dac4b][_0xb0680(0x156)][_0xb0680(0x2c4)]})[_0xb0680(0x18d)](),blacklist=dbSecure[_0xb0680(0x217)](_0xb0680(0x1c2))[_0xb0680(0x183)]();}function cleanBlacklist(){const _0x1e6c91=_0x183dae;let _0x589cf6=dbSecure[_0x1e6c91(0x217)]('blacklist')['cloneDeep']()[_0x1e6c91(0x183)](),_0x52598a=new Date()[_0x1e6c91(0x2a7)]();_0x589cf6[_0x1e6c91(0x14f)](_0x3ebc3d=>{const _0x7df15b=_0x1e6c91;_0x3ebc3d[_0x7df15b(0x105)]<_0x52598a&&dbSecure['get'](_0x7df15b(0x1c2))[_0x7df15b(0x2d9)]({'expiry':_0x3ebc3d[_0x7df15b(0x105)]})[_0x7df15b(0x18d)]();});}function initStates(){let _0x564869=getConfiguration();_0x564869['forEach'](_0x4256fd=>{const _0x8c13b9=_0x15c7;_0x4256fd[_0x8c13b9(0x1b6)]=_0x8c13b9(0x1d7);}),storeConfiguration(_0x564869);}async function generateKeys(){const _0xabe40b=_0x183dae,_0x3e06b6=forge[_0xabe40b(0x1db)][_0xabe40b(0x2f2)][_0xabe40b(0x173)]({'bits':0x1000,'e':0x10001}),_0x5e7dbb=forge[_0xabe40b(0x1db)]['privateKeyToPem'](_0x3e06b6[_0xabe40b(0x1ff)]),_0x552097=forge[_0xabe40b(0x1db)][_0xabe40b(0x227)](_0x3e06b6[_0xabe40b(0x2f4)]);return{'privateKey':_0x5e7dbb,'publicKey':_0x552097};}async function oneTimeMigration(){const _0x5501a6=_0x183dae;let _0x15a648=getSettings(),_0x23d788=![];!_0x15a648[_0x5501a6(0x206)]('lastmsgtelegram')&&(_0x15a648[_0x5501a6(0x2ad)]=0x0,_0x23d788=!![]);!_0x15a648[_0x5501a6(0x206)](_0x5501a6(0x145))&&(_0x15a648[_0x5501a6(0x145)]=0x0,_0x23d788=!![]);!_0x15a648[_0x5501a6(0x206)](_0x5501a6(0x148))&&(_0x15a648[_0x5501a6(0x148)]=_0x5501a6(0x24f),_0x23d788=!![]);!_0x15a648[_0x5501a6(0x206)](_0x5501a6(0x228))&&(_0x15a648[_0x5501a6(0x228)]=![],_0x23d788=!![]);!_0x15a648[_0x5501a6(0x206)](_0x5501a6(0x136))&&(_0x15a648['marketcapApi']='',_0x23d788=!![]);if(_0x23d788)storeSettings(_0x15a648);try{fs[_0x5501a6(0x263)](configbackuppath,{'withFileTypes':!![]})[_0x5501a6(0x14f)](_0x5da1f3=>{const _0x552f5e=_0x5501a6;if(!_0x5da1f3[_0x552f5e(0x279)]()){if(!_0x5da1f3[_0x552f5e(0x2fb)]['startsWith'](_0x552f5e(0x12d)))fs[_0x552f5e(0x1bf)](configbackuppath+_0x5da1f3[_0x552f5e(0x2fb)]);}else fs['rmSync'](configbackuppath+_0x5da1f3[_0x552f5e(0x2fb)],{'recursive':!![]});});}catch(_0x33b331){logger[_0x5501a6(0x1f6)](_0x5501a6(0x23c),_0x33b331);}}function storeConfiguration(_0x4713a0){const _0x163164=_0x183dae;dbConfig[_0x163164(0x217)](_0x163164(0x29d))[_0x163164(0x2d9)]()[_0x163164(0x18d)](),dbConfig[_0x163164(0x217)](_0x163164(0x29d))['push'](..._0x4713a0)[_0x163164(0x18d)](),config=_0x4713a0;}async function resetPassword(){const _0x775116=_0x183dae;if(tgBot&&settings[_0x775116(0x2ed)]){const _0x1e1b97=Markup[_0x775116(0x219)]([Markup['button'][_0x775116(0x164)](_0x775116(0x1b8),'resetpw_yes'),Markup[_0x775116(0x12b)][_0x775116(0x164)]('no','resetpw_no')]);await sendTelegram(settings[_0x775116(0x2ed)],_0x775116(0x2e6),_0x1e1b97),tgBot[_0x775116(0x277)](/resetpw_(.+)/,async _0x556dad=>{const _0x80e17f=_0x775116,_0x127da1=_0x556dad[_0x80e17f(0x2cd)][0x1];_0x556dad[_0x80e17f(0x1ed)]();if(_0x127da1!='no'){const _0x3da500=0xf,_0x362238='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x1791b7=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x3da500)))[_0x80e17f(0x1c3)](_0x5e6d7d=>_0x362238[_0x5e6d7d%_0x362238[_0x80e17f(0x2b1)]])[_0x80e17f(0x250)](''),_0x2a3b8a=bcrypt['hashSync'](_0x1791b7,saltRounds);storeSettings({'bbPassword':_0x2a3b8a}),await sendTelegram(_0x556dad[_0x80e17f(0x195)]['id'],_0x80e17f(0x275)+_0x1791b7,{'parse_mode':_0x80e17f(0x307)});}else await sendTelegram(_0x556dad[_0x80e17f(0x195)]['id'],_0x80e17f(0x165));});}}async function confirmRestore(_0x55f89c,_0x50176e){const _0x177a73=_0x183dae;io['to']('botmanager')[_0x177a73(0x14c)]('notification',_0x177a73(0x1e9),_0x177a73(0xfd));if(tgBot&&settings['telegramChatId']){const _0x1fccff=uuidRandom();tmpStorage[_0x1fccff]={'path':_0x55f89c,'filename':_0x50176e};const _0x12dcc4=Markup[_0x177a73(0x219)]([Markup[_0x177a73(0x12b)][_0x177a73(0x164)](_0x177a73(0x1b8),_0x177a73(0x1ac)+_0x1fccff),Markup[_0x177a73(0x12b)]['callback']('no',_0x177a73(0x27e)+_0x1fccff)]);await sendTelegram(settings[_0x177a73(0x2ed)],_0x177a73(0x158),_0x12dcc4),tgBot[_0x177a73(0x277)](/restore_(.+)_(.+)/,async _0x39376a=>{const _0x1c3b3c=_0x177a73,_0x2563b6=_0x39376a['match'][0x1],_0x5d1b5f=_0x39376a[_0x1c3b3c(0x2cd)][0x2],{path:_0x371f4c,filename:_0x2d08d3}=tmpStorage[_0x5d1b5f];delete tmpStorage[_0x5d1b5f],_0x39376a[_0x1c3b3c(0x1ed)](),_0x2563b6=='yes'?(logger[_0x1c3b3c(0x1f6)](_0x1c3b3c(0x134)),await sendTelegram(_0x39376a[_0x1c3b3c(0x195)]['id'],_0x1c3b3c(0x220),{'parse_mode':'HTML'}),unzipFile(_0x371f4c,_0x2d08d3)):(logger[_0x1c3b3c(0x1f6)](_0x1c3b3c(0x26d)),await sendTelegram(_0x39376a['chat']['id'],_0x1c3b3c(0x26d)));});}}function getServerTime(){const _0x53e2e3=_0x183dae,_0x62290a=new Date();return _0x62290a[_0x53e2e3(0x245)]()+'/'+(_0x62290a[_0x53e2e3(0x110)]()+0x1)[_0x53e2e3(0x189)]()['padStart'](0x2,'0')+'/'+_0x62290a[_0x53e2e3(0x287)]()[_0x53e2e3(0x189)]()[_0x53e2e3(0x1cb)](0x2,'0')+'\x20'+_0x62290a[_0x53e2e3(0x1b9)]()[_0x53e2e3(0x189)]()[_0x53e2e3(0x1cb)](0x2,'0')+':'+_0x62290a[_0x53e2e3(0x15c)]()[_0x53e2e3(0x189)]()[_0x53e2e3(0x1cb)](0x2,'0')+':'+_0x62290a[_0x53e2e3(0x1e5)]()[_0x53e2e3(0x189)]()[_0x53e2e3(0x1cb)](0x2,'0');}function getTimeStamp(){const _0x2ee316=_0x183dae,_0x4ac135=shiftedTime();return _0x4ac135[_0x2ee316(0x245)]()+'/'+(_0x4ac135['getMonth']()+0x1)[_0x2ee316(0x189)]()[_0x2ee316(0x1cb)](0x2,'0')+'/'+_0x4ac135['getDate']()[_0x2ee316(0x189)]()['padStart'](0x2,'0')+'\x20'+_0x4ac135['getHours']()['toString']()[_0x2ee316(0x1cb)](0x2,'0')+':'+_0x4ac135[_0x2ee316(0x15c)]()[_0x2ee316(0x189)]()[_0x2ee316(0x1cb)](0x2,'0')+':'+_0x4ac135[_0x2ee316(0x1e5)]()[_0x2ee316(0x189)]()[_0x2ee316(0x1cb)](0x2,'0');}function getCleanTimeStamp(){const _0x1495a8=_0x183dae,_0x32f347=shiftedTime();return _0x32f347['getFullYear']()+(_0x32f347[_0x1495a8(0x110)]()+0x1)[_0x1495a8(0x189)]()[_0x1495a8(0x1cb)](0x2,'0')+_0x32f347[_0x1495a8(0x287)]()[_0x1495a8(0x189)]()['padStart'](0x2,'0')+'-'+_0x32f347[_0x1495a8(0x1b9)]()[_0x1495a8(0x189)]()[_0x1495a8(0x1cb)](0x2,'0')+_0x32f347[_0x1495a8(0x15c)]()[_0x1495a8(0x189)]()[_0x1495a8(0x1cb)](0x2,'0')+_0x32f347[_0x1495a8(0x1e5)]()['toString']()[_0x1495a8(0x1cb)](0x2,'0');}function shiftedTime(){const _0x58caac=_0x183dae,_0x1d434d=new Date();let _0x77715c=_0x1d434d;if(settings[_0x58caac(0x10c)]&&settings[_0x58caac(0x10c)]!==0x0)_0x77715c=fns[_0x58caac(0x1a1)](_0x1d434d,{'hours':settings['timeshift']});return _0x77715c;}async function startScheduler(){const _0xe6e5e7=_0x183dae,_0x1facaf=new Date()[_0xe6e5e7(0x2aa)](),_0x83a0ff=shiftedTime()['getHours']();_0x83a0ff==0x4&&backupConfigFiles(),_0x83a0ff==0x0&&rotateLogFiles(),_0x1facaf%0x6==0x0&&triggerAnalytics(),_0x1facaf%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x9a0a9d){const _0x3ea72c=_0x183dae;logger[_0x3ea72c(0x1f6)](_0x3ea72c(0x153)+_0x9a0a9d);const _0x37fba8=getBotsWithMode();_0x37fba8['length']>0x0?confirmRestore(configbackuppath,_0x9a0a9d):unzipFile(configbackuppath,_0x9a0a9d);}async function getBackupFiles(_0x2685ea=null){const _0x1dc352=_0x183dae;let _0x254782=[],_0x24bec4=fs[_0x1dc352(0x263)](configbackuppath,{'withFileTypes':!![]});_0x24bec4['sort']((_0x3d7cee,_0x36aad7)=>_0x3d7cee[_0x1dc352(0x2fb)]<_0x36aad7['name']?0x1:_0x36aad7['name']<_0x3d7cee[_0x1dc352(0x2fb)]?-0x1:0x0),_0x24bec4[_0x1dc352(0x14f)](_0x19d2df=>{const _0x4fd187=_0x1dc352;if(!_0x19d2df['isDirectory']()&&_0x19d2df['name'][_0x4fd187(0x16c)](_0x4fd187(0x12d))&&_0x19d2df['name']['endsWith']('.zip')){const _0x222edb=formatDate(fs[_0x4fd187(0x29e)](configbackuppath+_0x19d2df[_0x4fd187(0x2fb)])[_0x4fd187(0x2fe)]);_0x254782[_0x4fd187(0x2dc)]({'name':_0x19d2df['name'],'mtime':_0x222edb});}});if(_0x2685ea)io['to'](_0x2685ea)[_0x1dc352(0x14c)]('backup-files',_0x254782);else return _0x254782;}function _0x15c7(_0x16471e,_0x48e5c8){const _0x2b56f9=_0x4201();return _0x15c7=function(_0x354aef,_0x1a48d4){_0x354aef=_0x354aef-0xf1;let _0x420104=_0x2b56f9[_0x354aef];return _0x420104;},_0x15c7(_0x16471e,_0x48e5c8);}async function backupConfigFiles(){const _0x365468=_0x183dae;await zipFiles(_0x365468(0x27a));const _0x84165f=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x365468(0x28d),configbackuppath+(_0x365468(0x12d)+_0x84165f+_0x365468(0x2e8)));let _0x224a15=fs[_0x365468(0x263)](configbackuppath,{'withFileTypes':!![]});_0x224a15[_0x365468(0x19c)]((_0x54395e,_0x204767)=>_0x54395e[_0x365468(0x2fb)]<_0x204767[_0x365468(0x2fb)]?0x1:_0x204767[_0x365468(0x2fb)]<_0x54395e[_0x365468(0x2fb)]?-0x1:0x0),_0x224a15[_0x365468(0x2b1)]>maxBackups&&fs[_0x365468(0x1bf)](configbackuppath+_0x224a15[_0x224a15['length']-0x1][_0x365468(0x2fb)]);}function rotateLogFiles(){const _0x1c1787=_0x183dae,_0x679286=fs[_0x1c1787(0x29e)](logspath+_0x1c1787(0x223)),_0x4af909=_0x679286[_0x1c1787(0x188)]/0x400;if(_0x4af909>0x64){let _0x397e0d=fs[_0x1c1787(0x263)](logspath,{'withFileTypes':!![]});_0x397e0d[_0x1c1787(0x19c)]((_0x3cdfa6,_0x169081)=>_0x3cdfa6[_0x1c1787(0x2fb)]<_0x169081['name']?0x1:_0x169081[_0x1c1787(0x2fb)]<_0x3cdfa6[_0x1c1787(0x2fb)]?-0x1:0x0),_0x397e0d[_0x1c1787(0x14f)](_0xf700fb=>{const _0x3ace86=_0x1c1787;if(_0xf700fb['name']==_0x3ace86(0x304))fs[_0x3ace86(0x19b)](logspath+_0xf700fb[_0x3ace86(0x2fb)],logspath+_0x3ace86(0xf5));if(_0xf700fb[_0x3ace86(0x2fb)]==_0x3ace86(0x186))fs[_0x3ace86(0x19b)](logspath+_0xf700fb[_0x3ace86(0x2fb)],logspath+_0x3ace86(0x304));_0xf700fb[_0x3ace86(0x2fb)]==_0x3ace86(0x223)&&(fs[_0x3ace86(0x19b)](logspath+_0xf700fb[_0x3ace86(0x2fb)],logspath+_0x3ace86(0x186)),fs['writeFileSync'](logspath+_0xf700fb[_0x3ace86(0x2fb)],''));});}}async function zipFiles(_0x9e8e43){const _0x3b8bf4=_0x183dae;let _0x45f2e2;if(_0x9e8e43==_0x3b8bf4(0xff))_0x45f2e2=logspath;if(_0x9e8e43==_0x3b8bf4(0x137))_0x45f2e2=configpath;if(_0x9e8e43=='backup-full')_0x45f2e2=configpath;let _0x29f5b2=fs[_0x3b8bf4(0x263)](_0x45f2e2,{'withFileTypes':!![]});const _0x473ad2=new JSZip();_0x29f5b2[_0x3b8bf4(0x14f)](_0x3f10b1=>{const _0x59baf2=_0x3b8bf4;if(!_0x3f10b1['isDirectory']()){let _0x44be69=fs[_0x59baf2(0x16f)](_0x45f2e2+_0x3f10b1[_0x59baf2(0x2fb)]);if(_0x9e8e43==_0x59baf2(0x137)){const _0x1314a6=/^bot-[0-9]{3}-config.json$/,_0x5f3187=_0x1314a6[_0x59baf2(0x2c8)](_0x3f10b1[_0x59baf2(0x2fb)]);if(_0x5f3187){const _0xd22473=JSON[_0x59baf2(0x171)](_0x44be69);if(_0xd22473[_0x59baf2(0x1a0)][0x0]){_0xd22473[_0x59baf2(0x1a0)][0x0]['apiKey']='***',_0xd22473[_0x59baf2(0x1a0)][0x0][_0x59baf2(0x18f)]=_0x59baf2(0x1f7);if(_0xd22473[_0x59baf2(0x1a0)][0x0][_0x59baf2(0x120)])_0xd22473[_0x59baf2(0x1a0)][0x0][_0x59baf2(0x120)]='***';}_0x44be69=JSON[_0x59baf2(0x1e3)](_0xd22473,null,0x2);}if(_0x3f10b1[_0x59baf2(0x2fb)]=='bb-settings.json'){const _0x5d198d=JSON['parse'](_0x44be69);if(_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x210)])_0x5d198d['settings']['loginRequired']=![];if(_0x5d198d['settings'][_0x59baf2(0x2ee)])_0x5d198d['settings'][_0x59baf2(0x2ee)]='***';if(_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x23e)])_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x23e)]=_0x59baf2(0x1f7);if(_0x5d198d[_0x59baf2(0x1d5)]['telegramChatId'])_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x2ed)]=null;if(_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x136)])_0x5d198d[_0x59baf2(0x1d5)][_0x59baf2(0x136)]=_0x59baf2(0x1f7);_0x44be69=JSON[_0x59baf2(0x1e3)](_0x5d198d,null,0x2);}if(_0x3f10b1[_0x59baf2(0x2fb)]!=_0x59baf2(0x2b9))_0x473ad2[_0x59baf2(0x302)](_0x3f10b1[_0x59baf2(0x2fb)],_0x44be69);}else _0x473ad2[_0x59baf2(0x302)](_0x3f10b1[_0x59baf2(0x2fb)],_0x44be69);}});const _0x55c781=await _0x473ad2[_0x3b8bf4(0x14b)]({'type':_0x3b8bf4(0x2bf),'base64':![],'compression':_0x3b8bf4(0x112)});fs[_0x3b8bf4(0x2fa)](zippath+(_0x9e8e43+_0x3b8bf4(0x2e8)),_0x55c781,_0x3b8bf4(0x309));}async function unzipFile(_0x3f2acb,_0x54e857){const _0x47d50f=_0x183dae;fs[_0x47d50f(0x263)](configpath,{'withFileTypes':!![]})[_0x47d50f(0x14f)](_0x19a65f=>{const _0x9508da=_0x47d50f;if(!_0x19a65f[_0x9508da(0x279)]())fs[_0x9508da(0x178)](configpath+_0x19a65f[_0x9508da(0x2fb)]);});const _0x662962=fs['readFileSync'](_0x3f2acb+_0x54e857,_0x47d50f(0x309)),_0x4a0a30=await JSZip[_0x47d50f(0x146)](_0x662962,{'base64':![],'checkCRC32':!![]});for(const _0x2830ff of Object[_0x47d50f(0x247)](_0x4a0a30['files'])){const _0x5f318e=_0x4a0a30[_0x47d50f(0x1a3)][_0x2830ff],_0x5db9cc=await _0x5f318e[_0x47d50f(0x207)]('string');fs[_0x47d50f(0x2fa)](configpath+_0x5f318e['name'],_0x5db9cc);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x47d50f(0x14f)](_0x6ba0b4=>{const _0x4033c7=_0x47d50f;if(!_0x6ba0b4[_0x4033c7(0x279)]())fs[_0x4033c7(0x178)](temppath+_0x6ba0b4[_0x4033c7(0x2fb)]);}),logger['debug'](_0x47d50f(0x30b)),process[_0x47d50f(0x25c)]({'restore':!![]},_0x4d9fb8=>{});}async function getPublicIp(){const _0x40974c=_0x183dae;try{const _0x35b08a=await axios['get'](_0x40974c(0x1b5));publicip=_0x35b08a['data']['ip'];}catch(_0x11a2eb){}}async function triggerAnalytics(){const _0x472232=_0x183dae;if(!publicip)await getPublicIp();const _0x53b44f=getBotsWithMode();let _0x1cf897=0x0;_0x53b44f['forEach'](_0x4c5f09=>{if(_0x4c5f09['status']==='enabled')_0x1cf897++;});const _0x18bf1f=getBotExchanges();mixpanel['track'](_0x472232(0x1d8),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x53b44f[_0x472232(0x2b1)],'numbotsenabled':_0x1cf897,'exchanges':_0x18bf1f,'environment':environment});}async function getMessages(){const _0xd6a9b4=_0x183dae,_0x3458f9='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0xf31111=new GraphQLClient(_0x3458f9),_0x47181a={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x22372a=serverversion['split']('.'),_0x4f0e8d=_0x22372a[0x0]+'.'+_0x22372a[0x1],_0xb35e8=Math[_0xd6a9b4(0x20c)](settings[_0xd6a9b4(0x2ad)],settings['lastmsgemitted']),_0x5bcd29={'last':parseInt(_0xb35e8),'bbm':_0x4f0e8d},_0x1f37d6=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x9c140b;try{_0x9c140b=await _0xf31111[_0xd6a9b4(0xf8)](_0x1f37d6,_0x5bcd29,_0x47181a);}catch(_0x3b89a0){}if(_0x9c140b&&_0x9c140b[_0xd6a9b4(0x1d1)]){let _0x438e65=settings[_0xd6a9b4(0x2ad)];newMessages=[];for(const _0x485589 of _0x9c140b['messages']){newMessages['push'](_0x485589);let _0x55028a=![];_0x485589[_0xd6a9b4(0x185)]&&(updateSetting('latestversion',_0x485589[_0xd6a9b4(0x185)]),_0x55028a=isNewerVersion(serverversion,_0x485589[_0xd6a9b4(0x185)])||serverversion==_0x485589[_0xd6a9b4(0x185)]);if(!_0x55028a&&_0x485589['number']>_0x438e65){if(_0x485589[_0xd6a9b4(0x12e)]===_0xd6a9b4(0x24a)||serverversion['startsWith'](_0x485589[_0xd6a9b4(0x12e)])){let _0x5813f8=''+_0x485589[_0xd6a9b4(0x237)]+'\x0a\x0a'+_0x485589[_0xd6a9b4(0x2eb)];const _0xcdf06a=await sendTelegramMsg(toTelegramMarkdown(_0x5813f8),_0xd6a9b4(0xf6));if(_0xcdf06a)_0x438e65=_0x485589['number'];}}}updateAvailable=isNewerVersion(settings[_0xd6a9b4(0x148)],serverversion),updateSetting(_0xd6a9b4(0x2ad),_0x438e65),emitMessages();}}function emitMessages(){const _0x54fb0b=_0x183dae,_0x349b59=settings[_0x54fb0b(0x145)];let _0x3b52e5=[];newMessages[_0x54fb0b(0x14f)](_0xc75049=>{const _0x2c91b0=_0x54fb0b;_0xc75049[_0x2c91b0(0x2c6)]>_0x349b59&&_0x3b52e5[_0x2c91b0(0x2dc)](_0xc75049);}),_0x3b52e5[_0x54fb0b(0x2b1)]>0x0&&getAllClients()['forEach'](_0x1fb33a=>{const _0x193e7f=_0x54fb0b;getSocket(_0x1fb33a['id'])['emit'](_0x193e7f(0x2eb),_0x3b52e5);});}function confirmMessage(_0x1c1e14){updateSetting('lastmsgemitted',Number(_0x1c1e14));}function isNewerVersion(_0x4a98fd,_0x52a169){const _0x320327=_0x183dae,_0x19b08b=_0x52a169[_0x320327(0x2ce)]('.'),_0x4f070f=_0x4a98fd[_0x320327(0x2ce)]('.');for(var _0x28b68e=0x0;_0x28b68e<_0x4f070f[_0x320327(0x2b1)];_0x28b68e++){const _0x5c1cc9=~~_0x4f070f[_0x28b68e],_0x232c46=~~_0x19b08b[_0x28b68e];if(_0x5c1cc9>_0x232c46)return!![];if(_0x5c1cc9<_0x232c46)return![];}return![];}function toTelegramMarkdown(_0x44b295){const _0x1bc690=_0x183dae,_0x4768e3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4aba82=/\*{2}(.+?)\*{2}/gim;return _0x44b295=_0x44b295['replace'](_0x4768e3,'$1_$2_$3')[_0x1bc690(0x1ea)](_0x4aba82,_0x1bc690(0x27f)),_0x44b295;}async function validateConfigFile(){const _0x5d0543=_0x183dae,_0x5850b2=dbConfig['get']('bots')['sortBy'](_0x5d0543(0x2a8))[_0x5d0543(0x183)]()||[];if(_0x5850b2[_0x5d0543(0x2b1)]==0x0){let _0x57467b=0x0,_0x43dcf8=[];const _0x16236f=/^bot-([0-9]{3})-config.json$/,_0x1faa40=fs[_0x5d0543(0x263)](configpath);_0x1faa40[_0x5d0543(0x14f)](_0x5e8bff=>{const _0x4268b0=_0x5d0543,_0x2b9695=_0x16236f[_0x4268b0(0x272)](_0x5e8bff);if(_0x2b9695){const _0x36fa45=_0x2b9695[0x1];let _0x8c8569=getBotAttributes(_0x36fa45);_0x43dcf8['push']({'botID':_0x36fa45,'botname':_0x8c8569[_0x4268b0(0x2e2)],'status':_0x4268b0(0x149),'live':_0x4268b0(0x1d7)}),_0x57467b++;}}),_0x57467b!=0x0&&(dbConfig[_0x5d0543(0x217)](_0x5d0543(0x29d))['assign'](_0x43dcf8)[_0x5d0543(0x18d)](),config=_0x43dcf8,restoredConfigFile=_0x57467b);}}async function restoreConfigNotify(_0x158ccb){const _0x30c552=_0x183dae;let _0x5a0e6c;if(restoredConfigFile==0x1)_0x5a0e6c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x5a0e6c='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x158ccb)io['to']('botmanager')['emit'](_0x30c552(0x25a),_0x5a0e6c);else{logger[_0x30c552(0x1f9)]('-----------------------------------------------------------------------------------'),logger[_0x30c552(0x1f9)](_0x5a0e6c),logger[_0x30c552(0x1f9)](_0x30c552(0x264)),logger[_0x30c552(0x1f9)]('');if(tgBot&&settings[_0x30c552(0x2ed)]&&settings['telegramEvents']!=_0x30c552(0x1e1))await sendTelegram(settings[_0x30c552(0x2ed)],_0x30c552(0x233)+_0x5a0e6c);}}function decryptRSA(_0x9ccc69,_0x765e26){const _0x227416=_0x183dae,_0x2f499b=forge['pki'][_0x227416(0x1d6)](_0x9ccc69),_0x3d7bc9=_0x2f499b[_0x227416(0x258)](forge['util']['decode64'](_0x765e26),_0x227416(0x244),{'md':forge['md'][_0x227416(0x1c0)][_0x227416(0x1be)](),'mgf1':{'md':forge['md'][_0x227416(0x1c0)][_0x227416(0x1be)]()}});return _0x3d7bc9;}function validateCredentials(_0x98054a,_0x1aa728){const _0x5b7185=_0x183dae;if(_0x98054a[_0x5b7185(0x1c8)]==settings['bbUsername']&&bcrypt[_0x5b7185(0x10b)](_0x98054a['password'],settings[_0x5b7185(0x2ee)])){if(settings[_0x5b7185(0x2f7)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x3b569f=generateLoginToken(_0x1aa728);return{'allow':!![],'reason':_0x5b7185(0x24c),'token':_0x3b569f};}}else return{'allow':![],'reason':_0x5b7185(0x262),'token':null};}function refreshToken(_0xb56f9b){const _0x100e48=_0x183dae,_0x3a75e0=generateLoginToken(_0xb56f9b);return{'allow':!![],'reason':_0x100e48(0x24c),'token':_0x3a75e0};}function validateAccess(_0x326d74,_0x129cea,_0x4c6ccf){const _0x2d7a0c=_0x183dae,_0x3e9660=_0x4c6ccf?_0x4c6ccf:devices[_0x129cea]['ip'];let _0x3049ff;const _0x1221c0=_0x5c65ee=>{const _0x1f5687=_0x15c7;if(settings[_0x1f5687(0x210)]){if(settings[_0x1f5687(0x2f7)]){if(telegram2FaApproved(_0x129cea)){const _0xd3da7b=generateLoginToken(_0x129cea);return{'allow':!![],'reason':_0x1f5687(0x241),'token':_0xd3da7b};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3049ff=validToken(_0x5c65ee,_0x129cea),_0x3049ff[_0x1f5687(0x206)](_0x1f5687(0xfd))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5c65ee}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x1f5687(0x184),'token':null};};if(settings[_0x2d7a0c(0x1f8)]){let _0x4776b1=[...settings['whitelist'],'::1','::ffff:127.0.0.1',_0x2d7a0c(0x102)];if(_0x4776b1[_0x2d7a0c(0x11a)](_0x3e9660))return _0x1221c0(_0x326d74);else{_0x3049ff=validToken(_0x326d74,_0x129cea);if(_0x3049ff['hasOwnProperty'](_0x2d7a0c(0xfd)))return _0x1221c0(_0x326d74);else{if(telegramIpApproved(_0x129cea)){const _0x27eaf9=generateToken(_0x129cea);return _0x3049ff=_0x1221c0(_0x326d74),_0x3049ff[_0x2d7a0c(0x248)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x27eaf9}:_0x3049ff;}else return settings[_0x2d7a0c(0x131)]?{'allow':![],'reason':_0x2d7a0c(0x172),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1221c0(_0x326d74);}function timelyDecrypt(_0x317ac5,_0x15175f,_0x27ab7e='@'){const _0x31a6b5=_0x183dae;if(_0x317ac5)try{const _0x3690bf=decryptRSA(secure[_0x31a6b5(0x1ff)],_0x317ac5),_0x43de63=_0x3690bf[_0x31a6b5(0x2ce)](_0x27ab7e)[0x0],_0x555a53=_0x3690bf[_0x31a6b5(0x2ce)](_0x27ab7e)[0x1],_0x5032bd=new Date()[_0x31a6b5(0x2a7)]();if(_0x15175f){if(_0x5032bd-_0x555a53<maxSecretAge*0x3e8)return _0x43de63;else return![];}else return _0x43de63;}catch(_0x4276c3){return![];}else return![];}const validToken=(_0x256743,_0x2794ff)=>{const _0x9f5908=_0x183dae,_0x512604=devices[_0x2794ff]['ip'];if(!_0x256743)return{'error':_0x9f5908(0x15b)};for(let _0x168337 of blacklist){if(_0x168337[_0x9f5908(0x2c4)]==_0x256743)return{'error':'Token\x20blacklisted'};}let _0x48c4be;try{_0x48c4be=jwt[_0x9f5908(0x21f)](_0x256743,secure[_0x9f5908(0x181)]+_0x2794ff);}catch{return{'error':_0x9f5908(0x22e)};}if(!_0x48c4be[_0x9f5908(0x206)](_0x9f5908(0x229))&&!_0x48c4be[_0x9f5908(0x206)](_0x9f5908(0x1c8))||!_0x48c4be['hasOwnProperty'](_0x9f5908(0x27c)))return{'error':_0x9f5908(0x118)};if(!_0x48c4be[_0x9f5908(0x206)](_0x9f5908(0x1c8))&&_0x48c4be[_0x9f5908(0x206)]('clientip')){const {clientip:_0x2f6afd}=_0x48c4be;return _0x512604==_0x2f6afd?{'success':_0x9f5908(0x1fc)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x48c4be['hasOwnProperty'](_0x9f5908(0x1c8))&&_0x48c4be[_0x9f5908(0x206)](_0x9f5908(0x229))){const {username:_0x491afc,clientip:_0xdfbf90}=_0x48c4be;return settings[_0x9f5908(0x226)]==_0x491afc&&_0x512604==_0xdfbf90?{'success':_0x9f5908(0x1fc)}:{'error':_0x9f5908(0x127)};}}},generateLoginToken=_0x20b10c=>{const _0x1ffe11=_0x183dae;if(_0x20b10c){const _0x355a80=devices[_0x20b10c]['ip'];return jwt[_0x1ffe11(0x306)]({'username':settings[_0x1ffe11(0x226)],'clientip':_0x355a80},secure['secret']+_0x20b10c,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x5ec150=>{const _0x364110=_0x183dae;if(_0x5ec150){const _0x443fd3=devices[_0x5ec150]['ip'];return jwt[_0x364110(0x306)]({'clientip':_0x443fd3},secure[_0x364110(0x181)]+_0x5ec150,{'expiresIn':devices[_0x5ec150]['telegramIpApproval'][_0x364110(0x105)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x457e63=>{const _0x3f40cb=_0x183dae;let _0x280db6=![];return devices[_0x457e63][_0x3f40cb(0x2ec)]&&devices[_0x457e63]['telegramIpApproval'][_0x3f40cb(0x105)]!=_0x3f40cb(0x280)&&(_0x280db6=devices[_0x457e63]['telegramIpApproval'][_0x3f40cb(0x229)]==devices[_0x457e63]['ip']&&new Date()[_0x3f40cb(0x2a7)]()-devices[_0x457e63][_0x3f40cb(0x2ec)][_0x3f40cb(0x221)]<devices[_0x457e63]['telegramIpApproval']['expiry']*0x3c*0x3e8),_0x280db6;},telegram2FaApproved=_0x3778d1=>{const _0x1f6f21=_0x183dae;let _0x30496c=![];return devices[_0x3778d1][_0x1f6f21(0x2dd)]&&devices[_0x3778d1][_0x1f6f21(0x2dd)][_0x1f6f21(0x105)]!='reject'&&(_0x30496c=devices[_0x3778d1]['telegram2FaApproval'][_0x1f6f21(0x229)]==devices[_0x3778d1]['ip']&&new Date()[_0x1f6f21(0x2a7)]()-devices[_0x3778d1]['telegram2FaApproval']['timestamp']<devices[_0x3778d1][_0x1f6f21(0x2dd)][_0x1f6f21(0x105)]*0x3c*0x3e8),_0x30496c;},normalizeIP=_0x523469=>{const _0x28dbeb=_0x183dae;let _0x34c5df=null,_0x10dbad=null;if(ipaddr[_0x28dbeb(0x2cf)](_0x523469)){const _0x432c35=ipaddr['parse'](_0x523469);_0x432c35[_0x28dbeb(0x114)]()==='ipv6'?(_0x432c35[_0x28dbeb(0x1a8)]()&&(_0x34c5df=_0x432c35[_0x28dbeb(0x1c4)]()[_0x28dbeb(0x189)]()),_0x10dbad=_0x432c35[_0x28dbeb(0x189)]()):(_0x34c5df=_0x432c35[_0x28dbeb(0x189)](),_0x10dbad=_0x432c35[_0x28dbeb(0x14e)]()[_0x28dbeb(0x189)]());}return{'show':_0x34c5df?_0x34c5df:_0x10dbad,'store':_0x10dbad};};function formatDate(_0x53cdc6){const _0x38afd9=_0x183dae;return _0x53cdc6[_0x38afd9(0x245)]()+'/'+(_0x53cdc6[_0x38afd9(0x110)]()+0x1)[_0x38afd9(0x189)]()[_0x38afd9(0x1cb)](0x2,'0')+'/'+_0x53cdc6[_0x38afd9(0x287)]()[_0x38afd9(0x189)]()[_0x38afd9(0x1cb)](0x2,'0')+'\x20'+_0x53cdc6[_0x38afd9(0x1b9)]()[_0x38afd9(0x189)]()[_0x38afd9(0x1cb)](0x2,'0')+':'+_0x53cdc6[_0x38afd9(0x15c)]()[_0x38afd9(0x189)]()[_0x38afd9(0x1cb)](0x2,'0')+':'+_0x53cdc6[_0x38afd9(0x1e5)]()[_0x38afd9(0x189)]()[_0x38afd9(0x1cb)](0x2,'0');}function sleep(_0x138ad7){return new Promise(_0x1f5297=>setTimeout(_0x1f5297,_0x138ad7));}