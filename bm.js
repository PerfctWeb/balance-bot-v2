const _0x4e365c=_0x4dfc;(function(_0x417fe2,_0x42a0af){const _0x430ebf=_0x4dfc,_0x9689b6=_0x417fe2();while(!![]){try{const _0x5184c4=-parseInt(_0x430ebf(0x1e5))/0x1+-parseInt(_0x430ebf(0x2c6))/0x2+parseInt(_0x430ebf(0x1bb))/0x3+parseInt(_0x430ebf(0x272))/0x4+parseInt(_0x430ebf(0x21c))/0x5*(parseInt(_0x430ebf(0x280))/0x6)+parseInt(_0x430ebf(0x1eb))/0x7+-parseInt(_0x430ebf(0x259))/0x8;if(_0x5184c4===_0x42a0af)break;else _0x9689b6['push'](_0x9689b6['shift']());}catch(_0x2f0f76){_0x9689b6['push'](_0x9689b6['shift']());}}}(_0x5abf,0x6cea3));const _0x25e825=function(){let _0x18c1b0=!![];return function(_0x4c0534,_0x50a94e){const _0x526b09=_0x18c1b0?function(){const _0x40fa19=_0x4dfc;if(_0x50a94e){const _0x2e325b=_0x50a94e[_0x40fa19(0x2e2)](_0x4c0534,arguments);return _0x50a94e=null,_0x2e325b;}}:function(){};return _0x18c1b0=![],_0x526b09;};}(),_0x427287=_0x25e825(this,function(){const _0x3e1b14=_0x4dfc;return _0x427287[_0x3e1b14(0x208)]()[_0x3e1b14(0x201)](_0x3e1b14(0x229))[_0x3e1b14(0x208)]()[_0x3e1b14(0x291)](_0x427287)[_0x3e1b14(0x201)]('(((.+)+)+)+$');});_0x427287();'use strict';process[_0x4e365c(0x2a4)][_0x4e365c(0x2e8)]=0x1;const childProcess=require('child_process'),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4e365c(0x20d)),low=require('lowdb'),path=require(_0x4e365c(0x245)),crypto=require('crypto'),Crypt=require(_0x4e365c(0x20b))[_0x4e365c(0x2ca)],RSA=require('hybrid-crypto-js')[_0x4e365c(0x1d6)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),analyticsLib=require(_0x4e365c(0x1b8))['default'],googleAnalytics=require(_0x4e365c(0x1be))[_0x4e365c(0x1e0)],ipaddr=require('ipaddr.js'),argv=require(_0x4e365c(0x295))(process[_0x4e365c(0x1ec)]['slice'](0x2))['argv'],PORT=argv[_0x4e365c(0x1c8)]||_0x4e365c(0x1f1),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4e365c(0x29a)](PORT))return console[_0x4e365c(0x235)](_0x4e365c(0x205)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x4e365c(0x275)](0x1);const HOST=argv[_0x4e365c(0x252)]||null,userID=argv[_0x4e365c(0x2e6)]||'';let bbpath=_0x4e365c(0x2a1),bbpath2='';const botfile='bot.js',configfile=_0x4e365c(0x298),settingsfile=_0x4e365c(0x2ae),securefile=_0x4e365c(0x1dc),validInstallation=fs[_0x4e365c(0x1da)]('../install.js');!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4e365c(0x2cb)),configpath=userID?bbpath+_0x4e365c(0x2ac)+userID+'/':bbpath+_0x4e365c(0x2ac),configbackuppath=configpath+_0x4e365c(0x2b2);!fs['existsSync'](configpath)&&fs[_0x4e365c(0x200)](configpath);!fs[_0x4e365c(0x1da)](configbackuppath)&&fs[_0x4e365c(0x200)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e365c(0x2cc)]({'bots':[]})[_0x4e365c(0x227)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4e365c(0x2cc)]({'settings':{'timeshift':0x0}})[_0x4e365c(0x227)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4e365c(0x2cc)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x4e365c(0x1d4)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x4e365c(0x1b4)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4e365c(0x1df)),app=express(),http=require(_0x4e365c(0x1f3))[_0x4e365c(0x290)](app);app[_0x4e365c(0x296)](express['static'](path[_0x4e365c(0x1d5)](__dirname,bbpath2,_0x4e365c(0x20c)))),app[_0x4e365c(0x296)](express[_0x4e365c(0x220)](path['join'](__dirname,bbpath2,_0x4e365c(0x2ea)))),app['get']('/',function(_0x3384bd,_0x4c08a2){const _0x479609=_0x4e365c;_0x4c08a2[_0x479609(0x281)](path[_0x479609(0x1d5)](__dirname,bbpath2,_0x479609(0x20c),_0x479609(0x2f3)));}),app[_0x4e365c(0x2c0)]('/:bot',function(_0xf09bc4,_0x4243e3){const _0x37d303=_0x4e365c;_0x4243e3[_0x37d303(0x281)](path[_0x37d303(0x1d5)](__dirname,bbpath2,'build',_0x37d303(0x2f3)));}),app[_0x4e365c(0x2c0)]('/:bot/portfolio',(_0x554775,_0x3ba216)=>{const _0x36368d=_0x4e365c;_0x3ba216[_0x36368d(0x281)](path[_0x36368d(0x1d5)](__dirname,bbpath2,_0x36368d(0x2ea),_0x36368d(0x2f3)));}),app[_0x4e365c(0x2c0)](_0x4e365c(0x2dc),(_0x36e8a1,_0x1c60ca)=>{const _0x33244c=_0x4e365c;_0x1c60ca[_0x33244c(0x281)](path[_0x33244c(0x1d5)](__dirname,bbpath2,'build',_0x33244c(0x2f3)));}),app['get']('/:bot/coins',(_0x5a446e,_0x2dc11f)=>{const _0x17722d=_0x4e365c;_0x2dc11f['sendFile'](path[_0x17722d(0x1d5)](__dirname,bbpath2,_0x17722d(0x2ea),_0x17722d(0x2f3)));}),app[_0x4e365c(0x2c0)](_0x4e365c(0x225),(_0x32c6fe,_0x55aef6)=>{const _0xce0eea=_0x4e365c;_0x55aef6[_0xce0eea(0x281)](path[_0xce0eea(0x1d5)](__dirname,bbpath2,'build','index.html'));}),app[_0x4e365c(0x2c0)]('/:bot/configuration',(_0x221c92,_0x598459)=>{const _0x33253b=_0x4e365c;_0x598459[_0x33253b(0x281)](path[_0x33253b(0x1d5)](__dirname,bbpath2,_0x33253b(0x2ea),'index.html'));}),app[_0x4e365c(0x2c0)]('/:bot/support',(_0x1e126e,_0x274b3e)=>{const _0x57da48=_0x4e365c;_0x274b3e[_0x57da48(0x281)](path['join'](__dirname,bbpath2,_0x57da48(0x2ea),_0x57da48(0x2f3)));});if(HOST)http['listen'](PORT,HOST);else http[_0x4e365c(0x1e6)](PORT);const io=require(_0x4e365c(0x1c7))(http,{}),analytics=analyticsLib({'app':_0x4e365c(0x226),'plugins':[googleAnalytics({'trackingId':_0x4e365c(0x1c6)})]}),TelegramBot=require(_0x4e365c(0x2a7));let tgBot;function _0x5abf(){const _0x2276f2=['restarting\x20Bot\x20','version','login','telegram2FaApproval','disabled\x20Bot\x20','analytics','telegramToken','15\x20min','1841634MUEHgX','idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','@analytics/google-analytics','/enable\x20-\x20enable\x20notifications\x0a','\x20|\x20','Notifications\x20types:\x20','timestamp','bots','onText','cancelLoading','UA-192771731-1','socket.io','port','server','30\x20min','getHours','All','all','telegramChatId','function','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','get-portfolio','emitHistory','assign','RSA-OAEP','join','RSA','::ffff:127.0.0.1','callback_query','notification','existsSync','remoteAddress','bb-secure.json','hasOwnProperty','/disable\x20-\x20disable\x20notifications\x0a','express','default','catch','remove','Invalid\x20authentication\x20token\x20(2)','error','769318BctJny','listen','Token\x20blacklisted','settings','bot-','-performance.json','5641034RNoQOy','argv','************','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','whitelist','new','3000',':\x20Bot\x20Mgr\x20>\x20','http','secure','conn','getMonth','secret','getStartingBalances','type','order','<b>Balance\x20Bot\x20status:</b>\x0a','success','place-order','Unauthorized\x20attempt\x20to\x20delete\x20bot','hashSync','mkdirSync','search','blacklist','referer','includes','Error:\x20Invalid\x20argument\x20','telegramIpApproval','access\x20timeout','toString','https://hodlerhacks.com','filter','hybrid-crypto-js','build2','date-fns','padStart','starting\x20new\x20bot\x20|\x20Bot\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20Mgr\x20>\x20','get-logs','connection','store-settings','toIPv4MappedAddress','telegramEnabled','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','isValid','SIGTERM','botmanager','10rxOJAN','\x20/\x20','Notifications\x20disabled\x0a','stopPolling','static','disabled','inherit','2FA\x20required','/help\x20-\x20show\x20available\x20commands\x0a','/:bot/history','Balance\x20Bot','write','sendMessage','(((.+)+)+)+$','accept','username','/restart\x20-\x20restart\x20bot(s)\x0a','enabled','then','settings.','access','bbPassword','running','status','Allow\x20login\x20from\x20IP\x20address\x20<b>','log','-----------------------------------------------------------------------------------','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','update-bot','temporary\x20token\x20generated','randomFillSync','fork','5\x20min','isDirectory','loginRequired','2FA\x20login\x20required','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','starting\x20bot\x20|\x20Bot\x20','path','split','cancel-loading','once','timeshift','-config.json','uuid','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','chat','args','max','Invalid\x20Telegram\x20token','expiry','host','-results.json','telegramEvents','error\x20while\x20deleting\x20config\x20files:\x20','getTime','stopped','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','521504YJXxUy','1000','Unauthorized\x20attempt\x20to\x20get\x20logs','set','clientip','from','Unauthorized\x20attempt\x20to\x20add\x20bot','ipv6','No\x20bots\x20running\x20right\x20now','reject','kind','stop','botID','Login\x20rejected','temporary\x20access\x20timeout','disconnect','pidExpireLogin','2FA','add-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','store-headless','hex','logout','value','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','2180604hUQime','generateKeyPairAsync','Unauthorized\x20attempt\x20to\x20log\x20out','exit','Password\x20has\x20been\x20reset\x20to:\x20','publicKey','ipc','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','HTML','getUTCHours','</b>\x20?','127.0.0.1','copyFileSync','new-disabled','266094BkSdLr','sendFile','Bot\x20','temporaryAccessAllowed','telegramUsername','map','isIPv4MappedAddress','show','exp','bbUsername','reason','sockets','<b>Telegram\x20bot\x20status:</b>\x0a','removeAllListeners','push','Login\x20accepted','createServer','constructor','bot','yes','allow','yargs/yargs','use','polling_error','bb-config.json','store','test','::1','-events.json','event','unlinkSync','invalid\x20credentials','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','bb/','entries','Notifications\x20enabled','env',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','node-telegram-bot-api','sign','answerCallbackQuery','removeListener','token','config/','Orders','bb-settings.json','headers','name','\x20minutes','backup/','getMinutes','temporary\x20access\x20not\x20allowed','data','User\x20has\x20been\x20validated','send','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','whitelistEnabled','parse','pidRefreshToken','message','sortBy','readdirSync','orders','get','cloneDeep','page','getFullYear','find','reload','1545936TzrsLY','started','compareSync','storeConfiguration','Crypt','clients','defaults','storeHeadless','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','forEach','delete-bot','password','live','botname','getPortfolio','Unauthorized\x20attempt\x20to\x20get\x20portfolio','temporary\x20access\x20rejected','f2aRequired','All\x20bots','logged\x20out','showname','/off\x20-\x20stop\x20bot(s)\x0a','/:bot/performance','/on\x20-\x20start\x20bot(s)\x0a','Password\x20reset\x20rejected','Access\x20enabled\x20for\x20','alerts','Temporary\x20access\x20rejected','apply','emit','telegram','update-bb','user','reset-password','NTBA_FIX_319','handshake','build','privateKey','auth','getSeconds','match','Unauthorized\x20attempt\x20to\x20update\x20settings','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','length','index.html','verify','get-starting-balances','SIGINT','Ok,\x20will\x20send\x20alert\x20notifications\x20only','404\x20Not\x20Found','connected','encryptedUuid','Alerts','Unauthorized\x20attempt\x20to\x20store\x20configuration','kill','decrypt','login\x20token\x20generated','login\x20required','Unauthorized\x20attempt\x20to\x20update\x20bot','2FA\x20login\x20token\x20generated','\x20>\x20'];_0x5abf=function(){return _0x2276f2;};return _0x5abf();}if(settings[_0x4e365c(0x1b9)]&&settings[_0x4e365c(0x1b9)]!=''&&settings[_0x4e365c(0x284)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0xfd5d0d=_0x4e365c;console[_0xfd5d0d(0x235)](''),console[_0xfd5d0d(0x235)](_0xfd5d0d(0x236)),logging(_0xfd5d0d(0x2f0)+PORT),console['log'](_0xfd5d0d(0x236));if(config[_0xfd5d0d(0x2f2)]!=0x0)config[_0xfd5d0d(0x2cf)](_0x1a18b4=>{const _0x3c3645=_0xfd5d0d;if(_0x1a18b4[_0x3c3645(0x233)]==_0x3c3645(0x22d)||_0x1a18b4[_0x3c3645(0x233)]==_0x3c3645(0x1f0))logging(_0x3c3645(0x244)+_0x1a18b4[_0x3c3645(0x265)]+'\x20|\x20'+_0x1a18b4[_0x3c3645(0x2d3)]),startBot([_0x1a18b4[_0x3c3645(0x265)],userID],{'cwd':bbpath},function(_0xbcd0e2){if(_0xbcd0e2)logging(_0xbcd0e2);});else(_0x1a18b4[_0x3c3645(0x233)]==_0x3c3645(0x221)||_0x1a18b4[_0x3c3645(0x233)]==_0x3c3645(0x27f))&&logging(_0x3c3645(0x1bc)+_0x1a18b4[_0x3c3645(0x265)]+'\x20|\x20'+_0x1a18b4[_0x3c3645(0x2d3)]);});else!newBot&&console[_0xfd5d0d(0x235)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0xfd5d0d(0x235)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x4daecd=_0x4e365c;io['on'](_0x4daecd(0x213),_0x30fbcd=>{const _0x29330f=_0x4daecd;let _0x6a054f,_0x1fea4d,_0xf52e5,_0x3e3c0c,_0x49eb00;const _0x12350e=_0x30fbcd[_0x29330f(0x2e9)][_0x29330f(0x2af)][_0x29330f(0x203)];_0x1fea4d=_0x12350e[_0x29330f(0x2ee)](/bot[0-9]{3}/);if(_0x1fea4d)_0xf52e5=_0x1fea4d[0x0][_0x29330f(0x2ee)](/[0-9]{3}/);if(_0xf52e5)_0x6a054f=_0xf52e5[0x0];else _0x6a054f='botmanager';const _0x482f41=_0x30fbcd['handshake'][_0x29330f(0x2ec)][_0x29330f(0x2fa)];if(!_0x482f41)_0x30fbcd[_0x29330f(0x2e3)](_0x29330f(0x233),{'publicKey':secure[_0x29330f(0x277)]});else{_0x3e3c0c=timelyDecrypt(_0x482f41,![]);if(!_0x3e3c0c)_0x30fbcd[_0x29330f(0x2e3)](_0x29330f(0x233),{'publicKey':secure['publicKey']});else{_0x49eb00=normalizeIP(_0x30fbcd[_0x29330f(0x1f5)][_0x29330f(0x1db)])[_0x29330f(0x299)];if(!devices[_0x3e3c0c])devices[_0x3e3c0c]={'uuid':_0x3e3c0c,'access':{'token':null}};devices[_0x3e3c0c]['ip']=_0x49eb00;const _0x4c9574=addClient(_0x30fbcd['id'],_0x3e3c0c,_0x6a054f);setAccess(_0x4c9574),_0x30fbcd['on']('login',_0x2926d8=>{const _0x4dd43b=_0x29330f,_0x5679bb=timelyDecrypt(_0x2926d8['password']);if(_0x5679bb){_0x2926d8={'username':_0x2926d8[_0x4dd43b(0x22b)],'password':_0x5679bb},devices[_0x3e3c0c][_0x4dd43b(0x230)]=validateCredentials(_0x2926d8,_0x3e3c0c);if(devices[_0x3e3c0c][_0x4dd43b(0x230)]['allow']==![]&&devices[_0x3e3c0c][_0x4dd43b(0x230)][_0x4dd43b(0x28a)]=='2FA\x20login\x20required')_0x30fbcd[_0x4dd43b(0x2e3)](_0x4dd43b(0x233),{'access':devices[_0x3e3c0c]['access']}),loginAccess2FA(_0x3e3c0c,_0x49eb00);else{if(devices[_0x3e3c0c][_0x4dd43b(0x230)][_0x4dd43b(0x294)]==![]&&devices[_0x3e3c0c]['access'][_0x4dd43b(0x28a)]==_0x4dd43b(0x29f))_0x30fbcd[_0x4dd43b(0x2e3)](_0x4dd43b(0x233),{'access':devices[_0x3e3c0c][_0x4dd43b(0x230)]});else devices[_0x3e3c0c][_0x4dd43b(0x230)]['allow']&&devices[_0x3e3c0c][_0x4dd43b(0x230)][_0x4dd43b(0x28a)]==_0x4dd43b(0x1ae)&&(getClientsWithUuid(_0x3e3c0c)[_0x4dd43b(0x2cf)](_0x34f520=>{setAccess(_0x34f520);}),setTokenRefresh(_0x3e3c0c),setSessionTimeout(_0x4dd43b(0x1b5),_0x3e3c0c));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x30fbcd['on'](_0x29330f(0x2e7),()=>{resetPassword();}),_0x30fbcd['on'](_0x29330f(0x268),_0x4d2cab=>{removeClient(_0x30fbcd['id']);});}}});}function initClient(_0x42b5bb){const _0x347640=_0x4e365c;if(_0x42b5bb!=_0x347640(0x21b)&&config['apiKey']!=''){if(pid[_0x42b5bb])pid[_0x42b5bb]['send']({'function':'initclient','args':null});}}function getSocket(_0x3b5026){const _0x5ef2b6=_0x4e365c;return io[_0x5ef2b6(0x28b)]['sockets']['get'](_0x3b5026);}function setAccess(_0x197ff9){const _0x344273=_0x4e365c,_0x4a0c21=getSocket(_0x197ff9['id']),_0x3b2f6e=_0x197ff9[_0x344273(0x24b)],_0xa38f34=_0x197ff9[_0x344273(0x292)];devices[_0x3b2f6e][_0x344273(0x230)]=validateAccess(devices[_0x3b2f6e][_0x344273(0x230)][_0x344273(0x2ab)],_0x3b2f6e),_0x4a0c21[_0x344273(0x1d5)](_0x3b2f6e);if(devices[_0x3b2f6e][_0x344273(0x230)]['allow']){_0x4a0c21['join'](_0xa38f34);if(_0xa38f34==_0x344273(0x21b))initializeSocketBotManager(_0x4a0c21);else initializeSocketBot(_0x4a0c21);initClient(_0xa38f34);}devices[_0x3b2f6e]['access'][_0x344273(0x2ab)]&&devices[_0x3b2f6e][_0x344273(0x230)]['reason']==_0x344273(0x23c)&&setSessionTimeout(_0x344273(0x26a),_0x3b2f6e),devices[_0x3b2f6e][_0x344273(0x230)]['token']&&devices[_0x3b2f6e][_0x344273(0x230)][_0x344273(0x28a)]==_0x344273(0x1b1)&&setSessionTimeout(_0x344273(0x1b5),_0x3b2f6e),_0x4a0c21['emit']('status',{'status':_0x197ff9[_0x344273(0x1c9)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3b2f6e][_0x344273(0x230)],'externalip':devices[_0x3b2f6e]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x3b2f6e][_0x344273(0x230)][_0x344273(0x294)]==![]&&devices[_0x3b2f6e][_0x344273(0x230)][_0x344273(0x28a)]==_0x344273(0x223)&&temporaryAccess2FA(_0x3b2f6e,devices[_0x3b2f6e]['ip']);}function _0x4dfc(_0x4aee9d,_0xcb2b89){const _0x508675=_0x5abf();return _0x4dfc=function(_0x427287,_0x25e825){_0x427287=_0x427287-0x1ac;let _0x5abf6f=_0x508675[_0x427287];return _0x5abf6f;},_0x4dfc(_0x4aee9d,_0xcb2b89);}function setSessionTimeout(_0xe8b466,_0x21c8af){const _0x3c32d9=_0x4e365c;let _0x571f2c;if(_0xe8b466==_0x3c32d9(0x1b5))_0x571f2c=loginExpiry*0x3c*0x3e8;else _0x571f2c=devices[_0x21c8af][_0x3c32d9(0x206)][_0x3c32d9(0x251)]*0x3c*0x3e8-(new Date()[_0x3c32d9(0x256)]()-devices[_0x21c8af][_0x3c32d9(0x206)]['timestamp']);if(devices[_0x21c8af][_0x3c32d9(0x269)])clearTimeout(devices[_0x21c8af][_0x3c32d9(0x269)]);devices[_0x21c8af]['pidExpireLogin']=setTimeout(()=>{const _0x149a7c=_0x3c32d9;if(devices[_0x21c8af][_0x149a7c(0x2bb)])clearTimeout(devices[_0x21c8af]['pidRefreshToken']);removeSocketListeners(_0x21c8af),addBlacklist(_0x21c8af),devices[_0x21c8af][_0x149a7c(0x206)]=null,devices[_0x21c8af][_0x149a7c(0x1b6)]=null,devices[_0x21c8af][_0x149a7c(0x230)][_0x149a7c(0x2ab)]=null,devices[_0x21c8af]['access']=validateAccess(devices[_0x21c8af]['access'][_0x149a7c(0x2ab)],_0x21c8af),!(devices[_0x21c8af][_0x149a7c(0x230)][_0x149a7c(0x294)]&&devices[_0x21c8af][_0x149a7c(0x230)][_0x149a7c(0x28a)]=='login\x20not\x20required')&&(_0xe8b466==_0x149a7c(0x1b5)?io['to'](_0x21c8af)[_0x149a7c(0x2e3)](_0x149a7c(0x233),{'access':{'allow':![],'reason':_0x149a7c(0x207),'token':null}}):io['to'](_0x21c8af)[_0x149a7c(0x2e3)](_0x149a7c(0x233),{'access':{'allow':![],'reason':_0x149a7c(0x267),'token':null}})),devices[_0x21c8af]['access'][_0x149a7c(0x2ab)]=null;},_0x571f2c);}function setTokenRefresh(_0x1bf131){const _0x1bea13=_0x4e365c;if(devices[_0x1bf131][_0x1bea13(0x2bb)])clearTimeout(devices[_0x1bf131][_0x1bea13(0x2bb)]);devices[_0x1bf131]['pidRefreshToken']=setTimeout(()=>{const _0x197aa3=_0x1bea13;getClientsWithUuid(_0x1bf131)[_0x197aa3(0x2f2)]!=0x0?(devices[_0x1bf131][_0x197aa3(0x230)]=refreshToken(_0x1bf131),io['to'](_0x1bf131)[_0x197aa3(0x2e3)](_0x197aa3(0x233),{'status':_0x197aa3(0x2f9),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1bf131][_0x197aa3(0x230)],'externalip':devices[_0x1bf131]['ip'],'publicKey':secure[_0x197aa3(0x277)],'validInstallation':validInstallation}),setTokenRefresh(_0x1bf131)):clearTimeout(devices[_0x1bf131][_0x197aa3(0x2bb)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5b0ced){const _0x176d32=_0x4e365c,_0x2e0b8c=getClient(_0x5b0ced['id'])[_0x176d32(0x24b)];_0x5b0ced[_0x176d32(0x2e3)](_0x176d32(0x1c3),config),_0x5b0ced[_0x176d32(0x2e3)](_0x176d32(0x1e8),cleanSettings()),_0x5b0ced['on'](_0x176d32(0x26b),_0x36a56c=>{const _0x22eb53=_0x176d32;if(validateAccess(_0x36a56c,_0x2e0b8c)[_0x22eb53(0x294)])addBot();else logging(_0x22eb53(0x25f));}),_0x5b0ced['on'](_0x176d32(0x23b),(_0x1b855f,_0x47d9f8)=>{const _0x5416b1=_0x176d32;if(validateAccess(_0x47d9f8,_0x2e0b8c)[_0x5416b1(0x294)])toggleBot(_0x1b855f[_0x5416b1(0x265)],_0x1b855f[_0x5416b1(0x233)],_0x1b855f[_0x5416b1(0x2d2)]);else logging(_0x5416b1(0x1b0));}),_0x5b0ced['on'](_0x176d32(0x2d0),(_0x540b6c,_0x9c3b1f)=>{const _0x574d2b=_0x176d32;if(validateAccess(_0x9c3b1f,_0x2e0b8c)[_0x574d2b(0x294)])deleteBot(_0x540b6c);else logging(_0x574d2b(0x1fe));}),_0x5b0ced['on'](_0x176d32(0x214),(_0xd73ebb,_0x1b3762)=>{const _0x346ae7=_0x176d32;if(validateAccess(_0x1b3762,_0x2e0b8c)[_0x346ae7(0x294)])storeSettings(_0xd73ebb,!![]);else logging(_0x346ae7(0x2ef));}),_0x5b0ced['on'](_0x176d32(0x2e5),(_0x499b0c,_0x3cddcf)=>{const _0x3766bf=_0x176d32;if(validateAccess(_0x3cddcf,_0x2e0b8c)[_0x3766bf(0x294)])updateBB();else logging(_0x3766bf(0x2ef));}),_0x5b0ced['on'](_0x176d32(0x26f),_0x4fb1d2=>{const _0x2b9495=_0x176d32;if(validateAccess(_0x4fb1d2,_0x2e0b8c)[_0x2b9495(0x294)]){if(devices[_0x2e0b8c][_0x2b9495(0x2bb)])clearTimeout(devices[_0x2e0b8c]['pidRefreshToken']);if(devices[_0x2e0b8c]['pidExpireLogin'])clearTimeout(devices[_0x2e0b8c][_0x2b9495(0x269)]);removeSocketListeners(getClient(_0x5b0ced['id'])[_0x2b9495(0x24b)]),addBlacklist(_0x2e0b8c),devices[_0x2e0b8c]['telegramIpApproval']=null,devices[_0x2e0b8c][_0x2b9495(0x1b6)]=null,devices[_0x2e0b8c]['access'][_0x2b9495(0x2ab)]=null,io['to'](getClient(_0x5b0ced['id'])[_0x2b9495(0x24b)])[_0x2b9495(0x2e3)](_0x2b9495(0x233),{'access':{'allow':![],'reason':_0x2b9495(0x2d9),'token':null}});}else logging(_0x2b9495(0x274));});}function initializeSocketBot(_0x81031a){const _0x4ffd8d=_0x4e365c,_0x48f583=getClient(_0x81031a['id'])['bot'],_0x38ee40=getClient(_0x81031a['id'])[_0x4ffd8d(0x24b)];_0x81031a['on'](_0x4ffd8d(0x212),(_0x47da12,_0x3a8810)=>{const _0x47d733=_0x4ffd8d;if(validateAccess(_0x3a8810,_0x38ee40)[_0x47d733(0x294)]){if(pid[_0x48f583])pid[_0x48f583][_0x47d733(0x2b7)]({'function':_0x47d733(0x1d2),'args':_0x47da12});}else logging(_0x47d733(0x25b));}),_0x81031a['on'](_0x4ffd8d(0x1d1),(_0x2c471e,_0x5a132c)=>{const _0x1496c6=_0x4ffd8d;if(validateAccess(_0x5a132c,_0x38ee40)[_0x1496c6(0x294)]){if(pid[_0x48f583])pid[_0x48f583][_0x1496c6(0x2b7)]({'function':_0x1496c6(0x2d4),'args':_0x2c471e});}else logging(_0x1496c6(0x2d5));}),_0x81031a['on']('store-configuration',(_0x28cfdb,_0x148de8)=>{const _0x1689f7=_0x4ffd8d;if(validateAccess(_0x148de8,_0x38ee40)[_0x1689f7(0x294)]){if(pid[_0x48f583])pid[_0x48f583][_0x1689f7(0x2b7)]({'function':_0x1689f7(0x2c9),'args':_0x28cfdb});}else logging(_0x1689f7(0x2fc));}),_0x81031a['on'](_0x4ffd8d(0x26d),(_0x4a10cf,_0x3ad633)=>{const _0xabab20=_0x4ffd8d;if(validateAccess(_0x3ad633,_0x38ee40)[_0xabab20(0x294)]){if(pid[_0x48f583])pid[_0x48f583]['send']({'function':_0xabab20(0x2cd),'args':_0x4a10cf});}else logging(_0xabab20(0x23a));}),_0x81031a['on'](_0x4ffd8d(0x2f5),_0x1bbd2d=>{const _0x56e353=_0x4ffd8d;if(validateAccess(_0x1bbd2d,_0x38ee40)[_0x56e353(0x294)]){if(pid[_0x48f583])pid[_0x48f583][_0x56e353(0x2b7)]({'function':_0x56e353(0x1f8),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x81031a['on'](_0x4ffd8d(0x1fd),(_0x219ab7,_0x5763d7)=>{const _0x130880=_0x4ffd8d;if(validateAccess(_0x5763d7,_0x38ee40)['allow']){if(pid[_0x48f583])pid[_0x48f583][_0x130880(0x2b7)]({'function':'placeOrder','args':_0x219ab7});}else logging(_0x130880(0x238));}),_0x81031a['on'](_0x4ffd8d(0x247),_0x45e1ec=>{const _0x3841c7=_0x4ffd8d;if(validateAccess(_0x45e1ec,_0x38ee40)[_0x3841c7(0x294)]){if(pid[_0x48f583])pid[_0x48f583][_0x3841c7(0x2b7)]({'function':_0x3841c7(0x1c5),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x81031a['on']('logout',_0x584421=>{const _0x2a4d2e=_0x4ffd8d;if(validateAccess(_0x584421,_0x38ee40)[_0x2a4d2e(0x294)]){if(devices[_0x38ee40]['pidRefreshToken'])clearTimeout(devices[_0x38ee40][_0x2a4d2e(0x2bb)]);if(devices[_0x38ee40][_0x2a4d2e(0x269)])clearTimeout(devices[_0x38ee40][_0x2a4d2e(0x269)]);removeSocketListeners(getClient(_0x81031a['id'])['uuid']),addBlacklist(_0x38ee40),devices[_0x38ee40][_0x2a4d2e(0x206)]=null,devices[_0x38ee40][_0x2a4d2e(0x1b6)]=null,devices[_0x38ee40]['access'][_0x2a4d2e(0x2ab)]=null,io['to'](getClient(_0x81031a['id'])[_0x2a4d2e(0x24b)])[_0x2a4d2e(0x2e3)](_0x2a4d2e(0x233),{'access':{'allow':![],'reason':_0x2a4d2e(0x2d9),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0xb6c13f){getClientsWithUuid(_0xb6c13f)['forEach'](_0x4c2eb7=>{const _0x58d808=_0x4dfc;getSocket(_0x4c2eb7['id'])[_0x58d808(0x28d)]();});}function cleanSettings(){const _0x5995ae=_0x4e365c;let _0x51173b=settings;return settings[_0x5995ae(0x1b9)]&&settings[_0x5995ae(0x1b9)]!=''&&(_0x51173b={..._0x51173b,'telegramToken':_0x5995ae(0x1ed)}),settings[_0x5995ae(0x231)]&&settings['bbPassword']!=''&&(_0x51173b={..._0x51173b,'bbPassword':_0x5995ae(0x1ed)}),_0x51173b;}function updateBB(){const _0x5608ef=_0x4e365c;installingUpdate=!![],config[_0x5608ef(0x2cf)](_0x142b44=>{const _0x4bc90b=_0x5608ef;restartBot(_0x142b44[_0x4bc90b(0x265)]);}),process['send']({'update':!![]},_0x3179af=>{});}function startBot(_0x4ffd35,_0x32e1ba,_0x505a57){const _0x695883=_0x4e365c;let _0x36f99e=![];const _0x2cbc9d=_0x4ffd35[0x0];_0x32e1ba={..._0x32e1ba,'stdio':['inherit',_0x695883(0x222),_0x695883(0x222),_0x695883(0x278)]},pid[_0x2cbc9d]=childProcess[_0x695883(0x23e)](botfile,_0x4ffd35,_0x32e1ba),pid[_0x2cbc9d]['on'](_0x695883(0x2bc),_0x1bf17c=>{const _0x1e4522=_0x695883;switch(Object['keys'](_0x1bf17c)[0x0]){case'botname':updateBotName(_0x2cbc9d,_0x1bf17c['botname']);break;case _0x1e4522(0x233):updateStatus(_0x2cbc9d,_0x1bf17c[_0x1e4522(0x233)]);break;case'live':updateLive(_0x2cbc9d,_0x1bf17c['live']);break;case'started':updateLive(_0x2cbc9d,_0x1bf17c[_0x1e4522(0x2c7)]),io['to'](_0x2cbc9d)[_0x1e4522(0x2e3)](_0x1e4522(0x233),{'access':{'allow':![],'reason':_0x1e4522(0x2c5),'token':null}});break;case _0x1e4522(0x264):_0x1bf17c['stop']=='restart'&&restartBot(_0x2cbc9d);_0x1bf17c['stop']==_0x1e4522(0x1ac)&&toggleBot(_0x2cbc9d,_0x1e4522(0x221),_0x1e4522(0x257));break;case _0x1e4522(0x2e4):sendTelegram(_0x2cbc9d,_0x1bf17c['telegram']);break;case'function':io['to'](_0x2cbc9d)['emit'](_0x1bf17c[_0x1e4522(0x1cf)],_0x1bf17c[_0x1e4522(0x24e)]);break;}}),pid[_0x2cbc9d]['on'](_0x695883(0x1e4),function(_0x4913be){if(_0x36f99e)return;_0x36f99e=!![],_0x505a57(_0x4913be);}),pid[_0x2cbc9d]['on'](_0x695883(0x275),function(_0x1b22b0){const _0x2e9bb9=_0x695883;if(installingUpdate)return;if(_0x36f99e)return;_0x36f99e=!![],_0x505a57(null);const _0xa0f4df=dbConfig['get'](_0x2e9bb9(0x1c3))['find']({'botID':_0x2cbc9d})[_0x2e9bb9(0x270)]();_0xa0f4df&&(_0xa0f4df[_0x2e9bb9(0x233)]==_0x2e9bb9(0x22d)||_0xa0f4df[_0x2e9bb9(0x233)]=='new')&&(updateLive(_0x2cbc9d,_0x2e9bb9(0x257)),logging(_0x2e9bb9(0x1b3)+_0x2cbc9d),startBot([_0x2cbc9d,userID],{'cwd':bbpath},function(_0x7b6bb4){if(_0x7b6bb4)logging(_0x7b6bb4);}));});}function stopBot(_0x516f5e){const _0x52892c=_0x4e365c;getClientsWithBotID(_0x516f5e)[_0x52892c(0x2cf)](_0x431f8d=>{const _0x2dcc6f=_0x52892c;getSocket(_0x431f8d['id'])[_0x2dcc6f(0x268)](!![]),removeClient(_0x431f8d['id']);});if(pid[_0x516f5e])pid[_0x516f5e][_0x52892c(0x1ac)]();}function restartBot(_0x33591f){if(pid[_0x33591f])pid[_0x33591f]['kill']();}function addBot(){const _0x5984d4=_0x4e365c;let _0x2f970f;for(let _0x58466d=0x1;_0x58466d<0x3e9;_0x58466d++){_0x2f970f=_0x58466d[_0x5984d4(0x208)]()[_0x5984d4(0x20e)](0x3,'0');let _0x4375ff=config[_0x5984d4(0x2c4)](_0x401815=>_0x401815[_0x5984d4(0x265)]==_0x2f970f);if(!_0x4375ff)break;}if(_0x2f970f===_0x5984d4(0x25a)){logging(_0x5984d4(0x2ce));return;}logging(_0x5984d4(0x20f)+_0x2f970f),dbConfig[_0x5984d4(0x2c0)](_0x5984d4(0x1c3))['push']({'botID':_0x2f970f,'botname':_0x5984d4(0x282)+_0x2f970f,'status':_0x5984d4(0x1f0),'live':''})[_0x5984d4(0x227)](),startBot([_0x2f970f,userID],{'cwd':bbpath},function(_0x4b675f){if(_0x4b675f)logging(_0x4b675f);}),config=getConfiguration(),io['to'](_0x5984d4(0x21b))[_0x5984d4(0x2e3)](_0x5984d4(0x1c3),config);}function deleteBot(_0x4d91aa){const _0x6f78c8=_0x4e365c;getClientsWithBotID(_0x4d91aa)[_0x6f78c8(0x2cf)](_0x1fbace=>{const _0x92ec3e=_0x6f78c8;getSocket(_0x1fbace['id'])[_0x92ec3e(0x268)](!![]),removeClient(_0x1fbace['id']);}),dbConfig['get'](_0x6f78c8(0x1c3))[_0x6f78c8(0x1e2)]({'botID':_0x4d91aa})[_0x6f78c8(0x227)](),logging('deleted\x20Bot\x20'+_0x4d91aa),stopBot(_0x4d91aa);try{fs[_0x6f78c8(0x29e)](path[_0x6f78c8(0x1d5)](configpath,_0x6f78c8(0x1e9)+_0x4d91aa+_0x6f78c8(0x24a))),fs['unlinkSync'](path['join'](configpath,_0x6f78c8(0x1e9)+_0x4d91aa+_0x6f78c8(0x29c))),fs['unlinkSync'](path[_0x6f78c8(0x1d5)](configpath,'bot-'+_0x4d91aa+_0x6f78c8(0x1ea))),fs[_0x6f78c8(0x29e)](path[_0x6f78c8(0x1d5)](configpath,_0x6f78c8(0x1e9)+_0x4d91aa+_0x6f78c8(0x253)));}catch(_0x338eea){if(_0x338eea)logging(_0x6f78c8(0x255),_0x338eea);}config=getConfiguration(),io['to'](_0x6f78c8(0x21b))['emit'](_0x6f78c8(0x1c3),config);}function toggleBot(_0x1d9266,_0x5a961d,_0xda4248){const _0x4f3574=_0x4e365c;dbConfig[_0x4f3574(0x2c0)](_0x4f3574(0x1c3))[_0x4f3574(0x2c4)]({'botID':_0x1d9266})[_0x4f3574(0x1d3)]({'status':_0x5a961d})['assign']({'live':_0xda4248})['write']();if(_0x5a961d==_0x4f3574(0x22d)||_0x5a961d==_0x4f3574(0x1f0))logging('enabled\x20Bot\x20'+_0x1d9266),startBot([_0x1d9266,userID],{'cwd':bbpath},function(_0x5e13e0){if(_0x5e13e0)logging(_0x5e13e0);});else(_0x5a961d==_0x4f3574(0x221)||_0x5a961d==_0x4f3574(0x27f))&&(logging(_0x4f3574(0x1b7)+_0x1d9266),stopBot(_0x1d9266));config=getConfiguration(),io['to'](_0x4f3574(0x21b))[_0x4f3574(0x2e3)](_0x4f3574(0x1c3),config);}function toggleStatus(_0x465c79){const _0x291a57=_0x4e365c;let _0x47f81b=dbConfig[_0x291a57(0x2c0)](_0x291a57(0x1c3))[_0x291a57(0x2c4)]({'botID':_0x465c79})[_0x291a57(0x270)](),_0x37909a;if(_0x47f81b[_0x291a57(0x233)]==='enabled')_0x37909a=_0x291a57(0x221);else{if(_0x47f81b['status']===_0x291a57(0x1f0))_0x37909a=_0x291a57(0x27f);else{if(_0x47f81b[_0x291a57(0x233)]===_0x291a57(0x27f))_0x37909a=_0x291a57(0x1f0);else{if(_0x47f81b[_0x291a57(0x233)]===_0x291a57(0x221))_0x37909a='enabled';}}}return _0x37909a;}function updateStatus(_0x37752a,_0x39f80c){const _0x289276=_0x4e365c;dbConfig['get'](_0x289276(0x1c3))['find']({'botID':_0x37752a})[_0x289276(0x1d3)]({'status':_0x39f80c})[_0x289276(0x227)](),config=getConfiguration(),io['to'](_0x289276(0x21b))[_0x289276(0x2e3)](_0x289276(0x1c3),config);}function updateLive(_0x2ce9d0,_0x189812){const _0x3bcd61=_0x4e365c;dbConfig[_0x3bcd61(0x2c0)](_0x3bcd61(0x1c3))[_0x3bcd61(0x2c4)]({'botID':_0x2ce9d0})[_0x3bcd61(0x1d3)]({'live':_0x189812})[_0x3bcd61(0x227)](),config=getConfiguration(),io['to'](_0x3bcd61(0x21b))[_0x3bcd61(0x2e3)](_0x3bcd61(0x1c3),config);}function updateBotName(_0x34362a,_0x44a94d){const _0x599fae=_0x4e365c;dbConfig[_0x599fae(0x2c0)](_0x599fae(0x1c3))['find']({'botID':_0x34362a})[_0x599fae(0x1d3)]({'botname':_0x44a94d})[_0x599fae(0x227)](),config=getConfiguration(),io['to'](_0x599fae(0x21b))['emit'](_0x599fae(0x1c3),config);}function telegramError(_0x4a974e){const _0xf63a8c=_0x4e365c;console[_0xf63a8c(0x235)](getTimeStamp()+_0xf63a8c(0x2a5));}function validateTelegram(_0xc7a354){const _0x202ef2=_0x4e365c;if(_0xc7a354['from'][_0x202ef2(0x22b)]!=settings[_0x202ef2(0x284)]&&'@'+_0xc7a354[_0x202ef2(0x25e)]['username']!=settings[_0x202ef2(0x284)])return tgBot[_0x202ef2(0x228)](_0xc7a354[_0x202ef2(0x24d)]['id'],_0x202ef2(0x1bd),{'parse_mode':_0x202ef2(0x27a)})[_0x202ef2(0x1e1)](_0x1d8711=>{telegramError(_0x1d8711);}),![];return!![];}async function initTelegram(){const _0x3cad4a=_0x4e365c;if(tgBot)tgBot[_0x3cad4a(0x21f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3cad4a(0x1b9)],{'polling':!![]});let _0x296a2a=_0x3cad4a(0x237);_0x296a2a+='\x0a',_0x296a2a+=_0x3cad4a(0x1bf),_0x296a2a+=_0x3cad4a(0x1de),_0x296a2a+=_0x3cad4a(0x258),_0x296a2a+=_0x3cad4a(0x22c),_0x296a2a+=_0x3cad4a(0x2dd),_0x296a2a+=_0x3cad4a(0x2db),_0x296a2a+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x296a2a+=_0x3cad4a(0x224);let _0x368dbd=_0x3cad4a(0x218);_0x368dbd+='\x0a',_0x368dbd+=_0x296a2a,tgBot[_0x3cad4a(0x1c4)](/\/start/,_0x268c50=>{const _0x22b26d=_0x3cad4a;if(!validateTelegram(_0x268c50))return;if(settings['telegramChatId']!=_0x268c50[_0x22b26d(0x24d)]['id'])updateSetting(_0x22b26d(0x1ce),_0x268c50['chat']['id']);updateSetting(_0x22b26d(0x216),!![]),tgBot[_0x22b26d(0x228)](_0x268c50[_0x22b26d(0x24d)]['id'],_0x368dbd)[_0x22b26d(0x1e1)](_0x15c395=>{telegramError(_0x15c395);});}),tgBot['onText'](/\/enable/,_0x4b3347=>{const _0x1b752c=_0x3cad4a;if(!validateTelegram(_0x4b3347))return;if(settings[_0x1b752c(0x1ce)]!=_0x4b3347[_0x1b752c(0x24d)]['id'])updateSetting(_0x1b752c(0x1ce),_0x4b3347[_0x1b752c(0x24d)]['id']);updateSetting(_0x1b752c(0x216),!![]),tgBot['sendMessage'](_0x4b3347[_0x1b752c(0x24d)]['id'],_0x1b752c(0x2a3))[_0x1b752c(0x1e1)](_0x1d94dd=>{telegramError(_0x1d94dd);});}),tgBot[_0x3cad4a(0x1c4)](/\/config/,async _0x3a35a8=>{const _0x304c30=_0x3cad4a;if(!validateTelegram(_0x3a35a8))return;tgBot[_0x304c30(0x2aa)]('callback_query'),tgBot['sendMessage'](_0x3a35a8[_0x304c30(0x24d)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x304c30(0x2ad),'callback_data':'orders'},{'text':_0x304c30(0x2fb),'callback_data':_0x304c30(0x2e0)},{'text':_0x304c30(0x1cc),'callback_data':_0x304c30(0x1cd)}]]}})[_0x304c30(0x1e1)](_0x2a951f=>{telegramError(_0x2a951f);}),tgBot['on'](_0x304c30(0x1d8),async _0xb53010=>{const _0x4bf462=_0x304c30,_0x24d4d6=_0xb53010[_0x4bf462(0x2b5)],_0x28d5c7=_0xb53010[_0x4bf462(0x2bc)];tgBot[_0x4bf462(0x2a9)](_0xb53010['id'])[_0x4bf462(0x22e)](async()=>{const _0x2d47ed=_0x4bf462;_0x24d4d6==_0x2d47ed(0x2bf)&&(updateSetting(_0x2d47ed(0x254),_0x2d47ed(0x2bf)),updateSetting(_0x2d47ed(0x216),!![]),await tgBot[_0x2d47ed(0x228)](_0x28d5c7['chat']['id'],_0x2d47ed(0x210))[_0x2d47ed(0x1e1)](_0xc29776=>{telegramError(_0xc29776);}));_0x24d4d6==_0x2d47ed(0x2e0)&&(updateSetting('telegramEvents',_0x2d47ed(0x2e0)),updateSetting(_0x2d47ed(0x216),!![]),await tgBot[_0x2d47ed(0x228)](_0x28d5c7[_0x2d47ed(0x24d)]['id'],_0x2d47ed(0x2f7))['catch'](_0xf03aa9=>{telegramError(_0xf03aa9);}));_0x24d4d6==_0x2d47ed(0x1cd)&&(updateSetting(_0x2d47ed(0x254),_0x2d47ed(0x1cd)),updateSetting(_0x2d47ed(0x216),!![]),await tgBot['sendMessage'](_0x28d5c7[_0x2d47ed(0x24d)]['id'],_0x2d47ed(0x2a6))['catch'](_0x315707=>{telegramError(_0x315707);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x28d5c7[_0x2d47ed(0x24d)]['id'],_0x2d47ed(0x24c))[_0x2d47ed(0x1e1)](_0x1ed3d6=>{telegramError(_0x1ed3d6);});}),tgBot[_0x4bf462(0x2aa)]('callback_query');});}),tgBot[_0x3cad4a(0x1c4)](/\/status/,_0x134748=>{const _0x3239d9=_0x3cad4a;if(!validateTelegram(_0x134748))return;let _0x11ca6d=_0x3239d9(0x1fb);config[_0x3239d9(0x2cf)](_0x397757=>{const _0x11f6fa=_0x3239d9;_0x11ca6d+='Bot\x20'+_0x397757[_0x11f6fa(0x265)]+_0x11f6fa(0x1c0)+_0x397757['botname']+':\x20'+_0x397757[_0x11f6fa(0x233)]+_0x11f6fa(0x21d)+_0x397757['live']+'\x0a';}),_0x11ca6d+='\x0a',_0x11ca6d+=_0x3239d9(0x28c),_0x11ca6d+=!settings[_0x3239d9(0x216)]?_0x3239d9(0x21e):'Notifications\x20enabled\x0a',_0x11ca6d+=settings[_0x3239d9(0x216)]?settings[_0x3239d9(0x254)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x3239d9(0x1c1)+settings[_0x3239d9(0x254)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x134748[_0x3239d9(0x24d)]['id'],_0x11ca6d,{'parse_mode':_0x3239d9(0x27a)})[_0x3239d9(0x1e1)](_0x16fe51=>{telegramError(_0x16fe51);});}),tgBot[_0x3cad4a(0x1c4)](/\/restart/,_0x23ae6f=>{const _0xdd3b41=_0x3cad4a;if(!validateTelegram(_0x23ae6f))return;tgBot['removeListener'](_0xdd3b41(0x1d8));const _0x223f57=getEnabledBots();if(_0x223f57[_0xdd3b41(0x2f2)]==0x0)tgBot[_0xdd3b41(0x228)](_0x23ae6f[_0xdd3b41(0x24d)]['id'],'No\x20bots\x20running\x20right\x20now')[_0xdd3b41(0x1e1)](_0x5bc4cd=>{telegramError(_0x5bc4cd);});else{if(_0x223f57['length']>0x1)_0x223f57[_0xdd3b41(0x28e)]({'botID':_0xdd3b41(0x1cd)});let _0x21a788=[],_0x5f4544=[];const _0x54d37e=_0x223f57[_0xdd3b41(0x2f2)]%0x4==0x0||_0x223f57[_0xdd3b41(0x2f2)]%0x4==0x3||_0x223f57[_0xdd3b41(0x2f2)]%0x3==0x1?0x4:0x3;let _0x42fd3a=0x0;_0x223f57[_0xdd3b41(0x2cf)]((_0x4ecbb0,_0x398ccd)=>{const _0x439827=_0xdd3b41;if(_0x398ccd%_0x54d37e==0x0)_0x5f4544=[];_0x5f4544['push']({'text':_0x4ecbb0[_0x439827(0x265)]==_0x439827(0x1cd)?_0x439827(0x2d8):'Bot\x20'+_0x4ecbb0[_0x439827(0x265)],'callback_data':_0x4ecbb0[_0x439827(0x265)]}),_0x398ccd%_0x54d37e==0x0&&(_0x21a788[_0x42fd3a]=_0x5f4544,_0x42fd3a++);}),tgBot[_0xdd3b41(0x228)](_0x23ae6f['chat']['id'],_0xdd3b41(0x2b8),{'reply_markup':{'inline_keyboard':_0x21a788}})[_0xdd3b41(0x1e1)](_0x4b6277=>{telegramError(_0x4b6277);}),tgBot['on'](_0xdd3b41(0x1d8),async _0x4c3514=>{const _0x5ac50b=_0xdd3b41,_0x1a0b62=_0x4c3514['data'],_0x36dd4a=_0x4c3514[_0x5ac50b(0x2bc)];tgBot['answerCallbackQuery'](_0x4c3514['id'])[_0x5ac50b(0x22e)](async()=>{const _0x1efc7e=_0x5ac50b;if(_0x1a0b62=='all'){if(settings[_0x1efc7e(0x254)]==_0x1efc7e(0x2bf))tgBot[_0x1efc7e(0x228)](_0x36dd4a[_0x1efc7e(0x24d)]['id'],_0x1efc7e(0x2f1))['catch'](_0x233c18=>{telegramError(_0x233c18);});config['forEach'](_0x1f1870=>{const _0x160a96=_0x1efc7e;restartBot(_0x1f1870[_0x160a96(0x265)]);});}else{if(settings[_0x1efc7e(0x254)]==_0x1efc7e(0x2bf))tgBot[_0x1efc7e(0x228)](_0x36dd4a[_0x1efc7e(0x24d)]['id'],_0x1efc7e(0x2a0)+_0x1a0b62)[_0x1efc7e(0x1e1)](_0x32c9b3=>{telegramError(_0x32c9b3);});restartBot(_0x1a0b62);}}),tgBot[_0x5ac50b(0x2aa)]('callback_query');});}}),tgBot[_0x3cad4a(0x1c4)](/\/on/,_0x12dba9=>{const _0x5b4d87=_0x3cad4a;if(!validateTelegram(_0x12dba9))return;tgBot['removeListener']('callback_query');const _0x4f0ff2=getDisabledBots();if(_0x4f0ff2[_0x5b4d87(0x2f2)]==0x0)tgBot['sendMessage'](_0x12dba9[_0x5b4d87(0x24d)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x5b4d87(0x1e1)](_0x4ec5f2=>{telegramError(_0x4ec5f2);});else{if(_0x4f0ff2['length']>0x1)_0x4f0ff2[_0x5b4d87(0x28e)]({'botID':_0x5b4d87(0x1cd)});let _0x4c1a59=[],_0x35fa58=[];const _0x2caab8=_0x4f0ff2['length']%0x4==0x0||_0x4f0ff2[_0x5b4d87(0x2f2)]%0x4==0x3||_0x4f0ff2[_0x5b4d87(0x2f2)]%0x3==0x1?0x4:0x3;let _0x95a6b9=0x0;_0x4f0ff2[_0x5b4d87(0x2cf)]((_0x3ee48d,_0x5e7616)=>{const _0x308c4d=_0x5b4d87;if(_0x5e7616%_0x2caab8==0x0)_0x35fa58=[];_0x35fa58[_0x308c4d(0x28e)]({'text':_0x3ee48d[_0x308c4d(0x265)]==_0x308c4d(0x1cd)?_0x308c4d(0x2d8):_0x308c4d(0x282)+_0x3ee48d[_0x308c4d(0x265)],'callback_data':_0x3ee48d[_0x308c4d(0x265)]}),_0x5e7616%_0x2caab8==0x0&&(_0x4c1a59[_0x95a6b9]=_0x35fa58,_0x95a6b9++);}),tgBot['sendMessage'](_0x12dba9['chat']['id'],_0x5b4d87(0x26c),{'reply_markup':{'inline_keyboard':_0x4c1a59}})[_0x5b4d87(0x1e1)](_0x3eb512=>{telegramError(_0x3eb512);}),tgBot['on']('callback_query',async _0x3d5942=>{const _0xb441a4=_0x5b4d87,_0x39b3d7=_0x3d5942[_0xb441a4(0x2b5)],_0x512e48=_0x3d5942[_0xb441a4(0x2bc)];tgBot[_0xb441a4(0x2a9)](_0x3d5942['id'])[_0xb441a4(0x22e)](async()=>{const _0x28a814=_0xb441a4;if(_0x39b3d7==_0x28a814(0x1cd)){if(settings[_0x28a814(0x254)]==_0x28a814(0x2bf))tgBot[_0x28a814(0x228)](_0x512e48[_0x28a814(0x24d)]['id'],_0x28a814(0x279))[_0x28a814(0x1e1)](_0x3c7ee8=>{telegramError(_0x3c7ee8);});_0x4f0ff2[_0x28a814(0x2cf)](_0x37df15=>{const _0x1f4311=_0x28a814;if(_0x37df15[_0x1f4311(0x265)]!='all')toggleBot(_0x37df15[_0x1f4311(0x265)],toggleStatus(_0x37df15['botID']),_0x1f4311(0x257));});}else{if(settings[_0x28a814(0x254)]==_0x28a814(0x2bf))tgBot[_0x28a814(0x228)](_0x512e48[_0x28a814(0x24d)]['id'],_0x28a814(0x217)+_0x39b3d7)[_0x28a814(0x1e1)](_0x5ae89a=>{telegramError(_0x5ae89a);});toggleBot(_0x39b3d7,toggleStatus(_0x39b3d7),_0x28a814(0x257));}}),tgBot[_0xb441a4(0x2aa)](_0xb441a4(0x1d8));});}}),tgBot['onText'](/\/off/,_0x44ef56=>{const _0x49140e=_0x3cad4a;if(!validateTelegram(_0x44ef56))return;tgBot[_0x49140e(0x2aa)](_0x49140e(0x1d8));const _0x5f5cff=getEnabledBots();if(_0x5f5cff[_0x49140e(0x2f2)]==0x0)tgBot[_0x49140e(0x228)](_0x44ef56['chat']['id'],_0x49140e(0x261))[_0x49140e(0x1e1)](_0xc9d9d9=>{telegramError(_0xc9d9d9);});else{if(_0x5f5cff[_0x49140e(0x2f2)]>0x1)_0x5f5cff[_0x49140e(0x28e)]({'botID':_0x49140e(0x1cd)});let _0x8eeb69=[],_0x50b5ad=[];const _0x436710=_0x5f5cff['length']%0x4==0x0||_0x5f5cff[_0x49140e(0x2f2)]%0x4==0x3||_0x5f5cff[_0x49140e(0x2f2)]%0x3==0x1?0x4:0x3;let _0x26090f=0x0;_0x5f5cff[_0x49140e(0x2cf)]((_0x4b9aaa,_0x27f9a9)=>{const _0x4ca75f=_0x49140e;if(_0x27f9a9%_0x436710==0x0)_0x50b5ad=[];_0x50b5ad[_0x4ca75f(0x28e)]({'text':_0x4b9aaa[_0x4ca75f(0x265)]==_0x4ca75f(0x1cd)?_0x4ca75f(0x2d8):_0x4ca75f(0x282)+_0x4b9aaa[_0x4ca75f(0x265)],'callback_data':_0x4b9aaa[_0x4ca75f(0x265)]}),_0x27f9a9%_0x436710==0x0&&(_0x8eeb69[_0x26090f]=_0x50b5ad,_0x26090f++);}),tgBot[_0x49140e(0x228)](_0x44ef56['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x8eeb69}})[_0x49140e(0x1e1)](_0x45e61a=>{telegramError(_0x45e61a);}),tgBot['on'](_0x49140e(0x1d8),async _0xceeb72=>{const _0x1e4369=_0x49140e,_0x48cacd=_0xceeb72[_0x1e4369(0x2b5)],_0x42a567=_0xceeb72[_0x1e4369(0x2bc)];tgBot[_0x1e4369(0x2a9)](_0xceeb72['id'])[_0x1e4369(0x22e)](async()=>{const _0x4901b3=_0x1e4369;if(_0x48cacd==_0x4901b3(0x1cd)){if(settings[_0x4901b3(0x254)]==_0x4901b3(0x2bf))tgBot[_0x4901b3(0x228)](_0x42a567[_0x4901b3(0x24d)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')['catch'](_0x31a119=>{telegramError(_0x31a119);});_0x5f5cff['forEach'](_0x21a15f=>{const _0x3ea1f5=_0x4901b3;if(_0x21a15f[_0x3ea1f5(0x265)]!=_0x3ea1f5(0x1cd))toggleBot(_0x21a15f['botID'],toggleStatus(_0x21a15f[_0x3ea1f5(0x265)]),_0x3ea1f5(0x257));});}else{if(settings[_0x4901b3(0x254)]=='orders')tgBot[_0x4901b3(0x228)](_0x42a567[_0x4901b3(0x24d)]['id'],_0x4901b3(0x1d0)+_0x48cacd)['catch'](_0x251646=>{telegramError(_0x251646);});toggleBot(_0x48cacd,toggleStatus(_0x48cacd),'stopped');}}),tgBot[_0x1e4369(0x2aa)](_0x1e4369(0x1d8));});}}),tgBot['onText'](/\/disable/,_0x38aee8=>{const _0x336eb5=_0x3cad4a;if(!validateTelegram(_0x38aee8))return;tgBot[_0x336eb5(0x228)](_0x38aee8[_0x336eb5(0x24d)]['id'],'Notifications\x20disabled')['catch'](_0x302233=>{telegramError(_0x302233);}),updateSetting(_0x336eb5(0x216),![]);}),tgBot['onText'](/\/help/,_0x593128=>{const _0x4ba141=_0x3cad4a;if(!validateTelegram(_0x593128))return;tgBot[_0x4ba141(0x228)](_0x593128[_0x4ba141(0x24d)]['id'],_0x296a2a)['catch'](_0x4587f7=>{telegramError(_0x4587f7);});}),tgBot['on'](_0x3cad4a(0x297),_0x294004=>{const _0x10608a=_0x3cad4a;_0x294004[_0x10608a(0x208)]()[_0x10608a(0x204)](_0x10608a(0x2f8))&&(logging(_0x10608a(0x250)),tgBot[_0x10608a(0x21f)](),tgBot=null,io['to'](_0x10608a(0x21b))['emit'](_0x10608a(0x1d9),_0x10608a(0x250)));}),process[_0x3cad4a(0x248)](_0x3cad4a(0x2f6),()=>{const _0x10dee4=_0x3cad4a;if(tgBot)tgBot[_0x10dee4(0x21f)]();process['exit'](0x1);}),process[_0x3cad4a(0x248)](_0x3cad4a(0x21a),()=>{const _0x34b1c0=_0x3cad4a;if(tgBot)tgBot[_0x34b1c0(0x21f)]();process[_0x34b1c0(0x275)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x1a10cd,_0x2d0372){const _0x2b0a61=_0x4e365c;if(settings[_0x2b0a61(0x216)]){if(settings['telegramEvents']=='all'||(_0x2d0372['type']==_0x2b0a61(0x1e4)||_0x2d0372['type']==_0x2b0a61(0x1fc))&&settings['telegramEvents']=='alerts'||_0x2d0372[_0x2b0a61(0x1f9)]==_0x2b0a61(0x1fa)&&settings[_0x2b0a61(0x254)]==_0x2b0a61(0x2bf)){if(tgBot&&settings[_0x2b0a61(0x1ce)]){if(_0x2d0372[_0x2b0a61(0x2da)])tgBot[_0x2b0a61(0x228)](settings[_0x2b0a61(0x1ce)],_0x2d0372[_0x2b0a61(0x2d3)]+_0x2b0a61(0x1b2)+_0x2d0372[_0x2b0a61(0x29d)])[_0x2b0a61(0x1e1)](_0xb09083=>{telegramError(_0xb09083);});else tgBot[_0x2b0a61(0x228)](settings[_0x2b0a61(0x1ce)],_0x2b0a61(0x282)+_0x1a10cd+_0x2b0a61(0x1b2)+_0x2d0372[_0x2b0a61(0x29d)])[_0x2b0a61(0x1e1)](_0x1eee6f=>{telegramError(_0x1eee6f);});}}}}function getDeviceWithIp(_0x41598a){const _0x2e9372=_0x4e365c;return devices[_0x2e9372(0x2c4)](_0x46fc2c=>_0x46fc2c['ip']===_0x41598a);}function temporaryAccess2FA(_0x5c1a80,_0x407167){const _0x5f1336=_0x4e365c;let _0x49e7d1=new Date(),_0x5714c9=![];if(lastIpApproval){if(_0x49e7d1-lastIpApproval<0x1388)_0x5714c9=!![];}lastIpApproval=new Date();if(_0x5714c9)return;tgBot&&settings[_0x5f1336(0x1ce)]&&(tgBot[_0x5f1336(0x2aa)](_0x5f1336(0x1d8)),tgBot[_0x5f1336(0x228)](settings[_0x5f1336(0x1ce)],_0x5f1336(0x271)+normalizeIP(_0x407167)['show']+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5f1336(0x23f),'callback_data':'5'},{'text':_0x5f1336(0x1ba),'callback_data':'15'},{'text':_0x5f1336(0x1ca),'callback_data':'30'},{'text':'reject','callback_data':_0x5f1336(0x262)}]]}})[_0x5f1336(0x1e1)](_0xb81cca=>{telegramError(_0xb81cca);}),tgBot['on'](_0x5f1336(0x1d8),async _0x4c519a=>{const _0x42438c=_0x5f1336,_0x559bf0=_0x4c519a[_0x42438c(0x2b5)],_0x926ad8=_0x4c519a[_0x42438c(0x2bc)];tgBot[_0x42438c(0x2a9)](_0x4c519a['id'])[_0x42438c(0x22e)](async()=>{const _0x7d4269=_0x42438c;devices[_0x5c1a80][_0x7d4269(0x206)]={'clientip':_0x407167,'timestamp':new Date()[_0x7d4269(0x256)](),'expiry':_0x559bf0},_0x559bf0!=_0x7d4269(0x262)?(await tgBot[_0x7d4269(0x228)](_0x926ad8[_0x7d4269(0x24d)]['id'],_0x7d4269(0x2df)+_0x559bf0+_0x7d4269(0x2b1),{'parse_mode':_0x7d4269(0x27a)})[_0x7d4269(0x1e1)](_0x113375=>{telegramError(_0x113375);}),io['to'](_0x5c1a80)[_0x7d4269(0x2e3)](_0x7d4269(0x233),{'access':{'allow':![],'reason':_0x7d4269(0x2c5),'token':null}})):(await tgBot[_0x7d4269(0x228)](_0x926ad8['chat']['id'],_0x7d4269(0x2e1))[_0x7d4269(0x1e1)](_0x24d95f=>{telegramError(_0x24d95f);}),io['to'](_0x5c1a80)[_0x7d4269(0x2e3)]('status',{'access':{'allow':![],'reason':_0x7d4269(0x2d6),'token':null}}));}),tgBot[_0x42438c(0x2aa)](_0x42438c(0x1d8));}));}function loginAccess2FA(_0x4bb3dc,_0x6ab422){const _0x51bbd0=_0x4e365c;tgBot&&settings[_0x51bbd0(0x1ce)]&&(tgBot['removeListener'](_0x51bbd0(0x1d8)),tgBot['sendMessage'](settings[_0x51bbd0(0x1ce)],_0x51bbd0(0x234)+normalizeIP(_0x6ab422)[_0x51bbd0(0x287)]+_0x51bbd0(0x27c),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x51bbd0(0x22a),'callback_data':loginExpiry},{'text':_0x51bbd0(0x262),'callback_data':_0x51bbd0(0x262)}]]}})[_0x51bbd0(0x1e1)](_0x2a12ba=>{telegramError(_0x2a12ba);}),tgBot['on'](_0x51bbd0(0x1d8),async _0xd13ef2=>{const _0x367ae0=_0x51bbd0,_0x48b604=_0xd13ef2['data'],_0x393415=_0xd13ef2[_0x367ae0(0x2bc)];tgBot[_0x367ae0(0x2a9)](_0xd13ef2['id'])[_0x367ae0(0x22e)](async()=>{const _0xa801d8=_0x367ae0;devices[_0x4bb3dc][_0xa801d8(0x1b6)]={'clientip':_0x6ab422,'timestamp':new Date()[_0xa801d8(0x256)](),'expiry':_0x48b604},_0x48b604!=_0xa801d8(0x262)?(await tgBot[_0xa801d8(0x228)](_0x393415['chat']['id'],_0xa801d8(0x28f),{'parse_mode':_0xa801d8(0x27a)})[_0xa801d8(0x1e1)](_0x3ed1d4=>{telegramError(_0x3ed1d4);}),io['to'](_0x4bb3dc)[_0xa801d8(0x2e3)](_0xa801d8(0x233),{'access':{'allow':![],'reason':_0xa801d8(0x2c5),'token':null}})):(await tgBot[_0xa801d8(0x228)](_0x393415['chat']['id'],_0xa801d8(0x266))[_0xa801d8(0x1e1)](_0x1a6a39=>{telegramError(_0x1a6a39);}),io['to'](_0x4bb3dc)[_0xa801d8(0x2e3)](_0xa801d8(0x233),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x367ae0(0x1d8));}));}function getConfiguration(){const _0x1094ba=_0x4e365c;return dbConfig[_0x1094ba(0x2c0)](_0x1094ba(0x1c3))[_0x1094ba(0x2bd)](_0x1094ba(0x265))[_0x1094ba(0x270)]()||[];}function getEnabledBots(){const _0x32f9c9=_0x4e365c;return dbConfig[_0x32f9c9(0x2c0)](_0x32f9c9(0x1c3))[_0x32f9c9(0x2bd)](_0x32f9c9(0x265))[_0x32f9c9(0x20a)]({'status':_0x32f9c9(0x22d)})[_0x32f9c9(0x270)]()||[];}function getDisabledBots(){const _0x12422f=_0x4e365c;return dbConfig['get'](_0x12422f(0x1c3))[_0x12422f(0x2bd)](_0x12422f(0x265))['filter']({'status':_0x12422f(0x221)})[_0x12422f(0x270)]()||[];}function getSettings(){const _0x2523f3=_0x4e365c;return dbSettings[_0x2523f3(0x2c0)](_0x2523f3(0x1e8))[_0x2523f3(0x270)]()||{'timeshift':0x0};}function getSecure(){const _0x93db66=_0x4e365c;return dbSecure[_0x93db66(0x2c0)](_0x93db66(0x1f4))['value']()||{};}function getBlacklist(){const _0x128261=_0x4e365c;return dbSecure['get'](_0x128261(0x202))[_0x128261(0x270)]()||[];}function broadcastToBots(_0x25acbf,_0x1079fe){const _0x3214c4=_0x4e365c;config[_0x3214c4(0x2cf)](_0x269950=>{const _0x3295c6=_0x3214c4;if(_0x269950['status']==_0x3295c6(0x22d)&&_0x269950[_0x3295c6(0x2d2)]==_0x3295c6(0x232)){if(pid[_0x269950[_0x3295c6(0x265)]])pid[_0x269950['botID']]['send']({[_0x25acbf]:_0x1079fe});}});}function storeSettings(_0x22a6e1,_0x3e1f8a=![]){const _0x344b1f=_0x4e365c;_0x22a6e1={...settings,..._0x22a6e1};if(_0x3e1f8a&&_0x22a6e1[_0x344b1f(0x231)]!=_0x344b1f(0x1ed)&&_0x22a6e1['bbPassword']!=''){const _0xeb8dc3=crypt[_0x344b1f(0x1ad)](secure[_0x344b1f(0x2eb)],_0x22a6e1[_0x344b1f(0x231)])[_0x344b1f(0x2bc)][_0x344b1f(0x246)]('@')[0x0],_0x5703c5=bcrypt['hashSync'](_0xeb8dc3,saltRounds);_0x22a6e1={..._0x22a6e1,'bbPassword':_0x5703c5};}if(_0x3e1f8a&&_0x22a6e1[_0x344b1f(0x1b9)]!=_0x344b1f(0x1ed)&&_0x22a6e1['telegramToken']!=''){const _0xc5ee76=crypt[_0x344b1f(0x1ad)](secure[_0x344b1f(0x2eb)],_0x22a6e1[_0x344b1f(0x1b9)])[_0x344b1f(0x2bc)][_0x344b1f(0x246)]('@')[0x0];_0x22a6e1={..._0x22a6e1,'telegramToken':_0xc5ee76};}const _0x3be35b=_0x22a6e1[_0x344b1f(0x1b9)]!=_0x344b1f(0x1ed)&&_0x22a6e1[_0x344b1f(0x1b9)]!=settings['telegramToken']||_0x22a6e1[_0x344b1f(0x284)]!=settings[_0x344b1f(0x284)],_0x1b237d=_0x22a6e1[_0x344b1f(0x1b9)]==''||_0x22a6e1[_0x344b1f(0x284)]=='';if(_0x3be35b)_0x22a6e1['telegramEvents']=_0x344b1f(0x1cd);for(const [_0x242f4b,_0x464b75]of Object[_0x344b1f(0x2a2)](_0x22a6e1)){if(_0x242f4b==_0x344b1f(0x1b9)&&_0x464b75==_0x344b1f(0x1ed)){_0x22a6e1['telegramToken']=settings[_0x344b1f(0x1b9)];continue;};if(_0x242f4b==_0x344b1f(0x231)&&_0x464b75=='************'){_0x22a6e1[_0x344b1f(0x231)]=settings['bbPassword'];continue;};dbSettings[_0x344b1f(0x25c)](_0x344b1f(0x22f)+_0x242f4b,_0x464b75)[_0x344b1f(0x227)]();}settings=_0x22a6e1,io['to'](_0x344b1f(0x21b))[_0x344b1f(0x2e3)](_0x344b1f(0x1e8),cleanSettings()),broadcastToBots('timeshift',settings[_0x344b1f(0x249)]);if(_0x3be35b&&!_0x1b237d)initTelegram();if(_0x3be35b&&_0x1b237d)disableTelegram();getAllClients()[_0x344b1f(0x2cf)](_0x1dd8ac=>{const _0x5b3e04=_0x344b1f;getSocket(_0x1dd8ac['id'])['emit'](_0x5b3e04(0x233),{'access':{'allow':![],'reason':_0x5b3e04(0x2c5),'token':null}});});}function updateSetting(_0x30439f,_0x5a8628){const _0x1f4350=_0x4e365c;dbSettings[_0x1f4350(0x25c)](_0x1f4350(0x22f)+_0x30439f,_0x5a8628)['write'](),settings=getSettings(),io['to'](_0x1f4350(0x21b))[_0x1f4350(0x2e3)]('settings',cleanSettings());}function storeSecure(_0x28b88b){const _0x42d73d=_0x4e365c;dbSecure[_0x42d73d(0x2c0)](_0x42d73d(0x1f4))[_0x42d73d(0x28e)](_0x28b88b)[_0x42d73d(0x227)](),secure=_0x28b88b;}function addBlacklist(_0x18acca){const _0x5e1b67=_0x4e365c;cleanBlacklist();let _0x4315ce;devices[_0x18acca][_0x5e1b67(0x206)]?_0x4315ce=Math[_0x5e1b67(0x24f)](devices[_0x18acca][_0x5e1b67(0x206)][_0x5e1b67(0x251)],loginExpiry):_0x4315ce=loginExpiry,dbSecure[_0x5e1b67(0x2c0)](_0x5e1b67(0x202))[_0x5e1b67(0x28e)]({'expiry':new Date()[_0x5e1b67(0x256)]()+_0x4315ce*0x3c*0x3e8,'token':devices[_0x18acca][_0x5e1b67(0x230)][_0x5e1b67(0x2ab)]})[_0x5e1b67(0x227)](),blacklist=dbSecure[_0x5e1b67(0x2c0)]('blacklist')['value']();}function cleanBlacklist(){const _0x40c27e=_0x4e365c;let _0x3a514b=dbSecure['get'](_0x40c27e(0x202))[_0x40c27e(0x2c1)]()[_0x40c27e(0x270)](),_0x230119=new Date()[_0x40c27e(0x256)]();_0x3a514b[_0x40c27e(0x2cf)](_0x51f8ec=>{const _0xc1aa06=_0x40c27e;_0x51f8ec[_0xc1aa06(0x251)]<_0x230119&&dbSecure[_0xc1aa06(0x2c0)](_0xc1aa06(0x202))[_0xc1aa06(0x1e2)]({'expiry':_0x51f8ec['expiry']})[_0xc1aa06(0x227)]();});}function initStates(){let _0x2b13c0=getConfiguration();_0x2b13c0['forEach'](_0x10e1e5=>{const _0x4606d9=_0x4dfc;_0x10e1e5[_0x4606d9(0x2d2)]='stopped';}),storeConfiguration(_0x2b13c0);}function onKeys(){const _0x446a00=new RSA();return new Promise(_0x591eda=>{const _0x1d7f73=_0x4dfc;_0x446a00[_0x1d7f73(0x273)]()[_0x1d7f73(0x22e)](_0x114195=>{_0x591eda(_0x114195);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3571c2=_0x4e365c;let _0x43479=getConfiguration(),_0x287435=![];_0x43479['forEach'](_0xd186c5=>{const _0x552dd3=_0x4dfc;if(_0xd186c5[_0x552dd3(0x233)]==_0x552dd3(0x232))_0xd186c5[_0x552dd3(0x233)]=_0x552dd3(0x22d),_0x287435=!![];else _0xd186c5[_0x552dd3(0x233)]=='stopped'&&(_0xd186c5[_0x552dd3(0x233)]=_0x552dd3(0x221),_0x287435=!![]);});if(_0x287435)storeConfiguration(_0x43479);let _0x4ebd84=getSecure();if(!_0x4ebd84[_0x3571c2(0x1dd)](_0x3571c2(0x1f7))){let _0x524564=await generateKeys();_0x4ebd84[_0x3571c2(0x277)]=_0x524564[_0x3571c2(0x277)],_0x4ebd84[_0x3571c2(0x2eb)]=_0x524564[_0x3571c2(0x2eb)],_0x4ebd84[_0x3571c2(0x1f7)]=crypto['randomBytes'](0x20)[_0x3571c2(0x208)](_0x3571c2(0x26e));;storeSecure(_0x4ebd84);}let _0x135bb6=getSettings();_0x287435=![];!_0x135bb6['hasOwnProperty'](_0x3571c2(0x241))&&(_0x135bb6['loginRequired']=![],_0x135bb6['bbUsername']='',_0x135bb6['bbPassword']='',_0x135bb6[_0x3571c2(0x2d7)]=![],_0x287435=!![]);!_0x135bb6[_0x3571c2(0x1dd)](_0x3571c2(0x2b9))&&(_0x135bb6[_0x3571c2(0x2b9)]=![],_0x135bb6[_0x3571c2(0x1ef)]=[],_0x135bb6[_0x3571c2(0x283)]=![],_0x287435=!![]);if(!_0x135bb6[_0x3571c2(0x1dd)](_0x3571c2(0x216))){if(_0x135bb6['telegramChatId'])_0x135bb6[_0x3571c2(0x216)]=!![];else _0x135bb6[_0x3571c2(0x216)]=![];_0x287435=!![];}if(_0x287435)storeSettings(_0x135bb6);}function storeConfiguration(_0x411e29){const _0x31e90d=_0x4e365c;dbConfig[_0x31e90d(0x2c0)](_0x31e90d(0x1c3))[_0x31e90d(0x1e2)]()[_0x31e90d(0x227)](),dbConfig[_0x31e90d(0x2c0)](_0x31e90d(0x1c3))['push'](..._0x411e29)[_0x31e90d(0x227)](),config=_0x411e29;}function resetPassword(){const _0x1e1036=_0x4e365c;tgBot&&settings[_0x1e1036(0x1ce)]&&(tgBot[_0x1e1036(0x2aa)](_0x1e1036(0x1d8)),tgBot[_0x1e1036(0x228)](settings['telegramChatId'],_0x1e1036(0x243),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1e1036(0x293),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0xaef607=>{telegramError(_0xaef607);}),tgBot['on']('callback_query',async _0x44cf36=>{const _0x128fee=_0x1e1036,_0x2688d=_0x44cf36[_0x128fee(0x2b5)],_0x4f7ffa=_0x44cf36[_0x128fee(0x2bc)];tgBot['answerCallbackQuery'](_0x44cf36['id'])[_0x128fee(0x22e)](async()=>{const _0x277aac=_0x128fee;if(_0x2688d!='no'){const _0x387322=0xf,_0x4053ab=_0x277aac(0x1ee),_0x17ca00=Array[_0x277aac(0x25e)](crypto[_0x277aac(0x23d)](new Uint32Array(_0x387322)))[_0x277aac(0x285)](_0x5edb48=>_0x4053ab[_0x5edb48%_0x4053ab[_0x277aac(0x2f2)]])['join'](''),_0x3ccbaa=bcrypt[_0x277aac(0x1ff)](_0x17ca00,saltRounds);storeSettings({'bbPassword':_0x3ccbaa}),await tgBot[_0x277aac(0x228)](_0x4f7ffa[_0x277aac(0x24d)]['id'],_0x277aac(0x276)+_0x17ca00,{'parse_mode':_0x277aac(0x27a)})['catch'](_0x17ef2d=>{telegramError(_0x17ef2d);});}else await tgBot[_0x277aac(0x228)](_0x4f7ffa[_0x277aac(0x24d)]['id'],_0x277aac(0x2de))[_0x277aac(0x1e1)](_0x1867bb=>{telegramError(_0x1867bb);});}),tgBot['removeListener'](_0x128fee(0x1d8));}));}function logging(_0x5b26ef){const _0x33ed1b=_0x4e365c;console[_0x33ed1b(0x235)](getTimeStamp()+_0x33ed1b(0x1f2)+_0x5b26ef);if(tgBot&&settings[_0x33ed1b(0x1ce)]&&settings[_0x33ed1b(0x254)]!=_0x33ed1b(0x2bf))tgBot[_0x33ed1b(0x228)](settings['telegramChatId'],_0x33ed1b(0x211)+_0x5b26ef)[_0x33ed1b(0x1e1)](_0x492331=>{telegramError(_0x492331);});}function getServerTime(){const _0x56fe7f=_0x4e365c,_0x4c7593=new Date();return _0x4c7593['getFullYear']()+'/'+(_0x4c7593[_0x56fe7f(0x1f6)]()+0x1)[_0x56fe7f(0x208)]()[_0x56fe7f(0x20e)](0x2,'0')+'/'+_0x4c7593['getDate']()['toString']()[_0x56fe7f(0x20e)](0x2,'0')+'\x20'+_0x4c7593[_0x56fe7f(0x1cb)]()[_0x56fe7f(0x208)]()['padStart'](0x2,'0')+':'+_0x4c7593[_0x56fe7f(0x2b3)]()[_0x56fe7f(0x208)]()[_0x56fe7f(0x20e)](0x2,'0')+':'+_0x4c7593[_0x56fe7f(0x2ed)]()[_0x56fe7f(0x208)]()[_0x56fe7f(0x20e)](0x2,'0');}function getTimeStamp(){const _0x46b725=_0x4e365c,_0x5252fc=shiftedTime();return _0x5252fc[_0x46b725(0x2c3)]()+'/'+(_0x5252fc[_0x46b725(0x1f6)]()+0x1)['toString']()[_0x46b725(0x20e)](0x2,'0')+'/'+_0x5252fc['getDate']()[_0x46b725(0x208)]()[_0x46b725(0x20e)](0x2,'0')+'\x20'+_0x5252fc[_0x46b725(0x1cb)]()[_0x46b725(0x208)]()[_0x46b725(0x20e)](0x2,'0')+':'+_0x5252fc['getMinutes']()[_0x46b725(0x208)]()[_0x46b725(0x20e)](0x2,'0')+':'+_0x5252fc['getSeconds']()[_0x46b725(0x208)]()[_0x46b725(0x20e)](0x2,'0');}function shiftedTime(){const _0x3c330b=_0x4e365c,_0x3f4104=new Date();let _0x54bb5b=_0x3f4104;if(settings[_0x3c330b(0x249)]&&settings['timeshift']!==0x0)_0x54bb5b=fns['add'](_0x3f4104,{'hours':settings[_0x3c330b(0x249)]});return _0x54bb5b;}function startScheduler(){const _0x4ee2d1=_0x4e365c;let _0x2b2663=new Date()[_0x4ee2d1(0x27b)]();_0x2b2663==0x1&&backupConfigFiles();_0x2b2663==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3819a9=_0x4e365c;fs[_0x3819a9(0x2be)](configpath,{'withFileTypes':!![]})[_0x3819a9(0x2cf)](_0x3b4bc9=>{const _0x3b7c03=_0x3819a9;if(!_0x3b4bc9[_0x3b7c03(0x240)]())fs[_0x3b7c03(0x27e)](configpath+_0x3b4bc9['name'],configbackuppath+_0x3b4bc9[_0x3b7c03(0x2b0)]);});}function triggerAnalytics(){const _0xbc41c2=_0x4e365c;analytics[_0xbc41c2(0x2c2)]({'title':'Balance\x20Bot\x20Server','href':_0xbc41c2(0x209),'path':'/v'+serverversion});}function validateCredentials(_0x573318,_0x360821){const _0xc9adaf=_0x4e365c;if(_0x573318['username']==settings[_0xc9adaf(0x289)]&&bcrypt[_0xc9adaf(0x2c8)](_0x573318[_0xc9adaf(0x2d1)],settings[_0xc9adaf(0x231)])){if(settings[_0xc9adaf(0x2d7)])return{'allow':![],'reason':_0xc9adaf(0x242),'token':null};else{const _0x29696b=generateLoginToken(_0x360821);return{'allow':!![],'reason':_0xc9adaf(0x1ae),'token':_0x29696b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x138b41){const _0x710c76=_0x4e365c,_0x1f3994=generateLoginToken(_0x138b41);return{'allow':!![],'reason':_0x710c76(0x1ae),'token':_0x1f3994};}function validateAccess(_0x2bf987,_0x47173c){const _0x569667=_0x4e365c;let _0x2d1ca1=devices[_0x47173c]['ip'],_0x352560;const _0x3c3064=_0x3157c4=>{const _0x2eef17=_0x4dfc;if(settings['loginRequired']){if(settings[_0x2eef17(0x2d7)]){if(telegram2FaApproved(_0x47173c)){const _0x3f75fd=generateLoginToken(_0x47173c);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3f75fd};}else return{'allow':![],'reason':_0x2eef17(0x1af),'token':null};}else return _0x352560=validToken(_0x3157c4,_0x47173c),_0x352560[_0x2eef17(0x1dd)](_0x2eef17(0x1fc))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3157c4}:{'allow':![],'reason':_0x2eef17(0x1af),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x172697=[...settings[_0x569667(0x1ef)],_0x569667(0x29b),_0x569667(0x1d7),_0x569667(0x27d)];if(_0x172697[_0x569667(0x204)](_0x2d1ca1))return _0x3c3064(_0x2bf987);else{_0x352560=validToken(_0x2bf987,_0x47173c);if(_0x352560['hasOwnProperty'](_0x569667(0x1fc)))return _0x3c3064(_0x2bf987);else{if(telegramIpApproved(_0x47173c)){const _0x200f28=generateToken(_0x47173c);return _0x352560=_0x3c3064(_0x2bf987),_0x352560[_0x569667(0x294)]?{'allow':!![],'reason':_0x569667(0x23c),'token':_0x200f28}:_0x352560;}else return settings[_0x569667(0x283)]?{'allow':![],'reason':_0x569667(0x223),'token':null}:{'allow':![],'reason':_0x569667(0x2b4),'token':null};}}}else return _0x3c3064(_0x2bf987);}function timelyDecrypt(_0x49227c,_0x3e07ea=!![]){const _0x1e6777=_0x4e365c;if(_0x49227c)try{const _0x4f5e30=crypt[_0x1e6777(0x1ad)](secure[_0x1e6777(0x2eb)],_0x49227c)[_0x1e6777(0x2bc)],_0x502241=_0x4f5e30[_0x1e6777(0x246)]('@')[0x0],_0x586790=_0x4f5e30[_0x1e6777(0x246)]('@')[0x1],_0x15fbd2=new Date()['getTime']();if(_0x3e07ea){if(_0x15fbd2-_0x586790<maxSecretAge*0x3e8)return _0x502241;else return![];}else return _0x502241;}catch(_0x7aa233){return![];}else return![];}const validToken=(_0x49f4e3,_0x2836a9)=>{const _0x13a7a4=_0x4e365c,_0x111e8b=devices[_0x2836a9]['ip'];if(!_0x49f4e3)return{'error':'No\x20authentication\x20token'};for(let _0xa20b7e of blacklist){if(_0xa20b7e[_0x13a7a4(0x2ab)]==_0x49f4e3)return{'error':_0x13a7a4(0x1e7)};}let _0x15904a;try{_0x15904a=jwt[_0x13a7a4(0x2f4)](_0x49f4e3,secure[_0x13a7a4(0x1f7)]+_0x2836a9);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x15904a['hasOwnProperty'](_0x13a7a4(0x25d))&&!_0x15904a[_0x13a7a4(0x1dd)]('username')||!_0x15904a[_0x13a7a4(0x1dd)](_0x13a7a4(0x288)))return{'error':_0x13a7a4(0x1e3)};if(!_0x15904a['hasOwnProperty'](_0x13a7a4(0x22b))&&_0x15904a[_0x13a7a4(0x1dd)]('clientip')){const {clientip:_0x29386c}=_0x15904a;return _0x111e8b==_0x29386c?{'success':_0x13a7a4(0x2b6)}:{'error':_0x13a7a4(0x239)};}else{if(_0x15904a[_0x13a7a4(0x1dd)](_0x13a7a4(0x22b))&&_0x15904a[_0x13a7a4(0x1dd)](_0x13a7a4(0x25d))){const {username:_0xb0dea2,clientip:_0x28abf6}=_0x15904a;return settings[_0x13a7a4(0x289)]==_0xb0dea2&&_0x111e8b==_0x28abf6?{'success':_0x13a7a4(0x2b6)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x6bb228=>{const _0x575cbe=_0x4e365c;if(_0x6bb228){const _0x528b34=devices[_0x6bb228]['ip'];return jwt['sign']({'username':settings[_0x575cbe(0x289)],'clientip':_0x528b34},secure[_0x575cbe(0x1f7)]+_0x6bb228,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x474fe6=>{const _0x4868f6=_0x4e365c;if(_0x474fe6){const _0x3b60cc=devices[_0x474fe6]['ip'];return jwt[_0x4868f6(0x2a8)]({'clientip':_0x3b60cc},secure[_0x4868f6(0x1f7)]+_0x474fe6,{'expiresIn':devices[_0x474fe6][_0x4868f6(0x206)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x9c1478=>{const _0xf1f211=_0x4e365c;let _0x415939=![];return devices[_0x9c1478]['telegramIpApproval']&&devices[_0x9c1478][_0xf1f211(0x206)][_0xf1f211(0x251)]!='reject'&&(_0x415939=devices[_0x9c1478][_0xf1f211(0x206)][_0xf1f211(0x25d)]==devices[_0x9c1478]['ip']&&new Date()[_0xf1f211(0x256)]()-devices[_0x9c1478][_0xf1f211(0x206)]['timestamp']<devices[_0x9c1478]['telegramIpApproval'][_0xf1f211(0x251)]*0x3c*0x3e8),_0x415939;},telegram2FaApproved=_0x4480a7=>{const _0x504f37=_0x4e365c;let _0x32d4e1=![];return devices[_0x4480a7][_0x504f37(0x1b6)]&&devices[_0x4480a7][_0x504f37(0x1b6)][_0x504f37(0x251)]!=_0x504f37(0x262)&&(_0x32d4e1=devices[_0x4480a7][_0x504f37(0x1b6)][_0x504f37(0x25d)]==devices[_0x4480a7]['ip']&&new Date()[_0x504f37(0x256)]()-devices[_0x4480a7][_0x504f37(0x1b6)][_0x504f37(0x1c2)]<devices[_0x4480a7][_0x504f37(0x1b6)]['expiry']*0x3c*0x3e8),_0x32d4e1;},normalizeIP=_0x55311f=>{const _0x10dc60=_0x4e365c;let _0x588e9e=null,_0x24936d=null;if(ipaddr[_0x10dc60(0x219)](_0x55311f)){const _0xe673a8=ipaddr[_0x10dc60(0x2ba)](_0x55311f);_0xe673a8[_0x10dc60(0x263)]()===_0x10dc60(0x260)?(_0xe673a8[_0x10dc60(0x286)]()&&(_0x588e9e=_0xe673a8['toIPv4Address']()[_0x10dc60(0x208)]()),_0x24936d=_0xe673a8[_0x10dc60(0x208)]()):(_0x588e9e=_0xe673a8[_0x10dc60(0x208)](),_0x24936d=_0xe673a8[_0x10dc60(0x215)]()['toString']());}return{'show':_0x588e9e?_0x588e9e:_0x24936d,'store':_0x24936d};};