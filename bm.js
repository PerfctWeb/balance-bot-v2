const _0x3af4cf=_0x4739;(function(_0x50c9fe,_0xa6f475){const _0x8446b1=_0x4739,_0xedfce7=_0x50c9fe();while(!![]){try{const _0x2d01bd=-parseInt(_0x8446b1(0x248))/0x1*(parseInt(_0x8446b1(0x23e))/0x2)+parseInt(_0x8446b1(0x39f))/0x3*(-parseInt(_0x8446b1(0x1af))/0x4)+-parseInt(_0x8446b1(0x2b9))/0x5+parseInt(_0x8446b1(0x29f))/0x6+parseInt(_0x8446b1(0x1f0))/0x7+parseInt(_0x8446b1(0x236))/0x8+parseInt(_0x8446b1(0x274))/0x9*(parseInt(_0x8446b1(0x1f7))/0xa);if(_0x2d01bd===_0xa6f475)break;else _0xedfce7['push'](_0xedfce7['shift']());}catch(_0x14c30d){_0xedfce7['push'](_0xedfce7['shift']());}}}(_0x1948,0x850f8));const _0x45efdd=function(){let _0x248ee7=!![];return function(_0x3faa6d,_0x25bfea){const _0xf198c=_0x248ee7?function(){const _0x233433=_0x4739;if(_0x25bfea){const _0x5755c6=_0x25bfea[_0x233433(0x1b7)](_0x3faa6d,arguments);return _0x25bfea=null,_0x5755c6;}}:function(){};return _0x248ee7=![],_0xf198c;};}(),_0x2319f0=_0x45efdd(this,function(){const _0x10bde0=_0x4739;return _0x2319f0['toString']()[_0x10bde0(0x24f)](_0x10bde0(0x1da))[_0x10bde0(0x1d4)]()['constructor'](_0x2319f0)[_0x10bde0(0x24f)]('(((.+)+)+)+$');});_0x2319f0();'use strict';process[_0x3af4cf(0x3ab)]['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x3af4cf(0x207)),low=require(_0x3af4cf(0x35f)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x3af4cf(0x343)),crypto=require(_0x3af4cf(0x24b)),Crypt=require(_0x3af4cf(0x307))['Crypt'],RSA=require(_0x3af4cf(0x307))[_0x3af4cf(0x1b6)],bcrypt=require(_0x3af4cf(0x334)),jwt=require(_0x3af4cf(0x246)),ipaddr=require('ipaddr.js'),argv=require(_0x3af4cf(0x34e))(process[_0x3af4cf(0x32c)][_0x3af4cf(0x3b8)](0x2))[_0x3af4cf(0x32c)],uuidRandom=require(_0x3af4cf(0x270)),{Telegraf,Markup}=require(_0x3af4cf(0x310)),Mixpanel=require(_0x3af4cf(0x376)),axios=require(_0x3af4cf(0x1bb)),{GraphQLClient,gql}=require(_0x3af4cf(0x1f4)),util=require(_0x3af4cf(0x1a5)),fileUpload=require(_0x3af4cf(0x31a)),{networkInterfaces}=require('os'),PORT=argv[_0x3af4cf(0x2a2)]||_0x3af4cf(0x373),pattern=/^[0-9]{2,4}$/;!pattern[_0x3af4cf(0x372)](PORT)&&(console[_0x3af4cf(0x1e7)](_0x3af4cf(0x2d1)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x3af4cf(0x322)](0x1));const HOST=argv[_0x3af4cf(0x1dd)]||null,userID=argv[_0x3af4cf(0x3bb)]||'',debugging=argv['d']||![],nodeversion=process[_0x3af4cf(0x24a)][_0x3af4cf(0x379)];let bbpath='bb/',bbpath2='';const botfile=_0x3af4cf(0x221),configfile=_0x3af4cf(0x2f3),settingsfile=_0x3af4cf(0x2bb),securefile=_0x3af4cf(0x1c9),environment=require('./'+bbpath2+_0x3af4cf(0x1b5))[_0x3af4cf(0x2b2)]||_0x3af4cf(0x219),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x3af4cf(0x3a7)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3af4cf(0x25b)),configpath=userID?bbpath+_0x3af4cf(0x385)+userID+'/':bbpath+_0x3af4cf(0x385),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x3af4cf(0x2fa)+userID+'/':bbpath+_0x3af4cf(0x2fa),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x3af4cf(0x26f),loggerfile=fs[_0x3af4cf(0x256)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x3af4cf(0x1f3);!fs[_0x3af4cf(0x3a7)](configpath)&&fs[_0x3af4cf(0x3a0)](configpath);!fs[_0x3af4cf(0x3a7)](configbackuppath)&&fs[_0x3af4cf(0x3a0)](configbackuppath);!fs[_0x3af4cf(0x3a7)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x3af4cf(0x3a7)](zippath)&&fs[_0x3af4cf(0x3a0)](zippath);!fs[_0x3af4cf(0x3a7)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x3af4cf(0x355)]({'bots':[]})[_0x3af4cf(0x2d9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3af4cf(0x1e3),'onepagemode':![],'marketcapApi':''}})[_0x3af4cf(0x2d9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3af4cf(0x355)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x3af4cf(0x36f)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x3af4cf(0x262),{'host':_0x3af4cf(0x300)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x3af4cf(0x1ce)]&&(settings[_0x3af4cf(0x1ce)]!=''&&settings[_0x3af4cf(0x1ce)]!=_0x3af4cf(0x289))&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x3a3ae0,_0x36cb0f)=>{const _0x3efc4e=_0x3af4cf,_0x24dfd0=/#[A-Z]{3}#/g;if(typeof _0x3a3ae0==_0x3efc4e(0x338)){!_0x36cb0f?_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](_0x24dfd0,''):(_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#BLU#/g,'\x1b[34m'),_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#RED#/g,'\x1b[31m'),_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#YEL#/g,_0x3efc4e(0x22a)),_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#MAG#/g,_0x3efc4e(0x280)),_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#CYA#/g,_0x3efc4e(0x2c6)),_0x3a3ae0=_0x3a3ae0[_0x3efc4e(0x2f6)](/#RES#/g,_0x3efc4e(0x241)));;}return _0x3a3ae0;},logger={'screen':_0x3eb4b0=>{console['log'](parseColor(_0x3eb4b0,!![]));},'simple':_0x76fd15=>{const _0x6298d7=_0x3af4cf;console['log'](parseColor(_0x76fd15,!![])),loggerfile[_0x6298d7(0x2d9)](util[_0x6298d7(0x21c)](parseColor(_0x76fd15,![]))+'\x0a');},'full':async _0x5b374e=>{const _0x2cda66=_0x3af4cf,_0x4e926c=getTimeStamp()+_0x2cda66(0x321)+_0x5b374e;console[_0x2cda66(0x1e7)](parseColor(_0x4e926c,!![])),loggerfile[_0x2cda66(0x2d9)](util[_0x2cda66(0x21c)](parseColor(_0x4e926c,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x2cda66(0x325)]!=_0x2cda66(0x2b8))await sendTelegram(settings[_0x2cda66(0x330)],_0x2cda66(0x315)+parseColor(_0x5b374e,![]));},'debug':async(_0x26d6a9,_0x123932='')=>{const _0x385caf=_0x3af4cf,_0x4718ca=getTimeStamp()+_0x385caf(0x3b1)+_0x26d6a9;if(debugging)console[_0x385caf(0x1e7)](parseColor(_0x4718ca,!![]));loggerfile['write'](util[_0x385caf(0x21c)](parseColor(_0x4718ca,![]))+'\x0a');if(_0x123932){if(debugging)console[_0x385caf(0x1e7)](_0x123932);loggerfile[_0x385caf(0x2d9)](util[_0x385caf(0x21c)](_0x123932)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x4259a7){const _0x463459=_0x3af4cf;_0x4259a7[_0x463459(0x1d4)]()[_0x463459(0x31c)]('address\x20already\x20in\x20use')?(logger['simple'](_0x463459(0x2de)+_0x4259a7[_0x463459(0x2a2)]+_0x463459(0x313)),process[_0x463459(0x38a)]({'terminate':!![]},_0x4cff5b=>{})):logger['simple'](_0x4259a7);}),process['on'](_0x3af4cf(0x322),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x3af4cf(0x32e),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x3af4cf(0x309),()=>{const _0x50dd67=_0x3af4cf;stopAllBots(),process[_0x50dd67(0x322)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3af4cf(0x1b5))[_0x3af4cf(0x32d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3af4cf(0x244)),app=express(),http=require(_0x3af4cf(0x22b))['createServer'](app);app[_0x3af4cf(0x28f)](fileUpload({'useTempFiles':!![]})),app[_0x3af4cf(0x271)](_0x3af4cf(0x287),async(_0x15cce6,_0x194b85)=>{const _0x403708=_0x3af4cf,_0x63ce9b=_0x15cce6[_0x403708(0x1df)][_0x403708(0x2af)],_0x1b3df5=getClientsWithBotID('botmanager'),_0x473137=_0x15cce6['headers']['uuid'],_0x443639=timelyDecrypt(_0x473137,![]),_0x4b7a1a=_0x1b3df5[_0x403708(0x2be)](_0x4d400b=>_0x4d400b[_0x403708(0x273)]==_0x443639);if(_0x4b7a1a){const _0x204b47=normalizeIP(_0x15cce6['socket'][_0x403708(0x364)])[_0x403708(0x1e2)],_0x5150b8=_0x15cce6['headers'][_0x403708(0x1b1)];if(validateAccess(_0x5150b8,_0x443639,_0x204b47)[_0x403708(0x253)])_0x63ce9b==_0x403708(0x1a1)&&await backupConfigFiles(),await zipFiles(_0x63ce9b),_0x194b85[_0x403708(0x265)](zippath+(_0x63ce9b+'.zip'),_0x4069a2=>{const _0x17ddb4=_0x403708;_0x4069a2&&(logger['full'](_0x17ddb4(0x272)+_0x63ce9b),logger[_0x17ddb4(0x21e)](_0x4069a2));});else logger[_0x403708(0x233)](_0x403708(0x35a)+_0x63ce9b+_0x403708(0x30e));}else logger[_0x403708(0x233)](_0x403708(0x35a)+_0x63ce9b+_0x403708(0x397));}),app[_0x3af4cf(0x2df)](_0x3af4cf(0x28e),async(_0x2c9d42,_0x4a553c)=>{const _0x2b7e12=_0x3af4cf,_0x3cea31=getClientsWithBotID(_0x2b7e12(0x1a8)),_0x9282d0=_0x2c9d42[_0x2b7e12(0x2e0)]['uuid'],_0x53ff4e=timelyDecrypt(_0x9282d0,![]),_0x40ba9a=_0x3cea31[_0x2b7e12(0x2be)](_0x582112=>_0x582112[_0x2b7e12(0x273)]==_0x53ff4e);logger['debug'](_0x2b7e12(0x2a6));if(_0x40ba9a){const _0x52d75d=normalizeIP(_0x2c9d42['socket']['remoteAddress'])[_0x2b7e12(0x1e2)],_0x2254b3=_0x2c9d42[_0x2b7e12(0x2e0)]['tkn'];if(validateAccess(_0x2254b3,_0x53ff4e,_0x52d75d)[_0x2b7e12(0x253)]){if(_0x2c9d42[_0x2b7e12(0x29e)]){const _0x356139=_0x2c9d42['files'][_0x2b7e12(0x1be)];await _0x356139['mv'](temppath+_0x356139['name']),_0x4a553c[_0x2b7e12(0x38a)]({'status':!![],'message':'File\x20uploaded'});const _0x48d973=getBotsWithMode();_0x48d973[_0x2b7e12(0x28c)]>0x0?confirmRestore(temppath,_0x356139[_0x2b7e12(0x26e)]):unzipFile(temppath,_0x356139[_0x2b7e12(0x26e)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x2b7e12(0x233)](_0x2b7e12(0x1d3));}),app[_0x3af4cf(0x28f)](express[_0x3af4cf(0x2ae)](path[_0x3af4cf(0x286)](__dirname,bbpath2,_0x3af4cf(0x205)))),app['use'](express['static'](path[_0x3af4cf(0x286)](__dirname,bbpath2,_0x3af4cf(0x2f9)))),app[_0x3af4cf(0x271)]('/',function(_0x153759,_0x242577){const _0x5d87cd=_0x3af4cf;_0x242577[_0x5d87cd(0x3b2)](path[_0x5d87cd(0x286)](__dirname,bbpath2,_0x5d87cd(0x205),_0x5d87cd(0x291)));}),app['get']('/:bot',function(_0x55d8a1,_0x53e530){const _0x21705a=_0x3af4cf;_0x53e530['sendFile'](path[_0x21705a(0x286)](__dirname,bbpath2,_0x21705a(0x2f9),'index.html'));}),app[_0x3af4cf(0x271)](_0x3af4cf(0x275),(_0x4acd94,_0x5466fa)=>{const _0x81dfe1=_0x3af4cf;_0x5466fa[_0x81dfe1(0x3b2)](path[_0x81dfe1(0x286)](__dirname,bbpath2,_0x81dfe1(0x2f9),_0x81dfe1(0x291)));}),app['get'](_0x3af4cf(0x20d),(_0x2dcca3,_0x48b499)=>{const _0x52c701=_0x3af4cf;_0x48b499[_0x52c701(0x3b2)](path[_0x52c701(0x286)](__dirname,bbpath2,'build',_0x52c701(0x291)));}),app[_0x3af4cf(0x271)](_0x3af4cf(0x2b6),(_0x69c174,_0x5ba7fa)=>{const _0xeba31a=_0x3af4cf;_0x5ba7fa[_0xeba31a(0x3b2)](path['join'](__dirname,bbpath2,'build',_0xeba31a(0x291)));}),app[_0x3af4cf(0x271)]('/:bot/history',(_0x1333ee,_0x34397f)=>{const _0x552a2b=_0x3af4cf;_0x34397f[_0x552a2b(0x3b2)](path[_0x552a2b(0x286)](__dirname,bbpath2,_0x552a2b(0x2f9),_0x552a2b(0x291)));}),app[_0x3af4cf(0x271)](_0x3af4cf(0x277),(_0x2a0d74,_0xa90961)=>{const _0x1559fb=_0x3af4cf;_0xa90961[_0x1559fb(0x3b2)](path[_0x1559fb(0x286)](__dirname,bbpath2,_0x1559fb(0x2f9),_0x1559fb(0x291)));}),app[_0x3af4cf(0x271)](_0x3af4cf(0x217),(_0x1f7820,_0x194a13)=>{const _0x3e549a=_0x3af4cf;_0x194a13[_0x3e549a(0x3b2)](path[_0x3e549a(0x286)](__dirname,bbpath2,_0x3e549a(0x2f9),'index.html'));});function _0x4739(_0x3dab16,_0x1b2573){const _0x4417cd=_0x1948();return _0x4739=function(_0x2319f0,_0x45efdd){_0x2319f0=_0x2319f0-0x1a1;let _0x19482f=_0x4417cd[_0x2319f0];return _0x19482f;},_0x4739(_0x3dab16,_0x1b2573);}if(HOST)http[_0x3af4cf(0x2cb)](PORT,HOST);else http[_0x3af4cf(0x2cb)](PORT);const io=require(_0x3af4cf(0x363))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x395fba=_0x3af4cf;let _0x429dd7=_0x395fba(0x251);const _0x3804f0=networkInterfaces(),_0x4dbd99={};for(const _0x521aa4 of Object[_0x395fba(0x3a5)](_0x3804f0)){for(const _0x56b7b7 of _0x3804f0[_0x521aa4]){if((_0x56b7b7[_0x395fba(0x368)]==_0x395fba(0x282)||_0x56b7b7[_0x395fba(0x368)]==0x4)&&!_0x56b7b7[_0x395fba(0x318)]){const _0x478ed6=ipaddr[_0x395fba(0x37b)](_0x56b7b7[_0x395fba(0x382)])[_0x395fba(0x3aa)]();_0x478ed6!='private'&&(!_0x4dbd99[_0x521aa4]&&(_0x4dbd99[_0x521aa4]=[]),_0x4dbd99[_0x521aa4][_0x395fba(0x353)](_0x56b7b7['address']),_0x429dd7=_0x56b7b7[_0x395fba(0x382)]);}}}return{'serverip':_0x429dd7,'netinterfaces':_0x4dbd99};}async function startServer(){const _0x5ce3fb=_0x3af4cf,{serverip:_0x1a6146,netinterfaces:_0x490d49}=getServerIP();logger[_0x5ce3fb(0x21e)](''),logger[_0x5ce3fb(0x21e)](_0x5ce3fb(0x2fb)),await logger[_0x5ce3fb(0x233)](_0x5ce3fb(0x1f9)+serverversion+_0x5ce3fb(0x304)+(environment==_0x5ce3fb(0x1ff)?_0x5ce3fb(0x2d4):'')+'\x0a'+(_0x5ce3fb(0x39c)+PORT+_0x5ce3fb(0x1b0))+(_0x5ce3fb(0x35e)+_0x1a6146+':'+PORT+_0x5ce3fb(0x348))),logger['simple'](_0x5ce3fb(0x2fb));if(config[_0x5ce3fb(0x28c)]!=0x0)for(const _0x33d6b5 of config){const _0x31e6eb=_0x33d6b5['mode']==_0x5ce3fb(0x316)?'a':'m';if(_0x33d6b5[_0x5ce3fb(0x367)]=='enabled'||_0x33d6b5['status']==_0x5ce3fb(0x208))await logger[_0x5ce3fb(0x233)](_0x5ce3fb(0x34b)+_0x31e6eb+_0x5ce3fb(0x284)+_0x33d6b5[_0x5ce3fb(0x331)]+'\x20|\x20'+_0x33d6b5[_0x5ce3fb(0x2cc)]),startBot([_0x33d6b5['botID'],userID],{'cwd':bbpath},function(_0x41cdb9){const _0x2bd25b=_0x5ce3fb;if(_0x41cdb9)logger[_0x2bd25b(0x233)](_0x41cdb9);});else(_0x33d6b5['status']==_0x5ce3fb(0x2e4)||_0x33d6b5[_0x5ce3fb(0x367)]=='new-disabled')&&await logger[_0x5ce3fb(0x233)](_0x5ce3fb(0x393)+_0x31e6eb+_0x5ce3fb(0x278)+_0x33d6b5['botID']+_0x5ce3fb(0x281)+_0x33d6b5[_0x5ce3fb(0x2cc)]);}else!newBot&&logger[_0x5ce3fb(0x21e)](_0x5ce3fb(0x38d));if(newBot)addBot();logger[_0x5ce3fb(0x21e)]('-----------------------------------------------------------------------------------'),logger['simple'](''),await logger[_0x5ce3fb(0x2fe)](_0x5ce3fb(0x1fa)+nodeversion),await logger[_0x5ce3fb(0x2fe)](_0x5ce3fb(0x33c),_0x490d49);}function startSocket(){const _0x3c9c55=_0x3af4cf;io['on'](_0x3c9c55(0x29d),_0x264300=>{const _0x397ace=_0x3c9c55;let _0x476e35,_0x31bd06,_0x539985,_0x1b847f,_0x220cc5;const _0x41ca57=_0x264300[_0x397ace(0x21d)][_0x397ace(0x2e0)]['referer'];_0x31bd06=_0x41ca57[_0x397ace(0x1ab)](/bot[0-9]{3}/);if(_0x31bd06)_0x539985=_0x31bd06[0x0][_0x397ace(0x1ab)](/[0-9]{3}/);if(_0x539985)_0x476e35=_0x539985[0x0];else _0x476e35=_0x397ace(0x1a8);const _0x5152f6=_0x264300[_0x397ace(0x21d)][_0x397ace(0x31f)][_0x397ace(0x2f0)];if(!_0x5152f6)_0x264300['emit'](_0x397ace(0x367),{'publicKey':secure[_0x397ace(0x1c0)]});else{_0x1b847f=timelyDecrypt(_0x5152f6,![]);if(!_0x1b847f)_0x264300[_0x397ace(0x1e1)](_0x397ace(0x367),{'publicKey':secure[_0x397ace(0x1c0)]});else{_0x220cc5=normalizeIP(_0x264300[_0x397ace(0x1f1)][_0x397ace(0x364)])[_0x397ace(0x1e2)];if(!devices[_0x1b847f])devices[_0x1b847f]={'uuid':_0x1b847f,'access':{'token':null}};devices[_0x1b847f]['ip']=_0x220cc5;const _0x113436=addClient(_0x264300['id'],_0x1b847f,_0x476e35);setAccess(_0x113436),emitMessages(),_0x264300['on'](_0x397ace(0x25a),_0x3bc69e=>{const _0x1d9c4b=_0x397ace,_0x10c011=timelyDecrypt(_0x3bc69e[_0x1d9c4b(0x3b0)],!![],_0x1d9c4b(0x39e));if(_0x10c011){_0x3bc69e={'username':_0x3bc69e[_0x1d9c4b(0x22f)],'password':_0x10c011},devices[_0x1b847f][_0x1d9c4b(0x264)]=validateCredentials(_0x3bc69e,_0x1b847f);if(devices[_0x1b847f][_0x1d9c4b(0x264)]['allow']==![]&&devices[_0x1b847f][_0x1d9c4b(0x264)][_0x1d9c4b(0x3b6)]==_0x1d9c4b(0x2e3))_0x264300[_0x1d9c4b(0x1e1)]('status',{'access':devices[_0x1b847f][_0x1d9c4b(0x264)]}),loginAccess2FA(_0x1b847f,_0x220cc5);else{if(devices[_0x1b847f][_0x1d9c4b(0x264)]['allow']==![]&&devices[_0x1b847f][_0x1d9c4b(0x264)][_0x1d9c4b(0x3b6)]=='invalid\x20credentials')_0x264300[_0x1d9c4b(0x1e1)](_0x1d9c4b(0x367),{'access':devices[_0x1b847f][_0x1d9c4b(0x264)]});else devices[_0x1b847f]['access'][_0x1d9c4b(0x253)]&&devices[_0x1b847f][_0x1d9c4b(0x264)]['reason']==_0x1d9c4b(0x1d0)&&(getClientsWithUuid(_0x1b847f)[_0x1d9c4b(0x1b9)](_0x1f042=>{setAccess(_0x1f042);}),logger[_0x1d9c4b(0x2fe)](_0x1d9c4b(0x1de)+_0x1b847f['slice'](-0x8)),setTokenRefresh(_0x1b847f),setSessionTimeout(_0x1d9c4b(0x25a),_0x1b847f));}}else logger[_0x1d9c4b(0x233)](_0x1d9c4b(0x1ac));}),_0x264300['on'](_0x397ace(0x1e8),()=>{resetPassword();}),_0x264300['on'](_0x397ace(0x370),_0x5cbdd8=>{removeClient(_0x264300['id']);}),_0x476e35==_0x397ace(0x1a8)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x41ba81){const _0x5045e6=_0x3af4cf;if(_0x41ba81!='botmanager'&&config['apiKey']!=''){if(pid[_0x41ba81])pid[_0x41ba81][_0x5045e6(0x38a)]({'function':_0x5045e6(0x238),'args':null});}_0x41ba81!=_0x5045e6(0x1a8)&&broadcastToBots('bots',JSON[_0x5045e6(0x1c5)](config));}function reloadBotManager(){const _0x4afc19=_0x3af4cf;getClientsWithBotID('botmanager')[_0x4afc19(0x1b9)](_0x1ed7c3=>{const _0x304fa1=_0x4afc19;getSocket(_0x1ed7c3['id'])[_0x304fa1(0x1e1)]('status',{'access':{'allow':![],'reason':_0x304fa1(0x327),'token':null}});});}function getSocket(_0x5ab623){const _0x202318=_0x3af4cf;return io[_0x202318(0x252)][_0x202318(0x252)][_0x202318(0x271)](_0x5ab623);}function setAccess(_0xfabced){const _0x4d9e8f=_0x3af4cf,_0x1bf634=getSocket(_0xfabced['id']),_0x49d0ed=_0xfabced[_0x4d9e8f(0x273)],_0x190aa5=_0xfabced['bot'];devices[_0x49d0ed]['access']=validateAccess(devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x2ad)],_0x49d0ed),logger[_0x4d9e8f(0x2fe)](_0x4d9e8f(0x1ee)+devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x3b6)]+_0x4d9e8f(0x2e2)+_0xfabced['id'][_0x4d9e8f(0x3b8)](-0x8)+_0x4d9e8f(0x2c8)+_0x49d0ed[_0x4d9e8f(0x3b8)](-0x8)),_0x1bf634['join'](_0x49d0ed);if(devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x253)]){_0x1bf634[_0x4d9e8f(0x286)](_0x190aa5);if(_0x190aa5==_0x4d9e8f(0x1a8))initializeSocketBotManager(_0x1bf634);else initializeSocketBot(_0x1bf634);initClient(_0x190aa5);}devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x2ad)]&&devices[_0x49d0ed][_0x4d9e8f(0x264)]['reason']==_0x4d9e8f(0x218)&&setSessionTimeout(_0x4d9e8f(0x2a3),_0x49d0ed),devices[_0x49d0ed][_0x4d9e8f(0x264)]['token']&&devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x3b6)]==_0x4d9e8f(0x1f6)&&setSessionTimeout(_0x4d9e8f(0x25a),_0x49d0ed),_0x1bf634[_0x4d9e8f(0x1e1)](_0x4d9e8f(0x367),{'status':_0xfabced[_0x4d9e8f(0x239)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x49d0ed][_0x4d9e8f(0x264)],'externalip':devices[_0x49d0ed]['ip'],'publicKey':secure[_0x4d9e8f(0x1c0)],'userid':settings[_0x4d9e8f(0x2d7)],'validInstallation':validInstallation}),devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x253)]==![]&&devices[_0x49d0ed][_0x4d9e8f(0x264)][_0x4d9e8f(0x3b6)]==_0x4d9e8f(0x335)&&temporaryAccess2FA(_0x49d0ed,devices[_0x49d0ed]['ip']);}function setSessionTimeout(_0x1fd60f,_0x4d00c9){const _0x2461ef=_0x3af4cf;let _0x41cc24;if(_0x1fd60f==_0x2461ef(0x25a))_0x41cc24=loginExpiry*0x3c*0x3e8;else _0x41cc24=devices[_0x4d00c9][_0x2461ef(0x358)][_0x2461ef(0x306)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x4d00c9][_0x2461ef(0x358)][_0x2461ef(0x2f7)]);if(devices[_0x4d00c9][_0x2461ef(0x301)])clearTimeout(devices[_0x4d00c9][_0x2461ef(0x301)]);devices[_0x4d00c9][_0x2461ef(0x301)]=setTimeout(()=>{const _0x1b16f0=_0x2461ef;if(devices[_0x4d00c9][_0x1b16f0(0x234)])clearTimeout(devices[_0x4d00c9]['pidRefreshToken']);removeSocketListeners(_0x4d00c9),addBlacklist(_0x4d00c9),devices[_0x4d00c9][_0x1b16f0(0x358)]=null,devices[_0x4d00c9][_0x1b16f0(0x23f)]=null,devices[_0x4d00c9][_0x1b16f0(0x264)]['token']=null,logger[_0x1b16f0(0x2fe)](_0x1b16f0(0x39d)+_0x4d00c9['slice'](-0x8)),devices[_0x4d00c9][_0x1b16f0(0x264)]=validateAccess(devices[_0x4d00c9][_0x1b16f0(0x264)][_0x1b16f0(0x2ad)],_0x4d00c9),!(devices[_0x4d00c9][_0x1b16f0(0x264)][_0x1b16f0(0x253)]&&devices[_0x4d00c9][_0x1b16f0(0x264)][_0x1b16f0(0x3b6)]==_0x1b16f0(0x1e4))&&(_0x1fd60f==_0x1b16f0(0x25a)?io['to'](_0x4d00c9)[_0x1b16f0(0x1e1)]('status',{'access':{'allow':![],'reason':_0x1b16f0(0x2c9),'token':null}}):io['to'](_0x4d00c9)['emit'](_0x1b16f0(0x367),{'access':{'allow':![],'reason':_0x1b16f0(0x33f),'token':null}})),devices[_0x4d00c9][_0x1b16f0(0x264)]['token']=null;},_0x41cc24);}function setTokenRefresh(_0x15afb8){const _0x4e370a=_0x3af4cf;if(devices[_0x15afb8][_0x4e370a(0x234)])clearTimeout(devices[_0x15afb8]['pidRefreshToken']);devices[_0x15afb8][_0x4e370a(0x234)]=setTimeout(()=>{const _0x154230=_0x4e370a;getClientsWithUuid(_0x15afb8)[_0x154230(0x28c)]!=0x0?(devices[_0x15afb8][_0x154230(0x264)]=refreshToken(_0x15afb8),io['to'](_0x15afb8)[_0x154230(0x1e1)](_0x154230(0x367),{'status':_0x154230(0x296),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x15afb8][_0x154230(0x264)],'externalip':devices[_0x15afb8]['ip'],'publicKey':secure[_0x154230(0x1c0)],'validInstallation':validInstallation}),setTokenRefresh(_0x15afb8)):clearTimeout(devices[_0x15afb8][_0x154230(0x234)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x394557){const _0x5d8498=_0x3af4cf,_0x252f55=getClient(_0x394557['id'])[_0x5d8498(0x273)];_0x394557[_0x5d8498(0x1e1)]('bots',config),_0x394557[_0x5d8498(0x1e1)]('settings',cleanSettings()),_0x394557['on'](_0x5d8498(0x2cd),_0x1b5dc9=>{const _0xaa3a2f=_0x5d8498;if(validateAccess(_0x1b5dc9,_0x252f55)[_0xaa3a2f(0x253)])addBot();else logger[_0xaa3a2f(0x233)](_0xaa3a2f(0x32b));}),_0x394557['on'](_0x5d8498(0x389),(_0x3e9adf,_0x29cd6e)=>{const _0x165261=_0x5d8498;if(validateAccess(_0x29cd6e,_0x252f55)[_0x165261(0x253)])toggleBot(_0x3e9adf[_0x165261(0x331)],_0x3e9adf['status'],_0x3e9adf[_0x165261(0x24e)]);else logger[_0x165261(0x233)](_0x165261(0x2da));}),_0x394557['on']('toggle-bot-mode',(_0x42dd0b,_0x9e9a4f)=>{const _0x1d4413=_0x5d8498;if(validateAccess(_0x9e9a4f,_0x252f55)[_0x1d4413(0x253)])toggleBotMode(_0x42dd0b);else logger[_0x1d4413(0x233)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x394557['on'](_0x5d8498(0x2f8),(_0x2186b5,_0x46ec8e)=>{const _0x15cc5f=_0x5d8498;if(validateAccess(_0x46ec8e,_0x252f55)[_0x15cc5f(0x253)])deleteBot(_0x2186b5);else logger[_0x15cc5f(0x233)](_0x15cc5f(0x27c));}),_0x394557['on'](_0x5d8498(0x3ac),(_0x7de4f7,_0x126743)=>{const _0x3c14a2=_0x5d8498;if(validateAccess(_0x126743,_0x252f55)[_0x3c14a2(0x253)])storeSettings(_0x7de4f7,!![]);else logger['full'](_0x3c14a2(0x33e));}),_0x394557['on'](_0x5d8498(0x2b4),_0x5512dc=>{const _0xfb00a1=_0x5d8498;if(validateAccess(_0x5512dc,_0x252f55)[_0xfb00a1(0x253)])updateBB(_0xfb00a1(0x1b2));else logger[_0xfb00a1(0x233)](_0xfb00a1(0x2b3));}),_0x394557['on'](_0x5d8498(0x23c),_0x107761=>{const _0x2b17f7=_0x5d8498;if(validateAccess(_0x107761,_0x252f55)[_0x2b17f7(0x253)])updateBB(_0x2b17f7(0x1e0));else logger[_0x2b17f7(0x233)](_0x2b17f7(0x222));}),_0x394557['on'](_0x5d8498(0x20f),_0x51bdc1=>{const _0x210ea8=_0x5d8498;if(validateAccess(_0x51bdc1,_0x252f55)[_0x210ea8(0x253)]){const _0x30230d=getClient(_0x394557['id']);if(_0x30230d)getBackupFiles(_0x30230d[_0x210ea8(0x273)]);else logger[_0x210ea8(0x233)](_0x210ea8(0x1f8));}else logger[_0x210ea8(0x233)](_0x210ea8(0x346));}),_0x394557['on'](_0x5d8498(0x2ab),(_0x18587e,_0xcdd958)=>{const _0x32dcbb=_0x5d8498;if(validateAccess(_0xcdd958,_0x252f55)[_0x32dcbb(0x253)])restoreBackupFile(_0x18587e);else logger[_0x32dcbb(0x233)](_0x32dcbb(0x30f));}),_0x394557['on'](_0x5d8498(0x336),_0x3012c5=>{const _0x2aa38d=_0x5d8498;if(validateAccess(_0x3012c5,_0x252f55)['allow'])getMessages();else logger[_0x2aa38d(0x233)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x394557['on'](_0x5d8498(0x362),(_0x573ea0,_0x5856c9)=>{const _0x270e5c=_0x5d8498;if(validateAccess(_0x5856c9,_0x252f55)[_0x270e5c(0x253)])confirmMessage(_0x573ea0);else logger[_0x270e5c(0x233)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x394557['on'](_0x5d8498(0x2cf),_0x3127d2=>{const _0x453124=_0x5d8498;if(validateAccess(_0x3127d2,_0x252f55)['allow']){if(devices[_0x252f55]['pidRefreshToken'])clearTimeout(devices[_0x252f55][_0x453124(0x234)]);if(devices[_0x252f55][_0x453124(0x301)])clearTimeout(devices[_0x252f55][_0x453124(0x301)]);removeSocketListeners(getClient(_0x394557['id'])[_0x453124(0x273)]),addBlacklist(_0x252f55),devices[_0x252f55][_0x453124(0x358)]=null,devices[_0x252f55]['telegram2FaApproval']=null,devices[_0x252f55][_0x453124(0x264)]['token']=null,logger['debug'](_0x453124(0x3b5)+_0x252f55[_0x453124(0x3b8)](-0x8)),io['to'](getClient(_0x394557['id'])[_0x453124(0x273)])['emit']('status',{'access':{'allow':![],'reason':_0x453124(0x204),'token':null}});}else logger[_0x453124(0x233)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x58b2f0){const _0x346627=_0x3af4cf,_0x5960d0=getClient(_0x58b2f0['id'])[_0x346627(0x1cc)],_0xe45e8b=getClient(_0x58b2f0['id'])[_0x346627(0x273)];_0x58b2f0['on'](_0x346627(0x359),(_0x1ea27d,_0x4bfec9)=>{const _0x5df6cb=_0x346627;if(validateAccess(_0x4bfec9,_0xe45e8b)['allow']){if(pid[_0x5960d0])pid[_0x5960d0]['send']({'function':'emitHistory','args':_0x1ea27d});}else logger[_0x5df6cb(0x233)](_0x5df6cb(0x1d5));}),_0x58b2f0['on']('delete-alerts',(_0x4f13d4,_0x47a8c3)=>{const _0x4fc0c2=_0x346627;if(validateAccess(_0x47a8c3,_0xe45e8b)[_0x4fc0c2(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0][_0x4fc0c2(0x38a)]({'function':_0x4fc0c2(0x1b3),'args':_0x4f13d4});}else logger[_0x4fc0c2(0x233)](_0x4fc0c2(0x38b));}),_0x58b2f0['on'](_0x346627(0x2ef),(_0x52c828,_0x19106f)=>{const _0x537325=_0x346627;if(validateAccess(_0x19106f,_0xe45e8b)[_0x537325(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0]['send']({'function':_0x537325(0x2f1),'args':_0x52c828});}else logger[_0x537325(0x233)](_0x537325(0x2a1));}),_0x58b2f0['on'](_0x346627(0x323),(_0x5b7c40,_0x54183e)=>{const _0x27f7f5=_0x346627;if(validateAccess(_0x54183e,_0xe45e8b)[_0x27f7f5(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0]['send']({'function':_0x27f7f5(0x209),'args':_0x5b7c40});}else logger[_0x27f7f5(0x233)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x58b2f0['on']('store-headless',(_0x1249a7,_0x1f1dff)=>{const _0x40845a=_0x346627;if(validateAccess(_0x1f1dff,_0xe45e8b)[_0x40845a(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0][_0x40845a(0x38a)]({'function':_0x40845a(0x1e5),'args':_0x1249a7});}else logger[_0x40845a(0x233)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x58b2f0['on'](_0x346627(0x2e8),(_0x203cfd,_0x3e0aa1)=>{const _0x10263e=_0x346627;if(validateAccess(_0x3e0aa1,_0xe45e8b)[_0x10263e(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0][_0x10263e(0x38a)]({'function':_0x10263e(0x396),'args':_0x203cfd});}else logger[_0x10263e(0x233)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x58b2f0['on'](_0x346627(0x28b),_0x1214e6=>{const _0x580139=_0x346627;if(validateAccess(_0x1214e6,_0xe45e8b)[_0x580139(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0]['send']({'function':_0x580139(0x1bd),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x58b2f0['on'](_0x346627(0x2d0),_0x522084=>{const _0x4baa14=_0x346627;if(validateAccess(_0x522084,_0xe45e8b)['allow']){if(pid[_0x5960d0])pid[_0x5960d0][_0x4baa14(0x38a)]({'function':'getStartingBalances','args':null});}else logger[_0x4baa14(0x233)](_0x4baa14(0x39a));}),_0x58b2f0['on'](_0x346627(0x36e),(_0x4449be,_0x3ac253)=>{const _0x1387ee=_0x346627;if(validateAccess(_0x3ac253,_0xe45e8b)[_0x1387ee(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0][_0x1387ee(0x38a)]({'function':'placeOrder','args':_0x4449be});}else logger[_0x1387ee(0x233)](_0x1387ee(0x25c));}),_0x58b2f0['on'](_0x346627(0x1d2),_0x370413=>{const _0x14f994=_0x346627;if(validateAccess(_0x370413,_0xe45e8b)['allow']){if(pid[_0x5960d0])pid[_0x5960d0][_0x14f994(0x38a)]({'function':_0x14f994(0x2aa),'args':null});}else logger[_0x14f994(0x233)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x58b2f0['on'](_0x346627(0x1bc),_0x26f444=>{const _0x561b54=_0x346627;if(validateAccess(_0x26f444,_0xe45e8b)[_0x561b54(0x253)]){if(pid[_0x5960d0])pid[_0x5960d0][_0x561b54(0x38a)]({'function':_0x561b54(0x38c),'args':null});}else logger[_0x561b54(0x233)](_0x561b54(0x1f2));}),_0x58b2f0['on']('update-bb',_0x2e6900=>{const _0x21f90e=_0x346627;if(validateAccess(_0x2e6900,_0xe45e8b)[_0x21f90e(0x253)])updateBB(_0x21f90e(0x1b2));else logger[_0x21f90e(0x233)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x58b2f0['on']('get-messages',_0x43b98a=>{const _0x3d51cf=_0x346627;if(validateAccess(_0x43b98a,_0xe45e8b)[_0x3d51cf(0x253)])getMessages();else logger['full'](_0x3d51cf(0x36a));}),_0x58b2f0['on'](_0x346627(0x362),(_0x237aa9,_0x69607a)=>{const _0x1bce66=_0x346627;if(validateAccess(_0x69607a,_0xe45e8b)[_0x1bce66(0x253)])confirmMessage(_0x237aa9);else logger[_0x1bce66(0x233)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x58b2f0['on']('logout',_0x33d1f6=>{const _0x5e8b75=_0x346627;if(validateAccess(_0x33d1f6,_0xe45e8b)['allow']){if(devices[_0xe45e8b][_0x5e8b75(0x234)])clearTimeout(devices[_0xe45e8b][_0x5e8b75(0x234)]);if(devices[_0xe45e8b][_0x5e8b75(0x301)])clearTimeout(devices[_0xe45e8b][_0x5e8b75(0x301)]);removeSocketListeners(getClient(_0x58b2f0['id'])[_0x5e8b75(0x273)]),addBlacklist(_0xe45e8b),devices[_0xe45e8b][_0x5e8b75(0x358)]=null,devices[_0xe45e8b][_0x5e8b75(0x23f)]=null,devices[_0xe45e8b][_0x5e8b75(0x264)][_0x5e8b75(0x2ad)]=null,logger['debug'](_0x5e8b75(0x3b5)+_0xe45e8b[_0x5e8b75(0x3b8)](-0x8)),io['to'](getClient(_0x58b2f0['id'])[_0x5e8b75(0x273)])['emit'](_0x5e8b75(0x367),{'access':{'allow':![],'reason':_0x5e8b75(0x204),'token':null}});}else logger['full'](_0x5e8b75(0x2f2));});}function removeSocketListeners(_0x1105bf){const _0x39ec7b=_0x3af4cf;getClientsWithUuid(_0x1105bf)[_0x39ec7b(0x1b9)](_0x5023f4=>{const _0x5d99a0=_0x39ec7b;getSocket(_0x5023f4['id'])[_0x5d99a0(0x33b)]();});}function cleanSettings(){const _0x1b3b2e=_0x3af4cf;let _0x37d656=settings;return settings[_0x1b3b2e(0x1ce)]&&settings[_0x1b3b2e(0x1ce)]!=''&&(_0x37d656={..._0x37d656,'telegramToken':_0x1b3b2e(0x398)}),settings[_0x1b3b2e(0x1a7)]&&settings[_0x1b3b2e(0x1a7)]!=''&&(_0x37d656={..._0x37d656,'bbPassword':_0x1b3b2e(0x398)}),settings['marketcapApi']&&settings['marketcapApi']!=''&&(_0x37d656={..._0x37d656,'marketcapApi':'************'}),(settings['bbPassword']&&settings['bbPassword']=='***'||settings[_0x1b3b2e(0x1ce)]&&settings[_0x1b3b2e(0x1ce)]==_0x1b3b2e(0x289)||settings['marketcapApi']&&settings[_0x1b3b2e(0x28d)]==_0x1b3b2e(0x289))&&(_0x37d656={..._0x37d656,'restored':{'password':settings[_0x1b3b2e(0x1a7)]==_0x1b3b2e(0x289),'telegram':settings['telegramToken']=='***','marketcap':settings[_0x1b3b2e(0x28d)]==_0x1b3b2e(0x289)}}),_0x37d656;}async function updateBB(_0x54019c){const _0x45211e=_0x3af4cf;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x22a11a=>{const _0x49358c=_0x4739;restartBot(_0x22a11a[_0x49358c(0x331)]);});if(_0x54019c==_0x45211e(0x1b2))process['send']({'update':!![],'environment':environment},_0x4c37ba=>{});else _0x54019c==_0x45211e(0x1e0)&&process['send']({'reinstall':!![],'environment':environment},_0x33a737=>{});}function startBot(_0x5cbf87,_0x5a8c13,_0x14275d){const _0x536ed1=_0x3af4cf;if(debugging)_0x5cbf87[_0x536ed1(0x353)]('-d');let _0x294e24=![];const _0x135795=_0x5cbf87[0x0];_0x5a8c13={..._0x5a8c13,'stdio':[_0x536ed1(0x20e),_0x536ed1(0x20e),_0x536ed1(0x20e),_0x536ed1(0x308)]},pid[_0x135795]=childProcess[_0x536ed1(0x2ac)](botfile,_0x5cbf87,_0x5a8c13),pid[_0x135795]['on']('message',_0x41fda5=>{const _0x55245c=_0x536ed1;switch(Object[_0x55245c(0x3a5)](_0x41fda5)[0x0]){case _0x55245c(0x2cc):updateBotName(_0x135795,_0x41fda5[_0x55245c(0x2cc)]);break;case _0x55245c(0x2e9):updateBotManager();break;case _0x55245c(0x367):updateStatus(_0x135795,_0x41fda5[_0x55245c(0x367)]);break;case _0x55245c(0x24e):updateLive(_0x135795,_0x41fda5['live']);break;case _0x55245c(0x2ed):updateLive(_0x135795,_0x41fda5[_0x55245c(0x2ed)]),io['to'](_0x135795)[_0x55245c(0x1e1)]('status',{'access':{'allow':![],'reason':_0x55245c(0x327),'token':null}});break;case _0x55245c(0x342):_0x41fda5[_0x55245c(0x342)]==_0x55245c(0x380)&&restartBot(_0x135795);_0x41fda5[_0x55245c(0x342)]=='kill'&&toggleBot(_0x135795,_0x55245c(0x2e4),_0x55245c(0x259));break;case _0x55245c(0x20a):sendTelegramBot(_0x135795,_0x41fda5['telegram']);break;case _0x55245c(0x1e9):sendTelegramMsg(_0x41fda5['telegrammsg']);break;case _0x55245c(0x3a2):io['to'](_0x135795)['emit'](_0x41fda5['function'],_0x41fda5['args']);break;}}),pid[_0x135795]['on']('error',function(_0xeee00d){if(_0x294e24)return;_0x294e24=!![],_0x14275d(_0xeee00d);}),pid[_0x135795]['on'](_0x536ed1(0x322),async function(_0x54ad38){const _0x2205f4=_0x536ed1;if(terminating)return;if(installingUpdate){logger['debug'](_0x2205f4(0x390)),io['close']();return;}if(_0x294e24)return;_0x294e24=!![],_0x14275d(null);const _0x5a715a=dbConfig[_0x2205f4(0x271)](_0x2205f4(0x395))['find']({'botID':_0x135795})['value']();_0x5a715a&&(_0x5a715a[_0x2205f4(0x367)]==_0x2205f4(0x320)||_0x5a715a[_0x2205f4(0x367)]==_0x2205f4(0x208))&&(await sleep(0x3e8),updateLive(_0x135795,_0x2205f4(0x259)),logger[_0x2205f4(0x233)](_0x2205f4(0x1ae)+_0x135795),startBot([_0x135795,userID],{'cwd':bbpath},function(_0x123532){const _0x1cee39=_0x2205f4;if(_0x123532)logger[_0x1cee39(0x233)](_0x123532);}));});}function stopBot(_0x2d7ad1){const _0x52acd9=_0x3af4cf;getClientsWithBotID(_0x2d7ad1)[_0x52acd9(0x1b9)](_0x517d11=>{const _0x2a0cd5=_0x52acd9;getSocket(_0x517d11['id'])[_0x2a0cd5(0x370)](!![]),removeClient(_0x517d11['id']);}),pid[_0x2d7ad1]&&(pid[_0x2d7ad1][_0x52acd9(0x392)](),pid[_0x2d7ad1]=null);}function stopAllBots(){const _0x17409f=_0x3af4cf;terminating=!![];const _0x198b3c=getEnabledBots();_0x198b3c[_0x17409f(0x1b9)](_0x819109=>{stopBot(_0x819109['botID']);});}function restartBot(_0x561eb7){const _0x2c5917=_0x3af4cf;if(pid[_0x561eb7])pid[_0x561eb7][_0x2c5917(0x392)]();}function addBot(){const _0x362236=_0x3af4cf;let _0x5d2056;for(let _0x2ad1ec=0x1;_0x2ad1ec<0x3e9;_0x2ad1ec++){_0x5d2056=_0x2ad1ec[_0x362236(0x1d4)]()[_0x362236(0x30a)](0x3,'0');let _0x68f1d=config['find'](_0x390de5=>_0x390de5[_0x362236(0x331)]==_0x5d2056);if(!_0x68f1d)break;}if(_0x5d2056===_0x362236(0x2a0)){logger[_0x362236(0x233)](_0x362236(0x2ec));return;}logger[_0x362236(0x233)](_0x362236(0x374)+_0x5d2056),dbConfig[_0x362236(0x271)](_0x362236(0x395))[_0x362236(0x353)]({'botID':_0x5d2056,'botname':_0x362236(0x38e)+_0x5d2056,'status':_0x362236(0x208),'live':''})[_0x362236(0x2d9)](),startBot([_0x5d2056,userID],{'cwd':bbpath},function(_0x1407a9){const _0x40d269=_0x362236;if(_0x1407a9)logger[_0x40d269(0x233)](_0x1407a9);}),config=getConfiguration(),io['to'](_0x362236(0x1a8))['emit'](_0x362236(0x395),config),broadcastToBots('bots',JSON['stringify'](config));}function deleteBot(_0x2901fb){const _0x21cc8e=_0x3af4cf;getClientsWithBotID(_0x2901fb)[_0x21cc8e(0x1b9)](_0x4cdc11=>{const _0x224dec=_0x21cc8e;getSocket(_0x4cdc11['id'])[_0x224dec(0x370)](!![]),removeClient(_0x4cdc11['id']);}),dbConfig[_0x21cc8e(0x271)](_0x21cc8e(0x395))['remove']({'botID':_0x2901fb})[_0x21cc8e(0x2d9)](),logger['full'](_0x21cc8e(0x1e6)+_0x2901fb),stopBot(_0x2901fb);try{if(fs[_0x21cc8e(0x3a7)](path[_0x21cc8e(0x286)](configpath,'bot-'+_0x2901fb+_0x21cc8e(0x2db))))fs['unlinkSync'](path[_0x21cc8e(0x286)](configpath,'bot-'+_0x2901fb+_0x21cc8e(0x2db)));if(fs[_0x21cc8e(0x3a7)](path[_0x21cc8e(0x286)](configpath,_0x21cc8e(0x3a1)+_0x2901fb+_0x21cc8e(0x34a))))fs[_0x21cc8e(0x1ef)](path[_0x21cc8e(0x286)](configpath,'bot-'+_0x2901fb+_0x21cc8e(0x34a)));if(fs[_0x21cc8e(0x3a7)](path[_0x21cc8e(0x286)](configpath,_0x21cc8e(0x3a1)+_0x2901fb+_0x21cc8e(0x230))))fs[_0x21cc8e(0x1ef)](path['join'](configpath,_0x21cc8e(0x3a1)+_0x2901fb+_0x21cc8e(0x230)));if(fs[_0x21cc8e(0x3a7)](path['join'](configpath,'bot-'+_0x2901fb+_0x21cc8e(0x37c))))fs[_0x21cc8e(0x1ef)](path[_0x21cc8e(0x286)](configpath,_0x21cc8e(0x3a1)+_0x2901fb+_0x21cc8e(0x37c)));}catch(_0x1fb6c5){if(_0x1fb6c5)logger[_0x21cc8e(0x233)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x1fb6c5);}config=getConfiguration(),io['to']('botmanager')[_0x21cc8e(0x1e1)](_0x21cc8e(0x395),config),broadcastToBots('bots',JSON[_0x21cc8e(0x1c5)](config));}function toggleBot(_0x3fb75b,_0x55f20c,_0x41f8b3){const _0x45137d=_0x3af4cf;dbConfig[_0x45137d(0x271)](_0x45137d(0x395))[_0x45137d(0x2be)]({'botID':_0x3fb75b})[_0x45137d(0x226)]({'status':_0x55f20c})[_0x45137d(0x226)]({'live':_0x41f8b3})[_0x45137d(0x2d9)]();if(_0x55f20c==_0x45137d(0x320)||_0x55f20c=='new')logger[_0x45137d(0x233)](_0x45137d(0x1a9)+_0x3fb75b),startBot([_0x3fb75b,userID],{'cwd':bbpath},function(_0x31f553){if(_0x31f553)logger['full'](_0x31f553);});else(_0x55f20c=='disabled'||_0x55f20c=='new-disabled')&&(logger[_0x45137d(0x233)]('Disabled\x20Bot\x20'+_0x3fb75b),stopBot(_0x3fb75b));config=getConfiguration(),io['to'](_0x45137d(0x1a8))['emit'](_0x45137d(0x395),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleStatus(_0x524967){const _0x3b4f0b=_0x3af4cf;let _0x2ffd37=dbConfig[_0x3b4f0b(0x271)]('bots')[_0x3b4f0b(0x2be)]({'botID':_0x524967})['value'](),_0x4a9d6c;if(_0x2ffd37[_0x3b4f0b(0x367)]===_0x3b4f0b(0x320))_0x4a9d6c='disabled';else{if(_0x2ffd37[_0x3b4f0b(0x367)]===_0x3b4f0b(0x208))_0x4a9d6c=_0x3b4f0b(0x35d);else{if(_0x2ffd37[_0x3b4f0b(0x367)]===_0x3b4f0b(0x35d))_0x4a9d6c='new';else{if(_0x2ffd37[_0x3b4f0b(0x367)]==='disabled')_0x4a9d6c=_0x3b4f0b(0x320);}}}return _0x4a9d6c;}function updateStatus(_0x4cf496,_0x398139){const _0x42d676=_0x3af4cf;dbConfig['get']('bots')[_0x42d676(0x2be)]({'botID':_0x4cf496})[_0x42d676(0x226)]({'status':_0x398139})[_0x42d676(0x2d9)](),config=getConfiguration(),io['to'](_0x42d676(0x1a8))['emit'](_0x42d676(0x395),config),broadcastToBots(_0x42d676(0x395),JSON['stringify'](config));}function updateLive(_0x33143a,_0x205d42){const _0x337fc4=_0x3af4cf;dbConfig[_0x337fc4(0x271)](_0x337fc4(0x395))[_0x337fc4(0x2be)]({'botID':_0x33143a})[_0x337fc4(0x226)]({'live':_0x205d42})[_0x337fc4(0x2d9)](),config=getConfiguration(),io['to']('botmanager')[_0x337fc4(0x1e1)](_0x337fc4(0x395),config),broadcastToBots(_0x337fc4(0x395),JSON[_0x337fc4(0x1c5)](config));}function updateBotName(_0x2e3089,_0x44849e){const _0x37fe9f=_0x3af4cf;dbConfig[_0x37fe9f(0x271)](_0x37fe9f(0x395))['find']({'botID':_0x2e3089})['assign']({'botname':_0x44849e})[_0x37fe9f(0x2d9)](),config=getConfiguration(),io['to'](_0x37fe9f(0x1a8))[_0x37fe9f(0x1e1)](_0x37fe9f(0x395),config),broadcastToBots('bots',JSON[_0x37fe9f(0x1c5)](config));}function updateBotManager(){const _0x349037=_0x3af4cf;config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots('bots',JSON[_0x349037(0x1c5)](config));}function toggleBotMode(_0x2cf887){const _0x408509=_0x3af4cf;if(pid[_0x2cf887])pid[_0x2cf887][_0x408509(0x38a)]({'function':_0x408509(0x314),'args':null});else{const _0x1ffd95=configpath+_0x408509(0x3a1)+_0x2cf887+'-config.json',_0x43bac1=fs[_0x408509(0x319)](_0x1ffd95),_0x494544=JSON[_0x408509(0x37b)](_0x43bac1),_0x2b51a5=_0x494544['bot'][0x0][_0x408509(0x26c)];_0x494544[_0x408509(0x1cc)][0x0]['headless']=!_0x2b51a5;const _0x540567=JSON[_0x408509(0x1c5)](_0x494544,null,0x2);fs[_0x408509(0x27b)](_0x1ffd95,_0x540567),config=getConfiguration(),io['to']('botmanager')[_0x408509(0x1e1)]('bots',config),broadcastToBots(_0x408509(0x395),JSON[_0x408509(0x1c5)](config));}}function validateTelegram(_0x422ace){const _0x503b9e=_0x3af4cf;if(_0x422ace[_0x503b9e(0x288)][_0x503b9e(0x22f)]!=settings[_0x503b9e(0x399)]&&'@'+_0x422ace['from'][_0x503b9e(0x22f)]!=settings[_0x503b9e(0x399)]||_0x422ace['chat']['id']!=settings[_0x503b9e(0x330)])return sendTelegram(_0x422ace['chat']['id'],_0x503b9e(0x2c0),{'parse_mode':_0x503b9e(0x354)}),![];return!![];}async function initTelegram(){const _0xe2d09b=_0x3af4cf;if(tgBot)tgBot[_0xe2d09b(0x342)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x7976af=_0xe2d09b(0x30b);_0x7976af+='\x0a',_0x7976af+='/enable\x20-\x20enable\x20notifications\x0a',_0x7976af+=_0xe2d09b(0x365),_0x7976af+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x7976af+=_0xe2d09b(0x3a4),_0x7976af+=_0xe2d09b(0x381),_0x7976af+='/off\x20-\x20stop\x20bot(s)\x0a',_0x7976af+=_0xe2d09b(0x3ad),_0x7976af+='/names\x20-\x20show\x20bot\x20names\x0a',_0x7976af+=_0xe2d09b(0x22e),_0x7976af+=_0xe2d09b(0x210),_0x7976af+=_0xe2d09b(0x2f5),_0x7976af+=_0xe2d09b(0x36d),_0x7976af+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x7976af+=_0xe2d09b(0x223);let _0x2e8eb8=_0xe2d09b(0x25f);_0x2e8eb8+='\x0a',_0x2e8eb8+=_0x7976af,tgBot[_0xe2d09b(0x27e)]((_0x548cf5,_0x14b270)=>{const _0x2e877e=_0xe2d09b;logger[_0x2e877e(0x21e)](getTimeStamp()+_0x2e877e(0x2e7)),logger[_0x2e877e(0x2fe)](_0x2e877e(0x279),_0x548cf5);}),tgBot['use'](async(_0x541d17,_0x2dae06)=>{const _0x3f0f5c=_0xe2d09b;if(!(!settings[_0x3f0f5c(0x330)]&&_0x541d17[_0x3f0f5c(0x1b2)][_0x3f0f5c(0x2bd)]['text']==_0x3f0f5c(0x263))){if(!validateTelegram(_0x541d17))return;}_0x2dae06();}),tgBot[_0xe2d09b(0x1d1)]('start',async _0x312953=>{const _0xd6e708=_0xe2d09b;if(!settings['telegramChatId'])updateSetting(_0xd6e708(0x330),_0x312953[_0xd6e708(0x339)]['id']);updateSetting(_0xd6e708(0x1a6),!![]);if(!validateTelegram(_0x312953))return;await sendTelegram(_0x312953[_0xd6e708(0x339)]['id'],_0x2e8eb8);}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x215),async _0x4a64d4=>{const _0x52318e=_0xe2d09b;updateSetting(_0x52318e(0x1a6),!![]),await sendTelegram(_0x4a64d4[_0x52318e(0x339)]['id'],_0x52318e(0x31e));}),tgBot['command'](_0xe2d09b(0x1c6),async _0x232912=>{const _0x194e92=_0xe2d09b;await sendTelegram(_0x232912['chat']['id'],'Notifications\x20disabled'),updateSetting(_0x194e92(0x1a6),![]);}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x394),async _0x1e0163=>{const _0x506767=_0xe2d09b,_0x18689d=Markup[_0x506767(0x2b0)]([Markup[_0x506767(0x32a)][_0x506767(0x1d6)](_0x506767(0x3b9),_0x506767(0x1b8)),Markup['button'][_0x506767(0x1d6)](_0x506767(0x227),'config_alerts'),Markup['button'][_0x506767(0x1d6)](_0x506767(0x261),_0x506767(0x33d))]);_0x1e0163['reply'](_0x506767(0x203),_0x18689d);}),tgBot[_0xe2d09b(0x290)](_0xe2d09b(0x1b8),async _0x3535e2=>{const _0x14c927=_0xe2d09b;_0x3535e2[_0x14c927(0x34c)](),updateSetting(_0x14c927(0x325),_0x14c927(0x2b8)),updateSetting(_0x14c927(0x1a6),!![]),await sendTelegram(_0x3535e2[_0x14c927(0x339)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot[_0xe2d09b(0x290)](_0xe2d09b(0x21b),async _0xee7b1b=>{const _0x347dcf=_0xe2d09b;_0xee7b1b[_0x347dcf(0x34c)](),updateSetting(_0x347dcf(0x325),'alerts'),updateSetting(_0x347dcf(0x1a6),!![]),await sendTelegram(_0xee7b1b['chat']['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0xe2d09b(0x290)]('config_all',async _0x239eac=>{const _0x2ac302=_0xe2d09b;_0x239eac['editMessageReplyMarkup'](),updateSetting(_0x2ac302(0x325),'all'),updateSetting(_0x2ac302(0x1a6),!![]),await sendTelegram(_0x239eac[_0x2ac302(0x339)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot['command']('status',async _0x2efcc4=>{const _0x334330=_0xe2d09b,_0x83d94e=getBotsWithMode();let _0x3184e6=_0x334330(0x305);config[_0x334330(0x1b9)](_0x613396=>{const _0x4c68ba=_0x334330,_0x328020=_0x83d94e[_0x4c68ba(0x2be)](_0x3d52f8=>_0x3d52f8[_0x4c68ba(0x331)]==_0x613396['botID'])[_0x4c68ba(0x295)];_0x3184e6+=_0x4c68ba(0x38e)+_0x613396[_0x4c68ba(0x331)]+':\x20'+_0x613396[_0x4c68ba(0x367)]+_0x4c68ba(0x281)+_0x328020+'\x20|\x20'+_0x613396[_0x4c68ba(0x24e)]+'\x0a';}),_0x3184e6+='\x0a',_0x3184e6+=_0x334330(0x22d),_0x3184e6+=!settings[_0x334330(0x1a6)]?_0x334330(0x377):_0x334330(0x212),_0x3184e6+=settings[_0x334330(0x1a6)]?settings[_0x334330(0x325)]==_0x334330(0x1ca)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0x334330(0x325)]+_0x334330(0x283):'',await sendTelegram(_0x2efcc4['chat']['id'],_0x3184e6,{'parse_mode':'HTML'});}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x380),async _0x6254d5=>{const _0x3121a1=_0xe2d09b,_0x235894=getEnabledBots();if(_0x235894[_0x3121a1(0x28c)]==0x0)await sendTelegram(_0x6254d5[_0x3121a1(0x339)]['id'],_0x3121a1(0x2f4));else{if(_0x235894['length']>0x1)_0x235894[_0x3121a1(0x353)]({'botID':_0x3121a1(0x1ca)});let _0x2151f5=[],_0x59a93e=[];const _0x544e46=_0x235894[_0x3121a1(0x28c)]%0x4==0x0||_0x235894['length']%0x4==0x3||_0x235894['length']%0x3==0x1?0x4:0x3;let _0x1b2076=0x0;_0x235894['forEach']((_0x1f705f,_0xfa1152)=>{const _0x175e8e=_0x3121a1;if(_0xfa1152%_0x544e46==0x0)_0x59a93e=[];_0x59a93e[_0x175e8e(0x353)](Markup[_0x175e8e(0x32a)]['callback'](_0x1f705f[_0x175e8e(0x331)]==_0x175e8e(0x1ca)?_0x175e8e(0x351):_0x175e8e(0x38e)+_0x1f705f['botID'],_0x175e8e(0x366)+_0x1f705f[_0x175e8e(0x331)])),_0xfa1152%_0x544e46==0x0&&(_0x2151f5[_0x1b2076]=_0x59a93e,_0x1b2076++);});const _0x3ed116=Markup[_0x3121a1(0x2b0)](_0x2151f5);_0x6254d5[_0x3121a1(0x371)](_0x3121a1(0x36c),_0x3ed116);}}),tgBot['action'](/restart_(.+)/,async _0x478278=>{const _0x25ab43=_0xe2d09b,_0x512ba8=_0x478278[_0x25ab43(0x1ab)][0x1];_0x478278['editMessageReplyMarkup'](),_0x512ba8==_0x25ab43(0x1ca)?config[_0x25ab43(0x1b9)](_0x4954ff=>{const _0x4dd600=_0x25ab43;restartBot(_0x4954ff[_0x4dd600(0x331)]);}):restartBot(_0x512ba8);}),tgBot[_0xe2d09b(0x1d1)]('on',async _0x136b12=>{const _0x1f3efa=_0xe2d09b,_0x10ed4a=getDisabledBots();if(_0x10ed4a[_0x1f3efa(0x28c)]==0x0)await sendTelegram(_0x136b12[_0x1f3efa(0x339)]['id'],_0x1f3efa(0x317));else{if(_0x10ed4a['length']>0x1)_0x10ed4a[_0x1f3efa(0x353)]({'botID':'all'});let _0x3bb45b=[],_0x1a9616=[];const _0x23afcf=_0x10ed4a['length']%0x4==0x0||_0x10ed4a['length']%0x4==0x3||_0x10ed4a[_0x1f3efa(0x28c)]%0x3==0x1?0x4:0x3;let _0x4547b1=0x0;_0x10ed4a['forEach']((_0x13b6a0,_0x109624)=>{const _0x130b9d=_0x1f3efa;if(_0x109624%_0x23afcf==0x0)_0x1a9616=[];_0x1a9616[_0x130b9d(0x353)](Markup[_0x130b9d(0x32a)][_0x130b9d(0x1d6)](_0x13b6a0[_0x130b9d(0x331)]=='all'?'All\x20bots':_0x130b9d(0x38e)+_0x13b6a0[_0x130b9d(0x331)],_0x130b9d(0x332)+_0x13b6a0[_0x130b9d(0x331)])),_0x109624%_0x23afcf==0x0&&(_0x3bb45b[_0x4547b1]=_0x1a9616,_0x4547b1++);});const _0x43d229=Markup['inlineKeyboard'](_0x3bb45b);_0x136b12[_0x1f3efa(0x371)](_0x1f3efa(0x2ce),_0x43d229);}}),tgBot[_0xe2d09b(0x290)](/on_(.+)/,async _0x194680=>{const _0x2f4a08=_0xe2d09b,_0x5732ac=_0x194680['match'][0x1];_0x194680['editMessageReplyMarkup']();if(_0x5732ac==_0x2f4a08(0x1ca)){const _0x4074b9=getDisabledBots();await sendTelegram(_0x194680[_0x2f4a08(0x339)]['id'],_0x2f4a08(0x329)),_0x4074b9[_0x2f4a08(0x1b9)](_0x518d4f=>{const _0xcf2681=_0x2f4a08;if(_0x518d4f['botID']!='all')toggleBot(_0x518d4f[_0xcf2681(0x331)],toggleStatus(_0x518d4f['botID']),_0xcf2681(0x259));});}else await sendTelegram(_0x194680[_0x2f4a08(0x339)]['id'],_0x2f4a08(0x245)+_0x5732ac),toggleBot(_0x5732ac,toggleStatus(_0x5732ac),_0x2f4a08(0x259));}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x1fc),async _0x2a810d=>{const _0x1cfce5=_0xe2d09b,_0x7b8232=getEnabledBots();if(_0x7b8232[_0x1cfce5(0x28c)]==0x0)await sendTelegram(_0x2a810d['chat']['id'],_0x1cfce5(0x2f4));else{if(_0x7b8232['length']>0x1)_0x7b8232['push']({'botID':_0x1cfce5(0x1ca)});let _0x4ce2b6=[],_0x57b140=[];const _0x4b2592=_0x7b8232[_0x1cfce5(0x28c)]%0x4==0x0||_0x7b8232[_0x1cfce5(0x28c)]%0x4==0x3||_0x7b8232[_0x1cfce5(0x28c)]%0x3==0x1?0x4:0x3;let _0x5cb848=0x0;_0x7b8232[_0x1cfce5(0x1b9)]((_0x188e7e,_0x42594f)=>{const _0x3a2a2a=_0x1cfce5;if(_0x42594f%_0x4b2592==0x0)_0x57b140=[];_0x57b140[_0x3a2a2a(0x353)](Markup['button'][_0x3a2a2a(0x1d6)](_0x188e7e[_0x3a2a2a(0x331)]==_0x3a2a2a(0x1ca)?_0x3a2a2a(0x351):_0x3a2a2a(0x38e)+_0x188e7e[_0x3a2a2a(0x331)],'off_'+_0x188e7e['botID'])),_0x42594f%_0x4b2592==0x0&&(_0x4ce2b6[_0x5cb848]=_0x57b140,_0x5cb848++);});const _0x4ea655=Markup[_0x1cfce5(0x2b0)](_0x4ce2b6);_0x2a810d[_0x1cfce5(0x371)]('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x4ea655);}}),tgBot[_0xe2d09b(0x290)](/off_(.+)/,async _0x5ee695=>{const _0x4be929=_0xe2d09b,_0xc74cf8=_0x5ee695[_0x4be929(0x1ab)][0x1];_0x5ee695[_0x4be929(0x34c)]();if(_0xc74cf8==_0x4be929(0x1ca)){const _0x324a20=getEnabledBots();await sendTelegram(_0x5ee695[_0x4be929(0x339)]['id'],_0x4be929(0x3a8)),_0x324a20[_0x4be929(0x1b9)](_0x6dd958=>{const _0x5eb53d=_0x4be929;if(_0x6dd958[_0x5eb53d(0x331)]!=_0x5eb53d(0x1ca))toggleBot(_0x6dd958[_0x5eb53d(0x331)],toggleStatus(_0x6dd958[_0x5eb53d(0x331)]),_0x5eb53d(0x259));});}else await sendTelegram(_0x5ee695[_0x4be929(0x339)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0xc74cf8),toggleBot(_0xc74cf8,toggleStatus(_0xc74cf8),_0x4be929(0x259));}),tgBot[_0xe2d09b(0x1d1)]('metrics',async _0x40a25f=>{const _0x53a2e1=_0xe2d09b,_0x25ecac=getEnabledBots();if(_0x25ecac['length']==0x0)await sendTelegram(_0x40a25f[_0x53a2e1(0x339)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x25ecac['length']>0x1){let _0x2a3b5b=[],_0x5e341b=[];const _0x37558d=_0x25ecac[_0x53a2e1(0x28c)]%0x4==0x0||_0x25ecac[_0x53a2e1(0x28c)]%0x4==0x3||_0x25ecac[_0x53a2e1(0x28c)]%0x3==0x1?0x4:0x3;let _0x5809a4=0x0;_0x25ecac[_0x53a2e1(0x1b9)]((_0x3b84ce,_0x5a098e)=>{const _0x378061=_0x53a2e1;if(_0x5a098e%_0x37558d==0x0)_0x5e341b=[];_0x5e341b[_0x378061(0x353)](Markup[_0x378061(0x32a)][_0x378061(0x1d6)](_0x378061(0x38e)+_0x3b84ce[_0x378061(0x331)],_0x378061(0x386)+_0x3b84ce[_0x378061(0x331)])),_0x5a098e%_0x37558d==0x0&&(_0x2a3b5b[_0x5809a4]=_0x5e341b,_0x5809a4++);});const _0x5cb6e2=Markup[_0x53a2e1(0x2b0)](_0x2a3b5b);_0x40a25f[_0x53a2e1(0x371)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x5cb6e2);}else{const _0x19764b=_0x25ecac[0x0][_0x53a2e1(0x331)];if(pid[_0x19764b])pid[_0x19764b][_0x53a2e1(0x38a)]({'function':_0x53a2e1(0x21a),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0xde5b34=>{const _0x286f4b=_0xe2d09b,_0x25c99d=_0xde5b34[_0x286f4b(0x1ab)][0x1];_0xde5b34[_0x286f4b(0x34c)]();if(pid[_0x25c99d])pid[_0x25c99d]['send']({'function':_0x286f4b(0x21a),'args':null});}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x1fe),async _0x606625=>{const _0x53d343=_0xe2d09b,_0x4b3565=getEnabledBots();if(_0x4b3565[_0x53d343(0x28c)]==0x0)await sendTelegram(_0x606625['chat']['id'],_0x53d343(0x2f4));else{if(_0x4b3565[_0x53d343(0x28c)]>0x1){let _0x1b236d=[],_0x3c7c97=[];const _0xcded9d=_0x4b3565[_0x53d343(0x28c)]%0x4==0x0||_0x4b3565['length']%0x4==0x3||_0x4b3565[_0x53d343(0x28c)]%0x3==0x1?0x4:0x3;let _0x2fbef5=0x0;_0x4b3565[_0x53d343(0x1b9)]((_0x3fcd45,_0x1f2c21)=>{const _0x2ee61c=_0x53d343;if(_0x1f2c21%_0xcded9d==0x0)_0x3c7c97=[];_0x3c7c97[_0x2ee61c(0x353)](Markup[_0x2ee61c(0x32a)][_0x2ee61c(0x1d6)]('Bot\x20'+_0x3fcd45[_0x2ee61c(0x331)],'portfolio_'+_0x3fcd45['botID'])),_0x1f2c21%_0xcded9d==0x0&&(_0x1b236d[_0x2fbef5]=_0x3c7c97,_0x2fbef5++);});const _0x847bc0=Markup['inlineKeyboard'](_0x1b236d);_0x606625[_0x53d343(0x371)](_0x53d343(0x23d),_0x847bc0);}else{const _0x2cec39=_0x4b3565[0x0]['botID'];if(pid[_0x2cec39])pid[_0x2cec39][_0x53d343(0x38a)]({'function':_0x53d343(0x2dd),'args':null});}}}),tgBot[_0xe2d09b(0x290)](/portfolio_(.+)/,async _0x5dadbd=>{const _0x59dec8=_0xe2d09b,_0x58df77=_0x5dadbd['match'][0x1];_0x5dadbd['editMessageReplyMarkup']();if(pid[_0x58df77])pid[_0x58df77][_0x59dec8(0x38a)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x1b2),async _0x246836=>{const _0x134c57=_0xe2d09b;await getMessages();if(!updateAvailable)await sendTelegram(_0x246836[_0x134c57(0x339)]['id'],_0x134c57(0x2e5));else{if(!validInstallation)await sendTelegram(_0x246836['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x39bc60=Markup[_0x134c57(0x2b0)]([Markup['button'][_0x134c57(0x1d6)](_0x134c57(0x224),_0x134c57(0x267)),Markup[_0x134c57(0x32a)][_0x134c57(0x1d6)]('No','update_no')]);_0x246836[_0x134c57(0x371)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x39bc60);}}}),tgBot[_0xe2d09b(0x290)](/update_(.+)/,async _0x2b091e=>{const _0x17c756=_0xe2d09b,_0x35d6d9=_0x2b091e['match'][0x1];_0x2b091e['editMessageReplyMarkup'](),_0x35d6d9=='yes'&&(await sendTelegram(_0x2b091e[_0x17c756(0x339)]['id'],_0x17c756(0x28a)),updateBB(_0x17c756(0x1b2))),_0x35d6d9=='no'&&await sendTelegram(_0x2b091e[_0x17c756(0x339)]['id'],_0x17c756(0x2fc));}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x1e0),async _0x407a5a=>{const _0x522ee7=_0xe2d09b;if(!validInstallation)await sendTelegram(_0x407a5a[_0x522ee7(0x339)]['id'],_0x522ee7(0x357));else{const _0x9fa3c7=Markup[_0x522ee7(0x2b0)]([Markup[_0x522ee7(0x32a)][_0x522ee7(0x1d6)]('Yes',_0x522ee7(0x258)),Markup['button']['callback']('No',_0x522ee7(0x254))]);_0x407a5a['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x9fa3c7);}}),tgBot[_0xe2d09b(0x290)](/reinstall_(.+)/,async _0x5956c3=>{const _0x8c95f0=_0xe2d09b,_0x3b0e35=_0x5956c3[_0x8c95f0(0x1ab)][0x1];_0x5956c3[_0x8c95f0(0x34c)](),_0x3b0e35==_0x8c95f0(0x27d)&&(await sendTelegram(_0x5956c3['chat']['id'],_0x8c95f0(0x37e)),updateBB('reinstall')),_0x3b0e35=='no'&&await sendTelegram(_0x5956c3[_0x8c95f0(0x339)]['id'],_0x8c95f0(0x1fb));}),tgBot[_0xe2d09b(0x1d1)]('toggle',async _0x509a7f=>{const _0x4e6e18=_0xe2d09b,_0x6d1891=getBotsWithMode();if(_0x6d1891[_0x4e6e18(0x28c)]==0x0)await sendTelegram(_0x509a7f[_0x4e6e18(0x339)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x89120=[],_0xec0d20=[];const _0x34355f=0x2;let _0x5b2326=0x0;_0x6d1891[_0x4e6e18(0x1b9)]((_0x3f3412,_0x4fb8ba)=>{const _0x4a60b7=_0x4e6e18;if(_0x4fb8ba%_0x34355f==0x0)_0xec0d20=[];_0xec0d20[_0x4a60b7(0x353)](Markup[_0x4a60b7(0x32a)]['callback']('Bot\x20'+_0x3f3412[_0x4a60b7(0x331)]+'\x20('+_0x3f3412['mode']+')',_0x4a60b7(0x3b7)+_0x3f3412['botID'])),_0x4fb8ba%_0x34355f==0x0&&(_0x89120[_0x5b2326]=_0xec0d20,_0x5b2326++);});const _0x582126=Markup[_0x4e6e18(0x2b0)](_0x89120);_0x509a7f[_0x4e6e18(0x371)](_0x4e6e18(0x387),_0x582126);}}),tgBot[_0xe2d09b(0x290)](/toggle_(.+)/,async _0x525261=>{const _0x25624a=_0xe2d09b,_0x257b50=_0x525261[_0x25624a(0x1ab)][0x1];_0x525261[_0x25624a(0x34c)]();const _0x5b485e=getBotsWithMode(),_0x2d551c=_0x5b485e[_0x25624a(0x2be)](_0x4f3135=>_0x4f3135['botID']==_0x257b50),_0x4844ca=_0x2d551c[_0x25624a(0x295)]==_0x25624a(0x316)?_0x25624a(0x2dc):'auto';await sendTelegram(_0x525261['chat']['id'],_0x25624a(0x31b)+_0x257b50+_0x25624a(0x3a3)+_0x4844ca+_0x25624a(0x383)),toggleBotMode(_0x257b50);}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x1c2),async _0x280f79=>{const _0x4ccc56=_0xe2d09b;let _0x216d8f='';config['forEach'](_0x57ea6=>{const _0x3fed70=_0x4739;_0x216d8f+='Bot\x20'+_0x57ea6[_0x3fed70(0x331)]+':\x20'+_0x57ea6[_0x3fed70(0x2cc)]+'\x0a';}),await sendTelegram(_0x280f79[_0x4ccc56(0x339)]['id'],_0x216d8f,{'parse_mode':_0x4ccc56(0x354)});}),tgBot[_0xe2d09b(0x1d1)](_0xe2d09b(0x237),async _0xc33214=>{await sendTelegram(_0xc33214['chat']['id'],_0x7976af);}),process[_0xe2d09b(0x2e1)](_0xe2d09b(0x309),()=>tgBot[_0xe2d09b(0x342)](_0xe2d09b(0x309))),process[_0xe2d09b(0x2e1)](_0xe2d09b(0x32e),()=>tgBot['stop'](_0xe2d09b(0x32e))),tgBot['launch']();}}function disableTelegram(){const _0x3c24af=_0x3af4cf;tgBot&&tgBot[_0x3c24af(0x342)]();}async function sendTelegram(_0xd698a1,_0x70ef44,_0x4d3e0d){const _0x11646b=_0x3af4cf;_0x4d3e0d={..._0x4d3e0d,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x11646b(0x3ae)](_0xd698a1,_0x70ef44,_0x4d3e0d);}catch(_0x324731){console[_0x11646b(0x1e7)](_0x11646b(0x249),_0x324731);}}async function sendTelegramBot(_0x39f8a7,_0x1014a8){const _0x38139d=_0x3af4cf;if(settings[_0x38139d(0x1a6)]){if(settings[_0x38139d(0x325)]==_0x38139d(0x1ca)||(_0x1014a8[_0x38139d(0x2af)]==_0x38139d(0x250)||_0x1014a8['type']==_0x38139d(0x1ed)||_0x1014a8[_0x38139d(0x2af)]==_0x38139d(0x23a))&&settings['telegramEvents']==_0x38139d(0x292)||_0x1014a8['type']==_0x38139d(0x1cd)&&settings[_0x38139d(0x325)]==_0x38139d(0x2b8)){if(tgBot&&settings[_0x38139d(0x330)]){if(_0x1014a8[_0x38139d(0x213)])await sendTelegram(settings[_0x38139d(0x330)],_0x1014a8[_0x38139d(0x2cc)]+'\x20>\x20'+_0x1014a8[_0x38139d(0x220)]);else await sendTelegram(settings['telegramChatId'],_0x38139d(0x38e)+_0x39f8a7+_0x38139d(0x2a9)+_0x1014a8[_0x38139d(0x220)]);}}}}async function sendTelegramMsg(_0x188fa1,_0xa5b728='HTML'){const _0x47c590=_0x3af4cf;return settings[_0x47c590(0x1a6)]&&tgBot&&settings[_0x47c590(0x330)]?(await sendTelegram(settings[_0x47c590(0x330)],_0x188fa1,{'parse_mode':_0xa5b728}),!![]):![];}function getDeviceWithIp(_0x31f6bf){return devices['find'](_0x5aea64=>_0x5aea64['ip']===_0x31f6bf);}async function temporaryAccess2FA(_0x558126,_0x392bda){const _0x1a043c=_0x3af4cf;let _0x4340e3=new Date(),_0x54b3a6=![];if(lastIpApproval){if(_0x4340e3-lastIpApproval<0x1388)_0x54b3a6=!![];}lastIpApproval=new Date();if(_0x54b3a6)return;if(tgBot&&settings['telegramChatId']){const _0x5f2aa2=uuidRandom();tmpStorage[_0x5f2aa2]={'uuid':_0x558126,'externalip':_0x392bda};const _0x354325=Markup[_0x1a043c(0x2b0)]([Markup[_0x1a043c(0x32a)][_0x1a043c(0x1d6)](_0x1a043c(0x242),_0x1a043c(0x328)+_0x5f2aa2),Markup[_0x1a043c(0x32a)][_0x1a043c(0x1d6)](_0x1a043c(0x1a2),_0x1a043c(0x2c7)+_0x5f2aa2),Markup[_0x1a043c(0x32a)][_0x1a043c(0x1d6)]('30\x20min','tempaccess_30_'+_0x5f2aa2),Markup['button'][_0x1a043c(0x1d6)]('reject',_0x1a043c(0x375)+_0x5f2aa2)]);await sendTelegram(settings[_0x1a043c(0x330)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x392bda)[_0x1a043c(0x2fd)]+'\x20?',_0x354325),tgBot[_0x1a043c(0x290)](/tempaccess_(.+)_(.+)/,async _0x7f0e13=>{const _0x4c56f6=_0x1a043c,_0x4dcb8a=_0x7f0e13[_0x4c56f6(0x1ab)][0x1],_0x568f12=_0x7f0e13[_0x4c56f6(0x1ab)][0x2],{uuid:_0x57473b,externalip:_0x125ba2}=tmpStorage[_0x568f12];delete tmpStorage[_0x568f12],_0x7f0e13[_0x4c56f6(0x34c)](),devices[_0x57473b][_0x4c56f6(0x358)]={'clientip':_0x125ba2,'timestamp':new Date()[_0x4c56f6(0x2a8)](),'expiry':_0x4dcb8a},_0x4dcb8a!=_0x4c56f6(0x3af)?(await sendTelegram(_0x7f0e13[_0x4c56f6(0x339)]['id'],_0x4c56f6(0x24d)+_0x4dcb8a+'\x20minutes',{'parse_mode':_0x4c56f6(0x354)}),io['to'](_0x57473b)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x7f0e13[_0x4c56f6(0x339)]['id'],_0x4c56f6(0x20c)),io['to'](_0x57473b)[_0x4c56f6(0x1e1)](_0x4c56f6(0x367),{'access':{'allow':![],'reason':_0x4c56f6(0x2a5),'token':null}}));});}}async function loginAccess2FA(_0x202d52,_0x10a335){const _0x2629bf=_0x3af4cf;if(tgBot&&settings[_0x2629bf(0x330)]){const _0x4446f7=uuidRandom();tmpStorage[_0x4446f7]={'uuid':_0x202d52,'externalip':_0x10a335};const _0x9e1965=Markup[_0x2629bf(0x2b0)]([Markup[_0x2629bf(0x32a)][_0x2629bf(0x1d6)](_0x2629bf(0x2b5),_0x2629bf(0x23b)+loginExpiry+'_'+_0x4446f7),Markup['button']['callback']('reject',_0x2629bf(0x340)+_0x4446f7)]);await sendTelegram(settings[_0x2629bf(0x330)],_0x2629bf(0x350)+normalizeIP(_0x10a335)[_0x2629bf(0x2fd)]+'\x20?',_0x9e1965),tgBot[_0x2629bf(0x290)](/login2fa_(.+)_(.+)/,async _0x34a6f3=>{const _0x998ffe=_0x2629bf,_0x59d5bd=_0x34a6f3[_0x998ffe(0x1ab)][0x1],_0x5c0042=_0x34a6f3[_0x998ffe(0x1ab)][0x2],{uuid:_0x286014,externalip:_0x1d0455}=tmpStorage[_0x5c0042];delete tmpStorage[_0x5c0042],_0x34a6f3[_0x998ffe(0x34c)](),devices[_0x286014]['telegram2FaApproval']={'clientip':_0x1d0455,'timestamp':new Date()[_0x998ffe(0x2a8)](),'expiry':_0x59d5bd},_0x59d5bd!=_0x998ffe(0x3af)?(await sendTelegram(_0x34a6f3[_0x998ffe(0x339)]['id'],_0x998ffe(0x344),{'parse_mode':_0x998ffe(0x354)}),io['to'](_0x286014)['emit']('status',{'access':{'allow':![],'reason':_0x998ffe(0x327),'token':null}})):(await sendTelegram(_0x34a6f3[_0x998ffe(0x339)]['id'],_0x998ffe(0x225)),io['to'](_0x286014)[_0x998ffe(0x1e1)](_0x998ffe(0x367),{'access':{'allow':![],'reason':_0x998ffe(0x25d),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3d1ff4=_0x3af4cf;return dbConfig[_0x3d1ff4(0x271)]('bots')[_0x3d1ff4(0x202)](_0x3d1ff4(0x331))['filter']({'status':_0x3d1ff4(0x320)})['value']()||[];}function getDisabledBots(){const _0x2e1505=_0x3af4cf;return dbConfig[_0x2e1505(0x271)]('bots')[_0x2e1505(0x202)](_0x2e1505(0x331))[_0x2e1505(0x1c4)]({'status':'disabled'})[_0x2e1505(0x201)]()||[];}function getBotAttributes(_0x1d24ec){const _0x4b65f0=_0x3af4cf;let _0x5213ec={};const _0x2ee718=configpath+'bot-'+_0x1d24ec+_0x4b65f0(0x2db),_0x5e94d0=fs[_0x4b65f0(0x3a7)](_0x2ee718);if(_0x5e94d0){const _0xa5f308=fs[_0x4b65f0(0x319)](_0x2ee718);try{const _0x1fac23=JSON['parse'](_0xa5f308),_0x43170c=_0x1fac23?_0x1fac23[_0x4b65f0(0x1cc)][0x0][_0x4b65f0(0x26c)]:![];_0x5213ec[_0x4b65f0(0x295)]=_0x43170c?_0x4b65f0(0x316):_0x4b65f0(0x2dc),_0x5213ec[_0x4b65f0(0x2cc)]=_0x1fac23?_0x1fac23[_0x4b65f0(0x1cc)][0x0][_0x4b65f0(0x2cc)]:_0x4b65f0(0x38e)+_0x1d24ec;}catch(_0x57c78f){_0x5213ec['mode']=_0x4b65f0(0x2dc),_0x5213ec[_0x4b65f0(0x2cc)]=_0x4b65f0(0x38e)+_0x1d24ec;}}else _0x5213ec['mode']=_0x4b65f0(0x2dc),_0x5213ec[_0x4b65f0(0x2cc)]=_0x4b65f0(0x38e)+_0x1d24ec;return _0x5213ec;}function getBotsWithMode(){const _0x161832=_0x3af4cf,_0x57a7b5=dbConfig[_0x161832(0x271)]('bots')[_0x161832(0x202)](_0x161832(0x331))[_0x161832(0x201)]()||[];return _0x57a7b5[_0x161832(0x1b9)](_0x53d00e=>{const _0x51e5e0=_0x161832;let _0x174bcd=getBotAttributes(_0x53d00e[_0x51e5e0(0x331)]);_0x53d00e[_0x51e5e0(0x295)]=_0x174bcd[_0x51e5e0(0x295)];}),_0x57a7b5;}function getBotExchanges(){const _0x1b2ada=_0x3af4cf;let _0x1e5b22=[];const _0x39fd32=dbConfig[_0x1b2ada(0x271)](_0x1b2ada(0x395))['sortBy'](_0x1b2ada(0x331))[_0x1b2ada(0x201)]()||[];_0x39fd32[_0x1b2ada(0x1b9)](_0x44a4e7=>{const _0x3a1369=_0x1b2ada;if(_0x44a4e7[_0x3a1369(0x367)]==_0x3a1369(0x320)){const _0x575525=configpath+_0x3a1369(0x3a1)+_0x44a4e7[_0x3a1369(0x331)]+_0x3a1369(0x2db),_0x3ae776=fs[_0x3a1369(0x3a7)](_0x575525);let _0x510106;if(_0x3ae776){const _0x440fe7=fs['readFileSync'](_0x575525);try{const _0x455b6f=JSON['parse'](_0x440fe7);_0x510106=_0x455b6f?_0x455b6f[_0x3a1369(0x1cc)][0x0][_0x3a1369(0x297)]:null;}catch(_0x24995b){}}if(_0x510106)_0x1e5b22[_0x3a1369(0x353)](_0x510106);}});const _0x52e540=[...new Set(_0x1e5b22)][_0x1b2ada(0x3b4)]();return _0x52e540;}async function initUser(){const _0x1872ea=_0x3af4cf;if(!settings[_0x1872ea(0x2d7)]){const _0x1e13ce=uuidRandom();mixpanel[_0x1872ea(0x2eb)](_0x1e13ce),updateSetting(_0x1872ea(0x2d7),_0x1e13ce);}}async function initSecure(){const _0x106bee=_0x3af4cf;let _0x176e5b=getSecure();if(!_0x176e5b[_0x106bee(0x2e6)](_0x106bee(0x36b))){let _0x426a48=await generateKeys();_0x176e5b['publicKey']=_0x426a48[_0x106bee(0x1c0)],_0x176e5b['privateKey']=_0x426a48[_0x106bee(0x39b)],_0x176e5b[_0x106bee(0x36b)]=crypto['randomBytes'](0x20)[_0x106bee(0x1d4)](_0x106bee(0x27a));;storeSecure(_0x176e5b);}}function getSettings(){const _0x1de61f=_0x3af4cf;return dbSettings[_0x1de61f(0x271)](_0x1de61f(0x341))[_0x1de61f(0x201)]()||{};}function getSecure(){const _0xcface6=_0x3af4cf;return dbSecure[_0xcface6(0x271)]('secure')['value']()||{};}function getBlacklist(){const _0x69f13c=_0x3af4cf;return dbSecure[_0x69f13c(0x271)]('blacklist')[_0x69f13c(0x201)]()||[];}function broadcastToBots(_0x5cc4b1,_0x4e1746){const _0x37429d=_0x3af4cf;config[_0x37429d(0x1b9)](_0x459444=>{const _0x20b3ae=_0x37429d;if(_0x459444[_0x20b3ae(0x367)]==_0x20b3ae(0x320)&&_0x459444[_0x20b3ae(0x24e)]==_0x20b3ae(0x1a4)||_0x459444[_0x20b3ae(0x367)]==_0x20b3ae(0x208)&&_0x459444[_0x20b3ae(0x24e)]=='running'){if(pid[_0x459444['botID']])pid[_0x459444['botID']][_0x20b3ae(0x38a)]({[_0x5cc4b1]:_0x4e1746});}});}async function storeSettings(_0xb9d6b8,_0x49f74b=![]){const _0x3cacb2=_0x3af4cf;_0xb9d6b8={...settings,..._0xb9d6b8};if(_0x49f74b&&_0xb9d6b8['bbPassword']!=_0x3cacb2(0x398)&&_0xb9d6b8[_0x3cacb2(0x1a7)]!=_0x3cacb2(0x289)&&_0xb9d6b8[_0x3cacb2(0x1a7)]!=''){const _0x23122c=crypt[_0x3cacb2(0x2ca)](secure[_0x3cacb2(0x39b)],_0xb9d6b8[_0x3cacb2(0x1a7)])[_0x3cacb2(0x2bd)][_0x3cacb2(0x293)]('|@|')[0x0],_0x16e3bf=bcrypt[_0x3cacb2(0x257)](_0x23122c,saltRounds);_0xb9d6b8={..._0xb9d6b8,'bbPassword':_0x16e3bf};}if(_0x49f74b&&_0xb9d6b8[_0x3cacb2(0x1ce)]!=_0x3cacb2(0x398)&&_0xb9d6b8['telegramToken']!='***'&&_0xb9d6b8['telegramToken']!=''){const _0x24a6ed=crypt['decrypt'](secure['privateKey'],_0xb9d6b8[_0x3cacb2(0x1ce)])[_0x3cacb2(0x2bd)][_0x3cacb2(0x293)](_0x3cacb2(0x39e))[0x0];_0xb9d6b8={..._0xb9d6b8,'telegramToken':_0x24a6ed};}if(_0x49f74b&&_0xb9d6b8[_0x3cacb2(0x28d)]!=_0x3cacb2(0x398)&&_0xb9d6b8[_0x3cacb2(0x28d)]!=_0x3cacb2(0x289)&&_0xb9d6b8[_0x3cacb2(0x28d)]!=''){const _0x5e0cab=crypt[_0x3cacb2(0x2ca)](secure[_0x3cacb2(0x39b)],_0xb9d6b8['marketcapApi'])['message'][_0x3cacb2(0x293)]('|@|')[0x0];_0xb9d6b8={..._0xb9d6b8,'marketcapApi':_0x5e0cab};}const _0x523490=_0xb9d6b8[_0x3cacb2(0x1ce)]!=_0x3cacb2(0x398)&&_0xb9d6b8[_0x3cacb2(0x1ce)]!=settings[_0x3cacb2(0x1ce)]||_0xb9d6b8[_0x3cacb2(0x399)]!=settings[_0x3cacb2(0x399)],_0x1efd5d=_0xb9d6b8[_0x3cacb2(0x1ce)]==''||_0xb9d6b8[_0x3cacb2(0x399)]=='',_0x3bcb1e=_0xb9d6b8[_0x3cacb2(0x28d)]&&_0xb9d6b8[_0x3cacb2(0x28d)]!=_0x3cacb2(0x398)&&_0xb9d6b8['marketcapApi']!=settings['telegramToken'];_0x523490&&(_0xb9d6b8[_0x3cacb2(0x330)]=null,_0xb9d6b8[_0x3cacb2(0x325)]='all');for(const [_0x69a55a,_0xa461f1]of Object[_0x3cacb2(0x276)](_0xb9d6b8)){if(_0x69a55a=='telegramToken'&&_0xa461f1==_0x3cacb2(0x398)){_0xb9d6b8[_0x3cacb2(0x1ce)]=settings['telegramToken'];continue;};if(_0x69a55a==_0x3cacb2(0x1a7)&&_0xa461f1=='************'){_0xb9d6b8['bbPassword']=settings[_0x3cacb2(0x1a7)];continue;};if(_0x69a55a=='marketcapApi'&&_0xa461f1==_0x3cacb2(0x398)){_0xb9d6b8[_0x3cacb2(0x28d)]=settings[_0x3cacb2(0x28d)];continue;};dbSettings['set']('settings.'+_0x69a55a,_0xa461f1)[_0x3cacb2(0x2d9)]();}settings=_0xb9d6b8,io['to']('botmanager')['emit'](_0x3cacb2(0x341),cleanSettings()),broadcastToBots(_0x3cacb2(0x3a6),settings[_0x3cacb2(0x3a6)]),broadcastToBots(_0x3cacb2(0x347),settings[_0x3cacb2(0x347)]),broadcastToBots(_0x3cacb2(0x28d),settings[_0x3cacb2(0x28d)]);if(_0x523490&&!_0x1efd5d)initTelegram();if(_0x523490&&_0x1efd5d)disableTelegram();getAllClients()['forEach'](_0x14e122=>{const _0x2ab392=_0x3cacb2;getSocket(_0x14e122['id'])[_0x2ab392(0x1e1)]('status',{'access':{'allow':![],'reason':_0x2ab392(0x327),'token':null}});}),_0x3bcb1e&&(await sleep(0xbb8),testMarketcapApi(_0xb9d6b8[_0x3cacb2(0x28d)]));}async function testMarketcapApi(_0x2f97dc){const _0x304628=_0x3af4cf,_0x295ac0=['BCT',_0x304628(0x1cb)];try{await axios['get'](_0x304628(0x2d3),{'headers':{'X-CMC_PRO_API_KEY':_0x2f97dc},'params':{'symbol':_0x295ac0['toString']()}});}catch(_0x448a68){_0x448a68[_0x304628(0x1d4)]()['includes'](_0x304628(0x369))?(io['to'](_0x304628(0x1a8))[_0x304628(0x1e1)](_0x304628(0x356),_0x304628(0x1d9)),logger[_0x304628(0x233)](_0x304628(0x1d9))):(io['to'](_0x304628(0x1a8))[_0x304628(0x1e1)](_0x304628(0x356),_0x304628(0x1eb)),logger[_0x304628(0x233)](_0x304628(0x1eb)),logger[_0x304628(0x2fe)](_0x304628(0x37d),_0x448a68[_0x304628(0x1d4)]()+_0x304628(0x37f)+_0x448a68[_0x304628(0x38f)]));return;}logger[_0x304628(0x2fe)](_0x304628(0x2ff));}function updateSetting(_0x71cd1b,_0x579b8f){const _0x48f62b=_0x3af4cf;dbSettings['set']('settings.'+_0x71cd1b,_0x579b8f)['write'](),settings=getSettings(),io['to'](_0x48f62b(0x1a8))[_0x48f62b(0x1e1)](_0x48f62b(0x341),cleanSettings());}function storeSecure(_0x309f36){const _0x39be0a=_0x3af4cf;dbSecure[_0x39be0a(0x271)]('secure')['push'](_0x309f36)[_0x39be0a(0x2d9)](),secure=_0x309f36;}function addBlacklist(_0x1ac465){const _0x37b38a=_0x3af4cf;cleanBlacklist();let _0x19c3aa;devices[_0x1ac465][_0x37b38a(0x358)]?_0x19c3aa=Math['max'](devices[_0x1ac465][_0x37b38a(0x358)]['expiry'],loginExpiry):_0x19c3aa=loginExpiry,dbSecure['get'](_0x37b38a(0x1d8))['push']({'expiry':new Date()[_0x37b38a(0x2a8)]()+_0x19c3aa*0x3c*0x3e8,'token':devices[_0x1ac465]['access'][_0x37b38a(0x2ad)]})['write'](),blacklist=dbSecure[_0x37b38a(0x271)]('blacklist')[_0x37b38a(0x201)]();}function cleanBlacklist(){const _0xa362de=_0x3af4cf;let _0x5ee0c4=dbSecure[_0xa362de(0x271)](_0xa362de(0x1d8))[_0xa362de(0x2d6)]()[_0xa362de(0x201)](),_0x449522=new Date()[_0xa362de(0x2a8)]();_0x5ee0c4[_0xa362de(0x1b9)](_0x96ab49=>{const _0x458ca1=_0xa362de;_0x96ab49['expiry']<_0x449522&&dbSecure[_0x458ca1(0x271)](_0x458ca1(0x1d8))[_0x458ca1(0x2bf)]({'expiry':_0x96ab49['expiry']})['write']();});}function initStates(){const _0x5b9ea4=_0x3af4cf;let _0x51d1ef=getConfiguration();_0x51d1ef[_0x5b9ea4(0x1b9)](_0x1feb82=>{const _0x24b874=_0x5b9ea4;_0x1feb82[_0x24b874(0x24e)]='stopped';}),storeConfiguration(_0x51d1ef);}function onKeys(){const _0xed3768=new RSA();return new Promise(_0x53271a=>{const _0x247f2f=_0x4739;_0xed3768['generateKeyPairAsync']()[_0x247f2f(0x1db)](_0x115139=>{_0x53271a(_0x115139);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x464536=_0x3af4cf;let _0x371b01=getSettings(),_0x4d86c2=![];!_0x371b01[_0x464536(0x2e6)](_0x464536(0x1ad))&&(_0x371b01['lastmsgtelegram']=0x0,_0x4d86c2=!![]);!_0x371b01['hasOwnProperty'](_0x464536(0x388))&&(_0x371b01['lastmsgemitted']=0x0,_0x4d86c2=!![]);!_0x371b01[_0x464536(0x2e6)](_0x464536(0x26b))&&(_0x371b01[_0x464536(0x26b)]=_0x464536(0x1e3),_0x4d86c2=!![]);!_0x371b01[_0x464536(0x2e6)](_0x464536(0x347))&&(_0x371b01[_0x464536(0x347)]=![],_0x4d86c2=!![]);!_0x371b01[_0x464536(0x2e6)](_0x464536(0x28d))&&(_0x371b01[_0x464536(0x28d)]='',_0x4d86c2=!![]);if(_0x4d86c2)storeSettings(_0x371b01);try{fs[_0x464536(0x298)](configbackuppath,{'withFileTypes':!![]})[_0x464536(0x1b9)](_0x378e0f=>{const _0x212328=_0x464536;if(!_0x378e0f[_0x212328(0x29b)]()){if(!_0x378e0f[_0x212328(0x26e)][_0x212328(0x1c7)](_0x212328(0x1c8)))fs[_0x212328(0x1ef)](configbackuppath+_0x378e0f[_0x212328(0x26e)]);}else fs[_0x212328(0x311)](configbackuppath+_0x378e0f[_0x212328(0x26e)],{'recursive':!![]});});}catch(_0x56e76d){logger[_0x464536(0x2fe)]('Error\x20removing\x20old\x20backup\x20files:',_0x56e76d);}}function storeConfiguration(_0x426e32){const _0x364889=_0x3af4cf;dbConfig[_0x364889(0x271)](_0x364889(0x395))['remove']()['write'](),dbConfig[_0x364889(0x271)]('bots')[_0x364889(0x353)](..._0x426e32)[_0x364889(0x2d9)](),config=_0x426e32;}async function resetPassword(){const _0x224d94=_0x3af4cf;if(tgBot&&settings[_0x224d94(0x330)]){const _0x2d87d3=Markup[_0x224d94(0x2b0)]([Markup['button'][_0x224d94(0x1d6)](_0x224d94(0x27d),_0x224d94(0x2ee)),Markup[_0x224d94(0x32a)]['callback']('no',_0x224d94(0x1aa))]);await sendTelegram(settings[_0x224d94(0x330)],_0x224d94(0x2a7),_0x2d87d3),tgBot[_0x224d94(0x290)](/resetpw_(.+)/,async _0x1093f1=>{const _0xb9acd2=_0x224d94,_0x4a91c4=_0x1093f1[_0xb9acd2(0x1ab)][0x1];_0x1093f1[_0xb9acd2(0x34c)]();if(_0x4a91c4!='no'){const _0x57f0b9=0xf,_0x3995b6='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x2b1306=Array[_0xb9acd2(0x288)](crypto[_0xb9acd2(0x2c2)](new Uint32Array(_0x57f0b9)))[_0xb9acd2(0x269)](_0x292451=>_0x3995b6[_0x292451%_0x3995b6[_0xb9acd2(0x28c)]])[_0xb9acd2(0x286)](''),_0x1307fd=bcrypt[_0xb9acd2(0x257)](_0x2b1306,saltRounds);storeSettings({'bbPassword':_0x1307fd}),await sendTelegram(_0x1093f1[_0xb9acd2(0x339)]['id'],_0xb9acd2(0x285)+_0x2b1306,{'parse_mode':'HTML'});}else await sendTelegram(_0x1093f1[_0xb9acd2(0x339)]['id'],_0xb9acd2(0x32f));});}}async function confirmRestore(_0x403803,_0x1a27da){const _0x906fd8=_0x3af4cf;io['to'](_0x906fd8(0x1a8))[_0x906fd8(0x1e1)](_0x906fd8(0x356),_0x906fd8(0x1f5),'success');if(tgBot&&settings[_0x906fd8(0x330)]){const _0x621999=uuidRandom();tmpStorage[_0x621999]={'path':_0x403803,'filename':_0x1a27da};const _0x57dc5d=Markup[_0x906fd8(0x2b0)]([Markup[_0x906fd8(0x32a)]['callback'](_0x906fd8(0x27d),_0x906fd8(0x235)+_0x621999),Markup['button'][_0x906fd8(0x1d6)]('no',_0x906fd8(0x1c1)+_0x621999)]);await sendTelegram(settings[_0x906fd8(0x330)],_0x906fd8(0x29a),_0x57dc5d),tgBot[_0x906fd8(0x290)](/restore_(.+)_(.+)/,async _0x123b6a=>{const _0x2a365f=_0x906fd8,_0x42678c=_0x123b6a[_0x2a365f(0x1ab)][0x1],_0x5d88ef=_0x123b6a[_0x2a365f(0x1ab)][0x2],{path:_0xda215f,filename:_0x448c7f}=tmpStorage[_0x5d88ef];delete tmpStorage[_0x5d88ef],_0x123b6a['editMessageReplyMarkup'](),_0x42678c==_0x2a365f(0x27d)?(logger[_0x2a365f(0x2fe)]('Restore\x20process\x20confirmed'),await sendTelegram(_0x123b6a[_0x2a365f(0x339)]['id'],_0x2a365f(0x2c5),{'parse_mode':'HTML'}),unzipFile(_0xda215f,_0x448c7f)):(logger[_0x2a365f(0x2fe)]('Restore\x20process\x20aborted'),await sendTelegram(_0x123b6a[_0x2a365f(0x339)]['id'],_0x2a365f(0x1b4)));});}}function getServerTime(){const _0x108010=_0x3af4cf,_0x53b993=new Date();return _0x53b993[_0x108010(0x216)]()+'/'+(_0x53b993['getMonth']()+0x1)[_0x108010(0x1d4)]()[_0x108010(0x30a)](0x2,'0')+'/'+_0x53b993[_0x108010(0x303)]()['toString']()[_0x108010(0x30a)](0x2,'0')+'\x20'+_0x53b993['getHours']()[_0x108010(0x1d4)]()[_0x108010(0x30a)](0x2,'0')+':'+_0x53b993[_0x108010(0x302)]()['toString']()['padStart'](0x2,'0')+':'+_0x53b993[_0x108010(0x27f)]()[_0x108010(0x1d4)]()[_0x108010(0x30a)](0x2,'0');}function getTimeStamp(){const _0x27b1dd=_0x3af4cf,_0x1f93f3=shiftedTime();return _0x1f93f3[_0x27b1dd(0x216)]()+'/'+(_0x1f93f3[_0x27b1dd(0x2ea)]()+0x1)[_0x27b1dd(0x1d4)]()[_0x27b1dd(0x30a)](0x2,'0')+'/'+_0x1f93f3['getDate']()[_0x27b1dd(0x1d4)]()[_0x27b1dd(0x30a)](0x2,'0')+'\x20'+_0x1f93f3[_0x27b1dd(0x243)]()[_0x27b1dd(0x1d4)]()['padStart'](0x2,'0')+':'+_0x1f93f3[_0x27b1dd(0x302)]()[_0x27b1dd(0x1d4)]()[_0x27b1dd(0x30a)](0x2,'0')+':'+_0x1f93f3[_0x27b1dd(0x27f)]()[_0x27b1dd(0x1d4)]()[_0x27b1dd(0x30a)](0x2,'0');}function getCleanTimeStamp(){const _0x18899f=_0x3af4cf,_0x1c77ab=shiftedTime();return _0x1c77ab['getFullYear']()+(_0x1c77ab['getMonth']()+0x1)[_0x18899f(0x1d4)]()[_0x18899f(0x30a)](0x2,'0')+_0x1c77ab[_0x18899f(0x303)]()[_0x18899f(0x1d4)]()[_0x18899f(0x30a)](0x2,'0')+'-'+_0x1c77ab[_0x18899f(0x243)]()[_0x18899f(0x1d4)]()['padStart'](0x2,'0')+_0x1c77ab[_0x18899f(0x302)]()[_0x18899f(0x1d4)]()[_0x18899f(0x30a)](0x2,'0')+_0x1c77ab[_0x18899f(0x27f)]()[_0x18899f(0x1d4)]()[_0x18899f(0x30a)](0x2,'0');}function shiftedTime(){const _0x36ef47=_0x3af4cf,_0x38d677=new Date();let _0x1e5448=_0x38d677;if(settings[_0x36ef47(0x3a6)]&&settings[_0x36ef47(0x3a6)]!==0x0)_0x1e5448=fns[_0x36ef47(0x2c1)](_0x38d677,{'hours':settings[_0x36ef47(0x3a6)]});return _0x1e5448;}async function startScheduler(){const _0x300b6a=_0x3af4cf,_0x384cbd=new Date()[_0x300b6a(0x1c3)](),_0x3852f2=shiftedTime()[_0x300b6a(0x243)]();_0x3852f2==0x4&&backupConfigFiles(),_0x3852f2==0x0&&rotateLogFiles(),_0x384cbd%0x6==0x0&&triggerAnalytics(),_0x384cbd%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x40fa11){const _0x2271ad=_0x3af4cf;logger[_0x2271ad(0x2fe)](_0x2271ad(0x384)+_0x40fa11);const _0x1f138d=getBotsWithMode();_0x1f138d[_0x2271ad(0x28c)]>0x0?confirmRestore(configbackuppath,_0x40fa11):unzipFile(configbackuppath,_0x40fa11);}function _0x1948(){const _0x439a91=['readFileSync','express-fileupload','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','includes','whitelist','Notifications\x20enabled','auth','enabled',':\x20Bot\x20Mgr\x20>\x20','exit','store-configuration','DEFLATE','telegramEvents','ipv6','reload','tempaccess_5_','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','button','Unauthorized\x20attempt\x20to\x20add\x20bot','argv','version','SIGTERM','Password\x20reset\x20rejected','telegramChatId','botID','on_','Server','bcryptjs','2FA\x20required','get-messages','bbUsername','string','chat','Token\x20blacklisted','removeAllListeners','Network\x20Interfaces:','config_all','Unauthorized\x20attempt\x20to\x20update\x20settings','temporary\x20access\x20timeout','login2fa_reject_','settings','stop','path','Login\x20accepted','any','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','onepagemode','#RES#\x20if\x20running\x20on\x20server','binary','-events.json','Starting\x20(','editMessageReplyMarkup','backup-files','yargs/yargs','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Allow\x20login\x20from\x20IP\x20address\x20','All\x20bots','output-002.log','push','HTML','defaults','notification','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','telegramIpApproval','get-logs','Unauthorized\x20attempt\x20to\x20download\x20','clientip','number','new-disabled','=>\x20Go\x20to\x20#CYA#http://','lowdb','sign','login\x20required','confirm-message','socket.io','remoteAddress','/disable\x20-\x20disable\x20notifications\x0a','restart_','status','family','status\x20code\x20401','Unauthorized\x20attempt\x20to\x20get\x20messages','secret','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/update\x20-\x20update\x20Balance\x20Bot\x0a','place-order','RSA-OAEP','disconnect','reply','test','3000','Starting\x20new\x20bot\x20|\x20Bot\x20','tempaccess_reject_','mixpanel','Notifications\x20disabled\x0a','file','node','Invalid\x20authentication\x20token\x20(1)','parse','-results.json','Error\x20details:','Starting\x20Balance\x20Bot\x20reinstallation','\x20-\x20','restart','/on\x20-\x20start\x20bot(s)\x0a','address','\x20mode','Restore\x20backup\x20file\x20','config/','metrics_','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','lastmsgemitted','update-bot','send','Unauthorized\x20attempt\x20to\x20delete\x20alerts','showConfig','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Bot\x20','code','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','invalid\x20credentials','kill','Idling\x20(','config','bots','storeFiat','\x20(2)','************','telegramUsername','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','privateKey','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Session\x20expired\x20for\x20user\x20...','|@|','160263oHjHCL','mkdirSync','bot-','function','\x20to\x20','/restart\x20-\x20restart\x20bot(s)\x0a','keys','timeshift','existsSync','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','statSync','range','env','store-settings','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','sendMessage','reject','password',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','sendFile','request','sort','Logged\x20out\x20user\x20...','reason','toggle_','slice','Orders','backup-full','user','backup','15\x20min','loginRequired','running','util','telegramEnabled','bbPassword','botmanager','Enabled\x20Bot\x20','resetpw_no','match','Unauthorized\x20login\x20attempt\x20(timeout)','lastmsgtelegram','Restarting\x20Bot\x20','12NhauVN','#RES#\x20if\x20running\x20locally\x0a','tkn','update','deleteHistoryAlerts','Restore\x20process\x20aborted','version.json','RSA','apply','config_orders','forEach','generate','axios','show-config','resetHistory','backupfile','endsWith','publicKey','restore_no_','names','getUTCHours','filter','stringify','disable','startsWith','backup-full@','bb-secure.json','all','ETH','bot','order','telegramToken','output-001.log','login\x20token\x20generated','command','cancel-loading','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','toString','Unauthorized\x20attempt\x20to\x20get\x20events','callback','User\x20has\x20been\x20validated','blacklist','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','(((.+)+)+)+$','then','data','host','Logged\x20in\x20user\x20...','params','reinstall','emit','store','0.0.0','login\x20not\x20required','storeHeadless','Deleted\x20Bot\x20','log','reset-password','telegrammsg','track','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','$1_$2_$3','warning','Setting\x20access:\x20','unlinkSync','1563450ZGfOOo','conn','Unauthorized\x20attempt\x20to\x20show\x20configuration','temp/','graphql-request','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','2FA\x20login\x20token\x20generated','2072330UejqWj','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Starting\x20#RED#Balance\x20Bot\x20v','Node.js\x20v','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','off','Markdown','portfolio','staging','logs','value','sortBy','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','logged\x20out','build2','messages','date-fns','new','storeConfiguration','telegram','Invalid\x20authentication\x20token\x20(2)','Temporary\x20access\x20rejected','/:bot/performance','inherit','get-backup-files','/metrics\x20-\x20show\x20bot\x20performance\x0a','verify','Notifications\x20enabled\x0a','showname','whitelistEnabled','enable','getFullYear','/:bot/support','temporary\x20token\x20generated','production','sendMetricsTelegram','config_alerts','format','handshake','simple','exec','event','bot.js','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','/help\x20-\x20show\x20available\x20commands\x0a','Yes','Login\x20rejected','assign','Alerts','login\x20token\x20valid','_data','\x1b[33m','http','temporary\x20access\x20not\x20allowed','<b>Telegram\x20Bot\x20Status:</b>\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','username','-performance.json','output-000.log','.zip','full','pidRefreshToken','restore_yes_','896856RavAWo','help','initclient','server','success','login2fa_','reinstall-bb','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','4262nbXCMr','telegram2FaApproval','exp','\x1b[0m','5\x20min','getHours','express','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','jsonwebtoken','bbvNew','463IPcJkY','Telegram\x20error:','versions','crypto','compareSync','Access\x20enabled\x20for\x20','live','search','error','[ip-address]','sockets','allow','reinstall_no','backup-full.zip','createWriteStream','hashSync','reinstall_yes','stopped','login','clients','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','2FA\x20login\x20rejected','::ffff:127.0.0.1','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','All','6b67f3d61ee94b8f5c80b4affef4c4d9','/start','access','download','*$1*','update_yes','https://api.ipify.org?format=json','map','node-zip','latestversion','headless','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','name','zip/','uuid-random','get','Failed\x20to\x20download\x20','uuid','63pcXrMh','/:bot/portfolio','entries','/:bot/configuration',')\x20\x20\x20|\x20Bot\x20','Telegraf\x20error:','hex','writeFileSync','Unauthorized\x20attempt\x20to\x20delete\x20bot','yes','catch','getSeconds','\x1b[35m','\x20|\x20','IPv4','\x20only\x0a',')\x20|\x20Bot\x20','Password\x20has\x20been\x20reset\x20to:\x20','join','/download/:type','from','***','Starting\x20Balance\x20Bot\x20update','reset-history','length','marketcapApi','/upload-backup','use','action','index.html','alerts','split','toIPv4MappedAddress','mode','connected','exchange','readdirSync','127.0.0.1','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','isDirectory','Backup\x20file\x20unzipped\x20and\x20stored','connection','files','4969608GdyOzC','1000','Unauthorized\x20attempt\x20to\x20get\x20portfolio','port','2FA','isValid','temporary\x20access\x20rejected','Backup\x20file\x20uploaded','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','getTime','\x20>\x20','cancelLoading','restore-backup-file','fork','token','static','type','inlineKeyboard','bbvReceive','environment','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','update-bb','accept','/:bot/coins','copyFileSync','orders','4612120yJeuKW','min','bb-settings.json','apiSecret','message','find','remove','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','add','randomFillSync','apiPassword','temporaryAccessAllowed','Restoring\x20bot(s)\x20from\x20backup','\x1b[36m','tempaccess_15_','\x20|\x20user:\x20...','access\x20timeout','decrypt','listen','botname','add-bot','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','logout','get-starting-balances','Error:\x20Invalid\x20argument\x20','apiKey','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','(staging)','Invalid\x20username\x20or\x20IP\x20address','cloneDeep','userid','isIPv4MappedAddress','write','Unauthorized\x20attempt\x20to\x20update\x20bot','-config.json','manual','sendPortfolioTelegram','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','post','headers','once','\x20|\x20client:\x20...','2FA\x20login\x20required','disabled','Your\x20installation\x20is\x20already\x20up\x20to\x20date','hasOwnProperty',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','store-fiat','updatebotmanager','getMonth','alias','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','started','resetpw_yes','get-portfolio','encryptedUuid','getPortfolio','Unauthorized\x20attempt\x20to\x20log\x20out','bb-config.json','No\x20bots\x20running\x20right\x20now','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','replace','timestamp','delete-bot','build','logs/','-----------------------------------------------------------------------------------','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','show','debug','CoinMarketCap\x20API\x20key\x20validated','api-eu.mixpanel.com','pidExpireLogin','getMinutes','getDate','#RES#\x20','<b>Balance\x20Bot\x20Status:</b>\x0a','expiry','hybrid-crypto-js','ipc','SIGINT','padStart','You\x20can\x20use\x20the\x20following\x20commands:\x0a','mtime','f2aRequired','\x20(1)','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','telegraf','rmSync','toIPv4Address','#RES#','toggleBotMode','Bot\x20Mgr\x20>\x20','auto','All\x20bots\x20running\x20right\x20now','internal'];_0x1948=function(){return _0x439a91;};return _0x1948();}async function getBackupFiles(_0x3b8843=null){const _0x169fad=_0x3af4cf;let _0x4989b7=[],_0x4601b5=fs[_0x169fad(0x298)](configbackuppath,{'withFileTypes':!![]});_0x4601b5['sort']((_0xb50082,_0x5e145d)=>_0xb50082[_0x169fad(0x26e)]<_0x5e145d[_0x169fad(0x26e)]?0x1:_0x5e145d[_0x169fad(0x26e)]<_0xb50082[_0x169fad(0x26e)]?-0x1:0x0),_0x4601b5[_0x169fad(0x1b9)](_0x12081d=>{const _0x2a04a9=_0x169fad;if(!_0x12081d[_0x2a04a9(0x29b)]()&&_0x12081d[_0x2a04a9(0x26e)][_0x2a04a9(0x1c7)]('backup-full@')&&_0x12081d[_0x2a04a9(0x26e)][_0x2a04a9(0x1bf)]('.zip')){const _0x3c7339=formatDate(fs[_0x2a04a9(0x3a9)](configbackuppath+_0x12081d[_0x2a04a9(0x26e)])[_0x2a04a9(0x30c)]);_0x4989b7[_0x2a04a9(0x353)]({'name':_0x12081d[_0x2a04a9(0x26e)],'mtime':_0x3c7339});}});if(_0x3b8843)io['to'](_0x3b8843)['emit'](_0x169fad(0x34d),_0x4989b7);else return _0x4989b7;}async function backupConfigFiles(){const _0x5a31=_0x3af4cf;await zipFiles('backup-full');const _0x27a6e1=getCleanTimeStamp();fs[_0x5a31(0x2b7)](zippath+_0x5a31(0x255),configbackuppath+(_0x5a31(0x1c8)+_0x27a6e1+_0x5a31(0x232)));let _0x1207ec=fs[_0x5a31(0x298)](configbackuppath,{'withFileTypes':!![]});_0x1207ec[_0x5a31(0x3b4)]((_0x2b7b2c,_0x2459a1)=>_0x2b7b2c[_0x5a31(0x26e)]<_0x2459a1['name']?0x1:_0x2459a1['name']<_0x2b7b2c['name']?-0x1:0x0),_0x1207ec[_0x5a31(0x28c)]>maxBackups&&fs[_0x5a31(0x1ef)](configbackuppath+_0x1207ec[_0x1207ec['length']-0x1][_0x5a31(0x26e)]);}function rotateLogFiles(){const _0x140e52=_0x3af4cf,_0x492fb8=fs[_0x140e52(0x3a9)](logspath+_0x140e52(0x231)),_0x3c9206=_0x492fb8['size']/0x400;if(_0x3c9206>0x64){let _0x4f2f18=fs[_0x140e52(0x298)](logspath,{'withFileTypes':!![]});_0x4f2f18['sort']((_0x1619b5,_0x4f6d5e)=>_0x1619b5['name']<_0x4f6d5e[_0x140e52(0x26e)]?0x1:_0x4f6d5e[_0x140e52(0x26e)]<_0x1619b5[_0x140e52(0x26e)]?-0x1:0x0),_0x4f2f18[_0x140e52(0x1b9)](_0xc1c12e=>{const _0x101e0a=_0x140e52;if(_0xc1c12e[_0x101e0a(0x26e)]==_0x101e0a(0x352))fs['copyFileSync'](logspath+_0xc1c12e[_0x101e0a(0x26e)],logspath+'output-003.log');if(_0xc1c12e[_0x101e0a(0x26e)]=='output-001.log')fs[_0x101e0a(0x2b7)](logspath+_0xc1c12e['name'],logspath+_0x101e0a(0x352));_0xc1c12e[_0x101e0a(0x26e)]==_0x101e0a(0x231)&&(fs[_0x101e0a(0x2b7)](logspath+_0xc1c12e[_0x101e0a(0x26e)],logspath+_0x101e0a(0x1cf)),fs[_0x101e0a(0x27b)](logspath+_0xc1c12e[_0x101e0a(0x26e)],''));});}}async function zipFiles(_0x3ffc49){const _0x4dd167=_0x3af4cf;let _0x29845d;if(_0x3ffc49==_0x4dd167(0x200))_0x29845d=logspath;if(_0x3ffc49==_0x4dd167(0x1a1))_0x29845d=configpath;if(_0x3ffc49==_0x4dd167(0x3ba))_0x29845d=configpath;let _0x29047b=fs[_0x4dd167(0x298)](_0x29845d,{'withFileTypes':!![]});const _0x47b7a3=new require(_0x4dd167(0x26a))();_0x29047b[_0x4dd167(0x1b9)](_0x130675=>{const _0x2b699f=_0x4dd167;if(!_0x130675['isDirectory']()){let _0x5e2d0b=fs[_0x2b699f(0x319)](_0x29845d+_0x130675['name']);if(_0x3ffc49==_0x2b699f(0x1a1)){const _0x33697d=/^bot-[0-9]{3}-config.json$/,_0x518a67=_0x33697d[_0x2b699f(0x372)](_0x130675['name']);if(_0x518a67){const _0xd274f2=JSON['parse'](_0x5e2d0b);if(_0xd274f2['bot'][0x0]){_0xd274f2['bot'][0x0][_0x2b699f(0x2d2)]=_0x2b699f(0x289),_0xd274f2['bot'][0x0][_0x2b699f(0x2bc)]=_0x2b699f(0x289);if(_0xd274f2[_0x2b699f(0x1cc)][0x0][_0x2b699f(0x2c3)])_0xd274f2['bot'][0x0][_0x2b699f(0x2c3)]='***';}_0x5e2d0b=JSON['stringify'](_0xd274f2,null,0x2);}if(_0x130675[_0x2b699f(0x26e)]=='bb-settings.json'){const _0x2ad972=JSON[_0x2b699f(0x37b)](_0x5e2d0b);if(_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x1a3)])_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x1a3)]=![];if(_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x1a7)])_0x2ad972['settings']['bbPassword']=_0x2b699f(0x289);if(_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x1ce)])_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x1ce)]=_0x2b699f(0x289);if(_0x2ad972[_0x2b699f(0x341)]['telegramChatId'])_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x330)]=null;if(_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x28d)])_0x2ad972[_0x2b699f(0x341)][_0x2b699f(0x28d)]=_0x2b699f(0x289);_0x5e2d0b=JSON[_0x2b699f(0x1c5)](_0x2ad972,null,0x2);}if(_0x130675[_0x2b699f(0x26e)]!=_0x2b699f(0x1c9))_0x47b7a3['file'](_0x130675['name'],_0x5e2d0b);}else _0x47b7a3[_0x2b699f(0x378)](_0x130675[_0x2b699f(0x26e)],_0x5e2d0b);}});const _0x3bd074=_0x47b7a3[_0x4dd167(0x1ba)]({'base64':![],'compression':_0x4dd167(0x324)});fs[_0x4dd167(0x27b)](zippath+(_0x3ffc49+_0x4dd167(0x232)),_0x3bd074,_0x4dd167(0x349));}async function unzipFile(_0x586ed1,_0x3b2a80){const _0x281a56=_0x3af4cf;fs[_0x281a56(0x298)](configpath,{'withFileTypes':!![]})[_0x281a56(0x1b9)](_0x503162=>{const _0x5e0957=_0x281a56;if(!_0x503162['isDirectory']())fs['rmSync'](configpath+_0x503162[_0x5e0957(0x26e)]);});const _0x111207=fs['readFileSync'](_0x586ed1+_0x3b2a80,_0x281a56(0x349)),_0x2f0909=new require(_0x281a56(0x26a))(_0x111207,{'base64':![],'checkCRC32':!![]});Object[_0x281a56(0x3a5)](_0x2f0909[_0x281a56(0x29e)])[_0x281a56(0x1b9)](_0x913b4c=>{const _0x36b92d=_0x281a56,_0xc53c83=_0x2f0909[_0x36b92d(0x29e)][_0x913b4c];fs[_0x36b92d(0x27b)](configpath+_0xc53c83[_0x36b92d(0x26e)],_0xc53c83[_0x36b92d(0x229)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x3894fb=>{const _0x2fd6c1=_0x281a56;if(!_0x3894fb[_0x2fd6c1(0x29b)]())fs['rmSync'](temppath+_0x3894fb['name']);}),logger[_0x281a56(0x2fe)](_0x281a56(0x29c)),process[_0x281a56(0x38a)]({'restore':!![]},_0x295e00=>{});}async function getPublicIp(){const _0x50b31c=_0x3af4cf;try{const _0x290063=await axios['get'](_0x50b31c(0x268));publicip=_0x290063[_0x50b31c(0x1dc)]['ip'];}catch(_0x22264e){}}async function triggerAnalytics(){const _0x509e19=_0x3af4cf;if(!publicip)await getPublicIp();const _0x52d7fe=getBotsWithMode();let _0xf80b82=0x0;_0x52d7fe[_0x509e19(0x1b9)](_0x114f63=>{const _0xbb4d59=_0x509e19;if(_0x114f63[_0xbb4d59(0x367)]===_0xbb4d59(0x320))_0xf80b82++;});const _0x34e6bc=getBotExchanges();mixpanel[_0x509e19(0x1ea)](_0x509e19(0x333),{'distinct_id':settings[_0x509e19(0x2d7)],'ip':publicip,'version':serverversion,'numbots':_0x52d7fe[_0x509e19(0x28c)],'numbotsenabled':_0xf80b82,'exchanges':_0x34e6bc,'environment':environment});}async function getMessages(){const _0x4cbbf1=_0x3af4cf,_0x395687=_0x4cbbf1(0x26d),_0x39a916=new GraphQLClient(_0x395687),_0x52a9a6={'authorization':_0x4cbbf1(0x260)},_0x54af19=serverversion['split']('.'),_0x447715=_0x54af19[0x0]+'.'+_0x54af19[0x1],_0x56af6c=Math[_0x4cbbf1(0x2ba)](settings[_0x4cbbf1(0x1ad)],settings['lastmsgemitted']),_0x14acba={'last':parseInt(_0x56af6c),'bbm':_0x447715},_0x24c215=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3496d0;try{_0x3496d0=await _0x39a916[_0x4cbbf1(0x3b3)](_0x24c215,_0x14acba,_0x52a9a6);}catch(_0x582638){}if(_0x3496d0&&_0x3496d0[_0x4cbbf1(0x206)]){let _0x59e6f1=settings[_0x4cbbf1(0x1ad)];newMessages=[];for(const _0x1a9f42 of _0x3496d0[_0x4cbbf1(0x206)]){newMessages[_0x4cbbf1(0x353)](_0x1a9f42);let _0x2f2052=![];_0x1a9f42[_0x4cbbf1(0x247)]&&(updateSetting(_0x4cbbf1(0x26b),_0x1a9f42[_0x4cbbf1(0x247)]),_0x2f2052=isNewerVersion(serverversion,_0x1a9f42[_0x4cbbf1(0x247)])||serverversion==_0x1a9f42[_0x4cbbf1(0x247)]);if(!_0x2f2052&&_0x1a9f42[_0x4cbbf1(0x35c)]>_0x59e6f1){if(_0x1a9f42['bbvReceive']===_0x4cbbf1(0x345)||serverversion[_0x4cbbf1(0x1c7)](_0x1a9f42[_0x4cbbf1(0x2b1)])){let _0x268710=''+_0x1a9f42['title']+'\x0a\x0a'+_0x1a9f42['message'];const _0x58cc20=await sendTelegramMsg(toTelegramMarkdown(_0x268710),_0x4cbbf1(0x1fd));if(_0x58cc20)_0x59e6f1=_0x1a9f42['number'];}}}updateAvailable=isNewerVersion(settings[_0x4cbbf1(0x26b)],serverversion),updateSetting(_0x4cbbf1(0x1ad),_0x59e6f1),emitMessages();}}function emitMessages(){const _0x1508f2=_0x3af4cf,_0x5f5b3e=settings[_0x1508f2(0x388)];let _0x554a13=[];newMessages[_0x1508f2(0x1b9)](_0x4bc162=>{const _0x172456=_0x1508f2;_0x4bc162[_0x172456(0x35c)]>_0x5f5b3e&&_0x554a13[_0x172456(0x353)](_0x4bc162);}),_0x554a13['length']>0x0&&getAllClients()[_0x1508f2(0x1b9)](_0x4e76f0=>{const _0x4415ed=_0x1508f2;getSocket(_0x4e76f0['id'])[_0x4415ed(0x1e1)](_0x4415ed(0x2bd),_0x554a13);});}function confirmMessage(_0x9ce1a7){const _0x293163=_0x3af4cf;updateSetting(_0x293163(0x388),Number(_0x9ce1a7));}function isNewerVersion(_0x3d9af7,_0x2c9c6e){const _0x2e29de=_0x3af4cf,_0x124e0e=_0x2c9c6e[_0x2e29de(0x293)]('.'),_0x546ada=_0x3d9af7[_0x2e29de(0x293)]('.');for(var _0x356fbb=0x0;_0x356fbb<_0x546ada['length'];_0x356fbb++){const _0x57d05f=~~_0x546ada[_0x356fbb],_0x4565ae=~~_0x124e0e[_0x356fbb];if(_0x57d05f>_0x4565ae)return!![];if(_0x57d05f<_0x4565ae)return![];}return![];}function toTelegramMarkdown(_0x39b30b){const _0x1badb7=_0x3af4cf,_0x5a000e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5dfe7c=/\*{2}(.+?)\*{2}/gim;return _0x39b30b=_0x39b30b[_0x1badb7(0x2f6)](_0x5a000e,_0x1badb7(0x1ec))[_0x1badb7(0x2f6)](_0x5dfe7c,_0x1badb7(0x266)),_0x39b30b;}async function validateConfigFile(){const _0x4075a0=_0x3af4cf,_0x384504=dbConfig[_0x4075a0(0x271)](_0x4075a0(0x395))['sortBy'](_0x4075a0(0x331))[_0x4075a0(0x201)]()||[];if(_0x384504['length']==0x0){let _0x25e52f=0x0,_0x261619=[];const _0x2dcde3=/^bot-([0-9]{3})-config.json$/,_0x36d078=fs['readdirSync'](configpath);_0x36d078[_0x4075a0(0x1b9)](_0x7f5573=>{const _0x4a121a=_0x4075a0,_0x590ce0=_0x2dcde3[_0x4a121a(0x21f)](_0x7f5573);if(_0x590ce0){const _0x4f34f=_0x590ce0[0x1];let _0x1adedd=getBotAttributes(_0x4f34f);_0x261619[_0x4a121a(0x353)]({'botID':_0x4f34f,'botname':_0x1adedd[_0x4a121a(0x2cc)],'status':_0x4a121a(0x2e4),'live':_0x4a121a(0x259)}),_0x25e52f++;}}),_0x25e52f!=0x0&&(dbConfig[_0x4075a0(0x271)]('bots')[_0x4075a0(0x226)](_0x261619)[_0x4075a0(0x2d9)](),config=_0x261619,restoredConfigFile=_0x25e52f);}}async function restoreConfigNotify(_0x3b8335){const _0x5e0fae=_0x3af4cf;let _0x48365a;if(restoredConfigFile==0x1)_0x48365a='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x48365a=_0x5e0fae(0x34f);if(_0x3b8335)io['to'](_0x5e0fae(0x1a8))[_0x5e0fae(0x1e1)](_0x5e0fae(0x356),_0x48365a);else{logger[_0x5e0fae(0x21e)](_0x5e0fae(0x2fb)),logger['simple'](_0x48365a),logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x5e0fae(0x21e)]('');if(tgBot&&settings[_0x5e0fae(0x330)]&&settings[_0x5e0fae(0x325)]!=_0x5e0fae(0x2b8))await sendTelegram(settings['telegramChatId'],_0x5e0fae(0x315)+_0x48365a);}}function validateCredentials(_0x421651,_0x216d6b){const _0x3764a1=_0x3af4cf;if(_0x421651[_0x3764a1(0x22f)]==settings[_0x3764a1(0x337)]&&bcrypt[_0x3764a1(0x24c)](_0x421651['password'],settings[_0x3764a1(0x1a7)])){if(settings[_0x3764a1(0x30d)])return{'allow':![],'reason':_0x3764a1(0x2e3),'token':null};else{const _0x5d6377=generateLoginToken(_0x216d6b);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x5d6377};}}else return{'allow':![],'reason':_0x3764a1(0x391),'token':null};}function refreshToken(_0x35e3d2){const _0x1b82e7=generateLoginToken(_0x35e3d2);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1b82e7};}function validateAccess(_0x3ba117,_0x3155c3,_0x5dfb49){const _0x3ad600=_0x3af4cf,_0x5d064e=_0x5dfb49?_0x5dfb49:devices[_0x3155c3]['ip'];let _0x4a316a;const _0x4ef094=_0x10f9bd=>{const _0x2761c3=_0x4739;if(settings[_0x2761c3(0x1a3)]){if(settings[_0x2761c3(0x30d)]){if(telegram2FaApproved(_0x3155c3)){const _0x484b79=generateLoginToken(_0x3155c3);return{'allow':!![],'reason':_0x2761c3(0x1f6),'token':_0x484b79};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x4a316a=validToken(_0x10f9bd,_0x3155c3),_0x4a316a[_0x2761c3(0x2e6)](_0x2761c3(0x23a))?{'allow':!![],'reason':_0x2761c3(0x228),'token':_0x10f9bd}:{'allow':![],'reason':_0x2761c3(0x361),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x3ad600(0x214)]){let _0x5f39bb=[...settings[_0x3ad600(0x31d)],'::1',_0x3ad600(0x25e),_0x3ad600(0x299)];if(_0x5f39bb[_0x3ad600(0x31c)](_0x5d064e))return _0x4ef094(_0x3ba117);else{_0x4a316a=validToken(_0x3ba117,_0x3155c3);if(_0x4a316a[_0x3ad600(0x2e6)](_0x3ad600(0x23a)))return _0x4ef094(_0x3ba117);else{if(telegramIpApproved(_0x3155c3)){const _0x2f88eb=generateToken(_0x3155c3);return _0x4a316a=_0x4ef094(_0x3ba117),_0x4a316a[_0x3ad600(0x253)]?{'allow':!![],'reason':_0x3ad600(0x218),'token':_0x2f88eb}:_0x4a316a;}else return settings[_0x3ad600(0x2c4)]?{'allow':![],'reason':_0x3ad600(0x335),'token':null}:{'allow':![],'reason':_0x3ad600(0x22c),'token':null};}}}else return _0x4ef094(_0x3ba117);}function timelyDecrypt(_0xbd7ae9,_0x5021dc,_0x1155b4='@'){const _0x17d6e1=_0x3af4cf;if(_0xbd7ae9)try{const _0x27f792=crypt[_0x17d6e1(0x2ca)](secure[_0x17d6e1(0x39b)],_0xbd7ae9)[_0x17d6e1(0x2bd)],_0x462861=_0x27f792[_0x17d6e1(0x293)](_0x1155b4)[0x0],_0x63d859=_0x27f792[_0x17d6e1(0x293)](_0x1155b4)[0x1],_0x4d09ea=new Date()['getTime']();if(_0x5021dc){if(_0x4d09ea-_0x63d859<maxSecretAge*0x3e8)return _0x462861;else return![];}else return _0x462861;}catch(_0x31646e){return![];}else return![];}const validToken=(_0x5bedee,_0x6970a5)=>{const _0x114d33=_0x3af4cf,_0x201e90=devices[_0x6970a5]['ip'];if(!_0x5bedee)return{'error':'No\x20authentication\x20token'};for(let _0x2e0bef of blacklist){if(_0x2e0bef['token']==_0x5bedee)return{'error':_0x114d33(0x33a)};}let _0x4d1b9e;try{_0x4d1b9e=jwt[_0x114d33(0x211)](_0x5bedee,secure[_0x114d33(0x36b)]+_0x6970a5);}catch{return{'error':_0x114d33(0x37a)};}if(!_0x4d1b9e[_0x114d33(0x2e6)]('clientip')&&!_0x4d1b9e[_0x114d33(0x2e6)]('username')||!_0x4d1b9e[_0x114d33(0x2e6)](_0x114d33(0x240)))return{'error':_0x114d33(0x20b)};if(!_0x4d1b9e[_0x114d33(0x2e6)](_0x114d33(0x22f))&&_0x4d1b9e[_0x114d33(0x2e6)](_0x114d33(0x35b))){const {clientip:_0x549b7f}=_0x4d1b9e;return _0x201e90==_0x549b7f?{'success':_0x114d33(0x1d7)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4d1b9e[_0x114d33(0x2e6)]('username')&&_0x4d1b9e[_0x114d33(0x2e6)]('clientip')){const {username:_0x15cb95,clientip:_0x5c06c2}=_0x4d1b9e;return settings['bbUsername']==_0x15cb95&&_0x201e90==_0x5c06c2?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x114d33(0x2d5)};}}},generateLoginToken=_0x5d359f=>{const _0x233c10=_0x3af4cf;if(_0x5d359f){const _0x180717=devices[_0x5d359f]['ip'];return jwt[_0x233c10(0x360)]({'username':settings[_0x233c10(0x337)],'clientip':_0x180717},secure['secret']+_0x5d359f,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x16a104=>{const _0x8db7f0=_0x3af4cf;if(_0x16a104){const _0x13adad=devices[_0x16a104]['ip'];return jwt[_0x8db7f0(0x360)]({'clientip':_0x13adad},secure[_0x8db7f0(0x36b)]+_0x16a104,{'expiresIn':devices[_0x16a104][_0x8db7f0(0x358)][_0x8db7f0(0x306)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x105e4d=>{const _0x29d282=_0x3af4cf;let _0x40dfdd=![];return devices[_0x105e4d][_0x29d282(0x358)]&&devices[_0x105e4d][_0x29d282(0x358)][_0x29d282(0x306)]!='reject'&&(_0x40dfdd=devices[_0x105e4d][_0x29d282(0x358)][_0x29d282(0x35b)]==devices[_0x105e4d]['ip']&&new Date()['getTime']()-devices[_0x105e4d][_0x29d282(0x358)]['timestamp']<devices[_0x105e4d][_0x29d282(0x358)][_0x29d282(0x306)]*0x3c*0x3e8),_0x40dfdd;},telegram2FaApproved=_0x4564ae=>{const _0x56493c=_0x3af4cf;let _0x1a0981=![];return devices[_0x4564ae][_0x56493c(0x23f)]&&devices[_0x4564ae]['telegram2FaApproval'][_0x56493c(0x306)]!='reject'&&(_0x1a0981=devices[_0x4564ae][_0x56493c(0x23f)][_0x56493c(0x35b)]==devices[_0x4564ae]['ip']&&new Date()['getTime']()-devices[_0x4564ae][_0x56493c(0x23f)][_0x56493c(0x2f7)]<devices[_0x4564ae][_0x56493c(0x23f)][_0x56493c(0x306)]*0x3c*0x3e8),_0x1a0981;},normalizeIP=_0x3b34ff=>{const _0x4d1326=_0x3af4cf;let _0x5002ce=null,_0x1ea4ed=null;if(ipaddr[_0x4d1326(0x2a4)](_0x3b34ff)){const _0x10835d=ipaddr['parse'](_0x3b34ff);_0x10835d['kind']()===_0x4d1326(0x326)?(_0x10835d[_0x4d1326(0x2d8)]()&&(_0x5002ce=_0x10835d[_0x4d1326(0x312)]()[_0x4d1326(0x1d4)]()),_0x1ea4ed=_0x10835d[_0x4d1326(0x1d4)]()):(_0x5002ce=_0x10835d[_0x4d1326(0x1d4)](),_0x1ea4ed=_0x10835d[_0x4d1326(0x294)]()[_0x4d1326(0x1d4)]());}return{'show':_0x5002ce?_0x5002ce:_0x1ea4ed,'store':_0x1ea4ed};};function formatDate(_0x48de3d){const _0x555942=_0x3af4cf;return _0x48de3d[_0x555942(0x216)]()+'/'+(_0x48de3d[_0x555942(0x2ea)]()+0x1)[_0x555942(0x1d4)]()[_0x555942(0x30a)](0x2,'0')+'/'+_0x48de3d[_0x555942(0x303)]()['toString']()[_0x555942(0x30a)](0x2,'0')+'\x20'+_0x48de3d[_0x555942(0x243)]()['toString']()[_0x555942(0x30a)](0x2,'0')+':'+_0x48de3d[_0x555942(0x302)]()[_0x555942(0x1d4)]()[_0x555942(0x30a)](0x2,'0')+':'+_0x48de3d[_0x555942(0x27f)]()[_0x555942(0x1d4)]()[_0x555942(0x30a)](0x2,'0');}function sleep(_0x2d7154){return new Promise(_0x2e9ad1=>setTimeout(_0x2e9ad1,_0x2d7154));}