const _0x45902b=_0x461e;(function(_0x1a7bfb,_0x4861da){const _0x3020c1=_0x461e,_0x171e84=_0x1a7bfb();while(!![]){try{const _0x4e0879=parseInt(_0x3020c1(0x23a))/0x1*(-parseInt(_0x3020c1(0x275))/0x2)+parseInt(_0x3020c1(0x2bf))/0x3+parseInt(_0x3020c1(0x2ef))/0x4+-parseInt(_0x3020c1(0x296))/0x5+parseInt(_0x3020c1(0x29a))/0x6*(parseInt(_0x3020c1(0x2d3))/0x7)+parseInt(_0x3020c1(0x2ff))/0x8*(-parseInt(_0x3020c1(0x209))/0x9)+-parseInt(_0x3020c1(0x1b9))/0xa*(-parseInt(_0x3020c1(0x2f1))/0xb);if(_0x4e0879===_0x4861da)break;else _0x171e84['push'](_0x171e84['shift']());}catch(_0x57bbec){_0x171e84['push'](_0x171e84['shift']());}}}(_0x1f3c,0xe9a85));const _0x8fcbac=function(){let _0x5a5993=!![];return function(_0x498b00,_0x1839d6){const _0x75bbe=_0x5a5993?function(){const _0x480c7c=_0x461e;if(_0x1839d6){const _0x9dd359=_0x1839d6[_0x480c7c(0x284)](_0x498b00,arguments);return _0x1839d6=null,_0x9dd359;}}:function(){};return _0x5a5993=![],_0x75bbe;};}(),_0x34fdfc=_0x8fcbac(this,function(){const _0x2af79c=_0x461e;return _0x34fdfc[_0x2af79c(0x23e)]()['search'](_0x2af79c(0x24c))[_0x2af79c(0x23e)]()[_0x2af79c(0x23c)](_0x34fdfc)[_0x2af79c(0x1d0)](_0x2af79c(0x24c));});_0x34fdfc();'use strict';process[_0x45902b(0x282)][_0x45902b(0x1c3)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x45902b(0x1ea)),fs=require('fs'),fns=require(_0x45902b(0x271)),low=require(_0x45902b(0x222)),path=require(_0x45902b(0x1b2)),crypto=require(_0x45902b(0x1b8)),Crypt=require(_0x45902b(0x1f2))[_0x45902b(0x1d9)],RSA=require('hybrid-crypto-js')[_0x45902b(0x290)],bcrypt=require(_0x45902b(0x29e)),jwt=require(_0x45902b(0x2ae)),{Analytics}=require(_0x45902b(0x1de)),googleAnalyticsV3Plugin=require(_0x45902b(0x1e4))['default'],ipaddr=require(_0x45902b(0x2f6)),argv=require('yargs/yargs')(process[_0x45902b(0x27c)][_0x45902b(0x285)](0x2))['argv'],Mixpanel=require('mixpanel'),axios=require(_0x45902b(0x2c8)),PORT=argv['port']||_0x45902b(0x267),pattern=/^[0-9]{2,4}$/;!pattern[_0x45902b(0x21a)](PORT)&&(console[_0x45902b(0x212)](_0x45902b(0x23b)+PORT+_0x45902b(0x2ab)),process[_0x45902b(0x24e)](0x1));const HOST=argv['host']||null,userID=argv[_0x45902b(0x251)]||'';let bbpath=_0x45902b(0x2e0),bbpath2='';const botfile=_0x45902b(0x2cc),configfile=_0x45902b(0x2d5),settingsfile='bb-settings.json',securefile=_0x45902b(0x263);let validInstallation=!![];!fs[_0x45902b(0x261)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x45902b(0x238)),configpath=userID?bbpath+_0x45902b(0x2b7)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x45902b(0x270)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x45902b(0x270)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x45902b(0x218)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x45902b(0x218)]({'secure':{},'blacklist':[]})[_0x45902b(0x2b8)]();let crypt=new Crypt({'md':_0x45902b(0x2da),'rsaStandard':_0x45902b(0x22e)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x45902b(0x215),{'host':_0x45902b(0x1aa)}),analytics=Analytics({'app':_0x45902b(0x2b5),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x45902b(0x26d)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x45902b(0x1a7))[_0x45902b(0x2c3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip;const express=require(_0x45902b(0x1ae)),app=express(),http=require('http')['createServer'](app);app['use'](express[_0x45902b(0x1ec)](path[_0x45902b(0x22b)](__dirname,bbpath2,_0x45902b(0x1c4)))),app[_0x45902b(0x1e6)](express[_0x45902b(0x1ec)](path['join'](__dirname,bbpath2,_0x45902b(0x253)))),app[_0x45902b(0x239)]('/',function(_0x446dcc,_0x119381){const _0x3663d8=_0x45902b;_0x119381[_0x3663d8(0x24b)](path['join'](__dirname,bbpath2,_0x3663d8(0x1c4),_0x3663d8(0x27e)));}),app[_0x45902b(0x239)](_0x45902b(0x207),function(_0xb51b78,_0x3e5a7a){const _0x2bea01=_0x45902b;_0x3e5a7a[_0x2bea01(0x24b)](path['join'](__dirname,bbpath2,'build',_0x2bea01(0x27e)));}),app[_0x45902b(0x239)]('/:bot/portfolio',(_0x276ad4,_0x410cd0)=>{_0x410cd0['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app['get']('/:bot/performance',(_0x1280ed,_0x1697e1)=>{const _0x28d327=_0x45902b;_0x1697e1['sendFile'](path[_0x28d327(0x22b)](__dirname,bbpath2,_0x28d327(0x253),'index.html'));}),app[_0x45902b(0x239)](_0x45902b(0x309),(_0x1cab13,_0x2580eb)=>{const _0x451db4=_0x45902b;_0x2580eb[_0x451db4(0x24b)](path['join'](__dirname,bbpath2,_0x451db4(0x253),'index.html'));}),app['get'](_0x45902b(0x206),(_0x520727,_0x4f7650)=>{const _0x509a48=_0x45902b;_0x4f7650['sendFile'](path[_0x509a48(0x22b)](__dirname,bbpath2,'build',_0x509a48(0x27e)));}),app[_0x45902b(0x239)](_0x45902b(0x2db),(_0x37b5a6,_0x4a8b6a)=>{const _0x218290=_0x45902b;_0x4a8b6a[_0x218290(0x24b)](path['join'](__dirname,bbpath2,_0x218290(0x253),_0x218290(0x27e)));}),app['get'](_0x45902b(0x1b3),(_0x5b343f,_0x20e632)=>{const _0x2c71c1=_0x45902b;_0x20e632['sendFile'](path[_0x2c71c1(0x22b)](__dirname,bbpath2,'build',_0x2c71c1(0x27e)));});if(HOST)http[_0x45902b(0x28f)](PORT,HOST);else http['listen'](PORT);const io=require(_0x45902b(0x248))(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require(_0x45902b(0x2f0));let tgBot;if(settings[_0x45902b(0x2c9)]&&settings[_0x45902b(0x2c9)]!=''&&settings[_0x45902b(0x2e8)]&&settings[_0x45902b(0x2e8)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),getPublicIp();function startServer(){const _0x306af9=_0x45902b;console[_0x306af9(0x212)](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x306af9(0x1cb)+PORT),console['log'](_0x306af9(0x273));if(config['length']!=0x0)config[_0x306af9(0x2fd)](_0x576d4a=>{const _0x4e6446=_0x306af9;if(_0x576d4a[_0x4e6446(0x2d8)]==_0x4e6446(0x291)||_0x576d4a[_0x4e6446(0x2d8)]==_0x4e6446(0x1cf))logging(_0x4e6446(0x2ba)+_0x576d4a[_0x4e6446(0x2e2)]+'\x20|\x20'+_0x576d4a[_0x4e6446(0x2e1)]),startBot([_0x576d4a[_0x4e6446(0x2e2)],userID],{'cwd':bbpath},function(_0x169a6b){if(_0x169a6b)logging(_0x169a6b);});else(_0x576d4a[_0x4e6446(0x2d8)]==_0x4e6446(0x2a2)||_0x576d4a['status']=='new-disabled')&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x576d4a[_0x4e6446(0x2e2)]+_0x4e6446(0x246)+_0x576d4a[_0x4e6446(0x2e1)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x306af9(0x212)](_0x306af9(0x273)),console[_0x306af9(0x212)]('');}function startSocket(){const _0x2a78d2=_0x45902b;io['on'](_0x2a78d2(0x293),_0x4ed1d5=>{const _0x1b2d03=_0x2a78d2;let _0x2323b5,_0x29a9c1,_0x304d2e,_0x5aa769,_0x1a679f;const _0x57af9e=_0x4ed1d5[_0x1b2d03(0x269)][_0x1b2d03(0x1b5)][_0x1b2d03(0x1be)];_0x29a9c1=_0x57af9e[_0x1b2d03(0x1c1)](/bot[0-9]{3}/);if(_0x29a9c1)_0x304d2e=_0x29a9c1[0x0][_0x1b2d03(0x1c1)](/[0-9]{3}/);if(_0x304d2e)_0x2323b5=_0x304d2e[0x0];else _0x2323b5=_0x1b2d03(0x2b2);const _0x445165=_0x4ed1d5[_0x1b2d03(0x269)][_0x1b2d03(0x210)][_0x1b2d03(0x2bd)];if(!_0x445165)_0x4ed1d5[_0x1b2d03(0x1f8)](_0x1b2d03(0x2d8),{'publicKey':secure['publicKey']});else{_0x5aa769=timelyDecrypt(_0x445165,![]);if(!_0x5aa769)_0x4ed1d5[_0x1b2d03(0x1f8)](_0x1b2d03(0x2d8),{'publicKey':secure['publicKey']});else{_0x1a679f=normalizeIP(_0x4ed1d5['conn']['remoteAddress'])['store'];if(!devices[_0x5aa769])devices[_0x5aa769]={'uuid':_0x5aa769,'access':{'token':null}};devices[_0x5aa769]['ip']=_0x1a679f;const _0xde1fda=addClient(_0x4ed1d5['id'],_0x5aa769,_0x2323b5);setAccess(_0xde1fda),_0x4ed1d5['on'](_0x1b2d03(0x297),_0x595a00=>{const _0x286b2b=_0x1b2d03,_0x433a7e=timelyDecrypt(_0x595a00[_0x286b2b(0x1af)]);if(_0x433a7e){_0x595a00={'username':_0x595a00[_0x286b2b(0x25c)],'password':_0x433a7e},devices[_0x5aa769][_0x286b2b(0x1ff)]=validateCredentials(_0x595a00,_0x5aa769);if(devices[_0x5aa769][_0x286b2b(0x1ff)][_0x286b2b(0x276)]==![]&&devices[_0x5aa769][_0x286b2b(0x1ff)][_0x286b2b(0x2bb)]==_0x286b2b(0x1db))_0x4ed1d5['emit'](_0x286b2b(0x2d8),{'access':devices[_0x5aa769][_0x286b2b(0x1ff)]}),loginAccess2FA(_0x5aa769,_0x1a679f);else{if(devices[_0x5aa769][_0x286b2b(0x1ff)][_0x286b2b(0x276)]==![]&&devices[_0x5aa769]['access'][_0x286b2b(0x2bb)]==_0x286b2b(0x1e9))_0x4ed1d5['emit'](_0x286b2b(0x2d8),{'access':devices[_0x5aa769][_0x286b2b(0x1ff)]});else devices[_0x5aa769][_0x286b2b(0x1ff)][_0x286b2b(0x276)]&&devices[_0x5aa769][_0x286b2b(0x1ff)][_0x286b2b(0x2bb)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x5aa769)[_0x286b2b(0x2fd)](_0x22008c=>{setAccess(_0x22008c);}),setTokenRefresh(_0x5aa769),setSessionTimeout(_0x286b2b(0x297),_0x5aa769));}}else logging(_0x286b2b(0x202));}),_0x4ed1d5['on'](_0x1b2d03(0x2ed),()=>{resetPassword();}),_0x4ed1d5['on']('disconnect',_0x42edf8=>{removeClient(_0x4ed1d5['id']);});}}});}function initClient(_0x13236c){const _0xb33d19=_0x45902b;if(_0x13236c!=_0xb33d19(0x2b2)&&config[_0xb33d19(0x1bc)]!=''){if(pid[_0x13236c])pid[_0x13236c][_0xb33d19(0x2d1)]({'function':_0xb33d19(0x2e4),'args':null});}}function getSocket(_0x3421b2){const _0x48b70c=_0x45902b;return io['sockets']['sockets'][_0x48b70c(0x239)](_0x3421b2);}function setAccess(_0x2f838e){const _0x44630a=_0x45902b,_0x47cd85=getSocket(_0x2f838e['id']),_0x5c41bb=_0x2f838e['uuid'],_0x1d15a8=_0x2f838e[_0x44630a(0x1f1)];devices[_0x5c41bb][_0x44630a(0x1ff)]=validateAccess(devices[_0x5c41bb][_0x44630a(0x1ff)][_0x44630a(0x2a8)],_0x5c41bb),_0x47cd85[_0x44630a(0x22b)](_0x5c41bb);if(devices[_0x5c41bb]['access'][_0x44630a(0x276)]){_0x47cd85[_0x44630a(0x22b)](_0x1d15a8);if(_0x1d15a8==_0x44630a(0x2b2))initializeSocketBotManager(_0x47cd85);else initializeSocketBot(_0x47cd85);initClient(_0x1d15a8);}devices[_0x5c41bb][_0x44630a(0x1ff)]['token']&&devices[_0x5c41bb]['access'][_0x44630a(0x2bb)]==_0x44630a(0x1b4)&&setSessionTimeout('2FA',_0x5c41bb),devices[_0x5c41bb]['access'][_0x44630a(0x2a8)]&&devices[_0x5c41bb][_0x44630a(0x1ff)][_0x44630a(0x2bb)]==_0x44630a(0x29b)&&setSessionTimeout(_0x44630a(0x297),_0x5c41bb),_0x47cd85[_0x44630a(0x1f8)](_0x44630a(0x2d8),{'status':_0x2f838e[_0x44630a(0x2ad)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5c41bb]['access'],'externalip':devices[_0x5c41bb]['ip'],'publicKey':secure[_0x44630a(0x301)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x5c41bb]['access'][_0x44630a(0x276)]==![]&&devices[_0x5c41bb]['access'][_0x44630a(0x2bb)]==_0x44630a(0x216)&&temporaryAccess2FA(_0x5c41bb,devices[_0x5c41bb]['ip']);}function setSessionTimeout(_0x9bb2a5,_0x5800ab){const _0x50c6a8=_0x45902b;let _0x5a7ef9;if(_0x9bb2a5==_0x50c6a8(0x297))_0x5a7ef9=loginExpiry*0x3c*0x3e8;else _0x5a7ef9=devices[_0x5800ab][_0x50c6a8(0x221)][_0x50c6a8(0x29f)]*0x3c*0x3e8-(new Date()[_0x50c6a8(0x304)]()-devices[_0x5800ab]['telegramIpApproval'][_0x50c6a8(0x2eb)]);if(devices[_0x5800ab][_0x50c6a8(0x2f3)])clearTimeout(devices[_0x5800ab][_0x50c6a8(0x2f3)]);devices[_0x5800ab]['pidExpireLogin']=setTimeout(()=>{const _0x4e7d6f=_0x50c6a8;if(devices[_0x5800ab][_0x4e7d6f(0x29d)])clearTimeout(devices[_0x5800ab][_0x4e7d6f(0x29d)]);removeSocketListeners(_0x5800ab),addBlacklist(_0x5800ab),devices[_0x5800ab][_0x4e7d6f(0x221)]=null,devices[_0x5800ab]['telegram2FaApproval']=null,devices[_0x5800ab]['access'][_0x4e7d6f(0x2a8)]=null,devices[_0x5800ab]['access']=validateAccess(devices[_0x5800ab][_0x4e7d6f(0x1ff)][_0x4e7d6f(0x2a8)],_0x5800ab),!(devices[_0x5800ab][_0x4e7d6f(0x1ff)][_0x4e7d6f(0x276)]&&devices[_0x5800ab][_0x4e7d6f(0x1ff)]['reason']==_0x4e7d6f(0x1cd))&&(_0x9bb2a5==_0x4e7d6f(0x297)?io['to'](_0x5800ab)[_0x4e7d6f(0x1f8)](_0x4e7d6f(0x2d8),{'access':{'allow':![],'reason':_0x4e7d6f(0x213),'token':null}}):io['to'](_0x5800ab)[_0x4e7d6f(0x1f8)](_0x4e7d6f(0x2d8),{'access':{'allow':![],'reason':_0x4e7d6f(0x20c),'token':null}})),devices[_0x5800ab][_0x4e7d6f(0x1ff)][_0x4e7d6f(0x2a8)]=null;},_0x5a7ef9);}function setTokenRefresh(_0x4ab38a){const _0x134935=_0x45902b;if(devices[_0x4ab38a][_0x134935(0x29d)])clearTimeout(devices[_0x4ab38a][_0x134935(0x29d)]);devices[_0x4ab38a][_0x134935(0x29d)]=setTimeout(()=>{const _0x4b69ef=_0x134935;getClientsWithUuid(_0x4ab38a)[_0x4b69ef(0x2de)]!=0x0?(devices[_0x4ab38a]['access']=refreshToken(_0x4ab38a),io['to'](_0x4ab38a)[_0x4b69ef(0x1f8)]('status',{'status':_0x4b69ef(0x234),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4ab38a][_0x4b69ef(0x1ff)],'externalip':devices[_0x4ab38a]['ip'],'publicKey':secure[_0x4b69ef(0x301)],'validInstallation':validInstallation}),setTokenRefresh(_0x4ab38a)):clearTimeout(devices[_0x4ab38a][_0x4b69ef(0x29d)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4250fc){const _0x260d66=_0x45902b,_0x52ad4f=getClient(_0x4250fc['id'])[_0x260d66(0x2f4)];_0x4250fc[_0x260d66(0x1f8)](_0x260d66(0x2dc),config),_0x4250fc['emit']('settings',cleanSettings()),_0x4250fc['on']('add-bot',_0x2f9feb=>{const _0x5b5fd4=_0x260d66;if(validateAccess(_0x2f9feb,_0x52ad4f)[_0x5b5fd4(0x276)])addBot();else logging(_0x5b5fd4(0x265));}),_0x4250fc['on'](_0x260d66(0x1ee),(_0x1f9a4e,_0x2ec790)=>{const _0x234827=_0x260d66;if(validateAccess(_0x2ec790,_0x52ad4f)['allow'])toggleBot(_0x1f9a4e['botID'],_0x1f9a4e[_0x234827(0x2d8)],_0x1f9a4e[_0x234827(0x25a)]);else logging(_0x234827(0x266));}),_0x4250fc['on'](_0x260d66(0x20a),(_0x492903,_0x3111f7)=>{const _0x1cdb6e=_0x260d66;if(validateAccess(_0x3111f7,_0x52ad4f)['allow'])toggleBotMode(_0x492903);else logging(_0x1cdb6e(0x266));}),_0x4250fc['on']('delete-bot',(_0x4e501f,_0x411c06)=>{const _0x3b0b6d=_0x260d66;if(validateAccess(_0x411c06,_0x52ad4f)[_0x3b0b6d(0x276)])deleteBot(_0x4e501f);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x4250fc['on'](_0x260d66(0x2ee),(_0x523273,_0x1fb8c7)=>{const _0x25db8a=_0x260d66;if(validateAccess(_0x1fb8c7,_0x52ad4f)['allow'])storeSettings(_0x523273,!![]);else logging(_0x25db8a(0x2ea));}),_0x4250fc['on']('update-bb',_0x538826=>{const _0x677990=_0x260d66;if(validateAccess(_0x538826,_0x52ad4f)[_0x677990(0x276)])updateBB();else logging(_0x677990(0x211));}),_0x4250fc['on'](_0x260d66(0x23f),_0x3b16a9=>{const _0x1be559=_0x260d66;if(validateAccess(_0x3b16a9,_0x52ad4f)[_0x1be559(0x276)]){if(devices[_0x52ad4f][_0x1be559(0x29d)])clearTimeout(devices[_0x52ad4f][_0x1be559(0x29d)]);if(devices[_0x52ad4f]['pidExpireLogin'])clearTimeout(devices[_0x52ad4f][_0x1be559(0x2f3)]);removeSocketListeners(getClient(_0x4250fc['id'])[_0x1be559(0x2f4)]),addBlacklist(_0x52ad4f),devices[_0x52ad4f]['telegramIpApproval']=null,devices[_0x52ad4f][_0x1be559(0x1e1)]=null,devices[_0x52ad4f][_0x1be559(0x1ff)][_0x1be559(0x2a8)]=null,io['to'](getClient(_0x4250fc['id'])[_0x1be559(0x2f4)])['emit'](_0x1be559(0x2d8),{'access':{'allow':![],'reason':_0x1be559(0x277),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x5d9de3){const _0x562cc0=_0x45902b,_0x45f937=getClient(_0x5d9de3['id'])[_0x562cc0(0x1f1)],_0x51b7df=getClient(_0x5d9de3['id'])[_0x562cc0(0x2f4)];_0x5d9de3['on']('get-logs',(_0x23a993,_0x98de5a)=>{const _0x27b184=_0x562cc0;if(validateAccess(_0x98de5a,_0x51b7df)[_0x27b184(0x276)]){if(pid[_0x45f937])pid[_0x45f937][_0x27b184(0x2d1)]({'function':_0x27b184(0x2c1),'args':_0x23a993});}else logging(_0x27b184(0x1da));}),_0x5d9de3['on'](_0x562cc0(0x1df),(_0x412da8,_0x1cf5c6)=>{const _0x5b53f1=_0x562cc0;if(validateAccess(_0x1cf5c6,_0x51b7df)[_0x5b53f1(0x276)]){if(pid[_0x45f937])pid[_0x45f937][_0x5b53f1(0x2d1)]({'function':_0x5b53f1(0x203),'args':_0x412da8});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5d9de3['on'](_0x562cc0(0x2b4),(_0x440912,_0x548006)=>{const _0xbeae4a=_0x562cc0;if(validateAccess(_0x548006,_0x51b7df)[_0xbeae4a(0x276)]){if(pid[_0x45f937])pid[_0x45f937]['send']({'function':_0xbeae4a(0x2ca),'args':_0x440912});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5d9de3['on'](_0x562cc0(0x1ed),(_0xa4e1c7,_0x16a72d)=>{const _0x129ebc=_0x562cc0;if(validateAccess(_0x16a72d,_0x51b7df)['allow']){if(pid[_0x45f937])pid[_0x45f937][_0x129ebc(0x2d1)]({'function':_0x129ebc(0x1a8),'args':_0xa4e1c7});}else logging(_0x129ebc(0x308));}),_0x5d9de3['on'](_0x562cc0(0x286),(_0x2d49bd,_0x5be1bf)=>{const _0x425550=_0x562cc0;if(validateAccess(_0x5be1bf,_0x51b7df)[_0x425550(0x276)]){if(pid[_0x45f937])pid[_0x45f937][_0x425550(0x2d1)]({'function':'storeHeadless','args':_0x2d49bd});}else logging(_0x425550(0x201));}),_0x5d9de3['on']('get-starting-balances',_0x3ca723=>{const _0x4dcdea=_0x562cc0;if(validateAccess(_0x3ca723,_0x51b7df)['allow']){if(pid[_0x45f937])pid[_0x45f937]['send']({'function':'getStartingBalances','args':null});}else logging(_0x4dcdea(0x280));}),_0x5d9de3['on'](_0x562cc0(0x1e2),(_0x43d05b,_0x22e3cb)=>{const _0x5551c3=_0x562cc0;if(validateAccess(_0x22e3cb,_0x51b7df)[_0x5551c3(0x276)]){if(pid[_0x45f937])pid[_0x45f937][_0x5551c3(0x2d1)]({'function':_0x5551c3(0x1fa),'args':_0x43d05b});}else logging(_0x5551c3(0x240));}),_0x5d9de3['on']('cancel-loading',_0x597cbb=>{const _0x4dcb79=_0x562cc0;if(validateAccess(_0x597cbb,_0x51b7df)[_0x4dcb79(0x276)]){if(pid[_0x45f937])pid[_0x45f937]['send']({'function':_0x4dcb79(0x2f7),'args':null});}else logging(_0x4dcb79(0x1e8));}),_0x5d9de3['on']('logout',_0x5ed838=>{const _0x4d8c54=_0x562cc0;if(validateAccess(_0x5ed838,_0x51b7df)[_0x4d8c54(0x276)]){if(devices[_0x51b7df][_0x4d8c54(0x29d)])clearTimeout(devices[_0x51b7df]['pidRefreshToken']);if(devices[_0x51b7df][_0x4d8c54(0x2f3)])clearTimeout(devices[_0x51b7df][_0x4d8c54(0x2f3)]);removeSocketListeners(getClient(_0x5d9de3['id'])[_0x4d8c54(0x2f4)]),addBlacklist(_0x51b7df),devices[_0x51b7df]['telegramIpApproval']=null,devices[_0x51b7df][_0x4d8c54(0x1e1)]=null,devices[_0x51b7df][_0x4d8c54(0x1ff)]['token']=null,io['to'](getClient(_0x5d9de3['id'])[_0x4d8c54(0x2f4)])[_0x4d8c54(0x1f8)](_0x4d8c54(0x2d8),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4d8c54(0x1dc));});}function removeSocketListeners(_0x1a6491){const _0x448d01=_0x45902b;getClientsWithUuid(_0x1a6491)[_0x448d01(0x2fd)](_0x48ca1e=>{const _0xb1466a=_0x448d01;getSocket(_0x48ca1e['id'])[_0xb1466a(0x20d)]();});}function cleanSettings(){const _0x465f9a=_0x45902b;let _0x2e4d3f=settings;return settings[_0x465f9a(0x2c9)]&&settings['telegramToken']!=''&&(_0x2e4d3f={..._0x2e4d3f,'telegramToken':_0x465f9a(0x224)}),settings[_0x465f9a(0x233)]&&settings['bbPassword']!=''&&(_0x2e4d3f={..._0x2e4d3f,'bbPassword':_0x465f9a(0x224)}),_0x2e4d3f;}function updateBB(){const _0x48bfe8=_0x45902b;installingUpdate=!![],config['forEach'](_0x3ede7b=>{const _0x2a5822=_0x461e;restartBot(_0x3ede7b[_0x2a5822(0x2e2)]);}),process[_0x48bfe8(0x2d1)]({'update':!![]},_0x119934=>{});}function startBot(_0x2c2d07,_0xf7fd6,_0x59d963){const _0x35e812=_0x45902b;let _0x5c5bf8=![];const _0x39eba0=_0x2c2d07[0x0];_0xf7fd6={..._0xf7fd6,'stdio':['inherit',_0x35e812(0x22a),'inherit',_0x35e812(0x257)]},pid[_0x39eba0]=childProcess['fork'](botfile,_0x2c2d07,_0xf7fd6),pid[_0x39eba0]['on']('message',_0x23b948=>{const _0x212218=_0x35e812;switch(Object[_0x212218(0x2a5)](_0x23b948)[0x0]){case _0x212218(0x2e1):updateBotName(_0x39eba0,_0x23b948[_0x212218(0x2e1)]);break;case _0x212218(0x205):updateBotManager();break;case _0x212218(0x2d8):updateStatus(_0x39eba0,_0x23b948['status']);break;case'live':updateLive(_0x39eba0,_0x23b948[_0x212218(0x25a)]);break;case'started':updateLive(_0x39eba0,_0x23b948[_0x212218(0x219)]),io['to'](_0x39eba0)['emit'](_0x212218(0x2d8),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x212218(0x24d):_0x23b948[_0x212218(0x24d)]==_0x212218(0x254)&&restartBot(_0x39eba0);_0x23b948[_0x212218(0x24d)]==_0x212218(0x2e3)&&toggleBot(_0x39eba0,_0x212218(0x2a2),_0x212218(0x2cb));break;case _0x212218(0x1eb):sendTelegram(_0x39eba0,_0x23b948['telegram']);break;case _0x212218(0x208):sendTelegramMsg(_0x23b948[_0x212218(0x208)]);break;case _0x212218(0x22c):io['to'](_0x39eba0)[_0x212218(0x1f8)](_0x23b948[_0x212218(0x22c)],_0x23b948['args']);break;}}),pid[_0x39eba0]['on'](_0x35e812(0x2dd),function(_0x1c36c9){if(_0x5c5bf8)return;_0x5c5bf8=!![],_0x59d963(_0x1c36c9);}),pid[_0x39eba0]['on'](_0x35e812(0x24e),function(_0x41e7d3){const _0x213c63=_0x35e812;if(installingUpdate)return;if(_0x5c5bf8)return;_0x5c5bf8=!![],_0x59d963(null);const _0x4a3ddb=dbConfig['get'](_0x213c63(0x2dc))[_0x213c63(0x1ad)]({'botID':_0x39eba0})[_0x213c63(0x2d2)]();_0x4a3ddb&&(_0x4a3ddb['status']==_0x213c63(0x291)||_0x4a3ddb[_0x213c63(0x2d8)]==_0x213c63(0x1cf))&&(updateLive(_0x39eba0,_0x213c63(0x2cb)),logging('restarting\x20Bot\x20'+_0x39eba0),startBot([_0x39eba0,userID],{'cwd':bbpath},function(_0x388b91){if(_0x388b91)logging(_0x388b91);}));});}function stopBot(_0x1c26c3){const _0x135754=_0x45902b;getClientsWithBotID(_0x1c26c3)[_0x135754(0x2fd)](_0x4abae2=>{const _0x11839a=_0x135754;getSocket(_0x4abae2['id'])[_0x11839a(0x200)](!![]),removeClient(_0x4abae2['id']);}),pid[_0x1c26c3]&&(pid[_0x1c26c3][_0x135754(0x2e3)](),pid[_0x1c26c3]=null);}function restartBot(_0xc6ba49){const _0x596c68=_0x45902b;if(pid[_0xc6ba49])pid[_0xc6ba49][_0x596c68(0x2e3)]();}function addBot(){const _0x534f32=_0x45902b;let _0x3098df;for(let _0xae1f1=0x1;_0xae1f1<0x3e9;_0xae1f1++){_0x3098df=_0xae1f1[_0x534f32(0x23e)]()[_0x534f32(0x1f6)](0x3,'0');let _0x228b06=config[_0x534f32(0x1ad)](_0x1864be=>_0x1864be['botID']==_0x3098df);if(!_0x228b06)break;}if(_0x3098df==='1000'){logging(_0x534f32(0x20b));return;}logging(_0x534f32(0x247)+_0x3098df),dbConfig[_0x534f32(0x239)]('bots')['push']({'botID':_0x3098df,'botname':_0x534f32(0x306)+_0x3098df,'status':_0x534f32(0x1cf),'live':''})[_0x534f32(0x2b8)](),startBot([_0x3098df,userID],{'cwd':bbpath},function(_0x28b56f){if(_0x28b56f)logging(_0x28b56f);}),config=getConfiguration(),io['to'](_0x534f32(0x2b2))[_0x534f32(0x1f8)](_0x534f32(0x2dc),config);}function deleteBot(_0x55aaa3){const _0x509277=_0x45902b;getClientsWithBotID(_0x55aaa3)[_0x509277(0x2fd)](_0x11481d=>{const _0x1b698b=_0x509277;getSocket(_0x11481d['id'])[_0x1b698b(0x200)](!![]),removeClient(_0x11481d['id']);}),dbConfig[_0x509277(0x239)]('bots')[_0x509277(0x307)]({'botID':_0x55aaa3})[_0x509277(0x2b8)](),logging(_0x509277(0x1c7)+_0x55aaa3),stopBot(_0x55aaa3);try{fs[_0x509277(0x249)](path[_0x509277(0x22b)](configpath,_0x509277(0x1fd)+_0x55aaa3+'-config.json')),fs[_0x509277(0x249)](path[_0x509277(0x22b)](configpath,'bot-'+_0x55aaa3+_0x509277(0x2c5))),fs[_0x509277(0x249)](path[_0x509277(0x22b)](configpath,_0x509277(0x1fd)+_0x55aaa3+_0x509277(0x2bc))),fs[_0x509277(0x249)](path['join'](configpath,_0x509277(0x1fd)+_0x55aaa3+_0x509277(0x2d0)));}catch(_0x3caaf3){if(_0x3caaf3)logging(_0x509277(0x268),_0x3caaf3);}config=getConfiguration(),io['to']('botmanager')[_0x509277(0x1f8)](_0x509277(0x2dc),config);}function toggleBot(_0x3fae9a,_0x195612,_0x582a9b){const _0x34a9b9=_0x45902b;dbConfig[_0x34a9b9(0x239)](_0x34a9b9(0x2dc))[_0x34a9b9(0x1ad)]({'botID':_0x3fae9a})[_0x34a9b9(0x1c2)]({'status':_0x195612})[_0x34a9b9(0x1c2)]({'live':_0x582a9b})['write']();if(_0x195612==_0x34a9b9(0x291)||_0x195612==_0x34a9b9(0x1cf))logging(_0x34a9b9(0x21d)+_0x3fae9a),startBot([_0x3fae9a,userID],{'cwd':bbpath},function(_0x512302){if(_0x512302)logging(_0x512302);});else(_0x195612==_0x34a9b9(0x2a2)||_0x195612==_0x34a9b9(0x26a))&&(logging('disabled\x20Bot\x20'+_0x3fae9a),stopBot(_0x3fae9a));config=getConfiguration(),io['to'](_0x34a9b9(0x2b2))[_0x34a9b9(0x1f8)](_0x34a9b9(0x2dc),config);}function toggleStatus(_0x31fb73){const _0xabbd5d=_0x45902b;let _0x49384a=dbConfig['get'](_0xabbd5d(0x2dc))[_0xabbd5d(0x1ad)]({'botID':_0x31fb73})[_0xabbd5d(0x2d2)](),_0x2a65b1;if(_0x49384a[_0xabbd5d(0x2d8)]===_0xabbd5d(0x291))_0x2a65b1='disabled';else{if(_0x49384a['status']===_0xabbd5d(0x1cf))_0x2a65b1=_0xabbd5d(0x26a);else{if(_0x49384a['status']===_0xabbd5d(0x26a))_0x2a65b1=_0xabbd5d(0x1cf);else{if(_0x49384a[_0xabbd5d(0x2d8)]===_0xabbd5d(0x2a2))_0x2a65b1=_0xabbd5d(0x291);}}}return _0x2a65b1;}function updateStatus(_0x3d5136,_0x19e65f){const _0x333690=_0x45902b;dbConfig['get'](_0x333690(0x2dc))[_0x333690(0x1ad)]({'botID':_0x3d5136})[_0x333690(0x1c2)]({'status':_0x19e65f})[_0x333690(0x2b8)](),config=getConfiguration(),io['to'](_0x333690(0x2b2))[_0x333690(0x1f8)](_0x333690(0x2dc),config);}function updateLive(_0x6d5614,_0x5128ff){const _0x57c903=_0x45902b;dbConfig[_0x57c903(0x239)](_0x57c903(0x2dc))[_0x57c903(0x1ad)]({'botID':_0x6d5614})[_0x57c903(0x1c2)]({'live':_0x5128ff})[_0x57c903(0x2b8)](),config=getConfiguration(),io['to']('botmanager')[_0x57c903(0x1f8)](_0x57c903(0x2dc),config);}function updateBotName(_0x285137,_0x1f3928){const _0x452a01=_0x45902b;dbConfig[_0x452a01(0x239)](_0x452a01(0x2dc))['find']({'botID':_0x285137})[_0x452a01(0x1c2)]({'botname':_0x1f3928})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x452a01(0x1f8)]('bots',config);}function updateBotManager(){const _0xaa4b89=_0x45902b;config=getConfiguration(),io['to'](_0xaa4b89(0x2b2))[_0xaa4b89(0x1f8)](_0xaa4b89(0x2dc),config);}function toggleBotMode(_0x259685){const _0x3c9b1a=_0x45902b;if(pid[_0x259685])pid[_0x259685][_0x3c9b1a(0x2d1)]({'function':_0x3c9b1a(0x1f4),'args':null});else{const _0x487b3f=configpath+_0x3c9b1a(0x1fd)+_0x259685+_0x3c9b1a(0x1b6),_0x10713d=fs['readFileSync'](_0x487b3f),_0x592145=JSON[_0x3c9b1a(0x26b)](_0x10713d),_0x540145=_0x592145['bot'][0x0][_0x3c9b1a(0x2d9)];_0x592145[_0x3c9b1a(0x1f1)][0x0]['headless']=!_0x540145;const _0x460708=JSON[_0x3c9b1a(0x1b7)](_0x592145,null,0x2);fs['writeFileSync'](_0x487b3f,_0x460708),config=getConfiguration(),io['to'](_0x3c9b1a(0x2b2))[_0x3c9b1a(0x1f8)](_0x3c9b1a(0x2dc),config);}}function telegramError(_0x387566){const _0x66f7bd=_0x45902b;console[_0x66f7bd(0x212)](getTimeStamp()+_0x66f7bd(0x26c));}function validateTelegram(_0x56b560){const _0x568339=_0x45902b;if(_0x56b560[_0x568339(0x258)][_0x568339(0x25c)]!=settings[_0x568339(0x2e8)]&&'@'+_0x56b560[_0x568339(0x258)][_0x568339(0x25c)]!=settings[_0x568339(0x2e8)])return tgBot['sendMessage'](_0x56b560[_0x568339(0x1cc)]['id'],_0x568339(0x1dd),{'parse_mode':_0x568339(0x27a)})[_0x568339(0x279)](_0xd33586=>{telegramError(_0xd33586);}),![];return!![];}async function initTelegram(){const _0x30a189=_0x45902b;if(tgBot)tgBot[_0x30a189(0x1b0)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x30a189(0x2c9)],{'polling':!![]});let _0x59176f='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x59176f+='\x0a',_0x59176f+=_0x30a189(0x2ec),_0x59176f+='/disable\x20-\x20disable\x20notifications\x0a',_0x59176f+=_0x30a189(0x245),_0x59176f+=_0x30a189(0x1f3),_0x59176f+=_0x30a189(0x1d4),_0x59176f+='/off\x20-\x20stop\x20bot(s)\x0a',_0x59176f+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x59176f+=_0x30a189(0x2b1),_0x59176f+=_0x30a189(0x289),_0x59176f+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x59176f+=_0x30a189(0x272);let _0x50e32a=_0x30a189(0x2f8);_0x50e32a+='\x0a',_0x50e32a+=_0x59176f,tgBot[_0x30a189(0x28c)](/\/start/,_0x5a7ff8=>{const _0x5ee03f=_0x30a189;if(!validateTelegram(_0x5a7ff8))return;if(settings[_0x5ee03f(0x229)]!=_0x5a7ff8['chat']['id'])updateSetting(_0x5ee03f(0x229),_0x5a7ff8[_0x5ee03f(0x1cc)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x5a7ff8[_0x5ee03f(0x1cc)]['id'],_0x50e32a)[_0x5ee03f(0x279)](_0x4477e8=>{telegramError(_0x4477e8);});}),tgBot[_0x30a189(0x28c)](/\/enable/,_0x2f263c=>{const _0x225fb0=_0x30a189;if(!validateTelegram(_0x2f263c))return;if(settings['telegramChatId']!=_0x2f263c[_0x225fb0(0x1cc)]['id'])updateSetting('telegramChatId',_0x2f263c[_0x225fb0(0x1cc)]['id']);updateSetting(_0x225fb0(0x2a7),!![]),tgBot[_0x225fb0(0x1e0)](_0x2f263c[_0x225fb0(0x1cc)]['id'],_0x225fb0(0x2fb))[_0x225fb0(0x279)](_0x1e6fad=>{telegramError(_0x1e6fad);});}),tgBot[_0x30a189(0x28c)](/\/config/,async _0x44392a=>{const _0x15229c=_0x30a189;if(!validateTelegram(_0x44392a))return;tgBot[_0x15229c(0x244)](_0x15229c(0x2e5)),tgBot[_0x15229c(0x1e0)](_0x44392a[_0x15229c(0x1cc)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x15229c(0x2fe),'callback_data':_0x15229c(0x305)},{'text':_0x15229c(0x20e),'callback_data':_0x15229c(0x259)}]]}})[_0x15229c(0x279)](_0x87cbd2=>{telegramError(_0x87cbd2);}),tgBot['on'](_0x15229c(0x2e5),async _0x33094c=>{const _0x163c2f=_0x15229c,_0x1e7fa2=_0x33094c[_0x163c2f(0x214)],_0xd074e3=_0x33094c[_0x163c2f(0x235)];tgBot[_0x163c2f(0x2ac)](_0x33094c['id'])[_0x163c2f(0x231)](async()=>{const _0xdca60d=_0x163c2f;_0x1e7fa2==_0xdca60d(0x2fa)&&(updateSetting(_0xdca60d(0x226),'orders'),updateSetting(_0xdca60d(0x2a7),!![]),await tgBot['sendMessage'](_0xd074e3[_0xdca60d(0x1cc)]['id'],_0xdca60d(0x1e3))[_0xdca60d(0x279)](_0x2ccd9b=>{telegramError(_0x2ccd9b);}));_0x1e7fa2==_0xdca60d(0x305)&&(updateSetting(_0xdca60d(0x226),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0xdca60d(0x1e0)](_0xd074e3[_0xdca60d(0x1cc)]['id'],_0xdca60d(0x2e7))['catch'](_0x1a662c=>{telegramError(_0x1a662c);}));_0x1e7fa2==_0xdca60d(0x259)&&(updateSetting(_0xdca60d(0x226),_0xdca60d(0x259)),updateSetting('telegramEnabled',!![]),await tgBot[_0xdca60d(0x1e0)](_0xd074e3['chat']['id'],_0xdca60d(0x28d))[_0xdca60d(0x279)](_0x5280cf=>{telegramError(_0x5280cf);}));if(!settings[_0xdca60d(0x229)])tgBot[_0xdca60d(0x1e0)](_0xd074e3[_0xdca60d(0x1cc)]['id'],_0xdca60d(0x26f))[_0xdca60d(0x279)](_0x9111db=>{telegramError(_0x9111db);});}),tgBot[_0x163c2f(0x244)](_0x163c2f(0x2e5));});}),tgBot['onText'](/\/status/,_0x10f76c=>{const _0x1ab7c8=_0x30a189;if(!validateTelegram(_0x10f76c))return;const _0x147de8=getBotsWithMode();let _0x247d44=_0x1ab7c8(0x1d3);config[_0x1ab7c8(0x2fd)](_0x29c06c=>{const _0x11a548=_0x1ab7c8,_0x41c7bd=_0x147de8[_0x11a548(0x1ad)](_0x5c9158=>_0x5c9158['botID']==_0x29c06c[_0x11a548(0x2e2)])[_0x11a548(0x2d4)];_0x247d44+=_0x11a548(0x306)+_0x29c06c[_0x11a548(0x2e2)]+':\x20'+_0x29c06c[_0x11a548(0x2d8)]+_0x11a548(0x246)+_0x41c7bd+_0x11a548(0x246)+_0x29c06c[_0x11a548(0x25a)]+'\x0a';}),_0x247d44+='\x0a',_0x247d44+=_0x1ab7c8(0x2be),_0x247d44+=!settings[_0x1ab7c8(0x2a7)]?_0x1ab7c8(0x2a0):_0x1ab7c8(0x2cd),_0x247d44+=settings[_0x1ab7c8(0x2a7)]?settings['telegramEvents']=='all'?_0x1ab7c8(0x1f9):_0x1ab7c8(0x27f)+settings[_0x1ab7c8(0x226)]+_0x1ab7c8(0x294):'',tgBot['sendMessage'](_0x10f76c[_0x1ab7c8(0x1cc)]['id'],_0x247d44,{'parse_mode':_0x1ab7c8(0x27a)})[_0x1ab7c8(0x279)](_0x4add22=>{telegramError(_0x4add22);});}),tgBot[_0x30a189(0x28c)](/\/restart/,_0x242669=>{const _0x76c040=_0x30a189;if(!validateTelegram(_0x242669))return;tgBot[_0x76c040(0x244)](_0x76c040(0x2e5));const _0x2f746d=getEnabledBots();if(_0x2f746d['length']==0x0)tgBot[_0x76c040(0x1e0)](_0x242669[_0x76c040(0x1cc)]['id'],_0x76c040(0x1c9))['catch'](_0x230458=>{telegramError(_0x230458);});else{if(_0x2f746d[_0x76c040(0x2de)]>0x1)_0x2f746d[_0x76c040(0x1ba)]({'botID':_0x76c040(0x259)});let _0x35a4b9=[],_0x6b5096=[];const _0xf67be2=_0x2f746d[_0x76c040(0x2de)]%0x4==0x0||_0x2f746d[_0x76c040(0x2de)]%0x4==0x3||_0x2f746d[_0x76c040(0x2de)]%0x3==0x1?0x4:0x3;let _0x39a78e=0x0;_0x2f746d[_0x76c040(0x2fd)]((_0x1c2e70,_0x281818)=>{const _0x415abe=_0x76c040;if(_0x281818%_0xf67be2==0x0)_0x6b5096=[];_0x6b5096['push']({'text':_0x1c2e70[_0x415abe(0x2e2)]=='all'?'All\x20bots':_0x415abe(0x306)+_0x1c2e70['botID'],'callback_data':_0x1c2e70[_0x415abe(0x2e2)]}),_0x281818%_0xf67be2==0x0&&(_0x35a4b9[_0x39a78e]=_0x6b5096,_0x39a78e++);}),tgBot[_0x76c040(0x1e0)](_0x242669[_0x76c040(0x1cc)]['id'],_0x76c040(0x2d7),{'reply_markup':{'inline_keyboard':_0x35a4b9}})[_0x76c040(0x279)](_0x371ce8=>{telegramError(_0x371ce8);}),tgBot['on']('callback_query',async _0xcc8f8e=>{const _0x2c909e=_0x76c040,_0x3f80cc=_0xcc8f8e[_0x2c909e(0x214)],_0x45d04f=_0xcc8f8e[_0x2c909e(0x235)];tgBot[_0x2c909e(0x2ac)](_0xcc8f8e['id'])[_0x2c909e(0x231)](async()=>{const _0x50d393=_0x2c909e;_0x3f80cc=='all'?(tgBot[_0x50d393(0x1e0)](_0x45d04f[_0x50d393(0x1cc)]['id'],_0x50d393(0x250))['catch'](_0x21e676=>{telegramError(_0x21e676);}),config[_0x50d393(0x2fd)](_0x45ed7e=>{const _0x4c2ba9=_0x50d393;restartBot(_0x45ed7e[_0x4c2ba9(0x2e2)]);})):(tgBot['sendMessage'](_0x45d04f[_0x50d393(0x1cc)]['id'],_0x50d393(0x25b)+_0x3f80cc)[_0x50d393(0x279)](_0x320c89=>{telegramError(_0x320c89);}),restartBot(_0x3f80cc));}),tgBot[_0x2c909e(0x244)](_0x2c909e(0x2e5));});}}),tgBot[_0x30a189(0x28c)](/\/on/,_0x23a1b8=>{const _0x65cace=_0x30a189;if(!validateTelegram(_0x23a1b8))return;tgBot['removeListener'](_0x65cace(0x2e5));const _0x3c72bd=getDisabledBots();if(_0x3c72bd[_0x65cace(0x2de)]==0x0)tgBot['sendMessage'](_0x23a1b8[_0x65cace(0x1cc)]['id'],_0x65cace(0x25e))[_0x65cace(0x279)](_0x479e3f=>{telegramError(_0x479e3f);});else{if(_0x3c72bd['length']>0x1)_0x3c72bd[_0x65cace(0x1ba)]({'botID':_0x65cace(0x259)});let _0x233743=[],_0x5c3f3a=[];const _0x14d0c9=_0x3c72bd[_0x65cace(0x2de)]%0x4==0x0||_0x3c72bd['length']%0x4==0x3||_0x3c72bd['length']%0x3==0x1?0x4:0x3;let _0x461dd1=0x0;_0x3c72bd[_0x65cace(0x2fd)]((_0x3387fb,_0x2c2368)=>{const _0x1fbc26=_0x65cace;if(_0x2c2368%_0x14d0c9==0x0)_0x5c3f3a=[];_0x5c3f3a[_0x1fbc26(0x1ba)]({'text':_0x3387fb[_0x1fbc26(0x2e2)]=='all'?_0x1fbc26(0x21c):_0x1fbc26(0x306)+_0x3387fb[_0x1fbc26(0x2e2)],'callback_data':_0x3387fb['botID']}),_0x2c2368%_0x14d0c9==0x0&&(_0x233743[_0x461dd1]=_0x5c3f3a,_0x461dd1++);}),tgBot['sendMessage'](_0x23a1b8[_0x65cace(0x1cc)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x233743}})[_0x65cace(0x279)](_0x364728=>{telegramError(_0x364728);}),tgBot['on']('callback_query',async _0x5f48f1=>{const _0x490515=_0x65cace,_0x2b30b9=_0x5f48f1['data'],_0x57492a=_0x5f48f1['message'];tgBot[_0x490515(0x2ac)](_0x5f48f1['id'])['then'](async()=>{const _0x50be24=_0x490515;_0x2b30b9==_0x50be24(0x259)?(tgBot[_0x50be24(0x1e0)](_0x57492a[_0x50be24(0x1cc)]['id'],_0x50be24(0x2c4))['catch'](_0x13e2ba=>{telegramError(_0x13e2ba);}),_0x3c72bd[_0x50be24(0x2fd)](_0x43be10=>{const _0x2b5beb=_0x50be24;if(_0x43be10[_0x2b5beb(0x2e2)]!=_0x2b5beb(0x259))toggleBot(_0x43be10[_0x2b5beb(0x2e2)],toggleStatus(_0x43be10[_0x2b5beb(0x2e2)]),_0x2b5beb(0x2cb));})):(tgBot[_0x50be24(0x1e0)](_0x57492a[_0x50be24(0x1cc)]['id'],_0x50be24(0x1d2)+_0x2b30b9)['catch'](_0x2dc2c4=>{telegramError(_0x2dc2c4);}),toggleBot(_0x2b30b9,toggleStatus(_0x2b30b9),_0x50be24(0x2cb)));}),tgBot[_0x490515(0x244)](_0x490515(0x2e5));});}}),tgBot[_0x30a189(0x28c)](/\/off/,_0x1bcc9f=>{const _0xc35694=_0x30a189;if(!validateTelegram(_0x1bcc9f))return;tgBot[_0xc35694(0x244)]('callback_query');const _0x4173bb=getEnabledBots();if(_0x4173bb[_0xc35694(0x2de)]==0x0)tgBot[_0xc35694(0x1e0)](_0x1bcc9f[_0xc35694(0x1cc)]['id'],_0xc35694(0x1c9))[_0xc35694(0x279)](_0x418f02=>{telegramError(_0x418f02);});else{if(_0x4173bb[_0xc35694(0x2de)]>0x1)_0x4173bb['push']({'botID':_0xc35694(0x259)});let _0x445eb4=[],_0x126da2=[];const _0x401275=_0x4173bb['length']%0x4==0x0||_0x4173bb[_0xc35694(0x2de)]%0x4==0x3||_0x4173bb[_0xc35694(0x2de)]%0x3==0x1?0x4:0x3;let _0xdd000f=0x0;_0x4173bb[_0xc35694(0x2fd)]((_0x3c4d7a,_0x11d610)=>{const _0x3325a5=_0xc35694;if(_0x11d610%_0x401275==0x0)_0x126da2=[];_0x126da2[_0x3325a5(0x1ba)]({'text':_0x3c4d7a[_0x3325a5(0x2e2)]==_0x3325a5(0x259)?_0x3325a5(0x21c):_0x3325a5(0x306)+_0x3c4d7a[_0x3325a5(0x2e2)],'callback_data':_0x3c4d7a[_0x3325a5(0x2e2)]}),_0x11d610%_0x401275==0x0&&(_0x445eb4[_0xdd000f]=_0x126da2,_0xdd000f++);}),tgBot[_0xc35694(0x1e0)](_0x1bcc9f[_0xc35694(0x1cc)]['id'],_0xc35694(0x217),{'reply_markup':{'inline_keyboard':_0x445eb4}})['catch'](_0x43639d=>{telegramError(_0x43639d);}),tgBot['on'](_0xc35694(0x2e5),async _0x40dde1=>{const _0x1c687b=_0xc35694,_0x261537=_0x40dde1['data'],_0x166d7d=_0x40dde1[_0x1c687b(0x235)];tgBot['answerCallbackQuery'](_0x40dde1['id'])[_0x1c687b(0x231)](async()=>{const _0x5f1f80=_0x1c687b;_0x261537=='all'?(tgBot[_0x5f1f80(0x1e0)](_0x166d7d['chat']['id'],_0x5f1f80(0x295))[_0x5f1f80(0x279)](_0x281a8e=>{telegramError(_0x281a8e);}),_0x4173bb[_0x5f1f80(0x2fd)](_0x35d80b=>{const _0x5122d4=_0x5f1f80;if(_0x35d80b[_0x5122d4(0x2e2)]!=_0x5122d4(0x259))toggleBot(_0x35d80b[_0x5122d4(0x2e2)],toggleStatus(_0x35d80b[_0x5122d4(0x2e2)]),_0x5122d4(0x2cb));})):(tgBot[_0x5f1f80(0x1e0)](_0x166d7d[_0x5f1f80(0x1cc)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x261537)[_0x5f1f80(0x279)](_0x5411b0=>{telegramError(_0x5411b0);}),toggleBot(_0x261537,toggleStatus(_0x261537),_0x5f1f80(0x2cb)));}),tgBot[_0x1c687b(0x244)]('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0x437b82=>{const _0x2e06a4=_0x30a189;if(!validateTelegram(_0x437b82))return;tgBot['removeListener'](_0x2e06a4(0x2e5));const _0x36c696=getEnabledBots();if(_0x36c696[_0x2e06a4(0x2de)]==0x0)tgBot[_0x2e06a4(0x1e0)](_0x437b82['chat']['id'],_0x2e06a4(0x1c9))[_0x2e06a4(0x279)](_0x264d87=>{telegramError(_0x264d87);});else{if(_0x36c696[_0x2e06a4(0x2de)]>0x1){let _0x2832be=[],_0x1a93c2=[];const _0x281f01=_0x36c696['length']%0x4==0x0||_0x36c696['length']%0x4==0x3||_0x36c696[_0x2e06a4(0x2de)]%0x3==0x1?0x4:0x3;let _0x4c0d15=0x0;_0x36c696[_0x2e06a4(0x2fd)]((_0x24ffdf,_0x2f7a5e)=>{const _0x233de6=_0x2e06a4;if(_0x2f7a5e%_0x281f01==0x0)_0x1a93c2=[];_0x1a93c2[_0x233de6(0x1ba)]({'text':_0x233de6(0x306)+_0x24ffdf[_0x233de6(0x2e2)],'callback_data':_0x24ffdf[_0x233de6(0x2e2)]}),_0x2f7a5e%_0x281f01==0x0&&(_0x2832be[_0x4c0d15]=_0x1a93c2,_0x4c0d15++);}),tgBot[_0x2e06a4(0x1e0)](_0x437b82[_0x2e06a4(0x1cc)]['id'],_0x2e06a4(0x242),{'reply_markup':{'inline_keyboard':_0x2832be}})[_0x2e06a4(0x279)](_0x3bc01f=>{telegramError(_0x3bc01f);}),tgBot['on'](_0x2e06a4(0x2e5),async _0x1a8fd5=>{const _0x5ead6c=_0x2e06a4,_0x2ecf74=_0x1a8fd5[_0x5ead6c(0x214)],_0x524ee2=_0x1a8fd5[_0x5ead6c(0x235)];tgBot[_0x5ead6c(0x2ac)](_0x1a8fd5['id'])[_0x5ead6c(0x231)](async()=>{const _0x31757f=_0x5ead6c;if(pid[_0x2ecf74])pid[_0x2ecf74][_0x31757f(0x2d1)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x5ead6c(0x244)]('callback_query');});}else{const _0x2915ed=_0x36c696[0x0]['botID'];if(pid[_0x2915ed])pid[_0x2915ed]['send']({'function':_0x2e06a4(0x1e7),'args':null});}}}),tgBot[_0x30a189(0x28c)](/\/toggle/,_0x4cc3c0=>{const _0x4e0f47=_0x30a189;if(!validateTelegram(_0x4cc3c0))return;tgBot[_0x4e0f47(0x244)](_0x4e0f47(0x2e5));const _0x260466=getBotsWithMode();if(_0x260466[_0x4e0f47(0x2de)]==0x0)tgBot[_0x4e0f47(0x1e0)](_0x4cc3c0['chat']['id'],_0x4e0f47(0x1c9))[_0x4e0f47(0x279)](_0x2a1286=>{telegramError(_0x2a1286);});else{let _0x27b530=[],_0x324416=[];const _0x42d627=0x2;let _0x258f01=0x0;_0x260466[_0x4e0f47(0x2fd)]((_0x56cbc3,_0x16f907)=>{const _0x44d836=_0x4e0f47;if(_0x16f907%_0x42d627==0x0)_0x324416=[];_0x324416[_0x44d836(0x1ba)]({'text':_0x44d836(0x306)+_0x56cbc3[_0x44d836(0x2e2)]+'\x20('+_0x56cbc3[_0x44d836(0x2d4)]+')','callback_data':_0x56cbc3['botID']}),_0x16f907%_0x42d627==0x0&&(_0x27b530[_0x258f01]=_0x324416,_0x258f01++);}),tgBot['sendMessage'](_0x4cc3c0[_0x4e0f47(0x1cc)]['id'],_0x4e0f47(0x241),{'reply_markup':{'inline_keyboard':_0x27b530}})[_0x4e0f47(0x279)](_0x159f55=>{telegramError(_0x159f55);}),tgBot['on'](_0x4e0f47(0x2e5),async _0x4b9fe9=>{const _0x26f83f=_0x4e0f47,_0x116696=_0x4b9fe9[_0x26f83f(0x214)],_0x5ee0ef=_0x4b9fe9['message'];tgBot[_0x26f83f(0x2ac)](_0x4b9fe9['id'])[_0x26f83f(0x231)](async()=>{const _0x1f825b=_0x26f83f,_0x4db6e5=_0x260466[_0x1f825b(0x1ad)](_0x3065c4=>_0x3065c4['botID']==_0x116696),_0x28d1ed=_0x4db6e5['mode']=='auto'?'manual':_0x1f825b(0x2f9);tgBot[_0x1f825b(0x1e0)](_0x5ee0ef[_0x1f825b(0x1cc)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x116696+_0x1f825b(0x1d7)+_0x28d1ed+_0x1f825b(0x2a4))['catch'](_0x24ea2b=>{telegramError(_0x24ea2b);}),toggleBotMode(_0x116696);}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x30a189(0x28c)](/\/names/,_0x14eac6=>{const _0x554370=_0x30a189;if(!validateTelegram(_0x14eac6))return;let _0x5f0d0d='';config['forEach'](_0x1c51dd=>{const _0x53f7a7=_0x461e;_0x5f0d0d+='Bot\x20'+_0x1c51dd[_0x53f7a7(0x2e2)]+':\x20'+_0x1c51dd[_0x53f7a7(0x2e1)]+'\x0a';}),tgBot[_0x554370(0x1e0)](_0x14eac6[_0x554370(0x1cc)]['id'],_0x5f0d0d,{'parse_mode':_0x554370(0x27a)})['catch'](_0x480825=>{telegramError(_0x480825);});}),tgBot[_0x30a189(0x28c)](/\/disable/,_0x340ad7=>{const _0x57bfa6=_0x30a189;if(!validateTelegram(_0x340ad7))return;tgBot[_0x57bfa6(0x1e0)](_0x340ad7[_0x57bfa6(0x1cc)]['id'],_0x57bfa6(0x228))[_0x57bfa6(0x279)](_0x66dc66=>{telegramError(_0x66dc66);}),updateSetting(_0x57bfa6(0x2a7),![]);}),tgBot['onText'](/\/help/,_0x28761d=>{const _0x56711c=_0x30a189;if(!validateTelegram(_0x28761d))return;tgBot[_0x56711c(0x1e0)](_0x28761d[_0x56711c(0x1cc)]['id'],_0x59176f)[_0x56711c(0x279)](_0x14e0bb=>{telegramError(_0x14e0bb);});}),tgBot['on'](_0x30a189(0x1bf),_0x2da58b=>{const _0x123bcf=_0x30a189;_0x2da58b[_0x123bcf(0x23e)]()[_0x123bcf(0x287)](_0x123bcf(0x264))&&(logging(_0x123bcf(0x1fe)),tgBot[_0x123bcf(0x1b0)](),tgBot=null,io['to'](_0x123bcf(0x2b2))[_0x123bcf(0x1f8)](_0x123bcf(0x2af),'Invalid\x20Telegram\x20token'));}),process['once'](_0x30a189(0x1c6),()=>{const _0x3cd103=_0x30a189;if(tgBot)tgBot[_0x3cd103(0x1b0)]();process[_0x3cd103(0x24e)](0x1);}),process[_0x30a189(0x2f2)](_0x30a189(0x2b0),()=>{const _0x5a8578=_0x30a189;if(tgBot)tgBot[_0x5a8578(0x1b0)]();process['exit'](0x1);});}}function disableTelegram(){const _0x1d6922=_0x45902b;tgBot&&(tgBot[_0x1d6922(0x1b0)](),tgBot=null);}function sendTelegram(_0x280361,_0x5a5494){const _0x26cc0a=_0x45902b;if(settings[_0x26cc0a(0x2a7)]){if(settings[_0x26cc0a(0x226)]==_0x26cc0a(0x259)||(_0x5a5494['type']==_0x26cc0a(0x2dd)||_0x5a5494[_0x26cc0a(0x283)]=='success')&&settings[_0x26cc0a(0x226)]==_0x26cc0a(0x305)||_0x5a5494['type']==_0x26cc0a(0x225)&&settings[_0x26cc0a(0x226)]=='orders'){if(tgBot&&settings[_0x26cc0a(0x229)]){if(_0x5a5494[_0x26cc0a(0x262)])tgBot[_0x26cc0a(0x1e0)](settings[_0x26cc0a(0x229)],_0x5a5494[_0x26cc0a(0x2e1)]+_0x26cc0a(0x2e9)+_0x5a5494[_0x26cc0a(0x2cf)])['catch'](_0xd857a6=>{telegramError(_0xd857a6);});else tgBot[_0x26cc0a(0x1e0)](settings[_0x26cc0a(0x229)],'Bot\x20'+_0x280361+_0x26cc0a(0x2e9)+_0x5a5494[_0x26cc0a(0x2cf)])['catch'](_0x216bd0=>{telegramError(_0x216bd0);});}}}}function sendTelegramMsg(_0x14374f){const _0x44ac13=_0x45902b;settings[_0x44ac13(0x2a7)]&&(tgBot&&settings[_0x44ac13(0x229)]&&tgBot[_0x44ac13(0x1e0)](settings[_0x44ac13(0x229)],_0x14374f,{'parse_mode':_0x44ac13(0x27a)})[_0x44ac13(0x279)](_0x17dd6d=>{telegramError(_0x17dd6d);}));}function getDeviceWithIp(_0x11d12a){const _0x550bd9=_0x45902b;return devices[_0x550bd9(0x1ad)](_0x55bacc=>_0x55bacc['ip']===_0x11d12a);}function temporaryAccess2FA(_0x39b2d1,_0x42a65c){const _0x2b0531=_0x45902b;let _0x35aebe=new Date(),_0x2dae00=![];if(lastIpApproval){if(_0x35aebe-lastIpApproval<0x1388)_0x2dae00=!![];}lastIpApproval=new Date();if(_0x2dae00)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x2b0531(0x244)](_0x2b0531(0x2e5)),tgBot[_0x2b0531(0x1e0)](settings[_0x2b0531(0x229)],_0x2b0531(0x227)+normalizeIP(_0x42a65c)[_0x2b0531(0x223)]+_0x2b0531(0x302),{'parse_mode':_0x2b0531(0x27a),'reply_markup':{'inline_keyboard':[[{'text':_0x2b0531(0x2e6),'callback_data':'5'},{'text':_0x2b0531(0x2b6),'callback_data':'15'},{'text':_0x2b0531(0x1bb),'callback_data':'30'},{'text':_0x2b0531(0x236),'callback_data':_0x2b0531(0x236)}]]}})[_0x2b0531(0x279)](_0x1f81fd=>{telegramError(_0x1f81fd);}),tgBot['on'](_0x2b0531(0x2e5),async _0x152a87=>{const _0x5ab115=_0x2b0531,_0x128aa4=_0x152a87[_0x5ab115(0x214)],_0xc03872=_0x152a87['message'];tgBot['answerCallbackQuery'](_0x152a87['id'])[_0x5ab115(0x231)](async()=>{const _0x3c19a5=_0x5ab115;devices[_0x39b2d1][_0x3c19a5(0x221)]={'clientip':_0x42a65c,'timestamp':new Date()[_0x3c19a5(0x304)](),'expiry':_0x128aa4},_0x128aa4!=_0x3c19a5(0x236)?(await tgBot[_0x3c19a5(0x1e0)](_0xc03872['chat']['id'],_0x3c19a5(0x255)+_0x128aa4+'\x20minutes',{'parse_mode':_0x3c19a5(0x27a)})['catch'](_0x52142c=>{telegramError(_0x52142c);}),io['to'](_0x39b2d1)[_0x3c19a5(0x1f8)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3c19a5(0x1e0)](_0xc03872['chat']['id'],_0x3c19a5(0x298))[_0x3c19a5(0x279)](_0x5b66e8=>{telegramError(_0x5b66e8);}),io['to'](_0x39b2d1)[_0x3c19a5(0x1f8)]('status',{'access':{'allow':![],'reason':_0x3c19a5(0x1c5),'token':null}}));}),tgBot['removeListener'](_0x5ab115(0x2e5));}));}function loginAccess2FA(_0x29343b,_0xb8cc3c){const _0x4c7bfa=_0x45902b;tgBot&&settings[_0x4c7bfa(0x229)]&&(tgBot[_0x4c7bfa(0x244)]('callback_query'),tgBot['sendMessage'](settings[_0x4c7bfa(0x229)],_0x4c7bfa(0x2d6)+normalizeIP(_0xb8cc3c)[_0x4c7bfa(0x223)]+'</b>\x20?',{'parse_mode':_0x4c7bfa(0x27a),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x4c7bfa(0x236),'callback_data':_0x4c7bfa(0x236)}]]}})[_0x4c7bfa(0x279)](_0x7befc8=>{telegramError(_0x7befc8);}),tgBot['on'](_0x4c7bfa(0x2e5),async _0xbf4dcd=>{const _0x4e98a9=_0x4c7bfa,_0x2bf9a9=_0xbf4dcd[_0x4e98a9(0x214)],_0x20af3a=_0xbf4dcd['message'];tgBot[_0x4e98a9(0x2ac)](_0xbf4dcd['id'])['then'](async()=>{const _0x5d30ad=_0x4e98a9;devices[_0x29343b]['telegram2FaApproval']={'clientip':_0xb8cc3c,'timestamp':new Date()[_0x5d30ad(0x304)](),'expiry':_0x2bf9a9},_0x2bf9a9!=_0x5d30ad(0x236)?(await tgBot[_0x5d30ad(0x1e0)](_0x20af3a[_0x5d30ad(0x1cc)]['id'],_0x5d30ad(0x204),{'parse_mode':_0x5d30ad(0x27a)})[_0x5d30ad(0x279)](_0x2b7998=>{telegramError(_0x2b7998);}),io['to'](_0x29343b)[_0x5d30ad(0x1f8)](_0x5d30ad(0x2d8),{'access':{'allow':![],'reason':_0x5d30ad(0x2a6),'token':null}})):(await tgBot[_0x5d30ad(0x1e0)](_0x20af3a[_0x5d30ad(0x1cc)]['id'],_0x5d30ad(0x1b1))[_0x5d30ad(0x279)](_0xb4f5ce=>{telegramError(_0xb4f5ce);}),io['to'](_0x29343b)[_0x5d30ad(0x1f8)](_0x5d30ad(0x2d8),{'access':{'allow':![],'reason':_0x5d30ad(0x27d),'token':null}}));}),tgBot[_0x4e98a9(0x244)](_0x4e98a9(0x2e5));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x193936=_0x45902b;return dbConfig['get'](_0x193936(0x2dc))['sortBy'](_0x193936(0x2e2))['filter']({'status':_0x193936(0x291)})[_0x193936(0x2d2)]()||[];}function getDisabledBots(){const _0x2829fd=_0x45902b;return dbConfig[_0x2829fd(0x239)](_0x2829fd(0x2dc))[_0x2829fd(0x274)]('botID')[_0x2829fd(0x28b)]({'status':'disabled'})[_0x2829fd(0x2d2)]()||[];}function getBotsWithMode(){const _0x36b9c2=_0x45902b,_0x2e2f79=dbConfig['get'](_0x36b9c2(0x2dc))[_0x36b9c2(0x274)](_0x36b9c2(0x2e2))[_0x36b9c2(0x2d2)]()||[];return _0x2e2f79[_0x36b9c2(0x2fd)](_0x14330c=>{const _0x328e86=_0x36b9c2,_0x1b8bd4=configpath+_0x328e86(0x1fd)+_0x14330c[_0x328e86(0x2e2)]+_0x328e86(0x1b6),_0x2385da=fs[_0x328e86(0x261)](_0x1b8bd4);if(_0x2385da){const _0x1591a3=fs[_0x328e86(0x237)](_0x1b8bd4);try{const _0x10dac0=JSON['parse'](_0x1591a3),_0x1712e4=_0x10dac0?_0x10dac0['bot'][0x0][_0x328e86(0x2d9)]:![];_0x14330c[_0x328e86(0x2d4)]=_0x1712e4?'auto':_0x328e86(0x288);}catch(_0x1bd0b2){_0x14330c[_0x328e86(0x2d4)]=_0x328e86(0x288);}}else _0x14330c['mode']=_0x328e86(0x288);}),_0x2e2f79;}function getSettings(){const _0x15d6c6=_0x45902b;let _0x23676a=dbSettings['get'](_0x15d6c6(0x1d6))[_0x15d6c6(0x2d2)]();if(!_0x23676a){const _0x45df76=crypto[_0x15d6c6(0x21e)]();mixpanel[_0x15d6c6(0x1f7)](_0x45df76),_0x23676a={'timeshift':0x0,'userid':_0x45df76},dbSettings[_0x15d6c6(0x239)](_0x15d6c6(0x1d6))[_0x15d6c6(0x1ba)](_0x23676a)[_0x15d6c6(0x2b8)]();}return _0x23676a;}function getSecure(){const _0x3ee267=_0x45902b;return dbSecure['get'](_0x3ee267(0x2aa))['value']()||{};}function getBlacklist(){const _0x206fa9=_0x45902b;return dbSecure[_0x206fa9(0x239)](_0x206fa9(0x2b3))[_0x206fa9(0x2d2)]()||[];}function broadcastToBots(_0x4cb85d,_0x8f4f48){const _0x160d41=_0x45902b;config[_0x160d41(0x2fd)](_0x325eec=>{const _0x899c27=_0x160d41;if(_0x325eec[_0x899c27(0x2d8)]==_0x899c27(0x291)&&_0x325eec[_0x899c27(0x25a)]==_0x899c27(0x25d)){if(pid[_0x325eec[_0x899c27(0x2e2)]])pid[_0x325eec[_0x899c27(0x2e2)]][_0x899c27(0x2d1)]({[_0x4cb85d]:_0x8f4f48});}});}function storeSettings(_0x3b0324,_0x2d770f=![]){const _0x49b729=_0x45902b;_0x3b0324={...settings,..._0x3b0324};if(_0x2d770f&&_0x3b0324[_0x49b729(0x233)]!=_0x49b729(0x224)&&_0x3b0324[_0x49b729(0x233)]!=''){const _0x5116c4=crypt[_0x49b729(0x26e)](secure[_0x49b729(0x30a)],_0x3b0324['bbPassword'])[_0x49b729(0x235)][_0x49b729(0x1c8)]('@')[0x0],_0x1cab87=bcrypt[_0x49b729(0x1d8)](_0x5116c4,saltRounds);_0x3b0324={..._0x3b0324,'bbPassword':_0x1cab87};}if(_0x2d770f&&_0x3b0324[_0x49b729(0x2c9)]!='************'&&_0x3b0324['telegramToken']!=''){const _0x5b6817=crypt[_0x49b729(0x26e)](secure[_0x49b729(0x30a)],_0x3b0324[_0x49b729(0x2c9)])[_0x49b729(0x235)][_0x49b729(0x1c8)]('@')[0x0];_0x3b0324={..._0x3b0324,'telegramToken':_0x5b6817};}const _0x1a442c=_0x3b0324[_0x49b729(0x2c9)]!='************'&&_0x3b0324[_0x49b729(0x2c9)]!=settings[_0x49b729(0x2c9)]||_0x3b0324['telegramUsername']!=settings[_0x49b729(0x2e8)],_0x48756c=_0x3b0324[_0x49b729(0x2c9)]==''||_0x3b0324[_0x49b729(0x2e8)]=='';if(_0x1a442c)_0x3b0324[_0x49b729(0x226)]='all';for(const [_0x655d53,_0x3b163b]of Object[_0x49b729(0x2a3)](_0x3b0324)){if(_0x655d53==_0x49b729(0x2c9)&&_0x3b163b==_0x49b729(0x224)){_0x3b0324[_0x49b729(0x2c9)]=settings['telegramToken'];continue;};if(_0x655d53==_0x49b729(0x233)&&_0x3b163b==_0x49b729(0x224)){_0x3b0324[_0x49b729(0x233)]=settings[_0x49b729(0x233)];continue;};dbSettings[_0x49b729(0x2c6)](_0x49b729(0x1f0)+_0x655d53,_0x3b163b)[_0x49b729(0x2b8)]();}settings=_0x3b0324,io['to'](_0x49b729(0x2b2))[_0x49b729(0x1f8)](_0x49b729(0x1d6),cleanSettings()),broadcastToBots(_0x49b729(0x2a1),settings[_0x49b729(0x2a1)]);if(_0x1a442c&&!_0x48756c)initTelegram();if(_0x1a442c&&_0x48756c)disableTelegram();getAllClients()['forEach'](_0x39ba65=>{const _0x33202c=_0x49b729;getSocket(_0x39ba65['id'])['emit'](_0x33202c(0x2d8),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x2f3704,_0x250a0f){const _0x716180=_0x45902b;dbSettings['set'](_0x716180(0x1f0)+_0x2f3704,_0x250a0f)[_0x716180(0x2b8)](),settings=getSettings(),io['to'](_0x716180(0x2b2))['emit']('settings',cleanSettings());}function storeSecure(_0x3de515){const _0x21eb3a=_0x45902b;dbSecure[_0x21eb3a(0x239)](_0x21eb3a(0x2aa))[_0x21eb3a(0x1ba)](_0x3de515)['write'](),secure=_0x3de515;}function addBlacklist(_0x862fa2){const _0x29d6b7=_0x45902b;cleanBlacklist();let _0x393a65;devices[_0x862fa2][_0x29d6b7(0x221)]?_0x393a65=Math['max'](devices[_0x862fa2]['telegramIpApproval']['expiry'],loginExpiry):_0x393a65=loginExpiry,dbSecure[_0x29d6b7(0x239)](_0x29d6b7(0x2b3))[_0x29d6b7(0x1ba)]({'expiry':new Date()[_0x29d6b7(0x304)]()+_0x393a65*0x3c*0x3e8,'token':devices[_0x862fa2][_0x29d6b7(0x1ff)]['token']})[_0x29d6b7(0x2b8)](),blacklist=dbSecure[_0x29d6b7(0x239)](_0x29d6b7(0x2b3))['value']();}function _0x1f3c(){const _0x4e1063=['bbPassword','connected','message','reject','readFileSync','clients','get','145XQPfVj','Error:\x20Invalid\x20argument\x20','constructor','Invalid\x20authentication\x20token\x20(1)','toString','logout','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Token\x20blacklisted','removeListener','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20|\x20','starting\x20new\x20bot\x20|\x20Bot\x20','socket.io','unlinkSync','hasOwnProperty','sendFile','(((.+)+)+)+$','stop','exit','User\x20has\x20been\x20validated','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','user','readdirSync','build','restart','Access\x20enabled\x20for\x20','generateKeyPairAsync','ipc','from','all','live','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','username','running','All\x20bots\x20running\x20right\x20now','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Password\x20has\x20been\x20reset\x20to:\x20','existsSync','showname','bb-secure.json','404\x20Not\x20Found','Unauthorized\x20attempt\x20to\x20add\x20bot','Unauthorized\x20attempt\x20to\x20update\x20bot','3000','error\x20while\x20deleting\x20config\x20files:\x20','handshake','new-disabled','parse',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','UA-192771731-1','decrypt','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','mkdirSync','date-fns','/help\x20-\x20show\x20available\x20commands\x0a','-----------------------------------------------------------------------------------','sortBy','23710LJyFai','allow','logged\x20out','toIPv4Address','catch','HTML','page','argv','2FA\x20login\x20rejected','index.html','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','::ffff:127.0.0.1','env','type','apply','slice','store-headless','includes','manual','/status\x20-\x20show\x20bot(s)\x20status\x0a','Balance\x20Bot\x20Server','filter','onText','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','https://api.ipify.org?format=json','listen','RSA','enabled','getHours','connection','\x20only\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','8999465oIJyGr','login','Temporary\x20access\x20rejected','verify','19110OzFeXT','2FA\x20login\x20token\x20generated','bbUsername','pidRefreshToken','bcryptjs','expiry','Notifications\x20disabled\x0a','timeshift','disabled','entries','\x20mode','keys','reload','telegramEnabled','token','add','secure',',\x20must\x20be\x20a\x204\x20digit\x20number','answerCallbackQuery','server','jsonwebtoken','notification','SIGTERM','/names\x20-\x20show\x20bot\x20names\x0a','botmanager','blacklist','get-portfolio','Balance\x20Bot','15\x20min','config/','write',':\x20Bot\x20Mgr\x20>\x20','starting\x20bot\x20|\x20Bot\x20','reason','-performance.json','encryptedUuid','<b>Telegram\x20Bot\x20Status:</b>\x0a','1001643FoKRei','name','emitHistory','Invalid\x20authentication\x20token\x20(2)','version','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','-events.json','set','login\x20token\x20valid','axios','telegramToken','getPortfolio','stopped','bot.js','Notifications\x20enabled\x0a','isDirectory','event','-results.json','send','value','3143fXinDV','mode','bb-config.json','Allow\x20login\x20from\x20IP\x20address\x20<b>','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','status','headless','sha256','/:bot/configuration','bots','error','length','exp','bb/','botname','botID','kill','initclient','callback_query','5\x20min','Ok,\x20will\x20send\x20alert\x20notifications\x20only','telegramUsername','\x20>\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','timestamp','/enable\x20-\x20enable\x20notifications\x0a','reset-password','store-settings','3980864WKmekp','node-telegram-bot-api','220sWlKGy','once','pidExpireLogin','uuid','userid','ipaddr.js','cancelLoading','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','auto','orders','Notifications\x20enabled','getSeconds','forEach','Alerts','7087144ZjOVRd','isIPv4MappedAddress','publicKey','</b>\x20?','Password\x20reset\x20rejected','getTime','alerts','Bot\x20','remove','Unauthorized\x20attempt\x20to\x20store\x20configuration','/:bot/coins','privateKey','version.json','storeConfiguration','loginRequired','api-eu.mixpanel.com','track','getUTCHours','find','express','password','stopPolling','Login\x20rejected','path','/:bot/support','temporary\x20token\x20generated','headers','-config.json','stringify','crypto','1301330uFuDnw','push','30\x20min','apiKey','getDate','referer','polling_error','getFullYear','match','assign','NTBA_FIX_319','build2','temporary\x20access\x20rejected','SIGINT','deleted\x20Bot\x20','split','No\x20bots\x20running\x20right\x20now','clientip','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','chat','login\x20not\x20required','secret','new','search','Invalid\x20IP\x20address','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','<b>Balance\x20Bot\x20Status:</b>\x0a','/on\x20-\x20start\x20bot(s)\x0a','Server','settings','\x20to\x20','hashSync','Crypt','Unauthorized\x20attempt\x20to\x20get\x20logs','2FA\x20login\x20required','Unauthorized\x20attempt\x20to\x20log\x20out','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','analytics','delete-alerts','sendMessage','telegram2FaApproval','place-order','Ok,\x20will\x20send\x20order\x20notifications\x20only','@analytics/google-analytics-v3','Bot\x20Mgr\x20>\x20','use','sendPortfolioTelegram','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','invalid\x20credentials','lowdb/adapters/FileSync','telegram','static','store-configuration','update-bot','success','settings.','bot','hybrid-crypto-js','/restart\x20-\x20restart\x20bot(s)\x0a','toggleBotMode','whitelist','padStart','alias','emit','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','placeOrder','::1','login\x20required','bot-','Invalid\x20Telegram\x20token','access','disconnect','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20login\x20attempt\x20(timeout)','deleteHistoryAlerts','Login\x20accepted','updatebotmanager','/:bot/history','/:bot','telegrammsg','9MzeOgT','toggle-bot-mode','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','temporary\x20access\x20timeout','removeAllListeners','All','ipv6','auth','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','log','access\x20timeout','data','6b67f3d61ee94b8f5c80b4affef4c4d9','2FA\x20required','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','defaults','started','test','isValid','All\x20bots','enabled\x20Bot\x20','randomUUID','temporaryAccessAllowed','sign','telegramIpApproval','lowdb','show','************','order','telegramEvents','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Notifications\x20disabled','telegramChatId','inherit','join','function','yes','RSA-OAEP','getMinutes','f2aRequired','then','randomFillSync'];_0x1f3c=function(){return _0x4e1063;};return _0x1f3c();}function cleanBlacklist(){const _0x7ef02e=_0x45902b;let _0x21904f=dbSecure[_0x7ef02e(0x239)](_0x7ef02e(0x2b3))['cloneDeep']()['value'](),_0x2cd286=new Date()[_0x7ef02e(0x304)]();_0x21904f[_0x7ef02e(0x2fd)](_0x10af7f=>{const _0x4f5808=_0x7ef02e;_0x10af7f['expiry']<_0x2cd286&&dbSecure[_0x4f5808(0x239)](_0x4f5808(0x2b3))[_0x4f5808(0x307)]({'expiry':_0x10af7f[_0x4f5808(0x29f)]})[_0x4f5808(0x2b8)]();});}function initStates(){let _0x2b7bec=getConfiguration();_0x2b7bec['forEach'](_0x1e461d=>{const _0x4a6909=_0x461e;_0x1e461d['live']=_0x4a6909(0x2cb);}),storeConfiguration(_0x2b7bec);}function onKeys(){const _0x4ca90a=new RSA();return new Promise(_0x3005cb=>{const _0x424312=_0x461e;_0x4ca90a[_0x424312(0x256)]()[_0x424312(0x231)](_0x3ccdad=>{_0x3005cb(_0x3ccdad);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5bf8af=_0x45902b;let _0x9366f5=getSettings(),_0x3649ba=![];!_0x9366f5[_0x5bf8af(0x24a)](_0x5bf8af(0x2f5))&&(_0x9366f5[_0x5bf8af(0x2f5)]=crypto['randomUUID'](),mixpanel[_0x5bf8af(0x1f7)](_0x9366f5[_0x5bf8af(0x2f5)]),_0x3649ba=!![]);if(_0x3649ba)storeSettings(_0x9366f5);}function storeConfiguration(_0x5556a1){const _0x5412fb=_0x45902b;dbConfig[_0x5412fb(0x239)](_0x5412fb(0x2dc))[_0x5412fb(0x307)]()['write'](),_0x5556a1[_0x5412fb(0x2fd)](_0x187100=>{const _0x19289b=_0x5412fb;delete _0x187100[_0x19289b(0x2d4)];}),dbConfig[_0x5412fb(0x239)]('bots')[_0x5412fb(0x1ba)](..._0x5556a1)['write'](),config=_0x5556a1;}function resetPassword(){const _0x195b22=_0x45902b;tgBot&&settings[_0x195b22(0x229)]&&(tgBot[_0x195b22(0x244)](_0x195b22(0x2e5)),tgBot[_0x195b22(0x1e0)](settings[_0x195b22(0x229)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x195b22(0x27a),'reply_markup':{'inline_keyboard':[[{'text':_0x195b22(0x22d),'callback_data':_0x195b22(0x22d)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x3cabcf=>{telegramError(_0x3cabcf);}),tgBot['on'](_0x195b22(0x2e5),async _0x468ce8=>{const _0x41117d=_0x195b22,_0x49197d=_0x468ce8[_0x41117d(0x214)],_0x338977=_0x468ce8['message'];tgBot[_0x41117d(0x2ac)](_0x468ce8['id'])[_0x41117d(0x231)](async()=>{const _0x26855b=_0x41117d;if(_0x49197d!='no'){const _0x29476f=0xf,_0x3da1ab=_0x26855b(0x25f),_0x4c675b=Array[_0x26855b(0x258)](crypto[_0x26855b(0x232)](new Uint32Array(_0x29476f)))['map'](_0x2141b6=>_0x3da1ab[_0x2141b6%_0x3da1ab[_0x26855b(0x2de)]])['join'](''),_0x313b1a=bcrypt[_0x26855b(0x1d8)](_0x4c675b,saltRounds);storeSettings({'bbPassword':_0x313b1a}),await tgBot[_0x26855b(0x1e0)](_0x338977[_0x26855b(0x1cc)]['id'],_0x26855b(0x260)+_0x4c675b,{'parse_mode':'HTML'})[_0x26855b(0x279)](_0x4e9319=>{telegramError(_0x4e9319);});}else await tgBot[_0x26855b(0x1e0)](_0x338977[_0x26855b(0x1cc)]['id'],_0x26855b(0x303))[_0x26855b(0x279)](_0x275626=>{telegramError(_0x275626);});}),tgBot[_0x41117d(0x244)](_0x41117d(0x2e5));}));}function logging(_0x5a4206){const _0x275e7e=_0x45902b;console[_0x275e7e(0x212)](getTimeStamp()+_0x275e7e(0x2b9)+_0x5a4206);if(tgBot&&settings[_0x275e7e(0x229)]&&settings[_0x275e7e(0x226)]!=_0x275e7e(0x2fa))tgBot['sendMessage'](settings[_0x275e7e(0x229)],_0x275e7e(0x1e5)+_0x5a4206)[_0x275e7e(0x279)](_0x11bc4e=>{telegramError(_0x11bc4e);});}function getServerTime(){const _0x4fc7fb=_0x45902b,_0xc65561=new Date();return _0xc65561[_0x4fc7fb(0x1c0)]()+'/'+(_0xc65561['getMonth']()+0x1)[_0x4fc7fb(0x23e)]()['padStart'](0x2,'0')+'/'+_0xc65561[_0x4fc7fb(0x1bd)]()[_0x4fc7fb(0x23e)]()[_0x4fc7fb(0x1f6)](0x2,'0')+'\x20'+_0xc65561[_0x4fc7fb(0x292)]()['toString']()[_0x4fc7fb(0x1f6)](0x2,'0')+':'+_0xc65561[_0x4fc7fb(0x22f)]()['toString']()[_0x4fc7fb(0x1f6)](0x2,'0')+':'+_0xc65561[_0x4fc7fb(0x2fc)]()[_0x4fc7fb(0x23e)]()[_0x4fc7fb(0x1f6)](0x2,'0');}function getTimeStamp(){const _0xec9765=_0x45902b,_0x2a5662=shiftedTime();return _0x2a5662[_0xec9765(0x1c0)]()+'/'+(_0x2a5662['getMonth']()+0x1)[_0xec9765(0x23e)]()[_0xec9765(0x1f6)](0x2,'0')+'/'+_0x2a5662[_0xec9765(0x1bd)]()[_0xec9765(0x23e)]()[_0xec9765(0x1f6)](0x2,'0')+'\x20'+_0x2a5662['getHours']()[_0xec9765(0x23e)]()[_0xec9765(0x1f6)](0x2,'0')+':'+_0x2a5662[_0xec9765(0x22f)]()['toString']()[_0xec9765(0x1f6)](0x2,'0')+':'+_0x2a5662[_0xec9765(0x2fc)]()[_0xec9765(0x23e)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x791c2e=_0x45902b,_0x2478fb=new Date();let _0x777de6=_0x2478fb;if(settings[_0x791c2e(0x2a1)]&&settings['timeshift']!==0x0)_0x777de6=fns[_0x791c2e(0x2a9)](_0x2478fb,{'hours':settings[_0x791c2e(0x2a1)]});return _0x777de6;}function startScheduler(){const _0x5f129a=_0x45902b;let _0x4e9318=new Date()[_0x5f129a(0x1ac)]();_0x4e9318==0x1&&backupConfigFiles();(_0x4e9318==0x9||_0x4e9318==0x15)&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x19ee77=_0x45902b;fs[_0x19ee77(0x252)](configpath,{'withFileTypes':!![]})[_0x19ee77(0x2fd)](_0x4db7ad=>{const _0x3e61ed=_0x19ee77;if(!_0x4db7ad[_0x3e61ed(0x2ce)]())fs['copyFileSync'](configpath+_0x4db7ad['name'],configbackuppath+_0x4db7ad[_0x3e61ed(0x2c0)]);});}async function getPublicIp(){const _0x2c3e53=_0x45902b;try{const _0xe433dd=await axios[_0x2c3e53(0x239)](_0x2c3e53(0x28e));publicip=_0xe433dd[_0x2c3e53(0x214)]['ip'];}catch(_0x1a6116){}}async function triggerAnalytics(){const _0x39cdc1=_0x45902b;if(!publicip)await getPublicIp();const _0x5307e8=getBotsWithMode();let _0xf4b5a=0x0;_0x5307e8[_0x39cdc1(0x2fd)](_0x3f710e=>{const _0x4cb71b=_0x39cdc1;if(_0x3f710e[_0x4cb71b(0x2d8)]===_0x4cb71b(0x291))_0xf4b5a++;}),mixpanel[_0x39cdc1(0x1ab)](_0x39cdc1(0x1d5),{'distinct_id':settings[_0x39cdc1(0x2f5)],'ip':publicip,'version':serverversion,'numbots':_0x5307e8[_0x39cdc1(0x2de)],'numbotsenabled':_0xf4b5a}),analytics[_0x39cdc1(0x27b)]({'title':_0x39cdc1(0x28a),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x9489c3,_0x4b3bee){const _0x45ae66=_0x45902b;if(_0x9489c3[_0x45ae66(0x25c)]==settings[_0x45ae66(0x29c)]&&bcrypt['compareSync'](_0x9489c3[_0x45ae66(0x1af)],settings['bbPassword'])){if(settings[_0x45ae66(0x230)])return{'allow':![],'reason':_0x45ae66(0x1db),'token':null};else{const _0xe007e8=generateLoginToken(_0x4b3bee);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xe007e8};}}else return{'allow':![],'reason':_0x45ae66(0x1e9),'token':null};}function refreshToken(_0x1c43d0){const _0x445068=generateLoginToken(_0x1c43d0);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x445068};}function _0x461e(_0x664283,_0x262b5c){const _0x142c54=_0x1f3c();return _0x461e=function(_0x34fdfc,_0x8fcbac){_0x34fdfc=_0x34fdfc-0x1a7;let _0x1f3cc7=_0x142c54[_0x34fdfc];return _0x1f3cc7;},_0x461e(_0x664283,_0x262b5c);}function validateAccess(_0x2869fb,_0x3616ba){const _0x2ca2cf=_0x45902b;let _0x440d03=devices[_0x3616ba]['ip'],_0x59a4a1;const _0x3bbc8f=_0x254dd9=>{const _0xcb18f4=_0x461e;if(settings[_0xcb18f4(0x1a9)]){if(settings[_0xcb18f4(0x230)]){if(telegram2FaApproved(_0x3616ba)){const _0x2055f4=generateLoginToken(_0x3616ba);return{'allow':!![],'reason':_0xcb18f4(0x29b),'token':_0x2055f4};}else return{'allow':![],'reason':_0xcb18f4(0x1fc),'token':null};}else return _0x59a4a1=validToken(_0x254dd9,_0x3616ba),_0x59a4a1[_0xcb18f4(0x24a)](_0xcb18f4(0x1ef))?{'allow':!![],'reason':_0xcb18f4(0x2c7),'token':_0x254dd9}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xcb18f4(0x1cd),'token':null};};if(settings['whitelistEnabled']){let _0x5cf046=[...settings[_0x2ca2cf(0x1f5)],_0x2ca2cf(0x1fb),_0x2ca2cf(0x281),'127.0.0.1'];if(_0x5cf046[_0x2ca2cf(0x287)](_0x440d03))return _0x3bbc8f(_0x2869fb);else{_0x59a4a1=validToken(_0x2869fb,_0x3616ba);if(_0x59a4a1['hasOwnProperty'](_0x2ca2cf(0x1ef)))return _0x3bbc8f(_0x2869fb);else{if(telegramIpApproved(_0x3616ba)){const _0x8f3a0e=generateToken(_0x3616ba);return _0x59a4a1=_0x3bbc8f(_0x2869fb),_0x59a4a1[_0x2ca2cf(0x276)]?{'allow':!![],'reason':_0x2ca2cf(0x1b4),'token':_0x8f3a0e}:_0x59a4a1;}else return settings[_0x2ca2cf(0x21f)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x3bbc8f(_0x2869fb);}function timelyDecrypt(_0x299a57,_0x1d3cea=!![]){const _0x519d69=_0x45902b;if(_0x299a57)try{const _0x3ee2e0=crypt['decrypt'](secure['privateKey'],_0x299a57)[_0x519d69(0x235)],_0x5b9807=_0x3ee2e0[_0x519d69(0x1c8)]('@')[0x0],_0x278296=_0x3ee2e0[_0x519d69(0x1c8)]('@')[0x1],_0x1caf77=new Date()[_0x519d69(0x304)]();if(_0x1d3cea){if(_0x1caf77-_0x278296<maxSecretAge*0x3e8)return _0x5b9807;else return![];}else return _0x5b9807;}catch(_0x1b78ac){return![];}else return![];}const validToken=(_0x9b37d9,_0x3b31b1)=>{const _0x238460=_0x45902b,_0x50a91f=devices[_0x3b31b1]['ip'];if(!_0x9b37d9)return{'error':'No\x20authentication\x20token'};for(let _0x320317 of blacklist){if(_0x320317[_0x238460(0x2a8)]==_0x9b37d9)return{'error':_0x238460(0x243)};}let _0x24db45;try{_0x24db45=jwt[_0x238460(0x299)](_0x9b37d9,secure[_0x238460(0x1ce)]+_0x3b31b1);}catch{return{'error':_0x238460(0x23d)};}if(!_0x24db45[_0x238460(0x24a)](_0x238460(0x1ca))&&!_0x24db45['hasOwnProperty'](_0x238460(0x25c))||!_0x24db45['hasOwnProperty'](_0x238460(0x2df)))return{'error':_0x238460(0x2c2)};if(!_0x24db45[_0x238460(0x24a)](_0x238460(0x25c))&&_0x24db45[_0x238460(0x24a)]('clientip')){const {clientip:_0x1b1109}=_0x24db45;return _0x50a91f==_0x1b1109?{'success':_0x238460(0x24f)}:{'error':_0x238460(0x1d1)};}else{if(_0x24db45[_0x238460(0x24a)](_0x238460(0x25c))&&_0x24db45['hasOwnProperty'](_0x238460(0x1ca))){const {username:_0x362b3a,clientip:_0x4931f8}=_0x24db45;return settings[_0x238460(0x29c)]==_0x362b3a&&_0x50a91f==_0x4931f8?{'success':_0x238460(0x24f)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x4dbf3a=>{if(_0x4dbf3a){const _0xc6dfda=devices[_0x4dbf3a]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0xc6dfda},secure['secret']+_0x4dbf3a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2d9b2a=>{const _0x1648e6=_0x45902b;if(_0x2d9b2a){const _0x36cff6=devices[_0x2d9b2a]['ip'];return jwt[_0x1648e6(0x220)]({'clientip':_0x36cff6},secure[_0x1648e6(0x1ce)]+_0x2d9b2a,{'expiresIn':devices[_0x2d9b2a][_0x1648e6(0x221)][_0x1648e6(0x29f)]*0x3c});}else return![];},telegramIpApproved=_0x388823=>{const _0x46bcd9=_0x45902b;let _0x2ae022=![];return devices[_0x388823][_0x46bcd9(0x221)]&&devices[_0x388823]['telegramIpApproval']['expiry']!=_0x46bcd9(0x236)&&(_0x2ae022=devices[_0x388823][_0x46bcd9(0x221)][_0x46bcd9(0x1ca)]==devices[_0x388823]['ip']&&new Date()[_0x46bcd9(0x304)]()-devices[_0x388823][_0x46bcd9(0x221)][_0x46bcd9(0x2eb)]<devices[_0x388823][_0x46bcd9(0x221)][_0x46bcd9(0x29f)]*0x3c*0x3e8),_0x2ae022;},telegram2FaApproved=_0x2e2af2=>{const _0x38e244=_0x45902b;let _0x2f37b9=![];return devices[_0x2e2af2][_0x38e244(0x1e1)]&&devices[_0x2e2af2][_0x38e244(0x1e1)][_0x38e244(0x29f)]!='reject'&&(_0x2f37b9=devices[_0x2e2af2]['telegram2FaApproval'][_0x38e244(0x1ca)]==devices[_0x2e2af2]['ip']&&new Date()['getTime']()-devices[_0x2e2af2]['telegram2FaApproval'][_0x38e244(0x2eb)]<devices[_0x2e2af2]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x2f37b9;},normalizeIP=_0x5721da=>{const _0x3a84cf=_0x45902b;let _0x2f7e34=null,_0x3b62b2=null;if(ipaddr[_0x3a84cf(0x21b)](_0x5721da)){const _0x2e2cff=ipaddr['parse'](_0x5721da);_0x2e2cff['kind']()===_0x3a84cf(0x20f)?(_0x2e2cff[_0x3a84cf(0x300)]()&&(_0x2f7e34=_0x2e2cff[_0x3a84cf(0x278)]()[_0x3a84cf(0x23e)]()),_0x3b62b2=_0x2e2cff[_0x3a84cf(0x23e)]()):(_0x2f7e34=_0x2e2cff[_0x3a84cf(0x23e)](),_0x3b62b2=_0x2e2cff['toIPv4MappedAddress']()[_0x3a84cf(0x23e)]());}return{'show':_0x2f7e34?_0x2f7e34:_0x3b62b2,'store':_0x3b62b2};};