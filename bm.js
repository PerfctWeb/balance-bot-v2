const _0x357299=_0x52c7;(function(_0x1d1efe,_0x403bad){const _0x2f6d9c=_0x52c7,_0x5523cb=_0x1d1efe();while(!![]){try{const _0x43652e=parseInt(_0x2f6d9c(0x29d))/0x1+parseInt(_0x2f6d9c(0x2c4))/0x2*(parseInt(_0x2f6d9c(0x294))/0x3)+parseInt(_0x2f6d9c(0x219))/0x4+parseInt(_0x2f6d9c(0x23f))/0x5+parseInt(_0x2f6d9c(0x2f8))/0x6*(-parseInt(_0x2f6d9c(0x214))/0x7)+-parseInt(_0x2f6d9c(0x297))/0x8+-parseInt(_0x2f6d9c(0x2b7))/0x9;if(_0x43652e===_0x403bad)break;else _0x5523cb['push'](_0x5523cb['shift']());}catch(_0x5f34d0){_0x5523cb['push'](_0x5523cb['shift']());}}}(_0x9165,0xb6206));const _0x45b136=function(){let _0x4f9161=!![];return function(_0x70f22d,_0x9cff34){const _0x218857=_0x4f9161?function(){if(_0x9cff34){const _0x315847=_0x9cff34['apply'](_0x70f22d,arguments);return _0x9cff34=null,_0x315847;}}:function(){};return _0x4f9161=![],_0x218857;};}(),_0x3ba086=_0x45b136(this,function(){const _0x184838=_0x52c7;return _0x3ba086['toString']()['search'](_0x184838(0x1ef))[_0x184838(0x1e6)]()[_0x184838(0x296)](_0x3ba086)[_0x184838(0x21e)]('(((.+)+)+)+$');});_0x3ba086();'use strict';process['env'][_0x357299(0x2d3)]=0x1;const childProcess=require(_0x357299(0x241)),FileSync=require(_0x357299(0x2ed)),fs=require('fs'),fns=require(_0x357299(0x2c7)),low=require(_0x357299(0x1e2)),path=require(_0x357299(0x27d)),crypto=require('crypto'),Crypt=require('hybrid-crypto-js')[_0x357299(0x1b4)],RSA=require(_0x357299(0x1f9))['RSA'],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),analyticsLib=require('analytics')[_0x357299(0x288)],googleAnalytics=require(_0x357299(0x1bc))[_0x357299(0x288)],ipaddr=require('ipaddr.js'),argv=require(_0x357299(0x27b))(process['argv'][_0x357299(0x2fa)](0x2))['argv'],PORT=argv[_0x357299(0x1b1)]||_0x357299(0x2b8),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x357299(0x1d5)](_0x357299(0x2d0)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x357299(0x1e3)](0x1);const HOST=argv[_0x357299(0x2f1)]||null,userID=argv[_0x357299(0x27e)]||'';let bbpath=_0x357299(0x220),bbpath2='';const botfile=_0x357299(0x221),configfile=_0x357299(0x246),settingsfile=_0x357299(0x24b),securefile=_0x357299(0x25a);let validInstallation=!![];!fs[_0x357299(0x27c)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x357299(0x2cd)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x357299(0x1fd);!fs['existsSync'](configpath)&&fs[_0x357299(0x21b)](configpath);!fs[_0x357299(0x27c)](configbackuppath)&&fs[_0x357299(0x21b)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x357299(0x229)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x357299(0x229)]({'settings':{'timeshift':0x0}})[_0x357299(0x250)]();function _0x9165(){const _0x54d265=['3863644sZyRFD','onText','mkdirSync','Unauthorized\x20attempt\x20to\x20get\x20logs','temporary\x20access\x20not\x20allowed','search','telegramUsername','bb/','bot.js','disabled','orders','emit','Invalid\x20Telegram\x20token','Notifications\x20types:\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','starting\x20bot\x20|\x20Bot\x20','defaults','getDate','store','server',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','name','/help\x20-\x20show\x20available\x20commands\x0a','telegramToken','timestamp','new','use','-----------------------------------------------------------------------------------','bbPassword','socket.io','error','temporary\x20access\x20rejected','username','HTML','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','send','settings.','removeListener','331260qaDKjY','1000','child_process','Login\x20accepted','deleted\x20Bot\x20','status','polling_error','bb-config.json',':\x20Bot\x20Mgr\x20>\x20','copyFileSync','Unauthorized\x20attempt\x20to\x20update\x20settings','login\x20required','bb-settings.json','ipc','Invalid\x20authentication\x20token\x20(1)','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','connected','write','update-bot','Unauthorized\x20attempt\x20to\x20delete\x20alerts','login\x20token\x20generated','telegramChatId','settings','/off\x20-\x20stop\x20bot(s)\x0a','telegram2FaApproval','allow','-results.json','bb-secure.json','push','placeOrder','started','You\x20can\x20use\x20the\x20following\x20commands:\x0a','version','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','delete-bot','get-portfolio','bot-','/:bot','Notifications\x20disabled\x0a','conn','logout','Bot\x20','success','/enable\x20-\x20enable\x20notifications\x0a','getSeconds','Unauthorized\x20attempt\x20to\x20update\x20bot','order','timeshift','handshake','\x20>\x20','pidExpireLogin','127.0.0.1','botname','then','/restart\x20-\x20restart\x20bot(s)\x0a','showname','callback_query','login\x20not\x20required','yargs/yargs','existsSync','path','user','sockets','add','map','data','restart','No\x20authentication\x20token','\x20/\x20','User\x20has\x20been\x20validated','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','default','login','/:bot/portfolio','yes','removeAllListeners','reject','getTime','Ok,\x20will\x20send\x20order\x20notifications\x20only','disabled\x20Bot\x20','invalid\x20credentials','2FA','secure','1051308bjDwid','disconnect','constructor','11003800vSQoQY','uuid','toIPv4Address','-performance.json','Notifications\x20enabled','/:bot/support','1266381gwmOyh','hasOwnProperty','stopped','exp','sendFile','assign','build','Access\x20enabled\x20for\x20','access\x20timeout','store-settings','Invalid\x20username\x20or\x20IP\x20address','http','kill','all','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','expiry','password','hex','UA-192771731-1','telegram','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20log\x20out','unlinkSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','4501224lVVbhc','3000','/:bot/configuration','bot','-events.json','remove','Token\x20blacklisted','parse','build2','publicKey','access','getFullYear','includes','4EZAEZC','update-bb','30\x20min','date-fns','bbUsername','token','Temporary\x20access\x20rejected','Invalid\x20authentication\x20token\x20(2)','type','config/','initclient','SIGINT','Error:\x20Invalid\x20argument\x20','isDirectory','storeHeadless','NTBA_FIX_319','auth','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','function','15\x20min','-config.json','listen','error\x20while\x20deleting\x20config\x20files:\x20','2FA\x20login\x20rejected','filter','index.html','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','remoteAddress','Balance\x20Bot\x20Server','restarting\x20Bot\x20','reload','padStart','isIPv4MappedAddress','logged\x20out','Allow\x20login\x20from\x20IP\x20address\x20<b>','getMonth','Alerts','express','event','5\x20min','telegramEvents','lowdb/adapters/FileSync','Unauthorized\x20attempt\x20to\x20add\x20bot','randomFillSync','message','host','store-configuration','randomBytes','getMinutes','temporary\x20access\x20timeout','telegramEnabled','enabled\x20Bot\x20','582YWuCOh','Password\x20reset\x20rejected','slice','get','bots','length','login\x20token\x20valid','notification','idling\x20bot\x20\x20\x20|\x20Bot\x20','Orders','port','Unauthorized\x20attempt\x20to\x20get\x20portfolio','alerts','Crypt','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','hashSync','enabled','keys','answerCallbackQuery','args','clientip','@analytics/google-analytics','temporaryAccessAllowed','whitelistEnabled','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','catch','reset-password','store-headless','whitelist','::1','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','\x20|\x20','storeConfiguration','Notifications\x20enabled\x0a','show','chat','once','get-logs','botID','sha256','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','RSA-OAEP','temporary\x20token\x20generated','kind','pidRefreshToken','log','split','join','stop','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','apiKey','verify','accept','secret','sendMessage','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','forEach','Password\x20has\x20been\x20reset\x20to:\x20','lowdb','exit','running','<b>Telegram\x20bot\x20status:</b>\x0a','toString','privateKey','404\x20Not\x20Found','version.json','/on\x20-\x20start\x20bot(s)\x0a','inherit','f2aRequired','sortBy','compareSync','(((.+)+)+)+$','telegramIpApproval','getPortfolio','static','loginRequired','referer','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','No\x20bots\x20running\x20right\x20now','Unauthorized\x20login\x20attempt\x20(timeout)','entries','hybrid-crypto-js','new-disabled','botmanager','************','backup/','::ffff:127.0.0.1','decrypt','live','2FA\x20login\x20token\x20generated','reason','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','blacklist','stopPolling','Notifications\x20disabled','ipv6','isValid','/status\x20-\x20show\x20bot(s)\x20status\x0a','getHours','headers','2FA\x20required','from','createServer','SIGTERM','2FA\x20login\x20required','find','generateKeyPairAsync','Bot\x20Mgr\x20>\x20','27265sRKClq','value','node-telegram-bot-api','All\x20bots','emitHistory'];_0x9165=function(){return _0x54d265;};return _0x9165();}const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x357299(0x229)]({'secure':{},'blacklist':[]})[_0x357299(0x250)]();let crypt=new Crypt({'md':_0x357299(0x1cf),'rsaStandard':_0x357299(0x1d1)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x357299(0x1e9))[_0x357299(0x25f)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x357299(0x2e9)),app=express(),http=require(_0x357299(0x2a8))[_0x357299(0x20e)](app);app[_0x357299(0x233)](express[_0x357299(0x1f2)](path[_0x357299(0x1d7)](__dirname,bbpath2,'build2'))),app[_0x357299(0x233)](express[_0x357299(0x1f2)](path['join'](__dirname,bbpath2,_0x357299(0x2a3)))),app[_0x357299(0x2fb)]('/',function(_0x2d54be,_0x24bf01){const _0x21281d=_0x357299;_0x24bf01[_0x21281d(0x2a1)](path[_0x21281d(0x1d7)](__dirname,bbpath2,_0x21281d(0x2bf),_0x21281d(0x2dd)));}),app[_0x357299(0x2fb)](_0x357299(0x266),function(_0x237166,_0x424ecd){const _0x16c5c0=_0x357299;_0x424ecd[_0x16c5c0(0x2a1)](path[_0x16c5c0(0x1d7)](__dirname,bbpath2,_0x16c5c0(0x2a3),_0x16c5c0(0x2dd)));}),app[_0x357299(0x2fb)](_0x357299(0x28a),(_0x484dc3,_0x18b8a4)=>{const _0x5d91d6=_0x357299;_0x18b8a4[_0x5d91d6(0x2a1)](path[_0x5d91d6(0x1d7)](__dirname,bbpath2,'build','index.html'));}),app['get']('/:bot/performance',(_0x10bd27,_0x453c46)=>{const _0x16ba1b=_0x357299;_0x453c46['sendFile'](path[_0x16ba1b(0x1d7)](__dirname,bbpath2,_0x16ba1b(0x2a3),'index.html'));}),app[_0x357299(0x2fb)]('/:bot/coins',(_0x280f62,_0x1798f2)=>{const _0x3e4537=_0x357299;_0x1798f2[_0x3e4537(0x2a1)](path['join'](__dirname,bbpath2,'build',_0x3e4537(0x2dd)));}),app[_0x357299(0x2fb)]('/:bot/history',(_0x26e6fa,_0x325ff9)=>{const _0x44e794=_0x357299;_0x325ff9[_0x44e794(0x2a1)](path['join'](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x357299(0x2b9),(_0x1c61c5,_0x5775dd)=>{const _0x965438=_0x357299;_0x5775dd[_0x965438(0x2a1)](path['join'](__dirname,bbpath2,'build',_0x965438(0x2dd)));}),app['get'](_0x357299(0x29c),(_0x504d48,_0x1570a1)=>{const _0x3ae0f4=_0x357299;_0x1570a1[_0x3ae0f4(0x2a1)](path[_0x3ae0f4(0x1d7)](__dirname,bbpath2,_0x3ae0f4(0x2a3),_0x3ae0f4(0x2dd)));});if(HOST)http[_0x357299(0x2d9)](PORT,HOST);else http[_0x357299(0x2d9)](PORT);const io=require(_0x357299(0x236))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x357299(0x2b0)})]}),TelegramBot=require(_0x357299(0x216));let tgBot;if(settings[_0x357299(0x230)]&&settings[_0x357299(0x230)]!=''&&settings[_0x357299(0x21f)]&&settings[_0x357299(0x21f)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5392a3=_0x357299;console['log'](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x5392a3(0x1c5)+PORT),console[_0x5392a3(0x1d5)]('-----------------------------------------------------------------------------------');if(config[_0x5392a3(0x1ac)]!=0x0)config[_0x5392a3(0x1e0)](_0x22fb21=>{const _0x1db3f7=_0x5392a3;if(_0x22fb21[_0x1db3f7(0x244)]==_0x1db3f7(0x1b7)||_0x22fb21[_0x1db3f7(0x244)]==_0x1db3f7(0x232))logging(_0x1db3f7(0x228)+_0x22fb21['botID']+_0x1db3f7(0x1c7)+_0x22fb21[_0x1db3f7(0x275)]),startBot([_0x22fb21[_0x1db3f7(0x1ce)],userID],{'cwd':bbpath},function(_0x21c871){if(_0x21c871)logging(_0x21c871);});else(_0x22fb21['status']==_0x1db3f7(0x222)||_0x22fb21[_0x1db3f7(0x244)]==_0x1db3f7(0x1fa))&&logging(_0x1db3f7(0x1af)+_0x22fb21[_0x1db3f7(0x1ce)]+_0x1db3f7(0x1c7)+_0x22fb21[_0x1db3f7(0x275)]);});else!newBot&&console[_0x5392a3(0x1d5)](_0x5392a3(0x23b));if(newBot)addBot();console[_0x5392a3(0x1d5)](_0x5392a3(0x234)),console[_0x5392a3(0x1d5)]('');}function startSocket(){io['on']('connection',_0x2dae16=>{const _0x2a37e5=_0x52c7;let _0x58d271,_0x5ee5db,_0x355875,_0x569da5,_0x41c5c6;const _0x355515=_0x2dae16['handshake'][_0x2a37e5(0x20b)][_0x2a37e5(0x1f4)];_0x5ee5db=_0x355515['match'](/bot[0-9]{3}/);if(_0x5ee5db)_0x355875=_0x5ee5db[0x0]['match'](/[0-9]{3}/);if(_0x355875)_0x58d271=_0x355875[0x0];else _0x58d271=_0x2a37e5(0x1fb);const _0xbc4f72=_0x2dae16[_0x2a37e5(0x271)][_0x2a37e5(0x2d4)]['encryptedUuid'];if(!_0xbc4f72)_0x2dae16['emit'](_0x2a37e5(0x244),{'publicKey':secure[_0x2a37e5(0x2c0)]});else{_0x569da5=timelyDecrypt(_0xbc4f72,![]);if(!_0x569da5)_0x2dae16[_0x2a37e5(0x224)]('status',{'publicKey':secure[_0x2a37e5(0x2c0)]});else{_0x41c5c6=normalizeIP(_0x2dae16[_0x2a37e5(0x268)][_0x2a37e5(0x2df)])[_0x2a37e5(0x22b)];if(!devices[_0x569da5])devices[_0x569da5]={'uuid':_0x569da5,'access':{'token':null}};devices[_0x569da5]['ip']=_0x41c5c6;const _0x595465=addClient(_0x2dae16['id'],_0x569da5,_0x58d271);setAccess(_0x595465),_0x2dae16['on'](_0x2a37e5(0x289),_0x28428d=>{const _0x57a30e=_0x2a37e5,_0x4a4fec=timelyDecrypt(_0x28428d[_0x57a30e(0x2ae)]);if(_0x4a4fec){_0x28428d={'username':_0x28428d[_0x57a30e(0x239)],'password':_0x4a4fec},devices[_0x569da5][_0x57a30e(0x2c1)]=validateCredentials(_0x28428d,_0x569da5);if(devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x258)]==![]&&devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x202)]=='2FA\x20login\x20required')_0x2dae16['emit']('status',{'access':devices[_0x569da5][_0x57a30e(0x2c1)]}),loginAccess2FA(_0x569da5,_0x41c5c6);else{if(devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x258)]==![]&&devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x202)]==_0x57a30e(0x291))_0x2dae16['emit'](_0x57a30e(0x244),{'access':devices[_0x569da5][_0x57a30e(0x2c1)]});else devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x258)]&&devices[_0x569da5][_0x57a30e(0x2c1)][_0x57a30e(0x202)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x569da5)[_0x57a30e(0x1e0)](_0x25a588=>{setAccess(_0x25a588);}),setTokenRefresh(_0x569da5),setSessionTimeout(_0x57a30e(0x289),_0x569da5));}}else logging(_0x57a30e(0x1f7));}),_0x2dae16['on'](_0x2a37e5(0x1c1),()=>{resetPassword();}),_0x2dae16['on'](_0x2a37e5(0x295),_0x58f106=>{removeClient(_0x2dae16['id']);});}}});}function initClient(_0x4cc91d){const _0x296d44=_0x357299;if(_0x4cc91d!=_0x296d44(0x1fb)&&config[_0x296d44(0x1da)]!=''){if(pid[_0x4cc91d])pid[_0x4cc91d][_0x296d44(0x23c)]({'function':_0x296d44(0x2ce),'args':null});}}function getSocket(_0x459a10){const _0x12882f=_0x357299;return io['sockets'][_0x12882f(0x27f)][_0x12882f(0x2fb)](_0x459a10);}function setAccess(_0x5817b6){const _0x2fce20=_0x357299,_0x2d1127=getSocket(_0x5817b6['id']),_0x5af9c3=_0x5817b6['uuid'],_0x1452ed=_0x5817b6[_0x2fce20(0x2ba)];devices[_0x5af9c3][_0x2fce20(0x2c1)]=validateAccess(devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x2c9)],_0x5af9c3),_0x2d1127[_0x2fce20(0x1d7)](_0x5af9c3);if(devices[_0x5af9c3]['access'][_0x2fce20(0x258)]){_0x2d1127[_0x2fce20(0x1d7)](_0x1452ed);if(_0x1452ed==_0x2fce20(0x1fb))initializeSocketBotManager(_0x2d1127);else initializeSocketBot(_0x2d1127);initClient(_0x1452ed);}devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x2c9)]&&devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x202)]==_0x2fce20(0x1d2)&&setSessionTimeout(_0x2fce20(0x292),_0x5af9c3),devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x2c9)]&&devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x202)]==_0x2fce20(0x201)&&setSessionTimeout(_0x2fce20(0x289),_0x5af9c3),_0x2d1127[_0x2fce20(0x224)](_0x2fce20(0x244),{'status':_0x5817b6[_0x2fce20(0x22c)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5af9c3][_0x2fce20(0x2c1)],'externalip':devices[_0x5af9c3]['ip'],'publicKey':secure[_0x2fce20(0x2c0)],'validInstallation':validInstallation}),devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x258)]==![]&&devices[_0x5af9c3][_0x2fce20(0x2c1)][_0x2fce20(0x202)]=='2FA\x20required'&&temporaryAccess2FA(_0x5af9c3,devices[_0x5af9c3]['ip']);}function setSessionTimeout(_0xff23a9,_0x1cae09){const _0x555e1c=_0x357299;let _0x39f095;if(_0xff23a9=='login')_0x39f095=loginExpiry*0x3c*0x3e8;else _0x39f095=devices[_0x1cae09][_0x555e1c(0x1f0)][_0x555e1c(0x2ad)]*0x3c*0x3e8-(new Date()[_0x555e1c(0x28e)]()-devices[_0x1cae09]['telegramIpApproval'][_0x555e1c(0x231)]);if(devices[_0x1cae09][_0x555e1c(0x273)])clearTimeout(devices[_0x1cae09][_0x555e1c(0x273)]);devices[_0x1cae09]['pidExpireLogin']=setTimeout(()=>{const _0x4d02b1=_0x555e1c;if(devices[_0x1cae09]['pidRefreshToken'])clearTimeout(devices[_0x1cae09][_0x4d02b1(0x1d4)]);removeSocketListeners(_0x1cae09),addBlacklist(_0x1cae09),devices[_0x1cae09][_0x4d02b1(0x1f0)]=null,devices[_0x1cae09][_0x4d02b1(0x257)]=null,devices[_0x1cae09][_0x4d02b1(0x2c1)][_0x4d02b1(0x2c9)]=null,devices[_0x1cae09][_0x4d02b1(0x2c1)]=validateAccess(devices[_0x1cae09]['access']['token'],_0x1cae09),!(devices[_0x1cae09][_0x4d02b1(0x2c1)][_0x4d02b1(0x258)]&&devices[_0x1cae09][_0x4d02b1(0x2c1)][_0x4d02b1(0x202)]==_0x4d02b1(0x27a))&&(_0xff23a9=='login'?io['to'](_0x1cae09)[_0x4d02b1(0x224)]('status',{'access':{'allow':![],'reason':_0x4d02b1(0x2a5),'token':null}}):io['to'](_0x1cae09)[_0x4d02b1(0x224)](_0x4d02b1(0x244),{'access':{'allow':![],'reason':_0x4d02b1(0x2f5),'token':null}})),devices[_0x1cae09]['access'][_0x4d02b1(0x2c9)]=null;},_0x39f095);}function _0x52c7(_0x593d8b,_0x138413){const _0x13bcc9=_0x9165();return _0x52c7=function(_0x3ba086,_0x45b136){_0x3ba086=_0x3ba086-0x1ab;let _0x91657c=_0x13bcc9[_0x3ba086];return _0x91657c;},_0x52c7(_0x593d8b,_0x138413);}function setTokenRefresh(_0x191e4){const _0x5a6733=_0x357299;if(devices[_0x191e4][_0x5a6733(0x1d4)])clearTimeout(devices[_0x191e4][_0x5a6733(0x1d4)]);devices[_0x191e4][_0x5a6733(0x1d4)]=setTimeout(()=>{const _0x218e93=_0x5a6733;getClientsWithUuid(_0x191e4)[_0x218e93(0x1ac)]!=0x0?(devices[_0x191e4][_0x218e93(0x2c1)]=refreshToken(_0x191e4),io['to'](_0x191e4)['emit'](_0x218e93(0x244),{'status':_0x218e93(0x24f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x191e4]['access'],'externalip':devices[_0x191e4]['ip'],'publicKey':secure[_0x218e93(0x2c0)],'validInstallation':validInstallation}),setTokenRefresh(_0x191e4)):clearTimeout(devices[_0x191e4][_0x218e93(0x1d4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3b5d35){const _0x36ba3f=_0x357299,_0x786ce3=getClient(_0x3b5d35['id'])[_0x36ba3f(0x298)];_0x3b5d35[_0x36ba3f(0x224)](_0x36ba3f(0x1ab),config),_0x3b5d35[_0x36ba3f(0x224)]('settings',cleanSettings()),_0x3b5d35['on']('add-bot',_0x137ec4=>{const _0x45dbfd=_0x36ba3f;if(validateAccess(_0x137ec4,_0x786ce3)[_0x45dbfd(0x258)])addBot();else logging(_0x45dbfd(0x2ee));}),_0x3b5d35['on'](_0x36ba3f(0x251),(_0x31b247,_0x1bdc0a)=>{const _0x4f7985=_0x36ba3f;if(validateAccess(_0x1bdc0a,_0x786ce3)[_0x4f7985(0x258)])toggleBot(_0x31b247[_0x4f7985(0x1ce)],_0x31b247[_0x4f7985(0x244)],_0x31b247[_0x4f7985(0x200)]);else logging(_0x4f7985(0x26e));}),_0x3b5d35['on'](_0x36ba3f(0x263),(_0x18ff24,_0xc9368e)=>{const _0x56e57a=_0x36ba3f;if(validateAccess(_0xc9368e,_0x786ce3)[_0x56e57a(0x258)])deleteBot(_0x18ff24);else logging(_0x56e57a(0x2b3));}),_0x3b5d35['on'](_0x36ba3f(0x2a6),(_0xbf081a,_0x1eb281)=>{if(validateAccess(_0x1eb281,_0x786ce3)['allow'])storeSettings(_0xbf081a,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x3b5d35['on'](_0x36ba3f(0x2c5),(_0x441d35,_0x235e43)=>{const _0x111d61=_0x36ba3f;if(validateAccess(_0x235e43,_0x786ce3)[_0x111d61(0x258)])updateBB();else logging(_0x111d61(0x249));}),_0x3b5d35['on'](_0x36ba3f(0x269),_0x729b1c=>{const _0x4435b7=_0x36ba3f;if(validateAccess(_0x729b1c,_0x786ce3)[_0x4435b7(0x258)]){if(devices[_0x786ce3][_0x4435b7(0x1d4)])clearTimeout(devices[_0x786ce3][_0x4435b7(0x1d4)]);if(devices[_0x786ce3][_0x4435b7(0x273)])clearTimeout(devices[_0x786ce3]['pidExpireLogin']);removeSocketListeners(getClient(_0x3b5d35['id'])[_0x4435b7(0x298)]),addBlacklist(_0x786ce3),devices[_0x786ce3][_0x4435b7(0x1f0)]=null,devices[_0x786ce3][_0x4435b7(0x257)]=null,devices[_0x786ce3][_0x4435b7(0x2c1)]['token']=null,io['to'](getClient(_0x3b5d35['id'])['uuid'])[_0x4435b7(0x224)]('status',{'access':{'allow':![],'reason':_0x4435b7(0x2e5),'token':null}});}else logging(_0x4435b7(0x2b4));});}function initializeSocketBot(_0xe148b8){const _0x3b2026=_0x357299,_0x290e39=getClient(_0xe148b8['id'])[_0x3b2026(0x2ba)],_0x1a8f9f=getClient(_0xe148b8['id'])[_0x3b2026(0x298)];_0xe148b8['on'](_0x3b2026(0x1cd),(_0x2374df,_0x3053bb)=>{const _0x2af2f4=_0x3b2026;if(validateAccess(_0x3053bb,_0x1a8f9f)[_0x2af2f4(0x258)]){if(pid[_0x290e39])pid[_0x290e39][_0x2af2f4(0x23c)]({'function':_0x2af2f4(0x218),'args':_0x2374df});}else logging(_0x2af2f4(0x21c));}),_0xe148b8['on']('delete-alerts',(_0x5075ee,_0x1cd842)=>{const _0x43f450=_0x3b2026;if(validateAccess(_0x1cd842,_0x1a8f9f)[_0x43f450(0x258)]){if(pid[_0x290e39])pid[_0x290e39][_0x43f450(0x23c)]({'function':'deleteHistoryAlerts','args':_0x5075ee});}else logging(_0x43f450(0x252));}),_0xe148b8['on'](_0x3b2026(0x264),(_0x10dd58,_0xf55405)=>{const _0x4cbf9b=_0x3b2026;if(validateAccess(_0xf55405,_0x1a8f9f)['allow']){if(pid[_0x290e39])pid[_0x290e39]['send']({'function':_0x4cbf9b(0x1f1),'args':_0x10dd58});}else logging(_0x4cbf9b(0x1b2));}),_0xe148b8['on'](_0x3b2026(0x2f2),(_0x392f11,_0x4cf49e)=>{const _0x59a7e9=_0x3b2026;if(validateAccess(_0x4cf49e,_0x1a8f9f)[_0x59a7e9(0x258)]){if(pid[_0x290e39])pid[_0x290e39][_0x59a7e9(0x23c)]({'function':_0x59a7e9(0x1c8),'args':_0x392f11});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0xe148b8['on'](_0x3b2026(0x1c2),(_0x3e9ddb,_0x4bfe96)=>{const _0x4e477f=_0x3b2026;if(validateAccess(_0x4bfe96,_0x1a8f9f)[_0x4e477f(0x258)]){if(pid[_0x290e39])pid[_0x290e39][_0x4e477f(0x23c)]({'function':_0x4e477f(0x2d2),'args':_0x3e9ddb});}else logging(_0x4e477f(0x2d5));}),_0xe148b8['on']('get-starting-balances',_0x4a779b=>{const _0x2de20a=_0x3b2026;if(validateAccess(_0x4a779b,_0x1a8f9f)['allow']){if(pid[_0x290e39])pid[_0x290e39]['send']({'function':'getStartingBalances','args':null});}else logging(_0x2de20a(0x1b5));}),_0xe148b8['on']('place-order',(_0x2ea22c,_0x48b184)=>{const _0x11d419=_0x3b2026;if(validateAccess(_0x48b184,_0x1a8f9f)[_0x11d419(0x258)]){if(pid[_0x290e39])pid[_0x290e39]['send']({'function':_0x11d419(0x25c),'args':_0x2ea22c});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0xe148b8['on']('cancel-loading',_0x3ad05e=>{const _0x426d68=_0x3b2026;if(validateAccess(_0x3ad05e,_0x1a8f9f)[_0x426d68(0x258)]){if(pid[_0x290e39])pid[_0x290e39][_0x426d68(0x23c)]({'function':'cancelLoading','args':null});}else logging(_0x426d68(0x2b6));}),_0xe148b8['on'](_0x3b2026(0x269),_0x1d2476=>{const _0x5ad5cc=_0x3b2026;if(validateAccess(_0x1d2476,_0x1a8f9f)['allow']){if(devices[_0x1a8f9f][_0x5ad5cc(0x1d4)])clearTimeout(devices[_0x1a8f9f][_0x5ad5cc(0x1d4)]);if(devices[_0x1a8f9f][_0x5ad5cc(0x273)])clearTimeout(devices[_0x1a8f9f][_0x5ad5cc(0x273)]);removeSocketListeners(getClient(_0xe148b8['id'])[_0x5ad5cc(0x298)]),addBlacklist(_0x1a8f9f),devices[_0x1a8f9f][_0x5ad5cc(0x1f0)]=null,devices[_0x1a8f9f][_0x5ad5cc(0x257)]=null,devices[_0x1a8f9f]['access'][_0x5ad5cc(0x2c9)]=null,io['to'](getClient(_0xe148b8['id'])[_0x5ad5cc(0x298)])['emit'](_0x5ad5cc(0x244),{'access':{'allow':![],'reason':_0x5ad5cc(0x2e5),'token':null}});}else logging(_0x5ad5cc(0x2b4));});}function removeSocketListeners(_0x56e783){const _0x4b8ab8=_0x357299;getClientsWithUuid(_0x56e783)[_0x4b8ab8(0x1e0)](_0x990f0a=>{const _0x19ef0c=_0x4b8ab8;getSocket(_0x990f0a['id'])[_0x19ef0c(0x28c)]();});}function cleanSettings(){const _0x59a9d5=_0x357299;let _0x11d69f=settings;return settings['telegramToken']&&settings[_0x59a9d5(0x230)]!=''&&(_0x11d69f={..._0x11d69f,'telegramToken':_0x59a9d5(0x1fc)}),settings['bbPassword']&&settings[_0x59a9d5(0x235)]!=''&&(_0x11d69f={..._0x11d69f,'bbPassword':'************'}),_0x11d69f;}function updateBB(){const _0x4e8b84=_0x357299;installingUpdate=!![],config[_0x4e8b84(0x1e0)](_0x2de470=>{const _0x4f7557=_0x4e8b84;restartBot(_0x2de470[_0x4f7557(0x1ce)]);}),process[_0x4e8b84(0x23c)]({'update':!![]},_0x3b3d66=>{});}function startBot(_0x15a2c1,_0x245eae,_0x32d6f2){const _0x404dfc=_0x357299;let _0x5cbd9e=![];const _0x1ee5d0=_0x15a2c1[0x0];_0x245eae={..._0x245eae,'stdio':['inherit',_0x404dfc(0x1eb),_0x404dfc(0x1eb),_0x404dfc(0x24c)]},pid[_0x1ee5d0]=childProcess['fork'](botfile,_0x15a2c1,_0x245eae),pid[_0x1ee5d0]['on'](_0x404dfc(0x2f0),_0x4c3e72=>{const _0x5cbd3f=_0x404dfc;switch(Object[_0x5cbd3f(0x1b8)](_0x4c3e72)[0x0]){case _0x5cbd3f(0x275):updateBotName(_0x1ee5d0,_0x4c3e72[_0x5cbd3f(0x275)]);break;case'status':updateStatus(_0x1ee5d0,_0x4c3e72[_0x5cbd3f(0x244)]);break;case _0x5cbd3f(0x200):updateLive(_0x1ee5d0,_0x4c3e72[_0x5cbd3f(0x200)]);break;case _0x5cbd3f(0x25d):updateLive(_0x1ee5d0,_0x4c3e72[_0x5cbd3f(0x25d)]),io['to'](_0x1ee5d0)['emit'](_0x5cbd3f(0x244),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x5cbd3f(0x1d8):_0x4c3e72[_0x5cbd3f(0x1d8)]==_0x5cbd3f(0x283)&&restartBot(_0x1ee5d0);_0x4c3e72[_0x5cbd3f(0x1d8)]==_0x5cbd3f(0x2a9)&&toggleBot(_0x1ee5d0,_0x5cbd3f(0x222),_0x5cbd3f(0x29f));break;case'telegram':sendTelegram(_0x1ee5d0,_0x4c3e72[_0x5cbd3f(0x2b1)]);break;case _0x5cbd3f(0x2d6):io['to'](_0x1ee5d0)[_0x5cbd3f(0x224)](_0x4c3e72[_0x5cbd3f(0x2d6)],_0x4c3e72[_0x5cbd3f(0x1ba)]);break;}}),pid[_0x1ee5d0]['on'](_0x404dfc(0x237),function(_0x24bd44){if(_0x5cbd9e)return;_0x5cbd9e=!![],_0x32d6f2(_0x24bd44);}),pid[_0x1ee5d0]['on'](_0x404dfc(0x1e3),function(_0x42be4e){const _0x206ba8=_0x404dfc;if(installingUpdate)return;if(_0x5cbd9e)return;_0x5cbd9e=!![],_0x32d6f2(null);const _0x38d3fb=dbConfig[_0x206ba8(0x2fb)](_0x206ba8(0x1ab))[_0x206ba8(0x211)]({'botID':_0x1ee5d0})[_0x206ba8(0x215)]();_0x38d3fb&&(_0x38d3fb[_0x206ba8(0x244)]==_0x206ba8(0x1b7)||_0x38d3fb[_0x206ba8(0x244)]==_0x206ba8(0x232))&&(updateLive(_0x1ee5d0,_0x206ba8(0x29f)),logging(_0x206ba8(0x2e1)+_0x1ee5d0),startBot([_0x1ee5d0,userID],{'cwd':bbpath},function(_0x3ae0ed){if(_0x3ae0ed)logging(_0x3ae0ed);}));});}function stopBot(_0x7bfd81){const _0x39943a=_0x357299;getClientsWithBotID(_0x7bfd81)[_0x39943a(0x1e0)](_0x1cdfd2=>{const _0x16cb5e=_0x39943a;getSocket(_0x1cdfd2['id'])[_0x16cb5e(0x295)](!![]),removeClient(_0x1cdfd2['id']);});if(pid[_0x7bfd81])pid[_0x7bfd81]['kill']();}function restartBot(_0x3f91cd){const _0xada4a0=_0x357299;if(pid[_0x3f91cd])pid[_0x3f91cd][_0xada4a0(0x2a9)]();}function addBot(){const _0x55401c=_0x357299;let _0x3c8172;for(let _0x4c70a9=0x1;_0x4c70a9<0x3e9;_0x4c70a9++){_0x3c8172=_0x4c70a9['toString']()[_0x55401c(0x2e3)](0x3,'0');let _0x43620b=config['find'](_0x55ef77=>_0x55ef77[_0x55401c(0x1ce)]==_0x3c8172);if(!_0x43620b)break;}if(_0x3c8172===_0x55401c(0x240)){logging(_0x55401c(0x1d0));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x3c8172),dbConfig['get'](_0x55401c(0x1ab))['push']({'botID':_0x3c8172,'botname':_0x55401c(0x26a)+_0x3c8172,'status':'new','live':''})[_0x55401c(0x250)](),startBot([_0x3c8172,userID],{'cwd':bbpath},function(_0xfa0dc9){if(_0xfa0dc9)logging(_0xfa0dc9);}),config=getConfiguration(),io['to'](_0x55401c(0x1fb))[_0x55401c(0x224)](_0x55401c(0x1ab),config);}function deleteBot(_0x2b1615){const _0x16513f=_0x357299;getClientsWithBotID(_0x2b1615)[_0x16513f(0x1e0)](_0x1583a6=>{const _0x308f4d=_0x16513f;getSocket(_0x1583a6['id'])[_0x308f4d(0x295)](!![]),removeClient(_0x1583a6['id']);}),dbConfig[_0x16513f(0x2fb)](_0x16513f(0x1ab))[_0x16513f(0x2bc)]({'botID':_0x2b1615})['write'](),logging(_0x16513f(0x243)+_0x2b1615),stopBot(_0x2b1615);try{fs[_0x16513f(0x2b5)](path['join'](configpath,_0x16513f(0x265)+_0x2b1615+_0x16513f(0x2d8))),fs[_0x16513f(0x2b5)](path['join'](configpath,_0x16513f(0x265)+_0x2b1615+_0x16513f(0x2bb))),fs[_0x16513f(0x2b5)](path[_0x16513f(0x1d7)](configpath,'bot-'+_0x2b1615+_0x16513f(0x29a))),fs[_0x16513f(0x2b5)](path[_0x16513f(0x1d7)](configpath,_0x16513f(0x265)+_0x2b1615+_0x16513f(0x259)));}catch(_0x2f1b0d){if(_0x2f1b0d)logging(_0x16513f(0x2da),_0x2f1b0d);}config=getConfiguration(),io['to'](_0x16513f(0x1fb))[_0x16513f(0x224)](_0x16513f(0x1ab),config);}function toggleBot(_0x3748f4,_0x46a2e5,_0x5da421){const _0x589199=_0x357299;dbConfig[_0x589199(0x2fb)]('bots')[_0x589199(0x211)]({'botID':_0x3748f4})['assign']({'status':_0x46a2e5})['assign']({'live':_0x5da421})[_0x589199(0x250)]();if(_0x46a2e5==_0x589199(0x1b7)||_0x46a2e5=='new')logging(_0x589199(0x2f7)+_0x3748f4),startBot([_0x3748f4,userID],{'cwd':bbpath},function(_0x306234){if(_0x306234)logging(_0x306234);});else(_0x46a2e5==_0x589199(0x222)||_0x46a2e5==_0x589199(0x1fa))&&(logging(_0x589199(0x290)+_0x3748f4),stopBot(_0x3748f4));config=getConfiguration(),io['to']('botmanager')[_0x589199(0x224)](_0x589199(0x1ab),config);}function toggleStatus(_0x5f7a48){const _0x22ac22=_0x357299;let _0x33e27d=dbConfig[_0x22ac22(0x2fb)]('bots')[_0x22ac22(0x211)]({'botID':_0x5f7a48})['value'](),_0x345cf2;if(_0x33e27d[_0x22ac22(0x244)]===_0x22ac22(0x1b7))_0x345cf2=_0x22ac22(0x222);else{if(_0x33e27d[_0x22ac22(0x244)]===_0x22ac22(0x232))_0x345cf2=_0x22ac22(0x1fa);else{if(_0x33e27d['status']==='new-disabled')_0x345cf2=_0x22ac22(0x232);else{if(_0x33e27d[_0x22ac22(0x244)]==='disabled')_0x345cf2='enabled';}}}return _0x345cf2;}function updateStatus(_0x4b5ec4,_0x5992a7){const _0x2db6d6=_0x357299;dbConfig[_0x2db6d6(0x2fb)](_0x2db6d6(0x1ab))[_0x2db6d6(0x211)]({'botID':_0x4b5ec4})[_0x2db6d6(0x2a2)]({'status':_0x5992a7})[_0x2db6d6(0x250)](),config=getConfiguration(),io['to'](_0x2db6d6(0x1fb))[_0x2db6d6(0x224)](_0x2db6d6(0x1ab),config);}function updateLive(_0x2a9846,_0x44f674){const _0x6f7056=_0x357299;dbConfig[_0x6f7056(0x2fb)](_0x6f7056(0x1ab))[_0x6f7056(0x211)]({'botID':_0x2a9846})[_0x6f7056(0x2a2)]({'live':_0x44f674})[_0x6f7056(0x250)](),config=getConfiguration(),io['to'](_0x6f7056(0x1fb))[_0x6f7056(0x224)](_0x6f7056(0x1ab),config);}function updateBotName(_0x27ba94,_0x4f66b0){const _0x322ebf=_0x357299;dbConfig[_0x322ebf(0x2fb)]('bots')[_0x322ebf(0x211)]({'botID':_0x27ba94})[_0x322ebf(0x2a2)]({'botname':_0x4f66b0})[_0x322ebf(0x250)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x322ebf(0x1ab),config);}function telegramError(_0x209fa4){const _0x11794f=_0x357299;console[_0x11794f(0x1d5)](getTimeStamp()+_0x11794f(0x22d));}function validateTelegram(_0x349fdf){const _0x46189a=_0x357299;if(_0x349fdf[_0x46189a(0x20d)][_0x46189a(0x239)]!=settings[_0x46189a(0x21f)]&&'@'+_0x349fdf['from']['username']!=settings['telegramUsername'])return tgBot[_0x46189a(0x1de)](_0x349fdf[_0x46189a(0x1cb)]['id'],_0x46189a(0x2de),{'parse_mode':_0x46189a(0x23a)})[_0x46189a(0x1c0)](_0x518236=>{telegramError(_0x518236);}),![];return!![];}async function initTelegram(){const _0x3c1387=_0x357299;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3c1387(0x230)],{'polling':!![]});let _0x5e96b9=_0x3c1387(0x25e);_0x5e96b9+='\x0a',_0x5e96b9+=_0x3c1387(0x26c),_0x5e96b9+='/disable\x20-\x20disable\x20notifications\x0a',_0x5e96b9+=_0x3c1387(0x260),_0x5e96b9+=_0x3c1387(0x277),_0x5e96b9+=_0x3c1387(0x1ea),_0x5e96b9+=_0x3c1387(0x256),_0x5e96b9+=_0x3c1387(0x209),_0x5e96b9+=_0x3c1387(0x22f);let _0x3af778=_0x3c1387(0x227);_0x3af778+='\x0a',_0x3af778+=_0x5e96b9,tgBot[_0x3c1387(0x21a)](/\/start/,_0x4a18de=>{const _0x2999b2=_0x3c1387;if(!validateTelegram(_0x4a18de))return;if(settings[_0x2999b2(0x254)]!=_0x4a18de[_0x2999b2(0x1cb)]['id'])updateSetting(_0x2999b2(0x254),_0x4a18de[_0x2999b2(0x1cb)]['id']);updateSetting(_0x2999b2(0x2f6),!![]),tgBot[_0x2999b2(0x1de)](_0x4a18de['chat']['id'],_0x3af778)[_0x2999b2(0x1c0)](_0x47490e=>{telegramError(_0x47490e);});}),tgBot['onText'](/\/enable/,_0x53dbdc=>{const _0x5a0efa=_0x3c1387;if(!validateTelegram(_0x53dbdc))return;if(settings['telegramChatId']!=_0x53dbdc[_0x5a0efa(0x1cb)]['id'])updateSetting(_0x5a0efa(0x254),_0x53dbdc[_0x5a0efa(0x1cb)]['id']);updateSetting(_0x5a0efa(0x2f6),!![]),tgBot[_0x5a0efa(0x1de)](_0x53dbdc[_0x5a0efa(0x1cb)]['id'],_0x5a0efa(0x29b))['catch'](_0xf7a31e=>{telegramError(_0xf7a31e);});}),tgBot['onText'](/\/config/,async _0x231099=>{const _0x48770b=_0x3c1387;if(!validateTelegram(_0x231099))return;tgBot[_0x48770b(0x23e)](_0x48770b(0x279)),tgBot[_0x48770b(0x1de)](_0x231099[_0x48770b(0x1cb)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x48770b(0x1b0),'callback_data':'orders'},{'text':_0x48770b(0x2e8),'callback_data':'alerts'},{'text':'All','callback_data':_0x48770b(0x2aa)}]]}})['catch'](_0x15bec9=>{telegramError(_0x15bec9);}),tgBot['on']('callback_query',async _0x314b5e=>{const _0x26e125=_0x48770b,_0x54ba47=_0x314b5e['data'],_0x91bf44=_0x314b5e[_0x26e125(0x2f0)];tgBot[_0x26e125(0x1b9)](_0x314b5e['id'])[_0x26e125(0x276)](async()=>{const _0x3801f5=_0x26e125;_0x54ba47=='orders'&&(updateSetting('telegramEvents','orders'),updateSetting(_0x3801f5(0x2f6),!![]),await tgBot['sendMessage'](_0x91bf44['chat']['id'],_0x3801f5(0x28f))['catch'](_0x4f752e=>{telegramError(_0x4f752e);}));_0x54ba47==_0x3801f5(0x1b3)&&(updateSetting(_0x3801f5(0x2ec),_0x3801f5(0x1b3)),updateSetting(_0x3801f5(0x2f6),!![]),await tgBot[_0x3801f5(0x1de)](_0x91bf44[_0x3801f5(0x1cb)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x3801f5(0x1c0)](_0x122fd1=>{telegramError(_0x122fd1);}));_0x54ba47==_0x3801f5(0x2aa)&&(updateSetting(_0x3801f5(0x2ec),_0x3801f5(0x2aa)),updateSetting(_0x3801f5(0x2f6),!![]),await tgBot[_0x3801f5(0x1de)](_0x91bf44['chat']['id'],_0x3801f5(0x1d9))[_0x3801f5(0x1c0)](_0x1e3da8=>{telegramError(_0x1e3da8);}));if(!settings[_0x3801f5(0x254)])tgBot[_0x3801f5(0x1de)](_0x91bf44['chat']['id'],_0x3801f5(0x287))[_0x3801f5(0x1c0)](_0x12438c=>{telegramError(_0x12438c);});}),tgBot[_0x26e125(0x23e)](_0x26e125(0x279));});}),tgBot[_0x3c1387(0x21a)](/\/status/,_0x3241e5=>{const _0x163b5c=_0x3c1387;if(!validateTelegram(_0x3241e5))return;let _0x25e246='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x163b5c(0x1e0)](_0x133ab3=>{const _0x426951=_0x163b5c;_0x25e246+=_0x426951(0x26a)+_0x133ab3[_0x426951(0x1ce)]+_0x426951(0x1c7)+_0x133ab3[_0x426951(0x275)]+':\x20'+_0x133ab3['status']+_0x426951(0x285)+_0x133ab3[_0x426951(0x200)]+'\x0a';}),_0x25e246+='\x0a',_0x25e246+=_0x163b5c(0x1e5),_0x25e246+=!settings[_0x163b5c(0x2f6)]?_0x163b5c(0x267):_0x163b5c(0x1c9),_0x25e246+=settings[_0x163b5c(0x2f6)]?settings[_0x163b5c(0x2ec)]=='all'?_0x163b5c(0x2ac):_0x163b5c(0x226)+settings['telegramEvents']+'\x20only\x0a':'',tgBot['sendMessage'](_0x3241e5[_0x163b5c(0x1cb)]['id'],_0x25e246,{'parse_mode':_0x163b5c(0x23a)})[_0x163b5c(0x1c0)](_0x3e3660=>{telegramError(_0x3e3660);});}),tgBot['onText'](/\/restart/,_0x3665de=>{const _0x2f6d36=_0x3c1387;if(!validateTelegram(_0x3665de))return;tgBot[_0x2f6d36(0x23e)](_0x2f6d36(0x279));const _0x1a42f7=getEnabledBots();if(_0x1a42f7[_0x2f6d36(0x1ac)]==0x0)tgBot[_0x2f6d36(0x1de)](_0x3665de['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2614d3=>{telegramError(_0x2614d3);});else{if(_0x1a42f7['length']>0x1)_0x1a42f7[_0x2f6d36(0x25b)]({'botID':_0x2f6d36(0x2aa)});let _0x492077=[],_0x50f6d3=[];const _0x3af452=_0x1a42f7[_0x2f6d36(0x1ac)]%0x4==0x0||_0x1a42f7['length']%0x4==0x3||_0x1a42f7[_0x2f6d36(0x1ac)]%0x3==0x1?0x4:0x3;let _0x5c4401=0x0;_0x1a42f7[_0x2f6d36(0x1e0)]((_0x229ef3,_0x3a5264)=>{const _0x3f434a=_0x2f6d36;if(_0x3a5264%_0x3af452==0x0)_0x50f6d3=[];_0x50f6d3[_0x3f434a(0x25b)]({'text':_0x229ef3[_0x3f434a(0x1ce)]=='all'?_0x3f434a(0x217):_0x3f434a(0x26a)+_0x229ef3[_0x3f434a(0x1ce)],'callback_data':_0x229ef3[_0x3f434a(0x1ce)]}),_0x3a5264%_0x3af452==0x0&&(_0x492077[_0x5c4401]=_0x50f6d3,_0x5c4401++);}),tgBot[_0x2f6d36(0x1de)](_0x3665de[_0x2f6d36(0x1cb)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x492077}})[_0x2f6d36(0x1c0)](_0x24dcc7=>{telegramError(_0x24dcc7);}),tgBot['on'](_0x2f6d36(0x279),async _0x2bff6a=>{const _0x4018fe=_0x2f6d36,_0xdffbdc=_0x2bff6a[_0x4018fe(0x282)],_0x51f052=_0x2bff6a[_0x4018fe(0x2f0)];tgBot['answerCallbackQuery'](_0x2bff6a['id'])['then'](async()=>{const _0x279b74=_0x4018fe;if(_0xdffbdc==_0x279b74(0x2aa)){if(settings[_0x279b74(0x2ec)]==_0x279b74(0x223))tgBot['sendMessage'](_0x51f052['chat']['id'],_0x279b74(0x2b2))['catch'](_0xecc1ff=>{telegramError(_0xecc1ff);});config[_0x279b74(0x1e0)](_0x2cbbe3=>{const _0x124e03=_0x279b74;restartBot(_0x2cbbe3[_0x124e03(0x1ce)]);});}else{if(settings[_0x279b74(0x2ec)]==_0x279b74(0x223))tgBot[_0x279b74(0x1de)](_0x51f052[_0x279b74(0x1cb)]['id'],_0x279b74(0x2ab)+_0xdffbdc)['catch'](_0x56785a=>{telegramError(_0x56785a);});restartBot(_0xdffbdc);}}),tgBot['removeListener'](_0x4018fe(0x279));});}}),tgBot[_0x3c1387(0x21a)](/\/on/,_0x523210=>{const _0x272018=_0x3c1387;if(!validateTelegram(_0x523210))return;tgBot[_0x272018(0x23e)](_0x272018(0x279));const _0x3bd681=getDisabledBots();if(_0x3bd681['length']==0x0)tgBot[_0x272018(0x1de)](_0x523210[_0x272018(0x1cb)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x272018(0x1c0)](_0x55097a=>{telegramError(_0x55097a);});else{if(_0x3bd681[_0x272018(0x1ac)]>0x1)_0x3bd681['push']({'botID':_0x272018(0x2aa)});let _0x421b14=[],_0x44e7f9=[];const _0x1c3801=_0x3bd681[_0x272018(0x1ac)]%0x4==0x0||_0x3bd681[_0x272018(0x1ac)]%0x4==0x3||_0x3bd681[_0x272018(0x1ac)]%0x3==0x1?0x4:0x3;let _0xe316c2=0x0;_0x3bd681[_0x272018(0x1e0)]((_0x4c2f68,_0xadcf06)=>{const _0x453872=_0x272018;if(_0xadcf06%_0x1c3801==0x0)_0x44e7f9=[];_0x44e7f9[_0x453872(0x25b)]({'text':_0x4c2f68[_0x453872(0x1ce)]==_0x453872(0x2aa)?'All\x20bots':'Bot\x20'+_0x4c2f68['botID'],'callback_data':_0x4c2f68['botID']}),_0xadcf06%_0x1c3801==0x0&&(_0x421b14[_0xe316c2]=_0x44e7f9,_0xe316c2++);}),tgBot[_0x272018(0x1de)](_0x523210[_0x272018(0x1cb)]['id'],_0x272018(0x1bf),{'reply_markup':{'inline_keyboard':_0x421b14}})[_0x272018(0x1c0)](_0x5db1ae=>{telegramError(_0x5db1ae);}),tgBot['on']('callback_query',async _0x25e660=>{const _0x58fba4=_0x272018,_0x428790=_0x25e660[_0x58fba4(0x282)],_0xa2232e=_0x25e660[_0x58fba4(0x2f0)];tgBot[_0x58fba4(0x1b9)](_0x25e660['id'])[_0x58fba4(0x276)](async()=>{const _0x369c19=_0x58fba4;if(_0x428790==_0x369c19(0x2aa)){if(settings['telegramEvents']==_0x369c19(0x223))tgBot[_0x369c19(0x1de)](_0xa2232e[_0x369c19(0x1cb)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x369c19(0x1c0)](_0x6d0ba9=>{telegramError(_0x6d0ba9);});_0x3bd681['forEach'](_0x288dad=>{const _0x4b3c8a=_0x369c19;if(_0x288dad[_0x4b3c8a(0x1ce)]!='all')toggleBot(_0x288dad[_0x4b3c8a(0x1ce)],toggleStatus(_0x288dad['botID']),'stopped');});}else{if(settings['telegramEvents']==_0x369c19(0x223))tgBot[_0x369c19(0x1de)](_0xa2232e[_0x369c19(0x1cb)]['id'],_0x369c19(0x261)+_0x428790)['catch'](_0x31cf89=>{telegramError(_0x31cf89);});toggleBot(_0x428790,toggleStatus(_0x428790),_0x369c19(0x29f));}}),tgBot[_0x58fba4(0x23e)](_0x58fba4(0x279));});}}),tgBot[_0x3c1387(0x21a)](/\/off/,_0x49e50d=>{const _0x123fc9=_0x3c1387;if(!validateTelegram(_0x49e50d))return;tgBot['removeListener'](_0x123fc9(0x279));const _0x14f063=getEnabledBots();if(_0x14f063[_0x123fc9(0x1ac)]==0x0)tgBot[_0x123fc9(0x1de)](_0x49e50d[_0x123fc9(0x1cb)]['id'],_0x123fc9(0x1f6))['catch'](_0x5f25a4=>{telegramError(_0x5f25a4);});else{if(_0x14f063['length']>0x1)_0x14f063[_0x123fc9(0x25b)]({'botID':_0x123fc9(0x2aa)});let _0x4b880d=[],_0x25b042=[];const _0x519344=_0x14f063[_0x123fc9(0x1ac)]%0x4==0x0||_0x14f063[_0x123fc9(0x1ac)]%0x4==0x3||_0x14f063[_0x123fc9(0x1ac)]%0x3==0x1?0x4:0x3;let _0x36676=0x0;_0x14f063['forEach']((_0xc70389,_0x52c8fa)=>{const _0x17fe41=_0x123fc9;if(_0x52c8fa%_0x519344==0x0)_0x25b042=[];_0x25b042[_0x17fe41(0x25b)]({'text':_0xc70389[_0x17fe41(0x1ce)]==_0x17fe41(0x2aa)?_0x17fe41(0x217):_0x17fe41(0x26a)+_0xc70389['botID'],'callback_data':_0xc70389[_0x17fe41(0x1ce)]}),_0x52c8fa%_0x519344==0x0&&(_0x4b880d[_0x36676]=_0x25b042,_0x36676++);}),tgBot[_0x123fc9(0x1de)](_0x49e50d[_0x123fc9(0x1cb)]['id'],_0x123fc9(0x1c6),{'reply_markup':{'inline_keyboard':_0x4b880d}})[_0x123fc9(0x1c0)](_0x34ab05=>{telegramError(_0x34ab05);}),tgBot['on']('callback_query',async _0x517c1f=>{const _0x2911e4=_0x123fc9,_0xb4506=_0x517c1f[_0x2911e4(0x282)],_0x3d8514=_0x517c1f[_0x2911e4(0x2f0)];tgBot['answerCallbackQuery'](_0x517c1f['id'])[_0x2911e4(0x276)](async()=>{const _0x59e155=_0x2911e4;if(_0xb4506==_0x59e155(0x2aa)){if(settings[_0x59e155(0x2ec)]==_0x59e155(0x223))tgBot[_0x59e155(0x1de)](_0x3d8514['chat']['id'],_0x59e155(0x1df))[_0x59e155(0x1c0)](_0x175e22=>{telegramError(_0x175e22);});_0x14f063[_0x59e155(0x1e0)](_0x39fbf1=>{const _0x123192=_0x59e155;if(_0x39fbf1['botID']!=_0x123192(0x2aa))toggleBot(_0x39fbf1[_0x123192(0x1ce)],toggleStatus(_0x39fbf1[_0x123192(0x1ce)]),'stopped');});}else{if(settings[_0x59e155(0x2ec)]==_0x59e155(0x223))tgBot[_0x59e155(0x1de)](_0x3d8514['chat']['id'],_0x59e155(0x1f5)+_0xb4506)[_0x59e155(0x1c0)](_0x235b81=>{telegramError(_0x235b81);});toggleBot(_0xb4506,toggleStatus(_0xb4506),_0x59e155(0x29f));}}),tgBot[_0x2911e4(0x23e)]('callback_query');});}}),tgBot[_0x3c1387(0x21a)](/\/disable/,_0x44ede9=>{const _0x439a24=_0x3c1387;if(!validateTelegram(_0x44ede9))return;tgBot['sendMessage'](_0x44ede9[_0x439a24(0x1cb)]['id'],_0x439a24(0x206))[_0x439a24(0x1c0)](_0xabc423=>{telegramError(_0xabc423);}),updateSetting(_0x439a24(0x2f6),![]);}),tgBot['onText'](/\/help/,_0x55881f=>{const _0x238946=_0x3c1387;if(!validateTelegram(_0x55881f))return;tgBot['sendMessage'](_0x55881f[_0x238946(0x1cb)]['id'],_0x5e96b9)[_0x238946(0x1c0)](_0x507cc3=>{telegramError(_0x507cc3);});}),tgBot['on'](_0x3c1387(0x245),_0x2a56f0=>{const _0x4de413=_0x3c1387;_0x2a56f0[_0x4de413(0x1e6)]()['includes'](_0x4de413(0x1e8))&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0x4de413(0x205)](),tgBot=null,io['to'](_0x4de413(0x1fb))['emit'](_0x4de413(0x1ae),_0x4de413(0x225)));}),process['once'](_0x3c1387(0x2cf),()=>{const _0x3004dc=_0x3c1387;if(tgBot)tgBot[_0x3004dc(0x205)]();process[_0x3004dc(0x1e3)](0x1);}),process[_0x3c1387(0x1cc)](_0x3c1387(0x20f),()=>{const _0x4ea26c=_0x3c1387;if(tgBot)tgBot[_0x4ea26c(0x205)]();process[_0x4ea26c(0x1e3)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x2f62c3,_0x227159){const _0x431f27=_0x357299;if(settings[_0x431f27(0x2f6)]){if(settings[_0x431f27(0x2ec)]==_0x431f27(0x2aa)||(_0x227159[_0x431f27(0x2cc)]=='error'||_0x227159[_0x431f27(0x2cc)]==_0x431f27(0x26b))&&settings['telegramEvents']==_0x431f27(0x1b3)||_0x227159[_0x431f27(0x2cc)]==_0x431f27(0x26f)&&settings['telegramEvents']==_0x431f27(0x223)){if(tgBot&&settings['telegramChatId']){if(_0x227159[_0x431f27(0x278)])tgBot['sendMessage'](settings[_0x431f27(0x254)],_0x227159[_0x431f27(0x275)]+_0x431f27(0x272)+_0x227159[_0x431f27(0x2ea)])[_0x431f27(0x1c0)](_0xfba903=>{telegramError(_0xfba903);});else tgBot[_0x431f27(0x1de)](settings[_0x431f27(0x254)],_0x431f27(0x26a)+_0x2f62c3+_0x431f27(0x272)+_0x227159[_0x431f27(0x2ea)])['catch'](_0x371c8d=>{telegramError(_0x371c8d);});}}}}function getDeviceWithIp(_0x156526){const _0x59638c=_0x357299;return devices[_0x59638c(0x211)](_0x54f65e=>_0x54f65e['ip']===_0x156526);}function temporaryAccess2FA(_0x47f110,_0x108363){const _0x2e1f85=_0x357299;let _0x36445a=new Date(),_0x19495d=![];if(lastIpApproval){if(_0x36445a-lastIpApproval<0x1388)_0x19495d=!![];}lastIpApproval=new Date();if(_0x19495d)return;tgBot&&settings[_0x2e1f85(0x254)]&&(tgBot[_0x2e1f85(0x23e)](_0x2e1f85(0x279)),tgBot['sendMessage'](settings[_0x2e1f85(0x254)],_0x2e1f85(0x203)+normalizeIP(_0x108363)[_0x2e1f85(0x1ca)]+'</b>\x20?',{'parse_mode':_0x2e1f85(0x23a),'reply_markup':{'inline_keyboard':[[{'text':_0x2e1f85(0x2eb),'callback_data':'5'},{'text':_0x2e1f85(0x2d7),'callback_data':'15'},{'text':_0x2e1f85(0x2c6),'callback_data':'30'},{'text':'reject','callback_data':_0x2e1f85(0x28d)}]]}})[_0x2e1f85(0x1c0)](_0x1e8652=>{telegramError(_0x1e8652);}),tgBot['on'](_0x2e1f85(0x279),async _0x23ef27=>{const _0x142d5f=_0x2e1f85,_0x4bd30a=_0x23ef27['data'],_0x3c6cad=_0x23ef27[_0x142d5f(0x2f0)];tgBot['answerCallbackQuery'](_0x23ef27['id'])[_0x142d5f(0x276)](async()=>{const _0x501a9b=_0x142d5f;devices[_0x47f110]['telegramIpApproval']={'clientip':_0x108363,'timestamp':new Date()['getTime'](),'expiry':_0x4bd30a},_0x4bd30a!='reject'?(await tgBot[_0x501a9b(0x1de)](_0x3c6cad['chat']['id'],_0x501a9b(0x2a4)+_0x4bd30a+'\x20minutes',{'parse_mode':_0x501a9b(0x23a)})[_0x501a9b(0x1c0)](_0x1e3fa7=>{telegramError(_0x1e3fa7);}),io['to'](_0x47f110)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x501a9b(0x1de)](_0x3c6cad['chat']['id'],_0x501a9b(0x2ca))[_0x501a9b(0x1c0)](_0x5ba2b7=>{telegramError(_0x5ba2b7);}),io['to'](_0x47f110)[_0x501a9b(0x224)](_0x501a9b(0x244),{'access':{'allow':![],'reason':_0x501a9b(0x238),'token':null}}));}),tgBot[_0x142d5f(0x23e)]('callback_query');}));}function loginAccess2FA(_0xa32f31,_0x12e38e){const _0x3a6c85=_0x357299;tgBot&&settings['telegramChatId']&&(tgBot[_0x3a6c85(0x23e)]('callback_query'),tgBot['sendMessage'](settings[_0x3a6c85(0x254)],_0x3a6c85(0x2e6)+normalizeIP(_0x12e38e)[_0x3a6c85(0x1ca)]+'</b>\x20?',{'parse_mode':_0x3a6c85(0x23a),'reply_markup':{'inline_keyboard':[[{'text':_0x3a6c85(0x1dc),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x3a6c85(0x28d)}]]}})['catch'](_0x16bbed=>{telegramError(_0x16bbed);}),tgBot['on'](_0x3a6c85(0x279),async _0xdbdecd=>{const _0x143447=_0x3a6c85,_0x49ecca=_0xdbdecd[_0x143447(0x282)],_0x1f9fd6=_0xdbdecd['message'];tgBot['answerCallbackQuery'](_0xdbdecd['id'])[_0x143447(0x276)](async()=>{const _0x55c6c2=_0x143447;devices[_0xa32f31][_0x55c6c2(0x257)]={'clientip':_0x12e38e,'timestamp':new Date()['getTime'](),'expiry':_0x49ecca},_0x49ecca!='reject'?(await tgBot[_0x55c6c2(0x1de)](_0x1f9fd6['chat']['id'],_0x55c6c2(0x242),{'parse_mode':'HTML'})[_0x55c6c2(0x1c0)](_0x11f95c=>{telegramError(_0x11f95c);}),io['to'](_0xa32f31)['emit'](_0x55c6c2(0x244),{'access':{'allow':![],'reason':_0x55c6c2(0x2e2),'token':null}})):(await tgBot[_0x55c6c2(0x1de)](_0x1f9fd6[_0x55c6c2(0x1cb)]['id'],'Login\x20rejected')[_0x55c6c2(0x1c0)](_0x53c690=>{telegramError(_0x53c690);}),io['to'](_0xa32f31)[_0x55c6c2(0x224)]('status',{'access':{'allow':![],'reason':_0x55c6c2(0x2db),'token':null}}));}),tgBot[_0x143447(0x23e)]('callback_query');}));}function getConfiguration(){const _0x456616=_0x357299;return dbConfig[_0x456616(0x2fb)]('bots')[_0x456616(0x1ed)]('botID')[_0x456616(0x215)]()||[];}function getEnabledBots(){const _0x364e0c=_0x357299;return dbConfig['get'](_0x364e0c(0x1ab))[_0x364e0c(0x1ed)](_0x364e0c(0x1ce))[_0x364e0c(0x2dc)]({'status':_0x364e0c(0x1b7)})[_0x364e0c(0x215)]()||[];}function getDisabledBots(){const _0x1e95e7=_0x357299;return dbConfig[_0x1e95e7(0x2fb)](_0x1e95e7(0x1ab))[_0x1e95e7(0x1ed)](_0x1e95e7(0x1ce))[_0x1e95e7(0x2dc)]({'status':_0x1e95e7(0x222)})[_0x1e95e7(0x215)]()||[];}function getSettings(){const _0x16ae2c=_0x357299;return dbSettings[_0x16ae2c(0x2fb)](_0x16ae2c(0x255))['value']()||{'timeshift':0x0};}function getSecure(){const _0x34fa5f=_0x357299;return dbSecure[_0x34fa5f(0x2fb)](_0x34fa5f(0x293))['value']()||{};}function getBlacklist(){const _0x302060=_0x357299;return dbSecure[_0x302060(0x2fb)]('blacklist')[_0x302060(0x215)]()||[];}function broadcastToBots(_0x559e63,_0x40e573){config['forEach'](_0x5e2a83=>{const _0x4e64f8=_0x52c7;if(_0x5e2a83[_0x4e64f8(0x244)]==_0x4e64f8(0x1b7)&&_0x5e2a83[_0x4e64f8(0x200)]==_0x4e64f8(0x1e4)){if(pid[_0x5e2a83[_0x4e64f8(0x1ce)]])pid[_0x5e2a83['botID']][_0x4e64f8(0x23c)]({[_0x559e63]:_0x40e573});}});}function storeSettings(_0x1b67cb,_0x474b1b=![]){const _0x35a499=_0x357299;_0x1b67cb={...settings,..._0x1b67cb};if(_0x474b1b&&_0x1b67cb['bbPassword']!=_0x35a499(0x1fc)&&_0x1b67cb['bbPassword']!=''){const _0x3e69d0=crypt[_0x35a499(0x1ff)](secure['privateKey'],_0x1b67cb[_0x35a499(0x235)])[_0x35a499(0x2f0)]['split']('@')[0x0],_0x2cf629=bcrypt[_0x35a499(0x1b6)](_0x3e69d0,saltRounds);_0x1b67cb={..._0x1b67cb,'bbPassword':_0x2cf629};}if(_0x474b1b&&_0x1b67cb[_0x35a499(0x230)]!=_0x35a499(0x1fc)&&_0x1b67cb['telegramToken']!=''){const _0x45a7ee=crypt[_0x35a499(0x1ff)](secure['privateKey'],_0x1b67cb['telegramToken'])['message'][_0x35a499(0x1d6)]('@')[0x0];_0x1b67cb={..._0x1b67cb,'telegramToken':_0x45a7ee};}const _0x23aa69=_0x1b67cb['telegramToken']!=_0x35a499(0x1fc)&&_0x1b67cb[_0x35a499(0x230)]!=settings[_0x35a499(0x230)]||_0x1b67cb[_0x35a499(0x21f)]!=settings[_0x35a499(0x21f)],_0x25be89=_0x1b67cb[_0x35a499(0x230)]==''||_0x1b67cb[_0x35a499(0x21f)]=='';if(_0x23aa69)_0x1b67cb[_0x35a499(0x2ec)]=_0x35a499(0x2aa);for(const [_0x7d59e2,_0x5d4085]of Object[_0x35a499(0x1f8)](_0x1b67cb)){if(_0x7d59e2==_0x35a499(0x230)&&_0x5d4085=='************'){_0x1b67cb[_0x35a499(0x230)]=settings['telegramToken'];continue;};if(_0x7d59e2==_0x35a499(0x235)&&_0x5d4085==_0x35a499(0x1fc)){_0x1b67cb[_0x35a499(0x235)]=settings[_0x35a499(0x235)];continue;};dbSettings['set']('settings.'+_0x7d59e2,_0x5d4085)[_0x35a499(0x250)]();}settings=_0x1b67cb,io['to']('botmanager')[_0x35a499(0x224)](_0x35a499(0x255),cleanSettings()),broadcastToBots(_0x35a499(0x270),settings[_0x35a499(0x270)]);if(_0x23aa69&&!_0x25be89)initTelegram();if(_0x23aa69&&_0x25be89)disableTelegram();getAllClients()[_0x35a499(0x1e0)](_0x40fd75=>{const _0x1c5ee3=_0x35a499;getSocket(_0x40fd75['id'])[_0x1c5ee3(0x224)](_0x1c5ee3(0x244),{'access':{'allow':![],'reason':_0x1c5ee3(0x2e2),'token':null}});});}function updateSetting(_0x191c3b,_0x1e524a){const _0x564528=_0x357299;dbSettings['set'](_0x564528(0x23d)+_0x191c3b,_0x1e524a)['write'](),settings=getSettings(),io['to'](_0x564528(0x1fb))[_0x564528(0x224)]('settings',cleanSettings());}function storeSecure(_0x355c09){const _0x5e103b=_0x357299;dbSecure[_0x5e103b(0x2fb)](_0x5e103b(0x293))[_0x5e103b(0x25b)](_0x355c09)[_0x5e103b(0x250)](),secure=_0x355c09;}function addBlacklist(_0x3559fd){const _0x49c362=_0x357299;cleanBlacklist();let _0x514a50;devices[_0x3559fd]['telegramIpApproval']?_0x514a50=Math['max'](devices[_0x3559fd][_0x49c362(0x1f0)]['expiry'],loginExpiry):_0x514a50=loginExpiry,dbSecure[_0x49c362(0x2fb)](_0x49c362(0x204))[_0x49c362(0x25b)]({'expiry':new Date()[_0x49c362(0x28e)]()+_0x514a50*0x3c*0x3e8,'token':devices[_0x3559fd]['access'][_0x49c362(0x2c9)]})['write'](),blacklist=dbSecure['get'](_0x49c362(0x204))['value']();}function cleanBlacklist(){const _0x3961fb=_0x357299;let _0x2f1b29=dbSecure[_0x3961fb(0x2fb)](_0x3961fb(0x204))['cloneDeep']()[_0x3961fb(0x215)](),_0x5bf8b3=new Date()[_0x3961fb(0x28e)]();_0x2f1b29['forEach'](_0x39e7ce=>{const _0x328a79=_0x3961fb;_0x39e7ce['expiry']<_0x5bf8b3&&dbSecure[_0x328a79(0x2fb)](_0x328a79(0x204))[_0x328a79(0x2bc)]({'expiry':_0x39e7ce[_0x328a79(0x2ad)]})[_0x328a79(0x250)]();});}function initStates(){const _0x3fef28=_0x357299;let _0x169f75=getConfiguration();_0x169f75[_0x3fef28(0x1e0)](_0x1a1515=>{const _0x37cca5=_0x3fef28;_0x1a1515[_0x37cca5(0x200)]=_0x37cca5(0x29f);}),storeConfiguration(_0x169f75);}function onKeys(){const _0x4dcbca=new RSA();return new Promise(_0x176a90=>{const _0x19abb9=_0x52c7;_0x4dcbca[_0x19abb9(0x212)]()[_0x19abb9(0x276)](_0x5cdb31=>{_0x176a90(_0x5cdb31);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5d9502=_0x357299;let _0x3bf2c7=getConfiguration(),_0xc309c0=![];_0x3bf2c7[_0x5d9502(0x1e0)](_0x5a1929=>{const _0x30b801=_0x5d9502;if(_0x5a1929['status']=='running')_0x5a1929['status']=_0x30b801(0x1b7),_0xc309c0=!![];else _0x5a1929[_0x30b801(0x244)]=='stopped'&&(_0x5a1929['status']=_0x30b801(0x222),_0xc309c0=!![]);});if(_0xc309c0)storeConfiguration(_0x3bf2c7);let _0x4cbab2=getSecure();if(!_0x4cbab2[_0x5d9502(0x29e)](_0x5d9502(0x1dd))){let _0x293ea0=await generateKeys();_0x4cbab2['publicKey']=_0x293ea0[_0x5d9502(0x2c0)],_0x4cbab2['privateKey']=_0x293ea0[_0x5d9502(0x1e7)],_0x4cbab2[_0x5d9502(0x1dd)]=crypto[_0x5d9502(0x2f3)](0x20)[_0x5d9502(0x1e6)](_0x5d9502(0x2af));;storeSecure(_0x4cbab2);}let _0x436d47=getSettings();_0xc309c0=![];!_0x436d47[_0x5d9502(0x29e)]('loginRequired')&&(_0x436d47[_0x5d9502(0x1f3)]=![],_0x436d47[_0x5d9502(0x2c8)]='',_0x436d47[_0x5d9502(0x235)]='',_0x436d47['f2aRequired']=![],_0xc309c0=!![]);!_0x436d47[_0x5d9502(0x29e)](_0x5d9502(0x1be))&&(_0x436d47[_0x5d9502(0x1be)]=![],_0x436d47[_0x5d9502(0x1c3)]=[],_0x436d47[_0x5d9502(0x1bd)]=![],_0xc309c0=!![]);if(!_0x436d47['hasOwnProperty'](_0x5d9502(0x2f6))){if(_0x436d47[_0x5d9502(0x254)])_0x436d47[_0x5d9502(0x2f6)]=!![];else _0x436d47[_0x5d9502(0x2f6)]=![];_0xc309c0=!![];}if(_0xc309c0)storeSettings(_0x436d47);}function storeConfiguration(_0x5a5699){const _0x1287d9=_0x357299;dbConfig['get'](_0x1287d9(0x1ab))['remove']()[_0x1287d9(0x250)](),dbConfig['get'](_0x1287d9(0x1ab))[_0x1287d9(0x25b)](..._0x5a5699)['write'](),config=_0x5a5699;}function resetPassword(){const _0x30ca6a=_0x357299;tgBot&&settings[_0x30ca6a(0x254)]&&(tgBot['removeListener'](_0x30ca6a(0x279)),tgBot[_0x30ca6a(0x1de)](settings[_0x30ca6a(0x254)],_0x30ca6a(0x262),{'parse_mode':_0x30ca6a(0x23a),'reply_markup':{'inline_keyboard':[[{'text':_0x30ca6a(0x28b),'callback_data':_0x30ca6a(0x28b)},{'text':'no','callback_data':'no'}]]}})['catch'](_0xf9569d=>{telegramError(_0xf9569d);}),tgBot['on']('callback_query',async _0x3e0d38=>{const _0x416aed=_0x30ca6a,_0x55d4e8=_0x3e0d38[_0x416aed(0x282)],_0x206d18=_0x3e0d38[_0x416aed(0x2f0)];tgBot[_0x416aed(0x1b9)](_0x3e0d38['id'])['then'](async()=>{const _0x498443=_0x416aed;if(_0x55d4e8!='no'){const _0xfef062=0xf,_0x186c77=_0x498443(0x24e),_0x3cb3dd=Array[_0x498443(0x20d)](crypto[_0x498443(0x2ef)](new Uint32Array(_0xfef062)))[_0x498443(0x281)](_0x3a520f=>_0x186c77[_0x3a520f%_0x186c77['length']])[_0x498443(0x1d7)](''),_0x1a9537=bcrypt['hashSync'](_0x3cb3dd,saltRounds);storeSettings({'bbPassword':_0x1a9537}),await tgBot['sendMessage'](_0x206d18[_0x498443(0x1cb)]['id'],_0x498443(0x1e1)+_0x3cb3dd,{'parse_mode':_0x498443(0x23a)})[_0x498443(0x1c0)](_0x56c55a=>{telegramError(_0x56c55a);});}else await tgBot['sendMessage'](_0x206d18[_0x498443(0x1cb)]['id'],_0x498443(0x2f9))['catch'](_0x697f5e=>{telegramError(_0x697f5e);});}),tgBot[_0x416aed(0x23e)](_0x416aed(0x279));}));}function logging(_0x4cb92d){const _0x12ddcd=_0x357299;console[_0x12ddcd(0x1d5)](getTimeStamp()+_0x12ddcd(0x247)+_0x4cb92d);if(tgBot&&settings[_0x12ddcd(0x254)]&&settings[_0x12ddcd(0x2ec)]!=_0x12ddcd(0x223))tgBot[_0x12ddcd(0x1de)](settings['telegramChatId'],_0x12ddcd(0x213)+_0x4cb92d)['catch'](_0x4c4852=>{telegramError(_0x4c4852);});}function getServerTime(){const _0x20c065=_0x357299,_0x4a7ecd=new Date();return _0x4a7ecd['getFullYear']()+'/'+(_0x4a7ecd[_0x20c065(0x2e7)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x4a7ecd[_0x20c065(0x22a)]()[_0x20c065(0x1e6)]()['padStart'](0x2,'0')+'\x20'+_0x4a7ecd[_0x20c065(0x20a)]()['toString']()[_0x20c065(0x2e3)](0x2,'0')+':'+_0x4a7ecd[_0x20c065(0x2f4)]()[_0x20c065(0x1e6)]()[_0x20c065(0x2e3)](0x2,'0')+':'+_0x4a7ecd['getSeconds']()[_0x20c065(0x1e6)]()[_0x20c065(0x2e3)](0x2,'0');}function getTimeStamp(){const _0x5bcf8a=_0x357299,_0x5b2de1=shiftedTime();return _0x5b2de1[_0x5bcf8a(0x2c2)]()+'/'+(_0x5b2de1[_0x5bcf8a(0x2e7)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5b2de1[_0x5bcf8a(0x22a)]()[_0x5bcf8a(0x1e6)]()[_0x5bcf8a(0x2e3)](0x2,'0')+'\x20'+_0x5b2de1[_0x5bcf8a(0x20a)]()['toString']()[_0x5bcf8a(0x2e3)](0x2,'0')+':'+_0x5b2de1['getMinutes']()[_0x5bcf8a(0x1e6)]()[_0x5bcf8a(0x2e3)](0x2,'0')+':'+_0x5b2de1[_0x5bcf8a(0x26d)]()[_0x5bcf8a(0x1e6)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x14500e=_0x357299,_0x194ba9=new Date();let _0x42d496=_0x194ba9;if(settings[_0x14500e(0x270)]&&settings[_0x14500e(0x270)]!==0x0)_0x42d496=fns[_0x14500e(0x280)](_0x194ba9,{'hours':settings[_0x14500e(0x270)]});return _0x42d496;}function startScheduler(){let _0x2345d8=new Date()['getUTCHours']();_0x2345d8==0x1&&backupConfigFiles();_0x2345d8==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x33adc8=>{const _0x3f5ee6=_0x52c7;if(!_0x33adc8[_0x3f5ee6(0x2d1)]())fs[_0x3f5ee6(0x248)](configpath+_0x33adc8[_0x3f5ee6(0x22e)],configbackuppath+_0x33adc8[_0x3f5ee6(0x22e)]);});}function triggerAnalytics(){const _0x3d58fe=_0x357299;analytics['page']({'title':_0x3d58fe(0x2e0),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x33b3b4,_0x29742b){const _0x4698ba=_0x357299;if(_0x33b3b4[_0x4698ba(0x239)]==settings[_0x4698ba(0x2c8)]&&bcrypt[_0x4698ba(0x1ee)](_0x33b3b4['password'],settings[_0x4698ba(0x235)])){if(settings[_0x4698ba(0x1ec)])return{'allow':![],'reason':_0x4698ba(0x210),'token':null};else{const _0x4973be=generateLoginToken(_0x29742b);return{'allow':!![],'reason':_0x4698ba(0x253),'token':_0x4973be};}}else return{'allow':![],'reason':_0x4698ba(0x291),'token':null};}function refreshToken(_0x2072b7){const _0x47ae2b=_0x357299,_0x58df3f=generateLoginToken(_0x2072b7);return{'allow':!![],'reason':_0x47ae2b(0x253),'token':_0x58df3f};}function validateAccess(_0x1bbf16,_0x1b802e){const _0x3b76b3=_0x357299;let _0x4bec7f=devices[_0x1b802e]['ip'],_0x200212;const _0x2e7c34=_0x536a6=>{const _0x37112f=_0x52c7;if(settings[_0x37112f(0x1f3)]){if(settings[_0x37112f(0x1ec)]){if(telegram2FaApproved(_0x1b802e)){const _0x157218=generateLoginToken(_0x1b802e);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x157218};}else return{'allow':![],'reason':_0x37112f(0x24a),'token':null};}else return _0x200212=validToken(_0x536a6,_0x1b802e),_0x200212[_0x37112f(0x29e)]('success')?{'allow':!![],'reason':_0x37112f(0x1ad),'token':_0x536a6}:{'allow':![],'reason':_0x37112f(0x24a),'token':null};}else return{'allow':!![],'reason':_0x37112f(0x27a),'token':null};};if(settings[_0x3b76b3(0x1be)]){let _0x910f32=[...settings['whitelist'],_0x3b76b3(0x1c4),_0x3b76b3(0x1fe),_0x3b76b3(0x274)];if(_0x910f32[_0x3b76b3(0x2c3)](_0x4bec7f))return _0x2e7c34(_0x1bbf16);else{_0x200212=validToken(_0x1bbf16,_0x1b802e);if(_0x200212[_0x3b76b3(0x29e)](_0x3b76b3(0x26b)))return _0x2e7c34(_0x1bbf16);else{if(telegramIpApproved(_0x1b802e)){const _0x2101d0=generateToken(_0x1b802e);return _0x200212=_0x2e7c34(_0x1bbf16),_0x200212[_0x3b76b3(0x258)]?{'allow':!![],'reason':_0x3b76b3(0x1d2),'token':_0x2101d0}:_0x200212;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x3b76b3(0x20c),'token':null}:{'allow':![],'reason':_0x3b76b3(0x21d),'token':null};}}}else return _0x2e7c34(_0x1bbf16);}function timelyDecrypt(_0x37d436,_0x23c8de=!![]){const _0x25f4a5=_0x357299;if(_0x37d436)try{const _0x5cf2ab=crypt[_0x25f4a5(0x1ff)](secure['privateKey'],_0x37d436)[_0x25f4a5(0x2f0)],_0x4e11b3=_0x5cf2ab[_0x25f4a5(0x1d6)]('@')[0x0],_0x2d5909=_0x5cf2ab[_0x25f4a5(0x1d6)]('@')[0x1],_0x4b82ae=new Date()[_0x25f4a5(0x28e)]();if(_0x23c8de){if(_0x4b82ae-_0x2d5909<maxSecretAge*0x3e8)return _0x4e11b3;else return![];}else return _0x4e11b3;}catch(_0x3941a2){return![];}else return![];}const validToken=(_0x42ace5,_0x5be8d0)=>{const _0x51f21f=_0x357299,_0x97a63f=devices[_0x5be8d0]['ip'];if(!_0x42ace5)return{'error':_0x51f21f(0x284)};for(let _0x231e32 of blacklist){if(_0x231e32[_0x51f21f(0x2c9)]==_0x42ace5)return{'error':_0x51f21f(0x2bd)};}let _0x4addbc;try{_0x4addbc=jwt[_0x51f21f(0x1db)](_0x42ace5,secure[_0x51f21f(0x1dd)]+_0x5be8d0);}catch{return{'error':_0x51f21f(0x24d)};}if(!_0x4addbc['hasOwnProperty'](_0x51f21f(0x1bb))&&!_0x4addbc['hasOwnProperty'](_0x51f21f(0x239))||!_0x4addbc[_0x51f21f(0x29e)](_0x51f21f(0x2a0)))return{'error':_0x51f21f(0x2cb)};if(!_0x4addbc['hasOwnProperty'](_0x51f21f(0x239))&&_0x4addbc[_0x51f21f(0x29e)]('clientip')){const {clientip:_0x4f45cf}=_0x4addbc;return _0x97a63f==_0x4f45cf?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4addbc[_0x51f21f(0x29e)](_0x51f21f(0x239))&&_0x4addbc[_0x51f21f(0x29e)](_0x51f21f(0x1bb))){const {username:_0x12b649,clientip:_0x461943}=_0x4addbc;return settings['bbUsername']==_0x12b649&&_0x97a63f==_0x461943?{'success':_0x51f21f(0x286)}:{'error':_0x51f21f(0x2a7)};}}},generateLoginToken=_0x139596=>{if(_0x139596){const _0x23ed92=devices[_0x139596]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x23ed92},secure['secret']+_0x139596,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4ded1b=>{if(_0x4ded1b){const _0x5ec39a=devices[_0x4ded1b]['ip'];return jwt['sign']({'clientip':_0x5ec39a},secure['secret']+_0x4ded1b,{'expiresIn':devices[_0x4ded1b]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x4a4842=>{const _0x59a6f2=_0x357299;let _0x25b1cd=![];return devices[_0x4a4842][_0x59a6f2(0x1f0)]&&devices[_0x4a4842][_0x59a6f2(0x1f0)][_0x59a6f2(0x2ad)]!='reject'&&(_0x25b1cd=devices[_0x4a4842]['telegramIpApproval'][_0x59a6f2(0x1bb)]==devices[_0x4a4842]['ip']&&new Date()[_0x59a6f2(0x28e)]()-devices[_0x4a4842][_0x59a6f2(0x1f0)][_0x59a6f2(0x231)]<devices[_0x4a4842][_0x59a6f2(0x1f0)][_0x59a6f2(0x2ad)]*0x3c*0x3e8),_0x25b1cd;},telegram2FaApproved=_0x14062a=>{const _0x58592f=_0x357299;let _0x4ab1bf=![];return devices[_0x14062a][_0x58592f(0x257)]&&devices[_0x14062a][_0x58592f(0x257)][_0x58592f(0x2ad)]!=_0x58592f(0x28d)&&(_0x4ab1bf=devices[_0x14062a][_0x58592f(0x257)]['clientip']==devices[_0x14062a]['ip']&&new Date()[_0x58592f(0x28e)]()-devices[_0x14062a][_0x58592f(0x257)]['timestamp']<devices[_0x14062a]['telegram2FaApproval'][_0x58592f(0x2ad)]*0x3c*0x3e8),_0x4ab1bf;},normalizeIP=_0x18c4e7=>{const _0x531201=_0x357299;let _0x4fe955=null,_0x4efac6=null;if(ipaddr[_0x531201(0x208)](_0x18c4e7)){const _0x3cf07a=ipaddr[_0x531201(0x2be)](_0x18c4e7);_0x3cf07a[_0x531201(0x1d3)]()===_0x531201(0x207)?(_0x3cf07a[_0x531201(0x2e4)]()&&(_0x4fe955=_0x3cf07a[_0x531201(0x299)]()['toString']()),_0x4efac6=_0x3cf07a[_0x531201(0x1e6)]()):(_0x4fe955=_0x3cf07a[_0x531201(0x1e6)](),_0x4efac6=_0x3cf07a['toIPv4MappedAddress']()[_0x531201(0x1e6)]());}return{'show':_0x4fe955?_0x4fe955:_0x4efac6,'store':_0x4efac6};};