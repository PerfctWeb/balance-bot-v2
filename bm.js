const _0x400b85=_0x4047;(function(_0x218dc7,_0x105758){const _0x5aace6=_0x4047,_0x103c84=_0x218dc7();while(!![]){try{const _0x531ee8=parseInt(_0x5aace6(0x237))/0x1+-parseInt(_0x5aace6(0x2ba))/0x2+-parseInt(_0x5aace6(0x1a3))/0x3*(-parseInt(_0x5aace6(0x19b))/0x4)+-parseInt(_0x5aace6(0x1b6))/0x5+parseInt(_0x5aace6(0x2a4))/0x6*(-parseInt(_0x5aace6(0x276))/0x7)+-parseInt(_0x5aace6(0x326))/0x8*(parseInt(_0x5aace6(0x325))/0x9)+parseInt(_0x5aace6(0x24a))/0xa*(parseInt(_0x5aace6(0x2b3))/0xb);if(_0x531ee8===_0x105758)break;else _0x103c84['push'](_0x103c84['shift']());}catch(_0xeec8b3){_0x103c84['push'](_0x103c84['shift']());}}}(_0x1f38,0x21c54));const _0x2355aa=function(){let _0x4f5cf8=!![];return function(_0x41951d,_0x303f7f){const _0x271707=_0x4f5cf8?function(){const _0x2494a8=_0x4047;if(_0x303f7f){const _0x58dd4b=_0x303f7f[_0x2494a8(0x214)](_0x41951d,arguments);return _0x303f7f=null,_0x58dd4b;}}:function(){};return _0x4f5cf8=![],_0x271707;};}(),_0x8e5687=_0x2355aa(this,function(){const _0xcce6b4=_0x4047;return _0x8e5687[_0xcce6b4(0x206)]()[_0xcce6b4(0x231)](_0xcce6b4(0x30b))[_0xcce6b4(0x206)]()[_0xcce6b4(0x336)](_0x8e5687)[_0xcce6b4(0x231)](_0xcce6b4(0x30b));});_0x8e5687();'use strict';process[_0x400b85(0x173)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x400b85(0x2ee)),fs=require('fs'),fns=require(_0x400b85(0x1ae)),low=require(_0x400b85(0x1d5)),FileSync=require(_0x400b85(0x1de)),path=require('path'),crypto=require(_0x400b85(0x2c2)),Crypt=require('hybrid-crypto-js')[_0x400b85(0x27c)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x400b85(0x2ff)),jwt=require('jsonwebtoken'),ipaddr=require(_0x400b85(0x262)),argv=require(_0x400b85(0x1e7))(process[_0x400b85(0x251)][_0x400b85(0x244)](0x2))[_0x400b85(0x251)],uuidRandom=require('uuid-random'),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require('mixpanel'),axios=require(_0x400b85(0x1ac)),{GraphQLClient,gql}=require(_0x400b85(0x203)),util=require(_0x400b85(0x1a4)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x400b85(0x1e1)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x400b85(0x1bb)](_0x400b85(0x213)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x400b85(0x308)](0x1));const HOST=argv[_0x400b85(0x1fa)]||null,userID=argv[_0x400b85(0x2db)]||'',debugging=argv['d']||![],nodeversion=process[_0x400b85(0x236)][_0x400b85(0x228)];let bbpath=_0x400b85(0x22f),bbpath2='';const botfile=_0x400b85(0x17a),configfile=_0x400b85(0x248),settingsfile=_0x400b85(0x234),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x400b85(0x25b))[_0x400b85(0x21c)]||'production',maxBackups=0xa;let validInstallation=!![];!fs[_0x400b85(0x26b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x400b85(0x2ef)),configpath=userID?bbpath+_0x400b85(0x1c6)+userID+'/':bbpath+_0x400b85(0x1c6),configbackuppath=configpath+_0x400b85(0x274),logspath=userID?bbpath+_0x400b85(0x32d)+userID+'/':bbpath+_0x400b85(0x32d),zippath=userID?bbpath+_0x400b85(0x1d9)+userID+'/':bbpath+_0x400b85(0x1d9),loggerfile=fs['createWriteStream'](logspath+_0x400b85(0x2da),{'flags':'a'}),temppath=userID?bbpath+_0x400b85(0x2a2)+userID+'/':bbpath+_0x400b85(0x2a2);!fs[_0x400b85(0x26b)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x400b85(0x289)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x400b85(0x289)](logspath);!fs[_0x400b85(0x26b)](zippath)&&fs[_0x400b85(0x289)](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x400b85(0x1cc)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x400b85(0x299),'onepagemode':![]}})[_0x400b85(0x2aa)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x400b85(0x1cc)]({'secure':{},'blacklist':[]})[_0x400b85(0x2aa)]();let crypt=new Crypt({'md':_0x400b85(0x19f),'rsaStandard':_0x400b85(0x260)});const saltRounds=0xa,mixpanel=Mixpanel[_0x400b85(0x17e)](_0x400b85(0x2a8),{'host':_0x400b85(0x2c1)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x400b85(0x1c2)]!=''&&settings[_0x400b85(0x1b8)]&&settings[_0x400b85(0x1b8)]!='')initTelegram();const parseColor=(_0x1544b7,_0x417cd4)=>{const _0x3e9513=_0x400b85,_0x23a0bb=/#[A-Z]{3}#/g;if(typeof _0x1544b7=='string'){!_0x417cd4?_0x1544b7=_0x1544b7[_0x3e9513(0x210)](_0x23a0bb,''):(_0x1544b7=_0x1544b7[_0x3e9513(0x210)](/#BLU#/g,_0x3e9513(0x232)),_0x1544b7=_0x1544b7[_0x3e9513(0x210)](/#RED#/g,_0x3e9513(0x1d7)),_0x1544b7=_0x1544b7['replace'](/#YEL#/g,'\x1b[33m'),_0x1544b7=_0x1544b7[_0x3e9513(0x210)](/#MAG#/g,_0x3e9513(0x2c5)),_0x1544b7=_0x1544b7[_0x3e9513(0x210)](/#CYA#/g,_0x3e9513(0x252)),_0x1544b7=_0x1544b7[_0x3e9513(0x210)](/#RES#/g,_0x3e9513(0x2fa)));;}return _0x1544b7;},logger={'screen':_0xfaee6c=>{console['log'](parseColor(_0xfaee6c,!![]));},'simple':_0x4d5471=>{const _0x1edf56=_0x400b85;console[_0x1edf56(0x1bb)](parseColor(_0x4d5471,!![])),loggerfile[_0x1edf56(0x2aa)](util[_0x1edf56(0x1e4)](parseColor(_0x4d5471,![]))+'\x0a');},'full':async _0x46ce79=>{const _0x522624=_0x400b85,_0x24adb6=getTimeStamp()+_0x522624(0x334)+_0x46ce79;console[_0x522624(0x1bb)](parseColor(_0x24adb6,!![])),loggerfile[_0x522624(0x2aa)](util[_0x522624(0x1e4)](parseColor(_0x24adb6,![]))+'\x0a');if(tgBot&&settings[_0x522624(0x270)]&&settings[_0x522624(0x24b)]!=_0x522624(0x303))await tgBot[_0x522624(0x24c)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+parseColor(_0x46ce79,![]))[_0x522624(0x2c0)](_0x3efd1c=>{telegramError(_0x3efd1c);});},'debug':async(_0x40a1b8,_0x4b632f='')=>{const _0x313f1b=_0x400b85,_0x482454=getTimeStamp()+_0x313f1b(0x18a)+_0x40a1b8;if(debugging)console[_0x313f1b(0x1bb)](parseColor(_0x482454,!![]));loggerfile[_0x313f1b(0x2aa)](util[_0x313f1b(0x1e4)](parseColor(_0x482454,![]))+'\x0a');if(_0x4b632f){if(debugging)console['log'](_0x4b632f);loggerfile[_0x313f1b(0x2aa)](util[_0x313f1b(0x1e4)](_0x4b632f)+'\x0a');}}};process['on'](_0x400b85(0x29b),function(_0x161131){const _0x9daa20=_0x400b85;logger[_0x9daa20(0x177)](_0x161131);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x400b85(0x25b))[_0x400b85(0x18b)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x400b85(0x2d7))['createServer'](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x400b85(0x19c),async(_0xed329c,_0x2998ff)=>{const _0x1324bb=_0x400b85,_0x177998=_0xed329c[_0x1324bb(0x301)]['type'],_0x3dbbcc=getClientsWithBotID('botmanager'),_0xc1464b=_0xed329c[_0x1324bb(0x1fb)]['uuid'],_0x70a1db=timelyDecrypt(_0xc1464b,![]),_0x34f762=_0x3dbbcc[_0x1324bb(0x29c)](_0x5946cf=>_0x5946cf[_0x1324bb(0x2f8)]==_0x70a1db);if(_0x34f762){const _0x21fda3=normalizeIP(_0xed329c['socket'][_0x1324bb(0x196)])[_0x1324bb(0x30e)],_0xe46e3e=_0xed329c['headers']['tkn'];if(validateAccess(_0xe46e3e,_0x70a1db,_0x21fda3)[_0x1324bb(0x218)])_0x177998=='backup'&&await backupConfigFiles(),await zipFiles(_0x177998),_0x2998ff[_0x1324bb(0x2fd)](zippath+(_0x177998+_0x1324bb(0x2f4)),_0x55e892=>{const _0x4f8c4c=_0x1324bb;_0x55e892&&(logger['full'](_0x4f8c4c(0x1b1)+_0x177998),logger['simple'](_0x55e892));});else logger[_0x1324bb(0x20f)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x177998+_0x1324bb(0x31a));}else logger['full'](_0x1324bb(0x1d3)+_0x177998+_0x1324bb(0x2c4));}),app['post'](_0x400b85(0x2a9),async(_0x5d7b80,_0x2b713c)=>{const _0x120413=_0x400b85,_0x159e4f=getClientsWithBotID('botmanager'),_0x330b45=_0x5d7b80['headers'][_0x120413(0x2f8)],_0x5b6037=timelyDecrypt(_0x330b45,![]),_0x4ab758=_0x159e4f['find'](_0x1480fb=>_0x1480fb[_0x120413(0x2f8)]==_0x5b6037);logger['debug'](_0x120413(0x2a3));if(_0x4ab758){const _0xfaf1dd=normalizeIP(_0x5d7b80[_0x120413(0x23f)][_0x120413(0x196)])[_0x120413(0x30e)],_0x342c87=_0x5d7b80['headers'][_0x120413(0x258)];if(validateAccess(_0x342c87,_0x5b6037,_0xfaf1dd)['allow']){if(_0x5d7b80[_0x120413(0x220)]){const _0x282ac3=_0x5d7b80[_0x120413(0x220)]['backupfile'];await _0x282ac3['mv'](temppath+_0x282ac3[_0x120413(0x246)]),_0x2b713c[_0x120413(0x2a6)]({'status':!![],'message':'File\x20uploaded'});const _0x3b8ccc=getBotsWithMode();_0x3b8ccc[_0x120413(0x245)]>0x0?confirmRestore(temppath,_0x282ac3[_0x120413(0x246)]):unzipFile(temppath,_0x282ac3['name']);}}else logger[_0x120413(0x20f)](_0x120413(0x273));}else logger[_0x120413(0x20f)](_0x120413(0x1b2));}),app[_0x400b85(0x257)](express[_0x400b85(0x26e)](path['join'](__dirname,bbpath2,'build2'))),app['use'](express[_0x400b85(0x26e)](path[_0x400b85(0x176)](__dirname,bbpath2,_0x400b85(0x1be)))),app[_0x400b85(0x294)]('/',function(_0x243796,_0xf237f8){const _0x2b98a2=_0x400b85;_0xf237f8[_0x2b98a2(0x1a2)](path[_0x2b98a2(0x176)](__dirname,bbpath2,_0x2b98a2(0x1d1),_0x2b98a2(0x337)));}),app[_0x400b85(0x294)](_0x400b85(0x16d),function(_0x5ac7f8,_0x2bd8de){const _0x25be30=_0x400b85;_0x2bd8de[_0x25be30(0x1a2)](path['join'](__dirname,bbpath2,'build',_0x25be30(0x337)));}),app[_0x400b85(0x294)](_0x400b85(0x281),(_0x5ad285,_0x1bc291)=>{const _0x350c68=_0x400b85;_0x1bc291['sendFile'](path[_0x350c68(0x176)](__dirname,bbpath2,_0x350c68(0x1be),'index.html'));}),app[_0x400b85(0x294)](_0x400b85(0x1f5),(_0x1d0d5a,_0x5625ad)=>{const _0x531868=_0x400b85;_0x5625ad['sendFile'](path['join'](__dirname,bbpath2,'build',_0x531868(0x337)));}),app['get'](_0x400b85(0x1f2),(_0x3e30a9,_0xc52b1b)=>{const _0x334f64=_0x400b85;_0xc52b1b[_0x334f64(0x1a2)](path[_0x334f64(0x176)](__dirname,bbpath2,'build',_0x334f64(0x337)));}),app[_0x400b85(0x294)](_0x400b85(0x24f),(_0xac387d,_0x3be1c2)=>{const _0x1dd833=_0x400b85;_0x3be1c2['sendFile'](path[_0x1dd833(0x176)](__dirname,bbpath2,'build','index.html'));}),app['get'](_0x400b85(0x170),(_0xf2c3b0,_0x232c62)=>{const _0x5442fe=_0x400b85;_0x232c62[_0x5442fe(0x1a2)](path[_0x5442fe(0x176)](__dirname,bbpath2,_0x5442fe(0x1be),_0x5442fe(0x337)));}),app[_0x400b85(0x294)](_0x400b85(0x26f),(_0x2921cb,_0x204fb5)=>{const _0x209062=_0x400b85;_0x204fb5[_0x209062(0x1a2)](path[_0x209062(0x176)](__dirname,bbpath2,_0x209062(0x1be),_0x209062(0x337)));});if(HOST)http[_0x400b85(0x215)](PORT,HOST);else http['listen'](PORT);const io=require(_0x400b85(0x285))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2b25a3=_0x400b85;let _0x5c901c=_0x2b25a3(0x2a1);const _0x3aa83b=networkInterfaces(),_0x4adea9={};for(const _0x556d66 of Object['keys'](_0x3aa83b)){for(const _0x356697 of _0x3aa83b[_0x556d66]){if((_0x356697[_0x2b25a3(0x287)]==_0x2b25a3(0x185)||_0x356697[_0x2b25a3(0x287)]==0x4)&&!_0x356697[_0x2b25a3(0x29a)]){const _0x148278=ipaddr['parse'](_0x356697['address'])[_0x2b25a3(0x1b5)]();_0x148278!=_0x2b25a3(0x1a6)&&(!_0x4adea9[_0x556d66]&&(_0x4adea9[_0x556d66]=[]),_0x4adea9[_0x556d66][_0x2b25a3(0x32f)](_0x356697[_0x2b25a3(0x247)]),_0x5c901c=_0x356697['address']);}}}return{'serverip':_0x5c901c,'netinterfaces':_0x4adea9};}async function startServer(){const _0x34463e=_0x400b85,{serverip:_0x283132,netinterfaces:_0x496377}=getServerIP();logger[_0x34463e(0x177)](''),logger[_0x34463e(0x177)](_0x34463e(0x208)),await logger[_0x34463e(0x20f)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x34463e(0x30c)+(environment==_0x34463e(0x293)?_0x34463e(0x2d8):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x34463e(0x16f)+_0x283132+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x34463e(0x177)](_0x34463e(0x208));if(config[_0x34463e(0x245)]!=0x0)for(const _0x355986 of config){if(_0x355986[_0x34463e(0x1f1)]==_0x34463e(0x335)||_0x355986['status']=='new')await logger[_0x34463e(0x20f)]('Starting\x20bot\x20|\x20Bot\x20'+_0x355986[_0x34463e(0x1ed)]+'\x20|\x20'+_0x355986['botname']),startBot([_0x355986[_0x34463e(0x1ed)],userID],{'cwd':bbpath},function(_0x59011c){if(_0x59011c)logger['full'](_0x59011c);});else(_0x355986[_0x34463e(0x1f1)]==_0x34463e(0x2d4)||_0x355986['status']=='new-disabled')&&await logger['full'](_0x34463e(0x2fb)+_0x355986[_0x34463e(0x1ed)]+_0x34463e(0x16b)+_0x355986['botname']);}else!newBot&&logger['simple'](_0x34463e(0x199));if(newBot)addBot();logger[_0x34463e(0x177)](_0x34463e(0x208)),logger[_0x34463e(0x177)](''),await logger['debug'](_0x34463e(0x2fc)+nodeversion),await logger[_0x34463e(0x1d2)](_0x34463e(0x165),_0x496377);}function startSocket(){const _0x2c1f9a=_0x400b85;io['on'](_0x2c1f9a(0x1e8),_0x204969=>{const _0x4fa3a6=_0x2c1f9a;let _0x1b9845,_0x27850d,_0x281dd6,_0x3d636c,_0x10fa10;const _0x1e1c0f=_0x204969[_0x4fa3a6(0x1fc)][_0x4fa3a6(0x1fb)][_0x4fa3a6(0x272)];_0x27850d=_0x1e1c0f[_0x4fa3a6(0x2b9)](/bot[0-9]{3}/);if(_0x27850d)_0x281dd6=_0x27850d[0x0][_0x4fa3a6(0x2b9)](/[0-9]{3}/);if(_0x281dd6)_0x1b9845=_0x281dd6[0x0];else _0x1b9845=_0x4fa3a6(0x1f6);const _0x4b7b12=_0x204969[_0x4fa3a6(0x1fc)][_0x4fa3a6(0x266)]['encryptedUuid'];if(!_0x4b7b12)_0x204969['emit'](_0x4fa3a6(0x1f1),{'publicKey':secure[_0x4fa3a6(0x315)]});else{_0x3d636c=timelyDecrypt(_0x4b7b12,![]);if(!_0x3d636c)_0x204969[_0x4fa3a6(0x265)](_0x4fa3a6(0x1f1),{'publicKey':secure[_0x4fa3a6(0x315)]});else{_0x10fa10=normalizeIP(_0x204969['conn']['remoteAddress'])[_0x4fa3a6(0x30e)];if(!devices[_0x3d636c])devices[_0x3d636c]={'uuid':_0x3d636c,'access':{'token':null}};devices[_0x3d636c]['ip']=_0x10fa10;const _0x50894f=addClient(_0x204969['id'],_0x3d636c,_0x1b9845);setAccess(_0x50894f),emitMessages(),_0x204969['on']('login',_0x384d3d=>{const _0xa34158=_0x4fa3a6,_0x1db2ab=timelyDecrypt(_0x384d3d[_0xa34158(0x1a8)]);if(_0x1db2ab){_0x384d3d={'username':_0x384d3d[_0xa34158(0x201)],'password':_0x1db2ab},devices[_0x3d636c][_0xa34158(0x33f)]=validateCredentials(_0x384d3d,_0x3d636c);if(devices[_0x3d636c]['access'][_0xa34158(0x218)]==![]&&devices[_0x3d636c]['access'][_0xa34158(0x2e0)]=='2FA\x20login\x20required')_0x204969[_0xa34158(0x265)](_0xa34158(0x1f1),{'access':devices[_0x3d636c]['access']}),loginAccess2FA(_0x3d636c,_0x10fa10);else{if(devices[_0x3d636c]['access'][_0xa34158(0x218)]==![]&&devices[_0x3d636c][_0xa34158(0x33f)]['reason']==_0xa34158(0x1ec))_0x204969[_0xa34158(0x265)]('status',{'access':devices[_0x3d636c][_0xa34158(0x33f)]});else devices[_0x3d636c]['access'][_0xa34158(0x218)]&&devices[_0x3d636c][_0xa34158(0x33f)][_0xa34158(0x2e0)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x3d636c)[_0xa34158(0x1c7)](_0x30dc4e=>{setAccess(_0x30dc4e);}),logger[_0xa34158(0x1d2)](_0xa34158(0x316)+_0x3d636c[_0xa34158(0x244)](-0x8)),setTokenRefresh(_0x3d636c),setSessionTimeout(_0xa34158(0x2d0),_0x3d636c));}}else logger[_0xa34158(0x20f)](_0xa34158(0x1c1));}),_0x204969['on'](_0x4fa3a6(0x267),()=>{resetPassword();}),_0x204969['on'](_0x4fa3a6(0x1f0),_0x21e5f1=>{removeClient(_0x204969['id']);}),_0x1b9845=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function _0x1f38(){const _0x1bb508=['Error\x20while\x20deleting\x20config\x20files:\x20','started','join','simple','getPortfolio','All\x20bots','bot.js','resetHistory','order','login\x20not\x20required','init','copyFileSync','bot','place-order','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Notifications\x20enabled\x0a','whitelistEnabled','IPv4','manual','function','showname','reinstall-bb',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','version','getHours','apiSecret','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','bb-secure.json','-config.json','new-disabled','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','sort','entries','remoteAddress','yes','inherit','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','from','204oViFuq','/download/:type','exchange','running','sha256','pidRefreshToken','2FA\x20login\x20token\x20generated','sendFile','1719BfnyBb','util','delete-bot','private','stop','password','telegramIpApproval','127.0.0.1','removeListener','axios','lastmsgtelegram','date-fns','expiry','All','Failed\x20to\x20download\x20','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','get-portfolio','stopped','range','278775ISqoCz','get-backup-files','telegramUsername','show','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','log','Backup\x20file\x20unzipped\x20and\x20stored','readFileSync','build','2FA','output-003.log','Unauthorized\x20login\x20attempt\x20(timeout)','telegramToken','Invalid\x20Telegram\x20token','<b>Telegram\x20Bot\x20Status:</b>\x0a','padStart','config/','forEach','cancelLoading','backup-full.zip','Ok,\x20will\x20send\x20alert\x20notifications\x20only','filter','defaults','mode','getFullYear','min','sockets','build2','debug','Unauthorized\x20attempt\x20to\x20download\x20','all','lowdb','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','\x1b[31m','Starting\x20Balance\x20Bot\x20update','zip/','\x20|\x20client:\x20...','rmSync','assign','\x20>\x20','lowdb/adapters/FileSync','/off\x20-\x20stop\x20bot(s)\x0a','temporary\x20access\x20rejected','port','privateKey','update-bot','format','loginRequired','Unauthorized\x20attempt\x20to\x20get\x20events','yargs/yargs','connection','alias',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','restart','invalid\x20credentials','botID','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','apiKey','disconnect','status','/:bot/coins','-results.json','sendPortfolioTelegram','/:bot/performance','botmanager','/update\x20-\x20update\x20Balance\x20Bot\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20to\x20log\x20out','host','headers','handshake','generate','bbvNew','bot-','set','username','-events.json','graphql-request','alerts','Access\x20enabled\x20for\x20','toString','remove','-----------------------------------------------------------------------------------','settings','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','map','pidExpireLogin','messages','Bot\x20','full','replace','endsWith','Error\x20removing\x20old\x20backup\x20files:','Error:\x20Invalid\x20argument\x20','apply','listen','auto','Bot\x20Mgr\x20>\x20','allow','Notifications\x20enabled','answerCallbackQuery','statSync','environment','store-configuration','deleteHistoryAlerts','then','files','reload','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','HTML','access\x20timeout','-performance.json','node','storeHeadless','clientip','Starting\x20Balance\x20Bot\x20reinstallation','notification','/on\x20-\x20start\x20bot(s)\x0a','login\x20required','bb/','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','search','\x1b[34m','type','bb-settings.json','backup-full@','versions','159574BFJPuc','parse','output-002.log','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bbvReceive','readdirSync','compareSync','::ffff:127.0.0.1','socket','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','getMonth','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','track','slice','length','name','address','bb-config.json','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','20sXxMAA','telegramEvents','sendMessage','telegram2FaApproval','number','/:bot/history','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','argv','\x1b[36m','exp','storeFiat','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bbPassword','use','tkn','Markdown','split','version.json','event','Invalid\x20authentication\x20token\x20(1)','bbUsername','/enable\x20-\x20enable\x20notifications\x0a','RSA-OAEP','success','ipaddr.js','stopPolling','toggle-bot-mode','emit','auth','reset-password','No\x20authentication\x20token','fork','hasOwnProperty','existsSync','SIGINT','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','static','/:bot/support','telegramChatId','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','referer','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','backup/','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','7nVVLtT','cloneDeep','User\x20has\x20been\x20validated','update-bb','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Yes','Crypt','Ok,\x20will\x20send\x20order\x20notifications\x20only','2FA\x20required','<b>Balance\x20Bot\x20Status:</b>\x0a','update','/:bot/portfolio','verify','Restore\x20process\x20aborted','Restoring\x20bot(s)\x20from\x20backup','socket.io','updatebotmanager','family','connected','mkdirSync','Restore\x20backup\x20file\x20','backup-files','backup','ipc','backup-full','Enabled\x20Bot\x20','lastmsgemitted','output-000.log','Notifications\x20types:\x20','staging','get','sign','settings.','\x20mode','toIPv4MappedAddress','0.0.0','internal','uncaughtException','find','value','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Your\x20installation\x20is\x20already\x20up\x20to\x20date','blacklist','[ip-address]','temp/','Backup\x20file\x20uploaded','73686tUyQtq','f2aRequired','send','delete-alerts','6b67f3d61ee94b8f5c80b4affef4c4d9','/upload-backup','write','getTime','************','telegram','\x20to\x20','toIPv4Address','toggleBotMode','title','</b>\x20?','1294282ZiMNOY','secure','data','show-config','placeOrder','get-messages','match','259330alKYDM','reinstall','confirm-message','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Unauthorized\x20attempt\x20to\x20update\x20bot','getSeconds','catch','api-eu.mixpanel.com','crypto','getUTCHours','\x20(2)','\x1b[35m','decrypt','login\x20token\x20generated','reject','kind','Logged\x20out\x20user\x20...','isDirectory','latestversion','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','telegrammsg','Notifications\x20disabled\x0a','login','headless','telegramEnabled','randomBytes','disabled','writeFileSync','warning','http','(staging)','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','/output-000.log','user','***','temporary\x20token\x20generated','initclient','live','reason','Starting\x20new\x20bot\x20|\x20Bot\x20','logout','Unauthorized\x20attempt\x20to\x20delete\x20alerts','node-zip','DEFLATE','store-settings','404\x20Not\x20Found','Unauthorized\x20attempt\x20to\x20confirm\x20message','\x20only\x0a','output-001.log','callback_query','onepagemode','No\x20bots\x20running\x20right\x20now','child_process','clients','add-bot','Unauthorized\x20attempt\x20to\x20get\x20messages','Setting\x20access:\x20','kill','.zip','temporaryAccessAllowed','\x20minutes','*$1*','uuid','ipv6','\x1b[0m','Idling\x20bot\x20\x20\x20|\x20Bot\x20','Node.js\x20v','download','once','bcryptjs','chat','params','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','orders','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','logged\x20out','2FA\x20login\x20rejected','https://api.ipify.org?format=json','exit','SIGTERM','getDate','(((.+)+)+)+$','#RES#\x20','userid','store','Password\x20reset\x20rejected','removeAllListeners','secret','/status\x20-\x20show\x20bot(s)\x20status\x0a','Deleted\x20Bot\x20','logs','publicKey','Logged\x20in\x20user\x20...','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','message','\x20(1)','Unauthorized\x20attempt\x20to\x20update\x20settings','any','startsWith','token','Orders','unlinkSync','new','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','hashSync','288adibKL','22024UtknQs','timeshift','isValid','Session\x20expired\x20for\x20user\x20...','Unauthorized\x20attempt\x20to\x20add\x20bot','Invalid\x20username\x20or\x20IP\x20address','accept','logs/','server','push','keys','Invalid\x20IP\x20address','Notifications\x20disabled','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',':\x20Bot\x20Mgr\x20>\x20','enabled','constructor','index.html','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','error','/metrics\x20-\x20show\x20bot\x20performance\x0a','_data','timestamp','::1','sortBy','access','sendMetricsTelegram','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','polling_error','Unauthorized\x20attempt\x20to\x20show\x20configuration','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','/names\x20-\x20show\x20bot\x20names\x0a','onText','Network\x20Interfaces:','getMinutes','$1_$2_$3','getStartingBalances','includes','botname','\x20|\x20','stringify','/:bot','bots','=>\x20Go\x20to\x20#CYA#http://','/:bot/configuration','isIPv4MappedAddress','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','env'];_0x1f38=function(){return _0x1bb508;};return _0x1f38();}function initClient(_0x5d0ecc){const _0x42d73a=_0x400b85;if(_0x5d0ecc!='botmanager'&&config[_0x42d73a(0x1ef)]!=''){if(pid[_0x5d0ecc])pid[_0x5d0ecc][_0x42d73a(0x2a6)]({'function':_0x42d73a(0x2de),'args':null});}_0x5d0ecc!='botmanager'&&broadcastToBots(_0x42d73a(0x16e),JSON[_0x42d73a(0x16c)](config));}function reloadBotManager(){const _0x35adac=_0x400b85;getClientsWithBotID('botmanager')[_0x35adac(0x1c7)](_0x2b8ee5=>{const _0x37a684=_0x35adac;getSocket(_0x2b8ee5['id'])[_0x37a684(0x265)](_0x37a684(0x1f1),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x4a2d5){const _0x2407da=_0x400b85;return io[_0x2407da(0x1d0)][_0x2407da(0x1d0)][_0x2407da(0x294)](_0x4a2d5);}function setAccess(_0x21fcf8){const _0x334bdf=_0x400b85,_0x7fe4d1=getSocket(_0x21fcf8['id']),_0x3fe390=_0x21fcf8[_0x334bdf(0x2f8)],_0x381486=_0x21fcf8[_0x334bdf(0x180)];devices[_0x3fe390][_0x334bdf(0x33f)]=validateAccess(devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x31e)],_0x3fe390),logger[_0x334bdf(0x1d2)](_0x334bdf(0x2f2)+devices[_0x3fe390][_0x334bdf(0x33f)]['reason']+_0x334bdf(0x1da)+_0x21fcf8['id'][_0x334bdf(0x244)](-0x8)+'\x20|\x20user:\x20...'+_0x3fe390[_0x334bdf(0x244)](-0x8)),_0x7fe4d1[_0x334bdf(0x176)](_0x3fe390);if(devices[_0x3fe390][_0x334bdf(0x33f)]['allow']){_0x7fe4d1[_0x334bdf(0x176)](_0x381486);if(_0x381486==_0x334bdf(0x1f6))initializeSocketBotManager(_0x7fe4d1);else initializeSocketBot(_0x7fe4d1);initClient(_0x381486);}devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x31e)]&&devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x2e0)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x334bdf(0x1bf),_0x3fe390),devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x31e)]&&devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x2e0)]==_0x334bdf(0x1a1)&&setSessionTimeout('login',_0x3fe390),_0x7fe4d1[_0x334bdf(0x265)](_0x334bdf(0x1f1),{'status':_0x21fcf8[_0x334bdf(0x32e)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3fe390][_0x334bdf(0x33f)],'externalip':devices[_0x3fe390]['ip'],'publicKey':secure[_0x334bdf(0x315)],'userid':settings[_0x334bdf(0x30d)],'validInstallation':validInstallation}),devices[_0x3fe390]['access'][_0x334bdf(0x218)]==![]&&devices[_0x3fe390][_0x334bdf(0x33f)][_0x334bdf(0x2e0)]==_0x334bdf(0x27e)&&temporaryAccess2FA(_0x3fe390,devices[_0x3fe390]['ip']);}function setSessionTimeout(_0x188b6a,_0x1935ce){const _0x4572d7=_0x400b85;let _0x2720af;if(_0x188b6a==_0x4572d7(0x2d0))_0x2720af=loginExpiry*0x3c*0x3e8;else _0x2720af=devices[_0x1935ce][_0x4572d7(0x1a9)]['expiry']*0x3c*0x3e8-(new Date()[_0x4572d7(0x2ab)]()-devices[_0x1935ce]['telegramIpApproval'][_0x4572d7(0x33c)]);if(devices[_0x1935ce]['pidExpireLogin'])clearTimeout(devices[_0x1935ce][_0x4572d7(0x20c)]);devices[_0x1935ce][_0x4572d7(0x20c)]=setTimeout(()=>{const _0x5b5932=_0x4572d7;if(devices[_0x1935ce]['pidRefreshToken'])clearTimeout(devices[_0x1935ce][_0x5b5932(0x1a0)]);removeSocketListeners(_0x1935ce),addBlacklist(_0x1935ce),devices[_0x1935ce]['telegramIpApproval']=null,devices[_0x1935ce][_0x5b5932(0x24d)]=null,devices[_0x1935ce][_0x5b5932(0x33f)][_0x5b5932(0x31e)]=null,logger[_0x5b5932(0x1d2)](_0x5b5932(0x329)+_0x1935ce[_0x5b5932(0x244)](-0x8)),devices[_0x1935ce][_0x5b5932(0x33f)]=validateAccess(devices[_0x1935ce][_0x5b5932(0x33f)]['token'],_0x1935ce),!(devices[_0x1935ce][_0x5b5932(0x33f)][_0x5b5932(0x218)]&&devices[_0x1935ce][_0x5b5932(0x33f)][_0x5b5932(0x2e0)]=='login\x20not\x20required')&&(_0x188b6a==_0x5b5932(0x2d0)?io['to'](_0x1935ce)[_0x5b5932(0x265)](_0x5b5932(0x1f1),{'access':{'allow':![],'reason':_0x5b5932(0x226),'token':null}}):io['to'](_0x1935ce)[_0x5b5932(0x265)](_0x5b5932(0x1f1),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x1935ce][_0x5b5932(0x33f)][_0x5b5932(0x31e)]=null;},_0x2720af);}function setTokenRefresh(_0x54faff){const _0x54c269=_0x400b85;if(devices[_0x54faff][_0x54c269(0x1a0)])clearTimeout(devices[_0x54faff][_0x54c269(0x1a0)]);devices[_0x54faff][_0x54c269(0x1a0)]=setTimeout(()=>{const _0x180fe5=_0x54c269;getClientsWithUuid(_0x54faff)[_0x180fe5(0x245)]!=0x0?(devices[_0x54faff][_0x180fe5(0x33f)]=refreshToken(_0x54faff),io['to'](_0x54faff)['emit'](_0x180fe5(0x1f1),{'status':_0x180fe5(0x288),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x54faff]['access'],'externalip':devices[_0x54faff]['ip'],'publicKey':secure[_0x180fe5(0x315)],'validInstallation':validInstallation}),setTokenRefresh(_0x54faff)):clearTimeout(devices[_0x54faff][_0x180fe5(0x1a0)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5123bf){const _0x525560=_0x400b85,_0x93bfcc=getClient(_0x5123bf['id'])[_0x525560(0x2f8)];_0x5123bf['emit'](_0x525560(0x16e),config),_0x5123bf[_0x525560(0x265)]('settings',cleanSettings()),_0x5123bf['on'](_0x525560(0x2f0),_0x17da42=>{const _0xc427a=_0x525560;if(validateAccess(_0x17da42,_0x93bfcc)[_0xc427a(0x218)])addBot();else logger[_0xc427a(0x20f)](_0xc427a(0x32a));}),_0x5123bf['on'](_0x525560(0x1e3),(_0x4c69f1,_0x41270f)=>{const _0x209caa=_0x525560;if(validateAccess(_0x41270f,_0x93bfcc)['allow'])toggleBot(_0x4c69f1[_0x209caa(0x1ed)],_0x4c69f1[_0x209caa(0x1f1)],_0x4c69f1[_0x209caa(0x2df)]);else logger[_0x209caa(0x20f)](_0x209caa(0x2be));}),_0x5123bf['on'](_0x525560(0x264),(_0x44362e,_0x9bad8c)=>{const _0x37b342=_0x525560;if(validateAccess(_0x9bad8c,_0x93bfcc)[_0x37b342(0x218)])toggleBotMode(_0x44362e);else logger[_0x37b342(0x20f)](_0x37b342(0x2be));}),_0x5123bf['on'](_0x525560(0x1a5),(_0x112c08,_0x3cf86c)=>{const _0xfc4283=_0x525560;if(validateAccess(_0x3cf86c,_0x93bfcc)[_0xfc4283(0x218)])deleteBot(_0x112c08);else logger[_0xfc4283(0x20f)](_0xfc4283(0x223));}),_0x5123bf['on'](_0x525560(0x2e6),(_0x31fb97,_0x9ae762)=>{const _0x2b36dd=_0x525560;if(validateAccess(_0x9ae762,_0x93bfcc)[_0x2b36dd(0x218)])storeSettings(_0x31fb97,!![]);else logger[_0x2b36dd(0x20f)](_0x2b36dd(0x31b));}),_0x5123bf['on'](_0x525560(0x279),_0x3bb2bf=>{const _0x413f3c=_0x525560;if(validateAccess(_0x3bb2bf,_0x93bfcc)[_0x413f3c(0x218)])updateBB(_0x413f3c(0x280));else logger[_0x413f3c(0x20f)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x5123bf['on'](_0x525560(0x189),_0x41b406=>{const _0x19a125=_0x525560;if(validateAccess(_0x41b406,_0x93bfcc)[_0x19a125(0x218)])updateBB('reinstall');else logger[_0x19a125(0x20f)](_0x19a125(0x302));}),_0x5123bf['on'](_0x525560(0x1b7),_0x28e2c9=>{const _0xc4e100=_0x525560;if(validateAccess(_0x28e2c9,_0x93bfcc)[_0xc4e100(0x218)]){const _0x50fb2f=getClient(_0x5123bf['id']);if(_0x50fb2f)getBackupFiles(_0x50fb2f[_0xc4e100(0x2f8)]);else logger[_0xc4e100(0x20f)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger['full'](_0xc4e100(0x224));}),_0x5123bf['on']('restore-backup-file',(_0x363465,_0x3f6648)=>{const _0x178007=_0x525560;if(validateAccess(_0x3f6648,_0x93bfcc)[_0x178007(0x218)])restoreBackupFile(_0x363465);else logger[_0x178007(0x20f)](_0x178007(0x342));}),_0x5123bf['on'](_0x525560(0x2b8),_0x7517c1=>{const _0x1a50ab=_0x525560;if(validateAccess(_0x7517c1,_0x93bfcc)[_0x1a50ab(0x218)])getMessages();else logger['full'](_0x1a50ab(0x2f1));}),_0x5123bf['on'](_0x525560(0x2bc),(_0x1d2c67,_0x4bd05c)=>{const _0x5abb92=_0x525560;if(validateAccess(_0x4bd05c,_0x93bfcc)[_0x5abb92(0x218)])confirmMessage(_0x1d2c67);else logger[_0x5abb92(0x20f)](_0x5abb92(0x2e8));}),_0x5123bf['on']('logout',_0x3de199=>{const _0x168ceb=_0x525560;if(validateAccess(_0x3de199,_0x93bfcc)[_0x168ceb(0x218)]){if(devices[_0x93bfcc]['pidRefreshToken'])clearTimeout(devices[_0x93bfcc]['pidRefreshToken']);if(devices[_0x93bfcc]['pidExpireLogin'])clearTimeout(devices[_0x93bfcc][_0x168ceb(0x20c)]);removeSocketListeners(getClient(_0x5123bf['id'])[_0x168ceb(0x2f8)]),addBlacklist(_0x93bfcc),devices[_0x93bfcc][_0x168ceb(0x1a9)]=null,devices[_0x93bfcc]['telegram2FaApproval']=null,devices[_0x93bfcc][_0x168ceb(0x33f)][_0x168ceb(0x31e)]=null,logger['debug'](_0x168ceb(0x2ca)+_0x93bfcc[_0x168ceb(0x244)](-0x8)),io['to'](getClient(_0x5123bf['id'])[_0x168ceb(0x2f8)])[_0x168ceb(0x265)](_0x168ceb(0x1f1),{'access':{'allow':![],'reason':_0x168ceb(0x305),'token':null}});}else logger['full'](_0x168ceb(0x1f9));});}function initializeSocketBot(_0x59ef1f){const _0xbd263=_0x400b85,_0xd69e14=getClient(_0x59ef1f['id'])[_0xbd263(0x180)],_0x3fc13f=getClient(_0x59ef1f['id'])[_0xbd263(0x2f8)];_0x59ef1f['on']('get-logs',(_0x113b3f,_0x458eea)=>{const _0x3a258e=_0xbd263;if(validateAccess(_0x458eea,_0x3fc13f)[_0x3a258e(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x3a258e(0x2a6)]({'function':'emitHistory','args':_0x113b3f});}else logger[_0x3a258e(0x20f)](_0x3a258e(0x1e6));}),_0x59ef1f['on'](_0xbd263(0x2a7),(_0x268ab9,_0x185598)=>{const _0x59c5c2=_0xbd263;if(validateAccess(_0x185598,_0x3fc13f)[_0x59c5c2(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x59c5c2(0x2a6)]({'function':_0x59c5c2(0x21e),'args':_0x268ab9});}else logger['full'](_0x59c5c2(0x2e3));}),_0x59ef1f['on'](_0xbd263(0x1b3),(_0x1f671a,_0x272510)=>{const _0x3f395f=_0xbd263;if(validateAccess(_0x272510,_0x3fc13f)['allow']){if(pid[_0xd69e14])pid[_0xd69e14][_0x3f395f(0x2a6)]({'function':_0x3f395f(0x178),'args':_0x1f671a});}else logger[_0x3f395f(0x20f)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x59ef1f['on'](_0xbd263(0x21d),(_0x5e8e32,_0x27f6db)=>{const _0x48a2ab=_0xbd263;if(validateAccess(_0x27f6db,_0x3fc13f)['allow']){if(pid[_0xd69e14])pid[_0xd69e14][_0x48a2ab(0x2a6)]({'function':'storeConfiguration','args':_0x5e8e32});}else logger[_0x48a2ab(0x20f)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x59ef1f['on']('store-headless',(_0x448c58,_0x321522)=>{const _0x5372ba=_0xbd263;if(validateAccess(_0x321522,_0x3fc13f)['allow']){if(pid[_0xd69e14])pid[_0xd69e14]['send']({'function':_0x5372ba(0x229),'args':_0x448c58});}else logger[_0x5372ba(0x20f)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x59ef1f['on']('store-fiat',(_0x1551ff,_0x4df78d)=>{const _0x21e086=_0xbd263;if(validateAccess(_0x4df78d,_0x3fc13f)[_0x21e086(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x21e086(0x2a6)]({'function':_0x21e086(0x254),'args':_0x1551ff});}else logger['full'](_0x21e086(0x192));}),_0x59ef1f['on']('reset-history',_0x3f3160=>{const _0x5abb19=_0xbd263;if(validateAccess(_0x3f3160,_0x3fc13f)['allow']){if(pid[_0xd69e14])pid[_0xd69e14][_0x5abb19(0x2a6)]({'function':_0x5abb19(0x17b),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x59ef1f['on']('get-starting-balances',_0x6c3941=>{const _0x2d960a=_0xbd263;if(validateAccess(_0x6c3941,_0x3fc13f)[_0x2d960a(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x2d960a(0x2a6)]({'function':_0x2d960a(0x168),'args':null});}else logger[_0x2d960a(0x20f)](_0x2d960a(0x1ee));}),_0x59ef1f['on'](_0xbd263(0x181),(_0x63c98,_0x572785)=>{const _0x15c23e=_0xbd263;if(validateAccess(_0x572785,_0x3fc13f)['allow']){if(pid[_0xd69e14])pid[_0xd69e14][_0x15c23e(0x2a6)]({'function':_0x15c23e(0x2b7),'args':_0x63c98});}else logger[_0x15c23e(0x20f)](_0x15c23e(0x323));}),_0x59ef1f['on']('cancel-loading',_0x2ffd18=>{const _0x1c24da=_0xbd263;if(validateAccess(_0x2ffd18,_0x3fc13f)[_0x1c24da(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x1c24da(0x2a6)]({'function':_0x1c24da(0x1c8),'args':null});}else logger[_0x1c24da(0x20f)](_0x1c24da(0x2cd));}),_0x59ef1f['on'](_0xbd263(0x2b6),_0x2e72aa=>{const _0x5262a8=_0xbd263;if(validateAccess(_0x2e72aa,_0x3fc13f)[_0x5262a8(0x218)]){if(pid[_0xd69e14])pid[_0xd69e14][_0x5262a8(0x2a6)]({'function':'showConfig','args':null});}else logger[_0x5262a8(0x20f)](_0x5262a8(0x344));}),_0x59ef1f['on'](_0xbd263(0x279),_0x25aebb=>{const _0x37033f=_0xbd263;if(validateAccess(_0x25aebb,_0x3fc13f)['allow'])updateBB('update');else logger['full'](_0x37033f(0x1d6));}),_0x59ef1f['on'](_0xbd263(0x2b8),_0x2b622c=>{const _0x401035=_0xbd263;if(validateAccess(_0x2b622c,_0x3fc13f)['allow'])getMessages();else logger[_0x401035(0x20f)](_0x401035(0x2f1));}),_0x59ef1f['on'](_0xbd263(0x2bc),(_0x292a4d,_0x23e820)=>{const _0x4effc3=_0xbd263;if(validateAccess(_0x23e820,_0x3fc13f)[_0x4effc3(0x218)])confirmMessage(_0x292a4d);else logger['full']('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x59ef1f['on'](_0xbd263(0x2e2),_0x1b454c=>{const _0x49c519=_0xbd263;if(validateAccess(_0x1b454c,_0x3fc13f)[_0x49c519(0x218)]){if(devices[_0x3fc13f][_0x49c519(0x1a0)])clearTimeout(devices[_0x3fc13f]['pidRefreshToken']);if(devices[_0x3fc13f][_0x49c519(0x20c)])clearTimeout(devices[_0x3fc13f][_0x49c519(0x20c)]);removeSocketListeners(getClient(_0x59ef1f['id'])[_0x49c519(0x2f8)]),addBlacklist(_0x3fc13f),devices[_0x3fc13f][_0x49c519(0x1a9)]=null,devices[_0x3fc13f]['telegram2FaApproval']=null,devices[_0x3fc13f][_0x49c519(0x33f)][_0x49c519(0x31e)]=null,logger[_0x49c519(0x1d2)](_0x49c519(0x2ca)+_0x3fc13f['slice'](-0x8)),io['to'](getClient(_0x59ef1f['id'])['uuid'])[_0x49c519(0x265)](_0x49c519(0x1f1),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x49c519(0x20f)](_0x49c519(0x1f9));});}function removeSocketListeners(_0x33b8e6){const _0x4ffdbf=_0x400b85;getClientsWithUuid(_0x33b8e6)[_0x4ffdbf(0x1c7)](_0x12fa45=>{const _0x3e6362=_0x4ffdbf;getSocket(_0x12fa45['id'])[_0x3e6362(0x310)]();});}function cleanSettings(){const _0x5986df=_0x400b85;let _0x2dd999=settings;return settings[_0x5986df(0x1c2)]&&settings[_0x5986df(0x1c2)]!=''&&(_0x2dd999={..._0x2dd999,'telegramToken':_0x5986df(0x2ac)}),settings[_0x5986df(0x256)]&&settings['bbPassword']!=''&&(_0x2dd999={..._0x2dd999,'bbPassword':_0x5986df(0x2ac)}),(settings[_0x5986df(0x256)]&&settings[_0x5986df(0x256)]=='***'||settings[_0x5986df(0x1c2)]&&settings['telegramToken']==_0x5986df(0x2dc))&&(_0x2dd999={..._0x2dd999,'restored':{'password':settings[_0x5986df(0x256)]=='***','telegram':settings[_0x5986df(0x1c2)]==_0x5986df(0x2dc)}}),_0x2dd999;}async function updateBB(_0x26f07c){const _0x25c855=_0x400b85;await backupConfigFiles(),installingUpdate=!![],config[_0x25c855(0x1c7)](_0x232b15=>{const _0x35e366=_0x25c855;restartBot(_0x232b15[_0x35e366(0x1ed)]);});if(_0x26f07c=='update')process['send']({'update':!![],'environment':environment},_0x3069bc=>{});else _0x26f07c==_0x25c855(0x2bb)&&process[_0x25c855(0x2a6)]({'reinstall':!![],'environment':environment},_0x43be0a=>{});}function startBot(_0x51f2d7,_0x4884c7,_0x6dc1d5){const _0x397e75=_0x400b85;if(debugging)_0x51f2d7[_0x397e75(0x32f)]('-d');let _0x21fd4c=![];const _0x5e4274=_0x51f2d7[0x0];_0x4884c7={..._0x4884c7,'stdio':[_0x397e75(0x198),_0x397e75(0x198),_0x397e75(0x198),_0x397e75(0x28d)]},pid[_0x5e4274]=childProcess[_0x397e75(0x269)](botfile,_0x51f2d7,_0x4884c7),pid[_0x5e4274]['on'](_0x397e75(0x319),_0x391cbf=>{const _0x4d2f0f=_0x397e75;switch(Object[_0x4d2f0f(0x330)](_0x391cbf)[0x0]){case _0x4d2f0f(0x16a):updateBotName(_0x5e4274,_0x391cbf['botname']);break;case _0x4d2f0f(0x286):updateBotManager();break;case _0x4d2f0f(0x1f1):updateStatus(_0x5e4274,_0x391cbf['status']);break;case _0x4d2f0f(0x2df):updateLive(_0x5e4274,_0x391cbf[_0x4d2f0f(0x2df)]);break;case'started':updateLive(_0x5e4274,_0x391cbf[_0x4d2f0f(0x175)]),io['to'](_0x5e4274)[_0x4d2f0f(0x265)](_0x4d2f0f(0x1f1),{'access':{'allow':![],'reason':_0x4d2f0f(0x221),'token':null}});break;case'stop':_0x391cbf[_0x4d2f0f(0x1a7)]==_0x4d2f0f(0x1eb)&&restartBot(_0x5e4274);_0x391cbf['stop']==_0x4d2f0f(0x2f3)&&toggleBot(_0x5e4274,_0x4d2f0f(0x2d4),_0x4d2f0f(0x1b4));break;case _0x4d2f0f(0x2ad):sendTelegram(_0x5e4274,_0x391cbf[_0x4d2f0f(0x2ad)]);break;case _0x4d2f0f(0x2ce):sendTelegramMsg(_0x391cbf[_0x4d2f0f(0x2ce)]);break;case _0x4d2f0f(0x187):io['to'](_0x5e4274)['emit'](_0x391cbf[_0x4d2f0f(0x187)],_0x391cbf['args']);break;}}),pid[_0x5e4274]['on']('error',function(_0x210ecc){if(_0x21fd4c)return;_0x21fd4c=!![],_0x6dc1d5(_0x210ecc);}),pid[_0x5e4274]['on']('exit',async function(_0x56cade){const _0x15f6c3=_0x397e75;if(installingUpdate)return;if(_0x21fd4c)return;_0x21fd4c=!![],_0x6dc1d5(null);const _0x37d634=dbConfig[_0x15f6c3(0x294)](_0x15f6c3(0x16e))['find']({'botID':_0x5e4274})[_0x15f6c3(0x29d)]();_0x37d634&&(_0x37d634['status']=='enabled'||_0x37d634[_0x15f6c3(0x1f1)]==_0x15f6c3(0x321))&&(await sleep(0x3e8),updateLive(_0x5e4274,_0x15f6c3(0x1b4)),logger[_0x15f6c3(0x20f)]('Restarting\x20Bot\x20'+_0x5e4274),startBot([_0x5e4274,userID],{'cwd':bbpath},function(_0x9c38ef){const _0x34bbc1=_0x15f6c3;if(_0x9c38ef)logger[_0x34bbc1(0x20f)](_0x9c38ef);}));});}function stopBot(_0x1284bb){const _0x4a7c25=_0x400b85;getClientsWithBotID(_0x1284bb)['forEach'](_0x350a6e=>{getSocket(_0x350a6e['id'])['disconnect'](!![]),removeClient(_0x350a6e['id']);}),pid[_0x1284bb]&&(pid[_0x1284bb][_0x4a7c25(0x2f3)](),pid[_0x1284bb]=null);}function restartBot(_0x294253){const _0x17a785=_0x400b85;if(pid[_0x294253])pid[_0x294253][_0x17a785(0x2f3)]();}function addBot(){const _0x167fb3=_0x400b85;let _0x6a0de5;for(let _0x56c233=0x1;_0x56c233<0x3e9;_0x56c233++){_0x6a0de5=_0x56c233[_0x167fb3(0x206)]()['padStart'](0x3,'0');let _0x5c73db=config[_0x167fb3(0x29c)](_0x3d9713=>_0x3d9713[_0x167fb3(0x1ed)]==_0x6a0de5);if(!_0x5c73db)break;}if(_0x6a0de5==='1000'){logger[_0x167fb3(0x20f)](_0x167fb3(0x230));return;}logger[_0x167fb3(0x20f)](_0x167fb3(0x2e1)+_0x6a0de5),dbConfig[_0x167fb3(0x294)]('bots')[_0x167fb3(0x32f)]({'botID':_0x6a0de5,'botname':_0x167fb3(0x20e)+_0x6a0de5,'status':_0x167fb3(0x321),'live':''})[_0x167fb3(0x2aa)](),startBot([_0x6a0de5,userID],{'cwd':bbpath},function(_0x3b77b6){const _0x4b594a=_0x167fb3;if(_0x3b77b6)logger[_0x4b594a(0x20f)](_0x3b77b6);}),config=getConfiguration(),io['to'](_0x167fb3(0x1f6))['emit']('bots',config),broadcastToBots(_0x167fb3(0x16e),JSON[_0x167fb3(0x16c)](config));}function deleteBot(_0x4c10ab){const _0x1f4247=_0x400b85;getClientsWithBotID(_0x4c10ab)[_0x1f4247(0x1c7)](_0x497908=>{const _0x61d6a9=_0x1f4247;getSocket(_0x497908['id'])[_0x61d6a9(0x1f0)](!![]),removeClient(_0x497908['id']);}),dbConfig[_0x1f4247(0x294)]('bots')[_0x1f4247(0x207)]({'botID':_0x4c10ab})['write'](),logger['full'](_0x1f4247(0x313)+_0x4c10ab),stopBot(_0x4c10ab);try{if(fs[_0x1f4247(0x26b)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+'-config.json')))fs[_0x1f4247(0x320)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+'-config.json'));if(fs['existsSync'](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+_0x1f4247(0x202))))fs[_0x1f4247(0x320)](path[_0x1f4247(0x176)](configpath,'bot-'+_0x4c10ab+_0x1f4247(0x202)));if(fs[_0x1f4247(0x26b)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+_0x1f4247(0x227))))fs[_0x1f4247(0x320)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+_0x1f4247(0x227)));if(fs[_0x1f4247(0x26b)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+_0x1f4247(0x1f3))))fs[_0x1f4247(0x320)](path[_0x1f4247(0x176)](configpath,_0x1f4247(0x1ff)+_0x4c10ab+_0x1f4247(0x1f3)));}catch(_0x28a65a){if(_0x28a65a)logger[_0x1f4247(0x20f)](_0x1f4247(0x174),_0x28a65a);}config=getConfiguration(),io['to'](_0x1f4247(0x1f6))[_0x1f4247(0x265)](_0x1f4247(0x16e),config),broadcastToBots(_0x1f4247(0x16e),JSON[_0x1f4247(0x16c)](config));}function toggleBot(_0xf7c6d3,_0x25ecee,_0x4ad315){const _0x566c1b=_0x400b85;dbConfig[_0x566c1b(0x294)]('bots')[_0x566c1b(0x29c)]({'botID':_0xf7c6d3})['assign']({'status':_0x25ecee})[_0x566c1b(0x1dc)]({'live':_0x4ad315})[_0x566c1b(0x2aa)]();if(_0x25ecee==_0x566c1b(0x335)||_0x25ecee==_0x566c1b(0x321))logger[_0x566c1b(0x20f)](_0x566c1b(0x28f)+_0xf7c6d3),startBot([_0xf7c6d3,userID],{'cwd':bbpath},function(_0x108610){const _0x3172f8=_0x566c1b;if(_0x108610)logger[_0x3172f8(0x20f)](_0x108610);});else(_0x25ecee==_0x566c1b(0x2d4)||_0x25ecee==_0x566c1b(0x191))&&(logger[_0x566c1b(0x20f)]('Disabled\x20Bot\x20'+_0xf7c6d3),stopBot(_0xf7c6d3));config=getConfiguration(),io['to']('botmanager')['emit'](_0x566c1b(0x16e),config),broadcastToBots(_0x566c1b(0x16e),JSON['stringify'](config));}function toggleStatus(_0x1e7572){const _0x405ce7=_0x400b85;let _0x15b029=dbConfig[_0x405ce7(0x294)](_0x405ce7(0x16e))[_0x405ce7(0x29c)]({'botID':_0x1e7572})['value'](),_0x4d4971;if(_0x15b029[_0x405ce7(0x1f1)]===_0x405ce7(0x335))_0x4d4971='disabled';else{if(_0x15b029[_0x405ce7(0x1f1)]===_0x405ce7(0x321))_0x4d4971=_0x405ce7(0x191);else{if(_0x15b029[_0x405ce7(0x1f1)]===_0x405ce7(0x191))_0x4d4971=_0x405ce7(0x321);else{if(_0x15b029[_0x405ce7(0x1f1)]===_0x405ce7(0x2d4))_0x4d4971='enabled';}}}return _0x4d4971;}function updateStatus(_0x225639,_0x49d348){const _0x2baa3b=_0x400b85;dbConfig[_0x2baa3b(0x294)](_0x2baa3b(0x16e))['find']({'botID':_0x225639})[_0x2baa3b(0x1dc)]({'status':_0x49d348})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x2baa3b(0x265)](_0x2baa3b(0x16e),config),broadcastToBots(_0x2baa3b(0x16e),JSON['stringify'](config));}function updateLive(_0x156299,_0x359040){const _0x4ba1ec=_0x400b85;dbConfig[_0x4ba1ec(0x294)](_0x4ba1ec(0x16e))[_0x4ba1ec(0x29c)]({'botID':_0x156299})[_0x4ba1ec(0x1dc)]({'live':_0x359040})[_0x4ba1ec(0x2aa)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4ba1ec(0x16e),config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x5445e1,_0xa26036){const _0x1f4575=_0x400b85;dbConfig['get'](_0x1f4575(0x16e))[_0x1f4575(0x29c)]({'botID':_0x5445e1})[_0x1f4575(0x1dc)]({'botname':_0xa26036})[_0x1f4575(0x2aa)](),config=getConfiguration(),io['to']('botmanager')[_0x1f4575(0x265)](_0x1f4575(0x16e),config),broadcastToBots(_0x1f4575(0x16e),JSON[_0x1f4575(0x16c)](config));}function updateBotManager(){const _0x2547f0=_0x400b85;config=getConfiguration(),io['to']('botmanager')[_0x2547f0(0x265)](_0x2547f0(0x16e),config),broadcastToBots(_0x2547f0(0x16e),JSON[_0x2547f0(0x16c)](config));}function toggleBotMode(_0x4770d9){const _0x11fc43=_0x400b85;if(pid[_0x4770d9])pid[_0x4770d9][_0x11fc43(0x2a6)]({'function':_0x11fc43(0x2b0),'args':null});else{const _0x4a34fa=configpath+'bot-'+_0x4770d9+_0x11fc43(0x190),_0x5cf32e=fs[_0x11fc43(0x1bd)](_0x4a34fa),_0x482716=JSON[_0x11fc43(0x238)](_0x5cf32e),_0x781c1c=_0x482716[_0x11fc43(0x180)][0x0][_0x11fc43(0x2d1)];_0x482716[_0x11fc43(0x180)][0x0]['headless']=!_0x781c1c;const _0x4b8bc5=JSON[_0x11fc43(0x16c)](_0x482716,null,0x2);fs[_0x11fc43(0x2d5)](_0x4a34fa,_0x4b8bc5),config=getConfiguration(),io['to'](_0x11fc43(0x1f6))[_0x11fc43(0x265)](_0x11fc43(0x16e),config),broadcastToBots(_0x11fc43(0x16e),JSON[_0x11fc43(0x16c)](config));}}function telegramError(_0x5584d6){const _0x598976=_0x400b85;logger['simple'](getTimeStamp()+_0x598976(0x1ea));}function validateTelegram(_0x44507e){const _0x4374c4=_0x400b85;if(_0x44507e[_0x4374c4(0x19a)]['username']!=settings[_0x4374c4(0x1b8)]&&'@'+_0x44507e[_0x4374c4(0x19a)][_0x4374c4(0x201)]!=settings[_0x4374c4(0x1b8)])return tgBot[_0x4374c4(0x24c)](_0x44507e[_0x4374c4(0x300)]['id'],_0x4374c4(0x2d9),{'parse_mode':'HTML'})[_0x4374c4(0x2c0)](_0x324cd0=>{telegramError(_0x324cd0);}),![];return!![];}async function initTelegram(){const _0x18cb55=_0x400b85;if(tgBot)tgBot[_0x18cb55(0x263)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x18cb55(0x1c2)],{'polling':!![]});let _0x2bb401='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x2bb401+='\x0a',_0x2bb401+=_0x18cb55(0x25f),_0x2bb401+='/disable\x20-\x20disable\x20notifications\x0a',_0x2bb401+=_0x18cb55(0x2bd),_0x2bb401+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2bb401+=_0x18cb55(0x22d),_0x2bb401+=_0x18cb55(0x1df),_0x2bb401+=_0x18cb55(0x345),_0x2bb401+=_0x18cb55(0x346),_0x2bb401+=_0x18cb55(0x312),_0x2bb401+=_0x18cb55(0x33a),_0x2bb401+=_0x18cb55(0x304),_0x2bb401+=_0x18cb55(0x1f7),_0x2bb401+=_0x18cb55(0x318),_0x2bb401+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x295e5f=_0x18cb55(0x18e);_0x295e5f+='\x0a',_0x295e5f+=_0x2bb401,tgBot[_0x18cb55(0x347)](/\/start/,_0x52a187=>{const _0x5e8249=_0x18cb55;if(!validateTelegram(_0x52a187))return;if(settings['telegramChatId']!=_0x52a187[_0x5e8249(0x300)]['id'])updateSetting(_0x5e8249(0x270),_0x52a187[_0x5e8249(0x300)]['id']);updateSetting(_0x5e8249(0x2d2),!![]),tgBot[_0x5e8249(0x24c)](_0x52a187[_0x5e8249(0x300)]['id'],_0x295e5f)[_0x5e8249(0x2c0)](_0x5b634d=>{telegramError(_0x5b634d);});}),tgBot[_0x18cb55(0x347)](/\/enable/,_0x5b3d93=>{const _0x254d9a=_0x18cb55;if(!validateTelegram(_0x5b3d93))return;if(settings[_0x254d9a(0x270)]!=_0x5b3d93['chat']['id'])updateSetting(_0x254d9a(0x270),_0x5b3d93['chat']['id']);updateSetting(_0x254d9a(0x2d2),!![]),tgBot['sendMessage'](_0x5b3d93[_0x254d9a(0x300)]['id'],_0x254d9a(0x219))[_0x254d9a(0x2c0)](_0x3b07fb=>{telegramError(_0x3b07fb);});}),tgBot[_0x18cb55(0x347)](/\/config/,async _0x43d0e2=>{const _0x34e904=_0x18cb55;if(!validateTelegram(_0x43d0e2))return;tgBot[_0x34e904(0x1ab)]('callback_query'),tgBot[_0x34e904(0x24c)](_0x43d0e2[_0x34e904(0x300)]['id'],_0x34e904(0x271),{'reply_markup':{'inline_keyboard':[[{'text':_0x34e904(0x31f),'callback_data':_0x34e904(0x303)},{'text':'Alerts','callback_data':'alerts'},{'text':_0x34e904(0x1b0),'callback_data':'all'}]]}})[_0x34e904(0x2c0)](_0x3727a5=>{telegramError(_0x3727a5);}),tgBot['on'](_0x34e904(0x2eb),async _0x25c35c=>{const _0x4584fe=_0x34e904,_0xc562b5=_0x25c35c[_0x4584fe(0x2b5)],_0x28ce4e=_0x25c35c['message'];tgBot[_0x4584fe(0x21a)](_0x25c35c['id'])[_0x4584fe(0x21f)](async()=>{const _0x432beb=_0x4584fe;_0xc562b5=='orders'&&(updateSetting(_0x432beb(0x24b),_0x432beb(0x303)),updateSetting(_0x432beb(0x2d2),!![]),await tgBot[_0x432beb(0x24c)](_0x28ce4e[_0x432beb(0x300)]['id'],_0x432beb(0x27d))[_0x432beb(0x2c0)](_0x4ce258=>{telegramError(_0x4ce258);}));_0xc562b5==_0x432beb(0x204)&&(updateSetting(_0x432beb(0x24b),'alerts'),updateSetting(_0x432beb(0x2d2),!![]),await tgBot[_0x432beb(0x24c)](_0x28ce4e['chat']['id'],_0x432beb(0x1ca))[_0x432beb(0x2c0)](_0x3e1602=>{telegramError(_0x3e1602);}));_0xc562b5=='all'&&(updateSetting(_0x432beb(0x24b),'all'),updateSetting(_0x432beb(0x2d2),!![]),await tgBot[_0x432beb(0x24c)](_0x28ce4e[_0x432beb(0x300)]['id'],_0x432beb(0x20a))[_0x432beb(0x2c0)](_0x3ec760=>{telegramError(_0x3ec760);}));if(!settings[_0x432beb(0x270)])tgBot[_0x432beb(0x24c)](_0x28ce4e[_0x432beb(0x300)]['id'],_0x432beb(0x1ba))[_0x432beb(0x2c0)](_0x1b5245=>{telegramError(_0x1b5245);});}),tgBot[_0x4584fe(0x1ab)]('callback_query');});}),tgBot['onText'](/\/status/,_0x22ecbf=>{const _0x149168=_0x18cb55;if(!validateTelegram(_0x22ecbf))return;const _0x2eeb57=getBotsWithMode();let _0x5de2c1=_0x149168(0x27f);config['forEach'](_0xd3f9d3=>{const _0x370e30=_0x149168,_0x4d1362=_0x2eeb57[_0x370e30(0x29c)](_0x550d87=>_0x550d87[_0x370e30(0x1ed)]==_0xd3f9d3[_0x370e30(0x1ed)])['mode'];_0x5de2c1+='Bot\x20'+_0xd3f9d3[_0x370e30(0x1ed)]+':\x20'+_0xd3f9d3[_0x370e30(0x1f1)]+_0x370e30(0x16b)+_0x4d1362+'\x20|\x20'+_0xd3f9d3[_0x370e30(0x2df)]+'\x0a';}),_0x5de2c1+='\x0a',_0x5de2c1+=_0x149168(0x1c4),_0x5de2c1+=!settings[_0x149168(0x2d2)]?_0x149168(0x2cf):_0x149168(0x183),_0x5de2c1+=settings[_0x149168(0x2d2)]?settings['telegramEvents']==_0x149168(0x1d4)?_0x149168(0x29e):_0x149168(0x292)+settings[_0x149168(0x24b)]+_0x149168(0x2e9):'',tgBot[_0x149168(0x24c)](_0x22ecbf[_0x149168(0x300)]['id'],_0x5de2c1,{'parse_mode':'HTML'})[_0x149168(0x2c0)](_0x3b372f=>{telegramError(_0x3b372f);});}),tgBot['onText'](/\/restart/,_0x1284d3=>{const _0x1b9647=_0x18cb55;if(!validateTelegram(_0x1284d3))return;tgBot[_0x1b9647(0x1ab)](_0x1b9647(0x2eb));const _0x25e889=getEnabledBots();if(_0x25e889[_0x1b9647(0x245)]==0x0)tgBot['sendMessage'](_0x1284d3[_0x1b9647(0x300)]['id'],_0x1b9647(0x2ed))[_0x1b9647(0x2c0)](_0x405642=>{telegramError(_0x405642);});else{if(_0x25e889[_0x1b9647(0x245)]>0x1)_0x25e889[_0x1b9647(0x32f)]({'botID':_0x1b9647(0x1d4)});let _0x4f005f=[],_0x480de8=[];const _0x347492=_0x25e889[_0x1b9647(0x245)]%0x4==0x0||_0x25e889[_0x1b9647(0x245)]%0x4==0x3||_0x25e889['length']%0x3==0x1?0x4:0x3;let _0x26bbf=0x0;_0x25e889[_0x1b9647(0x1c7)]((_0x52aeba,_0xf6c3a5)=>{const _0x364648=_0x1b9647;if(_0xf6c3a5%_0x347492==0x0)_0x480de8=[];_0x480de8[_0x364648(0x32f)]({'text':_0x52aeba[_0x364648(0x1ed)]==_0x364648(0x1d4)?_0x364648(0x179):_0x364648(0x20e)+_0x52aeba['botID'],'callback_data':_0x52aeba['botID']}),_0xf6c3a5%_0x347492==0x0&&(_0x4f005f[_0x26bbf]=_0x480de8,_0x26bbf++);}),tgBot[_0x1b9647(0x24c)](_0x1284d3[_0x1b9647(0x300)]['id'],_0x1b9647(0x23a),{'reply_markup':{'inline_keyboard':_0x4f005f}})[_0x1b9647(0x2c0)](_0x5232af=>{telegramError(_0x5232af);}),tgBot['on'](_0x1b9647(0x2eb),async _0x4c5667=>{const _0x458d00=_0x1b9647,_0x2483f9=_0x4c5667[_0x458d00(0x2b5)],_0x44c611=_0x4c5667[_0x458d00(0x319)];tgBot['answerCallbackQuery'](_0x4c5667['id'])[_0x458d00(0x21f)](async()=>{const _0x1317f2=_0x458d00;_0x2483f9==_0x1317f2(0x1d4)?config[_0x1317f2(0x1c7)](_0xf7caca=>{restartBot(_0xf7caca['botID']);}):restartBot(_0x2483f9);}),tgBot['removeListener'](_0x458d00(0x2eb));});}}),tgBot[_0x18cb55(0x347)](/\/on/,_0x18f301=>{const _0x2232f3=_0x18cb55;if(!validateTelegram(_0x18f301))return;tgBot[_0x2232f3(0x1ab)]('callback_query');const _0x3600d1=getDisabledBots();if(_0x3600d1[_0x2232f3(0x245)]==0x0)tgBot['sendMessage'](_0x18f301[_0x2232f3(0x300)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x2232f3(0x2c0)](_0xaa18cc=>{telegramError(_0xaa18cc);});else{if(_0x3600d1[_0x2232f3(0x245)]>0x1)_0x3600d1[_0x2232f3(0x32f)]({'botID':_0x2232f3(0x1d4)});let _0x31f17f=[],_0x26ccb7=[];const _0x24a292=_0x3600d1['length']%0x4==0x0||_0x3600d1[_0x2232f3(0x245)]%0x4==0x3||_0x3600d1[_0x2232f3(0x245)]%0x3==0x1?0x4:0x3;let _0x1a94e5=0x0;_0x3600d1['forEach']((_0x4b4b8f,_0x46cea4)=>{const _0x48adc9=_0x2232f3;if(_0x46cea4%_0x24a292==0x0)_0x26ccb7=[];_0x26ccb7[_0x48adc9(0x32f)]({'text':_0x4b4b8f[_0x48adc9(0x1ed)]==_0x48adc9(0x1d4)?_0x48adc9(0x179):_0x48adc9(0x20e)+_0x4b4b8f[_0x48adc9(0x1ed)],'callback_data':_0x4b4b8f['botID']}),_0x46cea4%_0x24a292==0x0&&(_0x31f17f[_0x1a94e5]=_0x26ccb7,_0x1a94e5++);}),tgBot[_0x2232f3(0x24c)](_0x18f301['chat']['id'],_0x2232f3(0x240),{'reply_markup':{'inline_keyboard':_0x31f17f}})[_0x2232f3(0x2c0)](_0x263170=>{telegramError(_0x263170);}),tgBot['on']('callback_query',async _0x1eb89d=>{const _0x46205f=_0x2232f3,_0x5d8d27=_0x1eb89d[_0x46205f(0x2b5)],_0x5f0b9e=_0x1eb89d[_0x46205f(0x319)];tgBot[_0x46205f(0x21a)](_0x1eb89d['id'])[_0x46205f(0x21f)](async()=>{const _0x1b2982=_0x46205f;_0x5d8d27==_0x1b2982(0x1d4)?(tgBot['sendMessage'](_0x5f0b9e[_0x1b2982(0x300)]['id'],_0x1b2982(0x242))[_0x1b2982(0x2c0)](_0x511d7d=>{telegramError(_0x511d7d);}),_0x3600d1['forEach'](_0x32de4c=>{const _0x5ecab2=_0x1b2982;if(_0x32de4c[_0x5ecab2(0x1ed)]!=_0x5ecab2(0x1d4))toggleBot(_0x32de4c[_0x5ecab2(0x1ed)],toggleStatus(_0x32de4c['botID']),_0x5ecab2(0x1b4));})):(tgBot[_0x1b2982(0x24c)](_0x5f0b9e[_0x1b2982(0x300)]['id'],_0x1b2982(0x275)+_0x5d8d27)[_0x1b2982(0x2c0)](_0x18e306=>{telegramError(_0x18e306);}),toggleBot(_0x5d8d27,toggleStatus(_0x5d8d27),'stopped'));}),tgBot[_0x46205f(0x1ab)](_0x46205f(0x2eb));});}}),tgBot['onText'](/\/off/,_0x553c44=>{const _0x32f2a1=_0x18cb55;if(!validateTelegram(_0x553c44))return;tgBot['removeListener'](_0x32f2a1(0x2eb));const _0x1d4a23=getEnabledBots();if(_0x1d4a23['length']==0x0)tgBot[_0x32f2a1(0x24c)](_0x553c44[_0x32f2a1(0x300)]['id'],_0x32f2a1(0x2ed))['catch'](_0xb3045e=>{telegramError(_0xb3045e);});else{if(_0x1d4a23[_0x32f2a1(0x245)]>0x1)_0x1d4a23[_0x32f2a1(0x32f)]({'botID':'all'});let _0x3579b6=[],_0xd300ae=[];const _0x57a3a1=_0x1d4a23[_0x32f2a1(0x245)]%0x4==0x0||_0x1d4a23[_0x32f2a1(0x245)]%0x4==0x3||_0x1d4a23['length']%0x3==0x1?0x4:0x3;let _0x3fc8e2=0x0;_0x1d4a23[_0x32f2a1(0x1c7)]((_0x47e995,_0x1e0785)=>{const _0x6c80b4=_0x32f2a1;if(_0x1e0785%_0x57a3a1==0x0)_0xd300ae=[];_0xd300ae['push']({'text':_0x47e995[_0x6c80b4(0x1ed)]==_0x6c80b4(0x1d4)?_0x6c80b4(0x179):_0x6c80b4(0x20e)+_0x47e995[_0x6c80b4(0x1ed)],'callback_data':_0x47e995['botID']}),_0x1e0785%_0x57a3a1==0x0&&(_0x3579b6[_0x3fc8e2]=_0xd300ae,_0x3fc8e2++);}),tgBot[_0x32f2a1(0x24c)](_0x553c44[_0x32f2a1(0x300)]['id'],_0x32f2a1(0x222),{'reply_markup':{'inline_keyboard':_0x3579b6}})[_0x32f2a1(0x2c0)](_0x4ae677=>{telegramError(_0x4ae677);}),tgBot['on']('callback_query',async _0xe9195b=>{const _0x45c1c8=_0x32f2a1,_0x1d3ef0=_0xe9195b[_0x45c1c8(0x2b5)],_0x450d23=_0xe9195b['message'];tgBot[_0x45c1c8(0x21a)](_0xe9195b['id'])[_0x45c1c8(0x21f)](async()=>{const _0xeb6d7d=_0x45c1c8;_0x1d3ef0==_0xeb6d7d(0x1d4)?(tgBot[_0xeb6d7d(0x24c)](_0x450d23['chat']['id'],_0xeb6d7d(0x322))[_0xeb6d7d(0x2c0)](_0x205f02=>{telegramError(_0x205f02);}),_0x1d4a23[_0xeb6d7d(0x1c7)](_0x5522ae=>{const _0x512f97=_0xeb6d7d;if(_0x5522ae['botID']!=_0x512f97(0x1d4))toggleBot(_0x5522ae['botID'],toggleStatus(_0x5522ae[_0x512f97(0x1ed)]),_0x512f97(0x1b4));})):(tgBot['sendMessage'](_0x450d23[_0xeb6d7d(0x300)]['id'],_0xeb6d7d(0x182)+_0x1d3ef0)[_0xeb6d7d(0x2c0)](_0x535556=>{telegramError(_0x535556);}),toggleBot(_0x1d3ef0,toggleStatus(_0x1d3ef0),'stopped'));}),tgBot[_0x45c1c8(0x1ab)](_0x45c1c8(0x2eb));});}}),tgBot[_0x18cb55(0x347)](/\/metrics/,_0xfa3a9=>{const _0x1f1834=_0x18cb55;if(!validateTelegram(_0xfa3a9))return;tgBot[_0x1f1834(0x1ab)]('callback_query');const _0x293a61=getEnabledBots();if(_0x293a61['length']==0x0)tgBot[_0x1f1834(0x24c)](_0xfa3a9[_0x1f1834(0x300)]['id'],_0x1f1834(0x2ed))['catch'](_0x574591=>{telegramError(_0x574591);});else{if(_0x293a61[_0x1f1834(0x245)]>0x1){let _0x36ae0d=[],_0xfb3ddd=[];const _0x4c74fd=_0x293a61[_0x1f1834(0x245)]%0x4==0x0||_0x293a61[_0x1f1834(0x245)]%0x4==0x3||_0x293a61[_0x1f1834(0x245)]%0x3==0x1?0x4:0x3;let _0x19ab57=0x0;_0x293a61[_0x1f1834(0x1c7)]((_0x42e65f,_0x2149c7)=>{const _0x5dd573=_0x1f1834;if(_0x2149c7%_0x4c74fd==0x0)_0xfb3ddd=[];_0xfb3ddd[_0x5dd573(0x32f)]({'text':'Bot\x20'+_0x42e65f[_0x5dd573(0x1ed)],'callback_data':_0x42e65f[_0x5dd573(0x1ed)]}),_0x2149c7%_0x4c74fd==0x0&&(_0x36ae0d[_0x19ab57]=_0xfb3ddd,_0x19ab57++);}),tgBot[_0x1f1834(0x24c)](_0xfa3a9[_0x1f1834(0x300)]['id'],_0x1f1834(0x26d),{'reply_markup':{'inline_keyboard':_0x36ae0d}})[_0x1f1834(0x2c0)](_0x531c46=>{telegramError(_0x531c46);}),tgBot['on'](_0x1f1834(0x2eb),async _0x24639c=>{const _0x440b02=_0x1f1834,_0x4c79d5=_0x24639c['data'],_0x1258b5=_0x24639c[_0x440b02(0x319)];tgBot[_0x440b02(0x21a)](_0x24639c['id'])[_0x440b02(0x21f)](async()=>{const _0x52e3d3=_0x440b02;if(pid[_0x4c79d5])pid[_0x4c79d5]['send']({'function':_0x52e3d3(0x340),'args':null});}),tgBot[_0x440b02(0x1ab)](_0x440b02(0x2eb));});}else{const _0x193624=_0x293a61[0x0][_0x1f1834(0x1ed)];if(pid[_0x193624])pid[_0x193624][_0x1f1834(0x2a6)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x18cb55(0x347)](/\/portfolio/,_0x565449=>{const _0x1bb30c=_0x18cb55;if(!validateTelegram(_0x565449))return;tgBot[_0x1bb30c(0x1ab)]('callback_query');const _0x38be2d=getEnabledBots();if(_0x38be2d['length']==0x0)tgBot[_0x1bb30c(0x24c)](_0x565449[_0x1bb30c(0x300)]['id'],_0x1bb30c(0x2ed))[_0x1bb30c(0x2c0)](_0x2b15e0=>{telegramError(_0x2b15e0);});else{if(_0x38be2d[_0x1bb30c(0x245)]>0x1){let _0x210b65=[],_0x13d7fe=[];const _0x14b268=_0x38be2d[_0x1bb30c(0x245)]%0x4==0x0||_0x38be2d['length']%0x4==0x3||_0x38be2d[_0x1bb30c(0x245)]%0x3==0x1?0x4:0x3;let _0x51ca09=0x0;_0x38be2d['forEach']((_0x587fd9,_0x47d114)=>{const _0x191aca=_0x1bb30c;if(_0x47d114%_0x14b268==0x0)_0x13d7fe=[];_0x13d7fe[_0x191aca(0x32f)]({'text':_0x191aca(0x20e)+_0x587fd9['botID'],'callback_data':_0x587fd9[_0x191aca(0x1ed)]}),_0x47d114%_0x14b268==0x0&&(_0x210b65[_0x51ca09]=_0x13d7fe,_0x51ca09++);}),tgBot[_0x1bb30c(0x24c)](_0x565449[_0x1bb30c(0x300)]['id'],_0x1bb30c(0x341),{'reply_markup':{'inline_keyboard':_0x210b65}})['catch'](_0x584ae2=>{telegramError(_0x584ae2);}),tgBot['on']('callback_query',async _0x4a15de=>{const _0x5aae60=_0x1bb30c,_0x4eb54a=_0x4a15de[_0x5aae60(0x2b5)],_0x49ab20=_0x4a15de[_0x5aae60(0x319)];tgBot[_0x5aae60(0x21a)](_0x4a15de['id'])['then'](async()=>{const _0x29a2eb=_0x5aae60;if(pid[_0x4eb54a])pid[_0x4eb54a][_0x29a2eb(0x2a6)]({'function':_0x29a2eb(0x1f4),'args':null});}),tgBot[_0x5aae60(0x1ab)](_0x5aae60(0x2eb));});}else{const _0x2b7aa5=_0x38be2d[0x0][_0x1bb30c(0x1ed)];if(pid[_0x2b7aa5])pid[_0x2b7aa5][_0x1bb30c(0x2a6)]({'function':_0x1bb30c(0x1f4),'args':null});}}}),tgBot['onText'](/\/update/,async _0xf40ee9=>{const _0x16ccb0=_0x18cb55;if(!validateTelegram(_0xf40ee9))return;tgBot[_0x16ccb0(0x1ab)](_0x16ccb0(0x2eb)),await getMessages();if(!updateAvailable)tgBot[_0x16ccb0(0x24c)](_0xf40ee9[_0x16ccb0(0x300)]['id'],_0x16ccb0(0x29f))[_0x16ccb0(0x2c0)](_0xc51b70=>{telegramError(_0xc51b70);});else!validInstallation?tgBot[_0x16ccb0(0x24c)](_0xf40ee9[_0x16ccb0(0x300)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x16ccb0(0x2c0)](_0x3e7433=>{telegramError(_0x3e7433);}):(tgBot[_0x16ccb0(0x24c)](_0xf40ee9[_0x16ccb0(0x300)]['id'],_0x16ccb0(0x249),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x16ccb0(0x197)},{'text':'No','callback_data':'no'}]]}})[_0x16ccb0(0x2c0)](_0x5efb58=>{telegramError(_0x5efb58);}),tgBot['on']('callback_query',async _0x463e16=>{const _0x31de35=_0x16ccb0,_0x1b8ca3=_0x463e16[_0x31de35(0x2b5)],_0x1e0fda=_0x463e16[_0x31de35(0x319)];tgBot[_0x31de35(0x21a)](_0x463e16['id'])[_0x31de35(0x21f)](async()=>{const _0x186ffe=_0x31de35;_0x1b8ca3==_0x186ffe(0x197)&&(await tgBot[_0x186ffe(0x24c)](_0x1e0fda[_0x186ffe(0x300)]['id'],_0x186ffe(0x1d8))[_0x186ffe(0x2c0)](_0x346c1b=>{telegramError(_0x346c1b);}),updateBB('update')),_0x1b8ca3=='no'&&await tgBot[_0x186ffe(0x24c)](_0x1e0fda[_0x186ffe(0x300)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x186ffe(0x2c0)](_0x1647f6=>{telegramError(_0x1647f6);});}),tgBot[_0x31de35(0x1ab)](_0x31de35(0x2eb));}));}),tgBot[_0x18cb55(0x347)](/\/reinstall/,async _0x336740=>{const _0x1cc703=_0x18cb55;if(!validateTelegram(_0x336740))return;tgBot['removeListener'](_0x1cc703(0x2eb)),!validInstallation?tgBot[_0x1cc703(0x24c)](_0x336740[_0x1cc703(0x300)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation')[_0x1cc703(0x2c0)](_0x16c1d0=>{telegramError(_0x16c1d0);}):(tgBot[_0x1cc703(0x24c)](_0x336740['chat']['id'],_0x1cc703(0x172),{'reply_markup':{'inline_keyboard':[[{'text':_0x1cc703(0x27b),'callback_data':_0x1cc703(0x197)},{'text':'No','callback_data':'no'}]]}})[_0x1cc703(0x2c0)](_0x3d9a76=>{telegramError(_0x3d9a76);}),tgBot['on']('callback_query',async _0x2aad6a=>{const _0x139ef5=_0x1cc703,_0x29c9e4=_0x2aad6a[_0x139ef5(0x2b5)],_0xc3a4c6=_0x2aad6a[_0x139ef5(0x319)];tgBot[_0x139ef5(0x21a)](_0x2aad6a['id'])[_0x139ef5(0x21f)](async()=>{const _0x1eeb43=_0x139ef5;_0x29c9e4==_0x1eeb43(0x197)&&(await tgBot[_0x1eeb43(0x24c)](_0xc3a4c6['chat']['id'],_0x1eeb43(0x22b))[_0x1eeb43(0x2c0)](_0x1d3887=>{telegramError(_0x1d3887);}),updateBB(_0x1eeb43(0x2bb))),_0x29c9e4=='no'&&await tgBot[_0x1eeb43(0x24c)](_0xc3a4c6[_0x1eeb43(0x300)]['id'],_0x1eeb43(0x193))[_0x1eeb43(0x2c0)](_0x2e23bb=>{telegramError(_0x2e23bb);});}),tgBot[_0x139ef5(0x1ab)](_0x139ef5(0x2eb));}));}),tgBot[_0x18cb55(0x347)](/\/toggle/,_0x3b9702=>{const _0x4a575a=_0x18cb55;if(!validateTelegram(_0x3b9702))return;tgBot[_0x4a575a(0x1ab)](_0x4a575a(0x2eb));const _0x5f0db7=getBotsWithMode();if(_0x5f0db7[_0x4a575a(0x245)]==0x0)tgBot[_0x4a575a(0x24c)](_0x3b9702[_0x4a575a(0x300)]['id'],_0x4a575a(0x2ed))['catch'](_0x4d23be=>{telegramError(_0x4d23be);});else{let _0x38897a=[],_0x262f96=[];const _0x5cce8b=0x2;let _0x3109d4=0x0;_0x5f0db7[_0x4a575a(0x1c7)]((_0x34667b,_0x51f3d6)=>{const _0x166ae0=_0x4a575a;if(_0x51f3d6%_0x5cce8b==0x0)_0x262f96=[];_0x262f96[_0x166ae0(0x32f)]({'text':_0x166ae0(0x20e)+_0x34667b[_0x166ae0(0x1ed)]+'\x20('+_0x34667b[_0x166ae0(0x1cd)]+')','callback_data':_0x34667b[_0x166ae0(0x1ed)]}),_0x51f3d6%_0x5cce8b==0x0&&(_0x38897a[_0x3109d4]=_0x262f96,_0x3109d4++);}),tgBot[_0x4a575a(0x24c)](_0x3b9702['chat']['id'],_0x4a575a(0x333),{'reply_markup':{'inline_keyboard':_0x38897a}})['catch'](_0x74f2e5=>{telegramError(_0x74f2e5);}),tgBot['on']('callback_query',async _0x1f7158=>{const _0x29dd2f=_0x4a575a,_0x51ff9f=_0x1f7158[_0x29dd2f(0x2b5)],_0x4e67bd=_0x1f7158[_0x29dd2f(0x319)];tgBot[_0x29dd2f(0x21a)](_0x1f7158['id'])[_0x29dd2f(0x21f)](async()=>{const _0x2c37b4=_0x29dd2f,_0x35d61c=_0x5f0db7[_0x2c37b4(0x29c)](_0x18c98d=>_0x18c98d[_0x2c37b4(0x1ed)]==_0x51ff9f),_0x5e78d0=_0x35d61c[_0x2c37b4(0x1cd)]==_0x2c37b4(0x216)?_0x2c37b4(0x186):'auto';tgBot[_0x2c37b4(0x24c)](_0x4e67bd[_0x2c37b4(0x300)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x51ff9f+_0x2c37b4(0x2ae)+_0x5e78d0+_0x2c37b4(0x297))[_0x2c37b4(0x2c0)](_0x40df25=>{telegramError(_0x40df25);}),toggleBotMode(_0x51ff9f);}),tgBot[_0x29dd2f(0x1ab)](_0x29dd2f(0x2eb));});}}),tgBot[_0x18cb55(0x347)](/\/names/,_0x532bf5=>{const _0x3cfeb5=_0x18cb55;if(!validateTelegram(_0x532bf5))return;let _0x44a729='';config['forEach'](_0x1e8e59=>{const _0x2fd3f6=_0x4047;_0x44a729+=_0x2fd3f6(0x20e)+_0x1e8e59[_0x2fd3f6(0x1ed)]+':\x20'+_0x1e8e59['botname']+'\x0a';}),tgBot[_0x3cfeb5(0x24c)](_0x532bf5['chat']['id'],_0x44a729,{'parse_mode':_0x3cfeb5(0x225)})[_0x3cfeb5(0x2c0)](_0xab0b87=>{telegramError(_0xab0b87);});}),tgBot['onText'](/\/disable/,_0x3603c4=>{const _0x438a9f=_0x18cb55;if(!validateTelegram(_0x3603c4))return;tgBot[_0x438a9f(0x24c)](_0x3603c4[_0x438a9f(0x300)]['id'],_0x438a9f(0x332))[_0x438a9f(0x2c0)](_0x445c9e=>{telegramError(_0x445c9e);}),updateSetting(_0x438a9f(0x2d2),![]);}),tgBot[_0x18cb55(0x347)](/\/help/,_0x66f81=>{const _0x2e3430=_0x18cb55;if(!validateTelegram(_0x66f81))return;tgBot[_0x2e3430(0x24c)](_0x66f81[_0x2e3430(0x300)]['id'],_0x2bb401)['catch'](_0x57b7f3=>{telegramError(_0x57b7f3);});}),tgBot['on'](_0x18cb55(0x343),_0x5a7f76=>{const _0x301333=_0x18cb55;_0x5a7f76[_0x301333(0x206)]()[_0x301333(0x169)](_0x301333(0x2e7))&&(logger[_0x301333(0x20f)](_0x301333(0x1c3)),tgBot[_0x301333(0x263)](),tgBot=null,io['to'](_0x301333(0x1f6))[_0x301333(0x265)](_0x301333(0x22c),'Invalid\x20Telegram\x20token'));}),process[_0x18cb55(0x2fe)](_0x18cb55(0x26c),()=>{const _0x451da2=_0x18cb55;if(tgBot)tgBot[_0x451da2(0x263)]();process['exit'](0x1);}),process[_0x18cb55(0x2fe)](_0x18cb55(0x309),()=>{const _0x56a2d9=_0x18cb55;if(tgBot)tgBot[_0x56a2d9(0x263)]();process[_0x56a2d9(0x308)](0x1);});}}function disableTelegram(){const _0x101436=_0x400b85;tgBot&&(tgBot[_0x101436(0x263)](),tgBot=null);}function sendTelegram(_0x29d1a5,_0x5d9d2b){const _0x591396=_0x400b85;if(settings['telegramEnabled']){if(settings[_0x591396(0x24b)]==_0x591396(0x1d4)||(_0x5d9d2b['type']==_0x591396(0x339)||_0x5d9d2b[_0x591396(0x233)]==_0x591396(0x2d6)||_0x5d9d2b[_0x591396(0x233)]==_0x591396(0x261))&&settings['telegramEvents']==_0x591396(0x204)||_0x5d9d2b[_0x591396(0x233)]==_0x591396(0x17c)&&settings[_0x591396(0x24b)]==_0x591396(0x303)){if(tgBot&&settings[_0x591396(0x270)]){if(_0x5d9d2b[_0x591396(0x188)])tgBot[_0x591396(0x24c)](settings[_0x591396(0x270)],_0x5d9d2b[_0x591396(0x16a)]+_0x591396(0x1dd)+_0x5d9d2b[_0x591396(0x25c)])['catch'](_0x4e4fee=>{telegramError(_0x4e4fee);});else tgBot[_0x591396(0x24c)](settings[_0x591396(0x270)],'Bot\x20'+_0x29d1a5+'\x20>\x20'+_0x5d9d2b[_0x591396(0x25c)])[_0x591396(0x2c0)](_0x259cb4=>{telegramError(_0x259cb4);});}}}}async function sendTelegramMsg(_0x141286,_0x3d5ae6='HTML'){const _0x2f0e8b=_0x400b85;return settings[_0x2f0e8b(0x2d2)]&&tgBot&&settings[_0x2f0e8b(0x270)]?(await tgBot[_0x2f0e8b(0x24c)](settings[_0x2f0e8b(0x270)],_0x141286,{'parse_mode':_0x3d5ae6})['catch'](_0x939482=>{telegramError(_0x939482);}),!![]):![];}function getDeviceWithIp(_0x4f8f43){const _0x2420ab=_0x400b85;return devices[_0x2420ab(0x29c)](_0x526b41=>_0x526b41['ip']===_0x4f8f43);}function _0x4047(_0x50b8fd,_0x5529c5){const _0x499754=_0x1f38();return _0x4047=function(_0x8e5687,_0x2355aa){_0x8e5687=_0x8e5687-0x165;let _0x1f38f3=_0x499754[_0x8e5687];return _0x1f38f3;},_0x4047(_0x50b8fd,_0x5529c5);}function temporaryAccess2FA(_0x2ec1e2,_0x17c130){const _0x59fc8b=_0x400b85;let _0x2064a0=new Date(),_0x2cec0d=![];if(lastIpApproval){if(_0x2064a0-lastIpApproval<0x1388)_0x2cec0d=!![];}lastIpApproval=new Date();if(_0x2cec0d)return;tgBot&&settings[_0x59fc8b(0x270)]&&(tgBot[_0x59fc8b(0x1ab)](_0x59fc8b(0x2eb)),tgBot['sendMessage'](settings[_0x59fc8b(0x270)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x17c130)[_0x59fc8b(0x1b9)]+_0x59fc8b(0x2b2),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':_0x59fc8b(0x2c8)}]]}})[_0x59fc8b(0x2c0)](_0x27828f=>{telegramError(_0x27828f);}),tgBot['on'](_0x59fc8b(0x2eb),async _0x200747=>{const _0x19f412=_0x59fc8b,_0x5a8a74=_0x200747[_0x19f412(0x2b5)],_0x208b9b=_0x200747[_0x19f412(0x319)];tgBot[_0x19f412(0x21a)](_0x200747['id'])['then'](async()=>{const _0x1d38d8=_0x19f412;devices[_0x2ec1e2][_0x1d38d8(0x1a9)]={'clientip':_0x17c130,'timestamp':new Date()[_0x1d38d8(0x2ab)](),'expiry':_0x5a8a74},_0x5a8a74!=_0x1d38d8(0x2c8)?(await tgBot[_0x1d38d8(0x24c)](_0x208b9b[_0x1d38d8(0x300)]['id'],_0x1d38d8(0x205)+_0x5a8a74+_0x1d38d8(0x2f6),{'parse_mode':_0x1d38d8(0x225)})[_0x1d38d8(0x2c0)](_0xe9b6ee=>{telegramError(_0xe9b6ee);}),io['to'](_0x2ec1e2)[_0x1d38d8(0x265)](_0x1d38d8(0x1f1),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x208b9b[_0x1d38d8(0x300)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x4df0ac=>{telegramError(_0x4df0ac);}),io['to'](_0x2ec1e2)[_0x1d38d8(0x265)](_0x1d38d8(0x1f1),{'access':{'allow':![],'reason':_0x1d38d8(0x1e0),'token':null}}));}),tgBot[_0x19f412(0x1ab)](_0x19f412(0x2eb));}));}function loginAccess2FA(_0x179a86,_0x24c9dd){const _0xc1ab15=_0x400b85;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0xc1ab15(0x24c)](settings[_0xc1ab15(0x270)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x24c9dd)[_0xc1ab15(0x1b9)]+'</b>\x20?',{'parse_mode':_0xc1ab15(0x225),'reply_markup':{'inline_keyboard':[[{'text':_0xc1ab15(0x32c),'callback_data':loginExpiry},{'text':_0xc1ab15(0x2c8),'callback_data':_0xc1ab15(0x2c8)}]]}})['catch'](_0x15366a=>{telegramError(_0x15366a);}),tgBot['on'](_0xc1ab15(0x2eb),async _0x334a6c=>{const _0x4d609b=_0xc1ab15,_0x3fb911=_0x334a6c['data'],_0x23b99f=_0x334a6c[_0x4d609b(0x319)];tgBot[_0x4d609b(0x21a)](_0x334a6c['id'])[_0x4d609b(0x21f)](async()=>{const _0x1c78fb=_0x4d609b;devices[_0x179a86][_0x1c78fb(0x24d)]={'clientip':_0x24c9dd,'timestamp':new Date()[_0x1c78fb(0x2ab)](),'expiry':_0x3fb911},_0x3fb911!=_0x1c78fb(0x2c8)?(await tgBot['sendMessage'](_0x23b99f[_0x1c78fb(0x300)]['id'],'Login\x20accepted',{'parse_mode':_0x1c78fb(0x225)})['catch'](_0x3022d3=>{telegramError(_0x3022d3);}),io['to'](_0x179a86)['emit'](_0x1c78fb(0x1f1),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x1c78fb(0x24c)](_0x23b99f['chat']['id'],'Login\x20rejected')[_0x1c78fb(0x2c0)](_0x3a860b=>{telegramError(_0x3a860b);}),io['to'](_0x179a86)[_0x1c78fb(0x265)](_0x1c78fb(0x1f1),{'access':{'allow':![],'reason':_0x1c78fb(0x306),'token':null}}));}),tgBot[_0x4d609b(0x1ab)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4b5e40=_0x400b85;return dbConfig[_0x4b5e40(0x294)](_0x4b5e40(0x16e))[_0x4b5e40(0x33e)](_0x4b5e40(0x1ed))[_0x4b5e40(0x1cb)]({'status':_0x4b5e40(0x335)})[_0x4b5e40(0x29d)]()||[];}function getDisabledBots(){const _0x512d6e=_0x400b85;return dbConfig['get'](_0x512d6e(0x16e))[_0x512d6e(0x33e)](_0x512d6e(0x1ed))[_0x512d6e(0x1cb)]({'status':_0x512d6e(0x2d4)})[_0x512d6e(0x29d)]()||[];}function getBotAttributes(_0x446b11){const _0x52b298=_0x400b85;let _0x546b5e={};const _0x8f70c9=configpath+_0x52b298(0x1ff)+_0x446b11+'-config.json',_0x3442ae=fs[_0x52b298(0x26b)](_0x8f70c9);if(_0x3442ae){const _0x4d776f=fs[_0x52b298(0x1bd)](_0x8f70c9);try{const _0x50da6b=JSON[_0x52b298(0x238)](_0x4d776f),_0xf39b6c=_0x50da6b?_0x50da6b[_0x52b298(0x180)][0x0][_0x52b298(0x2d1)]:![];_0x546b5e[_0x52b298(0x1cd)]=_0xf39b6c?_0x52b298(0x216):_0x52b298(0x186),_0x546b5e[_0x52b298(0x16a)]=_0x50da6b?_0x50da6b['bot'][0x0][_0x52b298(0x16a)]:_0x52b298(0x20e)+_0x446b11;}catch(_0x37a884){_0x546b5e[_0x52b298(0x1cd)]=_0x52b298(0x186),_0x546b5e[_0x52b298(0x16a)]=_0x52b298(0x20e)+_0x446b11;}}else _0x546b5e[_0x52b298(0x1cd)]='manual',_0x546b5e['botname']=_0x52b298(0x20e)+_0x446b11;return _0x546b5e;}function getBotsWithMode(){const _0x50da35=_0x400b85,_0x358d60=dbConfig[_0x50da35(0x294)](_0x50da35(0x16e))[_0x50da35(0x33e)](_0x50da35(0x1ed))['value']()||[];return _0x358d60['forEach'](_0x4a9ebb=>{const _0x7410f6=_0x50da35;let _0x4a5649=getBotAttributes(_0x4a9ebb[_0x7410f6(0x1ed)]);_0x4a9ebb[_0x7410f6(0x1cd)]=_0x4a5649[_0x7410f6(0x1cd)];}),_0x358d60;}function getBotExchanges(){const _0x4620d3=_0x400b85;let _0x1950d2=[];const _0x2511e6=dbConfig['get']('bots')[_0x4620d3(0x33e)]('botID')[_0x4620d3(0x29d)]()||[];_0x2511e6[_0x4620d3(0x1c7)](_0x3b98d1=>{const _0x527c9c=_0x4620d3;if(_0x3b98d1[_0x527c9c(0x1f1)]==_0x527c9c(0x335)){const _0x5a73c0=configpath+_0x527c9c(0x1ff)+_0x3b98d1[_0x527c9c(0x1ed)]+'-config.json',_0x5613c4=fs[_0x527c9c(0x26b)](_0x5a73c0);let _0x2172b1;if(_0x5613c4){const _0x26f3a1=fs[_0x527c9c(0x1bd)](_0x5a73c0);try{const _0x372f19=JSON[_0x527c9c(0x238)](_0x26f3a1);_0x2172b1=_0x372f19?_0x372f19[_0x527c9c(0x180)][0x0][_0x527c9c(0x19d)]:null;}catch(_0x296cd0){}}if(_0x2172b1)_0x1950d2[_0x527c9c(0x32f)](_0x2172b1);}});const _0x514220=[...new Set(_0x1950d2)][_0x4620d3(0x194)]();return _0x514220;}async function initUser(){const _0x4a3b38=_0x400b85;if(!settings[_0x4a3b38(0x30d)]){const _0x3de712=uuidRandom();mixpanel[_0x4a3b38(0x1e9)](_0x3de712),updateSetting('userid',_0x3de712);}}async function initSecure(){const _0x5e7b6a=_0x400b85;let _0x2cdc72=getSecure();if(!_0x2cdc72[_0x5e7b6a(0x26a)](_0x5e7b6a(0x311))){let _0x9abecf=await generateKeys();_0x2cdc72[_0x5e7b6a(0x315)]=_0x9abecf[_0x5e7b6a(0x315)],_0x2cdc72[_0x5e7b6a(0x1e2)]=_0x9abecf[_0x5e7b6a(0x1e2)],_0x2cdc72[_0x5e7b6a(0x311)]=crypto[_0x5e7b6a(0x2d3)](0x20)[_0x5e7b6a(0x206)]('hex');;storeSecure(_0x2cdc72);}}function getSettings(){const _0x249e60=_0x400b85;return dbSettings[_0x249e60(0x294)]('settings')[_0x249e60(0x29d)]()||{};}function getSecure(){const _0x136489=_0x400b85;return dbSecure[_0x136489(0x294)]('secure')[_0x136489(0x29d)]()||{};}function getBlacklist(){const _0x5e2ba1=_0x400b85;return dbSecure['get'](_0x5e2ba1(0x2a0))[_0x5e2ba1(0x29d)]()||[];}function broadcastToBots(_0xa0d6e3,_0x1f3139){const _0x500ad3=_0x400b85;config[_0x500ad3(0x1c7)](_0x942922=>{const _0x775b53=_0x500ad3;if(_0x942922[_0x775b53(0x1f1)]=='enabled'&&_0x942922[_0x775b53(0x2df)]=='running'||_0x942922[_0x775b53(0x1f1)]==_0x775b53(0x321)&&_0x942922[_0x775b53(0x2df)]==_0x775b53(0x19e)){if(pid[_0x942922[_0x775b53(0x1ed)]])pid[_0x942922['botID']]['send']({[_0xa0d6e3]:_0x1f3139});}});}function storeSettings(_0x265c4d,_0x5726fc=![]){const _0x3d376f=_0x400b85;_0x265c4d={...settings,..._0x265c4d};if(_0x5726fc&&_0x265c4d[_0x3d376f(0x256)]!=_0x3d376f(0x2ac)&&_0x265c4d[_0x3d376f(0x256)]!='***'&&_0x265c4d[_0x3d376f(0x256)]!=''){const _0x4f5981=crypt[_0x3d376f(0x2c6)](secure[_0x3d376f(0x1e2)],_0x265c4d[_0x3d376f(0x256)])[_0x3d376f(0x319)][_0x3d376f(0x25a)]('@')[0x0],_0x12c29a=bcrypt[_0x3d376f(0x324)](_0x4f5981,saltRounds);_0x265c4d={..._0x265c4d,'bbPassword':_0x12c29a};}if(_0x5726fc&&_0x265c4d[_0x3d376f(0x1c2)]!=_0x3d376f(0x2ac)&&_0x265c4d['telegramToken']!=_0x3d376f(0x2dc)&&_0x265c4d[_0x3d376f(0x1c2)]!=''){const _0x57381e=crypt[_0x3d376f(0x2c6)](secure[_0x3d376f(0x1e2)],_0x265c4d[_0x3d376f(0x1c2)])[_0x3d376f(0x319)][_0x3d376f(0x25a)]('@')[0x0];_0x265c4d={..._0x265c4d,'telegramToken':_0x57381e};}const _0xd45fab=_0x265c4d[_0x3d376f(0x1c2)]!='************'&&_0x265c4d[_0x3d376f(0x1c2)]!=settings['telegramToken']||_0x265c4d[_0x3d376f(0x1b8)]!=settings[_0x3d376f(0x1b8)],_0x4a0a63=_0x265c4d[_0x3d376f(0x1c2)]==''||_0x265c4d[_0x3d376f(0x1b8)]=='';if(_0xd45fab)_0x265c4d[_0x3d376f(0x24b)]='all';for(const [_0x2ad32d,_0x9fc771]of Object[_0x3d376f(0x195)](_0x265c4d)){if(_0x2ad32d==_0x3d376f(0x1c2)&&_0x9fc771==_0x3d376f(0x2ac)){_0x265c4d[_0x3d376f(0x1c2)]=settings[_0x3d376f(0x1c2)];continue;};if(_0x2ad32d==_0x3d376f(0x256)&&_0x9fc771=='************'){_0x265c4d[_0x3d376f(0x256)]=settings['bbPassword'];continue;};dbSettings['set'](_0x3d376f(0x296)+_0x2ad32d,_0x9fc771)['write']();}settings=_0x265c4d,io['to'](_0x3d376f(0x1f6))['emit'](_0x3d376f(0x209),cleanSettings()),broadcastToBots('timeshift',settings[_0x3d376f(0x327)]),broadcastToBots(_0x3d376f(0x2ec),settings[_0x3d376f(0x2ec)]);if(_0xd45fab&&!_0x4a0a63)initTelegram();if(_0xd45fab&&_0x4a0a63)disableTelegram();getAllClients()[_0x3d376f(0x1c7)](_0x273ed1=>{const _0x214885=_0x3d376f;getSocket(_0x273ed1['id'])['emit'](_0x214885(0x1f1),{'access':{'allow':![],'reason':_0x214885(0x221),'token':null}});});}function updateSetting(_0x12fafe,_0x4a4e67){const _0x1fcabd=_0x400b85;dbSettings[_0x1fcabd(0x200)](_0x1fcabd(0x296)+_0x12fafe,_0x4a4e67)[_0x1fcabd(0x2aa)](),settings=getSettings(),io['to']('botmanager')['emit'](_0x1fcabd(0x209),cleanSettings());}function storeSecure(_0x21c4d8){const _0x1b667b=_0x400b85;dbSecure[_0x1b667b(0x294)](_0x1b667b(0x2b4))[_0x1b667b(0x32f)](_0x21c4d8)[_0x1b667b(0x2aa)](),secure=_0x21c4d8;}function addBlacklist(_0x175344){const _0x33285d=_0x400b85;cleanBlacklist();let _0x38c57b;devices[_0x175344][_0x33285d(0x1a9)]?_0x38c57b=Math['max'](devices[_0x175344]['telegramIpApproval'][_0x33285d(0x1af)],loginExpiry):_0x38c57b=loginExpiry,dbSecure[_0x33285d(0x294)](_0x33285d(0x2a0))['push']({'expiry':new Date()['getTime']()+_0x38c57b*0x3c*0x3e8,'token':devices[_0x175344][_0x33285d(0x33f)][_0x33285d(0x31e)]})['write'](),blacklist=dbSecure[_0x33285d(0x294)](_0x33285d(0x2a0))[_0x33285d(0x29d)]();}function cleanBlacklist(){const _0x4b6a44=_0x400b85;let _0x56cc96=dbSecure[_0x4b6a44(0x294)](_0x4b6a44(0x2a0))[_0x4b6a44(0x277)]()[_0x4b6a44(0x29d)](),_0x25322f=new Date()[_0x4b6a44(0x2ab)]();_0x56cc96[_0x4b6a44(0x1c7)](_0x9fb51a=>{const _0x416e66=_0x4b6a44;_0x9fb51a[_0x416e66(0x1af)]<_0x25322f&&dbSecure['get'](_0x416e66(0x2a0))['remove']({'expiry':_0x9fb51a[_0x416e66(0x1af)]})[_0x416e66(0x2aa)]();});}function initStates(){const _0x513b1a=_0x400b85;let _0x2b0515=getConfiguration();_0x2b0515[_0x513b1a(0x1c7)](_0x57bf6d=>{const _0x4d9bb2=_0x513b1a;_0x57bf6d[_0x4d9bb2(0x2df)]=_0x4d9bb2(0x1b4);}),storeConfiguration(_0x2b0515);}function onKeys(){const _0x540835=new RSA();return new Promise(_0x4d81c6=>{const _0x26d59e=_0x4047;_0x540835['generateKeyPairAsync']()[_0x26d59e(0x21f)](_0x41520f=>{_0x4d81c6(_0x41520f);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x55f7bc=_0x400b85;let _0x275b3b=getSettings(),_0x53dd39=![];!_0x275b3b[_0x55f7bc(0x26a)](_0x55f7bc(0x1ad))&&(_0x275b3b[_0x55f7bc(0x1ad)]=0x0,_0x53dd39=!![]);!_0x275b3b[_0x55f7bc(0x26a)](_0x55f7bc(0x290))&&(_0x275b3b[_0x55f7bc(0x290)]=0x0,_0x53dd39=!![]);!_0x275b3b[_0x55f7bc(0x26a)](_0x55f7bc(0x2cc))&&(_0x275b3b[_0x55f7bc(0x2cc)]='0.0.0',_0x53dd39=!![]);!_0x275b3b[_0x55f7bc(0x26a)](_0x55f7bc(0x2ec))&&(_0x275b3b[_0x55f7bc(0x2ec)]=![],_0x53dd39=!![]);if(_0x53dd39)storeSettings(_0x275b3b);try{fs[_0x55f7bc(0x23c)](configbackuppath,{'withFileTypes':!![]})[_0x55f7bc(0x1c7)](_0x11d6f1=>{const _0x5bcc29=_0x55f7bc;if(!_0x11d6f1['isDirectory']()){if(!_0x11d6f1[_0x5bcc29(0x246)]['startsWith']('backup-full@'))fs[_0x5bcc29(0x320)](configbackuppath+_0x11d6f1[_0x5bcc29(0x246)]);}else fs[_0x5bcc29(0x1db)](configbackuppath+_0x11d6f1['name'],{'recursive':!![]});});}catch(_0x27560e){logger['debug'](_0x55f7bc(0x212),_0x27560e);}}function storeConfiguration(_0x3b5972){const _0x27bfce=_0x400b85;dbConfig[_0x27bfce(0x294)]('bots')[_0x27bfce(0x207)]()[_0x27bfce(0x2aa)](),_0x3b5972[_0x27bfce(0x1c7)](_0x452cb7=>{delete _0x452cb7['mode'];}),dbConfig[_0x27bfce(0x294)](_0x27bfce(0x16e))[_0x27bfce(0x32f)](..._0x3b5972)[_0x27bfce(0x2aa)](),config=_0x3b5972;}function resetPassword(){const _0xd06b7e=_0x400b85;tgBot&&settings[_0xd06b7e(0x270)]&&(tgBot[_0xd06b7e(0x1ab)]('callback_query'),tgBot[_0xd06b7e(0x24c)](settings[_0xd06b7e(0x270)],_0xd06b7e(0x255),{'parse_mode':_0xd06b7e(0x225),'reply_markup':{'inline_keyboard':[[{'text':_0xd06b7e(0x197),'callback_data':_0xd06b7e(0x197)},{'text':'no','callback_data':'no'}]]}})[_0xd06b7e(0x2c0)](_0x55de08=>{telegramError(_0x55de08);}),tgBot['on']('callback_query',async _0x13cbdd=>{const _0x104fe9=_0xd06b7e,_0x4eda90=_0x13cbdd[_0x104fe9(0x2b5)],_0xa90372=_0x13cbdd[_0x104fe9(0x319)];tgBot['answerCallbackQuery'](_0x13cbdd['id'])[_0x104fe9(0x21f)](async()=>{const _0x9c01a4=_0x104fe9;if(_0x4eda90!='no'){const _0x2514da=0xf,_0x387a84=_0x9c01a4(0x1f8),_0x2cd5ae=Array[_0x9c01a4(0x19a)](crypto['randomFillSync'](new Uint32Array(_0x2514da)))[_0x9c01a4(0x20b)](_0x3cb599=>_0x387a84[_0x3cb599%_0x387a84['length']])[_0x9c01a4(0x176)](''),_0x772fde=bcrypt[_0x9c01a4(0x324)](_0x2cd5ae,saltRounds);storeSettings({'bbPassword':_0x772fde}),await tgBot[_0x9c01a4(0x24c)](_0xa90372['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x2cd5ae,{'parse_mode':_0x9c01a4(0x225)})[_0x9c01a4(0x2c0)](_0x2cac90=>{telegramError(_0x2cac90);});}else await tgBot[_0x9c01a4(0x24c)](_0xa90372[_0x9c01a4(0x300)]['id'],_0x9c01a4(0x30f))[_0x9c01a4(0x2c0)](_0x54160a=>{telegramError(_0x54160a);});}),tgBot[_0x104fe9(0x1ab)](_0x104fe9(0x2eb));}));}async function confirmRestore(_0x8654c6,_0x2bee43){const _0x4838e8=_0x400b85;io['to']('botmanager')[_0x4838e8(0x265)](_0x4838e8(0x22c),_0x4838e8(0x27a),_0x4838e8(0x261)),tgBot&&settings[_0x4838e8(0x270)]&&(tgBot[_0x4838e8(0x1ab)]('callback_query'),await tgBot[_0x4838e8(0x24c)](settings[_0x4838e8(0x270)],_0x4838e8(0x250),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4838e8(0x197),'callback_data':_0x4838e8(0x197)},{'text':'no','callback_data':'no'}]]}})[_0x4838e8(0x2c0)](_0x59d823=>{telegramError(_0x59d823);}),tgBot['on']('callback_query',async _0x24b17d=>{const _0x451de3=_0x4838e8,_0x29c12b=_0x24b17d[_0x451de3(0x2b5)],_0x4f560=_0x24b17d['message'];tgBot[_0x451de3(0x21a)](_0x24b17d['id'])[_0x451de3(0x21f)](async()=>{const _0x524462=_0x451de3;_0x29c12b==_0x524462(0x197)?(await tgBot[_0x524462(0x24c)](_0x4f560[_0x524462(0x300)]['id'],_0x524462(0x284),{'parse_mode':'HTML'})[_0x524462(0x2c0)](_0x224303=>{telegramError(_0x224303);}),unzipFile(_0x8654c6,_0x2bee43)):(logger[_0x524462(0x1d2)]('Restore\x20process\x20aborted'),await tgBot[_0x524462(0x24c)](_0x4f560[_0x524462(0x300)]['id'],_0x524462(0x283))[_0x524462(0x2c0)](_0x24f21d=>{telegramError(_0x24f21d);}));}),tgBot[_0x451de3(0x1ab)](_0x451de3(0x2eb));}));}function getServerTime(){const _0x2eb8b6=_0x400b85,_0xfab9ea=new Date();return _0xfab9ea[_0x2eb8b6(0x1ce)]()+'/'+(_0xfab9ea[_0x2eb8b6(0x241)]()+0x1)[_0x2eb8b6(0x206)]()[_0x2eb8b6(0x1c5)](0x2,'0')+'/'+_0xfab9ea[_0x2eb8b6(0x30a)]()[_0x2eb8b6(0x206)]()['padStart'](0x2,'0')+'\x20'+_0xfab9ea['getHours']()['toString']()[_0x2eb8b6(0x1c5)](0x2,'0')+':'+_0xfab9ea[_0x2eb8b6(0x166)]()['toString']()[_0x2eb8b6(0x1c5)](0x2,'0')+':'+_0xfab9ea['getSeconds']()[_0x2eb8b6(0x206)]()[_0x2eb8b6(0x1c5)](0x2,'0');}function getTimeStamp(){const _0x441753=_0x400b85,_0x679935=shiftedTime();return _0x679935[_0x441753(0x1ce)]()+'/'+(_0x679935[_0x441753(0x241)]()+0x1)[_0x441753(0x206)]()[_0x441753(0x1c5)](0x2,'0')+'/'+_0x679935[_0x441753(0x30a)]()['toString']()[_0x441753(0x1c5)](0x2,'0')+'\x20'+_0x679935[_0x441753(0x18c)]()[_0x441753(0x206)]()[_0x441753(0x1c5)](0x2,'0')+':'+_0x679935[_0x441753(0x166)]()['toString']()[_0x441753(0x1c5)](0x2,'0')+':'+_0x679935[_0x441753(0x2bf)]()['toString']()[_0x441753(0x1c5)](0x2,'0');}function getCleanTimeStamp(){const _0x2edd50=_0x400b85,_0x3fe2d4=shiftedTime();return _0x3fe2d4[_0x2edd50(0x1ce)]()+(_0x3fe2d4[_0x2edd50(0x241)]()+0x1)[_0x2edd50(0x206)]()[_0x2edd50(0x1c5)](0x2,'0')+_0x3fe2d4[_0x2edd50(0x30a)]()[_0x2edd50(0x206)]()['padStart'](0x2,'0')+'-'+_0x3fe2d4['getHours']()[_0x2edd50(0x206)]()[_0x2edd50(0x1c5)](0x2,'0')+_0x3fe2d4[_0x2edd50(0x166)]()['toString']()[_0x2edd50(0x1c5)](0x2,'0')+_0x3fe2d4['getSeconds']()[_0x2edd50(0x206)]()[_0x2edd50(0x1c5)](0x2,'0');}function shiftedTime(){const _0x3e767f=_0x400b85,_0x5ab1ea=new Date();let _0x1fcf49=_0x5ab1ea;if(settings['timeshift']&&settings[_0x3e767f(0x327)]!==0x0)_0x1fcf49=fns['add'](_0x5ab1ea,{'hours':settings['timeshift']});return _0x1fcf49;}function startScheduler(){const _0x2cc84c=_0x400b85,_0x45a3b7=new Date()[_0x2cc84c(0x2c3)](),_0x567466=shiftedTime()['getHours']();_0x567466==0x4&&backupConfigFiles();_0x567466==0x0&&rotateLogFiles();_0x45a3b7%0x6==0x0&&triggerAnalytics();_0x45a3b7%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x57337a){const _0x15f58b=_0x400b85;logger[_0x15f58b(0x1d2)](_0x15f58b(0x28a)+_0x57337a);const _0x65380a=getBotsWithMode();_0x65380a[_0x15f58b(0x245)]>0x0?confirmRestore(configbackuppath,_0x57337a):unzipFile(configbackuppath,_0x57337a);}async function getBackupFiles(_0x3b766e=null){const _0x10895e=_0x400b85;let _0x4c4bdb=[],_0x20a83f=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x20a83f[_0x10895e(0x194)]((_0x4c0748,_0x2701f0)=>_0x4c0748[_0x10895e(0x246)]<_0x2701f0[_0x10895e(0x246)]?0x1:_0x2701f0[_0x10895e(0x246)]<_0x4c0748['name']?-0x1:0x0),_0x20a83f['forEach'](_0x1673e0=>{const _0x18d0d5=_0x10895e;if(!_0x1673e0[_0x18d0d5(0x2cb)]()&&_0x1673e0['name'][_0x18d0d5(0x31d)](_0x18d0d5(0x235))&&_0x1673e0['name'][_0x18d0d5(0x211)](_0x18d0d5(0x2f4))){const _0x4a5240=formatDate(fs[_0x18d0d5(0x21b)](configbackuppath+_0x1673e0[_0x18d0d5(0x246)])['mtime']);_0x4c4bdb[_0x18d0d5(0x32f)]({'name':_0x1673e0[_0x18d0d5(0x246)],'mtime':_0x4a5240});}});if(_0x3b766e)io['to'](_0x3b766e)['emit'](_0x10895e(0x28b),_0x4c4bdb);else return _0x4c4bdb;}async function backupConfigFiles(){const _0x3b8769=_0x400b85;await zipFiles('backup-full');const _0x4d42df=getCleanTimeStamp();fs[_0x3b8769(0x17f)](zippath+_0x3b8769(0x1c9),configbackuppath+(_0x3b8769(0x235)+_0x4d42df+_0x3b8769(0x2f4)));let _0x4280ce=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x4280ce[_0x3b8769(0x194)]((_0x16b225,_0x1194ea)=>_0x16b225[_0x3b8769(0x246)]<_0x1194ea[_0x3b8769(0x246)]?0x1:_0x1194ea[_0x3b8769(0x246)]<_0x16b225[_0x3b8769(0x246)]?-0x1:0x0),_0x4280ce['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x4280ce[_0x4280ce[_0x3b8769(0x245)]-0x1]['name']);}function rotateLogFiles(){const _0x4a482e=_0x400b85,_0x12704d=fs[_0x4a482e(0x21b)](logspath+_0x4a482e(0x291)),_0x3c9ad1=_0x12704d['size']/0x400;if(_0x3c9ad1>0x64){let _0x5cb099=fs[_0x4a482e(0x23c)](logspath,{'withFileTypes':!![]});_0x5cb099[_0x4a482e(0x194)]((_0x55b1e3,_0x181f01)=>_0x55b1e3[_0x4a482e(0x246)]<_0x181f01[_0x4a482e(0x246)]?0x1:_0x181f01[_0x4a482e(0x246)]<_0x55b1e3[_0x4a482e(0x246)]?-0x1:0x0),_0x5cb099[_0x4a482e(0x1c7)](_0x1b5421=>{const _0x37ed0f=_0x4a482e;if(_0x1b5421[_0x37ed0f(0x246)]==_0x37ed0f(0x239))fs[_0x37ed0f(0x17f)](logspath+_0x1b5421['name'],logspath+_0x37ed0f(0x1c0));if(_0x1b5421[_0x37ed0f(0x246)]==_0x37ed0f(0x2ea))fs[_0x37ed0f(0x17f)](logspath+_0x1b5421[_0x37ed0f(0x246)],logspath+'output-002.log');_0x1b5421[_0x37ed0f(0x246)]=='output-000.log'&&(fs[_0x37ed0f(0x17f)](logspath+_0x1b5421[_0x37ed0f(0x246)],logspath+_0x37ed0f(0x2ea)),fs[_0x37ed0f(0x2d5)](logspath+_0x1b5421[_0x37ed0f(0x246)],''));});}}async function zipFiles(_0x14ac2e){const _0x1287b4=_0x400b85;let _0x1f58cf;if(_0x14ac2e==_0x1287b4(0x314))_0x1f58cf=logspath;if(_0x14ac2e==_0x1287b4(0x28c))_0x1f58cf=configpath;if(_0x14ac2e==_0x1287b4(0x28e))_0x1f58cf=configpath;let _0x22cc67=fs[_0x1287b4(0x23c)](_0x1f58cf,{'withFileTypes':!![]});const _0x45ef5c=new require(_0x1287b4(0x2e4))();_0x22cc67[_0x1287b4(0x1c7)](_0x5bf758=>{const _0x5e34d0=_0x1287b4;if(!_0x5bf758[_0x5e34d0(0x2cb)]()){let _0x5ae057=fs[_0x5e34d0(0x1bd)](_0x1f58cf+_0x5bf758[_0x5e34d0(0x246)]);if(_0x14ac2e=='backup'){const _0x16284a=/^bot-[0-9]{3}-config.json$/,_0x5df2cf=_0x16284a['test'](_0x5bf758[_0x5e34d0(0x246)]);if(_0x5df2cf){const _0x3400a8=JSON[_0x5e34d0(0x238)](_0x5ae057);if(_0x3400a8[_0x5e34d0(0x180)][0x0]){_0x3400a8[_0x5e34d0(0x180)][0x0][_0x5e34d0(0x1ef)]=_0x5e34d0(0x2dc),_0x3400a8[_0x5e34d0(0x180)][0x0][_0x5e34d0(0x18d)]=_0x5e34d0(0x2dc);if(_0x3400a8[_0x5e34d0(0x180)][0x0]['apiPassword'])_0x3400a8[_0x5e34d0(0x180)][0x0]['apiPassword']=_0x5e34d0(0x2dc);}_0x5ae057=JSON[_0x5e34d0(0x16c)](_0x3400a8,null,0x2);}if(_0x5bf758[_0x5e34d0(0x246)]==_0x5e34d0(0x234)){const _0x217e5b=JSON[_0x5e34d0(0x238)](_0x5ae057);if(_0x217e5b[_0x5e34d0(0x209)][_0x5e34d0(0x1e5)])_0x217e5b[_0x5e34d0(0x209)]['loginRequired']=![];if(_0x217e5b[_0x5e34d0(0x209)][_0x5e34d0(0x256)])_0x217e5b[_0x5e34d0(0x209)][_0x5e34d0(0x256)]='***';if(_0x217e5b[_0x5e34d0(0x209)][_0x5e34d0(0x1c2)])_0x217e5b[_0x5e34d0(0x209)]['telegramToken']=_0x5e34d0(0x2dc);if(_0x217e5b[_0x5e34d0(0x209)][_0x5e34d0(0x270)])_0x217e5b['settings'][_0x5e34d0(0x270)]=null;_0x5ae057=JSON[_0x5e34d0(0x16c)](_0x217e5b,null,0x2);}if(_0x5bf758[_0x5e34d0(0x246)]!=_0x5e34d0(0x18f))_0x45ef5c['file'](_0x5bf758['name'],_0x5ae057);}else _0x45ef5c['file'](_0x5bf758[_0x5e34d0(0x246)],_0x5ae057);}});const _0x4dd364=_0x45ef5c[_0x1287b4(0x1fd)]({'base64':![],'compression':_0x1287b4(0x2e5)});fs[_0x1287b4(0x2d5)](zippath+(_0x14ac2e+'.zip'),_0x4dd364,'binary');}async function unzipFile(_0x1d898b,_0x2b8588){const _0x57fdf8=_0x400b85;fs[_0x57fdf8(0x23c)](configpath,{'withFileTypes':!![]})[_0x57fdf8(0x1c7)](_0xff5c31=>{const _0x2e4828=_0x57fdf8;if(!_0xff5c31[_0x2e4828(0x2cb)]())fs['rmSync'](configpath+_0xff5c31[_0x2e4828(0x246)]);});const _0x4157ea=fs[_0x57fdf8(0x1bd)](_0x1d898b+_0x2b8588,'binary'),_0x2c27d3=new require(_0x57fdf8(0x2e4))(_0x4157ea,{'base64':![],'checkCRC32':!![]});Object[_0x57fdf8(0x330)](_0x2c27d3['files'])[_0x57fdf8(0x1c7)](_0x57ab87=>{const _0x2d5ee4=_0x57fdf8,_0x245d8e=_0x2c27d3[_0x2d5ee4(0x220)][_0x57ab87];fs['writeFileSync'](configpath+_0x245d8e['name'],_0x245d8e[_0x2d5ee4(0x33b)]);}),fs[_0x57fdf8(0x23c)](temppath,{'withFileTypes':!![]})['forEach'](_0x22aa2f=>{const _0x25d208=_0x57fdf8;if(!_0x22aa2f[_0x25d208(0x2cb)]())fs[_0x25d208(0x1db)](temppath+_0x22aa2f[_0x25d208(0x246)]);}),logger['debug'](_0x57fdf8(0x1bc)),process['send']({'restore':!![]},_0x4480c8=>{});}async function getPublicIp(){const _0x2fb3e7=_0x400b85;try{const _0x3267f1=await axios[_0x2fb3e7(0x294)](_0x2fb3e7(0x307));publicip=_0x3267f1[_0x2fb3e7(0x2b5)]['ip'];}catch(_0x3223e4){}}async function triggerAnalytics(){const _0x478b10=_0x400b85;if(!publicip)await getPublicIp();const _0x78b6a9=getBotsWithMode();let _0xe0f7c2=0x0;_0x78b6a9[_0x478b10(0x1c7)](_0x563206=>{const _0x330954=_0x478b10;if(_0x563206[_0x330954(0x1f1)]===_0x330954(0x335))_0xe0f7c2++;});const _0x26648b=getBotExchanges();mixpanel[_0x478b10(0x243)]('Server',{'distinct_id':settings[_0x478b10(0x30d)],'ip':publicip,'version':serverversion,'numbots':_0x78b6a9['length'],'numbotsenabled':_0xe0f7c2,'exchanges':_0x26648b,'environment':environment});}async function getMessages(){const _0x53825e=_0x400b85,_0x306ece=_0x53825e(0x338),_0x5c38d9=new GraphQLClient(_0x306ece),_0x4b6daf={'authorization':_0x53825e(0x317)},_0x30a54e=serverversion[_0x53825e(0x25a)]('.'),_0x3a1023=_0x30a54e[0x0]+'.'+_0x30a54e[0x1],_0x128880=Math[_0x53825e(0x1cf)](settings[_0x53825e(0x1ad)],settings[_0x53825e(0x290)]),_0x3941a9={'last':parseInt(_0x128880),'bbm':_0x3a1023},_0x56e97c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x40184e;try{_0x40184e=await _0x5c38d9['request'](_0x56e97c,_0x3941a9,_0x4b6daf);}catch(_0x23b928){}if(_0x40184e&&_0x40184e[_0x53825e(0x20d)]){let _0x301a2f=settings['lastmsgtelegram'];newMessages=[];for(const _0x1470ce of _0x40184e[_0x53825e(0x20d)]){newMessages[_0x53825e(0x32f)](_0x1470ce);let _0x3bfc85=![];_0x1470ce[_0x53825e(0x1fe)]&&(updateSetting(_0x53825e(0x2cc),_0x1470ce[_0x53825e(0x1fe)]),_0x3bfc85=isNewerVersion(serverversion,_0x1470ce[_0x53825e(0x1fe)])||serverversion==_0x1470ce[_0x53825e(0x1fe)]);if(!_0x3bfc85&&_0x1470ce[_0x53825e(0x24e)]>_0x301a2f){if(_0x1470ce[_0x53825e(0x23b)]===_0x53825e(0x31c)||serverversion[_0x53825e(0x31d)](_0x1470ce[_0x53825e(0x23b)])){let _0xf9fcaa=''+_0x1470ce[_0x53825e(0x2b1)]+'\x0a\x0a'+_0x1470ce['message'];const _0x520362=await sendTelegramMsg(toTelegramMarkdown(_0xf9fcaa),_0x53825e(0x259));if(_0x520362)_0x301a2f=_0x1470ce[_0x53825e(0x24e)];}}}updateAvailable=isNewerVersion(settings[_0x53825e(0x2cc)],serverversion),updateSetting(_0x53825e(0x1ad),_0x301a2f),emitMessages();}}function emitMessages(){const _0x199624=_0x400b85,_0x3bb3d3=settings[_0x199624(0x290)];let _0x3c3a74=[];newMessages[_0x199624(0x1c7)](_0x1b785a=>{_0x1b785a['number']>_0x3bb3d3&&_0x3c3a74['push'](_0x1b785a);}),_0x3c3a74[_0x199624(0x245)]>0x0&&getAllClients()[_0x199624(0x1c7)](_0x1f41f4=>{const _0x19282f=_0x199624;getSocket(_0x1f41f4['id'])[_0x19282f(0x265)](_0x19282f(0x319),_0x3c3a74);});}function confirmMessage(_0x3c94b7){const _0x2f6158=_0x400b85;updateSetting(_0x2f6158(0x290),Number(_0x3c94b7));}function isNewerVersion(_0x45ba60,_0x2c6d30){const _0xf52217=_0x2c6d30['split']('.'),_0x238672=_0x45ba60['split']('.');for(var _0x32727c=0x0;_0x32727c<_0x238672['length'];_0x32727c++){const _0x1a1cee=~~_0x238672[_0x32727c],_0x268051=~~_0xf52217[_0x32727c];if(_0x1a1cee>_0x268051)return!![];if(_0x1a1cee<_0x268051)return![];}return![];}function toTelegramMarkdown(_0x10e53d){const _0x16cb8d=_0x400b85,_0x5b8abd=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x270dd9=/\*{2}(.+?)\*{2}/gim;return _0x10e53d=_0x10e53d[_0x16cb8d(0x210)](_0x5b8abd,_0x16cb8d(0x167))[_0x16cb8d(0x210)](_0x270dd9,_0x16cb8d(0x2f7)),_0x10e53d;}async function validateConfigFile(){const _0x11d867=_0x400b85,_0xd4667=dbConfig[_0x11d867(0x294)](_0x11d867(0x16e))[_0x11d867(0x33e)](_0x11d867(0x1ed))[_0x11d867(0x29d)]()||[];if(_0xd4667[_0x11d867(0x245)]==0x0){let _0x32a6d5=0x0,_0x3da82f=[];const _0x11c854=/^bot-([0-9]{3})-config.json$/,_0x11cfea=fs[_0x11d867(0x23c)](configpath);_0x11cfea[_0x11d867(0x1c7)](_0x31f642=>{const _0x1b0b4d=_0x11d867,_0x267310=_0x11c854['exec'](_0x31f642);if(_0x267310){const _0x36c831=_0x267310[0x1];let _0x299930=getBotAttributes(_0x36c831);_0x3da82f['push']({'botID':_0x36c831,'botname':_0x299930[_0x1b0b4d(0x16a)],'status':_0x1b0b4d(0x2d4),'live':_0x1b0b4d(0x1b4)}),_0x32a6d5++;}}),_0x32a6d5!=0x0&&(dbConfig['get'](_0x11d867(0x16e))[_0x11d867(0x1dc)](_0x3da82f)['write'](),config=_0x3da82f,restoredConfigFile=_0x32a6d5);}}async function restoreConfigNotify(_0x240833){const _0x1d9671=_0x400b85;let _0x4ab618;if(restoredConfigFile==0x1)_0x4ab618='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x4ab618='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x240833)io['to'](_0x1d9671(0x1f6))['emit'](_0x1d9671(0x22c),_0x4ab618);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x1d9671(0x177)](_0x4ab618),logger[_0x1d9671(0x177)]('-----------------------------------------------------------------------------------'),logger[_0x1d9671(0x177)]('');if(tgBot&&settings[_0x1d9671(0x270)]&&settings[_0x1d9671(0x24b)]!=_0x1d9671(0x303))tgBot[_0x1d9671(0x24c)](settings[_0x1d9671(0x270)],_0x1d9671(0x217)+_0x4ab618)[_0x1d9671(0x2c0)](_0xd279f4=>{telegramError(_0xd279f4);});}}function validateCredentials(_0x325b65,_0x299263){const _0x903e7=_0x400b85;if(_0x325b65[_0x903e7(0x201)]==settings[_0x903e7(0x25e)]&&bcrypt[_0x903e7(0x23d)](_0x325b65['password'],settings[_0x903e7(0x256)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x56718a=generateLoginToken(_0x299263);return{'allow':!![],'reason':_0x903e7(0x2c7),'token':_0x56718a};}}else return{'allow':![],'reason':_0x903e7(0x1ec),'token':null};}function refreshToken(_0x397356){const _0xd4f6e5=_0x400b85,_0x1d5c7a=generateLoginToken(_0x397356);return{'allow':!![],'reason':_0xd4f6e5(0x2c7),'token':_0x1d5c7a};}function validateAccess(_0x43651f,_0x3b6ef0,_0x207d76){const _0x2bf7cb=_0x400b85,_0x434a42=_0x207d76?_0x207d76:devices[_0x3b6ef0]['ip'];let _0x23f203;const _0x3eb196=_0x1fd7e7=>{const _0x17b285=_0x4047;if(settings[_0x17b285(0x1e5)]){if(settings[_0x17b285(0x2a5)]){if(telegram2FaApproved(_0x3b6ef0)){const _0x2cde15=generateLoginToken(_0x3b6ef0);return{'allow':!![],'reason':_0x17b285(0x1a1),'token':_0x2cde15};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x23f203=validToken(_0x1fd7e7,_0x3b6ef0),_0x23f203[_0x17b285(0x26a)](_0x17b285(0x261))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1fd7e7}:{'allow':![],'reason':_0x17b285(0x22e),'token':null};}else return{'allow':!![],'reason':_0x17b285(0x17d),'token':null};};if(settings[_0x2bf7cb(0x184)]){let _0x3a72f9=[...settings['whitelist'],_0x2bf7cb(0x33d),_0x2bf7cb(0x23e),_0x2bf7cb(0x1aa)];if(_0x3a72f9[_0x2bf7cb(0x169)](_0x434a42))return _0x3eb196(_0x43651f);else{_0x23f203=validToken(_0x43651f,_0x3b6ef0);if(_0x23f203[_0x2bf7cb(0x26a)](_0x2bf7cb(0x261)))return _0x3eb196(_0x43651f);else{if(telegramIpApproved(_0x3b6ef0)){const _0x2ebe20=generateToken(_0x3b6ef0);return _0x23f203=_0x3eb196(_0x43651f),_0x23f203['allow']?{'allow':!![],'reason':_0x2bf7cb(0x2dd),'token':_0x2ebe20}:_0x23f203;}else return settings[_0x2bf7cb(0x2f5)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x3eb196(_0x43651f);}function timelyDecrypt(_0x15d1e5,_0xf87ea0=!![]){const _0x9b98d0=_0x400b85;if(_0x15d1e5)try{const _0x5932f9=crypt['decrypt'](secure[_0x9b98d0(0x1e2)],_0x15d1e5)[_0x9b98d0(0x319)],_0x286482=_0x5932f9[_0x9b98d0(0x25a)]('@')[0x0],_0x51025e=_0x5932f9['split']('@')[0x1],_0x524779=new Date()[_0x9b98d0(0x2ab)]();if(_0xf87ea0){if(_0x524779-_0x51025e<maxSecretAge*0x3e8)return _0x286482;else return![];}else return _0x286482;}catch(_0x705ca4){return![];}else return![];}const validToken=(_0x1a3083,_0x5567ea)=>{const _0xe53b8d=_0x400b85,_0xf11ae6=devices[_0x5567ea]['ip'];if(!_0x1a3083)return{'error':_0xe53b8d(0x268)};for(let _0x426df6 of blacklist){if(_0x426df6[_0xe53b8d(0x31e)]==_0x1a3083)return{'error':'Token\x20blacklisted'};}let _0x230a7c;try{_0x230a7c=jwt[_0xe53b8d(0x282)](_0x1a3083,secure[_0xe53b8d(0x311)]+_0x5567ea);}catch{return{'error':_0xe53b8d(0x25d)};}if(!_0x230a7c[_0xe53b8d(0x26a)](_0xe53b8d(0x22a))&&!_0x230a7c[_0xe53b8d(0x26a)](_0xe53b8d(0x201))||!_0x230a7c[_0xe53b8d(0x26a)](_0xe53b8d(0x253)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x230a7c[_0xe53b8d(0x26a)](_0xe53b8d(0x201))&&_0x230a7c['hasOwnProperty']('clientip')){const {clientip:_0x2c63a0}=_0x230a7c;return _0xf11ae6==_0x2c63a0?{'success':_0xe53b8d(0x278)}:{'error':_0xe53b8d(0x331)};}else{if(_0x230a7c[_0xe53b8d(0x26a)](_0xe53b8d(0x201))&&_0x230a7c['hasOwnProperty'](_0xe53b8d(0x22a))){const {username:_0x30925d,clientip:_0x3f61f7}=_0x230a7c;return settings['bbUsername']==_0x30925d&&_0xf11ae6==_0x3f61f7?{'success':_0xe53b8d(0x278)}:{'error':_0xe53b8d(0x32b)};}}},generateLoginToken=_0x26b75b=>{const _0x5ba4ff=_0x400b85;if(_0x26b75b){const _0x2159e7=devices[_0x26b75b]['ip'];return jwt['sign']({'username':settings[_0x5ba4ff(0x25e)],'clientip':_0x2159e7},secure[_0x5ba4ff(0x311)]+_0x26b75b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3de1ac=>{const _0x25f812=_0x400b85;if(_0x3de1ac){const _0x43c2c4=devices[_0x3de1ac]['ip'];return jwt[_0x25f812(0x295)]({'clientip':_0x43c2c4},secure['secret']+_0x3de1ac,{'expiresIn':devices[_0x3de1ac][_0x25f812(0x1a9)][_0x25f812(0x1af)]*0x3c});}else return![];},telegramIpApproved=_0x1a77bd=>{const _0x49f148=_0x400b85;let _0x31150d=![];return devices[_0x1a77bd]['telegramIpApproval']&&devices[_0x1a77bd][_0x49f148(0x1a9)]['expiry']!=_0x49f148(0x2c8)&&(_0x31150d=devices[_0x1a77bd]['telegramIpApproval']['clientip']==devices[_0x1a77bd]['ip']&&new Date()[_0x49f148(0x2ab)]()-devices[_0x1a77bd][_0x49f148(0x1a9)]['timestamp']<devices[_0x1a77bd][_0x49f148(0x1a9)][_0x49f148(0x1af)]*0x3c*0x3e8),_0x31150d;},telegram2FaApproved=_0x1db7f6=>{const _0x2af55b=_0x400b85;let _0x34f6f8=![];return devices[_0x1db7f6][_0x2af55b(0x24d)]&&devices[_0x1db7f6]['telegram2FaApproval']['expiry']!=_0x2af55b(0x2c8)&&(_0x34f6f8=devices[_0x1db7f6][_0x2af55b(0x24d)]['clientip']==devices[_0x1db7f6]['ip']&&new Date()['getTime']()-devices[_0x1db7f6][_0x2af55b(0x24d)][_0x2af55b(0x33c)]<devices[_0x1db7f6]['telegram2FaApproval'][_0x2af55b(0x1af)]*0x3c*0x3e8),_0x34f6f8;},normalizeIP=_0x151ae2=>{const _0x595621=_0x400b85;let _0x4b83a7=null,_0x633fee=null;if(ipaddr[_0x595621(0x328)](_0x151ae2)){const _0x5d4cc9=ipaddr[_0x595621(0x238)](_0x151ae2);_0x5d4cc9[_0x595621(0x2c9)]()===_0x595621(0x2f9)?(_0x5d4cc9[_0x595621(0x171)]()&&(_0x4b83a7=_0x5d4cc9[_0x595621(0x2af)]()[_0x595621(0x206)]()),_0x633fee=_0x5d4cc9['toString']()):(_0x4b83a7=_0x5d4cc9[_0x595621(0x206)](),_0x633fee=_0x5d4cc9[_0x595621(0x298)]()[_0x595621(0x206)]());}return{'show':_0x4b83a7?_0x4b83a7:_0x633fee,'store':_0x633fee};};function formatDate(_0x749f54){const _0x2adeb7=_0x400b85;return _0x749f54['getFullYear']()+'/'+(_0x749f54[_0x2adeb7(0x241)]()+0x1)[_0x2adeb7(0x206)]()[_0x2adeb7(0x1c5)](0x2,'0')+'/'+_0x749f54['getDate']()[_0x2adeb7(0x206)]()[_0x2adeb7(0x1c5)](0x2,'0')+'\x20'+_0x749f54[_0x2adeb7(0x18c)]()['toString']()['padStart'](0x2,'0')+':'+_0x749f54[_0x2adeb7(0x166)]()[_0x2adeb7(0x206)]()[_0x2adeb7(0x1c5)](0x2,'0')+':'+_0x749f54['getSeconds']()[_0x2adeb7(0x206)]()['padStart'](0x2,'0');}function sleep(_0x2dc76f){return new Promise(_0x32f22d=>setTimeout(_0x32f22d,_0x2dc76f));}