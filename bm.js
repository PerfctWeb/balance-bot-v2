const _0x5517e8=_0x4383;(function(_0x1e8393,_0x30407d){const _0x3998bd=_0x4383,_0x40648a=_0x1e8393();while(!![]){try{const _0x116948=parseInt(_0x3998bd(0x190))/0x1+parseInt(_0x3998bd(0x273))/0x2+parseInt(_0x3998bd(0x159))/0x3+-parseInt(_0x3998bd(0x1e8))/0x4+-parseInt(_0x3998bd(0x289))/0x5*(-parseInt(_0x3998bd(0x2fa))/0x6)+parseInt(_0x3998bd(0x329))/0x7*(-parseInt(_0x3998bd(0x219))/0x8)+-parseInt(_0x3998bd(0x1b8))/0x9;if(_0x116948===_0x30407d)break;else _0x40648a['push'](_0x40648a['shift']());}catch(_0x5302ff){_0x40648a['push'](_0x40648a['shift']());}}}(_0xc2e8,0x3814f));const _0x1e8141=function(){let _0x33d011=!![];return function(_0x29d6e3,_0xc16c55){const _0x2e9472=_0x33d011?function(){const _0x2bc10f=_0x4383;if(_0xc16c55){const _0x47f78a=_0xc16c55[_0x2bc10f(0x249)](_0x29d6e3,arguments);return _0xc16c55=null,_0x47f78a;}}:function(){};return _0x33d011=![],_0x2e9472;};}(),_0x5086f2=_0x1e8141(this,function(){const _0x47665d=_0x4383;return _0x5086f2['toString']()[_0x47665d(0x1c3)]('(((.+)+)+)+$')[_0x47665d(0x25a)]()[_0x47665d(0x281)](_0x5086f2)[_0x47665d(0x1c3)]('(((.+)+)+)+$');});_0x5086f2();'use strict';process[_0x5517e8(0x200)]['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require(_0x5517e8(0x22f)),FileSync=require(_0x5517e8(0x20b)),path=require('path'),crypto=require(_0x5517e8(0x1a0)),forge=require(_0x5517e8(0x356)),bcrypt=require(_0x5517e8(0x364)),jwt=require(_0x5517e8(0x282)),ipaddr=require(_0x5517e8(0x299)),argv=require(_0x5517e8(0x2a3))(process[_0x5517e8(0x280)][_0x5517e8(0x2b6)](0x2))[_0x5517e8(0x280)],uuidRandom=require(_0x5517e8(0x192)),{Telegraf,Markup}=require(_0x5517e8(0x18b)),Mixpanel=require(_0x5517e8(0x2b5)),axios=require('axios'),{GraphQLClient,gql}=require(_0x5517e8(0x1d9)),util=require('util'),fileUpload=require(_0x5517e8(0x18d)),{networkInterfaces}=require('os'),JSZip=require('jszip'),PORT=argv[_0x5517e8(0x338)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x5517e8(0x1ba)](PORT)&&(console[_0x5517e8(0x250)](_0x5517e8(0x220)+PORT+_0x5517e8(0x2a8)),process[_0x5517e8(0x30c)](0x1));const HOST=argv['host']||null,userID=argv[_0x5517e8(0x198)]||'',debugging=argv['d']||![],nodeversion=process[_0x5517e8(0x1d6)][_0x5517e8(0x242)];let bbpath='bb/',bbpath2='';const botfile=_0x5517e8(0x1e4),configfile=_0x5517e8(0x2f5),settingsfile=_0x5517e8(0x2f2),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x5517e8(0x348))[_0x5517e8(0x2ca)]||_0x5517e8(0x1de),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x5517e8(0x2d4)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5517e8(0x27f)),configpath=userID?bbpath+_0x5517e8(0x368)+userID+'/':bbpath+_0x5517e8(0x368),configbackuppath=configpath+_0x5517e8(0x1a7),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x5517e8(0x2de),zippath=userID?bbpath+_0x5517e8(0x1d1)+userID+'/':bbpath+_0x5517e8(0x1d1),loggerfile=fs[_0x5517e8(0x2be)](logspath+_0x5517e8(0x194),{'flags':'a'}),temppath=userID?bbpath+_0x5517e8(0x304)+userID+'/':bbpath+_0x5517e8(0x304);!fs[_0x5517e8(0x2d4)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x5517e8(0x2d4)](configbackuppath)&&fs[_0x5517e8(0x332)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x5517e8(0x332)](logspath);!fs[_0x5517e8(0x2d4)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x5517e8(0x2d4)](temppath)&&fs[_0x5517e8(0x332)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5517e8(0x341)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5517e8(0x165),'onepagemode':![],'marketcapApi':''}})[_0x5517e8(0x2e2)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5517e8(0x341)]({'secure':{},'blacklist':[]})[_0x5517e8(0x2e2)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x5517e8(0x2d3)](_0x5517e8(0x156),{'host':_0x5517e8(0x25e)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x5517e8(0x22b)]&&(settings[_0x5517e8(0x22b)]!=''&&settings[_0x5517e8(0x22b)]!='***')&&settings[_0x5517e8(0x1b2)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x28056f,_0x268300)=>{const _0x4524de=_0x5517e8,_0x7eb62d=/#[A-Z]{3}#/g;if(typeof _0x28056f==_0x4524de(0x34a)){!_0x268300?_0x28056f=_0x28056f[_0x4524de(0x286)](_0x7eb62d,''):(_0x28056f=_0x28056f[_0x4524de(0x286)](/#BLU#/g,_0x4524de(0x274)),_0x28056f=_0x28056f[_0x4524de(0x286)](/#RED#/g,'\x1b[31m'),_0x28056f=_0x28056f[_0x4524de(0x286)](/#YEL#/g,_0x4524de(0x2d8)),_0x28056f=_0x28056f['replace'](/#MAG#/g,_0x4524de(0x294)),_0x28056f=_0x28056f[_0x4524de(0x286)](/#CYA#/g,_0x4524de(0x325)),_0x28056f=_0x28056f[_0x4524de(0x286)](/#RES#/g,_0x4524de(0x309)));;}return _0x28056f;},logger={'screen':_0xaf731d=>{const _0x2e7a54=_0x5517e8;console[_0x2e7a54(0x250)](parseColor(_0xaf731d,!![]));},'simple':_0x2ce0c2=>{const _0x128127=_0x5517e8;console[_0x128127(0x250)](parseColor(_0x2ce0c2,!![])),loggerfile[_0x128127(0x2e2)](util[_0x128127(0x16e)](parseColor(_0x2ce0c2,![]))+'\x0a');},'full':async _0x4b0515=>{const _0xa7af42=_0x5517e8,_0x976ff0=getTimeStamp()+_0xa7af42(0x2ff)+_0x4b0515;console[_0xa7af42(0x250)](parseColor(_0x976ff0,!![])),loggerfile[_0xa7af42(0x2e2)](util[_0xa7af42(0x16e)](parseColor(_0x976ff0,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!='orders')await sendTelegram(settings['telegramChatId'],_0xa7af42(0x24d)+parseColor(_0x4b0515,![]));},'debug':async(_0x1b0637,_0x193a18='')=>{const _0x3bd0e4=_0x5517e8,_0x279926=getTimeStamp()+_0x3bd0e4(0x2dc)+_0x1b0637;if(debugging)console[_0x3bd0e4(0x250)](parseColor(_0x279926,!![]));loggerfile[_0x3bd0e4(0x2e2)](util[_0x3bd0e4(0x16e)](parseColor(_0x279926,![]))+'\x0a');if(_0x193a18){if(debugging)console[_0x3bd0e4(0x250)](_0x193a18);loggerfile[_0x3bd0e4(0x2e2)](util[_0x3bd0e4(0x16e)](_0x193a18)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x399dbd){const _0x5dce3a=_0x5517e8;_0x399dbd[_0x5dce3a(0x25a)]()['includes'](_0x5dce3a(0x301))?(logger[_0x5dce3a(0x36c)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x399dbd[_0x5dce3a(0x338)]+_0x5dce3a(0x1cb)),process[_0x5dce3a(0x20c)]({'terminate':!![]},_0x7d384b=>{})):logger[_0x5dce3a(0x36c)](_0x399dbd);}),process['on']('exit',()=>{const _0x561a09=_0x5517e8;stopAllBots(),process[_0x561a09(0x30c)](0x0);}),process['on'](_0x5517e8(0x2eb),()=>{const _0x49e8ac=_0x5517e8;stopAllBots(),process[_0x49e8ac(0x30c)](0x0);}),process['on'](_0x5517e8(0x362),()=>{const _0x1afe15=_0x5517e8;stopAllBots(),process[_0x1afe15(0x30c)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5517e8(0x348))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5517e8(0x28b)),app=express(),http=require('http')[_0x5517e8(0x2d1)](app);app[_0x5517e8(0x29e)](fileUpload({'useTempFiles':!![]})),app[_0x5517e8(0x24b)](_0x5517e8(0x1d7),async(_0x5dc7fa,_0x951c62)=>{const _0x2b19e0=_0x5517e8,_0x1e931f=_0x5dc7fa[_0x2b19e0(0x228)]['type'],_0x3d5a60=getClientsWithBotID('botmanager'),_0x2f4f56=_0x5dc7fa[_0x2b19e0(0x210)][_0x2b19e0(0x35a)],_0x125fdd=timelyDecrypt(_0x2f4f56,![]),_0x1a4496=_0x3d5a60['find'](_0x326673=>_0x326673[_0x2b19e0(0x35a)]==_0x125fdd);if(_0x1a4496){const _0x2a6c9e=normalizeIP(_0x5dc7fa[_0x2b19e0(0x308)][_0x2b19e0(0x20e)])['store'],_0x4b5b59=_0x5dc7fa[_0x2b19e0(0x210)]['tkn'];if(validateAccess(_0x4b5b59,_0x125fdd,_0x2a6c9e)['allow'])_0x1e931f==_0x2b19e0(0x201)&&await backupConfigFiles(),await zipFiles(_0x1e931f),_0x951c62[_0x2b19e0(0x2ab)](zippath+(_0x1e931f+_0x2b19e0(0x2ae)),_0xc2ad80=>{const _0x535539=_0x2b19e0;_0xc2ad80&&(logger[_0x535539(0x307)](_0x535539(0x351)+_0x1e931f),logger['simple'](_0xc2ad80));});else logger[_0x2b19e0(0x307)](_0x2b19e0(0x209)+_0x1e931f+_0x2b19e0(0x2c2));}else logger['full'](_0x2b19e0(0x209)+_0x1e931f+_0x2b19e0(0x272));}),app[_0x5517e8(0x352)](_0x5517e8(0x231),async(_0x1d4ef4,_0x5675ee)=>{const _0x1a27cd=_0x5517e8,_0x3f7877=getClientsWithBotID(_0x1a27cd(0x1ab)),_0x1b61e1=_0x1d4ef4['headers']['uuid'],_0x2ee291=timelyDecrypt(_0x1b61e1,![]),_0x1a3188=_0x3f7877[_0x1a27cd(0x1e0)](_0x3091e3=>_0x3091e3[_0x1a27cd(0x35a)]==_0x2ee291);logger[_0x1a27cd(0x164)](_0x1a27cd(0x1c2));if(_0x1a3188){const _0x55a835=normalizeIP(_0x1d4ef4[_0x1a27cd(0x308)][_0x1a27cd(0x20e)])['store'],_0x2891e2=_0x1d4ef4[_0x1a27cd(0x210)][_0x1a27cd(0x1e7)];if(validateAccess(_0x2891e2,_0x2ee291,_0x55a835)['allow']){if(_0x1d4ef4[_0x1a27cd(0x1df)]){const _0x3c86a3=_0x1d4ef4['files'][_0x1a27cd(0x1b1)];await _0x3c86a3['mv'](temppath+_0x3c86a3['name']),_0x5675ee['send']({'status':!![],'message':'File\x20uploaded'});const _0x21b450=getBotsWithMode();_0x21b450[_0x1a27cd(0x236)]>0x0?confirmRestore(temppath,_0x3c86a3['name']):unzipFile(temppath,_0x3c86a3[_0x1a27cd(0x2f9)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x1a27cd(0x307)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x5517e8(0x29e)](express[_0x5517e8(0x36b)](path[_0x5517e8(0x311)](__dirname,bbpath2,'build2'))),app[_0x5517e8(0x29e)](express['static'](path[_0x5517e8(0x311)](__dirname,bbpath2,_0x5517e8(0x363)))),app[_0x5517e8(0x24b)]('/',function(_0x2f0870,_0x22c894){const _0x59a754=_0x5517e8;_0x22c894['sendFile'](path[_0x59a754(0x311)](__dirname,bbpath2,_0x59a754(0x2aa),_0x59a754(0x31c)));}),app[_0x5517e8(0x24b)](_0x5517e8(0x32b),function(_0x314c84,_0x4035fd){const _0x12af92=_0x5517e8;_0x4035fd[_0x12af92(0x26d)](path[_0x12af92(0x311)](__dirname,bbpath2,'build',_0x12af92(0x31c)));}),app[_0x5517e8(0x24b)](_0x5517e8(0x277),(_0x1d5c47,_0x269216)=>{const _0x169b0e=_0x5517e8;_0x269216[_0x169b0e(0x26d)](path[_0x169b0e(0x311)](__dirname,bbpath2,_0x169b0e(0x363),'index.html'));}),app[_0x5517e8(0x24b)](_0x5517e8(0x1d0),(_0x5b7cfa,_0x582c24)=>{const _0x58fade=_0x5517e8;_0x582c24[_0x58fade(0x26d)](path['join'](__dirname,bbpath2,_0x58fade(0x363),_0x58fade(0x31c)));}),app['get']('/:bot/coins',(_0x1ef967,_0x4f602a)=>{const _0x427765=_0x5517e8;_0x4f602a[_0x427765(0x26d)](path[_0x427765(0x311)](__dirname,bbpath2,'build',_0x427765(0x31c)));}),app[_0x5517e8(0x24b)](_0x5517e8(0x25d),(_0xf725bb,_0x4699ed)=>{const _0x446076=_0x5517e8;_0x4699ed[_0x446076(0x26d)](path['join'](__dirname,bbpath2,_0x446076(0x363),_0x446076(0x31c)));}),app[_0x5517e8(0x24b)]('/:bot/configuration',(_0x140639,_0x2e2a65)=>{const _0x17e538=_0x5517e8;_0x2e2a65[_0x17e538(0x26d)](path[_0x17e538(0x311)](__dirname,bbpath2,_0x17e538(0x363),'index.html'));}),app['get']('/:bot/support',(_0x26b807,_0x5da8ae)=>{const _0x475305=_0x5517e8;_0x5da8ae[_0x475305(0x26d)](path[_0x475305(0x311)](__dirname,bbpath2,_0x475305(0x363),_0x475305(0x31c)));});if(HOST)http[_0x5517e8(0x1bb)](PORT,HOST);else http['listen'](PORT);const io=require(_0x5517e8(0x199))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x1c3696=_0x5517e8;let _0x14ccb6=_0x1c3696(0x327);const _0x196b94=networkInterfaces(),_0x1249ae={};for(const _0x3b04ba of Object[_0x1c3696(0x234)](_0x196b94)){for(const _0x117d55 of _0x196b94[_0x3b04ba]){if((_0x117d55[_0x1c3696(0x26f)]==_0x1c3696(0x215)||_0x117d55[_0x1c3696(0x26f)]==0x4)&&!_0x117d55[_0x1c3696(0x15e)]){const _0x1aa4de=ipaddr[_0x1c3696(0x2f4)](_0x117d55[_0x1c3696(0x270)])[_0x1c3696(0x2f0)]();_0x1aa4de!=_0x1c3696(0x30b)&&(!_0x1249ae[_0x3b04ba]&&(_0x1249ae[_0x3b04ba]=[]),_0x1249ae[_0x3b04ba]['push'](_0x117d55[_0x1c3696(0x270)]),_0x14ccb6=_0x117d55[_0x1c3696(0x270)]);}}}return{'serverip':_0x14ccb6,'netinterfaces':_0x1249ae};}async function startServer(){const _0x3d9748=_0x5517e8,{serverip:_0x3fa899,netinterfaces:_0x29a856}=getServerIP();logger[_0x3d9748(0x36c)](''),logger[_0x3d9748(0x36c)](_0x3d9748(0x32e)),await logger[_0x3d9748(0x307)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x3d9748(0x1ac)+(environment==_0x3d9748(0x1f3)?_0x3d9748(0x225):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x3d9748(0x1af)+_0x3fa899+':'+PORT+_0x3d9748(0x161))),logger[_0x3d9748(0x36c)](_0x3d9748(0x32e));if(config[_0x3d9748(0x236)]!=0x0)for(const _0x288c3e of config){const _0x4805fa=_0x288c3e[_0x3d9748(0x1a3)]=='auto'?'a':'m';if(_0x288c3e[_0x3d9748(0x2c5)]==_0x3d9748(0x361)||_0x288c3e[_0x3d9748(0x2c5)]==_0x3d9748(0x2fe))await logger[_0x3d9748(0x307)](_0x3d9748(0x28a)+_0x4805fa+')\x20|\x20Bot\x20'+_0x288c3e[_0x3d9748(0x15b)]+_0x3d9748(0x261)+_0x288c3e['botname']),startBot([_0x288c3e[_0x3d9748(0x15b)],userID],{'cwd':bbpath},function(_0x23a7a3){const _0x4a1b3b=_0x3d9748;if(_0x23a7a3)logger[_0x4a1b3b(0x307)](_0x23a7a3);});else(_0x288c3e['status']==_0x3d9748(0x359)||_0x288c3e[_0x3d9748(0x2c5)]==_0x3d9748(0x238))&&await logger[_0x3d9748(0x307)](_0x3d9748(0x185)+_0x4805fa+_0x3d9748(0x33e)+_0x288c3e['botID']+_0x3d9748(0x261)+_0x288c3e['botname']);}else!newBot&&logger[_0x3d9748(0x36c)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x3d9748(0x32e)),logger[_0x3d9748(0x36c)](''),await logger[_0x3d9748(0x164)](_0x3d9748(0x306)+nodeversion),await logger[_0x3d9748(0x164)](_0x3d9748(0x260),_0x29a856);}function startSocket(){const _0x26654f=_0x5517e8;io['on'](_0x26654f(0x35b),_0x49d0f8=>{const _0x5a8916=_0x26654f;let _0x21b0c5,_0x409224,_0x32ae57,_0x3520f9,_0x33ae7d;const _0x4d02a5=_0x49d0f8[_0x5a8916(0x162)]['headers'][_0x5a8916(0x173)];_0x409224=_0x4d02a5['match'](/bot[0-9]{3}/);if(_0x409224)_0x32ae57=_0x409224[0x0]['match'](/[0-9]{3}/);if(_0x32ae57)_0x21b0c5=_0x32ae57[0x0];else _0x21b0c5=_0x5a8916(0x1ab);const _0xc38fcf=_0x49d0f8['handshake'][_0x5a8916(0x169)][_0x5a8916(0x2e0)];if(!_0xc38fcf)_0x49d0f8[_0x5a8916(0x1bf)](_0x5a8916(0x2c5),{'publicKey':secure[_0x5a8916(0x1ed)]});else{_0x3520f9=timelyDecrypt(_0xc38fcf,![]);if(!_0x3520f9)_0x49d0f8['emit'](_0x5a8916(0x2c5),{'publicKey':secure[_0x5a8916(0x1ed)]});else{_0x33ae7d=normalizeIP(_0x49d0f8['conn']['remoteAddress'])['store'];if(!devices[_0x3520f9])devices[_0x3520f9]={'uuid':_0x3520f9,'access':{'token':null}};devices[_0x3520f9]['ip']=_0x33ae7d;const _0x2190c1=addClient(_0x49d0f8['id'],_0x3520f9,_0x21b0c5);setAccess(_0x2190c1),emitMessages(),_0x49d0f8['on'](_0x5a8916(0x297),_0x315d0d=>{const _0x57c3bb=_0x5a8916,_0x1e2571=timelyDecrypt(_0x315d0d['password'],!![],_0x57c3bb(0x2e8));if(_0x1e2571){_0x315d0d={'username':_0x315d0d[_0x57c3bb(0x326)],'password':_0x1e2571},devices[_0x3520f9][_0x57c3bb(0x1d2)]=validateCredentials(_0x315d0d,_0x3520f9);if(devices[_0x3520f9][_0x57c3bb(0x1d2)][_0x57c3bb(0x2c8)]==![]&&devices[_0x3520f9]['access'][_0x57c3bb(0x1e1)]==_0x57c3bb(0x2bd))_0x49d0f8[_0x57c3bb(0x1bf)](_0x57c3bb(0x2c5),{'access':devices[_0x3520f9]['access']}),loginAccess2FA(_0x3520f9,_0x33ae7d);else{if(devices[_0x3520f9]['access']['allow']==![]&&devices[_0x3520f9]['access']['reason']==_0x57c3bb(0x347))_0x49d0f8['emit'](_0x57c3bb(0x2c5),{'access':devices[_0x3520f9][_0x57c3bb(0x1d2)]});else devices[_0x3520f9][_0x57c3bb(0x1d2)][_0x57c3bb(0x2c8)]&&devices[_0x3520f9]['access'][_0x57c3bb(0x1e1)]==_0x57c3bb(0x232)&&(getClientsWithUuid(_0x3520f9)[_0x57c3bb(0x2a0)](_0x2e9588=>{setAccess(_0x2e9588);}),logger[_0x57c3bb(0x164)](_0x57c3bb(0x214)+_0x3520f9['slice'](-0x8)),setTokenRefresh(_0x3520f9),setSessionTimeout('login',_0x3520f9));}}else logger[_0x57c3bb(0x307)](_0x57c3bb(0x21a));}),_0x49d0f8['on']('reset-password',()=>{resetPassword();}),_0x49d0f8['on'](_0x5a8916(0x1ef),_0x497ecf=>{removeClient(_0x49d0f8['id']);}),_0x21b0c5==_0x5a8916(0x1ab)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x37723d){const _0x4ac2d7=_0x5517e8;if(_0x37723d!=_0x4ac2d7(0x1ab)&&config[_0x4ac2d7(0x343)]!=''){if(pid[_0x37723d])pid[_0x37723d][_0x4ac2d7(0x20c)]({'function':_0x4ac2d7(0x349),'args':null});}_0x37723d!='botmanager'&&broadcastToBots(_0x4ac2d7(0x357),JSON['stringify'](config));}function reloadBotManager(){const _0x489b26=_0x5517e8;getClientsWithBotID(_0x489b26(0x1ab))[_0x489b26(0x2a0)](_0x354b3a=>{const _0x3d92e5=_0x489b26;getSocket(_0x354b3a['id'])[_0x3d92e5(0x1bf)](_0x3d92e5(0x2c5),{'access':{'allow':![],'reason':_0x3d92e5(0x237),'token':null}});});}function getSocket(_0x5a9ca7){const _0x394f57=_0x5517e8,_0x51ce19=io[_0x394f57(0x2c1)]['get']('/');return _0x51ce19[_0x394f57(0x160)][_0x394f57(0x24b)](_0x5a9ca7);}function setAccess(_0x22dd42){const _0x2aaaae=_0x5517e8,_0x43812c=getSocket(_0x22dd42['id']),_0xacdd7e=_0x22dd42[_0x2aaaae(0x35a)],_0x563c3d=_0x22dd42[_0x2aaaae(0x16f)];devices[_0xacdd7e]['access']=validateAccess(devices[_0xacdd7e][_0x2aaaae(0x1d2)]['token'],_0xacdd7e),logger[_0x2aaaae(0x164)](_0x2aaaae(0x176)+devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x1e1)]+_0x2aaaae(0x36d)+_0x22dd42['id'][_0x2aaaae(0x2b6)](-0x8)+_0x2aaaae(0x175)+_0xacdd7e[_0x2aaaae(0x2b6)](-0x8)),_0x43812c[_0x2aaaae(0x311)](_0xacdd7e);if(devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x2c8)]){_0x43812c[_0x2aaaae(0x311)](_0x563c3d);if(_0x563c3d=='botmanager')initializeSocketBotManager(_0x43812c);else initializeSocketBot(_0x43812c);initClient(_0x563c3d);}devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x240)]&&devices[_0xacdd7e]['access'][_0x2aaaae(0x1e1)]==_0x2aaaae(0x1a5)&&setSessionTimeout(_0x2aaaae(0x320),_0xacdd7e),devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x240)]&&devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x1e1)]==_0x2aaaae(0x321)&&setSessionTimeout(_0x2aaaae(0x297),_0xacdd7e),_0x43812c[_0x2aaaae(0x1bf)](_0x2aaaae(0x2c5),{'status':_0x22dd42[_0x2aaaae(0x33d)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xacdd7e][_0x2aaaae(0x1d2)],'externalip':devices[_0xacdd7e]['ip'],'publicKey':secure[_0x2aaaae(0x1ed)],'userid':settings[_0x2aaaae(0x172)],'validInstallation':validInstallation}),devices[_0xacdd7e]['access'][_0x2aaaae(0x2c8)]==![]&&devices[_0xacdd7e][_0x2aaaae(0x1d2)][_0x2aaaae(0x1e1)]==_0x2aaaae(0x346)&&temporaryAccess2FA(_0xacdd7e,devices[_0xacdd7e]['ip']);}function setSessionTimeout(_0x24e9f0,_0x21d13e){const _0x1f9c2b=_0x5517e8;let _0xab44ac;if(_0x24e9f0==_0x1f9c2b(0x297))_0xab44ac=loginExpiry*0x3c*0x3e8;else _0xab44ac=devices[_0x21d13e][_0x1f9c2b(0x354)][_0x1f9c2b(0x30d)]*0x3c*0x3e8-(new Date()[_0x1f9c2b(0x15a)]()-devices[_0x21d13e][_0x1f9c2b(0x354)][_0x1f9c2b(0x2a9)]);if(devices[_0x21d13e][_0x1f9c2b(0x2a5)])clearTimeout(devices[_0x21d13e][_0x1f9c2b(0x2a5)]);devices[_0x21d13e][_0x1f9c2b(0x2a5)]=setTimeout(()=>{const _0x175269=_0x1f9c2b;if(devices[_0x21d13e]['pidRefreshToken'])clearTimeout(devices[_0x21d13e][_0x175269(0x2e6)]);removeSocketListeners(_0x21d13e),addBlacklist(_0x21d13e),devices[_0x21d13e][_0x175269(0x354)]=null,devices[_0x21d13e]['telegram2FaApproval']=null,devices[_0x21d13e][_0x175269(0x1d2)][_0x175269(0x240)]=null,logger[_0x175269(0x164)](_0x175269(0x1f0)+_0x21d13e[_0x175269(0x2b6)](-0x8)),devices[_0x21d13e]['access']=validateAccess(devices[_0x21d13e]['access'][_0x175269(0x240)],_0x21d13e),!(devices[_0x21d13e][_0x175269(0x1d2)][_0x175269(0x2c8)]&&devices[_0x21d13e]['access']['reason']==_0x175269(0x167))&&(_0x24e9f0=='login'?io['to'](_0x21d13e)[_0x175269(0x1bf)]('status',{'access':{'allow':![],'reason':_0x175269(0x2e3),'token':null}}):io['to'](_0x21d13e)[_0x175269(0x1bf)]('status',{'access':{'allow':![],'reason':_0x175269(0x1b3),'token':null}})),devices[_0x21d13e][_0x175269(0x1d2)][_0x175269(0x240)]=null;},_0xab44ac);}function setTokenRefresh(_0x4207a8){const _0x338afc=_0x5517e8;if(devices[_0x4207a8][_0x338afc(0x2e6)])clearTimeout(devices[_0x4207a8][_0x338afc(0x2e6)]);devices[_0x4207a8][_0x338afc(0x2e6)]=setTimeout(()=>{const _0xff8741=_0x338afc;getClientsWithUuid(_0x4207a8)[_0xff8741(0x236)]!=0x0?(devices[_0x4207a8][_0xff8741(0x1d2)]=refreshToken(_0x4207a8),io['to'](_0x4207a8)[_0xff8741(0x1bf)]('status',{'status':_0xff8741(0x2b9),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4207a8][_0xff8741(0x1d2)],'externalip':devices[_0x4207a8]['ip'],'publicKey':secure[_0xff8741(0x1ed)],'validInstallation':validInstallation}),setTokenRefresh(_0x4207a8)):clearTimeout(devices[_0x4207a8][_0xff8741(0x2e6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4c82f6){const _0x3c6620=_0x5517e8,_0x3d81a5=getClient(_0x4c82f6['id'])[_0x3c6620(0x35a)];_0x4c82f6[_0x3c6620(0x1bf)](_0x3c6620(0x357),config),_0x4c82f6[_0x3c6620(0x1bf)](_0x3c6620(0x211),cleanSettings()),_0x4c82f6['on'](_0x3c6620(0x21c),_0x43d945=>{const _0x246ce8=_0x3c6620;if(validateAccess(_0x43d945,_0x3d81a5)[_0x246ce8(0x2c8)])addBot();else logger[_0x246ce8(0x307)](_0x246ce8(0x179));}),_0x4c82f6['on']('update-bot',(_0x204c0d,_0x3f0fab)=>{const _0x25a5b9=_0x3c6620;if(validateAccess(_0x3f0fab,_0x3d81a5)[_0x25a5b9(0x2c8)])toggleBot(_0x204c0d[_0x25a5b9(0x15b)],_0x204c0d[_0x25a5b9(0x2c5)],_0x204c0d[_0x25a5b9(0x222)]);else logger[_0x25a5b9(0x307)](_0x25a5b9(0x1c0));}),_0x4c82f6['on'](_0x3c6620(0x1cd),(_0x4bdc36,_0x463312)=>{const _0x194f3d=_0x3c6620;if(validateAccess(_0x463312,_0x3d81a5)[_0x194f3d(0x2c8)])toggleBotMode(_0x4bdc36);else logger[_0x194f3d(0x307)](_0x194f3d(0x1c0));}),_0x4c82f6['on']('delete-bot',(_0x1d8d8d,_0x2673f9)=>{const _0x1aef31=_0x3c6620;if(validateAccess(_0x2673f9,_0x3d81a5)[_0x1aef31(0x2c8)])deleteBot(_0x1d8d8d);else logger[_0x1aef31(0x307)](_0x1aef31(0x170));}),_0x4c82f6['on'](_0x3c6620(0x195),(_0x737a8,_0x3df7f7)=>{const _0x5fb9d9=_0x3c6620;if(validateAccess(_0x3df7f7,_0x3d81a5)[_0x5fb9d9(0x2c8)])storeSettings(_0x737a8,!![]);else logger[_0x5fb9d9(0x307)](_0x5fb9d9(0x1a6));}),_0x4c82f6['on'](_0x3c6620(0x2d6),_0x415d9a=>{const _0x81a816=_0x3c6620;if(validateAccess(_0x415d9a,_0x3d81a5)[_0x81a816(0x2c8)])updateBB(_0x81a816(0x1a2));else logger['full'](_0x81a816(0x18f));}),_0x4c82f6['on']('reinstall-bb',_0x195bc7=>{const _0x4e44f0=_0x3c6620;if(validateAccess(_0x195bc7,_0x3d81a5)[_0x4e44f0(0x2c8)])updateBB(_0x4e44f0(0x244));else logger[_0x4e44f0(0x307)](_0x4e44f0(0x27a));}),_0x4c82f6['on'](_0x3c6620(0x27e),_0xed13f=>{const _0x4a7762=_0x3c6620;if(validateAccess(_0xed13f,_0x3d81a5)['allow']){const _0x4f65fa=getClient(_0x4c82f6['id']);if(_0x4f65fa)getBackupFiles(_0x4f65fa[_0x4a7762(0x35a)]);else logger[_0x4a7762(0x307)](_0x4a7762(0x1b5));}else logger[_0x4a7762(0x307)](_0x4a7762(0x344));}),_0x4c82f6['on'](_0x3c6620(0x1fe),(_0x484244,_0x3a573e)=>{const _0x2ab2ea=_0x3c6620;if(validateAccess(_0x3a573e,_0x3d81a5)[_0x2ab2ea(0x2c8)])restoreBackupFile(_0x484244);else logger[_0x2ab2ea(0x307)](_0x2ab2ea(0x35f));}),_0x4c82f6['on'](_0x3c6620(0x17a),_0x15c88f=>{const _0x4c14c9=_0x3c6620;if(validateAccess(_0x15c88f,_0x3d81a5)['allow'])getMessages();else logger[_0x4c14c9(0x307)](_0x4c14c9(0x1f7));}),_0x4c82f6['on']('confirm-message',(_0x60347e,_0x279799)=>{const _0x58568d=_0x3c6620;if(validateAccess(_0x279799,_0x3d81a5)[_0x58568d(0x2c8)])confirmMessage(_0x60347e);else logger[_0x58568d(0x307)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4c82f6['on'](_0x3c6620(0x26e),_0x2c1bcd=>{const _0x4b740d=_0x3c6620;if(validateAccess(_0x2c1bcd,_0x3d81a5)[_0x4b740d(0x2c8)]){if(devices[_0x3d81a5][_0x4b740d(0x2e6)])clearTimeout(devices[_0x3d81a5][_0x4b740d(0x2e6)]);if(devices[_0x3d81a5][_0x4b740d(0x2a5)])clearTimeout(devices[_0x3d81a5][_0x4b740d(0x2a5)]);removeSocketListeners(getClient(_0x4c82f6['id'])['uuid']),addBlacklist(_0x3d81a5),devices[_0x3d81a5]['telegramIpApproval']=null,devices[_0x3d81a5]['telegram2FaApproval']=null,devices[_0x3d81a5]['access'][_0x4b740d(0x240)]=null,logger['debug'](_0x4b740d(0x1f1)+_0x3d81a5[_0x4b740d(0x2b6)](-0x8)),io['to'](getClient(_0x4c82f6['id'])[_0x4b740d(0x35a)])['emit'](_0x4b740d(0x2c5),{'access':{'allow':![],'reason':_0x4b740d(0x157),'token':null}});}else logger['full'](_0x4b740d(0x2e7));});}function initializeSocketBot(_0xede9d4){const _0x159f6e=_0x5517e8,_0x4b11d8=getClient(_0xede9d4['id'])[_0x159f6e(0x16f)],_0x54e6a8=getClient(_0xede9d4['id'])[_0x159f6e(0x35a)];_0xede9d4['on']('get-logs',(_0x11d773,_0x449810)=>{const _0x94fc8a=_0x159f6e;if(validateAccess(_0x449810,_0x54e6a8)['allow']){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x94fc8a(0x20c)]({'function':_0x94fc8a(0x20d),'args':_0x11d773});}else logger[_0x94fc8a(0x307)](_0x94fc8a(0x2a2));}),_0xede9d4['on'](_0x159f6e(0x2dd),(_0x5e81c4,_0x53449f)=>{const _0x46c746=_0x159f6e;if(validateAccess(_0x53449f,_0x54e6a8)[_0x46c746(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x46c746(0x20c)]({'function':_0x46c746(0x2cd),'args':_0x5e81c4});}else logger[_0x46c746(0x307)](_0x46c746(0x34d));}),_0xede9d4['on'](_0x159f6e(0x182),(_0x534ac3,_0x2e67de)=>{const _0x286c5e=_0x159f6e;if(validateAccess(_0x2e67de,_0x54e6a8)[_0x286c5e(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x286c5e(0x20c)]({'function':_0x286c5e(0x2b0),'args':_0x534ac3});}else logger[_0x286c5e(0x307)](_0x286c5e(0x2b8));}),_0xede9d4['on'](_0x159f6e(0x33c),(_0x1662f4,_0x48755b)=>{const _0x2fe35e=_0x159f6e;if(validateAccess(_0x48755b,_0x54e6a8)['allow']){if(pid[_0x4b11d8])pid[_0x4b11d8]['send']({'function':_0x2fe35e(0x15f),'args':_0x1662f4});}else logger[_0x2fe35e(0x307)](_0x2fe35e(0x2ec));}),_0xede9d4['on']('store-headless',(_0x5b932b,_0x4da2a1)=>{const _0x5d0a76=_0x159f6e;if(validateAccess(_0x4da2a1,_0x54e6a8)[_0x5d0a76(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8]['send']({'function':_0x5d0a76(0x2da),'args':_0x5b932b});}else logger[_0x5d0a76(0x307)](_0x5d0a76(0x1d5));}),_0xede9d4['on'](_0x159f6e(0x369),(_0x3bbee6,_0xf762ba)=>{const _0x146936=_0x159f6e;if(validateAccess(_0xf762ba,_0x54e6a8)['allow']){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x146936(0x20c)]({'function':_0x146936(0x353),'args':_0x3bbee6});}else logger[_0x146936(0x307)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0xede9d4['on'](_0x159f6e(0x2fb),_0x4be71b=>{const _0x160472=_0x159f6e;if(validateAccess(_0x4be71b,_0x54e6a8)[_0x160472(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x160472(0x20c)]({'function':_0x160472(0x2ad),'args':null});}else logger['full'](_0x160472(0x317));}),_0xede9d4['on'](_0x159f6e(0x2ee),_0x6301d2=>{const _0x26ae77=_0x159f6e;if(validateAccess(_0x6301d2,_0x54e6a8)[_0x26ae77(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x26ae77(0x20c)]({'function':_0x26ae77(0x336),'args':null});}else logger[_0x26ae77(0x307)](_0x26ae77(0x23c));}),_0xede9d4['on']('place-order',(_0x4d1e58,_0x529bbe)=>{const _0x2227b3=_0x159f6e;if(validateAccess(_0x529bbe,_0x54e6a8)[_0x2227b3(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8][_0x2227b3(0x20c)]({'function':_0x2227b3(0x1fb),'args':_0x4d1e58});}else logger['full'](_0x2227b3(0x158));}),_0xede9d4['on']('cancel-loading',_0x35df63=>{const _0x7b4b42=_0x159f6e;if(validateAccess(_0x35df63,_0x54e6a8)[_0x7b4b42(0x2c8)]){if(pid[_0x4b11d8])pid[_0x4b11d8]['send']({'function':_0x7b4b42(0x322),'args':null});}else logger[_0x7b4b42(0x307)](_0x7b4b42(0x1ae));}),_0xede9d4['on'](_0x159f6e(0x30e),_0x2ff97c=>{const _0x4fde4b=_0x159f6e;if(validateAccess(_0x2ff97c,_0x54e6a8)['allow']){if(pid[_0x4b11d8])pid[_0x4b11d8]['send']({'function':_0x4fde4b(0x271),'args':null});}else logger[_0x4fde4b(0x307)](_0x4fde4b(0x241));}),_0xede9d4['on']('update-bb',_0x37098a=>{const _0x35a04d=_0x159f6e;if(validateAccess(_0x37098a,_0x54e6a8)['allow'])updateBB(_0x35a04d(0x1a2));else logger[_0x35a04d(0x307)](_0x35a04d(0x18f));}),_0xede9d4['on'](_0x159f6e(0x17a),_0x40bb55=>{const _0x28a40b=_0x159f6e;if(validateAccess(_0x40bb55,_0x54e6a8)['allow'])getMessages();else logger[_0x28a40b(0x307)](_0x28a40b(0x1f7));}),_0xede9d4['on']('confirm-message',(_0x5ddfc2,_0x468e47)=>{const _0x17ea35=_0x159f6e;if(validateAccess(_0x468e47,_0x54e6a8)[_0x17ea35(0x2c8)])confirmMessage(_0x5ddfc2);else logger['full'](_0x17ea35(0x23f));}),_0xede9d4['on'](_0x159f6e(0x26e),_0x35f4b1=>{const _0x5509b8=_0x159f6e;if(validateAccess(_0x35f4b1,_0x54e6a8)[_0x5509b8(0x2c8)]){if(devices[_0x54e6a8][_0x5509b8(0x2e6)])clearTimeout(devices[_0x54e6a8]['pidRefreshToken']);if(devices[_0x54e6a8][_0x5509b8(0x2a5)])clearTimeout(devices[_0x54e6a8][_0x5509b8(0x2a5)]);removeSocketListeners(getClient(_0xede9d4['id'])['uuid']),addBlacklist(_0x54e6a8),devices[_0x54e6a8][_0x5509b8(0x354)]=null,devices[_0x54e6a8][_0x5509b8(0x32d)]=null,devices[_0x54e6a8][_0x5509b8(0x1d2)][_0x5509b8(0x240)]=null,logger['debug'](_0x5509b8(0x1f1)+_0x54e6a8[_0x5509b8(0x2b6)](-0x8)),io['to'](getClient(_0xede9d4['id'])[_0x5509b8(0x35a)])[_0x5509b8(0x1bf)](_0x5509b8(0x2c5),{'access':{'allow':![],'reason':_0x5509b8(0x157),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x553d1b){const _0x2c22a5=_0x5517e8;getClientsWithUuid(_0x553d1b)[_0x2c22a5(0x2a0)](_0x328fc7=>{const _0x15ba24=_0x2c22a5;getSocket(_0x328fc7['id'])[_0x15ba24(0x1e5)]();});}function cleanSettings(){const _0x21ce7c=_0x5517e8;let _0x3f34b8=settings;return settings[_0x21ce7c(0x22b)]&&settings['telegramToken']!=''&&(_0x3f34b8={..._0x3f34b8,'telegramToken':'************'}),settings[_0x21ce7c(0x2fc)]&&settings[_0x21ce7c(0x2fc)]!=''&&(_0x3f34b8={..._0x3f34b8,'bbPassword':_0x21ce7c(0x337)}),settings[_0x21ce7c(0x366)]&&settings[_0x21ce7c(0x366)]!=''&&(_0x3f34b8={..._0x3f34b8,'marketcapApi':'************'}),(settings[_0x21ce7c(0x2fc)]&&settings[_0x21ce7c(0x2fc)]==_0x21ce7c(0x33a)||settings[_0x21ce7c(0x22b)]&&settings[_0x21ce7c(0x22b)]==_0x21ce7c(0x33a)||settings[_0x21ce7c(0x366)]&&settings['marketcapApi']==_0x21ce7c(0x33a))&&(_0x3f34b8={..._0x3f34b8,'restored':{'password':settings[_0x21ce7c(0x2fc)]==_0x21ce7c(0x33a),'telegram':settings[_0x21ce7c(0x22b)]==_0x21ce7c(0x33a),'marketcap':settings[_0x21ce7c(0x366)]==_0x21ce7c(0x33a)}}),_0x3f34b8;}async function updateBB(_0x2619d5){const _0x5d26d4=_0x5517e8;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x26ead9=>{const _0x424ccd=_0x4383;restartBot(_0x26ead9[_0x424ccd(0x15b)]);});if(_0x2619d5==_0x5d26d4(0x1a2))process[_0x5d26d4(0x20c)]({'update':!![],'environment':environment},_0x27c29e=>{});else _0x2619d5==_0x5d26d4(0x244)&&process[_0x5d26d4(0x20c)]({'reinstall':!![],'environment':environment},_0x36f3a4=>{});}function startBot(_0x325b35,_0x5e0669,_0x1ef273){const _0x1e84d1=_0x5517e8;if(debugging)_0x325b35[_0x1e84d1(0x292)]('-d');let _0x1937d7=![];const _0x5e3ad3=_0x325b35[0x0];_0x5e0669={..._0x5e0669,'stdio':[_0x1e84d1(0x22e),_0x1e84d1(0x22e),'inherit',_0x1e84d1(0x2d5)]},pid[_0x5e3ad3]=childProcess[_0x1e84d1(0x19d)](botfile,_0x325b35,_0x5e0669),pid[_0x5e3ad3]['on'](_0x1e84d1(0x205),_0x521ad3=>{const _0x3e75f8=_0x1e84d1;switch(Object[_0x3e75f8(0x234)](_0x521ad3)[0x0]){case _0x3e75f8(0x36a):updateBotName(_0x5e3ad3,_0x521ad3[_0x3e75f8(0x36a)]);break;case _0x3e75f8(0x166):updateBotManager();break;case'status':updateStatus(_0x5e3ad3,_0x521ad3[_0x3e75f8(0x2c5)]);break;case _0x3e75f8(0x222):updateLive(_0x5e3ad3,_0x521ad3[_0x3e75f8(0x222)]);break;case _0x3e75f8(0x184):updateLive(_0x5e3ad3,_0x521ad3[_0x3e75f8(0x184)]),io['to'](_0x5e3ad3)[_0x3e75f8(0x1bf)](_0x3e75f8(0x2c5),{'access':{'allow':![],'reason':_0x3e75f8(0x237),'token':null}});break;case'stop':_0x521ad3[_0x3e75f8(0x2b1)]==_0x3e75f8(0x25c)&&restartBot(_0x5e3ad3);_0x521ad3[_0x3e75f8(0x2b1)]=='kill'&&toggleBot(_0x5e3ad3,_0x3e75f8(0x359),_0x3e75f8(0x28f));break;case _0x3e75f8(0x334):sendTelegramBot(_0x5e3ad3,_0x521ad3[_0x3e75f8(0x334)]);break;case _0x3e75f8(0x2a4):sendTelegramMsg(_0x521ad3[_0x3e75f8(0x2a4)]);break;case _0x3e75f8(0x298):io['to'](_0x5e3ad3)[_0x3e75f8(0x1bf)](_0x521ad3[_0x3e75f8(0x298)],_0x521ad3[_0x3e75f8(0x355)]);break;}}),pid[_0x5e3ad3]['on'](_0x1e84d1(0x25b),function(_0x53c115){if(_0x1937d7)return;_0x1937d7=!![],_0x1ef273(_0x53c115);}),pid[_0x5e3ad3]['on'](_0x1e84d1(0x30c),async function(_0x9c7675){const _0x52dbaa=_0x1e84d1;if(terminating)return;if(installingUpdate){io[_0x52dbaa(0x1ee)]();return;}if(_0x1937d7)return;_0x1937d7=!![],_0x1ef273(null);const _0x29bb19=dbConfig[_0x52dbaa(0x24b)]('bots')[_0x52dbaa(0x1e0)]({'botID':_0x5e3ad3})[_0x52dbaa(0x367)]();_0x29bb19&&(_0x29bb19[_0x52dbaa(0x2c5)]==_0x52dbaa(0x361)||_0x29bb19['status']==_0x52dbaa(0x2fe))&&(await sleep(0x3e8),updateLive(_0x5e3ad3,_0x52dbaa(0x28f)),logger[_0x52dbaa(0x307)](_0x52dbaa(0x163)+_0x5e3ad3),startBot([_0x5e3ad3,userID],{'cwd':bbpath},function(_0x524b98){const _0x57c353=_0x52dbaa;if(_0x524b98)logger[_0x57c353(0x307)](_0x524b98);}));});}function stopBot(_0x5b3a13){const _0x2534dc=_0x5517e8;getClientsWithBotID(_0x5b3a13)[_0x2534dc(0x2a0)](_0x5f1b08=>{const _0x2c5004=_0x2534dc;getSocket(_0x5f1b08['id'])[_0x2c5004(0x1ef)](!![]),removeClient(_0x5f1b08['id']);}),pid[_0x5b3a13]&&(pid[_0x5b3a13][_0x2534dc(0x226)](),pid[_0x5b3a13]=null);}function stopAllBots(){const _0x133b88=_0x5517e8;terminating=!![];const _0x5c01bc=getEnabledBots();_0x5c01bc[_0x133b88(0x2a0)](_0x399e21=>{stopBot(_0x399e21['botID']);});}function restartBot(_0x262f39){const _0x5abfd6=_0x5517e8;if(pid[_0x262f39])pid[_0x262f39][_0x5abfd6(0x226)]();}function addBot(){const _0x1751ce=_0x5517e8;let _0x4a149f;for(let _0x5057ac=0x1;_0x5057ac<0x3e9;_0x5057ac++){_0x4a149f=_0x5057ac[_0x1751ce(0x25a)]()['padStart'](0x3,'0');let _0x56b3f6=config['find'](_0x4b3a63=>_0x4b3a63[_0x1751ce(0x15b)]==_0x4a149f);if(!_0x56b3f6)break;}if(_0x4a149f===_0x1751ce(0x221)){logger['full'](_0x1751ce(0x2fd));return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x4a149f),dbConfig[_0x1751ce(0x24b)](_0x1751ce(0x357))[_0x1751ce(0x292)]({'botID':_0x4a149f,'botname':_0x1751ce(0x287)+_0x4a149f,'status':_0x1751ce(0x2fe),'live':''})[_0x1751ce(0x2e2)](),startBot([_0x4a149f,userID],{'cwd':bbpath},function(_0x5a998c){const _0x4d8ae3=_0x1751ce;if(_0x5a998c)logger[_0x4d8ae3(0x307)](_0x5a998c);}),config=getConfiguration(),io['to'](_0x1751ce(0x1ab))['emit'](_0x1751ce(0x357),config),broadcastToBots(_0x1751ce(0x357),JSON[_0x1751ce(0x1be)](config));}function deleteBot(_0x271967){const _0x36e348=_0x5517e8;getClientsWithBotID(_0x271967)[_0x36e348(0x2a0)](_0x1bcd10=>{const _0x14f698=_0x36e348;getSocket(_0x1bcd10['id'])[_0x14f698(0x1ef)](!![]),removeClient(_0x1bcd10['id']);}),dbConfig[_0x36e348(0x24b)](_0x36e348(0x357))[_0x36e348(0x323)]({'botID':_0x271967})[_0x36e348(0x2e2)](),logger['full'](_0x36e348(0x264)+_0x271967),stopBot(_0x271967);try{if(fs[_0x36e348(0x2d4)](path['join'](configpath,'bot-'+_0x271967+_0x36e348(0x331))))fs['unlinkSync'](path[_0x36e348(0x311)](configpath,_0x36e348(0x1f2)+_0x271967+_0x36e348(0x331)));if(fs[_0x36e348(0x2d4)](path['join'](configpath,'bot-'+_0x271967+'-events.json')))fs['unlinkSync'](path[_0x36e348(0x311)](configpath,_0x36e348(0x1f2)+_0x271967+_0x36e348(0x31b)));if(fs[_0x36e348(0x2d4)](path[_0x36e348(0x311)](configpath,'bot-'+_0x271967+_0x36e348(0x251))))fs['unlinkSync'](path[_0x36e348(0x311)](configpath,_0x36e348(0x1f2)+_0x271967+_0x36e348(0x251)));if(fs['existsSync'](path['join'](configpath,_0x36e348(0x1f2)+_0x271967+'-results.json')))fs[_0x36e348(0x1d3)](path['join'](configpath,_0x36e348(0x1f2)+_0x271967+_0x36e348(0x316)));}catch(_0x23823d){if(_0x23823d)logger[_0x36e348(0x307)](_0x36e348(0x21f),_0x23823d);}config=getConfiguration(),io['to']('botmanager')[_0x36e348(0x1bf)](_0x36e348(0x357),config),broadcastToBots('bots',JSON[_0x36e348(0x1be)](config));}function toggleBot(_0x3e8176,_0x23d17f,_0x584154){const _0x2b7efc=_0x5517e8;dbConfig[_0x2b7efc(0x24b)](_0x2b7efc(0x357))[_0x2b7efc(0x1e0)]({'botID':_0x3e8176})[_0x2b7efc(0x312)]({'status':_0x23d17f})['assign']({'live':_0x584154})['write']();if(_0x23d17f==_0x2b7efc(0x361)||_0x23d17f=='new')logger[_0x2b7efc(0x307)](_0x2b7efc(0x254)+_0x3e8176),startBot([_0x3e8176,userID],{'cwd':bbpath},function(_0x338069){const _0x101e19=_0x2b7efc;if(_0x338069)logger[_0x101e19(0x307)](_0x338069);});else(_0x23d17f==_0x2b7efc(0x359)||_0x23d17f==_0x2b7efc(0x238))&&(logger[_0x2b7efc(0x307)]('Disabled\x20Bot\x20'+_0x3e8176),stopBot(_0x3e8176));config=getConfiguration(),io['to'](_0x2b7efc(0x1ab))['emit'](_0x2b7efc(0x357),config),broadcastToBots(_0x2b7efc(0x357),JSON['stringify'](config));}function toggleStatus(_0x4b8b30){const _0x3e08c8=_0x5517e8;let _0x1808fd=dbConfig['get'](_0x3e08c8(0x357))[_0x3e08c8(0x1e0)]({'botID':_0x4b8b30})[_0x3e08c8(0x367)](),_0x1bacd3;if(_0x1808fd[_0x3e08c8(0x2c5)]===_0x3e08c8(0x361))_0x1bacd3=_0x3e08c8(0x359);else{if(_0x1808fd[_0x3e08c8(0x2c5)]===_0x3e08c8(0x2fe))_0x1bacd3=_0x3e08c8(0x238);else{if(_0x1808fd[_0x3e08c8(0x2c5)]===_0x3e08c8(0x238))_0x1bacd3=_0x3e08c8(0x2fe);else{if(_0x1808fd[_0x3e08c8(0x2c5)]===_0x3e08c8(0x359))_0x1bacd3='enabled';}}}return _0x1bacd3;}function updateStatus(_0x27d152,_0x32818d){const _0x3a6fea=_0x5517e8;dbConfig[_0x3a6fea(0x24b)](_0x3a6fea(0x357))[_0x3a6fea(0x1e0)]({'botID':_0x27d152})['assign']({'status':_0x32818d})[_0x3a6fea(0x2e2)](),config=getConfiguration(),io['to'](_0x3a6fea(0x1ab))[_0x3a6fea(0x1bf)](_0x3a6fea(0x357),config),broadcastToBots(_0x3a6fea(0x357),JSON['stringify'](config));}function updateLive(_0xf825d5,_0x9d5b1b){const _0x5df22e=_0x5517e8;dbConfig[_0x5df22e(0x24b)](_0x5df22e(0x357))['find']({'botID':_0xf825d5})[_0x5df22e(0x312)]({'live':_0x9d5b1b})['write'](),config=getConfiguration(),io['to'](_0x5df22e(0x1ab))[_0x5df22e(0x1bf)](_0x5df22e(0x357),config),broadcastToBots(_0x5df22e(0x357),JSON['stringify'](config));}function updateBotName(_0x9665fd,_0x2f405b){const _0x11d493=_0x5517e8;dbConfig['get'](_0x11d493(0x357))['find']({'botID':_0x9665fd})[_0x11d493(0x312)]({'botname':_0x2f405b})[_0x11d493(0x2e2)](),config=getConfiguration(),io['to']('botmanager')[_0x11d493(0x1bf)](_0x11d493(0x357),config),broadcastToBots(_0x11d493(0x357),JSON[_0x11d493(0x1be)](config));}function updateBotManager(){const _0x8800ed=_0x5517e8;config=getConfiguration(),io['to']('botmanager')[_0x8800ed(0x1bf)](_0x8800ed(0x357),config),broadcastToBots(_0x8800ed(0x357),JSON[_0x8800ed(0x1be)](config));}function toggleBotMode(_0x28a189){const _0x5c191c=_0x5517e8;if(pid[_0x28a189])pid[_0x28a189]['send']({'function':_0x5c191c(0x213),'args':null});else{const _0xd659dd=configpath+_0x5c191c(0x1f2)+_0x28a189+_0x5c191c(0x331),_0x855980=fs['readFileSync'](_0xd659dd),_0x1b7edf=JSON['parse'](_0x855980),_0x4d99ce=_0x1b7edf[_0x5c191c(0x16f)][0x0][_0x5c191c(0x2c7)];_0x1b7edf[_0x5c191c(0x16f)][0x0][_0x5c191c(0x2c7)]=!_0x4d99ce;const _0x31725c=JSON[_0x5c191c(0x1be)](_0x1b7edf,null,0x2);fs[_0x5c191c(0x302)](_0xd659dd,_0x31725c),config=getConfiguration(),io['to'](_0x5c191c(0x1ab))[_0x5c191c(0x1bf)](_0x5c191c(0x357),config),broadcastToBots('bots',JSON[_0x5c191c(0x1be)](config));}}function validateTelegram(_0x441311){const _0x2fc12c=_0x5517e8;if(_0x441311[_0x2fc12c(0x33b)][_0x2fc12c(0x326)]!=settings[_0x2fc12c(0x1b2)]&&'@'+_0x441311['from']['username']!=settings[_0x2fc12c(0x1b2)]||_0x441311[_0x2fc12c(0x266)]['id']!=settings[_0x2fc12c(0x256)])return sendTelegram(_0x441311[_0x2fc12c(0x266)]['id'],_0x2fc12c(0x285),{'parse_mode':_0x2fc12c(0x275)}),![];return!![];}async function initTelegram(){const _0x21ac43=_0x5517e8;tgBot&&(await tgBot[_0x21ac43(0x2b1)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x61fb21=_0x21ac43(0x25f);_0x61fb21+='\x0a',_0x61fb21+=_0x21ac43(0x1e2),_0x61fb21+='/disable\x20-\x20disable\x20notifications\x0a',_0x61fb21+=_0x21ac43(0x2f1),_0x61fb21+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x61fb21+=_0x21ac43(0x191),_0x61fb21+=_0x21ac43(0x32c),_0x61fb21+=_0x21ac43(0x18c),_0x61fb21+=_0x21ac43(0x1a8),_0x61fb21+=_0x21ac43(0x23a),_0x61fb21+=_0x21ac43(0x26b),_0x61fb21+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x61fb21+=_0x21ac43(0x180),_0x61fb21+=_0x21ac43(0x300),_0x61fb21+=_0x21ac43(0x246),_0x61fb21+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x61fb21+=_0x21ac43(0x2e4);let _0xfdff5f=_0x21ac43(0x1e9);_0xfdff5f+='\x0a',_0xfdff5f+=_0x61fb21,tgBot['catch']((_0x1d4334,_0x40e8c0)=>{const _0x3bef0d=_0x21ac43;logger['simple'](getTimeStamp()+_0x3bef0d(0x30f)),logger['debug'](_0x3bef0d(0x19f),_0x1d4334);}),tgBot[_0x21ac43(0x29e)](async(_0x435900,_0x13cea2)=>{const _0x55bc25=_0x21ac43;if(!(!settings[_0x55bc25(0x256)]&&_0x435900['update'][_0x55bc25(0x205)][_0x55bc25(0x34b)]==_0x55bc25(0x29c))){if(!validateTelegram(_0x435900))return;}_0x13cea2();}),tgBot['command'](_0x21ac43(0x2c4),async _0x3d77b7=>{const _0x4f7423=_0x21ac43;if(_0x3d77b7[_0x4f7423(0x33b)]['username']==settings[_0x4f7423(0x1b2)]||'@'+_0x3d77b7[_0x4f7423(0x33b)][_0x4f7423(0x326)]==settings[_0x4f7423(0x1b2)]){if(!settings[_0x4f7423(0x256)])updateSetting(_0x4f7423(0x256),_0x3d77b7[_0x4f7423(0x266)]['id']);}if(!validateTelegram(_0x3d77b7))return;updateSetting(_0x4f7423(0x1e3),!![]),await sendTelegram(_0x3d77b7[_0x4f7423(0x266)]['id'],_0xfdff5f);}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x235),async _0x3ec59e=>{const _0x7e56d6=_0x21ac43;updateSetting(_0x7e56d6(0x1e3),!![]),await sendTelegram(_0x3ec59e[_0x7e56d6(0x266)]['id'],_0x7e56d6(0x21b));}),tgBot[_0x21ac43(0x21d)]('disable',async _0x4d8882=>{const _0x1ae668=_0x21ac43;await sendTelegram(_0x4d8882[_0x1ae668(0x266)]['id'],_0x1ae668(0x189)),updateSetting(_0x1ae668(0x1e3),![]);}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x257),async _0x456462=>{const _0x2f913e=_0x21ac43,_0x43706d=Markup[_0x2f913e(0x288)]([Markup[_0x2f913e(0x278)][_0x2f913e(0x187)]('Orders',_0x2f913e(0x35d)),Markup[_0x2f913e(0x278)][_0x2f913e(0x187)]('Alerts',_0x2f913e(0x268)),Markup[_0x2f913e(0x278)][_0x2f913e(0x187)](_0x2f913e(0x174),_0x2f913e(0x186))]);_0x456462['reply']('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x43706d);}),tgBot[_0x21ac43(0x2b4)](_0x21ac43(0x35d),async _0x165eb2=>{const _0x5f3c23=_0x21ac43;_0x165eb2[_0x5f3c23(0x217)](),updateSetting(_0x5f3c23(0x1dd),_0x5f3c23(0x1da)),updateSetting(_0x5f3c23(0x1e3),!![]),await sendTelegram(_0x165eb2[_0x5f3c23(0x266)]['id'],_0x5f3c23(0x34e));}),tgBot[_0x21ac43(0x2b4)]('config_alerts',async _0x2674e1=>{const _0xe92747=_0x21ac43;_0x2674e1['editMessageReplyMarkup'](),updateSetting(_0xe92747(0x1dd),'alerts'),updateSetting(_0xe92747(0x1e3),!![]),await sendTelegram(_0x2674e1[_0xe92747(0x266)]['id'],_0xe92747(0x339));}),tgBot[_0x21ac43(0x2b4)](_0x21ac43(0x186),async _0x20ea3c=>{const _0x5b7973=_0x21ac43;_0x20ea3c[_0x5b7973(0x217)](),updateSetting(_0x5b7973(0x1dd),_0x5b7973(0x35c)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x20ea3c[_0x5b7973(0x266)]['id'],_0x5b7973(0x252));}),tgBot[_0x21ac43(0x21d)]('status',async _0x495ce1=>{const _0x1dfd5c=_0x21ac43,_0x279f79=getBotsWithMode();let _0xdab003=_0x1dfd5c(0x1f4);config['forEach'](_0x23fddb=>{const _0x3c7879=_0x1dfd5c,_0x5f52ce=_0x279f79[_0x3c7879(0x1e0)](_0x229be4=>_0x229be4[_0x3c7879(0x15b)]==_0x23fddb['botID'])['mode'];_0xdab003+=_0x3c7879(0x287)+_0x23fddb[_0x3c7879(0x15b)]+':\x20'+_0x23fddb[_0x3c7879(0x2c5)]+_0x3c7879(0x261)+_0x5f52ce+_0x3c7879(0x261)+_0x23fddb[_0x3c7879(0x222)]+'\x0a';}),_0xdab003+='\x0a',_0xdab003+=_0x1dfd5c(0x197),_0xdab003+=!settings[_0x1dfd5c(0x1e3)]?_0x1dfd5c(0x2ce):_0x1dfd5c(0x255),_0xdab003+=settings[_0x1dfd5c(0x1e3)]?settings[_0x1dfd5c(0x1dd)]==_0x1dfd5c(0x35c)?_0x1dfd5c(0x15d):_0x1dfd5c(0x32a)+settings['telegramEvents']+'\x20only\x0a':'',await sendTelegram(_0x495ce1[_0x1dfd5c(0x266)]['id'],_0xdab003,{'parse_mode':_0x1dfd5c(0x275)});}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x25c),async _0x5251e7=>{const _0x5d0fac=_0x21ac43,_0x331cd8=getEnabledBots();if(_0x331cd8[_0x5d0fac(0x236)]==0x0)await sendTelegram(_0x5251e7[_0x5d0fac(0x266)]['id'],_0x5d0fac(0x305));else{if(_0x331cd8[_0x5d0fac(0x236)]>0x1)_0x331cd8['push']({'botID':_0x5d0fac(0x35c)});let _0x306633=[],_0xa41b10=[];const _0x27e421=_0x331cd8[_0x5d0fac(0x236)]%0x4==0x0||_0x331cd8[_0x5d0fac(0x236)]%0x4==0x3||_0x331cd8[_0x5d0fac(0x236)]%0x3==0x1?0x4:0x3;let _0x1ac182=0x0;_0x331cd8[_0x5d0fac(0x2a0)]((_0xd2fc90,_0x560d8a)=>{const _0x4d897e=_0x5d0fac;if(_0x560d8a%_0x27e421==0x0)_0xa41b10=[];_0xa41b10[_0x4d897e(0x292)](Markup['button'][_0x4d897e(0x187)](_0xd2fc90[_0x4d897e(0x15b)]==_0x4d897e(0x35c)?'All\x20bots':_0x4d897e(0x287)+_0xd2fc90['botID'],_0x4d897e(0x1fd)+_0xd2fc90[_0x4d897e(0x15b)])),_0x560d8a%_0x27e421==0x0&&(_0x306633[_0x1ac182]=_0xa41b10,_0x1ac182++);});const _0xe3280f=Markup[_0x5d0fac(0x288)](_0x306633);_0x5251e7[_0x5d0fac(0x291)]('Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',_0xe3280f);}}),tgBot[_0x21ac43(0x2b4)](/restart_(.+)/,async _0xfe33fc=>{const _0x468ec3=_0x21ac43,_0x568859=_0xfe33fc[_0x468ec3(0x1eb)][0x1];_0xfe33fc[_0x468ec3(0x217)](),_0x568859==_0x468ec3(0x35c)?config[_0x468ec3(0x2a0)](_0x221016=>{const _0xa04f18=_0x468ec3;restartBot(_0x221016[_0xa04f18(0x15b)]);}):restartBot(_0x568859);}),tgBot[_0x21ac43(0x21d)]('on',async _0x4cc95f=>{const _0x3e2f37=_0x21ac43,_0x48ad9d=getDisabledBots();if(_0x48ad9d[_0x3e2f37(0x236)]==0x0)await sendTelegram(_0x4cc95f[_0x3e2f37(0x266)]['id'],_0x3e2f37(0x2f3));else{if(_0x48ad9d[_0x3e2f37(0x236)]>0x1)_0x48ad9d['push']({'botID':_0x3e2f37(0x35c)});let _0x4d73bb=[],_0x1df4a7=[];const _0x47df9f=_0x48ad9d['length']%0x4==0x0||_0x48ad9d[_0x3e2f37(0x236)]%0x4==0x3||_0x48ad9d['length']%0x3==0x1?0x4:0x3;let _0xc3bec9=0x0;_0x48ad9d['forEach']((_0x29340c,_0x80b0f)=>{const _0x1acaae=_0x3e2f37;if(_0x80b0f%_0x47df9f==0x0)_0x1df4a7=[];_0x1df4a7[_0x1acaae(0x292)](Markup[_0x1acaae(0x278)][_0x1acaae(0x187)](_0x29340c[_0x1acaae(0x15b)]==_0x1acaae(0x35c)?_0x1acaae(0x360):_0x1acaae(0x287)+_0x29340c[_0x1acaae(0x15b)],'on_'+_0x29340c[_0x1acaae(0x15b)])),_0x80b0f%_0x47df9f==0x0&&(_0x4d73bb[_0xc3bec9]=_0x1df4a7,_0xc3bec9++);});const _0x1277c7=Markup['inlineKeyboard'](_0x4d73bb);_0x4cc95f[_0x3e2f37(0x291)](_0x3e2f37(0x193),_0x1277c7);}}),tgBot[_0x21ac43(0x2b4)](/on_(.+)/,async _0x1523cd=>{const _0x131aea=_0x21ac43,_0x4b65c2=_0x1523cd[_0x131aea(0x1eb)][0x1];_0x1523cd[_0x131aea(0x217)]();if(_0x4b65c2=='all'){const _0x4358c7=getDisabledBots();await sendTelegram(_0x1523cd[_0x131aea(0x266)]['id'],_0x131aea(0x1b6)),_0x4358c7[_0x131aea(0x2a0)](_0x1397b1=>{const _0x1e6023=_0x131aea;if(_0x1397b1[_0x1e6023(0x15b)]!=_0x1e6023(0x35c))toggleBot(_0x1397b1[_0x1e6023(0x15b)],toggleStatus(_0x1397b1['botID']),_0x1e6023(0x28f));});}else await sendTelegram(_0x1523cd[_0x131aea(0x266)]['id'],_0x131aea(0x1b4)+_0x4b65c2),toggleBot(_0x4b65c2,toggleStatus(_0x4b65c2),_0x131aea(0x28f));}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x229),async _0x339f05=>{const _0x561d5a=_0x21ac43,_0x39e7c3=getEnabledBots();if(_0x39e7c3[_0x561d5a(0x236)]==0x0)await sendTelegram(_0x339f05[_0x561d5a(0x266)]['id'],_0x561d5a(0x305));else{if(_0x39e7c3[_0x561d5a(0x236)]>0x1)_0x39e7c3[_0x561d5a(0x292)]({'botID':_0x561d5a(0x35c)});let _0x3dd3f=[],_0x406739=[];const _0x5b83b6=_0x39e7c3[_0x561d5a(0x236)]%0x4==0x0||_0x39e7c3[_0x561d5a(0x236)]%0x4==0x3||_0x39e7c3[_0x561d5a(0x236)]%0x3==0x1?0x4:0x3;let _0x9613d5=0x0;_0x39e7c3[_0x561d5a(0x2a0)]((_0x46616c,_0x584f9b)=>{const _0x2ee816=_0x561d5a;if(_0x584f9b%_0x5b83b6==0x0)_0x406739=[];_0x406739[_0x2ee816(0x292)](Markup['button']['callback'](_0x46616c['botID']==_0x2ee816(0x35c)?'All\x20bots':_0x2ee816(0x287)+_0x46616c[_0x2ee816(0x15b)],_0x2ee816(0x350)+_0x46616c[_0x2ee816(0x15b)])),_0x584f9b%_0x5b83b6==0x0&&(_0x3dd3f[_0x9613d5]=_0x406739,_0x9613d5++);});const _0x3c8220=Markup[_0x561d5a(0x288)](_0x3dd3f);_0x339f05['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',_0x3c8220);}}),tgBot[_0x21ac43(0x2b4)](/off_(.+)/,async _0x299d6e=>{const _0x45f4e9=_0x21ac43,_0x447837=_0x299d6e[_0x45f4e9(0x1eb)][0x1];_0x299d6e['editMessageReplyMarkup']();if(_0x447837==_0x45f4e9(0x35c)){const _0x3ece0c=getEnabledBots();await sendTelegram(_0x299d6e[_0x45f4e9(0x266)]['id'],_0x45f4e9(0x314)),_0x3ece0c[_0x45f4e9(0x2a0)](_0x1b3b68=>{const _0x5ae7ab=_0x45f4e9;if(_0x1b3b68['botID']!='all')toggleBot(_0x1b3b68[_0x5ae7ab(0x15b)],toggleStatus(_0x1b3b68['botID']),_0x5ae7ab(0x28f));});}else await sendTelegram(_0x299d6e['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x447837),toggleBot(_0x447837,toggleStatus(_0x447837),'stopped');}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x188),async _0x583573=>{const _0x2bf73e=_0x21ac43,_0x164e42=getEnabledBots();if(_0x164e42[_0x2bf73e(0x236)]==0x0)await sendTelegram(_0x583573['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x164e42[_0x2bf73e(0x236)]>0x1){let _0x434f24=[],_0x18a282=[];const _0x3ea226=_0x164e42[_0x2bf73e(0x236)]%0x4==0x0||_0x164e42[_0x2bf73e(0x236)]%0x4==0x3||_0x164e42[_0x2bf73e(0x236)]%0x3==0x1?0x4:0x3;let _0x4c082e=0x0;_0x164e42[_0x2bf73e(0x2a0)]((_0x1960c2,_0xf83902)=>{const _0x16a103=_0x2bf73e;if(_0xf83902%_0x3ea226==0x0)_0x18a282=[];_0x18a282['push'](Markup[_0x16a103(0x278)][_0x16a103(0x187)](_0x16a103(0x287)+_0x1960c2['botID'],'metrics_'+_0x1960c2[_0x16a103(0x15b)])),_0xf83902%_0x3ea226==0x0&&(_0x434f24[_0x4c082e]=_0x18a282,_0x4c082e++);});const _0x2c4b7a=Markup['inlineKeyboard'](_0x434f24);_0x583573[_0x2bf73e(0x291)](_0x2bf73e(0x17d),_0x2c4b7a);}else{const _0x2e2f0e=_0x164e42[0x0][_0x2bf73e(0x15b)];if(pid[_0x2e2f0e])pid[_0x2e2f0e][_0x2bf73e(0x20c)]({'function':_0x2bf73e(0x1dc),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x2a4cd3=>{const _0x3a5c74=_0x21ac43,_0x136d16=_0x2a4cd3['match'][0x1];_0x2a4cd3[_0x3a5c74(0x217)]();if(pid[_0x136d16])pid[_0x136d16][_0x3a5c74(0x20c)]({'function':_0x3a5c74(0x1dc),'args':null});}),tgBot['command'](_0x21ac43(0x1aa),async _0x3c7b35=>{const _0x4aeb43=_0x21ac43,_0x68ba09=getEnabledBots();if(_0x68ba09[_0x4aeb43(0x236)]==0x0)await sendTelegram(_0x3c7b35[_0x4aeb43(0x266)]['id'],_0x4aeb43(0x305));else{if(_0x68ba09[_0x4aeb43(0x236)]>0x1){let _0x3ea657=[],_0x38f398=[];const _0x27e06c=_0x68ba09[_0x4aeb43(0x236)]%0x4==0x0||_0x68ba09[_0x4aeb43(0x236)]%0x4==0x3||_0x68ba09[_0x4aeb43(0x236)]%0x3==0x1?0x4:0x3;let _0x74e128=0x0;_0x68ba09[_0x4aeb43(0x2a0)]((_0x53fc98,_0x1efaf8)=>{const _0x4cbb0e=_0x4aeb43;if(_0x1efaf8%_0x27e06c==0x0)_0x38f398=[];_0x38f398[_0x4cbb0e(0x292)](Markup['button'][_0x4cbb0e(0x187)]('Bot\x20'+_0x53fc98[_0x4cbb0e(0x15b)],_0x4cbb0e(0x245)+_0x53fc98['botID'])),_0x1efaf8%_0x27e06c==0x0&&(_0x3ea657[_0x74e128]=_0x38f398,_0x74e128++);});const _0x16604a=Markup[_0x4aeb43(0x288)](_0x3ea657);_0x3c7b35[_0x4aeb43(0x291)](_0x4aeb43(0x31d),_0x16604a);}else{const _0x2e16f0=_0x68ba09[0x0][_0x4aeb43(0x15b)];if(pid[_0x2e16f0])pid[_0x2e16f0][_0x4aeb43(0x20c)]({'function':_0x4aeb43(0x267),'args':null});}}}),tgBot[_0x21ac43(0x2b4)](/portfolio_(.+)/,async _0x21af49=>{const _0x552613=_0x21ac43,_0x38c5fc=_0x21af49[_0x552613(0x1eb)][0x1];_0x21af49[_0x552613(0x217)]();if(pid[_0x38c5fc])pid[_0x38c5fc][_0x552613(0x20c)]({'function':_0x552613(0x267),'args':null});}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x233),async _0x1ca691=>{const _0x483399=_0x21ac43,_0x5c5ab2=_0x483399(0x233);await zipFiles(_0x5c5ab2);const _0x247875=zippath+(_0x5c5ab2+_0x483399(0x2ae));_0x1ca691[_0x483399(0x32f)]({'source':_0x247875})[_0x483399(0x224)](()=>{})[_0x483399(0x2d2)](_0x367429=>logger[_0x483399(0x164)]('Error\x20sending\x20'+_0x5c5ab2+_0x483399(0x227),_0x367429));}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x201),async _0x135b8f=>{const _0x407a06=_0x21ac43,_0x58bc84=_0x407a06(0x201);await backupConfigFiles(),await zipFiles(_0x58bc84);const _0x470cfe=zippath+(_0x58bc84+_0x407a06(0x2ae));_0x135b8f[_0x407a06(0x32f)]({'source':_0x470cfe})[_0x407a06(0x224)](()=>{})[_0x407a06(0x2d2)](_0x5c4f02=>logger[_0x407a06(0x164)](_0x407a06(0x207)+_0x58bc84+_0x407a06(0x227),_0x5c4f02));}),tgBot['command'](_0x21ac43(0x1a2),async _0x58267d=>{const _0x8dbcd5=_0x21ac43;await getMessages();if(!updateAvailable)await sendTelegram(_0x58267d[_0x8dbcd5(0x266)]['id'],_0x8dbcd5(0x223));else{if(!validInstallation)await sendTelegram(_0x58267d['chat']['id'],_0x8dbcd5(0x34f));else{const _0x393ba0=Markup['inlineKeyboard']([Markup[_0x8dbcd5(0x278)]['callback'](_0x8dbcd5(0x2cc),_0x8dbcd5(0x1c4)),Markup[_0x8dbcd5(0x278)][_0x8dbcd5(0x187)]('No',_0x8dbcd5(0x28d))]);_0x58267d[_0x8dbcd5(0x291)](_0x8dbcd5(0x283),_0x393ba0);}}}),tgBot[_0x21ac43(0x2b4)](/update_(.+)/,async _0x3df61b=>{const _0x5372dc=_0x21ac43,_0x135ed5=_0x3df61b[_0x5372dc(0x1eb)][0x1];_0x3df61b[_0x5372dc(0x217)](),_0x135ed5==_0x5372dc(0x2db)&&(await sendTelegram(_0x3df61b['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x5372dc(0x1a2))),_0x135ed5=='no'&&await sendTelegram(_0x3df61b[_0x5372dc(0x266)]['id'],_0x5372dc(0x1ad));}),tgBot[_0x21ac43(0x21d)]('reinstall',async _0x3e78ce=>{const _0x1c60c9=_0x21ac43;if(!validInstallation)await sendTelegram(_0x3e78ce[_0x1c60c9(0x266)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0xe5eb3f=Markup['inlineKeyboard']([Markup['button']['callback'](_0x1c60c9(0x2cc),'reinstall_yes'),Markup[_0x1c60c9(0x278)][_0x1c60c9(0x187)]('No',_0x1c60c9(0x1f8))]);_0x3e78ce['reply']('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0xe5eb3f);}}),tgBot[_0x21ac43(0x2b4)](/reinstall_(.+)/,async _0x5a1916=>{const _0x1991d1=_0x21ac43,_0x12b0c1=_0x5a1916[_0x1991d1(0x1eb)][0x1];_0x5a1916[_0x1991d1(0x217)](),_0x12b0c1==_0x1991d1(0x2db)&&(await sendTelegram(_0x5a1916['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation'),updateBB(_0x1991d1(0x244))),_0x12b0c1=='no'&&await sendTelegram(_0x5a1916['chat']['id'],_0x1991d1(0x310));}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x28e),async _0x567749=>{const _0x32859b=_0x21ac43,_0x3a2f7f=getBotsWithMode();if(_0x3a2f7f[_0x32859b(0x236)]==0x0)await sendTelegram(_0x567749[_0x32859b(0x266)]['id'],_0x32859b(0x305));else{let _0xe428c=[],_0x4f5dc2=[];const _0xac7fca=0x2;let _0x5487af=0x0;_0x3a2f7f[_0x32859b(0x2a0)]((_0x33274d,_0x3b4170)=>{const _0x503775=_0x32859b;if(_0x3b4170%_0xac7fca==0x0)_0x4f5dc2=[];_0x4f5dc2[_0x503775(0x292)](Markup[_0x503775(0x278)]['callback'](_0x503775(0x287)+_0x33274d[_0x503775(0x15b)]+'\x20('+_0x33274d[_0x503775(0x1a3)]+')',_0x503775(0x1b0)+_0x33274d['botID'])),_0x3b4170%_0xac7fca==0x0&&(_0xe428c[_0x5487af]=_0x4f5dc2,_0x5487af++);});const _0x5c29a7=Markup[_0x32859b(0x288)](_0xe428c);_0x567749[_0x32859b(0x291)](_0x32859b(0x1f9),_0x5c29a7);}}),tgBot[_0x21ac43(0x2b4)](/toggle_(.+)/,async _0x370178=>{const _0x3788f0=_0x21ac43,_0x22c278=_0x370178[_0x3788f0(0x1eb)][0x1];_0x370178[_0x3788f0(0x217)]();const _0xafb3c4=getBotsWithMode(),_0x3a429a=_0xafb3c4[_0x3788f0(0x1e0)](_0x2a6ed8=>_0x2a6ed8['botID']==_0x22c278),_0x4b6826=_0x3a429a[_0x3788f0(0x1a3)]=='auto'?_0x3788f0(0x247):_0x3788f0(0x18a);await sendTelegram(_0x370178['chat']['id'],_0x3788f0(0x2a1)+_0x22c278+_0x3788f0(0x1a1)+_0x4b6826+_0x3788f0(0x293)),toggleBotMode(_0x22c278);}),tgBot[_0x21ac43(0x21d)](_0x21ac43(0x2c3),async _0x57c2e2=>{const _0x156b2a=_0x21ac43;let _0x3a2d87='';config['forEach'](_0x20aa83=>{const _0x1be109=_0x4383;_0x3a2d87+=_0x1be109(0x287)+_0x20aa83[_0x1be109(0x15b)]+':\x20'+_0x20aa83[_0x1be109(0x36a)]+'\x0a';}),await sendTelegram(_0x57c2e2[_0x156b2a(0x266)]['id'],_0x3a2d87,{'parse_mode':_0x156b2a(0x275)});}),tgBot[_0x21ac43(0x21d)]('help',async _0x214a6c=>{const _0x9e44f8=_0x21ac43;await sendTelegram(_0x214a6c[_0x9e44f8(0x266)]['id'],_0x61fb21);}),process['once'](_0x21ac43(0x362),()=>tgBot[_0x21ac43(0x2b1)]('SIGINT')),process[_0x21ac43(0x26c)]('SIGTERM',()=>tgBot['stop'](_0x21ac43(0x2eb))),tgBot[_0x21ac43(0x23e)]();}function disableTelegram(){const _0x44d08f=_0x5517e8;tgBot&&tgBot[_0x44d08f(0x2b1)]();}async function sendTelegram(_0x5a310b,_0x34a970,_0xbc8f3c){const _0x5919e3=_0x5517e8;_0xbc8f3c={..._0xbc8f3c,'disable_web_page_preview':!![]};try{await tgBot[_0x5919e3(0x334)]['sendMessage'](_0x5a310b,_0x34a970,_0xbc8f3c);}catch(_0x233bef){console[_0x5919e3(0x250)]('Telegram\x20error:',_0x233bef);}}async function sendTelegramBot(_0x3d650c,_0x4b4984){const _0x262b4b=_0x5517e8;if(settings[_0x262b4b(0x1e3)]){if(settings[_0x262b4b(0x1dd)]==_0x262b4b(0x35c)||(_0x4b4984[_0x262b4b(0x2a7)]==_0x262b4b(0x25b)||_0x4b4984[_0x262b4b(0x2a7)]==_0x262b4b(0x15c)||_0x4b4984[_0x262b4b(0x2a7)]=='success')&&settings['telegramEvents']==_0x262b4b(0x203)||_0x4b4984[_0x262b4b(0x2a7)]=='order'&&settings[_0x262b4b(0x1dd)]==_0x262b4b(0x1da)){if(tgBot&&settings['telegramChatId']){if(_0x4b4984[_0x262b4b(0x35e)])await sendTelegram(settings[_0x262b4b(0x256)],_0x4b4984[_0x262b4b(0x36a)]+_0x262b4b(0x168)+_0x4b4984[_0x262b4b(0x1ec)]);else await sendTelegram(settings[_0x262b4b(0x256)],_0x262b4b(0x287)+_0x3d650c+_0x262b4b(0x168)+_0x4b4984['event']);}}}}async function sendTelegramMsg(_0x6449ad,_0x3f7c43=_0x5517e8(0x275)){const _0x1a9b79=_0x5517e8;return settings['telegramEnabled']&&tgBot&&settings[_0x1a9b79(0x256)]?(await sendTelegram(settings['telegramChatId'],_0x6449ad,{'parse_mode':_0x3f7c43}),!![]):![];}function getDeviceWithIp(_0x285d1e){const _0x59f6d6=_0x5517e8;return devices[_0x59f6d6(0x1e0)](_0x5aa546=>_0x5aa546['ip']===_0x285d1e);}async function temporaryAccess2FA(_0xcb8e9a,_0x2e92b0){const _0x227bc6=_0x5517e8;let _0x17f102=new Date(),_0x47463f=![];if(lastIpApproval){if(_0x17f102-lastIpApproval<0x1388)_0x47463f=!![];}lastIpApproval=new Date();if(_0x47463f)return;if(tgBot&&settings[_0x227bc6(0x256)]){const _0x2cddca=uuidRandom();tmpStorage[_0x2cddca]={'uuid':_0xcb8e9a,'externalip':_0x2e92b0};const _0x44433c=Markup[_0x227bc6(0x288)]([Markup['button'][_0x227bc6(0x187)](_0x227bc6(0x2d0),'tempaccess_5_'+_0x2cddca),Markup[_0x227bc6(0x278)][_0x227bc6(0x187)]('15\x20min',_0x227bc6(0x28c)+_0x2cddca),Markup[_0x227bc6(0x278)][_0x227bc6(0x187)](_0x227bc6(0x1ce),_0x227bc6(0x196)+_0x2cddca),Markup['button'][_0x227bc6(0x187)](_0x227bc6(0x171),_0x227bc6(0x29a)+_0x2cddca)]);await sendTelegram(settings['telegramChatId'],_0x227bc6(0x243)+normalizeIP(_0x2e92b0)[_0x227bc6(0x17e)]+'\x20?',_0x44433c),tgBot[_0x227bc6(0x2b4)](/tempaccess_(.+)_(.+)/,async _0x2266d5=>{const _0x4ce48b=_0x227bc6,_0x43a194=_0x2266d5['match'][0x1],_0x161928=_0x2266d5['match'][0x2],{uuid:_0x447bf4,externalip:_0x42290d}=tmpStorage[_0x161928];delete tmpStorage[_0x161928],_0x2266d5['editMessageReplyMarkup'](),devices[_0x447bf4][_0x4ce48b(0x354)]={'clientip':_0x42290d,'timestamp':new Date()['getTime'](),'expiry':_0x43a194},_0x43a194!='reject'?(await sendTelegram(_0x2266d5[_0x4ce48b(0x266)]['id'],_0x4ce48b(0x1a9)+_0x43a194+'\x20minutes',{'parse_mode':_0x4ce48b(0x275)}),io['to'](_0x447bf4)[_0x4ce48b(0x1bf)](_0x4ce48b(0x2c5),{'access':{'allow':![],'reason':_0x4ce48b(0x237),'token':null}})):(await sendTelegram(_0x2266d5[_0x4ce48b(0x266)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x447bf4)['emit']('status',{'access':{'allow':![],'reason':_0x4ce48b(0x33f),'token':null}}));});}}async function loginAccess2FA(_0x5c409f,_0x345a61){const _0x5b40ed=_0x5517e8;if(tgBot&&settings['telegramChatId']){const _0x42730f=uuidRandom();tmpStorage[_0x42730f]={'uuid':_0x5c409f,'externalip':_0x345a61};const _0x418b91=Markup['inlineKeyboard']([Markup[_0x5b40ed(0x278)][_0x5b40ed(0x187)](_0x5b40ed(0x183),'login2fa_'+loginExpiry+'_'+_0x42730f),Markup[_0x5b40ed(0x278)][_0x5b40ed(0x187)](_0x5b40ed(0x171),_0x5b40ed(0x31a)+_0x42730f)]);await sendTelegram(settings[_0x5b40ed(0x256)],_0x5b40ed(0x24a)+normalizeIP(_0x345a61)[_0x5b40ed(0x17e)]+'\x20?',_0x418b91),tgBot[_0x5b40ed(0x2b4)](/login2fa_(.+)_(.+)/,async _0x171676=>{const _0x595c4e=_0x5b40ed,_0x53511b=_0x171676['match'][0x1],_0x3de06f=_0x171676[_0x595c4e(0x1eb)][0x2],{uuid:_0x18af3c,externalip:_0x374009}=tmpStorage[_0x3de06f];delete tmpStorage[_0x3de06f],_0x171676[_0x595c4e(0x217)](),devices[_0x18af3c][_0x595c4e(0x32d)]={'clientip':_0x374009,'timestamp':new Date()[_0x595c4e(0x15a)](),'expiry':_0x53511b},_0x53511b!=_0x595c4e(0x171)?(await sendTelegram(_0x171676[_0x595c4e(0x266)]['id'],_0x595c4e(0x1cf),{'parse_mode':_0x595c4e(0x275)}),io['to'](_0x18af3c)[_0x595c4e(0x1bf)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x171676[_0x595c4e(0x266)]['id'],'Login\x20rejected'),io['to'](_0x18af3c)[_0x595c4e(0x1bf)](_0x595c4e(0x2c5),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x520f73=_0x5517e8;return dbConfig[_0x520f73(0x24b)](_0x520f73(0x357))['sortBy'](_0x520f73(0x15b))['filter']({'status':'enabled'})[_0x520f73(0x367)]()||[];}function getDisabledBots(){const _0x4f5a6c=_0x5517e8;return dbConfig[_0x4f5a6c(0x24b)](_0x4f5a6c(0x357))[_0x4f5a6c(0x262)](_0x4f5a6c(0x15b))['filter']({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x553153){const _0x45a573=_0x5517e8;let _0xc4e2be={};const _0x56dd71=configpath+_0x45a573(0x1f2)+_0x553153+_0x45a573(0x331),_0x4a8f97=fs[_0x45a573(0x2d4)](_0x56dd71);if(_0x4a8f97){const _0x6ce0f2=fs[_0x45a573(0x1bc)](_0x56dd71);try{const _0x4a2db0=JSON[_0x45a573(0x2f4)](_0x6ce0f2),_0x16f7e9=_0x4a2db0?_0x4a2db0[_0x45a573(0x16f)][0x0]['headless']:![];_0xc4e2be[_0x45a573(0x1a3)]=_0x16f7e9?'auto':_0x45a573(0x247),_0xc4e2be['botname']=_0x4a2db0?_0x4a2db0[_0x45a573(0x16f)][0x0]['botname']:'Bot\x20'+_0x553153;}catch(_0x1da046){_0xc4e2be['mode']='manual',_0xc4e2be[_0x45a573(0x36a)]=_0x45a573(0x287)+_0x553153;}}else _0xc4e2be[_0x45a573(0x1a3)]=_0x45a573(0x247),_0xc4e2be[_0x45a573(0x36a)]=_0x45a573(0x287)+_0x553153;return _0xc4e2be;}function getBotsWithMode(){const _0x27a9f0=_0x5517e8,_0xcfcfa3=dbConfig[_0x27a9f0(0x24b)](_0x27a9f0(0x357))[_0x27a9f0(0x262)](_0x27a9f0(0x15b))[_0x27a9f0(0x367)]()||[];return _0xcfcfa3[_0x27a9f0(0x2a0)](_0x3fadf9=>{const _0x416747=_0x27a9f0;let _0x40d0e8=getBotAttributes(_0x3fadf9[_0x416747(0x15b)]);_0x3fadf9[_0x416747(0x1a3)]=_0x40d0e8[_0x416747(0x1a3)];}),_0xcfcfa3;}function getBotExchanges(){const _0x14533b=_0x5517e8;let _0x5f2bf4=[];const _0x5cd7aa=dbConfig[_0x14533b(0x24b)](_0x14533b(0x357))['sortBy'](_0x14533b(0x15b))['value']()||[];_0x5cd7aa[_0x14533b(0x2a0)](_0x54455b=>{const _0x171cfc=_0x14533b;if(_0x54455b[_0x171cfc(0x2c5)]==_0x171cfc(0x361)){const _0x539a7e=configpath+_0x171cfc(0x1f2)+_0x54455b[_0x171cfc(0x15b)]+_0x171cfc(0x331),_0x5159f1=fs[_0x171cfc(0x2d4)](_0x539a7e);let _0x3ec782;if(_0x5159f1){const _0x45f792=fs[_0x171cfc(0x1bc)](_0x539a7e);try{const _0x3d3a43=JSON[_0x171cfc(0x2f4)](_0x45f792);_0x3ec782=_0x3d3a43?_0x3d3a43[_0x171cfc(0x16f)][0x0][_0x171cfc(0x2b2)]:null;}catch(_0x18b430){}}if(_0x3ec782)_0x5f2bf4[_0x171cfc(0x292)](_0x3ec782);}});const _0x1b79ed=[...new Set(_0x5f2bf4)][_0x14533b(0x1c5)]();return _0x1b79ed;}async function initUser(){const _0x1d2e2e=_0x5517e8;if(!settings[_0x1d2e2e(0x172)]){const _0x21002c=uuidRandom();mixpanel[_0x1d2e2e(0x2c0)](_0x21002c),updateSetting('userid',_0x21002c);}}async function initSecure(){const _0x448596=_0x5517e8;let _0x158040=getSecure();if(!_0x158040[_0x448596(0x2cb)](_0x448596(0x340))){let _0x3d084f=await generateKeys();_0x158040[_0x448596(0x1ed)]=_0x3d084f['publicKey'],_0x158040['privateKey']=_0x3d084f[_0x448596(0x342)],_0x158040[_0x448596(0x340)]=crypto[_0x448596(0x16d)](0x20)[_0x448596(0x25a)]('hex');;storeSecure(_0x158040);}}function getSettings(){const _0x4d2c35=_0x5517e8;return dbSettings[_0x4d2c35(0x24b)]('settings')[_0x4d2c35(0x367)]()||{};}function getSecure(){const _0x578b99=_0x5517e8;return dbSecure[_0x578b99(0x24b)](_0x578b99(0x24e))[_0x578b99(0x367)]()||{};}function getBlacklist(){const _0x35657e=_0x5517e8;return dbSecure[_0x35657e(0x24b)](_0x35657e(0x1d8))[_0x35657e(0x367)]()||[];}function broadcastToBots(_0xbc8f0,_0x5a450d){const _0x16b202=_0x5517e8;config[_0x16b202(0x2a0)](_0x51abbf=>{const _0x1a58c0=_0x16b202;if(_0x51abbf[_0x1a58c0(0x2c5)]==_0x1a58c0(0x361)&&_0x51abbf['live']=='running'||_0x51abbf['status']==_0x1a58c0(0x2fe)&&_0x51abbf[_0x1a58c0(0x222)]=='running'){if(pid[_0x51abbf[_0x1a58c0(0x15b)]])pid[_0x51abbf[_0x1a58c0(0x15b)]][_0x1a58c0(0x20c)]({[_0xbc8f0]:_0x5a450d});}});}async function storeSettings(_0x3e189f,_0x5c9067=![]){const _0x5933af=_0x5517e8;_0x3e189f={...settings,..._0x3e189f};if(_0x5c9067&&_0x3e189f['bbPassword']!=_0x5933af(0x337)&&_0x3e189f[_0x5933af(0x2fc)]!='***'&&_0x3e189f[_0x5933af(0x2fc)]!=''){const _0x27e9b6=decryptRSA(secure[_0x5933af(0x342)],_0x3e189f[_0x5933af(0x2fc)])['split']('|@|')[0x0],_0x3f49a4=bcrypt[_0x5933af(0x313)](_0x27e9b6,saltRounds);_0x3e189f={..._0x3e189f,'bbPassword':_0x3f49a4};}if(_0x5c9067&&_0x3e189f[_0x5933af(0x22b)]!=_0x5933af(0x337)&&_0x3e189f['telegramToken']!='***'&&_0x3e189f['telegramToken']!=''){const _0x433145=decryptRSA(secure[_0x5933af(0x342)],_0x3e189f[_0x5933af(0x22b)])[_0x5933af(0x2ed)](_0x5933af(0x2e8))[0x0];_0x3e189f={..._0x3e189f,'telegramToken':_0x433145};}if(_0x5c9067&&_0x3e189f[_0x5933af(0x366)]!=_0x5933af(0x337)&&_0x3e189f[_0x5933af(0x366)]!=_0x5933af(0x33a)&&_0x3e189f[_0x5933af(0x366)]!=''){const _0x2dfb1d=decryptRSA(secure['privateKey'],_0x3e189f['marketcapApi'])[_0x5933af(0x2ed)](_0x5933af(0x2e8))[0x0];_0x3e189f={..._0x3e189f,'marketcapApi':_0x2dfb1d};}const _0x42a4ae=_0x3e189f[_0x5933af(0x22b)]!=_0x5933af(0x337)&&_0x3e189f['telegramToken']!=settings[_0x5933af(0x22b)]||_0x3e189f['telegramUsername']!=settings['telegramUsername'],_0x3c65e3=_0x3e189f[_0x5933af(0x22b)]==''||_0x3e189f[_0x5933af(0x1b2)]=='',_0x28712a=_0x3e189f[_0x5933af(0x366)]&&_0x3e189f[_0x5933af(0x366)]!=_0x5933af(0x337)&&_0x3e189f[_0x5933af(0x366)]!=settings[_0x5933af(0x22b)];_0x42a4ae&&(_0x3e189f['telegramChatId']=null,_0x3e189f['telegramEvents']=_0x5933af(0x35c));for(const [_0x15dca9,_0x59554c]of Object[_0x5933af(0x335)](_0x3e189f)){if(_0x15dca9==_0x5933af(0x22b)&&_0x59554c==_0x5933af(0x337)){_0x3e189f[_0x5933af(0x22b)]=settings[_0x5933af(0x22b)];continue;};if(_0x15dca9=='bbPassword'&&_0x59554c==_0x5933af(0x337)){_0x3e189f[_0x5933af(0x2fc)]=settings[_0x5933af(0x2fc)];continue;};if(_0x15dca9==_0x5933af(0x366)&&_0x59554c==_0x5933af(0x337)){_0x3e189f['marketcapApi']=settings[_0x5933af(0x366)];continue;};dbSettings[_0x5933af(0x2bb)]('settings.'+_0x15dca9,_0x59554c)['write']();}settings=_0x3e189f,io['to'](_0x5933af(0x1ab))[_0x5933af(0x1bf)]('settings',cleanSettings()),broadcastToBots(_0x5933af(0x216),settings[_0x5933af(0x216)]),broadcastToBots('onepagemode',settings[_0x5933af(0x36f)]),broadcastToBots(_0x5933af(0x366),settings[_0x5933af(0x366)]);if(_0x42a4ae&&!_0x3c65e3)initTelegram();if(_0x42a4ae&&_0x3c65e3)disableTelegram();getAllClients()[_0x5933af(0x2a0)](_0x1765b1=>{const _0x58fec3=_0x5933af;getSocket(_0x1765b1['id'])['emit'](_0x58fec3(0x2c5),{'access':{'allow':![],'reason':_0x58fec3(0x237),'token':null}});}),_0x28712a&&(await sleep(0xbb8),testMarketcapApi(_0x3e189f['marketcapApi']));}async function testMarketcapApi(_0x36cc42){const _0x2d72d3=_0x5517e8,_0x40850f=[_0x2d72d3(0x26a),_0x2d72d3(0x20a)];try{await axios[_0x2d72d3(0x24b)](_0x2d72d3(0x178),{'headers':{'X-CMC_PRO_API_KEY':_0x36cc42},'params':{'symbol':_0x40850f[_0x2d72d3(0x25a)]()}});}catch(_0x1d8a6b){_0x1d8a6b['toString']()[_0x2d72d3(0x20f)](_0x2d72d3(0x276))?(io['to'](_0x2d72d3(0x1ab))[_0x2d72d3(0x1bf)]('notification',_0x2d72d3(0x1ca)),logger[_0x2d72d3(0x307)](_0x2d72d3(0x1ca))):(io['to'](_0x2d72d3(0x1ab))[_0x2d72d3(0x1bf)](_0x2d72d3(0x2ba),_0x2d72d3(0x284)),logger['full'](_0x2d72d3(0x284)),logger['debug']('Error\x20details:',_0x1d8a6b['toString']()+_0x2d72d3(0x358)+_0x1d8a6b['code']));return;}logger[_0x2d72d3(0x164)](_0x2d72d3(0x31f));}function updateSetting(_0x1e0bc7,_0x21984e){const _0x1f7e15=_0x5517e8;dbSettings[_0x1f7e15(0x2bb)](_0x1f7e15(0x2a6)+_0x1e0bc7,_0x21984e)[_0x1f7e15(0x2e2)](),settings=getSettings(),io['to'](_0x1f7e15(0x1ab))[_0x1f7e15(0x1bf)](_0x1f7e15(0x211),cleanSettings());}function storeSecure(_0x5e0a1c){const _0x2d1da5=_0x5517e8;dbSecure[_0x2d1da5(0x24b)](_0x2d1da5(0x24e))[_0x2d1da5(0x292)](_0x5e0a1c)[_0x2d1da5(0x2e2)](),secure=_0x5e0a1c;}function addBlacklist(_0x179580){const _0x120cd0=_0x5517e8;cleanBlacklist();let _0x58a382;devices[_0x179580]['telegramIpApproval']?_0x58a382=Math[_0x120cd0(0x204)](devices[_0x179580][_0x120cd0(0x354)][_0x120cd0(0x30d)],loginExpiry):_0x58a382=loginExpiry,dbSecure[_0x120cd0(0x24b)](_0x120cd0(0x1d8))['push']({'expiry':new Date()[_0x120cd0(0x15a)]()+_0x58a382*0x3c*0x3e8,'token':devices[_0x179580][_0x120cd0(0x1d2)]['token']})[_0x120cd0(0x2e2)](),blacklist=dbSecure[_0x120cd0(0x24b)]('blacklist')[_0x120cd0(0x367)]();}function cleanBlacklist(){const _0x423898=_0x5517e8;let _0x1b4a66=dbSecure[_0x423898(0x24b)](_0x423898(0x1d8))[_0x423898(0x296)]()['value'](),_0xcc4639=new Date()[_0x423898(0x15a)]();_0x1b4a66[_0x423898(0x2a0)](_0x2f8577=>{const _0x2d9f01=_0x423898;_0x2f8577[_0x2d9f01(0x30d)]<_0xcc4639&&dbSecure['get']('blacklist')[_0x2d9f01(0x323)]({'expiry':_0x2f8577[_0x2d9f01(0x30d)]})[_0x2d9f01(0x2e2)]();});}function initStates(){const _0x37fc43=_0x5517e8;let _0x4bfda1=getConfiguration();_0x4bfda1[_0x37fc43(0x2a0)](_0x3a9146=>{const _0x222b09=_0x37fc43;_0x3a9146[_0x222b09(0x222)]=_0x222b09(0x28f);}),storeConfiguration(_0x4bfda1);}async function generateKeys(){const _0x23544a=_0x5517e8,_0x5d99f8=forge[_0x23544a(0x29f)][_0x23544a(0x1bd)][_0x23544a(0x1c8)]({'bits':0x1000,'e':0x10001}),_0x5e17cd=forge[_0x23544a(0x29f)]['privateKeyToPem'](_0x5d99f8[_0x23544a(0x342)]),_0x28829c=forge[_0x23544a(0x29f)][_0x23544a(0x1cc)](_0x5d99f8[_0x23544a(0x1ed)]);return{'privateKey':_0x5e17cd,'publicKey':_0x28829c};}async function oneTimeMigration(){const _0x286522=_0x5517e8;let _0x18f243=getSettings(),_0x3dccbb=![];!_0x18f243['hasOwnProperty'](_0x286522(0x36e))&&(_0x18f243[_0x286522(0x36e)]=0x0,_0x3dccbb=!![]);!_0x18f243[_0x286522(0x2cb)](_0x286522(0x31e))&&(_0x18f243['lastmsgemitted']=0x0,_0x3dccbb=!![]);!_0x18f243[_0x286522(0x2cb)]('latestversion')&&(_0x18f243[_0x286522(0x212)]=_0x286522(0x165),_0x3dccbb=!![]);!_0x18f243[_0x286522(0x2cb)]('onepagemode')&&(_0x18f243[_0x286522(0x36f)]=![],_0x3dccbb=!![]);!_0x18f243[_0x286522(0x2cb)](_0x286522(0x366))&&(_0x18f243[_0x286522(0x366)]='',_0x3dccbb=!![]);if(_0x3dccbb)storeSettings(_0x18f243);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x4b3387=>{const _0x4f3460=_0x286522;if(!_0x4b3387['isDirectory']()){if(!_0x4b3387[_0x4f3460(0x2f9)][_0x4f3460(0x34c)](_0x4f3460(0x2e1)))fs[_0x4f3460(0x1d3)](configbackuppath+_0x4b3387[_0x4f3460(0x2f9)]);}else fs[_0x4f3460(0x303)](configbackuppath+_0x4b3387[_0x4f3460(0x2f9)],{'recursive':!![]});});}catch(_0x41583e){logger[_0x286522(0x164)](_0x286522(0x2b7),_0x41583e);}}function storeConfiguration(_0x124c13){const _0x576018=_0x5517e8;dbConfig[_0x576018(0x24b)](_0x576018(0x357))[_0x576018(0x323)]()[_0x576018(0x2e2)](),dbConfig['get'](_0x576018(0x357))[_0x576018(0x292)](..._0x124c13)['write'](),config=_0x124c13;}async function resetPassword(){const _0x154594=_0x5517e8;if(tgBot&&settings[_0x154594(0x256)]){const _0xbd5ee0=Markup[_0x154594(0x288)]([Markup['button'][_0x154594(0x187)](_0x154594(0x2db),_0x154594(0x29d)),Markup[_0x154594(0x278)]['callback']('no',_0x154594(0x290))]);await sendTelegram(settings[_0x154594(0x256)],_0x154594(0x259),_0xbd5ee0),tgBot[_0x154594(0x2b4)](/resetpw_(.+)/,async _0x47a7dc=>{const _0x30b86f=_0x154594,_0x63449=_0x47a7dc['match'][0x1];_0x47a7dc[_0x30b86f(0x217)]();if(_0x63449!='no'){const _0x4e0c18=0xf,_0x4f0ef4=_0x30b86f(0x2f8),_0x1abab0=Array['from'](crypto[_0x30b86f(0x365)](new Uint32Array(_0x4e0c18)))[_0x30b86f(0x1b9)](_0x3c791d=>_0x4f0ef4[_0x3c791d%_0x4f0ef4['length']])['join'](''),_0x2693bc=bcrypt['hashSync'](_0x1abab0,saltRounds);storeSettings({'bbPassword':_0x2693bc}),await sendTelegram(_0x47a7dc['chat']['id'],_0x30b86f(0x318)+_0x1abab0,{'parse_mode':_0x30b86f(0x275)});}else await sendTelegram(_0x47a7dc[_0x30b86f(0x266)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x23a629,_0x43f110){const _0x45563e=_0x5517e8;io['to'](_0x45563e(0x1ab))[_0x45563e(0x1bf)]('notification',_0x45563e(0x1fc),_0x45563e(0x17b));if(tgBot&&settings['telegramChatId']){const _0x55197b=uuidRandom();tmpStorage[_0x55197b]={'path':_0x23a629,'filename':_0x43f110};const _0x2eb03c=Markup[_0x45563e(0x288)]([Markup['button'][_0x45563e(0x187)]('yes','restore_yes_'+_0x55197b),Markup['button']['callback']('no',_0x45563e(0x239)+_0x55197b)]);await sendTelegram(settings[_0x45563e(0x256)],_0x45563e(0x1c9),_0x2eb03c),tgBot[_0x45563e(0x2b4)](/restore_(.+)_(.+)/,async _0x2c1e1a=>{const _0x264cd6=_0x45563e,_0xd6b25f=_0x2c1e1a[_0x264cd6(0x1eb)][0x1],_0x3d2541=_0x2c1e1a[_0x264cd6(0x1eb)][0x2],{path:_0x3f0eb2,filename:_0x291cf9}=tmpStorage[_0x3d2541];delete tmpStorage[_0x3d2541],_0x2c1e1a[_0x264cd6(0x217)](),_0xd6b25f=='yes'?(logger[_0x264cd6(0x164)](_0x264cd6(0x17c)),await sendTelegram(_0x2c1e1a['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':'HTML'}),unzipFile(_0x3f0eb2,_0x291cf9)):(logger[_0x264cd6(0x164)]('Restore\x20process\x20aborted'),await sendTelegram(_0x2c1e1a[_0x264cd6(0x266)]['id'],_0x264cd6(0x253)));});}}function getServerTime(){const _0x3c4453=_0x5517e8,_0x502753=new Date();return _0x502753[_0x3c4453(0x17f)]()+'/'+(_0x502753['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x502753[_0x3c4453(0x2c9)]()[_0x3c4453(0x25a)]()['padStart'](0x2,'0')+'\x20'+_0x502753['getHours']()[_0x3c4453(0x25a)]()['padStart'](0x2,'0')+':'+_0x502753[_0x3c4453(0x333)]()[_0x3c4453(0x25a)]()[_0x3c4453(0x2ef)](0x2,'0')+':'+_0x502753[_0x3c4453(0x23d)]()[_0x3c4453(0x25a)]()[_0x3c4453(0x2ef)](0x2,'0');}function getTimeStamp(){const _0x376e92=_0x5517e8,_0x589c45=shiftedTime();return _0x589c45[_0x376e92(0x17f)]()+'/'+(_0x589c45[_0x376e92(0x1e6)]()+0x1)[_0x376e92(0x25a)]()['padStart'](0x2,'0')+'/'+_0x589c45[_0x376e92(0x2c9)]()[_0x376e92(0x25a)]()[_0x376e92(0x2ef)](0x2,'0')+'\x20'+_0x589c45[_0x376e92(0x2ac)]()[_0x376e92(0x25a)]()['padStart'](0x2,'0')+':'+_0x589c45[_0x376e92(0x333)]()[_0x376e92(0x25a)]()[_0x376e92(0x2ef)](0x2,'0')+':'+_0x589c45['getSeconds']()[_0x376e92(0x25a)]()[_0x376e92(0x2ef)](0x2,'0');}function getCleanTimeStamp(){const _0x2387a4=_0x5517e8,_0x475265=shiftedTime();return _0x475265[_0x2387a4(0x17f)]()+(_0x475265[_0x2387a4(0x1e6)]()+0x1)['toString']()[_0x2387a4(0x2ef)](0x2,'0')+_0x475265['getDate']()[_0x2387a4(0x25a)]()[_0x2387a4(0x2ef)](0x2,'0')+'-'+_0x475265[_0x2387a4(0x2ac)]()[_0x2387a4(0x25a)]()[_0x2387a4(0x2ef)](0x2,'0')+_0x475265[_0x2387a4(0x333)]()[_0x2387a4(0x25a)]()['padStart'](0x2,'0')+_0x475265[_0x2387a4(0x23d)]()[_0x2387a4(0x25a)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x3a9f23=_0x5517e8,_0x3f0af3=new Date();let _0x430156=_0x3f0af3;if(settings[_0x3a9f23(0x216)]&&settings[_0x3a9f23(0x216)]!==0x0)_0x430156=fns[_0x3a9f23(0x279)](_0x3f0af3,{'hours':settings[_0x3a9f23(0x216)]});return _0x430156;}async function startScheduler(){const _0x288711=_0x5517e8,_0x2d50d5=new Date()['getUTCHours'](),_0x525d7c=shiftedTime()[_0x288711(0x2ac)]();_0x525d7c==0x4&&backupConfigFiles(),_0x525d7c==0x0&&rotateLogFiles(),_0x2d50d5%0x6==0x0&&triggerAnalytics(),_0x2d50d5%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}function _0x4383(_0x20f127,_0x2d3f7f){const _0x27fc41=_0xc2e8();return _0x4383=function(_0x5086f2,_0x1e8141){_0x5086f2=_0x5086f2-0x156;let _0xc2e876=_0x27fc41[_0x5086f2];return _0xc2e876;},_0x4383(_0x20f127,_0x2d3f7f);}async function restoreBackupFile(_0x414641){const _0x531eec=_0x5517e8;logger[_0x531eec(0x164)](_0x531eec(0x21e)+_0x414641);const _0xfe3bf3=getBotsWithMode();_0xfe3bf3[_0x531eec(0x236)]>0x0?confirmRestore(configbackuppath,_0x414641):unzipFile(configbackuppath,_0x414641);}async function getBackupFiles(_0x238b86=null){const _0x5b96a3=_0x5517e8;let _0x102af0=[],_0xda8af5=fs[_0x5b96a3(0x177)](configbackuppath,{'withFileTypes':!![]});_0xda8af5['sort']((_0x4b7d54,_0x2f640f)=>_0x4b7d54[_0x5b96a3(0x2f9)]<_0x2f640f[_0x5b96a3(0x2f9)]?0x1:_0x2f640f[_0x5b96a3(0x2f9)]<_0x4b7d54[_0x5b96a3(0x2f9)]?-0x1:0x0),_0xda8af5[_0x5b96a3(0x2a0)](_0x58d71e=>{const _0x5d6b97=_0x5b96a3;if(!_0x58d71e[_0x5d6b97(0x328)]()&&_0x58d71e[_0x5d6b97(0x2f9)]['startsWith'](_0x5d6b97(0x2e1))&&_0x58d71e[_0x5d6b97(0x2f9)]['endsWith'](_0x5d6b97(0x2ae))){const _0x117180=formatDate(fs[_0x5d6b97(0x1d4)](configbackuppath+_0x58d71e[_0x5d6b97(0x2f9)])[_0x5d6b97(0x22c)]);_0x102af0[_0x5d6b97(0x292)]({'name':_0x58d71e[_0x5d6b97(0x2f9)],'mtime':_0x117180});}});if(_0x238b86)io['to'](_0x238b86)[_0x5b96a3(0x1bf)](_0x5b96a3(0x2e9),_0x102af0);else return _0x102af0;}async function backupConfigFiles(){const _0x183c34=_0x5517e8;await zipFiles(_0x183c34(0x1f5));const _0x444433=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x183c34(0x265),configbackuppath+(_0x183c34(0x2e1)+_0x444433+_0x183c34(0x2ae)));let _0x27b979=fs[_0x183c34(0x177)](configbackuppath,{'withFileTypes':!![]});_0x27b979[_0x183c34(0x1c5)]((_0x583c28,_0x3f72b1)=>_0x583c28[_0x183c34(0x2f9)]<_0x3f72b1['name']?0x1:_0x3f72b1[_0x183c34(0x2f9)]<_0x583c28[_0x183c34(0x2f9)]?-0x1:0x0),_0x27b979['length']>maxBackups&&fs[_0x183c34(0x1d3)](configbackuppath+_0x27b979[_0x27b979[_0x183c34(0x236)]-0x1][_0x183c34(0x2f9)]);}function rotateLogFiles(){const _0x3bd243=_0x5517e8,_0x17f909=fs['statSync'](logspath+_0x3bd243(0x2f6)),_0x1e4c5d=_0x17f909[_0x3bd243(0x1ea)]/0x400;if(_0x1e4c5d>0x64){let _0x3e3dcd=fs[_0x3bd243(0x177)](logspath,{'withFileTypes':!![]});_0x3e3dcd[_0x3bd243(0x1c5)]((_0x204842,_0x255dff)=>_0x204842[_0x3bd243(0x2f9)]<_0x255dff[_0x3bd243(0x2f9)]?0x1:_0x255dff[_0x3bd243(0x2f9)]<_0x204842[_0x3bd243(0x2f9)]?-0x1:0x0),_0x3e3dcd['forEach'](_0x39fe28=>{const _0x214300=_0x3bd243;if(_0x39fe28[_0x214300(0x2f9)]=='output-002.log')fs['copyFileSync'](logspath+_0x39fe28[_0x214300(0x2f9)],logspath+_0x214300(0x258));if(_0x39fe28[_0x214300(0x2f9)]=='output-001.log')fs[_0x214300(0x29b)](logspath+_0x39fe28['name'],logspath+'output-002.log');_0x39fe28[_0x214300(0x2f9)]=='output-000.log'&&(fs[_0x214300(0x29b)](logspath+_0x39fe28['name'],logspath+'output-001.log'),fs[_0x214300(0x302)](logspath+_0x39fe28[_0x214300(0x2f9)],''));});}}async function zipFiles(_0x5b1a23){const _0x53d0c8=_0x5517e8;let _0x5e035a;if(_0x5b1a23==_0x53d0c8(0x233))_0x5e035a=logspath;if(_0x5b1a23==_0x53d0c8(0x201))_0x5e035a=configpath;if(_0x5b1a23==_0x53d0c8(0x1f5))_0x5e035a=configpath;let _0x1b63da=fs[_0x53d0c8(0x177)](_0x5e035a,{'withFileTypes':!![]});const _0x51da22=new JSZip();_0x1b63da['forEach'](_0x3be433=>{const _0x4c56ae=_0x53d0c8;if(!_0x3be433[_0x4c56ae(0x328)]()){let _0x2e4511=fs['readFileSync'](_0x5e035a+_0x3be433['name']);if(_0x5b1a23==_0x4c56ae(0x201)){const _0xef04e=/^bot-[0-9]{3}-config.json$/,_0x14d050=_0xef04e['test'](_0x3be433['name']);if(_0x14d050){const _0xb22d86=JSON[_0x4c56ae(0x2f4)](_0x2e4511);if(_0xb22d86[_0x4c56ae(0x16f)][0x0]){_0xb22d86[_0x4c56ae(0x16f)][0x0][_0x4c56ae(0x343)]='***',_0xb22d86[_0x4c56ae(0x16f)][0x0][_0x4c56ae(0x2e5)]=_0x4c56ae(0x33a);if(_0xb22d86[_0x4c56ae(0x16f)][0x0][_0x4c56ae(0x16b)])_0xb22d86['bot'][0x0]['apiPassword']='***';}_0x2e4511=JSON[_0x4c56ae(0x1be)](_0xb22d86,null,0x2);}if(_0x3be433['name']==_0x4c56ae(0x2f2)){const _0x35aa93=JSON[_0x4c56ae(0x2f4)](_0x2e4511);if(_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x1c1)])_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x1c1)]=![];if(_0x35aa93['settings'][_0x4c56ae(0x2fc)])_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x2fc)]=_0x4c56ae(0x33a);if(_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x22b)])_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x22b)]=_0x4c56ae(0x33a);if(_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x256)])_0x35aa93[_0x4c56ae(0x211)]['telegramChatId']=null;if(_0x35aa93[_0x4c56ae(0x211)][_0x4c56ae(0x366)])_0x35aa93[_0x4c56ae(0x211)]['marketcapApi']='***';_0x2e4511=JSON[_0x4c56ae(0x1be)](_0x35aa93,null,0x2);}if(_0x3be433[_0x4c56ae(0x2f9)]!=_0x4c56ae(0x2cf))_0x51da22['file'](_0x3be433[_0x4c56ae(0x2f9)],_0x2e4511);}else _0x51da22[_0x4c56ae(0x19b)](_0x3be433['name'],_0x2e4511);}});const _0x2a2a05=await _0x51da22[_0x53d0c8(0x27d)]({'type':_0x53d0c8(0x34a),'base64':![],'compression':_0x53d0c8(0x2ea)});fs[_0x53d0c8(0x302)](zippath+(_0x5b1a23+'.zip'),_0x2a2a05,_0x53d0c8(0x319));}async function unzipFile(_0x5d2d6c,_0x5c3e6e){const _0x3fd076=_0x5517e8;fs[_0x3fd076(0x177)](configpath,{'withFileTypes':!![]})[_0x3fd076(0x2a0)](_0x342ae1=>{const _0x499ed8=_0x3fd076;if(!_0x342ae1[_0x499ed8(0x328)]())fs[_0x499ed8(0x303)](configpath+_0x342ae1[_0x499ed8(0x2f9)]);});const _0x151621=fs['readFileSync'](_0x5d2d6c+_0x5c3e6e,_0x3fd076(0x319)),_0x44eeb3=await JSZip[_0x3fd076(0x324)](_0x151621,{'base64':![],'checkCRC32':!![]});for(const _0x122d46 of Object[_0x3fd076(0x234)](_0x44eeb3[_0x3fd076(0x1df)])){const _0x42c5b5=_0x44eeb3['files'][_0x122d46],_0x4e1a81=await _0x42c5b5[_0x3fd076(0x2df)]('string');fs['writeFileSync'](configpath+_0x42c5b5['name'],_0x4e1a81);}fs[_0x3fd076(0x177)](temppath,{'withFileTypes':!![]})['forEach'](_0x5f204d=>{const _0xa91fe6=_0x3fd076;if(!_0x5f204d[_0xa91fe6(0x328)]())fs['rmSync'](temppath+_0x5f204d[_0xa91fe6(0x2f9)]);}),logger[_0x3fd076(0x164)](_0x3fd076(0x206)),process[_0x3fd076(0x20c)]({'restore':!![]},_0x395aeb=>{});}async function getPublicIp(){const _0xa55c36=_0x5517e8;try{const _0x5c6112=await axios[_0xa55c36(0x24b)]('https://api.ipify.org?format=json');publicip=_0x5c6112[_0xa55c36(0x16c)]['ip'];}catch(_0x41c6be){}}async function triggerAnalytics(){const _0x1061fc=_0x5517e8;if(!publicip)await getPublicIp();const _0x14463f=getBotsWithMode();let _0x1a8cf2=0x0;_0x14463f['forEach'](_0x1a6e1c=>{const _0x50f5a0=_0x4383;if(_0x1a6e1c[_0x50f5a0(0x2c5)]==='enabled')_0x1a8cf2++;});const _0x152714=getBotExchanges();mixpanel[_0x1061fc(0x345)]('Server',{'distinct_id':settings[_0x1061fc(0x172)],'ip':publicip,'version':serverversion,'numbots':_0x14463f[_0x1061fc(0x236)],'numbotsenabled':_0x1a8cf2,'exchanges':_0x152714,'environment':environment});}async function getMessages(){const _0x444bf3=_0x5517e8,_0x1512b9=_0x444bf3(0x19c),_0x20041f=new GraphQLClient(_0x1512b9),_0x492e93={'authorization':_0x444bf3(0x30a)},_0x2fc550=serverversion[_0x444bf3(0x2ed)]('.'),_0x14081c=_0x2fc550[0x0]+'.'+_0x2fc550[0x1],_0x54c8ff=Math[_0x444bf3(0x1a4)](settings[_0x444bf3(0x36e)],settings[_0x444bf3(0x31e)]),_0x21f2a5={'last':parseInt(_0x54c8ff),'bbm':_0x14081c},_0x36f26d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1cb2a0;try{_0x1cb2a0=await _0x20041f[_0x444bf3(0x202)](_0x36f26d,_0x21f2a5,_0x492e93);}catch(_0x108cbf){}if(_0x1cb2a0&&_0x1cb2a0[_0x444bf3(0x1db)]){let _0xee7ac=settings[_0x444bf3(0x36e)];newMessages=[];for(const _0x59e483 of _0x1cb2a0[_0x444bf3(0x1db)]){newMessages[_0x444bf3(0x292)](_0x59e483);let _0x27d885=![];_0x59e483[_0x444bf3(0x315)]&&(updateSetting(_0x444bf3(0x212),_0x59e483[_0x444bf3(0x315)]),_0x27d885=isNewerVersion(serverversion,_0x59e483[_0x444bf3(0x315)])||serverversion==_0x59e483[_0x444bf3(0x315)]);if(!_0x27d885&&_0x59e483[_0x444bf3(0x269)]>_0xee7ac){if(_0x59e483[_0x444bf3(0x27c)]===_0x444bf3(0x1c7)||serverversion[_0x444bf3(0x34c)](_0x59e483[_0x444bf3(0x27c)])){let _0x5edb56=''+_0x59e483[_0x444bf3(0x23b)]+'\x0a\x0a'+_0x59e483[_0x444bf3(0x205)];const _0x21449f=await sendTelegramMsg(toTelegramMarkdown(_0x5edb56),_0x444bf3(0x230));if(_0x21449f)_0xee7ac=_0x59e483[_0x444bf3(0x269)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting('lastmsgtelegram',_0xee7ac),emitMessages();}}function emitMessages(){const _0x270bc4=_0x5517e8,_0x262de1=settings['lastmsgemitted'];let _0x2de66d=[];newMessages[_0x270bc4(0x2a0)](_0xf51dd9=>{const _0x4fb0a7=_0x270bc4;_0xf51dd9[_0x4fb0a7(0x269)]>_0x262de1&&_0x2de66d[_0x4fb0a7(0x292)](_0xf51dd9);}),_0x2de66d['length']>0x0&&getAllClients()['forEach'](_0x1bc40c=>{const _0x4b5588=_0x270bc4;getSocket(_0x1bc40c['id'])[_0x4b5588(0x1bf)](_0x4b5588(0x205),_0x2de66d);});}function confirmMessage(_0x39fafd){const _0xf9c31c=_0x5517e8;updateSetting(_0xf9c31c(0x31e),Number(_0x39fafd));}function isNewerVersion(_0x3de850,_0x3d7afa){const _0x406301=_0x5517e8,_0x280616=_0x3d7afa['split']('.'),_0x4532f4=_0x3de850[_0x406301(0x2ed)]('.');for(var _0x12a9cd=0x0;_0x12a9cd<_0x4532f4[_0x406301(0x236)];_0x12a9cd++){const _0x2a9489=~~_0x4532f4[_0x12a9cd],_0x38c88a=~~_0x280616[_0x12a9cd];if(_0x2a9489>_0x38c88a)return!![];if(_0x2a9489<_0x38c88a)return![];}return![];}function toTelegramMarkdown(_0xe8f365){const _0x161228=_0x5517e8,_0x57414f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x270f7f=/\*{2}(.+?)\*{2}/gim;return _0xe8f365=_0xe8f365[_0x161228(0x286)](_0x57414f,_0x161228(0x218))[_0x161228(0x286)](_0x270f7f,'*$1*'),_0xe8f365;}async function validateConfigFile(){const _0x39d08b=_0x5517e8,_0x35994c=dbConfig[_0x39d08b(0x24b)](_0x39d08b(0x357))[_0x39d08b(0x262)](_0x39d08b(0x15b))[_0x39d08b(0x367)]()||[];if(_0x35994c[_0x39d08b(0x236)]==0x0){let _0x413d33=0x0,_0x23b60c=[];const _0x4de6d7=/^bot-([0-9]{3})-config.json$/,_0x679a06=fs[_0x39d08b(0x177)](configpath);_0x679a06[_0x39d08b(0x2a0)](_0x57f4ab=>{const _0x48e8f5=_0x39d08b,_0x3c757a=_0x4de6d7['exec'](_0x57f4ab);if(_0x3c757a){const _0xb83a87=_0x3c757a[0x1];let _0x5f276c=getBotAttributes(_0xb83a87);_0x23b60c['push']({'botID':_0xb83a87,'botname':_0x5f276c['botname'],'status':'disabled','live':_0x48e8f5(0x28f)}),_0x413d33++;}}),_0x413d33!=0x0&&(dbConfig[_0x39d08b(0x24b)](_0x39d08b(0x357))[_0x39d08b(0x312)](_0x23b60c)[_0x39d08b(0x2e2)](),config=_0x23b60c,restoredConfigFile=_0x413d33);}}async function restoreConfigNotify(_0x6da4c8){const _0x165099=_0x5517e8;let _0x558652;if(restoredConfigFile==0x1)_0x558652=_0x165099(0x2c6);else _0x558652=_0x165099(0x208);if(_0x6da4c8)io['to'](_0x165099(0x1ab))['emit'](_0x165099(0x2ba),_0x558652);else{logger[_0x165099(0x36c)](_0x165099(0x32e)),logger[_0x165099(0x36c)](_0x558652),logger[_0x165099(0x36c)](_0x165099(0x32e)),logger[_0x165099(0x36c)]('');if(tgBot&&settings[_0x165099(0x256)]&&settings[_0x165099(0x1dd)]!=_0x165099(0x1da))await sendTelegram(settings[_0x165099(0x256)],_0x165099(0x24d)+_0x558652);}}function decryptRSA(_0x21e79d,_0x45da6c){const _0xafb06a=_0x5517e8,_0x41ed96=forge[_0xafb06a(0x29f)]['privateKeyFromPem'](_0x21e79d),_0x3d0e95=_0x41ed96[_0xafb06a(0x24f)](forge['util']['decode64'](_0x45da6c),_0xafb06a(0x1ff),{'md':forge['md'][_0xafb06a(0x330)]['create'](),'mgf1':{'md':forge['md'][_0xafb06a(0x330)][_0xafb06a(0x2bc)]()}});return _0x3d0e95;}function _0xc2e8(){const _0x4a80a9=['keys','enable','length','reload','new-disabled','restore_no_','/status\x20-\x20show\x20bot(s)\x20status\x0a','title','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','getSeconds','launch','Unauthorized\x20attempt\x20to\x20confirm\x20message','token','Unauthorized\x20attempt\x20to\x20show\x20configuration','node','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','reinstall','portfolio_','/update\x20-\x20update\x20Balance\x20Bot\x0a','manual','No\x20authentication\x20token','apply','Allow\x20login\x20from\x20IP\x20address\x20','get','User\x20has\x20been\x20validated','Bot\x20Mgr\x20>\x20','secure','decrypt','log','-performance.json','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Restore\x20process\x20aborted','Enabled\x20Bot\x20','Notifications\x20enabled\x0a','telegramChatId','config','output-003.log','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','toString','error','restart','/:bot/history','api-eu.mixpanel.com','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Network\x20Interfaces:','\x20|\x20','sortBy','login\x20token\x20valid','Deleted\x20Bot\x20','backup-full.zip','chat','sendPortfolioTelegram','config_alerts','number','BCT','/metrics\x20-\x20show\x20bot\x20performance\x0a','once','sendFile','logout','family','address','showConfig','\x20(2)','529616vxCSMn','\x1b[34m','HTML','status\x20code\x20401','/:bot/portfolio','button','add','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','bbUsername','bbvReceive','generateAsync','get-backup-files','clients','argv','constructor','jsonwebtoken','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','replace','Bot\x20','inlineKeyboard','10fQssaO','Starting\x20(','express','tempaccess_15_','update_no','toggle','stopped','resetpw_no','reply','push','\x20mode','\x1b[35m','127.0.0.1','cloneDeep','login','function','ipaddr.js','tempaccess_reject_','copyFileSync','/start','resetpw_yes','use','pki','forEach','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20events','yargs/yargs','telegrammsg','pidExpireLogin','settings.','type',',\x20must\x20be\x20a\x204\x20digit\x20number','timestamp','build2','download','getHours','resetHistory','.zip','whitelist','getPortfolio','stop','exchange','clientip','action','mixpanel','slice','Error\x20removing\x20old\x20backup\x20files:','Unauthorized\x20attempt\x20to\x20get\x20portfolio','connected','notification','set','create','2FA\x20login\x20required','createWriteStream','kind','alias','_nsps','\x20(1)','names','start','status','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','headless','allow','getDate','environment','hasOwnProperty','Yes','deleteHistoryAlerts','Notifications\x20disabled\x0a','bb-secure.json','5\x20min','createServer','catch','init','existsSync','ipc','update-bb','isIPv4MappedAddress','\x1b[33m','temporary\x20access\x20not\x20allowed','storeHeadless','yes',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','delete-alerts','logs/','async','encryptedUuid','backup-full@','write','access\x20timeout','/help\x20-\x20show\x20available\x20commands\x0a','apiSecret','pidRefreshToken','Unauthorized\x20attempt\x20to\x20log\x20out','|@|','backup-files','DEFLATE','SIGTERM','Unauthorized\x20attempt\x20to\x20store\x20configuration','split','get-starting-balances','padStart','range','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bb-settings.json','All\x20bots\x20running\x20right\x20now','parse','bb-config.json','output-000.log','Invalid\x20IP\x20address','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','name','162300EPszzM','reset-history','bbPassword','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','new',':\x20Bot\x20Mgr\x20>\x20','/backup\x20-\x20receive\x20backup\x20files\x0a','address\x20already\x20in\x20use','writeFileSync','rmSync','temp/','No\x20bots\x20running\x20right\x20now','Node.js\x20v','full','socket','\x1b[0m','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','private','exit','expiry','show-config',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','join','assign','hashSync','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','bbvNew','-results.json','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Password\x20has\x20been\x20reset\x20to:\x20','binary','login2fa_reject_','-events.json','index.html','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','lastmsgemitted','CoinMarketCap\x20API\x20key\x20validated','2FA','2FA\x20login\x20token\x20generated','cancelLoading','remove','loadAsync','\x1b[36m','username','[ip-address]','isDirectory','158207ihSuYz','Notifications\x20types:\x20','/:bot','/off\x20-\x20stop\x20bot(s)\x0a','telegram2FaApproval','-----------------------------------------------------------------------------------','replyWithDocument','sha256','-config.json','mkdirSync','getMinutes','telegram','entries','getStartingBalances','************','port','Ok,\x20will\x20send\x20alert\x20notifications\x20only','***','from','store-configuration','server',')\x20\x20\x20|\x20Bot\x20','temporary\x20access\x20rejected','secret','defaults','privateKey','apiKey','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','track','2FA\x20required','invalid\x20credentials','version.json','initclient','string','text','startsWith','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Ok,\x20will\x20send\x20order\x20notifications\x20only','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','off_','Failed\x20to\x20download\x20','post','storeFiat','telegramIpApproval','args','node-forge','bots','\x20-\x20','disabled','uuid','connection','all','config_orders','showname','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','All\x20bots','enabled','SIGINT','build','bcryptjs','randomFillSync','marketcapApi','value','config/','store-fiat','botname','static','simple','\x20|\x20client:\x20...','lastmsgtelegram','onepagemode','6b67f3d61ee94b8f5c80b4affef4c4d9','logged\x20out','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','922371Dpximi','getTime','botID','warning','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','internal','storeConfiguration','sockets','#RES#\x20if\x20running\x20on\x20server','handshake','Restarting\x20Bot\x20','debug','0.0.0','updatebotmanager','login\x20not\x20required','\x20>\x20','auth','::ffff:127.0.0.1','apiPassword','data','randomBytes','format','bot','Unauthorized\x20attempt\x20to\x20delete\x20bot','reject','userid','referer','All','\x20|\x20user:\x20...','Setting\x20access:\x20','readdirSync','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Unauthorized\x20attempt\x20to\x20add\x20bot','get-messages','success','Restore\x20process\x20confirmed','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','show','getFullYear','/logs\x20-\x20receive\x20log\x20files\x0a','sign','get-portfolio','accept','started','Idling\x20(','config_all','callback','metrics','Notifications\x20disabled','auto','telegraf','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','express-fileupload','isValid','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','341778WJMAdc','/on\x20-\x20start\x20bot(s)\x0a','uuid-random','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/output-000.log','store-settings','tempaccess_30_','<b>Telegram\x20Bot\x20Status:</b>\x0a','user','socket.io','f2aRequired','file','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','fork','toIPv4MappedAddress','Telegraf\x20error:','crypto','\x20to\x20','update','mode','min','temporary\x20token\x20generated','Unauthorized\x20attempt\x20to\x20update\x20settings','backup/','/names\x20-\x20show\x20bot\x20names\x0a','Access\x20enabled\x20for\x20','portfolio','botmanager','#RES#\x20','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','=>\x20Go\x20to\x20#CYA#http://','toggle_','backupfile','telegramUsername','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','login\x20required','2445408zhEjOA','map','test','listen','readFileSync','rsa','stringify','emit','Unauthorized\x20attempt\x20to\x20update\x20bot','loginRequired','Backup\x20file\x20uploaded','search','update_yes','sort','Invalid\x20authentication\x20token\x20(2)','any','generateKeyPair','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','#RES#','publicKeyToPem','toggle-bot-mode','30\x20min','Login\x20accepted','/:bot/performance','zip/','access','unlinkSync','statSync','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','versions','/download/:type','blacklist','graphql-request','orders','messages','sendMetricsTelegram','telegramEvents','production','files','find','reason','/enable\x20-\x20enable\x20notifications\x0a','telegramEnabled','bot.js','removeAllListeners','getMonth','tkn','601224vLHyDO','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','size','match','event','publicKey','close','disconnect','Session\x20expired\x20for\x20user\x20...','Logged\x20out\x20user\x20...','bot-','staging','<b>Balance\x20Bot\x20Status:</b>\x0a','backup-full','password','Unauthorized\x20attempt\x20to\x20get\x20messages','reinstall_no','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','whitelistEnabled','placeOrder','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','restart_','restore-backup-file','RSA-OAEP','env','backup','request','alerts','max','message','Backup\x20file\x20unzipped\x20and\x20stored','Error\x20sending\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20download\x20','ETH','lowdb/adapters/FileSync','send','emitHistory','remoteAddress','includes','headers','settings','latestversion','toggleBotMode','Logged\x20in\x20user\x20...','IPv4','timeshift','editMessageReplyMarkup','$1_$2_$3','112CxuUpy','Unauthorized\x20login\x20attempt\x20(timeout)','Notifications\x20enabled','add-bot','command','Restore\x20backup\x20file\x20','Error\x20while\x20deleting\x20config\x20files:\x20','Error:\x20Invalid\x20argument\x20','1000','live','Your\x20installation\x20is\x20already\x20up\x20to\x20date','then','(staging)','kill','\x20files\x20over\x20Telegram:','params','off','ipv6','telegramToken','mtime','Invalid\x20authentication\x20token\x20(1)','inherit','lowdb','Markdown','/upload-backup','login\x20token\x20generated','logs'];_0xc2e8=function(){return _0x4a80a9;};return _0xc2e8();}function validateCredentials(_0x201967,_0x5466c6){const _0x5c461e=_0x5517e8;if(_0x201967[_0x5c461e(0x326)]==settings[_0x5c461e(0x27b)]&&bcrypt['compareSync'](_0x201967[_0x5c461e(0x1f6)],settings[_0x5c461e(0x2fc)])){if(settings[_0x5c461e(0x19a)])return{'allow':![],'reason':_0x5c461e(0x2bd),'token':null};else{const _0x3640f4=generateLoginToken(_0x5466c6);return{'allow':!![],'reason':_0x5c461e(0x232),'token':_0x3640f4};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x2bb428){const _0x305e4e=_0x5517e8,_0x3898c8=generateLoginToken(_0x2bb428);return{'allow':!![],'reason':_0x305e4e(0x232),'token':_0x3898c8};}function validateAccess(_0xc24305,_0x27b757,_0x4238bf){const _0x35b5e8=_0x5517e8,_0x3f3c8d=_0x4238bf?_0x4238bf:devices[_0x27b757]['ip'];let _0x25660e;const _0x16527c=_0x3f9606=>{const _0xf0a2bd=_0x4383;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x27b757)){const _0x1442c7=generateLoginToken(_0x27b757);return{'allow':!![],'reason':_0xf0a2bd(0x321),'token':_0x1442c7};}else return{'allow':![],'reason':_0xf0a2bd(0x1b7),'token':null};}else return _0x25660e=validToken(_0x3f9606,_0x27b757),_0x25660e[_0xf0a2bd(0x2cb)](_0xf0a2bd(0x17b))?{'allow':!![],'reason':_0xf0a2bd(0x263),'token':_0x3f9606}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xf0a2bd(0x167),'token':null};};if(settings[_0x35b5e8(0x1fa)]){let _0x3139c2=[...settings[_0x35b5e8(0x2af)],'::1',_0x35b5e8(0x16a),_0x35b5e8(0x295)];if(_0x3139c2[_0x35b5e8(0x20f)](_0x3f3c8d))return _0x16527c(_0xc24305);else{_0x25660e=validToken(_0xc24305,_0x27b757);if(_0x25660e[_0x35b5e8(0x2cb)](_0x35b5e8(0x17b)))return _0x16527c(_0xc24305);else{if(telegramIpApproved(_0x27b757)){const _0xc7f55d=generateToken(_0x27b757);return _0x25660e=_0x16527c(_0xc24305),_0x25660e[_0x35b5e8(0x2c8)]?{'allow':!![],'reason':_0x35b5e8(0x1a5),'token':_0xc7f55d}:_0x25660e;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x35b5e8(0x346),'token':null}:{'allow':![],'reason':_0x35b5e8(0x2d9),'token':null};}}}else return _0x16527c(_0xc24305);}function timelyDecrypt(_0x52eb6b,_0x3a4d29,_0x3aea16='@'){const _0x21e93e=_0x5517e8;if(_0x52eb6b)try{const _0x10a640=decryptRSA(secure['privateKey'],_0x52eb6b),_0x4fe3a2=_0x10a640[_0x21e93e(0x2ed)](_0x3aea16)[0x0],_0x8a8b6f=_0x10a640[_0x21e93e(0x2ed)](_0x3aea16)[0x1],_0x5722e3=new Date()['getTime']();if(_0x3a4d29){if(_0x5722e3-_0x8a8b6f<maxSecretAge*0x3e8)return _0x4fe3a2;else return![];}else return _0x4fe3a2;}catch(_0x3f3ae7){return![];}else return![];}const validToken=(_0x243b23,_0xb070fe)=>{const _0x1ea2a3=_0x5517e8,_0x155578=devices[_0xb070fe]['ip'];if(!_0x243b23)return{'error':_0x1ea2a3(0x248)};for(let _0x5db70f of blacklist){if(_0x5db70f['token']==_0x243b23)return{'error':'Token\x20blacklisted'};}let _0x16e6fa;try{_0x16e6fa=jwt['verify'](_0x243b23,secure[_0x1ea2a3(0x340)]+_0xb070fe);}catch{return{'error':_0x1ea2a3(0x22d)};}if(!_0x16e6fa[_0x1ea2a3(0x2cb)](_0x1ea2a3(0x2b3))&&!_0x16e6fa['hasOwnProperty'](_0x1ea2a3(0x326))||!_0x16e6fa['hasOwnProperty']('exp'))return{'error':_0x1ea2a3(0x1c6)};if(!_0x16e6fa[_0x1ea2a3(0x2cb)](_0x1ea2a3(0x326))&&_0x16e6fa[_0x1ea2a3(0x2cb)](_0x1ea2a3(0x2b3))){const {clientip:_0x3d528c}=_0x16e6fa;return _0x155578==_0x3d528c?{'success':_0x1ea2a3(0x24c)}:{'error':_0x1ea2a3(0x2f7)};}else{if(_0x16e6fa[_0x1ea2a3(0x2cb)](_0x1ea2a3(0x326))&&_0x16e6fa['hasOwnProperty'](_0x1ea2a3(0x2b3))){const {username:_0x2fee2d,clientip:_0x2d79d4}=_0x16e6fa;return settings[_0x1ea2a3(0x27b)]==_0x2fee2d&&_0x155578==_0x2d79d4?{'success':_0x1ea2a3(0x24c)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x2e0c8d=>{const _0x4d8494=_0x5517e8;if(_0x2e0c8d){const _0x388394=devices[_0x2e0c8d]['ip'];return jwt[_0x4d8494(0x181)]({'username':settings[_0x4d8494(0x27b)],'clientip':_0x388394},secure['secret']+_0x2e0c8d,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x4865ff=>{const _0x3942c7=_0x5517e8;if(_0x4865ff){const _0x3da8dc=devices[_0x4865ff]['ip'];return jwt[_0x3942c7(0x181)]({'clientip':_0x3da8dc},secure['secret']+_0x4865ff,{'expiresIn':devices[_0x4865ff][_0x3942c7(0x354)][_0x3942c7(0x30d)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x316570=>{const _0xd1b31=_0x5517e8;let _0x16e70d=![];return devices[_0x316570]['telegramIpApproval']&&devices[_0x316570][_0xd1b31(0x354)][_0xd1b31(0x30d)]!='reject'&&(_0x16e70d=devices[_0x316570][_0xd1b31(0x354)][_0xd1b31(0x2b3)]==devices[_0x316570]['ip']&&new Date()[_0xd1b31(0x15a)]()-devices[_0x316570][_0xd1b31(0x354)]['timestamp']<devices[_0x316570][_0xd1b31(0x354)][_0xd1b31(0x30d)]*0x3c*0x3e8),_0x16e70d;},telegram2FaApproved=_0x3e2489=>{const _0x14d52b=_0x5517e8;let _0x593695=![];return devices[_0x3e2489][_0x14d52b(0x32d)]&&devices[_0x3e2489][_0x14d52b(0x32d)]['expiry']!=_0x14d52b(0x171)&&(_0x593695=devices[_0x3e2489][_0x14d52b(0x32d)][_0x14d52b(0x2b3)]==devices[_0x3e2489]['ip']&&new Date()['getTime']()-devices[_0x3e2489]['telegram2FaApproval']['timestamp']<devices[_0x3e2489][_0x14d52b(0x32d)][_0x14d52b(0x30d)]*0x3c*0x3e8),_0x593695;},normalizeIP=_0x234b11=>{const _0x37e757=_0x5517e8;let _0x1d4bb=null,_0x1b8d34=null;if(ipaddr[_0x37e757(0x18e)](_0x234b11)){const _0x1ed222=ipaddr['parse'](_0x234b11);_0x1ed222[_0x37e757(0x2bf)]()===_0x37e757(0x22a)?(_0x1ed222[_0x37e757(0x2d7)]()&&(_0x1d4bb=_0x1ed222['toIPv4Address']()[_0x37e757(0x25a)]()),_0x1b8d34=_0x1ed222[_0x37e757(0x25a)]()):(_0x1d4bb=_0x1ed222['toString'](),_0x1b8d34=_0x1ed222[_0x37e757(0x19e)]()['toString']());}return{'show':_0x1d4bb?_0x1d4bb:_0x1b8d34,'store':_0x1b8d34};};function formatDate(_0x2b9855){const _0x155d92=_0x5517e8;return _0x2b9855[_0x155d92(0x17f)]()+'/'+(_0x2b9855[_0x155d92(0x1e6)]()+0x1)['toString']()[_0x155d92(0x2ef)](0x2,'0')+'/'+_0x2b9855[_0x155d92(0x2c9)]()[_0x155d92(0x25a)]()['padStart'](0x2,'0')+'\x20'+_0x2b9855[_0x155d92(0x2ac)]()[_0x155d92(0x25a)]()[_0x155d92(0x2ef)](0x2,'0')+':'+_0x2b9855[_0x155d92(0x333)]()['toString']()[_0x155d92(0x2ef)](0x2,'0')+':'+_0x2b9855[_0x155d92(0x23d)]()[_0x155d92(0x25a)]()[_0x155d92(0x2ef)](0x2,'0');}function sleep(_0x5e2d99){return new Promise(_0xbab4fd=>setTimeout(_0xbab4fd,_0x5e2d99));}