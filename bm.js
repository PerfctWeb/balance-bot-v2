const _0x5203bb=_0xadf0;(function(_0xaeeb2d,_0x1d8bd8){const _0xef2265=_0xadf0,_0x193022=_0xaeeb2d();while(!![]){try{const _0x19f327=-parseInt(_0xef2265(0x1b6))/0x1+parseInt(_0xef2265(0x2d5))/0x2+-parseInt(_0xef2265(0x1a4))/0x3+-parseInt(_0xef2265(0x1c3))/0x4+-parseInt(_0xef2265(0x294))/0x5*(-parseInt(_0xef2265(0x262))/0x6)+-parseInt(_0xef2265(0x22c))/0x7+parseInt(_0xef2265(0x29c))/0x8;if(_0x19f327===_0x1d8bd8)break;else _0x193022['push'](_0x193022['shift']());}catch(_0x4202b8){_0x193022['push'](_0x193022['shift']());}}}(_0x317d,0x57ebb));const _0x8ff140=function(){let _0x3f6bb4=!![];return function(_0x23671d,_0x5c3989){const _0x1011f5=_0x3f6bb4?function(){const _0x4f2380=_0xadf0;if(_0x5c3989){const _0x57df84=_0x5c3989[_0x4f2380(0x23b)](_0x23671d,arguments);return _0x5c3989=null,_0x57df84;}}:function(){};return _0x3f6bb4=![],_0x1011f5;};}(),_0x23973b=_0x8ff140(this,function(){const _0xfca0ed=_0xadf0;return _0x23973b[_0xfca0ed(0x275)]()['search']('(((.+)+)+)+$')['toString']()[_0xfca0ed(0x239)](_0x23973b)[_0xfca0ed(0x229)]('(((.+)+)+)+$');});_0x23973b();'use strict';process[_0x5203bb(0x2a9)][_0x5203bb(0x20d)]=0x1;const childProcess=require(_0x5203bb(0x27a)),fs=require('fs'),fns=require(_0x5203bb(0x2ba)),low=require(_0x5203bb(0x23e)),FileSync=require(_0x5203bb(0x2b6)),path=require(_0x5203bb(0x18d)),crypto=require('crypto'),Crypt=require(_0x5203bb(0x26f))['Crypt'],RSA=require(_0x5203bb(0x26f))['RSA'],bcrypt=require(_0x5203bb(0x1a0)),jwt=require('jsonwebtoken'),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require(_0x5203bb(0x2a5))[_0x5203bb(0x2f7)],ipaddr=require(_0x5203bb(0x2e6)),argv=require(_0x5203bb(0x1bc))(process[_0x5203bb(0x23c)][_0x5203bb(0x2e2)](0x2))['argv'],uuidRandom=require(_0x5203bb(0x1fd)),Mixpanel=require(_0x5203bb(0x27c)),axios=require('axios'),{GraphQLClient,gql}=require(_0x5203bb(0x237)),PORT=argv[_0x5203bb(0x2aa)]||_0x5203bb(0x204),pattern=/^[0-9]{2,4}$/;!pattern[_0x5203bb(0x270)](PORT)&&(console[_0x5203bb(0x198)](_0x5203bb(0x219)+PORT+_0x5203bb(0x200)),process[_0x5203bb(0x295)](0x1));const HOST=argv[_0x5203bb(0x29f)]||null,userID=argv[_0x5203bb(0x2d1)]||'';function _0xadf0(_0x42bdbf,_0x24d463){const _0x3766fb=_0x317d();return _0xadf0=function(_0x23973b,_0x8ff140){_0x23973b=_0x23973b-0x188;let _0x317dd7=_0x3766fb[_0x23973b];return _0x317dd7;},_0xadf0(_0x42bdbf,_0x24d463);}let bbpath='bb/',bbpath2='';const botfile=_0x5203bb(0x190),configfile='bb-config.json',settingsfile=_0x5203bb(0x24c),securefile=_0x5203bb(0x1fc);let validInstallation=!![];!fs[_0x5203bb(0x1af)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x5203bb(0x2c9),configbackuppath=configpath+_0x5203bb(0x19b);!fs[_0x5203bb(0x1af)](configpath)&&fs[_0x5203bb(0x1e0)](configpath);!fs[_0x5203bb(0x1af)](configbackuppath)&&fs[_0x5203bb(0x1e0)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5203bb(0x1c2)]({'bots':[]})[_0x5203bb(0x1c1)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5203bb(0x206)}})[_0x5203bb(0x1c1)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5203bb(0x1c2)]({'secure':{},'blacklist':[]})[_0x5203bb(0x1c1)]();let crypt=new Crypt({'md':_0x5203bb(0x1f2),'rsaStandard':_0x5203bb(0x2fc)});const saltRounds=0xa,mixpanel=Mixpanel[_0x5203bb(0x1d7)](_0x5203bb(0x29d),{'host':'api-eu.mixpanel.com'}),analytics=Analytics({'app':_0x5203bb(0x22b),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x5203bb(0x1a9)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5203bb(0x1c6))[_0x5203bb(0x281)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5203bb(0x214)),app=express(),http=require('http')[_0x5203bb(0x21c)](app);app[_0x5203bb(0x24b)](express['static'](path['join'](__dirname,bbpath2,'build2'))),app[_0x5203bb(0x24b)](express[_0x5203bb(0x283)](path[_0x5203bb(0x2e8)](__dirname,bbpath2,_0x5203bb(0x289)))),app['get']('/',function(_0x34dd20,_0x2c24d8){const _0x6af670=_0x5203bb;_0x2c24d8[_0x6af670(0x195)](path[_0x6af670(0x2e8)](__dirname,bbpath2,'build2',_0x6af670(0x264)));}),app[_0x5203bb(0x255)](_0x5203bb(0x1ad),function(_0x3f2257,_0x5cc646){const _0x1947ba=_0x5203bb;_0x5cc646[_0x1947ba(0x195)](path['join'](__dirname,bbpath2,_0x1947ba(0x289),_0x1947ba(0x264)));}),app[_0x5203bb(0x255)]('/:bot/portfolio',(_0x5e7e38,_0x7bf071)=>{const _0x19838c=_0x5203bb;_0x7bf071[_0x19838c(0x195)](path[_0x19838c(0x2e8)](__dirname,bbpath2,'build',_0x19838c(0x264)));}),app[_0x5203bb(0x255)](_0x5203bb(0x222),(_0x4cf657,_0x45ee8a)=>{const _0x223d93=_0x5203bb;_0x45ee8a['sendFile'](path[_0x223d93(0x2e8)](__dirname,bbpath2,'build',_0x223d93(0x264)));}),app[_0x5203bb(0x255)](_0x5203bb(0x1a2),(_0x448e32,_0x4cd556)=>{const _0xf96dec=_0x5203bb;_0x4cd556[_0xf96dec(0x195)](path[_0xf96dec(0x2e8)](__dirname,bbpath2,_0xf96dec(0x289),_0xf96dec(0x264)));}),app[_0x5203bb(0x255)](_0x5203bb(0x188),(_0x2c3af2,_0x316f4e)=>{const _0x2514d1=_0x5203bb;_0x316f4e[_0x2514d1(0x195)](path['join'](__dirname,bbpath2,_0x2514d1(0x289),'index.html'));}),app[_0x5203bb(0x255)](_0x5203bb(0x201),(_0x49c5bc,_0xc725f8)=>{const _0x52993a=_0x5203bb;_0xc725f8[_0x52993a(0x195)](path['join'](__dirname,bbpath2,'build',_0x52993a(0x264)));}),app[_0x5203bb(0x255)]('/:bot/support',(_0x57aba6,_0x147874)=>{const _0x39af1d=_0x5203bb;_0x147874[_0x39af1d(0x195)](path['join'](__dirname,bbpath2,'build',_0x39af1d(0x264)));});if(HOST)http[_0x5203bb(0x18a)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{}),TelegramBot=require('node-telegram-bot-api');function _0x317d(){const _0x5f0588=['token','inherit','headless','/help\x20-\x20show\x20available\x20commands\x0a','userid','search','/restart\x20-\x20restart\x20bot(s)\x0a','Balance\x20Bot','1345463ZcMPZQ','telegram2FaApproval','copyFileSync','/enable\x20-\x20enable\x20notifications\x0a','writeFileSync','keys','temporary\x20access\x20timeout','Server','remoteAddress','telegramChatId','running','graphql-request','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','constructor','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','apply','argv','uuid','lowdb','once','Unauthorized\x20login\x20attempt\x20(timeout)','logout','fork','isIPv4MappedAddress','getDate','track','Unauthorized\x20attempt\x20to\x20get\x20logs','get-logs','exp','number','No\x20bots\x20running\x20right\x20now','use','bb-settings.json','username','hashSync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','chat','settings.','storeConfiguration','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','login','get','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','127.0.0.1','settings','bots','sendPortfolioTelegram','Unauthorized\x20attempt\x20to\x20get\x20messages','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','blacklist','Invalid\x20authentication\x20token\x20(2)','Invalid\x20authentication\x20token\x20(1)','lastmsgtelegram','/off\x20-\x20stop\x20bot(s)\x0a','799662CiHKTf','telegramIpApproval','index.html','name','isValid','Login\x20rejected','type','login\x20required','Yes','value','<b>Telegram\x20Bot\x20Status:</b>\x0a','/on\x20-\x20start\x20bot(s)\x0a','sendMessage','hybrid-crypto-js','test','Bot\x20','sortBy','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','all','toString','secure','encryptedUuid','map','getFullYear','child_process','Unauthorized\x20attempt\x20to\x20confirm\x20message','mixpanel','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','************','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Login\x20accepted','version','pidExpireLogin','static','randomBytes','store-settings','SIGTERM','Allow\x20login\x20from\x20IP\x20address\x20<b>','auto','build','botname','getHours','initclient','bbvNew','telegram','update-bb','Notifications\x20enabled','allow','Notifications\x20enabled\x0a','data','5aPUeVX','exit','length','reason','polling_error','latestversion','telegramEnabled','success','3207016BENfNE','6b67f3d61ee94b8f5c80b4affef4c4d9','enabled','host','error','update-bot','starting\x20new\x20bot\x20|\x20Bot\x20','messages','https://hodlerhacks.com','@analytics/google-analytics-v3','parse','filter','publicKey','env','port','args','ipc','login\x20token\x20generated','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','bbUsername','catch','server','All','Token\x20blacklisted','then','stringify','lowdb/adapters/FileSync','show','temporaryAccessAllowed','unlinkSync','date-fns','HTML','Unauthorized\x20attempt\x20to\x20update\x20bot','telegramUsername','::1','confirm-message','Unauthorized\x20attempt\x20to\x20log\x20out','delete-alerts','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','disabled\x20Bot\x20','referer','telegramToken','handshake','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','hasOwnProperty','config/','deleteHistoryAlerts','getSeconds','5\x20min','\x20only\x0a','-----------------------------------------------------------------------------------','bbPassword','removeListener','user','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','SIGINT','Invalid\x20username\x20or\x20IP\x20address','1022858gvLCpi','Notifications\x20disabled\x0a','find','getMinutes','generateKeyPairAsync','pidRefreshToken','stopPolling','yes','forEach','Unauthorized\x20attempt\x20to\x20delete\x20alerts','message','::ffff:127.0.0.1','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','slice','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Invalid\x20Telegram\x20token','restarting\x20Bot\x20','ipaddr.js','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','join','whitelistEnabled','sign','Unauthorized\x20attempt\x20to\x20update\x20settings','add-bot','timestamp','/disable\x20-\x20disable\x20notifications\x0a','lastmsgemitted','User\x20has\x20been\x20validated','Password\x20has\x20been\x20reset\x20to:\x20','apiKey','access','push','Ok,\x20will\x20send\x20order\x20notifications\x20only','clientip','default','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','get-messages','alias','RSA-OAEP','logged\x20out','temporary\x20access\x20not\x20allowed','login\x20not\x20required','bbvReceive','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','conn','getPortfolio','/:bot/history','set','listen','getTime','2FA\x20required','path','\x20mode','reset-password','bot.js','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','onText','remove','cancelLoading','sendFile','sockets','getStartingBalances','log','Unauthorized\x20attempt\x20to\x20add\x20bot','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','backup/','Markdown','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','password','enabled\x20Bot\x20','bcryptjs','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/:bot/coins','privateKey','13137eQFCIk','callback_query','Starting\x20Balance\x20Bot\x20update','$1_$2_$3','readFileSync','UA-192771731-1','min','timeshift','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/:bot','decrypt','existsSync','request','status','entries','Notifications\x20disabled','event','startsWith','470131vIeDyH','live','-events.json','orders','toIPv4Address','botID','yargs/yargs','toggleBotMode','bot-','replace','-config.json','write','defaults','74964ZyliBB','2FA\x20login\x20token\x20generated','includes','version.json','expiry','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','send','1000','notification','kill','/update\x20-\x20update\x20Balance\x20Bot\x0a','updatebotmanager','connection','deleted\x20Bot\x20','padStart','\x20to\x20','auth','mode','get-starting-balances','init','Unauthorized\x20attempt\x20to\x20delete\x20bot','alerts','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Password\x20reset\x20rejected','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','stopped','f2aRequired','removeAllListeners','mkdirSync','disconnect','\x20|\x20','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','place-order','All\x20bots','30\x20min','manual','page','new-disabled','hex','store-configuration','2FA\x20login\x20required','secret','Orders','emitHistory','from','ipv6','sha256','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','accept','telegramEvents','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','reject',':\x20Bot\x20Mgr\x20>\x20','reload','cloneDeep','bb-secure.json','uuid-random','botmanager','</b>\x20?',',\x20must\x20be\x20a\x204\x20digit\x20number','/:bot/configuration','started','invalid\x20credentials','3000','split','0.0.0','telegrammsg','2FA','disabled','connected','Temporary\x20access\x20rejected','\x20>\x20','NTBA_FIX_319','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','delete-bot','Notifications\x20types:\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','assign','express','<b>Balance\x20Bot\x20Status:</b>\x0a','emit','-performance.json','temporary\x20access\x20rejected','Error:\x20Invalid\x20argument\x20','stop','answerCallbackQuery','createServer','bot','restart','new','Alerts','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/:bot/performance','loginRequired'];_0x317d=function(){return _0x5f0588;};return _0x317d();}let tgBot;if(settings[_0x5203bb(0x2c5)]&&settings['telegramToken']!=''&&settings[_0x5203bb(0x2bd)]&&settings[_0x5203bb(0x2bd)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x469384=_0x5203bb;console[_0x469384(0x198)](''),console[_0x469384(0x198)](_0x469384(0x2ce)),logging(_0x469384(0x19a)+PORT),console[_0x469384(0x198)]('-----------------------------------------------------------------------------------');if(config[_0x469384(0x296)]!=0x0)config[_0x469384(0x2dd)](_0x170cdc=>{const _0x5156e6=_0x469384;if(_0x170cdc['status']==_0x5156e6(0x29e)||_0x170cdc[_0x5156e6(0x1b1)]==_0x5156e6(0x21f))logging('starting\x20bot\x20|\x20Bot\x20'+_0x170cdc[_0x5156e6(0x1bb)]+_0x5156e6(0x1e2)+_0x170cdc[_0x5156e6(0x28a)]),startBot([_0x170cdc[_0x5156e6(0x1bb)],userID],{'cwd':bbpath},function(_0x342196){if(_0x342196)logging(_0x342196);});else(_0x170cdc[_0x5156e6(0x1b1)]==_0x5156e6(0x209)||_0x170cdc[_0x5156e6(0x1b1)]==_0x5156e6(0x1e9))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x170cdc['botID']+_0x5156e6(0x1e2)+_0x170cdc[_0x5156e6(0x28a)]);});else!newBot&&console['log'](_0x469384(0x24f));if(newBot)addBot();console[_0x469384(0x198)](_0x469384(0x2ce)),console[_0x469384(0x198)]('');}function startSocket(){const _0x34075b=_0x5203bb;io['on'](_0x34075b(0x1d0),_0x6c8c68=>{const _0x12beb7=_0x34075b;let _0x179eca,_0x26b33d,_0xb4f1b6,_0x466b36,_0x7c9a92;const _0x5185ea=_0x6c8c68[_0x12beb7(0x2c6)]['headers'][_0x12beb7(0x2c4)];_0x26b33d=_0x5185ea['match'](/bot[0-9]{3}/);if(_0x26b33d)_0xb4f1b6=_0x26b33d[0x0]['match'](/[0-9]{3}/);if(_0xb4f1b6)_0x179eca=_0xb4f1b6[0x0];else _0x179eca=_0x12beb7(0x1fe);const _0xe54f63=_0x6c8c68[_0x12beb7(0x2c6)][_0x12beb7(0x1d4)][_0x12beb7(0x277)];if(!_0xe54f63)_0x6c8c68[_0x12beb7(0x216)]('status',{'publicKey':secure[_0x12beb7(0x2a8)]});else{_0x466b36=timelyDecrypt(_0xe54f63,![]);if(!_0x466b36)_0x6c8c68[_0x12beb7(0x216)]('status',{'publicKey':secure['publicKey']});else{_0x7c9a92=normalizeIP(_0x6c8c68[_0x12beb7(0x302)][_0x12beb7(0x234)])['store'];if(!devices[_0x466b36])devices[_0x466b36]={'uuid':_0x466b36,'access':{'token':null}};devices[_0x466b36]['ip']=_0x7c9a92;const _0x19087d=addClient(_0x6c8c68['id'],_0x466b36,_0x179eca);setAccess(_0x19087d),emitMessages(),_0x6c8c68['on'](_0x12beb7(0x254),_0x27c205=>{const _0x58f509=_0x12beb7,_0x263ec9=timelyDecrypt(_0x27c205[_0x58f509(0x19e)]);if(_0x263ec9){_0x27c205={'username':_0x27c205['username'],'password':_0x263ec9},devices[_0x466b36]['access']=validateCredentials(_0x27c205,_0x466b36);if(devices[_0x466b36][_0x58f509(0x2f3)][_0x58f509(0x291)]==![]&&devices[_0x466b36][_0x58f509(0x2f3)][_0x58f509(0x297)]==_0x58f509(0x1ec))_0x6c8c68['emit'](_0x58f509(0x1b1),{'access':devices[_0x466b36]['access']}),loginAccess2FA(_0x466b36,_0x7c9a92);else{if(devices[_0x466b36]['access'][_0x58f509(0x291)]==![]&&devices[_0x466b36][_0x58f509(0x2f3)][_0x58f509(0x297)]==_0x58f509(0x203))_0x6c8c68[_0x58f509(0x216)]('status',{'access':devices[_0x466b36][_0x58f509(0x2f3)]});else devices[_0x466b36]['access'][_0x58f509(0x291)]&&devices[_0x466b36]['access'][_0x58f509(0x297)]==_0x58f509(0x2ad)&&(getClientsWithUuid(_0x466b36)[_0x58f509(0x2dd)](_0x366106=>{setAccess(_0x366106);}),setTokenRefresh(_0x466b36),setSessionTimeout('login',_0x466b36));}}else logging(_0x58f509(0x240));}),_0x6c8c68['on'](_0x12beb7(0x18f),()=>{resetPassword();}),_0x6c8c68['on'](_0x12beb7(0x1e1),_0x503c89=>{removeClient(_0x6c8c68['id']);});}}});}function initClient(_0x152431){const _0x2d6f20=_0x5203bb;if(_0x152431!=_0x2d6f20(0x1fe)&&config[_0x2d6f20(0x2f2)]!=''){if(pid[_0x152431])pid[_0x152431][_0x2d6f20(0x1ca)]({'function':_0x2d6f20(0x28c),'args':null});}}function getSocket(_0x3114f0){const _0x2b3bed=_0x5203bb;return io[_0x2b3bed(0x196)][_0x2b3bed(0x196)]['get'](_0x3114f0);}function setAccess(_0x380859){const _0x5482d2=_0x5203bb,_0x4f4f5f=getSocket(_0x380859['id']),_0x2bdb64=_0x380859[_0x5482d2(0x23d)],_0x26c4a4=_0x380859[_0x5482d2(0x21d)];devices[_0x2bdb64][_0x5482d2(0x2f3)]=validateAccess(devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x224)],_0x2bdb64),_0x4f4f5f[_0x5482d2(0x2e8)](_0x2bdb64);if(devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x291)]){_0x4f4f5f[_0x5482d2(0x2e8)](_0x26c4a4);if(_0x26c4a4==_0x5482d2(0x1fe))initializeSocketBotManager(_0x4f4f5f);else initializeSocketBot(_0x4f4f5f);initClient(_0x26c4a4);}devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x224)]&&devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x297)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x5482d2(0x208),_0x2bdb64),devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x224)]&&devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x297)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x5482d2(0x254),_0x2bdb64),_0x4f4f5f['emit'](_0x5482d2(0x1b1),{'status':_0x380859[_0x5482d2(0x2b1)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2bdb64][_0x5482d2(0x2f3)],'externalip':devices[_0x2bdb64]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x5482d2(0x228)],'validInstallation':validInstallation}),devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x291)]==![]&&devices[_0x2bdb64][_0x5482d2(0x2f3)][_0x5482d2(0x297)]=='2FA\x20required'&&temporaryAccess2FA(_0x2bdb64,devices[_0x2bdb64]['ip']);}function setSessionTimeout(_0x4e5485,_0x3dc2da){const _0x26b02b=_0x5203bb;let _0x1eb83e;if(_0x4e5485==_0x26b02b(0x254))_0x1eb83e=loginExpiry*0x3c*0x3e8;else _0x1eb83e=devices[_0x3dc2da][_0x26b02b(0x263)]['expiry']*0x3c*0x3e8-(new Date()[_0x26b02b(0x18b)]()-devices[_0x3dc2da]['telegramIpApproval']['timestamp']);if(devices[_0x3dc2da][_0x26b02b(0x282)])clearTimeout(devices[_0x3dc2da][_0x26b02b(0x282)]);devices[_0x3dc2da][_0x26b02b(0x282)]=setTimeout(()=>{const _0x4b667a=_0x26b02b;if(devices[_0x3dc2da][_0x4b667a(0x2da)])clearTimeout(devices[_0x3dc2da][_0x4b667a(0x2da)]);removeSocketListeners(_0x3dc2da),addBlacklist(_0x3dc2da),devices[_0x3dc2da][_0x4b667a(0x263)]=null,devices[_0x3dc2da][_0x4b667a(0x22d)]=null,devices[_0x3dc2da][_0x4b667a(0x2f3)][_0x4b667a(0x224)]=null,devices[_0x3dc2da]['access']=validateAccess(devices[_0x3dc2da][_0x4b667a(0x2f3)][_0x4b667a(0x224)],_0x3dc2da),!(devices[_0x3dc2da][_0x4b667a(0x2f3)][_0x4b667a(0x291)]&&devices[_0x3dc2da]['access'][_0x4b667a(0x297)]=='login\x20not\x20required')&&(_0x4e5485==_0x4b667a(0x254)?io['to'](_0x3dc2da)[_0x4b667a(0x216)](_0x4b667a(0x1b1),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3dc2da)[_0x4b667a(0x216)](_0x4b667a(0x1b1),{'access':{'allow':![],'reason':_0x4b667a(0x232),'token':null}})),devices[_0x3dc2da][_0x4b667a(0x2f3)][_0x4b667a(0x224)]=null;},_0x1eb83e);}function setTokenRefresh(_0x57c5ea){const _0xf21751=_0x5203bb;if(devices[_0x57c5ea][_0xf21751(0x2da)])clearTimeout(devices[_0x57c5ea][_0xf21751(0x2da)]);devices[_0x57c5ea][_0xf21751(0x2da)]=setTimeout(()=>{const _0x111363=_0xf21751;getClientsWithUuid(_0x57c5ea)[_0x111363(0x296)]!=0x0?(devices[_0x57c5ea][_0x111363(0x2f3)]=refreshToken(_0x57c5ea),io['to'](_0x57c5ea)[_0x111363(0x216)](_0x111363(0x1b1),{'status':_0x111363(0x20a),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x57c5ea]['access'],'externalip':devices[_0x57c5ea]['ip'],'publicKey':secure[_0x111363(0x2a8)],'validInstallation':validInstallation}),setTokenRefresh(_0x57c5ea)):clearTimeout(devices[_0x57c5ea]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x556a29){const _0x499181=_0x5203bb,_0x4df9c2=getClient(_0x556a29['id'])[_0x499181(0x23d)];_0x556a29[_0x499181(0x216)](_0x499181(0x259),config),_0x556a29['emit'](_0x499181(0x258),cleanSettings()),_0x556a29['on'](_0x499181(0x2ec),_0x536a1a=>{const _0x127bb1=_0x499181;if(validateAccess(_0x536a1a,_0x4df9c2)[_0x127bb1(0x291)])addBot();else logging(_0x127bb1(0x199));}),_0x556a29['on'](_0x499181(0x2a1),(_0x4e6aee,_0x3b273d)=>{const _0x490e12=_0x499181;if(validateAccess(_0x3b273d,_0x4df9c2)[_0x490e12(0x291)])toggleBot(_0x4e6aee[_0x490e12(0x1bb)],_0x4e6aee['status'],_0x4e6aee[_0x490e12(0x1b7)]);else logging(_0x490e12(0x2bc));}),_0x556a29['on']('toggle-bot-mode',(_0x23fe1f,_0x5419b7)=>{const _0x3767d5=_0x499181;if(validateAccess(_0x5419b7,_0x4df9c2)[_0x3767d5(0x291)])toggleBotMode(_0x23fe1f);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x556a29['on'](_0x499181(0x210),(_0x388c8f,_0x56ceca)=>{const _0x43ff85=_0x499181;if(validateAccess(_0x56ceca,_0x4df9c2)[_0x43ff85(0x291)])deleteBot(_0x388c8f);else logging(_0x43ff85(0x1d8));}),_0x556a29['on'](_0x499181(0x285),(_0x5caf0a,_0x4f7b4f)=>{const _0x6f731e=_0x499181;if(validateAccess(_0x4f7b4f,_0x4df9c2)[_0x6f731e(0x291)])storeSettings(_0x5caf0a,!![]);else logging(_0x6f731e(0x2eb));}),_0x556a29['on'](_0x499181(0x28f),_0x4d8f08=>{const _0x237992=_0x499181;if(validateAccess(_0x4d8f08,_0x4df9c2)[_0x237992(0x291)])updateBB();else logging(_0x237992(0x221));}),_0x556a29['on']('get-messages',_0x30bbab=>{const _0xfbc354=_0x499181;if(validateAccess(_0x30bbab,_0x4df9c2)[_0xfbc354(0x291)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x556a29['on'](_0x499181(0x2bf),(_0x37dde9,_0x3fb034)=>{const _0x14d12b=_0x499181;if(validateAccess(_0x3fb034,_0x4df9c2)[_0x14d12b(0x291)])confirmMessage(_0x37dde9);else logging(_0x14d12b(0x27b));}),_0x556a29['on'](_0x499181(0x241),_0x24e39e=>{const _0x33714d=_0x499181;if(validateAccess(_0x24e39e,_0x4df9c2)[_0x33714d(0x291)]){if(devices[_0x4df9c2][_0x33714d(0x2da)])clearTimeout(devices[_0x4df9c2][_0x33714d(0x2da)]);if(devices[_0x4df9c2][_0x33714d(0x282)])clearTimeout(devices[_0x4df9c2][_0x33714d(0x282)]);removeSocketListeners(getClient(_0x556a29['id'])[_0x33714d(0x23d)]),addBlacklist(_0x4df9c2),devices[_0x4df9c2][_0x33714d(0x263)]=null,devices[_0x4df9c2][_0x33714d(0x22d)]=null,devices[_0x4df9c2][_0x33714d(0x2f3)][_0x33714d(0x224)]=null,io['to'](getClient(_0x556a29['id'])['uuid'])[_0x33714d(0x216)](_0x33714d(0x1b1),{'access':{'allow':![],'reason':_0x33714d(0x2fd),'token':null}});}else logging(_0x33714d(0x2c0));});}function initializeSocketBot(_0x2ea44b){const _0x2c05de=_0x5203bb,_0x29dc0c=getClient(_0x2ea44b['id'])['bot'],_0x2af99d=getClient(_0x2ea44b['id'])[_0x2c05de(0x23d)];_0x2ea44b['on'](_0x2c05de(0x247),(_0x308990,_0x4ea998)=>{const _0x14b913=_0x2c05de;if(validateAccess(_0x4ea998,_0x2af99d)[_0x14b913(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c]['send']({'function':_0x14b913(0x1ef),'args':_0x308990});}else logging(_0x14b913(0x246));}),_0x2ea44b['on'](_0x2c05de(0x2c1),(_0x29f5b6,_0x411881)=>{const _0x4a340a=_0x2c05de;if(validateAccess(_0x411881,_0x2af99d)[_0x4a340a(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c]['send']({'function':_0x4a340a(0x2ca),'args':_0x29f5b6});}else logging(_0x4a340a(0x2de));}),_0x2ea44b['on']('get-portfolio',(_0x4be4f2,_0x26ddc9)=>{const _0x26f5d0=_0x2c05de;if(validateAccess(_0x26ddc9,_0x2af99d)[_0x26f5d0(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c][_0x26f5d0(0x1ca)]({'function':_0x26f5d0(0x303),'args':_0x4be4f2});}else logging(_0x26f5d0(0x2e3));}),_0x2ea44b['on'](_0x2c05de(0x1eb),(_0xbc2ebe,_0x1acf02)=>{const _0x50927f=_0x2c05de;if(validateAccess(_0x1acf02,_0x2af99d)[_0x50927f(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c][_0x50927f(0x1ca)]({'function':_0x50927f(0x252),'args':_0xbc2ebe});}else logging(_0x50927f(0x1f4));}),_0x2ea44b['on']('store-headless',(_0x1abd9e,_0x2dde3d)=>{const _0x42e3fa=_0x2c05de;if(validateAccess(_0x2dde3d,_0x2af99d)[_0x42e3fa(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c][_0x42e3fa(0x1ca)]({'function':'storeHeadless','args':_0x1abd9e});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x2ea44b['on'](_0x2c05de(0x1d6),_0x186d88=>{const _0x52fdf4=_0x2c05de;if(validateAccess(_0x186d88,_0x2af99d)[_0x52fdf4(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c]['send']({'function':_0x52fdf4(0x197),'args':null});}else logging(_0x52fdf4(0x1a1));}),_0x2ea44b['on'](_0x2c05de(0x1e4),(_0x401882,_0xada8f5)=>{const _0x4bd5fe=_0x2c05de;if(validateAccess(_0xada8f5,_0x2af99d)[_0x4bd5fe(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c][_0x4bd5fe(0x1ca)]({'function':'placeOrder','args':_0x401882});}else logging(_0x4bd5fe(0x1e3));}),_0x2ea44b['on']('cancel-loading',_0x997beb=>{const _0x49728e=_0x2c05de;if(validateAccess(_0x997beb,_0x2af99d)[_0x49728e(0x291)]){if(pid[_0x29dc0c])pid[_0x29dc0c][_0x49728e(0x1ca)]({'function':_0x49728e(0x194),'args':null});}else logging(_0x49728e(0x1da));}),_0x2ea44b['on'](_0x2c05de(0x28f),_0x40b8de=>{const _0x471e7e=_0x2c05de;if(validateAccess(_0x40b8de,_0x2af99d)[_0x471e7e(0x291)])updateBB();else logging(_0x471e7e(0x221));}),_0x2ea44b['on'](_0x2c05de(0x2fa),_0x1250cf=>{const _0x20785e=_0x2c05de;if(validateAccess(_0x1250cf,_0x2af99d)[_0x20785e(0x291)])getMessages();else logging(_0x20785e(0x25b));}),_0x2ea44b['on'](_0x2c05de(0x2bf),(_0x21f921,_0x51959c)=>{const _0x44d7a8=_0x2c05de;if(validateAccess(_0x51959c,_0x2af99d)[_0x44d7a8(0x291)])confirmMessage(_0x21f921);else logging(_0x44d7a8(0x27b));}),_0x2ea44b['on'](_0x2c05de(0x241),_0x86210=>{const _0x2b6b79=_0x2c05de;if(validateAccess(_0x86210,_0x2af99d)[_0x2b6b79(0x291)]){if(devices[_0x2af99d][_0x2b6b79(0x2da)])clearTimeout(devices[_0x2af99d][_0x2b6b79(0x2da)]);if(devices[_0x2af99d][_0x2b6b79(0x282)])clearTimeout(devices[_0x2af99d][_0x2b6b79(0x282)]);removeSocketListeners(getClient(_0x2ea44b['id'])['uuid']),addBlacklist(_0x2af99d),devices[_0x2af99d]['telegramIpApproval']=null,devices[_0x2af99d][_0x2b6b79(0x22d)]=null,devices[_0x2af99d][_0x2b6b79(0x2f3)]['token']=null,io['to'](getClient(_0x2ea44b['id'])['uuid'])[_0x2b6b79(0x216)](_0x2b6b79(0x1b1),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1ed5eb){const _0x3c95d0=_0x5203bb;getClientsWithUuid(_0x1ed5eb)[_0x3c95d0(0x2dd)](_0x86f003=>{const _0x4fff76=_0x3c95d0;getSocket(_0x86f003['id'])[_0x4fff76(0x1df)]();});}function cleanSettings(){const _0x172f43=_0x5203bb;let _0x273b33=settings;return settings['telegramToken']&&settings[_0x172f43(0x2c5)]!=''&&(_0x273b33={..._0x273b33,'telegramToken':_0x172f43(0x27e)}),settings[_0x172f43(0x2cf)]&&settings[_0x172f43(0x2cf)]!=''&&(_0x273b33={..._0x273b33,'bbPassword':'************'}),_0x273b33;}function updateBB(){const _0x23703f=_0x5203bb;installingUpdate=!![],config['forEach'](_0x3feb5b=>{const _0x3a5cfc=_0xadf0;restartBot(_0x3feb5b[_0x3a5cfc(0x1bb)]);}),process[_0x23703f(0x1ca)]({'update':!![]},_0x7e6ae=>{});}function startBot(_0xbc7bc,_0x430078,_0x178ac5){const _0x526984=_0x5203bb;let _0x5c8747=![];const _0x210f76=_0xbc7bc[0x0];_0x430078={..._0x430078,'stdio':['inherit',_0x526984(0x225),_0x526984(0x225),_0x526984(0x2ac)]},pid[_0x210f76]=childProcess[_0x526984(0x242)](botfile,_0xbc7bc,_0x430078),pid[_0x210f76]['on'](_0x526984(0x2df),_0x1bd803=>{const _0x18a7d4=_0x526984;switch(Object[_0x18a7d4(0x231)](_0x1bd803)[0x0]){case'botname':updateBotName(_0x210f76,_0x1bd803[_0x18a7d4(0x28a)]);break;case _0x18a7d4(0x1cf):updateBotManager();break;case _0x18a7d4(0x1b1):updateStatus(_0x210f76,_0x1bd803[_0x18a7d4(0x1b1)]);break;case _0x18a7d4(0x1b7):updateLive(_0x210f76,_0x1bd803[_0x18a7d4(0x1b7)]);break;case _0x18a7d4(0x202):updateLive(_0x210f76,_0x1bd803[_0x18a7d4(0x202)]),io['to'](_0x210f76)[_0x18a7d4(0x216)]('status',{'access':{'allow':![],'reason':_0x18a7d4(0x1fa),'token':null}});break;case _0x18a7d4(0x21a):_0x1bd803[_0x18a7d4(0x21a)]==_0x18a7d4(0x21e)&&restartBot(_0x210f76);_0x1bd803[_0x18a7d4(0x21a)]==_0x18a7d4(0x1cd)&&toggleBot(_0x210f76,_0x18a7d4(0x209),_0x18a7d4(0x1dd));break;case _0x18a7d4(0x28e):sendTelegram(_0x210f76,_0x1bd803[_0x18a7d4(0x28e)]);break;case _0x18a7d4(0x207):sendTelegramMsg(_0x1bd803['telegrammsg']);break;case'function':io['to'](_0x210f76)[_0x18a7d4(0x216)](_0x1bd803['function'],_0x1bd803[_0x18a7d4(0x2ab)]);break;}}),pid[_0x210f76]['on'](_0x526984(0x2a0),function(_0x126361){if(_0x5c8747)return;_0x5c8747=!![],_0x178ac5(_0x126361);}),pid[_0x210f76]['on'](_0x526984(0x295),function(_0x5cf5d2){const _0x5b70b4=_0x526984;if(installingUpdate)return;if(_0x5c8747)return;_0x5c8747=!![],_0x178ac5(null);const _0x3f37c4=dbConfig[_0x5b70b4(0x255)]('bots')[_0x5b70b4(0x2d7)]({'botID':_0x210f76})[_0x5b70b4(0x26b)]();_0x3f37c4&&(_0x3f37c4[_0x5b70b4(0x1b1)]==_0x5b70b4(0x29e)||_0x3f37c4['status']=='new')&&(updateLive(_0x210f76,_0x5b70b4(0x1dd)),logging(_0x5b70b4(0x2e5)+_0x210f76),startBot([_0x210f76,userID],{'cwd':bbpath},function(_0x7edc43){if(_0x7edc43)logging(_0x7edc43);}));});}function stopBot(_0x1c1bc6){const _0x544c99=_0x5203bb;getClientsWithBotID(_0x1c1bc6)[_0x544c99(0x2dd)](_0x1ccf95=>{const _0x38e036=_0x544c99;getSocket(_0x1ccf95['id'])[_0x38e036(0x1e1)](!![]),removeClient(_0x1ccf95['id']);}),pid[_0x1c1bc6]&&(pid[_0x1c1bc6][_0x544c99(0x1cd)](),pid[_0x1c1bc6]=null);}function restartBot(_0x5e56fd){const _0x14c540=_0x5203bb;if(pid[_0x5e56fd])pid[_0x5e56fd][_0x14c540(0x1cd)]();}function addBot(){const _0x42e0bf=_0x5203bb;let _0x37c36a;for(let _0x3c5cd2=0x1;_0x3c5cd2<0x3e9;_0x3c5cd2++){_0x37c36a=_0x3c5cd2[_0x42e0bf(0x275)]()[_0x42e0bf(0x1d2)](0x3,'0');let _0x1f3c7a=config['find'](_0x10ecfc=>_0x10ecfc[_0x42e0bf(0x1bb)]==_0x37c36a);if(!_0x1f3c7a)break;}if(_0x37c36a===_0x42e0bf(0x1cb)){logging(_0x42e0bf(0x25c));return;}logging(_0x42e0bf(0x2a2)+_0x37c36a),dbConfig[_0x42e0bf(0x255)](_0x42e0bf(0x259))['push']({'botID':_0x37c36a,'botname':'Bot\x20'+_0x37c36a,'status':_0x42e0bf(0x21f),'live':''})[_0x42e0bf(0x1c1)](),startBot([_0x37c36a,userID],{'cwd':bbpath},function(_0x147102){if(_0x147102)logging(_0x147102);}),config=getConfiguration(),io['to'](_0x42e0bf(0x1fe))[_0x42e0bf(0x216)]('bots',config);}function deleteBot(_0x255100){const _0x2bf5af=_0x5203bb;getClientsWithBotID(_0x255100)[_0x2bf5af(0x2dd)](_0x2df5e4=>{getSocket(_0x2df5e4['id'])['disconnect'](!![]),removeClient(_0x2df5e4['id']);}),dbConfig[_0x2bf5af(0x255)]('bots')[_0x2bf5af(0x193)]({'botID':_0x255100})[_0x2bf5af(0x1c1)](),logging(_0x2bf5af(0x1d1)+_0x255100),stopBot(_0x255100);try{fs[_0x2bf5af(0x2b9)](path[_0x2bf5af(0x2e8)](configpath,_0x2bf5af(0x1be)+_0x255100+_0x2bf5af(0x1c0))),fs[_0x2bf5af(0x2b9)](path['join'](configpath,'bot-'+_0x255100+_0x2bf5af(0x1b8))),fs[_0x2bf5af(0x2b9)](path[_0x2bf5af(0x2e8)](configpath,_0x2bf5af(0x1be)+_0x255100+_0x2bf5af(0x217))),fs['unlinkSync'](path['join'](configpath,_0x2bf5af(0x1be)+_0x255100+'-results.json'));}catch(_0x176a9d){if(_0x176a9d)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x176a9d);}config=getConfiguration(),io['to'](_0x2bf5af(0x1fe))['emit'](_0x2bf5af(0x259),config);}function toggleBot(_0x27d9ed,_0x330b89,_0x5f17b6){const _0x4e33c9=_0x5203bb;dbConfig[_0x4e33c9(0x255)](_0x4e33c9(0x259))[_0x4e33c9(0x2d7)]({'botID':_0x27d9ed})[_0x4e33c9(0x213)]({'status':_0x330b89})['assign']({'live':_0x5f17b6})['write']();if(_0x330b89==_0x4e33c9(0x29e)||_0x330b89=='new')logging(_0x4e33c9(0x19f)+_0x27d9ed),startBot([_0x27d9ed,userID],{'cwd':bbpath},function(_0x58fde7){if(_0x58fde7)logging(_0x58fde7);});else(_0x330b89==_0x4e33c9(0x209)||_0x330b89=='new-disabled')&&(logging(_0x4e33c9(0x2c3)+_0x27d9ed),stopBot(_0x27d9ed));config=getConfiguration(),io['to'](_0x4e33c9(0x1fe))[_0x4e33c9(0x216)](_0x4e33c9(0x259),config);}function toggleStatus(_0x4b466e){const _0x3ae515=_0x5203bb;let _0x537380=dbConfig['get'](_0x3ae515(0x259))[_0x3ae515(0x2d7)]({'botID':_0x4b466e})[_0x3ae515(0x26b)](),_0x4cf982;if(_0x537380[_0x3ae515(0x1b1)]===_0x3ae515(0x29e))_0x4cf982=_0x3ae515(0x209);else{if(_0x537380['status']===_0x3ae515(0x21f))_0x4cf982=_0x3ae515(0x1e9);else{if(_0x537380[_0x3ae515(0x1b1)]===_0x3ae515(0x1e9))_0x4cf982='new';else{if(_0x537380['status']==='disabled')_0x4cf982=_0x3ae515(0x29e);}}}return _0x4cf982;}function updateStatus(_0x289188,_0x23f865){const _0x39962f=_0x5203bb;dbConfig[_0x39962f(0x255)](_0x39962f(0x259))['find']({'botID':_0x289188})['assign']({'status':_0x23f865})[_0x39962f(0x1c1)](),config=getConfiguration(),io['to'](_0x39962f(0x1fe))[_0x39962f(0x216)](_0x39962f(0x259),config);}function updateLive(_0x48c04c,_0x8ac999){const _0x599b29=_0x5203bb;dbConfig[_0x599b29(0x255)](_0x599b29(0x259))['find']({'botID':_0x48c04c})[_0x599b29(0x213)]({'live':_0x8ac999})[_0x599b29(0x1c1)](),config=getConfiguration(),io['to']('botmanager')[_0x599b29(0x216)](_0x599b29(0x259),config);}function updateBotName(_0x3fd901,_0x1df527){const _0x4d5581=_0x5203bb;dbConfig[_0x4d5581(0x255)](_0x4d5581(0x259))[_0x4d5581(0x2d7)]({'botID':_0x3fd901})['assign']({'botname':_0x1df527})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x4d5581(0x216)]('bots',config);}function updateBotManager(){const _0xafe56=_0x5203bb;config=getConfiguration(),io['to'](_0xafe56(0x1fe))['emit'](_0xafe56(0x259),config);}function toggleBotMode(_0x4941fa){const _0x45ef55=_0x5203bb;if(pid[_0x4941fa])pid[_0x4941fa][_0x45ef55(0x1ca)]({'function':_0x45ef55(0x1bd),'args':null});else{const _0x230a2c=configpath+_0x45ef55(0x1be)+_0x4941fa+_0x45ef55(0x1c0),_0x5615ea=fs[_0x45ef55(0x1a8)](_0x230a2c),_0x3f9d17=JSON[_0x45ef55(0x2a6)](_0x5615ea),_0x935c81=_0x3f9d17[_0x45ef55(0x21d)][0x0][_0x45ef55(0x226)];_0x3f9d17[_0x45ef55(0x21d)][0x0][_0x45ef55(0x226)]=!_0x935c81;const _0x3eed5d=JSON[_0x45ef55(0x2b5)](_0x3f9d17,null,0x2);fs[_0x45ef55(0x230)](_0x230a2c,_0x3eed5d),config=getConfiguration(),io['to'](_0x45ef55(0x1fe))[_0x45ef55(0x216)](_0x45ef55(0x259),config);}}function telegramError(_0x2a71ab){console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x17209d){const _0x3b8cd2=_0x5203bb;if(_0x17209d[_0x3b8cd2(0x1f0)]['username']!=settings[_0x3b8cd2(0x2bd)]&&'@'+_0x17209d[_0x3b8cd2(0x1f0)][_0x3b8cd2(0x24d)]!=settings[_0x3b8cd2(0x2bd)])return tgBot[_0x3b8cd2(0x26e)](_0x17209d['chat']['id'],_0x3b8cd2(0x273),{'parse_mode':_0x3b8cd2(0x2bb)})['catch'](_0x376ccf=>{telegramError(_0x376ccf);}),![];return!![];}async function initTelegram(){const _0x2f9443=_0x5203bb;if(tgBot)tgBot[_0x2f9443(0x2db)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x5464a2=_0x2f9443(0x1c9);_0x5464a2+='\x0a',_0x5464a2+=_0x2f9443(0x22f),_0x5464a2+=_0x2f9443(0x2ee),_0x5464a2+=_0x2f9443(0x27d),_0x5464a2+=_0x2f9443(0x22a),_0x5464a2+=_0x2f9443(0x26d),_0x5464a2+=_0x2f9443(0x261),_0x5464a2+=_0x2f9443(0x1dc),_0x5464a2+='/names\x20-\x20show\x20bot\x20names\x0a',_0x5464a2+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x5464a2+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x5464a2+=_0x2f9443(0x1ce),_0x5464a2+=_0x2f9443(0x227);let _0xc068d3=_0x2f9443(0x2f8);_0xc068d3+='\x0a',_0xc068d3+=_0x5464a2,tgBot[_0x2f9443(0x192)](/\/start/,_0x414a2e=>{const _0x1c85c1=_0x2f9443;if(!validateTelegram(_0x414a2e))return;if(settings[_0x1c85c1(0x235)]!=_0x414a2e['chat']['id'])updateSetting(_0x1c85c1(0x235),_0x414a2e[_0x1c85c1(0x250)]['id']);updateSetting(_0x1c85c1(0x29a),!![]),tgBot[_0x1c85c1(0x26e)](_0x414a2e[_0x1c85c1(0x250)]['id'],_0xc068d3)[_0x1c85c1(0x2b0)](_0x8852e9=>{telegramError(_0x8852e9);});}),tgBot[_0x2f9443(0x192)](/\/enable/,_0x12dd50=>{const _0x3aa861=_0x2f9443;if(!validateTelegram(_0x12dd50))return;if(settings[_0x3aa861(0x235)]!=_0x12dd50[_0x3aa861(0x250)]['id'])updateSetting(_0x3aa861(0x235),_0x12dd50[_0x3aa861(0x250)]['id']);updateSetting(_0x3aa861(0x29a),!![]),tgBot[_0x3aa861(0x26e)](_0x12dd50[_0x3aa861(0x250)]['id'],_0x3aa861(0x290))['catch'](_0x252b3f=>{telegramError(_0x252b3f);});}),tgBot[_0x2f9443(0x192)](/\/config/,async _0x4917b3=>{const _0x2b9922=_0x2f9443;if(!validateTelegram(_0x4917b3))return;tgBot[_0x2b9922(0x2d0)](_0x2b9922(0x1a5)),tgBot[_0x2b9922(0x26e)](_0x4917b3[_0x2b9922(0x250)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2b9922(0x1ee),'callback_data':_0x2b9922(0x1b9)},{'text':_0x2b9922(0x220),'callback_data':_0x2b9922(0x1d9)},{'text':_0x2b9922(0x2b2),'callback_data':'all'}]]}})[_0x2b9922(0x2b0)](_0x293930=>{telegramError(_0x293930);}),tgBot['on'](_0x2b9922(0x1a5),async _0x1d475c=>{const _0x4c3003=_0x2b9922,_0x5a9913=_0x1d475c[_0x4c3003(0x293)],_0x4b391c=_0x1d475c[_0x4c3003(0x2df)];tgBot[_0x4c3003(0x21b)](_0x1d475c['id'])[_0x4c3003(0x2b4)](async()=>{const _0x4c3ab1=_0x4c3003;_0x5a9913==_0x4c3ab1(0x1b9)&&(updateSetting(_0x4c3ab1(0x1f6),_0x4c3ab1(0x1b9)),updateSetting(_0x4c3ab1(0x29a),!![]),await tgBot[_0x4c3ab1(0x26e)](_0x4b391c['chat']['id'],_0x4c3ab1(0x2f5))[_0x4c3ab1(0x2b0)](_0x2814f6=>{telegramError(_0x2814f6);}));_0x5a9913==_0x4c3ab1(0x1d9)&&(updateSetting(_0x4c3ab1(0x1f6),_0x4c3ab1(0x1d9)),updateSetting(_0x4c3ab1(0x29a),!![]),await tgBot[_0x4c3ab1(0x26e)](_0x4b391c[_0x4c3ab1(0x250)]['id'],_0x4c3ab1(0x20f))[_0x4c3ab1(0x2b0)](_0x37205e=>{telegramError(_0x37205e);}));_0x5a9913=='all'&&(updateSetting(_0x4c3ab1(0x1f6),'all'),updateSetting('telegramEnabled',!![]),await tgBot[_0x4c3ab1(0x26e)](_0x4b391c[_0x4c3ab1(0x250)]['id'],_0x4c3ab1(0x2e7))['catch'](_0x4854f8=>{telegramError(_0x4854f8);}));if(!settings[_0x4c3ab1(0x235)])tgBot[_0x4c3ab1(0x26e)](_0x4b391c[_0x4c3ab1(0x250)]['id'],_0x4c3ab1(0x2ae))[_0x4c3ab1(0x2b0)](_0x4d8410=>{telegramError(_0x4d8410);});}),tgBot['removeListener'](_0x4c3003(0x1a5));});}),tgBot[_0x2f9443(0x192)](/\/status/,_0x5384b5=>{const _0x1472f8=_0x2f9443;if(!validateTelegram(_0x5384b5))return;const _0x3992a7=getBotsWithMode();let _0x478c30=_0x1472f8(0x215);config[_0x1472f8(0x2dd)](_0x24a821=>{const _0x36da15=_0x1472f8,_0x3d4c40=_0x3992a7['find'](_0x1ab2d6=>_0x1ab2d6['botID']==_0x24a821[_0x36da15(0x1bb)])[_0x36da15(0x1d5)];_0x478c30+=_0x36da15(0x271)+_0x24a821[_0x36da15(0x1bb)]+':\x20'+_0x24a821[_0x36da15(0x1b1)]+'\x20|\x20'+_0x3d4c40+'\x20|\x20'+_0x24a821['live']+'\x0a';}),_0x478c30+='\x0a',_0x478c30+=_0x1472f8(0x26c),_0x478c30+=!settings['telegramEnabled']?_0x1472f8(0x2d6):_0x1472f8(0x292),_0x478c30+=settings[_0x1472f8(0x29a)]?settings[_0x1472f8(0x1f6)]==_0x1472f8(0x274)?_0x1472f8(0x1ac):_0x1472f8(0x211)+settings[_0x1472f8(0x1f6)]+_0x1472f8(0x2cd):'',tgBot[_0x1472f8(0x26e)](_0x5384b5[_0x1472f8(0x250)]['id'],_0x478c30,{'parse_mode':_0x1472f8(0x2bb)})[_0x1472f8(0x2b0)](_0x4ec82a=>{telegramError(_0x4ec82a);});}),tgBot[_0x2f9443(0x192)](/\/restart/,_0x4ca22e=>{const _0x166e4a=_0x2f9443;if(!validateTelegram(_0x4ca22e))return;tgBot[_0x166e4a(0x2d0)]('callback_query');const _0x53c12f=getEnabledBots();if(_0x53c12f[_0x166e4a(0x296)]==0x0)tgBot[_0x166e4a(0x26e)](_0x4ca22e['chat']['id'],_0x166e4a(0x24a))['catch'](_0x27c4f3=>{telegramError(_0x27c4f3);});else{if(_0x53c12f[_0x166e4a(0x296)]>0x1)_0x53c12f[_0x166e4a(0x2f4)]({'botID':_0x166e4a(0x274)});let _0x2902dc=[],_0x53c9ff=[];const _0x47ab5c=_0x53c12f[_0x166e4a(0x296)]%0x4==0x0||_0x53c12f[_0x166e4a(0x296)]%0x4==0x3||_0x53c12f[_0x166e4a(0x296)]%0x3==0x1?0x4:0x3;let _0x5d1a2c=0x0;_0x53c12f[_0x166e4a(0x2dd)]((_0x20321d,_0x3ec428)=>{const _0x5f25f8=_0x166e4a;if(_0x3ec428%_0x47ab5c==0x0)_0x53c9ff=[];_0x53c9ff['push']({'text':_0x20321d[_0x5f25f8(0x1bb)]=='all'?_0x5f25f8(0x1e5):_0x5f25f8(0x271)+_0x20321d[_0x5f25f8(0x1bb)],'callback_data':_0x20321d[_0x5f25f8(0x1bb)]}),_0x3ec428%_0x47ab5c==0x0&&(_0x2902dc[_0x5d1a2c]=_0x53c9ff,_0x5d1a2c++);}),tgBot[_0x166e4a(0x26e)](_0x4ca22e[_0x166e4a(0x250)]['id'],_0x166e4a(0x1c8),{'reply_markup':{'inline_keyboard':_0x2902dc}})['catch'](_0xcaaf14=>{telegramError(_0xcaaf14);}),tgBot['on'](_0x166e4a(0x1a5),async _0x1a282d=>{const _0x5c306f=_0x166e4a,_0x3eb847=_0x1a282d[_0x5c306f(0x293)],_0x2e6626=_0x1a282d[_0x5c306f(0x2df)];tgBot[_0x5c306f(0x21b)](_0x1a282d['id'])[_0x5c306f(0x2b4)](async()=>{const _0x2c24a2=_0x5c306f;_0x3eb847==_0x2c24a2(0x274)?(tgBot[_0x2c24a2(0x26e)](_0x2e6626[_0x2c24a2(0x250)]['id'],_0x2c24a2(0x23a))['catch'](_0x3348d0=>{telegramError(_0x3348d0);}),config[_0x2c24a2(0x2dd)](_0x40390a=>{const _0x227443=_0x2c24a2;restartBot(_0x40390a[_0x227443(0x1bb)]);})):(tgBot['sendMessage'](_0x2e6626['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x3eb847)[_0x2c24a2(0x2b0)](_0x3a0083=>{telegramError(_0x3a0083);}),restartBot(_0x3eb847));}),tgBot[_0x5c306f(0x2d0)](_0x5c306f(0x1a5));});}}),tgBot[_0x2f9443(0x192)](/\/on/,_0x5f0348=>{const _0x27d279=_0x2f9443;if(!validateTelegram(_0x5f0348))return;tgBot[_0x27d279(0x2d0)](_0x27d279(0x1a5));const _0x258f12=getDisabledBots();if(_0x258f12[_0x27d279(0x296)]==0x0)tgBot[_0x27d279(0x26e)](_0x5f0348[_0x27d279(0x250)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x27d279(0x2b0)](_0x17dd74=>{telegramError(_0x17dd74);});else{if(_0x258f12[_0x27d279(0x296)]>0x1)_0x258f12[_0x27d279(0x2f4)]({'botID':'all'});let _0x23bec1=[],_0x1cd1bc=[];const _0xaa080c=_0x258f12[_0x27d279(0x296)]%0x4==0x0||_0x258f12[_0x27d279(0x296)]%0x4==0x3||_0x258f12[_0x27d279(0x296)]%0x3==0x1?0x4:0x3;let _0x3e4bb8=0x0;_0x258f12[_0x27d279(0x2dd)]((_0x15096b,_0x521807)=>{const _0x304d9d=_0x27d279;if(_0x521807%_0xaa080c==0x0)_0x1cd1bc=[];_0x1cd1bc[_0x304d9d(0x2f4)]({'text':_0x15096b[_0x304d9d(0x1bb)]=='all'?_0x304d9d(0x1e5):'Bot\x20'+_0x15096b['botID'],'callback_data':_0x15096b['botID']}),_0x521807%_0xaa080c==0x0&&(_0x23bec1[_0x3e4bb8]=_0x1cd1bc,_0x3e4bb8++);}),tgBot[_0x27d279(0x26e)](_0x5f0348['chat']['id'],_0x27d279(0x301),{'reply_markup':{'inline_keyboard':_0x23bec1}})[_0x27d279(0x2b0)](_0x5ac5fd=>{telegramError(_0x5ac5fd);}),tgBot['on'](_0x27d279(0x1a5),async _0x397014=>{const _0x5ec793=_0x27d279,_0x100cf1=_0x397014['data'],_0xd7c0f0=_0x397014[_0x5ec793(0x2df)];tgBot[_0x5ec793(0x21b)](_0x397014['id'])['then'](async()=>{const _0x3e6e7f=_0x5ec793;_0x100cf1==_0x3e6e7f(0x274)?(tgBot[_0x3e6e7f(0x26e)](_0xd7c0f0['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x3e6e7f(0x2b0)](_0xe35f7=>{telegramError(_0xe35f7);}),_0x258f12['forEach'](_0x53c696=>{const _0x478b15=_0x3e6e7f;if(_0x53c696[_0x478b15(0x1bb)]!=_0x478b15(0x274))toggleBot(_0x53c696[_0x478b15(0x1bb)],toggleStatus(_0x53c696[_0x478b15(0x1bb)]),_0x478b15(0x1dd));})):(tgBot[_0x3e6e7f(0x26e)](_0xd7c0f0[_0x3e6e7f(0x250)]['id'],_0x3e6e7f(0x238)+_0x100cf1)[_0x3e6e7f(0x2b0)](_0x5e265a=>{telegramError(_0x5e265a);}),toggleBot(_0x100cf1,toggleStatus(_0x100cf1),'stopped'));}),tgBot[_0x5ec793(0x2d0)](_0x5ec793(0x1a5));});}}),tgBot['onText'](/\/off/,_0x4eefc2=>{const _0x36e45c=_0x2f9443;if(!validateTelegram(_0x4eefc2))return;tgBot['removeListener'](_0x36e45c(0x1a5));const _0x2553aa=getEnabledBots();if(_0x2553aa[_0x36e45c(0x296)]==0x0)tgBot[_0x36e45c(0x26e)](_0x4eefc2['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x36e45c(0x2b0)](_0x2aec53=>{telegramError(_0x2aec53);});else{if(_0x2553aa[_0x36e45c(0x296)]>0x1)_0x2553aa[_0x36e45c(0x2f4)]({'botID':_0x36e45c(0x274)});let _0x5e0f8b=[],_0x4bf51f=[];const _0x4e51ab=_0x2553aa[_0x36e45c(0x296)]%0x4==0x0||_0x2553aa[_0x36e45c(0x296)]%0x4==0x3||_0x2553aa[_0x36e45c(0x296)]%0x3==0x1?0x4:0x3;let _0x3e21a5=0x0;_0x2553aa['forEach']((_0x216cf1,_0x496991)=>{const _0x217a49=_0x36e45c;if(_0x496991%_0x4e51ab==0x0)_0x4bf51f=[];_0x4bf51f[_0x217a49(0x2f4)]({'text':_0x216cf1['botID']==_0x217a49(0x274)?'All\x20bots':_0x217a49(0x271)+_0x216cf1[_0x217a49(0x1bb)],'callback_data':_0x216cf1[_0x217a49(0x1bb)]}),_0x496991%_0x4e51ab==0x0&&(_0x5e0f8b[_0x3e21a5]=_0x4bf51f,_0x3e21a5++);}),tgBot[_0x36e45c(0x26e)](_0x4eefc2[_0x36e45c(0x250)]['id'],_0x36e45c(0x19d),{'reply_markup':{'inline_keyboard':_0x5e0f8b}})[_0x36e45c(0x2b0)](_0x3cf57c=>{telegramError(_0x3cf57c);}),tgBot['on'](_0x36e45c(0x1a5),async _0x5da1dc=>{const _0x5109f8=_0x36e45c,_0x2e941d=_0x5da1dc[_0x5109f8(0x293)],_0x4f7be3=_0x5da1dc[_0x5109f8(0x2df)];tgBot['answerCallbackQuery'](_0x5da1dc['id'])[_0x5109f8(0x2b4)](async()=>{const _0x4f3955=_0x5109f8;_0x2e941d==_0x4f3955(0x274)?(tgBot['sendMessage'](_0x4f7be3[_0x4f3955(0x250)]['id'],_0x4f3955(0x212))[_0x4f3955(0x2b0)](_0x408414=>{telegramError(_0x408414);}),_0x2553aa[_0x4f3955(0x2dd)](_0xb5ed37=>{const _0x75f6ad=_0x4f3955;if(_0xb5ed37['botID']!='all')toggleBot(_0xb5ed37[_0x75f6ad(0x1bb)],toggleStatus(_0xb5ed37[_0x75f6ad(0x1bb)]),_0x75f6ad(0x1dd));})):(tgBot[_0x4f3955(0x26e)](_0x4f7be3[_0x4f3955(0x250)]['id'],_0x4f3955(0x2d2)+_0x2e941d)['catch'](_0x3632b3=>{telegramError(_0x3632b3);}),toggleBot(_0x2e941d,toggleStatus(_0x2e941d),_0x4f3955(0x1dd)));}),tgBot[_0x5109f8(0x2d0)](_0x5109f8(0x1a5));});}}),tgBot['onText'](/\/portfolio/,_0x849bb2=>{const _0x393831=_0x2f9443;if(!validateTelegram(_0x849bb2))return;tgBot[_0x393831(0x2d0)](_0x393831(0x1a5));const _0x4a2270=getEnabledBots();if(_0x4a2270['length']==0x0)tgBot['sendMessage'](_0x849bb2[_0x393831(0x250)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x20c760=>{telegramError(_0x20c760);});else{if(_0x4a2270['length']>0x1){let _0x578c31=[],_0x133635=[];const _0x33715a=_0x4a2270[_0x393831(0x296)]%0x4==0x0||_0x4a2270[_0x393831(0x296)]%0x4==0x3||_0x4a2270[_0x393831(0x296)]%0x3==0x1?0x4:0x3;let _0x28f56a=0x0;_0x4a2270['forEach']((_0x5286ca,_0x41829c)=>{const _0x5125ec=_0x393831;if(_0x41829c%_0x33715a==0x0)_0x133635=[];_0x133635[_0x5125ec(0x2f4)]({'text':_0x5125ec(0x271)+_0x5286ca[_0x5125ec(0x1bb)],'callback_data':_0x5286ca['botID']}),_0x41829c%_0x33715a==0x0&&(_0x578c31[_0x28f56a]=_0x133635,_0x28f56a++);}),tgBot['sendMessage'](_0x849bb2['chat']['id'],_0x393831(0x256),{'reply_markup':{'inline_keyboard':_0x578c31}})[_0x393831(0x2b0)](_0x3938ef=>{telegramError(_0x3938ef);}),tgBot['on'](_0x393831(0x1a5),async _0x587a2a=>{const _0x736570=_0x393831,_0x2ae8e8=_0x587a2a[_0x736570(0x293)],_0x1c4783=_0x587a2a[_0x736570(0x2df)];tgBot[_0x736570(0x21b)](_0x587a2a['id'])[_0x736570(0x2b4)](async()=>{const _0x1139b6=_0x736570;if(pid[_0x2ae8e8])pid[_0x2ae8e8][_0x1139b6(0x1ca)]({'function':_0x1139b6(0x25a),'args':null});}),tgBot['removeListener'](_0x736570(0x1a5));});}else{const _0x424002=_0x4a2270[0x0][_0x393831(0x1bb)];if(pid[_0x424002])pid[_0x424002]['send']({'function':_0x393831(0x25a),'args':null});}}}),tgBot[_0x2f9443(0x192)](/\/update/,async _0x29a150=>{const _0x522f53=_0x2f9443;if(!validateTelegram(_0x29a150))return;tgBot['removeListener'](_0x522f53(0x1a5)),await getMessages();if(!updateAvailable)tgBot[_0x522f53(0x26e)](_0x29a150[_0x522f53(0x250)]['id'],_0x522f53(0x27f))[_0x522f53(0x2b0)](_0xb2c084=>{telegramError(_0xb2c084);});else!validInstallation?tgBot[_0x522f53(0x26e)](_0x29a150['chat']['id'],_0x522f53(0x2e1))[_0x522f53(0x2b0)](_0x289810=>{telegramError(_0x289810);}):(tgBot[_0x522f53(0x26e)](_0x29a150[_0x522f53(0x250)]['id'],_0x522f53(0x253),{'reply_markup':{'inline_keyboard':[[{'text':_0x522f53(0x26a),'callback_data':_0x522f53(0x2dc)},{'text':'No','callback_data':'no'}]]}})[_0x522f53(0x2b0)](_0x273671=>{telegramError(_0x273671);}),tgBot['on'](_0x522f53(0x1a5),async _0x13cb50=>{const _0x5476e8=_0x522f53,_0x2a0c95=_0x13cb50[_0x5476e8(0x293)],_0x35018d=_0x13cb50[_0x5476e8(0x2df)];tgBot['answerCallbackQuery'](_0x13cb50['id'])[_0x5476e8(0x2b4)](async()=>{const _0x20ac1a=_0x5476e8;_0x2a0c95==_0x20ac1a(0x2dc)&&(await tgBot[_0x20ac1a(0x26e)](_0x35018d['chat']['id'],_0x20ac1a(0x1a6))[_0x20ac1a(0x2b0)](_0x58e9b0=>{telegramError(_0x58e9b0);}),updateBB());_0x2a0c95=='no'&&await tgBot[_0x20ac1a(0x26e)](_0x35018d[_0x20ac1a(0x250)]['id'],_0x20ac1a(0x2f9))['catch'](_0x37a3b0=>{telegramError(_0x37a3b0);});if(!settings[_0x20ac1a(0x235)])tgBot[_0x20ac1a(0x26e)](_0x35018d[_0x20ac1a(0x250)]['id'],_0x20ac1a(0x2ae))[_0x20ac1a(0x2b0)](_0x52c5a2=>{telegramError(_0x52c5a2);});}),tgBot[_0x5476e8(0x2d0)](_0x5476e8(0x1a5));}));}),tgBot[_0x2f9443(0x192)](/\/toggle/,_0x1b5477=>{const _0x47a1d2=_0x2f9443;if(!validateTelegram(_0x1b5477))return;tgBot[_0x47a1d2(0x2d0)](_0x47a1d2(0x1a5));const _0x4e391b=getBotsWithMode();if(_0x4e391b['length']==0x0)tgBot[_0x47a1d2(0x26e)](_0x1b5477['chat']['id'],_0x47a1d2(0x24a))['catch'](_0x1d5e8f=>{telegramError(_0x1d5e8f);});else{let _0x38c098=[],_0x354638=[];const _0x1b7f07=0x2;let _0x3126ba=0x0;_0x4e391b[_0x47a1d2(0x2dd)]((_0x2409c8,_0x6708b6)=>{const _0x487bfc=_0x47a1d2;if(_0x6708b6%_0x1b7f07==0x0)_0x354638=[];_0x354638['push']({'text':'Bot\x20'+_0x2409c8[_0x487bfc(0x1bb)]+'\x20('+_0x2409c8['mode']+')','callback_data':_0x2409c8['botID']}),_0x6708b6%_0x1b7f07==0x0&&(_0x38c098[_0x3126ba]=_0x354638,_0x3126ba++);}),tgBot[_0x47a1d2(0x26e)](_0x1b5477[_0x47a1d2(0x250)]['id'],_0x47a1d2(0x1f7),{'reply_markup':{'inline_keyboard':_0x38c098}})[_0x47a1d2(0x2b0)](_0x2affee=>{telegramError(_0x2affee);}),tgBot['on'](_0x47a1d2(0x1a5),async _0x517ece=>{const _0x46f385=_0x47a1d2,_0x369fb1=_0x517ece[_0x46f385(0x293)],_0x1cf505=_0x517ece[_0x46f385(0x2df)];tgBot[_0x46f385(0x21b)](_0x517ece['id'])[_0x46f385(0x2b4)](async()=>{const _0x48cecf=_0x46f385,_0x392d79=_0x4e391b[_0x48cecf(0x2d7)](_0x141e8e=>_0x141e8e[_0x48cecf(0x1bb)]==_0x369fb1),_0x21f132=_0x392d79['mode']==_0x48cecf(0x288)?'manual':_0x48cecf(0x288);tgBot['sendMessage'](_0x1cf505['chat']['id'],_0x48cecf(0x20e)+_0x369fb1+_0x48cecf(0x1d3)+_0x21f132+_0x48cecf(0x18e))[_0x48cecf(0x2b0)](_0x4da7d8=>{telegramError(_0x4da7d8);}),toggleBotMode(_0x369fb1);}),tgBot[_0x46f385(0x2d0)]('callback_query');});}}),tgBot[_0x2f9443(0x192)](/\/names/,_0x2c1273=>{const _0x21028e=_0x2f9443;if(!validateTelegram(_0x2c1273))return;let _0x41b02c='';config[_0x21028e(0x2dd)](_0xf90dc7=>{const _0x4760d8=_0x21028e;_0x41b02c+=_0x4760d8(0x271)+_0xf90dc7[_0x4760d8(0x1bb)]+':\x20'+_0xf90dc7[_0x4760d8(0x28a)]+'\x0a';}),tgBot['sendMessage'](_0x2c1273[_0x21028e(0x250)]['id'],_0x41b02c,{'parse_mode':_0x21028e(0x2bb)})[_0x21028e(0x2b0)](_0x1cc42b=>{telegramError(_0x1cc42b);});}),tgBot[_0x2f9443(0x192)](/\/disable/,_0x5eca61=>{const _0x4f4b1a=_0x2f9443;if(!validateTelegram(_0x5eca61))return;tgBot[_0x4f4b1a(0x26e)](_0x5eca61[_0x4f4b1a(0x250)]['id'],_0x4f4b1a(0x1b3))[_0x4f4b1a(0x2b0)](_0x4adab2=>{telegramError(_0x4adab2);}),updateSetting(_0x4f4b1a(0x29a),![]);}),tgBot['onText'](/\/help/,_0x428862=>{const _0x35a8e0=_0x2f9443;if(!validateTelegram(_0x428862))return;tgBot[_0x35a8e0(0x26e)](_0x428862['chat']['id'],_0x5464a2)['catch'](_0x2663ab=>{telegramError(_0x2663ab);});}),tgBot['on'](_0x2f9443(0x298),_0x3cbeea=>{const _0x1977aa=_0x2f9443;_0x3cbeea[_0x1977aa(0x275)]()[_0x1977aa(0x1c5)]('404\x20Not\x20Found')&&(logging(_0x1977aa(0x2e4)),tgBot[_0x1977aa(0x2db)](),tgBot=null,io['to'](_0x1977aa(0x1fe))[_0x1977aa(0x216)](_0x1977aa(0x1cc),_0x1977aa(0x2e4)));}),process[_0x2f9443(0x23f)](_0x2f9443(0x2d3),()=>{const _0x313e7e=_0x2f9443;if(tgBot)tgBot[_0x313e7e(0x2db)]();process['exit'](0x1);}),process[_0x2f9443(0x23f)](_0x2f9443(0x286),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){const _0x33f3f9=_0x5203bb;tgBot&&(tgBot[_0x33f3f9(0x2db)](),tgBot=null);}function sendTelegram(_0x5f5793,_0x287289){const _0x549f15=_0x5203bb;if(settings[_0x549f15(0x29a)]){if(settings[_0x549f15(0x1f6)]=='all'||(_0x287289[_0x549f15(0x268)]==_0x549f15(0x2a0)||_0x287289['type']==_0x549f15(0x29b))&&settings[_0x549f15(0x1f6)]==_0x549f15(0x1d9)||_0x287289[_0x549f15(0x268)]=='order'&&settings['telegramEvents']==_0x549f15(0x1b9)){if(tgBot&&settings[_0x549f15(0x235)]){if(_0x287289['showname'])tgBot[_0x549f15(0x26e)](settings['telegramChatId'],_0x287289[_0x549f15(0x28a)]+'\x20>\x20'+_0x287289[_0x549f15(0x1b4)])['catch'](_0x318e6b=>{telegramError(_0x318e6b);});else tgBot[_0x549f15(0x26e)](settings[_0x549f15(0x235)],_0x549f15(0x271)+_0x5f5793+_0x549f15(0x20c)+_0x287289[_0x549f15(0x1b4)])['catch'](_0x1b95fb=>{telegramError(_0x1b95fb);});}}}}async function sendTelegramMsg(_0x48b38d,_0x4c8666=_0x5203bb(0x2bb)){const _0x21c275=_0x5203bb;return settings[_0x21c275(0x29a)]&&tgBot&&settings[_0x21c275(0x235)]?(await tgBot[_0x21c275(0x26e)](settings[_0x21c275(0x235)],_0x48b38d,{'parse_mode':_0x4c8666})[_0x21c275(0x2b0)](_0x4f1e0c=>{telegramError(_0x4f1e0c);}),!![]):![];}function getDeviceWithIp(_0x4d3b5a){const _0x10dc02=_0x5203bb;return devices[_0x10dc02(0x2d7)](_0x432c0d=>_0x432c0d['ip']===_0x4d3b5a);}function temporaryAccess2FA(_0x339082,_0x5a724c){const _0x5180e2=_0x5203bb;let _0x27f0ba=new Date(),_0x57d7e5=![];if(lastIpApproval){if(_0x27f0ba-lastIpApproval<0x1388)_0x57d7e5=!![];}lastIpApproval=new Date();if(_0x57d7e5)return;tgBot&&settings[_0x5180e2(0x235)]&&(tgBot[_0x5180e2(0x2d0)](_0x5180e2(0x1a5)),tgBot['sendMessage'](settings[_0x5180e2(0x235)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5a724c)['show']+_0x5180e2(0x1ff),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5180e2(0x2cc),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x5180e2(0x1e6),'callback_data':'30'},{'text':_0x5180e2(0x1f8),'callback_data':'reject'}]]}})['catch'](_0x3fcce1=>{telegramError(_0x3fcce1);}),tgBot['on'](_0x5180e2(0x1a5),async _0xe65367=>{const _0x218678=_0x5180e2,_0x275187=_0xe65367[_0x218678(0x293)],_0x54a3da=_0xe65367[_0x218678(0x2df)];tgBot['answerCallbackQuery'](_0xe65367['id'])['then'](async()=>{const _0x42ab02=_0x218678;devices[_0x339082][_0x42ab02(0x263)]={'clientip':_0x5a724c,'timestamp':new Date()[_0x42ab02(0x18b)](),'expiry':_0x275187},_0x275187!=_0x42ab02(0x1f8)?(await tgBot[_0x42ab02(0x26e)](_0x54a3da[_0x42ab02(0x250)]['id'],_0x42ab02(0x1f3)+_0x275187+'\x20minutes',{'parse_mode':_0x42ab02(0x2bb)})[_0x42ab02(0x2b0)](_0x41ef83=>{telegramError(_0x41ef83);}),io['to'](_0x339082)[_0x42ab02(0x216)](_0x42ab02(0x1b1),{'access':{'allow':![],'reason':_0x42ab02(0x1fa),'token':null}})):(await tgBot[_0x42ab02(0x26e)](_0x54a3da[_0x42ab02(0x250)]['id'],_0x42ab02(0x20b))['catch'](_0x52b99a=>{telegramError(_0x52b99a);}),io['to'](_0x339082)[_0x42ab02(0x216)](_0x42ab02(0x1b1),{'access':{'allow':![],'reason':_0x42ab02(0x218),'token':null}}));}),tgBot['removeListener'](_0x218678(0x1a5));}));}function loginAccess2FA(_0x1a55d5,_0x455da3){const _0x27b8d8=_0x5203bb;tgBot&&settings[_0x27b8d8(0x235)]&&(tgBot[_0x27b8d8(0x2d0)](_0x27b8d8(0x1a5)),tgBot[_0x27b8d8(0x26e)](settings[_0x27b8d8(0x235)],_0x27b8d8(0x287)+normalizeIP(_0x455da3)[_0x27b8d8(0x2b7)]+_0x27b8d8(0x1ff),{'parse_mode':_0x27b8d8(0x2bb),'reply_markup':{'inline_keyboard':[[{'text':_0x27b8d8(0x1f5),'callback_data':loginExpiry},{'text':_0x27b8d8(0x1f8),'callback_data':_0x27b8d8(0x1f8)}]]}})[_0x27b8d8(0x2b0)](_0x4cfb3a=>{telegramError(_0x4cfb3a);}),tgBot['on'](_0x27b8d8(0x1a5),async _0x427dc6=>{const _0x438cc6=_0x27b8d8,_0x4ca984=_0x427dc6['data'],_0x1b3847=_0x427dc6[_0x438cc6(0x2df)];tgBot[_0x438cc6(0x21b)](_0x427dc6['id'])['then'](async()=>{const _0x557f4b=_0x438cc6;devices[_0x1a55d5][_0x557f4b(0x22d)]={'clientip':_0x455da3,'timestamp':new Date()[_0x557f4b(0x18b)](),'expiry':_0x4ca984},_0x4ca984!=_0x557f4b(0x1f8)?(await tgBot['sendMessage'](_0x1b3847[_0x557f4b(0x250)]['id'],_0x557f4b(0x280),{'parse_mode':_0x557f4b(0x2bb)})['catch'](_0x15ef09=>{telegramError(_0x15ef09);}),io['to'](_0x1a55d5)['emit'](_0x557f4b(0x1b1),{'access':{'allow':![],'reason':_0x557f4b(0x1fa),'token':null}})):(await tgBot[_0x557f4b(0x26e)](_0x1b3847['chat']['id'],_0x557f4b(0x267))[_0x557f4b(0x2b0)](_0x4efefa=>{telegramError(_0x4efefa);}),io['to'](_0x1a55d5)[_0x557f4b(0x216)](_0x557f4b(0x1b1),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x438cc6(0x2d0)](_0x438cc6(0x1a5));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x13078e=_0x5203bb;return dbConfig[_0x13078e(0x255)]('bots')[_0x13078e(0x272)](_0x13078e(0x1bb))['filter']({'status':_0x13078e(0x29e)})['value']()||[];}function getDisabledBots(){const _0xd31545=_0x5203bb;return dbConfig[_0xd31545(0x255)](_0xd31545(0x259))[_0xd31545(0x272)]('botID')[_0xd31545(0x2a7)]({'status':_0xd31545(0x209)})[_0xd31545(0x26b)]()||[];}function getBotsWithMode(){const _0x4e1424=_0x5203bb,_0x5e0562=dbConfig['get'](_0x4e1424(0x259))[_0x4e1424(0x272)]('botID')[_0x4e1424(0x26b)]()||[];return _0x5e0562['forEach'](_0x10e408=>{const _0x462c14=_0x4e1424,_0x218c90=configpath+_0x462c14(0x1be)+_0x10e408[_0x462c14(0x1bb)]+'-config.json',_0x2283a7=fs['existsSync'](_0x218c90);if(_0x2283a7){const _0x354275=fs['readFileSync'](_0x218c90);try{const _0x54fc4b=JSON[_0x462c14(0x2a6)](_0x354275),_0x3d426c=_0x54fc4b?_0x54fc4b[_0x462c14(0x21d)][0x0]['headless']:![];_0x10e408[_0x462c14(0x1d5)]=_0x3d426c?_0x462c14(0x288):'manual';}catch(_0x2b1d0f){_0x10e408['mode']=_0x462c14(0x1e7);}}else _0x10e408[_0x462c14(0x1d5)]=_0x462c14(0x1e7);}),_0x5e0562;}async function initUser(){const _0x1b329b=_0x5203bb;if(!settings[_0x1b329b(0x228)]){const _0x429be2=uuidRandom();mixpanel[_0x1b329b(0x2fb)](_0x429be2),updateSetting(_0x1b329b(0x228),_0x429be2);}}async function initSecure(){const _0x3e109a=_0x5203bb;let _0x465ddf=getSecure();if(!_0x465ddf[_0x3e109a(0x2c8)](_0x3e109a(0x1ed))){let _0x90e1e8=await generateKeys();_0x465ddf[_0x3e109a(0x2a8)]=_0x90e1e8['publicKey'],_0x465ddf[_0x3e109a(0x1a3)]=_0x90e1e8[_0x3e109a(0x1a3)],_0x465ddf['secret']=crypto[_0x3e109a(0x284)](0x20)['toString'](_0x3e109a(0x1ea));;storeSecure(_0x465ddf);}}function getSettings(){const _0x38d82e=_0x5203bb;return dbSettings[_0x38d82e(0x255)](_0x38d82e(0x258))[_0x38d82e(0x26b)]()||{};}function getSecure(){const _0x119f44=_0x5203bb;return dbSecure[_0x119f44(0x255)](_0x119f44(0x276))['value']()||{};}function getBlacklist(){const _0x52ea8f=_0x5203bb;return dbSecure[_0x52ea8f(0x255)](_0x52ea8f(0x25d))['value']()||[];}function broadcastToBots(_0x2578b7,_0x59f244){const _0x3ab122=_0x5203bb;config[_0x3ab122(0x2dd)](_0x5bc30e=>{const _0x3f3233=_0x3ab122;if(_0x5bc30e[_0x3f3233(0x1b1)]=='enabled'&&_0x5bc30e[_0x3f3233(0x1b7)]==_0x3f3233(0x236)){if(pid[_0x5bc30e['botID']])pid[_0x5bc30e['botID']][_0x3f3233(0x1ca)]({[_0x2578b7]:_0x59f244});}});}function storeSettings(_0x51f367,_0x112f1c=![]){const _0x4243fb=_0x5203bb;_0x51f367={...settings,..._0x51f367};if(_0x112f1c&&_0x51f367[_0x4243fb(0x2cf)]!=_0x4243fb(0x27e)&&_0x51f367[_0x4243fb(0x2cf)]!=''){const _0x27d4d1=crypt['decrypt'](secure['privateKey'],_0x51f367[_0x4243fb(0x2cf)])[_0x4243fb(0x2df)][_0x4243fb(0x205)]('@')[0x0],_0x4f9154=bcrypt['hashSync'](_0x27d4d1,saltRounds);_0x51f367={..._0x51f367,'bbPassword':_0x4f9154};}if(_0x112f1c&&_0x51f367[_0x4243fb(0x2c5)]!=_0x4243fb(0x27e)&&_0x51f367[_0x4243fb(0x2c5)]!=''){const _0x3b1ae3=crypt[_0x4243fb(0x1ae)](secure['privateKey'],_0x51f367[_0x4243fb(0x2c5)])['message'][_0x4243fb(0x205)]('@')[0x0];_0x51f367={..._0x51f367,'telegramToken':_0x3b1ae3};}const _0x65fd93=_0x51f367[_0x4243fb(0x2c5)]!=_0x4243fb(0x27e)&&_0x51f367[_0x4243fb(0x2c5)]!=settings['telegramToken']||_0x51f367[_0x4243fb(0x2bd)]!=settings[_0x4243fb(0x2bd)],_0x395812=_0x51f367[_0x4243fb(0x2c5)]==''||_0x51f367[_0x4243fb(0x2bd)]=='';if(_0x65fd93)_0x51f367['telegramEvents']='all';for(const [_0x59abb0,_0x16f0e8]of Object[_0x4243fb(0x1b2)](_0x51f367)){if(_0x59abb0==_0x4243fb(0x2c5)&&_0x16f0e8==_0x4243fb(0x27e)){_0x51f367[_0x4243fb(0x2c5)]=settings[_0x4243fb(0x2c5)];continue;};if(_0x59abb0==_0x4243fb(0x2cf)&&_0x16f0e8==_0x4243fb(0x27e)){_0x51f367[_0x4243fb(0x2cf)]=settings[_0x4243fb(0x2cf)];continue;};dbSettings[_0x4243fb(0x189)](_0x4243fb(0x251)+_0x59abb0,_0x16f0e8)[_0x4243fb(0x1c1)]();}settings=_0x51f367,io['to'](_0x4243fb(0x1fe))[_0x4243fb(0x216)](_0x4243fb(0x258),cleanSettings()),broadcastToBots(_0x4243fb(0x1ab),settings[_0x4243fb(0x1ab)]);if(_0x65fd93&&!_0x395812)initTelegram();if(_0x65fd93&&_0x395812)disableTelegram();getAllClients()[_0x4243fb(0x2dd)](_0xb86b1a=>{const _0xe8508e=_0x4243fb;getSocket(_0xb86b1a['id'])[_0xe8508e(0x216)](_0xe8508e(0x1b1),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x129fb4,_0x548983){const _0x4b2d4e=_0x5203bb;dbSettings[_0x4b2d4e(0x189)]('settings.'+_0x129fb4,_0x548983)[_0x4b2d4e(0x1c1)](),settings=getSettings(),io['to'](_0x4b2d4e(0x1fe))[_0x4b2d4e(0x216)](_0x4b2d4e(0x258),cleanSettings());}function storeSecure(_0x5a504a){const _0x4cfa6e=_0x5203bb;dbSecure[_0x4cfa6e(0x255)]('secure')[_0x4cfa6e(0x2f4)](_0x5a504a)['write'](),secure=_0x5a504a;}function addBlacklist(_0x28d888){const _0x5d52f7=_0x5203bb;cleanBlacklist();let _0x12f891;devices[_0x28d888][_0x5d52f7(0x263)]?_0x12f891=Math['max'](devices[_0x28d888][_0x5d52f7(0x263)][_0x5d52f7(0x1c7)],loginExpiry):_0x12f891=loginExpiry,dbSecure[_0x5d52f7(0x255)](_0x5d52f7(0x25d))[_0x5d52f7(0x2f4)]({'expiry':new Date()['getTime']()+_0x12f891*0x3c*0x3e8,'token':devices[_0x28d888][_0x5d52f7(0x2f3)][_0x5d52f7(0x224)]})['write'](),blacklist=dbSecure[_0x5d52f7(0x255)]('blacklist')[_0x5d52f7(0x26b)]();}function cleanBlacklist(){const _0x285beb=_0x5203bb;let _0x5d80d9=dbSecure[_0x285beb(0x255)](_0x285beb(0x25d))[_0x285beb(0x1fb)]()[_0x285beb(0x26b)](),_0x29e8e6=new Date()[_0x285beb(0x18b)]();_0x5d80d9[_0x285beb(0x2dd)](_0x4c5603=>{const _0x3e3f0a=_0x285beb;_0x4c5603[_0x3e3f0a(0x1c7)]<_0x29e8e6&&dbSecure[_0x3e3f0a(0x255)](_0x3e3f0a(0x25d))['remove']({'expiry':_0x4c5603['expiry']})[_0x3e3f0a(0x1c1)]();});}function initStates(){let _0x53bd4b=getConfiguration();_0x53bd4b['forEach'](_0x489af7=>{const _0x125c29=_0xadf0;_0x489af7['live']=_0x125c29(0x1dd);}),storeConfiguration(_0x53bd4b);}function onKeys(){const _0x5182f6=new RSA();return new Promise(_0x7b53a1=>{const _0x399261=_0xadf0;_0x5182f6[_0x399261(0x2d9)]()[_0x399261(0x2b4)](_0x1f08ca=>{_0x7b53a1(_0x1f08ca);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3e4a0c=_0x5203bb;let _0x2df228=getSettings(),_0x290a7d=![];!_0x2df228['hasOwnProperty'](_0x3e4a0c(0x260))&&(_0x2df228['lastmsgtelegram']=0x0,_0x290a7d=!![]);!_0x2df228[_0x3e4a0c(0x2c8)](_0x3e4a0c(0x2ef))&&(_0x2df228[_0x3e4a0c(0x2ef)]=0x0,_0x290a7d=!![]);!_0x2df228['hasOwnProperty'](_0x3e4a0c(0x299))&&(_0x2df228[_0x3e4a0c(0x299)]='0.0.0',_0x290a7d=!![]);if(_0x290a7d)storeSettings(_0x2df228);}function storeConfiguration(_0x426746){const _0x2bbe46=_0x5203bb;dbConfig['get'](_0x2bbe46(0x259))[_0x2bbe46(0x193)]()[_0x2bbe46(0x1c1)](),_0x426746[_0x2bbe46(0x2dd)](_0x52bc47=>{const _0x3f421c=_0x2bbe46;delete _0x52bc47[_0x3f421c(0x1d5)];}),dbConfig[_0x2bbe46(0x255)](_0x2bbe46(0x259))[_0x2bbe46(0x2f4)](..._0x426746)['write'](),config=_0x426746;}function resetPassword(){const _0x4dbfe4=_0x5203bb;tgBot&&settings[_0x4dbfe4(0x235)]&&(tgBot[_0x4dbfe4(0x2d0)](_0x4dbfe4(0x1a5)),tgBot[_0x4dbfe4(0x26e)](settings['telegramChatId'],_0x4dbfe4(0x2c7),{'parse_mode':_0x4dbfe4(0x2bb),'reply_markup':{'inline_keyboard':[[{'text':_0x4dbfe4(0x2dc),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x4dbfe4(0x2b0)](_0x5dafc5=>{telegramError(_0x5dafc5);}),tgBot['on'](_0x4dbfe4(0x1a5),async _0x57a04f=>{const _0x4ca600=_0x4dbfe4,_0x201fd9=_0x57a04f['data'],_0x151bd3=_0x57a04f[_0x4ca600(0x2df)];tgBot[_0x4ca600(0x21b)](_0x57a04f['id'])[_0x4ca600(0x2b4)](async()=>{const _0x4a5bea=_0x4ca600;if(_0x201fd9!='no'){const _0x96a413=0xf,_0x189a6d='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x3ba62a=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x96a413)))[_0x4a5bea(0x278)](_0x5f2334=>_0x189a6d[_0x5f2334%_0x189a6d[_0x4a5bea(0x296)]])[_0x4a5bea(0x2e8)](''),_0x22c735=bcrypt[_0x4a5bea(0x24e)](_0x3ba62a,saltRounds);storeSettings({'bbPassword':_0x22c735}),await tgBot[_0x4a5bea(0x26e)](_0x151bd3[_0x4a5bea(0x250)]['id'],_0x4a5bea(0x2f1)+_0x3ba62a,{'parse_mode':'HTML'})[_0x4a5bea(0x2b0)](_0x1164cb=>{telegramError(_0x1164cb);});}else await tgBot[_0x4a5bea(0x26e)](_0x151bd3[_0x4a5bea(0x250)]['id'],_0x4a5bea(0x1db))[_0x4a5bea(0x2b0)](_0x88bdb9=>{telegramError(_0x88bdb9);});}),tgBot[_0x4ca600(0x2d0)](_0x4ca600(0x1a5));}));}function logging(_0x343fc7){const _0xa36fdd=_0x5203bb;console['log'](getTimeStamp()+_0xa36fdd(0x1f9)+_0x343fc7);if(tgBot&&settings[_0xa36fdd(0x235)]&&settings['telegramEvents']!=_0xa36fdd(0x1b9))tgBot['sendMessage'](settings[_0xa36fdd(0x235)],'Bot\x20Mgr\x20>\x20'+_0x343fc7)[_0xa36fdd(0x2b0)](_0x3b441f=>{telegramError(_0x3b441f);});}function getServerTime(){const _0x5e6a87=_0x5203bb,_0x4eae46=new Date();return _0x4eae46[_0x5e6a87(0x279)]()+'/'+(_0x4eae46['getMonth']()+0x1)['toString']()[_0x5e6a87(0x1d2)](0x2,'0')+'/'+_0x4eae46[_0x5e6a87(0x244)]()['toString']()[_0x5e6a87(0x1d2)](0x2,'0')+'\x20'+_0x4eae46[_0x5e6a87(0x28b)]()[_0x5e6a87(0x275)]()[_0x5e6a87(0x1d2)](0x2,'0')+':'+_0x4eae46[_0x5e6a87(0x2d8)]()[_0x5e6a87(0x275)]()[_0x5e6a87(0x1d2)](0x2,'0')+':'+_0x4eae46[_0x5e6a87(0x2cb)]()[_0x5e6a87(0x275)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x36e971=_0x5203bb,_0x241574=shiftedTime();return _0x241574['getFullYear']()+'/'+(_0x241574['getMonth']()+0x1)[_0x36e971(0x275)]()[_0x36e971(0x1d2)](0x2,'0')+'/'+_0x241574[_0x36e971(0x244)]()[_0x36e971(0x275)]()[_0x36e971(0x1d2)](0x2,'0')+'\x20'+_0x241574['getHours']()[_0x36e971(0x275)]()[_0x36e971(0x1d2)](0x2,'0')+':'+_0x241574['getMinutes']()[_0x36e971(0x275)]()[_0x36e971(0x1d2)](0x2,'0')+':'+_0x241574[_0x36e971(0x2cb)]()['toString']()[_0x36e971(0x1d2)](0x2,'0');}function shiftedTime(){const _0x1f1e1d=_0x5203bb,_0x23c905=new Date();let _0x772473=_0x23c905;if(settings[_0x1f1e1d(0x1ab)]&&settings[_0x1f1e1d(0x1ab)]!==0x0)_0x772473=fns['add'](_0x23c905,{'hours':settings['timeshift']});return _0x772473;}function startScheduler(){let _0x424218=new Date()['getUTCHours']();_0x424218==0x1&&backupConfigFiles();_0x424218==0x9&&triggerAnalytics();_0x424218%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4a4ebb=_0x5203bb;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x4a4ebb(0x2dd)](_0x515760=>{const _0x952c57=_0x4a4ebb;if(!_0x515760['isDirectory']())fs[_0x952c57(0x22e)](configpath+_0x515760[_0x952c57(0x265)],configbackuppath+_0x515760['name']);});}async function getPublicIp(){const _0x4f600f=_0x5203bb;try{const _0x3e5956=await axios[_0x4f600f(0x255)]('https://api.ipify.org?format=json');publicip=_0x3e5956[_0x4f600f(0x293)]['ip'];}catch(_0x318d23){}}async function triggerAnalytics(_0xb9c083=![]){const _0x5bb008=_0x5203bb;if(!publicip)await getPublicIp();const _0x58077f=getBotsWithMode();let _0x1371ff=0x0;_0x58077f['forEach'](_0x437c90=>{const _0x4d7a0b=_0xadf0;if(_0x437c90['status']===_0x4d7a0b(0x29e))_0x1371ff++;}),mixpanel[_0x5bb008(0x245)](_0x5bb008(0x233),{'distinct_id':settings[_0x5bb008(0x228)],'ip':publicip,'version':serverversion,'numbots':_0x58077f[_0x5bb008(0x296)],'numbotsenabled':_0x1371ff}),!_0xb9c083&&analytics[_0x5bb008(0x1e8)]({'title':'Balance\x20Bot\x20Server','href':_0x5bb008(0x2a4),'path':'/v'+serverversion});}async function getMessages(){const _0x38bbf3=_0x5203bb,_0x10a039=_0x38bbf3(0x2c2),_0x51762e=new GraphQLClient(_0x10a039),_0x3434eb={'authorization':_0x38bbf3(0x191)},_0x14cb30=serverversion[_0x38bbf3(0x205)]('.'),_0x2ea23e=_0x14cb30[0x0]+'.'+_0x14cb30[0x1],_0xff5d90=Math[_0x38bbf3(0x1aa)](settings['lastmsgtelegram'],settings[_0x38bbf3(0x2ef)]),_0x3e5377={'last':parseInt(_0xff5d90),'bbm':_0x2ea23e},_0x1f90b8=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4fb665;try{_0x4fb665=await _0x51762e[_0x38bbf3(0x1b0)](_0x1f90b8,_0x3e5377,_0x3434eb);}catch(_0x5bd5fb){}if(_0x4fb665&&_0x4fb665[_0x38bbf3(0x2a3)]){let _0x35eed1=settings[_0x38bbf3(0x260)];for(const _0x2821a7 of _0x4fb665[_0x38bbf3(0x2a3)]){newMessages['push'](_0x2821a7);if(_0x2821a7[_0x38bbf3(0x28d)])updateSetting(_0x38bbf3(0x299),_0x2821a7[_0x38bbf3(0x28d)]);let _0x64a85c=_0x2821a7[_0x38bbf3(0x28d)]?serverversion>=_0x2821a7['bbvNew']:![];if(!_0x64a85c&&_0x2821a7['number']>_0x35eed1){if(_0x2821a7['bbvReceive']==='any'||serverversion[_0x38bbf3(0x1b5)](_0x2821a7[_0x38bbf3(0x300)])){let _0x3357df=''+_0x2821a7['title']+'\x0a\x0a'+_0x2821a7['message'];const _0x3b9edd=await sendTelegramMsg(toTelegramMarkdown(_0x3357df),_0x38bbf3(0x19c));if(_0x3b9edd)_0x35eed1=_0x2821a7[_0x38bbf3(0x249)];}}}updateAvailable=isNewerVersion(settings[_0x38bbf3(0x299)],serverversion),updateSetting(_0x38bbf3(0x260),_0x35eed1),emitMessages();}}function emitMessages(){const _0x4fd26f=settings['lastmsgemitted'];let _0x339dcf=[];newMessages['forEach'](_0x11dc0b=>{const _0x1ba7c4=_0xadf0;_0x11dc0b['number']>_0x4fd26f&&_0x339dcf[_0x1ba7c4(0x2f4)](_0x11dc0b);}),_0x339dcf['length']>0x0&&getAllClients()['forEach'](_0xff0ed8=>{const _0x56cac7=_0xadf0;getSocket(_0xff0ed8['id'])['emit'](_0x56cac7(0x2df),_0x339dcf);});}function confirmMessage(_0x4ae5ca){const _0x1a0902=_0x5203bb;updateSetting(_0x1a0902(0x2ef),Number(_0x4ae5ca));}function isNewerVersion(_0x5d9231,_0x2e80a6){const _0x4e4b2f=_0x5203bb,_0x2a82d0=_0x2e80a6[_0x4e4b2f(0x205)]('.'),_0x222529=_0x5d9231[_0x4e4b2f(0x205)]('.');for(var _0x2553ae=0x0;_0x2553ae<_0x222529[_0x4e4b2f(0x296)];_0x2553ae++){const _0xb0c074=~~_0x222529[_0x2553ae],_0x32106a=~~_0x2a82d0[_0x2553ae];if(_0xb0c074>_0x32106a)return!![];if(_0xb0c074<_0x32106a)return![];}return![];}function toTelegramMarkdown(_0x40f85a){const _0x50269a=_0x5203bb,_0x24d1e2=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x34d8d7=/\*{2}(.+?)\*{2}/gim;return _0x40f85a=_0x40f85a[_0x50269a(0x1bf)](_0x24d1e2,_0x50269a(0x1a7))[_0x50269a(0x1bf)](_0x34d8d7,'*$1*'),_0x40f85a;}function validateCredentials(_0x44a920,_0x4c1a80){const _0x152c5c=_0x5203bb;if(_0x44a920['username']==settings[_0x152c5c(0x2af)]&&bcrypt['compareSync'](_0x44a920['password'],settings[_0x152c5c(0x2cf)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x152c5c(0x1ec),'token':null};else{const _0x1d3e04=generateLoginToken(_0x4c1a80);return{'allow':!![],'reason':_0x152c5c(0x2ad),'token':_0x1d3e04};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x89c581){const _0x5606c9=generateLoginToken(_0x89c581);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x5606c9};}function validateAccess(_0xe58216,_0x2160eb){const _0x2b5a75=_0x5203bb;let _0x22b969=devices[_0x2160eb]['ip'],_0x587ed8;const _0x2871b2=_0x278f19=>{const _0x2dc945=_0xadf0;if(settings[_0x2dc945(0x223)]){if(settings[_0x2dc945(0x1de)]){if(telegram2FaApproved(_0x2160eb)){const _0x519273=generateLoginToken(_0x2160eb);return{'allow':!![],'reason':_0x2dc945(0x1c4),'token':_0x519273};}else return{'allow':![],'reason':_0x2dc945(0x269),'token':null};}else return _0x587ed8=validToken(_0x278f19,_0x2160eb),_0x587ed8['hasOwnProperty'](_0x2dc945(0x29b))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x278f19}:{'allow':![],'reason':_0x2dc945(0x269),'token':null};}else return{'allow':!![],'reason':_0x2dc945(0x2ff),'token':null};};if(settings[_0x2b5a75(0x2e9)]){let _0x53145c=[...settings['whitelist'],_0x2b5a75(0x2be),_0x2b5a75(0x2e0),_0x2b5a75(0x257)];if(_0x53145c['includes'](_0x22b969))return _0x2871b2(_0xe58216);else{_0x587ed8=validToken(_0xe58216,_0x2160eb);if(_0x587ed8[_0x2b5a75(0x2c8)]('success'))return _0x2871b2(_0xe58216);else{if(telegramIpApproved(_0x2160eb)){const _0x324471=generateToken(_0x2160eb);return _0x587ed8=_0x2871b2(_0xe58216),_0x587ed8['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x324471}:_0x587ed8;}else return settings[_0x2b5a75(0x2b8)]?{'allow':![],'reason':_0x2b5a75(0x18c),'token':null}:{'allow':![],'reason':_0x2b5a75(0x2fe),'token':null};}}}else return _0x2871b2(_0xe58216);}function timelyDecrypt(_0x8e0277,_0x297147=!![]){const _0x3e64d0=_0x5203bb;if(_0x8e0277)try{const _0x416256=crypt[_0x3e64d0(0x1ae)](secure['privateKey'],_0x8e0277)[_0x3e64d0(0x2df)],_0x298fa9=_0x416256[_0x3e64d0(0x205)]('@')[0x0],_0x267d87=_0x416256[_0x3e64d0(0x205)]('@')[0x1],_0xfe6efa=new Date()['getTime']();if(_0x297147){if(_0xfe6efa-_0x267d87<maxSecretAge*0x3e8)return _0x298fa9;else return![];}else return _0x298fa9;}catch(_0x309dad){return![];}else return![];}const validToken=(_0x9c5382,_0x27ad0e)=>{const _0x33d768=_0x5203bb,_0x3531ed=devices[_0x27ad0e]['ip'];if(!_0x9c5382)return{'error':'No\x20authentication\x20token'};for(let _0x1b4211 of blacklist){if(_0x1b4211[_0x33d768(0x224)]==_0x9c5382)return{'error':_0x33d768(0x2b3)};}let _0x48275d;try{_0x48275d=jwt['verify'](_0x9c5382,secure['secret']+_0x27ad0e);}catch{return{'error':_0x33d768(0x25f)};}if(!_0x48275d[_0x33d768(0x2c8)]('clientip')&&!_0x48275d[_0x33d768(0x2c8)](_0x33d768(0x24d))||!_0x48275d['hasOwnProperty'](_0x33d768(0x248)))return{'error':_0x33d768(0x25e)};if(!_0x48275d[_0x33d768(0x2c8)]('username')&&_0x48275d['hasOwnProperty'](_0x33d768(0x2f6))){const {clientip:_0x31374d}=_0x48275d;return _0x3531ed==_0x31374d?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x48275d[_0x33d768(0x2c8)]('username')&&_0x48275d[_0x33d768(0x2c8)]('clientip')){const {username:_0x1bede8,clientip:_0x52b520}=_0x48275d;return settings[_0x33d768(0x2af)]==_0x1bede8&&_0x3531ed==_0x52b520?{'success':_0x33d768(0x2f0)}:{'error':_0x33d768(0x2d4)};}}},generateLoginToken=_0x56e44c=>{const _0x4e06b9=_0x5203bb;if(_0x56e44c){const _0x2bfe69=devices[_0x56e44c]['ip'];return jwt[_0x4e06b9(0x2ea)]({'username':settings[_0x4e06b9(0x2af)],'clientip':_0x2bfe69},secure[_0x4e06b9(0x1ed)]+_0x56e44c,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x351b39=>{const _0x16b42d=_0x5203bb;if(_0x351b39){const _0x51238b=devices[_0x351b39]['ip'];return jwt[_0x16b42d(0x2ea)]({'clientip':_0x51238b},secure['secret']+_0x351b39,{'expiresIn':devices[_0x351b39][_0x16b42d(0x263)][_0x16b42d(0x1c7)]*0x3c});}else return![];},telegramIpApproved=_0x211347=>{const _0x4d8c59=_0x5203bb;let _0x50807c=![];return devices[_0x211347][_0x4d8c59(0x263)]&&devices[_0x211347]['telegramIpApproval'][_0x4d8c59(0x1c7)]!='reject'&&(_0x50807c=devices[_0x211347]['telegramIpApproval'][_0x4d8c59(0x2f6)]==devices[_0x211347]['ip']&&new Date()[_0x4d8c59(0x18b)]()-devices[_0x211347]['telegramIpApproval'][_0x4d8c59(0x2ed)]<devices[_0x211347][_0x4d8c59(0x263)]['expiry']*0x3c*0x3e8),_0x50807c;},telegram2FaApproved=_0x10132d=>{const _0x19c80c=_0x5203bb;let _0x1195c7=![];return devices[_0x10132d]['telegram2FaApproval']&&devices[_0x10132d]['telegram2FaApproval']['expiry']!=_0x19c80c(0x1f8)&&(_0x1195c7=devices[_0x10132d][_0x19c80c(0x22d)]['clientip']==devices[_0x10132d]['ip']&&new Date()[_0x19c80c(0x18b)]()-devices[_0x10132d][_0x19c80c(0x22d)]['timestamp']<devices[_0x10132d]['telegram2FaApproval'][_0x19c80c(0x1c7)]*0x3c*0x3e8),_0x1195c7;},normalizeIP=_0x3f3789=>{const _0x2c0881=_0x5203bb;let _0x1020a8=null,_0x5b49d5=null;if(ipaddr[_0x2c0881(0x266)](_0x3f3789)){const _0xe51cd9=ipaddr[_0x2c0881(0x2a6)](_0x3f3789);_0xe51cd9['kind']()===_0x2c0881(0x1f1)?(_0xe51cd9[_0x2c0881(0x243)]()&&(_0x1020a8=_0xe51cd9[_0x2c0881(0x1ba)]()[_0x2c0881(0x275)]()),_0x5b49d5=_0xe51cd9[_0x2c0881(0x275)]()):(_0x1020a8=_0xe51cd9[_0x2c0881(0x275)](),_0x5b49d5=_0xe51cd9['toIPv4MappedAddress']()[_0x2c0881(0x275)]());}return{'show':_0x1020a8?_0x1020a8:_0x5b49d5,'store':_0x5b49d5};};function sleep(_0x3d6e7e){return new Promise(_0x5bf767=>setTimeout(_0x5bf767,_0x3d6e7e));}