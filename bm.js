const _0x72ca9b=_0x5bc5;(function(_0x47a4e1,_0xcecdff){const _0x4ac114=_0x5bc5,_0x58081e=_0x47a4e1();while(!![]){try{const _0x135500=-parseInt(_0x4ac114(0x293))/0x1*(-parseInt(_0x4ac114(0x15c))/0x2)+-parseInt(_0x4ac114(0x2a6))/0x3*(parseInt(_0x4ac114(0x13e))/0x4)+-parseInt(_0x4ac114(0xf6))/0x5+parseInt(_0x4ac114(0x1dc))/0x6*(-parseInt(_0x4ac114(0x142))/0x7)+parseInt(_0x4ac114(0x18e))/0x8*(parseInt(_0x4ac114(0x231))/0x9)+parseInt(_0x4ac114(0x195))/0xa*(parseInt(_0x4ac114(0x21c))/0xb)+parseInt(_0x4ac114(0x147))/0xc*(parseInt(_0x4ac114(0x2bb))/0xd);if(_0x135500===_0xcecdff)break;else _0x58081e['push'](_0x58081e['shift']());}catch(_0x4d9010){_0x58081e['push'](_0x58081e['shift']());}}}(_0xc2bd,0x8487c));const _0x348241=function(){let _0x46690e=!![];return function(_0xbd356a,_0x2f698d){const _0x13e8a7=_0x46690e?function(){const _0x171aa1=_0x5bc5;if(_0x2f698d){const _0x439680=_0x2f698d[_0x171aa1(0x145)](_0xbd356a,arguments);return _0x2f698d=null,_0x439680;}}:function(){};return _0x46690e=![],_0x13e8a7;};}(),_0x52d855=_0x348241(this,function(){const _0x1daa00=_0x5bc5;return _0x52d855[_0x1daa00(0x2b3)]()[_0x1daa00(0xf2)](_0x1daa00(0x27d))['toString']()[_0x1daa00(0x222)](_0x52d855)['search'](_0x1daa00(0x27d));});_0x52d855();'use strict';process[_0x72ca9b(0x1ed)][_0x72ca9b(0x15a)]=0x1;const childProcess=require(_0x72ca9b(0x1d1)),fs=require('fs'),fns=require(_0x72ca9b(0x143)),low=require(_0x72ca9b(0x21b)),FileSync=require(_0x72ca9b(0x189)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x72ca9b(0x2cc))['Crypt'],RSA=require('hybrid-crypto-js')[_0x72ca9b(0x2b9)],bcrypt=require(_0x72ca9b(0x2a4)),jwt=require('jsonwebtoken'),ipaddr=require(_0x72ca9b(0x2ab)),argv=require(_0x72ca9b(0x210))(process[_0x72ca9b(0x278)][_0x72ca9b(0x1fb)](0x2))['argv'],uuidRandom=require(_0x72ca9b(0x2ae)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x72ca9b(0x1c1)),axios=require(_0x72ca9b(0xf8)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x72ca9b(0x14c)),fileUpload=require(_0x72ca9b(0x244)),{networkInterfaces}=require('os'),PORT=argv[_0x72ca9b(0x27b)]||_0x72ca9b(0x21d),pattern=/^[0-9]{2,4}$/;!pattern[_0x72ca9b(0xef)](PORT)&&(console[_0x72ca9b(0x198)](_0x72ca9b(0x239)+PORT+_0x72ca9b(0x15f)),process[_0x72ca9b(0x2bc)](0x1));const HOST=argv[_0x72ca9b(0x28e)]||null,userID=argv[_0x72ca9b(0x230)]||'',debugging=argv['d']||![],nodeversion=process[_0x72ca9b(0x27f)][_0x72ca9b(0x177)];let bbpath=_0x72ca9b(0x2bd),bbpath2='';const botfile=_0x72ca9b(0x23a),configfile='bb-config.json',settingsfile='bb-settings.json',securefile=_0x72ca9b(0x1ea),environment=require('./'+bbpath2+_0x72ca9b(0x1ba))[_0x72ca9b(0x1a8)]||_0x72ca9b(0x1be),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x72ca9b(0x163)),configpath=userID?bbpath+_0x72ca9b(0x1da)+userID+'/':bbpath+_0x72ca9b(0x1da),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x72ca9b(0x162)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x72ca9b(0x208)](logspath+_0x72ca9b(0x1db),{'flags':'a'}),temppath=userID?bbpath+_0x72ca9b(0x2bf)+userID+'/':bbpath+_0x72ca9b(0x2bf);!fs[_0x72ca9b(0x194)](configpath)&&fs[_0x72ca9b(0x23b)](configpath);!fs[_0x72ca9b(0x194)](configbackuppath)&&fs[_0x72ca9b(0x23b)](configbackuppath);!fs[_0x72ca9b(0x194)](logspath)&&fs[_0x72ca9b(0x23b)](logspath);!fs[_0x72ca9b(0x194)](zippath)&&fs[_0x72ca9b(0x23b)](zippath);!fs[_0x72ca9b(0x194)](temppath)&&fs[_0x72ca9b(0x23b)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x72ca9b(0x2a2)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x72ca9b(0x164)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x72ca9b(0x17a),'onepagemode':![]}})[_0x72ca9b(0x2a2)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x72ca9b(0x164)]({'secure':{},'blacklist':[]})[_0x72ca9b(0x2a2)]();let crypt=new Crypt({'md':_0x72ca9b(0x133),'rsaStandard':_0x72ca9b(0x292)});const saltRounds=0xa,mixpanel=Mixpanel[_0x72ca9b(0x13a)](_0x72ca9b(0xff),{'host':_0x72ca9b(0x17b)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x72ca9b(0x22b)]&&settings['telegramToken']!=''&&settings[_0x72ca9b(0x2c4)]&&settings[_0x72ca9b(0x2c4)]!='')initTelegram();const parseColor=(_0x36f1c1,_0x38176a)=>{const _0x21e6de=_0x72ca9b,_0x571310=/#[A-Z]{3}#/g;if(typeof _0x36f1c1==_0x21e6de(0x261)){!_0x38176a?_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](_0x571310,''):(_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#BLU#/g,_0x21e6de(0xfb)),_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#RED#/g,_0x21e6de(0x13b)),_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#YEL#/g,_0x21e6de(0x1d2)),_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#MAG#/g,_0x21e6de(0x1ee)),_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#CYA#/g,_0x21e6de(0x126)),_0x36f1c1=_0x36f1c1[_0x21e6de(0x183)](/#RES#/g,'\x1b[0m'));;}return _0x36f1c1;},logger={'screen':_0x3a9121=>{console['log'](parseColor(_0x3a9121,!![]));},'simple':_0x5c4fd0=>{const _0x5d636a=_0x72ca9b;console[_0x5d636a(0x198)](parseColor(_0x5c4fd0,!![])),loggerfile[_0x5d636a(0x2a2)](util[_0x5d636a(0x26c)](parseColor(_0x5c4fd0,![]))+'\x0a');},'full':async _0x246783=>{const _0x2e496d=_0x72ca9b,_0x4b0894=getTimeStamp()+_0x2e496d(0x26e)+_0x246783;console[_0x2e496d(0x198)](parseColor(_0x4b0894,!![])),loggerfile[_0x2e496d(0x2a2)](util['format'](parseColor(_0x4b0894,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x2e496d(0x100))await tgBot['sendMessage'](settings['telegramChatId'],_0x2e496d(0x2cf)+parseColor(_0x246783,![]))[_0x2e496d(0x214)](_0x2e3297=>{telegramError(_0x2e3297);});},'debug':async(_0x358cc1,_0x3b6559='')=>{const _0x74f2b5=_0x72ca9b,_0x33bc7b=getTimeStamp()+_0x74f2b5(0x12d)+_0x358cc1;if(debugging)console[_0x74f2b5(0x198)](parseColor(_0x33bc7b,!![]));loggerfile['write'](util[_0x74f2b5(0x26c)](parseColor(_0x33bc7b,![]))+'\x0a');if(_0x3b6559){if(debugging)console[_0x74f2b5(0x198)](_0x3b6559);loggerfile[_0x74f2b5(0x2a2)](util['format'](_0x3b6559)+'\x0a');}}};process['on'](_0x72ca9b(0x113),function(_0x37c76b){const _0x29da0e=_0x72ca9b;logger[_0x29da0e(0x216)](_0x37c76b);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x72ca9b(0x1ba))[_0x72ca9b(0x2cb)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x72ca9b(0x1fe)),app=express(),http=require('http')[_0x72ca9b(0x199)](app);app[_0x72ca9b(0x1b2)](fileUpload({'useTempFiles':!![]})),app[_0x72ca9b(0x10f)](_0x72ca9b(0x179),async(_0x4fe26d,_0x3beb29)=>{const _0x1adea2=_0x72ca9b,_0x780b34=_0x4fe26d[_0x1adea2(0x22a)]['type'],_0x5aeb7d=getClientsWithBotID(_0x1adea2(0x2a0)),_0x2d031d=_0x4fe26d[_0x1adea2(0x1d9)][_0x1adea2(0x123)],_0x1772b4=timelyDecrypt(_0x2d031d,![]),_0x4b78c6=_0x5aeb7d[_0x1adea2(0x238)](_0x1e4d69=>_0x1e4d69['uuid']==_0x1772b4);if(_0x4b78c6){const _0x49a3f4=normalizeIP(_0x4fe26d['socket'][_0x1adea2(0x1ad)])['store'],_0x4e4f89=_0x4fe26d[_0x1adea2(0x1d9)][_0x1adea2(0x20b)];if(validateAccess(_0x4e4f89,_0x1772b4,_0x49a3f4)[_0x1adea2(0x2a5)])_0x780b34==_0x1adea2(0x2ad)&&await backupConfigFiles(),await zipFiles(_0x780b34),_0x3beb29[_0x1adea2(0x12f)](zippath+(_0x780b34+'.zip'),_0x520435=>{const _0x5e4ba6=_0x1adea2;_0x520435&&(logger['full'](_0x5e4ba6(0x18a)+_0x780b34),logger['simple'](_0x520435));});else logger[_0x1adea2(0x21f)](_0x1adea2(0x1d5)+_0x780b34+_0x1adea2(0x29a));}else logger['full'](_0x1adea2(0x1d5)+_0x780b34+_0x1adea2(0x171));}),app[_0x72ca9b(0x20d)]('/upload-backup',async(_0x17d6c5,_0x34a9ee)=>{const _0x13f917=_0x72ca9b,_0x23092f=getClientsWithBotID(_0x13f917(0x2a0)),_0x4e74d5=_0x17d6c5[_0x13f917(0x1d9)][_0x13f917(0x123)],_0x2cde96=timelyDecrypt(_0x4e74d5,![]),_0xafbbed=_0x23092f['find'](_0x2f10b9=>_0x2f10b9[_0x13f917(0x123)]==_0x2cde96);logger[_0x13f917(0x20a)](_0x13f917(0x1c4));if(_0xafbbed){const _0x434969=normalizeIP(_0x17d6c5[_0x13f917(0x1b8)][_0x13f917(0x1ad)])[_0x13f917(0x16e)],_0x496c03=_0x17d6c5[_0x13f917(0x1d9)]['tkn'];if(validateAccess(_0x496c03,_0x2cde96,_0x434969)[_0x13f917(0x2a5)]){if(_0x17d6c5[_0x13f917(0x1a9)]){const _0x5afa37=_0x17d6c5['files'][_0x13f917(0xf9)];await _0x5afa37['mv'](temppath+_0x5afa37[_0x13f917(0x151)]),_0x34a9ee[_0x13f917(0x165)]({'status':!![],'message':_0x13f917(0x2a9)});const _0x12c0ff=getBotsWithMode();_0x12c0ff['length']>0x0?confirmRestore(temppath,_0x5afa37[_0x13f917(0x151)]):unzipFile(temppath,_0x5afa37[_0x13f917(0x151)]);}}else logger['full'](_0x13f917(0x13f));}else logger[_0x13f917(0x21f)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app['use'](express['static'](path[_0x72ca9b(0x2ac)](__dirname,bbpath2,'build2'))),app[_0x72ca9b(0x1b2)](express['static'](path[_0x72ca9b(0x2ac)](__dirname,bbpath2,'build'))),app[_0x72ca9b(0x10f)]('/',function(_0x567199,_0x5cbe35){const _0x3ed30e=_0x72ca9b;_0x5cbe35[_0x3ed30e(0xf5)](path['join'](__dirname,bbpath2,_0x3ed30e(0x295),_0x3ed30e(0x249)));}),app[_0x72ca9b(0x10f)](_0x72ca9b(0x15e),function(_0x124b38,_0x41d849){const _0x26db51=_0x72ca9b;_0x41d849[_0x26db51(0xf5)](path[_0x26db51(0x2ac)](__dirname,bbpath2,_0x26db51(0x299),_0x26db51(0x249)));}),app['get'](_0x72ca9b(0x1f6),(_0x143794,_0x11b24b)=>{const _0x3fd7dc=_0x72ca9b;_0x11b24b[_0x3fd7dc(0xf5)](path[_0x3fd7dc(0x2ac)](__dirname,bbpath2,'build',_0x3fd7dc(0x249)));}),app[_0x72ca9b(0x10f)](_0x72ca9b(0x252),(_0x242a1f,_0x3b6e7e)=>{const _0x30c277=_0x72ca9b;_0x3b6e7e[_0x30c277(0xf5)](path[_0x30c277(0x2ac)](__dirname,bbpath2,_0x30c277(0x299),'index.html'));}),app[_0x72ca9b(0x10f)](_0x72ca9b(0x10b),(_0xe13560,_0x4635e7)=>{const _0x2b8ac0=_0x72ca9b;_0x4635e7[_0x2b8ac0(0xf5)](path[_0x2b8ac0(0x2ac)](__dirname,bbpath2,'build','index.html'));}),app[_0x72ca9b(0x10f)](_0x72ca9b(0xf3),(_0x206e03,_0x363926)=>{const _0x111636=_0x72ca9b;_0x363926['sendFile'](path[_0x111636(0x2ac)](__dirname,bbpath2,_0x111636(0x299),_0x111636(0x249)));}),app[_0x72ca9b(0x10f)]('/:bot/configuration',(_0x547c0a,_0xd24bcc)=>{const _0x4dcf27=_0x72ca9b;_0xd24bcc[_0x4dcf27(0xf5)](path[_0x4dcf27(0x2ac)](__dirname,bbpath2,_0x4dcf27(0x299),'index.html'));}),app[_0x72ca9b(0x10f)](_0x72ca9b(0x119),(_0x23e6c8,_0x421a1f)=>{const _0x3b63c1=_0x72ca9b;_0x421a1f[_0x3b63c1(0xf5)](path[_0x3b63c1(0x2ac)](__dirname,bbpath2,'build',_0x3b63c1(0x249)));});if(HOST)http['listen'](PORT,HOST);else http[_0x72ca9b(0x1e1)](PORT);const io=require(_0x72ca9b(0x2d1))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x35f831=_0x72ca9b;let _0xf5817a=_0x35f831(0x12b);const _0x190714=networkInterfaces(),_0x180550={};for(const _0x25eb99 of Object[_0x35f831(0x11e)](_0x190714)){for(const _0xbefd1f of _0x190714[_0x25eb99]){if((_0xbefd1f[_0x35f831(0x237)]==_0x35f831(0x26d)||_0xbefd1f[_0x35f831(0x237)]==0x4)&&!_0xbefd1f[_0x35f831(0x2b1)]){const _0x2c4eaf=ipaddr['parse'](_0xbefd1f[_0x35f831(0x1ec)])['range']();_0x2c4eaf!='private'&&(!_0x180550[_0x25eb99]&&(_0x180550[_0x25eb99]=[]),_0x180550[_0x25eb99]['push'](_0xbefd1f[_0x35f831(0x1ec)]),_0xf5817a=_0xbefd1f[_0x35f831(0x1ec)]);}}}return{'serverip':_0xf5817a,'netinterfaces':_0x180550};}async function startServer(){const _0x9838b0=_0x72ca9b,{serverip:_0x3bab34,netinterfaces:_0x2df28d}=getServerIP();logger[_0x9838b0(0x216)](''),logger[_0x9838b0(0x216)]('-----------------------------------------------------------------------------------'),await logger[_0x9838b0(0x21f)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x9838b0(0x193)+(environment==_0x9838b0(0x28b)?_0x9838b0(0x29c):'')+'\x0a'+(_0x9838b0(0x187)+PORT+_0x9838b0(0x248))+(_0x9838b0(0x1bf)+_0x3bab34+':'+PORT+_0x9838b0(0x1af))),logger[_0x9838b0(0x216)](_0x9838b0(0x156));if(config[_0x9838b0(0x1a1)]!=0x0)for(const _0x34139a of config){if(_0x34139a[_0x9838b0(0x257)]==_0x9838b0(0x234)||_0x34139a['status']==_0x9838b0(0x2c2))await logger['full']('Starting\x20bot\x20|\x20Bot\x20'+_0x34139a[_0x9838b0(0x2c1)]+_0x9838b0(0x1e7)+_0x34139a['botname']),startBot([_0x34139a[_0x9838b0(0x2c1)],userID],{'cwd':bbpath},function(_0x4c39d1){const _0x43313e=_0x9838b0;if(_0x4c39d1)logger[_0x43313e(0x21f)](_0x4c39d1);});else(_0x34139a['status']=='disabled'||_0x34139a[_0x9838b0(0x257)]==_0x9838b0(0x259))&&await logger['full'](_0x9838b0(0x109)+_0x34139a[_0x9838b0(0x2c1)]+'\x20|\x20'+_0x34139a['botname']);}else!newBot&&logger[_0x9838b0(0x216)](_0x9838b0(0x110));if(newBot)addBot();logger[_0x9838b0(0x216)](_0x9838b0(0x156)),logger[_0x9838b0(0x216)](''),await logger['debug'](_0x9838b0(0x2d2)+nodeversion),await logger['debug']('Network\x20Interfaces:',_0x2df28d);}function startSocket(){io['on']('connection',_0x363303=>{const _0x10619f=_0x5bc5;let _0x4d3530,_0x5c37a2,_0x21a56e,_0x11c188,_0x19e63b;const _0x412d49=_0x363303[_0x10619f(0x260)]['headers'][_0x10619f(0x202)];_0x5c37a2=_0x412d49['match'](/bot[0-9]{3}/);if(_0x5c37a2)_0x21a56e=_0x5c37a2[0x0]['match'](/[0-9]{3}/);if(_0x21a56e)_0x4d3530=_0x21a56e[0x0];else _0x4d3530='botmanager';const _0x387774=_0x363303[_0x10619f(0x260)][_0x10619f(0x269)][_0x10619f(0x111)];if(!_0x387774)_0x363303[_0x10619f(0x1dd)](_0x10619f(0x257),{'publicKey':secure['publicKey']});else{_0x11c188=timelyDecrypt(_0x387774,![]);if(!_0x11c188)_0x363303['emit']('status',{'publicKey':secure[_0x10619f(0x1b4)]});else{_0x19e63b=normalizeIP(_0x363303[_0x10619f(0x112)][_0x10619f(0x1ad)])[_0x10619f(0x16e)];if(!devices[_0x11c188])devices[_0x11c188]={'uuid':_0x11c188,'access':{'token':null}};devices[_0x11c188]['ip']=_0x19e63b;const _0x5edcad=addClient(_0x363303['id'],_0x11c188,_0x4d3530);setAccess(_0x5edcad),emitMessages(),_0x363303['on'](_0x10619f(0x10d),_0x5b12d5=>{const _0xaa9ef7=_0x10619f,_0x30cd2c=timelyDecrypt(_0x5b12d5['password']);if(_0x30cd2c){_0x5b12d5={'username':_0x5b12d5['username'],'password':_0x30cd2c},devices[_0x11c188][_0xaa9ef7(0x23c)]=validateCredentials(_0x5b12d5,_0x11c188);if(devices[_0x11c188][_0xaa9ef7(0x23c)][_0xaa9ef7(0x2a5)]==![]&&devices[_0x11c188][_0xaa9ef7(0x23c)][_0xaa9ef7(0x120)]==_0xaa9ef7(0x24a))_0x363303['emit']('status',{'access':devices[_0x11c188]['access']}),loginAccess2FA(_0x11c188,_0x19e63b);else{if(devices[_0x11c188][_0xaa9ef7(0x23c)][_0xaa9ef7(0x2a5)]==![]&&devices[_0x11c188][_0xaa9ef7(0x23c)]['reason']==_0xaa9ef7(0x227))_0x363303[_0xaa9ef7(0x1dd)](_0xaa9ef7(0x257),{'access':devices[_0x11c188][_0xaa9ef7(0x23c)]});else devices[_0x11c188][_0xaa9ef7(0x23c)]['allow']&&devices[_0x11c188]['access']['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x11c188)[_0xaa9ef7(0x225)](_0xca96b8=>{setAccess(_0xca96b8);}),logger['debug'](_0xaa9ef7(0x1c5)+_0x11c188[_0xaa9ef7(0x1fb)](-0x8)),setTokenRefresh(_0x11c188),setSessionTimeout(_0xaa9ef7(0x10d),_0x11c188));}}else logger['full'](_0xaa9ef7(0x28a));}),_0x363303['on']('reset-password',()=>{resetPassword();}),_0x363303['on'](_0x10619f(0x16f),_0x5d1f8c=>{removeClient(_0x363303['id']);}),_0x4d3530==_0x10619f(0x2a0)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3d6db3){const _0x44f917=_0x72ca9b;if(_0x3d6db3!='botmanager'&&config[_0x44f917(0x1b6)]!=''){if(pid[_0x3d6db3])pid[_0x3d6db3]['send']({'function':'initclient','args':null});}_0x3d6db3!=_0x44f917(0x2a0)&&broadcastToBots('bots',JSON[_0x44f917(0x236)](config));}function reloadBotManager(){const _0x47d503=_0x72ca9b;getClientsWithBotID(_0x47d503(0x2a0))[_0x47d503(0x225)](_0x57eaab=>{const _0xddae59=_0x47d503;getSocket(_0x57eaab['id'])[_0xddae59(0x1dd)](_0xddae59(0x257),{'access':{'allow':![],'reason':_0xddae59(0x152),'token':null}});});}function getSocket(_0x5603dd){const _0x218c43=_0x72ca9b;return io[_0x218c43(0x27c)]['sockets']['get'](_0x5603dd);}function setAccess(_0x66bc4b){const _0x10971f=_0x72ca9b,_0x4f0b12=getSocket(_0x66bc4b['id']),_0x2e9eaa=_0x66bc4b[_0x10971f(0x123)],_0x2ddb06=_0x66bc4b['bot'];devices[_0x2e9eaa]['access']=validateAccess(devices[_0x2e9eaa][_0x10971f(0x23c)][_0x10971f(0x17d)],_0x2e9eaa),logger['debug'](_0x10971f(0x2cd)+devices[_0x2e9eaa][_0x10971f(0x23c)]['reason']+_0x10971f(0x1bd)+_0x66bc4b['id'][_0x10971f(0x1fb)](-0x8)+_0x10971f(0x21a)+_0x2e9eaa[_0x10971f(0x1fb)](-0x8)),_0x4f0b12[_0x10971f(0x2ac)](_0x2e9eaa);if(devices[_0x2e9eaa]['access'][_0x10971f(0x2a5)]){_0x4f0b12[_0x10971f(0x2ac)](_0x2ddb06);if(_0x2ddb06==_0x10971f(0x2a0))initializeSocketBotManager(_0x4f0b12);else initializeSocketBot(_0x4f0b12);initClient(_0x2ddb06);}devices[_0x2e9eaa][_0x10971f(0x23c)]['token']&&devices[_0x2e9eaa][_0x10971f(0x23c)][_0x10971f(0x120)]==_0x10971f(0x118)&&setSessionTimeout(_0x10971f(0x137),_0x2e9eaa),devices[_0x2e9eaa][_0x10971f(0x23c)][_0x10971f(0x17d)]&&devices[_0x2e9eaa]['access'][_0x10971f(0x120)]==_0x10971f(0x10e)&&setSessionTimeout(_0x10971f(0x10d),_0x2e9eaa),_0x4f0b12['emit']('status',{'status':_0x66bc4b[_0x10971f(0x182)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2e9eaa][_0x10971f(0x23c)],'externalip':devices[_0x2e9eaa]['ip'],'publicKey':secure[_0x10971f(0x1b4)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x2e9eaa][_0x10971f(0x23c)][_0x10971f(0x2a5)]==![]&&devices[_0x2e9eaa][_0x10971f(0x23c)][_0x10971f(0x120)]==_0x10971f(0x215)&&temporaryAccess2FA(_0x2e9eaa,devices[_0x2e9eaa]['ip']);}function setSessionTimeout(_0x1ef830,_0x32514b){const _0xa22a08=_0x72ca9b;let _0x4a49c8;if(_0x1ef830==_0xa22a08(0x10d))_0x4a49c8=loginExpiry*0x3c*0x3e8;else _0x4a49c8=devices[_0x32514b][_0xa22a08(0x1b9)][_0xa22a08(0x2b5)]*0x3c*0x3e8-(new Date()[_0xa22a08(0x19a)]()-devices[_0x32514b][_0xa22a08(0x1b9)]['timestamp']);if(devices[_0x32514b][_0xa22a08(0x1e3)])clearTimeout(devices[_0x32514b][_0xa22a08(0x1e3)]);devices[_0x32514b]['pidExpireLogin']=setTimeout(()=>{const _0x12fcba=_0xa22a08;if(devices[_0x32514b][_0x12fcba(0x174)])clearTimeout(devices[_0x32514b][_0x12fcba(0x174)]);removeSocketListeners(_0x32514b),addBlacklist(_0x32514b),devices[_0x32514b]['telegramIpApproval']=null,devices[_0x32514b][_0x12fcba(0x201)]=null,devices[_0x32514b][_0x12fcba(0x23c)][_0x12fcba(0x17d)]=null,logger[_0x12fcba(0x20a)](_0x12fcba(0x105)+_0x32514b[_0x12fcba(0x1fb)](-0x8)),devices[_0x32514b][_0x12fcba(0x23c)]=validateAccess(devices[_0x32514b]['access'][_0x12fcba(0x17d)],_0x32514b),!(devices[_0x32514b][_0x12fcba(0x23c)][_0x12fcba(0x2a5)]&&devices[_0x32514b][_0x12fcba(0x23c)][_0x12fcba(0x120)]==_0x12fcba(0x1b7))&&(_0x1ef830==_0x12fcba(0x10d)?io['to'](_0x32514b)[_0x12fcba(0x1dd)](_0x12fcba(0x257),{'access':{'allow':![],'reason':_0x12fcba(0x20f),'token':null}}):io['to'](_0x32514b)[_0x12fcba(0x1dd)](_0x12fcba(0x257),{'access':{'allow':![],'reason':_0x12fcba(0x168),'token':null}})),devices[_0x32514b]['access']['token']=null;},_0x4a49c8);}function setTokenRefresh(_0x1bb253){const _0x59dc88=_0x72ca9b;if(devices[_0x1bb253][_0x59dc88(0x174)])clearTimeout(devices[_0x1bb253][_0x59dc88(0x174)]);devices[_0x1bb253][_0x59dc88(0x174)]=setTimeout(()=>{const _0x40146a=_0x59dc88;getClientsWithUuid(_0x1bb253)['length']!=0x0?(devices[_0x1bb253][_0x40146a(0x23c)]=refreshToken(_0x1bb253),io['to'](_0x1bb253)[_0x40146a(0x1dd)](_0x40146a(0x257),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1bb253][_0x40146a(0x23c)],'externalip':devices[_0x1bb253]['ip'],'publicKey':secure[_0x40146a(0x1b4)],'validInstallation':validInstallation}),setTokenRefresh(_0x1bb253)):clearTimeout(devices[_0x1bb253][_0x40146a(0x174)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4880b5){const _0x21ee4a=_0x72ca9b,_0x2cade0=getClient(_0x4880b5['id'])[_0x21ee4a(0x123)];_0x4880b5[_0x21ee4a(0x1dd)](_0x21ee4a(0x166),config),_0x4880b5[_0x21ee4a(0x1dd)]('settings',cleanSettings()),_0x4880b5['on']('add-bot',_0x36bceb=>{const _0x2df94f=_0x21ee4a;if(validateAccess(_0x36bceb,_0x2cade0)['allow'])addBot();else logger[_0x2df94f(0x21f)](_0x2df94f(0xfe));}),_0x4880b5['on'](_0x21ee4a(0x2c7),(_0x2195ad,_0x5980ff)=>{const _0x5409cf=_0x21ee4a;if(validateAccess(_0x5980ff,_0x2cade0)[_0x5409cf(0x2a5)])toggleBot(_0x2195ad[_0x5409cf(0x2c1)],_0x2195ad[_0x5409cf(0x257)],_0x2195ad['live']);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4880b5['on']('toggle-bot-mode',(_0x16e1fc,_0x4cb54d)=>{const _0x5e0657=_0x21ee4a;if(validateAccess(_0x4cb54d,_0x2cade0)[_0x5e0657(0x2a5)])toggleBotMode(_0x16e1fc);else logger[_0x5e0657(0x21f)](_0x5e0657(0x266));}),_0x4880b5['on'](_0x21ee4a(0x2c9),(_0x88093e,_0x32c0ae)=>{const _0x4db462=_0x21ee4a;if(validateAccess(_0x32c0ae,_0x2cade0)[_0x4db462(0x2a5)])deleteBot(_0x88093e);else logger[_0x4db462(0x21f)](_0x4db462(0x1f7));}),_0x4880b5['on']('store-settings',(_0x40bd52,_0x1d8dab)=>{const _0x6b95ad=_0x21ee4a;if(validateAccess(_0x1d8dab,_0x2cade0)[_0x6b95ad(0x2a5)])storeSettings(_0x40bd52,!![]);else logger[_0x6b95ad(0x21f)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x4880b5['on'](_0x21ee4a(0x1e5),_0x5ee54b=>{const _0x6cd830=_0x21ee4a;if(validateAccess(_0x5ee54b,_0x2cade0)[_0x6cd830(0x2a5)])updateBB(_0x6cd830(0x219));else logger[_0x6cd830(0x21f)](_0x6cd830(0x2a3));}),_0x4880b5['on'](_0x21ee4a(0x138),_0x2137b7=>{const _0x2f4b77=_0x21ee4a;if(validateAccess(_0x2137b7,_0x2cade0)[_0x2f4b77(0x2a5)])updateBB('reinstall');else logger['full'](_0x2f4b77(0x1f0));}),_0x4880b5['on']('get-backup-files',_0x581d73=>{const _0x57b74c=_0x21ee4a;if(validateAccess(_0x581d73,_0x2cade0)[_0x57b74c(0x2a5)]){const _0x2133b4=getClient(_0x4880b5['id']);if(_0x2133b4)getBackupFiles(_0x2133b4[_0x57b74c(0x123)]);else logger[_0x57b74c(0x21f)](_0x57b74c(0xf0));}else logger[_0x57b74c(0x21f)](_0x57b74c(0x178));}),_0x4880b5['on']('restore-backup-file',(_0x204c39,_0x2404cc)=>{const _0xd04a53=_0x21ee4a;if(validateAccess(_0x2404cc,_0x2cade0)[_0xd04a53(0x2a5)])restoreBackupFile(_0x204c39);else logger[_0xd04a53(0x21f)](_0xd04a53(0x2b2));}),_0x4880b5['on']('get-messages',_0x1800c7=>{const _0x5d984f=_0x21ee4a;if(validateAccess(_0x1800c7,_0x2cade0)[_0x5d984f(0x2a5)])getMessages();else logger['full'](_0x5d984f(0x26b));}),_0x4880b5['on']('confirm-message',(_0x48f366,_0x4043f8)=>{const _0x80eddb=_0x21ee4a;if(validateAccess(_0x4043f8,_0x2cade0)[_0x80eddb(0x2a5)])confirmMessage(_0x48f366);else logger['full'](_0x80eddb(0x192));}),_0x4880b5['on'](_0x21ee4a(0x20e),_0x470caf=>{const _0x30f0fc=_0x21ee4a;if(validateAccess(_0x470caf,_0x2cade0)[_0x30f0fc(0x2a5)]){if(devices[_0x2cade0][_0x30f0fc(0x174)])clearTimeout(devices[_0x2cade0][_0x30f0fc(0x174)]);if(devices[_0x2cade0]['pidExpireLogin'])clearTimeout(devices[_0x2cade0]['pidExpireLogin']);removeSocketListeners(getClient(_0x4880b5['id'])[_0x30f0fc(0x123)]),addBlacklist(_0x2cade0),devices[_0x2cade0][_0x30f0fc(0x1b9)]=null,devices[_0x2cade0][_0x30f0fc(0x201)]=null,devices[_0x2cade0][_0x30f0fc(0x23c)]['token']=null,logger[_0x30f0fc(0x20a)](_0x30f0fc(0x28f)+_0x2cade0[_0x30f0fc(0x1fb)](-0x8)),io['to'](getClient(_0x4880b5['id'])['uuid'])[_0x30f0fc(0x1dd)](_0x30f0fc(0x257),{'access':{'allow':![],'reason':_0x30f0fc(0x107),'token':null}});}else logger['full'](_0x30f0fc(0x29e));});}function initializeSocketBot(_0x555bbb){const _0x1326c6=_0x72ca9b,_0x19e5d9=getClient(_0x555bbb['id'])['bot'],_0x198902=getClient(_0x555bbb['id'])[_0x1326c6(0x123)];_0x555bbb['on'](_0x1326c6(0x134),(_0x36e1fa,_0x134892)=>{const _0x1f2548=_0x1326c6;if(validateAccess(_0x134892,_0x198902)[_0x1f2548(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x1f2548(0x165)]({'function':_0x1f2548(0x135),'args':_0x36e1fa});}else logger[_0x1f2548(0x21f)](_0x1f2548(0x186));}),_0x555bbb['on']('delete-alerts',(_0x34985e,_0x29f5a6)=>{const _0x292f54=_0x1326c6;if(validateAccess(_0x29f5a6,_0x198902)[_0x292f54(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x292f54(0x165)]({'function':_0x292f54(0x11a),'args':_0x34985e});}else logger[_0x292f54(0x21f)](_0x292f54(0x146));}),_0x555bbb['on']('get-portfolio',(_0x181699,_0x3ff741)=>{const _0x1ec074=_0x1326c6;if(validateAccess(_0x3ff741,_0x198902)['allow']){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x1ec074(0x165)]({'function':_0x1ec074(0x21e),'args':_0x181699});}else logger[_0x1ec074(0x21f)](_0x1ec074(0x212));}),_0x555bbb['on'](_0x1326c6(0x250),(_0x15b486,_0x16e7e3)=>{const _0x14c475=_0x1326c6;if(validateAccess(_0x16e7e3,_0x198902)[_0x14c475(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x14c475(0x165)]({'function':_0x14c475(0x279),'args':_0x15b486});}else logger[_0x14c475(0x21f)](_0x14c475(0x15b));}),_0x555bbb['on'](_0x1326c6(0x280),(_0x2bdd3e,_0x15cdef)=>{const _0x32ea4a=_0x1326c6;if(validateAccess(_0x15cdef,_0x198902)[_0x32ea4a(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x32ea4a(0x165)]({'function':'storeHeadless','args':_0x2bdd3e});}else logger[_0x32ea4a(0x21f)](_0x32ea4a(0x140));}),_0x555bbb['on']('store-fiat',(_0x393dca,_0x232431)=>{const _0x210d06=_0x1326c6;if(validateAccess(_0x232431,_0x198902)[_0x210d06(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9]['send']({'function':_0x210d06(0x17e),'args':_0x393dca});}else logger[_0x210d06(0x21f)](_0x210d06(0x1df));}),_0x555bbb['on'](_0x1326c6(0x188),_0x261ad4=>{const _0x3a7155=_0x1326c6;if(validateAccess(_0x261ad4,_0x198902)['allow']){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x3a7155(0x165)]({'function':'resetHistory','args':null});}else logger[_0x3a7155(0x21f)](_0x3a7155(0x276));}),_0x555bbb['on'](_0x1326c6(0x14b),_0x51ca76=>{const _0x1a8ba3=_0x1326c6;if(validateAccess(_0x51ca76,_0x198902)['allow']){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x1a8ba3(0x165)]({'function':_0x1a8ba3(0x29b),'args':null});}else logger[_0x1a8ba3(0x21f)](_0x1a8ba3(0x1b5));}),_0x555bbb['on']('place-order',(_0x3b0e79,_0x1b185f)=>{const _0x43f7b9=_0x1326c6;if(validateAccess(_0x1b185f,_0x198902)[_0x43f7b9(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x43f7b9(0x165)]({'function':_0x43f7b9(0x131),'args':_0x3b0e79});}else logger[_0x43f7b9(0x21f)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x555bbb['on'](_0x1326c6(0x191),_0x2e3792=>{const _0x28d2e7=_0x1326c6;if(validateAccess(_0x2e3792,_0x198902)[_0x28d2e7(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9][_0x28d2e7(0x165)]({'function':'cancelLoading','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x555bbb['on']('show-config',_0x183b75=>{const _0x33ce50=_0x1326c6;if(validateAccess(_0x183b75,_0x198902)[_0x33ce50(0x2a5)]){if(pid[_0x19e5d9])pid[_0x19e5d9]['send']({'function':_0x33ce50(0x24f),'args':null});}else logger[_0x33ce50(0x21f)](_0x33ce50(0x130));}),_0x555bbb['on'](_0x1326c6(0x1e5),_0x222bba=>{const _0x551e5f=_0x1326c6;if(validateAccess(_0x222bba,_0x198902)[_0x551e5f(0x2a5)])updateBB(_0x551e5f(0x219));else logger[_0x551e5f(0x21f)](_0x551e5f(0x2a3));}),_0x555bbb['on']('get-messages',_0x5c849f=>{const _0x470de4=_0x1326c6;if(validateAccess(_0x5c849f,_0x198902)[_0x470de4(0x2a5)])getMessages();else logger[_0x470de4(0x21f)](_0x470de4(0x26b));}),_0x555bbb['on'](_0x1326c6(0x1a6),(_0x2b78fc,_0x47e4b9)=>{const _0x1361d1=_0x1326c6;if(validateAccess(_0x47e4b9,_0x198902)[_0x1361d1(0x2a5)])confirmMessage(_0x2b78fc);else logger[_0x1361d1(0x21f)](_0x1361d1(0x192));}),_0x555bbb['on'](_0x1326c6(0x20e),_0x5c8e60=>{const _0x508fcb=_0x1326c6;if(validateAccess(_0x5c8e60,_0x198902)[_0x508fcb(0x2a5)]){if(devices[_0x198902][_0x508fcb(0x174)])clearTimeout(devices[_0x198902][_0x508fcb(0x174)]);if(devices[_0x198902][_0x508fcb(0x1e3)])clearTimeout(devices[_0x198902][_0x508fcb(0x1e3)]);removeSocketListeners(getClient(_0x555bbb['id'])[_0x508fcb(0x123)]),addBlacklist(_0x198902),devices[_0x198902]['telegramIpApproval']=null,devices[_0x198902][_0x508fcb(0x201)]=null,devices[_0x198902]['access'][_0x508fcb(0x17d)]=null,logger[_0x508fcb(0x20a)]('Logged\x20out\x20user\x20...'+_0x198902['slice'](-0x8)),io['to'](getClient(_0x555bbb['id'])[_0x508fcb(0x123)])[_0x508fcb(0x1dd)](_0x508fcb(0x257),{'access':{'allow':![],'reason':_0x508fcb(0x107),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x342f27){const _0x2de1d8=_0x72ca9b;getClientsWithUuid(_0x342f27)[_0x2de1d8(0x225)](_0x203802=>{getSocket(_0x203802['id'])['removeAllListeners']();});}function cleanSettings(){const _0x165a14=_0x72ca9b;let _0x5a9cad=settings;return settings['telegramToken']&&settings[_0x165a14(0x22b)]!=''&&(_0x5a9cad={..._0x5a9cad,'telegramToken':_0x165a14(0x149)}),settings[_0x165a14(0xf7)]&&settings['bbPassword']!=''&&(_0x5a9cad={..._0x5a9cad,'bbPassword':_0x165a14(0x149)}),(settings[_0x165a14(0xf7)]&&settings['bbPassword']==_0x165a14(0x161)||settings[_0x165a14(0x22b)]&&settings[_0x165a14(0x22b)]==_0x165a14(0x161))&&(_0x5a9cad={..._0x5a9cad,'restored':{'password':settings[_0x165a14(0xf7)]==_0x165a14(0x161),'telegram':settings[_0x165a14(0x22b)]==_0x165a14(0x161)}}),_0x5a9cad;}async function updateBB(_0x5d130f){const _0xe09803=_0x72ca9b;await backupConfigFiles(),installingUpdate=!![],config[_0xe09803(0x225)](_0x3bc78c=>{const _0x493a24=_0xe09803;restartBot(_0x3bc78c[_0x493a24(0x2c1)]);});if(_0x5d130f==_0xe09803(0x219))process[_0xe09803(0x165)]({'update':!![],'environment':environment},_0x6f9db5=>{});else _0x5d130f==_0xe09803(0x277)&&process[_0xe09803(0x165)]({'reinstall':!![],'environment':environment},_0x5aa49e=>{});}function startBot(_0x3c8932,_0x2b9b12,_0x5b39f2){const _0x895d99=_0x72ca9b;if(debugging)_0x3c8932[_0x895d99(0xfa)]('-d');let _0x215cce=![];const _0x476069=_0x3c8932[0x0];_0x2b9b12={..._0x2b9b12,'stdio':[_0x895d99(0x290),_0x895d99(0x290),_0x895d99(0x290),'ipc']},pid[_0x476069]=childProcess[_0x895d99(0x2c8)](botfile,_0x3c8932,_0x2b9b12),pid[_0x476069]['on'](_0x895d99(0x19f),_0xd2d314=>{const _0x486974=_0x895d99;switch(Object[_0x486974(0x11e)](_0xd2d314)[0x0]){case'botname':updateBotName(_0x476069,_0xd2d314['botname']);break;case _0x486974(0x23e):updateBotManager();break;case _0x486974(0x257):updateStatus(_0x476069,_0xd2d314['status']);break;case _0x486974(0x18d):updateLive(_0x476069,_0xd2d314['live']);break;case'started':updateLive(_0x476069,_0xd2d314[_0x486974(0x24b)]),io['to'](_0x476069)[_0x486974(0x1dd)](_0x486974(0x257),{'access':{'allow':![],'reason':_0x486974(0x152),'token':null}});break;case'stop':_0xd2d314[_0x486974(0x16d)]=='restart'&&restartBot(_0x476069);_0xd2d314[_0x486974(0x16d)]=='kill'&&toggleBot(_0x476069,_0x486974(0x1ff),_0x486974(0x24e));break;case _0x486974(0x213):sendTelegram(_0x476069,_0xd2d314[_0x486974(0x213)]);break;case _0x486974(0x1b3):sendTelegramMsg(_0xd2d314['telegrammsg']);break;case _0x486974(0xf4):io['to'](_0x476069)[_0x486974(0x1dd)](_0xd2d314[_0x486974(0xf4)],_0xd2d314['args']);break;}}),pid[_0x476069]['on'](_0x895d99(0x1e2),function(_0x5e373b){if(_0x215cce)return;_0x215cce=!![],_0x5b39f2(_0x5e373b);}),pid[_0x476069]['on'](_0x895d99(0x2bc),async function(_0x26d634){const _0xc8a14b=_0x895d99;if(installingUpdate)return;if(_0x215cce)return;_0x215cce=!![],_0x5b39f2(null);const _0x560a46=dbConfig[_0xc8a14b(0x10f)](_0xc8a14b(0x166))[_0xc8a14b(0x238)]({'botID':_0x476069})['value']();_0x560a46&&(_0x560a46[_0xc8a14b(0x257)]==_0xc8a14b(0x234)||_0x560a46[_0xc8a14b(0x257)]==_0xc8a14b(0x2c2))&&(await sleep(0x3e8),updateLive(_0x476069,_0xc8a14b(0x24e)),logger[_0xc8a14b(0x21f)](_0xc8a14b(0x286)+_0x476069),startBot([_0x476069,userID],{'cwd':bbpath},function(_0x3f6be0){if(_0x3f6be0)logger['full'](_0x3f6be0);}));});}function stopBot(_0x5e1a69){const _0x3afd36=_0x72ca9b;getClientsWithBotID(_0x5e1a69)[_0x3afd36(0x225)](_0x2eacb6=>{const _0x53e57f=_0x3afd36;getSocket(_0x2eacb6['id'])[_0x53e57f(0x16f)](!![]),removeClient(_0x2eacb6['id']);}),pid[_0x5e1a69]&&(pid[_0x5e1a69]['kill'](),pid[_0x5e1a69]=null);}function restartBot(_0x282d18){const _0x29a1de=_0x72ca9b;if(pid[_0x282d18])pid[_0x282d18][_0x29a1de(0x167)]();}function addBot(){const _0x4c7be5=_0x72ca9b;let _0x120855;for(let _0x4edd30=0x1;_0x4edd30<0x3e9;_0x4edd30++){_0x120855=_0x4edd30['toString']()['padStart'](0x3,'0');let _0x3dc79c=config[_0x4c7be5(0x238)](_0x2f0605=>_0x2f0605[_0x4c7be5(0x2c1)]==_0x120855);if(!_0x3dc79c)break;}if(_0x120855==='1000'){logger[_0x4c7be5(0x21f)](_0x4c7be5(0x205));return;}logger[_0x4c7be5(0x21f)](_0x4c7be5(0x1c0)+_0x120855),dbConfig[_0x4c7be5(0x10f)](_0x4c7be5(0x166))[_0x4c7be5(0xfa)]({'botID':_0x120855,'botname':'Bot\x20'+_0x120855,'status':'new','live':''})[_0x4c7be5(0x2a2)](),startBot([_0x120855,userID],{'cwd':bbpath},function(_0x331cb4){const _0x16b181=_0x4c7be5;if(_0x331cb4)logger[_0x16b181(0x21f)](_0x331cb4);}),config=getConfiguration(),io['to'](_0x4c7be5(0x2a0))[_0x4c7be5(0x1dd)](_0x4c7be5(0x166),config),broadcastToBots(_0x4c7be5(0x166),JSON[_0x4c7be5(0x236)](config));}function deleteBot(_0x38bd1a){const _0x348ab1=_0x72ca9b;getClientsWithBotID(_0x38bd1a)[_0x348ab1(0x225)](_0x3a2458=>{getSocket(_0x3a2458['id'])['disconnect'](!![]),removeClient(_0x3a2458['id']);}),dbConfig[_0x348ab1(0x10f)](_0x348ab1(0x166))[_0x348ab1(0x223)]({'botID':_0x38bd1a})[_0x348ab1(0x2a2)](),logger[_0x348ab1(0x21f)](_0x348ab1(0x1e9)+_0x38bd1a),stopBot(_0x38bd1a);try{if(fs['existsSync'](path[_0x348ab1(0x2ac)](configpath,'bot-'+_0x38bd1a+_0x348ab1(0x1cb))))fs[_0x348ab1(0x104)](path['join'](configpath,'bot-'+_0x38bd1a+_0x348ab1(0x1cb)));if(fs[_0x348ab1(0x194)](path['join'](configpath,_0x348ab1(0xfc)+_0x38bd1a+'-events.json')))fs['unlinkSync'](path[_0x348ab1(0x2ac)](configpath,_0x348ab1(0xfc)+_0x38bd1a+_0x348ab1(0x1ef)));if(fs[_0x348ab1(0x194)](path['join'](configpath,_0x348ab1(0xfc)+_0x38bd1a+_0x348ab1(0x125))))fs[_0x348ab1(0x104)](path[_0x348ab1(0x2ac)](configpath,_0x348ab1(0xfc)+_0x38bd1a+'-performance.json'));if(fs[_0x348ab1(0x194)](path[_0x348ab1(0x2ac)](configpath,'bot-'+_0x38bd1a+'-results.json')))fs[_0x348ab1(0x104)](path[_0x348ab1(0x2ac)](configpath,'bot-'+_0x38bd1a+_0x348ab1(0x1c3)));}catch(_0x234a4a){if(_0x234a4a)logger[_0x348ab1(0x21f)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x234a4a);}config=getConfiguration(),io['to'](_0x348ab1(0x2a0))[_0x348ab1(0x1dd)](_0x348ab1(0x166),config),broadcastToBots(_0x348ab1(0x166),JSON[_0x348ab1(0x236)](config));}function toggleBot(_0x4d3584,_0x2440b6,_0x1fefa9){const _0x255d35=_0x72ca9b;dbConfig[_0x255d35(0x10f)](_0x255d35(0x166))[_0x255d35(0x238)]({'botID':_0x4d3584})[_0x255d35(0x176)]({'status':_0x2440b6})[_0x255d35(0x176)]({'live':_0x1fefa9})['write']();if(_0x2440b6==_0x255d35(0x234)||_0x2440b6=='new')logger[_0x255d35(0x21f)](_0x255d35(0x2ce)+_0x4d3584),startBot([_0x4d3584,userID],{'cwd':bbpath},function(_0x31d07a){if(_0x31d07a)logger['full'](_0x31d07a);});else(_0x2440b6==_0x255d35(0x1ff)||_0x2440b6==_0x255d35(0x259))&&(logger[_0x255d35(0x21f)](_0x255d35(0x1a3)+_0x4d3584),stopBot(_0x4d3584));config=getConfiguration(),io['to'](_0x255d35(0x2a0))[_0x255d35(0x1dd)](_0x255d35(0x166),config),broadcastToBots(_0x255d35(0x166),JSON[_0x255d35(0x236)](config));}function toggleStatus(_0x187111){const _0x14e1de=_0x72ca9b;let _0x2f2343=dbConfig['get'](_0x14e1de(0x166))['find']({'botID':_0x187111})[_0x14e1de(0x14d)](),_0x540ffc;if(_0x2f2343['status']===_0x14e1de(0x234))_0x540ffc=_0x14e1de(0x1ff);else{if(_0x2f2343[_0x14e1de(0x257)]==='new')_0x540ffc=_0x14e1de(0x259);else{if(_0x2f2343[_0x14e1de(0x257)]===_0x14e1de(0x259))_0x540ffc=_0x14e1de(0x2c2);else{if(_0x2f2343['status']==='disabled')_0x540ffc=_0x14e1de(0x234);}}}return _0x540ffc;}function updateStatus(_0x30cca3,_0x4da62d){const _0x30a045=_0x72ca9b;dbConfig[_0x30a045(0x10f)](_0x30a045(0x166))[_0x30a045(0x238)]({'botID':_0x30cca3})[_0x30a045(0x176)]({'status':_0x4da62d})[_0x30a045(0x2a2)](),config=getConfiguration(),io['to'](_0x30a045(0x2a0))['emit'](_0x30a045(0x166),config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0x2ec82d,_0x3bc7c2){const _0x1964b7=_0x72ca9b;dbConfig['get']('bots')[_0x1964b7(0x238)]({'botID':_0x2ec82d})[_0x1964b7(0x176)]({'live':_0x3bc7c2})['write'](),config=getConfiguration(),io['to'](_0x1964b7(0x2a0))[_0x1964b7(0x1dd)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x819b7d,_0x4772c7){const _0x2e4c38=_0x72ca9b;dbConfig[_0x2e4c38(0x10f)]('bots')[_0x2e4c38(0x238)]({'botID':_0x819b7d})['assign']({'botname':_0x4772c7})[_0x2e4c38(0x2a2)](),config=getConfiguration(),io['to'](_0x2e4c38(0x2a0))[_0x2e4c38(0x1dd)]('bots',config),broadcastToBots(_0x2e4c38(0x166),JSON['stringify'](config));}function updateBotManager(){const _0x465493=_0x72ca9b;config=getConfiguration(),io['to']('botmanager')[_0x465493(0x1dd)](_0x465493(0x166),config),broadcastToBots(_0x465493(0x166),JSON['stringify'](config));}function _0x5bc5(_0x8141e0,_0x7a2558){const _0x1d9df4=_0xc2bd();return _0x5bc5=function(_0x52d855,_0x348241){_0x52d855=_0x52d855-0xed;let _0xc2bdb5=_0x1d9df4[_0x52d855];return _0xc2bdb5;},_0x5bc5(_0x8141e0,_0x7a2558);}function toggleBotMode(_0x1cf3c6){const _0x272c16=_0x72ca9b;if(pid[_0x1cf3c6])pid[_0x1cf3c6][_0x272c16(0x165)]({'function':_0x272c16(0x170),'args':null});else{const _0x7e5e53=configpath+'bot-'+_0x1cf3c6+_0x272c16(0x1cb),_0x19036c=fs['readFileSync'](_0x7e5e53),_0x39e162=JSON['parse'](_0x19036c),_0x369a31=_0x39e162[_0x272c16(0x243)][0x0]['headless'];_0x39e162['bot'][0x0]['headless']=!_0x369a31;const _0x45ec25=JSON[_0x272c16(0x236)](_0x39e162,null,0x2);fs['writeFileSync'](_0x7e5e53,_0x45ec25),config=getConfiguration(),io['to'](_0x272c16(0x2a0))[_0x272c16(0x1dd)](_0x272c16(0x166),config),broadcastToBots(_0x272c16(0x166),JSON[_0x272c16(0x236)](config));}}function telegramError(_0x417e62){const _0x5e2e15=_0x72ca9b;logger[_0x5e2e15(0x216)](getTimeStamp()+_0x5e2e15(0x2af));}function validateTelegram(_0x130660){const _0x2af1ef=_0x72ca9b;if(_0x130660[_0x2af1ef(0x18f)][_0x2af1ef(0x26a)]!=settings[_0x2af1ef(0x2c4)]&&'@'+_0x130660[_0x2af1ef(0x18f)]['username']!=settings['telegramUsername'])return tgBot['sendMessage'](_0x130660[_0x2af1ef(0x2ca)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2af1ef(0x25e)})[_0x2af1ef(0x214)](_0x98a711=>{telegramError(_0x98a711);}),![];return!![];}async function initTelegram(){const _0x5ca4ca=_0x72ca9b;if(tgBot)tgBot[_0x5ca4ca(0x2d0)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5ca4ca(0x22b)],{'polling':!![]});let _0x41ef00=_0x5ca4ca(0x10a);_0x41ef00+='\x0a',_0x41ef00+=_0x5ca4ca(0x298),_0x41ef00+=_0x5ca4ca(0x19d),_0x41ef00+=_0x5ca4ca(0x17f),_0x41ef00+=_0x5ca4ca(0x273),_0x41ef00+=_0x5ca4ca(0x18c),_0x41ef00+=_0x5ca4ca(0x281),_0x41ef00+=_0x5ca4ca(0x254),_0x41ef00+='/names\x20-\x20show\x20bot\x20names\x0a',_0x41ef00+=_0x5ca4ca(0x155),_0x41ef00+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x41ef00+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x41ef00+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x41ef00+=_0x5ca4ca(0x1f3),_0x41ef00+=_0x5ca4ca(0x1f1);let _0x5cb237=_0x5ca4ca(0x229);_0x5cb237+='\x0a',_0x5cb237+=_0x41ef00,tgBot['onText'](/\/start/,_0x291f5b=>{const _0x124057=_0x5ca4ca;if(!validateTelegram(_0x291f5b))return;if(settings[_0x124057(0x2b0)]!=_0x291f5b[_0x124057(0x2ca)]['id'])updateSetting(_0x124057(0x2b0),_0x291f5b[_0x124057(0x2ca)]['id']);updateSetting(_0x124057(0x115),!![]),tgBot[_0x124057(0x267)](_0x291f5b[_0x124057(0x2ca)]['id'],_0x5cb237)[_0x124057(0x214)](_0xac090b=>{telegramError(_0xac090b);});}),tgBot[_0x5ca4ca(0x19b)](/\/enable/,_0x3cbfad=>{const _0xbf49b8=_0x5ca4ca;if(!validateTelegram(_0x3cbfad))return;if(settings[_0xbf49b8(0x2b0)]!=_0x3cbfad[_0xbf49b8(0x2ca)]['id'])updateSetting(_0xbf49b8(0x2b0),_0x3cbfad[_0xbf49b8(0x2ca)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0xbf49b8(0x267)](_0x3cbfad[_0xbf49b8(0x2ca)]['id'],'Notifications\x20enabled')['catch'](_0x396e2a=>{telegramError(_0x396e2a);});}),tgBot[_0x5ca4ca(0x19b)](/\/config/,async _0x27fb24=>{const _0x312e03=_0x5ca4ca;if(!validateTelegram(_0x27fb24))return;tgBot[_0x312e03(0x1a5)](_0x312e03(0x282)),tgBot[_0x312e03(0x267)](_0x27fb24['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':'Alerts','callback_data':_0x312e03(0x2be)},{'text':_0x312e03(0x240),'callback_data':_0x312e03(0x1ca)}]]}})['catch'](_0x5bb7e1=>{telegramError(_0x5bb7e1);}),tgBot['on']('callback_query',async _0x4515a0=>{const _0x28810d=_0x312e03,_0x55b455=_0x4515a0['data'],_0x2ce226=_0x4515a0[_0x28810d(0x19f)];tgBot[_0x28810d(0x1d7)](_0x4515a0['id'])[_0x28810d(0x233)](async()=>{const _0x335f9f=_0x28810d;_0x55b455==_0x335f9f(0x100)&&(updateSetting(_0x335f9f(0x27a),_0x335f9f(0x100)),updateSetting(_0x335f9f(0x115),!![]),await tgBot[_0x335f9f(0x267)](_0x2ce226[_0x335f9f(0x2ca)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x335f9f(0x214)](_0x38a24d=>{telegramError(_0x38a24d);}));_0x55b455==_0x335f9f(0x2be)&&(updateSetting(_0x335f9f(0x27a),_0x335f9f(0x2be)),updateSetting(_0x335f9f(0x115),!![]),await tgBot[_0x335f9f(0x267)](_0x2ce226[_0x335f9f(0x2ca)]['id'],_0x335f9f(0x173))[_0x335f9f(0x214)](_0x5eab93=>{telegramError(_0x5eab93);}));_0x55b455==_0x335f9f(0x1ca)&&(updateSetting('telegramEvents','all'),updateSetting('telegramEnabled',!![]),await tgBot[_0x335f9f(0x267)](_0x2ce226[_0x335f9f(0x2ca)]['id'],_0x335f9f(0x1b1))[_0x335f9f(0x214)](_0x5f0797=>{telegramError(_0x5f0797);}));if(!settings[_0x335f9f(0x2b0)])tgBot['sendMessage'](_0x2ce226[_0x335f9f(0x2ca)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x335f9f(0x214)](_0x163c09=>{telegramError(_0x163c09);});}),tgBot[_0x28810d(0x1a5)](_0x28810d(0x282));});}),tgBot['onText'](/\/status/,_0x2ca18e=>{const _0x4efd23=_0x5ca4ca;if(!validateTelegram(_0x2ca18e))return;const _0x3d3aed=getBotsWithMode();let _0xf5bc55='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x4955bc=>{const _0x3c09cd=_0x5bc5,_0x2efc94=_0x3d3aed['find'](_0xcb8255=>_0xcb8255['botID']==_0x4955bc[_0x3c09cd(0x2c1)])['mode'];_0xf5bc55+='Bot\x20'+_0x4955bc['botID']+':\x20'+_0x4955bc[_0x3c09cd(0x257)]+'\x20|\x20'+_0x2efc94+_0x3c09cd(0x1e7)+_0x4955bc[_0x3c09cd(0x18d)]+'\x0a';}),_0xf5bc55+='\x0a',_0xf5bc55+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0xf5bc55+=!settings[_0x4efd23(0x115)]?_0x4efd23(0x172):_0x4efd23(0x1fd),_0xf5bc55+=settings['telegramEnabled']?settings[_0x4efd23(0x27a)]==_0x4efd23(0x1ca)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x4efd23(0x251)+settings[_0x4efd23(0x27a)]+_0x4efd23(0x29d):'',tgBot[_0x4efd23(0x267)](_0x2ca18e[_0x4efd23(0x2ca)]['id'],_0xf5bc55,{'parse_mode':_0x4efd23(0x25e)})[_0x4efd23(0x214)](_0x2f88bd=>{telegramError(_0x2f88bd);});}),tgBot[_0x5ca4ca(0x19b)](/\/restart/,_0x2890cd=>{const _0x5f28cd=_0x5ca4ca;if(!validateTelegram(_0x2890cd))return;tgBot[_0x5f28cd(0x1a5)](_0x5f28cd(0x282));const _0x3b99f8=getEnabledBots();if(_0x3b99f8[_0x5f28cd(0x1a1)]==0x0)tgBot[_0x5f28cd(0x267)](_0x2890cd['chat']['id'],_0x5f28cd(0x180))[_0x5f28cd(0x214)](_0xdb9e96=>{telegramError(_0xdb9e96);});else{if(_0x3b99f8['length']>0x1)_0x3b99f8[_0x5f28cd(0xfa)]({'botID':_0x5f28cd(0x1ca)});let _0x53dd6e=[],_0x1fc8c4=[];const _0x97be40=_0x3b99f8[_0x5f28cd(0x1a1)]%0x4==0x0||_0x3b99f8[_0x5f28cd(0x1a1)]%0x4==0x3||_0x3b99f8['length']%0x3==0x1?0x4:0x3;let _0x699f1c=0x0;_0x3b99f8['forEach']((_0x2efd5a,_0x803378)=>{const _0x361a4f=_0x5f28cd;if(_0x803378%_0x97be40==0x0)_0x1fc8c4=[];_0x1fc8c4[_0x361a4f(0xfa)]({'text':_0x2efd5a[_0x361a4f(0x2c1)]==_0x361a4f(0x1ca)?_0x361a4f(0x258):'Bot\x20'+_0x2efd5a['botID'],'callback_data':_0x2efd5a['botID']}),_0x803378%_0x97be40==0x0&&(_0x53dd6e[_0x699f1c]=_0x1fc8c4,_0x699f1c++);}),tgBot[_0x5f28cd(0x267)](_0x2890cd[_0x5f28cd(0x2ca)]['id'],_0x5f28cd(0x103),{'reply_markup':{'inline_keyboard':_0x53dd6e}})[_0x5f28cd(0x214)](_0x5e45a4=>{telegramError(_0x5e45a4);}),tgBot['on'](_0x5f28cd(0x282),async _0x25d4e6=>{const _0x534445=_0x5f28cd,_0x2aa391=_0x25d4e6['data'],_0x5a3d1e=_0x25d4e6[_0x534445(0x19f)];tgBot[_0x534445(0x1d7)](_0x25d4e6['id'])[_0x534445(0x233)](async()=>{const _0x80cbe8=_0x534445;_0x2aa391=='all'?config[_0x80cbe8(0x225)](_0x57d59d=>{const _0x5a4108=_0x80cbe8;restartBot(_0x57d59d[_0x5a4108(0x2c1)]);}):restartBot(_0x2aa391);}),tgBot[_0x534445(0x1a5)]('callback_query');});}}),tgBot['onText'](/\/on/,_0xdb2ddd=>{const _0x5be81b=_0x5ca4ca;if(!validateTelegram(_0xdb2ddd))return;tgBot[_0x5be81b(0x1a5)](_0x5be81b(0x282));const _0x1e9aef=getDisabledBots();if(_0x1e9aef[_0x5be81b(0x1a1)]==0x0)tgBot[_0x5be81b(0x267)](_0xdb2ddd[_0x5be81b(0x2ca)]['id'],_0x5be81b(0x1d6))[_0x5be81b(0x214)](_0x20e7f8=>{telegramError(_0x20e7f8);});else{if(_0x1e9aef[_0x5be81b(0x1a1)]>0x1)_0x1e9aef[_0x5be81b(0xfa)]({'botID':'all'});let _0x3f8505=[],_0x72481e=[];const _0x32d7d7=_0x1e9aef[_0x5be81b(0x1a1)]%0x4==0x0||_0x1e9aef['length']%0x4==0x3||_0x1e9aef[_0x5be81b(0x1a1)]%0x3==0x1?0x4:0x3;let _0xc5f7d2=0x0;_0x1e9aef[_0x5be81b(0x225)]((_0x419452,_0x924c00)=>{const _0x11630a=_0x5be81b;if(_0x924c00%_0x32d7d7==0x0)_0x72481e=[];_0x72481e[_0x11630a(0xfa)]({'text':_0x419452[_0x11630a(0x2c1)]==_0x11630a(0x1ca)?'All\x20bots':'Bot\x20'+_0x419452[_0x11630a(0x2c1)],'callback_data':_0x419452[_0x11630a(0x2c1)]}),_0x924c00%_0x32d7d7==0x0&&(_0x3f8505[_0xc5f7d2]=_0x72481e,_0xc5f7d2++);}),tgBot[_0x5be81b(0x267)](_0xdb2ddd[_0x5be81b(0x2ca)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3f8505}})[_0x5be81b(0x214)](_0x3de78c=>{telegramError(_0x3de78c);}),tgBot['on'](_0x5be81b(0x282),async _0x382d3c=>{const _0x3b2456=_0x5be81b,_0x316494=_0x382d3c[_0x3b2456(0x207)],_0x3dd0d0=_0x382d3c[_0x3b2456(0x19f)];tgBot['answerCallbackQuery'](_0x382d3c['id'])[_0x3b2456(0x233)](async()=>{const _0x27dd72=_0x3b2456;_0x316494=='all'?(tgBot[_0x27dd72(0x267)](_0x3dd0d0['chat']['id'],_0x27dd72(0x1cc))['catch'](_0x50b527=>{telegramError(_0x50b527);}),_0x1e9aef['forEach'](_0x20c6f9=>{const _0x473647=_0x27dd72;if(_0x20c6f9[_0x473647(0x2c1)]!=_0x473647(0x1ca))toggleBot(_0x20c6f9[_0x473647(0x2c1)],toggleStatus(_0x20c6f9['botID']),'stopped');})):(tgBot[_0x27dd72(0x267)](_0x3dd0d0[_0x27dd72(0x2ca)]['id'],_0x27dd72(0x1ae)+_0x316494)[_0x27dd72(0x214)](_0xcc1317=>{telegramError(_0xcc1317);}),toggleBot(_0x316494,toggleStatus(_0x316494),_0x27dd72(0x24e)));}),tgBot[_0x3b2456(0x1a5)](_0x3b2456(0x282));});}}),tgBot[_0x5ca4ca(0x19b)](/\/off/,_0x454c31=>{const _0x30173c=_0x5ca4ca;if(!validateTelegram(_0x454c31))return;tgBot['removeListener'](_0x30173c(0x282));const _0x39cceb=getEnabledBots();if(_0x39cceb[_0x30173c(0x1a1)]==0x0)tgBot['sendMessage'](_0x454c31[_0x30173c(0x2ca)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x30173c(0x214)](_0x4c1de0=>{telegramError(_0x4c1de0);});else{if(_0x39cceb[_0x30173c(0x1a1)]>0x1)_0x39cceb['push']({'botID':_0x30173c(0x1ca)});let _0x11f095=[],_0x5eb34f=[];const _0x4ce9b3=_0x39cceb[_0x30173c(0x1a1)]%0x4==0x0||_0x39cceb[_0x30173c(0x1a1)]%0x4==0x3||_0x39cceb[_0x30173c(0x1a1)]%0x3==0x1?0x4:0x3;let _0x2d411b=0x0;_0x39cceb[_0x30173c(0x225)]((_0x2bf61d,_0x510652)=>{const _0x3ab931=_0x30173c;if(_0x510652%_0x4ce9b3==0x0)_0x5eb34f=[];_0x5eb34f[_0x3ab931(0xfa)]({'text':_0x2bf61d['botID']==_0x3ab931(0x1ca)?_0x3ab931(0x258):_0x3ab931(0x29f)+_0x2bf61d[_0x3ab931(0x2c1)],'callback_data':_0x2bf61d[_0x3ab931(0x2c1)]}),_0x510652%_0x4ce9b3==0x0&&(_0x11f095[_0x2d411b]=_0x5eb34f,_0x2d411b++);}),tgBot[_0x30173c(0x267)](_0x454c31[_0x30173c(0x2ca)]['id'],_0x30173c(0x284),{'reply_markup':{'inline_keyboard':_0x11f095}})[_0x30173c(0x214)](_0x328e77=>{telegramError(_0x328e77);}),tgBot['on']('callback_query',async _0x4a7ac7=>{const _0x205411=_0x30173c,_0x5b6c3f=_0x4a7ac7[_0x205411(0x207)],_0x298e03=_0x4a7ac7['message'];tgBot['answerCallbackQuery'](_0x4a7ac7['id'])[_0x205411(0x233)](async()=>{const _0x108715=_0x205411;_0x5b6c3f==_0x108715(0x1ca)?(tgBot[_0x108715(0x267)](_0x298e03['chat']['id'],_0x108715(0x144))[_0x108715(0x214)](_0x2c32c9=>{telegramError(_0x2c32c9);}),_0x39cceb['forEach'](_0x3e5822=>{const _0xc65ff2=_0x108715;if(_0x3e5822['botID']!=_0xc65ff2(0x1ca))toggleBot(_0x3e5822['botID'],toggleStatus(_0x3e5822[_0xc65ff2(0x2c1)]),_0xc65ff2(0x24e));})):(tgBot['sendMessage'](_0x298e03['chat']['id'],_0x108715(0x1d3)+_0x5b6c3f)['catch'](_0x48263f=>{telegramError(_0x48263f);}),toggleBot(_0x5b6c3f,toggleStatus(_0x5b6c3f),_0x108715(0x24e)));}),tgBot[_0x205411(0x1a5)](_0x205411(0x282));});}}),tgBot[_0x5ca4ca(0x19b)](/\/metrics/,_0x22f626=>{const _0x3248e7=_0x5ca4ca;if(!validateTelegram(_0x22f626))return;tgBot[_0x3248e7(0x1a5)](_0x3248e7(0x282));const _0x511d38=getEnabledBots();if(_0x511d38['length']==0x0)tgBot[_0x3248e7(0x267)](_0x22f626[_0x3248e7(0x2ca)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x275df0=>{telegramError(_0x275df0);});else{if(_0x511d38['length']>0x1){let _0x1a79b9=[],_0x50635e=[];const _0x224f54=_0x511d38[_0x3248e7(0x1a1)]%0x4==0x0||_0x511d38[_0x3248e7(0x1a1)]%0x4==0x3||_0x511d38[_0x3248e7(0x1a1)]%0x3==0x1?0x4:0x3;let _0x5a4b4a=0x0;_0x511d38[_0x3248e7(0x225)]((_0x4bc544,_0x1aac74)=>{const _0x2c52ef=_0x3248e7;if(_0x1aac74%_0x224f54==0x0)_0x50635e=[];_0x50635e[_0x2c52ef(0xfa)]({'text':_0x2c52ef(0x29f)+_0x4bc544[_0x2c52ef(0x2c1)],'callback_data':_0x4bc544[_0x2c52ef(0x2c1)]}),_0x1aac74%_0x224f54==0x0&&(_0x1a79b9[_0x5a4b4a]=_0x50635e,_0x5a4b4a++);}),tgBot[_0x3248e7(0x267)](_0x22f626['chat']['id'],_0x3248e7(0x117),{'reply_markup':{'inline_keyboard':_0x1a79b9}})[_0x3248e7(0x214)](_0x319fbe=>{telegramError(_0x319fbe);}),tgBot['on'](_0x3248e7(0x282),async _0x57de9a=>{const _0x4a016f=_0x3248e7,_0x4952f3=_0x57de9a['data'],_0x16dd10=_0x57de9a['message'];tgBot['answerCallbackQuery'](_0x57de9a['id'])[_0x4a016f(0x233)](async()=>{const _0x109af8=_0x4a016f;if(pid[_0x4952f3])pid[_0x4952f3][_0x109af8(0x165)]({'function':_0x109af8(0x1cd),'args':null});}),tgBot[_0x4a016f(0x1a5)](_0x4a016f(0x282));});}else{const _0x53ff7b=_0x511d38[0x0][_0x3248e7(0x2c1)];if(pid[_0x53ff7b])pid[_0x53ff7b][_0x3248e7(0x165)]({'function':_0x3248e7(0x1cd),'args':null});}}}),tgBot[_0x5ca4ca(0x19b)](/\/portfolio/,_0x3e89df=>{const _0x5c30c5=_0x5ca4ca;if(!validateTelegram(_0x3e89df))return;tgBot[_0x5c30c5(0x1a5)](_0x5c30c5(0x282));const _0x1d0542=getEnabledBots();if(_0x1d0542[_0x5c30c5(0x1a1)]==0x0)tgBot['sendMessage'](_0x3e89df[_0x5c30c5(0x2ca)]['id'],_0x5c30c5(0x180))[_0x5c30c5(0x214)](_0x26c882=>{telegramError(_0x26c882);});else{if(_0x1d0542['length']>0x1){let _0x54e2c5=[],_0x420cb0=[];const _0xdb972d=_0x1d0542[_0x5c30c5(0x1a1)]%0x4==0x0||_0x1d0542[_0x5c30c5(0x1a1)]%0x4==0x3||_0x1d0542[_0x5c30c5(0x1a1)]%0x3==0x1?0x4:0x3;let _0xf7dfcf=0x0;_0x1d0542['forEach']((_0x353be0,_0xf91ab)=>{const _0x1e9aea=_0x5c30c5;if(_0xf91ab%_0xdb972d==0x0)_0x420cb0=[];_0x420cb0['push']({'text':_0x1e9aea(0x29f)+_0x353be0[_0x1e9aea(0x2c1)],'callback_data':_0x353be0['botID']}),_0xf91ab%_0xdb972d==0x0&&(_0x54e2c5[_0xf7dfcf]=_0x420cb0,_0xf7dfcf++);}),tgBot['sendMessage'](_0x3e89df[_0x5c30c5(0x2ca)]['id'],_0x5c30c5(0x1f8),{'reply_markup':{'inline_keyboard':_0x54e2c5}})[_0x5c30c5(0x214)](_0x44e91b=>{telegramError(_0x44e91b);}),tgBot['on'](_0x5c30c5(0x282),async _0x1f1104=>{const _0xf433b5=_0x5c30c5,_0x501107=_0x1f1104[_0xf433b5(0x207)],_0x5ab295=_0x1f1104['message'];tgBot['answerCallbackQuery'](_0x1f1104['id'])['then'](async()=>{const _0x1193e6=_0xf433b5;if(pid[_0x501107])pid[_0x501107][_0x1193e6(0x165)]({'function':_0x1193e6(0x1c7),'args':null});}),tgBot[_0xf433b5(0x1a5)](_0xf433b5(0x282));});}else{const _0x39aebd=_0x1d0542[0x0][_0x5c30c5(0x2c1)];if(pid[_0x39aebd])pid[_0x39aebd]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x5ca4ca(0x19b)](/\/update/,async _0x3d81de=>{const _0x2a5d5a=_0x5ca4ca;if(!validateTelegram(_0x3d81de))return;tgBot[_0x2a5d5a(0x1a5)](_0x2a5d5a(0x282)),await getMessages();if(!updateAvailable)tgBot[_0x2a5d5a(0x267)](_0x3d81de[_0x2a5d5a(0x2ca)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x2a5d5a(0x214)](_0x4108eb=>{telegramError(_0x4108eb);});else!validInstallation?tgBot[_0x2a5d5a(0x267)](_0x3d81de[_0x2a5d5a(0x2ca)]['id'],_0x2a5d5a(0x294))[_0x2a5d5a(0x214)](_0x2249ff=>{telegramError(_0x2249ff);}):(tgBot[_0x2a5d5a(0x267)](_0x3d81de[_0x2a5d5a(0x2ca)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x2a5d5a(0x25a)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x21d0fb=>{telegramError(_0x21d0fb);}),tgBot['on'](_0x2a5d5a(0x282),async _0x517637=>{const _0x25e770=_0x2a5d5a,_0x234a08=_0x517637[_0x25e770(0x207)],_0x43b528=_0x517637[_0x25e770(0x19f)];tgBot[_0x25e770(0x1d7)](_0x517637['id'])['then'](async()=>{const _0x4d0e80=_0x25e770;_0x234a08==_0x4d0e80(0x25a)&&(await tgBot['sendMessage'](_0x43b528['chat']['id'],_0x4d0e80(0x17c))[_0x4d0e80(0x214)](_0x366463=>{telegramError(_0x366463);}),updateBB(_0x4d0e80(0x219))),_0x234a08=='no'&&await tgBot[_0x4d0e80(0x267)](_0x43b528[_0x4d0e80(0x2ca)]['id'],_0x4d0e80(0x289))[_0x4d0e80(0x214)](_0x2f5b7c=>{telegramError(_0x2f5b7c);});}),tgBot[_0x25e770(0x1a5)](_0x25e770(0x282));}));}),tgBot[_0x5ca4ca(0x19b)](/\/reinstall/,async _0x4a7069=>{const _0x41777d=_0x5ca4ca;if(!validateTelegram(_0x4a7069))return;tgBot[_0x41777d(0x1a5)](_0x41777d(0x282)),!validInstallation?tgBot[_0x41777d(0x267)](_0x4a7069[_0x41777d(0x2ca)]['id'],_0x41777d(0x14a))['catch'](_0x5b444d=>{telegramError(_0x5b444d);}):(tgBot[_0x41777d(0x267)](_0x4a7069[_0x41777d(0x2ca)]['id'],_0x41777d(0x241),{'reply_markup':{'inline_keyboard':[[{'text':_0x41777d(0x128),'callback_data':_0x41777d(0x25a)},{'text':'No','callback_data':'no'}]]}})[_0x41777d(0x214)](_0x4ceb62=>{telegramError(_0x4ceb62);}),tgBot['on']('callback_query',async _0x366c2b=>{const _0xff39be=_0x41777d,_0xd32dc=_0x366c2b[_0xff39be(0x207)],_0x1fa166=_0x366c2b[_0xff39be(0x19f)];tgBot[_0xff39be(0x1d7)](_0x366c2b['id'])['then'](async()=>{const _0x3acad0=_0xff39be;_0xd32dc==_0x3acad0(0x25a)&&(await tgBot[_0x3acad0(0x267)](_0x1fa166['chat']['id'],_0x3acad0(0x1f4))['catch'](_0x57d5f9=>{telegramError(_0x57d5f9);}),updateBB(_0x3acad0(0x277))),_0xd32dc=='no'&&await tgBot[_0x3acad0(0x267)](_0x1fa166['chat']['id'],_0x3acad0(0x245))[_0x3acad0(0x214)](_0x505255=>{telegramError(_0x505255);});}),tgBot['removeListener'](_0xff39be(0x282));}));}),tgBot[_0x5ca4ca(0x19b)](/\/toggle/,_0xbca7fa=>{const _0x5d369e=_0x5ca4ca;if(!validateTelegram(_0xbca7fa))return;tgBot[_0x5d369e(0x1a5)](_0x5d369e(0x282));const _0x5596cf=getBotsWithMode();if(_0x5596cf[_0x5d369e(0x1a1)]==0x0)tgBot[_0x5d369e(0x267)](_0xbca7fa[_0x5d369e(0x2ca)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5d369e(0x214)](_0x30c787=>{telegramError(_0x30c787);});else{let _0x23796b=[],_0x2d1e62=[];const _0x143a19=0x2;let _0x5af9fb=0x0;_0x5596cf[_0x5d369e(0x225)]((_0x24f5a4,_0x21f787)=>{const _0x5413e5=_0x5d369e;if(_0x21f787%_0x143a19==0x0)_0x2d1e62=[];_0x2d1e62[_0x5413e5(0xfa)]({'text':_0x5413e5(0x29f)+_0x24f5a4[_0x5413e5(0x2c1)]+'\x20('+_0x24f5a4[_0x5413e5(0x2aa)]+')','callback_data':_0x24f5a4[_0x5413e5(0x2c1)]}),_0x21f787%_0x143a19==0x0&&(_0x23796b[_0x5af9fb]=_0x2d1e62,_0x5af9fb++);}),tgBot[_0x5d369e(0x267)](_0xbca7fa['chat']['id'],_0x5d369e(0x114),{'reply_markup':{'inline_keyboard':_0x23796b}})[_0x5d369e(0x214)](_0x442ad6=>{telegramError(_0x442ad6);}),tgBot['on'](_0x5d369e(0x282),async _0x599475=>{const _0x3fb792=_0x5d369e,_0x2ecac3=_0x599475[_0x3fb792(0x207)],_0xedf4af=_0x599475[_0x3fb792(0x19f)];tgBot[_0x3fb792(0x1d7)](_0x599475['id'])[_0x3fb792(0x233)](async()=>{const _0x1b4ac7=_0x3fb792,_0x4fe52f=_0x5596cf[_0x1b4ac7(0x238)](_0xdf4587=>_0xdf4587[_0x1b4ac7(0x2c1)]==_0x2ecac3),_0x728181=_0x4fe52f['mode']==_0x1b4ac7(0x220)?'manual':_0x1b4ac7(0x220);tgBot[_0x1b4ac7(0x267)](_0xedf4af[_0x1b4ac7(0x2ca)]['id'],_0x1b4ac7(0x235)+_0x2ecac3+_0x1b4ac7(0x1c2)+_0x728181+_0x1b4ac7(0x169))[_0x1b4ac7(0x214)](_0x39633c=>{telegramError(_0x39633c);}),toggleBotMode(_0x2ecac3);}),tgBot[_0x3fb792(0x1a5)](_0x3fb792(0x282));});}}),tgBot['onText'](/\/names/,_0x33c3ba=>{const _0x41229a=_0x5ca4ca;if(!validateTelegram(_0x33c3ba))return;let _0x4c20b6='';config['forEach'](_0x5595da=>{const _0x481c7c=_0x5bc5;_0x4c20b6+=_0x481c7c(0x29f)+_0x5595da[_0x481c7c(0x2c1)]+':\x20'+_0x5595da[_0x481c7c(0x226)]+'\x0a';}),tgBot[_0x41229a(0x267)](_0x33c3ba[_0x41229a(0x2ca)]['id'],_0x4c20b6,{'parse_mode':_0x41229a(0x25e)})[_0x41229a(0x214)](_0x2aa9b0=>{telegramError(_0x2aa9b0);});}),tgBot[_0x5ca4ca(0x19b)](/\/disable/,_0x1453a8=>{const _0x4a64a1=_0x5ca4ca;if(!validateTelegram(_0x1453a8))return;tgBot[_0x4a64a1(0x267)](_0x1453a8['chat']['id'],_0x4a64a1(0x16c))[_0x4a64a1(0x214)](_0x1ddf35=>{telegramError(_0x1ddf35);}),updateSetting(_0x4a64a1(0x115),![]);}),tgBot[_0x5ca4ca(0x19b)](/\/help/,_0x1ebe19=>{const _0x43197e=_0x5ca4ca;if(!validateTelegram(_0x1ebe19))return;tgBot[_0x43197e(0x267)](_0x1ebe19[_0x43197e(0x2ca)]['id'],_0x41ef00)[_0x43197e(0x214)](_0x2b2ff9=>{telegramError(_0x2b2ff9);});}),tgBot['on'](_0x5ca4ca(0x265),_0x470740=>{const _0x1a6ee3=_0x5ca4ca;_0x470740['toString']()[_0x1a6ee3(0x264)](_0x1a6ee3(0x203))&&(logger[_0x1a6ee3(0x21f)](_0x1a6ee3(0xed)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x1a6ee3(0x2a0))[_0x1a6ee3(0x1dd)](_0x1a6ee3(0x2c0),_0x1a6ee3(0xed)));}),process[_0x5ca4ca(0x1bc)]('SIGINT',()=>{const _0x77a070=_0x5ca4ca;if(tgBot)tgBot['stopPolling']();process[_0x77a070(0x2bc)](0x1);}),process['once'](_0x5ca4ca(0x153),()=>{const _0x121577=_0x5ca4ca;if(tgBot)tgBot[_0x121577(0x2d0)]();process['exit'](0x1);});}}function disableTelegram(){const _0x113bdb=_0x72ca9b;tgBot&&(tgBot[_0x113bdb(0x2d0)](),tgBot=null);}function sendTelegram(_0x27eeb8,_0x4c7b31){const _0x5c7c56=_0x72ca9b;if(settings[_0x5c7c56(0x115)]){if(settings['telegramEvents']==_0x5c7c56(0x1ca)||(_0x4c7b31[_0x5c7c56(0x224)]==_0x5c7c56(0x1e2)||_0x4c7b31['type']==_0x5c7c56(0xfd)||_0x4c7b31['type']==_0x5c7c56(0x175))&&settings[_0x5c7c56(0x27a)]==_0x5c7c56(0x2be)||_0x4c7b31[_0x5c7c56(0x224)]==_0x5c7c56(0x2a1)&&settings[_0x5c7c56(0x27a)]==_0x5c7c56(0x100)){if(tgBot&&settings[_0x5c7c56(0x2b0)]){if(_0x4c7b31[_0x5c7c56(0x1f2)])tgBot[_0x5c7c56(0x267)](settings[_0x5c7c56(0x2b0)],_0x4c7b31[_0x5c7c56(0x226)]+_0x5c7c56(0x2a8)+_0x4c7b31[_0x5c7c56(0x121)])[_0x5c7c56(0x214)](_0x306373=>{telegramError(_0x306373);});else tgBot[_0x5c7c56(0x267)](settings[_0x5c7c56(0x2b0)],_0x5c7c56(0x29f)+_0x27eeb8+'\x20>\x20'+_0x4c7b31['event'])[_0x5c7c56(0x214)](_0x51ce59=>{telegramError(_0x51ce59);});}}}}async function sendTelegramMsg(_0x43a76b,_0x43780a=_0x72ca9b(0x25e)){const _0x255a0c=_0x72ca9b;return settings['telegramEnabled']&&tgBot&&settings[_0x255a0c(0x2b0)]?(await tgBot[_0x255a0c(0x267)](settings[_0x255a0c(0x2b0)],_0x43a76b,{'parse_mode':_0x43780a})[_0x255a0c(0x214)](_0x3bb5d8=>{telegramError(_0x3bb5d8);}),!![]):![];}function getDeviceWithIp(_0x39824a){const _0x5a5baa=_0x72ca9b;return devices[_0x5a5baa(0x238)](_0x305d6d=>_0x305d6d['ip']===_0x39824a);}function temporaryAccess2FA(_0x1c9e87,_0x18db72){const _0x51838f=_0x72ca9b;let _0x626a7=new Date(),_0xe10af2=![];if(lastIpApproval){if(_0x626a7-lastIpApproval<0x1388)_0xe10af2=!![];}lastIpApproval=new Date();if(_0xe10af2)return;tgBot&&settings[_0x51838f(0x2b0)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x51838f(0x2b0)],_0x51838f(0x2c3)+normalizeIP(_0x18db72)['show']+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x51838f(0x228),'callback_data':'5'},{'text':_0x51838f(0x200),'callback_data':'15'},{'text':_0x51838f(0x185),'callback_data':'30'},{'text':_0x51838f(0x1d0),'callback_data':_0x51838f(0x1d0)}]]}})[_0x51838f(0x214)](_0x53678e=>{telegramError(_0x53678e);}),tgBot['on'](_0x51838f(0x282),async _0x142cbc=>{const _0x553caf=_0x51838f,_0x5156eb=_0x142cbc[_0x553caf(0x207)],_0x333d7c=_0x142cbc['message'];tgBot[_0x553caf(0x1d7)](_0x142cbc['id'])['then'](async()=>{const _0x35bcfc=_0x553caf;devices[_0x1c9e87][_0x35bcfc(0x1b9)]={'clientip':_0x18db72,'timestamp':new Date()[_0x35bcfc(0x19a)](),'expiry':_0x5156eb},_0x5156eb!=_0x35bcfc(0x1d0)?(await tgBot[_0x35bcfc(0x267)](_0x333d7c[_0x35bcfc(0x2ca)]['id'],_0x35bcfc(0x19e)+_0x5156eb+_0x35bcfc(0x256),{'parse_mode':_0x35bcfc(0x25e)})['catch'](_0x213215=>{telegramError(_0x213215);}),io['to'](_0x1c9e87)[_0x35bcfc(0x1dd)]('status',{'access':{'allow':![],'reason':_0x35bcfc(0x152),'token':null}})):(await tgBot[_0x35bcfc(0x267)](_0x333d7c[_0x35bcfc(0x2ca)]['id'],'Temporary\x20access\x20rejected')[_0x35bcfc(0x214)](_0x27d9d1=>{telegramError(_0x27d9d1);}),io['to'](_0x1c9e87)[_0x35bcfc(0x1dd)](_0x35bcfc(0x257),{'access':{'allow':![],'reason':_0x35bcfc(0x1c6),'token':null}}));}),tgBot[_0x553caf(0x1a5)](_0x553caf(0x282));}));}function loginAccess2FA(_0x5d1545,_0x117a8d){const _0x3bcbc2=_0x72ca9b;tgBot&&settings[_0x3bcbc2(0x2b0)]&&(tgBot[_0x3bcbc2(0x1a5)](_0x3bcbc2(0x282)),tgBot[_0x3bcbc2(0x267)](settings[_0x3bcbc2(0x2b0)],_0x3bcbc2(0x1a7)+normalizeIP(_0x117a8d)[_0x3bcbc2(0x10c)]+'</b>\x20?',{'parse_mode':_0x3bcbc2(0x25e),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3bcbc2(0x1d0),'callback_data':'reject'}]]}})['catch'](_0x5f55cf=>{telegramError(_0x5f55cf);}),tgBot['on']('callback_query',async _0x5526b6=>{const _0x42bcb2=_0x3bcbc2,_0x22c5b0=_0x5526b6[_0x42bcb2(0x207)],_0x27a376=_0x5526b6[_0x42bcb2(0x19f)];tgBot[_0x42bcb2(0x1d7)](_0x5526b6['id'])[_0x42bcb2(0x233)](async()=>{const _0x22152f=_0x42bcb2;devices[_0x5d1545][_0x22152f(0x201)]={'clientip':_0x117a8d,'timestamp':new Date()[_0x22152f(0x19a)](),'expiry':_0x22c5b0},_0x22c5b0!=_0x22152f(0x1d0)?(await tgBot[_0x22152f(0x267)](_0x27a376['chat']['id'],_0x22152f(0x253),{'parse_mode':_0x22152f(0x25e)})[_0x22152f(0x214)](_0x3aafc1=>{telegramError(_0x3aafc1);}),io['to'](_0x5d1545)[_0x22152f(0x1dd)](_0x22152f(0x257),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x22152f(0x267)](_0x27a376[_0x22152f(0x2ca)]['id'],_0x22152f(0x25d))['catch'](_0x2ee830=>{telegramError(_0x2ee830);}),io['to'](_0x5d1545)[_0x22152f(0x1dd)](_0x22152f(0x257),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x42bcb2(0x1a5)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1c1dc0=_0x72ca9b;return dbConfig[_0x1c1dc0(0x10f)](_0x1c1dc0(0x166))[_0x1c1dc0(0x22c)]('botID')[_0x1c1dc0(0x190)]({'status':_0x1c1dc0(0x234)})[_0x1c1dc0(0x14d)]()||[];}function getDisabledBots(){const _0x1a535c=_0x72ca9b;return dbConfig[_0x1a535c(0x10f)](_0x1a535c(0x166))[_0x1a535c(0x22c)](_0x1a535c(0x2c1))[_0x1a535c(0x190)]({'status':_0x1a535c(0x1ff)})[_0x1a535c(0x14d)]()||[];}function getBotAttributes(_0xa001cf){const _0x307212=_0x72ca9b;let _0x49f474={};const _0xde2227=configpath+'bot-'+_0xa001cf+_0x307212(0x1cb),_0x31a50d=fs['existsSync'](_0xde2227);if(_0x31a50d){const _0x37b7f3=fs['readFileSync'](_0xde2227);try{const _0x2d4e50=JSON['parse'](_0x37b7f3),_0x30369e=_0x2d4e50?_0x2d4e50['bot'][0x0][_0x307212(0x122)]:![];_0x49f474['mode']=_0x30369e?_0x307212(0x220):_0x307212(0x23d),_0x49f474['botname']=_0x2d4e50?_0x2d4e50['bot'][0x0][_0x307212(0x226)]:_0x307212(0x29f)+_0xa001cf;}catch(_0x7b71b1){_0x49f474[_0x307212(0x2aa)]='manual',_0x49f474[_0x307212(0x226)]='Bot\x20'+_0xa001cf;}}else _0x49f474[_0x307212(0x2aa)]=_0x307212(0x23d),_0x49f474[_0x307212(0x226)]='Bot\x20'+_0xa001cf;return _0x49f474;}function getBotsWithMode(){const _0x272534=_0x72ca9b,_0x66d6d=dbConfig[_0x272534(0x10f)](_0x272534(0x166))[_0x272534(0x22c)](_0x272534(0x2c1))[_0x272534(0x14d)]()||[];return _0x66d6d['forEach'](_0x3b88dd=>{const _0x5061a0=_0x272534;let _0x11bee4=getBotAttributes(_0x3b88dd[_0x5061a0(0x2c1)]);_0x3b88dd['mode']=_0x11bee4['mode'];}),_0x66d6d;}function getBotExchanges(){const _0x1e77d4=_0x72ca9b;let _0x1e2eb5=[];const _0x329e90=dbConfig[_0x1e77d4(0x10f)]('bots')[_0x1e77d4(0x22c)](_0x1e77d4(0x2c1))[_0x1e77d4(0x14d)]()||[];_0x329e90[_0x1e77d4(0x225)](_0xf8d7f6=>{const _0xcdfbf=_0x1e77d4;if(_0xf8d7f6[_0xcdfbf(0x257)]=='enabled'){const _0x282761=configpath+_0xcdfbf(0xfc)+_0xf8d7f6[_0xcdfbf(0x2c1)]+_0xcdfbf(0x1cb),_0x1b9408=fs[_0xcdfbf(0x194)](_0x282761);let _0x3aa5fd;if(_0x1b9408){const _0x2b342d=fs[_0xcdfbf(0x23f)](_0x282761);try{const _0x2e827f=JSON['parse'](_0x2b342d);_0x3aa5fd=_0x2e827f?_0x2e827f[_0xcdfbf(0x243)][0x0]['exchange']:null;}catch(_0x5508f2){}}if(_0x3aa5fd)_0x1e2eb5['push'](_0x3aa5fd);}});const _0x375d56=[...new Set(_0x1e2eb5)][_0x1e77d4(0x1d8)]();return _0x375d56;}async function initUser(){const _0x1ca77b=_0x72ca9b;if(!settings[_0x1ca77b(0x18b)]){const _0x4cafdf=uuidRandom();mixpanel[_0x1ca77b(0x247)](_0x4cafdf),updateSetting(_0x1ca77b(0x18b),_0x4cafdf);}}async function initSecure(){const _0x4e646b=_0x72ca9b;let _0x162b12=getSecure();if(!_0x162b12[_0x4e646b(0x1f5)](_0x4e646b(0x287))){let _0x9b872b=await generateKeys();_0x162b12[_0x4e646b(0x1b4)]=_0x9b872b[_0x4e646b(0x1b4)],_0x162b12[_0x4e646b(0x102)]=_0x9b872b[_0x4e646b(0x102)],_0x162b12[_0x4e646b(0x287)]=crypto[_0x4e646b(0x1d4)](0x20)[_0x4e646b(0x2b3)](_0x4e646b(0x1eb));;storeSecure(_0x162b12);}}function getSettings(){const _0x39b4f7=_0x72ca9b;return dbSettings['get'](_0x39b4f7(0x204))[_0x39b4f7(0x14d)]()||{};}function getSecure(){const _0x48f717=_0x72ca9b;return dbSecure[_0x48f717(0x10f)](_0x48f717(0x262))[_0x48f717(0x14d)]()||{};}function getBlacklist(){const _0x7c0239=_0x72ca9b;return dbSecure[_0x7c0239(0x10f)](_0x7c0239(0x127))[_0x7c0239(0x14d)]()||[];}function broadcastToBots(_0x23a6c,_0x32ef58){const _0x20b265=_0x72ca9b;config[_0x20b265(0x225)](_0x39fe76=>{const _0x41e05d=_0x20b265;if(_0x39fe76['status']=='enabled'&&_0x39fe76['live']==_0x41e05d(0x285)||_0x39fe76[_0x41e05d(0x257)]=='new'&&_0x39fe76[_0x41e05d(0x18d)]=='running'){if(pid[_0x39fe76[_0x41e05d(0x2c1)]])pid[_0x39fe76[_0x41e05d(0x2c1)]][_0x41e05d(0x165)]({[_0x23a6c]:_0x32ef58});}});}function storeSettings(_0x468add,_0x20bcb9=![]){const _0x4e570d=_0x72ca9b;_0x468add={...settings,..._0x468add};if(_0x20bcb9&&_0x468add[_0x4e570d(0xf7)]!=_0x4e570d(0x149)&&_0x468add['bbPassword']!=_0x4e570d(0x161)&&_0x468add[_0x4e570d(0xf7)]!=''){const _0x19cbaf=crypt['decrypt'](secure['privateKey'],_0x468add['bbPassword'])[_0x4e570d(0x19f)][_0x4e570d(0x217)]('@')[0x0],_0x37976b=bcrypt['hashSync'](_0x19cbaf,saltRounds);_0x468add={..._0x468add,'bbPassword':_0x37976b};}if(_0x20bcb9&&_0x468add['telegramToken']!=_0x4e570d(0x149)&&_0x468add[_0x4e570d(0x22b)]!=_0x4e570d(0x161)&&_0x468add[_0x4e570d(0x22b)]!=''){const _0x4569a9=crypt['decrypt'](secure[_0x4e570d(0x102)],_0x468add[_0x4e570d(0x22b)])[_0x4e570d(0x19f)][_0x4e570d(0x217)]('@')[0x0];_0x468add={..._0x468add,'telegramToken':_0x4569a9};}const _0x344b7d=_0x468add[_0x4e570d(0x22b)]!='************'&&_0x468add[_0x4e570d(0x22b)]!=settings[_0x4e570d(0x22b)]||_0x468add['telegramUsername']!=settings[_0x4e570d(0x2c4)],_0x23ad07=_0x468add[_0x4e570d(0x22b)]==''||_0x468add[_0x4e570d(0x2c4)]=='';if(_0x344b7d)_0x468add[_0x4e570d(0x27a)]=_0x4e570d(0x1ca);for(const [_0x223319,_0x175d53]of Object[_0x4e570d(0x12e)](_0x468add)){if(_0x223319==_0x4e570d(0x22b)&&_0x175d53==_0x4e570d(0x149)){_0x468add[_0x4e570d(0x22b)]=settings[_0x4e570d(0x22b)];continue;};if(_0x223319==_0x4e570d(0xf7)&&_0x175d53==_0x4e570d(0x149)){_0x468add[_0x4e570d(0xf7)]=settings[_0x4e570d(0xf7)];continue;};dbSettings[_0x4e570d(0x22f)]('settings.'+_0x223319,_0x175d53)[_0x4e570d(0x2a2)]();}settings=_0x468add,io['to'](_0x4e570d(0x2a0))[_0x4e570d(0x1dd)](_0x4e570d(0x204),cleanSettings()),broadcastToBots(_0x4e570d(0x268),settings['timeshift']),broadcastToBots(_0x4e570d(0x16b),settings[_0x4e570d(0x16b)]);if(_0x344b7d&&!_0x23ad07)initTelegram();if(_0x344b7d&&_0x23ad07)disableTelegram();getAllClients()[_0x4e570d(0x225)](_0x7f1fe9=>{const _0x20e2ad=_0x4e570d;getSocket(_0x7f1fe9['id'])[_0x20e2ad(0x1dd)](_0x20e2ad(0x257),{'access':{'allow':![],'reason':_0x20e2ad(0x152),'token':null}});});}function updateSetting(_0x5620d6,_0xaefeff){const _0x19c83f=_0x72ca9b;dbSettings[_0x19c83f(0x22f)](_0x19c83f(0x1c8)+_0x5620d6,_0xaefeff)['write'](),settings=getSettings(),io['to'](_0x19c83f(0x2a0))['emit'](_0x19c83f(0x204),cleanSettings());}function storeSecure(_0xc15e32){const _0x18a6fb=_0x72ca9b;dbSecure[_0x18a6fb(0x10f)](_0x18a6fb(0x262))[_0x18a6fb(0xfa)](_0xc15e32)[_0x18a6fb(0x2a2)](),secure=_0xc15e32;}function addBlacklist(_0x42a92f){const _0x3de2cb=_0x72ca9b;cleanBlacklist();let _0x3e33d0;devices[_0x42a92f]['telegramIpApproval']?_0x3e33d0=Math[_0x3de2cb(0x28d)](devices[_0x42a92f][_0x3de2cb(0x1b9)][_0x3de2cb(0x2b5)],loginExpiry):_0x3e33d0=loginExpiry,dbSecure['get']('blacklist')[_0x3de2cb(0xfa)]({'expiry':new Date()[_0x3de2cb(0x19a)]()+_0x3e33d0*0x3c*0x3e8,'token':devices[_0x42a92f][_0x3de2cb(0x23c)][_0x3de2cb(0x17d)]})[_0x3de2cb(0x2a2)](),blacklist=dbSecure[_0x3de2cb(0x10f)](_0x3de2cb(0x127))['value']();}function cleanBlacklist(){const _0x556b63=_0x72ca9b;let _0x5b8234=dbSecure['get'](_0x556b63(0x127))['cloneDeep']()['value'](),_0x2d92db=new Date()['getTime']();_0x5b8234[_0x556b63(0x225)](_0x4b70f8=>{const _0x28f2b9=_0x556b63;_0x4b70f8[_0x28f2b9(0x2b5)]<_0x2d92db&&dbSecure[_0x28f2b9(0x10f)](_0x28f2b9(0x127))[_0x28f2b9(0x223)]({'expiry':_0x4b70f8[_0x28f2b9(0x2b5)]})[_0x28f2b9(0x2a2)]();});}function initStates(){const _0x2e90dd=_0x72ca9b;let _0x27177c=getConfiguration();_0x27177c[_0x2e90dd(0x225)](_0x146997=>{const _0x4ecf04=_0x2e90dd;_0x146997[_0x4ecf04(0x18d)]=_0x4ecf04(0x24e);}),storeConfiguration(_0x27177c);}function _0xc2bd(){const _0x1f3d47=['/:bot/performance','Login\x20accepted','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','getMonth','\x20minutes','status','All\x20bots','new-disabled','yes','::1','getUTCHours','Login\x20rejected','HTML','randomFillSync','handshake','string','secure','output-001.log','includes','polling_error','Unauthorized\x20attempt\x20to\x20update\x20bot','sendMessage','timeshift','auth','username','Unauthorized\x20attempt\x20to\x20get\x20messages','format','IPv4',':\x20Bot\x20Mgr\x20>\x20','title','add','Restore\x20process\x20aborted','Markdown','/restart\x20-\x20restart\x20bot(s)\x0a','Backup\x20file\x20unzipped\x20and\x20stored','size','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','reinstall','argv','storeConfiguration','telegramEvents','port','sockets','(((.+)+)+)+$','127.0.0.1','versions','store-headless','/off\x20-\x20stop\x20bot(s)\x0a','callback_query','padStart','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','running','Restarting\x20Bot\x20','secret','getFullYear','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Unauthorized\x20login\x20attempt\x20(timeout)','staging','Password\x20has\x20been\x20reset\x20to:\x20','max','host','Logged\x20out\x20user\x20...','inherit','getMinutes','RSA-OAEP','1426AjBGTi','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','build2','login\x20token\x20valid','lastmsgtelegram','/enable\x20-\x20enable\x20notifications\x0a','build','\x20(1)','getStartingBalances','(staging)','\x20only\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','Bot\x20','botmanager','order','write','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','bcryptjs','allow','49767meXolV','User\x20has\x20been\x20validated','\x20>\x20','File\x20uploaded','mode','ipaddr.js','join','backup','uuid-random',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','telegramChatId','internal','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','toString','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','expiry','sign','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','RSA','toIPv4Address','132223rOckcy','exit','bb/','alerts','temp/','notification','botID','new','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','telegramUsername','login\x20required','generateKeyPairAsync','update-bot','fork','delete-bot','chat','version','hybrid-crypto-js','Setting\x20access:\x20','Enabled\x20Bot\x20','Bot\x20Mgr\x20>\x20','stopPolling','socket.io','Node.js\x20v','Invalid\x20Telegram\x20token','output-002.log','test','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','search','/:bot/history','function','sendFile','4414930QMivyl','bbPassword','axios','backupfile','push','\x1b[34m','bot-','warning','Unauthorized\x20attempt\x20to\x20add\x20bot','6b67f3d61ee94b8f5c80b4affef4c4d9','orders','writeFileSync','privateKey','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','unlinkSync','Session\x20expired\x20for\x20user\x20...','timestamp','logged\x20out','_data','Idling\x20bot\x20\x20\x20|\x20Bot\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','/:bot/coins','show','login','2FA\x20login\x20token\x20generated','get','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','encryptedUuid','conn','uncaughtException','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','telegramEnabled','Server','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','temporary\x20token\x20generated','/:bot/support','deleteHistoryAlerts','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','bbvNew','min','keys','backup-full','reason','event','headless','uuid','any','-performance.json','\x1b[36m','blacklist','Yes','backup-full.zip','rmSync','[ip-address]','DEFLATE',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','entries','download','Unauthorized\x20attempt\x20to\x20show\x20configuration','placeOrder','binary','sha256','get-logs','emitHistory','compareSync','2FA','reinstall-bb','f2aRequired','init','\x1b[31m','output-003.log','readdirSync','4nPoODP','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','9562qeAdhz','date-fns','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','apply','Unauthorized\x20attempt\x20to\x20delete\x20alerts','1548nOBpJV','bbUsername','************','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','get-starting-balances','util','value','decrypt','Password\x20reset\x20rejected','copyFileSync','name','reload','SIGTERM','parse','/status\x20-\x20show\x20bot(s)\x20status\x0a','-----------------------------------------------------------------------------------','$1_$2_$3','Error\x20removing\x20old\x20backup\x20files:','node-zip','NTBA_FIX_319','Unauthorized\x20attempt\x20to\x20store\x20configuration','242VeGdGr','::ffff:127.0.0.1','/:bot',',\x20must\x20be\x20a\x204\x20digit\x20number','.zip','***','logs/','clients','defaults','send','bots','kill','temporary\x20access\x20timeout','\x20mode','isIPv4MappedAddress','onepagemode','Notifications\x20disabled','stop','store','disconnect','toggleBotMode','\x20(2)','Notifications\x20disabled\x0a','Ok,\x20will\x20send\x20alert\x20notifications\x20only','pidRefreshToken','success','assign','node','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','/download/:type','0.0.0','api-eu.mixpanel.com','Starting\x20Balance\x20Bot\x20update','token','storeFiat','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','No\x20bots\x20running\x20right\x20now','startsWith','server','replace','exp','30\x20min','Unauthorized\x20attempt\x20to\x20get\x20events','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','reset-history','lowdb/adapters/FileSync','Failed\x20to\x20download\x20','userid','/on\x20-\x20start\x20bot(s)\x0a','live','6821144MGZeQR','from','filter','cancel-loading','Unauthorized\x20attempt\x20to\x20confirm\x20message','#RES#\x20','existsSync','2130FbeeVq','Invalid\x20authentication\x20token\x20(2)','clientip','log','createServer','getTime','onText','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','/disable\x20-\x20disable\x20notifications\x0a','Access\x20enabled\x20for\x20','message','Invalid\x20authentication\x20token\x20(1)','length','Invalid\x20username\x20or\x20IP\x20address','Disabled\x20Bot\x20','getSeconds','removeListener','confirm-message','Allow\x20login\x20from\x20IP\x20address\x20<b>','environment','files','number','temporary\x20access\x20not\x20allowed','getDate','remoteAddress','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','#RES#\x20if\x20running\x20on\x20server','whitelist','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','use','telegrammsg','publicKey','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','apiKey','login\x20not\x20required','socket','telegramIpApproval','version.json','Invalid\x20IP\x20address','once','\x20|\x20client:\x20...','production','=>\x20Go\x20to\x20#CYA#http://','Starting\x20new\x20bot\x20|\x20Bot\x20','mixpanel','\x20to\x20','-results.json','Backup\x20file\x20uploaded','Logged\x20in\x20user\x20...','temporary\x20access\x20rejected','sendPortfolioTelegram','settings.','latestversion','all','-config.json','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','sendMetricsTelegram','getHours','bbvReceive','reject','child_process','\x1b[33m','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','randomBytes','Unauthorized\x20attempt\x20to\x20download\x20','All\x20bots\x20running\x20right\x20now','answerCallbackQuery','sort','headers','config/','/output-000.log','4416PKSnAN','emit','map','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','mtime','listen','error','pidExpireLogin','Restore\x20backup\x20file\x20','update-bb','Restoring\x20bot(s)\x20from\x20backup','\x20|\x20','backup-full@','Deleted\x20Bot\x20','bb-secure.json','hex','address','env','\x1b[35m','-events.json','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','/help\x20-\x20show\x20available\x20commands\x0a','showname','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Starting\x20Balance\x20Bot\x20reinstallation','hasOwnProperty','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20delete\x20bot','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','messages','login\x20token\x20generated','slice','temporaryAccessAllowed','Notifications\x20enabled\x0a','express','disabled','15\x20min','telegram2FaApproval','referer','404\x20Not\x20Found','settings','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','ipv6','data','createWriteStream','isValid','debug','tkn','isDirectory','post','logout','access\x20timeout','yargs/yargs','No\x20authentication\x20token','Unauthorized\x20attempt\x20to\x20get\x20portfolio','telegram','catch','2FA\x20required','simple','split','lastmsgemitted','update','\x20|\x20user:\x20...','lowdb','5709YhNqXW','3000','getPortfolio','full','auto','statSync','constructor','remove','type','forEach','botname','invalid\x20credentials','5\x20min','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','params','telegramToken','sortBy','apiSecret','logs','set','user','9afvAQx','bb-settings.json','then','enabled','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','stringify','family','find','Error:\x20Invalid\x20argument\x20','bot.js','mkdirSync','access','manual','updatebotmanager','readFileSync','All','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','loginRequired','bot','express-fileupload','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','apiPassword','alias','#RES#\x20if\x20running\x20locally\x0a','index.html','2FA\x20login\x20required','started','hashSync','output-000.log','stopped','showConfig','store-configuration','Notifications\x20types:\x20'];_0xc2bd=function(){return _0x1f3d47;};return _0xc2bd();}function onKeys(){const _0x5a27f2=new RSA();return new Promise(_0x57fc5b=>{const _0x549600=_0x5bc5;_0x5a27f2[_0x549600(0x2c6)]()['then'](_0x59a309=>{_0x57fc5b(_0x59a309);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x18ec15=_0x72ca9b;let _0x4d363f=getSettings(),_0x3a186c=![];!_0x4d363f['hasOwnProperty'](_0x18ec15(0x297))&&(_0x4d363f[_0x18ec15(0x297)]=0x0,_0x3a186c=!![]);!_0x4d363f[_0x18ec15(0x1f5)]('lastmsgemitted')&&(_0x4d363f['lastmsgemitted']=0x0,_0x3a186c=!![]);!_0x4d363f[_0x18ec15(0x1f5)](_0x18ec15(0x1c9))&&(_0x4d363f[_0x18ec15(0x1c9)]='0.0.0',_0x3a186c=!![]);!_0x4d363f[_0x18ec15(0x1f5)](_0x18ec15(0x16b))&&(_0x4d363f[_0x18ec15(0x16b)]=![],_0x3a186c=!![]);if(_0x3a186c)storeSettings(_0x4d363f);try{fs[_0x18ec15(0x13d)](configbackuppath,{'withFileTypes':!![]})[_0x18ec15(0x225)](_0x49e2df=>{const _0x13f2ff=_0x18ec15;if(!_0x49e2df['isDirectory']()){if(!_0x49e2df['name'][_0x13f2ff(0x181)]('backup-full@'))fs[_0x13f2ff(0x104)](configbackuppath+_0x49e2df[_0x13f2ff(0x151)]);}else fs[_0x13f2ff(0x12a)](configbackuppath+_0x49e2df[_0x13f2ff(0x151)],{'recursive':!![]});});}catch(_0x1e006e){logger['debug'](_0x18ec15(0x158),_0x1e006e);}}function storeConfiguration(_0x529dc2){const _0x3c9012=_0x72ca9b;dbConfig[_0x3c9012(0x10f)]('bots')[_0x3c9012(0x223)]()['write'](),_0x529dc2[_0x3c9012(0x225)](_0x573058=>{const _0x4913cf=_0x3c9012;delete _0x573058[_0x4913cf(0x2aa)];}),dbConfig[_0x3c9012(0x10f)](_0x3c9012(0x166))[_0x3c9012(0xfa)](..._0x529dc2)[_0x3c9012(0x2a2)](),config=_0x529dc2;}function resetPassword(){const _0xad335e=_0x72ca9b;tgBot&&settings[_0xad335e(0x2b0)]&&(tgBot[_0xad335e(0x1a5)](_0xad335e(0x282)),tgBot['sendMessage'](settings[_0xad335e(0x2b0)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0xad335e(0x25a)},{'text':'no','callback_data':'no'}]]}})[_0xad335e(0x214)](_0x3e9a6b=>{telegramError(_0x3e9a6b);}),tgBot['on'](_0xad335e(0x282),async _0xf828f9=>{const _0x26066b=_0xad335e,_0x2aecbb=_0xf828f9[_0x26066b(0x207)],_0x17a16a=_0xf828f9['message'];tgBot['answerCallbackQuery'](_0xf828f9['id'])[_0x26066b(0x233)](async()=>{const _0x1c78d3=_0x26066b;if(_0x2aecbb!='no'){const _0x2984de=0xf,_0x47ea21=_0x1c78d3(0xf1),_0x47c787=Array[_0x1c78d3(0x18f)](crypto[_0x1c78d3(0x25f)](new Uint32Array(_0x2984de)))[_0x1c78d3(0x1de)](_0x2a191c=>_0x47ea21[_0x2a191c%_0x47ea21['length']])['join'](''),_0x5dabff=bcrypt[_0x1c78d3(0x24c)](_0x47c787,saltRounds);storeSettings({'bbPassword':_0x5dabff}),await tgBot['sendMessage'](_0x17a16a[_0x1c78d3(0x2ca)]['id'],_0x1c78d3(0x28c)+_0x47c787,{'parse_mode':_0x1c78d3(0x25e)})['catch'](_0x19b1dc=>{telegramError(_0x19b1dc);});}else await tgBot[_0x1c78d3(0x267)](_0x17a16a[_0x1c78d3(0x2ca)]['id'],_0x1c78d3(0x14f))['catch'](_0x1ee953=>{telegramError(_0x1ee953);});}),tgBot[_0x26066b(0x1a5)](_0x26066b(0x282));}));}async function confirmRestore(_0xc826be,_0x49f813){const _0xaa6c20=_0x72ca9b;io['to']('botmanager')[_0xaa6c20(0x1dd)](_0xaa6c20(0x2c0),_0xaa6c20(0x2b4),_0xaa6c20(0x175)),tgBot&&settings[_0xaa6c20(0x2b0)]&&(tgBot[_0xaa6c20(0x1a5)]('callback_query'),await tgBot[_0xaa6c20(0x267)](settings[_0xaa6c20(0x2b0)],_0xaa6c20(0x19c),{'parse_mode':_0xaa6c20(0x25e),'reply_markup':{'inline_keyboard':[[{'text':_0xaa6c20(0x25a),'callback_data':_0xaa6c20(0x25a)},{'text':'no','callback_data':'no'}]]}})[_0xaa6c20(0x214)](_0x40aebd=>{telegramError(_0x40aebd);}),tgBot['on'](_0xaa6c20(0x282),async _0x244b0f=>{const _0x5d7d5b=_0xaa6c20,_0x584824=_0x244b0f[_0x5d7d5b(0x207)],_0x1b29b5=_0x244b0f[_0x5d7d5b(0x19f)];tgBot[_0x5d7d5b(0x1d7)](_0x244b0f['id'])[_0x5d7d5b(0x233)](async()=>{const _0x544220=_0x5d7d5b;_0x584824==_0x544220(0x25a)?(await tgBot[_0x544220(0x267)](_0x1b29b5[_0x544220(0x2ca)]['id'],_0x544220(0x1e6),{'parse_mode':_0x544220(0x25e)})[_0x544220(0x214)](_0x16f89d=>{telegramError(_0x16f89d);}),unzipFile(_0xc826be,_0x49f813)):(logger['debug']('Restore\x20process\x20aborted'),await tgBot[_0x544220(0x267)](_0x1b29b5[_0x544220(0x2ca)]['id'],_0x544220(0x271))[_0x544220(0x214)](_0x3809f8=>{telegramError(_0x3809f8);}));}),tgBot[_0x5d7d5b(0x1a5)](_0x5d7d5b(0x282));}));}function getServerTime(){const _0x2e58c4=_0x72ca9b,_0x33f756=new Date();return _0x33f756[_0x2e58c4(0x288)]()+'/'+(_0x33f756[_0x2e58c4(0x255)]()+0x1)[_0x2e58c4(0x2b3)]()[_0x2e58c4(0x283)](0x2,'0')+'/'+_0x33f756[_0x2e58c4(0x1ac)]()[_0x2e58c4(0x2b3)]()[_0x2e58c4(0x283)](0x2,'0')+'\x20'+_0x33f756[_0x2e58c4(0x1ce)]()[_0x2e58c4(0x2b3)]()[_0x2e58c4(0x283)](0x2,'0')+':'+_0x33f756['getMinutes']()['toString']()[_0x2e58c4(0x283)](0x2,'0')+':'+_0x33f756[_0x2e58c4(0x1a4)]()[_0x2e58c4(0x2b3)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4b177a=_0x72ca9b,_0x3df61d=shiftedTime();return _0x3df61d['getFullYear']()+'/'+(_0x3df61d[_0x4b177a(0x255)]()+0x1)[_0x4b177a(0x2b3)]()['padStart'](0x2,'0')+'/'+_0x3df61d[_0x4b177a(0x1ac)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x3df61d[_0x4b177a(0x1ce)]()['toString']()['padStart'](0x2,'0')+':'+_0x3df61d[_0x4b177a(0x291)]()['toString']()[_0x4b177a(0x283)](0x2,'0')+':'+_0x3df61d[_0x4b177a(0x1a4)]()[_0x4b177a(0x2b3)]()[_0x4b177a(0x283)](0x2,'0');}function getCleanTimeStamp(){const _0x56104e=_0x72ca9b,_0x3a0c26=shiftedTime();return _0x3a0c26[_0x56104e(0x288)]()+(_0x3a0c26[_0x56104e(0x255)]()+0x1)[_0x56104e(0x2b3)]()[_0x56104e(0x283)](0x2,'0')+_0x3a0c26['getDate']()[_0x56104e(0x2b3)]()['padStart'](0x2,'0')+'-'+_0x3a0c26[_0x56104e(0x1ce)]()['toString']()[_0x56104e(0x283)](0x2,'0')+_0x3a0c26[_0x56104e(0x291)]()[_0x56104e(0x2b3)]()['padStart'](0x2,'0')+_0x3a0c26[_0x56104e(0x1a4)]()['toString']()[_0x56104e(0x283)](0x2,'0');}function shiftedTime(){const _0x284d50=_0x72ca9b,_0x4e8636=new Date();let _0x3687d8=_0x4e8636;if(settings['timeshift']&&settings[_0x284d50(0x268)]!==0x0)_0x3687d8=fns[_0x284d50(0x270)](_0x4e8636,{'hours':settings[_0x284d50(0x268)]});return _0x3687d8;}function startScheduler(){const _0x5782db=_0x72ca9b,_0x2b8ea9=new Date()[_0x5782db(0x25c)](),_0x57432b=shiftedTime()[_0x5782db(0x1ce)]();_0x57432b==0x4&&backupConfigFiles();_0x57432b==0x0&&rotateLogFiles();_0x2b8ea9%0x6==0x0&&triggerAnalytics();_0x2b8ea9%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2e1bc4){const _0x23656f=_0x72ca9b;logger['debug'](_0x23656f(0x1e4)+_0x2e1bc4);const _0x3d2353=getBotsWithMode();_0x3d2353[_0x23656f(0x1a1)]>0x0?confirmRestore(configbackuppath,_0x2e1bc4):unzipFile(configbackuppath,_0x2e1bc4);}async function getBackupFiles(_0x3445bc=null){const _0x55f747=_0x72ca9b;let _0x115df8=[],_0x2aacaa=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2aacaa['sort']((_0x361584,_0xe67496)=>_0x361584[_0x55f747(0x151)]<_0xe67496[_0x55f747(0x151)]?0x1:_0xe67496[_0x55f747(0x151)]<_0x361584['name']?-0x1:0x0),_0x2aacaa[_0x55f747(0x225)](_0x586807=>{const _0x4a6229=_0x55f747;if(!_0x586807['isDirectory']()&&_0x586807['name'][_0x4a6229(0x181)](_0x4a6229(0x1e8))&&_0x586807['name']['endsWith'](_0x4a6229(0x160))){const _0x472c69=formatDate(fs[_0x4a6229(0x221)](configbackuppath+_0x586807[_0x4a6229(0x151)])[_0x4a6229(0x1e0)]);_0x115df8[_0x4a6229(0xfa)]({'name':_0x586807[_0x4a6229(0x151)],'mtime':_0x472c69});}});if(_0x3445bc)io['to'](_0x3445bc)[_0x55f747(0x1dd)]('backup-files',_0x115df8);else return _0x115df8;}async function backupConfigFiles(){const _0x3a0bb3=_0x72ca9b;await zipFiles(_0x3a0bb3(0x11f));const _0xb8a97b=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x3a0bb3(0x129),configbackuppath+(_0x3a0bb3(0x1e8)+_0xb8a97b+'.zip'));let _0x2cb790=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2cb790['sort']((_0x388ff1,_0x372115)=>_0x388ff1[_0x3a0bb3(0x151)]<_0x372115[_0x3a0bb3(0x151)]?0x1:_0x372115[_0x3a0bb3(0x151)]<_0x388ff1[_0x3a0bb3(0x151)]?-0x1:0x0),_0x2cb790[_0x3a0bb3(0x1a1)]>maxBackups&&fs[_0x3a0bb3(0x104)](configbackuppath+_0x2cb790[_0x2cb790[_0x3a0bb3(0x1a1)]-0x1][_0x3a0bb3(0x151)]);}function rotateLogFiles(){const _0x11cf94=_0x72ca9b,_0x2c3642=fs[_0x11cf94(0x221)](logspath+_0x11cf94(0x24d)),_0x1a0e62=_0x2c3642[_0x11cf94(0x275)]/0x400;if(_0x1a0e62>0x64){let _0x5e1c8b=fs[_0x11cf94(0x13d)](logspath,{'withFileTypes':!![]});_0x5e1c8b[_0x11cf94(0x1d8)]((_0xde62f6,_0x1e91dc)=>_0xde62f6[_0x11cf94(0x151)]<_0x1e91dc['name']?0x1:_0x1e91dc[_0x11cf94(0x151)]<_0xde62f6[_0x11cf94(0x151)]?-0x1:0x0),_0x5e1c8b[_0x11cf94(0x225)](_0x227d2b=>{const _0x3e0126=_0x11cf94;if(_0x227d2b[_0x3e0126(0x151)]==_0x3e0126(0xee))fs['copyFileSync'](logspath+_0x227d2b[_0x3e0126(0x151)],logspath+_0x3e0126(0x13c));if(_0x227d2b[_0x3e0126(0x151)]==_0x3e0126(0x263))fs[_0x3e0126(0x150)](logspath+_0x227d2b['name'],logspath+_0x3e0126(0xee));_0x227d2b[_0x3e0126(0x151)]=='output-000.log'&&(fs[_0x3e0126(0x150)](logspath+_0x227d2b[_0x3e0126(0x151)],logspath+_0x3e0126(0x263)),fs[_0x3e0126(0x101)](logspath+_0x227d2b[_0x3e0126(0x151)],''));});}}async function zipFiles(_0x5a64a9){const _0x25456a=_0x72ca9b;let _0x2bd352;if(_0x5a64a9==_0x25456a(0x22e))_0x2bd352=logspath;if(_0x5a64a9==_0x25456a(0x2ad))_0x2bd352=configpath;if(_0x5a64a9==_0x25456a(0x11f))_0x2bd352=configpath;let _0x4e2ba7=fs[_0x25456a(0x13d)](_0x2bd352,{'withFileTypes':!![]});const _0x4ad914=new require(_0x25456a(0x159))();_0x4e2ba7[_0x25456a(0x225)](_0x17374b=>{const _0x16f03d=_0x25456a;if(!_0x17374b['isDirectory']()){let _0x1309b3=fs[_0x16f03d(0x23f)](_0x2bd352+_0x17374b[_0x16f03d(0x151)]);if(_0x5a64a9==_0x16f03d(0x2ad)){const _0x323b15=/^bot-[0-9]{3}-config.json$/,_0x55ba05=_0x323b15[_0x16f03d(0xef)](_0x17374b[_0x16f03d(0x151)]);if(_0x55ba05){const _0xd87df0=JSON[_0x16f03d(0x154)](_0x1309b3);if(_0xd87df0[_0x16f03d(0x243)][0x0]){_0xd87df0[_0x16f03d(0x243)][0x0][_0x16f03d(0x1b6)]=_0x16f03d(0x161),_0xd87df0[_0x16f03d(0x243)][0x0][_0x16f03d(0x22d)]=_0x16f03d(0x161);if(_0xd87df0[_0x16f03d(0x243)][0x0][_0x16f03d(0x246)])_0xd87df0[_0x16f03d(0x243)][0x0][_0x16f03d(0x246)]=_0x16f03d(0x161);}_0x1309b3=JSON[_0x16f03d(0x236)](_0xd87df0,null,0x2);}if(_0x17374b[_0x16f03d(0x151)]==_0x16f03d(0x232)){const _0x2f91af=JSON[_0x16f03d(0x154)](_0x1309b3);if(_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0x242)])_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0x242)]=![];if(_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0xf7)])_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0xf7)]=_0x16f03d(0x161);if(_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0x22b)])_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0x22b)]=_0x16f03d(0x161);if(_0x2f91af['settings'][_0x16f03d(0x2b0)])_0x2f91af[_0x16f03d(0x204)][_0x16f03d(0x2b0)]=null;_0x1309b3=JSON[_0x16f03d(0x236)](_0x2f91af,null,0x2);}if(_0x17374b[_0x16f03d(0x151)]!=_0x16f03d(0x1ea))_0x4ad914['file'](_0x17374b[_0x16f03d(0x151)],_0x1309b3);}else _0x4ad914['file'](_0x17374b[_0x16f03d(0x151)],_0x1309b3);}});const _0x1c9ed8=_0x4ad914['generate']({'base64':![],'compression':_0x25456a(0x12c)});fs[_0x25456a(0x101)](zippath+(_0x5a64a9+'.zip'),_0x1c9ed8,_0x25456a(0x132));}async function unzipFile(_0xa5be70,_0x58ee0f){const _0x3f0a54=_0x72ca9b;fs[_0x3f0a54(0x13d)](configpath,{'withFileTypes':!![]})[_0x3f0a54(0x225)](_0x1d3dcc=>{const _0x294b6f=_0x3f0a54;if(!_0x1d3dcc['isDirectory']())fs['rmSync'](configpath+_0x1d3dcc[_0x294b6f(0x151)]);});const _0x297fe4=fs[_0x3f0a54(0x23f)](_0xa5be70+_0x58ee0f,_0x3f0a54(0x132)),_0x147a95=new require('node-zip')(_0x297fe4,{'base64':![],'checkCRC32':!![]});Object[_0x3f0a54(0x11e)](_0x147a95[_0x3f0a54(0x1a9)])[_0x3f0a54(0x225)](_0x1ddaf5=>{const _0x4c7d50=_0x3f0a54,_0x4fa02c=_0x147a95['files'][_0x1ddaf5];fs['writeFileSync'](configpath+_0x4fa02c['name'],_0x4fa02c[_0x4c7d50(0x108)]);}),fs[_0x3f0a54(0x13d)](temppath,{'withFileTypes':!![]})['forEach'](_0x53ecff=>{const _0x1d9e0d=_0x3f0a54;if(!_0x53ecff[_0x1d9e0d(0x20c)]())fs[_0x1d9e0d(0x12a)](temppath+_0x53ecff[_0x1d9e0d(0x151)]);}),logger['debug'](_0x3f0a54(0x274)),process[_0x3f0a54(0x165)]({'restore':!![]},_0x8abc2d=>{});}async function getPublicIp(){try{const _0x410db5=await axios['get']('https://api.ipify.org?format=json');publicip=_0x410db5['data']['ip'];}catch(_0x254f8a){}}async function triggerAnalytics(){const _0x223c87=_0x72ca9b;if(!publicip)await getPublicIp();const _0x41cc85=getBotsWithMode();let _0x241297=0x0;_0x41cc85['forEach'](_0x5a62ae=>{const _0x50eeed=_0x5bc5;if(_0x5a62ae[_0x50eeed(0x257)]===_0x50eeed(0x234))_0x241297++;});const _0x5b661f=getBotExchanges();mixpanel['track'](_0x223c87(0x116),{'distinct_id':settings[_0x223c87(0x18b)],'ip':publicip,'version':serverversion,'numbots':_0x41cc85[_0x223c87(0x1a1)],'numbotsenabled':_0x241297,'exchanges':_0x5b661f,'environment':environment});}async function getMessages(){const _0x4b1a79=_0x72ca9b,_0x4d47da=_0x4b1a79(0x11b),_0x237ea1=new GraphQLClient(_0x4d47da),_0x5cd46d={'authorization':_0x4b1a79(0x2b8)},_0x455ad2=serverversion[_0x4b1a79(0x217)]('.'),_0x3c1e0e=_0x455ad2[0x0]+'.'+_0x455ad2[0x1],_0x4c0602=Math[_0x4b1a79(0x11d)](settings[_0x4b1a79(0x297)],settings[_0x4b1a79(0x218)]),_0x4dbf09={'last':parseInt(_0x4c0602),'bbm':_0x3c1e0e},_0x5ce70d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4683c8;try{_0x4683c8=await _0x237ea1['request'](_0x5ce70d,_0x4dbf09,_0x5cd46d);}catch(_0x13b286){}if(_0x4683c8&&_0x4683c8[_0x4b1a79(0x1f9)]){let _0x5d63ea=settings[_0x4b1a79(0x297)];newMessages=[];for(const _0x4f7def of _0x4683c8['messages']){newMessages[_0x4b1a79(0xfa)](_0x4f7def);let _0x1e285c=![];_0x4f7def[_0x4b1a79(0x11c)]&&(updateSetting(_0x4b1a79(0x1c9),_0x4f7def[_0x4b1a79(0x11c)]),_0x1e285c=isNewerVersion(serverversion,_0x4f7def[_0x4b1a79(0x11c)])||serverversion==_0x4f7def[_0x4b1a79(0x11c)]);if(!_0x1e285c&&_0x4f7def[_0x4b1a79(0x1aa)]>_0x5d63ea){if(_0x4f7def['bbvReceive']===_0x4b1a79(0x124)||serverversion['startsWith'](_0x4f7def[_0x4b1a79(0x1cf)])){let _0x1b2fd4=''+_0x4f7def[_0x4b1a79(0x26f)]+'\x0a\x0a'+_0x4f7def[_0x4b1a79(0x19f)];const _0xa1b14f=await sendTelegramMsg(toTelegramMarkdown(_0x1b2fd4),_0x4b1a79(0x272));if(_0xa1b14f)_0x5d63ea=_0x4f7def[_0x4b1a79(0x1aa)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x4b1a79(0x297),_0x5d63ea),emitMessages();}}function emitMessages(){const _0x6a8680=_0x72ca9b,_0x5d99cf=settings[_0x6a8680(0x218)];let _0x33c5f3=[];newMessages['forEach'](_0x3be4e1=>{const _0xfd3493=_0x6a8680;_0x3be4e1[_0xfd3493(0x1aa)]>_0x5d99cf&&_0x33c5f3[_0xfd3493(0xfa)](_0x3be4e1);}),_0x33c5f3[_0x6a8680(0x1a1)]>0x0&&getAllClients()[_0x6a8680(0x225)](_0x1c962=>{const _0x2caa1a=_0x6a8680;getSocket(_0x1c962['id'])[_0x2caa1a(0x1dd)](_0x2caa1a(0x19f),_0x33c5f3);});}function confirmMessage(_0x4e03da){const _0x2ec787=_0x72ca9b;updateSetting(_0x2ec787(0x218),Number(_0x4e03da));}function isNewerVersion(_0x426ee2,_0x44eb63){const _0x2696a3=_0x72ca9b,_0x7b8ab0=_0x44eb63[_0x2696a3(0x217)]('.'),_0x4e61d6=_0x426ee2[_0x2696a3(0x217)]('.');for(var _0x13563e=0x0;_0x13563e<_0x4e61d6['length'];_0x13563e++){const _0x3f05e8=~~_0x4e61d6[_0x13563e],_0x5dccca=~~_0x7b8ab0[_0x13563e];if(_0x3f05e8>_0x5dccca)return!![];if(_0x3f05e8<_0x5dccca)return![];}return![];}function toTelegramMarkdown(_0x224858){const _0x29f6b3=_0x72ca9b,_0x5d15cc=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5b4954=/\*{2}(.+?)\*{2}/gim;return _0x224858=_0x224858[_0x29f6b3(0x183)](_0x5d15cc,_0x29f6b3(0x157))[_0x29f6b3(0x183)](_0x5b4954,'*$1*'),_0x224858;}async function validateConfigFile(){const _0x472e85=_0x72ca9b,_0x56ba08=dbConfig[_0x472e85(0x10f)](_0x472e85(0x166))[_0x472e85(0x22c)](_0x472e85(0x2c1))[_0x472e85(0x14d)]()||[];if(_0x56ba08[_0x472e85(0x1a1)]==0x0){let _0x46e608=0x0,_0x154abf=[];const _0x31a8a3=/^bot-([0-9]{3})-config.json$/,_0x588343=fs[_0x472e85(0x13d)](configpath);_0x588343['forEach'](_0x590ce5=>{const _0x51c3dc=_0x472e85,_0x344f7a=_0x31a8a3['exec'](_0x590ce5);if(_0x344f7a){const _0xe2456e=_0x344f7a[0x1];let _0xe1d64a=getBotAttributes(_0xe2456e);_0x154abf[_0x51c3dc(0xfa)]({'botID':_0xe2456e,'botname':_0xe1d64a[_0x51c3dc(0x226)],'status':'disabled','live':_0x51c3dc(0x24e)}),_0x46e608++;}}),_0x46e608!=0x0&&(dbConfig[_0x472e85(0x10f)](_0x472e85(0x166))[_0x472e85(0x176)](_0x154abf)[_0x472e85(0x2a2)](),config=_0x154abf,restoredConfigFile=_0x46e608);}}async function restoreConfigNotify(_0x77c4d4){const _0x3f2ccb=_0x72ca9b;let _0xc622df;if(restoredConfigFile==0x1)_0xc622df=_0x3f2ccb(0x2b7);else _0xc622df=_0x3f2ccb(0x141);if(_0x77c4d4)io['to'](_0x3f2ccb(0x2a0))[_0x3f2ccb(0x1dd)](_0x3f2ccb(0x2c0),_0xc622df);else{logger[_0x3f2ccb(0x216)](_0x3f2ccb(0x156)),logger[_0x3f2ccb(0x216)](_0xc622df),logger[_0x3f2ccb(0x216)](_0x3f2ccb(0x156)),logger[_0x3f2ccb(0x216)]('');if(tgBot&&settings[_0x3f2ccb(0x2b0)]&&settings['telegramEvents']!=_0x3f2ccb(0x100))tgBot[_0x3f2ccb(0x267)](settings['telegramChatId'],_0x3f2ccb(0x2cf)+_0xc622df)[_0x3f2ccb(0x214)](_0x4db3cb=>{telegramError(_0x4db3cb);});}}function validateCredentials(_0x53c9d3,_0x3cf1a5){const _0x2838ee=_0x72ca9b;if(_0x53c9d3[_0x2838ee(0x26a)]==settings['bbUsername']&&bcrypt[_0x2838ee(0x136)](_0x53c9d3['password'],settings['bbPassword'])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x2838ee(0x24a),'token':null};else{const _0x2c3244=generateLoginToken(_0x3cf1a5);return{'allow':!![],'reason':_0x2838ee(0x1fa),'token':_0x2c3244};}}else return{'allow':![],'reason':_0x2838ee(0x227),'token':null};}function refreshToken(_0x2d7b23){const _0x1b9289=_0x72ca9b,_0x2cbfcc=generateLoginToken(_0x2d7b23);return{'allow':!![],'reason':_0x1b9289(0x1fa),'token':_0x2cbfcc};}function validateAccess(_0x4e9d75,_0x101e16,_0x39a9ab){const _0x5dd3c8=_0x72ca9b,_0x279577=_0x39a9ab?_0x39a9ab:devices[_0x101e16]['ip'];let _0x385859;const _0xe689b1=_0x4ea045=>{const _0x3d5334=_0x5bc5;if(settings[_0x3d5334(0x242)]){if(settings[_0x3d5334(0x139)]){if(telegram2FaApproved(_0x101e16)){const _0x4c2ea6=generateLoginToken(_0x101e16);return{'allow':!![],'reason':_0x3d5334(0x10e),'token':_0x4c2ea6};}else return{'allow':![],'reason':_0x3d5334(0x2c5),'token':null};}else return _0x385859=validToken(_0x4ea045,_0x101e16),_0x385859[_0x3d5334(0x1f5)](_0x3d5334(0x175))?{'allow':!![],'reason':_0x3d5334(0x296),'token':_0x4ea045}:{'allow':![],'reason':_0x3d5334(0x2c5),'token':null};}else return{'allow':!![],'reason':_0x3d5334(0x1b7),'token':null};};if(settings['whitelistEnabled']){let _0x5bb11c=[...settings[_0x5dd3c8(0x1b0)],_0x5dd3c8(0x25b),_0x5dd3c8(0x15d),_0x5dd3c8(0x27e)];if(_0x5bb11c[_0x5dd3c8(0x264)](_0x279577))return _0xe689b1(_0x4e9d75);else{_0x385859=validToken(_0x4e9d75,_0x101e16);if(_0x385859[_0x5dd3c8(0x1f5)](_0x5dd3c8(0x175)))return _0xe689b1(_0x4e9d75);else{if(telegramIpApproved(_0x101e16)){const _0x35018f=generateToken(_0x101e16);return _0x385859=_0xe689b1(_0x4e9d75),_0x385859['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x35018f}:_0x385859;}else return settings[_0x5dd3c8(0x1fc)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x5dd3c8(0x1ab),'token':null};}}}else return _0xe689b1(_0x4e9d75);}function timelyDecrypt(_0x10ae28,_0x5e997f=!![]){const _0x707f13=_0x72ca9b;if(_0x10ae28)try{const _0x4fa743=crypt[_0x707f13(0x14e)](secure[_0x707f13(0x102)],_0x10ae28)[_0x707f13(0x19f)],_0x310f7f=_0x4fa743[_0x707f13(0x217)]('@')[0x0],_0x4a5e4e=_0x4fa743[_0x707f13(0x217)]('@')[0x1],_0x2fae5a=new Date()['getTime']();if(_0x5e997f){if(_0x2fae5a-_0x4a5e4e<maxSecretAge*0x3e8)return _0x310f7f;else return![];}else return _0x310f7f;}catch(_0x12ef1f){return![];}else return![];}const validToken=(_0x539cc1,_0xde8a55)=>{const _0x67d120=_0x72ca9b,_0x2c85eb=devices[_0xde8a55]['ip'];if(!_0x539cc1)return{'error':_0x67d120(0x211)};for(let _0x48f854 of blacklist){if(_0x48f854[_0x67d120(0x17d)]==_0x539cc1)return{'error':'Token\x20blacklisted'};}let _0x4fd153;try{_0x4fd153=jwt['verify'](_0x539cc1,secure['secret']+_0xde8a55);}catch{return{'error':_0x67d120(0x1a0)};}if(!_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x197))&&!_0x4fd153['hasOwnProperty'](_0x67d120(0x26a))||!_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x184)))return{'error':_0x67d120(0x196)};if(!_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x26a))&&_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x197))){const {clientip:_0x10e64e}=_0x4fd153;return _0x2c85eb==_0x10e64e?{'success':_0x67d120(0x2a7)}:{'error':_0x67d120(0x1bb)};}else{if(_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x26a))&&_0x4fd153[_0x67d120(0x1f5)](_0x67d120(0x197))){const {username:_0xa12fa5,clientip:_0x262f78}=_0x4fd153;return settings[_0x67d120(0x148)]==_0xa12fa5&&_0x2c85eb==_0x262f78?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x67d120(0x1a2)};}}},generateLoginToken=_0x21fb16=>{const _0x2e3e3b=_0x72ca9b;if(_0x21fb16){const _0x664ded=devices[_0x21fb16]['ip'];return jwt[_0x2e3e3b(0x2b6)]({'username':settings[_0x2e3e3b(0x148)],'clientip':_0x664ded},secure[_0x2e3e3b(0x287)]+_0x21fb16,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x9131dd=>{const _0x2c884f=_0x72ca9b;if(_0x9131dd){const _0x5e7da5=devices[_0x9131dd]['ip'];return jwt['sign']({'clientip':_0x5e7da5},secure[_0x2c884f(0x287)]+_0x9131dd,{'expiresIn':devices[_0x9131dd][_0x2c884f(0x1b9)][_0x2c884f(0x2b5)]*0x3c});}else return![];},telegramIpApproved=_0x1d5960=>{const _0x4a45e3=_0x72ca9b;let _0x219f5c=![];return devices[_0x1d5960][_0x4a45e3(0x1b9)]&&devices[_0x1d5960]['telegramIpApproval'][_0x4a45e3(0x2b5)]!=_0x4a45e3(0x1d0)&&(_0x219f5c=devices[_0x1d5960][_0x4a45e3(0x1b9)][_0x4a45e3(0x197)]==devices[_0x1d5960]['ip']&&new Date()[_0x4a45e3(0x19a)]()-devices[_0x1d5960][_0x4a45e3(0x1b9)][_0x4a45e3(0x106)]<devices[_0x1d5960]['telegramIpApproval'][_0x4a45e3(0x2b5)]*0x3c*0x3e8),_0x219f5c;},telegram2FaApproved=_0x11c1aa=>{const _0x96bf37=_0x72ca9b;let _0x1ca889=![];return devices[_0x11c1aa][_0x96bf37(0x201)]&&devices[_0x11c1aa][_0x96bf37(0x201)][_0x96bf37(0x2b5)]!=_0x96bf37(0x1d0)&&(_0x1ca889=devices[_0x11c1aa][_0x96bf37(0x201)][_0x96bf37(0x197)]==devices[_0x11c1aa]['ip']&&new Date()[_0x96bf37(0x19a)]()-devices[_0x11c1aa][_0x96bf37(0x201)]['timestamp']<devices[_0x11c1aa][_0x96bf37(0x201)][_0x96bf37(0x2b5)]*0x3c*0x3e8),_0x1ca889;},normalizeIP=_0xef740=>{const _0x38c84e=_0x72ca9b;let _0x228b10=null,_0x3af7f8=null;if(ipaddr[_0x38c84e(0x209)](_0xef740)){const _0x3212ea=ipaddr[_0x38c84e(0x154)](_0xef740);_0x3212ea['kind']()===_0x38c84e(0x206)?(_0x3212ea[_0x38c84e(0x16a)]()&&(_0x228b10=_0x3212ea[_0x38c84e(0x2ba)]()[_0x38c84e(0x2b3)]()),_0x3af7f8=_0x3212ea[_0x38c84e(0x2b3)]()):(_0x228b10=_0x3212ea[_0x38c84e(0x2b3)](),_0x3af7f8=_0x3212ea['toIPv4MappedAddress']()['toString']());}return{'show':_0x228b10?_0x228b10:_0x3af7f8,'store':_0x3af7f8};};function formatDate(_0x403cdb){const _0x532cf2=_0x72ca9b;return _0x403cdb['getFullYear']()+'/'+(_0x403cdb[_0x532cf2(0x255)]()+0x1)[_0x532cf2(0x2b3)]()[_0x532cf2(0x283)](0x2,'0')+'/'+_0x403cdb['getDate']()['toString']()[_0x532cf2(0x283)](0x2,'0')+'\x20'+_0x403cdb['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x403cdb['getMinutes']()[_0x532cf2(0x2b3)]()[_0x532cf2(0x283)](0x2,'0')+':'+_0x403cdb[_0x532cf2(0x1a4)]()[_0x532cf2(0x2b3)]()[_0x532cf2(0x283)](0x2,'0');}function sleep(_0x4c9c9b){return new Promise(_0x18c64c=>setTimeout(_0x18c64c,_0x4c9c9b));}