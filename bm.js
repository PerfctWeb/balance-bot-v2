const _0xdb1f97=_0x699a;(function(_0x1046f0,_0x37c38){const _0x521be8=_0x699a,_0x2d7b81=_0x1046f0();while(!![]){try{const _0xd70c8e=-parseInt(_0x521be8(0x15f))/0x1*(parseInt(_0x521be8(0x24d))/0x2)+parseInt(_0x521be8(0x14a))/0x3*(parseInt(_0x521be8(0x14d))/0x4)+parseInt(_0x521be8(0x1ee))/0x5+parseInt(_0x521be8(0x228))/0x6+parseInt(_0x521be8(0x137))/0x7*(-parseInt(_0x521be8(0x229))/0x8)+-parseInt(_0x521be8(0x164))/0x9+parseInt(_0x521be8(0x176))/0xa;if(_0xd70c8e===_0x37c38)break;else _0x2d7b81['push'](_0x2d7b81['shift']());}catch(_0x3a16f5){_0x2d7b81['push'](_0x2d7b81['shift']());}}}(_0x586e,0xe8801));const _0x231cd2=function(){let _0xbbc7fe=!![];return function(_0x2d9897,_0x2d19c9){const _0x38261f=_0xbbc7fe?function(){const _0x410164=_0x699a;if(_0x2d19c9){const _0x1b84f=_0x2d19c9[_0x410164(0x178)](_0x2d9897,arguments);return _0x2d19c9=null,_0x1b84f;}}:function(){};return _0xbbc7fe=![],_0x38261f;};}(),_0x3383c6=_0x231cd2(this,function(){const _0x6f0ca9=_0x699a;return _0x3383c6[_0x6f0ca9(0x238)]()[_0x6f0ca9(0x18e)](_0x6f0ca9(0x168))[_0x6f0ca9(0x238)]()[_0x6f0ca9(0x243)](_0x3383c6)['search']('(((.+)+)+)+$');});_0x3383c6();'use strict';process[_0xdb1f97(0x1c6)][_0xdb1f97(0x24f)]=0x1;const childProcess=require(_0xdb1f97(0x234)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0xdb1f97(0x12e)),low=require('lowdb'),path=require(_0xdb1f97(0x1e2)),crypto=require('crypto'),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0xdb1f97(0x13b)),analyticsLib=require(_0xdb1f97(0x20a))[_0xdb1f97(0x1cd)],googleAnalytics=require(_0xdb1f97(0x1ec))[_0xdb1f97(0x1cd)],ipaddr=require(_0xdb1f97(0x192)),argv=require(_0xdb1f97(0x262))(process[_0xdb1f97(0x1c4)][_0xdb1f97(0x261)](0x2))[_0xdb1f97(0x1c4)],PORT=argv[_0xdb1f97(0x130)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0xdb1f97(0x25a)](PORT))return console[_0xdb1f97(0x1a1)](_0xdb1f97(0x24e)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0xdb1f97(0x237)](0x1);const HOST=argv[_0xdb1f97(0x1c8)]||null,userID=argv[_0xdb1f97(0x213)]||'';let bbpath=_0xdb1f97(0x16e),bbpath2='';const botfile=_0xdb1f97(0x225),configfile=_0xdb1f97(0x148),settingsfile=_0xdb1f97(0x1f3),securefile=_0xdb1f97(0x136),validInstallation=fs[_0xdb1f97(0x204)]('../install.js');!fs[_0xdb1f97(0x204)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0xdb1f97(0x171)+userID+'/':bbpath+_0xdb1f97(0x171),configbackuppath=configpath+_0xdb1f97(0x1a7);!fs[_0xdb1f97(0x204)](configpath)&&fs[_0xdb1f97(0x20c)](configpath);!fs[_0xdb1f97(0x204)](configbackuppath)&&fs[_0xdb1f97(0x20c)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xdb1f97(0x172)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0xdb1f97(0x1dc)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xdb1f97(0x172)]({'secure':{},'blacklist':[]})[_0xdb1f97(0x1dc)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0xdb1f97(0x1fa)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xdb1f97(0x133))[_0xdb1f97(0x18d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0xdb1f97(0x193)),app=express(),http=require(_0xdb1f97(0x23b))[_0xdb1f97(0x241)](app);app['use'](express[_0xdb1f97(0x1a2)](path['join'](__dirname,bbpath2,'build2'))),app['use'](express[_0xdb1f97(0x1a2)](path[_0xdb1f97(0x22a)](__dirname,bbpath2,'build'))),app[_0xdb1f97(0x17e)]('/',function(_0x191ed0,_0x255f4d){const _0x377de9=_0xdb1f97;_0x255f4d[_0x377de9(0x19b)](path[_0x377de9(0x22a)](__dirname,bbpath2,_0x377de9(0x1ac),_0x377de9(0x186)));}),app['get'](_0xdb1f97(0x12a),function(_0x18e74f,_0xc31498){const _0x2b2816=_0xdb1f97;_0xc31498[_0x2b2816(0x19b)](path[_0x2b2816(0x22a)](__dirname,bbpath2,'build',_0x2b2816(0x186)));}),app[_0xdb1f97(0x17e)]('/:bot/portfolio',(_0x1efba6,_0x252d39)=>{const _0x1dd595=_0xdb1f97;_0x252d39['sendFile'](path['join'](__dirname,bbpath2,'build',_0x1dd595(0x186)));}),app['get'](_0xdb1f97(0x21a),(_0x2eb8f5,_0x129c59)=>{const _0x54a645=_0xdb1f97;_0x129c59[_0x54a645(0x19b)](path[_0x54a645(0x22a)](__dirname,bbpath2,_0x54a645(0x15e),_0x54a645(0x186)));}),app[_0xdb1f97(0x17e)]('/:bot/coins',(_0x3ec058,_0x34ec8c)=>{const _0x51f945=_0xdb1f97;_0x34ec8c['sendFile'](path[_0x51f945(0x22a)](__dirname,bbpath2,_0x51f945(0x15e),'index.html'));}),app[_0xdb1f97(0x17e)]('/:bot/history',(_0x186052,_0x2fe40a)=>{const _0x266714=_0xdb1f97;_0x2fe40a['sendFile'](path[_0x266714(0x22a)](__dirname,bbpath2,_0x266714(0x15e),_0x266714(0x186)));}),app['get'](_0xdb1f97(0x199),(_0x47838c,_0x43293c)=>{const _0x4e55af=_0xdb1f97;_0x43293c[_0x4e55af(0x19b)](path[_0x4e55af(0x22a)](__dirname,bbpath2,_0x4e55af(0x15e),'index.html'));}),app[_0xdb1f97(0x17e)](_0xdb1f97(0x20d),(_0x216df9,_0x3db356)=>{const _0x5b0a63=_0xdb1f97;_0x3db356[_0x5b0a63(0x19b)](path[_0x5b0a63(0x22a)](__dirname,bbpath2,_0x5b0a63(0x15e),_0x5b0a63(0x186)));});if(HOST)http[_0xdb1f97(0x248)](PORT,HOST);else http[_0xdb1f97(0x248)](PORT);const io=require(_0xdb1f97(0x249))(http,{}),analytics=analyticsLib({'app':_0xdb1f97(0x244),'plugins':[googleAnalytics({'trackingId':_0xdb1f97(0x1b3)})]}),TelegramBot=require(_0xdb1f97(0x21c));let tgBot;if(settings[_0xdb1f97(0x183)]&&settings[_0xdb1f97(0x183)]!=''&&settings[_0xdb1f97(0x22e)]&&settings[_0xdb1f97(0x22e)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x3b47f0=_0xdb1f97;console['log'](''),console[_0x3b47f0(0x1a1)](_0x3b47f0(0x209)),logging(_0x3b47f0(0x221)+PORT),console[_0x3b47f0(0x1a1)](_0x3b47f0(0x209));if(config['length']!=0x0)config[_0x3b47f0(0x1a5)](_0x2b81d2=>{const _0x248591=_0x3b47f0;if(_0x2b81d2[_0x248591(0x231)]=='enabled'||_0x2b81d2['status']==_0x248591(0x15b))logging(_0x248591(0x230)+_0x2b81d2[_0x248591(0x14c)]+_0x248591(0x11d)+_0x2b81d2['botname']),startBot([_0x2b81d2[_0x248591(0x14c)],userID],{'cwd':bbpath},function(_0x4e82aa){if(_0x4e82aa)logging(_0x4e82aa);});else(_0x2b81d2[_0x248591(0x231)]==_0x248591(0x16b)||_0x2b81d2[_0x248591(0x231)]==_0x248591(0x260))&&logging(_0x248591(0x1d3)+_0x2b81d2[_0x248591(0x14c)]+_0x248591(0x11d)+_0x2b81d2[_0x248591(0x13e)]);});else!newBot&&console[_0x3b47f0(0x1a1)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log']('-----------------------------------------------------------------------------------'),console[_0x3b47f0(0x1a1)]('');}function startSocket(){const _0x494340=_0xdb1f97;io['on'](_0x494340(0x12f),_0x625155=>{const _0x4593ff=_0x494340;let _0x5b0e1f,_0x40642b,_0x258ca9,_0x55c7e2,_0x4fd724;const _0x2bea7a=_0x625155[_0x4593ff(0x17d)][_0x4593ff(0x1bf)][_0x4593ff(0x22d)];_0x40642b=_0x2bea7a[_0x4593ff(0x25d)](/bot[0-9]{3}/);if(_0x40642b)_0x258ca9=_0x40642b[0x0]['match'](/[0-9]{3}/);if(_0x258ca9)_0x5b0e1f=_0x258ca9[0x0];else _0x5b0e1f=_0x4593ff(0x198);const _0x2001c2=_0x625155[_0x4593ff(0x17d)][_0x4593ff(0x121)][_0x4593ff(0x15a)];if(!_0x2001c2)_0x625155[_0x4593ff(0x160)](_0x4593ff(0x231),{'publicKey':secure[_0x4593ff(0x1d0)]});else{_0x55c7e2=timelyDecrypt(_0x2001c2,![]);if(!_0x55c7e2)_0x625155[_0x4593ff(0x160)](_0x4593ff(0x231),{'publicKey':secure['publicKey']});else{_0x4fd724=normalizeIP(_0x625155['conn'][_0x4593ff(0x184)])['store'];if(!devices[_0x55c7e2])devices[_0x55c7e2]={'uuid':_0x55c7e2,'access':{'token':null}};devices[_0x55c7e2]['ip']=_0x4fd724;const _0x32e3b8=addClient(_0x625155['id'],_0x55c7e2,_0x5b0e1f);setAccess(_0x32e3b8),_0x625155['on'](_0x4593ff(0x1ae),_0x27408e=>{const _0x23dca3=_0x4593ff,_0x163d53=timelyDecrypt(_0x27408e[_0x23dca3(0x1bd)]);if(_0x163d53){_0x27408e={'username':_0x27408e['username'],'password':_0x163d53},devices[_0x55c7e2][_0x23dca3(0x1e8)]=validateCredentials(_0x27408e,_0x55c7e2);if(devices[_0x55c7e2][_0x23dca3(0x1e8)][_0x23dca3(0x12d)]==![]&&devices[_0x55c7e2]['access']['reason']=='2FA\x20login\x20required')_0x625155[_0x23dca3(0x160)](_0x23dca3(0x231),{'access':devices[_0x55c7e2][_0x23dca3(0x1e8)]}),loginAccess2FA(_0x55c7e2,_0x4fd724);else{if(devices[_0x55c7e2]['access'][_0x23dca3(0x12d)]==![]&&devices[_0x55c7e2][_0x23dca3(0x1e8)]['reason']==_0x23dca3(0x1cc))_0x625155['emit'](_0x23dca3(0x231),{'access':devices[_0x55c7e2]['access']});else devices[_0x55c7e2][_0x23dca3(0x1e8)]['allow']&&devices[_0x55c7e2]['access'][_0x23dca3(0x142)]==_0x23dca3(0x151)&&(getClientsWithUuid(_0x55c7e2)['forEach'](_0x23e94d=>{setAccess(_0x23e94d);}),setTokenRefresh(_0x55c7e2),setSessionTimeout(_0x23dca3(0x1ae),_0x55c7e2));}}else logging(_0x23dca3(0x153));}),_0x625155['on'](_0x4593ff(0x11e),()=>{resetPassword();}),_0x625155['on']('disconnect',_0x4763da=>{removeClient(_0x625155['id']);});}}});}function initClient(_0x5b2d83){const _0x20a592=_0xdb1f97;if(_0x5b2d83!=_0x20a592(0x198)&&config[_0x20a592(0x127)]!=''){if(pid[_0x5b2d83])pid[_0x5b2d83][_0x20a592(0x134)]({'function':_0x20a592(0x162),'args':null});}}function getSocket(_0x322246){const _0x38bd26=_0xdb1f97;return io[_0x38bd26(0x12c)][_0x38bd26(0x12c)][_0x38bd26(0x17e)](_0x322246);}function setAccess(_0x219441){const _0x506171=_0xdb1f97,_0x433e96=getSocket(_0x219441['id']),_0x15da4d=_0x219441[_0x506171(0x179)],_0x1699a0=_0x219441[_0x506171(0x205)];devices[_0x15da4d]['access']=validateAccess(devices[_0x15da4d]['access'][_0x506171(0x1d2)],_0x15da4d),_0x433e96[_0x506171(0x22a)](_0x15da4d);if(devices[_0x15da4d]['access']['allow']){_0x433e96[_0x506171(0x22a)](_0x1699a0);if(_0x1699a0==_0x506171(0x198))initializeSocketBotManager(_0x433e96);else initializeSocketBot(_0x433e96);initClient(_0x1699a0);}devices[_0x15da4d]['access']['token']&&devices[_0x15da4d][_0x506171(0x1e8)][_0x506171(0x142)]==_0x506171(0x1fc)&&setSessionTimeout(_0x506171(0x17a),_0x15da4d),devices[_0x15da4d][_0x506171(0x1e8)]['token']&&devices[_0x15da4d][_0x506171(0x1e8)][_0x506171(0x142)]==_0x506171(0x22f)&&setSessionTimeout('login',_0x15da4d),_0x433e96[_0x506171(0x160)](_0x506171(0x231),{'status':_0x219441[_0x506171(0x1aa)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x15da4d][_0x506171(0x1e8)],'externalip':devices[_0x15da4d]['ip'],'publicKey':secure[_0x506171(0x1d0)],'validInstallation':validInstallation}),devices[_0x15da4d][_0x506171(0x1e8)]['allow']==![]&&devices[_0x15da4d]['access'][_0x506171(0x142)]=='2FA\x20required'&&temporaryAccess2FA(_0x15da4d,devices[_0x15da4d]['ip']);}function setSessionTimeout(_0x479be9,_0x23c621){const _0x4381e4=_0xdb1f97;let _0x168111;if(_0x479be9==_0x4381e4(0x1ae))_0x168111=loginExpiry*0x3c*0x3e8;else _0x168111=devices[_0x23c621][_0x4381e4(0x23e)]['expiry']*0x3c*0x3e8-(new Date()[_0x4381e4(0x169)]()-devices[_0x23c621][_0x4381e4(0x23e)][_0x4381e4(0x157)]);if(devices[_0x23c621][_0x4381e4(0x21f)])clearTimeout(devices[_0x23c621]['pidExpireLogin']);devices[_0x23c621]['pidExpireLogin']=setTimeout(()=>{const _0x1a7e7c=_0x4381e4;if(devices[_0x23c621][_0x1a7e7c(0x1db)])clearTimeout(devices[_0x23c621][_0x1a7e7c(0x1db)]);removeSocketListeners(_0x23c621),addBlacklist(_0x23c621),devices[_0x23c621][_0x1a7e7c(0x23e)]=null,devices[_0x23c621][_0x1a7e7c(0x16c)]=null,devices[_0x23c621][_0x1a7e7c(0x1e8)][_0x1a7e7c(0x1d2)]=null,devices[_0x23c621][_0x1a7e7c(0x1e8)]=validateAccess(devices[_0x23c621][_0x1a7e7c(0x1e8)]['token'],_0x23c621),!(devices[_0x23c621][_0x1a7e7c(0x1e8)][_0x1a7e7c(0x12d)]&&devices[_0x23c621][_0x1a7e7c(0x1e8)]['reason']==_0x1a7e7c(0x1f7))&&(_0x479be9=='login'?io['to'](_0x23c621)[_0x1a7e7c(0x160)]('status',{'access':{'allow':![],'reason':_0x1a7e7c(0x1d4),'token':null}}):io['to'](_0x23c621)[_0x1a7e7c(0x160)](_0x1a7e7c(0x231),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x23c621][_0x1a7e7c(0x1e8)][_0x1a7e7c(0x1d2)]=null;},_0x168111);}function setTokenRefresh(_0x1f5646){const _0x9cd155=_0xdb1f97;if(devices[_0x1f5646]['pidRefreshToken'])clearTimeout(devices[_0x1f5646]['pidRefreshToken']);devices[_0x1f5646][_0x9cd155(0x1db)]=setTimeout(()=>{const _0x1023db=_0x9cd155;getClientsWithUuid(_0x1f5646)[_0x1023db(0x13f)]!=0x0?(devices[_0x1f5646][_0x1023db(0x1e8)]=refreshToken(_0x1f5646),io['to'](_0x1f5646)['emit'](_0x1023db(0x231),{'status':_0x1023db(0x212),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1f5646][_0x1023db(0x1e8)],'externalip':devices[_0x1f5646]['ip'],'publicKey':secure[_0x1023db(0x1d0)],'validInstallation':validInstallation}),setTokenRefresh(_0x1f5646)):clearTimeout(devices[_0x1f5646][_0x1023db(0x1db)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3a2e2a){const _0x46feab=_0xdb1f97,_0x3b10c8=getClient(_0x3a2e2a['id'])[_0x46feab(0x179)];_0x3a2e2a[_0x46feab(0x160)](_0x46feab(0x1ed),config),_0x3a2e2a[_0x46feab(0x160)](_0x46feab(0x1f1),cleanSettings()),_0x3a2e2a['on'](_0x46feab(0x150),_0x1d9c27=>{const _0x9910d7=_0x46feab;if(validateAccess(_0x1d9c27,_0x3b10c8)[_0x9910d7(0x12d)])addBot();else logging(_0x9910d7(0x1d6));}),_0x3a2e2a['on']('update-bot',(_0x211813,_0xd375c6)=>{const _0x3e3fcf=_0x46feab;if(validateAccess(_0xd375c6,_0x3b10c8)[_0x3e3fcf(0x12d)])toggleBot(_0x211813[_0x3e3fcf(0x14c)],_0x211813['status'],_0x211813[_0x3e3fcf(0x131)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3a2e2a['on'](_0x46feab(0x1cf),(_0x1cb9c3,_0x4da27a)=>{const _0x4b51f7=_0x46feab;if(validateAccess(_0x4da27a,_0x3b10c8)['allow'])deleteBot(_0x1cb9c3);else logging(_0x4b51f7(0x1c5));}),_0x3a2e2a['on']('store-settings',(_0x2c9e1d,_0x29384f)=>{const _0x29c523=_0x46feab;if(validateAccess(_0x29384f,_0x3b10c8)[_0x29c523(0x12d)])storeSettings(_0x2c9e1d,!![]);else logging(_0x29c523(0x203));}),_0x3a2e2a['on'](_0x46feab(0x187),(_0x34beae,_0x3585d5)=>{const _0x21d545=_0x46feab;if(validateAccess(_0x3585d5,_0x3b10c8)[_0x21d545(0x12d)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x3a2e2a['on'](_0x46feab(0x173),_0x11727d=>{const _0x2d32dc=_0x46feab;if(validateAccess(_0x11727d,_0x3b10c8)[_0x2d32dc(0x12d)]){if(devices[_0x3b10c8]['pidRefreshToken'])clearTimeout(devices[_0x3b10c8][_0x2d32dc(0x1db)]);if(devices[_0x3b10c8][_0x2d32dc(0x21f)])clearTimeout(devices[_0x3b10c8]['pidExpireLogin']);removeSocketListeners(getClient(_0x3a2e2a['id'])['uuid']),addBlacklist(_0x3b10c8),devices[_0x3b10c8][_0x2d32dc(0x23e)]=null,devices[_0x3b10c8][_0x2d32dc(0x16c)]=null,devices[_0x3b10c8][_0x2d32dc(0x1e8)]['token']=null,io['to'](getClient(_0x3a2e2a['id'])[_0x2d32dc(0x179)])[_0x2d32dc(0x160)](_0x2d32dc(0x231),{'access':{'allow':![],'reason':_0x2d32dc(0x11f),'token':null}});}else logging(_0x2d32dc(0x21e));});}function initializeSocketBot(_0x2f0079){const _0x5404d3=_0xdb1f97,_0x1ea5aa=getClient(_0x2f0079['id'])['bot'],_0x163cd7=getClient(_0x2f0079['id'])['uuid'];_0x2f0079['on'](_0x5404d3(0x247),(_0x297d5d,_0x209ce6)=>{const _0x11cae2=_0x5404d3;if(validateAccess(_0x209ce6,_0x163cd7)['allow']){if(pid[_0x1ea5aa])pid[_0x1ea5aa][_0x11cae2(0x134)]({'function':_0x11cae2(0x161),'args':_0x297d5d});}else logging(_0x11cae2(0x196));}),_0x2f0079['on']('get-portfolio',(_0x371e0f,_0x462a93)=>{const _0xcbba8f=_0x5404d3;if(validateAccess(_0x462a93,_0x163cd7)[_0xcbba8f(0x12d)]){if(pid[_0x1ea5aa])pid[_0x1ea5aa]['send']({'function':_0xcbba8f(0x139),'args':_0x371e0f});}else logging(_0xcbba8f(0x124));}),_0x2f0079['on'](_0x5404d3(0x1f6),(_0x2f25b1,_0x12464e)=>{const _0xe85f0d=_0x5404d3;if(validateAccess(_0x12464e,_0x163cd7)['allow']){if(pid[_0x1ea5aa])pid[_0x1ea5aa][_0xe85f0d(0x134)]({'function':'storeConfiguration','args':_0x2f25b1});}else logging(_0xe85f0d(0x239));}),_0x2f0079['on'](_0x5404d3(0x211),(_0x42e4ac,_0x2bda79)=>{const _0x465b6d=_0x5404d3;if(validateAccess(_0x2bda79,_0x163cd7)[_0x465b6d(0x12d)]){if(pid[_0x1ea5aa])pid[_0x1ea5aa][_0x465b6d(0x134)]({'function':_0x465b6d(0x1ca),'args':_0x42e4ac});}else logging(_0x465b6d(0x152));}),_0x2f0079['on'](_0x5404d3(0x1b0),_0x4073e2=>{const _0x1d835d=_0x5404d3;if(validateAccess(_0x4073e2,_0x163cd7)[_0x1d835d(0x12d)]){if(pid[_0x1ea5aa])pid[_0x1ea5aa][_0x1d835d(0x134)]({'function':_0x1d835d(0x206),'args':null});}else logging(_0x1d835d(0x24c));}),_0x2f0079['on']('place-order',(_0x21a3fd,_0x145ab1)=>{const _0x3ded3f=_0x5404d3;if(validateAccess(_0x145ab1,_0x163cd7)['allow']){if(pid[_0x1ea5aa])pid[_0x1ea5aa]['send']({'function':'placeOrder','args':_0x21a3fd});}else logging(_0x3ded3f(0x23f));}),_0x2f0079['on'](_0x5404d3(0x210),_0x4d965e=>{const _0x83336d=_0x5404d3;if(validateAccess(_0x4d965e,_0x163cd7)['allow']){if(pid[_0x1ea5aa])pid[_0x1ea5aa][_0x83336d(0x134)]({'function':_0x83336d(0x177),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x2f0079['on'](_0x5404d3(0x173),_0x288e59=>{const _0x547ec2=_0x5404d3;if(validateAccess(_0x288e59,_0x163cd7)[_0x547ec2(0x12d)]){if(devices[_0x163cd7][_0x547ec2(0x1db)])clearTimeout(devices[_0x163cd7][_0x547ec2(0x1db)]);if(devices[_0x163cd7]['pidExpireLogin'])clearTimeout(devices[_0x163cd7]['pidExpireLogin']);removeSocketListeners(getClient(_0x2f0079['id'])[_0x547ec2(0x179)]),addBlacklist(_0x163cd7),devices[_0x163cd7][_0x547ec2(0x23e)]=null,devices[_0x163cd7][_0x547ec2(0x16c)]=null,devices[_0x163cd7]['access'][_0x547ec2(0x1d2)]=null,io['to'](getClient(_0x2f0079['id'])['uuid'])['emit'](_0x547ec2(0x231),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x547ec2(0x21e));});}function removeSocketListeners(_0x1c5a9f){const _0x5ce860=_0xdb1f97;getClientsWithUuid(_0x1c5a9f)[_0x5ce860(0x1a5)](_0x48f90f=>{const _0x281e6d=_0x5ce860;getSocket(_0x48f90f['id'])[_0x281e6d(0x1d8)]();});}function cleanSettings(){const _0x22ef75=_0xdb1f97;let _0x8c8747=settings;return settings[_0x22ef75(0x183)]&&settings['telegramToken']!=''&&(_0x8c8747={..._0x8c8747,'telegramToken':_0x22ef75(0x240)}),settings[_0x22ef75(0x170)]&&settings[_0x22ef75(0x170)]!=''&&(_0x8c8747={..._0x8c8747,'bbPassword':_0x22ef75(0x240)}),_0x8c8747;}function updateBB(){const _0x3f5252=_0xdb1f97;installingUpdate=!![],config['forEach'](_0x8f3f8d=>{restartBot(_0x8f3f8d['botID']);}),process[_0x3f5252(0x134)]({'update':!![]},_0x584fd3=>{});}function startBot(_0x5f2161,_0x2bf062,_0x4a2117){const _0x379e01=_0xdb1f97;let _0x19560b=![];const _0x4715ae=_0x5f2161[0x0];_0x2bf062={..._0x2bf062,'stdio':[_0x379e01(0x190),_0x379e01(0x190),_0x379e01(0x190),_0x379e01(0x149)]},pid[_0x4715ae]=childProcess[_0x379e01(0x18c)](botfile,_0x5f2161,_0x2bf062),pid[_0x4715ae]['on']('message',_0x467d75=>{const _0x253c95=_0x379e01;switch(Object[_0x253c95(0x218)](_0x467d75)[0x0]){case'botname':updateBotName(_0x4715ae,_0x467d75[_0x253c95(0x13e)]);break;case _0x253c95(0x231):updateStatus(_0x4715ae,_0x467d75[_0x253c95(0x231)]);break;case _0x253c95(0x131):updateLive(_0x4715ae,_0x467d75[_0x253c95(0x131)]);break;case _0x253c95(0x11b):updateLive(_0x4715ae,_0x467d75[_0x253c95(0x11b)]),io['to'](_0x4715ae)['emit'](_0x253c95(0x231),{'access':{'allow':![],'reason':_0x253c95(0x1b2),'token':null}});break;case _0x253c95(0x1ef):_0x467d75[_0x253c95(0x1ef)]==_0x253c95(0x1bc)&&restartBot(_0x4715ae);_0x467d75['stop']==_0x253c95(0x208)&&toggleBot(_0x4715ae,_0x253c95(0x16b),_0x253c95(0x21b));break;case _0x253c95(0x1f8):sendTelegram(_0x4715ae,_0x467d75[_0x253c95(0x1f8)]);break;case'function':io['to'](_0x4715ae)[_0x253c95(0x160)](_0x467d75['function'],_0x467d75[_0x253c95(0x236)]);break;}}),pid[_0x4715ae]['on'](_0x379e01(0x246),function(_0x4e6f4f){if(_0x19560b)return;_0x19560b=!![],_0x4a2117(_0x4e6f4f);}),pid[_0x4715ae]['on'](_0x379e01(0x237),function(_0x5b0de4){const _0x270913=_0x379e01;if(installingUpdate)return;if(_0x19560b)return;_0x19560b=!![],_0x4a2117(null);const _0x56dcc2=dbConfig[_0x270913(0x17e)](_0x270913(0x1ed))[_0x270913(0x1f9)]({'botID':_0x4715ae})[_0x270913(0x233)]();_0x56dcc2&&(_0x56dcc2[_0x270913(0x231)]=='enabled'||_0x56dcc2[_0x270913(0x231)]==_0x270913(0x15b))&&(updateLive(_0x4715ae,'stopped'),logging(_0x270913(0x13c)+_0x4715ae),startBot([_0x4715ae,userID],{'cwd':bbpath},function(_0x3aac02){if(_0x3aac02)logging(_0x3aac02);}));});}function stopBot(_0x56fa68){const _0x14ab83=_0xdb1f97;getClientsWithBotID(_0x56fa68)[_0x14ab83(0x1a5)](_0x5896d6=>{getSocket(_0x5896d6['id'])['disconnect'](!![]),removeClient(_0x5896d6['id']);});if(pid[_0x56fa68])pid[_0x56fa68][_0x14ab83(0x208)]();}function restartBot(_0x22567c){const _0x2484a7=_0xdb1f97;if(pid[_0x22567c])pid[_0x22567c][_0x2484a7(0x208)]();}function addBot(){const _0x23aa42=_0xdb1f97;let _0x42011b;for(let _0xc04083=0x1;_0xc04083<0x3e9;_0xc04083++){_0x42011b=_0xc04083[_0x23aa42(0x238)]()[_0x23aa42(0x1b9)](0x3,'0');let _0xa6467d=config[_0x23aa42(0x1f9)](_0x110f6d=>_0x110f6d[_0x23aa42(0x14c)]==_0x42011b);if(!_0xa6467d)break;}if(_0x42011b===_0x23aa42(0x1c7)){logging(_0x23aa42(0x16f));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x42011b),dbConfig[_0x23aa42(0x17e)]('bots')[_0x23aa42(0x1a8)]({'botID':_0x42011b,'botname':'Bot\x20'+_0x42011b,'status':_0x23aa42(0x15b),'live':''})['write'](),startBot([_0x42011b,userID],{'cwd':bbpath},function(_0x231cb9){if(_0x231cb9)logging(_0x231cb9);}),config=getConfiguration(),io['to'](_0x23aa42(0x198))[_0x23aa42(0x160)]('bots',config);}function deleteBot(_0x47e803){const _0x5f0ce9=_0xdb1f97;getClientsWithBotID(_0x47e803)[_0x5f0ce9(0x1a5)](_0x503dfa=>{getSocket(_0x503dfa['id'])['disconnect'](!![]),removeClient(_0x503dfa['id']);}),dbConfig[_0x5f0ce9(0x17e)](_0x5f0ce9(0x1ed))[_0x5f0ce9(0x264)]({'botID':_0x47e803})[_0x5f0ce9(0x1dc)](),logging('deleted\x20Bot\x20'+_0x47e803),stopBot(_0x47e803);try{fs[_0x5f0ce9(0x15d)](path[_0x5f0ce9(0x22a)](configpath,_0x5f0ce9(0x23a)+_0x47e803+_0x5f0ce9(0x182))),fs[_0x5f0ce9(0x15d)](path['join'](configpath,_0x5f0ce9(0x23a)+_0x47e803+_0x5f0ce9(0x245))),fs[_0x5f0ce9(0x15d)](path[_0x5f0ce9(0x22a)](configpath,_0x5f0ce9(0x23a)+_0x47e803+_0x5f0ce9(0x165))),fs[_0x5f0ce9(0x15d)](path['join'](configpath,_0x5f0ce9(0x23a)+_0x47e803+_0x5f0ce9(0x143)));}catch(_0x1ca6dd){if(_0x1ca6dd)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x1ca6dd);}config=getConfiguration(),io['to']('botmanager')[_0x5f0ce9(0x160)](_0x5f0ce9(0x1ed),config);}function toggleBot(_0x4fdb96,_0x12ef02,_0x14257a){const _0x2c6e66=_0xdb1f97;dbConfig[_0x2c6e66(0x17e)](_0x2c6e66(0x1ed))[_0x2c6e66(0x1f9)]({'botID':_0x4fdb96})['assign']({'status':_0x12ef02})['assign']({'live':_0x14257a})['write']();if(_0x12ef02==_0x2c6e66(0x166)||_0x12ef02==_0x2c6e66(0x15b))logging(_0x2c6e66(0x120)+_0x4fdb96),startBot([_0x4fdb96,userID],{'cwd':bbpath},function(_0x2688e2){if(_0x2688e2)logging(_0x2688e2);});else(_0x12ef02=='disabled'||_0x12ef02==_0x2c6e66(0x260))&&(logging('disabled\x20Bot\x20'+_0x4fdb96),stopBot(_0x4fdb96));config=getConfiguration(),io['to'](_0x2c6e66(0x198))[_0x2c6e66(0x160)](_0x2c6e66(0x1ed),config);}function toggleStatus(_0x42e25f){const _0x2ca3bf=_0xdb1f97;let _0x1d7180=dbConfig[_0x2ca3bf(0x17e)](_0x2ca3bf(0x1ed))[_0x2ca3bf(0x1f9)]({'botID':_0x42e25f})[_0x2ca3bf(0x233)](),_0x555e9e;if(_0x1d7180[_0x2ca3bf(0x231)]==='enabled')_0x555e9e='disabled';else{if(_0x1d7180['status']===_0x2ca3bf(0x15b))_0x555e9e=_0x2ca3bf(0x260);else{if(_0x1d7180[_0x2ca3bf(0x231)]===_0x2ca3bf(0x260))_0x555e9e=_0x2ca3bf(0x15b);else{if(_0x1d7180[_0x2ca3bf(0x231)]===_0x2ca3bf(0x16b))_0x555e9e=_0x2ca3bf(0x166);}}}return _0x555e9e;}function updateStatus(_0x5c71a8,_0x3b9929){const _0x41f9cc=_0xdb1f97;dbConfig[_0x41f9cc(0x17e)]('bots')[_0x41f9cc(0x1f9)]({'botID':_0x5c71a8})[_0x41f9cc(0x13a)]({'status':_0x3b9929})[_0x41f9cc(0x1dc)](),config=getConfiguration(),io['to'](_0x41f9cc(0x198))[_0x41f9cc(0x160)](_0x41f9cc(0x1ed),config);}function updateLive(_0x1c2a40,_0x4d7e8e){const _0x569e58=_0xdb1f97;dbConfig['get'](_0x569e58(0x1ed))[_0x569e58(0x1f9)]({'botID':_0x1c2a40})[_0x569e58(0x13a)]({'live':_0x4d7e8e})['write'](),config=getConfiguration(),io['to'](_0x569e58(0x198))[_0x569e58(0x160)](_0x569e58(0x1ed),config);}function updateBotName(_0x5ba6c0,_0x43afc7){const _0xdaf963=_0xdb1f97;dbConfig[_0xdaf963(0x17e)](_0xdaf963(0x1ed))[_0xdaf963(0x1f9)]({'botID':_0x5ba6c0})[_0xdaf963(0x13a)]({'botname':_0x43afc7})[_0xdaf963(0x1dc)](),config=getConfiguration(),io['to'](_0xdaf963(0x198))['emit'](_0xdaf963(0x1ed),config);}function telegramError(_0x48dee6){const _0xdc5b6c=_0xdb1f97;console['log'](getTimeStamp()+_0xdc5b6c(0x1c3));}function validateTelegram(_0x601a7){const _0x3e6c4e=_0xdb1f97;if(_0x601a7[_0x3e6c4e(0x1f0)][_0x3e6c4e(0x250)]!=settings[_0x3e6c4e(0x22e)]&&'@'+_0x601a7[_0x3e6c4e(0x1f0)][_0x3e6c4e(0x250)]!=settings[_0x3e6c4e(0x22e)])return tgBot[_0x3e6c4e(0x156)](_0x601a7['chat']['id'],_0x3e6c4e(0x254),{'parse_mode':'HTML'})[_0x3e6c4e(0x14f)](_0x9adcc2=>{telegramError(_0x9adcc2);}),![];return!![];}async function initTelegram(){const _0x51e410=_0xdb1f97;if(tgBot)tgBot[_0x51e410(0x1a6)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x51e410(0x183)],{'polling':!![]});let _0x3d4051=_0x51e410(0x1b5);_0x3d4051+='\x0a',_0x3d4051+=_0x51e410(0x258),_0x3d4051+=_0x51e410(0x1a0),_0x3d4051+=_0x51e410(0x17f),_0x3d4051+=_0x51e410(0x201),_0x3d4051+=_0x51e410(0x16a),_0x3d4051+=_0x51e410(0x1f4),_0x3d4051+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x3d4051+=_0x51e410(0x189);let _0x27a11a=_0x51e410(0x1ad);_0x27a11a+='\x0a',_0x27a11a+=_0x3d4051,tgBot[_0x51e410(0x194)](/\/start/,_0x23ab57=>{const _0x5e63e6=_0x51e410;if(!validateTelegram(_0x23ab57))return;if(settings['telegramChatId']!=_0x23ab57[_0x5e63e6(0x129)]['id'])updateSetting('telegramChatId',_0x23ab57[_0x5e63e6(0x129)]['id']);updateSetting(_0x5e63e6(0x1c9),!![]),tgBot['sendMessage'](_0x23ab57[_0x5e63e6(0x129)]['id'],_0x27a11a)['catch'](_0x2fc9eb=>{telegramError(_0x2fc9eb);});}),tgBot[_0x51e410(0x194)](/\/enable/,_0x2d077c=>{const _0x8e2f9e=_0x51e410;if(!validateTelegram(_0x2d077c))return;if(settings['telegramChatId']!=_0x2d077c['chat']['id'])updateSetting('telegramChatId',_0x2d077c[_0x8e2f9e(0x129)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x8e2f9e(0x156)](_0x2d077c[_0x8e2f9e(0x129)]['id'],'Notifications\x20enabled')[_0x8e2f9e(0x14f)](_0x17dd27=>{telegramError(_0x17dd27);});}),tgBot[_0x51e410(0x194)](/\/config/,async _0x57d40a=>{const _0x385c31=_0x51e410;if(!validateTelegram(_0x57d40a))return;tgBot[_0x385c31(0x126)](_0x385c31(0x21d)),tgBot[_0x385c31(0x156)](_0x57d40a[_0x385c31(0x129)]['id'],_0x385c31(0x1e5),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':'Alerts','callback_data':_0x385c31(0x1de)},{'text':'All','callback_data':_0x385c31(0x19f)}]]}})[_0x385c31(0x14f)](_0x2808f2=>{telegramError(_0x2808f2);}),tgBot['on']('callback_query',async _0x32330e=>{const _0x199fa9=_0x385c31,_0x49626a=_0x32330e[_0x199fa9(0x259)],_0x3c0d7b=_0x32330e['message'];tgBot[_0x199fa9(0x135)](_0x32330e['id'])['then'](async()=>{const _0x4d7159=_0x199fa9;_0x49626a==_0x4d7159(0x18b)&&(updateSetting('telegramEvents',_0x4d7159(0x18b)),updateSetting(_0x4d7159(0x1c9),!![]),await tgBot[_0x4d7159(0x156)](_0x3c0d7b[_0x4d7159(0x129)]['id'],_0x4d7159(0x22b))[_0x4d7159(0x14f)](_0x2c3a55=>{telegramError(_0x2c3a55);}));_0x49626a==_0x4d7159(0x1de)&&(updateSetting('telegramEvents',_0x4d7159(0x1de)),updateSetting(_0x4d7159(0x1c9),!![]),await tgBot[_0x4d7159(0x156)](_0x3c0d7b[_0x4d7159(0x129)]['id'],_0x4d7159(0x122))['catch'](_0x25b150=>{telegramError(_0x25b150);}));_0x49626a=='all'&&(updateSetting(_0x4d7159(0x226),'all'),updateSetting(_0x4d7159(0x1c9),!![]),await tgBot[_0x4d7159(0x156)](_0x3c0d7b[_0x4d7159(0x129)]['id'],_0x4d7159(0x265))[_0x4d7159(0x14f)](_0x37fa84=>{telegramError(_0x37fa84);}));if(!settings[_0x4d7159(0x191)])tgBot['sendMessage'](_0x3c0d7b[_0x4d7159(0x129)]['id'],_0x4d7159(0x1e4))['catch'](_0xd341ed=>{telegramError(_0xd341ed);});}),tgBot['removeListener'](_0x199fa9(0x21d));});}),tgBot['onText'](/\/status/,_0x225e0c=>{const _0xecae6=_0x51e410;if(!validateTelegram(_0x225e0c))return;let _0x3d6203=_0xecae6(0x1b8);config[_0xecae6(0x1a5)](_0x4927cc=>{const _0x2ee037=_0xecae6;_0x3d6203+=_0x2ee037(0x1d9)+_0x4927cc[_0x2ee037(0x14c)]+_0x2ee037(0x11d)+_0x4927cc[_0x2ee037(0x13e)]+':\x20'+_0x4927cc['status']+_0x2ee037(0x1df)+_0x4927cc[_0x2ee037(0x131)]+'\x0a';}),_0x3d6203+='\x0a',_0x3d6203+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x3d6203+=!settings[_0xecae6(0x1c9)]?_0xecae6(0x263):_0xecae6(0x1e3),_0x3d6203+=settings['telegramEnabled']?settings[_0xecae6(0x226)]=='all'?_0xecae6(0x25f):_0xecae6(0x1bb)+settings[_0xecae6(0x226)]+_0xecae6(0x1d7):'',tgBot[_0xecae6(0x156)](_0x225e0c['chat']['id'],_0x3d6203,{'parse_mode':_0xecae6(0x12b)})[_0xecae6(0x14f)](_0x406c2b=>{telegramError(_0x406c2b);});}),tgBot[_0x51e410(0x194)](/\/restart/,_0x3c1b91=>{const _0x31b65=_0x51e410;if(!validateTelegram(_0x3c1b91))return;tgBot[_0x31b65(0x126)](_0x31b65(0x21d));const _0x14017a=getEnabledBots();if(_0x14017a[_0x31b65(0x13f)]==0x0)tgBot[_0x31b65(0x156)](_0x3c1b91[_0x31b65(0x129)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x31b65(0x14f)](_0x4c436f=>{telegramError(_0x4c436f);});else{if(_0x14017a['length']>0x1)_0x14017a[_0x31b65(0x1a8)]({'botID':_0x31b65(0x19f)});let _0x3cb5a3=[],_0x16ff6e=[];const _0x3b6034=_0x14017a[_0x31b65(0x13f)]%0x4==0x0||_0x14017a[_0x31b65(0x13f)]%0x4==0x3||_0x14017a[_0x31b65(0x13f)]%0x3==0x1?0x4:0x3;let _0x32fd0c=0x0;_0x14017a['forEach']((_0x167e21,_0x82ff04)=>{const _0x4933ef=_0x31b65;if(_0x82ff04%_0x3b6034==0x0)_0x16ff6e=[];_0x16ff6e[_0x4933ef(0x1a8)]({'text':_0x167e21[_0x4933ef(0x14c)]==_0x4933ef(0x19f)?_0x4933ef(0x1af):_0x4933ef(0x1d9)+_0x167e21[_0x4933ef(0x14c)],'callback_data':_0x167e21['botID']}),_0x82ff04%_0x3b6034==0x0&&(_0x3cb5a3[_0x32fd0c]=_0x16ff6e,_0x32fd0c++);}),tgBot['sendMessage'](_0x3c1b91[_0x31b65(0x129)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x3cb5a3}})[_0x31b65(0x14f)](_0x220c25=>{telegramError(_0x220c25);}),tgBot['on']('callback_query',async _0x3c8357=>{const _0x583578=_0x31b65,_0x400cfd=_0x3c8357[_0x583578(0x259)],_0x104d23=_0x3c8357[_0x583578(0x207)];tgBot['answerCallbackQuery'](_0x3c8357['id'])['then'](async()=>{const _0x462d6d=_0x583578;if(_0x400cfd==_0x462d6d(0x19f)){if(settings['telegramEvents']==_0x462d6d(0x18b))tgBot['sendMessage'](_0x104d23[_0x462d6d(0x129)]['id'],_0x462d6d(0x13d))[_0x462d6d(0x14f)](_0x190fbc=>{telegramError(_0x190fbc);});config[_0x462d6d(0x1a5)](_0x4325bc=>{restartBot(_0x4325bc['botID']);});}else{if(settings[_0x462d6d(0x226)]==_0x462d6d(0x18b))tgBot[_0x462d6d(0x156)](_0x104d23[_0x462d6d(0x129)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x400cfd)[_0x462d6d(0x14f)](_0x17491b=>{telegramError(_0x17491b);});restartBot(_0x400cfd);}}),tgBot[_0x583578(0x126)](_0x583578(0x21d));});}}),tgBot[_0x51e410(0x194)](/\/on/,_0x5b2961=>{const _0x35a36=_0x51e410;if(!validateTelegram(_0x5b2961))return;tgBot[_0x35a36(0x126)](_0x35a36(0x21d));const _0x302142=getDisabledBots();if(_0x302142['length']==0x0)tgBot[_0x35a36(0x156)](_0x5b2961[_0x35a36(0x129)]['id'],_0x35a36(0x223))['catch'](_0x5c5962=>{telegramError(_0x5c5962);});else{if(_0x302142[_0x35a36(0x13f)]>0x1)_0x302142[_0x35a36(0x1a8)]({'botID':_0x35a36(0x19f)});let _0x58cad1=[],_0x13a948=[];const _0x3356e3=_0x302142[_0x35a36(0x13f)]%0x4==0x0||_0x302142[_0x35a36(0x13f)]%0x4==0x3||_0x302142[_0x35a36(0x13f)]%0x3==0x1?0x4:0x3;let _0x52071d=0x0;_0x302142[_0x35a36(0x1a5)]((_0x3d88cf,_0xff852)=>{const _0x24068f=_0x35a36;if(_0xff852%_0x3356e3==0x0)_0x13a948=[];_0x13a948[_0x24068f(0x1a8)]({'text':_0x3d88cf[_0x24068f(0x14c)]=='all'?_0x24068f(0x1af):_0x24068f(0x1d9)+_0x3d88cf[_0x24068f(0x14c)],'callback_data':_0x3d88cf['botID']}),_0xff852%_0x3356e3==0x0&&(_0x58cad1[_0x52071d]=_0x13a948,_0x52071d++);}),tgBot['sendMessage'](_0x5b2961[_0x35a36(0x129)]['id'],_0x35a36(0x1da),{'reply_markup':{'inline_keyboard':_0x58cad1}})[_0x35a36(0x14f)](_0x37a7b0=>{telegramError(_0x37a7b0);}),tgBot['on'](_0x35a36(0x21d),async _0x1056d3=>{const _0x4144c5=_0x35a36,_0x3dc592=_0x1056d3[_0x4144c5(0x259)],_0x22ab05=_0x1056d3[_0x4144c5(0x207)];tgBot[_0x4144c5(0x135)](_0x1056d3['id'])[_0x4144c5(0x147)](async()=>{const _0x3308c0=_0x4144c5;if(_0x3dc592==_0x3308c0(0x19f)){if(settings[_0x3308c0(0x226)]==_0x3308c0(0x18b))tgBot[_0x3308c0(0x156)](_0x22ab05[_0x3308c0(0x129)]['id'],_0x3308c0(0x180))[_0x3308c0(0x14f)](_0x583b51=>{telegramError(_0x583b51);});_0x302142[_0x3308c0(0x1a5)](_0x5e7540=>{const _0x395156=_0x3308c0;if(_0x5e7540[_0x395156(0x14c)]!='all')toggleBot(_0x5e7540['botID'],toggleStatus(_0x5e7540['botID']),_0x395156(0x21b));});}else{if(settings[_0x3308c0(0x226)]==_0x3308c0(0x18b))tgBot[_0x3308c0(0x156)](_0x22ab05['chat']['id'],_0x3308c0(0x1ce)+_0x3dc592)[_0x3308c0(0x14f)](_0x3c182b=>{telegramError(_0x3c182b);});toggleBot(_0x3dc592,toggleStatus(_0x3dc592),_0x3308c0(0x21b));}}),tgBot['removeListener'](_0x4144c5(0x21d));});}}),tgBot[_0x51e410(0x194)](/\/off/,_0x15b806=>{const _0x2ba01b=_0x51e410;if(!validateTelegram(_0x15b806))return;tgBot[_0x2ba01b(0x126)](_0x2ba01b(0x21d));const _0x4769e4=getEnabledBots();if(_0x4769e4[_0x2ba01b(0x13f)]==0x0)tgBot[_0x2ba01b(0x156)](_0x15b806['chat']['id'],_0x2ba01b(0x257))[_0x2ba01b(0x14f)](_0x355eb8=>{telegramError(_0x355eb8);});else{if(_0x4769e4[_0x2ba01b(0x13f)]>0x1)_0x4769e4[_0x2ba01b(0x1a8)]({'botID':_0x2ba01b(0x19f)});let _0x3bdacc=[],_0x57f4e9=[];const _0x38b12e=_0x4769e4['length']%0x4==0x0||_0x4769e4[_0x2ba01b(0x13f)]%0x4==0x3||_0x4769e4[_0x2ba01b(0x13f)]%0x3==0x1?0x4:0x3;let _0xa7419b=0x0;_0x4769e4[_0x2ba01b(0x1a5)]((_0x1b7ccc,_0x18281c)=>{const _0x356cd7=_0x2ba01b;if(_0x18281c%_0x38b12e==0x0)_0x57f4e9=[];_0x57f4e9[_0x356cd7(0x1a8)]({'text':_0x1b7ccc[_0x356cd7(0x14c)]==_0x356cd7(0x19f)?_0x356cd7(0x1af):'Bot\x20'+_0x1b7ccc[_0x356cd7(0x14c)],'callback_data':_0x1b7ccc[_0x356cd7(0x14c)]}),_0x18281c%_0x38b12e==0x0&&(_0x3bdacc[_0xa7419b]=_0x57f4e9,_0xa7419b++);}),tgBot[_0x2ba01b(0x156)](_0x15b806['chat']['id'],_0x2ba01b(0x1c1),{'reply_markup':{'inline_keyboard':_0x3bdacc}})[_0x2ba01b(0x14f)](_0x59fd4c=>{telegramError(_0x59fd4c);}),tgBot['on'](_0x2ba01b(0x21d),async _0x44d4de=>{const _0x1ffcdb=_0x2ba01b,_0x45a715=_0x44d4de[_0x1ffcdb(0x259)],_0x5e289c=_0x44d4de[_0x1ffcdb(0x207)];tgBot['answerCallbackQuery'](_0x44d4de['id'])[_0x1ffcdb(0x147)](async()=>{const _0xe4d5e7=_0x1ffcdb;if(_0x45a715==_0xe4d5e7(0x19f)){if(settings[_0xe4d5e7(0x226)]==_0xe4d5e7(0x18b))tgBot[_0xe4d5e7(0x156)](_0x5e289c[_0xe4d5e7(0x129)]['id'],_0xe4d5e7(0x25c))['catch'](_0x684337=>{telegramError(_0x684337);});_0x4769e4[_0xe4d5e7(0x1a5)](_0x1d1885=>{const _0x5db5c2=_0xe4d5e7;if(_0x1d1885[_0x5db5c2(0x14c)]!=_0x5db5c2(0x19f))toggleBot(_0x1d1885[_0x5db5c2(0x14c)],toggleStatus(_0x1d1885[_0x5db5c2(0x14c)]),_0x5db5c2(0x21b));});}else{if(settings[_0xe4d5e7(0x226)]==_0xe4d5e7(0x18b))tgBot[_0xe4d5e7(0x156)](_0x5e289c[_0xe4d5e7(0x129)]['id'],_0xe4d5e7(0x222)+_0x45a715)[_0xe4d5e7(0x14f)](_0x167e8e=>{telegramError(_0x167e8e);});toggleBot(_0x45a715,toggleStatus(_0x45a715),_0xe4d5e7(0x21b));}}),tgBot[_0x1ffcdb(0x126)](_0x1ffcdb(0x21d));});}}),tgBot[_0x51e410(0x194)](/\/disable/,_0x522d20=>{const _0xad0915=_0x51e410;if(!validateTelegram(_0x522d20))return;tgBot[_0xad0915(0x156)](_0x522d20[_0xad0915(0x129)]['id'],_0xad0915(0x20f))['catch'](_0x155b80=>{telegramError(_0x155b80);}),updateSetting(_0xad0915(0x1c9),![]);}),tgBot[_0x51e410(0x194)](/\/help/,_0xe046ef=>{const _0x298a3e=_0x51e410;if(!validateTelegram(_0xe046ef))return;tgBot[_0x298a3e(0x156)](_0xe046ef[_0x298a3e(0x129)]['id'],_0x3d4051)[_0x298a3e(0x14f)](_0xecda5f=>{telegramError(_0xecda5f);});}),tgBot['on'](_0x51e410(0x200),_0x2747ec=>{const _0x4cce29=_0x51e410;_0x2747ec[_0x4cce29(0x238)]()[_0x4cce29(0x1a3)]('404\x20Not\x20Found')&&(logging(_0x4cce29(0x1a9)),tgBot[_0x4cce29(0x1a6)](),tgBot=null,io['to']('botmanager')[_0x4cce29(0x160)](_0x4cce29(0x1e1),_0x4cce29(0x1a9)));}),process['once'](_0x51e410(0x158),()=>{const _0x3cc8a6=_0x51e410;if(tgBot)tgBot[_0x3cc8a6(0x1a6)]();process[_0x3cc8a6(0x237)](0x1);}),process[_0x51e410(0x155)](_0x51e410(0x23c),()=>{const _0x35d871=_0x51e410;if(tgBot)tgBot['stopPolling']();process[_0x35d871(0x237)](0x1);});}}function disableTelegram(){const _0x26f49d=_0xdb1f97;tgBot&&(tgBot[_0x26f49d(0x1a6)](),tgBot=null);}function sendTelegram(_0x39cd0d,_0x54bd5b){const _0x28ad3e=_0xdb1f97;if(settings[_0x28ad3e(0x1c9)]){if(settings['telegramEvents']==_0x28ad3e(0x19f)||(_0x54bd5b[_0x28ad3e(0x25e)]==_0x28ad3e(0x246)||_0x54bd5b[_0x28ad3e(0x25e)]==_0x28ad3e(0x217))&&settings['telegramEvents']==_0x28ad3e(0x1de)||_0x54bd5b[_0x28ad3e(0x25e)]==_0x28ad3e(0x132)&&settings['telegramEvents']==_0x28ad3e(0x18b)){if(tgBot&&settings['telegramChatId']){if(_0x54bd5b[_0x28ad3e(0x19a)])tgBot['sendMessage'](settings[_0x28ad3e(0x191)],_0x54bd5b[_0x28ad3e(0x13e)]+_0x28ad3e(0x22c)+_0x54bd5b[_0x28ad3e(0x17c)])['catch'](_0xd9d8d=>{telegramError(_0xd9d8d);});else tgBot[_0x28ad3e(0x156)](settings['telegramChatId'],'Bot\x20'+_0x39cd0d+_0x28ad3e(0x22c)+_0x54bd5b[_0x28ad3e(0x17c)])[_0x28ad3e(0x14f)](_0x26717a=>{telegramError(_0x26717a);});}}}}function getDeviceWithIp(_0x21a9e5){const _0x1ffa88=_0xdb1f97;return devices[_0x1ffa88(0x1f9)](_0x9117e3=>_0x9117e3['ip']===_0x21a9e5);}function _0x699a(_0x493f0c,_0xf1c85e){const _0x1afe55=_0x586e();return _0x699a=function(_0x3383c6,_0x231cd2){_0x3383c6=_0x3383c6-0x11b;let _0x586e09=_0x1afe55[_0x3383c6];return _0x586e09;},_0x699a(_0x493f0c,_0xf1c85e);}function temporaryAccess2FA(_0x1752e0,_0x428822){const _0x4c28c0=_0xdb1f97;let _0x176b56=new Date(),_0xd0d383=![];if(lastIpApproval){if(_0x176b56-lastIpApproval<0x1388)_0xd0d383=!![];}lastIpApproval=new Date();if(_0xd0d383)return;tgBot&&settings[_0x4c28c0(0x191)]&&(tgBot[_0x4c28c0(0x126)](_0x4c28c0(0x21d)),tgBot[_0x4c28c0(0x156)](settings['telegramChatId'],_0x4c28c0(0x1b1)+normalizeIP(_0x428822)[_0x4c28c0(0x220)]+_0x4c28c0(0x215),{'parse_mode':_0x4c28c0(0x12b),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x4c28c0(0x1ff),'callback_data':'15'},{'text':_0x4c28c0(0x141),'callback_data':'30'},{'text':'reject','callback_data':_0x4c28c0(0x1fb)}]]}})[_0x4c28c0(0x14f)](_0x1e0843=>{telegramError(_0x1e0843);}),tgBot['on'](_0x4c28c0(0x21d),async _0x41f410=>{const _0x4fa731=_0x4c28c0,_0x283a63=_0x41f410[_0x4fa731(0x259)],_0x18992e=_0x41f410[_0x4fa731(0x207)];tgBot[_0x4fa731(0x135)](_0x41f410['id'])[_0x4fa731(0x147)](async()=>{const _0x468e19=_0x4fa731;devices[_0x1752e0]['telegramIpApproval']={'clientip':_0x428822,'timestamp':new Date()[_0x468e19(0x169)](),'expiry':_0x283a63},_0x283a63!=_0x468e19(0x1fb)?(await tgBot[_0x468e19(0x156)](_0x18992e['chat']['id'],_0x468e19(0x17b)+_0x283a63+_0x468e19(0x202),{'parse_mode':_0x468e19(0x12b)})[_0x468e19(0x14f)](_0x1299f9=>{telegramError(_0x1299f9);}),io['to'](_0x1752e0)[_0x468e19(0x160)](_0x468e19(0x231),{'access':{'allow':![],'reason':_0x468e19(0x1b2),'token':null}})):(await tgBot[_0x468e19(0x156)](_0x18992e['chat']['id'],'Temporary\x20access\x20rejected')['catch'](_0x1dc742=>{telegramError(_0x1dc742);}),io['to'](_0x1752e0)[_0x468e19(0x160)](_0x468e19(0x231),{'access':{'allow':![],'reason':_0x468e19(0x19d),'token':null}}));}),tgBot['removeListener'](_0x4fa731(0x21d));}));}function loginAccess2FA(_0x287c1e,_0x537c3a){const _0x552370=_0xdb1f97;tgBot&&settings['telegramChatId']&&(tgBot[_0x552370(0x126)](_0x552370(0x21d)),tgBot['sendMessage'](settings['telegramChatId'],_0x552370(0x242)+normalizeIP(_0x537c3a)[_0x552370(0x220)]+_0x552370(0x215),{'parse_mode':_0x552370(0x12b),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x552370(0x1fb),'callback_data':_0x552370(0x1fb)}]]}})[_0x552370(0x14f)](_0x304e6f=>{telegramError(_0x304e6f);}),tgBot['on']('callback_query',async _0x38cc74=>{const _0x1a8870=_0x552370,_0xc64493=_0x38cc74[_0x1a8870(0x259)],_0x3a86b1=_0x38cc74[_0x1a8870(0x207)];tgBot[_0x1a8870(0x135)](_0x38cc74['id'])['then'](async()=>{const _0xf43ae1=_0x1a8870;devices[_0x287c1e][_0xf43ae1(0x16c)]={'clientip':_0x537c3a,'timestamp':new Date()['getTime'](),'expiry':_0xc64493},_0xc64493!='reject'?(await tgBot[_0xf43ae1(0x156)](_0x3a86b1[_0xf43ae1(0x129)]['id'],_0xf43ae1(0x1f5),{'parse_mode':_0xf43ae1(0x12b)})[_0xf43ae1(0x14f)](_0x53c2d0=>{telegramError(_0x53c2d0);}),io['to'](_0x287c1e)[_0xf43ae1(0x160)](_0xf43ae1(0x231),{'access':{'allow':![],'reason':_0xf43ae1(0x1b2),'token':null}})):(await tgBot[_0xf43ae1(0x156)](_0x3a86b1[_0xf43ae1(0x129)]['id'],_0xf43ae1(0x227))[_0xf43ae1(0x14f)](_0x21f699=>{telegramError(_0x21f699);}),io['to'](_0x287c1e)['emit'](_0xf43ae1(0x231),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x1a8870(0x126)]('callback_query');}));}function getConfiguration(){const _0x40e8cd=_0xdb1f97;return dbConfig[_0x40e8cd(0x17e)]('bots')[_0x40e8cd(0x1e9)]('botID')[_0x40e8cd(0x233)]()||[];}function getEnabledBots(){const _0x3b61b5=_0xdb1f97;return dbConfig[_0x3b61b5(0x17e)](_0x3b61b5(0x1ed))[_0x3b61b5(0x1e9)](_0x3b61b5(0x14c))[_0x3b61b5(0x20e)]({'status':_0x3b61b5(0x166)})[_0x3b61b5(0x233)]()||[];}function getDisabledBots(){const _0x4c5eb0=_0xdb1f97;return dbConfig[_0x4c5eb0(0x17e)](_0x4c5eb0(0x1ed))['sortBy'](_0x4c5eb0(0x14c))[_0x4c5eb0(0x20e)]({'status':_0x4c5eb0(0x16b)})[_0x4c5eb0(0x233)]()||[];}function getSettings(){const _0x55797b=_0xdb1f97;return dbSettings[_0x55797b(0x17e)](_0x55797b(0x1f1))['value']()||{'timeshift':0x0};}function _0x586e(){const _0x404b6a=['Which\x20bot\x20do\x20you\x20want\x20to\x20start?','pidRefreshToken','write','secure','alerts','\x20/\x20','getUTCHours','notification','path','Notifications\x20enabled\x0a','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','entries','::1','access','sortBy','getSeconds','hasOwnProperty','@analytics/google-analytics','bots','2144485BFzmtN','stop','from','settings','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bb-settings.json','/off\x20-\x20stop\x20bot(s)\x0a','Login\x20accepted','store-configuration','login\x20not\x20required','telegram','find','RSA-OAEP','reject','temporary\x20token\x20generated','loginRequired','map','15\x20min','polling_error','/restart\x20-\x20restart\x20bot(s)\x0a','\x20minutes','Unauthorized\x20attempt\x20to\x20update\x20settings','existsSync','bot','getStartingBalances','message','kill','-----------------------------------------------------------------------------------','analytics','temporaryAccessAllowed','mkdirSync','/:bot/support','filter','Notifications\x20disabled','cancel-loading','store-headless','connected','user','max','</b>\x20?','2FA\x20login\x20required','success','keys','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','/:bot/performance','stopped','node-telegram-bot-api','callback_query','Unauthorized\x20attempt\x20to\x20log\x20out','pidExpireLogin','show','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','All\x20bots\x20running\x20right\x20now','readdirSync','bot.js','telegramEvents','Login\x20rejected','9008190peKYSN','4615952GFPylo','join','Ok,\x20will\x20send\x20order\x20notifications\x20only','\x20>\x20','referer','telegramUsername','2FA\x20login\x20token\x20generated','starting\x20bot\x20|\x20Bot\x20','status','getDate','value','child_process','127.0.0.1','args','exit','toString','Unauthorized\x20attempt\x20to\x20store\x20configuration','bot-','http','SIGTERM','getMonth','telegramIpApproval','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','************','createServer','Allow\x20login\x20from\x20IP\x20address\x20<b>','constructor','Balance\x20Bot','-events.json','error','get-logs','listen','socket.io','isIPv4MappedAddress','getMinutes','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','2195738pTtWyf','Error:\x20Invalid\x20argument\x20','NTBA_FIX_319','username','name','Password\x20has\x20been\x20reset\x20to:\x20','randomBytes','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','generateKeyPairAsync','bbUsername','No\x20bots\x20running\x20right\x20now','/enable\x20-\x20enable\x20notifications\x0a','data','test','Invalid\x20authentication\x20token\x20(2)','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','match','type','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','new-disabled','slice','yargs/yargs','Notifications\x20disabled\x0a','remove','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','started','toIPv4Address','\x20|\x20','reset-password','logged\x20out','enabled\x20Bot\x20','auth','Ok,\x20will\x20send\x20alert\x20notifications\x20only','settings.','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Bot\x20Mgr\x20>\x20','removeListener','apiKey','privateKey','chat','/:bot','HTML','sockets','allow','date-fns','connection','port','live','order','version.json','send','answerCallbackQuery','bb-secure.json','21EtBDBO','isDirectory','getPortfolio','assign','jsonwebtoken','restarting\x20Bot\x20','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','botname','length','isValid','30\x20min','reason','-results.json','hex','set','randomFillSync','then','bb-config.json','ipc','1132605IFLCSq','exp','botID','20IuSRth',':\x20Bot\x20Mgr\x20>\x20','catch','add-bot','login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20login\x20attempt\x20(timeout)','Password\x20reset\x20rejected','once','sendMessage','timestamp','SIGINT','login\x20token\x20valid','encryptedUuid','new','getFullYear','unlinkSync','build','1jKwXEG','emit','emitHistory','initclient','timeshift','3880818itkmtb','-performance.json','enabled','kind','(((.+)+)+)+$','getTime','/on\x20-\x20start\x20bot(s)\x0a','disabled','telegram2FaApproval','User\x20has\x20been\x20validated','bb/','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','bbPassword','config/','defaults','logout','yes','clientip','3944370sXBmPu','cancelLoading','apply','uuid','2FA','Access\x20enabled\x20for\x20','event','handshake','get','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','temporary\x20access\x20not\x20allowed','-config.json','telegramToken','remoteAddress','expiry','index.html','update-bb','Invalid\x20username\x20or\x20IP\x20address','/help\x20-\x20show\x20available\x20commands\x0a','blacklist','orders','fork','version','search','split','inherit','telegramChatId','ipaddr.js','express','onText','sign','Unauthorized\x20attempt\x20to\x20get\x20logs','getHours','botmanager','/:bot/configuration','showname','sendFile','No\x20authentication\x20token','temporary\x20access\x20rejected','add','all','/disable\x20-\x20disable\x20notifications\x0a','log','static','includes','decrypt','forEach','stopPolling','backup/','push','Invalid\x20Telegram\x20token','server','login\x20required','build2','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','login','All\x20bots','get-starting-balances','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','reload','UA-192771731-1','page','You\x20can\x20use\x20the\x20following\x20commands:\x0a','2FA\x20required','toIPv4MappedAddress','<b>Balance\x20Bot\x20status:</b>\x0a','padStart','f2aRequired','Notifications\x20types:\x20','restart','password','secret','headers','running','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','ipv6',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','argv','Unauthorized\x20attempt\x20to\x20delete\x20bot','env','1000','host','telegramEnabled','storeHeadless','hashSync','invalid\x20credentials','default','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','delete-bot','publicKey','whitelistEnabled','token','idling\x20bot\x20\x20\x20|\x20Bot\x20','access\x20timeout','compareSync','Unauthorized\x20attempt\x20to\x20add\x20bot','\x20only\x0a','removeAllListeners','Bot\x20'];_0x586e=function(){return _0x404b6a;};return _0x586e();}function getSecure(){const _0x164bb5=_0xdb1f97;return dbSecure[_0x164bb5(0x17e)]('secure')[_0x164bb5(0x233)]()||{};}function getBlacklist(){const _0xa0a82e=_0xdb1f97;return dbSecure[_0xa0a82e(0x17e)](_0xa0a82e(0x18a))[_0xa0a82e(0x233)]()||[];}function broadcastToBots(_0x1e44b6,_0x1bb7bd){config['forEach'](_0x26cc79=>{const _0x4fd261=_0x699a;if(_0x26cc79['status']==_0x4fd261(0x166)&&_0x26cc79[_0x4fd261(0x131)]==_0x4fd261(0x1c0)){if(pid[_0x26cc79[_0x4fd261(0x14c)]])pid[_0x26cc79[_0x4fd261(0x14c)]][_0x4fd261(0x134)]({[_0x1e44b6]:_0x1bb7bd});}});}function storeSettings(_0x26b797,_0x474605=![]){const _0x5af510=_0xdb1f97;_0x26b797={...settings,..._0x26b797};if(_0x474605&&_0x26b797[_0x5af510(0x170)]!=_0x5af510(0x240)&&_0x26b797[_0x5af510(0x170)]!=''){const _0x295a41=crypt['decrypt'](secure[_0x5af510(0x128)],_0x26b797[_0x5af510(0x170)])[_0x5af510(0x207)][_0x5af510(0x18f)]('@')[0x0],_0x124bed=bcrypt[_0x5af510(0x1cb)](_0x295a41,saltRounds);_0x26b797={..._0x26b797,'bbPassword':_0x124bed};}if(_0x474605&&_0x26b797[_0x5af510(0x183)]!=_0x5af510(0x240)&&_0x26b797[_0x5af510(0x183)]!=''){const _0xb430af=crypt[_0x5af510(0x1a4)](secure['privateKey'],_0x26b797['telegramToken'])[_0x5af510(0x207)][_0x5af510(0x18f)]('@')[0x0];_0x26b797={..._0x26b797,'telegramToken':_0xb430af};}const _0x54d611=_0x26b797[_0x5af510(0x183)]!=_0x5af510(0x240)&&_0x26b797['telegramToken']!=settings[_0x5af510(0x183)]||_0x26b797[_0x5af510(0x22e)]!=settings[_0x5af510(0x22e)],_0x273ca3=_0x26b797[_0x5af510(0x183)]==''||_0x26b797[_0x5af510(0x22e)]=='';if(_0x54d611)_0x26b797[_0x5af510(0x226)]='all';for(const [_0x1c2cd8,_0x2c5948]of Object[_0x5af510(0x1e6)](_0x26b797)){if(_0x1c2cd8==_0x5af510(0x183)&&_0x2c5948==_0x5af510(0x240)){_0x26b797[_0x5af510(0x183)]=settings['telegramToken'];continue;};if(_0x1c2cd8==_0x5af510(0x170)&&_0x2c5948==_0x5af510(0x240)){_0x26b797[_0x5af510(0x170)]=settings[_0x5af510(0x170)];continue;};dbSettings[_0x5af510(0x145)]('settings.'+_0x1c2cd8,_0x2c5948)[_0x5af510(0x1dc)]();}settings=_0x26b797,io['to']('botmanager')[_0x5af510(0x160)](_0x5af510(0x1f1),cleanSettings()),broadcastToBots(_0x5af510(0x163),settings[_0x5af510(0x163)]);if(_0x54d611&&!_0x273ca3)initTelegram();if(_0x54d611&&_0x273ca3)disableTelegram();getAllClients()[_0x5af510(0x1a5)](_0x505393=>{const _0x23c813=_0x5af510;getSocket(_0x505393['id'])[_0x23c813(0x160)](_0x23c813(0x231),{'access':{'allow':![],'reason':_0x23c813(0x1b2),'token':null}});});}function updateSetting(_0x279ea9,_0x140615){const _0x3a00fa=_0xdb1f97;dbSettings[_0x3a00fa(0x145)](_0x3a00fa(0x123)+_0x279ea9,_0x140615)[_0x3a00fa(0x1dc)](),settings=getSettings(),io['to'](_0x3a00fa(0x198))['emit'](_0x3a00fa(0x1f1),cleanSettings());}function storeSecure(_0x187201){const _0x581e7e=_0xdb1f97;dbSecure[_0x581e7e(0x17e)](_0x581e7e(0x1dd))[_0x581e7e(0x1a8)](_0x187201)[_0x581e7e(0x1dc)](),secure=_0x187201;}function addBlacklist(_0xb03ba1){const _0x4e7f68=_0xdb1f97;cleanBlacklist();let _0x18541d;devices[_0xb03ba1][_0x4e7f68(0x23e)]?_0x18541d=Math[_0x4e7f68(0x214)](devices[_0xb03ba1][_0x4e7f68(0x23e)][_0x4e7f68(0x185)],loginExpiry):_0x18541d=loginExpiry,dbSecure[_0x4e7f68(0x17e)](_0x4e7f68(0x18a))[_0x4e7f68(0x1a8)]({'expiry':new Date()[_0x4e7f68(0x169)]()+_0x18541d*0x3c*0x3e8,'token':devices[_0xb03ba1][_0x4e7f68(0x1e8)][_0x4e7f68(0x1d2)]})[_0x4e7f68(0x1dc)](),blacklist=dbSecure['get'](_0x4e7f68(0x18a))[_0x4e7f68(0x233)]();}function cleanBlacklist(){const _0x2b059c=_0xdb1f97;let _0x56c3ae=dbSecure[_0x2b059c(0x17e)](_0x2b059c(0x18a))['cloneDeep']()[_0x2b059c(0x233)](),_0x50b7bb=new Date()['getTime']();_0x56c3ae[_0x2b059c(0x1a5)](_0x4ad8e1=>{const _0x39a71d=_0x2b059c;_0x4ad8e1[_0x39a71d(0x185)]<_0x50b7bb&&dbSecure[_0x39a71d(0x17e)](_0x39a71d(0x18a))['remove']({'expiry':_0x4ad8e1[_0x39a71d(0x185)]})[_0x39a71d(0x1dc)]();});}function initStates(){const _0x389029=_0xdb1f97;let _0x30f5a1=getConfiguration();_0x30f5a1[_0x389029(0x1a5)](_0x4668bb=>{const _0x23eb5b=_0x389029;_0x4668bb['live']=_0x23eb5b(0x21b);}),storeConfiguration(_0x30f5a1);}function onKeys(){const _0x596925=new RSA();return new Promise(_0x309103=>{const _0x1dad24=_0x699a;_0x596925[_0x1dad24(0x255)]()[_0x1dad24(0x147)](_0x1b06f5=>{_0x309103(_0x1b06f5);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x83c884=_0xdb1f97;let _0x1a6a26=getConfiguration(),_0x5037c5=![];_0x1a6a26[_0x83c884(0x1a5)](_0x1e53ae=>{const _0x230448=_0x83c884;if(_0x1e53ae[_0x230448(0x231)]=='running')_0x1e53ae[_0x230448(0x231)]=_0x230448(0x166),_0x5037c5=!![];else _0x1e53ae[_0x230448(0x231)]=='stopped'&&(_0x1e53ae[_0x230448(0x231)]=_0x230448(0x16b),_0x5037c5=!![]);});if(_0x5037c5)storeConfiguration(_0x1a6a26);let _0x3e90df=getSecure();if(!_0x3e90df[_0x83c884(0x1eb)](_0x83c884(0x1be))){let _0x29c881=await generateKeys();_0x3e90df[_0x83c884(0x1d0)]=_0x29c881['publicKey'],_0x3e90df['privateKey']=_0x29c881['privateKey'],_0x3e90df['secret']=crypto[_0x83c884(0x253)](0x20)[_0x83c884(0x238)](_0x83c884(0x144));;storeSecure(_0x3e90df);}let _0x2d962e=getSettings();_0x5037c5=![];!_0x2d962e[_0x83c884(0x1eb)](_0x83c884(0x1fd))&&(_0x2d962e[_0x83c884(0x1fd)]=![],_0x2d962e[_0x83c884(0x256)]='',_0x2d962e['bbPassword']='',_0x2d962e[_0x83c884(0x1ba)]=![],_0x5037c5=!![]);!_0x2d962e['hasOwnProperty']('whitelistEnabled')&&(_0x2d962e[_0x83c884(0x1d1)]=![],_0x2d962e['whitelist']=[],_0x2d962e[_0x83c884(0x20b)]=![],_0x5037c5=!![]);if(!_0x2d962e[_0x83c884(0x1eb)]('telegramEnabled')){if(_0x2d962e[_0x83c884(0x191)])_0x2d962e[_0x83c884(0x1c9)]=!![];else _0x2d962e['telegramEnabled']=![];_0x5037c5=!![];}if(_0x5037c5)storeSettings(_0x2d962e);}function storeConfiguration(_0x73e78d){const _0x2ca6f4=_0xdb1f97;dbConfig[_0x2ca6f4(0x17e)](_0x2ca6f4(0x1ed))[_0x2ca6f4(0x264)]()['write'](),dbConfig[_0x2ca6f4(0x17e)](_0x2ca6f4(0x1ed))[_0x2ca6f4(0x1a8)](..._0x73e78d)[_0x2ca6f4(0x1dc)](),config=_0x73e78d;}function resetPassword(){const _0x5649f2=_0xdb1f97;tgBot&&settings[_0x5649f2(0x191)]&&(tgBot['removeListener'](_0x5649f2(0x21d)),tgBot['sendMessage'](settings[_0x5649f2(0x191)],_0x5649f2(0x219),{'parse_mode':_0x5649f2(0x12b),'reply_markup':{'inline_keyboard':[[{'text':_0x5649f2(0x174),'callback_data':_0x5649f2(0x174)},{'text':'no','callback_data':'no'}]]}})[_0x5649f2(0x14f)](_0x26fe55=>{telegramError(_0x26fe55);}),tgBot['on']('callback_query',async _0x40d334=>{const _0x574fd6=_0x5649f2,_0x181765=_0x40d334[_0x574fd6(0x259)],_0x398fb9=_0x40d334[_0x574fd6(0x207)];tgBot[_0x574fd6(0x135)](_0x40d334['id'])[_0x574fd6(0x147)](async()=>{const _0x33e92d=_0x574fd6;if(_0x181765!='no'){const _0x56c431=0xf,_0x2514f6=_0x33e92d(0x1f2),_0x38cb6c=Array['from'](crypto[_0x33e92d(0x146)](new Uint32Array(_0x56c431)))[_0x33e92d(0x1fe)](_0x56f366=>_0x2514f6[_0x56f366%_0x2514f6[_0x33e92d(0x13f)]])['join'](''),_0xd5233a=bcrypt[_0x33e92d(0x1cb)](_0x38cb6c,saltRounds);storeSettings({'bbPassword':_0xd5233a}),await tgBot[_0x33e92d(0x156)](_0x398fb9[_0x33e92d(0x129)]['id'],_0x33e92d(0x252)+_0x38cb6c,{'parse_mode':_0x33e92d(0x12b)})[_0x33e92d(0x14f)](_0x449c63=>{telegramError(_0x449c63);});}else await tgBot[_0x33e92d(0x156)](_0x398fb9[_0x33e92d(0x129)]['id'],_0x33e92d(0x154))[_0x33e92d(0x14f)](_0x31fc97=>{telegramError(_0x31fc97);});}),tgBot[_0x574fd6(0x126)](_0x574fd6(0x21d));}));}function logging(_0x2a2452){const _0x528233=_0xdb1f97;console[_0x528233(0x1a1)](getTimeStamp()+_0x528233(0x14e)+_0x2a2452);if(tgBot&&settings[_0x528233(0x191)]&&settings[_0x528233(0x226)]!=_0x528233(0x18b))tgBot[_0x528233(0x156)](settings[_0x528233(0x191)],_0x528233(0x125)+_0x2a2452)[_0x528233(0x14f)](_0x27ba7c=>{telegramError(_0x27ba7c);});}function getServerTime(){const _0x31fbda=_0xdb1f97,_0xb719c0=new Date();return _0xb719c0[_0x31fbda(0x15c)]()+'/'+(_0xb719c0[_0x31fbda(0x23d)]()+0x1)[_0x31fbda(0x238)]()[_0x31fbda(0x1b9)](0x2,'0')+'/'+_0xb719c0[_0x31fbda(0x232)]()[_0x31fbda(0x238)]()['padStart'](0x2,'0')+'\x20'+_0xb719c0[_0x31fbda(0x197)]()[_0x31fbda(0x238)]()[_0x31fbda(0x1b9)](0x2,'0')+':'+_0xb719c0[_0x31fbda(0x24b)]()[_0x31fbda(0x238)]()[_0x31fbda(0x1b9)](0x2,'0')+':'+_0xb719c0[_0x31fbda(0x1ea)]()[_0x31fbda(0x238)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x1ee80d=_0xdb1f97,_0x132f76=shiftedTime();return _0x132f76[_0x1ee80d(0x15c)]()+'/'+(_0x132f76[_0x1ee80d(0x23d)]()+0x1)['toString']()[_0x1ee80d(0x1b9)](0x2,'0')+'/'+_0x132f76[_0x1ee80d(0x232)]()[_0x1ee80d(0x238)]()[_0x1ee80d(0x1b9)](0x2,'0')+'\x20'+_0x132f76[_0x1ee80d(0x197)]()[_0x1ee80d(0x238)]()[_0x1ee80d(0x1b9)](0x2,'0')+':'+_0x132f76[_0x1ee80d(0x24b)]()[_0x1ee80d(0x238)]()[_0x1ee80d(0x1b9)](0x2,'0')+':'+_0x132f76[_0x1ee80d(0x1ea)]()[_0x1ee80d(0x238)]()[_0x1ee80d(0x1b9)](0x2,'0');}function shiftedTime(){const _0x2ed986=_0xdb1f97,_0x4f6b5f=new Date();let _0x2b686d=_0x4f6b5f;if(settings[_0x2ed986(0x163)]&&settings[_0x2ed986(0x163)]!==0x0)_0x2b686d=fns[_0x2ed986(0x19e)](_0x4f6b5f,{'hours':settings[_0x2ed986(0x163)]});return _0x2b686d;}function startScheduler(){const _0x259c22=_0xdb1f97;let _0x41e6ad=new Date()[_0x259c22(0x1e0)]();_0x41e6ad==0x1&&backupConfigFiles();_0x41e6ad==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0xfe6efd=_0xdb1f97;fs[_0xfe6efd(0x224)](configpath,{'withFileTypes':!![]})[_0xfe6efd(0x1a5)](_0x458d07=>{const _0x3f0b99=_0xfe6efd;if(!_0x458d07[_0x3f0b99(0x138)]())fs['copyFileSync'](configpath+_0x458d07['name'],configbackuppath+_0x458d07[_0x3f0b99(0x251)]);});}function triggerAnalytics(){const _0x54be0a=_0xdb1f97;analytics[_0x54be0a(0x1b4)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x44c186,_0x21e5c9){const _0x53c5b0=_0xdb1f97;if(_0x44c186[_0x53c5b0(0x250)]==settings[_0x53c5b0(0x256)]&&bcrypt[_0x53c5b0(0x1d5)](_0x44c186[_0x53c5b0(0x1bd)],settings[_0x53c5b0(0x170)])){if(settings[_0x53c5b0(0x1ba)])return{'allow':![],'reason':_0x53c5b0(0x216),'token':null};else{const _0x3f0371=generateLoginToken(_0x21e5c9);return{'allow':!![],'reason':_0x53c5b0(0x151),'token':_0x3f0371};}}else return{'allow':![],'reason':_0x53c5b0(0x1cc),'token':null};}function refreshToken(_0x52b653){const _0x2fda52=generateLoginToken(_0x52b653);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2fda52};}function validateAccess(_0x24a8d7,_0x57352f){const _0x35ab31=_0xdb1f97;let _0xe93465=devices[_0x57352f]['ip'],_0x47a596;const _0x95ab7=_0x3e9861=>{const _0xeee3e7=_0x699a;if(settings['loginRequired']){if(settings[_0xeee3e7(0x1ba)]){if(telegram2FaApproved(_0x57352f)){const _0x138f0b=generateLoginToken(_0x57352f);return{'allow':!![],'reason':_0xeee3e7(0x22f),'token':_0x138f0b};}else return{'allow':![],'reason':_0xeee3e7(0x1ab),'token':null};}else return _0x47a596=validToken(_0x3e9861,_0x57352f),_0x47a596[_0xeee3e7(0x1eb)](_0xeee3e7(0x217))?{'allow':!![],'reason':_0xeee3e7(0x159),'token':_0x3e9861}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xeee3e7(0x1f7),'token':null};};if(settings[_0x35ab31(0x1d1)]){let _0x3c6b7f=[...settings['whitelist'],_0x35ab31(0x1e7),'::ffff:127.0.0.1',_0x35ab31(0x235)];if(_0x3c6b7f[_0x35ab31(0x1a3)](_0xe93465))return _0x95ab7(_0x24a8d7);else{_0x47a596=validToken(_0x24a8d7,_0x57352f);if(_0x47a596[_0x35ab31(0x1eb)](_0x35ab31(0x217)))return _0x95ab7(_0x24a8d7);else{if(telegramIpApproved(_0x57352f)){const _0x553060=generateToken(_0x57352f);return _0x47a596=_0x95ab7(_0x24a8d7),_0x47a596[_0x35ab31(0x12d)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x553060}:_0x47a596;}else return settings[_0x35ab31(0x20b)]?{'allow':![],'reason':_0x35ab31(0x1b6),'token':null}:{'allow':![],'reason':_0x35ab31(0x181),'token':null};}}}else return _0x95ab7(_0x24a8d7);}function timelyDecrypt(_0x39f721,_0x3747c0=!![]){const _0x5ee9fe=_0xdb1f97;if(_0x39f721)try{const _0x5d5440=crypt[_0x5ee9fe(0x1a4)](secure['privateKey'],_0x39f721)[_0x5ee9fe(0x207)],_0x18fef7=_0x5d5440[_0x5ee9fe(0x18f)]('@')[0x0],_0x3e18f1=_0x5d5440['split']('@')[0x1],_0x5bc2c1=new Date()['getTime']();if(_0x3747c0){if(_0x5bc2c1-_0x3e18f1<maxSecretAge*0x3e8)return _0x18fef7;else return![];}else return _0x18fef7;}catch(_0x45ccb4){return![];}else return![];}const validToken=(_0x458f22,_0x3604ba)=>{const _0x5a05b5=_0xdb1f97,_0x583c09=devices[_0x3604ba]['ip'];if(!_0x458f22)return{'error':_0x5a05b5(0x19c)};for(let _0x1b7bb6 of blacklist){if(_0x1b7bb6[_0x5a05b5(0x1d2)]==_0x458f22)return{'error':'Token\x20blacklisted'};}let _0x278c8c;try{_0x278c8c=jwt['verify'](_0x458f22,secure[_0x5a05b5(0x1be)]+_0x3604ba);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x278c8c['hasOwnProperty']('clientip')&&!_0x278c8c['hasOwnProperty'](_0x5a05b5(0x250))||!_0x278c8c['hasOwnProperty'](_0x5a05b5(0x14b)))return{'error':_0x5a05b5(0x25b)};if(!_0x278c8c[_0x5a05b5(0x1eb)](_0x5a05b5(0x250))&&_0x278c8c[_0x5a05b5(0x1eb)](_0x5a05b5(0x175))){const {clientip:_0xda5bdc}=_0x278c8c;return _0x583c09==_0xda5bdc?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x278c8c['hasOwnProperty'](_0x5a05b5(0x250))&&_0x278c8c[_0x5a05b5(0x1eb)](_0x5a05b5(0x175))){const {username:_0x5cae7c,clientip:_0x498d1d}=_0x278c8c;return settings[_0x5a05b5(0x256)]==_0x5cae7c&&_0x583c09==_0x498d1d?{'success':_0x5a05b5(0x16d)}:{'error':_0x5a05b5(0x188)};}}},generateLoginToken=_0x5dd878=>{const _0x6c42f5=_0xdb1f97;if(_0x5dd878){const _0x2f3c6a=devices[_0x5dd878]['ip'];return jwt[_0x6c42f5(0x195)]({'username':settings['bbUsername'],'clientip':_0x2f3c6a},secure[_0x6c42f5(0x1be)]+_0x5dd878,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x35f121=>{const _0x43012d=_0xdb1f97;if(_0x35f121){const _0x3fbf1c=devices[_0x35f121]['ip'];return jwt['sign']({'clientip':_0x3fbf1c},secure[_0x43012d(0x1be)]+_0x35f121,{'expiresIn':devices[_0x35f121][_0x43012d(0x23e)][_0x43012d(0x185)]*0x3c});}else return![];},telegramIpApproved=_0x4e13c0=>{const _0x4d2923=_0xdb1f97;let _0x5a8c9e=![];return devices[_0x4e13c0][_0x4d2923(0x23e)]&&devices[_0x4e13c0][_0x4d2923(0x23e)][_0x4d2923(0x185)]!='reject'&&(_0x5a8c9e=devices[_0x4e13c0][_0x4d2923(0x23e)]['clientip']==devices[_0x4e13c0]['ip']&&new Date()[_0x4d2923(0x169)]()-devices[_0x4e13c0][_0x4d2923(0x23e)]['timestamp']<devices[_0x4e13c0][_0x4d2923(0x23e)][_0x4d2923(0x185)]*0x3c*0x3e8),_0x5a8c9e;},telegram2FaApproved=_0x354d78=>{const _0xfc7774=_0xdb1f97;let _0x2372c0=![];return devices[_0x354d78][_0xfc7774(0x16c)]&&devices[_0x354d78][_0xfc7774(0x16c)][_0xfc7774(0x185)]!=_0xfc7774(0x1fb)&&(_0x2372c0=devices[_0x354d78]['telegram2FaApproval'][_0xfc7774(0x175)]==devices[_0x354d78]['ip']&&new Date()[_0xfc7774(0x169)]()-devices[_0x354d78][_0xfc7774(0x16c)]['timestamp']<devices[_0x354d78][_0xfc7774(0x16c)]['expiry']*0x3c*0x3e8),_0x2372c0;},normalizeIP=_0x1452f0=>{const _0x19f1e7=_0xdb1f97;let _0x9ccde=null,_0x4677b9=null;if(ipaddr[_0x19f1e7(0x140)](_0x1452f0)){const _0x334007=ipaddr['parse'](_0x1452f0);_0x334007[_0x19f1e7(0x167)]()===_0x19f1e7(0x1c2)?(_0x334007[_0x19f1e7(0x24a)]()&&(_0x9ccde=_0x334007[_0x19f1e7(0x11c)]()[_0x19f1e7(0x238)]()),_0x4677b9=_0x334007['toString']()):(_0x9ccde=_0x334007['toString'](),_0x4677b9=_0x334007[_0x19f1e7(0x1b7)]()[_0x19f1e7(0x238)]());}return{'show':_0x9ccde?_0x9ccde:_0x4677b9,'store':_0x4677b9};};