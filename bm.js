const _0x4e931c=_0x31e4;(function(_0x3a00df,_0xc975cd){const _0x8bedaa=_0x31e4,_0x2b4d51=_0x3a00df();while(!![]){try{const _0x4ebae6=-parseInt(_0x8bedaa(0x192))/0x1*(parseInt(_0x8bedaa(0x1b4))/0x2)+-parseInt(_0x8bedaa(0x1a9))/0x3*(-parseInt(_0x8bedaa(0xf8))/0x4)+parseInt(_0x8bedaa(0x139))/0x5*(parseInt(_0x8bedaa(0xfa))/0x6)+parseInt(_0x8bedaa(0x1cd))/0x7*(parseInt(_0x8bedaa(0x9a))/0x8)+-parseInt(_0x8bedaa(0x186))/0x9+-parseInt(_0x8bedaa(0x176))/0xa+parseInt(_0x8bedaa(0xa9))/0xb*(parseInt(_0x8bedaa(0x147))/0xc);if(_0x4ebae6===_0xc975cd)break;else _0x2b4d51['push'](_0x2b4d51['shift']());}catch(_0x422e75){_0x2b4d51['push'](_0x2b4d51['shift']());}}}(_0x5717,0xb82c5));const _0x517b17=function(){let _0x31f32f=!![];return function(_0x20fb73,_0x112ef6){const _0x38203d=_0x31f32f?function(){if(_0x112ef6){const _0xa7a2d7=_0x112ef6['apply'](_0x20fb73,arguments);return _0x112ef6=null,_0xa7a2d7;}}:function(){};return _0x31f32f=![],_0x38203d;};}(),_0x147470=_0x517b17(this,function(){const _0xd5898=_0x31e4;return _0x147470[_0xd5898(0xd4)]()[_0xd5898(0x1cb)](_0xd5898(0x165))['toString']()[_0xd5898(0x14b)](_0x147470)[_0xd5898(0x1cb)](_0xd5898(0x165));});_0x147470();'use strict';process[_0x4e931c(0x119)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4e931c(0x18b)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4e931c(0x15c)),low=require(_0x4e931c(0x179)),path=require(_0x4e931c(0x10c)),crypto=require(_0x4e931c(0xdc)),Crypt=require(_0x4e931c(0x112))[_0x4e931c(0xed)],RSA=require(_0x4e931c(0x112))['RSA'],bcrypt=require(_0x4e931c(0x189)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x4e931c(0xec))['default'],googleAnalytics=require(_0x4e931c(0x171))[_0x4e931c(0xac)],ipaddr=require(_0x4e931c(0xcd)),argv=require(_0x4e931c(0xe8))(process[_0x4e931c(0xfd)][_0x4e931c(0x11e)](0x2))[_0x4e931c(0xfd)],PORT=argv[_0x4e931c(0xe9)]||_0x4e931c(0xbb),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log'](_0x4e931c(0x13c)+PORT+_0x4e931c(0x193)),process['exit'](0x1);const HOST=argv[_0x4e931c(0xf9)]||null,userID=argv[_0x4e931c(0x14c)]||'';let bbpath=_0x4e931c(0x19d),bbpath2='';const botfile=_0x4e931c(0x146),configfile=_0x4e931c(0x1b3),settingsfile=_0x4e931c(0x121),securefile=_0x4e931c(0xc8);!fs[_0x4e931c(0x1a8)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4e931c(0xc7)),configpath=userID?bbpath+_0x4e931c(0xae)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x4e931c(0xb9);!fs[_0x4e931c(0x1a8)](configpath)&&fs[_0x4e931c(0x167)](configpath);!fs[_0x4e931c(0x1a8)](configbackuppath)&&fs[_0x4e931c(0x167)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e931c(0x182)]({'bots':[]})[_0x4e931c(0xa6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4e931c(0x182)]({'secure':{},'blacklist':[]})[_0x4e931c(0xa6)]();let crypt=new Crypt({'md':_0x4e931c(0xbe),'rsaStandard':_0x4e931c(0xc6)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4e931c(0x117))[_0x4e931c(0x13d)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x4e931c(0xb3)),app=express(),http=require(_0x4e931c(0xd2))[_0x4e931c(0x9e)](app);app[_0x4e931c(0x177)](express[_0x4e931c(0xf2)](path[_0x4e931c(0x18e)](__dirname,bbpath2,'build2'))),app['use'](express[_0x4e931c(0xf2)](path[_0x4e931c(0x18e)](__dirname,bbpath2,_0x4e931c(0x1c2)))),app[_0x4e931c(0x11f)]('/',function(_0xceac99,_0x240e8c){const _0x2284bd=_0x4e931c;_0x240e8c[_0x2284bd(0x93)](path['join'](__dirname,bbpath2,_0x2284bd(0x151),_0x2284bd(0x15e)));}),app[_0x4e931c(0x11f)](_0x4e931c(0x118),function(_0x5464cf,_0x3440c6){const _0x405f91=_0x4e931c;_0x3440c6[_0x405f91(0x93)](path[_0x405f91(0x18e)](__dirname,bbpath2,_0x405f91(0x1c2),_0x405f91(0x15e)));}),app[_0x4e931c(0x11f)](_0x4e931c(0x153),(_0x99b2f1,_0x26eb71)=>{const _0x43e19f=_0x4e931c;_0x26eb71[_0x43e19f(0x93)](path[_0x43e19f(0x18e)](__dirname,bbpath2,_0x43e19f(0x1c2),_0x43e19f(0x15e)));}),app[_0x4e931c(0x11f)]('/:bot/performance',(_0x12f690,_0x55b2c1)=>{const _0x538042=_0x4e931c;_0x55b2c1[_0x538042(0x93)](path[_0x538042(0x18e)](__dirname,bbpath2,_0x538042(0x1c2),'index.html'));}),app[_0x4e931c(0x11f)]('/:bot/coins',(_0x5460e6,_0x51b82e)=>{const _0x499cf3=_0x4e931c;_0x51b82e[_0x499cf3(0x93)](path['join'](__dirname,bbpath2,_0x499cf3(0x1c2),_0x499cf3(0x15e)));}),app['get'](_0x4e931c(0xbf),(_0xe5648b,_0x56d29a)=>{const _0x160151=_0x4e931c;_0x56d29a[_0x160151(0x93)](path['join'](__dirname,bbpath2,_0x160151(0x1c2),_0x160151(0x15e)));}),app['get'](_0x4e931c(0xf3),(_0x35acc5,_0x4a8dfe)=>{const _0x5346ed=_0x4e931c;_0x4a8dfe[_0x5346ed(0x93)](path[_0x5346ed(0x18e)](__dirname,bbpath2,_0x5346ed(0x1c2),_0x5346ed(0x15e)));}),app[_0x4e931c(0x11f)](_0x4e931c(0x149),(_0x53f1d2,_0x592404)=>{const _0x30252c=_0x4e931c;_0x592404[_0x30252c(0x93)](path['join'](__dirname,bbpath2,_0x30252c(0x1c2),_0x30252c(0x15e)));});if(HOST)http[_0x4e931c(0x103)](PORT,HOST);else http[_0x4e931c(0x103)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x4e931c(0xe6)})]}),TelegramBot=require(_0x4e931c(0x184));let tgBot;if(settings[_0x4e931c(0x198)]&&settings[_0x4e931c(0x198)]!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x30849e=_0x4e931c;console['log'](''),console[_0x30849e(0x1c0)](_0x30849e(0x17e)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x30849e(0x17e));if(config[_0x30849e(0x1cc)]!=0x0)config[_0x30849e(0x1aa)](_0x251e9c=>{const _0x1140ba=_0x30849e;if(_0x251e9c[_0x1140ba(0x10a)]==_0x1140ba(0x11b)||_0x251e9c['status']=='new')logging(_0x1140ba(0x161)+_0x251e9c['botID']+_0x1140ba(0xea)+_0x251e9c[_0x1140ba(0x163)]),startBot([_0x251e9c['botID'],userID],{'cwd':bbpath},function(_0x369e33){if(_0x369e33)logging(_0x369e33);});else(_0x251e9c[_0x1140ba(0x10a)]==_0x1140ba(0x13f)||_0x251e9c[_0x1140ba(0x10a)]==_0x1140ba(0x124))&&logging(_0x1140ba(0xaf)+_0x251e9c[_0x1140ba(0x1d2)]+_0x1140ba(0xea)+_0x251e9c['botname']);});else!newBot&&console[_0x30849e(0x1c0)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x30849e(0x1c0)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x12fcdf=_0x4e931c;io['on'](_0x12fcdf(0xb8),_0x585893=>{const _0xc3bb3a=_0x12fcdf;let _0x43e678,_0x38a108,_0x40e34f,_0xde686e,_0x154313;const _0x556513=_0x585893['handshake'][_0xc3bb3a(0xca)][_0xc3bb3a(0xe7)];_0x38a108=_0x556513[_0xc3bb3a(0x19f)](/bot[0-9]{3}/);if(_0x38a108)_0x40e34f=_0x38a108[0x0][_0xc3bb3a(0x19f)](/[0-9]{3}/);if(_0x40e34f)_0x43e678=_0x40e34f[0x0];else _0x43e678=_0xc3bb3a(0x180);const _0x43aaf8=_0x585893[_0xc3bb3a(0x115)][_0xc3bb3a(0x1ae)][_0xc3bb3a(0x14d)];if(!_0x43aaf8)_0x585893['emit'](_0xc3bb3a(0x10a),{'publicKey':secure['publicKey']});else{_0xde686e=timelyDecrypt(_0x43aaf8,![]);if(!_0xde686e)_0x585893[_0xc3bb3a(0xf5)](_0xc3bb3a(0x10a),{'publicKey':secure[_0xc3bb3a(0x132)]});else{_0x154313=normalizeIP(_0x585893[_0xc3bb3a(0x99)][_0xc3bb3a(0xc2)])['store'];if(!devices[_0xde686e])devices[_0xde686e]={'uuid':_0xde686e,'access':{'token':null}};devices[_0xde686e]['ip']=_0x154313;const _0x4c8238=addClient(_0x585893['id'],_0xde686e,_0x43e678);setAccess(_0x4c8238),_0x585893['on'](_0xc3bb3a(0xc3),_0x556683=>{const _0x3db2ff=_0xc3bb3a,_0x413d1d=timelyDecrypt(_0x556683[_0x3db2ff(0x15b)]);if(_0x413d1d){_0x556683={'username':_0x556683[_0x3db2ff(0x1c6)],'password':_0x413d1d},devices[_0xde686e][_0x3db2ff(0x1d4)]=validateCredentials(_0x556683,_0xde686e);if(devices[_0xde686e][_0x3db2ff(0x1d4)][_0x3db2ff(0x1c8)]==![]&&devices[_0xde686e][_0x3db2ff(0x1d4)][_0x3db2ff(0x127)]==_0x3db2ff(0x197))_0x585893[_0x3db2ff(0xf5)](_0x3db2ff(0x10a),{'access':devices[_0xde686e]['access']}),loginAccess2FA(_0xde686e,_0x154313);else{if(devices[_0xde686e]['access'][_0x3db2ff(0x1c8)]==![]&&devices[_0xde686e][_0x3db2ff(0x1d4)][_0x3db2ff(0x127)]==_0x3db2ff(0x199))_0x585893[_0x3db2ff(0xf5)](_0x3db2ff(0x10a),{'access':devices[_0xde686e][_0x3db2ff(0x1d4)]});else devices[_0xde686e][_0x3db2ff(0x1d4)][_0x3db2ff(0x1c8)]&&devices[_0xde686e][_0x3db2ff(0x1d4)]['reason']==_0x3db2ff(0x98)&&(getClientsWithUuid(_0xde686e)[_0x3db2ff(0x1aa)](_0x1e72fe=>{setAccess(_0x1e72fe);}),setTokenRefresh(_0xde686e),setSessionTimeout(_0x3db2ff(0xc3),_0xde686e));}}else logging(_0x3db2ff(0x108));}),_0x585893['on'](_0xc3bb3a(0xa0),()=>{resetPassword();}),_0x585893['on'](_0xc3bb3a(0xce),_0x408566=>{removeClient(_0x585893['id']);});}}});}function initClient(_0x2b68d6){const _0x462a27=_0x4e931c;if(_0x2b68d6!=_0x462a27(0x180)&&config['apiKey']!=''){if(pid[_0x2b68d6])pid[_0x2b68d6][_0x462a27(0x109)]({'function':_0x462a27(0xd7),'args':null});}}function getSocket(_0x5e5ebf){const _0xd4bef6=_0x4e931c;return io['sockets']['sockets'][_0xd4bef6(0x11f)](_0x5e5ebf);}function setAccess(_0x2449d6){const _0x4a763c=_0x4e931c,_0x21710c=getSocket(_0x2449d6['id']),_0x176008=_0x2449d6[_0x4a763c(0x10f)],_0x15ce3b=_0x2449d6[_0x4a763c(0x160)];devices[_0x176008][_0x4a763c(0x1d4)]=validateAccess(devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x17a)],_0x176008),_0x21710c[_0x4a763c(0x18e)](_0x176008);if(devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x1c8)]){_0x21710c[_0x4a763c(0x18e)](_0x15ce3b);if(_0x15ce3b==_0x4a763c(0x180))initializeSocketBotManager(_0x21710c);else initializeSocketBot(_0x21710c);initClient(_0x15ce3b);}devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x17a)]&&devices[_0x176008]['access'][_0x4a763c(0x127)]==_0x4a763c(0xbd)&&setSessionTimeout(_0x4a763c(0x19c),_0x176008),devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x17a)]&&devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x127)]==_0x4a763c(0xc0)&&setSessionTimeout(_0x4a763c(0xc3),_0x176008),_0x21710c['emit'](_0x4a763c(0x10a),{'status':_0x2449d6['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x176008][_0x4a763c(0x1d4)],'externalip':devices[_0x176008]['ip'],'publicKey':secure['publicKey']}),devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x1c8)]==![]&&devices[_0x176008][_0x4a763c(0x1d4)][_0x4a763c(0x127)]==_0x4a763c(0xd1)&&temporaryAccess2FA(_0x176008,devices[_0x176008]['ip']);}function setSessionTimeout(_0x4e7785,_0x504584){const _0xfaf058=_0x4e931c;let _0x48fb7c;if(_0x4e7785==_0xfaf058(0xc3))_0x48fb7c=loginExpiry*0x3c*0x3e8;else _0x48fb7c=devices[_0x504584][_0xfaf058(0x144)]['expiry']*0x3c*0x3e8-(new Date()[_0xfaf058(0xa7)]()-devices[_0x504584][_0xfaf058(0x144)]['timestamp']);if(devices[_0x504584][_0xfaf058(0xbc)])clearTimeout(devices[_0x504584][_0xfaf058(0xbc)]);devices[_0x504584]['pidExpireLogin']=setTimeout(()=>{const _0x5538d1=_0xfaf058;if(devices[_0x504584][_0x5538d1(0x18d)])clearTimeout(devices[_0x504584]['pidRefreshToken']);removeSocketListeners(_0x504584),addBlacklist(_0x504584),devices[_0x504584][_0x5538d1(0x144)]=null,devices[_0x504584][_0x5538d1(0x162)]=null,devices[_0x504584]['access'][_0x5538d1(0x17a)]=null,devices[_0x504584]['access']=validateAccess(devices[_0x504584][_0x5538d1(0x1d4)]['token'],_0x504584),!(devices[_0x504584][_0x5538d1(0x1d4)]['allow']&&devices[_0x504584][_0x5538d1(0x1d4)][_0x5538d1(0x127)]==_0x5538d1(0x18a))&&(_0x4e7785=='login'?io['to'](_0x504584)[_0x5538d1(0xf5)](_0x5538d1(0x10a),{'access':{'allow':![],'reason':_0x5538d1(0x16f),'token':null}}):io['to'](_0x504584)[_0x5538d1(0xf5)](_0x5538d1(0x10a),{'access':{'allow':![],'reason':_0x5538d1(0x148),'token':null}})),devices[_0x504584]['access'][_0x5538d1(0x17a)]=null;},_0x48fb7c);}function setTokenRefresh(_0x284433){const _0x13964a=_0x4e931c;if(devices[_0x284433][_0x13964a(0x18d)])clearTimeout(devices[_0x284433][_0x13964a(0x18d)]);devices[_0x284433][_0x13964a(0x18d)]=setTimeout(()=>{const _0x387794=_0x13964a;getClientsWithUuid(_0x284433)[_0x387794(0x1cc)]!=0x0?(devices[_0x284433][_0x387794(0x1d4)]=refreshToken(_0x284433),io['to'](_0x284433)['emit']('status',{'status':_0x387794(0x1b2),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x284433][_0x387794(0x1d4)],'externalip':devices[_0x284433]['ip'],'publicKey':secure[_0x387794(0x132)]}),setTokenRefresh(_0x284433)):clearTimeout(devices[_0x284433][_0x387794(0x18d)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x27bc31){const _0x210a4c=_0x4e931c,_0x23d09b=getClient(_0x27bc31['id'])[_0x210a4c(0x10f)];_0x27bc31[_0x210a4c(0xf5)](_0x210a4c(0xd5),config),_0x27bc31[_0x210a4c(0xf5)](_0x210a4c(0x1bc),cleanSettings()),_0x27bc31['on'](_0x210a4c(0x1c3),_0x4fb9f8=>{const _0x24d55b=_0x210a4c;if(validateAccess(_0x4fb9f8,_0x23d09b)[_0x24d55b(0x1c8)])addBot();else logging(_0x24d55b(0x1a3));}),_0x27bc31['on']('update-bot',(_0x5ecdf2,_0x55798e)=>{const _0x3d8d34=_0x210a4c;if(validateAccess(_0x55798e,_0x23d09b)['allow'])toggleBot(_0x5ecdf2[_0x3d8d34(0x1d2)],_0x5ecdf2[_0x3d8d34(0x10a)],_0x5ecdf2[_0x3d8d34(0x1c1)]);else logging(_0x3d8d34(0x1bf));}),_0x27bc31['on'](_0x210a4c(0x17f),(_0x19fb68,_0x4dd322)=>{const _0x4d2ab7=_0x210a4c;if(validateAccess(_0x4dd322,_0x23d09b)['allow'])deleteBot(_0x19fb68);else logging(_0x4d2ab7(0xd6));}),_0x27bc31['on']('store-settings',(_0x401082,_0x3e8a71)=>{const _0x338c5a=_0x210a4c;if(validateAccess(_0x3e8a71,_0x23d09b)[_0x338c5a(0x1c8)])storeSettings(_0x401082,!![]);else logging(_0x338c5a(0x1d3));}),_0x27bc31['on']('update-bb',(_0x5d6241,_0x57f091)=>{const _0xb016f6=_0x210a4c;if(validateAccess(_0x57f091,_0x23d09b)[_0xb016f6(0x1c8)])updateBB();else logging(_0xb016f6(0x1d3));}),_0x27bc31['on'](_0x210a4c(0xa8),_0x2cf123=>{const _0x13a472=_0x210a4c;if(validateAccess(_0x2cf123,_0x23d09b)['allow']){if(devices[_0x23d09b][_0x13a472(0x18d)])clearTimeout(devices[_0x23d09b][_0x13a472(0x18d)]);if(devices[_0x23d09b][_0x13a472(0xbc)])clearTimeout(devices[_0x23d09b][_0x13a472(0xbc)]);removeSocketListeners(getClient(_0x27bc31['id'])[_0x13a472(0x10f)]),addBlacklist(_0x23d09b),devices[_0x23d09b][_0x13a472(0x144)]=null,devices[_0x23d09b][_0x13a472(0x162)]=null,devices[_0x23d09b][_0x13a472(0x1d4)][_0x13a472(0x17a)]=null,io['to'](getClient(_0x27bc31['id'])['uuid'])[_0x13a472(0xf5)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x13a472(0x130));});}function initializeSocketBot(_0x263a17){const _0x43ceaf=_0x4e931c,_0x5d81c4=getClient(_0x263a17['id'])[_0x43ceaf(0x160)],_0xf3ecad=getClient(_0x263a17['id'])[_0x43ceaf(0x10f)];_0x263a17['on'](_0x43ceaf(0x155),(_0xa4267c,_0x5e0c3d)=>{const _0x44c888=_0x43ceaf;if(validateAccess(_0x5e0c3d,_0xf3ecad)[_0x44c888(0x1c8)]){if(pid[_0x5d81c4])pid[_0x5d81c4][_0x44c888(0x109)]({'function':_0x44c888(0x1b9),'args':_0xa4267c});}else logging(_0x44c888(0x122));}),_0x263a17['on'](_0x43ceaf(0x157),(_0x324ec3,_0xc6eb3b)=>{const _0x1ab4a2=_0x43ceaf;if(validateAccess(_0xc6eb3b,_0xf3ecad)[_0x1ab4a2(0x1c8)]){if(pid[_0x5d81c4])pid[_0x5d81c4][_0x1ab4a2(0x109)]({'function':_0x1ab4a2(0x120),'args':_0x324ec3});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x263a17['on'](_0x43ceaf(0x164),(_0x39c432,_0xd06e21)=>{const _0x1efd15=_0x43ceaf;if(validateAccess(_0xd06e21,_0xf3ecad)['allow']){if(pid[_0x5d81c4])pid[_0x5d81c4][_0x1efd15(0x109)]({'function':'storeConfiguration','args':_0x39c432});}else logging(_0x1efd15(0x17c));}),_0x263a17['on'](_0x43ceaf(0x141),(_0x25a30a,_0x3651a2)=>{const _0x3c7367=_0x43ceaf;if(validateAccess(_0x3651a2,_0xf3ecad)[_0x3c7367(0x1c8)]){if(pid[_0x5d81c4])pid[_0x5d81c4][_0x3c7367(0x109)]({'function':'storeHeadless','args':_0x25a30a});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x263a17['on'](_0x43ceaf(0xc1),_0x322089=>{const _0x129c02=_0x43ceaf;if(validateAccess(_0x322089,_0xf3ecad)[_0x129c02(0x1c8)]){if(pid[_0x5d81c4])pid[_0x5d81c4]['send']({'function':_0x129c02(0xa1),'args':null});}else logging(_0x129c02(0x16a));}),_0x263a17['on']('place-order',(_0x5b43ba,_0x5413e0)=>{const _0x5d120d=_0x43ceaf;if(validateAccess(_0x5413e0,_0xf3ecad)['allow']){if(pid[_0x5d81c4])pid[_0x5d81c4][_0x5d120d(0x109)]({'function':'placeOrder','args':_0x5b43ba});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x263a17['on'](_0x43ceaf(0xc9),_0x5768e6=>{const _0x705cfe=_0x43ceaf;if(validateAccess(_0x5768e6,_0xf3ecad)[_0x705cfe(0x1c8)]){if(pid[_0x5d81c4])pid[_0x5d81c4]['send']({'function':_0x705cfe(0xb6),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x263a17['on'](_0x43ceaf(0xa8),_0x3b6448=>{const _0x3d8f25=_0x43ceaf;if(validateAccess(_0x3b6448,_0xf3ecad)[_0x3d8f25(0x1c8)]){if(devices[_0xf3ecad]['pidRefreshToken'])clearTimeout(devices[_0xf3ecad][_0x3d8f25(0x18d)]);if(devices[_0xf3ecad][_0x3d8f25(0xbc)])clearTimeout(devices[_0xf3ecad][_0x3d8f25(0xbc)]);removeSocketListeners(getClient(_0x263a17['id'])[_0x3d8f25(0x10f)]),addBlacklist(_0xf3ecad),devices[_0xf3ecad]['telegramIpApproval']=null,devices[_0xf3ecad][_0x3d8f25(0x162)]=null,devices[_0xf3ecad]['access'][_0x3d8f25(0x17a)]=null,io['to'](getClient(_0x263a17['id'])[_0x3d8f25(0x10f)])[_0x3d8f25(0xf5)](_0x3d8f25(0x10a),{'access':{'allow':![],'reason':_0x3d8f25(0xd0),'token':null}});}else logging(_0x3d8f25(0x130));});}function removeSocketListeners(_0x1f0d64){const _0x38923b=_0x4e931c;getClientsWithUuid(_0x1f0d64)[_0x38923b(0x1aa)](_0x3381d4=>{getSocket(_0x3381d4['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4b8212=_0x4e931c;let _0x4304e9=settings;return settings[_0x4b8212(0x198)]&&settings[_0x4b8212(0x198)]!=''&&(_0x4304e9={..._0x4304e9,'telegramToken':_0x4b8212(0xad)}),settings[_0x4b8212(0x11c)]&&settings['bbPassword']!=''&&(_0x4304e9={..._0x4304e9,'bbPassword':_0x4b8212(0xad)}),_0x4304e9;}function updateBB(){const _0x2bcd4f=_0x4e931c;process[_0x2bcd4f(0x109)]({'update':!![]},_0x331cfa=>{});}function startBot(_0x1c0ebf,_0x4a11dd,_0x450bf1){const _0x177f57=_0x4e931c;let _0x51a2d7=![];const _0x3efa52=_0x1c0ebf[0x0];_0x4a11dd={..._0x4a11dd,'stdio':[_0x177f57(0x188),'inherit','inherit',_0x177f57(0x183)]},pid[_0x3efa52]=childProcess['fork'](botfile,_0x1c0ebf,_0x4a11dd),pid[_0x3efa52]['on']('message',_0x572abf=>{const _0x4f63b7=_0x177f57;switch(Object[_0x4f63b7(0xc5)](_0x572abf)[0x0]){case _0x4f63b7(0x163):updateBotName(_0x3efa52,_0x572abf[_0x4f63b7(0x163)]);break;case _0x4f63b7(0x10a):updateStatus(_0x3efa52,_0x572abf[_0x4f63b7(0x10a)]);break;case _0x4f63b7(0x1c1):updateLive(_0x3efa52,_0x572abf['live']);break;case _0x4f63b7(0xef):updateLive(_0x3efa52,_0x572abf[_0x4f63b7(0xef)]),io['to'](_0x3efa52)['emit']('status',{'access':{'allow':![],'reason':_0x4f63b7(0x191),'token':null}});break;case _0x4f63b7(0x1d1):_0x572abf[_0x4f63b7(0x1d1)]==_0x4f63b7(0x1b1)&&stopBot(_0x3efa52);_0x572abf[_0x4f63b7(0x1d1)]=='kill'&&toggleBot(_0x3efa52,'disabled',_0x4f63b7(0xff));break;case _0x4f63b7(0x158):sendTelegram(_0x3efa52,_0x572abf[_0x4f63b7(0x158)]);break;case'function':io['to'](_0x3efa52)[_0x4f63b7(0xf5)](_0x572abf[_0x4f63b7(0x1bb)],_0x572abf[_0x4f63b7(0xa3)]);break;}}),pid[_0x3efa52]['on'](_0x177f57(0x12b),function(_0xe95344){if(_0x51a2d7)return;_0x51a2d7=!![],_0x450bf1(_0xe95344);}),pid[_0x3efa52]['on'](_0x177f57(0xdd),function(_0x591e60){const _0x3546f9=_0x177f57;if(_0x51a2d7)return;_0x51a2d7=!![],_0x450bf1(null);const _0x565324=dbConfig[_0x3546f9(0x11f)](_0x3546f9(0xd5))[_0x3546f9(0x97)]({'botID':_0x3efa52})[_0x3546f9(0x170)]();_0x565324&&(_0x565324['status']=='enabled'||_0x565324[_0x3546f9(0x10a)]==_0x3546f9(0x169))&&(updateLive(_0x3efa52,_0x3546f9(0xff)),logging('restarting\x20Bot\x20'+_0x3efa52),startBot([_0x3efa52,userID],{'cwd':bbpath},function(_0x29f3e6){if(_0x29f3e6)logging(_0x29f3e6);}));});}function stopBot(_0x46391c){getClientsWithBotID(_0x46391c)['forEach'](_0x5162fb=>{const _0x469af5=_0x31e4;getSocket(_0x5162fb['id'])[_0x469af5(0xce)](!![]),removeClient(_0x5162fb['id']);});if(pid[_0x46391c])pid[_0x46391c]['kill']();}function addBot(){const _0x2efbaa=_0x4e931c;let _0xe192b8;for(let _0x4a0e7=0x1;_0x4a0e7<0x3e9;_0x4a0e7++){_0xe192b8=_0x4a0e7[_0x2efbaa(0xd4)]()[_0x2efbaa(0xf4)](0x3,'0');let _0x240cfd=config[_0x2efbaa(0x97)](_0x29c351=>_0x29c351[_0x2efbaa(0x1d2)]==_0xe192b8);if(!_0x240cfd)break;}if(_0xe192b8===_0x2efbaa(0x173)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0xe192b8),dbConfig[_0x2efbaa(0x11f)]('bots')['push']({'botID':_0xe192b8,'botname':'Bot\x20'+_0xe192b8,'status':_0x2efbaa(0x169),'live':''})[_0x2efbaa(0xa6)](),startBot([_0xe192b8,userID],{'cwd':bbpath},function(_0x33b73d){if(_0x33b73d)logging(_0x33b73d);}),config=getConfiguration(),io['to']('botmanager')[_0x2efbaa(0xf5)]('bots',config);}function deleteBot(_0x1a48a1){const _0x49443f=_0x4e931c;getClientsWithBotID(_0x1a48a1)[_0x49443f(0x1aa)](_0x4ce535=>{const _0x4a45ec=_0x49443f;getSocket(_0x4ce535['id'])[_0x4a45ec(0xce)](!![]),removeClient(_0x4ce535['id']);}),dbConfig[_0x49443f(0x11f)]('bots')[_0x49443f(0x18f)]({'botID':_0x1a48a1})[_0x49443f(0xa6)](),logging(_0x49443f(0xdf)+_0x1a48a1),stopBot(_0x1a48a1);try{fs[_0x49443f(0x126)](path['join'](configpath,_0x49443f(0x13a)+_0x1a48a1+_0x49443f(0x18c))),fs['unlinkSync'](path[_0x49443f(0x18e)](configpath,_0x49443f(0x13a)+_0x1a48a1+_0x49443f(0x1d8))),fs[_0x49443f(0x126)](path['join'](configpath,_0x49443f(0x13a)+_0x1a48a1+_0x49443f(0xb0))),fs[_0x49443f(0x126)](path[_0x49443f(0x18e)](configpath,_0x49443f(0x13a)+_0x1a48a1+_0x49443f(0xfc)));}catch(_0x442333){if(_0x442333)logging(_0x49443f(0x131),_0x442333);}config=getConfiguration(),io['to'](_0x49443f(0x180))['emit']('bots',config);}function toggleBot(_0x57d385,_0x11e37f,_0x234542){const _0x4e1a17=_0x4e931c;dbConfig[_0x4e1a17(0x11f)](_0x4e1a17(0xd5))[_0x4e1a17(0x97)]({'botID':_0x57d385})[_0x4e1a17(0x16d)]({'status':_0x11e37f})['assign']({'live':_0x234542})['write']();if(_0x11e37f=='enabled'||_0x11e37f==_0x4e1a17(0x169))logging('enabled\x20Bot\x20'+_0x57d385),startBot([_0x57d385,userID],{'cwd':bbpath},function(_0x44e141){if(_0x44e141)logging(_0x44e141);});else(_0x11e37f==_0x4e1a17(0x13f)||_0x11e37f=='new-disabled')&&(logging(_0x4e1a17(0x128)+_0x57d385),stopBot(_0x57d385));config=getConfiguration(),io['to'](_0x4e1a17(0x180))['emit'](_0x4e1a17(0xd5),config);}function toggleStatus(_0x465c4e){const _0x368398=_0x4e931c;let _0x70fae7=dbConfig[_0x368398(0x11f)](_0x368398(0xd5))[_0x368398(0x97)]({'botID':_0x465c4e})[_0x368398(0x170)](),_0x3d8207;if(_0x70fae7['status']===_0x368398(0x11b))_0x3d8207=_0x368398(0x13f);else{if(_0x70fae7['status']===_0x368398(0x169))_0x3d8207=_0x368398(0x124);else{if(_0x70fae7['status']==='new-disabled')_0x3d8207='new';else{if(_0x70fae7['status']==='disabled')_0x3d8207=_0x368398(0x11b);}}}return _0x3d8207;}function updateStatus(_0x13ee3b,_0x31e094){const _0x22cf38=_0x4e931c;dbConfig[_0x22cf38(0x11f)](_0x22cf38(0xd5))[_0x22cf38(0x97)]({'botID':_0x13ee3b})[_0x22cf38(0x16d)]({'status':_0x31e094})['write'](),config=getConfiguration(),io['to'](_0x22cf38(0x180))[_0x22cf38(0xf5)](_0x22cf38(0xd5),config);}function updateLive(_0x2c67fe,_0x14bf5e){const _0x41d7f9=_0x4e931c;dbConfig[_0x41d7f9(0x11f)](_0x41d7f9(0xd5))[_0x41d7f9(0x97)]({'botID':_0x2c67fe})[_0x41d7f9(0x16d)]({'live':_0x14bf5e})[_0x41d7f9(0xa6)](),config=getConfiguration(),io['to'](_0x41d7f9(0x180))[_0x41d7f9(0xf5)]('bots',config);}function updateBotName(_0x246b9c,_0x12c71c){const _0x1b4bd2=_0x4e931c;dbConfig[_0x1b4bd2(0x11f)](_0x1b4bd2(0xd5))[_0x1b4bd2(0x97)]({'botID':_0x246b9c})[_0x1b4bd2(0x16d)]({'botname':_0x12c71c})['write'](),config=getConfiguration(),io['to'](_0x1b4bd2(0x180))[_0x1b4bd2(0xf5)](_0x1b4bd2(0xd5),config);}function telegramError(_0x3ec9c3){const _0x3797a9=_0x4e931c;console[_0x3797a9(0x1c0)](getTimeStamp()+_0x3797a9(0x113));}function validateTelegram(_0xef5c21){const _0x43fcb8=_0x4e931c;if(_0xef5c21[_0x43fcb8(0x142)][_0x43fcb8(0x1c6)]!=settings[_0x43fcb8(0x174)]&&'@'+_0xef5c21[_0x43fcb8(0x142)][_0x43fcb8(0x1c6)]!=settings[_0x43fcb8(0x174)])return tgBot[_0x43fcb8(0x100)](_0xef5c21[_0x43fcb8(0x187)]['id'],_0x43fcb8(0x159),{'parse_mode':_0x43fcb8(0x1ba)})['catch'](_0x58d5d8=>{telegramError(_0x58d5d8);}),![];return!![];}function _0x5717(){const _0x3a8d73=['value','@analytics/google-analytics','Invalid\x20Telegram\x20token','1000','telegramUsername','sortBy','5785220isVXFr','use','No\x20authentication\x20token','lowdb','token','settings.','Unauthorized\x20attempt\x20to\x20store\x20configuration','whitelistEnabled','-----------------------------------------------------------------------------------','delete-bot','botmanager','expiry','defaults','ipc','node-telegram-bot-api','map','11983086DGkXXK','chat','inherit','bcryptjs','login\x20not\x20required','child_process','-config.json','pidRefreshToken','join','remove','timeshift','reload','5PWvhtq',',\x20must\x20be\x20a\x204\x20digit\x20number','catch','bbUsername','filter','2FA\x20login\x20required','telegramToken','invalid\x20credentials','push','includes','2FA','bb/','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','match','\x20minutes','Notifications\x20disabled\x0a','::ffff:127.0.0.1','Unauthorized\x20attempt\x20to\x20add\x20bot','404\x20Not\x20Found','telegramChatId','https://hodlerhacks.com','</b>\x20?','existsSync','3EFHIhP','forEach','parse','whitelist','callback_query','auth','Token\x20blacklisted','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','restart','connected','bb-config.json','523126KOpbzv','yes','temporary\x20access\x20not\x20allowed','reject','Ok,\x20will\x20send\x20alert\x20notifications\x20only','emitHistory','HTML','function','settings','/on\x20-\x20start\x20bot(s)\x0a','loginRequired','Unauthorized\x20attempt\x20to\x20update\x20bot','log','live','build','add-bot','success','accept','username','toIPv4MappedAddress','allow','readdirSync','\x20only\x0a','search','length','469QwWZDt','getHours','decrypt','clientip','stop','botID','Unauthorized\x20attempt\x20to\x20update\x20settings','access','Invalid\x20IP\x20address','127.0.0.1','/disable\x20-\x20disable\x20notifications\x0a','-events.json','removeListener','hashSync','sendFile','Notifications\x20types:\x20','getSeconds','randomFillSync','find','login\x20token\x20generated','conn','35576LzOHci','SIGINT','hex','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','createServer','login\x20required','reset-password','getStartingBalances','\x20>\x20','args','kind','message','write','getTime','logout','319bphyiR','hasOwnProperty','add','default','************','config/','idling\x20bot\x20\x20\x20|\x20Bot\x20','-performance.json','sign','showname','express','blacklist','isValid','cancelLoading','getUTCHours','connection','backup/','verify','3000','pidExpireLogin','temporary\x20token\x20generated','sha256','/:bot/history','2FA\x20login\x20token\x20generated','get-starting-balances','remoteAddress','login','data','keys','RSA-OAEP','clients','bb-secure.json','cancel-loading','headers','Login\x20accepted','toIPv4Address','ipaddr.js','disconnect','notification','logged\x20out','2FA\x20required','http','f2aRequired','toString','bots','Unauthorized\x20attempt\x20to\x20delete\x20bot','initclient','30\x20min','Notifications\x20enabled','copyFileSync','Alerts','crypto','exit','running','deleted\x20Bot\x20','set',':\x20Bot\x20Mgr\x20>\x20','<b>Balance\x20Bot\x20status:</b>\x0a','No\x20bots\x20running\x20right\x20now','privateKey','name','UA-192771731-1','referer','yargs/yargs','port','\x20|\x20','Bot\x20','analytics','Crypt','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','started','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','SIGTERM','static','/:bot/configuration','padStart','emit','alerts','temporaryAccessAllowed','2359064yACtFO','host','6TLaGWH','orders','-results.json','argv','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','stopped','sendMessage','secret','show','listen','/help\x20-\x20show\x20available\x20commands\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','page','Invalid\x20username\x20or\x20IP\x20address','Unauthorized\x20login\x20attempt\x20(timeout)','send','status','getDate','path','Balance\x20Bot\x20Server','randomBytes','uuid','All\x20bots','ipv6','hybrid-crypto-js',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','stopPolling','handshake','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','version.json','/:bot','env','then','enabled','bbPassword','getFullYear','slice','get','getPortfolio','bb-settings.json','Unauthorized\x20attempt\x20to\x20get\x20logs','Access\x20enabled\x20for\x20','new-disabled','timestamp','unlinkSync','reason','disabled\x20Bot\x20','<b>Telegram\x20bot\x20status:</b>\x0a','secure','error','event','/status\x20-\x20show\x20bot(s)\x20status\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','telegramEvents','Unauthorized\x20attempt\x20to\x20log\x20out','error\x20while\x20deleting\x20config\x20files:\x20','publicKey','login\x20token\x20valid','Ok,\x20will\x20send\x20order\x20notifications\x20only','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','type','telegramEnabled','Temporary\x20access\x20rejected','6196040EDzcRF','bot-','onText','Error:\x20Invalid\x20argument\x20','version','getMonth','disabled','Invalid\x20authentication\x20token\x20(1)','store-headless','from','once','telegramIpApproval','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','bot.js','763548IyoKWz','temporary\x20access\x20timeout','/:bot/support','cloneDeep','constructor','user','encryptedUuid','Orders','answerCallbackQuery','Login\x20rejected','build2','isIPv4MappedAddress','/:bot/portfolio','\x20/\x20','get-logs','/enable\x20-\x20enable\x20notifications\x0a','get-portfolio','telegram','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Bot\x20Mgr\x20>\x20','password','date-fns','exp','index.html','getMinutes','bot','starting\x20bot\x20|\x20Bot\x20','telegram2FaApproval','botname','store-configuration','(((.+)+)+)+$','User\x20has\x20been\x20validated','mkdirSync','15\x20min','new','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','All','Password\x20reset\x20rejected','assign','all','access\x20timeout'];_0x5717=function(){return _0x3a8d73;};return _0x5717();}async function initTelegram(){const _0x39da11=_0x4e931c;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x39da11(0x198)],{'polling':!![]});let _0x28eb94='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x28eb94+='\x0a',_0x28eb94+=_0x39da11(0x156),_0x28eb94+=_0x39da11(0x1d7),_0x28eb94+=_0x39da11(0x12e),_0x28eb94+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x28eb94+=_0x39da11(0x1bd),_0x28eb94+='/off\x20-\x20stop\x20bot(s)\x0a',_0x28eb94+=_0x39da11(0x12d),_0x28eb94+=_0x39da11(0x104);let _0x49831e=_0x39da11(0x1b0);_0x49831e+='\x0a',_0x49831e+=_0x28eb94,tgBot[_0x39da11(0x13b)](/\/start/,_0x4a0cc5=>{const _0x11ca03=_0x39da11;if(!validateTelegram(_0x4a0cc5))return;if(settings[_0x11ca03(0x1a5)]!=_0x4a0cc5['chat']['id'])updateSetting(_0x11ca03(0x1a5),_0x4a0cc5[_0x11ca03(0x187)]['id']);updateSetting(_0x11ca03(0x137),!![]),tgBot['sendMessage'](_0x4a0cc5[_0x11ca03(0x187)]['id'],_0x49831e)['catch'](_0x20eb71=>{telegramError(_0x20eb71);});}),tgBot['onText'](/\/enable/,_0x32b44d=>{const _0xa177be=_0x39da11;if(!validateTelegram(_0x32b44d))return;if(settings['telegramChatId']!=_0x32b44d['chat']['id'])updateSetting('telegramChatId',_0x32b44d[_0xa177be(0x187)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0xa177be(0x100)](_0x32b44d[_0xa177be(0x187)]['id'],_0xa177be(0xd9))[_0xa177be(0x194)](_0x2be39b=>{telegramError(_0x2be39b);});}),tgBot[_0x39da11(0x13b)](/\/config/,async _0x524419=>{const _0x28e61f=_0x39da11;if(!validateTelegram(_0x524419))return;tgBot[_0x28e61f(0x91)]('callback_query'),tgBot[_0x28e61f(0x100)](_0x524419['chat']['id'],_0x28e61f(0xfe),{'reply_markup':{'inline_keyboard':[[{'text':_0x28e61f(0x14e),'callback_data':_0x28e61f(0xfb)},{'text':_0x28e61f(0xdb),'callback_data':_0x28e61f(0xf6)},{'text':_0x28e61f(0x16b),'callback_data':'all'}]]}})['catch'](_0x30cc38=>{telegramError(_0x30cc38);}),tgBot['on'](_0x28e61f(0x1ad),async _0x5e888e=>{const _0x16f0c9=_0x28e61f,_0x20e604=_0x5e888e[_0x16f0c9(0xc4)],_0x37aa3b=_0x5e888e[_0x16f0c9(0xa5)];tgBot['answerCallbackQuery'](_0x5e888e['id'])[_0x16f0c9(0x11a)](async()=>{const _0x29d655=_0x16f0c9;_0x20e604==_0x29d655(0xfb)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x29d655(0x137),!![]),await tgBot[_0x29d655(0x100)](_0x37aa3b[_0x29d655(0x187)]['id'],_0x29d655(0x134))['catch'](_0x5ba289=>{telegramError(_0x5ba289);}));_0x20e604==_0x29d655(0xf6)&&(updateSetting('telegramEvents',_0x29d655(0xf6)),updateSetting(_0x29d655(0x137),!![]),await tgBot[_0x29d655(0x100)](_0x37aa3b['chat']['id'],_0x29d655(0x1b8))[_0x29d655(0x194)](_0x20db10=>{telegramError(_0x20db10);}));_0x20e604==_0x29d655(0x16e)&&(updateSetting(_0x29d655(0x12f),_0x29d655(0x16e)),updateSetting('telegramEnabled',!![]),await tgBot[_0x29d655(0x100)](_0x37aa3b['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x29d655(0x194)](_0x486a3e=>{telegramError(_0x486a3e);}));if(!settings['telegramChatId'])tgBot[_0x29d655(0x100)](_0x37aa3b[_0x29d655(0x187)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x17155b=>{telegramError(_0x17155b);});}),tgBot['removeListener'](_0x16f0c9(0x1ad));});}),tgBot[_0x39da11(0x13b)](/\/status/,_0x37a877=>{const _0x489cef=_0x39da11;if(!validateTelegram(_0x37a877))return;let _0x28d5e2=_0x489cef(0xe2);config[_0x489cef(0x1aa)](_0x1f174d=>{const _0x159856=_0x489cef;_0x28d5e2+=_0x159856(0xeb)+_0x1f174d[_0x159856(0x1d2)]+'\x20|\x20'+_0x1f174d[_0x159856(0x163)]+':\x20'+_0x1f174d[_0x159856(0x10a)]+_0x159856(0x154)+_0x1f174d[_0x159856(0x1c1)]+'\x0a';}),_0x28d5e2+='\x0a',_0x28d5e2+=_0x489cef(0x129),_0x28d5e2+=!settings[_0x489cef(0x137)]?_0x489cef(0x1a1):'Notifications\x20enabled\x0a',_0x28d5e2+=settings['telegramEnabled']?settings[_0x489cef(0x12f)]=='all'?_0x489cef(0xee):_0x489cef(0x94)+settings['telegramEvents']+_0x489cef(0x1ca):'',tgBot[_0x489cef(0x100)](_0x37a877[_0x489cef(0x187)]['id'],_0x28d5e2,{'parse_mode':_0x489cef(0x1ba)})[_0x489cef(0x194)](_0x4cd022=>{telegramError(_0x4cd022);});}),tgBot[_0x39da11(0x13b)](/\/restart/,_0x416382=>{const _0x812757=_0x39da11;if(!validateTelegram(_0x416382))return;tgBot[_0x812757(0x91)]('callback_query');const _0x15adc2=getEnabledBots();if(_0x15adc2[_0x812757(0x1cc)]==0x0)tgBot['sendMessage'](_0x416382['chat']['id'],_0x812757(0xe3))[_0x812757(0x194)](_0x5bce7e=>{telegramError(_0x5bce7e);});else{if(_0x15adc2[_0x812757(0x1cc)]>0x1)_0x15adc2[_0x812757(0x19a)]({'botID':'all'});let _0x14804d=[],_0x2f245d=[];const _0x4e001d=_0x15adc2['length']%0x4==0x0||_0x15adc2[_0x812757(0x1cc)]%0x4==0x3||_0x15adc2['length']%0x3==0x1?0x4:0x3;let _0x46f0e8=0x0;_0x15adc2[_0x812757(0x1aa)]((_0x3b17b0,_0x221659)=>{const _0x10daec=_0x812757;if(_0x221659%_0x4e001d==0x0)_0x2f245d=[];_0x2f245d[_0x10daec(0x19a)]({'text':_0x3b17b0[_0x10daec(0x1d2)]==_0x10daec(0x16e)?_0x10daec(0x110):'Bot\x20'+_0x3b17b0[_0x10daec(0x1d2)],'callback_data':_0x3b17b0['botID']}),_0x221659%_0x4e001d==0x0&&(_0x14804d[_0x46f0e8]=_0x2f245d,_0x46f0e8++);}),tgBot[_0x812757(0x100)](_0x416382['chat']['id'],_0x812757(0xf0),{'reply_markup':{'inline_keyboard':_0x14804d}})['catch'](_0x2c1ab7=>{telegramError(_0x2c1ab7);}),tgBot['on'](_0x812757(0x1ad),async _0x37cdb2=>{const _0x426f27=_0x812757,_0x34c60c=_0x37cdb2['data'],_0x42486f=_0x37cdb2[_0x426f27(0xa5)];tgBot[_0x426f27(0x14f)](_0x37cdb2['id'])[_0x426f27(0x11a)](async()=>{const _0x2ef05e=_0x426f27;if(_0x34c60c==_0x2ef05e(0x16e)){if(settings[_0x2ef05e(0x12f)]==_0x2ef05e(0xfb))tgBot[_0x2ef05e(0x100)](_0x42486f[_0x2ef05e(0x187)]['id'],_0x2ef05e(0x116))['catch'](_0x5b99fd=>{telegramError(_0x5b99fd);});config['forEach'](_0x2081e2=>{const _0x3fd7c2=_0x2ef05e;stopBot(_0x2081e2[_0x3fd7c2(0x1d2)]);});}else{if(settings[_0x2ef05e(0x12f)]==_0x2ef05e(0xfb))tgBot[_0x2ef05e(0x100)](_0x42486f[_0x2ef05e(0x187)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x34c60c)[_0x2ef05e(0x194)](_0x13206f=>{telegramError(_0x13206f);});stopBot(_0x34c60c);}}),tgBot[_0x426f27(0x91)](_0x426f27(0x1ad));});}}),tgBot[_0x39da11(0x13b)](/\/on/,_0x36960d=>{const _0x1972f8=_0x39da11;if(!validateTelegram(_0x36960d))return;tgBot[_0x1972f8(0x91)]('callback_query');const _0x46539e=getDisabledBots();if(_0x46539e['length']==0x0)tgBot[_0x1972f8(0x100)](_0x36960d[_0x1972f8(0x187)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x1972f8(0x194)](_0x257dc4=>{telegramError(_0x257dc4);});else{if(_0x46539e['length']>0x1)_0x46539e[_0x1972f8(0x19a)]({'botID':_0x1972f8(0x16e)});let _0x287f57=[],_0x1acd29=[];const _0x35f135=_0x46539e[_0x1972f8(0x1cc)]%0x4==0x0||_0x46539e['length']%0x4==0x3||_0x46539e[_0x1972f8(0x1cc)]%0x3==0x1?0x4:0x3;let _0x30fa6f=0x0;_0x46539e[_0x1972f8(0x1aa)]((_0x3fd17e,_0x2c4204)=>{const _0x232f50=_0x1972f8;if(_0x2c4204%_0x35f135==0x0)_0x1acd29=[];_0x1acd29['push']({'text':_0x3fd17e['botID']==_0x232f50(0x16e)?'All\x20bots':_0x232f50(0xeb)+_0x3fd17e['botID'],'callback_data':_0x3fd17e['botID']}),_0x2c4204%_0x35f135==0x0&&(_0x287f57[_0x30fa6f]=_0x1acd29,_0x30fa6f++);}),tgBot[_0x1972f8(0x100)](_0x36960d['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x287f57}})[_0x1972f8(0x194)](_0x453b68=>{telegramError(_0x453b68);}),tgBot['on'](_0x1972f8(0x1ad),async _0x29d078=>{const _0x124e8a=_0x1972f8,_0x409fed=_0x29d078[_0x124e8a(0xc4)],_0x27384a=_0x29d078[_0x124e8a(0xa5)];tgBot['answerCallbackQuery'](_0x29d078['id'])[_0x124e8a(0x11a)](async()=>{const _0x2b65cb=_0x124e8a;if(_0x409fed==_0x2b65cb(0x16e)){if(settings['telegramEvents']=='orders')tgBot[_0x2b65cb(0x100)](_0x27384a['chat']['id'],_0x2b65cb(0x9d))[_0x2b65cb(0x194)](_0x12e32b=>{telegramError(_0x12e32b);});_0x46539e['forEach'](_0x41ec9b=>{const _0x499fb4=_0x2b65cb;if(_0x41ec9b[_0x499fb4(0x1d2)]!=_0x499fb4(0x16e))toggleBot(_0x41ec9b[_0x499fb4(0x1d2)],toggleStatus(_0x41ec9b[_0x499fb4(0x1d2)]),_0x499fb4(0xff));});}else{if(settings[_0x2b65cb(0x12f)]==_0x2b65cb(0xfb))tgBot['sendMessage'](_0x27384a[_0x2b65cb(0x187)]['id'],_0x2b65cb(0x135)+_0x409fed)[_0x2b65cb(0x194)](_0x4320b3=>{telegramError(_0x4320b3);});toggleBot(_0x409fed,toggleStatus(_0x409fed),_0x2b65cb(0xff));}}),tgBot[_0x124e8a(0x91)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x2c4fd4=>{const _0x1d66bc=_0x39da11;if(!validateTelegram(_0x2c4fd4))return;tgBot[_0x1d66bc(0x91)](_0x1d66bc(0x1ad));const _0x5c07ae=getEnabledBots();if(_0x5c07ae[_0x1d66bc(0x1cc)]==0x0)tgBot[_0x1d66bc(0x100)](_0x2c4fd4['chat']['id'],_0x1d66bc(0xe3))[_0x1d66bc(0x194)](_0x21738a=>{telegramError(_0x21738a);});else{if(_0x5c07ae['length']>0x1)_0x5c07ae['push']({'botID':'all'});let _0x48be58=[],_0x241944=[];const _0x112bf1=_0x5c07ae[_0x1d66bc(0x1cc)]%0x4==0x0||_0x5c07ae[_0x1d66bc(0x1cc)]%0x4==0x3||_0x5c07ae['length']%0x3==0x1?0x4:0x3;let _0x3aea63=0x0;_0x5c07ae[_0x1d66bc(0x1aa)]((_0x939596,_0x149359)=>{const _0x4e2a1c=_0x1d66bc;if(_0x149359%_0x112bf1==0x0)_0x241944=[];_0x241944[_0x4e2a1c(0x19a)]({'text':_0x939596['botID']=='all'?'All\x20bots':_0x4e2a1c(0xeb)+_0x939596[_0x4e2a1c(0x1d2)],'callback_data':_0x939596[_0x4e2a1c(0x1d2)]}),_0x149359%_0x112bf1==0x0&&(_0x48be58[_0x3aea63]=_0x241944,_0x3aea63++);}),tgBot['sendMessage'](_0x2c4fd4[_0x1d66bc(0x187)]['id'],_0x1d66bc(0x105),{'reply_markup':{'inline_keyboard':_0x48be58}})[_0x1d66bc(0x194)](_0xd0b4a0=>{telegramError(_0xd0b4a0);}),tgBot['on'](_0x1d66bc(0x1ad),async _0x35b3f4=>{const _0x57865d=_0x1d66bc,_0x1600ad=_0x35b3f4[_0x57865d(0xc4)],_0x4b398b=_0x35b3f4[_0x57865d(0xa5)];tgBot[_0x57865d(0x14f)](_0x35b3f4['id'])['then'](async()=>{const _0x5176a1=_0x57865d;if(_0x1600ad=='all'){if(settings[_0x5176a1(0x12f)]==_0x5176a1(0xfb))tgBot[_0x5176a1(0x100)](_0x4b398b[_0x5176a1(0x187)]['id'],_0x5176a1(0x19e))[_0x5176a1(0x194)](_0x185ce4=>{telegramError(_0x185ce4);});_0x5c07ae[_0x5176a1(0x1aa)](_0x4bf877=>{const _0x24fd6f=_0x5176a1;if(_0x4bf877[_0x24fd6f(0x1d2)]!='all')toggleBot(_0x4bf877['botID'],toggleStatus(_0x4bf877[_0x24fd6f(0x1d2)]),_0x24fd6f(0xff));});}else{if(settings[_0x5176a1(0x12f)]==_0x5176a1(0xfb))tgBot['sendMessage'](_0x4b398b[_0x5176a1(0x187)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x1600ad)[_0x5176a1(0x194)](_0xf774fd=>{telegramError(_0xf774fd);});toggleBot(_0x1600ad,toggleStatus(_0x1600ad),_0x5176a1(0xff));}}),tgBot['removeListener'](_0x57865d(0x1ad));});}}),tgBot['onText'](/\/disable/,_0x335e8c=>{const _0x4b35ae=_0x39da11;if(!validateTelegram(_0x335e8c))return;tgBot[_0x4b35ae(0x100)](_0x335e8c[_0x4b35ae(0x187)]['id'],'Notifications\x20disabled')[_0x4b35ae(0x194)](_0x2d2dcd=>{telegramError(_0x2d2dcd);}),updateSetting(_0x4b35ae(0x137),![]);}),tgBot[_0x39da11(0x13b)](/\/help/,_0x42442b=>{const _0x371416=_0x39da11;if(!validateTelegram(_0x42442b))return;tgBot['sendMessage'](_0x42442b[_0x371416(0x187)]['id'],_0x28eb94)[_0x371416(0x194)](_0x360e4c=>{telegramError(_0x360e4c);});}),tgBot['on']('polling_error',_0x362e69=>{const _0x2a7710=_0x39da11;_0x362e69[_0x2a7710(0xd4)]()[_0x2a7710(0x19b)](_0x2a7710(0x1a4))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x2a7710(0x180))[_0x2a7710(0xf5)](_0x2a7710(0xcf),_0x2a7710(0x172)));}),process[_0x39da11(0x143)](_0x39da11(0x9b),()=>{const _0x49dfec=_0x39da11;if(tgBot)tgBot['stopPolling']();process[_0x49dfec(0xdd)](0x1);}),process[_0x39da11(0x143)](_0x39da11(0xf1),()=>{const _0xa08370=_0x39da11;if(tgBot)tgBot[_0xa08370(0x114)]();process['exit'](0x1);});}}function disableTelegram(){const _0x5ad54b=_0x4e931c;tgBot&&(tgBot[_0x5ad54b(0x114)](),tgBot=null);}function sendTelegram(_0x5cf5e1,_0x1e8747){const _0xf4cb6e=_0x4e931c;if(settings['telegramEnabled']){if(settings[_0xf4cb6e(0x12f)]=='all'||(_0x1e8747[_0xf4cb6e(0x136)]=='error'||_0x1e8747[_0xf4cb6e(0x136)]=='success')&&settings[_0xf4cb6e(0x12f)]==_0xf4cb6e(0xf6)||_0x1e8747[_0xf4cb6e(0x136)]=='order'&&settings[_0xf4cb6e(0x12f)]==_0xf4cb6e(0xfb)){if(tgBot&&settings[_0xf4cb6e(0x1a5)]){if(_0x1e8747[_0xf4cb6e(0xb2)])tgBot['sendMessage'](settings['telegramChatId'],_0x1e8747[_0xf4cb6e(0x163)]+_0xf4cb6e(0xa2)+_0x1e8747[_0xf4cb6e(0x12c)])[_0xf4cb6e(0x194)](_0x530c4a=>{telegramError(_0x530c4a);});else tgBot['sendMessage'](settings[_0xf4cb6e(0x1a5)],_0xf4cb6e(0xeb)+_0x5cf5e1+_0xf4cb6e(0xa2)+_0x1e8747[_0xf4cb6e(0x12c)])[_0xf4cb6e(0x194)](_0x4de67b=>{telegramError(_0x4de67b);});}}}}function getDeviceWithIp(_0x3589f6){return devices['find'](_0x3b694c=>_0x3b694c['ip']===_0x3589f6);}function temporaryAccess2FA(_0x141279,_0x520d79){const _0x25255c=_0x4e931c;let _0x105dfd=new Date(),_0x2024c0=![];if(lastIpApproval){if(_0x105dfd-lastIpApproval<0x1388)_0x2024c0=!![];}lastIpApproval=new Date();if(_0x2024c0)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x25255c(0x91)]('callback_query'),tgBot[_0x25255c(0x100)](settings[_0x25255c(0x1a5)],_0x25255c(0x145)+normalizeIP(_0x520d79)[_0x25255c(0x102)]+_0x25255c(0x1a7),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x25255c(0x168),'callback_data':'15'},{'text':_0x25255c(0xd8),'callback_data':'30'},{'text':_0x25255c(0x1b7),'callback_data':_0x25255c(0x1b7)}]]}})[_0x25255c(0x194)](_0x4ee8bd=>{telegramError(_0x4ee8bd);}),tgBot['on'](_0x25255c(0x1ad),async _0x4ddbe6=>{const _0x20ab6a=_0x25255c,_0x47c980=_0x4ddbe6['data'],_0x95bf35=_0x4ddbe6[_0x20ab6a(0xa5)];tgBot[_0x20ab6a(0x14f)](_0x4ddbe6['id'])[_0x20ab6a(0x11a)](async()=>{const _0x4a9264=_0x20ab6a;devices[_0x141279][_0x4a9264(0x144)]={'clientip':_0x520d79,'timestamp':new Date()[_0x4a9264(0xa7)](),'expiry':_0x47c980},_0x47c980!=_0x4a9264(0x1b7)?(await tgBot[_0x4a9264(0x100)](_0x95bf35[_0x4a9264(0x187)]['id'],_0x4a9264(0x123)+_0x47c980+_0x4a9264(0x1a0),{'parse_mode':_0x4a9264(0x1ba)})[_0x4a9264(0x194)](_0x31fd27=>{telegramError(_0x31fd27);}),io['to'](_0x141279)[_0x4a9264(0xf5)](_0x4a9264(0x10a),{'access':{'allow':![],'reason':_0x4a9264(0x191),'token':null}})):(await tgBot[_0x4a9264(0x100)](_0x95bf35['chat']['id'],_0x4a9264(0x138))[_0x4a9264(0x194)](_0x2ca185=>{telegramError(_0x2ca185);}),io['to'](_0x141279)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x20ab6a(0x91)](_0x20ab6a(0x1ad));}));}function loginAccess2FA(_0xb86925,_0x381b12){const _0x169b91=_0x4e931c;tgBot&&settings[_0x169b91(0x1a5)]&&(tgBot[_0x169b91(0x91)]('callback_query'),tgBot[_0x169b91(0x100)](settings[_0x169b91(0x1a5)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x381b12)[_0x169b91(0x102)]+_0x169b91(0x1a7),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x169b91(0x1c5),'callback_data':loginExpiry},{'text':_0x169b91(0x1b7),'callback_data':_0x169b91(0x1b7)}]]}})['catch'](_0x33b697=>{telegramError(_0x33b697);}),tgBot['on']('callback_query',async _0x2b7da8=>{const _0x758fd2=_0x169b91,_0x1c0fce=_0x2b7da8['data'],_0xcf9dea=_0x2b7da8[_0x758fd2(0xa5)];tgBot['answerCallbackQuery'](_0x2b7da8['id'])[_0x758fd2(0x11a)](async()=>{const _0x10fedd=_0x758fd2;devices[_0xb86925][_0x10fedd(0x162)]={'clientip':_0x381b12,'timestamp':new Date()[_0x10fedd(0xa7)](),'expiry':_0x1c0fce},_0x1c0fce!='reject'?(await tgBot['sendMessage'](_0xcf9dea[_0x10fedd(0x187)]['id'],_0x10fedd(0xcb),{'parse_mode':'HTML'})['catch'](_0x39accd=>{telegramError(_0x39accd);}),io['to'](_0xb86925)[_0x10fedd(0xf5)]('status',{'access':{'allow':![],'reason':_0x10fedd(0x191),'token':null}})):(await tgBot['sendMessage'](_0xcf9dea[_0x10fedd(0x187)]['id'],_0x10fedd(0x150))[_0x10fedd(0x194)](_0xaf5177=>{telegramError(_0xaf5177);}),io['to'](_0xb86925)['emit'](_0x10fedd(0x10a),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x758fd2(0x1ad));}));}function getConfiguration(){const _0x4f13fc=_0x4e931c;return dbConfig[_0x4f13fc(0x11f)](_0x4f13fc(0xd5))[_0x4f13fc(0x175)](_0x4f13fc(0x1d2))['value']()||[];}function getEnabledBots(){const _0x4b68ba=_0x4e931c;return dbConfig[_0x4b68ba(0x11f)](_0x4b68ba(0xd5))[_0x4b68ba(0x175)](_0x4b68ba(0x1d2))[_0x4b68ba(0x196)]({'status':_0x4b68ba(0x11b)})[_0x4b68ba(0x170)]()||[];}function getDisabledBots(){const _0x595a7d=_0x4e931c;return dbConfig['get']('bots')[_0x595a7d(0x175)]('botID')[_0x595a7d(0x196)]({'status':'disabled'})[_0x595a7d(0x170)]()||[];}function getSettings(){const _0xcc057=_0x4e931c;return dbSettings[_0xcc057(0x11f)](_0xcc057(0x1bc))[_0xcc057(0x170)]()||{'timeshift':0x0};}function getSecure(){const _0x58fe18=_0x4e931c;return dbSecure[_0x58fe18(0x11f)](_0x58fe18(0x12a))[_0x58fe18(0x170)]()||{};}function getBlacklist(){const _0x3a7a29=_0x4e931c;return dbSecure[_0x3a7a29(0x11f)](_0x3a7a29(0xb4))[_0x3a7a29(0x170)]()||[];}function broadcastToBots(_0x82a7d4,_0x404f8c){config['forEach'](_0x4c7fb9=>{const _0x4f8921=_0x31e4;if(_0x4c7fb9[_0x4f8921(0x10a)]==_0x4f8921(0x11b)&&_0x4c7fb9[_0x4f8921(0x1c1)]==_0x4f8921(0xde)){if(pid[_0x4c7fb9['botID']])pid[_0x4c7fb9[_0x4f8921(0x1d2)]][_0x4f8921(0x109)]({[_0x82a7d4]:_0x404f8c});}});}function storeSettings(_0x2a8a58,_0x2a30d7=![]){const _0x338002=_0x4e931c;_0x2a8a58={...settings,..._0x2a8a58};if(_0x2a30d7&&_0x2a8a58[_0x338002(0x11c)]!=_0x338002(0xad)&&_0x2a8a58['bbPassword']!=''){const _0x40158a=crypt['decrypt'](secure[_0x338002(0xe4)],_0x2a8a58[_0x338002(0x11c)])['message']['split']('@')[0x0],_0x4c293d=bcrypt['hashSync'](_0x40158a,saltRounds);_0x2a8a58={..._0x2a8a58,'bbPassword':_0x4c293d};}if(_0x2a30d7&&_0x2a8a58[_0x338002(0x198)]!=_0x338002(0xad)&&_0x2a8a58['telegramToken']!=''){const _0x5130d5=crypt[_0x338002(0x1cf)](secure[_0x338002(0xe4)],_0x2a8a58[_0x338002(0x198)])[_0x338002(0xa5)]['split']('@')[0x0];_0x2a8a58={..._0x2a8a58,'telegramToken':_0x5130d5};}const _0x287859=_0x2a8a58['telegramToken']!=_0x338002(0xad)&&_0x2a8a58[_0x338002(0x198)]!=settings['telegramToken']||_0x2a8a58[_0x338002(0x174)]!=settings[_0x338002(0x174)],_0x5e9283=_0x2a8a58[_0x338002(0x198)]==''||_0x2a8a58[_0x338002(0x174)]=='';if(_0x287859)_0x2a8a58[_0x338002(0x12f)]=_0x338002(0x16e);for(const [_0x6e5e97,_0x3e215a]of Object['entries'](_0x2a8a58)){if(_0x6e5e97==_0x338002(0x198)&&_0x3e215a==_0x338002(0xad)){_0x2a8a58['telegramToken']=settings['telegramToken'];continue;};if(_0x6e5e97==_0x338002(0x11c)&&_0x3e215a==_0x338002(0xad)){_0x2a8a58[_0x338002(0x11c)]=settings[_0x338002(0x11c)];continue;};dbSettings[_0x338002(0xe0)](_0x338002(0x17b)+_0x6e5e97,_0x3e215a)['write']();}settings=_0x2a8a58,io['to'](_0x338002(0x180))[_0x338002(0xf5)]('settings',cleanSettings()),broadcastToBots(_0x338002(0x190),settings[_0x338002(0x190)]);if(_0x287859&&!_0x5e9283)initTelegram();if(_0x287859&&_0x5e9283)disableTelegram();getAllClients()[_0x338002(0x1aa)](_0x524cba=>{const _0x16fe0a=_0x338002;getSocket(_0x524cba['id'])['emit'](_0x16fe0a(0x10a),{'access':{'allow':![],'reason':_0x16fe0a(0x191),'token':null}});});}function updateSetting(_0x1f5fe3,_0x5ff092){const _0x5947d3=_0x4e931c;dbSettings[_0x5947d3(0xe0)](_0x5947d3(0x17b)+_0x1f5fe3,_0x5ff092)[_0x5947d3(0xa6)](),settings=getSettings(),io['to'](_0x5947d3(0x180))[_0x5947d3(0xf5)]('settings',cleanSettings());}function storeSecure(_0x1b2af4){const _0x2da6ef=_0x4e931c;dbSecure[_0x2da6ef(0x11f)](_0x2da6ef(0x12a))[_0x2da6ef(0x19a)](_0x1b2af4)[_0x2da6ef(0xa6)](),secure=_0x1b2af4;}function addBlacklist(_0x5ad508){const _0x18958b=_0x4e931c;cleanBlacklist();let _0x5d01a4;devices[_0x5ad508][_0x18958b(0x144)]?_0x5d01a4=Math['max'](devices[_0x5ad508][_0x18958b(0x144)]['expiry'],loginExpiry):_0x5d01a4=loginExpiry,dbSecure[_0x18958b(0x11f)](_0x18958b(0xb4))[_0x18958b(0x19a)]({'expiry':new Date()[_0x18958b(0xa7)]()+_0x5d01a4*0x3c*0x3e8,'token':devices[_0x5ad508][_0x18958b(0x1d4)][_0x18958b(0x17a)]})[_0x18958b(0xa6)](),blacklist=dbSecure[_0x18958b(0x11f)](_0x18958b(0xb4))[_0x18958b(0x170)]();}function cleanBlacklist(){const _0x2126bf=_0x4e931c;let _0x468649=dbSecure[_0x2126bf(0x11f)](_0x2126bf(0xb4))[_0x2126bf(0x14a)]()[_0x2126bf(0x170)](),_0xf13e77=new Date()[_0x2126bf(0xa7)]();_0x468649[_0x2126bf(0x1aa)](_0x1f6f9a=>{const _0x18e942=_0x2126bf;_0x1f6f9a[_0x18e942(0x181)]<_0xf13e77&&dbSecure[_0x18e942(0x11f)]('blacklist')[_0x18e942(0x18f)]({'expiry':_0x1f6f9a[_0x18e942(0x181)]})[_0x18e942(0xa6)]();});}function initStates(){const _0x49faf5=_0x4e931c;let _0x250b10=getConfiguration();_0x250b10[_0x49faf5(0x1aa)](_0x112bf4=>{const _0x5074a4=_0x49faf5;_0x112bf4['live']=_0x5074a4(0xff);}),storeConfiguration(_0x250b10);}function onKeys(){const _0x5e8ae5=new RSA();return new Promise(_0x5b832b=>{_0x5e8ae5['generateKeyPairAsync']()['then'](_0x3c402f=>{_0x5b832b(_0x3c402f);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x40c7fe=_0x4e931c;let _0x4c392=getConfiguration(),_0x2886f8=![];_0x4c392[_0x40c7fe(0x1aa)](_0x4162c2=>{const _0x22fac1=_0x40c7fe;if(_0x4162c2[_0x22fac1(0x10a)]==_0x22fac1(0xde))_0x4162c2[_0x22fac1(0x10a)]=_0x22fac1(0x11b),_0x2886f8=!![];else _0x4162c2[_0x22fac1(0x10a)]==_0x22fac1(0xff)&&(_0x4162c2[_0x22fac1(0x10a)]=_0x22fac1(0x13f),_0x2886f8=!![]);});if(_0x2886f8)storeConfiguration(_0x4c392);let _0x4464e6=getSecure();if(!_0x4464e6[_0x40c7fe(0xaa)](_0x40c7fe(0x101))){let _0x27f90f=await generateKeys();_0x4464e6[_0x40c7fe(0x132)]=_0x27f90f['publicKey'],_0x4464e6[_0x40c7fe(0xe4)]=_0x27f90f['privateKey'],_0x4464e6['secret']=crypto[_0x40c7fe(0x10e)](0x20)[_0x40c7fe(0xd4)](_0x40c7fe(0x9c));;storeSecure(_0x4464e6);}let _0x4eb238=getSettings();_0x2886f8=![];!_0x4eb238['hasOwnProperty'](_0x40c7fe(0x1be))&&(_0x4eb238[_0x40c7fe(0x1be)]=![],_0x4eb238['bbUsername']='',_0x4eb238[_0x40c7fe(0x11c)]='',_0x4eb238[_0x40c7fe(0xd3)]=![],_0x2886f8=!![]);!_0x4eb238['hasOwnProperty'](_0x40c7fe(0x17d))&&(_0x4eb238[_0x40c7fe(0x17d)]=![],_0x4eb238[_0x40c7fe(0x1ac)]=[],_0x4eb238[_0x40c7fe(0xf7)]=![],_0x2886f8=!![]);if(!_0x4eb238[_0x40c7fe(0xaa)](_0x40c7fe(0x137))){if(_0x4eb238[_0x40c7fe(0x1a5)])_0x4eb238['telegramEnabled']=!![];else _0x4eb238[_0x40c7fe(0x137)]=![];_0x2886f8=!![];}if(_0x2886f8)storeSettings(_0x4eb238);}function storeConfiguration(_0x464bbf){const _0x22a8b0=_0x4e931c;dbConfig[_0x22a8b0(0x11f)](_0x22a8b0(0xd5))[_0x22a8b0(0x18f)]()[_0x22a8b0(0xa6)](),dbConfig[_0x22a8b0(0x11f)](_0x22a8b0(0xd5))[_0x22a8b0(0x19a)](..._0x464bbf)['write'](),config=_0x464bbf;}function _0x31e4(_0x3877a8,_0x33b570){const _0x3dee6e=_0x5717();return _0x31e4=function(_0x147470,_0x517b17){_0x147470=_0x147470-0x91;let _0x571710=_0x3dee6e[_0x147470];return _0x571710;},_0x31e4(_0x3877a8,_0x33b570);}function resetPassword(){const _0x2c5a68=_0x4e931c;tgBot&&settings[_0x2c5a68(0x1a5)]&&(tgBot[_0x2c5a68(0x91)](_0x2c5a68(0x1ad)),tgBot[_0x2c5a68(0x100)](settings[_0x2c5a68(0x1a5)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2c5a68(0x1b5),'callback_data':_0x2c5a68(0x1b5)},{'text':'no','callback_data':'no'}]]}})[_0x2c5a68(0x194)](_0x512739=>{telegramError(_0x512739);}),tgBot['on'](_0x2c5a68(0x1ad),async _0x2280fd=>{const _0x1c6de2=_0x2c5a68,_0x2da17e=_0x2280fd[_0x1c6de2(0xc4)],_0x12861c=_0x2280fd[_0x1c6de2(0xa5)];tgBot[_0x1c6de2(0x14f)](_0x2280fd['id'])[_0x1c6de2(0x11a)](async()=>{const _0x38146c=_0x1c6de2;if(_0x2da17e!='no'){const _0x12e0f3=0xf,_0x240304='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x30a58c=Array[_0x38146c(0x142)](crypto[_0x38146c(0x96)](new Uint32Array(_0x12e0f3)))[_0x38146c(0x185)](_0x45430d=>_0x240304[_0x45430d%_0x240304['length']])[_0x38146c(0x18e)](''),_0x5d54aa=bcrypt[_0x38146c(0x92)](_0x30a58c,saltRounds);storeSettings({'bbPassword':_0x5d54aa}),await tgBot['sendMessage'](_0x12861c[_0x38146c(0x187)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x30a58c,{'parse_mode':_0x38146c(0x1ba)})['catch'](_0xbf39f8=>{telegramError(_0xbf39f8);});}else await tgBot[_0x38146c(0x100)](_0x12861c['chat']['id'],_0x38146c(0x16c))[_0x38146c(0x194)](_0xcaaad4=>{telegramError(_0xcaaad4);});}),tgBot['removeListener'](_0x1c6de2(0x1ad));}));}function logging(_0x3b62cb){const _0x16b835=_0x4e931c;console[_0x16b835(0x1c0)](getTimeStamp()+_0x16b835(0xe1)+_0x3b62cb);if(tgBot&&settings[_0x16b835(0x1a5)]&&settings[_0x16b835(0x12f)]!=_0x16b835(0xfb))tgBot[_0x16b835(0x100)](settings['telegramChatId'],_0x16b835(0x15a)+_0x3b62cb)[_0x16b835(0x194)](_0x1bb001=>{telegramError(_0x1bb001);});}function getServerTime(){const _0x233ae5=_0x4e931c,_0x96123=new Date();return _0x96123[_0x233ae5(0x11d)]()+'/'+(_0x96123['getMonth']()+0x1)['toString']()[_0x233ae5(0xf4)](0x2,'0')+'/'+_0x96123[_0x233ae5(0x10b)]()[_0x233ae5(0xd4)]()['padStart'](0x2,'0')+'\x20'+_0x96123[_0x233ae5(0x1ce)]()[_0x233ae5(0xd4)]()[_0x233ae5(0xf4)](0x2,'0')+':'+_0x96123[_0x233ae5(0x15f)]()[_0x233ae5(0xd4)]()[_0x233ae5(0xf4)](0x2,'0')+':'+_0x96123['getSeconds']()[_0x233ae5(0xd4)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x59278e=_0x4e931c,_0xeeba55=shiftedTime();return _0xeeba55['getFullYear']()+'/'+(_0xeeba55[_0x59278e(0x13e)]()+0x1)[_0x59278e(0xd4)]()['padStart'](0x2,'0')+'/'+_0xeeba55[_0x59278e(0x10b)]()['toString']()[_0x59278e(0xf4)](0x2,'0')+'\x20'+_0xeeba55[_0x59278e(0x1ce)]()[_0x59278e(0xd4)]()[_0x59278e(0xf4)](0x2,'0')+':'+_0xeeba55['getMinutes']()[_0x59278e(0xd4)]()['padStart'](0x2,'0')+':'+_0xeeba55[_0x59278e(0x95)]()[_0x59278e(0xd4)]()[_0x59278e(0xf4)](0x2,'0');}function shiftedTime(){const _0x49a227=_0x4e931c,_0x19e70c=new Date();let _0x1245c0=_0x19e70c;if(settings[_0x49a227(0x190)]&&settings[_0x49a227(0x190)]!==0x0)_0x1245c0=fns[_0x49a227(0xab)](_0x19e70c,{'hours':settings[_0x49a227(0x190)]});return _0x1245c0;}function startScheduler(){const _0x25ab4d=_0x4e931c;let _0x1d5ad3=new Date()[_0x25ab4d(0xb7)]();_0x1d5ad3==0x1&&backupConfigFiles();_0x1d5ad3==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3ca367=_0x4e931c;fs[_0x3ca367(0x1c9)](configpath,{'withFileTypes':!![]})[_0x3ca367(0x1aa)](_0x272cd0=>{const _0xbe7351=_0x3ca367;if(!_0x272cd0['isDirectory']())fs[_0xbe7351(0xda)](configpath+_0x272cd0[_0xbe7351(0xe5)],configbackuppath+_0x272cd0[_0xbe7351(0xe5)]);});}function triggerAnalytics(){const _0x5bcb04=_0x4e931c;analytics[_0x5bcb04(0x106)]({'title':_0x5bcb04(0x10d),'href':_0x5bcb04(0x1a6),'path':'/v'+serverversion});}function validateCredentials(_0x2f7299,_0x288ae9){const _0x3625cd=_0x4e931c;if(_0x2f7299[_0x3625cd(0x1c6)]==settings[_0x3625cd(0x195)]&&bcrypt['compareSync'](_0x2f7299['password'],settings[_0x3625cd(0x11c)])){if(settings[_0x3625cd(0xd3)])return{'allow':![],'reason':_0x3625cd(0x197),'token':null};else{const _0x28a866=generateLoginToken(_0x288ae9);return{'allow':!![],'reason':_0x3625cd(0x98),'token':_0x28a866};}}else return{'allow':![],'reason':_0x3625cd(0x199),'token':null};}function refreshToken(_0x411539){const _0x241377=_0x4e931c,_0x27064f=generateLoginToken(_0x411539);return{'allow':!![],'reason':_0x241377(0x98),'token':_0x27064f};}function validateAccess(_0x1f89a8,_0x53a11c){const _0x437a65=_0x4e931c;let _0x1b21a9=devices[_0x53a11c]['ip'],_0x1a8415;const _0x57a2d4=_0x2b199a=>{const _0x31405a=_0x31e4;if(settings[_0x31405a(0x1be)]){if(settings[_0x31405a(0xd3)]){if(telegram2FaApproved(_0x53a11c)){const _0x185787=generateLoginToken(_0x53a11c);return{'allow':!![],'reason':_0x31405a(0xc0),'token':_0x185787};}else return{'allow':![],'reason':_0x31405a(0x9f),'token':null};}else return _0x1a8415=validToken(_0x2b199a,_0x53a11c),_0x1a8415['hasOwnProperty'](_0x31405a(0x1c4))?{'allow':!![],'reason':_0x31405a(0x133),'token':_0x2b199a}:{'allow':![],'reason':_0x31405a(0x9f),'token':null};}else return{'allow':!![],'reason':_0x31405a(0x18a),'token':null};};if(settings['whitelistEnabled']){let _0x35fdc2=[...settings[_0x437a65(0x1ac)],'::1',_0x437a65(0x1a2),_0x437a65(0x1d6)];if(_0x35fdc2[_0x437a65(0x19b)](_0x1b21a9))return _0x57a2d4(_0x1f89a8);else{_0x1a8415=validToken(_0x1f89a8,_0x53a11c);if(_0x1a8415[_0x437a65(0xaa)](_0x437a65(0x1c4)))return _0x57a2d4(_0x1f89a8);else{if(telegramIpApproved(_0x53a11c)){const _0x4f62c5=generateToken(_0x53a11c);return _0x1a8415=_0x57a2d4(_0x1f89a8),_0x1a8415[_0x437a65(0x1c8)]?{'allow':!![],'reason':_0x437a65(0xbd),'token':_0x4f62c5}:_0x1a8415;}else return settings[_0x437a65(0xf7)]?{'allow':![],'reason':_0x437a65(0xd1),'token':null}:{'allow':![],'reason':_0x437a65(0x1b6),'token':null};}}}else return _0x57a2d4(_0x1f89a8);}function timelyDecrypt(_0x40a5dd,_0x2f40a0=!![]){const _0x5d1da9=_0x4e931c;if(_0x40a5dd)try{const _0x2b850a=crypt['decrypt'](secure[_0x5d1da9(0xe4)],_0x40a5dd)[_0x5d1da9(0xa5)],_0x57ef62=_0x2b850a['split']('@')[0x0],_0x50e2a5=_0x2b850a['split']('@')[0x1],_0x4519e3=new Date()[_0x5d1da9(0xa7)]();if(_0x2f40a0){if(_0x4519e3-_0x50e2a5<maxSecretAge*0x3e8)return _0x57ef62;else return![];}else return _0x57ef62;}catch(_0x80f793){return![];}else return![];}const validToken=(_0x2dc555,_0x598e92)=>{const _0x24fb9f=_0x4e931c,_0x4abca0=devices[_0x598e92]['ip'];if(!_0x2dc555)return{'error':_0x24fb9f(0x178)};for(let _0x5211a8 of blacklist){if(_0x5211a8[_0x24fb9f(0x17a)]==_0x2dc555)return{'error':_0x24fb9f(0x1af)};}let _0x613263;try{_0x613263=jwt[_0x24fb9f(0xba)](_0x2dc555,secure[_0x24fb9f(0x101)]+_0x598e92);}catch{return{'error':_0x24fb9f(0x140)};}if(!_0x613263[_0x24fb9f(0xaa)](_0x24fb9f(0x1d0))&&!_0x613263['hasOwnProperty'](_0x24fb9f(0x1c6))||!_0x613263[_0x24fb9f(0xaa)](_0x24fb9f(0x15d)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x613263[_0x24fb9f(0xaa)]('username')&&_0x613263[_0x24fb9f(0xaa)]('clientip')){const {clientip:_0x13fe2e}=_0x613263;return _0x4abca0==_0x13fe2e?{'success':_0x24fb9f(0x166)}:{'error':_0x24fb9f(0x1d5)};}else{if(_0x613263[_0x24fb9f(0xaa)]('username')&&_0x613263['hasOwnProperty'](_0x24fb9f(0x1d0))){const {username:_0x2aaa54,clientip:_0x44b18c}=_0x613263;return settings[_0x24fb9f(0x195)]==_0x2aaa54&&_0x4abca0==_0x44b18c?{'success':_0x24fb9f(0x166)}:{'error':_0x24fb9f(0x107)};}}},generateLoginToken=_0x33d36a=>{const _0x5ba122=_0x4e931c;if(_0x33d36a){const _0x326452=devices[_0x33d36a]['ip'];return jwt[_0x5ba122(0xb1)]({'username':settings[_0x5ba122(0x195)],'clientip':_0x326452},secure[_0x5ba122(0x101)]+_0x33d36a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3700b2=>{const _0x46b90b=_0x4e931c;if(_0x3700b2){const _0x1225ea=devices[_0x3700b2]['ip'];return jwt['sign']({'clientip':_0x1225ea},secure[_0x46b90b(0x101)]+_0x3700b2,{'expiresIn':devices[_0x3700b2][_0x46b90b(0x144)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x2c3fa8=>{const _0x467b84=_0x4e931c;let _0x23a2c0=![];return devices[_0x2c3fa8][_0x467b84(0x144)]&&devices[_0x2c3fa8][_0x467b84(0x144)][_0x467b84(0x181)]!='reject'&&(_0x23a2c0=devices[_0x2c3fa8][_0x467b84(0x144)][_0x467b84(0x1d0)]==devices[_0x2c3fa8]['ip']&&new Date()[_0x467b84(0xa7)]()-devices[_0x2c3fa8][_0x467b84(0x144)][_0x467b84(0x125)]<devices[_0x2c3fa8][_0x467b84(0x144)][_0x467b84(0x181)]*0x3c*0x3e8),_0x23a2c0;},telegram2FaApproved=_0x2c9d34=>{const _0x3bcf69=_0x4e931c;let _0x31032c=![];return devices[_0x2c9d34][_0x3bcf69(0x162)]&&devices[_0x2c9d34][_0x3bcf69(0x162)][_0x3bcf69(0x181)]!='reject'&&(_0x31032c=devices[_0x2c9d34][_0x3bcf69(0x162)][_0x3bcf69(0x1d0)]==devices[_0x2c9d34]['ip']&&new Date()[_0x3bcf69(0xa7)]()-devices[_0x2c9d34][_0x3bcf69(0x162)][_0x3bcf69(0x125)]<devices[_0x2c9d34]['telegram2FaApproval'][_0x3bcf69(0x181)]*0x3c*0x3e8),_0x31032c;},normalizeIP=_0x569714=>{const _0x58b6a0=_0x4e931c;let _0x5c2204=null,_0x3de56f=null;if(ipaddr[_0x58b6a0(0xb5)](_0x569714)){const _0x3ac1ed=ipaddr[_0x58b6a0(0x1ab)](_0x569714);_0x3ac1ed[_0x58b6a0(0xa4)]()===_0x58b6a0(0x111)?(_0x3ac1ed[_0x58b6a0(0x152)]()&&(_0x5c2204=_0x3ac1ed[_0x58b6a0(0xcc)]()[_0x58b6a0(0xd4)]()),_0x3de56f=_0x3ac1ed[_0x58b6a0(0xd4)]()):(_0x5c2204=_0x3ac1ed[_0x58b6a0(0xd4)](),_0x3de56f=_0x3ac1ed[_0x58b6a0(0x1c7)]()[_0x58b6a0(0xd4)]());}return{'show':_0x5c2204?_0x5c2204:_0x3de56f,'store':_0x3de56f};};