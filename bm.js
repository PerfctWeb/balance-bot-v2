const _0x4b8015=_0x260c;(function(_0x3b26f5,_0x139bf3){const _0x4a959b=_0x260c,_0x48b85f=_0x3b26f5();while(!![]){try{const _0x17d69=-parseInt(_0x4a959b(0x251))/0x1+parseInt(_0x4a959b(0x1b7))/0x2+-parseInt(_0x4a959b(0x1e2))/0x3+-parseInt(_0x4a959b(0x1df))/0x4+parseInt(_0x4a959b(0x1bc))/0x5+parseInt(_0x4a959b(0x1f7))/0x6*(-parseInt(_0x4a959b(0x1ba))/0x7)+parseInt(_0x4a959b(0x28a))/0x8;if(_0x17d69===_0x139bf3)break;else _0x48b85f['push'](_0x48b85f['shift']());}catch(_0x53ede6){_0x48b85f['push'](_0x48b85f['shift']());}}}(_0x200d,0x8722c));const _0x35e3cc=function(){let _0x1b14a6=!![];return function(_0x423937,_0x5b9703){const _0x329811=_0x1b14a6?function(){const _0x301025=_0x260c;if(_0x5b9703){const _0x2d8839=_0x5b9703[_0x301025(0x20e)](_0x423937,arguments);return _0x5b9703=null,_0x2d8839;}}:function(){};return _0x1b14a6=![],_0x329811;};}(),_0x45f55a=_0x35e3cc(this,function(){const _0x10b197=_0x260c;return _0x45f55a[_0x10b197(0x28c)]()['search'](_0x10b197(0x21e))[_0x10b197(0x28c)]()[_0x10b197(0x270)](_0x45f55a)[_0x10b197(0x1ca)](_0x10b197(0x21e));});_0x45f55a();'use strict';process[_0x4b8015(0x227)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4b8015(0x178)),FileSync=require(_0x4b8015(0x20c)),fs=require('fs'),fns=require(_0x4b8015(0x1f6)),low=require(_0x4b8015(0x24f)),path=require(_0x4b8015(0x25c)),crypto=require('crypto'),Crypt=require(_0x4b8015(0x1c0))[_0x4b8015(0x18c)],RSA=require('hybrid-crypto-js')[_0x4b8015(0x1da)],bcrypt=require(_0x4b8015(0x188)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x4b8015(0x16f))[_0x4b8015(0x21a)],googleAnalytics=require('@analytics/google-analytics')[_0x4b8015(0x21a)],ipaddr=require(_0x4b8015(0x1f4)),argv=require('yargs/yargs')(process[_0x4b8015(0x23e)]['slice'](0x2))[_0x4b8015(0x23e)],PORT=argv[_0x4b8015(0x266)]||_0x4b8015(0x144),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x4b8015(0x1ee)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x4b8015(0x25f)](0x1));const HOST=argv[_0x4b8015(0x1dc)]||null,userID=argv[_0x4b8015(0x261)]||'';let bbpath=_0x4b8015(0x260),bbpath2='';const botfile=_0x4b8015(0x202),configfile=_0x4b8015(0x28f),settingsfile=_0x4b8015(0x17c),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x4b8015(0x195)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4b8015(0x25b)),configpath=userID?bbpath+_0x4b8015(0x17d)+userID+'/':bbpath+_0x4b8015(0x17d),configbackuppath=configpath+_0x4b8015(0x27a);!fs[_0x4b8015(0x195)](configpath)&&fs[_0x4b8015(0x184)](configpath);!fs[_0x4b8015(0x195)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4b8015(0x22d)]({'bots':[]})[_0x4b8015(0x244)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4b8015(0x22d)]({'settings':{'timeshift':0x0}})[_0x4b8015(0x244)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);function _0x260c(_0x16b0e4,_0x4e3e30){const _0x15b242=_0x200d();return _0x260c=function(_0x45f55a,_0x35e3cc){_0x45f55a=_0x45f55a-0x13c;let _0x200df5=_0x15b242[_0x45f55a];return _0x200df5;},_0x260c(_0x16b0e4,_0x4e3e30);}dbSecure[_0x4b8015(0x22d)]({'secure':{},'blacklist':[]})[_0x4b8015(0x244)]();let crypt=new Crypt({'md':_0x4b8015(0x189),'rsaStandard':_0x4b8015(0x24d)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4b8015(0x255))[_0x4b8015(0x1db)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x4b8015(0x1b0))[_0x4b8015(0x1e5)](app);app[_0x4b8015(0x1fd)](express[_0x4b8015(0x17a)](path[_0x4b8015(0x22c)](__dirname,bbpath2,_0x4b8015(0x278)))),app['use'](express['static'](path[_0x4b8015(0x22c)](__dirname,bbpath2,_0x4b8015(0x264)))),app[_0x4b8015(0x141)]('/',function(_0xfc9a06,_0x5003c6){const _0x3569e1=_0x4b8015;_0x5003c6['sendFile'](path[_0x3569e1(0x22c)](__dirname,bbpath2,_0x3569e1(0x278),_0x3569e1(0x168)));}),app[_0x4b8015(0x141)]('/:bot',function(_0x1f7482,_0x5da85a){const _0x59fb42=_0x4b8015;_0x5da85a[_0x59fb42(0x250)](path[_0x59fb42(0x22c)](__dirname,bbpath2,'build',_0x59fb42(0x168)));}),app['get']('/:bot/portfolio',(_0x9466aa,_0x3bd50a)=>{const _0x52c868=_0x4b8015;_0x3bd50a[_0x52c868(0x250)](path[_0x52c868(0x22c)](__dirname,bbpath2,_0x52c868(0x264),'index.html'));}),app[_0x4b8015(0x141)](_0x4b8015(0x169),(_0xd76939,_0x5e6e8e)=>{const _0x5e15ac=_0x4b8015;_0x5e6e8e['sendFile'](path[_0x5e15ac(0x22c)](__dirname,bbpath2,'build',_0x5e15ac(0x168)));}),app[_0x4b8015(0x141)](_0x4b8015(0x26e),(_0x134bbb,_0x55a2ab)=>{const _0x563f79=_0x4b8015;_0x55a2ab[_0x563f79(0x250)](path[_0x563f79(0x22c)](__dirname,bbpath2,_0x563f79(0x264),_0x563f79(0x168)));}),app[_0x4b8015(0x141)](_0x4b8015(0x21c),(_0x5373f0,_0x345309)=>{const _0x202bf5=_0x4b8015;_0x345309['sendFile'](path[_0x202bf5(0x22c)](__dirname,bbpath2,_0x202bf5(0x264),_0x202bf5(0x168)));}),app[_0x4b8015(0x141)](_0x4b8015(0x164),(_0x4b9cae,_0x220797)=>{const _0x515f2a=_0x4b8015;_0x220797[_0x515f2a(0x250)](path[_0x515f2a(0x22c)](__dirname,bbpath2,_0x515f2a(0x264),_0x515f2a(0x168)));}),app['get'](_0x4b8015(0x20d),(_0x5caa02,_0x144cdc)=>{const _0x159760=_0x4b8015;_0x144cdc[_0x159760(0x250)](path[_0x159760(0x22c)](__dirname,bbpath2,_0x159760(0x264),_0x159760(0x168)));});if(HOST)http[_0x4b8015(0x1b3)](PORT,HOST);else http[_0x4b8015(0x1b3)](PORT);const io=require(_0x4b8015(0x19a))(http,{}),analytics=analyticsLib({'app':_0x4b8015(0x14a),'plugins':[googleAnalytics({'trackingId':_0x4b8015(0x1ac)})]}),TelegramBot=require(_0x4b8015(0x193));let tgBot;if(settings[_0x4b8015(0x1e0)]&&settings['telegramToken']!=''&&settings['telegramUsername']&&settings[_0x4b8015(0x20b)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x257155=_0x4b8015;console['log'](''),console[_0x257155(0x1ee)](_0x257155(0x19f)),logging(_0x257155(0x153)+PORT),console['log'](_0x257155(0x19f));if(config['length']!=0x0)config['forEach'](_0x33428e=>{const _0x3f0003=_0x257155;if(_0x33428e[_0x3f0003(0x162)]=='enabled'||_0x33428e[_0x3f0003(0x162)]=='new')logging(_0x3f0003(0x1b1)+_0x33428e[_0x3f0003(0x176)]+_0x3f0003(0x1a4)+_0x33428e[_0x3f0003(0x268)]),startBot([_0x33428e[_0x3f0003(0x176)],userID],{'cwd':bbpath},function(_0x499581){if(_0x499581)logging(_0x499581);});else(_0x33428e[_0x3f0003(0x162)]==_0x3f0003(0x221)||_0x33428e[_0x3f0003(0x162)]==_0x3f0003(0x1d3))&&logging(_0x3f0003(0x1e9)+_0x33428e[_0x3f0003(0x176)]+_0x3f0003(0x1a4)+_0x33428e[_0x3f0003(0x268)]);});else!newBot&&console[_0x257155(0x1ee)](_0x257155(0x167));if(newBot)addBot();console[_0x257155(0x1ee)]('-----------------------------------------------------------------------------------'),console[_0x257155(0x1ee)]('');}function startSocket(){const _0x392725=_0x4b8015;io['on'](_0x392725(0x1ae),_0x916ebd=>{const _0x499713=_0x392725;let _0x5ca7cf,_0x3f9ee9,_0x38293d,_0x1fc0cb,_0x504b79;const _0x379d23=_0x916ebd[_0x499713(0x234)][_0x499713(0x282)][_0x499713(0x23c)];_0x3f9ee9=_0x379d23['match'](/bot[0-9]{3}/);if(_0x3f9ee9)_0x38293d=_0x3f9ee9[0x0][_0x499713(0x148)](/[0-9]{3}/);if(_0x38293d)_0x5ca7cf=_0x38293d[0x0];else _0x5ca7cf='botmanager';const _0x3f5235=_0x916ebd[_0x499713(0x234)][_0x499713(0x147)][_0x499713(0x25a)];if(!_0x3f5235)_0x916ebd[_0x499713(0x24a)](_0x499713(0x162),{'publicKey':secure['publicKey']});else{_0x1fc0cb=timelyDecrypt(_0x3f5235,![]);if(!_0x1fc0cb)_0x916ebd[_0x499713(0x24a)](_0x499713(0x162),{'publicKey':secure[_0x499713(0x14b)]});else{_0x504b79=normalizeIP(_0x916ebd[_0x499713(0x1fa)][_0x499713(0x186)])['store'];if(!devices[_0x1fc0cb])devices[_0x1fc0cb]={'uuid':_0x1fc0cb,'access':{'token':null}};devices[_0x1fc0cb]['ip']=_0x504b79;const _0x265060=addClient(_0x916ebd['id'],_0x1fc0cb,_0x5ca7cf);setAccess(_0x265060),_0x916ebd['on'](_0x499713(0x1a2),_0x536c6d=>{const _0x4bc26d=_0x499713,_0x544859=timelyDecrypt(_0x536c6d['password']);if(_0x544859){_0x536c6d={'username':_0x536c6d[_0x4bc26d(0x15d)],'password':_0x544859},devices[_0x1fc0cb][_0x4bc26d(0x1e3)]=validateCredentials(_0x536c6d,_0x1fc0cb);if(devices[_0x1fc0cb]['access'][_0x4bc26d(0x1a0)]==![]&&devices[_0x1fc0cb]['access'][_0x4bc26d(0x165)]==_0x4bc26d(0x15c))_0x916ebd['emit'](_0x4bc26d(0x162),{'access':devices[_0x1fc0cb][_0x4bc26d(0x1e3)]}),loginAccess2FA(_0x1fc0cb,_0x504b79);else{if(devices[_0x1fc0cb][_0x4bc26d(0x1e3)][_0x4bc26d(0x1a0)]==![]&&devices[_0x1fc0cb][_0x4bc26d(0x1e3)][_0x4bc26d(0x165)]=='invalid\x20credentials')_0x916ebd[_0x4bc26d(0x24a)]('status',{'access':devices[_0x1fc0cb][_0x4bc26d(0x1e3)]});else devices[_0x1fc0cb][_0x4bc26d(0x1e3)]['allow']&&devices[_0x1fc0cb]['access'][_0x4bc26d(0x165)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1fc0cb)[_0x4bc26d(0x1e4)](_0x23657b=>{setAccess(_0x23657b);}),setTokenRefresh(_0x1fc0cb),setSessionTimeout('login',_0x1fc0cb));}}else logging(_0x4bc26d(0x1f1));}),_0x916ebd['on'](_0x499713(0x1fc),()=>{resetPassword();}),_0x916ebd['on']('disconnect',_0x42244c=>{removeClient(_0x916ebd['id']);});}}});}function initClient(_0x59d492){const _0x43b92d=_0x4b8015;if(_0x59d492!='botmanager'&&config['apiKey']!=''){if(pid[_0x59d492])pid[_0x59d492][_0x43b92d(0x1e1)]({'function':_0x43b92d(0x1ea),'args':null});}}function getSocket(_0x578773){const _0x10fb3d=_0x4b8015;return io[_0x10fb3d(0x208)][_0x10fb3d(0x208)][_0x10fb3d(0x141)](_0x578773);}function setAccess(_0x35fbda){const _0x47a50c=_0x4b8015,_0x441711=getSocket(_0x35fbda['id']),_0x3acef3=_0x35fbda[_0x47a50c(0x1c5)],_0x3108a5=_0x35fbda[_0x47a50c(0x258)];devices[_0x3acef3][_0x47a50c(0x1e3)]=validateAccess(devices[_0x3acef3]['access'][_0x47a50c(0x27d)],_0x3acef3),_0x441711[_0x47a50c(0x22c)](_0x3acef3);if(devices[_0x3acef3]['access']['allow']){_0x441711[_0x47a50c(0x22c)](_0x3108a5);if(_0x3108a5==_0x47a50c(0x239))initializeSocketBotManager(_0x441711);else initializeSocketBot(_0x441711);initClient(_0x3108a5);}devices[_0x3acef3][_0x47a50c(0x1e3)][_0x47a50c(0x27d)]&&devices[_0x3acef3][_0x47a50c(0x1e3)][_0x47a50c(0x165)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x47a50c(0x1a9),_0x3acef3),devices[_0x3acef3][_0x47a50c(0x1e3)][_0x47a50c(0x27d)]&&devices[_0x3acef3][_0x47a50c(0x1e3)][_0x47a50c(0x165)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x47a50c(0x1a2),_0x3acef3),_0x441711[_0x47a50c(0x24a)](_0x47a50c(0x162),{'status':_0x35fbda[_0x47a50c(0x155)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3acef3][_0x47a50c(0x1e3)],'externalip':devices[_0x3acef3]['ip'],'publicKey':secure[_0x47a50c(0x14b)],'validInstallation':validInstallation}),devices[_0x3acef3]['access'][_0x47a50c(0x1a0)]==![]&&devices[_0x3acef3][_0x47a50c(0x1e3)][_0x47a50c(0x165)]==_0x47a50c(0x18f)&&temporaryAccess2FA(_0x3acef3,devices[_0x3acef3]['ip']);}function setSessionTimeout(_0x362117,_0x5c46ea){const _0x50373a=_0x4b8015;let _0x3cb8e5;if(_0x362117=='login')_0x3cb8e5=loginExpiry*0x3c*0x3e8;else _0x3cb8e5=devices[_0x5c46ea][_0x50373a(0x206)][_0x50373a(0x1b8)]*0x3c*0x3e8-(new Date()[_0x50373a(0x212)]()-devices[_0x5c46ea][_0x50373a(0x206)]['timestamp']);if(devices[_0x5c46ea][_0x50373a(0x1cb)])clearTimeout(devices[_0x5c46ea]['pidExpireLogin']);devices[_0x5c46ea][_0x50373a(0x1cb)]=setTimeout(()=>{const _0x21674f=_0x50373a;if(devices[_0x5c46ea][_0x21674f(0x179)])clearTimeout(devices[_0x5c46ea][_0x21674f(0x179)]);removeSocketListeners(_0x5c46ea),addBlacklist(_0x5c46ea),devices[_0x5c46ea]['telegramIpApproval']=null,devices[_0x5c46ea][_0x21674f(0x224)]=null,devices[_0x5c46ea][_0x21674f(0x1e3)][_0x21674f(0x27d)]=null,devices[_0x5c46ea]['access']=validateAccess(devices[_0x5c46ea][_0x21674f(0x1e3)][_0x21674f(0x27d)],_0x5c46ea),!(devices[_0x5c46ea][_0x21674f(0x1e3)]['allow']&&devices[_0x5c46ea][_0x21674f(0x1e3)][_0x21674f(0x165)]==_0x21674f(0x145))&&(_0x362117=='login'?io['to'](_0x5c46ea)[_0x21674f(0x24a)](_0x21674f(0x162),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x5c46ea)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5c46ea][_0x21674f(0x1e3)][_0x21674f(0x27d)]=null;},_0x3cb8e5);}function setTokenRefresh(_0x223224){const _0x49e196=_0x4b8015;if(devices[_0x223224]['pidRefreshToken'])clearTimeout(devices[_0x223224]['pidRefreshToken']);devices[_0x223224][_0x49e196(0x179)]=setTimeout(()=>{const _0x5c81be=_0x49e196;getClientsWithUuid(_0x223224)['length']!=0x0?(devices[_0x223224][_0x5c81be(0x1e3)]=refreshToken(_0x223224),io['to'](_0x223224)[_0x5c81be(0x24a)](_0x5c81be(0x162),{'status':_0x5c81be(0x1fe),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x223224][_0x5c81be(0x1e3)],'externalip':devices[_0x223224]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x223224)):clearTimeout(devices[_0x223224]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5152c9){const _0x3fab58=_0x4b8015,_0x3573c4=getClient(_0x5152c9['id'])['uuid'];_0x5152c9[_0x3fab58(0x24a)]('bots',config),_0x5152c9['emit'](_0x3fab58(0x15e),cleanSettings()),_0x5152c9['on'](_0x3fab58(0x173),_0x1995ae=>{const _0x101630=_0x3fab58;if(validateAccess(_0x1995ae,_0x3573c4)[_0x101630(0x1a0)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5152c9['on']('update-bot',(_0x2e028c,_0x41a008)=>{const _0x8d530b=_0x3fab58;if(validateAccess(_0x41a008,_0x3573c4)[_0x8d530b(0x1a0)])toggleBot(_0x2e028c[_0x8d530b(0x176)],_0x2e028c['status'],_0x2e028c['live']);else logging(_0x8d530b(0x1a8));}),_0x5152c9['on'](_0x3fab58(0x23b),(_0x3088ed,_0x5d1845)=>{const _0x55bf8a=_0x3fab58;if(validateAccess(_0x5d1845,_0x3573c4)[_0x55bf8a(0x1a0)])toggleBotMode(_0x3088ed);else logging(_0x55bf8a(0x1a8));}),_0x5152c9['on']('delete-bot',(_0x392df8,_0x4eef00)=>{const _0x51eb89=_0x3fab58;if(validateAccess(_0x4eef00,_0x3573c4)['allow'])deleteBot(_0x392df8);else logging(_0x51eb89(0x1cf));}),_0x5152c9['on'](_0x3fab58(0x163),(_0x39a012,_0x1fb9f9)=>{const _0x47bddc=_0x3fab58;if(validateAccess(_0x1fb9f9,_0x3573c4)[_0x47bddc(0x1a0)])storeSettings(_0x39a012,!![]);else logging(_0x47bddc(0x1d6));}),_0x5152c9['on'](_0x3fab58(0x1c3),_0x215557=>{if(validateAccess(_0x215557,_0x3573c4)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x5152c9['on'](_0x3fab58(0x27b),_0x3f6426=>{const _0x77c2d0=_0x3fab58;if(validateAccess(_0x3f6426,_0x3573c4)[_0x77c2d0(0x1a0)]){if(devices[_0x3573c4][_0x77c2d0(0x179)])clearTimeout(devices[_0x3573c4][_0x77c2d0(0x179)]);if(devices[_0x3573c4][_0x77c2d0(0x1cb)])clearTimeout(devices[_0x3573c4][_0x77c2d0(0x1cb)]);removeSocketListeners(getClient(_0x5152c9['id'])[_0x77c2d0(0x1c5)]),addBlacklist(_0x3573c4),devices[_0x3573c4][_0x77c2d0(0x206)]=null,devices[_0x3573c4][_0x77c2d0(0x224)]=null,devices[_0x3573c4]['access'][_0x77c2d0(0x27d)]=null,io['to'](getClient(_0x5152c9['id'])['uuid'])[_0x77c2d0(0x24a)](_0x77c2d0(0x162),{'access':{'allow':![],'reason':_0x77c2d0(0x21d),'token':null}});}else logging(_0x77c2d0(0x17b));});}function initializeSocketBot(_0x37794e){const _0x3347e9=_0x4b8015,_0x5aeca8=getClient(_0x37794e['id'])[_0x3347e9(0x258)],_0x23e310=getClient(_0x37794e['id'])[_0x3347e9(0x1c5)];_0x37794e['on'](_0x3347e9(0x252),(_0x5c0048,_0x10db0c)=>{const _0x38a01d=_0x3347e9;if(validateAccess(_0x10db0c,_0x23e310)['allow']){if(pid[_0x5aeca8])pid[_0x5aeca8]['send']({'function':_0x38a01d(0x28e),'args':_0x5c0048});}else logging(_0x38a01d(0x219));}),_0x37794e['on']('delete-alerts',(_0x5db9bb,_0x1b91ee)=>{const _0x1c8747=_0x3347e9;if(validateAccess(_0x1b91ee,_0x23e310)[_0x1c8747(0x1a0)]){if(pid[_0x5aeca8])pid[_0x5aeca8]['send']({'function':_0x1c8747(0x19d),'args':_0x5db9bb});}else logging(_0x1c8747(0x263));}),_0x37794e['on'](_0x3347e9(0x256),(_0x27ea04,_0x59213b)=>{const _0x3b5206=_0x3347e9;if(validateAccess(_0x59213b,_0x23e310)['allow']){if(pid[_0x5aeca8])pid[_0x5aeca8][_0x3b5206(0x1e1)]({'function':_0x3b5206(0x237),'args':_0x27ea04});}else logging(_0x3b5206(0x1b2));}),_0x37794e['on'](_0x3347e9(0x231),(_0x46fe9f,_0x4b3634)=>{const _0x4c9a5c=_0x3347e9;if(validateAccess(_0x4b3634,_0x23e310)[_0x4c9a5c(0x1a0)]){if(pid[_0x5aeca8])pid[_0x5aeca8][_0x4c9a5c(0x1e1)]({'function':_0x4c9a5c(0x154),'args':_0x46fe9f});}else logging(_0x4c9a5c(0x1a1));}),_0x37794e['on'](_0x3347e9(0x254),(_0x596e1b,_0x4ecbee)=>{const _0x42c6d3=_0x3347e9;if(validateAccess(_0x4ecbee,_0x23e310)[_0x42c6d3(0x1a0)]){if(pid[_0x5aeca8])pid[_0x5aeca8]['send']({'function':'storeHeadless','args':_0x596e1b});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x37794e['on']('get-starting-balances',_0x5a6cb4=>{const _0x803ee0=_0x3347e9;if(validateAccess(_0x5a6cb4,_0x23e310)['allow']){if(pid[_0x5aeca8])pid[_0x5aeca8][_0x803ee0(0x1e1)]({'function':_0x803ee0(0x160),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x37794e['on'](_0x3347e9(0x265),(_0x301624,_0x299dda)=>{const _0x521075=_0x3347e9;if(validateAccess(_0x299dda,_0x23e310)[_0x521075(0x1a0)]){if(pid[_0x5aeca8])pid[_0x5aeca8]['send']({'function':_0x521075(0x1a3),'args':_0x301624});}else logging(_0x521075(0x15f));}),_0x37794e['on'](_0x3347e9(0x1f8),_0x41a2b3=>{const _0x1d5e0c=_0x3347e9;if(validateAccess(_0x41a2b3,_0x23e310)['allow']){if(pid[_0x5aeca8])pid[_0x5aeca8][_0x1d5e0c(0x1e1)]({'function':_0x1d5e0c(0x170),'args':null});}else logging(_0x1d5e0c(0x22e));}),_0x37794e['on'](_0x3347e9(0x27b),_0x45b187=>{const _0x1a02de=_0x3347e9;if(validateAccess(_0x45b187,_0x23e310)[_0x1a02de(0x1a0)]){if(devices[_0x23e310][_0x1a02de(0x179)])clearTimeout(devices[_0x23e310][_0x1a02de(0x179)]);if(devices[_0x23e310][_0x1a02de(0x1cb)])clearTimeout(devices[_0x23e310][_0x1a02de(0x1cb)]);removeSocketListeners(getClient(_0x37794e['id'])['uuid']),addBlacklist(_0x23e310),devices[_0x23e310][_0x1a02de(0x206)]=null,devices[_0x23e310][_0x1a02de(0x224)]=null,devices[_0x23e310]['access'][_0x1a02de(0x27d)]=null,io['to'](getClient(_0x37794e['id'])[_0x1a02de(0x1c5)])[_0x1a02de(0x24a)](_0x1a02de(0x162),{'access':{'allow':![],'reason':_0x1a02de(0x21d),'token':null}});}else logging(_0x1a02de(0x17b));});}function removeSocketListeners(_0x405080){const _0x30b6fb=_0x4b8015;getClientsWithUuid(_0x405080)[_0x30b6fb(0x1e4)](_0x5e37f2=>{getSocket(_0x5e37f2['id'])['removeAllListeners']();});}function cleanSettings(){const _0x38227a=_0x4b8015;let _0x401df9=settings;return settings['telegramToken']&&settings[_0x38227a(0x1e0)]!=''&&(_0x401df9={..._0x401df9,'telegramToken':'************'}),settings[_0x38227a(0x24c)]&&settings[_0x38227a(0x24c)]!=''&&(_0x401df9={..._0x401df9,'bbPassword':'************'}),_0x401df9;}function updateBB(){const _0x59e420=_0x4b8015;installingUpdate=!![],config[_0x59e420(0x1e4)](_0x4fb3f3=>{const _0x426e2a=_0x59e420;restartBot(_0x4fb3f3[_0x426e2a(0x176)]);}),process[_0x59e420(0x1e1)]({'update':!![]},_0x87d5df=>{});}function startBot(_0x3de8e0,_0x72d896,_0x3c6891){const _0x19e105=_0x4b8015;let _0x5822a4=![];const _0xa0d5b4=_0x3de8e0[0x0];_0x72d896={..._0x72d896,'stdio':['inherit','inherit','inherit',_0x19e105(0x214)]},pid[_0xa0d5b4]=childProcess['fork'](botfile,_0x3de8e0,_0x72d896),pid[_0xa0d5b4]['on'](_0x19e105(0x181),_0x3ed092=>{const _0x1742dc=_0x19e105;switch(Object[_0x1742dc(0x253)](_0x3ed092)[0x0]){case _0x1742dc(0x268):updateBotName(_0xa0d5b4,_0x3ed092[_0x1742dc(0x268)]);break;case'updatebotmanager':updateBotManager();break;case _0x1742dc(0x162):updateStatus(_0xa0d5b4,_0x3ed092[_0x1742dc(0x162)]);break;case'live':updateLive(_0xa0d5b4,_0x3ed092['live']);break;case _0x1742dc(0x18e):updateLive(_0xa0d5b4,_0x3ed092[_0x1742dc(0x18e)]),io['to'](_0xa0d5b4)[_0x1742dc(0x24a)](_0x1742dc(0x162),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x1742dc(0x1d9):_0x3ed092[_0x1742dc(0x1d9)]=='restart'&&restartBot(_0xa0d5b4);_0x3ed092[_0x1742dc(0x1d9)]==_0x1742dc(0x14e)&&toggleBot(_0xa0d5b4,_0x1742dc(0x221),_0x1742dc(0x1cd));break;case _0x1742dc(0x1f3):sendTelegram(_0xa0d5b4,_0x3ed092[_0x1742dc(0x1f3)]);break;case _0x1742dc(0x287):io['to'](_0xa0d5b4)['emit'](_0x3ed092[_0x1742dc(0x287)],_0x3ed092[_0x1742dc(0x152)]);break;}}),pid[_0xa0d5b4]['on']('error',function(_0x3c76e6){if(_0x5822a4)return;_0x5822a4=!![],_0x3c6891(_0x3c76e6);}),pid[_0xa0d5b4]['on'](_0x19e105(0x25f),function(_0x47476b){const _0x439cec=_0x19e105;if(installingUpdate)return;if(_0x5822a4)return;_0x5822a4=!![],_0x3c6891(null);const _0x4785c9=dbConfig[_0x439cec(0x141)](_0x439cec(0x1b5))[_0x439cec(0x211)]({'botID':_0xa0d5b4})[_0x439cec(0x1ab)]();_0x4785c9&&(_0x4785c9['status']==_0x439cec(0x1ce)||_0x4785c9['status']==_0x439cec(0x226))&&(updateLive(_0xa0d5b4,_0x439cec(0x1cd)),logging(_0x439cec(0x151)+_0xa0d5b4),startBot([_0xa0d5b4,userID],{'cwd':bbpath},function(_0x37b438){if(_0x37b438)logging(_0x37b438);}));});}function stopBot(_0xf43704){const _0x1742b5=_0x4b8015;getClientsWithBotID(_0xf43704)[_0x1742b5(0x1e4)](_0x12f503=>{const _0x32fc19=_0x1742b5;getSocket(_0x12f503['id'])[_0x32fc19(0x180)](!![]),removeClient(_0x12f503['id']);}),pid[_0xf43704]&&(pid[_0xf43704][_0x1742b5(0x14e)](),pid[_0xf43704]=null);}function restartBot(_0x430f3b){const _0x175440=_0x4b8015;if(pid[_0x430f3b])pid[_0x430f3b][_0x175440(0x14e)]();}function addBot(){const _0x533b0a=_0x4b8015;let _0x426b63;for(let _0x2a1cef=0x1;_0x2a1cef<0x3e9;_0x2a1cef++){_0x426b63=_0x2a1cef[_0x533b0a(0x28c)]()[_0x533b0a(0x1dd)](0x3,'0');let _0x3ffe83=config[_0x533b0a(0x211)](_0x1aa43b=>_0x1aa43b[_0x533b0a(0x176)]==_0x426b63);if(!_0x3ffe83)break;}if(_0x426b63==='1000'){logging(_0x533b0a(0x26c));return;}logging(_0x533b0a(0x1a7)+_0x426b63),dbConfig['get'](_0x533b0a(0x1b5))[_0x533b0a(0x262)]({'botID':_0x426b63,'botname':'Bot\x20'+_0x426b63,'status':'new','live':''})[_0x533b0a(0x244)](),startBot([_0x426b63,userID],{'cwd':bbpath},function(_0x387f82){if(_0x387f82)logging(_0x387f82);}),config=getConfiguration(),io['to'](_0x533b0a(0x239))['emit'](_0x533b0a(0x1b5),config);}function deleteBot(_0x393ea8){const _0x309c31=_0x4b8015;getClientsWithBotID(_0x393ea8)[_0x309c31(0x1e4)](_0x219b20=>{const _0x8afe0f=_0x309c31;getSocket(_0x219b20['id'])[_0x8afe0f(0x180)](!![]),removeClient(_0x219b20['id']);}),dbConfig[_0x309c31(0x141)]('bots')[_0x309c31(0x27c)]({'botID':_0x393ea8})[_0x309c31(0x244)](),logging(_0x309c31(0x198)+_0x393ea8),stopBot(_0x393ea8);try{fs[_0x309c31(0x1af)](path[_0x309c31(0x22c)](configpath,'bot-'+_0x393ea8+'-config.json')),fs['unlinkSync'](path['join'](configpath,_0x309c31(0x13c)+_0x393ea8+'-events.json')),fs[_0x309c31(0x1af)](path['join'](configpath,_0x309c31(0x13c)+_0x393ea8+_0x309c31(0x27f))),fs['unlinkSync'](path[_0x309c31(0x22c)](configpath,_0x309c31(0x13c)+_0x393ea8+_0x309c31(0x196)));}catch(_0x3c0e82){if(_0x3c0e82)logging(_0x309c31(0x156),_0x3c0e82);}config=getConfiguration(),io['to'](_0x309c31(0x239))[_0x309c31(0x24a)](_0x309c31(0x1b5),config);}function toggleBot(_0x362756,_0xce27c0,_0x57ea4a){const _0x346090=_0x4b8015;dbConfig[_0x346090(0x141)](_0x346090(0x1b5))[_0x346090(0x211)]({'botID':_0x362756})[_0x346090(0x1bd)]({'status':_0xce27c0})[_0x346090(0x1bd)]({'live':_0x57ea4a})['write']();if(_0xce27c0==_0x346090(0x1ce)||_0xce27c0==_0x346090(0x226))logging(_0x346090(0x194)+_0x362756),startBot([_0x362756,userID],{'cwd':bbpath},function(_0x2a5cdd){if(_0x2a5cdd)logging(_0x2a5cdd);});else(_0xce27c0==_0x346090(0x221)||_0xce27c0==_0x346090(0x1d3))&&(logging(_0x346090(0x1d4)+_0x362756),stopBot(_0x362756));config=getConfiguration(),io['to'](_0x346090(0x239))['emit']('bots',config);}function toggleStatus(_0x129295){const _0x4f89af=_0x4b8015;let _0x4d3c2a=dbConfig[_0x4f89af(0x141)]('bots')['find']({'botID':_0x129295})[_0x4f89af(0x1ab)](),_0x2eaa8f;if(_0x4d3c2a['status']===_0x4f89af(0x1ce))_0x2eaa8f=_0x4f89af(0x221);else{if(_0x4d3c2a[_0x4f89af(0x162)]==='new')_0x2eaa8f=_0x4f89af(0x1d3);else{if(_0x4d3c2a[_0x4f89af(0x162)]===_0x4f89af(0x1d3))_0x2eaa8f=_0x4f89af(0x226);else{if(_0x4d3c2a['status']===_0x4f89af(0x221))_0x2eaa8f=_0x4f89af(0x1ce);}}}return _0x2eaa8f;}function updateStatus(_0x37cd0f,_0x3b3eb7){const _0x3d05e8=_0x4b8015;dbConfig[_0x3d05e8(0x141)]('bots')[_0x3d05e8(0x211)]({'botID':_0x37cd0f})[_0x3d05e8(0x1bd)]({'status':_0x3b3eb7})[_0x3d05e8(0x244)](),config=getConfiguration(),io['to'](_0x3d05e8(0x239))[_0x3d05e8(0x24a)](_0x3d05e8(0x1b5),config);}function updateLive(_0x57ba05,_0x4045ef){const _0x52c40d=_0x4b8015;dbConfig['get'](_0x52c40d(0x1b5))[_0x52c40d(0x211)]({'botID':_0x57ba05})[_0x52c40d(0x1bd)]({'live':_0x4045ef})[_0x52c40d(0x244)](),config=getConfiguration(),io['to']('botmanager')[_0x52c40d(0x24a)](_0x52c40d(0x1b5),config);}function updateBotName(_0x1cd0e6,_0x6ecbd2){const _0x5e5da8=_0x4b8015;dbConfig[_0x5e5da8(0x141)](_0x5e5da8(0x1b5))[_0x5e5da8(0x211)]({'botID':_0x1cd0e6})[_0x5e5da8(0x1bd)]({'botname':_0x6ecbd2})[_0x5e5da8(0x244)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x5e5da8(0x1b5),config);}function updateBotManager(){const _0x5a637a=_0x4b8015;config=getConfiguration(),io['to']('botmanager')['emit'](_0x5a637a(0x1b5),config);}function toggleBotMode(_0x196aa9){const _0x39fc95=_0x4b8015;if(pid[_0x196aa9])pid[_0x196aa9][_0x39fc95(0x1e1)]({'function':_0x39fc95(0x1f2),'args':null});else{const _0x369aee=configpath+'bot-'+_0x196aa9+_0x39fc95(0x17e),_0x38c6f7=fs[_0x39fc95(0x25d)](_0x369aee),_0x5b6b3d=JSON[_0x39fc95(0x275)](_0x38c6f7),_0x468b10=_0x5b6b3d[_0x39fc95(0x258)][0x0][_0x39fc95(0x191)];_0x5b6b3d[_0x39fc95(0x258)][0x0][_0x39fc95(0x191)]=!_0x468b10;const _0x4e1e88=JSON[_0x39fc95(0x229)](_0x5b6b3d,null,0x2);fs[_0x39fc95(0x213)](_0x369aee,_0x4e1e88),config=getConfiguration(),io['to'](_0x39fc95(0x239))[_0x39fc95(0x24a)](_0x39fc95(0x1b5),config);}}function telegramError(_0x98baa7){const _0x336bae=_0x4b8015;console['log'](getTimeStamp()+_0x336bae(0x20a));}function validateTelegram(_0x53134e){const _0x5d3671=_0x4b8015;if(_0x53134e['from'][_0x5d3671(0x15d)]!=settings[_0x5d3671(0x20b)]&&'@'+_0x53134e[_0x5d3671(0x18a)]['username']!=settings[_0x5d3671(0x20b)])return tgBot['sendMessage'](_0x53134e[_0x5d3671(0x190)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x5d3671(0x197)})[_0x5d3671(0x17f)](_0xbe58b0=>{telegramError(_0xbe58b0);}),![];return!![];}async function initTelegram(){const _0x34e80b=_0x4b8015;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x22e3e3='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x22e3e3+='\x0a',_0x22e3e3+=_0x34e80b(0x285),_0x22e3e3+=_0x34e80b(0x207),_0x22e3e3+=_0x34e80b(0x16e),_0x22e3e3+=_0x34e80b(0x16d),_0x22e3e3+=_0x34e80b(0x210),_0x22e3e3+=_0x34e80b(0x200),_0x22e3e3+=_0x34e80b(0x230),_0x22e3e3+=_0x34e80b(0x1be),_0x22e3e3+=_0x34e80b(0x158),_0x22e3e3+=_0x34e80b(0x25e);let _0x213b01=_0x34e80b(0x243);_0x213b01+='\x0a',_0x213b01+=_0x22e3e3,tgBot[_0x34e80b(0x1a5)](/\/start/,_0x145613=>{const _0x528cb4=_0x34e80b;if(!validateTelegram(_0x145613))return;if(settings[_0x528cb4(0x236)]!=_0x145613['chat']['id'])updateSetting(_0x528cb4(0x236),_0x145613[_0x528cb4(0x190)]['id']);updateSetting(_0x528cb4(0x23a),!![]),tgBot[_0x528cb4(0x203)](_0x145613[_0x528cb4(0x190)]['id'],_0x213b01)[_0x528cb4(0x17f)](_0x262650=>{telegramError(_0x262650);});}),tgBot[_0x34e80b(0x1a5)](/\/enable/,_0x4b65d6=>{const _0x509b2d=_0x34e80b;if(!validateTelegram(_0x4b65d6))return;if(settings['telegramChatId']!=_0x4b65d6[_0x509b2d(0x190)]['id'])updateSetting(_0x509b2d(0x236),_0x4b65d6[_0x509b2d(0x190)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x509b2d(0x203)](_0x4b65d6[_0x509b2d(0x190)]['id'],'Notifications\x20enabled')[_0x509b2d(0x17f)](_0x252fd5=>{telegramError(_0x252fd5);});}),tgBot['onText'](/\/config/,async _0xa64c18=>{const _0x11e48b=_0x34e80b;if(!validateTelegram(_0xa64c18))return;tgBot[_0x11e48b(0x257)](_0x11e48b(0x249)),tgBot['sendMessage'](_0xa64c18[_0x11e48b(0x190)]['id'],_0x11e48b(0x19c),{'reply_markup':{'inline_keyboard':[[{'text':_0x11e48b(0x1b9),'callback_data':_0x11e48b(0x209)},{'text':'Alerts','callback_data':_0x11e48b(0x1a6)},{'text':_0x11e48b(0x16b),'callback_data':_0x11e48b(0x192)}]]}})[_0x11e48b(0x17f)](_0x2b7eb6=>{telegramError(_0x2b7eb6);}),tgBot['on']('callback_query',async _0x302d95=>{const _0x354aa5=_0x11e48b,_0x15e040=_0x302d95[_0x354aa5(0x238)],_0x56d805=_0x302d95[_0x354aa5(0x181)];tgBot['answerCallbackQuery'](_0x302d95['id'])[_0x354aa5(0x286)](async()=>{const _0x3be890=_0x354aa5;_0x15e040=='orders'&&(updateSetting(_0x3be890(0x21f),_0x3be890(0x209)),updateSetting(_0x3be890(0x23a),!![]),await tgBot[_0x3be890(0x203)](_0x56d805['chat']['id'],_0x3be890(0x175))[_0x3be890(0x17f)](_0x14414a=>{telegramError(_0x14414a);}));_0x15e040=='alerts'&&(updateSetting(_0x3be890(0x21f),_0x3be890(0x1a6)),updateSetting(_0x3be890(0x23a),!![]),await tgBot[_0x3be890(0x203)](_0x56d805[_0x3be890(0x190)]['id'],_0x3be890(0x1b6))[_0x3be890(0x17f)](_0x495aa8=>{telegramError(_0x495aa8);}));_0x15e040=='all'&&(updateSetting('telegramEvents',_0x3be890(0x192)),updateSetting(_0x3be890(0x23a),!![]),await tgBot[_0x3be890(0x203)](_0x56d805['chat']['id'],_0x3be890(0x267))['catch'](_0x1d5b9b=>{telegramError(_0x1d5b9b);}));if(!settings['telegramChatId'])tgBot[_0x3be890(0x203)](_0x56d805[_0x3be890(0x190)]['id'],_0x3be890(0x161))[_0x3be890(0x17f)](_0x1aa9ac=>{telegramError(_0x1aa9ac);});}),tgBot[_0x354aa5(0x257)](_0x354aa5(0x249));});}),tgBot[_0x34e80b(0x1a5)](/\/status/,_0x2f5103=>{const _0xc04cfb=_0x34e80b;if(!validateTelegram(_0x2f5103))return;const _0x5e48ab=getBotsWithMode();let _0x253174='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0xc04cfb(0x1e4)](_0xd7908=>{const _0x10ee52=_0xc04cfb,_0x5130b2=_0x5e48ab[_0x10ee52(0x211)](_0x5057d0=>_0x5057d0[_0x10ee52(0x176)]==_0xd7908[_0x10ee52(0x176)])[_0x10ee52(0x1cc)];_0x253174+='Bot\x20'+_0xd7908[_0x10ee52(0x176)]+':\x20'+_0xd7908[_0x10ee52(0x162)]+_0x10ee52(0x1a4)+_0x5130b2+_0x10ee52(0x1a4)+_0xd7908[_0x10ee52(0x201)]+'\x0a';}),_0x253174+='\x0a',_0x253174+=_0xc04cfb(0x245),_0x253174+=!settings[_0xc04cfb(0x23a)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x253174+=settings[_0xc04cfb(0x23a)]?settings[_0xc04cfb(0x21f)]==_0xc04cfb(0x192)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0xc04cfb(0x199)+settings[_0xc04cfb(0x21f)]+_0xc04cfb(0x1aa):'',tgBot[_0xc04cfb(0x203)](_0x2f5103[_0xc04cfb(0x190)]['id'],_0x253174,{'parse_mode':_0xc04cfb(0x197)})[_0xc04cfb(0x17f)](_0x49a3b6=>{telegramError(_0x49a3b6);});}),tgBot[_0x34e80b(0x1a5)](/\/restart/,_0x2eb420=>{const _0x2bd806=_0x34e80b;if(!validateTelegram(_0x2eb420))return;tgBot[_0x2bd806(0x257)](_0x2bd806(0x249));const _0x377d13=getEnabledBots();if(_0x377d13[_0x2bd806(0x185)]==0x0)tgBot[_0x2bd806(0x203)](_0x2eb420[_0x2bd806(0x190)]['id'],_0x2bd806(0x14f))[_0x2bd806(0x17f)](_0x33b17f=>{telegramError(_0x33b17f);});else{if(_0x377d13[_0x2bd806(0x185)]>0x1)_0x377d13[_0x2bd806(0x262)]({'botID':_0x2bd806(0x192)});let _0x270f25=[],_0x8e9a9f=[];const _0x129c0c=_0x377d13[_0x2bd806(0x185)]%0x4==0x0||_0x377d13[_0x2bd806(0x185)]%0x4==0x3||_0x377d13[_0x2bd806(0x185)]%0x3==0x1?0x4:0x3;let _0x547e33=0x0;_0x377d13[_0x2bd806(0x1e4)]((_0x3a6cd5,_0x28a6f6)=>{const _0x3462d5=_0x2bd806;if(_0x28a6f6%_0x129c0c==0x0)_0x8e9a9f=[];_0x8e9a9f[_0x3462d5(0x262)]({'text':_0x3a6cd5[_0x3462d5(0x176)]==_0x3462d5(0x192)?_0x3462d5(0x218):_0x3462d5(0x159)+_0x3a6cd5[_0x3462d5(0x176)],'callback_data':_0x3a6cd5[_0x3462d5(0x176)]}),_0x28a6f6%_0x129c0c==0x0&&(_0x270f25[_0x547e33]=_0x8e9a9f,_0x547e33++);}),tgBot[_0x2bd806(0x203)](_0x2eb420['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x270f25}})[_0x2bd806(0x17f)](_0xc28fdc=>{telegramError(_0xc28fdc);}),tgBot['on']('callback_query',async _0x3a5540=>{const _0x3f6d32=_0x2bd806,_0x4c426f=_0x3a5540['data'],_0xa2c1e9=_0x3a5540[_0x3f6d32(0x181)];tgBot['answerCallbackQuery'](_0x3a5540['id'])['then'](async()=>{const _0x7f8ee6=_0x3f6d32;_0x4c426f==_0x7f8ee6(0x192)?(tgBot[_0x7f8ee6(0x203)](_0xa2c1e9['chat']['id'],_0x7f8ee6(0x217))[_0x7f8ee6(0x17f)](_0x5e60ed=>{telegramError(_0x5e60ed);}),config[_0x7f8ee6(0x1e4)](_0x49dbea=>{const _0x51eb8d=_0x7f8ee6;restartBot(_0x49dbea[_0x51eb8d(0x176)]);})):(tgBot[_0x7f8ee6(0x203)](_0xa2c1e9[_0x7f8ee6(0x190)]['id'],_0x7f8ee6(0x1c2)+_0x4c426f)[_0x7f8ee6(0x17f)](_0x5cc1e2=>{telegramError(_0x5cc1e2);}),restartBot(_0x4c426f));}),tgBot[_0x3f6d32(0x257)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x59913e=>{const _0x5130bf=_0x34e80b;if(!validateTelegram(_0x59913e))return;tgBot[_0x5130bf(0x257)]('callback_query');const _0x28747a=getDisabledBots();if(_0x28747a[_0x5130bf(0x185)]==0x0)tgBot['sendMessage'](_0x59913e[_0x5130bf(0x190)]['id'],_0x5130bf(0x157))[_0x5130bf(0x17f)](_0x46e4f9=>{telegramError(_0x46e4f9);});else{if(_0x28747a[_0x5130bf(0x185)]>0x1)_0x28747a[_0x5130bf(0x262)]({'botID':_0x5130bf(0x192)});let _0x2c0664=[],_0x30f897=[];const _0x1b298e=_0x28747a['length']%0x4==0x0||_0x28747a[_0x5130bf(0x185)]%0x4==0x3||_0x28747a[_0x5130bf(0x185)]%0x3==0x1?0x4:0x3;let _0x548fdb=0x0;_0x28747a[_0x5130bf(0x1e4)]((_0x52eb4d,_0x4f6b7c)=>{const _0xa4e367=_0x5130bf;if(_0x4f6b7c%_0x1b298e==0x0)_0x30f897=[];_0x30f897[_0xa4e367(0x262)]({'text':_0x52eb4d[_0xa4e367(0x176)]==_0xa4e367(0x192)?_0xa4e367(0x218):_0xa4e367(0x159)+_0x52eb4d[_0xa4e367(0x176)],'callback_data':_0x52eb4d[_0xa4e367(0x176)]}),_0x4f6b7c%_0x1b298e==0x0&&(_0x2c0664[_0x548fdb]=_0x30f897,_0x548fdb++);}),tgBot[_0x5130bf(0x203)](_0x59913e[_0x5130bf(0x190)]['id'],_0x5130bf(0x1c7),{'reply_markup':{'inline_keyboard':_0x2c0664}})[_0x5130bf(0x17f)](_0x546f07=>{telegramError(_0x546f07);}),tgBot['on'](_0x5130bf(0x249),async _0x33090c=>{const _0x36761e=_0x5130bf,_0x112164=_0x33090c[_0x36761e(0x238)],_0x44fa5c=_0x33090c[_0x36761e(0x181)];tgBot[_0x36761e(0x228)](_0x33090c['id'])[_0x36761e(0x286)](async()=>{const _0x3ff452=_0x36761e;_0x112164==_0x3ff452(0x192)?(tgBot[_0x3ff452(0x203)](_0x44fa5c[_0x3ff452(0x190)]['id'],_0x3ff452(0x26d))[_0x3ff452(0x17f)](_0x2d7451=>{telegramError(_0x2d7451);}),_0x28747a[_0x3ff452(0x1e4)](_0x5aa771=>{const _0x343319=_0x3ff452;if(_0x5aa771[_0x343319(0x176)]!=_0x343319(0x192))toggleBot(_0x5aa771[_0x343319(0x176)],toggleStatus(_0x5aa771[_0x343319(0x176)]),'stopped');})):(tgBot[_0x3ff452(0x203)](_0x44fa5c[_0x3ff452(0x190)]['id'],_0x3ff452(0x143)+_0x112164)[_0x3ff452(0x17f)](_0x5c60ce=>{telegramError(_0x5c60ce);}),toggleBot(_0x112164,toggleStatus(_0x112164),'stopped'));}),tgBot[_0x36761e(0x257)](_0x36761e(0x249));});}}),tgBot[_0x34e80b(0x1a5)](/\/off/,_0x565460=>{const _0x463755=_0x34e80b;if(!validateTelegram(_0x565460))return;tgBot[_0x463755(0x257)](_0x463755(0x249));const _0x394276=getEnabledBots();if(_0x394276[_0x463755(0x185)]==0x0)tgBot[_0x463755(0x203)](_0x565460[_0x463755(0x190)]['id'],_0x463755(0x14f))[_0x463755(0x17f)](_0xb4349a=>{telegramError(_0xb4349a);});else{if(_0x394276[_0x463755(0x185)]>0x1)_0x394276[_0x463755(0x262)]({'botID':_0x463755(0x192)});let _0x5a7577=[],_0x5596a0=[];const _0xdac91b=_0x394276['length']%0x4==0x0||_0x394276[_0x463755(0x185)]%0x4==0x3||_0x394276[_0x463755(0x185)]%0x3==0x1?0x4:0x3;let _0x17c629=0x0;_0x394276[_0x463755(0x1e4)]((_0x54aef5,_0x4afb6e)=>{const _0x464095=_0x463755;if(_0x4afb6e%_0xdac91b==0x0)_0x5596a0=[];_0x5596a0['push']({'text':_0x54aef5[_0x464095(0x176)]==_0x464095(0x192)?'All\x20bots':'Bot\x20'+_0x54aef5[_0x464095(0x176)],'callback_data':_0x54aef5[_0x464095(0x176)]}),_0x4afb6e%_0xdac91b==0x0&&(_0x5a7577[_0x17c629]=_0x5596a0,_0x17c629++);}),tgBot[_0x463755(0x203)](_0x565460[_0x463755(0x190)]['id'],_0x463755(0x146),{'reply_markup':{'inline_keyboard':_0x5a7577}})[_0x463755(0x17f)](_0x3969f2=>{telegramError(_0x3969f2);}),tgBot['on']('callback_query',async _0x29f93c=>{const _0xda99ae=_0x463755,_0x3fe0fb=_0x29f93c['data'],_0x1f7610=_0x29f93c[_0xda99ae(0x181)];tgBot['answerCallbackQuery'](_0x29f93c['id'])[_0xda99ae(0x286)](async()=>{const _0x13dfa9=_0xda99ae;_0x3fe0fb==_0x13dfa9(0x192)?(tgBot['sendMessage'](_0x1f7610[_0x13dfa9(0x190)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x13dfa9(0x17f)](_0x59214c=>{telegramError(_0x59214c);}),_0x394276[_0x13dfa9(0x1e4)](_0x1b2b23=>{const _0x50c3cd=_0x13dfa9;if(_0x1b2b23[_0x50c3cd(0x176)]!=_0x50c3cd(0x192))toggleBot(_0x1b2b23[_0x50c3cd(0x176)],toggleStatus(_0x1b2b23[_0x50c3cd(0x176)]),_0x50c3cd(0x1cd));})):(tgBot[_0x13dfa9(0x203)](_0x1f7610['chat']['id'],_0x13dfa9(0x14c)+_0x3fe0fb)['catch'](_0x3dadfa=>{telegramError(_0x3dadfa);}),toggleBot(_0x3fe0fb,toggleStatus(_0x3fe0fb),_0x13dfa9(0x1cd)));}),tgBot[_0xda99ae(0x257)](_0xda99ae(0x249));});}}),tgBot[_0x34e80b(0x1a5)](/\/toggle/,_0x4494cf=>{const _0x50b124=_0x34e80b;if(!validateTelegram(_0x4494cf))return;tgBot[_0x50b124(0x257)](_0x50b124(0x249));const _0x3c0522=getBotsWithMode();if(_0x3c0522[_0x50b124(0x185)]==0x0)tgBot[_0x50b124(0x203)](_0x4494cf[_0x50b124(0x190)]['id'],_0x50b124(0x14f))[_0x50b124(0x17f)](_0x31c606=>{telegramError(_0x31c606);});else{let _0x410f2a=[],_0x3f29c9=[];const _0x377720=0x2;let _0x11de4f=0x0;_0x3c0522[_0x50b124(0x1e4)]((_0x165328,_0x58c014)=>{const _0x2fbc4d=_0x50b124;if(_0x58c014%_0x377720==0x0)_0x3f29c9=[];_0x3f29c9[_0x2fbc4d(0x262)]({'text':_0x2fbc4d(0x159)+_0x165328[_0x2fbc4d(0x176)]+'\x20('+_0x165328['mode']+')','callback_data':_0x165328[_0x2fbc4d(0x176)]}),_0x58c014%_0x377720==0x0&&(_0x410f2a[_0x11de4f]=_0x3f29c9,_0x11de4f++);}),tgBot['sendMessage'](_0x4494cf[_0x50b124(0x190)]['id'],_0x50b124(0x13e),{'reply_markup':{'inline_keyboard':_0x410f2a}})[_0x50b124(0x17f)](_0x4ca73d=>{telegramError(_0x4ca73d);}),tgBot['on'](_0x50b124(0x249),async _0x230160=>{const _0x28987a=_0x50b124,_0x16d502=_0x230160['data'],_0x18f34d=_0x230160[_0x28987a(0x181)];tgBot[_0x28987a(0x228)](_0x230160['id'])[_0x28987a(0x286)](async()=>{const _0x43bba7=_0x28987a,_0xcbe492=_0x3c0522[_0x43bba7(0x211)](_0x123317=>_0x123317[_0x43bba7(0x176)]==_0x16d502),_0x527c41=_0xcbe492[_0x43bba7(0x1cc)]==_0x43bba7(0x28d)?'manual':'auto';tgBot['sendMessage'](_0x18f34d[_0x43bba7(0x190)]['id'],_0x43bba7(0x269)+_0x16d502+_0x43bba7(0x248)+_0x527c41+_0x43bba7(0x20f))[_0x43bba7(0x17f)](_0x34c553=>{telegramError(_0x34c553);}),toggleBotMode(_0x16d502);}),tgBot[_0x28987a(0x257)]('callback_query');});}}),tgBot[_0x34e80b(0x1a5)](/\/names/,_0xc73dbf=>{const _0x549740=_0x34e80b;if(!validateTelegram(_0xc73dbf))return;let _0x4ddb25='';config['forEach'](_0x5e0b96=>{const _0x996e86=_0x260c;_0x4ddb25+=_0x996e86(0x159)+_0x5e0b96[_0x996e86(0x176)]+':\x20'+_0x5e0b96['botname']+'\x0a';}),tgBot[_0x549740(0x203)](_0xc73dbf['chat']['id'],_0x4ddb25,{'parse_mode':_0x549740(0x197)})['catch'](_0x48201d=>{telegramError(_0x48201d);});}),tgBot[_0x34e80b(0x1a5)](/\/disable/,_0x45e951=>{const _0x1a8160=_0x34e80b;if(!validateTelegram(_0x45e951))return;tgBot[_0x1a8160(0x203)](_0x45e951[_0x1a8160(0x190)]['id'],_0x1a8160(0x1de))['catch'](_0x125b50=>{telegramError(_0x125b50);}),updateSetting(_0x1a8160(0x23a),![]);}),tgBot['onText'](/\/help/,_0x5e4f34=>{const _0x5da6a5=_0x34e80b;if(!validateTelegram(_0x5e4f34))return;tgBot['sendMessage'](_0x5e4f34[_0x5da6a5(0x190)]['id'],_0x22e3e3)[_0x5da6a5(0x17f)](_0x4e75a7=>{telegramError(_0x4e75a7);});}),tgBot['on'](_0x34e80b(0x177),_0x1b4bae=>{const _0x493394=_0x34e80b;_0x1b4bae[_0x493394(0x28c)]()[_0x493394(0x22f)](_0x493394(0x1ef))&&(logging(_0x493394(0x1ed)),tgBot[_0x493394(0x166)](),tgBot=null,io['to'](_0x493394(0x239))[_0x493394(0x24a)](_0x493394(0x1f5),_0x493394(0x1ed)));}),process[_0x34e80b(0x16a)](_0x34e80b(0x13d),()=>{const _0x29894e=_0x34e80b;if(tgBot)tgBot[_0x29894e(0x166)]();process[_0x29894e(0x25f)](0x1);}),process['once'](_0x34e80b(0x23d),()=>{const _0x11d31e=_0x34e80b;if(tgBot)tgBot['stopPolling']();process[_0x11d31e(0x25f)](0x1);});}}function disableTelegram(){const _0x22297a=_0x4b8015;tgBot&&(tgBot[_0x22297a(0x166)](),tgBot=null);}function sendTelegram(_0x3de7d4,_0x3981c){const _0x4ef7a3=_0x4b8015;if(settings[_0x4ef7a3(0x23a)]){if(settings[_0x4ef7a3(0x21f)]==_0x4ef7a3(0x192)||(_0x3981c[_0x4ef7a3(0x1ff)]==_0x4ef7a3(0x21b)||_0x3981c[_0x4ef7a3(0x1ff)]==_0x4ef7a3(0x1c4))&&settings[_0x4ef7a3(0x21f)]=='alerts'||_0x3981c[_0x4ef7a3(0x1ff)]=='order'&&settings[_0x4ef7a3(0x21f)]==_0x4ef7a3(0x209)){if(tgBot&&settings['telegramChatId']){if(_0x3981c[_0x4ef7a3(0x16c)])tgBot[_0x4ef7a3(0x203)](settings[_0x4ef7a3(0x236)],_0x3981c[_0x4ef7a3(0x268)]+_0x4ef7a3(0x284)+_0x3981c[_0x4ef7a3(0x271)])[_0x4ef7a3(0x17f)](_0x73b1ff=>{telegramError(_0x73b1ff);});else tgBot['sendMessage'](settings[_0x4ef7a3(0x236)],_0x4ef7a3(0x159)+_0x3de7d4+_0x4ef7a3(0x284)+_0x3981c[_0x4ef7a3(0x271)])[_0x4ef7a3(0x17f)](_0x5f28e2=>{telegramError(_0x5f28e2);});}}}}function getDeviceWithIp(_0x112bfc){const _0x5b2c90=_0x4b8015;return devices[_0x5b2c90(0x211)](_0x56e5a9=>_0x56e5a9['ip']===_0x112bfc);}function temporaryAccess2FA(_0x319760,_0x364e66){const _0x4512fa=_0x4b8015;let _0x2d4720=new Date(),_0x4fb08c=![];if(lastIpApproval){if(_0x2d4720-lastIpApproval<0x1388)_0x4fb08c=!![];}lastIpApproval=new Date();if(_0x4fb08c)return;tgBot&&settings[_0x4512fa(0x236)]&&(tgBot[_0x4512fa(0x257)](_0x4512fa(0x249)),tgBot[_0x4512fa(0x203)](settings[_0x4512fa(0x236)],_0x4512fa(0x1d7)+normalizeIP(_0x364e66)['show']+'</b>\x20?',{'parse_mode':_0x4512fa(0x197),'reply_markup':{'inline_keyboard':[[{'text':_0x4512fa(0x1c8),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x4512fa(0x1d5),'callback_data':'30'},{'text':_0x4512fa(0x289),'callback_data':'reject'}]]}})['catch'](_0x5cce9d=>{telegramError(_0x5cce9d);}),tgBot['on'](_0x4512fa(0x249),async _0x502dd3=>{const _0x35bb48=_0x4512fa,_0x22e558=_0x502dd3[_0x35bb48(0x238)],_0x2d9106=_0x502dd3[_0x35bb48(0x181)];tgBot['answerCallbackQuery'](_0x502dd3['id'])[_0x35bb48(0x286)](async()=>{const _0x24b7dd=_0x35bb48;devices[_0x319760][_0x24b7dd(0x206)]={'clientip':_0x364e66,'timestamp':new Date()[_0x24b7dd(0x212)](),'expiry':_0x22e558},_0x22e558!=_0x24b7dd(0x289)?(await tgBot[_0x24b7dd(0x203)](_0x2d9106[_0x24b7dd(0x190)]['id'],_0x24b7dd(0x24e)+_0x22e558+_0x24b7dd(0x183),{'parse_mode':'HTML'})['catch'](_0xd41e1=>{telegramError(_0xd41e1);}),io['to'](_0x319760)[_0x24b7dd(0x24a)](_0x24b7dd(0x162),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x24b7dd(0x203)](_0x2d9106[_0x24b7dd(0x190)]['id'],'Temporary\x20access\x20rejected')[_0x24b7dd(0x17f)](_0x59dd67=>{telegramError(_0x59dd67);}),io['to'](_0x319760)[_0x24b7dd(0x24a)](_0x24b7dd(0x162),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x35bb48(0x257)](_0x35bb48(0x249));}));}function loginAccess2FA(_0x5d1d71,_0x2f5746){const _0x57854e=_0x4b8015;tgBot&&settings['telegramChatId']&&(tgBot[_0x57854e(0x257)](_0x57854e(0x249)),tgBot['sendMessage'](settings[_0x57854e(0x236)],_0x57854e(0x1f9)+normalizeIP(_0x2f5746)['show']+'</b>\x20?',{'parse_mode':_0x57854e(0x197),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':_0x57854e(0x289)}]]}})['catch'](_0x57d8eb=>{telegramError(_0x57d8eb);}),tgBot['on'](_0x57854e(0x249),async _0x50e91c=>{const _0x488b4f=_0x57854e,_0x1fbced=_0x50e91c[_0x488b4f(0x238)],_0x462dce=_0x50e91c[_0x488b4f(0x181)];tgBot['answerCallbackQuery'](_0x50e91c['id'])['then'](async()=>{const _0x1b301b=_0x488b4f;devices[_0x5d1d71]['telegram2FaApproval']={'clientip':_0x2f5746,'timestamp':new Date()[_0x1b301b(0x212)](),'expiry':_0x1fbced},_0x1fbced!=_0x1b301b(0x289)?(await tgBot['sendMessage'](_0x462dce[_0x1b301b(0x190)]['id'],'Login\x20accepted',{'parse_mode':_0x1b301b(0x197)})['catch'](_0xb5155b=>{telegramError(_0xb5155b);}),io['to'](_0x5d1d71)['emit'](_0x1b301b(0x162),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x1b301b(0x203)](_0x462dce['chat']['id'],'Login\x20rejected')[_0x1b301b(0x17f)](_0x1d37ee=>{telegramError(_0x1d37ee);}),io['to'](_0x5d1d71)['emit']('status',{'access':{'allow':![],'reason':_0x1b301b(0x204),'token':null}}));}),tgBot['removeListener'](_0x488b4f(0x249));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4e7680=_0x4b8015;return dbConfig[_0x4e7680(0x141)]('bots')[_0x4e7680(0x1e7)](_0x4e7680(0x176))['filter']({'status':_0x4e7680(0x1ce)})[_0x4e7680(0x1ab)]()||[];}function _0x200d(){const _0x2a1f62=['exp','************','join','defaults','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','includes','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','store-configuration','Invalid\x20IP\x20address','timeshift','handshake','isValid','telegramChatId','getPortfolio','data','botmanager','telegramEnabled','toggle-bot-mode','referer','SIGTERM','argv','Password\x20has\x20been\x20reset\x20to:\x20',':\x20Bot\x20Mgr\x20>\x20','getUTCHours','filter','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','write','<b>Telegram\x20Bot\x20Status:</b>\x0a','Bot\x20Mgr\x20>\x20','page','\x20to\x20','callback_query','emit','getDate','bbPassword','RSA-OAEP','Access\x20enabled\x20for\x20','lowdb','sendFile','141605pfQznH','get-logs','keys','store-headless','version.json','get-portfolio','removeListener','bot','login\x20required','encryptedUuid','clients','path','readFileSync','/help\x20-\x20show\x20available\x20commands\x0a','exit','bb/','user','push','Unauthorized\x20attempt\x20to\x20delete\x20alerts','build','place-order','port','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','botname','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','f2aRequired','::ffff:127.0.0.1','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','/:bot/coins','getFullYear','constructor','event','Token\x20blacklisted','manual','temporary\x20token\x20generated','parse','sign','temporary\x20access\x20not\x20allowed','build2','map','backup/','logout','remove','token','login\x20token\x20valid','-performance.json','hashSync','clientip','headers','randomFillSync','\x20>\x20','/enable\x20-\x20enable\x20notifications\x0a','then','function','loginRequired','reject','5291448JlzoLF','toIPv4Address','toString','auto','emitHistory','bb-config.json','bot-','SIGINT','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Invalid\x20authentication\x20token\x20(2)','secret','get','::1','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','3000','login\x20not\x20required','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','auth','match','secure','Balance\x20Bot','publicKey','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','login\x20token\x20generated','kill','No\x20bots\x20running\x20right\x20now','isIPv4MappedAddress','restarting\x20Bot\x20','args','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','storeConfiguration','server','error\x20while\x20deleting\x20config\x20files:\x20','All\x20bots\x20running\x20right\x20now','/status\x20-\x20show\x20bot(s)\x20status\x0a','Bot\x20','temporaryAccessAllowed','whitelist','2FA\x20login\x20required','username','settings','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','getStartingBalances','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','status','store-settings','/:bot/configuration','reason','stopPolling','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','index.html','/:bot/performance','once','All','showname','/restart\x20-\x20restart\x20bot(s)\x0a','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','analytics','cancelLoading','running','set','add-bot','https://hodlerhacks.com','Ok,\x20will\x20send\x20order\x20notifications\x20only','botID','polling_error','child_process','pidRefreshToken','static','Unauthorized\x20attempt\x20to\x20log\x20out','bb-settings.json','config/','-config.json','catch','disconnect','message','getMinutes','\x20minutes','mkdirSync','length','remoteAddress','Invalid\x20authentication\x20token\x20(1)','bcryptjs','sha256','from','privateKey','Crypt','Invalid\x20username\x20or\x20IP\x20address','started','2FA\x20required','chat','headless','all','node-telegram-bot-api','enabled\x20Bot\x20','existsSync','-results.json','HTML','deleted\x20Bot\x20','Notifications\x20types:\x20','socket.io','add','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','deleteHistoryAlerts','getSeconds','-----------------------------------------------------------------------------------','allow','Unauthorized\x20attempt\x20to\x20store\x20configuration','login','placeOrder','\x20|\x20','onText','alerts','starting\x20new\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','2FA','\x20only\x0a','value','UA-192771731-1','bbUsername','connection','unlinkSync','http','starting\x20bot\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20portfolio','listen','max','bots','Ok,\x20will\x20send\x20alert\x20notifications\x20only','1686942nDoXRk','expiry','Orders','2310STCmes','split','5383120udKycs','assign','/names\x20-\x20show\x20bot\x20names\x0a','settings.','hybrid-crypto-js','ipv6','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','update-bb','success','uuid','generateKeyPairAsync','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','5\x20min','timestamp','search','pidExpireLogin','mode','stopped','enabled','Unauthorized\x20attempt\x20to\x20delete\x20bot','blacklist','2FA\x20login\x20token\x20generated','hasOwnProperty','new-disabled','disabled\x20Bot\x20','30\x20min','Unauthorized\x20attempt\x20to\x20update\x20settings','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','stop','RSA','version','host','padStart','Notifications\x20disabled','1569472yOSVEy','telegramToken','send','1653681BDlsEP','access','forEach','createServer','entries','sortBy','decrypt','idling\x20bot\x20\x20\x20|\x20Bot\x20','initclient','hex','name','Invalid\x20Telegram\x20token','log','404\x20Not\x20Found','getHours','Unauthorized\x20login\x20attempt\x20(timeout)','toggleBotMode','telegram','ipaddr.js','notification','date-fns','17142CHZCDt','cancel-loading','Allow\x20login\x20from\x20IP\x20address\x20<b>','conn','compareSync','reset-password','use','connected','type','/off\x20-\x20stop\x20bot(s)\x0a','live','bot.js','sendMessage','2FA\x20login\x20rejected','isDirectory','telegramIpApproval','/disable\x20-\x20disable\x20notifications\x0a','sockets','orders',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','telegramUsername','lowdb/adapters/FileSync','/:bot/support','apply','\x20mode','/on\x20-\x20start\x20bot(s)\x0a','find','getTime','writeFileSync','ipc','whitelistEnabled','yes','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','All\x20bots','Unauthorized\x20attempt\x20to\x20get\x20logs','default','error','/:bot/history','logged\x20out','(((.+)+)+)+$','telegramEvents','randomBytes','disabled','User\x20has\x20been\x20validated','reload','telegram2FaApproval','cloneDeep','new','env','answerCallbackQuery','stringify'];_0x200d=function(){return _0x2a1f62;};return _0x200d();}function getDisabledBots(){const _0x8cbd1a=_0x4b8015;return dbConfig[_0x8cbd1a(0x141)](_0x8cbd1a(0x1b5))[_0x8cbd1a(0x1e7)](_0x8cbd1a(0x176))[_0x8cbd1a(0x242)]({'status':_0x8cbd1a(0x221)})[_0x8cbd1a(0x1ab)]()||[];}function getBotsWithMode(){const _0x500108=_0x4b8015,_0x5bfa51=dbConfig['get'](_0x500108(0x1b5))[_0x500108(0x1e7)](_0x500108(0x176))[_0x500108(0x1ab)]()||[];return _0x5bfa51['forEach'](_0x3a4c84=>{const _0x107063=_0x500108,_0x42e6aa=configpath+'bot-'+_0x3a4c84[_0x107063(0x176)]+'-config.json',_0x43cba2=fs[_0x107063(0x195)](_0x42e6aa);if(_0x43cba2){const _0x42a33d=fs[_0x107063(0x25d)](_0x42e6aa);try{const _0x242e81=JSON[_0x107063(0x275)](_0x42a33d),_0x9ea70e=_0x242e81?_0x242e81['bot'][0x0][_0x107063(0x191)]:![];_0x3a4c84['mode']=_0x9ea70e?'auto':_0x107063(0x273);}catch(_0x207cd9){_0x3a4c84[_0x107063(0x1cc)]=_0x107063(0x273);}}else _0x3a4c84[_0x107063(0x1cc)]=_0x107063(0x273);}),_0x5bfa51;}function getSettings(){const _0x171d5b=_0x4b8015;return dbSettings[_0x171d5b(0x141)](_0x171d5b(0x15e))[_0x171d5b(0x1ab)]()||{'timeshift':0x0};}function getSecure(){const _0x543056=_0x4b8015;return dbSecure['get'](_0x543056(0x149))['value']()||{};}function getBlacklist(){const _0x5755af=_0x4b8015;return dbSecure['get'](_0x5755af(0x1d0))[_0x5755af(0x1ab)]()||[];}function broadcastToBots(_0x241f6f,_0x2c5ae9){const _0x31e959=_0x4b8015;config[_0x31e959(0x1e4)](_0x443aad=>{const _0xb7ec5d=_0x31e959;if(_0x443aad['status']==_0xb7ec5d(0x1ce)&&_0x443aad[_0xb7ec5d(0x201)]=='running'){if(pid[_0x443aad[_0xb7ec5d(0x176)]])pid[_0x443aad[_0xb7ec5d(0x176)]][_0xb7ec5d(0x1e1)]({[_0x241f6f]:_0x2c5ae9});}});}function storeSettings(_0x3e6008,_0x39f4ed=![]){const _0x224646=_0x4b8015;_0x3e6008={...settings,..._0x3e6008};if(_0x39f4ed&&_0x3e6008[_0x224646(0x24c)]!='************'&&_0x3e6008['bbPassword']!=''){const _0x374f02=crypt['decrypt'](secure['privateKey'],_0x3e6008['bbPassword'])[_0x224646(0x181)]['split']('@')[0x0],_0x18f59f=bcrypt[_0x224646(0x280)](_0x374f02,saltRounds);_0x3e6008={..._0x3e6008,'bbPassword':_0x18f59f};}if(_0x39f4ed&&_0x3e6008[_0x224646(0x1e0)]!=_0x224646(0x22b)&&_0x3e6008[_0x224646(0x1e0)]!=''){const _0x329b11=crypt['decrypt'](secure['privateKey'],_0x3e6008['telegramToken'])[_0x224646(0x181)][_0x224646(0x1bb)]('@')[0x0];_0x3e6008={..._0x3e6008,'telegramToken':_0x329b11};}const _0x32c837=_0x3e6008[_0x224646(0x1e0)]!=_0x224646(0x22b)&&_0x3e6008[_0x224646(0x1e0)]!=settings[_0x224646(0x1e0)]||_0x3e6008[_0x224646(0x20b)]!=settings['telegramUsername'],_0xeabe27=_0x3e6008[_0x224646(0x1e0)]==''||_0x3e6008[_0x224646(0x20b)]=='';if(_0x32c837)_0x3e6008['telegramEvents']='all';for(const [_0x38195b,_0x3fb99b]of Object[_0x224646(0x1e6)](_0x3e6008)){if(_0x38195b=='telegramToken'&&_0x3fb99b==_0x224646(0x22b)){_0x3e6008[_0x224646(0x1e0)]=settings['telegramToken'];continue;};if(_0x38195b=='bbPassword'&&_0x3fb99b=='************'){_0x3e6008[_0x224646(0x24c)]=settings['bbPassword'];continue;};dbSettings[_0x224646(0x172)](_0x224646(0x1bf)+_0x38195b,_0x3fb99b)[_0x224646(0x244)]();}settings=_0x3e6008,io['to'](_0x224646(0x239))[_0x224646(0x24a)](_0x224646(0x15e),cleanSettings()),broadcastToBots(_0x224646(0x233),settings['timeshift']);if(_0x32c837&&!_0xeabe27)initTelegram();if(_0x32c837&&_0xeabe27)disableTelegram();getAllClients()[_0x224646(0x1e4)](_0x1e3f1b=>{const _0x15bb2a=_0x224646;getSocket(_0x1e3f1b['id'])[_0x15bb2a(0x24a)](_0x15bb2a(0x162),{'access':{'allow':![],'reason':_0x15bb2a(0x223),'token':null}});});}function updateSetting(_0x5a9b10,_0x83caa1){const _0x1500ba=_0x4b8015;dbSettings['set'](_0x1500ba(0x1bf)+_0x5a9b10,_0x83caa1)['write'](),settings=getSettings(),io['to'](_0x1500ba(0x239))['emit'](_0x1500ba(0x15e),cleanSettings());}function storeSecure(_0x89ef1b){const _0x47e460=_0x4b8015;dbSecure[_0x47e460(0x141)]('secure')[_0x47e460(0x262)](_0x89ef1b)['write'](),secure=_0x89ef1b;}function addBlacklist(_0x372b9e){const _0x7cb45f=_0x4b8015;cleanBlacklist();let _0x29a6ae;devices[_0x372b9e][_0x7cb45f(0x206)]?_0x29a6ae=Math[_0x7cb45f(0x1b4)](devices[_0x372b9e][_0x7cb45f(0x206)][_0x7cb45f(0x1b8)],loginExpiry):_0x29a6ae=loginExpiry,dbSecure[_0x7cb45f(0x141)](_0x7cb45f(0x1d0))['push']({'expiry':new Date()[_0x7cb45f(0x212)]()+_0x29a6ae*0x3c*0x3e8,'token':devices[_0x372b9e][_0x7cb45f(0x1e3)][_0x7cb45f(0x27d)]})['write'](),blacklist=dbSecure[_0x7cb45f(0x141)](_0x7cb45f(0x1d0))[_0x7cb45f(0x1ab)]();}function cleanBlacklist(){const _0x5e75a0=_0x4b8015;let _0x1ca67f=dbSecure['get'](_0x5e75a0(0x1d0))[_0x5e75a0(0x225)]()[_0x5e75a0(0x1ab)](),_0x4f3dbe=new Date()[_0x5e75a0(0x212)]();_0x1ca67f[_0x5e75a0(0x1e4)](_0x898dda=>{const _0x5d961f=_0x5e75a0;_0x898dda['expiry']<_0x4f3dbe&&dbSecure['get'](_0x5d961f(0x1d0))[_0x5d961f(0x27c)]({'expiry':_0x898dda[_0x5d961f(0x1b8)]})[_0x5d961f(0x244)]();});}function initStates(){const _0x4fa47e=_0x4b8015;let _0x5d8b7c=getConfiguration();_0x5d8b7c[_0x4fa47e(0x1e4)](_0xb3d373=>{const _0x242e9e=_0x4fa47e;_0xb3d373[_0x242e9e(0x201)]=_0x242e9e(0x1cd);}),storeConfiguration(_0x5d8b7c);}function onKeys(){const _0x26f259=new RSA();return new Promise(_0x294aab=>{const _0x4736fa=_0x260c;_0x26f259[_0x4736fa(0x1c6)]()[_0x4736fa(0x286)](_0x5d71ba=>{_0x294aab(_0x5d71ba);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2d2026=_0x4b8015;let _0x48b482=getConfiguration(),_0x24587b=![];_0x48b482[_0x2d2026(0x1e4)](_0xf531fe=>{const _0x596b69=_0x2d2026;if(_0xf531fe[_0x596b69(0x162)]==_0x596b69(0x171))_0xf531fe[_0x596b69(0x162)]='enabled',_0x24587b=!![];else _0xf531fe['status']==_0x596b69(0x1cd)&&(_0xf531fe[_0x596b69(0x162)]=_0x596b69(0x221),_0x24587b=!![]);});if(_0x24587b)storeConfiguration(_0x48b482);let _0x1ca476=getSecure();if(!_0x1ca476[_0x2d2026(0x1d2)](_0x2d2026(0x140))){let _0x1432da=await generateKeys();_0x1ca476[_0x2d2026(0x14b)]=_0x1432da[_0x2d2026(0x14b)],_0x1ca476['privateKey']=_0x1432da[_0x2d2026(0x18b)],_0x1ca476[_0x2d2026(0x140)]=crypto[_0x2d2026(0x220)](0x20)[_0x2d2026(0x28c)](_0x2d2026(0x1eb));;storeSecure(_0x1ca476);}let _0xa5baf=getSettings();_0x24587b=![];!_0xa5baf[_0x2d2026(0x1d2)](_0x2d2026(0x288))&&(_0xa5baf[_0x2d2026(0x288)]=![],_0xa5baf[_0x2d2026(0x1ad)]='',_0xa5baf[_0x2d2026(0x24c)]='',_0xa5baf[_0x2d2026(0x26a)]=![],_0x24587b=!![]);!_0xa5baf[_0x2d2026(0x1d2)]('whitelistEnabled')&&(_0xa5baf[_0x2d2026(0x215)]=![],_0xa5baf[_0x2d2026(0x15b)]=[],_0xa5baf[_0x2d2026(0x15a)]=![],_0x24587b=!![]);if(!_0xa5baf[_0x2d2026(0x1d2)](_0x2d2026(0x23a))){if(_0xa5baf[_0x2d2026(0x236)])_0xa5baf[_0x2d2026(0x23a)]=!![];else _0xa5baf[_0x2d2026(0x23a)]=![];_0x24587b=!![];}if(_0x24587b)storeSettings(_0xa5baf);}function storeConfiguration(_0x12ccb6){const _0x53f741=_0x4b8015;dbConfig[_0x53f741(0x141)](_0x53f741(0x1b5))['remove']()[_0x53f741(0x244)](),_0x12ccb6[_0x53f741(0x1e4)](_0x1866c5=>{const _0x424fc2=_0x53f741;delete _0x1866c5[_0x424fc2(0x1cc)];}),dbConfig[_0x53f741(0x141)]('bots')[_0x53f741(0x262)](..._0x12ccb6)['write'](),config=_0x12ccb6;}function resetPassword(){const _0x39bfe9=_0x4b8015;tgBot&&settings['telegramChatId']&&(tgBot['removeListener']('callback_query'),tgBot[_0x39bfe9(0x203)](settings[_0x39bfe9(0x236)],_0x39bfe9(0x1d8),{'parse_mode':_0x39bfe9(0x197),'reply_markup':{'inline_keyboard':[[{'text':_0x39bfe9(0x216),'callback_data':_0x39bfe9(0x216)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1126f4=>{telegramError(_0x1126f4);}),tgBot['on'](_0x39bfe9(0x249),async _0x18d3d3=>{const _0x5f0639=_0x39bfe9,_0x3c4eea=_0x18d3d3[_0x5f0639(0x238)],_0xb17be7=_0x18d3d3['message'];tgBot['answerCallbackQuery'](_0x18d3d3['id'])[_0x5f0639(0x286)](async()=>{const _0x2bee8b=_0x5f0639;if(_0x3c4eea!='no'){const _0x1fc3d8=0xf,_0x2835e3='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x565e81=Array['from'](crypto[_0x2bee8b(0x283)](new Uint32Array(_0x1fc3d8)))[_0x2bee8b(0x279)](_0x2aa8b0=>_0x2835e3[_0x2aa8b0%_0x2835e3[_0x2bee8b(0x185)]])['join'](''),_0x45e30f=bcrypt['hashSync'](_0x565e81,saltRounds);storeSettings({'bbPassword':_0x45e30f}),await tgBot['sendMessage'](_0xb17be7['chat']['id'],_0x2bee8b(0x23f)+_0x565e81,{'parse_mode':_0x2bee8b(0x197)})['catch'](_0x6c10c0=>{telegramError(_0x6c10c0);});}else await tgBot[_0x2bee8b(0x203)](_0xb17be7[_0x2bee8b(0x190)]['id'],'Password\x20reset\x20rejected')[_0x2bee8b(0x17f)](_0x50c070=>{telegramError(_0x50c070);});}),tgBot[_0x5f0639(0x257)]('callback_query');}));}function logging(_0x267701){const _0x11985b=_0x4b8015;console[_0x11985b(0x1ee)](getTimeStamp()+_0x11985b(0x240)+_0x267701);if(tgBot&&settings[_0x11985b(0x236)]&&settings[_0x11985b(0x21f)]!=_0x11985b(0x209))tgBot[_0x11985b(0x203)](settings['telegramChatId'],_0x11985b(0x246)+_0x267701)['catch'](_0x4022cf=>{telegramError(_0x4022cf);});}function getServerTime(){const _0x59a1bf=_0x4b8015,_0xe90502=new Date();return _0xe90502[_0x59a1bf(0x26f)]()+'/'+(_0xe90502['getMonth']()+0x1)['toString']()[_0x59a1bf(0x1dd)](0x2,'0')+'/'+_0xe90502[_0x59a1bf(0x24b)]()[_0x59a1bf(0x28c)]()[_0x59a1bf(0x1dd)](0x2,'0')+'\x20'+_0xe90502[_0x59a1bf(0x1f0)]()[_0x59a1bf(0x28c)]()[_0x59a1bf(0x1dd)](0x2,'0')+':'+_0xe90502['getMinutes']()[_0x59a1bf(0x28c)]()[_0x59a1bf(0x1dd)](0x2,'0')+':'+_0xe90502[_0x59a1bf(0x19e)]()['toString']()[_0x59a1bf(0x1dd)](0x2,'0');}function getTimeStamp(){const _0x590c3b=_0x4b8015,_0x16ed0d=shiftedTime();return _0x16ed0d[_0x590c3b(0x26f)]()+'/'+(_0x16ed0d['getMonth']()+0x1)[_0x590c3b(0x28c)]()['padStart'](0x2,'0')+'/'+_0x16ed0d['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x16ed0d[_0x590c3b(0x1f0)]()['toString']()[_0x590c3b(0x1dd)](0x2,'0')+':'+_0x16ed0d[_0x590c3b(0x182)]()[_0x590c3b(0x28c)]()[_0x590c3b(0x1dd)](0x2,'0')+':'+_0x16ed0d['getSeconds']()[_0x590c3b(0x28c)]()[_0x590c3b(0x1dd)](0x2,'0');}function shiftedTime(){const _0x77107e=_0x4b8015,_0x42c631=new Date();let _0x7f950f=_0x42c631;if(settings[_0x77107e(0x233)]&&settings[_0x77107e(0x233)]!==0x0)_0x7f950f=fns[_0x77107e(0x19b)](_0x42c631,{'hours':settings[_0x77107e(0x233)]});return _0x7f950f;}function startScheduler(){const _0x53f5f1=_0x4b8015;let _0x217668=new Date()[_0x53f5f1(0x241)]();_0x217668==0x1&&backupConfigFiles();_0x217668==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3b883f=_0x4b8015;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3b883f(0x1e4)](_0x18940b=>{const _0x577be0=_0x3b883f;if(!_0x18940b[_0x577be0(0x205)]())fs['copyFileSync'](configpath+_0x18940b[_0x577be0(0x1ec)],configbackuppath+_0x18940b['name']);});}function triggerAnalytics(){const _0x17374a=_0x4b8015;analytics[_0x17374a(0x247)]({'title':'Balance\x20Bot\x20Server','href':_0x17374a(0x174),'path':'/v'+serverversion});}function validateCredentials(_0x104d32,_0xf198b2){const _0x1c394f=_0x4b8015;if(_0x104d32[_0x1c394f(0x15d)]==settings[_0x1c394f(0x1ad)]&&bcrypt[_0x1c394f(0x1fb)](_0x104d32['password'],settings[_0x1c394f(0x24c)])){if(settings[_0x1c394f(0x26a)])return{'allow':![],'reason':_0x1c394f(0x15c),'token':null};else{const _0x121cce=generateLoginToken(_0xf198b2);return{'allow':!![],'reason':_0x1c394f(0x14d),'token':_0x121cce};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x9d20bb){const _0x547c92=_0x4b8015,_0x343a5f=generateLoginToken(_0x9d20bb);return{'allow':!![],'reason':_0x547c92(0x14d),'token':_0x343a5f};}function validateAccess(_0x1c1780,_0x25236b){const _0x231666=_0x4b8015;let _0x32a99b=devices[_0x25236b]['ip'],_0x374fa8;const _0x13e441=_0x15fb26=>{const _0x48c6d2=_0x260c;if(settings['loginRequired']){if(settings[_0x48c6d2(0x26a)]){if(telegram2FaApproved(_0x25236b)){const _0x2359ba=generateLoginToken(_0x25236b);return{'allow':!![],'reason':_0x48c6d2(0x1d1),'token':_0x2359ba};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x374fa8=validToken(_0x15fb26,_0x25236b),_0x374fa8[_0x48c6d2(0x1d2)](_0x48c6d2(0x1c4))?{'allow':!![],'reason':_0x48c6d2(0x27e),'token':_0x15fb26}:{'allow':![],'reason':_0x48c6d2(0x259),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x231666(0x215)]){let _0x1b6bbc=[...settings['whitelist'],_0x231666(0x142),_0x231666(0x26b),'127.0.0.1'];if(_0x1b6bbc[_0x231666(0x22f)](_0x32a99b))return _0x13e441(_0x1c1780);else{_0x374fa8=validToken(_0x1c1780,_0x25236b);if(_0x374fa8['hasOwnProperty'](_0x231666(0x1c4)))return _0x13e441(_0x1c1780);else{if(telegramIpApproved(_0x25236b)){const _0x874e0e=generateToken(_0x25236b);return _0x374fa8=_0x13e441(_0x1c1780),_0x374fa8[_0x231666(0x1a0)]?{'allow':!![],'reason':_0x231666(0x274),'token':_0x874e0e}:_0x374fa8;}else return settings[_0x231666(0x15a)]?{'allow':![],'reason':_0x231666(0x18f),'token':null}:{'allow':![],'reason':_0x231666(0x277),'token':null};}}}else return _0x13e441(_0x1c1780);}function timelyDecrypt(_0xb09950,_0x5076de=!![]){const _0x7f0174=_0x4b8015;if(_0xb09950)try{const _0x4ea0fb=crypt[_0x7f0174(0x1e8)](secure[_0x7f0174(0x18b)],_0xb09950)[_0x7f0174(0x181)],_0x3fd313=_0x4ea0fb[_0x7f0174(0x1bb)]('@')[0x0],_0x1e41bb=_0x4ea0fb[_0x7f0174(0x1bb)]('@')[0x1],_0x509551=new Date()[_0x7f0174(0x212)]();if(_0x5076de){if(_0x509551-_0x1e41bb<maxSecretAge*0x3e8)return _0x3fd313;else return![];}else return _0x3fd313;}catch(_0x2cd3fb){return![];}else return![];}const validToken=(_0x46a638,_0x3a0b5f)=>{const _0xcda97d=_0x4b8015,_0x589deb=devices[_0x3a0b5f]['ip'];if(!_0x46a638)return{'error':'No\x20authentication\x20token'};for(let _0x1e9ff6 of blacklist){if(_0x1e9ff6[_0xcda97d(0x27d)]==_0x46a638)return{'error':_0xcda97d(0x272)};}let _0x589bdb;try{_0x589bdb=jwt['verify'](_0x46a638,secure['secret']+_0x3a0b5f);}catch{return{'error':_0xcda97d(0x187)};}if(!_0x589bdb[_0xcda97d(0x1d2)](_0xcda97d(0x281))&&!_0x589bdb[_0xcda97d(0x1d2)](_0xcda97d(0x15d))||!_0x589bdb[_0xcda97d(0x1d2)](_0xcda97d(0x22a)))return{'error':_0xcda97d(0x13f)};if(!_0x589bdb['hasOwnProperty']('username')&&_0x589bdb[_0xcda97d(0x1d2)](_0xcda97d(0x281))){const {clientip:_0x2ebe00}=_0x589bdb;return _0x589deb==_0x2ebe00?{'success':_0xcda97d(0x222)}:{'error':_0xcda97d(0x232)};}else{if(_0x589bdb[_0xcda97d(0x1d2)]('username')&&_0x589bdb['hasOwnProperty']('clientip')){const {username:_0x3433f1,clientip:_0x38d494}=_0x589bdb;return settings[_0xcda97d(0x1ad)]==_0x3433f1&&_0x589deb==_0x38d494?{'success':'User\x20has\x20been\x20validated'}:{'error':_0xcda97d(0x18d)};}}},generateLoginToken=_0x5d2e57=>{const _0x42c400=_0x4b8015;if(_0x5d2e57){const _0x299197=devices[_0x5d2e57]['ip'];return jwt[_0x42c400(0x276)]({'username':settings['bbUsername'],'clientip':_0x299197},secure[_0x42c400(0x140)]+_0x5d2e57,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x24a5d6=>{const _0x383b1e=_0x4b8015;if(_0x24a5d6){const _0x3ac2e1=devices[_0x24a5d6]['ip'];return jwt[_0x383b1e(0x276)]({'clientip':_0x3ac2e1},secure[_0x383b1e(0x140)]+_0x24a5d6,{'expiresIn':devices[_0x24a5d6][_0x383b1e(0x206)][_0x383b1e(0x1b8)]*0x3c});}else return![];},telegramIpApproved=_0x242be1=>{const _0x17552b=_0x4b8015;let _0x59c5c4=![];return devices[_0x242be1][_0x17552b(0x206)]&&devices[_0x242be1][_0x17552b(0x206)][_0x17552b(0x1b8)]!=_0x17552b(0x289)&&(_0x59c5c4=devices[_0x242be1][_0x17552b(0x206)][_0x17552b(0x281)]==devices[_0x242be1]['ip']&&new Date()[_0x17552b(0x212)]()-devices[_0x242be1]['telegramIpApproval']['timestamp']<devices[_0x242be1][_0x17552b(0x206)][_0x17552b(0x1b8)]*0x3c*0x3e8),_0x59c5c4;},telegram2FaApproved=_0x32cc98=>{const _0x3c0b06=_0x4b8015;let _0x5520c3=![];return devices[_0x32cc98][_0x3c0b06(0x224)]&&devices[_0x32cc98]['telegram2FaApproval'][_0x3c0b06(0x1b8)]!=_0x3c0b06(0x289)&&(_0x5520c3=devices[_0x32cc98]['telegram2FaApproval'][_0x3c0b06(0x281)]==devices[_0x32cc98]['ip']&&new Date()['getTime']()-devices[_0x32cc98][_0x3c0b06(0x224)][_0x3c0b06(0x1c9)]<devices[_0x32cc98]['telegram2FaApproval'][_0x3c0b06(0x1b8)]*0x3c*0x3e8),_0x5520c3;},normalizeIP=_0x26f7f3=>{const _0xbfffe9=_0x4b8015;let _0x1b5f69=null,_0x2024fa=null;if(ipaddr[_0xbfffe9(0x235)](_0x26f7f3)){const _0xa131cf=ipaddr[_0xbfffe9(0x275)](_0x26f7f3);_0xa131cf['kind']()===_0xbfffe9(0x1c1)?(_0xa131cf[_0xbfffe9(0x150)]()&&(_0x1b5f69=_0xa131cf[_0xbfffe9(0x28b)]()[_0xbfffe9(0x28c)]()),_0x2024fa=_0xa131cf[_0xbfffe9(0x28c)]()):(_0x1b5f69=_0xa131cf[_0xbfffe9(0x28c)](),_0x2024fa=_0xa131cf['toIPv4MappedAddress']()[_0xbfffe9(0x28c)]());}return{'show':_0x1b5f69?_0x1b5f69:_0x2024fa,'store':_0x2024fa};};