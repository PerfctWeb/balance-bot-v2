const _0x199dd6=_0x3c3d;(function(_0x23d9cb,_0x214ad9){const _0x98bb33=_0x3c3d,_0x6bc90e=_0x23d9cb();while(!![]){try{const _0x2812af=parseInt(_0x98bb33(0x2fa))/0x1*(-parseInt(_0x98bb33(0x284))/0x2)+parseInt(_0x98bb33(0x2a2))/0x3*(-parseInt(_0x98bb33(0x1ee))/0x4)+parseInt(_0x98bb33(0x2a3))/0x5*(parseInt(_0x98bb33(0x2db))/0x6)+-parseInt(_0x98bb33(0x28b))/0x7*(parseInt(_0x98bb33(0x209))/0x8)+parseInt(_0x98bb33(0x20a))/0x9+-parseInt(_0x98bb33(0x290))/0xa*(parseInt(_0x98bb33(0x259))/0xb)+parseInt(_0x98bb33(0x312))/0xc;if(_0x2812af===_0x214ad9)break;else _0x6bc90e['push'](_0x6bc90e['shift']());}catch(_0x2ab295){_0x6bc90e['push'](_0x6bc90e['shift']());}}}(_0x206f,0x78cc9));const _0x1a2df1=function(){let _0x542f09=!![];return function(_0x1e6b49,_0x510862){const _0x46ba8a=_0x542f09?function(){const _0x1fb8fa=_0x3c3d;if(_0x510862){const _0x105173=_0x510862[_0x1fb8fa(0x196)](_0x1e6b49,arguments);return _0x510862=null,_0x105173;}}:function(){};return _0x542f09=![],_0x46ba8a;};}(),_0x619e95=_0x1a2df1(this,function(){const _0xd72656=_0x3c3d;return _0x619e95[_0xd72656(0x1e2)]()[_0xd72656(0x300)](_0xd72656(0x27f))[_0xd72656(0x1e2)]()[_0xd72656(0x2e7)](_0x619e95)['search']('(((.+)+)+)+$');});_0x619e95();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require(_0x199dd6(0x19a)),fs=require('fs'),fns=require(_0x199dd6(0x2ac)),low=require(_0x199dd6(0x247)),FileSync=require(_0x199dd6(0x2ce)),path=require(_0x199dd6(0x1a8)),crypto=require(_0x199dd6(0x276)),Crypt=require(_0x199dd6(0x1e0))[_0x199dd6(0x320)],RSA=require(_0x199dd6(0x1e0))['RSA'],bcrypt=require(_0x199dd6(0x1b9)),jwt=require(_0x199dd6(0x2e9)),ipaddr=require(_0x199dd6(0x23d)),argv=require(_0x199dd6(0x205))(process[_0x199dd6(0x2be)][_0x199dd6(0x208)](0x2))[_0x199dd6(0x2be)],uuidRandom=require(_0x199dd6(0x1bb)),TelegramBot=require(_0x199dd6(0x2e2)),Mixpanel=require(_0x199dd6(0x267)),axios=require(_0x199dd6(0x2e6)),{GraphQLClient,gql}=require(_0x199dd6(0x23a)),util=require(_0x199dd6(0x20f)),fileUpload=require(_0x199dd6(0x21c)),PORT=argv[_0x199dd6(0x1da)]||_0x199dd6(0x18e),pattern=/^[0-9]{2,4}$/;!pattern[_0x199dd6(0x324)](PORT)&&(console[_0x199dd6(0x326)](_0x199dd6(0x2df)+PORT+_0x199dd6(0x1cc)),process[_0x199dd6(0x2e5)](0x1));const HOST=argv[_0x199dd6(0x18a)]||null,userID=argv[_0x199dd6(0x1ac)]||'';let bbpath=_0x199dd6(0x1a6),bbpath2='';const botfile=_0x199dd6(0x2ad),configfile=_0x199dd6(0x1c5),settingsfile=_0x199dd6(0x1d0),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x199dd6(0x2d8)),configpath=userID?bbpath+_0x199dd6(0x306)+userID+'/':bbpath+_0x199dd6(0x306),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x199dd6(0x218)+userID+'/':bbpath+_0x199dd6(0x218),loggerfile=fs[_0x199dd6(0x28d)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x199dd6(0x272);!fs['existsSync'](configpath)&&fs[_0x199dd6(0x275)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x199dd6(0x275)](configbackuppath);!fs[_0x199dd6(0x327)](logspath)&&fs[_0x199dd6(0x275)](logspath);!fs['existsSync'](zippath)&&fs[_0x199dd6(0x275)](zippath);!fs[_0x199dd6(0x327)](temppath)&&fs[_0x199dd6(0x275)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x199dd6(0x302)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x199dd6(0x1a2)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x199dd6(0x2e0)}})[_0x199dd6(0x302)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x199dd6(0x1a2)]({'secure':{},'blacklist':[]})[_0x199dd6(0x302)]();let crypt=new Crypt({'md':_0x199dd6(0x203),'rsaStandard':_0x199dd6(0x2a1)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x199dd6(0x1c6)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x199dd6(0x1aa)]&&settings['telegramToken']!=''&&settings[_0x199dd6(0x281)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x641b53=>{const _0x344cdc=_0x199dd6;console[_0x344cdc(0x326)](_0x641b53);},'simple':_0x4867df=>{const _0x276553=_0x199dd6;console[_0x276553(0x326)](_0x4867df),loggerfile[_0x276553(0x302)](util[_0x276553(0x2ba)](_0x4867df)+'\x0a');},'full':async _0xeddfe0=>{const _0x3fe23f=_0x199dd6,_0x23bfa7=getTimeStamp()+_0x3fe23f(0x31a)+_0xeddfe0;console[_0x3fe23f(0x326)](_0x23bfa7),loggerfile['write'](util[_0x3fe23f(0x2ba)](_0x23bfa7)+'\x0a');if(tgBot&&settings[_0x3fe23f(0x2c9)]&&settings['telegramEvents']!=_0x3fe23f(0x22b))await tgBot[_0x3fe23f(0x2e3)](settings[_0x3fe23f(0x2c9)],_0x3fe23f(0x257)+_0xeddfe0)['catch'](_0x1e9cfa=>{telegramError(_0x1e9cfa);});}};process['on'](_0x199dd6(0x2ed),function(_0x7c0da7){const _0x476f73=_0x199dd6;logger[_0x476f73(0x25f)](_0x7c0da7);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x199dd6(0x26a))[_0x199dd6(0x198)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x199dd6(0x30a)),app=express(),http=require(_0x199dd6(0x29c))[_0x199dd6(0x184)](app);app[_0x199dd6(0x2a7)](fileUpload({'useTempFiles':!![]})),app[_0x199dd6(0x2b1)](_0x199dd6(0x317),async(_0x4d6903,_0x1629e0)=>{const _0x4e6988=_0x199dd6,_0x2f8661=_0x4d6903['params'][_0x4e6988(0x1d2)],_0x57fb8a=getClientsWithBotID(_0x4e6988(0x190)),_0x35ed0c=_0x4d6903[_0x4e6988(0x1cd)]['uuid'],_0x5ae62c=timelyDecrypt(_0x35ed0c,![]),_0x311e7c=_0x57fb8a[_0x4e6988(0x2bf)](_0x40e8b8=>_0x40e8b8[_0x4e6988(0x278)]==_0x5ae62c);if(_0x311e7c){const _0x38b2fa=normalizeIP(_0x4d6903['socket'][_0x4e6988(0x316)])[_0x4e6988(0x2d7)],_0x1d1e3a=_0x4d6903[_0x4e6988(0x1cd)]['tkn'];if(validateAccess(_0x1d1e3a,_0x5ae62c,_0x38b2fa)['allow'])await zipFiles(_0x2f8661),_0x1629e0[_0x4e6988(0x321)](zippath+(_0x2f8661+_0x4e6988(0x1ef)),_0x1556d9=>{const _0x27a74e=_0x4e6988;_0x1556d9&&(logger[_0x27a74e(0x2bd)]('Failed\x20to\x20download\x20'+_0x2f8661),logger[_0x27a74e(0x25f)](_0x1556d9));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2f8661+_0x4e6988(0x322));}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2f8661+_0x4e6988(0x1f1));}),app[_0x199dd6(0x2b6)]('/upload-backup',async(_0x51cc35,_0x11febe)=>{const _0x2d6d04=_0x199dd6,_0x24fa18=getClientsWithBotID(_0x2d6d04(0x190)),_0x10a3c0=_0x51cc35[_0x2d6d04(0x1cd)]['uuid'],_0x4e2e49=timelyDecrypt(_0x10a3c0,![]),_0x4124d5=_0x24fa18[_0x2d6d04(0x2bf)](_0x41015d=>_0x41015d[_0x2d6d04(0x278)]==_0x4e2e49);if(_0x4124d5){const _0x5def3e=normalizeIP(_0x51cc35[_0x2d6d04(0x313)][_0x2d6d04(0x316)])['store'],_0xdfe256=_0x51cc35[_0x2d6d04(0x1cd)][_0x2d6d04(0x310)];if(validateAccess(_0xdfe256,_0x4e2e49,_0x5def3e)[_0x2d6d04(0x215)]){if(_0x51cc35[_0x2d6d04(0x1ca)]){const _0x1ea1b9=_0x51cc35['files']['backupfile'];await _0x1ea1b9['mv'](temppath+_0x1ea1b9[_0x2d6d04(0x23b)]),_0x11febe[_0x2d6d04(0x31d)]({'status':!![],'message':_0x2d6d04(0x329)});const _0x4eeb45=getBotsWithMode();_0x4eeb45[_0x2d6d04(0x246)]>0x0?confirmRestore(temppath,_0x1ea1b9[_0x2d6d04(0x23b)]):unzipFile(temppath,_0x1ea1b9['name']);}}else logger[_0x2d6d04(0x2bd)](_0x2d6d04(0x1fe));}else logger[_0x2d6d04(0x2bd)](_0x2d6d04(0x268));}),app[_0x199dd6(0x2a7)](express['static'](path[_0x199dd6(0x2c6)](__dirname,bbpath2,_0x199dd6(0x32c)))),app['use'](express[_0x199dd6(0x2fb)](path['join'](__dirname,bbpath2,_0x199dd6(0x27d)))),app[_0x199dd6(0x2b1)]('/',function(_0x14e81f,_0x2bc3f3){const _0x129eeb=_0x199dd6;_0x2bc3f3[_0x129eeb(0x1e5)](path['join'](__dirname,bbpath2,_0x129eeb(0x32c),_0x129eeb(0x2b8)));}),app[_0x199dd6(0x2b1)](_0x199dd6(0x202),function(_0x251956,_0x6345bc){const _0x3870dc=_0x199dd6;_0x6345bc[_0x3870dc(0x1e5)](path[_0x3870dc(0x2c6)](__dirname,bbpath2,_0x3870dc(0x27d),_0x3870dc(0x2b8)));}),app['get']('/:bot/portfolio',(_0x5610ef,_0x39a486)=>{const _0x6ddfee=_0x199dd6;_0x39a486[_0x6ddfee(0x1e5)](path[_0x6ddfee(0x2c6)](__dirname,bbpath2,_0x6ddfee(0x27d),'index.html'));}),app[_0x199dd6(0x2b1)]('/:bot/performance',(_0x3b252a,_0x5f14bb)=>{const _0x50659d=_0x199dd6;_0x5f14bb[_0x50659d(0x1e5)](path[_0x50659d(0x2c6)](__dirname,bbpath2,'build',_0x50659d(0x2b8)));}),app[_0x199dd6(0x2b1)](_0x199dd6(0x24a),(_0x1fc656,_0x166a6f)=>{const _0x8da267=_0x199dd6;_0x166a6f[_0x8da267(0x1e5)](path[_0x8da267(0x2c6)](__dirname,bbpath2,_0x8da267(0x27d),_0x8da267(0x2b8)));}),app[_0x199dd6(0x2b1)](_0x199dd6(0x273),(_0x13b584,_0x7d73e6)=>{const _0x3f5d08=_0x199dd6;_0x7d73e6[_0x3f5d08(0x1e5)](path[_0x3f5d08(0x2c6)](__dirname,bbpath2,_0x3f5d08(0x27d),'index.html'));}),app[_0x199dd6(0x2b1)](_0x199dd6(0x301),(_0x46d431,_0x102881)=>{const _0x45ee54=_0x199dd6;_0x102881[_0x45ee54(0x1e5)](path[_0x45ee54(0x2c6)](__dirname,bbpath2,_0x45ee54(0x27d),'index.html'));}),app['get'](_0x199dd6(0x307),(_0x859ee4,_0x3324f4)=>{const _0x5cfc22=_0x199dd6;_0x3324f4[_0x5cfc22(0x1e5)](path['join'](__dirname,bbpath2,_0x5cfc22(0x27d),_0x5cfc22(0x2b8)));});if(HOST)http[_0x199dd6(0x234)](PORT,HOST);else http['listen'](PORT);const io=require(_0x199dd6(0x318))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x3034f8=_0x199dd6;logger['simple'](''),logger['simple'](_0x3034f8(0x230)),await logger[_0x3034f8(0x2bd)](_0x3034f8(0x303)+PORT),logger[_0x3034f8(0x25f)](_0x3034f8(0x230));if(config[_0x3034f8(0x246)]!=0x0)for(const _0x356a34 of config){if(_0x356a34['status']=='enabled'||_0x356a34['status']==_0x3034f8(0x2dc))await logger[_0x3034f8(0x2bd)](_0x3034f8(0x2ec)+_0x356a34[_0x3034f8(0x1fd)]+_0x3034f8(0x182)+_0x356a34[_0x3034f8(0x227)]),startBot([_0x356a34[_0x3034f8(0x1fd)],userID],{'cwd':bbpath},function(_0x44aefd){const _0x27d0b0=_0x3034f8;if(_0x44aefd)logger[_0x27d0b0(0x2bd)](_0x44aefd);});else(_0x356a34[_0x3034f8(0x1de)]==_0x3034f8(0x1a9)||_0x356a34[_0x3034f8(0x1de)]==_0x3034f8(0x25d))&&await logger[_0x3034f8(0x2bd)](_0x3034f8(0x1f4)+_0x356a34['botID']+_0x3034f8(0x182)+_0x356a34[_0x3034f8(0x227)]);}else!newBot&&logger[_0x3034f8(0x25f)](_0x3034f8(0x24b));if(newBot)addBot();logger[_0x3034f8(0x25f)](_0x3034f8(0x230)),logger[_0x3034f8(0x25f)]('');}function startSocket(){const _0x70fd1=_0x199dd6;io['on'](_0x70fd1(0x235),_0x93bbf8=>{const _0xdc5c20=_0x70fd1;let _0x44e469,_0x4661f8,_0x210781,_0x208fb8,_0xd2cab8;const _0x450dc8=_0x93bbf8[_0xdc5c20(0x304)][_0xdc5c20(0x1cd)][_0xdc5c20(0x1c3)];_0x4661f8=_0x450dc8[_0xdc5c20(0x250)](/bot[0-9]{3}/);if(_0x4661f8)_0x210781=_0x4661f8[0x0]['match'](/[0-9]{3}/);if(_0x210781)_0x44e469=_0x210781[0x0];else _0x44e469='botmanager';const _0x45fdad=_0x93bbf8[_0xdc5c20(0x304)][_0xdc5c20(0x2d4)]['encryptedUuid'];if(!_0x45fdad)_0x93bbf8[_0xdc5c20(0x2a9)](_0xdc5c20(0x1de),{'publicKey':secure[_0xdc5c20(0x305)]});else{_0x208fb8=timelyDecrypt(_0x45fdad,![]);if(!_0x208fb8)_0x93bbf8[_0xdc5c20(0x2a9)](_0xdc5c20(0x1de),{'publicKey':secure[_0xdc5c20(0x305)]});else{_0xd2cab8=normalizeIP(_0x93bbf8[_0xdc5c20(0x210)][_0xdc5c20(0x316)])[_0xdc5c20(0x2d7)];if(!devices[_0x208fb8])devices[_0x208fb8]={'uuid':_0x208fb8,'access':{'token':null}};devices[_0x208fb8]['ip']=_0xd2cab8;const _0x861f0e=addClient(_0x93bbf8['id'],_0x208fb8,_0x44e469);setAccess(_0x861f0e),emitMessages(),_0x93bbf8['on'](_0xdc5c20(0x199),_0x5c24f2=>{const _0x7c6918=_0xdc5c20,_0x194ded=timelyDecrypt(_0x5c24f2['password']);if(_0x194ded){_0x5c24f2={'username':_0x5c24f2['username'],'password':_0x194ded},devices[_0x208fb8]['access']=validateCredentials(_0x5c24f2,_0x208fb8);if(devices[_0x208fb8]['access'][_0x7c6918(0x215)]==![]&&devices[_0x208fb8][_0x7c6918(0x22e)][_0x7c6918(0x186)]=='2FA\x20login\x20required')_0x93bbf8[_0x7c6918(0x2a9)]('status',{'access':devices[_0x208fb8][_0x7c6918(0x22e)]}),loginAccess2FA(_0x208fb8,_0xd2cab8);else{if(devices[_0x208fb8][_0x7c6918(0x22e)]['allow']==![]&&devices[_0x208fb8][_0x7c6918(0x22e)]['reason']=='invalid\x20credentials')_0x93bbf8[_0x7c6918(0x2a9)]('status',{'access':devices[_0x208fb8]['access']});else devices[_0x208fb8]['access'][_0x7c6918(0x215)]&&devices[_0x208fb8]['access'][_0x7c6918(0x186)]==_0x7c6918(0x2e4)&&(getClientsWithUuid(_0x208fb8)[_0x7c6918(0x29b)](_0x2449b3=>{setAccess(_0x2449b3);}),setTokenRefresh(_0x208fb8),setSessionTimeout(_0x7c6918(0x199),_0x208fb8));}}else logger[_0x7c6918(0x2bd)](_0x7c6918(0x2d2));}),_0x93bbf8['on'](_0xdc5c20(0x1e8),()=>{resetPassword();}),_0x93bbf8['on'](_0xdc5c20(0x2b4),_0x5ad37b=>{removeClient(_0x93bbf8['id']);}),_0x44e469=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x46f676){const _0x397931=_0x199dd6;if(_0x46f676!=_0x397931(0x190)&&config[_0x397931(0x314)]!=''){if(pid[_0x46f676])pid[_0x46f676]['send']({'function':_0x397931(0x1bd),'args':null});}}function reloadBotManager(){const _0x5b84ab=_0x199dd6;getClientsWithBotID(_0x5b84ab(0x190))['forEach'](_0x3ad043=>{const _0x2867cd=_0x5b84ab;getSocket(_0x3ad043['id'])['emit'](_0x2867cd(0x1de),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x27cf87){const _0x438403=_0x199dd6;return io[_0x438403(0x1e4)][_0x438403(0x1e4)][_0x438403(0x2b1)](_0x27cf87);}function setAccess(_0x36148b){const _0x34605f=_0x199dd6,_0x33db0e=getSocket(_0x36148b['id']),_0x3c12f7=_0x36148b[_0x34605f(0x278)],_0x5e6f5a=_0x36148b[_0x34605f(0x1fa)];devices[_0x3c12f7][_0x34605f(0x22e)]=validateAccess(devices[_0x3c12f7][_0x34605f(0x22e)][_0x34605f(0x271)],_0x3c12f7),_0x33db0e[_0x34605f(0x2c6)](_0x3c12f7);if(devices[_0x3c12f7][_0x34605f(0x22e)][_0x34605f(0x215)]){_0x33db0e[_0x34605f(0x2c6)](_0x5e6f5a);if(_0x5e6f5a=='botmanager')initializeSocketBotManager(_0x33db0e);else initializeSocketBot(_0x33db0e);initClient(_0x5e6f5a);}devices[_0x3c12f7][_0x34605f(0x22e)][_0x34605f(0x271)]&&devices[_0x3c12f7]['access'][_0x34605f(0x186)]==_0x34605f(0x325)&&setSessionTimeout('2FA',_0x3c12f7),devices[_0x3c12f7][_0x34605f(0x22e)][_0x34605f(0x271)]&&devices[_0x3c12f7][_0x34605f(0x22e)]['reason']==_0x34605f(0x262)&&setSessionTimeout(_0x34605f(0x199),_0x3c12f7),_0x33db0e[_0x34605f(0x2a9)](_0x34605f(0x1de),{'status':_0x36148b['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3c12f7]['access'],'externalip':devices[_0x3c12f7]['ip'],'publicKey':secure[_0x34605f(0x305)],'userid':settings[_0x34605f(0x2ee)],'validInstallation':validInstallation}),devices[_0x3c12f7]['access'][_0x34605f(0x215)]==![]&&devices[_0x3c12f7]['access'][_0x34605f(0x186)]==_0x34605f(0x1ad)&&temporaryAccess2FA(_0x3c12f7,devices[_0x3c12f7]['ip']);}function setSessionTimeout(_0x4269b2,_0xae7bb4){const _0x3d88be=_0x199dd6;let _0x1b01fb;if(_0x4269b2==_0x3d88be(0x199))_0x1b01fb=loginExpiry*0x3c*0x3e8;else _0x1b01fb=devices[_0xae7bb4][_0x3d88be(0x1be)][_0x3d88be(0x24c)]*0x3c*0x3e8-(new Date()[_0x3d88be(0x18b)]()-devices[_0xae7bb4][_0x3d88be(0x1be)][_0x3d88be(0x32f)]);if(devices[_0xae7bb4][_0x3d88be(0x1ff)])clearTimeout(devices[_0xae7bb4][_0x3d88be(0x1ff)]);devices[_0xae7bb4]['pidExpireLogin']=setTimeout(()=>{const _0x3753b9=_0x3d88be;if(devices[_0xae7bb4][_0x3753b9(0x287)])clearTimeout(devices[_0xae7bb4]['pidRefreshToken']);removeSocketListeners(_0xae7bb4),addBlacklist(_0xae7bb4),devices[_0xae7bb4]['telegramIpApproval']=null,devices[_0xae7bb4][_0x3753b9(0x22d)]=null,devices[_0xae7bb4][_0x3753b9(0x22e)][_0x3753b9(0x271)]=null,devices[_0xae7bb4]['access']=validateAccess(devices[_0xae7bb4][_0x3753b9(0x22e)][_0x3753b9(0x271)],_0xae7bb4),!(devices[_0xae7bb4][_0x3753b9(0x22e)]['allow']&&devices[_0xae7bb4][_0x3753b9(0x22e)][_0x3753b9(0x186)]==_0x3753b9(0x2f5))&&(_0x4269b2=='login'?io['to'](_0xae7bb4)[_0x3753b9(0x2a9)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0xae7bb4)['emit'](_0x3753b9(0x1de),{'access':{'allow':![],'reason':_0x3753b9(0x1df),'token':null}})),devices[_0xae7bb4]['access'][_0x3753b9(0x271)]=null;},_0x1b01fb);}function setTokenRefresh(_0x108092){const _0x19a6e3=_0x199dd6;if(devices[_0x108092]['pidRefreshToken'])clearTimeout(devices[_0x108092][_0x19a6e3(0x287)]);devices[_0x108092]['pidRefreshToken']=setTimeout(()=>{const _0x192178=_0x19a6e3;getClientsWithUuid(_0x108092)[_0x192178(0x246)]!=0x0?(devices[_0x108092][_0x192178(0x22e)]=refreshToken(_0x108092),io['to'](_0x108092)[_0x192178(0x2a9)](_0x192178(0x1de),{'status':_0x192178(0x27e),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x108092][_0x192178(0x22e)],'externalip':devices[_0x108092]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x108092)):clearTimeout(devices[_0x108092][_0x192178(0x287)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x59ab09){const _0x4b666e=_0x199dd6,_0x3b7dc2=getClient(_0x59ab09['id'])[_0x4b666e(0x278)];_0x59ab09[_0x4b666e(0x2a9)](_0x4b666e(0x296),config),_0x59ab09['emit']('settings',cleanSettings()),_0x59ab09['on']('add-bot',_0x160d0b=>{const _0x1f466f=_0x4b666e;if(validateAccess(_0x160d0b,_0x3b7dc2)[_0x1f466f(0x215)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x59ab09['on'](_0x4b666e(0x23e),(_0x1b2f88,_0x34a825)=>{const _0x4fe80c=_0x4b666e;if(validateAccess(_0x34a825,_0x3b7dc2)[_0x4fe80c(0x215)])toggleBot(_0x1b2f88[_0x4fe80c(0x1fd)],_0x1b2f88[_0x4fe80c(0x1de)],_0x1b2f88[_0x4fe80c(0x200)]);else logger[_0x4fe80c(0x2bd)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x59ab09['on'](_0x4b666e(0x25a),(_0x382410,_0x231569)=>{const _0x5596d8=_0x4b666e;if(validateAccess(_0x231569,_0x3b7dc2)['allow'])toggleBotMode(_0x382410);else logger[_0x5596d8(0x2bd)](_0x5596d8(0x292));}),_0x59ab09['on']('delete-bot',(_0x3b1575,_0x28bd5e)=>{const _0x5dab35=_0x4b666e;if(validateAccess(_0x28bd5e,_0x3b7dc2)[_0x5dab35(0x215)])deleteBot(_0x3b1575);else logger[_0x5dab35(0x2bd)](_0x5dab35(0x1af));}),_0x59ab09['on']('store-settings',(_0x123337,_0x1caf7d)=>{const _0x1d0664=_0x4b666e;if(validateAccess(_0x1caf7d,_0x3b7dc2)[_0x1d0664(0x215)])storeSettings(_0x123337,!![]);else logger[_0x1d0664(0x2bd)](_0x1d0664(0x2f4));}),_0x59ab09['on'](_0x4b666e(0x254),_0x53b5db=>{const _0xb5d395=_0x4b666e;if(validateAccess(_0x53b5db,_0x3b7dc2)[_0xb5d395(0x215)])updateBB();else logger[_0xb5d395(0x2bd)](_0xb5d395(0x216));}),_0x59ab09['on'](_0x4b666e(0x225),_0x549cbd=>{const _0x29cffd=_0x4b666e;if(validateAccess(_0x549cbd,_0x3b7dc2)[_0x29cffd(0x215)])getMessages();else logger[_0x29cffd(0x2bd)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x59ab09['on']('confirm-message',(_0x584f9e,_0x1b9ac0)=>{const _0x47dd06=_0x4b666e;if(validateAccess(_0x1b9ac0,_0x3b7dc2)[_0x47dd06(0x215)])confirmMessage(_0x584f9e);else logger[_0x47dd06(0x2bd)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x59ab09['on'](_0x4b666e(0x2ab),_0x4bc6cf=>{const _0x18931d=_0x4b666e;if(validateAccess(_0x4bc6cf,_0x3b7dc2)['allow']){if(devices[_0x3b7dc2][_0x18931d(0x287)])clearTimeout(devices[_0x3b7dc2][_0x18931d(0x287)]);if(devices[_0x3b7dc2][_0x18931d(0x1ff)])clearTimeout(devices[_0x3b7dc2]['pidExpireLogin']);removeSocketListeners(getClient(_0x59ab09['id'])[_0x18931d(0x278)]),addBlacklist(_0x3b7dc2),devices[_0x3b7dc2][_0x18931d(0x1be)]=null,devices[_0x3b7dc2][_0x18931d(0x22d)]=null,devices[_0x3b7dc2][_0x18931d(0x22e)]['token']=null,io['to'](getClient(_0x59ab09['id'])[_0x18931d(0x278)])[_0x18931d(0x2a9)](_0x18931d(0x1de),{'access':{'allow':![],'reason':_0x18931d(0x20c),'token':null}});}else logger[_0x18931d(0x2bd)](_0x18931d(0x221));});}function initializeSocketBot(_0x2f40ef){const _0x1163ed=_0x199dd6,_0x43566a=getClient(_0x2f40ef['id'])[_0x1163ed(0x1fa)],_0x1bc093=getClient(_0x2f40ef['id'])['uuid'];_0x2f40ef['on']('get-logs',(_0x2761fe,_0x1cd080)=>{const _0x458d67=_0x1163ed;if(validateAccess(_0x1cd080,_0x1bc093)['allow']){if(pid[_0x43566a])pid[_0x43566a][_0x458d67(0x31d)]({'function':_0x458d67(0x2c8),'args':_0x2761fe});}else logger[_0x458d67(0x2bd)](_0x458d67(0x269));}),_0x2f40ef['on'](_0x1163ed(0x2c5),(_0x13bdf0,_0x34ceec)=>{const _0x969fe0=_0x1163ed;if(validateAccess(_0x34ceec,_0x1bc093)[_0x969fe0(0x215)]){if(pid[_0x43566a])pid[_0x43566a]['send']({'function':_0x969fe0(0x255),'args':_0x13bdf0});}else logger['full'](_0x969fe0(0x2f9));}),_0x2f40ef['on'](_0x1163ed(0x19e),(_0x529b61,_0x38b560)=>{const _0x3b6e8a=_0x1163ed;if(validateAccess(_0x38b560,_0x1bc093)[_0x3b6e8a(0x215)]){if(pid[_0x43566a])pid[_0x43566a][_0x3b6e8a(0x31d)]({'function':_0x3b6e8a(0x1d5),'args':_0x529b61});}else logger[_0x3b6e8a(0x2bd)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x2f40ef['on']('store-configuration',(_0x7e96c,_0x418f8b)=>{const _0x36ce1d=_0x1163ed;if(validateAccess(_0x418f8b,_0x1bc093)[_0x36ce1d(0x215)]){if(pid[_0x43566a])pid[_0x43566a][_0x36ce1d(0x31d)]({'function':'storeConfiguration','args':_0x7e96c});}else logger[_0x36ce1d(0x2bd)](_0x36ce1d(0x1b3));}),_0x2f40ef['on'](_0x1163ed(0x319),(_0x35dc57,_0x200b53)=>{const _0x30c30f=_0x1163ed;if(validateAccess(_0x200b53,_0x1bc093)['allow']){if(pid[_0x43566a])pid[_0x43566a][_0x30c30f(0x31d)]({'function':_0x30c30f(0x2c3),'args':_0x35dc57});}else logger['full'](_0x30c30f(0x2b5));}),_0x2f40ef['on'](_0x1163ed(0x2cb),_0x49ead5=>{const _0x2eb004=_0x1163ed;if(validateAccess(_0x49ead5,_0x1bc093)[_0x2eb004(0x215)]){if(pid[_0x43566a])pid[_0x43566a]['send']({'function':_0x2eb004(0x192),'args':null});}else logger['full'](_0x2eb004(0x19b));}),_0x2f40ef['on'](_0x1163ed(0x193),(_0x4feda2,_0x3f3362)=>{const _0x49c5d3=_0x1163ed;if(validateAccess(_0x3f3362,_0x1bc093)[_0x49c5d3(0x215)]){if(pid[_0x43566a])pid[_0x43566a][_0x49c5d3(0x31d)]({'function':_0x49c5d3(0x2a5),'args':_0x4feda2});}else logger[_0x49c5d3(0x2bd)](_0x49c5d3(0x1db));}),_0x2f40ef['on']('cancel-loading',_0x32c0a0=>{const _0x21ee9b=_0x1163ed;if(validateAccess(_0x32c0a0,_0x1bc093)[_0x21ee9b(0x215)]){if(pid[_0x43566a])pid[_0x43566a][_0x21ee9b(0x31d)]({'function':_0x21ee9b(0x28a),'args':null});}else logger['full'](_0x21ee9b(0x24e));}),_0x2f40ef['on'](_0x1163ed(0x1c0),_0xdbbb85=>{const _0x40b219=_0x1163ed;if(validateAccess(_0xdbbb85,_0x1bc093)[_0x40b219(0x215)]){if(pid[_0x43566a])pid[_0x43566a][_0x40b219(0x31d)]({'function':_0x40b219(0x31c),'args':null});}else logger['full'](_0x40b219(0x29e));}),_0x2f40ef['on'](_0x1163ed(0x254),_0xa16d65=>{const _0x3ab9cc=_0x1163ed;if(validateAccess(_0xa16d65,_0x1bc093)[_0x3ab9cc(0x215)])updateBB();else logger[_0x3ab9cc(0x2bd)](_0x3ab9cc(0x216));}),_0x2f40ef['on'](_0x1163ed(0x225),_0x586c59=>{const _0x368b04=_0x1163ed;if(validateAccess(_0x586c59,_0x1bc093)['allow'])getMessages();else logger[_0x368b04(0x2bd)](_0x368b04(0x31f));}),_0x2f40ef['on'](_0x1163ed(0x311),(_0x274947,_0x1da9a0)=>{const _0xb16c69=_0x1163ed;if(validateAccess(_0x1da9a0,_0x1bc093)[_0xb16c69(0x215)])confirmMessage(_0x274947);else logger[_0xb16c69(0x2bd)](_0xb16c69(0x323));}),_0x2f40ef['on']('logout',_0xcac29e=>{const _0x43b918=_0x1163ed;if(validateAccess(_0xcac29e,_0x1bc093)[_0x43b918(0x215)]){if(devices[_0x1bc093]['pidRefreshToken'])clearTimeout(devices[_0x1bc093]['pidRefreshToken']);if(devices[_0x1bc093][_0x43b918(0x1ff)])clearTimeout(devices[_0x1bc093]['pidExpireLogin']);removeSocketListeners(getClient(_0x2f40ef['id'])[_0x43b918(0x278)]),addBlacklist(_0x1bc093),devices[_0x1bc093]['telegramIpApproval']=null,devices[_0x1bc093][_0x43b918(0x22d)]=null,devices[_0x1bc093][_0x43b918(0x22e)][_0x43b918(0x271)]=null,io['to'](getClient(_0x2f40ef['id'])['uuid'])[_0x43b918(0x2a9)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x43b918(0x2bd)](_0x43b918(0x221));});}function removeSocketListeners(_0x493941){const _0x183ff7=_0x199dd6;getClientsWithUuid(_0x493941)[_0x183ff7(0x29b)](_0x4291ca=>{const _0x3d8538=_0x183ff7;getSocket(_0x4291ca['id'])[_0x3d8538(0x291)]();});}function cleanSettings(){const _0x216903=_0x199dd6;let _0x528943=settings;return settings[_0x216903(0x1aa)]&&settings[_0x216903(0x1aa)]!=''&&(_0x528943={..._0x528943,'telegramToken':'************'}),settings[_0x216903(0x1f0)]&&settings[_0x216903(0x1f0)]!=''&&(_0x528943={..._0x528943,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x216903(0x1f0)]==_0x216903(0x1f9)||settings[_0x216903(0x1aa)]&&settings[_0x216903(0x1aa)]==_0x216903(0x1f9))&&(_0x528943={..._0x528943,'restored':{'password':settings[_0x216903(0x1f0)]==_0x216903(0x1f9),'telegram':settings[_0x216903(0x1aa)]==_0x216903(0x1f9)}}),_0x528943;}function updateBB(){const _0x13855e=_0x199dd6;installingUpdate=!![],config[_0x13855e(0x29b)](_0x8177e4=>{const _0x5298ad=_0x13855e;restartBot(_0x8177e4[_0x5298ad(0x1fd)]);}),process[_0x13855e(0x31d)]({'update':!![]},_0x310ea2=>{});}function startBot(_0x5b0af9,_0x59da31,_0x1e1f46){const _0x381da4=_0x199dd6;let _0x252e49=![];const _0x4acdde=_0x5b0af9[0x0];_0x59da31={..._0x59da31,'stdio':['inherit',_0x381da4(0x2fe),_0x381da4(0x2fe),_0x381da4(0x1d7)]},pid[_0x4acdde]=childProcess[_0x381da4(0x26b)](botfile,_0x5b0af9,_0x59da31),pid[_0x4acdde]['on'](_0x381da4(0x249),_0xe0a4a7=>{const _0x3131c4=_0x381da4;switch(Object[_0x3131c4(0x2b9)](_0xe0a4a7)[0x0]){case'botname':updateBotName(_0x4acdde,_0xe0a4a7[_0x3131c4(0x227)]);break;case _0x3131c4(0x252):updateBotManager();break;case _0x3131c4(0x1de):updateStatus(_0x4acdde,_0xe0a4a7[_0x3131c4(0x1de)]);break;case _0x3131c4(0x200):updateLive(_0x4acdde,_0xe0a4a7[_0x3131c4(0x200)]);break;case _0x3131c4(0x24d):updateLive(_0x4acdde,_0xe0a4a7[_0x3131c4(0x24d)]),io['to'](_0x4acdde)[_0x3131c4(0x2a9)](_0x3131c4(0x1de),{'access':{'allow':![],'reason':_0x3131c4(0x2a0),'token':null}});break;case'stop':_0xe0a4a7[_0x3131c4(0x2dd)]=='restart'&&restartBot(_0x4acdde);_0xe0a4a7[_0x3131c4(0x2dd)]==_0x3131c4(0x183)&&toggleBot(_0x4acdde,_0x3131c4(0x1a9),_0x3131c4(0x1bf));break;case'telegram':sendTelegram(_0x4acdde,_0xe0a4a7[_0x3131c4(0x30c)]);break;case _0x3131c4(0x258):sendTelegramMsg(_0xe0a4a7[_0x3131c4(0x258)]);break;case _0x3131c4(0x2f7):io['to'](_0x4acdde)[_0x3131c4(0x2a9)](_0xe0a4a7['function'],_0xe0a4a7['args']);break;}}),pid[_0x4acdde]['on'](_0x381da4(0x27a),function(_0x1dc5a4){if(_0x252e49)return;_0x252e49=!![],_0x1e1f46(_0x1dc5a4);}),pid[_0x4acdde]['on'](_0x381da4(0x2e5),async function(_0x591077){const _0x1af354=_0x381da4;if(installingUpdate)return;if(_0x252e49)return;_0x252e49=!![],_0x1e1f46(null);const _0x2ffee7=dbConfig[_0x1af354(0x2b1)](_0x1af354(0x296))[_0x1af354(0x2bf)]({'botID':_0x4acdde})[_0x1af354(0x229)]();_0x2ffee7&&(_0x2ffee7['status']==_0x1af354(0x188)||_0x2ffee7[_0x1af354(0x1de)]=='new')&&(await sleep(0x3e8),updateLive(_0x4acdde,_0x1af354(0x1bf)),logger[_0x1af354(0x2bd)](_0x1af354(0x1c7)+_0x4acdde),startBot([_0x4acdde,userID],{'cwd':bbpath},function(_0x2f7724){if(_0x2f7724)logger['full'](_0x2f7724);}));});}function stopBot(_0x412f70){const _0xfc2627=_0x199dd6;getClientsWithBotID(_0x412f70)[_0xfc2627(0x29b)](_0x27922d=>{const _0x3fd6f4=_0xfc2627;getSocket(_0x27922d['id'])[_0x3fd6f4(0x2b4)](!![]),removeClient(_0x27922d['id']);}),pid[_0x412f70]&&(pid[_0x412f70][_0xfc2627(0x183)](),pid[_0x412f70]=null);}function restartBot(_0x5000c5){const _0x1f1d34=_0x199dd6;if(pid[_0x5000c5])pid[_0x5000c5][_0x1f1d34(0x183)]();}function addBot(){const _0x1d459b=_0x199dd6;let _0x34cd6b;for(let _0x258ec7=0x1;_0x258ec7<0x3e9;_0x258ec7++){_0x34cd6b=_0x258ec7[_0x1d459b(0x1e2)]()[_0x1d459b(0x1a3)](0x3,'0');let _0x210d86=config[_0x1d459b(0x2bf)](_0x749e8e=>_0x749e8e[_0x1d459b(0x1fd)]==_0x34cd6b);if(!_0x210d86)break;}if(_0x34cd6b===_0x1d459b(0x1a5)){logger[_0x1d459b(0x2bd)](_0x1d459b(0x280));return;}logger[_0x1d459b(0x2bd)]('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x34cd6b),dbConfig[_0x1d459b(0x2b1)]('bots')['push']({'botID':_0x34cd6b,'botname':_0x1d459b(0x18c)+_0x34cd6b,'status':_0x1d459b(0x2dc),'live':''})[_0x1d459b(0x302)](),startBot([_0x34cd6b,userID],{'cwd':bbpath},function(_0x38198c){const _0x187970=_0x1d459b;if(_0x38198c)logger[_0x187970(0x2bd)](_0x38198c);}),config=getConfiguration(),io['to'](_0x1d459b(0x190))['emit']('bots',config);}function deleteBot(_0x20ac29){const _0x4d1338=_0x199dd6;getClientsWithBotID(_0x20ac29)['forEach'](_0x5f1c44=>{const _0x35475a=_0x3c3d;getSocket(_0x5f1c44['id'])[_0x35475a(0x2b4)](!![]),removeClient(_0x5f1c44['id']);}),dbConfig['get'](_0x4d1338(0x296))['remove']({'botID':_0x20ac29})[_0x4d1338(0x302)](),logger['full'](_0x4d1338(0x2e8)+_0x20ac29),stopBot(_0x20ac29);try{if(fs[_0x4d1338(0x327)](path[_0x4d1338(0x2c6)](configpath,_0x4d1338(0x20d)+_0x20ac29+_0x4d1338(0x32a))))fs[_0x4d1338(0x1b6)](path[_0x4d1338(0x2c6)](configpath,'bot-'+_0x20ac29+_0x4d1338(0x32a)));if(fs[_0x4d1338(0x327)](path[_0x4d1338(0x2c6)](configpath,_0x4d1338(0x20d)+_0x20ac29+'-events.json')))fs[_0x4d1338(0x1b6)](path['join'](configpath,'bot-'+_0x20ac29+_0x4d1338(0x1f3)));if(fs[_0x4d1338(0x327)](path[_0x4d1338(0x2c6)](configpath,_0x4d1338(0x20d)+_0x20ac29+'-performance.json')))fs[_0x4d1338(0x1b6)](path[_0x4d1338(0x2c6)](configpath,_0x4d1338(0x20d)+_0x20ac29+'-performance.json'));if(fs[_0x4d1338(0x327)](path[_0x4d1338(0x2c6)](configpath,_0x4d1338(0x20d)+_0x20ac29+_0x4d1338(0x1f2))))fs['unlinkSync'](path[_0x4d1338(0x2c6)](configpath,'bot-'+_0x20ac29+_0x4d1338(0x1f2)));}catch(_0xc7b477){if(_0xc7b477)logger[_0x4d1338(0x2bd)](_0x4d1338(0x2ae),_0xc7b477);}config=getConfiguration(),io['to'](_0x4d1338(0x190))['emit']('bots',config);}function toggleBot(_0x4d154b,_0x2292d2,_0x5bb8a6){const _0xaf1fcd=_0x199dd6;dbConfig[_0xaf1fcd(0x2b1)](_0xaf1fcd(0x296))['find']({'botID':_0x4d154b})[_0xaf1fcd(0x2cd)]({'status':_0x2292d2})['assign']({'live':_0x5bb8a6})['write']();if(_0x2292d2=='enabled'||_0x2292d2==_0xaf1fcd(0x2dc))logger[_0xaf1fcd(0x2bd)](_0xaf1fcd(0x1eb)+_0x4d154b),startBot([_0x4d154b,userID],{'cwd':bbpath},function(_0x498d84){const _0x4b4f66=_0xaf1fcd;if(_0x498d84)logger[_0x4b4f66(0x2bd)](_0x498d84);});else(_0x2292d2==_0xaf1fcd(0x1a9)||_0x2292d2=='new-disabled')&&(logger[_0xaf1fcd(0x2bd)]('disabled\x20Bot\x20'+_0x4d154b),stopBot(_0x4d154b));config=getConfiguration(),io['to']('botmanager')[_0xaf1fcd(0x2a9)](_0xaf1fcd(0x296),config);}function toggleStatus(_0x369a3c){const _0x38055b=_0x199dd6;let _0x35634b=dbConfig[_0x38055b(0x2b1)]('bots')[_0x38055b(0x2bf)]({'botID':_0x369a3c})[_0x38055b(0x229)](),_0x567dfa;if(_0x35634b['status']===_0x38055b(0x188))_0x567dfa=_0x38055b(0x1a9);else{if(_0x35634b[_0x38055b(0x1de)]===_0x38055b(0x2dc))_0x567dfa=_0x38055b(0x25d);else{if(_0x35634b[_0x38055b(0x1de)]===_0x38055b(0x25d))_0x567dfa=_0x38055b(0x2dc);else{if(_0x35634b['status']===_0x38055b(0x1a9))_0x567dfa='enabled';}}}return _0x567dfa;}function updateStatus(_0x36f593,_0x20455b){const _0x349154=_0x199dd6;dbConfig[_0x349154(0x2b1)](_0x349154(0x296))[_0x349154(0x2bf)]({'botID':_0x36f593})['assign']({'status':_0x20455b})[_0x349154(0x302)](),config=getConfiguration(),io['to'](_0x349154(0x190))[_0x349154(0x2a9)](_0x349154(0x296),config);}function updateLive(_0xa09338,_0x56e51b){const _0x139a1f=_0x199dd6;dbConfig[_0x139a1f(0x2b1)](_0x139a1f(0x296))['find']({'botID':_0xa09338})[_0x139a1f(0x2cd)]({'live':_0x56e51b})[_0x139a1f(0x302)](),config=getConfiguration(),io['to'](_0x139a1f(0x190))[_0x139a1f(0x2a9)](_0x139a1f(0x296),config);}function updateBotName(_0xda3be,_0x15497d){const _0x17827d=_0x199dd6;dbConfig[_0x17827d(0x2b1)](_0x17827d(0x296))[_0x17827d(0x2bf)]({'botID':_0xda3be})[_0x17827d(0x2cd)]({'botname':_0x15497d})['write'](),config=getConfiguration(),io['to'](_0x17827d(0x190))[_0x17827d(0x2a9)](_0x17827d(0x296),config);}function updateBotManager(){const _0x1c412a=_0x199dd6;config=getConfiguration(),io['to']('botmanager')[_0x1c412a(0x2a9)](_0x1c412a(0x296),config);}function toggleBotMode(_0x2f0153){const _0x3048d1=_0x199dd6;if(pid[_0x2f0153])pid[_0x2f0153][_0x3048d1(0x31d)]({'function':'toggleBotMode','args':null});else{const _0x1ad058=configpath+_0x3048d1(0x20d)+_0x2f0153+_0x3048d1(0x32a),_0x430a69=fs[_0x3048d1(0x29f)](_0x1ad058),_0x21778d=JSON[_0x3048d1(0x2f6)](_0x430a69),_0x354370=_0x21778d['bot'][0x0][_0x3048d1(0x2d6)];_0x21778d[_0x3048d1(0x1fa)][0x0][_0x3048d1(0x2d6)]=!_0x354370;const _0x22e4c8=JSON[_0x3048d1(0x1c9)](_0x21778d,null,0x2);fs[_0x3048d1(0x1dd)](_0x1ad058,_0x22e4c8),config=getConfiguration(),io['to'](_0x3048d1(0x190))['emit']('bots',config);}}function telegramError(_0x22ea2d){const _0x16e2e9=_0x199dd6;logger[_0x16e2e9(0x25f)](getTimeStamp()+_0x16e2e9(0x286));}function validateTelegram(_0x2a16db){const _0x5d8bae=_0x199dd6;if(_0x2a16db[_0x5d8bae(0x1c4)][_0x5d8bae(0x23f)]!=settings[_0x5d8bae(0x281)]&&'@'+_0x2a16db['from'][_0x5d8bae(0x23f)]!=settings[_0x5d8bae(0x281)])return tgBot['sendMessage'](_0x2a16db[_0x5d8bae(0x1e1)]['id'],_0x5d8bae(0x19d),{'parse_mode':'HTML'})[_0x5d8bae(0x211)](_0xc5a7d7=>{telegramError(_0xc5a7d7);}),![];return!![];}async function initTelegram(){const _0x4f4393=_0x199dd6;if(tgBot)tgBot[_0x4f4393(0x191)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x18b4fc=_0x4f4393(0x1b0);_0x18b4fc+='\x0a',_0x18b4fc+='/enable\x20-\x20enable\x20notifications\x0a',_0x18b4fc+='/disable\x20-\x20disable\x20notifications\x0a',_0x18b4fc+=_0x4f4393(0x1c1),_0x18b4fc+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x18b4fc+='/on\x20-\x20start\x20bot(s)\x0a',_0x18b4fc+='/off\x20-\x20stop\x20bot(s)\x0a',_0x18b4fc+=_0x4f4393(0x1ed),_0x18b4fc+=_0x4f4393(0x2d9),_0x18b4fc+=_0x4f4393(0x2d1),_0x18b4fc+=_0x4f4393(0x1f8),_0x18b4fc+=_0x4f4393(0x2de),_0x18b4fc+=_0x4f4393(0x299);let _0x91f4e4=_0x4f4393(0x1a0);_0x91f4e4+='\x0a',_0x91f4e4+=_0x18b4fc,tgBot[_0x4f4393(0x207)](/\/start/,_0x57ee3e=>{const _0x1a7c5c=_0x4f4393;if(!validateTelegram(_0x57ee3e))return;if(settings[_0x1a7c5c(0x2c9)]!=_0x57ee3e[_0x1a7c5c(0x1e1)]['id'])updateSetting(_0x1a7c5c(0x2c9),_0x57ee3e[_0x1a7c5c(0x1e1)]['id']);updateSetting(_0x1a7c5c(0x1f6),!![]),tgBot[_0x1a7c5c(0x2e3)](_0x57ee3e[_0x1a7c5c(0x1e1)]['id'],_0x91f4e4)[_0x1a7c5c(0x211)](_0x2b933c=>{telegramError(_0x2b933c);});}),tgBot[_0x4f4393(0x207)](/\/enable/,_0x3a5f3c=>{const _0x3951b1=_0x4f4393;if(!validateTelegram(_0x3a5f3c))return;if(settings[_0x3951b1(0x2c9)]!=_0x3a5f3c[_0x3951b1(0x1e1)]['id'])updateSetting('telegramChatId',_0x3a5f3c[_0x3951b1(0x1e1)]['id']);updateSetting(_0x3951b1(0x1f6),!![]),tgBot[_0x3951b1(0x2e3)](_0x3a5f3c[_0x3951b1(0x1e1)]['id'],_0x3951b1(0x288))['catch'](_0x170d24=>{telegramError(_0x170d24);});}),tgBot[_0x4f4393(0x207)](/\/config/,async _0x3de8c7=>{const _0xdc11ed=_0x4f4393;if(!validateTelegram(_0x3de8c7))return;tgBot[_0xdc11ed(0x2e1)](_0xdc11ed(0x27c)),tgBot[_0xdc11ed(0x2e3)](_0x3de8c7['chat']['id'],_0xdc11ed(0x28e),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0xdc11ed(0x22b)},{'text':_0xdc11ed(0x29d),'callback_data':'alerts'},{'text':_0xdc11ed(0x263),'callback_data':'all'}]]}})[_0xdc11ed(0x211)](_0x3c8c72=>{telegramError(_0x3c8c72);}),tgBot['on']('callback_query',async _0x2cb6da=>{const _0xed73e5=_0xdc11ed,_0x326448=_0x2cb6da[_0xed73e5(0x1fc)],_0x26b16b=_0x2cb6da[_0xed73e5(0x249)];tgBot[_0xed73e5(0x2eb)](_0x2cb6da['id'])[_0xed73e5(0x214)](async()=>{const _0x4223c3=_0xed73e5;_0x326448==_0x4223c3(0x22b)&&(updateSetting(_0x4223c3(0x1f7),_0x4223c3(0x22b)),updateSetting(_0x4223c3(0x1f6),!![]),await tgBot['sendMessage'](_0x26b16b['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x4223c3(0x211)](_0x53415d=>{telegramError(_0x53415d);}));_0x326448==_0x4223c3(0x220)&&(updateSetting(_0x4223c3(0x1f7),_0x4223c3(0x220)),updateSetting(_0x4223c3(0x1f6),!![]),await tgBot[_0x4223c3(0x2e3)](_0x26b16b['chat']['id'],_0x4223c3(0x1cf))['catch'](_0x1ee6f6=>{telegramError(_0x1ee6f6);}));_0x326448==_0x4223c3(0x242)&&(updateSetting(_0x4223c3(0x1f7),'all'),updateSetting(_0x4223c3(0x1f6),!![]),await tgBot[_0x4223c3(0x2e3)](_0x26b16b[_0x4223c3(0x1e1)]['id'],_0x4223c3(0x21e))[_0x4223c3(0x211)](_0x297b1c=>{telegramError(_0x297b1c);}));if(!settings[_0x4223c3(0x2c9)])tgBot['sendMessage'](_0x26b16b[_0x4223c3(0x1e1)]['id'],_0x4223c3(0x2b7))[_0x4223c3(0x211)](_0x204787=>{telegramError(_0x204787);});}),tgBot[_0xed73e5(0x2e1)]('callback_query');});}),tgBot[_0x4f4393(0x207)](/\/status/,_0x264b4a=>{const _0x351c55=_0x4f4393;if(!validateTelegram(_0x264b4a))return;const _0x22211d=getBotsWithMode();let _0x223f9c=_0x351c55(0x2f3);config[_0x351c55(0x29b)](_0x3f47c3=>{const _0x5a9f1a=_0x351c55,_0x474fa5=_0x22211d[_0x5a9f1a(0x2bf)](_0x340b46=>_0x340b46[_0x5a9f1a(0x1fd)]==_0x3f47c3[_0x5a9f1a(0x1fd)])[_0x5a9f1a(0x222)];_0x223f9c+=_0x5a9f1a(0x18c)+_0x3f47c3[_0x5a9f1a(0x1fd)]+':\x20'+_0x3f47c3[_0x5a9f1a(0x1de)]+_0x5a9f1a(0x182)+_0x474fa5+_0x5a9f1a(0x182)+_0x3f47c3[_0x5a9f1a(0x200)]+'\x0a';}),_0x223f9c+='\x0a',_0x223f9c+=_0x351c55(0x1b7),_0x223f9c+=!settings[_0x351c55(0x1f6)]?_0x351c55(0x20e):_0x351c55(0x23c),_0x223f9c+=settings['telegramEnabled']?settings[_0x351c55(0x1f7)]==_0x351c55(0x242)?_0x351c55(0x260):'Notifications\x20types:\x20'+settings[_0x351c55(0x1f7)]+_0x351c55(0x231):'',tgBot['sendMessage'](_0x264b4a[_0x351c55(0x1e1)]['id'],_0x223f9c,{'parse_mode':_0x351c55(0x21d)})[_0x351c55(0x211)](_0x19e6a9=>{telegramError(_0x19e6a9);});}),tgBot['onText'](/\/restart/,_0x7afe1c=>{const _0x450d07=_0x4f4393;if(!validateTelegram(_0x7afe1c))return;tgBot[_0x450d07(0x2e1)](_0x450d07(0x27c));const _0x23cb59=getEnabledBots();if(_0x23cb59['length']==0x0)tgBot['sendMessage'](_0x7afe1c[_0x450d07(0x1e1)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x450d07(0x211)](_0x3ffc06=>{telegramError(_0x3ffc06);});else{if(_0x23cb59[_0x450d07(0x246)]>0x1)_0x23cb59[_0x450d07(0x1ea)]({'botID':'all'});let _0x29455e=[],_0x48b60e=[];const _0x4174c6=_0x23cb59['length']%0x4==0x0||_0x23cb59['length']%0x4==0x3||_0x23cb59[_0x450d07(0x246)]%0x3==0x1?0x4:0x3;let _0x41822c=0x0;_0x23cb59[_0x450d07(0x29b)]((_0x42ac4b,_0x2a43d5)=>{const _0x12a7b5=_0x450d07;if(_0x2a43d5%_0x4174c6==0x0)_0x48b60e=[];_0x48b60e[_0x12a7b5(0x1ea)]({'text':_0x42ac4b['botID']==_0x12a7b5(0x242)?'All\x20bots':_0x12a7b5(0x18c)+_0x42ac4b[_0x12a7b5(0x1fd)],'callback_data':_0x42ac4b[_0x12a7b5(0x1fd)]}),_0x2a43d5%_0x4174c6==0x0&&(_0x29455e[_0x41822c]=_0x48b60e,_0x41822c++);}),tgBot[_0x450d07(0x2e3)](_0x7afe1c[_0x450d07(0x1e1)]['id'],_0x450d07(0x26e),{'reply_markup':{'inline_keyboard':_0x29455e}})['catch'](_0x5c229d=>{telegramError(_0x5c229d);}),tgBot['on'](_0x450d07(0x27c),async _0x32588b=>{const _0x577b2b=_0x450d07,_0x4e402f=_0x32588b[_0x577b2b(0x1fc)],_0x41186b=_0x32588b[_0x577b2b(0x249)];tgBot[_0x577b2b(0x2eb)](_0x32588b['id'])[_0x577b2b(0x214)](async()=>{const _0xa6818b=_0x577b2b;_0x4e402f==_0xa6818b(0x242)?config['forEach'](_0x2f11a0=>{const _0x2c8c11=_0xa6818b;restartBot(_0x2f11a0[_0x2c8c11(0x1fd)]);}):restartBot(_0x4e402f);}),tgBot[_0x577b2b(0x2e1)](_0x577b2b(0x27c));});}}),tgBot[_0x4f4393(0x207)](/\/on/,_0x46366f=>{const _0x2d9809=_0x4f4393;if(!validateTelegram(_0x46366f))return;tgBot[_0x2d9809(0x2e1)](_0x2d9809(0x27c));const _0x266240=getDisabledBots();if(_0x266240['length']==0x0)tgBot[_0x2d9809(0x2e3)](_0x46366f['chat']['id'],_0x2d9809(0x25e))[_0x2d9809(0x211)](_0x485def=>{telegramError(_0x485def);});else{if(_0x266240[_0x2d9809(0x246)]>0x1)_0x266240[_0x2d9809(0x1ea)]({'botID':_0x2d9809(0x242)});let _0x1101b3=[],_0x1c6df1=[];const _0x285b43=_0x266240[_0x2d9809(0x246)]%0x4==0x0||_0x266240['length']%0x4==0x3||_0x266240[_0x2d9809(0x246)]%0x3==0x1?0x4:0x3;let _0x288109=0x0;_0x266240['forEach']((_0x1beca1,_0x8df77)=>{const _0x1c398d=_0x2d9809;if(_0x8df77%_0x285b43==0x0)_0x1c6df1=[];_0x1c6df1[_0x1c398d(0x1ea)]({'text':_0x1beca1[_0x1c398d(0x1fd)]=='all'?'All\x20bots':_0x1c398d(0x18c)+_0x1beca1[_0x1c398d(0x1fd)],'callback_data':_0x1beca1['botID']}),_0x8df77%_0x285b43==0x0&&(_0x1101b3[_0x288109]=_0x1c6df1,_0x288109++);}),tgBot[_0x2d9809(0x2e3)](_0x46366f['chat']['id'],_0x2d9809(0x2bc),{'reply_markup':{'inline_keyboard':_0x1101b3}})[_0x2d9809(0x211)](_0x29bb03=>{telegramError(_0x29bb03);}),tgBot['on'](_0x2d9809(0x27c),async _0x1afc3f=>{const _0x26f76a=_0x2d9809,_0x321658=_0x1afc3f[_0x26f76a(0x1fc)],_0xd39540=_0x1afc3f[_0x26f76a(0x249)];tgBot['answerCallbackQuery'](_0x1afc3f['id'])[_0x26f76a(0x214)](async()=>{const _0x308319=_0x26f76a;_0x321658==_0x308319(0x242)?(tgBot[_0x308319(0x2e3)](_0xd39540[_0x308319(0x1e1)]['id'],_0x308319(0x19f))[_0x308319(0x211)](_0x1c7a28=>{telegramError(_0x1c7a28);}),_0x266240[_0x308319(0x29b)](_0x620be2=>{const _0x5139ad=_0x308319;if(_0x620be2[_0x5139ad(0x1fd)]!=_0x5139ad(0x242))toggleBot(_0x620be2[_0x5139ad(0x1fd)],toggleStatus(_0x620be2['botID']),_0x5139ad(0x1bf));})):(tgBot[_0x308319(0x2e3)](_0xd39540['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x321658)[_0x308319(0x211)](_0x1bfb44=>{telegramError(_0x1bfb44);}),toggleBot(_0x321658,toggleStatus(_0x321658),'stopped'));}),tgBot[_0x26f76a(0x2e1)](_0x26f76a(0x27c));});}}),tgBot[_0x4f4393(0x207)](/\/off/,_0x3b8f6d=>{const _0x10b273=_0x4f4393;if(!validateTelegram(_0x3b8f6d))return;tgBot[_0x10b273(0x2e1)]('callback_query');const _0x235a53=getEnabledBots();if(_0x235a53[_0x10b273(0x246)]==0x0)tgBot[_0x10b273(0x2e3)](_0x3b8f6d[_0x10b273(0x1e1)]['id'],_0x10b273(0x1dc))[_0x10b273(0x211)](_0x158202=>{telegramError(_0x158202);});else{if(_0x235a53[_0x10b273(0x246)]>0x1)_0x235a53[_0x10b273(0x1ea)]({'botID':_0x10b273(0x242)});let _0x3799d2=[],_0x3800de=[];const _0x3470a1=_0x235a53[_0x10b273(0x246)]%0x4==0x0||_0x235a53['length']%0x4==0x3||_0x235a53['length']%0x3==0x1?0x4:0x3;let _0x37aef9=0x0;_0x235a53[_0x10b273(0x29b)]((_0x20b13b,_0x3b81a0)=>{const _0x30fbbc=_0x10b273;if(_0x3b81a0%_0x3470a1==0x0)_0x3800de=[];_0x3800de[_0x30fbbc(0x1ea)]({'text':_0x20b13b[_0x30fbbc(0x1fd)]==_0x30fbbc(0x242)?_0x30fbbc(0x31b):_0x30fbbc(0x18c)+_0x20b13b[_0x30fbbc(0x1fd)],'callback_data':_0x20b13b[_0x30fbbc(0x1fd)]}),_0x3b81a0%_0x3470a1==0x0&&(_0x3799d2[_0x37aef9]=_0x3800de,_0x37aef9++);}),tgBot[_0x10b273(0x2e3)](_0x3b8f6d['chat']['id'],_0x10b273(0x277),{'reply_markup':{'inline_keyboard':_0x3799d2}})[_0x10b273(0x211)](_0x2dfadf=>{telegramError(_0x2dfadf);}),tgBot['on'](_0x10b273(0x27c),async _0x13a29c=>{const _0x261cea=_0x10b273,_0x28a04c=_0x13a29c[_0x261cea(0x1fc)],_0x10fdc9=_0x13a29c[_0x261cea(0x249)];tgBot[_0x261cea(0x2eb)](_0x13a29c['id'])[_0x261cea(0x214)](async()=>{const _0x4e75df=_0x261cea;_0x28a04c==_0x4e75df(0x242)?(tgBot[_0x4e75df(0x2e3)](_0x10fdc9[_0x4e75df(0x1e1)]['id'],_0x4e75df(0x189))[_0x4e75df(0x211)](_0x2a3b9d=>{telegramError(_0x2a3b9d);}),_0x235a53[_0x4e75df(0x29b)](_0x4da7c6=>{const _0x5642e5=_0x4e75df;if(_0x4da7c6[_0x5642e5(0x1fd)]!=_0x5642e5(0x242))toggleBot(_0x4da7c6[_0x5642e5(0x1fd)],toggleStatus(_0x4da7c6[_0x5642e5(0x1fd)]),_0x5642e5(0x1bf));})):(tgBot['sendMessage'](_0x10fdc9['chat']['id'],_0x4e75df(0x2b2)+_0x28a04c)[_0x4e75df(0x211)](_0x2525e8=>{telegramError(_0x2525e8);}),toggleBot(_0x28a04c,toggleStatus(_0x28a04c),'stopped'));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x4f4393(0x207)](/\/portfolio/,_0x4fd199=>{const _0x3744eb=_0x4f4393;if(!validateTelegram(_0x4fd199))return;tgBot['removeListener'](_0x3744eb(0x27c));const _0x50d96f=getEnabledBots();if(_0x50d96f[_0x3744eb(0x246)]==0x0)tgBot[_0x3744eb(0x2e3)](_0x4fd199[_0x3744eb(0x1e1)]['id'],_0x3744eb(0x1dc))[_0x3744eb(0x211)](_0x14f64d=>{telegramError(_0x14f64d);});else{if(_0x50d96f['length']>0x1){let _0x335fdf=[],_0x2e69de=[];const _0x8c2461=_0x50d96f[_0x3744eb(0x246)]%0x4==0x0||_0x50d96f[_0x3744eb(0x246)]%0x4==0x3||_0x50d96f['length']%0x3==0x1?0x4:0x3;let _0x1e2404=0x0;_0x50d96f[_0x3744eb(0x29b)]((_0x4dc232,_0x38ef56)=>{const _0x2f3f4d=_0x3744eb;if(_0x38ef56%_0x8c2461==0x0)_0x2e69de=[];_0x2e69de['push']({'text':_0x2f3f4d(0x18c)+_0x4dc232[_0x2f3f4d(0x1fd)],'callback_data':_0x4dc232[_0x2f3f4d(0x1fd)]}),_0x38ef56%_0x8c2461==0x0&&(_0x335fdf[_0x1e2404]=_0x2e69de,_0x1e2404++);}),tgBot[_0x3744eb(0x2e3)](_0x4fd199[_0x3744eb(0x1e1)]['id'],_0x3744eb(0x1d1),{'reply_markup':{'inline_keyboard':_0x335fdf}})[_0x3744eb(0x211)](_0x249ebd=>{telegramError(_0x249ebd);}),tgBot['on'](_0x3744eb(0x27c),async _0x95dfa2=>{const _0x1de271=_0x3744eb,_0x5d17b0=_0x95dfa2['data'],_0x880ab7=_0x95dfa2['message'];tgBot[_0x1de271(0x2eb)](_0x95dfa2['id'])['then'](async()=>{const _0x4586ae=_0x1de271;if(pid[_0x5d17b0])pid[_0x5d17b0][_0x4586ae(0x31d)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x1de271(0x2e1)]('callback_query');});}else{const _0x417f78=_0x50d96f[0x0]['botID'];if(pid[_0x417f78])pid[_0x417f78][_0x3744eb(0x31d)]({'function':_0x3744eb(0x2b0),'args':null});}}}),tgBot[_0x4f4393(0x207)](/\/update/,async _0x19cc3a=>{const _0x116cb7=_0x4f4393;if(!validateTelegram(_0x19cc3a))return;tgBot[_0x116cb7(0x2e1)]('callback_query'),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x19cc3a['chat']['id'],_0x116cb7(0x2c0))['catch'](_0x55738d=>{telegramError(_0x55738d);});else!validInstallation?tgBot[_0x116cb7(0x2e3)](_0x19cc3a[_0x116cb7(0x1e1)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x116cb7(0x211)](_0x30b3e1=>{telegramError(_0x30b3e1);}):(tgBot['sendMessage'](_0x19cc3a[_0x116cb7(0x1e1)]['id'],_0x116cb7(0x240),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x116cb7(0x261)},{'text':'No','callback_data':'no'}]]}})[_0x116cb7(0x211)](_0x22b2d0=>{telegramError(_0x22b2d0);}),tgBot['on'](_0x116cb7(0x27c),async _0x3cc7fb=>{const _0x1e3515=_0x116cb7,_0x4c413f=_0x3cc7fb[_0x1e3515(0x1fc)],_0x361d6e=_0x3cc7fb[_0x1e3515(0x249)];tgBot['answerCallbackQuery'](_0x3cc7fb['id'])[_0x1e3515(0x214)](async()=>{const _0x308253=_0x1e3515;_0x4c413f=='yes'&&(await tgBot[_0x308253(0x2e3)](_0x361d6e['chat']['id'],'Starting\x20Balance\x20Bot\x20update')[_0x308253(0x211)](_0x51d425=>{telegramError(_0x51d425);}),updateBB());_0x4c413f=='no'&&await tgBot[_0x308253(0x2e3)](_0x361d6e[_0x308253(0x1e1)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x308253(0x211)](_0x2ac8bb=>{telegramError(_0x2ac8bb);});if(!settings['telegramChatId'])tgBot[_0x308253(0x2e3)](_0x361d6e['chat']['id'],_0x308253(0x2b7))[_0x308253(0x211)](_0x425354=>{telegramError(_0x425354);});}),tgBot[_0x1e3515(0x2e1)](_0x1e3515(0x27c));}));}),tgBot['onText'](/\/toggle/,_0x238ed8=>{const _0x2e3b49=_0x4f4393;if(!validateTelegram(_0x238ed8))return;tgBot[_0x2e3b49(0x2e1)]('callback_query');const _0x49af58=getBotsWithMode();if(_0x49af58[_0x2e3b49(0x246)]==0x0)tgBot[_0x2e3b49(0x2e3)](_0x238ed8[_0x2e3b49(0x1e1)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x1b5361=>{telegramError(_0x1b5361);});else{let _0xa182a3=[],_0x126026=[];const _0x1978c3=0x2;let _0x49d8da=0x0;_0x49af58[_0x2e3b49(0x29b)]((_0x46830e,_0x2fc223)=>{const _0xf6b39b=_0x2e3b49;if(_0x2fc223%_0x1978c3==0x0)_0x126026=[];_0x126026[_0xf6b39b(0x1ea)]({'text':_0xf6b39b(0x18c)+_0x46830e['botID']+'\x20('+_0x46830e[_0xf6b39b(0x222)]+')','callback_data':_0x46830e[_0xf6b39b(0x1fd)]}),_0x2fc223%_0x1978c3==0x0&&(_0xa182a3[_0x49d8da]=_0x126026,_0x49d8da++);}),tgBot['sendMessage'](_0x238ed8[_0x2e3b49(0x1e1)]['id'],_0x2e3b49(0x2c1),{'reply_markup':{'inline_keyboard':_0xa182a3}})[_0x2e3b49(0x211)](_0x19f67b=>{telegramError(_0x19f67b);}),tgBot['on']('callback_query',async _0x823dd4=>{const _0x28132d=_0x2e3b49,_0x2566c4=_0x823dd4[_0x28132d(0x1fc)],_0x479bb5=_0x823dd4[_0x28132d(0x249)];tgBot[_0x28132d(0x2eb)](_0x823dd4['id'])['then'](async()=>{const _0x166843=_0x28132d,_0x312c80=_0x49af58['find'](_0x1a88f2=>_0x1a88f2[_0x166843(0x1fd)]==_0x2566c4),_0x9ca622=_0x312c80[_0x166843(0x222)]=='auto'?_0x166843(0x18d):_0x166843(0x31e);tgBot['sendMessage'](_0x479bb5[_0x166843(0x1e1)]['id'],_0x166843(0x29a)+_0x2566c4+_0x166843(0x243)+_0x9ca622+_0x166843(0x226))[_0x166843(0x211)](_0x9002fd=>{telegramError(_0x9002fd);}),toggleBotMode(_0x2566c4);}),tgBot[_0x28132d(0x2e1)](_0x28132d(0x27c));});}}),tgBot[_0x4f4393(0x207)](/\/names/,_0x25c410=>{const _0x53f47f=_0x4f4393;if(!validateTelegram(_0x25c410))return;let _0x48e992='';config[_0x53f47f(0x29b)](_0x4653ed=>{const _0x52e8e7=_0x53f47f;_0x48e992+=_0x52e8e7(0x18c)+_0x4653ed[_0x52e8e7(0x1fd)]+':\x20'+_0x4653ed[_0x52e8e7(0x227)]+'\x0a';}),tgBot['sendMessage'](_0x25c410[_0x53f47f(0x1e1)]['id'],_0x48e992,{'parse_mode':_0x53f47f(0x21d)})['catch'](_0x475498=>{telegramError(_0x475498);});}),tgBot[_0x4f4393(0x207)](/\/disable/,_0x20593f=>{const _0x47ba43=_0x4f4393;if(!validateTelegram(_0x20593f))return;tgBot['sendMessage'](_0x20593f[_0x47ba43(0x1e1)]['id'],_0x47ba43(0x27b))[_0x47ba43(0x211)](_0x1ad82a=>{telegramError(_0x1ad82a);}),updateSetting(_0x47ba43(0x1f6),![]);}),tgBot['onText'](/\/help/,_0x3eba62=>{const _0x115504=_0x4f4393;if(!validateTelegram(_0x3eba62))return;tgBot['sendMessage'](_0x3eba62[_0x115504(0x1e1)]['id'],_0x18b4fc)[_0x115504(0x211)](_0x9cd0dc=>{telegramError(_0x9cd0dc);});}),tgBot['on'](_0x4f4393(0x1b1),_0x41594a=>{const _0x2ba7ad=_0x4f4393;_0x41594a[_0x2ba7ad(0x1e2)]()[_0x2ba7ad(0x2f8)]('404\x20Not\x20Found')&&(logger['full']('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x2ba7ad(0x190))[_0x2ba7ad(0x2a9)](_0x2ba7ad(0x194),_0x2ba7ad(0x30d)));}),process[_0x4f4393(0x2bb)](_0x4f4393(0x2b3),()=>{const _0x1fb377=_0x4f4393;if(tgBot)tgBot[_0x1fb377(0x191)]();process['exit'](0x1);}),process['once'](_0x4f4393(0x1d9),()=>{const _0x18b2c6=_0x4f4393;if(tgBot)tgBot[_0x18b2c6(0x191)]();process[_0x18b2c6(0x2e5)](0x1);});}}function disableTelegram(){const _0x52a713=_0x199dd6;tgBot&&(tgBot[_0x52a713(0x191)](),tgBot=null);}function sendTelegram(_0xf2993a,_0x3effa1){const _0x31862a=_0x199dd6;if(settings[_0x31862a(0x1f6)]){if(settings[_0x31862a(0x1f7)]==_0x31862a(0x242)||(_0x3effa1[_0x31862a(0x1d2)]==_0x31862a(0x27a)||_0x3effa1[_0x31862a(0x1d2)]==_0x31862a(0x2aa)||_0x3effa1[_0x31862a(0x1d2)]==_0x31862a(0x270))&&settings['telegramEvents']==_0x31862a(0x220)||_0x3effa1[_0x31862a(0x1d2)]==_0x31862a(0x2f1)&&settings[_0x31862a(0x1f7)]==_0x31862a(0x22b)){if(tgBot&&settings[_0x31862a(0x2c9)]){if(_0x3effa1[_0x31862a(0x24f)])tgBot[_0x31862a(0x2e3)](settings[_0x31862a(0x2c9)],_0x3effa1[_0x31862a(0x227)]+'\x20>\x20'+_0x3effa1[_0x31862a(0x2f0)])[_0x31862a(0x211)](_0x37298c=>{telegramError(_0x37298c);});else tgBot[_0x31862a(0x2e3)](settings['telegramChatId'],_0x31862a(0x18c)+_0xf2993a+'\x20>\x20'+_0x3effa1[_0x31862a(0x2f0)])['catch'](_0x33ed00=>{telegramError(_0x33ed00);});}}}}async function sendTelegramMsg(_0x1f9dc3,_0xb4d3cb=_0x199dd6(0x21d)){const _0x2397a4=_0x199dd6;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await tgBot['sendMessage'](settings[_0x2397a4(0x2c9)],_0x1f9dc3,{'parse_mode':_0xb4d3cb})['catch'](_0x5d89af=>{telegramError(_0x5d89af);}),!![]):![];}function _0x3c3d(_0x2f5853,_0x45d7a3){const _0x44656e=_0x206f();return _0x3c3d=function(_0x619e95,_0x1a2df1){_0x619e95=_0x619e95-0x182;let _0x206f85=_0x44656e[_0x619e95];return _0x206f85;},_0x3c3d(_0x2f5853,_0x45d7a3);}function getDeviceWithIp(_0xb78740){const _0x4af7c3=_0x199dd6;return devices[_0x4af7c3(0x2bf)](_0x39f508=>_0x39f508['ip']===_0xb78740);}function temporaryAccess2FA(_0x42b4e9,_0x2a2794){const _0x7e9a4=_0x199dd6;let _0x410e7c=new Date(),_0x459590=![];if(lastIpApproval){if(_0x410e7c-lastIpApproval<0x1388)_0x459590=!![];}lastIpApproval=new Date();if(_0x459590)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x7e9a4(0x2e1)](_0x7e9a4(0x27c)),tgBot[_0x7e9a4(0x2e3)](settings['telegramChatId'],_0x7e9a4(0x2a4)+normalizeIP(_0x2a2794)[_0x7e9a4(0x2fd)]+_0x7e9a4(0x1ce),{'parse_mode':_0x7e9a4(0x21d),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x7e9a4(0x1b5),'callback_data':'15'},{'text':_0x7e9a4(0x274),'callback_data':'30'},{'text':'reject','callback_data':_0x7e9a4(0x2c4)}]]}})['catch'](_0x26e561=>{telegramError(_0x26e561);}),tgBot['on']('callback_query',async _0x1fe5f1=>{const _0x53bd17=_0x7e9a4,_0xd07693=_0x1fe5f1[_0x53bd17(0x1fc)],_0x353c41=_0x1fe5f1[_0x53bd17(0x249)];tgBot[_0x53bd17(0x2eb)](_0x1fe5f1['id'])[_0x53bd17(0x214)](async()=>{const _0x565b04=_0x53bd17;devices[_0x42b4e9][_0x565b04(0x1be)]={'clientip':_0x2a2794,'timestamp':new Date()[_0x565b04(0x18b)](),'expiry':_0xd07693},_0xd07693!=_0x565b04(0x2c4)?(await tgBot[_0x565b04(0x2e3)](_0x353c41[_0x565b04(0x1e1)]['id'],_0x565b04(0x282)+_0xd07693+_0x565b04(0x266),{'parse_mode':_0x565b04(0x21d)})[_0x565b04(0x211)](_0x220ee5=>{telegramError(_0x220ee5);}),io['to'](_0x42b4e9)[_0x565b04(0x2a9)](_0x565b04(0x1de),{'access':{'allow':![],'reason':_0x565b04(0x2a0),'token':null}})):(await tgBot[_0x565b04(0x2e3)](_0x353c41['chat']['id'],'Temporary\x20access\x20rejected')[_0x565b04(0x211)](_0x3900c6=>{telegramError(_0x3900c6);}),io['to'](_0x42b4e9)[_0x565b04(0x2a9)](_0x565b04(0x1de),{'access':{'allow':![],'reason':_0x565b04(0x264),'token':null}}));}),tgBot[_0x53bd17(0x2e1)](_0x53bd17(0x27c));}));}function loginAccess2FA(_0x4c1f0e,_0x589c45){const _0x1cf451=_0x199dd6;tgBot&&settings[_0x1cf451(0x2c9)]&&(tgBot[_0x1cf451(0x2e1)](_0x1cf451(0x27c)),tgBot[_0x1cf451(0x2e3)](settings[_0x1cf451(0x2c9)],_0x1cf451(0x1c8)+normalizeIP(_0x589c45)[_0x1cf451(0x2fd)]+_0x1cf451(0x1ce),{'parse_mode':_0x1cf451(0x21d),'reply_markup':{'inline_keyboard':[[{'text':_0x1cf451(0x19c),'callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})['catch'](_0xcbf9a3=>{telegramError(_0xcbf9a3);}),tgBot['on'](_0x1cf451(0x27c),async _0x502dbc=>{const _0x248252=_0x1cf451,_0x3d55eb=_0x502dbc[_0x248252(0x1fc)],_0x464252=_0x502dbc[_0x248252(0x249)];tgBot[_0x248252(0x2eb)](_0x502dbc['id'])[_0x248252(0x214)](async()=>{const _0x1e696c=_0x248252;devices[_0x4c1f0e]['telegram2FaApproval']={'clientip':_0x589c45,'timestamp':new Date()[_0x1e696c(0x18b)](),'expiry':_0x3d55eb},_0x3d55eb!='reject'?(await tgBot[_0x1e696c(0x2e3)](_0x464252['chat']['id'],_0x1e696c(0x224),{'parse_mode':_0x1e696c(0x21d)})['catch'](_0x50b240=>{telegramError(_0x50b240);}),io['to'](_0x4c1f0e)[_0x1e696c(0x2a9)](_0x1e696c(0x1de),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x464252[_0x1e696c(0x1e1)]['id'],'Login\x20rejected')[_0x1e696c(0x211)](_0x46e1b0=>{telegramError(_0x46e1b0);}),io['to'](_0x4c1f0e)[_0x1e696c(0x2a9)](_0x1e696c(0x1de),{'access':{'allow':![],'reason':_0x1e696c(0x1a4),'token':null}}));}),tgBot['removeListener'](_0x248252(0x27c));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x15cea4=_0x199dd6;return dbConfig[_0x15cea4(0x2b1)]('bots')[_0x15cea4(0x253)]('botID')[_0x15cea4(0x297)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x5702d6=_0x199dd6;return dbConfig[_0x5702d6(0x2b1)](_0x5702d6(0x296))['sortBy'](_0x5702d6(0x1fd))[_0x5702d6(0x297)]({'status':_0x5702d6(0x1a9)})[_0x5702d6(0x229)]()||[];}function getBotAttributes(_0x38af0e){const _0x5d4fc9=_0x199dd6;let _0x2fac9e={};const _0x5bf14=configpath+_0x5d4fc9(0x20d)+_0x38af0e+_0x5d4fc9(0x32a),_0x25cb11=fs['existsSync'](_0x5bf14);if(_0x25cb11){const _0x36c574=fs[_0x5d4fc9(0x29f)](_0x5bf14);try{const _0x4ed070=JSON[_0x5d4fc9(0x2f6)](_0x36c574),_0x231bad=_0x4ed070?_0x4ed070['bot'][0x0]['headless']:![];_0x2fac9e[_0x5d4fc9(0x222)]=_0x231bad?_0x5d4fc9(0x31e):_0x5d4fc9(0x18d),_0x2fac9e[_0x5d4fc9(0x227)]=_0x4ed070?_0x4ed070[_0x5d4fc9(0x1fa)][0x0]['botname']:_0x5d4fc9(0x18c)+_0x38af0e;}catch(_0x5b2d97){_0x2fac9e[_0x5d4fc9(0x222)]=_0x5d4fc9(0x18d),_0x2fac9e[_0x5d4fc9(0x227)]=_0x5d4fc9(0x18c)+_0x38af0e;}}else _0x2fac9e[_0x5d4fc9(0x222)]=_0x5d4fc9(0x18d),_0x2fac9e[_0x5d4fc9(0x227)]=_0x5d4fc9(0x18c)+_0x38af0e;return _0x2fac9e;}function getBotsWithMode(){const _0x2a7325=_0x199dd6,_0x23e555=dbConfig[_0x2a7325(0x2b1)](_0x2a7325(0x296))[_0x2a7325(0x253)](_0x2a7325(0x1fd))[_0x2a7325(0x229)]()||[];return _0x23e555[_0x2a7325(0x29b)](_0x52e219=>{const _0x34295a=_0x2a7325;let _0xe4ae49=getBotAttributes(_0x52e219[_0x34295a(0x1fd)]);_0x52e219[_0x34295a(0x222)]=_0xe4ae49[_0x34295a(0x222)];}),_0x23e555;}function getBotExchanges(){const _0x574ed3=_0x199dd6;let _0x23e5cb=[];const _0x4340b7=dbConfig['get'](_0x574ed3(0x296))[_0x574ed3(0x253)](_0x574ed3(0x1fd))['value']()||[];_0x4340b7[_0x574ed3(0x29b)](_0x2be9db=>{const _0x17b7a6=_0x574ed3;if(_0x2be9db[_0x17b7a6(0x1de)]=='enabled'){const _0x2d66ab=configpath+'bot-'+_0x2be9db[_0x17b7a6(0x1fd)]+'-config.json',_0x3197bb=fs[_0x17b7a6(0x327)](_0x2d66ab);let _0x2bf42e;if(_0x3197bb){const _0x4a67a8=fs[_0x17b7a6(0x29f)](_0x2d66ab);try{const _0x4f63f6=JSON[_0x17b7a6(0x2f6)](_0x4a67a8);_0x2bf42e=_0x4f63f6?_0x4f63f6['bot'][0x0][_0x17b7a6(0x2a8)]:null;}catch(_0x228296){}}if(_0x2bf42e)_0x23e5cb[_0x17b7a6(0x1ea)](_0x2bf42e);}});const _0x2ba63c=[...new Set(_0x23e5cb)][_0x574ed3(0x26f)]();return _0x2ba63c;}async function initUser(){const _0x802853=_0x199dd6;if(!settings[_0x802853(0x2ee)]){const _0x474bab=uuidRandom();mixpanel[_0x802853(0x328)](_0x474bab),updateSetting('userid',_0x474bab);}}function _0x206f(){const _0x2070c0=['Unauthorized\x20attempt\x20to\x20place\x20market\x20order','No\x20bots\x20running\x20right\x20now','writeFileSync','status','temporary\x20access\x20timeout','hybrid-crypto-js','chat','toString','node-zip','sockets','sendFile','kind','bbvNew','reset-password','title','push','enabled\x20Bot\x20','file','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','1886932pbvsYe','.zip','bbPassword','\x20(2)','-results.json','-events.json','idling\x20bot\x20\x20\x20|\x20Bot\x20','timeshift','telegramEnabled','telegramEvents','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','***','bot','Invalid\x20authentication\x20token\x20(2)','data','botID','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','pidExpireLogin','live','compareSync','/:bot','sha256','_data','yargs/yargs','temporary\x20access\x20not\x20allowed','onText','slice','8LnHibs','1600866sVeYgJ','$1_$2_$3','logged\x20out','bot-','Notifications\x20disabled\x0a','util','conn','catch','2FA\x20login\x20required','privateKey','then','allow','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','replace','zip/','bb-secure.json','getMinutes','getDate','express-fileupload','HTML','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','remove','alerts','Unauthorized\x20attempt\x20to\x20log\x20out','mode','f2aRequired','Login\x20accepted','get-messages','\x20mode','botname','Restore\x20process\x20aborted','value','ipv6','orders','No\x20authentication\x20token','telegram2FaApproval','access','randomBytes','-----------------------------------------------------------------------------------','\x20only\x0a','hashSync','secure','listen','connection','getMonth','isValid','login\x20token\x20valid','output-002.log','graphql-request','name','Notifications\x20enabled\x0a','ipaddr.js','update-bot','username','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','bbUsername','all','\x20to\x20','exec','127.0.0.1','length','lowdb','generate','message','/:bot/coins','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','expiry','started','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','showname','match','exp','updatebotmanager','sortBy','update-bb','deleteHistoryAlerts','split','Bot\x20Mgr\x20>\x20','telegrammsg','44HqAXqw','toggle-bot-mode','getHours','add','new-disabled','All\x20bots\x20running\x20right\x20now','simple','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','yes','2FA\x20login\x20token\x20generated','All','temporary\x20access\x20rejected','settings','\x20minutes','mixpanel','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Unauthorized\x20attempt\x20to\x20get\x20logs','version.json','fork','settings.','track','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','sort','success','token','temp/','/:bot/history','30\x20min','mkdirSync','crypto','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','uuid','clientip','error','Notifications\x20disabled','callback_query','build','connected','(((.+)+)+)+$','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','telegramUsername','Access\x20enabled\x20for\x20','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','301058EZXlgV','max',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','pidRefreshToken','Notifications\x20enabled','randomFillSync','cancelLoading','3741605HfMfiu','getSeconds','createWriteStream','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','copyFileSync','1628690tUXhwC','removeAllListeners','Unauthorized\x20attempt\x20to\x20update\x20bot','running','blacklist','whitelist','bots','filter','hasOwnProperty','/help\x20-\x20show\x20available\x20commands\x0a','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','forEach','http','Alerts','Unauthorized\x20attempt\x20to\x20show\x20configuration','readFileSync','reload','RSA-OAEP','3jrICKg','788185UgfKsL','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','placeOrder','readdirSync','use','exchange','emit','warning','logout','date-fns','bot.js','error\x20while\x20deleting\x20config\x20files:\x20','secret','sendPortfolioTelegram','get','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','SIGINT','disconnect','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','post','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','index.html','keys','format','once','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','full','argv','find','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','storeHeadless','reject','delete-alerts','join','************','emitHistory','telegramChatId','sign','get-starting-balances','startsWith','assign','lowdb/adapters/FileSync','Password\x20reset\x20rejected','request','/status\x20-\x20show\x20bot(s)\x20status\x0a','Unauthorized\x20login\x20attempt\x20(timeout)','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','auth','statSync','headless','store','clients','/names\x20-\x20show\x20bot\x20names\x0a','DEFLATE','6AeGEiF','new','stop','/update\x20-\x20update\x20Balance\x20Bot\x0a','Error:\x20Invalid\x20argument\x20','0.0.0','removeListener','node-telegram-bot-api','sendMessage','login\x20token\x20generated','exit','axios','constructor','deleted\x20Bot\x20','jsonwebtoken','invalid\x20credentials','answerCallbackQuery','starting\x20bot\x20|\x20Bot\x20','uncaughtException','userid','login\x20required','event','order','messages','<b>Balance\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20update\x20settings','login\x20not\x20required','parse','function','includes','Unauthorized\x20attempt\x20to\x20delete\x20alerts','1FELKeK','static','Invalid\x20username\x20or\x20IP\x20address','show','inherit','min','search','/:bot/configuration','write','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','handshake','publicKey','config/','/:bot/support','::1','decrypt','express','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','telegram','Invalid\x20Telegram\x20token','rmSync','loginRequired','tkn','confirm-message','23610420TXnSKn','socket','apiKey','output-000.log','remoteAddress','/download/:type','socket.io','store-headless',':\x20Bot\x20Mgr\x20>\x20','All\x20bots','showConfig','send','auto','Unauthorized\x20attempt\x20to\x20get\x20messages','Crypt','download','\x20(1)','Unauthorized\x20attempt\x20to\x20confirm\x20message','test','temporary\x20token\x20generated','log','existsSync','alias','File\x20uploaded','-config.json','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','build2','Server','Markdown','timestamp','\x20|\x20','kill','createServer','latestversion','reason','cloneDeep','enabled','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','host','getTime','Bot\x20','manual','3000','backup','botmanager','stopPolling','getStartingBalances','place-order','notification','any','apply','temporaryAccessAllowed','version','login','child_process','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','accept','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','get-portfolio','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','isDirectory','defaults','padStart','2FA\x20login\x20rejected','1000','bb/','https://api.ipify.org?format=json','path','disabled','telegramToken','binary','user','2FA\x20required','apiSecret','Unauthorized\x20attempt\x20to\x20delete\x20bot','You\x20can\x20use\x20the\x20following\x20commands:\x0a','polling_error','getUTCHours','Unauthorized\x20attempt\x20to\x20store\x20configuration','entries','15\x20min','unlinkSync','<b>Telegram\x20Bot\x20Status:</b>\x0a','lastmsgtelegram','bcryptjs','number','uuid-random','logs','initclient','telegramIpApproval','stopped','show-config','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bbvReceive','referer','from','bb-config.json','api-eu.mixpanel.com','restarting\x20Bot\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','stringify','files','output-001.log',',\x20must\x20be\x20a\x204\x20digit\x20number','headers','</b>\x20?','Ok,\x20will\x20send\x20alert\x20notifications\x20only','bb-settings.json','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','type','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','User\x20has\x20been\x20validated','getPortfolio','set','ipc','lastmsgemitted','SIGTERM','port'];_0x206f=function(){return _0x2070c0;};return _0x206f();}async function initSecure(){const _0x2ea735=_0x199dd6;let _0x52cc1b=getSecure();if(!_0x52cc1b[_0x2ea735(0x298)]('secret')){let _0x4c551b=await generateKeys();_0x52cc1b[_0x2ea735(0x305)]=_0x4c551b[_0x2ea735(0x305)],_0x52cc1b[_0x2ea735(0x213)]=_0x4c551b['privateKey'],_0x52cc1b['secret']=crypto[_0x2ea735(0x22f)](0x20)[_0x2ea735(0x1e2)]('hex');;storeSecure(_0x52cc1b);}}function getSettings(){const _0x554cb3=_0x199dd6;return dbSettings['get'](_0x554cb3(0x265))[_0x554cb3(0x229)]()||{};}function getSecure(){const _0x8e24dc=_0x199dd6;return dbSecure[_0x8e24dc(0x2b1)](_0x8e24dc(0x233))['value']()||{};}function getBlacklist(){const _0x163a5e=_0x199dd6;return dbSecure[_0x163a5e(0x2b1)]('blacklist')[_0x163a5e(0x229)]()||[];}function broadcastToBots(_0x415c30,_0x548f2d){const _0x521b1a=_0x199dd6;config[_0x521b1a(0x29b)](_0x5f2578=>{const _0x7e0459=_0x521b1a;if(_0x5f2578[_0x7e0459(0x1de)]==_0x7e0459(0x188)&&_0x5f2578[_0x7e0459(0x200)]==_0x7e0459(0x293)){if(pid[_0x5f2578[_0x7e0459(0x1fd)]])pid[_0x5f2578[_0x7e0459(0x1fd)]][_0x7e0459(0x31d)]({[_0x415c30]:_0x548f2d});}});}function storeSettings(_0x2bae19,_0x3b7e94=![]){const _0x213401=_0x199dd6;_0x2bae19={...settings,..._0x2bae19};if(_0x3b7e94&&_0x2bae19[_0x213401(0x1f0)]!=_0x213401(0x2c7)&&_0x2bae19[_0x213401(0x1f0)]!=_0x213401(0x1f9)&&_0x2bae19[_0x213401(0x1f0)]!=''){const _0x7923ae=crypt[_0x213401(0x309)](secure['privateKey'],_0x2bae19[_0x213401(0x1f0)])[_0x213401(0x249)][_0x213401(0x256)]('@')[0x0],_0x5dd6c8=bcrypt['hashSync'](_0x7923ae,saltRounds);_0x2bae19={..._0x2bae19,'bbPassword':_0x5dd6c8};}if(_0x3b7e94&&_0x2bae19[_0x213401(0x1aa)]!='************'&&_0x2bae19[_0x213401(0x1aa)]!=_0x213401(0x1f9)&&_0x2bae19['telegramToken']!=''){const _0xc23a78=crypt['decrypt'](secure[_0x213401(0x213)],_0x2bae19['telegramToken'])[_0x213401(0x249)][_0x213401(0x256)]('@')[0x0];_0x2bae19={..._0x2bae19,'telegramToken':_0xc23a78};}const _0x1dda44=_0x2bae19[_0x213401(0x1aa)]!=_0x213401(0x2c7)&&_0x2bae19[_0x213401(0x1aa)]!=settings[_0x213401(0x1aa)]||_0x2bae19[_0x213401(0x281)]!=settings[_0x213401(0x281)],_0xda5410=_0x2bae19[_0x213401(0x1aa)]==''||_0x2bae19[_0x213401(0x281)]=='';if(_0x1dda44)_0x2bae19[_0x213401(0x1f7)]=_0x213401(0x242);for(const [_0x4cb812,_0xe953a6]of Object[_0x213401(0x1b4)](_0x2bae19)){if(_0x4cb812==_0x213401(0x1aa)&&_0xe953a6==_0x213401(0x2c7)){_0x2bae19['telegramToken']=settings['telegramToken'];continue;};if(_0x4cb812==_0x213401(0x1f0)&&_0xe953a6=='************'){_0x2bae19['bbPassword']=settings[_0x213401(0x1f0)];continue;};dbSettings['set'](_0x213401(0x26c)+_0x4cb812,_0xe953a6)['write']();}settings=_0x2bae19,io['to']('botmanager')[_0x213401(0x2a9)](_0x213401(0x265),cleanSettings()),broadcastToBots(_0x213401(0x1f5),settings[_0x213401(0x1f5)]);if(_0x1dda44&&!_0xda5410)initTelegram();if(_0x1dda44&&_0xda5410)disableTelegram();getAllClients()['forEach'](_0x37b94b=>{const _0x3a5708=_0x213401;getSocket(_0x37b94b['id'])[_0x3a5708(0x2a9)](_0x3a5708(0x1de),{'access':{'allow':![],'reason':_0x3a5708(0x2a0),'token':null}});});}function updateSetting(_0x1125d8,_0x3c3015){const _0x5dd552=_0x199dd6;dbSettings[_0x5dd552(0x1d6)](_0x5dd552(0x26c)+_0x1125d8,_0x3c3015)[_0x5dd552(0x302)](),settings=getSettings(),io['to'](_0x5dd552(0x190))[_0x5dd552(0x2a9)](_0x5dd552(0x265),cleanSettings());}function storeSecure(_0x5eb302){const _0x52484b=_0x199dd6;dbSecure['get']('secure')[_0x52484b(0x1ea)](_0x5eb302)[_0x52484b(0x302)](),secure=_0x5eb302;}function addBlacklist(_0x51de94){const _0x2671b1=_0x199dd6;cleanBlacklist();let _0x555f9d;devices[_0x51de94][_0x2671b1(0x1be)]?_0x555f9d=Math[_0x2671b1(0x285)](devices[_0x51de94][_0x2671b1(0x1be)][_0x2671b1(0x24c)],loginExpiry):_0x555f9d=loginExpiry,dbSecure['get'](_0x2671b1(0x294))['push']({'expiry':new Date()[_0x2671b1(0x18b)]()+_0x555f9d*0x3c*0x3e8,'token':devices[_0x51de94][_0x2671b1(0x22e)]['token']})[_0x2671b1(0x302)](),blacklist=dbSecure[_0x2671b1(0x2b1)](_0x2671b1(0x294))['value']();}function cleanBlacklist(){const _0x4d3a03=_0x199dd6;let _0x129012=dbSecure['get'](_0x4d3a03(0x294))[_0x4d3a03(0x187)]()[_0x4d3a03(0x229)](),_0x39ae89=new Date()[_0x4d3a03(0x18b)]();_0x129012['forEach'](_0x2f1c53=>{const _0x2bb347=_0x4d3a03;_0x2f1c53['expiry']<_0x39ae89&&dbSecure[_0x2bb347(0x2b1)](_0x2bb347(0x294))[_0x2bb347(0x21f)]({'expiry':_0x2f1c53[_0x2bb347(0x24c)]})[_0x2bb347(0x302)]();});}function initStates(){const _0x4bf4bb=_0x199dd6;let _0x2cab76=getConfiguration();_0x2cab76[_0x4bf4bb(0x29b)](_0x2c4dbf=>{const _0x2ea17f=_0x4bf4bb;_0x2c4dbf[_0x2ea17f(0x200)]=_0x2ea17f(0x1bf);}),storeConfiguration(_0x2cab76);}function onKeys(){const _0x620ba3=new RSA();return new Promise(_0xe33224=>{const _0xc7a110=_0x3c3d;_0x620ba3['generateKeyPairAsync']()[_0xc7a110(0x214)](_0x5d68e2=>{_0xe33224(_0x5d68e2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x491f7f=_0x199dd6;let _0x24e4db=getSettings(),_0xfa88d6=![];!_0x24e4db[_0x491f7f(0x298)](_0x491f7f(0x1b8))&&(_0x24e4db[_0x491f7f(0x1b8)]=0x0,_0xfa88d6=!![]);!_0x24e4db[_0x491f7f(0x298)]('lastmsgemitted')&&(_0x24e4db[_0x491f7f(0x1d8)]=0x0,_0xfa88d6=!![]);!_0x24e4db[_0x491f7f(0x298)](_0x491f7f(0x185))&&(_0x24e4db[_0x491f7f(0x185)]=_0x491f7f(0x2e0),_0xfa88d6=!![]);if(_0xfa88d6)storeSettings(_0x24e4db);}function storeConfiguration(_0x1f402f){const _0x1f948f=_0x199dd6;dbConfig[_0x1f948f(0x2b1)](_0x1f948f(0x296))[_0x1f948f(0x21f)]()[_0x1f948f(0x302)](),_0x1f402f[_0x1f948f(0x29b)](_0x4b6019=>{const _0x13b57b=_0x1f948f;delete _0x4b6019[_0x13b57b(0x222)];}),dbConfig[_0x1f948f(0x2b1)](_0x1f948f(0x296))['push'](..._0x1f402f)['write'](),config=_0x1f402f;}function resetPassword(){const _0x5f013f=_0x199dd6;tgBot&&settings[_0x5f013f(0x2c9)]&&(tgBot[_0x5f013f(0x2e1)](_0x5f013f(0x27c)),tgBot['sendMessage'](settings[_0x5f013f(0x2c9)],_0x5f013f(0x2c2),{'parse_mode':_0x5f013f(0x21d),'reply_markup':{'inline_keyboard':[[{'text':_0x5f013f(0x261),'callback_data':_0x5f013f(0x261)},{'text':'no','callback_data':'no'}]]}})[_0x5f013f(0x211)](_0x5e4883=>{telegramError(_0x5e4883);}),tgBot['on'](_0x5f013f(0x27c),async _0x3b92f3=>{const _0x389d7d=_0x5f013f,_0x1857d4=_0x3b92f3[_0x389d7d(0x1fc)],_0x28df99=_0x3b92f3[_0x389d7d(0x249)];tgBot[_0x389d7d(0x2eb)](_0x3b92f3['id'])[_0x389d7d(0x214)](async()=>{const _0x28b77b=_0x389d7d;if(_0x1857d4!='no'){const _0x37b989=0xf,_0x27af92='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x67d2ab=Array[_0x28b77b(0x1c4)](crypto[_0x28b77b(0x289)](new Uint32Array(_0x37b989)))['map'](_0x59c8a3=>_0x27af92[_0x59c8a3%_0x27af92[_0x28b77b(0x246)]])['join'](''),_0x290a90=bcrypt[_0x28b77b(0x232)](_0x67d2ab,saltRounds);storeSettings({'bbPassword':_0x290a90}),await tgBot[_0x28b77b(0x2e3)](_0x28df99[_0x28b77b(0x1e1)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x67d2ab,{'parse_mode':_0x28b77b(0x21d)})[_0x28b77b(0x211)](_0x1af8dd=>{telegramError(_0x1af8dd);});}else await tgBot[_0x28b77b(0x2e3)](_0x28df99[_0x28b77b(0x1e1)]['id'],_0x28b77b(0x2cf))['catch'](_0x3b0ea8=>{telegramError(_0x3b0ea8);});}),tgBot['removeListener'](_0x389d7d(0x27c));}));}async function confirmRestore(_0x43dc1b,_0x3e5c31){const _0x3515f8=_0x199dd6;tgBot&&settings[_0x3515f8(0x2c9)]&&(tgBot[_0x3515f8(0x2e1)]('callback_query'),await tgBot[_0x3515f8(0x2e3)](settings['telegramChatId'],_0x3515f8(0x283),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3515f8(0x261),'callback_data':_0x3515f8(0x261)},{'text':'no','callback_data':'no'}]]}})[_0x3515f8(0x211)](_0x2d790d=>{telegramError(_0x2d790d);}),tgBot['on'](_0x3515f8(0x27c),async _0x5c6dc5=>{const _0x5deb29=_0x3515f8,_0x88eece=_0x5c6dc5[_0x5deb29(0x1fc)],_0x3c9c1e=_0x5c6dc5[_0x5deb29(0x249)];tgBot[_0x5deb29(0x2eb)](_0x5c6dc5['id'])[_0x5deb29(0x214)](async()=>{const _0xeeb1c9=_0x5deb29;_0x88eece==_0xeeb1c9(0x261)?(await tgBot['sendMessage'](_0x3c9c1e[_0xeeb1c9(0x1e1)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0xeeb1c9(0x21d)})['catch'](_0x2a8ecd=>{telegramError(_0x2a8ecd);}),unzipFile(_0x43dc1b,_0x3e5c31)):await tgBot[_0xeeb1c9(0x2e3)](_0x3c9c1e[_0xeeb1c9(0x1e1)]['id'],_0xeeb1c9(0x228))[_0xeeb1c9(0x211)](_0x53ee8a=>{telegramError(_0x53ee8a);});}),tgBot[_0x5deb29(0x2e1)](_0x5deb29(0x27c));}));}function getServerTime(){const _0x6aff01=_0x199dd6,_0x98ede9=new Date();return _0x98ede9['getFullYear']()+'/'+(_0x98ede9[_0x6aff01(0x236)]()+0x1)[_0x6aff01(0x1e2)]()[_0x6aff01(0x1a3)](0x2,'0')+'/'+_0x98ede9[_0x6aff01(0x21b)]()['toString']()[_0x6aff01(0x1a3)](0x2,'0')+'\x20'+_0x98ede9[_0x6aff01(0x25b)]()[_0x6aff01(0x1e2)]()['padStart'](0x2,'0')+':'+_0x98ede9[_0x6aff01(0x21a)]()[_0x6aff01(0x1e2)]()[_0x6aff01(0x1a3)](0x2,'0')+':'+_0x98ede9[_0x6aff01(0x28c)]()[_0x6aff01(0x1e2)]()[_0x6aff01(0x1a3)](0x2,'0');}function getTimeStamp(){const _0x4a9cb5=_0x199dd6,_0x279f5c=shiftedTime();return _0x279f5c['getFullYear']()+'/'+(_0x279f5c[_0x4a9cb5(0x236)]()+0x1)['toString']()[_0x4a9cb5(0x1a3)](0x2,'0')+'/'+_0x279f5c['getDate']()[_0x4a9cb5(0x1e2)]()['padStart'](0x2,'0')+'\x20'+_0x279f5c[_0x4a9cb5(0x25b)]()[_0x4a9cb5(0x1e2)]()['padStart'](0x2,'0')+':'+_0x279f5c[_0x4a9cb5(0x21a)]()[_0x4a9cb5(0x1e2)]()[_0x4a9cb5(0x1a3)](0x2,'0')+':'+_0x279f5c[_0x4a9cb5(0x28c)]()[_0x4a9cb5(0x1e2)]()[_0x4a9cb5(0x1a3)](0x2,'0');}function shiftedTime(){const _0x5ee304=_0x199dd6,_0x3b0e42=new Date();let _0x25b5f5=_0x3b0e42;if(settings['timeshift']&&settings[_0x5ee304(0x1f5)]!==0x0)_0x25b5f5=fns[_0x5ee304(0x25c)](_0x3b0e42,{'hours':settings[_0x5ee304(0x1f5)]});return _0x25b5f5;}function startScheduler(){const _0x2f2a93=_0x199dd6,_0x156cb1=new Date()[_0x2f2a93(0x1b2)](),_0x3a1ba0=shiftedTime()[_0x2f2a93(0x25b)]();_0x3a1ba0==0x4&&backupConfigFiles();_0x3a1ba0==0x0&&rotateLogFiles();_0x156cb1%0x6==0x0&&triggerAnalytics();_0x156cb1%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x575907=_0x199dd6;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x575907(0x29b)](_0x3e3e45=>{const _0x459cff=_0x575907;if(!_0x3e3e45[_0x459cff(0x1a1)]())fs[_0x459cff(0x28f)](configpath+_0x3e3e45['name'],configbackuppath+_0x3e3e45[_0x459cff(0x23b)]);});}function rotateLogFiles(){const _0xfa2df8=_0x199dd6,_0x230ae4=fs[_0xfa2df8(0x2d5)](logspath+_0xfa2df8(0x315)),_0xecd77=_0x230ae4['size']/0x400;if(_0xecd77>0x32){let _0x167ffe=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x167ffe[_0xfa2df8(0x26f)]((_0x1e5a5b,_0x1093b7)=>_0x1e5a5b[_0xfa2df8(0x23b)]<_0x1093b7[_0xfa2df8(0x23b)]?0x1:_0x1093b7['name']<_0x1e5a5b[_0xfa2df8(0x23b)]?-0x1:0x0),_0x167ffe[_0xfa2df8(0x29b)](_0xe2830b=>{const _0x2e45de=_0xfa2df8;if(_0xe2830b[_0x2e45de(0x23b)]=='output-002.log')fs[_0x2e45de(0x28f)](logspath+_0xe2830b[_0x2e45de(0x23b)],logspath+'output-003.log');if(_0xe2830b[_0x2e45de(0x23b)]=='output-001.log')fs[_0x2e45de(0x28f)](logspath+_0xe2830b[_0x2e45de(0x23b)],logspath+_0x2e45de(0x239));_0xe2830b['name']=='output-000.log'&&(fs[_0x2e45de(0x28f)](logspath+_0xe2830b[_0x2e45de(0x23b)],logspath+_0x2e45de(0x1cb)),fs[_0x2e45de(0x1dd)](logspath+_0xe2830b['name'],''));});}}async function zipFiles(_0x330174){const _0x1589c1=_0x199dd6;let _0x583b9d;if(_0x330174==_0x1589c1(0x1bc))_0x583b9d=logspath;if(_0x330174==_0x1589c1(0x18f))_0x583b9d=configpath;let _0x39d428=fs['readdirSync'](_0x583b9d,{'withFileTypes':!![]});const _0x749362=new require(_0x1589c1(0x1e3))();_0x39d428['forEach'](_0xccfbd8=>{const _0x1e55f4=_0x1589c1;if(!_0xccfbd8['isDirectory']()){let _0x56ebdc=fs['readFileSync'](_0x583b9d+_0xccfbd8['name']);const _0x4a1c7c=/^bot-[0-9]{3}-config.json$/,_0x398d3e=_0x4a1c7c['test'](_0xccfbd8[_0x1e55f4(0x23b)]);if(_0x398d3e){const _0x466e34=JSON[_0x1e55f4(0x2f6)](_0x56ebdc);_0x466e34['bot'][0x0]['apiKey']=_0x1e55f4(0x1f9),_0x466e34[_0x1e55f4(0x1fa)][0x0][_0x1e55f4(0x1ae)]=_0x1e55f4(0x1f9),_0x56ebdc=JSON['stringify'](_0x466e34,null,0x2);}if(_0xccfbd8[_0x1e55f4(0x23b)]==_0x1e55f4(0x1d0)){const _0x4e09bf=JSON[_0x1e55f4(0x2f6)](_0x56ebdc);if(_0x4e09bf[_0x1e55f4(0x265)][_0x1e55f4(0x30f)])_0x4e09bf['settings'][_0x1e55f4(0x30f)]=![];if(_0x4e09bf['settings']['bbPassword'])_0x4e09bf[_0x1e55f4(0x265)]['bbPassword']=_0x1e55f4(0x1f9);if(_0x4e09bf[_0x1e55f4(0x265)][_0x1e55f4(0x1aa)])_0x4e09bf[_0x1e55f4(0x265)][_0x1e55f4(0x1aa)]=_0x1e55f4(0x1f9);if(_0x4e09bf[_0x1e55f4(0x265)][_0x1e55f4(0x2c9)])_0x4e09bf['settings'][_0x1e55f4(0x2c9)]=null;_0x56ebdc=JSON[_0x1e55f4(0x1c9)](_0x4e09bf,null,0x2);}if(_0xccfbd8[_0x1e55f4(0x23b)]!=_0x1e55f4(0x219))_0x749362[_0x1e55f4(0x1ec)](_0xccfbd8[_0x1e55f4(0x23b)],_0x56ebdc);}});const _0x196e1f=_0x749362[_0x1589c1(0x248)]({'base64':![],'compression':_0x1589c1(0x2da)});fs[_0x1589c1(0x1dd)](zippath+(_0x330174+_0x1589c1(0x1ef)),_0x196e1f,_0x1589c1(0x1ab));}async function unzipFile(_0x30b27a,_0x56a54e){const _0x2350de=_0x199dd6;await backupConfigFiles(),fs[_0x2350de(0x2a6)](configpath,{'withFileTypes':!![]})['forEach'](_0x45c05f=>{const _0x1d9329=_0x2350de;if(!_0x45c05f[_0x1d9329(0x1a1)]())fs[_0x1d9329(0x30e)](configpath+_0x45c05f[_0x1d9329(0x23b)]);});const _0xc645de=fs['readFileSync'](_0x30b27a+_0x56a54e,_0x2350de(0x1ab)),_0x428346=new require(_0x2350de(0x1e3))(_0xc645de,{'base64':![],'checkCRC32':!![]});Object[_0x2350de(0x2b9)](_0x428346[_0x2350de(0x1ca)])[_0x2350de(0x29b)](_0x416d05=>{const _0x2ee270=_0x2350de,_0x1fedf0=_0x428346[_0x2ee270(0x1ca)][_0x416d05];fs[_0x2ee270(0x1dd)](configpath+_0x1fedf0[_0x2ee270(0x23b)],_0x1fedf0[_0x2ee270(0x204)]);}),fs[_0x2350de(0x2a6)](temppath,{'withFileTypes':!![]})['forEach'](_0x5b5604=>{const _0x37b953=_0x2350de;if(!_0x5b5604[_0x37b953(0x1a1)]())fs[_0x37b953(0x30e)](temppath+_0x5b5604[_0x37b953(0x23b)]);}),process[_0x2350de(0x31d)]({'restore':!![]},_0x214ae1=>{});}async function getPublicIp(){const _0x1cf947=_0x199dd6;try{const _0x50f869=await axios['get'](_0x1cf947(0x1a7));publicip=_0x50f869['data']['ip'];}catch(_0x25778d){}}async function triggerAnalytics(){const _0x118b76=_0x199dd6;if(!publicip)await getPublicIp();const _0x4339f1=getBotsWithMode();let _0x142347=0x0;_0x4339f1[_0x118b76(0x29b)](_0x550b6b=>{if(_0x550b6b['status']==='enabled')_0x142347++;});const _0x2a630a=getBotExchanges();mixpanel[_0x118b76(0x26d)](_0x118b76(0x32d),{'distinct_id':settings[_0x118b76(0x2ee)],'ip':publicip,'version':serverversion,'numbots':_0x4339f1['length'],'numbotsenabled':_0x142347,'exchanges':_0x2a630a});}async function getMessages(){const _0x48798d=_0x199dd6,_0x2e0565=_0x48798d(0x30b),_0xc1981f=new GraphQLClient(_0x2e0565),_0x305acf={'authorization':_0x48798d(0x1d3)},_0x3a1804=serverversion['split']('.'),_0x56a8c6=_0x3a1804[0x0]+'.'+_0x3a1804[0x1],_0x424e6d=Math[_0x48798d(0x2ff)](settings[_0x48798d(0x1b8)],settings['lastmsgemitted']),_0x7624f2={'last':parseInt(_0x424e6d),'bbm':_0x56a8c6},_0x294067=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3215bc;try{_0x3215bc=await _0xc1981f[_0x48798d(0x2d0)](_0x294067,_0x7624f2,_0x305acf);}catch(_0x4d3995){}if(_0x3215bc&&_0x3215bc[_0x48798d(0x2f2)]){let _0x19d773=settings['lastmsgtelegram'];newMessages=[];for(const _0x259a9f of _0x3215bc[_0x48798d(0x2f2)]){newMessages['push'](_0x259a9f);if(_0x259a9f[_0x48798d(0x1e7)])updateSetting('latestversion',_0x259a9f[_0x48798d(0x1e7)]);let _0x21d1a9=_0x259a9f[_0x48798d(0x1e7)]?serverversion>=_0x259a9f[_0x48798d(0x1e7)]:![];if(!_0x21d1a9&&_0x259a9f['number']>_0x19d773){if(_0x259a9f['bbvReceive']===_0x48798d(0x195)||serverversion[_0x48798d(0x2cc)](_0x259a9f[_0x48798d(0x1c2)])){let _0x1d8481=''+_0x259a9f[_0x48798d(0x1e9)]+'\x0a\x0a'+_0x259a9f[_0x48798d(0x249)];const _0x50890b=await sendTelegramMsg(toTelegramMarkdown(_0x1d8481),_0x48798d(0x32e));if(_0x50890b)_0x19d773=_0x259a9f[_0x48798d(0x1ba)];}}}updateAvailable=isNewerVersion(settings[_0x48798d(0x185)],serverversion),updateSetting(_0x48798d(0x1b8),_0x19d773),emitMessages();}}function emitMessages(){const _0x193231=_0x199dd6,_0x984ea6=settings[_0x193231(0x1d8)];let _0x540e4a=[];newMessages[_0x193231(0x29b)](_0x19adce=>{const _0x309608=_0x193231;_0x19adce[_0x309608(0x1ba)]>_0x984ea6&&_0x540e4a['push'](_0x19adce);}),_0x540e4a['length']>0x0&&getAllClients()[_0x193231(0x29b)](_0x5e1de4=>{const _0x886472=_0x193231;getSocket(_0x5e1de4['id'])[_0x886472(0x2a9)]('message',_0x540e4a);});}function confirmMessage(_0x50e701){const _0xf0b90=_0x199dd6;updateSetting(_0xf0b90(0x1d8),Number(_0x50e701));}function isNewerVersion(_0x14348f,_0x9fb69c){const _0x547e70=_0x199dd6,_0xda57af=_0x9fb69c[_0x547e70(0x256)]('.'),_0x2a6a98=_0x14348f['split']('.');for(var _0x1284b3=0x0;_0x1284b3<_0x2a6a98[_0x547e70(0x246)];_0x1284b3++){const _0x2a0265=~~_0x2a6a98[_0x1284b3],_0x399f58=~~_0xda57af[_0x1284b3];if(_0x2a0265>_0x399f58)return!![];if(_0x2a0265<_0x399f58)return![];}return![];}function toTelegramMarkdown(_0x16b1a5){const _0x19b1f1=_0x199dd6,_0xb02db7=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x7f0748=/\*{2}(.+?)\*{2}/gim;return _0x16b1a5=_0x16b1a5[_0x19b1f1(0x217)](_0xb02db7,_0x19b1f1(0x20b))[_0x19b1f1(0x217)](_0x7f0748,'*$1*'),_0x16b1a5;}async function validateConfigFile(){const _0x34ac92=_0x199dd6,_0x123a3c=dbConfig['get'](_0x34ac92(0x296))['sortBy'](_0x34ac92(0x1fd))[_0x34ac92(0x229)]()||[];if(_0x123a3c[_0x34ac92(0x246)]==0x0){let _0x5118e5=0x0,_0x15afd6=[];const _0x318a11=/^bot-([0-9]{3})-config.json$/,_0x299e59=fs[_0x34ac92(0x2a6)](configpath);_0x299e59[_0x34ac92(0x29b)](_0x3b7898=>{const _0x93441e=_0x34ac92,_0x192945=_0x318a11[_0x93441e(0x244)](_0x3b7898);if(_0x192945){const _0x17af32=_0x192945[0x1];let _0x3b559d=getBotAttributes(_0x17af32);_0x15afd6['push']({'botID':_0x17af32,'botname':_0x3b559d[_0x93441e(0x227)],'status':_0x93441e(0x1a9),'live':_0x93441e(0x1bf)}),_0x5118e5++;}}),_0x5118e5!=0x0&&(dbConfig[_0x34ac92(0x2b1)](_0x34ac92(0x296))['assign'](_0x15afd6)[_0x34ac92(0x302)](),config=_0x15afd6,restoredConfigFile=_0x5118e5);}}async function restoreConfigNotify(_0x356838){const _0x552484=_0x199dd6;let _0x4b2c6d;if(restoredConfigFile==0x1)_0x4b2c6d=_0x552484(0x32b);else _0x4b2c6d=_0x552484(0x2d3);if(_0x356838)io['to'](_0x552484(0x190))[_0x552484(0x2a9)](_0x552484(0x194),_0x4b2c6d);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x552484(0x25f)](_0x4b2c6d),logger[_0x552484(0x25f)](_0x552484(0x230)),logger[_0x552484(0x25f)]('');if(tgBot&&settings[_0x552484(0x2c9)]&&settings['telegramEvents']!='orders')tgBot[_0x552484(0x2e3)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x4b2c6d)[_0x552484(0x211)](_0x3a0e54=>{telegramError(_0x3a0e54);});}}function validateCredentials(_0x487c09,_0x41a7a4){const _0x1b423b=_0x199dd6;if(_0x487c09['username']==settings[_0x1b423b(0x241)]&&bcrypt[_0x1b423b(0x201)](_0x487c09['password'],settings[_0x1b423b(0x1f0)])){if(settings[_0x1b423b(0x223)])return{'allow':![],'reason':_0x1b423b(0x212),'token':null};else{const _0x133944=generateLoginToken(_0x41a7a4);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x133944};}}else return{'allow':![],'reason':_0x1b423b(0x2ea),'token':null};}function refreshToken(_0x5cba53){const _0x588ba7=_0x199dd6,_0x25b64b=generateLoginToken(_0x5cba53);return{'allow':!![],'reason':_0x588ba7(0x2e4),'token':_0x25b64b};}function validateAccess(_0x4e27e3,_0x572af6,_0x5412d3){const _0x45fe20=_0x199dd6,_0x34684b=_0x5412d3?_0x5412d3:devices[_0x572af6]['ip'];let _0xc0d178;const _0x1e05c9=_0x2f9926=>{const _0xbe5844=_0x3c3d;if(settings[_0xbe5844(0x30f)]){if(settings[_0xbe5844(0x223)]){if(telegram2FaApproved(_0x572af6)){const _0x3455ad=generateLoginToken(_0x572af6);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x3455ad};}else return{'allow':![],'reason':_0xbe5844(0x2ef),'token':null};}else return _0xc0d178=validToken(_0x2f9926,_0x572af6),_0xc0d178['hasOwnProperty'](_0xbe5844(0x270))?{'allow':!![],'reason':_0xbe5844(0x238),'token':_0x2f9926}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xbe5844(0x2f5),'token':null};};if(settings['whitelistEnabled']){let _0x93ef2e=[...settings[_0x45fe20(0x295)],_0x45fe20(0x308),'::ffff:127.0.0.1',_0x45fe20(0x245)];if(_0x93ef2e['includes'](_0x34684b))return _0x1e05c9(_0x4e27e3);else{_0xc0d178=validToken(_0x4e27e3,_0x572af6);if(_0xc0d178[_0x45fe20(0x298)]('success'))return _0x1e05c9(_0x4e27e3);else{if(telegramIpApproved(_0x572af6)){const _0x404c74=generateToken(_0x572af6);return _0xc0d178=_0x1e05c9(_0x4e27e3),_0xc0d178['allow']?{'allow':!![],'reason':_0x45fe20(0x325),'token':_0x404c74}:_0xc0d178;}else return settings[_0x45fe20(0x197)]?{'allow':![],'reason':_0x45fe20(0x1ad),'token':null}:{'allow':![],'reason':_0x45fe20(0x206),'token':null};}}}else return _0x1e05c9(_0x4e27e3);}function timelyDecrypt(_0xe84a23,_0x11f40b=!![]){const _0xc66ee8=_0x199dd6;if(_0xe84a23)try{const _0x4a83e9=crypt[_0xc66ee8(0x309)](secure['privateKey'],_0xe84a23)[_0xc66ee8(0x249)],_0x575067=_0x4a83e9[_0xc66ee8(0x256)]('@')[0x0],_0x212b60=_0x4a83e9[_0xc66ee8(0x256)]('@')[0x1],_0x22049a=new Date()[_0xc66ee8(0x18b)]();if(_0x11f40b){if(_0x22049a-_0x212b60<maxSecretAge*0x3e8)return _0x575067;else return![];}else return _0x575067;}catch(_0x9e0046){return![];}else return![];}const validToken=(_0x4a80af,_0x165701)=>{const _0x1f7257=_0x199dd6,_0x5c74b4=devices[_0x165701]['ip'];if(!_0x4a80af)return{'error':_0x1f7257(0x22c)};for(let _0x363b49 of blacklist){if(_0x363b49[_0x1f7257(0x271)]==_0x4a80af)return{'error':'Token\x20blacklisted'};}let _0x2da552;try{_0x2da552=jwt['verify'](_0x4a80af,secure[_0x1f7257(0x2af)]+_0x165701);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x2da552[_0x1f7257(0x298)](_0x1f7257(0x279))&&!_0x2da552[_0x1f7257(0x298)]('username')||!_0x2da552[_0x1f7257(0x298)](_0x1f7257(0x251)))return{'error':_0x1f7257(0x1fb)};if(!_0x2da552[_0x1f7257(0x298)](_0x1f7257(0x23f))&&_0x2da552[_0x1f7257(0x298)](_0x1f7257(0x279))){const {clientip:_0x22f1f1}=_0x2da552;return _0x5c74b4==_0x22f1f1?{'success':_0x1f7257(0x1d4)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x2da552[_0x1f7257(0x298)](_0x1f7257(0x23f))&&_0x2da552['hasOwnProperty'](_0x1f7257(0x279))){const {username:_0x4908e3,clientip:_0x5e0d59}=_0x2da552;return settings[_0x1f7257(0x241)]==_0x4908e3&&_0x5c74b4==_0x5e0d59?{'success':_0x1f7257(0x1d4)}:{'error':_0x1f7257(0x2fc)};}}},generateLoginToken=_0x2134d9=>{const _0x1eb219=_0x199dd6;if(_0x2134d9){const _0x3ee05f=devices[_0x2134d9]['ip'];return jwt[_0x1eb219(0x2ca)]({'username':settings['bbUsername'],'clientip':_0x3ee05f},secure[_0x1eb219(0x2af)]+_0x2134d9,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xe11f0d=>{const _0x4771c2=_0x199dd6;if(_0xe11f0d){const _0x154839=devices[_0xe11f0d]['ip'];return jwt[_0x4771c2(0x2ca)]({'clientip':_0x154839},secure[_0x4771c2(0x2af)]+_0xe11f0d,{'expiresIn':devices[_0xe11f0d][_0x4771c2(0x1be)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x3262c6=>{const _0x3600d1=_0x199dd6;let _0x438bf2=![];return devices[_0x3262c6][_0x3600d1(0x1be)]&&devices[_0x3262c6][_0x3600d1(0x1be)][_0x3600d1(0x24c)]!=_0x3600d1(0x2c4)&&(_0x438bf2=devices[_0x3262c6]['telegramIpApproval'][_0x3600d1(0x279)]==devices[_0x3262c6]['ip']&&new Date()[_0x3600d1(0x18b)]()-devices[_0x3262c6][_0x3600d1(0x1be)]['timestamp']<devices[_0x3262c6][_0x3600d1(0x1be)][_0x3600d1(0x24c)]*0x3c*0x3e8),_0x438bf2;},telegram2FaApproved=_0x5c9dfa=>{const _0xa9e33f=_0x199dd6;let _0x409046=![];return devices[_0x5c9dfa][_0xa9e33f(0x22d)]&&devices[_0x5c9dfa][_0xa9e33f(0x22d)]['expiry']!='reject'&&(_0x409046=devices[_0x5c9dfa]['telegram2FaApproval'][_0xa9e33f(0x279)]==devices[_0x5c9dfa]['ip']&&new Date()[_0xa9e33f(0x18b)]()-devices[_0x5c9dfa][_0xa9e33f(0x22d)][_0xa9e33f(0x32f)]<devices[_0x5c9dfa]['telegram2FaApproval'][_0xa9e33f(0x24c)]*0x3c*0x3e8),_0x409046;},normalizeIP=_0x3a446b=>{const _0x402379=_0x199dd6;let _0x1f7b82=null,_0x5eb1e6=null;if(ipaddr[_0x402379(0x237)](_0x3a446b)){const _0x1463d1=ipaddr['parse'](_0x3a446b);_0x1463d1[_0x402379(0x1e6)]()===_0x402379(0x22a)?(_0x1463d1['isIPv4MappedAddress']()&&(_0x1f7b82=_0x1463d1['toIPv4Address']()[_0x402379(0x1e2)]()),_0x5eb1e6=_0x1463d1[_0x402379(0x1e2)]()):(_0x1f7b82=_0x1463d1['toString'](),_0x5eb1e6=_0x1463d1['toIPv4MappedAddress']()[_0x402379(0x1e2)]());}return{'show':_0x1f7b82?_0x1f7b82:_0x5eb1e6,'store':_0x5eb1e6};};function sleep(_0x588ae6){return new Promise(_0x17edf6=>setTimeout(_0x17edf6,_0x588ae6));}