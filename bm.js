const _0x4ff915=_0x4c64;(function(_0x86906,_0x5808da){const _0x1d2b92=_0x4c64,_0xa3a822=_0x86906();while(!![]){try{const _0x3d5b1a=-parseInt(_0x1d2b92(0x1bf))/0x1*(parseInt(_0x1d2b92(0x21f))/0x2)+parseInt(_0x1d2b92(0x1d3))/0x3*(parseInt(_0x1d2b92(0x294))/0x4)+-parseInt(_0x1d2b92(0x223))/0x5+-parseInt(_0x1d2b92(0x1a5))/0x6+parseInt(_0x1d2b92(0x196))/0x7*(-parseInt(_0x1d2b92(0x21c))/0x8)+parseInt(_0x1d2b92(0x26a))/0x9*(-parseInt(_0x1d2b92(0x249))/0xa)+parseInt(_0x1d2b92(0x2b8))/0xb;if(_0x3d5b1a===_0x5808da)break;else _0xa3a822['push'](_0xa3a822['shift']());}catch(_0x316485){_0xa3a822['push'](_0xa3a822['shift']());}}}(_0x41ce,0x7faf0));const _0x55d5c7=function(){let _0x3f2a13=!![];return function(_0x2d84af,_0x543746){const _0x4245e8=_0x3f2a13?function(){const _0x203fe2=_0x4c64;if(_0x543746){const _0x30065c=_0x543746[_0x203fe2(0x1fe)](_0x2d84af,arguments);return _0x543746=null,_0x30065c;}}:function(){};return _0x3f2a13=![],_0x4245e8;};}(),_0x1e4d59=_0x55d5c7(this,function(){const _0x437d2d=_0x4c64;return _0x1e4d59[_0x437d2d(0x1c5)]()[_0x437d2d(0x278)](_0x437d2d(0x18f))[_0x437d2d(0x1c5)]()[_0x437d2d(0x18c)](_0x1e4d59)['search'](_0x437d2d(0x18f));});_0x1e4d59();'use strict';process[_0x4ff915(0x230)][_0x4ff915(0x189)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x4ff915(0x222)),fs=require('fs'),fns=require(_0x4ff915(0x1cd)),low=require(_0x4ff915(0x212)),path=require(_0x4ff915(0x22b)),crypto=require(_0x4ff915(0x199)),Crypt=require(_0x4ff915(0x27d))[_0x4ff915(0x285)],RSA=require(_0x4ff915(0x27d))[_0x4ff915(0x22a)],bcrypt=require(_0x4ff915(0x259)),jwt=require(_0x4ff915(0x209)),analyticsLib=require(_0x4ff915(0x1ec))[_0x4ff915(0x1d4)],googleAnalytics=require(_0x4ff915(0x1df))[_0x4ff915(0x1d4)],ipaddr=require(_0x4ff915(0x282)),argv=require(_0x4ff915(0x2af))(process[_0x4ff915(0x2cb)]['slice'](0x2))[_0x4ff915(0x2cb)],PORT=argv[_0x4ff915(0x276)]||_0x4ff915(0x1d5),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4ff915(0x2c5)](PORT))return console['log'](_0x4ff915(0x273)+PORT+_0x4ff915(0x1f3)),process[_0x4ff915(0x2d4)](0x1);const HOST=argv[_0x4ff915(0x283)]||null,userID=argv[_0x4ff915(0x231)]||'';let bbpath=_0x4ff915(0x29e),bbpath2='';const botfile='bot.js',configfile=_0x4ff915(0x1d0),settingsfile=_0x4ff915(0x29b),securefile=_0x4ff915(0x1fc);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4ff915(0x228)),configpath=userID?bbpath+_0x4ff915(0x1e7)+userID+'/':bbpath+_0x4ff915(0x1e7),configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x4ff915(0x1c0)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4ff915(0x1c0)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4ff915(0x1de)]({'bots':[]})[_0x4ff915(0x2c7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);function _0x4c64(_0x1236e,_0x139bed){const _0x2432a8=_0x41ce();return _0x4c64=function(_0x1e4d59,_0x55d5c7){_0x1e4d59=_0x1e4d59-0x186;let _0x41ce7a=_0x2432a8[_0x1e4d59];return _0x41ce7a;},_0x4c64(_0x1236e,_0x139bed);}dbSettings[_0x4ff915(0x1de)]({'settings':{'timeshift':0x0}})[_0x4ff915(0x2c7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4ff915(0x1de)]({'secure':{},'blacklist':[]})[_0x4ff915(0x2c7)]();let crypt=new Crypt({'md':_0x4ff915(0x1b4),'rsaStandard':_0x4ff915(0x250)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x4ff915(0x1ad)](app);app[_0x4ff915(0x1cb)](express[_0x4ff915(0x22d)](path[_0x4ff915(0x1da)](__dirname,bbpath2,_0x4ff915(0x242)))),app[_0x4ff915(0x1cb)](express[_0x4ff915(0x22d)](path[_0x4ff915(0x1da)](__dirname,bbpath2,_0x4ff915(0x28d)))),app[_0x4ff915(0x1e3)]('/',function(_0x281cd7,_0x84968e){const _0x1b23c8=_0x4ff915;_0x84968e[_0x1b23c8(0x26b)](path[_0x1b23c8(0x1da)](__dirname,bbpath2,'build2',_0x1b23c8(0x1b3)));}),app[_0x4ff915(0x1e3)]('/:bot',function(_0x1dd8be,_0x2d1e89){const _0x3de27e=_0x4ff915;_0x2d1e89[_0x3de27e(0x26b)](path[_0x3de27e(0x1da)](__dirname,bbpath2,_0x3de27e(0x28d),'index.html'));}),app['get'](_0x4ff915(0x218),(_0x3c9a8c,_0x2711e7)=>{const _0x57587a=_0x4ff915;_0x2711e7[_0x57587a(0x26b)](path[_0x57587a(0x1da)](__dirname,bbpath2,_0x57587a(0x28d),'index.html'));}),app[_0x4ff915(0x1e3)](_0x4ff915(0x224),(_0x3c3ea4,_0x1335a7)=>{const _0x5347a9=_0x4ff915;_0x1335a7['sendFile'](path[_0x5347a9(0x1da)](__dirname,bbpath2,_0x5347a9(0x28d),_0x5347a9(0x1b3)));}),app[_0x4ff915(0x1e3)](_0x4ff915(0x1c9),(_0x47fe3f,_0x434c2a)=>{const _0x2471f5=_0x4ff915;_0x434c2a[_0x2471f5(0x26b)](path[_0x2471f5(0x1da)](__dirname,bbpath2,_0x2471f5(0x28d),'index.html'));}),app[_0x4ff915(0x1e3)]('/:bot/history',(_0x338e12,_0x39ec53)=>{const _0x7e542=_0x4ff915;_0x39ec53['sendFile'](path[_0x7e542(0x1da)](__dirname,bbpath2,_0x7e542(0x28d),_0x7e542(0x1b3)));}),app[_0x4ff915(0x1e3)](_0x4ff915(0x25d),(_0x49fec7,_0x2e6ae6)=>{const _0x59be53=_0x4ff915;_0x2e6ae6[_0x59be53(0x26b)](path[_0x59be53(0x1da)](__dirname,bbpath2,'build',_0x59be53(0x1b3)));}),app['get'](_0x4ff915(0x215),(_0x45dc77,_0x10c9be)=>{const _0x52c0dd=_0x4ff915;_0x10c9be[_0x52c0dd(0x26b)](path['join'](__dirname,bbpath2,_0x52c0dd(0x28d),_0x52c0dd(0x1b3)));});if(HOST)http[_0x4ff915(0x28c)](PORT,HOST);else http[_0x4ff915(0x28c)](PORT);const io=require(_0x4ff915(0x251))(http,{}),analytics=analyticsLib({'app':_0x4ff915(0x233),'plugins':[googleAnalytics({'trackingId':_0x4ff915(0x2d2)})]}),TelegramBot=require(_0x4ff915(0x23d));let tgBot;if(settings[_0x4ff915(0x20a)]&&settings[_0x4ff915(0x20a)]!=''&&settings['telegramUsername']&&settings[_0x4ff915(0x291)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5614f8=_0x4ff915;console[_0x5614f8(0x1e1)](''),console['log']('-----------------------------------------------------------------------------------'),logging(_0x5614f8(0x2aa)+PORT),console['log'](_0x5614f8(0x277));if(config[_0x5614f8(0x28e)]!=0x0)config[_0x5614f8(0x2ab)](_0x4a4a2f=>{const _0x3be1ff=_0x5614f8;if(_0x4a4a2f['status']==_0x3be1ff(0x1c6)||_0x4a4a2f['status']=='new')logging(_0x3be1ff(0x24e)+_0x4a4a2f[_0x3be1ff(0x28a)]+_0x3be1ff(0x1a2)+_0x4a4a2f[_0x3be1ff(0x1e4)]),startBot([_0x4a4a2f[_0x3be1ff(0x28a)],userID],{'cwd':bbpath},function(_0x3af0c6){if(_0x3af0c6)logging(_0x3af0c6);});else(_0x4a4a2f[_0x3be1ff(0x188)]=='disabled'||_0x4a4a2f[_0x3be1ff(0x188)]==_0x3be1ff(0x293))&&logging(_0x3be1ff(0x19f)+_0x4a4a2f['botID']+'\x20|\x20'+_0x4a4a2f[_0x3be1ff(0x1e4)]);});else!newBot&&console['log'](_0x5614f8(0x1c7));if(newBot)addBot();console[_0x5614f8(0x1e1)](_0x5614f8(0x277)),console[_0x5614f8(0x1e1)]('');}function startSocket(){const _0x3c0155=_0x4ff915;io['on'](_0x3c0155(0x1ea),_0x296809=>{const _0x426a12=_0x3c0155;let _0x3aa633,_0x243e5c,_0x16ff9f,_0x2d682c,_0x5d97bd;const _0x3e78ef=_0x296809[_0x426a12(0x2a0)][_0x426a12(0x1a8)][_0x426a12(0x25a)];_0x243e5c=_0x3e78ef[_0x426a12(0x2c2)](/bot[0-9]{3}/);if(_0x243e5c)_0x16ff9f=_0x243e5c[0x0][_0x426a12(0x2c2)](/[0-9]{3}/);if(_0x16ff9f)_0x3aa633=_0x16ff9f[0x0];else _0x3aa633='botmanager';const _0x1d9fb2=_0x296809[_0x426a12(0x2a0)][_0x426a12(0x1f7)][_0x426a12(0x288)];if(!_0x1d9fb2)_0x296809[_0x426a12(0x27e)](_0x426a12(0x188),{'publicKey':secure['publicKey']});else{_0x2d682c=timelyDecrypt(_0x1d9fb2,![]);if(!_0x2d682c)logging(_0x426a12(0x211));else{_0x5d97bd=normalizeIP(_0x296809[_0x426a12(0x191)][_0x426a12(0x18d)])[_0x426a12(0x2be)];if(!devices[_0x2d682c])devices[_0x2d682c]={'uuid':_0x2d682c,'access':{'token':null}};devices[_0x2d682c]['ip']=_0x5d97bd;const _0x1e05ca=addClient(_0x296809['id'],_0x2d682c,_0x3aa633);setAccess(_0x1e05ca),_0x296809['on'](_0x426a12(0x221),_0x2170ad=>{const _0x4ef006=_0x426a12,_0x296bf5=timelyDecrypt(_0x2170ad[_0x4ef006(0x1d2)]);if(_0x296bf5){_0x2170ad={'username':_0x2170ad[_0x4ef006(0x1cc)],'password':_0x296bf5},devices[_0x2d682c][_0x4ef006(0x1f8)]=validateCredentials(_0x2170ad,_0x2d682c);if(devices[_0x2d682c]['access'][_0x4ef006(0x1a0)]==![]&&devices[_0x2d682c]['access'][_0x4ef006(0x2a3)]==_0x4ef006(0x1a7))_0x296809[_0x4ef006(0x27e)](_0x4ef006(0x188),{'access':devices[_0x2d682c][_0x4ef006(0x1f8)]}),loginAccess2FA(_0x2d682c,_0x5d97bd);else{if(devices[_0x2d682c][_0x4ef006(0x1f8)][_0x4ef006(0x1a0)]==![]&&devices[_0x2d682c][_0x4ef006(0x1f8)][_0x4ef006(0x2a3)]=='invalid\x20credentials')_0x296809[_0x4ef006(0x27e)]('status',{'access':devices[_0x2d682c][_0x4ef006(0x1f8)]});else devices[_0x2d682c][_0x4ef006(0x1f8)]['allow']&&devices[_0x2d682c][_0x4ef006(0x1f8)][_0x4ef006(0x2a3)]==_0x4ef006(0x217)&&(getClientsWithUuid(_0x2d682c)[_0x4ef006(0x2ab)](_0xbd8990=>{setAccess(_0xbd8990);}),setTokenRefresh(_0x2d682c),setSessionTimeout(_0x4ef006(0x221),_0x2d682c));}}else logging(_0x4ef006(0x2ad));}),_0x296809['on'](_0x426a12(0x239),()=>{resetPassword();}),_0x296809['on'](_0x426a12(0x220),_0x23e2c3=>{removeClient(_0x296809['id']);});}}});}function initClient(_0x270819){const _0x2475a6=_0x4ff915;if(_0x270819!=_0x2475a6(0x298)&&config[_0x2475a6(0x20f)]!=''){if(pid[_0x270819])pid[_0x270819]['send']({'function':_0x2475a6(0x1f4),'args':null});}}function getSocket(_0x418f9c){const _0x1eff50=_0x4ff915;return io[_0x1eff50(0x1f6)][_0x1eff50(0x1f6)]['get'](_0x418f9c);}function setAccess(_0x47eb70){const _0x5ab675=_0x4ff915,_0x23b2b5=getSocket(_0x47eb70['id']),_0x206d2b=_0x47eb70[_0x5ab675(0x197)],_0x3393f1=_0x47eb70['bot'];devices[_0x206d2b][_0x5ab675(0x1f8)]=validateAccess(devices[_0x206d2b][_0x5ab675(0x1f8)][_0x5ab675(0x192)],_0x206d2b),_0x23b2b5['join'](_0x206d2b);if(devices[_0x206d2b]['access']['allow']){_0x23b2b5[_0x5ab675(0x1da)](_0x3393f1);if(_0x3393f1==_0x5ab675(0x298))initializeSocketBotManager(_0x23b2b5);else initializeSocketBot(_0x23b2b5);initClient(_0x3393f1);}devices[_0x206d2b]['access']['token']&&devices[_0x206d2b][_0x5ab675(0x1f8)][_0x5ab675(0x2a3)]==_0x5ab675(0x1bd)&&setSessionTimeout('2FA',_0x206d2b),devices[_0x206d2b]['access'][_0x5ab675(0x192)]&&devices[_0x206d2b][_0x5ab675(0x1f8)][_0x5ab675(0x2a3)]==_0x5ab675(0x1a4)&&setSessionTimeout(_0x5ab675(0x221),_0x206d2b),_0x23b2b5[_0x5ab675(0x27e)](_0x5ab675(0x188),{'status':_0x47eb70[_0x5ab675(0x1bb)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x206d2b][_0x5ab675(0x1f8)],'externalip':devices[_0x206d2b]['ip'],'publicKey':secure['publicKey']}),devices[_0x206d2b][_0x5ab675(0x1f8)][_0x5ab675(0x1a0)]==![]&&devices[_0x206d2b][_0x5ab675(0x1f8)]['reason']==_0x5ab675(0x207)&&temporaryAccess2FA(_0x206d2b,devices[_0x206d2b]['ip']);}function setSessionTimeout(_0x2016dc,_0x588159){const _0x15b175=_0x4ff915;let _0x3ad38b;if(_0x2016dc=='login')_0x3ad38b=loginExpiry*0x3c*0x3e8;else _0x3ad38b=devices[_0x588159][_0x15b175(0x28f)]['expiry']*0x3c*0x3e8-(new Date()[_0x15b175(0x256)]()-devices[_0x588159][_0x15b175(0x28f)][_0x15b175(0x2c6)]);if(devices[_0x588159][_0x15b175(0x2bf)])clearTimeout(devices[_0x588159][_0x15b175(0x2bf)]);devices[_0x588159][_0x15b175(0x2bf)]=setTimeout(()=>{const _0x50a767=_0x15b175;if(devices[_0x588159]['pidRefreshToken'])clearTimeout(devices[_0x588159][_0x50a767(0x19d)]);removeSocketListeners(_0x588159),addBlacklist(_0x588159),devices[_0x588159][_0x50a767(0x28f)]=null,devices[_0x588159][_0x50a767(0x186)]=null,devices[_0x588159]['access'][_0x50a767(0x192)]=null,devices[_0x588159][_0x50a767(0x1f8)]=validateAccess(devices[_0x588159]['access'][_0x50a767(0x192)],_0x588159),!(devices[_0x588159]['access'][_0x50a767(0x1a0)]&&devices[_0x588159][_0x50a767(0x1f8)][_0x50a767(0x2a3)]==_0x50a767(0x266))&&(_0x2016dc=='login'?io['to'](_0x588159)[_0x50a767(0x27e)]('status',{'access':{'allow':![],'reason':_0x50a767(0x1b5),'token':null}}):io['to'](_0x588159)[_0x50a767(0x27e)](_0x50a767(0x188),{'access':{'allow':![],'reason':_0x50a767(0x2a1),'token':null}})),devices[_0x588159][_0x50a767(0x1f8)][_0x50a767(0x192)]=null;},_0x3ad38b);}function setTokenRefresh(_0x5be19c){if(devices[_0x5be19c]['pidRefreshToken'])clearTimeout(devices[_0x5be19c]['pidRefreshToken']);devices[_0x5be19c]['pidRefreshToken']=setTimeout(()=>{const _0x95d242=_0x4c64;getClientsWithUuid(_0x5be19c)[_0x95d242(0x28e)]!=0x0?(devices[_0x5be19c][_0x95d242(0x1f8)]=refreshToken(_0x5be19c),io['to'](_0x5be19c)['emit'](_0x95d242(0x188),{'status':_0x95d242(0x2d5),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5be19c][_0x95d242(0x1f8)],'externalip':devices[_0x5be19c]['ip'],'publicKey':secure[_0x95d242(0x2bc)]}),setTokenRefresh(_0x5be19c)):clearTimeout(devices[_0x5be19c][_0x95d242(0x19d)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x47ef45){const _0x53e98d=_0x4ff915,_0x3516b4=getClient(_0x47ef45['id'])[_0x53e98d(0x197)];_0x47ef45[_0x53e98d(0x27e)]('bots',config),_0x47ef45[_0x53e98d(0x27e)](_0x53e98d(0x287),cleanSettings()),_0x47ef45['on'](_0x53e98d(0x1b8),_0x47c5d0=>{const _0x3ca9d5=_0x53e98d;if(validateAccess(_0x47c5d0,_0x3516b4)[_0x3ca9d5(0x1a0)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x47ef45['on'](_0x53e98d(0x295),(_0x44b1c3,_0x377d32)=>{const _0x822470=_0x53e98d;if(validateAccess(_0x377d32,_0x3516b4)[_0x822470(0x1a0)])toggleBot(_0x44b1c3[_0x822470(0x28a)],_0x44b1c3[_0x822470(0x188)],_0x44b1c3[_0x822470(0x1d7)]);else logging(_0x822470(0x1d6));}),_0x47ef45['on'](_0x53e98d(0x1b2),(_0x5f4be0,_0x416f1c)=>{const _0xe48bf9=_0x53e98d;if(validateAccess(_0x416f1c,_0x3516b4)[_0xe48bf9(0x1a0)])deleteBot(_0x5f4be0);else logging(_0xe48bf9(0x1cf));}),_0x47ef45['on'](_0x53e98d(0x2c3),(_0x45a411,_0x27b78b)=>{const _0x2e752f=_0x53e98d;if(validateAccess(_0x27b78b,_0x3516b4)[_0x2e752f(0x1a0)])storeSettings(_0x45a411,!![]);else logging(_0x2e752f(0x1eb));}),_0x47ef45['on']('update-bb',(_0x33e87d,_0x4c3c00)=>{const _0x34c449=_0x53e98d;if(validateAccess(_0x4c3c00,_0x3516b4)[_0x34c449(0x1a0)])updateBB();else logging(_0x34c449(0x1eb));}),_0x47ef45['on'](_0x53e98d(0x2cf),_0x4d3c37=>{const _0x52e90e=_0x53e98d;if(validateAccess(_0x4d3c37,_0x3516b4)['allow']){if(devices[_0x3516b4][_0x52e90e(0x19d)])clearTimeout(devices[_0x3516b4]['pidRefreshToken']);if(devices[_0x3516b4][_0x52e90e(0x2bf)])clearTimeout(devices[_0x3516b4][_0x52e90e(0x2bf)]);removeSocketListeners(getClient(_0x47ef45['id'])[_0x52e90e(0x197)]),addBlacklist(_0x3516b4),devices[_0x3516b4][_0x52e90e(0x28f)]=null,devices[_0x3516b4][_0x52e90e(0x186)]=null,devices[_0x3516b4]['access'][_0x52e90e(0x192)]=null,io['to'](getClient(_0x47ef45['id'])[_0x52e90e(0x197)])[_0x52e90e(0x27e)]('status',{'access':{'allow':![],'reason':_0x52e90e(0x25e),'token':null}});}else logging(_0x52e90e(0x290));});}function initializeSocketBot(_0x29e67d){const _0x1221bc=_0x4ff915,_0x163f47=getClient(_0x29e67d['id'])[_0x1221bc(0x202)],_0x245d21=getClient(_0x29e67d['id'])[_0x1221bc(0x197)];_0x29e67d['on'](_0x1221bc(0x1fd),(_0x21c129,_0x433a1b)=>{const _0x2f6943=_0x1221bc;if(validateAccess(_0x433a1b,_0x245d21)[_0x2f6943(0x1a0)]){if(pid[_0x163f47])pid[_0x163f47][_0x2f6943(0x2b6)]({'function':_0x2f6943(0x2d3),'args':_0x21c129});}else logging(_0x2f6943(0x20c));}),_0x29e67d['on'](_0x1221bc(0x1be),(_0x3eea66,_0x460510)=>{const _0x2d9665=_0x1221bc;if(validateAccess(_0x460510,_0x245d21)[_0x2d9665(0x1a0)]){if(pid[_0x163f47])pid[_0x163f47]['send']({'function':_0x2d9665(0x1d1),'args':_0x3eea66});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x29e67d['on'](_0x1221bc(0x1dc),(_0x321565,_0x4f0040)=>{const _0x19bc99=_0x1221bc;if(validateAccess(_0x4f0040,_0x245d21)[_0x19bc99(0x1a0)]){if(pid[_0x163f47])pid[_0x163f47][_0x19bc99(0x2b6)]({'function':_0x19bc99(0x1ab),'args':_0x321565});}else logging(_0x19bc99(0x1e8));}),_0x29e67d['on'](_0x1221bc(0x275),(_0x50e841,_0x1c50bd)=>{const _0x323685=_0x1221bc;if(validateAccess(_0x1c50bd,_0x245d21)['allow']){if(pid[_0x163f47])pid[_0x163f47][_0x323685(0x2b6)]({'function':_0x323685(0x1c1),'args':_0x50e841});}else logging(_0x323685(0x23a));}),_0x29e67d['on']('get-starting-balances',_0x2c38b=>{const _0x40541c=_0x1221bc;if(validateAccess(_0x2c38b,_0x245d21)[_0x40541c(0x1a0)]){if(pid[_0x163f47])pid[_0x163f47]['send']({'function':_0x40541c(0x1c2),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x29e67d['on'](_0x1221bc(0x22e),(_0x20e454,_0x124638)=>{const _0x1b964a=_0x1221bc;if(validateAccess(_0x124638,_0x245d21)['allow']){if(pid[_0x163f47])pid[_0x163f47]['send']({'function':_0x1b964a(0x2a7),'args':_0x20e454});}else logging(_0x1b964a(0x21a));}),_0x29e67d['on']('cancel-loading',_0x23f9d3=>{const _0x455ead=_0x1221bc;if(validateAccess(_0x23f9d3,_0x245d21)['allow']){if(pid[_0x163f47])pid[_0x163f47][_0x455ead(0x2b6)]({'function':_0x455ead(0x2c0),'args':null});}else logging(_0x455ead(0x1f5));}),_0x29e67d['on'](_0x1221bc(0x2cf),_0x1e5121=>{const _0x38c229=_0x1221bc;if(validateAccess(_0x1e5121,_0x245d21)[_0x38c229(0x1a0)]){if(devices[_0x245d21][_0x38c229(0x19d)])clearTimeout(devices[_0x245d21][_0x38c229(0x19d)]);if(devices[_0x245d21]['pidExpireLogin'])clearTimeout(devices[_0x245d21][_0x38c229(0x2bf)]);removeSocketListeners(getClient(_0x29e67d['id'])[_0x38c229(0x197)]),addBlacklist(_0x245d21),devices[_0x245d21][_0x38c229(0x28f)]=null,devices[_0x245d21][_0x38c229(0x186)]=null,devices[_0x245d21][_0x38c229(0x1f8)][_0x38c229(0x192)]=null,io['to'](getClient(_0x29e67d['id'])['uuid'])[_0x38c229(0x27e)](_0x38c229(0x188),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x38c229(0x290));});}function removeSocketListeners(_0x1e5d4a){const _0x11fc93=_0x4ff915;getClientsWithUuid(_0x1e5d4a)[_0x11fc93(0x2ab)](_0x15d5ae=>{const _0x4034fd=_0x11fc93;getSocket(_0x15d5ae['id'])[_0x4034fd(0x2a5)]();});}function cleanSettings(){const _0x1f650e=_0x4ff915;let _0x4315b0=settings;return settings[_0x1f650e(0x20a)]&&settings[_0x1f650e(0x20a)]!=''&&(_0x4315b0={..._0x4315b0,'telegramToken':_0x1f650e(0x225)}),settings[_0x1f650e(0x20d)]&&settings[_0x1f650e(0x20d)]!=''&&(_0x4315b0={..._0x4315b0,'bbPassword':_0x1f650e(0x225)}),_0x4315b0;}function updateBB(){const _0x1abfdf=_0x4ff915;process[_0x1abfdf(0x2b6)]({'update':!![]},_0x177c9b=>{});}function startBot(_0x17e80b,_0x2cbea6,_0x48a09b){const _0x2368ec=_0x4ff915;let _0x42f48b=![];const _0x4eacd9=_0x17e80b[0x0];_0x2cbea6={..._0x2cbea6,'stdio':[_0x2368ec(0x1ff),_0x2368ec(0x1ff),_0x2368ec(0x1ff),_0x2368ec(0x2c9)]},pid[_0x4eacd9]=childProcess[_0x2368ec(0x2cd)](botfile,_0x17e80b,_0x2cbea6),pid[_0x4eacd9]['on'](_0x2368ec(0x271),_0x367ea1=>{const _0x403c9c=_0x2368ec;switch(Object[_0x403c9c(0x1b9)](_0x367ea1)[0x0]){case'botname':updateBotName(_0x4eacd9,_0x367ea1['botname']);break;case'status':updateStatus(_0x4eacd9,_0x367ea1[_0x403c9c(0x188)]);break;case _0x403c9c(0x1d7):updateLive(_0x4eacd9,_0x367ea1[_0x403c9c(0x1d7)]);break;case _0x403c9c(0x190):updateLive(_0x4eacd9,_0x367ea1['started']),io['to'](_0x4eacd9)[_0x403c9c(0x27e)](_0x403c9c(0x188),{'access':{'allow':![],'reason':_0x403c9c(0x286),'token':null}});break;case'stop':_0x367ea1['stop']==_0x403c9c(0x2d0)&&stopBot(_0x4eacd9);_0x367ea1[_0x403c9c(0x1f0)]==_0x403c9c(0x2d6)&&toggleBot(_0x4eacd9,_0x403c9c(0x1bc),'stopped');break;case _0x403c9c(0x241):sendTelegram(_0x4eacd9,_0x367ea1[_0x403c9c(0x241)]);break;case'function':io['to'](_0x4eacd9)['emit'](_0x367ea1['function'],_0x367ea1[_0x403c9c(0x261)]);break;}}),pid[_0x4eacd9]['on'](_0x2368ec(0x1b7),function(_0x5a401e){if(_0x42f48b)return;_0x42f48b=!![],_0x48a09b(_0x5a401e);}),pid[_0x4eacd9]['on'](_0x2368ec(0x2d4),function(_0x4ca85c){const _0x5b496d=_0x2368ec;if(_0x42f48b)return;_0x42f48b=!![],_0x48a09b(null);const _0x3582c8=dbConfig[_0x5b496d(0x1e3)](_0x5b496d(0x204))[_0x5b496d(0x2b2)]({'botID':_0x4eacd9})[_0x5b496d(0x194)]();_0x3582c8&&(_0x3582c8[_0x5b496d(0x188)]==_0x5b496d(0x1c6)||_0x3582c8[_0x5b496d(0x188)]==_0x5b496d(0x2b7))&&(updateLive(_0x4eacd9,_0x5b496d(0x24d)),logging(_0x5b496d(0x1b1)+_0x4eacd9),startBot([_0x4eacd9,userID],{'cwd':bbpath},function(_0x24a11f){if(_0x24a11f)logging(_0x24a11f);}));});}function stopBot(_0x3918ba){const _0x95451=_0x4ff915;getClientsWithBotID(_0x3918ba)[_0x95451(0x2ab)](_0x45cd81=>{const _0x323e32=_0x95451;getSocket(_0x45cd81['id'])[_0x323e32(0x220)](!![]),removeClient(_0x45cd81['id']);});if(pid[_0x3918ba])pid[_0x3918ba][_0x95451(0x2d6)]();}function addBot(){const _0x251730=_0x4ff915;let _0x306a55;for(let _0x497ec3=0x1;_0x497ec3<0x3e9;_0x497ec3++){_0x306a55=_0x497ec3[_0x251730(0x1c5)]()[_0x251730(0x2cc)](0x3,'0');let _0x3b2521=config[_0x251730(0x2b2)](_0x442702=>_0x442702[_0x251730(0x28a)]==_0x306a55);if(!_0x3b2521)break;}if(_0x306a55===_0x251730(0x2b9)){logging(_0x251730(0x280));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x306a55),dbConfig[_0x251730(0x1e3)]('bots')['push']({'botID':_0x306a55,'botname':_0x251730(0x270)+_0x306a55,'status':_0x251730(0x2b7),'live':''})[_0x251730(0x2c7)](),startBot([_0x306a55,userID],{'cwd':bbpath},function(_0x51dfd2){if(_0x51dfd2)logging(_0x51dfd2);}),config=getConfiguration(),io['to'](_0x251730(0x298))[_0x251730(0x27e)](_0x251730(0x204),config);}function deleteBot(_0x12e5ee){const _0x14ebe4=_0x4ff915;getClientsWithBotID(_0x12e5ee)['forEach'](_0x2b3e65=>{const _0xfc5629=_0x4c64;getSocket(_0x2b3e65['id'])[_0xfc5629(0x220)](!![]),removeClient(_0x2b3e65['id']);}),dbConfig[_0x14ebe4(0x1e3)]('bots')['remove']({'botID':_0x12e5ee})[_0x14ebe4(0x2c7)](),logging('deleted\x20Bot\x20'+_0x12e5ee),stopBot(_0x12e5ee);try{fs['unlinkSync'](path[_0x14ebe4(0x1da)](configpath,_0x14ebe4(0x25b)+_0x12e5ee+'-config.json')),fs[_0x14ebe4(0x2a8)](path[_0x14ebe4(0x1da)](configpath,'bot-'+_0x12e5ee+_0x14ebe4(0x214))),fs['unlinkSync'](path[_0x14ebe4(0x1da)](configpath,'bot-'+_0x12e5ee+_0x14ebe4(0x1f2))),fs[_0x14ebe4(0x2a8)](path[_0x14ebe4(0x1da)](configpath,_0x14ebe4(0x25b)+_0x12e5ee+_0x14ebe4(0x2a6)));}catch(_0x21d80b){if(_0x21d80b)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x21d80b);}config=getConfiguration(),io['to'](_0x14ebe4(0x298))[_0x14ebe4(0x27e)]('bots',config);}function toggleBot(_0x381a26,_0x2979d8,_0x347340){const _0x505781=_0x4ff915;dbConfig[_0x505781(0x1e3)]('bots')['find']({'botID':_0x381a26})[_0x505781(0x240)]({'status':_0x2979d8})[_0x505781(0x240)]({'live':_0x347340})[_0x505781(0x2c7)]();if(_0x2979d8==_0x505781(0x1c6)||_0x2979d8==_0x505781(0x2b7))logging(_0x505781(0x299)+_0x381a26),startBot([_0x381a26,userID],{'cwd':bbpath},function(_0x846b5a){if(_0x846b5a)logging(_0x846b5a);});else(_0x2979d8==_0x505781(0x1bc)||_0x2979d8==_0x505781(0x293))&&(logging(_0x505781(0x29c)+_0x381a26),stopBot(_0x381a26));config=getConfiguration(),io['to'](_0x505781(0x298))[_0x505781(0x27e)](_0x505781(0x204),config);}function toggleStatus(_0x5e2cc8){const _0x3c3d2c=_0x4ff915;let _0x221603=dbConfig[_0x3c3d2c(0x1e3)](_0x3c3d2c(0x204))['find']({'botID':_0x5e2cc8})['value'](),_0x54b707;if(_0x221603['status']===_0x3c3d2c(0x1c6))_0x54b707='disabled';else{if(_0x221603[_0x3c3d2c(0x188)]===_0x3c3d2c(0x2b7))_0x54b707='new-disabled';else{if(_0x221603[_0x3c3d2c(0x188)]===_0x3c3d2c(0x293))_0x54b707=_0x3c3d2c(0x2b7);else{if(_0x221603['status']==='disabled')_0x54b707=_0x3c3d2c(0x1c6);}}}return _0x54b707;}function updateStatus(_0x4e5fb0,_0x18ed69){const _0x4d9152=_0x4ff915;dbConfig[_0x4d9152(0x1e3)](_0x4d9152(0x204))[_0x4d9152(0x2b2)]({'botID':_0x4e5fb0})[_0x4d9152(0x240)]({'status':_0x18ed69})['write'](),config=getConfiguration(),io['to'](_0x4d9152(0x298))[_0x4d9152(0x27e)](_0x4d9152(0x204),config);}function updateLive(_0x51b35e,_0x4ef574){const _0x59047e=_0x4ff915;dbConfig[_0x59047e(0x1e3)]('bots')[_0x59047e(0x2b2)]({'botID':_0x51b35e})[_0x59047e(0x240)]({'live':_0x4ef574})[_0x59047e(0x2c7)](),config=getConfiguration(),io['to']('botmanager')[_0x59047e(0x27e)](_0x59047e(0x204),config);}function updateBotName(_0x2d40ea,_0x1f16d2){const _0x5a6ce1=_0x4ff915;dbConfig[_0x5a6ce1(0x1e3)](_0x5a6ce1(0x204))[_0x5a6ce1(0x2b2)]({'botID':_0x2d40ea})['assign']({'botname':_0x1f16d2})[_0x5a6ce1(0x2c7)](),config=getConfiguration(),io['to']('botmanager')[_0x5a6ce1(0x27e)](_0x5a6ce1(0x204),config);}function telegramError(_0x577380){console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x40fc25){const _0x3be9bb=_0x4ff915;if(_0x40fc25[_0x3be9bb(0x260)]['username']!=settings[_0x3be9bb(0x291)]&&'@'+_0x40fc25[_0x3be9bb(0x260)][_0x3be9bb(0x1cc)]!=settings[_0x3be9bb(0x291)])return tgBot[_0x3be9bb(0x237)](_0x40fc25[_0x3be9bb(0x2a9)]['id'],_0x3be9bb(0x247),{'parse_mode':_0x3be9bb(0x23c)})[_0x3be9bb(0x19c)](_0xc8c7d4=>{telegramError(_0xc8c7d4);}),![];return!![];}async function initTelegram(){const _0x380555=_0x4ff915;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x380555(0x20a)],{'polling':!![]});let _0x23ef9f=_0x380555(0x1ca);_0x23ef9f+='\x0a',_0x23ef9f+='/enable\x20-\x20enable\x20notifications\x0a',_0x23ef9f+=_0x380555(0x21e),_0x23ef9f+=_0x380555(0x1a1),_0x23ef9f+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x23ef9f+=_0x380555(0x227),_0x23ef9f+=_0x380555(0x1b0),_0x23ef9f+=_0x380555(0x2b0),_0x23ef9f+=_0x380555(0x269);let _0x563d63=_0x380555(0x193);_0x563d63+='\x0a',_0x563d63+=_0x23ef9f,tgBot[_0x380555(0x1db)](/\/start/,_0x1cfc0b=>{const _0x3e5cc8=_0x380555;if(!validateTelegram(_0x1cfc0b))return;if(settings[_0x3e5cc8(0x187)]!=_0x1cfc0b[_0x3e5cc8(0x2a9)]['id'])updateSetting('telegramChatId',_0x1cfc0b[_0x3e5cc8(0x2a9)]['id']);updateSetting(_0x3e5cc8(0x1c4),!![]),tgBot[_0x3e5cc8(0x237)](_0x1cfc0b['chat']['id'],_0x563d63)[_0x3e5cc8(0x19c)](_0xf899b0=>{telegramError(_0xf899b0);});}),tgBot[_0x380555(0x1db)](/\/enable/,_0x1470fe=>{const _0x131d6a=_0x380555;if(!validateTelegram(_0x1470fe))return;if(settings[_0x131d6a(0x187)]!=_0x1470fe[_0x131d6a(0x2a9)]['id'])updateSetting(_0x131d6a(0x187),_0x1470fe[_0x131d6a(0x2a9)]['id']);updateSetting(_0x131d6a(0x1c4),!![]),tgBot[_0x131d6a(0x237)](_0x1470fe['chat']['id'],'Notifications\x20enabled')['catch'](_0x90555c=>{telegramError(_0x90555c);});}),tgBot['onText'](/\/config/,async _0x2bcb15=>{const _0x9fc25b=_0x380555;if(!validateTelegram(_0x2bcb15))return;tgBot[_0x9fc25b(0x1f1)]('callback_query'),tgBot['sendMessage'](_0x2bcb15[_0x9fc25b(0x2a9)]['id'],_0x9fc25b(0x195),{'reply_markup':{'inline_keyboard':[[{'text':_0x9fc25b(0x1dd),'callback_data':'orders'},{'text':'Alerts','callback_data':'alerts'},{'text':_0x9fc25b(0x25c),'callback_data':_0x9fc25b(0x1ae)}]]}})[_0x9fc25b(0x19c)](_0x19c0e6=>{telegramError(_0x19c0e6);}),tgBot['on']('callback_query',async _0x38238e=>{const _0x564ff7=_0x9fc25b,_0x1d1552=_0x38238e[_0x564ff7(0x2c4)],_0x65d567=_0x38238e[_0x564ff7(0x271)];tgBot['answerCallbackQuery'](_0x38238e['id'])[_0x564ff7(0x213)](async()=>{const _0x8c472b=_0x564ff7;_0x1d1552==_0x8c472b(0x1a9)&&(updateSetting(_0x8c472b(0x19b),'orders'),updateSetting('telegramEnabled',!![]),await tgBot[_0x8c472b(0x237)](_0x65d567[_0x8c472b(0x2a9)]['id'],_0x8c472b(0x2b4))[_0x8c472b(0x19c)](_0x1b5bc2=>{telegramError(_0x1b5bc2);}));_0x1d1552==_0x8c472b(0x2b5)&&(updateSetting(_0x8c472b(0x19b),_0x8c472b(0x2b5)),updateSetting(_0x8c472b(0x1c4),!![]),await tgBot[_0x8c472b(0x237)](_0x65d567['chat']['id'],_0x8c472b(0x236))[_0x8c472b(0x19c)](_0x2b7ab6=>{telegramError(_0x2b7ab6);}));_0x1d1552==_0x8c472b(0x1ae)&&(updateSetting(_0x8c472b(0x19b),'all'),updateSetting(_0x8c472b(0x1c4),!![]),await tgBot['sendMessage'](_0x65d567[_0x8c472b(0x2a9)]['id'],_0x8c472b(0x20b))[_0x8c472b(0x19c)](_0x3fd908=>{telegramError(_0x3fd908);}));if(!settings[_0x8c472b(0x187)])tgBot[_0x8c472b(0x237)](_0x65d567[_0x8c472b(0x2a9)]['id'],_0x8c472b(0x235))[_0x8c472b(0x19c)](_0x142479=>{telegramError(_0x142479);});}),tgBot[_0x564ff7(0x1f1)](_0x564ff7(0x1e2));});}),tgBot[_0x380555(0x1db)](/\/status/,_0x5f115c=>{const _0x3d8796=_0x380555;if(!validateTelegram(_0x5f115c))return;let _0x58c3f9=_0x3d8796(0x29d);config[_0x3d8796(0x2ab)](_0x1b0e9a=>{const _0x2a3e4c=_0x3d8796;_0x58c3f9+=_0x2a3e4c(0x270)+_0x1b0e9a[_0x2a3e4c(0x28a)]+'\x20|\x20'+_0x1b0e9a[_0x2a3e4c(0x1e4)]+':\x20'+_0x1b0e9a['status']+'\x20/\x20'+_0x1b0e9a[_0x2a3e4c(0x1d7)]+'\x0a';}),_0x58c3f9+='\x0a',_0x58c3f9+=_0x3d8796(0x234),_0x58c3f9+=!settings[_0x3d8796(0x1c4)]?'Notifications\x20disabled\x0a':_0x3d8796(0x27b),_0x58c3f9+=settings[_0x3d8796(0x1c4)]?settings[_0x3d8796(0x19b)]==_0x3d8796(0x1ae)?_0x3d8796(0x26c):_0x3d8796(0x206)+settings[_0x3d8796(0x19b)]+_0x3d8796(0x268):'',tgBot[_0x3d8796(0x237)](_0x5f115c['chat']['id'],_0x58c3f9,{'parse_mode':'HTML'})[_0x3d8796(0x19c)](_0x40efeb=>{telegramError(_0x40efeb);});}),tgBot[_0x380555(0x1db)](/\/restart/,_0x67318e=>{const _0x3c7d9f=_0x380555;if(!validateTelegram(_0x67318e))return;tgBot[_0x3c7d9f(0x1f1)]('callback_query');const _0x154cfc=getEnabledBots();if(_0x154cfc[_0x3c7d9f(0x28e)]==0x0)tgBot[_0x3c7d9f(0x237)](_0x67318e[_0x3c7d9f(0x2a9)]['id'],_0x3c7d9f(0x24b))[_0x3c7d9f(0x19c)](_0x4327aa=>{telegramError(_0x4327aa);});else{if(_0x154cfc[_0x3c7d9f(0x28e)]>0x1)_0x154cfc[_0x3c7d9f(0x2a4)]({'botID':'all'});let _0x2f6b00=[],_0x3a20c1=[];const _0x23803d=_0x154cfc[_0x3c7d9f(0x28e)]%0x4==0x0||_0x154cfc[_0x3c7d9f(0x28e)]%0x4==0x3||_0x154cfc[_0x3c7d9f(0x28e)]%0x3==0x1?0x4:0x3;let _0x2590bb=0x0;_0x154cfc[_0x3c7d9f(0x2ab)]((_0x330ae7,_0x2042a0)=>{const _0x4b74bf=_0x3c7d9f;if(_0x2042a0%_0x23803d==0x0)_0x3a20c1=[];_0x3a20c1[_0x4b74bf(0x2a4)]({'text':_0x330ae7[_0x4b74bf(0x28a)]=='all'?_0x4b74bf(0x24c):_0x4b74bf(0x270)+_0x330ae7[_0x4b74bf(0x28a)],'callback_data':_0x330ae7[_0x4b74bf(0x28a)]}),_0x2042a0%_0x23803d==0x0&&(_0x2f6b00[_0x2590bb]=_0x3a20c1,_0x2590bb++);}),tgBot[_0x3c7d9f(0x237)](_0x67318e[_0x3c7d9f(0x2a9)]['id'],_0x3c7d9f(0x201),{'reply_markup':{'inline_keyboard':_0x2f6b00}})[_0x3c7d9f(0x19c)](_0x308852=>{telegramError(_0x308852);}),tgBot['on']('callback_query',async _0x4c9a97=>{const _0xb1d56b=_0x3c7d9f,_0x6e79aa=_0x4c9a97[_0xb1d56b(0x2c4)],_0x4eb467=_0x4c9a97[_0xb1d56b(0x271)];tgBot[_0xb1d56b(0x272)](_0x4c9a97['id'])[_0xb1d56b(0x213)](async()=>{const _0x4814c4=_0xb1d56b;if(_0x6e79aa=='all'){if(settings[_0x4814c4(0x19b)]==_0x4814c4(0x1a9))tgBot[_0x4814c4(0x237)](_0x4eb467[_0x4814c4(0x2a9)]['id'],_0x4814c4(0x219))['catch'](_0x63617b=>{telegramError(_0x63617b);});config[_0x4814c4(0x2ab)](_0x74216=>{const _0x10c694=_0x4814c4;stopBot(_0x74216[_0x10c694(0x28a)]);});}else{if(settings[_0x4814c4(0x19b)]==_0x4814c4(0x1a9))tgBot[_0x4814c4(0x237)](_0x4eb467[_0x4814c4(0x2a9)]['id'],_0x4814c4(0x279)+_0x6e79aa)[_0x4814c4(0x19c)](_0x209a19=>{telegramError(_0x209a19);});stopBot(_0x6e79aa);}}),tgBot[_0xb1d56b(0x1f1)](_0xb1d56b(0x1e2));});}}),tgBot[_0x380555(0x1db)](/\/on/,_0x30ad1a=>{const _0x938332=_0x380555;if(!validateTelegram(_0x30ad1a))return;tgBot[_0x938332(0x1f1)]('callback_query');const _0x2c04ff=getDisabledBots();if(_0x2c04ff[_0x938332(0x28e)]==0x0)tgBot['sendMessage'](_0x30ad1a['chat']['id'],'All\x20bots\x20running\x20right\x20now')[_0x938332(0x19c)](_0x55763f=>{telegramError(_0x55763f);});else{if(_0x2c04ff['length']>0x1)_0x2c04ff[_0x938332(0x2a4)]({'botID':_0x938332(0x1ae)});let _0x526740=[],_0x3797f8=[];const _0xb99916=_0x2c04ff['length']%0x4==0x0||_0x2c04ff['length']%0x4==0x3||_0x2c04ff['length']%0x3==0x1?0x4:0x3;let _0x389491=0x0;_0x2c04ff[_0x938332(0x2ab)]((_0x6cd580,_0x48747a)=>{const _0x3d85c1=_0x938332;if(_0x48747a%_0xb99916==0x0)_0x3797f8=[];_0x3797f8['push']({'text':_0x6cd580[_0x3d85c1(0x28a)]==_0x3d85c1(0x1ae)?'All\x20bots':_0x3d85c1(0x270)+_0x6cd580['botID'],'callback_data':_0x6cd580[_0x3d85c1(0x28a)]}),_0x48747a%_0xb99916==0x0&&(_0x526740[_0x389491]=_0x3797f8,_0x389491++);}),tgBot['sendMessage'](_0x30ad1a[_0x938332(0x2a9)]['id'],_0x938332(0x284),{'reply_markup':{'inline_keyboard':_0x526740}})['catch'](_0x20ef16=>{telegramError(_0x20ef16);}),tgBot['on'](_0x938332(0x1e2),async _0x38ec56=>{const _0x4a0568=_0x938332,_0x961499=_0x38ec56['data'],_0x42d837=_0x38ec56['message'];tgBot['answerCallbackQuery'](_0x38ec56['id'])[_0x4a0568(0x213)](async()=>{const _0x2eb9dd=_0x4a0568;if(_0x961499==_0x2eb9dd(0x1ae)){if(settings[_0x2eb9dd(0x19b)]==_0x2eb9dd(0x1a9))tgBot['sendMessage'](_0x42d837['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x2eb9dd(0x19c)](_0x20460c=>{telegramError(_0x20460c);});_0x2c04ff[_0x2eb9dd(0x2ab)](_0x5a9ff6=>{const _0x413b22=_0x2eb9dd;if(_0x5a9ff6[_0x413b22(0x28a)]!='all')toggleBot(_0x5a9ff6[_0x413b22(0x28a)],toggleStatus(_0x5a9ff6[_0x413b22(0x28a)]),'stopped');});}else{if(settings['telegramEvents']==_0x2eb9dd(0x1a9))tgBot[_0x2eb9dd(0x237)](_0x42d837['chat']['id'],_0x2eb9dd(0x210)+_0x961499)[_0x2eb9dd(0x19c)](_0x1c5b94=>{telegramError(_0x1c5b94);});toggleBot(_0x961499,toggleStatus(_0x961499),'stopped');}}),tgBot[_0x4a0568(0x1f1)](_0x4a0568(0x1e2));});}}),tgBot[_0x380555(0x1db)](/\/off/,_0xda953a=>{const _0x2fae56=_0x380555;if(!validateTelegram(_0xda953a))return;tgBot[_0x2fae56(0x1f1)]('callback_query');const _0x490e57=getEnabledBots();if(_0x490e57[_0x2fae56(0x28e)]==0x0)tgBot[_0x2fae56(0x237)](_0xda953a[_0x2fae56(0x2a9)]['id'],_0x2fae56(0x24b))[_0x2fae56(0x19c)](_0x550811=>{telegramError(_0x550811);});else{if(_0x490e57[_0x2fae56(0x28e)]>0x1)_0x490e57[_0x2fae56(0x2a4)]({'botID':_0x2fae56(0x1ae)});let _0x48cb7f=[],_0x32f7ba=[];const _0x35f7a4=_0x490e57[_0x2fae56(0x28e)]%0x4==0x0||_0x490e57[_0x2fae56(0x28e)]%0x4==0x3||_0x490e57[_0x2fae56(0x28e)]%0x3==0x1?0x4:0x3;let _0x27865b=0x0;_0x490e57['forEach']((_0x52f1c4,_0x14fe55)=>{const _0x180a29=_0x2fae56;if(_0x14fe55%_0x35f7a4==0x0)_0x32f7ba=[];_0x32f7ba[_0x180a29(0x2a4)]({'text':_0x52f1c4[_0x180a29(0x28a)]==_0x180a29(0x1ae)?_0x180a29(0x24c):'Bot\x20'+_0x52f1c4[_0x180a29(0x28a)],'callback_data':_0x52f1c4[_0x180a29(0x28a)]}),_0x14fe55%_0x35f7a4==0x0&&(_0x48cb7f[_0x27865b]=_0x32f7ba,_0x27865b++);}),tgBot[_0x2fae56(0x237)](_0xda953a[_0x2fae56(0x2a9)]['id'],_0x2fae56(0x27f),{'reply_markup':{'inline_keyboard':_0x48cb7f}})['catch'](_0xd38253=>{telegramError(_0xd38253);}),tgBot['on'](_0x2fae56(0x1e2),async _0x944059=>{const _0x43050d=_0x2fae56,_0x1f15e2=_0x944059[_0x43050d(0x2c4)],_0x4d63db=_0x944059['message'];tgBot[_0x43050d(0x272)](_0x944059['id'])[_0x43050d(0x213)](async()=>{const _0x4bc2b7=_0x43050d;if(_0x1f15e2==_0x4bc2b7(0x1ae)){if(settings[_0x4bc2b7(0x19b)]==_0x4bc2b7(0x1a9))tgBot[_0x4bc2b7(0x237)](_0x4d63db[_0x4bc2b7(0x2a9)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4bc2b7(0x19c)](_0x9f2783=>{telegramError(_0x9f2783);});_0x490e57['forEach'](_0x22b5ed=>{const _0x3f09fb=_0x4bc2b7;if(_0x22b5ed['botID']!='all')toggleBot(_0x22b5ed[_0x3f09fb(0x28a)],toggleStatus(_0x22b5ed[_0x3f09fb(0x28a)]),_0x3f09fb(0x24d));});}else{if(settings['telegramEvents']==_0x4bc2b7(0x1a9))tgBot[_0x4bc2b7(0x237)](_0x4d63db[_0x4bc2b7(0x2a9)]['id'],_0x4bc2b7(0x274)+_0x1f15e2)[_0x4bc2b7(0x19c)](_0x275271=>{telegramError(_0x275271);});toggleBot(_0x1f15e2,toggleStatus(_0x1f15e2),_0x4bc2b7(0x24d));}}),tgBot[_0x43050d(0x1f1)]('callback_query');});}}),tgBot['onText'](/\/disable/,_0x2f40e5=>{const _0x3511b3=_0x380555;if(!validateTelegram(_0x2f40e5))return;tgBot[_0x3511b3(0x237)](_0x2f40e5[_0x3511b3(0x2a9)]['id'],_0x3511b3(0x28b))[_0x3511b3(0x19c)](_0x41c6b8=>{telegramError(_0x41c6b8);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x4538ac=>{const _0x2db063=_0x380555;if(!validateTelegram(_0x4538ac))return;tgBot[_0x2db063(0x237)](_0x4538ac['chat']['id'],_0x23ef9f)[_0x2db063(0x19c)](_0x139d70=>{telegramError(_0x139d70);});}),tgBot['on'](_0x380555(0x18b),_0x4e1617=>{const _0x1f42eb=_0x380555;_0x4e1617[_0x1f42eb(0x1c5)]()[_0x1f42eb(0x1ed)]('404\x20Not\x20Found')&&(logging(_0x1f42eb(0x1d9)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')['emit'](_0x1f42eb(0x267),_0x1f42eb(0x1d9)));}),process[_0x380555(0x26e)]('SIGINT',()=>{const _0x1bac0f=_0x380555;if(tgBot)tgBot[_0x1bac0f(0x1e5)]();process[_0x1bac0f(0x2d4)](0x1);}),process[_0x380555(0x26e)](_0x380555(0x226),()=>{const _0x4dd807=_0x380555;if(tgBot)tgBot[_0x4dd807(0x1e5)]();process[_0x4dd807(0x2d4)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x30ee03,_0x41d8c5){const _0x48d9ec=_0x4ff915;if(settings[_0x48d9ec(0x1c4)]){if(settings[_0x48d9ec(0x19b)]==_0x48d9ec(0x1ae)||(_0x41d8c5[_0x48d9ec(0x2ac)]==_0x48d9ec(0x1b7)||_0x41d8c5[_0x48d9ec(0x2ac)]==_0x48d9ec(0x281))&&settings[_0x48d9ec(0x19b)]==_0x48d9ec(0x2b5)||_0x41d8c5[_0x48d9ec(0x2ac)]==_0x48d9ec(0x24a)&&settings['telegramEvents']==_0x48d9ec(0x1a9)){if(tgBot&&settings[_0x48d9ec(0x187)]){if(_0x41d8c5['showname'])tgBot[_0x48d9ec(0x237)](settings[_0x48d9ec(0x187)],_0x41d8c5[_0x48d9ec(0x1e4)]+_0x48d9ec(0x27a)+_0x41d8c5['event'])[_0x48d9ec(0x19c)](_0x291e6e=>{telegramError(_0x291e6e);});else tgBot[_0x48d9ec(0x237)](settings['telegramChatId'],'Bot\x20'+_0x30ee03+_0x48d9ec(0x27a)+_0x41d8c5[_0x48d9ec(0x198)])[_0x48d9ec(0x19c)](_0x28d45c=>{telegramError(_0x28d45c);});}}}}function getDeviceWithIp(_0x6f8d35){const _0x49b66c=_0x4ff915;return devices[_0x49b66c(0x2b2)](_0x47b65d=>_0x47b65d['ip']===_0x6f8d35);}function temporaryAccess2FA(_0x3e4422,_0x532093){const _0x5e7ae8=_0x4ff915;let _0x1e24d7=new Date(),_0x2c7a2f=![];if(lastIpApproval){if(_0x1e24d7-lastIpApproval<0x1388)_0x2c7a2f=!![];}lastIpApproval=new Date();if(_0x2c7a2f)return;tgBot&&settings[_0x5e7ae8(0x187)]&&(tgBot[_0x5e7ae8(0x1f1)]('callback_query'),tgBot[_0x5e7ae8(0x237)](settings[_0x5e7ae8(0x187)],_0x5e7ae8(0x200)+normalizeIP(_0x532093)['show']+_0x5e7ae8(0x2bd),{'parse_mode':_0x5e7ae8(0x23c),'reply_markup':{'inline_keyboard':[[{'text':_0x5e7ae8(0x1ba),'callback_data':'5'},{'text':_0x5e7ae8(0x244),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x5e7ae8(0x19c)](_0x4bbe0c=>{telegramError(_0x4bbe0c);}),tgBot['on'](_0x5e7ae8(0x1e2),async _0x2682a5=>{const _0x3d9237=_0x5e7ae8,_0x46fe84=_0x2682a5['data'],_0xafddff=_0x2682a5[_0x3d9237(0x271)];tgBot[_0x3d9237(0x272)](_0x2682a5['id'])[_0x3d9237(0x213)](async()=>{const _0x5e3ad3=_0x3d9237;devices[_0x3e4422]['telegramIpApproval']={'clientip':_0x532093,'timestamp':new Date()[_0x5e3ad3(0x256)](),'expiry':_0x46fe84},_0x46fe84!=_0x5e3ad3(0x264)?(await tgBot[_0x5e3ad3(0x237)](_0xafddff[_0x5e3ad3(0x2a9)]['id'],_0x5e3ad3(0x29f)+_0x46fe84+'\x20minutes',{'parse_mode':'HTML'})[_0x5e3ad3(0x19c)](_0x3ce391=>{telegramError(_0x3ce391);}),io['to'](_0x3e4422)['emit'](_0x5e3ad3(0x188),{'access':{'allow':![],'reason':_0x5e3ad3(0x286),'token':null}})):(await tgBot[_0x5e3ad3(0x237)](_0xafddff['chat']['id'],_0x5e3ad3(0x20e))[_0x5e3ad3(0x19c)](_0xd49950=>{telegramError(_0xd49950);}),io['to'](_0x3e4422)[_0x5e3ad3(0x27e)](_0x5e3ad3(0x188),{'access':{'allow':![],'reason':_0x5e3ad3(0x1ef),'token':null}}));}),tgBot['removeListener'](_0x3d9237(0x1e2));}));}function loginAccess2FA(_0x19445c,_0x2c862c){const _0x1a99dd=_0x4ff915;tgBot&&settings['telegramChatId']&&(tgBot[_0x1a99dd(0x1f1)](_0x1a99dd(0x1e2)),tgBot[_0x1a99dd(0x237)](settings[_0x1a99dd(0x187)],_0x1a99dd(0x18e)+normalizeIP(_0x2c862c)[_0x1a99dd(0x26f)]+_0x1a99dd(0x2bd),{'parse_mode':_0x1a99dd(0x23c),'reply_markup':{'inline_keyboard':[[{'text':_0x1a99dd(0x255),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x1a99dd(0x264)}]]}})[_0x1a99dd(0x19c)](_0x4b6295=>{telegramError(_0x4b6295);}),tgBot['on'](_0x1a99dd(0x1e2),async _0x390472=>{const _0x4de203=_0x1a99dd,_0x332cb2=_0x390472[_0x4de203(0x2c4)],_0x363ec6=_0x390472['message'];tgBot[_0x4de203(0x272)](_0x390472['id'])[_0x4de203(0x213)](async()=>{const _0x19a744=_0x4de203;devices[_0x19445c]['telegram2FaApproval']={'clientip':_0x2c862c,'timestamp':new Date()['getTime'](),'expiry':_0x332cb2},_0x332cb2!=_0x19a744(0x264)?(await tgBot[_0x19a744(0x237)](_0x363ec6[_0x19a744(0x2a9)]['id'],_0x19a744(0x2c1),{'parse_mode':'HTML'})[_0x19a744(0x19c)](_0xe678ab=>{telegramError(_0xe678ab);}),io['to'](_0x19445c)[_0x19a744(0x27e)](_0x19a744(0x188),{'access':{'allow':![],'reason':_0x19a744(0x286),'token':null}})):(await tgBot[_0x19a744(0x237)](_0x363ec6[_0x19a744(0x2a9)]['id'],_0x19a744(0x265))[_0x19a744(0x19c)](_0x5e3b21=>{telegramError(_0x5e3b21);}),io['to'](_0x19445c)[_0x19a744(0x27e)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x4de203(0x1f1)]('callback_query');}));}function getConfiguration(){const _0x4259aa=_0x4ff915;return dbConfig['get'](_0x4259aa(0x204))['sortBy'](_0x4259aa(0x28a))[_0x4259aa(0x194)]()||[];}function getEnabledBots(){const _0x208974=_0x4ff915;return dbConfig['get'](_0x208974(0x204))['sortBy']('botID')[_0x208974(0x238)]({'status':_0x208974(0x1c6)})[_0x208974(0x194)]()||[];}function getDisabledBots(){const _0xc41485=_0x4ff915;return dbConfig[_0xc41485(0x1e3)](_0xc41485(0x204))['sortBy'](_0xc41485(0x28a))[_0xc41485(0x238)]({'status':_0xc41485(0x1bc)})['value']()||[];}function getSettings(){const _0x1c240e=_0x4ff915;return dbSettings[_0x1c240e(0x1e3)]('settings')[_0x1c240e(0x194)]()||{'timeshift':0x0};}function getSecure(){const _0x527177=_0x4ff915;return dbSecure[_0x527177(0x1e3)](_0x527177(0x253))[_0x527177(0x194)]()||{};}function getBlacklist(){const _0x3665b6=_0x4ff915;return dbSecure[_0x3665b6(0x1e3)]('blacklist')[_0x3665b6(0x194)]()||[];}function broadcastToBots(_0x5022de,_0x4918ae){const _0x565b13=_0x4ff915;config[_0x565b13(0x2ab)](_0x2db5f6=>{const _0xbd90d0=_0x565b13;if(_0x2db5f6['status']==_0xbd90d0(0x1c6)&&_0x2db5f6[_0xbd90d0(0x1d7)]=='running'){if(pid[_0x2db5f6[_0xbd90d0(0x28a)]])pid[_0x2db5f6['botID']][_0xbd90d0(0x2b6)]({[_0x5022de]:_0x4918ae});}});}function storeSettings(_0x1ee5cf,_0x203e96=![]){const _0x560313=_0x4ff915;_0x1ee5cf={...settings,..._0x1ee5cf};if(_0x203e96&&_0x1ee5cf['bbPassword']!=_0x560313(0x225)&&_0x1ee5cf[_0x560313(0x20d)]!=''){const _0x4e8285=crypt[_0x560313(0x2b3)](secure['privateKey'],_0x1ee5cf[_0x560313(0x20d)])[_0x560313(0x271)][_0x560313(0x2ce)]('@')[0x0],_0x3f0dae=bcrypt[_0x560313(0x243)](_0x4e8285,saltRounds);_0x1ee5cf={..._0x1ee5cf,'bbPassword':_0x3f0dae};}if(_0x203e96&&_0x1ee5cf['telegramToken']!='************'&&_0x1ee5cf[_0x560313(0x20a)]!=''){const _0xd55ba6=crypt[_0x560313(0x2b3)](secure[_0x560313(0x257)],_0x1ee5cf[_0x560313(0x20a)])[_0x560313(0x271)][_0x560313(0x2ce)]('@')[0x0];_0x1ee5cf={..._0x1ee5cf,'telegramToken':_0xd55ba6};}const _0x2bfd2c=_0x1ee5cf[_0x560313(0x20a)]!=_0x560313(0x225)&&_0x1ee5cf[_0x560313(0x20a)]!=settings[_0x560313(0x20a)]||_0x1ee5cf[_0x560313(0x291)]!=settings[_0x560313(0x291)],_0xac2c93=_0x1ee5cf[_0x560313(0x20a)]==''||_0x1ee5cf[_0x560313(0x291)]=='';if(_0x2bfd2c)_0x1ee5cf[_0x560313(0x19b)]=_0x560313(0x1ae);for(const [_0x1ed8eb,_0x5aa5a0]of Object[_0x560313(0x262)](_0x1ee5cf)){if(_0x1ed8eb==_0x560313(0x20a)&&_0x5aa5a0==_0x560313(0x225)){_0x1ee5cf[_0x560313(0x20a)]=settings[_0x560313(0x20a)];continue;};if(_0x1ed8eb==_0x560313(0x20d)&&_0x5aa5a0==_0x560313(0x225)){_0x1ee5cf[_0x560313(0x20d)]=settings[_0x560313(0x20d)];continue;};dbSettings[_0x560313(0x2d8)](_0x560313(0x205)+_0x1ed8eb,_0x5aa5a0)[_0x560313(0x2c7)]();}settings=_0x1ee5cf,io['to'](_0x560313(0x298))[_0x560313(0x27e)](_0x560313(0x287),cleanSettings()),broadcastToBots(_0x560313(0x216),settings['timeshift']);if(_0x2bfd2c&&!_0xac2c93)initTelegram();if(_0x2bfd2c&&_0xac2c93)disableTelegram();getAllClients()[_0x560313(0x2ab)](_0x2659e8=>{const _0x379f30=_0x560313;getSocket(_0x2659e8['id'])['emit']('status',{'access':{'allow':![],'reason':_0x379f30(0x286),'token':null}});});}function updateSetting(_0x19a224,_0xb6caa6){const _0x5b5ab4=_0x4ff915;dbSettings['set']('settings.'+_0x19a224,_0xb6caa6)[_0x5b5ab4(0x2c7)](),settings=getSettings(),io['to'](_0x5b5ab4(0x298))['emit'](_0x5b5ab4(0x287),cleanSettings());}function storeSecure(_0x28a294){const _0x26300d=_0x4ff915;dbSecure[_0x26300d(0x1e3)]('secure')[_0x26300d(0x2a4)](_0x28a294)[_0x26300d(0x2c7)](),secure=_0x28a294;}function addBlacklist(_0x4d1b30){const _0x5ef4ff=_0x4ff915;cleanBlacklist();let _0x1abf7e;devices[_0x4d1b30]['telegramIpApproval']?_0x1abf7e=Math[_0x5ef4ff(0x23e)](devices[_0x4d1b30][_0x5ef4ff(0x28f)][_0x5ef4ff(0x1e0)],loginExpiry):_0x1abf7e=loginExpiry,dbSecure[_0x5ef4ff(0x1e3)](_0x5ef4ff(0x1fa))[_0x5ef4ff(0x2a4)]({'expiry':new Date()[_0x5ef4ff(0x256)]()+_0x1abf7e*0x3c*0x3e8,'token':devices[_0x4d1b30][_0x5ef4ff(0x1f8)]['token']})[_0x5ef4ff(0x2c7)](),blacklist=dbSecure[_0x5ef4ff(0x1e3)]('blacklist')[_0x5ef4ff(0x194)]();}function cleanBlacklist(){const _0x29ce86=_0x4ff915;let _0x17d6ca=dbSecure[_0x29ce86(0x1e3)]('blacklist')['cloneDeep']()[_0x29ce86(0x194)](),_0x29fe62=new Date()['getTime']();_0x17d6ca[_0x29ce86(0x2ab)](_0x4c87f2=>{const _0x13a7b8=_0x29ce86;_0x4c87f2[_0x13a7b8(0x1e0)]<_0x29fe62&&dbSecure[_0x13a7b8(0x1e3)]('blacklist')[_0x13a7b8(0x18a)]({'expiry':_0x4c87f2['expiry']})[_0x13a7b8(0x2c7)]();});}function initStates(){let _0x21de2f=getConfiguration();_0x21de2f['forEach'](_0x573476=>{const _0x51b4dd=_0x4c64;_0x573476[_0x51b4dd(0x1d7)]=_0x51b4dd(0x24d);}),storeConfiguration(_0x21de2f);}function onKeys(){const _0x53a4ac=new RSA();return new Promise(_0x5d2bb0=>{const _0x4b797e=_0x4c64;_0x53a4ac[_0x4b797e(0x1c8)]()[_0x4b797e(0x213)](_0x32d5dd=>{_0x5d2bb0(_0x32d5dd);});});}function _0x41ce(){const _0x3c5c6c=['store-configuration','Orders','defaults','@analytics/google-analytics','expiry','log','callback_query','get','botname','stopPolling','toIPv4Address','config/','Unauthorized\x20attempt\x20to\x20store\x20configuration','copyFileSync','connection','Unauthorized\x20attempt\x20to\x20update\x20settings','analytics','includes','toIPv4MappedAddress','temporary\x20access\x20rejected','stop','removeListener','-performance.json',',\x20must\x20be\x20a\x204\x20digit\x20number','initclient','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','sockets','auth','access','Password\x20reset\x20rejected','blacklist','secret','bb-secure.json','get-logs','apply','inherit','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','bot','name','bots','settings.','Notifications\x20types:\x20','2FA\x20required','isIPv4MappedAddress','jsonwebtoken','telegramToken','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20get\x20logs','bbPassword','Temporary\x20access\x20rejected','apiKey','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Unauthorized\x20login\x20attempt\x20(public\x20key)','lowdb','then','-events.json','/:bot/support','timeshift','login\x20token\x20generated','/:bot/portfolio','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Token\x20blacklisted','200wurEuv','clientip','/disable\x20-\x20disable\x20notifications\x0a','2UJFSni','disconnect','login','lowdb/adapters/FileSync','4135805ruvkuG','/:bot/performance','************','SIGTERM','/on\x20-\x20start\x20bot(s)\x0a','clients','::ffff:127.0.0.1','RSA','path','temporary\x20access\x20not\x20allowed','static','place-order','Balance\x20Bot\x20Server','env','user','isDirectory','Balance\x20Bot','<b>Telegram\x20bot\x20status:</b>\x0a','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Ok,\x20will\x20send\x20alert\x20notifications\x20only','sendMessage','filter','reset-password','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','yes','HTML','node-telegram-bot-api','max','No\x20authentication\x20token','assign','telegram','build2','hashSync','15\x20min','randomBytes','Invalid\x20username\x20or\x20IP\x20address','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','whitelistEnabled','59420mrbkFe','order','No\x20bots\x20running\x20right\x20now','All\x20bots','stopped','starting\x20bot\x20|\x20Bot\x20','kind','RSA-OAEP','socket.io','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','secure','isValid','accept','getTime','privateKey','getFullYear','bcryptjs','referer','bot-','All','/:bot/configuration','logged\x20out','Invalid\x20authentication\x20token\x20(1)','from','args','entries','bbUsername','reject','Login\x20rejected','login\x20not\x20required','notification','\x20only\x0a','/help\x20-\x20show\x20available\x20commands\x0a','756TciFPV','sendFile','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','f2aRequired','once','show','Bot\x20','message','answerCallbackQuery','Error:\x20Invalid\x20argument\x20','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','store-headless','port','-----------------------------------------------------------------------------------','search','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','\x20>\x20','Notifications\x20enabled\x0a','getHours','hybrid-crypto-js','emit','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','success','ipaddr.js','host','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Crypt','reload','settings','encryptedUuid','add','botID','Notifications\x20disabled','listen','build','length','telegramIpApproval','Unauthorized\x20attempt\x20to\x20log\x20out','telegramUsername','Invalid\x20authentication\x20token\x20(2)','new-disabled','70376XYiyyj','update-bot','getSeconds','whitelist','botmanager','enabled\x20Bot\x20','parse','bb-settings.json','disabled\x20Bot\x20','<b>Balance\x20Bot\x20status:</b>\x0a','bb/','Access\x20enabled\x20for\x20','handshake','temporary\x20access\x20timeout',':\x20Bot\x20Mgr\x20>\x20','reason','push','removeAllListeners','-results.json','placeOrder','unlinkSync','chat','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','forEach','type','Unauthorized\x20login\x20attempt\x20(timeout)','getMonth','yargs/yargs','/status\x20-\x20show\x20bot(s)\x20status\x0a','getDate','find','decrypt','Ok,\x20will\x20send\x20order\x20notifications\x20only','alerts','send','new','27357242AvfDVZ','1000','exp','compareSync','publicKey','</b>\x20?','store','pidExpireLogin','cancelLoading','Login\x20accepted','match','store-settings','data','test','timestamp','write','login\x20required','ipc','getUTCHours','argv','padStart','fork','split','logout','restart','sign','UA-192771731-1','emitHistory','exit','connected','kill','loginRequired','set','telegram2FaApproval','telegramChatId','status','NTBA_FIX_319','remove','polling_error','constructor','remoteAddress','Allow\x20login\x20from\x20IP\x20address\x20<b>','(((.+)+)+)+$','started','conn','token','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','value','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','98448MfTuoF','uuid','event','crypto','::1','telegramEvents','catch','pidRefreshToken','login\x20token\x20valid','idling\x20bot\x20\x20\x20|\x20Bot\x20','allow','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20|\x20','invalid\x20credentials','2FA\x20login\x20token\x20generated','1100040zBPgmY','hasOwnProperty','2FA\x20login\x20required','headers','orders','getMinutes','storeConfiguration','randomFillSync','createServer','all','127.0.0.1','/off\x20-\x20stop\x20bot(s)\x0a','restarting\x20Bot\x20','delete-bot','index.html','sha256','access\x20timeout','Bot\x20Mgr\x20>\x20','error','add-bot','keys','5\x20min','server','disabled','temporary\x20token\x20generated','get-portfolio','700997YJCmUf','mkdirSync','storeHeadless','getStartingBalances','User\x20has\x20been\x20validated','telegramEnabled','toString','enabled','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','generateKeyPairAsync','/:bot/coins','You\x20can\x20use\x20the\x20following\x20commands:\x0a','use','username','date-fns','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20to\x20delete\x20bot','bb-config.json','getPortfolio','password','102exjEXX','default','3000','Unauthorized\x20attempt\x20to\x20update\x20bot','live','https://hodlerhacks.com','Invalid\x20Telegram\x20token','join','onText'];_0x41ce=function(){return _0x3c5c6c;};return _0x41ce();}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x104f26=_0x4ff915;let _0x236e60=getConfiguration(),_0x334c69=![];_0x236e60[_0x104f26(0x2ab)](_0x40aee4=>{const _0x6512d5=_0x104f26;if(_0x40aee4['status']=='running')_0x40aee4[_0x6512d5(0x188)]=_0x6512d5(0x1c6),_0x334c69=!![];else _0x40aee4[_0x6512d5(0x188)]==_0x6512d5(0x24d)&&(_0x40aee4[_0x6512d5(0x188)]=_0x6512d5(0x1bc),_0x334c69=!![]);});if(_0x334c69)storeConfiguration(_0x236e60);let _0xde5c30=getSecure();if(!_0xde5c30[_0x104f26(0x1a6)](_0x104f26(0x1fb))){let _0x29287e=await generateKeys();_0xde5c30[_0x104f26(0x2bc)]=_0x29287e[_0x104f26(0x2bc)],_0xde5c30[_0x104f26(0x257)]=_0x29287e[_0x104f26(0x257)],_0xde5c30[_0x104f26(0x1fb)]=crypto[_0x104f26(0x245)](0x20)['toString']('hex');;storeSecure(_0xde5c30);}let _0x5e725d=getSettings();_0x334c69=![];!_0x5e725d[_0x104f26(0x1a6)]('loginRequired')&&(_0x5e725d[_0x104f26(0x2d7)]=![],_0x5e725d[_0x104f26(0x263)]='',_0x5e725d[_0x104f26(0x20d)]='',_0x5e725d[_0x104f26(0x26d)]=![],_0x334c69=!![]);!_0x5e725d[_0x104f26(0x1a6)](_0x104f26(0x248))&&(_0x5e725d[_0x104f26(0x248)]=![],_0x5e725d['whitelist']=[],_0x5e725d['temporaryAccessAllowed']=![],_0x334c69=!![]);if(!_0x5e725d[_0x104f26(0x1a6)](_0x104f26(0x1c4))){if(_0x5e725d[_0x104f26(0x187)])_0x5e725d[_0x104f26(0x1c4)]=!![];else _0x5e725d[_0x104f26(0x1c4)]=![];_0x334c69=!![];}if(_0x334c69)storeSettings(_0x5e725d);}function storeConfiguration(_0x53bb71){const _0x17c9b3=_0x4ff915;dbConfig[_0x17c9b3(0x1e3)](_0x17c9b3(0x204))[_0x17c9b3(0x18a)]()[_0x17c9b3(0x2c7)](),dbConfig[_0x17c9b3(0x1e3)]('bots')[_0x17c9b3(0x2a4)](..._0x53bb71)[_0x17c9b3(0x2c7)](),config=_0x53bb71;}function resetPassword(){const _0xbd88c7=_0x4ff915;tgBot&&settings[_0xbd88c7(0x187)]&&(tgBot['removeListener'](_0xbd88c7(0x1e2)),tgBot[_0xbd88c7(0x237)](settings[_0xbd88c7(0x187)],_0xbd88c7(0x252),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0xbd88c7(0x23b)},{'text':'no','callback_data':'no'}]]}})[_0xbd88c7(0x19c)](_0x113f39=>{telegramError(_0x113f39);}),tgBot['on'](_0xbd88c7(0x1e2),async _0x521f41=>{const _0x3030d3=_0xbd88c7,_0x568f13=_0x521f41[_0x3030d3(0x2c4)],_0x3dc360=_0x521f41['message'];tgBot[_0x3030d3(0x272)](_0x521f41['id'])[_0x3030d3(0x213)](async()=>{const _0x122ac2=_0x3030d3;if(_0x568f13!='no'){const _0x4049bf=0xf,_0x59bc71=_0x122ac2(0x1ce),_0x54fc64=Array['from'](crypto[_0x122ac2(0x1ac)](new Uint32Array(_0x4049bf)))['map'](_0x17e3f6=>_0x59bc71[_0x17e3f6%_0x59bc71[_0x122ac2(0x28e)]])[_0x122ac2(0x1da)](''),_0x1c5b6d=bcrypt[_0x122ac2(0x243)](_0x54fc64,saltRounds);storeSettings({'bbPassword':_0x1c5b6d}),await tgBot[_0x122ac2(0x237)](_0x3dc360[_0x122ac2(0x2a9)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x54fc64,{'parse_mode':_0x122ac2(0x23c)})[_0x122ac2(0x19c)](_0x2612b6=>{telegramError(_0x2612b6);});}else await tgBot[_0x122ac2(0x237)](_0x3dc360[_0x122ac2(0x2a9)]['id'],_0x122ac2(0x1f9))['catch'](_0x2abb0e=>{telegramError(_0x2abb0e);});}),tgBot[_0x3030d3(0x1f1)]('callback_query');}));}function logging(_0x588294){const _0x1b6e39=_0x4ff915;console[_0x1b6e39(0x1e1)](getTimeStamp()+_0x1b6e39(0x2a2)+_0x588294);if(tgBot&&settings['telegramChatId']&&settings[_0x1b6e39(0x19b)]!='orders')tgBot[_0x1b6e39(0x237)](settings[_0x1b6e39(0x187)],_0x1b6e39(0x1b6)+_0x588294)[_0x1b6e39(0x19c)](_0x3edd63=>{telegramError(_0x3edd63);});}function getServerTime(){const _0x3f6d9a=_0x4ff915,_0x53d012=new Date();return _0x53d012[_0x3f6d9a(0x258)]()+'/'+(_0x53d012[_0x3f6d9a(0x2ae)]()+0x1)[_0x3f6d9a(0x1c5)]()[_0x3f6d9a(0x2cc)](0x2,'0')+'/'+_0x53d012[_0x3f6d9a(0x2b1)]()[_0x3f6d9a(0x1c5)]()[_0x3f6d9a(0x2cc)](0x2,'0')+'\x20'+_0x53d012['getHours']()['toString']()[_0x3f6d9a(0x2cc)](0x2,'0')+':'+_0x53d012['getMinutes']()[_0x3f6d9a(0x1c5)]()[_0x3f6d9a(0x2cc)](0x2,'0')+':'+_0x53d012[_0x3f6d9a(0x296)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x49f510=_0x4ff915,_0x1e00e8=shiftedTime();return _0x1e00e8[_0x49f510(0x258)]()+'/'+(_0x1e00e8[_0x49f510(0x2ae)]()+0x1)['toString']()[_0x49f510(0x2cc)](0x2,'0')+'/'+_0x1e00e8[_0x49f510(0x2b1)]()[_0x49f510(0x1c5)]()[_0x49f510(0x2cc)](0x2,'0')+'\x20'+_0x1e00e8[_0x49f510(0x27c)]()[_0x49f510(0x1c5)]()['padStart'](0x2,'0')+':'+_0x1e00e8[_0x49f510(0x1aa)]()[_0x49f510(0x1c5)]()[_0x49f510(0x2cc)](0x2,'0')+':'+_0x1e00e8[_0x49f510(0x296)]()[_0x49f510(0x1c5)]()[_0x49f510(0x2cc)](0x2,'0');}function shiftedTime(){const _0x4416d9=_0x4ff915,_0x58b508=new Date();let _0x2d82ff=_0x58b508;if(settings[_0x4416d9(0x216)]&&settings[_0x4416d9(0x216)]!==0x0)_0x2d82ff=fns[_0x4416d9(0x289)](_0x58b508,{'hours':settings[_0x4416d9(0x216)]});return _0x2d82ff;}function startScheduler(){const _0x53c9e3=_0x4ff915;let _0x276201=new Date()[_0x53c9e3(0x2ca)]();_0x276201==0x1&&backupConfigFiles();_0x276201==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4c8717=_0x4ff915;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x4c8717(0x2ab)](_0x5885e3=>{const _0x252137=_0x4c8717;if(!_0x5885e3[_0x252137(0x232)]())fs[_0x252137(0x1e9)](configpath+_0x5885e3[_0x252137(0x203)],configbackuppath+_0x5885e3[_0x252137(0x203)]);});}function triggerAnalytics(){const _0x139930=_0x4ff915;analytics['page']({'title':_0x139930(0x22f),'href':_0x139930(0x1d8),'path':'/v'+serverversion});}function validateCredentials(_0x2b29c1,_0x1b2720){const _0x2f8fea=_0x4ff915;if(_0x2b29c1[_0x2f8fea(0x1cc)]==settings[_0x2f8fea(0x263)]&&bcrypt[_0x2f8fea(0x2bb)](_0x2b29c1[_0x2f8fea(0x1d2)],settings[_0x2f8fea(0x20d)])){if(settings[_0x2f8fea(0x26d)])return{'allow':![],'reason':_0x2f8fea(0x1a7),'token':null};else{const _0x596312=generateLoginToken(_0x1b2720);return{'allow':!![],'reason':_0x2f8fea(0x217),'token':_0x596312};}}else return{'allow':![],'reason':_0x2f8fea(0x1a3),'token':null};}function refreshToken(_0x2848ae){const _0x408ce0=generateLoginToken(_0x2848ae);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x408ce0};}function validateAccess(_0x5763b2,_0x2d9833){const _0x2b80ac=_0x4ff915;let _0x103a1e=devices[_0x2d9833]['ip'],_0x50f66b;const _0x594e54=_0x29959f=>{const _0x5c3112=_0x4c64;if(settings[_0x5c3112(0x2d7)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2d9833)){const _0x138997=generateLoginToken(_0x2d9833);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x138997};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x50f66b=validToken(_0x29959f,_0x2d9833),_0x50f66b[_0x5c3112(0x1a6)](_0x5c3112(0x281))?{'allow':!![],'reason':_0x5c3112(0x19e),'token':_0x29959f}:{'allow':![],'reason':_0x5c3112(0x2c8),'token':null};}else return{'allow':!![],'reason':_0x5c3112(0x266),'token':null};};if(settings[_0x2b80ac(0x248)]){let _0x3d1d2b=[...settings[_0x2b80ac(0x297)],_0x2b80ac(0x19a),_0x2b80ac(0x229),_0x2b80ac(0x1af)];if(_0x3d1d2b[_0x2b80ac(0x1ed)](_0x103a1e))return _0x594e54(_0x5763b2);else{_0x50f66b=validToken(_0x5763b2,_0x2d9833);if(_0x50f66b[_0x2b80ac(0x1a6)](_0x2b80ac(0x281)))return _0x594e54(_0x5763b2);else{if(telegramIpApproved(_0x2d9833)){const _0x398ad4=generateToken(_0x2d9833);return _0x50f66b=_0x594e54(_0x5763b2),_0x50f66b[_0x2b80ac(0x1a0)]?{'allow':!![],'reason':_0x2b80ac(0x1bd),'token':_0x398ad4}:_0x50f66b;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x2b80ac(0x207),'token':null}:{'allow':![],'reason':_0x2b80ac(0x22c),'token':null};}}}else return _0x594e54(_0x5763b2);}function timelyDecrypt(_0x5c3337,_0x54ecdd=!![]){const _0x1d655d=_0x4ff915;if(_0x5c3337)try{const _0x5547da=crypt[_0x1d655d(0x2b3)](secure[_0x1d655d(0x257)],_0x5c3337)[_0x1d655d(0x271)],_0x5cced4=_0x5547da['split']('@')[0x0],_0x1de4de=_0x5547da[_0x1d655d(0x2ce)]('@')[0x1],_0x336071=new Date()[_0x1d655d(0x256)]();if(_0x54ecdd){if(_0x336071-_0x1de4de<maxSecretAge*0x3e8)return _0x5cced4;else return![];}else return _0x5cced4;}catch(_0x358f7f){return![];}else return![];}const validToken=(_0x3236ea,_0x234e4f)=>{const _0x3fdc57=_0x4ff915,_0x4a49cf=devices[_0x234e4f]['ip'];if(!_0x3236ea)return{'error':_0x3fdc57(0x23f)};for(let _0x4edeae of blacklist){if(_0x4edeae[_0x3fdc57(0x192)]==_0x3236ea)return{'error':_0x3fdc57(0x21b)};}let _0x4033fe;try{_0x4033fe=jwt['verify'](_0x3236ea,secure[_0x3fdc57(0x1fb)]+_0x234e4f);}catch{return{'error':_0x3fdc57(0x25f)};}if(!_0x4033fe['hasOwnProperty'](_0x3fdc57(0x21d))&&!_0x4033fe[_0x3fdc57(0x1a6)]('username')||!_0x4033fe[_0x3fdc57(0x1a6)](_0x3fdc57(0x2ba)))return{'error':_0x3fdc57(0x292)};if(!_0x4033fe[_0x3fdc57(0x1a6)](_0x3fdc57(0x1cc))&&_0x4033fe[_0x3fdc57(0x1a6)](_0x3fdc57(0x21d))){const {clientip:_0x4cda6e}=_0x4033fe;return _0x4a49cf==_0x4cda6e?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4033fe[_0x3fdc57(0x1a6)](_0x3fdc57(0x1cc))&&_0x4033fe[_0x3fdc57(0x1a6)](_0x3fdc57(0x21d))){const {username:_0x4ff441,clientip:_0x24dbfe}=_0x4033fe;return settings[_0x3fdc57(0x263)]==_0x4ff441&&_0x4a49cf==_0x24dbfe?{'success':_0x3fdc57(0x1c3)}:{'error':_0x3fdc57(0x246)};}}},generateLoginToken=_0x599389=>{const _0x1667a2=_0x4ff915;if(_0x599389){const _0x434229=devices[_0x599389]['ip'];return jwt[_0x1667a2(0x2d1)]({'username':settings[_0x1667a2(0x263)],'clientip':_0x434229},secure['secret']+_0x599389,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1dbc5c=>{const _0x8d2419=_0x4ff915;if(_0x1dbc5c){const _0x17aab5=devices[_0x1dbc5c]['ip'];return jwt[_0x8d2419(0x2d1)]({'clientip':_0x17aab5},secure[_0x8d2419(0x1fb)]+_0x1dbc5c,{'expiresIn':devices[_0x1dbc5c][_0x8d2419(0x28f)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x1add61=>{const _0x5a9a04=_0x4ff915;let _0x2e0a78=![];return devices[_0x1add61]['telegramIpApproval']&&devices[_0x1add61][_0x5a9a04(0x28f)]['expiry']!='reject'&&(_0x2e0a78=devices[_0x1add61][_0x5a9a04(0x28f)][_0x5a9a04(0x21d)]==devices[_0x1add61]['ip']&&new Date()[_0x5a9a04(0x256)]()-devices[_0x1add61]['telegramIpApproval'][_0x5a9a04(0x2c6)]<devices[_0x1add61]['telegramIpApproval'][_0x5a9a04(0x1e0)]*0x3c*0x3e8),_0x2e0a78;},telegram2FaApproved=_0xa3fdca=>{const _0x45abdb=_0x4ff915;let _0x54f1d6=![];return devices[_0xa3fdca][_0x45abdb(0x186)]&&devices[_0xa3fdca][_0x45abdb(0x186)]['expiry']!=_0x45abdb(0x264)&&(_0x54f1d6=devices[_0xa3fdca][_0x45abdb(0x186)][_0x45abdb(0x21d)]==devices[_0xa3fdca]['ip']&&new Date()[_0x45abdb(0x256)]()-devices[_0xa3fdca][_0x45abdb(0x186)]['timestamp']<devices[_0xa3fdca][_0x45abdb(0x186)][_0x45abdb(0x1e0)]*0x3c*0x3e8),_0x54f1d6;},normalizeIP=_0x2af4f2=>{const _0x293e72=_0x4ff915;let _0x4a1a77=null,_0x2356f6=null;if(ipaddr[_0x293e72(0x254)](_0x2af4f2)){const _0x3caa79=ipaddr[_0x293e72(0x29a)](_0x2af4f2);_0x3caa79[_0x293e72(0x24f)]()==='ipv6'?(_0x3caa79[_0x293e72(0x208)]()&&(_0x4a1a77=_0x3caa79[_0x293e72(0x1e6)]()[_0x293e72(0x1c5)]()),_0x2356f6=_0x3caa79[_0x293e72(0x1c5)]()):(_0x4a1a77=_0x3caa79[_0x293e72(0x1c5)](),_0x2356f6=_0x3caa79[_0x293e72(0x1ee)]()[_0x293e72(0x1c5)]());}return{'show':_0x4a1a77?_0x4a1a77:_0x2356f6,'store':_0x2356f6};};