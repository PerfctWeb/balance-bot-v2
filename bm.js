const _0x4d28bd=_0x4b42;(function(_0x4bec1f,_0x81328e){const _0x5d0da5=_0x4b42,_0x2822b6=_0x4bec1f();while(!![]){try{const _0x29ff37=-parseInt(_0x5d0da5(0x1f4))/0x1+-parseInt(_0x5d0da5(0x159))/0x2*(-parseInt(_0x5d0da5(0x141))/0x3)+parseInt(_0x5d0da5(0x2a7))/0x4*(-parseInt(_0x5d0da5(0x210))/0x5)+parseInt(_0x5d0da5(0x135))/0x6*(-parseInt(_0x5d0da5(0x15b))/0x7)+parseInt(_0x5d0da5(0xec))/0x8*(parseInt(_0x5d0da5(0x222))/0x9)+parseInt(_0x5d0da5(0x237))/0xa+-parseInt(_0x5d0da5(0x1a3))/0xb;if(_0x29ff37===_0x81328e)break;else _0x2822b6['push'](_0x2822b6['shift']());}catch(_0x1f4167){_0x2822b6['push'](_0x2822b6['shift']());}}}(_0x210e,0xa3c7f));const _0x13f582=function(){let _0x574c14=!![];return function(_0x4b4549,_0x3e7581){const _0x218c6e=_0x574c14?function(){const _0x30df78=_0x4b42;if(_0x3e7581){const _0x4aa8ce=_0x3e7581[_0x30df78(0x1f2)](_0x4b4549,arguments);return _0x3e7581=null,_0x4aa8ce;}}:function(){};return _0x574c14=![],_0x218c6e;};}(),_0x37a985=_0x13f582(this,function(){const _0x468bf8=_0x4b42;return _0x37a985[_0x468bf8(0x180)]()[_0x468bf8(0x129)](_0x468bf8(0x28b))[_0x468bf8(0x180)]()[_0x468bf8(0x2e3)](_0x37a985)[_0x468bf8(0x129)](_0x468bf8(0x28b));});_0x37a985();'use strict';process[_0x4d28bd(0x169)][_0x4d28bd(0x248)]=0x1;const childProcess=require(_0x4d28bd(0x1f1)),fs=require('fs'),fns=require(_0x4d28bd(0xef)),low=require(_0x4d28bd(0x28e)),FileSync=require(_0x4d28bd(0x264)),path=require('path'),crypto=require(_0x4d28bd(0x1ea)),forge=require(_0x4d28bd(0x28f)),bcrypt=require(_0x4d28bd(0x252)),jwt=require(_0x4d28bd(0x2a9)),ipaddr=require(_0x4d28bd(0x2c1)),argv=require(_0x4d28bd(0xfc))(process['argv'][_0x4d28bd(0x1a2)](0x2))['argv'],uuidRandom=require('uuid-random'),{Telegraf,Markup}=require(_0x4d28bd(0x235)),Mixpanel=require(_0x4d28bd(0x2ac)),axios=require(_0x4d28bd(0xf6)),{GraphQLClient,gql}=require(_0x4d28bd(0x247)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x4d28bd(0x158)),PORT=argv[_0x4d28bd(0x1a0)]||_0x4d28bd(0x1c0),pattern=/^[0-9]{2,4}$/;!pattern[_0x4d28bd(0x102)](PORT)&&(console[_0x4d28bd(0x106)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x4d28bd(0x273)),process[_0x4d28bd(0x298)](0x1));const HOST=argv[_0x4d28bd(0x19e)]||null,userID=argv[_0x4d28bd(0x1dd)]||'',debugging=argv['d']||![],nodeversion=process[_0x4d28bd(0x1f9)][_0x4d28bd(0x2da)];let bbpath=_0x4d28bd(0x111),bbpath2='';const botfile=_0x4d28bd(0x2cd),configfile=_0x4d28bd(0x100),settingsfile=_0x4d28bd(0x2a2),securefile=_0x4d28bd(0x285),environment=require('./'+bbpath2+_0x4d28bd(0x1d8))[_0x4d28bd(0x29f)]||_0x4d28bd(0x22c),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x4d28bd(0x1f0)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4d28bd(0x18a));let configpath=userID?bbpath+_0x4d28bd(0x1b7)+userID+'/':bbpath+_0x4d28bd(0x1b7);const configbackuppath=configpath+_0x4d28bd(0xee),logspath=userID?bbpath+_0x4d28bd(0x2ae)+userID+'/':bbpath+_0x4d28bd(0x2ae),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x4d28bd(0x172),loggerfile=fs[_0x4d28bd(0x14d)](logspath+_0x4d28bd(0x1c5),{'flags':'a'}),temppath=userID?bbpath+_0x4d28bd(0x29b)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs['mkdirSync'](configpath);!fs[_0x4d28bd(0x1f0)](configbackuppath)&&fs[_0x4d28bd(0x150)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x4d28bd(0x1f0)](zippath)&&fs[_0x4d28bd(0x150)](zippath);!fs[_0x4d28bd(0x1f0)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4d28bd(0x14a)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4d28bd(0x133),'onepagemode':![],'marketcapApi':''}})[_0x4d28bd(0x20e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4d28bd(0x14a)]({'secure':{},'blacklist':[]})[_0x4d28bd(0x20e)]();const saltRounds=0xa,mixpanel=Mixpanel[_0x4d28bd(0x1a6)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x4d28bd(0x2b6)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x4d28bd(0x1ed)]&&(settings[_0x4d28bd(0x1ed)]!=''&&settings['telegramToken']!=_0x4d28bd(0x2b7))&&settings[_0x4d28bd(0x148)]&&settings[_0x4d28bd(0x148)]!='')initTelegram();const parseColor=(_0x581973,_0xef4050)=>{const _0x2aa832=_0x4d28bd,_0x4d8017=/#[A-Z]{3}#/g;if(typeof _0x581973==_0x2aa832(0xe5)){!_0xef4050?_0x581973=_0x581973[_0x2aa832(0x21c)](_0x4d8017,''):(_0x581973=_0x581973[_0x2aa832(0x21c)](/#BLU#/g,_0x2aa832(0xf9)),_0x581973=_0x581973[_0x2aa832(0x21c)](/#RED#/g,_0x2aa832(0x1f7)),_0x581973=_0x581973[_0x2aa832(0x21c)](/#YEL#/g,_0x2aa832(0x1fa)),_0x581973=_0x581973['replace'](/#MAG#/g,'\x1b[35m'),_0x581973=_0x581973[_0x2aa832(0x21c)](/#CYA#/g,_0x2aa832(0x17b)),_0x581973=_0x581973['replace'](/#RES#/g,'\x1b[0m'));;}return _0x581973;},logger={'screen':_0x1d5942=>{const _0x145496=_0x4d28bd;console[_0x145496(0x106)](parseColor(_0x1d5942,!![]));},'simple':_0x17c6d9=>{const _0x4d185f=_0x4d28bd;console[_0x4d185f(0x106)](parseColor(_0x17c6d9,!![])),loggerfile[_0x4d185f(0x20e)](util['format'](parseColor(_0x17c6d9,![]))+'\x0a');},'full':async _0x117cc1=>{const _0x42e07e=_0x4d28bd,_0x305647=getTimeStamp()+_0x42e07e(0x1c8)+_0x117cc1;console[_0x42e07e(0x106)](parseColor(_0x305647,!![])),loggerfile['write'](util[_0x42e07e(0x1b3)](parseColor(_0x305647,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x42e07e(0x1b8)]!=_0x42e07e(0x16d))await sendTelegram(settings['telegramChatId'],_0x42e07e(0x10b)+parseColor(_0x117cc1,![]));},'debug':async(_0x13ab79,_0x3735a3='')=>{const _0x176505=_0x4d28bd,_0x36d0e8=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x13ab79;if(debugging)console['log'](parseColor(_0x36d0e8,!![]));loggerfile[_0x176505(0x20e)](util[_0x176505(0x1b3)](parseColor(_0x36d0e8,![]))+'\x0a');if(_0x3735a3){if(debugging)console[_0x176505(0x106)](_0x3735a3);loggerfile['write'](util[_0x176505(0x1b3)](_0x3735a3)+'\x0a');}}};let terminating=![];process['on'](_0x4d28bd(0xf1),function(_0x556851){const _0x4becdc=_0x4d28bd;_0x556851[_0x4becdc(0x180)]()['includes'](_0x4becdc(0x1c2))?(logger[_0x4becdc(0x170)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x556851[_0x4becdc(0x1a0)]+_0x4becdc(0x2b2)),process['send']({'terminate':!![]},_0xa9809e=>{})):logger[_0x4becdc(0x170)](_0x556851);}),process['on'](_0x4d28bd(0x298),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x4d28bd(0x213),()=>{const _0x26771c=_0x4d28bd;stopAllBots(),process[_0x26771c(0x298)](0x0);}),process['on'](_0x4d28bd(0x295),()=>{const _0xc3497e=_0x4d28bd;stopAllBots(),process[_0xc3497e(0x298)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4d28bd(0x1d8))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x4d28bd(0x1d2)),app=express(),http=require(_0x4d28bd(0x162))[_0x4d28bd(0x14c)](app);app[_0x4d28bd(0x2be)](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x1df1cd,_0x279613)=>{const _0x588ff8=_0x4d28bd,_0x369aff=_0x1df1cd['params'][_0x588ff8(0x2ca)],_0xa991e7=getClientsWithBotID('botmanager'),_0x5cf2bc=_0x1df1cd[_0x588ff8(0x1d1)][_0x588ff8(0x16b)],_0x7bb65d=timelyDecrypt(_0x5cf2bc,![]),_0xdab20=_0xa991e7[_0x588ff8(0x245)](_0x6852a5=>_0x6852a5[_0x588ff8(0x16b)]==_0x7bb65d);if(_0xdab20){const _0x2c4d26=normalizeIP(_0x1df1cd[_0x588ff8(0x21b)][_0x588ff8(0x12c)])['store'],_0x20e248=_0x1df1cd[_0x588ff8(0x1d1)][_0x588ff8(0x2b3)];if(validateAccess(_0x20e248,_0x7bb65d,_0x2c4d26)[_0x588ff8(0xe7)])_0x369aff==_0x588ff8(0x232)&&await backupConfigFiles(),await zipFiles(_0x369aff),_0x279613[_0x588ff8(0x19b)](zippath+(_0x369aff+_0x588ff8(0x27e)),_0x5346db=>{const _0x3a055f=_0x588ff8;_0x5346db&&(logger[_0x3a055f(0x160)]('Failed\x20to\x20download\x20'+_0x369aff),logger['simple'](_0x5346db));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x369aff+'\x20(1)');}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x369aff+_0x588ff8(0x2a6));}),app[_0x4d28bd(0x21f)](_0x4d28bd(0x12b),async(_0x2efc31,_0xff1c4)=>{const _0x1604a6=_0x4d28bd,_0x5021a6=getClientsWithBotID(_0x1604a6(0x103)),_0x557add=_0x2efc31[_0x1604a6(0x1d1)][_0x1604a6(0x16b)],_0x376841=timelyDecrypt(_0x557add,![]),_0x2fac45=_0x5021a6[_0x1604a6(0x245)](_0x1212e3=>_0x1212e3[_0x1604a6(0x16b)]==_0x376841);logger[_0x1604a6(0x1ec)](_0x1604a6(0x17e));if(_0x2fac45){const _0x159237=normalizeIP(_0x2efc31['socket'][_0x1604a6(0x12c)])[_0x1604a6(0x122)],_0x517fa2=_0x2efc31[_0x1604a6(0x1d1)]['tkn'];if(validateAccess(_0x517fa2,_0x376841,_0x159237)[_0x1604a6(0xe7)]){if(_0x2efc31[_0x1604a6(0x27f)]){const _0x3282a8=_0x2efc31[_0x1604a6(0x27f)][_0x1604a6(0xd1)];await _0x3282a8['mv'](temppath+_0x3282a8['name']),_0xff1c4['send']({'status':!![],'message':_0x1604a6(0x277)});const _0x277627=getBotsWithMode();_0x277627[_0x1604a6(0x132)]>0x0?confirmRestore(temppath,_0x3282a8[_0x1604a6(0x289)]):unzipFile(temppath,_0x3282a8[_0x1604a6(0x289)]);}}else logger[_0x1604a6(0x160)](_0x1604a6(0x167));}else logger['full'](_0x1604a6(0xf8));}),app[_0x4d28bd(0x2be)](express['static'](path['join'](__dirname,bbpath2,_0x4d28bd(0x17a)))),app[_0x4d28bd(0x2be)](express['static'](path[_0x4d28bd(0x1be)](__dirname,bbpath2,_0x4d28bd(0x25b)))),app['get']('/',function(_0x542250,_0x2e25e1){const _0x582a3a=_0x4d28bd;_0x2e25e1[_0x582a3a(0x145)](path[_0x582a3a(0x1be)](__dirname,bbpath2,_0x582a3a(0x17a),_0x582a3a(0x23b)));}),app[_0x4d28bd(0x12d)](_0x4d28bd(0x22a),function(_0x9914b,_0x203bff){const _0xecec01=_0x4d28bd;_0x203bff[_0xecec01(0x145)](path[_0xecec01(0x1be)](__dirname,bbpath2,_0xecec01(0x25b),_0xecec01(0x23b)));}),app[_0x4d28bd(0x12d)]('/:bot/portfolio',(_0x140d54,_0x45ae17)=>{const _0xa42ae=_0x4d28bd;_0x45ae17['sendFile'](path[_0xa42ae(0x1be)](__dirname,bbpath2,_0xa42ae(0x25b),_0xa42ae(0x23b)));}),app['get'](_0x4d28bd(0x2dc),(_0x1e874b,_0x2e340f)=>{const _0x469131=_0x4d28bd;_0x2e340f[_0x469131(0x145)](path[_0x469131(0x1be)](__dirname,bbpath2,'build',_0x469131(0x23b)));}),app[_0x4d28bd(0x12d)]('/:bot/coins',(_0x30cfd5,_0x5b3050)=>{const _0x1c8778=_0x4d28bd;_0x5b3050[_0x1c8778(0x145)](path[_0x1c8778(0x1be)](__dirname,bbpath2,'build',_0x1c8778(0x23b)));}),app['get'](_0x4d28bd(0x2d2),(_0x59c36f,_0x45af96)=>{const _0x45164e=_0x4d28bd;_0x45af96[_0x45164e(0x145)](path['join'](__dirname,bbpath2,_0x45164e(0x25b),_0x45164e(0x23b)));}),app['get']('/:bot/configuration',(_0x5280bb,_0x599338)=>{const _0x118c6e=_0x4d28bd;_0x599338['sendFile'](path['join'](__dirname,bbpath2,_0x118c6e(0x25b),_0x118c6e(0x23b)));}),app[_0x4d28bd(0x12d)](_0x4d28bd(0x1ee),(_0x3a4946,_0x1a25fb)=>{const _0x492aaf=_0x4d28bd;_0x1a25fb[_0x492aaf(0x145)](path[_0x492aaf(0x1be)](__dirname,bbpath2,_0x492aaf(0x25b),_0x492aaf(0x23b)));});if(HOST)http['listen'](PORT,HOST);else http[_0x4d28bd(0x1e5)](PORT);const io=require(_0x4d28bd(0x157))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x174a65=_0x4d28bd;let _0x43ebe8=_0x174a65(0x262);const _0x4b74eb=networkInterfaces(),_0x1e33c4={};for(const _0x3cd15a of Object['keys'](_0x4b74eb)){for(const _0x1fa43f of _0x4b74eb[_0x3cd15a]){if((_0x1fa43f[_0x174a65(0x2cf)]==_0x174a65(0x24a)||_0x1fa43f[_0x174a65(0x2cf)]==0x4)&&!_0x1fa43f[_0x174a65(0x217)]){const _0x585d50=ipaddr[_0x174a65(0x196)](_0x1fa43f[_0x174a65(0x297)])[_0x174a65(0x25d)]();_0x585d50!='private'&&(!_0x1e33c4[_0x3cd15a]&&(_0x1e33c4[_0x3cd15a]=[]),_0x1e33c4[_0x3cd15a][_0x174a65(0x2b4)](_0x1fa43f['address']),_0x43ebe8=_0x1fa43f[_0x174a65(0x297)]);}}}return{'serverip':_0x43ebe8,'netinterfaces':_0x1e33c4};}async function startServer(){const _0x1607d8=_0x4d28bd,{serverip:_0x1d8821,netinterfaces:_0x514a95}=getServerIP();logger[_0x1607d8(0x170)](''),logger[_0x1607d8(0x170)](_0x1607d8(0x20a)),await logger[_0x1607d8(0x160)](_0x1607d8(0x25a)+serverversion+_0x1607d8(0x1c1)+(environment=='staging'?_0x1607d8(0x1b9):'')+'\x0a'+(_0x1607d8(0x193)+PORT+_0x1607d8(0x15c))+('=>\x20Go\x20to\x20#CYA#http://'+_0x1d8821+':'+PORT+_0x1607d8(0x2a8))),logger[_0x1607d8(0x170)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x177740 of config){const _0x30c11d=_0x177740[_0x1607d8(0x2c0)]==_0x1607d8(0xdc)?'a':'m';if(_0x177740[_0x1607d8(0x216)]=='enabled'||_0x177740['status']==_0x1607d8(0x104))await logger['full']('Starting\x20('+_0x30c11d+_0x1607d8(0x254)+_0x177740[_0x1607d8(0x15d)]+_0x1607d8(0x2b8)+_0x177740[_0x1607d8(0x17d)]),startBot([_0x177740[_0x1607d8(0x15d)],userID],{'cwd':bbpath},function(_0x502ffe){const _0x28cb77=_0x1607d8;if(_0x502ffe)logger[_0x28cb77(0x160)](_0x502ffe);});else(_0x177740[_0x1607d8(0x216)]==_0x1607d8(0x152)||_0x177740[_0x1607d8(0x216)]==_0x1607d8(0x2b5))&&await logger[_0x1607d8(0x160)](_0x1607d8(0x195)+_0x30c11d+_0x1607d8(0x149)+_0x177740[_0x1607d8(0x15d)]+'\x20|\x20'+_0x177740['botname']);}else!newBot&&logger[_0x1607d8(0x170)](_0x1607d8(0x276));if(newBot)addBot();logger[_0x1607d8(0x170)](_0x1607d8(0x20a)),logger[_0x1607d8(0x170)](''),await logger[_0x1607d8(0x1ec)]('Node.js\x20v'+nodeversion),await logger[_0x1607d8(0x1ec)](_0x1607d8(0x23c),_0x514a95);}function startSocket(){const _0x31c8f8=_0x4d28bd;io['on'](_0x31c8f8(0x2cc),_0x4fe1aa=>{const _0x14a321=_0x31c8f8;let _0x4a6a00,_0x3ac58f,_0x5b005b,_0x3bcb80,_0x179e9f;const _0x6b6bba=_0x4fe1aa[_0x14a321(0x121)][_0x14a321(0x1d1)][_0x14a321(0x24e)];_0x3ac58f=_0x6b6bba[_0x14a321(0x1cc)](/bot[0-9]{3}/);if(_0x3ac58f)_0x5b005b=_0x3ac58f[0x0][_0x14a321(0x1cc)](/[0-9]{3}/);if(_0x5b005b)_0x4a6a00=_0x5b005b[0x0];else _0x4a6a00=_0x14a321(0x103);const _0x1440ef=_0x4fe1aa['handshake'][_0x14a321(0x1b5)]['encryptedUuid'];if(!_0x1440ef)_0x4fe1aa['emit'](_0x14a321(0x216),{'publicKey':secure[_0x14a321(0x2c4)]});else{_0x3bcb80=timelyDecrypt(_0x1440ef,![]);if(!_0x3bcb80)_0x4fe1aa['emit'](_0x14a321(0x216),{'publicKey':secure[_0x14a321(0x2c4)]});else{_0x179e9f=normalizeIP(_0x4fe1aa['conn'][_0x14a321(0x12c)])[_0x14a321(0x122)];if(!devices[_0x3bcb80])devices[_0x3bcb80]={'uuid':_0x3bcb80,'access':{'token':null}};devices[_0x3bcb80]['ip']=_0x179e9f;const _0x214696=addClient(_0x4fe1aa['id'],_0x3bcb80,_0x4a6a00);setAccess(_0x214696),emitMessages(),_0x4fe1aa['on'](_0x14a321(0x249),_0x4948ad=>{const _0x4206a7=_0x14a321,_0x5af6f1=timelyDecrypt(_0x4948ad[_0x4206a7(0x1e9)],!![],_0x4206a7(0x211));if(_0x5af6f1){_0x4948ad={'username':_0x4948ad[_0x4206a7(0x220)],'password':_0x5af6f1},devices[_0x3bcb80][_0x4206a7(0x1e6)]=validateCredentials(_0x4948ad,_0x3bcb80);if(devices[_0x3bcb80][_0x4206a7(0x1e6)][_0x4206a7(0xe7)]==![]&&devices[_0x3bcb80][_0x4206a7(0x1e6)][_0x4206a7(0x113)]=='2FA\x20login\x20required')_0x4fe1aa[_0x4206a7(0x1bb)](_0x4206a7(0x216),{'access':devices[_0x3bcb80][_0x4206a7(0x1e6)]}),loginAccess2FA(_0x3bcb80,_0x179e9f);else{if(devices[_0x3bcb80][_0x4206a7(0x1e6)]['allow']==![]&&devices[_0x3bcb80]['access'][_0x4206a7(0x113)]==_0x4206a7(0x1da))_0x4fe1aa[_0x4206a7(0x1bb)]('status',{'access':devices[_0x3bcb80]['access']});else devices[_0x3bcb80][_0x4206a7(0x1e6)][_0x4206a7(0xe7)]&&devices[_0x3bcb80][_0x4206a7(0x1e6)][_0x4206a7(0x113)]==_0x4206a7(0x27d)&&(getClientsWithUuid(_0x3bcb80)['forEach'](_0x16f600=>{setAccess(_0x16f600);}),logger[_0x4206a7(0x1ec)](_0x4206a7(0x1f3)+_0x3bcb80[_0x4206a7(0x1a2)](-0x8)),setTokenRefresh(_0x3bcb80),setSessionTimeout(_0x4206a7(0x249),_0x3bcb80));}}else logger['full'](_0x4206a7(0x16e));}),_0x4fe1aa['on'](_0x14a321(0x192),()=>{resetPassword();}),_0x4fe1aa['on'](_0x14a321(0x16f),_0xb01589=>{removeClient(_0x4fe1aa['id']);}),_0x4a6a00==_0x14a321(0x103)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1edafb){const _0x560806=_0x4d28bd;if(_0x1edafb!=_0x560806(0x103)&&config[_0x560806(0x1d4)]!=''){if(pid[_0x1edafb])pid[_0x1edafb][_0x560806(0x186)]({'function':_0x560806(0xff),'args':null});}_0x1edafb!='botmanager'&&broadcastToBots(_0x560806(0x2df),JSON[_0x560806(0x1d6)](config));}function reloadBotManager(){const _0x3a6ccc=_0x4d28bd;getClientsWithBotID('botmanager')[_0x3a6ccc(0x246)](_0x44bfc7=>{const _0x32aa7b=_0x3a6ccc;getSocket(_0x44bfc7['id'])[_0x32aa7b(0x1bb)](_0x32aa7b(0x216),{'access':{'allow':![],'reason':_0x32aa7b(0x265),'token':null}});});}function getSocket(_0xac35cb){const _0x82338d=_0x4d28bd,_0x6d80a3=io[_0x82338d(0x107)][_0x82338d(0x12d)]('/');return _0x6d80a3[_0x82338d(0x24d)][_0x82338d(0x12d)](_0xac35cb);}function setAccess(_0x2a0414){const _0x47f2a9=_0x4d28bd,_0x32f00d=getSocket(_0x2a0414['id']),_0x508ed7=_0x2a0414[_0x47f2a9(0x16b)],_0x3f5ee1=_0x2a0414[_0x47f2a9(0x228)];devices[_0x508ed7][_0x47f2a9(0x1e6)]=validateAccess(devices[_0x508ed7][_0x47f2a9(0x1e6)][_0x47f2a9(0x267)],_0x508ed7),logger['debug'](_0x47f2a9(0x23f)+devices[_0x508ed7]['access'][_0x47f2a9(0x113)]+'\x20|\x20client:\x20...'+_0x2a0414['id'][_0x47f2a9(0x1a2)](-0x8)+_0x47f2a9(0x187)+_0x508ed7[_0x47f2a9(0x1a2)](-0x8)),_0x32f00d[_0x47f2a9(0x1be)](_0x508ed7);if(devices[_0x508ed7]['access'][_0x47f2a9(0xe7)]){_0x32f00d[_0x47f2a9(0x1be)](_0x3f5ee1);if(_0x3f5ee1=='botmanager')initializeSocketBotManager(_0x32f00d);else initializeSocketBot(_0x32f00d);initClient(_0x3f5ee1);}devices[_0x508ed7][_0x47f2a9(0x1e6)][_0x47f2a9(0x267)]&&devices[_0x508ed7][_0x47f2a9(0x1e6)]['reason']==_0x47f2a9(0x12e)&&setSessionTimeout('2FA',_0x508ed7),devices[_0x508ed7][_0x47f2a9(0x1e6)][_0x47f2a9(0x267)]&&devices[_0x508ed7]['access']['reason']==_0x47f2a9(0x17f)&&setSessionTimeout(_0x47f2a9(0x249),_0x508ed7),_0x32f00d['emit']('status',{'status':_0x2a0414[_0x47f2a9(0x2a0)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x508ed7][_0x47f2a9(0x1e6)],'externalip':devices[_0x508ed7]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x47f2a9(0x181)],'validInstallation':validInstallation}),devices[_0x508ed7][_0x47f2a9(0x1e6)][_0x47f2a9(0xe7)]==![]&&devices[_0x508ed7][_0x47f2a9(0x1e6)][_0x47f2a9(0x113)]==_0x47f2a9(0x239)&&temporaryAccess2FA(_0x508ed7,devices[_0x508ed7]['ip']);}function setSessionTimeout(_0xac8b13,_0x52c2b4){const _0x409cfd=_0x4d28bd;let _0x6f15a6;if(_0xac8b13==_0x409cfd(0x249))_0x6f15a6=loginExpiry*0x3c*0x3e8;else _0x6f15a6=devices[_0x52c2b4][_0x409cfd(0x173)][_0x409cfd(0x1b2)]*0x3c*0x3e8-(new Date()[_0x409cfd(0x291)]()-devices[_0x52c2b4]['telegramIpApproval'][_0x409cfd(0x182)]);if(devices[_0x52c2b4][_0x409cfd(0x24c)])clearTimeout(devices[_0x52c2b4][_0x409cfd(0x24c)]);devices[_0x52c2b4][_0x409cfd(0x24c)]=setTimeout(()=>{const _0x20f771=_0x409cfd;if(devices[_0x52c2b4][_0x20f771(0x20f)])clearTimeout(devices[_0x52c2b4]['pidRefreshToken']);removeSocketListeners(_0x52c2b4),addBlacklist(_0x52c2b4),devices[_0x52c2b4]['telegramIpApproval']=null,devices[_0x52c2b4][_0x20f771(0x278)]=null,devices[_0x52c2b4]['access'][_0x20f771(0x267)]=null,logger[_0x20f771(0x1ec)](_0x20f771(0x1ef)+_0x52c2b4['slice'](-0x8)),devices[_0x52c2b4][_0x20f771(0x1e6)]=validateAccess(devices[_0x52c2b4][_0x20f771(0x1e6)]['token'],_0x52c2b4),!(devices[_0x52c2b4][_0x20f771(0x1e6)][_0x20f771(0xe7)]&&devices[_0x52c2b4]['access'][_0x20f771(0x113)]==_0x20f771(0x203))&&(_0xac8b13==_0x20f771(0x249)?io['to'](_0x52c2b4)[_0x20f771(0x1bb)](_0x20f771(0x216),{'access':{'allow':![],'reason':_0x20f771(0x261),'token':null}}):io['to'](_0x52c2b4)[_0x20f771(0x1bb)]('status',{'access':{'allow':![],'reason':_0x20f771(0x286),'token':null}})),devices[_0x52c2b4][_0x20f771(0x1e6)]['token']=null;},_0x6f15a6);}function setTokenRefresh(_0x349a0d){const _0x489966=_0x4d28bd;if(devices[_0x349a0d]['pidRefreshToken'])clearTimeout(devices[_0x349a0d][_0x489966(0x20f)]);devices[_0x349a0d][_0x489966(0x20f)]=setTimeout(()=>{const _0x382384=_0x489966;getClientsWithUuid(_0x349a0d)[_0x382384(0x132)]!=0x0?(devices[_0x349a0d][_0x382384(0x1e6)]=refreshToken(_0x349a0d),io['to'](_0x349a0d)[_0x382384(0x1bb)](_0x382384(0x216),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x349a0d][_0x382384(0x1e6)],'externalip':devices[_0x349a0d]['ip'],'publicKey':secure[_0x382384(0x2c4)],'validInstallation':validInstallation}),setTokenRefresh(_0x349a0d)):clearTimeout(devices[_0x349a0d][_0x382384(0x20f)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x25d8ed){const _0x41582e=_0x4d28bd,_0x398e12=getClient(_0x25d8ed['id'])[_0x41582e(0x16b)];_0x25d8ed[_0x41582e(0x1bb)]('bots',config),_0x25d8ed[_0x41582e(0x1bb)](_0x41582e(0xd7),cleanSettings()),_0x25d8ed['on'](_0x41582e(0x253),_0x1ef966=>{const _0x46ea10=_0x41582e;if(validateAccess(_0x1ef966,_0x398e12)[_0x46ea10(0xe7)])addBot();else logger[_0x46ea10(0x160)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x25d8ed['on'](_0x41582e(0x2dd),(_0x1cc55b,_0x331ae1)=>{const _0x33fada=_0x41582e;if(validateAccess(_0x331ae1,_0x398e12)['allow'])toggleBot(_0x1cc55b[_0x33fada(0x15d)],_0x1cc55b['status'],_0x1cc55b['live']);else logger[_0x33fada(0x160)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x25d8ed['on'](_0x41582e(0x194),(_0x4ed3e1,_0x268acc)=>{const _0x558284=_0x41582e;if(validateAccess(_0x268acc,_0x398e12)[_0x558284(0xe7)])toggleBotMode(_0x4ed3e1);else logger[_0x558284(0x160)](_0x558284(0x164));}),_0x25d8ed['on']('delete-bot',(_0x5dd862,_0x367fbe)=>{const _0x14d8a2=_0x41582e;if(validateAccess(_0x367fbe,_0x398e12)[_0x14d8a2(0xe7)])deleteBot(_0x5dd862);else logger['full'](_0x14d8a2(0xea));}),_0x25d8ed['on'](_0x41582e(0x25c),(_0x343ea1,_0x2f28fa)=>{const _0x59731c=_0x41582e;if(validateAccess(_0x2f28fa,_0x398e12)[_0x59731c(0xe7)])storeSettings(_0x343ea1,!![]);else logger[_0x59731c(0x160)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x25d8ed['on'](_0x41582e(0x281),_0x35b575=>{const _0x413406=_0x41582e;if(validateAccess(_0x35b575,_0x398e12)['allow'])updateBB('update');else logger['full'](_0x413406(0xde));}),_0x25d8ed['on'](_0x41582e(0x125),_0x4a6055=>{const _0x1bd5dc=_0x41582e;if(validateAccess(_0x4a6055,_0x398e12)['allow'])updateBB(_0x1bd5dc(0x177));else logger[_0x1bd5dc(0x160)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x25d8ed['on'](_0x41582e(0xd0),_0x42d53f=>{const _0xb957a3=_0x41582e;if(validateAccess(_0x42d53f,_0x398e12)['allow']){const _0x400048=getClient(_0x25d8ed['id']);if(_0x400048)getBackupFiles(_0x400048['uuid']);else logger[_0xb957a3(0x160)](_0xb957a3(0x230));}else logger['full'](_0xb957a3(0x1e7));}),_0x25d8ed['on'](_0x41582e(0x29d),(_0x48f106,_0x154996)=>{const _0x93a25d=_0x41582e;if(validateAccess(_0x154996,_0x398e12)[_0x93a25d(0xe7)])restoreBackupFile(_0x48f106);else logger[_0x93a25d(0x160)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x25d8ed['on'](_0x41582e(0xd5),_0x2754ba=>{const _0x4a4abe=_0x41582e;if(validateAccess(_0x2754ba,_0x398e12)[_0x4a4abe(0xe7)])getMessages();else logger[_0x4a4abe(0x160)](_0x4a4abe(0x259));}),_0x25d8ed['on'](_0x41582e(0xfb),(_0x382f5e,_0x50024f)=>{const _0x9b42d0=_0x41582e;if(validateAccess(_0x50024f,_0x398e12)['allow'])confirmMessage(_0x382f5e);else logger[_0x9b42d0(0x160)](_0x9b42d0(0xfe));}),_0x25d8ed['on'](_0x41582e(0x199),_0x3237da=>{const _0x56e91c=_0x41582e;if(validateAccess(_0x3237da,_0x398e12)[_0x56e91c(0xe7)]){if(devices[_0x398e12][_0x56e91c(0x20f)])clearTimeout(devices[_0x398e12][_0x56e91c(0x20f)]);if(devices[_0x398e12][_0x56e91c(0x24c)])clearTimeout(devices[_0x398e12][_0x56e91c(0x24c)]);removeSocketListeners(getClient(_0x25d8ed['id'])[_0x56e91c(0x16b)]),addBlacklist(_0x398e12),devices[_0x398e12][_0x56e91c(0x173)]=null,devices[_0x398e12]['telegram2FaApproval']=null,devices[_0x398e12][_0x56e91c(0x1e6)]['token']=null,logger[_0x56e91c(0x1ec)]('Logged\x20out\x20user\x20...'+_0x398e12['slice'](-0x8)),io['to'](getClient(_0x25d8ed['id'])[_0x56e91c(0x16b)])[_0x56e91c(0x1bb)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x56e91c(0x161));});}function initializeSocketBot(_0x3da2fe){const _0x1dec49=_0x4d28bd,_0x425d13=getClient(_0x3da2fe['id'])[_0x1dec49(0x228)],_0x559bfc=getClient(_0x3da2fe['id'])[_0x1dec49(0x16b)];_0x3da2fe['on'](_0x1dec49(0x26f),(_0x327234,_0x4ac286)=>{const _0x124e3f=_0x1dec49;if(validateAccess(_0x4ac286,_0x559bfc)['allow']){if(pid[_0x425d13])pid[_0x425d13][_0x124e3f(0x186)]({'function':_0x124e3f(0x2d1),'args':_0x327234});}else logger['full'](_0x124e3f(0xeb));}),_0x3da2fe['on']('delete-alerts',(_0x255b09,_0x47950f)=>{const _0x5ea0aa=_0x1dec49;if(validateAccess(_0x47950f,_0x559bfc)[_0x5ea0aa(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x5ea0aa(0x186)]({'function':_0x5ea0aa(0x147),'args':_0x255b09});}else logger[_0x5ea0aa(0x160)](_0x5ea0aa(0x1f8));}),_0x3da2fe['on'](_0x1dec49(0x14b),(_0x25bec3,_0x2d9907)=>{const _0x49f421=_0x1dec49;if(validateAccess(_0x2d9907,_0x559bfc)[_0x49f421(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x49f421(0x186)]({'function':_0x49f421(0x27c),'args':_0x25bec3});}else logger['full'](_0x49f421(0x209));}),_0x3da2fe['on']('store-configuration',(_0x4154e5,_0x5253df)=>{const _0x30ee4b=_0x1dec49;if(validateAccess(_0x5253df,_0x559bfc)[_0x30ee4b(0xe7)]){if(pid[_0x425d13])pid[_0x425d13]['send']({'function':_0x30ee4b(0x208),'args':_0x4154e5});}else logger['full'](_0x30ee4b(0x19f));}),_0x3da2fe['on'](_0x1dec49(0x11f),(_0x5cafeb,_0x110d2b)=>{const _0x5c8896=_0x1dec49;if(validateAccess(_0x110d2b,_0x559bfc)[_0x5c8896(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x5c8896(0x186)]({'function':'storeHeadless','args':_0x5cafeb});}else logger[_0x5c8896(0x160)](_0x5c8896(0xfd));}),_0x3da2fe['on'](_0x1dec49(0x1cd),(_0x5a250,_0x38daf2)=>{const _0x49daba=_0x1dec49;if(validateAccess(_0x38daf2,_0x559bfc)['allow']){if(pid[_0x425d13])pid[_0x425d13][_0x49daba(0x186)]({'function':_0x49daba(0x1a1),'args':_0x5a250});}else logger[_0x49daba(0x160)](_0x49daba(0x10a));}),_0x3da2fe['on'](_0x1dec49(0x134),_0x1bc892=>{const _0x2c9cf5=_0x1dec49;if(validateAccess(_0x1bc892,_0x559bfc)[_0x2c9cf5(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x2c9cf5(0x186)]({'function':_0x2c9cf5(0x163),'args':null});}else logger['full'](_0x2c9cf5(0x166));}),_0x3da2fe['on']('get-starting-balances',_0x4a0aff=>{const _0x36ae0b=_0x1dec49;if(validateAccess(_0x4a0aff,_0x559bfc)[_0x36ae0b(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x36ae0b(0x186)]({'function':'getStartingBalances','args':null});}else logger[_0x36ae0b(0x160)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3da2fe['on'](_0x1dec49(0x109),(_0x1edc26,_0x53c9e2)=>{const _0x4b3684=_0x1dec49;if(validateAccess(_0x53c9e2,_0x559bfc)['allow']){if(pid[_0x425d13])pid[_0x425d13][_0x4b3684(0x186)]({'function':_0x4b3684(0xe1),'args':_0x1edc26});}else logger[_0x4b3684(0x160)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x3da2fe['on'](_0x1dec49(0x24f),_0x3169d2=>{const _0x27e5f7=_0x1dec49;if(validateAccess(_0x3169d2,_0x559bfc)[_0x27e5f7(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x27e5f7(0x186)]({'function':'cancelLoading','args':null});}else logger[_0x27e5f7(0x160)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3da2fe['on']('show-config',_0x52f3d8=>{const _0x4b01df=_0x1dec49;if(validateAccess(_0x52f3d8,_0x559bfc)[_0x4b01df(0xe7)]){if(pid[_0x425d13])pid[_0x425d13][_0x4b01df(0x186)]({'function':_0x4b01df(0x214),'args':null});}else logger[_0x4b01df(0x160)](_0x4b01df(0x2d7));}),_0x3da2fe['on'](_0x1dec49(0x281),_0x16cc10=>{const _0x5a7ae9=_0x1dec49;if(validateAccess(_0x16cc10,_0x559bfc)[_0x5a7ae9(0xe7)])updateBB(_0x5a7ae9(0x175));else logger[_0x5a7ae9(0x160)](_0x5a7ae9(0xde));}),_0x3da2fe['on'](_0x1dec49(0xd5),_0x114594=>{const _0x30d3dd=_0x1dec49;if(validateAccess(_0x114594,_0x559bfc)[_0x30d3dd(0xe7)])getMessages();else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x3da2fe['on'](_0x1dec49(0xfb),(_0x19bb05,_0x525e18)=>{const _0x183dce=_0x1dec49;if(validateAccess(_0x525e18,_0x559bfc)[_0x183dce(0xe7)])confirmMessage(_0x19bb05);else logger[_0x183dce(0x160)](_0x183dce(0xfe));}),_0x3da2fe['on'](_0x1dec49(0x199),_0x460978=>{const _0x411225=_0x1dec49;if(validateAccess(_0x460978,_0x559bfc)[_0x411225(0xe7)]){if(devices[_0x559bfc][_0x411225(0x20f)])clearTimeout(devices[_0x559bfc][_0x411225(0x20f)]);if(devices[_0x559bfc]['pidExpireLogin'])clearTimeout(devices[_0x559bfc]['pidExpireLogin']);removeSocketListeners(getClient(_0x3da2fe['id'])[_0x411225(0x16b)]),addBlacklist(_0x559bfc),devices[_0x559bfc][_0x411225(0x173)]=null,devices[_0x559bfc]['telegram2FaApproval']=null,devices[_0x559bfc]['access'][_0x411225(0x267)]=null,logger[_0x411225(0x1ec)](_0x411225(0x2e4)+_0x559bfc[_0x411225(0x1a2)](-0x8)),io['to'](getClient(_0x3da2fe['id'])['uuid'])['emit'](_0x411225(0x216),{'access':{'allow':![],'reason':_0x411225(0x1b1),'token':null}});}else logger[_0x411225(0x160)](_0x411225(0x161));});}function removeSocketListeners(_0x4cc781){getClientsWithUuid(_0x4cc781)['forEach'](_0x3d38c3=>{const _0x2a1d92=_0x4b42;getSocket(_0x3d38c3['id'])[_0x2a1d92(0x128)]();});}function cleanSettings(){const _0x14c92d=_0x4d28bd;let _0x3e6383=settings;return settings[_0x14c92d(0x1ed)]&&settings['telegramToken']!=''&&(_0x3e6383={..._0x3e6383,'telegramToken':_0x14c92d(0x215)}),settings[_0x14c92d(0x2d8)]&&settings['bbPassword']!=''&&(_0x3e6383={..._0x3e6383,'bbPassword':'************'}),settings[_0x14c92d(0x221)]&&settings[_0x14c92d(0x221)]!=''&&(_0x3e6383={..._0x3e6383,'marketcapApi':_0x14c92d(0x215)}),(settings[_0x14c92d(0x2d8)]&&settings[_0x14c92d(0x2d8)]==_0x14c92d(0x2b7)||settings['telegramToken']&&settings[_0x14c92d(0x1ed)]=='***'||settings[_0x14c92d(0x221)]&&settings['marketcapApi']==_0x14c92d(0x2b7))&&(_0x3e6383={..._0x3e6383,'restored':{'password':settings[_0x14c92d(0x2d8)]==_0x14c92d(0x2b7),'telegram':settings['telegramToken']==_0x14c92d(0x2b7),'marketcap':settings[_0x14c92d(0x221)]=='***'}}),_0x3e6383;}function _0x210e(){const _0x12cd39=['::1','padStart','User\x20has\x20been\x20validated','update_yes','sort','get-logs','stopped','off_','function',',\x20must\x20be\x20a\x204\x20digit\x20number','alerts','onepagemode','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','File\x20uploaded','telegram2FaApproval','event','rsa','Enabled\x20Bot\x20','getPortfolio','login\x20token\x20generated','.zip','files','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','update-bb','latestversion','127.0.0.1','showname','bb-secure.json','temporary\x20access\x20timeout','Token\x20blacklisted','config_all','name','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','(((.+)+)+)+$','verify','notification','lowdb','node-forge','close','getTime','\x20to\x20','CoinMarketCap\x20API\x20key\x20validated','Password\x20has\x20been\x20reset\x20to:\x20','SIGINT','any','address','exit','message','publicKeyToPem','temp/','Yes','restore-backup-file','whitelistEnabled','environment','server','ETH','bb-settings.json','All','loginRequired','title','\x20(2)','1528QjaJDD','#RES#\x20if\x20running\x20on\x20server','jsonwebtoken','exp','Backup\x20file\x20unzipped\x20and\x20stored','mixpanel','kill','logs/','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','reject','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','#RES#','tkn','push','new-disabled','api-eu.mixpanel.com','***','\x20|\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','output-001.log','Invalid\x20username\x20or\x20IP\x20address','secret','entries','use','<b>Balance\x20Bot\x20Status:</b>\x0a','mode','ipaddr.js','toIPv4MappedAddress','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','publicKey','on_','resetpw_yes','toggle','decrypt','tempaccess_reject_','type','binary','connection','bot.js','file','family','restore_yes_','emitHistory','/:bot/history','apiSecret','All\x20bots','Ok,\x20will\x20send\x20order\x20notifications\x20only','Restoring\x20bot(s)\x20from\x20backup','Unauthorized\x20attempt\x20to\x20show\x20configuration','bbPassword','toggleBotMode','node','30\x20min','/:bot/performance','update-bot','stop','bots','sendMessage','callback','restart_','constructor','Logged\x20out\x20user\x20...','get-backup-files','backupfile','logs','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','15\x20min','get-messages','create','settings','bbvNew','add','action','filter','auto','chat','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','login\x20token\x20valid','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','placeOrder','getHours','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','button','string','hex','allow','temporaryAccessAllowed','hashSync','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20get\x20events','2571576onBQtI','\x20mode','backup/','date-fns','Starting\x20Balance\x20Bot\x20update','uncaughtException','sign','live','launch','sendPortfolioTelegram','axios','enable','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','\x1b[34m','lastmsgtelegram','confirm-message','yargs/yargs','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20confirm\x20message','initclient','bb-config.json','disable','test','botmanager','new','Ok,\x20will\x20send\x20alert\x20notifications\x20only','log','_nsps','/help\x20-\x20show\x20available\x20commands\x0a','place-order','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Bot\x20Mgr\x20>\x20','rmSync','telegramEnabled','messages','getSeconds','Error\x20removing\x20old\x20backup\x20files:','bb/','running','reason','accept','value','No\x20authentication\x20token','metrics_','5\x20min','getMinutes','getDate','size','Allow\x20login\x20from\x20IP\x20address\x20','/on\x20-\x20start\x20bot(s)\x0a','headless','store-headless','started','handshake','store','DEFLATE','order','reinstall-bb','backup-files','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','removeAllListeners','search','editMessageReplyMarkup','/upload-backup','remoteAddress','get','temporary\x20token\x20generated','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','reply','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','length','0.0.0','reset-history','12PNIsXA','getFullYear','ipv6','Invalid\x20IP\x20address','You\x20can\x20use\x20the\x20following\x20commands:\x0a','portfolio_','exec','Notifications\x20disabled','config_orders','-events.json','data','sha256','51YClRLv','isIPv4MappedAddress','Notifications\x20disabled\x0a','sortBy','sendFile','endsWith','deleteHistoryAlerts','telegramUsername',')\x20\x20\x20|\x20Bot\x20','defaults','get-portfolio','createServer','createWriteStream','kind','Access\x20enabled\x20for\x20','mkdirSync','generateAsync','disabled','Orders','Telegraf\x20error:','number','once','socket.io','jszip','123874BoJjzT','updatebotmanager','697396oIIxMh','#RES#\x20if\x20running\x20locally\x0a','botID','Password\x20reset\x20rejected','from','full','Unauthorized\x20attempt\x20to\x20log\x20out','http','resetHistory','Unauthorized\x20attempt\x20to\x20update\x20bot','unlinkSync','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','manual','env','inherit','uuid','keys','orders','Unauthorized\x20login\x20attempt\x20(timeout)','disconnect','simple','/disable\x20-\x20disable\x20notifications\x0a','zip/','telegramIpApproval','Bot\x20','update','config_alerts','reinstall','Notifications\x20enabled\x0a','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','build2','\x1b[36m','telegram','botname','Backup\x20file\x20uploaded','2FA\x20login\x20token\x20generated','toString','userid','timestamp','lastmsgemitted','Notifications\x20types:\x20','randomFillSync','send','\x20|\x20user:\x20...','Error\x20while\x20deleting\x20config\x20files:\x20','reinstall_yes','clients','1000','telegrammsg','backup-full','min','Temporary\x20access\x20rejected','readFileSync','bbUsername','reset-password','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','toggle-bot-mode','Idling\x20(','parse','util','Restarting\x20Bot\x20','logout','randomBytes','download','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','host','Unauthorized\x20attempt\x20to\x20store\x20configuration','port','storeFiat','slice','7745672YxXKjn','No\x20bots\x20running\x20right\x20now','args','init','Starting\x20new\x20bot\x20|\x20Bot\x20','loadAsync','hasOwnProperty','secure','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','/enable\x20-\x20enable\x20notifications\x0a','reinstall_no','inlineKeyboard','show','ipc','logged\x20out','expiry','format','output-000.log','auth','getMonth','config/','telegramEvents','(staging)','login\x20required','emit','startsWith','readdirSync','join','tempaccess_30_','3000','#RES#\x20','address\x20already\x20in\x20use','Restore\x20process\x20confirmed','yes','/output-000.log','command','f2aRequired',':\x20Bot\x20Mgr\x20>\x20','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Notifications\x20enabled','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','match','store-fiat','writeFileSync','backup-full@','getUTCHours','headers','express','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','apiKey','\x20minutes','stringify','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','version.json','apiPassword','invalid\x20credentials','-config.json','telegramChatId','user','output-003.log','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','bot-','backup-full.zip','resetpw_no','fork','async','listen','access','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','cloneDeep','password','crypto','code','debug','telegramToken','/:bot/support','Session\x20expired\x20for\x20user\x20...','existsSync','child_process','apply','Logged\x20in\x20user\x20...','970835Wbhsmf','track','privateKey','\x1b[31m','Unauthorized\x20attempt\x20to\x20delete\x20alerts','versions','\x1b[33m','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','exchange','metrics','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','copyFileSync','sendMetricsTelegram','/start','toIPv4Address','login\x20not\x20required','help','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','compareSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','storeConfiguration','Unauthorized\x20attempt\x20to\x20get\x20portfolio','-----------------------------------------------------------------------------------','/off\x20-\x20stop\x20bot(s)\x0a','assign','Deleted\x20Bot\x20','write','pidRefreshToken','6010vXwCyZ','|@|','::ffff:127.0.0.1','SIGTERM','showConfig','************','status','internal','temporary\x20access\x20rejected','statSync','enabled','socket','replace','Restore\x20backup\x20file\x20','temporary\x20access\x20not\x20allowed','post','username','marketcapApi','27QZwnqh','blacklist','$1_$2_$3','output-002.log','pki','tempaccess_5_','bot','whitelist','/:bot','Starting\x20Balance\x20Bot\x20reinstallation','production','isDirectory','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','off','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','backup','status\x20code\x20401','names','telegraf','Restore\x20process\x20aborted','9869840caHiJx','<b>Telegram\x20Bot\x20Status:</b>\x0a','2FA\x20required','set','index.html','Network\x20Interfaces:','alias','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Setting\x20access:\x20','-performance.json','split','Disabled\x20Bot\x20','isValid','HTML','find','forEach','graphql-request','NTBA_FIX_319','login','IPv4','-results.json','pidExpireLogin','sockets','referer','cancel-loading','privateKeyFromPem','\x20-\x20','bcryptjs','add-bot',')\x20|\x20Bot\x20','all','remove','/restart\x20-\x20restart\x20bot(s)\x0a','Error\x20details:','Unauthorized\x20attempt\x20to\x20get\x20messages','Starting\x20#RED#Balance\x20Bot\x20v','build','store-settings','range','timeshift','restart','bbvReceive','access\x20timeout','[ip-address]','privateKeyToPem','lowdb/adapters/FileSync','reload','BCT','token','clientip','success'];_0x210e=function(){return _0x12cd39;};return _0x210e();}async function updateBB(_0x5795fa){const _0x3365bf=_0x4d28bd;await backupConfigFiles(),installingUpdate=!![],config[_0x3365bf(0x246)](_0x3ed7ad=>{const _0x12d028=_0x3365bf;restartBot(_0x3ed7ad[_0x12d028(0x15d)]);});if(_0x5795fa==_0x3365bf(0x175))process[_0x3365bf(0x186)]({'update':!![],'environment':environment},_0x347f03=>{});else _0x5795fa==_0x3365bf(0x177)&&process[_0x3365bf(0x186)]({'reinstall':!![],'environment':environment},_0x4b5078=>{});}function startBot(_0x2a9264,_0x2f3edc,_0x5d3c38){const _0x4621e3=_0x4d28bd;if(debugging)_0x2a9264[_0x4621e3(0x2b4)]('-d');let _0x349a58=![];const _0x34b527=_0x2a9264[0x0];_0x2f3edc={..._0x2f3edc,'stdio':['inherit',_0x4621e3(0x16a),'inherit',_0x4621e3(0x1b0)]},pid[_0x34b527]=childProcess[_0x4621e3(0x1e3)](botfile,_0x2a9264,_0x2f3edc),pid[_0x34b527]['on'](_0x4621e3(0x299),_0x4d4532=>{const _0xdb2b4e=_0x4621e3;switch(Object[_0xdb2b4e(0x16c)](_0x4d4532)[0x0]){case _0xdb2b4e(0x17d):updateBotName(_0x34b527,_0x4d4532[_0xdb2b4e(0x17d)]);break;case _0xdb2b4e(0x15a):updateBotManager();break;case _0xdb2b4e(0x216):updateStatus(_0x34b527,_0x4d4532[_0xdb2b4e(0x216)]);break;case'live':updateLive(_0x34b527,_0x4d4532[_0xdb2b4e(0xf3)]);break;case _0xdb2b4e(0x120):updateLive(_0x34b527,_0x4d4532['started']),io['to'](_0x34b527)['emit']('status',{'access':{'allow':![],'reason':_0xdb2b4e(0x265),'token':null}});break;case'stop':_0x4d4532['stop']==_0xdb2b4e(0x25f)&&restartBot(_0x34b527);_0x4d4532[_0xdb2b4e(0x2de)]==_0xdb2b4e(0x2ad)&&toggleBot(_0x34b527,_0xdb2b4e(0x152),_0xdb2b4e(0x270));break;case _0xdb2b4e(0x17c):sendTelegramBot(_0x34b527,_0x4d4532['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x4d4532[_0xdb2b4e(0x18c)]);break;case _0xdb2b4e(0x272):io['to'](_0x34b527)[_0xdb2b4e(0x1bb)](_0x4d4532[_0xdb2b4e(0x272)],_0x4d4532[_0xdb2b4e(0x1a5)]);break;}}),pid[_0x34b527]['on']('error',function(_0x13c75a){if(_0x349a58)return;_0x349a58=!![],_0x5d3c38(_0x13c75a);}),pid[_0x34b527]['on']('exit',async function(_0x2d74ca){const _0x54099d=_0x4621e3;if(terminating)return;if(installingUpdate){logger['debug']('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io[_0x54099d(0x290)]();return;}if(_0x349a58)return;_0x349a58=!![],_0x5d3c38(null);const _0x1855d4=dbConfig['get'](_0x54099d(0x2df))[_0x54099d(0x245)]({'botID':_0x34b527})[_0x54099d(0x115)]();_0x1855d4&&(_0x1855d4[_0x54099d(0x216)]=='enabled'||_0x1855d4[_0x54099d(0x216)]=='new')&&(await sleep(0x3e8),updateLive(_0x34b527,_0x54099d(0x270)),logger[_0x54099d(0x160)](_0x54099d(0x198)+_0x34b527),startBot([_0x34b527,userID],{'cwd':bbpath},function(_0x4a547c){const _0x83beae=_0x54099d;if(_0x4a547c)logger[_0x83beae(0x160)](_0x4a547c);}));});}function stopBot(_0x3461ad){const _0xc24b3b=_0x4d28bd;getClientsWithBotID(_0x3461ad)[_0xc24b3b(0x246)](_0xb024e2=>{const _0x3823d9=_0xc24b3b;getSocket(_0xb024e2['id'])[_0x3823d9(0x16f)](!![]),removeClient(_0xb024e2['id']);}),pid[_0x3461ad]&&(pid[_0x3461ad][_0xc24b3b(0x2ad)](),pid[_0x3461ad]=null);}function stopAllBots(){const _0x30e5a4=_0x4d28bd;terminating=!![];const _0xa1db02=getEnabledBots();_0xa1db02[_0x30e5a4(0x246)](_0x52beaa=>{const _0x38c10d=_0x30e5a4;stopBot(_0x52beaa[_0x38c10d(0x15d)]);});}function restartBot(_0x45db46){const _0x562bf1=_0x4d28bd;if(pid[_0x45db46])pid[_0x45db46][_0x562bf1(0x2ad)]();}function addBot(){const _0xf3d570=_0x4d28bd;let _0x4dd5a0;for(let _0x4ee564=0x1;_0x4ee564<0x3e9;_0x4ee564++){_0x4dd5a0=_0x4ee564[_0xf3d570(0x180)]()[_0xf3d570(0x26b)](0x3,'0');let _0x317a33=config[_0xf3d570(0x245)](_0x45a089=>_0x45a089[_0xf3d570(0x15d)]==_0x4dd5a0);if(!_0x317a33)break;}if(_0x4dd5a0===_0xf3d570(0x18b)){logger[_0xf3d570(0x160)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0xf3d570(0x160)](_0xf3d570(0x1a7)+_0x4dd5a0),dbConfig[_0xf3d570(0x12d)](_0xf3d570(0x2df))[_0xf3d570(0x2b4)]({'botID':_0x4dd5a0,'botname':'Bot\x20'+_0x4dd5a0,'status':_0xf3d570(0x104),'live':''})[_0xf3d570(0x20e)](),startBot([_0x4dd5a0,userID],{'cwd':bbpath},function(_0x44b394){if(_0x44b394)logger['full'](_0x44b394);}),config=getConfiguration(),io['to'](_0xf3d570(0x103))[_0xf3d570(0x1bb)](_0xf3d570(0x2df),config),broadcastToBots('bots',JSON['stringify'](config));}function deleteBot(_0x2f29cf){const _0xf1b9ac=_0x4d28bd;getClientsWithBotID(_0x2f29cf)[_0xf1b9ac(0x246)](_0x4a0e65=>{const _0x428029=_0xf1b9ac;getSocket(_0x4a0e65['id'])[_0x428029(0x16f)](!![]),removeClient(_0x4a0e65['id']);}),dbConfig[_0xf1b9ac(0x12d)](_0xf1b9ac(0x2df))[_0xf1b9ac(0x256)]({'botID':_0x2f29cf})[_0xf1b9ac(0x20e)](),logger[_0xf1b9ac(0x160)](_0xf1b9ac(0x20d)+_0x2f29cf),stopBot(_0x2f29cf);try{if(fs[_0xf1b9ac(0x1f0)](path[_0xf1b9ac(0x1be)](configpath,_0xf1b9ac(0x1e0)+_0x2f29cf+'-config.json')))fs[_0xf1b9ac(0x165)](path['join'](configpath,_0xf1b9ac(0x1e0)+_0x2f29cf+_0xf1b9ac(0x1db)));if(fs['existsSync'](path[_0xf1b9ac(0x1be)](configpath,'bot-'+_0x2f29cf+_0xf1b9ac(0x13e))))fs[_0xf1b9ac(0x165)](path['join'](configpath,_0xf1b9ac(0x1e0)+_0x2f29cf+_0xf1b9ac(0x13e)));if(fs['existsSync'](path[_0xf1b9ac(0x1be)](configpath,_0xf1b9ac(0x1e0)+_0x2f29cf+_0xf1b9ac(0x240))))fs[_0xf1b9ac(0x165)](path['join'](configpath,_0xf1b9ac(0x1e0)+_0x2f29cf+_0xf1b9ac(0x240)));if(fs[_0xf1b9ac(0x1f0)](path[_0xf1b9ac(0x1be)](configpath,'bot-'+_0x2f29cf+_0xf1b9ac(0x24b))))fs[_0xf1b9ac(0x165)](path[_0xf1b9ac(0x1be)](configpath,'bot-'+_0x2f29cf+_0xf1b9ac(0x24b)));}catch(_0x5bab80){if(_0x5bab80)logger[_0xf1b9ac(0x160)](_0xf1b9ac(0x188),_0x5bab80);}config=getConfiguration(),io['to'](_0xf1b9ac(0x103))['emit'](_0xf1b9ac(0x2df),config),broadcastToBots(_0xf1b9ac(0x2df),JSON[_0xf1b9ac(0x1d6)](config));}function toggleBot(_0x54176d,_0x384668,_0x19890d){const _0x334610=_0x4d28bd;dbConfig[_0x334610(0x12d)](_0x334610(0x2df))[_0x334610(0x245)]({'botID':_0x54176d})[_0x334610(0x20c)]({'status':_0x384668})[_0x334610(0x20c)]({'live':_0x19890d})['write']();if(_0x384668==_0x334610(0x21a)||_0x384668==_0x334610(0x104))logger[_0x334610(0x160)](_0x334610(0x27b)+_0x54176d),startBot([_0x54176d,userID],{'cwd':bbpath},function(_0x3ae14e){if(_0x3ae14e)logger['full'](_0x3ae14e);});else(_0x384668==_0x334610(0x152)||_0x384668==_0x334610(0x2b5))&&(logger['full'](_0x334610(0x242)+_0x54176d),stopBot(_0x54176d));config=getConfiguration(),io['to']('botmanager')[_0x334610(0x1bb)](_0x334610(0x2df),config),broadcastToBots(_0x334610(0x2df),JSON[_0x334610(0x1d6)](config));}function toggleStatus(_0x5f0cb4){const _0x2e9b72=_0x4d28bd;let _0x45ba5e=dbConfig[_0x2e9b72(0x12d)](_0x2e9b72(0x2df))[_0x2e9b72(0x245)]({'botID':_0x5f0cb4})[_0x2e9b72(0x115)](),_0x48b76d;if(_0x45ba5e[_0x2e9b72(0x216)]===_0x2e9b72(0x21a))_0x48b76d='disabled';else{if(_0x45ba5e[_0x2e9b72(0x216)]===_0x2e9b72(0x104))_0x48b76d=_0x2e9b72(0x2b5);else{if(_0x45ba5e[_0x2e9b72(0x216)]===_0x2e9b72(0x2b5))_0x48b76d=_0x2e9b72(0x104);else{if(_0x45ba5e[_0x2e9b72(0x216)]==='disabled')_0x48b76d='enabled';}}}return _0x48b76d;}function updateStatus(_0x1cc9c8,_0xef6d19){const _0x19520d=_0x4d28bd;dbConfig[_0x19520d(0x12d)](_0x19520d(0x2df))[_0x19520d(0x245)]({'botID':_0x1cc9c8})[_0x19520d(0x20c)]({'status':_0xef6d19})[_0x19520d(0x20e)](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x19520d(0x2df),config),broadcastToBots(_0x19520d(0x2df),JSON[_0x19520d(0x1d6)](config));}function updateLive(_0x589bd0,_0x286412){const _0x3b7276=_0x4d28bd;dbConfig['get'](_0x3b7276(0x2df))[_0x3b7276(0x245)]({'botID':_0x589bd0})[_0x3b7276(0x20c)]({'live':_0x286412})[_0x3b7276(0x20e)](),config=getConfiguration(),io['to'](_0x3b7276(0x103))[_0x3b7276(0x1bb)](_0x3b7276(0x2df),config),broadcastToBots('bots',JSON[_0x3b7276(0x1d6)](config));}function updateBotName(_0x38b456,_0x2aed90){const _0x248da6=_0x4d28bd;dbConfig[_0x248da6(0x12d)](_0x248da6(0x2df))[_0x248da6(0x245)]({'botID':_0x38b456})[_0x248da6(0x20c)]({'botname':_0x2aed90})[_0x248da6(0x20e)](),config=getConfiguration(),io['to'](_0x248da6(0x103))[_0x248da6(0x1bb)](_0x248da6(0x2df),config),broadcastToBots('bots',JSON[_0x248da6(0x1d6)](config));}function updateBotManager(){const _0x3c100f=_0x4d28bd;config=getConfiguration(),io['to'](_0x3c100f(0x103))[_0x3c100f(0x1bb)]('bots',config),broadcastToBots(_0x3c100f(0x2df),JSON[_0x3c100f(0x1d6)](config));}function toggleBotMode(_0x37b7da){const _0x238456=_0x4d28bd;if(pid[_0x37b7da])pid[_0x37b7da][_0x238456(0x186)]({'function':_0x238456(0x2d9),'args':null});else{const _0x5d2190=configpath+_0x238456(0x1e0)+_0x37b7da+_0x238456(0x1db),_0x578ec1=fs[_0x238456(0x190)](_0x5d2190),_0x3ae512=JSON['parse'](_0x578ec1),_0x2a3d40=_0x3ae512['bot'][0x0][_0x238456(0x11e)];_0x3ae512['bot'][0x0][_0x238456(0x11e)]=!_0x2a3d40;const _0x2853de=JSON[_0x238456(0x1d6)](_0x3ae512,null,0x2);fs[_0x238456(0x1ce)](_0x5d2190,_0x2853de),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x238456(0x2df),JSON['stringify'](config));}}function validateTelegram(_0xa26c88){const _0x25a8b4=_0x4d28bd;if(_0xa26c88[_0x25a8b4(0x15f)][_0x25a8b4(0x220)]!=settings[_0x25a8b4(0x148)]&&'@'+_0xa26c88[_0x25a8b4(0x15f)][_0x25a8b4(0x220)]!=settings[_0x25a8b4(0x148)]||_0xa26c88[_0x25a8b4(0xdd)]['id']!=settings[_0x25a8b4(0x1dc)])return sendTelegram(_0xa26c88[_0x25a8b4(0xdd)]['id'],_0x25a8b4(0x28a),{'parse_mode':_0x25a8b4(0x244)}),![];return!![];}async function initTelegram(){const _0x4cca44=_0x4d28bd;if(tgBot)tgBot[_0x4cca44(0x2de)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x1703ae=_0x4cca44(0x139);_0x1703ae+='\x0a',_0x1703ae+=_0x4cca44(0x1ac),_0x1703ae+=_0x4cca44(0x171),_0x1703ae+=_0x4cca44(0x1fb),_0x1703ae+=_0x4cca44(0x257),_0x1703ae+=_0x4cca44(0x11d),_0x1703ae+=_0x4cca44(0x20b),_0x1703ae+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x1703ae+='/names\x20-\x20show\x20bot\x20names\x0a',_0x1703ae+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x1703ae+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x1703ae+=_0x4cca44(0x1d3),_0x1703ae+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x1703ae+=_0x4cca44(0xe0),_0x1703ae+=_0x4cca44(0x108);let _0x393921=_0x4cca44(0x1ab);_0x393921+='\x0a',_0x393921+=_0x1703ae,tgBot['catch']((_0x219fd2,_0x5f1339)=>{const _0x252e65=_0x4cca44;logger[_0x252e65(0x170)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x252e65(0x1ec)](_0x252e65(0x154),_0x219fd2);}),tgBot[_0x4cca44(0x2be)](async(_0x4bdc91,_0x2e3c06)=>{const _0x596299=_0x4cca44;if(!(!settings[_0x596299(0x1dc)]&&_0x4bdc91[_0x596299(0x175)][_0x596299(0x299)]['text']==_0x596299(0x201))){if(!validateTelegram(_0x4bdc91))return;}_0x2e3c06();}),tgBot['command']('start',async _0x2ee54e=>{const _0x290d6c=_0x4cca44;if(!settings['telegramChatId'])updateSetting(_0x290d6c(0x1dc),_0x2ee54e[_0x290d6c(0xdd)]['id']);updateSetting(_0x290d6c(0x10d),!![]);if(!validateTelegram(_0x2ee54e))return;await sendTelegram(_0x2ee54e[_0x290d6c(0xdd)]['id'],_0x393921);}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0xf7),async _0x4de8f1=>{const _0x5a364a=_0x4cca44;updateSetting(_0x5a364a(0x10d),!![]),await sendTelegram(_0x4de8f1[_0x5a364a(0xdd)]['id'],_0x5a364a(0x1ca));}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x101),async _0x825225=>{const _0x64a3ef=_0x4cca44;await sendTelegram(_0x825225[_0x64a3ef(0xdd)]['id'],_0x64a3ef(0x13c)),updateSetting('telegramEnabled',![]);}),tgBot[_0x4cca44(0x1c6)]('config',async _0x1beb71=>{const _0x55036e=_0x4cca44,_0x4bac92=Markup[_0x55036e(0x1ae)]([Markup[_0x55036e(0xe4)]['callback'](_0x55036e(0x153),'config_orders'),Markup[_0x55036e(0xe4)][_0x55036e(0x2e1)]('Alerts',_0x55036e(0x176)),Markup[_0x55036e(0xe4)]['callback'](_0x55036e(0x2a3),_0x55036e(0x288))]);_0x1beb71[_0x55036e(0x130)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x4bac92);}),tgBot[_0x4cca44(0xda)](_0x4cca44(0x13d),async _0x45dfd4=>{const _0x3e726e=_0x4cca44;_0x45dfd4[_0x3e726e(0x12a)](),updateSetting(_0x3e726e(0x1b8),_0x3e726e(0x16d)),updateSetting(_0x3e726e(0x10d),!![]),await sendTelegram(_0x45dfd4[_0x3e726e(0xdd)]['id'],_0x3e726e(0x2d5));}),tgBot[_0x4cca44(0xda)](_0x4cca44(0x176),async _0x585e4d=>{const _0x15fa8b=_0x4cca44;_0x585e4d['editMessageReplyMarkup'](),updateSetting(_0x15fa8b(0x1b8),_0x15fa8b(0x274)),updateSetting(_0x15fa8b(0x10d),!![]),await sendTelegram(_0x585e4d[_0x15fa8b(0xdd)]['id'],_0x15fa8b(0x105));}),tgBot[_0x4cca44(0xda)]('config_all',async _0x577bcc=>{const _0x36b569=_0x4cca44;_0x577bcc[_0x36b569(0x12a)](),updateSetting(_0x36b569(0x1b8),_0x36b569(0x255)),updateSetting(_0x36b569(0x10d),!![]),await sendTelegram(_0x577bcc[_0x36b569(0xdd)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot['command'](_0x4cca44(0x216),async _0x34f9f9=>{const _0x59ccac=_0x4cca44,_0x39d939=getBotsWithMode();let _0x42086a=_0x59ccac(0x2bf);config['forEach'](_0xc94a2=>{const _0x42dd30=_0x59ccac,_0x21dc82=_0x39d939['find'](_0x162594=>_0x162594[_0x42dd30(0x15d)]==_0xc94a2['botID'])['mode'];_0x42086a+='Bot\x20'+_0xc94a2[_0x42dd30(0x15d)]+':\x20'+_0xc94a2['status']+_0x42dd30(0x2b8)+_0x21dc82+_0x42dd30(0x2b8)+_0xc94a2[_0x42dd30(0xf3)]+'\x0a';}),_0x42086a+='\x0a',_0x42086a+=_0x59ccac(0x238),_0x42086a+=!settings[_0x59ccac(0x10d)]?_0x59ccac(0x143):_0x59ccac(0x178),_0x42086a+=settings[_0x59ccac(0x10d)]?settings[_0x59ccac(0x1b8)]==_0x59ccac(0x255)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x59ccac(0x184)+settings[_0x59ccac(0x1b8)]+'\x20only\x0a':'',await sendTelegram(_0x34f9f9[_0x59ccac(0xdd)]['id'],_0x42086a,{'parse_mode':_0x59ccac(0x244)});}),tgBot['command'](_0x4cca44(0x25f),async _0x199351=>{const _0x25399e=_0x4cca44,_0x177144=getEnabledBots();if(_0x177144['length']==0x0)await sendTelegram(_0x199351['chat']['id'],_0x25399e(0x1a4));else{if(_0x177144['length']>0x1)_0x177144[_0x25399e(0x2b4)]({'botID':_0x25399e(0x255)});let _0x32edda=[],_0x373e17=[];const _0x35e87f=_0x177144[_0x25399e(0x132)]%0x4==0x0||_0x177144[_0x25399e(0x132)]%0x4==0x3||_0x177144['length']%0x3==0x1?0x4:0x3;let _0x125672=0x0;_0x177144['forEach']((_0x4e5013,_0x2c7d96)=>{const _0x1fa545=_0x25399e;if(_0x2c7d96%_0x35e87f==0x0)_0x373e17=[];_0x373e17['push'](Markup[_0x1fa545(0xe4)][_0x1fa545(0x2e1)](_0x4e5013[_0x1fa545(0x15d)]==_0x1fa545(0x255)?_0x1fa545(0x2d4):_0x1fa545(0x174)+_0x4e5013[_0x1fa545(0x15d)],_0x1fa545(0x2e2)+_0x4e5013[_0x1fa545(0x15d)])),_0x2c7d96%_0x35e87f==0x0&&(_0x32edda[_0x125672]=_0x373e17,_0x125672++);});const _0x42440c=Markup[_0x25399e(0x1ae)](_0x32edda);_0x199351['reply'](_0x25399e(0x280),_0x42440c);}}),tgBot[_0x4cca44(0xda)](/restart_(.+)/,async _0x5dd978=>{const _0x33a92b=_0x4cca44,_0x8f9786=_0x5dd978[_0x33a92b(0x1cc)][0x1];_0x5dd978['editMessageReplyMarkup'](),_0x8f9786==_0x33a92b(0x255)?config[_0x33a92b(0x246)](_0x4015ff=>{restartBot(_0x4015ff['botID']);}):restartBot(_0x8f9786);}),tgBot[_0x4cca44(0x1c6)]('on',async _0x5d6586=>{const _0x3797e6=_0x4cca44,_0x5a5b7b=getDisabledBots();if(_0x5a5b7b[_0x3797e6(0x132)]==0x0)await sendTelegram(_0x5d6586['chat']['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x5a5b7b[_0x3797e6(0x132)]>0x1)_0x5a5b7b[_0x3797e6(0x2b4)]({'botID':_0x3797e6(0x255)});let _0x35899a=[],_0x3bbdb6=[];const _0x15947c=_0x5a5b7b[_0x3797e6(0x132)]%0x4==0x0||_0x5a5b7b[_0x3797e6(0x132)]%0x4==0x3||_0x5a5b7b['length']%0x3==0x1?0x4:0x3;let _0x349611=0x0;_0x5a5b7b['forEach']((_0x476ee9,_0x1e0569)=>{const _0x19b146=_0x3797e6;if(_0x1e0569%_0x15947c==0x0)_0x3bbdb6=[];_0x3bbdb6[_0x19b146(0x2b4)](Markup[_0x19b146(0xe4)][_0x19b146(0x2e1)](_0x476ee9['botID']==_0x19b146(0x255)?_0x19b146(0x2d4):_0x19b146(0x174)+_0x476ee9[_0x19b146(0x15d)],_0x19b146(0x2c5)+_0x476ee9[_0x19b146(0x15d)])),_0x1e0569%_0x15947c==0x0&&(_0x35899a[_0x349611]=_0x3bbdb6,_0x349611++);});const _0x40c62f=Markup[_0x3797e6(0x1ae)](_0x35899a);_0x5d6586[_0x3797e6(0x130)](_0x3797e6(0x22e),_0x40c62f);}}),tgBot[_0x4cca44(0xda)](/on_(.+)/,async _0x1dab62=>{const _0x2a000d=_0x4cca44,_0x1ed9a2=_0x1dab62[_0x2a000d(0x1cc)][0x1];_0x1dab62['editMessageReplyMarkup']();if(_0x1ed9a2=='all'){const _0x3246bc=getDisabledBots();await sendTelegram(_0x1dab62[_0x2a000d(0xdd)]['id'],_0x2a000d(0x1df)),_0x3246bc[_0x2a000d(0x246)](_0x2d68ae=>{const _0x4634b9=_0x2a000d;if(_0x2d68ae['botID']!='all')toggleBot(_0x2d68ae[_0x4634b9(0x15d)],toggleStatus(_0x2d68ae[_0x4634b9(0x15d)]),_0x4634b9(0x270));});}else await sendTelegram(_0x1dab62[_0x2a000d(0xdd)]['id'],_0x2a000d(0x127)+_0x1ed9a2),toggleBot(_0x1ed9a2,toggleStatus(_0x1ed9a2),'stopped');}),tgBot['command'](_0x4cca44(0x22f),async _0x3b4bd7=>{const _0x38a54c=_0x4cca44,_0x192db1=getEnabledBots();if(_0x192db1[_0x38a54c(0x132)]==0x0)await sendTelegram(_0x3b4bd7['chat']['id'],_0x38a54c(0x1a4));else{if(_0x192db1[_0x38a54c(0x132)]>0x1)_0x192db1[_0x38a54c(0x2b4)]({'botID':_0x38a54c(0x255)});let _0xb183de=[],_0x2e88c9=[];const _0x48c6b3=_0x192db1['length']%0x4==0x0||_0x192db1[_0x38a54c(0x132)]%0x4==0x3||_0x192db1[_0x38a54c(0x132)]%0x3==0x1?0x4:0x3;let _0x53086f=0x0;_0x192db1['forEach']((_0x582842,_0x4ad3a8)=>{const _0x20a70e=_0x38a54c;if(_0x4ad3a8%_0x48c6b3==0x0)_0x2e88c9=[];_0x2e88c9[_0x20a70e(0x2b4)](Markup['button'][_0x20a70e(0x2e1)](_0x582842[_0x20a70e(0x15d)]==_0x20a70e(0x255)?_0x20a70e(0x2d4):_0x20a70e(0x174)+_0x582842[_0x20a70e(0x15d)],_0x20a70e(0x271)+_0x582842[_0x20a70e(0x15d)])),_0x4ad3a8%_0x48c6b3==0x0&&(_0xb183de[_0x53086f]=_0x2e88c9,_0x53086f++);});const _0x37319c=Markup[_0x38a54c(0x1ae)](_0xb183de);_0x3b4bd7[_0x38a54c(0x130)](_0x38a54c(0xe3),_0x37319c);}}),tgBot['action'](/off_(.+)/,async _0x591a8f=>{const _0x21920e=_0x4cca44,_0x480ae0=_0x591a8f[_0x21920e(0x1cc)][0x1];_0x591a8f[_0x21920e(0x12a)]();if(_0x480ae0==_0x21920e(0x255)){const _0x4eea0f=getEnabledBots();await sendTelegram(_0x591a8f[_0x21920e(0xdd)]['id'],_0x21920e(0x2b1)),_0x4eea0f[_0x21920e(0x246)](_0x30bc81=>{const _0x2a3853=_0x21920e;if(_0x30bc81[_0x2a3853(0x15d)]!=_0x2a3853(0x255))toggleBot(_0x30bc81[_0x2a3853(0x15d)],toggleStatus(_0x30bc81[_0x2a3853(0x15d)]),'stopped');});}else await sendTelegram(_0x591a8f[_0x21920e(0xdd)]['id'],_0x21920e(0x1d7)+_0x480ae0),toggleBot(_0x480ae0,toggleStatus(_0x480ae0),'stopped');}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x1fd),async _0x59a973=>{const _0x1dbec3=_0x4cca44,_0x145f5b=getEnabledBots();if(_0x145f5b[_0x1dbec3(0x132)]==0x0)await sendTelegram(_0x59a973[_0x1dbec3(0xdd)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x145f5b['length']>0x1){let _0x90d539=[],_0x7269e1=[];const _0xaab882=_0x145f5b[_0x1dbec3(0x132)]%0x4==0x0||_0x145f5b['length']%0x4==0x3||_0x145f5b['length']%0x3==0x1?0x4:0x3;let _0x38bccc=0x0;_0x145f5b[_0x1dbec3(0x246)]((_0x3898cf,_0x4d4c68)=>{const _0x4ac0da=_0x1dbec3;if(_0x4d4c68%_0xaab882==0x0)_0x7269e1=[];_0x7269e1[_0x4ac0da(0x2b4)](Markup[_0x4ac0da(0xe4)][_0x4ac0da(0x2e1)](_0x4ac0da(0x174)+_0x3898cf[_0x4ac0da(0x15d)],_0x4ac0da(0x117)+_0x3898cf[_0x4ac0da(0x15d)])),_0x4d4c68%_0xaab882==0x0&&(_0x90d539[_0x38bccc]=_0x7269e1,_0x38bccc++);});const _0x5d106d=Markup[_0x1dbec3(0x1ae)](_0x90d539);_0x59a973['reply'](_0x1dbec3(0x19c),_0x5d106d);}else{const _0x24d4b9=_0x145f5b[0x0][_0x1dbec3(0x15d)];if(pid[_0x24d4b9])pid[_0x24d4b9][_0x1dbec3(0x186)]({'function':_0x1dbec3(0x200),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x552ecd=>{const _0x372b3a=_0x4cca44,_0x5cd5a6=_0x552ecd['match'][0x1];_0x552ecd[_0x372b3a(0x12a)]();if(pid[_0x5cd5a6])pid[_0x5cd5a6][_0x372b3a(0x186)]({'function':_0x372b3a(0x200),'args':null});}),tgBot[_0x4cca44(0x1c6)]('portfolio',async _0x37ce7a=>{const _0xc1772e=_0x4cca44,_0x55f6b1=getEnabledBots();if(_0x55f6b1['length']==0x0)await sendTelegram(_0x37ce7a[_0xc1772e(0xdd)]['id'],_0xc1772e(0x1a4));else{if(_0x55f6b1[_0xc1772e(0x132)]>0x1){let _0x4feed1=[],_0xd73564=[];const _0x5ef04c=_0x55f6b1[_0xc1772e(0x132)]%0x4==0x0||_0x55f6b1['length']%0x4==0x3||_0x55f6b1[_0xc1772e(0x132)]%0x3==0x1?0x4:0x3;let _0x5effde=0x0;_0x55f6b1['forEach']((_0x45b991,_0x1a7c9c)=>{const _0xed170f=_0xc1772e;if(_0x1a7c9c%_0x5ef04c==0x0)_0xd73564=[];_0xd73564[_0xed170f(0x2b4)](Markup[_0xed170f(0xe4)]['callback']('Bot\x20'+_0x45b991[_0xed170f(0x15d)],_0xed170f(0x13a)+_0x45b991['botID'])),_0x1a7c9c%_0x5ef04c==0x0&&(_0x4feed1[_0x5effde]=_0xd73564,_0x5effde++);});const _0x472623=Markup[_0xc1772e(0x1ae)](_0x4feed1);_0x37ce7a['reply'](_0xc1772e(0x179),_0x472623);}else{const _0x584e7b=_0x55f6b1[0x0][_0xc1772e(0x15d)];if(pid[_0x584e7b])pid[_0x584e7b][_0xc1772e(0x186)]({'function':_0xc1772e(0xf5),'args':null});}}}),tgBot[_0x4cca44(0xda)](/portfolio_(.+)/,async _0xe29cc5=>{const _0x30c79b=_0x4cca44,_0xf6d51d=_0xe29cc5[_0x30c79b(0x1cc)][0x1];_0xe29cc5['editMessageReplyMarkup']();if(pid[_0xf6d51d])pid[_0xf6d51d]['send']({'function':_0x30c79b(0xf5),'args':null});}),tgBot[_0x4cca44(0x1c6)]('update',async _0x2fce67=>{const _0x338ac2=_0x4cca44;await getMessages();if(!updateAvailable)await sendTelegram(_0x2fce67[_0x338ac2(0xdd)]['id'],_0x338ac2(0x23e));else{if(!validInstallation)await sendTelegram(_0x2fce67[_0x338ac2(0xdd)]['id'],_0x338ac2(0x12f));else{const _0x30b8d4=Markup[_0x338ac2(0x1ae)]([Markup[_0x338ac2(0xe4)][_0x338ac2(0x2e1)](_0x338ac2(0x29c),_0x338ac2(0x26d)),Markup['button'][_0x338ac2(0x2e1)]('No','update_no')]);_0x2fce67['reply'](_0x338ac2(0x2af),_0x30b8d4);}}}),tgBot[_0x4cca44(0xda)](/update_(.+)/,async _0x2337b1=>{const _0x1fdca8=_0x4cca44,_0x503a6f=_0x2337b1['match'][0x1];_0x2337b1[_0x1fdca8(0x12a)](),_0x503a6f=='yes'&&(await sendTelegram(_0x2337b1[_0x1fdca8(0xdd)]['id'],_0x1fdca8(0xf0)),updateBB(_0x1fdca8(0x175))),_0x503a6f=='no'&&await sendTelegram(_0x2337b1[_0x1fdca8(0xdd)]['id'],_0x1fdca8(0x1fe));}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x177),async _0x2d06fe=>{const _0x161ba0=_0x4cca44;if(!validInstallation)await sendTelegram(_0x2d06fe[_0x161ba0(0xdd)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x738e61=Markup['inlineKeyboard']([Markup[_0x161ba0(0xe4)][_0x161ba0(0x2e1)](_0x161ba0(0x29c),_0x161ba0(0x189)),Markup['button'][_0x161ba0(0x2e1)]('No',_0x161ba0(0x1ad))]);_0x2d06fe[_0x161ba0(0x130)](_0x161ba0(0x19d),_0x738e61);}}),tgBot[_0x4cca44(0xda)](/reinstall_(.+)/,async _0x144c2f=>{const _0xacec07=_0x4cca44,_0xe37522=_0x144c2f[_0xacec07(0x1cc)][0x1];_0x144c2f[_0xacec07(0x12a)](),_0xe37522==_0xacec07(0x1c4)&&(await sendTelegram(_0x144c2f[_0xacec07(0xdd)]['id'],_0xacec07(0x22b)),updateBB(_0xacec07(0x177))),_0xe37522=='no'&&await sendTelegram(_0x144c2f['chat']['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled');}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x2c7),async _0x2aa900=>{const _0x3231c4=_0x4cca44,_0x53c466=getBotsWithMode();if(_0x53c466[_0x3231c4(0x132)]==0x0)await sendTelegram(_0x2aa900[_0x3231c4(0xdd)]['id'],_0x3231c4(0x1a4));else{let _0x26a880=[],_0x2668fa=[];const _0x2b4961=0x2;let _0x2d18e3=0x0;_0x53c466[_0x3231c4(0x246)]((_0x2c1a05,_0x13f3a1)=>{const _0x33e788=_0x3231c4;if(_0x13f3a1%_0x2b4961==0x0)_0x2668fa=[];_0x2668fa[_0x33e788(0x2b4)](Markup[_0x33e788(0xe4)][_0x33e788(0x2e1)]('Bot\x20'+_0x2c1a05[_0x33e788(0x15d)]+'\x20('+_0x2c1a05[_0x33e788(0x2c0)]+')','toggle_'+_0x2c1a05[_0x33e788(0x15d)])),_0x13f3a1%_0x2b4961==0x0&&(_0x26a880[_0x2d18e3]=_0x2668fa,_0x2d18e3++);});const _0x1993e2=Markup['inlineKeyboard'](_0x26a880);_0x2aa900[_0x3231c4(0x130)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x1993e2);}}),tgBot[_0x4cca44(0xda)](/toggle_(.+)/,async _0xdcc8d3=>{const _0x16ad37=_0x4cca44,_0xebee7a=_0xdcc8d3[_0x16ad37(0x1cc)][0x1];_0xdcc8d3[_0x16ad37(0x12a)]();const _0x47e76b=getBotsWithMode(),_0x4d82f4=_0x47e76b['find'](_0x7bbfdb=>_0x7bbfdb[_0x16ad37(0x15d)]==_0xebee7a),_0x3673c5=_0x4d82f4['mode']==_0x16ad37(0xdc)?_0x16ad37(0x168):'auto';await sendTelegram(_0xdcc8d3[_0x16ad37(0xdd)]['id'],_0x16ad37(0x2b9)+_0xebee7a+_0x16ad37(0x292)+_0x3673c5+_0x16ad37(0xed)),toggleBotMode(_0xebee7a);}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x234),async _0x5d424a=>{const _0x55ddae=_0x4cca44;let _0x561600='';config[_0x55ddae(0x246)](_0x49e7c5=>{const _0x360cde=_0x55ddae;_0x561600+=_0x360cde(0x174)+_0x49e7c5[_0x360cde(0x15d)]+':\x20'+_0x49e7c5[_0x360cde(0x17d)]+'\x0a';}),await sendTelegram(_0x5d424a[_0x55ddae(0xdd)]['id'],_0x561600,{'parse_mode':_0x55ddae(0x244)});}),tgBot[_0x4cca44(0x1c6)](_0x4cca44(0x204),async _0x3935e0=>{const _0x392f79=_0x4cca44;await sendTelegram(_0x3935e0[_0x392f79(0xdd)]['id'],_0x1703ae);}),process[_0x4cca44(0x156)](_0x4cca44(0x295),()=>tgBot[_0x4cca44(0x2de)]('SIGINT')),process[_0x4cca44(0x156)]('SIGTERM',()=>tgBot[_0x4cca44(0x2de)](_0x4cca44(0x213))),tgBot[_0x4cca44(0xf4)]();}}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0x4760fb,_0x5dcd7d,_0x17b987){const _0x5cb6cf=_0x4d28bd;_0x17b987={..._0x17b987,'disable_web_page_preview':!![]};try{await tgBot['telegram'][_0x5cb6cf(0x2e0)](_0x4760fb,_0x5dcd7d,_0x17b987);}catch(_0xcf571a){console[_0x5cb6cf(0x106)]('Telegram\x20error:',_0xcf571a);}}async function sendTelegramBot(_0x225b71,_0x8b6852){const _0x23c9df=_0x4d28bd;if(settings[_0x23c9df(0x10d)]){if(settings[_0x23c9df(0x1b8)]==_0x23c9df(0x255)||(_0x8b6852[_0x23c9df(0x2ca)]=='error'||_0x8b6852[_0x23c9df(0x2ca)]=='warning'||_0x8b6852[_0x23c9df(0x2ca)]=='success')&&settings[_0x23c9df(0x1b8)]==_0x23c9df(0x274)||_0x8b6852[_0x23c9df(0x2ca)]==_0x23c9df(0x124)&&settings['telegramEvents']==_0x23c9df(0x16d)){if(tgBot&&settings[_0x23c9df(0x1dc)]){if(_0x8b6852[_0x23c9df(0x284)])await sendTelegram(settings['telegramChatId'],_0x8b6852[_0x23c9df(0x17d)]+'\x20>\x20'+_0x8b6852[_0x23c9df(0x279)]);else await sendTelegram(settings[_0x23c9df(0x1dc)],_0x23c9df(0x174)+_0x225b71+'\x20>\x20'+_0x8b6852[_0x23c9df(0x279)]);}}}}async function sendTelegramMsg(_0x143ff9,_0x52f53d=_0x4d28bd(0x244)){const _0x3a4647=_0x4d28bd;return settings[_0x3a4647(0x10d)]&&tgBot&&settings[_0x3a4647(0x1dc)]?(await sendTelegram(settings[_0x3a4647(0x1dc)],_0x143ff9,{'parse_mode':_0x52f53d}),!![]):![];}function getDeviceWithIp(_0x2814e6){const _0x46a548=_0x4d28bd;return devices[_0x46a548(0x245)](_0x5b446f=>_0x5b446f['ip']===_0x2814e6);}async function temporaryAccess2FA(_0x47b949,_0x15d270){const _0x1770c2=_0x4d28bd;let _0x328983=new Date(),_0x44c3ea=![];if(lastIpApproval){if(_0x328983-lastIpApproval<0x1388)_0x44c3ea=!![];}lastIpApproval=new Date();if(_0x44c3ea)return;if(tgBot&&settings[_0x1770c2(0x1dc)]){const _0x40ca6d=uuidRandom();tmpStorage[_0x40ca6d]={'uuid':_0x47b949,'externalip':_0x15d270};const _0x1fb6bf=Markup[_0x1770c2(0x1ae)]([Markup[_0x1770c2(0xe4)]['callback'](_0x1770c2(0x118),_0x1770c2(0x227)+_0x40ca6d),Markup[_0x1770c2(0xe4)][_0x1770c2(0x2e1)](_0x1770c2(0xd4),'tempaccess_15_'+_0x40ca6d),Markup['button'][_0x1770c2(0x2e1)](_0x1770c2(0x2db),_0x1770c2(0x1bf)+_0x40ca6d),Markup[_0x1770c2(0xe4)][_0x1770c2(0x2e1)](_0x1770c2(0x2b0),_0x1770c2(0x2c9)+_0x40ca6d)]);await sendTelegram(settings[_0x1770c2(0x1dc)],_0x1770c2(0x1c9)+normalizeIP(_0x15d270)[_0x1770c2(0x1af)]+'\x20?',_0x1fb6bf),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x14b86b=>{const _0x6f8cf3=_0x1770c2,_0x2e4768=_0x14b86b[_0x6f8cf3(0x1cc)][0x1],_0x26288b=_0x14b86b[_0x6f8cf3(0x1cc)][0x2],{uuid:_0x376889,externalip:_0x577567}=tmpStorage[_0x26288b];delete tmpStorage[_0x26288b],_0x14b86b[_0x6f8cf3(0x12a)](),devices[_0x376889][_0x6f8cf3(0x173)]={'clientip':_0x577567,'timestamp':new Date()['getTime'](),'expiry':_0x2e4768},_0x2e4768!=_0x6f8cf3(0x2b0)?(await sendTelegram(_0x14b86b[_0x6f8cf3(0xdd)]['id'],_0x6f8cf3(0x14f)+_0x2e4768+_0x6f8cf3(0x1d5),{'parse_mode':_0x6f8cf3(0x244)}),io['to'](_0x376889)[_0x6f8cf3(0x1bb)](_0x6f8cf3(0x216),{'access':{'allow':![],'reason':_0x6f8cf3(0x265),'token':null}})):(await sendTelegram(_0x14b86b[_0x6f8cf3(0xdd)]['id'],_0x6f8cf3(0x18f)),io['to'](_0x376889)[_0x6f8cf3(0x1bb)]('status',{'access':{'allow':![],'reason':_0x6f8cf3(0x218),'token':null}}));});}}async function loginAccess2FA(_0x4b776b,_0x4b2eeb){const _0x1e8462=_0x4d28bd;if(tgBot&&settings[_0x1e8462(0x1dc)]){const _0x3b230c=uuidRandom();tmpStorage[_0x3b230c]={'uuid':_0x4b776b,'externalip':_0x4b2eeb};const _0x136522=Markup[_0x1e8462(0x1ae)]([Markup[_0x1e8462(0xe4)]['callback'](_0x1e8462(0x114),'login2fa_'+loginExpiry+'_'+_0x3b230c),Markup['button'][_0x1e8462(0x2e1)](_0x1e8462(0x2b0),'login2fa_reject_'+_0x3b230c)]);await sendTelegram(settings[_0x1e8462(0x1dc)],_0x1e8462(0x11c)+normalizeIP(_0x4b2eeb)[_0x1e8462(0x1af)]+'\x20?',_0x136522),tgBot['action'](/login2fa_(.+)_(.+)/,async _0x273582=>{const _0x5829cb=_0x1e8462,_0x3b8cff=_0x273582[_0x5829cb(0x1cc)][0x1],_0x16f26c=_0x273582['match'][0x2],{uuid:_0x28ad3c,externalip:_0x522f42}=tmpStorage[_0x16f26c];delete tmpStorage[_0x16f26c],_0x273582[_0x5829cb(0x12a)](),devices[_0x28ad3c][_0x5829cb(0x278)]={'clientip':_0x522f42,'timestamp':new Date()['getTime'](),'expiry':_0x3b8cff},_0x3b8cff!=_0x5829cb(0x2b0)?(await sendTelegram(_0x273582[_0x5829cb(0xdd)]['id'],'Login\x20accepted',{'parse_mode':_0x5829cb(0x244)}),io['to'](_0x28ad3c)[_0x5829cb(0x1bb)](_0x5829cb(0x216),{'access':{'allow':![],'reason':_0x5829cb(0x265),'token':null}})):(await sendTelegram(_0x273582['chat']['id'],'Login\x20rejected'),io['to'](_0x28ad3c)[_0x5829cb(0x1bb)](_0x5829cb(0x216),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x297e9c=_0x4d28bd;return dbConfig[_0x297e9c(0x12d)](_0x297e9c(0x2df))[_0x297e9c(0x144)](_0x297e9c(0x15d))[_0x297e9c(0xdb)]({'status':_0x297e9c(0x21a)})[_0x297e9c(0x115)]()||[];}function getDisabledBots(){const _0x5bd5c1=_0x4d28bd;return dbConfig[_0x5bd5c1(0x12d)]('bots')['sortBy'](_0x5bd5c1(0x15d))[_0x5bd5c1(0xdb)]({'status':_0x5bd5c1(0x152)})['value']()||[];}function getBotAttributes(_0x5507da){const _0x888516=_0x4d28bd;let _0x20e936={};const _0x64711=configpath+_0x888516(0x1e0)+_0x5507da+_0x888516(0x1db),_0x3958ca=fs['existsSync'](_0x64711);if(_0x3958ca){const _0x41ca74=fs[_0x888516(0x190)](_0x64711);try{const _0x5892f1=JSON[_0x888516(0x196)](_0x41ca74),_0x4a4caf=_0x5892f1?_0x5892f1[_0x888516(0x228)][0x0]['headless']:![];_0x20e936[_0x888516(0x2c0)]=_0x4a4caf?_0x888516(0xdc):_0x888516(0x168),_0x20e936[_0x888516(0x17d)]=_0x5892f1?_0x5892f1[_0x888516(0x228)][0x0][_0x888516(0x17d)]:_0x888516(0x174)+_0x5507da;}catch(_0x165217){_0x20e936['mode']='manual',_0x20e936[_0x888516(0x17d)]=_0x888516(0x174)+_0x5507da;}}else _0x20e936[_0x888516(0x2c0)]='manual',_0x20e936[_0x888516(0x17d)]=_0x888516(0x174)+_0x5507da;return _0x20e936;}function getBotsWithMode(){const _0x8adc8=_0x4d28bd,_0x9a757e=dbConfig[_0x8adc8(0x12d)]('bots')[_0x8adc8(0x144)](_0x8adc8(0x15d))[_0x8adc8(0x115)]()||[];return _0x9a757e['forEach'](_0x3186c5=>{const _0x237cda=_0x8adc8;let _0xd22127=getBotAttributes(_0x3186c5['botID']);_0x3186c5[_0x237cda(0x2c0)]=_0xd22127['mode'];}),_0x9a757e;}function getBotExchanges(){const _0x29a670=_0x4d28bd;let _0x51370c=[];const _0x177f99=dbConfig[_0x29a670(0x12d)]('bots')[_0x29a670(0x144)](_0x29a670(0x15d))['value']()||[];_0x177f99[_0x29a670(0x246)](_0x53e5e3=>{const _0x314641=_0x29a670;if(_0x53e5e3['status']=='enabled'){const _0x304482=configpath+_0x314641(0x1e0)+_0x53e5e3[_0x314641(0x15d)]+_0x314641(0x1db),_0x48f311=fs[_0x314641(0x1f0)](_0x304482);let _0x393d86;if(_0x48f311){const _0x40831f=fs[_0x314641(0x190)](_0x304482);try{const _0x132279=JSON[_0x314641(0x196)](_0x40831f);_0x393d86=_0x132279?_0x132279['bot'][0x0][_0x314641(0x1fc)]:null;}catch(_0x2a53f1){}}if(_0x393d86)_0x51370c['push'](_0x393d86);}});const _0x23928b=[...new Set(_0x51370c)][_0x29a670(0x26e)]();return _0x23928b;}async function initUser(){const _0x211fb9=_0x4d28bd;if(!settings['userid']){const _0x5c3cae=uuidRandom();mixpanel[_0x211fb9(0x23d)](_0x5c3cae),updateSetting(_0x211fb9(0x181),_0x5c3cae);}}async function initSecure(){const _0x38b5ab=_0x4d28bd;let _0x43bcda=getSecure();if(!_0x43bcda[_0x38b5ab(0x1a9)](_0x38b5ab(0x2bc))){let _0x1107ed=await generateKeys();_0x43bcda[_0x38b5ab(0x2c4)]=_0x1107ed[_0x38b5ab(0x2c4)],_0x43bcda[_0x38b5ab(0x1f6)]=_0x1107ed[_0x38b5ab(0x1f6)],_0x43bcda[_0x38b5ab(0x2bc)]=crypto[_0x38b5ab(0x19a)](0x20)['toString'](_0x38b5ab(0xe6));;storeSecure(_0x43bcda);}}function _0x4b42(_0x114259,_0x3aaa69){const _0x54c447=_0x210e();return _0x4b42=function(_0x37a985,_0x13f582){_0x37a985=_0x37a985-0xd0;let _0x210e0f=_0x54c447[_0x37a985];return _0x210e0f;},_0x4b42(_0x114259,_0x3aaa69);}function getSettings(){const _0xe406c8=_0x4d28bd;return dbSettings[_0xe406c8(0x12d)](_0xe406c8(0xd7))[_0xe406c8(0x115)]()||{};}function getSecure(){const _0x12970b=_0x4d28bd;return dbSecure[_0x12970b(0x12d)](_0x12970b(0x1aa))[_0x12970b(0x115)]()||{};}function getBlacklist(){const _0x59eb84=_0x4d28bd;return dbSecure[_0x59eb84(0x12d)](_0x59eb84(0x223))[_0x59eb84(0x115)]()||[];}function broadcastToBots(_0x40c097,_0x527898){config['forEach'](_0x57535c=>{const _0x5aa0f4=_0x4b42;if(_0x57535c[_0x5aa0f4(0x216)]==_0x5aa0f4(0x21a)&&_0x57535c[_0x5aa0f4(0xf3)]==_0x5aa0f4(0x112)||_0x57535c[_0x5aa0f4(0x216)]=='new'&&_0x57535c['live']==_0x5aa0f4(0x112)){if(pid[_0x57535c['botID']])pid[_0x57535c[_0x5aa0f4(0x15d)]][_0x5aa0f4(0x186)]({[_0x40c097]:_0x527898});}});}async function storeSettings(_0x5c80ec,_0x4be144=![]){const _0x21ee7b=_0x4d28bd;_0x5c80ec={...settings,..._0x5c80ec};if(_0x4be144&&_0x5c80ec[_0x21ee7b(0x2d8)]!=_0x21ee7b(0x215)&&_0x5c80ec[_0x21ee7b(0x2d8)]!=_0x21ee7b(0x2b7)&&_0x5c80ec[_0x21ee7b(0x2d8)]!=''){const _0xa58169=decryptRSA(secure[_0x21ee7b(0x1f6)],_0x5c80ec[_0x21ee7b(0x2d8)])[_0x21ee7b(0x241)]('|@|')[0x0],_0x528b86=bcrypt[_0x21ee7b(0xe9)](_0xa58169,saltRounds);_0x5c80ec={..._0x5c80ec,'bbPassword':_0x528b86};}if(_0x4be144&&_0x5c80ec[_0x21ee7b(0x1ed)]!=_0x21ee7b(0x215)&&_0x5c80ec['telegramToken']!=_0x21ee7b(0x2b7)&&_0x5c80ec['telegramToken']!=''){const _0x1bcb34=decryptRSA(secure[_0x21ee7b(0x1f6)],_0x5c80ec[_0x21ee7b(0x1ed)])['split'](_0x21ee7b(0x211))[0x0];_0x5c80ec={..._0x5c80ec,'telegramToken':_0x1bcb34};}if(_0x4be144&&_0x5c80ec[_0x21ee7b(0x221)]!=_0x21ee7b(0x215)&&_0x5c80ec['marketcapApi']!=_0x21ee7b(0x2b7)&&_0x5c80ec[_0x21ee7b(0x221)]!=''){const _0x1e0e7b=decryptRSA(secure[_0x21ee7b(0x1f6)],_0x5c80ec[_0x21ee7b(0x221)])['split'](_0x21ee7b(0x211))[0x0];_0x5c80ec={..._0x5c80ec,'marketcapApi':_0x1e0e7b};}const _0xa117ac=_0x5c80ec[_0x21ee7b(0x1ed)]!=_0x21ee7b(0x215)&&_0x5c80ec[_0x21ee7b(0x1ed)]!=settings['telegramToken']||_0x5c80ec['telegramUsername']!=settings[_0x21ee7b(0x148)],_0xcfe2d0=_0x5c80ec[_0x21ee7b(0x1ed)]==''||_0x5c80ec['telegramUsername']=='',_0x493b17=_0x5c80ec[_0x21ee7b(0x221)]&&_0x5c80ec[_0x21ee7b(0x221)]!='************'&&_0x5c80ec[_0x21ee7b(0x221)]!=settings[_0x21ee7b(0x1ed)];_0xa117ac&&(_0x5c80ec[_0x21ee7b(0x1dc)]=null,_0x5c80ec[_0x21ee7b(0x1b8)]='all');for(const [_0x51ee44,_0x5aed31]of Object[_0x21ee7b(0x2bd)](_0x5c80ec)){if(_0x51ee44==_0x21ee7b(0x1ed)&&_0x5aed31==_0x21ee7b(0x215)){_0x5c80ec['telegramToken']=settings[_0x21ee7b(0x1ed)];continue;};if(_0x51ee44==_0x21ee7b(0x2d8)&&_0x5aed31==_0x21ee7b(0x215)){_0x5c80ec[_0x21ee7b(0x2d8)]=settings['bbPassword'];continue;};if(_0x51ee44==_0x21ee7b(0x221)&&_0x5aed31==_0x21ee7b(0x215)){_0x5c80ec[_0x21ee7b(0x221)]=settings[_0x21ee7b(0x221)];continue;};dbSettings['set']('settings.'+_0x51ee44,_0x5aed31)['write']();}settings=_0x5c80ec,io['to'](_0x21ee7b(0x103))[_0x21ee7b(0x1bb)](_0x21ee7b(0xd7),cleanSettings()),broadcastToBots(_0x21ee7b(0x25e),settings[_0x21ee7b(0x25e)]),broadcastToBots(_0x21ee7b(0x275),settings[_0x21ee7b(0x275)]),broadcastToBots(_0x21ee7b(0x221),settings[_0x21ee7b(0x221)]);if(_0xa117ac&&!_0xcfe2d0)initTelegram();if(_0xa117ac&&_0xcfe2d0)disableTelegram();getAllClients()[_0x21ee7b(0x246)](_0x1f1072=>{const _0x52420c=_0x21ee7b;getSocket(_0x1f1072['id'])[_0x52420c(0x1bb)]('status',{'access':{'allow':![],'reason':_0x52420c(0x265),'token':null}});}),_0x493b17&&(await sleep(0xbb8),testMarketcapApi(_0x5c80ec[_0x21ee7b(0x221)]));}async function testMarketcapApi(_0x79bde6){const _0x20cde9=_0x4d28bd,_0x357e73=[_0x20cde9(0x266),_0x20cde9(0x2a1)];try{await axios[_0x20cde9(0x12d)](_0x20cde9(0x205),{'headers':{'X-CMC_PRO_API_KEY':_0x79bde6},'params':{'symbol':_0x357e73[_0x20cde9(0x180)]()}});}catch(_0x20a528){_0x20a528[_0x20cde9(0x180)]()['includes'](_0x20cde9(0x233))?(io['to'](_0x20cde9(0x103))[_0x20cde9(0x1bb)](_0x20cde9(0x28d),_0x20cde9(0x2c3)),logger[_0x20cde9(0x160)](_0x20cde9(0x2c3))):(io['to']('botmanager')['emit'](_0x20cde9(0x28d),_0x20cde9(0x131)),logger[_0x20cde9(0x160)](_0x20cde9(0x131)),logger[_0x20cde9(0x1ec)](_0x20cde9(0x258),_0x20a528[_0x20cde9(0x180)]()+_0x20cde9(0x251)+_0x20a528[_0x20cde9(0x1eb)]));return;}logger['debug'](_0x20cde9(0x293));}function updateSetting(_0x367ba4,_0xaf56c1){const _0x563083=_0x4d28bd;dbSettings[_0x563083(0x23a)]('settings.'+_0x367ba4,_0xaf56c1)[_0x563083(0x20e)](),settings=getSettings(),io['to'](_0x563083(0x103))[_0x563083(0x1bb)]('settings',cleanSettings());}function storeSecure(_0x4efcb7){const _0x15039a=_0x4d28bd;dbSecure['get'](_0x15039a(0x1aa))[_0x15039a(0x2b4)](_0x4efcb7)[_0x15039a(0x20e)](),secure=_0x4efcb7;}function addBlacklist(_0x23abc0){const _0x25e7a5=_0x4d28bd;cleanBlacklist();let _0x8a5c4b;devices[_0x23abc0][_0x25e7a5(0x173)]?_0x8a5c4b=Math['max'](devices[_0x23abc0][_0x25e7a5(0x173)]['expiry'],loginExpiry):_0x8a5c4b=loginExpiry,dbSecure['get'](_0x25e7a5(0x223))[_0x25e7a5(0x2b4)]({'expiry':new Date()[_0x25e7a5(0x291)]()+_0x8a5c4b*0x3c*0x3e8,'token':devices[_0x23abc0][_0x25e7a5(0x1e6)][_0x25e7a5(0x267)]})[_0x25e7a5(0x20e)](),blacklist=dbSecure['get'](_0x25e7a5(0x223))[_0x25e7a5(0x115)]();}function cleanBlacklist(){const _0x4bd346=_0x4d28bd;let _0x201b8a=dbSecure['get'](_0x4bd346(0x223))[_0x4bd346(0x1e8)]()[_0x4bd346(0x115)](),_0xec5d63=new Date()[_0x4bd346(0x291)]();_0x201b8a[_0x4bd346(0x246)](_0x1e66d7=>{const _0x22f194=_0x4bd346;_0x1e66d7[_0x22f194(0x1b2)]<_0xec5d63&&dbSecure[_0x22f194(0x12d)]('blacklist')[_0x22f194(0x256)]({'expiry':_0x1e66d7[_0x22f194(0x1b2)]})['write']();});}function initStates(){const _0x9f4512=_0x4d28bd;let _0x132acf=getConfiguration();_0x132acf[_0x9f4512(0x246)](_0x315f2c=>{const _0x226f9b=_0x9f4512;_0x315f2c['live']=_0x226f9b(0x270);}),storeConfiguration(_0x132acf);}async function generateKeys(){const _0x5d0ff4=_0x4d28bd,_0x389756=forge[_0x5d0ff4(0x226)][_0x5d0ff4(0x27a)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x460bdf=forge[_0x5d0ff4(0x226)][_0x5d0ff4(0x263)](_0x389756['privateKey']),_0x214f27=forge[_0x5d0ff4(0x226)][_0x5d0ff4(0x29a)](_0x389756[_0x5d0ff4(0x2c4)]);return{'privateKey':_0x460bdf,'publicKey':_0x214f27};}async function oneTimeMigration(){const _0x1fc2cc=_0x4d28bd;let _0x2e7be9=getSettings(),_0x89eda2=![];!_0x2e7be9[_0x1fc2cc(0x1a9)](_0x1fc2cc(0xfa))&&(_0x2e7be9['lastmsgtelegram']=0x0,_0x89eda2=!![]);!_0x2e7be9[_0x1fc2cc(0x1a9)](_0x1fc2cc(0x183))&&(_0x2e7be9['lastmsgemitted']=0x0,_0x89eda2=!![]);!_0x2e7be9[_0x1fc2cc(0x1a9)](_0x1fc2cc(0x282))&&(_0x2e7be9[_0x1fc2cc(0x282)]='0.0.0',_0x89eda2=!![]);!_0x2e7be9['hasOwnProperty']('onepagemode')&&(_0x2e7be9[_0x1fc2cc(0x275)]=![],_0x89eda2=!![]);!_0x2e7be9[_0x1fc2cc(0x1a9)](_0x1fc2cc(0x221))&&(_0x2e7be9[_0x1fc2cc(0x221)]='',_0x89eda2=!![]);if(_0x89eda2)storeSettings(_0x2e7be9);try{fs[_0x1fc2cc(0x1bd)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x5e354f=>{const _0x4fd1c6=_0x1fc2cc;if(!_0x5e354f['isDirectory']()){if(!_0x5e354f['name']['startsWith']('backup-full@'))fs[_0x4fd1c6(0x165)](configbackuppath+_0x5e354f['name']);}else fs[_0x4fd1c6(0x10c)](configbackuppath+_0x5e354f[_0x4fd1c6(0x289)],{'recursive':!![]});});}catch(_0x43c64a){logger['debug'](_0x1fc2cc(0x110),_0x43c64a);}}function storeConfiguration(_0x362ded){const _0x54b3b2=_0x4d28bd;dbConfig[_0x54b3b2(0x12d)]('bots')[_0x54b3b2(0x256)]()[_0x54b3b2(0x20e)](),dbConfig[_0x54b3b2(0x12d)](_0x54b3b2(0x2df))[_0x54b3b2(0x2b4)](..._0x362ded)[_0x54b3b2(0x20e)](),config=_0x362ded;}async function resetPassword(){const _0x4e18bb=_0x4d28bd;if(tgBot&&settings[_0x4e18bb(0x1dc)]){const _0x3882b7=Markup[_0x4e18bb(0x1ae)]([Markup['button']['callback'](_0x4e18bb(0x1c4),_0x4e18bb(0x2c6)),Markup[_0x4e18bb(0xe4)][_0x4e18bb(0x2e1)]('no',_0x4e18bb(0x1e2))]);await sendTelegram(settings[_0x4e18bb(0x1dc)],_0x4e18bb(0xd3),_0x3882b7),tgBot[_0x4e18bb(0xda)](/resetpw_(.+)/,async _0xd4fabe=>{const _0x319c76=_0x4e18bb,_0x132de4=_0xd4fabe[_0x319c76(0x1cc)][0x1];_0xd4fabe[_0x319c76(0x12a)]();if(_0x132de4!='no'){const _0x34c3e5=0xf,_0x539c49=_0x319c76(0x1cb),_0x26de60=Array[_0x319c76(0x15f)](crypto[_0x319c76(0x185)](new Uint32Array(_0x34c3e5)))['map'](_0x39b177=>_0x539c49[_0x39b177%_0x539c49['length']])['join'](''),_0xa81e42=bcrypt['hashSync'](_0x26de60,saltRounds);storeSettings({'bbPassword':_0xa81e42}),await sendTelegram(_0xd4fabe['chat']['id'],_0x319c76(0x294)+_0x26de60,{'parse_mode':_0x319c76(0x244)});}else await sendTelegram(_0xd4fabe['chat']['id'],_0x319c76(0x15e));});}}async function confirmRestore(_0x127e13,_0x53efb6){const _0x120821=_0x4d28bd;io['to'](_0x120821(0x103))[_0x120821(0x1bb)](_0x120821(0x28d),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','success');if(tgBot&&settings[_0x120821(0x1dc)]){const _0x53d8d8=uuidRandom();tmpStorage[_0x53d8d8]={'path':_0x127e13,'filename':_0x53efb6};const _0x4fd3b5=Markup[_0x120821(0x1ae)]([Markup[_0x120821(0xe4)]['callback'](_0x120821(0x1c4),_0x120821(0x2d0)+_0x53d8d8),Markup[_0x120821(0xe4)][_0x120821(0x2e1)]('no','restore_no_'+_0x53d8d8)]);await sendTelegram(settings[_0x120821(0x1dc)],_0x120821(0x231),_0x4fd3b5),tgBot[_0x120821(0xda)](/restore_(.+)_(.+)/,async _0x41b916=>{const _0x369f10=_0x120821,_0x18e957=_0x41b916[_0x369f10(0x1cc)][0x1],_0x3ab176=_0x41b916[_0x369f10(0x1cc)][0x2],{path:_0x8e6698,filename:_0x31f135}=tmpStorage[_0x3ab176];delete tmpStorage[_0x3ab176],_0x41b916[_0x369f10(0x12a)](),_0x18e957==_0x369f10(0x1c4)?(logger['debug'](_0x369f10(0x1c3)),await sendTelegram(_0x41b916[_0x369f10(0xdd)]['id'],_0x369f10(0x2d6),{'parse_mode':_0x369f10(0x244)}),unzipFile(_0x8e6698,_0x31f135)):(logger[_0x369f10(0x1ec)](_0x369f10(0x236)),await sendTelegram(_0x41b916['chat']['id'],_0x369f10(0x236)));});}}function getServerTime(){const _0x4800b5=_0x4d28bd,_0x2cb503=new Date();return _0x2cb503[_0x4800b5(0x136)]()+'/'+(_0x2cb503[_0x4800b5(0x1b6)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2cb503[_0x4800b5(0x11a)]()[_0x4800b5(0x180)]()[_0x4800b5(0x26b)](0x2,'0')+'\x20'+_0x2cb503[_0x4800b5(0xe2)]()[_0x4800b5(0x180)]()[_0x4800b5(0x26b)](0x2,'0')+':'+_0x2cb503['getMinutes']()['toString']()[_0x4800b5(0x26b)](0x2,'0')+':'+_0x2cb503[_0x4800b5(0x10f)]()[_0x4800b5(0x180)]()[_0x4800b5(0x26b)](0x2,'0');}function getTimeStamp(){const _0x5e58d6=_0x4d28bd,_0x914d1e=shiftedTime();return _0x914d1e['getFullYear']()+'/'+(_0x914d1e[_0x5e58d6(0x1b6)]()+0x1)[_0x5e58d6(0x180)]()[_0x5e58d6(0x26b)](0x2,'0')+'/'+_0x914d1e['getDate']()[_0x5e58d6(0x180)]()[_0x5e58d6(0x26b)](0x2,'0')+'\x20'+_0x914d1e[_0x5e58d6(0xe2)]()[_0x5e58d6(0x180)]()['padStart'](0x2,'0')+':'+_0x914d1e['getMinutes']()[_0x5e58d6(0x180)]()[_0x5e58d6(0x26b)](0x2,'0')+':'+_0x914d1e[_0x5e58d6(0x10f)]()['toString']()[_0x5e58d6(0x26b)](0x2,'0');}function getCleanTimeStamp(){const _0x35c631=_0x4d28bd,_0x5b63c5=shiftedTime();return _0x5b63c5[_0x35c631(0x136)]()+(_0x5b63c5['getMonth']()+0x1)[_0x35c631(0x180)]()[_0x35c631(0x26b)](0x2,'0')+_0x5b63c5[_0x35c631(0x11a)]()[_0x35c631(0x180)]()[_0x35c631(0x26b)](0x2,'0')+'-'+_0x5b63c5[_0x35c631(0xe2)]()[_0x35c631(0x180)]()[_0x35c631(0x26b)](0x2,'0')+_0x5b63c5[_0x35c631(0x119)]()[_0x35c631(0x180)]()['padStart'](0x2,'0')+_0x5b63c5[_0x35c631(0x10f)]()[_0x35c631(0x180)]()[_0x35c631(0x26b)](0x2,'0');}function shiftedTime(){const _0x2a05fb=_0x4d28bd,_0x1b186c=new Date();let _0x530ef0=_0x1b186c;if(settings['timeshift']&&settings[_0x2a05fb(0x25e)]!==0x0)_0x530ef0=fns[_0x2a05fb(0xd9)](_0x1b186c,{'hours':settings['timeshift']});return _0x530ef0;}async function startScheduler(){const _0x9edeb3=_0x4d28bd,_0x163ac9=new Date()[_0x9edeb3(0x1d0)](),_0x46cdb6=shiftedTime()['getHours']();_0x46cdb6==0x4&&backupConfigFiles(),_0x46cdb6==0x0&&rotateLogFiles(),_0x163ac9%0x6==0x0&&triggerAnalytics(),_0x163ac9%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x3565e1){const _0x516e04=_0x4d28bd;logger[_0x516e04(0x1ec)](_0x516e04(0x21d)+_0x3565e1);const _0xc9ebaf=getBotsWithMode();_0xc9ebaf[_0x516e04(0x132)]>0x0?confirmRestore(configbackuppath,_0x3565e1):unzipFile(configbackuppath,_0x3565e1);}async function getBackupFiles(_0x2e431f=null){const _0x3fb906=_0x4d28bd;let _0x522cfa=[],_0x520b9a=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x520b9a['sort']((_0x39c14d,_0x323755)=>_0x39c14d[_0x3fb906(0x289)]<_0x323755[_0x3fb906(0x289)]?0x1:_0x323755[_0x3fb906(0x289)]<_0x39c14d[_0x3fb906(0x289)]?-0x1:0x0),_0x520b9a[_0x3fb906(0x246)](_0x4e8dbb=>{const _0xd657f5=_0x3fb906;if(!_0x4e8dbb[_0xd657f5(0x22d)]()&&_0x4e8dbb[_0xd657f5(0x289)][_0xd657f5(0x1bc)](_0xd657f5(0x1cf))&&_0x4e8dbb[_0xd657f5(0x289)][_0xd657f5(0x146)](_0xd657f5(0x27e))){const _0x1581fb=formatDate(fs[_0xd657f5(0x219)](configbackuppath+_0x4e8dbb[_0xd657f5(0x289)])['mtime']);_0x522cfa[_0xd657f5(0x2b4)]({'name':_0x4e8dbb[_0xd657f5(0x289)],'mtime':_0x1581fb});}});if(_0x2e431f)io['to'](_0x2e431f)[_0x3fb906(0x1bb)](_0x3fb906(0x126),_0x522cfa);else return _0x522cfa;}async function backupConfigFiles(){const _0x2f140f=_0x4d28bd;await zipFiles('backup-full');const _0x12389b=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x2f140f(0x1e1),configbackuppath+(_0x2f140f(0x1cf)+_0x12389b+_0x2f140f(0x27e)));let _0x5ed5f6=fs[_0x2f140f(0x1bd)](configbackuppath,{'withFileTypes':!![]});_0x5ed5f6['sort']((_0x20f661,_0x5938df)=>_0x20f661[_0x2f140f(0x289)]<_0x5938df['name']?0x1:_0x5938df['name']<_0x20f661['name']?-0x1:0x0),_0x5ed5f6[_0x2f140f(0x132)]>maxBackups&&fs[_0x2f140f(0x165)](configbackuppath+_0x5ed5f6[_0x5ed5f6[_0x2f140f(0x132)]-0x1]['name']);}function rotateLogFiles(){const _0x18b17f=_0x4d28bd,_0x11d38b=fs[_0x18b17f(0x219)](logspath+_0x18b17f(0x1b4)),_0x532b05=_0x11d38b[_0x18b17f(0x11b)]/0x400;if(_0x532b05>0x64){let _0x8b6820=fs[_0x18b17f(0x1bd)](logspath,{'withFileTypes':!![]});_0x8b6820['sort']((_0x236f6c,_0x27ac9e)=>_0x236f6c[_0x18b17f(0x289)]<_0x27ac9e['name']?0x1:_0x27ac9e[_0x18b17f(0x289)]<_0x236f6c[_0x18b17f(0x289)]?-0x1:0x0),_0x8b6820[_0x18b17f(0x246)](_0x40b633=>{const _0x4cd149=_0x18b17f;if(_0x40b633[_0x4cd149(0x289)]==_0x4cd149(0x225))fs['copyFileSync'](logspath+_0x40b633[_0x4cd149(0x289)],logspath+_0x4cd149(0x1de));if(_0x40b633['name']==_0x4cd149(0x2ba))fs[_0x4cd149(0x1ff)](logspath+_0x40b633[_0x4cd149(0x289)],logspath+_0x4cd149(0x225));_0x40b633[_0x4cd149(0x289)]==_0x4cd149(0x1b4)&&(fs['copyFileSync'](logspath+_0x40b633[_0x4cd149(0x289)],logspath+_0x4cd149(0x2ba)),fs['writeFileSync'](logspath+_0x40b633[_0x4cd149(0x289)],''));});}}async function zipFiles(_0x456c58){const _0x18e590=_0x4d28bd;let _0x244dfc;if(_0x456c58==_0x18e590(0xd2))_0x244dfc=logspath;if(_0x456c58==_0x18e590(0x232))_0x244dfc=configpath;if(_0x456c58==_0x18e590(0x18d))_0x244dfc=configpath;let _0x323004=fs['readdirSync'](_0x244dfc,{'withFileTypes':!![]});const _0x3fc61b=new JSZip();_0x323004[_0x18e590(0x246)](_0x248ad3=>{const _0x208f9b=_0x18e590;if(!_0x248ad3[_0x208f9b(0x22d)]()){let _0x134321=fs[_0x208f9b(0x190)](_0x244dfc+_0x248ad3[_0x208f9b(0x289)]);if(_0x456c58==_0x208f9b(0x232)){const _0x44ef97=/^bot-[0-9]{3}-config.json$/,_0x22aed9=_0x44ef97[_0x208f9b(0x102)](_0x248ad3[_0x208f9b(0x289)]);if(_0x22aed9){const _0x2ae2c0=JSON[_0x208f9b(0x196)](_0x134321);if(_0x2ae2c0[_0x208f9b(0x228)][0x0]){_0x2ae2c0['bot'][0x0][_0x208f9b(0x1d4)]='***',_0x2ae2c0[_0x208f9b(0x228)][0x0][_0x208f9b(0x2d3)]=_0x208f9b(0x2b7);if(_0x2ae2c0[_0x208f9b(0x228)][0x0][_0x208f9b(0x1d9)])_0x2ae2c0[_0x208f9b(0x228)][0x0][_0x208f9b(0x1d9)]=_0x208f9b(0x2b7);}_0x134321=JSON[_0x208f9b(0x1d6)](_0x2ae2c0,null,0x2);}if(_0x248ad3['name']=='bb-settings.json'){const _0x444601=JSON[_0x208f9b(0x196)](_0x134321);if(_0x444601[_0x208f9b(0xd7)]['loginRequired'])_0x444601['settings'][_0x208f9b(0x2a4)]=![];if(_0x444601[_0x208f9b(0xd7)][_0x208f9b(0x2d8)])_0x444601[_0x208f9b(0xd7)]['bbPassword']='***';if(_0x444601[_0x208f9b(0xd7)]['telegramToken'])_0x444601['settings'][_0x208f9b(0x1ed)]=_0x208f9b(0x2b7);if(_0x444601[_0x208f9b(0xd7)][_0x208f9b(0x1dc)])_0x444601['settings'][_0x208f9b(0x1dc)]=null;if(_0x444601[_0x208f9b(0xd7)][_0x208f9b(0x221)])_0x444601[_0x208f9b(0xd7)][_0x208f9b(0x221)]=_0x208f9b(0x2b7);_0x134321=JSON[_0x208f9b(0x1d6)](_0x444601,null,0x2);}if(_0x248ad3[_0x208f9b(0x289)]!=_0x208f9b(0x285))_0x3fc61b['file'](_0x248ad3[_0x208f9b(0x289)],_0x134321);}else _0x3fc61b[_0x208f9b(0x2ce)](_0x248ad3[_0x208f9b(0x289)],_0x134321);}});const _0x13e543=await _0x3fc61b[_0x18e590(0x151)]({'type':_0x18e590(0xe5),'base64':![],'compression':_0x18e590(0x123)});fs[_0x18e590(0x1ce)](zippath+(_0x456c58+'.zip'),_0x13e543,'binary');}async function unzipFile(_0x579504,_0x1c7380){const _0x9bfa3e=_0x4d28bd;fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x181eb3=>{const _0x1d90a7=_0x4b42;if(!_0x181eb3['isDirectory']())fs[_0x1d90a7(0x10c)](configpath+_0x181eb3[_0x1d90a7(0x289)]);});const _0x13216d=fs[_0x9bfa3e(0x190)](_0x579504+_0x1c7380,_0x9bfa3e(0x2cb)),_0x54ba14=await JSZip[_0x9bfa3e(0x1a8)](_0x13216d,{'base64':![],'checkCRC32':!![]});for(const _0x3aa612 of Object[_0x9bfa3e(0x16c)](_0x54ba14[_0x9bfa3e(0x27f)])){const _0x369fd1=_0x54ba14[_0x9bfa3e(0x27f)][_0x3aa612],_0x1c276d=await _0x369fd1[_0x9bfa3e(0x1e4)](_0x9bfa3e(0xe5));fs[_0x9bfa3e(0x1ce)](configpath+_0x369fd1[_0x9bfa3e(0x289)],_0x1c276d);}fs['readdirSync'](temppath,{'withFileTypes':!![]})[_0x9bfa3e(0x246)](_0x49a09c=>{const _0x3bd2e7=_0x9bfa3e;if(!_0x49a09c[_0x3bd2e7(0x22d)]())fs[_0x3bd2e7(0x10c)](temppath+_0x49a09c['name']);}),logger[_0x9bfa3e(0x1ec)](_0x9bfa3e(0x2ab)),process[_0x9bfa3e(0x186)]({'restore':!![]},_0x296b81=>{});}async function getPublicIp(){const _0x358a0c=_0x4d28bd;try{const _0x44afc8=await axios[_0x358a0c(0x12d)]('https://api.ipify.org?format=json');publicip=_0x44afc8[_0x358a0c(0x13f)]['ip'];}catch(_0x32b87f){}}async function triggerAnalytics(){const _0x1e5b66=_0x4d28bd;if(!publicip)await getPublicIp();const _0x49f104=getBotsWithMode();let _0x5b17b2=0x0;_0x49f104[_0x1e5b66(0x246)](_0x1e6384=>{const _0x2891db=_0x1e5b66;if(_0x1e6384[_0x2891db(0x216)]===_0x2891db(0x21a))_0x5b17b2++;});const _0x5c93d1=getBotExchanges();mixpanel[_0x1e5b66(0x1f5)]('Server',{'distinct_id':settings[_0x1e5b66(0x181)],'ip':publicip,'version':serverversion,'numbots':_0x49f104['length'],'numbotsenabled':_0x5b17b2,'exchanges':_0x5c93d1,'environment':environment});}async function getMessages(){const _0x4a8164=_0x4d28bd,_0x1bcc0a='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5e24a8=new GraphQLClient(_0x1bcc0a),_0x4b2789={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x51b3f3=serverversion[_0x4a8164(0x241)]('.'),_0x2e22d1=_0x51b3f3[0x0]+'.'+_0x51b3f3[0x1],_0x41fbe5=Math[_0x4a8164(0x18e)](settings['lastmsgtelegram'],settings[_0x4a8164(0x183)]),_0x2a1c17={'last':parseInt(_0x41fbe5),'bbm':_0x2e22d1},_0x1e5540=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3d83bb;try{_0x3d83bb=await _0x5e24a8['request'](_0x1e5540,_0x2a1c17,_0x4b2789);}catch(_0x50bc93){}if(_0x3d83bb&&_0x3d83bb['messages']){let _0x2358be=settings[_0x4a8164(0xfa)];newMessages=[];for(const _0x3572da of _0x3d83bb[_0x4a8164(0x10e)]){newMessages[_0x4a8164(0x2b4)](_0x3572da);let _0x797efb=![];_0x3572da['bbvNew']&&(updateSetting(_0x4a8164(0x282),_0x3572da['bbvNew']),_0x797efb=isNewerVersion(serverversion,_0x3572da[_0x4a8164(0xd8)])||serverversion==_0x3572da['bbvNew']);if(!_0x797efb&&_0x3572da[_0x4a8164(0x155)]>_0x2358be){if(_0x3572da[_0x4a8164(0x260)]===_0x4a8164(0x296)||serverversion[_0x4a8164(0x1bc)](_0x3572da[_0x4a8164(0x260)])){let _0x513f0f=''+_0x3572da[_0x4a8164(0x2a5)]+'\x0a\x0a'+_0x3572da[_0x4a8164(0x299)];const _0x1e90bd=await sendTelegramMsg(toTelegramMarkdown(_0x513f0f),'Markdown');if(_0x1e90bd)_0x2358be=_0x3572da[_0x4a8164(0x155)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x4a8164(0xfa),_0x2358be),emitMessages();}}function emitMessages(){const _0x2a650b=_0x4d28bd,_0x334e80=settings[_0x2a650b(0x183)];let _0x2780ea=[];newMessages[_0x2a650b(0x246)](_0xe9c85=>{const _0xc62bb0=_0x2a650b;_0xe9c85['number']>_0x334e80&&_0x2780ea[_0xc62bb0(0x2b4)](_0xe9c85);}),_0x2780ea[_0x2a650b(0x132)]>0x0&&getAllClients()['forEach'](_0x2f09e9=>{const _0x4094d3=_0x2a650b;getSocket(_0x2f09e9['id'])[_0x4094d3(0x1bb)]('message',_0x2780ea);});}function confirmMessage(_0x351f5c){updateSetting('lastmsgemitted',Number(_0x351f5c));}function isNewerVersion(_0x131b88,_0x349e6f){const _0x1b13c6=_0x4d28bd,_0x4b451c=_0x349e6f['split']('.'),_0x235637=_0x131b88[_0x1b13c6(0x241)]('.');for(var _0xd2e37e=0x0;_0xd2e37e<_0x235637['length'];_0xd2e37e++){const _0x4aa53d=~~_0x235637[_0xd2e37e],_0x472b08=~~_0x4b451c[_0xd2e37e];if(_0x4aa53d>_0x472b08)return!![];if(_0x4aa53d<_0x472b08)return![];}return![];}function toTelegramMarkdown(_0x134850){const _0x4459dc=_0x4d28bd,_0x22993b=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1c5146=/\*{2}(.+?)\*{2}/gim;return _0x134850=_0x134850[_0x4459dc(0x21c)](_0x22993b,_0x4459dc(0x224))[_0x4459dc(0x21c)](_0x1c5146,'*$1*'),_0x134850;}async function validateConfigFile(){const _0x3e0337=_0x4d28bd,_0x135062=dbConfig[_0x3e0337(0x12d)]('bots')['sortBy'](_0x3e0337(0x15d))['value']()||[];if(_0x135062[_0x3e0337(0x132)]==0x0){let _0x535c9e=0x0,_0x3a72e5=[];const _0x4c18a0=/^bot-([0-9]{3})-config.json$/,_0x2aca41=fs[_0x3e0337(0x1bd)](configpath);_0x2aca41[_0x3e0337(0x246)](_0x36d1ef=>{const _0x40140d=_0x3e0337,_0x29aaf0=_0x4c18a0[_0x40140d(0x13b)](_0x36d1ef);if(_0x29aaf0){const _0x277da1=_0x29aaf0[0x1];let _0x1e3612=getBotAttributes(_0x277da1);_0x3a72e5[_0x40140d(0x2b4)]({'botID':_0x277da1,'botname':_0x1e3612[_0x40140d(0x17d)],'status':_0x40140d(0x152),'live':'stopped'}),_0x535c9e++;}}),_0x535c9e!=0x0&&(dbConfig[_0x3e0337(0x12d)](_0x3e0337(0x2df))[_0x3e0337(0x20c)](_0x3a72e5)[_0x3e0337(0x20e)](),config=_0x3a72e5,restoredConfigFile=_0x535c9e);}}async function restoreConfigNotify(_0x1b3fbc){const _0x463c3a=_0x4d28bd;let _0x5d2380;if(restoredConfigFile==0x1)_0x5d2380=_0x463c3a(0x207);else _0x5d2380='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x1b3fbc)io['to']('botmanager')[_0x463c3a(0x1bb)](_0x463c3a(0x28d),_0x5d2380);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x463c3a(0x170)](_0x5d2380),logger[_0x463c3a(0x170)](_0x463c3a(0x20a)),logger[_0x463c3a(0x170)]('');if(tgBot&&settings[_0x463c3a(0x1dc)]&&settings['telegramEvents']!=_0x463c3a(0x16d))await sendTelegram(settings[_0x463c3a(0x1dc)],_0x463c3a(0x10b)+_0x5d2380);}}function decryptRSA(_0x51cc53,_0x2f3ce5){const _0xd50a6=_0x4d28bd,_0x100f1a=forge[_0xd50a6(0x226)][_0xd50a6(0x250)](_0x51cc53),_0x2aac0a=_0x100f1a[_0xd50a6(0x2c8)](forge[_0xd50a6(0x197)]['decode64'](_0x2f3ce5),'RSA-OAEP',{'md':forge['md'][_0xd50a6(0x140)][_0xd50a6(0xd6)](),'mgf1':{'md':forge['md'][_0xd50a6(0x140)][_0xd50a6(0xd6)]()}});return _0x2aac0a;}function validateCredentials(_0x4f229c,_0x549c0a){const _0x562c73=_0x4d28bd;if(_0x4f229c[_0x562c73(0x220)]==settings[_0x562c73(0x191)]&&bcrypt[_0x562c73(0x206)](_0x4f229c[_0x562c73(0x1e9)],settings['bbPassword'])){if(settings[_0x562c73(0x1c7)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x520e24=generateLoginToken(_0x549c0a);return{'allow':!![],'reason':_0x562c73(0x27d),'token':_0x520e24};}}else return{'allow':![],'reason':_0x562c73(0x1da),'token':null};}function refreshToken(_0x28a6aa){const _0x251116=_0x4d28bd,_0x361586=generateLoginToken(_0x28a6aa);return{'allow':!![],'reason':_0x251116(0x27d),'token':_0x361586};}function validateAccess(_0x506cf4,_0x203f40,_0x34883e){const _0x5e983c=_0x4d28bd,_0x60bd88=_0x34883e?_0x34883e:devices[_0x203f40]['ip'];let _0x1c6f15;const _0x2e1c2e=_0x53dcda=>{const _0x288df8=_0x4b42;if(settings[_0x288df8(0x2a4)]){if(settings[_0x288df8(0x1c7)]){if(telegram2FaApproved(_0x203f40)){const _0x2c0e46=generateLoginToken(_0x203f40);return{'allow':!![],'reason':_0x288df8(0x17f),'token':_0x2c0e46};}else return{'allow':![],'reason':_0x288df8(0x1ba),'token':null};}else return _0x1c6f15=validToken(_0x53dcda,_0x203f40),_0x1c6f15['hasOwnProperty'](_0x288df8(0x269))?{'allow':!![],'reason':_0x288df8(0xdf),'token':_0x53dcda}:{'allow':![],'reason':_0x288df8(0x1ba),'token':null};}else return{'allow':!![],'reason':_0x288df8(0x203),'token':null};};if(settings[_0x5e983c(0x29e)]){let _0x593330=[...settings[_0x5e983c(0x229)],_0x5e983c(0x26a),_0x5e983c(0x212),_0x5e983c(0x283)];if(_0x593330['includes'](_0x60bd88))return _0x2e1c2e(_0x506cf4);else{_0x1c6f15=validToken(_0x506cf4,_0x203f40);if(_0x1c6f15[_0x5e983c(0x1a9)](_0x5e983c(0x269)))return _0x2e1c2e(_0x506cf4);else{if(telegramIpApproved(_0x203f40)){const _0x26fd54=generateToken(_0x203f40);return _0x1c6f15=_0x2e1c2e(_0x506cf4),_0x1c6f15[_0x5e983c(0xe7)]?{'allow':!![],'reason':_0x5e983c(0x12e),'token':_0x26fd54}:_0x1c6f15;}else return settings[_0x5e983c(0xe8)]?{'allow':![],'reason':_0x5e983c(0x239),'token':null}:{'allow':![],'reason':_0x5e983c(0x21e),'token':null};}}}else return _0x2e1c2e(_0x506cf4);}function timelyDecrypt(_0x59c08c,_0x2d54e1,_0x3e771a='@'){const _0x2c3a92=_0x4d28bd;if(_0x59c08c)try{const _0x14f9f0=decryptRSA(secure[_0x2c3a92(0x1f6)],_0x59c08c),_0x58ab2e=_0x14f9f0[_0x2c3a92(0x241)](_0x3e771a)[0x0],_0x110e5c=_0x14f9f0[_0x2c3a92(0x241)](_0x3e771a)[0x1],_0x14bf61=new Date()[_0x2c3a92(0x291)]();if(_0x2d54e1){if(_0x14bf61-_0x110e5c<maxSecretAge*0x3e8)return _0x58ab2e;else return![];}else return _0x58ab2e;}catch(_0x6d5ebb){return![];}else return![];}const validToken=(_0x145ecc,_0xd0b47f)=>{const _0x5c2c87=_0x4d28bd,_0x323e21=devices[_0xd0b47f]['ip'];if(!_0x145ecc)return{'error':_0x5c2c87(0x116)};for(let _0x80e052 of blacklist){if(_0x80e052['token']==_0x145ecc)return{'error':_0x5c2c87(0x287)};}let _0x2a977e;try{_0x2a977e=jwt[_0x5c2c87(0x28c)](_0x145ecc,secure[_0x5c2c87(0x2bc)]+_0xd0b47f);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x268))&&!_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x220))||!_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x2aa)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x2a977e[_0x5c2c87(0x1a9)]('username')&&_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x268))){const {clientip:_0xe06f07}=_0x2a977e;return _0x323e21==_0xe06f07?{'success':_0x5c2c87(0x26c)}:{'error':_0x5c2c87(0x138)};}else{if(_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x220))&&_0x2a977e[_0x5c2c87(0x1a9)](_0x5c2c87(0x268))){const {username:_0x57ad79,clientip:_0x46c14f}=_0x2a977e;return settings[_0x5c2c87(0x191)]==_0x57ad79&&_0x323e21==_0x46c14f?{'success':_0x5c2c87(0x26c)}:{'error':_0x5c2c87(0x2bb)};}}},generateLoginToken=_0x301bcb=>{const _0x3a7576=_0x4d28bd;if(_0x301bcb){const _0x3a6696=devices[_0x301bcb]['ip'];return jwt[_0x3a7576(0xf2)]({'username':settings['bbUsername'],'clientip':_0x3a6696},secure['secret']+_0x301bcb,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x1cf7a3=>{const _0x3714dc=_0x4d28bd;if(_0x1cf7a3){const _0x14c35b=devices[_0x1cf7a3]['ip'];return jwt[_0x3714dc(0xf2)]({'clientip':_0x14c35b},secure[_0x3714dc(0x2bc)]+_0x1cf7a3,{'expiresIn':devices[_0x1cf7a3][_0x3714dc(0x173)][_0x3714dc(0x1b2)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x25b943=>{const _0x110682=_0x4d28bd;let _0x57bdb1=![];return devices[_0x25b943][_0x110682(0x173)]&&devices[_0x25b943][_0x110682(0x173)][_0x110682(0x1b2)]!=_0x110682(0x2b0)&&(_0x57bdb1=devices[_0x25b943][_0x110682(0x173)][_0x110682(0x268)]==devices[_0x25b943]['ip']&&new Date()['getTime']()-devices[_0x25b943][_0x110682(0x173)][_0x110682(0x182)]<devices[_0x25b943][_0x110682(0x173)]['expiry']*0x3c*0x3e8),_0x57bdb1;},telegram2FaApproved=_0x2bca98=>{const _0x58eee5=_0x4d28bd;let _0xd316f3=![];return devices[_0x2bca98][_0x58eee5(0x278)]&&devices[_0x2bca98][_0x58eee5(0x278)][_0x58eee5(0x1b2)]!='reject'&&(_0xd316f3=devices[_0x2bca98][_0x58eee5(0x278)][_0x58eee5(0x268)]==devices[_0x2bca98]['ip']&&new Date()[_0x58eee5(0x291)]()-devices[_0x2bca98][_0x58eee5(0x278)]['timestamp']<devices[_0x2bca98]['telegram2FaApproval'][_0x58eee5(0x1b2)]*0x3c*0x3e8),_0xd316f3;},normalizeIP=_0xbce450=>{const _0x2df2a3=_0x4d28bd;let _0x37f1a6=null,_0x48c93a=null;if(ipaddr[_0x2df2a3(0x243)](_0xbce450)){const _0x31a970=ipaddr['parse'](_0xbce450);_0x31a970[_0x2df2a3(0x14e)]()===_0x2df2a3(0x137)?(_0x31a970[_0x2df2a3(0x142)]()&&(_0x37f1a6=_0x31a970[_0x2df2a3(0x202)]()['toString']()),_0x48c93a=_0x31a970[_0x2df2a3(0x180)]()):(_0x37f1a6=_0x31a970[_0x2df2a3(0x180)](),_0x48c93a=_0x31a970[_0x2df2a3(0x2c2)]()[_0x2df2a3(0x180)]());}return{'show':_0x37f1a6?_0x37f1a6:_0x48c93a,'store':_0x48c93a};};function formatDate(_0x36fbf1){const _0x3298bd=_0x4d28bd;return _0x36fbf1[_0x3298bd(0x136)]()+'/'+(_0x36fbf1[_0x3298bd(0x1b6)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x36fbf1[_0x3298bd(0x11a)]()[_0x3298bd(0x180)]()['padStart'](0x2,'0')+'\x20'+_0x36fbf1[_0x3298bd(0xe2)]()[_0x3298bd(0x180)]()['padStart'](0x2,'0')+':'+_0x36fbf1[_0x3298bd(0x119)]()['toString']()[_0x3298bd(0x26b)](0x2,'0')+':'+_0x36fbf1['getSeconds']()[_0x3298bd(0x180)]()[_0x3298bd(0x26b)](0x2,'0');}function sleep(_0x5d9ea3){return new Promise(_0x40093d=>setTimeout(_0x40093d,_0x5d9ea3));}