function _0x1653(_0x203e71,_0xd3ff68){const _0x3a1407=_0x7594();return _0x1653=function(_0x4213ee,_0x2b100c){_0x4213ee=_0x4213ee-0x10e;let _0x759484=_0x3a1407[_0x4213ee];return _0x759484;},_0x1653(_0x203e71,_0xd3ff68);}const _0x441739=_0x1653;(function(_0x400622,_0x31dfa4){const _0x5dcdf7=_0x1653,_0x46c9d5=_0x400622();while(!![]){try{const _0x437a04=parseInt(_0x5dcdf7(0x114))/0x1*(parseInt(_0x5dcdf7(0x14d))/0x2)+parseInt(_0x5dcdf7(0x10e))/0x3*(parseInt(_0x5dcdf7(0x25b))/0x4)+-parseInt(_0x5dcdf7(0x125))/0x5+-parseInt(_0x5dcdf7(0x1df))/0x6+-parseInt(_0x5dcdf7(0x257))/0x7+parseInt(_0x5dcdf7(0x130))/0x8+-parseInt(_0x5dcdf7(0x1da))/0x9*(parseInt(_0x5dcdf7(0x13c))/0xa);if(_0x437a04===_0x31dfa4)break;else _0x46c9d5['push'](_0x46c9d5['shift']());}catch(_0x47b492){_0x46c9d5['push'](_0x46c9d5['shift']());}}}(_0x7594,0x7a257));const _0x2b100c=function(){let _0x194c35=!![];return function(_0x4274ff,_0x4c8a88){const _0x3981c3=_0x194c35?function(){const _0x517281=_0x1653;if(_0x4c8a88){const _0x18b54f=_0x4c8a88[_0x517281(0x18d)](_0x4274ff,arguments);return _0x4c8a88=null,_0x18b54f;}}:function(){};return _0x194c35=![],_0x3981c3;};}(),_0x4213ee=_0x2b100c(this,function(){const _0x4451f7=_0x1653;return _0x4213ee[_0x4451f7(0x256)]()[_0x4451f7(0x20b)](_0x4451f7(0x1e7))[_0x4451f7(0x256)]()[_0x4451f7(0x163)](_0x4213ee)['search'](_0x4451f7(0x1e7));});_0x4213ee();'use strict';process[_0x441739(0x1e0)][_0x441739(0x1d3)]=0x1;const childProcess=require(_0x441739(0x224)),FileSync=require(_0x441739(0x138)),fs=require('fs'),fns=require(_0x441739(0x167)),low=require(_0x441739(0x1b5)),path=require('path'),crypto=require('crypto'),Crypt=require(_0x441739(0x14b))[_0x441739(0x190)],RSA=require(_0x441739(0x14b))[_0x441739(0x1cb)],bcrypt=require(_0x441739(0x263)),jwt=require('jsonwebtoken'),{Analytics}=require(_0x441739(0x214)),googleAnalyticsV3Plugin=require(_0x441739(0x1c6))[_0x441739(0x22c)],ipaddr=require(_0x441739(0x128)),argv=require(_0x441739(0x136))(process[_0x441739(0x233)][_0x441739(0x1ef)](0x2))['argv'],PORT=argv[_0x441739(0x15e)]||_0x441739(0x213),pattern=/^[0-9]{2,4}$/;!pattern[_0x441739(0x13b)](PORT)&&(console[_0x441739(0x164)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x441739(0x204)),process[_0x441739(0x152)](0x1));const HOST=argv[_0x441739(0x197)]||null,userID=argv[_0x441739(0x1e3)]||'';let bbpath=_0x441739(0x180),bbpath2='';const botfile=_0x441739(0x139),configfile=_0x441739(0x21b),settingsfile='bb-settings.json',securefile=_0x441739(0x198);let validInstallation=!![];!fs[_0x441739(0x22a)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x441739(0x154)),configpath=userID?bbpath+_0x441739(0x22d)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs[_0x441739(0x22a)](configpath)&&fs[_0x441739(0x1fa)](configpath);!fs[_0x441739(0x22a)](configbackuppath)&&fs[_0x441739(0x1fa)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x441739(0x15f)]({'bots':[]})[_0x441739(0x225)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x441739(0x15f)]({'settings':{'timeshift':0x0}})[_0x441739(0x225)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x441739(0x225)]();let crypt=new Crypt({'md':_0x441739(0x1dd),'rsaStandard':_0x441739(0x1eb)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x441739(0x1ad))[_0x441739(0x133)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x441739(0x199)](app);app[_0x441739(0x1d0)](express['static'](path[_0x441739(0x1f3)](__dirname,bbpath2,_0x441739(0x1cd)))),app[_0x441739(0x1d0)](express['static'](path[_0x441739(0x1f3)](__dirname,bbpath2,'build'))),app[_0x441739(0x21c)]('/',function(_0x54fadb,_0x2ec609){const _0x43bbcb=_0x441739;_0x2ec609[_0x43bbcb(0x173)](path[_0x43bbcb(0x1f3)](__dirname,bbpath2,'build2',_0x43bbcb(0x1f6)));}),app[_0x441739(0x21c)](_0x441739(0x216),function(_0x38f4c8,_0x366cad){const _0x29d5e1=_0x441739;_0x366cad[_0x29d5e1(0x173)](path[_0x29d5e1(0x1f3)](__dirname,bbpath2,_0x29d5e1(0x258),_0x29d5e1(0x1f6)));}),app[_0x441739(0x21c)](_0x441739(0x1e5),(_0x43bf1f,_0x431e6d)=>{const _0x2e1d66=_0x441739;_0x431e6d[_0x2e1d66(0x173)](path[_0x2e1d66(0x1f3)](__dirname,bbpath2,_0x2e1d66(0x258),_0x2e1d66(0x1f6)));}),app[_0x441739(0x21c)]('/:bot/performance',(_0x10d850,_0x5262d6)=>{const _0x35d62f=_0x441739;_0x5262d6[_0x35d62f(0x173)](path['join'](__dirname,bbpath2,'build',_0x35d62f(0x1f6)));}),app[_0x441739(0x21c)](_0x441739(0x22b),(_0x56172a,_0x53a0f4)=>{const _0x2940fc=_0x441739;_0x53a0f4[_0x2940fc(0x173)](path['join'](__dirname,bbpath2,_0x2940fc(0x258),'index.html'));}),app['get'](_0x441739(0x194),(_0x37e653,_0x38d8a7)=>{const _0x38c020=_0x441739;_0x38d8a7['sendFile'](path[_0x38c020(0x1f3)](__dirname,bbpath2,_0x38c020(0x258),_0x38c020(0x1f6)));}),app[_0x441739(0x21c)](_0x441739(0x1d8),(_0x3c1ce2,_0x6eaeb9)=>{_0x6eaeb9['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x441739(0x21c)](_0x441739(0x21d),(_0x47e147,_0x3771b5)=>{const _0x10e86c=_0x441739;_0x3771b5[_0x10e86c(0x173)](path[_0x10e86c(0x1f3)](__dirname,bbpath2,_0x10e86c(0x258),_0x10e86c(0x1f6)));});if(HOST)http['listen'](PORT,HOST);else http[_0x441739(0x127)](PORT);const io=require('socket.io')(http,{}),analytics=Analytics({'app':_0x441739(0x124),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x441739(0x13f)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings[_0x441739(0x1c9)]!=''&&settings[_0x441739(0x161)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x4f5fd8=_0x441739;console[_0x4f5fd8(0x164)](''),console[_0x4f5fd8(0x164)](_0x4f5fd8(0x183)),logging(_0x4f5fd8(0x12c)+PORT),console['log'](_0x4f5fd8(0x183));if(config['length']!=0x0)config[_0x4f5fd8(0x1ff)](_0x3e75be=>{const _0x225f20=_0x4f5fd8;if(_0x3e75be['status']==_0x225f20(0x1c7)||_0x3e75be[_0x225f20(0x150)]==_0x225f20(0x1fb))logging(_0x225f20(0x22f)+_0x3e75be['botID']+_0x225f20(0x223)+_0x3e75be[_0x225f20(0x19b)]),startBot([_0x3e75be[_0x225f20(0x157)],userID],{'cwd':bbpath},function(_0xd88a71){if(_0xd88a71)logging(_0xd88a71);});else(_0x3e75be['status']==_0x225f20(0x162)||_0x3e75be['status']==_0x225f20(0x262))&&logging(_0x225f20(0x12d)+_0x3e75be[_0x225f20(0x157)]+_0x225f20(0x223)+_0x3e75be[_0x225f20(0x19b)]);});else!newBot&&console[_0x4f5fd8(0x164)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x4f5fd8(0x164)](_0x4f5fd8(0x183)),console[_0x4f5fd8(0x164)]('');}function startSocket(){io['on']('connection',_0x25c8f6=>{const _0x55d878=_0x1653;let _0x31d389,_0x4cc230,_0x4f63c1,_0x1b5656,_0x37b2cb;const _0x3714b3=_0x25c8f6[_0x55d878(0x160)]['headers'][_0x55d878(0x14e)];_0x4cc230=_0x3714b3[_0x55d878(0x218)](/bot[0-9]{3}/);if(_0x4cc230)_0x4f63c1=_0x4cc230[0x0]['match'](/[0-9]{3}/);if(_0x4f63c1)_0x31d389=_0x4f63c1[0x0];else _0x31d389=_0x55d878(0x230);const _0x328b51=_0x25c8f6[_0x55d878(0x160)]['auth'][_0x55d878(0x259)];if(!_0x328b51)_0x25c8f6['emit']('status',{'publicKey':secure[_0x55d878(0x182)]});else{_0x1b5656=timelyDecrypt(_0x328b51,![]);if(!_0x1b5656)_0x25c8f6['emit'](_0x55d878(0x150),{'publicKey':secure[_0x55d878(0x182)]});else{_0x37b2cb=normalizeIP(_0x25c8f6[_0x55d878(0x235)][_0x55d878(0x25a)])['store'];if(!devices[_0x1b5656])devices[_0x1b5656]={'uuid':_0x1b5656,'access':{'token':null}};devices[_0x1b5656]['ip']=_0x37b2cb;const _0x2091aa=addClient(_0x25c8f6['id'],_0x1b5656,_0x31d389);setAccess(_0x2091aa),_0x25c8f6['on'](_0x55d878(0x187),_0x503e10=>{const _0x1cf93c=_0x55d878,_0x595c72=timelyDecrypt(_0x503e10[_0x1cf93c(0x16e)]);if(_0x595c72){_0x503e10={'username':_0x503e10[_0x1cf93c(0x1e4)],'password':_0x595c72},devices[_0x1b5656][_0x1cf93c(0x177)]=validateCredentials(_0x503e10,_0x1b5656);if(devices[_0x1b5656][_0x1cf93c(0x177)][_0x1cf93c(0x13a)]==![]&&devices[_0x1b5656][_0x1cf93c(0x177)]['reason']=='2FA\x20login\x20required')_0x25c8f6[_0x1cf93c(0x181)](_0x1cf93c(0x150),{'access':devices[_0x1b5656][_0x1cf93c(0x177)]}),loginAccess2FA(_0x1b5656,_0x37b2cb);else{if(devices[_0x1b5656][_0x1cf93c(0x177)]['allow']==![]&&devices[_0x1b5656][_0x1cf93c(0x177)][_0x1cf93c(0x1db)]==_0x1cf93c(0x1f0))_0x25c8f6['emit'](_0x1cf93c(0x150),{'access':devices[_0x1b5656][_0x1cf93c(0x177)]});else devices[_0x1b5656]['access']['allow']&&devices[_0x1b5656]['access'][_0x1cf93c(0x1db)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1b5656)[_0x1cf93c(0x1ff)](_0x3ca61f=>{setAccess(_0x3ca61f);}),setTokenRefresh(_0x1b5656),setSessionTimeout(_0x1cf93c(0x187),_0x1b5656));}}else logging(_0x1cf93c(0x264));}),_0x25c8f6['on']('reset-password',()=>{resetPassword();}),_0x25c8f6['on']('disconnect',_0x30b58c=>{removeClient(_0x25c8f6['id']);});}}});}function initClient(_0x471148){const _0x3d0f82=_0x441739;if(_0x471148!=_0x3d0f82(0x230)&&config[_0x3d0f82(0x22e)]!=''){if(pid[_0x471148])pid[_0x471148][_0x3d0f82(0x247)]({'function':_0x3d0f82(0x255),'args':null});}}function getSocket(_0x4d7893){const _0x5c7c73=_0x441739;return io['sockets'][_0x5c7c73(0x1c8)]['get'](_0x4d7893);}function setAccess(_0x597d05){const _0xb54add=_0x441739,_0x1dd193=getSocket(_0x597d05['id']),_0x54a7d6=_0x597d05[_0xb54add(0x142)],_0x505675=_0x597d05[_0xb54add(0x169)];devices[_0x54a7d6][_0xb54add(0x177)]=validateAccess(devices[_0x54a7d6][_0xb54add(0x177)][_0xb54add(0x1f2)],_0x54a7d6),_0x1dd193['join'](_0x54a7d6);if(devices[_0x54a7d6][_0xb54add(0x177)][_0xb54add(0x13a)]){_0x1dd193['join'](_0x505675);if(_0x505675==_0xb54add(0x230))initializeSocketBotManager(_0x1dd193);else initializeSocketBot(_0x1dd193);initClient(_0x505675);}devices[_0x54a7d6][_0xb54add(0x177)]['token']&&devices[_0x54a7d6][_0xb54add(0x177)][_0xb54add(0x1db)]==_0xb54add(0x16a)&&setSessionTimeout(_0xb54add(0x189),_0x54a7d6),devices[_0x54a7d6]['access'][_0xb54add(0x1f2)]&&devices[_0x54a7d6][_0xb54add(0x177)][_0xb54add(0x1db)]==_0xb54add(0x158)&&setSessionTimeout(_0xb54add(0x187),_0x54a7d6),_0x1dd193[_0xb54add(0x181)](_0xb54add(0x150),{'status':_0x597d05[_0xb54add(0x159)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54a7d6][_0xb54add(0x177)],'externalip':devices[_0x54a7d6]['ip'],'publicKey':secure[_0xb54add(0x182)],'validInstallation':validInstallation}),devices[_0x54a7d6][_0xb54add(0x177)]['allow']==![]&&devices[_0x54a7d6][_0xb54add(0x177)][_0xb54add(0x1db)]=='2FA\x20required'&&temporaryAccess2FA(_0x54a7d6,devices[_0x54a7d6]['ip']);}function setSessionTimeout(_0x579e5d,_0x34ab9e){const _0x5a1dd4=_0x441739;let _0x36123d;if(_0x579e5d==_0x5a1dd4(0x187))_0x36123d=loginExpiry*0x3c*0x3e8;else _0x36123d=devices[_0x34ab9e][_0x5a1dd4(0x1d7)][_0x5a1dd4(0x192)]*0x3c*0x3e8-(new Date()[_0x5a1dd4(0x174)]()-devices[_0x34ab9e][_0x5a1dd4(0x1d7)][_0x5a1dd4(0x1c3)]);if(devices[_0x34ab9e][_0x5a1dd4(0x17c)])clearTimeout(devices[_0x34ab9e][_0x5a1dd4(0x17c)]);devices[_0x34ab9e][_0x5a1dd4(0x17c)]=setTimeout(()=>{const _0x1b0ec9=_0x5a1dd4;if(devices[_0x34ab9e][_0x1b0ec9(0x25e)])clearTimeout(devices[_0x34ab9e]['pidRefreshToken']);removeSocketListeners(_0x34ab9e),addBlacklist(_0x34ab9e),devices[_0x34ab9e][_0x1b0ec9(0x1d7)]=null,devices[_0x34ab9e][_0x1b0ec9(0x135)]=null,devices[_0x34ab9e][_0x1b0ec9(0x177)]['token']=null,devices[_0x34ab9e]['access']=validateAccess(devices[_0x34ab9e]['access']['token'],_0x34ab9e),!(devices[_0x34ab9e][_0x1b0ec9(0x177)]['allow']&&devices[_0x34ab9e][_0x1b0ec9(0x177)]['reason']==_0x1b0ec9(0x18c))&&(_0x579e5d==_0x1b0ec9(0x187)?io['to'](_0x34ab9e)[_0x1b0ec9(0x181)](_0x1b0ec9(0x150),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x34ab9e)['emit'](_0x1b0ec9(0x150),{'access':{'allow':![],'reason':_0x1b0ec9(0x112),'token':null}})),devices[_0x34ab9e][_0x1b0ec9(0x177)][_0x1b0ec9(0x1f2)]=null;},_0x36123d);}function setTokenRefresh(_0x5755f6){const _0x58fc33=_0x441739;if(devices[_0x5755f6]['pidRefreshToken'])clearTimeout(devices[_0x5755f6][_0x58fc33(0x25e)]);devices[_0x5755f6][_0x58fc33(0x25e)]=setTimeout(()=>{const _0x1ab445=_0x58fc33;getClientsWithUuid(_0x5755f6)[_0x1ab445(0x134)]!=0x0?(devices[_0x5755f6][_0x1ab445(0x177)]=refreshToken(_0x5755f6),io['to'](_0x5755f6)['emit'](_0x1ab445(0x150),{'status':_0x1ab445(0x211),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5755f6][_0x1ab445(0x177)],'externalip':devices[_0x5755f6]['ip'],'publicKey':secure[_0x1ab445(0x182)],'validInstallation':validInstallation}),setTokenRefresh(_0x5755f6)):clearTimeout(devices[_0x5755f6][_0x1ab445(0x25e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1fda32){const _0xfbe6=_0x441739,_0x4bedf=getClient(_0x1fda32['id'])[_0xfbe6(0x142)];_0x1fda32[_0xfbe6(0x181)]('bots',config),_0x1fda32[_0xfbe6(0x181)](_0xfbe6(0x168),cleanSettings()),_0x1fda32['on']('add-bot',_0x480c44=>{const _0x2ec091=_0xfbe6;if(validateAccess(_0x480c44,_0x4bedf)[_0x2ec091(0x13a)])addBot();else logging(_0x2ec091(0x171));}),_0x1fda32['on']('update-bot',(_0x57bc68,_0x4ee892)=>{const _0x3d7e24=_0xfbe6;if(validateAccess(_0x4ee892,_0x4bedf)[_0x3d7e24(0x13a)])toggleBot(_0x57bc68[_0x3d7e24(0x157)],_0x57bc68[_0x3d7e24(0x150)],_0x57bc68[_0x3d7e24(0x1b9)]);else logging(_0x3d7e24(0x202));}),_0x1fda32['on'](_0xfbe6(0x24c),(_0x3ed76f,_0x802c)=>{const _0x5a50fd=_0xfbe6;if(validateAccess(_0x802c,_0x4bedf)[_0x5a50fd(0x13a)])toggleBotMode(_0x3ed76f);else logging(_0x5a50fd(0x202));}),_0x1fda32['on'](_0xfbe6(0x156),(_0x2c3fe6,_0x5a4d15)=>{const _0x3b92ba=_0xfbe6;if(validateAccess(_0x5a4d15,_0x4bedf)[_0x3b92ba(0x13a)])deleteBot(_0x2c3fe6);else logging(_0x3b92ba(0x1fd));}),_0x1fda32['on']('store-settings',(_0x23ec01,_0x346779)=>{const _0x38a70e=_0xfbe6;if(validateAccess(_0x346779,_0x4bedf)['allow'])storeSettings(_0x23ec01,!![]);else logging(_0x38a70e(0x240));}),_0x1fda32['on'](_0xfbe6(0x119),_0x1e2ea5=>{const _0x39ed44=_0xfbe6;if(validateAccess(_0x1e2ea5,_0x4bedf)[_0x39ed44(0x13a)])updateBB();else logging(_0x39ed44(0x254));}),_0x1fda32['on'](_0xfbe6(0x237),_0x3ce61c=>{const _0x371684=_0xfbe6;if(validateAccess(_0x3ce61c,_0x4bedf)[_0x371684(0x13a)]){if(devices[_0x4bedf][_0x371684(0x25e)])clearTimeout(devices[_0x4bedf][_0x371684(0x25e)]);if(devices[_0x4bedf]['pidExpireLogin'])clearTimeout(devices[_0x4bedf]['pidExpireLogin']);removeSocketListeners(getClient(_0x1fda32['id'])['uuid']),addBlacklist(_0x4bedf),devices[_0x4bedf]['telegramIpApproval']=null,devices[_0x4bedf][_0x371684(0x135)]=null,devices[_0x4bedf][_0x371684(0x177)]['token']=null,io['to'](getClient(_0x1fda32['id'])[_0x371684(0x142)])[_0x371684(0x181)](_0x371684(0x150),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x371684(0x1a1));});}function initializeSocketBot(_0x2af43d){const _0x28dfcd=_0x441739,_0xdf58b4=getClient(_0x2af43d['id'])[_0x28dfcd(0x169)],_0x301703=getClient(_0x2af43d['id'])[_0x28dfcd(0x142)];_0x2af43d['on']('get-logs',(_0x51b777,_0x555ad8)=>{const _0x57ada9=_0x28dfcd;if(validateAccess(_0x555ad8,_0x301703)[_0x57ada9(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4][_0x57ada9(0x247)]({'function':_0x57ada9(0x1bd),'args':_0x51b777});}else logging(_0x57ada9(0x21e));}),_0x2af43d['on']('delete-alerts',(_0xffa306,_0x2107a6)=>{const _0x3e96f1=_0x28dfcd;if(validateAccess(_0x2107a6,_0x301703)[_0x3e96f1(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4][_0x3e96f1(0x247)]({'function':'deleteHistoryAlerts','args':_0xffa306});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x2af43d['on'](_0x28dfcd(0x12b),(_0x3735bc,_0x55f249)=>{const _0x4f0637=_0x28dfcd;if(validateAccess(_0x55f249,_0x301703)[_0x4f0637(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4]['send']({'function':_0x4f0637(0x1e6),'args':_0x3735bc});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x2af43d['on'](_0x28dfcd(0x11b),(_0x5aac81,_0x1d1409)=>{const _0x325f57=_0x28dfcd;if(validateAccess(_0x1d1409,_0x301703)[_0x325f57(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4]['send']({'function':_0x325f57(0x111),'args':_0x5aac81});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x2af43d['on'](_0x28dfcd(0x1d2),(_0x446564,_0x17fc76)=>{const _0x4f82f0=_0x28dfcd;if(validateAccess(_0x17fc76,_0x301703)[_0x4f82f0(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4][_0x4f82f0(0x247)]({'function':'storeHeadless','args':_0x446564});}else logging(_0x4f82f0(0x1ce));}),_0x2af43d['on']('get-starting-balances',_0x394c9a=>{const _0x1ad140=_0x28dfcd;if(validateAccess(_0x394c9a,_0x301703)['allow']){if(pid[_0xdf58b4])pid[_0xdf58b4]['send']({'function':_0x1ad140(0x24f),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x2af43d['on']('place-order',(_0x276914,_0x726532)=>{const _0xba36fe=_0x28dfcd;if(validateAccess(_0x726532,_0x301703)['allow']){if(pid[_0xdf58b4])pid[_0xdf58b4]['send']({'function':_0xba36fe(0x12e),'args':_0x276914});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x2af43d['on'](_0x28dfcd(0x132),_0xba14bf=>{const _0x323c14=_0x28dfcd;if(validateAccess(_0xba14bf,_0x301703)[_0x323c14(0x13a)]){if(pid[_0xdf58b4])pid[_0xdf58b4][_0x323c14(0x247)]({'function':_0x323c14(0x23a),'args':null});}else logging(_0x323c14(0x249));}),_0x2af43d['on'](_0x28dfcd(0x237),_0x14b76e=>{const _0x17f86f=_0x28dfcd;if(validateAccess(_0x14b76e,_0x301703)['allow']){if(devices[_0x301703][_0x17f86f(0x25e)])clearTimeout(devices[_0x301703][_0x17f86f(0x25e)]);if(devices[_0x301703]['pidExpireLogin'])clearTimeout(devices[_0x301703][_0x17f86f(0x17c)]);removeSocketListeners(getClient(_0x2af43d['id'])[_0x17f86f(0x142)]),addBlacklist(_0x301703),devices[_0x301703]['telegramIpApproval']=null,devices[_0x301703]['telegram2FaApproval']=null,devices[_0x301703][_0x17f86f(0x177)]['token']=null,io['to'](getClient(_0x2af43d['id'])[_0x17f86f(0x142)])[_0x17f86f(0x181)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x24ed61){getClientsWithUuid(_0x24ed61)['forEach'](_0x115784=>{getSocket(_0x115784['id'])['removeAllListeners']();});}function cleanSettings(){const _0x335b37=_0x441739;let _0x12bb15=settings;return settings[_0x335b37(0x1c9)]&&settings[_0x335b37(0x1c9)]!=''&&(_0x12bb15={..._0x12bb15,'telegramToken':_0x335b37(0x252)}),settings[_0x335b37(0x1ae)]&&settings[_0x335b37(0x1ae)]!=''&&(_0x12bb15={..._0x12bb15,'bbPassword':_0x335b37(0x252)}),_0x12bb15;}function updateBB(){const _0x860055=_0x441739;installingUpdate=!![],config[_0x860055(0x1ff)](_0x51a355=>{const _0x15f761=_0x860055;restartBot(_0x51a355[_0x15f761(0x157)]);}),process['send']({'update':!![]},_0x3b3ec7=>{});}function startBot(_0x39fb2b,_0x38ed73,_0x5aa1a2){const _0xaff303=_0x441739;let _0x329ed5=![];const _0x3bc641=_0x39fb2b[0x0];_0x38ed73={..._0x38ed73,'stdio':[_0xaff303(0x1c2),'inherit',_0xaff303(0x1c2),_0xaff303(0x23d)]},pid[_0x3bc641]=childProcess['fork'](botfile,_0x39fb2b,_0x38ed73),pid[_0x3bc641]['on'](_0xaff303(0x17d),_0x3dff35=>{const _0x22e026=_0xaff303;switch(Object[_0x22e026(0x23f)](_0x3dff35)[0x0]){case _0x22e026(0x19b):updateBotName(_0x3bc641,_0x3dff35[_0x22e026(0x19b)]);break;case _0x22e026(0x110):updateBotManager();break;case _0x22e026(0x150):updateStatus(_0x3bc641,_0x3dff35['status']);break;case _0x22e026(0x1b9):updateLive(_0x3bc641,_0x3dff35['live']);break;case'started':updateLive(_0x3bc641,_0x3dff35[_0x22e026(0x15d)]),io['to'](_0x3bc641)['emit']('status',{'access':{'allow':![],'reason':_0x22e026(0x1f5),'token':null}});break;case _0x22e026(0x1c4):_0x3dff35[_0x22e026(0x1c4)]=='restart'&&restartBot(_0x3bc641);_0x3dff35['stop']==_0x22e026(0x16d)&&toggleBot(_0x3bc641,_0x22e026(0x162),'stopped');break;case _0x22e026(0x222):sendTelegram(_0x3bc641,_0x3dff35[_0x22e026(0x222)]);break;case'telegrammsg':sendTelegramMsg(_0x3dff35['telegrammsg']);break;case _0x22e026(0x228):io['to'](_0x3bc641)[_0x22e026(0x181)](_0x3dff35['function'],_0x3dff35[_0x22e026(0x253)]);break;}}),pid[_0x3bc641]['on'](_0xaff303(0x166),function(_0x323d09){if(_0x329ed5)return;_0x329ed5=!![],_0x5aa1a2(_0x323d09);}),pid[_0x3bc641]['on'](_0xaff303(0x152),function(_0x32c15e){const _0x1d136e=_0xaff303;if(installingUpdate)return;if(_0x329ed5)return;_0x329ed5=!![],_0x5aa1a2(null);const _0x488e95=dbConfig['get'](_0x1d136e(0x208))[_0x1d136e(0x20a)]({'botID':_0x3bc641})[_0x1d136e(0x1b4)]();_0x488e95&&(_0x488e95['status']==_0x1d136e(0x1c7)||_0x488e95[_0x1d136e(0x150)]==_0x1d136e(0x1fb))&&(updateLive(_0x3bc641,_0x1d136e(0x209)),logging('restarting\x20Bot\x20'+_0x3bc641),startBot([_0x3bc641,userID],{'cwd':bbpath},function(_0x31ee5e){if(_0x31ee5e)logging(_0x31ee5e);}));});}function stopBot(_0x539278){getClientsWithBotID(_0x539278)['forEach'](_0xa636c8=>{const _0x2c3034=_0x1653;getSocket(_0xa636c8['id'])[_0x2c3034(0x212)](!![]),removeClient(_0xa636c8['id']);}),pid[_0x539278]&&(pid[_0x539278]['kill'](),pid[_0x539278]=null);}function restartBot(_0x3fab0e){const _0x56c594=_0x441739;if(pid[_0x3fab0e])pid[_0x3fab0e][_0x56c594(0x16d)]();}function addBot(){const _0x2d90dc=_0x441739;let _0xabf759;for(let _0x3c1de6=0x1;_0x3c1de6<0x3e9;_0x3c1de6++){_0xabf759=_0x3c1de6[_0x2d90dc(0x256)]()[_0x2d90dc(0x1f7)](0x3,'0');let _0x3f792c=config[_0x2d90dc(0x20a)](_0x4c8577=>_0x4c8577['botID']==_0xabf759);if(!_0x3f792c)break;}if(_0xabf759==='1000'){logging(_0x2d90dc(0x113));return;}logging(_0x2d90dc(0x238)+_0xabf759),dbConfig[_0x2d90dc(0x21c)](_0x2d90dc(0x208))['push']({'botID':_0xabf759,'botname':'Bot\x20'+_0xabf759,'status':_0x2d90dc(0x1fb),'live':''})[_0x2d90dc(0x225)](),startBot([_0xabf759,userID],{'cwd':bbpath},function(_0xf70acf){if(_0xf70acf)logging(_0xf70acf);}),config=getConfiguration(),io['to']('botmanager')[_0x2d90dc(0x181)](_0x2d90dc(0x208),config);}function deleteBot(_0x1a0e80){const _0x301d13=_0x441739;getClientsWithBotID(_0x1a0e80)[_0x301d13(0x1ff)](_0x2de601=>{const _0x58c71c=_0x301d13;getSocket(_0x2de601['id'])[_0x58c71c(0x212)](!![]),removeClient(_0x2de601['id']);}),dbConfig['get']('bots')[_0x301d13(0x17a)]({'botID':_0x1a0e80})[_0x301d13(0x225)](),logging(_0x301d13(0x1ee)+_0x1a0e80),stopBot(_0x1a0e80);try{fs[_0x301d13(0x20f)](path[_0x301d13(0x1f3)](configpath,_0x301d13(0x144)+_0x1a0e80+_0x301d13(0x1af))),fs[_0x301d13(0x20f)](path[_0x301d13(0x1f3)](configpath,_0x301d13(0x144)+_0x1a0e80+_0x301d13(0x25c))),fs[_0x301d13(0x20f)](path['join'](configpath,_0x301d13(0x144)+_0x1a0e80+'-performance.json')),fs[_0x301d13(0x20f)](path[_0x301d13(0x1f3)](configpath,_0x301d13(0x144)+_0x1a0e80+_0x301d13(0x232)));}catch(_0x464132){if(_0x464132)logging(_0x301d13(0x153),_0x464132);}config=getConfiguration(),io['to'](_0x301d13(0x230))[_0x301d13(0x181)]('bots',config);}function toggleBot(_0x393fb3,_0x5a33fa,_0x57ebe2){const _0x6ea099=_0x441739;dbConfig[_0x6ea099(0x21c)](_0x6ea099(0x208))['find']({'botID':_0x393fb3})['assign']({'status':_0x5a33fa})[_0x6ea099(0x15c)]({'live':_0x57ebe2})[_0x6ea099(0x225)]();if(_0x5a33fa==_0x6ea099(0x1c7)||_0x5a33fa==_0x6ea099(0x1fb))logging('enabled\x20Bot\x20'+_0x393fb3),startBot([_0x393fb3,userID],{'cwd':bbpath},function(_0x3feb4d){if(_0x3feb4d)logging(_0x3feb4d);});else(_0x5a33fa==_0x6ea099(0x162)||_0x5a33fa=='new-disabled')&&(logging(_0x6ea099(0x1a9)+_0x393fb3),stopBot(_0x393fb3));config=getConfiguration(),io['to']('botmanager')[_0x6ea099(0x181)](_0x6ea099(0x208),config);}function toggleStatus(_0x7ee626){const _0x4bdc63=_0x441739;let _0x3512df=dbConfig[_0x4bdc63(0x21c)](_0x4bdc63(0x208))[_0x4bdc63(0x20a)]({'botID':_0x7ee626})[_0x4bdc63(0x1b4)](),_0x16d073;if(_0x3512df[_0x4bdc63(0x150)]===_0x4bdc63(0x1c7))_0x16d073=_0x4bdc63(0x162);else{if(_0x3512df[_0x4bdc63(0x150)]==='new')_0x16d073=_0x4bdc63(0x262);else{if(_0x3512df[_0x4bdc63(0x150)]==='new-disabled')_0x16d073=_0x4bdc63(0x1fb);else{if(_0x3512df[_0x4bdc63(0x150)]===_0x4bdc63(0x162))_0x16d073=_0x4bdc63(0x1c7);}}}return _0x16d073;}function updateStatus(_0x13991f,_0x26c461){const _0x45a97d=_0x441739;dbConfig[_0x45a97d(0x21c)](_0x45a97d(0x208))[_0x45a97d(0x20a)]({'botID':_0x13991f})['assign']({'status':_0x26c461})[_0x45a97d(0x225)](),config=getConfiguration(),io['to'](_0x45a97d(0x230))[_0x45a97d(0x181)]('bots',config);}function updateLive(_0x1f22e3,_0xa65f5){const _0x36bb3f=_0x441739;dbConfig['get']('bots')[_0x36bb3f(0x20a)]({'botID':_0x1f22e3})[_0x36bb3f(0x15c)]({'live':_0xa65f5})[_0x36bb3f(0x225)](),config=getConfiguration(),io['to'](_0x36bb3f(0x230))['emit'](_0x36bb3f(0x208),config);}function updateBotName(_0x231bc6,_0x5ac9d5){const _0x22fc38=_0x441739;dbConfig[_0x22fc38(0x21c)]('bots')['find']({'botID':_0x231bc6})['assign']({'botname':_0x5ac9d5})[_0x22fc38(0x225)](),config=getConfiguration(),io['to'](_0x22fc38(0x230))[_0x22fc38(0x181)](_0x22fc38(0x208),config);}function updateBotManager(){const _0x31e823=_0x441739;config=getConfiguration(),io['to'](_0x31e823(0x230))[_0x31e823(0x181)](_0x31e823(0x208),config);}function toggleBotMode(_0x226af7){const _0x562fcd=_0x441739;if(pid[_0x226af7])pid[_0x226af7][_0x562fcd(0x247)]({'function':_0x562fcd(0x221),'args':null});else{const _0x3036cd=configpath+'bot-'+_0x226af7+_0x562fcd(0x1af),_0x2f1cad=fs[_0x562fcd(0x1ea)](_0x3036cd),_0x662c30=JSON[_0x562fcd(0x129)](_0x2f1cad),_0x46890e=_0x662c30[_0x562fcd(0x169)][0x0][_0x562fcd(0x1bf)];_0x662c30[_0x562fcd(0x169)][0x0]['headless']=!_0x46890e;const _0x36e38f=JSON[_0x562fcd(0x16b)](_0x662c30,null,0x2);fs[_0x562fcd(0x18e)](_0x3036cd,_0x36e38f),config=getConfiguration(),io['to'](_0x562fcd(0x230))[_0x562fcd(0x181)](_0x562fcd(0x208),config);}}function telegramError(_0x26016d){console['log'](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x11d2c5){const _0x54c36c=_0x441739;if(_0x11d2c5['from'][_0x54c36c(0x1e4)]!=settings['telegramUsername']&&'@'+_0x11d2c5[_0x54c36c(0x24d)][_0x54c36c(0x1e4)]!=settings[_0x54c36c(0x161)])return tgBot['sendMessage'](_0x11d2c5[_0x54c36c(0x172)]['id'],_0x54c36c(0x14a),{'parse_mode':_0x54c36c(0x14f)})[_0x54c36c(0x1a7)](_0x237093=>{telegramError(_0x237093);}),![];return!![];}async function initTelegram(){const _0x4fe907=_0x441739;if(tgBot)tgBot[_0x4fe907(0x117)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4fe907(0x1c9)],{'polling':!![]});let _0x376a74=_0x4fe907(0x11a);_0x376a74+='\x0a',_0x376a74+='/enable\x20-\x20enable\x20notifications\x0a',_0x376a74+=_0x4fe907(0x185),_0x376a74+=_0x4fe907(0x11e),_0x376a74+=_0x4fe907(0x1ec),_0x376a74+=_0x4fe907(0x21f),_0x376a74+=_0x4fe907(0x234),_0x376a74+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x376a74+=_0x4fe907(0x243),_0x376a74+=_0x4fe907(0x21a),_0x376a74+=_0x4fe907(0x220),_0x376a74+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x9fd58d=_0x4fe907(0x184);_0x9fd58d+='\x0a',_0x9fd58d+=_0x376a74,tgBot[_0x4fe907(0x1ac)](/\/start/,_0x3a0046=>{const _0x18d3d4=_0x4fe907;if(!validateTelegram(_0x3a0046))return;if(settings['telegramChatId']!=_0x3a0046[_0x18d3d4(0x172)]['id'])updateSetting(_0x18d3d4(0x18b),_0x3a0046[_0x18d3d4(0x172)]['id']);updateSetting(_0x18d3d4(0x248),!![]),tgBot[_0x18d3d4(0x193)](_0x3a0046[_0x18d3d4(0x172)]['id'],_0x9fd58d)[_0x18d3d4(0x1a7)](_0x431f01=>{telegramError(_0x431f01);});}),tgBot['onText'](/\/enable/,_0x350a0c=>{const _0x8fe672=_0x4fe907;if(!validateTelegram(_0x350a0c))return;if(settings[_0x8fe672(0x18b)]!=_0x350a0c[_0x8fe672(0x172)]['id'])updateSetting(_0x8fe672(0x18b),_0x350a0c[_0x8fe672(0x172)]['id']);updateSetting(_0x8fe672(0x248),!![]),tgBot[_0x8fe672(0x193)](_0x350a0c['chat']['id'],_0x8fe672(0x23b))[_0x8fe672(0x1a7)](_0x3d0dc2=>{telegramError(_0x3d0dc2);});}),tgBot[_0x4fe907(0x1ac)](/\/config/,async _0x49f9c7=>{const _0x6aecf1=_0x4fe907;if(!validateTelegram(_0x49f9c7))return;tgBot[_0x6aecf1(0x242)]('callback_query'),tgBot[_0x6aecf1(0x193)](_0x49f9c7['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x6aecf1(0x19c),'callback_data':_0x6aecf1(0x1fc)},{'text':_0x6aecf1(0x1cf),'callback_data':_0x6aecf1(0x1dc)},{'text':'All','callback_data':_0x6aecf1(0x115)}]]}})[_0x6aecf1(0x1a7)](_0x23930b=>{telegramError(_0x23930b);}),tgBot['on']('callback_query',async _0x501ab6=>{const _0x343e58=_0x6aecf1,_0x4578e9=_0x501ab6[_0x343e58(0x145)],_0x546173=_0x501ab6[_0x343e58(0x17d)];tgBot[_0x343e58(0x13d)](_0x501ab6['id'])[_0x343e58(0x186)](async()=>{const _0x4692e2=_0x343e58;_0x4578e9==_0x4692e2(0x1fc)&&(updateSetting('telegramEvents',_0x4692e2(0x1fc)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4692e2(0x193)](_0x546173[_0x4692e2(0x172)]['id'],_0x4692e2(0x15a))[_0x4692e2(0x1a7)](_0x103f3c=>{telegramError(_0x103f3c);}));_0x4578e9=='alerts'&&(updateSetting(_0x4692e2(0x196),'alerts'),updateSetting(_0x4692e2(0x248),!![]),await tgBot[_0x4692e2(0x193)](_0x546173[_0x4692e2(0x172)]['id'],_0x4692e2(0x1a5))[_0x4692e2(0x1a7)](_0x362475=>{telegramError(_0x362475);}));_0x4578e9==_0x4692e2(0x115)&&(updateSetting(_0x4692e2(0x196),_0x4692e2(0x115)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x546173[_0x4692e2(0x172)]['id'],_0x4692e2(0x23c))[_0x4692e2(0x1a7)](_0x2e8a07=>{telegramError(_0x2e8a07);}));if(!settings[_0x4692e2(0x18b)])tgBot['sendMessage'](_0x546173['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x4692e2(0x1a7)](_0x590170=>{telegramError(_0x590170);});}),tgBot[_0x343e58(0x242)](_0x343e58(0x178));});}),tgBot[_0x4fe907(0x1ac)](/\/status/,_0x29b648=>{const _0x5092b9=_0x4fe907;if(!validateTelegram(_0x29b648))return;const _0x49527c=getBotsWithMode();let _0x13f104='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x4af427=>{const _0x5d73fa=_0x1653,_0x12b351=_0x49527c[_0x5d73fa(0x20a)](_0x239efa=>_0x239efa[_0x5d73fa(0x157)]==_0x4af427[_0x5d73fa(0x157)])[_0x5d73fa(0x1bc)];_0x13f104+=_0x5d73fa(0x25f)+_0x4af427[_0x5d73fa(0x157)]+':\x20'+_0x4af427[_0x5d73fa(0x150)]+_0x5d73fa(0x223)+_0x12b351+_0x5d73fa(0x223)+_0x4af427['live']+'\x0a';}),_0x13f104+='\x0a',_0x13f104+=_0x5092b9(0x210),_0x13f104+=!settings['telegramEnabled']?_0x5092b9(0x19d):_0x5092b9(0x241),_0x13f104+=settings['telegramEnabled']?settings[_0x5092b9(0x196)]=='all'?_0x5092b9(0x16c):_0x5092b9(0x165)+settings[_0x5092b9(0x196)]+_0x5092b9(0x25d):'',tgBot['sendMessage'](_0x29b648[_0x5092b9(0x172)]['id'],_0x13f104,{'parse_mode':'HTML'})['catch'](_0x92124c=>{telegramError(_0x92124c);});}),tgBot[_0x4fe907(0x1ac)](/\/restart/,_0x5cd167=>{const _0x499a69=_0x4fe907;if(!validateTelegram(_0x5cd167))return;tgBot['removeListener'](_0x499a69(0x178));const _0x363ae0=getEnabledBots();if(_0x363ae0[_0x499a69(0x134)]==0x0)tgBot[_0x499a69(0x193)](_0x5cd167['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x499a69(0x1a7)](_0x5700cf=>{telegramError(_0x5700cf);});else{if(_0x363ae0[_0x499a69(0x134)]>0x1)_0x363ae0['push']({'botID':_0x499a69(0x115)});let _0x114589=[],_0x10cd0b=[];const _0x2016d1=_0x363ae0['length']%0x4==0x0||_0x363ae0[_0x499a69(0x134)]%0x4==0x3||_0x363ae0[_0x499a69(0x134)]%0x3==0x1?0x4:0x3;let _0x3af424=0x0;_0x363ae0[_0x499a69(0x1ff)]((_0x1b5fc6,_0x5f3840)=>{const _0x9de0a7=_0x499a69;if(_0x5f3840%_0x2016d1==0x0)_0x10cd0b=[];_0x10cd0b[_0x9de0a7(0x151)]({'text':_0x1b5fc6['botID']==_0x9de0a7(0x115)?_0x9de0a7(0x176):'Bot\x20'+_0x1b5fc6['botID'],'callback_data':_0x1b5fc6[_0x9de0a7(0x157)]}),_0x5f3840%_0x2016d1==0x0&&(_0x114589[_0x3af424]=_0x10cd0b,_0x3af424++);}),tgBot[_0x499a69(0x193)](_0x5cd167['chat']['id'],_0x499a69(0x1d1),{'reply_markup':{'inline_keyboard':_0x114589}})[_0x499a69(0x1a7)](_0x594a51=>{telegramError(_0x594a51);}),tgBot['on'](_0x499a69(0x178),async _0x1600b2=>{const _0x26f32e=_0x499a69,_0x578143=_0x1600b2[_0x26f32e(0x145)],_0x5e8538=_0x1600b2[_0x26f32e(0x17d)];tgBot[_0x26f32e(0x13d)](_0x1600b2['id'])[_0x26f32e(0x186)](async()=>{const _0x21f0bd=_0x26f32e;_0x578143==_0x21f0bd(0x115)?(tgBot[_0x21f0bd(0x193)](_0x5e8538[_0x21f0bd(0x172)]['id'],_0x21f0bd(0x118))[_0x21f0bd(0x1a7)](_0x161a39=>{telegramError(_0x161a39);}),config[_0x21f0bd(0x1ff)](_0x3c5482=>{const _0x176722=_0x21f0bd;restartBot(_0x3c5482[_0x176722(0x157)]);})):(tgBot[_0x21f0bd(0x193)](_0x5e8538[_0x21f0bd(0x172)]['id'],_0x21f0bd(0x251)+_0x578143)['catch'](_0x24c9b0=>{telegramError(_0x24c9b0);}),restartBot(_0x578143));}),tgBot['removeListener'](_0x26f32e(0x178));});}}),tgBot['onText'](/\/on/,_0xce2fe0=>{const _0x1400ba=_0x4fe907;if(!validateTelegram(_0xce2fe0))return;tgBot[_0x1400ba(0x242)](_0x1400ba(0x178));const _0x492ba9=getDisabledBots();if(_0x492ba9[_0x1400ba(0x134)]==0x0)tgBot['sendMessage'](_0xce2fe0['chat']['id'],_0x1400ba(0x20c))['catch'](_0x266716=>{telegramError(_0x266716);});else{if(_0x492ba9['length']>0x1)_0x492ba9['push']({'botID':_0x1400ba(0x115)});let _0x47f619=[],_0x10b052=[];const _0x15011e=_0x492ba9['length']%0x4==0x0||_0x492ba9['length']%0x4==0x3||_0x492ba9[_0x1400ba(0x134)]%0x3==0x1?0x4:0x3;let _0x48177a=0x0;_0x492ba9[_0x1400ba(0x1ff)]((_0x23d608,_0x3b9f8c)=>{const _0x44dc21=_0x1400ba;if(_0x3b9f8c%_0x15011e==0x0)_0x10b052=[];_0x10b052['push']({'text':_0x23d608['botID']==_0x44dc21(0x115)?_0x44dc21(0x176):'Bot\x20'+_0x23d608[_0x44dc21(0x157)],'callback_data':_0x23d608['botID']}),_0x3b9f8c%_0x15011e==0x0&&(_0x47f619[_0x48177a]=_0x10b052,_0x48177a++);}),tgBot[_0x1400ba(0x193)](_0xce2fe0[_0x1400ba(0x172)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x47f619}})[_0x1400ba(0x1a7)](_0x4248c5=>{telegramError(_0x4248c5);}),tgBot['on']('callback_query',async _0x4b4e27=>{const _0x548aaa=_0x1400ba,_0x3a546f=_0x4b4e27[_0x548aaa(0x145)],_0x43238a=_0x4b4e27[_0x548aaa(0x17d)];tgBot[_0x548aaa(0x13d)](_0x4b4e27['id'])['then'](async()=>{const _0x523006=_0x548aaa;_0x3a546f==_0x523006(0x115)?(tgBot[_0x523006(0x193)](_0x43238a[_0x523006(0x172)]['id'],_0x523006(0x18a))[_0x523006(0x1a7)](_0xa8ba93=>{telegramError(_0xa8ba93);}),_0x492ba9[_0x523006(0x1ff)](_0x4f0cdf=>{const _0x5d2a5c=_0x523006;if(_0x4f0cdf[_0x5d2a5c(0x157)]!=_0x5d2a5c(0x115))toggleBot(_0x4f0cdf['botID'],toggleStatus(_0x4f0cdf[_0x5d2a5c(0x157)]),'stopped');})):(tgBot[_0x523006(0x193)](_0x43238a[_0x523006(0x172)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x3a546f)[_0x523006(0x1a7)](_0x421a53=>{telegramError(_0x421a53);}),toggleBot(_0x3a546f,toggleStatus(_0x3a546f),'stopped'));}),tgBot[_0x548aaa(0x242)](_0x548aaa(0x178));});}}),tgBot[_0x4fe907(0x1ac)](/\/off/,_0x1c9a8e=>{const _0x52475f=_0x4fe907;if(!validateTelegram(_0x1c9a8e))return;tgBot[_0x52475f(0x242)](_0x52475f(0x178));const _0x4e2985=getEnabledBots();if(_0x4e2985[_0x52475f(0x134)]==0x0)tgBot[_0x52475f(0x193)](_0x1c9a8e[_0x52475f(0x172)]['id'],_0x52475f(0x15b))[_0x52475f(0x1a7)](_0x2c778e=>{telegramError(_0x2c778e);});else{if(_0x4e2985['length']>0x1)_0x4e2985[_0x52475f(0x151)]({'botID':_0x52475f(0x115)});let _0x2d4052=[],_0x4fbaa4=[];const _0x3f02db=_0x4e2985[_0x52475f(0x134)]%0x4==0x0||_0x4e2985[_0x52475f(0x134)]%0x4==0x3||_0x4e2985[_0x52475f(0x134)]%0x3==0x1?0x4:0x3;let _0x7173cd=0x0;_0x4e2985[_0x52475f(0x1ff)]((_0x36d2be,_0x3714fc)=>{const _0x55caf3=_0x52475f;if(_0x3714fc%_0x3f02db==0x0)_0x4fbaa4=[];_0x4fbaa4[_0x55caf3(0x151)]({'text':_0x36d2be['botID']==_0x55caf3(0x115)?_0x55caf3(0x176):_0x55caf3(0x25f)+_0x36d2be[_0x55caf3(0x157)],'callback_data':_0x36d2be[_0x55caf3(0x157)]}),_0x3714fc%_0x3f02db==0x0&&(_0x2d4052[_0x7173cd]=_0x4fbaa4,_0x7173cd++);}),tgBot['sendMessage'](_0x1c9a8e[_0x52475f(0x172)]['id'],_0x52475f(0x123),{'reply_markup':{'inline_keyboard':_0x2d4052}})[_0x52475f(0x1a7)](_0x3ab8d1=>{telegramError(_0x3ab8d1);}),tgBot['on'](_0x52475f(0x178),async _0x2e0d3d=>{const _0x44aaef=_0x52475f,_0x4202b2=_0x2e0d3d[_0x44aaef(0x145)],_0x7e7fcb=_0x2e0d3d['message'];tgBot['answerCallbackQuery'](_0x2e0d3d['id'])[_0x44aaef(0x186)](async()=>{const _0x537a9e=_0x44aaef;_0x4202b2==_0x537a9e(0x115)?(tgBot[_0x537a9e(0x193)](_0x7e7fcb[_0x537a9e(0x172)]['id'],_0x537a9e(0x1a2))[_0x537a9e(0x1a7)](_0x1ba6e1=>{telegramError(_0x1ba6e1);}),_0x4e2985[_0x537a9e(0x1ff)](_0x59aa2e=>{const _0x4b5bb1=_0x537a9e;if(_0x59aa2e[_0x4b5bb1(0x157)]!=_0x4b5bb1(0x115))toggleBot(_0x59aa2e['botID'],toggleStatus(_0x59aa2e[_0x4b5bb1(0x157)]),_0x4b5bb1(0x209));})):(tgBot[_0x537a9e(0x193)](_0x7e7fcb[_0x537a9e(0x172)]['id'],_0x537a9e(0x219)+_0x4202b2)[_0x537a9e(0x1a7)](_0x4be623=>{telegramError(_0x4be623);}),toggleBot(_0x4202b2,toggleStatus(_0x4202b2),_0x537a9e(0x209)));}),tgBot[_0x44aaef(0x242)](_0x44aaef(0x178));});}}),tgBot[_0x4fe907(0x1ac)](/\/portfolio/,_0x1d4939=>{const _0x2a5588=_0x4fe907;if(!validateTelegram(_0x1d4939))return;tgBot[_0x2a5588(0x242)](_0x2a5588(0x178));const _0x46f545=getEnabledBots();if(_0x46f545[_0x2a5588(0x134)]==0x0)tgBot[_0x2a5588(0x193)](_0x1d4939[_0x2a5588(0x172)]['id'],_0x2a5588(0x15b))[_0x2a5588(0x1a7)](_0x62a740=>{telegramError(_0x62a740);});else{if(_0x46f545[_0x2a5588(0x134)]>0x1){let _0x290d27=[],_0x14f97f=[];const _0x25717e=_0x46f545[_0x2a5588(0x134)]%0x4==0x0||_0x46f545[_0x2a5588(0x134)]%0x4==0x3||_0x46f545['length']%0x3==0x1?0x4:0x3;let _0x12b530=0x0;_0x46f545[_0x2a5588(0x1ff)]((_0x52233d,_0x5982c7)=>{const _0x3fa325=_0x2a5588;if(_0x5982c7%_0x25717e==0x0)_0x14f97f=[];_0x14f97f[_0x3fa325(0x151)]({'text':'Bot\x20'+_0x52233d[_0x3fa325(0x157)],'callback_data':_0x52233d[_0x3fa325(0x157)]}),_0x5982c7%_0x25717e==0x0&&(_0x290d27[_0x12b530]=_0x14f97f,_0x12b530++);}),tgBot[_0x2a5588(0x193)](_0x1d4939[_0x2a5588(0x172)]['id'],_0x2a5588(0x207),{'reply_markup':{'inline_keyboard':_0x290d27}})['catch'](_0x1a7692=>{telegramError(_0x1a7692);}),tgBot['on']('callback_query',async _0x1ab1e3=>{const _0x2340a4=_0x2a5588,_0x2a90b8=_0x1ab1e3[_0x2340a4(0x145)],_0x3f5450=_0x1ab1e3[_0x2340a4(0x17d)];tgBot['answerCallbackQuery'](_0x1ab1e3['id'])[_0x2340a4(0x186)](async()=>{const _0x4c1886=_0x2340a4;if(pid[_0x2a90b8])pid[_0x2a90b8][_0x4c1886(0x247)]({'function':_0x4c1886(0x1d9),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x3d2836=_0x46f545[0x0][_0x2a5588(0x157)];if(pid[_0x3d2836])pid[_0x3d2836][_0x2a5588(0x247)]({'function':_0x2a5588(0x1d9),'args':null});}}}),tgBot[_0x4fe907(0x1ac)](/\/toggle/,_0x56c285=>{const _0x41e620=_0x4fe907;if(!validateTelegram(_0x56c285))return;tgBot[_0x41e620(0x242)](_0x41e620(0x178));const _0x45addc=getBotsWithMode();if(_0x45addc[_0x41e620(0x134)]==0x0)tgBot[_0x41e620(0x193)](_0x56c285['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x41e620(0x1a7)](_0x3a0713=>{telegramError(_0x3a0713);});else{let _0x3aa729=[],_0x15b2ec=[];const _0x24fc7b=0x2;let _0x18e824=0x0;_0x45addc[_0x41e620(0x1ff)]((_0x29bb1d,_0x63f9ed)=>{const _0x529487=_0x41e620;if(_0x63f9ed%_0x24fc7b==0x0)_0x15b2ec=[];_0x15b2ec[_0x529487(0x151)]({'text':_0x529487(0x25f)+_0x29bb1d[_0x529487(0x157)]+'\x20('+_0x29bb1d[_0x529487(0x1bc)]+')','callback_data':_0x29bb1d[_0x529487(0x157)]}),_0x63f9ed%_0x24fc7b==0x0&&(_0x3aa729[_0x18e824]=_0x15b2ec,_0x18e824++);}),tgBot[_0x41e620(0x193)](_0x56c285[_0x41e620(0x172)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x3aa729}})[_0x41e620(0x1a7)](_0x4dc8c5=>{telegramError(_0x4dc8c5);}),tgBot['on'](_0x41e620(0x178),async _0x2de590=>{const _0x14dba3=_0x41e620,_0x5b7ec0=_0x2de590[_0x14dba3(0x145)],_0x426f3f=_0x2de590[_0x14dba3(0x17d)];tgBot['answerCallbackQuery'](_0x2de590['id'])[_0x14dba3(0x186)](async()=>{const _0xeaa24e=_0x14dba3,_0x37372c=_0x45addc[_0xeaa24e(0x20a)](_0x4df6c2=>_0x4df6c2['botID']==_0x5b7ec0),_0x38df8d=_0x37372c[_0xeaa24e(0x1bc)]=='auto'?_0xeaa24e(0x23e):'auto';tgBot['sendMessage'](_0x426f3f[_0xeaa24e(0x172)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x5b7ec0+_0xeaa24e(0x1d4)+_0x38df8d+'\x20mode')[_0xeaa24e(0x1a7)](_0x1d71cb=>{telegramError(_0x1d71cb);}),toggleBotMode(_0x5b7ec0);}),tgBot[_0x14dba3(0x242)](_0x14dba3(0x178));});}}),tgBot[_0x4fe907(0x1ac)](/\/names/,_0x49b7df=>{const _0x3bd148=_0x4fe907;if(!validateTelegram(_0x49b7df))return;let _0x4d55c0='';config[_0x3bd148(0x1ff)](_0x4a71bc=>{const _0x9c0754=_0x3bd148;_0x4d55c0+=_0x9c0754(0x25f)+_0x4a71bc[_0x9c0754(0x157)]+':\x20'+_0x4a71bc['botname']+'\x0a';}),tgBot['sendMessage'](_0x49b7df[_0x3bd148(0x172)]['id'],_0x4d55c0,{'parse_mode':_0x3bd148(0x14f)})[_0x3bd148(0x1a7)](_0x45b2da=>{telegramError(_0x45b2da);});}),tgBot[_0x4fe907(0x1ac)](/\/disable/,_0x12aa7b=>{const _0x51e97f=_0x4fe907;if(!validateTelegram(_0x12aa7b))return;tgBot[_0x51e97f(0x193)](_0x12aa7b[_0x51e97f(0x172)]['id'],_0x51e97f(0x1a6))[_0x51e97f(0x1a7)](_0x10ab4a=>{telegramError(_0x10ab4a);}),updateSetting(_0x51e97f(0x248),![]);}),tgBot['onText'](/\/help/,_0x5e14a5=>{const _0x1eb8fb=_0x4fe907;if(!validateTelegram(_0x5e14a5))return;tgBot[_0x1eb8fb(0x193)](_0x5e14a5[_0x1eb8fb(0x172)]['id'],_0x376a74)[_0x1eb8fb(0x1a7)](_0x46ebeb=>{telegramError(_0x46ebeb);});}),tgBot['on'](_0x4fe907(0x19f),_0x535515=>{const _0x567e1d=_0x4fe907;_0x535515['toString']()['includes'](_0x567e1d(0x205))&&(logging(_0x567e1d(0x143)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x567e1d(0x230))['emit']('notification','Invalid\x20Telegram\x20token'));}),process[_0x4fe907(0x1ca)]('SIGINT',()=>{const _0x5086ef=_0x4fe907;if(tgBot)tgBot[_0x5086ef(0x117)]();process[_0x5086ef(0x152)](0x1);}),process['once'](_0x4fe907(0x16f),()=>{const _0x4458a9=_0x4fe907;if(tgBot)tgBot[_0x4458a9(0x117)]();process[_0x4458a9(0x152)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x12947b,_0x276ae2){const _0x3f5799=_0x441739;if(settings[_0x3f5799(0x248)]){if(settings[_0x3f5799(0x196)]==_0x3f5799(0x115)||(_0x276ae2[_0x3f5799(0x1b7)]=='error'||_0x276ae2[_0x3f5799(0x1b7)]==_0x3f5799(0x1cc))&&settings[_0x3f5799(0x196)]=='alerts'||_0x276ae2[_0x3f5799(0x1b7)]==_0x3f5799(0x141)&&settings[_0x3f5799(0x196)]==_0x3f5799(0x1fc)){if(tgBot&&settings[_0x3f5799(0x18b)]){if(_0x276ae2[_0x3f5799(0x24a)])tgBot['sendMessage'](settings['telegramChatId'],_0x276ae2[_0x3f5799(0x19b)]+_0x3f5799(0x12f)+_0x276ae2[_0x3f5799(0x226)])['catch'](_0x6686e3=>{telegramError(_0x6686e3);});else tgBot[_0x3f5799(0x193)](settings[_0x3f5799(0x18b)],_0x3f5799(0x25f)+_0x12947b+_0x3f5799(0x12f)+_0x276ae2[_0x3f5799(0x226)])[_0x3f5799(0x1a7)](_0x1126d5=>{telegramError(_0x1126d5);});}}}}function sendTelegramMsg(_0xb0baa1){const _0x592a4f=_0x441739;settings[_0x592a4f(0x248)]&&(tgBot&&settings[_0x592a4f(0x18b)]&&tgBot[_0x592a4f(0x193)](settings[_0x592a4f(0x18b)],_0xb0baa1,{'parse_mode':_0x592a4f(0x14f)})[_0x592a4f(0x1a7)](_0x273ae4=>{telegramError(_0x273ae4);}));}function getDeviceWithIp(_0xdf1f2f){const _0x45f592=_0x441739;return devices[_0x45f592(0x20a)](_0x5a5fd2=>_0x5a5fd2['ip']===_0xdf1f2f);}function temporaryAccess2FA(_0x181079,_0x134205){const _0x5aa5b7=_0x441739;let _0x40205f=new Date(),_0x5f59cb=![];if(lastIpApproval){if(_0x40205f-lastIpApproval<0x1388)_0x5f59cb=!![];}lastIpApproval=new Date();if(_0x5f59cb)return;tgBot&&settings[_0x5aa5b7(0x18b)]&&(tgBot[_0x5aa5b7(0x242)]('callback_query'),tgBot[_0x5aa5b7(0x193)](settings[_0x5aa5b7(0x18b)],_0x5aa5b7(0x1ab)+normalizeIP(_0x134205)['show']+_0x5aa5b7(0x116),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5aa5b7(0x122),'callback_data':'5'},{'text':_0x5aa5b7(0x12a),'callback_data':'15'},{'text':_0x5aa5b7(0x1e8),'callback_data':'30'},{'text':_0x5aa5b7(0x175),'callback_data':_0x5aa5b7(0x175)}]]}})[_0x5aa5b7(0x1a7)](_0x4a8da1=>{telegramError(_0x4a8da1);}),tgBot['on'](_0x5aa5b7(0x178),async _0x4b24ec=>{const _0x1e73a3=_0x5aa5b7,_0x18b418=_0x4b24ec[_0x1e73a3(0x145)],_0xdfc5d1=_0x4b24ec[_0x1e73a3(0x17d)];tgBot[_0x1e73a3(0x13d)](_0x4b24ec['id'])[_0x1e73a3(0x186)](async()=>{const _0x165b9f=_0x1e73a3;devices[_0x181079]['telegramIpApproval']={'clientip':_0x134205,'timestamp':new Date()[_0x165b9f(0x174)](),'expiry':_0x18b418},_0x18b418!=_0x165b9f(0x175)?(await tgBot[_0x165b9f(0x193)](_0xdfc5d1[_0x165b9f(0x172)]['id'],_0x165b9f(0x188)+_0x18b418+_0x165b9f(0x1b2),{'parse_mode':_0x165b9f(0x14f)})[_0x165b9f(0x1a7)](_0x836487=>{telegramError(_0x836487);}),io['to'](_0x181079)[_0x165b9f(0x181)](_0x165b9f(0x150),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x165b9f(0x193)](_0xdfc5d1['chat']['id'],_0x165b9f(0x260))[_0x165b9f(0x1a7)](_0x41b932=>{telegramError(_0x41b932);}),io['to'](_0x181079)[_0x165b9f(0x181)](_0x165b9f(0x150),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x1e73a3(0x242)](_0x1e73a3(0x178));}));}function loginAccess2FA(_0x207669,_0xe1b325){const _0x919cee=_0x441739;tgBot&&settings[_0x919cee(0x18b)]&&(tgBot[_0x919cee(0x242)](_0x919cee(0x178)),tgBot[_0x919cee(0x193)](settings[_0x919cee(0x18b)],_0x919cee(0x1fe)+normalizeIP(_0xe1b325)[_0x919cee(0x20e)]+_0x919cee(0x116),{'parse_mode':_0x919cee(0x14f),'reply_markup':{'inline_keyboard':[[{'text':_0x919cee(0x1b6),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x919cee(0x175)}]]}})[_0x919cee(0x1a7)](_0x12e13f=>{telegramError(_0x12e13f);}),tgBot['on'](_0x919cee(0x178),async _0x56864c=>{const _0x282ec2=_0x919cee,_0x312835=_0x56864c[_0x282ec2(0x145)],_0x4f40c0=_0x56864c[_0x282ec2(0x17d)];tgBot[_0x282ec2(0x13d)](_0x56864c['id'])[_0x282ec2(0x186)](async()=>{const _0x3573f3=_0x282ec2;devices[_0x207669][_0x3573f3(0x135)]={'clientip':_0xe1b325,'timestamp':new Date()['getTime'](),'expiry':_0x312835},_0x312835!=_0x3573f3(0x175)?(await tgBot[_0x3573f3(0x193)](_0x4f40c0['chat']['id'],_0x3573f3(0x1e9),{'parse_mode':_0x3573f3(0x14f)})[_0x3573f3(0x1a7)](_0x58ac9e=>{telegramError(_0x58ac9e);}),io['to'](_0x207669)[_0x3573f3(0x181)](_0x3573f3(0x150),{'access':{'allow':![],'reason':_0x3573f3(0x1f5),'token':null}})):(await tgBot[_0x3573f3(0x193)](_0x4f40c0[_0x3573f3(0x172)]['id'],'Login\x20rejected')[_0x3573f3(0x1a7)](_0x3733f4=>{telegramError(_0x3733f4);}),io['to'](_0x207669)['emit'](_0x3573f3(0x150),{'access':{'allow':![],'reason':_0x3573f3(0x239),'token':null}}));}),tgBot[_0x282ec2(0x242)](_0x282ec2(0x178));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x27df63=_0x441739;return dbConfig[_0x27df63(0x21c)](_0x27df63(0x208))['sortBy'](_0x27df63(0x157))['filter']({'status':'enabled'})[_0x27df63(0x1b4)]()||[];}function getDisabledBots(){const _0x2f5d57=_0x441739;return dbConfig[_0x2f5d57(0x21c)]('bots')[_0x2f5d57(0x206)](_0x2f5d57(0x157))[_0x2f5d57(0x1a0)]({'status':_0x2f5d57(0x162)})[_0x2f5d57(0x1b4)]()||[];}function getBotsWithMode(){const _0x544d0a=_0x441739,_0x1fccfd=dbConfig['get']('bots')['sortBy'](_0x544d0a(0x157))[_0x544d0a(0x1b4)]()||[];return _0x1fccfd[_0x544d0a(0x1ff)](_0x103916=>{const _0x210406=_0x544d0a,_0x37227c=configpath+_0x210406(0x144)+_0x103916[_0x210406(0x157)]+_0x210406(0x1af),_0xb3e94b=fs[_0x210406(0x22a)](_0x37227c);if(_0xb3e94b){const _0x3ec645=fs[_0x210406(0x1ea)](_0x37227c);try{const _0x207843=JSON['parse'](_0x3ec645),_0x49b8ec=_0x207843?_0x207843[_0x210406(0x169)][0x0][_0x210406(0x1bf)]:![];_0x103916[_0x210406(0x1bc)]=_0x49b8ec?'auto':'manual';}catch(_0x36e7c9){_0x103916['mode']=_0x210406(0x23e);}}else _0x103916[_0x210406(0x1bc)]=_0x210406(0x23e);}),_0x1fccfd;}function getSettings(){const _0x17c8ba=_0x441739;return dbSettings[_0x17c8ba(0x21c)]('settings')[_0x17c8ba(0x1b4)]()||{'timeshift':0x0};}function getSecure(){const _0x440569=_0x441739;return dbSecure[_0x440569(0x21c)]('secure')[_0x440569(0x1b4)]()||{};}function getBlacklist(){const _0x32498c=_0x441739;return dbSecure[_0x32498c(0x21c)]('blacklist')['value']()||[];}function broadcastToBots(_0x480598,_0x504922){const _0x422b0b=_0x441739;config[_0x422b0b(0x1ff)](_0x3143a9=>{const _0x11cefc=_0x422b0b;if(_0x3143a9['status']==_0x11cefc(0x1c7)&&_0x3143a9[_0x11cefc(0x1b9)]==_0x11cefc(0x17f)){if(pid[_0x3143a9[_0x11cefc(0x157)]])pid[_0x3143a9[_0x11cefc(0x157)]][_0x11cefc(0x247)]({[_0x480598]:_0x504922});}});}function storeSettings(_0x515731,_0x5658f2=![]){const _0xd8829a=_0x441739;_0x515731={...settings,..._0x515731};if(_0x5658f2&&_0x515731[_0xd8829a(0x1ae)]!='************'&&_0x515731['bbPassword']!=''){const _0x10cb81=crypt[_0xd8829a(0x195)](secure['privateKey'],_0x515731[_0xd8829a(0x1ae)])[_0xd8829a(0x17d)][_0xd8829a(0x1aa)]('@')[0x0],_0x30006b=bcrypt['hashSync'](_0x10cb81,saltRounds);_0x515731={..._0x515731,'bbPassword':_0x30006b};}if(_0x5658f2&&_0x515731['telegramToken']!=_0xd8829a(0x252)&&_0x515731[_0xd8829a(0x1c9)]!=''){const _0x5c2611=crypt['decrypt'](secure['privateKey'],_0x515731[_0xd8829a(0x1c9)])[_0xd8829a(0x17d)][_0xd8829a(0x1aa)]('@')[0x0];_0x515731={..._0x515731,'telegramToken':_0x5c2611};}const _0x36aea7=_0x515731[_0xd8829a(0x1c9)]!=_0xd8829a(0x252)&&_0x515731[_0xd8829a(0x1c9)]!=settings[_0xd8829a(0x1c9)]||_0x515731['telegramUsername']!=settings[_0xd8829a(0x161)],_0x9e33e=_0x515731[_0xd8829a(0x1c9)]==''||_0x515731[_0xd8829a(0x161)]=='';if(_0x36aea7)_0x515731[_0xd8829a(0x196)]=_0xd8829a(0x115);for(const [_0x1c2d26,_0x5e26e2]of Object[_0xd8829a(0x1ba)](_0x515731)){if(_0x1c2d26=='telegramToken'&&_0x5e26e2=='************'){_0x515731[_0xd8829a(0x1c9)]=settings['telegramToken'];continue;};if(_0x1c2d26==_0xd8829a(0x1ae)&&_0x5e26e2==_0xd8829a(0x252)){_0x515731[_0xd8829a(0x1ae)]=settings[_0xd8829a(0x1ae)];continue;};dbSettings[_0xd8829a(0x1e1)](_0xd8829a(0x137)+_0x1c2d26,_0x5e26e2)[_0xd8829a(0x225)]();}settings=_0x515731,io['to'](_0xd8829a(0x230))[_0xd8829a(0x181)](_0xd8829a(0x168),cleanSettings()),broadcastToBots(_0xd8829a(0x1d6),settings['timeshift']);if(_0x36aea7&&!_0x9e33e)initTelegram();if(_0x36aea7&&_0x9e33e)disableTelegram();getAllClients()[_0xd8829a(0x1ff)](_0x2db483=>{const _0x57a248=_0xd8829a;getSocket(_0x2db483['id'])['emit'](_0x57a248(0x150),{'access':{'allow':![],'reason':_0x57a248(0x1f5),'token':null}});});}function updateSetting(_0x3341b6,_0x23c865){const _0xc779a5=_0x441739;dbSettings[_0xc779a5(0x1e1)](_0xc779a5(0x137)+_0x3341b6,_0x23c865)[_0xc779a5(0x225)](),settings=getSettings(),io['to'](_0xc779a5(0x230))[_0xc779a5(0x181)](_0xc779a5(0x168),cleanSettings());}function storeSecure(_0x4c2c40){const _0x3f21e2=_0x441739;dbSecure[_0x3f21e2(0x21c)](_0x3f21e2(0x20d))['push'](_0x4c2c40)[_0x3f21e2(0x225)](),secure=_0x4c2c40;}function addBlacklist(_0x1aa368){const _0x5717e8=_0x441739;cleanBlacklist();let _0x5b7f6d;devices[_0x1aa368][_0x5717e8(0x1d7)]?_0x5b7f6d=Math['max'](devices[_0x1aa368][_0x5717e8(0x1d7)][_0x5717e8(0x192)],loginExpiry):_0x5b7f6d=loginExpiry,dbSecure[_0x5717e8(0x21c)]('blacklist')[_0x5717e8(0x151)]({'expiry':new Date()[_0x5717e8(0x174)]()+_0x5b7f6d*0x3c*0x3e8,'token':devices[_0x1aa368][_0x5717e8(0x177)][_0x5717e8(0x1f2)]})[_0x5717e8(0x225)](),blacklist=dbSecure[_0x5717e8(0x21c)](_0x5717e8(0x236))[_0x5717e8(0x1b4)]();}function cleanBlacklist(){const _0x2991e7=_0x441739;let _0x4c3943=dbSecure[_0x2991e7(0x21c)](_0x2991e7(0x236))[_0x2991e7(0x245)]()[_0x2991e7(0x1b4)](),_0x2e5f4a=new Date()[_0x2991e7(0x174)]();_0x4c3943[_0x2991e7(0x1ff)](_0x4d817d=>{const _0x170561=_0x2991e7;_0x4d817d['expiry']<_0x2e5f4a&&dbSecure[_0x170561(0x21c)](_0x170561(0x236))[_0x170561(0x17a)]({'expiry':_0x4d817d[_0x170561(0x192)]})[_0x170561(0x225)]();});}function initStates(){const _0x2175d2=_0x441739;let _0x357886=getConfiguration();_0x357886[_0x2175d2(0x1ff)](_0x41f124=>{_0x41f124['live']='stopped';}),storeConfiguration(_0x357886);}function onKeys(){const _0x3218ab=new RSA();return new Promise(_0x19bbd6=>{const _0x48979e=_0x1653;_0x3218ab[_0x48979e(0x1ed)]()[_0x48979e(0x186)](_0x2343e1=>{_0x19bbd6(_0x2343e1);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5e822b=_0x441739;let _0x296639=getConfiguration(),_0xe9d8e4=![];_0x296639['forEach'](_0x899f1a=>{const _0x25fb18=_0x1653;if(_0x899f1a['status']=='running')_0x899f1a[_0x25fb18(0x150)]='enabled',_0xe9d8e4=!![];else _0x899f1a['status']==_0x25fb18(0x209)&&(_0x899f1a[_0x25fb18(0x150)]=_0x25fb18(0x162),_0xe9d8e4=!![]);});if(_0xe9d8e4)storeConfiguration(_0x296639);let _0x53ce3f=getSecure();if(!_0x53ce3f['hasOwnProperty'](_0x5e822b(0x191))){let _0xa0683c=await generateKeys();_0x53ce3f[_0x5e822b(0x182)]=_0xa0683c[_0x5e822b(0x182)],_0x53ce3f[_0x5e822b(0x11f)]=_0xa0683c['privateKey'],_0x53ce3f[_0x5e822b(0x191)]=crypto[_0x5e822b(0x217)](0x20)['toString']('hex'),storeSecure(_0x53ce3f);}let _0x5794ef=getSettings();_0xe9d8e4=![];!_0x5794ef[_0x5e822b(0x120)](_0x5e822b(0x1f1))&&(_0x5794ef[_0x5e822b(0x1f1)]=![],_0x5794ef['bbUsername']='',_0x5794ef[_0x5e822b(0x1ae)]='',_0x5794ef[_0x5e822b(0x24b)]=![],_0xe9d8e4=!![]);!_0x5794ef[_0x5e822b(0x120)](_0x5e822b(0x131))&&(_0x5794ef[_0x5e822b(0x131)]=![],_0x5794ef[_0x5e822b(0x1a4)]=[],_0x5794ef['temporaryAccessAllowed']=![],_0xe9d8e4=!![]);if(!_0x5794ef[_0x5e822b(0x120)]('telegramEnabled')){if(_0x5794ef[_0x5e822b(0x18b)])_0x5794ef[_0x5e822b(0x248)]=!![];else _0x5794ef[_0x5e822b(0x248)]=![];_0xe9d8e4=!![];}if(_0xe9d8e4)storeSettings(_0x5794ef);}function storeConfiguration(_0x13303d){const _0x260980=_0x441739;dbConfig[_0x260980(0x21c)](_0x260980(0x208))[_0x260980(0x17a)]()[_0x260980(0x225)](),_0x13303d[_0x260980(0x1ff)](_0x34d99a=>{const _0xfb0203=_0x260980;delete _0x34d99a[_0xfb0203(0x1bc)];}),dbConfig[_0x260980(0x21c)](_0x260980(0x208))['push'](..._0x13303d)['write'](),config=_0x13303d;}function resetPassword(){const _0x4f1f62=_0x441739;tgBot&&settings[_0x4f1f62(0x18b)]&&(tgBot['removeListener'](_0x4f1f62(0x178)),tgBot['sendMessage'](settings[_0x4f1f62(0x18b)],_0x4f1f62(0x1a3),{'parse_mode':_0x4f1f62(0x14f),'reply_markup':{'inline_keyboard':[[{'text':_0x4f1f62(0x1b8),'callback_data':_0x4f1f62(0x1b8)},{'text':'no','callback_data':'no'}]]}})[_0x4f1f62(0x1a7)](_0x17b4c7=>{telegramError(_0x17b4c7);}),tgBot['on']('callback_query',async _0xc799d7=>{const _0x41fa78=_0x4f1f62,_0x5d57cc=_0xc799d7[_0x41fa78(0x145)],_0x3878c5=_0xc799d7[_0x41fa78(0x17d)];tgBot['answerCallbackQuery'](_0xc799d7['id'])[_0x41fa78(0x186)](async()=>{const _0x33f658=_0x41fa78;if(_0x5d57cc!='no'){const _0x4b2ba6=0xf,_0x5adfbe=_0x33f658(0x121),_0x462474=Array[_0x33f658(0x24d)](crypto[_0x33f658(0x14c)](new Uint32Array(_0x4b2ba6)))['map'](_0x2315ae=>_0x5adfbe[_0x2315ae%_0x5adfbe[_0x33f658(0x134)]])[_0x33f658(0x1f3)](''),_0x406519=bcrypt[_0x33f658(0x13e)](_0x462474,saltRounds);storeSettings({'bbPassword':_0x406519}),await tgBot[_0x33f658(0x193)](_0x3878c5[_0x33f658(0x172)]['id'],_0x33f658(0x19e)+_0x462474,{'parse_mode':_0x33f658(0x14f)})[_0x33f658(0x1a7)](_0x5dc8d4=>{telegramError(_0x5dc8d4);});}else await tgBot[_0x33f658(0x193)](_0x3878c5[_0x33f658(0x172)]['id'],_0x33f658(0x17e))[_0x33f658(0x1a7)](_0x3a5dfc=>{telegramError(_0x3a5dfc);});}),tgBot[_0x41fa78(0x242)](_0x41fa78(0x178));}));}function logging(_0x1c96ff){const _0x4ca5a1=_0x441739;console['log'](getTimeStamp()+_0x4ca5a1(0x1c1)+_0x1c96ff);if(tgBot&&settings[_0x4ca5a1(0x18b)]&&settings[_0x4ca5a1(0x196)]!=_0x4ca5a1(0x1fc))tgBot[_0x4ca5a1(0x193)](settings[_0x4ca5a1(0x18b)],_0x4ca5a1(0x1f8)+_0x1c96ff)['catch'](_0x443dad=>{telegramError(_0x443dad);});}function getServerTime(){const _0x156266=_0x441739,_0x35095f=new Date();return _0x35095f[_0x156266(0x229)]()+'/'+(_0x35095f['getMonth']()+0x1)['toString']()[_0x156266(0x1f7)](0x2,'0')+'/'+_0x35095f[_0x156266(0x10f)]()['toString']()[_0x156266(0x1f7)](0x2,'0')+'\x20'+_0x35095f['getHours']()[_0x156266(0x256)]()[_0x156266(0x1f7)](0x2,'0')+':'+_0x35095f[_0x156266(0x11d)]()[_0x156266(0x256)]()[_0x156266(0x1f7)](0x2,'0')+':'+_0x35095f[_0x156266(0x179)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x126511=_0x441739,_0x4ddcae=shiftedTime();return _0x4ddcae[_0x126511(0x229)]()+'/'+(_0x4ddcae[_0x126511(0x170)]()+0x1)[_0x126511(0x256)]()[_0x126511(0x1f7)](0x2,'0')+'/'+_0x4ddcae[_0x126511(0x10f)]()[_0x126511(0x256)]()['padStart'](0x2,'0')+'\x20'+_0x4ddcae[_0x126511(0x11c)]()[_0x126511(0x256)]()[_0x126511(0x1f7)](0x2,'0')+':'+_0x4ddcae['getMinutes']()['toString']()[_0x126511(0x1f7)](0x2,'0')+':'+_0x4ddcae[_0x126511(0x179)]()['toString']()[_0x126511(0x1f7)](0x2,'0');}function shiftedTime(){const _0x4098cd=_0x441739,_0x3b0502=new Date();let _0x4787e8=_0x3b0502;if(settings['timeshift']&&settings[_0x4098cd(0x1d6)]!==0x0)_0x4787e8=fns[_0x4098cd(0x203)](_0x3b0502,{'hours':settings[_0x4098cd(0x1d6)]});return _0x4787e8;}function startScheduler(){const _0x21898c=_0x441739;let _0x29d72d=new Date()[_0x21898c(0x155)]();_0x29d72d==0x1&&backupConfigFiles();_0x29d72d==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x315489=_0x441739;fs[_0x315489(0x126)](configpath,{'withFileTypes':!![]})[_0x315489(0x1ff)](_0x6c87d8=>{const _0x78b450=_0x315489;if(!_0x6c87d8[_0x78b450(0x147)]())fs[_0x78b450(0x149)](configpath+_0x6c87d8['name'],configbackuppath+_0x6c87d8[_0x78b450(0x201)]);});}async function triggerAnalytics(){const _0x10f700=_0x441739;analytics[_0x10f700(0x140)]({'title':_0x10f700(0x17b),'href':_0x10f700(0x1a8),'path':'/v'+serverversion});}function validateCredentials(_0x2e90d1,_0x66cd0a){const _0xaab10f=_0x441739;if(_0x2e90d1[_0xaab10f(0x1e4)]==settings['bbUsername']&&bcrypt[_0xaab10f(0x1de)](_0x2e90d1[_0xaab10f(0x16e)],settings[_0xaab10f(0x1ae)])){if(settings[_0xaab10f(0x24b)])return{'allow':![],'reason':_0xaab10f(0x146),'token':null};else{const _0x6d018b=generateLoginToken(_0x66cd0a);return{'allow':!![],'reason':_0xaab10f(0x1b3),'token':_0x6d018b};}}else return{'allow':![],'reason':_0xaab10f(0x1f0),'token':null};}function _0x7594(){const _0x5bbb13=['No\x20authentication\x20token','\x20minutes','login\x20token\x20generated','value','lowdb','accept','type','yes','live','entries','Invalid\x20authentication\x20token\x20(1)','mode','emitHistory','clientip','headless','verify',':\x20Bot\x20Mgr\x20>\x20','inherit','timestamp','stop','::ffff:127.0.0.1','@analytics/google-analytics-v3','enabled','sockets','telegramToken','once','RSA','success','build2','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Alerts','use','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','store-headless','NTBA_FIX_319','\x20to\x20','User\x20has\x20been\x20validated','timeshift','telegramIpApproval','/:bot/configuration','sendPortfolioTelegram','9147591TgbBxF','reason','alerts','sha256','compareSync','942234aMVXEP','env','set','bbUsername','user','username','/:bot/portfolio','getPortfolio','(((.+)+)+)+$','30\x20min','Login\x20accepted','readFileSync','RSA-OAEP','/restart\x20-\x20restart\x20bot(s)\x0a','generateKeyPairAsync','deleted\x20Bot\x20','slice','invalid\x20credentials','loginRequired','token','join','::1','reload','index.html','padStart','Bot\x20Mgr\x20>\x20','exp','mkdirSync','new','orders','Unauthorized\x20attempt\x20to\x20delete\x20bot','Allow\x20login\x20from\x20IP\x20address\x20<b>','forEach','Invalid\x20authentication\x20token\x20(2)','name','Unauthorized\x20attempt\x20to\x20update\x20bot','add',',\x20must\x20be\x20a\x204\x20digit\x20number','404\x20Not\x20Found','sortBy','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','bots','stopped','find','search','All\x20bots\x20running\x20right\x20now','secure','show','unlinkSync','<b>Telegram\x20Bot\x20Status:</b>\x0a','connected','disconnect','3000','analytics','toIPv4MappedAddress','/:bot','randomBytes','match','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','bb-config.json','get','/:bot/support','Unauthorized\x20attempt\x20to\x20get\x20logs','/on\x20-\x20start\x20bot(s)\x0a','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','toggleBotMode','telegram','\x20|\x20','child_process','write','event','isValid','function','getFullYear','existsSync','/:bot/coins','default','config/','apiKey','starting\x20bot\x20|\x20Bot\x20','botmanager','127.0.0.1','-results.json','argv','/off\x20-\x20stop\x20bot(s)\x0a','conn','blacklist','logout','starting\x20new\x20bot\x20|\x20Bot\x20','2FA\x20login\x20rejected','cancelLoading','Notifications\x20enabled','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','ipc','manual','keys','Unauthorized\x20attempt\x20to\x20update\x20settings','Notifications\x20enabled\x0a','removeListener','/names\x20-\x20show\x20bot\x20names\x0a','temporaryAccessAllowed','cloneDeep','login\x20token\x20valid','send','telegramEnabled','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','showname','f2aRequired','toggle-bot-mode','from','login\x20required','getStartingBalances','toIPv4Address','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','************','args','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','initclient','toString','173698PIrsoH','build','encryptedUuid','remoteAddress','8036mMIxsg','-events.json','\x20only\x0a','pidRefreshToken','Bot\x20','Temporary\x20access\x20rejected','sign','new-disabled','bcryptjs','Unauthorized\x20login\x20attempt\x20(timeout)','1332uTILjc','getDate','updatebotmanager','storeConfiguration','temporary\x20access\x20timeout','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','217249UjgkOO','all','</b>\x20?','stopPolling','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','update-bb','You\x20can\x20use\x20the\x20following\x20commands:\x0a','store-configuration','getHours','getMinutes','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','privateKey','hasOwnProperty','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','5\x20min','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Balance\x20Bot','2701365OWcAoZ','readdirSync','listen','ipaddr.js','parse','15\x20min','get-portfolio','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','idling\x20bot\x20\x20\x20|\x20Bot\x20','placeOrder','\x20>\x20','3822752fCIGCp','whitelistEnabled','cancel-loading','version','length','telegram2FaApproval','yargs/yargs','settings.','lowdb/adapters/FileSync','bot.js','allow','test','10aOJUdj','answerCallbackQuery','hashSync','UA-192771731-1','page','order','uuid','Invalid\x20Telegram\x20token','bot-','data','2FA\x20login\x20required','isDirectory','Token\x20blacklisted','copyFileSync','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','hybrid-crypto-js','randomFillSync','8ISfINu','referer','HTML','status','push','exit','error\x20while\x20deleting\x20config\x20files:\x20','clients','getUTCHours','delete-bot','botID','2FA\x20login\x20token\x20generated','server','Ok,\x20will\x20send\x20order\x20notifications\x20only','No\x20bots\x20running\x20right\x20now','assign','started','port','defaults','handshake','telegramUsername','disabled','constructor','log','Notifications\x20types:\x20','error','date-fns','settings','bot','temporary\x20token\x20generated','stringify','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','kill','password','SIGTERM','getMonth','Unauthorized\x20attempt\x20to\x20add\x20bot','chat','sendFile','getTime','reject','All\x20bots','access','callback_query','getSeconds','remove','Balance\x20Bot\x20Server','pidExpireLogin','message','Password\x20reset\x20rejected','running','bb/','emit','publicKey','-----------------------------------------------------------------------------------','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','/disable\x20-\x20disable\x20notifications\x0a','then','login','Access\x20enabled\x20for\x20','2FA','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','telegramChatId','login\x20not\x20required','apply','writeFileSync','isIPv4MappedAddress','Crypt','secret','expiry','sendMessage','/:bot/history','decrypt','telegramEvents','host','bb-secure.json','createServer','temporary\x20access\x20not\x20allowed','botname','Orders','Notifications\x20disabled\x0a','Password\x20has\x20been\x20reset\x20to:\x20','polling_error','filter','Unauthorized\x20attempt\x20to\x20log\x20out','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','whitelist','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Notifications\x20disabled','catch','https://hodlerhacks.com','disabled\x20Bot\x20','split','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','onText','version.json','bbPassword','-config.json','Invalid\x20IP\x20address'];_0x7594=function(){return _0x5bbb13;};return _0x7594();}function refreshToken(_0x12c5a5){const _0x5cc724=_0x441739,_0x104cf1=generateLoginToken(_0x12c5a5);return{'allow':!![],'reason':_0x5cc724(0x1b3),'token':_0x104cf1};}function validateAccess(_0x5a1656,_0x13f5c3){const _0x2a53e6=_0x441739;let _0x335c78=devices[_0x13f5c3]['ip'],_0x9db142;const _0x55f741=_0x3369ab=>{const _0x45a019=_0x1653;if(settings[_0x45a019(0x1f1)]){if(settings[_0x45a019(0x24b)]){if(telegram2FaApproved(_0x13f5c3)){const _0x2ad34e=generateLoginToken(_0x13f5c3);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x2ad34e};}else return{'allow':![],'reason':_0x45a019(0x24e),'token':null};}else return _0x9db142=validToken(_0x3369ab,_0x13f5c3),_0x9db142['hasOwnProperty'](_0x45a019(0x1cc))?{'allow':!![],'reason':_0x45a019(0x246),'token':_0x3369ab}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x45a019(0x18c),'token':null};};if(settings[_0x2a53e6(0x131)]){let _0x475cda=[...settings[_0x2a53e6(0x1a4)],_0x2a53e6(0x1f4),_0x2a53e6(0x1c5),_0x2a53e6(0x231)];if(_0x475cda['includes'](_0x335c78))return _0x55f741(_0x5a1656);else{_0x9db142=validToken(_0x5a1656,_0x13f5c3);if(_0x9db142['hasOwnProperty'](_0x2a53e6(0x1cc)))return _0x55f741(_0x5a1656);else{if(telegramIpApproved(_0x13f5c3)){const _0x4a26a1=generateToken(_0x13f5c3);return _0x9db142=_0x55f741(_0x5a1656),_0x9db142[_0x2a53e6(0x13a)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4a26a1}:_0x9db142;}else return settings[_0x2a53e6(0x244)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x2a53e6(0x19a),'token':null};}}}else return _0x55f741(_0x5a1656);}function timelyDecrypt(_0x1c3545,_0x51b1ec=!![]){const _0x26f20a=_0x441739;if(_0x1c3545)try{const _0x51ff30=crypt[_0x26f20a(0x195)](secure[_0x26f20a(0x11f)],_0x1c3545)[_0x26f20a(0x17d)],_0x5b2384=_0x51ff30['split']('@')[0x0],_0x57d50f=_0x51ff30[_0x26f20a(0x1aa)]('@')[0x1],_0x36b4bc=new Date()[_0x26f20a(0x174)]();if(_0x51b1ec){if(_0x36b4bc-_0x57d50f<maxSecretAge*0x3e8)return _0x5b2384;else return![];}else return _0x5b2384;}catch(_0x39aee8){return![];}else return![];}const validToken=(_0x2864fc,_0x16f1ff)=>{const _0x14891b=_0x441739,_0xe19f5e=devices[_0x16f1ff]['ip'];if(!_0x2864fc)return{'error':_0x14891b(0x1b1)};for(let _0x305f16 of blacklist){if(_0x305f16[_0x14891b(0x1f2)]==_0x2864fc)return{'error':_0x14891b(0x148)};}let _0x2f51aa;try{_0x2f51aa=jwt[_0x14891b(0x1c0)](_0x2864fc,secure[_0x14891b(0x191)]+_0x16f1ff);}catch{return{'error':_0x14891b(0x1bb)};}if(!_0x2f51aa['hasOwnProperty']('clientip')&&!_0x2f51aa['hasOwnProperty'](_0x14891b(0x1e4))||!_0x2f51aa[_0x14891b(0x120)](_0x14891b(0x1f9)))return{'error':_0x14891b(0x200)};if(!_0x2f51aa[_0x14891b(0x120)](_0x14891b(0x1e4))&&_0x2f51aa[_0x14891b(0x120)](_0x14891b(0x1be))){const {clientip:_0x458297}=_0x2f51aa;return _0xe19f5e==_0x458297?{'success':_0x14891b(0x1d5)}:{'error':_0x14891b(0x1b0)};}else{if(_0x2f51aa[_0x14891b(0x120)]('username')&&_0x2f51aa[_0x14891b(0x120)](_0x14891b(0x1be))){const {username:_0x3d4edf,clientip:_0x3a174f}=_0x2f51aa;return settings[_0x14891b(0x1e2)]==_0x3d4edf&&_0xe19f5e==_0x3a174f?{'success':_0x14891b(0x1d5)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x5576f1=>{const _0x16ecb1=_0x441739;if(_0x5576f1){const _0x28b239=devices[_0x5576f1]['ip'];return jwt[_0x16ecb1(0x261)]({'username':settings[_0x16ecb1(0x1e2)],'clientip':_0x28b239},secure[_0x16ecb1(0x191)]+_0x5576f1,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x26bba5=>{const _0x22c54f=_0x441739;if(_0x26bba5){const _0x4daafb=devices[_0x26bba5]['ip'];return jwt[_0x22c54f(0x261)]({'clientip':_0x4daafb},secure['secret']+_0x26bba5,{'expiresIn':devices[_0x26bba5][_0x22c54f(0x1d7)][_0x22c54f(0x192)]*0x3c});}else return![];},telegramIpApproved=_0x3d8f6c=>{const _0x392175=_0x441739;let _0x364171=![];return devices[_0x3d8f6c][_0x392175(0x1d7)]&&devices[_0x3d8f6c][_0x392175(0x1d7)][_0x392175(0x192)]!=_0x392175(0x175)&&(_0x364171=devices[_0x3d8f6c]['telegramIpApproval'][_0x392175(0x1be)]==devices[_0x3d8f6c]['ip']&&new Date()[_0x392175(0x174)]()-devices[_0x3d8f6c][_0x392175(0x1d7)][_0x392175(0x1c3)]<devices[_0x3d8f6c][_0x392175(0x1d7)][_0x392175(0x192)]*0x3c*0x3e8),_0x364171;},telegram2FaApproved=_0x4afa5f=>{const _0x7b576f=_0x441739;let _0x341d93=![];return devices[_0x4afa5f][_0x7b576f(0x135)]&&devices[_0x4afa5f]['telegram2FaApproval'][_0x7b576f(0x192)]!=_0x7b576f(0x175)&&(_0x341d93=devices[_0x4afa5f][_0x7b576f(0x135)]['clientip']==devices[_0x4afa5f]['ip']&&new Date()[_0x7b576f(0x174)]()-devices[_0x4afa5f][_0x7b576f(0x135)][_0x7b576f(0x1c3)]<devices[_0x4afa5f][_0x7b576f(0x135)][_0x7b576f(0x192)]*0x3c*0x3e8),_0x341d93;},normalizeIP=_0x5c47de=>{const _0x538415=_0x441739;let _0x1c0476=null,_0x4d213c=null;if(ipaddr[_0x538415(0x227)](_0x5c47de)){const _0x771bb1=ipaddr['parse'](_0x5c47de);_0x771bb1['kind']()==='ipv6'?(_0x771bb1[_0x538415(0x18f)]()&&(_0x1c0476=_0x771bb1[_0x538415(0x250)]()[_0x538415(0x256)]()),_0x4d213c=_0x771bb1[_0x538415(0x256)]()):(_0x1c0476=_0x771bb1[_0x538415(0x256)](),_0x4d213c=_0x771bb1[_0x538415(0x215)]()[_0x538415(0x256)]());}return{'show':_0x1c0476?_0x1c0476:_0x4d213c,'store':_0x4d213c};};