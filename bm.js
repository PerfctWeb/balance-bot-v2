const _0x3ad619=_0x1cde;(function(_0x2f59a7,_0x38f7a5){const _0xcadeb0=_0x1cde,_0x45a3cc=_0x2f59a7();while(!![]){try{const _0x5a5fdf=parseInt(_0xcadeb0(0x175))/0x1+-parseInt(_0xcadeb0(0xe9))/0x2*(parseInt(_0xcadeb0(0x12c))/0x3)+parseInt(_0xcadeb0(0x1a3))/0x4*(-parseInt(_0xcadeb0(0x1f4))/0x5)+parseInt(_0xcadeb0(0x158))/0x6*(parseInt(_0xcadeb0(0x1cb))/0x7)+parseInt(_0xcadeb0(0x125))/0x8*(parseInt(_0xcadeb0(0x1a9))/0x9)+-parseInt(_0xcadeb0(0x1f0))/0xa*(parseInt(_0xcadeb0(0xd9))/0xb)+parseInt(_0xcadeb0(0x119))/0xc;if(_0x5a5fdf===_0x38f7a5)break;else _0x45a3cc['push'](_0x45a3cc['shift']());}catch(_0x19b39c){_0x45a3cc['push'](_0x45a3cc['shift']());}}}(_0x224d,0xe325c));const _0x6f23ef=function(){let _0x5173a2=!![];return function(_0x172378,_0x47782b){const _0x18a0e2=_0x5173a2?function(){const _0x4d58ed=_0x1cde;if(_0x47782b){const _0x3fee2d=_0x47782b[_0x4d58ed(0x132)](_0x172378,arguments);return _0x47782b=null,_0x3fee2d;}}:function(){};return _0x5173a2=![],_0x18a0e2;};}(),_0x10f3db=_0x6f23ef(this,function(){const _0x3a3b01=_0x1cde;return _0x10f3db['toString']()['search'](_0x3a3b01(0x1a1))[_0x3a3b01(0xc4)]()[_0x3a3b01(0x137)](_0x10f3db)['search'](_0x3a3b01(0x1a1));});_0x10f3db();'use strict';process[_0x3ad619(0x117)][_0x3ad619(0x13b)]=0x1;const childProcess=require('child_process'),FileSync=require(_0x3ad619(0x1ca)),fs=require('fs'),fns=require('date-fns'),low=require(_0x3ad619(0x130)),path=require(_0x3ad619(0xdd)),crypto=require('crypto'),Crypt=require(_0x3ad619(0x157))['Crypt'],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x3ad619(0x1c4)),jwt=require(_0x3ad619(0x1be)),analyticsLib=require(_0x3ad619(0x114))[_0x3ad619(0xbe)],googleAnalytics=require(_0x3ad619(0x118))[_0x3ad619(0xbe)],ipaddr=require(_0x3ad619(0x1cd)),argv=require(_0x3ad619(0x1fd))(process[_0x3ad619(0x13c)]['slice'](0x2))[_0x3ad619(0x13c)],PORT=argv[_0x3ad619(0x18c)]||_0x3ad619(0x15c),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x3ad619(0xf0)](PORT))return console['log'](_0x3ad619(0x1e4)+PORT+_0x3ad619(0x126)),process['exit'](0x1);const HOST=argv[_0x3ad619(0x124)]||null,userID=argv[_0x3ad619(0x1c2)]||'';let bbpath=_0x3ad619(0x105),bbpath2='';const botfile=_0x3ad619(0x1bb),configfile=_0x3ad619(0xc7),settingsfile=_0x3ad619(0x19b),securefile=_0x3ad619(0xe3),validInstallation=fs[_0x3ad619(0x15e)]('../install.js');!fs[_0x3ad619(0x15e)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3ad619(0x1d1)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x3ad619(0x1f2),configbackuppath=configpath+_0x3ad619(0x1eb);!fs[_0x3ad619(0x15e)](configpath)&&fs[_0x3ad619(0xb2)](configpath);!fs[_0x3ad619(0x15e)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3ad619(0x16a)]({'settings':{'timeshift':0x0}})[_0x3ad619(0x163)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3ad619(0x16a)]({'secure':{},'blacklist':[]})[_0x3ad619(0x163)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x3ad619(0x13e)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3ad619(0xbc))[_0x3ad619(0x1d0)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x3ad619(0x134)),app=express(),http=require(_0x3ad619(0xeb))[_0x3ad619(0x1aa)](app);app[_0x3ad619(0xb0)](express[_0x3ad619(0x167)](path[_0x3ad619(0x17c)](__dirname,bbpath2,_0x3ad619(0xaf)))),app[_0x3ad619(0xb0)](express[_0x3ad619(0x167)](path[_0x3ad619(0x17c)](__dirname,bbpath2,_0x3ad619(0x202)))),app[_0x3ad619(0x144)]('/',function(_0x475f35,_0x4cd4f5){const _0x3d0fa6=_0x3ad619;_0x4cd4f5[_0x3d0fa6(0x104)](path[_0x3d0fa6(0x17c)](__dirname,bbpath2,_0x3d0fa6(0xaf),'index.html'));}),app[_0x3ad619(0x144)](_0x3ad619(0xf4),function(_0x476208,_0x1c05ef){const _0x28a86b=_0x3ad619;_0x1c05ef[_0x28a86b(0x104)](path[_0x28a86b(0x17c)](__dirname,bbpath2,'build',_0x28a86b(0x11e)));}),app[_0x3ad619(0x144)](_0x3ad619(0x1e8),(_0x3a2dc0,_0x28192d)=>{const _0x4e8457=_0x3ad619;_0x28192d[_0x4e8457(0x104)](path[_0x4e8457(0x17c)](__dirname,bbpath2,'build',_0x4e8457(0x11e)));}),app[_0x3ad619(0x144)](_0x3ad619(0x204),(_0x487c5f,_0x5bd64f)=>{const _0x5bbf6a=_0x3ad619;_0x5bd64f['sendFile'](path[_0x5bbf6a(0x17c)](__dirname,bbpath2,_0x5bbf6a(0x202),'index.html'));}),app[_0x3ad619(0x144)](_0x3ad619(0xbd),(_0x3b5118,_0xde671b)=>{const _0x30943b=_0x3ad619;_0xde671b[_0x30943b(0x104)](path['join'](__dirname,bbpath2,_0x30943b(0x202),_0x30943b(0x11e)));}),app['get'](_0x3ad619(0x14d),(_0x1e38f0,_0x5eb07f)=>{const _0x5b7c82=_0x3ad619;_0x5eb07f['sendFile'](path[_0x5b7c82(0x17c)](__dirname,bbpath2,_0x5b7c82(0x202),_0x5b7c82(0x11e)));}),app['get'](_0x3ad619(0xc5),(_0x57d03d,_0x4c9b8b)=>{const _0x3ffc90=_0x3ad619;_0x4c9b8b[_0x3ffc90(0x104)](path[_0x3ffc90(0x17c)](__dirname,bbpath2,_0x3ffc90(0x202),'index.html'));}),app[_0x3ad619(0x144)](_0x3ad619(0x133),(_0x4401e2,_0x4105aa)=>{const _0x195cb8=_0x3ad619;_0x4105aa[_0x195cb8(0x104)](path[_0x195cb8(0x17c)](__dirname,bbpath2,_0x195cb8(0x202),_0x195cb8(0x11e)));});if(HOST)http[_0x3ad619(0x191)](PORT,HOST);else http[_0x3ad619(0x191)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x3ad619(0x1ae),'plugins':[googleAnalytics({'trackingId':_0x3ad619(0xdf)})]}),TelegramBot=require(_0x3ad619(0x1e5));let tgBot;if(settings[_0x3ad619(0xd0)]&&settings[_0x3ad619(0xd0)]!=''&&settings[_0x3ad619(0x10d)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x333459=_0x3ad619;console[_0x333459(0x108)](''),console[_0x333459(0x108)](_0x333459(0xbb)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x333459(0x108)](_0x333459(0xbb));if(config[_0x333459(0x13d)]!=0x0)config[_0x333459(0x141)](_0x4e4b12=>{const _0x172f9c=_0x333459;if(_0x4e4b12[_0x172f9c(0x1d7)]==_0x172f9c(0x101)||_0x4e4b12[_0x172f9c(0x1d7)]==_0x172f9c(0x1cc))logging(_0x172f9c(0x1df)+_0x4e4b12[_0x172f9c(0xb3)]+_0x172f9c(0x127)+_0x4e4b12[_0x172f9c(0x123)]),startBot([_0x4e4b12[_0x172f9c(0xb3)],userID],{'cwd':bbpath},function(_0x442f19){if(_0x442f19)logging(_0x442f19);});else(_0x4e4b12[_0x172f9c(0x1d7)]==_0x172f9c(0xfe)||_0x4e4b12[_0x172f9c(0x1d7)]=='new-disabled')&&logging(_0x172f9c(0x109)+_0x4e4b12['botID']+_0x172f9c(0x127)+_0x4e4b12[_0x172f9c(0x123)]);});else!newBot&&console[_0x333459(0x108)](_0x333459(0xd2));if(newBot)addBot();console[_0x333459(0x108)](_0x333459(0xbb)),console['log']('');}function startSocket(){const _0x5e24d1=_0x3ad619;io['on'](_0x5e24d1(0x1e6),_0x4456b6=>{const _0x1fe7b8=_0x5e24d1;let _0x4b82f8,_0x2c4471,_0x83fecd,_0x5156e1,_0x459f77;const _0x10423a=_0x4456b6[_0x1fe7b8(0x206)][_0x1fe7b8(0x174)][_0x1fe7b8(0x148)];_0x2c4471=_0x10423a['match'](/bot[0-9]{3}/);if(_0x2c4471)_0x83fecd=_0x2c4471[0x0][_0x1fe7b8(0x106)](/[0-9]{3}/);if(_0x83fecd)_0x4b82f8=_0x83fecd[0x0];else _0x4b82f8=_0x1fe7b8(0x1a5);const _0x5c4b85=_0x4456b6[_0x1fe7b8(0x206)][_0x1fe7b8(0x111)][_0x1fe7b8(0x165)];if(!_0x5c4b85)_0x4456b6[_0x1fe7b8(0xe1)](_0x1fe7b8(0x1d7),{'publicKey':secure[_0x1fe7b8(0x189)]});else{_0x5156e1=timelyDecrypt(_0x5c4b85,![]);if(!_0x5156e1)_0x4456b6[_0x1fe7b8(0xe1)](_0x1fe7b8(0x1d7),{'publicKey':secure[_0x1fe7b8(0x189)]});else{_0x459f77=normalizeIP(_0x4456b6['conn'][_0x1fe7b8(0x1d5)])[_0x1fe7b8(0x112)];if(!devices[_0x5156e1])devices[_0x5156e1]={'uuid':_0x5156e1,'access':{'token':null}};devices[_0x5156e1]['ip']=_0x459f77;const _0x17b9e2=addClient(_0x4456b6['id'],_0x5156e1,_0x4b82f8);setAccess(_0x17b9e2),_0x4456b6['on'](_0x1fe7b8(0x18b),_0x2f654e=>{const _0x217dc7=_0x1fe7b8,_0x5bfa58=timelyDecrypt(_0x2f654e['password']);if(_0x5bfa58){_0x2f654e={'username':_0x2f654e[_0x217dc7(0x1db)],'password':_0x5bfa58},devices[_0x5156e1][_0x217dc7(0x200)]=validateCredentials(_0x2f654e,_0x5156e1);if(devices[_0x5156e1][_0x217dc7(0x200)]['allow']==![]&&devices[_0x5156e1][_0x217dc7(0x200)][_0x217dc7(0xf9)]==_0x217dc7(0x1ad))_0x4456b6[_0x217dc7(0xe1)]('status',{'access':devices[_0x5156e1]['access']}),loginAccess2FA(_0x5156e1,_0x459f77);else{if(devices[_0x5156e1]['access']['allow']==![]&&devices[_0x5156e1][_0x217dc7(0x200)]['reason']==_0x217dc7(0x187))_0x4456b6[_0x217dc7(0xe1)](_0x217dc7(0x1d7),{'access':devices[_0x5156e1][_0x217dc7(0x200)]});else devices[_0x5156e1][_0x217dc7(0x200)]['allow']&&devices[_0x5156e1][_0x217dc7(0x200)][_0x217dc7(0xf9)]==_0x217dc7(0xce)&&(getClientsWithUuid(_0x5156e1)[_0x217dc7(0x141)](_0x2db1d0=>{setAccess(_0x2db1d0);}),setTokenRefresh(_0x5156e1),setSessionTimeout('login',_0x5156e1));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x4456b6['on'](_0x1fe7b8(0x19e),()=>{resetPassword();}),_0x4456b6['on'](_0x1fe7b8(0x121),_0x31d8fc=>{removeClient(_0x4456b6['id']);});}}});}function initClient(_0x5ed18d){const _0x3f5684=_0x3ad619;if(_0x5ed18d!=_0x3f5684(0x1a5)&&config[_0x3f5684(0x1c5)]!=''){if(pid[_0x5ed18d])pid[_0x5ed18d][_0x3f5684(0x196)]({'function':_0x3f5684(0x1a0),'args':null});}}function getSocket(_0x229e92){const _0x14b49a=_0x3ad619;return io[_0x14b49a(0x15a)][_0x14b49a(0x15a)][_0x14b49a(0x144)](_0x229e92);}function setAccess(_0x9d7c4e){const _0xf0a05b=_0x3ad619,_0x58ea86=getSocket(_0x9d7c4e['id']),_0x8cb786=_0x9d7c4e[_0xf0a05b(0x186)],_0x1700eb=_0x9d7c4e[_0xf0a05b(0x166)];devices[_0x8cb786][_0xf0a05b(0x200)]=validateAccess(devices[_0x8cb786][_0xf0a05b(0x200)][_0xf0a05b(0x12f)],_0x8cb786),_0x58ea86['join'](_0x8cb786);if(devices[_0x8cb786]['access'][_0xf0a05b(0x1c8)]){_0x58ea86[_0xf0a05b(0x17c)](_0x1700eb);if(_0x1700eb==_0xf0a05b(0x1a5))initializeSocketBotManager(_0x58ea86);else initializeSocketBot(_0x58ea86);initClient(_0x1700eb);}devices[_0x8cb786][_0xf0a05b(0x200)]['token']&&devices[_0x8cb786][_0xf0a05b(0x200)][_0xf0a05b(0xf9)]==_0xf0a05b(0xee)&&setSessionTimeout('2FA',_0x8cb786),devices[_0x8cb786][_0xf0a05b(0x200)][_0xf0a05b(0x12f)]&&devices[_0x8cb786]['access'][_0xf0a05b(0xf9)]==_0xf0a05b(0xe5)&&setSessionTimeout(_0xf0a05b(0x18b),_0x8cb786),_0x58ea86[_0xf0a05b(0xe1)](_0xf0a05b(0x1d7),{'status':_0x9d7c4e[_0xf0a05b(0x161)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x8cb786]['access'],'externalip':devices[_0x8cb786]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),devices[_0x8cb786]['access'][_0xf0a05b(0x1c8)]==![]&&devices[_0x8cb786]['access'][_0xf0a05b(0xf9)]==_0xf0a05b(0x1b0)&&temporaryAccess2FA(_0x8cb786,devices[_0x8cb786]['ip']);}function setSessionTimeout(_0x2d9f7c,_0x1ebd15){const _0x51d0d9=_0x3ad619;let _0x1a96d3;if(_0x2d9f7c=='login')_0x1a96d3=loginExpiry*0x3c*0x3e8;else _0x1a96d3=devices[_0x1ebd15][_0x51d0d9(0x18d)][_0x51d0d9(0x170)]*0x3c*0x3e8-(new Date()[_0x51d0d9(0x1ab)]()-devices[_0x1ebd15]['telegramIpApproval'][_0x51d0d9(0x140)]);if(devices[_0x1ebd15][_0x51d0d9(0xcb)])clearTimeout(devices[_0x1ebd15][_0x51d0d9(0xcb)]);devices[_0x1ebd15][_0x51d0d9(0xcb)]=setTimeout(()=>{const _0x11ef7b=_0x51d0d9;if(devices[_0x1ebd15][_0x11ef7b(0x1b8)])clearTimeout(devices[_0x1ebd15][_0x11ef7b(0x1b8)]);removeSocketListeners(_0x1ebd15),addBlacklist(_0x1ebd15),devices[_0x1ebd15]['telegramIpApproval']=null,devices[_0x1ebd15][_0x11ef7b(0xcf)]=null,devices[_0x1ebd15][_0x11ef7b(0x200)][_0x11ef7b(0x12f)]=null,devices[_0x1ebd15]['access']=validateAccess(devices[_0x1ebd15][_0x11ef7b(0x200)]['token'],_0x1ebd15),!(devices[_0x1ebd15][_0x11ef7b(0x200)][_0x11ef7b(0x1c8)]&&devices[_0x1ebd15]['access'][_0x11ef7b(0xf9)]==_0x11ef7b(0x192))&&(_0x2d9f7c=='login'?io['to'](_0x1ebd15)[_0x11ef7b(0xe1)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x1ebd15)[_0x11ef7b(0xe1)](_0x11ef7b(0x1d7),{'access':{'allow':![],'reason':_0x11ef7b(0x151),'token':null}})),devices[_0x1ebd15][_0x11ef7b(0x200)][_0x11ef7b(0x12f)]=null;},_0x1a96d3);}function setTokenRefresh(_0x4cf389){const _0x157dbb=_0x3ad619;if(devices[_0x4cf389][_0x157dbb(0x1b8)])clearTimeout(devices[_0x4cf389][_0x157dbb(0x1b8)]);devices[_0x4cf389][_0x157dbb(0x1b8)]=setTimeout(()=>{const _0x52df90=_0x157dbb;getClientsWithUuid(_0x4cf389)['length']!=0x0?(devices[_0x4cf389][_0x52df90(0x200)]=refreshToken(_0x4cf389),io['to'](_0x4cf389)[_0x52df90(0xe1)](_0x52df90(0x1d7),{'status':_0x52df90(0x14f),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4cf389]['access'],'externalip':devices[_0x4cf389]['ip'],'publicKey':secure[_0x52df90(0x189)],'validInstallation':validInstallation}),setTokenRefresh(_0x4cf389)):clearTimeout(devices[_0x4cf389][_0x52df90(0x1b8)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x6089ed){const _0x7d62a6=_0x3ad619,_0x58e175=getClient(_0x6089ed['id'])[_0x7d62a6(0x186)];_0x6089ed[_0x7d62a6(0xe1)]('bots',config),_0x6089ed[_0x7d62a6(0xe1)]('settings',cleanSettings()),_0x6089ed['on'](_0x7d62a6(0xdc),_0x4aec4e=>{const _0xd08640=_0x7d62a6;if(validateAccess(_0x4aec4e,_0x58e175)[_0xd08640(0x1c8)])addBot();else logging(_0xd08640(0xc0));}),_0x6089ed['on'](_0x7d62a6(0x19a),(_0x1dea59,_0xe2894e)=>{const _0x4eded1=_0x7d62a6;if(validateAccess(_0xe2894e,_0x58e175)['allow'])toggleBot(_0x1dea59[_0x4eded1(0xb3)],_0x1dea59['status'],_0x1dea59[_0x4eded1(0x1da)]);else logging(_0x4eded1(0x16d));}),_0x6089ed['on'](_0x7d62a6(0x153),(_0x4fb106,_0x349e65)=>{const _0xa2b53c=_0x7d62a6;if(validateAccess(_0x349e65,_0x58e175)[_0xa2b53c(0x1c8)])deleteBot(_0x4fb106);else logging(_0xa2b53c(0x1e2));}),_0x6089ed['on'](_0x7d62a6(0xb1),(_0xbfc7f0,_0x31765b)=>{const _0x2fc6d4=_0x7d62a6;if(validateAccess(_0x31765b,_0x58e175)[_0x2fc6d4(0x1c8)])storeSettings(_0xbfc7f0,!![]);else logging(_0x2fc6d4(0x1a7));}),_0x6089ed['on'](_0x7d62a6(0x116),(_0x18829b,_0x491bb3)=>{const _0x22bbac=_0x7d62a6;if(validateAccess(_0x491bb3,_0x58e175)[_0x22bbac(0x1c8)])updateBB();else logging(_0x22bbac(0x1a7));}),_0x6089ed['on'](_0x7d62a6(0x1bc),_0x20685c=>{const _0x1d42bc=_0x7d62a6;if(validateAccess(_0x20685c,_0x58e175)[_0x1d42bc(0x1c8)]){if(devices[_0x58e175][_0x1d42bc(0x1b8)])clearTimeout(devices[_0x58e175][_0x1d42bc(0x1b8)]);if(devices[_0x58e175]['pidExpireLogin'])clearTimeout(devices[_0x58e175][_0x1d42bc(0xcb)]);removeSocketListeners(getClient(_0x6089ed['id'])[_0x1d42bc(0x186)]),addBlacklist(_0x58e175),devices[_0x58e175]['telegramIpApproval']=null,devices[_0x58e175][_0x1d42bc(0xcf)]=null,devices[_0x58e175][_0x1d42bc(0x200)][_0x1d42bc(0x12f)]=null,io['to'](getClient(_0x6089ed['id'])[_0x1d42bc(0x186)])[_0x1d42bc(0xe1)](_0x1d42bc(0x1d7),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x1d42bc(0x156));});}function initializeSocketBot(_0x12bdd6){const _0x31670c=_0x3ad619,_0x2d5c21=getClient(_0x12bdd6['id'])[_0x31670c(0x166)],_0x232833=getClient(_0x12bdd6['id'])['uuid'];_0x12bdd6['on'](_0x31670c(0x145),(_0x333591,_0x13490b)=>{const _0x29d2b9=_0x31670c;if(validateAccess(_0x13490b,_0x232833)[_0x29d2b9(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21]['send']({'function':'emitHistory','args':_0x333591});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x12bdd6['on'](_0x31670c(0x1c0),(_0x42778f,_0x5bae3f)=>{const _0x42a553=_0x31670c;if(validateAccess(_0x5bae3f,_0x232833)[_0x42a553(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x42a553(0x196)]({'function':_0x42a553(0x17a),'args':_0x42778f});}else logging(_0x42a553(0x1fc));}),_0x12bdd6['on'](_0x31670c(0xd1),(_0x5c3ffa,_0x59ce41)=>{const _0x463c61=_0x31670c;if(validateAccess(_0x59ce41,_0x232833)[_0x463c61(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x463c61(0x196)]({'function':_0x463c61(0x1b6),'args':_0x5c3ffa});}else logging(_0x463c61(0x136));}),_0x12bdd6['on'](_0x31670c(0x15f),(_0x2d06ac,_0x3e8905)=>{const _0x1a8223=_0x31670c;if(validateAccess(_0x3e8905,_0x232833)[_0x1a8223(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x1a8223(0x196)]({'function':_0x1a8223(0xf2),'args':_0x2d06ac});}else logging(_0x1a8223(0x129));}),_0x12bdd6['on'](_0x31670c(0x131),_0x16ffb0=>{const _0x57ff15=_0x31670c;if(validateAccess(_0x16ffb0,_0x232833)['allow']){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x57ff15(0x196)]({'function':_0x57ff15(0x1b4),'args':null});}else logging(_0x57ff15(0xd7));}),_0x12bdd6['on']('place-order',(_0x92860a,_0x48d1a4)=>{const _0x5bf132=_0x31670c;if(validateAccess(_0x48d1a4,_0x232833)[_0x5bf132(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x5bf132(0x196)]({'function':_0x5bf132(0x1e3),'args':_0x92860a});}else logging(_0x5bf132(0x122));}),_0x12bdd6['on'](_0x31670c(0x178),_0x2caa86=>{const _0x18b713=_0x31670c;if(validateAccess(_0x2caa86,_0x232833)[_0x18b713(0x1c8)]){if(pid[_0x2d5c21])pid[_0x2d5c21][_0x18b713(0x196)]({'function':_0x18b713(0x11f),'args':null});}else logging(_0x18b713(0x16c));}),_0x12bdd6['on'](_0x31670c(0x1bc),_0x20f1ed=>{const _0x562a94=_0x31670c;if(validateAccess(_0x20f1ed,_0x232833)[_0x562a94(0x1c8)]){if(devices[_0x232833][_0x562a94(0x1b8)])clearTimeout(devices[_0x232833][_0x562a94(0x1b8)]);if(devices[_0x232833][_0x562a94(0xcb)])clearTimeout(devices[_0x232833][_0x562a94(0xcb)]);removeSocketListeners(getClient(_0x12bdd6['id'])[_0x562a94(0x186)]),addBlacklist(_0x232833),devices[_0x232833]['telegramIpApproval']=null,devices[_0x232833][_0x562a94(0xcf)]=null,devices[_0x232833][_0x562a94(0x200)][_0x562a94(0x12f)]=null,io['to'](getClient(_0x12bdd6['id'])[_0x562a94(0x186)])[_0x562a94(0xe1)](_0x562a94(0x1d7),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x562a94(0x156));});}function removeSocketListeners(_0x318039){const _0x11983b=_0x3ad619;getClientsWithUuid(_0x318039)[_0x11983b(0x141)](_0x50a7a2=>{const _0x4188d8=_0x11983b;getSocket(_0x50a7a2['id'])[_0x4188d8(0xcc)]();});}function cleanSettings(){const _0x5bd39a=_0x3ad619;let _0x16dc4f=settings;return settings[_0x5bd39a(0xd0)]&&settings[_0x5bd39a(0xd0)]!=''&&(_0x16dc4f={..._0x16dc4f,'telegramToken':_0x5bd39a(0x1c7)}),settings[_0x5bd39a(0x12b)]&&settings[_0x5bd39a(0x12b)]!=''&&(_0x16dc4f={..._0x16dc4f,'bbPassword':_0x5bd39a(0x1c7)}),_0x16dc4f;}function _0x1cde(_0x51e040,_0xdf3a1d){const _0x57ce53=_0x224d();return _0x1cde=function(_0x10f3db,_0x6f23ef){_0x10f3db=_0x10f3db-0xae;let _0x224d3b=_0x57ce53[_0x10f3db];return _0x224d3b;},_0x1cde(_0x51e040,_0xdf3a1d);}function updateBB(){const _0x8f9d79=_0x3ad619;installingUpdate=!![],config[_0x8f9d79(0x141)](_0x54f0b0=>{const _0x1617e0=_0x8f9d79;restartBot(_0x54f0b0[_0x1617e0(0xb3)]);}),process[_0x8f9d79(0x196)]({'update':!![]},_0x1de8c5=>{});}function startBot(_0x5ba62f,_0x1c829e,_0x494fb8){const _0x3ef985=_0x3ad619;let _0x270f94=![];const _0x345f85=_0x5ba62f[0x0];_0x1c829e={..._0x1c829e,'stdio':[_0x3ef985(0x181),'inherit',_0x3ef985(0x181),_0x3ef985(0xb9)]},pid[_0x345f85]=childProcess[_0x3ef985(0x11a)](botfile,_0x5ba62f,_0x1c829e),pid[_0x345f85]['on'](_0x3ef985(0x12a),_0x26f323=>{const _0x48f3e4=_0x3ef985;switch(Object[_0x48f3e4(0x1f7)](_0x26f323)[0x0]){case _0x48f3e4(0x123):updateBotName(_0x345f85,_0x26f323[_0x48f3e4(0x123)]);break;case'status':updateStatus(_0x345f85,_0x26f323[_0x48f3e4(0x1d7)]);break;case'live':updateLive(_0x345f85,_0x26f323['live']);break;case'started':updateLive(_0x345f85,_0x26f323[_0x48f3e4(0x173)]),io['to'](_0x345f85)[_0x48f3e4(0xe1)](_0x48f3e4(0x1d7),{'access':{'allow':![],'reason':_0x48f3e4(0xde),'token':null}});break;case _0x48f3e4(0x1d8):_0x26f323['stop']==_0x48f3e4(0x180)&&restartBot(_0x345f85);_0x26f323['stop']=='kill'&&toggleBot(_0x345f85,'disabled','stopped');break;case'telegram':sendTelegram(_0x345f85,_0x26f323['telegram']);break;case _0x48f3e4(0x18f):io['to'](_0x345f85)['emit'](_0x26f323[_0x48f3e4(0x18f)],_0x26f323['args']);break;}}),pid[_0x345f85]['on']('error',function(_0x4915e6){if(_0x270f94)return;_0x270f94=!![],_0x494fb8(_0x4915e6);}),pid[_0x345f85]['on'](_0x3ef985(0xb8),function(_0xd95f60){const _0x32c4ca=_0x3ef985;if(installingUpdate)return;if(_0x270f94)return;_0x270f94=!![],_0x494fb8(null);const _0x3cf36f=dbConfig[_0x32c4ca(0x144)](_0x32c4ca(0xe6))[_0x32c4ca(0x11b)]({'botID':_0x345f85})[_0x32c4ca(0x142)]();_0x3cf36f&&(_0x3cf36f[_0x32c4ca(0x1d7)]==_0x32c4ca(0x101)||_0x3cf36f[_0x32c4ca(0x1d7)]=='new')&&(updateLive(_0x345f85,_0x32c4ca(0x160)),logging(_0x32c4ca(0x19d)+_0x345f85),startBot([_0x345f85,userID],{'cwd':bbpath},function(_0x2143e8){if(_0x2143e8)logging(_0x2143e8);}));});}function stopBot(_0x104e8c){getClientsWithBotID(_0x104e8c)['forEach'](_0xb8d4c3=>{const _0x3d1e39=_0x1cde;getSocket(_0xb8d4c3['id'])[_0x3d1e39(0x121)](!![]),removeClient(_0xb8d4c3['id']);});if(pid[_0x104e8c])pid[_0x104e8c]['kill']();}function restartBot(_0xbdc379){const _0x541f62=_0x3ad619;if(pid[_0xbdc379])pid[_0xbdc379][_0x541f62(0x172)]();}function addBot(){const _0x481e87=_0x3ad619;let _0x45fde6;for(let _0x57588b=0x1;_0x57588b<0x3e9;_0x57588b++){_0x45fde6=_0x57588b['toString']()['padStart'](0x3,'0');let _0xb30fd5=config[_0x481e87(0x11b)](_0xc32d91=>_0xc32d91[_0x481e87(0xb3)]==_0x45fde6);if(!_0xb30fd5)break;}if(_0x45fde6==='1000'){logging(_0x481e87(0x1e9));return;}logging(_0x481e87(0x19c)+_0x45fde6),dbConfig[_0x481e87(0x144)](_0x481e87(0xe6))[_0x481e87(0x182)]({'botID':_0x45fde6,'botname':'Bot\x20'+_0x45fde6,'status':_0x481e87(0x1cc),'live':''})[_0x481e87(0x163)](),startBot([_0x45fde6,userID],{'cwd':bbpath},function(_0x11b719){if(_0x11b719)logging(_0x11b719);}),config=getConfiguration(),io['to'](_0x481e87(0x1a5))[_0x481e87(0xe1)](_0x481e87(0xe6),config);}function deleteBot(_0x48d0de){const _0x4cc879=_0x3ad619;getClientsWithBotID(_0x48d0de)[_0x4cc879(0x141)](_0x11f392=>{const _0x11021f=_0x4cc879;getSocket(_0x11f392['id'])[_0x11021f(0x121)](!![]),removeClient(_0x11f392['id']);}),dbConfig[_0x4cc879(0x144)](_0x4cc879(0xe6))[_0x4cc879(0xd3)]({'botID':_0x48d0de})[_0x4cc879(0x163)](),logging(_0x4cc879(0x1ee)+_0x48d0de),stopBot(_0x48d0de);try{fs['unlinkSync'](path['join'](configpath,_0x4cc879(0xf7)+_0x48d0de+'-config.json')),fs[_0x4cc879(0x1b1)](path[_0x4cc879(0x17c)](configpath,_0x4cc879(0xf7)+_0x48d0de+_0x4cc879(0x10a))),fs[_0x4cc879(0x1b1)](path[_0x4cc879(0x17c)](configpath,_0x4cc879(0xf7)+_0x48d0de+_0x4cc879(0x12d))),fs[_0x4cc879(0x1b1)](path['join'](configpath,_0x4cc879(0xf7)+_0x48d0de+'-results.json'));}catch(_0x1e93fc){if(_0x1e93fc)logging(_0x4cc879(0xcd),_0x1e93fc);}config=getConfiguration(),io['to'](_0x4cc879(0x1a5))[_0x4cc879(0xe1)](_0x4cc879(0xe6),config);}function toggleBot(_0x53e65d,_0x135484,_0x10d936){const _0x2abc6b=_0x3ad619;dbConfig[_0x2abc6b(0x144)](_0x2abc6b(0xe6))['find']({'botID':_0x53e65d})[_0x2abc6b(0x154)]({'status':_0x135484})[_0x2abc6b(0x154)]({'live':_0x10d936})['write']();if(_0x135484==_0x2abc6b(0x101)||_0x135484=='new')logging('enabled\x20Bot\x20'+_0x53e65d),startBot([_0x53e65d,userID],{'cwd':bbpath},function(_0x595f95){if(_0x595f95)logging(_0x595f95);});else(_0x135484==_0x2abc6b(0xfe)||_0x135484=='new-disabled')&&(logging(_0x2abc6b(0xb6)+_0x53e65d),stopBot(_0x53e65d));config=getConfiguration(),io['to'](_0x2abc6b(0x1a5))['emit'](_0x2abc6b(0xe6),config);}function toggleStatus(_0x384588){const _0x451ecf=_0x3ad619;let _0x1097d9=dbConfig[_0x451ecf(0x144)]('bots')[_0x451ecf(0x11b)]({'botID':_0x384588})[_0x451ecf(0x142)](),_0x1b4fb5;if(_0x1097d9[_0x451ecf(0x1d7)]===_0x451ecf(0x101))_0x1b4fb5=_0x451ecf(0xfe);else{if(_0x1097d9['status']===_0x451ecf(0x1cc))_0x1b4fb5=_0x451ecf(0x1b7);else{if(_0x1097d9[_0x451ecf(0x1d7)]===_0x451ecf(0x1b7))_0x1b4fb5=_0x451ecf(0x1cc);else{if(_0x1097d9[_0x451ecf(0x1d7)]===_0x451ecf(0xfe))_0x1b4fb5='enabled';}}}return _0x1b4fb5;}function updateStatus(_0x208be2,_0x317a92){const _0x240caf=_0x3ad619;dbConfig['get'](_0x240caf(0xe6))[_0x240caf(0x11b)]({'botID':_0x208be2})['assign']({'status':_0x317a92})[_0x240caf(0x163)](),config=getConfiguration(),io['to'](_0x240caf(0x1a5))[_0x240caf(0xe1)]('bots',config);}function updateLive(_0x51f6c6,_0xb5ce05){const _0x4d0123=_0x3ad619;dbConfig[_0x4d0123(0x144)](_0x4d0123(0xe6))[_0x4d0123(0x11b)]({'botID':_0x51f6c6})[_0x4d0123(0x154)]({'live':_0xb5ce05})[_0x4d0123(0x163)](),config=getConfiguration(),io['to']('botmanager')[_0x4d0123(0xe1)](_0x4d0123(0xe6),config);}function updateBotName(_0x4d361e,_0x4dfb4f){const _0x50a6e8=_0x3ad619;dbConfig[_0x50a6e8(0x144)]('bots')[_0x50a6e8(0x11b)]({'botID':_0x4d361e})[_0x50a6e8(0x154)]({'botname':_0x4dfb4f})['write'](),config=getConfiguration(),io['to'](_0x50a6e8(0x1a5))[_0x50a6e8(0xe1)](_0x50a6e8(0xe6),config);}function telegramError(_0x37bfe3){const _0xb4adeb=_0x3ad619;console['log'](getTimeStamp()+_0xb4adeb(0xd4));}function validateTelegram(_0x2466ac){const _0x338179=_0x3ad619;if(_0x2466ac[_0x338179(0xf5)][_0x338179(0x1db)]!=settings[_0x338179(0x10d)]&&'@'+_0x2466ac[_0x338179(0xf5)][_0x338179(0x1db)]!=settings[_0x338179(0x10d)])return tgBot[_0x338179(0x1b5)](_0x2466ac[_0x338179(0x15b)]['id'],_0x338179(0x185),{'parse_mode':'HTML'})['catch'](_0x4d0e70=>{telegramError(_0x4d0e70);}),![];return!![];}async function initTelegram(){const _0x2aa01a=_0x3ad619;if(tgBot)tgBot[_0x2aa01a(0xf1)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2aa01a(0xd0)],{'polling':!![]});let _0x29954e=_0x2aa01a(0x17f);_0x29954e+='\x0a',_0x29954e+=_0x2aa01a(0x1c3),_0x29954e+=_0x2aa01a(0xfb),_0x29954e+=_0x2aa01a(0x169),_0x29954e+=_0x2aa01a(0xd5),_0x29954e+=_0x2aa01a(0xc2),_0x29954e+=_0x2aa01a(0x188),_0x29954e+=_0x2aa01a(0x146),_0x29954e+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x461d24=_0x2aa01a(0x1af);_0x461d24+='\x0a',_0x461d24+=_0x29954e,tgBot[_0x2aa01a(0x10b)](/\/start/,_0x331042=>{const _0x402350=_0x2aa01a;if(!validateTelegram(_0x331042))return;if(settings[_0x402350(0x152)]!=_0x331042[_0x402350(0x15b)]['id'])updateSetting('telegramChatId',_0x331042[_0x402350(0x15b)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x331042[_0x402350(0x15b)]['id'],_0x461d24)[_0x402350(0x198)](_0x49c9b9=>{telegramError(_0x49c9b9);});}),tgBot['onText'](/\/enable/,_0x59f2c5=>{const _0x2f4425=_0x2aa01a;if(!validateTelegram(_0x59f2c5))return;if(settings['telegramChatId']!=_0x59f2c5[_0x2f4425(0x15b)]['id'])updateSetting('telegramChatId',_0x59f2c5[_0x2f4425(0x15b)]['id']);updateSetting(_0x2f4425(0xfd),!![]),tgBot[_0x2f4425(0x1b5)](_0x59f2c5[_0x2f4425(0x15b)]['id'],'Notifications\x20enabled')[_0x2f4425(0x198)](_0x5e036e=>{telegramError(_0x5e036e);});}),tgBot[_0x2aa01a(0x10b)](/\/config/,async _0x158dfc=>{const _0x12f72e=_0x2aa01a;if(!validateTelegram(_0x158dfc))return;tgBot[_0x12f72e(0x1fa)](_0x12f72e(0x201)),tgBot['sendMessage'](_0x158dfc[_0x12f72e(0x15b)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x12f72e(0x1a6),'callback_data':_0x12f72e(0xc8)},{'text':_0x12f72e(0x17b),'callback_data':_0x12f72e(0x183)},{'text':_0x12f72e(0x195),'callback_data':_0x12f72e(0x199)}]]}})[_0x12f72e(0x198)](_0x331bc6=>{telegramError(_0x331bc6);}),tgBot['on'](_0x12f72e(0x201),async _0x383925=>{const _0x38da09=_0x12f72e,_0x52fb5e=_0x383925[_0x38da09(0x13f)],_0x47f9c8=_0x383925['message'];tgBot[_0x38da09(0x12e)](_0x383925['id'])['then'](async()=>{const _0x48b0ad=_0x38da09;_0x52fb5e==_0x48b0ad(0xc8)&&(updateSetting(_0x48b0ad(0x1dc),'orders'),updateSetting(_0x48b0ad(0xfd),!![]),await tgBot[_0x48b0ad(0x1b5)](_0x47f9c8['chat']['id'],_0x48b0ad(0x203))[_0x48b0ad(0x198)](_0x421d8f=>{telegramError(_0x421d8f);}));_0x52fb5e=='alerts'&&(updateSetting(_0x48b0ad(0x1dc),_0x48b0ad(0x183)),updateSetting(_0x48b0ad(0xfd),!![]),await tgBot[_0x48b0ad(0x1b5)](_0x47f9c8[_0x48b0ad(0x15b)]['id'],_0x48b0ad(0xe8))[_0x48b0ad(0x198)](_0xae430b=>{telegramError(_0xae430b);}));_0x52fb5e==_0x48b0ad(0x199)&&(updateSetting(_0x48b0ad(0x1dc),_0x48b0ad(0x199)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x47f9c8[_0x48b0ad(0x15b)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x40da7f=>{telegramError(_0x40da7f);}));if(!settings[_0x48b0ad(0x152)])tgBot[_0x48b0ad(0x1b5)](_0x47f9c8[_0x48b0ad(0x15b)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x48b0ad(0x198)](_0x12dcf8=>{telegramError(_0x12dcf8);});}),tgBot[_0x38da09(0x1fa)](_0x38da09(0x201));});}),tgBot['onText'](/\/status/,_0x2484c4=>{const _0x558ad4=_0x2aa01a;if(!validateTelegram(_0x2484c4))return;let _0x3b86dd=_0x558ad4(0x16f);config[_0x558ad4(0x141)](_0x3a35d5=>{const _0x32083d=_0x558ad4;_0x3b86dd+=_0x32083d(0x190)+_0x3a35d5['botID']+_0x32083d(0x127)+_0x3a35d5[_0x32083d(0x123)]+':\x20'+_0x3a35d5[_0x32083d(0x1d7)]+_0x32083d(0x1c9)+_0x3a35d5['live']+'\x0a';}),_0x3b86dd+='\x0a',_0x3b86dd+=_0x558ad4(0x1ea),_0x3b86dd+=!settings[_0x558ad4(0xfd)]?_0x558ad4(0x135):_0x558ad4(0x1e7),_0x3b86dd+=settings[_0x558ad4(0xfd)]?settings[_0x558ad4(0x1dc)]=='all'?_0x558ad4(0x11c):_0x558ad4(0x14a)+settings[_0x558ad4(0x1dc)]+_0x558ad4(0x1c1):'',tgBot[_0x558ad4(0x1b5)](_0x2484c4[_0x558ad4(0x15b)]['id'],_0x3b86dd,{'parse_mode':'HTML'})[_0x558ad4(0x198)](_0x7e58c7=>{telegramError(_0x7e58c7);});}),tgBot['onText'](/\/restart/,_0x5d9f3b=>{const _0x1ab5bf=_0x2aa01a;if(!validateTelegram(_0x5d9f3b))return;tgBot[_0x1ab5bf(0x1fa)](_0x1ab5bf(0x201));const _0x45de81=getEnabledBots();if(_0x45de81[_0x1ab5bf(0x13d)]==0x0)tgBot[_0x1ab5bf(0x1b5)](_0x5d9f3b['chat']['id'],_0x1ab5bf(0x1ce))[_0x1ab5bf(0x198)](_0x4d1d00=>{telegramError(_0x4d1d00);});else{if(_0x45de81[_0x1ab5bf(0x13d)]>0x1)_0x45de81[_0x1ab5bf(0x182)]({'botID':_0x1ab5bf(0x199)});let _0x58e10c=[],_0x257240=[];const _0x3be9c0=_0x45de81[_0x1ab5bf(0x13d)]%0x4==0x0||_0x45de81[_0x1ab5bf(0x13d)]%0x4==0x3||_0x45de81[_0x1ab5bf(0x13d)]%0x3==0x1?0x4:0x3;let _0x51e77e=0x0;_0x45de81[_0x1ab5bf(0x141)]((_0x4fff02,_0x39ba99)=>{const _0x2ffc5b=_0x1ab5bf;if(_0x39ba99%_0x3be9c0==0x0)_0x257240=[];_0x257240[_0x2ffc5b(0x182)]({'text':_0x4fff02[_0x2ffc5b(0xb3)]==_0x2ffc5b(0x199)?_0x2ffc5b(0x15d):'Bot\x20'+_0x4fff02['botID'],'callback_data':_0x4fff02[_0x2ffc5b(0xb3)]}),_0x39ba99%_0x3be9c0==0x0&&(_0x58e10c[_0x51e77e]=_0x257240,_0x51e77e++);}),tgBot[_0x1ab5bf(0x1b5)](_0x5d9f3b[_0x1ab5bf(0x15b)]['id'],_0x1ab5bf(0x113),{'reply_markup':{'inline_keyboard':_0x58e10c}})[_0x1ab5bf(0x198)](_0x591ece=>{telegramError(_0x591ece);}),tgBot['on'](_0x1ab5bf(0x201),async _0x460125=>{const _0x334f1d=_0x1ab5bf,_0xad3d2e=_0x460125[_0x334f1d(0x13f)],_0x4cc3cd=_0x460125[_0x334f1d(0x12a)];tgBot[_0x334f1d(0x12e)](_0x460125['id'])[_0x334f1d(0x155)](async()=>{const _0x2c32c4=_0x334f1d;if(_0xad3d2e==_0x2c32c4(0x199)){if(settings['telegramEvents']==_0x2c32c4(0xc8))tgBot[_0x2c32c4(0x1b5)](_0x4cc3cd[_0x2c32c4(0x15b)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')['catch'](_0x1e1ad0=>{telegramError(_0x1e1ad0);});config['forEach'](_0x200820=>{const _0x380b3a=_0x2c32c4;restartBot(_0x200820[_0x380b3a(0xb3)]);});}else{if(settings[_0x2c32c4(0x1dc)]==_0x2c32c4(0xc8))tgBot[_0x2c32c4(0x1b5)](_0x4cc3cd['chat']['id'],_0x2c32c4(0xe4)+_0xad3d2e)[_0x2c32c4(0x198)](_0xf5464c=>{telegramError(_0xf5464c);});restartBot(_0xad3d2e);}}),tgBot[_0x334f1d(0x1fa)]('callback_query');});}}),tgBot[_0x2aa01a(0x10b)](/\/on/,_0xa7342e=>{const _0x3b7d40=_0x2aa01a;if(!validateTelegram(_0xa7342e))return;tgBot[_0x3b7d40(0x1fa)]('callback_query');const _0x2849dd=getDisabledBots();if(_0x2849dd['length']==0x0)tgBot[_0x3b7d40(0x1b5)](_0xa7342e[_0x3b7d40(0x15b)]['id'],_0x3b7d40(0xc6))['catch'](_0x2dbc8a=>{telegramError(_0x2dbc8a);});else{if(_0x2849dd['length']>0x1)_0x2849dd[_0x3b7d40(0x182)]({'botID':_0x3b7d40(0x199)});let _0x117c77=[],_0xabe006=[];const _0x53ffee=_0x2849dd['length']%0x4==0x0||_0x2849dd['length']%0x4==0x3||_0x2849dd[_0x3b7d40(0x13d)]%0x3==0x1?0x4:0x3;let _0x1fcab7=0x0;_0x2849dd[_0x3b7d40(0x141)]((_0x426281,_0x53b6e8)=>{const _0x4b3c85=_0x3b7d40;if(_0x53b6e8%_0x53ffee==0x0)_0xabe006=[];_0xabe006[_0x4b3c85(0x182)]({'text':_0x426281['botID']==_0x4b3c85(0x199)?_0x4b3c85(0x15d):_0x4b3c85(0x190)+_0x426281[_0x4b3c85(0xb3)],'callback_data':_0x426281[_0x4b3c85(0xb3)]}),_0x53b6e8%_0x53ffee==0x0&&(_0x117c77[_0x1fcab7]=_0xabe006,_0x1fcab7++);}),tgBot[_0x3b7d40(0x1b5)](_0xa7342e['chat']['id'],_0x3b7d40(0x168),{'reply_markup':{'inline_keyboard':_0x117c77}})['catch'](_0x51a48e=>{telegramError(_0x51a48e);}),tgBot['on'](_0x3b7d40(0x201),async _0x29b3ca=>{const _0x3cc8e4=_0x3b7d40,_0x293915=_0x29b3ca['data'],_0x50d03b=_0x29b3ca[_0x3cc8e4(0x12a)];tgBot[_0x3cc8e4(0x12e)](_0x29b3ca['id'])[_0x3cc8e4(0x155)](async()=>{const _0x1ba22c=_0x3cc8e4;if(_0x293915==_0x1ba22c(0x199)){if(settings[_0x1ba22c(0x1dc)]==_0x1ba22c(0xc8))tgBot['sendMessage'](_0x50d03b[_0x1ba22c(0x15b)]['id'],_0x1ba22c(0x19f))[_0x1ba22c(0x198)](_0x176454=>{telegramError(_0x176454);});_0x2849dd[_0x1ba22c(0x141)](_0x3da47e=>{const _0x3c464c=_0x1ba22c;if(_0x3da47e['botID']!=_0x3c464c(0x199))toggleBot(_0x3da47e[_0x3c464c(0xb3)],toggleStatus(_0x3da47e[_0x3c464c(0xb3)]),_0x3c464c(0x160));});}else{if(settings[_0x1ba22c(0x1dc)]==_0x1ba22c(0xc8))tgBot[_0x1ba22c(0x1b5)](_0x50d03b[_0x1ba22c(0x15b)]['id'],_0x1ba22c(0x107)+_0x293915)['catch'](_0x1e0faf=>{telegramError(_0x1e0faf);});toggleBot(_0x293915,toggleStatus(_0x293915),_0x1ba22c(0x160));}}),tgBot[_0x3cc8e4(0x1fa)](_0x3cc8e4(0x201));});}}),tgBot['onText'](/\/off/,_0x32f397=>{const _0x2a9551=_0x2aa01a;if(!validateTelegram(_0x32f397))return;tgBot[_0x2a9551(0x1fa)](_0x2a9551(0x201));const _0x168bc0=getEnabledBots();if(_0x168bc0[_0x2a9551(0x13d)]==0x0)tgBot['sendMessage'](_0x32f397['chat']['id'],_0x2a9551(0x1ce))[_0x2a9551(0x198)](_0x283ead=>{telegramError(_0x283ead);});else{if(_0x168bc0[_0x2a9551(0x13d)]>0x1)_0x168bc0[_0x2a9551(0x182)]({'botID':_0x2a9551(0x199)});let _0x35fb15=[],_0x3e5566=[];const _0x54a3e6=_0x168bc0[_0x2a9551(0x13d)]%0x4==0x0||_0x168bc0['length']%0x4==0x3||_0x168bc0['length']%0x3==0x1?0x4:0x3;let _0x10c1ad=0x0;_0x168bc0['forEach']((_0x4e3f87,_0x18b206)=>{const _0x197700=_0x2a9551;if(_0x18b206%_0x54a3e6==0x0)_0x3e5566=[];_0x3e5566[_0x197700(0x182)]({'text':_0x4e3f87[_0x197700(0xb3)]==_0x197700(0x199)?_0x197700(0x15d):'Bot\x20'+_0x4e3f87[_0x197700(0xb3)],'callback_data':_0x4e3f87[_0x197700(0xb3)]}),_0x18b206%_0x54a3e6==0x0&&(_0x35fb15[_0x10c1ad]=_0x3e5566,_0x10c1ad++);}),tgBot['sendMessage'](_0x32f397[_0x2a9551(0x15b)]['id'],_0x2a9551(0xec),{'reply_markup':{'inline_keyboard':_0x35fb15}})['catch'](_0x5ced93=>{telegramError(_0x5ced93);}),tgBot['on']('callback_query',async _0x57b238=>{const _0x104066=_0x2a9551,_0xf91dc0=_0x57b238['data'],_0x4dfa65=_0x57b238[_0x104066(0x12a)];tgBot[_0x104066(0x12e)](_0x57b238['id'])['then'](async()=>{const _0x3473ad=_0x104066;if(_0xf91dc0==_0x3473ad(0x199)){if(settings[_0x3473ad(0x1dc)]==_0x3473ad(0xc8))tgBot[_0x3473ad(0x1b5)](_0x4dfa65['chat']['id'],_0x3473ad(0x1d6))[_0x3473ad(0x198)](_0x1a6d0b=>{telegramError(_0x1a6d0b);});_0x168bc0[_0x3473ad(0x141)](_0x4e9ad4=>{const _0x15590c=_0x3473ad;if(_0x4e9ad4[_0x15590c(0xb3)]!=_0x15590c(0x199))toggleBot(_0x4e9ad4[_0x15590c(0xb3)],toggleStatus(_0x4e9ad4['botID']),_0x15590c(0x160));});}else{if(settings['telegramEvents']==_0x3473ad(0xc8))tgBot[_0x3473ad(0x1b5)](_0x4dfa65['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0xf91dc0)[_0x3473ad(0x198)](_0x370db5=>{telegramError(_0x370db5);});toggleBot(_0xf91dc0,toggleStatus(_0xf91dc0),'stopped');}}),tgBot['removeListener'](_0x104066(0x201));});}}),tgBot[_0x2aa01a(0x10b)](/\/disable/,_0xba845f=>{const _0x14dc04=_0x2aa01a;if(!validateTelegram(_0xba845f))return;tgBot[_0x14dc04(0x1b5)](_0xba845f[_0x14dc04(0x15b)]['id'],_0x14dc04(0x139))['catch'](_0x1539a8=>{telegramError(_0x1539a8);}),updateSetting(_0x14dc04(0xfd),![]);}),tgBot[_0x2aa01a(0x10b)](/\/help/,_0x1196a4=>{const _0x3f18ec=_0x2aa01a;if(!validateTelegram(_0x1196a4))return;tgBot[_0x3f18ec(0x1b5)](_0x1196a4[_0x3f18ec(0x15b)]['id'],_0x29954e)[_0x3f18ec(0x198)](_0x4b5e12=>{telegramError(_0x4b5e12);});}),tgBot['on']('polling_error',_0x7f539e=>{const _0x5319db=_0x2aa01a;_0x7f539e[_0x5319db(0xc4)]()[_0x5319db(0x100)]('404\x20Not\x20Found')&&(logging(_0x5319db(0x1bd)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x5319db(0x1a5))[_0x5319db(0xe1)](_0x5319db(0x179),_0x5319db(0x1bd)));}),process[_0x2aa01a(0x11d)](_0x2aa01a(0xe2),()=>{const _0x3a1233=_0x2aa01a;if(tgBot)tgBot[_0x3a1233(0xf1)]();process['exit'](0x1);}),process[_0x2aa01a(0x11d)](_0x2aa01a(0x1d4),()=>{const _0x398c9b=_0x2aa01a;if(tgBot)tgBot[_0x398c9b(0xf1)]();process[_0x398c9b(0xb8)](0x1);});}}function disableTelegram(){const _0x159baf=_0x3ad619;tgBot&&(tgBot[_0x159baf(0xf1)](),tgBot=null);}function sendTelegram(_0x4f0467,_0x20a105){const _0x2b5d76=_0x3ad619;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x2b5d76(0x199)||(_0x20a105['type']==_0x2b5d76(0x16b)||_0x20a105[_0x2b5d76(0x197)]=='success')&&settings['telegramEvents']=='alerts'||_0x20a105[_0x2b5d76(0x197)]==_0x2b5d76(0x128)&&settings[_0x2b5d76(0x1dc)]=='orders'){if(tgBot&&settings[_0x2b5d76(0x152)]){if(_0x20a105[_0x2b5d76(0x110)])tgBot['sendMessage'](settings[_0x2b5d76(0x152)],_0x20a105[_0x2b5d76(0x123)]+_0x2b5d76(0x1cf)+_0x20a105[_0x2b5d76(0xae)])[_0x2b5d76(0x198)](_0x306efc=>{telegramError(_0x306efc);});else tgBot[_0x2b5d76(0x1b5)](settings[_0x2b5d76(0x152)],'Bot\x20'+_0x4f0467+'\x20>\x20'+_0x20a105[_0x2b5d76(0xae)])[_0x2b5d76(0x198)](_0x13f5db=>{telegramError(_0x13f5db);});}}}}function getDeviceWithIp(_0x5d5c96){const _0x110c99=_0x3ad619;return devices[_0x110c99(0x11b)](_0x87876c=>_0x87876c['ip']===_0x5d5c96);}function temporaryAccess2FA(_0x2fdce3,_0x5b7fdf){const _0x4b5d3d=_0x3ad619;let _0x20819a=new Date(),_0x14b615=![];if(lastIpApproval){if(_0x20819a-lastIpApproval<0x1388)_0x14b615=!![];}lastIpApproval=new Date();if(_0x14b615)return;tgBot&&settings[_0x4b5d3d(0x152)]&&(tgBot[_0x4b5d3d(0x1fa)](_0x4b5d3d(0x201)),tgBot[_0x4b5d3d(0x1b5)](settings[_0x4b5d3d(0x152)],_0x4b5d3d(0x1a2)+normalizeIP(_0x5b7fdf)['show']+_0x4b5d3d(0xc1),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4b5d3d(0x1d9),'callback_data':'5'},{'text':_0x4b5d3d(0xc3),'callback_data':'15'},{'text':_0x4b5d3d(0x1de),'callback_data':'30'},{'text':_0x4b5d3d(0x17d),'callback_data':_0x4b5d3d(0x17d)}]]}})[_0x4b5d3d(0x198)](_0x3366ea=>{telegramError(_0x3366ea);}),tgBot['on'](_0x4b5d3d(0x201),async _0xa15fb8=>{const _0x5ab27f=_0x4b5d3d,_0x1f0f30=_0xa15fb8[_0x5ab27f(0x13f)],_0x3cb987=_0xa15fb8[_0x5ab27f(0x12a)];tgBot[_0x5ab27f(0x12e)](_0xa15fb8['id'])[_0x5ab27f(0x155)](async()=>{const _0x2762d9=_0x5ab27f;devices[_0x2fdce3]['telegramIpApproval']={'clientip':_0x5b7fdf,'timestamp':new Date()[_0x2762d9(0x1ab)](),'expiry':_0x1f0f30},_0x1f0f30!=_0x2762d9(0x17d)?(await tgBot[_0x2762d9(0x1b5)](_0x3cb987[_0x2762d9(0x15b)]['id'],_0x2762d9(0x177)+_0x1f0f30+_0x2762d9(0x1b2),{'parse_mode':'HTML'})[_0x2762d9(0x198)](_0xab8ff=>{telegramError(_0xab8ff);}),io['to'](_0x2fdce3)[_0x2762d9(0xe1)](_0x2762d9(0x1d7),{'access':{'allow':![],'reason':_0x2762d9(0xde),'token':null}})):(await tgBot['sendMessage'](_0x3cb987[_0x2762d9(0x15b)]['id'],_0x2762d9(0x103))[_0x2762d9(0x198)](_0x32dc7a=>{telegramError(_0x32dc7a);}),io['to'](_0x2fdce3)['emit'](_0x2762d9(0x1d7),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x5ab27f(0x201));}));}function loginAccess2FA(_0xa9e594,_0x8f53d5){const _0x54762b=_0x3ad619;tgBot&&settings[_0x54762b(0x152)]&&(tgBot[_0x54762b(0x1fa)]('callback_query'),tgBot['sendMessage'](settings[_0x54762b(0x152)],_0x54762b(0x1ec)+normalizeIP(_0x8f53d5)[_0x54762b(0x149)]+_0x54762b(0xc1),{'parse_mode':_0x54762b(0xba),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x54762b(0x17d),'callback_data':'reject'}]]}})[_0x54762b(0x198)](_0x31e519=>{telegramError(_0x31e519);}),tgBot['on']('callback_query',async _0x4fd9c0=>{const _0x1a1e46=_0x54762b,_0x1cdf07=_0x4fd9c0['data'],_0x4bacf0=_0x4fd9c0[_0x1a1e46(0x12a)];tgBot[_0x1a1e46(0x12e)](_0x4fd9c0['id'])[_0x1a1e46(0x155)](async()=>{const _0x4f2376=_0x1a1e46;devices[_0xa9e594][_0x4f2376(0xcf)]={'clientip':_0x8f53d5,'timestamp':new Date()['getTime'](),'expiry':_0x1cdf07},_0x1cdf07!='reject'?(await tgBot[_0x4f2376(0x1b5)](_0x4bacf0[_0x4f2376(0x15b)]['id'],_0x4f2376(0x13a),{'parse_mode':_0x4f2376(0xba)})['catch'](_0x4ffad1=>{telegramError(_0x4ffad1);}),io['to'](_0xa9e594)[_0x4f2376(0xe1)](_0x4f2376(0x1d7),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x4bacf0[_0x4f2376(0x15b)]['id'],_0x4f2376(0x1fe))[_0x4f2376(0x198)](_0x45e1fa=>{telegramError(_0x45e1fa);}),io['to'](_0xa9e594)[_0x4f2376(0xe1)](_0x4f2376(0x1d7),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x1a1e46(0x1fa)](_0x1a1e46(0x201));}));}function getConfiguration(){const _0x375779=_0x3ad619;return dbConfig[_0x375779(0x144)](_0x375779(0xe6))[_0x375779(0x1a4)]('botID')[_0x375779(0x142)]()||[];}function getEnabledBots(){const _0x16fe42=_0x3ad619;return dbConfig[_0x16fe42(0x144)](_0x16fe42(0xe6))[_0x16fe42(0x1a4)]('botID')[_0x16fe42(0x10c)]({'status':_0x16fe42(0x101)})['value']()||[];}function getDisabledBots(){const _0x37e0c9=_0x3ad619;return dbConfig[_0x37e0c9(0x144)]('bots')[_0x37e0c9(0x1a4)]('botID')[_0x37e0c9(0x10c)]({'status':_0x37e0c9(0xfe)})[_0x37e0c9(0x142)]()||[];}function getSettings(){const _0x5efa02=_0x3ad619;return dbSettings[_0x5efa02(0x144)](_0x5efa02(0x1e1))['value']()||{'timeshift':0x0};}function getSecure(){const _0x55df8a=_0x3ad619;return dbSecure['get'](_0x55df8a(0x14e))[_0x55df8a(0x142)]()||{};}function getBlacklist(){const _0x49aa6f=_0x3ad619;return dbSecure['get'](_0x49aa6f(0x102))[_0x49aa6f(0x142)]()||[];}function broadcastToBots(_0x48edd8,_0x1b4136){const _0x2a5000=_0x3ad619;config[_0x2a5000(0x141)](_0x536ecf=>{const _0x394b81=_0x2a5000;if(_0x536ecf[_0x394b81(0x1d7)]==_0x394b81(0x101)&&_0x536ecf[_0x394b81(0x1da)]==_0x394b81(0x159)){if(pid[_0x536ecf[_0x394b81(0xb3)]])pid[_0x536ecf[_0x394b81(0xb3)]][_0x394b81(0x196)]({[_0x48edd8]:_0x1b4136});}});}function storeSettings(_0x2ec193,_0x1a6bdf=![]){const _0x1188a5=_0x3ad619;_0x2ec193={...settings,..._0x2ec193};if(_0x1a6bdf&&_0x2ec193[_0x1188a5(0x12b)]!=_0x1188a5(0x1c7)&&_0x2ec193[_0x1188a5(0x12b)]!=''){const _0x1806e2=crypt[_0x1188a5(0x1d2)](secure[_0x1188a5(0xf6)],_0x2ec193['bbPassword'])[_0x1188a5(0x12a)][_0x1188a5(0xf8)]('@')[0x0],_0x26d1b0=bcrypt['hashSync'](_0x1806e2,saltRounds);_0x2ec193={..._0x2ec193,'bbPassword':_0x26d1b0};}if(_0x1a6bdf&&_0x2ec193['telegramToken']!='************'&&_0x2ec193[_0x1188a5(0xd0)]!=''){const _0x1007ac=crypt[_0x1188a5(0x1d2)](secure[_0x1188a5(0xf6)],_0x2ec193[_0x1188a5(0xd0)])[_0x1188a5(0x12a)][_0x1188a5(0xf8)]('@')[0x0];_0x2ec193={..._0x2ec193,'telegramToken':_0x1007ac};}const _0x503934=_0x2ec193[_0x1188a5(0xd0)]!=_0x1188a5(0x1c7)&&_0x2ec193[_0x1188a5(0xd0)]!=settings[_0x1188a5(0xd0)]||_0x2ec193[_0x1188a5(0x10d)]!=settings['telegramUsername'],_0x4a4111=_0x2ec193[_0x1188a5(0xd0)]==''||_0x2ec193['telegramUsername']=='';if(_0x503934)_0x2ec193['telegramEvents']=_0x1188a5(0x199);for(const [_0x43be41,_0x893be1]of Object[_0x1188a5(0x1ef)](_0x2ec193)){if(_0x43be41==_0x1188a5(0xd0)&&_0x893be1==_0x1188a5(0x1c7)){_0x2ec193[_0x1188a5(0xd0)]=settings['telegramToken'];continue;};if(_0x43be41=='bbPassword'&&_0x893be1==_0x1188a5(0x1c7)){_0x2ec193[_0x1188a5(0x12b)]=settings[_0x1188a5(0x12b)];continue;};dbSettings[_0x1188a5(0xbf)](_0x1188a5(0x1e0)+_0x43be41,_0x893be1)[_0x1188a5(0x163)]();}settings=_0x2ec193,io['to'](_0x1188a5(0x1a5))['emit']('settings',cleanSettings()),broadcastToBots(_0x1188a5(0x14b),settings[_0x1188a5(0x14b)]);if(_0x503934&&!_0x4a4111)initTelegram();if(_0x503934&&_0x4a4111)disableTelegram();getAllClients()[_0x1188a5(0x141)](_0x7182ec=>{const _0x555dc7=_0x1188a5;getSocket(_0x7182ec['id'])[_0x555dc7(0xe1)](_0x555dc7(0x1d7),{'access':{'allow':![],'reason':_0x555dc7(0xde),'token':null}});});}function updateSetting(_0x39eda8,_0xf742b9){const _0x42d080=_0x3ad619;dbSettings[_0x42d080(0xbf)](_0x42d080(0x1e0)+_0x39eda8,_0xf742b9)[_0x42d080(0x163)](),settings=getSettings(),io['to'](_0x42d080(0x1a5))['emit'](_0x42d080(0x1e1),cleanSettings());}function storeSecure(_0x236def){const _0x1be506=_0x3ad619;dbSecure[_0x1be506(0x144)](_0x1be506(0x14e))[_0x1be506(0x182)](_0x236def)[_0x1be506(0x163)](),secure=_0x236def;}function addBlacklist(_0x486912){const _0x57744c=_0x3ad619;cleanBlacklist();let _0x466621;devices[_0x486912]['telegramIpApproval']?_0x466621=Math[_0x57744c(0xff)](devices[_0x486912][_0x57744c(0x18d)][_0x57744c(0x170)],loginExpiry):_0x466621=loginExpiry,dbSecure[_0x57744c(0x144)]('blacklist')['push']({'expiry':new Date()[_0x57744c(0x1ab)]()+_0x466621*0x3c*0x3e8,'token':devices[_0x486912][_0x57744c(0x200)]['token']})[_0x57744c(0x163)](),blacklist=dbSecure[_0x57744c(0x144)](_0x57744c(0x102))[_0x57744c(0x142)]();}function cleanBlacklist(){const _0x1bdee2=_0x3ad619;let _0x2eb678=dbSecure['get']('blacklist')[_0x1bdee2(0x171)]()[_0x1bdee2(0x142)](),_0xc31d08=new Date()[_0x1bdee2(0x1ab)]();_0x2eb678[_0x1bdee2(0x141)](_0x264a7d=>{const _0x204560=_0x1bdee2;_0x264a7d[_0x204560(0x170)]<_0xc31d08&&dbSecure['get'](_0x204560(0x102))[_0x204560(0xd3)]({'expiry':_0x264a7d[_0x204560(0x170)]})[_0x204560(0x163)]();});}function initStates(){let _0x1ac4ec=getConfiguration();_0x1ac4ec['forEach'](_0x3bc9b9=>{const _0xc0c4b9=_0x1cde;_0x3bc9b9[_0xc0c4b9(0x1da)]=_0xc0c4b9(0x160);}),storeConfiguration(_0x1ac4ec);}function onKeys(){const _0xfe6717=new RSA();return new Promise(_0x49f64d=>{const _0x277b13=_0x1cde;_0xfe6717[_0x277b13(0xea)]()[_0x277b13(0x155)](_0x3c5711=>{_0x49f64d(_0x3c5711);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1127e0=_0x3ad619;let _0x1f6e35=getConfiguration(),_0x4c0f77=![];_0x1f6e35['forEach'](_0x4d40c3=>{const _0x4c299d=_0x1cde;if(_0x4d40c3[_0x4c299d(0x1d7)]==_0x4c299d(0x159))_0x4d40c3['status']=_0x4c299d(0x101),_0x4c0f77=!![];else _0x4d40c3[_0x4c299d(0x1d7)]==_0x4c299d(0x160)&&(_0x4d40c3[_0x4c299d(0x1d7)]=_0x4c299d(0xfe),_0x4c0f77=!![]);});if(_0x4c0f77)storeConfiguration(_0x1f6e35);let _0x574533=getSecure();if(!_0x574533['hasOwnProperty'](_0x1127e0(0xc9))){let _0xb057a7=await generateKeys();_0x574533[_0x1127e0(0x189)]=_0xb057a7['publicKey'],_0x574533[_0x1127e0(0xf6)]=_0xb057a7[_0x1127e0(0xf6)],_0x574533[_0x1127e0(0xc9)]=crypto[_0x1127e0(0x143)](0x20)[_0x1127e0(0xc4)](_0x1127e0(0x115));;storeSecure(_0x574533);}let _0x2f2359=getSettings();_0x4c0f77=![];!_0x2f2359['hasOwnProperty'](_0x1127e0(0x1ba))&&(_0x2f2359[_0x1127e0(0x1ba)]=![],_0x2f2359['bbUsername']='',_0x2f2359[_0x1127e0(0x12b)]='',_0x2f2359[_0x1127e0(0x14c)]=![],_0x4c0f77=!![]);!_0x2f2359[_0x1127e0(0x1f5)](_0x1127e0(0xd8))&&(_0x2f2359[_0x1127e0(0xd8)]=![],_0x2f2359[_0x1127e0(0xfa)]=[],_0x2f2359[_0x1127e0(0xb7)]=![],_0x4c0f77=!![]);if(!_0x2f2359['hasOwnProperty']('telegramEnabled')){if(_0x2f2359[_0x1127e0(0x152)])_0x2f2359['telegramEnabled']=!![];else _0x2f2359[_0x1127e0(0xfd)]=![];_0x4c0f77=!![];}if(_0x4c0f77)storeSettings(_0x2f2359);}function storeConfiguration(_0x4fdd07){const _0x3fe61f=_0x3ad619;dbConfig[_0x3fe61f(0x144)]('bots')['remove']()['write'](),dbConfig[_0x3fe61f(0x144)](_0x3fe61f(0xe6))[_0x3fe61f(0x182)](..._0x4fdd07)[_0x3fe61f(0x163)](),config=_0x4fdd07;}function resetPassword(){const _0x351ac3=_0x3ad619;tgBot&&settings[_0x351ac3(0x152)]&&(tgBot[_0x351ac3(0x1fa)](_0x351ac3(0x201)),tgBot['sendMessage'](settings[_0x351ac3(0x152)],_0x351ac3(0xb5),{'parse_mode':_0x351ac3(0xba),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x351ac3(0x17e)},{'text':'no','callback_data':'no'}]]}})[_0x351ac3(0x198)](_0x54bca4=>{telegramError(_0x54bca4);}),tgBot['on'](_0x351ac3(0x201),async _0x1cea57=>{const _0x570d42=_0x351ac3,_0xfd4f39=_0x1cea57[_0x570d42(0x13f)],_0x3f4b50=_0x1cea57[_0x570d42(0x12a)];tgBot[_0x570d42(0x12e)](_0x1cea57['id'])['then'](async()=>{const _0x1c8560=_0x570d42;if(_0xfd4f39!='no'){const _0x39efe3=0xf,_0x4e230b=_0x1c8560(0xca),_0xd4c68a=Array[_0x1c8560(0xf5)](crypto['randomFillSync'](new Uint32Array(_0x39efe3)))[_0x1c8560(0x1f9)](_0x3f4a7f=>_0x4e230b[_0x3f4a7f%_0x4e230b[_0x1c8560(0x13d)]])['join'](''),_0x2a9899=bcrypt[_0x1c8560(0xfc)](_0xd4c68a,saltRounds);storeSettings({'bbPassword':_0x2a9899}),await tgBot['sendMessage'](_0x3f4b50[_0x1c8560(0x15b)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0xd4c68a,{'parse_mode':_0x1c8560(0xba)})[_0x1c8560(0x198)](_0x44802f=>{telegramError(_0x44802f);});}else await tgBot[_0x1c8560(0x1b5)](_0x3f4b50[_0x1c8560(0x15b)]['id'],_0x1c8560(0xda))[_0x1c8560(0x198)](_0xa07691=>{telegramError(_0xa07691);});}),tgBot[_0x570d42(0x1fa)](_0x570d42(0x201));}));}function _0x224d(){const _0x1d6ea9=['notification','getPortfolio','Alerts','join','reject','yes','You\x20can\x20use\x20the\x20following\x20commands:\x0a','restart','inherit','push','alerts','No\x20authentication\x20token','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','uuid','invalid\x20credentials','/off\x20-\x20stop\x20bot(s)\x0a','publicKey','toIPv4Address','login','port','telegramIpApproval','readdirSync','function','Bot\x20','listen','login\x20not\x20required',':\x20Bot\x20Mgr\x20>\x20','toIPv4MappedAddress','All','send','type','catch','all','update-bot','bb-settings.json','starting\x20new\x20bot\x20|\x20Bot\x20','restarting\x20Bot\x20','reset-password','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','initclient','(((.+)+)+)+$','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','156nXMjCd','sortBy','botmanager','Orders','Unauthorized\x20attempt\x20to\x20update\x20settings','Token\x20blacklisted','25614ieJbnf','createServer','getTime','getSeconds','2FA\x20login\x20required','Balance\x20Bot','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','2FA\x20required','unlinkSync','\x20minutes','getFullYear','getStartingBalances','sendMessage','storeConfiguration','new-disabled','pidRefreshToken','Invalid\x20authentication\x20token\x20(1)','loginRequired','bot.js','logout','Invalid\x20Telegram\x20token','jsonwebtoken','name','get-portfolio','\x20only\x0a','user','/enable\x20-\x20enable\x20notifications\x0a','bcryptjs','apiKey','kind','************','allow','\x20/\x20','lowdb/adapters/FileSync','793604fhAHOo','new','ipaddr.js','No\x20bots\x20running\x20right\x20now','\x20>\x20','version','clients','decrypt','Invalid\x20IP\x20address','SIGTERM','remoteAddress','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','status','stop','5\x20min','live','username','telegramEvents','page','30\x20min','starting\x20bot\x20|\x20Bot\x20','settings.','settings','Unauthorized\x20attempt\x20to\x20delete\x20bot','placeOrder','Error:\x20Invalid\x20argument\x20','node-telegram-bot-api','connection','Notifications\x20enabled\x0a','/:bot/portfolio','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','<b>Telegram\x20bot\x20status:</b>\x0a','backup/','Allow\x20login\x20from\x20IP\x20address\x20<b>','127.0.0.1','deleted\x20Bot\x20','entries','611270kAbbnb','Invalid\x20username\x20or\x20IP\x20address','config/','bbUsername','185335okKWpB','hasOwnProperty','sign','keys','compareSync','map','removeListener','User\x20has\x20been\x20validated','Unauthorized\x20attempt\x20to\x20get\x20portfolio','yargs/yargs','Login\x20rejected','verify','access','callback_query','build','Ok,\x20will\x20send\x20order\x20notifications\x20only','/:bot/performance','Balance\x20Bot\x20Server','handshake','event','build2','use','store-settings','mkdirSync','botID','isDirectory','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','disabled\x20Bot\x20','temporaryAccessAllowed','exit','ipc','HTML','-----------------------------------------------------------------------------------','version.json','/:bot/coins','default','set','Unauthorized\x20attempt\x20to\x20add\x20bot','</b>\x20?','/on\x20-\x20start\x20bot(s)\x0a','15\x20min','toString','/:bot/configuration','All\x20bots\x20running\x20right\x20now','bb-config.json','orders','secret','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','pidExpireLogin','removeAllListeners','error\x20while\x20deleting\x20config\x20files:\x20','login\x20token\x20generated','telegram2FaApproval','telegramToken','store-configuration','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','remove',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','/restart\x20-\x20restart\x20bot(s)\x0a','isValid','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','whitelistEnabled','154rIYHbs','Password\x20reset\x20rejected','getMonth','add-bot','path','reload','UA-192771731-1','getUTCHours','emit','SIGINT','bb-secure.json','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','2FA\x20login\x20token\x20generated','bots','ipv6','Ok,\x20will\x20send\x20alert\x20notifications\x20only','2193146FyczTa','generateKeyPairAsync','http','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','success','temporary\x20token\x20generated','add','test','stopPolling','storeHeadless','::ffff:127.0.0.1','/:bot','from','privateKey','bot-','split','reason','whitelist','/disable\x20-\x20disable\x20notifications\x0a','hashSync','telegramEnabled','disabled','max','includes','enabled','blacklist','Temporary\x20access\x20rejected','sendFile','bb/','match','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','log','idling\x20bot\x20\x20\x20|\x20Bot\x20','-events.json','onText','filter','telegramUsername','getDate','clientip','showname','auth','store','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','analytics','hex','update-bb','env','@analytics/google-analytics','20927100EfcwLc','fork','find','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','once','index.html','cancelLoading','copyFileSync','disconnect','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','botname','host','3632ImZNyG',',\x20must\x20be\x20a\x204\x20digit\x20number','\x20|\x20','order','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','message','bbPassword','3kpmgGH','-performance.json','answerCallbackQuery','token','lowdb','get-starting-balances','apply','/:bot/support','express','Notifications\x20disabled\x0a','Unauthorized\x20attempt\x20to\x20store\x20configuration','constructor','login\x20required','Notifications\x20disabled','Login\x20accepted','NTBA_FIX_319','argv','length','RSA-OAEP','data','timestamp','forEach','value','randomBytes','get','get-logs','/status\x20-\x20show\x20bot(s)\x20status\x0a','getMinutes','referer','show','Notifications\x20types:\x20','timeshift','f2aRequired','/:bot/history','secure','connected','password','temporary\x20access\x20timeout','telegramChatId','delete-bot','assign','then','Unauthorized\x20attempt\x20to\x20log\x20out','hybrid-crypto-js','36YmflEQ','running','sockets','chat','3000','All\x20bots','existsSync','store-headless','stopped','server','padStart','write','Invalid\x20authentication\x20token\x20(2)','encryptedUuid','bot','static','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','defaults','error','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Unauthorized\x20attempt\x20to\x20update\x20bot','isIPv4MappedAddress','<b>Balance\x20Bot\x20status:</b>\x0a','expiry','cloneDeep','kill','started','headers','612119hkeJnU','::1','Access\x20enabled\x20for\x20','cancel-loading'];_0x224d=function(){return _0x1d6ea9;};return _0x224d();}function logging(_0x114389){const _0x44cb53=_0x3ad619;console[_0x44cb53(0x108)](getTimeStamp()+_0x44cb53(0x193)+_0x114389);if(tgBot&&settings[_0x44cb53(0x152)]&&settings[_0x44cb53(0x1dc)]!='orders')tgBot[_0x44cb53(0x1b5)](settings[_0x44cb53(0x152)],'Bot\x20Mgr\x20>\x20'+_0x114389)[_0x44cb53(0x198)](_0x575ca0=>{telegramError(_0x575ca0);});}function getServerTime(){const _0x3f7f54=_0x3ad619,_0x552d41=new Date();return _0x552d41[_0x3f7f54(0x1b3)]()+'/'+(_0x552d41[_0x3f7f54(0xdb)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x552d41['getDate']()['toString']()[_0x3f7f54(0x162)](0x2,'0')+'\x20'+_0x552d41['getHours']()[_0x3f7f54(0xc4)]()[_0x3f7f54(0x162)](0x2,'0')+':'+_0x552d41[_0x3f7f54(0x147)]()[_0x3f7f54(0xc4)]()[_0x3f7f54(0x162)](0x2,'0')+':'+_0x552d41[_0x3f7f54(0x1ac)]()[_0x3f7f54(0xc4)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4da6d3=_0x3ad619,_0x28ec9c=shiftedTime();return _0x28ec9c[_0x4da6d3(0x1b3)]()+'/'+(_0x28ec9c['getMonth']()+0x1)[_0x4da6d3(0xc4)]()['padStart'](0x2,'0')+'/'+_0x28ec9c[_0x4da6d3(0x10e)]()[_0x4da6d3(0xc4)]()[_0x4da6d3(0x162)](0x2,'0')+'\x20'+_0x28ec9c['getHours']()[_0x4da6d3(0xc4)]()[_0x4da6d3(0x162)](0x2,'0')+':'+_0x28ec9c[_0x4da6d3(0x147)]()[_0x4da6d3(0xc4)]()[_0x4da6d3(0x162)](0x2,'0')+':'+_0x28ec9c[_0x4da6d3(0x1ac)]()[_0x4da6d3(0xc4)]()[_0x4da6d3(0x162)](0x2,'0');}function shiftedTime(){const _0x42af50=_0x3ad619,_0x4029cd=new Date();let _0x40952f=_0x4029cd;if(settings[_0x42af50(0x14b)]&&settings['timeshift']!==0x0)_0x40952f=fns[_0x42af50(0xef)](_0x4029cd,{'hours':settings[_0x42af50(0x14b)]});return _0x40952f;}function startScheduler(){const _0xaa31ce=_0x3ad619;let _0x58c0ab=new Date()[_0xaa31ce(0xe0)]();_0x58c0ab==0x1&&backupConfigFiles();_0x58c0ab==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x2112b4=_0x3ad619;fs[_0x2112b4(0x18e)](configpath,{'withFileTypes':!![]})['forEach'](_0x91b06c=>{const _0x530e24=_0x2112b4;if(!_0x91b06c[_0x530e24(0xb4)]())fs[_0x530e24(0x120)](configpath+_0x91b06c[_0x530e24(0x1bf)],configbackuppath+_0x91b06c['name']);});}function triggerAnalytics(){const _0x608481=_0x3ad619;analytics[_0x608481(0x1dd)]({'title':_0x608481(0x205),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x1e7234,_0x2e9b77){const _0x2c8f26=_0x3ad619;if(_0x1e7234[_0x2c8f26(0x1db)]==settings[_0x2c8f26(0x1f3)]&&bcrypt[_0x2c8f26(0x1f8)](_0x1e7234[_0x2c8f26(0x150)],settings[_0x2c8f26(0x12b)])){if(settings['f2aRequired'])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x441d21=generateLoginToken(_0x2e9b77);return{'allow':!![],'reason':_0x2c8f26(0xce),'token':_0x441d21};}}else return{'allow':![],'reason':_0x2c8f26(0x187),'token':null};}function refreshToken(_0x428d29){const _0x79d303=_0x3ad619,_0x42bece=generateLoginToken(_0x428d29);return{'allow':!![],'reason':_0x79d303(0xce),'token':_0x42bece};}function validateAccess(_0x2b59e9,_0x43b51d){const _0x17e321=_0x3ad619;let _0x4ecbbc=devices[_0x43b51d]['ip'],_0x33ea77;const _0x30c794=_0x463fa5=>{const _0x3bf7d9=_0x1cde;if(settings[_0x3bf7d9(0x1ba)]){if(settings[_0x3bf7d9(0x14c)]){if(telegram2FaApproved(_0x43b51d)){const _0x478cae=generateLoginToken(_0x43b51d);return{'allow':!![],'reason':_0x3bf7d9(0xe5),'token':_0x478cae};}else return{'allow':![],'reason':_0x3bf7d9(0x138),'token':null};}else return _0x33ea77=validToken(_0x463fa5,_0x43b51d),_0x33ea77[_0x3bf7d9(0x1f5)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x463fa5}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x3bf7d9(0x192),'token':null};};if(settings['whitelistEnabled']){let _0x1bd3f6=[...settings[_0x17e321(0xfa)],_0x17e321(0x176),_0x17e321(0xf3),_0x17e321(0x1ed)];if(_0x1bd3f6[_0x17e321(0x100)](_0x4ecbbc))return _0x30c794(_0x2b59e9);else{_0x33ea77=validToken(_0x2b59e9,_0x43b51d);if(_0x33ea77['hasOwnProperty'](_0x17e321(0xed)))return _0x30c794(_0x2b59e9);else{if(telegramIpApproved(_0x43b51d)){const _0x208633=generateToken(_0x43b51d);return _0x33ea77=_0x30c794(_0x2b59e9),_0x33ea77['allow']?{'allow':!![],'reason':_0x17e321(0xee),'token':_0x208633}:_0x33ea77;}else return settings[_0x17e321(0xb7)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x30c794(_0x2b59e9);}function timelyDecrypt(_0x24b8b8,_0x6e753b=!![]){const _0x35d220=_0x3ad619;if(_0x24b8b8)try{const _0x17a08f=crypt[_0x35d220(0x1d2)](secure[_0x35d220(0xf6)],_0x24b8b8)['message'],_0x2341e4=_0x17a08f['split']('@')[0x0],_0x5a07f5=_0x17a08f['split']('@')[0x1],_0x37f934=new Date()['getTime']();if(_0x6e753b){if(_0x37f934-_0x5a07f5<maxSecretAge*0x3e8)return _0x2341e4;else return![];}else return _0x2341e4;}catch(_0x4c2f81){return![];}else return![];}const validToken=(_0x9b59bb,_0x39e796)=>{const _0x32b737=_0x3ad619,_0x1dead5=devices[_0x39e796]['ip'];if(!_0x9b59bb)return{'error':_0x32b737(0x184)};for(let _0x5d3ae4 of blacklist){if(_0x5d3ae4['token']==_0x9b59bb)return{'error':_0x32b737(0x1a8)};}let _0x1a6461;try{_0x1a6461=jwt[_0x32b737(0x1ff)](_0x9b59bb,secure[_0x32b737(0xc9)]+_0x39e796);}catch{return{'error':_0x32b737(0x1b9)};}if(!_0x1a6461[_0x32b737(0x1f5)](_0x32b737(0x10f))&&!_0x1a6461[_0x32b737(0x1f5)]('username')||!_0x1a6461[_0x32b737(0x1f5)]('exp'))return{'error':_0x32b737(0x164)};if(!_0x1a6461['hasOwnProperty'](_0x32b737(0x1db))&&_0x1a6461[_0x32b737(0x1f5)](_0x32b737(0x10f))){const {clientip:_0x39fccb}=_0x1a6461;return _0x1dead5==_0x39fccb?{'success':_0x32b737(0x1fb)}:{'error':_0x32b737(0x1d3)};}else{if(_0x1a6461[_0x32b737(0x1f5)]('username')&&_0x1a6461[_0x32b737(0x1f5)]('clientip')){const {username:_0x2d718b,clientip:_0x18e728}=_0x1a6461;return settings[_0x32b737(0x1f3)]==_0x2d718b&&_0x1dead5==_0x18e728?{'success':_0x32b737(0x1fb)}:{'error':_0x32b737(0x1f1)};}}},generateLoginToken=_0xb31591=>{const _0x1b1f10=_0x3ad619;if(_0xb31591){const _0x453d48=devices[_0xb31591]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x453d48},secure[_0x1b1f10(0xc9)]+_0xb31591,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2cc142=>{const _0x2aef91=_0x3ad619;if(_0x2cc142){const _0x547b1e=devices[_0x2cc142]['ip'];return jwt[_0x2aef91(0x1f6)]({'clientip':_0x547b1e},secure[_0x2aef91(0xc9)]+_0x2cc142,{'expiresIn':devices[_0x2cc142][_0x2aef91(0x18d)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x2bf7e8=>{const _0x2f4229=_0x3ad619;let _0xc825b5=![];return devices[_0x2bf7e8][_0x2f4229(0x18d)]&&devices[_0x2bf7e8][_0x2f4229(0x18d)][_0x2f4229(0x170)]!=_0x2f4229(0x17d)&&(_0xc825b5=devices[_0x2bf7e8]['telegramIpApproval'][_0x2f4229(0x10f)]==devices[_0x2bf7e8]['ip']&&new Date()['getTime']()-devices[_0x2bf7e8][_0x2f4229(0x18d)]['timestamp']<devices[_0x2bf7e8][_0x2f4229(0x18d)]['expiry']*0x3c*0x3e8),_0xc825b5;},telegram2FaApproved=_0x2d317c=>{const _0x48f8b9=_0x3ad619;let _0x53c777=![];return devices[_0x2d317c]['telegram2FaApproval']&&devices[_0x2d317c][_0x48f8b9(0xcf)][_0x48f8b9(0x170)]!=_0x48f8b9(0x17d)&&(_0x53c777=devices[_0x2d317c]['telegram2FaApproval']['clientip']==devices[_0x2d317c]['ip']&&new Date()[_0x48f8b9(0x1ab)]()-devices[_0x2d317c]['telegram2FaApproval'][_0x48f8b9(0x140)]<devices[_0x2d317c][_0x48f8b9(0xcf)][_0x48f8b9(0x170)]*0x3c*0x3e8),_0x53c777;},normalizeIP=_0x5860bd=>{const _0x32bc02=_0x3ad619;let _0x24f09f=null,_0x26dea7=null;if(ipaddr[_0x32bc02(0xd6)](_0x5860bd)){const _0x49e56f=ipaddr['parse'](_0x5860bd);_0x49e56f[_0x32bc02(0x1c6)]()===_0x32bc02(0xe7)?(_0x49e56f[_0x32bc02(0x16e)]()&&(_0x24f09f=_0x49e56f[_0x32bc02(0x18a)]()[_0x32bc02(0xc4)]()),_0x26dea7=_0x49e56f['toString']()):(_0x24f09f=_0x49e56f[_0x32bc02(0xc4)](),_0x26dea7=_0x49e56f[_0x32bc02(0x194)]()[_0x32bc02(0xc4)]());}return{'show':_0x24f09f?_0x24f09f:_0x26dea7,'store':_0x26dea7};};