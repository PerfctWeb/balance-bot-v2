const _0x420d0d=_0x5908;(function(_0x4c597b,_0x5dee6c){const _0x307139=_0x5908,_0x375817=_0x4c597b();while(!![]){try{const _0x427667=-parseInt(_0x307139(0x1e6))/0x1*(parseInt(_0x307139(0x257))/0x2)+parseInt(_0x307139(0x22d))/0x3*(-parseInt(_0x307139(0x268))/0x4)+-parseInt(_0x307139(0x349))/0x5+parseInt(_0x307139(0x2b6))/0x6*(parseInt(_0x307139(0x23d))/0x7)+parseInt(_0x307139(0x2c6))/0x8+-parseInt(_0x307139(0x3a1))/0x9*(-parseInt(_0x307139(0x32d))/0xa)+-parseInt(_0x307139(0x264))/0xb;if(_0x427667===_0x5dee6c)break;else _0x375817['push'](_0x375817['shift']());}catch(_0x1a2a31){_0x375817['push'](_0x375817['shift']());}}}(_0x1a73,0xdd108));const _0x4e237b=function(){let _0x4a1b39=!![];return function(_0x1027c9,_0x5ece4e){const _0x549e1d=_0x4a1b39?function(){if(_0x5ece4e){const _0x9910e9=_0x5ece4e['apply'](_0x1027c9,arguments);return _0x5ece4e=null,_0x9910e9;}}:function(){};return _0x4a1b39=![],_0x549e1d;};}(),_0x527fc1=_0x4e237b(this,function(){const _0x3df4ec=_0x5908;return _0x527fc1[_0x3df4ec(0x1f7)]()['search'](_0x3df4ec(0x249))[_0x3df4ec(0x1f7)]()[_0x3df4ec(0x295)](_0x527fc1)[_0x3df4ec(0x238)](_0x3df4ec(0x249));});_0x527fc1();'use strict';process['env'][_0x420d0d(0x27d)]=0x1;const childProcess=require(_0x420d0d(0x222)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require(_0x420d0d(0x28a)),path=require(_0x420d0d(0x211)),crypto=require(_0x420d0d(0x3a0)),Crypt=require(_0x420d0d(0x2ec))[_0x420d0d(0x31c)],RSA=require(_0x420d0d(0x2ec))[_0x420d0d(0x2ff)],bcrypt=require(_0x420d0d(0x2ba)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x420d0d(0x2e9))(process[_0x420d0d(0x34b)]['slice'](0x2))[_0x420d0d(0x34b)],uuidRandom=require(_0x420d0d(0x2fe)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x420d0d(0x271)),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x420d0d(0x2e5)),fileUpload=require(_0x420d0d(0x24e)),{networkInterfaces}=require('os'),PORT=argv[_0x420d0d(0x285)]||_0x420d0d(0x244),pattern=/^[0-9]{2,4}$/;!pattern[_0x420d0d(0x25c)](PORT)&&(console[_0x420d0d(0x2ab)](_0x420d0d(0x206)+PORT+_0x420d0d(0x201)),process[_0x420d0d(0x370)](0x1));const HOST=argv['host']||null,userID=argv[_0x420d0d(0x347)]||'',debugging=argv['d']||![],nodeversion=process[_0x420d0d(0x212)][_0x420d0d(0x308)];let bbpath=_0x420d0d(0x2f1),bbpath2='';const botfile=_0x420d0d(0x2d9),configfile=_0x420d0d(0x306),settingsfile=_0x420d0d(0x30e),securefile=_0x420d0d(0x2c1),maxBackups=0xa;let validInstallation=!![];!fs[_0x420d0d(0x362)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x420d0d(0x374)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x420d0d(0x1d2),configbackuppath=configpath+_0x420d0d(0x339),logspath=userID?bbpath+_0x420d0d(0x240)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x420d0d(0x278)+userID+'/':bbpath+_0x420d0d(0x278),loggerfile=fs['createWriteStream'](logspath+_0x420d0d(0x369),{'flags':'a'}),temppath=userID?bbpath+_0x420d0d(0x256)+userID+'/':bbpath+_0x420d0d(0x256);!fs[_0x420d0d(0x362)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x420d0d(0x21e)](logspath);!fs['existsSync'](zippath)&&fs[_0x420d0d(0x21e)](zippath);!fs[_0x420d0d(0x362)](temppath)&&fs[_0x420d0d(0x21e)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x420d0d(0x282)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x420d0d(0x282)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x420d0d(0x37a),'onepagemode':![]}})[_0x420d0d(0x1fc)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x420d0d(0x282)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x420d0d(0x38b),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x420d0d(0x28e)](_0x420d0d(0x288),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x420d0d(0x1e1)]!=''&&settings[_0x420d0d(0x204)]&&settings[_0x420d0d(0x204)]!='')initTelegram();const parseColor=(_0x48da05,_0x59878b)=>{const _0x37a084=_0x420d0d,_0x38eafd=/#[A-Z]{3}#/g;!_0x59878b?_0x48da05=_0x48da05[_0x37a084(0x296)](_0x38eafd,''):(_0x48da05=_0x48da05['replace'](/#BLU#/g,_0x37a084(0x329)),_0x48da05=_0x48da05[_0x37a084(0x296)](/#RED#/g,_0x37a084(0x3a9)),_0x48da05=_0x48da05['replace'](/#YEL#/g,'\x1b[33m'),_0x48da05=_0x48da05[_0x37a084(0x296)](/#RES#/g,_0x37a084(0x1e4)));;return _0x48da05;},logger={'screen':_0x19a744=>{console['log'](parseColor(_0x19a744,!![]));},'simple':_0x348b8f=>{const _0x753530=_0x420d0d;console[_0x753530(0x2ab)](parseColor(_0x348b8f,!![])),loggerfile[_0x753530(0x1fc)](util[_0x753530(0x20b)](parseColor(_0x348b8f,![]))+'\x0a');},'full':async _0x7ec7a1=>{const _0xc29388=_0x420d0d,_0x1487c7=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x7ec7a1;console[_0xc29388(0x2ab)](parseColor(_0x1487c7,!![])),loggerfile[_0xc29388(0x1fc)](util[_0xc29388(0x20b)](parseColor(_0x1487c7,![]))+'\x0a');if(tgBot&&settings[_0xc29388(0x1e3)]&&settings[_0xc29388(0x22f)]!=_0xc29388(0x236))await tgBot[_0xc29388(0x261)](settings[_0xc29388(0x1e3)],_0xc29388(0x23f)+parseColor(_0x7ec7a1,![]))[_0xc29388(0x385)](_0x741e87=>{telegramError(_0x741e87);});},'debug':async(_0x3b7eb1,_0x3de28a='')=>{const _0x30ccba=_0x420d0d,_0x2dcca9=getTimeStamp()+_0x30ccba(0x2d0)+_0x3b7eb1;if(debugging)console['log'](parseColor(_0x2dcca9,!![]));loggerfile[_0x30ccba(0x1fc)](util['format'](parseColor(_0x2dcca9,![]))+'\x0a');if(_0x3de28a){if(debugging)console[_0x30ccba(0x2ab)](_0x3de28a);loggerfile['write'](util['format'](_0x3de28a)+'\x0a');}}};process['on'](_0x420d0d(0x21b),function(_0x29289e){logger['simple'](_0x29289e);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x420d0d(0x209))[_0x420d0d(0x299)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x420d0d(0x35a)),app=express(),http=require(_0x420d0d(0x286))['createServer'](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x420d0d(0x3a8)]('/download/:type',async(_0x13ceb1,_0x493d20)=>{const _0x59ac16=_0x420d0d,_0x2fb86e=_0x13ceb1['params'][_0x59ac16(0x2f4)],_0x3bd066=getClientsWithBotID('botmanager'),_0x18df22=_0x13ceb1['headers'][_0x59ac16(0x2bf)],_0x3e7ca3=timelyDecrypt(_0x18df22,![]),_0x24deb4=_0x3bd066[_0x59ac16(0x29b)](_0xbf81dc=>_0xbf81dc[_0x59ac16(0x2bf)]==_0x3e7ca3);if(_0x24deb4){const _0x3a6eb9=normalizeIP(_0x13ceb1[_0x59ac16(0x357)][_0x59ac16(0x377)])[_0x59ac16(0x1f1)],_0x5b7e1e=_0x13ceb1[_0x59ac16(0x2ef)]['tkn'];if(validateAccess(_0x5b7e1e,_0x3e7ca3,_0x3a6eb9)['allow'])_0x2fb86e=='backup'&&await backupConfigFiles(),await zipFiles(_0x2fb86e),_0x493d20[_0x59ac16(0x1ff)](zippath+(_0x2fb86e+_0x59ac16(0x274)),_0x1a9d6f=>{const _0x4f1a44=_0x59ac16;_0x1a9d6f&&(logger['full'](_0x4f1a44(0x229)+_0x2fb86e),logger['simple'](_0x1a9d6f));});else logger['full'](_0x59ac16(0x1d4)+_0x2fb86e+_0x59ac16(0x33b));}else logger[_0x59ac16(0x311)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2fb86e+_0x59ac16(0x2f0));}),app[_0x420d0d(0x333)](_0x420d0d(0x265),async(_0x1ac1ad,_0x7c2adc)=>{const _0x565fff=_0x420d0d,_0x471573=getClientsWithBotID(_0x565fff(0x1eb)),_0x5e8bf5=_0x1ac1ad[_0x565fff(0x2ef)]['uuid'],_0x47e0da=timelyDecrypt(_0x5e8bf5,![]),_0x487080=_0x471573[_0x565fff(0x29b)](_0x5b76c3=>_0x5b76c3[_0x565fff(0x2bf)]==_0x47e0da);logger[_0x565fff(0x1f2)]('Backup\x20file\x20uploaded');if(_0x487080){const _0x5c690e=normalizeIP(_0x1ac1ad[_0x565fff(0x357)]['remoteAddress'])[_0x565fff(0x1f1)],_0x5994d3=_0x1ac1ad[_0x565fff(0x2ef)][_0x565fff(0x2c7)];if(validateAccess(_0x5994d3,_0x47e0da,_0x5c690e)[_0x565fff(0x233)]){if(_0x1ac1ad['files']){const _0x4de928=_0x1ac1ad[_0x565fff(0x2d8)][_0x565fff(0x2f5)];await _0x4de928['mv'](temppath+_0x4de928[_0x565fff(0x326)]),_0x7c2adc['send']({'status':!![],'message':_0x565fff(0x3a4)});const _0x102517=getBotsWithMode();_0x102517[_0x565fff(0x3a6)]>0x0?confirmRestore(temppath,_0x4de928[_0x565fff(0x326)]):unzipFile(temppath,_0x4de928[_0x565fff(0x326)]);}}else logger[_0x565fff(0x311)](_0x565fff(0x36e));}else logger[_0x565fff(0x311)](_0x565fff(0x3ac));}),app[_0x420d0d(0x21d)](express['static'](path[_0x420d0d(0x2e7)](__dirname,bbpath2,_0x420d0d(0x280)))),app[_0x420d0d(0x21d)](express[_0x420d0d(0x24b)](path['join'](__dirname,bbpath2,'build'))),app[_0x420d0d(0x3a8)]('/',function(_0x492d95,_0x26a0da){const _0x3af0d3=_0x420d0d;_0x26a0da['sendFile'](path[_0x3af0d3(0x2e7)](__dirname,bbpath2,_0x3af0d3(0x280),'index.html'));}),app[_0x420d0d(0x3a8)](_0x420d0d(0x387),function(_0x14e2ec,_0x575638){const _0x1a72ba=_0x420d0d;_0x575638['sendFile'](path['join'](__dirname,bbpath2,_0x1a72ba(0x323),_0x1a72ba(0x263)));}),app[_0x420d0d(0x3a8)](_0x420d0d(0x3af),(_0xd9099f,_0x4ccb14)=>{const _0x146f01=_0x420d0d;_0x4ccb14[_0x146f01(0x304)](path[_0x146f01(0x2e7)](__dirname,bbpath2,_0x146f01(0x323),_0x146f01(0x263)));}),app[_0x420d0d(0x3a8)](_0x420d0d(0x20f),(_0x2ce7bf,_0x56d165)=>{const _0x4ac93f=_0x420d0d;_0x56d165[_0x4ac93f(0x304)](path[_0x4ac93f(0x2e7)](__dirname,bbpath2,_0x4ac93f(0x323),'index.html'));}),app[_0x420d0d(0x3a8)]('/:bot/coins',(_0x49a2ba,_0x50b5b6)=>{const _0x271d1f=_0x420d0d;_0x50b5b6[_0x271d1f(0x304)](path[_0x271d1f(0x2e7)](__dirname,bbpath2,_0x271d1f(0x323),_0x271d1f(0x263)));}),app['get']('/:bot/history',(_0x27c39d,_0x2c78fd)=>{const _0x2b578b=_0x420d0d;_0x2c78fd[_0x2b578b(0x304)](path[_0x2b578b(0x2e7)](__dirname,bbpath2,'build',_0x2b578b(0x263)));}),app['get'](_0x420d0d(0x2fd),(_0x5c591b,_0x3ded58)=>{const _0xfab41d=_0x420d0d;_0x3ded58['sendFile'](path[_0xfab41d(0x2e7)](__dirname,bbpath2,_0xfab41d(0x323),_0xfab41d(0x263)));}),app[_0x420d0d(0x3a8)]('/:bot/support',(_0x4d9955,_0x4e53da)=>{const _0x580061=_0x420d0d;_0x4e53da['sendFile'](path[_0x580061(0x2e7)](__dirname,bbpath2,_0x580061(0x323),_0x580061(0x263)));});if(HOST)http[_0x420d0d(0x2ac)](PORT,HOST);else http[_0x420d0d(0x2ac)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x36a2cd=_0x420d0d;let _0x5ce4d2=_0x36a2cd(0x2da);const _0x35ebf9=networkInterfaces(),_0x42db2a={};for(const _0x402645 of Object[_0x36a2cd(0x2ca)](_0x35ebf9)){for(const _0x3736a4 of _0x35ebf9[_0x402645]){if((_0x3736a4[_0x36a2cd(0x202)]==_0x36a2cd(0x2a7)||_0x3736a4[_0x36a2cd(0x202)]==0x4)&&!_0x3736a4[_0x36a2cd(0x34c)]){const _0x37752a=ipaddr[_0x36a2cd(0x373)](_0x3736a4['address'])[_0x36a2cd(0x2cf)]();_0x37752a!=_0x36a2cd(0x2b3)&&(!_0x42db2a[_0x402645]&&(_0x42db2a[_0x402645]=[]),_0x42db2a[_0x402645]['push'](_0x3736a4[_0x36a2cd(0x21f)]),_0x5ce4d2=_0x3736a4['address']);}}}return logger[_0x36a2cd(0x1f2)](_0x36a2cd(0x390),_0x42db2a),_0x5ce4d2;}async function startServer(){const _0x585505=_0x420d0d;logger[_0x585505(0x259)](''),logger['simple'](_0x585505(0x1dd)),await logger[_0x585505(0x311)](_0x585505(0x2af)+serverversion+_0x585505(0x314)+(_0x585505(0x322)+PORT+_0x585505(0x363))+('>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://'+getServerIP()+':'+PORT+_0x585505(0x330))),await logger[_0x585505(0x1f2)]('Node.js\x20v'+nodeversion),logger[_0x585505(0x259)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x352a84 of config){if(_0x352a84[_0x585505(0x28b)]==_0x585505(0x38e)||_0x352a84[_0x585505(0x28b)]=='new')await logger[_0x585505(0x311)](_0x585505(0x386)+_0x352a84['botID']+_0x585505(0x2f8)+_0x352a84[_0x585505(0x25a)]),startBot([_0x352a84[_0x585505(0x1f6)],userID],{'cwd':bbpath},function(_0x2daa2a){const _0x426258=_0x585505;if(_0x2daa2a)logger[_0x426258(0x311)](_0x2daa2a);});else(_0x352a84[_0x585505(0x28b)]==_0x585505(0x368)||_0x352a84[_0x585505(0x28b)]==_0x585505(0x1f9))&&await logger[_0x585505(0x311)](_0x585505(0x225)+_0x352a84[_0x585505(0x1f6)]+_0x585505(0x2f8)+_0x352a84[_0x585505(0x25a)]);}else!newBot&&logger['simple'](_0x585505(0x2d7));if(newBot)addBot();logger['simple'](_0x585505(0x1dd)),logger['simple']('');}function startSocket(){const _0x21768a=_0x420d0d;io['on'](_0x21768a(0x279),_0x394502=>{const _0xb68246=_0x21768a;let _0x274b7a,_0x260288,_0x4edcd9,_0x186ff5,_0x40a29e;const _0x21933e=_0x394502[_0xb68246(0x395)][_0xb68246(0x2ef)]['referer'];_0x260288=_0x21933e['match'](/bot[0-9]{3}/);if(_0x260288)_0x4edcd9=_0x260288[0x0][_0xb68246(0x2b4)](/[0-9]{3}/);if(_0x4edcd9)_0x274b7a=_0x4edcd9[0x0];else _0x274b7a=_0xb68246(0x1eb);const _0x294bc4=_0x394502[_0xb68246(0x395)][_0xb68246(0x226)]['encryptedUuid'];if(!_0x294bc4)_0x394502['emit']('status',{'publicKey':secure[_0xb68246(0x32c)]});else{_0x186ff5=timelyDecrypt(_0x294bc4,![]);if(!_0x186ff5)_0x394502[_0xb68246(0x216)]('status',{'publicKey':secure[_0xb68246(0x32c)]});else{_0x40a29e=normalizeIP(_0x394502['conn']['remoteAddress'])[_0xb68246(0x1f1)];if(!devices[_0x186ff5])devices[_0x186ff5]={'uuid':_0x186ff5,'access':{'token':null}};devices[_0x186ff5]['ip']=_0x40a29e;const _0x25a7f8=addClient(_0x394502['id'],_0x186ff5,_0x274b7a);setAccess(_0x25a7f8),emitMessages(),_0x394502['on'](_0xb68246(0x20e),_0x325af2=>{const _0xd6850e=_0xb68246,_0xf076cb=timelyDecrypt(_0x325af2[_0xd6850e(0x2c4)]);if(_0xf076cb){_0x325af2={'username':_0x325af2['username'],'password':_0xf076cb},devices[_0x186ff5]['access']=validateCredentials(_0x325af2,_0x186ff5);if(devices[_0x186ff5][_0xd6850e(0x310)]['allow']==![]&&devices[_0x186ff5][_0xd6850e(0x310)][_0xd6850e(0x380)]==_0xd6850e(0x260))_0x394502[_0xd6850e(0x216)](_0xd6850e(0x28b),{'access':devices[_0x186ff5]['access']}),loginAccess2FA(_0x186ff5,_0x40a29e);else{if(devices[_0x186ff5][_0xd6850e(0x310)][_0xd6850e(0x233)]==![]&&devices[_0x186ff5][_0xd6850e(0x310)][_0xd6850e(0x380)]=='invalid\x20credentials')_0x394502[_0xd6850e(0x216)](_0xd6850e(0x28b),{'access':devices[_0x186ff5][_0xd6850e(0x310)]});else devices[_0x186ff5][_0xd6850e(0x310)][_0xd6850e(0x233)]&&devices[_0x186ff5]['access'][_0xd6850e(0x380)]==_0xd6850e(0x353)&&(getClientsWithUuid(_0x186ff5)[_0xd6850e(0x33f)](_0x5923d6=>{setAccess(_0x5923d6);}),logger[_0xd6850e(0x1f2)]('Logged\x20in\x20user\x20...'+_0x186ff5[_0xd6850e(0x36b)](-0x8)),setTokenRefresh(_0x186ff5),setSessionTimeout(_0xd6850e(0x20e),_0x186ff5));}}else logger[_0xd6850e(0x311)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x394502['on'](_0xb68246(0x293),()=>{resetPassword();}),_0x394502['on'](_0xb68246(0x348),_0x123e12=>{removeClient(_0x394502['id']);}),_0x274b7a==_0xb68246(0x1eb)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x135c61){const _0x4fae4b=_0x420d0d;if(_0x135c61!=_0x4fae4b(0x1eb)&&config[_0x4fae4b(0x30f)]!=''){if(pid[_0x135c61])pid[_0x135c61]['send']({'function':_0x4fae4b(0x207),'args':null});}_0x135c61!=_0x4fae4b(0x1eb)&&broadcastToBots('bots',JSON[_0x4fae4b(0x344)](config));}function reloadBotManager(){const _0x1105af=_0x420d0d;getClientsWithBotID(_0x1105af(0x1eb))[_0x1105af(0x33f)](_0x3a43c1=>{const _0x5d260f=_0x1105af;getSocket(_0x3a43c1['id'])['emit']('status',{'access':{'allow':![],'reason':_0x5d260f(0x331),'token':null}});});}function getSocket(_0x5dbc0e){const _0x9d2a00=_0x420d0d;return io[_0x9d2a00(0x383)][_0x9d2a00(0x383)][_0x9d2a00(0x3a8)](_0x5dbc0e);}function setAccess(_0x447003){const _0x3ccb23=_0x420d0d,_0x46bd65=getSocket(_0x447003['id']),_0x498ac0=_0x447003[_0x3ccb23(0x2bf)],_0x4fe56c=_0x447003[_0x3ccb23(0x247)];devices[_0x498ac0][_0x3ccb23(0x310)]=validateAccess(devices[_0x498ac0][_0x3ccb23(0x310)][_0x3ccb23(0x2cb)],_0x498ac0),logger[_0x3ccb23(0x1f2)]('Setting\x20access:\x20'+devices[_0x498ac0]['access'][_0x3ccb23(0x380)]+_0x3ccb23(0x23c)+_0x447003['id'][_0x3ccb23(0x36b)](-0x8)+_0x3ccb23(0x371)+_0x498ac0['slice'](-0x8)),_0x46bd65[_0x3ccb23(0x2e7)](_0x498ac0);if(devices[_0x498ac0][_0x3ccb23(0x310)]['allow']){_0x46bd65[_0x3ccb23(0x2e7)](_0x4fe56c);if(_0x4fe56c==_0x3ccb23(0x1eb))initializeSocketBotManager(_0x46bd65);else initializeSocketBot(_0x46bd65);initClient(_0x4fe56c);}devices[_0x498ac0][_0x3ccb23(0x310)][_0x3ccb23(0x2cb)]&&devices[_0x498ac0][_0x3ccb23(0x310)][_0x3ccb23(0x380)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x3ccb23(0x20a),_0x498ac0),devices[_0x498ac0][_0x3ccb23(0x310)]['token']&&devices[_0x498ac0][_0x3ccb23(0x310)][_0x3ccb23(0x380)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x498ac0),_0x46bd65[_0x3ccb23(0x216)]('status',{'status':_0x447003[_0x3ccb23(0x2d4)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x498ac0]['access'],'externalip':devices[_0x498ac0]['ip'],'publicKey':secure[_0x3ccb23(0x32c)],'userid':settings[_0x3ccb23(0x36a)],'validInstallation':validInstallation}),devices[_0x498ac0][_0x3ccb23(0x310)][_0x3ccb23(0x233)]==![]&&devices[_0x498ac0]['access'][_0x3ccb23(0x380)]==_0x3ccb23(0x2dd)&&temporaryAccess2FA(_0x498ac0,devices[_0x498ac0]['ip']);}function setSessionTimeout(_0x2f2ccd,_0x42843f){const _0x14339b=_0x420d0d;let _0x5d632a;if(_0x2f2ccd==_0x14339b(0x20e))_0x5d632a=loginExpiry*0x3c*0x3e8;else _0x5d632a=devices[_0x42843f][_0x14339b(0x25e)]['expiry']*0x3c*0x3e8-(new Date()[_0x14339b(0x2ed)]()-devices[_0x42843f][_0x14339b(0x25e)][_0x14339b(0x318)]);if(devices[_0x42843f][_0x14339b(0x30d)])clearTimeout(devices[_0x42843f][_0x14339b(0x30d)]);devices[_0x42843f][_0x14339b(0x30d)]=setTimeout(()=>{const _0x3d102c=_0x14339b;if(devices[_0x42843f][_0x3d102c(0x342)])clearTimeout(devices[_0x42843f][_0x3d102c(0x342)]);removeSocketListeners(_0x42843f),addBlacklist(_0x42843f),devices[_0x42843f][_0x3d102c(0x25e)]=null,devices[_0x42843f][_0x3d102c(0x36f)]=null,devices[_0x42843f][_0x3d102c(0x310)][_0x3d102c(0x2cb)]=null,logger[_0x3d102c(0x1f2)](_0x3d102c(0x2ea)+_0x42843f['slice'](-0x8)),devices[_0x42843f]['access']=validateAccess(devices[_0x42843f][_0x3d102c(0x310)]['token'],_0x42843f),!(devices[_0x42843f]['access'][_0x3d102c(0x233)]&&devices[_0x42843f][_0x3d102c(0x310)][_0x3d102c(0x380)]=='login\x20not\x20required')&&(_0x2f2ccd=='login'?io['to'](_0x42843f)[_0x3d102c(0x216)](_0x3d102c(0x28b),{'access':{'allow':![],'reason':_0x3d102c(0x355),'token':null}}):io['to'](_0x42843f)[_0x3d102c(0x216)](_0x3d102c(0x28b),{'access':{'allow':![],'reason':_0x3d102c(0x2b2),'token':null}})),devices[_0x42843f][_0x3d102c(0x310)][_0x3d102c(0x2cb)]=null;},_0x5d632a);}function setTokenRefresh(_0x360677){const _0x424b7e=_0x420d0d;if(devices[_0x360677][_0x424b7e(0x342)])clearTimeout(devices[_0x360677][_0x424b7e(0x342)]);devices[_0x360677][_0x424b7e(0x342)]=setTimeout(()=>{const _0xeef530=_0x424b7e;getClientsWithUuid(_0x360677)['length']!=0x0?(devices[_0x360677]['access']=refreshToken(_0x360677),io['to'](_0x360677)[_0xeef530(0x216)](_0xeef530(0x28b),{'status':_0xeef530(0x2f9),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x360677][_0xeef530(0x310)],'externalip':devices[_0x360677]['ip'],'publicKey':secure[_0xeef530(0x32c)],'validInstallation':validInstallation}),setTokenRefresh(_0x360677)):clearTimeout(devices[_0x360677]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0xaa3726){const _0x504bf9=_0x420d0d,_0x571d55=getClient(_0xaa3726['id'])[_0x504bf9(0x2bf)];_0xaa3726['emit'](_0x504bf9(0x31a),config),_0xaa3726[_0x504bf9(0x216)](_0x504bf9(0x354),cleanSettings()),_0xaa3726['on']('add-bot',_0x165350=>{const _0x24716d=_0x504bf9;if(validateAccess(_0x165350,_0x571d55)[_0x24716d(0x233)])addBot();else logger[_0x24716d(0x311)](_0x24716d(0x2a8));}),_0xaa3726['on'](_0x504bf9(0x324),(_0x11aa10,_0x3af631)=>{const _0x3216d7=_0x504bf9;if(validateAccess(_0x3af631,_0x571d55)[_0x3216d7(0x233)])toggleBot(_0x11aa10[_0x3216d7(0x1f6)],_0x11aa10[_0x3216d7(0x28b)],_0x11aa10['live']);else logger[_0x3216d7(0x311)](_0x3216d7(0x37e));}),_0xaa3726['on'](_0x504bf9(0x388),(_0x104f5c,_0x455f1a)=>{const _0x4d216e=_0x504bf9;if(validateAccess(_0x455f1a,_0x571d55)[_0x4d216e(0x233)])toggleBotMode(_0x104f5c);else logger[_0x4d216e(0x311)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0xaa3726['on'](_0x504bf9(0x2c2),(_0x129565,_0x5c2806)=>{const _0x430c92=_0x504bf9;if(validateAccess(_0x5c2806,_0x571d55)[_0x430c92(0x233)])deleteBot(_0x129565);else logger[_0x430c92(0x311)](_0x430c92(0x283));}),_0xaa3726['on'](_0x504bf9(0x35f),(_0x49b427,_0x71474e)=>{const _0x243516=_0x504bf9;if(validateAccess(_0x71474e,_0x571d55)[_0x243516(0x233)])storeSettings(_0x49b427,!![]);else logger[_0x243516(0x311)](_0x243516(0x234));}),_0xaa3726['on'](_0x504bf9(0x378),_0x3df686=>{const _0x3493c7=_0x504bf9;if(validateAccess(_0x3df686,_0x571d55)[_0x3493c7(0x233)])updateBB(_0x3493c7(0x2bd));else logger[_0x3493c7(0x311)](_0x3493c7(0x24c));}),_0xaa3726['on'](_0x504bf9(0x208),_0x5628ae=>{const _0x1623ff=_0x504bf9;if(validateAccess(_0x5628ae,_0x571d55)[_0x1623ff(0x233)])updateBB('reinstall');else logger[_0x1623ff(0x311)](_0x1623ff(0x27f));}),_0xaa3726['on'](_0x504bf9(0x1d9),_0x5a5427=>{const _0x50569f=_0x504bf9;if(validateAccess(_0x5a5427,_0x571d55)[_0x50569f(0x233)]){const _0x34097f=getClient(_0xaa3726['id']);if(_0x34097f)getBackupFiles(_0x34097f[_0x50569f(0x2bf)]);else logger[_0x50569f(0x311)](_0x50569f(0x25d));}else logger[_0x50569f(0x311)](_0x50569f(0x2b0));}),_0xaa3726['on'](_0x504bf9(0x27e),(_0x156cac,_0x440caf)=>{const _0xe22665=_0x504bf9;if(validateAccess(_0x440caf,_0x571d55)[_0xe22665(0x233)])restoreBackupFile(_0x156cac);else logger[_0xe22665(0x311)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0xaa3726['on'](_0x504bf9(0x1fe),_0x6eead2=>{const _0x3df7f9=_0x504bf9;if(validateAccess(_0x6eead2,_0x571d55)['allow'])getMessages();else logger[_0x3df7f9(0x311)](_0x3df7f9(0x294));}),_0xaa3726['on'](_0x504bf9(0x22c),(_0x3f2741,_0x3e48ec)=>{const _0x4896af=_0x504bf9;if(validateAccess(_0x3e48ec,_0x571d55)[_0x4896af(0x233)])confirmMessage(_0x3f2741);else logger['full'](_0x4896af(0x334));}),_0xaa3726['on'](_0x504bf9(0x266),_0x2d8b7f=>{const _0x3fdb0b=_0x504bf9;if(validateAccess(_0x2d8b7f,_0x571d55)['allow']){if(devices[_0x571d55][_0x3fdb0b(0x342)])clearTimeout(devices[_0x571d55][_0x3fdb0b(0x342)]);if(devices[_0x571d55][_0x3fdb0b(0x30d)])clearTimeout(devices[_0x571d55]['pidExpireLogin']);removeSocketListeners(getClient(_0xaa3726['id'])[_0x3fdb0b(0x2bf)]),addBlacklist(_0x571d55),devices[_0x571d55][_0x3fdb0b(0x25e)]=null,devices[_0x571d55]['telegram2FaApproval']=null,devices[_0x571d55][_0x3fdb0b(0x310)][_0x3fdb0b(0x2cb)]=null,logger['debug'](_0x3fdb0b(0x361)+_0x571d55[_0x3fdb0b(0x36b)](-0x8)),io['to'](getClient(_0xaa3726['id'])[_0x3fdb0b(0x2bf)])['emit'](_0x3fdb0b(0x28b),{'access':{'allow':![],'reason':_0x3fdb0b(0x340),'token':null}});}else logger[_0x3fdb0b(0x311)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0xa2c697){const _0x5992e1=_0x420d0d,_0x2e7299=getClient(_0xa2c697['id'])['bot'],_0x17ac36=getClient(_0xa2c697['id'])[_0x5992e1(0x2bf)];_0xa2c697['on']('get-logs',(_0x4d9a0b,_0x21bd78)=>{const _0x5730f7=_0x5992e1;if(validateAccess(_0x21bd78,_0x17ac36)['allow']){if(pid[_0x2e7299])pid[_0x2e7299][_0x5730f7(0x39f)]({'function':_0x5730f7(0x254),'args':_0x4d9a0b});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0xa2c697['on']('delete-alerts',(_0x46e6b3,_0xef585d)=>{const _0x3de4ad=_0x5992e1;if(validateAccess(_0xef585d,_0x17ac36)[_0x3de4ad(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x3de4ad(0x39f)]({'function':_0x3de4ad(0x1e0),'args':_0x46e6b3});}else logger[_0x3de4ad(0x311)](_0x3de4ad(0x2b5));}),_0xa2c697['on'](_0x5992e1(0x1d7),(_0x58f88b,_0x270fbc)=>{const _0x4fcd5d=_0x5992e1;if(validateAccess(_0x270fbc,_0x17ac36)[_0x4fcd5d(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x4fcd5d(0x39f)]({'function':'getPortfolio','args':_0x58f88b});}else logger[_0x4fcd5d(0x311)](_0x4fcd5d(0x2fa));}),_0xa2c697['on']('store-configuration',(_0x1dafaa,_0x1bff5f)=>{const _0x1027ad=_0x5992e1;if(validateAccess(_0x1bff5f,_0x17ac36)[_0x1027ad(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x1027ad(0x39f)]({'function':'storeConfiguration','args':_0x1dafaa});}else logger[_0x1027ad(0x311)](_0x1027ad(0x28d));}),_0xa2c697['on']('store-headless',(_0xea1a2e,_0x2fcc62)=>{const _0x4e7fa5=_0x5992e1;if(validateAccess(_0x2fcc62,_0x17ac36)[_0x4e7fa5(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x4e7fa5(0x39f)]({'function':_0x4e7fa5(0x30c),'args':_0xea1a2e});}else logger[_0x4e7fa5(0x311)](_0x4e7fa5(0x2c9));}),_0xa2c697['on'](_0x5992e1(0x372),(_0x456520,_0x4fd0b0)=>{const _0x2691c8=_0x5992e1;if(validateAccess(_0x4fd0b0,_0x17ac36)['allow']){if(pid[_0x2e7299])pid[_0x2e7299][_0x2691c8(0x39f)]({'function':'storeFiat','args':_0x456520});}else logger[_0x2691c8(0x311)](_0x2691c8(0x393));}),_0xa2c697['on']('reset-history',_0x14b3ca=>{const _0xa1661=_0x5992e1;if(validateAccess(_0x14b3ca,_0x17ac36)['allow']){if(pid[_0x2e7299])pid[_0x2e7299][_0xa1661(0x39f)]({'function':_0xa1661(0x345),'args':null});}else logger[_0xa1661(0x311)](_0xa1661(0x313));}),_0xa2c697['on']('get-starting-balances',_0x3292e3=>{const _0x260e47=_0x5992e1;if(validateAccess(_0x3292e3,_0x17ac36)['allow']){if(pid[_0x2e7299])pid[_0x2e7299][_0x260e47(0x39f)]({'function':_0x260e47(0x351),'args':null});}else logger[_0x260e47(0x311)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0xa2c697['on'](_0x5992e1(0x39d),(_0x2a62f1,_0x4b76bf)=>{const _0x387705=_0x5992e1;if(validateAccess(_0x4b76bf,_0x17ac36)[_0x387705(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x387705(0x39f)]({'function':_0x387705(0x3a7),'args':_0x2a62f1});}else logger['full']('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0xa2c697['on']('cancel-loading',_0x24abf7=>{const _0x2e49e8=_0x5992e1;if(validateAccess(_0x24abf7,_0x17ac36)[_0x2e49e8(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x2e49e8(0x39f)]({'function':_0x2e49e8(0x346),'args':null});}else logger['full'](_0x2e49e8(0x232));}),_0xa2c697['on'](_0x5992e1(0x30a),_0x4f2665=>{const _0x499bb2=_0x5992e1;if(validateAccess(_0x4f2665,_0x17ac36)[_0x499bb2(0x233)]){if(pid[_0x2e7299])pid[_0x2e7299][_0x499bb2(0x39f)]({'function':_0x499bb2(0x321),'args':null});}else logger[_0x499bb2(0x311)](_0x499bb2(0x22b));}),_0xa2c697['on'](_0x5992e1(0x378),_0x531fb8=>{const _0x23aeee=_0x5992e1;if(validateAccess(_0x531fb8,_0x17ac36)['allow'])updateBB(_0x23aeee(0x2bd));else logger[_0x23aeee(0x311)](_0x23aeee(0x24c));}),_0xa2c697['on'](_0x5992e1(0x1fe),_0x2adea6=>{const _0x343ec1=_0x5992e1;if(validateAccess(_0x2adea6,_0x17ac36)['allow'])getMessages();else logger['full'](_0x343ec1(0x294));}),_0xa2c697['on']('confirm-message',(_0x307a34,_0x451698)=>{const _0x4ee51c=_0x5992e1;if(validateAccess(_0x451698,_0x17ac36)[_0x4ee51c(0x233)])confirmMessage(_0x307a34);else logger[_0x4ee51c(0x311)](_0x4ee51c(0x334));}),_0xa2c697['on'](_0x5992e1(0x266),_0x4b6c28=>{const _0x3f1703=_0x5992e1;if(validateAccess(_0x4b6c28,_0x17ac36)['allow']){if(devices[_0x17ac36][_0x3f1703(0x342)])clearTimeout(devices[_0x17ac36][_0x3f1703(0x342)]);if(devices[_0x17ac36][_0x3f1703(0x30d)])clearTimeout(devices[_0x17ac36]['pidExpireLogin']);removeSocketListeners(getClient(_0xa2c697['id'])[_0x3f1703(0x2bf)]),addBlacklist(_0x17ac36),devices[_0x17ac36][_0x3f1703(0x25e)]=null,devices[_0x17ac36][_0x3f1703(0x36f)]=null,devices[_0x17ac36][_0x3f1703(0x310)]['token']=null,logger[_0x3f1703(0x1f2)](_0x3f1703(0x361)+_0x17ac36['slice'](-0x8)),io['to'](getClient(_0xa2c697['id'])['uuid'])[_0x3f1703(0x216)](_0x3f1703(0x28b),{'access':{'allow':![],'reason':_0x3f1703(0x340),'token':null}});}else logger[_0x3f1703(0x311)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x5675dc){const _0x4136aa=_0x420d0d;getClientsWithUuid(_0x5675dc)[_0x4136aa(0x33f)](_0x3af014=>{const _0x26c6e1=_0x4136aa;getSocket(_0x3af014['id'])[_0x26c6e1(0x38d)]();});}function cleanSettings(){const _0x3622e9=_0x420d0d;let _0x5cc3d2=settings;return settings[_0x3622e9(0x1e1)]&&settings[_0x3622e9(0x1e1)]!=''&&(_0x5cc3d2={..._0x5cc3d2,'telegramToken':_0x3622e9(0x2d2)}),settings[_0x3622e9(0x2a6)]&&settings[_0x3622e9(0x2a6)]!=''&&(_0x5cc3d2={..._0x5cc3d2,'bbPassword':_0x3622e9(0x2d2)}),(settings[_0x3622e9(0x2a6)]&&settings[_0x3622e9(0x2a6)]==_0x3622e9(0x269)||settings['telegramToken']&&settings[_0x3622e9(0x1e1)]==_0x3622e9(0x269))&&(_0x5cc3d2={..._0x5cc3d2,'restored':{'password':settings['bbPassword']==_0x3622e9(0x269),'telegram':settings['telegramToken']=='***'}}),_0x5cc3d2;}async function updateBB(_0xa275f4){const _0x3b950b=_0x420d0d;await backupConfigFiles(),installingUpdate=!![],config[_0x3b950b(0x33f)](_0x32d9fb=>{restartBot(_0x32d9fb['botID']);}),logger[_0x3b950b(0x1f2)](_0x3b950b(0x350)+_0xa275f4);if(_0xa275f4==_0x3b950b(0x2bd))process[_0x3b950b(0x39f)]({'update':!![]},_0x2a222c=>{});else _0xa275f4==_0x3b950b(0x2a9)&&process[_0x3b950b(0x39f)]({'reinstall':!![]},_0x2247b0=>{});}function _0x1a73(){const _0x364c09=['cancelLoading','user','disconnect','3054860rmLApO','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','argv','internal','hasOwnProperty','Server','login\x20not\x20required','Starting\x20Balance\x20Bot\x20','getStartingBalances','headless','login\x20token\x20generated','settings','access\x20timeout','alias','socket','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','privateKey','express','updatebotmanager','Alerts','getMinutes','-config.json','store-settings','temporaryAccessAllowed','Logged\x20out\x20user\x20...','existsSync','#RES#\x20if\x20running\x20locally\x0a','5\x20min','username','SIGTERM','mode','disabled','/output-000.log','userid','slice','started','push','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','telegram2FaApproval','exit','\x20|\x20user:\x20...','store-fiat','parse','clients','then','\x20minutes','remoteAddress','update-bb','title','0.0.0','sendMetricsTelegram','Login\x20rejected','output-003.log','Unauthorized\x20attempt\x20to\x20update\x20bot','127.0.0.1','reason','Notifications\x20enabled','event','sockets','DEFLATE','catch','Starting\x20bot\x20|\x20Bot\x20','/:bot','toggle-bot-mode','2FA\x20login\x20rejected','30\x20min','sha256','isIPv4MappedAddress','removeAllListeners','enabled','toggleBotMode','Network\x20Interfaces:','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','all','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Bot\x20','handshake','Backup\x20file\x20unzipped\x20and\x20stored','Temporary\x20access\x20rejected','Notifications\x20disabled','isValid','SIGINT','No\x20bots\x20running\x20right\x20now','remove','place-order','bbUsername','send','crypto','513JYDGtR','bbvNew','backup-full.zip','File\x20uploaded','generateKeyPairAsync','length','placeOrder','get','\x1b[31m','answerCallbackQuery','</b>\x20?','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','settings.','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','/:bot/portfolio','config/','rmSync','Unauthorized\x20attempt\x20to\x20download\x20','Orders',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','get-portfolio','mtime','get-backup-files','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Enabled\x20Bot\x20','-----------------------------------------------------------------------------------','Ok,\x20will\x20send\x20alert\x20notifications\x20only','clientip','deleteHistoryAlerts','telegramToken','Markdown','telegramChatId','\x1b[0m','Your\x20installation\x20is\x20already\x20up\x20to\x20date','1IWTcYT','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','/names\x20-\x20show\x20bot\x20names\x0a','split','All\x20bots\x20running\x20right\x20now','botmanager','Yes','getMonth','All','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','filter','store','debug','\x20>\x20','removeListener','secure','botID','toString','logs','new-disabled','value','node-zip','write','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','get-messages','download','messages',',\x20must\x20be\x20a\x204\x20digit\x20number','family','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','telegramUsername','backup-full@','Error:\x20Invalid\x20argument\x20','initclient','reinstall-bb','version.json','2FA','format','/metrics\x20-\x20show\x20bot\x20performance\x0a','Restore\x20backup\x20file\x20','login','/:bot/performance','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','path','versions','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','backup','max','emit','args','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','once','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','uncaughtException','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','use','mkdirSync','address','Error\x20while\x20deleting\x20config\x20files:\x20','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','child_process','lastmsgemitted','-events.json','Idling\x20bot\x20\x20\x20|\x20Bot\x20','auth','chat','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Failed\x20to\x20download\x20','data','Unauthorized\x20attempt\x20to\x20show\x20configuration','confirm-message','396726VZzRDw','Invalid\x20authentication\x20token\x20(1)','telegramEvents','$1_$2_$3','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','allow','Unauthorized\x20attempt\x20to\x20update\x20settings','stop','orders','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','search','404\x20Not\x20Found','bbvReceive','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','\x20|\x20client:\x20...','7Znoibw','HTML','Bot\x20Mgr\x20>\x20','logs/','Access\x20enabled\x20for\x20','error','output-001.log','3000','telegrammsg','padStart','bot','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','(((.+)+)+)+$','timeshift','static','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','success','express-fileupload','running','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','statSync','telegram','Invalid\x20authentication\x20token\x20(2)','emitHistory','show','temp/','1703168JWQUOJ','auto','simple','botname','accept','test','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','telegramIpApproval','lastmsgtelegram','2FA\x20login\x20required','sendMessage','fork','index.html','9029592Wichkj','/upload-backup','logout','sort','8UmJtGJ','***','order','Restore\x20process\x20aborted','onepagemode','callback_query','latestversion','readFileSync','cloneDeep','mixpanel','message','inherit','.zip','onText','getHours','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','zip/','connection','add','stopPolling','live','NTBA_FIX_319','restore-backup-file','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','build2','login\x20required','defaults','Unauthorized\x20attempt\x20to\x20delete\x20bot','request','port','http','expiry','6b67f3d61ee94b8f5c80b4affef4c4d9','/enable\x20-\x20enable\x20notifications\x0a','lowdb/adapters/FileSync','status','from','Unauthorized\x20attempt\x20to\x20store\x20configuration','init','hex','temporary\x20access\x20rejected','getFullYear','alerts','reset-password','Unauthorized\x20attempt\x20to\x20get\x20messages','constructor','replace','set','secret','version','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','find','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','kill','Invalid\x20Telegram\x20token','Restoring\x20bot(s)\x20from\x20backup','exp','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','-performance.json','temporary\x20token\x20generated','output-002.log','number','bbPassword','IPv4','Unauthorized\x20attempt\x20to\x20add\x20bot','reinstall','polling_error','log','listen','No\x20authentication\x20token','startsWith','Starting\x20#RED#Balance\x20Bot\x20v','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','https://api.ipify.org?format=json','temporary\x20access\x20timeout','private','match','Unauthorized\x20attempt\x20to\x20delete\x20alerts','8210982TPUUCO','getDate','loginRequired','compareSync','bcryptjs','notification','sortBy','update','15\x20min','uuid','unlinkSync','bb-secure.json','delete-bot','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','password','getSeconds','3200712UzElCv','tkn','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','keys','token','/on\x20-\x20start\x20bot(s)\x0a','function','backup-full','range',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','login\x20token\x20valid','************','output-000.log','server','Allow\x20login\x20from\x20IP\x20address\x20<b>','decrypt','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','files','bot.js','[ip-address]','Disabled\x20Bot\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','2FA\x20required','hashSync','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','readdirSync','User\x20has\x20been\x20validated','Starting\x20Balance\x20Bot\x20update','<b>Telegram\x20Bot\x20Status:</b>\x0a','file','util','binary','join','*$1*','yargs/yargs','Session\x20expired\x20for\x20user\x20...','warning','hybrid-crypto-js','getTime','sendPortfolioTelegram','headers','\x20(2)','bb/','\x20only\x0a','invalid\x20credentials','type','backupfile','reject','isDirectory','\x20|\x20','connected','Unauthorized\x20attempt\x20to\x20get\x20portfolio','whitelistEnabled','assign','/:bot/configuration','uuid-random','RSA','restart','/help\x20-\x20show\x20available\x20commands\x0a','includes','::ffff:127.0.0.1','sendFile','writeFileSync','bb-config.json','All\x20bots','node','manual','show-config','-results.json','storeHeadless','pidExpireLogin','bb-settings.json','apiKey','access','full','Login\x20accepted','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','#RES#\x0a','blacklist','ipv6','sign','timestamp','Restarting\x20Bot\x20','bots','Invalid\x20IP\x20address','Crypt','getUTCHours','stopped','verify','showname','showConfig','>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://localhost:','build','update-bot','\x20to\x20','name','yes','apiSecret','\x1b[34m','f2aRequired','toIPv4Address','publicKey','295580YfFWWw','2FA\x20login\x20token\x20generated','telegramEnabled','#RES#\x20if\x20running\x20on\x20server','reload','bot-','post','Unauthorized\x20attempt\x20to\x20confirm\x20message','size','toIPv4MappedAddress','\x20mode','Starting\x20new\x20bot\x20|\x20Bot\x20','backup/','new','\x20(1)','/off\x20-\x20stop\x20bot(s)\x0a','Password\x20has\x20been\x20reset\x20to:\x20','Deleted\x20Bot\x20','forEach','logged\x20out','copyFileSync','pidRefreshToken','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','stringify','resetHistory'];_0x1a73=function(){return _0x364c09;};return _0x1a73();}function startBot(_0x554943,_0x2815b1,_0x440383){const _0x236faf=_0x420d0d;if(debugging)_0x554943[_0x236faf(0x36d)]('-d');let _0x492385=![];const _0x149601=_0x554943[0x0];_0x2815b1={..._0x2815b1,'stdio':['inherit',_0x236faf(0x273),_0x236faf(0x273),'ipc']},pid[_0x149601]=childProcess[_0x236faf(0x262)](botfile,_0x554943,_0x2815b1),pid[_0x149601]['on'](_0x236faf(0x272),_0x10df08=>{const _0x40fb9f=_0x236faf;switch(Object[_0x40fb9f(0x2ca)](_0x10df08)[0x0]){case'botname':updateBotName(_0x149601,_0x10df08[_0x40fb9f(0x25a)]);break;case _0x40fb9f(0x35b):updateBotManager();break;case _0x40fb9f(0x28b):updateStatus(_0x149601,_0x10df08[_0x40fb9f(0x28b)]);break;case _0x40fb9f(0x27c):updateLive(_0x149601,_0x10df08[_0x40fb9f(0x27c)]);break;case _0x40fb9f(0x36c):updateLive(_0x149601,_0x10df08[_0x40fb9f(0x36c)]),io['to'](_0x149601)['emit'](_0x40fb9f(0x28b),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x10df08[_0x40fb9f(0x235)]==_0x40fb9f(0x300)&&restartBot(_0x149601);_0x10df08[_0x40fb9f(0x235)]==_0x40fb9f(0x29d)&&toggleBot(_0x149601,_0x40fb9f(0x368),_0x40fb9f(0x31e));break;case _0x40fb9f(0x252):sendTelegram(_0x149601,_0x10df08[_0x40fb9f(0x252)]);break;case _0x40fb9f(0x245):sendTelegramMsg(_0x10df08['telegrammsg']);break;case _0x40fb9f(0x2cd):io['to'](_0x149601)['emit'](_0x10df08[_0x40fb9f(0x2cd)],_0x10df08[_0x40fb9f(0x217)]);break;}}),pid[_0x149601]['on'](_0x236faf(0x242),function(_0x180f30){if(_0x492385)return;_0x492385=!![],_0x440383(_0x180f30);}),pid[_0x149601]['on']('exit',async function(_0x281e27){const _0x522267=_0x236faf;if(installingUpdate)return;if(_0x492385)return;_0x492385=!![],_0x440383(null);const _0x20261a=dbConfig[_0x522267(0x3a8)](_0x522267(0x31a))[_0x522267(0x29b)]({'botID':_0x149601})[_0x522267(0x1fa)]();_0x20261a&&(_0x20261a[_0x522267(0x28b)]=='enabled'||_0x20261a['status']==_0x522267(0x33a))&&(await sleep(0x3e8),updateLive(_0x149601,_0x522267(0x31e)),logger['full'](_0x522267(0x319)+_0x149601),startBot([_0x149601,userID],{'cwd':bbpath},function(_0x4bcb3b){const _0xd6197c=_0x522267;if(_0x4bcb3b)logger[_0xd6197c(0x311)](_0x4bcb3b);}));});}function stopBot(_0x346b6c){const _0x5a0e2c=_0x420d0d;getClientsWithBotID(_0x346b6c)[_0x5a0e2c(0x33f)](_0x4bb95e=>{const _0x3be866=_0x5a0e2c;getSocket(_0x4bb95e['id'])[_0x3be866(0x348)](!![]),removeClient(_0x4bb95e['id']);}),pid[_0x346b6c]&&(pid[_0x346b6c][_0x5a0e2c(0x29d)](),pid[_0x346b6c]=null);}function restartBot(_0x1c1d60){const _0x2bd29d=_0x420d0d;if(pid[_0x1c1d60])pid[_0x1c1d60][_0x2bd29d(0x29d)]();}function addBot(){const _0x2ff4e8=_0x420d0d;let _0x465488;for(let _0x336c79=0x1;_0x336c79<0x3e9;_0x336c79++){_0x465488=_0x336c79[_0x2ff4e8(0x1f7)]()[_0x2ff4e8(0x246)](0x3,'0');let _0x3f02b1=config[_0x2ff4e8(0x29b)](_0xc6fa91=>_0xc6fa91[_0x2ff4e8(0x1f6)]==_0x465488);if(!_0x3f02b1)break;}if(_0x465488==='1000'){logger[_0x2ff4e8(0x311)](_0x2ff4e8(0x277));return;}logger[_0x2ff4e8(0x311)](_0x2ff4e8(0x338)+_0x465488),dbConfig[_0x2ff4e8(0x3a8)](_0x2ff4e8(0x31a))[_0x2ff4e8(0x36d)]({'botID':_0x465488,'botname':'Bot\x20'+_0x465488,'status':_0x2ff4e8(0x33a),'live':''})['write'](),startBot([_0x465488,userID],{'cwd':bbpath},function(_0x350aba){const _0x193a58=_0x2ff4e8;if(_0x350aba)logger[_0x193a58(0x311)](_0x350aba);}),config=getConfiguration(),io['to']('botmanager')[_0x2ff4e8(0x216)](_0x2ff4e8(0x31a),config),broadcastToBots(_0x2ff4e8(0x31a),JSON['stringify'](config));}function deleteBot(_0x11de42){const _0xae9cc6=_0x420d0d;getClientsWithBotID(_0x11de42)[_0xae9cc6(0x33f)](_0x256523=>{getSocket(_0x256523['id'])['disconnect'](!![]),removeClient(_0x256523['id']);}),dbConfig[_0xae9cc6(0x3a8)](_0xae9cc6(0x31a))['remove']({'botID':_0x11de42})['write'](),logger[_0xae9cc6(0x311)](_0xae9cc6(0x33e)+_0x11de42),stopBot(_0x11de42);try{if(fs[_0xae9cc6(0x362)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+_0xae9cc6(0x35e))))fs[_0xae9cc6(0x2c0)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+'-config.json'));if(fs[_0xae9cc6(0x362)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+_0xae9cc6(0x224))))fs[_0xae9cc6(0x2c0)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+_0xae9cc6(0x224)));if(fs[_0xae9cc6(0x362)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+_0xae9cc6(0x2a2))))fs[_0xae9cc6(0x2c0)](path[_0xae9cc6(0x2e7)](configpath,_0xae9cc6(0x332)+_0x11de42+_0xae9cc6(0x2a2)));if(fs['existsSync'](path[_0xae9cc6(0x2e7)](configpath,'bot-'+_0x11de42+'-results.json')))fs[_0xae9cc6(0x2c0)](path['join'](configpath,'bot-'+_0x11de42+_0xae9cc6(0x30b)));}catch(_0x21643e){if(_0x21643e)logger[_0xae9cc6(0x311)](_0xae9cc6(0x220),_0x21643e);}config=getConfiguration(),io['to']('botmanager')[_0xae9cc6(0x216)](_0xae9cc6(0x31a),config),broadcastToBots(_0xae9cc6(0x31a),JSON['stringify'](config));}function toggleBot(_0x479bdf,_0x22c901,_0x404d6f){const _0x155724=_0x420d0d;dbConfig[_0x155724(0x3a8)](_0x155724(0x31a))[_0x155724(0x29b)]({'botID':_0x479bdf})['assign']({'status':_0x22c901})[_0x155724(0x2fc)]({'live':_0x404d6f})[_0x155724(0x1fc)]();if(_0x22c901==_0x155724(0x38e)||_0x22c901==_0x155724(0x33a))logger[_0x155724(0x311)](_0x155724(0x1dc)+_0x479bdf),startBot([_0x479bdf,userID],{'cwd':bbpath},function(_0x154175){const _0x16230d=_0x155724;if(_0x154175)logger[_0x16230d(0x311)](_0x154175);});else(_0x22c901==_0x155724(0x368)||_0x22c901==_0x155724(0x1f9))&&(logger[_0x155724(0x311)](_0x155724(0x2db)+_0x479bdf),stopBot(_0x479bdf));config=getConfiguration(),io['to']('botmanager')[_0x155724(0x216)](_0x155724(0x31a),config),broadcastToBots(_0x155724(0x31a),JSON[_0x155724(0x344)](config));}function toggleStatus(_0x48f86b){const _0x534678=_0x420d0d;let _0x52500a=dbConfig['get']('bots')[_0x534678(0x29b)]({'botID':_0x48f86b})['value'](),_0x495958;if(_0x52500a[_0x534678(0x28b)]===_0x534678(0x38e))_0x495958=_0x534678(0x368);else{if(_0x52500a[_0x534678(0x28b)]==='new')_0x495958=_0x534678(0x1f9);else{if(_0x52500a['status']===_0x534678(0x1f9))_0x495958=_0x534678(0x33a);else{if(_0x52500a[_0x534678(0x28b)]==='disabled')_0x495958='enabled';}}}return _0x495958;}function updateStatus(_0x4c8651,_0x28569c){const _0x1b1859=_0x420d0d;dbConfig[_0x1b1859(0x3a8)](_0x1b1859(0x31a))['find']({'botID':_0x4c8651})['assign']({'status':_0x28569c})[_0x1b1859(0x1fc)](),config=getConfiguration(),io['to'](_0x1b1859(0x1eb))[_0x1b1859(0x216)](_0x1b1859(0x31a),config),broadcastToBots(_0x1b1859(0x31a),JSON[_0x1b1859(0x344)](config));}function updateLive(_0x57d2ff,_0x36354b){const _0x2f5c26=_0x420d0d;dbConfig[_0x2f5c26(0x3a8)](_0x2f5c26(0x31a))[_0x2f5c26(0x29b)]({'botID':_0x57d2ff})[_0x2f5c26(0x2fc)]({'live':_0x36354b})[_0x2f5c26(0x1fc)](),config=getConfiguration(),io['to'](_0x2f5c26(0x1eb))[_0x2f5c26(0x216)](_0x2f5c26(0x31a),config),broadcastToBots(_0x2f5c26(0x31a),JSON[_0x2f5c26(0x344)](config));}function updateBotName(_0x4f5022,_0x395971){const _0x50f695=_0x420d0d;dbConfig[_0x50f695(0x3a8)]('bots')[_0x50f695(0x29b)]({'botID':_0x4f5022})[_0x50f695(0x2fc)]({'botname':_0x395971})['write'](),config=getConfiguration(),io['to'](_0x50f695(0x1eb))[_0x50f695(0x216)](_0x50f695(0x31a),config),broadcastToBots(_0x50f695(0x31a),JSON[_0x50f695(0x344)](config));}function updateBotManager(){const _0x440c80=_0x420d0d;config=getConfiguration(),io['to']('botmanager')[_0x440c80(0x216)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x565674){const _0x1cee4b=_0x420d0d;if(pid[_0x565674])pid[_0x565674][_0x1cee4b(0x39f)]({'function':_0x1cee4b(0x38f),'args':null});else{const _0x1bd2f7=configpath+_0x1cee4b(0x332)+_0x565674+'-config.json',_0x4ff71c=fs[_0x1cee4b(0x26f)](_0x1bd2f7),_0x28fd6f=JSON[_0x1cee4b(0x373)](_0x4ff71c),_0x2c8370=_0x28fd6f[_0x1cee4b(0x247)][0x0][_0x1cee4b(0x352)];_0x28fd6f['bot'][0x0]['headless']=!_0x2c8370;const _0x55d58a=JSON[_0x1cee4b(0x344)](_0x28fd6f,null,0x2);fs['writeFileSync'](_0x1bd2f7,_0x55d58a),config=getConfiguration(),io['to'](_0x1cee4b(0x1eb))['emit'](_0x1cee4b(0x31a),config),broadcastToBots(_0x1cee4b(0x31a),JSON[_0x1cee4b(0x344)](config));}}function telegramError(_0x57b632){const _0x25be1c=_0x420d0d;logger['simple'](getTimeStamp()+_0x25be1c(0x1d6));}function validateTelegram(_0x2d6416){const _0x256966=_0x420d0d;if(_0x2d6416[_0x256966(0x28c)][_0x256966(0x365)]!=settings[_0x256966(0x204)]&&'@'+_0x2d6416[_0x256966(0x28c)][_0x256966(0x365)]!=settings['telegramUsername'])return tgBot[_0x256966(0x261)](_0x2d6416[_0x256966(0x227)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x256966(0x23e)})[_0x256966(0x385)](_0xdab16f=>{telegramError(_0xdab16f);}),![];return!![];}async function initTelegram(){const _0x1b1de5=_0x420d0d;if(tgBot)tgBot[_0x1b1de5(0x27b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1b1de5(0x1e1)],{'polling':!![]});let _0x3aae1b='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x3aae1b+='\x0a',_0x3aae1b+=_0x1b1de5(0x289),_0x3aae1b+='/disable\x20-\x20disable\x20notifications\x0a',_0x3aae1b+=_0x1b1de5(0x2df),_0x3aae1b+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3aae1b+=_0x1b1de5(0x2cc),_0x3aae1b+=_0x1b1de5(0x33c),_0x3aae1b+=_0x1b1de5(0x343),_0x3aae1b+=_0x1b1de5(0x1e8),_0x3aae1b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x3aae1b+=_0x1b1de5(0x20c),_0x3aae1b+=_0x1b1de5(0x358),_0x3aae1b+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x3aae1b+=_0x1b1de5(0x1da),_0x3aae1b+=_0x1b1de5(0x301);let _0x16e639=_0x1b1de5(0x221);_0x16e639+='\x0a',_0x16e639+=_0x3aae1b,tgBot[_0x1b1de5(0x275)](/\/start/,_0x575fcd=>{const _0x12eb86=_0x1b1de5;if(!validateTelegram(_0x575fcd))return;if(settings[_0x12eb86(0x1e3)]!=_0x575fcd[_0x12eb86(0x227)]['id'])updateSetting('telegramChatId',_0x575fcd[_0x12eb86(0x227)]['id']);updateSetting(_0x12eb86(0x32f),!![]),tgBot[_0x12eb86(0x261)](_0x575fcd[_0x12eb86(0x227)]['id'],_0x16e639)[_0x12eb86(0x385)](_0x232697=>{telegramError(_0x232697);});}),tgBot[_0x1b1de5(0x275)](/\/enable/,_0x3ace99=>{const _0x106ff0=_0x1b1de5;if(!validateTelegram(_0x3ace99))return;if(settings[_0x106ff0(0x1e3)]!=_0x3ace99[_0x106ff0(0x227)]['id'])updateSetting(_0x106ff0(0x1e3),_0x3ace99[_0x106ff0(0x227)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x106ff0(0x261)](_0x3ace99[_0x106ff0(0x227)]['id'],_0x106ff0(0x381))[_0x106ff0(0x385)](_0x424eed=>{telegramError(_0x424eed);});}),tgBot[_0x1b1de5(0x275)](/\/config/,async _0x469892=>{const _0x105703=_0x1b1de5;if(!validateTelegram(_0x469892))return;tgBot[_0x105703(0x1f4)](_0x105703(0x26d)),tgBot[_0x105703(0x261)](_0x469892['chat']['id'],_0x105703(0x250),{'reply_markup':{'inline_keyboard':[[{'text':_0x105703(0x1d5),'callback_data':_0x105703(0x236)},{'text':_0x105703(0x35c),'callback_data':_0x105703(0x292)},{'text':_0x105703(0x1ee),'callback_data':'all'}]]}})[_0x105703(0x385)](_0x52be71=>{telegramError(_0x52be71);}),tgBot['on'](_0x105703(0x26d),async _0xd76fb1=>{const _0x4b34cf=_0x105703,_0xddb028=_0xd76fb1[_0x4b34cf(0x22a)],_0x3d9d55=_0xd76fb1[_0x4b34cf(0x272)];tgBot['answerCallbackQuery'](_0xd76fb1['id'])[_0x4b34cf(0x375)](async()=>{const _0x2a28bd=_0x4b34cf;_0xddb028==_0x2a28bd(0x236)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x2a28bd(0x32f),!![]),await tgBot[_0x2a28bd(0x261)](_0x3d9d55['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x2a28bd(0x385)](_0x5712f1=>{telegramError(_0x5712f1);}));_0xddb028==_0x2a28bd(0x292)&&(updateSetting(_0x2a28bd(0x22f),_0x2a28bd(0x292)),updateSetting(_0x2a28bd(0x32f),!![]),await tgBot['sendMessage'](_0x3d9d55['chat']['id'],_0x2a28bd(0x1de))[_0x2a28bd(0x385)](_0x2f6412=>{telegramError(_0x2f6412);}));_0xddb028=='all'&&(updateSetting(_0x2a28bd(0x22f),_0x2a28bd(0x392)),updateSetting(_0x2a28bd(0x32f),!![]),await tgBot['sendMessage'](_0x3d9d55[_0x2a28bd(0x227)]['id'],_0x2a28bd(0x210))['catch'](_0xf7c840=>{telegramError(_0xf7c840);}));if(!settings[_0x2a28bd(0x1e3)])tgBot[_0x2a28bd(0x261)](_0x3d9d55[_0x2a28bd(0x227)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2a28bd(0x385)](_0x3005b2=>{telegramError(_0x3005b2);});}),tgBot[_0x4b34cf(0x1f4)]('callback_query');});}),tgBot[_0x1b1de5(0x275)](/\/status/,_0x22c8b3=>{const _0x1dacc8=_0x1b1de5;if(!validateTelegram(_0x22c8b3))return;const _0x1b8928=getBotsWithMode();let _0x491d15='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x4d72ca=>{const _0x457a25=_0x5908,_0x5581e0=_0x1b8928[_0x457a25(0x29b)](_0x44bcea=>_0x44bcea[_0x457a25(0x1f6)]==_0x4d72ca[_0x457a25(0x1f6)])['mode'];_0x491d15+=_0x457a25(0x394)+_0x4d72ca[_0x457a25(0x1f6)]+':\x20'+_0x4d72ca[_0x457a25(0x28b)]+'\x20|\x20'+_0x5581e0+_0x457a25(0x2f8)+_0x4d72ca[_0x457a25(0x27c)]+'\x0a';}),_0x491d15+='\x0a',_0x491d15+=_0x1dacc8(0x2e3),_0x491d15+=!settings[_0x1dacc8(0x32f)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x491d15+=settings[_0x1dacc8(0x32f)]?settings[_0x1dacc8(0x22f)]==_0x1dacc8(0x392)?_0x1dacc8(0x248):_0x1dacc8(0x2c8)+settings[_0x1dacc8(0x22f)]+_0x1dacc8(0x2f2):'',tgBot[_0x1dacc8(0x261)](_0x22c8b3[_0x1dacc8(0x227)]['id'],_0x491d15,{'parse_mode':_0x1dacc8(0x23e)})[_0x1dacc8(0x385)](_0x30062e=>{telegramError(_0x30062e);});}),tgBot[_0x1b1de5(0x275)](/\/restart/,_0x16c066=>{const _0x2d05e7=_0x1b1de5;if(!validateTelegram(_0x16c066))return;tgBot[_0x2d05e7(0x1f4)](_0x2d05e7(0x26d));const _0x5d9d52=getEnabledBots();if(_0x5d9d52[_0x2d05e7(0x3a6)]==0x0)tgBot['sendMessage'](_0x16c066[_0x2d05e7(0x227)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x2d05e7(0x385)](_0x3c7269=>{telegramError(_0x3c7269);});else{if(_0x5d9d52[_0x2d05e7(0x3a6)]>0x1)_0x5d9d52['push']({'botID':'all'});let _0x10dbca=[],_0x573b9e=[];const _0x38d8ba=_0x5d9d52['length']%0x4==0x0||_0x5d9d52[_0x2d05e7(0x3a6)]%0x4==0x3||_0x5d9d52[_0x2d05e7(0x3a6)]%0x3==0x1?0x4:0x3;let _0x49ddd6=0x0;_0x5d9d52['forEach']((_0x1fa749,_0x24a16c)=>{const _0x1ccc38=_0x2d05e7;if(_0x24a16c%_0x38d8ba==0x0)_0x573b9e=[];_0x573b9e['push']({'text':_0x1fa749[_0x1ccc38(0x1f6)]=='all'?_0x1ccc38(0x307):_0x1ccc38(0x394)+_0x1fa749[_0x1ccc38(0x1f6)],'callback_data':_0x1fa749[_0x1ccc38(0x1f6)]}),_0x24a16c%_0x38d8ba==0x0&&(_0x10dbca[_0x49ddd6]=_0x573b9e,_0x49ddd6++);}),tgBot[_0x2d05e7(0x261)](_0x16c066[_0x2d05e7(0x227)]['id'],_0x2d05e7(0x21c),{'reply_markup':{'inline_keyboard':_0x10dbca}})[_0x2d05e7(0x385)](_0x5cedd9=>{telegramError(_0x5cedd9);}),tgBot['on']('callback_query',async _0x430f8f=>{const _0x2ea9c6=_0x2d05e7,_0x29a1bc=_0x430f8f['data'],_0x1edce4=_0x430f8f[_0x2ea9c6(0x272)];tgBot[_0x2ea9c6(0x3aa)](_0x430f8f['id'])[_0x2ea9c6(0x375)](async()=>{const _0x41fc08=_0x2ea9c6;_0x29a1bc=='all'?config[_0x41fc08(0x33f)](_0x418899=>{restartBot(_0x418899['botID']);}):restartBot(_0x29a1bc);}),tgBot[_0x2ea9c6(0x1f4)]('callback_query');});}}),tgBot[_0x1b1de5(0x275)](/\/on/,_0x28c1bc=>{const _0x5d6fbb=_0x1b1de5;if(!validateTelegram(_0x28c1bc))return;tgBot[_0x5d6fbb(0x1f4)]('callback_query');const _0x519c93=getDisabledBots();if(_0x519c93[_0x5d6fbb(0x3a6)]==0x0)tgBot[_0x5d6fbb(0x261)](_0x28c1bc[_0x5d6fbb(0x227)]['id'],_0x5d6fbb(0x1ea))[_0x5d6fbb(0x385)](_0x46d0e2=>{telegramError(_0x46d0e2);});else{if(_0x519c93[_0x5d6fbb(0x3a6)]>0x1)_0x519c93[_0x5d6fbb(0x36d)]({'botID':_0x5d6fbb(0x392)});let _0xc9d13e=[],_0x5a4ded=[];const _0x3a1d2f=_0x519c93[_0x5d6fbb(0x3a6)]%0x4==0x0||_0x519c93[_0x5d6fbb(0x3a6)]%0x4==0x3||_0x519c93['length']%0x3==0x1?0x4:0x3;let _0x5418cf=0x0;_0x519c93[_0x5d6fbb(0x33f)]((_0x680af0,_0x3b2dfe)=>{const _0x2b8884=_0x5d6fbb;if(_0x3b2dfe%_0x3a1d2f==0x0)_0x5a4ded=[];_0x5a4ded[_0x2b8884(0x36d)]({'text':_0x680af0[_0x2b8884(0x1f6)]==_0x2b8884(0x392)?_0x2b8884(0x307):_0x2b8884(0x394)+_0x680af0[_0x2b8884(0x1f6)],'callback_data':_0x680af0[_0x2b8884(0x1f6)]}),_0x3b2dfe%_0x3a1d2f==0x0&&(_0xc9d13e[_0x5418cf]=_0x5a4ded,_0x5418cf++);}),tgBot['sendMessage'](_0x28c1bc[_0x5d6fbb(0x227)]['id'],_0x5d6fbb(0x2a1),{'reply_markup':{'inline_keyboard':_0xc9d13e}})[_0x5d6fbb(0x385)](_0x25bdeb=>{telegramError(_0x25bdeb);}),tgBot['on']('callback_query',async _0x59886d=>{const _0x10da85=_0x5d6fbb,_0x4c4e77=_0x59886d[_0x10da85(0x22a)],_0x2e3133=_0x59886d[_0x10da85(0x272)];tgBot[_0x10da85(0x3aa)](_0x59886d['id'])[_0x10da85(0x375)](async()=>{const _0x4ce843=_0x10da85;_0x4c4e77==_0x4ce843(0x392)?(tgBot[_0x4ce843(0x261)](_0x2e3133[_0x4ce843(0x227)]['id'],_0x4ce843(0x23b))['catch'](_0x238a6b=>{telegramError(_0x238a6b);}),_0x519c93['forEach'](_0x2bd269=>{const _0x58c531=_0x4ce843;if(_0x2bd269[_0x58c531(0x1f6)]!='all')toggleBot(_0x2bd269[_0x58c531(0x1f6)],toggleStatus(_0x2bd269[_0x58c531(0x1f6)]),'stopped');})):(tgBot[_0x4ce843(0x261)](_0x2e3133[_0x4ce843(0x227)]['id'],_0x4ce843(0x228)+_0x4c4e77)['catch'](_0x3ecdb9=>{telegramError(_0x3ecdb9);}),toggleBot(_0x4c4e77,toggleStatus(_0x4c4e77),_0x4ce843(0x31e)));}),tgBot[_0x10da85(0x1f4)](_0x10da85(0x26d));});}}),tgBot['onText'](/\/off/,_0x387e29=>{const _0x46eaba=_0x1b1de5;if(!validateTelegram(_0x387e29))return;tgBot[_0x46eaba(0x1f4)](_0x46eaba(0x26d));const _0xaf447a=getEnabledBots();if(_0xaf447a['length']==0x0)tgBot[_0x46eaba(0x261)](_0x387e29[_0x46eaba(0x227)]['id'],_0x46eaba(0x39b))[_0x46eaba(0x385)](_0x28582a=>{telegramError(_0x28582a);});else{if(_0xaf447a[_0x46eaba(0x3a6)]>0x1)_0xaf447a[_0x46eaba(0x36d)]({'botID':'all'});let _0x4c30e1=[],_0x29e1d5=[];const _0x3507c4=_0xaf447a[_0x46eaba(0x3a6)]%0x4==0x0||_0xaf447a['length']%0x4==0x3||_0xaf447a[_0x46eaba(0x3a6)]%0x3==0x1?0x4:0x3;let _0x5e83b8=0x0;_0xaf447a[_0x46eaba(0x33f)]((_0x5556e9,_0x15eece)=>{const _0x2e703b=_0x46eaba;if(_0x15eece%_0x3507c4==0x0)_0x29e1d5=[];_0x29e1d5[_0x2e703b(0x36d)]({'text':_0x5556e9[_0x2e703b(0x1f6)]==_0x2e703b(0x392)?_0x2e703b(0x307):_0x2e703b(0x394)+_0x5556e9[_0x2e703b(0x1f6)],'callback_data':_0x5556e9[_0x2e703b(0x1f6)]}),_0x15eece%_0x3507c4==0x0&&(_0x4c30e1[_0x5e83b8]=_0x29e1d5,_0x5e83b8++);}),tgBot['sendMessage'](_0x387e29[_0x46eaba(0x227)]['id'],_0x46eaba(0x29a),{'reply_markup':{'inline_keyboard':_0x4c30e1}})['catch'](_0x59b30d=>{telegramError(_0x59b30d);}),tgBot['on'](_0x46eaba(0x26d),async _0x1dba2e=>{const _0x449ccb=_0x46eaba,_0x1e6bfb=_0x1dba2e['data'],_0x2cc0c4=_0x1dba2e[_0x449ccb(0x272)];tgBot['answerCallbackQuery'](_0x1dba2e['id'])[_0x449ccb(0x375)](async()=>{const _0x2bfb10=_0x449ccb;_0x1e6bfb==_0x2bfb10(0x392)?(tgBot['sendMessage'](_0x2cc0c4[_0x2bfb10(0x227)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x2bfb10(0x385)](_0x2e03e6=>{telegramError(_0x2e03e6);}),_0xaf447a[_0x2bfb10(0x33f)](_0x52d631=>{const _0x14b90d=_0x2bfb10;if(_0x52d631[_0x14b90d(0x1f6)]!=_0x14b90d(0x392))toggleBot(_0x52d631[_0x14b90d(0x1f6)],toggleStatus(_0x52d631[_0x14b90d(0x1f6)]),_0x14b90d(0x31e));})):(tgBot[_0x2bfb10(0x261)](_0x2cc0c4[_0x2bfb10(0x227)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x1e6bfb)[_0x2bfb10(0x385)](_0x36d36a=>{telegramError(_0x36d36a);}),toggleBot(_0x1e6bfb,toggleStatus(_0x1e6bfb),_0x2bfb10(0x31e)));}),tgBot[_0x449ccb(0x1f4)](_0x449ccb(0x26d));});}}),tgBot['onText'](/\/metrics/,_0x2d38e4=>{const _0x217b91=_0x1b1de5;if(!validateTelegram(_0x2d38e4))return;tgBot[_0x217b91(0x1f4)](_0x217b91(0x26d));const _0x17f5be=getEnabledBots();if(_0x17f5be[_0x217b91(0x3a6)]==0x0)tgBot[_0x217b91(0x261)](_0x2d38e4[_0x217b91(0x227)]['id'],_0x217b91(0x39b))[_0x217b91(0x385)](_0x4da26a=>{telegramError(_0x4da26a);});else{if(_0x17f5be[_0x217b91(0x3a6)]>0x1){let _0x54ffc6=[],_0x1a05c9=[];const _0x3f68d0=_0x17f5be[_0x217b91(0x3a6)]%0x4==0x0||_0x17f5be[_0x217b91(0x3a6)]%0x4==0x3||_0x17f5be[_0x217b91(0x3a6)]%0x3==0x1?0x4:0x3;let _0x18f812=0x0;_0x17f5be[_0x217b91(0x33f)]((_0x5afdfa,_0x2ef009)=>{const _0x4f700e=_0x217b91;if(_0x2ef009%_0x3f68d0==0x0)_0x1a05c9=[];_0x1a05c9[_0x4f700e(0x36d)]({'text':_0x4f700e(0x394)+_0x5afdfa[_0x4f700e(0x1f6)],'callback_data':_0x5afdfa[_0x4f700e(0x1f6)]}),_0x2ef009%_0x3f68d0==0x0&&(_0x54ffc6[_0x18f812]=_0x1a05c9,_0x18f812++);}),tgBot[_0x217b91(0x261)](_0x2d38e4[_0x217b91(0x227)]['id'],_0x217b91(0x1e7),{'reply_markup':{'inline_keyboard':_0x54ffc6}})[_0x217b91(0x385)](_0x4528e4=>{telegramError(_0x4528e4);}),tgBot['on'](_0x217b91(0x26d),async _0x17420c=>{const _0x57114a=_0x217b91,_0x814f2=_0x17420c['data'],_0x757d79=_0x17420c[_0x57114a(0x272)];tgBot['answerCallbackQuery'](_0x17420c['id'])[_0x57114a(0x375)](async()=>{const _0x2d14f5=_0x57114a;if(pid[_0x814f2])pid[_0x814f2][_0x2d14f5(0x39f)]({'function':_0x2d14f5(0x37b),'args':null});}),tgBot['removeListener'](_0x57114a(0x26d));});}else{const _0x38a2c3=_0x17f5be[0x0][_0x217b91(0x1f6)];if(pid[_0x38a2c3])pid[_0x38a2c3][_0x217b91(0x39f)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x1b1de5(0x275)](/\/portfolio/,_0x5e4672=>{const _0x16161a=_0x1b1de5;if(!validateTelegram(_0x5e4672))return;tgBot[_0x16161a(0x1f4)](_0x16161a(0x26d));const _0x30b18e=getEnabledBots();if(_0x30b18e[_0x16161a(0x3a6)]==0x0)tgBot['sendMessage'](_0x5e4672[_0x16161a(0x227)]['id'],_0x16161a(0x39b))[_0x16161a(0x385)](_0x5f37f2=>{telegramError(_0x5f37f2);});else{if(_0x30b18e['length']>0x1){let _0x4241c7=[],_0x36e612=[];const _0x349e47=_0x30b18e[_0x16161a(0x3a6)]%0x4==0x0||_0x30b18e[_0x16161a(0x3a6)]%0x4==0x3||_0x30b18e[_0x16161a(0x3a6)]%0x3==0x1?0x4:0x3;let _0x5eedfa=0x0;_0x30b18e[_0x16161a(0x33f)]((_0x33b92c,_0x473281)=>{const _0x24d43=_0x16161a;if(_0x473281%_0x349e47==0x0)_0x36e612=[];_0x36e612[_0x24d43(0x36d)]({'text':'Bot\x20'+_0x33b92c[_0x24d43(0x1f6)],'callback_data':_0x33b92c[_0x24d43(0x1f6)]}),_0x473281%_0x349e47==0x0&&(_0x4241c7[_0x5eedfa]=_0x36e612,_0x5eedfa++);}),tgBot[_0x16161a(0x261)](_0x5e4672[_0x16161a(0x227)]['id'],_0x16161a(0x21a),{'reply_markup':{'inline_keyboard':_0x4241c7}})[_0x16161a(0x385)](_0x49fcc1=>{telegramError(_0x49fcc1);}),tgBot['on'](_0x16161a(0x26d),async _0x3df0ad=>{const _0x31a19f=_0x16161a,_0x190615=_0x3df0ad['data'],_0x164daf=_0x3df0ad['message'];tgBot['answerCallbackQuery'](_0x3df0ad['id'])[_0x31a19f(0x375)](async()=>{const _0x332afb=_0x31a19f;if(pid[_0x190615])pid[_0x190615]['send']({'function':_0x332afb(0x2ee),'args':null});}),tgBot[_0x31a19f(0x1f4)](_0x31a19f(0x26d));});}else{const _0x573204=_0x30b18e[0x0][_0x16161a(0x1f6)];if(pid[_0x573204])pid[_0x573204][_0x16161a(0x39f)]({'function':_0x16161a(0x2ee),'args':null});}}}),tgBot['onText'](/\/update/,async _0x4d3e6f=>{const _0x39f653=_0x1b1de5;if(!validateTelegram(_0x4d3e6f))return;tgBot['removeListener']('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x39f653(0x261)](_0x4d3e6f[_0x39f653(0x227)]['id'],_0x39f653(0x1e5))[_0x39f653(0x385)](_0xb3657d=>{telegramError(_0xb3657d);});else!validInstallation?tgBot['sendMessage'](_0x4d3e6f[_0x39f653(0x227)]['id'],_0x39f653(0x203))[_0x39f653(0x385)](_0x58e26a=>{telegramError(_0x58e26a);}):(tgBot[_0x39f653(0x261)](_0x4d3e6f[_0x39f653(0x227)]['id'],_0x39f653(0x2dc),{'reply_markup':{'inline_keyboard':[[{'text':_0x39f653(0x1ec),'callback_data':_0x39f653(0x327)},{'text':'No','callback_data':'no'}]]}})[_0x39f653(0x385)](_0x2725d8=>{telegramError(_0x2725d8);}),tgBot['on'](_0x39f653(0x26d),async _0x50b687=>{const _0x179291=_0x39f653,_0x1b0b76=_0x50b687[_0x179291(0x22a)],_0x423912=_0x50b687['message'];tgBot[_0x179291(0x3aa)](_0x50b687['id'])['then'](async()=>{const _0x3ff535=_0x179291;_0x1b0b76==_0x3ff535(0x327)&&(await tgBot[_0x3ff535(0x261)](_0x423912[_0x3ff535(0x227)]['id'],_0x3ff535(0x2e2))[_0x3ff535(0x385)](_0x2ee2eb=>{telegramError(_0x2ee2eb);}),updateBB(_0x3ff535(0x2bd))),_0x1b0b76=='no'&&await tgBot[_0x3ff535(0x261)](_0x423912[_0x3ff535(0x227)]['id'],_0x3ff535(0x3ae))[_0x3ff535(0x385)](_0x2452ac=>{telegramError(_0x2452ac);});}),tgBot[_0x179291(0x1f4)]('callback_query');}));}),tgBot[_0x1b1de5(0x275)](/\/reinstall/,async _0x550e35=>{const _0x4bc515=_0x1b1de5;if(!validateTelegram(_0x550e35))return;tgBot[_0x4bc515(0x1f4)](_0x4bc515(0x26d)),!validInstallation?tgBot[_0x4bc515(0x261)](_0x550e35[_0x4bc515(0x227)]['id'],_0x4bc515(0x237))[_0x4bc515(0x385)](_0xad740d=>{telegramError(_0xad740d);}):(tgBot[_0x4bc515(0x261)](_0x550e35[_0x4bc515(0x227)]['id'],_0x4bc515(0x29c),{'reply_markup':{'inline_keyboard':[[{'text':_0x4bc515(0x1ec),'callback_data':_0x4bc515(0x327)},{'text':'No','callback_data':'no'}]]}})[_0x4bc515(0x385)](_0xb2049=>{telegramError(_0xb2049);}),tgBot['on'](_0x4bc515(0x26d),async _0x14ff45=>{const _0x2d32bd=_0x4bc515,_0x45f20c=_0x14ff45[_0x2d32bd(0x22a)],_0x190177=_0x14ff45[_0x2d32bd(0x272)];tgBot['answerCallbackQuery'](_0x14ff45['id'])[_0x2d32bd(0x375)](async()=>{const _0x43edbe=_0x2d32bd;_0x45f20c==_0x43edbe(0x327)&&(await tgBot[_0x43edbe(0x261)](_0x190177[_0x43edbe(0x227)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x43edbe(0x385)](_0x4fa8a2=>{telegramError(_0x4fa8a2);}),updateBB(_0x43edbe(0x2a9))),_0x45f20c=='no'&&await tgBot[_0x43edbe(0x261)](_0x190177['chat']['id'],_0x43edbe(0x213))[_0x43edbe(0x385)](_0x2fde8b=>{telegramError(_0x2fde8b);});}),tgBot['removeListener']('callback_query');}));}),tgBot['onText'](/\/toggle/,_0x304f3e=>{const _0x3339a6=_0x1b1de5;if(!validateTelegram(_0x304f3e))return;tgBot[_0x3339a6(0x1f4)]('callback_query');const _0x51d107=getBotsWithMode();if(_0x51d107['length']==0x0)tgBot['sendMessage'](_0x304f3e[_0x3339a6(0x227)]['id'],_0x3339a6(0x39b))[_0x3339a6(0x385)](_0x730c1e=>{telegramError(_0x730c1e);});else{let _0x461482=[],_0x2667f0=[];const _0x35e49b=0x2;let _0xbd9288=0x0;_0x51d107[_0x3339a6(0x33f)]((_0x1cc8ac,_0x226b9e)=>{const _0x2be442=_0x3339a6;if(_0x226b9e%_0x35e49b==0x0)_0x2667f0=[];_0x2667f0[_0x2be442(0x36d)]({'text':_0x2be442(0x394)+_0x1cc8ac[_0x2be442(0x1f6)]+'\x20('+_0x1cc8ac['mode']+')','callback_data':_0x1cc8ac['botID']}),_0x226b9e%_0x35e49b==0x0&&(_0x461482[_0xbd9288]=_0x2667f0,_0xbd9288++);}),tgBot[_0x3339a6(0x261)](_0x304f3e[_0x3339a6(0x227)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x461482}})['catch'](_0x480ad8=>{telegramError(_0x480ad8);}),tgBot['on'](_0x3339a6(0x26d),async _0xae4947=>{const _0x462d43=_0x3339a6,_0x9b0e4e=_0xae4947['data'],_0x279279=_0xae4947[_0x462d43(0x272)];tgBot[_0x462d43(0x3aa)](_0xae4947['id'])[_0x462d43(0x375)](async()=>{const _0x201762=_0x462d43,_0x29fe78=_0x51d107['find'](_0x4f7a1d=>_0x4f7a1d['botID']==_0x9b0e4e),_0x494021=_0x29fe78[_0x201762(0x367)]==_0x201762(0x258)?'manual':_0x201762(0x258);tgBot[_0x201762(0x261)](_0x279279[_0x201762(0x227)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x9b0e4e+_0x201762(0x325)+_0x494021+_0x201762(0x337))[_0x201762(0x385)](_0x317272=>{telegramError(_0x317272);}),toggleBotMode(_0x9b0e4e);}),tgBot[_0x462d43(0x1f4)]('callback_query');});}}),tgBot[_0x1b1de5(0x275)](/\/names/,_0x293479=>{const _0x1cb938=_0x1b1de5;if(!validateTelegram(_0x293479))return;let _0x48dae0='';config[_0x1cb938(0x33f)](_0x4ca993=>{const _0xc86d1c=_0x1cb938;_0x48dae0+=_0xc86d1c(0x394)+_0x4ca993[_0xc86d1c(0x1f6)]+':\x20'+_0x4ca993[_0xc86d1c(0x25a)]+'\x0a';}),tgBot[_0x1cb938(0x261)](_0x293479[_0x1cb938(0x227)]['id'],_0x48dae0,{'parse_mode':_0x1cb938(0x23e)})['catch'](_0x6f1953=>{telegramError(_0x6f1953);});}),tgBot['onText'](/\/disable/,_0x2cdcdd=>{const _0xfceb39=_0x1b1de5;if(!validateTelegram(_0x2cdcdd))return;tgBot[_0xfceb39(0x261)](_0x2cdcdd['chat']['id'],_0xfceb39(0x398))[_0xfceb39(0x385)](_0x520c33=>{telegramError(_0x520c33);}),updateSetting(_0xfceb39(0x32f),![]);}),tgBot[_0x1b1de5(0x275)](/\/help/,_0x92a47c=>{const _0xb347c4=_0x1b1de5;if(!validateTelegram(_0x92a47c))return;tgBot['sendMessage'](_0x92a47c[_0xb347c4(0x227)]['id'],_0x3aae1b)[_0xb347c4(0x385)](_0x19bff6=>{telegramError(_0x19bff6);});}),tgBot['on'](_0x1b1de5(0x2aa),_0x2f90ee=>{const _0x99f1ec=_0x1b1de5;_0x2f90ee['toString']()[_0x99f1ec(0x302)](_0x99f1ec(0x239))&&(logger[_0x99f1ec(0x311)](_0x99f1ec(0x29e)),tgBot[_0x99f1ec(0x27b)](),tgBot=null,io['to'](_0x99f1ec(0x1eb))['emit'](_0x99f1ec(0x2bb),'Invalid\x20Telegram\x20token'));}),process['once'](_0x1b1de5(0x39a),()=>{const _0x47d34e=_0x1b1de5;if(tgBot)tgBot['stopPolling']();process[_0x47d34e(0x370)](0x1);}),process[_0x1b1de5(0x219)](_0x1b1de5(0x366),()=>{const _0x39bbad=_0x1b1de5;if(tgBot)tgBot[_0x39bbad(0x27b)]();process['exit'](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x3b310d,_0xeabe9f){const _0x5ef49d=_0x420d0d;if(settings[_0x5ef49d(0x32f)]){if(settings[_0x5ef49d(0x22f)]==_0x5ef49d(0x392)||(_0xeabe9f['type']==_0x5ef49d(0x242)||_0xeabe9f[_0x5ef49d(0x2f4)]==_0x5ef49d(0x2eb)||_0xeabe9f[_0x5ef49d(0x2f4)]=='success')&&settings['telegramEvents']==_0x5ef49d(0x292)||_0xeabe9f[_0x5ef49d(0x2f4)]==_0x5ef49d(0x26a)&&settings[_0x5ef49d(0x22f)]==_0x5ef49d(0x236)){if(tgBot&&settings[_0x5ef49d(0x1e3)]){if(_0xeabe9f[_0x5ef49d(0x320)])tgBot[_0x5ef49d(0x261)](settings[_0x5ef49d(0x1e3)],_0xeabe9f[_0x5ef49d(0x25a)]+'\x20>\x20'+_0xeabe9f['event'])[_0x5ef49d(0x385)](_0x1ebac8=>{telegramError(_0x1ebac8);});else tgBot['sendMessage'](settings[_0x5ef49d(0x1e3)],'Bot\x20'+_0x3b310d+_0x5ef49d(0x1f3)+_0xeabe9f[_0x5ef49d(0x382)])['catch'](_0x1a60f9=>{telegramError(_0x1a60f9);});}}}}async function sendTelegramMsg(_0x1b554c,_0x26661c=_0x420d0d(0x23e)){const _0x3289d6=_0x420d0d;return settings[_0x3289d6(0x32f)]&&tgBot&&settings['telegramChatId']?(await tgBot['sendMessage'](settings[_0x3289d6(0x1e3)],_0x1b554c,{'parse_mode':_0x26661c})[_0x3289d6(0x385)](_0x338464=>{telegramError(_0x338464);}),!![]):![];}function getDeviceWithIp(_0x1d0300){const _0x2a2bdb=_0x420d0d;return devices[_0x2a2bdb(0x29b)](_0x23d203=>_0x23d203['ip']===_0x1d0300);}function temporaryAccess2FA(_0x95b51e,_0x159d95){const _0x26d3d4=_0x420d0d;let _0x591784=new Date(),_0x29be63=![];if(lastIpApproval){if(_0x591784-lastIpApproval<0x1388)_0x29be63=!![];}lastIpApproval=new Date();if(_0x29be63)return;tgBot&&settings[_0x26d3d4(0x1e3)]&&(tgBot['removeListener'](_0x26d3d4(0x26d)),tgBot[_0x26d3d4(0x261)](settings[_0x26d3d4(0x1e3)],_0x26d3d4(0x218)+normalizeIP(_0x159d95)[_0x26d3d4(0x255)]+_0x26d3d4(0x3ab),{'parse_mode':_0x26d3d4(0x23e),'reply_markup':{'inline_keyboard':[[{'text':_0x26d3d4(0x364),'callback_data':'5'},{'text':_0x26d3d4(0x2be),'callback_data':'15'},{'text':_0x26d3d4(0x38a),'callback_data':'30'},{'text':_0x26d3d4(0x2f6),'callback_data':'reject'}]]}})[_0x26d3d4(0x385)](_0x11852d=>{telegramError(_0x11852d);}),tgBot['on']('callback_query',async _0x41e60e=>{const _0x51c200=_0x26d3d4,_0xa6219c=_0x41e60e[_0x51c200(0x22a)],_0x5ccdc1=_0x41e60e[_0x51c200(0x272)];tgBot['answerCallbackQuery'](_0x41e60e['id'])[_0x51c200(0x375)](async()=>{const _0x59f653=_0x51c200;devices[_0x95b51e]['telegramIpApproval']={'clientip':_0x159d95,'timestamp':new Date()['getTime'](),'expiry':_0xa6219c},_0xa6219c!=_0x59f653(0x2f6)?(await tgBot[_0x59f653(0x261)](_0x5ccdc1[_0x59f653(0x227)]['id'],_0x59f653(0x241)+_0xa6219c+_0x59f653(0x376),{'parse_mode':_0x59f653(0x23e)})['catch'](_0x586ba7=>{telegramError(_0x586ba7);}),io['to'](_0x95b51e)['emit'](_0x59f653(0x28b),{'access':{'allow':![],'reason':_0x59f653(0x331),'token':null}})):(await tgBot[_0x59f653(0x261)](_0x5ccdc1[_0x59f653(0x227)]['id'],_0x59f653(0x397))[_0x59f653(0x385)](_0x322d4b=>{telegramError(_0x322d4b);}),io['to'](_0x95b51e)['emit']('status',{'access':{'allow':![],'reason':_0x59f653(0x290),'token':null}}));}),tgBot[_0x51c200(0x1f4)](_0x51c200(0x26d));}));}function loginAccess2FA(_0x1575b0,_0x51444d){const _0x122523=_0x420d0d;tgBot&&settings[_0x122523(0x1e3)]&&(tgBot['removeListener'](_0x122523(0x26d)),tgBot[_0x122523(0x261)](settings['telegramChatId'],_0x122523(0x2d5)+normalizeIP(_0x51444d)['show']+_0x122523(0x3ab),{'parse_mode':_0x122523(0x23e),'reply_markup':{'inline_keyboard':[[{'text':_0x122523(0x25b),'callback_data':loginExpiry},{'text':_0x122523(0x2f6),'callback_data':'reject'}]]}})[_0x122523(0x385)](_0x3e2fb2=>{telegramError(_0x3e2fb2);}),tgBot['on'](_0x122523(0x26d),async _0x3582fc=>{const _0xfa02d6=_0x122523,_0x14cc80=_0x3582fc[_0xfa02d6(0x22a)],_0x542135=_0x3582fc[_0xfa02d6(0x272)];tgBot[_0xfa02d6(0x3aa)](_0x3582fc['id'])[_0xfa02d6(0x375)](async()=>{const _0x916a1f=_0xfa02d6;devices[_0x1575b0][_0x916a1f(0x36f)]={'clientip':_0x51444d,'timestamp':new Date()['getTime'](),'expiry':_0x14cc80},_0x14cc80!=_0x916a1f(0x2f6)?(await tgBot[_0x916a1f(0x261)](_0x542135[_0x916a1f(0x227)]['id'],_0x916a1f(0x312),{'parse_mode':_0x916a1f(0x23e)})['catch'](_0x7af89a=>{telegramError(_0x7af89a);}),io['to'](_0x1575b0)[_0x916a1f(0x216)](_0x916a1f(0x28b),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x916a1f(0x261)](_0x542135[_0x916a1f(0x227)]['id'],_0x916a1f(0x37c))['catch'](_0x260917=>{telegramError(_0x260917);}),io['to'](_0x1575b0)[_0x916a1f(0x216)](_0x916a1f(0x28b),{'access':{'allow':![],'reason':_0x916a1f(0x389),'token':null}}));}),tgBot[_0xfa02d6(0x1f4)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x25603f=_0x420d0d;return dbConfig['get'](_0x25603f(0x31a))['sortBy'](_0x25603f(0x1f6))[_0x25603f(0x1f0)]({'status':_0x25603f(0x38e)})['value']()||[];}function getDisabledBots(){const _0x48ef56=_0x420d0d;return dbConfig[_0x48ef56(0x3a8)]('bots')[_0x48ef56(0x2bc)]('botID')[_0x48ef56(0x1f0)]({'status':_0x48ef56(0x368)})[_0x48ef56(0x1fa)]()||[];}function getBotAttributes(_0x2f8ddb){const _0x2d4632=_0x420d0d;let _0x1c99cf={};const _0x4c0131=configpath+_0x2d4632(0x332)+_0x2f8ddb+'-config.json',_0x1e401d=fs['existsSync'](_0x4c0131);if(_0x1e401d){const _0x47671c=fs['readFileSync'](_0x4c0131);try{const _0x43d326=JSON[_0x2d4632(0x373)](_0x47671c),_0x3b69b5=_0x43d326?_0x43d326[_0x2d4632(0x247)][0x0]['headless']:![];_0x1c99cf[_0x2d4632(0x367)]=_0x3b69b5?_0x2d4632(0x258):'manual',_0x1c99cf[_0x2d4632(0x25a)]=_0x43d326?_0x43d326[_0x2d4632(0x247)][0x0][_0x2d4632(0x25a)]:_0x2d4632(0x394)+_0x2f8ddb;}catch(_0x3eab20){_0x1c99cf[_0x2d4632(0x367)]=_0x2d4632(0x309),_0x1c99cf['botname']=_0x2d4632(0x394)+_0x2f8ddb;}}else _0x1c99cf[_0x2d4632(0x367)]=_0x2d4632(0x309),_0x1c99cf['botname']='Bot\x20'+_0x2f8ddb;return _0x1c99cf;}function getBotsWithMode(){const _0x9189fa=_0x420d0d,_0x4ca9c4=dbConfig[_0x9189fa(0x3a8)]('bots')[_0x9189fa(0x2bc)]('botID')[_0x9189fa(0x1fa)]()||[];return _0x4ca9c4[_0x9189fa(0x33f)](_0x4f99a3=>{const _0x17dc33=_0x9189fa;let _0x5da0d7=getBotAttributes(_0x4f99a3[_0x17dc33(0x1f6)]);_0x4f99a3[_0x17dc33(0x367)]=_0x5da0d7[_0x17dc33(0x367)];}),_0x4ca9c4;}function getBotExchanges(){const _0x1ae028=_0x420d0d;let _0x36692d=[];const _0x2f21db=dbConfig['get'](_0x1ae028(0x31a))[_0x1ae028(0x2bc)]('botID')[_0x1ae028(0x1fa)]()||[];_0x2f21db['forEach'](_0x14cbb2=>{const _0x58f620=_0x1ae028;if(_0x14cbb2[_0x58f620(0x28b)]==_0x58f620(0x38e)){const _0x36f293=configpath+_0x58f620(0x332)+_0x14cbb2['botID']+_0x58f620(0x35e),_0xd84404=fs[_0x58f620(0x362)](_0x36f293);let _0x5d6d5e;if(_0xd84404){const _0x5407c1=fs[_0x58f620(0x26f)](_0x36f293);try{const _0x5c7ac9=JSON['parse'](_0x5407c1);_0x5d6d5e=_0x5c7ac9?_0x5c7ac9[_0x58f620(0x247)][0x0]['exchange']:null;}catch(_0x120632){}}if(_0x5d6d5e)_0x36692d[_0x58f620(0x36d)](_0x5d6d5e);}});const _0x4600d8=[...new Set(_0x36692d)][_0x1ae028(0x267)]();return _0x4600d8;}async function initUser(){const _0x519c49=_0x420d0d;if(!settings[_0x519c49(0x36a)]){const _0x1394ae=uuidRandom();mixpanel[_0x519c49(0x356)](_0x1394ae),updateSetting(_0x519c49(0x36a),_0x1394ae);}}async function initSecure(){const _0x2e3a1d=_0x420d0d;let _0x5ddce7=getSecure();if(!_0x5ddce7[_0x2e3a1d(0x34d)]('secret')){let _0x5b93a3=await generateKeys();_0x5ddce7[_0x2e3a1d(0x32c)]=_0x5b93a3[_0x2e3a1d(0x32c)],_0x5ddce7[_0x2e3a1d(0x359)]=_0x5b93a3[_0x2e3a1d(0x359)],_0x5ddce7['secret']=crypto['randomBytes'](0x20)[_0x2e3a1d(0x1f7)](_0x2e3a1d(0x28f));;storeSecure(_0x5ddce7);}}function getSettings(){const _0x41b8af=_0x420d0d;return dbSettings[_0x41b8af(0x3a8)](_0x41b8af(0x354))[_0x41b8af(0x1fa)]()||{};}function getSecure(){const _0x4fc464=_0x420d0d;return dbSecure[_0x4fc464(0x3a8)]('secure')[_0x4fc464(0x1fa)]()||{};}function getBlacklist(){const _0x54611a=_0x420d0d;return dbSecure[_0x54611a(0x3a8)](_0x54611a(0x315))[_0x54611a(0x1fa)]()||[];}function broadcastToBots(_0x2048e7,_0x2c1870){const _0x157044=_0x420d0d;config[_0x157044(0x33f)](_0x2bf39d=>{const _0x1ef5c5=_0x157044;if(_0x2bf39d[_0x1ef5c5(0x28b)]==_0x1ef5c5(0x38e)&&_0x2bf39d['live']==_0x1ef5c5(0x24f)||_0x2bf39d[_0x1ef5c5(0x28b)]==_0x1ef5c5(0x33a)&&_0x2bf39d[_0x1ef5c5(0x27c)]=='running'){if(pid[_0x2bf39d[_0x1ef5c5(0x1f6)]])pid[_0x2bf39d['botID']][_0x1ef5c5(0x39f)]({[_0x2048e7]:_0x2c1870});}});}function storeSettings(_0x536e94,_0x3cec54=![]){const _0x57f00f=_0x420d0d;_0x536e94={...settings,..._0x536e94};if(_0x3cec54&&_0x536e94[_0x57f00f(0x2a6)]!=_0x57f00f(0x2d2)&&_0x536e94['bbPassword']!='***'&&_0x536e94[_0x57f00f(0x2a6)]!=''){const _0x179af6=crypt[_0x57f00f(0x2d6)](secure[_0x57f00f(0x359)],_0x536e94[_0x57f00f(0x2a6)])[_0x57f00f(0x272)]['split']('@')[0x0],_0x47bc06=bcrypt[_0x57f00f(0x2de)](_0x179af6,saltRounds);_0x536e94={..._0x536e94,'bbPassword':_0x47bc06};}if(_0x3cec54&&_0x536e94[_0x57f00f(0x1e1)]!=_0x57f00f(0x2d2)&&_0x536e94[_0x57f00f(0x1e1)]!=_0x57f00f(0x269)&&_0x536e94[_0x57f00f(0x1e1)]!=''){const _0x4b49ef=crypt[_0x57f00f(0x2d6)](secure[_0x57f00f(0x359)],_0x536e94[_0x57f00f(0x1e1)])[_0x57f00f(0x272)][_0x57f00f(0x1e9)]('@')[0x0];_0x536e94={..._0x536e94,'telegramToken':_0x4b49ef};}const _0x2f6cb4=_0x536e94[_0x57f00f(0x1e1)]!=_0x57f00f(0x2d2)&&_0x536e94[_0x57f00f(0x1e1)]!=settings['telegramToken']||_0x536e94['telegramUsername']!=settings[_0x57f00f(0x204)],_0x3c3121=_0x536e94['telegramToken']==''||_0x536e94['telegramUsername']=='';if(_0x2f6cb4)_0x536e94[_0x57f00f(0x22f)]=_0x57f00f(0x392);for(const [_0x2a2bfe,_0x5976c6]of Object['entries'](_0x536e94)){if(_0x2a2bfe=='telegramToken'&&_0x5976c6==_0x57f00f(0x2d2)){_0x536e94[_0x57f00f(0x1e1)]=settings[_0x57f00f(0x1e1)];continue;};if(_0x2a2bfe==_0x57f00f(0x2a6)&&_0x5976c6==_0x57f00f(0x2d2)){_0x536e94[_0x57f00f(0x2a6)]=settings[_0x57f00f(0x2a6)];continue;};dbSettings[_0x57f00f(0x297)]('settings.'+_0x2a2bfe,_0x5976c6)['write']();}settings=_0x536e94,io['to'](_0x57f00f(0x1eb))[_0x57f00f(0x216)](_0x57f00f(0x354),cleanSettings()),broadcastToBots(_0x57f00f(0x24a),settings[_0x57f00f(0x24a)]),broadcastToBots(_0x57f00f(0x26c),settings['onepagemode']);if(_0x2f6cb4&&!_0x3c3121)initTelegram();if(_0x2f6cb4&&_0x3c3121)disableTelegram();getAllClients()[_0x57f00f(0x33f)](_0x508eff=>{getSocket(_0x508eff['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x2a81f5,_0x5d6221){const _0x130817=_0x420d0d;dbSettings[_0x130817(0x297)](_0x130817(0x3ad)+_0x2a81f5,_0x5d6221)[_0x130817(0x1fc)](),settings=getSettings(),io['to']('botmanager')[_0x130817(0x216)]('settings',cleanSettings());}function storeSecure(_0x3b1682){const _0x38fd96=_0x420d0d;dbSecure['get'](_0x38fd96(0x1f5))[_0x38fd96(0x36d)](_0x3b1682)[_0x38fd96(0x1fc)](),secure=_0x3b1682;}function addBlacklist(_0x3baa22){const _0xdf8c84=_0x420d0d;cleanBlacklist();let _0x231e7b;devices[_0x3baa22][_0xdf8c84(0x25e)]?_0x231e7b=Math[_0xdf8c84(0x215)](devices[_0x3baa22][_0xdf8c84(0x25e)][_0xdf8c84(0x287)],loginExpiry):_0x231e7b=loginExpiry,dbSecure[_0xdf8c84(0x3a8)]('blacklist')[_0xdf8c84(0x36d)]({'expiry':new Date()[_0xdf8c84(0x2ed)]()+_0x231e7b*0x3c*0x3e8,'token':devices[_0x3baa22][_0xdf8c84(0x310)][_0xdf8c84(0x2cb)]})[_0xdf8c84(0x1fc)](),blacklist=dbSecure['get'](_0xdf8c84(0x315))[_0xdf8c84(0x1fa)]();}function cleanBlacklist(){const _0x2615ab=_0x420d0d;let _0x4b1d64=dbSecure['get']('blacklist')[_0x2615ab(0x270)]()['value'](),_0x492c74=new Date()[_0x2615ab(0x2ed)]();_0x4b1d64[_0x2615ab(0x33f)](_0x28a52f=>{const _0x3bb51c=_0x2615ab;_0x28a52f['expiry']<_0x492c74&&dbSecure[_0x3bb51c(0x3a8)]('blacklist')[_0x3bb51c(0x39c)]({'expiry':_0x28a52f[_0x3bb51c(0x287)]})['write']();});}function initStates(){const _0xae356b=_0x420d0d;let _0x4743f0=getConfiguration();_0x4743f0[_0xae356b(0x33f)](_0x10d554=>{_0x10d554['live']='stopped';}),storeConfiguration(_0x4743f0);}function onKeys(){const _0x4bca1f=new RSA();return new Promise(_0x2d1d0c=>{const _0xa069b5=_0x5908;_0x4bca1f[_0xa069b5(0x3a5)]()[_0xa069b5(0x375)](_0x44980e=>{_0x2d1d0c(_0x44980e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4444f2=_0x420d0d;let _0x115079=getSettings(),_0x486b32=![];!_0x115079['hasOwnProperty']('lastmsgtelegram')&&(_0x115079[_0x4444f2(0x25f)]=0x0,_0x486b32=!![]);!_0x115079[_0x4444f2(0x34d)]('lastmsgemitted')&&(_0x115079[_0x4444f2(0x223)]=0x0,_0x486b32=!![]);!_0x115079[_0x4444f2(0x34d)](_0x4444f2(0x26e))&&(_0x115079['latestversion']=_0x4444f2(0x37a),_0x486b32=!![]);!_0x115079[_0x4444f2(0x34d)]('onepagemode')&&(_0x115079[_0x4444f2(0x26c)]=![],_0x486b32=!![]);if(_0x486b32)storeSettings(_0x115079);}function storeConfiguration(_0x157223){const _0x351a49=_0x420d0d;dbConfig[_0x351a49(0x3a8)]('bots')[_0x351a49(0x39c)]()[_0x351a49(0x1fc)](),_0x157223['forEach'](_0x27a62b=>{const _0x3086ab=_0x351a49;delete _0x27a62b[_0x3086ab(0x367)];}),dbConfig['get'](_0x351a49(0x31a))[_0x351a49(0x36d)](..._0x157223)[_0x351a49(0x1fc)](),config=_0x157223;}function resetPassword(){const _0x5f3d4b=_0x420d0d;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x5f3d4b(0x26d)),tgBot['sendMessage'](settings[_0x5f3d4b(0x1e3)],_0x5f3d4b(0x2c3),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5f3d4b(0x327),'callback_data':_0x5f3d4b(0x327)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x264468=>{telegramError(_0x264468);}),tgBot['on'](_0x5f3d4b(0x26d),async _0x48e7d6=>{const _0xd84c2f=_0x5f3d4b,_0x333419=_0x48e7d6['data'],_0x162254=_0x48e7d6[_0xd84c2f(0x272)];tgBot[_0xd84c2f(0x3aa)](_0x48e7d6['id'])[_0xd84c2f(0x375)](async()=>{const _0x48cf5d=_0xd84c2f;if(_0x333419!='no'){const _0x2d5b63=0xf,_0x3d9f09=_0x48cf5d(0x1db),_0x2fa805=Array[_0x48cf5d(0x28c)](crypto['randomFillSync'](new Uint32Array(_0x2d5b63)))['map'](_0x324c49=>_0x3d9f09[_0x324c49%_0x3d9f09[_0x48cf5d(0x3a6)]])[_0x48cf5d(0x2e7)](''),_0x186c0d=bcrypt[_0x48cf5d(0x2de)](_0x2fa805,saltRounds);storeSettings({'bbPassword':_0x186c0d}),await tgBot[_0x48cf5d(0x261)](_0x162254[_0x48cf5d(0x227)]['id'],_0x48cf5d(0x33d)+_0x2fa805,{'parse_mode':_0x48cf5d(0x23e)})[_0x48cf5d(0x385)](_0x15def5=>{telegramError(_0x15def5);});}else await tgBot['sendMessage'](_0x162254[_0x48cf5d(0x227)]['id'],'Password\x20reset\x20rejected')['catch'](_0x14de75=>{telegramError(_0x14de75);});}),tgBot[_0xd84c2f(0x1f4)]('callback_query');}));}async function confirmRestore(_0x5c526c,_0x888c9d){const _0x37ff8d=_0x420d0d;io['to'](_0x37ff8d(0x1eb))[_0x37ff8d(0x216)](_0x37ff8d(0x2bb),_0x37ff8d(0x391),'success'),tgBot&&settings[_0x37ff8d(0x1e3)]&&(tgBot[_0x37ff8d(0x1f4)](_0x37ff8d(0x26d)),await tgBot[_0x37ff8d(0x261)](settings[_0x37ff8d(0x1e3)],_0x37ff8d(0x231),{'parse_mode':_0x37ff8d(0x23e),'reply_markup':{'inline_keyboard':[[{'text':_0x37ff8d(0x327),'callback_data':_0x37ff8d(0x327)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x21f328=>{telegramError(_0x21f328);}),tgBot['on'](_0x37ff8d(0x26d),async _0x444f53=>{const _0x63884e=_0x37ff8d,_0x4be8ff=_0x444f53[_0x63884e(0x22a)],_0x2240ff=_0x444f53[_0x63884e(0x272)];tgBot[_0x63884e(0x3aa)](_0x444f53['id'])[_0x63884e(0x375)](async()=>{const _0x171ac9=_0x63884e;_0x4be8ff==_0x171ac9(0x327)?(await tgBot[_0x171ac9(0x261)](_0x2240ff['chat']['id'],_0x171ac9(0x29f),{'parse_mode':_0x171ac9(0x23e)})[_0x171ac9(0x385)](_0x69e539=>{telegramError(_0x69e539);}),unzipFile(_0x5c526c,_0x888c9d)):(logger[_0x171ac9(0x1f2)](_0x171ac9(0x26b)),await tgBot['sendMessage'](_0x2240ff[_0x171ac9(0x227)]['id'],_0x171ac9(0x26b))[_0x171ac9(0x385)](_0x6ee116=>{telegramError(_0x6ee116);}));}),tgBot[_0x63884e(0x1f4)](_0x63884e(0x26d));}));}function getServerTime(){const _0x507967=_0x420d0d,_0x3636be=new Date();return _0x3636be[_0x507967(0x291)]()+'/'+(_0x3636be[_0x507967(0x1ed)]()+0x1)[_0x507967(0x1f7)]()[_0x507967(0x246)](0x2,'0')+'/'+_0x3636be[_0x507967(0x2b7)]()[_0x507967(0x1f7)]()[_0x507967(0x246)](0x2,'0')+'\x20'+_0x3636be['getHours']()['toString']()[_0x507967(0x246)](0x2,'0')+':'+_0x3636be[_0x507967(0x35d)]()[_0x507967(0x1f7)]()['padStart'](0x2,'0')+':'+_0x3636be[_0x507967(0x2c5)]()[_0x507967(0x1f7)]()[_0x507967(0x246)](0x2,'0');}function getTimeStamp(){const _0x2dcc25=_0x420d0d,_0x22f04d=shiftedTime();return _0x22f04d[_0x2dcc25(0x291)]()+'/'+(_0x22f04d[_0x2dcc25(0x1ed)]()+0x1)['toString']()[_0x2dcc25(0x246)](0x2,'0')+'/'+_0x22f04d['getDate']()[_0x2dcc25(0x1f7)]()['padStart'](0x2,'0')+'\x20'+_0x22f04d[_0x2dcc25(0x276)]()[_0x2dcc25(0x1f7)]()[_0x2dcc25(0x246)](0x2,'0')+':'+_0x22f04d['getMinutes']()['toString']()['padStart'](0x2,'0')+':'+_0x22f04d[_0x2dcc25(0x2c5)]()[_0x2dcc25(0x1f7)]()[_0x2dcc25(0x246)](0x2,'0');}function getCleanTimeStamp(){const _0x490bbe=_0x420d0d,_0x393007=shiftedTime();return _0x393007[_0x490bbe(0x291)]()+(_0x393007[_0x490bbe(0x1ed)]()+0x1)[_0x490bbe(0x1f7)]()[_0x490bbe(0x246)](0x2,'0')+_0x393007['getDate']()[_0x490bbe(0x1f7)]()['padStart'](0x2,'0')+'-'+_0x393007[_0x490bbe(0x276)]()[_0x490bbe(0x1f7)]()[_0x490bbe(0x246)](0x2,'0')+_0x393007['getMinutes']()[_0x490bbe(0x1f7)]()['padStart'](0x2,'0')+_0x393007[_0x490bbe(0x2c5)]()[_0x490bbe(0x1f7)]()[_0x490bbe(0x246)](0x2,'0');}function shiftedTime(){const _0x474f4f=_0x420d0d,_0x44db3d=new Date();let _0x5503b3=_0x44db3d;if(settings[_0x474f4f(0x24a)]&&settings['timeshift']!==0x0)_0x5503b3=fns[_0x474f4f(0x27a)](_0x44db3d,{'hours':settings[_0x474f4f(0x24a)]});return _0x5503b3;}function startScheduler(){const _0x56581b=_0x420d0d,_0x544876=new Date()[_0x56581b(0x31d)](),_0x421cd0=shiftedTime()['getHours']();_0x421cd0==0x4&&backupConfigFiles();_0x421cd0==0x0&&rotateLogFiles();_0x544876%0x6==0x0&&triggerAnalytics();_0x544876%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3e3c4d){const _0x16ee1f=_0x420d0d;logger[_0x16ee1f(0x1f2)](_0x16ee1f(0x20d)+_0x3e3c4d);const _0x172d9a=getBotsWithMode();_0x172d9a[_0x16ee1f(0x3a6)]>0x0?confirmRestore(configbackuppath,_0x3e3c4d):unzipFile(configbackuppath,_0x3e3c4d);}async function getBackupFiles(_0xb541fc=null){const _0x11d765=_0x420d0d;let _0x3ca17a=[],_0x5fc506=fs[_0x11d765(0x2e0)](configbackuppath,{'withFileTypes':!![]});_0x5fc506[_0x11d765(0x267)]((_0x45f88e,_0x502e3a)=>_0x45f88e[_0x11d765(0x326)]<_0x502e3a[_0x11d765(0x326)]?0x1:_0x502e3a['name']<_0x45f88e[_0x11d765(0x326)]?-0x1:0x0),_0x5fc506[_0x11d765(0x33f)](_0xfe1d03=>{const _0x301312=_0x11d765;if(!_0xfe1d03[_0x301312(0x2f7)]()&&_0xfe1d03['name'][_0x301312(0x2ae)](_0x301312(0x205))&&_0xfe1d03[_0x301312(0x326)]['endsWith']('.zip')){const _0x23d572=formatDate(fs[_0x301312(0x251)](configbackuppath+_0xfe1d03[_0x301312(0x326)])[_0x301312(0x1d8)]);_0x3ca17a[_0x301312(0x36d)]({'name':_0xfe1d03[_0x301312(0x326)],'mtime':_0x23d572});}});if(_0xb541fc)io['to'](_0xb541fc)[_0x11d765(0x216)]('backup-files',_0x3ca17a);else return _0x3ca17a;}async function backupConfigFiles(){const _0x77e1d6=_0x420d0d;await zipFiles(_0x77e1d6(0x2ce));const _0x1ddcbb=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x77e1d6(0x3a3),configbackuppath+(_0x77e1d6(0x205)+_0x1ddcbb+'.zip'));let _0x1663ec=fs[_0x77e1d6(0x2e0)](configbackuppath,{'withFileTypes':!![]});_0x1663ec[_0x77e1d6(0x267)]((_0x59a99d,_0x2b9541)=>_0x59a99d[_0x77e1d6(0x326)]<_0x2b9541['name']?0x1:_0x2b9541['name']<_0x59a99d['name']?-0x1:0x0),_0x1663ec[_0x77e1d6(0x3a6)]>maxBackups&&fs[_0x77e1d6(0x2c0)](configbackuppath+_0x1663ec[maxBackups][_0x77e1d6(0x326)]);}function rotateLogFiles(){const _0x151412=_0x420d0d,_0x302a33=fs[_0x151412(0x251)](logspath+_0x151412(0x2d3)),_0x1a9e1a=_0x302a33[_0x151412(0x335)]/0x400;if(_0x1a9e1a>0x64){let _0x21fd7e=fs[_0x151412(0x2e0)](logspath,{'withFileTypes':!![]});_0x21fd7e[_0x151412(0x267)]((_0x114612,_0x3d7170)=>_0x114612[_0x151412(0x326)]<_0x3d7170[_0x151412(0x326)]?0x1:_0x3d7170['name']<_0x114612[_0x151412(0x326)]?-0x1:0x0),_0x21fd7e[_0x151412(0x33f)](_0x5d2803=>{const _0x4cbeb0=_0x151412;if(_0x5d2803[_0x4cbeb0(0x326)]==_0x4cbeb0(0x2a4))fs[_0x4cbeb0(0x341)](logspath+_0x5d2803[_0x4cbeb0(0x326)],logspath+_0x4cbeb0(0x37d));if(_0x5d2803[_0x4cbeb0(0x326)]=='output-001.log')fs[_0x4cbeb0(0x341)](logspath+_0x5d2803[_0x4cbeb0(0x326)],logspath+'output-002.log');_0x5d2803[_0x4cbeb0(0x326)]=='output-000.log'&&(fs[_0x4cbeb0(0x341)](logspath+_0x5d2803[_0x4cbeb0(0x326)],logspath+_0x4cbeb0(0x243)),fs[_0x4cbeb0(0x305)](logspath+_0x5d2803[_0x4cbeb0(0x326)],''));});}}async function zipFiles(_0x456e5d){const _0x1a1912=_0x420d0d;let _0x4ea64b;if(_0x456e5d==_0x1a1912(0x1f8))_0x4ea64b=logspath;if(_0x456e5d=='backup')_0x4ea64b=configpath;if(_0x456e5d==_0x1a1912(0x2ce))_0x4ea64b=configpath;let _0xe4e309=fs[_0x1a1912(0x2e0)](_0x4ea64b,{'withFileTypes':!![]});const _0x131c4a=new require(_0x1a1912(0x1fb))();_0xe4e309[_0x1a1912(0x33f)](_0x228741=>{const _0x5238c5=_0x1a1912;if(!_0x228741[_0x5238c5(0x2f7)]()){let _0x556c70=fs[_0x5238c5(0x26f)](_0x4ea64b+_0x228741[_0x5238c5(0x326)]);if(_0x456e5d==_0x5238c5(0x214)){const _0x56e084=/^bot-[0-9]{3}-config.json$/,_0x56dba1=_0x56e084[_0x5238c5(0x25c)](_0x228741['name']);if(_0x56dba1){const _0x4bdaf7=JSON[_0x5238c5(0x373)](_0x556c70);_0x4bdaf7[_0x5238c5(0x247)][0x0]&&(_0x4bdaf7[_0x5238c5(0x247)][0x0][_0x5238c5(0x30f)]=_0x5238c5(0x269),_0x4bdaf7['bot'][0x0][_0x5238c5(0x328)]=_0x5238c5(0x269)),_0x556c70=JSON['stringify'](_0x4bdaf7,null,0x2);}if(_0x228741[_0x5238c5(0x326)]==_0x5238c5(0x30e)){const _0x25f83f=JSON[_0x5238c5(0x373)](_0x556c70);if(_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x2b8)])_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x2b8)]=![];if(_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x2a6)])_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x2a6)]=_0x5238c5(0x269);if(_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x1e1)])_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x1e1)]='***';if(_0x25f83f['settings'][_0x5238c5(0x1e3)])_0x25f83f[_0x5238c5(0x354)][_0x5238c5(0x1e3)]=null;_0x556c70=JSON[_0x5238c5(0x344)](_0x25f83f,null,0x2);}if(_0x228741[_0x5238c5(0x326)]!=_0x5238c5(0x2c1))_0x131c4a[_0x5238c5(0x2e4)](_0x228741[_0x5238c5(0x326)],_0x556c70);}else _0x131c4a[_0x5238c5(0x2e4)](_0x228741[_0x5238c5(0x326)],_0x556c70);}});const _0x233270=_0x131c4a['generate']({'base64':![],'compression':_0x1a1912(0x384)});fs[_0x1a1912(0x305)](zippath+(_0x456e5d+_0x1a1912(0x274)),_0x233270,_0x1a1912(0x2e6));}async function unzipFile(_0xfb4088,_0x1797e7){const _0x16f602=_0x420d0d;fs[_0x16f602(0x2e0)](configpath,{'withFileTypes':!![]})['forEach'](_0xeed744=>{const _0x139828=_0x16f602;if(!_0xeed744['isDirectory']())fs['rmSync'](configpath+_0xeed744[_0x139828(0x326)]);});const _0x59fd39=fs[_0x16f602(0x26f)](_0xfb4088+_0x1797e7,_0x16f602(0x2e6)),_0x32caf3=new require(_0x16f602(0x1fb))(_0x59fd39,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x32caf3[_0x16f602(0x2d8)])[_0x16f602(0x33f)](_0x4421fc=>{const _0x2beb1b=_0x16f602,_0x47c104=_0x32caf3['files'][_0x4421fc];fs[_0x2beb1b(0x305)](configpath+_0x47c104[_0x2beb1b(0x326)],_0x47c104['_data']);}),fs[_0x16f602(0x2e0)](temppath,{'withFileTypes':!![]})[_0x16f602(0x33f)](_0x1204cc=>{const _0x55b975=_0x16f602;if(!_0x1204cc[_0x55b975(0x2f7)]())fs[_0x55b975(0x1d3)](temppath+_0x1204cc[_0x55b975(0x326)]);}),logger[_0x16f602(0x1f2)](_0x16f602(0x396)),process[_0x16f602(0x39f)]({'restore':!![]},_0x410d28=>{});}async function getPublicIp(){const _0x397ad2=_0x420d0d;try{const _0x54ff51=await axios[_0x397ad2(0x3a8)](_0x397ad2(0x2b1));publicip=_0x54ff51[_0x397ad2(0x22a)]['ip'];}catch(_0x151394){}}async function triggerAnalytics(){const _0x39034b=_0x420d0d;if(!publicip)await getPublicIp();const _0x8a462c=getBotsWithMode();let _0x2e5b8c=0x0;_0x8a462c['forEach'](_0x243fe8=>{const _0x70189c=_0x5908;if(_0x243fe8[_0x70189c(0x28b)]==='enabled')_0x2e5b8c++;});const _0x59b833=getBotExchanges();mixpanel['track'](_0x39034b(0x34e),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x8a462c[_0x39034b(0x3a6)],'numbotsenabled':_0x2e5b8c,'exchanges':_0x59b833});}async function getMessages(){const _0x541136=_0x420d0d,_0x493ae1=_0x541136(0x34a),_0x935a5e=new GraphQLClient(_0x493ae1),_0x46f1a9={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x5b95b3=serverversion[_0x541136(0x1e9)]('.'),_0x4763ca=_0x5b95b3[0x0]+'.'+_0x5b95b3[0x1],_0x385c78=Math['min'](settings[_0x541136(0x25f)],settings[_0x541136(0x223)]),_0x1c2144={'last':parseInt(_0x385c78),'bbm':_0x4763ca},_0x1fac1c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x173d05;try{_0x173d05=await _0x935a5e[_0x541136(0x284)](_0x1fac1c,_0x1c2144,_0x46f1a9);}catch(_0x443e4a){}if(_0x173d05&&_0x173d05[_0x541136(0x200)]){let _0x1912d9=settings[_0x541136(0x25f)];newMessages=[];for(const _0x351f13 of _0x173d05[_0x541136(0x200)]){newMessages[_0x541136(0x36d)](_0x351f13);if(_0x351f13[_0x541136(0x3a2)])updateSetting(_0x541136(0x26e),_0x351f13['bbvNew']);let _0x27e071=_0x351f13[_0x541136(0x3a2)]?serverversion>=_0x351f13[_0x541136(0x3a2)]:![];if(!_0x27e071&&_0x351f13[_0x541136(0x2a5)]>_0x1912d9){if(_0x351f13[_0x541136(0x23a)]==='any'||serverversion['startsWith'](_0x351f13['bbvReceive'])){let _0xe77da8=''+_0x351f13[_0x541136(0x379)]+'\x0a\x0a'+_0x351f13[_0x541136(0x272)];const _0x195327=await sendTelegramMsg(toTelegramMarkdown(_0xe77da8),_0x541136(0x1e2));if(_0x195327)_0x1912d9=_0x351f13['number'];}}}updateAvailable=isNewerVersion(settings[_0x541136(0x26e)],serverversion),updateSetting('lastmsgtelegram',_0x1912d9),emitMessages();}}function emitMessages(){const _0x5f3c73=_0x420d0d,_0x163ea0=settings['lastmsgemitted'];let _0x46bd91=[];newMessages[_0x5f3c73(0x33f)](_0x368827=>{const _0x4e1450=_0x5f3c73;_0x368827[_0x4e1450(0x2a5)]>_0x163ea0&&_0x46bd91[_0x4e1450(0x36d)](_0x368827);}),_0x46bd91[_0x5f3c73(0x3a6)]>0x0&&getAllClients()['forEach'](_0xcf84bc=>{const _0x251817=_0x5f3c73;getSocket(_0xcf84bc['id'])[_0x251817(0x216)](_0x251817(0x272),_0x46bd91);});}function confirmMessage(_0x4a598c){const _0x27113f=_0x420d0d;updateSetting(_0x27113f(0x223),Number(_0x4a598c));}function isNewerVersion(_0x4ef52c,_0x1c5385){const _0x4d612e=_0x420d0d,_0x11490a=_0x1c5385[_0x4d612e(0x1e9)]('.'),_0x32c962=_0x4ef52c['split']('.');for(var _0x18cfc9=0x0;_0x18cfc9<_0x32c962[_0x4d612e(0x3a6)];_0x18cfc9++){const _0x1e9510=~~_0x32c962[_0x18cfc9],_0x3e6dd5=~~_0x11490a[_0x18cfc9];if(_0x1e9510>_0x3e6dd5)return!![];if(_0x1e9510<_0x3e6dd5)return![];}return![];}function toTelegramMarkdown(_0x499c98){const _0x1cd6af=_0x420d0d,_0x44130c=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5f4725=/\*{2}(.+?)\*{2}/gim;return _0x499c98=_0x499c98[_0x1cd6af(0x296)](_0x44130c,_0x1cd6af(0x230))[_0x1cd6af(0x296)](_0x5f4725,_0x1cd6af(0x2e8)),_0x499c98;}async function validateConfigFile(){const _0x140d84=_0x420d0d,_0x8a60ad=dbConfig[_0x140d84(0x3a8)](_0x140d84(0x31a))[_0x140d84(0x2bc)]('botID')[_0x140d84(0x1fa)]()||[];if(_0x8a60ad[_0x140d84(0x3a6)]==0x0){let _0x513793=0x0,_0x131be9=[];const _0x4ccf7c=/^bot-([0-9]{3})-config.json$/,_0x1b3692=fs[_0x140d84(0x2e0)](configpath);_0x1b3692[_0x140d84(0x33f)](_0x48e9f2=>{const _0xfe091b=_0x140d84,_0x2cdf2a=_0x4ccf7c['exec'](_0x48e9f2);if(_0x2cdf2a){const _0x4edb09=_0x2cdf2a[0x1];let _0x439744=getBotAttributes(_0x4edb09);_0x131be9[_0xfe091b(0x36d)]({'botID':_0x4edb09,'botname':_0x439744[_0xfe091b(0x25a)],'status':_0xfe091b(0x368),'live':_0xfe091b(0x31e)}),_0x513793++;}}),_0x513793!=0x0&&(dbConfig[_0x140d84(0x3a8)](_0x140d84(0x31a))['assign'](_0x131be9)['write'](),config=_0x131be9,restoredConfigFile=_0x513793);}}async function restoreConfigNotify(_0x389299){const _0x49ed69=_0x420d0d;let _0xeab3df;if(restoredConfigFile==0x1)_0xeab3df=_0x49ed69(0x1ef);else _0xeab3df=_0x49ed69(0x1fd);if(_0x389299)io['to']('botmanager')[_0x49ed69(0x216)]('notification',_0xeab3df);else{logger[_0x49ed69(0x259)](_0x49ed69(0x1dd)),logger[_0x49ed69(0x259)](_0xeab3df),logger[_0x49ed69(0x259)](_0x49ed69(0x1dd)),logger['simple']('');if(tgBot&&settings[_0x49ed69(0x1e3)]&&settings[_0x49ed69(0x22f)]!=_0x49ed69(0x236))tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0xeab3df)[_0x49ed69(0x385)](_0x181160=>{telegramError(_0x181160);});}}function _0x5908(_0x3b9b26,_0x520ae8){const _0x3a5535=_0x1a73();return _0x5908=function(_0x527fc1,_0x4e237b){_0x527fc1=_0x527fc1-0x1d2;let _0x1a730d=_0x3a5535[_0x527fc1];return _0x1a730d;},_0x5908(_0x3b9b26,_0x520ae8);}function validateCredentials(_0x1440e5,_0x564636){const _0x1efe18=_0x420d0d;if(_0x1440e5[_0x1efe18(0x365)]==settings[_0x1efe18(0x39e)]&&bcrypt[_0x1efe18(0x2b9)](_0x1440e5[_0x1efe18(0x2c4)],settings[_0x1efe18(0x2a6)])){if(settings[_0x1efe18(0x32a)])return{'allow':![],'reason':_0x1efe18(0x260),'token':null};else{const _0x3fd38b=generateLoginToken(_0x564636);return{'allow':!![],'reason':_0x1efe18(0x353),'token':_0x3fd38b};}}else return{'allow':![],'reason':_0x1efe18(0x2f3),'token':null};}function refreshToken(_0x3410ba){const _0xc8d8b8=_0x420d0d,_0x3ccc64=generateLoginToken(_0x3410ba);return{'allow':!![],'reason':_0xc8d8b8(0x353),'token':_0x3ccc64};}function validateAccess(_0x544c60,_0x107d9a,_0x14b23c){const _0x196f30=_0x420d0d,_0x52941f=_0x14b23c?_0x14b23c:devices[_0x107d9a]['ip'];let _0x16941b;const _0x53652f=_0xe1534e=>{const _0x208b98=_0x5908;if(settings[_0x208b98(0x2b8)]){if(settings[_0x208b98(0x32a)]){if(telegram2FaApproved(_0x107d9a)){const _0x1433e2=generateLoginToken(_0x107d9a);return{'allow':!![],'reason':_0x208b98(0x32e),'token':_0x1433e2};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x16941b=validToken(_0xe1534e,_0x107d9a),_0x16941b['hasOwnProperty'](_0x208b98(0x24d))?{'allow':!![],'reason':_0x208b98(0x2d1),'token':_0xe1534e}:{'allow':![],'reason':_0x208b98(0x281),'token':null};}else return{'allow':!![],'reason':_0x208b98(0x34f),'token':null};};if(settings[_0x196f30(0x2fb)]){let _0xc0b8cc=[...settings['whitelist'],'::1',_0x196f30(0x303),_0x196f30(0x37f)];if(_0xc0b8cc[_0x196f30(0x302)](_0x52941f))return _0x53652f(_0x544c60);else{_0x16941b=validToken(_0x544c60,_0x107d9a);if(_0x16941b[_0x196f30(0x34d)](_0x196f30(0x24d)))return _0x53652f(_0x544c60);else{if(telegramIpApproved(_0x107d9a)){const _0x4ab0d4=generateToken(_0x107d9a);return _0x16941b=_0x53652f(_0x544c60),_0x16941b[_0x196f30(0x233)]?{'allow':!![],'reason':_0x196f30(0x2a3),'token':_0x4ab0d4}:_0x16941b;}else return settings[_0x196f30(0x360)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x53652f(_0x544c60);}function timelyDecrypt(_0x4cb0dc,_0x44659d=!![]){const _0x36f107=_0x420d0d;if(_0x4cb0dc)try{const _0x54b6cf=crypt[_0x36f107(0x2d6)](secure[_0x36f107(0x359)],_0x4cb0dc)['message'],_0xf388=_0x54b6cf[_0x36f107(0x1e9)]('@')[0x0],_0x105ed3=_0x54b6cf[_0x36f107(0x1e9)]('@')[0x1],_0x2c1cb6=new Date()['getTime']();if(_0x44659d){if(_0x2c1cb6-_0x105ed3<maxSecretAge*0x3e8)return _0xf388;else return![];}else return _0xf388;}catch(_0x247cd7){return![];}else return![];}const validToken=(_0x1f264f,_0x492639)=>{const _0x8ee02e=_0x420d0d,_0x344d0a=devices[_0x492639]['ip'];if(!_0x1f264f)return{'error':_0x8ee02e(0x2ad)};for(let _0x363135 of blacklist){if(_0x363135['token']==_0x1f264f)return{'error':'Token\x20blacklisted'};}let _0x4f3a21;try{_0x4f3a21=jwt[_0x8ee02e(0x31f)](_0x1f264f,secure[_0x8ee02e(0x298)]+_0x492639);}catch{return{'error':_0x8ee02e(0x22e)};}if(!_0x4f3a21['hasOwnProperty'](_0x8ee02e(0x1df))&&!_0x4f3a21[_0x8ee02e(0x34d)](_0x8ee02e(0x365))||!_0x4f3a21['hasOwnProperty'](_0x8ee02e(0x2a0)))return{'error':_0x8ee02e(0x253)};if(!_0x4f3a21[_0x8ee02e(0x34d)](_0x8ee02e(0x365))&&_0x4f3a21[_0x8ee02e(0x34d)](_0x8ee02e(0x1df))){const {clientip:_0x5c2cc9}=_0x4f3a21;return _0x344d0a==_0x5c2cc9?{'success':_0x8ee02e(0x2e1)}:{'error':_0x8ee02e(0x31b)};}else{if(_0x4f3a21[_0x8ee02e(0x34d)]('username')&&_0x4f3a21[_0x8ee02e(0x34d)](_0x8ee02e(0x1df))){const {username:_0x5edbed,clientip:_0x2eda17}=_0x4f3a21;return settings[_0x8ee02e(0x39e)]==_0x5edbed&&_0x344d0a==_0x2eda17?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xe9f2e8=>{const _0x461211=_0x420d0d;if(_0xe9f2e8){const _0x2eed1b=devices[_0xe9f2e8]['ip'];return jwt['sign']({'username':settings[_0x461211(0x39e)],'clientip':_0x2eed1b},secure[_0x461211(0x298)]+_0xe9f2e8,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4188d2=>{const _0x48bf2f=_0x420d0d;if(_0x4188d2){const _0x5e2ded=devices[_0x4188d2]['ip'];return jwt[_0x48bf2f(0x317)]({'clientip':_0x5e2ded},secure[_0x48bf2f(0x298)]+_0x4188d2,{'expiresIn':devices[_0x4188d2][_0x48bf2f(0x25e)][_0x48bf2f(0x287)]*0x3c});}else return![];},telegramIpApproved=_0x20ecea=>{const _0x708324=_0x420d0d;let _0xac147c=![];return devices[_0x20ecea]['telegramIpApproval']&&devices[_0x20ecea]['telegramIpApproval'][_0x708324(0x287)]!=_0x708324(0x2f6)&&(_0xac147c=devices[_0x20ecea][_0x708324(0x25e)][_0x708324(0x1df)]==devices[_0x20ecea]['ip']&&new Date()[_0x708324(0x2ed)]()-devices[_0x20ecea]['telegramIpApproval'][_0x708324(0x318)]<devices[_0x20ecea][_0x708324(0x25e)]['expiry']*0x3c*0x3e8),_0xac147c;},telegram2FaApproved=_0x3c548f=>{const _0x359c93=_0x420d0d;let _0x3b6177=![];return devices[_0x3c548f][_0x359c93(0x36f)]&&devices[_0x3c548f][_0x359c93(0x36f)][_0x359c93(0x287)]!=_0x359c93(0x2f6)&&(_0x3b6177=devices[_0x3c548f][_0x359c93(0x36f)]['clientip']==devices[_0x3c548f]['ip']&&new Date()[_0x359c93(0x2ed)]()-devices[_0x3c548f][_0x359c93(0x36f)][_0x359c93(0x318)]<devices[_0x3c548f][_0x359c93(0x36f)][_0x359c93(0x287)]*0x3c*0x3e8),_0x3b6177;},normalizeIP=_0x46b2fd=>{const _0x179ad7=_0x420d0d;let _0x527e6a=null,_0x27557f=null;if(ipaddr[_0x179ad7(0x399)](_0x46b2fd)){const _0x495d19=ipaddr[_0x179ad7(0x373)](_0x46b2fd);_0x495d19['kind']()===_0x179ad7(0x316)?(_0x495d19[_0x179ad7(0x38c)]()&&(_0x527e6a=_0x495d19[_0x179ad7(0x32b)]()['toString']()),_0x27557f=_0x495d19[_0x179ad7(0x1f7)]()):(_0x527e6a=_0x495d19[_0x179ad7(0x1f7)](),_0x27557f=_0x495d19[_0x179ad7(0x336)]()['toString']());}return{'show':_0x527e6a?_0x527e6a:_0x27557f,'store':_0x27557f};};function formatDate(_0x1f631d){const _0xffd460=_0x420d0d;return _0x1f631d[_0xffd460(0x291)]()+'/'+(_0x1f631d[_0xffd460(0x1ed)]()+0x1)[_0xffd460(0x1f7)]()[_0xffd460(0x246)](0x2,'0')+'/'+_0x1f631d[_0xffd460(0x2b7)]()[_0xffd460(0x1f7)]()[_0xffd460(0x246)](0x2,'0')+'\x20'+_0x1f631d[_0xffd460(0x276)]()['toString']()[_0xffd460(0x246)](0x2,'0')+':'+_0x1f631d[_0xffd460(0x35d)]()['toString']()[_0xffd460(0x246)](0x2,'0')+':'+_0x1f631d[_0xffd460(0x2c5)]()['toString']()['padStart'](0x2,'0');}function sleep(_0x1ee30b){return new Promise(_0x30e3e7=>setTimeout(_0x30e3e7,_0x1ee30b));}