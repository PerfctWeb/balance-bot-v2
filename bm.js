const _0x231df8=_0x1fbb;(function(_0x3ff40e,_0x56cd73){const _0x29bc3d=_0x1fbb,_0x37ca21=_0x3ff40e();while(!![]){try{const _0x47e20c=parseInt(_0x29bc3d(0x1e8))/0x1+parseInt(_0x29bc3d(0x236))/0x2*(-parseInt(_0x29bc3d(0x221))/0x3)+parseInt(_0x29bc3d(0x134))/0x4+parseInt(_0x29bc3d(0x23c))/0x5*(-parseInt(_0x29bc3d(0x174))/0x6)+parseInt(_0x29bc3d(0x269))/0x7*(parseInt(_0x29bc3d(0x10c))/0x8)+parseInt(_0x29bc3d(0x23b))/0x9*(-parseInt(_0x29bc3d(0x13f))/0xa)+parseInt(_0x29bc3d(0xdb))/0xb;if(_0x47e20c===_0x56cd73)break;else _0x37ca21['push'](_0x37ca21['shift']());}catch(_0x3cea91){_0x37ca21['push'](_0x37ca21['shift']());}}}(_0x2487,0x35d7a));const _0x355114=function(){let _0x5b1e49=!![];return function(_0x5907de,_0x44c4bc){const _0x422ffc=_0x5b1e49?function(){const _0x3afc8b=_0x1fbb;if(_0x44c4bc){const _0x1f9bd3=_0x44c4bc[_0x3afc8b(0x1b3)](_0x5907de,arguments);return _0x44c4bc=null,_0x1f9bd3;}}:function(){};return _0x5b1e49=![],_0x422ffc;};}(),_0x6534d6=_0x355114(this,function(){const _0x1c591=_0x1fbb;return _0x6534d6[_0x1c591(0x259)]()[_0x1c591(0xd9)](_0x1c591(0x283))[_0x1c591(0x259)]()[_0x1c591(0x28d)](_0x6534d6)[_0x1c591(0xd9)](_0x1c591(0x283));});_0x6534d6();'use strict';process[_0x231df8(0x1ab)][_0x231df8(0x128)]=0x1;const childProcess=require(_0x231df8(0x1f5)),fs=require('fs'),fns=require(_0x231df8(0x22f)),low=require(_0x231df8(0x19c)),FileSync=require(_0x231df8(0x1fa)),path=require(_0x231df8(0xed)),crypto=require(_0x231df8(0x1d9)),Crypt=require(_0x231df8(0xff))['Crypt'],RSA=require(_0x231df8(0xff))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x231df8(0x112)),ipaddr=require(_0x231df8(0xe2)),argv=require('yargs/yargs')(process['argv'][_0x231df8(0x1b5)](0x2))[_0x231df8(0x282)],uuidRandom=require(_0x231df8(0x200)),TelegramBot=require(_0x231df8(0x285)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x231df8(0x1ea)),PORT=argv[_0x231df8(0x12f)]||_0x231df8(0x297),pattern=/^[0-9]{2,4}$/;!pattern[_0x231df8(0x156)](PORT)&&(console[_0x231df8(0x13e)](_0x231df8(0x1e4)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x231df8(0x183)](0x1));const HOST=argv['host']||null,userID=argv[_0x231df8(0x1b7)]||'',debugging=argv['d']||![];let bbpath=_0x231df8(0x1cc),bbpath2='';const botfile=_0x231df8(0x1d7),configfile='bb-config.json',settingsfile=_0x231df8(0x284),securefile=_0x231df8(0x20a),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x231df8(0xe7)),configpath=userID?bbpath+_0x231df8(0x1bb)+userID+'/':bbpath+_0x231df8(0x1bb),configbackuppath=configpath+_0x231df8(0x144),logspath=userID?bbpath+_0x231df8(0x190)+userID+'/':bbpath+_0x231df8(0x190),zippath=userID?bbpath+_0x231df8(0xf6)+userID+'/':bbpath+_0x231df8(0xf6),loggerfile=fs[_0x231df8(0x27e)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x231df8(0x227)+userID+'/':bbpath+_0x231df8(0x227);!fs[_0x231df8(0x1c7)](configpath)&&fs[_0x231df8(0xcc)](configpath);!fs[_0x231df8(0x1c7)](configbackuppath)&&fs[_0x231df8(0xcc)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x231df8(0xcc)](logspath);!fs[_0x231df8(0x1c7)](zippath)&&fs[_0x231df8(0xcc)](zippath);!fs[_0x231df8(0x1c7)](temppath)&&fs[_0x231df8(0xcc)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x231df8(0x145)]({'bots':[]})[_0x231df8(0x206)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x231df8(0x145)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x231df8(0x15d),'onepagemode':![]}})[_0x231df8(0x206)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x231df8(0x206)]();let crypt=new Crypt({'md':_0x231df8(0x147),'rsaStandard':_0x231df8(0x14d)});const saltRounds=0xa,mixpanel=Mixpanel[_0x231df8(0x243)](_0x231df8(0x1ed),{'host':_0x231df8(0xd8)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x231df8(0x1ef)]&&settings['telegramToken']!=''&&settings[_0x231df8(0x10e)]&&settings[_0x231df8(0x10e)]!='')initTelegram();const logger={'screen':_0x5e5c96=>{const _0x70ef16=_0x231df8;console[_0x70ef16(0x13e)](_0x5e5c96);},'simple':_0x51a493=>{const _0x23d6ad=_0x231df8;console['log'](_0x51a493),loggerfile[_0x23d6ad(0x206)](util[_0x23d6ad(0x295)](_0x51a493)+'\x0a');},'full':async _0x58fd75=>{const _0xc1abfa=_0x231df8,_0x17a23c=getTimeStamp()+_0xc1abfa(0x230)+_0x58fd75;console[_0xc1abfa(0x13e)](_0x17a23c),loggerfile[_0xc1abfa(0x206)](util[_0xc1abfa(0x295)](_0x17a23c)+'\x0a');if(tgBot&&settings[_0xc1abfa(0x19b)]&&settings['telegramEvents']!='orders')await tgBot[_0xc1abfa(0x152)](settings[_0xc1abfa(0x19b)],_0xc1abfa(0x1fe)+_0x58fd75)[_0xc1abfa(0x1ee)](_0x2075a7=>{telegramError(_0x2075a7);});},'debug':async(_0x1a3675,_0x2bc9d8='')=>{const _0x7bf5e4=_0x231df8,_0x1f8020=getTimeStamp()+_0x7bf5e4(0x191)+_0x1a3675;if(debugging)console[_0x7bf5e4(0x13e)](_0x1f8020);loggerfile['write'](util['format'](_0x1f8020)+'\x0a');if(_0x2bc9d8){if(debugging)console[_0x7bf5e4(0x13e)](_0x2bc9d8);loggerfile[_0x7bf5e4(0x206)](util[_0x7bf5e4(0x295)](_0x2bc9d8)+'\x0a');}}};process['on'](_0x231df8(0x1dd),function(_0x5be32e){const _0x3d208c=_0x231df8;logger[_0x3d208c(0x16b)](_0x5be32e);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x231df8(0x27c))[_0x231df8(0x232)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x231df8(0xef))[_0x231df8(0x121)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get']('/download/:type',async(_0x452bca,_0x2f8bce)=>{const _0x5f557a=_0x231df8,_0x394f82=_0x452bca['params'][_0x5f557a(0x1a1)],_0x4eeb9d=getClientsWithBotID(_0x5f557a(0x24b)),_0x43cc2d=_0x452bca[_0x5f557a(0x150)][_0x5f557a(0x257)],_0xf7266f=timelyDecrypt(_0x43cc2d,![]),_0x5565ba=_0x4eeb9d['find'](_0x128cfe=>_0x128cfe['uuid']==_0xf7266f);if(_0x5565ba){const _0x24fc85=normalizeIP(_0x452bca[_0x5f557a(0x18f)]['remoteAddress'])['store'],_0x26aad4=_0x452bca[_0x5f557a(0x150)][_0x5f557a(0x25a)];if(validateAccess(_0x26aad4,_0xf7266f,_0x24fc85)[_0x5f557a(0x1e7)])_0x394f82=='backup'&&await backupConfigFiles(),await zipFiles(_0x394f82),_0x2f8bce[_0x5f557a(0x126)](zippath+(_0x394f82+'.zip'),_0x566d80=>{const _0x3e0ef7=_0x5f557a;_0x566d80&&(logger[_0x3e0ef7(0x220)](_0x3e0ef7(0x247)+_0x394f82),logger['simple'](_0x566d80));});else logger['full'](_0x5f557a(0x137)+_0x394f82+_0x5f557a(0x1d5));}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x394f82+_0x5f557a(0x209));}),app[_0x231df8(0x161)]('/upload-backup',async(_0x38f741,_0x4c11e5)=>{const _0x51f2cb=_0x231df8,_0x253bcc=getClientsWithBotID(_0x51f2cb(0x24b)),_0x5a1c7b=_0x38f741[_0x51f2cb(0x150)][_0x51f2cb(0x257)],_0x254a2d=timelyDecrypt(_0x5a1c7b,![]),_0x4620e8=_0x253bcc[_0x51f2cb(0x15c)](_0x6566a2=>_0x6566a2[_0x51f2cb(0x257)]==_0x254a2d);logger[_0x51f2cb(0x133)](_0x51f2cb(0xf0));if(_0x4620e8){const _0x403622=normalizeIP(_0x38f741[_0x51f2cb(0x18f)][_0x51f2cb(0x251)])[_0x51f2cb(0x226)],_0x448a57=_0x38f741[_0x51f2cb(0x150)][_0x51f2cb(0x25a)];if(validateAccess(_0x448a57,_0x254a2d,_0x403622)[_0x51f2cb(0x1e7)]){if(_0x38f741[_0x51f2cb(0xe6)]){const _0x5af31f=_0x38f741[_0x51f2cb(0xe6)][_0x51f2cb(0x20c)];await _0x5af31f['mv'](temppath+_0x5af31f['name']),_0x4c11e5['send']({'status':!![],'message':_0x51f2cb(0x211)});const _0x2a68aa=getBotsWithMode();_0x2a68aa[_0x51f2cb(0x101)]>0x0?confirmRestore(temppath,_0x5af31f['name']):unzipFile(temppath,_0x5af31f[_0x51f2cb(0x20e)]);}}else logger[_0x51f2cb(0x220)](_0x51f2cb(0x24c));}else logger[_0x51f2cb(0x220)](_0x51f2cb(0x1c1));}),app[_0x231df8(0x180)](express[_0x231df8(0x21e)](path[_0x231df8(0x277)](__dirname,bbpath2,'build2'))),app['use'](express[_0x231df8(0x21e)](path['join'](__dirname,bbpath2,_0x231df8(0x11f)))),app['get']('/',function(_0x3e239b,_0x2a5ab4){const _0x301a4d=_0x231df8;_0x2a5ab4[_0x301a4d(0x212)](path[_0x301a4d(0x277)](__dirname,bbpath2,_0x301a4d(0xe3),_0x301a4d(0xfb)));}),app[_0x231df8(0xde)](_0x231df8(0x166),function(_0x55e4bc,_0x443f4e){const _0x401631=_0x231df8;_0x443f4e[_0x401631(0x212)](path['join'](__dirname,bbpath2,_0x401631(0x11f),_0x401631(0xfb)));}),app[_0x231df8(0xde)](_0x231df8(0x158),(_0x3d4fe5,_0x597dc5)=>{const _0x16258d=_0x231df8;_0x597dc5['sendFile'](path['join'](__dirname,bbpath2,_0x16258d(0x11f),_0x16258d(0xfb)));}),app[_0x231df8(0xde)](_0x231df8(0x10a),(_0x41ae64,_0xe56629)=>{const _0x19332e=_0x231df8;_0xe56629['sendFile'](path[_0x19332e(0x277)](__dirname,bbpath2,_0x19332e(0x11f),'index.html'));}),app['get'](_0x231df8(0x1cb),(_0x356aa0,_0x4c8cd9)=>{const _0xa4dee5=_0x231df8;_0x4c8cd9['sendFile'](path[_0xa4dee5(0x277)](__dirname,bbpath2,'build',_0xa4dee5(0xfb)));}),app['get'](_0x231df8(0x110),(_0x2ec901,_0x5764b7)=>{const _0x366bdd=_0x231df8;_0x5764b7['sendFile'](path[_0x366bdd(0x277)](__dirname,bbpath2,_0x366bdd(0x11f),_0x366bdd(0xfb)));}),app[_0x231df8(0xde)](_0x231df8(0x266),(_0x1d2cf6,_0x511810)=>{const _0x4c0a3e=_0x231df8;_0x511810[_0x4c0a3e(0x212)](path[_0x4c0a3e(0x277)](__dirname,bbpath2,'build',_0x4c0a3e(0xfb)));}),app[_0x231df8(0xde)](_0x231df8(0x261),(_0x5a0ae3,_0x4dc5fa)=>{const _0x556fb6=_0x231df8;_0x4dc5fa[_0x556fb6(0x212)](path[_0x556fb6(0x277)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x231df8(0x1b0)](PORT,HOST);else http[_0x231df8(0x1b0)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x1d52de=_0x231df8;logger[_0x1d52de(0x16b)](''),logger['simple'](_0x1d52de(0x1bf)),await logger['full'](_0x1d52de(0x135)+PORT),logger['simple'](_0x1d52de(0x1bf));if(config['length']!=0x0)for(const _0x21f8b2 of config){if(_0x21f8b2['status']==_0x1d52de(0x278)||_0x21f8b2['status']=='new')await logger[_0x1d52de(0x220)](_0x1d52de(0x28c)+_0x21f8b2[_0x1d52de(0x208)]+_0x1d52de(0x176)+_0x21f8b2['botname']),startBot([_0x21f8b2[_0x1d52de(0x208)],userID],{'cwd':bbpath},function(_0x5ce039){const _0x5ad033=_0x1d52de;if(_0x5ce039)logger[_0x5ad033(0x220)](_0x5ce039);});else(_0x21f8b2['status']=='disabled'||_0x21f8b2['status']==_0x1d52de(0x163))&&await logger['full'](_0x1d52de(0x1b9)+_0x21f8b2['botID']+_0x1d52de(0x176)+_0x21f8b2[_0x1d52de(0x28e)]);}else!newBot&&logger[_0x1d52de(0x16b)](_0x1d52de(0x140));if(newBot)addBot();logger[_0x1d52de(0x16b)](_0x1d52de(0x1bf)),logger[_0x1d52de(0x16b)]('');}function startSocket(){io['on']('connection',_0x41239a=>{const _0x187d7a=_0x1fbb;let _0x76f64,_0x545605,_0x112b23,_0x1de161,_0x44ad14;const _0x2444c0=_0x41239a['handshake'][_0x187d7a(0x150)]['referer'];_0x545605=_0x2444c0['match'](/bot[0-9]{3}/);if(_0x545605)_0x112b23=_0x545605[0x0][_0x187d7a(0x1e6)](/[0-9]{3}/);if(_0x112b23)_0x76f64=_0x112b23[0x0];else _0x76f64='botmanager';const _0xe90562=_0x41239a[_0x187d7a(0x23e)]['auth']['encryptedUuid'];if(!_0xe90562)_0x41239a[_0x187d7a(0x207)](_0x187d7a(0x260),{'publicKey':secure['publicKey']});else{_0x1de161=timelyDecrypt(_0xe90562,![]);if(!_0x1de161)_0x41239a[_0x187d7a(0x207)]('status',{'publicKey':secure['publicKey']});else{_0x44ad14=normalizeIP(_0x41239a[_0x187d7a(0xfd)][_0x187d7a(0x251)])[_0x187d7a(0x226)];if(!devices[_0x1de161])devices[_0x1de161]={'uuid':_0x1de161,'access':{'token':null}};devices[_0x1de161]['ip']=_0x44ad14;const _0x53cc0e=addClient(_0x41239a['id'],_0x1de161,_0x76f64);setAccess(_0x53cc0e),emitMessages(),_0x41239a['on'](_0x187d7a(0x1d6),_0x46bd16=>{const _0x2eb791=_0x187d7a,_0x2819f1=timelyDecrypt(_0x46bd16['password']);if(_0x2819f1){_0x46bd16={'username':_0x46bd16['username'],'password':_0x2819f1},devices[_0x1de161][_0x2eb791(0x123)]=validateCredentials(_0x46bd16,_0x1de161);if(devices[_0x1de161][_0x2eb791(0x123)][_0x2eb791(0x1e7)]==![]&&devices[_0x1de161]['access'][_0x2eb791(0x242)]=='2FA\x20login\x20required')_0x41239a[_0x2eb791(0x207)](_0x2eb791(0x260),{'access':devices[_0x1de161][_0x2eb791(0x123)]}),loginAccess2FA(_0x1de161,_0x44ad14);else{if(devices[_0x1de161]['access'][_0x2eb791(0x1e7)]==![]&&devices[_0x1de161][_0x2eb791(0x123)]['reason']==_0x2eb791(0x169))_0x41239a['emit']('status',{'access':devices[_0x1de161]['access']});else devices[_0x1de161][_0x2eb791(0x123)]['allow']&&devices[_0x1de161][_0x2eb791(0x123)][_0x2eb791(0x242)]==_0x2eb791(0x12c)&&(getClientsWithUuid(_0x1de161)['forEach'](_0x28bf4f=>{setAccess(_0x28bf4f);}),logger['debug']('Logged\x20in\x20user\x20...'+_0x1de161[_0x2eb791(0x1b5)](-0x8)),setTokenRefresh(_0x1de161),setSessionTimeout(_0x2eb791(0x1d6),_0x1de161));}}else logger[_0x2eb791(0x220)](_0x2eb791(0xe9));}),_0x41239a['on'](_0x187d7a(0x151),()=>{resetPassword();}),_0x41239a['on'](_0x187d7a(0x23a),_0x6f2a45=>{removeClient(_0x41239a['id']);}),_0x76f64==_0x187d7a(0x24b)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x440a26){const _0x1b199b=_0x231df8;if(_0x440a26!=_0x1b199b(0x24b)&&config[_0x1b199b(0x100)]!=''){if(pid[_0x440a26])pid[_0x440a26][_0x1b199b(0x26d)]({'function':_0x1b199b(0x108),'args':null});}_0x440a26!=_0x1b199b(0x24b)&&broadcastToBots(_0x1b199b(0x182),JSON['stringify'](config));}function reloadBotManager(){const _0x5a8ea0=_0x231df8;getClientsWithBotID(_0x5a8ea0(0x24b))['forEach'](_0x3babf3=>{const _0x3fe172=_0x5a8ea0;getSocket(_0x3babf3['id'])[_0x3fe172(0x207)](_0x3fe172(0x260),{'access':{'allow':![],'reason':_0x3fe172(0x1c6),'token':null}});});}function getSocket(_0x28438f){const _0x52abb1=_0x231df8;return io['sockets'][_0x52abb1(0xf9)]['get'](_0x28438f);}function setAccess(_0x5bfd19){const _0x521ecb=_0x231df8,_0x18f00d=getSocket(_0x5bfd19['id']),_0x2cca25=_0x5bfd19[_0x521ecb(0x257)],_0x77914d=_0x5bfd19['bot'];devices[_0x2cca25][_0x521ecb(0x123)]=validateAccess(devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x224)],_0x2cca25),logger[_0x521ecb(0x133)]('Setting\x20access:\x20'+devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x242)]+_0x521ecb(0x293)+_0x5bfd19['id'][_0x521ecb(0x1b5)](-0x8)+'\x20|\x20user:\x20...'+_0x2cca25['slice'](-0x8)),_0x18f00d['join'](_0x2cca25);if(devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x1e7)]){_0x18f00d[_0x521ecb(0x277)](_0x77914d);if(_0x77914d==_0x521ecb(0x24b))initializeSocketBotManager(_0x18f00d);else initializeSocketBot(_0x18f00d);initClient(_0x77914d);}devices[_0x2cca25][_0x521ecb(0x123)]['token']&&devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x242)]==_0x521ecb(0x25f)&&setSessionTimeout(_0x521ecb(0x27b),_0x2cca25),devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x224)]&&devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x242)]==_0x521ecb(0x240)&&setSessionTimeout('login',_0x2cca25),_0x18f00d[_0x521ecb(0x207)](_0x521ecb(0x260),{'status':_0x5bfd19[_0x521ecb(0x14b)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2cca25][_0x521ecb(0x123)],'externalip':devices[_0x2cca25]['ip'],'publicKey':secure[_0x521ecb(0x237)],'userid':settings[_0x521ecb(0xd6)],'validInstallation':validInstallation}),devices[_0x2cca25][_0x521ecb(0x123)]['allow']==![]&&devices[_0x2cca25][_0x521ecb(0x123)][_0x521ecb(0x242)]==_0x521ecb(0x1f3)&&temporaryAccess2FA(_0x2cca25,devices[_0x2cca25]['ip']);}function setSessionTimeout(_0x5a174d,_0xdb9865){const _0x127475=_0x231df8;let _0x237ec0;if(_0x5a174d==_0x127475(0x1d6))_0x237ec0=loginExpiry*0x3c*0x3e8;else _0x237ec0=devices[_0xdb9865][_0x127475(0x1f4)][_0x127475(0x16c)]*0x3c*0x3e8-(new Date()[_0x127475(0x248)]()-devices[_0xdb9865]['telegramIpApproval'][_0x127475(0x14a)]);if(devices[_0xdb9865][_0x127475(0x213)])clearTimeout(devices[_0xdb9865][_0x127475(0x213)]);devices[_0xdb9865][_0x127475(0x213)]=setTimeout(()=>{const _0x515500=_0x127475;if(devices[_0xdb9865]['pidRefreshToken'])clearTimeout(devices[_0xdb9865][_0x515500(0x16d)]);removeSocketListeners(_0xdb9865),addBlacklist(_0xdb9865),devices[_0xdb9865][_0x515500(0x1f4)]=null,devices[_0xdb9865][_0x515500(0x1a7)]=null,devices[_0xdb9865][_0x515500(0x123)]['token']=null,logger[_0x515500(0x133)]('Session\x20expired\x20for\x20user\x20...'+_0xdb9865[_0x515500(0x1b5)](-0x8)),devices[_0xdb9865]['access']=validateAccess(devices[_0xdb9865][_0x515500(0x123)]['token'],_0xdb9865),!(devices[_0xdb9865][_0x515500(0x123)]['allow']&&devices[_0xdb9865][_0x515500(0x123)]['reason']=='login\x20not\x20required')&&(_0x5a174d==_0x515500(0x1d6)?io['to'](_0xdb9865)[_0x515500(0x207)](_0x515500(0x260),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0xdb9865)['emit'](_0x515500(0x260),{'access':{'allow':![],'reason':_0x515500(0xd2),'token':null}})),devices[_0xdb9865][_0x515500(0x123)][_0x515500(0x224)]=null;},_0x237ec0);}function setTokenRefresh(_0xf6b068){const _0x146a72=_0x231df8;if(devices[_0xf6b068][_0x146a72(0x16d)])clearTimeout(devices[_0xf6b068][_0x146a72(0x16d)]);devices[_0xf6b068][_0x146a72(0x16d)]=setTimeout(()=>{const _0x4f5c36=_0x146a72;getClientsWithUuid(_0xf6b068)[_0x4f5c36(0x101)]!=0x0?(devices[_0xf6b068][_0x4f5c36(0x123)]=refreshToken(_0xf6b068),io['to'](_0xf6b068)[_0x4f5c36(0x207)](_0x4f5c36(0x260),{'status':_0x4f5c36(0x1ce),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xf6b068][_0x4f5c36(0x123)],'externalip':devices[_0xf6b068]['ip'],'publicKey':secure[_0x4f5c36(0x237)],'validInstallation':validInstallation}),setTokenRefresh(_0xf6b068)):clearTimeout(devices[_0xf6b068]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x14d10e){const _0x3b7c33=_0x231df8,_0x56aebd=getClient(_0x14d10e['id'])['uuid'];_0x14d10e[_0x3b7c33(0x207)](_0x3b7c33(0x182),config),_0x14d10e[_0x3b7c33(0x207)](_0x3b7c33(0x1b2),cleanSettings()),_0x14d10e['on']('add-bot',_0x5b24ae=>{const _0x29f057=_0x3b7c33;if(validateAccess(_0x5b24ae,_0x56aebd)[_0x29f057(0x1e7)])addBot();else logger[_0x29f057(0x220)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x14d10e['on'](_0x3b7c33(0x203),(_0x1f21e0,_0x594b00)=>{const _0x242a92=_0x3b7c33;if(validateAccess(_0x594b00,_0x56aebd)[_0x242a92(0x1e7)])toggleBot(_0x1f21e0[_0x242a92(0x208)],_0x1f21e0['status'],_0x1f21e0[_0x242a92(0x276)]);else logger[_0x242a92(0x220)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x14d10e['on'](_0x3b7c33(0x13a),(_0x437ba0,_0x403303)=>{const _0x14ed7a=_0x3b7c33;if(validateAccess(_0x403303,_0x56aebd)['allow'])toggleBotMode(_0x437ba0);else logger[_0x14ed7a(0x220)](_0x14ed7a(0x1b8));}),_0x14d10e['on'](_0x3b7c33(0x146),(_0x87bd9f,_0x5b019d)=>{const _0x4b6e98=_0x3b7c33;if(validateAccess(_0x5b019d,_0x56aebd)[_0x4b6e98(0x1e7)])deleteBot(_0x87bd9f);else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x14d10e['on'](_0x3b7c33(0x11a),(_0x4c37d1,_0x7ba835)=>{const _0x2fa5d1=_0x3b7c33;if(validateAccess(_0x7ba835,_0x56aebd)[_0x2fa5d1(0x1e7)])storeSettings(_0x4c37d1,!![]);else logger[_0x2fa5d1(0x220)](_0x2fa5d1(0x20f));}),_0x14d10e['on'](_0x3b7c33(0x1f0),_0x139fb7=>{const _0x3abf48=_0x3b7c33;if(validateAccess(_0x139fb7,_0x56aebd)[_0x3abf48(0x1e7)])updateBB('update');else logger[_0x3abf48(0x220)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x14d10e['on'](_0x3b7c33(0x1c9),_0x41dbe0=>{if(validateAccess(_0x41dbe0,_0x56aebd)['allow'])updateBB('reinstall');else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x14d10e['on'](_0x3b7c33(0x181),_0x84ff33=>{const _0x5a6414=_0x3b7c33;if(validateAccess(_0x84ff33,_0x56aebd)[_0x5a6414(0x1e7)]){const _0x44d1e8=getClient(_0x14d10e['id']);if(_0x44d1e8)getBackupFiles(_0x44d1e8[_0x5a6414(0x257)]);else logger[_0x5a6414(0x220)](_0x5a6414(0x17c));}else logger[_0x5a6414(0x220)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x14d10e['on'](_0x3b7c33(0xe1),(_0x2a014e,_0x4192b6)=>{const _0xfa0e1e=_0x3b7c33;if(validateAccess(_0x4192b6,_0x56aebd)[_0xfa0e1e(0x1e7)])restoreBackupFile(_0x2a014e);else logger[_0xfa0e1e(0x220)](_0xfa0e1e(0x1be));}),_0x14d10e['on'](_0x3b7c33(0x21f),_0x4ddec7=>{const _0x5584d2=_0x3b7c33;if(validateAccess(_0x4ddec7,_0x56aebd)[_0x5584d2(0x1e7)])getMessages();else logger[_0x5584d2(0x220)](_0x5584d2(0x292));}),_0x14d10e['on'](_0x3b7c33(0x167),(_0x2c6fb0,_0x2adc56)=>{const _0x51df07=_0x3b7c33;if(validateAccess(_0x2adc56,_0x56aebd)[_0x51df07(0x1e7)])confirmMessage(_0x2c6fb0);else logger[_0x51df07(0x220)](_0x51df07(0x168));}),_0x14d10e['on']('logout',_0x526fc8=>{const _0x57ac20=_0x3b7c33;if(validateAccess(_0x526fc8,_0x56aebd)[_0x57ac20(0x1e7)]){if(devices[_0x56aebd][_0x57ac20(0x16d)])clearTimeout(devices[_0x56aebd]['pidRefreshToken']);if(devices[_0x56aebd][_0x57ac20(0x213)])clearTimeout(devices[_0x56aebd][_0x57ac20(0x213)]);removeSocketListeners(getClient(_0x14d10e['id'])[_0x57ac20(0x257)]),addBlacklist(_0x56aebd),devices[_0x56aebd][_0x57ac20(0x1f4)]=null,devices[_0x56aebd][_0x57ac20(0x1a7)]=null,devices[_0x56aebd][_0x57ac20(0x123)]['token']=null,logger[_0x57ac20(0x133)](_0x57ac20(0x164)+_0x56aebd['slice'](-0x8)),io['to'](getClient(_0x14d10e['id'])['uuid'])[_0x57ac20(0x207)](_0x57ac20(0x260),{'access':{'allow':![],'reason':_0x57ac20(0x118),'token':null}});}else logger[_0x57ac20(0x220)](_0x57ac20(0x1d3));});}function initializeSocketBot(_0x9ec3ba){const _0x4f8b9e=_0x231df8,_0x3661eb=getClient(_0x9ec3ba['id'])[_0x4f8b9e(0x179)],_0x2a4dc3=getClient(_0x9ec3ba['id'])[_0x4f8b9e(0x257)];_0x9ec3ba['on'](_0x4f8b9e(0x23f),(_0x3fd2e5,_0x5af6db)=>{const _0x3f3d21=_0x4f8b9e;if(validateAccess(_0x5af6db,_0x2a4dc3)[_0x3f3d21(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x3f3d21(0x26d)]({'function':_0x3f3d21(0x130),'args':_0x3fd2e5});}else logger[_0x3f3d21(0x220)](_0x3f3d21(0x171));}),_0x9ec3ba['on'](_0x4f8b9e(0x14f),(_0x322609,_0x2e203f)=>{const _0x4798b5=_0x4f8b9e;if(validateAccess(_0x2e203f,_0x2a4dc3)[_0x4798b5(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x4798b5(0x26d)]({'function':_0x4798b5(0x136),'args':_0x322609});}else logger[_0x4798b5(0x220)](_0x4798b5(0x201));}),_0x9ec3ba['on'](_0x4f8b9e(0x1d4),(_0x3baaf9,_0x9e8ae5)=>{const _0x5f980c=_0x4f8b9e;if(validateAccess(_0x9e8ae5,_0x2a4dc3)[_0x5f980c(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb]['send']({'function':_0x5f980c(0x15f),'args':_0x3baaf9});}else logger['full'](_0x5f980c(0x1e3));}),_0x9ec3ba['on'](_0x4f8b9e(0x254),(_0x4b8d28,_0x38bfad)=>{const _0x38c863=_0x4f8b9e;if(validateAccess(_0x38bfad,_0x2a4dc3)[_0x38c863(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x38c863(0x26d)]({'function':_0x38c863(0x27d),'args':_0x4b8d28});}else logger[_0x38c863(0x220)](_0x38c863(0x272));}),_0x9ec3ba['on'](_0x4f8b9e(0x195),(_0x478c5c,_0x247406)=>{const _0x452c64=_0x4f8b9e;if(validateAccess(_0x247406,_0x2a4dc3)['allow']){if(pid[_0x3661eb])pid[_0x3661eb][_0x452c64(0x26d)]({'function':'storeHeadless','args':_0x478c5c});}else logger[_0x452c64(0x220)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x9ec3ba['on']('store-fiat',(_0x559bd2,_0x481ed1)=>{const _0xf3f9ca=_0x4f8b9e;if(validateAccess(_0x481ed1,_0x2a4dc3)[_0xf3f9ca(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0xf3f9ca(0x26d)]({'function':_0xf3f9ca(0x1e1),'args':_0x559bd2});}else logger[_0xf3f9ca(0x220)](_0xf3f9ca(0x28f));}),_0x9ec3ba['on']('reset-history',_0x463c86=>{const _0x2d715b=_0x4f8b9e;if(validateAccess(_0x463c86,_0x2a4dc3)[_0x2d715b(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x2d715b(0x26d)]({'function':_0x2d715b(0x25b),'args':null});}else logger[_0x2d715b(0x220)](_0x2d715b(0x26f));}),_0x9ec3ba['on'](_0x4f8b9e(0x11d),_0xe1ea5f=>{const _0x2110df=_0x4f8b9e;if(validateAccess(_0xe1ea5f,_0x2a4dc3)['allow']){if(pid[_0x3661eb])pid[_0x3661eb][_0x2110df(0x26d)]({'function':_0x2110df(0x1e0),'args':null});}else logger[_0x2110df(0x220)](_0x2110df(0xe0));}),_0x9ec3ba['on'](_0x4f8b9e(0x159),(_0x410897,_0x45b439)=>{const _0x3ba902=_0x4f8b9e;if(validateAccess(_0x45b439,_0x2a4dc3)[_0x3ba902(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x3ba902(0x26d)]({'function':_0x3ba902(0x1b1),'args':_0x410897});}else logger['full'](_0x3ba902(0x131));}),_0x9ec3ba['on'](_0x4f8b9e(0x104),_0x2c94e1=>{const _0x9568f6=_0x4f8b9e;if(validateAccess(_0x2c94e1,_0x2a4dc3)[_0x9568f6(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x9568f6(0x26d)]({'function':_0x9568f6(0x132),'args':null});}else logger[_0x9568f6(0x220)](_0x9568f6(0xd3));}),_0x9ec3ba['on'](_0x4f8b9e(0x245),_0x39f8b5=>{const _0x3be291=_0x4f8b9e;if(validateAccess(_0x39f8b5,_0x2a4dc3)[_0x3be291(0x1e7)]){if(pid[_0x3661eb])pid[_0x3661eb][_0x3be291(0x26d)]({'function':_0x3be291(0x280),'args':null});}else logger[_0x3be291(0x220)](_0x3be291(0x198));}),_0x9ec3ba['on'](_0x4f8b9e(0x1f0),_0x4087e=>{const _0x342221=_0x4f8b9e;if(validateAccess(_0x4087e,_0x2a4dc3)[_0x342221(0x1e7)])updateBB('update');else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x9ec3ba['on']('get-messages',_0x18bc4b=>{const _0x6e2133=_0x4f8b9e;if(validateAccess(_0x18bc4b,_0x2a4dc3)[_0x6e2133(0x1e7)])getMessages();else logger['full'](_0x6e2133(0x292));}),_0x9ec3ba['on'](_0x4f8b9e(0x167),(_0x159ead,_0x5a2103)=>{const _0x793abd=_0x4f8b9e;if(validateAccess(_0x5a2103,_0x2a4dc3)[_0x793abd(0x1e7)])confirmMessage(_0x159ead);else logger[_0x793abd(0x220)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x9ec3ba['on']('logout',_0x2ebe80=>{const _0x31a2a8=_0x4f8b9e;if(validateAccess(_0x2ebe80,_0x2a4dc3)[_0x31a2a8(0x1e7)]){if(devices[_0x2a4dc3]['pidRefreshToken'])clearTimeout(devices[_0x2a4dc3][_0x31a2a8(0x16d)]);if(devices[_0x2a4dc3][_0x31a2a8(0x213)])clearTimeout(devices[_0x2a4dc3]['pidExpireLogin']);removeSocketListeners(getClient(_0x9ec3ba['id'])[_0x31a2a8(0x257)]),addBlacklist(_0x2a4dc3),devices[_0x2a4dc3][_0x31a2a8(0x1f4)]=null,devices[_0x2a4dc3][_0x31a2a8(0x1a7)]=null,devices[_0x2a4dc3][_0x31a2a8(0x123)][_0x31a2a8(0x224)]=null,logger['debug'](_0x31a2a8(0x164)+_0x2a4dc3['slice'](-0x8)),io['to'](getClient(_0x9ec3ba['id'])[_0x31a2a8(0x257)])[_0x31a2a8(0x207)](_0x31a2a8(0x260),{'access':{'allow':![],'reason':_0x31a2a8(0x118),'token':null}});}else logger[_0x31a2a8(0x220)](_0x31a2a8(0x1d3));});}function removeSocketListeners(_0x2b85be){const _0x1fd306=_0x231df8;getClientsWithUuid(_0x2b85be)[_0x1fd306(0x238)](_0x2278eb=>{const _0xbadf46=_0x1fd306;getSocket(_0x2278eb['id'])[_0xbadf46(0x223)]();});}function cleanSettings(){const _0x30d080=_0x231df8;let _0x1029b0=settings;return settings[_0x30d080(0x1ef)]&&settings[_0x30d080(0x1ef)]!=''&&(_0x1029b0={..._0x1029b0,'telegramToken':_0x30d080(0x196)}),settings[_0x30d080(0x1c2)]&&settings[_0x30d080(0x1c2)]!=''&&(_0x1029b0={..._0x1029b0,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x30d080(0x1c2)]==_0x30d080(0xf5)||settings[_0x30d080(0x1ef)]&&settings[_0x30d080(0x1ef)]==_0x30d080(0xf5))&&(_0x1029b0={..._0x1029b0,'restored':{'password':settings[_0x30d080(0x1c2)]==_0x30d080(0xf5),'telegram':settings[_0x30d080(0x1ef)]==_0x30d080(0xf5)}}),_0x1029b0;}function _0x2487(){const _0x5ae03e=['temp/','getDate','exp','event','stopPolling','title','Restore\x20process\x20aborted','sendPortfolioTelegram','date-fns',':\x20Bot\x20Mgr\x20>\x20','Notifications\x20disabled','version','output-001.log','min','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','2WDqMnQ','publicKey','forEach','parse','disconnect','1518714bUdiJC','5xiSlAE','lastmsgemitted','handshake','get-logs','2FA\x20login\x20token\x20generated','showname','reason','init','secret','show-config','request','Failed\x20to\x20download\x20','getTime','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','botmanager','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','rmSync','getMonth','randomFillSync','Alerts','remoteAddress','any','whitelist','store-configuration','30\x20min','verify','uuid','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','toString','tkn','resetHistory','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','yes','Bot\x20','temporary\x20token\x20generated','status','/:bot/support','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','inherit','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','endsWith','/:bot/configuration',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','exec','92008dDceyV','accept','clientip','\x20>\x20','send','started','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','\x20mode','show','Unauthorized\x20attempt\x20to\x20store\x20configuration','backup-full.zip','cloneDeep','from','live','join','enabled','blacklist','decrypt','2FA','version.json','storeConfiguration','createWriteStream','answerCallbackQuery','showConfig','logs','argv','(((.+)+)+)+$','bb-settings.json','node-telegram-bot-api','Orders','temporary\x20access\x20rejected','Ok,\x20will\x20send\x20order\x20notifications\x20only','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','2FA\x20login\x20required','Restore\x20backup\x20file\x20','Starting\x20bot\x20|\x20Bot\x20','constructor','botname','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Error\x20while\x20deleting\x20config\x20files:\x20','lastmsgtelegram','Unauthorized\x20attempt\x20to\x20get\x20messages','\x20|\x20client:\x20...','mtime','format','unlinkSync','3000','sign','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','No\x20authentication\x20token','mkdirSync','node-zip','args','Restarting\x20Bot\x20','toIPv4MappedAddress','getUTCHours','temporary\x20access\x20timeout','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','statSync','telegrammsg','userid','data','api-eu.mixpanel.com','search','bbUsername','7166357FCIBjn','getFullYear','writeFileSync','get','value','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','restore-backup-file','ipaddr.js','build2','chat','Login\x20rejected','files','clients','kill','Unauthorized\x20login\x20attempt\x20(timeout)','exchange','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reinstall','path','ipc','http','Backup\x20file\x20uploaded','hashSync','::1','timeshift','telegramEvents','***','zip/','/names\x20-\x20show\x20bot\x20names\x0a','orders','sockets','stop','index.html','remove','conn','loginRequired','hybrid-crypto-js','apiKey','length','toIPv4Address','/status\x20-\x20show\x20bot(s)\x20status\x0a','cancel-loading','/help\x20-\x20show\x20available\x20commands\x0a','Notifications\x20enabled','function','initclient','running','/:bot/performance','Notifications\x20disabled\x0a','48RvOqZo','getHours','telegramUsername','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/:bot/history','sendMetricsTelegram','jsonwebtoken','manual','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','getSeconds','temporaryAccessAllowed','then','logged\x20out','polling_error','store-settings','sortBy','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','get-starting-balances','keys','build','file','createServer','new','access','telegramEnabled','apiSecret','download','padStart','NTBA_FIX_319','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','messages','push','login\x20token\x20generated','disabled','Notifications\x20enabled\x0a','port','emitHistory','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','cancelLoading','debug','223132yFOMsS','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','deleteHistoryAlerts','Unauthorized\x20attempt\x20to\x20download\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','onText','toggle-bot-mode','startsWith','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','kind','log','10YImnUC','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','sort','alerts','backup/','defaults','delete-bot','sha256','<b>Balance\x20Bot\x20Status:</b>\x0a','readdirSync','timestamp','server','.zip','RSA-OAEP','$1_$2_$3','delete-alerts','headers','reset-password','sendMessage','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Password\x20reset\x20rejected','Login\x20accepted','test','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','/:bot/portfolio','place-order','entries','bbvReceive','find','0.0.0','notification','getPortfolio','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','post','Restoring\x20bot(s)\x20from\x20backup','new-disabled','Logged\x20out\x20user\x20...','backup','/:bot','confirm-message','Unauthorized\x20attempt\x20to\x20confirm\x20message','invalid\x20credentials','Invalid\x20authentication\x20token\x20(2)','simple','expiry','pidRefreshToken','privateKey','temporary\x20access\x20not\x20allowed','-performance.json','Unauthorized\x20attempt\x20to\x20get\x20events','Markdown','set','1917168MfNNeA','\x20minutes','\x20|\x20','login\x20required','login\x20token\x20valid','bot','reject','add','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','password','split','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','use','get-backup-files','bots','exit','/enable\x20-\x20enable\x20notifications\x0a','Notifications\x20types:\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','404\x20Not\x20Found','isDirectory','HTML','output-002.log','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Server','latestversion','update','socket','logs/',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','includes','Starting\x20new\x20bot\x20|\x20Bot\x20','getMinutes','store-headless','************','once','Unauthorized\x20attempt\x20to\x20show\x20configuration','<b>Telegram\x20Bot\x20Status:</b>\x0a','Access\x20enabled\x20for\x20','telegramChatId','lowdb','Backup\x20file\x20unzipped\x20and\x20stored','callback_query','copyFileSync','\x20to\x20','type','track','*$1*','headless','auto','all','telegram2FaApproval','stopped','Disabled\x20Bot\x20','/on\x20-\x20start\x20bot(s)\x0a','env','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Starting\x20Balance\x20Bot\x20update','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','onepagemode','listen','placeOrder','settings','apply','filter','slice','compareSync','user','Unauthorized\x20attempt\x20to\x20update\x20bot','Idling\x20bot\x20\x20\x20|\x20Bot\x20','/off\x20-\x20stop\x20bot(s)\x0a','config/','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','-----------------------------------------------------------------------------------','hasOwnProperty','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','bbPassword','</b>\x20?','All\x20bots','message','reload','existsSync','f2aRequired','reinstall-bb','backup-full','/:bot/coins','bb/','Invalid\x20Telegram\x20token','connected','5\x20min','warning','settings.','DEFLATE','Unauthorized\x20attempt\x20to\x20log\x20out','get-portfolio','\x20(1)','login','bot.js','Yes','crypto','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','/disable\x20-\x20disable\x20notifications\x0a','bot-','uncaughtException','Token\x20blacklisted','backup-full@','getStartingBalances','storeFiat','removeListener','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Error:\x20Invalid\x20argument\x20','restart','match','allow','41605zxkdhG','isIPv4MappedAddress','express-fileupload','assign','stringify','6b67f3d61ee94b8f5c80b4affef4c4d9','catch','telegramToken','update-bb','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20alert\x20notifications\x20only','2FA\x20required','telegramIpApproval','child_process','map','success','-config.json','size','lowdb/adapters/FileSync','readFileSync','No\x20bots\x20running\x20right\x20now','error','Bot\x20Mgr\x20>\x20','number','uuid-random','Unauthorized\x20attempt\x20to\x20delete\x20alerts','secure','update-bot','bbvNew','Starting\x20Balance\x20Bot\x20','write','emit','botID','\x20(2)','bb-secure.json','hex','backupfile','mode','name','Unauthorized\x20attempt\x20to\x20update\x20settings','backup-files','File\x20uploaded','sendFile','pidExpireLogin','ipv6','2FA\x20login\x20rejected','::ffff:127.0.0.1','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','https://api.ipify.org?format=json','username','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','output-003.log','telegram','static','get-messages','full','356781XlFyvH','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','removeAllListeners','token','Invalid\x20authentication\x20token\x20(1)','store'];_0x2487=function(){return _0x5ae03e;};return _0x2487();}async function updateBB(_0x48b70c){const _0x5143fe=_0x231df8;await backupConfigFiles(),installingUpdate=!![],config[_0x5143fe(0x238)](_0x498bb8=>{restartBot(_0x498bb8['botID']);}),logger[_0x5143fe(0x133)](_0x5143fe(0x205)+_0x48b70c);if(_0x48b70c==_0x5143fe(0x18e))process[_0x5143fe(0x26d)]({'update':!![]},_0x53128a=>{});else _0x48b70c==_0x5143fe(0xec)&&process[_0x5143fe(0x26d)]({'reinstall':!![]},_0x3ccf3d=>{});}function startBot(_0x5780db,_0x185f15,_0x10480d){const _0x4d873a=_0x231df8;if(debugging)_0x5780db[_0x4d873a(0x12b)]('-d');let _0x26ca79=![];const _0x186348=_0x5780db[0x0];_0x185f15={..._0x185f15,'stdio':[_0x4d873a(0x263),_0x4d873a(0x263),_0x4d873a(0x263),_0x4d873a(0xee)]},pid[_0x186348]=childProcess['fork'](botfile,_0x5780db,_0x185f15),pid[_0x186348]['on'](_0x4d873a(0x1c5),_0x5bc630=>{const _0x171d77=_0x4d873a;switch(Object[_0x171d77(0x11e)](_0x5bc630)[0x0]){case'botname':updateBotName(_0x186348,_0x5bc630[_0x171d77(0x28e)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x186348,_0x5bc630[_0x171d77(0x260)]);break;case _0x171d77(0x276):updateLive(_0x186348,_0x5bc630[_0x171d77(0x276)]);break;case _0x171d77(0x26e):updateLive(_0x186348,_0x5bc630['started']),io['to'](_0x186348)['emit'](_0x171d77(0x260),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x171d77(0xfa):_0x5bc630[_0x171d77(0xfa)]==_0x171d77(0x1e5)&&restartBot(_0x186348);_0x5bc630[_0x171d77(0xfa)]=='kill'&&toggleBot(_0x186348,'disabled',_0x171d77(0x1a8));break;case _0x171d77(0x21d):sendTelegram(_0x186348,_0x5bc630['telegram']);break;case _0x171d77(0xd5):sendTelegramMsg(_0x5bc630[_0x171d77(0xd5)]);break;case _0x171d77(0x107):io['to'](_0x186348)[_0x171d77(0x207)](_0x5bc630['function'],_0x5bc630[_0x171d77(0xce)]);break;}}),pid[_0x186348]['on'](_0x4d873a(0x1fd),function(_0x55def9){if(_0x26ca79)return;_0x26ca79=!![],_0x10480d(_0x55def9);}),pid[_0x186348]['on'](_0x4d873a(0x183),async function(_0x2370c3){const _0x28e5f3=_0x4d873a;if(installingUpdate)return;if(_0x26ca79)return;_0x26ca79=!![],_0x10480d(null);const _0x1924b4=dbConfig['get'](_0x28e5f3(0x182))[_0x28e5f3(0x15c)]({'botID':_0x186348})[_0x28e5f3(0xdf)]();_0x1924b4&&(_0x1924b4[_0x28e5f3(0x260)]==_0x28e5f3(0x278)||_0x1924b4['status']=='new')&&(await sleep(0x3e8),updateLive(_0x186348,_0x28e5f3(0x1a8)),logger[_0x28e5f3(0x220)](_0x28e5f3(0xcf)+_0x186348),startBot([_0x186348,userID],{'cwd':bbpath},function(_0x3d6c39){const _0x48949c=_0x28e5f3;if(_0x3d6c39)logger[_0x48949c(0x220)](_0x3d6c39);}));});}function stopBot(_0x5cd411){const _0x592f6d=_0x231df8;getClientsWithBotID(_0x5cd411)[_0x592f6d(0x238)](_0x115614=>{const _0x2e0d5f=_0x592f6d;getSocket(_0x115614['id'])[_0x2e0d5f(0x23a)](!![]),removeClient(_0x115614['id']);}),pid[_0x5cd411]&&(pid[_0x5cd411][_0x592f6d(0xe8)](),pid[_0x5cd411]=null);}function restartBot(_0x5428e3){const _0x5d9fd0=_0x231df8;if(pid[_0x5428e3])pid[_0x5428e3][_0x5d9fd0(0xe8)]();}function addBot(){const _0x501b79=_0x231df8;let _0x71f2a5;for(let _0xe0110a=0x1;_0xe0110a<0x3e9;_0xe0110a++){_0x71f2a5=_0xe0110a[_0x501b79(0x259)]()[_0x501b79(0x127)](0x3,'0');let _0xc4c278=config[_0x501b79(0x15c)](_0x2d2691=>_0x2d2691[_0x501b79(0x208)]==_0x71f2a5);if(!_0xc4c278)break;}if(_0x71f2a5==='1000'){logger['full']('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x501b79(0x220)](_0x501b79(0x193)+_0x71f2a5),dbConfig[_0x501b79(0xde)](_0x501b79(0x182))[_0x501b79(0x12b)]({'botID':_0x71f2a5,'botname':_0x501b79(0x25e)+_0x71f2a5,'status':_0x501b79(0x122),'live':''})[_0x501b79(0x206)](),startBot([_0x71f2a5,userID],{'cwd':bbpath},function(_0x448fcb){const _0x19aac6=_0x501b79;if(_0x448fcb)logger[_0x19aac6(0x220)](_0x448fcb);}),config=getConfiguration(),io['to'](_0x501b79(0x24b))[_0x501b79(0x207)](_0x501b79(0x182),config),broadcastToBots(_0x501b79(0x182),JSON[_0x501b79(0x1ec)](config));}function _0x1fbb(_0x1e7db5,_0x50fbff){const _0x4ff818=_0x2487();return _0x1fbb=function(_0x6534d6,_0x355114){_0x6534d6=_0x6534d6-0xc9;let _0x24872f=_0x4ff818[_0x6534d6];return _0x24872f;},_0x1fbb(_0x1e7db5,_0x50fbff);}function deleteBot(_0x1dd87e){const _0x307a9c=_0x231df8;getClientsWithBotID(_0x1dd87e)['forEach'](_0xf460e0=>{const _0x960806=_0x1fbb;getSocket(_0xf460e0['id'])[_0x960806(0x23a)](!![]),removeClient(_0xf460e0['id']);}),dbConfig[_0x307a9c(0xde)](_0x307a9c(0x182))[_0x307a9c(0xfc)]({'botID':_0x1dd87e})[_0x307a9c(0x206)](),logger['full']('Deleted\x20Bot\x20'+_0x1dd87e),stopBot(_0x1dd87e);try{if(fs[_0x307a9c(0x1c7)](path['join'](configpath,_0x307a9c(0x1dc)+_0x1dd87e+'-config.json')))fs[_0x307a9c(0x296)](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+_0x307a9c(0x1f8)));if(fs[_0x307a9c(0x1c7)](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+'-events.json')))fs[_0x307a9c(0x296)](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+'-events.json'));if(fs['existsSync'](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+_0x307a9c(0x170))))fs[_0x307a9c(0x296)](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+_0x307a9c(0x170)));if(fs[_0x307a9c(0x1c7)](path[_0x307a9c(0x277)](configpath,_0x307a9c(0x1dc)+_0x1dd87e+'-results.json')))fs[_0x307a9c(0x296)](path[_0x307a9c(0x277)](configpath,'bot-'+_0x1dd87e+'-results.json'));}catch(_0x3be753){if(_0x3be753)logger['full'](_0x307a9c(0x290),_0x3be753);}config=getConfiguration(),io['to'](_0x307a9c(0x24b))[_0x307a9c(0x207)](_0x307a9c(0x182),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x12a9a5,_0x38c6f8,_0x466460){const _0x208733=_0x231df8;dbConfig[_0x208733(0xde)](_0x208733(0x182))['find']({'botID':_0x12a9a5})[_0x208733(0x1eb)]({'status':_0x38c6f8})[_0x208733(0x1eb)]({'live':_0x466460})[_0x208733(0x206)]();if(_0x38c6f8==_0x208733(0x278)||_0x38c6f8==_0x208733(0x122))logger[_0x208733(0x220)]('Enabled\x20Bot\x20'+_0x12a9a5),startBot([_0x12a9a5,userID],{'cwd':bbpath},function(_0x55a7a9){const _0x57472d=_0x208733;if(_0x55a7a9)logger[_0x57472d(0x220)](_0x55a7a9);});else(_0x38c6f8=='disabled'||_0x38c6f8==_0x208733(0x163))&&(logger[_0x208733(0x220)](_0x208733(0x1a9)+_0x12a9a5),stopBot(_0x12a9a5));config=getConfiguration(),io['to'](_0x208733(0x24b))[_0x208733(0x207)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleStatus(_0x47f20c){const _0x210258=_0x231df8;let _0x3fd52d=dbConfig[_0x210258(0xde)]('bots')[_0x210258(0x15c)]({'botID':_0x47f20c})[_0x210258(0xdf)](),_0xde675d;if(_0x3fd52d[_0x210258(0x260)]===_0x210258(0x278))_0xde675d=_0x210258(0x12d);else{if(_0x3fd52d[_0x210258(0x260)]===_0x210258(0x122))_0xde675d=_0x210258(0x163);else{if(_0x3fd52d[_0x210258(0x260)]===_0x210258(0x163))_0xde675d='new';else{if(_0x3fd52d[_0x210258(0x260)]===_0x210258(0x12d))_0xde675d=_0x210258(0x278);}}}return _0xde675d;}function updateStatus(_0x5ea708,_0x52a1af){const _0x6e6b92=_0x231df8;dbConfig[_0x6e6b92(0xde)]('bots')[_0x6e6b92(0x15c)]({'botID':_0x5ea708})[_0x6e6b92(0x1eb)]({'status':_0x52a1af})[_0x6e6b92(0x206)](),config=getConfiguration(),io['to'](_0x6e6b92(0x24b))[_0x6e6b92(0x207)]('bots',config),broadcastToBots(_0x6e6b92(0x182),JSON[_0x6e6b92(0x1ec)](config));}function updateLive(_0x499002,_0x21ab50){const _0x2af464=_0x231df8;dbConfig[_0x2af464(0xde)](_0x2af464(0x182))['find']({'botID':_0x499002})[_0x2af464(0x1eb)]({'live':_0x21ab50})[_0x2af464(0x206)](),config=getConfiguration(),io['to'](_0x2af464(0x24b))[_0x2af464(0x207)](_0x2af464(0x182),config),broadcastToBots(_0x2af464(0x182),JSON[_0x2af464(0x1ec)](config));}function updateBotName(_0x2cd546,_0x31945c){const _0x349f3e=_0x231df8;dbConfig[_0x349f3e(0xde)](_0x349f3e(0x182))[_0x349f3e(0x15c)]({'botID':_0x2cd546})[_0x349f3e(0x1eb)]({'botname':_0x31945c})[_0x349f3e(0x206)](),config=getConfiguration(),io['to'](_0x349f3e(0x24b))[_0x349f3e(0x207)](_0x349f3e(0x182),config),broadcastToBots('bots',JSON[_0x349f3e(0x1ec)](config));}function updateBotManager(){const _0x22ab69=_0x231df8;config=getConfiguration(),io['to'](_0x22ab69(0x24b))['emit'](_0x22ab69(0x182),config),broadcastToBots(_0x22ab69(0x182),JSON[_0x22ab69(0x1ec)](config));}function toggleBotMode(_0x22ec67){const _0x379509=_0x231df8;if(pid[_0x22ec67])pid[_0x22ec67]['send']({'function':'toggleBotMode','args':null});else{const _0x10e907=configpath+_0x379509(0x1dc)+_0x22ec67+_0x379509(0x1f8),_0xebfc3c=fs['readFileSync'](_0x10e907),_0x16740a=JSON[_0x379509(0x239)](_0xebfc3c),_0x3a2d87=_0x16740a[_0x379509(0x179)][0x0][_0x379509(0x1a4)];_0x16740a[_0x379509(0x179)][0x0][_0x379509(0x1a4)]=!_0x3a2d87;const _0x9ae0e8=JSON[_0x379509(0x1ec)](_0x16740a,null,0x2);fs['writeFileSync'](_0x10e907,_0x9ae0e8),config=getConfiguration(),io['to'](_0x379509(0x24b))[_0x379509(0x207)]('bots',config),broadcastToBots(_0x379509(0x182),JSON['stringify'](config));}}function telegramError(_0x3f0dd7){const _0x3e572a=_0x231df8;logger['simple'](getTimeStamp()+_0x3e572a(0x267));}function validateTelegram(_0x303b3a){const _0xc5260d=_0x231df8;if(_0x303b3a[_0xc5260d(0x275)][_0xc5260d(0x219)]!=settings[_0xc5260d(0x10e)]&&'@'+_0x303b3a[_0xc5260d(0x275)][_0xc5260d(0x219)]!=settings[_0xc5260d(0x10e)])return tgBot[_0xc5260d(0x152)](_0x303b3a[_0xc5260d(0xe4)]['id'],_0xc5260d(0x17f),{'parse_mode':_0xc5260d(0x189)})[_0xc5260d(0x1ee)](_0xe4bad2=>{telegramError(_0xe4bad2);}),![];return!![];}async function initTelegram(){const _0x2cf2ea=_0x231df8;if(tgBot)tgBot[_0x2cf2ea(0x22b)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2cf2ea(0x1ef)],{'polling':!![]});let _0x518cee=_0x2cf2ea(0x1bd);_0x518cee+='\x0a',_0x518cee+=_0x2cf2ea(0x184),_0x518cee+=_0x2cf2ea(0x1db),_0x518cee+=_0x2cf2ea(0x18b),_0x518cee+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x518cee+=_0x2cf2ea(0x1aa),_0x518cee+=_0x2cf2ea(0x1ba),_0x518cee+=_0x2cf2ea(0x157),_0x518cee+=_0x2cf2ea(0xf7),_0x518cee+=_0x2cf2ea(0x103),_0x518cee+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x518cee+=_0x2cf2ea(0x24a),_0x518cee+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x518cee+=_0x2cf2ea(0x235),_0x518cee+=_0x2cf2ea(0x105);let _0x319908='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x319908+='\x0a',_0x319908+=_0x518cee,tgBot[_0x2cf2ea(0x139)](/\/start/,_0x2269e8=>{const _0x668ff3=_0x2cf2ea;if(!validateTelegram(_0x2269e8))return;if(settings['telegramChatId']!=_0x2269e8[_0x668ff3(0xe4)]['id'])updateSetting(_0x668ff3(0x19b),_0x2269e8[_0x668ff3(0xe4)]['id']);updateSetting(_0x668ff3(0x124),!![]),tgBot['sendMessage'](_0x2269e8['chat']['id'],_0x319908)[_0x668ff3(0x1ee)](_0x56c137=>{telegramError(_0x56c137);});}),tgBot[_0x2cf2ea(0x139)](/\/enable/,_0x3a6221=>{const _0x1ea582=_0x2cf2ea;if(!validateTelegram(_0x3a6221))return;if(settings['telegramChatId']!=_0x3a6221[_0x1ea582(0xe4)]['id'])updateSetting('telegramChatId',_0x3a6221[_0x1ea582(0xe4)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x1ea582(0x152)](_0x3a6221[_0x1ea582(0xe4)]['id'],_0x1ea582(0x106))['catch'](_0x1582b6=>{telegramError(_0x1582b6);});}),tgBot[_0x2cf2ea(0x139)](/\/config/,async _0x19d789=>{const _0x25ee98=_0x2cf2ea;if(!validateTelegram(_0x19d789))return;tgBot['removeListener'](_0x25ee98(0x19e)),tgBot[_0x25ee98(0x152)](_0x19d789[_0x25ee98(0xe4)]['id'],_0x25ee98(0x262),{'reply_markup':{'inline_keyboard':[[{'text':_0x25ee98(0x286),'callback_data':_0x25ee98(0xf8)},{'text':_0x25ee98(0x250),'callback_data':_0x25ee98(0x143)},{'text':'All','callback_data':_0x25ee98(0x1a6)}]]}})[_0x25ee98(0x1ee)](_0x33fab5=>{telegramError(_0x33fab5);}),tgBot['on'](_0x25ee98(0x19e),async _0x5958f2=>{const _0x1c9e82=_0x25ee98,_0x43b129=_0x5958f2[_0x1c9e82(0xd7)],_0x31c65a=_0x5958f2[_0x1c9e82(0x1c5)];tgBot[_0x1c9e82(0x27f)](_0x5958f2['id'])['then'](async()=>{const _0x1710b5=_0x1c9e82;_0x43b129==_0x1710b5(0xf8)&&(updateSetting(_0x1710b5(0xf4),_0x1710b5(0xf8)),updateSetting('telegramEnabled',!![]),await tgBot[_0x1710b5(0x152)](_0x31c65a[_0x1710b5(0xe4)]['id'],_0x1710b5(0x288))[_0x1710b5(0x1ee)](_0xff36d4=>{telegramError(_0xff36d4);}));_0x43b129==_0x1710b5(0x143)&&(updateSetting('telegramEvents',_0x1710b5(0x143)),updateSetting(_0x1710b5(0x124),!![]),await tgBot['sendMessage'](_0x31c65a[_0x1710b5(0xe4)]['id'],_0x1710b5(0x1f2))[_0x1710b5(0x1ee)](_0x1657ca=>{telegramError(_0x1657ca);}));_0x43b129==_0x1710b5(0x1a6)&&(updateSetting(_0x1710b5(0xf4),_0x1710b5(0x1a6)),updateSetting(_0x1710b5(0x124),!![]),await tgBot[_0x1710b5(0x152)](_0x31c65a[_0x1710b5(0xe4)]['id'],_0x1710b5(0x217))['catch'](_0x48cc45=>{telegramError(_0x48cc45);}));if(!settings['telegramChatId'])tgBot[_0x1710b5(0x152)](_0x31c65a['chat']['id'],_0x1710b5(0x21a))['catch'](_0x957378=>{telegramError(_0x957378);});}),tgBot[_0x1c9e82(0x1e2)](_0x1c9e82(0x19e));});}),tgBot[_0x2cf2ea(0x139)](/\/status/,_0x120552=>{const _0x1c5735=_0x2cf2ea;if(!validateTelegram(_0x120552))return;const _0x4388d8=getBotsWithMode();let _0x1060bf=_0x1c5735(0x148);config[_0x1c5735(0x238)](_0x13a105=>{const _0x4453fa=_0x1c5735,_0x5cb6ff=_0x4388d8[_0x4453fa(0x15c)](_0x11f219=>_0x11f219[_0x4453fa(0x208)]==_0x13a105[_0x4453fa(0x208)])[_0x4453fa(0x20d)];_0x1060bf+='Bot\x20'+_0x13a105[_0x4453fa(0x208)]+':\x20'+_0x13a105[_0x4453fa(0x260)]+'\x20|\x20'+_0x5cb6ff+_0x4453fa(0x176)+_0x13a105['live']+'\x0a';}),_0x1060bf+='\x0a',_0x1060bf+=_0x1c5735(0x199),_0x1060bf+=!settings[_0x1c5735(0x124)]?_0x1c5735(0x10b):_0x1c5735(0x12e),_0x1060bf+=settings[_0x1c5735(0x124)]?settings[_0x1c5735(0xf4)]=='all'?_0x1c5735(0x249):_0x1c5735(0x185)+settings[_0x1c5735(0xf4)]+'\x20only\x0a':'',tgBot[_0x1c5735(0x152)](_0x120552[_0x1c5735(0xe4)]['id'],_0x1060bf,{'parse_mode':_0x1c5735(0x189)})['catch'](_0x25f333=>{telegramError(_0x25f333);});}),tgBot[_0x2cf2ea(0x139)](/\/restart/,_0x521465=>{const _0x5d0d07=_0x2cf2ea;if(!validateTelegram(_0x521465))return;tgBot[_0x5d0d07(0x1e2)](_0x5d0d07(0x19e));const _0x1805be=getEnabledBots();if(_0x1805be[_0x5d0d07(0x101)]==0x0)tgBot['sendMessage'](_0x521465['chat']['id'],_0x5d0d07(0x1fc))[_0x5d0d07(0x1ee)](_0xa5e18e=>{telegramError(_0xa5e18e);});else{if(_0x1805be[_0x5d0d07(0x101)]>0x1)_0x1805be[_0x5d0d07(0x12b)]({'botID':_0x5d0d07(0x1a6)});let _0x935e30=[],_0x4ab34f=[];const _0xcfca5b=_0x1805be[_0x5d0d07(0x101)]%0x4==0x0||_0x1805be[_0x5d0d07(0x101)]%0x4==0x3||_0x1805be[_0x5d0d07(0x101)]%0x3==0x1?0x4:0x3;let _0x4a8806=0x0;_0x1805be['forEach']((_0x3b1f04,_0x425955)=>{const _0x31a40e=_0x5d0d07;if(_0x425955%_0xcfca5b==0x0)_0x4ab34f=[];_0x4ab34f[_0x31a40e(0x12b)]({'text':_0x3b1f04[_0x31a40e(0x208)]==_0x31a40e(0x1a6)?_0x31a40e(0x1c4):'Bot\x20'+_0x3b1f04[_0x31a40e(0x208)],'callback_data':_0x3b1f04[_0x31a40e(0x208)]}),_0x425955%_0xcfca5b==0x0&&(_0x935e30[_0x4a8806]=_0x4ab34f,_0x4a8806++);}),tgBot['sendMessage'](_0x521465[_0x5d0d07(0xe4)]['id'],_0x5d0d07(0x13c),{'reply_markup':{'inline_keyboard':_0x935e30}})['catch'](_0x2945b5=>{telegramError(_0x2945b5);}),tgBot['on'](_0x5d0d07(0x19e),async _0x8b989b=>{const _0x438030=_0x5d0d07,_0x26ccd5=_0x8b989b[_0x438030(0xd7)],_0x1edcff=_0x8b989b['message'];tgBot[_0x438030(0x27f)](_0x8b989b['id'])['then'](async()=>{const _0x443197=_0x438030;_0x26ccd5==_0x443197(0x1a6)?config[_0x443197(0x238)](_0x1583ed=>{const _0x47d2f3=_0x443197;restartBot(_0x1583ed[_0x47d2f3(0x208)]);}):restartBot(_0x26ccd5);}),tgBot[_0x438030(0x1e2)](_0x438030(0x19e));});}}),tgBot['onText'](/\/on/,_0x241c57=>{const _0x34090b=_0x2cf2ea;if(!validateTelegram(_0x241c57))return;tgBot['removeListener'](_0x34090b(0x19e));const _0x1ef8fd=getDisabledBots();if(_0x1ef8fd['length']==0x0)tgBot[_0x34090b(0x152)](_0x241c57[_0x34090b(0xe4)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x34090b(0x1ee)](_0x49f63d=>{telegramError(_0x49f63d);});else{if(_0x1ef8fd[_0x34090b(0x101)]>0x1)_0x1ef8fd[_0x34090b(0x12b)]({'botID':_0x34090b(0x1a6)});let _0x3eff36=[],_0x1e89d9=[];const _0x1923ea=_0x1ef8fd[_0x34090b(0x101)]%0x4==0x0||_0x1ef8fd[_0x34090b(0x101)]%0x4==0x3||_0x1ef8fd[_0x34090b(0x101)]%0x3==0x1?0x4:0x3;let _0x3a5b9b=0x0;_0x1ef8fd[_0x34090b(0x238)]((_0xbc6b43,_0x1c0429)=>{const _0x4adcab=_0x34090b;if(_0x1c0429%_0x1923ea==0x0)_0x1e89d9=[];_0x1e89d9['push']({'text':_0xbc6b43[_0x4adcab(0x208)]==_0x4adcab(0x1a6)?_0x4adcab(0x1c4):_0x4adcab(0x25e)+_0xbc6b43[_0x4adcab(0x208)],'callback_data':_0xbc6b43['botID']}),_0x1c0429%_0x1923ea==0x0&&(_0x3eff36[_0x3a5b9b]=_0x1e89d9,_0x3a5b9b++);}),tgBot[_0x34090b(0x152)](_0x241c57['chat']['id'],_0x34090b(0xeb),{'reply_markup':{'inline_keyboard':_0x3eff36}})['catch'](_0x356be5=>{telegramError(_0x356be5);}),tgBot['on'](_0x34090b(0x19e),async _0xbbcdaf=>{const _0x134af1=_0x34090b,_0x5ecfc2=_0xbbcdaf[_0x134af1(0xd7)],_0x3f3ae7=_0xbbcdaf[_0x134af1(0x1c5)];tgBot[_0x134af1(0x27f)](_0xbbcdaf['id'])[_0x134af1(0x117)](async()=>{const _0x340759=_0x134af1;_0x5ecfc2==_0x340759(0x1a6)?(tgBot['sendMessage'](_0x3f3ae7[_0x340759(0xe4)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x340759(0x1ee)](_0xb35a47=>{telegramError(_0xb35a47);}),_0x1ef8fd[_0x340759(0x238)](_0x510101=>{const _0x5d4327=_0x340759;if(_0x510101[_0x5d4327(0x208)]!=_0x5d4327(0x1a6))toggleBot(_0x510101['botID'],toggleStatus(_0x510101[_0x5d4327(0x208)]),'stopped');})):(tgBot['sendMessage'](_0x3f3ae7[_0x340759(0xe4)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5ecfc2)[_0x340759(0x1ee)](_0x2b2d55=>{telegramError(_0x2b2d55);}),toggleBot(_0x5ecfc2,toggleStatus(_0x5ecfc2),'stopped'));}),tgBot['removeListener'](_0x134af1(0x19e));});}}),tgBot[_0x2cf2ea(0x139)](/\/off/,_0x393a72=>{const _0x39258c=_0x2cf2ea;if(!validateTelegram(_0x393a72))return;tgBot[_0x39258c(0x1e2)]('callback_query');const _0x11f2b8=getEnabledBots();if(_0x11f2b8[_0x39258c(0x101)]==0x0)tgBot['sendMessage'](_0x393a72[_0x39258c(0xe4)]['id'],_0x39258c(0x1fc))[_0x39258c(0x1ee)](_0x5dd6e4=>{telegramError(_0x5dd6e4);});else{if(_0x11f2b8['length']>0x1)_0x11f2b8[_0x39258c(0x12b)]({'botID':_0x39258c(0x1a6)});let _0x3c294b=[],_0x265583=[];const _0x1fa578=_0x11f2b8[_0x39258c(0x101)]%0x4==0x0||_0x11f2b8['length']%0x4==0x3||_0x11f2b8[_0x39258c(0x101)]%0x3==0x1?0x4:0x3;let _0xdc3c94=0x0;_0x11f2b8[_0x39258c(0x238)]((_0x1d1edf,_0x22f6d5)=>{const _0x3f1649=_0x39258c;if(_0x22f6d5%_0x1fa578==0x0)_0x265583=[];_0x265583[_0x3f1649(0x12b)]({'text':_0x1d1edf[_0x3f1649(0x208)]=='all'?_0x3f1649(0x1c4):_0x3f1649(0x25e)+_0x1d1edf[_0x3f1649(0x208)],'callback_data':_0x1d1edf[_0x3f1649(0x208)]}),_0x22f6d5%_0x1fa578==0x0&&(_0x3c294b[_0xdc3c94]=_0x265583,_0xdc3c94++);}),tgBot[_0x39258c(0x152)](_0x393a72[_0x39258c(0xe4)]['id'],_0x39258c(0xca),{'reply_markup':{'inline_keyboard':_0x3c294b}})[_0x39258c(0x1ee)](_0xf33580=>{telegramError(_0xf33580);}),tgBot['on']('callback_query',async _0x4d42e8=>{const _0x3e2dda=_0x39258c,_0x4bec4f=_0x4d42e8[_0x3e2dda(0xd7)],_0x3b90ae=_0x4d42e8[_0x3e2dda(0x1c5)];tgBot['answerCallbackQuery'](_0x4d42e8['id'])[_0x3e2dda(0x117)](async()=>{const _0x3cac59=_0x3e2dda;_0x4bec4f=='all'?(tgBot[_0x3cac59(0x152)](_0x3b90ae[_0x3cac59(0xe4)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x3cac59(0x1ee)](_0x9aecf6=>{telegramError(_0x9aecf6);}),_0x11f2b8[_0x3cac59(0x238)](_0x1a7d3b=>{const _0x4eb30d=_0x3cac59;if(_0x1a7d3b[_0x4eb30d(0x208)]!='all')toggleBot(_0x1a7d3b[_0x4eb30d(0x208)],toggleStatus(_0x1a7d3b[_0x4eb30d(0x208)]),'stopped');})):(tgBot[_0x3cac59(0x152)](_0x3b90ae['chat']['id'],_0x3cac59(0x10f)+_0x4bec4f)[_0x3cac59(0x1ee)](_0x5a0acd=>{telegramError(_0x5a0acd);}),toggleBot(_0x4bec4f,toggleStatus(_0x4bec4f),'stopped'));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/metrics/,_0x591798=>{const _0x5cfb33=_0x2cf2ea;if(!validateTelegram(_0x591798))return;tgBot[_0x5cfb33(0x1e2)](_0x5cfb33(0x19e));const _0x581cfd=getEnabledBots();if(_0x581cfd['length']==0x0)tgBot[_0x5cfb33(0x152)](_0x591798[_0x5cfb33(0xe4)]['id'],_0x5cfb33(0x1fc))[_0x5cfb33(0x1ee)](_0x46c1e6=>{telegramError(_0x46c1e6);});else{if(_0x581cfd[_0x5cfb33(0x101)]>0x1){let _0x1724a1=[],_0x2b961b=[];const _0x4c3022=_0x581cfd[_0x5cfb33(0x101)]%0x4==0x0||_0x581cfd[_0x5cfb33(0x101)]%0x4==0x3||_0x581cfd[_0x5cfb33(0x101)]%0x3==0x1?0x4:0x3;let _0x18864c=0x0;_0x581cfd[_0x5cfb33(0x238)]((_0x46ef60,_0x4a5b43)=>{const _0x385cb6=_0x5cfb33;if(_0x4a5b43%_0x4c3022==0x0)_0x2b961b=[];_0x2b961b[_0x385cb6(0x12b)]({'text':_0x385cb6(0x25e)+_0x46ef60[_0x385cb6(0x208)],'callback_data':_0x46ef60[_0x385cb6(0x208)]}),_0x4a5b43%_0x4c3022==0x0&&(_0x1724a1[_0x18864c]=_0x2b961b,_0x18864c++);}),tgBot[_0x5cfb33(0x152)](_0x591798[_0x5cfb33(0xe4)]['id'],_0x5cfb33(0x114),{'reply_markup':{'inline_keyboard':_0x1724a1}})['catch'](_0x2794b6=>{telegramError(_0x2794b6);}),tgBot['on'](_0x5cfb33(0x19e),async _0x135f8a=>{const _0x325fa9=_0x5cfb33,_0x4601f0=_0x135f8a[_0x325fa9(0xd7)],_0xe2488a=_0x135f8a[_0x325fa9(0x1c5)];tgBot[_0x325fa9(0x27f)](_0x135f8a['id'])[_0x325fa9(0x117)](async()=>{const _0x39d43e=_0x325fa9;if(pid[_0x4601f0])pid[_0x4601f0][_0x39d43e(0x26d)]({'function':_0x39d43e(0x111),'args':null});}),tgBot[_0x325fa9(0x1e2)](_0x325fa9(0x19e));});}else{const _0x69f498=_0x581cfd[0x0][_0x5cfb33(0x208)];if(pid[_0x69f498])pid[_0x69f498]['send']({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x2cf2ea(0x139)](/\/portfolio/,_0x4d02b0=>{const _0x3fb56c=_0x2cf2ea;if(!validateTelegram(_0x4d02b0))return;tgBot[_0x3fb56c(0x1e2)](_0x3fb56c(0x19e));const _0x41c990=getEnabledBots();if(_0x41c990[_0x3fb56c(0x101)]==0x0)tgBot['sendMessage'](_0x4d02b0[_0x3fb56c(0xe4)]['id'],_0x3fb56c(0x1fc))[_0x3fb56c(0x1ee)](_0x17b15e=>{telegramError(_0x17b15e);});else{if(_0x41c990[_0x3fb56c(0x101)]>0x1){let _0x2d5738=[],_0x49d64a=[];const _0x463095=_0x41c990[_0x3fb56c(0x101)]%0x4==0x0||_0x41c990[_0x3fb56c(0x101)]%0x4==0x3||_0x41c990['length']%0x3==0x1?0x4:0x3;let _0x19e4d3=0x0;_0x41c990['forEach']((_0x23a477,_0x410cea)=>{const _0x40ab19=_0x3fb56c;if(_0x410cea%_0x463095==0x0)_0x49d64a=[];_0x49d64a[_0x40ab19(0x12b)]({'text':_0x40ab19(0x25e)+_0x23a477[_0x40ab19(0x208)],'callback_data':_0x23a477[_0x40ab19(0x208)]}),_0x410cea%_0x463095==0x0&&(_0x2d5738[_0x19e4d3]=_0x49d64a,_0x19e4d3++);}),tgBot[_0x3fb56c(0x152)](_0x4d02b0[_0x3fb56c(0xe4)]['id'],_0x3fb56c(0x21b),{'reply_markup':{'inline_keyboard':_0x2d5738}})[_0x3fb56c(0x1ee)](_0x495a89=>{telegramError(_0x495a89);}),tgBot['on'](_0x3fb56c(0x19e),async _0x4f13a0=>{const _0x11a6f4=_0x3fb56c,_0x3e3ca2=_0x4f13a0[_0x11a6f4(0xd7)],_0xea1c2c=_0x4f13a0[_0x11a6f4(0x1c5)];tgBot['answerCallbackQuery'](_0x4f13a0['id'])[_0x11a6f4(0x117)](async()=>{const _0x20aae6=_0x11a6f4;if(pid[_0x3e3ca2])pid[_0x3e3ca2][_0x20aae6(0x26d)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x11a6f4(0x1e2)]('callback_query');});}else{const _0x51a0cf=_0x41c990[0x0][_0x3fb56c(0x208)];if(pid[_0x51a0cf])pid[_0x51a0cf][_0x3fb56c(0x26d)]({'function':_0x3fb56c(0x22e),'args':null});}}}),tgBot[_0x2cf2ea(0x139)](/\/update/,async _0x356ef6=>{const _0x4dd2f8=_0x2cf2ea;if(!validateTelegram(_0x356ef6))return;tgBot[_0x4dd2f8(0x1e2)](_0x4dd2f8(0x19e)),await getMessages();if(!updateAvailable)tgBot[_0x4dd2f8(0x152)](_0x356ef6[_0x4dd2f8(0xe4)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')['catch'](_0x4b4bba=>{telegramError(_0x4b4bba);});else!validInstallation?tgBot[_0x4dd2f8(0x152)](_0x356ef6['chat']['id'],_0x4dd2f8(0x264))[_0x4dd2f8(0x1ee)](_0x4a3eee=>{telegramError(_0x4a3eee);}):(tgBot[_0x4dd2f8(0x152)](_0x356ef6[_0x4dd2f8(0xe4)]['id'],_0x4dd2f8(0x160),{'reply_markup':{'inline_keyboard':[[{'text':_0x4dd2f8(0x1d8),'callback_data':_0x4dd2f8(0x25d)},{'text':'No','callback_data':'no'}]]}})[_0x4dd2f8(0x1ee)](_0x555fcd=>{telegramError(_0x555fcd);}),tgBot['on'](_0x4dd2f8(0x19e),async _0x1a0118=>{const _0x1b4efb=_0x4dd2f8,_0x1c5e73=_0x1a0118['data'],_0x55dc75=_0x1a0118[_0x1b4efb(0x1c5)];tgBot['answerCallbackQuery'](_0x1a0118['id'])[_0x1b4efb(0x117)](async()=>{const _0x578076=_0x1b4efb;_0x1c5e73=='yes'&&(await tgBot[_0x578076(0x152)](_0x55dc75[_0x578076(0xe4)]['id'],_0x578076(0x1ad))[_0x578076(0x1ee)](_0x370c1d=>{telegramError(_0x370c1d);}),updateBB(_0x578076(0x18e))),_0x1c5e73=='no'&&await tgBot[_0x578076(0x152)](_0x55dc75[_0x578076(0xe4)]['id'],_0x578076(0x1ac))[_0x578076(0x1ee)](_0x277afa=>{telegramError(_0x277afa);});}),tgBot[_0x1b4efb(0x1e2)](_0x1b4efb(0x19e));}));}),tgBot[_0x2cf2ea(0x139)](/\/reinstall/,async _0x599db3=>{const _0x13ed2d=_0x2cf2ea;if(!validateTelegram(_0x599db3))return;tgBot[_0x13ed2d(0x1e2)](_0x13ed2d(0x19e)),!validInstallation?tgBot[_0x13ed2d(0x152)](_0x599db3['chat']['id'],_0x13ed2d(0x289))[_0x13ed2d(0x1ee)](_0x349a4b=>{telegramError(_0x349a4b);}):(tgBot['sendMessage'](_0x599db3['chat']['id'],_0x13ed2d(0x1bc),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x13ed2d(0x25d)},{'text':'No','callback_data':'no'}]]}})[_0x13ed2d(0x1ee)](_0x244235=>{telegramError(_0x244235);}),tgBot['on'](_0x13ed2d(0x19e),async _0xf4de7d=>{const _0x452f54=_0x13ed2d,_0x474093=_0xf4de7d[_0x452f54(0xd7)],_0x3f6e16=_0xf4de7d['message'];tgBot[_0x452f54(0x27f)](_0xf4de7d['id'])[_0x452f54(0x117)](async()=>{const _0x353d6e=_0x452f54;_0x474093==_0x353d6e(0x25d)&&(await tgBot['sendMessage'](_0x3f6e16[_0x353d6e(0xe4)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x353d6e(0x1ee)](_0x14e95f=>{telegramError(_0x14e95f);}),updateBB('reinstall')),_0x474093=='no'&&await tgBot['sendMessage'](_0x3f6e16[_0x353d6e(0xe4)]['id'],_0x353d6e(0x258))['catch'](_0x23b3b9=>{telegramError(_0x23b3b9);});}),tgBot[_0x452f54(0x1e2)]('callback_query');}));}),tgBot[_0x2cf2ea(0x139)](/\/toggle/,_0x38a906=>{const _0x36bbba=_0x2cf2ea;if(!validateTelegram(_0x38a906))return;tgBot['removeListener'](_0x36bbba(0x19e));const _0x47a5c3=getBotsWithMode();if(_0x47a5c3['length']==0x0)tgBot[_0x36bbba(0x152)](_0x38a906[_0x36bbba(0xe4)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x36bbba(0x1ee)](_0x5177c8=>{telegramError(_0x5177c8);});else{let _0x5a8365=[],_0x3a1ed1=[];const _0x2604b2=0x2;let _0x5020a9=0x0;_0x47a5c3[_0x36bbba(0x238)]((_0x6d4380,_0x272be4)=>{const _0x21f8c2=_0x36bbba;if(_0x272be4%_0x2604b2==0x0)_0x3a1ed1=[];_0x3a1ed1[_0x21f8c2(0x12b)]({'text':_0x21f8c2(0x25e)+_0x6d4380[_0x21f8c2(0x208)]+'\x20('+_0x6d4380[_0x21f8c2(0x20d)]+')','callback_data':_0x6d4380[_0x21f8c2(0x208)]}),_0x272be4%_0x2604b2==0x0&&(_0x5a8365[_0x5020a9]=_0x3a1ed1,_0x5020a9++);}),tgBot[_0x36bbba(0x152)](_0x38a906['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x5a8365}})[_0x36bbba(0x1ee)](_0x1f05b3=>{telegramError(_0x1f05b3);}),tgBot['on'](_0x36bbba(0x19e),async _0x1b984c=>{const _0x16dac9=_0x36bbba,_0x49b7f3=_0x1b984c['data'],_0xa8ca30=_0x1b984c['message'];tgBot[_0x16dac9(0x27f)](_0x1b984c['id'])[_0x16dac9(0x117)](async()=>{const _0x44fb0a=_0x16dac9,_0xb94a51=_0x47a5c3[_0x44fb0a(0x15c)](_0x4e3e5d=>_0x4e3e5d[_0x44fb0a(0x208)]==_0x49b7f3),_0x5b11fd=_0xb94a51['mode']=='auto'?_0x44fb0a(0x113):'auto';tgBot[_0x44fb0a(0x152)](_0xa8ca30[_0x44fb0a(0xe4)]['id'],_0x44fb0a(0x138)+_0x49b7f3+_0x44fb0a(0x1a0)+_0x5b11fd+_0x44fb0a(0x270))[_0x44fb0a(0x1ee)](_0x16f984=>{telegramError(_0x16f984);}),toggleBotMode(_0x49b7f3);}),tgBot[_0x16dac9(0x1e2)](_0x16dac9(0x19e));});}}),tgBot['onText'](/\/names/,_0x1941e2=>{const _0x4c1d88=_0x2cf2ea;if(!validateTelegram(_0x1941e2))return;let _0x27c040='';config[_0x4c1d88(0x238)](_0x391a94=>{const _0x4e61d9=_0x4c1d88;_0x27c040+=_0x4e61d9(0x25e)+_0x391a94['botID']+':\x20'+_0x391a94[_0x4e61d9(0x28e)]+'\x0a';}),tgBot[_0x4c1d88(0x152)](_0x1941e2[_0x4c1d88(0xe4)]['id'],_0x27c040,{'parse_mode':_0x4c1d88(0x189)})[_0x4c1d88(0x1ee)](_0xc48946=>{telegramError(_0xc48946);});}),tgBot[_0x2cf2ea(0x139)](/\/disable/,_0x56b13a=>{const _0x7b19ec=_0x2cf2ea;if(!validateTelegram(_0x56b13a))return;tgBot[_0x7b19ec(0x152)](_0x56b13a[_0x7b19ec(0xe4)]['id'],_0x7b19ec(0x231))['catch'](_0x36b986=>{telegramError(_0x36b986);}),updateSetting(_0x7b19ec(0x124),![]);}),tgBot[_0x2cf2ea(0x139)](/\/help/,_0x4741e4=>{const _0x2b1b1f=_0x2cf2ea;if(!validateTelegram(_0x4741e4))return;tgBot[_0x2b1b1f(0x152)](_0x4741e4[_0x2b1b1f(0xe4)]['id'],_0x518cee)[_0x2b1b1f(0x1ee)](_0x547e73=>{telegramError(_0x547e73);});}),tgBot['on'](_0x2cf2ea(0x119),_0x1d38d5=>{const _0x38a46a=_0x2cf2ea;_0x1d38d5[_0x38a46a(0x259)]()['includes'](_0x38a46a(0x187))&&(logger['full'](_0x38a46a(0x1cd)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x38a46a(0x24b))[_0x38a46a(0x207)](_0x38a46a(0x15e),_0x38a46a(0x1cd)));}),process[_0x2cf2ea(0x197)]('SIGINT',()=>{const _0x4c20ef=_0x2cf2ea;if(tgBot)tgBot['stopPolling']();process[_0x4c20ef(0x183)](0x1);}),process[_0x2cf2ea(0x197)]('SIGTERM',()=>{const _0x163bc0=_0x2cf2ea;if(tgBot)tgBot[_0x163bc0(0x22b)]();process['exit'](0x1);});}}function disableTelegram(){const _0x9c9c73=_0x231df8;tgBot&&(tgBot[_0x9c9c73(0x22b)](),tgBot=null);}function sendTelegram(_0x18861c,_0xca7d36){const _0x2f2f78=_0x231df8;if(settings[_0x2f2f78(0x124)]){if(settings[_0x2f2f78(0xf4)]==_0x2f2f78(0x1a6)||(_0xca7d36[_0x2f2f78(0x1a1)]==_0x2f2f78(0x1fd)||_0xca7d36[_0x2f2f78(0x1a1)]==_0x2f2f78(0x1d0)||_0xca7d36[_0x2f2f78(0x1a1)]==_0x2f2f78(0x1f7))&&settings[_0x2f2f78(0xf4)]==_0x2f2f78(0x143)||_0xca7d36[_0x2f2f78(0x1a1)]=='order'&&settings[_0x2f2f78(0xf4)]==_0x2f2f78(0xf8)){if(tgBot&&settings[_0x2f2f78(0x19b)]){if(_0xca7d36[_0x2f2f78(0x241)])tgBot[_0x2f2f78(0x152)](settings[_0x2f2f78(0x19b)],_0xca7d36[_0x2f2f78(0x28e)]+_0x2f2f78(0x26c)+_0xca7d36[_0x2f2f78(0x22a)])[_0x2f2f78(0x1ee)](_0x36bd1b=>{telegramError(_0x36bd1b);});else tgBot[_0x2f2f78(0x152)](settings[_0x2f2f78(0x19b)],_0x2f2f78(0x25e)+_0x18861c+'\x20>\x20'+_0xca7d36[_0x2f2f78(0x22a)])[_0x2f2f78(0x1ee)](_0x3e3e35=>{telegramError(_0x3e3e35);});}}}}async function sendTelegramMsg(_0x35a98f,_0x290d72='HTML'){const _0x4b3244=_0x231df8;return settings[_0x4b3244(0x124)]&&tgBot&&settings[_0x4b3244(0x19b)]?(await tgBot['sendMessage'](settings[_0x4b3244(0x19b)],_0x35a98f,{'parse_mode':_0x290d72})[_0x4b3244(0x1ee)](_0x2af123=>{telegramError(_0x2af123);}),!![]):![];}function getDeviceWithIp(_0x49f704){const _0xc7e78f=_0x231df8;return devices[_0xc7e78f(0x15c)](_0x19a446=>_0x19a446['ip']===_0x49f704);}function temporaryAccess2FA(_0x17b1ce,_0x573643){const _0x397f05=_0x231df8;let _0x1e4ebc=new Date(),_0xf8d292=![];if(lastIpApproval){if(_0x1e4ebc-lastIpApproval<0x1388)_0xf8d292=!![];}lastIpApproval=new Date();if(_0xf8d292)return;tgBot&&settings[_0x397f05(0x19b)]&&(tgBot['removeListener'](_0x397f05(0x19e)),tgBot['sendMessage'](settings[_0x397f05(0x19b)],_0x397f05(0x1da)+normalizeIP(_0x573643)[_0x397f05(0x271)]+'</b>\x20?',{'parse_mode':_0x397f05(0x189),'reply_markup':{'inline_keyboard':[[{'text':_0x397f05(0x1cf),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x397f05(0x255),'callback_data':'30'},{'text':_0x397f05(0x17a),'callback_data':_0x397f05(0x17a)}]]}})['catch'](_0x52875f=>{telegramError(_0x52875f);}),tgBot['on'](_0x397f05(0x19e),async _0x44d127=>{const _0x406110=_0x397f05,_0xfa3442=_0x44d127[_0x406110(0xd7)],_0x10012a=_0x44d127[_0x406110(0x1c5)];tgBot[_0x406110(0x27f)](_0x44d127['id'])[_0x406110(0x117)](async()=>{const _0x21fc5d=_0x406110;devices[_0x17b1ce][_0x21fc5d(0x1f4)]={'clientip':_0x573643,'timestamp':new Date()[_0x21fc5d(0x248)](),'expiry':_0xfa3442},_0xfa3442!=_0x21fc5d(0x17a)?(await tgBot[_0x21fc5d(0x152)](_0x10012a[_0x21fc5d(0xe4)]['id'],_0x21fc5d(0x19a)+_0xfa3442+_0x21fc5d(0x175),{'parse_mode':_0x21fc5d(0x189)})[_0x21fc5d(0x1ee)](_0xd8eab7=>{telegramError(_0xd8eab7);}),io['to'](_0x17b1ce)[_0x21fc5d(0x207)](_0x21fc5d(0x260),{'access':{'allow':![],'reason':_0x21fc5d(0x1c6),'token':null}})):(await tgBot[_0x21fc5d(0x152)](_0x10012a[_0x21fc5d(0xe4)]['id'],_0x21fc5d(0x1f1))[_0x21fc5d(0x1ee)](_0x56a765=>{telegramError(_0x56a765);}),io['to'](_0x17b1ce)['emit']('status',{'access':{'allow':![],'reason':_0x21fc5d(0x287),'token':null}}));}),tgBot[_0x406110(0x1e2)]('callback_query');}));}function loginAccess2FA(_0x343d17,_0x4c0a6f){const _0x4f29af=_0x231df8;tgBot&&settings[_0x4f29af(0x19b)]&&(tgBot[_0x4f29af(0x1e2)]('callback_query'),tgBot['sendMessage'](settings[_0x4f29af(0x19b)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4c0a6f)[_0x4f29af(0x271)]+_0x4f29af(0x1c3),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4f29af(0x26a),'callback_data':loginExpiry},{'text':_0x4f29af(0x17a),'callback_data':_0x4f29af(0x17a)}]]}})[_0x4f29af(0x1ee)](_0x449dfc=>{telegramError(_0x449dfc);}),tgBot['on'](_0x4f29af(0x19e),async _0x55714a=>{const _0x69a213=_0x4f29af,_0x3835c1=_0x55714a[_0x69a213(0xd7)],_0x46a652=_0x55714a[_0x69a213(0x1c5)];tgBot['answerCallbackQuery'](_0x55714a['id'])[_0x69a213(0x117)](async()=>{const _0x1e729d=_0x69a213;devices[_0x343d17][_0x1e729d(0x1a7)]={'clientip':_0x4c0a6f,'timestamp':new Date()[_0x1e729d(0x248)](),'expiry':_0x3835c1},_0x3835c1!=_0x1e729d(0x17a)?(await tgBot[_0x1e729d(0x152)](_0x46a652[_0x1e729d(0xe4)]['id'],_0x1e729d(0x155),{'parse_mode':_0x1e729d(0x189)})[_0x1e729d(0x1ee)](_0x240208=>{telegramError(_0x240208);}),io['to'](_0x343d17)[_0x1e729d(0x207)](_0x1e729d(0x260),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x1e729d(0x152)](_0x46a652[_0x1e729d(0xe4)]['id'],_0x1e729d(0xe5))[_0x1e729d(0x1ee)](_0x3015a3=>{telegramError(_0x3015a3);}),io['to'](_0x343d17)['emit'](_0x1e729d(0x260),{'access':{'allow':![],'reason':_0x1e729d(0x215),'token':null}}));}),tgBot[_0x69a213(0x1e2)](_0x69a213(0x19e));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2dac11=_0x231df8;return dbConfig[_0x2dac11(0xde)]('bots')[_0x2dac11(0x11b)](_0x2dac11(0x208))[_0x2dac11(0x1b4)]({'status':_0x2dac11(0x278)})[_0x2dac11(0xdf)]()||[];}function getDisabledBots(){const _0x1eb896=_0x231df8;return dbConfig['get'](_0x1eb896(0x182))['sortBy'](_0x1eb896(0x208))['filter']({'status':_0x1eb896(0x12d)})[_0x1eb896(0xdf)]()||[];}function getBotAttributes(_0x4d51a3){const _0x3ed92c=_0x231df8;let _0x2c463f={};const _0x447c90=configpath+_0x3ed92c(0x1dc)+_0x4d51a3+_0x3ed92c(0x1f8),_0x259ffa=fs[_0x3ed92c(0x1c7)](_0x447c90);if(_0x259ffa){const _0x299633=fs[_0x3ed92c(0x1fb)](_0x447c90);try{const _0x591a74=JSON[_0x3ed92c(0x239)](_0x299633),_0x286522=_0x591a74?_0x591a74[_0x3ed92c(0x179)][0x0]['headless']:![];_0x2c463f[_0x3ed92c(0x20d)]=_0x286522?_0x3ed92c(0x1a5):'manual',_0x2c463f[_0x3ed92c(0x28e)]=_0x591a74?_0x591a74[_0x3ed92c(0x179)][0x0][_0x3ed92c(0x28e)]:_0x3ed92c(0x25e)+_0x4d51a3;}catch(_0x4928ef){_0x2c463f[_0x3ed92c(0x20d)]='manual',_0x2c463f[_0x3ed92c(0x28e)]='Bot\x20'+_0x4d51a3;}}else _0x2c463f[_0x3ed92c(0x20d)]=_0x3ed92c(0x113),_0x2c463f[_0x3ed92c(0x28e)]=_0x3ed92c(0x25e)+_0x4d51a3;return _0x2c463f;}function getBotsWithMode(){const _0x538540=_0x231df8,_0x3a7b10=dbConfig[_0x538540(0xde)](_0x538540(0x182))[_0x538540(0x11b)](_0x538540(0x208))[_0x538540(0xdf)]()||[];return _0x3a7b10[_0x538540(0x238)](_0x704076=>{const _0x134716=_0x538540;let _0x30c58c=getBotAttributes(_0x704076[_0x134716(0x208)]);_0x704076['mode']=_0x30c58c[_0x134716(0x20d)];}),_0x3a7b10;}function getBotExchanges(){const _0xc1d02c=_0x231df8;let _0x177abe=[];const _0x2c3ddc=dbConfig['get'](_0xc1d02c(0x182))[_0xc1d02c(0x11b)]('botID')['value']()||[];_0x2c3ddc[_0xc1d02c(0x238)](_0xf7cda2=>{const _0x1cf8f1=_0xc1d02c;if(_0xf7cda2['status']==_0x1cf8f1(0x278)){const _0xd63b02=configpath+_0x1cf8f1(0x1dc)+_0xf7cda2[_0x1cf8f1(0x208)]+'-config.json',_0x3fd305=fs['existsSync'](_0xd63b02);let _0x1f66d1;if(_0x3fd305){const _0xef73aa=fs[_0x1cf8f1(0x1fb)](_0xd63b02);try{const _0x65e0e5=JSON[_0x1cf8f1(0x239)](_0xef73aa);_0x1f66d1=_0x65e0e5?_0x65e0e5[_0x1cf8f1(0x179)][0x0][_0x1cf8f1(0xea)]:null;}catch(_0xacd8db){}}if(_0x1f66d1)_0x177abe[_0x1cf8f1(0x12b)](_0x1f66d1);}});const _0x1a9fe5=[...new Set(_0x177abe)]['sort']();return _0x1a9fe5;}async function initUser(){const _0x20cd31=_0x231df8;if(!settings[_0x20cd31(0xd6)]){const _0x4aa3bf=uuidRandom();mixpanel['alias'](_0x4aa3bf),updateSetting(_0x20cd31(0xd6),_0x4aa3bf);}}async function initSecure(){const _0x34cbe8=_0x231df8;let _0x279590=getSecure();if(!_0x279590[_0x34cbe8(0x1c0)](_0x34cbe8(0x244))){let _0x1a9c5e=await generateKeys();_0x279590[_0x34cbe8(0x237)]=_0x1a9c5e['publicKey'],_0x279590[_0x34cbe8(0x16e)]=_0x1a9c5e[_0x34cbe8(0x16e)],_0x279590[_0x34cbe8(0x244)]=crypto['randomBytes'](0x20)[_0x34cbe8(0x259)](_0x34cbe8(0x20b));;storeSecure(_0x279590);}}function getSettings(){const _0x5c7126=_0x231df8;return dbSettings[_0x5c7126(0xde)](_0x5c7126(0x1b2))[_0x5c7126(0xdf)]()||{};}function getSecure(){const _0x147ad9=_0x231df8;return dbSecure[_0x147ad9(0xde)](_0x147ad9(0x202))[_0x147ad9(0xdf)]()||{};}function getBlacklist(){const _0x219111=_0x231df8;return dbSecure[_0x219111(0xde)](_0x219111(0x279))['value']()||[];}function broadcastToBots(_0x380418,_0x5126c4){const _0x59acb8=_0x231df8;config[_0x59acb8(0x238)](_0x1a9ed3=>{const _0x1fc94f=_0x59acb8;if(_0x1a9ed3[_0x1fc94f(0x260)]=='enabled'&&_0x1a9ed3[_0x1fc94f(0x276)]==_0x1fc94f(0x109)||_0x1a9ed3['status']==_0x1fc94f(0x122)&&_0x1a9ed3[_0x1fc94f(0x276)]==_0x1fc94f(0x109)){if(pid[_0x1a9ed3['botID']])pid[_0x1a9ed3[_0x1fc94f(0x208)]][_0x1fc94f(0x26d)]({[_0x380418]:_0x5126c4});}});}function storeSettings(_0xe4413a,_0x5c7382=![]){const _0x16fa4d=_0x231df8;_0xe4413a={...settings,..._0xe4413a};if(_0x5c7382&&_0xe4413a[_0x16fa4d(0x1c2)]!=_0x16fa4d(0x196)&&_0xe4413a[_0x16fa4d(0x1c2)]!=_0x16fa4d(0xf5)&&_0xe4413a[_0x16fa4d(0x1c2)]!=''){const _0x2bd13a=crypt[_0x16fa4d(0x27a)](secure['privateKey'],_0xe4413a[_0x16fa4d(0x1c2)])[_0x16fa4d(0x1c5)][_0x16fa4d(0x17e)]('@')[0x0],_0x5abafb=bcrypt['hashSync'](_0x2bd13a,saltRounds);_0xe4413a={..._0xe4413a,'bbPassword':_0x5abafb};}if(_0x5c7382&&_0xe4413a[_0x16fa4d(0x1ef)]!='************'&&_0xe4413a[_0x16fa4d(0x1ef)]!=_0x16fa4d(0xf5)&&_0xe4413a['telegramToken']!=''){const _0x39fef7=crypt[_0x16fa4d(0x27a)](secure['privateKey'],_0xe4413a[_0x16fa4d(0x1ef)])['message'][_0x16fa4d(0x17e)]('@')[0x0];_0xe4413a={..._0xe4413a,'telegramToken':_0x39fef7};}const _0x5d44d5=_0xe4413a[_0x16fa4d(0x1ef)]!=_0x16fa4d(0x196)&&_0xe4413a[_0x16fa4d(0x1ef)]!=settings[_0x16fa4d(0x1ef)]||_0xe4413a[_0x16fa4d(0x10e)]!=settings[_0x16fa4d(0x10e)],_0x1182a6=_0xe4413a[_0x16fa4d(0x1ef)]==''||_0xe4413a[_0x16fa4d(0x10e)]=='';if(_0x5d44d5)_0xe4413a[_0x16fa4d(0xf4)]='all';for(const [_0x2d2f92,_0x13db63]of Object[_0x16fa4d(0x15a)](_0xe4413a)){if(_0x2d2f92=='telegramToken'&&_0x13db63==_0x16fa4d(0x196)){_0xe4413a[_0x16fa4d(0x1ef)]=settings['telegramToken'];continue;};if(_0x2d2f92==_0x16fa4d(0x1c2)&&_0x13db63=='************'){_0xe4413a[_0x16fa4d(0x1c2)]=settings[_0x16fa4d(0x1c2)];continue;};dbSettings[_0x16fa4d(0x173)]('settings.'+_0x2d2f92,_0x13db63)[_0x16fa4d(0x206)]();}settings=_0xe4413a,io['to'](_0x16fa4d(0x24b))[_0x16fa4d(0x207)](_0x16fa4d(0x1b2),cleanSettings()),broadcastToBots(_0x16fa4d(0xf3),settings['timeshift']),broadcastToBots(_0x16fa4d(0x1af),settings[_0x16fa4d(0x1af)]);if(_0x5d44d5&&!_0x1182a6)initTelegram();if(_0x5d44d5&&_0x1182a6)disableTelegram();getAllClients()[_0x16fa4d(0x238)](_0x378d00=>{const _0x153f4a=_0x16fa4d;getSocket(_0x378d00['id'])[_0x153f4a(0x207)](_0x153f4a(0x260),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x340398,_0x464cfc){const _0x5e1a64=_0x231df8;dbSettings[_0x5e1a64(0x173)](_0x5e1a64(0x1d1)+_0x340398,_0x464cfc)[_0x5e1a64(0x206)](),settings=getSettings(),io['to'](_0x5e1a64(0x24b))[_0x5e1a64(0x207)](_0x5e1a64(0x1b2),cleanSettings());}function storeSecure(_0x238231){const _0x4e4165=_0x231df8;dbSecure[_0x4e4165(0xde)]('secure')[_0x4e4165(0x12b)](_0x238231)[_0x4e4165(0x206)](),secure=_0x238231;}function addBlacklist(_0x3c704a){const _0x538636=_0x231df8;cleanBlacklist();let _0x5cef1b;devices[_0x3c704a][_0x538636(0x1f4)]?_0x5cef1b=Math['max'](devices[_0x3c704a][_0x538636(0x1f4)][_0x538636(0x16c)],loginExpiry):_0x5cef1b=loginExpiry,dbSecure[_0x538636(0xde)](_0x538636(0x279))[_0x538636(0x12b)]({'expiry':new Date()[_0x538636(0x248)]()+_0x5cef1b*0x3c*0x3e8,'token':devices[_0x3c704a][_0x538636(0x123)][_0x538636(0x224)]})[_0x538636(0x206)](),blacklist=dbSecure[_0x538636(0xde)](_0x538636(0x279))[_0x538636(0xdf)]();}function cleanBlacklist(){const _0x5b6ec4=_0x231df8;let _0x386a54=dbSecure[_0x5b6ec4(0xde)](_0x5b6ec4(0x279))[_0x5b6ec4(0x274)]()[_0x5b6ec4(0xdf)](),_0x242cac=new Date()[_0x5b6ec4(0x248)]();_0x386a54[_0x5b6ec4(0x238)](_0x589364=>{const _0x3bd283=_0x5b6ec4;_0x589364[_0x3bd283(0x16c)]<_0x242cac&&dbSecure[_0x3bd283(0xde)]('blacklist')[_0x3bd283(0xfc)]({'expiry':_0x589364[_0x3bd283(0x16c)]})[_0x3bd283(0x206)]();});}function initStates(){const _0x40f111=_0x231df8;let _0x30b7ec=getConfiguration();_0x30b7ec[_0x40f111(0x238)](_0x3ff7b7=>{const _0x1384b7=_0x40f111;_0x3ff7b7[_0x1384b7(0x276)]=_0x1384b7(0x1a8);}),storeConfiguration(_0x30b7ec);}function onKeys(){const _0x4adef5=new RSA();return new Promise(_0x16b0a4=>{const _0x1d8abd=_0x1fbb;_0x4adef5['generateKeyPairAsync']()[_0x1d8abd(0x117)](_0x5667ad=>{_0x16b0a4(_0x5667ad);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3a16ea=_0x231df8;let _0x1e987a=getSettings(),_0x1afe7b=![];!_0x1e987a[_0x3a16ea(0x1c0)]('lastmsgtelegram')&&(_0x1e987a[_0x3a16ea(0x291)]=0x0,_0x1afe7b=!![]);!_0x1e987a[_0x3a16ea(0x1c0)](_0x3a16ea(0x23d))&&(_0x1e987a['lastmsgemitted']=0x0,_0x1afe7b=!![]);!_0x1e987a[_0x3a16ea(0x1c0)]('latestversion')&&(_0x1e987a[_0x3a16ea(0x18d)]='0.0.0',_0x1afe7b=!![]);!_0x1e987a[_0x3a16ea(0x1c0)](_0x3a16ea(0x1af))&&(_0x1e987a[_0x3a16ea(0x1af)]=![],_0x1afe7b=!![]);if(_0x1afe7b)storeSettings(_0x1e987a);}function storeConfiguration(_0x26c608){const _0x140dda=_0x231df8;dbConfig['get'](_0x140dda(0x182))[_0x140dda(0xfc)]()['write'](),_0x26c608[_0x140dda(0x238)](_0x30e40a=>{const _0x245b13=_0x140dda;delete _0x30e40a[_0x245b13(0x20d)];}),dbConfig[_0x140dda(0xde)](_0x140dda(0x182))[_0x140dda(0x12b)](..._0x26c608)[_0x140dda(0x206)](),config=_0x26c608;}function resetPassword(){const _0x44c3de=_0x231df8;tgBot&&settings[_0x44c3de(0x19b)]&&(tgBot[_0x44c3de(0x1e2)](_0x44c3de(0x19e)),tgBot[_0x44c3de(0x152)](settings[_0x44c3de(0x19b)],_0x44c3de(0x1ae),{'parse_mode':_0x44c3de(0x189),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x44c3de(0x25d)},{'text':'no','callback_data':'no'}]]}})[_0x44c3de(0x1ee)](_0x564224=>{telegramError(_0x564224);}),tgBot['on'](_0x44c3de(0x19e),async _0xbd45ca=>{const _0x5c9050=_0x44c3de,_0x1769c1=_0xbd45ca[_0x5c9050(0xd7)],_0x29ec7e=_0xbd45ca[_0x5c9050(0x1c5)];tgBot[_0x5c9050(0x27f)](_0xbd45ca['id'])[_0x5c9050(0x117)](async()=>{const _0x246512=_0x5c9050;if(_0x1769c1!='no'){const _0x219fb5=0xf,_0x2fcc2d=_0x246512(0x222),_0x18ff48=Array[_0x246512(0x275)](crypto[_0x246512(0x24f)](new Uint32Array(_0x219fb5)))[_0x246512(0x1f6)](_0x3ea681=>_0x2fcc2d[_0x3ea681%_0x2fcc2d[_0x246512(0x101)]])[_0x246512(0x277)](''),_0x7c63a9=bcrypt[_0x246512(0xf1)](_0x18ff48,saltRounds);storeSettings({'bbPassword':_0x7c63a9}),await tgBot[_0x246512(0x152)](_0x29ec7e['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x18ff48,{'parse_mode':_0x246512(0x189)})[_0x246512(0x1ee)](_0x289855=>{telegramError(_0x289855);});}else await tgBot['sendMessage'](_0x29ec7e['chat']['id'],_0x246512(0x154))[_0x246512(0x1ee)](_0x11a1d8=>{telegramError(_0x11a1d8);});}),tgBot[_0x5c9050(0x1e2)]('callback_query');}));}async function confirmRestore(_0x4e0ded,_0x326a7c){const _0x588389=_0x231df8;io['to'](_0x588389(0x24b))['emit'](_0x588389(0x15e),_0x588389(0x141),_0x588389(0x1f7)),tgBot&&settings[_0x588389(0x19b)]&&(tgBot[_0x588389(0x1e2)](_0x588389(0x19e)),await tgBot[_0x588389(0x152)](settings[_0x588389(0x19b)],_0x588389(0x153),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x588389(0x25d),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x588389(0x1ee)](_0x14676d=>{telegramError(_0x14676d);}),tgBot['on'](_0x588389(0x19e),async _0xd32a10=>{const _0x295029=_0x588389,_0x152d52=_0xd32a10['data'],_0xa66195=_0xd32a10[_0x295029(0x1c5)];tgBot[_0x295029(0x27f)](_0xd32a10['id'])['then'](async()=>{const _0x3462db=_0x295029;_0x152d52==_0x3462db(0x25d)?(await tgBot[_0x3462db(0x152)](_0xa66195['chat']['id'],_0x3462db(0x162),{'parse_mode':_0x3462db(0x189)})[_0x3462db(0x1ee)](_0x2717a3=>{telegramError(_0x2717a3);}),unzipFile(_0x4e0ded,_0x326a7c)):(logger[_0x3462db(0x133)](_0x3462db(0x22d)),await tgBot[_0x3462db(0x152)](_0xa66195[_0x3462db(0xe4)]['id'],_0x3462db(0x22d))[_0x3462db(0x1ee)](_0x16c4bc=>{telegramError(_0x16c4bc);}));}),tgBot[_0x295029(0x1e2)](_0x295029(0x19e));}));}function getServerTime(){const _0x424516=_0x231df8,_0x5368fa=new Date();return _0x5368fa['getFullYear']()+'/'+(_0x5368fa[_0x424516(0x24e)]()+0x1)[_0x424516(0x259)]()['padStart'](0x2,'0')+'/'+_0x5368fa[_0x424516(0x228)]()[_0x424516(0x259)]()[_0x424516(0x127)](0x2,'0')+'\x20'+_0x5368fa['getHours']()[_0x424516(0x259)]()[_0x424516(0x127)](0x2,'0')+':'+_0x5368fa[_0x424516(0x194)]()['toString']()[_0x424516(0x127)](0x2,'0')+':'+_0x5368fa['getSeconds']()[_0x424516(0x259)]()[_0x424516(0x127)](0x2,'0');}function getTimeStamp(){const _0x159b6a=_0x231df8,_0x33ad2f=shiftedTime();return _0x33ad2f[_0x159b6a(0xdc)]()+'/'+(_0x33ad2f[_0x159b6a(0x24e)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x33ad2f[_0x159b6a(0x228)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x33ad2f['getHours']()[_0x159b6a(0x259)]()[_0x159b6a(0x127)](0x2,'0')+':'+_0x33ad2f[_0x159b6a(0x194)]()[_0x159b6a(0x259)]()[_0x159b6a(0x127)](0x2,'0')+':'+_0x33ad2f[_0x159b6a(0x115)]()['toString']()[_0x159b6a(0x127)](0x2,'0');}function getCleanTimeStamp(){const _0xd86e64=_0x231df8,_0x1f84d4=shiftedTime();return _0x1f84d4['getFullYear']()+(_0x1f84d4[_0xd86e64(0x24e)]()+0x1)['toString']()[_0xd86e64(0x127)](0x2,'0')+_0x1f84d4[_0xd86e64(0x228)]()['toString']()[_0xd86e64(0x127)](0x2,'0')+'-'+_0x1f84d4[_0xd86e64(0x10d)]()['toString']()[_0xd86e64(0x127)](0x2,'0')+_0x1f84d4[_0xd86e64(0x194)]()[_0xd86e64(0x259)]()[_0xd86e64(0x127)](0x2,'0')+_0x1f84d4[_0xd86e64(0x115)]()[_0xd86e64(0x259)]()[_0xd86e64(0x127)](0x2,'0');}function shiftedTime(){const _0x34a263=_0x231df8,_0x950c94=new Date();let _0x39fac5=_0x950c94;if(settings['timeshift']&&settings[_0x34a263(0xf3)]!==0x0)_0x39fac5=fns[_0x34a263(0x17b)](_0x950c94,{'hours':settings['timeshift']});return _0x39fac5;}function startScheduler(){const _0x409386=_0x231df8,_0x41d377=new Date()[_0x409386(0xd1)](),_0x4570ea=shiftedTime()[_0x409386(0x10d)]();_0x4570ea==0x4&&backupConfigFiles();_0x4570ea==0x0&&rotateLogFiles();_0x41d377%0x6==0x0&&triggerAnalytics();_0x41d377%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0xd85d98){const _0x43d318=_0x231df8;logger[_0x43d318(0x133)](_0x43d318(0x28b)+_0xd85d98);const _0x347945=getBotsWithMode();_0x347945[_0x43d318(0x101)]>0x0?confirmRestore(configbackuppath,_0xd85d98):unzipFile(configbackuppath,_0xd85d98);}async function getBackupFiles(_0x28ecc8=null){const _0x53ef4e=_0x231df8;let _0x312781=[],_0x21f051=fs[_0x53ef4e(0x149)](configbackuppath,{'withFileTypes':!![]});_0x21f051[_0x53ef4e(0x142)]((_0x3d7d29,_0xc76114)=>_0x3d7d29['name']<_0xc76114['name']?0x1:_0xc76114[_0x53ef4e(0x20e)]<_0x3d7d29[_0x53ef4e(0x20e)]?-0x1:0x0),_0x21f051['forEach'](_0x4b07d7=>{const _0x55163f=_0x53ef4e;if(!_0x4b07d7['isDirectory']()&&_0x4b07d7[_0x55163f(0x20e)][_0x55163f(0x13b)](_0x55163f(0x1df))&&_0x4b07d7['name'][_0x55163f(0x265)](_0x55163f(0x14c))){const _0x464d0a=formatDate(fs[_0x55163f(0xd4)](configbackuppath+_0x4b07d7[_0x55163f(0x20e)])[_0x55163f(0x294)]);_0x312781['push']({'name':_0x4b07d7[_0x55163f(0x20e)],'mtime':_0x464d0a});}});if(_0x28ecc8)io['to'](_0x28ecc8)[_0x53ef4e(0x207)](_0x53ef4e(0x210),_0x312781);else return _0x312781;}async function backupConfigFiles(){const _0xfee819=_0x231df8;await zipFiles(_0xfee819(0x1ca));const _0x550cad=getCleanTimeStamp();fs['copyFileSync'](zippath+_0xfee819(0x273),configbackuppath+('backup-full@'+_0x550cad+_0xfee819(0x14c)));let _0x594119=fs[_0xfee819(0x149)](configbackuppath,{'withFileTypes':!![]});_0x594119[_0xfee819(0x142)]((_0x1b7c5f,_0x41ca35)=>_0x1b7c5f[_0xfee819(0x20e)]<_0x41ca35['name']?0x1:_0x41ca35[_0xfee819(0x20e)]<_0x1b7c5f[_0xfee819(0x20e)]?-0x1:0x0),_0x594119[_0xfee819(0x101)]>maxBackups&&fs[_0xfee819(0x296)](configbackuppath+_0x594119[maxBackups][_0xfee819(0x20e)]);}function rotateLogFiles(){const _0x58b3b6=_0x231df8,_0x5a480e=fs[_0x58b3b6(0xd4)](logspath+'output-000.log'),_0x572cac=_0x5a480e[_0x58b3b6(0x1f9)]/0x400;if(_0x572cac>0x64){let _0x57cf2c=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x57cf2c[_0x58b3b6(0x142)]((_0x34cd2b,_0x3e4e7f)=>_0x34cd2b[_0x58b3b6(0x20e)]<_0x3e4e7f['name']?0x1:_0x3e4e7f[_0x58b3b6(0x20e)]<_0x34cd2b['name']?-0x1:0x0),_0x57cf2c[_0x58b3b6(0x238)](_0x564d82=>{const _0x166d2a=_0x58b3b6;if(_0x564d82[_0x166d2a(0x20e)]==_0x166d2a(0x18a))fs[_0x166d2a(0x19f)](logspath+_0x564d82[_0x166d2a(0x20e)],logspath+_0x166d2a(0x21c));if(_0x564d82['name']=='output-001.log')fs[_0x166d2a(0x19f)](logspath+_0x564d82['name'],logspath+_0x166d2a(0x18a));_0x564d82[_0x166d2a(0x20e)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x564d82['name'],logspath+_0x166d2a(0x233)),fs[_0x166d2a(0xdd)](logspath+_0x564d82[_0x166d2a(0x20e)],''));});}}async function zipFiles(_0x52a047){const _0x43a304=_0x231df8;let _0x2f17fe;if(_0x52a047==_0x43a304(0x281))_0x2f17fe=logspath;if(_0x52a047=='backup')_0x2f17fe=configpath;if(_0x52a047=='backup-full')_0x2f17fe=configpath;let _0x240698=fs[_0x43a304(0x149)](_0x2f17fe,{'withFileTypes':!![]});const _0x3a9551=new require(_0x43a304(0xcd))();_0x240698[_0x43a304(0x238)](_0x3a4cd9=>{const _0x46e4a1=_0x43a304;if(!_0x3a4cd9['isDirectory']()){let _0x38fab9=fs[_0x46e4a1(0x1fb)](_0x2f17fe+_0x3a4cd9[_0x46e4a1(0x20e)]);if(_0x52a047==_0x46e4a1(0x165)){const _0x290ca8=/^bot-[0-9]{3}-config.json$/,_0x407682=_0x290ca8[_0x46e4a1(0x156)](_0x3a4cd9[_0x46e4a1(0x20e)]);if(_0x407682){const _0x293d98=JSON[_0x46e4a1(0x239)](_0x38fab9);_0x293d98[_0x46e4a1(0x179)][0x0]&&(_0x293d98[_0x46e4a1(0x179)][0x0]['apiKey']=_0x46e4a1(0xf5),_0x293d98[_0x46e4a1(0x179)][0x0][_0x46e4a1(0x125)]=_0x46e4a1(0xf5)),_0x38fab9=JSON[_0x46e4a1(0x1ec)](_0x293d98,null,0x2);}if(_0x3a4cd9[_0x46e4a1(0x20e)]==_0x46e4a1(0x284)){const _0x59f49b=JSON['parse'](_0x38fab9);if(_0x59f49b[_0x46e4a1(0x1b2)][_0x46e4a1(0xfe)])_0x59f49b[_0x46e4a1(0x1b2)][_0x46e4a1(0xfe)]=![];if(_0x59f49b[_0x46e4a1(0x1b2)][_0x46e4a1(0x1c2)])_0x59f49b[_0x46e4a1(0x1b2)][_0x46e4a1(0x1c2)]=_0x46e4a1(0xf5);if(_0x59f49b[_0x46e4a1(0x1b2)]['telegramToken'])_0x59f49b[_0x46e4a1(0x1b2)][_0x46e4a1(0x1ef)]='***';if(_0x59f49b[_0x46e4a1(0x1b2)]['telegramChatId'])_0x59f49b[_0x46e4a1(0x1b2)]['telegramChatId']=null;_0x38fab9=JSON[_0x46e4a1(0x1ec)](_0x59f49b,null,0x2);}if(_0x3a4cd9[_0x46e4a1(0x20e)]!=_0x46e4a1(0x20a))_0x3a9551[_0x46e4a1(0x120)](_0x3a4cd9[_0x46e4a1(0x20e)],_0x38fab9);}else _0x3a9551[_0x46e4a1(0x120)](_0x3a4cd9[_0x46e4a1(0x20e)],_0x38fab9);}});const _0x5c047c=_0x3a9551['generate']({'base64':![],'compression':_0x43a304(0x1d2)});fs['writeFileSync'](zippath+(_0x52a047+_0x43a304(0x14c)),_0x5c047c,'binary');}async function unzipFile(_0x5e8b66,_0x333603){const _0x4c23a0=_0x231df8;fs[_0x4c23a0(0x149)](configpath,{'withFileTypes':!![]})[_0x4c23a0(0x238)](_0x2909a1=>{const _0x1d1eaf=_0x4c23a0;if(!_0x2909a1[_0x1d1eaf(0x188)]())fs[_0x1d1eaf(0x24d)](configpath+_0x2909a1[_0x1d1eaf(0x20e)]);});const _0x1c4d56=fs[_0x4c23a0(0x1fb)](_0x5e8b66+_0x333603,'binary'),_0x30ae08=new require(_0x4c23a0(0xcd))(_0x1c4d56,{'base64':![],'checkCRC32':!![]});Object[_0x4c23a0(0x11e)](_0x30ae08[_0x4c23a0(0xe6)])['forEach'](_0xfc678d=>{const _0x459881=_0x4c23a0,_0x56267c=_0x30ae08['files'][_0xfc678d];fs[_0x459881(0xdd)](configpath+_0x56267c[_0x459881(0x20e)],_0x56267c['_data']);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x2705d0=>{const _0x51c643=_0x4c23a0;if(!_0x2705d0[_0x51c643(0x188)]())fs['rmSync'](temppath+_0x2705d0[_0x51c643(0x20e)]);}),logger['debug'](_0x4c23a0(0x19d)),process[_0x4c23a0(0x26d)]({'restore':!![]},_0x394e45=>{});}async function getPublicIp(){const _0xa7d04=_0x231df8;try{const _0x23ac60=await axios[_0xa7d04(0xde)](_0xa7d04(0x218));publicip=_0x23ac60[_0xa7d04(0xd7)]['ip'];}catch(_0x520fdc){}}async function triggerAnalytics(){const _0x2dcd8d=_0x231df8;if(!publicip)await getPublicIp();const _0xcf7c1c=getBotsWithMode();let _0x3d9a60=0x0;_0xcf7c1c[_0x2dcd8d(0x238)](_0x2f8838=>{const _0x2c8038=_0x2dcd8d;if(_0x2f8838[_0x2c8038(0x260)]===_0x2c8038(0x278))_0x3d9a60++;});const _0x28daea=getBotExchanges();mixpanel[_0x2dcd8d(0x1a2)](_0x2dcd8d(0x18c),{'distinct_id':settings[_0x2dcd8d(0xd6)],'ip':publicip,'version':serverversion,'numbots':_0xcf7c1c[_0x2dcd8d(0x101)],'numbotsenabled':_0x3d9a60,'exchanges':_0x28daea});}async function getMessages(){const _0x8028a1=_0x231df8,_0xc55f47=_0x8028a1(0x11c),_0x33cc4b=new GraphQLClient(_0xc55f47),_0x378daa={'authorization':_0x8028a1(0x129)},_0x24d7ee=serverversion[_0x8028a1(0x17e)]('.'),_0x13e583=_0x24d7ee[0x0]+'.'+_0x24d7ee[0x1],_0x3e73d1=Math[_0x8028a1(0x234)](settings[_0x8028a1(0x291)],settings[_0x8028a1(0x23d)]),_0x25dea5={'last':parseInt(_0x3e73d1),'bbm':_0x13e583},_0x133692=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x56af9a;try{_0x56af9a=await _0x33cc4b[_0x8028a1(0x246)](_0x133692,_0x25dea5,_0x378daa);}catch(_0x126455){}if(_0x56af9a&&_0x56af9a[_0x8028a1(0x12a)]){let _0xcd287d=settings['lastmsgtelegram'];newMessages=[];for(const _0x1be39d of _0x56af9a[_0x8028a1(0x12a)]){newMessages[_0x8028a1(0x12b)](_0x1be39d);if(_0x1be39d['bbvNew'])updateSetting(_0x8028a1(0x18d),_0x1be39d[_0x8028a1(0x204)]);let _0x36b7ca=_0x1be39d['bbvNew']?serverversion>=_0x1be39d[_0x8028a1(0x204)]:![];if(!_0x36b7ca&&_0x1be39d[_0x8028a1(0x1ff)]>_0xcd287d){if(_0x1be39d[_0x8028a1(0x15b)]===_0x8028a1(0x252)||serverversion[_0x8028a1(0x13b)](_0x1be39d[_0x8028a1(0x15b)])){let _0x3d2446=''+_0x1be39d[_0x8028a1(0x22c)]+'\x0a\x0a'+_0x1be39d[_0x8028a1(0x1c5)];const _0x3d22c3=await sendTelegramMsg(toTelegramMarkdown(_0x3d2446),_0x8028a1(0x172));if(_0x3d22c3)_0xcd287d=_0x1be39d['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x8028a1(0x291),_0xcd287d),emitMessages();}}function emitMessages(){const _0x4066aa=_0x231df8,_0x1d4f4c=settings[_0x4066aa(0x23d)];let _0x1a7c62=[];newMessages[_0x4066aa(0x238)](_0x31bb98=>{const _0x2a4678=_0x4066aa;_0x31bb98[_0x2a4678(0x1ff)]>_0x1d4f4c&&_0x1a7c62['push'](_0x31bb98);}),_0x1a7c62[_0x4066aa(0x101)]>0x0&&getAllClients()[_0x4066aa(0x238)](_0x1412d8=>{const _0x571067=_0x4066aa;getSocket(_0x1412d8['id'])[_0x571067(0x207)](_0x571067(0x1c5),_0x1a7c62);});}function confirmMessage(_0x29c6e4){const _0x4e6307=_0x231df8;updateSetting(_0x4e6307(0x23d),Number(_0x29c6e4));}function isNewerVersion(_0x290221,_0xff9998){const _0x1be6cb=_0x231df8,_0x3150a7=_0xff9998['split']('.'),_0x25275e=_0x290221[_0x1be6cb(0x17e)]('.');for(var _0x25e088=0x0;_0x25e088<_0x25275e[_0x1be6cb(0x101)];_0x25e088++){const _0x3068c5=~~_0x25275e[_0x25e088],_0x4dbbbe=~~_0x3150a7[_0x25e088];if(_0x3068c5>_0x4dbbbe)return!![];if(_0x3068c5<_0x4dbbbe)return![];}return![];}function toTelegramMarkdown(_0x459ed6){const _0x51d3f3=_0x231df8,_0x3d6a9f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x24bccf=/\*{2}(.+?)\*{2}/gim;return _0x459ed6=_0x459ed6['replace'](_0x3d6a9f,_0x51d3f3(0x14e))['replace'](_0x24bccf,_0x51d3f3(0x1a3)),_0x459ed6;}async function validateConfigFile(){const _0x4abfb7=_0x231df8,_0x1d4191=dbConfig[_0x4abfb7(0xde)]('bots')[_0x4abfb7(0x11b)](_0x4abfb7(0x208))['value']()||[];if(_0x1d4191[_0x4abfb7(0x101)]==0x0){let _0x278069=0x0,_0x53845d=[];const _0x23f2c9=/^bot-([0-9]{3})-config.json$/,_0xb61196=fs[_0x4abfb7(0x149)](configpath);_0xb61196[_0x4abfb7(0x238)](_0x4b51a8=>{const _0x5caa33=_0x4abfb7,_0x2cad6=_0x23f2c9[_0x5caa33(0x268)](_0x4b51a8);if(_0x2cad6){const _0x28810b=_0x2cad6[0x1];let _0x4c9bd1=getBotAttributes(_0x28810b);_0x53845d[_0x5caa33(0x12b)]({'botID':_0x28810b,'botname':_0x4c9bd1[_0x5caa33(0x28e)],'status':_0x5caa33(0x12d),'live':_0x5caa33(0x1a8)}),_0x278069++;}}),_0x278069!=0x0&&(dbConfig['get'](_0x4abfb7(0x182))[_0x4abfb7(0x1eb)](_0x53845d)['write'](),config=_0x53845d,restoredConfigFile=_0x278069);}}async function restoreConfigNotify(_0x38b5f5){const _0x2aa375=_0x231df8;let _0x27e982;if(restoredConfigFile==0x1)_0x27e982=_0x2aa375(0x186);else _0x27e982=_0x2aa375(0x25c);if(_0x38b5f5)io['to'](_0x2aa375(0x24b))[_0x2aa375(0x207)](_0x2aa375(0x15e),_0x27e982);else{logger['simple'](_0x2aa375(0x1bf)),logger['simple'](_0x27e982),logger[_0x2aa375(0x16b)]('-----------------------------------------------------------------------------------'),logger[_0x2aa375(0x16b)]('');if(tgBot&&settings[_0x2aa375(0x19b)]&&settings[_0x2aa375(0xf4)]!=_0x2aa375(0xf8))tgBot[_0x2aa375(0x152)](settings[_0x2aa375(0x19b)],_0x2aa375(0x1fe)+_0x27e982)[_0x2aa375(0x1ee)](_0x1d368e=>{telegramError(_0x1d368e);});}}function validateCredentials(_0x2ff301,_0x4fd080){const _0x20800f=_0x231df8;if(_0x2ff301[_0x20800f(0x219)]==settings[_0x20800f(0xda)]&&bcrypt[_0x20800f(0x1b6)](_0x2ff301[_0x20800f(0x17d)],settings['bbPassword'])){if(settings[_0x20800f(0x1c8)])return{'allow':![],'reason':_0x20800f(0x28a),'token':null};else{const _0x35625b=generateLoginToken(_0x4fd080);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x35625b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x130986){const _0x342c40=_0x231df8,_0x1068e5=generateLoginToken(_0x130986);return{'allow':!![],'reason':_0x342c40(0x12c),'token':_0x1068e5};}function validateAccess(_0x3cff91,_0xe60db0,_0x573fa3){const _0x6c956d=_0x231df8,_0x5ba702=_0x573fa3?_0x573fa3:devices[_0xe60db0]['ip'];let _0x3b16d8;const _0x1bc324=_0x473501=>{const _0x532db6=_0x1fbb;if(settings[_0x532db6(0xfe)]){if(settings[_0x532db6(0x1c8)]){if(telegram2FaApproved(_0xe60db0)){const _0x256b9f=generateLoginToken(_0xe60db0);return{'allow':!![],'reason':_0x532db6(0x240),'token':_0x256b9f};}else return{'allow':![],'reason':_0x532db6(0x177),'token':null};}else return _0x3b16d8=validToken(_0x473501,_0xe60db0),_0x3b16d8['hasOwnProperty'](_0x532db6(0x1f7))?{'allow':!![],'reason':_0x532db6(0x178),'token':_0x473501}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings['whitelistEnabled']){let _0x182ced=[...settings[_0x6c956d(0x253)],_0x6c956d(0xf2),_0x6c956d(0x216),'127.0.0.1'];if(_0x182ced[_0x6c956d(0x192)](_0x5ba702))return _0x1bc324(_0x3cff91);else{_0x3b16d8=validToken(_0x3cff91,_0xe60db0);if(_0x3b16d8[_0x6c956d(0x1c0)](_0x6c956d(0x1f7)))return _0x1bc324(_0x3cff91);else{if(telegramIpApproved(_0xe60db0)){const _0x1b2ade=generateToken(_0xe60db0);return _0x3b16d8=_0x1bc324(_0x3cff91),_0x3b16d8[_0x6c956d(0x1e7)]?{'allow':!![],'reason':_0x6c956d(0x25f),'token':_0x1b2ade}:_0x3b16d8;}else return settings[_0x6c956d(0x116)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x6c956d(0x16f),'token':null};}}}else return _0x1bc324(_0x3cff91);}function timelyDecrypt(_0x1a2ef2,_0x187836=!![]){const _0x11c0a5=_0x231df8;if(_0x1a2ef2)try{const _0x4527db=crypt[_0x11c0a5(0x27a)](secure[_0x11c0a5(0x16e)],_0x1a2ef2)[_0x11c0a5(0x1c5)],_0x8c3fc0=_0x4527db[_0x11c0a5(0x17e)]('@')[0x0],_0x23f2c8=_0x4527db[_0x11c0a5(0x17e)]('@')[0x1],_0x590215=new Date()[_0x11c0a5(0x248)]();if(_0x187836){if(_0x590215-_0x23f2c8<maxSecretAge*0x3e8)return _0x8c3fc0;else return![];}else return _0x8c3fc0;}catch(_0x21d0dc){return![];}else return![];}const validToken=(_0x2f551a,_0x2ed9d2)=>{const _0x1b19cb=_0x231df8,_0x2c5bc5=devices[_0x2ed9d2]['ip'];if(!_0x2f551a)return{'error':_0x1b19cb(0xcb)};for(let _0x21db05 of blacklist){if(_0x21db05[_0x1b19cb(0x224)]==_0x2f551a)return{'error':_0x1b19cb(0x1de)};}let _0x49f068;try{_0x49f068=jwt[_0x1b19cb(0x256)](_0x2f551a,secure[_0x1b19cb(0x244)]+_0x2ed9d2);}catch{return{'error':_0x1b19cb(0x225)};}if(!_0x49f068['hasOwnProperty']('clientip')&&!_0x49f068[_0x1b19cb(0x1c0)]('username')||!_0x49f068[_0x1b19cb(0x1c0)](_0x1b19cb(0x229)))return{'error':_0x1b19cb(0x16a)};if(!_0x49f068[_0x1b19cb(0x1c0)](_0x1b19cb(0x219))&&_0x49f068[_0x1b19cb(0x1c0)](_0x1b19cb(0x26b))){const {clientip:_0x431eba}=_0x49f068;return _0x2c5bc5==_0x431eba?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x49f068[_0x1b19cb(0x1c0)](_0x1b19cb(0x219))&&_0x49f068[_0x1b19cb(0x1c0)]('clientip')){const {username:_0x6bcb5d,clientip:_0x2a14c4}=_0x49f068;return settings[_0x1b19cb(0xda)]==_0x6bcb5d&&_0x2c5bc5==_0x2a14c4?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x51a087=>{const _0x55b10c=_0x231df8;if(_0x51a087){const _0x1e0774=devices[_0x51a087]['ip'];return jwt[_0x55b10c(0xc9)]({'username':settings['bbUsername'],'clientip':_0x1e0774},secure[_0x55b10c(0x244)]+_0x51a087,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x405402=>{const _0x429155=_0x231df8;if(_0x405402){const _0x217389=devices[_0x405402]['ip'];return jwt[_0x429155(0xc9)]({'clientip':_0x217389},secure[_0x429155(0x244)]+_0x405402,{'expiresIn':devices[_0x405402][_0x429155(0x1f4)][_0x429155(0x16c)]*0x3c});}else return![];},telegramIpApproved=_0x21d1ad=>{const _0x58ec34=_0x231df8;let _0x38fa39=![];return devices[_0x21d1ad]['telegramIpApproval']&&devices[_0x21d1ad]['telegramIpApproval'][_0x58ec34(0x16c)]!=_0x58ec34(0x17a)&&(_0x38fa39=devices[_0x21d1ad][_0x58ec34(0x1f4)][_0x58ec34(0x26b)]==devices[_0x21d1ad]['ip']&&new Date()[_0x58ec34(0x248)]()-devices[_0x21d1ad]['telegramIpApproval']['timestamp']<devices[_0x21d1ad][_0x58ec34(0x1f4)][_0x58ec34(0x16c)]*0x3c*0x3e8),_0x38fa39;},telegram2FaApproved=_0x4fa5aa=>{const _0x5e87d5=_0x231df8;let _0x269db5=![];return devices[_0x4fa5aa]['telegram2FaApproval']&&devices[_0x4fa5aa][_0x5e87d5(0x1a7)][_0x5e87d5(0x16c)]!=_0x5e87d5(0x17a)&&(_0x269db5=devices[_0x4fa5aa]['telegram2FaApproval'][_0x5e87d5(0x26b)]==devices[_0x4fa5aa]['ip']&&new Date()[_0x5e87d5(0x248)]()-devices[_0x4fa5aa]['telegram2FaApproval'][_0x5e87d5(0x14a)]<devices[_0x4fa5aa]['telegram2FaApproval'][_0x5e87d5(0x16c)]*0x3c*0x3e8),_0x269db5;},normalizeIP=_0x374af6=>{const _0x73651e=_0x231df8;let _0x2130e0=null,_0x15c33a=null;if(ipaddr['isValid'](_0x374af6)){const _0x4fbe91=ipaddr[_0x73651e(0x239)](_0x374af6);_0x4fbe91[_0x73651e(0x13d)]()===_0x73651e(0x214)?(_0x4fbe91[_0x73651e(0x1e9)]()&&(_0x2130e0=_0x4fbe91[_0x73651e(0x102)]()[_0x73651e(0x259)]()),_0x15c33a=_0x4fbe91[_0x73651e(0x259)]()):(_0x2130e0=_0x4fbe91[_0x73651e(0x259)](),_0x15c33a=_0x4fbe91[_0x73651e(0xd0)]()[_0x73651e(0x259)]());}return{'show':_0x2130e0?_0x2130e0:_0x15c33a,'store':_0x15c33a};};function formatDate(_0x155c41){const _0x3abe99=_0x231df8;return _0x155c41['getFullYear']()+'/'+(_0x155c41[_0x3abe99(0x24e)]()+0x1)[_0x3abe99(0x259)]()[_0x3abe99(0x127)](0x2,'0')+'/'+_0x155c41[_0x3abe99(0x228)]()[_0x3abe99(0x259)]()[_0x3abe99(0x127)](0x2,'0')+'\x20'+_0x155c41[_0x3abe99(0x10d)]()[_0x3abe99(0x259)]()['padStart'](0x2,'0')+':'+_0x155c41[_0x3abe99(0x194)]()[_0x3abe99(0x259)]()['padStart'](0x2,'0')+':'+_0x155c41['getSeconds']()[_0x3abe99(0x259)]()['padStart'](0x2,'0');}function sleep(_0x4abef3){return new Promise(_0x2cf9f9=>setTimeout(_0x2cf9f9,_0x4abef3));}