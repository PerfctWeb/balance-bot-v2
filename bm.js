const _0x1faf8d=_0x19fd;(function(_0x2e5443,_0x414e4f){const _0x105683=_0x19fd,_0x441cd5=_0x2e5443();while(!![]){try{const _0x650c51=-parseInt(_0x105683(0x2e2))/0x1*(parseInt(_0x105683(0x281))/0x2)+parseInt(_0x105683(0x22d))/0x3+parseInt(_0x105683(0x220))/0x4*(-parseInt(_0x105683(0x386))/0x5)+-parseInt(_0x105683(0x339))/0x6*(-parseInt(_0x105683(0x2bf))/0x7)+-parseInt(_0x105683(0x267))/0x8*(parseInt(_0x105683(0x351))/0x9)+-parseInt(_0x105683(0x2dd))/0xa+parseInt(_0x105683(0x352))/0xb;if(_0x650c51===_0x414e4f)break;else _0x441cd5['push'](_0x441cd5['shift']());}catch(_0x1b10d0){_0x441cd5['push'](_0x441cd5['shift']());}}}(_0x44ee,0x979f0));const _0x5076f2=function(){let _0xe3a382=!![];return function(_0x1603a9,_0x2359f8){const _0x3a48bd=_0xe3a382?function(){if(_0x2359f8){const _0x183de2=_0x2359f8['apply'](_0x1603a9,arguments);return _0x2359f8=null,_0x183de2;}}:function(){};return _0xe3a382=![],_0x3a48bd;};}(),_0x1767bd=_0x5076f2(this,function(){const _0x10dc04=_0x19fd;return _0x1767bd['toString']()['search'](_0x10dc04(0x377))[_0x10dc04(0x39b)]()[_0x10dc04(0x346)](_0x1767bd)[_0x10dc04(0x26d)](_0x10dc04(0x377));});_0x1767bd();'use strict';process[_0x1faf8d(0x1da)][_0x1faf8d(0x1e5)]=0x1;const childProcess=require(_0x1faf8d(0x310)),fs=require('fs'),fns=require(_0x1faf8d(0x373)),low=require(_0x1faf8d(0x325)),FileSync=require(_0x1faf8d(0x273)),path=require(_0x1faf8d(0x359)),crypto=require(_0x1faf8d(0x209)),forge=require(_0x1faf8d(0x2a3)),bcrypt=require(_0x1faf8d(0x2e6)),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x1faf8d(0x366))(process[_0x1faf8d(0x33a)][_0x1faf8d(0x39c)](0x2))['argv'],uuidRandom=require(_0x1faf8d(0x287)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require('mixpanel'),axios=require(_0x1faf8d(0x222)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x1faf8d(0x24a)),{networkInterfaces}=require('os'),JSZip=require(_0x1faf8d(0x2d6)),PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x1faf8d(0x257)](PORT)&&(console[_0x1faf8d(0x256)](_0x1faf8d(0x247)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x1faf8d(0x28f)](0x1));const HOST=argv[_0x1faf8d(0x2d9)]||null,userID=argv[_0x1faf8d(0x2cb)]||'',debugging=argv['d']||![],nodeversion=process[_0x1faf8d(0x33f)][_0x1faf8d(0x33c)];let bbpath=_0x1faf8d(0x290),bbpath2='';const botfile='bot.js',configfile=_0x1faf8d(0x37c),settingsfile='bb-settings.json',securefile=_0x1faf8d(0x286),environment=require('./'+bbpath2+_0x1faf8d(0x30d))[_0x1faf8d(0x1b8)]||_0x1faf8d(0x362),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x1faf8d(0x371)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x1faf8d(0x3b1),logspath=userID?bbpath+_0x1faf8d(0x2de)+userID+'/':bbpath+_0x1faf8d(0x2de),zippath=userID?bbpath+_0x1faf8d(0x311)+userID+'/':bbpath+_0x1faf8d(0x311),loggerfile=fs['createWriteStream'](logspath+_0x1faf8d(0x245),{'flags':'a'}),temppath=userID?bbpath+_0x1faf8d(0x23b)+userID+'/':bbpath+_0x1faf8d(0x23b);!fs[_0x1faf8d(0x203)](configpath)&&fs[_0x1faf8d(0x2a6)](configpath);!fs[_0x1faf8d(0x203)](configbackuppath)&&fs[_0x1faf8d(0x2a6)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x1faf8d(0x203)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x1faf8d(0x203)](temppath)&&fs[_0x1faf8d(0x2a6)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x1faf8d(0x2f8)]({'bots':[]})[_0x1faf8d(0x1f9)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x1faf8d(0x2b4),'onepagemode':![],'marketcapApi':''}})[_0x1faf8d(0x1f9)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x1faf8d(0x2f8)]({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel[_0x1faf8d(0x204)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x1faf8d(0x2e4)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x1faf8d(0x33e)]&&(settings[_0x1faf8d(0x33e)]!=''&&settings[_0x1faf8d(0x33e)]!=_0x1faf8d(0x26a))&&settings[_0x1faf8d(0x35c)]&&settings[_0x1faf8d(0x35c)]!='')initTelegram();const parseColor=(_0x318050,_0x3877cc)=>{const _0xe6c18f=_0x1faf8d,_0x3163ef=/#[A-Z]{3}#/g;if(typeof _0x318050==_0xe6c18f(0x28d)){!_0x3877cc?_0x318050=_0x318050[_0xe6c18f(0x336)](_0x3163ef,''):(_0x318050=_0x318050[_0xe6c18f(0x336)](/#BLU#/g,_0xe6c18f(0x370)),_0x318050=_0x318050[_0xe6c18f(0x336)](/#RED#/g,'\x1b[31m'),_0x318050=_0x318050['replace'](/#YEL#/g,_0xe6c18f(0x2ed)),_0x318050=_0x318050[_0xe6c18f(0x336)](/#MAG#/g,'\x1b[35m'),_0x318050=_0x318050['replace'](/#CYA#/g,_0xe6c18f(0x224)),_0x318050=_0x318050[_0xe6c18f(0x336)](/#RES#/g,_0xe6c18f(0x3bd)));;}return _0x318050;},logger={'screen':_0x28fd0e=>{console['log'](parseColor(_0x28fd0e,!![]));},'simple':_0x56b398=>{const _0x4d87ae=_0x1faf8d;console['log'](parseColor(_0x56b398,!![])),loggerfile[_0x4d87ae(0x1f9)](util['format'](parseColor(_0x56b398,![]))+'\x0a');},'full':async _0x1abbf8=>{const _0x21c784=_0x1faf8d,_0x989ca5=getTimeStamp()+_0x21c784(0x2fb)+_0x1abbf8;console[_0x21c784(0x256)](parseColor(_0x989ca5,!![])),loggerfile['write'](util[_0x21c784(0x31d)](parseColor(_0x989ca5,![]))+'\x0a');if(tgBot&&settings[_0x21c784(0x30e)]&&settings[_0x21c784(0x32a)]!=_0x21c784(0x350))await sendTelegram(settings['telegramChatId'],_0x21c784(0x318)+parseColor(_0x1abbf8,![]));},'debug':async(_0x993ec2,_0x579d58='')=>{const _0x2bac61=_0x1faf8d,_0x57e173=getTimeStamp()+_0x2bac61(0x39f)+_0x993ec2;if(debugging)console[_0x2bac61(0x256)](parseColor(_0x57e173,!![]));loggerfile[_0x2bac61(0x1f9)](util['format'](parseColor(_0x57e173,![]))+'\x0a');if(_0x579d58){if(debugging)console[_0x2bac61(0x256)](_0x579d58);loggerfile[_0x2bac61(0x1f9)](util[_0x2bac61(0x31d)](_0x579d58)+'\x0a');}}};let terminating=![];process['on'](_0x1faf8d(0x2f5),function(_0x552ba9){const _0x4cf39b=_0x1faf8d;_0x552ba9[_0x4cf39b(0x39b)]()['includes'](_0x4cf39b(0x1e6))?(logger[_0x4cf39b(0x392)](_0x4cf39b(0x289)+_0x552ba9[_0x4cf39b(0x378)]+_0x4cf39b(0x2ac)),process['send']({'terminate':!![]},_0x4b03d8=>{})):logger['simple'](_0x552ba9);}),process['on'](_0x1faf8d(0x28f),()=>{const _0xc54041=_0x1faf8d;stopAllBots(),process[_0xc54041(0x28f)](0x0);}),process['on'](_0x1faf8d(0x35d),()=>{const _0x49b045=_0x1faf8d;stopAllBots(),process[_0x49b045(0x28f)](0x0);}),process['on'](_0x1faf8d(0x390),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x1faf8d(0x30d))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x1faf8d(0x24c)),app=express(),http=require(_0x1faf8d(0x388))[_0x1faf8d(0x37b)](app);app[_0x1faf8d(0x38a)](fileUpload({'useTempFiles':!![]})),app['get'](_0x1faf8d(0x3ac),async(_0x24d9e9,_0x33fbec)=>{const _0x1aaa4e=_0x1faf8d,_0x2d2349=_0x24d9e9[_0x1aaa4e(0x1d0)][_0x1aaa4e(0x344)],_0x10ff48=getClientsWithBotID(_0x1aaa4e(0x2e8)),_0x4e8377=_0x24d9e9[_0x1aaa4e(0x321)][_0x1aaa4e(0x211)],_0x4252d0=timelyDecrypt(_0x4e8377,![]),_0x4eb79d=_0x10ff48['find'](_0x4f62e7=>_0x4f62e7[_0x1aaa4e(0x211)]==_0x4252d0);if(_0x4eb79d){const _0x490bc9=normalizeIP(_0x24d9e9[_0x1aaa4e(0x2a7)]['remoteAddress'])[_0x1aaa4e(0x2d0)],_0x324ae7=_0x24d9e9[_0x1aaa4e(0x321)][_0x1aaa4e(0x279)];if(validateAccess(_0x324ae7,_0x4252d0,_0x490bc9)[_0x1aaa4e(0x2a5)])_0x2d2349==_0x1aaa4e(0x210)&&await backupConfigFiles(),await zipFiles(_0x2d2349),_0x33fbec['download'](zippath+(_0x2d2349+_0x1aaa4e(0x24e)),_0x3927cc=>{const _0x4c7075=_0x1aaa4e;_0x3927cc&&(logger[_0x4c7075(0x338)](_0x4c7075(0x1b9)+_0x2d2349),logger['simple'](_0x3927cc));});else logger[_0x1aaa4e(0x338)](_0x1aaa4e(0x1bc)+_0x2d2349+_0x1aaa4e(0x38c));}else logger[_0x1aaa4e(0x338)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2d2349+_0x1aaa4e(0x28e));}),app[_0x1faf8d(0x2b3)](_0x1faf8d(0x354),async(_0x4558ef,_0x596395)=>{const _0x52cf75=_0x1faf8d,_0xa8c2cc=getClientsWithBotID(_0x52cf75(0x2e8)),_0x2e48cb=_0x4558ef[_0x52cf75(0x321)][_0x52cf75(0x211)],_0x56755d=timelyDecrypt(_0x2e48cb,![]),_0x119929=_0xa8c2cc['find'](_0x365605=>_0x365605['uuid']==_0x56755d);logger[_0x52cf75(0x2b7)](_0x52cf75(0x1df));if(_0x119929){const _0x3bdba8=normalizeIP(_0x4558ef[_0x52cf75(0x2a7)][_0x52cf75(0x285)])[_0x52cf75(0x2d0)],_0x2bf319=_0x4558ef[_0x52cf75(0x321)][_0x52cf75(0x279)];if(validateAccess(_0x2bf319,_0x56755d,_0x3bdba8)['allow']){if(_0x4558ef[_0x52cf75(0x358)]){const _0x516d48=_0x4558ef[_0x52cf75(0x358)][_0x52cf75(0x3b4)];await _0x516d48['mv'](temppath+_0x516d48['name']),_0x596395[_0x52cf75(0x244)]({'status':!![],'message':_0x52cf75(0x2f2)});const _0x1deb5d=getBotsWithMode();_0x1deb5d['length']>0x0?confirmRestore(temppath,_0x516d48[_0x52cf75(0x2b2)]):unzipFile(temppath,_0x516d48[_0x52cf75(0x2b2)]);}}else logger[_0x52cf75(0x338)](_0x52cf75(0x1dd));}else logger['full'](_0x52cf75(0x342));}),app[_0x1faf8d(0x38a)](express['static'](path[_0x1faf8d(0x35b)](__dirname,bbpath2,_0x1faf8d(0x319)))),app[_0x1faf8d(0x38a)](express[_0x1faf8d(0x2bc)](path[_0x1faf8d(0x35b)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x3e7dcb,_0x5bd7f2){const _0xf80472=_0x1faf8d;_0x5bd7f2[_0xf80472(0x37a)](path[_0xf80472(0x35b)](__dirname,bbpath2,_0xf80472(0x319),'index.html'));}),app[_0x1faf8d(0x379)]('/:bot',function(_0x185e9e,_0x701649){const _0x8fd76a=_0x1faf8d;_0x701649['sendFile'](path[_0x8fd76a(0x35b)](__dirname,bbpath2,_0x8fd76a(0x2c9),_0x8fd76a(0x3c5)));}),app[_0x1faf8d(0x379)](_0x1faf8d(0x3bf),(_0x4247e2,_0x3716da)=>{const _0x791fb2=_0x1faf8d;_0x3716da[_0x791fb2(0x37a)](path[_0x791fb2(0x35b)](__dirname,bbpath2,_0x791fb2(0x2c9),_0x791fb2(0x3c5)));}),app[_0x1faf8d(0x379)](_0x1faf8d(0x26e),(_0x3ded7b,_0x1e3ff1)=>{const _0x24e31b=_0x1faf8d;_0x1e3ff1[_0x24e31b(0x37a)](path[_0x24e31b(0x35b)](__dirname,bbpath2,_0x24e31b(0x2c9),_0x24e31b(0x3c5)));}),app[_0x1faf8d(0x379)](_0x1faf8d(0x255),(_0x5192f4,_0x47af9e)=>{const _0x567e63=_0x1faf8d;_0x47af9e[_0x567e63(0x37a)](path[_0x567e63(0x35b)](__dirname,bbpath2,_0x567e63(0x2c9),_0x567e63(0x3c5)));}),app[_0x1faf8d(0x379)]('/:bot/history',(_0x35ed30,_0x1507e6)=>{const _0x11fd6e=_0x1faf8d;_0x1507e6[_0x11fd6e(0x37a)](path[_0x11fd6e(0x35b)](__dirname,bbpath2,_0x11fd6e(0x2c9),'index.html'));}),app[_0x1faf8d(0x379)](_0x1faf8d(0x31e),(_0x538f51,_0x317036)=>{const _0x3e62c5=_0x1faf8d;_0x317036[_0x3e62c5(0x37a)](path['join'](__dirname,bbpath2,'build',_0x3e62c5(0x3c5)));}),app[_0x1faf8d(0x379)](_0x1faf8d(0x27d),(_0x22020c,_0x428efc)=>{const _0x1b2ff7=_0x1faf8d;_0x428efc[_0x1b2ff7(0x37a)](path[_0x1b2ff7(0x35b)](__dirname,bbpath2,_0x1b2ff7(0x2c9),_0x1b2ff7(0x3c5)));});if(HOST)http['listen'](PORT,HOST);else http[_0x1faf8d(0x1f1)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x208dac=_0x1faf8d;let _0x1dae64='[ip-address]';const _0x13b6cf=networkInterfaces(),_0x12de4b={};for(const _0x13c4a6 of Object[_0x208dac(0x25b)](_0x13b6cf)){for(const _0x66b636 of _0x13b6cf[_0x13c4a6]){if((_0x66b636[_0x208dac(0x1d2)]==_0x208dac(0x2f9)||_0x66b636['family']==0x4)&&!_0x66b636[_0x208dac(0x3ae)]){const _0x1705fa=ipaddr[_0x208dac(0x237)](_0x66b636[_0x208dac(0x36b)])['range']();_0x1705fa!='private'&&(!_0x12de4b[_0x13c4a6]&&(_0x12de4b[_0x13c4a6]=[]),_0x12de4b[_0x13c4a6]['push'](_0x66b636[_0x208dac(0x36b)]),_0x1dae64=_0x66b636['address']);}}}return{'serverip':_0x1dae64,'netinterfaces':_0x12de4b};}async function startServer(){const _0x191f2d=_0x1faf8d,{serverip:_0x564dca,netinterfaces:_0x5c3b2e}=getServerIP();logger['simple'](''),logger[_0x191f2d(0x392)](_0x191f2d(0x2b9)),await logger[_0x191f2d(0x338)](_0x191f2d(0x389)+serverversion+_0x191f2d(0x303)+(environment==_0x191f2d(0x300)?_0x191f2d(0x3bc):'')+'\x0a'+(_0x191f2d(0x2cd)+PORT+_0x191f2d(0x374))+(_0x191f2d(0x2e3)+_0x564dca+':'+PORT+_0x191f2d(0x213))),logger[_0x191f2d(0x392)](_0x191f2d(0x2b9));if(config[_0x191f2d(0x32e)]!=0x0)for(const _0x555f4f of config){const _0x2373d7=_0x555f4f['mode']==_0x191f2d(0x2f1)?'a':'m';if(_0x555f4f[_0x191f2d(0x1e0)]==_0x191f2d(0x229)||_0x555f4f[_0x191f2d(0x1e0)]==_0x191f2d(0x214))await logger[_0x191f2d(0x338)](_0x191f2d(0x274)+_0x2373d7+_0x191f2d(0x24b)+_0x555f4f[_0x191f2d(0x382)]+_0x191f2d(0x349)+_0x555f4f[_0x191f2d(0x200)]),startBot([_0x555f4f[_0x191f2d(0x382)],userID],{'cwd':bbpath},function(_0x1ef898){const _0x2befc9=_0x191f2d;if(_0x1ef898)logger[_0x2befc9(0x338)](_0x1ef898);});else(_0x555f4f[_0x191f2d(0x1e0)]==_0x191f2d(0x3a0)||_0x555f4f['status']==_0x191f2d(0x1ef))&&await logger[_0x191f2d(0x338)](_0x191f2d(0x1fc)+_0x2373d7+_0x191f2d(0x21e)+_0x555f4f[_0x191f2d(0x382)]+_0x191f2d(0x349)+_0x555f4f[_0x191f2d(0x200)]);}else!newBot&&logger[_0x191f2d(0x392)](_0x191f2d(0x33d));if(newBot)addBot();logger['simple'](_0x191f2d(0x2b9)),logger[_0x191f2d(0x392)](''),await logger['debug'](_0x191f2d(0x2c5)+nodeversion),await logger[_0x191f2d(0x2b7)](_0x191f2d(0x293),_0x5c3b2e);}function startSocket(){const _0x131123=_0x1faf8d;io['on'](_0x131123(0x3c7),_0x5eee00=>{const _0x521ac6=_0x131123;let _0x16f4ad,_0x192c23,_0x4a9702,_0x15f17d,_0xbece36;const _0x1e667b=_0x5eee00['handshake'][_0x521ac6(0x321)]['referer'];_0x192c23=_0x1e667b[_0x521ac6(0x2c2)](/bot[0-9]{3}/);if(_0x192c23)_0x4a9702=_0x192c23[0x0][_0x521ac6(0x2c2)](/[0-9]{3}/);if(_0x4a9702)_0x16f4ad=_0x4a9702[0x0];else _0x16f4ad=_0x521ac6(0x2e8);const _0x4a5234=_0x5eee00[_0x521ac6(0x1ee)]['auth'][_0x521ac6(0x341)];if(!_0x4a5234)_0x5eee00[_0x521ac6(0x34a)](_0x521ac6(0x1e0),{'publicKey':secure['publicKey']});else{_0x15f17d=timelyDecrypt(_0x4a5234,![]);if(!_0x15f17d)_0x5eee00[_0x521ac6(0x34a)]('status',{'publicKey':secure[_0x521ac6(0x1b5)]});else{_0xbece36=normalizeIP(_0x5eee00['conn'][_0x521ac6(0x285)])[_0x521ac6(0x2d0)];if(!devices[_0x15f17d])devices[_0x15f17d]={'uuid':_0x15f17d,'access':{'token':null}};devices[_0x15f17d]['ip']=_0xbece36;const _0x35e543=addClient(_0x5eee00['id'],_0x15f17d,_0x16f4ad);setAccess(_0x35e543),emitMessages(),_0x5eee00['on'](_0x521ac6(0x31b),_0x20cd94=>{const _0x4e2377=_0x521ac6,_0x53ae16=timelyDecrypt(_0x20cd94['password'],!![],_0x4e2377(0x2fe));if(_0x53ae16){_0x20cd94={'username':_0x20cd94[_0x4e2377(0x235)],'password':_0x53ae16},devices[_0x15f17d][_0x4e2377(0x25f)]=validateCredentials(_0x20cd94,_0x15f17d);if(devices[_0x15f17d][_0x4e2377(0x25f)]['allow']==![]&&devices[_0x15f17d][_0x4e2377(0x25f)][_0x4e2377(0x381)]=='2FA\x20login\x20required')_0x5eee00['emit'](_0x4e2377(0x1e0),{'access':devices[_0x15f17d][_0x4e2377(0x25f)]}),loginAccess2FA(_0x15f17d,_0xbece36);else{if(devices[_0x15f17d]['access'][_0x4e2377(0x2a5)]==![]&&devices[_0x15f17d]['access'][_0x4e2377(0x381)]==_0x4e2377(0x251))_0x5eee00[_0x4e2377(0x34a)]('status',{'access':devices[_0x15f17d][_0x4e2377(0x25f)]});else devices[_0x15f17d][_0x4e2377(0x25f)][_0x4e2377(0x2a5)]&&devices[_0x15f17d][_0x4e2377(0x25f)][_0x4e2377(0x381)]==_0x4e2377(0x272)&&(getClientsWithUuid(_0x15f17d)[_0x4e2377(0x1d8)](_0x431200=>{setAccess(_0x431200);}),logger[_0x4e2377(0x2b7)]('Logged\x20in\x20user\x20...'+_0x15f17d['slice'](-0x8)),setTokenRefresh(_0x15f17d),setSessionTimeout(_0x4e2377(0x31b),_0x15f17d));}}else logger[_0x4e2377(0x338)](_0x4e2377(0x375));}),_0x5eee00['on'](_0x521ac6(0x2d1),()=>{resetPassword();}),_0x5eee00['on'](_0x521ac6(0x363),_0x348146=>{removeClient(_0x5eee00['id']);}),_0x16f4ad==_0x521ac6(0x2e8)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x41564f){const _0x555883=_0x1faf8d;if(_0x41564f!=_0x555883(0x2e8)&&config[_0x555883(0x27f)]!=''){if(pid[_0x41564f])pid[_0x41564f]['send']({'function':_0x555883(0x3a6),'args':null});}_0x41564f!=_0x555883(0x2e8)&&broadcastToBots('bots',JSON[_0x555883(0x2ef)](config));}function reloadBotManager(){const _0x445986=_0x1faf8d;getClientsWithBotID(_0x445986(0x2e8))[_0x445986(0x1d8)](_0x361c38=>{const _0x2d3e4c=_0x445986;getSocket(_0x361c38['id'])['emit'](_0x2d3e4c(0x1e0),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x46d97e){const _0x57c3a4=_0x1faf8d,_0x4d2e8c=io[_0x57c3a4(0x1c6)]['get']('/');return _0x4d2e8c[_0x57c3a4(0x37f)][_0x57c3a4(0x379)](_0x46d97e);}function setAccess(_0x517ec2){const _0x2eaf38=_0x1faf8d,_0x76b28b=getSocket(_0x517ec2['id']),_0x5eb876=_0x517ec2[_0x2eaf38(0x211)],_0x4bf8d5=_0x517ec2[_0x2eaf38(0x201)];devices[_0x5eb876][_0x2eaf38(0x25f)]=validateAccess(devices[_0x5eb876][_0x2eaf38(0x25f)][_0x2eaf38(0x2bb)],_0x5eb876),logger[_0x2eaf38(0x2b7)]('Setting\x20access:\x20'+devices[_0x5eb876][_0x2eaf38(0x25f)]['reason']+'\x20|\x20client:\x20...'+_0x517ec2['id'][_0x2eaf38(0x39c)](-0x8)+_0x2eaf38(0x2d3)+_0x5eb876[_0x2eaf38(0x39c)](-0x8)),_0x76b28b[_0x2eaf38(0x35b)](_0x5eb876);if(devices[_0x5eb876][_0x2eaf38(0x25f)][_0x2eaf38(0x2a5)]){_0x76b28b[_0x2eaf38(0x35b)](_0x4bf8d5);if(_0x4bf8d5=='botmanager')initializeSocketBotManager(_0x76b28b);else initializeSocketBot(_0x76b28b);initClient(_0x4bf8d5);}devices[_0x5eb876]['access'][_0x2eaf38(0x2bb)]&&devices[_0x5eb876][_0x2eaf38(0x25f)][_0x2eaf38(0x381)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x2eaf38(0x221),_0x5eb876),devices[_0x5eb876]['access'][_0x2eaf38(0x2bb)]&&devices[_0x5eb876][_0x2eaf38(0x25f)]['reason']==_0x2eaf38(0x1fe)&&setSessionTimeout(_0x2eaf38(0x31b),_0x5eb876),_0x76b28b[_0x2eaf38(0x34a)]('status',{'status':_0x517ec2['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5eb876][_0x2eaf38(0x25f)],'externalip':devices[_0x5eb876]['ip'],'publicKey':secure[_0x2eaf38(0x1b5)],'userid':settings[_0x2eaf38(0x307)],'validInstallation':validInstallation}),devices[_0x5eb876]['access'][_0x2eaf38(0x2a5)]==![]&&devices[_0x5eb876]['access'][_0x2eaf38(0x381)]==_0x2eaf38(0x27a)&&temporaryAccess2FA(_0x5eb876,devices[_0x5eb876]['ip']);}function setSessionTimeout(_0x3ac686,_0x8ce36){const _0x43395b=_0x1faf8d;let _0x51a414;if(_0x3ac686==_0x43395b(0x31b))_0x51a414=loginExpiry*0x3c*0x3e8;else _0x51a414=devices[_0x8ce36][_0x43395b(0x3ad)]['expiry']*0x3c*0x3e8-(new Date()[_0x43395b(0x269)]()-devices[_0x8ce36]['telegramIpApproval'][_0x43395b(0x395)]);if(devices[_0x8ce36][_0x43395b(0x1d3)])clearTimeout(devices[_0x8ce36]['pidExpireLogin']);devices[_0x8ce36][_0x43395b(0x1d3)]=setTimeout(()=>{const _0x4dde54=_0x43395b;if(devices[_0x8ce36][_0x4dde54(0x297)])clearTimeout(devices[_0x8ce36][_0x4dde54(0x297)]);removeSocketListeners(_0x8ce36),addBlacklist(_0x8ce36),devices[_0x8ce36][_0x4dde54(0x3ad)]=null,devices[_0x8ce36][_0x4dde54(0x21f)]=null,devices[_0x8ce36][_0x4dde54(0x25f)][_0x4dde54(0x2bb)]=null,logger[_0x4dde54(0x2b7)](_0x4dde54(0x1ba)+_0x8ce36[_0x4dde54(0x39c)](-0x8)),devices[_0x8ce36]['access']=validateAccess(devices[_0x8ce36][_0x4dde54(0x25f)][_0x4dde54(0x2bb)],_0x8ce36),!(devices[_0x8ce36][_0x4dde54(0x25f)][_0x4dde54(0x2a5)]&&devices[_0x8ce36][_0x4dde54(0x25f)][_0x4dde54(0x381)]==_0x4dde54(0x3b2))&&(_0x3ac686==_0x4dde54(0x31b)?io['to'](_0x8ce36)['emit'](_0x4dde54(0x1e0),{'access':{'allow':![],'reason':_0x4dde54(0x21b),'token':null}}):io['to'](_0x8ce36)['emit']('status',{'access':{'allow':![],'reason':_0x4dde54(0x32b),'token':null}})),devices[_0x8ce36][_0x4dde54(0x25f)][_0x4dde54(0x2bb)]=null;},_0x51a414);}function setTokenRefresh(_0x1cf4a5){const _0x1bf9b9=_0x1faf8d;if(devices[_0x1cf4a5]['pidRefreshToken'])clearTimeout(devices[_0x1cf4a5]['pidRefreshToken']);devices[_0x1cf4a5][_0x1bf9b9(0x297)]=setTimeout(()=>{const _0x41fc26=_0x1bf9b9;getClientsWithUuid(_0x1cf4a5)[_0x41fc26(0x32e)]!=0x0?(devices[_0x1cf4a5]['access']=refreshToken(_0x1cf4a5),io['to'](_0x1cf4a5)[_0x41fc26(0x34a)]('status',{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1cf4a5]['access'],'externalip':devices[_0x1cf4a5]['ip'],'publicKey':secure[_0x41fc26(0x1b5)],'validInstallation':validInstallation}),setTokenRefresh(_0x1cf4a5)):clearTimeout(devices[_0x1cf4a5][_0x41fc26(0x297)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3d5510){const _0x356af6=_0x1faf8d,_0x292106=getClient(_0x3d5510['id'])[_0x356af6(0x211)];_0x3d5510[_0x356af6(0x34a)]('bots',config),_0x3d5510[_0x356af6(0x34a)](_0x356af6(0x2f7),cleanSettings()),_0x3d5510['on'](_0x356af6(0x37e),_0x5c248b=>{const _0x2ddc07=_0x356af6;if(validateAccess(_0x5c248b,_0x292106)[_0x2ddc07(0x2a5)])addBot();else logger[_0x2ddc07(0x338)](_0x2ddc07(0x324));}),_0x3d5510['on'](_0x356af6(0x2ee),(_0x1a0657,_0x2cd893)=>{const _0x3adae4=_0x356af6;if(validateAccess(_0x2cd893,_0x292106)[_0x3adae4(0x2a5)])toggleBot(_0x1a0657[_0x3adae4(0x382)],_0x1a0657[_0x3adae4(0x1e0)],_0x1a0657[_0x3adae4(0x280)]);else logger['full'](_0x3adae4(0x315));}),_0x3d5510['on'](_0x356af6(0x2b5),(_0x4e2b19,_0x224946)=>{const _0x7836ad=_0x356af6;if(validateAccess(_0x224946,_0x292106)['allow'])toggleBotMode(_0x4e2b19);else logger[_0x7836ad(0x338)](_0x7836ad(0x315));}),_0x3d5510['on'](_0x356af6(0x348),(_0xb5492,_0x482498)=>{const _0x30a6b2=_0x356af6;if(validateAccess(_0x482498,_0x292106)[_0x30a6b2(0x2a5)])deleteBot(_0xb5492);else logger[_0x30a6b2(0x338)](_0x30a6b2(0x3a9));}),_0x3d5510['on'](_0x356af6(0x3a3),(_0x39d84e,_0x4f81b4)=>{const _0x58e783=_0x356af6;if(validateAccess(_0x4f81b4,_0x292106)[_0x58e783(0x2a5)])storeSettings(_0x39d84e,!![]);else logger[_0x58e783(0x338)](_0x58e783(0x2df));}),_0x3d5510['on'](_0x356af6(0x2ce),_0x5458c4=>{const _0x3860e9=_0x356af6;if(validateAccess(_0x5458c4,_0x292106)[_0x3860e9(0x2a5)])updateBB(_0x3860e9(0x1c7));else logger[_0x3860e9(0x338)](_0x3860e9(0x29d));}),_0x3d5510['on'](_0x356af6(0x249),_0x2ce45d=>{const _0x4cc1c1=_0x356af6;if(validateAccess(_0x2ce45d,_0x292106)['allow'])updateBB(_0x4cc1c1(0x1e3));else logger[_0x4cc1c1(0x338)](_0x4cc1c1(0x1cd));}),_0x3d5510['on']('get-backup-files',_0x217178=>{const _0x2c6cf4=_0x356af6;if(validateAccess(_0x217178,_0x292106)[_0x2c6cf4(0x2a5)]){const _0x9446a2=getClient(_0x3d5510['id']);if(_0x9446a2)getBackupFiles(_0x9446a2[_0x2c6cf4(0x211)]);else logger[_0x2c6cf4(0x338)](_0x2c6cf4(0x2ea));}else logger['full'](_0x2c6cf4(0x302));}),_0x3d5510['on'](_0x356af6(0x2da),(_0xca4a0c,_0x2617e5)=>{const _0x254eaf=_0x356af6;if(validateAccess(_0x2617e5,_0x292106)[_0x254eaf(0x2a5)])restoreBackupFile(_0xca4a0c);else logger[_0x254eaf(0x338)](_0x254eaf(0x2e5));}),_0x3d5510['on'](_0x356af6(0x1ec),_0x9c564e=>{const _0x4f88ac=_0x356af6;if(validateAccess(_0x9c564e,_0x292106)[_0x4f88ac(0x2a5)])getMessages();else logger['full'](_0x4f88ac(0x299));}),_0x3d5510['on']('confirm-message',(_0x5c3e36,_0x4f6d95)=>{const _0x34a19d=_0x356af6;if(validateAccess(_0x4f6d95,_0x292106)[_0x34a19d(0x2a5)])confirmMessage(_0x5c3e36);else logger[_0x34a19d(0x338)](_0x34a19d(0x1bf));}),_0x3d5510['on'](_0x356af6(0x270),_0xb90e8=>{const _0x2af1a4=_0x356af6;if(validateAccess(_0xb90e8,_0x292106)[_0x2af1a4(0x2a5)]){if(devices[_0x292106][_0x2af1a4(0x297)])clearTimeout(devices[_0x292106][_0x2af1a4(0x297)]);if(devices[_0x292106][_0x2af1a4(0x1d3)])clearTimeout(devices[_0x292106][_0x2af1a4(0x1d3)]);removeSocketListeners(getClient(_0x3d5510['id'])[_0x2af1a4(0x211)]),addBlacklist(_0x292106),devices[_0x292106][_0x2af1a4(0x3ad)]=null,devices[_0x292106][_0x2af1a4(0x21f)]=null,devices[_0x292106]['access'][_0x2af1a4(0x2bb)]=null,logger[_0x2af1a4(0x2b7)](_0x2af1a4(0x320)+_0x292106[_0x2af1a4(0x39c)](-0x8)),io['to'](getClient(_0x3d5510['id'])[_0x2af1a4(0x211)])[_0x2af1a4(0x34a)](_0x2af1a4(0x1e0),{'access':{'allow':![],'reason':_0x2af1a4(0x23a),'token':null}});}else logger[_0x2af1a4(0x338)](_0x2af1a4(0x3a7));});}function initializeSocketBot(_0x5d82a2){const _0x2e4cfc=_0x1faf8d,_0x5b3cbb=getClient(_0x5d82a2['id'])[_0x2e4cfc(0x201)],_0x13c261=getClient(_0x5d82a2['id'])['uuid'];_0x5d82a2['on'](_0x2e4cfc(0x327),(_0x453794,_0x49d2c6)=>{const _0x1dad8b=_0x2e4cfc;if(validateAccess(_0x49d2c6,_0x13c261)[_0x1dad8b(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb]['send']({'function':_0x1dad8b(0x1bd),'args':_0x453794});}else logger[_0x1dad8b(0x338)](_0x1dad8b(0x35f));}),_0x5d82a2['on'](_0x2e4cfc(0x34c),(_0xc9b609,_0x4c6cae)=>{const _0x3969b4=_0x2e4cfc;if(validateAccess(_0x4c6cae,_0x13c261)[_0x3969b4(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x3969b4(0x244)]({'function':_0x3969b4(0x1c2),'args':_0xc9b609});}else logger[_0x3969b4(0x338)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5d82a2['on']('get-portfolio',(_0x40ec3f,_0x2dbfef)=>{const _0x13d85c=_0x2e4cfc;if(validateAccess(_0x2dbfef,_0x13c261)['allow']){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x13d85c(0x244)]({'function':'getPortfolio','args':_0x40ec3f});}else logger['full'](_0x13d85c(0x30a));}),_0x5d82a2['on'](_0x2e4cfc(0x240),(_0x12b46a,_0x449aa4)=>{const _0x14a348=_0x2e4cfc;if(validateAccess(_0x449aa4,_0x13c261)[_0x14a348(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x14a348(0x244)]({'function':_0x14a348(0x3c2),'args':_0x12b46a});}else logger[_0x14a348(0x338)](_0x14a348(0x29c));}),_0x5d82a2['on'](_0x2e4cfc(0x3aa),(_0x402bdd,_0x4b5c73)=>{const _0x3d40df=_0x2e4cfc;if(validateAccess(_0x4b5c73,_0x13c261)[_0x3d40df(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb]['send']({'function':_0x3d40df(0x301),'args':_0x402bdd});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x5d82a2['on'](_0x2e4cfc(0x2aa),(_0x406f39,_0x3fd5ff)=>{const _0x12aee1=_0x2e4cfc;if(validateAccess(_0x3fd5ff,_0x13c261)['allow']){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x12aee1(0x244)]({'function':'storeFiat','args':_0x406f39});}else logger[_0x12aee1(0x338)](_0x12aee1(0x20b));}),_0x5d82a2['on'](_0x2e4cfc(0x372),_0x25a157=>{const _0x591bbc=_0x2e4cfc;if(validateAccess(_0x25a157,_0x13c261)[_0x591bbc(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x591bbc(0x244)]({'function':_0x591bbc(0x314),'args':null});}else logger[_0x591bbc(0x338)](_0x591bbc(0x2d7));}),_0x5d82a2['on'](_0x2e4cfc(0x1be),_0x95e8c1=>{const _0x10286d=_0x2e4cfc;if(validateAccess(_0x95e8c1,_0x13c261)[_0x10286d(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x10286d(0x244)]({'function':_0x10286d(0x20d),'args':null});}else logger[_0x10286d(0x338)](_0x10286d(0x271));}),_0x5d82a2['on']('place-order',(_0x40c8b5,_0x2aa4c9)=>{const _0x41e579=_0x2e4cfc;if(validateAccess(_0x2aa4c9,_0x13c261)['allow']){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x41e579(0x244)]({'function':'placeOrder','args':_0x40c8b5});}else logger[_0x41e579(0x338)](_0x41e579(0x387));}),_0x5d82a2['on']('cancel-loading',_0x59107d=>{const _0x4539e8=_0x2e4cfc;if(validateAccess(_0x59107d,_0x13c261)[_0x4539e8(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x4539e8(0x244)]({'function':_0x4539e8(0x246),'args':null});}else logger[_0x4539e8(0x338)](_0x4539e8(0x343));}),_0x5d82a2['on'](_0x2e4cfc(0x1f7),_0x35d724=>{const _0x38f074=_0x2e4cfc;if(validateAccess(_0x35d724,_0x13c261)[_0x38f074(0x2a5)]){if(pid[_0x5b3cbb])pid[_0x5b3cbb][_0x38f074(0x244)]({'function':_0x38f074(0x31c),'args':null});}else logger[_0x38f074(0x338)](_0x38f074(0x3a5));}),_0x5d82a2['on'](_0x2e4cfc(0x2ce),_0x5e4e55=>{const _0x23818b=_0x2e4cfc;if(validateAccess(_0x5e4e55,_0x13c261)[_0x23818b(0x2a5)])updateBB(_0x23818b(0x1c7));else logger['full'](_0x23818b(0x29d));}),_0x5d82a2['on'](_0x2e4cfc(0x1ec),_0x451ca0=>{const _0x190ca4=_0x2e4cfc;if(validateAccess(_0x451ca0,_0x13c261)[_0x190ca4(0x2a5)])getMessages();else logger['full'](_0x190ca4(0x299));}),_0x5d82a2['on'](_0x2e4cfc(0x2af),(_0x4ce506,_0x3d6dc0)=>{const _0x5cbeff=_0x2e4cfc;if(validateAccess(_0x3d6dc0,_0x13c261)[_0x5cbeff(0x2a5)])confirmMessage(_0x4ce506);else logger[_0x5cbeff(0x338)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x5d82a2['on']('logout',_0x1fe947=>{const _0x3fe6db=_0x2e4cfc;if(validateAccess(_0x1fe947,_0x13c261)[_0x3fe6db(0x2a5)]){if(devices[_0x13c261][_0x3fe6db(0x297)])clearTimeout(devices[_0x13c261][_0x3fe6db(0x297)]);if(devices[_0x13c261][_0x3fe6db(0x1d3)])clearTimeout(devices[_0x13c261][_0x3fe6db(0x1d3)]);removeSocketListeners(getClient(_0x5d82a2['id'])[_0x3fe6db(0x211)]),addBlacklist(_0x13c261),devices[_0x13c261][_0x3fe6db(0x3ad)]=null,devices[_0x13c261]['telegram2FaApproval']=null,devices[_0x13c261][_0x3fe6db(0x25f)][_0x3fe6db(0x2bb)]=null,logger['debug'](_0x3fe6db(0x320)+_0x13c261[_0x3fe6db(0x39c)](-0x8)),io['to'](getClient(_0x5d82a2['id'])[_0x3fe6db(0x211)])[_0x3fe6db(0x34a)](_0x3fe6db(0x1e0),{'access':{'allow':![],'reason':_0x3fe6db(0x23a),'token':null}});}else logger[_0x3fe6db(0x338)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1a99ea){const _0x40615b=_0x1faf8d;getClientsWithUuid(_0x1a99ea)[_0x40615b(0x1d8)](_0xa6a337=>{const _0x1e857b=_0x40615b;getSocket(_0xa6a337['id'])[_0x1e857b(0x23d)]();});}function cleanSettings(){const _0x3f2386=_0x1faf8d;let _0x2d1263=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x2d1263={..._0x2d1263,'telegramToken':'************'}),settings[_0x3f2386(0x2f6)]&&settings['bbPassword']!=''&&(_0x2d1263={..._0x2d1263,'bbPassword':_0x3f2386(0x3c6)}),settings['marketcapApi']&&settings[_0x3f2386(0x2c6)]!=''&&(_0x2d1263={..._0x2d1263,'marketcapApi':'************'}),(settings[_0x3f2386(0x2f6)]&&settings[_0x3f2386(0x2f6)]==_0x3f2386(0x26a)||settings[_0x3f2386(0x33e)]&&settings['telegramToken']=='***'||settings[_0x3f2386(0x2c6)]&&settings['marketcapApi']==_0x3f2386(0x26a))&&(_0x2d1263={..._0x2d1263,'restored':{'password':settings[_0x3f2386(0x2f6)]==_0x3f2386(0x26a),'telegram':settings[_0x3f2386(0x33e)]==_0x3f2386(0x26a),'marketcap':settings['marketcapApi']=='***'}}),_0x2d1263;}async function updateBB(_0x5d245a){const _0x4b999c=_0x1faf8d;await backupConfigFiles(),installingUpdate=!![],config[_0x4b999c(0x1d8)](_0x2548cc=>{const _0x171d4c=_0x4b999c;restartBot(_0x2548cc[_0x171d4c(0x382)]);});if(_0x5d245a==_0x4b999c(0x1c7))process['send']({'update':!![],'environment':environment},_0x1e9950=>{});else _0x5d245a==_0x4b999c(0x1e3)&&process[_0x4b999c(0x244)]({'reinstall':!![],'environment':environment},_0x491aa8=>{});}function startBot(_0x509a11,_0x5e2b03,_0x4b8b24){const _0x3ae00a=_0x1faf8d;if(debugging)_0x509a11['push']('-d');let _0x6ab37a=![];const _0x155d4e=_0x509a11[0x0];_0x5e2b03={..._0x5e2b03,'stdio':[_0x3ae00a(0x332),_0x3ae00a(0x332),_0x3ae00a(0x332),'ipc']},pid[_0x155d4e]=childProcess[_0x3ae00a(0x231)](botfile,_0x509a11,_0x5e2b03),pid[_0x155d4e]['on'](_0x3ae00a(0x323),_0x5b5214=>{const _0x4a43ae=_0x3ae00a;switch(Object[_0x4a43ae(0x25b)](_0x5b5214)[0x0]){case _0x4a43ae(0x200):updateBotName(_0x155d4e,_0x5b5214[_0x4a43ae(0x200)]);break;case'updatebotmanager':updateBotManager();break;case'status':updateStatus(_0x155d4e,_0x5b5214['status']);break;case _0x4a43ae(0x280):updateLive(_0x155d4e,_0x5b5214[_0x4a43ae(0x280)]);break;case _0x4a43ae(0x3be):updateLive(_0x155d4e,_0x5b5214['started']),io['to'](_0x155d4e)[_0x4a43ae(0x34a)](_0x4a43ae(0x1e0),{'access':{'allow':![],'reason':_0x4a43ae(0x347),'token':null}});break;case _0x4a43ae(0x3b0):_0x5b5214[_0x4a43ae(0x3b0)]==_0x4a43ae(0x22b)&&restartBot(_0x155d4e);_0x5b5214['stop']==_0x4a43ae(0x21d)&&toggleBot(_0x155d4e,_0x4a43ae(0x3a0),_0x4a43ae(0x329));break;case'telegram':sendTelegramBot(_0x155d4e,_0x5b5214[_0x4a43ae(0x219)]);break;case'telegrammsg':sendTelegramMsg(_0x5b5214[_0x4a43ae(0x1fd)]);break;case _0x4a43ae(0x2a2):io['to'](_0x155d4e)[_0x4a43ae(0x34a)](_0x5b5214['function'],_0x5b5214[_0x4a43ae(0x3b7)]);break;}}),pid[_0x155d4e]['on'](_0x3ae00a(0x2bd),function(_0x199a6c){if(_0x6ab37a)return;_0x6ab37a=!![],_0x4b8b24(_0x199a6c);}),pid[_0x155d4e]['on'](_0x3ae00a(0x28f),async function(_0x3ee70f){const _0xb1622e=_0x3ae00a;if(terminating)return;if(installingUpdate){io[_0xb1622e(0x24d)]();return;}if(_0x6ab37a)return;_0x6ab37a=!![],_0x4b8b24(null);const _0x23fe48=dbConfig[_0xb1622e(0x379)](_0xb1622e(0x1fb))[_0xb1622e(0x28b)]({'botID':_0x155d4e})['value']();_0x23fe48&&(_0x23fe48[_0xb1622e(0x1e0)]==_0xb1622e(0x229)||_0x23fe48['status']=='new')&&(await sleep(0x3e8),updateLive(_0x155d4e,_0xb1622e(0x329)),logger['full'](_0xb1622e(0x1cf)+_0x155d4e),startBot([_0x155d4e,userID],{'cwd':bbpath},function(_0x5ece68){const _0x3410b2=_0xb1622e;if(_0x5ece68)logger[_0x3410b2(0x338)](_0x5ece68);}));});}function stopBot(_0x326532){const _0x472574=_0x1faf8d;getClientsWithBotID(_0x326532)[_0x472574(0x1d8)](_0xcedc9f=>{const _0x272b97=_0x472574;getSocket(_0xcedc9f['id'])[_0x272b97(0x363)](!![]),removeClient(_0xcedc9f['id']);}),pid[_0x326532]&&(pid[_0x326532][_0x472574(0x21d)](),pid[_0x326532]=null);}function stopAllBots(){terminating=!![];const _0xbdacfc=getEnabledBots();_0xbdacfc['forEach'](_0x59977a=>{stopBot(_0x59977a['botID']);});}function restartBot(_0x1d6e88){const _0x2677bd=_0x1faf8d;if(pid[_0x1d6e88])pid[_0x1d6e88][_0x2677bd(0x21d)]();}function addBot(){const _0x37adbf=_0x1faf8d;let _0x27df35;for(let _0x5d3b47=0x1;_0x5d3b47<0x3e9;_0x5d3b47++){_0x27df35=_0x5d3b47['toString']()[_0x37adbf(0x2ae)](0x3,'0');let _0x218fcf=config[_0x37adbf(0x28b)](_0x5db13b=>_0x5db13b[_0x37adbf(0x382)]==_0x27df35);if(!_0x218fcf)break;}if(_0x27df35===_0x37adbf(0x2ba)){logger['full'](_0x37adbf(0x268));return;}logger[_0x37adbf(0x338)](_0x37adbf(0x26c)+_0x27df35),dbConfig[_0x37adbf(0x379)](_0x37adbf(0x1fb))['push']({'botID':_0x27df35,'botname':'Bot\x20'+_0x27df35,'status':'new','live':''})[_0x37adbf(0x1f9)](),startBot([_0x27df35,userID],{'cwd':bbpath},function(_0x1201a6){const _0x593f10=_0x37adbf;if(_0x1201a6)logger[_0x593f10(0x338)](_0x1201a6);}),config=getConfiguration(),io['to'](_0x37adbf(0x2e8))[_0x37adbf(0x34a)](_0x37adbf(0x1fb),config),broadcastToBots(_0x37adbf(0x1fb),JSON[_0x37adbf(0x2ef)](config));}function deleteBot(_0xe0657a){const _0x5d5456=_0x1faf8d;getClientsWithBotID(_0xe0657a)['forEach'](_0x211aa4=>{getSocket(_0x211aa4['id'])['disconnect'](!![]),removeClient(_0x211aa4['id']);}),dbConfig[_0x5d5456(0x379)](_0x5d5456(0x1fb))['remove']({'botID':_0xe0657a})[_0x5d5456(0x1f9)](),logger[_0x5d5456(0x338)](_0x5d5456(0x296)+_0xe0657a),stopBot(_0xe0657a);try{if(fs[_0x5d5456(0x203)](path[_0x5d5456(0x35b)](configpath,_0x5d5456(0x38e)+_0xe0657a+_0x5d5456(0x2fc))))fs[_0x5d5456(0x36f)](path[_0x5d5456(0x35b)](configpath,_0x5d5456(0x38e)+_0xe0657a+'-config.json'));if(fs['existsSync'](path['join'](configpath,'bot-'+_0xe0657a+'-events.json')))fs[_0x5d5456(0x36f)](path['join'](configpath,_0x5d5456(0x38e)+_0xe0657a+_0x5d5456(0x1fa)));if(fs[_0x5d5456(0x203)](path[_0x5d5456(0x35b)](configpath,_0x5d5456(0x38e)+_0xe0657a+'-performance.json')))fs[_0x5d5456(0x36f)](path[_0x5d5456(0x35b)](configpath,_0x5d5456(0x38e)+_0xe0657a+_0x5d5456(0x28a)));if(fs[_0x5d5456(0x203)](path['join'](configpath,_0x5d5456(0x38e)+_0xe0657a+_0x5d5456(0x397))))fs[_0x5d5456(0x36f)](path[_0x5d5456(0x35b)](configpath,_0x5d5456(0x38e)+_0xe0657a+_0x5d5456(0x397)));}catch(_0x48d8f2){if(_0x48d8f2)logger[_0x5d5456(0x338)](_0x5d5456(0x295),_0x48d8f2);}config=getConfiguration(),io['to'](_0x5d5456(0x2e8))['emit'](_0x5d5456(0x1fb),config),broadcastToBots(_0x5d5456(0x1fb),JSON[_0x5d5456(0x2ef)](config));}function toggleBot(_0x15aab4,_0xcbade5,_0x6be59a){const _0x37471b=_0x1faf8d;dbConfig[_0x37471b(0x379)](_0x37471b(0x1fb))[_0x37471b(0x28b)]({'botID':_0x15aab4})[_0x37471b(0x1e4)]({'status':_0xcbade5})[_0x37471b(0x1e4)]({'live':_0x6be59a})[_0x37471b(0x1f9)]();if(_0xcbade5==_0x37471b(0x229)||_0xcbade5==_0x37471b(0x214))logger['full'](_0x37471b(0x1ff)+_0x15aab4),startBot([_0x15aab4,userID],{'cwd':bbpath},function(_0x39f416){const _0x49a6e5=_0x37471b;if(_0x39f416)logger[_0x49a6e5(0x338)](_0x39f416);});else(_0xcbade5=='disabled'||_0xcbade5=='new-disabled')&&(logger[_0x37471b(0x338)](_0x37471b(0x1d6)+_0x15aab4),stopBot(_0x15aab4));config=getConfiguration(),io['to'](_0x37471b(0x2e8))['emit'](_0x37471b(0x1fb),config),broadcastToBots('bots',JSON[_0x37471b(0x2ef)](config));}function toggleStatus(_0x1b582e){const _0x50e9d0=_0x1faf8d;let _0x2a5110=dbConfig[_0x50e9d0(0x379)](_0x50e9d0(0x1fb))[_0x50e9d0(0x28b)]({'botID':_0x1b582e})['value'](),_0xf92dd0;if(_0x2a5110['status']===_0x50e9d0(0x229))_0xf92dd0=_0x50e9d0(0x3a0);else{if(_0x2a5110[_0x50e9d0(0x1e0)]===_0x50e9d0(0x214))_0xf92dd0=_0x50e9d0(0x1ef);else{if(_0x2a5110[_0x50e9d0(0x1e0)]===_0x50e9d0(0x1ef))_0xf92dd0=_0x50e9d0(0x214);else{if(_0x2a5110[_0x50e9d0(0x1e0)]===_0x50e9d0(0x3a0))_0xf92dd0=_0x50e9d0(0x229);}}}return _0xf92dd0;}function updateStatus(_0x40455c,_0x2f0912){const _0x120442=_0x1faf8d;dbConfig[_0x120442(0x379)](_0x120442(0x1fb))[_0x120442(0x28b)]({'botID':_0x40455c})[_0x120442(0x1e4)]({'status':_0x2f0912})[_0x120442(0x1f9)](),config=getConfiguration(),io['to']('botmanager')[_0x120442(0x34a)]('bots',config),broadcastToBots(_0x120442(0x1fb),JSON[_0x120442(0x2ef)](config));}function updateLive(_0x5e1238,_0x46df87){const _0xa39202=_0x1faf8d;dbConfig[_0xa39202(0x379)](_0xa39202(0x1fb))['find']({'botID':_0x5e1238})[_0xa39202(0x1e4)]({'live':_0x46df87})[_0xa39202(0x1f9)](),config=getConfiguration(),io['to']('botmanager')[_0xa39202(0x34a)](_0xa39202(0x1fb),config),broadcastToBots(_0xa39202(0x1fb),JSON['stringify'](config));}function updateBotName(_0x4361e1,_0x21a9fb){const _0x50d5fa=_0x1faf8d;dbConfig[_0x50d5fa(0x379)](_0x50d5fa(0x1fb))[_0x50d5fa(0x28b)]({'botID':_0x4361e1})[_0x50d5fa(0x1e4)]({'botname':_0x21a9fb})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x50d5fa(0x34a)](_0x50d5fa(0x1fb),config),broadcastToBots(_0x50d5fa(0x1fb),JSON[_0x50d5fa(0x2ef)](config));}function updateBotManager(){const _0x391963=_0x1faf8d;config=getConfiguration(),io['to'](_0x391963(0x2e8))['emit']('bots',config),broadcastToBots(_0x391963(0x1fb),JSON['stringify'](config));}function _0x44ee(){const _0x2cd747=['getSeconds','send','/output-000.log','cancelLoading','Error:\x20Invalid\x20argument\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','reinstall-bb','express-fileupload',')\x20|\x20Bot\x20','express','close','.zip','Notifications\x20enabled','isDirectory','invalid\x20credentials','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','readFileSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/:bot/coins','log','test','isIPv4MappedAddress','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','decode64','keys','::1','endsWith','CoinMarketCap\x20API\x20key\x20validated','access','/metrics\x20-\x20show\x20bot\x20performance\x0a','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','Ok,\x20will\x20send\x20alert\x20notifications\x20only','show','toggle','whitelistEnabled','72EXxqvq','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','getTime','***','RSA-OAEP','Starting\x20new\x20bot\x20|\x20Bot\x20','search','/:bot/performance','temporary\x20access\x20not\x20allowed','logout','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','login\x20token\x20generated','lowdb/adapters/FileSync','Starting\x20(','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','lastmsgemitted','button','backup-full@','tkn','2FA\x20required','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Error\x20details:','/:bot/support','rmSync','apiKey','live','28632UKQKkg','generateAsync','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Orders','remoteAddress','bb-secure.json','uuid-random','accept','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','-performance.json','find','disable','string','\x20(2)','exit','bb/','warning','statSync','Network\x20Interfaces:','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Error\x20while\x20deleting\x20config\x20files:\x20','Deleted\x20Bot\x20','pidRefreshToken','output-001.log','Unauthorized\x20attempt\x20to\x20get\x20messages','bb-settings.json','BCT','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','yes','getHours','enable','async','function','node-forge','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','allow','mkdirSync','socket','HTML','push','store-fiat','/status\x20-\x20show\x20bot(s)\x20status\x0a','#RES#','Token\x20blacklisted','padStart','confirm-message','number','output-002.log','name','post','0.0.0','toggle-bot-mode','reply','debug','exp','-----------------------------------------------------------------------------------','1000','token','static','error','$1_$2_$3','68061KoLMEB','Invalid\x20authentication\x20token\x20(1)','sendMetricsTelegram','match','portfolio_','config_all','Node.js\x20v','marketcapApi','login\x20token\x20valid','set','build','Starting\x20Balance\x20Bot\x20update','user','update_yes','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','update-bb','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','store','reset-password','Invalid\x20username\x20or\x20IP\x20address','\x20|\x20user:\x20...','Telegraf\x20error:','bbUsername','jszip','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','No\x20bots\x20running\x20right\x20now','host','restore-backup-file','toIPv4Address','binary','1226870YhHcKR','logs/','Unauthorized\x20attempt\x20to\x20update\x20settings','randomFillSync','pki','12DKaYtu','=>\x20Go\x20to\x20#CYA#http://','api-eu.mixpanel.com','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','bcryptjs','getMonth','botmanager','compareSync','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','privateKeyToPem','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','\x1b[33m','update-bot','stringify','start','auto','File\x20uploaded','Access\x20enabled\x20for\x20','once','uncaughtException','bbPassword','settings','defaults','IPv4','Server',':\x20Bot\x20Mgr\x20>\x20','-config.json','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','|@|','/start','staging','storeHeadless','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','#RES#\x20','whitelist','All\x20bots','publicKeyToPem','userid','writeFileSync','running','Unauthorized\x20attempt\x20to\x20get\x20portfolio','startsWith','mode','version.json','telegramChatId','min','child_process','zip/','notification','Starting\x20Balance\x20Bot\x20reinstallation','resetHistory','Unauthorized\x20attempt\x20to\x20update\x20bot','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','text','Bot\x20Mgr\x20>\x20','build2','hex','login','showConfig','format','/:bot/configuration','<b>Telegram\x20Bot\x20Status:</b>\x0a','Logged\x20out\x20user\x20...','headers','output-003.log','message','Unauthorized\x20attempt\x20to\x20add\x20bot','lowdb','onepagemode','get-logs','Error\x20removing\x20old\x20backup\x20files:','stopped','telegramEvents','temporary\x20access\x20timeout','copyFileSync','event','length','help','getDate','backup-full.zip','inherit','action','https://api.ipify.org?format=json','Notifications\x20types:\x20','replace','tempaccess_15_','full','72bwNeIK','argv','launch','node','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','telegramToken','versions','add','encryptedUuid','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','type','/enable\x20-\x20enable\x20notifications\x0a','constructor','reload','delete-bot','\x20|\x20','emit','config','delete-alerts','config_orders','chat','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','orders','629568DyNjQB','16206465KTUppf','temporary\x20access\x20rejected','/upload-backup','metrics_','sortBy','create','files','path','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','join','telegramUsername','SIGTERM','bbvNew','Unauthorized\x20attempt\x20to\x20get\x20events','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','ipv6','production','disconnect','getMinutes','logs','yargs/yargs','15\x20min','/help\x20-\x20show\x20available\x20commands\x0a','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Restore\x20backup\x20file\x20','address','mtime','sendPortfolioTelegram','editMessageReplyMarkup','unlinkSync','\x1b[34m','clients','reset-history','date-fns','#RES#\x20if\x20running\x20locally\x0a','Unauthorized\x20login\x20attempt\x20(timeout)','\x20mode','(((.+)+)+)+$','port','get','sendFile','createServer','bb-config.json','getUTCHours','add-bot','sockets','loginRequired','reason','botID','all','Login\x20rejected','\x20minutes','5MpibrF','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','http','Starting\x20#RED#Balance\x20Bot\x20v','use','lastmsgtelegram','\x20(1)','sha256','bot-','names','SIGINT','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','simple','30\x20min','Password\x20has\x20been\x20reset\x20to:\x20','timestamp','2FA\x20login\x20required','-results.json','login\x20required','output-000.log','telegramEnabled','toString','slice','off','temporary\x20token\x20generated',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','disabled','getFullYear','Restore\x20process\x20aborted','store-settings','callback','Unauthorized\x20attempt\x20to\x20show\x20configuration','initclient','Unauthorized\x20attempt\x20to\x20log\x20out','secret','Unauthorized\x20attempt\x20to\x20delete\x20bot','store-headless','timeshift','/download/:type','telegramIpApproval','internal','Yes','stop','backup/','login\x20not\x20required','Your\x20installation\x20is\x20already\x20up\x20to\x20date','backupfile','readdirSync','f2aRequired','args','Restore\x20process\x20confirmed',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','User\x20has\x20been\x20validated','messages','(staging)','\x1b[0m','started','/:bot/portfolio','restart_','secure','storeConfiguration','::ffff:127.0.0.1','sign','index.html','************','connection','track','publicKey','success','127.0.0.1','environment','Failed\x20to\x20download\x20','Session\x20expired\x20for\x20user\x20...','backup-full','Unauthorized\x20attempt\x20to\x20download\x20','emitHistory','get-starting-balances','Unauthorized\x20attempt\x20to\x20confirm\x20message','toIPv4MappedAddress','privateKeyFromPem','deleteHistoryAlerts','any','privateKey','order','_nsps','update','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Telegram\x20error:','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','entries','from','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','off_','Restarting\x20Bot\x20','params','code','family','pidExpireLogin','blacklist','hasOwnProperty','Disabled\x20Bot\x20','Restoring\x20bot(s)\x20from\x20backup','forEach','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','env','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','on_','Backup\x20file\x20uploaded','status','file','apiPassword','reinstall','assign','NTBA_FIX_319','address\x20already\x20in\x20use','/names\x20-\x20show\x20bot\x20names\x0a','expiry','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','5\x20min','inlineKeyboard','get-messages','sort','handshake','new-disabled','tempaccess_30_','listen','headless','loadAsync','Bot\x20','bbvReceive','/disable\x20-\x20disable\x20notifications\x0a','show-config','\x20>\x20','write','-events.json','bots','Idling\x20(','telegrammsg','2FA\x20login\x20token\x20generated','Enabled\x20Bot\x20','botname','bot','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','existsSync','init','config_alerts','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','\x20only\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','crypto','All\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','size','getStartingBalances','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','password','backup','uuid','remove','#RES#\x20if\x20running\x20on\x20server','new','2FA\x20login\x20rejected','Login\x20accepted','decrypt','isValid','telegram','restore_yes_','access\x20timeout','temporaryAccessAllowed','kill',')\x20\x20\x20|\x20Bot\x20','telegram2FaApproval','2665348vlyRZQ','2FA','axios','backup-files','\x1b[36m','value','settings.','filter','Notifications\x20disabled','enabled','includes','restart','alerts','1864299vAlGdb','clientip','/restart\x20-\x20restart\x20bot(s)\x0a','latestversion','fork','kind','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','hashSync','username','command','parse','map','reinstall_no','logged\x20out','temp/','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','removeAllListeners','manual','split','store-configuration','portfolio','reject'];_0x44ee=function(){return _0x2cd747;};return _0x44ee();}function toggleBotMode(_0x2a6822){const _0x25e1f4=_0x1faf8d;if(pid[_0x2a6822])pid[_0x2a6822][_0x25e1f4(0x244)]({'function':'toggleBotMode','args':null});else{const _0x4caa09=configpath+'bot-'+_0x2a6822+_0x25e1f4(0x2fc),_0x12605f=fs[_0x25e1f4(0x253)](_0x4caa09),_0x53f576=JSON[_0x25e1f4(0x237)](_0x12605f),_0x4038fe=_0x53f576[_0x25e1f4(0x201)][0x0][_0x25e1f4(0x1f2)];_0x53f576[_0x25e1f4(0x201)][0x0][_0x25e1f4(0x1f2)]=!_0x4038fe;const _0x46dd9c=JSON[_0x25e1f4(0x2ef)](_0x53f576,null,0x2);fs[_0x25e1f4(0x308)](_0x4caa09,_0x46dd9c),config=getConfiguration(),io['to'](_0x25e1f4(0x2e8))['emit'](_0x25e1f4(0x1fb),config),broadcastToBots(_0x25e1f4(0x1fb),JSON[_0x25e1f4(0x2ef)](config));}}function validateTelegram(_0x16e878){const _0xd0f372=_0x1faf8d;if(_0x16e878[_0xd0f372(0x1cc)][_0xd0f372(0x235)]!=settings[_0xd0f372(0x35c)]&&'@'+_0x16e878[_0xd0f372(0x1cc)][_0xd0f372(0x235)]!=settings['telegramUsername']||_0x16e878[_0xd0f372(0x34e)]['id']!=settings[_0xd0f372(0x30e)])return sendTelegram(_0x16e878[_0xd0f372(0x34e)]['id'],_0xd0f372(0x1dc),{'parse_mode':_0xd0f372(0x2a8)}),![];return!![];}async function initTelegram(){const _0x17dabe=_0x1faf8d;if(tgBot)tgBot[_0x17dabe(0x3b0)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x17dabe(0x33e)]);let _0x22ca08=_0x17dabe(0x27b);_0x22ca08+='\x0a',_0x22ca08+=_0x17dabe(0x345),_0x22ca08+=_0x17dabe(0x1f6),_0x22ca08+=_0x17dabe(0x23c),_0x22ca08+=_0x17dabe(0x22f),_0x22ca08+='/on\x20-\x20start\x20bot(s)\x0a',_0x22ca08+='/off\x20-\x20stop\x20bot(s)\x0a',_0x22ca08+=_0x17dabe(0x275),_0x22ca08+=_0x17dabe(0x1e7),_0x22ca08+=_0x17dabe(0x2ab),_0x22ca08+=_0x17dabe(0x260),_0x22ca08+=_0x17dabe(0x294),_0x22ca08+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x22ca08+=_0x17dabe(0x2a4),_0x22ca08+=_0x17dabe(0x368);let _0x49b8b3=_0x17dabe(0x1d9);_0x49b8b3+='\x0a',_0x49b8b3+=_0x22ca08,tgBot['catch']((_0x485f7e,_0x388cf2)=>{const _0x15ba6a=_0x17dabe;logger[_0x15ba6a(0x392)](getTimeStamp()+_0x15ba6a(0x3b9)),logger[_0x15ba6a(0x2b7)](_0x15ba6a(0x2d4),_0x485f7e);}),tgBot[_0x17dabe(0x38a)](async(_0x1f3f99,_0x5a3569)=>{const _0x51f400=_0x17dabe;if(!(!settings['telegramChatId']&&_0x1f3f99[_0x51f400(0x1c7)][_0x51f400(0x323)][_0x51f400(0x317)]==_0x51f400(0x2ff))){if(!validateTelegram(_0x1f3f99))return;}_0x5a3569();}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x2f0),async _0x1f508b=>{const _0x11c9c3=_0x17dabe;if(!settings[_0x11c9c3(0x30e)])updateSetting(_0x11c9c3(0x30e),_0x1f508b[_0x11c9c3(0x34e)]['id']);updateSetting(_0x11c9c3(0x39a),!![]);if(!validateTelegram(_0x1f508b))return;await sendTelegram(_0x1f508b[_0x11c9c3(0x34e)]['id'],_0x49b8b3);}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x2a0),async _0x4f7ee5=>{const _0x47d50d=_0x17dabe;updateSetting(_0x47d50d(0x39a),!![]),await sendTelegram(_0x4f7ee5['chat']['id'],_0x47d50d(0x24f));}),tgBot['command'](_0x17dabe(0x28c),async _0x23a602=>{const _0x4bd2b9=_0x17dabe;await sendTelegram(_0x23a602[_0x4bd2b9(0x34e)]['id'],_0x4bd2b9(0x228)),updateSetting('telegramEnabled',![]);}),tgBot['command'](_0x17dabe(0x34b),async _0x187319=>{const _0xa88fec=_0x17dabe,_0x3ffdd1=Markup[_0xa88fec(0x1eb)]([Markup['button'][_0xa88fec(0x3a4)](_0xa88fec(0x284),'config_orders'),Markup[_0xa88fec(0x277)][_0xa88fec(0x3a4)]('Alerts',_0xa88fec(0x205)),Markup[_0xa88fec(0x277)][_0xa88fec(0x3a4)]('All',_0xa88fec(0x2c4))]);_0x187319[_0xa88fec(0x2b6)](_0xa88fec(0x261),_0x3ffdd1);}),tgBot[_0x17dabe(0x333)](_0x17dabe(0x34d),async _0x496fe6=>{const _0x349431=_0x17dabe;_0x496fe6[_0x349431(0x36e)](),updateSetting(_0x349431(0x32a),_0x349431(0x350)),updateSetting(_0x349431(0x39a),!![]),await sendTelegram(_0x496fe6['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot['action'](_0x17dabe(0x205),async _0x4c4053=>{const _0x2f2e97=_0x17dabe;_0x4c4053['editMessageReplyMarkup'](),updateSetting(_0x2f2e97(0x32a),_0x2f2e97(0x22c)),updateSetting(_0x2f2e97(0x39a),!![]),await sendTelegram(_0x4c4053['chat']['id'],_0x2f2e97(0x263));}),tgBot[_0x17dabe(0x333)](_0x17dabe(0x2c4),async _0xf7ee2c=>{const _0x4e68b2=_0x17dabe;_0xf7ee2c[_0x4e68b2(0x36e)](),updateSetting('telegramEvents',_0x4e68b2(0x383)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xf7ee2c[_0x4e68b2(0x34e)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x1e0),async _0x121c39=>{const _0x26d52a=_0x17dabe,_0x1c96aa=getBotsWithMode();let _0x3ec46d='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x1f1dbb=>{const _0x56e684=_0x19fd,_0x8bb062=_0x1c96aa[_0x56e684(0x28b)](_0x441d11=>_0x441d11[_0x56e684(0x382)]==_0x1f1dbb[_0x56e684(0x382)])[_0x56e684(0x30c)];_0x3ec46d+=_0x56e684(0x1f4)+_0x1f1dbb['botID']+':\x20'+_0x1f1dbb[_0x56e684(0x1e0)]+'\x20|\x20'+_0x8bb062+_0x56e684(0x349)+_0x1f1dbb['live']+'\x0a';}),_0x3ec46d+='\x0a',_0x3ec46d+=_0x26d52a(0x31f),_0x3ec46d+=!settings[_0x26d52a(0x39a)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x3ec46d+=settings[_0x26d52a(0x39a)]?settings['telegramEvents']=='all'?_0x26d52a(0x316):_0x26d52a(0x335)+settings['telegramEvents']+_0x26d52a(0x207):'',await sendTelegram(_0x121c39[_0x26d52a(0x34e)]['id'],_0x3ec46d,{'parse_mode':_0x26d52a(0x2a8)});}),tgBot['command'](_0x17dabe(0x22b),async _0x4ed615=>{const _0x99a3c7=_0x17dabe,_0x40bedb=getEnabledBots();if(_0x40bedb[_0x99a3c7(0x32e)]==0x0)await sendTelegram(_0x4ed615[_0x99a3c7(0x34e)]['id'],_0x99a3c7(0x2d8));else{if(_0x40bedb[_0x99a3c7(0x32e)]>0x1)_0x40bedb[_0x99a3c7(0x2a9)]({'botID':'all'});let _0x4e1b62=[],_0x2eb523=[];const _0x84d9d9=_0x40bedb[_0x99a3c7(0x32e)]%0x4==0x0||_0x40bedb[_0x99a3c7(0x32e)]%0x4==0x3||_0x40bedb[_0x99a3c7(0x32e)]%0x3==0x1?0x4:0x3;let _0xb4e4e5=0x0;_0x40bedb[_0x99a3c7(0x1d8)]((_0x4e1b06,_0x126961)=>{const _0x2923a9=_0x99a3c7;if(_0x126961%_0x84d9d9==0x0)_0x2eb523=[];_0x2eb523['push'](Markup[_0x2923a9(0x277)][_0x2923a9(0x3a4)](_0x4e1b06[_0x2923a9(0x382)]==_0x2923a9(0x383)?'All\x20bots':_0x2923a9(0x1f4)+_0x4e1b06[_0x2923a9(0x382)],_0x2923a9(0x3c0)+_0x4e1b06[_0x2923a9(0x382)])),_0x126961%_0x84d9d9==0x0&&(_0x4e1b62[_0xb4e4e5]=_0x2eb523,_0xb4e4e5++);});const _0x319afa=Markup[_0x99a3c7(0x1eb)](_0x4e1b62);_0x4ed615[_0x99a3c7(0x2b6)](_0x99a3c7(0x233),_0x319afa);}}),tgBot[_0x17dabe(0x333)](/restart_(.+)/,async _0x5eebc8=>{const _0x84e2e3=_0x17dabe,_0x32819f=_0x5eebc8['match'][0x1];_0x5eebc8[_0x84e2e3(0x36e)](),_0x32819f==_0x84e2e3(0x383)?config[_0x84e2e3(0x1d8)](_0x372512=>{restartBot(_0x372512['botID']);}):restartBot(_0x32819f);}),tgBot[_0x17dabe(0x236)]('on',async _0x18a996=>{const _0x2cd8a6=_0x17dabe,_0x2f62d0=getDisabledBots();if(_0x2f62d0[_0x2cd8a6(0x32e)]==0x0)await sendTelegram(_0x18a996['chat']['id'],_0x2cd8a6(0x20a));else{if(_0x2f62d0[_0x2cd8a6(0x32e)]>0x1)_0x2f62d0[_0x2cd8a6(0x2a9)]({'botID':_0x2cd8a6(0x383)});let _0x462d87=[],_0x10c704=[];const _0x2a1c3b=_0x2f62d0['length']%0x4==0x0||_0x2f62d0[_0x2cd8a6(0x32e)]%0x4==0x3||_0x2f62d0['length']%0x3==0x1?0x4:0x3;let _0x4c2be7=0x0;_0x2f62d0[_0x2cd8a6(0x1d8)]((_0x52126a,_0x5d7eae)=>{const _0x6f3e19=_0x2cd8a6;if(_0x5d7eae%_0x2a1c3b==0x0)_0x10c704=[];_0x10c704[_0x6f3e19(0x2a9)](Markup[_0x6f3e19(0x277)][_0x6f3e19(0x3a4)](_0x52126a[_0x6f3e19(0x382)]==_0x6f3e19(0x383)?_0x6f3e19(0x305):_0x6f3e19(0x1f4)+_0x52126a[_0x6f3e19(0x382)],_0x6f3e19(0x1de)+_0x52126a[_0x6f3e19(0x382)])),_0x5d7eae%_0x2a1c3b==0x0&&(_0x462d87[_0x4c2be7]=_0x10c704,_0x4c2be7++);});const _0x4f0b21=Markup['inlineKeyboard'](_0x462d87);_0x18a996['reply'](_0x2cd8a6(0x1db),_0x4f0b21);}}),tgBot[_0x17dabe(0x333)](/on_(.+)/,async _0x3e579c=>{const _0x8ebfb6=_0x17dabe,_0x48b846=_0x3e579c[_0x8ebfb6(0x2c2)][0x1];_0x3e579c['editMessageReplyMarkup']();if(_0x48b846==_0x8ebfb6(0x383)){const _0x3a6324=getDisabledBots();await sendTelegram(_0x3e579c[_0x8ebfb6(0x34e)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x3a6324[_0x8ebfb6(0x1d8)](_0x383495=>{const _0xa54e09=_0x8ebfb6;if(_0x383495[_0xa54e09(0x382)]!=_0xa54e09(0x383))toggleBot(_0x383495[_0xa54e09(0x382)],toggleStatus(_0x383495[_0xa54e09(0x382)]),_0xa54e09(0x329));});}else await sendTelegram(_0x3e579c[_0x8ebfb6(0x34e)]['id'],_0x8ebfb6(0x283)+_0x48b846),toggleBot(_0x48b846,toggleStatus(_0x48b846),_0x8ebfb6(0x329));}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x39d),async _0x5cfa63=>{const _0x339c4b=_0x17dabe,_0x418415=getEnabledBots();if(_0x418415[_0x339c4b(0x32e)]==0x0)await sendTelegram(_0x5cfa63[_0x339c4b(0x34e)]['id'],_0x339c4b(0x2d8));else{if(_0x418415['length']>0x1)_0x418415[_0x339c4b(0x2a9)]({'botID':_0x339c4b(0x383)});let _0x484e32=[],_0x541a0a=[];const _0x4e89e1=_0x418415['length']%0x4==0x0||_0x418415[_0x339c4b(0x32e)]%0x4==0x3||_0x418415[_0x339c4b(0x32e)]%0x3==0x1?0x4:0x3;let _0x5db123=0x0;_0x418415[_0x339c4b(0x1d8)]((_0x21a817,_0x3a0661)=>{const _0x47976e=_0x339c4b;if(_0x3a0661%_0x4e89e1==0x0)_0x541a0a=[];_0x541a0a[_0x47976e(0x2a9)](Markup[_0x47976e(0x277)][_0x47976e(0x3a4)](_0x21a817['botID']==_0x47976e(0x383)?'All\x20bots':_0x47976e(0x1f4)+_0x21a817['botID'],_0x47976e(0x1ce)+_0x21a817[_0x47976e(0x382)])),_0x3a0661%_0x4e89e1==0x0&&(_0x484e32[_0x5db123]=_0x541a0a,_0x5db123++);});const _0x40ed70=Markup[_0x339c4b(0x1eb)](_0x484e32);_0x5cfa63[_0x339c4b(0x2b6)](_0x339c4b(0x2fd),_0x40ed70);}}),tgBot[_0x17dabe(0x333)](/off_(.+)/,async _0x298115=>{const _0x38f9e4=_0x17dabe,_0x315cd3=_0x298115['match'][0x1];_0x298115[_0x38f9e4(0x36e)]();if(_0x315cd3=='all'){const _0x2f6d84=getEnabledBots();await sendTelegram(_0x298115[_0x38f9e4(0x34e)]['id'],_0x38f9e4(0x248)),_0x2f6d84['forEach'](_0x4d7a29=>{const _0x4d29ae=_0x38f9e4;if(_0x4d7a29['botID']!=_0x4d29ae(0x383))toggleBot(_0x4d7a29[_0x4d29ae(0x382)],toggleStatus(_0x4d7a29[_0x4d29ae(0x382)]),_0x4d29ae(0x329));});}else await sendTelegram(_0x298115[_0x38f9e4(0x34e)]['id'],_0x38f9e4(0x254)+_0x315cd3),toggleBot(_0x315cd3,toggleStatus(_0x315cd3),_0x38f9e4(0x329));}),tgBot['command']('metrics',async _0x45e15b=>{const _0x33d5ce=_0x17dabe,_0x5aee78=getEnabledBots();if(_0x5aee78[_0x33d5ce(0x32e)]==0x0)await sendTelegram(_0x45e15b['chat']['id'],_0x33d5ce(0x2d8));else{if(_0x5aee78['length']>0x1){let _0x5b5851=[],_0x236f7c=[];const _0x35bd61=_0x5aee78[_0x33d5ce(0x32e)]%0x4==0x0||_0x5aee78['length']%0x4==0x3||_0x5aee78[_0x33d5ce(0x32e)]%0x3==0x1?0x4:0x3;let _0x372160=0x0;_0x5aee78[_0x33d5ce(0x1d8)]((_0x4465c2,_0x5012ef)=>{const _0x3d16ef=_0x33d5ce;if(_0x5012ef%_0x35bd61==0x0)_0x236f7c=[];_0x236f7c[_0x3d16ef(0x2a9)](Markup[_0x3d16ef(0x277)][_0x3d16ef(0x3a4)](_0x3d16ef(0x1f4)+_0x4465c2[_0x3d16ef(0x382)],_0x3d16ef(0x355)+_0x4465c2[_0x3d16ef(0x382)])),_0x5012ef%_0x35bd61==0x0&&(_0x5b5851[_0x372160]=_0x236f7c,_0x372160++);});const _0x2da7f7=Markup[_0x33d5ce(0x1eb)](_0x5b5851);_0x45e15b[_0x33d5ce(0x2b6)](_0x33d5ce(0x1e9),_0x2da7f7);}else{const _0x2a7c64=_0x5aee78[0x0][_0x33d5ce(0x382)];if(pid[_0x2a7c64])pid[_0x2a7c64][_0x33d5ce(0x244)]({'function':_0x33d5ce(0x2c1),'args':null});}}}),tgBot[_0x17dabe(0x333)](/metrics_(.+)/,async _0x4e30d0=>{const _0x5558b0=_0x17dabe,_0x235f30=_0x4e30d0[_0x5558b0(0x2c2)][0x1];_0x4e30d0[_0x5558b0(0x36e)]();if(pid[_0x235f30])pid[_0x235f30][_0x5558b0(0x244)]({'function':_0x5558b0(0x2c1),'args':null});}),tgBot['command'](_0x17dabe(0x241),async _0x368dd1=>{const _0x364731=_0x17dabe,_0x2bc70f=getEnabledBots();if(_0x2bc70f['length']==0x0)await sendTelegram(_0x368dd1[_0x364731(0x34e)]['id'],_0x364731(0x2d8));else{if(_0x2bc70f[_0x364731(0x32e)]>0x1){let _0x11b0a2=[],_0x59f455=[];const _0x36c44d=_0x2bc70f['length']%0x4==0x0||_0x2bc70f[_0x364731(0x32e)]%0x4==0x3||_0x2bc70f[_0x364731(0x32e)]%0x3==0x1?0x4:0x3;let _0x9b4535=0x0;_0x2bc70f[_0x364731(0x1d8)]((_0x23af82,_0x1cf709)=>{const _0x34b6d4=_0x364731;if(_0x1cf709%_0x36c44d==0x0)_0x59f455=[];_0x59f455[_0x34b6d4(0x2a9)](Markup['button']['callback'](_0x34b6d4(0x1f4)+_0x23af82[_0x34b6d4(0x382)],_0x34b6d4(0x2c3)+_0x23af82[_0x34b6d4(0x382)])),_0x1cf709%_0x36c44d==0x0&&(_0x11b0a2[_0x9b4535]=_0x59f455,_0x9b4535++);});const _0x21ad02=Markup['inlineKeyboard'](_0x11b0a2);_0x368dd1[_0x364731(0x2b6)](_0x364731(0x1c8),_0x21ad02);}else{const _0x2b2162=_0x2bc70f[0x0][_0x364731(0x382)];if(pid[_0x2b2162])pid[_0x2b2162][_0x364731(0x244)]({'function':_0x364731(0x36d),'args':null});}}}),tgBot[_0x17dabe(0x333)](/portfolio_(.+)/,async _0xd6645=>{const _0x22517f=_0x17dabe,_0x3412e1=_0xd6645[_0x22517f(0x2c2)][0x1];_0xd6645[_0x22517f(0x36e)]();if(pid[_0x3412e1])pid[_0x3412e1]['send']({'function':_0x22517f(0x36d),'args':null});}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x1c7),async _0x6e08e7=>{const _0x34da87=_0x17dabe;await getMessages();if(!updateAvailable)await sendTelegram(_0x6e08e7[_0x34da87(0x34e)]['id'],_0x34da87(0x3b3));else{if(!validInstallation)await sendTelegram(_0x6e08e7[_0x34da87(0x34e)]['id'],_0x34da87(0x1ca));else{const _0x206ca1=Markup[_0x34da87(0x1eb)]([Markup[_0x34da87(0x277)][_0x34da87(0x3a4)](_0x34da87(0x3af),_0x34da87(0x2cc)),Markup[_0x34da87(0x277)]['callback']('No','update_no')]);_0x6e08e7[_0x34da87(0x2b6)](_0x34da87(0x391),_0x206ca1);}}}),tgBot[_0x17dabe(0x333)](/update_(.+)/,async _0x1e60be=>{const _0x47b9a2=_0x17dabe,_0x20f33c=_0x1e60be['match'][0x1];_0x1e60be['editMessageReplyMarkup'](),_0x20f33c==_0x47b9a2(0x29e)&&(await sendTelegram(_0x1e60be['chat']['id'],_0x47b9a2(0x2ca)),updateBB(_0x47b9a2(0x1c7))),_0x20f33c=='no'&&await sendTelegram(_0x1e60be[_0x47b9a2(0x34e)]['id'],_0x47b9a2(0x2cf));}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x1e3),async _0x2c9efb=>{const _0x5d17f4=_0x17dabe;if(!validInstallation)await sendTelegram(_0x2c9efb[_0x5d17f4(0x34e)]['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0x2fc603=Markup[_0x5d17f4(0x1eb)]([Markup['button'][_0x5d17f4(0x3a4)]('Yes','reinstall_yes'),Markup[_0x5d17f4(0x277)]['callback']('No',_0x5d17f4(0x239))]);_0x2c9efb[_0x5d17f4(0x2b6)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x2fc603);}}),tgBot[_0x17dabe(0x333)](/reinstall_(.+)/,async _0x1a4c91=>{const _0xc4194b=_0x17dabe,_0x21d41b=_0x1a4c91[_0xc4194b(0x2c2)][0x1];_0x1a4c91[_0xc4194b(0x36e)](),_0x21d41b==_0xc4194b(0x29e)&&(await sendTelegram(_0x1a4c91[_0xc4194b(0x34e)]['id'],_0xc4194b(0x313)),updateBB(_0xc4194b(0x1e3))),_0x21d41b=='no'&&await sendTelegram(_0x1a4c91[_0xc4194b(0x34e)]['id'],_0xc4194b(0x369));}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x265),async _0x401eb7=>{const _0xdb5d31=_0x17dabe,_0x5a96f6=getBotsWithMode();if(_0x5a96f6[_0xdb5d31(0x32e)]==0x0)await sendTelegram(_0x401eb7[_0xdb5d31(0x34e)]['id'],_0xdb5d31(0x2d8));else{let _0x21fa95=[],_0x5b5ccd=[];const _0x7351df=0x2;let _0x3e96ce=0x0;_0x5a96f6[_0xdb5d31(0x1d8)]((_0x33b8fb,_0x186119)=>{const _0x452ec8=_0xdb5d31;if(_0x186119%_0x7351df==0x0)_0x5b5ccd=[];_0x5b5ccd[_0x452ec8(0x2a9)](Markup[_0x452ec8(0x277)][_0x452ec8(0x3a4)](_0x452ec8(0x1f4)+_0x33b8fb[_0x452ec8(0x382)]+'\x20('+_0x33b8fb['mode']+')','toggle_'+_0x33b8fb[_0x452ec8(0x382)])),_0x186119%_0x7351df==0x0&&(_0x21fa95[_0x3e96ce]=_0x5b5ccd,_0x3e96ce++);});const _0x153046=Markup[_0xdb5d31(0x1eb)](_0x21fa95);_0x401eb7['reply']('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x153046);}}),tgBot[_0x17dabe(0x333)](/toggle_(.+)/,async _0x534bb7=>{const _0x2174f2=_0x17dabe,_0x2170ed=_0x534bb7[_0x2174f2(0x2c2)][0x1];_0x534bb7[_0x2174f2(0x36e)]();const _0x53e3be=getBotsWithMode(),_0x9ceae0=_0x53e3be[_0x2174f2(0x28b)](_0x37eb96=>_0x37eb96[_0x2174f2(0x382)]==_0x2170ed),_0x17e4ba=_0x9ceae0[_0x2174f2(0x30c)]=='auto'?_0x2174f2(0x23e):'auto';await sendTelegram(_0x534bb7[_0x2174f2(0x34e)]['id'],_0x2174f2(0x206)+_0x2170ed+'\x20to\x20'+_0x17e4ba+_0x2174f2(0x376)),toggleBotMode(_0x2170ed);}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x38f),async _0x5ed041=>{const _0x2aa1da=_0x17dabe;let _0x19bfdc='';config['forEach'](_0xc499f9=>{const _0x474db8=_0x19fd;_0x19bfdc+='Bot\x20'+_0xc499f9[_0x474db8(0x382)]+':\x20'+_0xc499f9[_0x474db8(0x200)]+'\x0a';}),await sendTelegram(_0x5ed041[_0x2aa1da(0x34e)]['id'],_0x19bfdc,{'parse_mode':_0x2aa1da(0x2a8)});}),tgBot[_0x17dabe(0x236)](_0x17dabe(0x32f),async _0x56d7f9=>{const _0x2816fa=_0x17dabe;await sendTelegram(_0x56d7f9[_0x2816fa(0x34e)]['id'],_0x22ca08);}),process[_0x17dabe(0x2f4)](_0x17dabe(0x390),()=>tgBot['stop'](_0x17dabe(0x390))),process['once'](_0x17dabe(0x35d),()=>tgBot[_0x17dabe(0x3b0)](_0x17dabe(0x35d))),tgBot[_0x17dabe(0x33b)]();}}function disableTelegram(){const _0x1db3ca=_0x1faf8d;tgBot&&tgBot[_0x1db3ca(0x3b0)]();}async function sendTelegram(_0x2ae339,_0x167c4e,_0x324dec){const _0x799617=_0x1faf8d;_0x324dec={..._0x324dec,'disable_web_page_preview':!![]};try{await tgBot[_0x799617(0x219)]['sendMessage'](_0x2ae339,_0x167c4e,_0x324dec);}catch(_0x4a48dd){console[_0x799617(0x256)](_0x799617(0x1c9),_0x4a48dd);}}async function sendTelegramBot(_0x2d720b,_0x2b77f3){const _0x5f3f30=_0x1faf8d;if(settings[_0x5f3f30(0x39a)]){if(settings[_0x5f3f30(0x32a)]==_0x5f3f30(0x383)||(_0x2b77f3[_0x5f3f30(0x344)]=='error'||_0x2b77f3[_0x5f3f30(0x344)]==_0x5f3f30(0x291)||_0x2b77f3[_0x5f3f30(0x344)]=='success')&&settings[_0x5f3f30(0x32a)]==_0x5f3f30(0x22c)||_0x2b77f3['type']==_0x5f3f30(0x1c5)&&settings[_0x5f3f30(0x32a)]==_0x5f3f30(0x350)){if(tgBot&&settings['telegramChatId']){if(_0x2b77f3['showname'])await sendTelegram(settings[_0x5f3f30(0x30e)],_0x2b77f3[_0x5f3f30(0x200)]+_0x5f3f30(0x1f8)+_0x2b77f3[_0x5f3f30(0x32d)]);else await sendTelegram(settings[_0x5f3f30(0x30e)],_0x5f3f30(0x1f4)+_0x2d720b+_0x5f3f30(0x1f8)+_0x2b77f3[_0x5f3f30(0x32d)]);}}}}async function sendTelegramMsg(_0x14cc71,_0x57e0c2='HTML'){const _0x33a70d=_0x1faf8d;return settings[_0x33a70d(0x39a)]&&tgBot&&settings[_0x33a70d(0x30e)]?(await sendTelegram(settings[_0x33a70d(0x30e)],_0x14cc71,{'parse_mode':_0x57e0c2}),!![]):![];}function getDeviceWithIp(_0x1954e7){const _0x47b009=_0x1faf8d;return devices[_0x47b009(0x28b)](_0x3272cd=>_0x3272cd['ip']===_0x1954e7);}async function temporaryAccess2FA(_0x365bea,_0x40cb2e){const _0x270b0a=_0x1faf8d;let _0x19fff2=new Date(),_0x577fde=![];if(lastIpApproval){if(_0x19fff2-lastIpApproval<0x1388)_0x577fde=!![];}lastIpApproval=new Date();if(_0x577fde)return;if(tgBot&&settings['telegramChatId']){const _0x355476=uuidRandom();tmpStorage[_0x355476]={'uuid':_0x365bea,'externalip':_0x40cb2e};const _0x45d393=Markup[_0x270b0a(0x1eb)]([Markup[_0x270b0a(0x277)]['callback'](_0x270b0a(0x1ea),'tempaccess_5_'+_0x355476),Markup[_0x270b0a(0x277)][_0x270b0a(0x3a4)](_0x270b0a(0x367),_0x270b0a(0x337)+_0x355476),Markup['button'][_0x270b0a(0x3a4)](_0x270b0a(0x393),_0x270b0a(0x1f0)+_0x355476),Markup[_0x270b0a(0x277)][_0x270b0a(0x3a4)](_0x270b0a(0x242),'tempaccess_reject_'+_0x355476)]);await sendTelegram(settings[_0x270b0a(0x30e)],_0x270b0a(0x2ec)+normalizeIP(_0x40cb2e)[_0x270b0a(0x264)]+'\x20?',_0x45d393),tgBot[_0x270b0a(0x333)](/tempaccess_(.+)_(.+)/,async _0x36b596=>{const _0x5ad654=_0x270b0a,_0x2037a5=_0x36b596[_0x5ad654(0x2c2)][0x1],_0x890d3=_0x36b596[_0x5ad654(0x2c2)][0x2],{uuid:_0x470858,externalip:_0x5961cd}=tmpStorage[_0x890d3];delete tmpStorage[_0x890d3],_0x36b596[_0x5ad654(0x36e)](),devices[_0x470858][_0x5ad654(0x3ad)]={'clientip':_0x5961cd,'timestamp':new Date()[_0x5ad654(0x269)](),'expiry':_0x2037a5},_0x2037a5!=_0x5ad654(0x242)?(await sendTelegram(_0x36b596[_0x5ad654(0x34e)]['id'],_0x5ad654(0x2f3)+_0x2037a5+_0x5ad654(0x385),{'parse_mode':'HTML'}),io['to'](_0x470858)[_0x5ad654(0x34a)]('status',{'access':{'allow':![],'reason':_0x5ad654(0x347),'token':null}})):(await sendTelegram(_0x36b596[_0x5ad654(0x34e)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x470858)[_0x5ad654(0x34a)](_0x5ad654(0x1e0),{'access':{'allow':![],'reason':_0x5ad654(0x353),'token':null}}));});}}async function loginAccess2FA(_0x3a64d3,_0x2f8e88){const _0x265356=_0x1faf8d;if(tgBot&&settings[_0x265356(0x30e)]){const _0x2b5839=uuidRandom();tmpStorage[_0x2b5839]={'uuid':_0x3a64d3,'externalip':_0x2f8e88};const _0x7fedfc=Markup[_0x265356(0x1eb)]([Markup[_0x265356(0x277)][_0x265356(0x3a4)](_0x265356(0x288),'login2fa_'+loginExpiry+'_'+_0x2b5839),Markup[_0x265356(0x277)][_0x265356(0x3a4)](_0x265356(0x242),'login2fa_reject_'+_0x2b5839)]);await sendTelegram(settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x2f8e88)[_0x265356(0x264)]+'\x20?',_0x7fedfc),tgBot[_0x265356(0x333)](/login2fa_(.+)_(.+)/,async _0x2df0cd=>{const _0x55585f=_0x265356,_0x11fc1d=_0x2df0cd[_0x55585f(0x2c2)][0x1],_0x4448e5=_0x2df0cd[_0x55585f(0x2c2)][0x2],{uuid:_0x7eb76c,externalip:_0x3d775f}=tmpStorage[_0x4448e5];delete tmpStorage[_0x4448e5],_0x2df0cd['editMessageReplyMarkup'](),devices[_0x7eb76c][_0x55585f(0x21f)]={'clientip':_0x3d775f,'timestamp':new Date()['getTime'](),'expiry':_0x11fc1d},_0x11fc1d!='reject'?(await sendTelegram(_0x2df0cd[_0x55585f(0x34e)]['id'],_0x55585f(0x216),{'parse_mode':'HTML'}),io['to'](_0x7eb76c)['emit'](_0x55585f(0x1e0),{'access':{'allow':![],'reason':_0x55585f(0x347),'token':null}})):(await sendTelegram(_0x2df0cd[_0x55585f(0x34e)]['id'],_0x55585f(0x384)),io['to'](_0x7eb76c)[_0x55585f(0x34a)](_0x55585f(0x1e0),{'access':{'allow':![],'reason':_0x55585f(0x215),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x6a8222=_0x1faf8d;return dbConfig[_0x6a8222(0x379)](_0x6a8222(0x1fb))[_0x6a8222(0x356)](_0x6a8222(0x382))['filter']({'status':_0x6a8222(0x229)})['value']()||[];}function getDisabledBots(){const _0x168be2=_0x1faf8d;return dbConfig['get']('bots')['sortBy'](_0x168be2(0x382))[_0x168be2(0x227)]({'status':_0x168be2(0x3a0)})[_0x168be2(0x225)]()||[];}function getBotAttributes(_0x54be0c){const _0x1b6005=_0x1faf8d;let _0x6ac964={};const _0x217f19=configpath+_0x1b6005(0x38e)+_0x54be0c+_0x1b6005(0x2fc),_0x1e7fe8=fs[_0x1b6005(0x203)](_0x217f19);if(_0x1e7fe8){const _0x5858a0=fs['readFileSync'](_0x217f19);try{const _0x491b7c=JSON[_0x1b6005(0x237)](_0x5858a0),_0x183562=_0x491b7c?_0x491b7c['bot'][0x0][_0x1b6005(0x1f2)]:![];_0x6ac964[_0x1b6005(0x30c)]=_0x183562?_0x1b6005(0x2f1):'manual',_0x6ac964['botname']=_0x491b7c?_0x491b7c[_0x1b6005(0x201)][0x0][_0x1b6005(0x200)]:'Bot\x20'+_0x54be0c;}catch(_0x53134a){_0x6ac964[_0x1b6005(0x30c)]=_0x1b6005(0x23e),_0x6ac964[_0x1b6005(0x200)]='Bot\x20'+_0x54be0c;}}else _0x6ac964['mode']=_0x1b6005(0x23e),_0x6ac964[_0x1b6005(0x200)]=_0x1b6005(0x1f4)+_0x54be0c;return _0x6ac964;}function getBotsWithMode(){const _0x5d2540=_0x1faf8d,_0xb4edba=dbConfig[_0x5d2540(0x379)]('bots')[_0x5d2540(0x356)]('botID')['value']()||[];return _0xb4edba[_0x5d2540(0x1d8)](_0x5b46c8=>{const _0x45c5cd=_0x5d2540;let _0x30ff2c=getBotAttributes(_0x5b46c8[_0x45c5cd(0x382)]);_0x5b46c8[_0x45c5cd(0x30c)]=_0x30ff2c[_0x45c5cd(0x30c)];}),_0xb4edba;}function getBotExchanges(){const _0x994b1=_0x1faf8d;let _0x4fdb9c=[];const _0x17f7e5=dbConfig[_0x994b1(0x379)](_0x994b1(0x1fb))[_0x994b1(0x356)](_0x994b1(0x382))['value']()||[];_0x17f7e5[_0x994b1(0x1d8)](_0xd053a3=>{const _0xb42dc8=_0x994b1;if(_0xd053a3[_0xb42dc8(0x1e0)]==_0xb42dc8(0x229)){const _0x5c01e2=configpath+_0xb42dc8(0x38e)+_0xd053a3[_0xb42dc8(0x382)]+_0xb42dc8(0x2fc),_0x43cdc2=fs[_0xb42dc8(0x203)](_0x5c01e2);let _0x101155;if(_0x43cdc2){const _0x486edb=fs[_0xb42dc8(0x253)](_0x5c01e2);try{const _0x37be41=JSON[_0xb42dc8(0x237)](_0x486edb);_0x101155=_0x37be41?_0x37be41['bot'][0x0]['exchange']:null;}catch(_0x377672){}}if(_0x101155)_0x4fdb9c['push'](_0x101155);}});const _0x41628c=[...new Set(_0x4fdb9c)][_0x994b1(0x1ed)]();return _0x41628c;}async function initUser(){const _0x4db480=_0x1faf8d;if(!settings[_0x4db480(0x307)]){const _0xbac28f=uuidRandom();mixpanel['alias'](_0xbac28f),updateSetting('userid',_0xbac28f);}}async function initSecure(){const _0x234239=_0x1faf8d;let _0x3c088f=getSecure();if(!_0x3c088f[_0x234239(0x1d5)]('secret')){let _0xe54859=await generateKeys();_0x3c088f[_0x234239(0x1b5)]=_0xe54859['publicKey'],_0x3c088f[_0x234239(0x1c4)]=_0xe54859[_0x234239(0x1c4)],_0x3c088f[_0x234239(0x3a8)]=crypto['randomBytes'](0x20)['toString'](_0x234239(0x31a));;storeSecure(_0x3c088f);}}function getSettings(){const _0x1785e5=_0x1faf8d;return dbSettings[_0x1785e5(0x379)](_0x1785e5(0x2f7))[_0x1785e5(0x225)]()||{};}function getSecure(){const _0x4f67e9=_0x1faf8d;return dbSecure[_0x4f67e9(0x379)]('secure')[_0x4f67e9(0x225)]()||{};}function getBlacklist(){const _0x30493c=_0x1faf8d;return dbSecure[_0x30493c(0x379)]('blacklist')[_0x30493c(0x225)]()||[];}function broadcastToBots(_0x39eb6e,_0xfaa388){const _0x5ed6e9=_0x1faf8d;config[_0x5ed6e9(0x1d8)](_0xd583e9=>{const _0x2eeaac=_0x5ed6e9;if(_0xd583e9[_0x2eeaac(0x1e0)]==_0x2eeaac(0x229)&&_0xd583e9[_0x2eeaac(0x280)]==_0x2eeaac(0x309)||_0xd583e9[_0x2eeaac(0x1e0)]==_0x2eeaac(0x214)&&_0xd583e9['live']==_0x2eeaac(0x309)){if(pid[_0xd583e9[_0x2eeaac(0x382)]])pid[_0xd583e9[_0x2eeaac(0x382)]][_0x2eeaac(0x244)]({[_0x39eb6e]:_0xfaa388});}});}async function storeSettings(_0xa238d5,_0x3cf5ae=![]){const _0x5810bc=_0x1faf8d;_0xa238d5={...settings,..._0xa238d5};if(_0x3cf5ae&&_0xa238d5[_0x5810bc(0x2f6)]!=_0x5810bc(0x3c6)&&_0xa238d5[_0x5810bc(0x2f6)]!=_0x5810bc(0x26a)&&_0xa238d5['bbPassword']!=''){const _0x272616=decryptRSA(secure[_0x5810bc(0x1c4)],_0xa238d5[_0x5810bc(0x2f6)])['split'](_0x5810bc(0x2fe))[0x0],_0x330e04=bcrypt[_0x5810bc(0x234)](_0x272616,saltRounds);_0xa238d5={..._0xa238d5,'bbPassword':_0x330e04};}if(_0x3cf5ae&&_0xa238d5[_0x5810bc(0x33e)]!=_0x5810bc(0x3c6)&&_0xa238d5[_0x5810bc(0x33e)]!=_0x5810bc(0x26a)&&_0xa238d5[_0x5810bc(0x33e)]!=''){const _0xd7b458=decryptRSA(secure[_0x5810bc(0x1c4)],_0xa238d5[_0x5810bc(0x33e)])[_0x5810bc(0x23f)]('|@|')[0x0];_0xa238d5={..._0xa238d5,'telegramToken':_0xd7b458};}if(_0x3cf5ae&&_0xa238d5[_0x5810bc(0x2c6)]!=_0x5810bc(0x3c6)&&_0xa238d5[_0x5810bc(0x2c6)]!=_0x5810bc(0x26a)&&_0xa238d5[_0x5810bc(0x2c6)]!=''){const _0x560d95=decryptRSA(secure[_0x5810bc(0x1c4)],_0xa238d5['marketcapApi'])[_0x5810bc(0x23f)](_0x5810bc(0x2fe))[0x0];_0xa238d5={..._0xa238d5,'marketcapApi':_0x560d95};}const _0x271755=_0xa238d5[_0x5810bc(0x33e)]!='************'&&_0xa238d5[_0x5810bc(0x33e)]!=settings[_0x5810bc(0x33e)]||_0xa238d5[_0x5810bc(0x35c)]!=settings[_0x5810bc(0x35c)],_0x5c2dfc=_0xa238d5[_0x5810bc(0x33e)]==''||_0xa238d5[_0x5810bc(0x35c)]=='',_0x41b540=_0xa238d5[_0x5810bc(0x2c6)]&&_0xa238d5[_0x5810bc(0x2c6)]!=_0x5810bc(0x3c6)&&_0xa238d5[_0x5810bc(0x2c6)]!=settings[_0x5810bc(0x33e)];_0x271755&&(_0xa238d5[_0x5810bc(0x30e)]=null,_0xa238d5[_0x5810bc(0x32a)]=_0x5810bc(0x383));for(const [_0x5099d5,_0x445897]of Object[_0x5810bc(0x1cb)](_0xa238d5)){if(_0x5099d5==_0x5810bc(0x33e)&&_0x445897=='************'){_0xa238d5[_0x5810bc(0x33e)]=settings[_0x5810bc(0x33e)];continue;};if(_0x5099d5==_0x5810bc(0x2f6)&&_0x445897==_0x5810bc(0x3c6)){_0xa238d5['bbPassword']=settings['bbPassword'];continue;};if(_0x5099d5==_0x5810bc(0x2c6)&&_0x445897=='************'){_0xa238d5[_0x5810bc(0x2c6)]=settings[_0x5810bc(0x2c6)];continue;};dbSettings['set'](_0x5810bc(0x226)+_0x5099d5,_0x445897)[_0x5810bc(0x1f9)]();}settings=_0xa238d5,io['to']('botmanager')[_0x5810bc(0x34a)](_0x5810bc(0x2f7),cleanSettings()),broadcastToBots(_0x5810bc(0x3ab),settings[_0x5810bc(0x3ab)]),broadcastToBots('onepagemode',settings[_0x5810bc(0x326)]),broadcastToBots(_0x5810bc(0x2c6),settings[_0x5810bc(0x2c6)]);if(_0x271755&&!_0x5c2dfc)initTelegram();if(_0x271755&&_0x5c2dfc)disableTelegram();getAllClients()[_0x5810bc(0x1d8)](_0x198306=>{const _0x19b2fc=_0x5810bc;getSocket(_0x198306['id'])[_0x19b2fc(0x34a)](_0x19b2fc(0x1e0),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x41b540&&(await sleep(0xbb8),testMarketcapApi(_0xa238d5[_0x5810bc(0x2c6)]));}async function testMarketcapApi(_0x595a60){const _0x1eed51=_0x1faf8d,_0x251230=[_0x1eed51(0x29b),'ETH'];try{await axios[_0x1eed51(0x379)](_0x1eed51(0x20e),{'headers':{'X-CMC_PRO_API_KEY':_0x595a60},'params':{'symbol':_0x251230['toString']()}});}catch(_0x5e243e){_0x5e243e[_0x1eed51(0x39b)]()[_0x1eed51(0x22a)]('status\x20code\x20401')?(io['to']('botmanager')[_0x1eed51(0x34a)](_0x1eed51(0x312),_0x1eed51(0x360)),logger[_0x1eed51(0x338)](_0x1eed51(0x360))):(io['to'](_0x1eed51(0x2e8))[_0x1eed51(0x34a)]('notification',_0x1eed51(0x262)),logger[_0x1eed51(0x338)](_0x1eed51(0x262)),logger[_0x1eed51(0x2b7)](_0x1eed51(0x27c),_0x5e243e['toString']()+'\x20-\x20'+_0x5e243e[_0x1eed51(0x1d1)]));return;}logger[_0x1eed51(0x2b7)](_0x1eed51(0x25e));}function updateSetting(_0x4f4f5a,_0x5b2eef){const _0x3d598e=_0x1faf8d;dbSettings[_0x3d598e(0x2c8)](_0x3d598e(0x226)+_0x4f4f5a,_0x5b2eef)[_0x3d598e(0x1f9)](),settings=getSettings(),io['to'](_0x3d598e(0x2e8))[_0x3d598e(0x34a)](_0x3d598e(0x2f7),cleanSettings());}function storeSecure(_0x1d949f){const _0x395fcb=_0x1faf8d;dbSecure[_0x395fcb(0x379)](_0x395fcb(0x3c1))[_0x395fcb(0x2a9)](_0x1d949f)[_0x395fcb(0x1f9)](),secure=_0x1d949f;}function addBlacklist(_0x52bc7c){const _0x4c9a3b=_0x1faf8d;cleanBlacklist();let _0x4a4db8;devices[_0x52bc7c][_0x4c9a3b(0x3ad)]?_0x4a4db8=Math['max'](devices[_0x52bc7c][_0x4c9a3b(0x3ad)][_0x4c9a3b(0x1e8)],loginExpiry):_0x4a4db8=loginExpiry,dbSecure[_0x4c9a3b(0x379)](_0x4c9a3b(0x1d4))[_0x4c9a3b(0x2a9)]({'expiry':new Date()[_0x4c9a3b(0x269)]()+_0x4a4db8*0x3c*0x3e8,'token':devices[_0x52bc7c]['access'][_0x4c9a3b(0x2bb)]})[_0x4c9a3b(0x1f9)](),blacklist=dbSecure['get'](_0x4c9a3b(0x1d4))[_0x4c9a3b(0x225)]();}function cleanBlacklist(){const _0x330be8=_0x1faf8d;let _0x323f53=dbSecure['get'](_0x330be8(0x1d4))['cloneDeep']()['value'](),_0x3db8f5=new Date()[_0x330be8(0x269)]();_0x323f53[_0x330be8(0x1d8)](_0x25a52a=>{const _0x2a1d3a=_0x330be8;_0x25a52a[_0x2a1d3a(0x1e8)]<_0x3db8f5&&dbSecure['get']('blacklist')[_0x2a1d3a(0x212)]({'expiry':_0x25a52a[_0x2a1d3a(0x1e8)]})['write']();});}function initStates(){const _0x173aba=_0x1faf8d;let _0x29b2ad=getConfiguration();_0x29b2ad[_0x173aba(0x1d8)](_0x5c3d4e=>{const _0x5b6eb6=_0x173aba;_0x5c3d4e[_0x5b6eb6(0x280)]=_0x5b6eb6(0x329);}),storeConfiguration(_0x29b2ad);}async function generateKeys(){const _0x4326a5=_0x1faf8d,_0x43bf2b=forge[_0x4326a5(0x2e1)]['rsa']['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0xe4a34f=forge[_0x4326a5(0x2e1)][_0x4326a5(0x2eb)](_0x43bf2b[_0x4326a5(0x1c4)]),_0x3f19f7=forge[_0x4326a5(0x2e1)][_0x4326a5(0x306)](_0x43bf2b[_0x4326a5(0x1b5)]);return{'privateKey':_0xe4a34f,'publicKey':_0x3f19f7};}async function oneTimeMigration(){const _0x43ec6a=_0x1faf8d;let _0x2f0996=getSettings(),_0x13a9cf=![];!_0x2f0996[_0x43ec6a(0x1d5)](_0x43ec6a(0x38b))&&(_0x2f0996[_0x43ec6a(0x38b)]=0x0,_0x13a9cf=!![]);!_0x2f0996[_0x43ec6a(0x1d5)](_0x43ec6a(0x276))&&(_0x2f0996[_0x43ec6a(0x276)]=0x0,_0x13a9cf=!![]);!_0x2f0996[_0x43ec6a(0x1d5)](_0x43ec6a(0x230))&&(_0x2f0996['latestversion']=_0x43ec6a(0x2b4),_0x13a9cf=!![]);!_0x2f0996[_0x43ec6a(0x1d5)](_0x43ec6a(0x326))&&(_0x2f0996[_0x43ec6a(0x326)]=![],_0x13a9cf=!![]);!_0x2f0996[_0x43ec6a(0x1d5)](_0x43ec6a(0x2c6))&&(_0x2f0996[_0x43ec6a(0x2c6)]='',_0x13a9cf=!![]);if(_0x13a9cf)storeSettings(_0x2f0996);try{fs[_0x43ec6a(0x3b5)](configbackuppath,{'withFileTypes':!![]})[_0x43ec6a(0x1d8)](_0x3b0f7=>{const _0x1eff4b=_0x43ec6a;if(!_0x3b0f7[_0x1eff4b(0x250)]()){if(!_0x3b0f7[_0x1eff4b(0x2b2)][_0x1eff4b(0x30b)](_0x1eff4b(0x278)))fs['unlinkSync'](configbackuppath+_0x3b0f7[_0x1eff4b(0x2b2)]);}else fs[_0x1eff4b(0x27e)](configbackuppath+_0x3b0f7[_0x1eff4b(0x2b2)],{'recursive':!![]});});}catch(_0x1501fa){logger[_0x43ec6a(0x2b7)](_0x43ec6a(0x328),_0x1501fa);}}function storeConfiguration(_0x396019){const _0x238a2c=_0x1faf8d;dbConfig[_0x238a2c(0x379)](_0x238a2c(0x1fb))[_0x238a2c(0x212)]()[_0x238a2c(0x1f9)](),dbConfig[_0x238a2c(0x379)](_0x238a2c(0x1fb))[_0x238a2c(0x2a9)](..._0x396019)[_0x238a2c(0x1f9)](),config=_0x396019;}async function resetPassword(){const _0x34ff43=_0x1faf8d;if(tgBot&&settings[_0x34ff43(0x30e)]){const _0xef1af0=Markup[_0x34ff43(0x1eb)]([Markup[_0x34ff43(0x277)]['callback'](_0x34ff43(0x29e),'resetpw_yes'),Markup[_0x34ff43(0x277)][_0x34ff43(0x3a4)]('no','resetpw_no')]);await sendTelegram(settings[_0x34ff43(0x30e)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',_0xef1af0),tgBot[_0x34ff43(0x333)](/resetpw_(.+)/,async _0x202436=>{const _0x4cd602=_0x34ff43,_0x1badef=_0x202436['match'][0x1];_0x202436['editMessageReplyMarkup']();if(_0x1badef!='no'){const _0x5940e0=0xf,_0xe45be3=_0x4cd602(0x208),_0x12b685=Array[_0x4cd602(0x1cc)](crypto[_0x4cd602(0x2e0)](new Uint32Array(_0x5940e0)))[_0x4cd602(0x238)](_0x5e10f5=>_0xe45be3[_0x5e10f5%_0xe45be3['length']])[_0x4cd602(0x35b)](''),_0x1cb869=bcrypt['hashSync'](_0x12b685,saltRounds);storeSettings({'bbPassword':_0x1cb869}),await sendTelegram(_0x202436[_0x4cd602(0x34e)]['id'],_0x4cd602(0x394)+_0x12b685,{'parse_mode':_0x4cd602(0x2a8)});}else await sendTelegram(_0x202436[_0x4cd602(0x34e)]['id'],'Password\x20reset\x20rejected');});}}async function confirmRestore(_0x3b6751,_0x49c191){const _0x2dfe84=_0x1faf8d;io['to']('botmanager')[_0x2dfe84(0x34a)]('notification',_0x2dfe84(0x259),_0x2dfe84(0x1b6));if(tgBot&&settings['telegramChatId']){const _0x347c4d=uuidRandom();tmpStorage[_0x347c4d]={'path':_0x3b6751,'filename':_0x49c191};const _0x37271c=Markup['inlineKeyboard']([Markup[_0x2dfe84(0x277)]['callback'](_0x2dfe84(0x29e),_0x2dfe84(0x21a)+_0x347c4d),Markup['button'][_0x2dfe84(0x3a4)]('no','restore_no_'+_0x347c4d)]);await sendTelegram(settings['telegramChatId'],_0x2dfe84(0x252),_0x37271c),tgBot[_0x2dfe84(0x333)](/restore_(.+)_(.+)/,async _0x362781=>{const _0x220467=_0x2dfe84,_0x16f2ef=_0x362781[_0x220467(0x2c2)][0x1],_0x3c1df6=_0x362781[_0x220467(0x2c2)][0x2],{path:_0x20d6bd,filename:_0x3f19cc}=tmpStorage[_0x3c1df6];delete tmpStorage[_0x3c1df6],_0x362781[_0x220467(0x36e)](),_0x16f2ef=='yes'?(logger['debug'](_0x220467(0x3b8)),await sendTelegram(_0x362781[_0x220467(0x34e)]['id'],_0x220467(0x1d7),{'parse_mode':'HTML'}),unzipFile(_0x20d6bd,_0x3f19cc)):(logger[_0x220467(0x2b7)]('Restore\x20process\x20aborted'),await sendTelegram(_0x362781[_0x220467(0x34e)]['id'],_0x220467(0x3a2)));});}}function getServerTime(){const _0x34381a=_0x1faf8d,_0x44750a=new Date();return _0x44750a['getFullYear']()+'/'+(_0x44750a['getMonth']()+0x1)[_0x34381a(0x39b)]()[_0x34381a(0x2ae)](0x2,'0')+'/'+_0x44750a[_0x34381a(0x330)]()[_0x34381a(0x39b)]()[_0x34381a(0x2ae)](0x2,'0')+'\x20'+_0x44750a[_0x34381a(0x29f)]()[_0x34381a(0x39b)]()[_0x34381a(0x2ae)](0x2,'0')+':'+_0x44750a[_0x34381a(0x364)]()[_0x34381a(0x39b)]()['padStart'](0x2,'0')+':'+_0x44750a[_0x34381a(0x243)]()[_0x34381a(0x39b)]()[_0x34381a(0x2ae)](0x2,'0');}function getTimeStamp(){const _0x1e023a=_0x1faf8d,_0x333e00=shiftedTime();return _0x333e00[_0x1e023a(0x3a1)]()+'/'+(_0x333e00[_0x1e023a(0x2e7)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x333e00[_0x1e023a(0x330)]()[_0x1e023a(0x39b)]()[_0x1e023a(0x2ae)](0x2,'0')+'\x20'+_0x333e00['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x333e00['getMinutes']()[_0x1e023a(0x39b)]()['padStart'](0x2,'0')+':'+_0x333e00['getSeconds']()[_0x1e023a(0x39b)]()[_0x1e023a(0x2ae)](0x2,'0');}function _0x19fd(_0x4db82d,_0x2424a9){const _0x25589f=_0x44ee();return _0x19fd=function(_0x1767bd,_0x5076f2){_0x1767bd=_0x1767bd-0x1b4;let _0x44ee3f=_0x25589f[_0x1767bd];return _0x44ee3f;},_0x19fd(_0x4db82d,_0x2424a9);}function getCleanTimeStamp(){const _0x1010cf=_0x1faf8d,_0x44a111=shiftedTime();return _0x44a111[_0x1010cf(0x3a1)]()+(_0x44a111['getMonth']()+0x1)['toString']()[_0x1010cf(0x2ae)](0x2,'0')+_0x44a111['getDate']()['toString']()[_0x1010cf(0x2ae)](0x2,'0')+'-'+_0x44a111['getHours']()[_0x1010cf(0x39b)]()[_0x1010cf(0x2ae)](0x2,'0')+_0x44a111[_0x1010cf(0x364)]()[_0x1010cf(0x39b)]()[_0x1010cf(0x2ae)](0x2,'0')+_0x44a111[_0x1010cf(0x243)]()[_0x1010cf(0x39b)]()[_0x1010cf(0x2ae)](0x2,'0');}function shiftedTime(){const _0x306710=_0x1faf8d,_0x1d7186=new Date();let _0x37ddb8=_0x1d7186;if(settings[_0x306710(0x3ab)]&&settings[_0x306710(0x3ab)]!==0x0)_0x37ddb8=fns[_0x306710(0x340)](_0x1d7186,{'hours':settings[_0x306710(0x3ab)]});return _0x37ddb8;}async function startScheduler(){const _0x4c371e=_0x1faf8d,_0x270aac=new Date()[_0x4c371e(0x37d)](),_0x2a2613=shiftedTime()[_0x4c371e(0x29f)]();_0x2a2613==0x4&&backupConfigFiles(),_0x2a2613==0x0&&rotateLogFiles(),_0x270aac%0x6==0x0&&triggerAnalytics(),_0x270aac%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x18df9c){const _0xeba012=_0x1faf8d;logger[_0xeba012(0x2b7)](_0xeba012(0x36a)+_0x18df9c);const _0x2eaf50=getBotsWithMode();_0x2eaf50['length']>0x0?confirmRestore(configbackuppath,_0x18df9c):unzipFile(configbackuppath,_0x18df9c);}async function getBackupFiles(_0x5bfacf=null){const _0x56543=_0x1faf8d;let _0x1beba8=[],_0x1ec051=fs[_0x56543(0x3b5)](configbackuppath,{'withFileTypes':!![]});_0x1ec051['sort']((_0x594c22,_0x563618)=>_0x594c22[_0x56543(0x2b2)]<_0x563618[_0x56543(0x2b2)]?0x1:_0x563618[_0x56543(0x2b2)]<_0x594c22[_0x56543(0x2b2)]?-0x1:0x0),_0x1ec051[_0x56543(0x1d8)](_0x43c64d=>{const _0x44b900=_0x56543;if(!_0x43c64d['isDirectory']()&&_0x43c64d['name'][_0x44b900(0x30b)](_0x44b900(0x278))&&_0x43c64d[_0x44b900(0x2b2)][_0x44b900(0x25d)](_0x44b900(0x24e))){const _0x3ea163=formatDate(fs[_0x44b900(0x292)](configbackuppath+_0x43c64d[_0x44b900(0x2b2)])[_0x44b900(0x36c)]);_0x1beba8['push']({'name':_0x43c64d[_0x44b900(0x2b2)],'mtime':_0x3ea163});}});if(_0x5bfacf)io['to'](_0x5bfacf)[_0x56543(0x34a)](_0x56543(0x223),_0x1beba8);else return _0x1beba8;}async function backupConfigFiles(){const _0x39b543=_0x1faf8d;await zipFiles(_0x39b543(0x1bb));const _0x1b1cdf=getCleanTimeStamp();fs[_0x39b543(0x32c)](zippath+_0x39b543(0x331),configbackuppath+('backup-full@'+_0x1b1cdf+_0x39b543(0x24e)));let _0x2b246e=fs[_0x39b543(0x3b5)](configbackuppath,{'withFileTypes':!![]});_0x2b246e[_0x39b543(0x1ed)]((_0x2bb082,_0x4911fc)=>_0x2bb082[_0x39b543(0x2b2)]<_0x4911fc['name']?0x1:_0x4911fc[_0x39b543(0x2b2)]<_0x2bb082['name']?-0x1:0x0),_0x2b246e[_0x39b543(0x32e)]>maxBackups&&fs[_0x39b543(0x36f)](configbackuppath+_0x2b246e[_0x2b246e[_0x39b543(0x32e)]-0x1][_0x39b543(0x2b2)]);}function rotateLogFiles(){const _0x3c2243=_0x1faf8d,_0x1d61f9=fs['statSync'](logspath+_0x3c2243(0x399)),_0x5ab144=_0x1d61f9[_0x3c2243(0x20c)]/0x400;if(_0x5ab144>0x64){let _0x5463c4=fs[_0x3c2243(0x3b5)](logspath,{'withFileTypes':!![]});_0x5463c4[_0x3c2243(0x1ed)]((_0xbd032c,_0x5e2a53)=>_0xbd032c[_0x3c2243(0x2b2)]<_0x5e2a53[_0x3c2243(0x2b2)]?0x1:_0x5e2a53[_0x3c2243(0x2b2)]<_0xbd032c[_0x3c2243(0x2b2)]?-0x1:0x0),_0x5463c4[_0x3c2243(0x1d8)](_0x3e3551=>{const _0x1774f7=_0x3c2243;if(_0x3e3551[_0x1774f7(0x2b2)]=='output-002.log')fs[_0x1774f7(0x32c)](logspath+_0x3e3551[_0x1774f7(0x2b2)],logspath+_0x1774f7(0x322));if(_0x3e3551['name']==_0x1774f7(0x298))fs[_0x1774f7(0x32c)](logspath+_0x3e3551[_0x1774f7(0x2b2)],logspath+_0x1774f7(0x2b1));_0x3e3551[_0x1774f7(0x2b2)]==_0x1774f7(0x399)&&(fs[_0x1774f7(0x32c)](logspath+_0x3e3551[_0x1774f7(0x2b2)],logspath+_0x1774f7(0x298)),fs[_0x1774f7(0x308)](logspath+_0x3e3551[_0x1774f7(0x2b2)],''));});}}async function zipFiles(_0x28a1d9){const _0x5c0a80=_0x1faf8d;let _0x514ada;if(_0x28a1d9==_0x5c0a80(0x365))_0x514ada=logspath;if(_0x28a1d9==_0x5c0a80(0x210))_0x514ada=configpath;if(_0x28a1d9==_0x5c0a80(0x1bb))_0x514ada=configpath;let _0x371cb3=fs[_0x5c0a80(0x3b5)](_0x514ada,{'withFileTypes':!![]});const _0x5c7bdd=new JSZip();_0x371cb3[_0x5c0a80(0x1d8)](_0x59501e=>{const _0x3697b7=_0x5c0a80;if(!_0x59501e[_0x3697b7(0x250)]()){let _0x1e2de9=fs[_0x3697b7(0x253)](_0x514ada+_0x59501e[_0x3697b7(0x2b2)]);if(_0x28a1d9=='backup'){const _0x1e65c7=/^bot-[0-9]{3}-config.json$/,_0x5f2a01=_0x1e65c7[_0x3697b7(0x257)](_0x59501e[_0x3697b7(0x2b2)]);if(_0x5f2a01){const _0x3efb4d=JSON[_0x3697b7(0x237)](_0x1e2de9);if(_0x3efb4d['bot'][0x0]){_0x3efb4d['bot'][0x0]['apiKey']=_0x3697b7(0x26a),_0x3efb4d['bot'][0x0]['apiSecret']=_0x3697b7(0x26a);if(_0x3efb4d[_0x3697b7(0x201)][0x0][_0x3697b7(0x1e2)])_0x3efb4d[_0x3697b7(0x201)][0x0][_0x3697b7(0x1e2)]=_0x3697b7(0x26a);}_0x1e2de9=JSON['stringify'](_0x3efb4d,null,0x2);}if(_0x59501e[_0x3697b7(0x2b2)]==_0x3697b7(0x29a)){const _0x2fdfd6=JSON[_0x3697b7(0x237)](_0x1e2de9);if(_0x2fdfd6['settings']['loginRequired'])_0x2fdfd6['settings'][_0x3697b7(0x380)]=![];if(_0x2fdfd6['settings'][_0x3697b7(0x2f6)])_0x2fdfd6[_0x3697b7(0x2f7)][_0x3697b7(0x2f6)]=_0x3697b7(0x26a);if(_0x2fdfd6['settings'][_0x3697b7(0x33e)])_0x2fdfd6[_0x3697b7(0x2f7)]['telegramToken']=_0x3697b7(0x26a);if(_0x2fdfd6[_0x3697b7(0x2f7)][_0x3697b7(0x30e)])_0x2fdfd6[_0x3697b7(0x2f7)][_0x3697b7(0x30e)]=null;if(_0x2fdfd6[_0x3697b7(0x2f7)][_0x3697b7(0x2c6)])_0x2fdfd6[_0x3697b7(0x2f7)][_0x3697b7(0x2c6)]=_0x3697b7(0x26a);_0x1e2de9=JSON[_0x3697b7(0x2ef)](_0x2fdfd6,null,0x2);}if(_0x59501e['name']!=_0x3697b7(0x286))_0x5c7bdd[_0x3697b7(0x1e1)](_0x59501e['name'],_0x1e2de9);}else _0x5c7bdd['file'](_0x59501e['name'],_0x1e2de9);}});const _0x168e3a=await _0x5c7bdd[_0x5c0a80(0x282)]({'type':_0x5c0a80(0x28d),'base64':![],'compression':'DEFLATE'});fs[_0x5c0a80(0x308)](zippath+(_0x28a1d9+_0x5c0a80(0x24e)),_0x168e3a,_0x5c0a80(0x2dc));}async function unzipFile(_0x282c20,_0x2b8395){const _0xc74020=_0x1faf8d;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0xc74020(0x1d8)](_0x19def9=>{const _0x619a18=_0xc74020;if(!_0x19def9[_0x619a18(0x250)]())fs[_0x619a18(0x27e)](configpath+_0x19def9[_0x619a18(0x2b2)]);});const _0xb902f9=fs[_0xc74020(0x253)](_0x282c20+_0x2b8395,_0xc74020(0x2dc)),_0x4cdae2=await JSZip[_0xc74020(0x1f3)](_0xb902f9,{'base64':![],'checkCRC32':!![]});for(const _0x4eda30 of Object[_0xc74020(0x25b)](_0x4cdae2[_0xc74020(0x358)])){const _0x2e4dfe=_0x4cdae2['files'][_0x4eda30],_0x98d603=await _0x2e4dfe[_0xc74020(0x2a1)](_0xc74020(0x28d));fs[_0xc74020(0x308)](configpath+_0x2e4dfe[_0xc74020(0x2b2)],_0x98d603);}fs[_0xc74020(0x3b5)](temppath,{'withFileTypes':!![]})[_0xc74020(0x1d8)](_0x3fbd59=>{const _0x2a0541=_0xc74020;if(!_0x3fbd59['isDirectory']())fs[_0x2a0541(0x27e)](temppath+_0x3fbd59[_0x2a0541(0x2b2)]);}),logger[_0xc74020(0x2b7)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0xc74020(0x244)]({'restore':!![]},_0xa60d8f=>{});}async function getPublicIp(){const _0xa92e9=_0x1faf8d;try{const _0x8c855e=await axios['get'](_0xa92e9(0x334));publicip=_0x8c855e['data']['ip'];}catch(_0x5ba086){}}async function triggerAnalytics(){const _0xd3d614=_0x1faf8d;if(!publicip)await getPublicIp();const _0x24da89=getBotsWithMode();let _0x4b3cc0=0x0;_0x24da89[_0xd3d614(0x1d8)](_0x42ee49=>{const _0x3951e3=_0xd3d614;if(_0x42ee49['status']===_0x3951e3(0x229))_0x4b3cc0++;});const _0x24d48d=getBotExchanges();mixpanel[_0xd3d614(0x1b4)](_0xd3d614(0x2fa),{'distinct_id':settings[_0xd3d614(0x307)],'ip':publicip,'version':serverversion,'numbots':_0x24da89[_0xd3d614(0x32e)],'numbotsenabled':_0x4b3cc0,'exchanges':_0x24d48d,'environment':environment});}async function getMessages(){const _0x4cc6c3=_0x1faf8d,_0x195180='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x941b78=new GraphQLClient(_0x195180),_0xf1ac={'authorization':_0x4cc6c3(0x202)},_0x488a7d=serverversion[_0x4cc6c3(0x23f)]('.'),_0xe27673=_0x488a7d[0x0]+'.'+_0x488a7d[0x1],_0x311630=Math[_0x4cc6c3(0x30f)](settings['lastmsgtelegram'],settings[_0x4cc6c3(0x276)]),_0x48f436={'last':parseInt(_0x311630),'bbm':_0xe27673},_0x155b5e=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x22179a;try{_0x22179a=await _0x941b78['request'](_0x155b5e,_0x48f436,_0xf1ac);}catch(_0x2bd88a){}if(_0x22179a&&_0x22179a[_0x4cc6c3(0x3bb)]){let _0x20bfc5=settings[_0x4cc6c3(0x38b)];newMessages=[];for(const _0x3dc809 of _0x22179a[_0x4cc6c3(0x3bb)]){newMessages[_0x4cc6c3(0x2a9)](_0x3dc809);let _0x3b5373=![];_0x3dc809[_0x4cc6c3(0x35e)]&&(updateSetting('latestversion',_0x3dc809['bbvNew']),_0x3b5373=isNewerVersion(serverversion,_0x3dc809[_0x4cc6c3(0x35e)])||serverversion==_0x3dc809['bbvNew']);if(!_0x3b5373&&_0x3dc809[_0x4cc6c3(0x2b0)]>_0x20bfc5){if(_0x3dc809[_0x4cc6c3(0x1f5)]===_0x4cc6c3(0x1c3)||serverversion['startsWith'](_0x3dc809[_0x4cc6c3(0x1f5)])){let _0x1a2122=''+_0x3dc809['title']+'\x0a\x0a'+_0x3dc809['message'];const _0x4fa163=await sendTelegramMsg(toTelegramMarkdown(_0x1a2122),'Markdown');if(_0x4fa163)_0x20bfc5=_0x3dc809[_0x4cc6c3(0x2b0)];}}}updateAvailable=isNewerVersion(settings[_0x4cc6c3(0x230)],serverversion),updateSetting(_0x4cc6c3(0x38b),_0x20bfc5),emitMessages();}}function emitMessages(){const _0x2b0235=_0x1faf8d,_0x23f986=settings[_0x2b0235(0x276)];let _0x4a7ce9=[];newMessages['forEach'](_0x3ca78b=>{const _0x4188ea=_0x2b0235;_0x3ca78b[_0x4188ea(0x2b0)]>_0x23f986&&_0x4a7ce9[_0x4188ea(0x2a9)](_0x3ca78b);}),_0x4a7ce9[_0x2b0235(0x32e)]>0x0&&getAllClients()[_0x2b0235(0x1d8)](_0x1e50d5=>{const _0x3737f8=_0x2b0235;getSocket(_0x1e50d5['id'])[_0x3737f8(0x34a)](_0x3737f8(0x323),_0x4a7ce9);});}function confirmMessage(_0xc36c6d){const _0x5b363a=_0x1faf8d;updateSetting(_0x5b363a(0x276),Number(_0xc36c6d));}function isNewerVersion(_0x209d19,_0x5833bc){const _0x5ae7c1=_0x1faf8d,_0x59fee5=_0x5833bc['split']('.'),_0x2c5430=_0x209d19[_0x5ae7c1(0x23f)]('.');for(var _0x514459=0x0;_0x514459<_0x2c5430[_0x5ae7c1(0x32e)];_0x514459++){const _0x571d88=~~_0x2c5430[_0x514459],_0x144353=~~_0x59fee5[_0x514459];if(_0x571d88>_0x144353)return!![];if(_0x571d88<_0x144353)return![];}return![];}function toTelegramMarkdown(_0x2de9c4){const _0x9e10fa=_0x1faf8d,_0x3536f3=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x889ee5=/\*{2}(.+?)\*{2}/gim;return _0x2de9c4=_0x2de9c4['replace'](_0x3536f3,_0x9e10fa(0x2be))['replace'](_0x889ee5,'*$1*'),_0x2de9c4;}async function validateConfigFile(){const _0x29151e=_0x1faf8d,_0x5553a8=dbConfig[_0x29151e(0x379)](_0x29151e(0x1fb))['sortBy']('botID')[_0x29151e(0x225)]()||[];if(_0x5553a8[_0x29151e(0x32e)]==0x0){let _0x4037ba=0x0,_0x31fbbe=[];const _0x2c2450=/^bot-([0-9]{3})-config.json$/,_0x128ffc=fs[_0x29151e(0x3b5)](configpath);_0x128ffc[_0x29151e(0x1d8)](_0x36ecda=>{const _0x2f7e73=_0x29151e,_0x116540=_0x2c2450['exec'](_0x36ecda);if(_0x116540){const _0x40e753=_0x116540[0x1];let _0x253e47=getBotAttributes(_0x40e753);_0x31fbbe[_0x2f7e73(0x2a9)]({'botID':_0x40e753,'botname':_0x253e47[_0x2f7e73(0x200)],'status':_0x2f7e73(0x3a0),'live':_0x2f7e73(0x329)}),_0x4037ba++;}}),_0x4037ba!=0x0&&(dbConfig['get'](_0x29151e(0x1fb))[_0x29151e(0x1e4)](_0x31fbbe)[_0x29151e(0x1f9)](),config=_0x31fbbe,restoredConfigFile=_0x4037ba);}}async function restoreConfigNotify(_0x3818c6){const _0x2f83c7=_0x1faf8d;let _0x5be006;if(restoredConfigFile==0x1)_0x5be006=_0x2f83c7(0x35a);else _0x5be006=_0x2f83c7(0x34f);if(_0x3818c6)io['to'](_0x2f83c7(0x2e8))[_0x2f83c7(0x34a)](_0x2f83c7(0x312),_0x5be006);else{logger[_0x2f83c7(0x392)](_0x2f83c7(0x2b9)),logger[_0x2f83c7(0x392)](_0x5be006),logger[_0x2f83c7(0x392)](_0x2f83c7(0x2b9)),logger[_0x2f83c7(0x392)]('');if(tgBot&&settings[_0x2f83c7(0x30e)]&&settings[_0x2f83c7(0x32a)]!=_0x2f83c7(0x350))await sendTelegram(settings[_0x2f83c7(0x30e)],_0x2f83c7(0x318)+_0x5be006);}}function decryptRSA(_0xcaf84a,_0x2c120d){const _0x53fab3=_0x1faf8d,_0x4c484d=forge['pki'][_0x53fab3(0x1c1)](_0xcaf84a),_0x24b8a3=_0x4c484d[_0x53fab3(0x217)](forge['util'][_0x53fab3(0x25a)](_0x2c120d),_0x53fab3(0x26b),{'md':forge['md'][_0x53fab3(0x38d)][_0x53fab3(0x357)](),'mgf1':{'md':forge['md']['sha256'][_0x53fab3(0x357)]()}});return _0x24b8a3;}function validateCredentials(_0x4d8c0e,_0x211557){const _0x5546d5=_0x1faf8d;if(_0x4d8c0e[_0x5546d5(0x235)]==settings[_0x5546d5(0x2d5)]&&bcrypt[_0x5546d5(0x2e9)](_0x4d8c0e[_0x5546d5(0x20f)],settings[_0x5546d5(0x2f6)])){if(settings[_0x5546d5(0x3b6)])return{'allow':![],'reason':_0x5546d5(0x396),'token':null};else{const _0x3bbc8a=generateLoginToken(_0x211557);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x3bbc8a};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x575f50){const _0x2cf6a1=_0x1faf8d,_0x752843=generateLoginToken(_0x575f50);return{'allow':!![],'reason':_0x2cf6a1(0x272),'token':_0x752843};}function validateAccess(_0x3c8fc6,_0xed9d15,_0x3abae5){const _0x478099=_0x1faf8d,_0x32554a=_0x3abae5?_0x3abae5:devices[_0xed9d15]['ip'];let _0x5843eb;const _0xea2cb6=_0x395e23=>{const _0x31ab7a=_0x19fd;if(settings['loginRequired']){if(settings[_0x31ab7a(0x3b6)]){if(telegram2FaApproved(_0xed9d15)){const _0x28069d=generateLoginToken(_0xed9d15);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x28069d};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5843eb=validToken(_0x395e23,_0xed9d15),_0x5843eb[_0x31ab7a(0x1d5)](_0x31ab7a(0x1b6))?{'allow':!![],'reason':_0x31ab7a(0x2c7),'token':_0x395e23}:{'allow':![],'reason':_0x31ab7a(0x398),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x478099(0x266)]){let _0x35ddfc=[...settings[_0x478099(0x304)],_0x478099(0x25c),_0x478099(0x3c3),_0x478099(0x1b7)];if(_0x35ddfc[_0x478099(0x22a)](_0x32554a))return _0xea2cb6(_0x3c8fc6);else{_0x5843eb=validToken(_0x3c8fc6,_0xed9d15);if(_0x5843eb[_0x478099(0x1d5)](_0x478099(0x1b6)))return _0xea2cb6(_0x3c8fc6);else{if(telegramIpApproved(_0xed9d15)){const _0x35a889=generateToken(_0xed9d15);return _0x5843eb=_0xea2cb6(_0x3c8fc6),_0x5843eb[_0x478099(0x2a5)]?{'allow':!![],'reason':_0x478099(0x39e),'token':_0x35a889}:_0x5843eb;}else return settings[_0x478099(0x21c)]?{'allow':![],'reason':_0x478099(0x27a),'token':null}:{'allow':![],'reason':_0x478099(0x26f),'token':null};}}}else return _0xea2cb6(_0x3c8fc6);}function timelyDecrypt(_0x553e8f,_0x49f9d3,_0x594a79='@'){const _0x5a2983=_0x1faf8d;if(_0x553e8f)try{const _0xea3de=decryptRSA(secure[_0x5a2983(0x1c4)],_0x553e8f),_0x1a938b=_0xea3de[_0x5a2983(0x23f)](_0x594a79)[0x0],_0x43a825=_0xea3de[_0x5a2983(0x23f)](_0x594a79)[0x1],_0x1b2130=new Date()[_0x5a2983(0x269)]();if(_0x49f9d3){if(_0x1b2130-_0x43a825<maxSecretAge*0x3e8)return _0x1a938b;else return![];}else return _0x1a938b;}catch(_0x5a93fd){return![];}else return![];}const validToken=(_0x59a1f5,_0x4bb1fd)=>{const _0xdde96b=_0x1faf8d,_0x1a6667=devices[_0x4bb1fd]['ip'];if(!_0x59a1f5)return{'error':'No\x20authentication\x20token'};for(let _0x43c421 of blacklist){if(_0x43c421[_0xdde96b(0x2bb)]==_0x59a1f5)return{'error':_0xdde96b(0x2ad)};}let _0x1224cf;try{_0x1224cf=jwt['verify'](_0x59a1f5,secure[_0xdde96b(0x3a8)]+_0x4bb1fd);}catch{return{'error':_0xdde96b(0x2c0)};}if(!_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x22e))&&!_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x235))||!_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x2b8)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x1224cf['hasOwnProperty'](_0xdde96b(0x235))&&_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x22e))){const {clientip:_0x4bd397}=_0x1224cf;return _0x1a6667==_0x4bd397?{'success':_0xdde96b(0x3ba)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x235))&&_0x1224cf[_0xdde96b(0x1d5)](_0xdde96b(0x22e))){const {username:_0x139fb0,clientip:_0x1d2822}=_0x1224cf;return settings[_0xdde96b(0x2d5)]==_0x139fb0&&_0x1a6667==_0x1d2822?{'success':_0xdde96b(0x3ba)}:{'error':_0xdde96b(0x2d2)};}}},generateLoginToken=_0x170770=>{const _0x552577=_0x1faf8d;if(_0x170770){const _0x4b0171=devices[_0x170770]['ip'];return jwt[_0x552577(0x3c4)]({'username':settings[_0x552577(0x2d5)],'clientip':_0x4b0171},secure[_0x552577(0x3a8)]+_0x170770,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0xba5d67=>{const _0x1acac3=_0x1faf8d;if(_0xba5d67){const _0x2bdcaa=devices[_0xba5d67]['ip'];return jwt[_0x1acac3(0x3c4)]({'clientip':_0x2bdcaa},secure['secret']+_0xba5d67,{'expiresIn':devices[_0xba5d67][_0x1acac3(0x3ad)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x24e17b=>{const _0x5f11f2=_0x1faf8d;let _0x5069f9=![];return devices[_0x24e17b][_0x5f11f2(0x3ad)]&&devices[_0x24e17b]['telegramIpApproval'][_0x5f11f2(0x1e8)]!=_0x5f11f2(0x242)&&(_0x5069f9=devices[_0x24e17b][_0x5f11f2(0x3ad)][_0x5f11f2(0x22e)]==devices[_0x24e17b]['ip']&&new Date()['getTime']()-devices[_0x24e17b][_0x5f11f2(0x3ad)][_0x5f11f2(0x395)]<devices[_0x24e17b][_0x5f11f2(0x3ad)][_0x5f11f2(0x1e8)]*0x3c*0x3e8),_0x5069f9;},telegram2FaApproved=_0x1f7ed8=>{const _0x269c59=_0x1faf8d;let _0x2ac752=![];return devices[_0x1f7ed8]['telegram2FaApproval']&&devices[_0x1f7ed8][_0x269c59(0x21f)][_0x269c59(0x1e8)]!='reject'&&(_0x2ac752=devices[_0x1f7ed8][_0x269c59(0x21f)][_0x269c59(0x22e)]==devices[_0x1f7ed8]['ip']&&new Date()['getTime']()-devices[_0x1f7ed8]['telegram2FaApproval']['timestamp']<devices[_0x1f7ed8]['telegram2FaApproval'][_0x269c59(0x1e8)]*0x3c*0x3e8),_0x2ac752;},normalizeIP=_0x2c9b4f=>{const _0x1f347c=_0x1faf8d;let _0x567dac=null,_0x11672f=null;if(ipaddr[_0x1f347c(0x218)](_0x2c9b4f)){const _0x58de6d=ipaddr[_0x1f347c(0x237)](_0x2c9b4f);_0x58de6d[_0x1f347c(0x232)]()===_0x1f347c(0x361)?(_0x58de6d[_0x1f347c(0x258)]()&&(_0x567dac=_0x58de6d[_0x1f347c(0x2db)]()[_0x1f347c(0x39b)]()),_0x11672f=_0x58de6d[_0x1f347c(0x39b)]()):(_0x567dac=_0x58de6d[_0x1f347c(0x39b)](),_0x11672f=_0x58de6d[_0x1f347c(0x1c0)]()[_0x1f347c(0x39b)]());}return{'show':_0x567dac?_0x567dac:_0x11672f,'store':_0x11672f};};function formatDate(_0x14ca63){const _0x26eccc=_0x1faf8d;return _0x14ca63['getFullYear']()+'/'+(_0x14ca63['getMonth']()+0x1)[_0x26eccc(0x39b)]()['padStart'](0x2,'0')+'/'+_0x14ca63[_0x26eccc(0x330)]()[_0x26eccc(0x39b)]()[_0x26eccc(0x2ae)](0x2,'0')+'\x20'+_0x14ca63[_0x26eccc(0x29f)]()[_0x26eccc(0x39b)]()[_0x26eccc(0x2ae)](0x2,'0')+':'+_0x14ca63[_0x26eccc(0x364)]()[_0x26eccc(0x39b)]()['padStart'](0x2,'0')+':'+_0x14ca63['getSeconds']()[_0x26eccc(0x39b)]()[_0x26eccc(0x2ae)](0x2,'0');}function sleep(_0x1c3141){return new Promise(_0x48de4f=>setTimeout(_0x48de4f,_0x1c3141));}