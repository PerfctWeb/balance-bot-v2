const _0x253d75=_0x365e;(function(_0x1403e3,_0x257991){const _0x40038c=_0x365e,_0xc1548b=_0x1403e3();while(!![]){try{const _0x39d19d=-parseInt(_0x40038c(0x1d2))/0x1+parseInt(_0x40038c(0xbf))/0x2*(parseInt(_0x40038c(0x1e6))/0x3)+parseInt(_0x40038c(0x1cc))/0x4+parseInt(_0x40038c(0xf3))/0x5*(-parseInt(_0x40038c(0x143))/0x6)+-parseInt(_0x40038c(0xfc))/0x7+-parseInt(_0x40038c(0xab))/0x8+parseInt(_0x40038c(0xd9))/0x9;if(_0x39d19d===_0x257991)break;else _0xc1548b['push'](_0xc1548b['shift']());}catch(_0x49a116){_0xc1548b['push'](_0xc1548b['shift']());}}}(_0xd3ce,0x2d5b9));const _0x6bc234=function(){let _0x485458=!![];return function(_0x5c60dc,_0xdc75d7){const _0x26fc09=_0x485458?function(){if(_0xdc75d7){const _0x56db6c=_0xdc75d7['apply'](_0x5c60dc,arguments);return _0xdc75d7=null,_0x56db6c;}}:function(){};return _0x485458=![],_0x26fc09;};}(),_0x27d9dd=_0x6bc234(this,function(){const _0x362d67=_0x365e;return _0x27d9dd[_0x362d67(0x1b8)]()[_0x362d67(0x17e)]('(((.+)+)+)+$')[_0x362d67(0x1b8)]()['constructor'](_0x27d9dd)[_0x362d67(0x17e)](_0x362d67(0xe5));});_0x27d9dd();'use strict';process[_0x253d75(0xe9)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x253d75(0x14b)),FileSync=require(_0x253d75(0x142)),fs=require('fs'),fns=require(_0x253d75(0x1e3)),low=require('lowdb'),path=require(_0x253d75(0x1ba)),crypto=require(_0x253d75(0x188)),Crypt=require(_0x253d75(0x1a3))[_0x253d75(0xce)],RSA=require(_0x253d75(0x1a3))[_0x253d75(0x1b4)],bcrypt=require(_0x253d75(0xc6)),jwt=require(_0x253d75(0xe6)),{Analytics}=require(_0x253d75(0x9e)),googleAnalyticsV3Plugin=require('@analytics/google-analytics-v3')[_0x253d75(0x138)],ipaddr=require('ipaddr.js'),argv=require(_0x253d75(0x1db))(process[_0x253d75(0x19b)]['slice'](0x2))['argv'],uuidRandom=require(_0x253d75(0x12c)),Mixpanel=require('mixpanel'),axios=require(_0x253d75(0x163)),{GraphQLClient,gql}=require(_0x253d75(0xbd)),PORT=argv[_0x253d75(0x158)]||_0x253d75(0x164),pattern=/^[0-9]{2,4}$/;!pattern[_0x253d75(0x11f)](PORT)&&(console[_0x253d75(0x1be)](_0x253d75(0x94)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv[_0x253d75(0x1b6)]||null,userID=argv['user']||'';let bbpath=_0x253d75(0xb5),bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile='bb-settings.json',securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x253d75(0x198)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x253d75(0x1d3),configbackuppath=configpath+_0x253d75(0xfa);!fs[_0x253d75(0xfd)](configpath)&&fs[_0x253d75(0xd4)](configpath);!fs[_0x253d75(0xfd)](configbackuppath)&&fs[_0x253d75(0xd4)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x253d75(0x177)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2),adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x253d75(0x1af)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x253d75(0xe3)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x253d75(0xd3),{'host':_0x253d75(0x1a9)}),analytics=Analytics({'app':'Balance\x20Bot','plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x253d75(0x10a))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x253d75(0x12b))[_0x253d75(0xe7)](app);app[_0x253d75(0x87)](express[_0x253d75(0xb9)](path[_0x253d75(0x190)](__dirname,bbpath2,_0x253d75(0xdd)))),app[_0x253d75(0x87)](express[_0x253d75(0xb9)](path['join'](__dirname,bbpath2,_0x253d75(0x15d)))),app['get']('/',function(_0x56575c,_0x5c75e5){const _0x4662bd=_0x253d75;_0x5c75e5[_0x4662bd(0x1cf)](path[_0x4662bd(0x190)](__dirname,bbpath2,_0x4662bd(0xdd),_0x4662bd(0x13c)));}),app[_0x253d75(0xed)]('/:bot',function(_0x1ab7d1,_0x2d55e0){const _0x447294=_0x253d75;_0x2d55e0['sendFile'](path['join'](__dirname,bbpath2,_0x447294(0x15d),_0x447294(0x13c)));}),app[_0x253d75(0xed)](_0x253d75(0x161),(_0x48d48f,_0x4f63c8)=>{const _0x995527=_0x253d75;_0x4f63c8[_0x995527(0x1cf)](path[_0x995527(0x190)](__dirname,bbpath2,_0x995527(0x15d),'index.html'));}),app[_0x253d75(0xed)](_0x253d75(0x16e),(_0x1068d,_0x3037fc)=>{const _0x43f044=_0x253d75;_0x3037fc[_0x43f044(0x1cf)](path['join'](__dirname,bbpath2,_0x43f044(0x15d),_0x43f044(0x13c)));}),app[_0x253d75(0xed)]('/:bot/coins',(_0x216f54,_0x9f9906)=>{const _0x13fa87=_0x253d75;_0x9f9906[_0x13fa87(0x1cf)](path[_0x13fa87(0x190)](__dirname,bbpath2,_0x13fa87(0x15d),_0x13fa87(0x13c)));}),app['get'](_0x253d75(0x146),(_0x446ffa,_0x64b555)=>{const _0x2605a8=_0x253d75;_0x64b555[_0x2605a8(0x1cf)](path[_0x2605a8(0x190)](__dirname,bbpath2,_0x2605a8(0x15d),_0x2605a8(0x13c)));}),app[_0x253d75(0xed)](_0x253d75(0xaf),(_0xc4ec4e,_0x4d10c9)=>{const _0x347b66=_0x253d75;_0x4d10c9[_0x347b66(0x1cf)](path[_0x347b66(0x190)](__dirname,bbpath2,'build','index.html'));}),app[_0x253d75(0xed)](_0x253d75(0x13e),(_0x1a2fc1,_0x4bc1d0)=>{const _0x4e95fa=_0x253d75;_0x4bc1d0['sendFile'](path[_0x4e95fa(0x190)](__dirname,bbpath2,_0x4e95fa(0x15d),_0x4e95fa(0x13c)));});if(HOST)http[_0x253d75(0x133)](PORT,HOST);else http[_0x253d75(0x133)](PORT);const io=require(_0x253d75(0x11d))(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require('node-telegram-bot-api'),{allowedNodeEnvironmentFlags}=require(_0x253d75(0x105));let tgBot;if(settings[_0x253d75(0xc4)]&&settings['telegramToken']!=''&&settings[_0x253d75(0x101)]&&settings[_0x253d75(0x101)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();function startServer(){const _0x15db8f=_0x253d75;console[_0x15db8f(0x1be)](''),console['log'](_0x15db8f(0x172)),logging(_0x15db8f(0x115)+PORT),console[_0x15db8f(0x1be)]('-----------------------------------------------------------------------------------');if(config[_0x15db8f(0x192)]!=0x0)config[_0x15db8f(0xda)](_0x57c99a=>{const _0x4f52fd=_0x15db8f;if(_0x57c99a['status']=='enabled'||_0x57c99a['status']==_0x4f52fd(0x179))logging(_0x4f52fd(0x1a6)+_0x57c99a['botID']+_0x4f52fd(0xa1)+_0x57c99a[_0x4f52fd(0xa7)]),startBot([_0x57c99a[_0x4f52fd(0xcf)],userID],{'cwd':bbpath},function(_0x427de6){if(_0x427de6)logging(_0x427de6);});else(_0x57c99a[_0x4f52fd(0xd8)]=='disabled'||_0x57c99a[_0x4f52fd(0xd8)]==_0x4f52fd(0x9c))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x57c99a[_0x4f52fd(0xcf)]+_0x4f52fd(0xa1)+_0x57c99a['botname']);});else!newBot&&console[_0x15db8f(0x1be)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x15db8f(0x1be)]('-----------------------------------------------------------------------------------'),console[_0x15db8f(0x1be)]('');}function startSocket(){io['on']('connection',_0x469e7a=>{const _0x11e0ce=_0x365e;let _0x1b1bb8,_0xcfc047,_0x2292e3,_0x18be31,_0x3072d4;const _0x1e1f10=_0x469e7a['handshake']['headers'][_0x11e0ce(0x166)];_0xcfc047=_0x1e1f10[_0x11e0ce(0x126)](/bot[0-9]{3}/);if(_0xcfc047)_0x2292e3=_0xcfc047[0x0]['match'](/[0-9]{3}/);if(_0x2292e3)_0x1b1bb8=_0x2292e3[0x0];else _0x1b1bb8=_0x11e0ce(0x1aa);const _0x34a1fb=_0x469e7a[_0x11e0ce(0x149)][_0x11e0ce(0xc0)][_0x11e0ce(0xf5)];if(!_0x34a1fb)_0x469e7a[_0x11e0ce(0xee)](_0x11e0ce(0xd8),{'publicKey':secure[_0x11e0ce(0x89)]});else{_0x18be31=timelyDecrypt(_0x34a1fb,![]);if(!_0x18be31)_0x469e7a['emit'](_0x11e0ce(0xd8),{'publicKey':secure['publicKey']});else{_0x3072d4=normalizeIP(_0x469e7a[_0x11e0ce(0x196)][_0x11e0ce(0x1b0)])[_0x11e0ce(0x100)];if(!devices[_0x18be31])devices[_0x18be31]={'uuid':_0x18be31,'access':{'token':null}};devices[_0x18be31]['ip']=_0x3072d4;const _0x2533eb=addClient(_0x469e7a['id'],_0x18be31,_0x1b1bb8);setAccess(_0x2533eb),emitMessages(),_0x469e7a['on']('login',_0x3890ec=>{const _0x3f78dd=_0x11e0ce,_0x1ba38b=timelyDecrypt(_0x3890ec[_0x3f78dd(0x1c6)]);if(_0x1ba38b){_0x3890ec={'username':_0x3890ec['username'],'password':_0x1ba38b},devices[_0x18be31][_0x3f78dd(0x1d0)]=validateCredentials(_0x3890ec,_0x18be31);if(devices[_0x18be31][_0x3f78dd(0x1d0)]['allow']==![]&&devices[_0x18be31][_0x3f78dd(0x1d0)][_0x3f78dd(0x189)]==_0x3f78dd(0x116))_0x469e7a[_0x3f78dd(0xee)](_0x3f78dd(0xd8),{'access':devices[_0x18be31][_0x3f78dd(0x1d0)]}),loginAccess2FA(_0x18be31,_0x3072d4);else{if(devices[_0x18be31][_0x3f78dd(0x1d0)][_0x3f78dd(0x173)]==![]&&devices[_0x18be31][_0x3f78dd(0x1d0)]['reason']==_0x3f78dd(0xb0))_0x469e7a['emit'](_0x3f78dd(0xd8),{'access':devices[_0x18be31][_0x3f78dd(0x1d0)]});else devices[_0x18be31][_0x3f78dd(0x1d0)]['allow']&&devices[_0x18be31][_0x3f78dd(0x1d0)][_0x3f78dd(0x189)]==_0x3f78dd(0x11c)&&(getClientsWithUuid(_0x18be31)[_0x3f78dd(0xda)](_0x5626f1=>{setAccess(_0x5626f1);}),setTokenRefresh(_0x18be31),setSessionTimeout(_0x3f78dd(0x1b1),_0x18be31));}}else logging(_0x3f78dd(0x9b));}),_0x469e7a['on']('reset-password',()=>{resetPassword();}),_0x469e7a['on'](_0x11e0ce(0x120),_0x2fb007=>{removeClient(_0x469e7a['id']);});}}});}function initClient(_0x5193ce){const _0x5f0091=_0x253d75;if(_0x5193ce!='botmanager'&&config[_0x5f0091(0x122)]!=''){if(pid[_0x5193ce])pid[_0x5193ce][_0x5f0091(0x1e4)]({'function':'initclient','args':null});}}function getSocket(_0x39aaed){const _0x16271e=_0x253d75;return io[_0x16271e(0x8a)][_0x16271e(0x8a)][_0x16271e(0xed)](_0x39aaed);}function setAccess(_0x444054){const _0x35a500=_0x253d75,_0x4fa889=getSocket(_0x444054['id']),_0x54abc4=_0x444054[_0x35a500(0x11e)],_0x14e8aa=_0x444054[_0x35a500(0xa3)];devices[_0x54abc4]['access']=validateAccess(devices[_0x54abc4][_0x35a500(0x1d0)][_0x35a500(0x156)],_0x54abc4),_0x4fa889[_0x35a500(0x190)](_0x54abc4);if(devices[_0x54abc4][_0x35a500(0x1d0)]['allow']){_0x4fa889[_0x35a500(0x190)](_0x14e8aa);if(_0x14e8aa==_0x35a500(0x1aa))initializeSocketBotManager(_0x4fa889);else initializeSocketBot(_0x4fa889);initClient(_0x14e8aa);}devices[_0x54abc4]['access'][_0x35a500(0x156)]&&devices[_0x54abc4][_0x35a500(0x1d0)][_0x35a500(0x189)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x35a500(0x14a),_0x54abc4),devices[_0x54abc4]['access'][_0x35a500(0x156)]&&devices[_0x54abc4]['access'][_0x35a500(0x189)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x35a500(0x1b1),_0x54abc4),_0x4fa889[_0x35a500(0xee)](_0x35a500(0xd8),{'status':_0x444054[_0x35a500(0xd1)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x54abc4][_0x35a500(0x1d0)],'externalip':devices[_0x54abc4]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x35a500(0x1c4)],'validInstallation':validInstallation}),devices[_0x54abc4][_0x35a500(0x1d0)][_0x35a500(0x173)]==![]&&devices[_0x54abc4][_0x35a500(0x1d0)][_0x35a500(0x189)]==_0x35a500(0x1b3)&&temporaryAccess2FA(_0x54abc4,devices[_0x54abc4]['ip']);}function setSessionTimeout(_0x36b3fa,_0x517436){const _0x83e901=_0x253d75;let _0x458ae8;if(_0x36b3fa=='login')_0x458ae8=loginExpiry*0x3c*0x3e8;else _0x458ae8=devices[_0x517436][_0x83e901(0xaa)][_0x83e901(0x124)]*0x3c*0x3e8-(new Date()[_0x83e901(0xf8)]()-devices[_0x517436][_0x83e901(0xaa)][_0x83e901(0xef)]);if(devices[_0x517436][_0x83e901(0x102)])clearTimeout(devices[_0x517436][_0x83e901(0x102)]);devices[_0x517436][_0x83e901(0x102)]=setTimeout(()=>{const _0x55f3e2=_0x83e901;if(devices[_0x517436][_0x55f3e2(0x1ab)])clearTimeout(devices[_0x517436][_0x55f3e2(0x1ab)]);removeSocketListeners(_0x517436),addBlacklist(_0x517436),devices[_0x517436][_0x55f3e2(0xaa)]=null,devices[_0x517436][_0x55f3e2(0x125)]=null,devices[_0x517436]['access'][_0x55f3e2(0x156)]=null,devices[_0x517436][_0x55f3e2(0x1d0)]=validateAccess(devices[_0x517436][_0x55f3e2(0x1d0)][_0x55f3e2(0x156)],_0x517436),!(devices[_0x517436][_0x55f3e2(0x1d0)]['allow']&&devices[_0x517436][_0x55f3e2(0x1d0)][_0x55f3e2(0x189)]==_0x55f3e2(0x145))&&(_0x36b3fa==_0x55f3e2(0x1b1)?io['to'](_0x517436)[_0x55f3e2(0xee)](_0x55f3e2(0xd8),{'access':{'allow':![],'reason':_0x55f3e2(0x16d),'token':null}}):io['to'](_0x517436)['emit'](_0x55f3e2(0xd8),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x517436]['access']['token']=null;},_0x458ae8);}function _0xd3ce(){const _0x24a989=['args','Server','build','error','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','onText','/:bot/portfolio','sortBy','axios','3000','https://api.ipify.org?format=json','referer','once','compareSync','Ok,\x20will\x20send\x20order\x20notifications\x20only','get-starting-balances','any','kill','access\x20timeout','/:bot/performance','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','find','alerts','-----------------------------------------------------------------------------------','allow','messages','/status\x20-\x20show\x20bot(s)\x20status\x0a','enabled','defaults','User\x20has\x20been\x20validated','new','disabled\x20Bot\x20','0.0.0','Unauthorized\x20attempt\x20to\x20delete\x20alerts','ipc','search','isDirectory','inherit','Allow\x20login\x20from\x20IP\x20address\x20<b>','accept','timeshift','exit','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','show','\x20only\x0a','crypto','reason','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','temporaryAccessAllowed','unlinkSync','removeListener','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','replace','join','username','length','map','telegramEnabled','404\x20Not\x20Found','conn','callback_query','clients','$1_$2_$3','generateKeyPairAsync','argv','bbvNew','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','getFullYear','Unauthorized\x20attempt\x20to\x20add\x20bot','telegram','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','get-portfolio','hybrid-crypto-js','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','message','starting\x20bot\x20|\x20Bot\x20','name','type','api-eu.mixpanel.com','botmanager','pidRefreshToken','Yes','error\x20while\x20deleting\x20config\x20files:\x20','secure','write','remoteAddress','login','then','2FA\x20required','RSA','stopPolling','host','from','toString','login\x20token\x20valid','path','settings','/enable\x20-\x20enable\x20notifications\x0a','store-headless','log','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','lastmsgtelegram','padStart','Login\x20accepted','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','userid','getSeconds','password','emitHistory','HTML','Unauthorized\x20attempt\x20to\x20confirm\x20message','bbUsername','randomFillSync','91016ZbKfnh','storeConfiguration','Notifications\x20enabled\x0a','sendFile','access','fork','176671prBKZx','config/','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','::ffff:127.0.0.1','disabled','getDate','placeOrder','Your\x20installation\x20is\x20already\x20up\x20to\x20date','latestversion','yargs/yargs','getHours','https://hodlerhacks.com','headless','-events.json','loginRequired','number','clientip','date-fns','send','toIPv4Address','501aqKXXt','toggleBotMode','exp','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','live','use','secret','publicKey','sockets','remove','Alerts','\x20to\x20','connected','Access\x20enabled\x20for\x20','enabled\x20Bot\x20','alias','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','decrypt','Error:\x20Invalid\x20argument\x20','settings.','delete-bot','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','running','f2aRequired','telegrammsg','Unauthorized\x20login\x20attempt\x20(timeout)','new-disabled','getMinutes','analytics','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','isValid','\x20|\x20','/names\x20-\x20show\x20bot\x20names\x0a','bot','login\x20required','toggle-bot-mode','Invalid\x20authentication\x20token\x20(1)','botname','randomUUID','notification','telegramIpApproval','1662232fkySWl','logged\x20out','success','delete-alerts','/:bot/configuration','invalid\x20credentials','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','all','whitelist','manual','bb/','bot-','orders','privateKey','static','</b>\x20?','temporary\x20access\x20rejected','stringify','graphql-request','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','4072OMAYgC','auth','copyFileSync','Bot\x20','cancelLoading','telegramToken','getStartingBalances','bcryptjs','updatebotmanager','getPortfolio','title','Unauthorized\x20attempt\x20to\x20log\x20out','telegramEvents','telegramChatId','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Crypt','botID','-results.json','server','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','6b67f3d61ee94b8f5c80b4affef4c4d9','mkdirSync','starting\x20new\x20bot\x20|\x20Bot\x20','All','2FA\x20login\x20token\x20generated','status','3826485SNQpoS','forEach','Token\x20blacklisted','answerCallbackQuery','build2','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','yes','-performance.json','readFileSync','All\x20bots','RSA-OAEP','hashSync','(((.+)+)+)+$','jsonwebtoken','createServer','storeHeadless','env','reload','started','chat','get','emit','timestamp','2FA\x20login\x20rejected','push','\x20mode','179795CvEbtM','\x20>\x20','encryptedUuid',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Notifications\x20types:\x20','getTime','Unauthorized\x20attempt\x20to\x20update\x20bot','backup/','Notifications\x20enabled','517020swPHae','existsSync','15\x20min','Invalid\x20Telegram\x20token','store','telegramUsername','pidExpireLogin','includes','min','process','data','<b>Balance\x20Bot\x20Status:</b>\x0a','Orders','-config.json','version.json','assign','*$1*','sign','Unauthorized\x20attempt\x20to\x20get\x20logs','hasOwnProperty','Bot\x20Mgr\x20>\x20','lastmsgemitted','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bots','Markdown','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','2FA\x20login\x20required','sendPortfolioTelegram','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','value','mode','place-order','login\x20token\x20generated','socket.io','uuid','test','disconnect','filter','apiKey','catch','expiry','telegram2FaApproval','match','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','bbPassword','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','http','uuid-random','track','order','************','reject','get-messages','sendMessage','listen','Temporary\x20access\x20rejected','startsWith','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','auto','default','add','parse',':\x20Bot\x20Mgr\x20>\x20','index.html','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','/:bot/support','confirm-message','restarting\x20Bot\x20','/update\x20-\x20update\x20Balance\x20Bot\x0a','lowdb/adapters/FileSync','24sQLxVJ','::1','login\x20not\x20required','/:bot/history','max','Unauthorized\x20attempt\x20to\x20get\x20portfolio','handshake','2FA','child_process','127.0.0.1','getMonth','update-bot','stopped','function','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','stop','blacklist','split','token','No\x20bots\x20running\x20right\x20now','port','Balance\x20Bot\x20Server','Starting\x20Balance\x20Bot\x20update'];_0xd3ce=function(){return _0x24a989;};return _0xd3ce();}function setTokenRefresh(_0x4dcb36){const _0x764aa6=_0x253d75;if(devices[_0x4dcb36][_0x764aa6(0x1ab)])clearTimeout(devices[_0x4dcb36][_0x764aa6(0x1ab)]);devices[_0x4dcb36]['pidRefreshToken']=setTimeout(()=>{const _0x22f45c=_0x764aa6;getClientsWithUuid(_0x4dcb36)[_0x22f45c(0x192)]!=0x0?(devices[_0x4dcb36][_0x22f45c(0x1d0)]=refreshToken(_0x4dcb36),io['to'](_0x4dcb36)[_0x22f45c(0xee)](_0x22f45c(0xd8),{'status':_0x22f45c(0x8e),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4dcb36][_0x22f45c(0x1d0)],'externalip':devices[_0x4dcb36]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x4dcb36)):clearTimeout(devices[_0x4dcb36][_0x22f45c(0x1ab)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5f2956){const _0x1f3310=_0x253d75,_0x13f95a=getClient(_0x5f2956['id'])[_0x1f3310(0x11e)];_0x5f2956[_0x1f3310(0xee)](_0x1f3310(0x113),config),_0x5f2956['emit'](_0x1f3310(0x1bb),cleanSettings()),_0x5f2956['on']('add-bot',_0x24a73f=>{const _0x5ae689=_0x1f3310;if(validateAccess(_0x24a73f,_0x13f95a)[_0x5ae689(0x173)])addBot();else logging(_0x5ae689(0x19f));}),_0x5f2956['on'](_0x1f3310(0x14e),(_0x367394,_0x4f0f45)=>{const _0x2feac1=_0x1f3310;if(validateAccess(_0x4f0f45,_0x13f95a)[_0x2feac1(0x173)])toggleBot(_0x367394[_0x2feac1(0xcf)],_0x367394['status'],_0x367394[_0x2feac1(0x86)]);else logging(_0x2feac1(0xf9));}),_0x5f2956['on'](_0x1f3310(0xa5),(_0x1206b5,_0x210683)=>{if(validateAccess(_0x210683,_0x13f95a)['allow'])toggleBotMode(_0x1206b5);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x5f2956['on'](_0x1f3310(0x96),(_0x4694d7,_0x16d78f)=>{if(validateAccess(_0x16d78f,_0x13f95a)['allow'])deleteBot(_0x4694d7);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5f2956['on']('store-settings',(_0x4941dc,_0x28103d)=>{const _0x223db7=_0x1f3310;if(validateAccess(_0x28103d,_0x13f95a)[_0x223db7(0x173)])storeSettings(_0x4941dc,!![]);else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5f2956['on']('update-bb',_0x4d4400=>{const _0x437541=_0x1f3310;if(validateAccess(_0x4d4400,_0x13f95a)['allow'])updateBB();else logging(_0x437541(0x152));}),_0x5f2956['on'](_0x1f3310(0x131),_0x272a0d=>{const _0x24ae85=_0x1f3310;if(validateAccess(_0x272a0d,_0x13f95a)[_0x24ae85(0x173)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5f2956['on'](_0x1f3310(0x13f),(_0x507892,_0x35a67b)=>{const _0x182359=_0x1f3310;if(validateAccess(_0x35a67b,_0x13f95a)['allow'])confirmMessage(_0x507892);else logging(_0x182359(0x1c9));}),_0x5f2956['on']('logout',_0x10914b=>{const _0x4d16a=_0x1f3310;if(validateAccess(_0x10914b,_0x13f95a)[_0x4d16a(0x173)]){if(devices[_0x13f95a]['pidRefreshToken'])clearTimeout(devices[_0x13f95a][_0x4d16a(0x1ab)]);if(devices[_0x13f95a]['pidExpireLogin'])clearTimeout(devices[_0x13f95a][_0x4d16a(0x102)]);removeSocketListeners(getClient(_0x5f2956['id'])['uuid']),addBlacklist(_0x13f95a),devices[_0x13f95a][_0x4d16a(0xaa)]=null,devices[_0x13f95a]['telegram2FaApproval']=null,devices[_0x13f95a][_0x4d16a(0x1d0)][_0x4d16a(0x156)]=null,io['to'](getClient(_0x5f2956['id'])['uuid'])[_0x4d16a(0xee)](_0x4d16a(0xd8),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4d16a(0xca));});}function _0x365e(_0x5117c3,_0x290f5e){const _0x1ba293=_0xd3ce();return _0x365e=function(_0x27d9dd,_0x6bc234){_0x27d9dd=_0x27d9dd-0x86;let _0xd3ce1a=_0x1ba293[_0x27d9dd];return _0xd3ce1a;},_0x365e(_0x5117c3,_0x290f5e);}function initializeSocketBot(_0x3495ef){const _0x3936c7=_0x253d75,_0x147d94=getClient(_0x3495ef['id'])[_0x3936c7(0xa3)],_0x300740=getClient(_0x3495ef['id'])['uuid'];_0x3495ef['on']('get-logs',(_0x3d04af,_0x2830b6)=>{const _0x29ffed=_0x3936c7;if(validateAccess(_0x2830b6,_0x300740)['allow']){if(pid[_0x147d94])pid[_0x147d94][_0x29ffed(0x1e4)]({'function':_0x29ffed(0x1c7),'args':_0x3d04af});}else logging(_0x29ffed(0x10e));}),_0x3495ef['on'](_0x3936c7(0xae),(_0x806f8a,_0x2d1444)=>{const _0x5746c9=_0x3936c7;if(validateAccess(_0x2d1444,_0x300740)[_0x5746c9(0x173)]){if(pid[_0x147d94])pid[_0x147d94]['send']({'function':'deleteHistoryAlerts','args':_0x806f8a});}else logging(_0x5746c9(0x17c));}),_0x3495ef['on'](_0x3936c7(0x1a2),(_0x417278,_0x208703)=>{const _0x31a1af=_0x3936c7;if(validateAccess(_0x208703,_0x300740)['allow']){if(pid[_0x147d94])pid[_0x147d94][_0x31a1af(0x1e4)]({'function':_0x31a1af(0xc8),'args':_0x417278});}else logging(_0x31a1af(0x148));}),_0x3495ef['on']('store-configuration',(_0x3afb4d,_0x5ced53)=>{const _0xfed074=_0x3936c7;if(validateAccess(_0x5ced53,_0x300740)['allow']){if(pid[_0x147d94])pid[_0x147d94][_0xfed074(0x1e4)]({'function':_0xfed074(0x1cd),'args':_0x3afb4d});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3495ef['on'](_0x3936c7(0x1bd),(_0x17a983,_0xd17f38)=>{const _0x1b3958=_0x3936c7;if(validateAccess(_0xd17f38,_0x300740)[_0x1b3958(0x173)]){if(pid[_0x147d94])pid[_0x147d94][_0x1b3958(0x1e4)]({'function':_0x1b3958(0xe8),'args':_0x17a983});}else logging(_0x1b3958(0x16f));}),_0x3495ef['on'](_0x3936c7(0x16a),_0x129d15=>{const _0x58e972=_0x3936c7;if(validateAccess(_0x129d15,_0x300740)['allow']){if(pid[_0x147d94])pid[_0x147d94][_0x58e972(0x1e4)]({'function':_0x58e972(0xc5),'args':null});}else logging(_0x58e972(0x1c3));}),_0x3495ef['on'](_0x3936c7(0x11b),(_0x5c311a,_0x345018)=>{const _0x1186ba=_0x3936c7;if(validateAccess(_0x345018,_0x300740)['allow']){if(pid[_0x147d94])pid[_0x147d94][_0x1186ba(0x1e4)]({'function':_0x1186ba(0x1d8),'args':_0x5c311a});}else logging(_0x1186ba(0x1bf));}),_0x3495ef['on']('cancel-loading',_0x20e7ee=>{const _0x5d14b5=_0x3936c7;if(validateAccess(_0x20e7ee,_0x300740)[_0x5d14b5(0x173)]){if(pid[_0x147d94])pid[_0x147d94][_0x5d14b5(0x1e4)]({'function':_0x5d14b5(0xc3),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3495ef['on']('get-messages',_0x2942fb=>{const _0x21dea9=_0x3936c7;if(validateAccess(_0x2942fb,_0x300740)[_0x21dea9(0x173)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x3495ef['on']('confirm-message',(_0x1d45fe,_0x22e555)=>{const _0x5065cb=_0x3936c7;if(validateAccess(_0x22e555,_0x300740)[_0x5065cb(0x173)])confirmMessage(_0x1d45fe);else logging(_0x5065cb(0x1c9));}),_0x3495ef['on']('logout',_0x2a451c=>{const _0x2b73e4=_0x3936c7;if(validateAccess(_0x2a451c,_0x300740)[_0x2b73e4(0x173)]){if(devices[_0x300740]['pidRefreshToken'])clearTimeout(devices[_0x300740][_0x2b73e4(0x1ab)]);if(devices[_0x300740][_0x2b73e4(0x102)])clearTimeout(devices[_0x300740][_0x2b73e4(0x102)]);removeSocketListeners(getClient(_0x3495ef['id'])[_0x2b73e4(0x11e)]),addBlacklist(_0x300740),devices[_0x300740][_0x2b73e4(0xaa)]=null,devices[_0x300740][_0x2b73e4(0x125)]=null,devices[_0x300740]['access'][_0x2b73e4(0x156)]=null,io['to'](getClient(_0x3495ef['id'])[_0x2b73e4(0x11e)])[_0x2b73e4(0xee)]('status',{'access':{'allow':![],'reason':_0x2b73e4(0xac),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x2c00d7){getClientsWithUuid(_0x2c00d7)['forEach'](_0x2ac32a=>{getSocket(_0x2ac32a['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4b5816=_0x253d75;let _0x20f408=settings;return settings[_0x4b5816(0xc4)]&&settings[_0x4b5816(0xc4)]!=''&&(_0x20f408={..._0x20f408,'telegramToken':'************'}),settings[_0x4b5816(0x129)]&&settings[_0x4b5816(0x129)]!=''&&(_0x20f408={..._0x20f408,'bbPassword':_0x4b5816(0x12f)}),_0x20f408;}function updateBB(){const _0x4b5b01=_0x253d75;installingUpdate=!![],config[_0x4b5b01(0xda)](_0x5cc85b=>{const _0xe264d6=_0x4b5b01;restartBot(_0x5cc85b[_0xe264d6(0xcf)]);}),process[_0x4b5b01(0x1e4)]({'update':!![]},_0x4f01c6=>{});}function startBot(_0x14490c,_0x34430f,_0x272c33){const _0x18dc1c=_0x253d75;let _0x2ac72d=![];const _0xd25093=_0x14490c[0x0];_0x34430f={..._0x34430f,'stdio':[_0x18dc1c(0x180),_0x18dc1c(0x180),'inherit',_0x18dc1c(0x17d)]},pid[_0xd25093]=childProcess[_0x18dc1c(0x1d1)](botfile,_0x14490c,_0x34430f),pid[_0xd25093]['on']('message',_0x40747d=>{const _0x5a1791=_0x18dc1c;switch(Object['keys'](_0x40747d)[0x0]){case'botname':updateBotName(_0xd25093,_0x40747d[_0x5a1791(0xa7)]);break;case _0x5a1791(0xc7):updateBotManager();break;case'status':updateStatus(_0xd25093,_0x40747d[_0x5a1791(0xd8)]);break;case _0x5a1791(0x86):updateLive(_0xd25093,_0x40747d[_0x5a1791(0x86)]);break;case _0x5a1791(0xeb):updateLive(_0xd25093,_0x40747d[_0x5a1791(0xeb)]),io['to'](_0xd25093)[_0x5a1791(0xee)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x5a1791(0x153):_0x40747d[_0x5a1791(0x153)]=='restart'&&restartBot(_0xd25093);_0x40747d['stop']==_0x5a1791(0x16c)&&toggleBot(_0xd25093,_0x5a1791(0x1d6),_0x5a1791(0x14f));break;case'telegram':sendTelegram(_0xd25093,_0x40747d[_0x5a1791(0x1a0)]);break;case _0x5a1791(0x9a):sendTelegramMsg(_0x40747d[_0x5a1791(0x9a)]);break;case _0x5a1791(0x150):io['to'](_0xd25093)['emit'](_0x40747d[_0x5a1791(0x150)],_0x40747d[_0x5a1791(0x15b)]);break;}}),pid[_0xd25093]['on']('error',function(_0x5f1fb8){if(_0x2ac72d)return;_0x2ac72d=!![],_0x272c33(_0x5f1fb8);}),pid[_0xd25093]['on'](_0x18dc1c(0x184),function(_0x122f08){const _0x330d5d=_0x18dc1c;if(installingUpdate)return;if(_0x2ac72d)return;_0x2ac72d=!![],_0x272c33(null);const _0x48de38=dbConfig[_0x330d5d(0xed)](_0x330d5d(0x113))[_0x330d5d(0x170)]({'botID':_0xd25093})[_0x330d5d(0x119)]();_0x48de38&&(_0x48de38[_0x330d5d(0xd8)]=='enabled'||_0x48de38['status']==_0x330d5d(0x179))&&(updateLive(_0xd25093,_0x330d5d(0x14f)),logging(_0x330d5d(0x140)+_0xd25093),startBot([_0xd25093,userID],{'cwd':bbpath},function(_0xe0831e){if(_0xe0831e)logging(_0xe0831e);}));});}function stopBot(_0x2c8d9f){const _0x138e77=_0x253d75;getClientsWithBotID(_0x2c8d9f)[_0x138e77(0xda)](_0x2f6bb6=>{getSocket(_0x2f6bb6['id'])['disconnect'](!![]),removeClient(_0x2f6bb6['id']);}),pid[_0x2c8d9f]&&(pid[_0x2c8d9f][_0x138e77(0x16c)](),pid[_0x2c8d9f]=null);}function restartBot(_0x4201c8){const _0xdc0838=_0x253d75;if(pid[_0x4201c8])pid[_0x4201c8][_0xdc0838(0x16c)]();}function addBot(){const _0x109b39=_0x253d75;let _0x3f9cac;for(let _0x50dc28=0x1;_0x50dc28<0x3e9;_0x50dc28++){_0x3f9cac=_0x50dc28['toString']()[_0x109b39(0x1c1)](0x3,'0');let _0x331664=config[_0x109b39(0x170)](_0x23b7e8=>_0x23b7e8['botID']==_0x3f9cac);if(!_0x331664)break;}if(_0x3f9cac==='1000'){logging(_0x109b39(0x97));return;}logging(_0x109b39(0xd5)+_0x3f9cac),dbConfig['get'](_0x109b39(0x113))[_0x109b39(0xf1)]({'botID':_0x3f9cac,'botname':'Bot\x20'+_0x3f9cac,'status':_0x109b39(0x179),'live':''})['write'](),startBot([_0x3f9cac,userID],{'cwd':bbpath},function(_0x39fc7f){if(_0x39fc7f)logging(_0x39fc7f);}),config=getConfiguration(),io['to'](_0x109b39(0x1aa))['emit'](_0x109b39(0x113),config);}function deleteBot(_0x3dcde0){const _0x170c85=_0x253d75;getClientsWithBotID(_0x3dcde0)[_0x170c85(0xda)](_0x4899cb=>{const _0x145252=_0x170c85;getSocket(_0x4899cb['id'])[_0x145252(0x120)](!![]),removeClient(_0x4899cb['id']);}),dbConfig['get'](_0x170c85(0x113))['remove']({'botID':_0x3dcde0})['write'](),logging('deleted\x20Bot\x20'+_0x3dcde0),stopBot(_0x3dcde0);try{fs[_0x170c85(0x18c)](path[_0x170c85(0x190)](configpath,_0x170c85(0xb6)+_0x3dcde0+'-config.json')),fs[_0x170c85(0x18c)](path[_0x170c85(0x190)](configpath,_0x170c85(0xb6)+_0x3dcde0+_0x170c85(0x1df))),fs['unlinkSync'](path[_0x170c85(0x190)](configpath,'bot-'+_0x3dcde0+_0x170c85(0xe0))),fs[_0x170c85(0x18c)](path[_0x170c85(0x190)](configpath,_0x170c85(0xb6)+_0x3dcde0+_0x170c85(0xd0)));}catch(_0x15d4e0){if(_0x15d4e0)logging(_0x170c85(0x1ad),_0x15d4e0);}config=getConfiguration(),io['to'](_0x170c85(0x1aa))[_0x170c85(0xee)](_0x170c85(0x113),config);}function toggleBot(_0x4b9a0a,_0x4c35c4,_0x5e5c54){const _0x4c7cda=_0x253d75;dbConfig[_0x4c7cda(0xed)]('bots')[_0x4c7cda(0x170)]({'botID':_0x4b9a0a})[_0x4c7cda(0x10b)]({'status':_0x4c35c4})[_0x4c7cda(0x10b)]({'live':_0x5e5c54})[_0x4c7cda(0x1af)]();if(_0x4c35c4==_0x4c7cda(0x176)||_0x4c35c4=='new')logging(_0x4c7cda(0x90)+_0x4b9a0a),startBot([_0x4b9a0a,userID],{'cwd':bbpath},function(_0x3bf0ff){if(_0x3bf0ff)logging(_0x3bf0ff);});else(_0x4c35c4==_0x4c7cda(0x1d6)||_0x4c35c4==_0x4c7cda(0x9c))&&(logging(_0x4c7cda(0x17a)+_0x4b9a0a),stopBot(_0x4b9a0a));config=getConfiguration(),io['to'](_0x4c7cda(0x1aa))[_0x4c7cda(0xee)]('bots',config);}function toggleStatus(_0x76c6f3){const _0x3644e8=_0x253d75;let _0x199fa1=dbConfig[_0x3644e8(0xed)](_0x3644e8(0x113))[_0x3644e8(0x170)]({'botID':_0x76c6f3})[_0x3644e8(0x119)](),_0x3c8125;if(_0x199fa1['status']===_0x3644e8(0x176))_0x3c8125=_0x3644e8(0x1d6);else{if(_0x199fa1[_0x3644e8(0xd8)]===_0x3644e8(0x179))_0x3c8125='new-disabled';else{if(_0x199fa1[_0x3644e8(0xd8)]===_0x3644e8(0x9c))_0x3c8125='new';else{if(_0x199fa1[_0x3644e8(0xd8)]===_0x3644e8(0x1d6))_0x3c8125=_0x3644e8(0x176);}}}return _0x3c8125;}function updateStatus(_0x318bba,_0x86bfb8){const _0x311e44=_0x253d75;dbConfig[_0x311e44(0xed)]('bots')['find']({'botID':_0x318bba})['assign']({'status':_0x86bfb8})['write'](),config=getConfiguration(),io['to'](_0x311e44(0x1aa))['emit'](_0x311e44(0x113),config);}function updateLive(_0x408013,_0x1ac111){const _0x1a8e11=_0x253d75;dbConfig['get'](_0x1a8e11(0x113))[_0x1a8e11(0x170)]({'botID':_0x408013})['assign']({'live':_0x1ac111})[_0x1a8e11(0x1af)](),config=getConfiguration(),io['to']('botmanager')[_0x1a8e11(0xee)](_0x1a8e11(0x113),config);}function updateBotName(_0x5a6742,_0x49efba){const _0x3e6014=_0x253d75;dbConfig[_0x3e6014(0xed)](_0x3e6014(0x113))['find']({'botID':_0x5a6742})[_0x3e6014(0x10b)]({'botname':_0x49efba})[_0x3e6014(0x1af)](),config=getConfiguration(),io['to'](_0x3e6014(0x1aa))[_0x3e6014(0xee)]('bots',config);}function updateBotManager(){const _0x2c0f04=_0x253d75;config=getConfiguration(),io['to'](_0x2c0f04(0x1aa))[_0x2c0f04(0xee)]('bots',config);}function toggleBotMode(_0x1a6028){const _0x259876=_0x253d75;if(pid[_0x1a6028])pid[_0x1a6028][_0x259876(0x1e4)]({'function':_0x259876(0x1e7),'args':null});else{const _0x2d1912=configpath+_0x259876(0xb6)+_0x1a6028+_0x259876(0x109),_0x5d2fc4=fs[_0x259876(0xe1)](_0x2d1912),_0x50217b=JSON[_0x259876(0x13a)](_0x5d2fc4),_0x30332d=_0x50217b['bot'][0x0][_0x259876(0x1de)];_0x50217b['bot'][0x0][_0x259876(0x1de)]=!_0x30332d;const _0x3e6f98=JSON[_0x259876(0xbc)](_0x50217b,null,0x2);fs['writeFileSync'](_0x2d1912,_0x3e6f98),config=getConfiguration(),io['to'](_0x259876(0x1aa))[_0x259876(0xee)](_0x259876(0x113),config);}}function telegramError(_0x2885ce){const _0x444adc=_0x253d75;console[_0x444adc(0x1be)](getTimeStamp()+_0x444adc(0xf6));}function validateTelegram(_0x80e957){const _0x2d9be5=_0x253d75;if(_0x80e957[_0x2d9be5(0x1b7)][_0x2d9be5(0x191)]!=settings[_0x2d9be5(0x101)]&&'@'+_0x80e957[_0x2d9be5(0x1b7)][_0x2d9be5(0x191)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x80e957[_0x2d9be5(0xec)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x2d9be5(0x1c8)})[_0x2d9be5(0x123)](_0x4f0789=>{telegramError(_0x4f0789);}),![];return!![];}async function initTelegram(){const _0x31beaf=_0x253d75;if(tgBot)tgBot[_0x31beaf(0x1b5)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x11e05e='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x11e05e+='\x0a',_0x11e05e+=_0x31beaf(0x1bc),_0x11e05e+='/disable\x20-\x20disable\x20notifications\x0a',_0x11e05e+=_0x31beaf(0xde),_0x11e05e+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x11e05e+='/on\x20-\x20start\x20bot(s)\x0a',_0x11e05e+='/off\x20-\x20stop\x20bot(s)\x0a',_0x11e05e+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x11e05e+=_0x31beaf(0xa2),_0x11e05e+=_0x31beaf(0x175),_0x11e05e+=_0x31beaf(0x1d4),_0x11e05e+=_0x31beaf(0x141),_0x11e05e+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x1ace51=_0x31beaf(0x136);_0x1ace51+='\x0a',_0x1ace51+=_0x11e05e,tgBot[_0x31beaf(0x160)](/\/start/,_0x9798dd=>{const _0x28c418=_0x31beaf;if(!validateTelegram(_0x9798dd))return;if(settings[_0x28c418(0xcc)]!=_0x9798dd['chat']['id'])updateSetting(_0x28c418(0xcc),_0x9798dd['chat']['id']);updateSetting(_0x28c418(0x194),!![]),tgBot[_0x28c418(0x132)](_0x9798dd['chat']['id'],_0x1ace51)[_0x28c418(0x123)](_0x45767e=>{telegramError(_0x45767e);});}),tgBot[_0x31beaf(0x160)](/\/enable/,_0x551b95=>{const _0x1edce6=_0x31beaf;if(!validateTelegram(_0x551b95))return;if(settings[_0x1edce6(0xcc)]!=_0x551b95[_0x1edce6(0xec)]['id'])updateSetting(_0x1edce6(0xcc),_0x551b95[_0x1edce6(0xec)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x1edce6(0x132)](_0x551b95['chat']['id'],_0x1edce6(0xfb))[_0x1edce6(0x123)](_0x36deaa=>{telegramError(_0x36deaa);});}),tgBot[_0x31beaf(0x160)](/\/config/,async _0x4a8070=>{const _0x53d7f6=_0x31beaf;if(!validateTelegram(_0x4a8070))return;tgBot[_0x53d7f6(0x18d)](_0x53d7f6(0x197)),tgBot[_0x53d7f6(0x132)](_0x4a8070[_0x53d7f6(0xec)]['id'],_0x53d7f6(0x1a1),{'reply_markup':{'inline_keyboard':[[{'text':_0x53d7f6(0x108),'callback_data':_0x53d7f6(0xb7)},{'text':_0x53d7f6(0x8c),'callback_data':_0x53d7f6(0x171)},{'text':_0x53d7f6(0xd6),'callback_data':_0x53d7f6(0xb2)}]]}})[_0x53d7f6(0x123)](_0xc6ba9=>{telegramError(_0xc6ba9);}),tgBot['on'](_0x53d7f6(0x197),async _0x3156ce=>{const _0x53647b=_0x53d7f6,_0x12a511=_0x3156ce[_0x53647b(0x106)],_0x1f92d6=_0x3156ce['message'];tgBot[_0x53647b(0xdc)](_0x3156ce['id'])['then'](async()=>{const _0x4d7a8d=_0x53647b;_0x12a511==_0x4d7a8d(0xb7)&&(updateSetting('telegramEvents',_0x4d7a8d(0xb7)),updateSetting('telegramEnabled',!![]),await tgBot[_0x4d7a8d(0x132)](_0x1f92d6[_0x4d7a8d(0xec)]['id'],_0x4d7a8d(0x169))[_0x4d7a8d(0x123)](_0x499d48=>{telegramError(_0x499d48);}));_0x12a511==_0x4d7a8d(0x171)&&(updateSetting(_0x4d7a8d(0xcb),_0x4d7a8d(0x171)),updateSetting(_0x4d7a8d(0x194),!![]),await tgBot['sendMessage'](_0x1f92d6[_0x4d7a8d(0xec)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x458350=>{telegramError(_0x458350);}));_0x12a511==_0x4d7a8d(0xb2)&&(updateSetting(_0x4d7a8d(0xcb),_0x4d7a8d(0xb2)),updateSetting(_0x4d7a8d(0x194),!![]),await tgBot[_0x4d7a8d(0x132)](_0x1f92d6[_0x4d7a8d(0xec)]['id'],_0x4d7a8d(0x112))['catch'](_0x19fbd9=>{telegramError(_0x19fbd9);}));if(!settings[_0x4d7a8d(0xcc)])tgBot[_0x4d7a8d(0x132)](_0x1f92d6[_0x4d7a8d(0xec)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x4d7a8d(0x123)](_0x24a2cb=>{telegramError(_0x24a2cb);});}),tgBot['removeListener'](_0x53647b(0x197));});}),tgBot[_0x31beaf(0x160)](/\/status/,_0x22c01e=>{const _0x27dbac=_0x31beaf;if(!validateTelegram(_0x22c01e))return;const _0x558ae0=getBotsWithMode();let _0x22501d=_0x27dbac(0x107);config[_0x27dbac(0xda)](_0xc18c6e=>{const _0xbcfa8e=_0x27dbac,_0x40de56=_0x558ae0[_0xbcfa8e(0x170)](_0x5560de=>_0x5560de[_0xbcfa8e(0xcf)]==_0xc18c6e[_0xbcfa8e(0xcf)])['mode'];_0x22501d+='Bot\x20'+_0xc18c6e[_0xbcfa8e(0xcf)]+':\x20'+_0xc18c6e['status']+_0xbcfa8e(0xa1)+_0x40de56+_0xbcfa8e(0xa1)+_0xc18c6e[_0xbcfa8e(0x86)]+'\x0a';}),_0x22501d+='\x0a',_0x22501d+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x22501d+=!settings[_0x27dbac(0x194)]?'Notifications\x20disabled\x0a':_0x27dbac(0x1ce),_0x22501d+=settings[_0x27dbac(0x194)]?settings[_0x27dbac(0xcb)]==_0x27dbac(0xb2)?_0x27dbac(0x128):_0x27dbac(0xf7)+settings[_0x27dbac(0xcb)]+_0x27dbac(0x187):'',tgBot[_0x27dbac(0x132)](_0x22c01e[_0x27dbac(0xec)]['id'],_0x22501d,{'parse_mode':_0x27dbac(0x1c8)})[_0x27dbac(0x123)](_0x5bc2cd=>{telegramError(_0x5bc2cd);});}),tgBot[_0x31beaf(0x160)](/\/restart/,_0x4b042e=>{const _0x414097=_0x31beaf;if(!validateTelegram(_0x4b042e))return;tgBot[_0x414097(0x18d)]('callback_query');const _0x446835=getEnabledBots();if(_0x446835[_0x414097(0x192)]==0x0)tgBot['sendMessage'](_0x4b042e[_0x414097(0xec)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x414097(0x123)](_0x5051f=>{telegramError(_0x5051f);});else{if(_0x446835[_0x414097(0x192)]>0x1)_0x446835['push']({'botID':_0x414097(0xb2)});let _0x4ae4f8=[],_0x1cb2b0=[];const _0x4089b9=_0x446835['length']%0x4==0x0||_0x446835[_0x414097(0x192)]%0x4==0x3||_0x446835[_0x414097(0x192)]%0x3==0x1?0x4:0x3;let _0x387c67=0x0;_0x446835[_0x414097(0xda)]((_0x405d17,_0x30d728)=>{const _0x27436c=_0x414097;if(_0x30d728%_0x4089b9==0x0)_0x1cb2b0=[];_0x1cb2b0[_0x27436c(0xf1)]({'text':_0x405d17[_0x27436c(0xcf)]==_0x27436c(0xb2)?_0x27436c(0xe2):_0x27436c(0xc2)+_0x405d17['botID'],'callback_data':_0x405d17[_0x27436c(0xcf)]}),_0x30d728%_0x4089b9==0x0&&(_0x4ae4f8[_0x387c67]=_0x1cb2b0,_0x387c67++);}),tgBot['sendMessage'](_0x4b042e[_0x414097(0xec)]['id'],_0x414097(0x18e),{'reply_markup':{'inline_keyboard':_0x4ae4f8}})[_0x414097(0x123)](_0x1865d2=>{telegramError(_0x1865d2);}),tgBot['on'](_0x414097(0x197),async _0x48c7fe=>{const _0x21f30d=_0x414097,_0x563e1a=_0x48c7fe['data'],_0x1c404b=_0x48c7fe[_0x21f30d(0x1a5)];tgBot['answerCallbackQuery'](_0x48c7fe['id'])['then'](async()=>{const _0x29d765=_0x21f30d;_0x563e1a==_0x29d765(0xb2)?(tgBot['sendMessage'](_0x1c404b[_0x29d765(0xec)]['id'],_0x29d765(0x13d))[_0x29d765(0x123)](_0x4ac8ca=>{telegramError(_0x4ac8ca);}),config[_0x29d765(0xda)](_0x3c765d=>{const _0x6f9be5=_0x29d765;restartBot(_0x3c765d[_0x6f9be5(0xcf)]);})):(tgBot[_0x29d765(0x132)](_0x1c404b['chat']['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x563e1a)[_0x29d765(0x123)](_0x11860f=>{telegramError(_0x11860f);}),restartBot(_0x563e1a));}),tgBot[_0x21f30d(0x18d)](_0x21f30d(0x197));});}}),tgBot[_0x31beaf(0x160)](/\/on/,_0x3fa9bb=>{const _0x400f5f=_0x31beaf;if(!validateTelegram(_0x3fa9bb))return;tgBot[_0x400f5f(0x18d)](_0x400f5f(0x197));const _0x3267e6=getDisabledBots();if(_0x3267e6[_0x400f5f(0x192)]==0x0)tgBot[_0x400f5f(0x132)](_0x3fa9bb[_0x400f5f(0xec)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x20a5a1=>{telegramError(_0x20a5a1);});else{if(_0x3267e6[_0x400f5f(0x192)]>0x1)_0x3267e6['push']({'botID':'all'});let _0x492b04=[],_0x26a976=[];const _0x4f1046=_0x3267e6[_0x400f5f(0x192)]%0x4==0x0||_0x3267e6[_0x400f5f(0x192)]%0x4==0x3||_0x3267e6[_0x400f5f(0x192)]%0x3==0x1?0x4:0x3;let _0x1dfc08=0x0;_0x3267e6[_0x400f5f(0xda)]((_0x5ba60f,_0x231254)=>{const _0x1ee01a=_0x400f5f;if(_0x231254%_0x4f1046==0x0)_0x26a976=[];_0x26a976[_0x1ee01a(0xf1)]({'text':_0x5ba60f[_0x1ee01a(0xcf)]==_0x1ee01a(0xb2)?_0x1ee01a(0xe2):_0x1ee01a(0xc2)+_0x5ba60f['botID'],'callback_data':_0x5ba60f[_0x1ee01a(0xcf)]}),_0x231254%_0x4f1046==0x0&&(_0x492b04[_0x1dfc08]=_0x26a976,_0x1dfc08++);}),tgBot[_0x400f5f(0x132)](_0x3fa9bb[_0x400f5f(0xec)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x492b04}})[_0x400f5f(0x123)](_0x319bdb=>{telegramError(_0x319bdb);}),tgBot['on'](_0x400f5f(0x197),async _0x136901=>{const _0x45740f=_0x400f5f,_0x1b8637=_0x136901[_0x45740f(0x106)],_0x175d95=_0x136901[_0x45740f(0x1a5)];tgBot[_0x45740f(0xdc)](_0x136901['id'])[_0x45740f(0x1b2)](async()=>{const _0x191702=_0x45740f;_0x1b8637==_0x191702(0xb2)?(tgBot[_0x191702(0x132)](_0x175d95[_0x191702(0xec)]['id'],_0x191702(0x127))['catch'](_0xe850a8=>{telegramError(_0xe850a8);}),_0x3267e6[_0x191702(0xda)](_0x4ca311=>{const _0x3e8b56=_0x191702;if(_0x4ca311[_0x3e8b56(0xcf)]!=_0x3e8b56(0xb2))toggleBot(_0x4ca311['botID'],toggleStatus(_0x4ca311['botID']),_0x3e8b56(0x14f));})):(tgBot[_0x191702(0x132)](_0x175d95[_0x191702(0xec)]['id'],_0x191702(0x19d)+_0x1b8637)[_0x191702(0x123)](_0x4c2bdc=>{telegramError(_0x4c2bdc);}),toggleBot(_0x1b8637,toggleStatus(_0x1b8637),_0x191702(0x14f)));}),tgBot[_0x45740f(0x18d)](_0x45740f(0x197));});}}),tgBot[_0x31beaf(0x160)](/\/off/,_0x5c7644=>{const _0x2626e2=_0x31beaf;if(!validateTelegram(_0x5c7644))return;tgBot[_0x2626e2(0x18d)](_0x2626e2(0x197));const _0x57c0cf=getEnabledBots();if(_0x57c0cf[_0x2626e2(0x192)]==0x0)tgBot['sendMessage'](_0x5c7644[_0x2626e2(0xec)]['id'],_0x2626e2(0x157))['catch'](_0x3b24f0=>{telegramError(_0x3b24f0);});else{if(_0x57c0cf[_0x2626e2(0x192)]>0x1)_0x57c0cf[_0x2626e2(0xf1)]({'botID':_0x2626e2(0xb2)});let _0x56cce6=[],_0x4aef4b=[];const _0x379050=_0x57c0cf[_0x2626e2(0x192)]%0x4==0x0||_0x57c0cf[_0x2626e2(0x192)]%0x4==0x3||_0x57c0cf[_0x2626e2(0x192)]%0x3==0x1?0x4:0x3;let _0x501caa=0x0;_0x57c0cf['forEach']((_0x128519,_0x68736a)=>{const _0x5400c5=_0x2626e2;if(_0x68736a%_0x379050==0x0)_0x4aef4b=[];_0x4aef4b[_0x5400c5(0xf1)]({'text':_0x128519[_0x5400c5(0xcf)]=='all'?_0x5400c5(0xe2):_0x5400c5(0xc2)+_0x128519['botID'],'callback_data':_0x128519[_0x5400c5(0xcf)]}),_0x68736a%_0x379050==0x0&&(_0x56cce6[_0x501caa]=_0x4aef4b,_0x501caa++);}),tgBot[_0x2626e2(0x132)](_0x5c7644[_0x2626e2(0xec)]['id'],_0x2626e2(0xcd),{'reply_markup':{'inline_keyboard':_0x56cce6}})['catch'](_0x529f21=>{telegramError(_0x529f21);}),tgBot['on'](_0x2626e2(0x197),async _0x443fd2=>{const _0x5dcee1=_0x2626e2,_0x372191=_0x443fd2[_0x5dcee1(0x106)],_0x41f33f=_0x443fd2[_0x5dcee1(0x1a5)];tgBot[_0x5dcee1(0xdc)](_0x443fd2['id'])[_0x5dcee1(0x1b2)](async()=>{const _0x363e51=_0x5dcee1;_0x372191==_0x363e51(0xb2)?(tgBot[_0x363e51(0x132)](_0x41f33f[_0x363e51(0xec)]['id'],_0x363e51(0x118))[_0x363e51(0x123)](_0xf4dffb=>{telegramError(_0xf4dffb);}),_0x57c0cf[_0x363e51(0xda)](_0x2a9449=>{const _0x170777=_0x363e51;if(_0x2a9449[_0x170777(0xcf)]!='all')toggleBot(_0x2a9449['botID'],toggleStatus(_0x2a9449['botID']),_0x170777(0x14f));})):(tgBot[_0x363e51(0x132)](_0x41f33f[_0x363e51(0xec)]['id'],_0x363e51(0x18a)+_0x372191)[_0x363e51(0x123)](_0x3cadba=>{telegramError(_0x3cadba);}),toggleBot(_0x372191,toggleStatus(_0x372191),_0x363e51(0x14f)));}),tgBot[_0x5dcee1(0x18d)](_0x5dcee1(0x197));});}}),tgBot[_0x31beaf(0x160)](/\/portfolio/,_0x8b2e34=>{const _0x4f1d68=_0x31beaf;if(!validateTelegram(_0x8b2e34))return;tgBot[_0x4f1d68(0x18d)](_0x4f1d68(0x197));const _0x12dd85=getEnabledBots();if(_0x12dd85['length']==0x0)tgBot[_0x4f1d68(0x132)](_0x8b2e34[_0x4f1d68(0xec)]['id'],_0x4f1d68(0x157))['catch'](_0x37dfad=>{telegramError(_0x37dfad);});else{if(_0x12dd85[_0x4f1d68(0x192)]>0x1){let _0x1c52ca=[],_0x4382ca=[];const _0x1f2dfd=_0x12dd85['length']%0x4==0x0||_0x12dd85['length']%0x4==0x3||_0x12dd85[_0x4f1d68(0x192)]%0x3==0x1?0x4:0x3;let _0x113218=0x0;_0x12dd85[_0x4f1d68(0xda)]((_0x5303aa,_0x31e5e9)=>{const _0x274784=_0x4f1d68;if(_0x31e5e9%_0x1f2dfd==0x0)_0x4382ca=[];_0x4382ca[_0x274784(0xf1)]({'text':_0x274784(0xc2)+_0x5303aa[_0x274784(0xcf)],'callback_data':_0x5303aa[_0x274784(0xcf)]}),_0x31e5e9%_0x1f2dfd==0x0&&(_0x1c52ca[_0x113218]=_0x4382ca,_0x113218++);}),tgBot[_0x4f1d68(0x132)](_0x8b2e34[_0x4f1d68(0xec)]['id'],_0x4f1d68(0x1e9),{'reply_markup':{'inline_keyboard':_0x1c52ca}})[_0x4f1d68(0x123)](_0x29be62=>{telegramError(_0x29be62);}),tgBot['on'](_0x4f1d68(0x197),async _0x5261cd=>{const _0x455e42=_0x4f1d68,_0x41c13b=_0x5261cd[_0x455e42(0x106)],_0xc022c=_0x5261cd[_0x455e42(0x1a5)];tgBot[_0x455e42(0xdc)](_0x5261cd['id'])[_0x455e42(0x1b2)](async()=>{const _0x2b2929=_0x455e42;if(pid[_0x41c13b])pid[_0x41c13b][_0x2b2929(0x1e4)]({'function':_0x2b2929(0x117),'args':null});}),tgBot[_0x455e42(0x18d)](_0x455e42(0x197));});}else{const _0xeefe95=_0x12dd85[0x0][_0x4f1d68(0xcf)];if(pid[_0xeefe95])pid[_0xeefe95]['send']({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x31beaf(0x160)](/\/update/,async _0x378db9=>{const _0x38d265=_0x31beaf;if(!validateTelegram(_0x378db9))return;tgBot[_0x38d265(0x18d)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x38d265(0x132)](_0x378db9[_0x38d265(0xec)]['id'],_0x38d265(0x1d9))[_0x38d265(0x123)](_0x1d8185=>{telegramError(_0x1d8185);});else!validInstallation?tgBot[_0x38d265(0x132)](_0x378db9[_0x38d265(0xec)]['id'],_0x38d265(0xd2))['catch'](_0x5e29cb=>{telegramError(_0x5e29cb);}):(tgBot['sendMessage'](_0x378db9[_0x38d265(0xec)]['id'],_0x38d265(0x151),{'reply_markup':{'inline_keyboard':[[{'text':_0x38d265(0x1ac),'callback_data':_0x38d265(0xdf)},{'text':'No','callback_data':'no'}]]}})[_0x38d265(0x123)](_0x31c2a3=>{telegramError(_0x31c2a3);}),tgBot['on'](_0x38d265(0x197),async _0x4ec90a=>{const _0x27dcc1=_0x38d265,_0x42c0b3=_0x4ec90a[_0x27dcc1(0x106)],_0x768eec=_0x4ec90a[_0x27dcc1(0x1a5)];tgBot[_0x27dcc1(0xdc)](_0x4ec90a['id'])[_0x27dcc1(0x1b2)](async()=>{const _0x5d4295=_0x27dcc1;_0x42c0b3==_0x5d4295(0xdf)&&(await tgBot[_0x5d4295(0x132)](_0x768eec[_0x5d4295(0xec)]['id'],_0x5d4295(0x15a))[_0x5d4295(0x123)](_0x9597b4=>{telegramError(_0x9597b4);}),updateBB());_0x42c0b3=='no'&&await tgBot[_0x5d4295(0x132)](_0x768eec['chat']['id'],_0x5d4295(0x185))['catch'](_0xc6f83d=>{telegramError(_0xc6f83d);});if(!settings['telegramChatId'])tgBot[_0x5d4295(0x132)](_0x768eec[_0x5d4295(0xec)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x5d4295(0x123)](_0x3b03f7=>{telegramError(_0x3b03f7);});}),tgBot[_0x27dcc1(0x18d)](_0x27dcc1(0x197));}));}),tgBot['onText'](/\/toggle/,_0x3c69f5=>{const _0x5009d0=_0x31beaf;if(!validateTelegram(_0x3c69f5))return;tgBot[_0x5009d0(0x18d)]('callback_query');const _0x17e170=getBotsWithMode();if(_0x17e170[_0x5009d0(0x192)]==0x0)tgBot['sendMessage'](_0x3c69f5[_0x5009d0(0xec)]['id'],_0x5009d0(0x157))[_0x5009d0(0x123)](_0x93c118=>{telegramError(_0x93c118);});else{let _0x521cd8=[],_0x5198ef=[];const _0xf11c64=0x2;let _0x272210=0x0;_0x17e170[_0x5009d0(0xda)]((_0x207f3b,_0x4469c1)=>{const _0x3c8a9d=_0x5009d0;if(_0x4469c1%_0xf11c64==0x0)_0x5198ef=[];_0x5198ef[_0x3c8a9d(0xf1)]({'text':_0x3c8a9d(0xc2)+_0x207f3b[_0x3c8a9d(0xcf)]+'\x20('+_0x207f3b[_0x3c8a9d(0x11a)]+')','callback_data':_0x207f3b['botID']}),_0x4469c1%_0xf11c64==0x0&&(_0x521cd8[_0x272210]=_0x5198ef,_0x272210++);}),tgBot[_0x5009d0(0x132)](_0x3c69f5[_0x5009d0(0xec)]['id'],_0x5009d0(0x12a),{'reply_markup':{'inline_keyboard':_0x521cd8}})[_0x5009d0(0x123)](_0x111833=>{telegramError(_0x111833);}),tgBot['on']('callback_query',async _0x223fc2=>{const _0x4b823d=_0x5009d0,_0xef2675=_0x223fc2[_0x4b823d(0x106)],_0xe09847=_0x223fc2['message'];tgBot[_0x4b823d(0xdc)](_0x223fc2['id'])[_0x4b823d(0x1b2)](async()=>{const _0x233501=_0x4b823d,_0x11380a=_0x17e170['find'](_0x4165a1=>_0x4165a1[_0x233501(0xcf)]==_0xef2675),_0x3c43e4=_0x11380a['mode']=='auto'?_0x233501(0xb4):_0x233501(0x137);tgBot[_0x233501(0x132)](_0xe09847[_0x233501(0xec)]['id'],_0x233501(0xb1)+_0xef2675+_0x233501(0x8d)+_0x3c43e4+_0x233501(0xf2))[_0x233501(0x123)](_0x444d8c=>{telegramError(_0x444d8c);}),toggleBotMode(_0xef2675);}),tgBot[_0x4b823d(0x18d)](_0x4b823d(0x197));});}}),tgBot[_0x31beaf(0x160)](/\/names/,_0x50d7b3=>{const _0x490417=_0x31beaf;if(!validateTelegram(_0x50d7b3))return;let _0x478d35='';config[_0x490417(0xda)](_0x5d29ca=>{const _0x602239=_0x490417;_0x478d35+=_0x602239(0xc2)+_0x5d29ca[_0x602239(0xcf)]+':\x20'+_0x5d29ca[_0x602239(0xa7)]+'\x0a';}),tgBot[_0x490417(0x132)](_0x50d7b3['chat']['id'],_0x478d35,{'parse_mode':_0x490417(0x1c8)})[_0x490417(0x123)](_0xd7505b=>{telegramError(_0xd7505b);});}),tgBot[_0x31beaf(0x160)](/\/disable/,_0xc3dc6a=>{const _0x3c6575=_0x31beaf;if(!validateTelegram(_0xc3dc6a))return;tgBot[_0x3c6575(0x132)](_0xc3dc6a[_0x3c6575(0xec)]['id'],'Notifications\x20disabled')[_0x3c6575(0x123)](_0x29ba6d=>{telegramError(_0x29ba6d);}),updateSetting(_0x3c6575(0x194),![]);}),tgBot[_0x31beaf(0x160)](/\/help/,_0x5ae6de=>{const _0x21d7c1=_0x31beaf;if(!validateTelegram(_0x5ae6de))return;tgBot['sendMessage'](_0x5ae6de[_0x21d7c1(0xec)]['id'],_0x11e05e)['catch'](_0x2bccc8=>{telegramError(_0x2bccc8);});}),tgBot['on']('polling_error',_0x20e9e6=>{const _0x50b159=_0x31beaf;_0x20e9e6[_0x50b159(0x1b8)]()[_0x50b159(0x103)](_0x50b159(0x195))&&(logging(_0x50b159(0xff)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x50b159(0x1aa))['emit'](_0x50b159(0xa9),'Invalid\x20Telegram\x20token'));}),process['once']('SIGINT',()=>{const _0x4b29cb=_0x31beaf;if(tgBot)tgBot[_0x4b29cb(0x1b5)]();process[_0x4b29cb(0x184)](0x1);}),process[_0x31beaf(0x167)]('SIGTERM',()=>{const _0x3ec8b1=_0x31beaf;if(tgBot)tgBot[_0x3ec8b1(0x1b5)]();process[_0x3ec8b1(0x184)](0x1);});}}function disableTelegram(){const _0x448ea1=_0x253d75;tgBot&&(tgBot[_0x448ea1(0x1b5)](),tgBot=null);}function sendTelegram(_0x577de1,_0x13fc3c){const _0x508e3b=_0x253d75;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x508e3b(0xb2)||(_0x13fc3c[_0x508e3b(0x1a8)]==_0x508e3b(0x15e)||_0x13fc3c[_0x508e3b(0x1a8)]=='success')&&settings[_0x508e3b(0xcb)]==_0x508e3b(0x171)||_0x13fc3c[_0x508e3b(0x1a8)]==_0x508e3b(0x12e)&&settings[_0x508e3b(0xcb)]==_0x508e3b(0xb7)){if(tgBot&&settings[_0x508e3b(0xcc)]){if(_0x13fc3c['showname'])tgBot[_0x508e3b(0x132)](settings[_0x508e3b(0xcc)],_0x13fc3c[_0x508e3b(0xa7)]+_0x508e3b(0xf4)+_0x13fc3c['event'])[_0x508e3b(0x123)](_0x26e1bb=>{telegramError(_0x26e1bb);});else tgBot[_0x508e3b(0x132)](settings[_0x508e3b(0xcc)],_0x508e3b(0xc2)+_0x577de1+_0x508e3b(0xf4)+_0x13fc3c['event'])[_0x508e3b(0x123)](_0x21569f=>{telegramError(_0x21569f);});}}}}async function sendTelegramMsg(_0x4aa15e,_0x436ee1=_0x253d75(0x1c8)){const _0x3e8566=_0x253d75;return settings[_0x3e8566(0x194)]&&tgBot&&settings[_0x3e8566(0xcc)]?(await tgBot[_0x3e8566(0x132)](settings[_0x3e8566(0xcc)],_0x4aa15e,{'parse_mode':_0x436ee1})[_0x3e8566(0x123)](_0x2f7562=>{telegramError(_0x2f7562);}),!![]):![];}function getDeviceWithIp(_0x496aef){return devices['find'](_0x42b997=>_0x42b997['ip']===_0x496aef);}function temporaryAccess2FA(_0x4e0ba6,_0x47ec5e){const _0x5ac134=_0x253d75;let _0x179b0c=new Date(),_0xf0b675=![];if(lastIpApproval){if(_0x179b0c-lastIpApproval<0x1388)_0xf0b675=!![];}lastIpApproval=new Date();if(_0xf0b675)return;tgBot&&settings[_0x5ac134(0xcc)]&&(tgBot[_0x5ac134(0x18d)](_0x5ac134(0x197)),tgBot['sendMessage'](settings[_0x5ac134(0xcc)],_0x5ac134(0x15f)+normalizeIP(_0x47ec5e)[_0x5ac134(0x186)]+_0x5ac134(0xba),{'parse_mode':_0x5ac134(0x1c8),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x5ac134(0xfe),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x5ac134(0x130),'callback_data':_0x5ac134(0x130)}]]}})['catch'](_0x4e1a9a=>{telegramError(_0x4e1a9a);}),tgBot['on'](_0x5ac134(0x197),async _0x5bbea3=>{const _0x517d59=_0x5ac134,_0xabda9d=_0x5bbea3['data'],_0x37ed05=_0x5bbea3[_0x517d59(0x1a5)];tgBot[_0x517d59(0xdc)](_0x5bbea3['id'])[_0x517d59(0x1b2)](async()=>{const _0xc87bc2=_0x517d59;devices[_0x4e0ba6][_0xc87bc2(0xaa)]={'clientip':_0x47ec5e,'timestamp':new Date()[_0xc87bc2(0xf8)](),'expiry':_0xabda9d},_0xabda9d!=_0xc87bc2(0x130)?(await tgBot[_0xc87bc2(0x132)](_0x37ed05[_0xc87bc2(0xec)]['id'],_0xc87bc2(0x8f)+_0xabda9d+'\x20minutes',{'parse_mode':'HTML'})[_0xc87bc2(0x123)](_0x521a84=>{telegramError(_0x521a84);}),io['to'](_0x4e0ba6)[_0xc87bc2(0xee)]('status',{'access':{'allow':![],'reason':_0xc87bc2(0xea),'token':null}})):(await tgBot['sendMessage'](_0x37ed05[_0xc87bc2(0xec)]['id'],_0xc87bc2(0x134))['catch'](_0x4174bc=>{telegramError(_0x4174bc);}),io['to'](_0x4e0ba6)['emit'](_0xc87bc2(0xd8),{'access':{'allow':![],'reason':_0xc87bc2(0xbb),'token':null}}));}),tgBot[_0x517d59(0x18d)](_0x517d59(0x197));}));}function loginAccess2FA(_0x4cd0ce,_0x1d37a0){const _0x4b1e03=_0x253d75;tgBot&&settings[_0x4b1e03(0xcc)]&&(tgBot[_0x4b1e03(0x18d)](_0x4b1e03(0x197)),tgBot[_0x4b1e03(0x132)](settings[_0x4b1e03(0xcc)],_0x4b1e03(0x181)+normalizeIP(_0x1d37a0)[_0x4b1e03(0x186)]+_0x4b1e03(0xba),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4b1e03(0x182),'callback_data':loginExpiry},{'text':_0x4b1e03(0x130),'callback_data':_0x4b1e03(0x130)}]]}})['catch'](_0x322bfa=>{telegramError(_0x322bfa);}),tgBot['on'](_0x4b1e03(0x197),async _0x18f7da=>{const _0x4b3c5b=_0x4b1e03,_0x1ad922=_0x18f7da[_0x4b3c5b(0x106)],_0x27bc7a=_0x18f7da[_0x4b3c5b(0x1a5)];tgBot[_0x4b3c5b(0xdc)](_0x18f7da['id'])[_0x4b3c5b(0x1b2)](async()=>{const _0x15580e=_0x4b3c5b;devices[_0x4cd0ce][_0x15580e(0x125)]={'clientip':_0x1d37a0,'timestamp':new Date()['getTime'](),'expiry':_0x1ad922},_0x1ad922!='reject'?(await tgBot['sendMessage'](_0x27bc7a[_0x15580e(0xec)]['id'],_0x15580e(0x1c2),{'parse_mode':_0x15580e(0x1c8)})[_0x15580e(0x123)](_0x311154=>{telegramError(_0x311154);}),io['to'](_0x4cd0ce)[_0x15580e(0xee)](_0x15580e(0xd8),{'access':{'allow':![],'reason':_0x15580e(0xea),'token':null}})):(await tgBot[_0x15580e(0x132)](_0x27bc7a['chat']['id'],'Login\x20rejected')[_0x15580e(0x123)](_0x5dab3f=>{telegramError(_0x5dab3f);}),io['to'](_0x4cd0ce)[_0x15580e(0xee)](_0x15580e(0xd8),{'access':{'allow':![],'reason':_0x15580e(0xf0),'token':null}}));}),tgBot[_0x4b3c5b(0x18d)](_0x4b3c5b(0x197));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xbcc8d6=_0x253d75;return dbConfig[_0xbcc8d6(0xed)](_0xbcc8d6(0x113))[_0xbcc8d6(0x162)](_0xbcc8d6(0xcf))['filter']({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0xd93228=_0x253d75;return dbConfig[_0xd93228(0xed)](_0xd93228(0x113))[_0xd93228(0x162)](_0xd93228(0xcf))[_0xd93228(0x121)]({'status':_0xd93228(0x1d6)})['value']()||[];}function getBotsWithMode(){const _0xda1de6=_0x253d75,_0xcc62d4=dbConfig[_0xda1de6(0xed)](_0xda1de6(0x113))[_0xda1de6(0x162)](_0xda1de6(0xcf))[_0xda1de6(0x119)]()||[];return _0xcc62d4['forEach'](_0x3551db=>{const _0x4d894a=_0xda1de6,_0x35f833=configpath+_0x4d894a(0xb6)+_0x3551db[_0x4d894a(0xcf)]+_0x4d894a(0x109),_0x27f2e8=fs[_0x4d894a(0xfd)](_0x35f833);if(_0x27f2e8){const _0x519355=fs['readFileSync'](_0x35f833);try{const _0x51c673=JSON[_0x4d894a(0x13a)](_0x519355),_0x3273e5=_0x51c673?_0x51c673['bot'][0x0][_0x4d894a(0x1de)]:![];_0x3551db[_0x4d894a(0x11a)]=_0x3273e5?_0x4d894a(0x137):'manual';}catch(_0x3bb03d){_0x3551db['mode']=_0x4d894a(0xb4);}}else _0x3551db[_0x4d894a(0x11a)]=_0x4d894a(0xb4);}),_0xcc62d4;}function getSettings(){const _0x60e6e7=_0x253d75;let _0x27012a=dbSettings[_0x60e6e7(0xed)](_0x60e6e7(0x1bb))[_0x60e6e7(0x119)]();if(!_0x27012a){const _0x33440=crypto[_0x60e6e7(0xa8)]();mixpanel['alias'](_0x33440),_0x27012a={'timeshift':0x0,'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x60e6e7(0x17b),'userid':_0x33440},dbSettings[_0x60e6e7(0xed)](_0x60e6e7(0x1bb))[_0x60e6e7(0xf1)](_0x27012a)[_0x60e6e7(0x1af)]();}return _0x27012a;}function getSecure(){const _0xcc4463=_0x253d75;return dbSecure[_0xcc4463(0xed)]('secure')[_0xcc4463(0x119)]()||{};}function getBlacklist(){const _0x59b6c9=_0x253d75;return dbSecure[_0x59b6c9(0xed)](_0x59b6c9(0x154))[_0x59b6c9(0x119)]()||[];}function broadcastToBots(_0x54e922,_0x473c91){config['forEach'](_0x4bd337=>{const _0x2ef816=_0x365e;if(_0x4bd337[_0x2ef816(0xd8)]==_0x2ef816(0x176)&&_0x4bd337[_0x2ef816(0x86)]==_0x2ef816(0x98)){if(pid[_0x4bd337['botID']])pid[_0x4bd337[_0x2ef816(0xcf)]]['send']({[_0x54e922]:_0x473c91});}});}function storeSettings(_0x1f5797,_0x1165d0=![]){const _0x4ff585=_0x253d75;_0x1f5797={...settings,..._0x1f5797};if(_0x1165d0&&_0x1f5797[_0x4ff585(0x129)]!=_0x4ff585(0x12f)&&_0x1f5797[_0x4ff585(0x129)]!=''){const _0x1d6d73=crypt[_0x4ff585(0x93)](secure[_0x4ff585(0xb8)],_0x1f5797[_0x4ff585(0x129)])[_0x4ff585(0x1a5)][_0x4ff585(0x155)]('@')[0x0],_0x287961=bcrypt[_0x4ff585(0xe4)](_0x1d6d73,saltRounds);_0x1f5797={..._0x1f5797,'bbPassword':_0x287961};}if(_0x1165d0&&_0x1f5797[_0x4ff585(0xc4)]!=_0x4ff585(0x12f)&&_0x1f5797[_0x4ff585(0xc4)]!=''){const _0xdf80d0=crypt[_0x4ff585(0x93)](secure[_0x4ff585(0xb8)],_0x1f5797['telegramToken'])[_0x4ff585(0x1a5)][_0x4ff585(0x155)]('@')[0x0];_0x1f5797={..._0x1f5797,'telegramToken':_0xdf80d0};}const _0x39c795=_0x1f5797[_0x4ff585(0xc4)]!=_0x4ff585(0x12f)&&_0x1f5797[_0x4ff585(0xc4)]!=settings[_0x4ff585(0xc4)]||_0x1f5797[_0x4ff585(0x101)]!=settings[_0x4ff585(0x101)],_0x4f8a00=_0x1f5797['telegramToken']==''||_0x1f5797[_0x4ff585(0x101)]=='';if(_0x39c795)_0x1f5797[_0x4ff585(0xcb)]=_0x4ff585(0xb2);for(const [_0x338d83,_0x4d12b7]of Object['entries'](_0x1f5797)){if(_0x338d83=='telegramToken'&&_0x4d12b7==_0x4ff585(0x12f)){_0x1f5797[_0x4ff585(0xc4)]=settings[_0x4ff585(0xc4)];continue;};if(_0x338d83==_0x4ff585(0x129)&&_0x4d12b7==_0x4ff585(0x12f)){_0x1f5797['bbPassword']=settings[_0x4ff585(0x129)];continue;};dbSettings['set']('settings.'+_0x338d83,_0x4d12b7)[_0x4ff585(0x1af)]();}settings=_0x1f5797,io['to']('botmanager')[_0x4ff585(0xee)]('settings',cleanSettings()),broadcastToBots(_0x4ff585(0x183),settings[_0x4ff585(0x183)]);if(_0x39c795&&!_0x4f8a00)initTelegram();if(_0x39c795&&_0x4f8a00)disableTelegram();getAllClients()[_0x4ff585(0xda)](_0x5cddf6=>{const _0x2a11c1=_0x4ff585;getSocket(_0x5cddf6['id'])[_0x2a11c1(0xee)](_0x2a11c1(0xd8),{'access':{'allow':![],'reason':_0x2a11c1(0xea),'token':null}});});}function updateSetting(_0x1d5e9a,_0x316984){const _0x2400ac=_0x253d75;dbSettings['set'](_0x2400ac(0x95)+_0x1d5e9a,_0x316984)[_0x2400ac(0x1af)](),settings=getSettings(),io['to']('botmanager')[_0x2400ac(0xee)](_0x2400ac(0x1bb),cleanSettings());}function storeSecure(_0x2601f6){const _0x2abd7f=_0x253d75;dbSecure[_0x2abd7f(0xed)](_0x2abd7f(0x1ae))[_0x2abd7f(0xf1)](_0x2601f6)[_0x2abd7f(0x1af)](),secure=_0x2601f6;}function addBlacklist(_0x3d7061){const _0x494999=_0x253d75;cleanBlacklist();let _0x33731b;devices[_0x3d7061]['telegramIpApproval']?_0x33731b=Math[_0x494999(0x147)](devices[_0x3d7061][_0x494999(0xaa)]['expiry'],loginExpiry):_0x33731b=loginExpiry,dbSecure['get'](_0x494999(0x154))['push']({'expiry':new Date()[_0x494999(0xf8)]()+_0x33731b*0x3c*0x3e8,'token':devices[_0x3d7061][_0x494999(0x1d0)][_0x494999(0x156)]})[_0x494999(0x1af)](),blacklist=dbSecure[_0x494999(0xed)](_0x494999(0x154))[_0x494999(0x119)]();}function cleanBlacklist(){const _0xc3b543=_0x253d75;let _0x362484=dbSecure[_0xc3b543(0xed)](_0xc3b543(0x154))['cloneDeep']()[_0xc3b543(0x119)](),_0x3cdacc=new Date()[_0xc3b543(0xf8)]();_0x362484[_0xc3b543(0xda)](_0x4df0ce=>{const _0x4900fe=_0xc3b543;_0x4df0ce[_0x4900fe(0x124)]<_0x3cdacc&&dbSecure['get'](_0x4900fe(0x154))[_0x4900fe(0x8b)]({'expiry':_0x4df0ce[_0x4900fe(0x124)]})[_0x4900fe(0x1af)]();});}function initStates(){const _0x388a11=_0x253d75;let _0xdca1ac=getConfiguration();_0xdca1ac[_0x388a11(0xda)](_0xc21f95=>{const _0x4d954b=_0x388a11;_0xc21f95[_0x4d954b(0x86)]=_0x4d954b(0x14f);}),storeConfiguration(_0xdca1ac);}function onKeys(){const _0x441816=new RSA();return new Promise(_0x10aca1=>{const _0xbe68db=_0x365e;_0x441816[_0xbe68db(0x19a)]()['then'](_0x56206e=>{_0x10aca1(_0x56206e);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x43a45a=_0x253d75;let _0xdbd3a6=getSettings(),_0x3b4687=![];!_0xdbd3a6[_0x43a45a(0x10f)](_0x43a45a(0x1c0))&&(_0xdbd3a6['lastmsgtelegram']=0x0,_0x3b4687=!![]);!_0xdbd3a6['hasOwnProperty']('lastmsgemitted')&&(_0xdbd3a6[_0x43a45a(0x111)]=0x0,_0x3b4687=!![]);!_0xdbd3a6['hasOwnProperty'](_0x43a45a(0x1da))&&(_0xdbd3a6[_0x43a45a(0x1da)]=_0x43a45a(0x17b),_0x3b4687=!![]);!_0xdbd3a6[_0x43a45a(0x10f)](_0x43a45a(0x1c4))&&(_0xdbd3a6['userid']=uuidRandom(),mixpanel[_0x43a45a(0x91)](_0xdbd3a6[_0x43a45a(0x1c4)]),_0x3b4687=!![]);if(_0x3b4687)storeSettings(_0xdbd3a6);}function storeConfiguration(_0x27a7d7){const _0x167791=_0x253d75;dbConfig[_0x167791(0xed)](_0x167791(0x113))[_0x167791(0x8b)]()[_0x167791(0x1af)](),_0x27a7d7['forEach'](_0x485871=>{const _0x4fa4da=_0x167791;delete _0x485871[_0x4fa4da(0x11a)];}),dbConfig[_0x167791(0xed)](_0x167791(0x113))[_0x167791(0xf1)](..._0x27a7d7)[_0x167791(0x1af)](),config=_0x27a7d7;}function resetPassword(){const _0x580d41=_0x253d75;tgBot&&settings[_0x580d41(0xcc)]&&(tgBot[_0x580d41(0x18d)]('callback_query'),tgBot[_0x580d41(0x132)](settings['telegramChatId'],_0x580d41(0x9f),{'parse_mode':_0x580d41(0x1c8),'reply_markup':{'inline_keyboard':[[{'text':_0x580d41(0xdf),'callback_data':_0x580d41(0xdf)},{'text':'no','callback_data':'no'}]]}})[_0x580d41(0x123)](_0x56fe1c=>{telegramError(_0x56fe1c);}),tgBot['on']('callback_query',async _0x3d2f47=>{const _0x2a4225=_0x580d41,_0x437dc7=_0x3d2f47[_0x2a4225(0x106)],_0x3c18c1=_0x3d2f47[_0x2a4225(0x1a5)];tgBot[_0x2a4225(0xdc)](_0x3d2f47['id'])[_0x2a4225(0x1b2)](async()=>{const _0x279f35=_0x2a4225;if(_0x437dc7!='no'){const _0xf1ef56=0xf,_0x49168b=_0x279f35(0xbe),_0x5938bb=Array[_0x279f35(0x1b7)](crypto[_0x279f35(0x1cb)](new Uint32Array(_0xf1ef56)))[_0x279f35(0x193)](_0x80996e=>_0x49168b[_0x80996e%_0x49168b[_0x279f35(0x192)]])[_0x279f35(0x190)](''),_0x4d52ad=bcrypt[_0x279f35(0xe4)](_0x5938bb,saltRounds);storeSettings({'bbPassword':_0x4d52ad}),await tgBot[_0x279f35(0x132)](_0x3c18c1[_0x279f35(0xec)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x5938bb,{'parse_mode':_0x279f35(0x1c8)})[_0x279f35(0x123)](_0x278e11=>{telegramError(_0x278e11);});}else await tgBot[_0x279f35(0x132)](_0x3c18c1[_0x279f35(0xec)]['id'],'Password\x20reset\x20rejected')['catch'](_0x2fe06c=>{telegramError(_0x2fe06c);});}),tgBot['removeListener'](_0x2a4225(0x197));}));}function logging(_0xfa9d24){const _0x1c87f3=_0x253d75;console['log'](getTimeStamp()+_0x1c87f3(0x13b)+_0xfa9d24);if(tgBot&&settings[_0x1c87f3(0xcc)]&&settings[_0x1c87f3(0xcb)]!=_0x1c87f3(0xb7))tgBot['sendMessage'](settings[_0x1c87f3(0xcc)],_0x1c87f3(0x110)+_0xfa9d24)['catch'](_0x283e1f=>{telegramError(_0x283e1f);});}function getServerTime(){const _0x37b394=_0x253d75,_0x54f2a9=new Date();return _0x54f2a9[_0x37b394(0x19e)]()+'/'+(_0x54f2a9[_0x37b394(0x14d)]()+0x1)[_0x37b394(0x1b8)]()[_0x37b394(0x1c1)](0x2,'0')+'/'+_0x54f2a9[_0x37b394(0x1d7)]()[_0x37b394(0x1b8)]()['padStart'](0x2,'0')+'\x20'+_0x54f2a9[_0x37b394(0x1dc)]()[_0x37b394(0x1b8)]()['padStart'](0x2,'0')+':'+_0x54f2a9[_0x37b394(0x9d)]()[_0x37b394(0x1b8)]()[_0x37b394(0x1c1)](0x2,'0')+':'+_0x54f2a9[_0x37b394(0x1c5)]()[_0x37b394(0x1b8)]()[_0x37b394(0x1c1)](0x2,'0');}function getTimeStamp(){const _0x54091c=_0x253d75,_0x1ed177=shiftedTime();return _0x1ed177['getFullYear']()+'/'+(_0x1ed177[_0x54091c(0x14d)]()+0x1)[_0x54091c(0x1b8)]()[_0x54091c(0x1c1)](0x2,'0')+'/'+_0x1ed177[_0x54091c(0x1d7)]()[_0x54091c(0x1b8)]()[_0x54091c(0x1c1)](0x2,'0')+'\x20'+_0x1ed177['getHours']()[_0x54091c(0x1b8)]()['padStart'](0x2,'0')+':'+_0x1ed177[_0x54091c(0x9d)]()[_0x54091c(0x1b8)]()[_0x54091c(0x1c1)](0x2,'0')+':'+_0x1ed177[_0x54091c(0x1c5)]()[_0x54091c(0x1b8)]()[_0x54091c(0x1c1)](0x2,'0');}function shiftedTime(){const _0x17592c=_0x253d75,_0x41e25d=new Date();let _0x39f009=_0x41e25d;if(settings['timeshift']&&settings[_0x17592c(0x183)]!==0x0)_0x39f009=fns[_0x17592c(0x139)](_0x41e25d,{'hours':settings[_0x17592c(0x183)]});return _0x39f009;}function startScheduler(){let _0x4a330c=new Date()['getUTCHours']();_0x4a330c==0x1&&backupConfigFiles();_0x4a330c==0x9&&triggerAnalytics();_0x4a330c%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4504a7=_0x253d75;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x4504a7(0xda)](_0x25f3a0=>{const _0x28e5d0=_0x4504a7;if(!_0x25f3a0[_0x28e5d0(0x17f)]())fs[_0x28e5d0(0xc1)](configpath+_0x25f3a0['name'],configbackuppath+_0x25f3a0[_0x28e5d0(0x1a7)]);});}async function getPublicIp(){const _0x459765=_0x253d75;try{const _0x418533=await axios[_0x459765(0xed)](_0x459765(0x165));publicip=_0x418533['data']['ip'];}catch(_0x158329){}}async function triggerAnalytics(_0x399ac8=![]){const _0x2d6ca8=_0x253d75;if(!publicip)await getPublicIp();const _0xdbac49=getBotsWithMode();let _0x212bb9=0x0;_0xdbac49['forEach'](_0x35f00c=>{const _0x3caa45=_0x365e;if(_0x35f00c[_0x3caa45(0xd8)]===_0x3caa45(0x176))_0x212bb9++;}),mixpanel[_0x2d6ca8(0x12d)](_0x2d6ca8(0x15c),{'distinct_id':settings[_0x2d6ca8(0x1c4)],'ip':publicip,'version':serverversion,'numbots':_0xdbac49['length'],'numbotsenabled':_0x212bb9}),!_0x399ac8&&analytics['page']({'title':_0x2d6ca8(0x159),'href':_0x2d6ca8(0x1dd),'path':'/v'+serverversion});}async function getMessages(){const _0x1527b5=_0x253d75,_0x369101=_0x1527b5(0x92),_0x535255=new GraphQLClient(_0x369101),_0x5b3e54={'authorization':_0x1527b5(0x1a4)},_0x35e9d2=serverversion[_0x1527b5(0x155)]('.'),_0x2d7707=_0x35e9d2[0x0]+'.'+_0x35e9d2[0x1],_0x54ed9f=Math[_0x1527b5(0x104)](settings[_0x1527b5(0x1c0)],settings[_0x1527b5(0x111)]),_0x13290e={'last':parseInt(_0x54ed9f),'bbm':_0x2d7707},_0xbe467d=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x263d68;try{_0x263d68=await _0x535255['request'](_0xbe467d,_0x13290e,_0x5b3e54);}catch(_0x4f76d9){}if(_0x263d68&&_0x263d68[_0x1527b5(0x174)]){let _0x4c38d3=settings[_0x1527b5(0x1c0)];for(const _0x445bde of _0x263d68[_0x1527b5(0x174)]){newMessages[_0x1527b5(0xf1)](_0x445bde);if(_0x445bde['bbvNew'])updateSetting(_0x1527b5(0x1da),_0x445bde['bbvNew']);let _0xa12550=_0x445bde[_0x1527b5(0x19c)]?serverversion>=_0x445bde[_0x1527b5(0x19c)]:![];if(!_0xa12550&&_0x445bde[_0x1527b5(0x1e1)]>_0x4c38d3){if(_0x445bde['bbvReceive']===_0x1527b5(0x16b)||serverversion[_0x1527b5(0x135)](_0x445bde['bbvReceive'])){let _0x184573=''+_0x445bde[_0x1527b5(0xc9)]+'\x0a\x0a'+_0x445bde['message'];const _0x23ec25=await sendTelegramMsg(toTelegramMarkdown(_0x184573),_0x1527b5(0x114));if(_0x23ec25)_0x4c38d3=_0x445bde[_0x1527b5(0x1e1)];}}}updateAvailable=isNewerVersion(settings[_0x1527b5(0x1da)],serverversion),updateSetting(_0x1527b5(0x1c0),_0x4c38d3),emitMessages();}}function emitMessages(){const _0x54ad04=_0x253d75,_0x5ebe3c=settings[_0x54ad04(0x111)];let _0x31d85c=[];newMessages[_0x54ad04(0xda)](_0x1c73a7=>{_0x1c73a7['number']>_0x5ebe3c&&_0x31d85c['push'](_0x1c73a7);}),_0x31d85c[_0x54ad04(0x192)]>0x0&&getAllClients()['forEach'](_0x42825e=>{const _0x39182f=_0x54ad04;getSocket(_0x42825e['id'])[_0x39182f(0xee)](_0x39182f(0x1a5),_0x31d85c);});}function confirmMessage(_0x5a14d6){const _0x20a3f3=_0x253d75;updateSetting(_0x20a3f3(0x111),Number(_0x5a14d6));}function isNewerVersion(_0x257557,_0x50d210){const _0x1fad85=_0x253d75,_0x324520=_0x50d210[_0x1fad85(0x155)]('.'),_0x4342db=_0x257557[_0x1fad85(0x155)]('.');for(var _0xdca6c9=0x0;_0xdca6c9<_0x4342db[_0x1fad85(0x192)];_0xdca6c9++){const _0xba1f92=~~_0x4342db[_0xdca6c9],_0x26865a=~~_0x324520[_0xdca6c9];if(_0xba1f92>_0x26865a)return!![];if(_0xba1f92<_0x26865a)return![];}return![];}function toTelegramMarkdown(_0x8e8ed0){const _0x140acd=_0x253d75,_0x29a2f4=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1539bd=/\*{2}(.+?)\*{2}/gim;return _0x8e8ed0=_0x8e8ed0[_0x140acd(0x18f)](_0x29a2f4,_0x140acd(0x199))[_0x140acd(0x18f)](_0x1539bd,_0x140acd(0x10c)),_0x8e8ed0;}function validateCredentials(_0x3a24b9,_0x392b36){const _0x4b164c=_0x253d75;if(_0x3a24b9[_0x4b164c(0x191)]==settings[_0x4b164c(0x1ca)]&&bcrypt[_0x4b164c(0x168)](_0x3a24b9['password'],settings[_0x4b164c(0x129)])){if(settings[_0x4b164c(0x99)])return{'allow':![],'reason':_0x4b164c(0x116),'token':null};else{const _0x2ec2af=generateLoginToken(_0x392b36);return{'allow':!![],'reason':_0x4b164c(0x11c),'token':_0x2ec2af};}}else return{'allow':![],'reason':_0x4b164c(0xb0),'token':null};}function refreshToken(_0x281507){const _0x16a7ab=_0x253d75,_0x24da01=generateLoginToken(_0x281507);return{'allow':!![],'reason':_0x16a7ab(0x11c),'token':_0x24da01};}function validateAccess(_0x5767c1,_0x111d23){const _0x5a4f4f=_0x253d75;let _0x1c52c2=devices[_0x111d23]['ip'],_0x3d5660;const _0x6ada63=_0x3b703c=>{const _0x41be61=_0x365e;if(settings[_0x41be61(0x1e0)]){if(settings[_0x41be61(0x99)]){if(telegram2FaApproved(_0x111d23)){const _0x3a5010=generateLoginToken(_0x111d23);return{'allow':!![],'reason':_0x41be61(0xd7),'token':_0x3a5010};}else return{'allow':![],'reason':_0x41be61(0xa4),'token':null};}else return _0x3d5660=validToken(_0x3b703c,_0x111d23),_0x3d5660[_0x41be61(0x10f)](_0x41be61(0xad))?{'allow':!![],'reason':_0x41be61(0x1b9),'token':_0x3b703c}:{'allow':![],'reason':_0x41be61(0xa4),'token':null};}else return{'allow':!![],'reason':_0x41be61(0x145),'token':null};};if(settings['whitelistEnabled']){let _0x2eae01=[...settings[_0x5a4f4f(0xb3)],_0x5a4f4f(0x144),_0x5a4f4f(0x1d5),_0x5a4f4f(0x14c)];if(_0x2eae01[_0x5a4f4f(0x103)](_0x1c52c2))return _0x6ada63(_0x5767c1);else{_0x3d5660=validToken(_0x5767c1,_0x111d23);if(_0x3d5660['hasOwnProperty']('success'))return _0x6ada63(_0x5767c1);else{if(telegramIpApproved(_0x111d23)){const _0x14ecef=generateToken(_0x111d23);return _0x3d5660=_0x6ada63(_0x5767c1),_0x3d5660['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x14ecef}:_0x3d5660;}else return settings[_0x5a4f4f(0x18b)]?{'allow':![],'reason':_0x5a4f4f(0x1b3),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x6ada63(_0x5767c1);}function timelyDecrypt(_0xc5a5cc,_0x323444=!![]){const _0x4e5186=_0x253d75;if(_0xc5a5cc)try{const _0x711cd5=crypt[_0x4e5186(0x93)](secure[_0x4e5186(0xb8)],_0xc5a5cc)[_0x4e5186(0x1a5)],_0x2d45ba=_0x711cd5[_0x4e5186(0x155)]('@')[0x0],_0xf8410c=_0x711cd5[_0x4e5186(0x155)]('@')[0x1],_0x53d1e0=new Date()[_0x4e5186(0xf8)]();if(_0x323444){if(_0x53d1e0-_0xf8410c<maxSecretAge*0x3e8)return _0x2d45ba;else return![];}else return _0x2d45ba;}catch(_0x1b9b15){return![];}else return![];}const validToken=(_0x5eb11a,_0x37b4ac)=>{const _0x1beece=_0x253d75,_0x2c1a5b=devices[_0x37b4ac]['ip'];if(!_0x5eb11a)return{'error':'No\x20authentication\x20token'};for(let _0x384abb of blacklist){if(_0x384abb['token']==_0x5eb11a)return{'error':_0x1beece(0xdb)};}let _0x48509e;try{_0x48509e=jwt['verify'](_0x5eb11a,secure['secret']+_0x37b4ac);}catch{return{'error':_0x1beece(0xa6)};}if(!_0x48509e[_0x1beece(0x10f)](_0x1beece(0x1e2))&&!_0x48509e[_0x1beece(0x10f)](_0x1beece(0x191))||!_0x48509e[_0x1beece(0x10f)](_0x1beece(0x1e8)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x48509e[_0x1beece(0x10f)](_0x1beece(0x191))&&_0x48509e[_0x1beece(0x10f)](_0x1beece(0x1e2))){const {clientip:_0x33cc2e}=_0x48509e;return _0x2c1a5b==_0x33cc2e?{'success':_0x1beece(0x178)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x48509e['hasOwnProperty'](_0x1beece(0x191))&&_0x48509e[_0x1beece(0x10f)]('clientip')){const {username:_0x49cbde,clientip:_0x5c102d}=_0x48509e;return settings['bbUsername']==_0x49cbde&&_0x2c1a5b==_0x5c102d?{'success':_0x1beece(0x178)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x114adb=>{const _0x5b6028=_0x253d75;if(_0x114adb){const _0x3c7e52=devices[_0x114adb]['ip'];return jwt['sign']({'username':settings[_0x5b6028(0x1ca)],'clientip':_0x3c7e52},secure[_0x5b6028(0x88)]+_0x114adb,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1f4ad7=>{const _0x21084f=_0x253d75;if(_0x1f4ad7){const _0x527802=devices[_0x1f4ad7]['ip'];return jwt[_0x21084f(0x10d)]({'clientip':_0x527802},secure[_0x21084f(0x88)]+_0x1f4ad7,{'expiresIn':devices[_0x1f4ad7][_0x21084f(0xaa)][_0x21084f(0x124)]*0x3c});}else return![];},telegramIpApproved=_0x1ca46b=>{const _0x47a091=_0x253d75;let _0x4e226f=![];return devices[_0x1ca46b][_0x47a091(0xaa)]&&devices[_0x1ca46b][_0x47a091(0xaa)][_0x47a091(0x124)]!=_0x47a091(0x130)&&(_0x4e226f=devices[_0x1ca46b][_0x47a091(0xaa)]['clientip']==devices[_0x1ca46b]['ip']&&new Date()[_0x47a091(0xf8)]()-devices[_0x1ca46b][_0x47a091(0xaa)][_0x47a091(0xef)]<devices[_0x1ca46b][_0x47a091(0xaa)]['expiry']*0x3c*0x3e8),_0x4e226f;},telegram2FaApproved=_0x31122c=>{const _0x29274a=_0x253d75;let _0x594088=![];return devices[_0x31122c][_0x29274a(0x125)]&&devices[_0x31122c][_0x29274a(0x125)][_0x29274a(0x124)]!=_0x29274a(0x130)&&(_0x594088=devices[_0x31122c][_0x29274a(0x125)][_0x29274a(0x1e2)]==devices[_0x31122c]['ip']&&new Date()['getTime']()-devices[_0x31122c][_0x29274a(0x125)][_0x29274a(0xef)]<devices[_0x31122c][_0x29274a(0x125)][_0x29274a(0x124)]*0x3c*0x3e8),_0x594088;},normalizeIP=_0x2fa8d6=>{const _0x126bd8=_0x253d75;let _0x66a25c=null,_0x34d9dd=null;if(ipaddr[_0x126bd8(0xa0)](_0x2fa8d6)){const _0x1ff90e=ipaddr[_0x126bd8(0x13a)](_0x2fa8d6);_0x1ff90e['kind']()==='ipv6'?(_0x1ff90e['isIPv4MappedAddress']()&&(_0x66a25c=_0x1ff90e[_0x126bd8(0x1e5)]()['toString']()),_0x34d9dd=_0x1ff90e[_0x126bd8(0x1b8)]()):(_0x66a25c=_0x1ff90e[_0x126bd8(0x1b8)](),_0x34d9dd=_0x1ff90e['toIPv4MappedAddress']()[_0x126bd8(0x1b8)]());}return{'show':_0x66a25c?_0x66a25c:_0x34d9dd,'store':_0x34d9dd};};function sleep(_0x12e32a){return new Promise(_0x5cffa2=>setTimeout(_0x5cffa2,_0x12e32a));}