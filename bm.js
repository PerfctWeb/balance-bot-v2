const _0xe6c9d6=_0x4850;(function(_0x27cffe,_0x98811c){const _0xfcc25e=_0x4850,_0x32bca3=_0x27cffe();while(!![]){try{const _0x5606ca=parseInt(_0xfcc25e(0x213))/0x1*(-parseInt(_0xfcc25e(0xb6))/0x2)+parseInt(_0xfcc25e(0x1d8))/0x3+-parseInt(_0xfcc25e(0x12f))/0x4+parseInt(_0xfcc25e(0x154))/0x5+-parseInt(_0xfcc25e(0x220))/0x6*(-parseInt(_0xfcc25e(0x1bf))/0x7)+-parseInt(_0xfcc25e(0x196))/0x8*(parseInt(_0xfcc25e(0x108))/0x9)+parseInt(_0xfcc25e(0x112))/0xa;if(_0x5606ca===_0x98811c)break;else _0x32bca3['push'](_0x32bca3['shift']());}catch(_0x4295bc){_0x32bca3['push'](_0x32bca3['shift']());}}}(_0x39ed,0xc8490));const _0x45378b=function(){let _0x46b463=!![];return function(_0x50a5e1,_0x804b88){const _0xe80e57=_0x46b463?function(){if(_0x804b88){const _0x4e8af9=_0x804b88['apply'](_0x50a5e1,arguments);return _0x804b88=null,_0x4e8af9;}}:function(){};return _0x46b463=![],_0xe80e57;};}(),_0x1e6331=_0x45378b(this,function(){const _0x1dd503=_0x4850;return _0x1e6331[_0x1dd503(0x15c)]()['search'](_0x1dd503(0x244))[_0x1dd503(0x15c)]()[_0x1dd503(0x1cf)](_0x1e6331)[_0x1dd503(0xee)]('(((.+)+)+)+$');});_0x1e6331();'use strict';process['env'][_0xe6c9d6(0x23d)]=0x1;const childProcess=require(_0xe6c9d6(0xc5)),fs=require('fs'),fns=require(_0xe6c9d6(0xb5)),low=require(_0xe6c9d6(0x17a)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0xe6c9d6(0x1af)),crypto=require(_0xe6c9d6(0xad)),Crypt=require(_0xe6c9d6(0x1fc))[_0xe6c9d6(0x184)],RSA=require(_0xe6c9d6(0x1fc))['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0xe6c9d6(0x180)),ipaddr=require(_0xe6c9d6(0x118)),argv=require(_0xe6c9d6(0x20f))(process['argv'][_0xe6c9d6(0x17c)](0x2))[_0xe6c9d6(0xf9)],uuidRandom=require(_0xe6c9d6(0xd5)),TelegramBot=require(_0xe6c9d6(0x203)),Mixpanel=require(_0xe6c9d6(0x14a)),axios=require(_0xe6c9d6(0xdf)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0xe6c9d6(0x1b8)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0xe6c9d6(0xb3)]||_0xe6c9d6(0x1d0),pattern=/^[0-9]{2,4}$/;!pattern[_0xe6c9d6(0x19e)](PORT)&&(console[_0xe6c9d6(0xdd)](_0xe6c9d6(0x205)+PORT+_0xe6c9d6(0x1f5)),process[_0xe6c9d6(0x228)](0x1));const HOST=argv[_0xe6c9d6(0x177)]||null,userID=argv[_0xe6c9d6(0x1a2)]||'',debugging=argv['d']||![],nodeversion=process[_0xe6c9d6(0x222)][_0xe6c9d6(0x1f6)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile='bb-config.json',settingsfile='bb-settings.json',securefile='bb-secure.json',maxBackups=0xa;let validInstallation=!![];!fs[_0xe6c9d6(0x245)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xe6c9d6(0xe3)),configpath=userID?bbpath+_0xe6c9d6(0xd9)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0xe6c9d6(0x216),logspath=userID?bbpath+_0xe6c9d6(0x1bd)+userID+'/':bbpath+_0xe6c9d6(0x1bd),zippath=userID?bbpath+_0xe6c9d6(0x1c2)+userID+'/':bbpath+_0xe6c9d6(0x1c2),loggerfile=fs[_0xe6c9d6(0x1f3)](logspath+_0xe6c9d6(0xa8),{'flags':'a'}),temppath=userID?bbpath+_0xe6c9d6(0xc2)+userID+'/':bbpath+_0xe6c9d6(0xc2);!fs['existsSync'](configpath)&&fs[_0xe6c9d6(0x161)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0xe6c9d6(0x161)](configbackuppath);!fs[_0xe6c9d6(0x245)](logspath)&&fs[_0xe6c9d6(0x161)](logspath);!fs[_0xe6c9d6(0x245)](zippath)&&fs[_0xe6c9d6(0x161)](zippath);!fs[_0xe6c9d6(0x245)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xe6c9d6(0x1c0)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0xe6c9d6(0x13f),'onepagemode':![]}})[_0xe6c9d6(0x210)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0xe6c9d6(0x210)]();let crypt=new Crypt({'md':_0xe6c9d6(0x1cc),'rsaStandard':_0xe6c9d6(0x19d)});const saltRounds=0xa,mixpanel=Mixpanel[_0xe6c9d6(0x11b)](_0xe6c9d6(0x17d),{'host':_0xe6c9d6(0xab)});function _0x4850(_0x2b61e3,_0x937afc){const _0x4a56ff=_0x39ed();return _0x4850=function(_0x1e6331,_0x45378b){_0x1e6331=_0x1e6331-0x9c;let _0x39ed3b=_0x4a56ff[_0x1e6331];return _0x39ed3b;},_0x4850(_0x2b61e3,_0x937afc);}let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0xe6c9d6(0x1c9)]&&settings['telegramToken']!=''&&settings[_0xe6c9d6(0x16f)]&&settings[_0xe6c9d6(0x16f)]!='')initTelegram();const parseColor=(_0x364a75,_0x3291a8)=>{const _0x3573ea=_0xe6c9d6,_0x2cf3c6=/#[A-Z]{3}#/g;!_0x3291a8?_0x364a75=_0x364a75[_0x3573ea(0x105)](_0x2cf3c6,''):(_0x364a75=_0x364a75[_0x3573ea(0x105)](/#BLU#/g,_0x3573ea(0x249)),_0x364a75=_0x364a75['replace'](/#RED#/g,_0x3573ea(0x259)),_0x364a75=_0x364a75[_0x3573ea(0x105)](/#YEL#/g,'\x1b[33m'),_0x364a75=_0x364a75[_0x3573ea(0x105)](/#RES#/g,'\x1b[0m'));;return _0x364a75;},logger={'screen':_0x68af2b=>{const _0x173210=_0xe6c9d6;console[_0x173210(0xdd)](parseColor(_0x68af2b,!![]));},'simple':_0x9744d7=>{const _0xd4109e=_0xe6c9d6;console['log'](parseColor(_0x9744d7,!![])),loggerfile['write'](util[_0xd4109e(0x20e)](parseColor(_0x9744d7,![]))+'\x0a');},'full':async _0x44e8c6=>{const _0x23be96=_0xe6c9d6,_0x220b06=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x44e8c6;console['log'](parseColor(_0x220b06,!![])),loggerfile[_0x23be96(0x210)](util[_0x23be96(0x20e)](parseColor(_0x220b06,![]))+'\x0a');if(tgBot&&settings[_0x23be96(0x1cb)]&&settings[_0x23be96(0xbd)]!=_0x23be96(0xd4))await tgBot[_0x23be96(0x1c6)](settings[_0x23be96(0x1cb)],_0x23be96(0xa6)+parseColor(_0x44e8c6,![]))['catch'](_0x493c11=>{telegramError(_0x493c11);});},'debug':async(_0x354239,_0x2298ee='')=>{const _0x456c62=_0xe6c9d6,_0x13b6c1=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x354239;if(debugging)console[_0x456c62(0xdd)](parseColor(_0x13b6c1,!![]));loggerfile[_0x456c62(0x210)](util[_0x456c62(0x20e)](parseColor(_0x13b6c1,![]))+'\x0a');if(_0x2298ee){if(debugging)console[_0x456c62(0xdd)](_0x2298ee);loggerfile['write'](util[_0x456c62(0x20e)](_0x2298ee)+'\x0a');}}};process['on']('uncaughtException',function(_0x3a8600){const _0x132571=_0xe6c9d6;logger[_0x132571(0x25d)](_0x3a8600);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xe6c9d6(0x1e5)),app=express(),http=require(_0xe6c9d6(0xcc))[_0xe6c9d6(0x1f2)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0xe6c9d6(0x10d)](_0xe6c9d6(0x197),async(_0x5359bb,_0x211d2e)=>{const _0x3907e0=_0xe6c9d6,_0xf3f241=_0x5359bb[_0x3907e0(0x1de)][_0x3907e0(0x145)],_0x2ce2c9=getClientsWithBotID('botmanager'),_0x1063ff=_0x5359bb[_0x3907e0(0x247)]['uuid'],_0x797902=timelyDecrypt(_0x1063ff,![]),_0x33dafe=_0x2ce2c9['find'](_0x33307f=>_0x33307f[_0x3907e0(0xef)]==_0x797902);if(_0x33dafe){const _0x3dbeda=normalizeIP(_0x5359bb[_0x3907e0(0x1a6)][_0x3907e0(0xf6)])[_0x3907e0(0x131)],_0x1fdd74=_0x5359bb[_0x3907e0(0x247)][_0x3907e0(0x255)];if(validateAccess(_0x1fdd74,_0x797902,_0x3dbeda)['allow'])_0xf3f241==_0x3907e0(0x212)&&await backupConfigFiles(),await zipFiles(_0xf3f241),_0x211d2e[_0x3907e0(0x1d2)](zippath+(_0xf3f241+'.zip'),_0x5027c6=>{const _0x3803f4=_0x3907e0;_0x5027c6&&(logger[_0x3803f4(0x137)]('Failed\x20to\x20download\x20'+_0xf3f241),logger['simple'](_0x5027c6));});else logger[_0x3907e0(0x137)](_0x3907e0(0x263)+_0xf3f241+'\x20(1)');}else logger['full'](_0x3907e0(0x263)+_0xf3f241+_0x3907e0(0x25f));}),app[_0xe6c9d6(0x1d1)](_0xe6c9d6(0x13a),async(_0x3998ce,_0x3bc338)=>{const _0x2f1cdd=_0xe6c9d6,_0xde09a3=getClientsWithBotID('botmanager'),_0x3cc682=_0x3998ce[_0x2f1cdd(0x247)]['uuid'],_0x21f1ce=timelyDecrypt(_0x3cc682,![]),_0x2e1989=_0xde09a3[_0x2f1cdd(0x1ac)](_0x129fdc=>_0x129fdc[_0x2f1cdd(0xef)]==_0x21f1ce);logger[_0x2f1cdd(0x109)](_0x2f1cdd(0xd8));if(_0x2e1989){const _0x3882a7=normalizeIP(_0x3998ce[_0x2f1cdd(0x1a6)][_0x2f1cdd(0xf6)])['store'],_0x4eb1fe=_0x3998ce['headers'][_0x2f1cdd(0x255)];if(validateAccess(_0x4eb1fe,_0x21f1ce,_0x3882a7)[_0x2f1cdd(0x1e9)]){if(_0x3998ce[_0x2f1cdd(0x25e)]){const _0x1b365e=_0x3998ce[_0x2f1cdd(0x25e)][_0x2f1cdd(0x1c8)];await _0x1b365e['mv'](temppath+_0x1b365e[_0x2f1cdd(0x242)]),_0x3bc338[_0x2f1cdd(0x13c)]({'status':!![],'message':_0x2f1cdd(0x1a7)});const _0x1a4cc6=getBotsWithMode();_0x1a4cc6[_0x2f1cdd(0xfb)]>0x0?confirmRestore(temppath,_0x1b365e[_0x2f1cdd(0x242)]):unzipFile(temppath,_0x1b365e[_0x2f1cdd(0x242)]);}}else logger['full'](_0x2f1cdd(0x19b));}else logger[_0x2f1cdd(0x137)](_0x2f1cdd(0x248));}),app[_0xe6c9d6(0xf0)](express[_0xe6c9d6(0xf3)](path[_0xe6c9d6(0x185)](__dirname,bbpath2,_0xe6c9d6(0x16a)))),app['use'](express[_0xe6c9d6(0xf3)](path[_0xe6c9d6(0x185)](__dirname,bbpath2,_0xe6c9d6(0x1c1)))),app[_0xe6c9d6(0x10d)]('/',function(_0xbcab83,_0x292936){const _0x115785=_0xe6c9d6;_0x292936[_0x115785(0xdc)](path[_0x115785(0x185)](__dirname,bbpath2,_0x115785(0x16a),_0x115785(0x215)));}),app[_0xe6c9d6(0x10d)](_0xe6c9d6(0x160),function(_0xe2b631,_0x1c2851){const _0x422aa0=_0xe6c9d6;_0x1c2851[_0x422aa0(0xdc)](path[_0x422aa0(0x185)](__dirname,bbpath2,_0x422aa0(0x1c1),_0x422aa0(0x215)));}),app[_0xe6c9d6(0x10d)](_0xe6c9d6(0xfd),(_0x1e7db9,_0x44cd74)=>{const _0x1d4c5e=_0xe6c9d6;_0x44cd74[_0x1d4c5e(0xdc)](path[_0x1d4c5e(0x185)](__dirname,bbpath2,_0x1d4c5e(0x1c1),_0x1d4c5e(0x215)));}),app[_0xe6c9d6(0x10d)](_0xe6c9d6(0x193),(_0x1aa288,_0x54cbd9)=>{const _0x148a6d=_0xe6c9d6;_0x54cbd9[_0x148a6d(0xdc)](path[_0x148a6d(0x185)](__dirname,bbpath2,_0x148a6d(0x1c1),_0x148a6d(0x215)));}),app['get'](_0xe6c9d6(0xe7),(_0x5453e4,_0x137112)=>{const _0x1dda49=_0xe6c9d6;_0x137112['sendFile'](path[_0x1dda49(0x185)](__dirname,bbpath2,_0x1dda49(0x1c1),_0x1dda49(0x215)));}),app['get'](_0xe6c9d6(0xba),(_0x272a5d,_0x36983a)=>{const _0x533d51=_0xe6c9d6;_0x36983a[_0x533d51(0xdc)](path['join'](__dirname,bbpath2,_0x533d51(0x1c1),_0x533d51(0x215)));}),app[_0xe6c9d6(0x10d)](_0xe6c9d6(0x16d),(_0x178f4a,_0x5b5ddc)=>{const _0x22520c=_0xe6c9d6;_0x5b5ddc['sendFile'](path[_0x22520c(0x185)](__dirname,bbpath2,_0x22520c(0x1c1),_0x22520c(0x215)));}),app['get']('/:bot/support',(_0x72fc99,_0x18237c)=>{const _0x118d4d=_0xe6c9d6;_0x18237c[_0x118d4d(0xdc)](path['join'](__dirname,bbpath2,_0x118d4d(0x1c1),_0x118d4d(0x215)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0xe6c9d6(0xc1))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4b331e=_0xe6c9d6;let _0x23eb1b='[ip-address]';const _0x12b9f9=networkInterfaces(),_0x44bd34={};for(const _0x6b60a8 of Object[_0x4b331e(0x11e)](_0x12b9f9)){for(const _0x494a2c of _0x12b9f9[_0x6b60a8]){if((_0x494a2c[_0x4b331e(0x173)]=='IPv4'||_0x494a2c[_0x4b331e(0x173)]==0x4)&&!_0x494a2c[_0x4b331e(0x155)]){const _0x119eee=ipaddr[_0x4b331e(0x10e)](_0x494a2c[_0x4b331e(0x1c7)])['range']();_0x119eee!=_0x4b331e(0x24e)&&(!_0x44bd34[_0x6b60a8]&&(_0x44bd34[_0x6b60a8]=[]),_0x44bd34[_0x6b60a8]['push'](_0x494a2c[_0x4b331e(0x1c7)]),_0x23eb1b=_0x494a2c[_0x4b331e(0x1c7)]);}}}return{'serverip':_0x23eb1b,'netinterfaces':_0x44bd34};}async function startServer(){const _0x28032a=_0xe6c9d6,{serverip:_0x244373,netinterfaces:_0x447554}=getServerIP();logger[_0x28032a(0x25d)](''),logger['simple'](_0x28032a(0x125)),await logger[_0x28032a(0x137)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+'#RES#\x0a'+(_0x28032a(0x15a)+PORT+_0x28032a(0x207))+('=>\x20Go\x20to\x20#BLU#http://'+_0x244373+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x28032a(0x25d)](_0x28032a(0x125));if(config[_0x28032a(0xfb)]!=0x0)for(const _0x92583f of config){if(_0x92583f[_0x28032a(0x1b5)]=='enabled'||_0x92583f[_0x28032a(0x1b5)]==_0x28032a(0x143))await logger[_0x28032a(0x137)](_0x28032a(0x1ad)+_0x92583f[_0x28032a(0x115)]+_0x28032a(0x1db)+_0x92583f[_0x28032a(0x252)]),startBot([_0x92583f[_0x28032a(0x115)],userID],{'cwd':bbpath},function(_0x465260){const _0x1edcdc=_0x28032a;if(_0x465260)logger[_0x1edcdc(0x137)](_0x465260);});else(_0x92583f[_0x28032a(0x1b5)]==_0x28032a(0xbb)||_0x92583f['status']==_0x28032a(0x260))&&await logger[_0x28032a(0x137)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x92583f[_0x28032a(0x115)]+_0x28032a(0x1db)+_0x92583f[_0x28032a(0x252)]);}else!newBot&&logger[_0x28032a(0x25d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x28032a(0x125)),logger[_0x28032a(0x25d)](''),await logger[_0x28032a(0x109)](_0x28032a(0x165)+nodeversion),await logger[_0x28032a(0x109)](_0x28032a(0x1ef),_0x447554);}function startSocket(){io['on']('connection',_0x130c01=>{const _0x24e406=_0x4850;let _0x5678cb,_0x4bb791,_0x3eae08,_0x13fb5f,_0x1cb8ab;const _0x3f7e61=_0x130c01[_0x24e406(0x149)][_0x24e406(0x247)][_0x24e406(0x127)];_0x4bb791=_0x3f7e61[_0x24e406(0x1df)](/bot[0-9]{3}/);if(_0x4bb791)_0x3eae08=_0x4bb791[0x0]['match'](/[0-9]{3}/);if(_0x3eae08)_0x5678cb=_0x3eae08[0x0];else _0x5678cb=_0x24e406(0xdb);const _0xe642e9=_0x130c01[_0x24e406(0x149)][_0x24e406(0x181)][_0x24e406(0x159)];if(!_0xe642e9)_0x130c01[_0x24e406(0xeb)]('status',{'publicKey':secure[_0x24e406(0x264)]});else{_0x13fb5f=timelyDecrypt(_0xe642e9,![]);if(!_0x13fb5f)_0x130c01[_0x24e406(0xeb)](_0x24e406(0x1b5),{'publicKey':secure['publicKey']});else{_0x1cb8ab=normalizeIP(_0x130c01['conn']['remoteAddress'])['store'];if(!devices[_0x13fb5f])devices[_0x13fb5f]={'uuid':_0x13fb5f,'access':{'token':null}};devices[_0x13fb5f]['ip']=_0x1cb8ab;const _0x454ae0=addClient(_0x130c01['id'],_0x13fb5f,_0x5678cb);setAccess(_0x454ae0),emitMessages(),_0x130c01['on'](_0x24e406(0x14c),_0xfb2749=>{const _0x58b6b0=_0x24e406,_0x205b4d=timelyDecrypt(_0xfb2749[_0x58b6b0(0x21f)]);if(_0x205b4d){_0xfb2749={'username':_0xfb2749[_0x58b6b0(0x20d)],'password':_0x205b4d},devices[_0x13fb5f][_0x58b6b0(0x15e)]=validateCredentials(_0xfb2749,_0x13fb5f);if(devices[_0x13fb5f]['access'][_0x58b6b0(0x1e9)]==![]&&devices[_0x13fb5f][_0x58b6b0(0x15e)][_0x58b6b0(0xd2)]==_0x58b6b0(0x25c))_0x130c01[_0x58b6b0(0xeb)](_0x58b6b0(0x1b5),{'access':devices[_0x13fb5f][_0x58b6b0(0x15e)]}),loginAccess2FA(_0x13fb5f,_0x1cb8ab);else{if(devices[_0x13fb5f][_0x58b6b0(0x15e)]['allow']==![]&&devices[_0x13fb5f][_0x58b6b0(0x15e)][_0x58b6b0(0xd2)]==_0x58b6b0(0xb0))_0x130c01[_0x58b6b0(0xeb)](_0x58b6b0(0x1b5),{'access':devices[_0x13fb5f][_0x58b6b0(0x15e)]});else devices[_0x13fb5f][_0x58b6b0(0x15e)]['allow']&&devices[_0x13fb5f]['access'][_0x58b6b0(0xd2)]==_0x58b6b0(0x132)&&(getClientsWithUuid(_0x13fb5f)[_0x58b6b0(0x1ed)](_0x16e10f=>{setAccess(_0x16e10f);}),logger[_0x58b6b0(0x109)]('Logged\x20in\x20user\x20...'+_0x13fb5f[_0x58b6b0(0x17c)](-0x8)),setTokenRefresh(_0x13fb5f),setSessionTimeout(_0x58b6b0(0x14c),_0x13fb5f));}}else logger['full'](_0x58b6b0(0x106));}),_0x130c01['on'](_0x24e406(0x1ee),()=>{resetPassword();}),_0x130c01['on']('disconnect',_0x4626e5=>{removeClient(_0x130c01['id']);}),_0x5678cb=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x102fc6){const _0x512ab6=_0xe6c9d6;if(_0x102fc6!=_0x512ab6(0xdb)&&config[_0x512ab6(0x251)]!=''){if(pid[_0x102fc6])pid[_0x102fc6][_0x512ab6(0x13c)]({'function':_0x512ab6(0x156),'args':null});}_0x102fc6!=_0x512ab6(0xdb)&&broadcastToBots(_0x512ab6(0x151),JSON[_0x512ab6(0x214)](config));}function reloadBotManager(){const _0x5aedf7=_0xe6c9d6;getClientsWithBotID('botmanager')[_0x5aedf7(0x1ed)](_0x38c953=>{const _0x4c7186=_0x5aedf7;getSocket(_0x38c953['id'])[_0x4c7186(0xeb)](_0x4c7186(0x1b5),{'access':{'allow':![],'reason':_0x4c7186(0x11f),'token':null}});});}function getSocket(_0x3e1e72){const _0x1b0921=_0xe6c9d6;return io[_0x1b0921(0x1b1)][_0x1b0921(0x1b1)][_0x1b0921(0x10d)](_0x3e1e72);}function setAccess(_0x4fca17){const _0x110fcf=_0xe6c9d6,_0x3043ce=getSocket(_0x4fca17['id']),_0x4a584f=_0x4fca17[_0x110fcf(0xef)],_0x5ddda4=_0x4fca17['bot'];devices[_0x4a584f][_0x110fcf(0x15e)]=validateAccess(devices[_0x4a584f]['access'][_0x110fcf(0x183)],_0x4a584f),logger[_0x110fcf(0x109)]('Setting\x20access:\x20'+devices[_0x4a584f][_0x110fcf(0x15e)]['reason']+_0x110fcf(0x117)+_0x4fca17['id'][_0x110fcf(0x17c)](-0x8)+_0x110fcf(0x188)+_0x4a584f[_0x110fcf(0x17c)](-0x8)),_0x3043ce[_0x110fcf(0x185)](_0x4a584f);if(devices[_0x4a584f][_0x110fcf(0x15e)][_0x110fcf(0x1e9)]){_0x3043ce[_0x110fcf(0x185)](_0x5ddda4);if(_0x5ddda4==_0x110fcf(0xdb))initializeSocketBotManager(_0x3043ce);else initializeSocketBot(_0x3043ce);initClient(_0x5ddda4);}devices[_0x4a584f][_0x110fcf(0x15e)][_0x110fcf(0x183)]&&devices[_0x4a584f][_0x110fcf(0x15e)][_0x110fcf(0xd2)]==_0x110fcf(0x24a)&&setSessionTimeout(_0x110fcf(0x25b),_0x4a584f),devices[_0x4a584f][_0x110fcf(0x15e)][_0x110fcf(0x183)]&&devices[_0x4a584f][_0x110fcf(0x15e)][_0x110fcf(0xd2)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x110fcf(0x14c),_0x4a584f),_0x3043ce[_0x110fcf(0xeb)](_0x110fcf(0x1b5),{'status':_0x4fca17[_0x110fcf(0xb2)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4a584f]['access'],'externalip':devices[_0x4a584f]['ip'],'publicKey':secure[_0x110fcf(0x264)],'userid':settings[_0x110fcf(0xe4)],'validInstallation':validInstallation}),devices[_0x4a584f]['access'][_0x110fcf(0x1e9)]==![]&&devices[_0x4a584f][_0x110fcf(0x15e)]['reason']==_0x110fcf(0x234)&&temporaryAccess2FA(_0x4a584f,devices[_0x4a584f]['ip']);}function setSessionTimeout(_0x5cfa4c,_0x3ea5f6){const _0x188500=_0xe6c9d6;let _0x4c3d5c;if(_0x5cfa4c==_0x188500(0x14c))_0x4c3d5c=loginExpiry*0x3c*0x3e8;else _0x4c3d5c=devices[_0x3ea5f6][_0x188500(0x170)][_0x188500(0x229)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x3ea5f6][_0x188500(0x170)]['timestamp']);if(devices[_0x3ea5f6][_0x188500(0x133)])clearTimeout(devices[_0x3ea5f6]['pidExpireLogin']);devices[_0x3ea5f6][_0x188500(0x133)]=setTimeout(()=>{const _0x4aab07=_0x188500;if(devices[_0x3ea5f6][_0x4aab07(0x169)])clearTimeout(devices[_0x3ea5f6][_0x4aab07(0x169)]);removeSocketListeners(_0x3ea5f6),addBlacklist(_0x3ea5f6),devices[_0x3ea5f6][_0x4aab07(0x170)]=null,devices[_0x3ea5f6][_0x4aab07(0x1e6)]=null,devices[_0x3ea5f6][_0x4aab07(0x15e)][_0x4aab07(0x183)]=null,logger[_0x4aab07(0x109)]('Session\x20expired\x20for\x20user\x20...'+_0x3ea5f6['slice'](-0x8)),devices[_0x3ea5f6][_0x4aab07(0x15e)]=validateAccess(devices[_0x3ea5f6][_0x4aab07(0x15e)]['token'],_0x3ea5f6),!(devices[_0x3ea5f6][_0x4aab07(0x15e)][_0x4aab07(0x1e9)]&&devices[_0x3ea5f6][_0x4aab07(0x15e)]['reason']==_0x4aab07(0x232))&&(_0x5cfa4c==_0x4aab07(0x14c)?io['to'](_0x3ea5f6)[_0x4aab07(0xeb)](_0x4aab07(0x1b5),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3ea5f6)[_0x4aab07(0xeb)](_0x4aab07(0x1b5),{'access':{'allow':![],'reason':_0x4aab07(0x209),'token':null}})),devices[_0x3ea5f6][_0x4aab07(0x15e)]['token']=null;},_0x4c3d5c);}function setTokenRefresh(_0x26d5b8){const _0x4bf086=_0xe6c9d6;if(devices[_0x26d5b8][_0x4bf086(0x169)])clearTimeout(devices[_0x26d5b8][_0x4bf086(0x169)]);devices[_0x26d5b8][_0x4bf086(0x169)]=setTimeout(()=>{const _0x29aa78=_0x4bf086;getClientsWithUuid(_0x26d5b8)[_0x29aa78(0xfb)]!=0x0?(devices[_0x26d5b8][_0x29aa78(0x15e)]=refreshToken(_0x26d5b8),io['to'](_0x26d5b8)[_0x29aa78(0xeb)]('status',{'status':_0x29aa78(0x1e4),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x26d5b8][_0x29aa78(0x15e)],'externalip':devices[_0x26d5b8]['ip'],'publicKey':secure[_0x29aa78(0x264)],'validInstallation':validInstallation}),setTokenRefresh(_0x26d5b8)):clearTimeout(devices[_0x26d5b8][_0x29aa78(0x169)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3b655c){const _0x4a9a9d=_0xe6c9d6,_0x50393c=getClient(_0x3b655c['id'])[_0x4a9a9d(0xef)];_0x3b655c[_0x4a9a9d(0xeb)](_0x4a9a9d(0x151),config),_0x3b655c[_0x4a9a9d(0xeb)](_0x4a9a9d(0xae),cleanSettings()),_0x3b655c['on'](_0x4a9a9d(0x240),_0x139ae4=>{const _0x172f82=_0x4a9a9d;if(validateAccess(_0x139ae4,_0x50393c)[_0x172f82(0x1e9)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x3b655c['on'](_0x4a9a9d(0x1a5),(_0x262904,_0x2680d0)=>{const _0xbaf7a1=_0x4a9a9d;if(validateAccess(_0x2680d0,_0x50393c)['allow'])toggleBot(_0x262904['botID'],_0x262904['status'],_0x262904['live']);else logger[_0xbaf7a1(0x137)](_0xbaf7a1(0x194));}),_0x3b655c['on']('toggle-bot-mode',(_0x384916,_0x4454dd)=>{const _0x46084b=_0x4a9a9d;if(validateAccess(_0x4454dd,_0x50393c)[_0x46084b(0x1e9)])toggleBotMode(_0x384916);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3b655c['on']('delete-bot',(_0x22b1cd,_0x262bb9)=>{const _0x189c50=_0x4a9a9d;if(validateAccess(_0x262bb9,_0x50393c)['allow'])deleteBot(_0x22b1cd);else logger[_0x189c50(0x137)](_0x189c50(0x158));}),_0x3b655c['on'](_0x4a9a9d(0x211),(_0x160567,_0x24c885)=>{const _0x1d17cd=_0x4a9a9d;if(validateAccess(_0x24c885,_0x50393c)[_0x1d17cd(0x1e9)])storeSettings(_0x160567,!![]);else logger[_0x1d17cd(0x137)](_0x1d17cd(0x201));}),_0x3b655c['on'](_0x4a9a9d(0x191),_0x49386d=>{const _0x265690=_0x4a9a9d;if(validateAccess(_0x49386d,_0x50393c)[_0x265690(0x1e9)])updateBB('update');else logger[_0x265690(0x137)](_0x265690(0x1ba));}),_0x3b655c['on'](_0x4a9a9d(0x138),_0x4bcd8d=>{const _0x15c25f=_0x4a9a9d;if(validateAccess(_0x4bcd8d,_0x50393c)['allow'])updateBB(_0x15c25f(0x1a0));else logger[_0x15c25f(0x137)](_0x15c25f(0x237));}),_0x3b655c['on'](_0x4a9a9d(0xbc),_0x20efdf=>{const _0x139a11=_0x4a9a9d;if(validateAccess(_0x20efdf,_0x50393c)[_0x139a11(0x1e9)]){const _0x2de868=getClient(_0x3b655c['id']);if(_0x2de868)getBackupFiles(_0x2de868['uuid']);else logger[_0x139a11(0x137)](_0x139a11(0x172));}else logger[_0x139a11(0x137)](_0x139a11(0x1a3));}),_0x3b655c['on']('restore-backup-file',(_0x224104,_0x246e37)=>{const _0x4f93ee=_0x4a9a9d;if(validateAccess(_0x246e37,_0x50393c)[_0x4f93ee(0x1e9)])restoreBackupFile(_0x224104);else logger[_0x4f93ee(0x137)](_0x4f93ee(0x1d3));}),_0x3b655c['on'](_0x4a9a9d(0x152),_0x3378af=>{const _0x55d782=_0x4a9a9d;if(validateAccess(_0x3378af,_0x50393c)[_0x55d782(0x1e9)])getMessages();else logger[_0x55d782(0x137)](_0x55d782(0xf5));}),_0x3b655c['on']('confirm-message',(_0x17076b,_0x48c11d)=>{const _0x5054b4=_0x4a9a9d;if(validateAccess(_0x48c11d,_0x50393c)[_0x5054b4(0x1e9)])confirmMessage(_0x17076b);else logger[_0x5054b4(0x137)](_0x5054b4(0x226));}),_0x3b655c['on'](_0x4a9a9d(0x22d),_0x2671f3=>{const _0x4282f6=_0x4a9a9d;if(validateAccess(_0x2671f3,_0x50393c)[_0x4282f6(0x1e9)]){if(devices[_0x50393c][_0x4282f6(0x169)])clearTimeout(devices[_0x50393c][_0x4282f6(0x169)]);if(devices[_0x50393c][_0x4282f6(0x133)])clearTimeout(devices[_0x50393c]['pidExpireLogin']);removeSocketListeners(getClient(_0x3b655c['id'])['uuid']),addBlacklist(_0x50393c),devices[_0x50393c][_0x4282f6(0x170)]=null,devices[_0x50393c][_0x4282f6(0x1e6)]=null,devices[_0x50393c][_0x4282f6(0x15e)][_0x4282f6(0x183)]=null,logger[_0x4282f6(0x109)]('Logged\x20out\x20user\x20...'+_0x50393c[_0x4282f6(0x17c)](-0x8)),io['to'](getClient(_0x3b655c['id'])['uuid'])[_0x4282f6(0xeb)](_0x4282f6(0x1b5),{'access':{'allow':![],'reason':_0x4282f6(0x22e),'token':null}});}else logger[_0x4282f6(0x137)](_0x4282f6(0x114));});}function initializeSocketBot(_0x4eece6){const _0x553886=_0xe6c9d6,_0x2265da=getClient(_0x4eece6['id'])[_0x553886(0x198)],_0x5502a4=getClient(_0x4eece6['id'])[_0x553886(0xef)];_0x4eece6['on']('get-logs',(_0x288760,_0x239eb1)=>{const _0x1704f7=_0x553886;if(validateAccess(_0x239eb1,_0x5502a4)['allow']){if(pid[_0x2265da])pid[_0x2265da][_0x1704f7(0x13c)]({'function':_0x1704f7(0x1bc),'args':_0x288760});}else logger[_0x1704f7(0x137)](_0x1704f7(0x103));}),_0x4eece6['on']('delete-alerts',(_0xb9e971,_0x54b9d5)=>{const _0x2e2775=_0x553886;if(validateAccess(_0x54b9d5,_0x5502a4)['allow']){if(pid[_0x2265da])pid[_0x2265da][_0x2e2775(0x13c)]({'function':_0x2e2775(0xa0),'args':_0xb9e971});}else logger[_0x2e2775(0x137)](_0x2e2775(0x236));}),_0x4eece6['on'](_0x553886(0x1fd),(_0x5cc62f,_0x1c92fd)=>{const _0x4eccde=_0x553886;if(validateAccess(_0x1c92fd,_0x5502a4)[_0x4eccde(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x4eccde(0x13c)]({'function':'getPortfolio','args':_0x5cc62f});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x4eece6['on'](_0x553886(0x12b),(_0x4927ac,_0x4f6ba2)=>{const _0x543534=_0x553886;if(validateAccess(_0x4f6ba2,_0x5502a4)[_0x543534(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x543534(0x13c)]({'function':_0x543534(0x18e),'args':_0x4927ac});}else logger[_0x543534(0x137)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x4eece6['on'](_0x553886(0xec),(_0x2f5e04,_0x1d9f25)=>{const _0x13ee66=_0x553886;if(validateAccess(_0x1d9f25,_0x5502a4)[_0x13ee66(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x13ee66(0x13c)]({'function':_0x13ee66(0x22b),'args':_0x2f5e04});}else logger[_0x13ee66(0x137)](_0x13ee66(0x1e1));}),_0x4eece6['on'](_0x553886(0x206),(_0x286674,_0x1a943f)=>{const _0x54926c=_0x553886;if(validateAccess(_0x1a943f,_0x5502a4)[_0x54926c(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x54926c(0x13c)]({'function':_0x54926c(0x150),'args':_0x286674});}else logger[_0x54926c(0x137)]('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x4eece6['on'](_0x553886(0x12c),_0x1e5156=>{const _0x4fa901=_0x553886;if(validateAccess(_0x1e5156,_0x5502a4)[_0x4fa901(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x4fa901(0x13c)]({'function':'resetHistory','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x4eece6['on'](_0x553886(0x129),_0x2834c8=>{const _0x268291=_0x553886;if(validateAccess(_0x2834c8,_0x5502a4)[_0x268291(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x268291(0x13c)]({'function':_0x268291(0x1ca),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4eece6['on'](_0x553886(0x14e),(_0x150899,_0x44f3f7)=>{const _0x228f17=_0x553886;if(validateAccess(_0x44f3f7,_0x5502a4)[_0x228f17(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x228f17(0x13c)]({'function':_0x228f17(0x1a1),'args':_0x150899});}else logger[_0x228f17(0x137)]('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x4eece6['on'](_0x553886(0xcd),_0x3d872a=>{const _0x55ad35=_0x553886;if(validateAccess(_0x3d872a,_0x5502a4)[_0x55ad35(0x1e9)]){if(pid[_0x2265da])pid[_0x2265da][_0x55ad35(0x13c)]({'function':_0x55ad35(0x1ea),'args':null});}else logger[_0x55ad35(0x137)](_0x55ad35(0x187));}),_0x4eece6['on'](_0x553886(0x190),_0x496070=>{const _0x5dede1=_0x553886;if(validateAccess(_0x496070,_0x5502a4)['allow']){if(pid[_0x2265da])pid[_0x2265da][_0x5dede1(0x13c)]({'function':'showConfig','args':null});}else logger[_0x5dede1(0x137)](_0x5dede1(0x10a));}),_0x4eece6['on'](_0x553886(0x191),_0x2a4809=>{const _0xe6cf67=_0x553886;if(validateAccess(_0x2a4809,_0x5502a4)[_0xe6cf67(0x1e9)])updateBB(_0xe6cf67(0x258));else logger[_0xe6cf67(0x137)](_0xe6cf67(0x1ba));}),_0x4eece6['on'](_0x553886(0x152),_0x3d65a0=>{const _0x3cd4ca=_0x553886;if(validateAccess(_0x3d65a0,_0x5502a4)[_0x3cd4ca(0x1e9)])getMessages();else logger[_0x3cd4ca(0x137)](_0x3cd4ca(0xf5));}),_0x4eece6['on']('confirm-message',(_0x278b52,_0x26252f)=>{const _0x25ccbd=_0x553886;if(validateAccess(_0x26252f,_0x5502a4)[_0x25ccbd(0x1e9)])confirmMessage(_0x278b52);else logger['full'](_0x25ccbd(0x226));}),_0x4eece6['on'](_0x553886(0x22d),_0x1e3a95=>{const _0x3621c3=_0x553886;if(validateAccess(_0x1e3a95,_0x5502a4)[_0x3621c3(0x1e9)]){if(devices[_0x5502a4]['pidRefreshToken'])clearTimeout(devices[_0x5502a4][_0x3621c3(0x169)]);if(devices[_0x5502a4][_0x3621c3(0x133)])clearTimeout(devices[_0x5502a4]['pidExpireLogin']);removeSocketListeners(getClient(_0x4eece6['id'])[_0x3621c3(0xef)]),addBlacklist(_0x5502a4),devices[_0x5502a4][_0x3621c3(0x170)]=null,devices[_0x5502a4][_0x3621c3(0x1e6)]=null,devices[_0x5502a4][_0x3621c3(0x15e)][_0x3621c3(0x183)]=null,logger[_0x3621c3(0x109)]('Logged\x20out\x20user\x20...'+_0x5502a4[_0x3621c3(0x17c)](-0x8)),io['to'](getClient(_0x4eece6['id'])[_0x3621c3(0xef)])[_0x3621c3(0xeb)](_0x3621c3(0x1b5),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x3621c3(0x137)](_0x3621c3(0x114));});}function removeSocketListeners(_0x1c2ef4){const _0x501ded=_0xe6c9d6;getClientsWithUuid(_0x1c2ef4)[_0x501ded(0x1ed)](_0x35d4d0=>{getSocket(_0x35d4d0['id'])['removeAllListeners']();});}function cleanSettings(){const _0x163120=_0xe6c9d6;let _0x12d53e=settings;return settings[_0x163120(0x1c9)]&&settings[_0x163120(0x1c9)]!=''&&(_0x12d53e={..._0x12d53e,'telegramToken':_0x163120(0x168)}),settings['bbPassword']&&settings[_0x163120(0xf8)]!=''&&(_0x12d53e={..._0x12d53e,'bbPassword':_0x163120(0x168)}),(settings[_0x163120(0xf8)]&&settings[_0x163120(0xf8)]=='***'||settings['telegramToken']&&settings[_0x163120(0x1c9)]==_0x163120(0xc0))&&(_0x12d53e={..._0x12d53e,'restored':{'password':settings[_0x163120(0xf8)]=='***','telegram':settings[_0x163120(0x1c9)]==_0x163120(0xc0)}}),_0x12d53e;}async function updateBB(_0x2ef792){const _0x42f961=_0xe6c9d6;await backupConfigFiles(),installingUpdate=!![],config[_0x42f961(0x1ed)](_0x402b17=>{const _0x3119d0=_0x42f961;restartBot(_0x402b17[_0x3119d0(0x115)]);}),logger[_0x42f961(0x109)]('Starting\x20Balance\x20Bot\x20'+_0x2ef792);if(_0x2ef792==_0x42f961(0x258))process['send']({'update':!![]},_0x111a82=>{});else _0x2ef792==_0x42f961(0x1a0)&&process[_0x42f961(0x13c)]({'reinstall':!![]},_0x4b3549=>{});}function startBot(_0x183e85,_0x5ada11,_0x4edfdd){const _0x5eebf2=_0xe6c9d6;if(debugging)_0x183e85['push']('-d');let _0x5aa8de=![];const _0x4680e6=_0x183e85[0x0];_0x5ada11={..._0x5ada11,'stdio':[_0x5eebf2(0x24c),'inherit',_0x5eebf2(0x24c),_0x5eebf2(0x21b)]},pid[_0x4680e6]=childProcess[_0x5eebf2(0x1e0)](botfile,_0x183e85,_0x5ada11),pid[_0x4680e6]['on'](_0x5eebf2(0x111),_0x457861=>{const _0xbf8238=_0x5eebf2;switch(Object[_0xbf8238(0x11e)](_0x457861)[0x0]){case _0xbf8238(0x252):updateBotName(_0x4680e6,_0x457861[_0xbf8238(0x252)]);break;case _0xbf8238(0x1fe):updateBotManager();break;case _0xbf8238(0x1b5):updateStatus(_0x4680e6,_0x457861[_0xbf8238(0x1b5)]);break;case _0xbf8238(0x1cd):updateLive(_0x4680e6,_0x457861[_0xbf8238(0x1cd)]);break;case'started':updateLive(_0x4680e6,_0x457861[_0xbf8238(0x135)]),io['to'](_0x4680e6)[_0xbf8238(0xeb)](_0xbf8238(0x1b5),{'access':{'allow':![],'reason':_0xbf8238(0x11f),'token':null}});break;case _0xbf8238(0x128):_0x457861[_0xbf8238(0x128)]==_0xbf8238(0x1ff)&&restartBot(_0x4680e6);_0x457861['stop']=='kill'&&toggleBot(_0x4680e6,'disabled','stopped');break;case'telegram':sendTelegram(_0x4680e6,_0x457861[_0xbf8238(0xe5)]);break;case'telegrammsg':sendTelegramMsg(_0x457861['telegrammsg']);break;case _0xbf8238(0xb9):io['to'](_0x4680e6)['emit'](_0x457861['function'],_0x457861[_0xbf8238(0x230)]);break;}}),pid[_0x4680e6]['on'](_0x5eebf2(0x10b),function(_0x3dc3f1){if(_0x5aa8de)return;_0x5aa8de=!![],_0x4edfdd(_0x3dc3f1);}),pid[_0x4680e6]['on'](_0x5eebf2(0x228),async function(_0x314bc0){const _0x5e7df9=_0x5eebf2;if(installingUpdate)return;if(_0x5aa8de)return;_0x5aa8de=!![],_0x4edfdd(null);const _0x506940=dbConfig[_0x5e7df9(0x10d)](_0x5e7df9(0x151))['find']({'botID':_0x4680e6})[_0x5e7df9(0x239)]();_0x506940&&(_0x506940[_0x5e7df9(0x1b5)]==_0x5e7df9(0x14b)||_0x506940[_0x5e7df9(0x1b5)]==_0x5e7df9(0x143))&&(await sleep(0x3e8),updateLive(_0x4680e6,_0x5e7df9(0x157)),logger[_0x5e7df9(0x137)](_0x5e7df9(0x199)+_0x4680e6),startBot([_0x4680e6,userID],{'cwd':bbpath},function(_0xb31abb){const _0x1e019f=_0x5e7df9;if(_0xb31abb)logger[_0x1e019f(0x137)](_0xb31abb);}));});}function stopBot(_0x5b13df){const _0x33d023=_0xe6c9d6;getClientsWithBotID(_0x5b13df)['forEach'](_0x2104f4=>{const _0x418441=_0x4850;getSocket(_0x2104f4['id'])[_0x418441(0x1d7)](!![]),removeClient(_0x2104f4['id']);}),pid[_0x5b13df]&&(pid[_0x5b13df][_0x33d023(0x256)](),pid[_0x5b13df]=null);}function _0x39ed(){const _0x1ae9e6=['No\x20bots\x20running\x20right\x20now','User\x20has\x20been\x20validated','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','host','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','blacklist','lowdb','temporary\x20access\x20rejected','slice','6b67f3d61ee94b8f5c80b4affef4c4d9','login\x20required','assign','jsonwebtoken','auth','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','token','Crypt','join','mode','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','\x20|\x20user:\x20...','readFileSync','Allow\x20login\x20from\x20IP\x20address\x20<b>','hashSync','backup-full','timeshift','storeConfiguration','catch','show-config','update-bb','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','/:bot/performance','Unauthorized\x20attempt\x20to\x20update\x20bot','Password\x20reset\x20rejected','914320yUsmUB','/download/:type','bot','Restarting\x20Bot\x20','Bot\x20','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','hex','RSA-OAEP','test','alerts','reinstall','placeOrder','user','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','success','update-bot','socket','File\x20uploaded','15\x20min','answerCallbackQuery','size','running','find','Starting\x20bot\x20|\x20Bot\x20','includes','path','/restart\x20-\x20restart\x20bot(s)\x0a','sockets','getMonth','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','_data','status','127.0.0.1','https://api.ipify.org?format=json','util','copyFileSync','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','.zip','emitHistory','logs/','getFullYear','4431ecAeEA','defaults','build','zip/','Markdown','isIPv4MappedAddress','settings.','sendMessage','address','backupfile','telegramToken','getStartingBalances','telegramChatId','sha256','live','Invalid\x20authentication\x20token\x20(1)','constructor','3000','post','download','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Invalid\x20authentication\x20token\x20(2)','writeFileSync','Alerts','disconnect','2955789sTEXQW','bot-','removeListener','\x20|\x20','timestamp','Error\x20while\x20deleting\x20config\x20files:\x20','params','match','fork','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','verify','lastmsgemitted','connected','express','telegram2FaApproval','output-000.log','Notifications\x20disabled\x0a','allow','cancelLoading','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','whitelist','forEach','reset-password','Network\x20Interfaces:','generateKeyPairAsync','messages','createServer','createWriteStream','/config\x20-\x20notification\x20types\x20to\x20receive\x0a',',\x20must\x20be\x20a\x204\x20digit\x20number','node','clientip','Invalid\x20Telegram\x20token','secure','title','getDate','hybrid-crypto-js','get-portfolio','updatebotmanager','restart','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','Login\x20accepted','node-telegram-bot-api','Invalid\x20IP\x20address','Error:\x20Invalid\x20argument\x20','store-fiat','#RES#\x20if\x20running\x20locally\x0a','readdirSync','temporary\x20access\x20timeout','filter','30\x20min','getTime','username','format','yargs/yargs','write','store-settings','backup','1514963qeDfxj','stringify','index.html','backup/','getMinutes','bb-settings.json','from','Restore\x20backup\x20file\x20','ipc','split','once','max','password','1362zFNRbX','decrypt','versions','2FA\x20login\x20token\x20generated','isDirectory','all','Unauthorized\x20attempt\x20to\x20confirm\x20message','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','exit','expiry','order','storeHeadless','lastmsgtelegram','logout','logged\x20out','Notifications\x20types:\x20','args','404\x20Not\x20Found','login\x20not\x20required','output-003.log','2FA\x20required','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','toIPv4Address','value','apiPassword','alias','then','NTBA_FIX_319','HTML','-performance.json','add-bot','show','name','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','(((.+)+)+)+$','existsSync','polling_error','headers','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','\x1b[34m','temporary\x20token\x20generated','telegramEnabled','inherit','onText','private','hasOwnProperty','exp','apiKey','botname','temporary\x20access\x20not\x20allowed','SIGINT','tkn','kill','All\x20bots','update','\x1b[31m','Orders','2FA','2FA\x20login\x20required','simple','files','\x20(2)','new-disabled','-config.json','DEFLATE','Unauthorized\x20attempt\x20to\x20download\x20','publicKey','getUTCHours','startsWith','Restore\x20process\x20aborted','exchange','deleteHistoryAlerts','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','$1_$2_$3','<b>Balance\x20Bot\x20Status:</b>\x0a','sign','Deleted\x20Bot\x20','Bot\x20Mgr\x20>\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','/output-000.log','isValid','sortBy','api-eu.mixpanel.com','event','crypto','settings','Token\x20blacklisted','invalid\x20credentials','cloneDeep','server','port','callback_query','date-fns','2hcNJJr','sendPortfolioTelegram','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','function','/:bot/history','disabled','get-backup-files','telegramEvents','push','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','***','socket.io','temp/','/on\x20-\x20start\x20bot(s)\x0a','bbUsername','child_process',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Enabled\x20Bot\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','reject','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','http','cancel-loading','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','add','rmSync','node-zip','reason','manual','orders','uuid-random','secret','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Backup\x20file\x20uploaded','config/','1000','botmanager','sendFile','log','ipv6','axios','randomFillSync','request','/disable\x20-\x20disable\x20notifications\x0a','clients','userid','telegram','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/:bot/coins','getSeconds','No\x20authentication\x20token','sort','emit','store-headless','\x20only\x0a','search','uuid','use','Notifications\x20disabled','-events.json','static','padStart','Unauthorized\x20attempt\x20to\x20get\x20messages','remoteAddress','set','bbPassword','argv','Backup\x20file\x20unzipped\x20and\x20stored','length','Starting\x20new\x20bot\x20|\x20Bot\x20','/:bot/portfolio','binary','chat','headless','notification','/update\x20-\x20update\x20Balance\x20Bot\x0a','Unauthorized\x20attempt\x20to\x20get\x20events','yes','replace','Unauthorized\x20login\x20attempt\x20(timeout)','toIPv4MappedAddress','117AoLuBR','debug','Unauthorized\x20attempt\x20to\x20show\x20configuration','error','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','get','parse','output-001.log','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','message','17712770cBjLrZ','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20log\x20out','botID','backup-files','\x20|\x20client:\x20...','ipaddr.js','\x20mode','\x20>\x20','init','onepagemode','track','keys','reload','loginRequired','remove','/metrics\x20-\x20show\x20bot\x20performance\x0a','randomBytes','getHours','-----------------------------------------------------------------------------------','privateKey','referer','stop','get-starting-balances','Password\x20has\x20been\x20reset\x20to:\x20','store-configuration','reset-history','stopPolling','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','1017896MCsjvv','generate','store','login\x20token\x20generated','pidExpireLogin','output-002.log','started','temporaryAccessAllowed','full','reinstall-bb','number','/upload-backup','latestversion','send','f2aRequired','bb-secure.json','0.0.0','showname','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','Disabled\x20Bot\x20','new','apiSecret','type','data','bbvNew','backup-full.zip','handshake','mixpanel','enabled','login','::1','place-order','SIGTERM','storeFiat','bots','get-messages','Invalid\x20username\x20or\x20IP\x20address','5876720uaYXXb','internal','initclient','stopped','Unauthorized\x20attempt\x20to\x20delete\x20bot','encryptedUuid','=>\x20Go\x20to\x20#BLU#http://127.0.0.1:','statSync','toString','/status\x20-\x20show\x20bot(s)\x20status\x0a','access','Login\x20rejected','/:bot','mkdirSync','unlinkSync','auto','\x20minutes','Node.js\x20v','Yes','/off\x20-\x20stop\x20bot(s)\x0a','************','pidRefreshToken','build2','file','Notifications\x20enabled','/:bot/configuration','whitelistEnabled','telegramUsername','telegramIpApproval','</b>\x20?','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','family'];_0x39ed=function(){return _0x1ae9e6;};return _0x39ed();}function restartBot(_0x31d989){const _0x57b77e=_0xe6c9d6;if(pid[_0x31d989])pid[_0x31d989][_0x57b77e(0x256)]();}function addBot(){const _0x422598=_0xe6c9d6;let _0x11a807;for(let _0x27ebbc=0x1;_0x27ebbc<0x3e9;_0x27ebbc++){_0x11a807=_0x27ebbc[_0x422598(0x15c)]()[_0x422598(0xf4)](0x3,'0');let _0x2456ef=config['find'](_0xf37ca3=>_0xf37ca3[_0x422598(0x115)]==_0x11a807);if(!_0x2456ef)break;}if(_0x11a807===_0x422598(0xda)){logger[_0x422598(0x137)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x422598(0x137)](_0x422598(0xfc)+_0x11a807),dbConfig[_0x422598(0x10d)](_0x422598(0x151))['push']({'botID':_0x11a807,'botname':_0x422598(0x19a)+_0x11a807,'status':_0x422598(0x143),'live':''})[_0x422598(0x210)](),startBot([_0x11a807,userID],{'cwd':bbpath},function(_0x3c7d36){const _0x5a685f=_0x422598;if(_0x3c7d36)logger[_0x5a685f(0x137)](_0x3c7d36);}),config=getConfiguration(),io['to'](_0x422598(0xdb))[_0x422598(0xeb)](_0x422598(0x151),config),broadcastToBots(_0x422598(0x151),JSON[_0x422598(0x214)](config));}function deleteBot(_0x26b2d8){const _0x2987bc=_0xe6c9d6;getClientsWithBotID(_0x26b2d8)[_0x2987bc(0x1ed)](_0x2ffca2=>{const _0x1e864f=_0x2987bc;getSocket(_0x2ffca2['id'])[_0x1e864f(0x1d7)](!![]),removeClient(_0x2ffca2['id']);}),dbConfig[_0x2987bc(0x10d)](_0x2987bc(0x151))[_0x2987bc(0x121)]({'botID':_0x26b2d8})['write'](),logger[_0x2987bc(0x137)](_0x2987bc(0xa5)+_0x26b2d8),stopBot(_0x26b2d8);try{if(fs[_0x2987bc(0x245)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+'-config.json')))fs[_0x2987bc(0x162)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+_0x2987bc(0x261)));if(fs[_0x2987bc(0x245)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+_0x2987bc(0xf2))))fs['unlinkSync'](path['join'](configpath,_0x2987bc(0x1d9)+_0x26b2d8+_0x2987bc(0xf2)));if(fs[_0x2987bc(0x245)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+_0x2987bc(0x23f))))fs[_0x2987bc(0x162)](path[_0x2987bc(0x185)](configpath,'bot-'+_0x26b2d8+_0x2987bc(0x23f)));if(fs[_0x2987bc(0x245)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+'-results.json')))fs[_0x2987bc(0x162)](path[_0x2987bc(0x185)](configpath,_0x2987bc(0x1d9)+_0x26b2d8+'-results.json'));}catch(_0x3d4727){if(_0x3d4727)logger[_0x2987bc(0x137)](_0x2987bc(0x1dd),_0x3d4727);}config=getConfiguration(),io['to']('botmanager')[_0x2987bc(0xeb)](_0x2987bc(0x151),config),broadcastToBots(_0x2987bc(0x151),JSON['stringify'](config));}function toggleBot(_0x1d0e43,_0x332668,_0xe2e961){const _0x1928ff=_0xe6c9d6;dbConfig['get'](_0x1928ff(0x151))[_0x1928ff(0x1ac)]({'botID':_0x1d0e43})['assign']({'status':_0x332668})[_0x1928ff(0x17f)]({'live':_0xe2e961})['write']();if(_0x332668=='enabled'||_0x332668=='new')logger[_0x1928ff(0x137)](_0x1928ff(0xc7)+_0x1d0e43),startBot([_0x1d0e43,userID],{'cwd':bbpath},function(_0x285ea1){const _0x2daf76=_0x1928ff;if(_0x285ea1)logger[_0x2daf76(0x137)](_0x285ea1);});else(_0x332668=='disabled'||_0x332668==_0x1928ff(0x260))&&(logger[_0x1928ff(0x137)](_0x1928ff(0x142)+_0x1d0e43),stopBot(_0x1d0e43));config=getConfiguration(),io['to'](_0x1928ff(0xdb))['emit'](_0x1928ff(0x151),config),broadcastToBots('bots',JSON[_0x1928ff(0x214)](config));}function toggleStatus(_0x114d81){const _0x438994=_0xe6c9d6;let _0x384f45=dbConfig['get'](_0x438994(0x151))['find']({'botID':_0x114d81})[_0x438994(0x239)](),_0x1dde54;if(_0x384f45[_0x438994(0x1b5)]===_0x438994(0x14b))_0x1dde54='disabled';else{if(_0x384f45[_0x438994(0x1b5)]===_0x438994(0x143))_0x1dde54=_0x438994(0x260);else{if(_0x384f45[_0x438994(0x1b5)]===_0x438994(0x260))_0x1dde54=_0x438994(0x143);else{if(_0x384f45[_0x438994(0x1b5)]===_0x438994(0xbb))_0x1dde54='enabled';}}}return _0x1dde54;}function updateStatus(_0x6988c0,_0xf43f18){const _0x489cd9=_0xe6c9d6;dbConfig['get'](_0x489cd9(0x151))[_0x489cd9(0x1ac)]({'botID':_0x6988c0})['assign']({'status':_0xf43f18})[_0x489cd9(0x210)](),config=getConfiguration(),io['to']('botmanager')[_0x489cd9(0xeb)](_0x489cd9(0x151),config),broadcastToBots(_0x489cd9(0x151),JSON[_0x489cd9(0x214)](config));}function updateLive(_0x386385,_0x1672ac){const _0x434c39=_0xe6c9d6;dbConfig[_0x434c39(0x10d)](_0x434c39(0x151))[_0x434c39(0x1ac)]({'botID':_0x386385})[_0x434c39(0x17f)]({'live':_0x1672ac})[_0x434c39(0x210)](),config=getConfiguration(),io['to'](_0x434c39(0xdb))['emit'](_0x434c39(0x151),config),broadcastToBots(_0x434c39(0x151),JSON['stringify'](config));}function updateBotName(_0x5eb4dd,_0x575aea){const _0x602c=_0xe6c9d6;dbConfig['get'](_0x602c(0x151))[_0x602c(0x1ac)]({'botID':_0x5eb4dd})[_0x602c(0x17f)]({'botname':_0x575aea})[_0x602c(0x210)](),config=getConfiguration(),io['to'](_0x602c(0xdb))[_0x602c(0xeb)]('bots',config),broadcastToBots('bots',JSON[_0x602c(0x214)](config));}function updateBotManager(){const _0x272d7d=_0xe6c9d6;config=getConfiguration(),io['to'](_0x272d7d(0xdb))['emit'](_0x272d7d(0x151),config),broadcastToBots(_0x272d7d(0x151),JSON[_0x272d7d(0x214)](config));}function toggleBotMode(_0x335e98){const _0x16c449=_0xe6c9d6;if(pid[_0x335e98])pid[_0x335e98]['send']({'function':'toggleBotMode','args':null});else{const _0x58a579=configpath+_0x16c449(0x1d9)+_0x335e98+_0x16c449(0x261),_0x29a89a=fs[_0x16c449(0x189)](_0x58a579),_0x391708=JSON[_0x16c449(0x10e)](_0x29a89a),_0x19d665=_0x391708[_0x16c449(0x198)][0x0][_0x16c449(0x100)];_0x391708[_0x16c449(0x198)][0x0]['headless']=!_0x19d665;const _0x4c2147=JSON[_0x16c449(0x214)](_0x391708,null,0x2);fs[_0x16c449(0x1d5)](_0x58a579,_0x4c2147),config=getConfiguration(),io['to'](_0x16c449(0xdb))[_0x16c449(0xeb)](_0x16c449(0x151),config),broadcastToBots('bots',JSON[_0x16c449(0x214)](config));}}function telegramError(_0x538f01){const _0x4ea422=_0xe6c9d6;logger[_0x4ea422(0x25d)](getTimeStamp()+_0x4ea422(0xc6));}function validateTelegram(_0x3e8afe){const _0x3ed073=_0xe6c9d6;if(_0x3e8afe[_0x3ed073(0x219)]['username']!=settings['telegramUsername']&&'@'+_0x3e8afe[_0x3ed073(0x219)]['username']!=settings['telegramUsername'])return tgBot[_0x3ed073(0x1c6)](_0x3e8afe[_0x3ed073(0xff)]['id'],_0x3ed073(0xa1),{'parse_mode':_0x3ed073(0x23e)})[_0x3ed073(0x18f)](_0x17def2=>{telegramError(_0x17def2);}),![];return!![];}async function initTelegram(){const _0xc29989=_0xe6c9d6;if(tgBot)tgBot[_0xc29989(0x12d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xc29989(0x1c9)],{'polling':!![]});let _0x17c7e4=_0xc29989(0xc8);_0x17c7e4+='\x0a',_0x17c7e4+='/enable\x20-\x20enable\x20notifications\x0a',_0x17c7e4+=_0xc29989(0xe2),_0x17c7e4+=_0xc29989(0x1f4),_0x17c7e4+=_0xc29989(0x1b0),_0x17c7e4+=_0xc29989(0xc3),_0x17c7e4+=_0xc29989(0x167),_0x17c7e4+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x17c7e4+='/names\x20-\x20show\x20bot\x20names\x0a',_0x17c7e4+=_0xc29989(0x15d),_0x17c7e4+=_0xc29989(0x122),_0x17c7e4+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x17c7e4+=_0xc29989(0x102),_0x17c7e4+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x17c7e4+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x45754e=_0xc29989(0x10c);_0x45754e+='\x0a',_0x45754e+=_0x17c7e4,tgBot[_0xc29989(0x24d)](/\/start/,_0x1e845e=>{const _0x2c218a=_0xc29989;if(!validateTelegram(_0x1e845e))return;if(settings[_0x2c218a(0x1cb)]!=_0x1e845e['chat']['id'])updateSetting('telegramChatId',_0x1e845e[_0x2c218a(0xff)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2c218a(0x1c6)](_0x1e845e[_0x2c218a(0xff)]['id'],_0x45754e)[_0x2c218a(0x18f)](_0x45a0ef=>{telegramError(_0x45a0ef);});}),tgBot[_0xc29989(0x24d)](/\/enable/,_0x4693d3=>{const _0x4230f2=_0xc29989;if(!validateTelegram(_0x4693d3))return;if(settings[_0x4230f2(0x1cb)]!=_0x4693d3[_0x4230f2(0xff)]['id'])updateSetting(_0x4230f2(0x1cb),_0x4693d3['chat']['id']);updateSetting(_0x4230f2(0x24b),!![]),tgBot['sendMessage'](_0x4693d3[_0x4230f2(0xff)]['id'],_0x4230f2(0x16c))[_0x4230f2(0x18f)](_0x4ca2a6=>{telegramError(_0x4ca2a6);});}),tgBot[_0xc29989(0x24d)](/\/config/,async _0x298d4b=>{const _0x352e34=_0xc29989;if(!validateTelegram(_0x298d4b))return;tgBot['removeListener'](_0x352e34(0xb4)),tgBot['sendMessage'](_0x298d4b[_0x352e34(0xff)]['id'],_0x352e34(0x243),{'reply_markup':{'inline_keyboard':[[{'text':_0x352e34(0x25a),'callback_data':_0x352e34(0xd4)},{'text':_0x352e34(0x1d6),'callback_data':'alerts'},{'text':'All','callback_data':_0x352e34(0x225)}]]}})['catch'](_0x2d6318=>{telegramError(_0x2d6318);}),tgBot['on'](_0x352e34(0xb4),async _0x4f9127=>{const _0x438fac=_0x352e34,_0x348c8c=_0x4f9127[_0x438fac(0x146)],_0x4ccf14=_0x4f9127[_0x438fac(0x111)];tgBot[_0x438fac(0x1a9)](_0x4f9127['id'])[_0x438fac(0x23c)](async()=>{const _0x298fa9=_0x438fac;_0x348c8c=='orders'&&(updateSetting(_0x298fa9(0xbd),_0x298fa9(0xd4)),updateSetting(_0x298fa9(0x24b),!![]),await tgBot['sendMessage'](_0x4ccf14[_0x298fa9(0xff)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0x597736=>{telegramError(_0x597736);}));_0x348c8c==_0x298fa9(0x19f)&&(updateSetting('telegramEvents',_0x298fa9(0x19f)),updateSetting(_0x298fa9(0x24b),!![]),await tgBot[_0x298fa9(0x1c6)](_0x4ccf14[_0x298fa9(0xff)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x298fa9(0x18f)](_0x449fc6=>{telegramError(_0x449fc6);}));_0x348c8c==_0x298fa9(0x225)&&(updateSetting(_0x298fa9(0xbd),_0x298fa9(0x225)),updateSetting(_0x298fa9(0x24b),!![]),await tgBot['sendMessage'](_0x4ccf14[_0x298fa9(0xff)]['id'],_0x298fa9(0x1eb))[_0x298fa9(0x18f)](_0x30f45e=>{telegramError(_0x30f45e);}));if(!settings[_0x298fa9(0x1cb)])tgBot[_0x298fa9(0x1c6)](_0x4ccf14[_0x298fa9(0xff)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x3758ba=>{telegramError(_0x3758ba);});}),tgBot[_0x438fac(0x1da)](_0x438fac(0xb4));});}),tgBot['onText'](/\/status/,_0x2eb3db=>{const _0xa0b89c=_0xc29989;if(!validateTelegram(_0x2eb3db))return;const _0x1e87ca=getBotsWithMode();let _0xb21ba7=_0xa0b89c(0xa3);config[_0xa0b89c(0x1ed)](_0x2512fb=>{const _0x50d946=_0xa0b89c,_0x3a910a=_0x1e87ca[_0x50d946(0x1ac)](_0xb935aa=>_0xb935aa[_0x50d946(0x115)]==_0x2512fb[_0x50d946(0x115)])[_0x50d946(0x186)];_0xb21ba7+=_0x50d946(0x19a)+_0x2512fb[_0x50d946(0x115)]+':\x20'+_0x2512fb[_0x50d946(0x1b5)]+_0x50d946(0x1db)+_0x3a910a+'\x20|\x20'+_0x2512fb[_0x50d946(0x1cd)]+'\x0a';}),_0xb21ba7+='\x0a',_0xb21ba7+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0xb21ba7+=!settings[_0xa0b89c(0x24b)]?_0xa0b89c(0x1e8):'Notifications\x20enabled\x0a',_0xb21ba7+=settings['telegramEnabled']?settings[_0xa0b89c(0xbd)]==_0xa0b89c(0x225)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0xa0b89c(0x22f)+settings[_0xa0b89c(0xbd)]+_0xa0b89c(0xed):'',tgBot[_0xa0b89c(0x1c6)](_0x2eb3db[_0xa0b89c(0xff)]['id'],_0xb21ba7,{'parse_mode':_0xa0b89c(0x23e)})[_0xa0b89c(0x18f)](_0x26d1d4=>{telegramError(_0x26d1d4);});}),tgBot['onText'](/\/restart/,_0x439c21=>{const _0x188a6e=_0xc29989;if(!validateTelegram(_0x439c21))return;tgBot[_0x188a6e(0x1da)](_0x188a6e(0xb4));const _0x523f55=getEnabledBots();if(_0x523f55[_0x188a6e(0xfb)]==0x0)tgBot[_0x188a6e(0x1c6)](_0x439c21[_0x188a6e(0xff)]['id'],_0x188a6e(0x174))[_0x188a6e(0x18f)](_0x225904=>{telegramError(_0x225904);});else{if(_0x523f55[_0x188a6e(0xfb)]>0x1)_0x523f55[_0x188a6e(0xbe)]({'botID':_0x188a6e(0x225)});let _0x48e4ab=[],_0x3015b5=[];const _0x251627=_0x523f55[_0x188a6e(0xfb)]%0x4==0x0||_0x523f55['length']%0x4==0x3||_0x523f55[_0x188a6e(0xfb)]%0x3==0x1?0x4:0x3;let _0x2dc9ca=0x0;_0x523f55['forEach']((_0x176d66,_0x5c6da5)=>{const _0x5b5bf9=_0x188a6e;if(_0x5c6da5%_0x251627==0x0)_0x3015b5=[];_0x3015b5[_0x5b5bf9(0xbe)]({'text':_0x176d66[_0x5b5bf9(0x115)]==_0x5b5bf9(0x225)?_0x5b5bf9(0x257):_0x5b5bf9(0x19a)+_0x176d66[_0x5b5bf9(0x115)],'callback_data':_0x176d66[_0x5b5bf9(0x115)]}),_0x5c6da5%_0x251627==0x0&&(_0x48e4ab[_0x2dc9ca]=_0x3015b5,_0x2dc9ca++);}),tgBot[_0x188a6e(0x1c6)](_0x439c21[_0x188a6e(0xff)]['id'],_0x188a6e(0xe6),{'reply_markup':{'inline_keyboard':_0x48e4ab}})[_0x188a6e(0x18f)](_0x29a225=>{telegramError(_0x29a225);}),tgBot['on']('callback_query',async _0x2595cc=>{const _0x5de84a=_0x188a6e,_0x2f9fc4=_0x2595cc['data'],_0x868207=_0x2595cc['message'];tgBot[_0x5de84a(0x1a9)](_0x2595cc['id'])['then'](async()=>{const _0x24616c=_0x5de84a;_0x2f9fc4==_0x24616c(0x225)?config[_0x24616c(0x1ed)](_0x5b5814=>{const _0x169a81=_0x24616c;restartBot(_0x5b5814[_0x169a81(0x115)]);}):restartBot(_0x2f9fc4);}),tgBot['removeListener'](_0x5de84a(0xb4));});}}),tgBot[_0xc29989(0x24d)](/\/on/,_0x2ab809=>{const _0xa5a3b1=_0xc29989;if(!validateTelegram(_0x2ab809))return;tgBot[_0xa5a3b1(0x1da)]('callback_query');const _0x54abdf=getDisabledBots();if(_0x54abdf[_0xa5a3b1(0xfb)]==0x0)tgBot[_0xa5a3b1(0x1c6)](_0x2ab809['chat']['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x14fdb2=>{telegramError(_0x14fdb2);});else{if(_0x54abdf[_0xa5a3b1(0xfb)]>0x1)_0x54abdf[_0xa5a3b1(0xbe)]({'botID':'all'});let _0x1f964b=[],_0x494c75=[];const _0x11dbd6=_0x54abdf[_0xa5a3b1(0xfb)]%0x4==0x0||_0x54abdf[_0xa5a3b1(0xfb)]%0x4==0x3||_0x54abdf[_0xa5a3b1(0xfb)]%0x3==0x1?0x4:0x3;let _0x372332=0x0;_0x54abdf[_0xa5a3b1(0x1ed)]((_0x390c3f,_0x23807a)=>{const _0x51b68f=_0xa5a3b1;if(_0x23807a%_0x11dbd6==0x0)_0x494c75=[];_0x494c75[_0x51b68f(0xbe)]({'text':_0x390c3f['botID']==_0x51b68f(0x225)?'All\x20bots':_0x51b68f(0x19a)+_0x390c3f[_0x51b68f(0x115)],'callback_data':_0x390c3f[_0x51b68f(0x115)]}),_0x23807a%_0x11dbd6==0x0&&(_0x1f964b[_0x372332]=_0x494c75,_0x372332++);}),tgBot['sendMessage'](_0x2ab809[_0xa5a3b1(0xff)]['id'],_0xa5a3b1(0xcb),{'reply_markup':{'inline_keyboard':_0x1f964b}})['catch'](_0xeda4d6=>{telegramError(_0xeda4d6);}),tgBot['on'](_0xa5a3b1(0xb4),async _0x1bbd82=>{const _0x368eb1=_0xa5a3b1,_0x3c936a=_0x1bbd82[_0x368eb1(0x146)],_0x56ea8c=_0x1bbd82[_0x368eb1(0x111)];tgBot[_0x368eb1(0x1a9)](_0x1bbd82['id'])[_0x368eb1(0x23c)](async()=>{const _0x4049a0=_0x368eb1;_0x3c936a==_0x4049a0(0x225)?(tgBot[_0x4049a0(0x1c6)](_0x56ea8c[_0x4049a0(0xff)]['id'],_0x4049a0(0xd7))[_0x4049a0(0x18f)](_0x448047=>{telegramError(_0x448047);}),_0x54abdf['forEach'](_0x105369=>{const _0x4b44b8=_0x4049a0;if(_0x105369['botID']!='all')toggleBot(_0x105369[_0x4b44b8(0x115)],toggleStatus(_0x105369[_0x4b44b8(0x115)]),_0x4b44b8(0x157));})):(tgBot[_0x4049a0(0x1c6)](_0x56ea8c[_0x4049a0(0xff)]['id'],_0x4049a0(0x12e)+_0x3c936a)[_0x4049a0(0x18f)](_0x55bd7a=>{telegramError(_0x55bd7a);}),toggleBot(_0x3c936a,toggleStatus(_0x3c936a),_0x4049a0(0x157)));}),tgBot[_0x368eb1(0x1da)](_0x368eb1(0xb4));});}}),tgBot[_0xc29989(0x24d)](/\/off/,_0x42aa0e=>{const _0x81f301=_0xc29989;if(!validateTelegram(_0x42aa0e))return;tgBot[_0x81f301(0x1da)](_0x81f301(0xb4));const _0x34afce=getEnabledBots();if(_0x34afce[_0x81f301(0xfb)]==0x0)tgBot[_0x81f301(0x1c6)](_0x42aa0e[_0x81f301(0xff)]['id'],_0x81f301(0x174))['catch'](_0x55c597=>{telegramError(_0x55c597);});else{if(_0x34afce[_0x81f301(0xfb)]>0x1)_0x34afce[_0x81f301(0xbe)]({'botID':_0x81f301(0x225)});let _0x566f46=[],_0x383add=[];const _0x2b1b7a=_0x34afce['length']%0x4==0x0||_0x34afce[_0x81f301(0xfb)]%0x4==0x3||_0x34afce[_0x81f301(0xfb)]%0x3==0x1?0x4:0x3;let _0x2a65b7=0x0;_0x34afce[_0x81f301(0x1ed)]((_0x5a596a,_0x20cb36)=>{const _0x585b80=_0x81f301;if(_0x20cb36%_0x2b1b7a==0x0)_0x383add=[];_0x383add['push']({'text':_0x5a596a['botID']=='all'?_0x585b80(0x257):'Bot\x20'+_0x5a596a[_0x585b80(0x115)],'callback_data':_0x5a596a['botID']}),_0x20cb36%_0x2b1b7a==0x0&&(_0x566f46[_0x2a65b7]=_0x383add,_0x2a65b7++);}),tgBot[_0x81f301(0x1c6)](_0x42aa0e[_0x81f301(0xff)]['id'],_0x81f301(0x178),{'reply_markup':{'inline_keyboard':_0x566f46}})[_0x81f301(0x18f)](_0x15b803=>{telegramError(_0x15b803);}),tgBot['on'](_0x81f301(0xb4),async _0x2dc9b8=>{const _0x2ab680=_0x81f301,_0x418c0f=_0x2dc9b8['data'],_0x2ce56d=_0x2dc9b8['message'];tgBot[_0x2ab680(0x1a9)](_0x2dc9b8['id'])[_0x2ab680(0x23c)](async()=>{const _0xff6488=_0x2ab680;_0x418c0f=='all'?(tgBot['sendMessage'](_0x2ce56d[_0xff6488(0xff)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0xff6488(0x18f)](_0x4ddd35=>{telegramError(_0x4ddd35);}),_0x34afce[_0xff6488(0x1ed)](_0x3975f3=>{const _0x42cd3c=_0xff6488;if(_0x3975f3[_0x42cd3c(0x115)]!=_0x42cd3c(0x225))toggleBot(_0x3975f3['botID'],toggleStatus(_0x3975f3['botID']),_0x42cd3c(0x157));})):(tgBot[_0xff6488(0x1c6)](_0x2ce56d[_0xff6488(0xff)]['id'],_0xff6488(0x110)+_0x418c0f)[_0xff6488(0x18f)](_0x511e80=>{telegramError(_0x511e80);}),toggleBot(_0x418c0f,toggleStatus(_0x418c0f),_0xff6488(0x157)));}),tgBot[_0x2ab680(0x1da)](_0x2ab680(0xb4));});}}),tgBot['onText'](/\/metrics/,_0x3a013f=>{const _0x5827eb=_0xc29989;if(!validateTelegram(_0x3a013f))return;tgBot[_0x5827eb(0x1da)]('callback_query');const _0x3b0a2d=getEnabledBots();if(_0x3b0a2d[_0x5827eb(0xfb)]==0x0)tgBot[_0x5827eb(0x1c6)](_0x3a013f['chat']['id'],_0x5827eb(0x174))[_0x5827eb(0x18f)](_0xf3a177=>{telegramError(_0xf3a177);});else{if(_0x3b0a2d['length']>0x1){let _0xc982b5=[],_0x2a117f=[];const _0x27c02c=_0x3b0a2d[_0x5827eb(0xfb)]%0x4==0x0||_0x3b0a2d[_0x5827eb(0xfb)]%0x4==0x3||_0x3b0a2d[_0x5827eb(0xfb)]%0x3==0x1?0x4:0x3;let _0x5cf255=0x0;_0x3b0a2d[_0x5827eb(0x1ed)]((_0x5d9546,_0x178148)=>{const _0x445e13=_0x5827eb;if(_0x178148%_0x27c02c==0x0)_0x2a117f=[];_0x2a117f[_0x445e13(0xbe)]({'text':_0x445e13(0x19a)+_0x5d9546['botID'],'callback_data':_0x5d9546[_0x445e13(0x115)]}),_0x178148%_0x27c02c==0x0&&(_0xc982b5[_0x5cf255]=_0x2a117f,_0x5cf255++);}),tgBot[_0x5827eb(0x1c6)](_0x3a013f['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0xc982b5}})[_0x5827eb(0x18f)](_0x1921ff=>{telegramError(_0x1921ff);}),tgBot['on'](_0x5827eb(0xb4),async _0x45df84=>{const _0x286eea=_0x5827eb,_0xdcdefd=_0x45df84[_0x286eea(0x146)],_0x169950=_0x45df84[_0x286eea(0x111)];tgBot[_0x286eea(0x1a9)](_0x45df84['id'])[_0x286eea(0x23c)](async()=>{if(pid[_0xdcdefd])pid[_0xdcdefd]['send']({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x286eea(0x1da)](_0x286eea(0xb4));});}else{const _0xcd8ad8=_0x3b0a2d[0x0][_0x5827eb(0x115)];if(pid[_0xcd8ad8])pid[_0xcd8ad8][_0x5827eb(0x13c)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0xc29989(0x24d)](/\/portfolio/,_0x22bbba=>{const _0x239e76=_0xc29989;if(!validateTelegram(_0x22bbba))return;tgBot['removeListener'](_0x239e76(0xb4));const _0x261adc=getEnabledBots();if(_0x261adc['length']==0x0)tgBot[_0x239e76(0x1c6)](_0x22bbba[_0x239e76(0xff)]['id'],_0x239e76(0x174))['catch'](_0x2958c1=>{telegramError(_0x2958c1);});else{if(_0x261adc[_0x239e76(0xfb)]>0x1){let _0x517367=[],_0x4dc173=[];const _0x327393=_0x261adc[_0x239e76(0xfb)]%0x4==0x0||_0x261adc['length']%0x4==0x3||_0x261adc[_0x239e76(0xfb)]%0x3==0x1?0x4:0x3;let _0x40c44f=0x0;_0x261adc[_0x239e76(0x1ed)]((_0x1b7b95,_0x3a303d)=>{const _0x20b744=_0x239e76;if(_0x3a303d%_0x327393==0x0)_0x4dc173=[];_0x4dc173[_0x20b744(0xbe)]({'text':'Bot\x20'+_0x1b7b95[_0x20b744(0x115)],'callback_data':_0x1b7b95[_0x20b744(0x115)]}),_0x3a303d%_0x327393==0x0&&(_0x517367[_0x40c44f]=_0x4dc173,_0x40c44f++);}),tgBot[_0x239e76(0x1c6)](_0x22bbba[_0x239e76(0xff)]['id'],_0x239e76(0x182),{'reply_markup':{'inline_keyboard':_0x517367}})[_0x239e76(0x18f)](_0x1458c8=>{telegramError(_0x1458c8);}),tgBot['on']('callback_query',async _0x4ff800=>{const _0x26c4e6=_0x239e76,_0x252f98=_0x4ff800[_0x26c4e6(0x146)],_0x57cd30=_0x4ff800[_0x26c4e6(0x111)];tgBot[_0x26c4e6(0x1a9)](_0x4ff800['id'])[_0x26c4e6(0x23c)](async()=>{const _0x4c7f86=_0x26c4e6;if(pid[_0x252f98])pid[_0x252f98][_0x4c7f86(0x13c)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x26c4e6(0x1da)](_0x26c4e6(0xb4));});}else{const _0x37d23=_0x261adc[0x0]['botID'];if(pid[_0x37d23])pid[_0x37d23]['send']({'function':_0x239e76(0xb7),'args':null});}}}),tgBot[_0xc29989(0x24d)](/\/update/,async _0x23fa53=>{const _0x276572=_0xc29989;if(!validateTelegram(_0x23fa53))return;tgBot['removeListener'](_0x276572(0xb4)),await getMessages();if(!updateAvailable)tgBot[_0x276572(0x1c6)](_0x23fa53[_0x276572(0xff)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x276572(0x18f)](_0x32eb48=>{telegramError(_0x32eb48);});else!validInstallation?tgBot[_0x276572(0x1c6)](_0x23fa53[_0x276572(0xff)]['id'],_0x276572(0xce))[_0x276572(0x18f)](_0x34c714=>{telegramError(_0x34c714);}):(tgBot[_0x276572(0x1c6)](_0x23fa53[_0x276572(0xff)]['id'],_0x276572(0x1b3),{'reply_markup':{'inline_keyboard':[[{'text':_0x276572(0x166),'callback_data':_0x276572(0x104)},{'text':'No','callback_data':'no'}]]}})[_0x276572(0x18f)](_0x45821c=>{telegramError(_0x45821c);}),tgBot['on'](_0x276572(0xb4),async _0x507727=>{const _0x4e99e4=_0x276572,_0x1cdf20=_0x507727[_0x4e99e4(0x146)],_0x59fdea=_0x507727[_0x4e99e4(0x111)];tgBot[_0x4e99e4(0x1a9)](_0x507727['id'])['then'](async()=>{const _0x276db9=_0x4e99e4;_0x1cdf20=='yes'&&(await tgBot[_0x276db9(0x1c6)](_0x59fdea[_0x276db9(0xff)]['id'],'Starting\x20Balance\x20Bot\x20update')[_0x276db9(0x18f)](_0x514299=>{telegramError(_0x514299);}),updateBB(_0x276db9(0x258))),_0x1cdf20=='no'&&await tgBot[_0x276db9(0x1c6)](_0x59fdea[_0x276db9(0xff)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x276db9(0x18f)](_0x1859ab=>{telegramError(_0x1859ab);});}),tgBot[_0x4e99e4(0x1da)]('callback_query');}));}),tgBot[_0xc29989(0x24d)](/\/reinstall/,async _0x3a5674=>{const _0xb5babb=_0xc29989;if(!validateTelegram(_0x3a5674))return;tgBot[_0xb5babb(0x1da)](_0xb5babb(0xb4)),!validInstallation?tgBot[_0xb5babb(0x1c6)](_0x3a5674[_0xb5babb(0xff)]['id'],_0xb5babb(0xbf))['catch'](_0xce8032=>{telegramError(_0xce8032);}):(tgBot[_0xb5babb(0x1c6)](_0x3a5674[_0xb5babb(0xff)]['id'],_0xb5babb(0xa7),{'reply_markup':{'inline_keyboard':[[{'text':_0xb5babb(0x166),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0xb5babb(0x18f)](_0x952e5a=>{telegramError(_0x952e5a);}),tgBot['on']('callback_query',async _0x12a893=>{const _0x1a0266=_0xb5babb,_0x5f7302=_0x12a893[_0x1a0266(0x146)],_0x3215be=_0x12a893[_0x1a0266(0x111)];tgBot[_0x1a0266(0x1a9)](_0x12a893['id'])['then'](async()=>{const _0x5e5630=_0x1a0266;_0x5f7302==_0x5e5630(0x104)&&(await tgBot[_0x5e5630(0x1c6)](_0x3215be[_0x5e5630(0xff)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')[_0x5e5630(0x18f)](_0x1118d6=>{telegramError(_0x1118d6);}),updateBB(_0x5e5630(0x1a0))),_0x5f7302=='no'&&await tgBot['sendMessage'](_0x3215be[_0x5e5630(0xff)]['id'],_0x5e5630(0x141))[_0x5e5630(0x18f)](_0x3cbdad=>{telegramError(_0x3cbdad);});}),tgBot[_0x1a0266(0x1da)](_0x1a0266(0xb4));}));}),tgBot['onText'](/\/toggle/,_0x560c1d=>{const _0x17b985=_0xc29989;if(!validateTelegram(_0x560c1d))return;tgBot[_0x17b985(0x1da)]('callback_query');const _0x3f4533=getBotsWithMode();if(_0x3f4533[_0x17b985(0xfb)]==0x0)tgBot[_0x17b985(0x1c6)](_0x560c1d[_0x17b985(0xff)]['id'],_0x17b985(0x174))[_0x17b985(0x18f)](_0x1615e0=>{telegramError(_0x1615e0);});else{let _0x34ea58=[],_0x4f4837=[];const _0x43aae2=0x2;let _0x45ba19=0x0;_0x3f4533['forEach']((_0x3c1f94,_0x1e877d)=>{const _0x2f5482=_0x17b985;if(_0x1e877d%_0x43aae2==0x0)_0x4f4837=[];_0x4f4837[_0x2f5482(0xbe)]({'text':'Bot\x20'+_0x3c1f94[_0x2f5482(0x115)]+'\x20('+_0x3c1f94['mode']+')','callback_data':_0x3c1f94['botID']}),_0x1e877d%_0x43aae2==0x0&&(_0x34ea58[_0x45ba19]=_0x4f4837,_0x45ba19++);}),tgBot[_0x17b985(0x1c6)](_0x560c1d[_0x17b985(0xff)]['id'],_0x17b985(0xca),{'reply_markup':{'inline_keyboard':_0x34ea58}})[_0x17b985(0x18f)](_0x13c9eb=>{telegramError(_0x13c9eb);}),tgBot['on']('callback_query',async _0x1d6d12=>{const _0x31bc41=_0x17b985,_0x259eff=_0x1d6d12[_0x31bc41(0x146)],_0x251450=_0x1d6d12[_0x31bc41(0x111)];tgBot[_0x31bc41(0x1a9)](_0x1d6d12['id'])[_0x31bc41(0x23c)](async()=>{const _0x455abe=_0x31bc41,_0x1a80e4=_0x3f4533[_0x455abe(0x1ac)](_0x22f50e=>_0x22f50e[_0x455abe(0x115)]==_0x259eff),_0x6537a5=_0x1a80e4[_0x455abe(0x186)]==_0x455abe(0x163)?_0x455abe(0xd3):_0x455abe(0x163);tgBot[_0x455abe(0x1c6)](_0x251450[_0x455abe(0xff)]['id'],_0x455abe(0x200)+_0x259eff+'\x20to\x20'+_0x6537a5+_0x455abe(0x119))[_0x455abe(0x18f)](_0x5967df=>{telegramError(_0x5967df);}),toggleBotMode(_0x259eff);}),tgBot[_0x31bc41(0x1da)](_0x31bc41(0xb4));});}}),tgBot[_0xc29989(0x24d)](/\/names/,_0x1cf73d=>{const _0x28f7a1=_0xc29989;if(!validateTelegram(_0x1cf73d))return;let _0x2a8f26='';config['forEach'](_0x602b55=>{const _0x479ff3=_0x4850;_0x2a8f26+=_0x479ff3(0x19a)+_0x602b55[_0x479ff3(0x115)]+':\x20'+_0x602b55[_0x479ff3(0x252)]+'\x0a';}),tgBot['sendMessage'](_0x1cf73d[_0x28f7a1(0xff)]['id'],_0x2a8f26,{'parse_mode':_0x28f7a1(0x23e)})['catch'](_0x417356=>{telegramError(_0x417356);});}),tgBot['onText'](/\/disable/,_0x487df8=>{const _0x38ed07=_0xc29989;if(!validateTelegram(_0x487df8))return;tgBot[_0x38ed07(0x1c6)](_0x487df8[_0x38ed07(0xff)]['id'],_0x38ed07(0xf1))[_0x38ed07(0x18f)](_0x7812b4=>{telegramError(_0x7812b4);}),updateSetting('telegramEnabled',![]);}),tgBot['onText'](/\/help/,_0x158571=>{const _0x148b37=_0xc29989;if(!validateTelegram(_0x158571))return;tgBot[_0x148b37(0x1c6)](_0x158571[_0x148b37(0xff)]['id'],_0x17c7e4)[_0x148b37(0x18f)](_0x4ac81a=>{telegramError(_0x4ac81a);});}),tgBot['on'](_0xc29989(0x246),_0x14fb1d=>{const _0x2d8a73=_0xc29989;_0x14fb1d[_0x2d8a73(0x15c)]()[_0x2d8a73(0x1ae)](_0x2d8a73(0x231))&&(logger['full'](_0x2d8a73(0x1f8)),tgBot[_0x2d8a73(0x12d)](),tgBot=null,io['to'](_0x2d8a73(0xdb))['emit'](_0x2d8a73(0x101),_0x2d8a73(0x1f8)));}),process['once'](_0xc29989(0x254),()=>{const _0x375069=_0xc29989;if(tgBot)tgBot[_0x375069(0x12d)]();process[_0x375069(0x228)](0x1);}),process[_0xc29989(0x21d)](_0xc29989(0x14f),()=>{const _0x3e5e9b=_0xc29989;if(tgBot)tgBot['stopPolling']();process[_0x3e5e9b(0x228)](0x1);});}}function disableTelegram(){const _0xc0ca9=_0xe6c9d6;tgBot&&(tgBot[_0xc0ca9(0x12d)](),tgBot=null);}function sendTelegram(_0x4c8050,_0x18f67d){const _0x55408d=_0xe6c9d6;if(settings[_0x55408d(0x24b)]){if(settings[_0x55408d(0xbd)]==_0x55408d(0x225)||(_0x18f67d[_0x55408d(0x145)]==_0x55408d(0x10b)||_0x18f67d['type']=='warning'||_0x18f67d['type']=='success')&&settings[_0x55408d(0xbd)]==_0x55408d(0x19f)||_0x18f67d[_0x55408d(0x145)]==_0x55408d(0x22a)&&settings['telegramEvents']==_0x55408d(0xd4)){if(tgBot&&settings[_0x55408d(0x1cb)]){if(_0x18f67d[_0x55408d(0x140)])tgBot[_0x55408d(0x1c6)](settings[_0x55408d(0x1cb)],_0x18f67d[_0x55408d(0x252)]+_0x55408d(0x11a)+_0x18f67d[_0x55408d(0xac)])[_0x55408d(0x18f)](_0x42f095=>{telegramError(_0x42f095);});else tgBot['sendMessage'](settings[_0x55408d(0x1cb)],'Bot\x20'+_0x4c8050+'\x20>\x20'+_0x18f67d[_0x55408d(0xac)])['catch'](_0x510e1c=>{telegramError(_0x510e1c);});}}}}async function sendTelegramMsg(_0x436af5,_0x36c71a='HTML'){const _0x3987b5=_0xe6c9d6;return settings[_0x3987b5(0x24b)]&&tgBot&&settings[_0x3987b5(0x1cb)]?(await tgBot[_0x3987b5(0x1c6)](settings['telegramChatId'],_0x436af5,{'parse_mode':_0x36c71a})[_0x3987b5(0x18f)](_0x66298d=>{telegramError(_0x66298d);}),!![]):![];}function getDeviceWithIp(_0x59750d){const _0x41ead9=_0xe6c9d6;return devices[_0x41ead9(0x1ac)](_0x373b08=>_0x373b08['ip']===_0x59750d);}function temporaryAccess2FA(_0x4ed765,_0x2d445f){const _0x43df92=_0xe6c9d6;let _0x2bb644=new Date(),_0x97a09b=![];if(lastIpApproval){if(_0x2bb644-lastIpApproval<0x1388)_0x97a09b=!![];}lastIpApproval=new Date();if(_0x97a09b)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x43df92(0x1da)](_0x43df92(0xb4)),tgBot[_0x43df92(0x1c6)](settings[_0x43df92(0x1cb)],_0x43df92(0x176)+normalizeIP(_0x2d445f)[_0x43df92(0x241)]+_0x43df92(0x171),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x43df92(0x1a8),'callback_data':'15'},{'text':_0x43df92(0x20b),'callback_data':'30'},{'text':'reject','callback_data':_0x43df92(0xc9)}]]}})['catch'](_0x152d9e=>{telegramError(_0x152d9e);}),tgBot['on']('callback_query',async _0x308960=>{const _0x339cd1=_0x43df92,_0x412522=_0x308960[_0x339cd1(0x146)],_0x4d5e5f=_0x308960[_0x339cd1(0x111)];tgBot[_0x339cd1(0x1a9)](_0x308960['id'])[_0x339cd1(0x23c)](async()=>{const _0x116f40=_0x339cd1;devices[_0x4ed765][_0x116f40(0x170)]={'clientip':_0x2d445f,'timestamp':new Date()[_0x116f40(0x20c)](),'expiry':_0x412522},_0x412522!='reject'?(await tgBot[_0x116f40(0x1c6)](_0x4d5e5f['chat']['id'],_0x116f40(0x113)+_0x412522+_0x116f40(0x164),{'parse_mode':_0x116f40(0x23e)})[_0x116f40(0x18f)](_0x3a18d0=>{telegramError(_0x3a18d0);}),io['to'](_0x4ed765)[_0x116f40(0xeb)](_0x116f40(0x1b5),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x116f40(0x1c6)](_0x4d5e5f['chat']['id'],'Temporary\x20access\x20rejected')['catch'](_0x2e90c7=>{telegramError(_0x2e90c7);}),io['to'](_0x4ed765)[_0x116f40(0xeb)](_0x116f40(0x1b5),{'access':{'allow':![],'reason':_0x116f40(0x17b),'token':null}}));}),tgBot['removeListener'](_0x339cd1(0xb4));}));}function loginAccess2FA(_0x3145cd,_0x149e70){const _0x349b1c=_0xe6c9d6;tgBot&&settings[_0x349b1c(0x1cb)]&&(tgBot['removeListener'](_0x349b1c(0xb4)),tgBot['sendMessage'](settings[_0x349b1c(0x1cb)],_0x349b1c(0x18a)+normalizeIP(_0x149e70)[_0x349b1c(0x241)]+_0x349b1c(0x171),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x349b1c(0xc9),'callback_data':_0x349b1c(0xc9)}]]}})[_0x349b1c(0x18f)](_0x58c094=>{telegramError(_0x58c094);}),tgBot['on']('callback_query',async _0x4c5b9c=>{const _0x2cfd61=_0x349b1c,_0x20b991=_0x4c5b9c['data'],_0x1b77b3=_0x4c5b9c[_0x2cfd61(0x111)];tgBot[_0x2cfd61(0x1a9)](_0x4c5b9c['id'])[_0x2cfd61(0x23c)](async()=>{const _0x1e3fd2=_0x2cfd61;devices[_0x3145cd][_0x1e3fd2(0x1e6)]={'clientip':_0x149e70,'timestamp':new Date()[_0x1e3fd2(0x20c)](),'expiry':_0x20b991},_0x20b991!=_0x1e3fd2(0xc9)?(await tgBot[_0x1e3fd2(0x1c6)](_0x1b77b3['chat']['id'],_0x1e3fd2(0x202),{'parse_mode':_0x1e3fd2(0x23e)})['catch'](_0x2bb888=>{telegramError(_0x2bb888);}),io['to'](_0x3145cd)[_0x1e3fd2(0xeb)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x1e3fd2(0x1c6)](_0x1b77b3[_0x1e3fd2(0xff)]['id'],_0x1e3fd2(0x15f))['catch'](_0x5c7328=>{telegramError(_0x5c7328);}),io['to'](_0x3145cd)[_0x1e3fd2(0xeb)](_0x1e3fd2(0x1b5),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x2cfd61(0xb4));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2faffc=_0xe6c9d6;return dbConfig[_0x2faffc(0x10d)](_0x2faffc(0x151))[_0x2faffc(0xaa)](_0x2faffc(0x115))[_0x2faffc(0x20a)]({'status':_0x2faffc(0x14b)})['value']()||[];}function getDisabledBots(){const _0x46f538=_0xe6c9d6;return dbConfig['get'](_0x46f538(0x151))[_0x46f538(0xaa)](_0x46f538(0x115))[_0x46f538(0x20a)]({'status':'disabled'})[_0x46f538(0x239)]()||[];}function getBotAttributes(_0x488527){const _0x32ee03=_0xe6c9d6;let _0x377a85={};const _0x2712c5=configpath+_0x32ee03(0x1d9)+_0x488527+_0x32ee03(0x261),_0x24cb31=fs[_0x32ee03(0x245)](_0x2712c5);if(_0x24cb31){const _0x371c6f=fs[_0x32ee03(0x189)](_0x2712c5);try{const _0x42559e=JSON[_0x32ee03(0x10e)](_0x371c6f),_0x4de880=_0x42559e?_0x42559e[_0x32ee03(0x198)][0x0]['headless']:![];_0x377a85[_0x32ee03(0x186)]=_0x4de880?_0x32ee03(0x163):_0x32ee03(0xd3),_0x377a85['botname']=_0x42559e?_0x42559e['bot'][0x0][_0x32ee03(0x252)]:_0x32ee03(0x19a)+_0x488527;}catch(_0x83e9ad){_0x377a85['mode']=_0x32ee03(0xd3),_0x377a85[_0x32ee03(0x252)]=_0x32ee03(0x19a)+_0x488527;}}else _0x377a85[_0x32ee03(0x186)]=_0x32ee03(0xd3),_0x377a85['botname']=_0x32ee03(0x19a)+_0x488527;return _0x377a85;}function getBotsWithMode(){const _0x27fadf=_0xe6c9d6,_0x16baa2=dbConfig['get'](_0x27fadf(0x151))[_0x27fadf(0xaa)](_0x27fadf(0x115))['value']()||[];return _0x16baa2[_0x27fadf(0x1ed)](_0x8cb7eb=>{const _0x1b0127=_0x27fadf;let _0x64bb=getBotAttributes(_0x8cb7eb['botID']);_0x8cb7eb[_0x1b0127(0x186)]=_0x64bb['mode'];}),_0x16baa2;}function getBotExchanges(){const _0x2723d6=_0xe6c9d6;let _0x299253=[];const _0x599a82=dbConfig[_0x2723d6(0x10d)](_0x2723d6(0x151))[_0x2723d6(0xaa)](_0x2723d6(0x115))['value']()||[];_0x599a82[_0x2723d6(0x1ed)](_0x59786c=>{const _0x5be2a0=_0x2723d6;if(_0x59786c[_0x5be2a0(0x1b5)]==_0x5be2a0(0x14b)){const _0x56dfb2=configpath+_0x5be2a0(0x1d9)+_0x59786c[_0x5be2a0(0x115)]+'-config.json',_0x787876=fs[_0x5be2a0(0x245)](_0x56dfb2);let _0x2f4154;if(_0x787876){const _0x36e518=fs[_0x5be2a0(0x189)](_0x56dfb2);try{const _0x45f6dc=JSON[_0x5be2a0(0x10e)](_0x36e518);_0x2f4154=_0x45f6dc?_0x45f6dc[_0x5be2a0(0x198)][0x0][_0x5be2a0(0x9f)]:null;}catch(_0x56584e){}}if(_0x2f4154)_0x299253[_0x5be2a0(0xbe)](_0x2f4154);}});const _0x128454=[...new Set(_0x299253)][_0x2723d6(0xea)]();return _0x128454;}async function initUser(){const _0x59633d=_0xe6c9d6;if(!settings[_0x59633d(0xe4)]){const _0x247265=uuidRandom();mixpanel[_0x59633d(0x23b)](_0x247265),updateSetting(_0x59633d(0xe4),_0x247265);}}async function initSecure(){const _0xbdbf39=_0xe6c9d6;let _0x4c8208=getSecure();if(!_0x4c8208[_0xbdbf39(0x24f)](_0xbdbf39(0xd6))){let _0x5214f1=await generateKeys();_0x4c8208[_0xbdbf39(0x264)]=_0x5214f1['publicKey'],_0x4c8208[_0xbdbf39(0x126)]=_0x5214f1['privateKey'],_0x4c8208[_0xbdbf39(0xd6)]=crypto[_0xbdbf39(0x123)](0x20)[_0xbdbf39(0x15c)](_0xbdbf39(0x19c));;storeSecure(_0x4c8208);}}function getSettings(){const _0x1c49b8=_0xe6c9d6;return dbSettings[_0x1c49b8(0x10d)](_0x1c49b8(0xae))[_0x1c49b8(0x239)]()||{};}function getSecure(){const _0x360f19=_0xe6c9d6;return dbSecure[_0x360f19(0x10d)]('secure')[_0x360f19(0x239)]()||{};}function getBlacklist(){const _0x2d4111=_0xe6c9d6;return dbSecure[_0x2d4111(0x10d)](_0x2d4111(0x179))[_0x2d4111(0x239)]()||[];}function broadcastToBots(_0x5d20ae,_0x16e995){const _0x2ebb83=_0xe6c9d6;config[_0x2ebb83(0x1ed)](_0x2132de=>{const _0x737256=_0x2ebb83;if(_0x2132de[_0x737256(0x1b5)]=='enabled'&&_0x2132de[_0x737256(0x1cd)]==_0x737256(0x1ab)||_0x2132de[_0x737256(0x1b5)]==_0x737256(0x143)&&_0x2132de['live']==_0x737256(0x1ab)){if(pid[_0x2132de[_0x737256(0x115)]])pid[_0x2132de[_0x737256(0x115)]][_0x737256(0x13c)]({[_0x5d20ae]:_0x16e995});}});}function storeSettings(_0x1f3965,_0x527fbe=![]){const _0xe31eaa=_0xe6c9d6;_0x1f3965={...settings,..._0x1f3965};if(_0x527fbe&&_0x1f3965[_0xe31eaa(0xf8)]!=_0xe31eaa(0x168)&&_0x1f3965[_0xe31eaa(0xf8)]!=_0xe31eaa(0xc0)&&_0x1f3965[_0xe31eaa(0xf8)]!=''){const _0x45fae2=crypt['decrypt'](secure[_0xe31eaa(0x126)],_0x1f3965[_0xe31eaa(0xf8)])[_0xe31eaa(0x111)][_0xe31eaa(0x21c)]('@')[0x0],_0x48f01d=bcrypt[_0xe31eaa(0x18b)](_0x45fae2,saltRounds);_0x1f3965={..._0x1f3965,'bbPassword':_0x48f01d};}if(_0x527fbe&&_0x1f3965[_0xe31eaa(0x1c9)]!=_0xe31eaa(0x168)&&_0x1f3965[_0xe31eaa(0x1c9)]!=_0xe31eaa(0xc0)&&_0x1f3965[_0xe31eaa(0x1c9)]!=''){const _0x53b4ba=crypt[_0xe31eaa(0x221)](secure['privateKey'],_0x1f3965[_0xe31eaa(0x1c9)])[_0xe31eaa(0x111)]['split']('@')[0x0];_0x1f3965={..._0x1f3965,'telegramToken':_0x53b4ba};}const _0x3995d4=_0x1f3965[_0xe31eaa(0x1c9)]!=_0xe31eaa(0x168)&&_0x1f3965['telegramToken']!=settings['telegramToken']||_0x1f3965['telegramUsername']!=settings[_0xe31eaa(0x16f)],_0x48fd10=_0x1f3965['telegramToken']==''||_0x1f3965[_0xe31eaa(0x16f)]=='';if(_0x3995d4)_0x1f3965[_0xe31eaa(0xbd)]=_0xe31eaa(0x225);for(const [_0x5a0c7a,_0x55df49]of Object['entries'](_0x1f3965)){if(_0x5a0c7a==_0xe31eaa(0x1c9)&&_0x55df49==_0xe31eaa(0x168)){_0x1f3965[_0xe31eaa(0x1c9)]=settings[_0xe31eaa(0x1c9)];continue;};if(_0x5a0c7a==_0xe31eaa(0xf8)&&_0x55df49==_0xe31eaa(0x168)){_0x1f3965['bbPassword']=settings[_0xe31eaa(0xf8)];continue;};dbSettings[_0xe31eaa(0xf7)](_0xe31eaa(0x1c5)+_0x5a0c7a,_0x55df49)[_0xe31eaa(0x210)]();}settings=_0x1f3965,io['to'](_0xe31eaa(0xdb))[_0xe31eaa(0xeb)](_0xe31eaa(0xae),cleanSettings()),broadcastToBots('timeshift',settings[_0xe31eaa(0x18d)]),broadcastToBots(_0xe31eaa(0x11c),settings[_0xe31eaa(0x11c)]);if(_0x3995d4&&!_0x48fd10)initTelegram();if(_0x3995d4&&_0x48fd10)disableTelegram();getAllClients()[_0xe31eaa(0x1ed)](_0x422d68=>{const _0xfa1919=_0xe31eaa;getSocket(_0x422d68['id'])['emit'](_0xfa1919(0x1b5),{'access':{'allow':![],'reason':_0xfa1919(0x11f),'token':null}});});}function updateSetting(_0x34c687,_0x45c3ef){const _0x1b3257=_0xe6c9d6;dbSettings[_0x1b3257(0xf7)](_0x1b3257(0x1c5)+_0x34c687,_0x45c3ef)[_0x1b3257(0x210)](),settings=getSettings(),io['to'](_0x1b3257(0xdb))[_0x1b3257(0xeb)](_0x1b3257(0xae),cleanSettings());}function storeSecure(_0x5f5828){const _0x4ea116=_0xe6c9d6;dbSecure['get'](_0x4ea116(0x1f9))[_0x4ea116(0xbe)](_0x5f5828)[_0x4ea116(0x210)](),secure=_0x5f5828;}function addBlacklist(_0x4ef745){const _0x5dcfde=_0xe6c9d6;cleanBlacklist();let _0x36438b;devices[_0x4ef745][_0x5dcfde(0x170)]?_0x36438b=Math[_0x5dcfde(0x21e)](devices[_0x4ef745]['telegramIpApproval'][_0x5dcfde(0x229)],loginExpiry):_0x36438b=loginExpiry,dbSecure['get']('blacklist')['push']({'expiry':new Date()[_0x5dcfde(0x20c)]()+_0x36438b*0x3c*0x3e8,'token':devices[_0x4ef745]['access']['token']})[_0x5dcfde(0x210)](),blacklist=dbSecure[_0x5dcfde(0x10d)](_0x5dcfde(0x179))['value']();}function cleanBlacklist(){const _0x933470=_0xe6c9d6;let _0x2e7510=dbSecure[_0x933470(0x10d)](_0x933470(0x179))[_0x933470(0xb1)]()[_0x933470(0x239)](),_0x2cbec5=new Date()[_0x933470(0x20c)]();_0x2e7510[_0x933470(0x1ed)](_0x26fc52=>{const _0x444bf8=_0x933470;_0x26fc52[_0x444bf8(0x229)]<_0x2cbec5&&dbSecure['get'](_0x444bf8(0x179))[_0x444bf8(0x121)]({'expiry':_0x26fc52[_0x444bf8(0x229)]})[_0x444bf8(0x210)]();});}function initStates(){const _0x1af401=_0xe6c9d6;let _0x273bdd=getConfiguration();_0x273bdd[_0x1af401(0x1ed)](_0x443eda=>{const _0x4aba79=_0x1af401;_0x443eda[_0x4aba79(0x1cd)]=_0x4aba79(0x157);}),storeConfiguration(_0x273bdd);}function onKeys(){const _0x13ce55=new RSA();return new Promise(_0x124dd1=>{const _0x652e01=_0x4850;_0x13ce55[_0x652e01(0x1f0)]()[_0x652e01(0x23c)](_0x455f5c=>{_0x124dd1(_0x455f5c);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x49cbe1=_0xe6c9d6;let _0x515dbc=getSettings(),_0x332bc3=![];!_0x515dbc['hasOwnProperty']('lastmsgtelegram')&&(_0x515dbc['lastmsgtelegram']=0x0,_0x332bc3=!![]);!_0x515dbc[_0x49cbe1(0x24f)]('lastmsgemitted')&&(_0x515dbc[_0x49cbe1(0x1e3)]=0x0,_0x332bc3=!![]);!_0x515dbc[_0x49cbe1(0x24f)]('latestversion')&&(_0x515dbc[_0x49cbe1(0x13b)]='0.0.0',_0x332bc3=!![]);!_0x515dbc['hasOwnProperty']('onepagemode')&&(_0x515dbc[_0x49cbe1(0x11c)]=![],_0x332bc3=!![]);if(_0x332bc3)storeSettings(_0x515dbc);}function storeConfiguration(_0x2405e1){const _0x1a9527=_0xe6c9d6;dbConfig[_0x1a9527(0x10d)](_0x1a9527(0x151))['remove']()[_0x1a9527(0x210)](),_0x2405e1[_0x1a9527(0x1ed)](_0xc70db=>{delete _0xc70db['mode'];}),dbConfig[_0x1a9527(0x10d)]('bots')[_0x1a9527(0xbe)](..._0x2405e1)[_0x1a9527(0x210)](),config=_0x2405e1;}function resetPassword(){const _0x3a0769=_0xe6c9d6;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x3a0769(0xb4)),tgBot[_0x3a0769(0x1c6)](settings[_0x3a0769(0x1cb)],_0x3a0769(0xb8),{'parse_mode':_0x3a0769(0x23e),'reply_markup':{'inline_keyboard':[[{'text':_0x3a0769(0x104),'callback_data':_0x3a0769(0x104)},{'text':'no','callback_data':'no'}]]}})[_0x3a0769(0x18f)](_0x401a4c=>{telegramError(_0x401a4c);}),tgBot['on']('callback_query',async _0x5c1d30=>{const _0x54a003=_0x3a0769,_0x554b24=_0x5c1d30[_0x54a003(0x146)],_0x3f69a3=_0x5c1d30[_0x54a003(0x111)];tgBot[_0x54a003(0x1a9)](_0x5c1d30['id'])[_0x54a003(0x23c)](async()=>{const _0x50903c=_0x54a003;if(_0x554b24!='no'){const _0x1c3d37=0xf,_0x21997e=_0x50903c(0x192),_0x214f2e=Array[_0x50903c(0x219)](crypto[_0x50903c(0xe0)](new Uint32Array(_0x1c3d37)))['map'](_0xa764f2=>_0x21997e[_0xa764f2%_0x21997e[_0x50903c(0xfb)]])[_0x50903c(0x185)](''),_0x2d3ef7=bcrypt[_0x50903c(0x18b)](_0x214f2e,saltRounds);storeSettings({'bbPassword':_0x2d3ef7}),await tgBot[_0x50903c(0x1c6)](_0x3f69a3[_0x50903c(0xff)]['id'],_0x50903c(0x12a)+_0x214f2e,{'parse_mode':_0x50903c(0x23e)})[_0x50903c(0x18f)](_0x1407fc=>{telegramError(_0x1407fc);});}else await tgBot['sendMessage'](_0x3f69a3[_0x50903c(0xff)]['id'],_0x50903c(0x195))[_0x50903c(0x18f)](_0x1e6248=>{telegramError(_0x1e6248);});}),tgBot['removeListener'](_0x54a003(0xb4));}));}async function confirmRestore(_0x1e2fd1,_0x30ec22){const _0x48d366=_0xe6c9d6;io['to'](_0x48d366(0xdb))[_0x48d366(0xeb)](_0x48d366(0x101),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot',_0x48d366(0x1a4)),tgBot&&settings['telegramChatId']&&(tgBot[_0x48d366(0x1da)](_0x48d366(0xb4)),await tgBot[_0x48d366(0x1c6)](settings[_0x48d366(0x1cb)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0x48d366(0x23e),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x48d366(0x104)},{'text':'no','callback_data':'no'}]]}})[_0x48d366(0x18f)](_0x81682b=>{telegramError(_0x81682b);}),tgBot['on'](_0x48d366(0xb4),async _0x4638e8=>{const _0x1c0f27=_0x48d366,_0x102e93=_0x4638e8[_0x1c0f27(0x146)],_0x2d675f=_0x4638e8[_0x1c0f27(0x111)];tgBot[_0x1c0f27(0x1a9)](_0x4638e8['id'])[_0x1c0f27(0x23c)](async()=>{const _0x468f60=_0x1c0f27;_0x102e93==_0x468f60(0x104)?(await tgBot[_0x468f60(0x1c6)](_0x2d675f['chat']['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x468f60(0x23e)})['catch'](_0x4fd179=>{telegramError(_0x4fd179);}),unzipFile(_0x1e2fd1,_0x30ec22)):(logger['debug']('Restore\x20process\x20aborted'),await tgBot[_0x468f60(0x1c6)](_0x2d675f[_0x468f60(0xff)]['id'],_0x468f60(0x9e))[_0x468f60(0x18f)](_0x4e1bda=>{telegramError(_0x4e1bda);}));}),tgBot[_0x1c0f27(0x1da)](_0x1c0f27(0xb4));}));}function getServerTime(){const _0x79b40b=_0xe6c9d6,_0x2f2565=new Date();return _0x2f2565['getFullYear']()+'/'+(_0x2f2565['getMonth']()+0x1)['toString']()[_0x79b40b(0xf4)](0x2,'0')+'/'+_0x2f2565[_0x79b40b(0x1fb)]()['toString']()[_0x79b40b(0xf4)](0x2,'0')+'\x20'+_0x2f2565[_0x79b40b(0x124)]()[_0x79b40b(0x15c)]()['padStart'](0x2,'0')+':'+_0x2f2565[_0x79b40b(0x217)]()[_0x79b40b(0x15c)]()[_0x79b40b(0xf4)](0x2,'0')+':'+_0x2f2565[_0x79b40b(0xe8)]()['toString']()[_0x79b40b(0xf4)](0x2,'0');}function getTimeStamp(){const _0x3a0a2b=_0xe6c9d6,_0x7f8a2a=shiftedTime();return _0x7f8a2a[_0x3a0a2b(0x1be)]()+'/'+(_0x7f8a2a['getMonth']()+0x1)[_0x3a0a2b(0x15c)]()[_0x3a0a2b(0xf4)](0x2,'0')+'/'+_0x7f8a2a['getDate']()[_0x3a0a2b(0x15c)]()['padStart'](0x2,'0')+'\x20'+_0x7f8a2a[_0x3a0a2b(0x124)]()[_0x3a0a2b(0x15c)]()[_0x3a0a2b(0xf4)](0x2,'0')+':'+_0x7f8a2a[_0x3a0a2b(0x217)]()[_0x3a0a2b(0x15c)]()[_0x3a0a2b(0xf4)](0x2,'0')+':'+_0x7f8a2a[_0x3a0a2b(0xe8)]()['toString']()[_0x3a0a2b(0xf4)](0x2,'0');}function getCleanTimeStamp(){const _0x1e8a0e=_0xe6c9d6,_0x253f45=shiftedTime();return _0x253f45[_0x1e8a0e(0x1be)]()+(_0x253f45['getMonth']()+0x1)[_0x1e8a0e(0x15c)]()[_0x1e8a0e(0xf4)](0x2,'0')+_0x253f45[_0x1e8a0e(0x1fb)]()[_0x1e8a0e(0x15c)]()[_0x1e8a0e(0xf4)](0x2,'0')+'-'+_0x253f45['getHours']()[_0x1e8a0e(0x15c)]()['padStart'](0x2,'0')+_0x253f45['getMinutes']()[_0x1e8a0e(0x15c)]()[_0x1e8a0e(0xf4)](0x2,'0')+_0x253f45[_0x1e8a0e(0xe8)]()[_0x1e8a0e(0x15c)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x17607b=_0xe6c9d6,_0x6ee613=new Date();let _0x500763=_0x6ee613;if(settings[_0x17607b(0x18d)]&&settings[_0x17607b(0x18d)]!==0x0)_0x500763=fns[_0x17607b(0xcf)](_0x6ee613,{'hours':settings[_0x17607b(0x18d)]});return _0x500763;}function startScheduler(){const _0x1c92c8=_0xe6c9d6,_0x228ef0=new Date()[_0x1c92c8(0x9c)](),_0x42494e=shiftedTime()[_0x1c92c8(0x124)]();_0x42494e==0x4&&backupConfigFiles();_0x42494e==0x0&&rotateLogFiles();_0x228ef0%0x6==0x0&&triggerAnalytics();_0x228ef0%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0xbe4cd9){const _0x27afa9=_0xe6c9d6;logger['debug'](_0x27afa9(0x21a)+_0xbe4cd9);const _0x1bb64c=getBotsWithMode();_0x1bb64c[_0x27afa9(0xfb)]>0x0?confirmRestore(configbackuppath,_0xbe4cd9):unzipFile(configbackuppath,_0xbe4cd9);}async function getBackupFiles(_0x90e4c9=null){const _0x59891d=_0xe6c9d6;let _0xfe0e62=[],_0x50d447=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x50d447[_0x59891d(0xea)]((_0x117a42,_0x437323)=>_0x117a42[_0x59891d(0x242)]<_0x437323[_0x59891d(0x242)]?0x1:_0x437323[_0x59891d(0x242)]<_0x117a42[_0x59891d(0x242)]?-0x1:0x0),_0x50d447[_0x59891d(0x1ed)](_0x2b1710=>{const _0x46d622=_0x59891d;if(!_0x2b1710[_0x46d622(0x224)]()&&_0x2b1710[_0x46d622(0x242)][_0x46d622(0x9d)]('backup-full@')&&_0x2b1710[_0x46d622(0x242)]['endsWith'](_0x46d622(0x1bb))){const _0x37ff78=formatDate(fs['statSync'](configbackuppath+_0x2b1710[_0x46d622(0x242)])['mtime']);_0xfe0e62[_0x46d622(0xbe)]({'name':_0x2b1710[_0x46d622(0x242)],'mtime':_0x37ff78});}});if(_0x90e4c9)io['to'](_0x90e4c9)['emit'](_0x59891d(0x116),_0xfe0e62);else return _0xfe0e62;}async function backupConfigFiles(){const _0xfabcc7=_0xe6c9d6;await zipFiles(_0xfabcc7(0x18c));const _0x45ae18=getCleanTimeStamp();fs['copyFileSync'](zippath+_0xfabcc7(0x148),configbackuppath+('backup-full@'+_0x45ae18+_0xfabcc7(0x1bb)));let _0x30097e=fs[_0xfabcc7(0x208)](configbackuppath,{'withFileTypes':!![]});_0x30097e['sort']((_0x4a2763,_0x3f862c)=>_0x4a2763[_0xfabcc7(0x242)]<_0x3f862c['name']?0x1:_0x3f862c[_0xfabcc7(0x242)]<_0x4a2763[_0xfabcc7(0x242)]?-0x1:0x0),_0x30097e[_0xfabcc7(0xfb)]>maxBackups&&fs[_0xfabcc7(0x162)](configbackuppath+_0x30097e[maxBackups][_0xfabcc7(0x242)]);}function rotateLogFiles(){const _0x171cb2=_0xe6c9d6,_0x2f450f=fs[_0x171cb2(0x15b)](logspath+_0x171cb2(0x1e7)),_0x370863=_0x2f450f[_0x171cb2(0x1aa)]/0x400;if(_0x370863>0x64){let _0x41d72c=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x41d72c['sort']((_0x587d20,_0x1aa49a)=>_0x587d20['name']<_0x1aa49a[_0x171cb2(0x242)]?0x1:_0x1aa49a[_0x171cb2(0x242)]<_0x587d20[_0x171cb2(0x242)]?-0x1:0x0),_0x41d72c[_0x171cb2(0x1ed)](_0x5e530e=>{const _0x3c11bb=_0x171cb2;if(_0x5e530e['name']==_0x3c11bb(0x134))fs['copyFileSync'](logspath+_0x5e530e['name'],logspath+_0x3c11bb(0x233));if(_0x5e530e[_0x3c11bb(0x242)]==_0x3c11bb(0x10f))fs['copyFileSync'](logspath+_0x5e530e[_0x3c11bb(0x242)],logspath+_0x3c11bb(0x134));_0x5e530e['name']==_0x3c11bb(0x1e7)&&(fs[_0x3c11bb(0x1b9)](logspath+_0x5e530e[_0x3c11bb(0x242)],logspath+_0x3c11bb(0x10f)),fs[_0x3c11bb(0x1d5)](logspath+_0x5e530e[_0x3c11bb(0x242)],''));});}}async function zipFiles(_0x115b25){const _0x1f0a68=_0xe6c9d6;let _0x20df39;if(_0x115b25=='logs')_0x20df39=logspath;if(_0x115b25=='backup')_0x20df39=configpath;if(_0x115b25==_0x1f0a68(0x18c))_0x20df39=configpath;let _0x48d995=fs['readdirSync'](_0x20df39,{'withFileTypes':!![]});const _0x4e7797=new require('node-zip')();_0x48d995[_0x1f0a68(0x1ed)](_0x58957d=>{const _0x129229=_0x1f0a68;if(!_0x58957d[_0x129229(0x224)]()){let _0x30f1cd=fs[_0x129229(0x189)](_0x20df39+_0x58957d[_0x129229(0x242)]);if(_0x115b25==_0x129229(0x212)){const _0x38b0dc=/^bot-[0-9]{3}-config.json$/,_0x4c21d5=_0x38b0dc[_0x129229(0x19e)](_0x58957d[_0x129229(0x242)]);if(_0x4c21d5){const _0x956e0c=JSON[_0x129229(0x10e)](_0x30f1cd);if(_0x956e0c[_0x129229(0x198)][0x0]){_0x956e0c['bot'][0x0][_0x129229(0x251)]=_0x129229(0xc0),_0x956e0c[_0x129229(0x198)][0x0][_0x129229(0x144)]=_0x129229(0xc0);if(_0x956e0c['bot'][0x0]['apiPassword'])_0x956e0c[_0x129229(0x198)][0x0][_0x129229(0x23a)]=_0x129229(0xc0);}_0x30f1cd=JSON[_0x129229(0x214)](_0x956e0c,null,0x2);}if(_0x58957d['name']==_0x129229(0x218)){const _0x38dd35=JSON[_0x129229(0x10e)](_0x30f1cd);if(_0x38dd35[_0x129229(0xae)][_0x129229(0x120)])_0x38dd35['settings'][_0x129229(0x120)]=![];if(_0x38dd35[_0x129229(0xae)]['bbPassword'])_0x38dd35['settings']['bbPassword']=_0x129229(0xc0);if(_0x38dd35['settings']['telegramToken'])_0x38dd35[_0x129229(0xae)][_0x129229(0x1c9)]=_0x129229(0xc0);if(_0x38dd35[_0x129229(0xae)]['telegramChatId'])_0x38dd35['settings'][_0x129229(0x1cb)]=null;_0x30f1cd=JSON['stringify'](_0x38dd35,null,0x2);}if(_0x58957d[_0x129229(0x242)]!=_0x129229(0x13e))_0x4e7797[_0x129229(0x16b)](_0x58957d[_0x129229(0x242)],_0x30f1cd);}else _0x4e7797[_0x129229(0x16b)](_0x58957d[_0x129229(0x242)],_0x30f1cd);}});const _0xd0a1d3=_0x4e7797[_0x1f0a68(0x130)]({'base64':![],'compression':_0x1f0a68(0x262)});fs[_0x1f0a68(0x1d5)](zippath+(_0x115b25+_0x1f0a68(0x1bb)),_0xd0a1d3,_0x1f0a68(0xfe));}async function unzipFile(_0x416cf4,_0x328d7c){const _0x3def7b=_0xe6c9d6;fs[_0x3def7b(0x208)](configpath,{'withFileTypes':!![]})[_0x3def7b(0x1ed)](_0x2de337=>{const _0x234997=_0x3def7b;if(!_0x2de337['isDirectory']())fs[_0x234997(0xd0)](configpath+_0x2de337[_0x234997(0x242)]);});const _0xd6d01f=fs['readFileSync'](_0x416cf4+_0x328d7c,_0x3def7b(0xfe)),_0x108fa2=new require(_0x3def7b(0xd1))(_0xd6d01f,{'base64':![],'checkCRC32':!![]});Object[_0x3def7b(0x11e)](_0x108fa2['files'])[_0x3def7b(0x1ed)](_0x4a4a4c=>{const _0x2745ee=_0x3def7b,_0x56568b=_0x108fa2[_0x2745ee(0x25e)][_0x4a4a4c];fs[_0x2745ee(0x1d5)](configpath+_0x56568b[_0x2745ee(0x242)],_0x56568b[_0x2745ee(0x1b4)]);}),fs[_0x3def7b(0x208)](temppath,{'withFileTypes':!![]})[_0x3def7b(0x1ed)](_0x24fc5c=>{const _0x5c8f35=_0x3def7b;if(!_0x24fc5c['isDirectory']())fs['rmSync'](temppath+_0x24fc5c[_0x5c8f35(0x242)]);}),logger[_0x3def7b(0x109)](_0x3def7b(0xfa)),process[_0x3def7b(0x13c)]({'restore':!![]},_0x58b93f=>{});}async function getPublicIp(){const _0x32c30e=_0xe6c9d6;try{const _0x259b05=await axios[_0x32c30e(0x10d)](_0x32c30e(0x1b7));publicip=_0x259b05[_0x32c30e(0x146)]['ip'];}catch(_0xdcf246){}}async function triggerAnalytics(){const _0x161906=_0xe6c9d6;if(!publicip)await getPublicIp();const _0x3dcda8=getBotsWithMode();let _0x52ebf9=0x0;_0x3dcda8[_0x161906(0x1ed)](_0x4a6fb7=>{const _0x3e751d=_0x161906;if(_0x4a6fb7[_0x3e751d(0x1b5)]==='enabled')_0x52ebf9++;});const _0x4230f4=getBotExchanges();mixpanel[_0x161906(0x11d)]('Server',{'distinct_id':settings[_0x161906(0xe4)],'ip':publicip,'version':serverversion,'numbots':_0x3dcda8[_0x161906(0xfb)],'numbotsenabled':_0x52ebf9,'exchanges':_0x4230f4});}async function getMessages(){const _0xc995e8=_0xe6c9d6,_0x4fb708=_0xc995e8(0x227),_0x1f9b1a=new GraphQLClient(_0x4fb708),_0x1d4e44={'authorization':_0xc995e8(0x235)},_0x58e89a=serverversion[_0xc995e8(0x21c)]('.'),_0x17057d=_0x58e89a[0x0]+'.'+_0x58e89a[0x1],_0x35571a=Math['min'](settings[_0xc995e8(0x22c)],settings[_0xc995e8(0x1e3)]),_0x30e8d6={'last':parseInt(_0x35571a),'bbm':_0x17057d},_0xd0b796=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x1cd124;try{_0x1cd124=await _0x1f9b1a[_0xc995e8(0xe1)](_0xd0b796,_0x30e8d6,_0x1d4e44);}catch(_0x13a07b){}if(_0x1cd124&&_0x1cd124[_0xc995e8(0x1f1)]){let _0x4a2676=settings['lastmsgtelegram'];newMessages=[];for(const _0x397cf8 of _0x1cd124[_0xc995e8(0x1f1)]){newMessages['push'](_0x397cf8);if(_0x397cf8[_0xc995e8(0x147)])updateSetting('latestversion',_0x397cf8[_0xc995e8(0x147)]);let _0x46ffca=_0x397cf8[_0xc995e8(0x147)]?serverversion>=_0x397cf8[_0xc995e8(0x147)]:![];if(!_0x46ffca&&_0x397cf8[_0xc995e8(0x139)]>_0x4a2676){if(_0x397cf8['bbvReceive']==='any'||serverversion[_0xc995e8(0x9d)](_0x397cf8['bbvReceive'])){let _0x376e91=''+_0x397cf8[_0xc995e8(0x1fa)]+'\x0a\x0a'+_0x397cf8[_0xc995e8(0x111)];const _0x56b106=await sendTelegramMsg(toTelegramMarkdown(_0x376e91),_0xc995e8(0x1c3));if(_0x56b106)_0x4a2676=_0x397cf8[_0xc995e8(0x139)];}}}updateAvailable=isNewerVersion(settings[_0xc995e8(0x13b)],serverversion),updateSetting(_0xc995e8(0x22c),_0x4a2676),emitMessages();}}function emitMessages(){const _0x454630=_0xe6c9d6,_0x307791=settings['lastmsgemitted'];let _0x3a4327=[];newMessages[_0x454630(0x1ed)](_0x1c343c=>{const _0x519456=_0x454630;_0x1c343c[_0x519456(0x139)]>_0x307791&&_0x3a4327[_0x519456(0xbe)](_0x1c343c);}),_0x3a4327['length']>0x0&&getAllClients()[_0x454630(0x1ed)](_0xc5e3fe=>{const _0x11589b=_0x454630;getSocket(_0xc5e3fe['id'])[_0x11589b(0xeb)](_0x11589b(0x111),_0x3a4327);});}function confirmMessage(_0x3d3526){const _0x564a1f=_0xe6c9d6;updateSetting(_0x564a1f(0x1e3),Number(_0x3d3526));}function isNewerVersion(_0x1970a4,_0x152e8f){const _0x31d014=_0xe6c9d6,_0x4bb593=_0x152e8f[_0x31d014(0x21c)]('.'),_0x400d8f=_0x1970a4[_0x31d014(0x21c)]('.');for(var _0x4acfd4=0x0;_0x4acfd4<_0x400d8f['length'];_0x4acfd4++){const _0x253834=~~_0x400d8f[_0x4acfd4],_0x2e5708=~~_0x4bb593[_0x4acfd4];if(_0x253834>_0x2e5708)return!![];if(_0x253834<_0x2e5708)return![];}return![];}function toTelegramMarkdown(_0x691b06){const _0x293fad=_0xe6c9d6,_0x38057d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x26c746=/\*{2}(.+?)\*{2}/gim;return _0x691b06=_0x691b06['replace'](_0x38057d,_0x293fad(0xa2))[_0x293fad(0x105)](_0x26c746,'*$1*'),_0x691b06;}async function validateConfigFile(){const _0x182d53=_0xe6c9d6,_0xb3c66b=dbConfig[_0x182d53(0x10d)](_0x182d53(0x151))[_0x182d53(0xaa)]('botID')[_0x182d53(0x239)]()||[];if(_0xb3c66b[_0x182d53(0xfb)]==0x0){let _0x4c9499=0x0,_0x625f00=[];const _0x42b065=/^bot-([0-9]{3})-config.json$/,_0x2df41f=fs[_0x182d53(0x208)](configpath);_0x2df41f[_0x182d53(0x1ed)](_0x5a4a56=>{const _0x32b8c7=_0x182d53,_0x3ec9c3=_0x42b065['exec'](_0x5a4a56);if(_0x3ec9c3){const _0x450bac=_0x3ec9c3[0x1];let _0x3b22f9=getBotAttributes(_0x450bac);_0x625f00[_0x32b8c7(0xbe)]({'botID':_0x450bac,'botname':_0x3b22f9['botname'],'status':_0x32b8c7(0xbb),'live':'stopped'}),_0x4c9499++;}}),_0x4c9499!=0x0&&(dbConfig[_0x182d53(0x10d)](_0x182d53(0x151))['assign'](_0x625f00)['write'](),config=_0x625f00,restoredConfigFile=_0x4c9499);}}async function restoreConfigNotify(_0x455d75){const _0x4d9b45=_0xe6c9d6;let _0x570465;if(restoredConfigFile==0x1)_0x570465='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x570465='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x455d75)io['to']('botmanager')[_0x4d9b45(0xeb)](_0x4d9b45(0x101),_0x570465);else{logger[_0x4d9b45(0x25d)](_0x4d9b45(0x125)),logger['simple'](_0x570465),logger[_0x4d9b45(0x25d)](_0x4d9b45(0x125)),logger[_0x4d9b45(0x25d)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x4d9b45(0xbd)]!=_0x4d9b45(0xd4))tgBot[_0x4d9b45(0x1c6)](settings[_0x4d9b45(0x1cb)],'Bot\x20Mgr\x20>\x20'+_0x570465)[_0x4d9b45(0x18f)](_0x14c336=>{telegramError(_0x14c336);});}}function validateCredentials(_0x54d5fa,_0x48e6a2){const _0x51cef6=_0xe6c9d6;if(_0x54d5fa[_0x51cef6(0x20d)]==settings['bbUsername']&&bcrypt['compareSync'](_0x54d5fa[_0x51cef6(0x21f)],settings[_0x51cef6(0xf8)])){if(settings[_0x51cef6(0x13d)])return{'allow':![],'reason':_0x51cef6(0x25c),'token':null};else{const _0x8a44f5=generateLoginToken(_0x48e6a2);return{'allow':!![],'reason':_0x51cef6(0x132),'token':_0x8a44f5};}}else return{'allow':![],'reason':_0x51cef6(0xb0),'token':null};}function refreshToken(_0x193be0){const _0x1239f8=_0xe6c9d6,_0x90d5b6=generateLoginToken(_0x193be0);return{'allow':!![],'reason':_0x1239f8(0x132),'token':_0x90d5b6};}function validateAccess(_0x378528,_0x16f7d5,_0x498474){const _0x378c0e=_0xe6c9d6,_0x3e45bf=_0x498474?_0x498474:devices[_0x16f7d5]['ip'];let _0x2b1cdd;const _0x3b6682=_0x1eeade=>{const _0x11eb9f=_0x4850;if(settings[_0x11eb9f(0x120)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x16f7d5)){const _0x52906f=generateLoginToken(_0x16f7d5);return{'allow':!![],'reason':_0x11eb9f(0x223),'token':_0x52906f};}else return{'allow':![],'reason':_0x11eb9f(0x17e),'token':null};}else return _0x2b1cdd=validToken(_0x1eeade,_0x16f7d5),_0x2b1cdd[_0x11eb9f(0x24f)](_0x11eb9f(0x1a4))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1eeade}:{'allow':![],'reason':_0x11eb9f(0x17e),'token':null};}else return{'allow':!![],'reason':_0x11eb9f(0x232),'token':null};};if(settings[_0x378c0e(0x16e)]){let _0x31e436=[...settings[_0x378c0e(0x1ec)],_0x378c0e(0x14d),'::ffff:127.0.0.1',_0x378c0e(0x1b6)];if(_0x31e436[_0x378c0e(0x1ae)](_0x3e45bf))return _0x3b6682(_0x378528);else{_0x2b1cdd=validToken(_0x378528,_0x16f7d5);if(_0x2b1cdd[_0x378c0e(0x24f)]('success'))return _0x3b6682(_0x378528);else{if(telegramIpApproved(_0x16f7d5)){const _0x3aced9=generateToken(_0x16f7d5);return _0x2b1cdd=_0x3b6682(_0x378528),_0x2b1cdd['allow']?{'allow':!![],'reason':_0x378c0e(0x24a),'token':_0x3aced9}:_0x2b1cdd;}else return settings[_0x378c0e(0x136)]?{'allow':![],'reason':_0x378c0e(0x234),'token':null}:{'allow':![],'reason':_0x378c0e(0x253),'token':null};}}}else return _0x3b6682(_0x378528);}function timelyDecrypt(_0xbe7eb3,_0x1eb3a4=!![]){const _0x1ed09f=_0xe6c9d6;if(_0xbe7eb3)try{const _0x43e6c5=crypt[_0x1ed09f(0x221)](secure[_0x1ed09f(0x126)],_0xbe7eb3)[_0x1ed09f(0x111)],_0x4ee076=_0x43e6c5['split']('@')[0x0],_0x24b0c1=_0x43e6c5[_0x1ed09f(0x21c)]('@')[0x1],_0x40d0e7=new Date()['getTime']();if(_0x1eb3a4){if(_0x40d0e7-_0x24b0c1<maxSecretAge*0x3e8)return _0x4ee076;else return![];}else return _0x4ee076;}catch(_0x41da19){return![];}else return![];}const validToken=(_0x35f9e5,_0x1ac255)=>{const _0x77e325=_0xe6c9d6,_0x2087e8=devices[_0x1ac255]['ip'];if(!_0x35f9e5)return{'error':_0x77e325(0xe9)};for(let _0x4801f7 of blacklist){if(_0x4801f7[_0x77e325(0x183)]==_0x35f9e5)return{'error':_0x77e325(0xaf)};}let _0x36046b;try{_0x36046b=jwt[_0x77e325(0x1e2)](_0x35f9e5,secure[_0x77e325(0xd6)]+_0x1ac255);}catch{return{'error':_0x77e325(0x1ce)};}if(!_0x36046b[_0x77e325(0x24f)]('clientip')&&!_0x36046b[_0x77e325(0x24f)]('username')||!_0x36046b['hasOwnProperty'](_0x77e325(0x250)))return{'error':_0x77e325(0x1d4)};if(!_0x36046b['hasOwnProperty']('username')&&_0x36046b[_0x77e325(0x24f)]('clientip')){const {clientip:_0x3a1765}=_0x36046b;return _0x2087e8==_0x3a1765?{'success':_0x77e325(0x175)}:{'error':_0x77e325(0x204)};}else{if(_0x36046b[_0x77e325(0x24f)](_0x77e325(0x20d))&&_0x36046b[_0x77e325(0x24f)](_0x77e325(0x1f7))){const {username:_0x56be5f,clientip:_0x43f410}=_0x36046b;return settings[_0x77e325(0xc4)]==_0x56be5f&&_0x2087e8==_0x43f410?{'success':_0x77e325(0x175)}:{'error':_0x77e325(0x153)};}}},generateLoginToken=_0x2064c9=>{const _0x2e559e=_0xe6c9d6;if(_0x2064c9){const _0x102ec3=devices[_0x2064c9]['ip'];return jwt[_0x2e559e(0xa4)]({'username':settings[_0x2e559e(0xc4)],'clientip':_0x102ec3},secure[_0x2e559e(0xd6)]+_0x2064c9,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4a6672=>{const _0x32be28=_0xe6c9d6;if(_0x4a6672){const _0x5c9863=devices[_0x4a6672]['ip'];return jwt['sign']({'clientip':_0x5c9863},secure[_0x32be28(0xd6)]+_0x4a6672,{'expiresIn':devices[_0x4a6672][_0x32be28(0x170)][_0x32be28(0x229)]*0x3c});}else return![];},telegramIpApproved=_0x1362dd=>{const _0x47ee5f=_0xe6c9d6;let _0x357054=![];return devices[_0x1362dd][_0x47ee5f(0x170)]&&devices[_0x1362dd][_0x47ee5f(0x170)][_0x47ee5f(0x229)]!=_0x47ee5f(0xc9)&&(_0x357054=devices[_0x1362dd][_0x47ee5f(0x170)][_0x47ee5f(0x1f7)]==devices[_0x1362dd]['ip']&&new Date()[_0x47ee5f(0x20c)]()-devices[_0x1362dd]['telegramIpApproval'][_0x47ee5f(0x1dc)]<devices[_0x1362dd][_0x47ee5f(0x170)][_0x47ee5f(0x229)]*0x3c*0x3e8),_0x357054;},telegram2FaApproved=_0x3cf3fe=>{const _0x45dd97=_0xe6c9d6;let _0x1b769c=![];return devices[_0x3cf3fe][_0x45dd97(0x1e6)]&&devices[_0x3cf3fe][_0x45dd97(0x1e6)][_0x45dd97(0x229)]!=_0x45dd97(0xc9)&&(_0x1b769c=devices[_0x3cf3fe][_0x45dd97(0x1e6)][_0x45dd97(0x1f7)]==devices[_0x3cf3fe]['ip']&&new Date()[_0x45dd97(0x20c)]()-devices[_0x3cf3fe][_0x45dd97(0x1e6)][_0x45dd97(0x1dc)]<devices[_0x3cf3fe][_0x45dd97(0x1e6)][_0x45dd97(0x229)]*0x3c*0x3e8),_0x1b769c;},normalizeIP=_0x409d1b=>{const _0x5c64b6=_0xe6c9d6;let _0x3382af=null,_0x58737d=null;if(ipaddr[_0x5c64b6(0xa9)](_0x409d1b)){const _0x58d9f3=ipaddr[_0x5c64b6(0x10e)](_0x409d1b);_0x58d9f3['kind']()===_0x5c64b6(0xde)?(_0x58d9f3[_0x5c64b6(0x1c4)]()&&(_0x3382af=_0x58d9f3[_0x5c64b6(0x238)]()[_0x5c64b6(0x15c)]()),_0x58737d=_0x58d9f3[_0x5c64b6(0x15c)]()):(_0x3382af=_0x58d9f3['toString'](),_0x58737d=_0x58d9f3[_0x5c64b6(0x107)]()[_0x5c64b6(0x15c)]());}return{'show':_0x3382af?_0x3382af:_0x58737d,'store':_0x58737d};};function formatDate(_0x18b274){const _0x4ac236=_0xe6c9d6;return _0x18b274[_0x4ac236(0x1be)]()+'/'+(_0x18b274[_0x4ac236(0x1b2)]()+0x1)['toString']()[_0x4ac236(0xf4)](0x2,'0')+'/'+_0x18b274['getDate']()[_0x4ac236(0x15c)]()[_0x4ac236(0xf4)](0x2,'0')+'\x20'+_0x18b274[_0x4ac236(0x124)]()[_0x4ac236(0x15c)]()[_0x4ac236(0xf4)](0x2,'0')+':'+_0x18b274[_0x4ac236(0x217)]()[_0x4ac236(0x15c)]()[_0x4ac236(0xf4)](0x2,'0')+':'+_0x18b274[_0x4ac236(0xe8)]()[_0x4ac236(0x15c)]()['padStart'](0x2,'0');}function sleep(_0x2d07ff){return new Promise(_0x28b0b0=>setTimeout(_0x28b0b0,_0x2d07ff));}