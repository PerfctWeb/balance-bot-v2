const _0x2bc2cd=_0x2e07;(function(_0x25789e,_0x171d82){const _0x4d880d=_0x2e07,_0x50e202=_0x25789e();while(!![]){try{const _0x7c2038=-parseInt(_0x4d880d(0x185))/0x1+parseInt(_0x4d880d(0xce))/0x2*(parseInt(_0x4d880d(0xb4))/0x3)+-parseInt(_0x4d880d(0x1a1))/0x4+-parseInt(_0x4d880d(0x1a5))/0x5*(-parseInt(_0x4d880d(0x1e5))/0x6)+-parseInt(_0x4d880d(0xe5))/0x7+-parseInt(_0x4d880d(0x160))/0x8*(-parseInt(_0x4d880d(0x207))/0x9)+parseInt(_0x4d880d(0x289))/0xa;if(_0x7c2038===_0x171d82)break;else _0x50e202['push'](_0x50e202['shift']());}catch(_0x5ebd4d){_0x50e202['push'](_0x50e202['shift']());}}}(_0x1881,0x7db0c));const _0x329f44=function(){let _0x5590d9=!![];return function(_0x29776e,_0xcbd1af){const _0xa9aa28=_0x5590d9?function(){const _0x5c262c=_0x2e07;if(_0xcbd1af){const _0x7341dc=_0xcbd1af[_0x5c262c(0x1ee)](_0x29776e,arguments);return _0xcbd1af=null,_0x7341dc;}}:function(){};return _0x5590d9=![],_0xa9aa28;};}(),_0x19cb94=_0x329f44(this,function(){const _0x1b8a81=_0x2e07;return _0x19cb94[_0x1b8a81(0x232)]()['search'](_0x1b8a81(0x167))['toString']()['constructor'](_0x19cb94)[_0x1b8a81(0xe0)](_0x1b8a81(0x167));});_0x19cb94();'use strict';process[_0x2bc2cd(0x11b)][_0x2bc2cd(0x10e)]=0x1;const childProcess=require(_0x2bc2cd(0x12e)),fs=require('fs'),fns=require(_0x2bc2cd(0x120)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x2bc2cd(0x20a)),Crypt=require(_0x2bc2cd(0x179))['Crypt'],RSA=require(_0x2bc2cd(0x179))[_0x2bc2cd(0x269)],bcrypt=require(_0x2bc2cd(0x209)),jwt=require(_0x2bc2cd(0x1f9)),ipaddr=require(_0x2bc2cd(0x1f4)),argv=require(_0x2bc2cd(0x143))(process[_0x2bc2cd(0x1c1)][_0x2bc2cd(0x29b)](0x2))[_0x2bc2cd(0x1c1)],uuidRandom=require(_0x2bc2cd(0x13c)),{Telegraf,Markup}=require(_0x2bc2cd(0x183)),Mixpanel=require(_0x2bc2cd(0x16d)),axios=require(_0x2bc2cd(0xd3)),{GraphQLClient,gql}=require(_0x2bc2cd(0x1a4)),util=require(_0x2bc2cd(0x142)),fileUpload=require(_0x2bc2cd(0x134)),{networkInterfaces}=require('os'),PORT=argv[_0x2bc2cd(0x151)]||_0x2bc2cd(0xfb),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x2bc2cd(0x24d)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x2bc2cd(0x28d)](0x1));const HOST=argv[_0x2bc2cd(0x287)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x2bc2cd(0x12b)]['node'];let bbpath=_0x2bc2cd(0xf7),bbpath2='';const botfile=_0x2bc2cd(0x194),configfile=_0x2bc2cd(0x26c),settingsfile=_0x2bc2cd(0x10b),securefile=_0x2bc2cd(0x12d),environment=require('./'+bbpath2+_0x2bc2cd(0x1ea))[_0x2bc2cd(0x1dc)]||'production',maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2bc2cd(0x15f)),configpath=userID?bbpath+_0x2bc2cd(0x1ab)+userID+'/':bbpath+_0x2bc2cd(0x1ab),configbackuppath=configpath+_0x2bc2cd(0x10c),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x2bc2cd(0x224),zippath=userID?bbpath+_0x2bc2cd(0xb6)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x2bc2cd(0x1c0)](logspath+_0x2bc2cd(0x102),{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x2bc2cd(0x1cd);!fs[_0x2bc2cd(0x229)](configpath)&&fs[_0x2bc2cd(0x109)](configpath);!fs[_0x2bc2cd(0x229)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x2bc2cd(0x229)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs['mkdirSync'](zippath);!fs[_0x2bc2cd(0x229)](temppath)&&fs[_0x2bc2cd(0x109)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2bc2cd(0x1c9)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2bc2cd(0x12c),'onepagemode':![]}})[_0x2bc2cd(0x202)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2bc2cd(0x1c9)]({'secure':{},'blacklist':[]})[_0x2bc2cd(0x202)]();let crypt=new Crypt({'md':_0x2bc2cd(0x1d6),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x2bc2cd(0x288)](_0x2bc2cd(0x114),{'host':'api-eu.mixpanel.com'});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2bc2cd(0x282)]&&(settings['telegramToken']!=''&&settings[_0x2bc2cd(0x282)]!=_0x2bc2cd(0x137))&&settings[_0x2bc2cd(0x195)]&&settings[_0x2bc2cd(0x195)]!='')initTelegram();const parseColor=(_0x9ea47d,_0x4040e6)=>{const _0x879438=_0x2bc2cd,_0x538168=/#[A-Z]{3}#/g;if(typeof _0x9ea47d==_0x879438(0x128)){!_0x4040e6?_0x9ea47d=_0x9ea47d['replace'](_0x538168,''):(_0x9ea47d=_0x9ea47d[_0x879438(0xc8)](/#BLU#/g,'\x1b[34m'),_0x9ea47d=_0x9ea47d[_0x879438(0xc8)](/#RED#/g,_0x879438(0x108)),_0x9ea47d=_0x9ea47d['replace'](/#YEL#/g,_0x879438(0x149)),_0x9ea47d=_0x9ea47d[_0x879438(0xc8)](/#MAG#/g,_0x879438(0x1eb)),_0x9ea47d=_0x9ea47d[_0x879438(0xc8)](/#CYA#/g,_0x879438(0xae)),_0x9ea47d=_0x9ea47d[_0x879438(0xc8)](/#RES#/g,'\x1b[0m'));;}return _0x9ea47d;},logger={'screen':_0x2d82f2=>{const _0x4f5e5a=_0x2bc2cd;console[_0x4f5e5a(0x1c2)](parseColor(_0x2d82f2,!![]));},'simple':_0x5b7d5b=>{const _0x1c7f28=_0x2bc2cd;console['log'](parseColor(_0x5b7d5b,!![])),loggerfile['write'](util[_0x1c7f28(0x1c6)](parseColor(_0x5b7d5b,![]))+'\x0a');},'full':async _0x20b114=>{const _0x5a007c=_0x2bc2cd,_0x4884ed=getTimeStamp()+_0x5a007c(0x26f)+_0x20b114;console[_0x5a007c(0x1c2)](parseColor(_0x4884ed,!![])),loggerfile['write'](util[_0x5a007c(0x1c6)](parseColor(_0x4884ed,![]))+'\x0a');if(tgBot&&settings[_0x5a007c(0x17a)]&&settings[_0x5a007c(0x1d8)]!=_0x5a007c(0x271))await sendTelegram(settings['telegramChatId'],_0x5a007c(0xc3)+parseColor(_0x20b114,![]));},'debug':async(_0x1d6f90,_0x3c1012='')=>{const _0x2ae723=_0x2bc2cd,_0x13446a=getTimeStamp()+_0x2ae723(0x24b)+_0x1d6f90;if(debugging)console['log'](parseColor(_0x13446a,!![]));loggerfile[_0x2ae723(0x202)](util[_0x2ae723(0x1c6)](parseColor(_0x13446a,![]))+'\x0a');if(_0x3c1012){if(debugging)console[_0x2ae723(0x1c2)](_0x3c1012);loggerfile[_0x2ae723(0x202)](util[_0x2ae723(0x1c6)](_0x3c1012)+'\x0a');}}};let terminating=![];process['on']('uncaughtException',function(_0x1e772a){const _0x1c6e43=_0x2bc2cd;logger[_0x1c6e43(0x1a3)](_0x1e772a);}),process['on']('exit',()=>{stopAllBots();}),process['on'](_0x2bc2cd(0xd4),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2bc2cd(0x1ea))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2bc2cd(0xc6)),app=express(),http=require('http')[_0x2bc2cd(0x1bd)](app);app[_0x2bc2cd(0x172)](fileUpload({'useTempFiles':!![]})),app['get'](_0x2bc2cd(0x27d),async(_0x5c7a3f,_0x32fc3e)=>{const _0x2889b0=_0x2bc2cd,_0x241747=_0x5c7a3f[_0x2889b0(0x1db)][_0x2889b0(0x1b0)],_0x50ec6f=getClientsWithBotID(_0x2889b0(0xb8)),_0x5716d1=_0x5c7a3f[_0x2889b0(0xf3)][_0x2889b0(0x239)],_0x2ec44d=timelyDecrypt(_0x5716d1,![]),_0x7c3cb0=_0x50ec6f[_0x2889b0(0x153)](_0x4e4696=>_0x4e4696['uuid']==_0x2ec44d);if(_0x7c3cb0){const _0x281601=normalizeIP(_0x5c7a3f[_0x2889b0(0xe4)][_0x2889b0(0x16c)])[_0x2889b0(0x165)],_0x5ada0b=_0x5c7a3f[_0x2889b0(0xf3)][_0x2889b0(0x221)];if(validateAccess(_0x5ada0b,_0x2ec44d,_0x281601)[_0x2889b0(0xd6)])_0x241747=='backup'&&await backupConfigFiles(),await zipFiles(_0x241747),_0x32fc3e[_0x2889b0(0x213)](zippath+(_0x241747+_0x2889b0(0xf8)),_0x4c8e31=>{const _0x20c172=_0x2889b0;_0x4c8e31&&(logger[_0x20c172(0x127)](_0x20c172(0x16a)+_0x241747),logger[_0x20c172(0x1a3)](_0x4c8e31));});else logger['full'](_0x2889b0(0x1e1)+_0x241747+_0x2889b0(0x104));}else logger[_0x2889b0(0x127)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x241747+'\x20(2)');}),app[_0x2bc2cd(0xb7)]('/upload-backup',async(_0x55ceaf,_0x1932e8)=>{const _0x4be544=_0x2bc2cd,_0x1a2904=getClientsWithBotID(_0x4be544(0xb8)),_0x324017=_0x55ceaf[_0x4be544(0xf3)][_0x4be544(0x239)],_0x3bddbe=timelyDecrypt(_0x324017,![]),_0x40aea7=_0x1a2904['find'](_0x552a18=>_0x552a18[_0x4be544(0x239)]==_0x3bddbe);logger[_0x4be544(0x215)](_0x4be544(0x118));if(_0x40aea7){const _0x7521ea=normalizeIP(_0x55ceaf[_0x4be544(0xe4)][_0x4be544(0x16c)])[_0x4be544(0x165)],_0x3afb06=_0x55ceaf['headers'][_0x4be544(0x221)];if(validateAccess(_0x3afb06,_0x3bddbe,_0x7521ea)[_0x4be544(0xd6)]){if(_0x55ceaf[_0x4be544(0x267)]){const _0x4c3707=_0x55ceaf[_0x4be544(0x267)][_0x4be544(0x25d)];await _0x4c3707['mv'](temppath+_0x4c3707[_0x4be544(0x124)]),_0x1932e8[_0x4be544(0x27e)]({'status':!![],'message':_0x4be544(0x286)});const _0x2f3ef0=getBotsWithMode();_0x2f3ef0[_0x4be544(0x223)]>0x0?confirmRestore(temppath,_0x4c3707['name']):unzipFile(temppath,_0x4c3707[_0x4be544(0x124)]);}}else logger[_0x4be544(0x127)](_0x4be544(0x258));}else logger[_0x4be544(0x127)](_0x4be544(0xbb));}),app[_0x2bc2cd(0x172)](express[_0x2bc2cd(0x13a)](path[_0x2bc2cd(0x180)](__dirname,bbpath2,_0x2bc2cd(0x113)))),app[_0x2bc2cd(0x172)](express[_0x2bc2cd(0x13a)](path[_0x2bc2cd(0x180)](__dirname,bbpath2,_0x2bc2cd(0x21d)))),app[_0x2bc2cd(0x15e)]('/',function(_0x29db21,_0x2328ea){const _0xf67cfe=_0x2bc2cd;_0x2328ea[_0xf67cfe(0x126)](path[_0xf67cfe(0x180)](__dirname,bbpath2,'build2',_0xf67cfe(0x156)));}),app['get'](_0x2bc2cd(0x129),function(_0x2a6444,_0x13624a){const _0x5ce9b7=_0x2bc2cd;_0x13624a['sendFile'](path[_0x5ce9b7(0x180)](__dirname,bbpath2,'build',_0x5ce9b7(0x156)));}),app[_0x2bc2cd(0x15e)](_0x2bc2cd(0x22f),(_0x503228,_0x5c2ee2)=>{const _0xa86bd=_0x2bc2cd;_0x5c2ee2['sendFile'](path['join'](__dirname,bbpath2,_0xa86bd(0x21d),_0xa86bd(0x156)));}),app[_0x2bc2cd(0x15e)]('/:bot/performance',(_0x14d7e9,_0x5da347)=>{const _0xd4993e=_0x2bc2cd;_0x5da347[_0xd4993e(0x126)](path[_0xd4993e(0x180)](__dirname,bbpath2,'build',_0xd4993e(0x156)));}),app['get'](_0x2bc2cd(0x2a1),(_0x229ecd,_0x52da6d)=>{const _0x273815=_0x2bc2cd;_0x52da6d[_0x273815(0x126)](path[_0x273815(0x180)](__dirname,bbpath2,_0x273815(0x21d),_0x273815(0x156)));}),app[_0x2bc2cd(0x15e)]('/:bot/history',(_0x2c2d13,_0x549718)=>{const _0x20776e=_0x2bc2cd;_0x549718['sendFile'](path[_0x20776e(0x180)](__dirname,bbpath2,'build',_0x20776e(0x156)));}),app[_0x2bc2cd(0x15e)](_0x2bc2cd(0x246),(_0x10557e,_0x4215ae)=>{const _0x44bd6d=_0x2bc2cd;_0x4215ae[_0x44bd6d(0x126)](path['join'](__dirname,bbpath2,'build',_0x44bd6d(0x156)));}),app[_0x2bc2cd(0x15e)]('/:bot/support',(_0x2f29eb,_0x6b9789)=>{const _0x59224c=_0x2bc2cd;_0x6b9789[_0x59224c(0x126)](path['join'](__dirname,bbpath2,_0x59224c(0x21d),_0x59224c(0x156)));});if(HOST)http[_0x2bc2cd(0x136)](PORT,HOST);else http['listen'](PORT);const io=require(_0x2bc2cd(0x251))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5949d7=_0x2bc2cd;let _0x15f460=_0x5949d7(0x28e);const _0x24cb01=networkInterfaces(),_0x464966={};for(const _0x46890e of Object['keys'](_0x24cb01)){for(const _0x25a87a of _0x24cb01[_0x46890e]){if((_0x25a87a['family']==_0x5949d7(0x214)||_0x25a87a[_0x5949d7(0x278)]==0x4)&&!_0x25a87a['internal']){const _0x536381=ipaddr[_0x5949d7(0x255)](_0x25a87a['address'])[_0x5949d7(0x220)]();_0x536381!=_0x5949d7(0x284)&&(!_0x464966[_0x46890e]&&(_0x464966[_0x46890e]=[]),_0x464966[_0x46890e][_0x5949d7(0x119)](_0x25a87a[_0x5949d7(0x254)]),_0x15f460=_0x25a87a[_0x5949d7(0x254)]);}}}return{'serverip':_0x15f460,'netinterfaces':_0x464966};}async function startServer(){const _0x376f58=_0x2bc2cd,{serverip:_0x3ecf69,netinterfaces:_0x4ff94}=getServerIP();logger[_0x376f58(0x1a3)](''),logger[_0x376f58(0x1a3)]('-----------------------------------------------------------------------------------'),await logger[_0x376f58(0x127)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x376f58(0xc4)+(environment==_0x376f58(0x1fe)?_0x376f58(0xfe):'')+'\x0a'+(_0x376f58(0x1f5)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+('=>\x20Go\x20to\x20#CYA#http://'+_0x3ecf69+':'+PORT+_0x376f58(0x270))),logger[_0x376f58(0x1a3)](_0x376f58(0x169));if(config['length']!=0x0)for(const _0x4b6ac8 of config){const _0xb8f422=_0x4b6ac8[_0x376f58(0x261)]==_0x376f58(0x176)?'a':'m';if(_0x4b6ac8[_0x376f58(0xc1)]==_0x376f58(0x1ef)||_0x4b6ac8[_0x376f58(0xc1)]=='new')await logger[_0x376f58(0x127)]('Starting\x20('+_0xb8f422+_0x376f58(0x226)+_0x4b6ac8[_0x376f58(0x260)]+_0x376f58(0x1cf)+_0x4b6ac8['botname']),startBot([_0x4b6ac8['botID'],userID],{'cwd':bbpath},function(_0x3fa297){const _0x43fd97=_0x376f58;if(_0x3fa297)logger[_0x43fd97(0x127)](_0x3fa297);});else(_0x4b6ac8[_0x376f58(0xc1)]==_0x376f58(0x1a7)||_0x4b6ac8[_0x376f58(0xc1)]==_0x376f58(0x1fd))&&await logger[_0x376f58(0x127)](_0x376f58(0x1b6)+_0xb8f422+_0x376f58(0x1d4)+_0x4b6ac8[_0x376f58(0x260)]+_0x376f58(0x1cf)+_0x4b6ac8[_0x376f58(0x268)]);}else!newBot&&logger[_0x376f58(0x1a3)](_0x376f58(0x22a));if(newBot)addBot();logger[_0x376f58(0x1a3)](_0x376f58(0x169)),logger[_0x376f58(0x1a3)](''),await logger[_0x376f58(0x215)]('Node.js\x20v'+nodeversion),await logger[_0x376f58(0x215)](_0x376f58(0x240),_0x4ff94);}function startSocket(){const _0x4b55ba=_0x2bc2cd;io['on'](_0x4b55ba(0x1bf),_0x27dcf2=>{const _0x16fb3f=_0x4b55ba;let _0x382ed6,_0x72023b,_0x329832,_0x2a1a3b,_0xcbcfe8;const _0x4bc1fd=_0x27dcf2[_0x16fb3f(0x247)][_0x16fb3f(0xf3)][_0x16fb3f(0x256)];_0x72023b=_0x4bc1fd[_0x16fb3f(0x20d)](/bot[0-9]{3}/);if(_0x72023b)_0x329832=_0x72023b[0x0][_0x16fb3f(0x20d)](/[0-9]{3}/);if(_0x329832)_0x382ed6=_0x329832[0x0];else _0x382ed6=_0x16fb3f(0xb8);const _0x1a6b00=_0x27dcf2[_0x16fb3f(0x247)]['auth']['encryptedUuid'];if(!_0x1a6b00)_0x27dcf2['emit']('status',{'publicKey':secure['publicKey']});else{_0x2a1a3b=timelyDecrypt(_0x1a6b00,![]);if(!_0x2a1a3b)_0x27dcf2[_0x16fb3f(0x11c)](_0x16fb3f(0xc1),{'publicKey':secure[_0x16fb3f(0x1b5)]});else{_0xcbcfe8=normalizeIP(_0x27dcf2[_0x16fb3f(0x1e0)][_0x16fb3f(0x16c)])[_0x16fb3f(0x165)];if(!devices[_0x2a1a3b])devices[_0x2a1a3b]={'uuid':_0x2a1a3b,'access':{'token':null}};devices[_0x2a1a3b]['ip']=_0xcbcfe8;const _0x224444=addClient(_0x27dcf2['id'],_0x2a1a3b,_0x382ed6);setAccess(_0x224444),emitMessages(),_0x27dcf2['on']('login',_0x38d7f3=>{const _0x167c89=_0x16fb3f,_0x488bf3=timelyDecrypt(_0x38d7f3[_0x167c89(0x193)]);if(_0x488bf3){_0x38d7f3={'username':_0x38d7f3[_0x167c89(0x1d7)],'password':_0x488bf3},devices[_0x2a1a3b][_0x167c89(0xda)]=validateCredentials(_0x38d7f3,_0x2a1a3b);if(devices[_0x2a1a3b][_0x167c89(0xda)]['allow']==![]&&devices[_0x2a1a3b][_0x167c89(0xda)]['reason']==_0x167c89(0x16f))_0x27dcf2['emit'](_0x167c89(0xc1),{'access':devices[_0x2a1a3b]['access']}),loginAccess2FA(_0x2a1a3b,_0xcbcfe8);else{if(devices[_0x2a1a3b][_0x167c89(0xda)][_0x167c89(0xd6)]==![]&&devices[_0x2a1a3b]['access'][_0x167c89(0x29c)]==_0x167c89(0x12a))_0x27dcf2[_0x167c89(0x11c)](_0x167c89(0xc1),{'access':devices[_0x2a1a3b]['access']});else devices[_0x2a1a3b][_0x167c89(0xda)]['allow']&&devices[_0x2a1a3b][_0x167c89(0xda)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2a1a3b)[_0x167c89(0x14c)](_0x3fc2b7=>{setAccess(_0x3fc2b7);}),logger[_0x167c89(0x215)](_0x167c89(0x1c8)+_0x2a1a3b[_0x167c89(0x29b)](-0x8)),setTokenRefresh(_0x2a1a3b),setSessionTimeout(_0x167c89(0x1de),_0x2a1a3b));}}else logger[_0x167c89(0x127)](_0x167c89(0x139));}),_0x27dcf2['on'](_0x16fb3f(0x15d),()=>{resetPassword();}),_0x27dcf2['on'](_0x16fb3f(0x275),_0x2097e1=>{removeClient(_0x27dcf2['id']);}),_0x382ed6==_0x16fb3f(0xb8)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x53ca3d){const _0x52938e=_0x2bc2cd;if(_0x53ca3d!='botmanager'&&config[_0x52938e(0x1ff)]!=''){if(pid[_0x53ca3d])pid[_0x53ca3d][_0x52938e(0x27e)]({'function':_0x52938e(0x273),'args':null});}_0x53ca3d!=_0x52938e(0xb8)&&broadcastToBots(_0x52938e(0x216),JSON[_0x52938e(0x148)](config));}function reloadBotManager(){const _0x5e040e=_0x2bc2cd;getClientsWithBotID(_0x5e040e(0xb8))[_0x5e040e(0x14c)](_0x3a1435=>{const _0xe2102a=_0x5e040e;getSocket(_0x3a1435['id'])[_0xe2102a(0x11c)](_0xe2102a(0xc1),{'access':{'allow':![],'reason':_0xe2102a(0x19a),'token':null}});});}function getSocket(_0x7b8283){const _0xd6163c=_0x2bc2cd;return io[_0xd6163c(0x14e)]['sockets'][_0xd6163c(0x15e)](_0x7b8283);}function setAccess(_0x30f848){const _0x3a41cd=_0x2bc2cd,_0x13eccc=getSocket(_0x30f848['id']),_0x5ed090=_0x30f848[_0x3a41cd(0x239)],_0x51622e=_0x30f848[_0x3a41cd(0x277)];devices[_0x5ed090][_0x3a41cd(0xda)]=validateAccess(devices[_0x5ed090][_0x3a41cd(0xda)][_0x3a41cd(0x186)],_0x5ed090),logger['debug'](_0x3a41cd(0x244)+devices[_0x5ed090]['access'][_0x3a41cd(0x29c)]+_0x3a41cd(0x18a)+_0x30f848['id'][_0x3a41cd(0x29b)](-0x8)+'\x20|\x20user:\x20...'+_0x5ed090[_0x3a41cd(0x29b)](-0x8)),_0x13eccc[_0x3a41cd(0x180)](_0x5ed090);if(devices[_0x5ed090][_0x3a41cd(0xda)][_0x3a41cd(0xd6)]){_0x13eccc[_0x3a41cd(0x180)](_0x51622e);if(_0x51622e==_0x3a41cd(0xb8))initializeSocketBotManager(_0x13eccc);else initializeSocketBot(_0x13eccc);initClient(_0x51622e);}devices[_0x5ed090]['access'][_0x3a41cd(0x186)]&&devices[_0x5ed090][_0x3a41cd(0xda)][_0x3a41cd(0x29c)]==_0x3a41cd(0x21c)&&setSessionTimeout(_0x3a41cd(0x1d1),_0x5ed090),devices[_0x5ed090][_0x3a41cd(0xda)][_0x3a41cd(0x186)]&&devices[_0x5ed090][_0x3a41cd(0xda)][_0x3a41cd(0x29c)]==_0x3a41cd(0xdf)&&setSessionTimeout(_0x3a41cd(0x1de),_0x5ed090),_0x13eccc[_0x3a41cd(0x11c)](_0x3a41cd(0xc1),{'status':_0x30f848[_0x3a41cd(0x249)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5ed090][_0x3a41cd(0xda)],'externalip':devices[_0x5ed090]['ip'],'publicKey':secure[_0x3a41cd(0x1b5)],'userid':settings[_0x3a41cd(0x21b)],'validInstallation':validInstallation}),devices[_0x5ed090][_0x3a41cd(0xda)]['allow']==![]&&devices[_0x5ed090][_0x3a41cd(0xda)]['reason']==_0x3a41cd(0x23b)&&temporaryAccess2FA(_0x5ed090,devices[_0x5ed090]['ip']);}function setSessionTimeout(_0x15a594,_0x11e11d){const _0x14ec38=_0x2bc2cd;let _0x2f0700;if(_0x15a594==_0x14ec38(0x1de))_0x2f0700=loginExpiry*0x3c*0x3e8;else _0x2f0700=devices[_0x11e11d][_0x14ec38(0x217)][_0x14ec38(0x1da)]*0x3c*0x3e8-(new Date()[_0x14ec38(0x1f6)]()-devices[_0x11e11d][_0x14ec38(0x217)][_0x14ec38(0x231)]);if(devices[_0x11e11d][_0x14ec38(0x299)])clearTimeout(devices[_0x11e11d]['pidExpireLogin']);devices[_0x11e11d][_0x14ec38(0x299)]=setTimeout(()=>{const _0x59e131=_0x14ec38;if(devices[_0x11e11d]['pidRefreshToken'])clearTimeout(devices[_0x11e11d][_0x59e131(0x1e6)]);removeSocketListeners(_0x11e11d),addBlacklist(_0x11e11d),devices[_0x11e11d][_0x59e131(0x217)]=null,devices[_0x11e11d][_0x59e131(0x192)]=null,devices[_0x11e11d][_0x59e131(0xda)][_0x59e131(0x186)]=null,logger[_0x59e131(0x215)](_0x59e131(0xb3)+_0x11e11d[_0x59e131(0x29b)](-0x8)),devices[_0x11e11d][_0x59e131(0xda)]=validateAccess(devices[_0x11e11d][_0x59e131(0xda)]['token'],_0x11e11d),!(devices[_0x11e11d][_0x59e131(0xda)][_0x59e131(0xd6)]&&devices[_0x11e11d][_0x59e131(0xda)][_0x59e131(0x29c)]==_0x59e131(0x130))&&(_0x15a594==_0x59e131(0x1de)?io['to'](_0x11e11d)[_0x59e131(0x11c)](_0x59e131(0xc1),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x11e11d)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x11e11d][_0x59e131(0xda)]['token']=null;},_0x2f0700);}function setTokenRefresh(_0x24d6cb){const _0x41a36c=_0x2bc2cd;if(devices[_0x24d6cb]['pidRefreshToken'])clearTimeout(devices[_0x24d6cb][_0x41a36c(0x1e6)]);devices[_0x24d6cb][_0x41a36c(0x1e6)]=setTimeout(()=>{const _0x127b3e=_0x41a36c;getClientsWithUuid(_0x24d6cb)[_0x127b3e(0x223)]!=0x0?(devices[_0x24d6cb][_0x127b3e(0xda)]=refreshToken(_0x24d6cb),io['to'](_0x24d6cb)[_0x127b3e(0x11c)](_0x127b3e(0xc1),{'status':_0x127b3e(0xe6),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x24d6cb][_0x127b3e(0xda)],'externalip':devices[_0x24d6cb]['ip'],'publicKey':secure[_0x127b3e(0x1b5)],'validInstallation':validInstallation}),setTokenRefresh(_0x24d6cb)):clearTimeout(devices[_0x24d6cb][_0x127b3e(0x1e6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3954c2){const _0x1d81d9=_0x2bc2cd,_0x164167=getClient(_0x3954c2['id'])[_0x1d81d9(0x239)];_0x3954c2[_0x1d81d9(0x11c)](_0x1d81d9(0x216),config),_0x3954c2[_0x1d81d9(0x11c)](_0x1d81d9(0xb1),cleanSettings()),_0x3954c2['on'](_0x1d81d9(0x187),_0x558752=>{const _0x58bdd2=_0x1d81d9;if(validateAccess(_0x558752,_0x164167)[_0x58bdd2(0xd6)])addBot();else logger[_0x58bdd2(0x127)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x3954c2['on']('update-bot',(_0xb5f77d,_0x3bee61)=>{const _0x318226=_0x1d81d9;if(validateAccess(_0x3bee61,_0x164167)[_0x318226(0xd6)])toggleBot(_0xb5f77d['botID'],_0xb5f77d[_0x318226(0xc1)],_0xb5f77d[_0x318226(0x125)]);else logger[_0x318226(0x127)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3954c2['on']('toggle-bot-mode',(_0x1274da,_0xcd4c24)=>{const _0x180527=_0x1d81d9;if(validateAccess(_0xcd4c24,_0x164167)[_0x180527(0xd6)])toggleBotMode(_0x1274da);else logger[_0x180527(0x127)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3954c2['on'](_0x1d81d9(0x16b),(_0x24c4f1,_0x4cccb8)=>{const _0x1d9569=_0x1d81d9;if(validateAccess(_0x4cccb8,_0x164167)['allow'])deleteBot(_0x24c4f1);else logger['full'](_0x1d9569(0x101));}),_0x3954c2['on'](_0x1d81d9(0x1ad),(_0x38a032,_0x487040)=>{const _0xf8d767=_0x1d81d9;if(validateAccess(_0x487040,_0x164167)[_0xf8d767(0xd6)])storeSettings(_0x38a032,!![]);else logger[_0xf8d767(0x127)](_0xf8d767(0xb0));}),_0x3954c2['on'](_0x1d81d9(0x1b3),_0x132c4b=>{const _0xfe2278=_0x1d81d9;if(validateAccess(_0x132c4b,_0x164167)[_0xfe2278(0xd6)])updateBB(_0xfe2278(0x24c));else logger['full'](_0xfe2278(0x263));}),_0x3954c2['on'](_0x1d81d9(0x243),_0x1edbed=>{if(validateAccess(_0x1edbed,_0x164167)['allow'])updateBB('reinstall');else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x3954c2['on'](_0x1d81d9(0x122),_0x48ee00=>{const _0xd4a7d2=_0x1d81d9;if(validateAccess(_0x48ee00,_0x164167)[_0xd4a7d2(0xd6)]){const _0x2d2f08=getClient(_0x3954c2['id']);if(_0x2d2f08)getBackupFiles(_0x2d2f08[_0xd4a7d2(0x239)]);else logger[_0xd4a7d2(0x127)](_0xd4a7d2(0x1c5));}else logger[_0xd4a7d2(0x127)](_0xd4a7d2(0x110));}),_0x3954c2['on'](_0x1d81d9(0xbd),(_0x187f90,_0x337a15)=>{const _0x585980=_0x1d81d9;if(validateAccess(_0x337a15,_0x164167)[_0x585980(0xd6)])restoreBackupFile(_0x187f90);else logger[_0x585980(0x127)](_0x585980(0x184));}),_0x3954c2['on'](_0x1d81d9(0xaf),_0x150c4b=>{const _0xca4cd6=_0x1d81d9;if(validateAccess(_0x150c4b,_0x164167)[_0xca4cd6(0xd6)])getMessages();else logger['full'](_0xca4cd6(0x19d));}),_0x3954c2['on'](_0x1d81d9(0x198),(_0x5e29de,_0x92cf32)=>{const _0x106759=_0x1d81d9;if(validateAccess(_0x92cf32,_0x164167)[_0x106759(0xd6)])confirmMessage(_0x5e29de);else logger[_0x106759(0x127)](_0x106759(0x219));}),_0x3954c2['on'](_0x1d81d9(0x11d),_0x7b4d61=>{const _0x217299=_0x1d81d9;if(validateAccess(_0x7b4d61,_0x164167)['allow']){if(devices[_0x164167][_0x217299(0x1e6)])clearTimeout(devices[_0x164167][_0x217299(0x1e6)]);if(devices[_0x164167][_0x217299(0x299)])clearTimeout(devices[_0x164167][_0x217299(0x299)]);removeSocketListeners(getClient(_0x3954c2['id'])['uuid']),addBlacklist(_0x164167),devices[_0x164167][_0x217299(0x217)]=null,devices[_0x164167][_0x217299(0x192)]=null,devices[_0x164167]['access'][_0x217299(0x186)]=null,logger[_0x217299(0x215)](_0x217299(0x1e3)+_0x164167[_0x217299(0x29b)](-0x8)),io['to'](getClient(_0x3954c2['id'])[_0x217299(0x239)])[_0x217299(0x11c)](_0x217299(0xc1),{'access':{'allow':![],'reason':_0x217299(0x25f),'token':null}});}else logger[_0x217299(0x127)](_0x217299(0xd1));});}function initializeSocketBot(_0x27d8a3){const _0x13d0ef=_0x2bc2cd,_0x7ff512=getClient(_0x27d8a3['id'])[_0x13d0ef(0x277)],_0x5f2821=getClient(_0x27d8a3['id'])[_0x13d0ef(0x239)];_0x27d8a3['on'](_0x13d0ef(0x103),(_0x5b4c38,_0x3b704f)=>{const _0x456e04=_0x13d0ef;if(validateAccess(_0x3b704f,_0x5f2821)[_0x456e04(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x456e04(0x27e)]({'function':'emitHistory','args':_0x5b4c38});}else logger[_0x456e04(0x127)](_0x456e04(0x27a));}),_0x27d8a3['on'](_0x13d0ef(0x29d),(_0x3503f7,_0x55b9f9)=>{const _0x35bfa9=_0x13d0ef;if(validateAccess(_0x55b9f9,_0x5f2821)[_0x35bfa9(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x35bfa9(0x27e)]({'function':_0x35bfa9(0x262),'args':_0x3503f7});}else logger['full']('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x27d8a3['on']('get-portfolio',(_0x4c1386,_0x2944f9)=>{const _0x34d6e4=_0x13d0ef;if(validateAccess(_0x2944f9,_0x5f2821)['allow']){if(pid[_0x7ff512])pid[_0x7ff512][_0x34d6e4(0x27e)]({'function':_0x34d6e4(0x1f0),'args':_0x4c1386});}else logger[_0x34d6e4(0x127)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x27d8a3['on']('store-configuration',(_0x4bd36c,_0x17f192)=>{const _0x15715b=_0x13d0ef;if(validateAccess(_0x17f192,_0x5f2821)['allow']){if(pid[_0x7ff512])pid[_0x7ff512][_0x15715b(0x27e)]({'function':'storeConfiguration','args':_0x4bd36c});}else logger[_0x15715b(0x127)](_0x15715b(0x16e));}),_0x27d8a3['on']('store-headless',(_0x7bb1cc,_0x45784a)=>{const _0x2c015f=_0x13d0ef;if(validateAccess(_0x45784a,_0x5f2821)['allow']){if(pid[_0x7ff512])pid[_0x7ff512][_0x2c015f(0x27e)]({'function':_0x2c015f(0x175),'args':_0x7bb1cc});}else logger[_0x2c015f(0x127)](_0x2c015f(0x189));}),_0x27d8a3['on']('store-fiat',(_0x599e50,_0x5a51b4)=>{const _0x585bc5=_0x13d0ef;if(validateAccess(_0x5a51b4,_0x5f2821)[_0x585bc5(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x585bc5(0x27e)]({'function':_0x585bc5(0x218),'args':_0x599e50});}else logger[_0x585bc5(0x127)](_0x585bc5(0x24f));}),_0x27d8a3['on'](_0x13d0ef(0x22b),_0x29dab2=>{const _0x1e605b=_0x13d0ef;if(validateAccess(_0x29dab2,_0x5f2821)[_0x1e605b(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x1e605b(0x27e)]({'function':_0x1e605b(0x1ca),'args':null});}else logger[_0x1e605b(0x127)](_0x1e605b(0x1f8));}),_0x27d8a3['on'](_0x13d0ef(0x206),_0x237b34=>{const _0x141d18=_0x13d0ef;if(validateAccess(_0x237b34,_0x5f2821)[_0x141d18(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x141d18(0x27e)]({'function':_0x141d18(0x14d),'args':null});}else logger['full'](_0x141d18(0x154));}),_0x27d8a3['on'](_0x13d0ef(0x242),(_0x5d5807,_0x22c6c8)=>{const _0x10544b=_0x13d0ef;if(validateAccess(_0x22c6c8,_0x5f2821)[_0x10544b(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x10544b(0x27e)]({'function':_0x10544b(0x29a),'args':_0x5d5807});}else logger['full'](_0x10544b(0x22d));}),_0x27d8a3['on'](_0x13d0ef(0x19e),_0x417a3f=>{const _0x3a7c19=_0x13d0ef;if(validateAccess(_0x417a3f,_0x5f2821)[_0x3a7c19(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x3a7c19(0x27e)]({'function':_0x3a7c19(0x230),'args':null});}else logger[_0x3a7c19(0x127)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x27d8a3['on']('show-config',_0x1fb825=>{const _0x3c71d3=_0x13d0ef;if(validateAccess(_0x1fb825,_0x5f2821)[_0x3c71d3(0xd6)]){if(pid[_0x7ff512])pid[_0x7ff512][_0x3c71d3(0x27e)]({'function':_0x3c71d3(0xba),'args':null});}else logger['full'](_0x3c71d3(0xe3));}),_0x27d8a3['on'](_0x13d0ef(0x1b3),_0x1cc23a=>{const _0x598c63=_0x13d0ef;if(validateAccess(_0x1cc23a,_0x5f2821)[_0x598c63(0xd6)])updateBB(_0x598c63(0x24c));else logger[_0x598c63(0x127)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x27d8a3['on'](_0x13d0ef(0xaf),_0x3f644f=>{const _0x3abd4e=_0x13d0ef;if(validateAccess(_0x3f644f,_0x5f2821)[_0x3abd4e(0xd6)])getMessages();else logger[_0x3abd4e(0x127)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x27d8a3['on'](_0x13d0ef(0x198),(_0x58981a,_0x480291)=>{const _0x228804=_0x13d0ef;if(validateAccess(_0x480291,_0x5f2821)['allow'])confirmMessage(_0x58981a);else logger[_0x228804(0x127)](_0x228804(0x219));}),_0x27d8a3['on'](_0x13d0ef(0x11d),_0x5c13eb=>{const _0x144c76=_0x13d0ef;if(validateAccess(_0x5c13eb,_0x5f2821)[_0x144c76(0xd6)]){if(devices[_0x5f2821][_0x144c76(0x1e6)])clearTimeout(devices[_0x5f2821][_0x144c76(0x1e6)]);if(devices[_0x5f2821][_0x144c76(0x299)])clearTimeout(devices[_0x5f2821]['pidExpireLogin']);removeSocketListeners(getClient(_0x27d8a3['id'])[_0x144c76(0x239)]),addBlacklist(_0x5f2821),devices[_0x5f2821]['telegramIpApproval']=null,devices[_0x5f2821][_0x144c76(0x192)]=null,devices[_0x5f2821][_0x144c76(0xda)][_0x144c76(0x186)]=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x5f2821[_0x144c76(0x29b)](-0x8)),io['to'](getClient(_0x27d8a3['id'])[_0x144c76(0x239)])['emit'](_0x144c76(0xc1),{'access':{'allow':![],'reason':_0x144c76(0x25f),'token':null}});}else logger[_0x144c76(0x127)](_0x144c76(0xd1));});}function removeSocketListeners(_0x307949){const _0x45d477=_0x2bc2cd;getClientsWithUuid(_0x307949)[_0x45d477(0x14c)](_0x2e4ac8=>{const _0x5de641=_0x45d477;getSocket(_0x2e4ac8['id'])[_0x5de641(0x1b1)]();});}function cleanSettings(){const _0x1dbbc9=_0x2bc2cd;let _0x3a7124=settings;return settings[_0x1dbbc9(0x282)]&&settings[_0x1dbbc9(0x282)]!=''&&(_0x3a7124={..._0x3a7124,'telegramToken':_0x1dbbc9(0x24e)}),settings[_0x1dbbc9(0x11f)]&&settings[_0x1dbbc9(0x11f)]!=''&&(_0x3a7124={..._0x3a7124,'bbPassword':'************'}),(settings['bbPassword']&&settings[_0x1dbbc9(0x11f)]=='***'||settings[_0x1dbbc9(0x282)]&&settings['telegramToken']==_0x1dbbc9(0x137))&&(_0x3a7124={..._0x3a7124,'restored':{'password':settings[_0x1dbbc9(0x11f)]==_0x1dbbc9(0x137),'telegram':settings['telegramToken']=='***'}}),_0x3a7124;}async function updateBB(_0x13dad5){const _0x919d9c=_0x2bc2cd;await backupConfigFiles(),installingUpdate=!![],config[_0x919d9c(0x14c)](_0x53cd5b=>{const _0x111955=_0x919d9c;restartBot(_0x53cd5b[_0x111955(0x260)]);});if(_0x13dad5==_0x919d9c(0x24c))process[_0x919d9c(0x27e)]({'update':!![],'environment':environment},_0x245c75=>{});else _0x13dad5==_0x919d9c(0x204)&&process[_0x919d9c(0x27e)]({'reinstall':!![],'environment':environment},_0x5140e3=>{});}function startBot(_0xf17bc0,_0x194786,_0x2ca136){const _0x101ebe=_0x2bc2cd;if(debugging)_0xf17bc0['push']('-d');let _0x19ddf3=![];const _0x3b2f7d=_0xf17bc0[0x0];_0x194786={..._0x194786,'stdio':['inherit','inherit','inherit',_0x101ebe(0x1dd)]},pid[_0x3b2f7d]=childProcess[_0x101ebe(0xb9)](botfile,_0xf17bc0,_0x194786),pid[_0x3b2f7d]['on']('message',_0x2976aa=>{const _0x2f7288=_0x101ebe;switch(Object[_0x2f7288(0x115)](_0x2976aa)[0x0]){case _0x2f7288(0x268):updateBotName(_0x3b2f7d,_0x2976aa[_0x2f7288(0x268)]);break;case _0x2f7288(0xc2):updateBotManager();break;case _0x2f7288(0xc1):updateStatus(_0x3b2f7d,_0x2976aa[_0x2f7288(0xc1)]);break;case _0x2f7288(0x125):updateLive(_0x3b2f7d,_0x2976aa[_0x2f7288(0x125)]);break;case _0x2f7288(0xbe):updateLive(_0x3b2f7d,_0x2976aa[_0x2f7288(0xbe)]),io['to'](_0x3b2f7d)[_0x2f7288(0x11c)](_0x2f7288(0xc1),{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0x2976aa[_0x2f7288(0xcb)]==_0x2f7288(0x28b)&&restartBot(_0x3b2f7d);_0x2976aa[_0x2f7288(0xcb)]==_0x2f7288(0x1cb)&&toggleBot(_0x3b2f7d,_0x2f7288(0x1a7),_0x2f7288(0x225));break;case'telegram':sendTelegramBot(_0x3b2f7d,_0x2976aa[_0x2f7288(0xc9)]);break;case _0x2f7288(0x200):sendTelegramMsg(_0x2976aa[_0x2f7288(0x200)]);break;case _0x2f7288(0x241):io['to'](_0x3b2f7d)['emit'](_0x2976aa['function'],_0x2976aa[_0x2f7288(0x1b7)]);break;}}),pid[_0x3b2f7d]['on']('error',function(_0x4b7d85){if(_0x19ddf3)return;_0x19ddf3=!![],_0x2ca136(_0x4b7d85);}),pid[_0x3b2f7d]['on'](_0x101ebe(0x28d),async function(_0x3a0c61){const _0x515717=_0x101ebe;if(terminating)return;if(installingUpdate){logger[_0x515717(0x215)](_0x515717(0xea)),io[_0x515717(0x12f)]();return;}if(_0x19ddf3)return;_0x19ddf3=!![],_0x2ca136(null);const _0x583ee4=dbConfig[_0x515717(0x15e)]('bots')[_0x515717(0x153)]({'botID':_0x3b2f7d})[_0x515717(0x259)]();_0x583ee4&&(_0x583ee4[_0x515717(0xc1)]==_0x515717(0x1ef)||_0x583ee4['status']==_0x515717(0x161))&&(await sleep(0x3e8),updateLive(_0x3b2f7d,_0x515717(0x225)),logger[_0x515717(0x127)]('Restarting\x20Bot\x20'+_0x3b2f7d),startBot([_0x3b2f7d,userID],{'cwd':bbpath},function(_0x2e83d3){if(_0x2e83d3)logger['full'](_0x2e83d3);}));});}function stopBot(_0x5b0ed8){getClientsWithBotID(_0x5b0ed8)['forEach'](_0xf0677d=>{getSocket(_0xf0677d['id'])['disconnect'](!![]),removeClient(_0xf0677d['id']);}),pid[_0x5b0ed8]&&(pid[_0x5b0ed8]['kill'](),pid[_0x5b0ed8]=null);}function stopAllBots(){const _0x11d710=_0x2bc2cd;terminating=!![];const _0x316a02=getEnabledBots();_0x316a02[_0x11d710(0x14c)](_0x22ded5=>{const _0x3668cc=_0x11d710;stopBot(_0x22ded5[_0x3668cc(0x260)]);});}function restartBot(_0x3fb53e){const _0x1d92f9=_0x2bc2cd;if(pid[_0x3fb53e])pid[_0x3fb53e][_0x1d92f9(0x1cb)]();}function addBot(){const _0x225117=_0x2bc2cd;let _0x145022;for(let _0x5aad66=0x1;_0x5aad66<0x3e9;_0x5aad66++){_0x145022=_0x5aad66[_0x225117(0x232)]()[_0x225117(0x177)](0x3,'0');let _0x54b9f9=config['find'](_0x4e715d=>_0x4e715d['botID']==_0x145022);if(!_0x54b9f9)break;}if(_0x145022===_0x225117(0x18d)){logger[_0x225117(0x127)](_0x225117(0x11a));return;}logger[_0x225117(0x127)](_0x225117(0x233)+_0x145022),dbConfig[_0x225117(0x15e)](_0x225117(0x216))['push']({'botID':_0x145022,'botname':_0x225117(0x182)+_0x145022,'status':_0x225117(0x161),'live':''})[_0x225117(0x202)](),startBot([_0x145022,userID],{'cwd':bbpath},function(_0x4f77e5){const _0x318d70=_0x225117;if(_0x4f77e5)logger[_0x318d70(0x127)](_0x4f77e5);}),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x225117(0x216),JSON[_0x225117(0x148)](config));}function deleteBot(_0x13b327){const _0x3ffae9=_0x2bc2cd;getClientsWithBotID(_0x13b327)[_0x3ffae9(0x14c)](_0x18f9dc=>{const _0x5848f6=_0x3ffae9;getSocket(_0x18f9dc['id'])[_0x5848f6(0x275)](!![]),removeClient(_0x18f9dc['id']);}),dbConfig[_0x3ffae9(0x15e)](_0x3ffae9(0x216))[_0x3ffae9(0x27f)]({'botID':_0x13b327})[_0x3ffae9(0x202)](),logger[_0x3ffae9(0x127)](_0x3ffae9(0xcc)+_0x13b327),stopBot(_0x13b327);try{if(fs[_0x3ffae9(0x229)](path[_0x3ffae9(0x180)](configpath,_0x3ffae9(0xc0)+_0x13b327+_0x3ffae9(0xdd))))fs['unlinkSync'](path[_0x3ffae9(0x180)](configpath,_0x3ffae9(0xc0)+_0x13b327+_0x3ffae9(0xdd)));if(fs[_0x3ffae9(0x229)](path[_0x3ffae9(0x180)](configpath,_0x3ffae9(0xc0)+_0x13b327+_0x3ffae9(0x27c))))fs[_0x3ffae9(0x158)](path[_0x3ffae9(0x180)](configpath,_0x3ffae9(0xc0)+_0x13b327+_0x3ffae9(0x27c)));if(fs[_0x3ffae9(0x229)](path[_0x3ffae9(0x180)](configpath,'bot-'+_0x13b327+'-performance.json')))fs[_0x3ffae9(0x158)](path[_0x3ffae9(0x180)](configpath,_0x3ffae9(0xc0)+_0x13b327+'-performance.json'));if(fs[_0x3ffae9(0x229)](path['join'](configpath,_0x3ffae9(0xc0)+_0x13b327+_0x3ffae9(0x290))))fs[_0x3ffae9(0x158)](path[_0x3ffae9(0x180)](configpath,'bot-'+_0x13b327+_0x3ffae9(0x290)));}catch(_0x1d437b){if(_0x1d437b)logger['full']('Error\x20while\x20deleting\x20config\x20files:\x20',_0x1d437b);}config=getConfiguration(),io['to'](_0x3ffae9(0xb8))[_0x3ffae9(0x11c)](_0x3ffae9(0x216),config),broadcastToBots(_0x3ffae9(0x216),JSON[_0x3ffae9(0x148)](config));}function toggleBot(_0x7d1683,_0x12b9a6,_0x30dd27){const _0x31705b=_0x2bc2cd;dbConfig[_0x31705b(0x15e)](_0x31705b(0x216))[_0x31705b(0x153)]({'botID':_0x7d1683})['assign']({'status':_0x12b9a6})[_0x31705b(0x144)]({'live':_0x30dd27})[_0x31705b(0x202)]();if(_0x12b9a6==_0x31705b(0x1ef)||_0x12b9a6=='new')logger['full']('Enabled\x20Bot\x20'+_0x7d1683),startBot([_0x7d1683,userID],{'cwd':bbpath},function(_0x42ecac){const _0x23c6f1=_0x31705b;if(_0x42ecac)logger[_0x23c6f1(0x127)](_0x42ecac);});else(_0x12b9a6==_0x31705b(0x1a7)||_0x12b9a6==_0x31705b(0x1fd))&&(logger[_0x31705b(0x127)](_0x31705b(0x19b)+_0x7d1683),stopBot(_0x7d1683));config=getConfiguration(),io['to'](_0x31705b(0xb8))[_0x31705b(0x11c)](_0x31705b(0x216),config),broadcastToBots(_0x31705b(0x216),JSON[_0x31705b(0x148)](config));}function toggleStatus(_0x5bb70e){const _0x3fc912=_0x2bc2cd;let _0x5c149f=dbConfig[_0x3fc912(0x15e)](_0x3fc912(0x216))[_0x3fc912(0x153)]({'botID':_0x5bb70e})[_0x3fc912(0x259)](),_0x1b9a95;if(_0x5c149f['status']===_0x3fc912(0x1ef))_0x1b9a95='disabled';else{if(_0x5c149f[_0x3fc912(0xc1)]===_0x3fc912(0x161))_0x1b9a95='new-disabled';else{if(_0x5c149f[_0x3fc912(0xc1)]===_0x3fc912(0x1fd))_0x1b9a95='new';else{if(_0x5c149f[_0x3fc912(0xc1)]===_0x3fc912(0x1a7))_0x1b9a95=_0x3fc912(0x1ef);}}}return _0x1b9a95;}function updateStatus(_0x1d765b,_0x992ba8){const _0x1865c7=_0x2bc2cd;dbConfig[_0x1865c7(0x15e)](_0x1865c7(0x216))[_0x1865c7(0x153)]({'botID':_0x1d765b})[_0x1865c7(0x144)]({'status':_0x992ba8})[_0x1865c7(0x202)](),config=getConfiguration(),io['to'](_0x1865c7(0xb8))[_0x1865c7(0x11c)](_0x1865c7(0x216),config),broadcastToBots('bots',JSON[_0x1865c7(0x148)](config));}function updateLive(_0x29dff6,_0x46ceff){const _0x2e5bec=_0x2bc2cd;dbConfig['get'](_0x2e5bec(0x216))['find']({'botID':_0x29dff6})['assign']({'live':_0x46ceff})[_0x2e5bec(0x202)](),config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0x2e5bec(0x216),JSON[_0x2e5bec(0x148)](config));}function updateBotName(_0x107d88,_0x4b65c7){const _0x1bf8a3=_0x2bc2cd;dbConfig[_0x1bf8a3(0x15e)](_0x1bf8a3(0x216))[_0x1bf8a3(0x153)]({'botID':_0x107d88})[_0x1bf8a3(0x144)]({'botname':_0x4b65c7})[_0x1bf8a3(0x202)](),config=getConfiguration(),io['to'](_0x1bf8a3(0xb8))[_0x1bf8a3(0x11c)](_0x1bf8a3(0x216),config),broadcastToBots(_0x1bf8a3(0x216),JSON[_0x1bf8a3(0x148)](config));}function updateBotManager(){const _0x4f234b=_0x2bc2cd;config=getConfiguration(),io['to'](_0x4f234b(0xb8))[_0x4f234b(0x11c)](_0x4f234b(0x216),config),broadcastToBots(_0x4f234b(0x216),JSON[_0x4f234b(0x148)](config));}function toggleBotMode(_0x3335fe){const _0x32850b=_0x2bc2cd;if(pid[_0x3335fe])pid[_0x3335fe][_0x32850b(0x27e)]({'function':_0x32850b(0x150),'args':null});else{const _0x4a8428=configpath+'bot-'+_0x3335fe+'-config.json',_0x2a8bbb=fs[_0x32850b(0x26e)](_0x4a8428),_0x200993=JSON[_0x32850b(0x255)](_0x2a8bbb),_0x4187d2=_0x200993['bot'][0x0][_0x32850b(0x133)];_0x200993[_0x32850b(0x277)][0x0]['headless']=!_0x4187d2;const _0x3a74b7=JSON[_0x32850b(0x148)](_0x200993,null,0x2);fs[_0x32850b(0xe2)](_0x4a8428,_0x3a74b7),config=getConfiguration(),io['to'](_0x32850b(0xb8))['emit'](_0x32850b(0x216),config),broadcastToBots(_0x32850b(0x216),JSON[_0x32850b(0x148)](config));}}function validateTelegram(_0x427cf4){const _0x40fdd1=_0x2bc2cd;if(_0x427cf4[_0x40fdd1(0x188)][_0x40fdd1(0x1d7)]!=settings[_0x40fdd1(0x195)]&&'@'+_0x427cf4[_0x40fdd1(0x188)][_0x40fdd1(0x1d7)]!=settings[_0x40fdd1(0x195)]||_0x427cf4[_0x40fdd1(0x173)]['id']!=settings['telegramChatId'])return sendTelegram(_0x427cf4['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x58f5f7=_0x2bc2cd;if(tgBot)tgBot[_0x58f5f7(0xcb)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x43c3ac=_0x58f5f7(0x24a);_0x43c3ac+='\x0a',_0x43c3ac+=_0x58f5f7(0xd9),_0x43c3ac+=_0x58f5f7(0x1b9),_0x43c3ac+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x43c3ac+=_0x58f5f7(0x13d),_0x43c3ac+=_0x58f5f7(0x235),_0x43c3ac+=_0x58f5f7(0x159),_0x43c3ac+=_0x58f5f7(0x1e4),_0x43c3ac+=_0x58f5f7(0x107),_0x43c3ac+=_0x58f5f7(0x14a),_0x43c3ac+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x43c3ac+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x43c3ac+=_0x58f5f7(0x11e),_0x43c3ac+=_0x58f5f7(0x25a),_0x43c3ac+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x299568='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x299568+='\x0a',_0x299568+=_0x43c3ac,tgBot['catch']((_0x4cfc6e,_0xa28e2f)=>{const _0x410173=_0x58f5f7;logger[_0x410173(0x1a3)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x410173(0x215)](_0x410173(0x203),_0x4cfc6e);}),tgBot['use'](async(_0x26fe14,_0x3a0973)=>{const _0x1f0504=_0x58f5f7;if(!(!settings[_0x1f0504(0x17a)]&&_0x26fe14[_0x1f0504(0x24c)][_0x1f0504(0x10a)][_0x1f0504(0x105)]==_0x1f0504(0x168))){if(!validateTelegram(_0x26fe14))return;}_0x3a0973();}),tgBot['command'](_0x58f5f7(0x1ba),async _0x3f5672=>{const _0x3efd65=_0x58f5f7;if(!settings[_0x3efd65(0x17a)])updateSetting(_0x3efd65(0x17a),_0x3f5672['chat']['id']);updateSetting(_0x3efd65(0x157),!![]);if(!validateTelegram(_0x3f5672))return;await sendTelegram(_0x3f5672[_0x3efd65(0x173)]['id'],_0x299568);}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x117),async _0x5592a5=>{const _0x33d34d=_0x58f5f7;updateSetting(_0x33d34d(0x157),!![]),await sendTelegram(_0x5592a5['chat']['id'],_0x33d34d(0x295));}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x210),async _0x284098=>{const _0x486443=_0x58f5f7;await sendTelegram(_0x284098[_0x486443(0x173)]['id'],_0x486443(0x20e)),updateSetting(_0x486443(0x157),![]);}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x1df),async _0x482e87=>{const _0x3d8673=_0x58f5f7,_0x401adb=Markup[_0x3d8673(0x171)]([Markup['button']['callback'](_0x3d8673(0x276),_0x3d8673(0xbc)),Markup[_0x3d8673(0x257)][_0x3d8673(0x285)](_0x3d8673(0x1e9),'config_alerts'),Markup['button'][_0x3d8673(0x285)](_0x3d8673(0xf6),'config_all')]);_0x482e87['reply'](_0x3d8673(0x140),_0x401adb);}),tgBot[_0x58f5f7(0x237)](_0x58f5f7(0xbc),async _0x4e2572=>{const _0xfad6e0=_0x58f5f7;_0x4e2572['editMessageReplyMarkup'](),updateSetting(_0xfad6e0(0x1d8),_0xfad6e0(0x271)),updateSetting(_0xfad6e0(0x157),!![]),await sendTelegram(_0x4e2572[_0xfad6e0(0x173)]['id'],_0xfad6e0(0x245));}),tgBot[_0x58f5f7(0x237)]('config_alerts',async _0xd8ff51=>{const _0x10aa2c=_0x58f5f7;_0xd8ff51[_0x10aa2c(0x266)](),updateSetting(_0x10aa2c(0x1d8),'alerts'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xd8ff51['chat']['id'],_0x10aa2c(0x26b));}),tgBot[_0x58f5f7(0x237)](_0x58f5f7(0x26d),async _0x1f999f=>{const _0x23f28f=_0x58f5f7;_0x1f999f[_0x23f28f(0x266)](),updateSetting('telegramEvents',_0x23f28f(0x1e7)),updateSetting(_0x23f28f(0x157),!![]),await sendTelegram(_0x1f999f[_0x23f28f(0x173)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications');}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0xc1),async _0x2bf19e=>{const _0xc05cf5=_0x58f5f7,_0x3ecd9e=getBotsWithMode();let _0x115eef=_0xc05cf5(0x17f);config[_0xc05cf5(0x14c)](_0x40cc31=>{const _0xe25a49=_0xc05cf5,_0x28b5b3=_0x3ecd9e[_0xe25a49(0x153)](_0x28f194=>_0x28f194[_0xe25a49(0x260)]==_0x40cc31[_0xe25a49(0x260)])[_0xe25a49(0x261)];_0x115eef+=_0xe25a49(0x182)+_0x40cc31[_0xe25a49(0x260)]+':\x20'+_0x40cc31[_0xe25a49(0xc1)]+_0xe25a49(0x1cf)+_0x28b5b3+_0xe25a49(0x1cf)+_0x40cc31[_0xe25a49(0x125)]+'\x0a';}),_0x115eef+='\x0a',_0x115eef+=_0xc05cf5(0x248),_0x115eef+=!settings[_0xc05cf5(0x157)]?'Notifications\x20disabled\x0a':_0xc05cf5(0x121),_0x115eef+=settings['telegramEnabled']?settings[_0xc05cf5(0x1d8)]==_0xc05cf5(0x1e7)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings[_0xc05cf5(0x1d8)]+'\x20only\x0a':'',await sendTelegram(_0x2bf19e[_0xc05cf5(0x173)]['id'],_0x115eef,{'parse_mode':_0xc05cf5(0x138)});}),tgBot[_0x58f5f7(0x1ac)]('restart',async _0x481e79=>{const _0xc3a45d=_0x58f5f7,_0x3ca858=getEnabledBots();if(_0x3ca858[_0xc3a45d(0x223)]==0x0)await sendTelegram(_0x481e79[_0xc3a45d(0x173)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x3ca858[_0xc3a45d(0x223)]>0x1)_0x3ca858[_0xc3a45d(0x119)]({'botID':'all'});let _0x8df646=[],_0x518c06=[];const _0x49495d=_0x3ca858[_0xc3a45d(0x223)]%0x4==0x0||_0x3ca858[_0xc3a45d(0x223)]%0x4==0x3||_0x3ca858[_0xc3a45d(0x223)]%0x3==0x1?0x4:0x3;let _0x93f04b=0x0;_0x3ca858[_0xc3a45d(0x14c)]((_0x4dcf8a,_0x21c505)=>{const _0xd67e90=_0xc3a45d;if(_0x21c505%_0x49495d==0x0)_0x518c06=[];_0x518c06[_0xd67e90(0x119)](Markup[_0xd67e90(0x257)][_0xd67e90(0x285)](_0x4dcf8a[_0xd67e90(0x260)]==_0xd67e90(0x1e7)?_0xd67e90(0x27b):_0xd67e90(0x182)+_0x4dcf8a[_0xd67e90(0x260)],_0xd67e90(0x1a8)+_0x4dcf8a[_0xd67e90(0x260)])),_0x21c505%_0x49495d==0x0&&(_0x8df646[_0x93f04b]=_0x518c06,_0x93f04b++);});const _0x1d2440=Markup[_0xc3a45d(0x171)](_0x8df646);_0x481e79[_0xc3a45d(0x164)](_0xc3a45d(0x17c),_0x1d2440);}}),tgBot[_0x58f5f7(0x237)](/restart_(.+)/,async _0x5bd480=>{const _0x328985=_0x58f5f7,_0x45d2a5=_0x5bd480[_0x328985(0x20d)][0x1];_0x5bd480['editMessageReplyMarkup'](),_0x45d2a5==_0x328985(0x1e7)?config[_0x328985(0x14c)](_0x4cbd13=>{const _0x3ab60a=_0x328985;restartBot(_0x4cbd13[_0x3ab60a(0x260)]);}):restartBot(_0x45d2a5);}),tgBot['command']('on',async _0x580448=>{const _0x23c56b=_0x58f5f7,_0x2ae7c6=getDisabledBots();if(_0x2ae7c6[_0x23c56b(0x223)]==0x0)await sendTelegram(_0x580448[_0x23c56b(0x173)]['id'],_0x23c56b(0x29f));else{if(_0x2ae7c6[_0x23c56b(0x223)]>0x1)_0x2ae7c6[_0x23c56b(0x119)]({'botID':_0x23c56b(0x1e7)});let _0xb6e0fe=[],_0x3571f5=[];const _0x551d4a=_0x2ae7c6[_0x23c56b(0x223)]%0x4==0x0||_0x2ae7c6['length']%0x4==0x3||_0x2ae7c6[_0x23c56b(0x223)]%0x3==0x1?0x4:0x3;let _0x3fd9a2=0x0;_0x2ae7c6[_0x23c56b(0x14c)]((_0x1f31aa,_0x4b3501)=>{const _0x28ee84=_0x23c56b;if(_0x4b3501%_0x551d4a==0x0)_0x3571f5=[];_0x3571f5['push'](Markup['button']['callback'](_0x1f31aa[_0x28ee84(0x260)]==_0x28ee84(0x1e7)?_0x28ee84(0x27b):_0x28ee84(0x182)+_0x1f31aa[_0x28ee84(0x260)],'on_'+_0x1f31aa[_0x28ee84(0x260)])),_0x4b3501%_0x551d4a==0x0&&(_0xb6e0fe[_0x3fd9a2]=_0x3571f5,_0x3fd9a2++);});const _0x382e0e=Markup['inlineKeyboard'](_0xb6e0fe);_0x580448[_0x23c56b(0x164)](_0x23c56b(0x222),_0x382e0e);}}),tgBot[_0x58f5f7(0x237)](/on_(.+)/,async _0x22be3f=>{const _0x144ffe=_0x58f5f7,_0x2be90a=_0x22be3f[_0x144ffe(0x20d)][0x1];_0x22be3f[_0x144ffe(0x266)]();if(_0x2be90a==_0x144ffe(0x1e7)){const _0x550ae5=getDisabledBots();await sendTelegram(_0x22be3f[_0x144ffe(0x173)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots'),_0x550ae5[_0x144ffe(0x14c)](_0x5c9550=>{const _0x473121=_0x144ffe;if(_0x5c9550['botID']!=_0x473121(0x1e7))toggleBot(_0x5c9550[_0x473121(0x260)],toggleStatus(_0x5c9550[_0x473121(0x260)]),_0x473121(0x225));});}else await sendTelegram(_0x22be3f['chat']['id'],_0x144ffe(0xcf)+_0x2be90a),toggleBot(_0x2be90a,toggleStatus(_0x2be90a),_0x144ffe(0x225));}),tgBot[_0x58f5f7(0x1ac)]('off',async _0x2f7874=>{const _0x5912af=_0x58f5f7,_0x45b608=getEnabledBots();if(_0x45b608[_0x5912af(0x223)]==0x0)await sendTelegram(_0x2f7874['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x45b608[_0x5912af(0x223)]>0x1)_0x45b608[_0x5912af(0x119)]({'botID':_0x5912af(0x1e7)});let _0x236f50=[],_0x315058=[];const _0x376d8c=_0x45b608['length']%0x4==0x0||_0x45b608[_0x5912af(0x223)]%0x4==0x3||_0x45b608[_0x5912af(0x223)]%0x3==0x1?0x4:0x3;let _0x2b863c=0x0;_0x45b608['forEach']((_0xb5908f,_0x25cd96)=>{const _0x3577db=_0x5912af;if(_0x25cd96%_0x376d8c==0x0)_0x315058=[];_0x315058[_0x3577db(0x119)](Markup[_0x3577db(0x257)][_0x3577db(0x285)](_0xb5908f[_0x3577db(0x260)]==_0x3577db(0x1e7)?_0x3577db(0x27b):_0x3577db(0x182)+_0xb5908f[_0x3577db(0x260)],'off_'+_0xb5908f[_0x3577db(0x260)])),_0x25cd96%_0x376d8c==0x0&&(_0x236f50[_0x2b863c]=_0x315058,_0x2b863c++);});const _0x33ea30=Markup[_0x5912af(0x171)](_0x236f50);_0x2f7874[_0x5912af(0x164)](_0x5912af(0x28c),_0x33ea30);}}),tgBot['action'](/off_(.+)/,async _0x5ae6bb=>{const _0x9599e2=_0x58f5f7,_0x347423=_0x5ae6bb[_0x9599e2(0x20d)][0x1];_0x5ae6bb[_0x9599e2(0x266)]();if(_0x347423==_0x9599e2(0x1e7)){const _0xc90939=getEnabledBots();await sendTelegram(_0x5ae6bb[_0x9599e2(0x173)]['id'],_0x9599e2(0x1d3)),_0xc90939[_0x9599e2(0x14c)](_0x4431ae=>{const _0xf16416=_0x9599e2;if(_0x4431ae['botID']!=_0xf16416(0x1e7))toggleBot(_0x4431ae['botID'],toggleStatus(_0x4431ae[_0xf16416(0x260)]),'stopped');});}else await sendTelegram(_0x5ae6bb[_0x9599e2(0x173)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x347423),toggleBot(_0x347423,toggleStatus(_0x347423),_0x9599e2(0x225));}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x296),async _0x9ac74f=>{const _0x299db6=_0x58f5f7,_0x42d3ae=getEnabledBots();if(_0x42d3ae['length']==0x0)await sendTelegram(_0x9ac74f[_0x299db6(0x173)]['id'],_0x299db6(0xec));else{if(_0x42d3ae[_0x299db6(0x223)]>0x1){let _0x1145fb=[],_0x30c390=[];const _0x439c61=_0x42d3ae[_0x299db6(0x223)]%0x4==0x0||_0x42d3ae[_0x299db6(0x223)]%0x4==0x3||_0x42d3ae['length']%0x3==0x1?0x4:0x3;let _0x3d989b=0x0;_0x42d3ae[_0x299db6(0x14c)]((_0x18c953,_0x6e4c4c)=>{const _0x2ea867=_0x299db6;if(_0x6e4c4c%_0x439c61==0x0)_0x30c390=[];_0x30c390[_0x2ea867(0x119)](Markup[_0x2ea867(0x257)][_0x2ea867(0x285)]('Bot\x20'+_0x18c953[_0x2ea867(0x260)],_0x2ea867(0x1d2)+_0x18c953[_0x2ea867(0x260)])),_0x6e4c4c%_0x439c61==0x0&&(_0x1145fb[_0x3d989b]=_0x30c390,_0x3d989b++);});const _0x5c1f08=Markup[_0x299db6(0x171)](_0x1145fb);_0x9ac74f[_0x299db6(0x164)](_0x299db6(0x10f),_0x5c1f08);}else{const _0x2e2dd5=_0x42d3ae[0x0][_0x299db6(0x260)];if(pid[_0x2e2dd5])pid[_0x2e2dd5][_0x299db6(0x27e)]({'function':_0x299db6(0xe9),'args':null});}}}),tgBot[_0x58f5f7(0x237)](/metrics_(.+)/,async _0x1a53b7=>{const _0x2b5c60=_0x58f5f7,_0x3f4731=_0x1a53b7[_0x2b5c60(0x20d)][0x1];_0x1a53b7[_0x2b5c60(0x266)]();if(pid[_0x3f4731])pid[_0x3f4731][_0x2b5c60(0x27e)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x19c),async _0x221ffa=>{const _0x2a4863=_0x58f5f7,_0x329c2a=getEnabledBots();if(_0x329c2a[_0x2a4863(0x223)]==0x0)await sendTelegram(_0x221ffa[_0x2a4863(0x173)]['id'],_0x2a4863(0xec));else{if(_0x329c2a[_0x2a4863(0x223)]>0x1){let _0x47ed49=[],_0x1ea315=[];const _0x1ed363=_0x329c2a[_0x2a4863(0x223)]%0x4==0x0||_0x329c2a[_0x2a4863(0x223)]%0x4==0x3||_0x329c2a[_0x2a4863(0x223)]%0x3==0x1?0x4:0x3;let _0x1a4af4=0x0;_0x329c2a[_0x2a4863(0x14c)]((_0x12aad0,_0x1a1831)=>{const _0x2b06a0=_0x2a4863;if(_0x1a1831%_0x1ed363==0x0)_0x1ea315=[];_0x1ea315[_0x2b06a0(0x119)](Markup[_0x2b06a0(0x257)]['callback'](_0x2b06a0(0x182)+_0x12aad0[_0x2b06a0(0x260)],_0x2b06a0(0x170)+_0x12aad0[_0x2b06a0(0x260)])),_0x1a1831%_0x1ed363==0x0&&(_0x47ed49[_0x1a4af4]=_0x1ea315,_0x1a4af4++);});const _0xd9b4b4=Markup['inlineKeyboard'](_0x47ed49);_0x221ffa[_0x2a4863(0x164)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0xd9b4b4);}else{const _0xad6041=_0x329c2a[0x0][_0x2a4863(0x260)];if(pid[_0xad6041])pid[_0xad6041][_0x2a4863(0x27e)]({'function':_0x2a4863(0x23d),'args':null});}}}),tgBot[_0x58f5f7(0x237)](/portfolio_(.+)/,async _0x523834=>{const _0x22b060=_0x58f5f7,_0x1e410f=_0x523834[_0x22b060(0x20d)][0x1];_0x523834[_0x22b060(0x266)]();if(pid[_0x1e410f])pid[_0x1e410f][_0x22b060(0x27e)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x58f5f7(0x1ac)]('update',async _0x20eb84=>{const _0x2a204f=_0x58f5f7;await getMessages();if(!updateAvailable)await sendTelegram(_0x20eb84['chat']['id'],_0x2a204f(0x15c));else{if(!validInstallation)await sendTelegram(_0x20eb84[_0x2a204f(0x173)]['id'],_0x2a204f(0x291));else{const _0x2978d3=Markup[_0x2a204f(0x171)]([Markup['button'][_0x2a204f(0x285)](_0x2a204f(0x15a),_0x2a204f(0x25b)),Markup[_0x2a204f(0x257)][_0x2a204f(0x285)]('No','update_no')]);_0x20eb84[_0x2a204f(0x164)](_0x2a204f(0x205),_0x2978d3);}}}),tgBot['action'](/update_(.+)/,async _0x85a707=>{const _0x3e6524=_0x58f5f7,_0xa87449=_0x85a707[_0x3e6524(0x20d)][0x1];_0x85a707[_0x3e6524(0x266)](),_0xa87449=='yes'&&(await sendTelegram(_0x85a707[_0x3e6524(0x173)]['id'],_0x3e6524(0x228)),updateBB(_0x3e6524(0x24c))),_0xa87449=='no'&&await sendTelegram(_0x85a707[_0x3e6524(0x173)]['id'],_0x3e6524(0x18b));}),tgBot['command'](_0x58f5f7(0x204),async _0x30f63b=>{const _0x904e13=_0x58f5f7;if(!validInstallation)await sendTelegram(_0x30f63b[_0x904e13(0x173)]['id'],_0x904e13(0x22c));else{const _0xd5e656=Markup[_0x904e13(0x171)]([Markup['button'][_0x904e13(0x285)](_0x904e13(0x15a),'reinstall_yes'),Markup[_0x904e13(0x257)][_0x904e13(0x285)]('No',_0x904e13(0x281))]);_0x30f63b[_0x904e13(0x164)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0xd5e656);}}),tgBot[_0x58f5f7(0x237)](/reinstall_(.+)/,async _0x2b6717=>{const _0x3bd64e=_0x58f5f7,_0x5eac27=_0x2b6717['match'][0x1];_0x2b6717['editMessageReplyMarkup'](),_0x5eac27==_0x3bd64e(0x112)&&(await sendTelegram(_0x2b6717[_0x3bd64e(0x173)]['id'],_0x3bd64e(0xf1)),updateBB(_0x3bd64e(0x204))),_0x5eac27=='no'&&await sendTelegram(_0x2b6717[_0x3bd64e(0x173)]['id'],_0x3bd64e(0x1d5));}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0xd8),async _0x25029d=>{const _0x122c9f=_0x58f5f7,_0xeca6dd=getBotsWithMode();if(_0xeca6dd[_0x122c9f(0x223)]==0x0)await sendTelegram(_0x25029d[_0x122c9f(0x173)]['id'],_0x122c9f(0xec));else{let _0x131c34=[],_0xcddd52=[];const _0x58fe70=0x2;let _0x40cde5=0x0;_0xeca6dd[_0x122c9f(0x14c)]((_0x578a73,_0x5f3887)=>{const _0x560313=_0x122c9f;if(_0x5f3887%_0x58fe70==0x0)_0xcddd52=[];_0xcddd52[_0x560313(0x119)](Markup['button'][_0x560313(0x285)](_0x560313(0x182)+_0x578a73[_0x560313(0x260)]+'\x20('+_0x578a73[_0x560313(0x261)]+')',_0x560313(0x234)+_0x578a73['botID'])),_0x5f3887%_0x58fe70==0x0&&(_0x131c34[_0x40cde5]=_0xcddd52,_0x40cde5++);});const _0x40cc05=Markup[_0x122c9f(0x171)](_0x131c34);_0x25029d[_0x122c9f(0x164)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x40cc05);}}),tgBot[_0x58f5f7(0x237)](/toggle_(.+)/,async _0xc24bc8=>{const _0x4a7a12=_0x58f5f7,_0x70a16e=_0xc24bc8[_0x4a7a12(0x20d)][0x1];_0xc24bc8[_0x4a7a12(0x266)]();const _0x8b070b=getBotsWithMode(),_0x204534=_0x8b070b[_0x4a7a12(0x153)](_0x44ab6f=>_0x44ab6f[_0x4a7a12(0x260)]==_0x70a16e),_0x3b4939=_0x204534[_0x4a7a12(0x261)]=='auto'?_0x4a7a12(0x238):_0x4a7a12(0x176);await sendTelegram(_0xc24bc8[_0x4a7a12(0x173)]['id'],_0x4a7a12(0x26a)+_0x70a16e+_0x4a7a12(0x20b)+_0x3b4939+'\x20mode'),toggleBotMode(_0x70a16e);}),tgBot[_0x58f5f7(0x1ac)](_0x58f5f7(0x1e8),async _0x2c3104=>{const _0x193cac=_0x58f5f7;let _0x500a1a='';config[_0x193cac(0x14c)](_0x22a756=>{const _0x45500e=_0x193cac;_0x500a1a+=_0x45500e(0x182)+_0x22a756[_0x45500e(0x260)]+':\x20'+_0x22a756['botname']+'\x0a';}),await sendTelegram(_0x2c3104[_0x193cac(0x173)]['id'],_0x500a1a,{'parse_mode':'HTML'});}),tgBot['command'](_0x58f5f7(0x22e),async _0x482ff4=>{const _0x418ad7=_0x58f5f7;await sendTelegram(_0x482ff4[_0x418ad7(0x173)]['id'],_0x43c3ac);}),process[_0x58f5f7(0x1a9)](_0x58f5f7(0xd4),()=>tgBot[_0x58f5f7(0xcb)](_0x58f5f7(0xd4))),process[_0x58f5f7(0x1a9)](_0x58f5f7(0x1fb),()=>tgBot['stop'](_0x58f5f7(0x1fb))),tgBot[_0x58f5f7(0x253)]();}}function _0x2e07(_0x5189fe,_0x1c63af){const _0x3fe28a=_0x1881();return _0x2e07=function(_0x19cb94,_0x329f44){_0x19cb94=_0x19cb94-0xad;let _0x1881ba=_0x3fe28a[_0x19cb94];return _0x1881ba;},_0x2e07(_0x5189fe,_0x1c63af);}function disableTelegram(){tgBot&&tgBot['stop']();}async function sendTelegram(_0xf2031a,_0x396fb3,_0x49deea){const _0x18e781=_0x2bc2cd;try{await tgBot[_0x18e781(0xc9)][_0x18e781(0x294)](_0xf2031a,_0x396fb3,_0x49deea);}catch(_0x8da3d2){console['log'](_0x18e781(0x1d0),_0x8da3d2);}}async function sendTelegramBot(_0x256f9a,_0x53313e){const _0x5b6ef8=_0x2bc2cd;if(settings[_0x5b6ef8(0x157)]){if(settings[_0x5b6ef8(0x1d8)]==_0x5b6ef8(0x1e7)||(_0x53313e[_0x5b6ef8(0x1b0)]=='error'||_0x53313e[_0x5b6ef8(0x1b0)]==_0x5b6ef8(0x14f)||_0x53313e[_0x5b6ef8(0x1b0)]==_0x5b6ef8(0x1c7))&&settings[_0x5b6ef8(0x1d8)]=='alerts'||_0x53313e[_0x5b6ef8(0x1b0)]==_0x5b6ef8(0xfa)&&settings['telegramEvents']==_0x5b6ef8(0x271)){if(tgBot&&settings[_0x5b6ef8(0x17a)]){if(_0x53313e['showname'])await sendTelegram(settings[_0x5b6ef8(0x17a)],_0x53313e[_0x5b6ef8(0x268)]+_0x5b6ef8(0x252)+_0x53313e[_0x5b6ef8(0x13f)]);else await sendTelegram(settings[_0x5b6ef8(0x17a)],'Bot\x20'+_0x256f9a+_0x5b6ef8(0x252)+_0x53313e['event']);}}}}async function sendTelegramMsg(_0x255f1b,_0x3c99e2=_0x2bc2cd(0x138)){const _0x318d9a=_0x2bc2cd;return settings[_0x318d9a(0x157)]&&tgBot&&settings[_0x318d9a(0x17a)]?(await sendTelegram(settings[_0x318d9a(0x17a)],_0x255f1b,{'parse_mode':_0x3c99e2}),!![]):![];}function getDeviceWithIp(_0x32aaa3){return devices['find'](_0x380ac0=>_0x380ac0['ip']===_0x32aaa3);}async function temporaryAccess2FA(_0x449cb6,_0x412de2){const _0x426258=_0x2bc2cd;let _0x3aa60c=new Date(),_0x1dd9f1=![];if(lastIpApproval){if(_0x3aa60c-lastIpApproval<0x1388)_0x1dd9f1=!![];}lastIpApproval=new Date();if(_0x1dd9f1)return;if(tgBot&&settings['telegramChatId']){const _0x28743f=Markup['inlineKeyboard']([Markup['button']['callback'](_0x426258(0x199),'tempaccess_5'),Markup['button'][_0x426258(0x285)](_0x426258(0xfc),_0x426258(0x21a)),Markup[_0x426258(0x257)][_0x426258(0x285)](_0x426258(0xc7),_0x426258(0x1f2)),Markup[_0x426258(0x257)][_0x426258(0x285)](_0x426258(0x106),_0x426258(0x20c))]);await sendTelegram(settings[_0x426258(0x17a)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x412de2)[_0x426258(0x265)]+'\x20?',_0x28743f),tgBot[_0x426258(0x237)](/tempaccess_(.+)/,async _0x8687c7=>{const _0x5722dc=_0x426258,_0x44c912=_0x8687c7[_0x5722dc(0x20d)][0x1];_0x8687c7[_0x5722dc(0x266)](),devices[_0x449cb6][_0x5722dc(0x217)]={'clientip':_0x412de2,'timestamp':new Date()[_0x5722dc(0x1f6)](),'expiry':_0x44c912},_0x44c912!=_0x5722dc(0x106)?(await sendTelegram(_0x8687c7[_0x5722dc(0x173)]['id'],_0x5722dc(0x1bc)+_0x44c912+'\x20minutes',{'parse_mode':_0x5722dc(0x138)}),io['to'](_0x449cb6)[_0x5722dc(0x11c)](_0x5722dc(0xc1),{'access':{'allow':![],'reason':_0x5722dc(0x19a),'token':null}})):(await sendTelegram(_0x8687c7[_0x5722dc(0x173)]['id'],_0x5722dc(0xe1)),io['to'](_0x449cb6)['emit'](_0x5722dc(0xc1),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}}async function loginAccess2FA(_0x481768,_0x142fe9){const _0x300931=_0x2bc2cd;if(tgBot&&settings[_0x300931(0x17a)]){const _0x225273=Markup[_0x300931(0x171)]([Markup[_0x300931(0x257)][_0x300931(0x285)](_0x300931(0x163),_0x300931(0x250)+loginExpiry),Markup[_0x300931(0x257)][_0x300931(0x285)](_0x300931(0x106),_0x300931(0xd0))]);await sendTelegram(settings[_0x300931(0x17a)],_0x300931(0x174)+normalizeIP(_0x142fe9)[_0x300931(0x265)]+'\x20?',_0x225273),tgBot[_0x300931(0x237)](/login2fa_(.+)/,async _0x26b4eb=>{const _0x28afde=_0x300931,_0x527f5c=_0x26b4eb[_0x28afde(0x20d)][0x1];_0x26b4eb[_0x28afde(0x266)](),devices[_0x481768][_0x28afde(0x192)]={'clientip':_0x142fe9,'timestamp':new Date()['getTime'](),'expiry':_0x527f5c},_0x527f5c!='reject'?(await sendTelegram(_0x26b4eb['chat']['id'],'Login\x20accepted',{'parse_mode':_0x28afde(0x138)}),io['to'](_0x481768)[_0x28afde(0x11c)](_0x28afde(0xc1),{'access':{'allow':![],'reason':_0x28afde(0x19a),'token':null}})):(await sendTelegram(_0x26b4eb[_0x28afde(0x173)]['id'],_0x28afde(0x280)),io['to'](_0x481768)[_0x28afde(0x11c)](_0x28afde(0xc1),{'access':{'allow':![],'reason':_0x28afde(0x181),'token':null}}));});}}function _0x1881(){const _0x236511=['get-logs','\x20(1)','text','reject','/names\x20-\x20show\x20bot\x20names\x0a','\x1b[31m','mkdirSync','message','bb-settings.json','backup/','output-002.log','NTBA_FIX_319','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','backup-full','yes','build2','6b67f3d61ee94b8f5c80b4affef4c4d9','keys','readdirSync','enable','Backup\x20file\x20uploaded','push','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','env','emit','logout','/update\x20-\x20update\x20Balance\x20Bot\x0a','bbPassword','date-fns','Notifications\x20enabled\x0a','get-backup-files','output-003.log','name','live','sendFile','full','string','/:bot','invalid\x20credentials','versions','0.0.0','bb-secure.json','child_process','close','login\x20not\x20required','getMinutes','f2aRequired','headless','express-fileupload','cloneDeep','listen','***','HTML','Unauthorized\x20login\x20attempt\x20(timeout)','static','temporaryAccessAllowed','uuid-random','/restart\x20-\x20restart\x20bot(s)\x0a','then','event','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','request','util','yargs/yargs','assign','Password\x20has\x20been\x20reset\x20to:\x20','whitelist','backup-full@','stringify','\x1b[33m','/status\x20-\x20show\x20bot(s)\x20status\x0a','rmSync','forEach','getStartingBalances','sockets','warning','toggleBotMode','port','timeshift','find','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','temporary\x20access\x20not\x20allowed','index.html','telegramEnabled','unlinkSync','/off\x20-\x20stop\x20bot(s)\x0a','Yes','Invalid\x20username\x20or\x20IP\x20address','Your\x20installation\x20is\x20already\x20up\x20to\x20date','reset-password','get','clients','8CZVRjH','new','User\x20has\x20been\x20validated','accept','reply','store','::1','(((.+)+)+)+$','/start','-----------------------------------------------------------------------------------','Failed\x20to\x20download\x20','delete-bot','remoteAddress','mixpanel','Unauthorized\x20attempt\x20to\x20store\x20configuration','2FA\x20login\x20required','portfolio_','inlineKeyboard','use','chat','Allow\x20login\x20from\x20IP\x20address\x20','storeHeadless','auto','padStart','restore_yes','hybrid-crypto-js','telegramChatId','latestversion','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','getFullYear','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','<b>Balance\x20Bot\x20Status:</b>\x0a','join','2FA\x20login\x20rejected','Bot\x20','telegraf','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','214356jOZVzj','token','add-bot','from','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','\x20|\x20client:\x20...','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','backup','1000','any','hex','Restore\x20process\x20confirmed','output-000.log','telegram2FaApproval','password','bot.js','telegramUsername','filter','copyFileSync','confirm-message','5\x20min','reload','Disabled\x20Bot\x20','portfolio','Unauthorized\x20attempt\x20to\x20get\x20messages','cancel-loading','getSeconds','https://api.ipify.org?format=json','3502424ETXcJi','running','simple','graphql-request','35BkqMJN','endsWith','disabled','restart_','once','lastmsgtelegram','config/','command','store-settings','output-001.log','_data','type','removeAllListeners','getUTCHours','update-bb','alias','publicKey','Idling\x20(','args','resetpw_no','/disable\x20-\x20disable\x20notifications\x0a','start','toIPv4Address','Access\x20enabled\x20for\x20','createServer','exec','connection','createWriteStream','argv','log','compareSync','generate','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','format','success','Logged\x20in\x20user\x20...','defaults','resetHistory','kill','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','temp/','node-zip','\x20|\x20','Telegram\x20error:','2FA','metrics_','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots',')\x20\x20\x20|\x20Bot\x20','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','sha256','username','telegramEvents','secure','expiry','params','environment','ipc','login','config','conn','Unauthorized\x20attempt\x20to\x20download\x20','onepagemode','Logged\x20out\x20user\x20...','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','154248CJaUPi','pidRefreshToken','all','names','Alerts','version.json','\x1b[35m','hashSync','login\x20token\x20valid','apply','enabled','getPortfolio','logs','tempaccess_30','notification','ipaddr.js','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','getTime','privateKey','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','jsonwebtoken','getDate','SIGTERM','statSync','new-disabled','staging','apiKey','telegrammsg','getMonth','write','Telegraf\x20error:','reinstall','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','get-starting-balances','6547734PEFurl','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','bcryptjs','crypto','\x20to\x20','tempaccess_reject','match','Notifications\x20disabled','mtime','disable','max','restore_no','download','IPv4','debug','bots','telegramIpApproval','storeFiat','Unauthorized\x20attempt\x20to\x20confirm\x20message','tempaccess_15','userid','temporary\x20token\x20generated','build','ipv6','decrypt','range','tkn','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','length','logs/','stopped',')\x20|\x20Bot\x20','exchange','Starting\x20Balance\x20Bot\x20update','existsSync','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','reset-history','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','help','/:bot/portfolio','cancelLoading','timestamp','toString','Starting\x20new\x20bot\x20|\x20Bot\x20','toggle_','/on\x20-\x20start\x20bot(s)\x0a','lastmsgemitted','action','manual','uuid','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','2FA\x20required','login\x20token\x20generated','sendPortfolioTelegram','sortBy','secret','Network\x20Interfaces:','function','place-order','reinstall-bb','Setting\x20access:\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','/:bot/configuration','handshake','<b>Telegram\x20Bot\x20Status:</b>\x0a','server','You\x20can\x20use\x20the\x20following\x20commands:\x0a',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','update','Error:\x20Invalid\x20argument\x20','************','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','login2fa_','socket.io','\x20>\x20','launch','address','parse','referer','button','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','value','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','update_yes','bbvNew','backupfile','apiPassword','logged\x20out','botID','mode','deleteHistoryAlerts','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','messages','show','editMessageReplyMarkup','files','botname','RSA','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','bb-config.json','config_all','readFileSync',':\x20Bot\x20Mgr\x20>\x20','#RES#\x20if\x20running\x20on\x20server','orders','file','initclient','Invalid\x20authentication\x20token\x20(2)','disconnect','Orders','bot','family','DEFLATE','Unauthorized\x20attempt\x20to\x20get\x20events','All\x20bots','-events.json','/download/:type','send','remove','Login\x20rejected','reinstall_no','telegramToken','sort','private','callback','File\x20uploaded','host','init','9328010KWikGd','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','restart','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','exit','[ip-address]','isIPv4MappedAddress','-results.json','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','hasOwnProperty','login\x20required','sendMessage','Notifications\x20enabled','metrics','Invalid\x20IP\x20address','isValid','pidExpireLogin','placeOrder','slice','reason','delete-alerts','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','All\x20bots\x20running\x20right\x20now','toIPv4MappedAddress','/:bot/coins','::ffff:127.0.0.1','settings.','\x1b[36m','get-messages','Unauthorized\x20attempt\x20to\x20update\x20settings','settings','track','Session\x20expired\x20for\x20user\x20...','15GcMrWQ','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','zip/','post','botmanager','fork','showConfig','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','config_orders','restore-backup-file','started','isDirectory','bot-','status','updatebotmanager','Bot\x20Mgr\x20>\x20','#RES#\x20','Error\x20removing\x20old\x20backup\x20files:','express','30\x20min','replace','telegram','includes','stop','Deleted\x20Bot\x20','split','217034HnOoFG','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','login2fa_reject','Unauthorized\x20attempt\x20to\x20log\x20out','getHours','axios','SIGINT','generateKeyPairAsync','allow','clientip','toggle','/enable\x20-\x20enable\x20notifications\x0a','access','Token\x20blacklisted','exp','-config.json','min','2FA\x20login\x20token\x20generated','search','Temporary\x20access\x20rejected','writeFileSync','Unauthorized\x20attempt\x20to\x20show\x20configuration','socket','5446546inIwYS','connected','bbUsername','data','sendMetricsTelegram','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','startsWith','No\x20bots\x20running\x20right\x20now','add','backup-full.zip','Invalid\x20authentication\x20token\x20(1)','Password\x20reset\x20rejected','Starting\x20Balance\x20Bot\x20reinstallation','test','headers','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','blacklist','All','bb/','.zip','*$1*','order','3000','15\x20min','verify','(staging)','randomBytes','number','Unauthorized\x20attempt\x20to\x20delete\x20bot','/output-000.log'];_0x1881=function(){return _0x236511;};return _0x1881();}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4f5e9e=_0x2bc2cd;return dbConfig[_0x4f5e9e(0x15e)]('bots')[_0x4f5e9e(0x23e)](_0x4f5e9e(0x260))[_0x4f5e9e(0x196)]({'status':_0x4f5e9e(0x1ef)})[_0x4f5e9e(0x259)]()||[];}function getDisabledBots(){const _0x4b0dfa=_0x2bc2cd;return dbConfig['get'](_0x4b0dfa(0x216))[_0x4b0dfa(0x23e)](_0x4b0dfa(0x260))['filter']({'status':_0x4b0dfa(0x1a7)})[_0x4b0dfa(0x259)]()||[];}function getBotAttributes(_0x3ba85d){const _0x572941=_0x2bc2cd;let _0x1eda19={};const _0xd036b9=configpath+_0x572941(0xc0)+_0x3ba85d+_0x572941(0xdd),_0x544d4d=fs[_0x572941(0x229)](_0xd036b9);if(_0x544d4d){const _0x24455f=fs[_0x572941(0x26e)](_0xd036b9);try{const _0x3ad5de=JSON[_0x572941(0x255)](_0x24455f),_0x3ebc89=_0x3ad5de?_0x3ad5de[_0x572941(0x277)][0x0]['headless']:![];_0x1eda19[_0x572941(0x261)]=_0x3ebc89?_0x572941(0x176):_0x572941(0x238),_0x1eda19[_0x572941(0x268)]=_0x3ad5de?_0x3ad5de[_0x572941(0x277)][0x0][_0x572941(0x268)]:_0x572941(0x182)+_0x3ba85d;}catch(_0x2ba993){_0x1eda19['mode']=_0x572941(0x238),_0x1eda19['botname']=_0x572941(0x182)+_0x3ba85d;}}else _0x1eda19[_0x572941(0x261)]=_0x572941(0x238),_0x1eda19[_0x572941(0x268)]=_0x572941(0x182)+_0x3ba85d;return _0x1eda19;}function getBotsWithMode(){const _0x55017f=_0x2bc2cd,_0x27c97d=dbConfig['get'](_0x55017f(0x216))[_0x55017f(0x23e)]('botID')[_0x55017f(0x259)]()||[];return _0x27c97d[_0x55017f(0x14c)](_0x11874f=>{const _0xd06add=_0x55017f;let _0x2e986c=getBotAttributes(_0x11874f[_0xd06add(0x260)]);_0x11874f[_0xd06add(0x261)]=_0x2e986c[_0xd06add(0x261)];}),_0x27c97d;}function getBotExchanges(){const _0x24b287=_0x2bc2cd;let _0x2dbf99=[];const _0x28d1eb=dbConfig[_0x24b287(0x15e)]('bots')[_0x24b287(0x23e)](_0x24b287(0x260))[_0x24b287(0x259)]()||[];_0x28d1eb[_0x24b287(0x14c)](_0x32ee86=>{const _0x36d36e=_0x24b287;if(_0x32ee86[_0x36d36e(0xc1)]==_0x36d36e(0x1ef)){const _0x5ab1ea=configpath+_0x36d36e(0xc0)+_0x32ee86[_0x36d36e(0x260)]+_0x36d36e(0xdd),_0x5d9f2b=fs[_0x36d36e(0x229)](_0x5ab1ea);let _0x393f65;if(_0x5d9f2b){const _0x33943a=fs[_0x36d36e(0x26e)](_0x5ab1ea);try{const _0x43f6da=JSON[_0x36d36e(0x255)](_0x33943a);_0x393f65=_0x43f6da?_0x43f6da[_0x36d36e(0x277)][0x0][_0x36d36e(0x227)]:null;}catch(_0x16821d){}}if(_0x393f65)_0x2dbf99[_0x36d36e(0x119)](_0x393f65);}});const _0x59b55f=[...new Set(_0x2dbf99)]['sort']();return _0x59b55f;}async function initUser(){const _0x33f0bc=_0x2bc2cd;if(!settings[_0x33f0bc(0x21b)]){const _0x1b7fda=uuidRandom();mixpanel[_0x33f0bc(0x1b4)](_0x1b7fda),updateSetting('userid',_0x1b7fda);}}async function initSecure(){const _0x5b06ef=_0x2bc2cd;let _0x4d06d1=getSecure();if(!_0x4d06d1[_0x5b06ef(0x292)](_0x5b06ef(0x23f))){let _0x108eab=await generateKeys();_0x4d06d1[_0x5b06ef(0x1b5)]=_0x108eab['publicKey'],_0x4d06d1['privateKey']=_0x108eab[_0x5b06ef(0x1f7)],_0x4d06d1[_0x5b06ef(0x23f)]=crypto[_0x5b06ef(0xff)](0x20)[_0x5b06ef(0x232)](_0x5b06ef(0x18f));;storeSecure(_0x4d06d1);}}function getSettings(){const _0x1976d8=_0x2bc2cd;return dbSettings['get'](_0x1976d8(0xb1))['value']()||{};}function getSecure(){const _0x7aa512=_0x2bc2cd;return dbSecure['get']('secure')[_0x7aa512(0x259)]()||{};}function getBlacklist(){const _0x6f280c=_0x2bc2cd;return dbSecure[_0x6f280c(0x15e)](_0x6f280c(0xf5))[_0x6f280c(0x259)]()||[];}function broadcastToBots(_0xc975b8,_0x3ae677){config['forEach'](_0x4483c0=>{const _0x3c17b7=_0x2e07;if(_0x4483c0[_0x3c17b7(0xc1)]==_0x3c17b7(0x1ef)&&_0x4483c0[_0x3c17b7(0x125)]=='running'||_0x4483c0['status']==_0x3c17b7(0x161)&&_0x4483c0[_0x3c17b7(0x125)]==_0x3c17b7(0x1a2)){if(pid[_0x4483c0['botID']])pid[_0x4483c0['botID']][_0x3c17b7(0x27e)]({[_0xc975b8]:_0x3ae677});}});}function storeSettings(_0x3b2aa1,_0x3315b6=![]){const _0x3e864a=_0x2bc2cd;_0x3b2aa1={...settings,..._0x3b2aa1};if(_0x3315b6&&_0x3b2aa1['bbPassword']!=_0x3e864a(0x24e)&&_0x3b2aa1[_0x3e864a(0x11f)]!=_0x3e864a(0x137)&&_0x3b2aa1['bbPassword']!=''){const _0x3cdffb=crypt['decrypt'](secure['privateKey'],_0x3b2aa1[_0x3e864a(0x11f)])[_0x3e864a(0x10a)][_0x3e864a(0xcd)]('@')[0x0],_0x49f279=bcrypt[_0x3e864a(0x1ec)](_0x3cdffb,saltRounds);_0x3b2aa1={..._0x3b2aa1,'bbPassword':_0x49f279};}if(_0x3315b6&&_0x3b2aa1[_0x3e864a(0x282)]!=_0x3e864a(0x24e)&&_0x3b2aa1[_0x3e864a(0x282)]!='***'&&_0x3b2aa1['telegramToken']!=''){const _0x1fa601=crypt[_0x3e864a(0x21f)](secure[_0x3e864a(0x1f7)],_0x3b2aa1[_0x3e864a(0x282)])[_0x3e864a(0x10a)][_0x3e864a(0xcd)]('@')[0x0];_0x3b2aa1={..._0x3b2aa1,'telegramToken':_0x1fa601};}const _0x17ac6f=_0x3b2aa1['telegramToken']!=_0x3e864a(0x24e)&&_0x3b2aa1[_0x3e864a(0x282)]!=settings[_0x3e864a(0x282)]||_0x3b2aa1[_0x3e864a(0x195)]!=settings['telegramUsername'],_0x25bf6a=_0x3b2aa1[_0x3e864a(0x282)]==''||_0x3b2aa1['telegramUsername']=='';_0x17ac6f&&(_0x3b2aa1['telegramChatId']=null,_0x3b2aa1[_0x3e864a(0x1d8)]=_0x3e864a(0x1e7));for(const [_0x4602e3,_0x1410ae]of Object['entries'](_0x3b2aa1)){if(_0x4602e3=='telegramToken'&&_0x1410ae==_0x3e864a(0x24e)){_0x3b2aa1[_0x3e864a(0x282)]=settings[_0x3e864a(0x282)];continue;};if(_0x4602e3==_0x3e864a(0x11f)&&_0x1410ae==_0x3e864a(0x24e)){_0x3b2aa1[_0x3e864a(0x11f)]=settings['bbPassword'];continue;};dbSettings['set'](_0x3e864a(0xad)+_0x4602e3,_0x1410ae)['write']();}settings=_0x3b2aa1,io['to'](_0x3e864a(0xb8))[_0x3e864a(0x11c)]('settings',cleanSettings()),broadcastToBots(_0x3e864a(0x152),settings[_0x3e864a(0x152)]),broadcastToBots('onepagemode',settings[_0x3e864a(0x1e2)]);if(_0x17ac6f&&!_0x25bf6a)initTelegram();if(_0x17ac6f&&_0x25bf6a)disableTelegram();getAllClients()[_0x3e864a(0x14c)](_0x3c46dd=>{const _0x3ef80f=_0x3e864a;getSocket(_0x3c46dd['id'])[_0x3ef80f(0x11c)](_0x3ef80f(0xc1),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x548234,_0x3201db){const _0x58500f=_0x2bc2cd;dbSettings['set'](_0x58500f(0xad)+_0x548234,_0x3201db)[_0x58500f(0x202)](),settings=getSettings(),io['to'](_0x58500f(0xb8))['emit'](_0x58500f(0xb1),cleanSettings());}function storeSecure(_0x2bf121){const _0x476e6e=_0x2bc2cd;dbSecure[_0x476e6e(0x15e)](_0x476e6e(0x1d9))[_0x476e6e(0x119)](_0x2bf121)[_0x476e6e(0x202)](),secure=_0x2bf121;}function addBlacklist(_0x188a92){const _0x579b9f=_0x2bc2cd;cleanBlacklist();let _0x1b9494;devices[_0x188a92]['telegramIpApproval']?_0x1b9494=Math[_0x579b9f(0x211)](devices[_0x188a92][_0x579b9f(0x217)][_0x579b9f(0x1da)],loginExpiry):_0x1b9494=loginExpiry,dbSecure['get'](_0x579b9f(0xf5))['push']({'expiry':new Date()['getTime']()+_0x1b9494*0x3c*0x3e8,'token':devices[_0x188a92][_0x579b9f(0xda)][_0x579b9f(0x186)]})['write'](),blacklist=dbSecure[_0x579b9f(0x15e)](_0x579b9f(0xf5))[_0x579b9f(0x259)]();}function cleanBlacklist(){const _0x5233d3=_0x2bc2cd;let _0x524b46=dbSecure['get'](_0x5233d3(0xf5))[_0x5233d3(0x135)]()['value'](),_0x559d12=new Date()[_0x5233d3(0x1f6)]();_0x524b46['forEach'](_0x4bcbbe=>{const _0x1dc9e5=_0x5233d3;_0x4bcbbe['expiry']<_0x559d12&&dbSecure[_0x1dc9e5(0x15e)](_0x1dc9e5(0xf5))[_0x1dc9e5(0x27f)]({'expiry':_0x4bcbbe[_0x1dc9e5(0x1da)]})[_0x1dc9e5(0x202)]();});}function initStates(){const _0x20d9a7=_0x2bc2cd;let _0x5313ac=getConfiguration();_0x5313ac[_0x20d9a7(0x14c)](_0x5e0735=>{const _0x3f39ed=_0x20d9a7;_0x5e0735['live']=_0x3f39ed(0x225);}),storeConfiguration(_0x5313ac);}function onKeys(){const _0xd1662f=new RSA();return new Promise(_0xfa614c=>{const _0x16a5ab=_0x2e07;_0xd1662f[_0x16a5ab(0xd5)]()[_0x16a5ab(0x13e)](_0x190a5d=>{_0xfa614c(_0x190a5d);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x33af60=_0x2bc2cd;let _0x258ba7=getSettings(),_0x51e5ae=![];!_0x258ba7[_0x33af60(0x292)](_0x33af60(0x1aa))&&(_0x258ba7[_0x33af60(0x1aa)]=0x0,_0x51e5ae=!![]);!_0x258ba7[_0x33af60(0x292)](_0x33af60(0x236))&&(_0x258ba7[_0x33af60(0x236)]=0x0,_0x51e5ae=!![]);!_0x258ba7['hasOwnProperty']('latestversion')&&(_0x258ba7[_0x33af60(0x17b)]='0.0.0',_0x51e5ae=!![]);!_0x258ba7[_0x33af60(0x292)](_0x33af60(0x1e2))&&(_0x258ba7['onepagemode']=![],_0x51e5ae=!![]);if(_0x51e5ae)storeSettings(_0x258ba7);try{fs[_0x33af60(0x116)](configbackuppath,{'withFileTypes':!![]})[_0x33af60(0x14c)](_0x4d69c2=>{const _0x4a0285=_0x33af60;if(!_0x4d69c2[_0x4a0285(0xbf)]()){if(!_0x4d69c2[_0x4a0285(0x124)]['startsWith'](_0x4a0285(0x147)))fs[_0x4a0285(0x158)](configbackuppath+_0x4d69c2[_0x4a0285(0x124)]);}else fs[_0x4a0285(0x14b)](configbackuppath+_0x4d69c2['name'],{'recursive':!![]});});}catch(_0x37234d){logger[_0x33af60(0x215)](_0x33af60(0xc5),_0x37234d);}}function storeConfiguration(_0x4065de){const _0x3bd07d=_0x2bc2cd;dbConfig[_0x3bd07d(0x15e)](_0x3bd07d(0x216))[_0x3bd07d(0x27f)]()[_0x3bd07d(0x202)](),dbConfig[_0x3bd07d(0x15e)](_0x3bd07d(0x216))['push'](..._0x4065de)[_0x3bd07d(0x202)](),config=_0x4065de;}async function resetPassword(){const _0x70098a=_0x2bc2cd;if(tgBot&&settings[_0x70098a(0x17a)]){const _0x2e75e7=Markup[_0x70098a(0x171)]([Markup['button'][_0x70098a(0x285)](_0x70098a(0x112),'resetpw_yes'),Markup[_0x70098a(0x257)][_0x70098a(0x285)]('no',_0x70098a(0x1b8))]);await sendTelegram(settings['telegramChatId'],_0x70098a(0x1cc),_0x2e75e7),tgBot[_0x70098a(0x237)](/resetpw_(.+)/,async _0x187626=>{const _0x1a0bdf=_0x70098a,_0x360d6b=_0x187626['match'][0x1];_0x187626[_0x1a0bdf(0x266)]();if(_0x360d6b!='no'){const _0x346b24=0xf,_0x4ee610=_0x1a0bdf(0xf4),_0x4f3602=Array[_0x1a0bdf(0x188)](crypto['randomFillSync'](new Uint32Array(_0x346b24)))['map'](_0x311571=>_0x4ee610[_0x311571%_0x4ee610[_0x1a0bdf(0x223)]])[_0x1a0bdf(0x180)](''),_0x4dec3a=bcrypt[_0x1a0bdf(0x1ec)](_0x4f3602,saltRounds);storeSettings({'bbPassword':_0x4dec3a}),await sendTelegram(_0x187626[_0x1a0bdf(0x173)]['id'],_0x1a0bdf(0x145)+_0x4f3602,{'parse_mode':_0x1a0bdf(0x138)});}else await sendTelegram(_0x187626[_0x1a0bdf(0x173)]['id'],_0x1a0bdf(0xf0));});}}async function confirmRestore(_0xb9b121,_0x18f09e){const _0x1dbc4a=_0x2bc2cd;io['to']('botmanager')[_0x1dbc4a(0x11c)]('notification',_0x1dbc4a(0x17e),'success');if(tgBot&&settings[_0x1dbc4a(0x17a)]){const _0x25936f=Markup[_0x1dbc4a(0x171)]([Markup['button'][_0x1dbc4a(0x285)](_0x1dbc4a(0x112),_0x1dbc4a(0x178)),Markup[_0x1dbc4a(0x257)][_0x1dbc4a(0x285)]('no',_0x1dbc4a(0x212))]);await sendTelegram(settings[_0x1dbc4a(0x17a)],_0x1dbc4a(0x23a),_0x25936f),tgBot[_0x1dbc4a(0x237)](/restore_(.+)/,async _0x282d16=>{const _0x24dea4=_0x1dbc4a,_0x52f7f0=_0x282d16['match'][0x1];_0x282d16['editMessageReplyMarkup'](),_0x52f7f0==_0x24dea4(0x112)?(logger[_0x24dea4(0x215)](_0x24dea4(0x190)),await sendTelegram(_0x282d16[_0x24dea4(0x173)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x24dea4(0x138)}),unzipFile(_0xb9b121,_0x18f09e)):(logger[_0x24dea4(0x215)]('Restore\x20process\x20aborted'),await sendTelegram(_0x282d16[_0x24dea4(0x173)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x12b901=_0x2bc2cd,_0x182562=new Date();return _0x182562['getFullYear']()+'/'+(_0x182562[_0x12b901(0x201)]()+0x1)[_0x12b901(0x232)]()[_0x12b901(0x177)](0x2,'0')+'/'+_0x182562[_0x12b901(0x1fa)]()[_0x12b901(0x232)]()[_0x12b901(0x177)](0x2,'0')+'\x20'+_0x182562['getHours']()[_0x12b901(0x232)]()['padStart'](0x2,'0')+':'+_0x182562[_0x12b901(0x131)]()[_0x12b901(0x232)]()[_0x12b901(0x177)](0x2,'0')+':'+_0x182562[_0x12b901(0x19f)]()['toString']()[_0x12b901(0x177)](0x2,'0');}function getTimeStamp(){const _0x924cd2=_0x2bc2cd,_0x2c2785=shiftedTime();return _0x2c2785[_0x924cd2(0x17d)]()+'/'+(_0x2c2785[_0x924cd2(0x201)]()+0x1)[_0x924cd2(0x232)]()['padStart'](0x2,'0')+'/'+_0x2c2785['getDate']()[_0x924cd2(0x232)]()[_0x924cd2(0x177)](0x2,'0')+'\x20'+_0x2c2785['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x2c2785['getMinutes']()[_0x924cd2(0x232)]()['padStart'](0x2,'0')+':'+_0x2c2785[_0x924cd2(0x19f)]()[_0x924cd2(0x232)]()[_0x924cd2(0x177)](0x2,'0');}function getCleanTimeStamp(){const _0x54c9bf=_0x2bc2cd,_0x185e37=shiftedTime();return _0x185e37[_0x54c9bf(0x17d)]()+(_0x185e37[_0x54c9bf(0x201)]()+0x1)[_0x54c9bf(0x232)]()[_0x54c9bf(0x177)](0x2,'0')+_0x185e37['getDate']()[_0x54c9bf(0x232)]()[_0x54c9bf(0x177)](0x2,'0')+'-'+_0x185e37[_0x54c9bf(0xd2)]()[_0x54c9bf(0x232)]()[_0x54c9bf(0x177)](0x2,'0')+_0x185e37[_0x54c9bf(0x131)]()[_0x54c9bf(0x232)]()['padStart'](0x2,'0')+_0x185e37['getSeconds']()[_0x54c9bf(0x232)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x2e9e9a=_0x2bc2cd,_0x24ef01=new Date();let _0xa6c6a1=_0x24ef01;if(settings[_0x2e9e9a(0x152)]&&settings['timeshift']!==0x0)_0xa6c6a1=fns[_0x2e9e9a(0xed)](_0x24ef01,{'hours':settings[_0x2e9e9a(0x152)]});return _0xa6c6a1;}function startScheduler(){const _0x2eb9aa=_0x2bc2cd,_0x51571c=new Date()[_0x2eb9aa(0x1b2)](),_0x3fa4c6=shiftedTime()[_0x2eb9aa(0xd2)]();_0x3fa4c6==0x4&&backupConfigFiles();_0x3fa4c6==0x0&&rotateLogFiles();_0x51571c%0x6==0x0&&triggerAnalytics();_0x51571c%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x589a12){const _0x3a4f91=_0x2bc2cd;logger[_0x3a4f91(0x215)]('Restore\x20backup\x20file\x20'+_0x589a12);const _0x5a7a5d=getBotsWithMode();_0x5a7a5d[_0x3a4f91(0x223)]>0x0?confirmRestore(configbackuppath,_0x589a12):unzipFile(configbackuppath,_0x589a12);}async function getBackupFiles(_0x52e9ef=null){const _0x5790b3=_0x2bc2cd;let _0x154a96=[],_0x3220c8=fs[_0x5790b3(0x116)](configbackuppath,{'withFileTypes':!![]});_0x3220c8[_0x5790b3(0x283)]((_0xe768be,_0x21ee1c)=>_0xe768be[_0x5790b3(0x124)]<_0x21ee1c[_0x5790b3(0x124)]?0x1:_0x21ee1c[_0x5790b3(0x124)]<_0xe768be[_0x5790b3(0x124)]?-0x1:0x0),_0x3220c8[_0x5790b3(0x14c)](_0x3ec896=>{const _0x3733b7=_0x5790b3;if(!_0x3ec896[_0x3733b7(0xbf)]()&&_0x3ec896['name'][_0x3733b7(0xeb)](_0x3733b7(0x147))&&_0x3ec896[_0x3733b7(0x124)][_0x3733b7(0x1a6)](_0x3733b7(0xf8))){const _0x2ec4e7=formatDate(fs[_0x3733b7(0x1fc)](configbackuppath+_0x3ec896[_0x3733b7(0x124)])[_0x3733b7(0x20f)]);_0x154a96[_0x3733b7(0x119)]({'name':_0x3ec896[_0x3733b7(0x124)],'mtime':_0x2ec4e7});}});if(_0x52e9ef)io['to'](_0x52e9ef)[_0x5790b3(0x11c)]('backup-files',_0x154a96);else return _0x154a96;}async function backupConfigFiles(){const _0x2dafea=_0x2bc2cd;await zipFiles(_0x2dafea(0x111));const _0x72db86=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x2dafea(0xee),configbackuppath+(_0x2dafea(0x147)+_0x72db86+'.zip'));let _0x276fdb=fs[_0x2dafea(0x116)](configbackuppath,{'withFileTypes':!![]});_0x276fdb[_0x2dafea(0x283)]((_0x366493,_0x2c6fd7)=>_0x366493[_0x2dafea(0x124)]<_0x2c6fd7[_0x2dafea(0x124)]?0x1:_0x2c6fd7[_0x2dafea(0x124)]<_0x366493['name']?-0x1:0x0),_0x276fdb[_0x2dafea(0x223)]>maxBackups&&fs[_0x2dafea(0x158)](configbackuppath+_0x276fdb[_0x276fdb[_0x2dafea(0x223)]-0x1][_0x2dafea(0x124)]);}function rotateLogFiles(){const _0x5c2d0c=_0x2bc2cd,_0x2a6b28=fs[_0x5c2d0c(0x1fc)](logspath+_0x5c2d0c(0x191)),_0x2c4688=_0x2a6b28['size']/0x400;if(_0x2c4688>0x64){let _0x23552a=fs[_0x5c2d0c(0x116)](logspath,{'withFileTypes':!![]});_0x23552a[_0x5c2d0c(0x283)]((_0x3e720f,_0x1e74a0)=>_0x3e720f['name']<_0x1e74a0[_0x5c2d0c(0x124)]?0x1:_0x1e74a0[_0x5c2d0c(0x124)]<_0x3e720f[_0x5c2d0c(0x124)]?-0x1:0x0),_0x23552a[_0x5c2d0c(0x14c)](_0x1d10d9=>{const _0x3bbcf6=_0x5c2d0c;if(_0x1d10d9[_0x3bbcf6(0x124)]==_0x3bbcf6(0x10d))fs[_0x3bbcf6(0x197)](logspath+_0x1d10d9[_0x3bbcf6(0x124)],logspath+_0x3bbcf6(0x123));if(_0x1d10d9['name']==_0x3bbcf6(0x1ae))fs[_0x3bbcf6(0x197)](logspath+_0x1d10d9[_0x3bbcf6(0x124)],logspath+_0x3bbcf6(0x10d));_0x1d10d9[_0x3bbcf6(0x124)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x1d10d9[_0x3bbcf6(0x124)],logspath+_0x3bbcf6(0x1ae)),fs[_0x3bbcf6(0xe2)](logspath+_0x1d10d9['name'],''));});}}async function zipFiles(_0x532137){const _0x2d2faf=_0x2bc2cd;let _0x256bc0;if(_0x532137==_0x2d2faf(0x1f1))_0x256bc0=logspath;if(_0x532137==_0x2d2faf(0x18c))_0x256bc0=configpath;if(_0x532137==_0x2d2faf(0x111))_0x256bc0=configpath;let _0x4e4147=fs[_0x2d2faf(0x116)](_0x256bc0,{'withFileTypes':!![]});const _0xada1d8=new require(_0x2d2faf(0x1ce))();_0x4e4147['forEach'](_0x4e1911=>{const _0x52b329=_0x2d2faf;if(!_0x4e1911[_0x52b329(0xbf)]()){let _0xe83823=fs[_0x52b329(0x26e)](_0x256bc0+_0x4e1911[_0x52b329(0x124)]);if(_0x532137=='backup'){const _0x4f45f1=/^bot-[0-9]{3}-config.json$/,_0xc32293=_0x4f45f1[_0x52b329(0xf2)](_0x4e1911[_0x52b329(0x124)]);if(_0xc32293){const _0x252b37=JSON['parse'](_0xe83823);if(_0x252b37[_0x52b329(0x277)][0x0]){_0x252b37[_0x52b329(0x277)][0x0][_0x52b329(0x1ff)]=_0x52b329(0x137),_0x252b37['bot'][0x0]['apiSecret']=_0x52b329(0x137);if(_0x252b37[_0x52b329(0x277)][0x0][_0x52b329(0x25e)])_0x252b37['bot'][0x0][_0x52b329(0x25e)]=_0x52b329(0x137);}_0xe83823=JSON[_0x52b329(0x148)](_0x252b37,null,0x2);}if(_0x4e1911[_0x52b329(0x124)]==_0x52b329(0x10b)){const _0x24ee9a=JSON[_0x52b329(0x255)](_0xe83823);if(_0x24ee9a[_0x52b329(0xb1)]['loginRequired'])_0x24ee9a['settings']['loginRequired']=![];if(_0x24ee9a['settings'][_0x52b329(0x11f)])_0x24ee9a[_0x52b329(0xb1)]['bbPassword']=_0x52b329(0x137);if(_0x24ee9a[_0x52b329(0xb1)][_0x52b329(0x282)])_0x24ee9a[_0x52b329(0xb1)][_0x52b329(0x282)]=_0x52b329(0x137);if(_0x24ee9a['settings'][_0x52b329(0x17a)])_0x24ee9a[_0x52b329(0xb1)][_0x52b329(0x17a)]=null;_0xe83823=JSON['stringify'](_0x24ee9a,null,0x2);}if(_0x4e1911[_0x52b329(0x124)]!=_0x52b329(0x12d))_0xada1d8['file'](_0x4e1911[_0x52b329(0x124)],_0xe83823);}else _0xada1d8[_0x52b329(0x272)](_0x4e1911['name'],_0xe83823);}});const _0x20a4f9=_0xada1d8[_0x2d2faf(0x1c4)]({'base64':![],'compression':_0x2d2faf(0x279)});fs[_0x2d2faf(0xe2)](zippath+(_0x532137+'.zip'),_0x20a4f9,'binary');}async function unzipFile(_0x4f6a7f,_0x493193){const _0x4ff09d=_0x2bc2cd;fs[_0x4ff09d(0x116)](configpath,{'withFileTypes':!![]})['forEach'](_0x59cf88=>{const _0x107c24=_0x4ff09d;if(!_0x59cf88[_0x107c24(0xbf)]())fs[_0x107c24(0x14b)](configpath+_0x59cf88[_0x107c24(0x124)]);});const _0x26abf4=fs[_0x4ff09d(0x26e)](_0x4f6a7f+_0x493193,'binary'),_0x135863=new require(_0x4ff09d(0x1ce))(_0x26abf4,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x135863[_0x4ff09d(0x267)])[_0x4ff09d(0x14c)](_0x2bac31=>{const _0x4ff204=_0x4ff09d,_0x1a6cad=_0x135863[_0x4ff204(0x267)][_0x2bac31];fs[_0x4ff204(0xe2)](configpath+_0x1a6cad[_0x4ff204(0x124)],_0x1a6cad[_0x4ff204(0x1af)]);}),fs[_0x4ff09d(0x116)](temppath,{'withFileTypes':!![]})[_0x4ff09d(0x14c)](_0x4d93c9=>{const _0x4ceae3=_0x4ff09d;if(!_0x4d93c9['isDirectory']())fs[_0x4ceae3(0x14b)](temppath+_0x4d93c9['name']);}),logger[_0x4ff09d(0x215)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x4ff09d(0x27e)]({'restore':!![]},_0x19558b=>{});}async function getPublicIp(){const _0x2ec56c=_0x2bc2cd;try{const _0x37b89f=await axios[_0x2ec56c(0x15e)](_0x2ec56c(0x1a0));publicip=_0x37b89f[_0x2ec56c(0xe8)]['ip'];}catch(_0x163557){}}async function triggerAnalytics(){const _0x262024=_0x2bc2cd;if(!publicip)await getPublicIp();const _0x33810c=getBotsWithMode();let _0x18d4be=0x0;_0x33810c[_0x262024(0x14c)](_0x32e290=>{const _0x940d98=_0x262024;if(_0x32e290[_0x940d98(0xc1)]===_0x940d98(0x1ef))_0x18d4be++;});const _0x3ba6ec=getBotExchanges();mixpanel[_0x262024(0xb2)]('Server',{'distinct_id':settings[_0x262024(0x21b)],'ip':publicip,'version':serverversion,'numbots':_0x33810c[_0x262024(0x223)],'numbotsenabled':_0x18d4be,'exchanges':_0x3ba6ec,'environment':environment});}async function getMessages(){const _0xf3dbf2=_0x2bc2cd,_0x3a06c2=_0xf3dbf2(0xb5),_0x4b7fc0=new GraphQLClient(_0x3a06c2),_0xe95868={'authorization':_0xf3dbf2(0x29e)},_0x33dc26=serverversion[_0xf3dbf2(0xcd)]('.'),_0x3e7362=_0x33dc26[0x0]+'.'+_0x33dc26[0x1],_0x260c3d=Math[_0xf3dbf2(0xde)](settings['lastmsgtelegram'],settings[_0xf3dbf2(0x236)]),_0x49593f={'last':parseInt(_0x260c3d),'bbm':_0x3e7362},_0x59dd29=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4fc275;try{_0x4fc275=await _0x4b7fc0[_0xf3dbf2(0x141)](_0x59dd29,_0x49593f,_0xe95868);}catch(_0x4e414e){}if(_0x4fc275&&_0x4fc275['messages']){let _0x65c42a=settings[_0xf3dbf2(0x1aa)];newMessages=[];for(const _0x103c3e of _0x4fc275[_0xf3dbf2(0x264)]){newMessages[_0xf3dbf2(0x119)](_0x103c3e);let _0x18fb5b=![];_0x103c3e[_0xf3dbf2(0x25c)]&&(updateSetting(_0xf3dbf2(0x17b),_0x103c3e[_0xf3dbf2(0x25c)]),_0x18fb5b=isNewerVersion(serverversion,_0x103c3e[_0xf3dbf2(0x25c)])||serverversion==_0x103c3e[_0xf3dbf2(0x25c)]);if(!_0x18fb5b&&_0x103c3e[_0xf3dbf2(0x100)]>_0x65c42a){if(_0x103c3e['bbvReceive']===_0xf3dbf2(0x18e)||serverversion['startsWith'](_0x103c3e['bbvReceive'])){let _0x191e83=''+_0x103c3e['title']+'\x0a\x0a'+_0x103c3e[_0xf3dbf2(0x10a)];const _0x2a37ce=await sendTelegramMsg(toTelegramMarkdown(_0x191e83),'Markdown');if(_0x2a37ce)_0x65c42a=_0x103c3e[_0xf3dbf2(0x100)];}}}updateAvailable=isNewerVersion(settings[_0xf3dbf2(0x17b)],serverversion),updateSetting(_0xf3dbf2(0x1aa),_0x65c42a),emitMessages();}}function emitMessages(){const _0x53f3f9=_0x2bc2cd,_0x15dc78=settings[_0x53f3f9(0x236)];let _0x9a86f1=[];newMessages['forEach'](_0x46a890=>{const _0x2aee19=_0x53f3f9;_0x46a890[_0x2aee19(0x100)]>_0x15dc78&&_0x9a86f1[_0x2aee19(0x119)](_0x46a890);}),_0x9a86f1[_0x53f3f9(0x223)]>0x0&&getAllClients()['forEach'](_0x4a9508=>{const _0x517204=_0x53f3f9;getSocket(_0x4a9508['id'])[_0x517204(0x11c)](_0x517204(0x10a),_0x9a86f1);});}function confirmMessage(_0xfdf153){updateSetting('lastmsgemitted',Number(_0xfdf153));}function isNewerVersion(_0x256afc,_0x85e70d){const _0x5cfd2b=_0x2bc2cd,_0x3462a8=_0x85e70d['split']('.'),_0x23fe2f=_0x256afc[_0x5cfd2b(0xcd)]('.');for(var _0x373ed8=0x0;_0x373ed8<_0x23fe2f[_0x5cfd2b(0x223)];_0x373ed8++){const _0x388c3d=~~_0x23fe2f[_0x373ed8],_0x3efcce=~~_0x3462a8[_0x373ed8];if(_0x388c3d>_0x3efcce)return!![];if(_0x388c3d<_0x3efcce)return![];}return![];}function toTelegramMarkdown(_0x4d693b){const _0x19707d=_0x2bc2cd,_0x3cee43=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x533ee2=/\*{2}(.+?)\*{2}/gim;return _0x4d693b=_0x4d693b[_0x19707d(0xc8)](_0x3cee43,'$1_$2_$3')[_0x19707d(0xc8)](_0x533ee2,_0x19707d(0xf9)),_0x4d693b;}async function validateConfigFile(){const _0x3f06f2=_0x2bc2cd,_0x3fa1c0=dbConfig[_0x3f06f2(0x15e)](_0x3f06f2(0x216))[_0x3f06f2(0x23e)](_0x3f06f2(0x260))['value']()||[];if(_0x3fa1c0[_0x3f06f2(0x223)]==0x0){let _0x196f67=0x0,_0x5db2c4=[];const _0x5ad83e=/^bot-([0-9]{3})-config.json$/,_0x42068b=fs[_0x3f06f2(0x116)](configpath);_0x42068b['forEach'](_0x2f26ba=>{const _0x296780=_0x3f06f2,_0x2adee4=_0x5ad83e[_0x296780(0x1be)](_0x2f26ba);if(_0x2adee4){const _0x32e09c=_0x2adee4[0x1];let _0x3c65f9=getBotAttributes(_0x32e09c);_0x5db2c4[_0x296780(0x119)]({'botID':_0x32e09c,'botname':_0x3c65f9[_0x296780(0x268)],'status':_0x296780(0x1a7),'live':_0x296780(0x225)}),_0x196f67++;}}),_0x196f67!=0x0&&(dbConfig[_0x3f06f2(0x15e)](_0x3f06f2(0x216))['assign'](_0x5db2c4)[_0x3f06f2(0x202)](),config=_0x5db2c4,restoredConfigFile=_0x196f67);}}async function restoreConfigNotify(_0x4a179f){const _0x1384de=_0x2bc2cd;let _0x4d8259;if(restoredConfigFile==0x1)_0x4d8259=_0x1384de(0x208);else _0x4d8259=_0x1384de(0x28a);if(_0x4a179f)io['to'](_0x1384de(0xb8))[_0x1384de(0x11c)](_0x1384de(0x1f3),_0x4d8259);else{logger[_0x1384de(0x1a3)](_0x1384de(0x169)),logger[_0x1384de(0x1a3)](_0x4d8259),logger[_0x1384de(0x1a3)](_0x1384de(0x169)),logger[_0x1384de(0x1a3)]('');if(tgBot&&settings[_0x1384de(0x17a)]&&settings[_0x1384de(0x1d8)]!='orders')await sendTelegram(settings[_0x1384de(0x17a)],_0x1384de(0xc3)+_0x4d8259);}}function validateCredentials(_0x146abe,_0x5bddef){const _0x24d826=_0x2bc2cd;if(_0x146abe[_0x24d826(0x1d7)]==settings[_0x24d826(0xe7)]&&bcrypt[_0x24d826(0x1c3)](_0x146abe[_0x24d826(0x193)],settings[_0x24d826(0x11f)])){if(settings[_0x24d826(0x132)])return{'allow':![],'reason':_0x24d826(0x16f),'token':null};else{const _0x16f34d=generateLoginToken(_0x5bddef);return{'allow':!![],'reason':_0x24d826(0x23c),'token':_0x16f34d};}}else return{'allow':![],'reason':_0x24d826(0x12a),'token':null};}function refreshToken(_0x54dc8f){const _0x1e22b9=_0x2bc2cd,_0x5456a3=generateLoginToken(_0x54dc8f);return{'allow':!![],'reason':_0x1e22b9(0x23c),'token':_0x5456a3};}function validateAccess(_0x16da18,_0x4da831,_0x57814c){const _0x377411=_0x2bc2cd,_0x4ff57e=_0x57814c?_0x57814c:devices[_0x4da831]['ip'];let _0x47eabe;const _0x4dce6a=_0x105b28=>{const _0x47a38d=_0x2e07;if(settings['loginRequired']){if(settings[_0x47a38d(0x132)]){if(telegram2FaApproved(_0x4da831)){const _0x146c2b=generateLoginToken(_0x4da831);return{'allow':!![],'reason':_0x47a38d(0xdf),'token':_0x146c2b};}else return{'allow':![],'reason':_0x47a38d(0x293),'token':null};}else return _0x47eabe=validToken(_0x105b28,_0x4da831),_0x47eabe[_0x47a38d(0x292)](_0x47a38d(0x1c7))?{'allow':!![],'reason':_0x47a38d(0x1ed),'token':_0x105b28}:{'allow':![],'reason':_0x47a38d(0x293),'token':null};}else return{'allow':!![],'reason':_0x47a38d(0x130),'token':null};};if(settings['whitelistEnabled']){let _0x2040de=[...settings[_0x377411(0x146)],_0x377411(0x166),_0x377411(0x2a2),'127.0.0.1'];if(_0x2040de[_0x377411(0xca)](_0x4ff57e))return _0x4dce6a(_0x16da18);else{_0x47eabe=validToken(_0x16da18,_0x4da831);if(_0x47eabe['hasOwnProperty']('success'))return _0x4dce6a(_0x16da18);else{if(telegramIpApproved(_0x4da831)){const _0x40db61=generateToken(_0x4da831);return _0x47eabe=_0x4dce6a(_0x16da18),_0x47eabe[_0x377411(0xd6)]?{'allow':!![],'reason':_0x377411(0x21c),'token':_0x40db61}:_0x47eabe;}else return settings[_0x377411(0x13b)]?{'allow':![],'reason':_0x377411(0x23b),'token':null}:{'allow':![],'reason':_0x377411(0x155),'token':null};}}}else return _0x4dce6a(_0x16da18);}function timelyDecrypt(_0x1042fa,_0x192cff=!![]){const _0x26b8bd=_0x2bc2cd;if(_0x1042fa)try{const _0x51590a=crypt[_0x26b8bd(0x21f)](secure[_0x26b8bd(0x1f7)],_0x1042fa)[_0x26b8bd(0x10a)],_0x198f0a=_0x51590a[_0x26b8bd(0xcd)]('@')[0x0],_0x12411c=_0x51590a[_0x26b8bd(0xcd)]('@')[0x1],_0x25451d=new Date()[_0x26b8bd(0x1f6)]();if(_0x192cff){if(_0x25451d-_0x12411c<maxSecretAge*0x3e8)return _0x198f0a;else return![];}else return _0x198f0a;}catch(_0x24ee85){return![];}else return![];}const validToken=(_0x27ae46,_0x1d217d)=>{const _0x34c280=_0x2bc2cd,_0x5bdb75=devices[_0x1d217d]['ip'];if(!_0x27ae46)return{'error':'No\x20authentication\x20token'};for(let _0x4e4eb3 of blacklist){if(_0x4e4eb3[_0x34c280(0x186)]==_0x27ae46)return{'error':_0x34c280(0xdb)};}let _0x4e37ad;try{_0x4e37ad=jwt[_0x34c280(0xfd)](_0x27ae46,secure[_0x34c280(0x23f)]+_0x1d217d);}catch{return{'error':_0x34c280(0xef)};}if(!_0x4e37ad[_0x34c280(0x292)](_0x34c280(0xd7))&&!_0x4e37ad[_0x34c280(0x292)](_0x34c280(0x1d7))||!_0x4e37ad['hasOwnProperty'](_0x34c280(0xdc)))return{'error':_0x34c280(0x274)};if(!_0x4e37ad['hasOwnProperty']('username')&&_0x4e37ad['hasOwnProperty']('clientip')){const {clientip:_0x3a7c04}=_0x4e37ad;return _0x5bdb75==_0x3a7c04?{'success':_0x34c280(0x162)}:{'error':_0x34c280(0x297)};}else{if(_0x4e37ad['hasOwnProperty'](_0x34c280(0x1d7))&&_0x4e37ad[_0x34c280(0x292)]('clientip')){const {username:_0x117d78,clientip:_0x4f84b3}=_0x4e37ad;return settings[_0x34c280(0xe7)]==_0x117d78&&_0x5bdb75==_0x4f84b3?{'success':_0x34c280(0x162)}:{'error':_0x34c280(0x15b)};}}},generateLoginToken=_0x2e82a2=>{const _0x388ab1=_0x2bc2cd;if(_0x2e82a2){const _0x29adf7=devices[_0x2e82a2]['ip'];return jwt['sign']({'username':settings[_0x388ab1(0xe7)],'clientip':_0x29adf7},secure[_0x388ab1(0x23f)]+_0x2e82a2,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x150e2b=>{const _0x185a71=_0x2bc2cd;if(_0x150e2b){const _0x465cfe=devices[_0x150e2b]['ip'];return jwt['sign']({'clientip':_0x465cfe},secure[_0x185a71(0x23f)]+_0x150e2b,{'expiresIn':devices[_0x150e2b]['telegramIpApproval']['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x110b56=>{const _0x1b57ca=_0x2bc2cd;let _0x11e29a=![];return devices[_0x110b56]['telegramIpApproval']&&devices[_0x110b56][_0x1b57ca(0x217)][_0x1b57ca(0x1da)]!=_0x1b57ca(0x106)&&(_0x11e29a=devices[_0x110b56][_0x1b57ca(0x217)][_0x1b57ca(0xd7)]==devices[_0x110b56]['ip']&&new Date()[_0x1b57ca(0x1f6)]()-devices[_0x110b56]['telegramIpApproval'][_0x1b57ca(0x231)]<devices[_0x110b56]['telegramIpApproval'][_0x1b57ca(0x1da)]*0x3c*0x3e8),_0x11e29a;},telegram2FaApproved=_0x4b20aa=>{const _0x2ebf1b=_0x2bc2cd;let _0x2c0e8b=![];return devices[_0x4b20aa][_0x2ebf1b(0x192)]&&devices[_0x4b20aa]['telegram2FaApproval'][_0x2ebf1b(0x1da)]!=_0x2ebf1b(0x106)&&(_0x2c0e8b=devices[_0x4b20aa]['telegram2FaApproval'][_0x2ebf1b(0xd7)]==devices[_0x4b20aa]['ip']&&new Date()['getTime']()-devices[_0x4b20aa][_0x2ebf1b(0x192)][_0x2ebf1b(0x231)]<devices[_0x4b20aa]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x2c0e8b;},normalizeIP=_0x26e12e=>{const _0x24c7cd=_0x2bc2cd;let _0x20d053=null,_0x552033=null;if(ipaddr[_0x24c7cd(0x298)](_0x26e12e)){const _0x31f12b=ipaddr['parse'](_0x26e12e);_0x31f12b['kind']()===_0x24c7cd(0x21e)?(_0x31f12b[_0x24c7cd(0x28f)]()&&(_0x20d053=_0x31f12b[_0x24c7cd(0x1bb)]()[_0x24c7cd(0x232)]()),_0x552033=_0x31f12b[_0x24c7cd(0x232)]()):(_0x20d053=_0x31f12b[_0x24c7cd(0x232)](),_0x552033=_0x31f12b[_0x24c7cd(0x2a0)]()[_0x24c7cd(0x232)]());}return{'show':_0x20d053?_0x20d053:_0x552033,'store':_0x552033};};function formatDate(_0x19b555){const _0xc380ac=_0x2bc2cd;return _0x19b555[_0xc380ac(0x17d)]()+'/'+(_0x19b555[_0xc380ac(0x201)]()+0x1)[_0xc380ac(0x232)]()[_0xc380ac(0x177)](0x2,'0')+'/'+_0x19b555['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x19b555[_0xc380ac(0xd2)]()[_0xc380ac(0x232)]()[_0xc380ac(0x177)](0x2,'0')+':'+_0x19b555['getMinutes']()[_0xc380ac(0x232)]()[_0xc380ac(0x177)](0x2,'0')+':'+_0x19b555[_0xc380ac(0x19f)]()[_0xc380ac(0x232)]()[_0xc380ac(0x177)](0x2,'0');}function sleep(_0x44ed90){return new Promise(_0x1884c3=>setTimeout(_0x1884c3,_0x44ed90));}