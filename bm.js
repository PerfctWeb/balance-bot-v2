const _0x3b7433=_0x3827;(function(_0x280456,_0x1fbf95){const _0x354723=_0x3827,_0x43e1f9=_0x280456();while(!![]){try{const _0x125619=parseInt(_0x354723(0x2d5))/0x1+-parseInt(_0x354723(0x2be))/0x2+parseInt(_0x354723(0x27a))/0x3*(parseInt(_0x354723(0x1cc))/0x4)+-parseInt(_0x354723(0x272))/0x5*(parseInt(_0x354723(0x2ba))/0x6)+-parseInt(_0x354723(0x18f))/0x7+parseInt(_0x354723(0x268))/0x8+parseInt(_0x354723(0x28d))/0x9;if(_0x125619===_0x1fbf95)break;else _0x43e1f9['push'](_0x43e1f9['shift']());}catch(_0x222755){_0x43e1f9['push'](_0x43e1f9['shift']());}}}(_0x13cb,0x51d1a));const _0x4179d7=function(){let _0x52fad2=!![];return function(_0x269b6f,_0x3ad8e4){const _0xef33b7=_0x52fad2?function(){if(_0x3ad8e4){const _0x1f02be=_0x3ad8e4['apply'](_0x269b6f,arguments);return _0x3ad8e4=null,_0x1f02be;}}:function(){};return _0x52fad2=![],_0xef33b7;};}(),_0x3084ff=_0x4179d7(this,function(){const _0x5b21e6=_0x3827;return _0x3084ff['toString']()[_0x5b21e6(0x2d0)]('(((.+)+)+)+$')[_0x5b21e6(0x1e9)]()[_0x5b21e6(0x2e8)](_0x3084ff)[_0x5b21e6(0x2d0)](_0x5b21e6(0x2b0));});_0x3084ff();'use strict';process[_0x3b7433(0x2d7)][_0x3b7433(0x1cb)]=0x1;const childProcess=require(_0x3b7433(0x257)),fs=require('fs'),fns=require(_0x3b7433(0x21e)),low=require('lowdb'),FileSync=require(_0x3b7433(0x2cb)),path=require(_0x3b7433(0x23b)),crypto=require(_0x3b7433(0x20f)),Crypt=require(_0x3b7433(0x18e))[_0x3b7433(0x312)],RSA=require(_0x3b7433(0x18e))[_0x3b7433(0x1ed)],bcrypt=require('bcryptjs'),jwt=require('jsonwebtoken'),ipaddr=require('ipaddr.js'),argv=require(_0x3b7433(0x295))(process[_0x3b7433(0x24f)]['slice'](0x2))[_0x3b7433(0x24f)],uuidRandom=require(_0x3b7433(0x242)),TelegramBot=require(_0x3b7433(0x1c7)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x3b7433(0x302)),fileUpload=require(_0x3b7433(0x1cf)),PORT=argv[_0x3b7433(0x2f3)]||_0x3b7433(0x2e0),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x3b7433(0x247)](_0x3b7433(0x195)+PORT+_0x3b7433(0x299)),process[_0x3b7433(0x2a6)](0x1));const HOST=argv[_0x3b7433(0x321)]||null,userID=argv['user']||'';let bbpath=_0x3b7433(0x327),bbpath2='';const botfile=_0x3b7433(0x1ea),configfile='bb-config.json',settingsfile=_0x3b7433(0x24a),securefile=_0x3b7433(0x1e8);let validInstallation=!![];!fs[_0x3b7433(0x1de)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3b7433(0x30f)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x3b7433(0x2c5),configbackuppath=configpath+_0x3b7433(0x2b8),logspath=userID?bbpath+_0x3b7433(0x1a8)+userID+'/':bbpath+_0x3b7433(0x1a8),zippath=userID?bbpath+_0x3b7433(0x205)+userID+'/':bbpath+_0x3b7433(0x205),loggerfile=fs[_0x3b7433(0x2b5)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x3b7433(0x262);!fs[_0x3b7433(0x1de)](configpath)&&fs[_0x3b7433(0x207)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x3b7433(0x207)](configbackuppath);!fs[_0x3b7433(0x1de)](logspath)&&fs['mkdirSync'](logspath);!fs[_0x3b7433(0x1de)](zippath)&&fs[_0x3b7433(0x207)](zippath);!fs[_0x3b7433(0x1de)](temppath)&&fs[_0x3b7433(0x207)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x3b7433(0x2ae)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3b7433(0x1ce)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x3b7433(0x241)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3b7433(0x1ce)]({'secure':{},'blacklist':[]})[_0x3b7433(0x2ae)]();let crypt=new Crypt({'md':_0x3b7433(0x2a8),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x3b7433(0x2bc)](_0x3b7433(0x30a),{'host':_0x3b7433(0x2de)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x3b7433(0x213)]&&settings[_0x3b7433(0x213)]!=''&&settings[_0x3b7433(0x19b)]&&settings[_0x3b7433(0x19b)]!='')initTelegram();const logger={'screen':_0x1b2850=>{const _0xf677a9=_0x3b7433;console[_0xf677a9(0x247)](_0x1b2850);},'simple':_0x2b0f7a=>{const _0x142830=_0x3b7433;console[_0x142830(0x247)](_0x2b0f7a),loggerfile[_0x142830(0x2ae)](util[_0x142830(0x28e)](_0x2b0f7a)+'\x0a');},'full':async _0x52223c=>{const _0x2ada32=_0x3b7433,_0x46ad14=getTimeStamp()+_0x2ada32(0x29d)+_0x52223c;console[_0x2ada32(0x247)](_0x46ad14),loggerfile[_0x2ada32(0x2ae)](util[_0x2ada32(0x28e)](_0x46ad14)+'\x0a');if(tgBot&&settings[_0x2ada32(0x1b9)]&&settings[_0x2ada32(0x2db)]!='orders')await tgBot['sendMessage'](settings[_0x2ada32(0x1b9)],_0x2ada32(0x1c9)+_0x52223c)[_0x2ada32(0x2fe)](_0x2d8886=>{telegramError(_0x2d8886);});}};process['on'](_0x3b7433(0x197),function(_0x37a99c){const _0x184ddd=_0x3b7433;logger[_0x184ddd(0x201)](_0x37a99c);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3b7433(0x1e7))[_0x3b7433(0x2e2)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x3b7433(0x233)),app=express(),http=require(_0x3b7433(0x2bd))['createServer'](app);app[_0x3b7433(0x2ff)](fileUpload({'useTempFiles':!![]})),app[_0x3b7433(0x2e3)]('/download/:type',async(_0x3939ea,_0x28a27d)=>{const _0x1b418a=_0x3b7433,_0x39eeec=_0x3939ea['params'][_0x1b418a(0x23e)],_0x3583f2=getClientsWithBotID('botmanager'),_0x447502=_0x3939ea['headers'][_0x1b418a(0x293)],_0x210744=timelyDecrypt(_0x447502,![]),_0x5315fa=_0x3583f2[_0x1b418a(0x1aa)](_0x1a2909=>_0x1a2909[_0x1b418a(0x293)]==_0x210744);if(_0x5315fa){const _0x2f661b=normalizeIP(_0x3939ea[_0x1b418a(0x200)][_0x1b418a(0x2cc)])['store'],_0xc1a6fe=_0x3939ea[_0x1b418a(0x2e5)]['tkn'];if(validateAccess(_0xc1a6fe,_0x210744,_0x2f661b)[_0x1b418a(0x260)])await zipFiles(_0x39eeec),_0x28a27d[_0x1b418a(0x190)](zippath+(_0x39eeec+_0x1b418a(0x2ca)),_0xf9dbe5=>{const _0x2e8095=_0x1b418a;_0xf9dbe5&&(logger['full']('Failed\x20to\x20download\x20'+_0x39eeec),logger[_0x2e8095(0x201)](_0xf9dbe5));});else logger[_0x1b418a(0x303)](_0x1b418a(0x316)+_0x39eeec+_0x1b418a(0x30e));}else logger[_0x1b418a(0x303)](_0x1b418a(0x316)+_0x39eeec+'\x20(2)');}),app[_0x3b7433(0x28f)](_0x3b7433(0x283),async(_0x7a1b25,_0x45c31a)=>{const _0x28e84a=_0x3b7433,_0x360974=getClientsWithBotID(_0x28e84a(0x1bb)),_0x26b27f=_0x7a1b25[_0x28e84a(0x2e5)][_0x28e84a(0x293)],_0x32b84c=timelyDecrypt(_0x26b27f,![]),_0x489e7a=_0x360974[_0x28e84a(0x1aa)](_0x5586e9=>_0x5586e9[_0x28e84a(0x293)]==_0x32b84c);if(_0x489e7a){const _0x5c0467=normalizeIP(_0x7a1b25[_0x28e84a(0x200)][_0x28e84a(0x2cc)])['store'],_0xe7313=_0x7a1b25[_0x28e84a(0x2e5)][_0x28e84a(0x322)];if(validateAccess(_0xe7313,_0x32b84c,_0x5c0467)[_0x28e84a(0x260)]){if(_0x7a1b25[_0x28e84a(0x31a)]){const _0x454100=_0x7a1b25[_0x28e84a(0x31a)][_0x28e84a(0x1d8)];await _0x454100['mv'](temppath+_0x454100[_0x28e84a(0x301)]),_0x45c31a[_0x28e84a(0x243)]({'status':!![],'message':'File\x20uploaded'}),confirmRestore(temppath,_0x454100[_0x28e84a(0x301)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x28e84a(0x303)](_0x28e84a(0x31c));}),app['use'](express[_0x3b7433(0x1c0)](path[_0x3b7433(0x26d)](__dirname,bbpath2,'build2'))),app['use'](express['static'](path['join'](__dirname,bbpath2,'build'))),app[_0x3b7433(0x2e3)]('/',function(_0x4c40fe,_0xe75edd){const _0x42763f=_0x3b7433;_0xe75edd[_0x42763f(0x19c)](path[_0x42763f(0x26d)](__dirname,bbpath2,'build2',_0x42763f(0x1c1)));}),app['get'](_0x3b7433(0x30c),function(_0x58094c,_0x311213){const _0x154ef6=_0x3b7433;_0x311213[_0x154ef6(0x19c)](path[_0x154ef6(0x26d)](__dirname,bbpath2,'build',_0x154ef6(0x1c1)));}),app['get'](_0x3b7433(0x22f),(_0x3ca49b,_0xcab2dc)=>{const _0x296566=_0x3b7433;_0xcab2dc[_0x296566(0x19c)](path[_0x296566(0x26d)](__dirname,bbpath2,'build',_0x296566(0x1c1)));}),app[_0x3b7433(0x2e3)]('/:bot/performance',(_0x52d9f2,_0x30f84a)=>{const _0x19752b=_0x3b7433;_0x30f84a[_0x19752b(0x19c)](path[_0x19752b(0x26d)](__dirname,bbpath2,_0x19752b(0x26f),_0x19752b(0x1c1)));}),app['get'](_0x3b7433(0x318),(_0x238230,_0x200901)=>{const _0x48dd89=_0x3b7433;_0x200901[_0x48dd89(0x19c)](path[_0x48dd89(0x26d)](__dirname,bbpath2,'build',_0x48dd89(0x1c1)));}),app[_0x3b7433(0x2e3)](_0x3b7433(0x315),(_0x1cacef,_0x128a74)=>{const _0x387fb4=_0x3b7433;_0x128a74[_0x387fb4(0x19c)](path['join'](__dirname,bbpath2,_0x387fb4(0x26f),_0x387fb4(0x1c1)));}),app['get']('/:bot/configuration',(_0x191b0f,_0x5c154e)=>{const _0x225b2a=_0x3b7433;_0x5c154e[_0x225b2a(0x19c)](path[_0x225b2a(0x26d)](__dirname,bbpath2,_0x225b2a(0x26f),_0x225b2a(0x1c1)));}),app[_0x3b7433(0x2e3)](_0x3b7433(0x310),(_0x15e574,_0x1a3daf)=>{const _0x39745a=_0x3b7433;_0x1a3daf[_0x39745a(0x19c)](path[_0x39745a(0x26d)](__dirname,bbpath2,_0x39745a(0x26f),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x3b7433(0x259)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x13fc89=_0x3b7433;logger['simple'](''),logger[_0x13fc89(0x201)](_0x13fc89(0x25c)),await logger[_0x13fc89(0x303)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x13fc89(0x201)]('-----------------------------------------------------------------------------------');if(config[_0x13fc89(0x2f0)]!=0x0)for(const _0x2952d3 of config){if(_0x2952d3[_0x13fc89(0x2c0)]==_0x13fc89(0x2a0)||_0x2952d3[_0x13fc89(0x2c0)]=='new')await logger['full'](_0x13fc89(0x2a5)+_0x2952d3[_0x13fc89(0x27b)]+_0x13fc89(0x2c8)+_0x2952d3[_0x13fc89(0x204)]),startBot([_0x2952d3[_0x13fc89(0x27b)],userID],{'cwd':bbpath},function(_0x4558e1){if(_0x4558e1)logger['full'](_0x4558e1);});else(_0x2952d3[_0x13fc89(0x2c0)]=='disabled'||_0x2952d3[_0x13fc89(0x2c0)]=='new-disabled')&&await logger[_0x13fc89(0x303)](_0x13fc89(0x275)+_0x2952d3[_0x13fc89(0x27b)]+_0x13fc89(0x2c8)+_0x2952d3['botname']);}else!newBot&&logger[_0x13fc89(0x201)](_0x13fc89(0x238));if(newBot)addBot();logger[_0x13fc89(0x201)]('-----------------------------------------------------------------------------------'),logger[_0x13fc89(0x201)]('');}function startSocket(){const _0x143085=_0x3b7433;io['on'](_0x143085(0x2a3),_0x2efec4=>{const _0x13b392=_0x143085;let _0x31c7ee,_0x17053b,_0x3704a5,_0x440ec0,_0x36e981;const _0x4260fe=_0x2efec4[_0x13b392(0x199)][_0x13b392(0x2e5)]['referer'];_0x17053b=_0x4260fe[_0x13b392(0x1ae)](/bot[0-9]{3}/);if(_0x17053b)_0x3704a5=_0x17053b[0x0][_0x13b392(0x1ae)](/[0-9]{3}/);if(_0x3704a5)_0x31c7ee=_0x3704a5[0x0];else _0x31c7ee='botmanager';const _0x275eb3=_0x2efec4['handshake'][_0x13b392(0x319)][_0x13b392(0x2c9)];if(!_0x275eb3)_0x2efec4[_0x13b392(0x215)](_0x13b392(0x2c0),{'publicKey':secure[_0x13b392(0x1a4)]});else{_0x440ec0=timelyDecrypt(_0x275eb3,![]);if(!_0x440ec0)_0x2efec4['emit'](_0x13b392(0x2c0),{'publicKey':secure['publicKey']});else{_0x36e981=normalizeIP(_0x2efec4[_0x13b392(0x245)][_0x13b392(0x2cc)])['store'];if(!devices[_0x440ec0])devices[_0x440ec0]={'uuid':_0x440ec0,'access':{'token':null}};devices[_0x440ec0]['ip']=_0x36e981;const _0x2c6350=addClient(_0x2efec4['id'],_0x440ec0,_0x31c7ee);setAccess(_0x2c6350),emitMessages(),_0x2efec4['on']('login',_0x123fe8=>{const _0x572cfc=_0x13b392,_0xb330ad=timelyDecrypt(_0x123fe8[_0x572cfc(0x2aa)]);if(_0xb330ad){_0x123fe8={'username':_0x123fe8[_0x572cfc(0x1eb)],'password':_0xb330ad},devices[_0x440ec0][_0x572cfc(0x261)]=validateCredentials(_0x123fe8,_0x440ec0);if(devices[_0x440ec0][_0x572cfc(0x261)][_0x572cfc(0x260)]==![]&&devices[_0x440ec0][_0x572cfc(0x261)][_0x572cfc(0x21c)]==_0x572cfc(0x19a))_0x2efec4['emit']('status',{'access':devices[_0x440ec0][_0x572cfc(0x261)]}),loginAccess2FA(_0x440ec0,_0x36e981);else{if(devices[_0x440ec0][_0x572cfc(0x261)]['allow']==![]&&devices[_0x440ec0]['access']['reason']=='invalid\x20credentials')_0x2efec4[_0x572cfc(0x215)](_0x572cfc(0x2c0),{'access':devices[_0x440ec0]['access']});else devices[_0x440ec0][_0x572cfc(0x261)][_0x572cfc(0x260)]&&devices[_0x440ec0][_0x572cfc(0x261)][_0x572cfc(0x21c)]==_0x572cfc(0x26c)&&(getClientsWithUuid(_0x440ec0)[_0x572cfc(0x2fb)](_0x3b2016=>{setAccess(_0x3b2016);}),setTokenRefresh(_0x440ec0),setSessionTimeout('login',_0x440ec0));}}else logger[_0x572cfc(0x303)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x2efec4['on']('reset-password',()=>{resetPassword();}),_0x2efec4['on'](_0x13b392(0x2a1),_0x8eeaf0=>{removeClient(_0x2efec4['id']);}),_0x31c7ee==_0x13b392(0x1bb)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3bac28){const _0x381868=_0x3b7433;if(_0x3bac28!=_0x381868(0x1bb)&&config[_0x381868(0x298)]!=''){if(pid[_0x3bac28])pid[_0x3bac28][_0x381868(0x243)]({'function':_0x381868(0x1ac),'args':null});}}function reloadBotManager(){const _0x49a8cf=_0x3b7433;getClientsWithBotID(_0x49a8cf(0x1bb))[_0x49a8cf(0x2fb)](_0x442b27=>{const _0x3c3d29=_0x49a8cf;getSocket(_0x442b27['id'])[_0x3c3d29(0x215)](_0x3c3d29(0x2c0),{'access':{'allow':![],'reason':_0x3c3d29(0x212),'token':null}});});}function getSocket(_0x3eed70){const _0xa61d68=_0x3b7433;return io[_0xa61d68(0x194)][_0xa61d68(0x194)][_0xa61d68(0x2e3)](_0x3eed70);}function setAccess(_0x254c06){const _0x531a98=_0x3b7433,_0x1c9d9c=getSocket(_0x254c06['id']),_0x117022=_0x254c06[_0x531a98(0x293)],_0x5e861a=_0x254c06[_0x531a98(0x2b3)];devices[_0x117022]['access']=validateAccess(devices[_0x117022][_0x531a98(0x261)][_0x531a98(0x248)],_0x117022),_0x1c9d9c[_0x531a98(0x26d)](_0x117022);if(devices[_0x117022][_0x531a98(0x261)][_0x531a98(0x260)]){_0x1c9d9c[_0x531a98(0x26d)](_0x5e861a);if(_0x5e861a==_0x531a98(0x1bb))initializeSocketBotManager(_0x1c9d9c);else initializeSocketBot(_0x1c9d9c);initClient(_0x5e861a);}devices[_0x117022][_0x531a98(0x261)][_0x531a98(0x248)]&&devices[_0x117022]['access'][_0x531a98(0x21c)]==_0x531a98(0x220)&&setSessionTimeout(_0x531a98(0x217),_0x117022),devices[_0x117022][_0x531a98(0x261)]['token']&&devices[_0x117022][_0x531a98(0x261)][_0x531a98(0x21c)]==_0x531a98(0x1da)&&setSessionTimeout(_0x531a98(0x246),_0x117022),_0x1c9d9c[_0x531a98(0x215)](_0x531a98(0x2c0),{'status':_0x254c06[_0x531a98(0x254)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x117022][_0x531a98(0x261)],'externalip':devices[_0x117022]['ip'],'publicKey':secure[_0x531a98(0x1a4)],'userid':settings[_0x531a98(0x229)],'validInstallation':validInstallation}),devices[_0x117022]['access'][_0x531a98(0x260)]==![]&&devices[_0x117022][_0x531a98(0x261)][_0x531a98(0x21c)]==_0x531a98(0x2ed)&&temporaryAccess2FA(_0x117022,devices[_0x117022]['ip']);}function setSessionTimeout(_0x35447b,_0x4c4ad5){const _0x15c7f1=_0x3b7433;let _0x5ac395;if(_0x35447b=='login')_0x5ac395=loginExpiry*0x3c*0x3e8;else _0x5ac395=devices[_0x4c4ad5][_0x15c7f1(0x2b6)]['expiry']*0x3c*0x3e8-(new Date()[_0x15c7f1(0x223)]()-devices[_0x4c4ad5]['telegramIpApproval'][_0x15c7f1(0x1f2)]);if(devices[_0x4c4ad5][_0x15c7f1(0x21b)])clearTimeout(devices[_0x4c4ad5]['pidExpireLogin']);devices[_0x4c4ad5][_0x15c7f1(0x21b)]=setTimeout(()=>{const _0x416f1c=_0x15c7f1;if(devices[_0x4c4ad5]['pidRefreshToken'])clearTimeout(devices[_0x4c4ad5]['pidRefreshToken']);removeSocketListeners(_0x4c4ad5),addBlacklist(_0x4c4ad5),devices[_0x4c4ad5][_0x416f1c(0x2b6)]=null,devices[_0x4c4ad5][_0x416f1c(0x1b5)]=null,devices[_0x4c4ad5][_0x416f1c(0x261)][_0x416f1c(0x248)]=null,devices[_0x4c4ad5][_0x416f1c(0x261)]=validateAccess(devices[_0x4c4ad5]['access'][_0x416f1c(0x248)],_0x4c4ad5),!(devices[_0x4c4ad5][_0x416f1c(0x261)]['allow']&&devices[_0x4c4ad5][_0x416f1c(0x261)][_0x416f1c(0x21c)]==_0x416f1c(0x271))&&(_0x35447b==_0x416f1c(0x246)?io['to'](_0x4c4ad5)[_0x416f1c(0x215)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4c4ad5)[_0x416f1c(0x215)](_0x416f1c(0x2c0),{'access':{'allow':![],'reason':_0x416f1c(0x1fb),'token':null}})),devices[_0x4c4ad5][_0x416f1c(0x261)][_0x416f1c(0x248)]=null;},_0x5ac395);}function setTokenRefresh(_0x26e56f){const _0x44af96=_0x3b7433;if(devices[_0x26e56f][_0x44af96(0x31e)])clearTimeout(devices[_0x26e56f]['pidRefreshToken']);devices[_0x26e56f][_0x44af96(0x31e)]=setTimeout(()=>{const _0xcefaf2=_0x44af96;getClientsWithUuid(_0x26e56f)[_0xcefaf2(0x2f0)]!=0x0?(devices[_0x26e56f][_0xcefaf2(0x261)]=refreshToken(_0x26e56f),io['to'](_0x26e56f)['emit'](_0xcefaf2(0x2c0),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x26e56f][_0xcefaf2(0x261)],'externalip':devices[_0x26e56f]['ip'],'publicKey':secure[_0xcefaf2(0x1a4)],'validInstallation':validInstallation}),setTokenRefresh(_0x26e56f)):clearTimeout(devices[_0x26e56f][_0xcefaf2(0x31e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x471870){const _0x1e1c52=_0x3b7433,_0x1c6b2e=getClient(_0x471870['id'])[_0x1e1c52(0x293)];_0x471870['emit'](_0x1e1c52(0x1a5),config),_0x471870[_0x1e1c52(0x215)](_0x1e1c52(0x265),cleanSettings()),_0x471870['on'](_0x1e1c52(0x317),_0x5a4468=>{const _0x3da09f=_0x1e1c52;if(validateAccess(_0x5a4468,_0x1c6b2e)[_0x3da09f(0x260)])addBot();else logger[_0x3da09f(0x303)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x471870['on']('update-bot',(_0x550cf2,_0x10831f)=>{const _0xba7620=_0x1e1c52;if(validateAccess(_0x10831f,_0x1c6b2e)[_0xba7620(0x260)])toggleBot(_0x550cf2[_0xba7620(0x27b)],_0x550cf2[_0xba7620(0x2c0)],_0x550cf2['live']);else logger[_0xba7620(0x303)](_0xba7620(0x314));}),_0x471870['on']('toggle-bot-mode',(_0x9c84de,_0x4ef876)=>{const _0x31c398=_0x1e1c52;if(validateAccess(_0x4ef876,_0x1c6b2e)[_0x31c398(0x260)])toggleBotMode(_0x9c84de);else logger[_0x31c398(0x303)](_0x31c398(0x314));}),_0x471870['on']('delete-bot',(_0x25b165,_0x1af318)=>{const _0x2f9d83=_0x1e1c52;if(validateAccess(_0x1af318,_0x1c6b2e)[_0x2f9d83(0x260)])deleteBot(_0x25b165);else logger[_0x2f9d83(0x303)](_0x2f9d83(0x2f8));}),_0x471870['on'](_0x1e1c52(0x20e),(_0x4f8d25,_0x2fc901)=>{const _0x4c71f8=_0x1e1c52;if(validateAccess(_0x2fc901,_0x1c6b2e)['allow'])storeSettings(_0x4f8d25,!![]);else logger[_0x4c71f8(0x303)](_0x4c71f8(0x288));}),_0x471870['on'](_0x1e1c52(0x329),_0x44ffcf=>{const _0x1f9d54=_0x1e1c52;if(validateAccess(_0x44ffcf,_0x1c6b2e)[_0x1f9d54(0x260)])updateBB();else logger[_0x1f9d54(0x303)](_0x1f9d54(0x300));}),_0x471870['on']('get-messages',_0x53ba64=>{const _0x3b9ff6=_0x1e1c52;if(validateAccess(_0x53ba64,_0x1c6b2e)[_0x3b9ff6(0x260)])getMessages();else logger[_0x3b9ff6(0x303)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x471870['on']('confirm-message',(_0x37ac75,_0x6be897)=>{const _0x11860b=_0x1e1c52;if(validateAccess(_0x6be897,_0x1c6b2e)['allow'])confirmMessage(_0x37ac75);else logger[_0x11860b(0x303)](_0x11860b(0x297));}),_0x471870['on'](_0x1e1c52(0x226),_0x1c69c6=>{const _0x4e34ac=_0x1e1c52;if(validateAccess(_0x1c69c6,_0x1c6b2e)[_0x4e34ac(0x260)]){if(devices[_0x1c6b2e][_0x4e34ac(0x31e)])clearTimeout(devices[_0x1c6b2e]['pidRefreshToken']);if(devices[_0x1c6b2e][_0x4e34ac(0x21b)])clearTimeout(devices[_0x1c6b2e][_0x4e34ac(0x21b)]);removeSocketListeners(getClient(_0x471870['id'])[_0x4e34ac(0x293)]),addBlacklist(_0x1c6b2e),devices[_0x1c6b2e][_0x4e34ac(0x2b6)]=null,devices[_0x1c6b2e]['telegram2FaApproval']=null,devices[_0x1c6b2e]['access'][_0x4e34ac(0x248)]=null,io['to'](getClient(_0x471870['id'])[_0x4e34ac(0x293)])[_0x4e34ac(0x215)](_0x4e34ac(0x2c0),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x4e34ac(0x239));});}function initializeSocketBot(_0x274379){const _0x4e9a3d=_0x3b7433,_0x374961=getClient(_0x274379['id'])[_0x4e9a3d(0x2b3)],_0x5c4b9b=getClient(_0x274379['id'])[_0x4e9a3d(0x293)];_0x274379['on'](_0x4e9a3d(0x2df),(_0x559889,_0x256f40)=>{const _0x4dcfac=_0x4e9a3d;if(validateAccess(_0x256f40,_0x5c4b9b)[_0x4dcfac(0x260)]){if(pid[_0x374961])pid[_0x374961]['send']({'function':_0x4dcfac(0x325),'args':_0x559889});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x274379['on'](_0x4e9a3d(0x1db),(_0x5df255,_0x52c4ee)=>{const _0x450860=_0x4e9a3d;if(validateAccess(_0x52c4ee,_0x5c4b9b)[_0x450860(0x260)]){if(pid[_0x374961])pid[_0x374961]['send']({'function':_0x450860(0x1f4),'args':_0x5df255});}else logger[_0x450860(0x303)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x274379['on']('get-portfolio',(_0x1338b6,_0x2ada4e)=>{const _0x48d246=_0x4e9a3d;if(validateAccess(_0x2ada4e,_0x5c4b9b)[_0x48d246(0x260)]){if(pid[_0x374961])pid[_0x374961][_0x48d246(0x243)]({'function':_0x48d246(0x235),'args':_0x1338b6});}else logger['full'](_0x48d246(0x266));}),_0x274379['on'](_0x4e9a3d(0x1a9),(_0x2a8cfc,_0x251b59)=>{const _0x14654d=_0x4e9a3d;if(validateAccess(_0x251b59,_0x5c4b9b)[_0x14654d(0x260)]){if(pid[_0x374961])pid[_0x374961][_0x14654d(0x243)]({'function':_0x14654d(0x29e),'args':_0x2a8cfc});}else logger[_0x14654d(0x303)](_0x14654d(0x1e4));}),_0x274379['on']('store-headless',(_0x38e81c,_0x5792db)=>{const _0x53956d=_0x4e9a3d;if(validateAccess(_0x5792db,_0x5c4b9b)[_0x53956d(0x260)]){if(pid[_0x374961])pid[_0x374961][_0x53956d(0x243)]({'function':_0x53956d(0x230),'args':_0x38e81c});}else logger['full'](_0x53956d(0x2ec));}),_0x274379['on']('get-starting-balances',_0x2b2046=>{const _0x2d5a4d=_0x4e9a3d;if(validateAccess(_0x2b2046,_0x5c4b9b)[_0x2d5a4d(0x260)]){if(pid[_0x374961])pid[_0x374961][_0x2d5a4d(0x243)]({'function':_0x2d5a4d(0x2f2),'args':null});}else logger[_0x2d5a4d(0x303)](_0x2d5a4d(0x1ad));}),_0x274379['on'](_0x4e9a3d(0x22d),(_0x567e16,_0x55707c)=>{const _0x14d596=_0x4e9a3d;if(validateAccess(_0x55707c,_0x5c4b9b)[_0x14d596(0x260)]){if(pid[_0x374961])pid[_0x374961]['send']({'function':'placeOrder','args':_0x567e16});}else logger['full'](_0x14d596(0x1a6));}),_0x274379['on'](_0x4e9a3d(0x31f),_0x585d0e=>{const _0x57780d=_0x4e9a3d;if(validateAccess(_0x585d0e,_0x5c4b9b)[_0x57780d(0x260)]){if(pid[_0x374961])pid[_0x374961][_0x57780d(0x243)]({'function':_0x57780d(0x1a1),'args':null});}else logger[_0x57780d(0x303)](_0x57780d(0x232));}),_0x274379['on']('update-bb',_0x1c1d51=>{const _0x105976=_0x4e9a3d;if(validateAccess(_0x1c1d51,_0x5c4b9b)[_0x105976(0x260)])updateBB();else logger[_0x105976(0x303)](_0x105976(0x300));}),_0x274379['on'](_0x4e9a3d(0x1ff),_0x14e665=>{const _0x104c53=_0x4e9a3d;if(validateAccess(_0x14e665,_0x5c4b9b)['allow'])getMessages();else logger[_0x104c53(0x303)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x274379['on'](_0x4e9a3d(0x23c),(_0x32189a,_0x5ec3ea)=>{const _0x2bdf5c=_0x4e9a3d;if(validateAccess(_0x5ec3ea,_0x5c4b9b)[_0x2bdf5c(0x260)])confirmMessage(_0x32189a);else logger[_0x2bdf5c(0x303)](_0x2bdf5c(0x297));}),_0x274379['on'](_0x4e9a3d(0x226),_0x1a1893=>{const _0x85879a=_0x4e9a3d;if(validateAccess(_0x1a1893,_0x5c4b9b)[_0x85879a(0x260)]){if(devices[_0x5c4b9b][_0x85879a(0x31e)])clearTimeout(devices[_0x5c4b9b]['pidRefreshToken']);if(devices[_0x5c4b9b][_0x85879a(0x21b)])clearTimeout(devices[_0x5c4b9b]['pidExpireLogin']);removeSocketListeners(getClient(_0x274379['id'])[_0x85879a(0x293)]),addBlacklist(_0x5c4b9b),devices[_0x5c4b9b][_0x85879a(0x2b6)]=null,devices[_0x5c4b9b][_0x85879a(0x1b5)]=null,devices[_0x5c4b9b]['access'][_0x85879a(0x248)]=null,io['to'](getClient(_0x274379['id'])[_0x85879a(0x293)])[_0x85879a(0x215)](_0x85879a(0x2c0),{'access':{'allow':![],'reason':_0x85879a(0x22c),'token':null}});}else logger[_0x85879a(0x303)](_0x85879a(0x239));});}function removeSocketListeners(_0xd6db6f){getClientsWithUuid(_0xd6db6f)['forEach'](_0x363b5b=>{getSocket(_0x363b5b['id'])['removeAllListeners']();});}function cleanSettings(){const _0x3ae72e=_0x3b7433;let _0x46dece=settings;return settings[_0x3ae72e(0x213)]&&settings[_0x3ae72e(0x213)]!=''&&(_0x46dece={..._0x46dece,'telegramToken':_0x3ae72e(0x256)}),settings[_0x3ae72e(0x2ab)]&&settings['bbPassword']!=''&&(_0x46dece={..._0x46dece,'bbPassword':_0x3ae72e(0x256)}),(settings[_0x3ae72e(0x2ab)]&&settings[_0x3ae72e(0x2ab)]==_0x3ae72e(0x1b6)||settings[_0x3ae72e(0x213)]&&settings['telegramToken']=='***')&&(_0x46dece={..._0x46dece,'restored':{'password':settings[_0x3ae72e(0x2ab)]==_0x3ae72e(0x1b6),'telegram':settings[_0x3ae72e(0x213)]=='***'}}),_0x46dece;}function updateBB(){const _0x364dc0=_0x3b7433;installingUpdate=!![],config[_0x364dc0(0x2fb)](_0x1922d2=>{const _0x8b9897=_0x364dc0;restartBot(_0x1922d2[_0x8b9897(0x27b)]);}),process['send']({'update':!![]},_0x499b86=>{});}function startBot(_0x344159,_0x5b377e,_0x432046){const _0x5148d3=_0x3b7433;let _0x11d33e=![];const _0x1a7a02=_0x344159[0x0];_0x5b377e={..._0x5b377e,'stdio':[_0x5148d3(0x258),_0x5148d3(0x258),_0x5148d3(0x258),_0x5148d3(0x2a9)]},pid[_0x1a7a02]=childProcess[_0x5148d3(0x269)](botfile,_0x344159,_0x5b377e),pid[_0x1a7a02]['on']('message',_0x50b3d3=>{const _0x3dea0e=_0x5148d3;switch(Object[_0x3dea0e(0x2ee)](_0x50b3d3)[0x0]){case _0x3dea0e(0x204):updateBotName(_0x1a7a02,_0x50b3d3[_0x3dea0e(0x204)]);break;case _0x3dea0e(0x2a4):updateBotManager();break;case _0x3dea0e(0x2c0):updateStatus(_0x1a7a02,_0x50b3d3[_0x3dea0e(0x2c0)]);break;case _0x3dea0e(0x26e):updateLive(_0x1a7a02,_0x50b3d3[_0x3dea0e(0x26e)]);break;case _0x3dea0e(0x282):updateLive(_0x1a7a02,_0x50b3d3['started']),io['to'](_0x1a7a02)[_0x3dea0e(0x215)](_0x3dea0e(0x2c0),{'access':{'allow':![],'reason':_0x3dea0e(0x212),'token':null}});break;case'stop':_0x50b3d3[_0x3dea0e(0x1d7)]=='restart'&&restartBot(_0x1a7a02);_0x50b3d3[_0x3dea0e(0x1d7)]==_0x3dea0e(0x27e)&&toggleBot(_0x1a7a02,_0x3dea0e(0x1d2),_0x3dea0e(0x31b));break;case'telegram':sendTelegram(_0x1a7a02,_0x50b3d3[_0x3dea0e(0x2b7)]);break;case _0x3dea0e(0x27d):sendTelegramMsg(_0x50b3d3[_0x3dea0e(0x27d)]);break;case _0x3dea0e(0x2f6):io['to'](_0x1a7a02)[_0x3dea0e(0x215)](_0x50b3d3[_0x3dea0e(0x2f6)],_0x50b3d3[_0x3dea0e(0x2ac)]);break;}}),pid[_0x1a7a02]['on']('error',function(_0x448577){if(_0x11d33e)return;_0x11d33e=!![],_0x432046(_0x448577);}),pid[_0x1a7a02]['on'](_0x5148d3(0x2a6),async function(_0x5895b0){const _0x2a4688=_0x5148d3;if(installingUpdate)return;if(_0x11d33e)return;_0x11d33e=!![],_0x432046(null);const _0x5f4331=dbConfig[_0x2a4688(0x2e3)](_0x2a4688(0x1a5))[_0x2a4688(0x1aa)]({'botID':_0x1a7a02})[_0x2a4688(0x311)]();_0x5f4331&&(_0x5f4331['status']==_0x2a4688(0x2a0)||_0x5f4331[_0x2a4688(0x2c0)]==_0x2a4688(0x2b2))&&(await sleep(0x3e8),updateLive(_0x1a7a02,'stopped'),logger[_0x2a4688(0x303)]('restarting\x20Bot\x20'+_0x1a7a02),startBot([_0x1a7a02,userID],{'cwd':bbpath},function(_0x1b54bd){const _0x3fa9da=_0x2a4688;if(_0x1b54bd)logger[_0x3fa9da(0x303)](_0x1b54bd);}));});}function stopBot(_0x38380a){const _0x2b7b77=_0x3b7433;getClientsWithBotID(_0x38380a)['forEach'](_0x15d0ee=>{getSocket(_0x15d0ee['id'])['disconnect'](!![]),removeClient(_0x15d0ee['id']);}),pid[_0x38380a]&&(pid[_0x38380a][_0x2b7b77(0x27e)](),pid[_0x38380a]=null);}function restartBot(_0xd750){const _0x22f90c=_0x3b7433;if(pid[_0xd750])pid[_0xd750][_0x22f90c(0x27e)]();}function addBot(){const _0x2283b0=_0x3b7433;let _0x1e5dc4;for(let _0x5ed8ab=0x1;_0x5ed8ab<0x3e9;_0x5ed8ab++){_0x1e5dc4=_0x5ed8ab['toString']()['padStart'](0x3,'0');let _0x5cf90b=config[_0x2283b0(0x1aa)](_0x5f20a1=>_0x5f20a1['botID']==_0x1e5dc4);if(!_0x5cf90b)break;}if(_0x1e5dc4===_0x2283b0(0x1ca)){logger[_0x2283b0(0x303)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full'](_0x2283b0(0x2c4)+_0x1e5dc4),dbConfig[_0x2283b0(0x2e3)](_0x2283b0(0x1a5))[_0x2283b0(0x1c6)]({'botID':_0x1e5dc4,'botname':_0x2283b0(0x28c)+_0x1e5dc4,'status':'new','live':''})[_0x2283b0(0x2ae)](),startBot([_0x1e5dc4,userID],{'cwd':bbpath},function(_0x34873c){const _0x21e2a3=_0x2283b0;if(_0x34873c)logger[_0x21e2a3(0x303)](_0x34873c);}),config=getConfiguration(),io['to'](_0x2283b0(0x1bb))[_0x2283b0(0x215)]('bots',config);}function deleteBot(_0x10bf6a){const _0x58af51=_0x3b7433;getClientsWithBotID(_0x10bf6a)[_0x58af51(0x2fb)](_0x2750a1=>{getSocket(_0x2750a1['id'])['disconnect'](!![]),removeClient(_0x2750a1['id']);}),dbConfig['get'](_0x58af51(0x1a5))[_0x58af51(0x1c2)]({'botID':_0x10bf6a})[_0x58af51(0x2ae)](),logger[_0x58af51(0x303)]('deleted\x20Bot\x20'+_0x10bf6a),stopBot(_0x10bf6a);try{fs[_0x58af51(0x240)](path[_0x58af51(0x26d)](configpath,'bot-'+_0x10bf6a+_0x58af51(0x1b7))),fs[_0x58af51(0x240)](path[_0x58af51(0x26d)](configpath,'bot-'+_0x10bf6a+_0x58af51(0x2f9))),fs[_0x58af51(0x240)](path[_0x58af51(0x26d)](configpath,_0x58af51(0x224)+_0x10bf6a+_0x58af51(0x1b2))),fs[_0x58af51(0x240)](path['join'](configpath,_0x58af51(0x224)+_0x10bf6a+_0x58af51(0x21f)));}catch(_0x207b58){if(_0x207b58)logger[_0x58af51(0x303)](_0x58af51(0x309),_0x207b58);}config=getConfiguration(),io['to'](_0x58af51(0x1bb))[_0x58af51(0x215)](_0x58af51(0x1a5),config);}function toggleBot(_0x319ce5,_0x213a8a,_0x167038){const _0x215b16=_0x3b7433;dbConfig['get'](_0x215b16(0x1a5))[_0x215b16(0x1aa)]({'botID':_0x319ce5})['assign']({'status':_0x213a8a})[_0x215b16(0x273)]({'live':_0x167038})[_0x215b16(0x2ae)]();if(_0x213a8a=='enabled'||_0x213a8a==_0x215b16(0x2b2))logger[_0x215b16(0x303)]('enabled\x20Bot\x20'+_0x319ce5),startBot([_0x319ce5,userID],{'cwd':bbpath},function(_0x4378e8){if(_0x4378e8)logger['full'](_0x4378e8);});else(_0x213a8a==_0x215b16(0x1d2)||_0x213a8a==_0x215b16(0x192))&&(logger['full'](_0x215b16(0x1f9)+_0x319ce5),stopBot(_0x319ce5));config=getConfiguration(),io['to'](_0x215b16(0x1bb))[_0x215b16(0x215)](_0x215b16(0x1a5),config);}function toggleStatus(_0x4cbb67){const _0x431d52=_0x3b7433;let _0x439532=dbConfig['get'](_0x431d52(0x1a5))['find']({'botID':_0x4cbb67})['value'](),_0x3f6d3e;if(_0x439532[_0x431d52(0x2c0)]===_0x431d52(0x2a0))_0x3f6d3e=_0x431d52(0x1d2);else{if(_0x439532['status']==='new')_0x3f6d3e=_0x431d52(0x192);else{if(_0x439532[_0x431d52(0x2c0)]===_0x431d52(0x192))_0x3f6d3e='new';else{if(_0x439532[_0x431d52(0x2c0)]===_0x431d52(0x1d2))_0x3f6d3e=_0x431d52(0x2a0);}}}return _0x3f6d3e;}function updateStatus(_0x3ff317,_0x23e407){const _0x3464be=_0x3b7433;dbConfig[_0x3464be(0x2e3)]('bots')[_0x3464be(0x1aa)]({'botID':_0x3ff317})[_0x3464be(0x273)]({'status':_0x23e407})[_0x3464be(0x2ae)](),config=getConfiguration(),io['to'](_0x3464be(0x1bb))[_0x3464be(0x215)](_0x3464be(0x1a5),config);}function updateLive(_0x1491ee,_0x17686a){const _0x154bb1=_0x3b7433;dbConfig[_0x154bb1(0x2e3)](_0x154bb1(0x1a5))['find']({'botID':_0x1491ee})['assign']({'live':_0x17686a})[_0x154bb1(0x2ae)](),config=getConfiguration(),io['to']('botmanager')[_0x154bb1(0x215)](_0x154bb1(0x1a5),config);}function updateBotName(_0xd0fef1,_0x257b77){const _0x228503=_0x3b7433;dbConfig[_0x228503(0x2e3)](_0x228503(0x1a5))[_0x228503(0x1aa)]({'botID':_0xd0fef1})[_0x228503(0x273)]({'botname':_0x257b77})[_0x228503(0x2ae)](),config=getConfiguration(),io['to'](_0x228503(0x1bb))[_0x228503(0x215)](_0x228503(0x1a5),config);}function updateBotManager(){const _0x4d3cd1=_0x3b7433;config=getConfiguration(),io['to'](_0x4d3cd1(0x1bb))[_0x4d3cd1(0x215)](_0x4d3cd1(0x1a5),config);}function toggleBotMode(_0xf0a9bf){const _0x293d7b=_0x3b7433;if(pid[_0xf0a9bf])pid[_0xf0a9bf][_0x293d7b(0x243)]({'function':_0x293d7b(0x2f7),'args':null});else{const _0x2acf06=configpath+_0x293d7b(0x224)+_0xf0a9bf+_0x293d7b(0x1b7),_0x65b21a=fs[_0x293d7b(0x25f)](_0x2acf06),_0x558255=JSON[_0x293d7b(0x2ce)](_0x65b21a),_0x32a14c=_0x558255[_0x293d7b(0x2b3)][0x0][_0x293d7b(0x1c4)];_0x558255[_0x293d7b(0x2b3)][0x0]['headless']=!_0x32a14c;const _0xb9d476=JSON[_0x293d7b(0x2da)](_0x558255,null,0x2);fs[_0x293d7b(0x2d8)](_0x2acf06,_0xb9d476),config=getConfiguration(),io['to'](_0x293d7b(0x1bb))[_0x293d7b(0x215)](_0x293d7b(0x1a5),config);}}function telegramError(_0x980b5d){const _0x8c4918=_0x3b7433;logger['simple'](getTimeStamp()+_0x8c4918(0x2f4));}function validateTelegram(_0x2b70ee){const _0x4c9ed0=_0x3b7433;if(_0x2b70ee[_0x4c9ed0(0x289)][_0x4c9ed0(0x1eb)]!=settings[_0x4c9ed0(0x19b)]&&'@'+_0x2b70ee[_0x4c9ed0(0x289)][_0x4c9ed0(0x1eb)]!=settings[_0x4c9ed0(0x19b)])return tgBot[_0x4c9ed0(0x307)](_0x2b70ee[_0x4c9ed0(0x1a7)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x4c9ed0(0x191)})[_0x4c9ed0(0x2fe)](_0x20291b=>{telegramError(_0x20291b);}),![];return!![];}async function initTelegram(){const _0x93e580=_0x3b7433;if(tgBot)tgBot[_0x93e580(0x287)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x93e580(0x213)],{'polling':!![]});let _0x5152ee='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5152ee+='\x0a',_0x5152ee+=_0x93e580(0x1d0),_0x5152ee+=_0x93e580(0x231),_0x5152ee+=_0x93e580(0x1df),_0x5152ee+=_0x93e580(0x1f6),_0x5152ee+=_0x93e580(0x2e6),_0x5152ee+=_0x93e580(0x2af),_0x5152ee+=_0x93e580(0x1af),_0x5152ee+='/names\x20-\x20show\x20bot\x20names\x0a',_0x5152ee+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x5152ee+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x5152ee+=_0x93e580(0x2b9),_0x5152ee+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x44d653='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x44d653+='\x0a',_0x44d653+=_0x5152ee,tgBot[_0x93e580(0x323)](/\/start/,_0x2d8d47=>{const _0x129b01=_0x93e580;if(!validateTelegram(_0x2d8d47))return;if(settings[_0x129b01(0x1b9)]!=_0x2d8d47['chat']['id'])updateSetting(_0x129b01(0x1b9),_0x2d8d47['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x2d8d47[_0x129b01(0x1a7)]['id'],_0x44d653)[_0x129b01(0x2fe)](_0x21066e=>{telegramError(_0x21066e);});}),tgBot[_0x93e580(0x323)](/\/enable/,_0x4bb8b5=>{const _0x580ffd=_0x93e580;if(!validateTelegram(_0x4bb8b5))return;if(settings[_0x580ffd(0x1b9)]!=_0x4bb8b5['chat']['id'])updateSetting(_0x580ffd(0x1b9),_0x4bb8b5[_0x580ffd(0x1a7)]['id']);updateSetting(_0x580ffd(0x244),!![]),tgBot[_0x580ffd(0x307)](_0x4bb8b5[_0x580ffd(0x1a7)]['id'],_0x580ffd(0x2dd))[_0x580ffd(0x2fe)](_0x137ce6=>{telegramError(_0x137ce6);});}),tgBot[_0x93e580(0x323)](/\/config/,async _0x293561=>{const _0x5c762b=_0x93e580;if(!validateTelegram(_0x293561))return;tgBot[_0x5c762b(0x2eb)](_0x5c762b(0x2a7)),tgBot[_0x5c762b(0x307)](_0x293561[_0x5c762b(0x1a7)]['id'],_0x5c762b(0x2b4),{'reply_markup':{'inline_keyboard':[[{'text':_0x5c762b(0x1ba),'callback_data':_0x5c762b(0x1f1)},{'text':_0x5c762b(0x1dd),'callback_data':_0x5c762b(0x286)},{'text':_0x5c762b(0x1bf),'callback_data':_0x5c762b(0x2d4)}]]}})['catch'](_0x5436cc=>{telegramError(_0x5436cc);}),tgBot['on'](_0x5c762b(0x2a7),async _0x97a0e0=>{const _0x37fc98=_0x5c762b,_0x456fe0=_0x97a0e0[_0x37fc98(0x251)],_0x48bc02=_0x97a0e0[_0x37fc98(0x30b)];tgBot[_0x37fc98(0x252)](_0x97a0e0['id'])[_0x37fc98(0x208)](async()=>{const _0x3244b8=_0x37fc98;_0x456fe0==_0x3244b8(0x1f1)&&(updateSetting(_0x3244b8(0x2db),_0x3244b8(0x1f1)),updateSetting(_0x3244b8(0x244),!![]),await tgBot[_0x3244b8(0x307)](_0x48bc02[_0x3244b8(0x1a7)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x3244b8(0x2fe)](_0x59f385=>{telegramError(_0x59f385);}));_0x456fe0=='alerts'&&(updateSetting(_0x3244b8(0x2db),_0x3244b8(0x286)),updateSetting(_0x3244b8(0x244),!![]),await tgBot[_0x3244b8(0x307)](_0x48bc02[_0x3244b8(0x1a7)]['id'],_0x3244b8(0x285))[_0x3244b8(0x2fe)](_0x502913=>{telegramError(_0x502913);}));_0x456fe0==_0x3244b8(0x2d4)&&(updateSetting('telegramEvents',_0x3244b8(0x2d4)),updateSetting(_0x3244b8(0x244),!![]),await tgBot[_0x3244b8(0x307)](_0x48bc02[_0x3244b8(0x1a7)]['id'],_0x3244b8(0x2fd))['catch'](_0x10d8f3=>{telegramError(_0x10d8f3);}));if(!settings[_0x3244b8(0x1b9)])tgBot[_0x3244b8(0x307)](_0x48bc02[_0x3244b8(0x1a7)]['id'],_0x3244b8(0x218))[_0x3244b8(0x2fe)](_0x4f985a=>{telegramError(_0x4f985a);});}),tgBot[_0x37fc98(0x2eb)]('callback_query');});}),tgBot[_0x93e580(0x323)](/\/status/,_0x5d2365=>{const _0x93953b=_0x93e580;if(!validateTelegram(_0x5d2365))return;const _0x4a2dca=getBotsWithMode();let _0x9301ab=_0x93953b(0x1b4);config[_0x93953b(0x2fb)](_0x12d4ab=>{const _0x53951c=_0x93953b,_0x3475d3=_0x4a2dca[_0x53951c(0x1aa)](_0x44ca49=>_0x44ca49[_0x53951c(0x27b)]==_0x12d4ab[_0x53951c(0x27b)])[_0x53951c(0x29a)];_0x9301ab+='Bot\x20'+_0x12d4ab[_0x53951c(0x27b)]+':\x20'+_0x12d4ab[_0x53951c(0x2c0)]+'\x20|\x20'+_0x3475d3+'\x20|\x20'+_0x12d4ab[_0x53951c(0x26e)]+'\x0a';}),_0x9301ab+='\x0a',_0x9301ab+=_0x93953b(0x193),_0x9301ab+=!settings[_0x93953b(0x244)]?_0x93953b(0x203):_0x93953b(0x2e9),_0x9301ab+=settings[_0x93953b(0x244)]?settings['telegramEvents']==_0x93953b(0x2d4)?_0x93953b(0x279):'Notifications\x20types:\x20'+settings[_0x93953b(0x2db)]+'\x20only\x0a':'',tgBot[_0x93953b(0x307)](_0x5d2365[_0x93953b(0x1a7)]['id'],_0x9301ab,{'parse_mode':'HTML'})[_0x93953b(0x2fe)](_0x231a88=>{telegramError(_0x231a88);});}),tgBot[_0x93e580(0x323)](/\/restart/,_0x378a36=>{const _0x7c176=_0x93e580;if(!validateTelegram(_0x378a36))return;tgBot[_0x7c176(0x2eb)](_0x7c176(0x2a7));const _0x435783=getEnabledBots();if(_0x435783['length']==0x0)tgBot[_0x7c176(0x307)](_0x378a36['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x7c176(0x2fe)](_0x85dd90=>{telegramError(_0x85dd90);});else{if(_0x435783[_0x7c176(0x2f0)]>0x1)_0x435783[_0x7c176(0x1c6)]({'botID':'all'});let _0x1e9ef7=[],_0x1b9df7=[];const _0xbc0f4d=_0x435783[_0x7c176(0x2f0)]%0x4==0x0||_0x435783[_0x7c176(0x2f0)]%0x4==0x3||_0x435783[_0x7c176(0x2f0)]%0x3==0x1?0x4:0x3;let _0x195fe6=0x0;_0x435783[_0x7c176(0x2fb)]((_0x3e0f55,_0x2b66d3)=>{const _0x7183d=_0x7c176;if(_0x2b66d3%_0xbc0f4d==0x0)_0x1b9df7=[];_0x1b9df7[_0x7183d(0x1c6)]({'text':_0x3e0f55[_0x7183d(0x27b)]==_0x7183d(0x2d4)?'All\x20bots':_0x7183d(0x28c)+_0x3e0f55[_0x7183d(0x27b)],'callback_data':_0x3e0f55['botID']}),_0x2b66d3%_0xbc0f4d==0x0&&(_0x1e9ef7[_0x195fe6]=_0x1b9df7,_0x195fe6++);}),tgBot[_0x7c176(0x307)](_0x378a36[_0x7c176(0x1a7)]['id'],_0x7c176(0x1b3),{'reply_markup':{'inline_keyboard':_0x1e9ef7}})[_0x7c176(0x2fe)](_0x15eebf=>{telegramError(_0x15eebf);}),tgBot['on'](_0x7c176(0x2a7),async _0x493ce7=>{const _0x407ddc=_0x7c176,_0x3644fd=_0x493ce7['data'],_0xca4f3c=_0x493ce7[_0x407ddc(0x30b)];tgBot[_0x407ddc(0x252)](_0x493ce7['id'])[_0x407ddc(0x208)](async()=>{const _0x770088=_0x407ddc;_0x3644fd==_0x770088(0x2d4)?config[_0x770088(0x2fb)](_0x11b357=>{const _0x49d6e6=_0x770088;restartBot(_0x11b357[_0x49d6e6(0x27b)]);}):restartBot(_0x3644fd);}),tgBot[_0x407ddc(0x2eb)](_0x407ddc(0x2a7));});}}),tgBot['onText'](/\/on/,_0x149b88=>{const _0x1969d2=_0x93e580;if(!validateTelegram(_0x149b88))return;tgBot[_0x1969d2(0x2eb)](_0x1969d2(0x2a7));const _0x6304aa=getDisabledBots();if(_0x6304aa['length']==0x0)tgBot['sendMessage'](_0x149b88[_0x1969d2(0x1a7)]['id'],_0x1969d2(0x2ea))[_0x1969d2(0x2fe)](_0x178a1b=>{telegramError(_0x178a1b);});else{if(_0x6304aa[_0x1969d2(0x2f0)]>0x1)_0x6304aa[_0x1969d2(0x1c6)]({'botID':_0x1969d2(0x2d4)});let _0x8da7ef=[],_0x245eba=[];const _0x944b68=_0x6304aa['length']%0x4==0x0||_0x6304aa[_0x1969d2(0x2f0)]%0x4==0x3||_0x6304aa[_0x1969d2(0x2f0)]%0x3==0x1?0x4:0x3;let _0x135d6c=0x0;_0x6304aa[_0x1969d2(0x2fb)]((_0x37c6b4,_0x8a68b8)=>{const _0x3bf3d6=_0x1969d2;if(_0x8a68b8%_0x944b68==0x0)_0x245eba=[];_0x245eba[_0x3bf3d6(0x1c6)]({'text':_0x37c6b4[_0x3bf3d6(0x27b)]=='all'?'All\x20bots':_0x3bf3d6(0x28c)+_0x37c6b4[_0x3bf3d6(0x27b)],'callback_data':_0x37c6b4[_0x3bf3d6(0x27b)]}),_0x8a68b8%_0x944b68==0x0&&(_0x8da7ef[_0x135d6c]=_0x245eba,_0x135d6c++);}),tgBot[_0x1969d2(0x307)](_0x149b88['chat']['id'],_0x1969d2(0x196),{'reply_markup':{'inline_keyboard':_0x8da7ef}})[_0x1969d2(0x2fe)](_0x183a14=>{telegramError(_0x183a14);}),tgBot['on']('callback_query',async _0x34f6e0=>{const _0xf4adc7=_0x1969d2,_0x32bb82=_0x34f6e0[_0xf4adc7(0x251)],_0x542129=_0x34f6e0['message'];tgBot['answerCallbackQuery'](_0x34f6e0['id'])[_0xf4adc7(0x208)](async()=>{const _0x161058=_0xf4adc7;_0x32bb82=='all'?(tgBot[_0x161058(0x307)](_0x542129[_0x161058(0x1a7)]['id'],_0x161058(0x280))[_0x161058(0x2fe)](_0x5dc341=>{telegramError(_0x5dc341);}),_0x6304aa[_0x161058(0x2fb)](_0x1023a8=>{const _0x35e984=_0x161058;if(_0x1023a8[_0x35e984(0x27b)]!=_0x35e984(0x2d4))toggleBot(_0x1023a8['botID'],toggleStatus(_0x1023a8[_0x35e984(0x27b)]),_0x35e984(0x31b));})):(tgBot['sendMessage'](_0x542129['chat']['id'],_0x161058(0x23f)+_0x32bb82)[_0x161058(0x2fe)](_0x92df0=>{telegramError(_0x92df0);}),toggleBot(_0x32bb82,toggleStatus(_0x32bb82),_0x161058(0x31b)));}),tgBot[_0xf4adc7(0x2eb)](_0xf4adc7(0x2a7));});}}),tgBot[_0x93e580(0x323)](/\/off/,_0x10f184=>{const _0x5bdd05=_0x93e580;if(!validateTelegram(_0x10f184))return;tgBot[_0x5bdd05(0x2eb)](_0x5bdd05(0x2a7));const _0xb9f91b=getEnabledBots();if(_0xb9f91b[_0x5bdd05(0x2f0)]==0x0)tgBot[_0x5bdd05(0x307)](_0x10f184[_0x5bdd05(0x1a7)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5bdd05(0x2fe)](_0x2a16e8=>{telegramError(_0x2a16e8);});else{if(_0xb9f91b[_0x5bdd05(0x2f0)]>0x1)_0xb9f91b[_0x5bdd05(0x1c6)]({'botID':'all'});let _0x554ee0=[],_0x312b88=[];const _0x52c61d=_0xb9f91b[_0x5bdd05(0x2f0)]%0x4==0x0||_0xb9f91b['length']%0x4==0x3||_0xb9f91b['length']%0x3==0x1?0x4:0x3;let _0x4e5891=0x0;_0xb9f91b[_0x5bdd05(0x2fb)]((_0x1b09ae,_0x33c697)=>{const _0x341005=_0x5bdd05;if(_0x33c697%_0x52c61d==0x0)_0x312b88=[];_0x312b88[_0x341005(0x1c6)]({'text':_0x1b09ae[_0x341005(0x27b)]==_0x341005(0x2d4)?_0x341005(0x308):_0x341005(0x28c)+_0x1b09ae['botID'],'callback_data':_0x1b09ae[_0x341005(0x27b)]}),_0x33c697%_0x52c61d==0x0&&(_0x554ee0[_0x4e5891]=_0x312b88,_0x4e5891++);}),tgBot[_0x5bdd05(0x307)](_0x10f184[_0x5bdd05(0x1a7)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x554ee0}})[_0x5bdd05(0x2fe)](_0x270c1c=>{telegramError(_0x270c1c);}),tgBot['on'](_0x5bdd05(0x2a7),async _0x2a4cd6=>{const _0x52ef6d=_0x5bdd05,_0x512636=_0x2a4cd6[_0x52ef6d(0x251)],_0x385412=_0x2a4cd6[_0x52ef6d(0x30b)];tgBot['answerCallbackQuery'](_0x2a4cd6['id'])[_0x52ef6d(0x208)](async()=>{const _0x1144db=_0x52ef6d;_0x512636==_0x1144db(0x2d4)?(tgBot[_0x1144db(0x307)](_0x385412[_0x1144db(0x1a7)]['id'],_0x1144db(0x1b8))['catch'](_0x14087f=>{telegramError(_0x14087f);}),_0xb9f91b[_0x1144db(0x2fb)](_0x1e4c4f=>{const _0x518aed=_0x1144db;if(_0x1e4c4f[_0x518aed(0x27b)]!=_0x518aed(0x2d4))toggleBot(_0x1e4c4f[_0x518aed(0x27b)],toggleStatus(_0x1e4c4f['botID']),'stopped');})):(tgBot[_0x1144db(0x307)](_0x385412[_0x1144db(0x1a7)]['id'],_0x1144db(0x1d6)+_0x512636)[_0x1144db(0x2fe)](_0x36a7db=>{telegramError(_0x36a7db);}),toggleBot(_0x512636,toggleStatus(_0x512636),_0x1144db(0x31b)));}),tgBot[_0x52ef6d(0x2eb)](_0x52ef6d(0x2a7));});}}),tgBot[_0x93e580(0x323)](/\/portfolio/,_0x180b2f=>{const _0x496b57=_0x93e580;if(!validateTelegram(_0x180b2f))return;tgBot[_0x496b57(0x2eb)](_0x496b57(0x2a7));const _0x3dad9b=getEnabledBots();if(_0x3dad9b[_0x496b57(0x2f0)]==0x0)tgBot[_0x496b57(0x307)](_0x180b2f['chat']['id'],_0x496b57(0x2bf))[_0x496b57(0x2fe)](_0x2d6ac6=>{telegramError(_0x2d6ac6);});else{if(_0x3dad9b[_0x496b57(0x2f0)]>0x1){let _0x21e322=[],_0x5288c5=[];const _0x42df9c=_0x3dad9b[_0x496b57(0x2f0)]%0x4==0x0||_0x3dad9b['length']%0x4==0x3||_0x3dad9b[_0x496b57(0x2f0)]%0x3==0x1?0x4:0x3;let _0x5674ec=0x0;_0x3dad9b[_0x496b57(0x2fb)]((_0x26b993,_0x10e432)=>{const _0x1e1157=_0x496b57;if(_0x10e432%_0x42df9c==0x0)_0x5288c5=[];_0x5288c5[_0x1e1157(0x1c6)]({'text':'Bot\x20'+_0x26b993[_0x1e1157(0x27b)],'callback_data':_0x26b993['botID']}),_0x10e432%_0x42df9c==0x0&&(_0x21e322[_0x5674ec]=_0x5288c5,_0x5674ec++);}),tgBot[_0x496b57(0x307)](_0x180b2f[_0x496b57(0x1a7)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x21e322}})['catch'](_0x45f9e4=>{telegramError(_0x45f9e4);}),tgBot['on'](_0x496b57(0x2a7),async _0x41990e=>{const _0x2ce9c1=_0x496b57,_0x4599fe=_0x41990e[_0x2ce9c1(0x251)],_0x1d36ab=_0x41990e[_0x2ce9c1(0x30b)];tgBot[_0x2ce9c1(0x252)](_0x41990e['id'])['then'](async()=>{const _0x3d1199=_0x2ce9c1;if(pid[_0x4599fe])pid[_0x4599fe][_0x3d1199(0x243)]({'function':'sendPortfolioTelegram','args':null});}),tgBot['removeListener'](_0x2ce9c1(0x2a7));});}else{const _0x367d99=_0x3dad9b[0x0][_0x496b57(0x27b)];if(pid[_0x367d99])pid[_0x367d99][_0x496b57(0x243)]({'function':_0x496b57(0x1f5),'args':null});}}}),tgBot[_0x93e580(0x323)](/\/update/,async _0x59f576=>{const _0x4a3ec3=_0x93e580;if(!validateTelegram(_0x59f576))return;tgBot['removeListener'](_0x4a3ec3(0x2a7)),await getMessages();if(!updateAvailable)tgBot[_0x4a3ec3(0x307)](_0x59f576[_0x4a3ec3(0x1a7)]['id'],_0x4a3ec3(0x270))[_0x4a3ec3(0x2fe)](_0x361df0=>{telegramError(_0x361df0);});else!validInstallation?tgBot[_0x4a3ec3(0x307)](_0x59f576['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x4a3ec3(0x2fe)](_0x1c3687=>{telegramError(_0x1c3687);}):(tgBot[_0x4a3ec3(0x307)](_0x59f576[_0x4a3ec3(0x1a7)]['id'],_0x4a3ec3(0x19f),{'reply_markup':{'inline_keyboard':[[{'text':_0x4a3ec3(0x320),'callback_data':_0x4a3ec3(0x328)},{'text':'No','callback_data':'no'}]]}})[_0x4a3ec3(0x2fe)](_0x1343e6=>{telegramError(_0x1343e6);}),tgBot['on'](_0x4a3ec3(0x2a7),async _0x400e19=>{const _0x508a88=_0x4a3ec3,_0x1fe262=_0x400e19[_0x508a88(0x251)],_0x3c30fd=_0x400e19[_0x508a88(0x30b)];tgBot[_0x508a88(0x252)](_0x400e19['id'])[_0x508a88(0x208)](async()=>{const _0x2688e1=_0x508a88;_0x1fe262==_0x2688e1(0x328)&&(await tgBot[_0x2688e1(0x307)](_0x3c30fd[_0x2688e1(0x1a7)]['id'],'Starting\x20Balance\x20Bot\x20update')[_0x2688e1(0x2fe)](_0x30af92=>{telegramError(_0x30af92);}),updateBB());_0x1fe262=='no'&&await tgBot[_0x2688e1(0x307)](_0x3c30fd['chat']['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x2688e1(0x2fe)](_0x190576=>{telegramError(_0x190576);});if(!settings[_0x2688e1(0x1b9)])tgBot[_0x2688e1(0x307)](_0x3c30fd[_0x2688e1(0x1a7)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x2688e1(0x2fe)](_0x2ee031=>{telegramError(_0x2ee031);});}),tgBot[_0x508a88(0x2eb)]('callback_query');}));}),tgBot[_0x93e580(0x323)](/\/toggle/,_0x41bbe8=>{const _0x8d510a=_0x93e580;if(!validateTelegram(_0x41bbe8))return;tgBot['removeListener']('callback_query');const _0x1899e8=getBotsWithMode();if(_0x1899e8[_0x8d510a(0x2f0)]==0x0)tgBot[_0x8d510a(0x307)](_0x41bbe8[_0x8d510a(0x1a7)]['id'],_0x8d510a(0x2bf))['catch'](_0x18242d=>{telegramError(_0x18242d);});else{let _0x5d0046=[],_0x5e9fad=[];const _0x4e23bb=0x2;let _0x53669c=0x0;_0x1899e8[_0x8d510a(0x2fb)]((_0x3babd6,_0x47f3d4)=>{const _0x56124b=_0x8d510a;if(_0x47f3d4%_0x4e23bb==0x0)_0x5e9fad=[];_0x5e9fad[_0x56124b(0x1c6)]({'text':_0x56124b(0x28c)+_0x3babd6[_0x56124b(0x27b)]+'\x20('+_0x3babd6[_0x56124b(0x29a)]+')','callback_data':_0x3babd6[_0x56124b(0x27b)]}),_0x47f3d4%_0x4e23bb==0x0&&(_0x5d0046[_0x53669c]=_0x5e9fad,_0x53669c++);}),tgBot[_0x8d510a(0x307)](_0x41bbe8[_0x8d510a(0x1a7)]['id'],_0x8d510a(0x1e6),{'reply_markup':{'inline_keyboard':_0x5d0046}})[_0x8d510a(0x2fe)](_0x3a73b1=>{telegramError(_0x3a73b1);}),tgBot['on']('callback_query',async _0x52918e=>{const _0x50960c=_0x8d510a,_0x513c7a=_0x52918e[_0x50960c(0x251)],_0x5aaf7b=_0x52918e['message'];tgBot[_0x50960c(0x252)](_0x52918e['id'])[_0x50960c(0x208)](async()=>{const _0x5de1f0=_0x50960c,_0x40c515=_0x1899e8[_0x5de1f0(0x1aa)](_0x18fb92=>_0x18fb92[_0x5de1f0(0x27b)]==_0x513c7a),_0x2e9c1f=_0x40c515[_0x5de1f0(0x29a)]==_0x5de1f0(0x2fa)?_0x5de1f0(0x2b1):'auto';tgBot[_0x5de1f0(0x307)](_0x5aaf7b[_0x5de1f0(0x1a7)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x513c7a+_0x5de1f0(0x277)+_0x2e9c1f+_0x5de1f0(0x313))[_0x5de1f0(0x2fe)](_0x462aa9=>{telegramError(_0x462aa9);}),toggleBotMode(_0x513c7a);}),tgBot[_0x50960c(0x2eb)](_0x50960c(0x2a7));});}}),tgBot[_0x93e580(0x323)](/\/names/,_0x93baf0=>{const _0x517178=_0x93e580;if(!validateTelegram(_0x93baf0))return;let _0x38d410='';config[_0x517178(0x2fb)](_0x1e7087=>{const _0x594312=_0x517178;_0x38d410+=_0x594312(0x28c)+_0x1e7087[_0x594312(0x27b)]+':\x20'+_0x1e7087[_0x594312(0x204)]+'\x0a';}),tgBot[_0x517178(0x307)](_0x93baf0[_0x517178(0x1a7)]['id'],_0x38d410,{'parse_mode':_0x517178(0x191)})[_0x517178(0x2fe)](_0xd181a3=>{telegramError(_0xd181a3);});}),tgBot['onText'](/\/disable/,_0x2ecc54=>{const _0x57ce81=_0x93e580;if(!validateTelegram(_0x2ecc54))return;tgBot['sendMessage'](_0x2ecc54['chat']['id'],_0x57ce81(0x1ef))[_0x57ce81(0x2fe)](_0x19b318=>{telegramError(_0x19b318);}),updateSetting(_0x57ce81(0x244),![]);}),tgBot[_0x93e580(0x323)](/\/help/,_0x555c64=>{const _0x503cff=_0x93e580;if(!validateTelegram(_0x555c64))return;tgBot[_0x503cff(0x307)](_0x555c64[_0x503cff(0x1a7)]['id'],_0x5152ee)[_0x503cff(0x2fe)](_0x467953=>{telegramError(_0x467953);});}),tgBot['on'](_0x93e580(0x296),_0x179e79=>{const _0x4c075=_0x93e580;_0x179e79[_0x4c075(0x1e9)]()[_0x4c075(0x306)]('404\x20Not\x20Found')&&(logger['full'](_0x4c075(0x1bd)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x4c075(0x1bb))[_0x4c075(0x215)](_0x4c075(0x29b),_0x4c075(0x1bd)));}),process[_0x93e580(0x23a)](_0x93e580(0x222),()=>{const _0x24c506=_0x93e580;if(tgBot)tgBot[_0x24c506(0x287)]();process['exit'](0x1);}),process[_0x93e580(0x23a)](_0x93e580(0x2f1),()=>{const _0x54c4d9=_0x93e580;if(tgBot)tgBot['stopPolling']();process[_0x54c4d9(0x2a6)](0x1);});}}function disableTelegram(){const _0x3c5c63=_0x3b7433;tgBot&&(tgBot[_0x3c5c63(0x287)](),tgBot=null);}function sendTelegram(_0xeb0049,_0x410f16){const _0x8cc70c=_0x3b7433;if(settings[_0x8cc70c(0x244)]){if(settings['telegramEvents']==_0x8cc70c(0x2d4)||(_0x410f16['type']==_0x8cc70c(0x211)||_0x410f16[_0x8cc70c(0x23e)]==_0x8cc70c(0x25d)||_0x410f16[_0x8cc70c(0x23e)]==_0x8cc70c(0x214))&&settings[_0x8cc70c(0x2db)]=='alerts'||_0x410f16[_0x8cc70c(0x23e)]==_0x8cc70c(0x1d1)&&settings['telegramEvents']==_0x8cc70c(0x1f1)){if(tgBot&&settings['telegramChatId']){if(_0x410f16['showname'])tgBot[_0x8cc70c(0x307)](settings[_0x8cc70c(0x1b9)],_0x410f16[_0x8cc70c(0x204)]+_0x8cc70c(0x1cd)+_0x410f16[_0x8cc70c(0x305)])['catch'](_0x13199b=>{telegramError(_0x13199b);});else tgBot[_0x8cc70c(0x307)](settings[_0x8cc70c(0x1b9)],'Bot\x20'+_0xeb0049+'\x20>\x20'+_0x410f16[_0x8cc70c(0x305)])[_0x8cc70c(0x2fe)](_0x2d1af8=>{telegramError(_0x2d1af8);});}}}}async function sendTelegramMsg(_0x324ec1,_0x514d78=_0x3b7433(0x191)){const _0x1eeba7=_0x3b7433;return settings[_0x1eeba7(0x244)]&&tgBot&&settings[_0x1eeba7(0x1b9)]?(await tgBot[_0x1eeba7(0x307)](settings[_0x1eeba7(0x1b9)],_0x324ec1,{'parse_mode':_0x514d78})['catch'](_0x4f2ff0=>{telegramError(_0x4f2ff0);}),!![]):![];}function getDeviceWithIp(_0x54462a){const _0x1d62ac=_0x3b7433;return devices[_0x1d62ac(0x1aa)](_0x5cc868=>_0x5cc868['ip']===_0x54462a);}function temporaryAccess2FA(_0x2bd3f1,_0x77a9db){const _0x3fed93=_0x3b7433;let _0x5ae1cb=new Date(),_0x338e1f=![];if(lastIpApproval){if(_0x5ae1cb-lastIpApproval<0x1388)_0x338e1f=!![];}lastIpApproval=new Date();if(_0x338e1f)return;tgBot&&settings[_0x3fed93(0x1b9)]&&(tgBot[_0x3fed93(0x2eb)](_0x3fed93(0x2a7)),tgBot['sendMessage'](settings[_0x3fed93(0x1b9)],_0x3fed93(0x25a)+normalizeIP(_0x77a9db)['show']+_0x3fed93(0x20c),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3fed93(0x267),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x3fed93(0x1fd),'callback_data':'30'},{'text':_0x3fed93(0x2e1),'callback_data':'reject'}]]}})[_0x3fed93(0x2fe)](_0x56d909=>{telegramError(_0x56d909);}),tgBot['on'](_0x3fed93(0x2a7),async _0x262d56=>{const _0x3bb1fb=_0x3fed93,_0x5987b6=_0x262d56[_0x3bb1fb(0x251)],_0x54ef8b=_0x262d56[_0x3bb1fb(0x30b)];tgBot[_0x3bb1fb(0x252)](_0x262d56['id'])[_0x3bb1fb(0x208)](async()=>{const _0x5f0833=_0x3bb1fb;devices[_0x2bd3f1][_0x5f0833(0x2b6)]={'clientip':_0x77a9db,'timestamp':new Date()[_0x5f0833(0x223)](),'expiry':_0x5987b6},_0x5987b6!=_0x5f0833(0x2e1)?(await tgBot['sendMessage'](_0x54ef8b['chat']['id'],_0x5f0833(0x263)+_0x5987b6+'\x20minutes',{'parse_mode':'HTML'})[_0x5f0833(0x2fe)](_0x22eb70=>{telegramError(_0x22eb70);}),io['to'](_0x2bd3f1)[_0x5f0833(0x215)](_0x5f0833(0x2c0),{'access':{'allow':![],'reason':_0x5f0833(0x212),'token':null}})):(await tgBot['sendMessage'](_0x54ef8b[_0x5f0833(0x1a7)]['id'],_0x5f0833(0x291))[_0x5f0833(0x2fe)](_0x18a10b=>{telegramError(_0x18a10b);}),io['to'](_0x2bd3f1)[_0x5f0833(0x215)]('status',{'access':{'allow':![],'reason':_0x5f0833(0x1e5),'token':null}}));}),tgBot[_0x3bb1fb(0x2eb)]('callback_query');}));}function loginAccess2FA(_0x3cd9a2,_0x24c14d){const _0x569610=_0x3b7433;tgBot&&settings[_0x569610(0x1b9)]&&(tgBot[_0x569610(0x2eb)]('callback_query'),tgBot[_0x569610(0x307)](settings[_0x569610(0x1b9)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x24c14d)[_0x569610(0x2e7)]+'</b>\x20?',{'parse_mode':_0x569610(0x191),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x569610(0x2e1),'callback_data':_0x569610(0x2e1)}]]}})[_0x569610(0x2fe)](_0x43acdd=>{telegramError(_0x43acdd);}),tgBot['on'](_0x569610(0x2a7),async _0x5b5633=>{const _0x21973e=_0x569610,_0x557bd6=_0x5b5633['data'],_0x4699e3=_0x5b5633[_0x21973e(0x30b)];tgBot[_0x21973e(0x252)](_0x5b5633['id'])[_0x21973e(0x208)](async()=>{const _0x13bb6d=_0x21973e;devices[_0x3cd9a2][_0x13bb6d(0x1b5)]={'clientip':_0x24c14d,'timestamp':new Date()[_0x13bb6d(0x223)](),'expiry':_0x557bd6},_0x557bd6!=_0x13bb6d(0x2e1)?(await tgBot[_0x13bb6d(0x307)](_0x4699e3[_0x13bb6d(0x1a7)]['id'],'Login\x20accepted',{'parse_mode':_0x13bb6d(0x191)})[_0x13bb6d(0x2fe)](_0x5bb173=>{telegramError(_0x5bb173);}),io['to'](_0x3cd9a2)['emit']('status',{'access':{'allow':![],'reason':_0x13bb6d(0x212),'token':null}})):(await tgBot[_0x13bb6d(0x307)](_0x4699e3[_0x13bb6d(0x1a7)]['id'],_0x13bb6d(0x25b))[_0x13bb6d(0x2fe)](_0x1c09d2=>{telegramError(_0x1c09d2);}),io['to'](_0x3cd9a2)['emit'](_0x13bb6d(0x2c0),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x21973e(0x2eb)](_0x21973e(0x2a7));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x112c96=_0x3b7433;return dbConfig[_0x112c96(0x2e3)]('bots')[_0x112c96(0x1b0)](_0x112c96(0x27b))['filter']({'status':_0x112c96(0x2a0)})[_0x112c96(0x311)]()||[];}function getDisabledBots(){const _0x39c107=_0x3b7433;return dbConfig[_0x39c107(0x2e3)]('bots')['sortBy'](_0x39c107(0x27b))[_0x39c107(0x234)]({'status':_0x39c107(0x1d2)})[_0x39c107(0x311)]()||[];}function getBotAttributes(_0x286079){const _0x7b66f7=_0x3b7433;let _0x325d60={};const _0x2596e8=configpath+_0x7b66f7(0x224)+_0x286079+'-config.json',_0x2e853e=fs['existsSync'](_0x2596e8);if(_0x2e853e){const _0x4a760d=fs[_0x7b66f7(0x25f)](_0x2596e8);try{const _0x582e06=JSON[_0x7b66f7(0x2ce)](_0x4a760d),_0x4d2d6b=_0x582e06?_0x582e06[_0x7b66f7(0x2b3)][0x0][_0x7b66f7(0x1c4)]:![];_0x325d60[_0x7b66f7(0x29a)]=_0x4d2d6b?'auto':_0x7b66f7(0x2b1),_0x325d60[_0x7b66f7(0x204)]=_0x582e06?_0x582e06[_0x7b66f7(0x2b3)][0x0][_0x7b66f7(0x204)]:_0x7b66f7(0x28c)+_0x286079;}catch(_0x8d2b9e){_0x325d60[_0x7b66f7(0x29a)]=_0x7b66f7(0x2b1),_0x325d60[_0x7b66f7(0x204)]='Bot\x20'+_0x286079;}}else _0x325d60[_0x7b66f7(0x29a)]=_0x7b66f7(0x2b1),_0x325d60[_0x7b66f7(0x204)]=_0x7b66f7(0x28c)+_0x286079;return _0x325d60;}function getBotsWithMode(){const _0x3859fa=_0x3b7433,_0x34e441=dbConfig[_0x3859fa(0x2e3)](_0x3859fa(0x1a5))[_0x3859fa(0x1b0)](_0x3859fa(0x27b))[_0x3859fa(0x311)]()||[];return _0x34e441[_0x3859fa(0x2fb)](_0x338480=>{const _0x176222=_0x3859fa;let _0xccf7b=getBotAttributes(_0x338480['botID']);_0x338480[_0x176222(0x29a)]=_0xccf7b[_0x176222(0x29a)];}),_0x34e441;}async function initUser(){const _0x1a5a5e=_0x3b7433;if(!settings[_0x1a5a5e(0x229)]){const _0x5f1f95=uuidRandom();mixpanel['alias'](_0x5f1f95),updateSetting(_0x1a5a5e(0x229),_0x5f1f95);}}function _0x13cb(){const _0x3de0a7=['warning','sign','readFileSync','allow','access','temp/','Access\x20enabled\x20for\x20','copyFileSync','settings','Unauthorized\x20attempt\x20to\x20get\x20portfolio','5\x20min','2585272vfKGnf','fork','entries','Password\x20has\x20been\x20reset\x20to:\x20','login\x20token\x20generated','join','live','build','Your\x20installation\x20is\x20already\x20up\x20to\x20date','login\x20not\x20required','360565qzeXBt','assign','hex','idling\x20bot\x20\x20\x20|\x20Bot\x20','messages','\x20to\x20','Invalid\x20username\x20or\x20IP\x20address','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','9zHnvVa','botID','sort','telegrammsg','kill','isValid','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','output-003.log','started','/upload-backup','running','Ok,\x20will\x20send\x20alert\x20notifications\x20only','alerts','stopPolling','Unauthorized\x20attempt\x20to\x20update\x20settings','from','logs','size','Bot\x20','4784652JiXREi','format','post','whitelist','Temporary\x20access\x20rejected','getMonth','uuid','toIPv4Address','yargs/yargs','polling_error','Unauthorized\x20attempt\x20to\x20confirm\x20message','apiKey',',\x20must\x20be\x20a\x204\x20digit\x20number','mode','notification','split',':\x20Bot\x20Mgr\x20>\x20','storeConfiguration','max','enabled','disconnect','bbvReceive','connection','updatebotmanager','starting\x20bot\x20|\x20Bot\x20','exit','callback_query','sha256','ipc','password','bbPassword','args','number','write','/off\x20-\x20stop\x20bot(s)\x0a','(((.+)+)+)+$','manual','new','bot','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','createWriteStream','telegramIpApproval','telegram','backup/','/update\x20-\x20update\x20Balance\x20Bot\x0a','54IKNuVt','min','init','http','987076XqZKzk','No\x20bots\x20running\x20right\x20now','status','::1','replace','bbvNew','starting\x20new\x20bot\x20|\x20Bot\x20','config/','Markdown','binary','\x20|\x20','encryptedUuid','.zip','lowdb/adapters/FileSync','remoteAddress','lastmsgemitted','parse','lastmsgtelegram','search','Invalid\x20authentication\x20token\x20(2)','login\x20required','padStart','all','598597LFIewt','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','env','writeFileSync','toIPv4MappedAddress','stringify','telegramEvents','Invalid\x20authentication\x20token\x20(1)','Notifications\x20enabled','api-eu.mixpanel.com','get-logs','3000','reject','version','get','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','headers','/on\x20-\x20start\x20bot(s)\x0a','show','constructor','Notifications\x20enabled\x0a','All\x20bots\x20running\x20right\x20now','removeListener','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','2FA\x20required','keys','::ffff:127.0.0.1','length','SIGTERM','getStartingBalances','port',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Restore\x20process\x20aborted','function','toggleBotMode','Unauthorized\x20attempt\x20to\x20delete\x20bot','-events.json','auto','forEach','test','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','catch','use','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','name','util','full','set','event','includes','sendMessage','All\x20bots','error\x20while\x20deleting\x20config\x20files:\x20','6b67f3d61ee94b8f5c80b4affef4c4d9','message','/:bot','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x20(1)','clients','/:bot/support','value','Crypt','\x20mode','Unauthorized\x20attempt\x20to\x20update\x20bot','/:bot/history','Unauthorized\x20attempt\x20to\x20download\x20','add-bot','/:bot/coins','auth','files','stopped','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','temporary\x20access\x20not\x20allowed','pidRefreshToken','cancel-loading','Yes','host','tkn','onText','secret','emitHistory','clientip','bb/','yes','update-bb','hybrid-crypto-js','2161712fczQXd','download','HTML','new-disabled','<b>Telegram\x20Bot\x20Status:</b>\x0a','sockets','Error:\x20Invalid\x20argument\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','uncaughtException','apiSecret','handshake','2FA\x20login\x20required','telegramUsername','sendFile','DEFLATE','settings.','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','backup','cancelLoading','statSync','exec','publicKey','bots','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','chat','logs/','store-configuration','find','node-zip','initclient','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','match','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','sortBy','file','-performance.json','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','<b>Balance\x20Bot\x20Status:</b>\x0a','telegram2FaApproval','***','-config.json','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','telegramChatId','Orders','botmanager','https://api.ipify.org?format=json','Invalid\x20Telegram\x20token','output-001.log','All','static','index.html','remove','getSeconds','headless','kind','push','node-telegram-bot-api','compareSync','Bot\x20Mgr\x20>\x20','1000','NTBA_FIX_319','444156vQgIGx','\x20>\x20','defaults','express-fileupload','/enable\x20-\x20enable\x20notifications\x0a','order','disabled','generate','No\x20authentication\x20token','latestversion','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','stop','backupfile','getHours','2FA\x20login\x20token\x20generated','delete-alerts','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','Alerts','existsSync','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','isIPv4MappedAddress','decrypt','User\x20has\x20been\x20validated','secure','Unauthorized\x20attempt\x20to\x20store\x20configuration','temporary\x20access\x20rejected','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','version.json','bb-secure.json','toString','bot.js','username','getMinutes','RSA','hasOwnProperty','Notifications\x20disabled','getFullYear','orders','timestamp','f2aRequired','deleteHistoryAlerts','sendPortfolioTelegram','/restart\x20-\x20restart\x20bot(s)\x0a','privateKey','ipv6','disabled\x20Bot\x20','getUTCHours','temporary\x20access\x20timeout','map','30\x20min','any','get-messages','socket','simple','track','Notifications\x20disabled\x0a','botname','zip/','startsWith','mkdirSync','then','expiry','output-002.log','bbUsername','</b>\x20?','randomFillSync','store-settings','crypto','request','error','reload','telegramToken','success','emit','readdirSync','2FA','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','output-000.log','127.0.0.1','pidExpireLogin','reason','getDate','date-fns','-results.json','temporary\x20token\x20generated','randomBytes','SIGINT','getTime','bot-','loginRequired','logout','whitelistEnabled','Invalid\x20IP\x20address','userid','hashSync','generateKeyPairAsync','logged\x20out','place-order','isDirectory','/:bot/portfolio','storeHeadless','/disable\x20-\x20disable\x20notifications\x0a','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','express','filter','getPortfolio','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','*$1*','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Unauthorized\x20attempt\x20to\x20log\x20out','once','path','confirm-message','login\x20token\x20valid','type','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','unlinkSync','0.0.0','uuid-random','send','telegramEnabled','conn','login','log','token','temporaryAccessAllowed','bb-settings.json','timeshift','cloneDeep','verify','Server','argv','blacklist','data','answerCallbackQuery','title','server','rmSync','************','child_process','inherit','listen','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Login\x20rejected','-----------------------------------------------------------------------------------'];_0x13cb=function(){return _0x3de0a7;};return _0x13cb();}async function initSecure(){const _0x1bbe46=_0x3b7433;let _0x168f07=getSecure();if(!_0x168f07[_0x1bbe46(0x1ee)](_0x1bbe46(0x324))){let _0x37ca43=await generateKeys();_0x168f07['publicKey']=_0x37ca43['publicKey'],_0x168f07['privateKey']=_0x37ca43[_0x1bbe46(0x1f7)],_0x168f07[_0x1bbe46(0x324)]=crypto[_0x1bbe46(0x221)](0x20)[_0x1bbe46(0x1e9)](_0x1bbe46(0x274));;storeSecure(_0x168f07);}}function getSettings(){const _0x2eea18=_0x3b7433;return dbSettings[_0x2eea18(0x2e3)](_0x2eea18(0x265))['value']()||{};}function getSecure(){const _0x3914d9=_0x3b7433;return dbSecure[_0x3914d9(0x2e3)](_0x3914d9(0x1e3))[_0x3914d9(0x311)]()||{};}function getBlacklist(){const _0x193a3e=_0x3b7433;return dbSecure[_0x193a3e(0x2e3)](_0x193a3e(0x250))[_0x193a3e(0x311)]()||[];}function broadcastToBots(_0x2952ff,_0x1ab463){const _0x3690a7=_0x3b7433;config[_0x3690a7(0x2fb)](_0x1962c8=>{const _0x1712c1=_0x3690a7;if(_0x1962c8['status']==_0x1712c1(0x2a0)&&_0x1962c8['live']==_0x1712c1(0x284)){if(pid[_0x1962c8['botID']])pid[_0x1962c8[_0x1712c1(0x27b)]][_0x1712c1(0x243)]({[_0x2952ff]:_0x1ab463});}});}function storeSettings(_0x49b83e,_0xa11fe5=![]){const _0x44cb11=_0x3b7433;_0x49b83e={...settings,..._0x49b83e};if(_0xa11fe5&&_0x49b83e[_0x44cb11(0x2ab)]!='************'&&_0x49b83e[_0x44cb11(0x2ab)]!=_0x44cb11(0x1b6)&&_0x49b83e[_0x44cb11(0x2ab)]!=''){const _0x6fa422=crypt[_0x44cb11(0x1e1)](secure[_0x44cb11(0x1f7)],_0x49b83e[_0x44cb11(0x2ab)])[_0x44cb11(0x30b)][_0x44cb11(0x29c)]('@')[0x0],_0x50a1dd=bcrypt[_0x44cb11(0x22a)](_0x6fa422,saltRounds);_0x49b83e={..._0x49b83e,'bbPassword':_0x50a1dd};}if(_0xa11fe5&&_0x49b83e[_0x44cb11(0x213)]!=_0x44cb11(0x256)&&_0x49b83e[_0x44cb11(0x213)]!='***'&&_0x49b83e[_0x44cb11(0x213)]!=''){const _0x5adbcd=crypt[_0x44cb11(0x1e1)](secure['privateKey'],_0x49b83e['telegramToken'])[_0x44cb11(0x30b)][_0x44cb11(0x29c)]('@')[0x0];_0x49b83e={..._0x49b83e,'telegramToken':_0x5adbcd};}const _0x766e16=_0x49b83e['telegramToken']!=_0x44cb11(0x256)&&_0x49b83e['telegramToken']!=settings[_0x44cb11(0x213)]||_0x49b83e[_0x44cb11(0x19b)]!=settings[_0x44cb11(0x19b)],_0xa1a9f2=_0x49b83e[_0x44cb11(0x213)]==''||_0x49b83e['telegramUsername']=='';if(_0x766e16)_0x49b83e[_0x44cb11(0x2db)]='all';for(const [_0xf4e936,_0x5745d9]of Object[_0x44cb11(0x26a)](_0x49b83e)){if(_0xf4e936==_0x44cb11(0x213)&&_0x5745d9==_0x44cb11(0x256)){_0x49b83e[_0x44cb11(0x213)]=settings[_0x44cb11(0x213)];continue;};if(_0xf4e936==_0x44cb11(0x2ab)&&_0x5745d9==_0x44cb11(0x256)){_0x49b83e['bbPassword']=settings[_0x44cb11(0x2ab)];continue;};dbSettings[_0x44cb11(0x304)](_0x44cb11(0x19e)+_0xf4e936,_0x5745d9)['write']();}settings=_0x49b83e,io['to'](_0x44cb11(0x1bb))[_0x44cb11(0x215)](_0x44cb11(0x265),cleanSettings()),broadcastToBots('timeshift',settings[_0x44cb11(0x24b)]);if(_0x766e16&&!_0xa1a9f2)initTelegram();if(_0x766e16&&_0xa1a9f2)disableTelegram();getAllClients()[_0x44cb11(0x2fb)](_0x46a7db=>{const _0x2ecebf=_0x44cb11;getSocket(_0x46a7db['id'])[_0x2ecebf(0x215)]('status',{'access':{'allow':![],'reason':_0x2ecebf(0x212),'token':null}});});}function updateSetting(_0x37c796,_0x155378){const _0x2937b8=_0x3b7433;dbSettings[_0x2937b8(0x304)]('settings.'+_0x37c796,_0x155378)[_0x2937b8(0x2ae)](),settings=getSettings(),io['to'](_0x2937b8(0x1bb))['emit'](_0x2937b8(0x265),cleanSettings());}function storeSecure(_0x3d4e5c){const _0x40cfa8=_0x3b7433;dbSecure[_0x40cfa8(0x2e3)](_0x40cfa8(0x1e3))[_0x40cfa8(0x1c6)](_0x3d4e5c)[_0x40cfa8(0x2ae)](),secure=_0x3d4e5c;}function addBlacklist(_0x3b9288){const _0x340c97=_0x3b7433;cleanBlacklist();let _0x4acd86;devices[_0x3b9288][_0x340c97(0x2b6)]?_0x4acd86=Math[_0x340c97(0x29f)](devices[_0x3b9288][_0x340c97(0x2b6)][_0x340c97(0x209)],loginExpiry):_0x4acd86=loginExpiry,dbSecure[_0x340c97(0x2e3)](_0x340c97(0x250))['push']({'expiry':new Date()[_0x340c97(0x223)]()+_0x4acd86*0x3c*0x3e8,'token':devices[_0x3b9288][_0x340c97(0x261)]['token']})[_0x340c97(0x2ae)](),blacklist=dbSecure['get'](_0x340c97(0x250))[_0x340c97(0x311)]();}function cleanBlacklist(){const _0xdf48d4=_0x3b7433;let _0x4471d3=dbSecure[_0xdf48d4(0x2e3)](_0xdf48d4(0x250))[_0xdf48d4(0x24c)]()[_0xdf48d4(0x311)](),_0x3cfe82=new Date()['getTime']();_0x4471d3['forEach'](_0x1c99eb=>{const _0x43791b=_0xdf48d4;_0x1c99eb[_0x43791b(0x209)]<_0x3cfe82&&dbSecure['get']('blacklist')['remove']({'expiry':_0x1c99eb[_0x43791b(0x209)]})[_0x43791b(0x2ae)]();});}function initStates(){const _0x29f558=_0x3b7433;let _0x3eb4fa=getConfiguration();_0x3eb4fa[_0x29f558(0x2fb)](_0x3b79f8=>{const _0x3f2ad4=_0x29f558;_0x3b79f8[_0x3f2ad4(0x26e)]=_0x3f2ad4(0x31b);}),storeConfiguration(_0x3eb4fa);}function onKeys(){const _0xbced52=new RSA();return new Promise(_0x474e4c=>{const _0x57e539=_0x3827;_0xbced52[_0x57e539(0x22b)]()['then'](_0x56d7f0=>{_0x474e4c(_0x56d7f0);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2a0e37=_0x3b7433;let _0x275de0=getSettings(),_0x2dbdb2=![];!_0x275de0[_0x2a0e37(0x1ee)](_0x2a0e37(0x2cf))&&(_0x275de0[_0x2a0e37(0x2cf)]=0x0,_0x2dbdb2=!![]);!_0x275de0['hasOwnProperty'](_0x2a0e37(0x2cd))&&(_0x275de0[_0x2a0e37(0x2cd)]=0x0,_0x2dbdb2=!![]);!_0x275de0[_0x2a0e37(0x1ee)]('latestversion')&&(_0x275de0[_0x2a0e37(0x1d5)]=_0x2a0e37(0x241),_0x2dbdb2=!![]);if(_0x2dbdb2)storeSettings(_0x275de0);}function storeConfiguration(_0x2930d6){const _0x5085ca=_0x3b7433;dbConfig['get'](_0x5085ca(0x1a5))[_0x5085ca(0x1c2)]()[_0x5085ca(0x2ae)](),_0x2930d6['forEach'](_0x46bdbd=>{delete _0x46bdbd['mode'];}),dbConfig['get'](_0x5085ca(0x1a5))[_0x5085ca(0x1c6)](..._0x2930d6)[_0x5085ca(0x2ae)](),config=_0x2930d6;}function resetPassword(){const _0x2f9103=_0x3b7433;tgBot&&settings[_0x2f9103(0x1b9)]&&(tgBot[_0x2f9103(0x2eb)]('callback_query'),tgBot['sendMessage'](settings[_0x2f9103(0x1b9)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x2f9103(0x191),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2f9103(0x328)},{'text':'no','callback_data':'no'}]]}})[_0x2f9103(0x2fe)](_0x53f301=>{telegramError(_0x53f301);}),tgBot['on'](_0x2f9103(0x2a7),async _0x9b054a=>{const _0x4da1fd=_0x2f9103,_0xc9debf=_0x9b054a[_0x4da1fd(0x251)],_0x343470=_0x9b054a[_0x4da1fd(0x30b)];tgBot['answerCallbackQuery'](_0x9b054a['id'])[_0x4da1fd(0x208)](async()=>{const _0x3bde04=_0x4da1fd;if(_0xc9debf!='no'){const _0x2196b2=0xf,_0xe655c=_0x3bde04(0x30d),_0x31d4bf=Array['from'](crypto[_0x3bde04(0x20d)](new Uint32Array(_0x2196b2)))[_0x3bde04(0x1fc)](_0x56d8e3=>_0xe655c[_0x56d8e3%_0xe655c[_0x3bde04(0x2f0)]])[_0x3bde04(0x26d)](''),_0x4682f7=bcrypt[_0x3bde04(0x22a)](_0x31d4bf,saltRounds);storeSettings({'bbPassword':_0x4682f7}),await tgBot[_0x3bde04(0x307)](_0x343470[_0x3bde04(0x1a7)]['id'],_0x3bde04(0x26b)+_0x31d4bf,{'parse_mode':_0x3bde04(0x191)})[_0x3bde04(0x2fe)](_0x1a44ef=>{telegramError(_0x1a44ef);});}else await tgBot['sendMessage'](_0x343470['chat']['id'],'Password\x20reset\x20rejected')[_0x3bde04(0x2fe)](_0x4062b2=>{telegramError(_0x4062b2);});}),tgBot[_0x4da1fd(0x2eb)](_0x4da1fd(0x2a7));}));}async function confirmRestore(_0x2037f4,_0x2db9de){const _0x2229ac=_0x3b7433;tgBot&&settings[_0x2229ac(0x1b9)]&&(tgBot[_0x2229ac(0x2eb)](_0x2229ac(0x2a7)),await tgBot['sendMessage'](settings[_0x2229ac(0x1b9)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x2229ac(0x328)},{'text':'no','callback_data':'no'}]]}})[_0x2229ac(0x2fe)](_0x1a6a18=>{telegramError(_0x1a6a18);}),tgBot['on'](_0x2229ac(0x2a7),async _0x2206d0=>{const _0x42741f=_0x2229ac,_0x5e2db5=_0x2206d0[_0x42741f(0x251)],_0x1acb47=_0x2206d0[_0x42741f(0x30b)];tgBot[_0x42741f(0x252)](_0x2206d0['id'])[_0x42741f(0x208)](async()=>{const _0x310c5c=_0x42741f;_0x5e2db5!='no'?(await tgBot[_0x310c5c(0x307)](_0x1acb47[_0x310c5c(0x1a7)]['id'],'Restoring\x20bot(s)\x20from\x20backup\x20-\x20Bot\x20Manager\x20will\x20restart\x20once\x20finished',{'parse_mode':'HTML'})[_0x310c5c(0x2fe)](_0x13359a=>{telegramError(_0x13359a);}),unzipFile(_0x2037f4,_0x2db9de)):await tgBot[_0x310c5c(0x307)](_0x1acb47[_0x310c5c(0x1a7)]['id'],_0x310c5c(0x2f5))[_0x310c5c(0x2fe)](_0x23519f=>{telegramError(_0x23519f);});}),tgBot[_0x42741f(0x2eb)](_0x42741f(0x2a7));}));}function getServerTime(){const _0x4eea87=_0x3b7433,_0x20d366=new Date();return _0x20d366[_0x4eea87(0x1f0)]()+'/'+(_0x20d366[_0x4eea87(0x292)]()+0x1)[_0x4eea87(0x1e9)]()[_0x4eea87(0x2d3)](0x2,'0')+'/'+_0x20d366[_0x4eea87(0x21d)]()[_0x4eea87(0x1e9)]()['padStart'](0x2,'0')+'\x20'+_0x20d366[_0x4eea87(0x1d9)]()[_0x4eea87(0x1e9)]()[_0x4eea87(0x2d3)](0x2,'0')+':'+_0x20d366[_0x4eea87(0x1ec)]()[_0x4eea87(0x1e9)]()[_0x4eea87(0x2d3)](0x2,'0')+':'+_0x20d366[_0x4eea87(0x1c3)]()[_0x4eea87(0x1e9)]()[_0x4eea87(0x2d3)](0x2,'0');}function getTimeStamp(){const _0x26f125=_0x3b7433,_0x2b3437=shiftedTime();return _0x2b3437['getFullYear']()+'/'+(_0x2b3437[_0x26f125(0x292)]()+0x1)[_0x26f125(0x1e9)]()[_0x26f125(0x2d3)](0x2,'0')+'/'+_0x2b3437['getDate']()[_0x26f125(0x1e9)]()[_0x26f125(0x2d3)](0x2,'0')+'\x20'+_0x2b3437[_0x26f125(0x1d9)]()[_0x26f125(0x1e9)]()['padStart'](0x2,'0')+':'+_0x2b3437[_0x26f125(0x1ec)]()[_0x26f125(0x1e9)]()[_0x26f125(0x2d3)](0x2,'0')+':'+_0x2b3437[_0x26f125(0x1c3)]()[_0x26f125(0x1e9)]()[_0x26f125(0x2d3)](0x2,'0');}function shiftedTime(){const _0x40f8c2=_0x3b7433,_0x3eaf15=new Date();let _0x453f54=_0x3eaf15;if(settings[_0x40f8c2(0x24b)]&&settings[_0x40f8c2(0x24b)]!==0x0)_0x453f54=fns['add'](_0x3eaf15,{'hours':settings[_0x40f8c2(0x24b)]});return _0x453f54;}function startScheduler(){const _0x331318=_0x3b7433,_0x29bd21=new Date()[_0x331318(0x1fa)](),_0x3bed26=shiftedTime()[_0x331318(0x1d9)]();_0x3bed26==0x4&&backupConfigFiles();_0x3bed26==0x0&&rotateLogFiles();_0x29bd21%0x6==0x0&&triggerAnalytics();_0x29bd21%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x1a1fac=_0x3b7433;fs[_0x1a1fac(0x216)](configpath,{'withFileTypes':!![]})[_0x1a1fac(0x2fb)](_0x9b71e4=>{const _0x39462b=_0x1a1fac;if(!_0x9b71e4['isDirectory']())fs['copyFileSync'](configpath+_0x9b71e4[_0x39462b(0x301)],configbackuppath+_0x9b71e4['name']);});}function rotateLogFiles(){const _0x51e891=_0x3b7433,_0x49a2a1=fs[_0x51e891(0x1a2)](logspath+_0x51e891(0x219)),_0x4c7a5e=_0x49a2a1[_0x51e891(0x28b)]/0x400;if(_0x4c7a5e>0x32){let _0x20479e=fs[_0x51e891(0x216)](logspath,{'withFileTypes':!![]});_0x20479e[_0x51e891(0x27c)]((_0x24e012,_0x336764)=>_0x24e012[_0x51e891(0x301)]<_0x336764[_0x51e891(0x301)]?0x1:_0x336764['name']<_0x24e012['name']?-0x1:0x0),_0x20479e[_0x51e891(0x2fb)](_0x198452=>{const _0x595c00=_0x51e891;if(_0x198452[_0x595c00(0x301)]==_0x595c00(0x20a))fs['copyFileSync'](logspath+_0x198452['name'],logspath+_0x595c00(0x281));if(_0x198452[_0x595c00(0x301)]==_0x595c00(0x1be))fs[_0x595c00(0x264)](logspath+_0x198452['name'],logspath+'output-002.log');_0x198452['name']==_0x595c00(0x219)&&(fs[_0x595c00(0x264)](logspath+_0x198452['name'],logspath+_0x595c00(0x1be)),fs['writeFileSync'](logspath+_0x198452[_0x595c00(0x301)],''));});}}async function zipFiles(_0x492e1a){const _0x4a2b33=_0x3b7433;let _0x322c2d;if(_0x492e1a==_0x4a2b33(0x28a))_0x322c2d=logspath;if(_0x492e1a==_0x4a2b33(0x1a0))_0x322c2d=configpath;let _0x570bd3=fs[_0x4a2b33(0x216)](_0x322c2d,{'withFileTypes':!![]});const _0x186823=new require('node-zip')();_0x570bd3[_0x4a2b33(0x2fb)](_0xf6fcf5=>{const _0x45fa40=_0x4a2b33;if(!_0xf6fcf5['isDirectory']()){let _0x1faa40=fs['readFileSync'](_0x322c2d+_0xf6fcf5['name']);const _0x3418f9=/^bot-[0-9]{3}-config.json$/,_0x45f89f=_0x3418f9[_0x45fa40(0x2fc)](_0xf6fcf5[_0x45fa40(0x301)]);if(_0x45f89f){const _0xe430d8=JSON[_0x45fa40(0x2ce)](_0x1faa40);_0xe430d8['bot'][0x0][_0x45fa40(0x298)]=_0x45fa40(0x1b6),_0xe430d8[_0x45fa40(0x2b3)][0x0][_0x45fa40(0x198)]=_0x45fa40(0x1b6),_0x1faa40=JSON['stringify'](_0xe430d8,null,0x2);}if(_0xf6fcf5[_0x45fa40(0x301)]==_0x45fa40(0x24a)){const _0x1ff92d=JSON[_0x45fa40(0x2ce)](_0x1faa40);if(_0x1ff92d['settings'][_0x45fa40(0x225)])_0x1ff92d[_0x45fa40(0x265)][_0x45fa40(0x225)]=![];if(_0x1ff92d[_0x45fa40(0x265)][_0x45fa40(0x2ab)])_0x1ff92d[_0x45fa40(0x265)][_0x45fa40(0x2ab)]=_0x45fa40(0x1b6);if(_0x1ff92d[_0x45fa40(0x265)]['telegramToken'])_0x1ff92d[_0x45fa40(0x265)][_0x45fa40(0x213)]=_0x45fa40(0x1b6);if(_0x1ff92d[_0x45fa40(0x265)][_0x45fa40(0x1b9)])_0x1ff92d['settings']['telegramChatId']=null;_0x1faa40=JSON['stringify'](_0x1ff92d,null,0x2);}if(_0xf6fcf5[_0x45fa40(0x301)]!=_0x45fa40(0x1e8))_0x186823[_0x45fa40(0x1b1)](_0xf6fcf5[_0x45fa40(0x301)],_0x1faa40);}});const _0x5d675b=_0x186823[_0x4a2b33(0x1d3)]({'base64':![],'compression':_0x4a2b33(0x19d)});fs['writeFileSync'](zippath+(_0x492e1a+_0x4a2b33(0x2ca)),_0x5d675b,'binary');}async function unzipFile(_0x671b5a,_0x528932){const _0x714fa8=_0x3b7433;await backupConfigFiles(),fs[_0x714fa8(0x216)](configpath,{'withFileTypes':!![]})[_0x714fa8(0x2fb)](_0x3e1c33=>{const _0x79237=_0x714fa8;if(!_0x3e1c33[_0x79237(0x22e)]())fs[_0x79237(0x255)](configpath+_0x3e1c33[_0x79237(0x301)]);});const _0x1f8ce0=fs[_0x714fa8(0x25f)](_0x671b5a+_0x528932,_0x714fa8(0x2c7)),_0x46f40c=new require(_0x714fa8(0x1ab))(_0x1f8ce0,{'base64':![],'checkCRC32':!![]});Object[_0x714fa8(0x2ee)](_0x46f40c['files'])['forEach'](_0x4a5f66=>{const _0x903fc2=_0x714fa8,_0xfb67e=_0x46f40c[_0x903fc2(0x31a)][_0x4a5f66];fs[_0x903fc2(0x2d8)](configpath+_0xfb67e[_0x903fc2(0x301)],_0xfb67e['_data']);}),fs[_0x714fa8(0x216)](temppath,{'withFileTypes':!![]})[_0x714fa8(0x2fb)](_0x5e2bda=>{const _0x5849a5=_0x714fa8;if(!_0x5e2bda[_0x5849a5(0x22e)]())fs[_0x5849a5(0x255)](temppath+_0x5e2bda[_0x5849a5(0x301)]);}),process[_0x714fa8(0x243)]({'restore':!![]},_0x1551c8=>{});}function _0x3827(_0x56c3c1,_0x436b23){const _0xcb9cf7=_0x13cb();return _0x3827=function(_0x3084ff,_0x4179d7){_0x3084ff=_0x3084ff-0x18e;let _0x13cb98=_0xcb9cf7[_0x3084ff];return _0x13cb98;},_0x3827(_0x56c3c1,_0x436b23);}async function getPublicIp(){const _0x3e80f4=_0x3b7433;try{const _0x3f7eb6=await axios[_0x3e80f4(0x2e3)](_0x3e80f4(0x1bc));publicip=_0x3f7eb6[_0x3e80f4(0x251)]['ip'];}catch(_0x5f160d){}}async function triggerAnalytics(){const _0x52322a=_0x3b7433;if(!publicip)await getPublicIp();const _0x55f7f7=getBotsWithMode();let _0x17ed35=0x0;_0x55f7f7[_0x52322a(0x2fb)](_0x181802=>{const _0x494eb3=_0x52322a;if(_0x181802[_0x494eb3(0x2c0)]===_0x494eb3(0x2a0))_0x17ed35++;}),mixpanel[_0x52322a(0x202)](_0x52322a(0x24e),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x55f7f7['length'],'numbotsenabled':_0x17ed35});}async function getMessages(){const _0x4bd579=_0x3b7433,_0x8a6c6a=_0x4bd579(0x1dc),_0x15852a=new GraphQLClient(_0x8a6c6a),_0x2fcd5a={'authorization':_0x4bd579(0x236)},_0x2e3503=serverversion[_0x4bd579(0x29c)]('.'),_0x25d29f=_0x2e3503[0x0]+'.'+_0x2e3503[0x1],_0x139d57=Math[_0x4bd579(0x2bb)](settings['lastmsgtelegram'],settings[_0x4bd579(0x2cd)]),_0x2fda8e={'last':parseInt(_0x139d57),'bbm':_0x25d29f},_0x1d3637=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x408e49;try{_0x408e49=await _0x15852a[_0x4bd579(0x210)](_0x1d3637,_0x2fda8e,_0x2fcd5a);}catch(_0x3bb5c9){}if(_0x408e49&&_0x408e49['messages']){let _0x5f2884=settings[_0x4bd579(0x2cf)];newMessages=[];for(const _0x9bb801 of _0x408e49[_0x4bd579(0x276)]){newMessages[_0x4bd579(0x1c6)](_0x9bb801);if(_0x9bb801[_0x4bd579(0x2c3)])updateSetting(_0x4bd579(0x1d5),_0x9bb801[_0x4bd579(0x2c3)]);let _0x450f12=_0x9bb801['bbvNew']?serverversion>=_0x9bb801['bbvNew']:![];if(!_0x450f12&&_0x9bb801[_0x4bd579(0x2ad)]>_0x5f2884){if(_0x9bb801[_0x4bd579(0x2a2)]===_0x4bd579(0x1fe)||serverversion[_0x4bd579(0x206)](_0x9bb801[_0x4bd579(0x2a2)])){let _0x5e4c92=''+_0x9bb801[_0x4bd579(0x253)]+'\x0a\x0a'+_0x9bb801[_0x4bd579(0x30b)];const _0x194a44=await sendTelegramMsg(toTelegramMarkdown(_0x5e4c92),_0x4bd579(0x2c6));if(_0x194a44)_0x5f2884=_0x9bb801['number'];}}}updateAvailable=isNewerVersion(settings[_0x4bd579(0x1d5)],serverversion),updateSetting(_0x4bd579(0x2cf),_0x5f2884),emitMessages();}}function emitMessages(){const _0x1619dd=_0x3b7433,_0x32858a=settings[_0x1619dd(0x2cd)];let _0x2e3a70=[];newMessages[_0x1619dd(0x2fb)](_0x12dbf7=>{const _0x59fa43=_0x1619dd;_0x12dbf7[_0x59fa43(0x2ad)]>_0x32858a&&_0x2e3a70[_0x59fa43(0x1c6)](_0x12dbf7);}),_0x2e3a70[_0x1619dd(0x2f0)]>0x0&&getAllClients()['forEach'](_0x5a88f6=>{const _0x43d9a7=_0x1619dd;getSocket(_0x5a88f6['id'])[_0x43d9a7(0x215)](_0x43d9a7(0x30b),_0x2e3a70);});}function confirmMessage(_0x2bc8e8){const _0x59e3e6=_0x3b7433;updateSetting(_0x59e3e6(0x2cd),Number(_0x2bc8e8));}function isNewerVersion(_0x3f7b5f,_0x1efafb){const _0x2b570a=_0x3b7433,_0x463055=_0x1efafb['split']('.'),_0x260997=_0x3f7b5f['split']('.');for(var _0x2bb6a9=0x0;_0x2bb6a9<_0x260997[_0x2b570a(0x2f0)];_0x2bb6a9++){const _0x201dac=~~_0x260997[_0x2bb6a9],_0x9508b8=~~_0x463055[_0x2bb6a9];if(_0x201dac>_0x9508b8)return!![];if(_0x201dac<_0x9508b8)return![];}return![];}function toTelegramMarkdown(_0x1a5e76){const _0x2608f8=_0x3b7433,_0x51cdb6=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3e4d74=/\*{2}(.+?)\*{2}/gim;return _0x1a5e76=_0x1a5e76['replace'](_0x51cdb6,'$1_$2_$3')[_0x2608f8(0x2c2)](_0x3e4d74,_0x2608f8(0x237)),_0x1a5e76;}async function validateConfigFile(){const _0x39f2ad=_0x3b7433,_0x10d566=dbConfig['get']('bots')[_0x39f2ad(0x1b0)](_0x39f2ad(0x27b))[_0x39f2ad(0x311)]()||[];if(_0x10d566['length']==0x0){let _0xcb3a04=0x0,_0x48b403=[];const _0x245efa=/^bot-([0-9]{3})-config.json$/,_0x2fa527=fs[_0x39f2ad(0x216)](configpath);_0x2fa527['forEach'](_0x9fd319=>{const _0x1b9810=_0x39f2ad,_0x541144=_0x245efa[_0x1b9810(0x1a3)](_0x9fd319);if(_0x541144){const _0x51a097=_0x541144[0x1];let _0x16b208=getBotAttributes(_0x51a097);_0x48b403[_0x1b9810(0x1c6)]({'botID':_0x51a097,'botname':_0x16b208[_0x1b9810(0x204)],'status':'disabled','live':_0x1b9810(0x31b)}),_0xcb3a04++;}}),_0xcb3a04!=0x0&&(dbConfig[_0x39f2ad(0x2e3)](_0x39f2ad(0x1a5))[_0x39f2ad(0x273)](_0x48b403)['write'](),config=_0x48b403,restoredConfigFile=_0xcb3a04);}}async function restoreConfigNotify(_0x3f8682){const _0x42474c=_0x3b7433;let _0x15cd8f;if(restoredConfigFile==0x1)_0x15cd8f=_0x42474c(0x2e4);else _0x15cd8f=_0x42474c(0x2d6);if(_0x3f8682)io['to'](_0x42474c(0x1bb))[_0x42474c(0x215)](_0x42474c(0x29b),_0x15cd8f);else{logger[_0x42474c(0x201)]('-----------------------------------------------------------------------------------'),logger[_0x42474c(0x201)](_0x15cd8f),logger['simple'](_0x42474c(0x25c)),logger[_0x42474c(0x201)]('');if(tgBot&&settings[_0x42474c(0x1b9)]&&settings['telegramEvents']!='orders')tgBot[_0x42474c(0x307)](settings[_0x42474c(0x1b9)],_0x42474c(0x1c9)+_0x15cd8f)['catch'](_0x3e54c8=>{telegramError(_0x3e54c8);});}}function validateCredentials(_0xb360d3,_0x3c42ab){const _0x4f5376=_0x3b7433;if(_0xb360d3[_0x4f5376(0x1eb)]==settings[_0x4f5376(0x20b)]&&bcrypt[_0x4f5376(0x1c8)](_0xb360d3[_0x4f5376(0x2aa)],settings['bbPassword'])){if(settings[_0x4f5376(0x1f3)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0xbaccdc=generateLoginToken(_0x3c42ab);return{'allow':!![],'reason':_0x4f5376(0x26c),'token':_0xbaccdc};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1b1563){const _0x39a591=generateLoginToken(_0x1b1563);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x39a591};}function validateAccess(_0x401ff9,_0x4160b5,_0x12c5da){const _0x20752a=_0x3b7433,_0xdfc9f7=_0x12c5da?_0x12c5da:devices[_0x4160b5]['ip'];let _0x1ad7bf;const _0x4d361f=_0x370079=>{const _0x16411b=_0x3827;if(settings[_0x16411b(0x225)]){if(settings[_0x16411b(0x1f3)]){if(telegram2FaApproved(_0x4160b5)){const _0x1dbfdc=generateLoginToken(_0x4160b5);return{'allow':!![],'reason':_0x16411b(0x1da),'token':_0x1dbfdc};}else return{'allow':![],'reason':_0x16411b(0x2d2),'token':null};}else return _0x1ad7bf=validToken(_0x370079,_0x4160b5),_0x1ad7bf[_0x16411b(0x1ee)](_0x16411b(0x214))?{'allow':!![],'reason':_0x16411b(0x23d),'token':_0x370079}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x16411b(0x271),'token':null};};if(settings[_0x20752a(0x227)]){let _0x579e36=[...settings[_0x20752a(0x290)],_0x20752a(0x2c1),_0x20752a(0x2ef),_0x20752a(0x21a)];if(_0x579e36['includes'](_0xdfc9f7))return _0x4d361f(_0x401ff9);else{_0x1ad7bf=validToken(_0x401ff9,_0x4160b5);if(_0x1ad7bf[_0x20752a(0x1ee)]('success'))return _0x4d361f(_0x401ff9);else{if(telegramIpApproved(_0x4160b5)){const _0x57c708=generateToken(_0x4160b5);return _0x1ad7bf=_0x4d361f(_0x401ff9),_0x1ad7bf['allow']?{'allow':!![],'reason':_0x20752a(0x220),'token':_0x57c708}:_0x1ad7bf;}else return settings[_0x20752a(0x249)]?{'allow':![],'reason':_0x20752a(0x2ed),'token':null}:{'allow':![],'reason':_0x20752a(0x31d),'token':null};}}}else return _0x4d361f(_0x401ff9);}function timelyDecrypt(_0x2f0c56,_0x33f38f=!![]){const _0x3eda6d=_0x3b7433;if(_0x2f0c56)try{const _0x10dad2=crypt['decrypt'](secure[_0x3eda6d(0x1f7)],_0x2f0c56)[_0x3eda6d(0x30b)],_0x2cd90a=_0x10dad2[_0x3eda6d(0x29c)]('@')[0x0],_0x2481f8=_0x10dad2['split']('@')[0x1],_0x1dbeee=new Date()[_0x3eda6d(0x223)]();if(_0x33f38f){if(_0x1dbeee-_0x2481f8<maxSecretAge*0x3e8)return _0x2cd90a;else return![];}else return _0x2cd90a;}catch(_0x5543fe){return![];}else return![];}const validToken=(_0x223423,_0x31074b)=>{const _0x810640=_0x3b7433,_0x261758=devices[_0x31074b]['ip'];if(!_0x223423)return{'error':_0x810640(0x1d4)};for(let _0x468e4 of blacklist){if(_0x468e4[_0x810640(0x248)]==_0x223423)return{'error':'Token\x20blacklisted'};}let _0x4cb076;try{_0x4cb076=jwt[_0x810640(0x24d)](_0x223423,secure[_0x810640(0x324)]+_0x31074b);}catch{return{'error':_0x810640(0x2dc)};}if(!_0x4cb076['hasOwnProperty'](_0x810640(0x326))&&!_0x4cb076[_0x810640(0x1ee)](_0x810640(0x1eb))||!_0x4cb076[_0x810640(0x1ee)]('exp'))return{'error':_0x810640(0x2d1)};if(!_0x4cb076[_0x810640(0x1ee)](_0x810640(0x1eb))&&_0x4cb076[_0x810640(0x1ee)]('clientip')){const {clientip:_0x2e62d5}=_0x4cb076;return _0x261758==_0x2e62d5?{'success':_0x810640(0x1e2)}:{'error':_0x810640(0x228)};}else{if(_0x4cb076[_0x810640(0x1ee)]('username')&&_0x4cb076[_0x810640(0x1ee)](_0x810640(0x326))){const {username:_0x2f88f9,clientip:_0x3a72d1}=_0x4cb076;return settings[_0x810640(0x20b)]==_0x2f88f9&&_0x261758==_0x3a72d1?{'success':_0x810640(0x1e2)}:{'error':_0x810640(0x278)};}}},generateLoginToken=_0x3c24d2=>{const _0x16fcca=_0x3b7433;if(_0x3c24d2){const _0x82843=devices[_0x3c24d2]['ip'];return jwt['sign']({'username':settings[_0x16fcca(0x20b)],'clientip':_0x82843},secure[_0x16fcca(0x324)]+_0x3c24d2,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1cb68d=>{const _0x5713ec=_0x3b7433;if(_0x1cb68d){const _0x3f84a8=devices[_0x1cb68d]['ip'];return jwt[_0x5713ec(0x25e)]({'clientip':_0x3f84a8},secure['secret']+_0x1cb68d,{'expiresIn':devices[_0x1cb68d][_0x5713ec(0x2b6)][_0x5713ec(0x209)]*0x3c});}else return![];},telegramIpApproved=_0x30c7f5=>{const _0x115b07=_0x3b7433;let _0x260ed0=![];return devices[_0x30c7f5]['telegramIpApproval']&&devices[_0x30c7f5][_0x115b07(0x2b6)][_0x115b07(0x209)]!=_0x115b07(0x2e1)&&(_0x260ed0=devices[_0x30c7f5][_0x115b07(0x2b6)]['clientip']==devices[_0x30c7f5]['ip']&&new Date()[_0x115b07(0x223)]()-devices[_0x30c7f5][_0x115b07(0x2b6)][_0x115b07(0x1f2)]<devices[_0x30c7f5][_0x115b07(0x2b6)][_0x115b07(0x209)]*0x3c*0x3e8),_0x260ed0;},telegram2FaApproved=_0x1cdbb6=>{const _0x5ae876=_0x3b7433;let _0x53aad4=![];return devices[_0x1cdbb6][_0x5ae876(0x1b5)]&&devices[_0x1cdbb6][_0x5ae876(0x1b5)][_0x5ae876(0x209)]!=_0x5ae876(0x2e1)&&(_0x53aad4=devices[_0x1cdbb6][_0x5ae876(0x1b5)]['clientip']==devices[_0x1cdbb6]['ip']&&new Date()[_0x5ae876(0x223)]()-devices[_0x1cdbb6][_0x5ae876(0x1b5)][_0x5ae876(0x1f2)]<devices[_0x1cdbb6][_0x5ae876(0x1b5)]['expiry']*0x3c*0x3e8),_0x53aad4;},normalizeIP=_0x49104a=>{const _0x217d8d=_0x3b7433;let _0x3758fa=null,_0x32b3e1=null;if(ipaddr[_0x217d8d(0x27f)](_0x49104a)){const _0x219c5b=ipaddr[_0x217d8d(0x2ce)](_0x49104a);_0x219c5b[_0x217d8d(0x1c5)]()===_0x217d8d(0x1f8)?(_0x219c5b[_0x217d8d(0x1e0)]()&&(_0x3758fa=_0x219c5b[_0x217d8d(0x294)]()[_0x217d8d(0x1e9)]()),_0x32b3e1=_0x219c5b[_0x217d8d(0x1e9)]()):(_0x3758fa=_0x219c5b[_0x217d8d(0x1e9)](),_0x32b3e1=_0x219c5b[_0x217d8d(0x2d9)]()[_0x217d8d(0x1e9)]());}return{'show':_0x3758fa?_0x3758fa:_0x32b3e1,'store':_0x32b3e1};};function sleep(_0x422935){return new Promise(_0x1c2c83=>setTimeout(_0x1c2c83,_0x422935));}