const _0x446181=_0x4419;(function(_0x2badfc,_0x50470e){const _0x2e874e=_0x4419,_0x40b131=_0x2badfc();while(!![]){try{const _0x189cba=parseInt(_0x2e874e(0x21f))/0x1+-parseInt(_0x2e874e(0x212))/0x2+-parseInt(_0x2e874e(0x1d9))/0x3+parseInt(_0x2e874e(0x2e2))/0x4+-parseInt(_0x2e874e(0x1e8))/0x5+-parseInt(_0x2e874e(0x18d))/0x6+parseInt(_0x2e874e(0x21d))/0x7;if(_0x189cba===_0x50470e)break;else _0x40b131['push'](_0x40b131['shift']());}catch(_0x5b28f8){_0x40b131['push'](_0x40b131['shift']());}}}(_0x24fa,0xa45a7));const _0x7e1cb2=function(){let _0x40b251=!![];return function(_0x61ac9c,_0x3975cb){const _0x4ce095=_0x40b251?function(){const _0x408287=_0x4419;if(_0x3975cb){const _0x24a37e=_0x3975cb[_0x408287(0x1dd)](_0x61ac9c,arguments);return _0x3975cb=null,_0x24a37e;}}:function(){};return _0x40b251=![],_0x4ce095;};}(),_0x10999a=_0x7e1cb2(this,function(){const _0x41966e=_0x4419;return _0x10999a[_0x41966e(0x229)]()[_0x41966e(0x202)](_0x41966e(0x24a))['toString']()[_0x41966e(0x37c)](_0x10999a)[_0x41966e(0x202)](_0x41966e(0x24a));});_0x10999a();'use strict';process[_0x446181(0x36d)][_0x446181(0x243)]=0x1;const childProcess=require(_0x446181(0x23c)),fs=require('fs'),fns=require(_0x446181(0x23b)),low=require(_0x446181(0x370)),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x446181(0x1c2)),Crypt=require(_0x446181(0x278))[_0x446181(0x311)],RSA=require(_0x446181(0x278))[_0x446181(0x27a)],bcrypt=require('bcryptjs'),jwt=require(_0x446181(0x31e)),ipaddr=require(_0x446181(0x328)),argv=require(_0x446181(0x2be))(process[_0x446181(0x1f1)][_0x446181(0x2f8)](0x2))['argv'],uuidRandom=require(_0x446181(0x245)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x446181(0x25d)),axios=require(_0x446181(0x1cd)),{GraphQLClient,gql}=require(_0x446181(0x1d7)),util=require('util'),fileUpload=require(_0x446181(0x2fa)),{networkInterfaces}=require('os'),PORT=argv[_0x446181(0x360)]||_0x446181(0x2ff),pattern=/^[0-9]{2,4}$/;!pattern[_0x446181(0x34f)](PORT)&&(console[_0x446181(0x344)](_0x446181(0x2e0)+PORT+_0x446181(0x349)),process[_0x446181(0x1d4)](0x1));const HOST=argv[_0x446181(0x18e)]||null,userID=argv[_0x446181(0x1ac)]||'',debugging=argv['d']||![],nodeversion=process[_0x446181(0x1c6)][_0x446181(0x2fe)];let bbpath=_0x446181(0x1ca),bbpath2='';const botfile='bot.js',configfile=_0x446181(0x22f),settingsfile=_0x446181(0x37e),securefile=_0x446181(0x300),environment=require('./'+bbpath2+_0x446181(0x21b))['environment']||_0x446181(0x1f4),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x446181(0x198)+userID+'/':bbpath+_0x446181(0x198),configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x446181(0x277)+userID+'/':bbpath+_0x446181(0x277),zippath=userID?bbpath+_0x446181(0x1c8)+userID+'/':bbpath+_0x446181(0x1c8),loggerfile=fs[_0x446181(0x29d)](logspath+_0x446181(0x206),{'flags':'a'}),temppath=userID?bbpath+_0x446181(0x37a)+userID+'/':bbpath+_0x446181(0x37a);!fs[_0x446181(0x1b5)](configpath)&&fs[_0x446181(0x266)](configpath);!fs[_0x446181(0x1b5)](configbackuppath)&&fs[_0x446181(0x266)](configbackuppath);!fs[_0x446181(0x1b5)](logspath)&&fs[_0x446181(0x266)](logspath);!fs['existsSync'](zippath)&&fs[_0x446181(0x266)](zippath);!fs[_0x446181(0x1b5)](temppath)&&fs[_0x446181(0x266)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x446181(0x1ed)]({'bots':[]})[_0x446181(0x263)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x446181(0x228),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x446181(0x2b1)});const saltRounds=0xa,mixpanel=Mixpanel[_0x446181(0x281)](_0x446181(0x2c5),{'host':_0x446181(0x24c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x446181(0x2d1)]!=''&&settings[_0x446181(0x236)]&&settings[_0x446181(0x236)]!='')initTelegram();const parseColor=(_0x42739b,_0x5b874f)=>{const _0x50e55d=_0x446181,_0x15e396=/#[A-Z]{3}#/g;if(typeof _0x42739b=='string'){!_0x5b874f?_0x42739b=_0x42739b[_0x50e55d(0x31c)](_0x15e396,''):(_0x42739b=_0x42739b[_0x50e55d(0x31c)](/#BLU#/g,_0x50e55d(0x232)),_0x42739b=_0x42739b['replace'](/#RED#/g,_0x50e55d(0x282)),_0x42739b=_0x42739b['replace'](/#YEL#/g,_0x50e55d(0x1ab)),_0x42739b=_0x42739b[_0x50e55d(0x31c)](/#MAG#/g,_0x50e55d(0x1a3)),_0x42739b=_0x42739b[_0x50e55d(0x31c)](/#CYA#/g,_0x50e55d(0x224)),_0x42739b=_0x42739b[_0x50e55d(0x31c)](/#RES#/g,_0x50e55d(0x1e5)));;}return _0x42739b;},logger={'screen':_0x56dab8=>{const _0x45d3fb=_0x446181;console[_0x45d3fb(0x344)](parseColor(_0x56dab8,!![]));},'simple':_0x3e8bb2=>{console['log'](parseColor(_0x3e8bb2,!![])),loggerfile['write'](util['format'](parseColor(_0x3e8bb2,![]))+'\x0a');},'full':async _0x1bf481=>{const _0x44c417=_0x446181,_0xf7b66c=getTimeStamp()+_0x44c417(0x230)+_0x1bf481;console[_0x44c417(0x344)](parseColor(_0xf7b66c,!![])),loggerfile[_0x44c417(0x263)](util[_0x44c417(0x203)](parseColor(_0xf7b66c,![]))+'\x0a');if(tgBot&&settings[_0x44c417(0x1d3)]&&settings[_0x44c417(0x19a)]!=_0x44c417(0x255))await sendTelegram(settings[_0x44c417(0x1d3)],_0x44c417(0x25b)+parseColor(_0x1bf481,![]));},'debug':async(_0x209dcb,_0x231138='')=>{const _0x2606d2=_0x446181,_0x3bddd5=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x209dcb;if(debugging)console[_0x2606d2(0x344)](parseColor(_0x3bddd5,!![]));loggerfile[_0x2606d2(0x263)](util['format'](parseColor(_0x3bddd5,![]))+'\x0a');if(_0x231138){if(debugging)console[_0x2606d2(0x344)](_0x231138);loggerfile[_0x2606d2(0x263)](util['format'](_0x231138)+'\x0a');}}};process['on'](_0x446181(0x20e),function(_0x1dded6){const _0x220ae9=_0x446181;logger[_0x220ae9(0x322)](_0x1dded6);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x446181(0x1b9)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x446181(0x219)),app=express(),http=require(_0x446181(0x361))[_0x446181(0x315)](app);app[_0x446181(0x33a)](fileUpload({'useTempFiles':!![]})),app[_0x446181(0x260)](_0x446181(0x30d),async(_0x2e1dec,_0x5e7f49)=>{const _0x4378a0=_0x446181,_0x46ac72=_0x2e1dec[_0x4378a0(0x27c)]['type'],_0x2ec3ac=getClientsWithBotID(_0x4378a0(0x201)),_0x1126a7=_0x2e1dec[_0x4378a0(0x2e7)]['uuid'],_0x30fcc1=timelyDecrypt(_0x1126a7,![]),_0x9f5d38=_0x2ec3ac['find'](_0x262f4f=>_0x262f4f[_0x4378a0(0x380)]==_0x30fcc1);if(_0x9f5d38){const _0x3f1239=normalizeIP(_0x2e1dec[_0x4378a0(0x240)]['remoteAddress'])['store'],_0x38234a=_0x2e1dec['headers']['tkn'];if(validateAccess(_0x38234a,_0x30fcc1,_0x3f1239)[_0x4378a0(0x1f3)])_0x46ac72==_0x4378a0(0x284)&&await backupConfigFiles(),await zipFiles(_0x46ac72),_0x5e7f49[_0x4378a0(0x2b8)](zippath+(_0x46ac72+_0x4378a0(0x30a)),_0x5854d7=>{const _0x46ab13=_0x4378a0;_0x5854d7&&(logger[_0x46ab13(0x33c)](_0x46ab13(0x30e)+_0x46ac72),logger[_0x46ab13(0x322)](_0x5854d7));});else logger['full'](_0x4378a0(0x310)+_0x46ac72+_0x4378a0(0x351));}else logger[_0x4378a0(0x33c)](_0x4378a0(0x310)+_0x46ac72+_0x4378a0(0x29e));}),app['post']('/upload-backup',async(_0x1c7520,_0x3a4fc6)=>{const _0x19c906=_0x446181,_0x57bf05=getClientsWithBotID(_0x19c906(0x201)),_0x2bdbca=_0x1c7520['headers'][_0x19c906(0x380)],_0x89e3ab=timelyDecrypt(_0x2bdbca,![]),_0x5637ba=_0x57bf05[_0x19c906(0x2d0)](_0x2b58e9=>_0x2b58e9['uuid']==_0x89e3ab);logger[_0x19c906(0x325)](_0x19c906(0x2b4));if(_0x5637ba){const _0x45b9bf=normalizeIP(_0x1c7520['socket'][_0x19c906(0x1f6)])[_0x19c906(0x339)],_0x7bf8f2=_0x1c7520[_0x19c906(0x2e7)]['tkn'];if(validateAccess(_0x7bf8f2,_0x89e3ab,_0x45b9bf)[_0x19c906(0x1f3)]){if(_0x1c7520[_0x19c906(0x2c3)]){const _0x127d33=_0x1c7520[_0x19c906(0x2c3)]['backupfile'];await _0x127d33['mv'](temppath+_0x127d33[_0x19c906(0x1e2)]),_0x3a4fc6[_0x19c906(0x35d)]({'status':!![],'message':_0x19c906(0x338)});const _0x3614e3=getBotsWithMode();_0x3614e3['length']>0x0?confirmRestore(temppath,_0x127d33['name']):unzipFile(temppath,_0x127d33[_0x19c906(0x1e2)]);}}else logger['full']('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x19c906(0x33c)](_0x19c906(0x358));}),app[_0x446181(0x33a)](express['static'](path[_0x446181(0x2e3)](__dirname,bbpath2,_0x446181(0x2c4)))),app['use'](express[_0x446181(0x222)](path[_0x446181(0x2e3)](__dirname,bbpath2,'build'))),app[_0x446181(0x260)]('/',function(_0x1cc135,_0x212049){const _0x1c8249=_0x446181;_0x212049[_0x1c8249(0x1ef)](path[_0x1c8249(0x2e3)](__dirname,bbpath2,'build2','index.html'));}),app[_0x446181(0x260)]('/:bot',function(_0x194567,_0x20037b){const _0x4807bb=_0x446181;_0x20037b[_0x4807bb(0x1ef)](path['join'](__dirname,bbpath2,_0x4807bb(0x218),_0x4807bb(0x19e)));}),app[_0x446181(0x260)](_0x446181(0x1d1),(_0x30ce5d,_0x3ea8df)=>{const _0x4980a6=_0x446181;_0x3ea8df[_0x4980a6(0x1ef)](path[_0x4980a6(0x2e3)](__dirname,bbpath2,'build',_0x4980a6(0x19e)));}),app[_0x446181(0x260)](_0x446181(0x1ee),(_0x5b4ec8,_0x5d4a4f)=>{const _0xe27511=_0x446181;_0x5d4a4f[_0xe27511(0x1ef)](path['join'](__dirname,bbpath2,_0xe27511(0x218),_0xe27511(0x19e)));}),app[_0x446181(0x260)](_0x446181(0x1b4),(_0x20465d,_0x480c8b)=>{const _0x1254a6=_0x446181;_0x480c8b[_0x1254a6(0x1ef)](path[_0x1254a6(0x2e3)](__dirname,bbpath2,'build',_0x1254a6(0x19e)));}),app[_0x446181(0x260)](_0x446181(0x221),(_0x446891,_0x258115)=>{const _0x173c19=_0x446181;_0x258115['sendFile'](path[_0x173c19(0x2e3)](__dirname,bbpath2,'build',_0x173c19(0x19e)));}),app[_0x446181(0x260)]('/:bot/configuration',(_0x421c4e,_0x455507)=>{const _0x45a9d3=_0x446181;_0x455507[_0x45a9d3(0x1ef)](path[_0x45a9d3(0x2e3)](__dirname,bbpath2,_0x45a9d3(0x218),_0x45a9d3(0x19e)));}),app[_0x446181(0x260)](_0x446181(0x29c),(_0x22a8ec,_0x25331b)=>{const _0x3bd7da=_0x446181;_0x25331b['sendFile'](path['join'](__dirname,bbpath2,_0x3bd7da(0x218),_0x3bd7da(0x19e)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x446181(0x209))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xe86782=_0x446181;let _0x103869=_0xe86782(0x2b2);const _0x5d546a=networkInterfaces(),_0x1bd3e0={};for(const _0x49bfc0 of Object[_0xe86782(0x292)](_0x5d546a)){for(const _0x510990 of _0x5d546a[_0x49bfc0]){if((_0x510990[_0xe86782(0x2f1)]==_0xe86782(0x32f)||_0x510990[_0xe86782(0x2f1)]==0x4)&&!_0x510990[_0xe86782(0x362)]){const _0x26af15=ipaddr[_0xe86782(0x204)](_0x510990['address'])[_0xe86782(0x25e)]();_0x26af15!='private'&&(!_0x1bd3e0[_0x49bfc0]&&(_0x1bd3e0[_0x49bfc0]=[]),_0x1bd3e0[_0x49bfc0][_0xe86782(0x273)](_0x510990[_0xe86782(0x259)]),_0x103869=_0x510990[_0xe86782(0x259)]);}}}return{'serverip':_0x103869,'netinterfaces':_0x1bd3e0};}async function startServer(){const _0x46698f=_0x446181,{serverip:_0x3fa6cc,netinterfaces:_0x145637}=getServerIP();logger[_0x46698f(0x322)](''),logger[_0x46698f(0x322)](_0x46698f(0x1e6)),await logger[_0x46698f(0x33c)](_0x46698f(0x1aa)+serverversion+_0x46698f(0x302)+(environment=='staging'?_0x46698f(0x1f9):'')+'\x0a'+(_0x46698f(0x1a1)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x46698f(0x1d2)+_0x3fa6cc+':'+PORT+_0x46698f(0x355))),logger[_0x46698f(0x322)](_0x46698f(0x1e6));if(config['length']!=0x0)for(const _0x2467ae of config){const _0x4ec49b=_0x2467ae[_0x46698f(0x1dc)]==_0x46698f(0x193)?'a':'m';if(_0x2467ae[_0x46698f(0x2cc)]==_0x46698f(0x343)||_0x2467ae['status']==_0x46698f(0x262))await logger['full'](_0x46698f(0x258)+_0x4ec49b+')\x20|\x20Bot\x20'+_0x2467ae[_0x46698f(0x2df)]+_0x46698f(0x1de)+_0x2467ae['botname']),startBot([_0x2467ae[_0x46698f(0x2df)],userID],{'cwd':bbpath},function(_0x133eab){const _0x27de71=_0x46698f;if(_0x133eab)logger[_0x27de71(0x33c)](_0x133eab);});else(_0x2467ae[_0x46698f(0x2cc)]==_0x46698f(0x1d5)||_0x2467ae[_0x46698f(0x2cc)]==_0x46698f(0x2f5))&&await logger['full']('Idling\x20('+_0x4ec49b+_0x46698f(0x303)+_0x2467ae['botID']+_0x46698f(0x1de)+_0x2467ae['botname']);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x46698f(0x322)](_0x46698f(0x1e6)),logger['simple'](''),await logger[_0x46698f(0x325)](_0x46698f(0x1bc)+nodeversion),await logger[_0x46698f(0x325)]('Network\x20Interfaces:',_0x145637);}function startSocket(){io['on']('connection',_0x56e4c4=>{const _0x32f1ae=_0x4419;let _0x5c5731,_0x33f90d,_0x1a4e19,_0x295158,_0x49074b;const _0x2d474a=_0x56e4c4[_0x32f1ae(0x319)][_0x32f1ae(0x2e7)]['referer'];_0x33f90d=_0x2d474a[_0x32f1ae(0x2bf)](/bot[0-9]{3}/);if(_0x33f90d)_0x1a4e19=_0x33f90d[0x0][_0x32f1ae(0x2bf)](/[0-9]{3}/);if(_0x1a4e19)_0x5c5731=_0x1a4e19[0x0];else _0x5c5731='botmanager';const _0x162cd8=_0x56e4c4[_0x32f1ae(0x319)][_0x32f1ae(0x1c5)][_0x32f1ae(0x211)];if(!_0x162cd8)_0x56e4c4['emit']('status',{'publicKey':secure[_0x32f1ae(0x378)]});else{_0x295158=timelyDecrypt(_0x162cd8,![]);if(!_0x295158)_0x56e4c4[_0x32f1ae(0x30f)](_0x32f1ae(0x2cc),{'publicKey':secure[_0x32f1ae(0x378)]});else{_0x49074b=normalizeIP(_0x56e4c4['conn'][_0x32f1ae(0x1f6)])[_0x32f1ae(0x339)];if(!devices[_0x295158])devices[_0x295158]={'uuid':_0x295158,'access':{'token':null}};devices[_0x295158]['ip']=_0x49074b;const _0x3df174=addClient(_0x56e4c4['id'],_0x295158,_0x5c5731);setAccess(_0x3df174),emitMessages(),_0x56e4c4['on'](_0x32f1ae(0x2a0),_0x12fdf1=>{const _0x4683c9=_0x32f1ae,_0x489cb0=timelyDecrypt(_0x12fdf1['password']);if(_0x489cb0){_0x12fdf1={'username':_0x12fdf1[_0x4683c9(0x265)],'password':_0x489cb0},devices[_0x295158][_0x4683c9(0x1bb)]=validateCredentials(_0x12fdf1,_0x295158);if(devices[_0x295158]['access'][_0x4683c9(0x1f3)]==![]&&devices[_0x295158][_0x4683c9(0x1bb)][_0x4683c9(0x2fd)]==_0x4683c9(0x23d))_0x56e4c4[_0x4683c9(0x30f)]('status',{'access':devices[_0x295158]['access']}),loginAccess2FA(_0x295158,_0x49074b);else{if(devices[_0x295158][_0x4683c9(0x1bb)][_0x4683c9(0x1f3)]==![]&&devices[_0x295158][_0x4683c9(0x1bb)][_0x4683c9(0x2fd)]==_0x4683c9(0x2fb))_0x56e4c4[_0x4683c9(0x30f)](_0x4683c9(0x2cc),{'access':devices[_0x295158]['access']});else devices[_0x295158]['access'][_0x4683c9(0x1f3)]&&devices[_0x295158]['access'][_0x4683c9(0x2fd)]==_0x4683c9(0x2ca)&&(getClientsWithUuid(_0x295158)[_0x4683c9(0x1ec)](_0xb2659b=>{setAccess(_0xb2659b);}),logger['debug'](_0x4683c9(0x27d)+_0x295158['slice'](-0x8)),setTokenRefresh(_0x295158),setSessionTimeout('login',_0x295158));}}else logger[_0x4683c9(0x33c)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x56e4c4['on'](_0x32f1ae(0x2e6),()=>{resetPassword();}),_0x56e4c4['on'](_0x32f1ae(0x2a8),_0x142fb3=>{removeClient(_0x56e4c4['id']);}),_0x5c5731==_0x32f1ae(0x201)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3914d9){const _0x1e4b14=_0x446181;if(_0x3914d9!='botmanager'&&config[_0x1e4b14(0x2fc)]!=''){if(pid[_0x3914d9])pid[_0x3914d9]['send']({'function':_0x1e4b14(0x316),'args':null});}_0x3914d9!=_0x1e4b14(0x201)&&broadcastToBots(_0x1e4b14(0x200),JSON[_0x1e4b14(0x293)](config));}function reloadBotManager(){const _0x4d8cd2=_0x446181;getClientsWithBotID(_0x4d8cd2(0x201))[_0x4d8cd2(0x1ec)](_0x41ee54=>{const _0x53acf8=_0x4d8cd2;getSocket(_0x41ee54['id'])['emit'](_0x53acf8(0x2cc),{'access':{'allow':![],'reason':_0x53acf8(0x2d2),'token':null}});});}function getSocket(_0x2ebea5){const _0x378d4f=_0x446181;return io[_0x378d4f(0x321)][_0x378d4f(0x321)][_0x378d4f(0x260)](_0x2ebea5);}function setAccess(_0x26a904){const _0x18ebfe=_0x446181,_0x456c0f=getSocket(_0x26a904['id']),_0x361272=_0x26a904[_0x18ebfe(0x380)],_0x18be3a=_0x26a904[_0x18ebfe(0x234)];devices[_0x361272][_0x18ebfe(0x1bb)]=validateAccess(devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x270)],_0x361272),logger[_0x18ebfe(0x325)](_0x18ebfe(0x23e)+devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x2fd)]+_0x18ebfe(0x327)+_0x26a904['id'][_0x18ebfe(0x2f8)](-0x8)+_0x18ebfe(0x336)+_0x361272[_0x18ebfe(0x2f8)](-0x8)),_0x456c0f[_0x18ebfe(0x2e3)](_0x361272);if(devices[_0x361272]['access'][_0x18ebfe(0x1f3)]){_0x456c0f[_0x18ebfe(0x2e3)](_0x18be3a);if(_0x18be3a=='botmanager')initializeSocketBotManager(_0x456c0f);else initializeSocketBot(_0x456c0f);initClient(_0x18be3a);}devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x270)]&&devices[_0x361272]['access'][_0x18ebfe(0x2fd)]==_0x18ebfe(0x1cf)&&setSessionTimeout(_0x18ebfe(0x239),_0x361272),devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x270)]&&devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x2fd)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x361272),_0x456c0f['emit'](_0x18ebfe(0x2cc),{'status':_0x26a904['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x361272]['access'],'externalip':devices[_0x361272]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x18ebfe(0x2a5)],'validInstallation':validInstallation}),devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x1f3)]==![]&&devices[_0x361272][_0x18ebfe(0x1bb)][_0x18ebfe(0x2fd)]==_0x18ebfe(0x348)&&temporaryAccess2FA(_0x361272,devices[_0x361272]['ip']);}function setSessionTimeout(_0x2097e6,_0x1fb562){const _0x1a536f=_0x446181;let _0x44919d;if(_0x2097e6==_0x1a536f(0x2a0))_0x44919d=loginExpiry*0x3c*0x3e8;else _0x44919d=devices[_0x1fb562]['telegramIpApproval'][_0x1a536f(0x2b5)]*0x3c*0x3e8-(new Date()[_0x1a536f(0x20a)]()-devices[_0x1fb562]['telegramIpApproval']['timestamp']);if(devices[_0x1fb562][_0x1a536f(0x35b)])clearTimeout(devices[_0x1fb562][_0x1a536f(0x35b)]);devices[_0x1fb562][_0x1a536f(0x35b)]=setTimeout(()=>{const _0x13700f=_0x1a536f;if(devices[_0x1fb562][_0x13700f(0x1e4)])clearTimeout(devices[_0x1fb562]['pidRefreshToken']);removeSocketListeners(_0x1fb562),addBlacklist(_0x1fb562),devices[_0x1fb562][_0x13700f(0x37d)]=null,devices[_0x1fb562]['telegram2FaApproval']=null,devices[_0x1fb562]['access']['token']=null,logger[_0x13700f(0x325)]('Session\x20expired\x20for\x20user\x20...'+_0x1fb562[_0x13700f(0x2f8)](-0x8)),devices[_0x1fb562][_0x13700f(0x1bb)]=validateAccess(devices[_0x1fb562][_0x13700f(0x1bb)]['token'],_0x1fb562),!(devices[_0x1fb562][_0x13700f(0x1bb)][_0x13700f(0x1f3)]&&devices[_0x1fb562]['access'][_0x13700f(0x2fd)]=='login\x20not\x20required')&&(_0x2097e6==_0x13700f(0x2a0)?io['to'](_0x1fb562)[_0x13700f(0x30f)](_0x13700f(0x2cc),{'access':{'allow':![],'reason':_0x13700f(0x340),'token':null}}):io['to'](_0x1fb562)[_0x13700f(0x30f)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x1fb562]['access'][_0x13700f(0x270)]=null;},_0x44919d);}function setTokenRefresh(_0x2a3080){if(devices[_0x2a3080]['pidRefreshToken'])clearTimeout(devices[_0x2a3080]['pidRefreshToken']);devices[_0x2a3080]['pidRefreshToken']=setTimeout(()=>{const _0x229292=_0x4419;getClientsWithUuid(_0x2a3080)[_0x229292(0x34d)]!=0x0?(devices[_0x2a3080][_0x229292(0x1bb)]=refreshToken(_0x2a3080),io['to'](_0x2a3080)[_0x229292(0x30f)]('status',{'status':_0x229292(0x2e4),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x2a3080][_0x229292(0x1bb)],'externalip':devices[_0x2a3080]['ip'],'publicKey':secure[_0x229292(0x378)],'validInstallation':validInstallation}),setTokenRefresh(_0x2a3080)):clearTimeout(devices[_0x2a3080][_0x229292(0x1e4)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x437999){const _0x559d40=_0x446181,_0x1c7faf=getClient(_0x437999['id'])[_0x559d40(0x380)];_0x437999['emit'](_0x559d40(0x200),config),_0x437999[_0x559d40(0x30f)]('settings',cleanSettings()),_0x437999['on'](_0x559d40(0x359),_0x1aedf4=>{const _0x390c06=_0x559d40;if(validateAccess(_0x1aedf4,_0x1c7faf)['allow'])addBot();else logger[_0x390c06(0x33c)](_0x390c06(0x2b9));}),_0x437999['on']('update-bot',(_0x11849f,_0x190836)=>{const _0x1b3130=_0x559d40;if(validateAccess(_0x190836,_0x1c7faf)[_0x1b3130(0x1f3)])toggleBot(_0x11849f['botID'],_0x11849f[_0x1b3130(0x2cc)],_0x11849f[_0x1b3130(0x248)]);else logger[_0x1b3130(0x33c)](_0x1b3130(0x223));}),_0x437999['on'](_0x559d40(0x368),(_0x206c44,_0x121553)=>{const _0x3f99fe=_0x559d40;if(validateAccess(_0x121553,_0x1c7faf)[_0x3f99fe(0x1f3)])toggleBotMode(_0x206c44);else logger['full'](_0x3f99fe(0x223));}),_0x437999['on'](_0x559d40(0x235),(_0x24dc54,_0x33b95d)=>{const _0x147f37=_0x559d40;if(validateAccess(_0x33b95d,_0x1c7faf)['allow'])deleteBot(_0x24dc54);else logger[_0x147f37(0x33c)](_0x147f37(0x2bb));}),_0x437999['on'](_0x559d40(0x276),(_0x75fb56,_0x3d98ff)=>{const _0x2c614a=_0x559d40;if(validateAccess(_0x3d98ff,_0x1c7faf)[_0x2c614a(0x1f3)])storeSettings(_0x75fb56,!![]);else logger[_0x2c614a(0x33c)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x437999['on'](_0x559d40(0x257),_0x291bee=>{const _0x32f467=_0x559d40;if(validateAccess(_0x291bee,_0x1c7faf)[_0x32f467(0x1f3)])updateBB(_0x32f467(0x1cc));else logger[_0x32f467(0x33c)](_0x32f467(0x2a3));}),_0x437999['on'](_0x559d40(0x1fe),_0x4dbb1e=>{const _0x542756=_0x559d40;if(validateAccess(_0x4dbb1e,_0x1c7faf)[_0x542756(0x1f3)])updateBB(_0x542756(0x2c9));else logger[_0x542756(0x33c)](_0x542756(0x2dc));}),_0x437999['on'](_0x559d40(0x227),_0x582907=>{const _0x246a01=_0x559d40;if(validateAccess(_0x582907,_0x1c7faf)['allow']){const _0x64ae5e=getClient(_0x437999['id']);if(_0x64ae5e)getBackupFiles(_0x64ae5e[_0x246a01(0x380)]);else logger[_0x246a01(0x33c)](_0x246a01(0x31a));}else logger[_0x246a01(0x33c)](_0x246a01(0x2cf));}),_0x437999['on'](_0x559d40(0x317),(_0x5559c6,_0x115d4c)=>{const _0x34345e=_0x559d40;if(validateAccess(_0x115d4c,_0x1c7faf)[_0x34345e(0x1f3)])restoreBackupFile(_0x5559c6);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x437999['on'](_0x559d40(0x20b),_0x1db353=>{const _0x9addbf=_0x559d40;if(validateAccess(_0x1db353,_0x1c7faf)['allow'])getMessages();else logger['full'](_0x9addbf(0x1d6));}),_0x437999['on'](_0x559d40(0x2f3),(_0x46dc3a,_0x44eb96)=>{const _0x14bcc1=_0x559d40;if(validateAccess(_0x44eb96,_0x1c7faf)[_0x14bcc1(0x1f3)])confirmMessage(_0x46dc3a);else logger[_0x14bcc1(0x33c)](_0x14bcc1(0x2ef));}),_0x437999['on']('logout',_0x442b9c=>{const _0x29cdf8=_0x559d40;if(validateAccess(_0x442b9c,_0x1c7faf)[_0x29cdf8(0x1f3)]){if(devices[_0x1c7faf][_0x29cdf8(0x1e4)])clearTimeout(devices[_0x1c7faf]['pidRefreshToken']);if(devices[_0x1c7faf][_0x29cdf8(0x35b)])clearTimeout(devices[_0x1c7faf][_0x29cdf8(0x35b)]);removeSocketListeners(getClient(_0x437999['id'])['uuid']),addBlacklist(_0x1c7faf),devices[_0x1c7faf][_0x29cdf8(0x37d)]=null,devices[_0x1c7faf]['telegram2FaApproval']=null,devices[_0x1c7faf][_0x29cdf8(0x1bb)]['token']=null,logger[_0x29cdf8(0x325)](_0x29cdf8(0x305)+_0x1c7faf['slice'](-0x8)),io['to'](getClient(_0x437999['id'])[_0x29cdf8(0x380)])[_0x29cdf8(0x30f)](_0x29cdf8(0x2cc),{'access':{'allow':![],'reason':_0x29cdf8(0x1ba),'token':null}});}else logger[_0x29cdf8(0x33c)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function _0x24fa(){const _0x46802b=['invalid\x20credentials','apiKey','reason','node','3000','bb-secure.json','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','#RES#\x20',')\x20\x20\x20|\x20Bot\x20','************','Logged\x20out\x20user\x20...','resetHistory','privateKey','yes','getDate','.zip','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','all','/download/:type','Failed\x20to\x20download\x20','emit','Unauthorized\x20attempt\x20to\x20download\x20','Crypt','Password\x20reset\x20rejected',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','update_no','createServer','initclient','restore-backup-file','reply','handshake','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Your\x20installation\x20is\x20already\x20up\x20to\x20date','replace','from','jsonwebtoken','Notifications\x20disabled\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','sockets','simple','cancelLoading','output-000.log','debug','deleteHistoryAlerts','\x20|\x20client:\x20...','ipaddr.js','Invalid\x20authentication\x20token\x20(2)','Deleted\x20Bot\x20','getMonth','backup-full.zip','$1_$2_$3','exchange','IPv4','get-portfolio','<b>Balance\x20Bot\x20Status:</b>\x0a','Access\x20enabled\x20for\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','login\x20required','function','\x20|\x20user:\x20...','config_alerts','File\x20uploaded','store','use','getStartingBalances','full','hasOwnProperty','request','output-001.log','access\x20timeout','Unauthorized\x20attempt\x20to\x20show\x20configuration','on_','enabled','log','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','2FA\x20required',',\x20must\x20be\x20a\x204\x20digit\x20number','Notifications\x20enabled\x0a','event','metrics_','length','Password\x20has\x20been\x20reset\x20to:\x20','test','output-002.log','\x20(1)','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','show','#RES#\x20if\x20running\x20on\x20server','restart_','30\x20min','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','add-bot','bot-','pidExpireLogin','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','send','answerCallbackQuery','callback_query','port','http','internal','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','inlineKeyboard','place-order','unlinkSync','/metrics\x20-\x20show\x20bot\x20performance\x0a','toggle-bot-mode','readdirSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','ipv6','\x20minutes','env','\x20only\x0a','warning','lowdb','-results.json','toIPv4MappedAddress','Markdown','exec','Alerts','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','onepagemode','publicKey','All','temp/','Unauthorized\x20attempt\x20to\x20get\x20portfolio','constructor','telegramIpApproval','bb-settings.json','hashSync','uuid','apiSecret','button','Restarting\x20Bot\x20','HTML','2549490vktQku','host','inherit','rmSync','enable','Bot\x20','auto','f2aRequired','writeFileSync','_data','error','config/','settings.','telegramEvents','remove','Unauthorized\x20attempt\x20to\x20delete\x20alerts','getPortfolio','index.html','toIPv4Address','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','<b>Telegram\x20Bot\x20Status:</b>\x0a','\x1b[35m','type','sendMetricsTelegram','set','removeAllListeners','Enabled\x20Bot\x20','User\x20has\x20been\x20validated','Starting\x20#RED#Balance\x20Bot\x20v','\x1b[33m','user','toggle','Invalid\x20IP\x20address','backup-full@','logout','Restore\x20process\x20aborted','whitelistEnabled','reinstall_yes','/:bot/coins','existsSync','-performance.json','endsWith','started','version','logged\x20out','access','Node.js\x20v','toggleBotMode','split','headless','isIPv4MappedAddress','Disabled\x20Bot\x20','crypto','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','auth','versions','sign','zip/','reset-history','bb/','sortBy','update','axios','secret','temporary\x20token\x20generated','127.0.0.1','/:bot/portfolio','=>\x20Go\x20to\x20#CYA#http://','telegramChatId','exit','disabled','Unauthorized\x20attempt\x20to\x20get\x20messages','graphql-request','randomFillSync','2865744DUqTsC','storeConfiguration','telegramEnabled','mode','apply','\x20|\x20','file','startsWith','logs','name','action','pidRefreshToken','\x1b[0m','-----------------------------------------------------------------------------------','isValid','6710325qEIZyx','order','show-config','blacklist','forEach','defaults','/:bot/performance','sendFile','sendPortfolioTelegram','argv','store-fiat','allow','production','settings','remoteAddress','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','emitHistory','(staging)','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','copyFileSync','command','decrypt','reinstall-bb','*$1*','bots','botmanager','search','format','parse','Backup\x20file\x20unzipped\x20and\x20stored','/output-000.log','placeOrder','timeshift','socket.io','getTime','get-messages','readFileSync','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','uncaughtException','SIGINT','***','encryptedUuid','761608zlQAum','map','bbUsername','stop','config','temporaryAccessAllowed','build','express','clientip','version.json','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','20048700OGMBaB','https://api.ipify.org?format=json','836025AkWLRy','secure','/:bot/history','static','Unauthorized\x20attempt\x20to\x20update\x20bot','\x1b[36m','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Telegram\x20error:','get-backup-files','0.0.0','toString','names','getSeconds','All\x20bots','add','Token\x20blacklisted','bb-config.json',':\x20Bot\x20Mgr\x20>\x20','store-headless','\x1b[34m','Starting\x20Balance\x20Bot\x20reinstallation','bot','delete-bot','telegramUsername','restart','manual','2FA','mtime','date-fns','child_process','2FA\x20login\x20required','Setting\x20access:\x20','value','socket','temporary\x20access\x20not\x20allowed','Restoring\x20bot(s)\x20from\x20backup','NTBA_FIX_319','statSync','uuid-random','/update\x20-\x20update\x20Balance\x20Bot\x0a','title','live','Server','(((.+)+)+)+$','\x20to\x20','api-eu.mixpanel.com','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','get-starting-balances','telegram2FaApproval','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','telegram','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','bbvReceive','Error\x20while\x20deleting\x20config\x20files:\x20','orders','2FA\x20login\x20rejected','update-bb','Starting\x20(','address','messages','Bot\x20Mgr\x20>\x20','once','mixpanel','range','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','get','/restart\x20-\x20restart\x20bot(s)\x0a','new','write','any','username','mkdirSync','kind','filter','includes','lastmsgemitted','-config.json','editMessageReplyMarkup','chat','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','apiPassword','token','off','launch','push','2FA\x20login\x20token\x20generated','config_orders','store-settings','logs/','hybrid-crypto-js','reject','RSA','storeHeadless','params','Logged\x20in\x20user\x20...','success','getFullYear','login\x20not\x20required','init','\x1b[31m','config_all','backup','lastmsgtelegram','timestamp','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','getHours','login\x20token\x20valid','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Notifications\x20types:\x20','number','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Login\x20accepted','Login\x20rejected','reinstall_no','backup-files','keys','stringify','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','data','padStart','/help\x20-\x20show\x20available\x20commands\x0a','max','message','portfolio','/enable\x20-\x20enable\x20notifications\x0a','/:bot/support','createWriteStream','\x20(2)','isDirectory','login','ipc','binary','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','botname','userid','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','showname','disconnect','getMinutes','then','node-zip','-events.json','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','RSA-OAEP','[ip-address]','Notifications\x20disabled','Backup\x20file\x20uploaded','expiry','loginRequired','bbvNew','download','Unauthorized\x20attempt\x20to\x20add\x20bot','Restore\x20backup\x20file\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','alias','randomBytes','yargs/yargs','match','bbPassword','min','\x20>\x20','files','build2','6b67f3d61ee94b8f5c80b4affef4c4d9','help','latestversion','running','reinstall','login\x20token\x20generated','assign','status','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','SIGTERM','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','find','telegramToken','reload','password','compareSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','cancel-loading','fork','updatebotmanager','\x20mode','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','::ffff:127.0.0.1','Unauthorized\x20attempt\x20to\x20get\x20events','botID','Error:\x20Invalid\x20argument\x20','All\x20bots\x20running\x20right\x20now','304392PXccfA','join','connected','stopped','reset-password','headers','1000','toggle_','kill','store-configuration','telegrammsg','callback','Error\x20removing\x20old\x20backup\x20files:','Unauthorized\x20attempt\x20to\x20confirm\x20message','alerts','family','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','confirm-message','sort','new-disabled','get-logs','Telegraf\x20error:','slice','accept','express-fileupload'];_0x24fa=function(){return _0x46802b;};return _0x24fa();}function initializeSocketBot(_0x2808ec){const _0xee9ef2=_0x446181,_0x22910e=getClient(_0x2808ec['id'])[_0xee9ef2(0x234)],_0x3bba7d=getClient(_0x2808ec['id'])[_0xee9ef2(0x380)];_0x2808ec['on'](_0xee9ef2(0x2f6),(_0x15cd84,_0x481b4a)=>{const _0x25c8a3=_0xee9ef2;if(validateAccess(_0x481b4a,_0x3bba7d)[_0x25c8a3(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x25c8a3(0x35d)]({'function':_0x25c8a3(0x1f8),'args':_0x15cd84});}else logger[_0x25c8a3(0x33c)](_0x25c8a3(0x2de));}),_0x2808ec['on']('delete-alerts',(_0x24e2c7,_0x15e61d)=>{const _0xf4cd26=_0xee9ef2;if(validateAccess(_0x15e61d,_0x3bba7d)['allow']){if(pid[_0x22910e])pid[_0x22910e][_0xf4cd26(0x35d)]({'function':_0xf4cd26(0x326),'args':_0x24e2c7});}else logger['full'](_0xf4cd26(0x19c));}),_0x2808ec['on'](_0xee9ef2(0x330),(_0x154fcf,_0x47b15c)=>{const _0x1555d0=_0xee9ef2;if(validateAccess(_0x47b15c,_0x3bba7d)[_0x1555d0(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x1555d0(0x35d)]({'function':_0x1555d0(0x19d),'args':_0x154fcf});}else logger[_0x1555d0(0x33c)](_0x1555d0(0x37b));}),_0x2808ec['on'](_0xee9ef2(0x2eb),(_0xe1403f,_0x1c3b84)=>{const _0x3a99ac=_0xee9ef2;if(validateAccess(_0x1c3b84,_0x3bba7d)[_0x3a99ac(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x3a99ac(0x35d)]({'function':_0x3a99ac(0x1da),'args':_0xe1403f});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x2808ec['on'](_0xee9ef2(0x231),(_0x600bd8,_0x3db2d2)=>{const _0x664054=_0xee9ef2;if(validateAccess(_0x3db2d2,_0x3bba7d)[_0x664054(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x664054(0x35d)]({'function':_0x664054(0x27b),'args':_0x600bd8});}else logger[_0x664054(0x33c)](_0x664054(0x353));}),_0x2808ec['on'](_0xee9ef2(0x1f2),(_0x34509a,_0x488698)=>{const _0x156b8a=_0xee9ef2;if(validateAccess(_0x488698,_0x3bba7d)[_0x156b8a(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e]['send']({'function':'storeFiat','args':_0x34509a});}else logger['full'](_0x156b8a(0x1f7));}),_0x2808ec['on'](_0xee9ef2(0x1c9),_0x56134e=>{const _0x1801df=_0xee9ef2;if(validateAccess(_0x56134e,_0x3bba7d)[_0x1801df(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x1801df(0x35d)]({'function':_0x1801df(0x306),'args':null});}else logger[_0x1801df(0x33c)](_0x1801df(0x21c));}),_0x2808ec['on'](_0xee9ef2(0x24e),_0x211833=>{const _0x17e9c8=_0xee9ef2;if(validateAccess(_0x211833,_0x3bba7d)[_0x17e9c8(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x17e9c8(0x35d)]({'function':_0x17e9c8(0x33b),'args':null});}else logger[_0x17e9c8(0x33c)](_0x17e9c8(0x301));}),_0x2808ec['on'](_0xee9ef2(0x365),(_0x2a5c15,_0x13700b)=>{const _0x134f82=_0xee9ef2;if(validateAccess(_0x13700b,_0x3bba7d)[_0x134f82(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e]['send']({'function':_0x134f82(0x207),'args':_0x2a5c15});}else logger[_0x134f82(0x33c)](_0x134f82(0x20d));}),_0x2808ec['on'](_0xee9ef2(0x2d6),_0x450f2f=>{const _0x49066e=_0xee9ef2;if(validateAccess(_0x450f2f,_0x3bba7d)[_0x49066e(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e]['send']({'function':_0x49066e(0x323),'args':null});}else logger[_0x49066e(0x33c)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x2808ec['on'](_0xee9ef2(0x1ea),_0x8cd86e=>{const _0x3d27fd=_0xee9ef2;if(validateAccess(_0x8cd86e,_0x3bba7d)[_0x3d27fd(0x1f3)]){if(pid[_0x22910e])pid[_0x22910e][_0x3d27fd(0x35d)]({'function':'showConfig','args':null});}else logger[_0x3d27fd(0x33c)](_0x3d27fd(0x341));}),_0x2808ec['on'](_0xee9ef2(0x257),_0x3d6d93=>{const _0x51a914=_0xee9ef2;if(validateAccess(_0x3d6d93,_0x3bba7d)[_0x51a914(0x1f3)])updateBB(_0x51a914(0x1cc));else logger[_0x51a914(0x33c)](_0x51a914(0x2a3));}),_0x2808ec['on'](_0xee9ef2(0x20b),_0x40d082=>{const _0x1679d9=_0xee9ef2;if(validateAccess(_0x40d082,_0x3bba7d)[_0x1679d9(0x1f3)])getMessages();else logger[_0x1679d9(0x33c)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2808ec['on'](_0xee9ef2(0x2f3),(_0x1dde23,_0x9559e0)=>{const _0x357c3b=_0xee9ef2;if(validateAccess(_0x9559e0,_0x3bba7d)['allow'])confirmMessage(_0x1dde23);else logger[_0x357c3b(0x33c)](_0x357c3b(0x2ef));}),_0x2808ec['on'](_0xee9ef2(0x1b0),_0x54474c=>{const _0xbe0f0c=_0xee9ef2;if(validateAccess(_0x54474c,_0x3bba7d)[_0xbe0f0c(0x1f3)]){if(devices[_0x3bba7d][_0xbe0f0c(0x1e4)])clearTimeout(devices[_0x3bba7d][_0xbe0f0c(0x1e4)]);if(devices[_0x3bba7d][_0xbe0f0c(0x35b)])clearTimeout(devices[_0x3bba7d]['pidExpireLogin']);removeSocketListeners(getClient(_0x2808ec['id'])[_0xbe0f0c(0x380)]),addBlacklist(_0x3bba7d),devices[_0x3bba7d]['telegramIpApproval']=null,devices[_0x3bba7d]['telegram2FaApproval']=null,devices[_0x3bba7d]['access'][_0xbe0f0c(0x270)]=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x3bba7d[_0xbe0f0c(0x2f8)](-0x8)),io['to'](getClient(_0x2808ec['id'])[_0xbe0f0c(0x380)])[_0xbe0f0c(0x30f)](_0xbe0f0c(0x2cc),{'access':{'allow':![],'reason':_0xbe0f0c(0x1ba),'token':null}});}else logger[_0xbe0f0c(0x33c)](_0xbe0f0c(0x320));});}function removeSocketListeners(_0x3412f8){const _0x2e4a20=_0x446181;getClientsWithUuid(_0x3412f8)[_0x2e4a20(0x1ec)](_0x2f1c75=>{const _0x5f46f0=_0x2e4a20;getSocket(_0x2f1c75['id'])[_0x5f46f0(0x1a7)]();});}function cleanSettings(){const _0x3b6d91=_0x446181;let _0x469102=settings;return settings[_0x3b6d91(0x2d1)]&&settings['telegramToken']!=''&&(_0x469102={..._0x469102,'telegramToken':_0x3b6d91(0x304)}),settings[_0x3b6d91(0x2c0)]&&settings['bbPassword']!=''&&(_0x469102={..._0x469102,'bbPassword':_0x3b6d91(0x304)}),(settings[_0x3b6d91(0x2c0)]&&settings[_0x3b6d91(0x2c0)]=='***'||settings[_0x3b6d91(0x2d1)]&&settings[_0x3b6d91(0x2d1)]==_0x3b6d91(0x210))&&(_0x469102={..._0x469102,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x3b6d91(0x2d1)]==_0x3b6d91(0x210)}}),_0x469102;}async function updateBB(_0x342a80){const _0x149855=_0x446181;await backupConfigFiles(),installingUpdate=!![],config[_0x149855(0x1ec)](_0x173c11=>{const _0x2fef24=_0x149855;restartBot(_0x173c11[_0x2fef24(0x2df)]);});if(_0x342a80==_0x149855(0x1cc))process[_0x149855(0x35d)]({'update':!![],'environment':environment},_0x37df5f=>{});else _0x342a80==_0x149855(0x2c9)&&process[_0x149855(0x35d)]({'reinstall':!![],'environment':environment},_0x1ffa2a=>{});}function startBot(_0x33b9d2,_0x3f95b2,_0x4f0bff){const _0x55816a=_0x446181;if(debugging)_0x33b9d2[_0x55816a(0x273)]('-d');let _0x332e62=![];const _0x2c3a00=_0x33b9d2[0x0];_0x3f95b2={..._0x3f95b2,'stdio':[_0x55816a(0x18f),'inherit',_0x55816a(0x18f),_0x55816a(0x2a1)]},pid[_0x2c3a00]=childProcess[_0x55816a(0x2d7)](botfile,_0x33b9d2,_0x3f95b2),pid[_0x2c3a00]['on']('message',_0x5158b8=>{const _0x3e89eb=_0x55816a;switch(Object['keys'](_0x5158b8)[0x0]){case _0x3e89eb(0x2a4):updateBotName(_0x2c3a00,_0x5158b8['botname']);break;case _0x3e89eb(0x2d8):updateBotManager();break;case _0x3e89eb(0x2cc):updateStatus(_0x2c3a00,_0x5158b8[_0x3e89eb(0x2cc)]);break;case _0x3e89eb(0x248):updateLive(_0x2c3a00,_0x5158b8['live']);break;case _0x3e89eb(0x1b8):updateLive(_0x2c3a00,_0x5158b8[_0x3e89eb(0x1b8)]),io['to'](_0x2c3a00)['emit'](_0x3e89eb(0x2cc),{'access':{'allow':![],'reason':_0x3e89eb(0x2d2),'token':null}});break;case _0x3e89eb(0x215):_0x5158b8[_0x3e89eb(0x215)]==_0x3e89eb(0x237)&&restartBot(_0x2c3a00);_0x5158b8['stop']==_0x3e89eb(0x2ea)&&toggleBot(_0x2c3a00,_0x3e89eb(0x1d5),_0x3e89eb(0x2e5));break;case _0x3e89eb(0x251):sendTelegramBot(_0x2c3a00,_0x5158b8[_0x3e89eb(0x251)]);break;case _0x3e89eb(0x2ec):sendTelegramMsg(_0x5158b8['telegrammsg']);break;case _0x3e89eb(0x335):io['to'](_0x2c3a00)[_0x3e89eb(0x30f)](_0x5158b8['function'],_0x5158b8['args']);break;}}),pid[_0x2c3a00]['on']('error',function(_0x5284a9){if(_0x332e62)return;_0x332e62=!![],_0x4f0bff(_0x5284a9);}),pid[_0x2c3a00]['on'](_0x55816a(0x1d4),async function(_0x1194b4){const _0x5915ff=_0x55816a;if(installingUpdate)return;if(_0x332e62)return;_0x332e62=!![],_0x4f0bff(null);const _0x1ec653=dbConfig[_0x5915ff(0x260)](_0x5915ff(0x200))['find']({'botID':_0x2c3a00})[_0x5915ff(0x23f)]();_0x1ec653&&(_0x1ec653[_0x5915ff(0x2cc)]==_0x5915ff(0x343)||_0x1ec653[_0x5915ff(0x2cc)]==_0x5915ff(0x262))&&(await sleep(0x3e8),updateLive(_0x2c3a00,_0x5915ff(0x2e5)),logger[_0x5915ff(0x33c)](_0x5915ff(0x383)+_0x2c3a00),startBot([_0x2c3a00,userID],{'cwd':bbpath},function(_0x5a6eb0){const _0x4c7ed5=_0x5915ff;if(_0x5a6eb0)logger[_0x4c7ed5(0x33c)](_0x5a6eb0);}));});}function stopBot(_0x10ed71){const _0x52ed45=_0x446181;getClientsWithBotID(_0x10ed71)[_0x52ed45(0x1ec)](_0xde4f=>{const _0x5cdb5d=_0x52ed45;getSocket(_0xde4f['id'])[_0x5cdb5d(0x2a8)](!![]),removeClient(_0xde4f['id']);}),pid[_0x10ed71]&&(pid[_0x10ed71][_0x52ed45(0x2ea)](),pid[_0x10ed71]=null);}function restartBot(_0xfd971d){if(pid[_0xfd971d])pid[_0xfd971d]['kill']();}function addBot(){const _0x16f010=_0x446181;let _0x5e7e7d;for(let _0x2cf894=0x1;_0x2cf894<0x3e9;_0x2cf894++){_0x5e7e7d=_0x2cf894['toString']()[_0x16f010(0x296)](0x3,'0');let _0x8ffdbd=config[_0x16f010(0x2d0)](_0x1e0788=>_0x1e0788['botID']==_0x5e7e7d);if(!_0x8ffdbd)break;}if(_0x5e7e7d===_0x16f010(0x2e8)){logger[_0x16f010(0x33c)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger['full']('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x5e7e7d),dbConfig[_0x16f010(0x260)](_0x16f010(0x200))[_0x16f010(0x273)]({'botID':_0x5e7e7d,'botname':'Bot\x20'+_0x5e7e7d,'status':_0x16f010(0x262),'live':''})[_0x16f010(0x263)](),startBot([_0x5e7e7d,userID],{'cwd':bbpath},function(_0x11ff4e){if(_0x11ff4e)logger['full'](_0x11ff4e);}),config=getConfiguration(),io['to']('botmanager')[_0x16f010(0x30f)](_0x16f010(0x200),config),broadcastToBots('bots',JSON['stringify'](config));}function deleteBot(_0x220893){const _0x22c8a3=_0x446181;getClientsWithBotID(_0x220893)[_0x22c8a3(0x1ec)](_0x4a01cf=>{const _0x218a01=_0x22c8a3;getSocket(_0x4a01cf['id'])[_0x218a01(0x2a8)](!![]),removeClient(_0x4a01cf['id']);}),dbConfig[_0x22c8a3(0x260)](_0x22c8a3(0x200))[_0x22c8a3(0x19b)]({'botID':_0x220893})[_0x22c8a3(0x263)](),logger[_0x22c8a3(0x33c)](_0x22c8a3(0x32a)+_0x220893),stopBot(_0x220893);try{if(fs[_0x22c8a3(0x1b5)](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x26b))))fs[_0x22c8a3(0x366)](path['join'](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x26b)));if(fs['existsSync'](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x2ac))))fs[_0x22c8a3(0x366)](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x2ac)));if(fs[_0x22c8a3(0x1b5)](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x1b6))))fs['unlinkSync'](path[_0x22c8a3(0x2e3)](configpath,'bot-'+_0x220893+_0x22c8a3(0x1b6)));if(fs[_0x22c8a3(0x1b5)](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x371))))fs[_0x22c8a3(0x366)](path[_0x22c8a3(0x2e3)](configpath,_0x22c8a3(0x35a)+_0x220893+_0x22c8a3(0x371)));}catch(_0x15e132){if(_0x15e132)logger[_0x22c8a3(0x33c)](_0x22c8a3(0x254),_0x15e132);}config=getConfiguration(),io['to'](_0x22c8a3(0x201))[_0x22c8a3(0x30f)](_0x22c8a3(0x200),config),broadcastToBots(_0x22c8a3(0x200),JSON['stringify'](config));}function toggleBot(_0x11562c,_0x58e957,_0xa0ef69){const _0xc8bac0=_0x446181;dbConfig[_0xc8bac0(0x260)](_0xc8bac0(0x200))[_0xc8bac0(0x2d0)]({'botID':_0x11562c})['assign']({'status':_0x58e957})['assign']({'live':_0xa0ef69})[_0xc8bac0(0x263)]();if(_0x58e957==_0xc8bac0(0x343)||_0x58e957=='new')logger[_0xc8bac0(0x33c)](_0xc8bac0(0x1a8)+_0x11562c),startBot([_0x11562c,userID],{'cwd':bbpath},function(_0x1ecbe9){const _0x9fc176=_0xc8bac0;if(_0x1ecbe9)logger[_0x9fc176(0x33c)](_0x1ecbe9);});else(_0x58e957==_0xc8bac0(0x1d5)||_0x58e957=='new-disabled')&&(logger[_0xc8bac0(0x33c)](_0xc8bac0(0x1c1)+_0x11562c),stopBot(_0x11562c));config=getConfiguration(),io['to']('botmanager')['emit']('bots',config),broadcastToBots(_0xc8bac0(0x200),JSON[_0xc8bac0(0x293)](config));}function toggleStatus(_0xce3bf5){const _0x3f496c=_0x446181;let _0xfa29d7=dbConfig[_0x3f496c(0x260)](_0x3f496c(0x200))['find']({'botID':_0xce3bf5})[_0x3f496c(0x23f)](),_0x3ac163;if(_0xfa29d7[_0x3f496c(0x2cc)]===_0x3f496c(0x343))_0x3ac163=_0x3f496c(0x1d5);else{if(_0xfa29d7['status']==='new')_0x3ac163=_0x3f496c(0x2f5);else{if(_0xfa29d7[_0x3f496c(0x2cc)]===_0x3f496c(0x2f5))_0x3ac163='new';else{if(_0xfa29d7[_0x3f496c(0x2cc)]===_0x3f496c(0x1d5))_0x3ac163='enabled';}}}return _0x3ac163;}function updateStatus(_0x42090a,_0x348351){const _0x3f7365=_0x446181;dbConfig[_0x3f7365(0x260)](_0x3f7365(0x200))[_0x3f7365(0x2d0)]({'botID':_0x42090a})[_0x3f7365(0x2cb)]({'status':_0x348351})[_0x3f7365(0x263)](),config=getConfiguration(),io['to']('botmanager')[_0x3f7365(0x30f)](_0x3f7365(0x200),config),broadcastToBots(_0x3f7365(0x200),JSON['stringify'](config));}function updateLive(_0x12c10c,_0x102c2f){const _0x3e31c9=_0x446181;dbConfig['get']('bots')['find']({'botID':_0x12c10c})[_0x3e31c9(0x2cb)]({'live':_0x102c2f})[_0x3e31c9(0x263)](),config=getConfiguration(),io['to'](_0x3e31c9(0x201))[_0x3e31c9(0x30f)](_0x3e31c9(0x200),config),broadcastToBots('bots',JSON[_0x3e31c9(0x293)](config));}function updateBotName(_0x196009,_0x526452){const _0x420d70=_0x446181;dbConfig[_0x420d70(0x260)](_0x420d70(0x200))[_0x420d70(0x2d0)]({'botID':_0x196009})[_0x420d70(0x2cb)]({'botname':_0x526452})[_0x420d70(0x263)](),config=getConfiguration(),io['to'](_0x420d70(0x201))[_0x420d70(0x30f)](_0x420d70(0x200),config),broadcastToBots(_0x420d70(0x200),JSON[_0x420d70(0x293)](config));}function updateBotManager(){const _0x22a2da=_0x446181;config=getConfiguration(),io['to'](_0x22a2da(0x201))[_0x22a2da(0x30f)](_0x22a2da(0x200),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x2f20dd){const _0x2c0762=_0x446181;if(pid[_0x2f20dd])pid[_0x2f20dd][_0x2c0762(0x35d)]({'function':_0x2c0762(0x1bd),'args':null});else{const _0x41e0ce=configpath+_0x2c0762(0x35a)+_0x2f20dd+_0x2c0762(0x26b),_0x5e0aba=fs[_0x2c0762(0x20c)](_0x41e0ce),_0x42740c=JSON[_0x2c0762(0x204)](_0x5e0aba),_0x15b545=_0x42740c['bot'][0x0]['headless'];_0x42740c[_0x2c0762(0x234)][0x0]['headless']=!_0x15b545;const _0x127d74=JSON['stringify'](_0x42740c,null,0x2);fs[_0x2c0762(0x195)](_0x41e0ce,_0x127d74),config=getConfiguration(),io['to'](_0x2c0762(0x201))[_0x2c0762(0x30f)](_0x2c0762(0x200),config),broadcastToBots('bots',JSON[_0x2c0762(0x293)](config));}}function validateTelegram(_0x2dc279){const _0x5bb46f=_0x446181;if(_0x2dc279[_0x5bb46f(0x31d)]['username']!=settings['telegramUsername']&&'@'+_0x2dc279[_0x5bb46f(0x31d)]['username']!=settings[_0x5bb46f(0x236)])return sendTelegram(_0x2dc279[_0x5bb46f(0x26d)]['id'],_0x5bb46f(0x2b0),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x33d7ed=_0x446181;tgBot=new Telegraf(settings['telegramToken']);let _0x155bae='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x155bae+='\x0a',_0x155bae+=_0x33d7ed(0x29b),_0x155bae+='/disable\x20-\x20disable\x20notifications\x0a',_0x155bae+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x155bae+=_0x33d7ed(0x261),_0x155bae+='/on\x20-\x20start\x20bot(s)\x0a',_0x155bae+='/off\x20-\x20stop\x20bot(s)\x0a',_0x155bae+=_0x33d7ed(0x287),_0x155bae+='/names\x20-\x20show\x20bot\x20names\x0a',_0x155bae+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x155bae+=_0x33d7ed(0x367),_0x155bae+=_0x33d7ed(0x35c),_0x155bae+=_0x33d7ed(0x246),_0x155bae+=_0x33d7ed(0x2cd),_0x155bae+=_0x33d7ed(0x297);let _0x29ecf1=_0x33d7ed(0x2af);_0x29ecf1+='\x0a',_0x29ecf1+=_0x155bae,tgBot['catch']((_0x169b16,_0x5c40dd)=>{const _0x472483=_0x33d7ed;logger[_0x472483(0x322)](getTimeStamp()+_0x472483(0x313)),logger['debug'](_0x472483(0x2f7),_0x169b16);}),tgBot[_0x33d7ed(0x33a)](async(_0x51aa40,_0x4efe7f)=>{if(!validateTelegram(_0x51aa40))return;_0x4efe7f();}),tgBot['command']('start',async _0x1d6ca0=>{const _0xd5e4b2=_0x33d7ed;if(!settings[_0xd5e4b2(0x1d3)])updateSetting('telegramChatId',_0x1d6ca0[_0xd5e4b2(0x26d)]['id']);updateSetting(_0xd5e4b2(0x1db),!![]),sendTelegram(_0x1d6ca0['chat']['id'],_0x29ecf1);}),tgBot['command'](_0x33d7ed(0x191),async _0x16d9fe=>{const _0x179362=_0x33d7ed;updateSetting(_0x179362(0x1db),!![]),sendTelegram(_0x16d9fe[_0x179362(0x26d)]['id'],'Notifications\x20enabled');}),tgBot['command']('disable',async _0x266a3=>{const _0x312b1a=_0x33d7ed;sendTelegram(_0x266a3[_0x312b1a(0x26d)]['id'],_0x312b1a(0x2b3)),updateSetting('telegramEnabled',![]);}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x216),async _0x59012d=>{const _0x255a16=_0x33d7ed,_0x5d7435=Markup['inlineKeyboard']([Markup[_0x255a16(0x382)][_0x255a16(0x2ed)]('Orders',_0x255a16(0x275)),Markup['button'][_0x255a16(0x2ed)](_0x255a16(0x375),'config_alerts'),Markup['button'][_0x255a16(0x2ed)](_0x255a16(0x379),_0x255a16(0x283))]);_0x59012d[_0x255a16(0x318)]('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x5d7435);}),tgBot[_0x33d7ed(0x1e3)]('config_orders',async _0xec3329=>{const _0x39119d=_0x33d7ed;_0xec3329[_0x39119d(0x26c)](),updateSetting('telegramEvents',_0x39119d(0x255)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0xec3329[_0x39119d(0x26d)]['id'],_0x39119d(0x333));}),tgBot[_0x33d7ed(0x1e3)](_0x33d7ed(0x337),async _0x5888f1=>{const _0x287693=_0x33d7ed;_0x5888f1['editMessageReplyMarkup'](),updateSetting('telegramEvents','alerts'),updateSetting(_0x287693(0x1db),!![]),await sendTelegram(_0x5888f1['chat']['id'],_0x287693(0x346));}),tgBot[_0x33d7ed(0x1e3)](_0x33d7ed(0x283),async _0xd4c2dd=>{const _0x56158f=_0x33d7ed;_0xd4c2dd[_0x56158f(0x26c)](),updateSetting('telegramEvents',_0x56158f(0x30c)),updateSetting(_0x56158f(0x1db),!![]),await sendTelegram(_0xd4c2dd['chat']['id'],_0x56158f(0x2db));}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x2cc),async _0x401df4=>{const _0xf1f504=_0x33d7ed,_0x74ff28=getBotsWithMode();let _0xd6d5a6=_0xf1f504(0x331);config[_0xf1f504(0x1ec)](_0x21d8c8=>{const _0x16e957=_0xf1f504,_0x520a41=_0x74ff28[_0x16e957(0x2d0)](_0x258450=>_0x258450['botID']==_0x21d8c8[_0x16e957(0x2df)])[_0x16e957(0x1dc)];_0xd6d5a6+=_0x16e957(0x192)+_0x21d8c8[_0x16e957(0x2df)]+':\x20'+_0x21d8c8[_0x16e957(0x2cc)]+_0x16e957(0x1de)+_0x520a41+_0x16e957(0x1de)+_0x21d8c8[_0x16e957(0x248)]+'\x0a';}),_0xd6d5a6+='\x0a',_0xd6d5a6+=_0xf1f504(0x1a2),_0xd6d5a6+=!settings[_0xf1f504(0x1db)]?_0xf1f504(0x31f):_0xf1f504(0x34a),_0xd6d5a6+=settings[_0xf1f504(0x1db)]?settings['telegramEvents']==_0xf1f504(0x30c)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0xf1f504(0x28b)+settings[_0xf1f504(0x19a)]+_0xf1f504(0x36e):'',sendTelegram(_0x401df4[_0xf1f504(0x26d)]['id'],_0xd6d5a6,{'parse_mode':_0xf1f504(0x18c)});}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x237),async _0x4dc0bb=>{const _0x347cde=_0x33d7ed,_0x1696d2=getEnabledBots();if(_0x1696d2[_0x347cde(0x34d)]==0x0)sendTelegram(_0x4dc0bb[_0x347cde(0x26d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x1696d2['length']>0x1)_0x1696d2[_0x347cde(0x273)]({'botID':_0x347cde(0x30c)});let _0x52620c=[],_0x156b11=[];const _0xc19b6a=_0x1696d2[_0x347cde(0x34d)]%0x4==0x0||_0x1696d2[_0x347cde(0x34d)]%0x4==0x3||_0x1696d2['length']%0x3==0x1?0x4:0x3;let _0x56d8eb=0x0;_0x1696d2['forEach']((_0x3c0035,_0x56d903)=>{const _0x1576ea=_0x347cde;if(_0x56d903%_0xc19b6a==0x0)_0x156b11=[];_0x156b11['push'](Markup[_0x1576ea(0x382)][_0x1576ea(0x2ed)](_0x3c0035[_0x1576ea(0x2df)]==_0x1576ea(0x30c)?_0x1576ea(0x22c):_0x1576ea(0x192)+_0x3c0035[_0x1576ea(0x2df)],_0x1576ea(0x356)+_0x3c0035[_0x1576ea(0x2df)])),_0x56d903%_0xc19b6a==0x0&&(_0x52620c[_0x56d8eb]=_0x156b11,_0x56d8eb++);});const _0x45a46a=Markup[_0x347cde(0x364)](_0x52620c);_0x4dc0bb[_0x347cde(0x318)](_0x347cde(0x1c4),_0x45a46a);}}),tgBot[_0x33d7ed(0x1e3)](/restart_(.+)/,async _0x1bc3f2=>{const _0x264937=_0x33d7ed,_0x15b868=_0x1bc3f2[_0x264937(0x2bf)][0x1];_0x1bc3f2[_0x264937(0x26c)](),_0x15b868==_0x264937(0x30c)?config[_0x264937(0x1ec)](_0x15bf4a=>{const _0x4ec595=_0x264937;restartBot(_0x15bf4a[_0x4ec595(0x2df)]);}):restartBot(_0x15b868);}),tgBot['command']('on',async _0x102462=>{const _0x245a2e=_0x33d7ed,_0x1a8430=getDisabledBots();if(_0x1a8430[_0x245a2e(0x34d)]==0x0)sendTelegram(_0x102462[_0x245a2e(0x26d)]['id'],_0x245a2e(0x2e1));else{if(_0x1a8430[_0x245a2e(0x34d)]>0x1)_0x1a8430[_0x245a2e(0x273)]({'botID':'all'});let _0x2f2388=[],_0x4de061=[];const _0x3caeaa=_0x1a8430[_0x245a2e(0x34d)]%0x4==0x0||_0x1a8430[_0x245a2e(0x34d)]%0x4==0x3||_0x1a8430[_0x245a2e(0x34d)]%0x3==0x1?0x4:0x3;let _0x1bcc12=0x0;_0x1a8430[_0x245a2e(0x1ec)]((_0xee0171,_0x48c7ed)=>{const _0x3a080f=_0x245a2e;if(_0x48c7ed%_0x3caeaa==0x0)_0x4de061=[];_0x4de061[_0x3a080f(0x273)](Markup['button']['callback'](_0xee0171['botID']==_0x3a080f(0x30c)?_0x3a080f(0x22c):_0x3a080f(0x192)+_0xee0171[_0x3a080f(0x2df)],_0x3a080f(0x342)+_0xee0171['botID'])),_0x48c7ed%_0x3caeaa==0x0&&(_0x2f2388[_0x1bcc12]=_0x4de061,_0x1bcc12++);});const _0x277085=Markup[_0x245a2e(0x364)](_0x2f2388);_0x102462[_0x245a2e(0x318)](_0x245a2e(0x1a0),_0x277085);}}),tgBot[_0x33d7ed(0x1e3)](/on_(.+)/,async _0x4e24fd=>{const _0xb245b4=_0x33d7ed,_0xd22354=_0x4e24fd[_0xb245b4(0x2bf)][0x1];_0x4e24fd['editMessageReplyMarkup']();if(_0xd22354==_0xb245b4(0x30c)){const _0x20a5d6=getDisabledBots();sendTelegram(_0x4e24fd[_0xb245b4(0x26d)]['id'],_0xb245b4(0x363)),_0x20a5d6['forEach'](_0x3c6634=>{const _0x53059c=_0xb245b4;if(_0x3c6634['botID']!=_0x53059c(0x30c))toggleBot(_0x3c6634['botID'],toggleStatus(_0x3c6634[_0x53059c(0x2df)]),_0x53059c(0x2e5));});}else sendTelegram(_0x4e24fd['chat']['id'],_0xb245b4(0x225)+_0xd22354),toggleBot(_0xd22354,toggleStatus(_0xd22354),_0xb245b4(0x2e5));}),tgBot['command'](_0x33d7ed(0x271),async _0x22a8a8=>{const _0x555990=_0x33d7ed,_0x3c7ac2=getEnabledBots();if(_0x3c7ac2['length']==0x0)sendTelegram(_0x22a8a8[_0x555990(0x26d)]['id'],_0x555990(0x352));else{if(_0x3c7ac2[_0x555990(0x34d)]>0x1)_0x3c7ac2[_0x555990(0x273)]({'botID':_0x555990(0x30c)});let _0x32d1bb=[],_0x10ea8a=[];const _0x2e5276=_0x3c7ac2[_0x555990(0x34d)]%0x4==0x0||_0x3c7ac2[_0x555990(0x34d)]%0x4==0x3||_0x3c7ac2['length']%0x3==0x1?0x4:0x3;let _0x469f70=0x0;_0x3c7ac2[_0x555990(0x1ec)]((_0x56d26b,_0x4e2d16)=>{const _0x2541c8=_0x555990;if(_0x4e2d16%_0x2e5276==0x0)_0x10ea8a=[];_0x10ea8a['push'](Markup['button']['callback'](_0x56d26b[_0x2541c8(0x2df)]==_0x2541c8(0x30c)?_0x2541c8(0x22c):_0x2541c8(0x192)+_0x56d26b[_0x2541c8(0x2df)],'off_'+_0x56d26b['botID'])),_0x4e2d16%_0x2e5276==0x0&&(_0x32d1bb[_0x469f70]=_0x10ea8a,_0x469f70++);});const _0x2ba07a=Markup[_0x555990(0x364)](_0x32d1bb);_0x22a8a8[_0x555990(0x318)](_0x555990(0x1c3),_0x2ba07a);}}),tgBot[_0x33d7ed(0x1e3)](/off_(.+)/,async _0x3418d6=>{const _0x4f2fe2=_0x33d7ed,_0x3b9e7a=_0x3418d6[_0x4f2fe2(0x2bf)][0x1];_0x3418d6[_0x4f2fe2(0x26c)]();if(_0x3b9e7a==_0x4f2fe2(0x30c)){const _0x168bab=getEnabledBots();sendTelegram(_0x3418d6[_0x4f2fe2(0x26d)]['id'],_0x4f2fe2(0x28a)),_0x168bab[_0x4f2fe2(0x1ec)](_0xa4edf0=>{const _0x26feeb=_0x4f2fe2;if(_0xa4edf0[_0x26feeb(0x2df)]!=_0x26feeb(0x30c))toggleBot(_0xa4edf0[_0x26feeb(0x2df)],toggleStatus(_0xa4edf0[_0x26feeb(0x2df)]),_0x26feeb(0x2e5));});}else sendTelegram(_0x3418d6[_0x4f2fe2(0x26d)]['id'],_0x4f2fe2(0x2a6)+_0x3b9e7a),toggleBot(_0x3b9e7a,toggleStatus(_0x3b9e7a),_0x4f2fe2(0x2e5));}),tgBot[_0x33d7ed(0x1fc)]('metrics',async _0x43fb3f=>{const _0x40a7d3=_0x33d7ed,_0x5a0487=getEnabledBots();if(_0x5a0487[_0x40a7d3(0x34d)]==0x0)sendTelegram(_0x43fb3f['chat']['id'],_0x40a7d3(0x352));else{if(_0x5a0487[_0x40a7d3(0x34d)]>0x1){let _0x274ef5=[],_0x1342cf=[];const _0x2514a9=_0x5a0487['length']%0x4==0x0||_0x5a0487[_0x40a7d3(0x34d)]%0x4==0x3||_0x5a0487[_0x40a7d3(0x34d)]%0x3==0x1?0x4:0x3;let _0x6b0b36=0x0;_0x5a0487['forEach']((_0x594da4,_0x5de5a2)=>{const _0x3540cd=_0x40a7d3;if(_0x5de5a2%_0x2514a9==0x0)_0x1342cf=[];_0x1342cf[_0x3540cd(0x273)](Markup[_0x3540cd(0x382)]['callback'](_0x3540cd(0x192)+_0x594da4[_0x3540cd(0x2df)],_0x3540cd(0x34c)+_0x594da4[_0x3540cd(0x2df)])),_0x5de5a2%_0x2514a9==0x0&&(_0x274ef5[_0x6b0b36]=_0x1342cf,_0x6b0b36++);});const _0x200cc1=Markup[_0x40a7d3(0x364)](_0x274ef5);_0x43fb3f[_0x40a7d3(0x318)](_0x40a7d3(0x30b),_0x200cc1);}else{const _0x1ec0a1=_0x5a0487[0x0][_0x40a7d3(0x2df)];if(pid[_0x1ec0a1])pid[_0x1ec0a1][_0x40a7d3(0x35d)]({'function':_0x40a7d3(0x1a5),'args':null});}}}),tgBot[_0x33d7ed(0x1e3)](/metrics_(.+)/,async _0x1987f6=>{const _0x5eae34=_0x33d7ed,_0xc586dc=_0x1987f6[_0x5eae34(0x2bf)][0x1];_0x1987f6[_0x5eae34(0x26c)]();if(pid[_0xc586dc])pid[_0xc586dc][_0x5eae34(0x35d)]({'function':_0x5eae34(0x1a5),'args':null});}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x29a),async _0x1ed529=>{const _0x158390=_0x33d7ed,_0x20496e=getEnabledBots();if(_0x20496e['length']==0x0)sendTelegram(_0x1ed529[_0x158390(0x26d)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x20496e[_0x158390(0x34d)]>0x1){let _0x2c602e=[],_0x218306=[];const _0x56665e=_0x20496e[_0x158390(0x34d)]%0x4==0x0||_0x20496e[_0x158390(0x34d)]%0x4==0x3||_0x20496e[_0x158390(0x34d)]%0x3==0x1?0x4:0x3;let _0x508164=0x0;_0x20496e['forEach']((_0x42e0b3,_0x86e7f9)=>{const _0xd73bbf=_0x158390;if(_0x86e7f9%_0x56665e==0x0)_0x218306=[];_0x218306[_0xd73bbf(0x273)](Markup[_0xd73bbf(0x382)][_0xd73bbf(0x2ed)](_0xd73bbf(0x192)+_0x42e0b3[_0xd73bbf(0x2df)],'portfolio_'+_0x42e0b3['botID'])),_0x86e7f9%_0x56665e==0x0&&(_0x2c602e[_0x508164]=_0x218306,_0x508164++);});const _0x16155e=Markup[_0x158390(0x364)](_0x2c602e);_0x1ed529['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x16155e);}else{const _0x27c664=_0x20496e[0x0][_0x158390(0x2df)];if(pid[_0x27c664])pid[_0x27c664][_0x158390(0x35d)]({'function':_0x158390(0x1f0),'args':null});}}}),tgBot[_0x33d7ed(0x1e3)](/portfolio_(.+)/,async _0x2b08d7=>{const _0xe047f1=_0x33d7ed,_0x3a30db=_0x2b08d7[_0xe047f1(0x2bf)][0x1];_0x2b08d7[_0xe047f1(0x26c)]();if(pid[_0x3a30db])pid[_0x3a30db]['send']({'function':_0xe047f1(0x1f0),'args':null});}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x1cc),async _0xd323bf=>{const _0x1d8830=_0x33d7ed;await getMessages();if(!updateAvailable)sendTelegram(_0xd323bf[_0x1d8830(0x26d)]['id'],_0x1d8830(0x31b));else{if(!validInstallation)sendTelegram(_0xd323bf[_0x1d8830(0x26d)]['id'],_0x1d8830(0x345));else{const _0x76898d=Markup['inlineKeyboard']([Markup[_0x1d8830(0x382)]['callback']('Yes','update_yes'),Markup[_0x1d8830(0x382)][_0x1d8830(0x2ed)]('No',_0x1d8830(0x314))]);_0xd323bf['reply'](_0x1d8830(0x347),_0x76898d);}}}),tgBot['action'](/update_(.+)/,async _0x4f23ba=>{const _0x1927d0=_0x33d7ed,_0x28ef68=_0x4f23ba[_0x1927d0(0x2bf)][0x1];_0x4f23ba['editMessageReplyMarkup'](),_0x28ef68==_0x1927d0(0x308)&&(await sendTelegram(_0x4f23ba[_0x1927d0(0x26d)]['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x1927d0(0x1cc))),_0x28ef68=='no'&&await sendTelegram(_0x4f23ba['chat']['id'],_0x1927d0(0x252));}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x2c9),async _0x56c942=>{const _0x20346c=_0x33d7ed;if(!validInstallation)sendTelegram(_0x56c942[_0x20346c(0x26d)]['id'],_0x20346c(0x28d));else{const _0x5b58ce=Markup[_0x20346c(0x364)]([Markup[_0x20346c(0x382)]['callback']('Yes',_0x20346c(0x1b3)),Markup[_0x20346c(0x382)][_0x20346c(0x2ed)]('No',_0x20346c(0x290))]);_0x56c942['reply'](_0x20346c(0x250),_0x5b58ce),tgBot['on']('callback_query',async _0x28eedc=>{const _0x4cec8=_0x20346c,_0x389edf=_0x28eedc[_0x4cec8(0x295)],_0x3f8424=_0x28eedc[_0x4cec8(0x299)];tgBot['answerCallbackQuery'](_0x28eedc['id'])[_0x4cec8(0x2aa)](async()=>{const _0x5a35de=_0x4cec8;_0x389edf==_0x5a35de(0x308)&&(await sendTelegram(_0x3f8424[_0x5a35de(0x26d)]['id'],_0x5a35de(0x233)),updateBB('reinstall')),_0x389edf=='no'&&await sendTelegram(_0x3f8424[_0x5a35de(0x26d)]['id'],_0x5a35de(0x376));});});}}),tgBot[_0x33d7ed(0x1e3)](/reinstall_(.+)/,async _0x12b8af=>{const _0x5c0fb7=_0x33d7ed,_0x5ce5b4=_0x12b8af[_0x5c0fb7(0x2bf)][0x1];_0x12b8af[_0x5c0fb7(0x26c)](),_0x5ce5b4==_0x5c0fb7(0x308)&&(await sendTelegram(_0x12b8af[_0x5c0fb7(0x26d)]['id'],_0x5c0fb7(0x233)),updateBB('reinstall')),_0x5ce5b4=='no'&&await sendTelegram(_0x12b8af[_0x5c0fb7(0x26d)]['id'],_0x5c0fb7(0x376));}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x1ad),async _0x3c276a=>{const _0x239df3=_0x33d7ed,_0x18eac9=getBotsWithMode();if(_0x18eac9[_0x239df3(0x34d)]==0x0)sendTelegram(_0x3c276a[_0x239df3(0x26d)]['id'],_0x239df3(0x352));else{let _0x64320b=[],_0x5530a6=[];const _0xede80=0x2;let _0x444a04=0x0;_0x18eac9[_0x239df3(0x1ec)]((_0x54d51a,_0x575a13)=>{const _0x4ba9ca=_0x239df3;if(_0x575a13%_0xede80==0x0)_0x5530a6=[];_0x5530a6['push'](Markup[_0x4ba9ca(0x382)]['callback']('Bot\x20'+_0x54d51a['botID']+'\x20('+_0x54d51a['mode']+')',_0x4ba9ca(0x2e9)+_0x54d51a[_0x4ba9ca(0x2df)])),_0x575a13%_0xede80==0x0&&(_0x64320b[_0x444a04]=_0x5530a6,_0x444a04++);});const _0x2741b0=Markup['inlineKeyboard'](_0x64320b);_0x3c276a[_0x239df3(0x318)](_0x239df3(0x25f),_0x2741b0);}}),tgBot[_0x33d7ed(0x1e3)](/toggle_(.+)/,async _0x29cf32=>{const _0xcdf197=_0x33d7ed,_0x25330f=_0x29cf32[_0xcdf197(0x2bf)][0x1];_0x29cf32['editMessageReplyMarkup']();const _0x4fcadd=getBotsWithMode(),_0x1c1b0e=_0x4fcadd['find'](_0x24cbbd=>_0x24cbbd[_0xcdf197(0x2df)]==_0x25330f),_0x430baf=_0x1c1b0e[_0xcdf197(0x1dc)]=='auto'?_0xcdf197(0x238):_0xcdf197(0x193);sendTelegram(_0x29cf32[_0xcdf197(0x26d)]['id'],_0xcdf197(0x294)+_0x25330f+_0xcdf197(0x24b)+_0x430baf+_0xcdf197(0x2d9)),toggleBotMode(_0x25330f);}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x22a),async _0x5999e5=>{const _0x2a2b07=_0x33d7ed;let _0x4db026='';config[_0x2a2b07(0x1ec)](_0x1e0d9d=>{const _0x1a1a1e=_0x2a2b07;_0x4db026+=_0x1a1a1e(0x192)+_0x1e0d9d[_0x1a1a1e(0x2df)]+':\x20'+_0x1e0d9d[_0x1a1a1e(0x2a4)]+'\x0a';}),sendTelegram(_0x5999e5[_0x2a2b07(0x26d)]['id'],_0x4db026,{'parse_mode':_0x2a2b07(0x18c)});}),tgBot[_0x33d7ed(0x1fc)](_0x33d7ed(0x2c6),async _0x20094a=>{const _0x44cedb=_0x33d7ed;sendTelegram(_0x20094a[_0x44cedb(0x26d)]['id'],_0x155bae);}),process[_0x33d7ed(0x25c)](_0x33d7ed(0x20f),()=>tgBot[_0x33d7ed(0x215)](_0x33d7ed(0x20f))),process[_0x33d7ed(0x25c)](_0x33d7ed(0x2ce),()=>tgBot[_0x33d7ed(0x215)](_0x33d7ed(0x2ce))),tgBot[_0x33d7ed(0x272)]();}function disableTelegram(){tgBot&&(tgBot['stop'](),tgBot=null);}async function sendTelegram(_0x437d2e,_0x56d20f,_0x24f7f7){const _0x491672=_0x446181;try{await tgBot['telegram']['sendMessage'](_0x437d2e,_0x56d20f,_0x24f7f7);}catch(_0x2e5bc3){console[_0x491672(0x344)](_0x491672(0x226),_0x2e5bc3);}}function sendTelegramBot(_0x59dca4,_0x5ce1dc){const _0x46ceab=_0x446181;if(settings['telegramEnabled']){if(settings[_0x46ceab(0x19a)]==_0x46ceab(0x30c)||(_0x5ce1dc['type']==_0x46ceab(0x197)||_0x5ce1dc[_0x46ceab(0x1a4)]==_0x46ceab(0x36f)||_0x5ce1dc[_0x46ceab(0x1a4)]==_0x46ceab(0x27e))&&settings[_0x46ceab(0x19a)]==_0x46ceab(0x2f0)||_0x5ce1dc[_0x46ceab(0x1a4)]==_0x46ceab(0x1e9)&&settings[_0x46ceab(0x19a)]==_0x46ceab(0x255)){if(tgBot&&settings[_0x46ceab(0x1d3)]){if(_0x5ce1dc[_0x46ceab(0x2a7)])sendTelegram(settings[_0x46ceab(0x1d3)],_0x5ce1dc[_0x46ceab(0x2a4)]+_0x46ceab(0x2c2)+_0x5ce1dc[_0x46ceab(0x34b)]);else sendTelegram(settings[_0x46ceab(0x1d3)],_0x46ceab(0x192)+_0x59dca4+_0x46ceab(0x2c2)+_0x5ce1dc[_0x46ceab(0x34b)]);}}}}async function sendTelegramMsg(_0x240694,_0x20348d=_0x446181(0x18c)){const _0xda3b06=_0x446181;return settings['telegramEnabled']&&tgBot&&settings[_0xda3b06(0x1d3)]?(await sendTelegram(settings[_0xda3b06(0x1d3)],_0x240694,{'parse_mode':_0x20348d}),!![]):![];}function getDeviceWithIp(_0x10a3dc){const _0x117757=_0x446181;return devices[_0x117757(0x2d0)](_0xb0dc1d=>_0xb0dc1d['ip']===_0x10a3dc);}function temporaryAccess2FA(_0x44c1ff,_0x3e899f){const _0x549c18=_0x446181;let _0x5c0e67=new Date(),_0x3e8c0f=![];if(lastIpApproval){if(_0x5c0e67-lastIpApproval<0x1388)_0x3e8c0f=!![];}lastIpApproval=new Date();if(_0x3e8c0f)return;tgBot&&settings['telegramChatId']&&(sendTelegram(settings[_0x549c18(0x1d3)],_0x549c18(0x36a)+normalizeIP(_0x3e899f)[_0x549c18(0x354)]+'</b>\x20?',{'parse_mode':_0x549c18(0x18c),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x549c18(0x357),'callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}}),tgBot['on'](_0x549c18(0x35f),async _0x394c98=>{const _0x154b52=_0x549c18,_0x48ad14=_0x394c98[_0x154b52(0x295)],_0x2133af=_0x394c98[_0x154b52(0x299)];tgBot[_0x154b52(0x35e)](_0x394c98['id'])[_0x154b52(0x2aa)](async()=>{const _0x248232=_0x154b52;devices[_0x44c1ff][_0x248232(0x37d)]={'clientip':_0x3e899f,'timestamp':new Date()[_0x248232(0x20a)](),'expiry':_0x48ad14},_0x48ad14!='reject'?(await sendTelegram(_0x2133af[_0x248232(0x26d)]['id'],_0x248232(0x332)+_0x48ad14+_0x248232(0x36c),{'parse_mode':_0x248232(0x18c)}),io['to'](_0x44c1ff)[_0x248232(0x30f)]('status',{'access':{'allow':![],'reason':_0x248232(0x2d2),'token':null}})):(await sendTelegram(_0x2133af[_0x248232(0x26d)]['id'],_0x248232(0x2da)),io['to'](_0x44c1ff)[_0x248232(0x30f)](_0x248232(0x2cc),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));});}));}function loginAccess2FA(_0x2116cc,_0x4146d5){const _0x477866=_0x446181;tgBot&&settings[_0x477866(0x1d3)]&&(sendTelegram(settings[_0x477866(0x1d3)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4146d5)[_0x477866(0x354)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x477866(0x2f9),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x477866(0x279)}]]}}),tgBot['on']('callback_query',async _0x1dd64d=>{const _0x4fca21=_0x477866,_0x13ab63=_0x1dd64d[_0x4fca21(0x295)],_0x435afd=_0x1dd64d[_0x4fca21(0x299)];tgBot[_0x4fca21(0x35e)](_0x1dd64d['id'])[_0x4fca21(0x2aa)](async()=>{const _0x1c2f2e=_0x4fca21;devices[_0x2116cc][_0x1c2f2e(0x24f)]={'clientip':_0x4146d5,'timestamp':new Date()[_0x1c2f2e(0x20a)](),'expiry':_0x13ab63},_0x13ab63!='reject'?(await sendTelegram(_0x435afd[_0x1c2f2e(0x26d)]['id'],_0x1c2f2e(0x28e),{'parse_mode':_0x1c2f2e(0x18c)}),io['to'](_0x2116cc)['emit'](_0x1c2f2e(0x2cc),{'access':{'allow':![],'reason':_0x1c2f2e(0x2d2),'token':null}})):(await sendTelegram(_0x435afd[_0x1c2f2e(0x26d)]['id'],_0x1c2f2e(0x28f)),io['to'](_0x2116cc)[_0x1c2f2e(0x30f)](_0x1c2f2e(0x2cc),{'access':{'allow':![],'reason':_0x1c2f2e(0x256),'token':null}}));});}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x1be1fb=_0x446181;return dbConfig[_0x1be1fb(0x260)](_0x1be1fb(0x200))[_0x1be1fb(0x1cb)](_0x1be1fb(0x2df))[_0x1be1fb(0x268)]({'status':'enabled'})[_0x1be1fb(0x23f)]()||[];}function getDisabledBots(){const _0x2d080b=_0x446181;return dbConfig['get']('bots')['sortBy']('botID')[_0x2d080b(0x268)]({'status':'disabled'})[_0x2d080b(0x23f)]()||[];}function getBotAttributes(_0x49c978){const _0x5cb4d4=_0x446181;let _0x504861={};const _0x343929=configpath+'bot-'+_0x49c978+_0x5cb4d4(0x26b),_0x2cff87=fs[_0x5cb4d4(0x1b5)](_0x343929);if(_0x2cff87){const _0x575222=fs[_0x5cb4d4(0x20c)](_0x343929);try{const _0x8f29b4=JSON['parse'](_0x575222),_0x3ec918=_0x8f29b4?_0x8f29b4[_0x5cb4d4(0x234)][0x0][_0x5cb4d4(0x1bf)]:![];_0x504861[_0x5cb4d4(0x1dc)]=_0x3ec918?'auto':_0x5cb4d4(0x238),_0x504861[_0x5cb4d4(0x2a4)]=_0x8f29b4?_0x8f29b4[_0x5cb4d4(0x234)][0x0][_0x5cb4d4(0x2a4)]:'Bot\x20'+_0x49c978;}catch(_0x45e5ca){_0x504861[_0x5cb4d4(0x1dc)]='manual',_0x504861[_0x5cb4d4(0x2a4)]=_0x5cb4d4(0x192)+_0x49c978;}}else _0x504861[_0x5cb4d4(0x1dc)]='manual',_0x504861[_0x5cb4d4(0x2a4)]='Bot\x20'+_0x49c978;return _0x504861;}function getBotsWithMode(){const _0x3b571e=_0x446181,_0x930d3d=dbConfig['get'](_0x3b571e(0x200))[_0x3b571e(0x1cb)](_0x3b571e(0x2df))[_0x3b571e(0x23f)]()||[];return _0x930d3d['forEach'](_0x172a92=>{const _0x31b942=_0x3b571e;let _0x81857f=getBotAttributes(_0x172a92[_0x31b942(0x2df)]);_0x172a92[_0x31b942(0x1dc)]=_0x81857f[_0x31b942(0x1dc)];}),_0x930d3d;}function getBotExchanges(){const _0x3fd558=_0x446181;let _0x4bd963=[];const _0x3ad97a=dbConfig[_0x3fd558(0x260)](_0x3fd558(0x200))[_0x3fd558(0x1cb)](_0x3fd558(0x2df))[_0x3fd558(0x23f)]()||[];_0x3ad97a[_0x3fd558(0x1ec)](_0xe3c0e0=>{const _0x504581=_0x3fd558;if(_0xe3c0e0[_0x504581(0x2cc)]==_0x504581(0x343)){const _0x586815=configpath+'bot-'+_0xe3c0e0[_0x504581(0x2df)]+_0x504581(0x26b),_0x20223b=fs[_0x504581(0x1b5)](_0x586815);let _0x5a154f;if(_0x20223b){const _0x2aaba6=fs[_0x504581(0x20c)](_0x586815);try{const _0x38aabb=JSON[_0x504581(0x204)](_0x2aaba6);_0x5a154f=_0x38aabb?_0x38aabb['bot'][0x0][_0x504581(0x32e)]:null;}catch(_0x165593){}}if(_0x5a154f)_0x4bd963[_0x504581(0x273)](_0x5a154f);}});const _0x35d3bf=[...new Set(_0x4bd963)][_0x3fd558(0x2f4)]();return _0x35d3bf;}async function initUser(){const _0x61f68c=_0x446181;if(!settings[_0x61f68c(0x2a5)]){const _0x1c8831=uuidRandom();mixpanel[_0x61f68c(0x2bc)](_0x1c8831),updateSetting(_0x61f68c(0x2a5),_0x1c8831);}}async function initSecure(){const _0x558993=_0x446181;let _0x3d6e77=getSecure();if(!_0x3d6e77[_0x558993(0x33d)](_0x558993(0x1ce))){let _0x3e739e=await generateKeys();_0x3d6e77['publicKey']=_0x3e739e['publicKey'],_0x3d6e77[_0x558993(0x307)]=_0x3e739e[_0x558993(0x307)],_0x3d6e77['secret']=crypto[_0x558993(0x2bd)](0x20)[_0x558993(0x229)]('hex');;storeSecure(_0x3d6e77);}}function getSettings(){const _0x4f8aec=_0x446181;return dbSettings[_0x4f8aec(0x260)]('settings')['value']()||{};}function getSecure(){const _0x4cb7d0=_0x446181;return dbSecure[_0x4cb7d0(0x260)](_0x4cb7d0(0x220))[_0x4cb7d0(0x23f)]()||{};}function getBlacklist(){const _0x4986bb=_0x446181;return dbSecure[_0x4986bb(0x260)](_0x4986bb(0x1eb))[_0x4986bb(0x23f)]()||[];}function broadcastToBots(_0x4e0fa0,_0x18031a){const _0x3d9f37=_0x446181;config[_0x3d9f37(0x1ec)](_0x4e1e2d=>{const _0x4bfa54=_0x3d9f37;if(_0x4e1e2d['status']==_0x4bfa54(0x343)&&_0x4e1e2d[_0x4bfa54(0x248)]==_0x4bfa54(0x2c8)||_0x4e1e2d[_0x4bfa54(0x2cc)]==_0x4bfa54(0x262)&&_0x4e1e2d[_0x4bfa54(0x248)]==_0x4bfa54(0x2c8)){if(pid[_0x4e1e2d[_0x4bfa54(0x2df)]])pid[_0x4e1e2d[_0x4bfa54(0x2df)]][_0x4bfa54(0x35d)]({[_0x4e0fa0]:_0x18031a});}});}function storeSettings(_0x217054,_0x4cc438=![]){const _0x401198=_0x446181;_0x217054={...settings,..._0x217054};if(_0x4cc438&&_0x217054[_0x401198(0x2c0)]!=_0x401198(0x304)&&_0x217054[_0x401198(0x2c0)]!=_0x401198(0x210)&&_0x217054['bbPassword']!=''){const _0x58d6d6=crypt['decrypt'](secure[_0x401198(0x307)],_0x217054[_0x401198(0x2c0)])[_0x401198(0x299)][_0x401198(0x1be)]('@')[0x0],_0x4aa226=bcrypt[_0x401198(0x37f)](_0x58d6d6,saltRounds);_0x217054={..._0x217054,'bbPassword':_0x4aa226};}if(_0x4cc438&&_0x217054[_0x401198(0x2d1)]!=_0x401198(0x304)&&_0x217054[_0x401198(0x2d1)]!=_0x401198(0x210)&&_0x217054[_0x401198(0x2d1)]!=''){const _0x1e7496=crypt[_0x401198(0x1fd)](secure[_0x401198(0x307)],_0x217054['telegramToken'])[_0x401198(0x299)][_0x401198(0x1be)]('@')[0x0];_0x217054={..._0x217054,'telegramToken':_0x1e7496};}const _0x53543e=_0x217054[_0x401198(0x2d1)]!=_0x401198(0x304)&&_0x217054[_0x401198(0x2d1)]!=settings[_0x401198(0x2d1)]||_0x217054[_0x401198(0x236)]!=settings['telegramUsername'],_0x3913a7=_0x217054['telegramToken']==''||_0x217054['telegramUsername']=='';_0x53543e&&(_0x217054[_0x401198(0x19a)]='all',updateSetting(_0x401198(0x1d3),null));for(const [_0x230b55,_0x640bdd]of Object['entries'](_0x217054)){if(_0x230b55==_0x401198(0x2d1)&&_0x640bdd=='************'){_0x217054[_0x401198(0x2d1)]=settings[_0x401198(0x2d1)];continue;};if(_0x230b55==_0x401198(0x2c0)&&_0x640bdd==_0x401198(0x304)){_0x217054['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x401198(0x1a6)]('settings.'+_0x230b55,_0x640bdd)[_0x401198(0x263)]();}settings=_0x217054,io['to'](_0x401198(0x201))[_0x401198(0x30f)](_0x401198(0x1f5),cleanSettings()),broadcastToBots(_0x401198(0x208),settings[_0x401198(0x208)]),broadcastToBots(_0x401198(0x377),settings['onepagemode']);if(_0x53543e&&!_0x3913a7)initTelegram();if(_0x53543e&&_0x3913a7)disableTelegram();getAllClients()[_0x401198(0x1ec)](_0x3641b3=>{const _0x48d479=_0x401198;getSocket(_0x3641b3['id'])['emit'](_0x48d479(0x2cc),{'access':{'allow':![],'reason':_0x48d479(0x2d2),'token':null}});});}function _0x4419(_0x279446,_0x2d76d0){const _0x59b62b=_0x24fa();return _0x4419=function(_0x10999a,_0x7e1cb2){_0x10999a=_0x10999a-0x18c;let _0x24fab8=_0x59b62b[_0x10999a];return _0x24fab8;},_0x4419(_0x279446,_0x2d76d0);}function updateSetting(_0x33d075,_0x4698ed){const _0x3d8167=_0x446181;dbSettings[_0x3d8167(0x1a6)](_0x3d8167(0x199)+_0x33d075,_0x4698ed)['write'](),settings=getSettings(),io['to'](_0x3d8167(0x201))[_0x3d8167(0x30f)]('settings',cleanSettings());}function storeSecure(_0x546646){const _0x50c6d5=_0x446181;dbSecure[_0x50c6d5(0x260)]('secure')[_0x50c6d5(0x273)](_0x546646)[_0x50c6d5(0x263)](),secure=_0x546646;}function addBlacklist(_0x148d02){const _0x32dca8=_0x446181;cleanBlacklist();let _0x10bec5;devices[_0x148d02][_0x32dca8(0x37d)]?_0x10bec5=Math[_0x32dca8(0x298)](devices[_0x148d02][_0x32dca8(0x37d)][_0x32dca8(0x2b5)],loginExpiry):_0x10bec5=loginExpiry,dbSecure[_0x32dca8(0x260)](_0x32dca8(0x1eb))['push']({'expiry':new Date()['getTime']()+_0x10bec5*0x3c*0x3e8,'token':devices[_0x148d02]['access'][_0x32dca8(0x270)]})[_0x32dca8(0x263)](),blacklist=dbSecure[_0x32dca8(0x260)]('blacklist')[_0x32dca8(0x23f)]();}function cleanBlacklist(){const _0x491d07=_0x446181;let _0x271993=dbSecure[_0x491d07(0x260)](_0x491d07(0x1eb))['cloneDeep']()[_0x491d07(0x23f)](),_0x25c22f=new Date()[_0x491d07(0x20a)]();_0x271993[_0x491d07(0x1ec)](_0x1ca9c1=>{const _0x3b1996=_0x491d07;_0x1ca9c1[_0x3b1996(0x2b5)]<_0x25c22f&&dbSecure[_0x3b1996(0x260)]('blacklist')[_0x3b1996(0x19b)]({'expiry':_0x1ca9c1[_0x3b1996(0x2b5)]})[_0x3b1996(0x263)]();});}function initStates(){const _0x55487f=_0x446181;let _0x494a04=getConfiguration();_0x494a04[_0x55487f(0x1ec)](_0x502499=>{const _0x417748=_0x55487f;_0x502499[_0x417748(0x248)]='stopped';}),storeConfiguration(_0x494a04);}function onKeys(){const _0x5d08b6=new RSA();return new Promise(_0x41d623=>{const _0x59fe67=_0x4419;_0x5d08b6['generateKeyPairAsync']()[_0x59fe67(0x2aa)](_0x5524ee=>{_0x41d623(_0x5524ee);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x26f366=_0x446181;let _0x24aac5=getSettings(),_0x2fef21=![];!_0x24aac5[_0x26f366(0x33d)](_0x26f366(0x285))&&(_0x24aac5['lastmsgtelegram']=0x0,_0x2fef21=!![]);!_0x24aac5[_0x26f366(0x33d)](_0x26f366(0x26a))&&(_0x24aac5[_0x26f366(0x26a)]=0x0,_0x2fef21=!![]);!_0x24aac5[_0x26f366(0x33d)](_0x26f366(0x2c7))&&(_0x24aac5[_0x26f366(0x2c7)]='0.0.0',_0x2fef21=!![]);!_0x24aac5[_0x26f366(0x33d)](_0x26f366(0x377))&&(_0x24aac5[_0x26f366(0x377)]=![],_0x2fef21=!![]);if(_0x2fef21)storeSettings(_0x24aac5);try{fs[_0x26f366(0x369)](configbackuppath,{'withFileTypes':!![]})[_0x26f366(0x1ec)](_0x3a3759=>{const _0x48a3b9=_0x26f366;if(!_0x3a3759[_0x48a3b9(0x29f)]()){if(!_0x3a3759[_0x48a3b9(0x1e2)][_0x48a3b9(0x1e0)](_0x48a3b9(0x1af)))fs['unlinkSync'](configbackuppath+_0x3a3759[_0x48a3b9(0x1e2)]);}else fs['rmSync'](configbackuppath+_0x3a3759[_0x48a3b9(0x1e2)],{'recursive':!![]});});}catch(_0x3c8bbb){logger['debug'](_0x26f366(0x2ee),_0x3c8bbb);}}function storeConfiguration(_0x99003f){const _0x1de3b7=_0x446181;dbConfig[_0x1de3b7(0x260)]('bots')[_0x1de3b7(0x19b)]()[_0x1de3b7(0x263)](),dbConfig['get'](_0x1de3b7(0x200))[_0x1de3b7(0x273)](..._0x99003f)[_0x1de3b7(0x263)](),config=_0x99003f;}function resetPassword(){const _0x279051=_0x446181;tgBot&&settings['telegramChatId']&&(sendTelegram(settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x279051(0x18c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x279051(0x308)},{'text':'no','callback_data':'no'}]]}}),tgBot['on']('callback_query',async _0x1d8ac1=>{const _0x294002=_0x279051,_0x5ccd48=_0x1d8ac1[_0x294002(0x295)],_0x590009=_0x1d8ac1['message'];tgBot['answerCallbackQuery'](_0x1d8ac1['id'])[_0x294002(0x2aa)](async()=>{const _0x49fb3a=_0x294002;if(_0x5ccd48!='no'){const _0x1e24de=0xf,_0x255fc9=_0x49fb3a(0x2f2),_0x3138b3=Array[_0x49fb3a(0x31d)](crypto[_0x49fb3a(0x1d8)](new Uint32Array(_0x1e24de)))[_0x49fb3a(0x213)](_0x4c81bc=>_0x255fc9[_0x4c81bc%_0x255fc9[_0x49fb3a(0x34d)]])[_0x49fb3a(0x2e3)](''),_0x2dd919=bcrypt[_0x49fb3a(0x37f)](_0x3138b3,saltRounds);storeSettings({'bbPassword':_0x2dd919}),await sendTelegram(_0x590009[_0x49fb3a(0x26d)]['id'],_0x49fb3a(0x34e)+_0x3138b3,{'parse_mode':_0x49fb3a(0x18c)});}else await sendTelegram(_0x590009[_0x49fb3a(0x26d)]['id'],_0x49fb3a(0x312));});}));}async function confirmRestore(_0x495557,_0x55ab79){const _0xd8b0d6=_0x446181;io['to'](_0xd8b0d6(0x201))[_0xd8b0d6(0x30f)]('notification',_0xd8b0d6(0x2ad),_0xd8b0d6(0x27e)),tgBot&&settings['telegramChatId']&&(await sendTelegram(settings['telegramChatId'],_0xd8b0d6(0x1fa),{'parse_mode':_0xd8b0d6(0x18c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0xd8b0d6(0x308)},{'text':'no','callback_data':'no'}]]}}),tgBot['on'](_0xd8b0d6(0x35f),async _0xd32587=>{const _0x4489a1=_0xd8b0d6,_0x78bfe3=_0xd32587[_0x4489a1(0x295)],_0x54384b=_0xd32587[_0x4489a1(0x299)];tgBot[_0x4489a1(0x35e)](_0xd32587['id'])[_0x4489a1(0x2aa)](async()=>{const _0xe1ec63=_0x4489a1;_0x78bfe3==_0xe1ec63(0x308)?(await sendTelegram(_0x54384b[_0xe1ec63(0x26d)]['id'],_0xe1ec63(0x242),{'parse_mode':_0xe1ec63(0x18c)}),unzipFile(_0x495557,_0x55ab79)):(logger[_0xe1ec63(0x325)](_0xe1ec63(0x1b1)),await sendTelegram(_0x54384b[_0xe1ec63(0x26d)]['id'],_0xe1ec63(0x1b1)));});}));}function getServerTime(){const _0x406165=_0x446181,_0x5844cc=new Date();return _0x5844cc['getFullYear']()+'/'+(_0x5844cc[_0x406165(0x32b)]()+0x1)['toString']()[_0x406165(0x296)](0x2,'0')+'/'+_0x5844cc[_0x406165(0x309)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x5844cc[_0x406165(0x288)]()[_0x406165(0x229)]()[_0x406165(0x296)](0x2,'0')+':'+_0x5844cc[_0x406165(0x2a9)]()[_0x406165(0x229)]()[_0x406165(0x296)](0x2,'0')+':'+_0x5844cc[_0x406165(0x22b)]()[_0x406165(0x229)]()[_0x406165(0x296)](0x2,'0');}function getTimeStamp(){const _0x9c56d8=_0x446181,_0x54a788=shiftedTime();return _0x54a788[_0x9c56d8(0x27f)]()+'/'+(_0x54a788[_0x9c56d8(0x32b)]()+0x1)[_0x9c56d8(0x229)]()[_0x9c56d8(0x296)](0x2,'0')+'/'+_0x54a788[_0x9c56d8(0x309)]()[_0x9c56d8(0x229)]()[_0x9c56d8(0x296)](0x2,'0')+'\x20'+_0x54a788[_0x9c56d8(0x288)]()['toString']()[_0x9c56d8(0x296)](0x2,'0')+':'+_0x54a788[_0x9c56d8(0x2a9)]()[_0x9c56d8(0x229)]()['padStart'](0x2,'0')+':'+_0x54a788['getSeconds']()[_0x9c56d8(0x229)]()[_0x9c56d8(0x296)](0x2,'0');}function getCleanTimeStamp(){const _0x487f44=_0x446181,_0x4e9125=shiftedTime();return _0x4e9125['getFullYear']()+(_0x4e9125[_0x487f44(0x32b)]()+0x1)['toString']()[_0x487f44(0x296)](0x2,'0')+_0x4e9125[_0x487f44(0x309)]()[_0x487f44(0x229)]()[_0x487f44(0x296)](0x2,'0')+'-'+_0x4e9125[_0x487f44(0x288)]()['toString']()[_0x487f44(0x296)](0x2,'0')+_0x4e9125[_0x487f44(0x2a9)]()['toString']()[_0x487f44(0x296)](0x2,'0')+_0x4e9125[_0x487f44(0x22b)]()[_0x487f44(0x229)]()[_0x487f44(0x296)](0x2,'0');}function shiftedTime(){const _0x1ae8f6=_0x446181,_0x3d264a=new Date();let _0x22dff8=_0x3d264a;if(settings[_0x1ae8f6(0x208)]&&settings['timeshift']!==0x0)_0x22dff8=fns[_0x1ae8f6(0x22d)](_0x3d264a,{'hours':settings[_0x1ae8f6(0x208)]});return _0x22dff8;}function startScheduler(){const _0x3afe58=_0x446181,_0x2c4cc7=new Date()['getUTCHours'](),_0x3c9e8e=shiftedTime()[_0x3afe58(0x288)]();_0x3c9e8e==0x4&&backupConfigFiles();_0x3c9e8e==0x0&&rotateLogFiles();_0x2c4cc7%0x6==0x0&&triggerAnalytics();_0x2c4cc7%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x4f9d86){const _0x1afa3a=_0x446181;logger[_0x1afa3a(0x325)](_0x1afa3a(0x2ba)+_0x4f9d86);const _0x463e15=getBotsWithMode();_0x463e15[_0x1afa3a(0x34d)]>0x0?confirmRestore(configbackuppath,_0x4f9d86):unzipFile(configbackuppath,_0x4f9d86);}async function getBackupFiles(_0x1aa2f0=null){const _0x3b3e57=_0x446181;let _0x2ec5db=[],_0x4aa595=fs[_0x3b3e57(0x369)](configbackuppath,{'withFileTypes':!![]});_0x4aa595[_0x3b3e57(0x2f4)]((_0x8cc326,_0xa38563)=>_0x8cc326[_0x3b3e57(0x1e2)]<_0xa38563[_0x3b3e57(0x1e2)]?0x1:_0xa38563[_0x3b3e57(0x1e2)]<_0x8cc326[_0x3b3e57(0x1e2)]?-0x1:0x0),_0x4aa595[_0x3b3e57(0x1ec)](_0x307e7e=>{const _0x414ca2=_0x3b3e57;if(!_0x307e7e['isDirectory']()&&_0x307e7e[_0x414ca2(0x1e2)]['startsWith'](_0x414ca2(0x1af))&&_0x307e7e[_0x414ca2(0x1e2)][_0x414ca2(0x1b7)](_0x414ca2(0x30a))){const _0x2b1c85=formatDate(fs[_0x414ca2(0x244)](configbackuppath+_0x307e7e[_0x414ca2(0x1e2)])[_0x414ca2(0x23a)]);_0x2ec5db[_0x414ca2(0x273)]({'name':_0x307e7e[_0x414ca2(0x1e2)],'mtime':_0x2b1c85});}});if(_0x1aa2f0)io['to'](_0x1aa2f0)[_0x3b3e57(0x30f)](_0x3b3e57(0x291),_0x2ec5db);else return _0x2ec5db;}async function backupConfigFiles(){const _0x343310=_0x446181;await zipFiles('backup-full');const _0x138177=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x343310(0x32c),configbackuppath+(_0x343310(0x1af)+_0x138177+_0x343310(0x30a)));let _0x7a9e1f=fs[_0x343310(0x369)](configbackuppath,{'withFileTypes':!![]});_0x7a9e1f[_0x343310(0x2f4)]((_0x20a63b,_0x38ee44)=>_0x20a63b[_0x343310(0x1e2)]<_0x38ee44[_0x343310(0x1e2)]?0x1:_0x38ee44[_0x343310(0x1e2)]<_0x20a63b[_0x343310(0x1e2)]?-0x1:0x0),_0x7a9e1f[_0x343310(0x34d)]>maxBackups&&fs[_0x343310(0x366)](configbackuppath+_0x7a9e1f[_0x7a9e1f['length']-0x1]['name']);}function rotateLogFiles(){const _0x1e001f=_0x446181,_0x5f43a6=fs[_0x1e001f(0x244)](logspath+'output-000.log'),_0x12812d=_0x5f43a6['size']/0x400;if(_0x12812d>0x64){let _0x4d2d63=fs[_0x1e001f(0x369)](logspath,{'withFileTypes':!![]});_0x4d2d63['sort']((_0x1517dc,_0x2b76de)=>_0x1517dc[_0x1e001f(0x1e2)]<_0x2b76de[_0x1e001f(0x1e2)]?0x1:_0x2b76de[_0x1e001f(0x1e2)]<_0x1517dc[_0x1e001f(0x1e2)]?-0x1:0x0),_0x4d2d63[_0x1e001f(0x1ec)](_0x3c65a1=>{const _0x1516cc=_0x1e001f;if(_0x3c65a1[_0x1516cc(0x1e2)]==_0x1516cc(0x350))fs[_0x1516cc(0x1fb)](logspath+_0x3c65a1[_0x1516cc(0x1e2)],logspath+'output-003.log');if(_0x3c65a1[_0x1516cc(0x1e2)]==_0x1516cc(0x33f))fs[_0x1516cc(0x1fb)](logspath+_0x3c65a1['name'],logspath+_0x1516cc(0x350));_0x3c65a1[_0x1516cc(0x1e2)]==_0x1516cc(0x324)&&(fs[_0x1516cc(0x1fb)](logspath+_0x3c65a1['name'],logspath+_0x1516cc(0x33f)),fs[_0x1516cc(0x195)](logspath+_0x3c65a1[_0x1516cc(0x1e2)],''));});}}async function zipFiles(_0x3a95c8){const _0x52b568=_0x446181;let _0xbee4da;if(_0x3a95c8==_0x52b568(0x1e1))_0xbee4da=logspath;if(_0x3a95c8==_0x52b568(0x284))_0xbee4da=configpath;if(_0x3a95c8=='backup-full')_0xbee4da=configpath;let _0x52893b=fs[_0x52b568(0x369)](_0xbee4da,{'withFileTypes':!![]});const _0x6ad474=new require(_0x52b568(0x2ab))();_0x52893b[_0x52b568(0x1ec)](_0x18eccd=>{const _0x837fbf=_0x52b568;if(!_0x18eccd['isDirectory']()){let _0x17214e=fs[_0x837fbf(0x20c)](_0xbee4da+_0x18eccd[_0x837fbf(0x1e2)]);if(_0x3a95c8=='backup'){const _0xec58dc=/^bot-[0-9]{3}-config.json$/,_0x5f147a=_0xec58dc[_0x837fbf(0x34f)](_0x18eccd['name']);if(_0x5f147a){const _0x591621=JSON[_0x837fbf(0x204)](_0x17214e);if(_0x591621['bot'][0x0]){_0x591621[_0x837fbf(0x234)][0x0][_0x837fbf(0x2fc)]='***',_0x591621[_0x837fbf(0x234)][0x0][_0x837fbf(0x381)]='***';if(_0x591621[_0x837fbf(0x234)][0x0][_0x837fbf(0x26f)])_0x591621['bot'][0x0]['apiPassword']=_0x837fbf(0x210);}_0x17214e=JSON[_0x837fbf(0x293)](_0x591621,null,0x2);}if(_0x18eccd[_0x837fbf(0x1e2)]=='bb-settings.json'){const _0x35c1b=JSON['parse'](_0x17214e);if(_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x2b6)])_0x35c1b['settings'][_0x837fbf(0x2b6)]=![];if(_0x35c1b[_0x837fbf(0x1f5)]['bbPassword'])_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x2c0)]=_0x837fbf(0x210);if(_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x2d1)])_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x2d1)]=_0x837fbf(0x210);if(_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x1d3)])_0x35c1b[_0x837fbf(0x1f5)][_0x837fbf(0x1d3)]=null;_0x17214e=JSON[_0x837fbf(0x293)](_0x35c1b,null,0x2);}if(_0x18eccd[_0x837fbf(0x1e2)]!=_0x837fbf(0x300))_0x6ad474[_0x837fbf(0x1df)](_0x18eccd[_0x837fbf(0x1e2)],_0x17214e);}else _0x6ad474[_0x837fbf(0x1df)](_0x18eccd[_0x837fbf(0x1e2)],_0x17214e);}});const _0x3c95ef=_0x6ad474['generate']({'base64':![],'compression':'DEFLATE'});fs['writeFileSync'](zippath+(_0x3a95c8+_0x52b568(0x30a)),_0x3c95ef,_0x52b568(0x2a2));}async function unzipFile(_0x1b6444,_0x5a864a){const _0x534bc1=_0x446181;fs[_0x534bc1(0x369)](configpath,{'withFileTypes':!![]})[_0x534bc1(0x1ec)](_0x49e809=>{const _0x4142f3=_0x534bc1;if(!_0x49e809['isDirectory']())fs[_0x4142f3(0x190)](configpath+_0x49e809[_0x4142f3(0x1e2)]);});const _0xdab3e4=fs['readFileSync'](_0x1b6444+_0x5a864a,_0x534bc1(0x2a2)),_0x3bd996=new require(_0x534bc1(0x2ab))(_0xdab3e4,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x3bd996[_0x534bc1(0x2c3)])[_0x534bc1(0x1ec)](_0x1dba44=>{const _0x37d2cb=_0x534bc1,_0x255c14=_0x3bd996[_0x37d2cb(0x2c3)][_0x1dba44];fs[_0x37d2cb(0x195)](configpath+_0x255c14[_0x37d2cb(0x1e2)],_0x255c14[_0x37d2cb(0x196)]);}),fs[_0x534bc1(0x369)](temppath,{'withFileTypes':!![]})[_0x534bc1(0x1ec)](_0x2d5474=>{const _0x4f081b=_0x534bc1;if(!_0x2d5474[_0x4f081b(0x29f)]())fs[_0x4f081b(0x190)](temppath+_0x2d5474[_0x4f081b(0x1e2)]);}),logger[_0x534bc1(0x325)](_0x534bc1(0x205)),process[_0x534bc1(0x35d)]({'restore':!![]},_0x3e0d91=>{});}async function getPublicIp(){const _0x36b72d=_0x446181;try{const _0x385b11=await axios[_0x36b72d(0x260)](_0x36b72d(0x21e));publicip=_0x385b11[_0x36b72d(0x295)]['ip'];}catch(_0x5d646d){}}async function triggerAnalytics(){const _0x3281df=_0x446181;if(!publicip)await getPublicIp();const _0x511717=getBotsWithMode();let _0x27094f=0x0;_0x511717[_0x3281df(0x1ec)](_0x5d5736=>{const _0x4923a7=_0x3281df;if(_0x5d5736[_0x4923a7(0x2cc)]===_0x4923a7(0x343))_0x27094f++;});const _0x22afc8=getBotExchanges();mixpanel['track'](_0x3281df(0x249),{'distinct_id':settings[_0x3281df(0x2a5)],'ip':publicip,'version':serverversion,'numbots':_0x511717[_0x3281df(0x34d)],'numbotsenabled':_0x27094f,'exchanges':_0x22afc8,'environment':environment});}async function getMessages(){const _0x2a15e2=_0x446181,_0x4548e7=_0x2a15e2(0x24d),_0x199aa5=new GraphQLClient(_0x4548e7),_0x5619e2={'authorization':_0x2a15e2(0x2ae)},_0x872e41=serverversion[_0x2a15e2(0x1be)]('.'),_0x5969b3=_0x872e41[0x0]+'.'+_0x872e41[0x1],_0x54eb24=Math[_0x2a15e2(0x2c1)](settings[_0x2a15e2(0x285)],settings[_0x2a15e2(0x26a)]),_0x382027={'last':parseInt(_0x54eb24),'bbm':_0x5969b3},_0x4038bd=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x39232d;try{_0x39232d=await _0x199aa5[_0x2a15e2(0x33e)](_0x4038bd,_0x382027,_0x5619e2);}catch(_0x2f2e2c){}if(_0x39232d&&_0x39232d['messages']){let _0x127cc7=settings[_0x2a15e2(0x285)];newMessages=[];for(const _0x116c92 of _0x39232d[_0x2a15e2(0x25a)]){newMessages[_0x2a15e2(0x273)](_0x116c92);let _0x340ae5=![];_0x116c92[_0x2a15e2(0x2b7)]&&(updateSetting(_0x2a15e2(0x2c7),_0x116c92[_0x2a15e2(0x2b7)]),_0x340ae5=isNewerVersion(serverversion,_0x116c92['bbvNew'])||serverversion==_0x116c92[_0x2a15e2(0x2b7)]);if(!_0x340ae5&&_0x116c92['number']>_0x127cc7){if(_0x116c92['bbvReceive']===_0x2a15e2(0x264)||serverversion[_0x2a15e2(0x1e0)](_0x116c92[_0x2a15e2(0x253)])){let _0x290810=''+_0x116c92[_0x2a15e2(0x247)]+'\x0a\x0a'+_0x116c92[_0x2a15e2(0x299)];const _0x128258=await sendTelegramMsg(toTelegramMarkdown(_0x290810),_0x2a15e2(0x373));if(_0x128258)_0x127cc7=_0x116c92['number'];}}}updateAvailable=isNewerVersion(settings[_0x2a15e2(0x2c7)],serverversion),updateSetting(_0x2a15e2(0x285),_0x127cc7),emitMessages();}}function emitMessages(){const _0x18574b=_0x446181,_0x10b5e7=settings['lastmsgemitted'];let _0x477bd3=[];newMessages[_0x18574b(0x1ec)](_0x19a99c=>{const _0x560b21=_0x18574b;_0x19a99c[_0x560b21(0x28c)]>_0x10b5e7&&_0x477bd3[_0x560b21(0x273)](_0x19a99c);}),_0x477bd3[_0x18574b(0x34d)]>0x0&&getAllClients()[_0x18574b(0x1ec)](_0x21bff5=>{getSocket(_0x21bff5['id'])['emit']('message',_0x477bd3);});}function confirmMessage(_0x1cba74){const _0x39892c=_0x446181;updateSetting(_0x39892c(0x26a),Number(_0x1cba74));}function isNewerVersion(_0x69baab,_0x30f3e3){const _0x3bb4fe=_0x446181,_0x3fa78b=_0x30f3e3[_0x3bb4fe(0x1be)]('.'),_0x487855=_0x69baab[_0x3bb4fe(0x1be)]('.');for(var _0x90a0ef=0x0;_0x90a0ef<_0x487855['length'];_0x90a0ef++){const _0x305d55=~~_0x487855[_0x90a0ef],_0x21d015=~~_0x3fa78b[_0x90a0ef];if(_0x305d55>_0x21d015)return!![];if(_0x305d55<_0x21d015)return![];}return![];}function toTelegramMarkdown(_0x144a42){const _0x2137f1=_0x446181,_0x2464e1=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x2f545d=/\*{2}(.+?)\*{2}/gim;return _0x144a42=_0x144a42[_0x2137f1(0x31c)](_0x2464e1,_0x2137f1(0x32d))[_0x2137f1(0x31c)](_0x2f545d,_0x2137f1(0x1ff)),_0x144a42;}async function validateConfigFile(){const _0x3cc0a5=_0x446181,_0x27257a=dbConfig['get'](_0x3cc0a5(0x200))['sortBy'](_0x3cc0a5(0x2df))[_0x3cc0a5(0x23f)]()||[];if(_0x27257a['length']==0x0){let _0x3e987f=0x0,_0x132663=[];const _0x385cab=/^bot-([0-9]{3})-config.json$/,_0x42e9a9=fs[_0x3cc0a5(0x369)](configpath);_0x42e9a9[_0x3cc0a5(0x1ec)](_0x34da62=>{const _0x578ad9=_0x3cc0a5,_0x426b86=_0x385cab[_0x578ad9(0x374)](_0x34da62);if(_0x426b86){const _0x1d573f=_0x426b86[0x1];let _0x1e5df3=getBotAttributes(_0x1d573f);_0x132663[_0x578ad9(0x273)]({'botID':_0x1d573f,'botname':_0x1e5df3[_0x578ad9(0x2a4)],'status':_0x578ad9(0x1d5),'live':'stopped'}),_0x3e987f++;}}),_0x3e987f!=0x0&&(dbConfig['get'](_0x3cc0a5(0x200))['assign'](_0x132663)['write'](),config=_0x132663,restoredConfigFile=_0x3e987f);}}async function restoreConfigNotify(_0x1dbc93){const _0x15f820=_0x446181;let _0xaaa7cd;if(restoredConfigFile==0x1)_0xaaa7cd=_0x15f820(0x26e);else _0xaaa7cd=_0x15f820(0x2d5);if(_0x1dbc93)io['to'](_0x15f820(0x201))[_0x15f820(0x30f)]('notification',_0xaaa7cd);else{logger['simple'](_0x15f820(0x1e6)),logger[_0x15f820(0x322)](_0xaaa7cd),logger[_0x15f820(0x322)](_0x15f820(0x1e6)),logger['simple']('');if(tgBot&&settings[_0x15f820(0x1d3)]&&settings[_0x15f820(0x19a)]!=_0x15f820(0x255))sendTelegram(settings[_0x15f820(0x1d3)],_0x15f820(0x25b)+_0xaaa7cd);}}function validateCredentials(_0x15f763,_0x30d64a){const _0x2b9222=_0x446181;if(_0x15f763['username']==settings[_0x2b9222(0x214)]&&bcrypt[_0x2b9222(0x2d4)](_0x15f763[_0x2b9222(0x2d3)],settings['bbPassword'])){if(settings[_0x2b9222(0x194)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x2f1d61=generateLoginToken(_0x30d64a);return{'allow':!![],'reason':_0x2b9222(0x2ca),'token':_0x2f1d61};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x573fe0){const _0x38c37a=generateLoginToken(_0x573fe0);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x38c37a};}function validateAccess(_0x17e2ac,_0x2d1522,_0x14326e){const _0x3e59c4=_0x446181,_0x1d8a58=_0x14326e?_0x14326e:devices[_0x2d1522]['ip'];let _0x5686cb;const _0x2fab94=_0xa6aa2b=>{const _0x32e6c6=_0x4419;if(settings[_0x32e6c6(0x2b6)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2d1522)){const _0x299138=generateLoginToken(_0x2d1522);return{'allow':!![],'reason':_0x32e6c6(0x274),'token':_0x299138};}else return{'allow':![],'reason':_0x32e6c6(0x334),'token':null};}else return _0x5686cb=validToken(_0xa6aa2b,_0x2d1522),_0x5686cb[_0x32e6c6(0x33d)](_0x32e6c6(0x27e))?{'allow':!![],'reason':_0x32e6c6(0x289),'token':_0xa6aa2b}:{'allow':![],'reason':_0x32e6c6(0x334),'token':null};}else return{'allow':!![],'reason':_0x32e6c6(0x280),'token':null};};if(settings[_0x3e59c4(0x1b2)]){let _0xc5c28f=[...settings['whitelist'],'::1',_0x3e59c4(0x2dd),_0x3e59c4(0x1d0)];if(_0xc5c28f[_0x3e59c4(0x269)](_0x1d8a58))return _0x2fab94(_0x17e2ac);else{_0x5686cb=validToken(_0x17e2ac,_0x2d1522);if(_0x5686cb[_0x3e59c4(0x33d)](_0x3e59c4(0x27e)))return _0x2fab94(_0x17e2ac);else{if(telegramIpApproved(_0x2d1522)){const _0x423b77=generateToken(_0x2d1522);return _0x5686cb=_0x2fab94(_0x17e2ac),_0x5686cb[_0x3e59c4(0x1f3)]?{'allow':!![],'reason':_0x3e59c4(0x1cf),'token':_0x423b77}:_0x5686cb;}else return settings[_0x3e59c4(0x217)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x3e59c4(0x241),'token':null};}}}else return _0x2fab94(_0x17e2ac);}function timelyDecrypt(_0x4b9b8d,_0x56c222=!![]){const _0x67486e=_0x446181;if(_0x4b9b8d)try{const _0x130caa=crypt[_0x67486e(0x1fd)](secure[_0x67486e(0x307)],_0x4b9b8d)['message'],_0x5f51c7=_0x130caa[_0x67486e(0x1be)]('@')[0x0],_0x4001ba=_0x130caa[_0x67486e(0x1be)]('@')[0x1],_0x2f9b61=new Date()['getTime']();if(_0x56c222){if(_0x2f9b61-_0x4001ba<maxSecretAge*0x3e8)return _0x5f51c7;else return![];}else return _0x5f51c7;}catch(_0x11d5de){return![];}else return![];}const validToken=(_0x42f4b7,_0x24eee0)=>{const _0x1e1251=_0x446181,_0x24042b=devices[_0x24eee0]['ip'];if(!_0x42f4b7)return{'error':'No\x20authentication\x20token'};for(let _0x3d9a6d of blacklist){if(_0x3d9a6d['token']==_0x42f4b7)return{'error':_0x1e1251(0x22e)};}let _0x4afed1;try{_0x4afed1=jwt['verify'](_0x42f4b7,secure[_0x1e1251(0x1ce)]+_0x24eee0);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x4afed1[_0x1e1251(0x33d)](_0x1e1251(0x21a))&&!_0x4afed1[_0x1e1251(0x33d)](_0x1e1251(0x265))||!_0x4afed1[_0x1e1251(0x33d)]('exp'))return{'error':_0x1e1251(0x329)};if(!_0x4afed1[_0x1e1251(0x33d)]('username')&&_0x4afed1[_0x1e1251(0x33d)](_0x1e1251(0x21a))){const {clientip:_0x56b496}=_0x4afed1;return _0x24042b==_0x56b496?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1e1251(0x1ae)};}else{if(_0x4afed1['hasOwnProperty'](_0x1e1251(0x265))&&_0x4afed1[_0x1e1251(0x33d)](_0x1e1251(0x21a))){const {username:_0x140c8c,clientip:_0x381570}=_0x4afed1;return settings[_0x1e1251(0x214)]==_0x140c8c&&_0x24042b==_0x381570?{'success':_0x1e1251(0x1a9)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x1b694d=>{const _0x3dcbfd=_0x446181;if(_0x1b694d){const _0x356ec5=devices[_0x1b694d]['ip'];return jwt[_0x3dcbfd(0x1c7)]({'username':settings[_0x3dcbfd(0x214)],'clientip':_0x356ec5},secure[_0x3dcbfd(0x1ce)]+_0x1b694d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x26a878=>{const _0x49f7d0=_0x446181;if(_0x26a878){const _0x177a48=devices[_0x26a878]['ip'];return jwt[_0x49f7d0(0x1c7)]({'clientip':_0x177a48},secure[_0x49f7d0(0x1ce)]+_0x26a878,{'expiresIn':devices[_0x26a878]['telegramIpApproval'][_0x49f7d0(0x2b5)]*0x3c});}else return![];},telegramIpApproved=_0x58f456=>{const _0x39a15a=_0x446181;let _0x485a4e=![];return devices[_0x58f456]['telegramIpApproval']&&devices[_0x58f456][_0x39a15a(0x37d)][_0x39a15a(0x2b5)]!=_0x39a15a(0x279)&&(_0x485a4e=devices[_0x58f456]['telegramIpApproval']['clientip']==devices[_0x58f456]['ip']&&new Date()[_0x39a15a(0x20a)]()-devices[_0x58f456][_0x39a15a(0x37d)]['timestamp']<devices[_0x58f456]['telegramIpApproval'][_0x39a15a(0x2b5)]*0x3c*0x3e8),_0x485a4e;},telegram2FaApproved=_0x4e02a6=>{const _0x8fdb7e=_0x446181;let _0x47f2eb=![];return devices[_0x4e02a6][_0x8fdb7e(0x24f)]&&devices[_0x4e02a6]['telegram2FaApproval'][_0x8fdb7e(0x2b5)]!=_0x8fdb7e(0x279)&&(_0x47f2eb=devices[_0x4e02a6]['telegram2FaApproval'][_0x8fdb7e(0x21a)]==devices[_0x4e02a6]['ip']&&new Date()[_0x8fdb7e(0x20a)]()-devices[_0x4e02a6][_0x8fdb7e(0x24f)][_0x8fdb7e(0x286)]<devices[_0x4e02a6][_0x8fdb7e(0x24f)][_0x8fdb7e(0x2b5)]*0x3c*0x3e8),_0x47f2eb;},normalizeIP=_0x1f6f7f=>{const _0x2baa1e=_0x446181;let _0x129410=null,_0x4a82ea=null;if(ipaddr[_0x2baa1e(0x1e7)](_0x1f6f7f)){const _0x37582f=ipaddr[_0x2baa1e(0x204)](_0x1f6f7f);_0x37582f[_0x2baa1e(0x267)]()===_0x2baa1e(0x36b)?(_0x37582f[_0x2baa1e(0x1c0)]()&&(_0x129410=_0x37582f[_0x2baa1e(0x19f)]()['toString']()),_0x4a82ea=_0x37582f[_0x2baa1e(0x229)]()):(_0x129410=_0x37582f[_0x2baa1e(0x229)](),_0x4a82ea=_0x37582f[_0x2baa1e(0x372)]()[_0x2baa1e(0x229)]());}return{'show':_0x129410?_0x129410:_0x4a82ea,'store':_0x4a82ea};};function formatDate(_0x227d3b){const _0x7ccbfb=_0x446181;return _0x227d3b[_0x7ccbfb(0x27f)]()+'/'+(_0x227d3b[_0x7ccbfb(0x32b)]()+0x1)[_0x7ccbfb(0x229)]()[_0x7ccbfb(0x296)](0x2,'0')+'/'+_0x227d3b[_0x7ccbfb(0x309)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x227d3b[_0x7ccbfb(0x288)]()['toString']()[_0x7ccbfb(0x296)](0x2,'0')+':'+_0x227d3b['getMinutes']()[_0x7ccbfb(0x229)]()[_0x7ccbfb(0x296)](0x2,'0')+':'+_0x227d3b['getSeconds']()[_0x7ccbfb(0x229)]()[_0x7ccbfb(0x296)](0x2,'0');}function sleep(_0x5b9157){return new Promise(_0x1899e0=>setTimeout(_0x1899e0,_0x5b9157));}