const _0x51b267=_0x5c06;(function(_0x377111,_0x5d725f){const _0x499f5d=_0x5c06,_0x2ffa67=_0x377111();while(!![]){try{const _0x387b1d=parseInt(_0x499f5d(0x283))/0x1*(-parseInt(_0x499f5d(0x1de))/0x2)+parseInt(_0x499f5d(0x292))/0x3*(-parseInt(_0x499f5d(0x161))/0x4)+parseInt(_0x499f5d(0x15f))/0x5+parseInt(_0x499f5d(0x1b3))/0x6+parseInt(_0x499f5d(0x236))/0x7*(parseInt(_0x499f5d(0x192))/0x8)+parseInt(_0x499f5d(0x284))/0x9*(-parseInt(_0x499f5d(0x24c))/0xa)+parseInt(_0x499f5d(0x242))/0xb*(parseInt(_0x499f5d(0x254))/0xc);if(_0x387b1d===_0x5d725f)break;else _0x2ffa67['push'](_0x2ffa67['shift']());}catch(_0x7cca2b){_0x2ffa67['push'](_0x2ffa67['shift']());}}}(_0x3a20,0x626e8));const _0xce71d9=function(){let _0xeecd6c=!![];return function(_0x18c329,_0x41e071){const _0xbeac95=_0xeecd6c?function(){const _0x461fbd=_0x5c06;if(_0x41e071){const _0x8063ec=_0x41e071[_0x461fbd(0x1fa)](_0x18c329,arguments);return _0x41e071=null,_0x8063ec;}}:function(){};return _0xeecd6c=![],_0xbeac95;};}(),_0x546e11=_0xce71d9(this,function(){const _0x315659=_0x5c06;return _0x546e11[_0x315659(0x1c7)]()[_0x315659(0x1a7)]('(((.+)+)+)+$')[_0x315659(0x1c7)]()[_0x315659(0x1c6)](_0x546e11)[_0x315659(0x1a7)](_0x315659(0x294));});_0x546e11();'use strict';process[_0x51b267(0x27c)][_0x51b267(0x2a4)]=0x1;const childProcess=require(_0x51b267(0x19e)),FileSync=require(_0x51b267(0x243)),fs=require('fs'),fns=require('date-fns'),low=require(_0x51b267(0x21f)),path=require(_0x51b267(0x1ed)),crypto=require(_0x51b267(0x158)),Crypt=require(_0x51b267(0x253))[_0x51b267(0x172)],RSA=require('hybrid-crypto-js')[_0x51b267(0x1f6)],bcrypt=require(_0x51b267(0x154)),jwt=require(_0x51b267(0x1ba)),analyticsLib=require(_0x51b267(0x16b))['default'],googleAnalytics=require(_0x51b267(0x1e2))[_0x51b267(0x26a)],ipaddr=require(_0x51b267(0x2a1)),argv=require(_0x51b267(0x20d))(process[_0x51b267(0x171)]['slice'](0x2))['argv'],PORT=argv[_0x51b267(0x1b1)]||_0x51b267(0x150),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x51b267(0x20e)](PORT))return console[_0x51b267(0x206)](_0x51b267(0x268)+PORT+_0x51b267(0x19c)),process[_0x51b267(0x1e4)](0x1);const HOST=argv[_0x51b267(0x246)]||null,userID=argv[_0x51b267(0x1d6)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x51b267(0x223),configfile=_0x51b267(0x189),settingsfile='bb-settings.json',securefile=_0x51b267(0x228);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x51b267(0x266)+userID+'/':bbpath+_0x51b267(0x266),configbackuppath=configpath+_0x51b267(0x220);!fs[_0x51b267(0x1b9)](configpath)&&fs[_0x51b267(0x25b)](configpath);!fs[_0x51b267(0x1b9)](configbackuppath)&&fs['mkdirSync'](configbackuppath);function _0x5c06(_0x56c2c6,_0x176f49){const _0x1847e3=_0x3a20();return _0x5c06=function(_0x546e11,_0xce71d9){_0x546e11=_0x546e11-0x150;let _0x3a200=_0x1847e3[_0x546e11];return _0x3a200;},_0x5c06(_0x56c2c6,_0x176f49);}const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x51b267(0x190)]({'bots':[]})[_0x51b267(0x1ae)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})[_0x51b267(0x1ae)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x51b267(0x1ae)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x51b267(0x291)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x51b267(0x25d))[_0x51b267(0x257)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x51b267(0x207))[_0x51b267(0x19b)](app);app[_0x51b267(0x1e3)](express['static'](path['join'](__dirname,bbpath2,_0x51b267(0x1a1)))),app[_0x51b267(0x1e3)](express['static'](path['join'](__dirname,bbpath2,'build'))),app[_0x51b267(0x25c)]('/',function(_0x5a8088,_0x5291c2){const _0x3db177=_0x51b267;_0x5291c2[_0x3db177(0x258)](path[_0x3db177(0x164)](__dirname,bbpath2,_0x3db177(0x1a1),'index.html'));}),app[_0x51b267(0x25c)](_0x51b267(0x25e),function(_0x36eb3c,_0x2650f6){const _0x1fdff0=_0x51b267;_0x2650f6[_0x1fdff0(0x258)](path[_0x1fdff0(0x164)](__dirname,bbpath2,_0x1fdff0(0x1bd),_0x1fdff0(0x248)));}),app[_0x51b267(0x25c)](_0x51b267(0x1ea),(_0x313dce,_0x3d347d)=>{const _0xf2ef48=_0x51b267;_0x3d347d[_0xf2ef48(0x258)](path[_0xf2ef48(0x164)](__dirname,bbpath2,'build',_0xf2ef48(0x248)));}),app['get'](_0x51b267(0x18d),(_0x50af3f,_0x387e25)=>{const _0x16a538=_0x51b267;_0x387e25[_0x16a538(0x258)](path[_0x16a538(0x164)](__dirname,bbpath2,_0x16a538(0x1bd),'index.html'));}),app[_0x51b267(0x25c)](_0x51b267(0x225),(_0x3f096a,_0x10179c)=>{const _0x14e4dc=_0x51b267;_0x10179c['sendFile'](path[_0x14e4dc(0x164)](__dirname,bbpath2,_0x14e4dc(0x1bd),'index.html'));}),app[_0x51b267(0x25c)](_0x51b267(0x17a),(_0x4618d3,_0x281611)=>{const _0x39d982=_0x51b267;_0x281611[_0x39d982(0x258)](path[_0x39d982(0x164)](__dirname,bbpath2,_0x39d982(0x1bd),_0x39d982(0x248)));}),app[_0x51b267(0x25c)](_0x51b267(0x299),(_0x173cf5,_0x27c5ac)=>{const _0x144b53=_0x51b267;_0x27c5ac[_0x144b53(0x258)](path[_0x144b53(0x164)](__dirname,bbpath2,'build',_0x144b53(0x248)));}),app[_0x51b267(0x25c)](_0x51b267(0x22f),(_0x54c4cc,_0x51cdb2)=>{const _0x1eb892=_0x51b267;_0x51cdb2[_0x1eb892(0x258)](path[_0x1eb892(0x164)](__dirname,bbpath2,_0x1eb892(0x1bd),_0x1eb892(0x248)));});if(HOST)http['listen'](PORT,HOST);else http[_0x51b267(0x24b)](PORT);const io=require(_0x51b267(0x1e7))(http,{}),analytics=analyticsLib({'app':_0x51b267(0x230),'plugins':[googleAnalytics({'trackingId':_0x51b267(0x24d)})]}),TelegramBot=require(_0x51b267(0x288));let tgBot;if(settings['telegramToken']&&settings[_0x51b267(0x21e)]!=''&&settings[_0x51b267(0x1be)]&&settings[_0x51b267(0x1be)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x5afa92=_0x51b267;console[_0x5afa92(0x206)](''),console['log']('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x5afa92(0x206)](_0x5afa92(0x293));if(config['length']!=0x0)config['forEach'](_0x246279=>{const _0x5b6988=_0x5afa92;if(_0x246279[_0x5b6988(0x1f2)]==_0x5b6988(0x23c)||_0x246279[_0x5b6988(0x1f2)]==_0x5b6988(0x178))logging(_0x5b6988(0x170)+_0x246279[_0x5b6988(0x175)]+_0x5b6988(0x241)+_0x246279['botname']),startBot([_0x246279[_0x5b6988(0x175)],userID],{'cwd':bbpath},function(_0x33f3d0){if(_0x33f3d0)logging(_0x33f3d0);});else(_0x246279[_0x5b6988(0x1f2)]=='disabled'||_0x246279['status']==_0x5b6988(0x227))&&logging(_0x5b6988(0x1b0)+_0x246279[_0x5b6988(0x175)]+_0x5b6988(0x241)+_0x246279[_0x5b6988(0x17f)]);});else!newBot&&console[_0x5afa92(0x206)](_0x5afa92(0x269));if(newBot)addBot();console['log']('-----------------------------------------------------------------------------------'),console[_0x5afa92(0x206)]('');}function startSocket(){io['on']('connection',_0x238562=>{const _0x141ab9=_0x5c06;let _0xb1829b,_0x54c207,_0x25466b,_0x242a48,_0x391b59;const _0x571f1c=_0x238562[_0x141ab9(0x1ca)][_0x141ab9(0x193)][_0x141ab9(0x29f)];_0x54c207=_0x571f1c[_0x141ab9(0x184)](/bot[0-9]{3}/);if(_0x54c207)_0x25466b=_0x54c207[0x0]['match'](/[0-9]{3}/);if(_0x25466b)_0xb1829b=_0x25466b[0x0];else _0xb1829b=_0x141ab9(0x260);const _0x2057b2=_0x238562[_0x141ab9(0x1ca)][_0x141ab9(0x157)]['encryptedUuid'];if(!_0x2057b2)_0x238562[_0x141ab9(0x1f1)](_0x141ab9(0x1f2),{'publicKey':secure[_0x141ab9(0x256)]});else{_0x242a48=timelyDecrypt(_0x2057b2,![]);if(!_0x242a48)logging(_0x141ab9(0x277));else{_0x391b59=normalizeIP(_0x238562[_0x141ab9(0x153)][_0x141ab9(0x23d)])[_0x141ab9(0x168)];if(!devices[_0x242a48])devices[_0x242a48]={'uuid':_0x242a48,'access':{'token':null}};devices[_0x242a48]['ip']=_0x391b59;const _0x321df3=addClient(_0x238562['id'],_0x242a48,_0xb1829b);setAccess(_0x321df3),_0x238562['on'](_0x141ab9(0x160),_0x45b8e8=>{const _0x1393fe=_0x141ab9,_0x503597=timelyDecrypt(_0x45b8e8['password']);if(_0x503597){_0x45b8e8={'username':_0x45b8e8[_0x1393fe(0x249)],'password':_0x503597},devices[_0x242a48][_0x1393fe(0x22a)]=validateCredentials(_0x45b8e8,_0x242a48);if(devices[_0x242a48]['access'][_0x1393fe(0x1f9)]==![]&&devices[_0x242a48][_0x1393fe(0x22a)]['reason']==_0x1393fe(0x16a))_0x238562['emit'](_0x1393fe(0x1f2),{'access':devices[_0x242a48][_0x1393fe(0x22a)]}),loginAccess2FA(_0x242a48,_0x391b59);else{if(devices[_0x242a48][_0x1393fe(0x22a)]['allow']==![]&&devices[_0x242a48][_0x1393fe(0x22a)]['reason']=='invalid\x20credentials')_0x238562['emit'](_0x1393fe(0x1f2),{'access':devices[_0x242a48][_0x1393fe(0x22a)]});else devices[_0x242a48]['access']['allow']&&devices[_0x242a48][_0x1393fe(0x22a)][_0x1393fe(0x162)]==_0x1393fe(0x1f7)&&(getClientsWithUuid(_0x242a48)[_0x1393fe(0x180)](_0x4d5400=>{setAccess(_0x4d5400);}),setTokenRefresh(_0x242a48),setSessionTimeout(_0x1393fe(0x160),_0x242a48));}}else logging(_0x1393fe(0x270));}),_0x238562['on'](_0x141ab9(0x214),()=>{resetPassword();}),_0x238562['on'](_0x141ab9(0x166),_0x4fd39d=>{removeClient(_0x238562['id']);});}}});}function initClient(_0x5ede01){const _0x40be08=_0x51b267;if(_0x5ede01!=_0x40be08(0x260)&&config[_0x40be08(0x1ab)]!=''){if(pid[_0x5ede01])pid[_0x5ede01][_0x40be08(0x18b)]({'function':_0x40be08(0x1a0),'args':null});}}function getSocket(_0x2b8828){const _0x5d5397=_0x51b267;return io[_0x5d5397(0x1bc)][_0x5d5397(0x1bc)][_0x5d5397(0x25c)](_0x2b8828);}function setAccess(_0x1ec511){const _0x1bc01a=_0x51b267,_0x1b5b42=getSocket(_0x1ec511['id']),_0x12e665=_0x1ec511[_0x1bc01a(0x1c3)],_0x430af6=_0x1ec511[_0x1bc01a(0x1a5)];devices[_0x12e665]['access']=validateAccess(devices[_0x12e665][_0x1bc01a(0x22a)][_0x1bc01a(0x1f4)],_0x12e665),_0x1b5b42['join'](_0x12e665);if(devices[_0x12e665][_0x1bc01a(0x22a)][_0x1bc01a(0x1f9)]){_0x1b5b42[_0x1bc01a(0x164)](_0x430af6);if(_0x430af6=='botmanager')initializeSocketBotManager(_0x1b5b42);else initializeSocketBot(_0x1b5b42);initClient(_0x430af6);}devices[_0x12e665]['access'][_0x1bc01a(0x1f4)]&&devices[_0x12e665]['access']['reason']==_0x1bc01a(0x18f)&&setSessionTimeout(_0x1bc01a(0x1e6),_0x12e665),devices[_0x12e665][_0x1bc01a(0x22a)][_0x1bc01a(0x1f4)]&&devices[_0x12e665]['access'][_0x1bc01a(0x162)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x1bc01a(0x160),_0x12e665),_0x1b5b42['emit'](_0x1bc01a(0x1f2),{'status':_0x1ec511[_0x1bc01a(0x156)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x12e665][_0x1bc01a(0x22a)],'externalip':devices[_0x12e665]['ip'],'publicKey':secure[_0x1bc01a(0x256)]}),devices[_0x12e665]['access']['allow']==![]&&devices[_0x12e665][_0x1bc01a(0x22a)][_0x1bc01a(0x162)]=='2FA\x20required'&&temporaryAccess2FA(_0x12e665,devices[_0x12e665]['ip']);}function setSessionTimeout(_0x2ca05d,_0x319fb4){const _0x1d5f0b=_0x51b267;let _0x3a8dc4;if(_0x2ca05d==_0x1d5f0b(0x160))_0x3a8dc4=loginExpiry*0x3c*0x3e8;else _0x3a8dc4=devices[_0x319fb4][_0x1d5f0b(0x213)][_0x1d5f0b(0x1c9)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x319fb4][_0x1d5f0b(0x213)][_0x1d5f0b(0x18e)]);if(devices[_0x319fb4][_0x1d5f0b(0x22e)])clearTimeout(devices[_0x319fb4][_0x1d5f0b(0x22e)]);devices[_0x319fb4][_0x1d5f0b(0x22e)]=setTimeout(()=>{const _0x2d9a9f=_0x1d5f0b;if(devices[_0x319fb4][_0x2d9a9f(0x187)])clearTimeout(devices[_0x319fb4]['pidRefreshToken']);removeSocketListeners(_0x319fb4),addBlacklist(_0x319fb4),devices[_0x319fb4][_0x2d9a9f(0x213)]=null,devices[_0x319fb4][_0x2d9a9f(0x231)]=null,devices[_0x319fb4][_0x2d9a9f(0x22a)][_0x2d9a9f(0x1f4)]=null,devices[_0x319fb4]['access']=validateAccess(devices[_0x319fb4][_0x2d9a9f(0x22a)][_0x2d9a9f(0x1f4)],_0x319fb4),!(devices[_0x319fb4]['access'][_0x2d9a9f(0x1f9)]&&devices[_0x319fb4][_0x2d9a9f(0x22a)]['reason']==_0x2d9a9f(0x198))&&(_0x2ca05d==_0x2d9a9f(0x160)?io['to'](_0x319fb4)['emit'](_0x2d9a9f(0x1f2),{'access':{'allow':![],'reason':_0x2d9a9f(0x181),'token':null}}):io['to'](_0x319fb4)[_0x2d9a9f(0x1f1)](_0x2d9a9f(0x1f2),{'access':{'allow':![],'reason':_0x2d9a9f(0x26d),'token':null}})),devices[_0x319fb4][_0x2d9a9f(0x22a)][_0x2d9a9f(0x1f4)]=null;},_0x3a8dc4);}function setTokenRefresh(_0xd965b3){const _0x350cbd=_0x51b267;if(devices[_0xd965b3]['pidRefreshToken'])clearTimeout(devices[_0xd965b3][_0x350cbd(0x187)]);devices[_0xd965b3][_0x350cbd(0x187)]=setTimeout(()=>{const _0x5a67df=_0x350cbd;getClientsWithUuid(_0xd965b3)['length']!=0x0?(devices[_0xd965b3][_0x5a67df(0x22a)]=refreshToken(_0xd965b3),io['to'](_0xd965b3)[_0x5a67df(0x1f1)]('status',{'status':_0x5a67df(0x16e),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xd965b3][_0x5a67df(0x22a)],'externalip':devices[_0xd965b3]['ip'],'publicKey':secure[_0x5a67df(0x256)]}),setTokenRefresh(_0xd965b3)):clearTimeout(devices[_0xd965b3][_0x5a67df(0x187)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x53ef77){const _0x1b3d48=_0x51b267,_0x24bf69=getClient(_0x53ef77['id'])['uuid'];_0x53ef77['emit']('bots',config),_0x53ef77[_0x1b3d48(0x1f1)](_0x1b3d48(0x205),cleanSettings()),_0x53ef77['on'](_0x1b3d48(0x1f3),_0x1a3626=>{const _0x4f8ded=_0x1b3d48;if(validateAccess(_0x1a3626,_0x24bf69)[_0x4f8ded(0x1f9)])addBot();else logging(_0x4f8ded(0x23f));}),_0x53ef77['on'](_0x1b3d48(0x209),(_0x2a3943,_0x11a671)=>{const _0x5ae891=_0x1b3d48;if(validateAccess(_0x11a671,_0x24bf69)[_0x5ae891(0x1f9)])toggleBot(_0x2a3943[_0x5ae891(0x175)],_0x2a3943['status'],_0x2a3943['live']);else logging(_0x5ae891(0x296));}),_0x53ef77['on']('delete-bot',(_0x2a30e5,_0x5365f2)=>{const _0x5a919a=_0x1b3d48;if(validateAccess(_0x5365f2,_0x24bf69)[_0x5a919a(0x1f9)])deleteBot(_0x2a30e5);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x53ef77['on'](_0x1b3d48(0x233),(_0x15629c,_0xe479d)=>{const _0x5d0823=_0x1b3d48;if(validateAccess(_0xe479d,_0x24bf69)[_0x5d0823(0x1f9)])storeSettings(_0x15629c,!![]);else logging(_0x5d0823(0x273));}),_0x53ef77['on'](_0x1b3d48(0x218),(_0x6a58b4,_0x3197ae)=>{if(validateAccess(_0x3197ae,_0x24bf69)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x53ef77['on'](_0x1b3d48(0x19f),_0x1d151a=>{const _0x412456=_0x1b3d48;if(validateAccess(_0x1d151a,_0x24bf69)[_0x412456(0x1f9)]){if(devices[_0x24bf69][_0x412456(0x187)])clearTimeout(devices[_0x24bf69][_0x412456(0x187)]);if(devices[_0x24bf69][_0x412456(0x22e)])clearTimeout(devices[_0x24bf69]['pidExpireLogin']);removeSocketListeners(getClient(_0x53ef77['id'])[_0x412456(0x1c3)]),addBlacklist(_0x24bf69),devices[_0x24bf69][_0x412456(0x213)]=null,devices[_0x24bf69][_0x412456(0x231)]=null,devices[_0x24bf69]['access'][_0x412456(0x1f4)]=null,io['to'](getClient(_0x53ef77['id'])[_0x412456(0x1c3)])[_0x412456(0x1f1)](_0x412456(0x1f2),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x412456(0x25a));});}function initializeSocketBot(_0x1ad9a0){const _0x4abb0a=_0x51b267,_0x23d778=getClient(_0x1ad9a0['id'])['bot'],_0x434cb0=getClient(_0x1ad9a0['id'])[_0x4abb0a(0x1c3)];_0x1ad9a0['on'](_0x4abb0a(0x20c),(_0x306310,_0x1cc1fd)=>{const _0x4dba5a=_0x4abb0a;if(validateAccess(_0x1cc1fd,_0x434cb0)[_0x4dba5a(0x1f9)]){if(pid[_0x23d778])pid[_0x23d778]['send']({'function':'emitHistory','args':_0x306310});}else logging(_0x4dba5a(0x17c));}),_0x1ad9a0['on']('get-portfolio',(_0x120348,_0x4f7abe)=>{const _0xcdde27=_0x4abb0a;if(validateAccess(_0x4f7abe,_0x434cb0)['allow']){if(pid[_0x23d778])pid[_0x23d778][_0xcdde27(0x18b)]({'function':_0xcdde27(0x1da),'args':_0x120348});}else logging(_0xcdde27(0x26b));}),_0x1ad9a0['on'](_0x4abb0a(0x177),(_0x2403e8,_0x2fb7b0)=>{const _0x314e4e=_0x4abb0a;if(validateAccess(_0x2fb7b0,_0x434cb0)[_0x314e4e(0x1f9)]){if(pid[_0x23d778])pid[_0x23d778]['send']({'function':_0x314e4e(0x27d),'args':_0x2403e8});}else logging(_0x314e4e(0x252));}),_0x1ad9a0['on'](_0x4abb0a(0x23e),(_0x4c3ce1,_0x337715)=>{const _0x153fa6=_0x4abb0a;if(validateAccess(_0x337715,_0x434cb0)[_0x153fa6(0x1f9)]){if(pid[_0x23d778])pid[_0x23d778]['send']({'function':_0x153fa6(0x1c8),'args':_0x4c3ce1});}else logging(_0x153fa6(0x1b7));}),_0x1ad9a0['on'](_0x4abb0a(0x237),_0x1bffde=>{const _0x29a3f7=_0x4abb0a;if(validateAccess(_0x1bffde,_0x434cb0)[_0x29a3f7(0x1f9)]){if(pid[_0x23d778])pid[_0x23d778]['send']({'function':_0x29a3f7(0x204),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x1ad9a0['on'](_0x4abb0a(0x1f0),(_0x2acf55,_0x25c711)=>{const _0x234447=_0x4abb0a;if(validateAccess(_0x25c711,_0x434cb0)[_0x234447(0x1f9)]){if(pid[_0x23d778])pid[_0x23d778][_0x234447(0x18b)]({'function':_0x234447(0x272),'args':_0x2acf55});}else logging(_0x234447(0x1e9));}),_0x1ad9a0['on'](_0x4abb0a(0x245),_0x516a5f=>{const _0x5c9843=_0x4abb0a;if(validateAccess(_0x516a5f,_0x434cb0)['allow']){if(pid[_0x23d778])pid[_0x23d778][_0x5c9843(0x18b)]({'function':_0x5c9843(0x276),'args':null});}else logging(_0x5c9843(0x28d));}),_0x1ad9a0['on'](_0x4abb0a(0x19f),_0x4d6c90=>{const _0x3eecbd=_0x4abb0a;if(validateAccess(_0x4d6c90,_0x434cb0)[_0x3eecbd(0x1f9)]){if(devices[_0x434cb0][_0x3eecbd(0x187)])clearTimeout(devices[_0x434cb0][_0x3eecbd(0x187)]);if(devices[_0x434cb0][_0x3eecbd(0x22e)])clearTimeout(devices[_0x434cb0][_0x3eecbd(0x22e)]);removeSocketListeners(getClient(_0x1ad9a0['id'])[_0x3eecbd(0x1c3)]),addBlacklist(_0x434cb0),devices[_0x434cb0][_0x3eecbd(0x213)]=null,devices[_0x434cb0][_0x3eecbd(0x231)]=null,devices[_0x434cb0]['access']['token']=null,io['to'](getClient(_0x1ad9a0['id'])[_0x3eecbd(0x1c3)])[_0x3eecbd(0x1f1)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x3eecbd(0x25a));});}function removeSocketListeners(_0x21c9b5){const _0x2e1625=_0x51b267;getClientsWithUuid(_0x21c9b5)[_0x2e1625(0x180)](_0x56a0c8=>{const _0x189a0b=_0x2e1625;getSocket(_0x56a0c8['id'])[_0x189a0b(0x202)]();});}function cleanSettings(){const _0x179994=_0x51b267;let _0x399dae=settings;return settings[_0x179994(0x21e)]&&settings[_0x179994(0x21e)]!=''&&(_0x399dae={..._0x399dae,'telegramToken':_0x179994(0x1d2)}),settings[_0x179994(0x271)]&&settings['bbPassword']!=''&&(_0x399dae={..._0x399dae,'bbPassword':_0x179994(0x1d2)}),_0x399dae;}function updateBB(){process['send']({'update':!![]});}function startBot(_0x5343a8,_0x23b8c4,_0x5ec88d){const _0x3a8330=_0x51b267;let _0x1e3ca2=![];const _0x45b97c=_0x5343a8[0x0];_0x23b8c4={..._0x23b8c4,'stdio':[_0x3a8330(0x1dd),_0x3a8330(0x1dd),_0x3a8330(0x1dd),_0x3a8330(0x23a)]},pid[_0x45b97c]=childProcess['fork'](botfile,_0x5343a8,_0x23b8c4),pid[_0x45b97c]['on'](_0x3a8330(0x250),_0x325fb0=>{const _0x233852=_0x3a8330;switch(Object[_0x233852(0x185)](_0x325fb0)[0x0]){case _0x233852(0x17f):updateBotName(_0x45b97c,_0x325fb0[_0x233852(0x17f)]);break;case _0x233852(0x1f2):updateStatus(_0x45b97c,_0x325fb0[_0x233852(0x1f2)]);break;case _0x233852(0x2a3):updateLive(_0x45b97c,_0x325fb0[_0x233852(0x2a3)]);break;case _0x233852(0x1cd):updateLive(_0x45b97c,_0x325fb0[_0x233852(0x1cd)]),io['to'](_0x45b97c)['emit'](_0x233852(0x1f2),{'access':{'allow':![],'reason':_0x233852(0x174),'token':null}});break;case _0x233852(0x195):_0x325fb0[_0x233852(0x195)]=='restart'&&stopBot(_0x45b97c);_0x325fb0[_0x233852(0x195)]==_0x233852(0x1b4)&&toggleBot(_0x45b97c,_0x233852(0x21a),_0x233852(0x188));break;case _0x233852(0x1c5):sendTelegram(_0x45b97c,_0x325fb0[_0x233852(0x1c5)]);break;case _0x233852(0x240):io['to'](_0x45b97c)[_0x233852(0x1f1)](_0x325fb0['function'],_0x325fb0[_0x233852(0x285)]);break;}}),pid[_0x45b97c]['on']('error',function(_0x32f7c3){if(_0x1e3ca2)return;_0x1e3ca2=!![],_0x5ec88d(_0x32f7c3);}),pid[_0x45b97c]['on'](_0x3a8330(0x1e4),function(_0x1c64c0){const _0x2d0014=_0x3a8330;if(_0x1e3ca2)return;_0x1e3ca2=!![],_0x5ec88d(null);const _0x5014c9=dbConfig[_0x2d0014(0x25c)]('bots')[_0x2d0014(0x219)]({'botID':_0x45b97c})[_0x2d0014(0x24a)]();_0x5014c9&&(_0x5014c9[_0x2d0014(0x1f2)]=='enabled'||_0x5014c9[_0x2d0014(0x1f2)]==_0x2d0014(0x178))&&(updateLive(_0x45b97c,'stopped'),logging(_0x2d0014(0x286)+_0x45b97c),startBot([_0x45b97c,userID],{'cwd':bbpath},function(_0x5ee7f2){if(_0x5ee7f2)logging(_0x5ee7f2);}));});}function stopBot(_0x3cde2f){const _0x55c1f8=_0x51b267;getClientsWithBotID(_0x3cde2f)[_0x55c1f8(0x180)](_0xddb20a=>{const _0x414e38=_0x55c1f8;getSocket(_0xddb20a['id'])[_0x414e38(0x166)](!![]),removeClient(_0xddb20a['id']);});if(pid[_0x3cde2f])pid[_0x3cde2f][_0x55c1f8(0x1b4)]();}function addBot(){const _0x5c4c1e=_0x51b267;let _0x5a3ddf;for(let _0x34a658=0x1;_0x34a658<0x3e9;_0x34a658++){_0x5a3ddf=_0x34a658['toString']()[_0x5c4c1e(0x221)](0x3,'0');let _0x482e16=config[_0x5c4c1e(0x219)](_0x235636=>_0x235636[_0x5c4c1e(0x175)]==_0x5a3ddf);if(!_0x482e16)break;}if(_0x5a3ddf===_0x5c4c1e(0x152)){logging(_0x5c4c1e(0x20f));return;}logging(_0x5c4c1e(0x2a0)+_0x5a3ddf),dbConfig['get'](_0x5c4c1e(0x27f))['push']({'botID':_0x5a3ddf,'botname':_0x5c4c1e(0x247)+_0x5a3ddf,'status':_0x5c4c1e(0x178),'live':''})[_0x5c4c1e(0x1ae)](),startBot([_0x5a3ddf,userID],{'cwd':bbpath},function(_0x1d679c){if(_0x1d679c)logging(_0x1d679c);}),config=getConfiguration(),io['to'](_0x5c4c1e(0x260))['emit'](_0x5c4c1e(0x27f),config);}function deleteBot(_0x3d3b14){const _0x12a3ee=_0x51b267;getClientsWithBotID(_0x3d3b14)[_0x12a3ee(0x180)](_0x4e9595=>{const _0x291177=_0x12a3ee;getSocket(_0x4e9595['id'])[_0x291177(0x166)](!![]),removeClient(_0x4e9595['id']);}),dbConfig[_0x12a3ee(0x25c)](_0x12a3ee(0x27f))[_0x12a3ee(0x22c)]({'botID':_0x3d3b14})[_0x12a3ee(0x1ae)](),logging(_0x12a3ee(0x191)+_0x3d3b14),stopBot(_0x3d3b14);try{fs['unlinkSync'](path[_0x12a3ee(0x164)](configpath,_0x12a3ee(0x179)+_0x3d3b14+_0x12a3ee(0x17b))),fs['unlinkSync'](path[_0x12a3ee(0x164)](configpath,'bot-'+_0x3d3b14+_0x12a3ee(0x1fd))),fs[_0x12a3ee(0x26f)](path[_0x12a3ee(0x164)](configpath,_0x12a3ee(0x179)+_0x3d3b14+_0x12a3ee(0x1d5))),fs['unlinkSync'](path[_0x12a3ee(0x164)](configpath,'bot-'+_0x3d3b14+_0x12a3ee(0x29d)));}catch(_0x406bef){if(_0x406bef)logging(_0x12a3ee(0x21b),_0x406bef);}config=getConfiguration(),io['to'](_0x12a3ee(0x260))[_0x12a3ee(0x1f1)]('bots',config);}function toggleBot(_0x49bb91,_0x4584d9,_0x120f4f){const _0x4f9838=_0x51b267;dbConfig[_0x4f9838(0x25c)](_0x4f9838(0x27f))[_0x4f9838(0x219)]({'botID':_0x49bb91})[_0x4f9838(0x19d)]({'status':_0x4584d9})['assign']({'live':_0x120f4f})['write']();if(_0x4584d9==_0x4f9838(0x23c)||_0x4584d9==_0x4f9838(0x178))logging(_0x4f9838(0x1b8)+_0x49bb91),startBot([_0x49bb91,userID],{'cwd':bbpath},function(_0x1836e5){if(_0x1836e5)logging(_0x1836e5);});else(_0x4584d9==_0x4f9838(0x21a)||_0x4584d9==_0x4f9838(0x227))&&(logging('disabled\x20Bot\x20'+_0x49bb91),stopBot(_0x49bb91));config=getConfiguration(),io['to'](_0x4f9838(0x260))[_0x4f9838(0x1f1)](_0x4f9838(0x27f),config);}function toggleStatus(_0x2cfe42){const _0x599978=_0x51b267;let _0x3a0655=dbConfig[_0x599978(0x25c)](_0x599978(0x27f))[_0x599978(0x219)]({'botID':_0x2cfe42})[_0x599978(0x24a)](),_0x14d0f2;if(_0x3a0655[_0x599978(0x1f2)]===_0x599978(0x23c))_0x14d0f2='disabled';else{if(_0x3a0655[_0x599978(0x1f2)]===_0x599978(0x178))_0x14d0f2=_0x599978(0x227);else{if(_0x3a0655['status']===_0x599978(0x227))_0x14d0f2=_0x599978(0x178);else{if(_0x3a0655[_0x599978(0x1f2)]==='disabled')_0x14d0f2='enabled';}}}return _0x14d0f2;}function updateStatus(_0x9cea3a,_0x5c169b){const _0x4db092=_0x51b267;dbConfig[_0x4db092(0x25c)]('bots')[_0x4db092(0x219)]({'botID':_0x9cea3a})[_0x4db092(0x19d)]({'status':_0x5c169b})[_0x4db092(0x1ae)](),config=getConfiguration(),io['to'](_0x4db092(0x260))['emit'](_0x4db092(0x27f),config);}function updateLive(_0x239638,_0x462c12){const _0x5067d3=_0x51b267;dbConfig[_0x5067d3(0x25c)](_0x5067d3(0x27f))['find']({'botID':_0x239638})[_0x5067d3(0x19d)]({'live':_0x462c12})[_0x5067d3(0x1ae)](),config=getConfiguration(),io['to'](_0x5067d3(0x260))[_0x5067d3(0x1f1)]('bots',config);}function updateBotName(_0x28f486,_0x6cdf85){const _0x44fe58=_0x51b267;dbConfig[_0x44fe58(0x25c)](_0x44fe58(0x27f))[_0x44fe58(0x219)]({'botID':_0x28f486})[_0x44fe58(0x19d)]({'botname':_0x6cdf85})['write'](),config=getConfiguration(),io['to'](_0x44fe58(0x260))[_0x44fe58(0x1f1)](_0x44fe58(0x27f),config);}function telegramError(_0xdefe66){const _0x56fcfa=_0x51b267;console[_0x56fcfa(0x206)](getTimeStamp()+_0x56fcfa(0x212));}function validateTelegram(_0x94ea11){const _0x33d0ca=_0x51b267;if(_0x94ea11[_0x33d0ca(0x229)][_0x33d0ca(0x249)]!=settings[_0x33d0ca(0x1be)]&&'@'+_0x94ea11[_0x33d0ca(0x229)]['username']!=settings[_0x33d0ca(0x1be)])return tgBot[_0x33d0ca(0x169)](_0x94ea11[_0x33d0ca(0x203)]['id'],_0x33d0ca(0x211),{'parse_mode':_0x33d0ca(0x226)})['catch'](_0x4d6a3b=>{telegramError(_0x4d6a3b);}),![];return!![];}async function initTelegram(){const _0x31f21b=_0x51b267;if(tgBot)tgBot[_0x31f21b(0x1d8)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x58b483=_0x31f21b(0x186);_0x58b483+='\x0a',_0x58b483+=_0x31f21b(0x1d4),_0x58b483+=_0x31f21b(0x2a6),_0x58b483+=_0x31f21b(0x1a3),_0x58b483+=_0x31f21b(0x22b),_0x58b483+='/on\x20-\x20start\x20bot(s)\x0a',_0x58b483+='/off\x20-\x20stop\x20bot(s)\x0a',_0x58b483+=_0x31f21b(0x290),_0x58b483+=_0x31f21b(0x267);let _0x52a759=_0x31f21b(0x1aa);_0x52a759+='\x0a',_0x52a759+=_0x58b483,tgBot[_0x31f21b(0x235)](/\/start/,_0x18527a=>{const _0x3d5628=_0x31f21b;if(!validateTelegram(_0x18527a))return;if(settings[_0x3d5628(0x16f)]!=_0x18527a[_0x3d5628(0x203)]['id'])updateSetting(_0x3d5628(0x16f),_0x18527a[_0x3d5628(0x203)]['id']);updateSetting(_0x3d5628(0x15c),!![]),tgBot['sendMessage'](_0x18527a[_0x3d5628(0x203)]['id'],_0x52a759)[_0x3d5628(0x264)](_0x1e4439=>{telegramError(_0x1e4439);});}),tgBot['onText'](/\/enable/,_0x25f571=>{const _0x38d33e=_0x31f21b;if(!validateTelegram(_0x25f571))return;if(settings[_0x38d33e(0x16f)]!=_0x25f571[_0x38d33e(0x203)]['id'])updateSetting(_0x38d33e(0x16f),_0x25f571[_0x38d33e(0x203)]['id']);updateSetting(_0x38d33e(0x15c),!![]),tgBot[_0x38d33e(0x169)](_0x25f571[_0x38d33e(0x203)]['id'],'Notifications\x20enabled')[_0x38d33e(0x264)](_0x5d491f=>{telegramError(_0x5d491f);});}),tgBot[_0x31f21b(0x235)](/\/config/,async _0x3a65b0=>{const _0x4164d4=_0x31f21b;if(!validateTelegram(_0x3a65b0))return;tgBot[_0x4164d4(0x1e1)](_0x4164d4(0x297)),tgBot[_0x4164d4(0x169)](_0x3a65b0[_0x4164d4(0x203)]['id'],_0x4164d4(0x20b),{'reply_markup':{'inline_keyboard':[[{'text':_0x4164d4(0x23b),'callback_data':_0x4164d4(0x2a7)},{'text':_0x4164d4(0x278),'callback_data':_0x4164d4(0x27b)},{'text':'All','callback_data':_0x4164d4(0x282)}]]}})[_0x4164d4(0x264)](_0x49fb73=>{telegramError(_0x49fb73);}),tgBot['on'](_0x4164d4(0x297),async _0xfc6efc=>{const _0x5e7049=_0x4164d4,_0x156aff=_0xfc6efc[_0x5e7049(0x216)],_0xb8db6b=_0xfc6efc[_0x5e7049(0x250)];tgBot['answerCallbackQuery'](_0xfc6efc['id'])[_0x5e7049(0x1c0)](async()=>{const _0x1c45ba=_0x5e7049;_0x156aff==_0x1c45ba(0x2a7)&&(updateSetting(_0x1c45ba(0x28b),'orders'),updateSetting(_0x1c45ba(0x15c),!![]),await tgBot[_0x1c45ba(0x169)](_0xb8db6b[_0x1c45ba(0x203)]['id'],_0x1c45ba(0x163))['catch'](_0xf66583=>{telegramError(_0xf66583);}));_0x156aff=='alerts'&&(updateSetting(_0x1c45ba(0x28b),_0x1c45ba(0x27b)),updateSetting(_0x1c45ba(0x15c),!![]),await tgBot[_0x1c45ba(0x169)](_0xb8db6b[_0x1c45ba(0x203)]['id'],_0x1c45ba(0x167))[_0x1c45ba(0x264)](_0x2229f3=>{telegramError(_0x2229f3);}));_0x156aff==_0x1c45ba(0x282)&&(updateSetting('telegramEvents',_0x1c45ba(0x282)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0xb8db6b['chat']['id'],_0x1c45ba(0x1fb))[_0x1c45ba(0x264)](_0x114beb=>{telegramError(_0x114beb);}));if(!settings[_0x1c45ba(0x16f)])tgBot[_0x1c45ba(0x169)](_0xb8db6b[_0x1c45ba(0x203)]['id'],_0x1c45ba(0x210))[_0x1c45ba(0x264)](_0xf1e256=>{telegramError(_0xf1e256);});}),tgBot['removeListener']('callback_query');});}),tgBot[_0x31f21b(0x235)](/\/status/,_0x16e09b=>{const _0x205228=_0x31f21b;if(!validateTelegram(_0x16e09b))return;let _0x20d6d5=_0x205228(0x199);config[_0x205228(0x180)](_0x351014=>{const _0x1f6350=_0x205228;_0x20d6d5+=_0x1f6350(0x247)+_0x351014[_0x1f6350(0x175)]+_0x1f6350(0x241)+_0x351014[_0x1f6350(0x17f)]+':\x20'+_0x351014['status']+'\x20/\x20'+_0x351014[_0x1f6350(0x2a3)]+'\x0a';}),_0x20d6d5+='\x0a',_0x20d6d5+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x20d6d5+=!settings[_0x205228(0x15c)]?_0x205228(0x1ec):'Notifications\x20enabled\x0a',_0x20d6d5+=settings[_0x205228(0x15c)]?settings[_0x205228(0x28b)]==_0x205228(0x282)?_0x205228(0x1b6):'Notifications\x20types:\x20'+settings[_0x205228(0x28b)]+_0x205228(0x238):'',tgBot[_0x205228(0x169)](_0x16e09b[_0x205228(0x203)]['id'],_0x20d6d5,{'parse_mode':'HTML'})['catch'](_0x5effc2=>{telegramError(_0x5effc2);});}),tgBot[_0x31f21b(0x235)](/\/restart/,_0x2f8011=>{const _0x59ba47=_0x31f21b;if(!validateTelegram(_0x2f8011))return;tgBot[_0x59ba47(0x1e1)](_0x59ba47(0x297));const _0x3de593=getEnabledBots();if(_0x3de593[_0x59ba47(0x196)]==0x0)tgBot['sendMessage'](_0x2f8011['chat']['id'],_0x59ba47(0x1d1))[_0x59ba47(0x264)](_0x27d5e1=>{telegramError(_0x27d5e1);});else{if(_0x3de593[_0x59ba47(0x196)]>0x1)_0x3de593['push']({'botID':_0x59ba47(0x282)});let _0x101b78=[],_0x854c2f=[];const _0x340662=_0x3de593[_0x59ba47(0x196)]%0x4==0x0||_0x3de593[_0x59ba47(0x196)]%0x4==0x3||_0x3de593[_0x59ba47(0x196)]%0x3==0x1?0x4:0x3;let _0x5b85c9=0x0;_0x3de593[_0x59ba47(0x180)]((_0x5f01c6,_0x3837b2)=>{const _0x19f6f3=_0x59ba47;if(_0x3837b2%_0x340662==0x0)_0x854c2f=[];_0x854c2f[_0x19f6f3(0x194)]({'text':_0x5f01c6['botID']==_0x19f6f3(0x282)?_0x19f6f3(0x182):_0x19f6f3(0x247)+_0x5f01c6[_0x19f6f3(0x175)],'callback_data':_0x5f01c6['botID']}),_0x3837b2%_0x340662==0x0&&(_0x101b78[_0x5b85c9]=_0x854c2f,_0x5b85c9++);}),tgBot[_0x59ba47(0x169)](_0x2f8011[_0x59ba47(0x203)]['id'],_0x59ba47(0x262),{'reply_markup':{'inline_keyboard':_0x101b78}})[_0x59ba47(0x264)](_0x57c935=>{telegramError(_0x57c935);}),tgBot['on'](_0x59ba47(0x297),async _0x3009db=>{const _0x3abcfc=_0x59ba47,_0x5b517d=_0x3009db[_0x3abcfc(0x216)],_0x12cdf0=_0x3009db['message'];tgBot[_0x3abcfc(0x1a9)](_0x3009db['id'])['then'](async()=>{const _0x2295a8=_0x3abcfc;if(_0x5b517d==_0x2295a8(0x282)){if(settings[_0x2295a8(0x28b)]=='orders')tgBot[_0x2295a8(0x169)](_0x12cdf0['chat']['id'],_0x2295a8(0x298))[_0x2295a8(0x264)](_0x348926=>{telegramError(_0x348926);});config[_0x2295a8(0x180)](_0x78bc04=>{stopBot(_0x78bc04['botID']);});}else{if(settings[_0x2295a8(0x28b)]==_0x2295a8(0x2a7))tgBot[_0x2295a8(0x169)](_0x12cdf0[_0x2295a8(0x203)]['id'],_0x2295a8(0x1af)+_0x5b517d)[_0x2295a8(0x264)](_0x560f2d=>{telegramError(_0x560f2d);});stopBot(_0x5b517d);}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x31f21b(0x235)](/\/on/,_0x39259a=>{const _0x1b3849=_0x31f21b;if(!validateTelegram(_0x39259a))return;tgBot[_0x1b3849(0x1e1)](_0x1b3849(0x297));const _0xc8c19f=getDisabledBots();if(_0xc8c19f[_0x1b3849(0x196)]==0x0)tgBot[_0x1b3849(0x169)](_0x39259a[_0x1b3849(0x203)]['id'],_0x1b3849(0x1b2))[_0x1b3849(0x264)](_0x8532f4=>{telegramError(_0x8532f4);});else{if(_0xc8c19f['length']>0x1)_0xc8c19f[_0x1b3849(0x194)]({'botID':_0x1b3849(0x282)});let _0x48d084=[],_0x93f63a=[];const _0x4d603e=_0xc8c19f['length']%0x4==0x0||_0xc8c19f[_0x1b3849(0x196)]%0x4==0x3||_0xc8c19f[_0x1b3849(0x196)]%0x3==0x1?0x4:0x3;let _0x5b4c83=0x0;_0xc8c19f[_0x1b3849(0x180)]((_0x16f319,_0x256099)=>{const _0x4fadaf=_0x1b3849;if(_0x256099%_0x4d603e==0x0)_0x93f63a=[];_0x93f63a[_0x4fadaf(0x194)]({'text':_0x16f319[_0x4fadaf(0x175)]==_0x4fadaf(0x282)?_0x4fadaf(0x182):_0x4fadaf(0x247)+_0x16f319[_0x4fadaf(0x175)],'callback_data':_0x16f319[_0x4fadaf(0x175)]}),_0x256099%_0x4d603e==0x0&&(_0x48d084[_0x5b4c83]=_0x93f63a,_0x5b4c83++);}),tgBot['sendMessage'](_0x39259a[_0x1b3849(0x203)]['id'],_0x1b3849(0x1eb),{'reply_markup':{'inline_keyboard':_0x48d084}})['catch'](_0x53cbd2=>{telegramError(_0x53cbd2);}),tgBot['on']('callback_query',async _0x22de2=>{const _0x320261=_0x1b3849,_0x6c25fc=_0x22de2[_0x320261(0x216)],_0x426356=_0x22de2[_0x320261(0x250)];tgBot[_0x320261(0x1a9)](_0x22de2['id'])[_0x320261(0x1c0)](async()=>{const _0x1046a2=_0x320261;if(_0x6c25fc==_0x1046a2(0x282)){if(settings[_0x1046a2(0x28b)]==_0x1046a2(0x2a7))tgBot['sendMessage'](_0x426356[_0x1046a2(0x203)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x1046a2(0x264)](_0x39c928=>{telegramError(_0x39c928);});_0xc8c19f[_0x1046a2(0x180)](_0xbfa28f=>{const _0x104c7d=_0x1046a2;if(_0xbfa28f['botID']!=_0x104c7d(0x282))toggleBot(_0xbfa28f[_0x104c7d(0x175)],toggleStatus(_0xbfa28f['botID']),_0x104c7d(0x188));});}else{if(settings[_0x1046a2(0x28b)]=='orders')tgBot['sendMessage'](_0x426356[_0x1046a2(0x203)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x6c25fc)[_0x1046a2(0x264)](_0xf5eed4=>{telegramError(_0xf5eed4);});toggleBot(_0x6c25fc,toggleStatus(_0x6c25fc),'stopped');}}),tgBot[_0x320261(0x1e1)](_0x320261(0x297));});}}),tgBot['onText'](/\/off/,_0x332c77=>{const _0x4f8976=_0x31f21b;if(!validateTelegram(_0x332c77))return;tgBot[_0x4f8976(0x1e1)](_0x4f8976(0x297));const _0xb7ecf4=getEnabledBots();if(_0xb7ecf4['length']==0x0)tgBot[_0x4f8976(0x169)](_0x332c77['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x4f8976(0x264)](_0x3b7cc4=>{telegramError(_0x3b7cc4);});else{if(_0xb7ecf4['length']>0x1)_0xb7ecf4[_0x4f8976(0x194)]({'botID':_0x4f8976(0x282)});let _0x3cb4e7=[],_0x117f3e=[];const _0x426106=_0xb7ecf4[_0x4f8976(0x196)]%0x4==0x0||_0xb7ecf4['length']%0x4==0x3||_0xb7ecf4[_0x4f8976(0x196)]%0x3==0x1?0x4:0x3;let _0x406bd0=0x0;_0xb7ecf4[_0x4f8976(0x180)]((_0x1baae8,_0xbe933c)=>{const _0x5da155=_0x4f8976;if(_0xbe933c%_0x426106==0x0)_0x117f3e=[];_0x117f3e[_0x5da155(0x194)]({'text':_0x1baae8[_0x5da155(0x175)]==_0x5da155(0x282)?_0x5da155(0x182):_0x5da155(0x247)+_0x1baae8[_0x5da155(0x175)],'callback_data':_0x1baae8[_0x5da155(0x175)]}),_0xbe933c%_0x426106==0x0&&(_0x3cb4e7[_0x406bd0]=_0x117f3e,_0x406bd0++);}),tgBot[_0x4f8976(0x169)](_0x332c77[_0x4f8976(0x203)]['id'],_0x4f8976(0x1a4),{'reply_markup':{'inline_keyboard':_0x3cb4e7}})[_0x4f8976(0x264)](_0x5cd864=>{telegramError(_0x5cd864);}),tgBot['on'](_0x4f8976(0x297),async _0xfcb4bb=>{const _0x235e25=_0x4f8976,_0x3c5ca8=_0xfcb4bb[_0x235e25(0x216)],_0x3c5d7b=_0xfcb4bb[_0x235e25(0x250)];tgBot['answerCallbackQuery'](_0xfcb4bb['id'])[_0x235e25(0x1c0)](async()=>{const _0x303bee=_0x235e25;if(_0x3c5ca8==_0x303bee(0x282)){if(settings['telegramEvents']=='orders')tgBot[_0x303bee(0x169)](_0x3c5d7b['chat']['id'],_0x303bee(0x28f))[_0x303bee(0x264)](_0x48005f=>{telegramError(_0x48005f);});_0xb7ecf4['forEach'](_0x52ea34=>{const _0x40f701=_0x303bee;if(_0x52ea34[_0x40f701(0x175)]!=_0x40f701(0x282))toggleBot(_0x52ea34[_0x40f701(0x175)],toggleStatus(_0x52ea34[_0x40f701(0x175)]),_0x40f701(0x188));});}else{if(settings[_0x303bee(0x28b)]=='orders')tgBot['sendMessage'](_0x3c5d7b[_0x303bee(0x203)]['id'],_0x303bee(0x28e)+_0x3c5ca8)[_0x303bee(0x264)](_0x1230d3=>{telegramError(_0x1230d3);});toggleBot(_0x3c5ca8,toggleStatus(_0x3c5ca8),_0x303bee(0x188));}}),tgBot['removeListener'](_0x235e25(0x297));});}}),tgBot[_0x31f21b(0x235)](/\/disable/,_0x10b7bc=>{const _0x43cef6=_0x31f21b;if(!validateTelegram(_0x10b7bc))return;tgBot[_0x43cef6(0x169)](_0x10b7bc['chat']['id'],_0x43cef6(0x232))[_0x43cef6(0x264)](_0x570b96=>{telegramError(_0x570b96);}),updateSetting(_0x43cef6(0x15c),![]);}),tgBot['onText'](/\/help/,_0x509171=>{const _0x22bb90=_0x31f21b;if(!validateTelegram(_0x509171))return;tgBot[_0x22bb90(0x169)](_0x509171['chat']['id'],_0x58b483)[_0x22bb90(0x264)](_0x1b5c98=>{telegramError(_0x1b5c98);});}),tgBot['on']('polling_error',_0xc4d1a3=>{const _0x528ade=_0x31f21b;_0xc4d1a3['toString']()[_0x528ade(0x16d)](_0x528ade(0x200))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x528ade(0x1f1)]('notification',_0x528ade(0x1a2)));}),process['once'](_0x31f21b(0x259),()=>{const _0x7ff1e6=_0x31f21b;if(tgBot)tgBot[_0x7ff1e6(0x1d8)]();process[_0x7ff1e6(0x1e4)](0x1);}),process[_0x31f21b(0x1bf)](_0x31f21b(0x217),()=>{const _0x3c175c=_0x31f21b;if(tgBot)tgBot[_0x3c175c(0x1d8)]();process[_0x3c175c(0x1e4)](0x1);});}}function disableTelegram(){const _0x3511cd=_0x51b267;tgBot&&(tgBot[_0x3511cd(0x1d8)](),tgBot=null);}function sendTelegram(_0x4327a6,_0x53f054){const _0x44b0c7=_0x51b267;if(settings[_0x44b0c7(0x15c)]){if(settings['telegramEvents']==_0x44b0c7(0x282)||(_0x53f054[_0x44b0c7(0x2a5)]==_0x44b0c7(0x1cb)||_0x53f054['type']==_0x44b0c7(0x24e))&&settings[_0x44b0c7(0x28b)]==_0x44b0c7(0x27b)||_0x53f054['type']==_0x44b0c7(0x18c)&&settings[_0x44b0c7(0x28b)]=='orders'){if(tgBot&&settings[_0x44b0c7(0x16f)]){if(_0x53f054[_0x44b0c7(0x1a6)])tgBot['sendMessage'](settings[_0x44b0c7(0x16f)],_0x53f054[_0x44b0c7(0x17f)]+_0x44b0c7(0x1d3)+_0x53f054[_0x44b0c7(0x1c4)])[_0x44b0c7(0x264)](_0x515f6a=>{telegramError(_0x515f6a);});else tgBot[_0x44b0c7(0x169)](settings['telegramChatId'],'Bot\x20'+_0x4327a6+_0x44b0c7(0x1d3)+_0x53f054[_0x44b0c7(0x1c4)])[_0x44b0c7(0x264)](_0x4f2adc=>{telegramError(_0x4f2adc);});}}}}function getDeviceWithIp(_0x45e072){const _0x304eca=_0x51b267;return devices[_0x304eca(0x219)](_0x5c97e2=>_0x5c97e2['ip']===_0x45e072);}function temporaryAccess2FA(_0x2920e6,_0x1672cb){const _0x4fd516=_0x51b267;let _0x2d96e6=new Date(),_0x422dab=![];if(lastIpApproval){if(_0x2d96e6-lastIpApproval<0x1388)_0x422dab=!![];}lastIpApproval=new Date();if(_0x422dab)return;tgBot&&settings[_0x4fd516(0x16f)]&&(tgBot[_0x4fd516(0x1e1)](_0x4fd516(0x297)),tgBot[_0x4fd516(0x169)](settings[_0x4fd516(0x16f)],_0x4fd516(0x1f8)+normalizeIP(_0x1672cb)[_0x4fd516(0x22d)]+'</b>\x20?',{'parse_mode':_0x4fd516(0x226),'reply_markup':{'inline_keyboard':[[{'text':_0x4fd516(0x28c),'callback_data':'5'},{'text':_0x4fd516(0x1c2),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x4fd516(0x265),'callback_data':_0x4fd516(0x265)}]]}})[_0x4fd516(0x264)](_0x555302=>{telegramError(_0x555302);}),tgBot['on'](_0x4fd516(0x297),async _0x281176=>{const _0x1dbe14=_0x4fd516,_0x144f29=_0x281176[_0x1dbe14(0x216)],_0x49dabf=_0x281176[_0x1dbe14(0x250)];tgBot['answerCallbackQuery'](_0x281176['id'])['then'](async()=>{const _0x290adf=_0x1dbe14;devices[_0x2920e6][_0x290adf(0x213)]={'clientip':_0x1672cb,'timestamp':new Date()[_0x290adf(0x17d)](),'expiry':_0x144f29},_0x144f29!=_0x290adf(0x265)?(await tgBot[_0x290adf(0x169)](_0x49dabf[_0x290adf(0x203)]['id'],_0x290adf(0x15a)+_0x144f29+'\x20minutes',{'parse_mode':'HTML'})[_0x290adf(0x264)](_0x53ba42=>{telegramError(_0x53ba42);}),io['to'](_0x2920e6)[_0x290adf(0x1f1)](_0x290adf(0x1f2),{'access':{'allow':![],'reason':_0x290adf(0x174),'token':null}})):(await tgBot[_0x290adf(0x169)](_0x49dabf[_0x290adf(0x203)]['id'],'Temporary\x20access\x20rejected')[_0x290adf(0x264)](_0x348587=>{telegramError(_0x348587);}),io['to'](_0x2920e6)['emit'](_0x290adf(0x1f2),{'access':{'allow':![],'reason':_0x290adf(0x173),'token':null}}));}),tgBot[_0x1dbe14(0x1e1)]('callback_query');}));}function loginAccess2FA(_0x453075,_0x4e0c48){const _0x26aa2c=_0x51b267;tgBot&&settings[_0x26aa2c(0x16f)]&&(tgBot['removeListener']('callback_query'),tgBot['sendMessage'](settings[_0x26aa2c(0x16f)],_0x26aa2c(0x208)+normalizeIP(_0x4e0c48)[_0x26aa2c(0x22d)]+_0x26aa2c(0x2a2),{'parse_mode':_0x26aa2c(0x226),'reply_markup':{'inline_keyboard':[[{'text':_0x26aa2c(0x15d),'callback_data':loginExpiry},{'text':_0x26aa2c(0x265),'callback_data':_0x26aa2c(0x265)}]]}})[_0x26aa2c(0x264)](_0x2c06d7=>{telegramError(_0x2c06d7);}),tgBot['on'](_0x26aa2c(0x297),async _0x440f32=>{const _0x5134c4=_0x26aa2c,_0x52082f=_0x440f32[_0x5134c4(0x216)],_0x4c43ce=_0x440f32['message'];tgBot['answerCallbackQuery'](_0x440f32['id'])[_0x5134c4(0x1c0)](async()=>{const _0x46294a=_0x5134c4;devices[_0x453075]['telegram2FaApproval']={'clientip':_0x4e0c48,'timestamp':new Date()[_0x46294a(0x17d)](),'expiry':_0x52082f},_0x52082f!=_0x46294a(0x265)?(await tgBot[_0x46294a(0x169)](_0x4c43ce[_0x46294a(0x203)]['id'],_0x46294a(0x26c),{'parse_mode':_0x46294a(0x226)})['catch'](_0x23b6a8=>{telegramError(_0x23b6a8);}),io['to'](_0x453075)['emit']('status',{'access':{'allow':![],'reason':_0x46294a(0x174),'token':null}})):(await tgBot[_0x46294a(0x169)](_0x4c43ce[_0x46294a(0x203)]['id'],_0x46294a(0x176))['catch'](_0x567b29=>{telegramError(_0x567b29);}),io['to'](_0x453075)['emit'](_0x46294a(0x1f2),{'access':{'allow':![],'reason':_0x46294a(0x281),'token':null}}));}),tgBot[_0x5134c4(0x1e1)]('callback_query');}));}function getConfiguration(){const _0x2b1904=_0x51b267;return dbConfig[_0x2b1904(0x25c)](_0x2b1904(0x27f))['sortBy'](_0x2b1904(0x175))[_0x2b1904(0x24a)]()||[];}function getEnabledBots(){const _0x4872bd=_0x51b267;return dbConfig['get'](_0x4872bd(0x27f))[_0x4872bd(0x1fc)](_0x4872bd(0x175))[_0x4872bd(0x201)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x47f7fd=_0x51b267;return dbConfig[_0x47f7fd(0x25c)](_0x47f7fd(0x27f))[_0x47f7fd(0x1fc)](_0x47f7fd(0x175))[_0x47f7fd(0x201)]({'status':_0x47f7fd(0x21a)})[_0x47f7fd(0x24a)]()||[];}function getSettings(){const _0x374ed9=_0x51b267;return dbSettings['get'](_0x374ed9(0x205))['value']()||{'timeshift':0x0};}function getSecure(){const _0xc01cd7=_0x51b267;return dbSecure['get'](_0xc01cd7(0x1b5))['value']()||{};}function getBlacklist(){const _0x4d2b3d=_0x51b267;return dbSecure[_0x4d2b3d(0x25c)](_0x4d2b3d(0x1cc))[_0x4d2b3d(0x24a)]()||[];}function broadcastToBots(_0xb69a7e,_0x35a9bf){const _0x39a11d=_0x51b267;config[_0x39a11d(0x180)](_0x3f24ba=>{const _0x2e308b=_0x39a11d;if(_0x3f24ba[_0x2e308b(0x1f2)]==_0x2e308b(0x23c)&&_0x3f24ba[_0x2e308b(0x2a3)]=='running'){if(pid[_0x3f24ba[_0x2e308b(0x175)]])pid[_0x3f24ba[_0x2e308b(0x175)]]['send']({[_0xb69a7e]:_0x35a9bf});}});}function storeSettings(_0x3ea372,_0x48cc37=![]){const _0x45e0ca=_0x51b267;_0x3ea372={...settings,..._0x3ea372};if(_0x48cc37&&_0x3ea372[_0x45e0ca(0x271)]!=_0x45e0ca(0x1d2)&&_0x3ea372['bbPassword']!=''){const _0x243ab6=crypt[_0x45e0ca(0x1e5)](secure[_0x45e0ca(0x1a8)],_0x3ea372['bbPassword'])['message'][_0x45e0ca(0x261)]('@')[0x0],_0x41c760=bcrypt[_0x45e0ca(0x222)](_0x243ab6,saltRounds);_0x3ea372={..._0x3ea372,'bbPassword':_0x41c760};}if(_0x48cc37&&_0x3ea372[_0x45e0ca(0x21e)]!=_0x45e0ca(0x1d2)&&_0x3ea372[_0x45e0ca(0x21e)]!=''){const _0xfbd237=crypt[_0x45e0ca(0x1e5)](secure[_0x45e0ca(0x1a8)],_0x3ea372[_0x45e0ca(0x21e)])[_0x45e0ca(0x250)][_0x45e0ca(0x261)]('@')[0x0];_0x3ea372={..._0x3ea372,'telegramToken':_0xfbd237};}const _0x2a2d33=_0x3ea372[_0x45e0ca(0x21e)]!='************'&&_0x3ea372[_0x45e0ca(0x21e)]!=settings[_0x45e0ca(0x21e)]||_0x3ea372['telegramUsername']!=settings['telegramUsername'],_0x16ebef=_0x3ea372['telegramToken']==''||_0x3ea372[_0x45e0ca(0x1be)]=='';if(_0x2a2d33)_0x3ea372[_0x45e0ca(0x28b)]=_0x45e0ca(0x282);for(const [_0x34d6ca,_0x5875ed]of Object[_0x45e0ca(0x15e)](_0x3ea372)){if(_0x34d6ca==_0x45e0ca(0x21e)&&_0x5875ed=='************'){_0x3ea372[_0x45e0ca(0x21e)]=settings[_0x45e0ca(0x21e)];continue;};if(_0x34d6ca==_0x45e0ca(0x271)&&_0x5875ed==_0x45e0ca(0x1d2)){_0x3ea372[_0x45e0ca(0x271)]=settings['bbPassword'];continue;};dbSettings[_0x45e0ca(0x275)]('settings.'+_0x34d6ca,_0x5875ed)['write']();}settings=_0x3ea372,io['to'](_0x45e0ca(0x260))[_0x45e0ca(0x1f1)](_0x45e0ca(0x205),cleanSettings()),broadcastToBots(_0x45e0ca(0x1ac),settings[_0x45e0ca(0x1ac)]);if(_0x2a2d33&&!_0x16ebef)initTelegram();if(_0x2a2d33&&_0x16ebef)disableTelegram();getAllClients()[_0x45e0ca(0x180)](_0x2157d0=>{const _0x1e036f=_0x45e0ca;getSocket(_0x2157d0['id'])['emit'](_0x1e036f(0x1f2),{'access':{'allow':![],'reason':_0x1e036f(0x174),'token':null}});});}function updateSetting(_0x394a75,_0x313072){const _0x27ae21=_0x51b267;dbSettings[_0x27ae21(0x275)](_0x27ae21(0x1bb)+_0x394a75,_0x313072)[_0x27ae21(0x1ae)](),settings=getSettings(),io['to'](_0x27ae21(0x260))['emit'](_0x27ae21(0x205),cleanSettings());}function storeSecure(_0x55690e){const _0x2b9462=_0x51b267;dbSecure['get'](_0x2b9462(0x1b5))[_0x2b9462(0x194)](_0x55690e)[_0x2b9462(0x1ae)](),secure=_0x55690e;}function addBlacklist(_0x1d5c49){const _0x1f1ace=_0x51b267;cleanBlacklist();let _0x26ea5b;devices[_0x1d5c49][_0x1f1ace(0x213)]?_0x26ea5b=Math[_0x1f1ace(0x28a)](devices[_0x1d5c49][_0x1f1ace(0x213)][_0x1f1ace(0x1c9)],loginExpiry):_0x26ea5b=loginExpiry,dbSecure[_0x1f1ace(0x25c)](_0x1f1ace(0x1cc))[_0x1f1ace(0x194)]({'expiry':new Date()[_0x1f1ace(0x17d)]()+_0x26ea5b*0x3c*0x3e8,'token':devices[_0x1d5c49][_0x1f1ace(0x22a)][_0x1f1ace(0x1f4)]})[_0x1f1ace(0x1ae)](),blacklist=dbSecure[_0x1f1ace(0x25c)](_0x1f1ace(0x1cc))[_0x1f1ace(0x24a)]();}function cleanBlacklist(){const _0x6601c2=_0x51b267;let _0x5db87b=dbSecure[_0x6601c2(0x25c)](_0x6601c2(0x1cc))[_0x6601c2(0x1dc)]()[_0x6601c2(0x24a)](),_0x1c7251=new Date()['getTime']();_0x5db87b[_0x6601c2(0x180)](_0x219201=>{const _0x6f2efb=_0x6601c2;_0x219201['expiry']<_0x1c7251&&dbSecure['get'](_0x6f2efb(0x1cc))[_0x6f2efb(0x22c)]({'expiry':_0x219201[_0x6f2efb(0x1c9)]})[_0x6f2efb(0x1ae)]();});}function initStates(){let _0x18469c=getConfiguration();_0x18469c['forEach'](_0x11e8d9=>{const _0x48647c=_0x5c06;_0x11e8d9['live']=_0x48647c(0x188);}),storeConfiguration(_0x18469c);}function onKeys(){const _0x45eadb=new RSA();return new Promise(_0x49e2ad=>{const _0x5c5916=_0x5c06;_0x45eadb[_0x5c5916(0x21d)]()[_0x5c5916(0x1c0)](_0x45d432=>{_0x49e2ad(_0x45d432);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x105d71=_0x51b267;let _0x3448bd=getConfiguration(),_0x462027=![];_0x3448bd[_0x105d71(0x180)](_0x57216d=>{const _0x5c3aa0=_0x105d71;if(_0x57216d[_0x5c3aa0(0x1f2)]=='running')_0x57216d['status']=_0x5c3aa0(0x23c),_0x462027=!![];else _0x57216d[_0x5c3aa0(0x1f2)]=='stopped'&&(_0x57216d[_0x5c3aa0(0x1f2)]='disabled',_0x462027=!![]);});if(_0x462027)storeConfiguration(_0x3448bd);let _0x2ee9fe=getSecure();if(!_0x2ee9fe[_0x105d71(0x159)](_0x105d71(0x16c))){let _0x4ed553=await generateKeys();_0x2ee9fe[_0x105d71(0x256)]=_0x4ed553['publicKey'],_0x2ee9fe[_0x105d71(0x1a8)]=_0x4ed553['privateKey'],_0x2ee9fe['secret']=crypto[_0x105d71(0x279)](0x20)['toString'](_0x105d71(0x1c1));;storeSecure(_0x2ee9fe);}let _0x4a4af1=getSettings();_0x462027=![];!_0x4a4af1[_0x105d71(0x159)]('loginRequired')&&(_0x4a4af1['loginRequired']=![],_0x4a4af1[_0x105d71(0x1d7)]='',_0x4a4af1[_0x105d71(0x271)]='',_0x4a4af1[_0x105d71(0x1db)]=![],_0x462027=!![]);!_0x4a4af1[_0x105d71(0x159)](_0x105d71(0x26e))&&(_0x4a4af1[_0x105d71(0x26e)]=![],_0x4a4af1[_0x105d71(0x25f)]=[],_0x4a4af1[_0x105d71(0x255)]=![],_0x462027=!![]);if(!_0x4a4af1[_0x105d71(0x159)](_0x105d71(0x15c))){if(_0x4a4af1[_0x105d71(0x16f)])_0x4a4af1[_0x105d71(0x15c)]=!![];else _0x4a4af1['telegramEnabled']=![];_0x462027=!![];}if(_0x462027)storeSettings(_0x4a4af1);}function storeConfiguration(_0x2d9fc3){const _0x19e6db=_0x51b267;dbConfig[_0x19e6db(0x25c)](_0x19e6db(0x27f))[_0x19e6db(0x22c)]()[_0x19e6db(0x1ae)](),dbConfig[_0x19e6db(0x25c)](_0x19e6db(0x27f))[_0x19e6db(0x194)](..._0x2d9fc3)[_0x19e6db(0x1ae)](),config=_0x2d9fc3;}function resetPassword(){const _0x311358=_0x51b267;tgBot&&settings['telegramChatId']&&(tgBot[_0x311358(0x1e1)](_0x311358(0x297)),tgBot[_0x311358(0x169)](settings[_0x311358(0x16f)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x311358(0x226),'reply_markup':{'inline_keyboard':[[{'text':_0x311358(0x15b),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x296e11=>{telegramError(_0x296e11);}),tgBot['on'](_0x311358(0x297),async _0x171e77=>{const _0x393448=_0x311358,_0x381740=_0x171e77[_0x393448(0x216)],_0x12c19c=_0x171e77[_0x393448(0x250)];tgBot[_0x393448(0x1a9)](_0x171e77['id'])[_0x393448(0x1c0)](async()=>{const _0x3d7f0e=_0x393448;if(_0x381740!='no'){const _0x42a765=0xf,_0x165b5e=_0x3d7f0e(0x29c),_0x996c28=Array[_0x3d7f0e(0x229)](crypto[_0x3d7f0e(0x18a)](new Uint32Array(_0x42a765)))[_0x3d7f0e(0x20a)](_0x137cef=>_0x165b5e[_0x137cef%_0x165b5e[_0x3d7f0e(0x196)]])[_0x3d7f0e(0x164)](''),_0x3361cc=bcrypt[_0x3d7f0e(0x222)](_0x996c28,saltRounds);storeSettings({'bbPassword':_0x3361cc}),await tgBot[_0x3d7f0e(0x169)](_0x12c19c[_0x3d7f0e(0x203)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x996c28,{'parse_mode':_0x3d7f0e(0x226)})[_0x3d7f0e(0x264)](_0x4eec5b=>{telegramError(_0x4eec5b);});}else await tgBot['sendMessage'](_0x12c19c[_0x3d7f0e(0x203)]['id'],_0x3d7f0e(0x1ef))[_0x3d7f0e(0x264)](_0x2b9c79=>{telegramError(_0x2b9c79);});}),tgBot[_0x393448(0x1e1)](_0x393448(0x297));}));}function logging(_0x28123a){const _0x12caf1=_0x51b267;console[_0x12caf1(0x206)](getTimeStamp()+_0x12caf1(0x1d9)+_0x28123a);if(tgBot&&settings[_0x12caf1(0x16f)]&&settings['telegramEvents']!=_0x12caf1(0x2a7))tgBot[_0x12caf1(0x169)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x28123a)['catch'](_0x36030f=>{telegramError(_0x36030f);});}function getServerTime(){const _0x4ec3f4=_0x51b267,_0x32317b=new Date();return _0x32317b[_0x4ec3f4(0x151)]()+'/'+(_0x32317b[_0x4ec3f4(0x1e0)]()+0x1)[_0x4ec3f4(0x1c7)]()[_0x4ec3f4(0x221)](0x2,'0')+'/'+_0x32317b[_0x4ec3f4(0x287)]()['toString']()[_0x4ec3f4(0x221)](0x2,'0')+'\x20'+_0x32317b[_0x4ec3f4(0x19a)]()['toString']()[_0x4ec3f4(0x221)](0x2,'0')+':'+_0x32317b[_0x4ec3f4(0x274)]()[_0x4ec3f4(0x1c7)]()[_0x4ec3f4(0x221)](0x2,'0')+':'+_0x32317b[_0x4ec3f4(0x239)]()[_0x4ec3f4(0x1c7)]()[_0x4ec3f4(0x221)](0x2,'0');}function getTimeStamp(){const _0x4ed480=_0x51b267,_0x1c7303=shiftedTime();return _0x1c7303[_0x4ed480(0x151)]()+'/'+(_0x1c7303['getMonth']()+0x1)[_0x4ed480(0x1c7)]()[_0x4ed480(0x221)](0x2,'0')+'/'+_0x1c7303[_0x4ed480(0x287)]()[_0x4ed480(0x1c7)]()[_0x4ed480(0x221)](0x2,'0')+'\x20'+_0x1c7303[_0x4ed480(0x19a)]()['toString']()[_0x4ed480(0x221)](0x2,'0')+':'+_0x1c7303[_0x4ed480(0x274)]()['toString']()[_0x4ed480(0x221)](0x2,'0')+':'+_0x1c7303[_0x4ed480(0x239)]()[_0x4ed480(0x1c7)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x1a0099=_0x51b267,_0x49797c=new Date();let _0x2d711c=_0x49797c;if(settings[_0x1a0099(0x1ac)]&&settings[_0x1a0099(0x1ac)]!==0x0)_0x2d711c=fns[_0x1a0099(0x29b)](_0x49797c,{'hours':settings[_0x1a0099(0x1ac)]});return _0x2d711c;}function startScheduler(){const _0xe0e5c1=_0x51b267;let _0x2b7edb=new Date()[_0xe0e5c1(0x1ee)]();_0x2b7edb==0x1&&backupConfigFiles();_0x2b7edb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4091de=_0x51b267;fs[_0x4091de(0x29e)](configpath,{'withFileTypes':!![]})['forEach'](_0x4aa8d2=>{const _0x2f3330=_0x4091de;if(!_0x4aa8d2[_0x2f3330(0x27e)]())fs['copyFileSync'](configpath+_0x4aa8d2[_0x2f3330(0x289)],configbackuppath+_0x4aa8d2[_0x2f3330(0x289)]);});}function _0x3a20(){const _0x207040=['2FA\x20login\x20rejected','all','635574cZYzrX','4014Eppesa','args','restarting\x20Bot\x20','getDate','node-telegram-bot-api','name','max','telegramEvents','5\x20min','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/status\x20-\x20show\x20bot(s)\x20status\x0a','RSA-OAEP','515532irTZvb','-----------------------------------------------------------------------------------','(((.+)+)+)+$','Invalid\x20IP\x20address','Unauthorized\x20attempt\x20to\x20update\x20bot','callback_query','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','/:bot/configuration','2FA\x20required','add','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','-results.json','readdirSync','referer','starting\x20new\x20bot\x20|\x20Bot\x20','ipaddr.js','</b>\x20?','live','NTBA_FIX_319','type','/disable\x20-\x20disable\x20notifications\x0a','orders','3000','getFullYear','1000','conn','bcryptjs','exp','server','auth','crypto','hasOwnProperty','Access\x20enabled\x20for\x20','yes','telegramEnabled','accept','entries','981380lTyNur','login','8QfSCUs','reason','Ok,\x20will\x20send\x20order\x20notifications\x20only','join','loginRequired','disconnect','Ok,\x20will\x20send\x20alert\x20notifications\x20only','store','sendMessage','2FA\x20login\x20required','analytics','secret','includes','connected','telegramChatId','starting\x20bot\x20|\x20Bot\x20','argv','Crypt','temporary\x20access\x20rejected','reload','botID','Login\x20rejected','store-configuration','new','bot-','/:bot/history','-config.json','Unauthorized\x20attempt\x20to\x20get\x20logs','getTime','toIPv4Address','botname','forEach','access\x20timeout','All\x20bots','Invalid\x20username\x20or\x20IP\x20address','match','keys','You\x20can\x20use\x20the\x20following\x20commands:\x0a','pidRefreshToken','stopped','bb-config.json','randomFillSync','send','order','/:bot/performance','timestamp','temporary\x20token\x20generated','defaults','deleted\x20Bot\x20','24qTtdoi','headers','push','stop','length','isValid','login\x20not\x20required','<b>Balance\x20Bot\x20status:</b>\x0a','getHours','createServer',',\x20must\x20be\x20a\x204\x20digit\x20number','assign','child_process','logout','initclient','build2','Invalid\x20Telegram\x20token','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','bot','showname','search','privateKey','answerCallbackQuery','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','apiKey','timeshift','clientip','write','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','idling\x20bot\x20\x20\x20|\x20Bot\x20','port','All\x20bots\x20running\x20right\x20now','4526790zMghtU','kill','secure','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','enabled\x20Bot\x20','existsSync','jsonwebtoken','settings.','sockets','build','telegramUsername','once','then','hex','15\x20min','uuid','event','telegram','constructor','toString','storeHeadless','expiry','handshake','error','blacklist','started','ipv6','Token\x20blacklisted','temporary\x20access\x20not\x20allowed','No\x20bots\x20running\x20right\x20now','************','\x20>\x20','/enable\x20-\x20enable\x20notifications\x0a','-performance.json','user','bbUsername','stopPolling',':\x20Bot\x20Mgr\x20>\x20','getPortfolio','f2aRequired','cloneDeep','inherit','2TsZinS','kind','getMonth','removeListener','@analytics/google-analytics','use','exit','decrypt','2FA','socket.io','invalid\x20credentials','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/:bot/portfolio','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Notifications\x20disabled\x0a','path','getUTCHours','Password\x20reset\x20rejected','place-order','emit','status','add-bot','token','Balance\x20Bot\x20Server','RSA','login\x20token\x20generated','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','allow','apply','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','sortBy','-events.json','parse','User\x20has\x20been\x20validated','404\x20Not\x20Found','filter','removeAllListeners','chat','getStartingBalances','settings','log','http','Allow\x20login\x20from\x20IP\x20address\x20<b>','update-bot','map','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','get-logs','yargs/yargs','test','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','telegramIpApproval','reset-password','2FA\x20login\x20token\x20generated','data','SIGTERM','update-bb','find','disabled','error\x20while\x20deleting\x20config\x20files:\x20','page','generateKeyPairAsync','telegramToken','lowdb','backup/','padStart','hashSync','bot.js','isIPv4MappedAddress','/:bot/coins','HTML','new-disabled','bb-secure.json','from','access','/restart\x20-\x20restart\x20bot(s)\x0a','remove','show','pidExpireLogin','/:bot/support','Balance\x20Bot','telegram2FaApproval','Notifications\x20disabled','store-settings','127.0.0.1','onText','28889VEbhLf','get-starting-balances','\x20only\x0a','getSeconds','ipc','Orders','enabled','remoteAddress','store-headless','Unauthorized\x20attempt\x20to\x20add\x20bot','function','\x20|\x20','154dXJAjR','lowdb/adapters/FileSync','sign','cancel-loading','host','Bot\x20','index.html','username','value','listen','17720KCSlWN','UA-192771731-1','success','Invalid\x20authentication\x20token\x20(1)','message','compareSync','Unauthorized\x20attempt\x20to\x20store\x20configuration','hybrid-crypto-js','1036824RCXcuo','temporaryAccessAllowed','publicKey','version','sendFile','SIGINT','Unauthorized\x20attempt\x20to\x20log\x20out','mkdirSync','get','version.json','/:bot','whitelist','botmanager','split','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','login\x20token\x20valid','catch','reject','config/','/help\x20-\x20show\x20available\x20commands\x0a','Error:\x20Invalid\x20argument\x20','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','default','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Login\x20accepted','temporary\x20access\x20timeout','whitelistEnabled','unlinkSync','Unauthorized\x20login\x20attempt\x20(timeout)','bbPassword','placeOrder','Unauthorized\x20attempt\x20to\x20update\x20settings','getMinutes','set','cancelLoading','Unauthorized\x20login\x20attempt\x20(public\x20key)','Alerts','randomBytes','password','alerts','env','storeConfiguration','isDirectory','bots','verify'];_0x3a20=function(){return _0x207040;};return _0x3a20();}function triggerAnalytics(){const _0x1dfdd1=_0x51b267;analytics[_0x1dfdd1(0x21c)]({'title':_0x1dfdd1(0x1f5),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x8d0d1e,_0x5652a5){const _0x57d1bf=_0x51b267;if(_0x8d0d1e[_0x57d1bf(0x249)]==settings[_0x57d1bf(0x1d7)]&&bcrypt[_0x57d1bf(0x251)](_0x8d0d1e[_0x57d1bf(0x27a)],settings[_0x57d1bf(0x271)])){if(settings[_0x57d1bf(0x1db)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x53a3c2=generateLoginToken(_0x5652a5);return{'allow':!![],'reason':_0x57d1bf(0x1f7),'token':_0x53a3c2};}}else return{'allow':![],'reason':_0x57d1bf(0x1e8),'token':null};}function refreshToken(_0x29933e){const _0x513457=_0x51b267,_0x38d624=generateLoginToken(_0x29933e);return{'allow':!![],'reason':_0x513457(0x1f7),'token':_0x38d624};}function validateAccess(_0x5e8c9c,_0x10a727){const _0x374d17=_0x51b267;let _0x4a8e13=devices[_0x10a727]['ip'],_0x21442d;const _0x1a822e=_0x4fcf3e=>{const _0x305b1d=_0x5c06;if(settings[_0x305b1d(0x165)]){if(settings[_0x305b1d(0x1db)]){if(telegram2FaApproved(_0x10a727)){const _0x54db6b=generateLoginToken(_0x10a727);return{'allow':!![],'reason':_0x305b1d(0x215),'token':_0x54db6b};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x21442d=validToken(_0x4fcf3e,_0x10a727),_0x21442d[_0x305b1d(0x159)](_0x305b1d(0x24e))?{'allow':!![],'reason':_0x305b1d(0x263),'token':_0x4fcf3e}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x305b1d(0x198),'token':null};};if(settings[_0x374d17(0x26e)]){let _0x57f8b6=[...settings[_0x374d17(0x25f)],'::1','::ffff:127.0.0.1',_0x374d17(0x234)];if(_0x57f8b6[_0x374d17(0x16d)](_0x4a8e13))return _0x1a822e(_0x5e8c9c);else{_0x21442d=validToken(_0x5e8c9c,_0x10a727);if(_0x21442d[_0x374d17(0x159)](_0x374d17(0x24e)))return _0x1a822e(_0x5e8c9c);else{if(telegramIpApproved(_0x10a727)){const _0x567a61=generateToken(_0x10a727);return _0x21442d=_0x1a822e(_0x5e8c9c),_0x21442d[_0x374d17(0x1f9)]?{'allow':!![],'reason':_0x374d17(0x18f),'token':_0x567a61}:_0x21442d;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x374d17(0x29a),'token':null}:{'allow':![],'reason':_0x374d17(0x1d0),'token':null};}}}else return _0x1a822e(_0x5e8c9c);}function timelyDecrypt(_0x334cce,_0xed58fb=!![]){const _0x4f225a=_0x51b267;if(_0x334cce)try{const _0x4c5606=crypt[_0x4f225a(0x1e5)](secure[_0x4f225a(0x1a8)],_0x334cce)[_0x4f225a(0x250)],_0x50461f=_0x4c5606['split']('@')[0x0],_0x126ffb=_0x4c5606['split']('@')[0x1],_0x1e2564=new Date()[_0x4f225a(0x17d)]();if(_0xed58fb){if(_0x1e2564-_0x126ffb<maxSecretAge*0x3e8)return _0x50461f;else return![];}else return _0x50461f;}catch(_0x3f0cc8){return![];}else return![];}const validToken=(_0x19a151,_0x2c56b8)=>{const _0x3ddbf9=_0x51b267,_0x539e75=devices[_0x2c56b8]['ip'];if(!_0x19a151)return{'error':'No\x20authentication\x20token'};for(let _0x25ed3e of blacklist){if(_0x25ed3e[_0x3ddbf9(0x1f4)]==_0x19a151)return{'error':_0x3ddbf9(0x1cf)};}let _0x3045f1;try{_0x3045f1=jwt[_0x3ddbf9(0x280)](_0x19a151,secure[_0x3ddbf9(0x16c)]+_0x2c56b8);}catch{return{'error':_0x3ddbf9(0x24f)};}if(!_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x1ad))&&!_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x249))||!_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x155)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x249))&&_0x3045f1['hasOwnProperty'](_0x3ddbf9(0x1ad))){const {clientip:_0x48a8ce}=_0x3045f1;return _0x539e75==_0x48a8ce?{'success':_0x3ddbf9(0x1ff)}:{'error':_0x3ddbf9(0x295)};}else{if(_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x249))&&_0x3045f1[_0x3ddbf9(0x159)](_0x3ddbf9(0x1ad))){const {username:_0x224657,clientip:_0x58c6d6}=_0x3045f1;return settings[_0x3ddbf9(0x1d7)]==_0x224657&&_0x539e75==_0x58c6d6?{'success':_0x3ddbf9(0x1ff)}:{'error':_0x3ddbf9(0x183)};}}},generateLoginToken=_0x39530b=>{const _0x3da1b8=_0x51b267;if(_0x39530b){const _0x333318=devices[_0x39530b]['ip'];return jwt[_0x3da1b8(0x244)]({'username':settings[_0x3da1b8(0x1d7)],'clientip':_0x333318},secure[_0x3da1b8(0x16c)]+_0x39530b,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2d2ec3=>{const _0x31e15e=_0x51b267;if(_0x2d2ec3){const _0x303d82=devices[_0x2d2ec3]['ip'];return jwt[_0x31e15e(0x244)]({'clientip':_0x303d82},secure[_0x31e15e(0x16c)]+_0x2d2ec3,{'expiresIn':devices[_0x2d2ec3]['telegramIpApproval'][_0x31e15e(0x1c9)]*0x3c});}else return![];},telegramIpApproved=_0xd1cf62=>{const _0x33fc02=_0x51b267;let _0x1a0a6b=![];return devices[_0xd1cf62][_0x33fc02(0x213)]&&devices[_0xd1cf62][_0x33fc02(0x213)][_0x33fc02(0x1c9)]!=_0x33fc02(0x265)&&(_0x1a0a6b=devices[_0xd1cf62][_0x33fc02(0x213)][_0x33fc02(0x1ad)]==devices[_0xd1cf62]['ip']&&new Date()['getTime']()-devices[_0xd1cf62]['telegramIpApproval']['timestamp']<devices[_0xd1cf62][_0x33fc02(0x213)][_0x33fc02(0x1c9)]*0x3c*0x3e8),_0x1a0a6b;},telegram2FaApproved=_0x1ecd46=>{const _0x5b6cc1=_0x51b267;let _0x5089de=![];return devices[_0x1ecd46]['telegram2FaApproval']&&devices[_0x1ecd46][_0x5b6cc1(0x231)][_0x5b6cc1(0x1c9)]!='reject'&&(_0x5089de=devices[_0x1ecd46][_0x5b6cc1(0x231)][_0x5b6cc1(0x1ad)]==devices[_0x1ecd46]['ip']&&new Date()[_0x5b6cc1(0x17d)]()-devices[_0x1ecd46][_0x5b6cc1(0x231)][_0x5b6cc1(0x18e)]<devices[_0x1ecd46][_0x5b6cc1(0x231)][_0x5b6cc1(0x1c9)]*0x3c*0x3e8),_0x5089de;},normalizeIP=_0x529257=>{const _0x5a07da=_0x51b267;let _0x4224cb=null,_0xb863d5=null;if(ipaddr[_0x5a07da(0x197)](_0x529257)){const _0x79f911=ipaddr[_0x5a07da(0x1fe)](_0x529257);_0x79f911[_0x5a07da(0x1df)]()===_0x5a07da(0x1ce)?(_0x79f911[_0x5a07da(0x224)]()&&(_0x4224cb=_0x79f911[_0x5a07da(0x17e)]()['toString']()),_0xb863d5=_0x79f911['toString']()):(_0x4224cb=_0x79f911['toString'](),_0xb863d5=_0x79f911['toIPv4MappedAddress']()[_0x5a07da(0x1c7)]());}return{'show':_0x4224cb?_0x4224cb:_0xb863d5,'store':_0xb863d5};};