const _0x124d42=_0x2697;(function(_0x28872f,_0x273ed1){const _0x522e27=_0x2697,_0x210327=_0x28872f();while(!![]){try{const _0x193e15=-parseInt(_0x522e27(0x2f9))/0x1*(parseInt(_0x522e27(0x20e))/0x2)+parseInt(_0x522e27(0x287))/0x3+-parseInt(_0x522e27(0x31e))/0x4+parseInt(_0x522e27(0x286))/0x5+-parseInt(_0x522e27(0x1f0))/0x6*(parseInt(_0x522e27(0x28f))/0x7)+-parseInt(_0x522e27(0x236))/0x8*(-parseInt(_0x522e27(0x2b8))/0x9)+parseInt(_0x522e27(0x24b))/0xa*(parseInt(_0x522e27(0x277))/0xb);if(_0x193e15===_0x273ed1)break;else _0x210327['push'](_0x210327['shift']());}catch(_0x7dc91d){_0x210327['push'](_0x210327['shift']());}}}(_0x360c,0x3bfa4));const _0x39fdaa=function(){let _0xa764a4=!![];return function(_0x3ff368,_0x1706c6){const _0x53c364=_0xa764a4?function(){const _0x2989c4=_0x2697;if(_0x1706c6){const _0x7f02d=_0x1706c6[_0x2989c4(0x272)](_0x3ff368,arguments);return _0x1706c6=null,_0x7f02d;}}:function(){};return _0xa764a4=![],_0x53c364;};}(),_0x42452d=_0x39fdaa(this,function(){const _0xe98b54=_0x2697;return _0x42452d[_0xe98b54(0x2cc)]()[_0xe98b54(0x22d)](_0xe98b54(0x2ab))[_0xe98b54(0x2cc)]()[_0xe98b54(0x2ce)](_0x42452d)[_0xe98b54(0x22d)](_0xe98b54(0x2ab));});_0x42452d();'use strict';process['env'][_0x124d42(0x25a)]=0x1;const childProcess=require(_0x124d42(0x28c)),FileSync=require(_0x124d42(0x1ee)),fs=require('fs'),fns=require(_0x124d42(0x26e)),low=require(_0x124d42(0x237)),path=require(_0x124d42(0x311)),crypto=require(_0x124d42(0x314)),Crypt=require('hybrid-crypto-js')[_0x124d42(0x1ec)],RSA=require(_0x124d42(0x26c))[_0x124d42(0x210)],bcrypt=require(_0x124d42(0x2d7)),jwt=require(_0x124d42(0x295)),analyticsLib=require('analytics')[_0x124d42(0x212)],googleAnalytics=require('@analytics/google-analytics')[_0x124d42(0x212)],ipaddr=require(_0x124d42(0x2cb)),argv=require(_0x124d42(0x1f6))(process[_0x124d42(0x254)][_0x124d42(0x326)](0x2))[_0x124d42(0x254)],PORT=argv[_0x124d42(0x209)]||'3000',pattern=/^[0-9]{2,4}$/;if(!pattern[_0x124d42(0x289)](PORT))return console['log'](_0x124d42(0x202)+PORT+_0x124d42(0x25f)),process[_0x124d42(0x265)](0x1);const HOST=argv[_0x124d42(0x225)]||null,userID=argv[_0x124d42(0x228)]||'';let bbpath=_0x124d42(0x294),bbpath2='';const botfile='bot.js',configfile=_0x124d42(0x2ae),settingsfile=_0x124d42(0x2f3),securefile=_0x124d42(0x24e);!fs[_0x124d42(0x21a)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x124d42(0x288)),configpath=userID?bbpath+_0x124d42(0x302)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x124d42(0x253);!fs[_0x124d42(0x21a)](configpath)&&fs[_0x124d42(0x255)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x124d42(0x255)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x124d42(0x297)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x124d42(0x2f7)]({'settings':{'timeshift':0x0}})[_0x124d42(0x297)]();function _0x360c(){const _0x2f3e9a=['whitelistEnabled','token','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','cloneDeep','once','/:bot/portfolio','placeOrder','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','decrypt','ipaddr.js','toString','Unauthorized\x20attempt\x20to\x20add\x20bot','constructor','orders','store','new-disabled','access\x20timeout','connected','listen','ipc','stopped','bcryptjs','telegramEvents','compareSync','remove','build2','login\x20token\x20generated','page','Unauthorized\x20attempt\x20to\x20log\x20out','chat','sendMessage','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','name','30\x20min','login','version.json','showname','</b>\x20?','entries','add','password','invalid\x20credentials','live','f2aRequired','error','getSeconds','split','No\x20authentication\x20token','referer','bb-settings.json','All\x20bots','hashSync','auth','defaults','message','25cbDiLv','Temporary\x20access\x20rejected','enabled\x20Bot\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','value','clientip','************','Unauthorized\x20attempt\x20to\x20store\x20configuration','getDate','config/','socket.io','running','SIGTERM','remoteAddress','send','connection','uuid','/status\x20-\x20show\x20bot(s)\x20status\x0a','status','includes','expiry','login\x20token\x20valid','hasOwnProperty','RSA-OAEP','path','temporary\x20access\x20timeout','sendFile','crypto','disabled','getPortfolio','removeListener','storeHeadless','telegramEnabled','accept','pidExpireLogin','whitelist','/enable\x20-\x20enable\x20notifications\x0a','1662812vArChp','Notifications\x20disabled\x0a','reload','filter','Alerts','Invalid\x20authentication\x20token\x20(1)','disconnect','forEach','slice','cancel-loading','botmanager','sortBy','add-bot','-config.json','started','enabled','2FA\x20login\x20required','getTime','secret','isDirectory','Orders','Password\x20reset\x20rejected','/off\x20-\x20stop\x20bot(s)\x0a','::1','store-configuration','Crypt','catch','lowdb/adapters/FileSync','reject','688914DGuHwl','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','publicKey','randomBytes','find','get','yargs/yargs','inherit','generateKeyPairAsync','then','timestamp','join','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','map','Notifications\x20enabled\x0a','update-bot','conn','answerCallbackQuery','Error:\x20Invalid\x20argument\x20','new','kill','All\x20bots\x20running\x20right\x20now','login\x20not\x20required','restarting\x20Bot\x20','apiKey','port','from',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Allow\x20login\x20from\x20IP\x20address\x20<b>','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','27274JHaNlD','Invalid\x20username\x20or\x20IP\x20address','RSA','static','default','bot-','use','settings.','/:bot/performance','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','loginRequired','initclient','existsSync','<b>Balance\x20Bot\x20status:</b>\x0a','::ffff:127.0.0.1','Ok,\x20will\x20send\x20alert\x20notifications\x20only','encryptedUuid','Bot\x20','function','toIPv4Address','Invalid\x20authentication\x20token\x20(2)','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','randomFillSync','host','error\x20while\x20deleting\x20config\x20files:\x20','telegramToken','user','Notifications\x20enabled','blacklist','logged\x20out','Access\x20enabled\x20for\x20','search','/:bot','Unauthorized\x20login\x20attempt\x20(public\x20key)','-performance.json','reset-password','delete-bot','getFullYear','allow','Balance\x20Bot','1240maCXTm','lowdb','build','yes','access','Unauthorized\x20login\x20attempt\x20(timeout)','storeConfiguration','unlinkSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','alerts','2FA','assign','/on\x20-\x20start\x20bot(s)\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','getUTCHours','http','Unauthorized\x20attempt\x20to\x20get\x20portfolio','push','temporary\x20token\x20generated','handshake','Login\x20rejected','5710NPLviE','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','length','bb-secure.json','getHours','pidRefreshToken','Login\x20accepted','You\x20can\x20use\x20the\x20following\x20commands:\x0a','backup/','argv','mkdirSync','callback_query','temporaryAccessAllowed',':\x20Bot\x20Mgr\x20>\x20','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','NTBA_FIX_319','5\x20min','removeAllListeners','Invalid\x20IP\x20address','UA-192771731-1',',\x20must\x20be\x20a\x204\x20digit\x20number','get-portfolio','event','Notifications\x20disabled','botname','node-telegram-bot-api','exit','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','show','ipv6','2FA\x20required','data','privateKey','hybrid-crypto-js','/help\x20-\x20show\x20available\x20commands\x0a','date-fns','stop','-events.json','Token\x20blacklisted','apply','Unauthorized\x20attempt\x20to\x20get\x20logs','log','getMinutes','store-settings','3586ZsoosL','copyFileSync','get-logs','kind','isValid','all','onText','index.html','No\x20bots\x20running\x20right\x20now','settings','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','set','stopPolling','logout','\x20minutes','1596455TkENTp','830169bGgNsB','clients','test','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','idling\x20bot\x20\x20\x20|\x20Bot\x20','child_process','readdirSync','telegramChatId','7FjXLZB','bbPassword','\x20|\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','success','bb/','jsonwebtoken','sign','write','padStart','emit','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','login\x20required','store-headless','-----------------------------------------------------------------------------------','botID','bot','All','Unauthorized\x20attempt\x20to\x20update\x20settings','match','Bot\x20Mgr\x20>\x20','exp','isIPv4MappedAddress','\x20only\x0a','telegramUsername','bbUsername','parse','username','(((.+)+)+)+$','telegram','starting\x20new\x20bot\x20|\x20Bot\x20','bb-config.json','HTML','reason','timeshift','-results.json','type','telegramIpApproval','bots','getStartingBalances','createServer','19449ePQEMI','sockets','2FA\x20login\x20token\x20generated','cancelLoading','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','User\x20has\x20been\x20validated','Notifications\x20types:\x20','\x20>\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'];_0x360c=function(){return _0x2f3e9a;};return _0x360c();}const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x124d42(0x2f7)]({'secure':{},'blacklist':[]})[_0x124d42(0x297)]();let crypt=new Crypt({'md':'sha256','rsaStandard':_0x124d42(0x310)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x124d42(0x2e5))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x124d42(0x245))[_0x124d42(0x2b7)](app);app[_0x124d42(0x214)](express[_0x124d42(0x211)](path[_0x124d42(0x1fb)](__dirname,bbpath2,'build2'))),app[_0x124d42(0x214)](express[_0x124d42(0x211)](path['join'](__dirname,bbpath2,_0x124d42(0x238)))),app['get']('/',function(_0x16ac05,_0x543053){const _0x24666d=_0x124d42;_0x543053['sendFile'](path[_0x24666d(0x1fb)](__dirname,bbpath2,_0x24666d(0x2db),'index.html'));}),app[_0x124d42(0x1f5)](_0x124d42(0x22e),function(_0x275d02,_0x11ac5d){const _0xca0826=_0x124d42;_0x11ac5d['sendFile'](path['join'](__dirname,bbpath2,_0xca0826(0x238),_0xca0826(0x27e)));}),app['get'](_0x124d42(0x2c6),(_0x30c7c3,_0x116695)=>{const _0x1e20e0=_0x124d42;_0x116695[_0x1e20e0(0x313)](path[_0x1e20e0(0x1fb)](__dirname,bbpath2,_0x1e20e0(0x238),_0x1e20e0(0x27e)));}),app[_0x124d42(0x1f5)](_0x124d42(0x216),(_0x5036a0,_0xbf8ab0)=>{const _0x5356a9=_0x124d42;_0xbf8ab0['sendFile'](path[_0x5356a9(0x1fb)](__dirname,bbpath2,_0x5356a9(0x238),'index.html'));}),app[_0x124d42(0x1f5)]('/:bot/coins',(_0x1dfac8,_0x4fe19c)=>{const _0x33c8bb=_0x124d42;_0x4fe19c[_0x33c8bb(0x313)](path[_0x33c8bb(0x1fb)](__dirname,bbpath2,'build',_0x33c8bb(0x27e)));}),app[_0x124d42(0x1f5)]('/:bot/history',(_0x1b23d1,_0x1c9ced)=>{const _0x4641aa=_0x124d42;_0x1c9ced[_0x4641aa(0x313)](path[_0x4641aa(0x1fb)](__dirname,bbpath2,_0x4641aa(0x238),'index.html'));}),app[_0x124d42(0x1f5)]('/:bot/configuration',(_0x294b23,_0x1658a2)=>{const _0x5c204f=_0x124d42;_0x1658a2[_0x5c204f(0x313)](path[_0x5c204f(0x1fb)](__dirname,bbpath2,'build',_0x5c204f(0x27e)));}),app[_0x124d42(0x1f5)]('/:bot/support',(_0x60605a,_0x1f83c8)=>{const _0x30d693=_0x124d42;_0x1f83c8[_0x30d693(0x313)](path[_0x30d693(0x1fb)](__dirname,bbpath2,_0x30d693(0x238),'index.html'));});if(HOST)http[_0x124d42(0x2d4)](PORT,HOST);else http['listen'](PORT);const io=require(_0x124d42(0x303))(http,{}),analytics=analyticsLib({'app':_0x124d42(0x235),'plugins':[googleAnalytics({'trackingId':_0x124d42(0x25e)})]}),TelegramBot=require(_0x124d42(0x264));let tgBot;if(settings[_0x124d42(0x227)]&&settings[_0x124d42(0x227)]!=''&&settings['telegramUsername']&&settings[_0x124d42(0x2a7)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x26b8ae=_0x124d42;console[_0x26b8ae(0x274)](''),console[_0x26b8ae(0x274)](_0x26b8ae(0x29d)),logging(_0x26b8ae(0x259)+PORT),console[_0x26b8ae(0x274)]('-----------------------------------------------------------------------------------');if(config[_0x26b8ae(0x24d)]!=0x0)config['forEach'](_0x3ab842=>{const _0x4efe4c=_0x26b8ae;if(_0x3ab842['status']=='enabled'||_0x3ab842[_0x4efe4c(0x30b)]==_0x4efe4c(0x203))logging('starting\x20bot\x20|\x20Bot\x20'+_0x3ab842[_0x4efe4c(0x29e)]+'\x20|\x20'+_0x3ab842[_0x4efe4c(0x263)]),startBot([_0x3ab842[_0x4efe4c(0x29e)],userID],{'cwd':bbpath},function(_0x332070){if(_0x332070)logging(_0x332070);});else(_0x3ab842[_0x4efe4c(0x30b)]==_0x4efe4c(0x315)||_0x3ab842[_0x4efe4c(0x30b)]==_0x4efe4c(0x2d1))&&logging(_0x4efe4c(0x28b)+_0x3ab842[_0x4efe4c(0x29e)]+_0x4efe4c(0x291)+_0x3ab842[_0x4efe4c(0x263)]);});else!newBot&&console[_0x26b8ae(0x274)](_0x26b8ae(0x243));if(newBot)addBot();console[_0x26b8ae(0x274)](_0x26b8ae(0x29d)),console[_0x26b8ae(0x274)]('');}function startSocket(){const _0x32cf8c=_0x124d42;io['on'](_0x32cf8c(0x308),_0x555237=>{const _0x504e0a=_0x32cf8c;let _0x4582c9,_0x3607c6,_0xb53f8b,_0x555b07,_0x516b76;const _0x2fb2c5=_0x555237[_0x504e0a(0x249)]['headers'][_0x504e0a(0x2f2)];_0x3607c6=_0x2fb2c5[_0x504e0a(0x2a2)](/bot[0-9]{3}/);if(_0x3607c6)_0xb53f8b=_0x3607c6[0x0][_0x504e0a(0x2a2)](/[0-9]{3}/);if(_0xb53f8b)_0x4582c9=_0xb53f8b[0x0];else _0x4582c9=_0x504e0a(0x328);const _0x5e60a5=_0x555237[_0x504e0a(0x249)][_0x504e0a(0x2f6)][_0x504e0a(0x21e)];if(!_0x5e60a5)_0x555237['emit'](_0x504e0a(0x30b),{'publicKey':secure['publicKey']});else{_0x555b07=timelyDecrypt(_0x5e60a5,![]);if(!_0x555b07)logging(_0x504e0a(0x22f));else{_0x516b76=normalizeIP(_0x555237[_0x504e0a(0x200)][_0x504e0a(0x306)])[_0x504e0a(0x2d0)];if(!devices[_0x555b07])devices[_0x555b07]={'uuid':_0x555b07,'access':{'token':null}};devices[_0x555b07]['ip']=_0x516b76;const _0x499a1a=addClient(_0x555237['id'],_0x555b07,_0x4582c9);setAccess(_0x499a1a),_0x555237['on']('login',_0x58e6fd=>{const _0x34f0ca=_0x504e0a,_0x3a1e6d=timelyDecrypt(_0x58e6fd[_0x34f0ca(0x2ea)]);if(_0x3a1e6d){_0x58e6fd={'username':_0x58e6fd[_0x34f0ca(0x2aa)],'password':_0x3a1e6d},devices[_0x555b07][_0x34f0ca(0x23a)]=validateCredentials(_0x58e6fd,_0x555b07);if(devices[_0x555b07][_0x34f0ca(0x23a)][_0x34f0ca(0x234)]==![]&&devices[_0x555b07][_0x34f0ca(0x23a)][_0x34f0ca(0x2b0)]==_0x34f0ca(0x32e))_0x555237[_0x34f0ca(0x299)]('status',{'access':devices[_0x555b07][_0x34f0ca(0x23a)]}),loginAccess2FA(_0x555b07,_0x516b76);else{if(devices[_0x555b07][_0x34f0ca(0x23a)][_0x34f0ca(0x234)]==![]&&devices[_0x555b07]['access'][_0x34f0ca(0x2b0)]==_0x34f0ca(0x2eb))_0x555237['emit'](_0x34f0ca(0x30b),{'access':devices[_0x555b07][_0x34f0ca(0x23a)]});else devices[_0x555b07][_0x34f0ca(0x23a)][_0x34f0ca(0x234)]&&devices[_0x555b07][_0x34f0ca(0x23a)][_0x34f0ca(0x2b0)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x555b07)[_0x34f0ca(0x325)](_0x3af714=>{setAccess(_0x3af714);}),setTokenRefresh(_0x555b07),setSessionTimeout(_0x34f0ca(0x2e4),_0x555b07));}}else logging(_0x34f0ca(0x23b));}),_0x555237['on'](_0x504e0a(0x231),()=>{resetPassword();}),_0x555237['on'](_0x504e0a(0x324),_0x318b9b=>{removeClient(_0x555237['id']);});}}});}function initClient(_0x37b848){const _0x3f54e2=_0x124d42;if(_0x37b848!=_0x3f54e2(0x328)&&config[_0x3f54e2(0x208)]!=''){if(pid[_0x37b848])pid[_0x37b848][_0x3f54e2(0x307)]({'function':_0x3f54e2(0x219),'args':null});}}function getSocket(_0x20954e){const _0x20f2a0=_0x124d42;return io[_0x20f2a0(0x2b9)]['sockets']['get'](_0x20954e);}function setAccess(_0x17bb77){const _0x4ada8e=_0x124d42,_0x2094dd=getSocket(_0x17bb77['id']),_0x314131=_0x17bb77[_0x4ada8e(0x309)],_0x209009=_0x17bb77[_0x4ada8e(0x29f)];devices[_0x314131][_0x4ada8e(0x23a)]=validateAccess(devices[_0x314131]['access'][_0x4ada8e(0x2c2)],_0x314131),_0x2094dd[_0x4ada8e(0x1fb)](_0x314131);if(devices[_0x314131][_0x4ada8e(0x23a)][_0x4ada8e(0x234)]){_0x2094dd['join'](_0x209009);if(_0x209009==_0x4ada8e(0x328))initializeSocketBotManager(_0x2094dd);else initializeSocketBot(_0x2094dd);initClient(_0x209009);}devices[_0x314131][_0x4ada8e(0x23a)]['token']&&devices[_0x314131]['access'][_0x4ada8e(0x2b0)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x4ada8e(0x240),_0x314131),devices[_0x314131][_0x4ada8e(0x23a)][_0x4ada8e(0x2c2)]&&devices[_0x314131][_0x4ada8e(0x23a)][_0x4ada8e(0x2b0)]==_0x4ada8e(0x2ba)&&setSessionTimeout(_0x4ada8e(0x2e4),_0x314131),_0x2094dd[_0x4ada8e(0x299)](_0x4ada8e(0x30b),{'status':_0x17bb77['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x314131][_0x4ada8e(0x23a)],'externalip':devices[_0x314131]['ip'],'publicKey':secure[_0x4ada8e(0x1f2)]}),devices[_0x314131][_0x4ada8e(0x23a)][_0x4ada8e(0x234)]==![]&&devices[_0x314131][_0x4ada8e(0x23a)][_0x4ada8e(0x2b0)]=='2FA\x20required'&&temporaryAccess2FA(_0x314131,devices[_0x314131]['ip']);}function setSessionTimeout(_0x4ffa8e,_0x54cc45){const _0x54a811=_0x124d42;let _0xf3ba5a;if(_0x4ffa8e=='login')_0xf3ba5a=loginExpiry*0x3c*0x3e8;else _0xf3ba5a=devices[_0x54cc45][_0x54a811(0x2b4)][_0x54a811(0x30d)]*0x3c*0x3e8-(new Date()[_0x54a811(0x32f)]()-devices[_0x54cc45]['telegramIpApproval'][_0x54a811(0x1fa)]);if(devices[_0x54cc45][_0x54a811(0x31b)])clearTimeout(devices[_0x54cc45][_0x54a811(0x31b)]);devices[_0x54cc45][_0x54a811(0x31b)]=setTimeout(()=>{const _0x1a1dae=_0x54a811;if(devices[_0x54cc45][_0x1a1dae(0x250)])clearTimeout(devices[_0x54cc45][_0x1a1dae(0x250)]);removeSocketListeners(_0x54cc45),addBlacklist(_0x54cc45),devices[_0x54cc45][_0x1a1dae(0x2b4)]=null,devices[_0x54cc45][_0x1a1dae(0x2c8)]=null,devices[_0x54cc45][_0x1a1dae(0x23a)]['token']=null,devices[_0x54cc45][_0x1a1dae(0x23a)]=validateAccess(devices[_0x54cc45][_0x1a1dae(0x23a)][_0x1a1dae(0x2c2)],_0x54cc45),!(devices[_0x54cc45]['access']['allow']&&devices[_0x54cc45][_0x1a1dae(0x23a)]['reason']==_0x1a1dae(0x206))&&(_0x4ffa8e==_0x1a1dae(0x2e4)?io['to'](_0x54cc45)[_0x1a1dae(0x299)](_0x1a1dae(0x30b),{'access':{'allow':![],'reason':_0x1a1dae(0x2d2),'token':null}}):io['to'](_0x54cc45)[_0x1a1dae(0x299)](_0x1a1dae(0x30b),{'access':{'allow':![],'reason':_0x1a1dae(0x312),'token':null}})),devices[_0x54cc45][_0x1a1dae(0x23a)]['token']=null;},_0xf3ba5a);}function setTokenRefresh(_0x174c60){const _0x4abfa2=_0x124d42;if(devices[_0x174c60][_0x4abfa2(0x250)])clearTimeout(devices[_0x174c60][_0x4abfa2(0x250)]);devices[_0x174c60][_0x4abfa2(0x250)]=setTimeout(()=>{const _0x1d30be=_0x4abfa2;getClientsWithUuid(_0x174c60)[_0x1d30be(0x24d)]!=0x0?(devices[_0x174c60][_0x1d30be(0x23a)]=refreshToken(_0x174c60),io['to'](_0x174c60)['emit'](_0x1d30be(0x30b),{'status':_0x1d30be(0x2d3),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x174c60]['access'],'externalip':devices[_0x174c60]['ip'],'publicKey':secure[_0x1d30be(0x1f2)]}),setTokenRefresh(_0x174c60)):clearTimeout(devices[_0x174c60][_0x1d30be(0x250)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1496dd){const _0x5c75b1=_0x124d42,_0x5c6ec2=getClient(_0x1496dd['id'])[_0x5c75b1(0x309)];_0x1496dd[_0x5c75b1(0x299)](_0x5c75b1(0x2b5),config),_0x1496dd[_0x5c75b1(0x299)]('settings',cleanSettings()),_0x1496dd['on'](_0x5c75b1(0x32a),_0x54ef0b=>{const _0x4b37b5=_0x5c75b1;if(validateAccess(_0x54ef0b,_0x5c6ec2)[_0x4b37b5(0x234)])addBot();else logging(_0x4b37b5(0x2cd));}),_0x1496dd['on'](_0x5c75b1(0x1ff),(_0x35f515,_0x260bd0)=>{const _0x33c015=_0x5c75b1;if(validateAccess(_0x260bd0,_0x5c6ec2)[_0x33c015(0x234)])toggleBot(_0x35f515[_0x33c015(0x29e)],_0x35f515[_0x33c015(0x30b)],_0x35f515[_0x33c015(0x2ec)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1496dd['on'](_0x5c75b1(0x232),(_0x4bd0e1,_0x3f8783)=>{const _0x37c740=_0x5c75b1;if(validateAccess(_0x3f8783,_0x5c6ec2)[_0x37c740(0x234)])deleteBot(_0x4bd0e1);else logging(_0x37c740(0x2fc));}),_0x1496dd['on'](_0x5c75b1(0x276),(_0x31ebe8,_0x3ea0b8)=>{const _0x2c1fd1=_0x5c75b1;if(validateAccess(_0x3ea0b8,_0x5c6ec2)[_0x2c1fd1(0x234)])storeSettings(_0x31ebe8,!![]);else logging(_0x2c1fd1(0x2a1));}),_0x1496dd['on']('update-bb',(_0x256b3f,_0x33f99)=>{const _0x3881b3=_0x5c75b1;if(validateAccess(_0x33f99,_0x5c6ec2)[_0x3881b3(0x234)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x1496dd['on'](_0x5c75b1(0x284),_0x11b8d8=>{const _0x309e91=_0x5c75b1;if(validateAccess(_0x11b8d8,_0x5c6ec2)['allow']){if(devices[_0x5c6ec2][_0x309e91(0x250)])clearTimeout(devices[_0x5c6ec2][_0x309e91(0x250)]);if(devices[_0x5c6ec2][_0x309e91(0x31b)])clearTimeout(devices[_0x5c6ec2][_0x309e91(0x31b)]);removeSocketListeners(getClient(_0x1496dd['id'])[_0x309e91(0x309)]),addBlacklist(_0x5c6ec2),devices[_0x5c6ec2][_0x309e91(0x2b4)]=null,devices[_0x5c6ec2]['telegram2FaApproval']=null,devices[_0x5c6ec2][_0x309e91(0x23a)][_0x309e91(0x2c2)]=null,io['to'](getClient(_0x1496dd['id'])['uuid'])['emit'](_0x309e91(0x30b),{'access':{'allow':![],'reason':_0x309e91(0x22b),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x2f1bfd){const _0x3fba3f=_0x124d42,_0x471a75=getClient(_0x2f1bfd['id'])['bot'],_0x2f48bb=getClient(_0x2f1bfd['id'])['uuid'];_0x2f1bfd['on'](_0x3fba3f(0x279),(_0x3a9c8a,_0x3ea4c2)=>{const _0x474de7=_0x3fba3f;if(validateAccess(_0x3ea4c2,_0x2f48bb)[_0x474de7(0x234)]){if(pid[_0x471a75])pid[_0x471a75]['send']({'function':'emitHistory','args':_0x3a9c8a});}else logging(_0x474de7(0x273));}),_0x2f1bfd['on'](_0x3fba3f(0x260),(_0x14c9b3,_0x238d6b)=>{const _0xfb3228=_0x3fba3f;if(validateAccess(_0x238d6b,_0x2f48bb)[_0xfb3228(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0xfb3228(0x307)]({'function':_0xfb3228(0x316),'args':_0x14c9b3});}else logging(_0xfb3228(0x246));}),_0x2f1bfd['on'](_0x3fba3f(0x1eb),(_0x877a49,_0x3c5511)=>{const _0x4dad35=_0x3fba3f;if(validateAccess(_0x3c5511,_0x2f48bb)[_0x4dad35(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0x4dad35(0x307)]({'function':_0x4dad35(0x23c),'args':_0x877a49});}else logging(_0x4dad35(0x300));}),_0x2f1bfd['on'](_0x3fba3f(0x29c),(_0x82da6a,_0x329ef7)=>{const _0xed938f=_0x3fba3f;if(validateAccess(_0x329ef7,_0x2f48bb)[_0xed938f(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0xed938f(0x307)]({'function':_0xed938f(0x318),'args':_0x82da6a});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x2f1bfd['on']('get-starting-balances',_0x3f9309=>{const _0x1a3c16=_0x3fba3f;if(validateAccess(_0x3f9309,_0x2f48bb)[_0x1a3c16(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0x1a3c16(0x307)]({'function':_0x1a3c16(0x2b6),'args':null});}else logging(_0x1a3c16(0x2c9));}),_0x2f1bfd['on']('place-order',(_0x54bbe0,_0x5bd8bf)=>{const _0x3f6a44=_0x3fba3f;if(validateAccess(_0x5bd8bf,_0x2f48bb)[_0x3f6a44(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0x3f6a44(0x307)]({'function':_0x3f6a44(0x2c7),'args':_0x54bbe0});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x2f1bfd['on'](_0x3fba3f(0x327),_0x401c24=>{const _0x12b858=_0x3fba3f;if(validateAccess(_0x401c24,_0x2f48bb)[_0x12b858(0x234)]){if(pid[_0x471a75])pid[_0x471a75][_0x12b858(0x307)]({'function':_0x12b858(0x2bb),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x2f1bfd['on'](_0x3fba3f(0x284),_0x5eb895=>{const _0x451f53=_0x3fba3f;if(validateAccess(_0x5eb895,_0x2f48bb)['allow']){if(devices[_0x2f48bb][_0x451f53(0x250)])clearTimeout(devices[_0x2f48bb][_0x451f53(0x250)]);if(devices[_0x2f48bb][_0x451f53(0x31b)])clearTimeout(devices[_0x2f48bb][_0x451f53(0x31b)]);removeSocketListeners(getClient(_0x2f1bfd['id'])[_0x451f53(0x309)]),addBlacklist(_0x2f48bb),devices[_0x2f48bb][_0x451f53(0x2b4)]=null,devices[_0x2f48bb]['telegram2FaApproval']=null,devices[_0x2f48bb][_0x451f53(0x23a)][_0x451f53(0x2c2)]=null,io['to'](getClient(_0x2f1bfd['id'])[_0x451f53(0x309)])[_0x451f53(0x299)](_0x451f53(0x30b),{'access':{'allow':![],'reason':_0x451f53(0x22b),'token':null}});}else logging(_0x451f53(0x2de));});}function removeSocketListeners(_0x28a1f3){getClientsWithUuid(_0x28a1f3)['forEach'](_0x2e6796=>{const _0xb65b31=_0x2697;getSocket(_0x2e6796['id'])[_0xb65b31(0x25c)]();});}function cleanSettings(){const _0xf06ae0=_0x124d42;let _0x1da387=settings;return settings[_0xf06ae0(0x227)]&&settings[_0xf06ae0(0x227)]!=''&&(_0x1da387={..._0x1da387,'telegramToken':_0xf06ae0(0x2ff)}),settings[_0xf06ae0(0x290)]&&settings[_0xf06ae0(0x290)]!=''&&(_0x1da387={..._0x1da387,'bbPassword':_0xf06ae0(0x2ff)}),_0x1da387;}function updateBB(){const _0x20c37a=_0x124d42;process[_0x20c37a(0x307)]({'update':!![]});}function startBot(_0x4fd5ba,_0x4e9101,_0x2732a0){const _0x3f64f1=_0x124d42;let _0x1b16f9=![];const _0xed858a=_0x4fd5ba[0x0];_0x4e9101={..._0x4e9101,'stdio':['inherit','inherit',_0x3f64f1(0x1f7),_0x3f64f1(0x2d5)]},pid[_0xed858a]=childProcess['fork'](botfile,_0x4fd5ba,_0x4e9101),pid[_0xed858a]['on']('message',_0x445c22=>{const _0x80f7f5=_0x3f64f1;switch(Object['keys'](_0x445c22)[0x0]){case'botname':updateBotName(_0xed858a,_0x445c22['botname']);break;case'status':updateStatus(_0xed858a,_0x445c22[_0x80f7f5(0x30b)]);break;case'live':updateLive(_0xed858a,_0x445c22[_0x80f7f5(0x2ec)]);break;case _0x80f7f5(0x32c):updateLive(_0xed858a,_0x445c22['started']),io['to'](_0xed858a)['emit'](_0x80f7f5(0x30b),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x80f7f5(0x26f):_0x445c22[_0x80f7f5(0x26f)]=='restart'&&stopBot(_0xed858a);_0x445c22['stop']==_0x80f7f5(0x204)&&toggleBot(_0xed858a,_0x80f7f5(0x315),_0x80f7f5(0x2d6));break;case _0x80f7f5(0x2ac):sendTelegram(_0xed858a,_0x445c22[_0x80f7f5(0x2ac)]);break;case _0x80f7f5(0x220):io['to'](_0xed858a)[_0x80f7f5(0x299)](_0x445c22[_0x80f7f5(0x220)],_0x445c22['args']);break;}}),pid[_0xed858a]['on'](_0x3f64f1(0x2ee),function(_0x55ae87){if(_0x1b16f9)return;_0x1b16f9=!![],_0x2732a0(_0x55ae87);}),pid[_0xed858a]['on']('exit',function(_0x560dc2){const _0xabd360=_0x3f64f1;if(_0x1b16f9)return;_0x1b16f9=!![],_0x2732a0(null);const _0x19c38e=dbConfig[_0xabd360(0x1f5)](_0xabd360(0x2b5))[_0xabd360(0x1f4)]({'botID':_0xed858a})['value']();_0x19c38e&&(_0x19c38e[_0xabd360(0x30b)]==_0xabd360(0x32d)||_0x19c38e[_0xabd360(0x30b)]=='new')&&(updateLive(_0xed858a,'stopped'),logging(_0xabd360(0x207)+_0xed858a),startBot([_0xed858a,userID],{'cwd':bbpath},function(_0x378147){if(_0x378147)logging(_0x378147);}));});}function stopBot(_0x557f7d){const _0x4015ed=_0x124d42;getClientsWithBotID(_0x557f7d)['forEach'](_0x200725=>{const _0x41ef9f=_0x2697;getSocket(_0x200725['id'])[_0x41ef9f(0x324)](!![]),removeClient(_0x200725['id']);});if(pid[_0x557f7d])pid[_0x557f7d][_0x4015ed(0x204)]();}function _0x2697(_0x4fab20,_0x2913a1){const _0x53d39f=_0x360c();return _0x2697=function(_0x42452d,_0x39fdaa){_0x42452d=_0x42452d-0x1ea;let _0x360c15=_0x53d39f[_0x42452d];return _0x360c15;},_0x2697(_0x4fab20,_0x2913a1);}function addBot(){const _0x2c7e10=_0x124d42;let _0x292b44;for(let _0x1ee787=0x1;_0x1ee787<0x3e9;_0x1ee787++){_0x292b44=_0x1ee787['toString']()[_0x2c7e10(0x298)](0x3,'0');let _0xc8275=config[_0x2c7e10(0x1f4)](_0x584e26=>_0x584e26[_0x2c7e10(0x29e)]==_0x292b44);if(!_0xc8275)break;}if(_0x292b44==='1000'){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x2c7e10(0x2ad)+_0x292b44),dbConfig['get']('bots')[_0x2c7e10(0x247)]({'botID':_0x292b44,'botname':_0x2c7e10(0x21f)+_0x292b44,'status':_0x2c7e10(0x203),'live':''})['write'](),startBot([_0x292b44,userID],{'cwd':bbpath},function(_0x389172){if(_0x389172)logging(_0x389172);}),config=getConfiguration(),io['to'](_0x2c7e10(0x328))[_0x2c7e10(0x299)](_0x2c7e10(0x2b5),config);}function deleteBot(_0x4d4948){const _0x858e89=_0x124d42;getClientsWithBotID(_0x4d4948)[_0x858e89(0x325)](_0x17639d=>{const _0x128bac=_0x858e89;getSocket(_0x17639d['id'])[_0x128bac(0x324)](!![]),removeClient(_0x17639d['id']);}),dbConfig['get']('bots')[_0x858e89(0x2da)]({'botID':_0x4d4948})[_0x858e89(0x297)](),logging('deleted\x20Bot\x20'+_0x4d4948),stopBot(_0x4d4948);try{fs[_0x858e89(0x23d)](path[_0x858e89(0x1fb)](configpath,_0x858e89(0x213)+_0x4d4948+_0x858e89(0x32b))),fs['unlinkSync'](path[_0x858e89(0x1fb)](configpath,_0x858e89(0x213)+_0x4d4948+_0x858e89(0x270))),fs[_0x858e89(0x23d)](path[_0x858e89(0x1fb)](configpath,_0x858e89(0x213)+_0x4d4948+_0x858e89(0x230))),fs[_0x858e89(0x23d)](path[_0x858e89(0x1fb)](configpath,_0x858e89(0x213)+_0x4d4948+_0x858e89(0x2b2)));}catch(_0x5f3d8b){if(_0x5f3d8b)logging(_0x858e89(0x226),_0x5f3d8b);}config=getConfiguration(),io['to'](_0x858e89(0x328))[_0x858e89(0x299)](_0x858e89(0x2b5),config);}function toggleBot(_0x48037a,_0x3c8ee4,_0x599354){const _0x349e84=_0x124d42;dbConfig[_0x349e84(0x1f5)]('bots')[_0x349e84(0x1f4)]({'botID':_0x48037a})['assign']({'status':_0x3c8ee4})[_0x349e84(0x241)]({'live':_0x599354})[_0x349e84(0x297)]();if(_0x3c8ee4=='enabled'||_0x3c8ee4=='new')logging(_0x349e84(0x2fb)+_0x48037a),startBot([_0x48037a,userID],{'cwd':bbpath},function(_0x17c4f4){if(_0x17c4f4)logging(_0x17c4f4);});else(_0x3c8ee4=='disabled'||_0x3c8ee4=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x48037a),stopBot(_0x48037a));config=getConfiguration(),io['to'](_0x349e84(0x328))[_0x349e84(0x299)](_0x349e84(0x2b5),config);}function toggleStatus(_0x50fbda){const _0x287958=_0x124d42;let _0x24313e=dbConfig[_0x287958(0x1f5)](_0x287958(0x2b5))[_0x287958(0x1f4)]({'botID':_0x50fbda})[_0x287958(0x2fd)](),_0x37ea9b;if(_0x24313e[_0x287958(0x30b)]===_0x287958(0x32d))_0x37ea9b=_0x287958(0x315);else{if(_0x24313e[_0x287958(0x30b)]===_0x287958(0x203))_0x37ea9b=_0x287958(0x2d1);else{if(_0x24313e[_0x287958(0x30b)]==='new-disabled')_0x37ea9b=_0x287958(0x203);else{if(_0x24313e[_0x287958(0x30b)]==='disabled')_0x37ea9b='enabled';}}}return _0x37ea9b;}function updateStatus(_0x17d958,_0x185a2e){const _0x12900e=_0x124d42;dbConfig['get'](_0x12900e(0x2b5))[_0x12900e(0x1f4)]({'botID':_0x17d958})[_0x12900e(0x241)]({'status':_0x185a2e})['write'](),config=getConfiguration(),io['to'](_0x12900e(0x328))[_0x12900e(0x299)](_0x12900e(0x2b5),config);}function updateLive(_0x4705fd,_0x33855c){const _0x49bf12=_0x124d42;dbConfig[_0x49bf12(0x1f5)](_0x49bf12(0x2b5))['find']({'botID':_0x4705fd})[_0x49bf12(0x241)]({'live':_0x33855c})['write'](),config=getConfiguration(),io['to'](_0x49bf12(0x328))['emit'](_0x49bf12(0x2b5),config);}function updateBotName(_0x3abe4c,_0x139583){const _0x35320c=_0x124d42;dbConfig['get'](_0x35320c(0x2b5))[_0x35320c(0x1f4)]({'botID':_0x3abe4c})[_0x35320c(0x241)]({'botname':_0x139583})[_0x35320c(0x297)](),config=getConfiguration(),io['to']('botmanager')[_0x35320c(0x299)](_0x35320c(0x2b5),config);}function telegramError(_0x384cf2){const _0x3316cd=_0x124d42;console[_0x3316cd(0x274)](getTimeStamp()+_0x3316cd(0x20b));}function validateTelegram(_0xec55e2){const _0x1a09f8=_0x124d42;if(_0xec55e2[_0x1a09f8(0x20a)][_0x1a09f8(0x2aa)]!=settings[_0x1a09f8(0x2a7)]&&'@'+_0xec55e2['from'][_0x1a09f8(0x2aa)]!=settings[_0x1a09f8(0x2a7)])return tgBot[_0x1a09f8(0x2e0)](_0xec55e2[_0x1a09f8(0x2df)]['id'],_0x1a09f8(0x24c),{'parse_mode':_0x1a09f8(0x2af)})[_0x1a09f8(0x1ed)](_0x2bc182=>{telegramError(_0x2bc182);}),![];return!![];}async function initTelegram(){const _0x5c8bd2=_0x124d42;if(tgBot)tgBot[_0x5c8bd2(0x283)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5c8bd2(0x227)],{'polling':!![]});let _0x6319fc=_0x5c8bd2(0x252);_0x6319fc+='\x0a',_0x6319fc+=_0x5c8bd2(0x31d),_0x6319fc+='/disable\x20-\x20disable\x20notifications\x0a',_0x6319fc+=_0x5c8bd2(0x223),_0x6319fc+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x6319fc+=_0x5c8bd2(0x242),_0x6319fc+=_0x5c8bd2(0x334),_0x6319fc+=_0x5c8bd2(0x30a),_0x6319fc+=_0x5c8bd2(0x26d);let _0x3624ba=_0x5c8bd2(0x2e1);_0x3624ba+='\x0a',_0x3624ba+=_0x6319fc,tgBot[_0x5c8bd2(0x27d)](/\/start/,_0x5d084e=>{const _0x54aa2c=_0x5c8bd2;if(!validateTelegram(_0x5d084e))return;if(settings[_0x54aa2c(0x28e)]!=_0x5d084e[_0x54aa2c(0x2df)]['id'])updateSetting(_0x54aa2c(0x28e),_0x5d084e[_0x54aa2c(0x2df)]['id']);updateSetting(_0x54aa2c(0x319),!![]),tgBot[_0x54aa2c(0x2e0)](_0x5d084e[_0x54aa2c(0x2df)]['id'],_0x3624ba)[_0x54aa2c(0x1ed)](_0x3f0b83=>{telegramError(_0x3f0b83);});}),tgBot[_0x5c8bd2(0x27d)](/\/enable/,_0x9bc493=>{const _0x54d385=_0x5c8bd2;if(!validateTelegram(_0x9bc493))return;if(settings[_0x54d385(0x28e)]!=_0x9bc493[_0x54d385(0x2df)]['id'])updateSetting('telegramChatId',_0x9bc493[_0x54d385(0x2df)]['id']);updateSetting(_0x54d385(0x319),!![]),tgBot['sendMessage'](_0x9bc493['chat']['id'],_0x54d385(0x229))['catch'](_0x2cd9cf=>{telegramError(_0x2cd9cf);});}),tgBot[_0x5c8bd2(0x27d)](/\/config/,async _0x1bdc0f=>{const _0x361af9=_0x5c8bd2;if(!validateTelegram(_0x1bdc0f))return;tgBot[_0x361af9(0x317)](_0x361af9(0x256)),tgBot['sendMessage'](_0x1bdc0f[_0x361af9(0x2df)]['id'],_0x361af9(0x292),{'reply_markup':{'inline_keyboard':[[{'text':_0x361af9(0x332),'callback_data':_0x361af9(0x2cf)},{'text':_0x361af9(0x322),'callback_data':_0x361af9(0x23f)},{'text':_0x361af9(0x2a0),'callback_data':_0x361af9(0x27c)}]]}})['catch'](_0x506c59=>{telegramError(_0x506c59);}),tgBot['on'](_0x361af9(0x256),async _0x31566a=>{const _0x40b052=_0x361af9,_0x533ed=_0x31566a[_0x40b052(0x26a)],_0x396fc0=_0x31566a[_0x40b052(0x2f8)];tgBot[_0x40b052(0x201)](_0x31566a['id'])[_0x40b052(0x1f9)](async()=>{const _0x434b88=_0x40b052;_0x533ed==_0x434b88(0x2cf)&&(updateSetting('telegramEvents',_0x434b88(0x2cf)),updateSetting(_0x434b88(0x319),!![]),await tgBot[_0x434b88(0x2e0)](_0x396fc0[_0x434b88(0x2df)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x434b88(0x1ed)](_0x3a691f=>{telegramError(_0x3a691f);}));_0x533ed==_0x434b88(0x23f)&&(updateSetting(_0x434b88(0x2d8),_0x434b88(0x23f)),updateSetting('telegramEnabled',!![]),await tgBot[_0x434b88(0x2e0)](_0x396fc0[_0x434b88(0x2df)]['id'],_0x434b88(0x21d))[_0x434b88(0x1ed)](_0x26a092=>{telegramError(_0x26a092);}));_0x533ed==_0x434b88(0x27c)&&(updateSetting(_0x434b88(0x2d8),_0x434b88(0x27c)),updateSetting(_0x434b88(0x319),!![]),await tgBot[_0x434b88(0x2e0)](_0x396fc0[_0x434b88(0x2df)]['id'],_0x434b88(0x1f1))[_0x434b88(0x1ed)](_0x1d3f29=>{telegramError(_0x1d3f29);}));if(!settings['telegramChatId'])tgBot[_0x434b88(0x2e0)](_0x396fc0['chat']['id'],_0x434b88(0x2bc))[_0x434b88(0x1ed)](_0x120aa8=>{telegramError(_0x120aa8);});}),tgBot[_0x40b052(0x317)]('callback_query');});}),tgBot[_0x5c8bd2(0x27d)](/\/status/,_0x1f635b=>{const _0x34f3b2=_0x5c8bd2;if(!validateTelegram(_0x1f635b))return;let _0x71649b=_0x34f3b2(0x21b);config[_0x34f3b2(0x325)](_0x3bc92b=>{const _0x4b3c02=_0x34f3b2;_0x71649b+=_0x4b3c02(0x21f)+_0x3bc92b['botID']+_0x4b3c02(0x291)+_0x3bc92b[_0x4b3c02(0x263)]+':\x20'+_0x3bc92b[_0x4b3c02(0x30b)]+'\x20/\x20'+_0x3bc92b[_0x4b3c02(0x2ec)]+'\x0a';}),_0x71649b+='\x0a',_0x71649b+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x71649b+=!settings[_0x34f3b2(0x319)]?_0x34f3b2(0x31f):_0x34f3b2(0x1fe),_0x71649b+=settings[_0x34f3b2(0x319)]?settings[_0x34f3b2(0x2d8)]==_0x34f3b2(0x27c)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x34f3b2(0x2be)+settings[_0x34f3b2(0x2d8)]+_0x34f3b2(0x2a6):'',tgBot['sendMessage'](_0x1f635b[_0x34f3b2(0x2df)]['id'],_0x71649b,{'parse_mode':_0x34f3b2(0x2af)})[_0x34f3b2(0x1ed)](_0x170875=>{telegramError(_0x170875);});}),tgBot[_0x5c8bd2(0x27d)](/\/restart/,_0x1a6875=>{const _0x28c9e1=_0x5c8bd2;if(!validateTelegram(_0x1a6875))return;tgBot[_0x28c9e1(0x317)]('callback_query');const _0x223cde=getEnabledBots();if(_0x223cde[_0x28c9e1(0x24d)]==0x0)tgBot['sendMessage'](_0x1a6875['chat']['id'],_0x28c9e1(0x27f))[_0x28c9e1(0x1ed)](_0x546c4e=>{telegramError(_0x546c4e);});else{if(_0x223cde[_0x28c9e1(0x24d)]>0x1)_0x223cde[_0x28c9e1(0x247)]({'botID':'all'});let _0x5811f9=[],_0x216c03=[];const _0x59c18f=_0x223cde[_0x28c9e1(0x24d)]%0x4==0x0||_0x223cde[_0x28c9e1(0x24d)]%0x4==0x3||_0x223cde[_0x28c9e1(0x24d)]%0x3==0x1?0x4:0x3;let _0x5b0fcd=0x0;_0x223cde[_0x28c9e1(0x325)]((_0x2b1aa7,_0x2000a2)=>{const _0x220478=_0x28c9e1;if(_0x2000a2%_0x59c18f==0x0)_0x216c03=[];_0x216c03[_0x220478(0x247)]({'text':_0x2b1aa7[_0x220478(0x29e)]==_0x220478(0x27c)?'All\x20bots':_0x220478(0x21f)+_0x2b1aa7['botID'],'callback_data':_0x2b1aa7[_0x220478(0x29e)]}),_0x2000a2%_0x59c18f==0x0&&(_0x5811f9[_0x5b0fcd]=_0x216c03,_0x5b0fcd++);}),tgBot[_0x28c9e1(0x2e0)](_0x1a6875[_0x28c9e1(0x2df)]['id'],_0x28c9e1(0x28a),{'reply_markup':{'inline_keyboard':_0x5811f9}})['catch'](_0x509386=>{telegramError(_0x509386);}),tgBot['on'](_0x28c9e1(0x256),async _0x31475b=>{const _0x352e57=_0x28c9e1,_0x31c4cc=_0x31475b[_0x352e57(0x26a)],_0x1eaea=_0x31475b[_0x352e57(0x2f8)];tgBot[_0x352e57(0x201)](_0x31475b['id'])[_0x352e57(0x1f9)](async()=>{const _0x480e7c=_0x352e57;if(_0x31c4cc==_0x480e7c(0x27c)){if(settings[_0x480e7c(0x2d8)]=='orders')tgBot[_0x480e7c(0x2e0)](_0x1eaea[_0x480e7c(0x2df)]['id'],_0x480e7c(0x266))[_0x480e7c(0x1ed)](_0x420449=>{telegramError(_0x420449);});config['forEach'](_0x46b9ac=>{const _0x18297c=_0x480e7c;stopBot(_0x46b9ac[_0x18297c(0x29e)]);});}else{if(settings[_0x480e7c(0x2d8)]==_0x480e7c(0x2cf))tgBot[_0x480e7c(0x2e0)](_0x1eaea[_0x480e7c(0x2df)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x31c4cc)[_0x480e7c(0x1ed)](_0x4c1ff0=>{telegramError(_0x4c1ff0);});stopBot(_0x31c4cc);}}),tgBot[_0x352e57(0x317)](_0x352e57(0x256));});}}),tgBot[_0x5c8bd2(0x27d)](/\/on/,_0x5545fe=>{const _0x41ad23=_0x5c8bd2;if(!validateTelegram(_0x5545fe))return;tgBot[_0x41ad23(0x317)]('callback_query');const _0x14d34b=getDisabledBots();if(_0x14d34b[_0x41ad23(0x24d)]==0x0)tgBot[_0x41ad23(0x2e0)](_0x5545fe['chat']['id'],_0x41ad23(0x205))['catch'](_0x3044fd=>{telegramError(_0x3044fd);});else{if(_0x14d34b[_0x41ad23(0x24d)]>0x1)_0x14d34b[_0x41ad23(0x247)]({'botID':_0x41ad23(0x27c)});let _0x5cb735=[],_0x1e0cf4=[];const _0x54c294=_0x14d34b[_0x41ad23(0x24d)]%0x4==0x0||_0x14d34b[_0x41ad23(0x24d)]%0x4==0x3||_0x14d34b['length']%0x3==0x1?0x4:0x3;let _0x4a0e3b=0x0;_0x14d34b[_0x41ad23(0x325)]((_0x1eded0,_0x2501f8)=>{const _0x22f18a=_0x41ad23;if(_0x2501f8%_0x54c294==0x0)_0x1e0cf4=[];_0x1e0cf4[_0x22f18a(0x247)]({'text':_0x1eded0['botID']==_0x22f18a(0x27c)?_0x22f18a(0x2f4):_0x22f18a(0x21f)+_0x1eded0[_0x22f18a(0x29e)],'callback_data':_0x1eded0[_0x22f18a(0x29e)]}),_0x2501f8%_0x54c294==0x0&&(_0x5cb735[_0x4a0e3b]=_0x1e0cf4,_0x4a0e3b++);}),tgBot[_0x41ad23(0x2e0)](_0x5545fe[_0x41ad23(0x2df)]['id'],_0x41ad23(0x20d),{'reply_markup':{'inline_keyboard':_0x5cb735}})['catch'](_0x3a7b5f=>{telegramError(_0x3a7b5f);}),tgBot['on']('callback_query',async _0x571eae=>{const _0x36d042=_0x41ad23,_0x503c6c=_0x571eae[_0x36d042(0x26a)],_0x375279=_0x571eae['message'];tgBot[_0x36d042(0x201)](_0x571eae['id'])['then'](async()=>{const _0x9132bc=_0x36d042;if(_0x503c6c==_0x9132bc(0x27c)){if(settings['telegramEvents']==_0x9132bc(0x2cf))tgBot['sendMessage'](_0x375279[_0x9132bc(0x2df)]['id'],_0x9132bc(0x2c3))[_0x9132bc(0x1ed)](_0x5a6b5c=>{telegramError(_0x5a6b5c);});_0x14d34b[_0x9132bc(0x325)](_0x2c57d3=>{const _0xed46c2=_0x9132bc;if(_0x2c57d3[_0xed46c2(0x29e)]!=_0xed46c2(0x27c))toggleBot(_0x2c57d3[_0xed46c2(0x29e)],toggleStatus(_0x2c57d3[_0xed46c2(0x29e)]),_0xed46c2(0x2d6));});}else{if(settings[_0x9132bc(0x2d8)]=='orders')tgBot[_0x9132bc(0x2e0)](_0x375279[_0x9132bc(0x2df)]['id'],_0x9132bc(0x1fc)+_0x503c6c)['catch'](_0x13f43a=>{telegramError(_0x13f43a);});toggleBot(_0x503c6c,toggleStatus(_0x503c6c),_0x9132bc(0x2d6));}}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x5c8bd2(0x27d)](/\/off/,_0x10c43f=>{const _0x504fc5=_0x5c8bd2;if(!validateTelegram(_0x10c43f))return;tgBot[_0x504fc5(0x317)]('callback_query');const _0x3a2e1c=getEnabledBots();if(_0x3a2e1c['length']==0x0)tgBot[_0x504fc5(0x2e0)](_0x10c43f[_0x504fc5(0x2df)]['id'],_0x504fc5(0x27f))[_0x504fc5(0x1ed)](_0x81228e=>{telegramError(_0x81228e);});else{if(_0x3a2e1c[_0x504fc5(0x24d)]>0x1)_0x3a2e1c[_0x504fc5(0x247)]({'botID':'all'});let _0x15a5f2=[],_0x2a7e45=[];const _0xba7a84=_0x3a2e1c[_0x504fc5(0x24d)]%0x4==0x0||_0x3a2e1c[_0x504fc5(0x24d)]%0x4==0x3||_0x3a2e1c[_0x504fc5(0x24d)]%0x3==0x1?0x4:0x3;let _0x316a17=0x0;_0x3a2e1c[_0x504fc5(0x325)]((_0xd700db,_0x5573e8)=>{const _0x4d826c=_0x504fc5;if(_0x5573e8%_0xba7a84==0x0)_0x2a7e45=[];_0x2a7e45['push']({'text':_0xd700db[_0x4d826c(0x29e)]==_0x4d826c(0x27c)?_0x4d826c(0x2f4):_0x4d826c(0x21f)+_0xd700db['botID'],'callback_data':_0xd700db['botID']}),_0x5573e8%_0xba7a84==0x0&&(_0x15a5f2[_0x316a17]=_0x2a7e45,_0x316a17++);}),tgBot[_0x504fc5(0x2e0)](_0x10c43f['chat']['id'],_0x504fc5(0x217),{'reply_markup':{'inline_keyboard':_0x15a5f2}})['catch'](_0x4a5c8a=>{telegramError(_0x4a5c8a);}),tgBot['on'](_0x504fc5(0x256),async _0x31ecef=>{const _0x47eaa4=_0x504fc5,_0x4122ca=_0x31ecef[_0x47eaa4(0x26a)],_0x648666=_0x31ecef[_0x47eaa4(0x2f8)];tgBot['answerCallbackQuery'](_0x31ecef['id'])[_0x47eaa4(0x1f9)](async()=>{const _0x3dcd83=_0x47eaa4;if(_0x4122ca=='all'){if(settings['telegramEvents']==_0x3dcd83(0x2cf))tgBot[_0x3dcd83(0x2e0)](_0x648666[_0x3dcd83(0x2df)]['id'],_0x3dcd83(0x2c0))[_0x3dcd83(0x1ed)](_0x2fabae=>{telegramError(_0x2fabae);});_0x3a2e1c[_0x3dcd83(0x325)](_0x5b68c7=>{const _0x168898=_0x3dcd83;if(_0x5b68c7['botID']!='all')toggleBot(_0x5b68c7['botID'],toggleStatus(_0x5b68c7[_0x168898(0x29e)]),_0x168898(0x2d6));});}else{if(settings['telegramEvents']==_0x3dcd83(0x2cf))tgBot['sendMessage'](_0x648666[_0x3dcd83(0x2df)]['id'],_0x3dcd83(0x281)+_0x4122ca)[_0x3dcd83(0x1ed)](_0x37dcd3=>{telegramError(_0x37dcd3);});toggleBot(_0x4122ca,toggleStatus(_0x4122ca),_0x3dcd83(0x2d6));}}),tgBot[_0x47eaa4(0x317)](_0x47eaa4(0x256));});}}),tgBot[_0x5c8bd2(0x27d)](/\/disable/,_0x3e843d=>{const _0x40d5cd=_0x5c8bd2;if(!validateTelegram(_0x3e843d))return;tgBot[_0x40d5cd(0x2e0)](_0x3e843d[_0x40d5cd(0x2df)]['id'],_0x40d5cd(0x262))[_0x40d5cd(0x1ed)](_0xb2bbf3=>{telegramError(_0xb2bbf3);}),updateSetting(_0x40d5cd(0x319),![]);}),tgBot['onText'](/\/help/,_0x1345bd=>{const _0x3afd4a=_0x5c8bd2;if(!validateTelegram(_0x1345bd))return;tgBot[_0x3afd4a(0x2e0)](_0x1345bd[_0x3afd4a(0x2df)]['id'],_0x6319fc)[_0x3afd4a(0x1ed)](_0x35a6c3=>{telegramError(_0x35a6c3);});}),tgBot['on']('polling_error',_0x4c5e63=>{const _0xdd1210=_0x5c8bd2;_0x4c5e63[_0xdd1210(0x2cc)]()[_0xdd1210(0x30c)]('404\x20Not\x20Found')&&(logging('Invalid\x20Telegram\x20token'),tgBot[_0xdd1210(0x283)](),tgBot=null,io['to'](_0xdd1210(0x328))[_0xdd1210(0x299)]('notification','Invalid\x20Telegram\x20token'));}),process[_0x5c8bd2(0x2c5)]('SIGINT',()=>{const _0x3b2197=_0x5c8bd2;if(tgBot)tgBot[_0x3b2197(0x283)]();process[_0x3b2197(0x265)](0x1);}),process[_0x5c8bd2(0x2c5)](_0x5c8bd2(0x305),()=>{const _0x45ffa5=_0x5c8bd2;if(tgBot)tgBot[_0x45ffa5(0x283)]();process[_0x45ffa5(0x265)](0x1);});}}function disableTelegram(){const _0x1b03d5=_0x124d42;tgBot&&(tgBot[_0x1b03d5(0x283)](),tgBot=null);}function sendTelegram(_0x4f81e6,_0x5f5832){const _0x5ab986=_0x124d42;if(settings[_0x5ab986(0x319)]){if(settings[_0x5ab986(0x2d8)]==_0x5ab986(0x27c)||(_0x5f5832['type']==_0x5ab986(0x2ee)||_0x5f5832[_0x5ab986(0x2b3)]=='success')&&settings[_0x5ab986(0x2d8)]==_0x5ab986(0x23f)||_0x5f5832[_0x5ab986(0x2b3)]=='order'&&settings[_0x5ab986(0x2d8)]=='orders'){if(tgBot&&settings[_0x5ab986(0x28e)]){if(_0x5f5832[_0x5ab986(0x2e6)])tgBot[_0x5ab986(0x2e0)](settings['telegramChatId'],_0x5f5832[_0x5ab986(0x263)]+_0x5ab986(0x2bf)+_0x5f5832[_0x5ab986(0x261)])['catch'](_0x1da5cb=>{telegramError(_0x1da5cb);});else tgBot[_0x5ab986(0x2e0)](settings[_0x5ab986(0x28e)],'Bot\x20'+_0x4f81e6+'\x20>\x20'+_0x5f5832[_0x5ab986(0x261)])[_0x5ab986(0x1ed)](_0x1dc10d=>{telegramError(_0x1dc10d);});}}}}function getDeviceWithIp(_0x5065da){const _0x15502f=_0x124d42;return devices[_0x15502f(0x1f4)](_0x43f38d=>_0x43f38d['ip']===_0x5065da);}function temporaryAccess2FA(_0x4259c2,_0x5da2b7){const _0x2ceb40=_0x124d42;let _0x562112=new Date(),_0x157587=![];if(lastIpApproval){if(_0x562112-lastIpApproval<0x1388)_0x157587=!![];}lastIpApproval=new Date();if(_0x157587)return;tgBot&&settings[_0x2ceb40(0x28e)]&&(tgBot['removeListener'](_0x2ceb40(0x256)),tgBot['sendMessage'](settings[_0x2ceb40(0x28e)],_0x2ceb40(0x23e)+normalizeIP(_0x5da2b7)[_0x2ceb40(0x267)]+'</b>\x20?',{'parse_mode':_0x2ceb40(0x2af),'reply_markup':{'inline_keyboard':[[{'text':_0x2ceb40(0x25b),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x2ceb40(0x2e3),'callback_data':'30'},{'text':_0x2ceb40(0x1ef),'callback_data':_0x2ceb40(0x1ef)}]]}})[_0x2ceb40(0x1ed)](_0x55a358=>{telegramError(_0x55a358);}),tgBot['on'](_0x2ceb40(0x256),async _0x2d8190=>{const _0x395420=_0x2ceb40,_0x48b95b=_0x2d8190[_0x395420(0x26a)],_0x2bda3b=_0x2d8190[_0x395420(0x2f8)];tgBot[_0x395420(0x201)](_0x2d8190['id'])[_0x395420(0x1f9)](async()=>{const _0x20d170=_0x395420;devices[_0x4259c2]['telegramIpApproval']={'clientip':_0x5da2b7,'timestamp':new Date()[_0x20d170(0x32f)](),'expiry':_0x48b95b},_0x48b95b!=_0x20d170(0x1ef)?(await tgBot[_0x20d170(0x2e0)](_0x2bda3b[_0x20d170(0x2df)]['id'],_0x20d170(0x22c)+_0x48b95b+_0x20d170(0x285),{'parse_mode':_0x20d170(0x2af)})[_0x20d170(0x1ed)](_0x272851=>{telegramError(_0x272851);}),io['to'](_0x4259c2)[_0x20d170(0x299)]('status',{'access':{'allow':![],'reason':_0x20d170(0x320),'token':null}})):(await tgBot['sendMessage'](_0x2bda3b['chat']['id'],_0x20d170(0x2fa))['catch'](_0x290319=>{telegramError(_0x290319);}),io['to'](_0x4259c2)['emit']('status',{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x395420(0x317)](_0x395420(0x256));}));}function loginAccess2FA(_0x3bd3c8,_0x5c62cc){const _0x2379b3=_0x124d42;tgBot&&settings[_0x2379b3(0x28e)]&&(tgBot[_0x2379b3(0x317)]('callback_query'),tgBot['sendMessage'](settings[_0x2379b3(0x28e)],_0x2379b3(0x20c)+normalizeIP(_0x5c62cc)[_0x2379b3(0x267)]+_0x2379b3(0x2e7),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2379b3(0x31a),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x2379b3(0x1ef)}]]}})[_0x2379b3(0x1ed)](_0x9c2224=>{telegramError(_0x9c2224);}),tgBot['on'](_0x2379b3(0x256),async _0x519a00=>{const _0x5e9bda=_0x2379b3,_0xf22709=_0x519a00[_0x5e9bda(0x26a)],_0x556cce=_0x519a00[_0x5e9bda(0x2f8)];tgBot['answerCallbackQuery'](_0x519a00['id'])[_0x5e9bda(0x1f9)](async()=>{const _0x4696c1=_0x5e9bda;devices[_0x3bd3c8][_0x4696c1(0x2c8)]={'clientip':_0x5c62cc,'timestamp':new Date()[_0x4696c1(0x32f)](),'expiry':_0xf22709},_0xf22709!=_0x4696c1(0x1ef)?(await tgBot[_0x4696c1(0x2e0)](_0x556cce[_0x4696c1(0x2df)]['id'],_0x4696c1(0x251),{'parse_mode':_0x4696c1(0x2af)})[_0x4696c1(0x1ed)](_0x55008a=>{telegramError(_0x55008a);}),io['to'](_0x3bd3c8)[_0x4696c1(0x299)](_0x4696c1(0x30b),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4696c1(0x2e0)](_0x556cce[_0x4696c1(0x2df)]['id'],_0x4696c1(0x24a))['catch'](_0x43c11e=>{telegramError(_0x43c11e);}),io['to'](_0x3bd3c8)[_0x4696c1(0x299)](_0x4696c1(0x30b),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x5e9bda(0x317)](_0x5e9bda(0x256));}));}function getConfiguration(){const _0x2b2997=_0x124d42;return dbConfig['get'](_0x2b2997(0x2b5))[_0x2b2997(0x329)](_0x2b2997(0x29e))[_0x2b2997(0x2fd)]()||[];}function getEnabledBots(){const _0x5afc1e=_0x124d42;return dbConfig[_0x5afc1e(0x1f5)](_0x5afc1e(0x2b5))[_0x5afc1e(0x329)](_0x5afc1e(0x29e))[_0x5afc1e(0x321)]({'status':_0x5afc1e(0x32d)})[_0x5afc1e(0x2fd)]()||[];}function getDisabledBots(){const _0x3808c2=_0x124d42;return dbConfig[_0x3808c2(0x1f5)](_0x3808c2(0x2b5))[_0x3808c2(0x329)](_0x3808c2(0x29e))['filter']({'status':_0x3808c2(0x315)})[_0x3808c2(0x2fd)]()||[];}function getSettings(){const _0x9550a8=_0x124d42;return dbSettings['get'](_0x9550a8(0x280))[_0x9550a8(0x2fd)]()||{'timeshift':0x0};}function getSecure(){const _0x3b3e83=_0x124d42;return dbSecure[_0x3b3e83(0x1f5)]('secure')[_0x3b3e83(0x2fd)]()||{};}function getBlacklist(){const _0x4f6763=_0x124d42;return dbSecure[_0x4f6763(0x1f5)](_0x4f6763(0x22a))[_0x4f6763(0x2fd)]()||[];}function broadcastToBots(_0x454d7d,_0x246824){config['forEach'](_0x81708a=>{const _0x58d5cd=_0x2697;if(_0x81708a[_0x58d5cd(0x30b)]==_0x58d5cd(0x32d)&&_0x81708a[_0x58d5cd(0x2ec)]==_0x58d5cd(0x304)){if(pid[_0x81708a['botID']])pid[_0x81708a['botID']][_0x58d5cd(0x307)]({[_0x454d7d]:_0x246824});}});}function storeSettings(_0x2f2822,_0x50f841=![]){const _0x33ca87=_0x124d42;_0x2f2822={...settings,..._0x2f2822};if(_0x50f841&&_0x2f2822[_0x33ca87(0x290)]!=_0x33ca87(0x2ff)&&_0x2f2822[_0x33ca87(0x290)]!=''){const _0x5d2c5d=crypt[_0x33ca87(0x2ca)](secure[_0x33ca87(0x26b)],_0x2f2822[_0x33ca87(0x290)])[_0x33ca87(0x2f8)]['split']('@')[0x0],_0x5ba490=bcrypt[_0x33ca87(0x2f5)](_0x5d2c5d,saltRounds);_0x2f2822={..._0x2f2822,'bbPassword':_0x5ba490};}if(_0x50f841&&_0x2f2822[_0x33ca87(0x227)]!='************'&&_0x2f2822[_0x33ca87(0x227)]!=''){const _0x38fad5=crypt[_0x33ca87(0x2ca)](secure[_0x33ca87(0x26b)],_0x2f2822[_0x33ca87(0x227)])['message']['split']('@')[0x0];_0x2f2822={..._0x2f2822,'telegramToken':_0x38fad5};}const _0x38d3a6=_0x2f2822[_0x33ca87(0x227)]!=_0x33ca87(0x2ff)&&_0x2f2822[_0x33ca87(0x227)]!=settings[_0x33ca87(0x227)]||_0x2f2822[_0x33ca87(0x2a7)]!=settings[_0x33ca87(0x2a7)],_0x4d3fea=_0x2f2822[_0x33ca87(0x227)]==''||_0x2f2822[_0x33ca87(0x2a7)]=='';if(_0x38d3a6)_0x2f2822[_0x33ca87(0x2d8)]=_0x33ca87(0x27c);for(const [_0x189243,_0x2b02ef]of Object[_0x33ca87(0x2e8)](_0x2f2822)){if(_0x189243==_0x33ca87(0x227)&&_0x2b02ef==_0x33ca87(0x2ff)){_0x2f2822[_0x33ca87(0x227)]=settings[_0x33ca87(0x227)];continue;};if(_0x189243==_0x33ca87(0x290)&&_0x2b02ef=='************'){_0x2f2822['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x33ca87(0x282)](_0x33ca87(0x215)+_0x189243,_0x2b02ef)['write']();}settings=_0x2f2822,io['to'](_0x33ca87(0x328))['emit'](_0x33ca87(0x280),cleanSettings()),broadcastToBots('timeshift',settings[_0x33ca87(0x2b1)]);if(_0x38d3a6&&!_0x4d3fea)initTelegram();if(_0x38d3a6&&_0x4d3fea)disableTelegram();getAllClients()[_0x33ca87(0x325)](_0x3d7a4f=>{const _0x2abeda=_0x33ca87;getSocket(_0x3d7a4f['id'])[_0x2abeda(0x299)](_0x2abeda(0x30b),{'access':{'allow':![],'reason':_0x2abeda(0x320),'token':null}});});}function updateSetting(_0x2ae3dc,_0x432d49){const _0x4615a5=_0x124d42;dbSettings[_0x4615a5(0x282)](_0x4615a5(0x215)+_0x2ae3dc,_0x432d49)[_0x4615a5(0x297)](),settings=getSettings(),io['to'](_0x4615a5(0x328))[_0x4615a5(0x299)]('settings',cleanSettings());}function storeSecure(_0x4eebc7){const _0x2d4ad6=_0x124d42;dbSecure[_0x2d4ad6(0x1f5)]('secure')[_0x2d4ad6(0x247)](_0x4eebc7)[_0x2d4ad6(0x297)](),secure=_0x4eebc7;}function addBlacklist(_0x546682){const _0x11fde6=_0x124d42;cleanBlacklist();let _0x4acb64;devices[_0x546682]['telegramIpApproval']?_0x4acb64=Math['max'](devices[_0x546682]['telegramIpApproval'][_0x11fde6(0x30d)],loginExpiry):_0x4acb64=loginExpiry,dbSecure[_0x11fde6(0x1f5)](_0x11fde6(0x22a))[_0x11fde6(0x247)]({'expiry':new Date()['getTime']()+_0x4acb64*0x3c*0x3e8,'token':devices[_0x546682][_0x11fde6(0x23a)][_0x11fde6(0x2c2)]})['write'](),blacklist=dbSecure['get']('blacklist')[_0x11fde6(0x2fd)]();}function cleanBlacklist(){const _0x4a17f4=_0x124d42;let _0x4c154e=dbSecure[_0x4a17f4(0x1f5)](_0x4a17f4(0x22a))[_0x4a17f4(0x2c4)]()[_0x4a17f4(0x2fd)](),_0x485f7a=new Date()[_0x4a17f4(0x32f)]();_0x4c154e[_0x4a17f4(0x325)](_0x40eb87=>{const _0x42b339=_0x4a17f4;_0x40eb87['expiry']<_0x485f7a&&dbSecure[_0x42b339(0x1f5)](_0x42b339(0x22a))['remove']({'expiry':_0x40eb87[_0x42b339(0x30d)]})[_0x42b339(0x297)]();});}function initStates(){const _0x4d64d0=_0x124d42;let _0x2c5189=getConfiguration();_0x2c5189[_0x4d64d0(0x325)](_0x56b3b7=>{const _0x555787=_0x4d64d0;_0x56b3b7[_0x555787(0x2ec)]=_0x555787(0x2d6);}),storeConfiguration(_0x2c5189);}function onKeys(){const _0x231d6f=new RSA();return new Promise(_0x140542=>{const _0x2ef71e=_0x2697;_0x231d6f[_0x2ef71e(0x1f8)]()['then'](_0x47772f=>{_0x140542(_0x47772f);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x43cb12=_0x124d42;let _0x31a65f=getConfiguration(),_0x50b0a8=![];_0x31a65f[_0x43cb12(0x325)](_0x35aba0=>{const _0x380d26=_0x43cb12;if(_0x35aba0[_0x380d26(0x30b)]==_0x380d26(0x304))_0x35aba0[_0x380d26(0x30b)]='enabled',_0x50b0a8=!![];else _0x35aba0[_0x380d26(0x30b)]==_0x380d26(0x2d6)&&(_0x35aba0[_0x380d26(0x30b)]=_0x380d26(0x315),_0x50b0a8=!![]);});if(_0x50b0a8)storeConfiguration(_0x31a65f);let _0x3d4abc=getSecure();if(!_0x3d4abc['hasOwnProperty']('secret')){let _0x239b7c=await generateKeys();_0x3d4abc[_0x43cb12(0x1f2)]=_0x239b7c[_0x43cb12(0x1f2)],_0x3d4abc[_0x43cb12(0x26b)]=_0x239b7c[_0x43cb12(0x26b)],_0x3d4abc[_0x43cb12(0x330)]=crypto[_0x43cb12(0x1f3)](0x20)[_0x43cb12(0x2cc)]('hex');;storeSecure(_0x3d4abc);}let _0x4835b2=getSettings();_0x50b0a8=![];!_0x4835b2[_0x43cb12(0x30f)](_0x43cb12(0x218))&&(_0x4835b2[_0x43cb12(0x218)]=![],_0x4835b2[_0x43cb12(0x2a8)]='',_0x4835b2[_0x43cb12(0x290)]='',_0x4835b2['f2aRequired']=![],_0x50b0a8=!![]);!_0x4835b2[_0x43cb12(0x30f)](_0x43cb12(0x2c1))&&(_0x4835b2[_0x43cb12(0x2c1)]=![],_0x4835b2[_0x43cb12(0x31c)]=[],_0x4835b2[_0x43cb12(0x257)]=![],_0x50b0a8=!![]);if(!_0x4835b2[_0x43cb12(0x30f)](_0x43cb12(0x319))){if(_0x4835b2['telegramChatId'])_0x4835b2[_0x43cb12(0x319)]=!![];else _0x4835b2['telegramEnabled']=![];_0x50b0a8=!![];}if(_0x50b0a8)storeSettings(_0x4835b2);}function storeConfiguration(_0x50470c){const _0xd44131=_0x124d42;dbConfig[_0xd44131(0x1f5)]('bots')[_0xd44131(0x2da)]()[_0xd44131(0x297)](),dbConfig['get']('bots')[_0xd44131(0x247)](..._0x50470c)[_0xd44131(0x297)](),config=_0x50470c;}function resetPassword(){const _0x190495=_0x124d42;tgBot&&settings[_0x190495(0x28e)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x190495(0x2e0)](settings['telegramChatId'],_0x190495(0x29a),{'parse_mode':_0x190495(0x2af),'reply_markup':{'inline_keyboard':[[{'text':_0x190495(0x239),'callback_data':_0x190495(0x239)},{'text':'no','callback_data':'no'}]]}})[_0x190495(0x1ed)](_0x3a3db3=>{telegramError(_0x3a3db3);}),tgBot['on']('callback_query',async _0xa1aa53=>{const _0xae7069=_0x190495,_0x384dd2=_0xa1aa53[_0xae7069(0x26a)],_0x14f970=_0xa1aa53[_0xae7069(0x2f8)];tgBot[_0xae7069(0x201)](_0xa1aa53['id'])[_0xae7069(0x1f9)](async()=>{const _0x4b883e=_0xae7069;if(_0x384dd2!='no'){const _0x4e4027=0xf,_0x1965be='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x183ed9=Array[_0x4b883e(0x20a)](crypto[_0x4b883e(0x224)](new Uint32Array(_0x4e4027)))[_0x4b883e(0x1fd)](_0x211637=>_0x1965be[_0x211637%_0x1965be[_0x4b883e(0x24d)]])[_0x4b883e(0x1fb)](''),_0x23e7fa=bcrypt[_0x4b883e(0x2f5)](_0x183ed9,saltRounds);storeSettings({'bbPassword':_0x23e7fa}),await tgBot[_0x4b883e(0x2e0)](_0x14f970[_0x4b883e(0x2df)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x183ed9,{'parse_mode':_0x4b883e(0x2af)})[_0x4b883e(0x1ed)](_0x2d37a1=>{telegramError(_0x2d37a1);});}else await tgBot[_0x4b883e(0x2e0)](_0x14f970[_0x4b883e(0x2df)]['id'],_0x4b883e(0x333))[_0x4b883e(0x1ed)](_0x1aa22a=>{telegramError(_0x1aa22a);});}),tgBot[_0xae7069(0x317)](_0xae7069(0x256));}));}function logging(_0x546d91){const _0x45551f=_0x124d42;console['log'](getTimeStamp()+_0x45551f(0x258)+_0x546d91);if(tgBot&&settings['telegramChatId']&&settings[_0x45551f(0x2d8)]!=_0x45551f(0x2cf))tgBot[_0x45551f(0x2e0)](settings[_0x45551f(0x28e)],_0x45551f(0x2a3)+_0x546d91)[_0x45551f(0x1ed)](_0x15b9a1=>{telegramError(_0x15b9a1);});}function getServerTime(){const _0x55b3b9=_0x124d42,_0x1112aa=new Date();return _0x1112aa[_0x55b3b9(0x233)]()+'/'+(_0x1112aa['getMonth']()+0x1)[_0x55b3b9(0x2cc)]()[_0x55b3b9(0x298)](0x2,'0')+'/'+_0x1112aa[_0x55b3b9(0x301)]()[_0x55b3b9(0x2cc)]()[_0x55b3b9(0x298)](0x2,'0')+'\x20'+_0x1112aa['getHours']()[_0x55b3b9(0x2cc)]()[_0x55b3b9(0x298)](0x2,'0')+':'+_0x1112aa[_0x55b3b9(0x275)]()[_0x55b3b9(0x2cc)]()[_0x55b3b9(0x298)](0x2,'0')+':'+_0x1112aa[_0x55b3b9(0x2ef)]()[_0x55b3b9(0x2cc)]()[_0x55b3b9(0x298)](0x2,'0');}function getTimeStamp(){const _0x72b4fb=_0x124d42,_0x122354=shiftedTime();return _0x122354[_0x72b4fb(0x233)]()+'/'+(_0x122354['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x122354[_0x72b4fb(0x301)]()[_0x72b4fb(0x2cc)]()['padStart'](0x2,'0')+'\x20'+_0x122354[_0x72b4fb(0x24f)]()[_0x72b4fb(0x2cc)]()[_0x72b4fb(0x298)](0x2,'0')+':'+_0x122354[_0x72b4fb(0x275)]()[_0x72b4fb(0x2cc)]()['padStart'](0x2,'0')+':'+_0x122354[_0x72b4fb(0x2ef)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x21b481=_0x124d42,_0x494b6e=new Date();let _0x4bb86a=_0x494b6e;if(settings[_0x21b481(0x2b1)]&&settings['timeshift']!==0x0)_0x4bb86a=fns[_0x21b481(0x2e9)](_0x494b6e,{'hours':settings[_0x21b481(0x2b1)]});return _0x4bb86a;}function startScheduler(){const _0x4f1e61=_0x124d42;let _0x1482bb=new Date()[_0x4f1e61(0x244)]();_0x1482bb==0x1&&backupConfigFiles();_0x1482bb==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3dcd85=_0x124d42;fs[_0x3dcd85(0x28d)](configpath,{'withFileTypes':!![]})[_0x3dcd85(0x325)](_0xb20398=>{const _0x319489=_0x3dcd85;if(!_0xb20398[_0x319489(0x331)]())fs[_0x319489(0x278)](configpath+_0xb20398[_0x319489(0x2e2)],configbackuppath+_0xb20398['name']);});}function triggerAnalytics(){const _0x6a32c1=_0x124d42;analytics[_0x6a32c1(0x2dd)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x33c5f2,_0x349769){const _0x1bcecc=_0x124d42;if(_0x33c5f2[_0x1bcecc(0x2aa)]==settings[_0x1bcecc(0x2a8)]&&bcrypt[_0x1bcecc(0x2d9)](_0x33c5f2['password'],settings[_0x1bcecc(0x290)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x1bcecc(0x32e),'token':null};else{const _0x1a6fb4=generateLoginToken(_0x349769);return{'allow':!![],'reason':_0x1bcecc(0x2dc),'token':_0x1a6fb4};}}else return{'allow':![],'reason':_0x1bcecc(0x2eb),'token':null};}function refreshToken(_0x3a939d){const _0x572618=_0x124d42,_0x3c0e97=generateLoginToken(_0x3a939d);return{'allow':!![],'reason':_0x572618(0x2dc),'token':_0x3c0e97};}function validateAccess(_0x2ef1fa,_0x1901fd){const _0x29faa0=_0x124d42;let _0x557b0e=devices[_0x1901fd]['ip'],_0x34b3ea;const _0x4a8d91=_0x66b5b1=>{const _0x1dd34e=_0x2697;if(settings['loginRequired']){if(settings[_0x1dd34e(0x2ed)]){if(telegram2FaApproved(_0x1901fd)){const _0x2fa1e7=generateLoginToken(_0x1901fd);return{'allow':!![],'reason':_0x1dd34e(0x2ba),'token':_0x2fa1e7};}else return{'allow':![],'reason':_0x1dd34e(0x29b),'token':null};}else return _0x34b3ea=validToken(_0x66b5b1,_0x1901fd),_0x34b3ea[_0x1dd34e(0x30f)]('success')?{'allow':!![],'reason':_0x1dd34e(0x30e),'token':_0x66b5b1}:{'allow':![],'reason':_0x1dd34e(0x29b),'token':null};}else return{'allow':!![],'reason':_0x1dd34e(0x206),'token':null};};if(settings[_0x29faa0(0x2c1)]){let _0x54d9f9=[...settings[_0x29faa0(0x31c)],_0x29faa0(0x1ea),_0x29faa0(0x21c),'127.0.0.1'];if(_0x54d9f9[_0x29faa0(0x30c)](_0x557b0e))return _0x4a8d91(_0x2ef1fa);else{_0x34b3ea=validToken(_0x2ef1fa,_0x1901fd);if(_0x34b3ea[_0x29faa0(0x30f)](_0x29faa0(0x293)))return _0x4a8d91(_0x2ef1fa);else{if(telegramIpApproved(_0x1901fd)){const _0x333038=generateToken(_0x1901fd);return _0x34b3ea=_0x4a8d91(_0x2ef1fa),_0x34b3ea[_0x29faa0(0x234)]?{'allow':!![],'reason':_0x29faa0(0x248),'token':_0x333038}:_0x34b3ea;}else return settings[_0x29faa0(0x257)]?{'allow':![],'reason':_0x29faa0(0x269),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4a8d91(_0x2ef1fa);}function timelyDecrypt(_0x284b8b,_0x7a179e=!![]){const _0x465067=_0x124d42;if(_0x284b8b)try{const _0x2f2ed4=crypt[_0x465067(0x2ca)](secure[_0x465067(0x26b)],_0x284b8b)[_0x465067(0x2f8)],_0x286c6a=_0x2f2ed4['split']('@')[0x0],_0x361424=_0x2f2ed4[_0x465067(0x2f0)]('@')[0x1],_0x466404=new Date()['getTime']();if(_0x7a179e){if(_0x466404-_0x361424<maxSecretAge*0x3e8)return _0x286c6a;else return![];}else return _0x286c6a;}catch(_0x490a1b){return![];}else return![];}const validToken=(_0x3c040e,_0xd10331)=>{const _0x14bcde=_0x124d42,_0x2f5e3c=devices[_0xd10331]['ip'];if(!_0x3c040e)return{'error':_0x14bcde(0x2f1)};for(let _0x3cacb6 of blacklist){if(_0x3cacb6[_0x14bcde(0x2c2)]==_0x3c040e)return{'error':_0x14bcde(0x271)};}let _0x15a04c;try{_0x15a04c=jwt['verify'](_0x3c040e,secure['secret']+_0xd10331);}catch{return{'error':_0x14bcde(0x323)};}if(!_0x15a04c['hasOwnProperty'](_0x14bcde(0x2fe))&&!_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2aa))||!_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2a4)))return{'error':_0x14bcde(0x222)};if(!_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2aa))&&_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2fe))){const {clientip:_0xb65bd5}=_0x15a04c;return _0x2f5e3c==_0xb65bd5?{'success':_0x14bcde(0x2bd)}:{'error':_0x14bcde(0x25d)};}else{if(_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2aa))&&_0x15a04c[_0x14bcde(0x30f)](_0x14bcde(0x2fe))){const {username:_0x36bcff,clientip:_0x2d0677}=_0x15a04c;return settings[_0x14bcde(0x2a8)]==_0x36bcff&&_0x2f5e3c==_0x2d0677?{'success':_0x14bcde(0x2bd)}:{'error':_0x14bcde(0x20f)};}}},generateLoginToken=_0x440228=>{const _0x330d03=_0x124d42;if(_0x440228){const _0x3c31a4=devices[_0x440228]['ip'];return jwt[_0x330d03(0x296)]({'username':settings['bbUsername'],'clientip':_0x3c31a4},secure['secret']+_0x440228,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x59a4dd=>{const _0x49b809=_0x124d42;if(_0x59a4dd){const _0xecfa8e=devices[_0x59a4dd]['ip'];return jwt[_0x49b809(0x296)]({'clientip':_0xecfa8e},secure['secret']+_0x59a4dd,{'expiresIn':devices[_0x59a4dd]['telegramIpApproval']['expiry']*0x3c});}else return![];},telegramIpApproved=_0x3d717b=>{const _0x25a1d7=_0x124d42;let _0x596297=![];return devices[_0x3d717b]['telegramIpApproval']&&devices[_0x3d717b][_0x25a1d7(0x2b4)]['expiry']!=_0x25a1d7(0x1ef)&&(_0x596297=devices[_0x3d717b]['telegramIpApproval'][_0x25a1d7(0x2fe)]==devices[_0x3d717b]['ip']&&new Date()[_0x25a1d7(0x32f)]()-devices[_0x3d717b][_0x25a1d7(0x2b4)][_0x25a1d7(0x1fa)]<devices[_0x3d717b][_0x25a1d7(0x2b4)][_0x25a1d7(0x30d)]*0x3c*0x3e8),_0x596297;},telegram2FaApproved=_0x3d2132=>{const _0x4dee6b=_0x124d42;let _0x2d2bbd=![];return devices[_0x3d2132][_0x4dee6b(0x2c8)]&&devices[_0x3d2132]['telegram2FaApproval'][_0x4dee6b(0x30d)]!='reject'&&(_0x2d2bbd=devices[_0x3d2132]['telegram2FaApproval'][_0x4dee6b(0x2fe)]==devices[_0x3d2132]['ip']&&new Date()[_0x4dee6b(0x32f)]()-devices[_0x3d2132]['telegram2FaApproval'][_0x4dee6b(0x1fa)]<devices[_0x3d2132][_0x4dee6b(0x2c8)][_0x4dee6b(0x30d)]*0x3c*0x3e8),_0x2d2bbd;},normalizeIP=_0x1c2b04=>{const _0x6ff921=_0x124d42;let _0x3ce7e0=null,_0xe35978=null;if(ipaddr[_0x6ff921(0x27b)](_0x1c2b04)){const _0x3859d0=ipaddr[_0x6ff921(0x2a9)](_0x1c2b04);_0x3859d0[_0x6ff921(0x27a)]()===_0x6ff921(0x268)?(_0x3859d0[_0x6ff921(0x2a5)]()&&(_0x3ce7e0=_0x3859d0[_0x6ff921(0x221)]()[_0x6ff921(0x2cc)]()),_0xe35978=_0x3859d0['toString']()):(_0x3ce7e0=_0x3859d0[_0x6ff921(0x2cc)](),_0xe35978=_0x3859d0['toIPv4MappedAddress']()[_0x6ff921(0x2cc)]());}return{'show':_0x3ce7e0?_0x3ce7e0:_0xe35978,'store':_0xe35978};};