const _0x42c257=_0x2de1;(function(_0x13bada,_0x3719f6){const _0x52d468=_0x2de1,_0x4906b8=_0x13bada();while(!![]){try{const _0x17fd74=parseInt(_0x52d468(0x1c0))/0x1*(parseInt(_0x52d468(0x115))/0x2)+parseInt(_0x52d468(0x177))/0x3+-parseInt(_0x52d468(0x12d))/0x4*(-parseInt(_0x52d468(0x1a9))/0x5)+-parseInt(_0x52d468(0x111))/0x6*(-parseInt(_0x52d468(0x1df))/0x7)+parseInt(_0x52d468(0x1ce))/0x8+-parseInt(_0x52d468(0x19a))/0x9*(parseInt(_0x52d468(0x12e))/0xa)+parseInt(_0x52d468(0x23b))/0xb*(-parseInt(_0x52d468(0x22f))/0xc);if(_0x17fd74===_0x3719f6)break;else _0x4906b8['push'](_0x4906b8['shift']());}catch(_0x2a8626){_0x4906b8['push'](_0x4906b8['shift']());}}}(_0x4ac6,0x58afc));const _0x4b8bc0=function(){let _0x206f4e=!![];return function(_0x5dff9d,_0x3bef9d){const _0x38c595=_0x206f4e?function(){const _0x5ba624=_0x2de1;if(_0x3bef9d){const _0x2bddbd=_0x3bef9d[_0x5ba624(0x1d0)](_0x5dff9d,arguments);return _0x3bef9d=null,_0x2bddbd;}}:function(){};return _0x206f4e=![],_0x38c595;};}(),_0x1b243b=_0x4b8bc0(this,function(){const _0x3c51e8=_0x2de1;return _0x1b243b[_0x3c51e8(0xf3)]()['search'](_0x3c51e8(0x195))[_0x3c51e8(0xf3)]()[_0x3c51e8(0x218)](_0x1b243b)[_0x3c51e8(0x1cc)]('(((.+)+)+)+$');});_0x1b243b();'use strict';process['env'][_0x42c257(0x14a)]=0x1;const childProcess=require(_0x42c257(0x13f)),FileSync=require(_0x42c257(0x252)),fs=require('fs'),fns=require(_0x42c257(0x1d8)),low=require('lowdb'),path=require('path'),crypto=require(_0x42c257(0x161)),Crypt=require(_0x42c257(0x176))['Crypt'],RSA=require(_0x42c257(0x176))['RSA'],bcrypt=require(_0x42c257(0x21a)),jwt=require('jsonwebtoken'),{Analytics}=require(_0x42c257(0x126)),googleAnalyticsV3Plugin=require(_0x42c257(0x1c9))[_0x42c257(0x122)],ipaddr=require(_0x42c257(0x209)),argv=require('yargs/yargs')(process['argv'][_0x42c257(0x1e7)](0x2))[_0x42c257(0x12b)],uuidRandom=require('uuid-random'),Mixpanel=require(_0x42c257(0x226)),axios=require('axios'),PORT=argv[_0x42c257(0x127)]||_0x42c257(0x18c),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console['log'](_0x42c257(0x21d)+PORT+_0x42c257(0x121)),process[_0x42c257(0x125)](0x1));const HOST=argv[_0x42c257(0x159)]||null,userID=argv[_0x42c257(0x185)]||'';let bbpath=_0x42c257(0x124),bbpath2='';const botfile=_0x42c257(0x1e4),configfile=_0x42c257(0x16c),settingsfile=_0x42c257(0x1fb),securefile=_0x42c257(0x10f);let validInstallation=!![];!fs[_0x42c257(0x141)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x42c257(0x1f2)),configpath=userID?bbpath+_0x42c257(0x133)+userID+'/':bbpath+_0x42c257(0x133),configbackuppath=configpath+_0x42c257(0x1ae);!fs['existsSync'](configpath)&&fs[_0x42c257(0x1fd)](configpath);!fs[_0x42c257(0x141)](configbackuppath)&&fs[_0x42c257(0x1fd)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x42c257(0x154)]({'bots':[]})[_0x42c257(0x1b7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x42c257(0x154)]({'settings':{'timeshift':0x0}})[_0x42c257(0x1b7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x42c257(0x154)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x42c257(0x235),'rsaStandard':_0x42c257(0x1a7)});const saltRounds=0xa,mixpanel=Mixpanel[_0x42c257(0x1b2)](_0x42c257(0x1aa),{'host':_0x42c257(0x227)}),analytics=Analytics({'app':_0x42c257(0x256),'plugins':[googleAnalyticsV3Plugin({'trackingId':_0x42c257(0x1cf)})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x42c257(0x118))[_0x42c257(0x202)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip;const express=require(_0x42c257(0x22a)),app=express(),http=require('http')[_0x42c257(0x1b5)](app);app[_0x42c257(0x1ba)](express[_0x42c257(0x1ee)](path[_0x42c257(0x1a6)](__dirname,bbpath2,_0x42c257(0x169)))),app[_0x42c257(0x1ba)](express['static'](path[_0x42c257(0x1a6)](__dirname,bbpath2,_0x42c257(0x23d)))),app['get']('/',function(_0x5858c3,_0x4bc1a1){const _0xe80278=_0x42c257;_0x4bc1a1[_0xe80278(0x109)](path[_0xe80278(0x1a6)](__dirname,bbpath2,_0xe80278(0x169),_0xe80278(0x106)));}),app[_0x42c257(0x221)](_0x42c257(0x210),function(_0x4d4fba,_0x6f14a){const _0x193593=_0x42c257;_0x6f14a[_0x193593(0x109)](path[_0x193593(0x1a6)](__dirname,bbpath2,_0x193593(0x23d),'index.html'));}),app['get'](_0x42c257(0x101),(_0x3b856e,_0x21772f)=>{const _0x170f7d=_0x42c257;_0x21772f[_0x170f7d(0x109)](path['join'](__dirname,bbpath2,_0x170f7d(0x23d),_0x170f7d(0x106)));}),app[_0x42c257(0x221)](_0x42c257(0x1bd),(_0x455f8a,_0x1d0f90)=>{const _0x4db9db=_0x42c257;_0x1d0f90[_0x4db9db(0x109)](path[_0x4db9db(0x1a6)](__dirname,bbpath2,_0x4db9db(0x23d),_0x4db9db(0x106)));}),app[_0x42c257(0x221)](_0x42c257(0x1fa),(_0x49e06e,_0x99eb2f)=>{const _0x924477=_0x42c257;_0x99eb2f['sendFile'](path[_0x924477(0x1a6)](__dirname,bbpath2,_0x924477(0x23d),_0x924477(0x106)));}),app[_0x42c257(0x221)](_0x42c257(0x15b),(_0x166c79,_0x534102)=>{const _0x2e1a83=_0x42c257;_0x534102[_0x2e1a83(0x109)](path[_0x2e1a83(0x1a6)](__dirname,bbpath2,'build','index.html'));}),app[_0x42c257(0x221)]('/:bot/configuration',(_0x4d2d72,_0x12899a)=>{const _0x203c57=_0x42c257;_0x12899a[_0x203c57(0x109)](path[_0x203c57(0x1a6)](__dirname,bbpath2,_0x203c57(0x23d),_0x203c57(0x106)));}),app[_0x42c257(0x221)](_0x42c257(0x138),(_0x4a0557,_0x292a05)=>{const _0x3093a1=_0x42c257;_0x292a05[_0x3093a1(0x109)](path[_0x3093a1(0x1a6)](__dirname,bbpath2,_0x3093a1(0x23d),_0x3093a1(0x106)));});if(HOST)http[_0x42c257(0x168)](PORT,HOST);else http[_0x42c257(0x168)](PORT);const io=require(_0x42c257(0x171))(http,{});oneTimeMigration(),cleanBlacklist();const TelegramBot=require(_0x42c257(0xff));let tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x42c257(0x16a)]&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]);function startServer(){const _0x418218=_0x42c257;console['log'](''),console[_0x418218(0x132)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x418218(0x147));if(config[_0x418218(0x174)]!=0x0)config['forEach'](_0x26c3f1=>{const _0x334e98=_0x418218;if(_0x26c3f1[_0x334e98(0x24c)]==_0x334e98(0x12a)||_0x26c3f1[_0x334e98(0x24c)]==_0x334e98(0x251))logging(_0x334e98(0x13e)+_0x26c3f1[_0x334e98(0x21e)]+'\x20|\x20'+_0x26c3f1[_0x334e98(0x173)]),startBot([_0x26c3f1['botID'],userID],{'cwd':bbpath},function(_0x350b69){if(_0x350b69)logging(_0x350b69);});else(_0x26c3f1[_0x334e98(0x24c)]==_0x334e98(0x19c)||_0x26c3f1[_0x334e98(0x24c)]==_0x334e98(0x140))&&logging(_0x334e98(0x1a3)+_0x26c3f1[_0x334e98(0x21e)]+_0x334e98(0x18a)+_0x26c3f1[_0x334e98(0x173)]);});else!newBot&&console[_0x418218(0x132)](_0x418218(0x1dd));if(newBot)addBot();console[_0x418218(0x132)](_0x418218(0x147)),console[_0x418218(0x132)]('');}function startSocket(){const _0xd7b826=_0x42c257;io['on'](_0xd7b826(0x1eb),_0x1f722f=>{const _0x42fcc6=_0xd7b826;let _0x3f1b2d,_0x360219,_0x5d1b5c,_0x37c1d6,_0x45e1d8;const _0x499aef=_0x1f722f[_0x42fcc6(0x14e)][_0x42fcc6(0x1d3)][_0x42fcc6(0x10d)];_0x360219=_0x499aef[_0x42fcc6(0x254)](/bot[0-9]{3}/);if(_0x360219)_0x5d1b5c=_0x360219[0x0]['match'](/[0-9]{3}/);if(_0x5d1b5c)_0x3f1b2d=_0x5d1b5c[0x0];else _0x3f1b2d='botmanager';const _0x3361a4=_0x1f722f[_0x42fcc6(0x14e)][_0x42fcc6(0x15c)][_0x42fcc6(0x1da)];if(!_0x3361a4)_0x1f722f[_0x42fcc6(0x1ff)](_0x42fcc6(0x24c),{'publicKey':secure[_0x42fcc6(0x187)]});else{_0x37c1d6=timelyDecrypt(_0x3361a4,![]);if(!_0x37c1d6)_0x1f722f[_0x42fcc6(0x1ff)]('status',{'publicKey':secure[_0x42fcc6(0x187)]});else{_0x45e1d8=normalizeIP(_0x1f722f[_0x42fcc6(0x17c)][_0x42fcc6(0x16e)])[_0x42fcc6(0x1ed)];if(!devices[_0x37c1d6])devices[_0x37c1d6]={'uuid':_0x37c1d6,'access':{'token':null}};devices[_0x37c1d6]['ip']=_0x45e1d8;const _0x361ca5=addClient(_0x1f722f['id'],_0x37c1d6,_0x3f1b2d);setAccess(_0x361ca5),_0x1f722f['on']('login',_0xd4af5b=>{const _0x5266c1=_0x42fcc6,_0x1401b1=timelyDecrypt(_0xd4af5b[_0x5266c1(0x24e)]);if(_0x1401b1){_0xd4af5b={'username':_0xd4af5b[_0x5266c1(0x238)],'password':_0x1401b1},devices[_0x37c1d6][_0x5266c1(0x213)]=validateCredentials(_0xd4af5b,_0x37c1d6);if(devices[_0x37c1d6][_0x5266c1(0x213)]['allow']==![]&&devices[_0x37c1d6][_0x5266c1(0x213)][_0x5266c1(0x1e1)]==_0x5266c1(0x230))_0x1f722f[_0x5266c1(0x1ff)](_0x5266c1(0x24c),{'access':devices[_0x37c1d6]['access']}),loginAccess2FA(_0x37c1d6,_0x45e1d8);else{if(devices[_0x37c1d6]['access'][_0x5266c1(0x23f)]==![]&&devices[_0x37c1d6][_0x5266c1(0x213)][_0x5266c1(0x1e1)]=='invalid\x20credentials')_0x1f722f['emit'](_0x5266c1(0x24c),{'access':devices[_0x37c1d6]['access']});else devices[_0x37c1d6][_0x5266c1(0x213)][_0x5266c1(0x23f)]&&devices[_0x37c1d6]['access'][_0x5266c1(0x1e1)]==_0x5266c1(0x11b)&&(getClientsWithUuid(_0x37c1d6)[_0x5266c1(0x151)](_0x4b8b61=>{setAccess(_0x4b8b61);}),setTokenRefresh(_0x37c1d6),setSessionTimeout(_0x5266c1(0x113),_0x37c1d6));}}else logging(_0x5266c1(0x207));}),_0x1f722f['on'](_0x42fcc6(0x19b),()=>{resetPassword();}),_0x1f722f['on'](_0x42fcc6(0x1d4),_0x5733d0=>{removeClient(_0x1f722f['id']);});}}});}function initClient(_0x510c91){const _0x6cd452=_0x42c257;if(_0x510c91!=_0x6cd452(0x212)&&config[_0x6cd452(0x215)]!=''){if(pid[_0x510c91])pid[_0x510c91]['send']({'function':'initclient','args':null});}}function getSocket(_0x8ee7b7){const _0x5652ad=_0x42c257;return io['sockets']['sockets'][_0x5652ad(0x221)](_0x8ee7b7);}function setAccess(_0x5065e2){const _0x4be013=_0x42c257,_0x3fc001=getSocket(_0x5065e2['id']),_0x33005b=_0x5065e2[_0x4be013(0x130)],_0x325085=_0x5065e2[_0x4be013(0x244)];devices[_0x33005b][_0x4be013(0x213)]=validateAccess(devices[_0x33005b]['access']['token'],_0x33005b),_0x3fc001[_0x4be013(0x1a6)](_0x33005b);if(devices[_0x33005b]['access']['allow']){_0x3fc001[_0x4be013(0x1a6)](_0x325085);if(_0x325085==_0x4be013(0x212))initializeSocketBotManager(_0x3fc001);else initializeSocketBot(_0x3fc001);initClient(_0x325085);}devices[_0x33005b]['access'][_0x4be013(0x1e5)]&&devices[_0x33005b]['access'][_0x4be013(0x1e1)]==_0x4be013(0x1c2)&&setSessionTimeout('2FA',_0x33005b),devices[_0x33005b][_0x4be013(0x213)]['token']&&devices[_0x33005b][_0x4be013(0x213)][_0x4be013(0x1e1)]==_0x4be013(0x21f)&&setSessionTimeout(_0x4be013(0x113),_0x33005b),_0x3fc001[_0x4be013(0x1ff)]('status',{'status':_0x5065e2['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x33005b][_0x4be013(0x213)],'externalip':devices[_0x33005b]['ip'],'publicKey':secure[_0x4be013(0x187)],'userid':settings[_0x4be013(0x1f3)],'validInstallation':validInstallation}),devices[_0x33005b]['access'][_0x4be013(0x23f)]==![]&&devices[_0x33005b][_0x4be013(0x213)][_0x4be013(0x1e1)]==_0x4be013(0x158)&&temporaryAccess2FA(_0x33005b,devices[_0x33005b]['ip']);}function setSessionTimeout(_0x35b7dd,_0x2d1f87){const _0x231ea2=_0x42c257;let _0x21abc7;if(_0x35b7dd=='login')_0x21abc7=loginExpiry*0x3c*0x3e8;else _0x21abc7=devices[_0x2d1f87]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x231ea2(0x253)]()-devices[_0x2d1f87][_0x231ea2(0x16f)][_0x231ea2(0x167)]);if(devices[_0x2d1f87]['pidExpireLogin'])clearTimeout(devices[_0x2d1f87][_0x231ea2(0x196)]);devices[_0x2d1f87]['pidExpireLogin']=setTimeout(()=>{const _0x1b3fd8=_0x231ea2;if(devices[_0x2d1f87][_0x1b3fd8(0x13b)])clearTimeout(devices[_0x2d1f87]['pidRefreshToken']);removeSocketListeners(_0x2d1f87),addBlacklist(_0x2d1f87),devices[_0x2d1f87]['telegramIpApproval']=null,devices[_0x2d1f87][_0x1b3fd8(0x155)]=null,devices[_0x2d1f87][_0x1b3fd8(0x213)]['token']=null,devices[_0x2d1f87][_0x1b3fd8(0x213)]=validateAccess(devices[_0x2d1f87][_0x1b3fd8(0x213)][_0x1b3fd8(0x1e5)],_0x2d1f87),!(devices[_0x2d1f87]['access'][_0x1b3fd8(0x23f)]&&devices[_0x2d1f87][_0x1b3fd8(0x213)][_0x1b3fd8(0x1e1)]==_0x1b3fd8(0x1d9))&&(_0x35b7dd=='login'?io['to'](_0x2d1f87)[_0x1b3fd8(0x1ff)]('status',{'access':{'allow':![],'reason':_0x1b3fd8(0x249),'token':null}}):io['to'](_0x2d1f87)[_0x1b3fd8(0x1ff)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x2d1f87][_0x1b3fd8(0x213)]['token']=null;},_0x21abc7);}function setTokenRefresh(_0x19aadc){const _0x2e8a7e=_0x42c257;if(devices[_0x19aadc]['pidRefreshToken'])clearTimeout(devices[_0x19aadc][_0x2e8a7e(0x13b)]);devices[_0x19aadc][_0x2e8a7e(0x13b)]=setTimeout(()=>{const _0x12a4c1=_0x2e8a7e;getClientsWithUuid(_0x19aadc)[_0x12a4c1(0x174)]!=0x0?(devices[_0x19aadc]['access']=refreshToken(_0x19aadc),io['to'](_0x19aadc)[_0x12a4c1(0x1ff)](_0x12a4c1(0x24c),{'status':_0x12a4c1(0x137),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x19aadc][_0x12a4c1(0x213)],'externalip':devices[_0x19aadc]['ip'],'publicKey':secure[_0x12a4c1(0x187)],'validInstallation':validInstallation}),setTokenRefresh(_0x19aadc)):clearTimeout(devices[_0x19aadc][_0x12a4c1(0x13b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x66f38d){const _0x3c09e8=_0x42c257,_0x6fa0a5=getClient(_0x66f38d['id'])[_0x3c09e8(0x130)];_0x66f38d[_0x3c09e8(0x1ff)](_0x3c09e8(0x178),config),_0x66f38d[_0x3c09e8(0x1ff)]('settings',cleanSettings()),_0x66f38d['on'](_0x3c09e8(0x216),_0x42a8c1=>{const _0x134df3=_0x3c09e8;if(validateAccess(_0x42a8c1,_0x6fa0a5)[_0x134df3(0x23f)])addBot();else logging(_0x134df3(0x245));}),_0x66f38d['on'](_0x3c09e8(0x152),(_0x542ec9,_0x44d587)=>{const _0x16992a=_0x3c09e8;if(validateAccess(_0x44d587,_0x6fa0a5)[_0x16992a(0x23f)])toggleBot(_0x542ec9[_0x16992a(0x21e)],_0x542ec9[_0x16992a(0x24c)],_0x542ec9[_0x16992a(0x170)]);else logging(_0x16992a(0x1d6));}),_0x66f38d['on'](_0x3c09e8(0x165),(_0x3ccd13,_0x48fe46)=>{const _0x2fb250=_0x3c09e8;if(validateAccess(_0x48fe46,_0x6fa0a5)[_0x2fb250(0x23f)])toggleBotMode(_0x3ccd13);else logging(_0x2fb250(0x1d6));}),_0x66f38d['on'](_0x3c09e8(0x224),(_0x20dae9,_0x3e0a6a)=>{const _0x15d0b5=_0x3c09e8;if(validateAccess(_0x3e0a6a,_0x6fa0a5)['allow'])deleteBot(_0x20dae9);else logging(_0x15d0b5(0x10c));}),_0x66f38d['on'](_0x3c09e8(0x163),(_0x6df323,_0x1e862d)=>{const _0x152eea=_0x3c09e8;if(validateAccess(_0x1e862d,_0x6fa0a5)[_0x152eea(0x23f)])storeSettings(_0x6df323,!![]);else logging(_0x152eea(0x181));}),_0x66f38d['on'](_0x3c09e8(0x104),_0x55e597=>{if(validateAccess(_0x55e597,_0x6fa0a5)['allow'])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x66f38d['on'](_0x3c09e8(0x108),_0x4d66c4=>{const _0x20236c=_0x3c09e8;if(validateAccess(_0x4d66c4,_0x6fa0a5)[_0x20236c(0x23f)]){if(devices[_0x6fa0a5][_0x20236c(0x13b)])clearTimeout(devices[_0x6fa0a5][_0x20236c(0x13b)]);if(devices[_0x6fa0a5][_0x20236c(0x196)])clearTimeout(devices[_0x6fa0a5][_0x20236c(0x196)]);removeSocketListeners(getClient(_0x66f38d['id'])['uuid']),addBlacklist(_0x6fa0a5),devices[_0x6fa0a5][_0x20236c(0x16f)]=null,devices[_0x6fa0a5][_0x20236c(0x155)]=null,devices[_0x6fa0a5][_0x20236c(0x213)][_0x20236c(0x1e5)]=null,io['to'](getClient(_0x66f38d['id'])[_0x20236c(0x130)])[_0x20236c(0x1ff)](_0x20236c(0x24c),{'access':{'allow':![],'reason':_0x20236c(0x1c1),'token':null}});}else logging(_0x20236c(0x1bc));});}function initializeSocketBot(_0xb06c5d){const _0x259493=_0x42c257,_0x195e1b=getClient(_0xb06c5d['id'])[_0x259493(0x244)],_0x55d17e=getClient(_0xb06c5d['id'])[_0x259493(0x130)];_0xb06c5d['on']('get-logs',(_0x5e0f07,_0x43ea09)=>{const _0x52c8d8=_0x259493;if(validateAccess(_0x43ea09,_0x55d17e)['allow']){if(pid[_0x195e1b])pid[_0x195e1b]['send']({'function':_0x52c8d8(0x1f9),'args':_0x5e0f07});}else logging(_0x52c8d8(0x200));}),_0xb06c5d['on'](_0x259493(0x119),(_0x59c2f4,_0x1ba4ea)=>{const _0x4b75fc=_0x259493;if(validateAccess(_0x1ba4ea,_0x55d17e)['allow']){if(pid[_0x195e1b])pid[_0x195e1b][_0x4b75fc(0x10e)]({'function':_0x4b75fc(0x117),'args':_0x59c2f4});}else logging(_0x4b75fc(0x219));}),_0xb06c5d['on']('get-portfolio',(_0x365522,_0x2aff86)=>{const _0x19d2ce=_0x259493;if(validateAccess(_0x2aff86,_0x55d17e)['allow']){if(pid[_0x195e1b])pid[_0x195e1b][_0x19d2ce(0x10e)]({'function':_0x19d2ce(0x17b),'args':_0x365522});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0xb06c5d['on']('store-configuration',(_0x33f849,_0x1a1686)=>{const _0x53181d=_0x259493;if(validateAccess(_0x1a1686,_0x55d17e)[_0x53181d(0x23f)]){if(pid[_0x195e1b])pid[_0x195e1b][_0x53181d(0x10e)]({'function':_0x53181d(0x144),'args':_0x33f849});}else logging(_0x53181d(0xf8));}),_0xb06c5d['on'](_0x259493(0x190),(_0x5bca63,_0x578216)=>{const _0x5b14b4=_0x259493;if(validateAccess(_0x578216,_0x55d17e)['allow']){if(pid[_0x195e1b])pid[_0x195e1b][_0x5b14b4(0x10e)]({'function':_0x5b14b4(0x20b),'args':_0x5bca63});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0xb06c5d['on']('get-starting-balances',_0x6cb663=>{const _0x2d75e1=_0x259493;if(validateAccess(_0x6cb663,_0x55d17e)['allow']){if(pid[_0x195e1b])pid[_0x195e1b][_0x2d75e1(0x10e)]({'function':'getStartingBalances','args':null});}else logging(_0x2d75e1(0x14d));}),_0xb06c5d['on'](_0x259493(0x157),(_0x4e72f0,_0x4b2c24)=>{const _0x14f358=_0x259493;if(validateAccess(_0x4b2c24,_0x55d17e)[_0x14f358(0x23f)]){if(pid[_0x195e1b])pid[_0x195e1b][_0x14f358(0x10e)]({'function':_0x14f358(0x1ac),'args':_0x4e72f0});}else logging(_0x14f358(0x1ea));}),_0xb06c5d['on']('cancel-loading',_0x48dc83=>{const _0x24e480=_0x259493;if(validateAccess(_0x48dc83,_0x55d17e)[_0x24e480(0x23f)]){if(pid[_0x195e1b])pid[_0x195e1b][_0x24e480(0x10e)]({'function':'cancelLoading','args':null});}else logging(_0x24e480(0x11c));}),_0xb06c5d['on']('logout',_0x9080e0=>{const _0x20ce0c=_0x259493;if(validateAccess(_0x9080e0,_0x55d17e)[_0x20ce0c(0x23f)]){if(devices[_0x55d17e][_0x20ce0c(0x13b)])clearTimeout(devices[_0x55d17e][_0x20ce0c(0x13b)]);if(devices[_0x55d17e][_0x20ce0c(0x196)])clearTimeout(devices[_0x55d17e][_0x20ce0c(0x196)]);removeSocketListeners(getClient(_0xb06c5d['id'])[_0x20ce0c(0x130)]),addBlacklist(_0x55d17e),devices[_0x55d17e][_0x20ce0c(0x16f)]=null,devices[_0x55d17e][_0x20ce0c(0x155)]=null,devices[_0x55d17e][_0x20ce0c(0x213)]['token']=null,io['to'](getClient(_0xb06c5d['id'])[_0x20ce0c(0x130)])['emit'](_0x20ce0c(0x24c),{'access':{'allow':![],'reason':_0x20ce0c(0x1c1),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x658f61){const _0x3e6eae=_0x42c257;getClientsWithUuid(_0x658f61)[_0x3e6eae(0x151)](_0x40f2d7=>{const _0x5baaa2=_0x3e6eae;getSocket(_0x40f2d7['id'])[_0x5baaa2(0x1c8)]();});}function cleanSettings(){const _0x229560=_0x42c257;let _0x253fc8=settings;return settings[_0x229560(0x1f0)]&&settings[_0x229560(0x1f0)]!=''&&(_0x253fc8={..._0x253fc8,'telegramToken':_0x229560(0x243)}),settings[_0x229560(0x1de)]&&settings[_0x229560(0x1de)]!=''&&(_0x253fc8={..._0x253fc8,'bbPassword':_0x229560(0x243)}),_0x253fc8;}function updateBB(){const _0x4dc59a=_0x42c257;installingUpdate=!![],config['forEach'](_0x3d9147=>{const _0x24f609=_0x2de1;restartBot(_0x3d9147[_0x24f609(0x21e)]);}),process[_0x4dc59a(0x10e)]({'update':!![]},_0x5a2a22=>{});}function startBot(_0x446507,_0x243646,_0x1708c8){const _0x9e1c3c=_0x42c257;let _0x434764=![];const _0x3e29b8=_0x446507[0x0];_0x243646={..._0x243646,'stdio':[_0x9e1c3c(0x1c4),'inherit','inherit',_0x9e1c3c(0x222)]},pid[_0x3e29b8]=childProcess[_0x9e1c3c(0x23e)](botfile,_0x446507,_0x243646),pid[_0x3e29b8]['on'](_0x9e1c3c(0x18f),_0x2bc481=>{const _0x558c6f=_0x9e1c3c;switch(Object['keys'](_0x2bc481)[0x0]){case _0x558c6f(0x173):updateBotName(_0x3e29b8,_0x2bc481[_0x558c6f(0x173)]);break;case _0x558c6f(0x1b0):updateBotManager();break;case _0x558c6f(0x24c):updateStatus(_0x3e29b8,_0x2bc481['status']);break;case _0x558c6f(0x170):updateLive(_0x3e29b8,_0x2bc481[_0x558c6f(0x170)]);break;case _0x558c6f(0x24a):updateLive(_0x3e29b8,_0x2bc481[_0x558c6f(0x24a)]),io['to'](_0x3e29b8)[_0x558c6f(0x1ff)](_0x558c6f(0x24c),{'access':{'allow':![],'reason':_0x558c6f(0x197),'token':null}});break;case _0x558c6f(0x136):_0x2bc481[_0x558c6f(0x136)]==_0x558c6f(0x15f)&&restartBot(_0x3e29b8);_0x2bc481[_0x558c6f(0x136)]=='kill'&&toggleBot(_0x3e29b8,_0x558c6f(0x19c),_0x558c6f(0x1a1));break;case'telegram':sendTelegram(_0x3e29b8,_0x2bc481[_0x558c6f(0x1f6)]);break;case _0x558c6f(0x1e9):sendTelegramMsg(_0x2bc481[_0x558c6f(0x1e9)]);break;case _0x558c6f(0x23c):io['to'](_0x3e29b8)[_0x558c6f(0x1ff)](_0x2bc481[_0x558c6f(0x23c)],_0x2bc481['args']);break;}}),pid[_0x3e29b8]['on'](_0x9e1c3c(0x1e0),function(_0x1560ed){if(_0x434764)return;_0x434764=!![],_0x1708c8(_0x1560ed);}),pid[_0x3e29b8]['on'](_0x9e1c3c(0x125),function(_0x22704c){const _0x5ac725=_0x9e1c3c;if(installingUpdate)return;if(_0x434764)return;_0x434764=!![],_0x1708c8(null);const _0x19720c=dbConfig['get'](_0x5ac725(0x178))[_0x5ac725(0x15d)]({'botID':_0x3e29b8})['value']();_0x19720c&&(_0x19720c[_0x5ac725(0x24c)]==_0x5ac725(0x12a)||_0x19720c['status']==_0x5ac725(0x251))&&(updateLive(_0x3e29b8,_0x5ac725(0x1a1)),logging('restarting\x20Bot\x20'+_0x3e29b8),startBot([_0x3e29b8,userID],{'cwd':bbpath},function(_0x40671d){if(_0x40671d)logging(_0x40671d);}));});}function stopBot(_0x1c509b){const _0x5028f7=_0x42c257;getClientsWithBotID(_0x1c509b)[_0x5028f7(0x151)](_0x2baf03=>{const _0x1c090f=_0x5028f7;getSocket(_0x2baf03['id'])[_0x1c090f(0x1d4)](!![]),removeClient(_0x2baf03['id']);}),pid[_0x1c509b]&&(pid[_0x1c509b][_0x5028f7(0x22c)](),pid[_0x1c509b]=null);}function _0x2de1(_0x50c1e7,_0x23fb3b){const _0x4a1650=_0x4ac6();return _0x2de1=function(_0x1b243b,_0x4b8bc0){_0x1b243b=_0x1b243b-0xf2;let _0x4ac6ae=_0x4a1650[_0x1b243b];return _0x4ac6ae;},_0x2de1(_0x50c1e7,_0x23fb3b);}function restartBot(_0x375897){if(pid[_0x375897])pid[_0x375897]['kill']();}function addBot(){const _0x31a7cb=_0x42c257;let _0x552eb0;for(let _0x410a83=0x1;_0x410a83<0x3e9;_0x410a83++){_0x552eb0=_0x410a83[_0x31a7cb(0xf3)]()[_0x31a7cb(0x1dc)](0x3,'0');let _0xaf606c=config['find'](_0x49913e=>_0x49913e['botID']==_0x552eb0);if(!_0xaf606c)break;}if(_0x552eb0===_0x31a7cb(0x1d2)){logging(_0x31a7cb(0x153));return;}logging(_0x31a7cb(0x11d)+_0x552eb0),dbConfig[_0x31a7cb(0x221)]('bots')[_0x31a7cb(0x208)]({'botID':_0x552eb0,'botname':_0x31a7cb(0x128)+_0x552eb0,'status':_0x31a7cb(0x251),'live':''})[_0x31a7cb(0x1b7)](),startBot([_0x552eb0,userID],{'cwd':bbpath},function(_0x36fc2b){if(_0x36fc2b)logging(_0x36fc2b);}),config=getConfiguration(),io['to'](_0x31a7cb(0x212))[_0x31a7cb(0x1ff)](_0x31a7cb(0x178),config);}function deleteBot(_0x10cce6){const _0x9378d3=_0x42c257;getClientsWithBotID(_0x10cce6)[_0x9378d3(0x151)](_0x4dc816=>{const _0x406066=_0x9378d3;getSocket(_0x4dc816['id'])[_0x406066(0x1d4)](!![]),removeClient(_0x4dc816['id']);}),dbConfig[_0x9378d3(0x221)]('bots')[_0x9378d3(0x204)]({'botID':_0x10cce6})[_0x9378d3(0x1b7)](),logging(_0x9378d3(0x241)+_0x10cce6),stopBot(_0x10cce6);try{fs[_0x9378d3(0x112)](path[_0x9378d3(0x1a6)](configpath,'bot-'+_0x10cce6+_0x9378d3(0x1c7))),fs[_0x9378d3(0x112)](path[_0x9378d3(0x1a6)](configpath,'bot-'+_0x10cce6+_0x9378d3(0x248))),fs[_0x9378d3(0x112)](path['join'](configpath,_0x9378d3(0x1b9)+_0x10cce6+_0x9378d3(0x1ec))),fs[_0x9378d3(0x112)](path[_0x9378d3(0x1a6)](configpath,_0x9378d3(0x1b9)+_0x10cce6+_0x9378d3(0x24f)));}catch(_0x5670cc){if(_0x5670cc)logging(_0x9378d3(0x211),_0x5670cc);}config=getConfiguration(),io['to'](_0x9378d3(0x212))[_0x9378d3(0x1ff)]('bots',config);}function toggleBot(_0x2df6f1,_0x15ca1f,_0x281ddb){const _0x36701e=_0x42c257;dbConfig[_0x36701e(0x221)](_0x36701e(0x178))[_0x36701e(0x15d)]({'botID':_0x2df6f1})[_0x36701e(0x17e)]({'status':_0x15ca1f})[_0x36701e(0x17e)]({'live':_0x281ddb})[_0x36701e(0x1b7)]();if(_0x15ca1f==_0x36701e(0x12a)||_0x15ca1f==_0x36701e(0x251))logging(_0x36701e(0x1c3)+_0x2df6f1),startBot([_0x2df6f1,userID],{'cwd':bbpath},function(_0x5ba50d){if(_0x5ba50d)logging(_0x5ba50d);});else(_0x15ca1f=='disabled'||_0x15ca1f=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x2df6f1),stopBot(_0x2df6f1));config=getConfiguration(),io['to'](_0x36701e(0x212))[_0x36701e(0x1ff)](_0x36701e(0x178),config);}function toggleStatus(_0x487856){const _0x28550a=_0x42c257;let _0xd92fc2=dbConfig[_0x28550a(0x221)](_0x28550a(0x178))[_0x28550a(0x15d)]({'botID':_0x487856})[_0x28550a(0x15a)](),_0x565f98;if(_0xd92fc2['status']===_0x28550a(0x12a))_0x565f98=_0x28550a(0x19c);else{if(_0xd92fc2[_0x28550a(0x24c)]==='new')_0x565f98=_0x28550a(0x140);else{if(_0xd92fc2['status']===_0x28550a(0x140))_0x565f98='new';else{if(_0xd92fc2['status']===_0x28550a(0x19c))_0x565f98='enabled';}}}return _0x565f98;}function updateStatus(_0x49e3cd,_0x4dd3de){const _0x53375e=_0x42c257;dbConfig['get']('bots')[_0x53375e(0x15d)]({'botID':_0x49e3cd})[_0x53375e(0x17e)]({'status':_0x4dd3de})['write'](),config=getConfiguration(),io['to'](_0x53375e(0x212))[_0x53375e(0x1ff)](_0x53375e(0x178),config);}function updateLive(_0x18cf29,_0x12e85f){const _0x3af805=_0x42c257;dbConfig['get'](_0x3af805(0x178))[_0x3af805(0x15d)]({'botID':_0x18cf29})[_0x3af805(0x17e)]({'live':_0x12e85f})[_0x3af805(0x1b7)](),config=getConfiguration(),io['to'](_0x3af805(0x212))['emit'](_0x3af805(0x178),config);}function updateBotName(_0x5a38b1,_0x1d82ef){const _0xdf7879=_0x42c257;dbConfig['get'](_0xdf7879(0x178))[_0xdf7879(0x15d)]({'botID':_0x5a38b1})[_0xdf7879(0x17e)]({'botname':_0x1d82ef})[_0xdf7879(0x1b7)](),config=getConfiguration(),io['to'](_0xdf7879(0x212))['emit'](_0xdf7879(0x178),config);}function updateBotManager(){const _0x29355a=_0x42c257;config=getConfiguration(),io['to'](_0x29355a(0x212))['emit'](_0x29355a(0x178),config);}function toggleBotMode(_0x3a455c){const _0x245a55=_0x42c257;if(pid[_0x3a455c])pid[_0x3a455c]['send']({'function':'toggleBotMode','args':null});else{const _0x347c8d=configpath+'bot-'+_0x3a455c+_0x245a55(0x1c7),_0x541dbe=fs[_0x245a55(0x250)](_0x347c8d),_0x55a867=JSON[_0x245a55(0xf7)](_0x541dbe),_0xe69287=_0x55a867[_0x245a55(0x244)][0x0][_0x245a55(0x1e3)];_0x55a867['bot'][0x0]['headless']=!_0xe69287;const _0x239a49=JSON['stringify'](_0x55a867,null,0x2);fs[_0x245a55(0x1a5)](_0x347c8d,_0x239a49),config=getConfiguration(),io['to'](_0x245a55(0x212))[_0x245a55(0x1ff)](_0x245a55(0x178),config);}}function telegramError(_0x210819){const _0x5aed38=_0x42c257;console[_0x5aed38(0x132)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0xf38820){const _0x3a3102=_0x42c257;if(_0xf38820[_0x3a3102(0x18e)]['username']!=settings['telegramUsername']&&'@'+_0xf38820[_0x3a3102(0x18e)][_0x3a3102(0x238)]!=settings[_0x3a3102(0x16a)])return tgBot[_0x3a3102(0x19e)](_0xf38820[_0x3a3102(0x12c)]['id'],_0x3a3102(0x217),{'parse_mode':_0x3a3102(0x214)})['catch'](_0x23b288=>{telegramError(_0x23b288);}),![];return!![];}async function initTelegram(){const _0x3ac38e=_0x42c257;if(tgBot)tgBot[_0x3ac38e(0x1cb)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x19cbc2=_0x3ac38e(0x246);_0x19cbc2+='\x0a',_0x19cbc2+=_0x3ac38e(0x114),_0x19cbc2+='/disable\x20-\x20disable\x20notifications\x0a',_0x19cbc2+=_0x3ac38e(0x1ab),_0x19cbc2+=_0x3ac38e(0x1f7),_0x19cbc2+='/on\x20-\x20start\x20bot(s)\x0a',_0x19cbc2+='/off\x20-\x20stop\x20bot(s)\x0a',_0x19cbc2+=_0x3ac38e(0x24d),_0x19cbc2+=_0x3ac38e(0x13d),_0x19cbc2+=_0x3ac38e(0x103),_0x19cbc2+=_0x3ac38e(0x233),_0x19cbc2+=_0x3ac38e(0x229);let _0x4c0a85='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x4c0a85+='\x0a',_0x4c0a85+=_0x19cbc2,tgBot[_0x3ac38e(0x14c)](/\/start/,_0x9b691c=>{const _0xe4cce6=_0x3ac38e;if(!validateTelegram(_0x9b691c))return;if(settings['telegramChatId']!=_0x9b691c[_0xe4cce6(0x12c)]['id'])updateSetting(_0xe4cce6(0x10a),_0x9b691c['chat']['id']);updateSetting(_0xe4cce6(0x223),!![]),tgBot[_0xe4cce6(0x19e)](_0x9b691c[_0xe4cce6(0x12c)]['id'],_0x4c0a85)[_0xe4cce6(0x1fc)](_0x1c658a=>{telegramError(_0x1c658a);});}),tgBot[_0x3ac38e(0x14c)](/\/enable/,_0x48fe24=>{const _0x2eb50a=_0x3ac38e;if(!validateTelegram(_0x48fe24))return;if(settings[_0x2eb50a(0x10a)]!=_0x48fe24[_0x2eb50a(0x12c)]['id'])updateSetting(_0x2eb50a(0x10a),_0x48fe24[_0x2eb50a(0x12c)]['id']);updateSetting(_0x2eb50a(0x223),!![]),tgBot[_0x2eb50a(0x19e)](_0x48fe24[_0x2eb50a(0x12c)]['id'],_0x2eb50a(0x175))[_0x2eb50a(0x1fc)](_0x15e7d1=>{telegramError(_0x15e7d1);});}),tgBot[_0x3ac38e(0x14c)](/\/config/,async _0x1c7f92=>{const _0x469ea3=_0x3ac38e;if(!validateTelegram(_0x1c7f92))return;tgBot[_0x469ea3(0x24b)](_0x469ea3(0xf6)),tgBot[_0x469ea3(0x19e)](_0x1c7f92[_0x469ea3(0x12c)]['id'],_0x469ea3(0x162),{'reply_markup':{'inline_keyboard':[[{'text':_0x469ea3(0x1bf),'callback_data':_0x469ea3(0xf5)},{'text':_0x469ea3(0x1d7),'callback_data':_0x469ea3(0x11e)},{'text':_0x469ea3(0xfb),'callback_data':_0x469ea3(0x231)}]]}})[_0x469ea3(0x1fc)](_0xf6696b=>{telegramError(_0xf6696b);}),tgBot['on'](_0x469ea3(0xf6),async _0x8164b0=>{const _0x5f071b=_0x469ea3,_0x5c64a9=_0x8164b0[_0x5f071b(0x232)],_0x3f39b4=_0x8164b0[_0x5f071b(0x18f)];tgBot[_0x5f071b(0x239)](_0x8164b0['id'])['then'](async()=>{const _0x56175e=_0x5f071b;_0x5c64a9==_0x56175e(0xf5)&&(updateSetting(_0x56175e(0x1a4),_0x56175e(0xf5)),updateSetting('telegramEnabled',!![]),await tgBot[_0x56175e(0x19e)](_0x3f39b4['chat']['id'],_0x56175e(0x21b))[_0x56175e(0x1fc)](_0x4fc8e3=>{telegramError(_0x4fc8e3);}));_0x5c64a9==_0x56175e(0x11e)&&(updateSetting('telegramEvents',_0x56175e(0x11e)),updateSetting('telegramEnabled',!![]),await tgBot[_0x56175e(0x19e)](_0x3f39b4[_0x56175e(0x12c)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x56175e(0x1fc)](_0x355dcd=>{telegramError(_0x355dcd);}));_0x5c64a9=='all'&&(updateSetting(_0x56175e(0x1a4),_0x56175e(0x231)),updateSetting(_0x56175e(0x223),!![]),await tgBot[_0x56175e(0x19e)](_0x3f39b4['chat']['id'],_0x56175e(0x131))['catch'](_0x470fc4=>{telegramError(_0x470fc4);}));if(!settings[_0x56175e(0x10a)])tgBot[_0x56175e(0x19e)](_0x3f39b4[_0x56175e(0x12c)]['id'],_0x56175e(0x10b))['catch'](_0x38ee80=>{telegramError(_0x38ee80);});}),tgBot[_0x5f071b(0x24b)](_0x5f071b(0xf6));});}),tgBot['onText'](/\/status/,_0x56691e=>{const _0x28236c=_0x3ac38e;if(!validateTelegram(_0x56691e))return;const _0x51af21=getBotsWithMode();let _0x511968=_0x28236c(0x1db);config[_0x28236c(0x151)](_0x13a844=>{const _0x2e0feb=_0x28236c,_0x1d5528=_0x51af21[_0x2e0feb(0x15d)](_0x162698=>_0x162698[_0x2e0feb(0x21e)]==_0x13a844['botID'])[_0x2e0feb(0x225)];_0x511968+=_0x2e0feb(0x128)+_0x13a844['botID']+':\x20'+_0x13a844[_0x2e0feb(0x24c)]+_0x2e0feb(0x18a)+_0x1d5528+_0x2e0feb(0x18a)+_0x13a844[_0x2e0feb(0x170)]+'\x0a';}),_0x511968+='\x0a',_0x511968+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x511968+=!settings[_0x28236c(0x223)]?_0x28236c(0x1b8):_0x28236c(0x20c),_0x511968+=settings[_0x28236c(0x223)]?settings[_0x28236c(0x1a4)]==_0x28236c(0x231)?_0x28236c(0x14b):'Notifications\x20types:\x20'+settings[_0x28236c(0x1a4)]+_0x28236c(0x116):'',tgBot['sendMessage'](_0x56691e['chat']['id'],_0x511968,{'parse_mode':_0x28236c(0x214)})['catch'](_0x5b5fec=>{telegramError(_0x5b5fec);});}),tgBot['onText'](/\/restart/,_0x186743=>{const _0x3357da=_0x3ac38e;if(!validateTelegram(_0x186743))return;tgBot[_0x3357da(0x24b)](_0x3357da(0xf6));const _0x39e94e=getEnabledBots();if(_0x39e94e[_0x3357da(0x174)]==0x0)tgBot['sendMessage'](_0x186743['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x8f2da0=>{telegramError(_0x8f2da0);});else{if(_0x39e94e[_0x3357da(0x174)]>0x1)_0x39e94e[_0x3357da(0x208)]({'botID':_0x3357da(0x231)});let _0x5991d8=[],_0x12df81=[];const _0x5a7eee=_0x39e94e[_0x3357da(0x174)]%0x4==0x0||_0x39e94e[_0x3357da(0x174)]%0x4==0x3||_0x39e94e['length']%0x3==0x1?0x4:0x3;let _0x20b15a=0x0;_0x39e94e[_0x3357da(0x151)]((_0x1f9d76,_0x523a1a)=>{const _0x51e6ba=_0x3357da;if(_0x523a1a%_0x5a7eee==0x0)_0x12df81=[];_0x12df81[_0x51e6ba(0x208)]({'text':_0x1f9d76[_0x51e6ba(0x21e)]==_0x51e6ba(0x231)?_0x51e6ba(0x194):'Bot\x20'+_0x1f9d76['botID'],'callback_data':_0x1f9d76[_0x51e6ba(0x21e)]}),_0x523a1a%_0x5a7eee==0x0&&(_0x5991d8[_0x20b15a]=_0x12df81,_0x20b15a++);}),tgBot['sendMessage'](_0x186743[_0x3357da(0x12c)]['id'],_0x3357da(0x146),{'reply_markup':{'inline_keyboard':_0x5991d8}})[_0x3357da(0x1fc)](_0x35f02d=>{telegramError(_0x35f02d);}),tgBot['on']('callback_query',async _0x1c48c3=>{const _0xd8f675=_0x3357da,_0x3ff33b=_0x1c48c3['data'],_0x145809=_0x1c48c3['message'];tgBot['answerCallbackQuery'](_0x1c48c3['id'])[_0xd8f675(0x182)](async()=>{const _0x621586=_0xd8f675;_0x3ff33b=='all'?(tgBot[_0x621586(0x19e)](_0x145809[_0x621586(0x12c)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20all\x20bots')[_0x621586(0x1fc)](_0x4943d2=>{telegramError(_0x4943d2);}),config[_0x621586(0x151)](_0x452351=>{const _0x34af3b=_0x621586;restartBot(_0x452351[_0x34af3b(0x21e)]);})):(tgBot[_0x621586(0x19e)](_0x145809[_0x621586(0x12c)]['id'],_0x621586(0x107)+_0x3ff33b)['catch'](_0x13a733=>{telegramError(_0x13a733);}),restartBot(_0x3ff33b));}),tgBot[_0xd8f675(0x24b)](_0xd8f675(0xf6));});}}),tgBot[_0x3ac38e(0x14c)](/\/on/,_0x20b8a5=>{const _0x547aff=_0x3ac38e;if(!validateTelegram(_0x20b8a5))return;tgBot['removeListener'](_0x547aff(0xf6));const _0x174751=getDisabledBots();if(_0x174751[_0x547aff(0x174)]==0x0)tgBot[_0x547aff(0x19e)](_0x20b8a5['chat']['id'],_0x547aff(0x150))[_0x547aff(0x1fc)](_0xbb7db5=>{telegramError(_0xbb7db5);});else{if(_0x174751[_0x547aff(0x174)]>0x1)_0x174751[_0x547aff(0x208)]({'botID':_0x547aff(0x231)});let _0x49b3bb=[],_0x101d06=[];const _0x3da7ce=_0x174751[_0x547aff(0x174)]%0x4==0x0||_0x174751[_0x547aff(0x174)]%0x4==0x3||_0x174751[_0x547aff(0x174)]%0x3==0x1?0x4:0x3;let _0xaed917=0x0;_0x174751['forEach']((_0x398b4d,_0x105d96)=>{const _0x5d8d00=_0x547aff;if(_0x105d96%_0x3da7ce==0x0)_0x101d06=[];_0x101d06['push']({'text':_0x398b4d[_0x5d8d00(0x21e)]==_0x5d8d00(0x231)?_0x5d8d00(0x194):_0x5d8d00(0x128)+_0x398b4d[_0x5d8d00(0x21e)],'callback_data':_0x398b4d['botID']}),_0x105d96%_0x3da7ce==0x0&&(_0x49b3bb[_0xaed917]=_0x101d06,_0xaed917++);}),tgBot['sendMessage'](_0x20b8a5[_0x547aff(0x12c)]['id'],_0x547aff(0x189),{'reply_markup':{'inline_keyboard':_0x49b3bb}})[_0x547aff(0x1fc)](_0x35220f=>{telegramError(_0x35220f);}),tgBot['on'](_0x547aff(0xf6),async _0x238f08=>{const _0x2155c4=_0x547aff,_0x5b9af2=_0x238f08[_0x2155c4(0x232)],_0x45fee=_0x238f08[_0x2155c4(0x18f)];tgBot['answerCallbackQuery'](_0x238f08['id'])['then'](async()=>{const _0x1f41a6=_0x2155c4;_0x5b9af2==_0x1f41a6(0x231)?(tgBot['sendMessage'](_0x45fee[_0x1f41a6(0x12c)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x1f41a6(0x1fc)](_0xf1cf04=>{telegramError(_0xf1cf04);}),_0x174751[_0x1f41a6(0x151)](_0x1d468c=>{const _0x2620e3=_0x1f41a6;if(_0x1d468c[_0x2620e3(0x21e)]!=_0x2620e3(0x231))toggleBot(_0x1d468c[_0x2620e3(0x21e)],toggleStatus(_0x1d468c['botID']),_0x2620e3(0x1a1));})):(tgBot[_0x1f41a6(0x19e)](_0x45fee[_0x1f41a6(0x12c)]['id'],_0x1f41a6(0x1cd)+_0x5b9af2)[_0x1f41a6(0x1fc)](_0x2be2d1=>{telegramError(_0x2be2d1);}),toggleBot(_0x5b9af2,toggleStatus(_0x5b9af2),_0x1f41a6(0x1a1)));}),tgBot['removeListener'](_0x2155c4(0xf6));});}}),tgBot[_0x3ac38e(0x14c)](/\/off/,_0x24cb5e=>{const _0x149550=_0x3ac38e;if(!validateTelegram(_0x24cb5e))return;tgBot[_0x149550(0x24b)]('callback_query');const _0x4e46d4=getEnabledBots();if(_0x4e46d4[_0x149550(0x174)]==0x0)tgBot[_0x149550(0x19e)](_0x24cb5e[_0x149550(0x12c)]['id'],_0x149550(0x201))[_0x149550(0x1fc)](_0x4c5633=>{telegramError(_0x4c5633);});else{if(_0x4e46d4[_0x149550(0x174)]>0x1)_0x4e46d4[_0x149550(0x208)]({'botID':_0x149550(0x231)});let _0x556644=[],_0x245608=[];const _0x53651f=_0x4e46d4[_0x149550(0x174)]%0x4==0x0||_0x4e46d4['length']%0x4==0x3||_0x4e46d4[_0x149550(0x174)]%0x3==0x1?0x4:0x3;let _0x1bcbf7=0x0;_0x4e46d4['forEach']((_0x514dab,_0x563b71)=>{const _0x46b800=_0x149550;if(_0x563b71%_0x53651f==0x0)_0x245608=[];_0x245608['push']({'text':_0x514dab['botID']==_0x46b800(0x231)?_0x46b800(0x194):_0x46b800(0x128)+_0x514dab['botID'],'callback_data':_0x514dab['botID']}),_0x563b71%_0x53651f==0x0&&(_0x556644[_0x1bcbf7]=_0x245608,_0x1bcbf7++);}),tgBot[_0x149550(0x19e)](_0x24cb5e['chat']['id'],_0x149550(0x1f5),{'reply_markup':{'inline_keyboard':_0x556644}})[_0x149550(0x1fc)](_0x2b0020=>{telegramError(_0x2b0020);}),tgBot['on'](_0x149550(0xf6),async _0xe2671a=>{const _0x105618=_0x149550,_0x1652f6=_0xe2671a[_0x105618(0x232)],_0x147f68=_0xe2671a[_0x105618(0x18f)];tgBot['answerCallbackQuery'](_0xe2671a['id'])[_0x105618(0x182)](async()=>{const _0x2864f0=_0x105618;_0x1652f6==_0x2864f0(0x231)?(tgBot['sendMessage'](_0x147f68[_0x2864f0(0x12c)]['id'],_0x2864f0(0x198))['catch'](_0x424f71=>{telegramError(_0x424f71);}),_0x4e46d4[_0x2864f0(0x151)](_0x2ca4c5=>{const _0x3fd4e7=_0x2864f0;if(_0x2ca4c5[_0x3fd4e7(0x21e)]!=_0x3fd4e7(0x231))toggleBot(_0x2ca4c5[_0x3fd4e7(0x21e)],toggleStatus(_0x2ca4c5[_0x3fd4e7(0x21e)]),_0x3fd4e7(0x1a1));})):(tgBot[_0x2864f0(0x19e)](_0x147f68[_0x2864f0(0x12c)]['id'],_0x2864f0(0x1b6)+_0x1652f6)[_0x2864f0(0x1fc)](_0x33d8cd=>{telegramError(_0x33d8cd);}),toggleBot(_0x1652f6,toggleStatus(_0x1652f6),_0x2864f0(0x1a1)));}),tgBot[_0x105618(0x24b)](_0x105618(0xf6));});}}),tgBot[_0x3ac38e(0x14c)](/\/portfolio/,_0x1c82a7=>{const _0xb52147=_0x3ac38e;if(!validateTelegram(_0x1c82a7))return;tgBot[_0xb52147(0x24b)](_0xb52147(0xf6));const _0x370408=getEnabledBots();if(_0x370408[_0xb52147(0x174)]==0x0)tgBot[_0xb52147(0x19e)](_0x1c82a7[_0xb52147(0x12c)]['id'],_0xb52147(0x201))['catch'](_0x29b8d3=>{telegramError(_0x29b8d3);});else{if(_0x370408[_0xb52147(0x174)]>0x1){let _0xb368a0=[],_0x2c5b55=[];const _0x384ec7=_0x370408['length']%0x4==0x0||_0x370408[_0xb52147(0x174)]%0x4==0x3||_0x370408[_0xb52147(0x174)]%0x3==0x1?0x4:0x3;let _0x55640b=0x0;_0x370408[_0xb52147(0x151)]((_0x5e2303,_0x1735ec)=>{const _0x2da65a=_0xb52147;if(_0x1735ec%_0x384ec7==0x0)_0x2c5b55=[];_0x2c5b55['push']({'text':_0x2da65a(0x128)+_0x5e2303[_0x2da65a(0x21e)],'callback_data':_0x5e2303[_0x2da65a(0x21e)]}),_0x1735ec%_0x384ec7==0x0&&(_0xb368a0[_0x55640b]=_0x2c5b55,_0x55640b++);}),tgBot[_0xb52147(0x19e)](_0x1c82a7[_0xb52147(0x12c)]['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0xb368a0}})[_0xb52147(0x1fc)](_0x327721=>{telegramError(_0x327721);}),tgBot['on'](_0xb52147(0xf6),async _0x257d64=>{const _0x33babe=_0xb52147,_0x1d4033=_0x257d64['data'],_0x413370=_0x257d64[_0x33babe(0x18f)];tgBot[_0x33babe(0x239)](_0x257d64['id'])[_0x33babe(0x182)](async()=>{const _0x4d5bfa=_0x33babe;if(pid[_0x1d4033])pid[_0x1d4033][_0x4d5bfa(0x10e)]({'function':_0x4d5bfa(0x193),'args':null});}),tgBot[_0x33babe(0x24b)]('callback_query');});}else{const _0x4197d7=_0x370408[0x0][_0xb52147(0x21e)];if(pid[_0x4197d7])pid[_0x4197d7][_0xb52147(0x10e)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x3ac38e(0x14c)](/\/toggle/,_0xf1a395=>{const _0x452985=_0x3ac38e;if(!validateTelegram(_0xf1a395))return;tgBot['removeListener']('callback_query');const _0x55208e=getBotsWithMode();if(_0x55208e['length']==0x0)tgBot[_0x452985(0x19e)](_0xf1a395[_0x452985(0x12c)]['id'],_0x452985(0x201))['catch'](_0x523040=>{telegramError(_0x523040);});else{let _0x598858=[],_0x3ae36e=[];const _0x50d7c4=0x2;let _0x1a98c3=0x0;_0x55208e[_0x452985(0x151)]((_0x2f2a73,_0x2023f6)=>{const _0x5632a2=_0x452985;if(_0x2023f6%_0x50d7c4==0x0)_0x3ae36e=[];_0x3ae36e['push']({'text':_0x5632a2(0x128)+_0x2f2a73[_0x5632a2(0x21e)]+'\x20('+_0x2f2a73[_0x5632a2(0x225)]+')','callback_data':_0x2f2a73[_0x5632a2(0x21e)]}),_0x2023f6%_0x50d7c4==0x0&&(_0x598858[_0x1a98c3]=_0x3ae36e,_0x1a98c3++);}),tgBot[_0x452985(0x19e)](_0xf1a395['chat']['id'],_0x452985(0x148),{'reply_markup':{'inline_keyboard':_0x598858}})['catch'](_0x340f99=>{telegramError(_0x340f99);}),tgBot['on'](_0x452985(0xf6),async _0x264db3=>{const _0x4fd5c8=_0x452985,_0x190712=_0x264db3[_0x4fd5c8(0x232)],_0x133ed7=_0x264db3[_0x4fd5c8(0x18f)];tgBot['answerCallbackQuery'](_0x264db3['id'])['then'](async()=>{const _0x57f25b=_0x4fd5c8,_0x359cc9=_0x55208e[_0x57f25b(0x15d)](_0xc677e6=>_0xc677e6[_0x57f25b(0x21e)]==_0x190712),_0x168708=_0x359cc9[_0x57f25b(0x225)]==_0x57f25b(0x145)?_0x57f25b(0x1a0):'auto';tgBot[_0x57f25b(0x19e)](_0x133ed7[_0x57f25b(0x12c)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x190712+'\x20to\x20'+_0x168708+'\x20mode')[_0x57f25b(0x1fc)](_0xf802aa=>{telegramError(_0xf802aa);}),toggleBotMode(_0x190712);}),tgBot[_0x4fd5c8(0x24b)](_0x4fd5c8(0xf6));});}}),tgBot[_0x3ac38e(0x14c)](/\/names/,_0x36d183=>{const _0x310a35=_0x3ac38e;if(!validateTelegram(_0x36d183))return;let _0x34aa5b='';config[_0x310a35(0x151)](_0x121084=>{const _0x420f22=_0x310a35;_0x34aa5b+=_0x420f22(0x128)+_0x121084['botID']+':\x20'+_0x121084[_0x420f22(0x173)]+'\x0a';}),tgBot['sendMessage'](_0x36d183[_0x310a35(0x12c)]['id'],_0x34aa5b,{'parse_mode':_0x310a35(0x214)})[_0x310a35(0x1fc)](_0x23d51b=>{telegramError(_0x23d51b);});}),tgBot[_0x3ac38e(0x14c)](/\/disable/,_0x14018d=>{const _0xaeb9c2=_0x3ac38e;if(!validateTelegram(_0x14018d))return;tgBot[_0xaeb9c2(0x19e)](_0x14018d['chat']['id'],_0xaeb9c2(0x19f))['catch'](_0x27f286=>{telegramError(_0x27f286);}),updateSetting(_0xaeb9c2(0x223),![]);}),tgBot[_0x3ac38e(0x14c)](/\/help/,_0x34c928=>{const _0x1be1cb=_0x3ac38e;if(!validateTelegram(_0x34c928))return;tgBot[_0x1be1cb(0x19e)](_0x34c928[_0x1be1cb(0x12c)]['id'],_0x19cbc2)[_0x1be1cb(0x1fc)](_0x507d4a=>{telegramError(_0x507d4a);});}),tgBot['on'](_0x3ac38e(0x22b),_0x163a86=>{const _0x5eec61=_0x3ac38e;_0x163a86[_0x5eec61(0xf3)]()['includes'](_0x5eec61(0x12f))&&(logging(_0x5eec61(0x1f1)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x5eec61(0x212))[_0x5eec61(0x1ff)]('notification','Invalid\x20Telegram\x20token'));}),process[_0x3ac38e(0x22e)](_0x3ac38e(0x13c),()=>{const _0x3db649=_0x3ac38e;if(tgBot)tgBot['stopPolling']();process[_0x3db649(0x125)](0x1);}),process[_0x3ac38e(0x22e)](_0x3ac38e(0x242),()=>{const _0x41b173=_0x3ac38e;if(tgBot)tgBot['stopPolling']();process[_0x41b173(0x125)](0x1);});}}function disableTelegram(){const _0x2e1ad6=_0x42c257;tgBot&&(tgBot[_0x2e1ad6(0x1cb)](),tgBot=null);}function sendTelegram(_0x32d7cc,_0x320cc9){const _0x2cefb7=_0x42c257;if(settings[_0x2cefb7(0x223)]){if(settings[_0x2cefb7(0x1a4)]==_0x2cefb7(0x231)||(_0x320cc9['type']==_0x2cefb7(0x1e0)||_0x320cc9[_0x2cefb7(0x1c6)]=='success')&&settings[_0x2cefb7(0x1a4)]==_0x2cefb7(0x11e)||_0x320cc9['type']==_0x2cefb7(0x236)&&settings['telegramEvents']==_0x2cefb7(0xf5)){if(tgBot&&settings[_0x2cefb7(0x10a)]){if(_0x320cc9[_0x2cefb7(0x1af)])tgBot[_0x2cefb7(0x19e)](settings[_0x2cefb7(0x10a)],_0x320cc9[_0x2cefb7(0x173)]+_0x2cefb7(0x1ca)+_0x320cc9[_0x2cefb7(0xfd)])[_0x2cefb7(0x1fc)](_0xda13d9=>{telegramError(_0xda13d9);});else tgBot[_0x2cefb7(0x19e)](settings[_0x2cefb7(0x10a)],_0x2cefb7(0x128)+_0x32d7cc+'\x20>\x20'+_0x320cc9[_0x2cefb7(0xfd)])[_0x2cefb7(0x1fc)](_0x1738b4=>{telegramError(_0x1738b4);});}}}}function sendTelegramMsg(_0x4454f5){const _0x51cefc=_0x42c257;settings[_0x51cefc(0x223)]&&(tgBot&&settings[_0x51cefc(0x10a)]&&tgBot['sendMessage'](settings[_0x51cefc(0x10a)],_0x4454f5,{'parse_mode':_0x51cefc(0x214)})[_0x51cefc(0x1fc)](_0x41a5d3=>{telegramError(_0x41a5d3);}));}function getDeviceWithIp(_0x455262){return devices['find'](_0x45fd25=>_0x45fd25['ip']===_0x455262);}function temporaryAccess2FA(_0x34fef7,_0x525678){const _0x3851ab=_0x42c257;let _0x13443e=new Date(),_0x4e66b3=![];if(lastIpApproval){if(_0x13443e-lastIpApproval<0x1388)_0x4e66b3=!![];}lastIpApproval=new Date();if(_0x4e66b3)return;tgBot&&settings[_0x3851ab(0x10a)]&&(tgBot[_0x3851ab(0x24b)]('callback_query'),tgBot[_0x3851ab(0x19e)](settings[_0x3851ab(0x10a)],_0x3851ab(0x17a)+normalizeIP(_0x525678)[_0x3851ab(0x206)]+_0x3851ab(0x20e),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3851ab(0x240),'callback_data':'5'},{'text':_0x3851ab(0x166),'callback_data':'15'},{'text':_0x3851ab(0x143),'callback_data':'30'},{'text':_0x3851ab(0x186),'callback_data':'reject'}]]}})[_0x3851ab(0x1fc)](_0xd8a478=>{telegramError(_0xd8a478);}),tgBot['on'](_0x3851ab(0xf6),async _0x19041e=>{const _0x4318d4=_0x3851ab,_0x73c574=_0x19041e['data'],_0x315f1e=_0x19041e[_0x4318d4(0x18f)];tgBot[_0x4318d4(0x239)](_0x19041e['id'])[_0x4318d4(0x182)](async()=>{const _0x25445e=_0x4318d4;devices[_0x34fef7][_0x25445e(0x16f)]={'clientip':_0x525678,'timestamp':new Date()[_0x25445e(0x253)](),'expiry':_0x73c574},_0x73c574!=_0x25445e(0x186)?(await tgBot[_0x25445e(0x19e)](_0x315f1e[_0x25445e(0x12c)]['id'],_0x25445e(0x11f)+_0x73c574+'\x20minutes',{'parse_mode':_0x25445e(0x214)})[_0x25445e(0x1fc)](_0x2d55b7=>{telegramError(_0x2d55b7);}),io['to'](_0x34fef7)[_0x25445e(0x1ff)](_0x25445e(0x24c),{'access':{'allow':![],'reason':_0x25445e(0x197),'token':null}})):(await tgBot['sendMessage'](_0x315f1e[_0x25445e(0x12c)]['id'],_0x25445e(0x203))[_0x25445e(0x1fc)](_0x2bd1c3=>{telegramError(_0x2bd1c3);}),io['to'](_0x34fef7)['emit']('status',{'access':{'allow':![],'reason':_0x25445e(0x1d1),'token':null}}));}),tgBot[_0x4318d4(0x24b)]('callback_query');}));}function loginAccess2FA(_0x27316c,_0xde3ea0){const _0x456f1f=_0x42c257;tgBot&&settings[_0x456f1f(0x10a)]&&(tgBot[_0x456f1f(0x24b)](_0x456f1f(0xf6)),tgBot[_0x456f1f(0x19e)](settings['telegramChatId'],_0x456f1f(0x234)+normalizeIP(_0xde3ea0)[_0x456f1f(0x206)]+_0x456f1f(0x20e),{'parse_mode':_0x456f1f(0x214),'reply_markup':{'inline_keyboard':[[{'text':_0x456f1f(0x1d5),'callback_data':loginExpiry},{'text':_0x456f1f(0x186),'callback_data':_0x456f1f(0x186)}]]}})['catch'](_0x379919=>{telegramError(_0x379919);}),tgBot['on'](_0x456f1f(0xf6),async _0x19635e=>{const _0x3771a5=_0x456f1f,_0x4c83ac=_0x19635e[_0x3771a5(0x232)],_0x38bda6=_0x19635e[_0x3771a5(0x18f)];tgBot['answerCallbackQuery'](_0x19635e['id'])[_0x3771a5(0x182)](async()=>{const _0x128afc=_0x3771a5;devices[_0x27316c][_0x128afc(0x155)]={'clientip':_0xde3ea0,'timestamp':new Date()[_0x128afc(0x253)](),'expiry':_0x4c83ac},_0x4c83ac!=_0x128afc(0x186)?(await tgBot['sendMessage'](_0x38bda6['chat']['id'],_0x128afc(0x172),{'parse_mode':_0x128afc(0x214)})[_0x128afc(0x1fc)](_0x539628=>{telegramError(_0x539628);}),io['to'](_0x27316c)[_0x128afc(0x1ff)]('status',{'access':{'allow':![],'reason':_0x128afc(0x197),'token':null}})):(await tgBot[_0x128afc(0x19e)](_0x38bda6[_0x128afc(0x12c)]['id'],_0x128afc(0x16d))[_0x128afc(0x1fc)](_0x3e6367=>{telegramError(_0x3e6367);}),io['to'](_0x27316c)[_0x128afc(0x1ff)]('status',{'access':{'allow':![],'reason':_0x128afc(0x1e6),'token':null}}));}),tgBot[_0x3771a5(0x24b)](_0x3771a5(0xf6));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3ba1e1=_0x42c257;return dbConfig[_0x3ba1e1(0x221)](_0x3ba1e1(0x178))['sortBy'](_0x3ba1e1(0x21e))[_0x3ba1e1(0x192)]({'status':'enabled'})[_0x3ba1e1(0x15a)]()||[];}function getDisabledBots(){const _0x2065c1=_0x42c257;return dbConfig[_0x2065c1(0x221)]('bots')[_0x2065c1(0x1a2)]('botID')[_0x2065c1(0x192)]({'status':_0x2065c1(0x19c)})[_0x2065c1(0x15a)]()||[];}function getBotsWithMode(){const _0x574d53=_0x42c257,_0x3acab5=dbConfig['get']('bots')[_0x574d53(0x1a2)]('botID')[_0x574d53(0x15a)]()||[];return _0x3acab5[_0x574d53(0x151)](_0x48a23a=>{const _0x19356a=_0x574d53,_0xb5f89c=configpath+_0x19356a(0x1b9)+_0x48a23a[_0x19356a(0x21e)]+_0x19356a(0x1c7),_0x1c21d8=fs[_0x19356a(0x141)](_0xb5f89c);if(_0x1c21d8){const _0x369000=fs['readFileSync'](_0xb5f89c);try{const _0x333171=JSON[_0x19356a(0xf7)](_0x369000),_0x3188cd=_0x333171?_0x333171[_0x19356a(0x244)][0x0]['headless']:![];_0x48a23a['mode']=_0x3188cd?'auto':'manual';}catch(_0x5ac792){_0x48a23a[_0x19356a(0x225)]='manual';}}else _0x48a23a[_0x19356a(0x225)]=_0x19356a(0x1a0);}),_0x3acab5;}function getSettings(){const _0x40b2e=_0x42c257;let _0x435edd=dbSettings[_0x40b2e(0x221)]('settings')[_0x40b2e(0x15a)]();if(!_0x435edd){const _0x3ffef9=crypto[_0x40b2e(0xf2)]();mixpanel[_0x40b2e(0x110)](_0x3ffef9),_0x435edd={'timeshift':0x0,'userid':_0x3ffef9},dbSettings[_0x40b2e(0x221)]('settings')[_0x40b2e(0x208)](_0x435edd)['write']();}return _0x435edd;}function getSecure(){const _0x3c297d=_0x42c257;return dbSecure[_0x3c297d(0x221)](_0x3c297d(0x22d))[_0x3c297d(0x15a)]()||{};}function getBlacklist(){const _0x1b0208=_0x42c257;return dbSecure[_0x1b0208(0x221)](_0x1b0208(0x123))['value']()||[];}function broadcastToBots(_0x286513,_0x5744c4){const _0x412343=_0x42c257;config[_0x412343(0x151)](_0x21e11c=>{const _0x1c8d0e=_0x412343;if(_0x21e11c[_0x1c8d0e(0x24c)]==_0x1c8d0e(0x12a)&&_0x21e11c[_0x1c8d0e(0x170)]==_0x1c8d0e(0x228)){if(pid[_0x21e11c['botID']])pid[_0x21e11c[_0x1c8d0e(0x21e)]]['send']({[_0x286513]:_0x5744c4});}});}function storeSettings(_0x23c3fd,_0x4d084f=![]){const _0x6d2d43=_0x42c257;_0x23c3fd={...settings,..._0x23c3fd};if(_0x4d084f&&_0x23c3fd['bbPassword']!=_0x6d2d43(0x243)&&_0x23c3fd['bbPassword']!=''){const _0x594270=crypt[_0x6d2d43(0x257)](secure[_0x6d2d43(0x1f8)],_0x23c3fd[_0x6d2d43(0x1de)])[_0x6d2d43(0x18f)][_0x6d2d43(0x205)]('@')[0x0],_0x48ab32=bcrypt[_0x6d2d43(0x188)](_0x594270,saltRounds);_0x23c3fd={..._0x23c3fd,'bbPassword':_0x48ab32};}if(_0x4d084f&&_0x23c3fd[_0x6d2d43(0x1f0)]!='************'&&_0x23c3fd[_0x6d2d43(0x1f0)]!=''){const _0x8e516f=crypt[_0x6d2d43(0x257)](secure['privateKey'],_0x23c3fd[_0x6d2d43(0x1f0)])[_0x6d2d43(0x18f)][_0x6d2d43(0x205)]('@')[0x0];_0x23c3fd={..._0x23c3fd,'telegramToken':_0x8e516f};}const _0x4660f4=_0x23c3fd[_0x6d2d43(0x1f0)]!='************'&&_0x23c3fd[_0x6d2d43(0x1f0)]!=settings[_0x6d2d43(0x1f0)]||_0x23c3fd[_0x6d2d43(0x16a)]!=settings[_0x6d2d43(0x16a)],_0xdbd6e8=_0x23c3fd['telegramToken']==''||_0x23c3fd[_0x6d2d43(0x16a)]=='';if(_0x4660f4)_0x23c3fd[_0x6d2d43(0x1a4)]=_0x6d2d43(0x231);for(const [_0x53a851,_0x152589]of Object[_0x6d2d43(0x18b)](_0x23c3fd)){if(_0x53a851=='telegramToken'&&_0x152589=='************'){_0x23c3fd['telegramToken']=settings['telegramToken'];continue;};if(_0x53a851==_0x6d2d43(0x1de)&&_0x152589==_0x6d2d43(0x243)){_0x23c3fd['bbPassword']=settings[_0x6d2d43(0x1de)];continue;};dbSettings[_0x6d2d43(0x164)](_0x6d2d43(0x20f)+_0x53a851,_0x152589)[_0x6d2d43(0x1b7)]();}settings=_0x23c3fd,io['to'](_0x6d2d43(0x212))[_0x6d2d43(0x1ff)](_0x6d2d43(0xfc),cleanSettings()),broadcastToBots(_0x6d2d43(0x21c),settings[_0x6d2d43(0x21c)]);if(_0x4660f4&&!_0xdbd6e8)initTelegram();if(_0x4660f4&&_0xdbd6e8)disableTelegram();getAllClients()['forEach'](_0x18f79c=>{const _0x13982b=_0x6d2d43;getSocket(_0x18f79c['id'])[_0x13982b(0x1ff)](_0x13982b(0x24c),{'access':{'allow':![],'reason':_0x13982b(0x197),'token':null}});});}function updateSetting(_0x5ae247,_0x3d6708){const _0x20c153=_0x42c257;dbSettings['set'](_0x20c153(0x20f)+_0x5ae247,_0x3d6708)[_0x20c153(0x1b7)](),settings=getSettings(),io['to']('botmanager')['emit']('settings',cleanSettings());}function storeSecure(_0x32fa01){const _0x30b591=_0x42c257;dbSecure[_0x30b591(0x221)](_0x30b591(0x22d))['push'](_0x32fa01)[_0x30b591(0x1b7)](),secure=_0x32fa01;}function _0x4ac6(){const _0x2c82c1=['use','getMinutes','Unauthorized\x20attempt\x20to\x20log\x20out','/:bot/performance','add','Orders','120997XBnGsG','logged\x20out','temporary\x20token\x20generated','enabled\x20Bot\x20','inherit','success','type','-config.json','removeAllListeners','@analytics/google-analytics-v3','\x20>\x20','stopPolling','search','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','5763784LdahiL','UA-192771731-1','apply','temporary\x20access\x20rejected','1000','headers','disconnect','accept','Unauthorized\x20attempt\x20to\x20update\x20bot','Alerts','date-fns','login\x20not\x20required','encryptedUuid','<b>Balance\x20Bot\x20Status:</b>\x0a','padStart','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','bbPassword','21182ZDQjHG','error','reason','compareSync','headless','bot.js','token','2FA\x20login\x20rejected','slice','getHours','telegrammsg','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','connection','-performance.json','store','static','name','telegramToken','Invalid\x20Telegram\x20token','clients','userid','yes','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','telegram','/restart\x20-\x20restart\x20bot(s)\x0a','privateKey','emitHistory','/:bot/coins','bb-settings.json','catch','mkdirSync','Invalid\x20username\x20or\x20IP\x20address','emit','Unauthorized\x20attempt\x20to\x20get\x20logs','No\x20bots\x20running\x20right\x20now','version','Temporary\x20access\x20rejected','remove','split','show','Unauthorized\x20login\x20attempt\x20(timeout)','push','ipaddr.js','max','storeHeadless','Notifications\x20enabled\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','</b>\x20?','settings.','/:bot','error\x20while\x20deleting\x20config\x20files:\x20','botmanager','access','HTML','apiKey','add-bot','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','constructor','Unauthorized\x20attempt\x20to\x20delete\x20alerts','bcryptjs','Ok,\x20will\x20send\x20order\x20notifications\x20only','timeshift','Error:\x20Invalid\x20argument\x20','botID','2FA\x20login\x20token\x20generated','127.0.0.1','get','ipc','telegramEnabled','delete-bot','mode','mixpanel','api-eu.mixpanel.com','running','/help\x20-\x20show\x20available\x20commands\x0a','express','polling_error','kill','secure','once','180nTRIrZ','2FA\x20login\x20required','all','data','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Allow\x20login\x20from\x20IP\x20address\x20<b>','sha256','order','clientip','username','answerCallbackQuery','Invalid\x20authentication\x20token\x20(2)','536789OvwRDJ','function','build','fork','allow','5\x20min','deleted\x20Bot\x20','SIGTERM','************','bot','Unauthorized\x20attempt\x20to\x20add\x20bot','You\x20can\x20use\x20the\x20following\x20commands:\x0a','isValid','-events.json','access\x20timeout','started','removeListener','status','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','password','-results.json','readFileSync','new','lowdb/adapters/FileSync','getTime','match','Password\x20has\x20been\x20reset\x20to:\x20','Balance\x20Bot','decrypt','randomUUID','toString','page','orders','callback_query','parse','Unauthorized\x20attempt\x20to\x20store\x20configuration','getMonth','getUTCHours','All','settings','event','includes','node-telegram-bot-api','whitelist','/:bot/portfolio','sign','/status\x20-\x20show\x20bot(s)\x20status\x0a','update-bb','toIPv4Address','index.html','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','logout','sendFile','telegramChatId','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Unauthorized\x20attempt\x20to\x20delete\x20bot','referer','send','bb-secure.json','alias','402YbyWbH','unlinkSync','login','/enable\x20-\x20enable\x20notifications\x0a','2URwlza','\x20only\x0a','deleteHistoryAlerts','version.json','delete-alerts','kind','login\x20token\x20generated','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','starting\x20new\x20bot\x20|\x20Bot\x20','alerts','Access\x20enabled\x20for\x20','expiry',',\x20must\x20be\x20a\x204\x20digit\x20number','default','blacklist','bb/','exit','analytics','port','Bot\x20','https://api.ipify.org?format=json','enabled','argv','chat','4GfeVSF','10LZvSwM','404\x20Not\x20Found','uuid','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','log','config/','secret','isIPv4MappedAddress','stop','connected','/:bot/support','invalid\x20credentials','getDate','pidRefreshToken','SIGINT','/names\x20-\x20show\x20bot\x20names\x0a','starting\x20bot\x20|\x20Bot\x20','child_process','new-disabled','existsSync','copyFileSync','30\x20min','storeConfiguration','auto','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','-----------------------------------------------------------------------------------','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','temporary\x20access\x20not\x20allowed','NTBA_FIX_319','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','onText','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','handshake','login\x20required','All\x20bots\x20running\x20right\x20now','forEach','update-bot','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','defaults','telegram2FaApproval','No\x20authentication\x20token','place-order','2FA\x20required','host','value','/:bot/history','auth','find','Token\x20blacklisted','restart','Password\x20reset\x20rejected','crypto','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','store-settings','set','toggle-bot-mode','15\x20min','timestamp','listen','build2','telegramUsername','getFullYear','bb-config.json','Login\x20rejected','remoteAddress','telegramIpApproval','live','socket.io','Login\x20accepted','botname','length','Notifications\x20enabled','hybrid-crypto-js','437238rRejZz','bots','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','getPortfolio','conn','map','assign','https://hodlerhacks.com','randomFillSync','Unauthorized\x20attempt\x20to\x20update\x20settings','then','bbUsername','readdirSync','user','reject','publicKey','hashSync','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','\x20|\x20','entries','3000','temporaryAccessAllowed','from','message','store-headless','getSeconds','filter','sendPortfolioTelegram','All\x20bots','(((.+)+)+)+$','pidExpireLogin','reload','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','hasOwnProperty','1757169CRCNoa','reset-password','disabled','Invalid\x20IP\x20address','sendMessage','Notifications\x20disabled','manual','stopped','sortBy','idling\x20bot\x20\x20\x20|\x20Bot\x20','telegramEvents','writeFileSync','join','RSA-OAEP','track','502640oxUZNs','6b67f3d61ee94b8f5c80b4affef4c4d9','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','placeOrder','User\x20has\x20been\x20validated','backup/','showname','updatebotmanager','Bot\x20Mgr\x20>\x20','init','f2aRequired','generateKeyPairAsync','createServer','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','write','Notifications\x20disabled\x0a','bot-'];_0x4ac6=function(){return _0x2c82c1;};return _0x4ac6();}function addBlacklist(_0x34eb33){const _0x21e7b8=_0x42c257;cleanBlacklist();let _0x2fad51;devices[_0x34eb33][_0x21e7b8(0x16f)]?_0x2fad51=Math[_0x21e7b8(0x20a)](devices[_0x34eb33]['telegramIpApproval'][_0x21e7b8(0x120)],loginExpiry):_0x2fad51=loginExpiry,dbSecure[_0x21e7b8(0x221)](_0x21e7b8(0x123))[_0x21e7b8(0x208)]({'expiry':new Date()['getTime']()+_0x2fad51*0x3c*0x3e8,'token':devices[_0x34eb33]['access'][_0x21e7b8(0x1e5)]})[_0x21e7b8(0x1b7)](),blacklist=dbSecure['get']('blacklist')[_0x21e7b8(0x15a)]();}function cleanBlacklist(){const _0x5a87fb=_0x42c257;let _0x5a9d58=dbSecure['get'](_0x5a87fb(0x123))['cloneDeep']()[_0x5a87fb(0x15a)](),_0x11c935=new Date()[_0x5a87fb(0x253)]();_0x5a9d58['forEach'](_0x17a9bf=>{const _0x2a360d=_0x5a87fb;_0x17a9bf[_0x2a360d(0x120)]<_0x11c935&&dbSecure['get'](_0x2a360d(0x123))[_0x2a360d(0x204)]({'expiry':_0x17a9bf['expiry']})['write']();});}function initStates(){const _0x1944ad=_0x42c257;let _0x53c4a5=getConfiguration();_0x53c4a5[_0x1944ad(0x151)](_0x2affef=>{const _0x256f7f=_0x1944ad;_0x2affef[_0x256f7f(0x170)]=_0x256f7f(0x1a1);}),storeConfiguration(_0x53c4a5);}function onKeys(){const _0x30cc01=new RSA();return new Promise(_0x4fd3f9=>{const _0x35c8d2=_0x2de1;_0x30cc01[_0x35c8d2(0x1b4)]()['then'](_0x1a0cc8=>{_0x4fd3f9(_0x1a0cc8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3ac88c=_0x42c257;let _0x407f97=getSettings(),_0x3f3da6=![];!_0x407f97[_0x3ac88c(0x199)](_0x3ac88c(0x1f3))&&(_0x407f97[_0x3ac88c(0x1f3)]=uuidRandom(),mixpanel['alias'](_0x407f97['userid']),_0x3f3da6=!![]);if(_0x3f3da6)storeSettings(_0x407f97);}function storeConfiguration(_0x246be4){const _0x1ee78f=_0x42c257;dbConfig[_0x1ee78f(0x221)]('bots')['remove']()[_0x1ee78f(0x1b7)](),_0x246be4[_0x1ee78f(0x151)](_0x309a0f=>{const _0x579874=_0x1ee78f;delete _0x309a0f[_0x579874(0x225)];}),dbConfig['get'](_0x1ee78f(0x178))['push'](..._0x246be4)[_0x1ee78f(0x1b7)](),config=_0x246be4;}function resetPassword(){const _0xd031a5=_0x42c257;tgBot&&settings[_0xd031a5(0x10a)]&&(tgBot['removeListener'](_0xd031a5(0xf6)),tgBot[_0xd031a5(0x19e)](settings['telegramChatId'],_0xd031a5(0x179),{'parse_mode':_0xd031a5(0x214),'reply_markup':{'inline_keyboard':[[{'text':_0xd031a5(0x1f4),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0xd031a5(0x1fc)](_0x186ff2=>{telegramError(_0x186ff2);}),tgBot['on'](_0xd031a5(0xf6),async _0x5abcd0=>{const _0x368789=_0xd031a5,_0xbd3b34=_0x5abcd0[_0x368789(0x232)],_0x17309d=_0x5abcd0[_0x368789(0x18f)];tgBot[_0x368789(0x239)](_0x5abcd0['id'])[_0x368789(0x182)](async()=>{const _0x30a0e4=_0x368789;if(_0xbd3b34!='no'){const _0x2374a8=0xf,_0x12e6a7=_0x30a0e4(0x20d),_0x1971f5=Array[_0x30a0e4(0x18e)](crypto[_0x30a0e4(0x180)](new Uint32Array(_0x2374a8)))[_0x30a0e4(0x17d)](_0xfbb3f0=>_0x12e6a7[_0xfbb3f0%_0x12e6a7['length']])[_0x30a0e4(0x1a6)](''),_0x366ace=bcrypt[_0x30a0e4(0x188)](_0x1971f5,saltRounds);storeSettings({'bbPassword':_0x366ace}),await tgBot['sendMessage'](_0x17309d[_0x30a0e4(0x12c)]['id'],_0x30a0e4(0x255)+_0x1971f5,{'parse_mode':'HTML'})[_0x30a0e4(0x1fc)](_0x363bd6=>{telegramError(_0x363bd6);});}else await tgBot[_0x30a0e4(0x19e)](_0x17309d[_0x30a0e4(0x12c)]['id'],_0x30a0e4(0x160))[_0x30a0e4(0x1fc)](_0x160159=>{telegramError(_0x160159);});}),tgBot['removeListener'](_0x368789(0xf6));}));}function logging(_0x160078){const _0x31d906=_0x42c257;console[_0x31d906(0x132)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x160078);if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x31d906(0xf5))tgBot[_0x31d906(0x19e)](settings['telegramChatId'],_0x31d906(0x1b1)+_0x160078)[_0x31d906(0x1fc)](_0x27fbb5=>{telegramError(_0x27fbb5);});}function getServerTime(){const _0x36d888=_0x42c257,_0x1f2a0a=new Date();return _0x1f2a0a[_0x36d888(0x16b)]()+'/'+(_0x1f2a0a[_0x36d888(0xf9)]()+0x1)[_0x36d888(0xf3)]()[_0x36d888(0x1dc)](0x2,'0')+'/'+_0x1f2a0a[_0x36d888(0x13a)]()[_0x36d888(0xf3)]()['padStart'](0x2,'0')+'\x20'+_0x1f2a0a[_0x36d888(0x1e8)]()[_0x36d888(0xf3)]()['padStart'](0x2,'0')+':'+_0x1f2a0a[_0x36d888(0x1bb)]()[_0x36d888(0xf3)]()['padStart'](0x2,'0')+':'+_0x1f2a0a[_0x36d888(0x191)]()[_0x36d888(0xf3)]()[_0x36d888(0x1dc)](0x2,'0');}function getTimeStamp(){const _0xa1d455=_0x42c257,_0x335add=shiftedTime();return _0x335add[_0xa1d455(0x16b)]()+'/'+(_0x335add[_0xa1d455(0xf9)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x335add['getDate']()[_0xa1d455(0xf3)]()[_0xa1d455(0x1dc)](0x2,'0')+'\x20'+_0x335add[_0xa1d455(0x1e8)]()[_0xa1d455(0xf3)]()['padStart'](0x2,'0')+':'+_0x335add[_0xa1d455(0x1bb)]()[_0xa1d455(0xf3)]()[_0xa1d455(0x1dc)](0x2,'0')+':'+_0x335add['getSeconds']()[_0xa1d455(0xf3)]()[_0xa1d455(0x1dc)](0x2,'0');}function shiftedTime(){const _0x4ab596=_0x42c257,_0x5bb871=new Date();let _0x5e84fd=_0x5bb871;if(settings[_0x4ab596(0x21c)]&&settings['timeshift']!==0x0)_0x5e84fd=fns[_0x4ab596(0x1be)](_0x5bb871,{'hours':settings['timeshift']});return _0x5e84fd;}function startScheduler(){const _0x1f7b1b=_0x42c257;let _0x3b2705=new Date()[_0x1f7b1b(0xfa)]();_0x3b2705==0x1&&backupConfigFiles();_0x3b2705==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5cc769=_0x42c257;fs[_0x5cc769(0x184)](configpath,{'withFileTypes':!![]})[_0x5cc769(0x151)](_0x275ccf=>{const _0x4afc32=_0x5cc769;if(!_0x275ccf['isDirectory']())fs[_0x4afc32(0x142)](configpath+_0x275ccf[_0x4afc32(0x1ef)],configbackuppath+_0x275ccf['name']);});}async function getPublicIp(){const _0x20b0b0=_0x42c257;try{const _0x545de1=await axios[_0x20b0b0(0x221)](_0x20b0b0(0x129));publicip=_0x545de1[_0x20b0b0(0x232)]['ip'];}catch(_0x599b77){}}async function triggerAnalytics(_0x12d2ec=![]){const _0xe7296b=_0x42c257;if(!publicip)await getPublicIp();const _0x4a2ad4=getBotsWithMode();let _0x111998=0x0;_0x4a2ad4['forEach'](_0x1c04cb=>{if(_0x1c04cb['status']==='enabled')_0x111998++;}),mixpanel[_0xe7296b(0x1a8)]('Server',{'distinct_id':settings[_0xe7296b(0x1f3)],'ip':publicip,'version':serverversion,'numbots':_0x4a2ad4[_0xe7296b(0x174)],'numbotsenabled':_0x111998}),!_0x12d2ec&&analytics[_0xe7296b(0xf4)]({'title':'Balance\x20Bot\x20Server','href':_0xe7296b(0x17f),'path':'/v'+serverversion});}function validateCredentials(_0x1eb1c1,_0x38a4c7){const _0x2ec1b7=_0x42c257;if(_0x1eb1c1['username']==settings[_0x2ec1b7(0x183)]&&bcrypt[_0x2ec1b7(0x1e2)](_0x1eb1c1['password'],settings[_0x2ec1b7(0x1de)])){if(settings[_0x2ec1b7(0x1b3)])return{'allow':![],'reason':_0x2ec1b7(0x230),'token':null};else{const _0x28ffec=generateLoginToken(_0x38a4c7);return{'allow':!![],'reason':_0x2ec1b7(0x11b),'token':_0x28ffec};}}else return{'allow':![],'reason':_0x2ec1b7(0x139),'token':null};}function refreshToken(_0x10c8e9){const _0x56d5e0=_0x42c257,_0x4b4cfb=generateLoginToken(_0x10c8e9);return{'allow':!![],'reason':_0x56d5e0(0x11b),'token':_0x4b4cfb};}function validateAccess(_0x269e4b,_0x1ef10a){const _0x423f3e=_0x42c257;let _0x4f284c=devices[_0x1ef10a]['ip'],_0x18504f;const _0x7108f2=_0x37ceed=>{const _0xd64f90=_0x2de1;if(settings['loginRequired']){if(settings[_0xd64f90(0x1b3)]){if(telegram2FaApproved(_0x1ef10a)){const _0x41fa0f=generateLoginToken(_0x1ef10a);return{'allow':!![],'reason':_0xd64f90(0x21f),'token':_0x41fa0f};}else return{'allow':![],'reason':_0xd64f90(0x14f),'token':null};}else return _0x18504f=validToken(_0x37ceed,_0x1ef10a),_0x18504f[_0xd64f90(0x199)](_0xd64f90(0x1c5))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x37ceed}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xd64f90(0x1d9),'token':null};};if(settings['whitelistEnabled']){let _0x20555f=[...settings[_0x423f3e(0x100)],'::1','::ffff:127.0.0.1',_0x423f3e(0x220)];if(_0x20555f[_0x423f3e(0xfe)](_0x4f284c))return _0x7108f2(_0x269e4b);else{_0x18504f=validToken(_0x269e4b,_0x1ef10a);if(_0x18504f[_0x423f3e(0x199)](_0x423f3e(0x1c5)))return _0x7108f2(_0x269e4b);else{if(telegramIpApproved(_0x1ef10a)){const _0x2e6754=generateToken(_0x1ef10a);return _0x18504f=_0x7108f2(_0x269e4b),_0x18504f['allow']?{'allow':!![],'reason':_0x423f3e(0x1c2),'token':_0x2e6754}:_0x18504f;}else return settings[_0x423f3e(0x18d)]?{'allow':![],'reason':_0x423f3e(0x158),'token':null}:{'allow':![],'reason':_0x423f3e(0x149),'token':null};}}}else return _0x7108f2(_0x269e4b);}function timelyDecrypt(_0x57af14,_0x3c49f7=!![]){const _0x45da7e=_0x42c257;if(_0x57af14)try{const _0x960d4b=crypt['decrypt'](secure[_0x45da7e(0x1f8)],_0x57af14)[_0x45da7e(0x18f)],_0xad6006=_0x960d4b[_0x45da7e(0x205)]('@')[0x0],_0x1d86eb=_0x960d4b[_0x45da7e(0x205)]('@')[0x1],_0x11db5a=new Date()[_0x45da7e(0x253)]();if(_0x3c49f7){if(_0x11db5a-_0x1d86eb<maxSecretAge*0x3e8)return _0xad6006;else return![];}else return _0xad6006;}catch(_0x2b9f08){return![];}else return![];}const validToken=(_0x38ca61,_0x48e199)=>{const _0x5dff16=_0x42c257,_0x47aea8=devices[_0x48e199]['ip'];if(!_0x38ca61)return{'error':_0x5dff16(0x156)};for(let _0x150748 of blacklist){if(_0x150748[_0x5dff16(0x1e5)]==_0x38ca61)return{'error':_0x5dff16(0x15e)};}let _0x192edf;try{_0x192edf=jwt['verify'](_0x38ca61,secure[_0x5dff16(0x134)]+_0x48e199);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x192edf[_0x5dff16(0x199)]('clientip')&&!_0x192edf[_0x5dff16(0x199)](_0x5dff16(0x238))||!_0x192edf['hasOwnProperty']('exp'))return{'error':_0x5dff16(0x23a)};if(!_0x192edf[_0x5dff16(0x199)](_0x5dff16(0x238))&&_0x192edf[_0x5dff16(0x199)](_0x5dff16(0x237))){const {clientip:_0x5e0c96}=_0x192edf;return _0x47aea8==_0x5e0c96?{'success':_0x5dff16(0x1ad)}:{'error':_0x5dff16(0x19d)};}else{if(_0x192edf[_0x5dff16(0x199)](_0x5dff16(0x238))&&_0x192edf[_0x5dff16(0x199)](_0x5dff16(0x237))){const {username:_0x3c2d2a,clientip:_0x39254a}=_0x192edf;return settings[_0x5dff16(0x183)]==_0x3c2d2a&&_0x47aea8==_0x39254a?{'success':_0x5dff16(0x1ad)}:{'error':_0x5dff16(0x1fe)};}}},generateLoginToken=_0x2cab0a=>{const _0x5990d8=_0x42c257;if(_0x2cab0a){const _0x41e867=devices[_0x2cab0a]['ip'];return jwt[_0x5990d8(0x102)]({'username':settings['bbUsername'],'clientip':_0x41e867},secure[_0x5990d8(0x134)]+_0x2cab0a,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x99f17e=>{const _0x235f56=_0x42c257;if(_0x99f17e){const _0x1ead3a=devices[_0x99f17e]['ip'];return jwt[_0x235f56(0x102)]({'clientip':_0x1ead3a},secure[_0x235f56(0x134)]+_0x99f17e,{'expiresIn':devices[_0x99f17e][_0x235f56(0x16f)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x3bcb67=>{const _0x2402fa=_0x42c257;let _0x31c5c2=![];return devices[_0x3bcb67][_0x2402fa(0x16f)]&&devices[_0x3bcb67][_0x2402fa(0x16f)][_0x2402fa(0x120)]!=_0x2402fa(0x186)&&(_0x31c5c2=devices[_0x3bcb67]['telegramIpApproval']['clientip']==devices[_0x3bcb67]['ip']&&new Date()[_0x2402fa(0x253)]()-devices[_0x3bcb67][_0x2402fa(0x16f)][_0x2402fa(0x167)]<devices[_0x3bcb67]['telegramIpApproval'][_0x2402fa(0x120)]*0x3c*0x3e8),_0x31c5c2;},telegram2FaApproved=_0x2529da=>{const _0x3ab0d3=_0x42c257;let _0x3fb87d=![];return devices[_0x2529da]['telegram2FaApproval']&&devices[_0x2529da][_0x3ab0d3(0x155)][_0x3ab0d3(0x120)]!=_0x3ab0d3(0x186)&&(_0x3fb87d=devices[_0x2529da][_0x3ab0d3(0x155)]['clientip']==devices[_0x2529da]['ip']&&new Date()[_0x3ab0d3(0x253)]()-devices[_0x2529da][_0x3ab0d3(0x155)][_0x3ab0d3(0x167)]<devices[_0x2529da][_0x3ab0d3(0x155)][_0x3ab0d3(0x120)]*0x3c*0x3e8),_0x3fb87d;},normalizeIP=_0x15e260=>{const _0x264001=_0x42c257;let _0xf66089=null,_0x310e8e=null;if(ipaddr[_0x264001(0x247)](_0x15e260)){const _0x5ce227=ipaddr[_0x264001(0xf7)](_0x15e260);_0x5ce227[_0x264001(0x11a)]()==='ipv6'?(_0x5ce227[_0x264001(0x135)]()&&(_0xf66089=_0x5ce227[_0x264001(0x105)]()['toString']()),_0x310e8e=_0x5ce227[_0x264001(0xf3)]()):(_0xf66089=_0x5ce227['toString'](),_0x310e8e=_0x5ce227['toIPv4MappedAddress']()[_0x264001(0xf3)]());}return{'show':_0xf66089?_0xf66089:_0x310e8e,'store':_0x310e8e};};