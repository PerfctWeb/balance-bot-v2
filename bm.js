const _0x2d7b50=_0x151b;(function(_0x39f441,_0x38b5d3){const _0x51aabc=_0x151b,_0x14954f=_0x39f441();while(!![]){try{const _0x59ba30=-parseInt(_0x51aabc(0xec))/0x1*(parseInt(_0x51aabc(0x169))/0x2)+parseInt(_0x51aabc(0xae))/0x3*(parseInt(_0x51aabc(0x1ac))/0x4)+-parseInt(_0x51aabc(0xba))/0x5*(parseInt(_0x51aabc(0x1eb))/0x6)+-parseInt(_0x51aabc(0x1f9))/0x7+-parseInt(_0x51aabc(0xd7))/0x8*(parseInt(_0x51aabc(0xf5))/0x9)+-parseInt(_0x51aabc(0x174))/0xa+-parseInt(_0x51aabc(0x17a))/0xb*(-parseInt(_0x51aabc(0x106))/0xc);if(_0x59ba30===_0x38b5d3)break;else _0x14954f['push'](_0x14954f['shift']());}catch(_0x302f7c){_0x14954f['push'](_0x14954f['shift']());}}}(_0x4b0c,0x7b39d));const _0x378fa6=function(){let _0x3469dc=!![];return function(_0x5c2612,_0x2471a8){const _0x21b3ff=_0x3469dc?function(){const _0x3ac1da=_0x151b;if(_0x2471a8){const _0x12e957=_0x2471a8[_0x3ac1da(0xdc)](_0x5c2612,arguments);return _0x2471a8=null,_0x12e957;}}:function(){};return _0x3469dc=![],_0x21b3ff;};}(),_0x1226a7=_0x378fa6(this,function(){const _0x39261b=_0x151b;return _0x1226a7[_0x39261b(0x209)]()[_0x39261b(0x184)]('(((.+)+)+)+$')[_0x39261b(0x209)]()['constructor'](_0x1226a7)[_0x39261b(0x184)]('(((.+)+)+)+$');});_0x1226a7();'use strict';process[_0x2d7b50(0x1a9)][_0x2d7b50(0x219)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x2d7b50(0x21d)),low=require(_0x2d7b50(0x175)),FileSync=require(_0x2d7b50(0x142)),path=require(_0x2d7b50(0x102)),crypto=require(_0x2d7b50(0x12e)),Crypt=require('hybrid-crypto-js')[_0x2d7b50(0xad)],RSA=require(_0x2d7b50(0x210))[_0x2d7b50(0x218)],bcrypt=require(_0x2d7b50(0xb3)),jwt=require(_0x2d7b50(0x190)),ipaddr=require(_0x2d7b50(0xc2)),argv=require(_0x2d7b50(0x201))(process[_0x2d7b50(0xf2)][_0x2d7b50(0x1ee)](0x2))[_0x2d7b50(0xf2)],uuidRandom=require(_0x2d7b50(0x108)),Mixpanel=require(_0x2d7b50(0x1b7)),axios=require(_0x2d7b50(0xe6)),{GraphQLClient,gql}=require(_0x2d7b50(0xee)),PORT=argv[_0x2d7b50(0xd8)]||_0x2d7b50(0x1bb),pattern=/^[0-9]{2,4}$/;!pattern[_0x2d7b50(0x1c2)](PORT)&&(console[_0x2d7b50(0x136)](_0x2d7b50(0xfd)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x2d7b50(0x111)](0x1));const HOST=argv[_0x2d7b50(0xf1)]||null,userID=argv[_0x2d7b50(0xbd)]||'';let bbpath=_0x2d7b50(0x1a3),bbpath2='';const botfile=_0x2d7b50(0x120),configfile='bb-config.json',settingsfile=_0x2d7b50(0xb9),securefile='bb-secure.json';let validInstallation=!![];!fs[_0x2d7b50(0x19e)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2d7b50(0x1b6)),configpath=userID?bbpath+_0x2d7b50(0x103)+userID+'/':bbpath+_0x2d7b50(0x103),configbackuppath=configpath+_0x2d7b50(0x160);!fs[_0x2d7b50(0x19e)](configpath)&&fs[_0x2d7b50(0x135)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2d7b50(0x1aa)]({'bots':[]})[_0x2d7b50(0xc6)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2d7b50(0x1aa)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0'}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2d7b50(0x1aa)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x2d7b50(0xb2)](_0x2d7b50(0x138),{'host':_0x2d7b50(0x21b)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2d7b50(0xc7))[_0x2d7b50(0x15c)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x2d7b50(0x1c7))[_0x2d7b50(0x18f)](app);app[_0x2d7b50(0x12b)](express['static'](path[_0x2d7b50(0x205)](__dirname,bbpath2,'build2'))),app[_0x2d7b50(0x12b)](express['static'](path[_0x2d7b50(0x205)](__dirname,bbpath2,'build'))),app[_0x2d7b50(0x127)]('/',function(_0xdd07ac,_0x186a58){const _0x596db1=_0x2d7b50;_0x186a58[_0x596db1(0x1fe)](path[_0x596db1(0x205)](__dirname,bbpath2,_0x596db1(0x1df),_0x596db1(0x1e4)));}),app[_0x2d7b50(0x127)]('/:bot',function(_0x415f64,_0x592f2b){const _0x323692=_0x2d7b50;_0x592f2b[_0x323692(0x1fe)](path[_0x323692(0x205)](__dirname,bbpath2,_0x323692(0x202),_0x323692(0x1e4)));}),app[_0x2d7b50(0x127)]('/:bot/portfolio',(_0x1cf469,_0x2e6460)=>{const _0xd6f92f=_0x2d7b50;_0x2e6460['sendFile'](path[_0xd6f92f(0x205)](__dirname,bbpath2,_0xd6f92f(0x202),_0xd6f92f(0x1e4)));}),app[_0x2d7b50(0x127)](_0x2d7b50(0xbb),(_0x267616,_0x3905ed)=>{const _0x11e8b3=_0x2d7b50;_0x3905ed[_0x11e8b3(0x1fe)](path['join'](__dirname,bbpath2,_0x11e8b3(0x202),_0x11e8b3(0x1e4)));}),app[_0x2d7b50(0x127)](_0x2d7b50(0x1f2),(_0x585793,_0xc2dbd4)=>{const _0x19872c=_0x2d7b50;_0xc2dbd4[_0x19872c(0x1fe)](path[_0x19872c(0x205)](__dirname,bbpath2,'build',_0x19872c(0x1e4)));}),app[_0x2d7b50(0x127)](_0x2d7b50(0x1f3),(_0x4a9641,_0x267afa)=>{const _0x5bf680=_0x2d7b50;_0x267afa[_0x5bf680(0x1fe)](path[_0x5bf680(0x205)](__dirname,bbpath2,_0x5bf680(0x202),'index.html'));}),app[_0x2d7b50(0x127)](_0x2d7b50(0x215),(_0x1a161b,_0x202623)=>{const _0x5377dc=_0x2d7b50;_0x202623[_0x5377dc(0x1fe)](path[_0x5377dc(0x205)](__dirname,bbpath2,_0x5377dc(0x202),'index.html'));}),app['get'](_0x2d7b50(0xbc),(_0x3ae5e5,_0x9f1d28)=>{const _0x3b622e=_0x2d7b50;_0x9f1d28[_0x3b622e(0x1fe)](path[_0x3b622e(0x205)](__dirname,bbpath2,_0x3b622e(0x202),'index.html'));});if(HOST)http[_0x2d7b50(0xe7)](PORT,HOST);else http['listen'](PORT);const io=require('socket.io')(http,{}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x2d7b50(0x21a)]&&settings[_0x2d7b50(0x21a)]!=''&&settings[_0x2d7b50(0x196)]&&settings[_0x2d7b50(0x196)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(),getMessages();}function startServer(){const _0x4b755c=_0x2d7b50;console[_0x4b755c(0x136)](''),console[_0x4b755c(0x136)](_0x4b755c(0x21e)),logging(_0x4b755c(0x112)+PORT),console[_0x4b755c(0x136)]('-----------------------------------------------------------------------------------');if(config[_0x4b755c(0x1bd)]!=0x0)config[_0x4b755c(0x148)](_0x50ae56=>{const _0x21f1cc=_0x4b755c;if(_0x50ae56[_0x21f1cc(0xaf)]==_0x21f1cc(0x221)||_0x50ae56[_0x21f1cc(0xaf)]==_0x21f1cc(0xe4))logging('starting\x20bot\x20|\x20Bot\x20'+_0x50ae56[_0x21f1cc(0x14a)]+_0x21f1cc(0x21f)+_0x50ae56[_0x21f1cc(0x147)]),startBot([_0x50ae56['botID'],userID],{'cwd':bbpath},function(_0x223681){if(_0x223681)logging(_0x223681);});else(_0x50ae56['status']=='disabled'||_0x50ae56[_0x21f1cc(0xaf)]==_0x21f1cc(0xb8))&&logging(_0x21f1cc(0xda)+_0x50ae56[_0x21f1cc(0x14a)]+_0x21f1cc(0x21f)+_0x50ae56[_0x21f1cc(0x147)]);});else!newBot&&console[_0x4b755c(0x136)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log']('-----------------------------------------------------------------------------------'),console[_0x4b755c(0x136)]('');}function startSocket(){io['on']('connection',_0x379c5b=>{const _0x1df966=_0x151b;let _0x3df898,_0x451011,_0x563382,_0x3e0a75,_0xd3974;const _0x54d7d2=_0x379c5b['handshake'][_0x1df966(0x15f)][_0x1df966(0x14f)];_0x451011=_0x54d7d2[_0x1df966(0x152)](/bot[0-9]{3}/);if(_0x451011)_0x563382=_0x451011[0x0][_0x1df966(0x152)](/[0-9]{3}/);if(_0x563382)_0x3df898=_0x563382[0x0];else _0x3df898=_0x1df966(0x1dd);const _0x55f6ee=_0x379c5b[_0x1df966(0x1d2)]['auth']['encryptedUuid'];if(!_0x55f6ee)_0x379c5b[_0x1df966(0x1b1)]('status',{'publicKey':secure[_0x1df966(0x143)]});else{_0x3e0a75=timelyDecrypt(_0x55f6ee,![]);if(!_0x3e0a75)_0x379c5b[_0x1df966(0x1b1)](_0x1df966(0xaf),{'publicKey':secure[_0x1df966(0x143)]});else{_0xd3974=normalizeIP(_0x379c5b[_0x1df966(0xd2)]['remoteAddress'])[_0x1df966(0x20b)];if(!devices[_0x3e0a75])devices[_0x3e0a75]={'uuid':_0x3e0a75,'access':{'token':null}};devices[_0x3e0a75]['ip']=_0xd3974;const _0xdd62d0=addClient(_0x379c5b['id'],_0x3e0a75,_0x3df898);setAccess(_0xdd62d0),emitMessages(),_0x379c5b['on'](_0x1df966(0x1a8),_0x49ff5a=>{const _0x406a4e=_0x1df966,_0x3dec62=timelyDecrypt(_0x49ff5a[_0x406a4e(0xdd)]);if(_0x3dec62){_0x49ff5a={'username':_0x49ff5a[_0x406a4e(0x18c)],'password':_0x3dec62},devices[_0x3e0a75][_0x406a4e(0x181)]=validateCredentials(_0x49ff5a,_0x3e0a75);if(devices[_0x3e0a75]['access']['allow']==![]&&devices[_0x3e0a75]['access'][_0x406a4e(0xc8)]==_0x406a4e(0xe8))_0x379c5b[_0x406a4e(0x1b1)](_0x406a4e(0xaf),{'access':devices[_0x3e0a75][_0x406a4e(0x181)]}),loginAccess2FA(_0x3e0a75,_0xd3974);else{if(devices[_0x3e0a75][_0x406a4e(0x181)][_0x406a4e(0x16b)]==![]&&devices[_0x3e0a75][_0x406a4e(0x181)][_0x406a4e(0xc8)]==_0x406a4e(0x1d5))_0x379c5b['emit'](_0x406a4e(0xaf),{'access':devices[_0x3e0a75]['access']});else devices[_0x3e0a75]['access'][_0x406a4e(0x16b)]&&devices[_0x3e0a75][_0x406a4e(0x181)]['reason']==_0x406a4e(0xce)&&(getClientsWithUuid(_0x3e0a75)[_0x406a4e(0x148)](_0x195f71=>{setAccess(_0x195f71);}),setTokenRefresh(_0x3e0a75),setSessionTimeout(_0x406a4e(0x1a8),_0x3e0a75));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x379c5b['on'](_0x1df966(0x178),()=>{resetPassword();}),_0x379c5b['on'](_0x1df966(0xc4),_0x35ed93=>{removeClient(_0x379c5b['id']);});}}});}function initClient(_0x1642ea){const _0x302871=_0x2d7b50;if(_0x1642ea!=_0x302871(0x1dd)&&config[_0x302871(0x141)]!=''){if(pid[_0x1642ea])pid[_0x1642ea][_0x302871(0x1e9)]({'function':_0x302871(0x171),'args':null});}}function getSocket(_0x176bbc){return io['sockets']['sockets']['get'](_0x176bbc);}function setAccess(_0x5650e2){const _0x43ea72=_0x2d7b50,_0x170121=getSocket(_0x5650e2['id']),_0x22ad5b=_0x5650e2[_0x43ea72(0x131)],_0x2795f3=_0x5650e2[_0x43ea72(0x1e8)];devices[_0x22ad5b][_0x43ea72(0x181)]=validateAccess(devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0x15e)],_0x22ad5b),_0x170121[_0x43ea72(0x205)](_0x22ad5b);if(devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0x16b)]){_0x170121[_0x43ea72(0x205)](_0x2795f3);if(_0x2795f3==_0x43ea72(0x1dd))initializeSocketBotManager(_0x170121);else initializeSocketBot(_0x170121);initClient(_0x2795f3);}devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0x15e)]&&devices[_0x22ad5b]['access'][_0x43ea72(0xc8)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x43ea72(0x12d),_0x22ad5b),devices[_0x22ad5b][_0x43ea72(0x181)]['token']&&devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0xc8)]==_0x43ea72(0x15d)&&setSessionTimeout('login',_0x22ad5b),_0x170121[_0x43ea72(0x1b1)]('status',{'status':_0x5650e2[_0x43ea72(0x17e)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x22ad5b][_0x43ea72(0x181)],'externalip':devices[_0x22ad5b]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0x16b)]==![]&&devices[_0x22ad5b][_0x43ea72(0x181)][_0x43ea72(0xc8)]==_0x43ea72(0x146)&&temporaryAccess2FA(_0x22ad5b,devices[_0x22ad5b]['ip']);}function setSessionTimeout(_0x526fbf,_0x54ad85){const _0x25644c=_0x2d7b50;let _0x1a40dc;if(_0x526fbf==_0x25644c(0x1a8))_0x1a40dc=loginExpiry*0x3c*0x3e8;else _0x1a40dc=devices[_0x54ad85][_0x25644c(0x1b4)][_0x25644c(0x220)]*0x3c*0x3e8-(new Date()[_0x25644c(0x16c)]()-devices[_0x54ad85][_0x25644c(0x1b4)]['timestamp']);if(devices[_0x54ad85][_0x25644c(0x179)])clearTimeout(devices[_0x54ad85][_0x25644c(0x179)]);devices[_0x54ad85]['pidExpireLogin']=setTimeout(()=>{const _0x4ff61b=_0x25644c;if(devices[_0x54ad85][_0x4ff61b(0xf9)])clearTimeout(devices[_0x54ad85][_0x4ff61b(0xf9)]);removeSocketListeners(_0x54ad85),addBlacklist(_0x54ad85),devices[_0x54ad85][_0x4ff61b(0x1b4)]=null,devices[_0x54ad85]['telegram2FaApproval']=null,devices[_0x54ad85][_0x4ff61b(0x181)][_0x4ff61b(0x15e)]=null,devices[_0x54ad85][_0x4ff61b(0x181)]=validateAccess(devices[_0x54ad85][_0x4ff61b(0x181)][_0x4ff61b(0x15e)],_0x54ad85),!(devices[_0x54ad85]['access'][_0x4ff61b(0x16b)]&&devices[_0x54ad85][_0x4ff61b(0x181)][_0x4ff61b(0xc8)]==_0x4ff61b(0x1bc))&&(_0x526fbf==_0x4ff61b(0x1a8)?io['to'](_0x54ad85)[_0x4ff61b(0x1b1)](_0x4ff61b(0xaf),{'access':{'allow':![],'reason':_0x4ff61b(0x216),'token':null}}):io['to'](_0x54ad85)[_0x4ff61b(0x1b1)](_0x4ff61b(0xaf),{'access':{'allow':![],'reason':_0x4ff61b(0x1fc),'token':null}})),devices[_0x54ad85]['access'][_0x4ff61b(0x15e)]=null;},_0x1a40dc);}function setTokenRefresh(_0x12eacb){const _0x489f3e=_0x2d7b50;if(devices[_0x12eacb][_0x489f3e(0xf9)])clearTimeout(devices[_0x12eacb]['pidRefreshToken']);devices[_0x12eacb][_0x489f3e(0xf9)]=setTimeout(()=>{const _0x549eda=_0x489f3e;getClientsWithUuid(_0x12eacb)[_0x549eda(0x1bd)]!=0x0?(devices[_0x12eacb][_0x549eda(0x181)]=refreshToken(_0x12eacb),io['to'](_0x12eacb)[_0x549eda(0x1b1)]('status',{'status':_0x549eda(0x104),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x12eacb]['access'],'externalip':devices[_0x12eacb]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x12eacb)):clearTimeout(devices[_0x12eacb][_0x549eda(0xf9)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3b859b){const _0x410c88=_0x2d7b50,_0x1f5494=getClient(_0x3b859b['id'])[_0x410c88(0x131)];_0x3b859b['emit'](_0x410c88(0x1db),config),_0x3b859b[_0x410c88(0x1b1)](_0x410c88(0x20e),cleanSettings()),_0x3b859b['on'](_0x410c88(0x151),_0x189d44=>{const _0x5258c1=_0x410c88;if(validateAccess(_0x189d44,_0x1f5494)[_0x5258c1(0x16b)])addBot();else logging(_0x5258c1(0xca));}),_0x3b859b['on'](_0x410c88(0x1b3),(_0x1c0e48,_0x46ff6f)=>{const _0x159213=_0x410c88;if(validateAccess(_0x46ff6f,_0x1f5494)[_0x159213(0x16b)])toggleBot(_0x1c0e48[_0x159213(0x14a)],_0x1c0e48[_0x159213(0xaf)],_0x1c0e48['live']);else logging(_0x159213(0x203));}),_0x3b859b['on'](_0x410c88(0xb6),(_0x58bee4,_0x1908b7)=>{const _0x1fbfea=_0x410c88;if(validateAccess(_0x1908b7,_0x1f5494)['allow'])toggleBotMode(_0x58bee4);else logging(_0x1fbfea(0x203));}),_0x3b859b['on'](_0x410c88(0x16f),(_0x18395e,_0x5523f4)=>{const _0x32c448=_0x410c88;if(validateAccess(_0x5523f4,_0x1f5494)[_0x32c448(0x16b)])deleteBot(_0x18395e);else logging(_0x32c448(0xd9));}),_0x3b859b['on'](_0x410c88(0x119),(_0x37dc1e,_0x316364)=>{const _0x4cf7d6=_0x410c88;if(validateAccess(_0x316364,_0x1f5494)['allow'])storeSettings(_0x37dc1e,!![]);else logging(_0x4cf7d6(0xdb));}),_0x3b859b['on'](_0x410c88(0x139),_0x548bb5=>{const _0x41eba8=_0x410c88;if(validateAccess(_0x548bb5,_0x1f5494)[_0x41eba8(0x16b)])updateBB();else logging(_0x41eba8(0x1d9));}),_0x3b859b['on'](_0x410c88(0xfc),_0x46921f=>{const _0x2d890d=_0x410c88;if(validateAccess(_0x46921f,_0x1f5494)[_0x2d890d(0x16b)])getMessages();else logging(_0x2d890d(0xc3));}),_0x3b859b['on'](_0x410c88(0x12a),(_0xf11d,_0x2baa85)=>{const _0x336e89=_0x410c88;if(validateAccess(_0x2baa85,_0x1f5494)[_0x336e89(0x16b)])confirmMessage(_0xf11d);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x3b859b['on'](_0x410c88(0xc0),_0x19799a=>{const _0x50858d=_0x410c88;if(validateAccess(_0x19799a,_0x1f5494)[_0x50858d(0x16b)]){if(devices[_0x1f5494][_0x50858d(0xf9)])clearTimeout(devices[_0x1f5494][_0x50858d(0xf9)]);if(devices[_0x1f5494][_0x50858d(0x179)])clearTimeout(devices[_0x1f5494][_0x50858d(0x179)]);removeSocketListeners(getClient(_0x3b859b['id'])[_0x50858d(0x131)]),addBlacklist(_0x1f5494),devices[_0x1f5494][_0x50858d(0x1b4)]=null,devices[_0x1f5494][_0x50858d(0x1dc)]=null,devices[_0x1f5494][_0x50858d(0x181)][_0x50858d(0x15e)]=null,io['to'](getClient(_0x3b859b['id'])[_0x50858d(0x131)])[_0x50858d(0x1b1)](_0x50858d(0xaf),{'access':{'allow':![],'reason':_0x50858d(0x1ba),'token':null}});}else logging(_0x50858d(0xd5));});}function initializeSocketBot(_0x40dace){const _0xae839b=_0x2d7b50,_0x47475d=getClient(_0x40dace['id'])[_0xae839b(0x1e8)],_0x501b97=getClient(_0x40dace['id'])['uuid'];_0x40dace['on'](_0xae839b(0x130),(_0x37ed25,_0x546e39)=>{const _0x432241=_0xae839b;if(validateAccess(_0x546e39,_0x501b97)[_0x432241(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x432241(0x1e9)]({'function':_0x432241(0xf4),'args':_0x37ed25});}else logging(_0x432241(0x115));}),_0x40dace['on'](_0xae839b(0x137),(_0x3fc17c,_0x3c1ba2)=>{const _0x3349ac=_0xae839b;if(validateAccess(_0x3c1ba2,_0x501b97)[_0x3349ac(0x16b)]){if(pid[_0x47475d])pid[_0x47475d]['send']({'function':_0x3349ac(0xf0),'args':_0x3fc17c});}else logging(_0x3349ac(0x10b));}),_0x40dace['on'](_0xae839b(0x1f1),(_0x46817b,_0x3c1e24)=>{const _0x1172eb=_0xae839b;if(validateAccess(_0x3c1e24,_0x501b97)[_0x1172eb(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x1172eb(0x1e9)]({'function':_0x1172eb(0x1b5),'args':_0x46817b});}else logging(_0x1172eb(0xe0));}),_0x40dace['on'](_0xae839b(0xf7),(_0x332b64,_0x256379)=>{const _0x48f305=_0xae839b;if(validateAccess(_0x256379,_0x501b97)[_0x48f305(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x48f305(0x1e9)]({'function':_0x48f305(0x16e),'args':_0x332b64});}else logging(_0x48f305(0x189));}),_0x40dace['on'](_0xae839b(0xb7),(_0x1bf7cc,_0x1341ac)=>{const _0x22319d=_0xae839b;if(validateAccess(_0x1341ac,_0x501b97)[_0x22319d(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x22319d(0x1e9)]({'function':_0x22319d(0x134),'args':_0x1bf7cc});}else logging(_0x22319d(0x11e));}),_0x40dace['on'](_0xae839b(0x1d4),_0x2e6378=>{const _0x50f662=_0xae839b;if(validateAccess(_0x2e6378,_0x501b97)[_0x50f662(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x50f662(0x1e9)]({'function':'getStartingBalances','args':null});}else logging(_0x50f662(0x1e3));}),_0x40dace['on']('place-order',(_0x3bdc88,_0x4038f3)=>{const _0x46f295=_0xae839b;if(validateAccess(_0x4038f3,_0x501b97)[_0x46f295(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x46f295(0x1e9)]({'function':_0x46f295(0x16d),'args':_0x3bdc88});}else logging(_0x46f295(0xac));}),_0x40dace['on']('cancel-loading',_0x410f71=>{const _0x256cd3=_0xae839b;if(validateAccess(_0x410f71,_0x501b97)[_0x256cd3(0x16b)]){if(pid[_0x47475d])pid[_0x47475d][_0x256cd3(0x1e9)]({'function':_0x256cd3(0x1ec),'args':null});}else logging(_0x256cd3(0x217));}),_0x40dace['on'](_0xae839b(0x139),_0x5178cf=>{const _0x4ce88b=_0xae839b;if(validateAccess(_0x5178cf,_0x501b97)[_0x4ce88b(0x16b)])updateBB();else logging(_0x4ce88b(0x1d9));}),_0x40dace['on']('get-messages',_0x3b591f=>{const _0x2b221f=_0xae839b;if(validateAccess(_0x3b591f,_0x501b97)[_0x2b221f(0x16b)])getMessages();else logging(_0x2b221f(0xc3));}),_0x40dace['on']('confirm-message',(_0x486b51,_0x4b4d76)=>{const _0x105aaa=_0xae839b;if(validateAccess(_0x4b4d76,_0x501b97)[_0x105aaa(0x16b)])confirmMessage(_0x486b51);else logging(_0x105aaa(0x10c));}),_0x40dace['on']('logout',_0x1338f4=>{const _0x49cbf5=_0xae839b;if(validateAccess(_0x1338f4,_0x501b97)[_0x49cbf5(0x16b)]){if(devices[_0x501b97]['pidRefreshToken'])clearTimeout(devices[_0x501b97]['pidRefreshToken']);if(devices[_0x501b97][_0x49cbf5(0x179)])clearTimeout(devices[_0x501b97][_0x49cbf5(0x179)]);removeSocketListeners(getClient(_0x40dace['id'])['uuid']),addBlacklist(_0x501b97),devices[_0x501b97][_0x49cbf5(0x1b4)]=null,devices[_0x501b97]['telegram2FaApproval']=null,devices[_0x501b97][_0x49cbf5(0x181)]['token']=null,io['to'](getClient(_0x40dace['id'])[_0x49cbf5(0x131)])[_0x49cbf5(0x1b1)]('status',{'access':{'allow':![],'reason':_0x49cbf5(0x1ba),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x8fc789){const _0x3441b8=_0x2d7b50;getClientsWithUuid(_0x8fc789)[_0x3441b8(0x148)](_0x3f85dc=>{const _0x455859=_0x3441b8;getSocket(_0x3f85dc['id'])[_0x455859(0x1d1)]();});}function cleanSettings(){const _0x56a4cd=_0x2d7b50;let _0x47d56a=settings;return settings[_0x56a4cd(0x21a)]&&settings['telegramToken']!=''&&(_0x47d56a={..._0x47d56a,'telegramToken':_0x56a4cd(0x17c)}),settings[_0x56a4cd(0x165)]&&settings[_0x56a4cd(0x165)]!=''&&(_0x47d56a={..._0x47d56a,'bbPassword':_0x56a4cd(0x17c)}),_0x47d56a;}function _0x4b0c(){const _0x24eb23=['/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','127.0.0.1','fork','secret','/status\x20-\x20show\x20bot(s)\x20status\x0a','Token\x20blacklisted','version','2FA\x20login\x20token\x20generated','token','headers','backup/','/help\x20-\x20show\x20available\x20commands\x0a','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',':\x20Bot\x20Mgr\x20>\x20','bbPassword','max','started','Alerts','318404TaxLrp','Bot\x20Mgr\x20>\x20','allow','getTime','placeOrder','storeConfiguration','delete-bot','name','initclient','live','remove','1099580ShtDld','lowdb','Bot\x20','\x20to\x20','reset-password','pidExpireLogin','49907KZZDKx','split','************','add','server','yes','::ffff:127.0.0.1','access','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','temporaryAccessAllowed','search','Starting\x20Balance\x20Bot\x20update','bbvReceive','settings.','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','onText','username','privateKey','padStart','createServer','jsonwebtoken','hasOwnProperty','Yes','Invalid\x20authentication\x20token\x20(2)','sign','request','telegramUsername','$1_$2_$3','Invalid\x20Telegram\x20token',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','title','sendMessage','generateKeyPairAsync','Invalid\x20username\x20or\x20IP\x20address','existsSync','telegramChatId','\x20only\x0a','auto','function','bb/','ipc','ipv6','isIPv4MappedAddress','SIGTERM','login','env','defaults','writeFileSync','36728pMAbxu','-events.json','mode','chat','Login\x20rejected','emit','catch','update-bot','telegramIpApproval','getPortfolio','clients','mixpanel','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','find','logged\x20out','3000','login\x20not\x20required','length','replace','stop','temporary\x20access\x20not\x20allowed','bbvNew','test','getUTCHours','404\x20Not\x20Found','Password\x20has\x20been\x20reset\x20to:\x20','all','http','Invalid\x20IP\x20address','callback_query','/update\x20-\x20update\x20Balance\x20Bot\x0a','messages','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','toIPv4Address','latestversion','stopped','Markdown','removeAllListeners','handshake','All\x20bots','get-starting-balances','invalid\x20credentials','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','orders','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Access\x20enabled\x20for\x20','bots','telegram2FaApproval','botmanager','Notifications\x20types:\x20','build2','<b>Balance\x20Bot\x20Status:</b>\x0a','whitelistEnabled','restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','index.html','parse','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','copyFileSync','bot','send','/enable\x20-\x20enable\x20notifications\x0a','330450yNAOfL','cancelLoading','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','slice','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','updatebotmanager','get-portfolio','/:bot/coins','/:bot/history','userid','data','timeshift','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','reject','797517GJozBP','telegram','lastmsgemitted','temporary\x20access\x20timeout','Your\x20installation\x20is\x20already\x20up\x20to\x20date','sendFile','User\x20has\x20been\x20validated','All\x20bots\x20running\x20right\x20now','yargs/yargs','build','Unauthorized\x20attempt\x20to\x20update\x20bot','args','join','Allow\x20login\x20from\x20IP\x20address\x20<b>','Notifications\x20disabled\x0a','Notifications\x20enabled','toString','value','store','getFullYear','removeListener','settings','getDate','hybrid-crypto-js','No\x20authentication\x20token','order','push','lastmsgtelegram','/:bot/configuration','access\x20timeout','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','RSA','NTBA_FIX_319','telegramToken','api-eu.mixpanel.com','from','date-fns','-----------------------------------------------------------------------------------','\x20|\x20','expiry','enabled','0.0.0','assign','1000','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Crypt','39vnnwxX','status','kind','keys','init','bcryptjs','manual','compareSync','toggle-bot-mode','store-headless','new-disabled','bb-settings.json','70jTuqok','/:bot/performance','/:bot/support','user','message','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','logout','clientip','ipaddr.js','Unauthorized\x20attempt\x20to\x20get\x20messages','disconnect','/names\x20-\x20show\x20bot\x20names\x0a','write','version.json','reason','getSeconds','Unauthorized\x20attempt\x20to\x20add\x20bot','whitelist','unlinkSync','filter','login\x20token\x20generated','starting\x20new\x20bot\x20|\x20Bot\x20','login\x20required','getMonth','conn','loginRequired','readFileSync','Unauthorized\x20attempt\x20to\x20log\x20out','HTML','496YNVkMY','port','Unauthorized\x20attempt\x20to\x20delete\x20bot','idling\x20bot\x20\x20\x20|\x20Bot\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','apply','password','show','blacklist','Unauthorized\x20attempt\x20to\x20get\x20portfolio','reload','entries','min','new','hashSync','axios','listen','2FA\x20login\x20required','login\x20token\x20valid','inherit','polling_error','4hxRkAi','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','graphql-request','-config.json','deleteHistoryAlerts','host','argv','headless','emitHistory','141867ZIqBBR','notification','store-configuration','accept','pidRefreshToken','No\x20bots\x20running\x20right\x20now','alias','get-messages','Error:\x20Invalid\x20argument\x20','telegramEvents','number','getHours','bbUsername','path','config/','connected','alerts','7920fPLFRD','exp','uuid-random','answerCallbackQuery','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Unauthorized\x20attempt\x20to\x20confirm\x20message','\x20>\x20','hex','stopPolling','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','exit','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','success','then','Unauthorized\x20attempt\x20to\x20get\x20logs','once','sendPortfolioTelegram','telegramEnabled','store-settings','30\x20min','kill','Invalid\x20authentication\x20token\x20(1)','set','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','SIGINT','bot.js','timestamp','Notifications\x20disabled','f2aRequired','disabled\x20Bot\x20','temporary\x20token\x20generated','includes','get','secure','Orders','confirm-message','use','stringify','2FA','crypto','temporary\x20access\x20rejected','get-logs','uuid','getMinutes','2FA\x20login\x20rejected','storeHeadless','mkdirSync','log','delete-alerts','6b67f3d61ee94b8f5c80b4affef4c4d9','update-bb','running','type','sortBy','All','any','toIPv4MappedAddress','bot-','apiKey','lowdb/adapters/FileSync','publicKey','decrypt','error','2FA\x20required','botname','forEach','isDirectory','botID','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','15\x20min','event','disabled','referer','showname','add-bot','match','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','-results.json','Temporary\x20access\x20rejected'];_0x4b0c=function(){return _0x24eb23;};return _0x4b0c();}function updateBB(){const _0x316beb=_0x2d7b50;installingUpdate=!![],config[_0x316beb(0x148)](_0x532d79=>{const _0x2e7c3f=_0x316beb;restartBot(_0x532d79[_0x2e7c3f(0x14a)]);}),process[_0x316beb(0x1e9)]({'update':!![]},_0x42b81e=>{});}function startBot(_0x16e88b,_0x254823,_0x34c284){const _0x638f93=_0x2d7b50;let _0x427ed4=![];const _0x5a4393=_0x16e88b[0x0];_0x254823={..._0x254823,'stdio':[_0x638f93(0xea),_0x638f93(0xea),_0x638f93(0xea),_0x638f93(0x1a4)]},pid[_0x5a4393]=childProcess[_0x638f93(0x158)](botfile,_0x16e88b,_0x254823),pid[_0x5a4393]['on'](_0x638f93(0xbe),_0x4ce42e=>{const _0x2c7b70=_0x638f93;switch(Object[_0x2c7b70(0xb1)](_0x4ce42e)[0x0]){case _0x2c7b70(0x147):updateBotName(_0x5a4393,_0x4ce42e[_0x2c7b70(0x147)]);break;case _0x2c7b70(0x1f0):updateBotManager();break;case'status':updateStatus(_0x5a4393,_0x4ce42e['status']);break;case'live':updateLive(_0x5a4393,_0x4ce42e[_0x2c7b70(0x172)]);break;case _0x2c7b70(0x167):updateLive(_0x5a4393,_0x4ce42e[_0x2c7b70(0x167)]),io['to'](_0x5a4393)[_0x2c7b70(0x1b1)]('status',{'access':{'allow':![],'reason':_0x2c7b70(0xe1),'token':null}});break;case _0x2c7b70(0x1bf):_0x4ce42e[_0x2c7b70(0x1bf)]=='restart'&&restartBot(_0x5a4393);_0x4ce42e[_0x2c7b70(0x1bf)]=='kill'&&toggleBot(_0x5a4393,'disabled',_0x2c7b70(0x1cf));break;case _0x2c7b70(0x1fa):sendTelegram(_0x5a4393,_0x4ce42e['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x4ce42e['telegrammsg']);break;case _0x2c7b70(0x1a2):io['to'](_0x5a4393)[_0x2c7b70(0x1b1)](_0x4ce42e[_0x2c7b70(0x1a2)],_0x4ce42e[_0x2c7b70(0x204)]);break;}}),pid[_0x5a4393]['on'](_0x638f93(0x145),function(_0x3dc466){if(_0x427ed4)return;_0x427ed4=!![],_0x34c284(_0x3dc466);}),pid[_0x5a4393]['on'](_0x638f93(0x111),function(_0x25ec1d){const _0x1e9939=_0x638f93;if(installingUpdate)return;if(_0x427ed4)return;_0x427ed4=!![],_0x34c284(null);const _0x3b2f5b=dbConfig[_0x1e9939(0x127)](_0x1e9939(0x1db))[_0x1e9939(0x1b9)]({'botID':_0x5a4393})[_0x1e9939(0x20a)]();_0x3b2f5b&&(_0x3b2f5b[_0x1e9939(0xaf)]=='enabled'||_0x3b2f5b[_0x1e9939(0xaf)]==_0x1e9939(0xe4))&&(updateLive(_0x5a4393,_0x1e9939(0x1cf)),logging(_0x1e9939(0x1e2)+_0x5a4393),startBot([_0x5a4393,userID],{'cwd':bbpath},function(_0x49b02f){if(_0x49b02f)logging(_0x49b02f);}));});}function stopBot(_0x5e32da){const _0x5f55c6=_0x2d7b50;getClientsWithBotID(_0x5e32da)[_0x5f55c6(0x148)](_0x2bb4a0=>{const _0x224bfc=_0x5f55c6;getSocket(_0x2bb4a0['id'])[_0x224bfc(0xc4)](!![]),removeClient(_0x2bb4a0['id']);}),pid[_0x5e32da]&&(pid[_0x5e32da][_0x5f55c6(0x11b)](),pid[_0x5e32da]=null);}function restartBot(_0x3d3a80){if(pid[_0x3d3a80])pid[_0x3d3a80]['kill']();}function addBot(){const _0x51a306=_0x2d7b50;let _0x1e6885;for(let _0x25135e=0x1;_0x25135e<0x3e9;_0x25135e++){_0x1e6885=_0x25135e[_0x51a306(0x209)]()[_0x51a306(0x18e)](0x3,'0');let _0x2aba68=config[_0x51a306(0x1b9)](_0x123862=>_0x123862[_0x51a306(0x14a)]==_0x1e6885);if(!_0x2aba68)break;}if(_0x1e6885===_0x51a306(0xab)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x51a306(0xcf)+_0x1e6885),dbConfig[_0x51a306(0x127)](_0x51a306(0x1db))[_0x51a306(0x213)]({'botID':_0x1e6885,'botname':_0x51a306(0x176)+_0x1e6885,'status':_0x51a306(0xe4),'live':''})['write'](),startBot([_0x1e6885,userID],{'cwd':bbpath},function(_0x321f40){if(_0x321f40)logging(_0x321f40);}),config=getConfiguration(),io['to'](_0x51a306(0x1dd))[_0x51a306(0x1b1)](_0x51a306(0x1db),config);}function deleteBot(_0x3f6d91){const _0xb01b75=_0x2d7b50;getClientsWithBotID(_0x3f6d91)[_0xb01b75(0x148)](_0x45af4e=>{const _0x49e50e=_0xb01b75;getSocket(_0x45af4e['id'])[_0x49e50e(0xc4)](!![]),removeClient(_0x45af4e['id']);}),dbConfig[_0xb01b75(0x127)](_0xb01b75(0x1db))[_0xb01b75(0x173)]({'botID':_0x3f6d91})[_0xb01b75(0xc6)](),logging('deleted\x20Bot\x20'+_0x3f6d91),stopBot(_0x3f6d91);try{fs[_0xb01b75(0xcc)](path[_0xb01b75(0x205)](configpath,_0xb01b75(0x140)+_0x3f6d91+_0xb01b75(0xef))),fs[_0xb01b75(0xcc)](path['join'](configpath,'bot-'+_0x3f6d91+_0xb01b75(0x1ad))),fs[_0xb01b75(0xcc)](path['join'](configpath,_0xb01b75(0x140)+_0x3f6d91+'-performance.json')),fs['unlinkSync'](path['join'](configpath,_0xb01b75(0x140)+_0x3f6d91+_0xb01b75(0x154)));}catch(_0x255c5f){if(_0x255c5f)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x255c5f);}config=getConfiguration(),io['to'](_0xb01b75(0x1dd))[_0xb01b75(0x1b1)](_0xb01b75(0x1db),config);}function toggleBot(_0x59646b,_0x1f9e5b,_0x48d297){const _0x9eed8a=_0x2d7b50;dbConfig[_0x9eed8a(0x127)]('bots')[_0x9eed8a(0x1b9)]({'botID':_0x59646b})[_0x9eed8a(0xaa)]({'status':_0x1f9e5b})['assign']({'live':_0x48d297})['write']();if(_0x1f9e5b==_0x9eed8a(0x221)||_0x1f9e5b==_0x9eed8a(0xe4))logging('enabled\x20Bot\x20'+_0x59646b),startBot([_0x59646b,userID],{'cwd':bbpath},function(_0x453456){if(_0x453456)logging(_0x453456);});else(_0x1f9e5b==_0x9eed8a(0x14e)||_0x1f9e5b==_0x9eed8a(0xb8))&&(logging(_0x9eed8a(0x124)+_0x59646b),stopBot(_0x59646b));config=getConfiguration(),io['to'](_0x9eed8a(0x1dd))[_0x9eed8a(0x1b1)](_0x9eed8a(0x1db),config);}function toggleStatus(_0x3b0f8d){const _0x1966c4=_0x2d7b50;let _0x2c538d=dbConfig['get'](_0x1966c4(0x1db))[_0x1966c4(0x1b9)]({'botID':_0x3b0f8d})[_0x1966c4(0x20a)](),_0x55905d;if(_0x2c538d[_0x1966c4(0xaf)]===_0x1966c4(0x221))_0x55905d=_0x1966c4(0x14e);else{if(_0x2c538d[_0x1966c4(0xaf)]==='new')_0x55905d=_0x1966c4(0xb8);else{if(_0x2c538d[_0x1966c4(0xaf)]===_0x1966c4(0xb8))_0x55905d=_0x1966c4(0xe4);else{if(_0x2c538d[_0x1966c4(0xaf)]===_0x1966c4(0x14e))_0x55905d=_0x1966c4(0x221);}}}return _0x55905d;}function updateStatus(_0x5b3cf2,_0x328135){const _0x49b866=_0x2d7b50;dbConfig[_0x49b866(0x127)](_0x49b866(0x1db))['find']({'botID':_0x5b3cf2})[_0x49b866(0xaa)]({'status':_0x328135})[_0x49b866(0xc6)](),config=getConfiguration(),io['to'](_0x49b866(0x1dd))[_0x49b866(0x1b1)](_0x49b866(0x1db),config);}function updateLive(_0x167b5e,_0x561348){const _0x159fad=_0x2d7b50;dbConfig[_0x159fad(0x127)](_0x159fad(0x1db))[_0x159fad(0x1b9)]({'botID':_0x167b5e})['assign']({'live':_0x561348})[_0x159fad(0xc6)](),config=getConfiguration(),io['to'](_0x159fad(0x1dd))[_0x159fad(0x1b1)](_0x159fad(0x1db),config);}function _0x151b(_0xc01d8,_0x253dfb){const _0x4445a5=_0x4b0c();return _0x151b=function(_0x1226a7,_0x378fa6){_0x1226a7=_0x1226a7-0xaa;let _0x4b0c5d=_0x4445a5[_0x1226a7];return _0x4b0c5d;},_0x151b(_0xc01d8,_0x253dfb);}function updateBotName(_0x3bc280,_0x12bc85){const _0x421823=_0x2d7b50;dbConfig['get'](_0x421823(0x1db))[_0x421823(0x1b9)]({'botID':_0x3bc280})[_0x421823(0xaa)]({'botname':_0x12bc85})[_0x421823(0xc6)](),config=getConfiguration(),io['to'](_0x421823(0x1dd))['emit'](_0x421823(0x1db),config);}function updateBotManager(){const _0x34e74a=_0x2d7b50;config=getConfiguration(),io['to'](_0x34e74a(0x1dd))[_0x34e74a(0x1b1)](_0x34e74a(0x1db),config);}function toggleBotMode(_0x529894){const _0x3d9b7d=_0x2d7b50;if(pid[_0x529894])pid[_0x529894][_0x3d9b7d(0x1e9)]({'function':'toggleBotMode','args':null});else{const _0x35e1dc=configpath+_0x3d9b7d(0x140)+_0x529894+'-config.json',_0x26caa8=fs[_0x3d9b7d(0xd4)](_0x35e1dc),_0x1ca8c3=JSON['parse'](_0x26caa8),_0x45860d=_0x1ca8c3['bot'][0x0]['headless'];_0x1ca8c3['bot'][0x0][_0x3d9b7d(0xf3)]=!_0x45860d;const _0x46f966=JSON[_0x3d9b7d(0x12c)](_0x1ca8c3,null,0x2);fs[_0x3d9b7d(0x1ab)](_0x35e1dc,_0x46f966),config=getConfiguration(),io['to'](_0x3d9b7d(0x1dd))[_0x3d9b7d(0x1b1)]('bots',config);}}function telegramError(_0x569846){const _0x107abd=_0x2d7b50;console['log'](getTimeStamp()+_0x107abd(0x199));}function validateTelegram(_0x51cbac){const _0x525218=_0x2d7b50;if(_0x51cbac[_0x525218(0x21c)][_0x525218(0x18c)]!=settings[_0x525218(0x196)]&&'@'+_0x51cbac['from'][_0x525218(0x18c)]!=settings[_0x525218(0x196)])return tgBot[_0x525218(0x19b)](_0x51cbac[_0x525218(0x1af)]['id'],_0x525218(0x18a),{'parse_mode':_0x525218(0xd6)})['catch'](_0x46085e=>{telegramError(_0x46085e);}),![];return!![];}async function initTelegram(){const _0x28d0dd=_0x2d7b50;if(tgBot)tgBot[_0x28d0dd(0x10f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x28d0dd(0x21a)],{'polling':!![]});let _0x26905c='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x26905c+='\x0a',_0x26905c+=_0x28d0dd(0x1ea),_0x26905c+='/disable\x20-\x20disable\x20notifications\x0a',_0x26905c+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x26905c+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x26905c+='/on\x20-\x20start\x20bot(s)\x0a',_0x26905c+='/off\x20-\x20stop\x20bot(s)\x0a',_0x26905c+=_0x28d0dd(0xbf),_0x26905c+=_0x28d0dd(0xc5),_0x26905c+=_0x28d0dd(0x15a),_0x26905c+=_0x28d0dd(0x156),_0x26905c+=_0x28d0dd(0x1ca),_0x26905c+=_0x28d0dd(0x161);let _0x4ca375=_0x28d0dd(0x182);_0x4ca375+='\x0a',_0x4ca375+=_0x26905c,tgBot[_0x28d0dd(0x18b)](/\/start/,_0x55d449=>{const _0x49dcce=_0x28d0dd;if(!validateTelegram(_0x55d449))return;if(settings['telegramChatId']!=_0x55d449[_0x49dcce(0x1af)]['id'])updateSetting(_0x49dcce(0x19f),_0x55d449['chat']['id']);updateSetting(_0x49dcce(0x118),!![]),tgBot[_0x49dcce(0x19b)](_0x55d449[_0x49dcce(0x1af)]['id'],_0x4ca375)['catch'](_0x3b3db2=>{telegramError(_0x3b3db2);});}),tgBot['onText'](/\/enable/,_0x2e52a4=>{const _0x56c43a=_0x28d0dd;if(!validateTelegram(_0x2e52a4))return;if(settings[_0x56c43a(0x19f)]!=_0x2e52a4['chat']['id'])updateSetting('telegramChatId',_0x2e52a4[_0x56c43a(0x1af)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x56c43a(0x19b)](_0x2e52a4[_0x56c43a(0x1af)]['id'],_0x56c43a(0x208))[_0x56c43a(0x1b2)](_0x23b96f=>{telegramError(_0x23b96f);});}),tgBot['onText'](/\/config/,async _0x3b94d2=>{const _0x43fb74=_0x28d0dd;if(!validateTelegram(_0x3b94d2))return;tgBot['removeListener'](_0x43fb74(0x1c9)),tgBot[_0x43fb74(0x19b)](_0x3b94d2[_0x43fb74(0x1af)]['id'],_0x43fb74(0x162),{'reply_markup':{'inline_keyboard':[[{'text':_0x43fb74(0x129),'callback_data':_0x43fb74(0x1d7)},{'text':_0x43fb74(0x168),'callback_data':_0x43fb74(0x105)},{'text':_0x43fb74(0x13d),'callback_data':'all'}]]}})['catch'](_0x3d8b1b=>{telegramError(_0x3d8b1b);}),tgBot['on'](_0x43fb74(0x1c9),async _0x1cbd67=>{const _0x3b48be=_0x43fb74,_0x218caf=_0x1cbd67[_0x3b48be(0x1f5)],_0xe9fdff=_0x1cbd67[_0x3b48be(0xbe)];tgBot[_0x3b48be(0x109)](_0x1cbd67['id'])[_0x3b48be(0x114)](async()=>{const _0x266738=_0x3b48be;_0x218caf==_0x266738(0x1d7)&&(updateSetting(_0x266738(0xfe),_0x266738(0x1d7)),updateSetting(_0x266738(0x118),!![]),await tgBot[_0x266738(0x19b)](_0xe9fdff['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x266738(0x1b2)](_0xc3ca8b=>{telegramError(_0xc3ca8b);}));_0x218caf=='alerts'&&(updateSetting(_0x266738(0xfe),'alerts'),updateSetting(_0x266738(0x118),!![]),await tgBot[_0x266738(0x19b)](_0xe9fdff[_0x266738(0x1af)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x4c50f9=>{telegramError(_0x4c50f9);}));_0x218caf==_0x266738(0x1c6)&&(updateSetting('telegramEvents','all'),updateSetting(_0x266738(0x118),!![]),await tgBot[_0x266738(0x19b)](_0xe9fdff['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x266738(0x1b2)](_0x4daa00=>{telegramError(_0x4daa00);}));if(!settings['telegramChatId'])tgBot[_0x266738(0x19b)](_0xe9fdff[_0x266738(0x1af)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x266738(0x1b2)](_0x434b01=>{telegramError(_0x434b01);});}),tgBot[_0x3b48be(0x20d)](_0x3b48be(0x1c9));});}),tgBot[_0x28d0dd(0x18b)](/\/status/,_0xf091c8=>{const _0x1e7edd=_0x28d0dd;if(!validateTelegram(_0xf091c8))return;const _0x5c7b6b=getBotsWithMode();let _0xea8a0d=_0x1e7edd(0x1e0);config['forEach'](_0x49e574=>{const _0x5545b2=_0x1e7edd,_0x2f8ce9=_0x5c7b6b[_0x5545b2(0x1b9)](_0x391f73=>_0x391f73[_0x5545b2(0x14a)]==_0x49e574['botID'])['mode'];_0xea8a0d+=_0x5545b2(0x176)+_0x49e574[_0x5545b2(0x14a)]+':\x20'+_0x49e574[_0x5545b2(0xaf)]+'\x20|\x20'+_0x2f8ce9+_0x5545b2(0x21f)+_0x49e574[_0x5545b2(0x172)]+'\x0a';}),_0xea8a0d+='\x0a',_0xea8a0d+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0xea8a0d+=!settings[_0x1e7edd(0x118)]?_0x1e7edd(0x207):'Notifications\x20enabled\x0a',_0xea8a0d+=settings[_0x1e7edd(0x118)]?settings[_0x1e7edd(0xfe)]==_0x1e7edd(0x1c6)?_0x1e7edd(0x110):_0x1e7edd(0x1de)+settings[_0x1e7edd(0xfe)]+_0x1e7edd(0x1a0):'',tgBot[_0x1e7edd(0x19b)](_0xf091c8[_0x1e7edd(0x1af)]['id'],_0xea8a0d,{'parse_mode':_0x1e7edd(0xd6)})[_0x1e7edd(0x1b2)](_0x307d55=>{telegramError(_0x307d55);});}),tgBot[_0x28d0dd(0x18b)](/\/restart/,_0x25941b=>{const _0x362766=_0x28d0dd;if(!validateTelegram(_0x25941b))return;tgBot[_0x362766(0x20d)](_0x362766(0x1c9));const _0xfd2fb4=getEnabledBots();if(_0xfd2fb4[_0x362766(0x1bd)]==0x0)tgBot[_0x362766(0x19b)](_0x25941b[_0x362766(0x1af)]['id'],_0x362766(0xfa))[_0x362766(0x1b2)](_0x2b80e4=>{telegramError(_0x2b80e4);});else{if(_0xfd2fb4[_0x362766(0x1bd)]>0x1)_0xfd2fb4[_0x362766(0x213)]({'botID':'all'});let _0x2d0d30=[],_0x18a075=[];const _0x512f8c=_0xfd2fb4[_0x362766(0x1bd)]%0x4==0x0||_0xfd2fb4[_0x362766(0x1bd)]%0x4==0x3||_0xfd2fb4[_0x362766(0x1bd)]%0x3==0x1?0x4:0x3;let _0x11c37c=0x0;_0xfd2fb4[_0x362766(0x148)]((_0x109b36,_0x119cce)=>{const _0x959f23=_0x362766;if(_0x119cce%_0x512f8c==0x0)_0x18a075=[];_0x18a075[_0x959f23(0x213)]({'text':_0x109b36[_0x959f23(0x14a)]==_0x959f23(0x1c6)?_0x959f23(0x1d3):_0x959f23(0x176)+_0x109b36[_0x959f23(0x14a)],'callback_data':_0x109b36['botID']}),_0x119cce%_0x512f8c==0x0&&(_0x2d0d30[_0x11c37c]=_0x18a075,_0x11c37c++);}),tgBot['sendMessage'](_0x25941b[_0x362766(0x1af)]['id'],_0x362766(0x1d8),{'reply_markup':{'inline_keyboard':_0x2d0d30}})[_0x362766(0x1b2)](_0x3e8fba=>{telegramError(_0x3e8fba);}),tgBot['on'](_0x362766(0x1c9),async _0x4493d9=>{const _0x341587=_0x362766,_0x2d33e6=_0x4493d9[_0x341587(0x1f5)],_0xc52eb5=_0x4493d9[_0x341587(0xbe)];tgBot[_0x341587(0x109)](_0x4493d9['id'])[_0x341587(0x114)](async()=>{_0x2d33e6=='all'?config['forEach'](_0xbe806=>{const _0x1d3e77=_0x151b;restartBot(_0xbe806[_0x1d3e77(0x14a)]);}):restartBot(_0x2d33e6);}),tgBot['removeListener'](_0x341587(0x1c9));});}}),tgBot[_0x28d0dd(0x18b)](/\/on/,_0x265a22=>{const _0x552b26=_0x28d0dd;if(!validateTelegram(_0x265a22))return;tgBot[_0x552b26(0x20d)](_0x552b26(0x1c9));const _0x23417d=getDisabledBots();if(_0x23417d[_0x552b26(0x1bd)]==0x0)tgBot[_0x552b26(0x19b)](_0x265a22[_0x552b26(0x1af)]['id'],_0x552b26(0x200))[_0x552b26(0x1b2)](_0xcd5fc7=>{telegramError(_0xcd5fc7);});else{if(_0x23417d['length']>0x1)_0x23417d[_0x552b26(0x213)]({'botID':_0x552b26(0x1c6)});let _0x53517c=[],_0x2942a1=[];const _0x4270b9=_0x23417d[_0x552b26(0x1bd)]%0x4==0x0||_0x23417d[_0x552b26(0x1bd)]%0x4==0x3||_0x23417d[_0x552b26(0x1bd)]%0x3==0x1?0x4:0x3;let _0x4b2ae0=0x0;_0x23417d[_0x552b26(0x148)]((_0x564996,_0xd4eebb)=>{const _0x10fd38=_0x552b26;if(_0xd4eebb%_0x4270b9==0x0)_0x2942a1=[];_0x2942a1['push']({'text':_0x564996[_0x10fd38(0x14a)]=='all'?_0x10fd38(0x1d3):_0x10fd38(0x176)+_0x564996['botID'],'callback_data':_0x564996[_0x10fd38(0x14a)]}),_0xd4eebb%_0x4270b9==0x0&&(_0x53517c[_0x4b2ae0]=_0x2942a1,_0x4b2ae0++);}),tgBot['sendMessage'](_0x265a22[_0x552b26(0x1af)]['id'],_0x552b26(0x1b8),{'reply_markup':{'inline_keyboard':_0x53517c}})[_0x552b26(0x1b2)](_0x27d9c7=>{telegramError(_0x27d9c7);}),tgBot['on'](_0x552b26(0x1c9),async _0x319d84=>{const _0x26eccc=_0x552b26,_0x28abb1=_0x319d84[_0x26eccc(0x1f5)],_0x14baf5=_0x319d84[_0x26eccc(0xbe)];tgBot['answerCallbackQuery'](_0x319d84['id'])['then'](async()=>{const _0x407118=_0x26eccc;_0x28abb1==_0x407118(0x1c6)?(tgBot[_0x407118(0x19b)](_0x14baf5['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x407118(0x1b2)](_0x3724f0=>{telegramError(_0x3724f0);}),_0x23417d[_0x407118(0x148)](_0x2539bd=>{const _0x51b5dd=_0x407118;if(_0x2539bd[_0x51b5dd(0x14a)]!=_0x51b5dd(0x1c6))toggleBot(_0x2539bd[_0x51b5dd(0x14a)],toggleStatus(_0x2539bd[_0x51b5dd(0x14a)]),'stopped');})):(tgBot[_0x407118(0x19b)](_0x14baf5[_0x407118(0x1af)]['id'],_0x407118(0x1f7)+_0x28abb1)[_0x407118(0x1b2)](_0xd948f6=>{telegramError(_0xd948f6);}),toggleBot(_0x28abb1,toggleStatus(_0x28abb1),_0x407118(0x1cf)));}),tgBot[_0x26eccc(0x20d)](_0x26eccc(0x1c9));});}}),tgBot[_0x28d0dd(0x18b)](/\/off/,_0xfd7123=>{const _0x27346d=_0x28d0dd;if(!validateTelegram(_0xfd7123))return;tgBot['removeListener']('callback_query');const _0x5f4e79=getEnabledBots();if(_0x5f4e79[_0x27346d(0x1bd)]==0x0)tgBot['sendMessage'](_0xfd7123[_0x27346d(0x1af)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x27346d(0x1b2)](_0x156644=>{telegramError(_0x156644);});else{if(_0x5f4e79['length']>0x1)_0x5f4e79[_0x27346d(0x213)]({'botID':_0x27346d(0x1c6)});let _0x4d1cca=[],_0x1e73bb=[];const _0xcfa765=_0x5f4e79[_0x27346d(0x1bd)]%0x4==0x0||_0x5f4e79['length']%0x4==0x3||_0x5f4e79[_0x27346d(0x1bd)]%0x3==0x1?0x4:0x3;let _0x54211e=0x0;_0x5f4e79[_0x27346d(0x148)]((_0x1ae326,_0x42080c)=>{const _0x47dd7e=_0x27346d;if(_0x42080c%_0xcfa765==0x0)_0x1e73bb=[];_0x1e73bb[_0x47dd7e(0x213)]({'text':_0x1ae326[_0x47dd7e(0x14a)]==_0x47dd7e(0x1c6)?_0x47dd7e(0x1d3):_0x47dd7e(0x176)+_0x1ae326[_0x47dd7e(0x14a)],'callback_data':_0x1ae326['botID']}),_0x42080c%_0xcfa765==0x0&&(_0x4d1cca[_0x54211e]=_0x1e73bb,_0x54211e++);}),tgBot[_0x27346d(0x19b)](_0xfd7123[_0x27346d(0x1af)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x4d1cca}})['catch'](_0x34e98b=>{telegramError(_0x34e98b);}),tgBot['on'](_0x27346d(0x1c9),async _0x322779=>{const _0x360903=_0x27346d,_0x24e299=_0x322779['data'],_0x342986=_0x322779[_0x360903(0xbe)];tgBot[_0x360903(0x109)](_0x322779['id'])[_0x360903(0x114)](async()=>{const _0x1982a2=_0x360903;_0x24e299=='all'?(tgBot[_0x1982a2(0x19b)](_0x342986[_0x1982a2(0x1af)]['id'],_0x1982a2(0x153))[_0x1982a2(0x1b2)](_0x3e9c5e=>{telegramError(_0x3e9c5e);}),_0x5f4e79['forEach'](_0x1932c2=>{const _0x11d771=_0x1982a2;if(_0x1932c2[_0x11d771(0x14a)]!=_0x11d771(0x1c6))toggleBot(_0x1932c2[_0x11d771(0x14a)],toggleStatus(_0x1932c2[_0x11d771(0x14a)]),'stopped');})):(tgBot[_0x1982a2(0x19b)](_0x342986[_0x1982a2(0x1af)]['id'],_0x1982a2(0x1ed)+_0x24e299)[_0x1982a2(0x1b2)](_0xe81be1=>{telegramError(_0xe81be1);}),toggleBot(_0x24e299,toggleStatus(_0x24e299),_0x1982a2(0x1cf)));}),tgBot[_0x360903(0x20d)]('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0xe78e3f=>{const _0x1f1c83=_0x28d0dd;if(!validateTelegram(_0xe78e3f))return;tgBot['removeListener'](_0x1f1c83(0x1c9));const _0x4a366f=getEnabledBots();if(_0x4a366f['length']==0x0)tgBot[_0x1f1c83(0x19b)](_0xe78e3f[_0x1f1c83(0x1af)]['id'],_0x1f1c83(0xfa))[_0x1f1c83(0x1b2)](_0x3a4bb0=>{telegramError(_0x3a4bb0);});else{if(_0x4a366f[_0x1f1c83(0x1bd)]>0x1){let _0x1d604c=[],_0x5df3b8=[];const _0x413976=_0x4a366f[_0x1f1c83(0x1bd)]%0x4==0x0||_0x4a366f[_0x1f1c83(0x1bd)]%0x4==0x3||_0x4a366f[_0x1f1c83(0x1bd)]%0x3==0x1?0x4:0x3;let _0x3df124=0x0;_0x4a366f[_0x1f1c83(0x148)]((_0x1bf8da,_0x442f0c)=>{const _0x44b4cf=_0x1f1c83;if(_0x442f0c%_0x413976==0x0)_0x5df3b8=[];_0x5df3b8[_0x44b4cf(0x213)]({'text':'Bot\x20'+_0x1bf8da[_0x44b4cf(0x14a)],'callback_data':_0x1bf8da[_0x44b4cf(0x14a)]}),_0x442f0c%_0x413976==0x0&&(_0x1d604c[_0x3df124]=_0x5df3b8,_0x3df124++);}),tgBot['sendMessage'](_0xe78e3f[_0x1f1c83(0x1af)]['id'],_0x1f1c83(0xed),{'reply_markup':{'inline_keyboard':_0x1d604c}})[_0x1f1c83(0x1b2)](_0x32b528=>{telegramError(_0x32b528);}),tgBot['on']('callback_query',async _0x1679a4=>{const _0x43fd54=_0x1f1c83,_0x54cea8=_0x1679a4[_0x43fd54(0x1f5)],_0x5f81b=_0x1679a4['message'];tgBot['answerCallbackQuery'](_0x1679a4['id'])[_0x43fd54(0x114)](async()=>{const _0x38250b=_0x43fd54;if(pid[_0x54cea8])pid[_0x54cea8][_0x38250b(0x1e9)]({'function':_0x38250b(0x117),'args':null});}),tgBot[_0x43fd54(0x20d)](_0x43fd54(0x1c9));});}else{const _0x59014a=_0x4a366f[0x0][_0x1f1c83(0x14a)];if(pid[_0x59014a])pid[_0x59014a][_0x1f1c83(0x1e9)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot['onText'](/\/update/,async _0x534cf5=>{const _0x4f992e=_0x28d0dd;if(!validateTelegram(_0x534cf5))return;tgBot['removeListener']('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x4f992e(0x19b)](_0x534cf5[_0x4f992e(0x1af)]['id'],_0x4f992e(0x1fd))['catch'](_0x3faa4c=>{telegramError(_0x3faa4c);});else!validInstallation?tgBot[_0x4f992e(0x19b)](_0x534cf5[_0x4f992e(0x1af)]['id'],_0x4f992e(0x1cc))[_0x4f992e(0x1b2)](_0x3ca7b4=>{telegramError(_0x3ca7b4);}):(tgBot[_0x4f992e(0x19b)](_0x534cf5[_0x4f992e(0x1af)]['id'],_0x4f992e(0x163),{'reply_markup':{'inline_keyboard':[[{'text':_0x4f992e(0x192),'callback_data':_0x4f992e(0x17f)},{'text':'No','callback_data':'no'}]]}})[_0x4f992e(0x1b2)](_0x330572=>{telegramError(_0x330572);}),tgBot['on'](_0x4f992e(0x1c9),async _0x247233=>{const _0x3a817c=_0x4f992e,_0x56c5e2=_0x247233[_0x3a817c(0x1f5)],_0x4d8e66=_0x247233[_0x3a817c(0xbe)];tgBot[_0x3a817c(0x109)](_0x247233['id'])['then'](async()=>{const _0x5672fb=_0x3a817c;_0x56c5e2==_0x5672fb(0x17f)&&(await tgBot[_0x5672fb(0x19b)](_0x4d8e66['chat']['id'],_0x5672fb(0x185))[_0x5672fb(0x1b2)](_0x44a21e=>{telegramError(_0x44a21e);}),updateBB());_0x56c5e2=='no'&&await tgBot[_0x5672fb(0x19b)](_0x4d8e66[_0x5672fb(0x1af)]['id'],_0x5672fb(0x1d6))[_0x5672fb(0x1b2)](_0x290f7b=>{telegramError(_0x290f7b);});if(!settings[_0x5672fb(0x19f)])tgBot[_0x5672fb(0x19b)](_0x4d8e66[_0x5672fb(0x1af)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x5672fb(0x1b2)](_0x2793d7=>{telegramError(_0x2793d7);});}),tgBot[_0x3a817c(0x20d)](_0x3a817c(0x1c9));}));}),tgBot[_0x28d0dd(0x18b)](/\/toggle/,_0x431dff=>{const _0xc450cf=_0x28d0dd;if(!validateTelegram(_0x431dff))return;tgBot[_0xc450cf(0x20d)](_0xc450cf(0x1c9));const _0x37b2b9=getBotsWithMode();if(_0x37b2b9['length']==0x0)tgBot[_0xc450cf(0x19b)](_0x431dff[_0xc450cf(0x1af)]['id'],_0xc450cf(0xfa))[_0xc450cf(0x1b2)](_0x2e577f=>{telegramError(_0x2e577f);});else{let _0x3bf2de=[],_0xb1e4b1=[];const _0xa575b0=0x2;let _0x5bad7b=0x0;_0x37b2b9[_0xc450cf(0x148)]((_0x1c8a54,_0x25843b)=>{const _0x9b092f=_0xc450cf;if(_0x25843b%_0xa575b0==0x0)_0xb1e4b1=[];_0xb1e4b1[_0x9b092f(0x213)]({'text':_0x9b092f(0x176)+_0x1c8a54[_0x9b092f(0x14a)]+'\x20('+_0x1c8a54[_0x9b092f(0x1ae)]+')','callback_data':_0x1c8a54[_0x9b092f(0x14a)]}),_0x25843b%_0xa575b0==0x0&&(_0x3bf2de[_0x5bad7b]=_0xb1e4b1,_0x5bad7b++);}),tgBot['sendMessage'](_0x431dff[_0xc450cf(0x1af)]['id'],_0xc450cf(0x1ef),{'reply_markup':{'inline_keyboard':_0x3bf2de}})[_0xc450cf(0x1b2)](_0x33d5af=>{telegramError(_0x33d5af);}),tgBot['on'](_0xc450cf(0x1c9),async _0x4587cc=>{const _0xa479f5=_0xc450cf,_0x257a31=_0x4587cc[_0xa479f5(0x1f5)],_0x49d34e=_0x4587cc['message'];tgBot[_0xa479f5(0x109)](_0x4587cc['id'])[_0xa479f5(0x114)](async()=>{const _0x18bac5=_0xa479f5,_0x2f6698=_0x37b2b9[_0x18bac5(0x1b9)](_0x58374a=>_0x58374a[_0x18bac5(0x14a)]==_0x257a31),_0x22f55a=_0x2f6698[_0x18bac5(0x1ae)]==_0x18bac5(0x1a1)?_0x18bac5(0xb4):_0x18bac5(0x1a1);tgBot[_0x18bac5(0x19b)](_0x49d34e[_0x18bac5(0x1af)]['id'],_0x18bac5(0x14b)+_0x257a31+_0x18bac5(0x177)+_0x22f55a+'\x20mode')[_0x18bac5(0x1b2)](_0x55e470=>{telegramError(_0x55e470);}),toggleBotMode(_0x257a31);}),tgBot[_0xa479f5(0x20d)]('callback_query');});}}),tgBot[_0x28d0dd(0x18b)](/\/names/,_0x523b79=>{const _0xd40677=_0x28d0dd;if(!validateTelegram(_0x523b79))return;let _0x3e12f6='';config[_0xd40677(0x148)](_0x27a748=>{const _0x4682e3=_0xd40677;_0x3e12f6+='Bot\x20'+_0x27a748[_0x4682e3(0x14a)]+':\x20'+_0x27a748[_0x4682e3(0x147)]+'\x0a';}),tgBot[_0xd40677(0x19b)](_0x523b79[_0xd40677(0x1af)]['id'],_0x3e12f6,{'parse_mode':_0xd40677(0xd6)})['catch'](_0x55135f=>{telegramError(_0x55135f);});}),tgBot[_0x28d0dd(0x18b)](/\/disable/,_0x2351c7=>{const _0x29ffdd=_0x28d0dd;if(!validateTelegram(_0x2351c7))return;tgBot[_0x29ffdd(0x19b)](_0x2351c7[_0x29ffdd(0x1af)]['id'],_0x29ffdd(0x122))[_0x29ffdd(0x1b2)](_0x4ba7e4=>{telegramError(_0x4ba7e4);}),updateSetting(_0x29ffdd(0x118),![]);}),tgBot[_0x28d0dd(0x18b)](/\/help/,_0xe995af=>{const _0x33a076=_0x28d0dd;if(!validateTelegram(_0xe995af))return;tgBot[_0x33a076(0x19b)](_0xe995af[_0x33a076(0x1af)]['id'],_0x26905c)[_0x33a076(0x1b2)](_0x4c2d6f=>{telegramError(_0x4c2d6f);});}),tgBot['on'](_0x28d0dd(0xeb),_0x305feb=>{const _0x292d97=_0x28d0dd;_0x305feb['toString']()[_0x292d97(0x126)](_0x292d97(0x1c4))&&(logging(_0x292d97(0x198)),tgBot[_0x292d97(0x10f)](),tgBot=null,io['to'](_0x292d97(0x1dd))[_0x292d97(0x1b1)](_0x292d97(0xf6),_0x292d97(0x198)));}),process[_0x28d0dd(0x116)](_0x28d0dd(0x11f),()=>{const _0x484b82=_0x28d0dd;if(tgBot)tgBot[_0x484b82(0x10f)]();process[_0x484b82(0x111)](0x1);}),process[_0x28d0dd(0x116)](_0x28d0dd(0x1a7),()=>{const _0x98b929=_0x28d0dd;if(tgBot)tgBot[_0x98b929(0x10f)]();process[_0x98b929(0x111)](0x1);});}}function disableTelegram(){const _0x177da1=_0x2d7b50;tgBot&&(tgBot[_0x177da1(0x10f)](),tgBot=null);}function sendTelegram(_0x4836b2,_0x40dc73){const _0x490c81=_0x2d7b50;if(settings[_0x490c81(0x118)]){if(settings[_0x490c81(0xfe)]==_0x490c81(0x1c6)||(_0x40dc73[_0x490c81(0x13b)]==_0x490c81(0x145)||_0x40dc73[_0x490c81(0x13b)]==_0x490c81(0x113))&&settings[_0x490c81(0xfe)]==_0x490c81(0x105)||_0x40dc73[_0x490c81(0x13b)]==_0x490c81(0x212)&&settings['telegramEvents']==_0x490c81(0x1d7)){if(tgBot&&settings[_0x490c81(0x19f)]){if(_0x40dc73[_0x490c81(0x150)])tgBot[_0x490c81(0x19b)](settings[_0x490c81(0x19f)],_0x40dc73[_0x490c81(0x147)]+_0x490c81(0x10d)+_0x40dc73['event'])['catch'](_0x5ea49f=>{telegramError(_0x5ea49f);});else tgBot[_0x490c81(0x19b)](settings[_0x490c81(0x19f)],_0x490c81(0x176)+_0x4836b2+'\x20>\x20'+_0x40dc73[_0x490c81(0x14d)])[_0x490c81(0x1b2)](_0x7f75b6=>{telegramError(_0x7f75b6);});}}}}async function sendTelegramMsg(_0x14df58,_0x342da2='HTML'){const _0x2b701f=_0x2d7b50;return settings[_0x2b701f(0x118)]&&tgBot&&settings[_0x2b701f(0x19f)]?(await tgBot[_0x2b701f(0x19b)](settings[_0x2b701f(0x19f)],_0x14df58,{'parse_mode':_0x342da2})[_0x2b701f(0x1b2)](_0x539f5d=>{telegramError(_0x539f5d);}),!![]):![];}function getDeviceWithIp(_0x48e470){const _0x3959b6=_0x2d7b50;return devices[_0x3959b6(0x1b9)](_0x5aa18a=>_0x5aa18a['ip']===_0x48e470);}function temporaryAccess2FA(_0x4ae937,_0x1b51d3){const _0x1ab2e8=_0x2d7b50;let _0x57c2d1=new Date(),_0x207ebb=![];if(lastIpApproval){if(_0x57c2d1-lastIpApproval<0x1388)_0x207ebb=!![];}lastIpApproval=new Date();if(_0x207ebb)return;tgBot&&settings[_0x1ab2e8(0x19f)]&&(tgBot[_0x1ab2e8(0x20d)](_0x1ab2e8(0x1c9)),tgBot[_0x1ab2e8(0x19b)](settings[_0x1ab2e8(0x19f)],_0x1ab2e8(0x1e6)+normalizeIP(_0x1b51d3)[_0x1ab2e8(0xde)]+'</b>\x20?',{'parse_mode':_0x1ab2e8(0xd6),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x1ab2e8(0x14c),'callback_data':'15'},{'text':_0x1ab2e8(0x11a),'callback_data':'30'},{'text':_0x1ab2e8(0x1f8),'callback_data':'reject'}]]}})['catch'](_0x489d7a=>{telegramError(_0x489d7a);}),tgBot['on'](_0x1ab2e8(0x1c9),async _0x356e81=>{const _0x4b800f=_0x1ab2e8,_0xa1c55f=_0x356e81[_0x4b800f(0x1f5)],_0x46c567=_0x356e81['message'];tgBot['answerCallbackQuery'](_0x356e81['id'])[_0x4b800f(0x114)](async()=>{const _0x37f01d=_0x4b800f;devices[_0x4ae937][_0x37f01d(0x1b4)]={'clientip':_0x1b51d3,'timestamp':new Date()[_0x37f01d(0x16c)](),'expiry':_0xa1c55f},_0xa1c55f!=_0x37f01d(0x1f8)?(await tgBot['sendMessage'](_0x46c567[_0x37f01d(0x1af)]['id'],_0x37f01d(0x1da)+_0xa1c55f+'\x20minutes',{'parse_mode':_0x37f01d(0xd6)})[_0x37f01d(0x1b2)](_0x454c79=>{telegramError(_0x454c79);}),io['to'](_0x4ae937)[_0x37f01d(0x1b1)](_0x37f01d(0xaf),{'access':{'allow':![],'reason':_0x37f01d(0xe1),'token':null}})):(await tgBot[_0x37f01d(0x19b)](_0x46c567[_0x37f01d(0x1af)]['id'],_0x37f01d(0x155))['catch'](_0x4db8bd=>{telegramError(_0x4db8bd);}),io['to'](_0x4ae937)['emit'](_0x37f01d(0xaf),{'access':{'allow':![],'reason':_0x37f01d(0x12f),'token':null}}));}),tgBot[_0x4b800f(0x20d)](_0x4b800f(0x1c9));}));}function loginAccess2FA(_0x3f2c70,_0x49e89a){const _0x14e386=_0x2d7b50;tgBot&&settings[_0x14e386(0x19f)]&&(tgBot[_0x14e386(0x20d)](_0x14e386(0x1c9)),tgBot['sendMessage'](settings['telegramChatId'],_0x14e386(0x206)+normalizeIP(_0x49e89a)['show']+'</b>\x20?',{'parse_mode':_0x14e386(0xd6),'reply_markup':{'inline_keyboard':[[{'text':_0x14e386(0xf8),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x14e386(0x1f8)}]]}})[_0x14e386(0x1b2)](_0x341b81=>{telegramError(_0x341b81);}),tgBot['on']('callback_query',async _0x1f4b66=>{const _0x4bcff2=_0x14e386,_0x2641d4=_0x1f4b66[_0x4bcff2(0x1f5)],_0x2b83d5=_0x1f4b66[_0x4bcff2(0xbe)];tgBot['answerCallbackQuery'](_0x1f4b66['id'])[_0x4bcff2(0x114)](async()=>{const _0x3bdfe7=_0x4bcff2;devices[_0x3f2c70][_0x3bdfe7(0x1dc)]={'clientip':_0x49e89a,'timestamp':new Date()[_0x3bdfe7(0x16c)](),'expiry':_0x2641d4},_0x2641d4!=_0x3bdfe7(0x1f8)?(await tgBot[_0x3bdfe7(0x19b)](_0x2b83d5['chat']['id'],'Login\x20accepted',{'parse_mode':_0x3bdfe7(0xd6)})[_0x3bdfe7(0x1b2)](_0x34cdde=>{telegramError(_0x34cdde);}),io['to'](_0x3f2c70)[_0x3bdfe7(0x1b1)](_0x3bdfe7(0xaf),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3bdfe7(0x19b)](_0x2b83d5[_0x3bdfe7(0x1af)]['id'],_0x3bdfe7(0x1b0))[_0x3bdfe7(0x1b2)](_0x5d364c=>{telegramError(_0x5d364c);}),io['to'](_0x3f2c70)[_0x3bdfe7(0x1b1)](_0x3bdfe7(0xaf),{'access':{'allow':![],'reason':_0x3bdfe7(0x133),'token':null}}));}),tgBot[_0x4bcff2(0x20d)](_0x4bcff2(0x1c9));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x24357f=_0x2d7b50;return dbConfig[_0x24357f(0x127)](_0x24357f(0x1db))[_0x24357f(0x13c)]('botID')[_0x24357f(0xcd)]({'status':_0x24357f(0x221)})[_0x24357f(0x20a)]()||[];}function getDisabledBots(){const _0x1962d0=_0x2d7b50;return dbConfig[_0x1962d0(0x127)](_0x1962d0(0x1db))[_0x1962d0(0x13c)](_0x1962d0(0x14a))[_0x1962d0(0xcd)]({'status':'disabled'})[_0x1962d0(0x20a)]()||[];}function getBotsWithMode(){const _0x5f1940=_0x2d7b50,_0x28e56f=dbConfig[_0x5f1940(0x127)]('bots')['sortBy']('botID')[_0x5f1940(0x20a)]()||[];return _0x28e56f[_0x5f1940(0x148)](_0x4a3954=>{const _0x228cae=_0x5f1940,_0x59729e=configpath+_0x228cae(0x140)+_0x4a3954['botID']+_0x228cae(0xef),_0x4a568e=fs[_0x228cae(0x19e)](_0x59729e);if(_0x4a568e){const _0xfee35f=fs['readFileSync'](_0x59729e);try{const _0x526957=JSON[_0x228cae(0x1e5)](_0xfee35f),_0x1e1e6e=_0x526957?_0x526957[_0x228cae(0x1e8)][0x0][_0x228cae(0xf3)]:![];_0x4a3954[_0x228cae(0x1ae)]=_0x1e1e6e?_0x228cae(0x1a1):_0x228cae(0xb4);}catch(_0xf1564f){_0x4a3954['mode']=_0x228cae(0xb4);}}else _0x4a3954[_0x228cae(0x1ae)]=_0x228cae(0xb4);}),_0x28e56f;}async function initUser(){const _0x5727f6=_0x2d7b50;if(!settings[_0x5727f6(0x1f4)]){const _0x3ed39a=uuidRandom();mixpanel[_0x5727f6(0xfb)](_0x3ed39a),updateSetting(_0x5727f6(0x1f4),_0x3ed39a);}}async function initSecure(){const _0x915a30=_0x2d7b50;let _0x51abb2=getSecure();if(!_0x51abb2[_0x915a30(0x191)](_0x915a30(0x159))){let _0x2e0052=await generateKeys();_0x51abb2[_0x915a30(0x143)]=_0x2e0052[_0x915a30(0x143)],_0x51abb2[_0x915a30(0x18d)]=_0x2e0052[_0x915a30(0x18d)],_0x51abb2[_0x915a30(0x159)]=crypto['randomBytes'](0x20)[_0x915a30(0x209)](_0x915a30(0x10e));;storeSecure(_0x51abb2);}}function getSettings(){const _0xf2884=_0x2d7b50;return dbSettings['get'](_0xf2884(0x20e))[_0xf2884(0x20a)]()||{};}function getSecure(){const _0x13868e=_0x2d7b50;return dbSecure[_0x13868e(0x127)](_0x13868e(0x128))[_0x13868e(0x20a)]()||{};}function getBlacklist(){const _0x51cd77=_0x2d7b50;return dbSecure[_0x51cd77(0x127)]('blacklist')['value']()||[];}function broadcastToBots(_0x17b767,_0x1bec6f){const _0x1c38b2=_0x2d7b50;config[_0x1c38b2(0x148)](_0x1036dc=>{const _0x74b228=_0x1c38b2;if(_0x1036dc[_0x74b228(0xaf)]=='enabled'&&_0x1036dc[_0x74b228(0x172)]==_0x74b228(0x13a)){if(pid[_0x1036dc['botID']])pid[_0x1036dc[_0x74b228(0x14a)]]['send']({[_0x17b767]:_0x1bec6f});}});}function storeSettings(_0x2a6d18,_0x4ee6c0=![]){const _0x558b53=_0x2d7b50;_0x2a6d18={...settings,..._0x2a6d18};if(_0x4ee6c0&&_0x2a6d18[_0x558b53(0x165)]!=_0x558b53(0x17c)&&_0x2a6d18[_0x558b53(0x165)]!=''){const _0x2623af=crypt[_0x558b53(0x144)](secure[_0x558b53(0x18d)],_0x2a6d18[_0x558b53(0x165)])[_0x558b53(0xbe)][_0x558b53(0x17b)]('@')[0x0],_0x198f83=bcrypt['hashSync'](_0x2623af,saltRounds);_0x2a6d18={..._0x2a6d18,'bbPassword':_0x198f83};}if(_0x4ee6c0&&_0x2a6d18['telegramToken']!=_0x558b53(0x17c)&&_0x2a6d18[_0x558b53(0x21a)]!=''){const _0x2c5278=crypt[_0x558b53(0x144)](secure[_0x558b53(0x18d)],_0x2a6d18[_0x558b53(0x21a)])[_0x558b53(0xbe)]['split']('@')[0x0];_0x2a6d18={..._0x2a6d18,'telegramToken':_0x2c5278};}const _0x12a2ca=_0x2a6d18[_0x558b53(0x21a)]!=_0x558b53(0x17c)&&_0x2a6d18['telegramToken']!=settings['telegramToken']||_0x2a6d18['telegramUsername']!=settings[_0x558b53(0x196)],_0x15fc47=_0x2a6d18['telegramToken']==''||_0x2a6d18[_0x558b53(0x196)]=='';if(_0x12a2ca)_0x2a6d18[_0x558b53(0xfe)]='all';for(const [_0x9a079d,_0xda3a35]of Object[_0x558b53(0xe2)](_0x2a6d18)){if(_0x9a079d==_0x558b53(0x21a)&&_0xda3a35==_0x558b53(0x17c)){_0x2a6d18[_0x558b53(0x21a)]=settings[_0x558b53(0x21a)];continue;};if(_0x9a079d==_0x558b53(0x165)&&_0xda3a35=='************'){_0x2a6d18[_0x558b53(0x165)]=settings[_0x558b53(0x165)];continue;};dbSettings[_0x558b53(0x11d)](_0x558b53(0x187)+_0x9a079d,_0xda3a35)[_0x558b53(0xc6)]();}settings=_0x2a6d18,io['to'](_0x558b53(0x1dd))[_0x558b53(0x1b1)](_0x558b53(0x20e),cleanSettings()),broadcastToBots(_0x558b53(0x1f6),settings[_0x558b53(0x1f6)]);if(_0x12a2ca&&!_0x15fc47)initTelegram();if(_0x12a2ca&&_0x15fc47)disableTelegram();getAllClients()[_0x558b53(0x148)](_0x43ab5f=>{const _0x70d779=_0x558b53;getSocket(_0x43ab5f['id'])[_0x70d779(0x1b1)](_0x70d779(0xaf),{'access':{'allow':![],'reason':_0x70d779(0xe1),'token':null}});});}function updateSetting(_0x3c2a9b,_0x12e722){const _0x3d4ccc=_0x2d7b50;dbSettings['set'](_0x3d4ccc(0x187)+_0x3c2a9b,_0x12e722)[_0x3d4ccc(0xc6)](),settings=getSettings(),io['to'](_0x3d4ccc(0x1dd))[_0x3d4ccc(0x1b1)](_0x3d4ccc(0x20e),cleanSettings());}function storeSecure(_0x1103a4){const _0xe96d76=_0x2d7b50;dbSecure[_0xe96d76(0x127)](_0xe96d76(0x128))[_0xe96d76(0x213)](_0x1103a4)[_0xe96d76(0xc6)](),secure=_0x1103a4;}function addBlacklist(_0x5a2cb4){const _0x6bdc70=_0x2d7b50;cleanBlacklist();let _0x323c22;devices[_0x5a2cb4][_0x6bdc70(0x1b4)]?_0x323c22=Math[_0x6bdc70(0x166)](devices[_0x5a2cb4][_0x6bdc70(0x1b4)][_0x6bdc70(0x220)],loginExpiry):_0x323c22=loginExpiry,dbSecure[_0x6bdc70(0x127)](_0x6bdc70(0xdf))['push']({'expiry':new Date()[_0x6bdc70(0x16c)]()+_0x323c22*0x3c*0x3e8,'token':devices[_0x5a2cb4]['access'][_0x6bdc70(0x15e)]})[_0x6bdc70(0xc6)](),blacklist=dbSecure[_0x6bdc70(0x127)]('blacklist')['value']();}function cleanBlacklist(){const _0x1100af=_0x2d7b50;let _0x1d4ec4=dbSecure['get'](_0x1100af(0xdf))['cloneDeep']()['value'](),_0x3591f4=new Date()['getTime']();_0x1d4ec4['forEach'](_0x2f8db4=>{const _0x27ed05=_0x1100af;_0x2f8db4[_0x27ed05(0x220)]<_0x3591f4&&dbSecure['get']('blacklist')['remove']({'expiry':_0x2f8db4[_0x27ed05(0x220)]})[_0x27ed05(0xc6)]();});}function initStates(){const _0x1ceed2=_0x2d7b50;let _0x59f6df=getConfiguration();_0x59f6df[_0x1ceed2(0x148)](_0x20e6df=>{const _0x47d2e4=_0x1ceed2;_0x20e6df[_0x47d2e4(0x172)]=_0x47d2e4(0x1cf);}),storeConfiguration(_0x59f6df);}function onKeys(){const _0x19225d=new RSA();return new Promise(_0x12988c=>{const _0x46fd25=_0x151b;_0x19225d[_0x46fd25(0x19c)]()[_0x46fd25(0x114)](_0x1cd67b=>{_0x12988c(_0x1cd67b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x5156c2=_0x2d7b50;let _0x5ed229=getSettings(),_0x5316e6=![];!_0x5ed229[_0x5156c2(0x191)](_0x5156c2(0x214))&&(_0x5ed229[_0x5156c2(0x214)]=0x0,_0x5316e6=!![]);!_0x5ed229['hasOwnProperty'](_0x5156c2(0x1fb))&&(_0x5ed229[_0x5156c2(0x1fb)]=0x0,_0x5316e6=!![]);!_0x5ed229[_0x5156c2(0x191)](_0x5156c2(0x1ce))&&(_0x5ed229[_0x5156c2(0x1ce)]=_0x5156c2(0x222),_0x5316e6=!![]);if(_0x5316e6)storeSettings(_0x5ed229);}function storeConfiguration(_0xa78937){const _0x36cbf0=_0x2d7b50;dbConfig[_0x36cbf0(0x127)](_0x36cbf0(0x1db))['remove']()['write'](),_0xa78937[_0x36cbf0(0x148)](_0x53a98f=>{const _0x2d30c0=_0x36cbf0;delete _0x53a98f[_0x2d30c0(0x1ae)];}),dbConfig[_0x36cbf0(0x127)](_0x36cbf0(0x1db))[_0x36cbf0(0x213)](..._0xa78937)[_0x36cbf0(0xc6)](),config=_0xa78937;}function resetPassword(){const _0x186c36=_0x2d7b50;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x186c36(0x1c9)),tgBot[_0x186c36(0x19b)](settings[_0x186c36(0x19f)],_0x186c36(0x188),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x186c36(0x1b2)](_0x327bcf=>{telegramError(_0x327bcf);}),tgBot['on'](_0x186c36(0x1c9),async _0x4dc430=>{const _0x22c688=_0x186c36,_0x296163=_0x4dc430[_0x22c688(0x1f5)],_0x5c3563=_0x4dc430[_0x22c688(0xbe)];tgBot[_0x22c688(0x109)](_0x4dc430['id'])[_0x22c688(0x114)](async()=>{const _0x2b51cc=_0x22c688;if(_0x296163!='no'){const _0x457400=0xf,_0xa841d=_0x2b51cc(0x10a),_0x5e18fb=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x457400)))['map'](_0x9c2694=>_0xa841d[_0x9c2694%_0xa841d[_0x2b51cc(0x1bd)]])['join'](''),_0x1a320e=bcrypt[_0x2b51cc(0xe5)](_0x5e18fb,saltRounds);storeSettings({'bbPassword':_0x1a320e}),await tgBot[_0x2b51cc(0x19b)](_0x5c3563['chat']['id'],_0x2b51cc(0x1c5)+_0x5e18fb,{'parse_mode':_0x2b51cc(0xd6)})[_0x2b51cc(0x1b2)](_0x544187=>{telegramError(_0x544187);});}else await tgBot[_0x2b51cc(0x19b)](_0x5c3563[_0x2b51cc(0x1af)]['id'],'Password\x20reset\x20rejected')[_0x2b51cc(0x1b2)](_0x5f23b1=>{telegramError(_0x5f23b1);});}),tgBot[_0x22c688(0x20d)](_0x22c688(0x1c9));}));}function logging(_0x5c5677){const _0x1ef24c=_0x2d7b50;console[_0x1ef24c(0x136)](getTimeStamp()+_0x1ef24c(0x164)+_0x5c5677);if(tgBot&&settings[_0x1ef24c(0x19f)]&&settings['telegramEvents']!=_0x1ef24c(0x1d7))tgBot['sendMessage'](settings[_0x1ef24c(0x19f)],_0x1ef24c(0x16a)+_0x5c5677)[_0x1ef24c(0x1b2)](_0x448aba=>{telegramError(_0x448aba);});}function getServerTime(){const _0x428748=_0x2d7b50,_0x571d10=new Date();return _0x571d10[_0x428748(0x20c)]()+'/'+(_0x571d10[_0x428748(0xd1)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x571d10['getDate']()[_0x428748(0x209)]()[_0x428748(0x18e)](0x2,'0')+'\x20'+_0x571d10[_0x428748(0x100)]()['toString']()[_0x428748(0x18e)](0x2,'0')+':'+_0x571d10[_0x428748(0x132)]()['toString']()[_0x428748(0x18e)](0x2,'0')+':'+_0x571d10[_0x428748(0xc9)]()[_0x428748(0x209)]()[_0x428748(0x18e)](0x2,'0');}function getTimeStamp(){const _0x3a993b=_0x2d7b50,_0x3c037b=shiftedTime();return _0x3c037b[_0x3a993b(0x20c)]()+'/'+(_0x3c037b['getMonth']()+0x1)[_0x3a993b(0x209)]()['padStart'](0x2,'0')+'/'+_0x3c037b[_0x3a993b(0x20f)]()['toString']()[_0x3a993b(0x18e)](0x2,'0')+'\x20'+_0x3c037b[_0x3a993b(0x100)]()[_0x3a993b(0x209)]()[_0x3a993b(0x18e)](0x2,'0')+':'+_0x3c037b['getMinutes']()[_0x3a993b(0x209)]()[_0x3a993b(0x18e)](0x2,'0')+':'+_0x3c037b[_0x3a993b(0xc9)]()[_0x3a993b(0x209)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x402316=_0x2d7b50,_0x47691b=new Date();let _0x5454c0=_0x47691b;if(settings[_0x402316(0x1f6)]&&settings['timeshift']!==0x0)_0x5454c0=fns[_0x402316(0x17d)](_0x47691b,{'hours':settings[_0x402316(0x1f6)]});return _0x5454c0;}function startScheduler(){const _0x11712c=_0x2d7b50;let _0x5bd490=new Date()[_0x11712c(0x1c3)]();_0x5bd490==0x1&&backupConfigFiles();(_0x5bd490==0x8||_0x5bd490==0x14)&&triggerAnalytics();_0x5bd490%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x3f8b58=>{const _0x5bc76c=_0x151b;if(!_0x3f8b58[_0x5bc76c(0x149)]())fs[_0x5bc76c(0x1e7)](configpath+_0x3f8b58[_0x5bc76c(0x170)],configbackuppath+_0x3f8b58[_0x5bc76c(0x170)]);});}async function getPublicIp(){const _0x315b53=_0x2d7b50;try{const _0x16e01f=await axios[_0x315b53(0x127)]('https://api.ipify.org?format=json');publicip=_0x16e01f[_0x315b53(0x1f5)]['ip'];}catch(_0x35de3b){}}async function triggerAnalytics(){const _0x25f7ce=_0x2d7b50;if(!publicip)await getPublicIp();const _0x206d45=getBotsWithMode();let _0x5314c3=0x0;_0x206d45['forEach'](_0x369428=>{const _0x334df8=_0x151b;if(_0x369428[_0x334df8(0xaf)]===_0x334df8(0x221))_0x5314c3++;}),mixpanel['track']('Server',{'distinct_id':settings[_0x25f7ce(0x1f4)],'ip':publicip,'version':serverversion,'numbots':_0x206d45[_0x25f7ce(0x1bd)],'numbotsenabled':_0x5314c3});}async function getMessages(){const _0x32ceac=_0x2d7b50,_0x38ba72='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x4d995b=new GraphQLClient(_0x38ba72),_0x14f4ff={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x741cc6=serverversion[_0x32ceac(0x17b)]('.'),_0x1fe287=_0x741cc6[0x0]+'.'+_0x741cc6[0x1],_0x2578fe=Math[_0x32ceac(0xe3)](settings[_0x32ceac(0x214)],settings['lastmsgemitted']),_0x26a225={'last':parseInt(_0x2578fe),'bbm':_0x1fe287},_0x599d3b=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x43b2f1;try{_0x43b2f1=await _0x4d995b[_0x32ceac(0x195)](_0x599d3b,_0x26a225,_0x14f4ff);}catch(_0x43ee50){}if(_0x43b2f1&&_0x43b2f1['messages']){let _0x14a44f=settings['lastmsgtelegram'];newMessages=[];for(const _0x2bf69e of _0x43b2f1[_0x32ceac(0x1cb)]){newMessages[_0x32ceac(0x213)](_0x2bf69e);if(_0x2bf69e[_0x32ceac(0x1c1)])updateSetting(_0x32ceac(0x1ce),_0x2bf69e[_0x32ceac(0x1c1)]);let _0x2a61db=_0x2bf69e['bbvNew']?serverversion>=_0x2bf69e[_0x32ceac(0x1c1)]:![];if(!_0x2a61db&&_0x2bf69e[_0x32ceac(0xff)]>_0x14a44f){if(_0x2bf69e[_0x32ceac(0x186)]===_0x32ceac(0x13e)||serverversion['startsWith'](_0x2bf69e[_0x32ceac(0x186)])){let _0x366424=''+_0x2bf69e[_0x32ceac(0x19a)]+'\x0a\x0a'+_0x2bf69e[_0x32ceac(0xbe)];const _0x43cc97=await sendTelegramMsg(toTelegramMarkdown(_0x366424),_0x32ceac(0x1d0));if(_0x43cc97)_0x14a44f=_0x2bf69e[_0x32ceac(0xff)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x32ceac(0x214),_0x14a44f),emitMessages();}}function emitMessages(){const _0x4f3438=_0x2d7b50,_0x2f0c04=settings[_0x4f3438(0x1fb)];let _0x223fc2=[];newMessages[_0x4f3438(0x148)](_0x5b7cd2=>{const _0x4d5c55=_0x4f3438;_0x5b7cd2[_0x4d5c55(0xff)]>_0x2f0c04&&_0x223fc2[_0x4d5c55(0x213)](_0x5b7cd2);}),_0x223fc2[_0x4f3438(0x1bd)]>0x0&&getAllClients()[_0x4f3438(0x148)](_0x513c73=>{const _0x4a5fef=_0x4f3438;getSocket(_0x513c73['id'])[_0x4a5fef(0x1b1)](_0x4a5fef(0xbe),_0x223fc2);});}function confirmMessage(_0x5cc14a){const _0x4027bc=_0x2d7b50;updateSetting(_0x4027bc(0x1fb),Number(_0x5cc14a));}function isNewerVersion(_0x40e3a4,_0x14784f){const _0x1e9e05=_0x2d7b50,_0xe66647=_0x14784f[_0x1e9e05(0x17b)]('.'),_0x465b0b=_0x40e3a4[_0x1e9e05(0x17b)]('.');for(var _0x5adcfd=0x0;_0x5adcfd<_0x465b0b[_0x1e9e05(0x1bd)];_0x5adcfd++){const _0x22d05f=~~_0x465b0b[_0x5adcfd],_0x46bad1=~~_0xe66647[_0x5adcfd];if(_0x22d05f>_0x46bad1)return!![];if(_0x22d05f<_0x46bad1)return![];}return![];}function toTelegramMarkdown(_0x42db8d){const _0x11e530=_0x2d7b50,_0x38196c=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1268ed=/\*{2}(.+?)\*{2}/gim;return _0x42db8d=_0x42db8d[_0x11e530(0x1be)](_0x38196c,_0x11e530(0x197))[_0x11e530(0x1be)](_0x1268ed,'*$1*'),_0x42db8d;}function validateCredentials(_0x3d1166,_0x36e026){const _0x2b2d5e=_0x2d7b50;if(_0x3d1166['username']==settings['bbUsername']&&bcrypt[_0x2b2d5e(0xb5)](_0x3d1166['password'],settings[_0x2b2d5e(0x165)])){if(settings[_0x2b2d5e(0x123)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x419e6e=generateLoginToken(_0x36e026);return{'allow':!![],'reason':_0x2b2d5e(0xce),'token':_0x419e6e};}}else return{'allow':![],'reason':_0x2b2d5e(0x1d5),'token':null};}function refreshToken(_0x30f506){const _0x109221=_0x2d7b50,_0x56b165=generateLoginToken(_0x30f506);return{'allow':!![],'reason':_0x109221(0xce),'token':_0x56b165};}function validateAccess(_0x41931b,_0xef8b3d){const _0x1247d5=_0x2d7b50;let _0x3c96ba=devices[_0xef8b3d]['ip'],_0x56c06e;const _0x1fb733=_0x1aad9c=>{const _0x45dffd=_0x151b;if(settings[_0x45dffd(0xd3)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0xef8b3d)){const _0x3f72a7=generateLoginToken(_0xef8b3d);return{'allow':!![],'reason':_0x45dffd(0x15d),'token':_0x3f72a7};}else return{'allow':![],'reason':_0x45dffd(0xd0),'token':null};}else return _0x56c06e=validToken(_0x1aad9c,_0xef8b3d),_0x56c06e[_0x45dffd(0x191)](_0x45dffd(0x113))?{'allow':!![],'reason':_0x45dffd(0xe9),'token':_0x1aad9c}:{'allow':![],'reason':_0x45dffd(0xd0),'token':null};}else return{'allow':!![],'reason':_0x45dffd(0x1bc),'token':null};};if(settings[_0x1247d5(0x1e1)]){let _0x531e1d=[...settings[_0x1247d5(0xcb)],'::1',_0x1247d5(0x180),_0x1247d5(0x157)];if(_0x531e1d['includes'](_0x3c96ba))return _0x1fb733(_0x41931b);else{_0x56c06e=validToken(_0x41931b,_0xef8b3d);if(_0x56c06e[_0x1247d5(0x191)](_0x1247d5(0x113)))return _0x1fb733(_0x41931b);else{if(telegramIpApproved(_0xef8b3d)){const _0x31ce97=generateToken(_0xef8b3d);return _0x56c06e=_0x1fb733(_0x41931b),_0x56c06e['allow']?{'allow':!![],'reason':_0x1247d5(0x125),'token':_0x31ce97}:_0x56c06e;}else return settings[_0x1247d5(0x183)]?{'allow':![],'reason':_0x1247d5(0x146),'token':null}:{'allow':![],'reason':_0x1247d5(0x1c0),'token':null};}}}else return _0x1fb733(_0x41931b);}function timelyDecrypt(_0x3cf4f3,_0x50ecee=!![]){const _0x337490=_0x2d7b50;if(_0x3cf4f3)try{const _0x56ff9a=crypt[_0x337490(0x144)](secure[_0x337490(0x18d)],_0x3cf4f3)[_0x337490(0xbe)],_0x5a1e86=_0x56ff9a[_0x337490(0x17b)]('@')[0x0],_0x478648=_0x56ff9a['split']('@')[0x1],_0x1dd798=new Date()[_0x337490(0x16c)]();if(_0x50ecee){if(_0x1dd798-_0x478648<maxSecretAge*0x3e8)return _0x5a1e86;else return![];}else return _0x5a1e86;}catch(_0x722893){return![];}else return![];}const validToken=(_0x260b26,_0x58ae6b)=>{const _0x614a1d=_0x2d7b50,_0x8901fc=devices[_0x58ae6b]['ip'];if(!_0x260b26)return{'error':_0x614a1d(0x211)};for(let _0x3b8043 of blacklist){if(_0x3b8043[_0x614a1d(0x15e)]==_0x260b26)return{'error':_0x614a1d(0x15b)};}let _0x5924e8;try{_0x5924e8=jwt['verify'](_0x260b26,secure[_0x614a1d(0x159)]+_0x58ae6b);}catch{return{'error':_0x614a1d(0x11c)};}if(!_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0xc1))&&!_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0x18c))||!_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0x107)))return{'error':_0x614a1d(0x193)};if(!_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0x18c))&&_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0xc1))){const {clientip:_0x27e813}=_0x5924e8;return _0x8901fc==_0x27e813?{'success':_0x614a1d(0x1ff)}:{'error':_0x614a1d(0x1c8)};}else{if(_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0x18c))&&_0x5924e8[_0x614a1d(0x191)](_0x614a1d(0xc1))){const {username:_0x2657ff,clientip:_0x4f0447}=_0x5924e8;return settings[_0x614a1d(0x101)]==_0x2657ff&&_0x8901fc==_0x4f0447?{'success':_0x614a1d(0x1ff)}:{'error':_0x614a1d(0x19d)};}}},generateLoginToken=_0x367272=>{const _0x1521bb=_0x2d7b50;if(_0x367272){const _0x12fe0f=devices[_0x367272]['ip'];return jwt[_0x1521bb(0x194)]({'username':settings[_0x1521bb(0x101)],'clientip':_0x12fe0f},secure['secret']+_0x367272,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x19382a=>{const _0x2b3e39=_0x2d7b50;if(_0x19382a){const _0x2d4d74=devices[_0x19382a]['ip'];return jwt[_0x2b3e39(0x194)]({'clientip':_0x2d4d74},secure['secret']+_0x19382a,{'expiresIn':devices[_0x19382a][_0x2b3e39(0x1b4)][_0x2b3e39(0x220)]*0x3c});}else return![];},telegramIpApproved=_0x31b642=>{const _0x17dabb=_0x2d7b50;let _0xe01c60=![];return devices[_0x31b642]['telegramIpApproval']&&devices[_0x31b642]['telegramIpApproval'][_0x17dabb(0x220)]!=_0x17dabb(0x1f8)&&(_0xe01c60=devices[_0x31b642][_0x17dabb(0x1b4)][_0x17dabb(0xc1)]==devices[_0x31b642]['ip']&&new Date()[_0x17dabb(0x16c)]()-devices[_0x31b642][_0x17dabb(0x1b4)][_0x17dabb(0x121)]<devices[_0x31b642][_0x17dabb(0x1b4)][_0x17dabb(0x220)]*0x3c*0x3e8),_0xe01c60;},telegram2FaApproved=_0x23a0ef=>{const _0x233f3f=_0x2d7b50;let _0x21ccfc=![];return devices[_0x23a0ef][_0x233f3f(0x1dc)]&&devices[_0x23a0ef][_0x233f3f(0x1dc)][_0x233f3f(0x220)]!=_0x233f3f(0x1f8)&&(_0x21ccfc=devices[_0x23a0ef]['telegram2FaApproval'][_0x233f3f(0xc1)]==devices[_0x23a0ef]['ip']&&new Date()[_0x233f3f(0x16c)]()-devices[_0x23a0ef][_0x233f3f(0x1dc)][_0x233f3f(0x121)]<devices[_0x23a0ef]['telegram2FaApproval'][_0x233f3f(0x220)]*0x3c*0x3e8),_0x21ccfc;},normalizeIP=_0x5d051b=>{const _0x3ee605=_0x2d7b50;let _0x2b5cc7=null,_0x2bcf02=null;if(ipaddr['isValid'](_0x5d051b)){const _0x57ddbb=ipaddr[_0x3ee605(0x1e5)](_0x5d051b);_0x57ddbb[_0x3ee605(0xb0)]()===_0x3ee605(0x1a5)?(_0x57ddbb[_0x3ee605(0x1a6)]()&&(_0x2b5cc7=_0x57ddbb[_0x3ee605(0x1cd)]()[_0x3ee605(0x209)]()),_0x2bcf02=_0x57ddbb['toString']()):(_0x2b5cc7=_0x57ddbb['toString'](),_0x2bcf02=_0x57ddbb[_0x3ee605(0x13f)]()[_0x3ee605(0x209)]());}return{'show':_0x2b5cc7?_0x2b5cc7:_0x2bcf02,'store':_0x2bcf02};};function sleep(_0x5e2697){return new Promise(_0x143509=>setTimeout(_0x143509,_0x5e2697));}