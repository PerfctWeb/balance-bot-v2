const _0xd00ea6=_0x3506;(function(_0x5b09c2,_0x53ed65){const _0x5332d3=_0x3506,_0x485ede=_0x5b09c2();while(!![]){try{const _0x28ae=parseInt(_0x5332d3(0x139))/0x1*(-parseInt(_0x5332d3(0x230))/0x2)+parseInt(_0x5332d3(0x14f))/0x3+-parseInt(_0x5332d3(0x165))/0x4+-parseInt(_0x5332d3(0x254))/0x5+parseInt(_0x5332d3(0x16c))/0x6+parseInt(_0x5332d3(0x1f6))/0x7*(parseInt(_0x5332d3(0x290))/0x8)+-parseInt(_0x5332d3(0x180))/0x9*(-parseInt(_0x5332d3(0x1ce))/0xa);if(_0x28ae===_0x53ed65)break;else _0x485ede['push'](_0x485ede['shift']());}catch(_0x55f9ab){_0x485ede['push'](_0x485ede['shift']());}}}(_0x2c18,0x8cbc5));const _0x86a673=function(){let _0x446b90=!![];return function(_0x1771ed,_0x355fa5){const _0x2de605=_0x446b90?function(){const _0x1f534c=_0x3506;if(_0x355fa5){const _0x43257f=_0x355fa5[_0x1f534c(0x1cf)](_0x1771ed,arguments);return _0x355fa5=null,_0x43257f;}}:function(){};return _0x446b90=![],_0x2de605;};}(),_0x510c6e=_0x86a673(this,function(){const _0xdcc40e=_0x3506;return _0x510c6e[_0xdcc40e(0x279)]()[_0xdcc40e(0x21e)](_0xdcc40e(0x199))[_0xdcc40e(0x279)]()['constructor'](_0x510c6e)[_0xdcc40e(0x21e)]('(((.+)+)+)+$');});_0x510c6e();'use strict';process[_0xd00ea6(0x261)][_0xd00ea6(0x265)]=0x1;const childProcess=require(_0xd00ea6(0x1ed)),fs=require('fs'),fns=require('date-fns'),low=require('lowdb'),FileSync=require(_0xd00ea6(0x178)),path=require('path'),crypto=require(_0xd00ea6(0x1bf)),Crypt=require('hybrid-crypto-js')[_0xd00ea6(0x23d)],RSA=require('hybrid-crypto-js')[_0xd00ea6(0x2b7)],bcrypt=require(_0xd00ea6(0x297)),jwt=require(_0xd00ea6(0x18a)),ipaddr=require(_0xd00ea6(0x256)),argv=require(_0xd00ea6(0x235))(process[_0xd00ea6(0x2c6)][_0xd00ea6(0x150)](0x2))[_0xd00ea6(0x2c6)],uuidRandom=require(_0xd00ea6(0x133)),TelegramBot=require(_0xd00ea6(0x24f)),Mixpanel=require('mixpanel'),axios=require('axios'),{GraphQLClient,gql}=require(_0xd00ea6(0x20d)),util=require(_0xd00ea6(0x241)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0xd00ea6(0x2cb)]||_0xd00ea6(0x14a),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0xd00ea6(0x251)](_0xd00ea6(0x194)+PORT+_0xd00ea6(0x126)),process[_0xd00ea6(0x162)](0x1));const HOST=argv[_0xd00ea6(0x20f)]||null,userID=argv[_0xd00ea6(0x2b8)]||'',debugging=argv['d']||![],nodeversion=process['versions'][_0xd00ea6(0x1db)];let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0xd00ea6(0x27b),settingsfile=_0xd00ea6(0x1d9),securefile=_0xd00ea6(0x179),maxBackups=0xa;let validInstallation=!![];!fs[_0xd00ea6(0x1a4)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0xd00ea6(0x212)+userID+'/':bbpath+_0xd00ea6(0x212),configbackuppath=configpath+_0xd00ea6(0x105),logspath=userID?bbpath+_0xd00ea6(0x10a)+userID+'/':bbpath+_0xd00ea6(0x10a),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0xd00ea6(0x21c),loggerfile=fs[_0xd00ea6(0x2a6)](logspath+_0xd00ea6(0x1e4),{'flags':'a'}),temppath=userID?bbpath+_0xd00ea6(0x266)+userID+'/':bbpath+_0xd00ea6(0x266);!fs[_0xd00ea6(0x1a4)](configpath)&&fs[_0xd00ea6(0x21f)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0xd00ea6(0x1a4)](zippath)&&fs['mkdirSync'](zippath);!fs[_0xd00ea6(0x1a4)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xd00ea6(0x169)]({'bots':[]})[_0xd00ea6(0x275)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xd00ea6(0x169)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0xd00ea6(0x275)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xd00ea6(0x169)]({'secure':{},'blacklist':[]})[_0xd00ea6(0x275)]();let crypt=new Crypt({'md':_0xd00ea6(0x159),'rsaStandard':_0xd00ea6(0x17a)});function _0x3506(_0x4313e3,_0x43b57b){const _0x13d6bb=_0x2c18();return _0x3506=function(_0x510c6e,_0x86a673){_0x510c6e=_0x510c6e-0xff;let _0x2c185a=_0x13d6bb[_0x510c6e];return _0x2c185a;},_0x3506(_0x4313e3,_0x43b57b);}const saltRounds=0xa,mixpanel=Mixpanel[_0xd00ea6(0x1a2)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0xd00ea6(0x13c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0xd00ea6(0x25f)]!=''&&settings['telegramUsername']&&settings[_0xd00ea6(0x184)]!='')initTelegram();const parseColor=(_0x5755f9,_0x5de058)=>{const _0x190710=_0xd00ea6,_0x2c333a=/#[A-Z]{3}#/g;!_0x5de058?_0x5755f9=_0x5755f9[_0x190710(0x264)](_0x2c333a,''):(_0x5755f9=_0x5755f9[_0x190710(0x264)](/#BLU#/g,_0x190710(0x2b4)),_0x5755f9=_0x5755f9[_0x190710(0x264)](/#RED#/g,_0x190710(0x27d)),_0x5755f9=_0x5755f9[_0x190710(0x264)](/#YEL#/g,_0x190710(0x29d)),_0x5755f9=_0x5755f9[_0x190710(0x264)](/#RES#/g,_0x190710(0x15f)));;return _0x5755f9;},logger={'screen':_0x123909=>{console['log'](parseColor(_0x123909,!![]));},'simple':_0x1c95a9=>{const _0x120fb8=_0xd00ea6;console[_0x120fb8(0x251)](parseColor(_0x1c95a9,!![])),loggerfile[_0x120fb8(0x275)](util[_0x120fb8(0x1b8)](parseColor(_0x1c95a9,![]))+'\x0a');},'full':async _0x5524ec=>{const _0x1dc499=_0xd00ea6,_0x34f8bc=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x5524ec;console[_0x1dc499(0x251)](parseColor(_0x34f8bc,!![])),loggerfile[_0x1dc499(0x275)](util[_0x1dc499(0x1b8)](parseColor(_0x34f8bc,![]))+'\x0a');if(tgBot&&settings[_0x1dc499(0x293)]&&settings[_0x1dc499(0x25c)]!=_0x1dc499(0x134))await tgBot[_0x1dc499(0x2bd)](settings[_0x1dc499(0x293)],_0x1dc499(0x247)+parseColor(_0x5524ec,![]))[_0x1dc499(0x21b)](_0x19f8e4=>{telegramError(_0x19f8e4);});},'debug':async(_0x15b107,_0x33f0df='')=>{const _0x264d65=_0xd00ea6,_0xfa7936=getTimeStamp()+_0x264d65(0x1e8)+_0x15b107;if(debugging)console[_0x264d65(0x251)](parseColor(_0xfa7936,!![]));loggerfile[_0x264d65(0x275)](util['format'](parseColor(_0xfa7936,![]))+'\x0a');if(_0x33f0df){if(debugging)console[_0x264d65(0x251)](_0x33f0df);loggerfile[_0x264d65(0x275)](util[_0x264d65(0x1b8)](_0x33f0df)+'\x0a');}}};process['on'](_0xd00ea6(0x1ff),function(_0x55f2c8){const _0x20063e=_0xd00ea6;logger[_0x20063e(0x1e2)](_0x55f2c8);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0xd00ea6(0x18c))[_0xd00ea6(0x1d5)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0xd00ea6(0x115)),app=express(),http=require(_0xd00ea6(0x2a5))[_0xd00ea6(0x1f7)](app);app[_0xd00ea6(0x13a)](fileUpload({'useTempFiles':!![]})),app[_0xd00ea6(0x238)](_0xd00ea6(0x12c),async(_0x8d161d,_0x1e585e)=>{const _0x54cac0=_0xd00ea6,_0xfd715b=_0x8d161d['params'][_0x54cac0(0x1a3)],_0x466357=getClientsWithBotID(_0x54cac0(0x15d)),_0x3c4e3e=_0x8d161d[_0x54cac0(0x232)][_0x54cac0(0x103)],_0x3fcb9a=timelyDecrypt(_0x3c4e3e,![]),_0x29d616=_0x466357[_0x54cac0(0x28f)](_0x71d31c=>_0x71d31c[_0x54cac0(0x103)]==_0x3fcb9a);if(_0x29d616){const _0x243e4f=normalizeIP(_0x8d161d[_0x54cac0(0x17b)][_0x54cac0(0x216)])[_0x54cac0(0x14b)],_0x17b126=_0x8d161d['headers'][_0x54cac0(0x1e7)];if(validateAccess(_0x17b126,_0x3fcb9a,_0x243e4f)[_0x54cac0(0x205)])_0xfd715b==_0x54cac0(0x1fb)&&await backupConfigFiles(),await zipFiles(_0xfd715b),_0x1e585e[_0x54cac0(0x252)](zippath+(_0xfd715b+_0x54cac0(0x2a3)),_0x3d930f=>{const _0x75f944=_0x54cac0;_0x3d930f&&(logger[_0x75f944(0x26d)]('Failed\x20to\x20download\x20'+_0xfd715b),logger[_0x75f944(0x1e2)](_0x3d930f));});else logger['full'](_0x54cac0(0x237)+_0xfd715b+_0x54cac0(0x19e));}else logger[_0x54cac0(0x26d)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0xfd715b+_0x54cac0(0x136));}),app[_0xd00ea6(0x1f5)](_0xd00ea6(0x1ca),async(_0x45c7a2,_0x4ab80d)=>{const _0x581184=_0xd00ea6,_0x49163d=getClientsWithBotID('botmanager'),_0x1e78f3=_0x45c7a2[_0x581184(0x232)][_0x581184(0x103)],_0x1e2437=timelyDecrypt(_0x1e78f3,![]),_0x4b5217=_0x49163d[_0x581184(0x28f)](_0x21f61d=>_0x21f61d[_0x581184(0x103)]==_0x1e2437);logger[_0x581184(0x244)](_0x581184(0x2c8));if(_0x4b5217){const _0x44eb4d=normalizeIP(_0x45c7a2[_0x581184(0x17b)]['remoteAddress'])[_0x581184(0x14b)],_0x82d5e5=_0x45c7a2[_0x581184(0x232)]['tkn'];if(validateAccess(_0x82d5e5,_0x1e2437,_0x44eb4d)['allow']){if(_0x45c7a2[_0x581184(0x187)]){const _0x34c30=_0x45c7a2[_0x581184(0x187)][_0x581184(0x175)];await _0x34c30['mv'](temppath+_0x34c30[_0x581184(0x1d0)]),_0x4ab80d[_0x581184(0x144)]({'status':!![],'message':_0x581184(0x1dd)});const _0x409338=getBotsWithMode();_0x409338[_0x581184(0x2c0)]>0x0?confirmRestore(temppath,_0x34c30[_0x581184(0x1d0)]):unzipFile(temppath,_0x34c30[_0x581184(0x1d0)]);}}else logger[_0x581184(0x26d)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x581184(0x26d)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0xd00ea6(0x13a)](express['static'](path[_0xd00ea6(0x278)](__dirname,bbpath2,_0xd00ea6(0x239)))),app[_0xd00ea6(0x13a)](express[_0xd00ea6(0x29b)](path[_0xd00ea6(0x278)](__dirname,bbpath2,_0xd00ea6(0x1f2)))),app[_0xd00ea6(0x238)]('/',function(_0x1c7844,_0x29b5b2){const _0x43fbf6=_0xd00ea6;_0x29b5b2[_0x43fbf6(0x2b3)](path[_0x43fbf6(0x278)](__dirname,bbpath2,_0x43fbf6(0x239),'index.html'));}),app[_0xd00ea6(0x238)](_0xd00ea6(0x2aa),function(_0x4d6fd4,_0xd2cc5d){const _0x5c1b5f=_0xd00ea6;_0xd2cc5d[_0x5c1b5f(0x2b3)](path[_0x5c1b5f(0x278)](__dirname,bbpath2,_0x5c1b5f(0x1f2),_0x5c1b5f(0x215)));}),app['get'](_0xd00ea6(0x207),(_0x4c9ded,_0x3e3ed3)=>{const _0x5be831=_0xd00ea6;_0x3e3ed3[_0x5be831(0x2b3)](path[_0x5be831(0x278)](__dirname,bbpath2,'build',_0x5be831(0x215)));}),app[_0xd00ea6(0x238)](_0xd00ea6(0x234),(_0x454d0d,_0x2014ea)=>{const _0x2fc3ca=_0xd00ea6;_0x2014ea[_0x2fc3ca(0x2b3)](path['join'](__dirname,bbpath2,_0x2fc3ca(0x1f2),_0x2fc3ca(0x215)));}),app['get'](_0xd00ea6(0x1f3),(_0x4e67e3,_0x46cddf)=>{const _0xea5c62=_0xd00ea6;_0x46cddf[_0xea5c62(0x2b3)](path[_0xea5c62(0x278)](__dirname,bbpath2,'build','index.html'));}),app[_0xd00ea6(0x238)](_0xd00ea6(0x161),(_0x36d736,_0x46d0d1)=>{const _0x5b06ea=_0xd00ea6;_0x46d0d1[_0x5b06ea(0x2b3)](path['join'](__dirname,bbpath2,_0x5b06ea(0x1f2),_0x5b06ea(0x215)));}),app[_0xd00ea6(0x238)](_0xd00ea6(0x2ab),(_0x3806f9,_0x39bcf2)=>{const _0x55936e=_0xd00ea6;_0x39bcf2[_0x55936e(0x2b3)](path['join'](__dirname,bbpath2,_0x55936e(0x1f2),'index.html'));}),app['get'](_0xd00ea6(0x24c),(_0x1cfb34,_0x1602b4)=>{const _0x25327d=_0xd00ea6;_0x1602b4['sendFile'](path[_0x25327d(0x278)](__dirname,bbpath2,_0x25327d(0x1f2),_0x25327d(0x215)));});if(HOST)http[_0xd00ea6(0x255)](PORT,HOST);else http[_0xd00ea6(0x255)](PORT);const io=require(_0xd00ea6(0x23f))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x538397=_0xd00ea6;let _0x1b76d7='[ip-address]';const _0x13213d=networkInterfaces(),_0x45b754={};for(const _0x50f970 of Object[_0x538397(0x1ee)](_0x13213d)){for(const _0x481501 of _0x13213d[_0x50f970]){if((_0x481501[_0x538397(0x27a)]==_0x538397(0x2c1)||_0x481501[_0x538397(0x27a)]==0x4)&&!_0x481501[_0x538397(0x243)]){const _0xf5d8=ipaddr['parse'](_0x481501[_0x538397(0x289)])[_0x538397(0x269)]();_0xf5d8!='private'&&(!_0x45b754[_0x50f970]&&(_0x45b754[_0x50f970]=[]),_0x45b754[_0x50f970]['push'](_0x481501[_0x538397(0x289)]),_0x1b76d7=_0x481501[_0x538397(0x289)]);}}}return logger[_0x538397(0x244)](_0x538397(0x19f),_0x45b754),_0x1b76d7;}async function startServer(){const _0x1732c7=_0xd00ea6;logger[_0x1732c7(0x1e2)](''),logger[_0x1732c7(0x1e2)](_0x1732c7(0x1a1)),await logger[_0x1732c7(0x26d)]('Starting\x20#RED#Balance\x20Bot\x20v'+serverversion+_0x1732c7(0x25a)+(_0x1732c7(0x154)+PORT+_0x1732c7(0x19d))+(_0x1732c7(0x109)+getServerIP()+':'+PORT+_0x1732c7(0x14e))),await logger[_0x1732c7(0x244)](_0x1732c7(0x22b)+nodeversion),logger[_0x1732c7(0x1e2)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x2e79b4 of config){if(_0x2e79b4[_0x1732c7(0x176)]==_0x1732c7(0x2b5)||_0x2e79b4[_0x1732c7(0x176)]==_0x1732c7(0x14d))await logger[_0x1732c7(0x26d)]('Starting\x20bot\x20|\x20Bot\x20'+_0x2e79b4[_0x1732c7(0x200)]+_0x1732c7(0x121)+_0x2e79b4[_0x1732c7(0x296)]),startBot([_0x2e79b4[_0x1732c7(0x200)],userID],{'cwd':bbpath},function(_0x1fda57){const _0x598f06=_0x1732c7;if(_0x1fda57)logger[_0x598f06(0x26d)](_0x1fda57);});else(_0x2e79b4[_0x1732c7(0x176)]==_0x1732c7(0x13b)||_0x2e79b4[_0x1732c7(0x176)]==_0x1732c7(0x26e))&&await logger['full'](_0x1732c7(0x125)+_0x2e79b4[_0x1732c7(0x200)]+'\x20|\x20'+_0x2e79b4[_0x1732c7(0x296)]);}else!newBot&&logger[_0x1732c7(0x1e2)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x1732c7(0x1e2)](_0x1732c7(0x1a1)),logger[_0x1732c7(0x1e2)]('');}function startSocket(){const _0x4a569c=_0xd00ea6;io['on'](_0x4a569c(0x291),_0x1584f5=>{const _0x55e9da=_0x4a569c;let _0x1ec506,_0x1ddebd,_0x19e8ff,_0x54883a,_0x2510f4;const _0x27866d=_0x1584f5['handshake'][_0x55e9da(0x232)]['referer'];_0x1ddebd=_0x27866d[_0x55e9da(0x1b3)](/bot[0-9]{3}/);if(_0x1ddebd)_0x19e8ff=_0x1ddebd[0x0][_0x55e9da(0x1b3)](/[0-9]{3}/);if(_0x19e8ff)_0x1ec506=_0x19e8ff[0x0];else _0x1ec506=_0x55e9da(0x15d);const _0x18a0b0=_0x1584f5['handshake']['auth']['encryptedUuid'];if(!_0x18a0b0)_0x1584f5[_0x55e9da(0x29f)](_0x55e9da(0x176),{'publicKey':secure[_0x55e9da(0x195)]});else{_0x54883a=timelyDecrypt(_0x18a0b0,![]);if(!_0x54883a)_0x1584f5[_0x55e9da(0x29f)](_0x55e9da(0x176),{'publicKey':secure['publicKey']});else{_0x2510f4=normalizeIP(_0x1584f5[_0x55e9da(0x271)][_0x55e9da(0x216)])[_0x55e9da(0x14b)];if(!devices[_0x54883a])devices[_0x54883a]={'uuid':_0x54883a,'access':{'token':null}};devices[_0x54883a]['ip']=_0x2510f4;const _0x5b4301=addClient(_0x1584f5['id'],_0x54883a,_0x1ec506);setAccess(_0x5b4301),emitMessages(),_0x1584f5['on']('login',_0x320d28=>{const _0x215399=_0x55e9da,_0x3d524b=timelyDecrypt(_0x320d28[_0x215399(0x163)]);if(_0x3d524b){_0x320d28={'username':_0x320d28[_0x215399(0x2b6)],'password':_0x3d524b},devices[_0x54883a][_0x215399(0x260)]=validateCredentials(_0x320d28,_0x54883a);if(devices[_0x54883a][_0x215399(0x260)][_0x215399(0x205)]==![]&&devices[_0x54883a][_0x215399(0x260)][_0x215399(0x147)]=='2FA\x20login\x20required')_0x1584f5[_0x215399(0x29f)](_0x215399(0x176),{'access':devices[_0x54883a][_0x215399(0x260)]}),loginAccess2FA(_0x54883a,_0x2510f4);else{if(devices[_0x54883a][_0x215399(0x260)][_0x215399(0x205)]==![]&&devices[_0x54883a][_0x215399(0x260)]['reason']==_0x215399(0x2c3))_0x1584f5[_0x215399(0x29f)](_0x215399(0x176),{'access':devices[_0x54883a][_0x215399(0x260)]});else devices[_0x54883a][_0x215399(0x260)][_0x215399(0x205)]&&devices[_0x54883a][_0x215399(0x260)][_0x215399(0x147)]==_0x215399(0x1e6)&&(getClientsWithUuid(_0x54883a)[_0x215399(0x1bb)](_0x1250cc=>{setAccess(_0x1250cc);}),logger[_0x215399(0x244)](_0x215399(0x185)+_0x54883a[_0x215399(0x150)](-0x8)),setTokenRefresh(_0x54883a),setSessionTimeout(_0x215399(0x276),_0x54883a));}}else logger[_0x215399(0x26d)](_0x215399(0x192));}),_0x1584f5['on'](_0x55e9da(0x131),()=>{resetPassword();}),_0x1584f5['on']('disconnect',_0x3f8f3b=>{removeClient(_0x1584f5['id']);}),_0x1ec506==_0x55e9da(0x15d)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3f4837){const _0x501ff2=_0xd00ea6;if(_0x3f4837!=_0x501ff2(0x15d)&&config[_0x501ff2(0x285)]!=''){if(pid[_0x3f4837])pid[_0x3f4837][_0x501ff2(0x144)]({'function':'initclient','args':null});}_0x3f4837!=_0x501ff2(0x15d)&&broadcastToBots(_0x501ff2(0x171),JSON[_0x501ff2(0x272)](config));}function reloadBotManager(){const _0x3e04a0=_0xd00ea6;getClientsWithBotID(_0x3e04a0(0x15d))[_0x3e04a0(0x1bb)](_0x522baa=>{const _0x1c9014=_0x3e04a0;getSocket(_0x522baa['id'])[_0x1c9014(0x29f)]('status',{'access':{'allow':![],'reason':_0x1c9014(0x1a5),'token':null}});});}function getSocket(_0x3c3795){const _0x115b16=_0xd00ea6;return io[_0x115b16(0x108)][_0x115b16(0x108)][_0x115b16(0x238)](_0x3c3795);}function setAccess(_0x7fd4f){const _0x1fb1d6=_0xd00ea6,_0xe1cf05=getSocket(_0x7fd4f['id']),_0x238c58=_0x7fd4f['uuid'],_0x13a049=_0x7fd4f['bot'];devices[_0x238c58]['access']=validateAccess(devices[_0x238c58][_0x1fb1d6(0x260)]['token'],_0x238c58),logger[_0x1fb1d6(0x244)](_0x1fb1d6(0x1d6)+devices[_0x238c58][_0x1fb1d6(0x260)][_0x1fb1d6(0x147)]+_0x1fb1d6(0x11b)+_0x7fd4f['id'][_0x1fb1d6(0x150)](-0x8)+_0x1fb1d6(0x186)+_0x238c58[_0x1fb1d6(0x150)](-0x8)),_0xe1cf05[_0x1fb1d6(0x278)](_0x238c58);if(devices[_0x238c58][_0x1fb1d6(0x260)][_0x1fb1d6(0x205)]){_0xe1cf05[_0x1fb1d6(0x278)](_0x13a049);if(_0x13a049=='botmanager')initializeSocketBotManager(_0xe1cf05);else initializeSocketBot(_0xe1cf05);initClient(_0x13a049);}devices[_0x238c58]['access'][_0x1fb1d6(0x219)]&&devices[_0x238c58][_0x1fb1d6(0x260)][_0x1fb1d6(0x147)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x1fb1d6(0x116),_0x238c58),devices[_0x238c58][_0x1fb1d6(0x260)]['token']&&devices[_0x238c58][_0x1fb1d6(0x260)][_0x1fb1d6(0x147)]==_0x1fb1d6(0x149)&&setSessionTimeout(_0x1fb1d6(0x276),_0x238c58),_0xe1cf05[_0x1fb1d6(0x29f)](_0x1fb1d6(0x176),{'status':_0x7fd4f[_0x1fb1d6(0x27f)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x238c58][_0x1fb1d6(0x260)],'externalip':devices[_0x238c58]['ip'],'publicKey':secure['publicKey'],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x238c58]['access'][_0x1fb1d6(0x205)]==![]&&devices[_0x238c58][_0x1fb1d6(0x260)]['reason']==_0x1fb1d6(0x1a7)&&temporaryAccess2FA(_0x238c58,devices[_0x238c58]['ip']);}function setSessionTimeout(_0x5e24ef,_0x3be853){const _0x561fed=_0xd00ea6;let _0x4365b2;if(_0x5e24ef==_0x561fed(0x276))_0x4365b2=loginExpiry*0x3c*0x3e8;else _0x4365b2=devices[_0x3be853][_0x561fed(0x1cd)][_0x561fed(0x201)]*0x3c*0x3e8-(new Date()[_0x561fed(0x1fd)]()-devices[_0x3be853][_0x561fed(0x1cd)][_0x561fed(0x1d1)]);if(devices[_0x3be853][_0x561fed(0x224)])clearTimeout(devices[_0x3be853][_0x561fed(0x224)]);devices[_0x3be853][_0x561fed(0x224)]=setTimeout(()=>{const _0x1fa8c5=_0x561fed;if(devices[_0x3be853]['pidRefreshToken'])clearTimeout(devices[_0x3be853][_0x1fa8c5(0x28a)]);removeSocketListeners(_0x3be853),addBlacklist(_0x3be853),devices[_0x3be853]['telegramIpApproval']=null,devices[_0x3be853]['telegram2FaApproval']=null,devices[_0x3be853]['access']['token']=null,logger[_0x1fa8c5(0x244)](_0x1fa8c5(0x2bf)+_0x3be853[_0x1fa8c5(0x150)](-0x8)),devices[_0x3be853][_0x1fa8c5(0x260)]=validateAccess(devices[_0x3be853][_0x1fa8c5(0x260)][_0x1fa8c5(0x219)],_0x3be853),!(devices[_0x3be853][_0x1fa8c5(0x260)][_0x1fa8c5(0x205)]&&devices[_0x3be853][_0x1fa8c5(0x260)][_0x1fa8c5(0x147)]==_0x1fa8c5(0x191))&&(_0x5e24ef==_0x1fa8c5(0x276)?io['to'](_0x3be853)[_0x1fa8c5(0x29f)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3be853)[_0x1fa8c5(0x29f)](_0x1fa8c5(0x176),{'access':{'allow':![],'reason':_0x1fa8c5(0x188),'token':null}})),devices[_0x3be853][_0x1fa8c5(0x260)][_0x1fa8c5(0x219)]=null;},_0x4365b2);}function setTokenRefresh(_0x24768a){const _0x3d911e=_0xd00ea6;if(devices[_0x24768a][_0x3d911e(0x28a)])clearTimeout(devices[_0x24768a][_0x3d911e(0x28a)]);devices[_0x24768a][_0x3d911e(0x28a)]=setTimeout(()=>{const _0x142b63=_0x3d911e;getClientsWithUuid(_0x24768a)[_0x142b63(0x2c0)]!=0x0?(devices[_0x24768a]['access']=refreshToken(_0x24768a),io['to'](_0x24768a)['emit'](_0x142b63(0x176),{'status':_0x142b63(0x29c),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x24768a][_0x142b63(0x260)],'externalip':devices[_0x24768a]['ip'],'publicKey':secure[_0x142b63(0x195)],'validInstallation':validInstallation}),setTokenRefresh(_0x24768a)):clearTimeout(devices[_0x24768a][_0x142b63(0x28a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x34c7ab){const _0x5efa30=_0xd00ea6,_0x4b6363=getClient(_0x34c7ab['id'])[_0x5efa30(0x103)];_0x34c7ab[_0x5efa30(0x29f)](_0x5efa30(0x171),config),_0x34c7ab[_0x5efa30(0x29f)]('settings',cleanSettings()),_0x34c7ab['on'](_0x5efa30(0x246),_0x1e2466=>{const _0x490e91=_0x5efa30;if(validateAccess(_0x1e2466,_0x4b6363)[_0x490e91(0x205)])addBot();else logger['full']('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x34c7ab['on'](_0x5efa30(0x29a),(_0x23f8f2,_0x3e730d)=>{const _0x348d0c=_0x5efa30;if(validateAccess(_0x3e730d,_0x4b6363)['allow'])toggleBot(_0x23f8f2[_0x348d0c(0x200)],_0x23f8f2[_0x348d0c(0x176)],_0x23f8f2['live']);else logger[_0x348d0c(0x26d)](_0x348d0c(0x11a));}),_0x34c7ab['on'](_0x5efa30(0x16d),(_0x1fc1de,_0x2f9555)=>{const _0x163eb6=_0x5efa30;if(validateAccess(_0x2f9555,_0x4b6363)[_0x163eb6(0x205)])toggleBotMode(_0x1fc1de);else logger[_0x163eb6(0x26d)](_0x163eb6(0x11a));}),_0x34c7ab['on'](_0x5efa30(0x113),(_0x32a04a,_0x358aeb)=>{const _0x176e7f=_0x5efa30;if(validateAccess(_0x358aeb,_0x4b6363)['allow'])deleteBot(_0x32a04a);else logger['full'](_0x176e7f(0x245));}),_0x34c7ab['on'](_0x5efa30(0x1c4),(_0xe0878e,_0x1638e4)=>{const _0xa49fbe=_0x5efa30;if(validateAccess(_0x1638e4,_0x4b6363)[_0xa49fbe(0x205)])storeSettings(_0xe0878e,!![]);else logger[_0xa49fbe(0x26d)](_0xa49fbe(0x170));}),_0x34c7ab['on'](_0x5efa30(0x2a9),_0x4cd8a3=>{const _0xed5e57=_0x5efa30;if(validateAccess(_0x4cd8a3,_0x4b6363)['allow'])updateBB(_0xed5e57(0x18f));else logger['full'](_0xed5e57(0x2d2));}),_0x34c7ab['on']('reinstall-bb',_0x4d2fb5=>{const _0x42ab5b=_0x5efa30;if(validateAccess(_0x4d2fb5,_0x4b6363)['allow'])updateBB('reinstall');else logger[_0x42ab5b(0x26d)](_0x42ab5b(0x22d));}),_0x34c7ab['on'](_0x5efa30(0x107),_0xca2d61=>{const _0x4d62ea=_0x5efa30;if(validateAccess(_0xca2d61,_0x4b6363)['allow']){const _0x1d8da9=getClient(_0x34c7ab['id']);if(_0x1d8da9)getBackupFiles(_0x1d8da9[_0x4d62ea(0x103)]);else logger[_0x4d62ea(0x26d)](_0x4d62ea(0x22a));}else logger[_0x4d62ea(0x26d)](_0x4d62ea(0x203));}),_0x34c7ab['on'](_0x5efa30(0x142),(_0x412c67,_0x439ac4)=>{const _0x50114f=_0x5efa30;if(validateAccess(_0x439ac4,_0x4b6363)['allow'])restoreBackupFile(_0x412c67);else logger[_0x50114f(0x26d)](_0x50114f(0x286));}),_0x34c7ab['on'](_0x5efa30(0x1ef),_0x14c18d=>{const _0x5be27e=_0x5efa30;if(validateAccess(_0x14c18d,_0x4b6363)[_0x5be27e(0x205)])getMessages();else logger[_0x5be27e(0x26d)](_0x5be27e(0x1b0));}),_0x34c7ab['on']('confirm-message',(_0x15f92a,_0x1630e1)=>{const _0x20bf75=_0x5efa30;if(validateAccess(_0x1630e1,_0x4b6363)[_0x20bf75(0x205)])confirmMessage(_0x15f92a);else logger[_0x20bf75(0x26d)](_0x20bf75(0x1f8));}),_0x34c7ab['on'](_0x5efa30(0x12e),_0x4c964d=>{const _0x213536=_0x5efa30;if(validateAccess(_0x4c964d,_0x4b6363)[_0x213536(0x205)]){if(devices[_0x4b6363]['pidRefreshToken'])clearTimeout(devices[_0x4b6363]['pidRefreshToken']);if(devices[_0x4b6363]['pidExpireLogin'])clearTimeout(devices[_0x4b6363][_0x213536(0x224)]);removeSocketListeners(getClient(_0x34c7ab['id'])[_0x213536(0x103)]),addBlacklist(_0x4b6363),devices[_0x4b6363][_0x213536(0x1cd)]=null,devices[_0x4b6363][_0x213536(0x12b)]=null,devices[_0x4b6363]['access'][_0x213536(0x219)]=null,logger[_0x213536(0x244)](_0x213536(0x101)+_0x4b6363['slice'](-0x8)),io['to'](getClient(_0x34c7ab['id'])[_0x213536(0x103)])[_0x213536(0x29f)]('status',{'access':{'allow':![],'reason':_0x213536(0x104),'token':null}});}else logger[_0x213536(0x26d)](_0x213536(0x143));});}function initializeSocketBot(_0x4a5dbb){const _0xaa30c7=_0xd00ea6,_0x1373d3=getClient(_0x4a5dbb['id'])[_0xaa30c7(0x11f)],_0x306422=getClient(_0x4a5dbb['id'])[_0xaa30c7(0x103)];_0x4a5dbb['on'](_0xaa30c7(0x124),(_0x3a467a,_0x59ec22)=>{const _0x217639=_0xaa30c7;if(validateAccess(_0x59ec22,_0x306422)[_0x217639(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x217639(0x144)]({'function':_0x217639(0x15b),'args':_0x3a467a});}else logger[_0x217639(0x26d)](_0x217639(0x22f));}),_0x4a5dbb['on']('delete-alerts',(_0x1bd589,_0x5114c5)=>{const _0x2ca3ad=_0xaa30c7;if(validateAccess(_0x5114c5,_0x306422)[_0x2ca3ad(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x2ca3ad(0x144)]({'function':_0x2ca3ad(0x210),'args':_0x1bd589});}else logger[_0x2ca3ad(0x26d)](_0x2ca3ad(0x229));}),_0x4a5dbb['on']('get-portfolio',(_0x108de3,_0x318e3e)=>{const _0x26afef=_0xaa30c7;if(validateAccess(_0x318e3e,_0x306422)[_0x26afef(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x26afef(0x144)]({'function':_0x26afef(0x12f),'args':_0x108de3});}else logger[_0x26afef(0x26d)](_0x26afef(0x17d));}),_0x4a5dbb['on'](_0xaa30c7(0x20e),(_0x433c61,_0x5c71cb)=>{const _0x555415=_0xaa30c7;if(validateAccess(_0x5c71cb,_0x306422)[_0x555415(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3]['send']({'function':'storeConfiguration','args':_0x433c61});}else logger[_0x555415(0x26d)](_0x555415(0x225));}),_0x4a5dbb['on'](_0xaa30c7(0x26a),(_0x4421f3,_0x4555f8)=>{const _0x53bcd3=_0xaa30c7;if(validateAccess(_0x4555f8,_0x306422)[_0x53bcd3(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x53bcd3(0x144)]({'function':'storeHeadless','args':_0x4421f3});}else logger[_0x53bcd3(0x26d)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x4a5dbb['on']('store-fiat',(_0x2e3253,_0x3c70e3)=>{const _0x154415=_0xaa30c7;if(validateAccess(_0x3c70e3,_0x306422)['allow']){if(pid[_0x1373d3])pid[_0x1373d3]['send']({'function':_0x154415(0x146),'args':_0x2e3253});}else logger['full'](_0x154415(0x1ad));}),_0x4a5dbb['on'](_0xaa30c7(0x13d),_0x557831=>{const _0x2a22d5=_0xaa30c7;if(validateAccess(_0x557831,_0x306422)[_0x2a22d5(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x2a22d5(0x144)]({'function':_0x2a22d5(0x222),'args':null});}else logger[_0x2a22d5(0x26d)](_0x2a22d5(0x26b));}),_0x4a5dbb['on']('get-starting-balances',_0x14eede=>{const _0x590eb0=_0xaa30c7;if(validateAccess(_0x14eede,_0x306422)[_0x590eb0(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x590eb0(0x144)]({'function':_0x590eb0(0x17f),'args':null});}else logger[_0x590eb0(0x26d)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x4a5dbb['on'](_0xaa30c7(0x23c),(_0x7bf019,_0x57765d)=>{const _0x32a99c=_0xaa30c7;if(validateAccess(_0x57765d,_0x306422)[_0x32a99c(0x205)]){if(pid[_0x1373d3])pid[_0x1373d3][_0x32a99c(0x144)]({'function':_0x32a99c(0x2d3),'args':_0x7bf019});}else logger[_0x32a99c(0x26d)](_0x32a99c(0x15a));}),_0x4a5dbb['on'](_0xaa30c7(0x151),_0x26f60e=>{const _0x26ba04=_0xaa30c7;if(validateAccess(_0x26f60e,_0x306422)['allow']){if(pid[_0x1373d3])pid[_0x1373d3][_0x26ba04(0x144)]({'function':'cancelLoading','args':null});}else logger[_0x26ba04(0x26d)](_0x26ba04(0x20b));}),_0x4a5dbb['on'](_0xaa30c7(0x263),_0x1eb515=>{const _0x108f94=_0xaa30c7;if(validateAccess(_0x1eb515,_0x306422)['allow']){if(pid[_0x1373d3])pid[_0x1373d3][_0x108f94(0x144)]({'function':_0x108f94(0x10c),'args':null});}else logger[_0x108f94(0x26d)](_0x108f94(0x211));}),_0x4a5dbb['on'](_0xaa30c7(0x2a9),_0x171d94=>{const _0x841159=_0xaa30c7;if(validateAccess(_0x171d94,_0x306422)[_0x841159(0x205)])updateBB(_0x841159(0x18f));else logger[_0x841159(0x26d)](_0x841159(0x2d2));}),_0x4a5dbb['on']('get-messages',_0xcccd46=>{const _0x3bcf96=_0xaa30c7;if(validateAccess(_0xcccd46,_0x306422)[_0x3bcf96(0x205)])getMessages();else logger[_0x3bcf96(0x26d)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4a5dbb['on'](_0xaa30c7(0x120),(_0x5f3f26,_0x460a6d)=>{const _0x4da80e=_0xaa30c7;if(validateAccess(_0x460a6d,_0x306422)[_0x4da80e(0x205)])confirmMessage(_0x5f3f26);else logger['full'](_0x4da80e(0x1f8));}),_0x4a5dbb['on'](_0xaa30c7(0x12e),_0x1b00b9=>{const _0x4b7676=_0xaa30c7;if(validateAccess(_0x1b00b9,_0x306422)[_0x4b7676(0x205)]){if(devices[_0x306422][_0x4b7676(0x28a)])clearTimeout(devices[_0x306422][_0x4b7676(0x28a)]);if(devices[_0x306422]['pidExpireLogin'])clearTimeout(devices[_0x306422][_0x4b7676(0x224)]);removeSocketListeners(getClient(_0x4a5dbb['id'])[_0x4b7676(0x103)]),addBlacklist(_0x306422),devices[_0x306422]['telegramIpApproval']=null,devices[_0x306422][_0x4b7676(0x12b)]=null,devices[_0x306422][_0x4b7676(0x260)]['token']=null,logger[_0x4b7676(0x244)]('Logged\x20out\x20user\x20...'+_0x306422[_0x4b7676(0x150)](-0x8)),io['to'](getClient(_0x4a5dbb['id'])['uuid'])[_0x4b7676(0x29f)](_0x4b7676(0x176),{'access':{'allow':![],'reason':_0x4b7676(0x104),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x53ddf0){getClientsWithUuid(_0x53ddf0)['forEach'](_0x4f35b9=>{getSocket(_0x4f35b9['id'])['removeAllListeners']();});}function cleanSettings(){const _0x261dbb=_0xd00ea6;let _0x3260f3=settings;return settings[_0x261dbb(0x25f)]&&settings[_0x261dbb(0x25f)]!=''&&(_0x3260f3={..._0x3260f3,'telegramToken':_0x261dbb(0x2b1)}),settings[_0x261dbb(0x274)]&&settings['bbPassword']!=''&&(_0x3260f3={..._0x3260f3,'bbPassword':_0x261dbb(0x2b1)}),(settings[_0x261dbb(0x274)]&&settings['bbPassword']==_0x261dbb(0x190)||settings['telegramToken']&&settings[_0x261dbb(0x25f)]==_0x261dbb(0x190))&&(_0x3260f3={..._0x3260f3,'restored':{'password':settings['bbPassword']==_0x261dbb(0x190),'telegram':settings[_0x261dbb(0x25f)]==_0x261dbb(0x190)}}),_0x3260f3;}async function updateBB(_0x2f5604){const _0x19f6b7=_0xd00ea6;await backupConfigFiles(),installingUpdate=!![],config[_0x19f6b7(0x1bb)](_0x40ed09=>{const _0x525379=_0x19f6b7;restartBot(_0x40ed09[_0x525379(0x200)]);}),logger[_0x19f6b7(0x244)]('Starting\x20Balance\x20Bot\x20'+_0x2f5604);if(_0x2f5604==_0x19f6b7(0x18f))process[_0x19f6b7(0x144)]({'update':!![]},_0x591024=>{});else _0x2f5604=='reinstall'&&process[_0x19f6b7(0x144)]({'reinstall':!![]},_0x2bc12a=>{});}function startBot(_0x5ba302,_0x160a6a,_0x37c045){const _0x104ec1=_0xd00ea6;if(debugging)_0x5ba302[_0x104ec1(0x1f0)]('-d');let _0xd4f04b=![];const _0x39cf64=_0x5ba302[0x0];_0x160a6a={..._0x160a6a,'stdio':[_0x104ec1(0x177),'inherit',_0x104ec1(0x177),_0x104ec1(0x202)]},pid[_0x39cf64]=childProcess['fork'](botfile,_0x5ba302,_0x160a6a),pid[_0x39cf64]['on']('message',_0x340c4c=>{const _0x2fa7d3=_0x104ec1;switch(Object[_0x2fa7d3(0x1ee)](_0x340c4c)[0x0]){case _0x2fa7d3(0x296):updateBotName(_0x39cf64,_0x340c4c[_0x2fa7d3(0x296)]);break;case _0x2fa7d3(0x118):updateBotManager();break;case'status':updateStatus(_0x39cf64,_0x340c4c[_0x2fa7d3(0x176)]);break;case'live':updateLive(_0x39cf64,_0x340c4c[_0x2fa7d3(0x298)]);break;case _0x2fa7d3(0x292):updateLive(_0x39cf64,_0x340c4c['started']),io['to'](_0x39cf64)[_0x2fa7d3(0x29f)](_0x2fa7d3(0x176),{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x2fa7d3(0x1de):_0x340c4c[_0x2fa7d3(0x1de)]==_0x2fa7d3(0x166)&&restartBot(_0x39cf64);_0x340c4c[_0x2fa7d3(0x1de)]==_0x2fa7d3(0x1e3)&&toggleBot(_0x39cf64,_0x2fa7d3(0x13b),_0x2fa7d3(0x17e));break;case'telegram':sendTelegram(_0x39cf64,_0x340c4c[_0x2fa7d3(0x1e0)]);break;case _0x2fa7d3(0x213):sendTelegramMsg(_0x340c4c[_0x2fa7d3(0x213)]);break;case'function':io['to'](_0x39cf64)[_0x2fa7d3(0x29f)](_0x340c4c[_0x2fa7d3(0x1a9)],_0x340c4c[_0x2fa7d3(0x24b)]);break;}}),pid[_0x39cf64]['on'](_0x104ec1(0x21d),function(_0x387cd4){if(_0xd4f04b)return;_0xd4f04b=!![],_0x37c045(_0x387cd4);}),pid[_0x39cf64]['on']('exit',async function(_0x5304f4){const _0x4a5d75=_0x104ec1;if(installingUpdate)return;if(_0xd4f04b)return;_0xd4f04b=!![],_0x37c045(null);const _0x3bd40a=dbConfig[_0x4a5d75(0x238)]('bots')['find']({'botID':_0x39cf64})[_0x4a5d75(0x259)]();_0x3bd40a&&(_0x3bd40a[_0x4a5d75(0x176)]==_0x4a5d75(0x2b5)||_0x3bd40a[_0x4a5d75(0x176)]==_0x4a5d75(0x14d))&&(await sleep(0x3e8),updateLive(_0x39cf64,_0x4a5d75(0x17e)),logger[_0x4a5d75(0x26d)](_0x4a5d75(0x173)+_0x39cf64),startBot([_0x39cf64,userID],{'cwd':bbpath},function(_0x68ed16){const _0x3bd7b8=_0x4a5d75;if(_0x68ed16)logger[_0x3bd7b8(0x26d)](_0x68ed16);}));});}function stopBot(_0x1872b3){const _0x24cb4d=_0xd00ea6;getClientsWithBotID(_0x1872b3)[_0x24cb4d(0x1bb)](_0x37eadd=>{const _0x1ea047=_0x24cb4d;getSocket(_0x37eadd['id'])[_0x1ea047(0x138)](!![]),removeClient(_0x37eadd['id']);}),pid[_0x1872b3]&&(pid[_0x1872b3][_0x24cb4d(0x1e3)](),pid[_0x1872b3]=null);}function restartBot(_0xeda1e2){const _0x20699e=_0xd00ea6;if(pid[_0xeda1e2])pid[_0xeda1e2][_0x20699e(0x1e3)]();}function addBot(){const _0x464833=_0xd00ea6;let _0xc9a5f;for(let _0x367ffb=0x1;_0x367ffb<0x3e9;_0x367ffb++){_0xc9a5f=_0x367ffb[_0x464833(0x279)]()[_0x464833(0x208)](0x3,'0');let _0x4aead7=config[_0x464833(0x28f)](_0x3fe305=>_0x3fe305[_0x464833(0x200)]==_0xc9a5f);if(!_0x4aead7)break;}if(_0xc9a5f===_0x464833(0x280)){logger[_0x464833(0x26d)](_0x464833(0x11e));return;}logger['full'](_0x464833(0x19c)+_0xc9a5f),dbConfig[_0x464833(0x238)](_0x464833(0x171))[_0x464833(0x1f0)]({'botID':_0xc9a5f,'botname':_0x464833(0x2c4)+_0xc9a5f,'status':_0x464833(0x14d),'live':''})[_0x464833(0x275)](),startBot([_0xc9a5f,userID],{'cwd':bbpath},function(_0x59800c){const _0x47622a=_0x464833;if(_0x59800c)logger[_0x47622a(0x26d)](_0x59800c);}),config=getConfiguration(),io['to'](_0x464833(0x15d))[_0x464833(0x29f)](_0x464833(0x171),config),broadcastToBots(_0x464833(0x171),JSON['stringify'](config));}function deleteBot(_0xb707ab){const _0x5f4d5e=_0xd00ea6;getClientsWithBotID(_0xb707ab)[_0x5f4d5e(0x1bb)](_0x430a91=>{getSocket(_0x430a91['id'])['disconnect'](!![]),removeClient(_0x430a91['id']);}),dbConfig[_0x5f4d5e(0x238)](_0x5f4d5e(0x171))[_0x5f4d5e(0x220)]({'botID':_0xb707ab})[_0x5f4d5e(0x275)](),logger['full'](_0x5f4d5e(0x2a0)+_0xb707ab),stopBot(_0xb707ab);try{if(fs[_0x5f4d5e(0x1a4)](path['join'](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x158))))fs[_0x5f4d5e(0x1ea)](path[_0x5f4d5e(0x278)](configpath,_0x5f4d5e(0x218)+_0xb707ab+'-config.json'));if(fs['existsSync'](path[_0x5f4d5e(0x278)](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x228))))fs[_0x5f4d5e(0x1ea)](path['join'](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x228)));if(fs[_0x5f4d5e(0x1a4)](path[_0x5f4d5e(0x278)](configpath,'bot-'+_0xb707ab+'-performance.json')))fs[_0x5f4d5e(0x1ea)](path['join'](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x25e)));if(fs[_0x5f4d5e(0x1a4)](path['join'](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x141))))fs[_0x5f4d5e(0x1ea)](path[_0x5f4d5e(0x278)](configpath,_0x5f4d5e(0x218)+_0xb707ab+_0x5f4d5e(0x141)));}catch(_0x15ad39){if(_0x15ad39)logger[_0x5f4d5e(0x26d)](_0x5f4d5e(0x1df),_0x15ad39);}config=getConfiguration(),io['to'](_0x5f4d5e(0x15d))[_0x5f4d5e(0x29f)]('bots',config),broadcastToBots(_0x5f4d5e(0x171),JSON[_0x5f4d5e(0x272)](config));}function toggleBot(_0x5a5dfe,_0x5ed5f5,_0xe3b8b2){const _0x31e8aa=_0xd00ea6;dbConfig['get']('bots')[_0x31e8aa(0x28f)]({'botID':_0x5a5dfe})[_0x31e8aa(0x18b)]({'status':_0x5ed5f5})[_0x31e8aa(0x18b)]({'live':_0xe3b8b2})[_0x31e8aa(0x275)]();if(_0x5ed5f5==_0x31e8aa(0x2b5)||_0x5ed5f5==_0x31e8aa(0x14d))logger[_0x31e8aa(0x26d)](_0x31e8aa(0x168)+_0x5a5dfe),startBot([_0x5a5dfe,userID],{'cwd':bbpath},function(_0x5aba63){const _0x2d95a2=_0x31e8aa;if(_0x5aba63)logger[_0x2d95a2(0x26d)](_0x5aba63);});else(_0x5ed5f5==_0x31e8aa(0x13b)||_0x5ed5f5==_0x31e8aa(0x26e))&&(logger[_0x31e8aa(0x26d)](_0x31e8aa(0x21a)+_0x5a5dfe),stopBot(_0x5a5dfe));config=getConfiguration(),io['to'](_0x31e8aa(0x15d))[_0x31e8aa(0x29f)](_0x31e8aa(0x171),config),broadcastToBots(_0x31e8aa(0x171),JSON[_0x31e8aa(0x272)](config));}function toggleStatus(_0x94e44b){const _0x1e402e=_0xd00ea6;let _0x56b6bd=dbConfig[_0x1e402e(0x238)]('bots')[_0x1e402e(0x28f)]({'botID':_0x94e44b})['value'](),_0x141e37;if(_0x56b6bd[_0x1e402e(0x176)]==='enabled')_0x141e37=_0x1e402e(0x13b);else{if(_0x56b6bd[_0x1e402e(0x176)]==='new')_0x141e37=_0x1e402e(0x26e);else{if(_0x56b6bd['status']==='new-disabled')_0x141e37='new';else{if(_0x56b6bd['status']===_0x1e402e(0x13b))_0x141e37='enabled';}}}return _0x141e37;}function updateStatus(_0x177529,_0x3b0f35){const _0x6bcd29=_0xd00ea6;dbConfig[_0x6bcd29(0x238)](_0x6bcd29(0x171))[_0x6bcd29(0x28f)]({'botID':_0x177529})[_0x6bcd29(0x18b)]({'status':_0x3b0f35})[_0x6bcd29(0x275)](),config=getConfiguration(),io['to'](_0x6bcd29(0x15d))[_0x6bcd29(0x29f)]('bots',config),broadcastToBots(_0x6bcd29(0x171),JSON[_0x6bcd29(0x272)](config));}function updateLive(_0x2283bc,_0x1b87f5){const _0x20d1d8=_0xd00ea6;dbConfig[_0x20d1d8(0x238)](_0x20d1d8(0x171))[_0x20d1d8(0x28f)]({'botID':_0x2283bc})[_0x20d1d8(0x18b)]({'live':_0x1b87f5})[_0x20d1d8(0x275)](),config=getConfiguration(),io['to'](_0x20d1d8(0x15d))[_0x20d1d8(0x29f)]('bots',config),broadcastToBots('bots',JSON[_0x20d1d8(0x272)](config));}function updateBotName(_0x11d3af,_0x13fab8){const _0x1c36d2=_0xd00ea6;dbConfig[_0x1c36d2(0x238)]('bots')[_0x1c36d2(0x28f)]({'botID':_0x11d3af})[_0x1c36d2(0x18b)]({'botname':_0x13fab8})[_0x1c36d2(0x275)](),config=getConfiguration(),io['to'](_0x1c36d2(0x15d))[_0x1c36d2(0x29f)](_0x1c36d2(0x171),config),broadcastToBots(_0x1c36d2(0x171),JSON['stringify'](config));}function updateBotManager(){const _0x3386e8=_0xd00ea6;config=getConfiguration(),io['to']('botmanager')[_0x3386e8(0x29f)](_0x3386e8(0x171),config),broadcastToBots('bots',JSON[_0x3386e8(0x272)](config));}function toggleBotMode(_0x4835fb){const _0x255afd=_0xd00ea6;if(pid[_0x4835fb])pid[_0x4835fb][_0x255afd(0x144)]({'function':_0x255afd(0x156),'args':null});else{const _0x4db0f0=configpath+'bot-'+_0x4835fb+'-config.json',_0xf6ffd=fs[_0x255afd(0x281)](_0x4db0f0),_0x5b13ec=JSON[_0x255afd(0xff)](_0xf6ffd),_0xa27821=_0x5b13ec['bot'][0x0][_0x255afd(0x26f)];_0x5b13ec[_0x255afd(0x11f)][0x0]['headless']=!_0xa27821;const _0x2e7ec4=JSON['stringify'](_0x5b13ec,null,0x2);fs['writeFileSync'](_0x4db0f0,_0x2e7ec4),config=getConfiguration(),io['to'](_0x255afd(0x15d))[_0x255afd(0x29f)](_0x255afd(0x171),config),broadcastToBots(_0x255afd(0x171),JSON['stringify'](config));}}function telegramError(_0xa24938){const _0x542fed=_0xd00ea6;logger[_0x542fed(0x1e2)](getTimeStamp()+_0x542fed(0x128));}function validateTelegram(_0x438274){const _0x1efc68=_0xd00ea6;if(_0x438274[_0x1efc68(0x2bb)]['username']!=settings[_0x1efc68(0x184)]&&'@'+_0x438274[_0x1efc68(0x2bb)]['username']!=settings[_0x1efc68(0x184)])return tgBot[_0x1efc68(0x2bd)](_0x438274[_0x1efc68(0x10e)]['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x1efc68(0x132)})['catch'](_0x3cc0f0=>{telegramError(_0x3cc0f0);}),![];return!![];}async function initTelegram(){const _0x2006d8=_0xd00ea6;if(tgBot)tgBot[_0x2006d8(0x1ec)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x2006d8(0x25f)],{'polling':!![]});let _0x2197b0='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x2197b0+='\x0a',_0x2197b0+=_0x2006d8(0x2c7),_0x2197b0+=_0x2006d8(0x1c6),_0x2197b0+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x2197b0+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x2197b0+=_0x2006d8(0x1c8),_0x2197b0+=_0x2006d8(0x1f1),_0x2197b0+=_0x2006d8(0x11d),_0x2197b0+='/names\x20-\x20show\x20bot\x20names\x0a',_0x2197b0+=_0x2006d8(0x197),_0x2197b0+=_0x2006d8(0x1e9),_0x2197b0+=_0x2006d8(0x114),_0x2197b0+=_0x2006d8(0x2a7),_0x2197b0+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x2197b0+=_0x2006d8(0x1a0);let _0x557012=_0x2006d8(0x2be);_0x557012+='\x0a',_0x557012+=_0x2197b0,tgBot[_0x2006d8(0x160)](/\/start/,_0xad5b80=>{const _0x299917=_0x2006d8;if(!validateTelegram(_0xad5b80))return;if(settings[_0x299917(0x293)]!=_0xad5b80[_0x299917(0x10e)]['id'])updateSetting(_0x299917(0x293),_0xad5b80[_0x299917(0x10e)]['id']);updateSetting(_0x299917(0x1b6),!![]),tgBot[_0x299917(0x2bd)](_0xad5b80[_0x299917(0x10e)]['id'],_0x557012)['catch'](_0x473f04=>{telegramError(_0x473f04);});}),tgBot[_0x2006d8(0x160)](/\/enable/,_0x332a3b=>{const _0x255e54=_0x2006d8;if(!validateTelegram(_0x332a3b))return;if(settings['telegramChatId']!=_0x332a3b[_0x255e54(0x10e)]['id'])updateSetting(_0x255e54(0x293),_0x332a3b['chat']['id']);updateSetting(_0x255e54(0x1b6),!![]),tgBot[_0x255e54(0x2bd)](_0x332a3b['chat']['id'],_0x255e54(0x282))[_0x255e54(0x21b)](_0x204743=>{telegramError(_0x204743);});}),tgBot[_0x2006d8(0x160)](/\/config/,async _0x40cef7=>{const _0x5e5f42=_0x2006d8;if(!validateTelegram(_0x40cef7))return;tgBot['removeListener'](_0x5e5f42(0x17c)),tgBot[_0x5e5f42(0x2bd)](_0x40cef7[_0x5e5f42(0x10e)]['id'],_0x5e5f42(0x1dc),{'reply_markup':{'inline_keyboard':[[{'text':_0x5e5f42(0x20a),'callback_data':_0x5e5f42(0x134)},{'text':'Alerts','callback_data':_0x5e5f42(0x1ab)},{'text':'All','callback_data':_0x5e5f42(0x221)}]]}})[_0x5e5f42(0x21b)](_0xbe0a2d=>{telegramError(_0xbe0a2d);}),tgBot['on'](_0x5e5f42(0x17c),async _0x5f3d4a=>{const _0x2c2402=_0x5e5f42,_0x1cc7e5=_0x5f3d4a[_0x2c2402(0x2b0)],_0x5192f8=_0x5f3d4a[_0x2c2402(0x1ac)];tgBot[_0x2c2402(0x117)](_0x5f3d4a['id'])[_0x2c2402(0x2cc)](async()=>{const _0x3ce349=_0x2c2402;_0x1cc7e5=='orders'&&(updateSetting('telegramEvents',_0x3ce349(0x134)),updateSetting(_0x3ce349(0x1b6),!![]),await tgBot[_0x3ce349(0x2bd)](_0x5192f8[_0x3ce349(0x10e)]['id'],_0x3ce349(0x29e))['catch'](_0x2f80e3=>{telegramError(_0x2f80e3);}));_0x1cc7e5=='alerts'&&(updateSetting(_0x3ce349(0x25c),_0x3ce349(0x1ab)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3ce349(0x2bd)](_0x5192f8[_0x3ce349(0x10e)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x3ce349(0x21b)](_0x160f22=>{telegramError(_0x160f22);}));_0x1cc7e5=='all'&&(updateSetting(_0x3ce349(0x25c),_0x3ce349(0x221)),updateSetting(_0x3ce349(0x1b6),!![]),await tgBot[_0x3ce349(0x2bd)](_0x5192f8[_0x3ce349(0x10e)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x3ce349(0x21b)](_0xdeada7=>{telegramError(_0xdeada7);}));if(!settings['telegramChatId'])tgBot[_0x3ce349(0x2bd)](_0x5192f8[_0x3ce349(0x10e)]['id'],_0x3ce349(0x16b))[_0x3ce349(0x21b)](_0x30bd51=>{telegramError(_0x30bd51);});}),tgBot[_0x2c2402(0x11c)](_0x2c2402(0x17c));});}),tgBot[_0x2006d8(0x160)](/\/status/,_0x1518f2=>{const _0x1b2554=_0x2006d8;if(!validateTelegram(_0x1518f2))return;const _0x34af5b=getBotsWithMode();let _0x8e8dbd=_0x1b2554(0x112);config[_0x1b2554(0x1bb)](_0x3df076=>{const _0x3b0fb3=_0x1b2554,_0x216716=_0x34af5b[_0x3b0fb3(0x28f)](_0x20e06c=>_0x20e06c[_0x3b0fb3(0x200)]==_0x3df076[_0x3b0fb3(0x200)])['mode'];_0x8e8dbd+=_0x3b0fb3(0x2c4)+_0x3df076['botID']+':\x20'+_0x3df076[_0x3b0fb3(0x176)]+'\x20|\x20'+_0x216716+_0x3b0fb3(0x121)+_0x3df076[_0x3b0fb3(0x298)]+'\x0a';}),_0x8e8dbd+='\x0a',_0x8e8dbd+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x8e8dbd+=!settings[_0x1b2554(0x1b6)]?_0x1b2554(0x182):_0x1b2554(0x2bc),_0x8e8dbd+=settings[_0x1b2554(0x1b6)]?settings[_0x1b2554(0x25c)]=='all'?_0x1b2554(0x10d):_0x1b2554(0x1a6)+settings[_0x1b2554(0x25c)]+_0x1b2554(0x18e):'',tgBot[_0x1b2554(0x2bd)](_0x1518f2[_0x1b2554(0x10e)]['id'],_0x8e8dbd,{'parse_mode':_0x1b2554(0x132)})[_0x1b2554(0x21b)](_0x3af810=>{telegramError(_0x3af810);});}),tgBot[_0x2006d8(0x160)](/\/restart/,_0xe7f786=>{const _0x3c3a74=_0x2006d8;if(!validateTelegram(_0xe7f786))return;tgBot[_0x3c3a74(0x11c)]('callback_query');const _0x20b36d=getEnabledBots();if(_0x20b36d[_0x3c3a74(0x2c0)]==0x0)tgBot['sendMessage'](_0xe7f786[_0x3c3a74(0x10e)]['id'],_0x3c3a74(0x2c5))['catch'](_0x32e03a=>{telegramError(_0x32e03a);});else{if(_0x20b36d['length']>0x1)_0x20b36d[_0x3c3a74(0x1f0)]({'botID':'all'});let _0x9ebad2=[],_0x35eba0=[];const _0x3e7ff1=_0x20b36d['length']%0x4==0x0||_0x20b36d['length']%0x4==0x3||_0x20b36d[_0x3c3a74(0x2c0)]%0x3==0x1?0x4:0x3;let _0xa15003=0x0;_0x20b36d['forEach']((_0x38a312,_0x333cde)=>{const _0x37a6df=_0x3c3a74;if(_0x333cde%_0x3e7ff1==0x0)_0x35eba0=[];_0x35eba0[_0x37a6df(0x1f0)]({'text':_0x38a312['botID']=='all'?'All\x20bots':_0x37a6df(0x2c4)+_0x38a312[_0x37a6df(0x200)],'callback_data':_0x38a312[_0x37a6df(0x200)]}),_0x333cde%_0x3e7ff1==0x0&&(_0x9ebad2[_0xa15003]=_0x35eba0,_0xa15003++);}),tgBot[_0x3c3a74(0x2bd)](_0xe7f786[_0x3c3a74(0x10e)]['id'],_0x3c3a74(0x153),{'reply_markup':{'inline_keyboard':_0x9ebad2}})[_0x3c3a74(0x21b)](_0x42a8d9=>{telegramError(_0x42a8d9);}),tgBot['on'](_0x3c3a74(0x17c),async _0xb3cb8a=>{const _0x8acf1c=_0x3c3a74,_0x5c092a=_0xb3cb8a[_0x8acf1c(0x2b0)],_0x1b8400=_0xb3cb8a['message'];tgBot[_0x8acf1c(0x117)](_0xb3cb8a['id'])[_0x8acf1c(0x2cc)](async()=>{const _0x608987=_0x8acf1c;_0x5c092a==_0x608987(0x221)?config[_0x608987(0x1bb)](_0x1436a8=>{restartBot(_0x1436a8['botID']);}):restartBot(_0x5c092a);}),tgBot[_0x8acf1c(0x11c)](_0x8acf1c(0x17c));});}}),tgBot[_0x2006d8(0x160)](/\/on/,_0x1d78bd=>{const _0x3dac1c=_0x2006d8;if(!validateTelegram(_0x1d78bd))return;tgBot['removeListener']('callback_query');const _0x14552e=getDisabledBots();if(_0x14552e[_0x3dac1c(0x2c0)]==0x0)tgBot[_0x3dac1c(0x2bd)](_0x1d78bd[_0x3dac1c(0x10e)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x3dac1c(0x21b)](_0x482604=>{telegramError(_0x482604);});else{if(_0x14552e[_0x3dac1c(0x2c0)]>0x1)_0x14552e['push']({'botID':_0x3dac1c(0x221)});let _0x448fc5=[],_0x5757fa=[];const _0x51891=_0x14552e[_0x3dac1c(0x2c0)]%0x4==0x0||_0x14552e[_0x3dac1c(0x2c0)]%0x4==0x3||_0x14552e[_0x3dac1c(0x2c0)]%0x3==0x1?0x4:0x3;let _0x116d86=0x0;_0x14552e['forEach']((_0x52bd04,_0x1eace2)=>{const _0x2e8853=_0x3dac1c;if(_0x1eace2%_0x51891==0x0)_0x5757fa=[];_0x5757fa[_0x2e8853(0x1f0)]({'text':_0x52bd04[_0x2e8853(0x200)]==_0x2e8853(0x221)?_0x2e8853(0x13f):_0x2e8853(0x2c4)+_0x52bd04[_0x2e8853(0x200)],'callback_data':_0x52bd04['botID']}),_0x1eace2%_0x51891==0x0&&(_0x448fc5[_0x116d86]=_0x5757fa,_0x116d86++);}),tgBot[_0x3dac1c(0x2bd)](_0x1d78bd[_0x3dac1c(0x10e)]['id'],_0x3dac1c(0x22c),{'reply_markup':{'inline_keyboard':_0x448fc5}})[_0x3dac1c(0x21b)](_0x4b4880=>{telegramError(_0x4b4880);}),tgBot['on'](_0x3dac1c(0x17c),async _0x7e61e8=>{const _0x202836=_0x3dac1c,_0x352c29=_0x7e61e8[_0x202836(0x2b0)],_0x162c8e=_0x7e61e8[_0x202836(0x1ac)];tgBot[_0x202836(0x117)](_0x7e61e8['id'])['then'](async()=>{const _0x64a7e2=_0x202836;_0x352c29=='all'?(tgBot['sendMessage'](_0x162c8e[_0x64a7e2(0x10e)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x64a7e2(0x21b)](_0x1cd1cd=>{telegramError(_0x1cd1cd);}),_0x14552e['forEach'](_0x601e6c=>{const _0x2383fc=_0x64a7e2;if(_0x601e6c[_0x2383fc(0x200)]!=_0x2383fc(0x221))toggleBot(_0x601e6c[_0x2383fc(0x200)],toggleStatus(_0x601e6c[_0x2383fc(0x200)]),'stopped');})):(tgBot[_0x64a7e2(0x2bd)](_0x162c8e[_0x64a7e2(0x10e)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x352c29)[_0x64a7e2(0x21b)](_0x5cb631=>{telegramError(_0x5cb631);}),toggleBot(_0x352c29,toggleStatus(_0x352c29),_0x64a7e2(0x17e)));}),tgBot[_0x202836(0x11c)]('callback_query');});}}),tgBot[_0x2006d8(0x160)](/\/off/,_0x2132f3=>{const _0x4296e5=_0x2006d8;if(!validateTelegram(_0x2132f3))return;tgBot[_0x4296e5(0x11c)](_0x4296e5(0x17c));const _0x2902b3=getEnabledBots();if(_0x2902b3[_0x4296e5(0x2c0)]==0x0)tgBot[_0x4296e5(0x2bd)](_0x2132f3['chat']['id'],_0x4296e5(0x2c5))[_0x4296e5(0x21b)](_0x11a62e=>{telegramError(_0x11a62e);});else{if(_0x2902b3[_0x4296e5(0x2c0)]>0x1)_0x2902b3[_0x4296e5(0x1f0)]({'botID':_0x4296e5(0x221)});let _0x34bff3=[],_0x10567b=[];const _0x162175=_0x2902b3[_0x4296e5(0x2c0)]%0x4==0x0||_0x2902b3[_0x4296e5(0x2c0)]%0x4==0x3||_0x2902b3[_0x4296e5(0x2c0)]%0x3==0x1?0x4:0x3;let _0x4ac2fa=0x0;_0x2902b3[_0x4296e5(0x1bb)]((_0x7fea1f,_0x433f85)=>{const _0x579314=_0x4296e5;if(_0x433f85%_0x162175==0x0)_0x10567b=[];_0x10567b[_0x579314(0x1f0)]({'text':_0x7fea1f['botID']==_0x579314(0x221)?_0x579314(0x13f):_0x579314(0x2c4)+_0x7fea1f[_0x579314(0x200)],'callback_data':_0x7fea1f[_0x579314(0x200)]}),_0x433f85%_0x162175==0x0&&(_0x34bff3[_0x4ac2fa]=_0x10567b,_0x4ac2fa++);}),tgBot[_0x4296e5(0x2bd)](_0x2132f3['chat']['id'],_0x4296e5(0x24d),{'reply_markup':{'inline_keyboard':_0x34bff3}})[_0x4296e5(0x21b)](_0x1f338e=>{telegramError(_0x1f338e);}),tgBot['on']('callback_query',async _0x3d5aa0=>{const _0x215da2=_0x4296e5,_0x2571e3=_0x3d5aa0[_0x215da2(0x2b0)],_0x3906ff=_0x3d5aa0[_0x215da2(0x1ac)];tgBot[_0x215da2(0x117)](_0x3d5aa0['id'])['then'](async()=>{const _0x5bc1c2=_0x215da2;_0x2571e3=='all'?(tgBot['sendMessage'](_0x3906ff[_0x5bc1c2(0x10e)]['id'],_0x5bc1c2(0x2ad))['catch'](_0x57534c=>{telegramError(_0x57534c);}),_0x2902b3[_0x5bc1c2(0x1bb)](_0x501bf5=>{const _0x5c3929=_0x5bc1c2;if(_0x501bf5['botID']!=_0x5c3929(0x221))toggleBot(_0x501bf5[_0x5c3929(0x200)],toggleStatus(_0x501bf5[_0x5c3929(0x200)]),_0x5c3929(0x17e));})):(tgBot[_0x5bc1c2(0x2bd)](_0x3906ff[_0x5bc1c2(0x10e)]['id'],_0x5bc1c2(0x2ce)+_0x2571e3)[_0x5bc1c2(0x21b)](_0x4a9103=>{telegramError(_0x4a9103);}),toggleBot(_0x2571e3,toggleStatus(_0x2571e3),_0x5bc1c2(0x17e)));}),tgBot['removeListener'](_0x215da2(0x17c));});}}),tgBot[_0x2006d8(0x160)](/\/metrics/,_0x2510e1=>{const _0x10e6e2=_0x2006d8;if(!validateTelegram(_0x2510e1))return;tgBot[_0x10e6e2(0x11c)](_0x10e6e2(0x17c));const _0x166381=getEnabledBots();if(_0x166381[_0x10e6e2(0x2c0)]==0x0)tgBot[_0x10e6e2(0x2bd)](_0x2510e1[_0x10e6e2(0x10e)]['id'],_0x10e6e2(0x2c5))['catch'](_0x3a3cba=>{telegramError(_0x3a3cba);});else{if(_0x166381['length']>0x1){let _0x5122ec=[],_0x4ab808=[];const _0x3b4922=_0x166381[_0x10e6e2(0x2c0)]%0x4==0x0||_0x166381['length']%0x4==0x3||_0x166381[_0x10e6e2(0x2c0)]%0x3==0x1?0x4:0x3;let _0xef460a=0x0;_0x166381[_0x10e6e2(0x1bb)]((_0x24c283,_0x293dce)=>{const _0x2736b3=_0x10e6e2;if(_0x293dce%_0x3b4922==0x0)_0x4ab808=[];_0x4ab808[_0x2736b3(0x1f0)]({'text':_0x2736b3(0x2c4)+_0x24c283[_0x2736b3(0x200)],'callback_data':_0x24c283[_0x2736b3(0x200)]}),_0x293dce%_0x3b4922==0x0&&(_0x5122ec[_0xef460a]=_0x4ab808,_0xef460a++);}),tgBot[_0x10e6e2(0x2bd)](_0x2510e1[_0x10e6e2(0x10e)]['id'],_0x10e6e2(0x24e),{'reply_markup':{'inline_keyboard':_0x5122ec}})[_0x10e6e2(0x21b)](_0xf7a805=>{telegramError(_0xf7a805);}),tgBot['on'](_0x10e6e2(0x17c),async _0x4d1a13=>{const _0x2f8b69=_0x10e6e2,_0x326657=_0x4d1a13[_0x2f8b69(0x2b0)],_0x39cc6f=_0x4d1a13[_0x2f8b69(0x1ac)];tgBot[_0x2f8b69(0x117)](_0x4d1a13['id'])[_0x2f8b69(0x2cc)](async()=>{const _0x121bcd=_0x2f8b69;if(pid[_0x326657])pid[_0x326657][_0x121bcd(0x144)]({'function':_0x121bcd(0x1af),'args':null});}),tgBot[_0x2f8b69(0x11c)](_0x2f8b69(0x17c));});}else{const _0x1e100e=_0x166381[0x0][_0x10e6e2(0x200)];if(pid[_0x1e100e])pid[_0x1e100e][_0x10e6e2(0x144)]({'function':_0x10e6e2(0x1af),'args':null});}}}),tgBot[_0x2006d8(0x160)](/\/portfolio/,_0x4592cf=>{const _0x332f8c=_0x2006d8;if(!validateTelegram(_0x4592cf))return;tgBot[_0x332f8c(0x11c)]('callback_query');const _0xf56cef=getEnabledBots();if(_0xf56cef[_0x332f8c(0x2c0)]==0x0)tgBot['sendMessage'](_0x4592cf['chat']['id'],_0x332f8c(0x2c5))['catch'](_0x439e94=>{telegramError(_0x439e94);});else{if(_0xf56cef[_0x332f8c(0x2c0)]>0x1){let _0x41fab2=[],_0x558dea=[];const _0x21ba4a=_0xf56cef[_0x332f8c(0x2c0)]%0x4==0x0||_0xf56cef[_0x332f8c(0x2c0)]%0x4==0x3||_0xf56cef[_0x332f8c(0x2c0)]%0x3==0x1?0x4:0x3;let _0x214f13=0x0;_0xf56cef[_0x332f8c(0x1bb)]((_0xd1f1b4,_0x3e17b7)=>{const _0x42da1d=_0x332f8c;if(_0x3e17b7%_0x21ba4a==0x0)_0x558dea=[];_0x558dea[_0x42da1d(0x1f0)]({'text':_0x42da1d(0x2c4)+_0xd1f1b4[_0x42da1d(0x200)],'callback_data':_0xd1f1b4[_0x42da1d(0x200)]}),_0x3e17b7%_0x21ba4a==0x0&&(_0x41fab2[_0x214f13]=_0x558dea,_0x214f13++);}),tgBot[_0x332f8c(0x2bd)](_0x4592cf[_0x332f8c(0x10e)]['id'],_0x332f8c(0x28c),{'reply_markup':{'inline_keyboard':_0x41fab2}})['catch'](_0x509b46=>{telegramError(_0x509b46);}),tgBot['on'](_0x332f8c(0x17c),async _0x22ca25=>{const _0x31860c=_0x332f8c,_0x328dde=_0x22ca25[_0x31860c(0x2b0)],_0x42bd13=_0x22ca25[_0x31860c(0x1ac)];tgBot[_0x31860c(0x117)](_0x22ca25['id'])[_0x31860c(0x2cc)](async()=>{const _0x4cb897=_0x31860c;if(pid[_0x328dde])pid[_0x328dde][_0x4cb897(0x144)]({'function':_0x4cb897(0x1bc),'args':null});}),tgBot[_0x31860c(0x11c)]('callback_query');});}else{const _0x5cb7af=_0xf56cef[0x0][_0x332f8c(0x200)];if(pid[_0x5cb7af])pid[_0x5cb7af]['send']({'function':_0x332f8c(0x1bc),'args':null});}}}),tgBot['onText'](/\/update/,async _0x3e1834=>{const _0x4818b2=_0x2006d8;if(!validateTelegram(_0x3e1834))return;tgBot['removeListener'](_0x4818b2(0x17c)),await getMessages();if(!updateAvailable)tgBot[_0x4818b2(0x2bd)](_0x3e1834[_0x4818b2(0x10e)]['id'],_0x4818b2(0x1ae))[_0x4818b2(0x21b)](_0x29c7a2=>{telegramError(_0x29c7a2);});else!validInstallation?tgBot[_0x4818b2(0x2bd)](_0x3e1834[_0x4818b2(0x10e)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update')[_0x4818b2(0x21b)](_0x2cad46=>{telegramError(_0x2cad46);}):(tgBot[_0x4818b2(0x2bd)](_0x3e1834['chat']['id'],_0x4818b2(0x287),{'reply_markup':{'inline_keyboard':[[{'text':_0x4818b2(0x262),'callback_data':_0x4818b2(0x1ba)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x235de3=>{telegramError(_0x235de3);}),tgBot['on']('callback_query',async _0xb3e0c0=>{const _0x39252c=_0x4818b2,_0x32a6b6=_0xb3e0c0[_0x39252c(0x2b0)],_0x6d7aac=_0xb3e0c0[_0x39252c(0x1ac)];tgBot[_0x39252c(0x117)](_0xb3e0c0['id'])[_0x39252c(0x2cc)](async()=>{const _0x3f7933=_0x39252c;_0x32a6b6=='yes'&&(await tgBot[_0x3f7933(0x2bd)](_0x6d7aac[_0x3f7933(0x10e)]['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x47f073=>{telegramError(_0x47f073);}),updateBB(_0x3f7933(0x18f))),_0x32a6b6=='no'&&await tgBot[_0x3f7933(0x2bd)](_0x6d7aac[_0x3f7933(0x10e)]['id'],_0x3f7933(0x2cd))[_0x3f7933(0x21b)](_0x4af6d5=>{telegramError(_0x4af6d5);});}),tgBot[_0x39252c(0x11c)](_0x39252c(0x17c));}));}),tgBot[_0x2006d8(0x160)](/\/reinstall/,async _0x13077f=>{const _0x338df0=_0x2006d8;if(!validateTelegram(_0x13077f))return;tgBot[_0x338df0(0x11c)](_0x338df0(0x17c)),!validInstallation?tgBot['sendMessage'](_0x13077f[_0x338df0(0x10e)]['id'],_0x338df0(0x2a2))[_0x338df0(0x21b)](_0x1d4ece=>{telegramError(_0x1d4ece);}):(tgBot[_0x338df0(0x2bd)](_0x13077f[_0x338df0(0x10e)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x338df0(0x262),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x338df0(0x21b)](_0x8f792=>{telegramError(_0x8f792);}),tgBot['on'](_0x338df0(0x17c),async _0x2e53ae=>{const _0x25a1b8=_0x338df0,_0x46558b=_0x2e53ae[_0x25a1b8(0x2b0)],_0x1272cd=_0x2e53ae[_0x25a1b8(0x1ac)];tgBot[_0x25a1b8(0x117)](_0x2e53ae['id'])[_0x25a1b8(0x2cc)](async()=>{const _0x44cfb1=_0x25a1b8;_0x46558b=='yes'&&(await tgBot[_0x44cfb1(0x2bd)](_0x1272cd[_0x44cfb1(0x10e)]['id'],_0x44cfb1(0x2b2))[_0x44cfb1(0x21b)](_0x3d683b=>{telegramError(_0x3d683b);}),updateBB(_0x44cfb1(0x16e))),_0x46558b=='no'&&await tgBot[_0x44cfb1(0x2bd)](_0x1272cd['chat']['id'],_0x44cfb1(0x2ca))[_0x44cfb1(0x21b)](_0x2130fa=>{telegramError(_0x2130fa);});}),tgBot[_0x25a1b8(0x11c)](_0x25a1b8(0x17c));}));}),tgBot[_0x2006d8(0x160)](/\/toggle/,_0xfa755a=>{const _0x285287=_0x2006d8;if(!validateTelegram(_0xfa755a))return;tgBot[_0x285287(0x11c)]('callback_query');const _0x4342cf=getBotsWithMode();if(_0x4342cf[_0x285287(0x2c0)]==0x0)tgBot[_0x285287(0x2bd)](_0xfa755a['chat']['id'],_0x285287(0x2c5))[_0x285287(0x21b)](_0x43b8bf=>{telegramError(_0x43b8bf);});else{let _0x5b1b08=[],_0x27cc16=[];const _0x50a566=0x2;let _0x232565=0x0;_0x4342cf[_0x285287(0x1bb)]((_0x58b8e0,_0x56ee37)=>{const _0x3b6a79=_0x285287;if(_0x56ee37%_0x50a566==0x0)_0x27cc16=[];_0x27cc16['push']({'text':'Bot\x20'+_0x58b8e0[_0x3b6a79(0x200)]+'\x20('+_0x58b8e0[_0x3b6a79(0x24a)]+')','callback_data':_0x58b8e0['botID']}),_0x56ee37%_0x50a566==0x0&&(_0x5b1b08[_0x232565]=_0x27cc16,_0x232565++);}),tgBot[_0x285287(0x2bd)](_0xfa755a[_0x285287(0x10e)]['id'],_0x285287(0x1fe),{'reply_markup':{'inline_keyboard':_0x5b1b08}})['catch'](_0x5900c9=>{telegramError(_0x5900c9);}),tgBot['on']('callback_query',async _0x34a637=>{const _0x5b82f6=_0x285287,_0x4f367e=_0x34a637['data'],_0x2674fd=_0x34a637[_0x5b82f6(0x1ac)];tgBot[_0x5b82f6(0x117)](_0x34a637['id'])['then'](async()=>{const _0x2c5175=_0x5b82f6,_0x249717=_0x4342cf[_0x2c5175(0x28f)](_0x4c017f=>_0x4c017f[_0x2c5175(0x200)]==_0x4f367e),_0x822a32=_0x249717[_0x2c5175(0x24a)]==_0x2c5175(0x23a)?_0x2c5175(0x1c3):_0x2c5175(0x23a);tgBot[_0x2c5175(0x2bd)](_0x2674fd[_0x2c5175(0x10e)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x4f367e+_0x2c5175(0x1c0)+_0x822a32+_0x2c5175(0x1eb))['catch'](_0x5b635f=>{telegramError(_0x5b635f);}),toggleBotMode(_0x4f367e);}),tgBot[_0x5b82f6(0x11c)](_0x5b82f6(0x17c));});}}),tgBot[_0x2006d8(0x160)](/\/names/,_0x4cca2b=>{const _0x19ca6b=_0x2006d8;if(!validateTelegram(_0x4cca2b))return;let _0x1bf06d='';config['forEach'](_0x160a85=>{const _0x5a5d27=_0x3506;_0x1bf06d+=_0x5a5d27(0x2c4)+_0x160a85['botID']+':\x20'+_0x160a85['botname']+'\x0a';}),tgBot['sendMessage'](_0x4cca2b['chat']['id'],_0x1bf06d,{'parse_mode':_0x19ca6b(0x132)})[_0x19ca6b(0x21b)](_0x3bfc4d=>{telegramError(_0x3bfc4d);});}),tgBot['onText'](/\/disable/,_0x4e9337=>{const _0x4e8f87=_0x2006d8;if(!validateTelegram(_0x4e9337))return;tgBot[_0x4e8f87(0x2bd)](_0x4e9337['chat']['id'],'Notifications\x20disabled')['catch'](_0x5d059b=>{telegramError(_0x5d059b);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x2006d8(0x160)](/\/help/,_0x4904ea=>{const _0x556ed1=_0x2006d8;if(!validateTelegram(_0x4904ea))return;tgBot[_0x556ed1(0x2bd)](_0x4904ea['chat']['id'],_0x2197b0)[_0x556ed1(0x21b)](_0x549371=>{telegramError(_0x549371);});}),tgBot['on'](_0x2006d8(0x129),_0x7ac9eb=>{const _0x2c0b5b=_0x2006d8;_0x7ac9eb[_0x2c0b5b(0x279)]()[_0x2c0b5b(0x10f)](_0x2c0b5b(0x257))&&(logger[_0x2c0b5b(0x26d)](_0x2c0b5b(0x28d)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x2c0b5b(0x15d))[_0x2c0b5b(0x29f)]('notification',_0x2c0b5b(0x28d)));}),process['once'](_0x2006d8(0x1bd),()=>{const _0x484162=_0x2006d8;if(tgBot)tgBot[_0x484162(0x1ec)]();process[_0x484162(0x162)](0x1);}),process[_0x2006d8(0x123)](_0x2006d8(0x15e),()=>{const _0x50ca53=_0x2006d8;if(tgBot)tgBot[_0x50ca53(0x1ec)]();process['exit'](0x1);});}}function disableTelegram(){const _0x39aa66=_0xd00ea6;tgBot&&(tgBot[_0x39aa66(0x1ec)](),tgBot=null);}function sendTelegram(_0x5efc21,_0x5e2914){const _0x2a557e=_0xd00ea6;if(settings[_0x2a557e(0x1b6)]){if(settings[_0x2a557e(0x25c)]==_0x2a557e(0x221)||(_0x5e2914['type']==_0x2a557e(0x21d)||_0x5e2914[_0x2a557e(0x1a3)]=='warning'||_0x5e2914[_0x2a557e(0x1a3)]==_0x2a557e(0x2b9))&&settings[_0x2a557e(0x25c)]==_0x2a557e(0x1ab)||_0x5e2914[_0x2a557e(0x1a3)]==_0x2a557e(0x1f4)&&settings['telegramEvents']=='orders'){if(tgBot&&settings['telegramChatId']){if(_0x5e2914[_0x2a557e(0x127)])tgBot[_0x2a557e(0x2bd)](settings['telegramChatId'],_0x5e2914[_0x2a557e(0x296)]+_0x2a557e(0x152)+_0x5e2914[_0x2a557e(0x283)])[_0x2a557e(0x21b)](_0x22b6d1=>{telegramError(_0x22b6d1);});else tgBot[_0x2a557e(0x2bd)](settings[_0x2a557e(0x293)],'Bot\x20'+_0x5efc21+_0x2a557e(0x152)+_0x5e2914[_0x2a557e(0x283)])['catch'](_0x57dec1=>{telegramError(_0x57dec1);});}}}}async function sendTelegramMsg(_0x3a0f01,_0x11c8f2='HTML'){const _0x3e7d45=_0xd00ea6;return settings[_0x3e7d45(0x1b6)]&&tgBot&&settings[_0x3e7d45(0x293)]?(await tgBot[_0x3e7d45(0x2bd)](settings[_0x3e7d45(0x293)],_0x3a0f01,{'parse_mode':_0x11c8f2})[_0x3e7d45(0x21b)](_0x1b05e0=>{telegramError(_0x1b05e0);}),!![]):![];}function getDeviceWithIp(_0x54089e){const _0x1552db=_0xd00ea6;return devices[_0x1552db(0x28f)](_0x515239=>_0x515239['ip']===_0x54089e);}function temporaryAccess2FA(_0x54ead5,_0x29d629){const _0x1eb108=_0xd00ea6;let _0x3d6d7e=new Date(),_0x24cdfa=![];if(lastIpApproval){if(_0x3d6d7e-lastIpApproval<0x1388)_0x24cdfa=!![];}lastIpApproval=new Date();if(_0x24cdfa)return;tgBot&&settings[_0x1eb108(0x293)]&&(tgBot[_0x1eb108(0x11c)](_0x1eb108(0x17c)),tgBot['sendMessage'](settings['telegramChatId'],_0x1eb108(0x294)+normalizeIP(_0x29d629)[_0x1eb108(0x196)]+_0x1eb108(0x19a),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x1eb108(0x1b1),'callback_data':'5'},{'text':_0x1eb108(0x2d1),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x1eb108(0x100),'callback_data':'reject'}]]}})[_0x1eb108(0x21b)](_0x3da1ed=>{telegramError(_0x3da1ed);}),tgBot['on'](_0x1eb108(0x17c),async _0x446fca=>{const _0x3a62d4=_0x1eb108,_0x5f41fb=_0x446fca[_0x3a62d4(0x2b0)],_0x156dd0=_0x446fca[_0x3a62d4(0x1ac)];tgBot[_0x3a62d4(0x117)](_0x446fca['id'])[_0x3a62d4(0x2cc)](async()=>{const _0x3b31c0=_0x3a62d4;devices[_0x54ead5]['telegramIpApproval']={'clientip':_0x29d629,'timestamp':new Date()['getTime'](),'expiry':_0x5f41fb},_0x5f41fb!=_0x3b31c0(0x100)?(await tgBot[_0x3b31c0(0x2bd)](_0x156dd0[_0x3b31c0(0x10e)]['id'],'Access\x20enabled\x20for\x20'+_0x5f41fb+'\x20minutes',{'parse_mode':_0x3b31c0(0x132)})[_0x3b31c0(0x21b)](_0x59d0e3=>{telegramError(_0x59d0e3);}),io['to'](_0x54ead5)['emit'](_0x3b31c0(0x176),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3b31c0(0x2bd)](_0x156dd0[_0x3b31c0(0x10e)]['id'],_0x3b31c0(0x2af))[_0x3b31c0(0x21b)](_0x9484c0=>{telegramError(_0x9484c0);}),io['to'](_0x54ead5)[_0x3b31c0(0x29f)](_0x3b31c0(0x176),{'access':{'allow':![],'reason':_0x3b31c0(0x135),'token':null}}));}),tgBot[_0x3a62d4(0x11c)](_0x3a62d4(0x17c));}));}function loginAccess2FA(_0x3d25e3,_0x233d3f){const _0x1b87e4=_0xd00ea6;tgBot&&settings[_0x1b87e4(0x293)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x1b87e4(0x2bd)](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x233d3f)[_0x1b87e4(0x196)]+_0x1b87e4(0x19a),{'parse_mode':_0x1b87e4(0x132),'reply_markup':{'inline_keyboard':[[{'text':_0x1b87e4(0x157),'callback_data':loginExpiry},{'text':_0x1b87e4(0x100),'callback_data':_0x1b87e4(0x100)}]]}})['catch'](_0x2f243b=>{telegramError(_0x2f243b);}),tgBot['on'](_0x1b87e4(0x17c),async _0x10dc99=>{const _0x49ce39=_0x1b87e4,_0x9a90c5=_0x10dc99[_0x49ce39(0x2b0)],_0x47aa57=_0x10dc99['message'];tgBot['answerCallbackQuery'](_0x10dc99['id'])['then'](async()=>{const _0x4102f0=_0x49ce39;devices[_0x3d25e3]['telegram2FaApproval']={'clientip':_0x233d3f,'timestamp':new Date()[_0x4102f0(0x1fd)](),'expiry':_0x9a90c5},_0x9a90c5!=_0x4102f0(0x100)?(await tgBot[_0x4102f0(0x2bd)](_0x47aa57[_0x4102f0(0x10e)]['id'],'Login\x20accepted',{'parse_mode':_0x4102f0(0x132)})[_0x4102f0(0x21b)](_0x3c9496=>{telegramError(_0x3c9496);}),io['to'](_0x3d25e3)[_0x4102f0(0x29f)](_0x4102f0(0x176),{'access':{'allow':![],'reason':_0x4102f0(0x1a5),'token':null}})):(await tgBot[_0x4102f0(0x2bd)](_0x47aa57[_0x4102f0(0x10e)]['id'],'Login\x20rejected')[_0x4102f0(0x21b)](_0x107707=>{telegramError(_0x107707);}),io['to'](_0x3d25e3)['emit']('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot['removeListener'](_0x49ce39(0x17c));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x41cbb9=_0xd00ea6;return dbConfig[_0x41cbb9(0x238)](_0x41cbb9(0x171))[_0x41cbb9(0x110)](_0x41cbb9(0x200))[_0x41cbb9(0x231)]({'status':'enabled'})['value']()||[];}function getDisabledBots(){const _0x543c17=_0xd00ea6;return dbConfig[_0x543c17(0x238)](_0x543c17(0x171))['sortBy']('botID')[_0x543c17(0x231)]({'status':_0x543c17(0x13b)})[_0x543c17(0x259)]()||[];}function getBotAttributes(_0x29ce46){const _0x5a8533=_0xd00ea6;let _0x13345f={};const _0x22c251=configpath+_0x5a8533(0x218)+_0x29ce46+'-config.json',_0x50f661=fs[_0x5a8533(0x1a4)](_0x22c251);if(_0x50f661){const _0x307794=fs[_0x5a8533(0x281)](_0x22c251);try{const _0x267777=JSON[_0x5a8533(0xff)](_0x307794),_0x1bea14=_0x267777?_0x267777[_0x5a8533(0x11f)][0x0][_0x5a8533(0x26f)]:![];_0x13345f[_0x5a8533(0x24a)]=_0x1bea14?_0x5a8533(0x23a):_0x5a8533(0x1c3),_0x13345f[_0x5a8533(0x296)]=_0x267777?_0x267777[_0x5a8533(0x11f)][0x0][_0x5a8533(0x296)]:_0x5a8533(0x2c4)+_0x29ce46;}catch(_0x1cfe40){_0x13345f[_0x5a8533(0x24a)]=_0x5a8533(0x1c3),_0x13345f[_0x5a8533(0x296)]=_0x5a8533(0x2c4)+_0x29ce46;}}else _0x13345f['mode']=_0x5a8533(0x1c3),_0x13345f[_0x5a8533(0x296)]='Bot\x20'+_0x29ce46;return _0x13345f;}function getBotsWithMode(){const _0x51d5e0=_0xd00ea6,_0x2086c1=dbConfig[_0x51d5e0(0x238)]('bots')['sortBy'](_0x51d5e0(0x200))[_0x51d5e0(0x259)]()||[];return _0x2086c1[_0x51d5e0(0x1bb)](_0x13c898=>{const _0x47a699=_0x51d5e0;let _0x1440e6=getBotAttributes(_0x13c898[_0x47a699(0x200)]);_0x13c898[_0x47a699(0x24a)]=_0x1440e6['mode'];}),_0x2086c1;}function getBotExchanges(){const _0x349b57=_0xd00ea6;let _0x122a63=[];const _0x5db394=dbConfig[_0x349b57(0x238)](_0x349b57(0x171))[_0x349b57(0x110)](_0x349b57(0x200))[_0x349b57(0x259)]()||[];_0x5db394['forEach'](_0x43d1cb=>{const _0x5a79a9=_0x349b57;if(_0x43d1cb['status']==_0x5a79a9(0x2b5)){const _0x450647=configpath+'bot-'+_0x43d1cb['botID']+_0x5a79a9(0x158),_0x124869=fs['existsSync'](_0x450647);let _0x310db0;if(_0x124869){const _0x270bb8=fs[_0x5a79a9(0x281)](_0x450647);try{const _0x3c58ab=JSON[_0x5a79a9(0xff)](_0x270bb8);_0x310db0=_0x3c58ab?_0x3c58ab[_0x5a79a9(0x11f)][0x0][_0x5a79a9(0x206)]:null;}catch(_0x5b647f){}}if(_0x310db0)_0x122a63[_0x5a79a9(0x1f0)](_0x310db0);}});const _0x45001d=[...new Set(_0x122a63)][_0x349b57(0x270)]();return _0x45001d;}async function initUser(){const _0x301332=_0xd00ea6;if(!settings[_0x301332(0x227)]){const _0x412cfd=uuidRandom();mixpanel[_0x301332(0x1c5)](_0x412cfd),updateSetting(_0x301332(0x227),_0x412cfd);}}async function initSecure(){const _0x2f5752=_0xd00ea6;let _0x1331f2=getSecure();if(!_0x1331f2[_0x2f5752(0x248)](_0x2f5752(0x20c))){let _0x2ffb70=await generateKeys();_0x1331f2[_0x2f5752(0x195)]=_0x2ffb70[_0x2f5752(0x195)],_0x1331f2[_0x2f5752(0x242)]=_0x2ffb70[_0x2f5752(0x242)],_0x1331f2[_0x2f5752(0x20c)]=crypto[_0x2f5752(0x28b)](0x20)[_0x2f5752(0x279)]('hex');;storeSecure(_0x1331f2);}}function getSettings(){const _0xedddb6=_0xd00ea6;return dbSettings['get'](_0xedddb6(0x23b))[_0xedddb6(0x259)]()||{};}function getSecure(){const _0x27917a=_0xd00ea6;return dbSecure[_0x27917a(0x238)](_0x27917a(0x106))['value']()||{};}function getBlacklist(){const _0x4f0029=_0xd00ea6;return dbSecure[_0x4f0029(0x238)]('blacklist')[_0x4f0029(0x259)]()||[];}function broadcastToBots(_0x4c6a4b,_0x2074db){const _0x260e6b=_0xd00ea6;config[_0x260e6b(0x1bb)](_0xb1cd05=>{const _0x1541e3=_0x260e6b;if(_0xb1cd05[_0x1541e3(0x176)]=='enabled'&&_0xb1cd05[_0x1541e3(0x298)]=='running'||_0xb1cd05[_0x1541e3(0x176)]==_0x1541e3(0x14d)&&_0xb1cd05[_0x1541e3(0x298)]=='running'){if(pid[_0xb1cd05[_0x1541e3(0x200)]])pid[_0xb1cd05[_0x1541e3(0x200)]][_0x1541e3(0x144)]({[_0x4c6a4b]:_0x2074db});}});}function storeSettings(_0x27d621,_0x1ae4c7=![]){const _0x1cb696=_0xd00ea6;_0x27d621={...settings,..._0x27d621};if(_0x1ae4c7&&_0x27d621[_0x1cb696(0x274)]!='************'&&_0x27d621[_0x1cb696(0x274)]!='***'&&_0x27d621[_0x1cb696(0x274)]!=''){const _0x363d2f=crypt['decrypt'](secure[_0x1cb696(0x242)],_0x27d621[_0x1cb696(0x274)])[_0x1cb696(0x1ac)]['split']('@')[0x0],_0x3a0f28=bcrypt['hashSync'](_0x363d2f,saltRounds);_0x27d621={..._0x27d621,'bbPassword':_0x3a0f28};}if(_0x1ae4c7&&_0x27d621[_0x1cb696(0x25f)]!=_0x1cb696(0x2b1)&&_0x27d621[_0x1cb696(0x25f)]!=_0x1cb696(0x190)&&_0x27d621[_0x1cb696(0x25f)]!=''){const _0x475a61=crypt['decrypt'](secure[_0x1cb696(0x242)],_0x27d621[_0x1cb696(0x25f)])[_0x1cb696(0x1ac)][_0x1cb696(0x1d7)]('@')[0x0];_0x27d621={..._0x27d621,'telegramToken':_0x475a61};}const _0x463d22=_0x27d621['telegramToken']!=_0x1cb696(0x2b1)&&_0x27d621[_0x1cb696(0x25f)]!=settings['telegramToken']||_0x27d621['telegramUsername']!=settings['telegramUsername'],_0x29dd69=_0x27d621[_0x1cb696(0x25f)]==''||_0x27d621[_0x1cb696(0x184)]=='';if(_0x463d22)_0x27d621[_0x1cb696(0x25c)]='all';for(const [_0x24a25f,_0x1c7faf]of Object[_0x1cb696(0x14c)](_0x27d621)){if(_0x24a25f=='telegramToken'&&_0x1c7faf=='************'){_0x27d621[_0x1cb696(0x25f)]=settings[_0x1cb696(0x25f)];continue;};if(_0x24a25f=='bbPassword'&&_0x1c7faf==_0x1cb696(0x2b1)){_0x27d621['bbPassword']=settings['bbPassword'];continue;};dbSettings['set'](_0x1cb696(0x198)+_0x24a25f,_0x1c7faf)[_0x1cb696(0x275)]();}settings=_0x27d621,io['to'](_0x1cb696(0x15d))[_0x1cb696(0x29f)](_0x1cb696(0x23b),cleanSettings()),broadcastToBots(_0x1cb696(0x193),settings['timeshift']),broadcastToBots(_0x1cb696(0x1fa),settings[_0x1cb696(0x1fa)]);if(_0x463d22&&!_0x29dd69)initTelegram();if(_0x463d22&&_0x29dd69)disableTelegram();getAllClients()[_0x1cb696(0x1bb)](_0x3f98cc=>{const _0x5c4472=_0x1cb696;getSocket(_0x3f98cc['id'])[_0x5c4472(0x29f)](_0x5c4472(0x176),{'access':{'allow':![],'reason':_0x5c4472(0x1a5),'token':null}});});}function updateSetting(_0x4290ef,_0x325479){const _0x410ec7=_0xd00ea6;dbSettings[_0x410ec7(0x1a8)](_0x410ec7(0x198)+_0x4290ef,_0x325479)[_0x410ec7(0x275)](),settings=getSettings(),io['to'](_0x410ec7(0x15d))[_0x410ec7(0x29f)]('settings',cleanSettings());}function storeSecure(_0x4f996e){const _0x4744f0=_0xd00ea6;dbSecure[_0x4744f0(0x238)](_0x4744f0(0x106))['push'](_0x4f996e)[_0x4744f0(0x275)](),secure=_0x4f996e;}function addBlacklist(_0x21847c){const _0x330450=_0xd00ea6;cleanBlacklist();let _0x48f9cf;devices[_0x21847c][_0x330450(0x1cd)]?_0x48f9cf=Math['max'](devices[_0x21847c]['telegramIpApproval'][_0x330450(0x201)],loginExpiry):_0x48f9cf=loginExpiry,dbSecure['get'](_0x330450(0x19b))[_0x330450(0x1f0)]({'expiry':new Date()['getTime']()+_0x48f9cf*0x3c*0x3e8,'token':devices[_0x21847c]['access'][_0x330450(0x219)]})[_0x330450(0x275)](),blacklist=dbSecure[_0x330450(0x238)](_0x330450(0x19b))['value']();}function cleanBlacklist(){const _0x2dce5a=_0xd00ea6;let _0x916573=dbSecure[_0x2dce5a(0x238)](_0x2dce5a(0x19b))[_0x2dce5a(0x1e5)]()[_0x2dce5a(0x259)](),_0x1d9e2d=new Date()[_0x2dce5a(0x1fd)]();_0x916573[_0x2dce5a(0x1bb)](_0x48b44c=>{const _0x4212a0=_0x2dce5a;_0x48b44c[_0x4212a0(0x201)]<_0x1d9e2d&&dbSecure[_0x4212a0(0x238)](_0x4212a0(0x19b))['remove']({'expiry':_0x48b44c[_0x4212a0(0x201)]})[_0x4212a0(0x275)]();});}function initStates(){const _0x5bd29d=_0xd00ea6;let _0x207ed0=getConfiguration();_0x207ed0[_0x5bd29d(0x1bb)](_0x3dd34b=>{const _0x4cf143=_0x5bd29d;_0x3dd34b['live']=_0x4cf143(0x17e);}),storeConfiguration(_0x207ed0);}function onKeys(){const _0x4f8b2b=new RSA();return new Promise(_0x45563f=>{const _0x3d21a7=_0x3506;_0x4f8b2b['generateKeyPairAsync']()[_0x3d21a7(0x2cc)](_0x3058ee=>{_0x45563f(_0x3058ee);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x40584f=_0xd00ea6;let _0x311502=getSettings(),_0x526c49=![];!_0x311502[_0x40584f(0x248)](_0x40584f(0x2cf))&&(_0x311502['lastmsgtelegram']=0x0,_0x526c49=!![]);!_0x311502[_0x40584f(0x248)]('lastmsgemitted')&&(_0x311502['lastmsgemitted']=0x0,_0x526c49=!![]);!_0x311502[_0x40584f(0x248)](_0x40584f(0x1b2))&&(_0x311502['latestversion']='0.0.0',_0x526c49=!![]);!_0x311502[_0x40584f(0x248)](_0x40584f(0x1fa))&&(_0x311502[_0x40584f(0x1fa)]=![],_0x526c49=!![]);if(_0x526c49)storeSettings(_0x311502);}function storeConfiguration(_0xbe2a40){const _0x16df09=_0xd00ea6;dbConfig[_0x16df09(0x238)]('bots')[_0x16df09(0x220)]()['write'](),_0xbe2a40[_0x16df09(0x1bb)](_0x44f801=>{const _0xde6218=_0x16df09;delete _0x44f801[_0xde6218(0x24a)];}),dbConfig[_0x16df09(0x238)](_0x16df09(0x171))[_0x16df09(0x1f0)](..._0xbe2a40)[_0x16df09(0x275)](),config=_0xbe2a40;}function resetPassword(){const _0x14f70a=_0xd00ea6;tgBot&&settings[_0x14f70a(0x293)]&&(tgBot[_0x14f70a(0x11c)](_0x14f70a(0x17c)),tgBot[_0x14f70a(0x2bd)](settings[_0x14f70a(0x293)],_0x14f70a(0x258),{'parse_mode':_0x14f70a(0x132),'reply_markup':{'inline_keyboard':[[{'text':_0x14f70a(0x1ba),'callback_data':_0x14f70a(0x1ba)},{'text':'no','callback_data':'no'}]]}})[_0x14f70a(0x21b)](_0x1826d7=>{telegramError(_0x1826d7);}),tgBot['on'](_0x14f70a(0x17c),async _0x84f35d=>{const _0x3fe4b5=_0x14f70a,_0x53e43b=_0x84f35d[_0x3fe4b5(0x2b0)],_0x6ab60e=_0x84f35d[_0x3fe4b5(0x1ac)];tgBot[_0x3fe4b5(0x117)](_0x84f35d['id'])[_0x3fe4b5(0x2cc)](async()=>{const _0x36df7f=_0x3fe4b5;if(_0x53e43b!='no'){const _0x1d65db=0xf,_0x272ce3=_0x36df7f(0x1da),_0x2af95b=Array['from'](crypto['randomFillSync'](new Uint32Array(_0x1d65db)))[_0x36df7f(0x164)](_0xb2c2da=>_0x272ce3[_0xb2c2da%_0x272ce3['length']])[_0x36df7f(0x278)](''),_0x513db3=bcrypt[_0x36df7f(0x1b9)](_0x2af95b,saltRounds);storeSettings({'bbPassword':_0x513db3}),await tgBot[_0x36df7f(0x2bd)](_0x6ab60e[_0x36df7f(0x10e)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x2af95b,{'parse_mode':'HTML'})['catch'](_0x1b8a0b=>{telegramError(_0x1b8a0b);});}else await tgBot['sendMessage'](_0x6ab60e[_0x36df7f(0x10e)]['id'],_0x36df7f(0x1b4))[_0x36df7f(0x21b)](_0xd6bb19=>{telegramError(_0xd6bb19);});}),tgBot['removeListener'](_0x3fe4b5(0x17c));}));}async function confirmRestore(_0x4849b0,_0x489c32){const _0x4eb1ac=_0xd00ea6;io['to']('botmanager')[_0x4eb1ac(0x29f)](_0x4eb1ac(0x223),_0x4eb1ac(0x119),'success'),tgBot&&settings[_0x4eb1ac(0x293)]&&(tgBot['removeListener']('callback_query'),await tgBot['sendMessage'](settings[_0x4eb1ac(0x293)],_0x4eb1ac(0x16a),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x4eb1ac(0x21b)](_0x17dc27=>{telegramError(_0x17dc27);}),tgBot['on']('callback_query',async _0x5c9032=>{const _0x343091=_0x4eb1ac,_0x426986=_0x5c9032['data'],_0x8728a2=_0x5c9032[_0x343091(0x1ac)];tgBot[_0x343091(0x117)](_0x5c9032['id'])[_0x343091(0x2cc)](async()=>{const _0x263f73=_0x343091;_0x426986==_0x263f73(0x1ba)?(await tgBot[_0x263f73(0x2bd)](_0x8728a2[_0x263f73(0x10e)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x263f73(0x132)})[_0x263f73(0x21b)](_0x1aaabc=>{telegramError(_0x1aaabc);}),unzipFile(_0x4849b0,_0x489c32)):(logger[_0x263f73(0x244)](_0x263f73(0x181)),await tgBot[_0x263f73(0x2bd)](_0x8728a2[_0x263f73(0x10e)]['id'],'Restore\x20process\x20aborted')['catch'](_0x1e05b7=>{telegramError(_0x1e05b7);}));}),tgBot[_0x343091(0x11c)](_0x343091(0x17c));}));}function getServerTime(){const _0x180988=_0xd00ea6,_0x3ea6cd=new Date();return _0x3ea6cd['getFullYear']()+'/'+(_0x3ea6cd[_0x180988(0x1c7)]()+0x1)[_0x180988(0x279)]()['padStart'](0x2,'0')+'/'+_0x3ea6cd[_0x180988(0x209)]()[_0x180988(0x279)]()[_0x180988(0x208)](0x2,'0')+'\x20'+_0x3ea6cd[_0x180988(0x1be)]()['toString']()[_0x180988(0x208)](0x2,'0')+':'+_0x3ea6cd['getMinutes']()[_0x180988(0x279)]()[_0x180988(0x208)](0x2,'0')+':'+_0x3ea6cd[_0x180988(0x137)]()['toString']()[_0x180988(0x208)](0x2,'0');}function getTimeStamp(){const _0x4dc92a=_0xd00ea6,_0x15df5e=shiftedTime();return _0x15df5e[_0x4dc92a(0x189)]()+'/'+(_0x15df5e[_0x4dc92a(0x1c7)]()+0x1)[_0x4dc92a(0x279)]()[_0x4dc92a(0x208)](0x2,'0')+'/'+_0x15df5e[_0x4dc92a(0x209)]()[_0x4dc92a(0x279)]()[_0x4dc92a(0x208)](0x2,'0')+'\x20'+_0x15df5e[_0x4dc92a(0x1be)]()['toString']()[_0x4dc92a(0x208)](0x2,'0')+':'+_0x15df5e[_0x4dc92a(0x277)]()[_0x4dc92a(0x279)]()[_0x4dc92a(0x208)](0x2,'0')+':'+_0x15df5e[_0x4dc92a(0x137)]()[_0x4dc92a(0x279)]()[_0x4dc92a(0x208)](0x2,'0');}function getCleanTimeStamp(){const _0x32f291=_0xd00ea6,_0x40a54e=shiftedTime();return _0x40a54e['getFullYear']()+(_0x40a54e[_0x32f291(0x1c7)]()+0x1)['toString']()[_0x32f291(0x208)](0x2,'0')+_0x40a54e[_0x32f291(0x209)]()['toString']()[_0x32f291(0x208)](0x2,'0')+'-'+_0x40a54e['getHours']()[_0x32f291(0x279)]()[_0x32f291(0x208)](0x2,'0')+_0x40a54e[_0x32f291(0x277)]()[_0x32f291(0x279)]()[_0x32f291(0x208)](0x2,'0')+_0x40a54e[_0x32f291(0x137)]()['toString']()[_0x32f291(0x208)](0x2,'0');}function shiftedTime(){const _0x1dae73=_0xd00ea6,_0x3c6ecf=new Date();let _0x46c28b=_0x3c6ecf;if(settings[_0x1dae73(0x193)]&&settings['timeshift']!==0x0)_0x46c28b=fns['add'](_0x3c6ecf,{'hours':settings[_0x1dae73(0x193)]});return _0x46c28b;}function startScheduler(){const _0x217c30=_0xd00ea6,_0x31862b=new Date()['getUTCHours'](),_0xc823e8=shiftedTime()[_0x217c30(0x1be)]();_0xc823e8==0x4&&backupConfigFiles();_0xc823e8==0x0&&rotateLogFiles();_0x31862b%0x6==0x0&&triggerAnalytics();_0x31862b%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x2719b2){const _0x5b2fa6=_0xd00ea6;logger[_0x5b2fa6(0x244)](_0x5b2fa6(0x2c9)+_0x2719b2);const _0x5c7d9b=getBotsWithMode();_0x5c7d9b[_0x5b2fa6(0x2c0)]>0x0?confirmRestore(configbackuppath,_0x2719b2):unzipFile(configbackuppath,_0x2719b2);}async function getBackupFiles(_0x5886ab=null){const _0x12b12b=_0xd00ea6;let _0x47487f=[],_0x5acab2=fs[_0x12b12b(0x25b)](configbackuppath,{'withFileTypes':!![]});_0x5acab2[_0x12b12b(0x270)]((_0x1ab776,_0x4680b9)=>_0x1ab776['name']<_0x4680b9[_0x12b12b(0x1d0)]?0x1:_0x4680b9[_0x12b12b(0x1d0)]<_0x1ab776[_0x12b12b(0x1d0)]?-0x1:0x0),_0x5acab2['forEach'](_0x47ebf0=>{const _0x571768=_0x12b12b;if(!_0x47ebf0['isDirectory']()&&_0x47ebf0[_0x571768(0x1d0)][_0x571768(0x1d4)](_0x571768(0x155))&&_0x47ebf0['name'][_0x571768(0x27c)](_0x571768(0x2a3))){const _0x1e513a=formatDate(fs[_0x571768(0x1fc)](configbackuppath+_0x47ebf0[_0x571768(0x1d0)])['mtime']);_0x47487f[_0x571768(0x1f0)]({'name':_0x47ebf0[_0x571768(0x1d0)],'mtime':_0x1e513a});}});if(_0x5886ab)io['to'](_0x5886ab)[_0x12b12b(0x29f)](_0x12b12b(0x2ba),_0x47487f);else return _0x47487f;}async function backupConfigFiles(){const _0x462623=_0xd00ea6;await zipFiles(_0x462623(0x25d));const _0x35414b=getCleanTimeStamp();fs[_0x462623(0x2ae)](zippath+_0x462623(0x1c1),configbackuppath+(_0x462623(0x155)+_0x35414b+_0x462623(0x2a3)));let _0x585032=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x585032[_0x462623(0x270)]((_0x4af5c3,_0x23260b)=>_0x4af5c3[_0x462623(0x1d0)]<_0x23260b[_0x462623(0x1d0)]?0x1:_0x23260b['name']<_0x4af5c3[_0x462623(0x1d0)]?-0x1:0x0),_0x585032[_0x462623(0x2c0)]>maxBackups&&fs[_0x462623(0x1ea)](configbackuppath+_0x585032[maxBackups][_0x462623(0x1d0)]);}function rotateLogFiles(){const _0x39bacc=_0xd00ea6,_0x334549=fs[_0x39bacc(0x1fc)](logspath+_0x39bacc(0x13e)),_0x5f388b=_0x334549[_0x39bacc(0x1b7)]/0x400;if(_0x5f388b>0x64){let _0x4defc5=fs[_0x39bacc(0x25b)](logspath,{'withFileTypes':!![]});_0x4defc5[_0x39bacc(0x270)]((_0x4c126e,_0x28de21)=>_0x4c126e[_0x39bacc(0x1d0)]<_0x28de21[_0x39bacc(0x1d0)]?0x1:_0x28de21[_0x39bacc(0x1d0)]<_0x4c126e[_0x39bacc(0x1d0)]?-0x1:0x0),_0x4defc5[_0x39bacc(0x1bb)](_0x362ff4=>{const _0x37d6d5=_0x39bacc;if(_0x362ff4[_0x37d6d5(0x1d0)]==_0x37d6d5(0x140))fs[_0x37d6d5(0x2ae)](logspath+_0x362ff4[_0x37d6d5(0x1d0)],logspath+_0x37d6d5(0x16f));if(_0x362ff4['name']==_0x37d6d5(0x1d8))fs['copyFileSync'](logspath+_0x362ff4['name'],logspath+_0x37d6d5(0x140));_0x362ff4[_0x37d6d5(0x1d0)]=='output-000.log'&&(fs[_0x37d6d5(0x2ae)](logspath+_0x362ff4[_0x37d6d5(0x1d0)],logspath+_0x37d6d5(0x1d8)),fs[_0x37d6d5(0x204)](logspath+_0x362ff4[_0x37d6d5(0x1d0)],''));});}}async function zipFiles(_0x11d575){const _0x337f24=_0xd00ea6;let _0x3bd91e;if(_0x11d575==_0x337f24(0x130))_0x3bd91e=logspath;if(_0x11d575==_0x337f24(0x1fb))_0x3bd91e=configpath;if(_0x11d575==_0x337f24(0x25d))_0x3bd91e=configpath;let _0x538aeb=fs[_0x337f24(0x25b)](_0x3bd91e,{'withFileTypes':!![]});const _0x508f70=new require(_0x337f24(0x268))();_0x538aeb['forEach'](_0x3e3c01=>{const _0x244fdf=_0x337f24;if(!_0x3e3c01[_0x244fdf(0x1f9)]()){let _0x83fa5d=fs[_0x244fdf(0x281)](_0x3bd91e+_0x3e3c01[_0x244fdf(0x1d0)]);if(_0x11d575=='backup'){const _0x36d49f=/^bot-[0-9]{3}-config.json$/,_0x5d08b0=_0x36d49f[_0x244fdf(0x28e)](_0x3e3c01['name']);if(_0x5d08b0){const _0x3a7950=JSON[_0x244fdf(0xff)](_0x83fa5d);if(_0x3a7950['bot'][0x0]){_0x3a7950[_0x244fdf(0x11f)][0x0]['apiKey']=_0x244fdf(0x190),_0x3a7950[_0x244fdf(0x11f)][0x0]['apiSecret']=_0x244fdf(0x190);if(_0x3a7950['bot'][0x0]['apiPassword'])_0x3a7950[_0x244fdf(0x11f)][0x0][_0x244fdf(0x2c2)]=_0x244fdf(0x190);}_0x83fa5d=JSON[_0x244fdf(0x272)](_0x3a7950,null,0x2);}if(_0x3e3c01[_0x244fdf(0x1d0)]==_0x244fdf(0x1d9)){const _0x12c5c6=JSON['parse'](_0x83fa5d);if(_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x214)])_0x12c5c6['settings'][_0x244fdf(0x214)]=![];if(_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x274)])_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x274)]=_0x244fdf(0x190);if(_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x25f)])_0x12c5c6['settings'][_0x244fdf(0x25f)]='***';if(_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x293)])_0x12c5c6[_0x244fdf(0x23b)][_0x244fdf(0x293)]=null;_0x83fa5d=JSON[_0x244fdf(0x272)](_0x12c5c6,null,0x2);}if(_0x3e3c01['name']!=_0x244fdf(0x179))_0x508f70[_0x244fdf(0x253)](_0x3e3c01[_0x244fdf(0x1d0)],_0x83fa5d);}else _0x508f70[_0x244fdf(0x253)](_0x3e3c01[_0x244fdf(0x1d0)],_0x83fa5d);}});const _0x5ad4cd=_0x508f70[_0x337f24(0x217)]({'base64':![],'compression':_0x337f24(0x1c2)});fs[_0x337f24(0x204)](zippath+(_0x11d575+'.zip'),_0x5ad4cd,_0x337f24(0x1cc));}async function unzipFile(_0x890828,_0x505bfd){const _0x249f22=_0xd00ea6;fs[_0x249f22(0x25b)](configpath,{'withFileTypes':!![]})[_0x249f22(0x1bb)](_0x53f7fe=>{const _0x49d4f0=_0x249f22;if(!_0x53f7fe['isDirectory']())fs[_0x49d4f0(0x1cb)](configpath+_0x53f7fe[_0x49d4f0(0x1d0)]);});const _0x4e1231=fs[_0x249f22(0x281)](_0x890828+_0x505bfd,_0x249f22(0x1cc)),_0x1087b0=new require(_0x249f22(0x268))(_0x4e1231,{'base64':![],'checkCRC32':!![]});Object[_0x249f22(0x1ee)](_0x1087b0[_0x249f22(0x187)])[_0x249f22(0x1bb)](_0x421a21=>{const _0x20fbf2=_0x249f22,_0x325470=_0x1087b0[_0x20fbf2(0x187)][_0x421a21];fs[_0x20fbf2(0x204)](configpath+_0x325470[_0x20fbf2(0x1d0)],_0x325470['_data']);}),fs[_0x249f22(0x25b)](temppath,{'withFileTypes':!![]})['forEach'](_0x28e04b=>{const _0x4272a0=_0x249f22;if(!_0x28e04b['isDirectory']())fs[_0x4272a0(0x1cb)](temppath+_0x28e04b[_0x4272a0(0x1d0)]);}),logger[_0x249f22(0x244)](_0x249f22(0x26c)),process['send']({'restore':!![]},_0x260faf=>{});}function _0x2c18(){const _0x20335e=['backup/','secure','get-backup-files','sockets','>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://','logs/','No\x20authentication\x20token','showConfig','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','chat','includes','sortBy','temporary\x20token\x20generated','<b>Balance\x20Bot\x20Status:</b>\x0a','delete-bot','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','express','2FA','answerCallbackQuery','updatebotmanager','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Unauthorized\x20attempt\x20to\x20update\x20bot','\x20|\x20client:\x20...','removeListener','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','bot','confirm-message','\x20|\x20','::ffff:127.0.0.1','once','get-logs','Idling\x20bot\x20\x20\x20|\x20Bot\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','showname',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','polling_error','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','telegram2FaApproval','/download/:type','temporaryAccessAllowed','logout','getPortfolio','logs','reset-password','HTML','uuid-random','orders','temporary\x20access\x20rejected','\x20(2)','getSeconds','disconnect','1vkJqxL','use','disabled','api-eu.mixpanel.com','reset-history','output-000.log','All\x20bots','output-002.log','-results.json','restore-backup-file','Unauthorized\x20attempt\x20to\x20log\x20out','send','Server','storeFiat','reason','Token\x20blacklisted','2FA\x20login\x20token\x20generated','3000','store','entries','new','#RES#\x20if\x20running\x20on\x20server','3429936PmFzwA','slice','cancel-loading','\x20>\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','>\x20Open\x20Bot\x20Manager\x20at\x20#BLU#http://localhost:','backup-full@','toggleBotMode','accept','-config.json','sha256','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','emitHistory','messages','botmanager','SIGTERM','\x1b[0m','onText','/:bot/history','exit','password','map','2454776MpHnlN','restart','min','Enabled\x20Bot\x20','defaults','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','407022mwcSRj','toggle-bot-mode','reinstall','output-003.log','Unauthorized\x20attempt\x20to\x20update\x20settings','bots','whitelist','Restarting\x20Bot\x20','127.0.0.1','backupfile','status','inherit','lowdb/adapters/FileSync','bb-secure.json','RSA-OAEP','socket','callback_query','Unauthorized\x20attempt\x20to\x20get\x20portfolio','stopped','getStartingBalances','9BMBGKf','Restore\x20process\x20aborted','Notifications\x20disabled\x0a','2FA\x20login\x20required','telegramUsername','Logged\x20in\x20user\x20...','\x20|\x20user:\x20...','files','temporary\x20access\x20timeout','getFullYear','jsonwebtoken','assign','version.json','*$1*','\x20only\x0a','update','***','login\x20not\x20required','Unauthorized\x20login\x20attempt\x20(timeout)','timeshift','Error:\x20Invalid\x20argument\x20','publicKey','show','/status\x20-\x20show\x20bot(s)\x20status\x0a','settings.','(((.+)+)+)+$','</b>\x20?','blacklist','Starting\x20new\x20bot\x20|\x20Bot\x20','#RES#\x20if\x20running\x20locally\x0a','\x20(1)','Network\x20Interfaces:','/help\x20-\x20show\x20available\x20commands\x0a','-----------------------------------------------------------------------------------','init','type','existsSync','reload','Notifications\x20types:\x20','2FA\x20required','set','function','exec','alerts','message','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Your\x20installation\x20is\x20already\x20up\x20to\x20date','sendMetricsTelegram','Unauthorized\x20attempt\x20to\x20get\x20messages','5\x20min','latestversion','match','Password\x20reset\x20rejected','sign','telegramEnabled','size','format','hashSync','yes','forEach','sendPortfolioTelegram','SIGINT','getHours','crypto','\x20to\x20','backup-full.zip','DEFLATE','manual','store-settings','alias','/disable\x20-\x20disable\x20notifications\x0a','getMonth','/on\x20-\x20start\x20bot(s)\x0a','isValid','/upload-backup','rmSync','binary','telegramIpApproval','4815940UmtLft','apply','name','timestamp','bbvNew','any','startsWith','version','Setting\x20access:\x20','split','output-001.log','bb-settings.json','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','node','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','File\x20uploaded','stop','Error\x20while\x20deleting\x20config\x20files:\x20','telegram','f2aRequired','simple','kill','/output-000.log','cloneDeep','login\x20token\x20generated','tkn',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','/metrics\x20-\x20show\x20bot\x20performance\x0a','unlinkSync','\x20mode','stopPolling','child_process','keys','get-messages','push','/off\x20-\x20stop\x20bot(s)\x0a','build','/:bot/coins','order','post','540806UQnEPH','createServer','Unauthorized\x20attempt\x20to\x20confirm\x20message','isDirectory','onepagemode','backup','statSync','getTime','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','uncaughtException','botID','expiry','ipc','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','writeFileSync','allow','exchange','/:bot/portfolio','padStart','getDate','Orders','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','secret','graphql-request','store-configuration','host','deleteHistoryAlerts','Unauthorized\x20attempt\x20to\x20show\x20configuration','config/','telegrammsg','loginRequired','index.html','remoteAddress','generate','bot-','token','Disabled\x20Bot\x20','catch','zip/','error','search','mkdirSync','remove','all','resetHistory','notification','pidExpireLogin','Unauthorized\x20attempt\x20to\x20store\x20configuration','::1','userid','-events.json','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Node.js\x20v','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','bbvReceive','Unauthorized\x20attempt\x20to\x20get\x20events','1769802aXTNPA','filter','headers','track','/:bot/performance','yargs/yargs','Markdown','Unauthorized\x20attempt\x20to\x20download\x20','get','build2','auto','settings','place-order','Crypt','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','socket.io','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','util','privateKey','internal','debug','Unauthorized\x20attempt\x20to\x20delete\x20bot','add-bot','Bot\x20Mgr\x20>\x20','hasOwnProperty','bbUsername','mode','args','/:bot/support','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','node-telegram-bot-api','Invalid\x20authentication\x20token\x20(1)','log','download','file','2337665NvqlTQ','listen','ipaddr.js','404\x20Not\x20Found','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','value','#RES#\x0a','readdirSync','telegramEvents','backup-full','-performance.json','telegramToken','access','env','Yes','show-config','replace','NTBA_FIX_319','temp/','clientip','node-zip','range','store-headless','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Backup\x20file\x20unzipped\x20and\x20stored','full','new-disabled','headless','sort','conn','stringify','whitelistEnabled','bbPassword','write','login','getMinutes','join','toString','family','bb-config.json','endsWith','\x1b[31m','lastmsgemitted','server','1000','readFileSync','Notifications\x20enabled','event','ipv6','apiKey','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','number','address','pidRefreshToken','randomBytes','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Invalid\x20Telegram\x20token','test','find','88aqzGBz','connection','started','telegramChatId','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','compareSync','botname','bcryptjs','live','kind','update-bot','static','connected','\x1b[33m','Ok,\x20will\x20send\x20order\x20notifications\x20only','emit','Deleted\x20Bot\x20','temporary\x20access\x20not\x20allowed','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','.zip','Invalid\x20username\x20or\x20IP\x20address','http','createWriteStream','/update\x20-\x20update\x20Balance\x20Bot\x0a','toIPv4MappedAddress','update-bb','/:bot','/:bot/configuration','toIPv4Address','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','copyFileSync','Temporary\x20access\x20rejected','data','************','Starting\x20Balance\x20Bot\x20reinstallation','sendFile','\x1b[34m','enabled','username','RSA','user','success','backup-files','from','Notifications\x20enabled\x0a','sendMessage','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Session\x20expired\x20for\x20user\x20...','length','IPv4','apiPassword','invalid\x20credentials','Bot\x20','No\x20bots\x20running\x20right\x20now','argv','/enable\x20-\x20enable\x20notifications\x0a','Backup\x20file\x20uploaded','Restore\x20backup\x20file\x20','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','port','then','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','lastmsgtelegram','verify','15\x20min','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','placeOrder','parse','reject','Logged\x20out\x20user\x20...','title','uuid','logged\x20out'];_0x2c18=function(){return _0x20335e;};return _0x2c18();}async function getPublicIp(){const _0xe8b286=_0xd00ea6;try{const _0xf41f1a=await axios[_0xe8b286(0x238)]('https://api.ipify.org?format=json');publicip=_0xf41f1a['data']['ip'];}catch(_0x5626f7){}}async function triggerAnalytics(){const _0x26acad=_0xd00ea6;if(!publicip)await getPublicIp();const _0x2c8fc2=getBotsWithMode();let _0x1a9d3a=0x0;_0x2c8fc2[_0x26acad(0x1bb)](_0x2b1967=>{const _0x5165c1=_0x26acad;if(_0x2b1967[_0x5165c1(0x176)]===_0x5165c1(0x2b5))_0x1a9d3a++;});const _0x2cae99=getBotExchanges();mixpanel[_0x26acad(0x233)](_0x26acad(0x145),{'distinct_id':settings[_0x26acad(0x227)],'ip':publicip,'version':serverversion,'numbots':_0x2c8fc2['length'],'numbotsenabled':_0x1a9d3a,'exchanges':_0x2cae99});}async function getMessages(){const _0x15edca=_0xd00ea6,_0x3b8abb=_0x15edca(0x23e),_0xabaadf=new GraphQLClient(_0x3b8abb),_0x583325={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x4914f3=serverversion[_0x15edca(0x1d7)]('.'),_0x20156e=_0x4914f3[0x0]+'.'+_0x4914f3[0x1],_0x578e9d=Math[_0x15edca(0x167)](settings[_0x15edca(0x2cf)],settings[_0x15edca(0x27e)]),_0x476762={'last':parseInt(_0x578e9d),'bbm':_0x20156e},_0x2041f5=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4f0842;try{_0x4f0842=await _0xabaadf['request'](_0x2041f5,_0x476762,_0x583325);}catch(_0x54bc44){}if(_0x4f0842&&_0x4f0842[_0x15edca(0x15c)]){let _0x5ebfba=settings[_0x15edca(0x2cf)];newMessages=[];for(const _0x3b28b2 of _0x4f0842[_0x15edca(0x15c)]){newMessages[_0x15edca(0x1f0)](_0x3b28b2);if(_0x3b28b2['bbvNew'])updateSetting(_0x15edca(0x1b2),_0x3b28b2['bbvNew']);let _0xc67fa5=_0x3b28b2[_0x15edca(0x1d2)]?serverversion>=_0x3b28b2[_0x15edca(0x1d2)]:![];if(!_0xc67fa5&&_0x3b28b2['number']>_0x5ebfba){if(_0x3b28b2[_0x15edca(0x22e)]===_0x15edca(0x1d3)||serverversion[_0x15edca(0x1d4)](_0x3b28b2[_0x15edca(0x22e)])){let _0x26ff47=''+_0x3b28b2[_0x15edca(0x102)]+'\x0a\x0a'+_0x3b28b2[_0x15edca(0x1ac)];const _0x4960cb=await sendTelegramMsg(toTelegramMarkdown(_0x26ff47),_0x15edca(0x236));if(_0x4960cb)_0x5ebfba=_0x3b28b2[_0x15edca(0x288)];}}}updateAvailable=isNewerVersion(settings[_0x15edca(0x1b2)],serverversion),updateSetting('lastmsgtelegram',_0x5ebfba),emitMessages();}}function emitMessages(){const _0x55a508=_0xd00ea6,_0x2f29f3=settings['lastmsgemitted'];let _0x14d78d=[];newMessages[_0x55a508(0x1bb)](_0x34445d=>{const _0x1c6c4a=_0x55a508;_0x34445d[_0x1c6c4a(0x288)]>_0x2f29f3&&_0x14d78d[_0x1c6c4a(0x1f0)](_0x34445d);}),_0x14d78d['length']>0x0&&getAllClients()[_0x55a508(0x1bb)](_0xc99104=>{const _0x29310d=_0x55a508;getSocket(_0xc99104['id'])[_0x29310d(0x29f)](_0x29310d(0x1ac),_0x14d78d);});}function confirmMessage(_0x1143fd){const _0x49d9cd=_0xd00ea6;updateSetting(_0x49d9cd(0x27e),Number(_0x1143fd));}function isNewerVersion(_0x6b1313,_0x57e236){const _0x56a18e=_0xd00ea6,_0x5939da=_0x57e236['split']('.'),_0x4f4163=_0x6b1313[_0x56a18e(0x1d7)]('.');for(var _0x1ed5c9=0x0;_0x1ed5c9<_0x4f4163[_0x56a18e(0x2c0)];_0x1ed5c9++){const _0xf349f2=~~_0x4f4163[_0x1ed5c9],_0x4cde0e=~~_0x5939da[_0x1ed5c9];if(_0xf349f2>_0x4cde0e)return!![];if(_0xf349f2<_0x4cde0e)return![];}return![];}function toTelegramMarkdown(_0x541e60){const _0x27cc1a=_0xd00ea6,_0x45f1cc=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4acc3e=/\*{2}(.+?)\*{2}/gim;return _0x541e60=_0x541e60[_0x27cc1a(0x264)](_0x45f1cc,'$1_$2_$3')[_0x27cc1a(0x264)](_0x4acc3e,_0x27cc1a(0x18d)),_0x541e60;}async function validateConfigFile(){const _0x4a649e=_0xd00ea6,_0x36db2d=dbConfig[_0x4a649e(0x238)](_0x4a649e(0x171))[_0x4a649e(0x110)](_0x4a649e(0x200))['value']()||[];if(_0x36db2d[_0x4a649e(0x2c0)]==0x0){let _0x13af5c=0x0,_0x488da3=[];const _0x139a8c=/^bot-([0-9]{3})-config.json$/,_0x4c083b=fs['readdirSync'](configpath);_0x4c083b[_0x4a649e(0x1bb)](_0x27b3d8=>{const _0x300c3b=_0x4a649e,_0x4e6a38=_0x139a8c[_0x300c3b(0x1aa)](_0x27b3d8);if(_0x4e6a38){const _0xe20836=_0x4e6a38[0x1];let _0x12ad05=getBotAttributes(_0xe20836);_0x488da3[_0x300c3b(0x1f0)]({'botID':_0xe20836,'botname':_0x12ad05['botname'],'status':_0x300c3b(0x13b),'live':_0x300c3b(0x17e)}),_0x13af5c++;}}),_0x13af5c!=0x0&&(dbConfig[_0x4a649e(0x238)](_0x4a649e(0x171))[_0x4a649e(0x18b)](_0x488da3)[_0x4a649e(0x275)](),config=_0x488da3,restoredConfigFile=_0x13af5c);}}async function restoreConfigNotify(_0x1e4f1a){const _0x49723f=_0xd00ea6;let _0x1ca9f4;if(restoredConfigFile==0x1)_0x1ca9f4=_0x49723f(0x240);else _0x1ca9f4=_0x49723f(0x12a);if(_0x1e4f1a)io['to'](_0x49723f(0x15d))['emit'](_0x49723f(0x223),_0x1ca9f4);else{logger[_0x49723f(0x1e2)](_0x49723f(0x1a1)),logger[_0x49723f(0x1e2)](_0x1ca9f4),logger[_0x49723f(0x1e2)]('-----------------------------------------------------------------------------------'),logger[_0x49723f(0x1e2)]('');if(tgBot&&settings[_0x49723f(0x293)]&&settings[_0x49723f(0x25c)]!=_0x49723f(0x134))tgBot[_0x49723f(0x2bd)](settings['telegramChatId'],_0x49723f(0x247)+_0x1ca9f4)['catch'](_0xd5d8ef=>{telegramError(_0xd5d8ef);});}}function validateCredentials(_0x11540b,_0x49fbb4){const _0x432676=_0xd00ea6;if(_0x11540b[_0x432676(0x2b6)]==settings['bbUsername']&&bcrypt[_0x432676(0x295)](_0x11540b[_0x432676(0x163)],settings['bbPassword'])){if(settings[_0x432676(0x1e1)])return{'allow':![],'reason':_0x432676(0x183),'token':null};else{const _0x2da348=generateLoginToken(_0x49fbb4);return{'allow':!![],'reason':_0x432676(0x1e6),'token':_0x2da348};}}else return{'allow':![],'reason':_0x432676(0x2c3),'token':null};}function refreshToken(_0x157d42){const _0x18971f=_0xd00ea6,_0x574193=generateLoginToken(_0x157d42);return{'allow':!![],'reason':_0x18971f(0x1e6),'token':_0x574193};}function validateAccess(_0x1bcebc,_0x598341,_0x2d8518){const _0x162070=_0xd00ea6,_0x311cda=_0x2d8518?_0x2d8518:devices[_0x598341]['ip'];let _0xf77373;const _0x424cf4=_0x31edab=>{const _0xcf2316=_0x3506;if(settings[_0xcf2316(0x214)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x598341)){const _0x3dcb37=generateLoginToken(_0x598341);return{'allow':!![],'reason':_0xcf2316(0x149),'token':_0x3dcb37};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0xf77373=validToken(_0x31edab,_0x598341),_0xf77373[_0xcf2316(0x248)](_0xcf2316(0x2b9))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x31edab}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0xcf2316(0x191),'token':null};};if(settings[_0x162070(0x273)]){let _0x507133=[...settings[_0x162070(0x172)],_0x162070(0x226),_0x162070(0x122),_0x162070(0x174)];if(_0x507133[_0x162070(0x10f)](_0x311cda))return _0x424cf4(_0x1bcebc);else{_0xf77373=validToken(_0x1bcebc,_0x598341);if(_0xf77373[_0x162070(0x248)](_0x162070(0x2b9)))return _0x424cf4(_0x1bcebc);else{if(telegramIpApproved(_0x598341)){const _0x3dfb3f=generateToken(_0x598341);return _0xf77373=_0x424cf4(_0x1bcebc),_0xf77373['allow']?{'allow':!![],'reason':_0x162070(0x111),'token':_0x3dfb3f}:_0xf77373;}else return settings[_0x162070(0x12d)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x162070(0x2a1),'token':null};}}}else return _0x424cf4(_0x1bcebc);}function timelyDecrypt(_0x3ccb28,_0x481cbd=!![]){const _0x59ec9a=_0xd00ea6;if(_0x3ccb28)try{const _0x520bfc=crypt['decrypt'](secure[_0x59ec9a(0x242)],_0x3ccb28)['message'],_0x131219=_0x520bfc['split']('@')[0x0],_0xd6fb3b=_0x520bfc[_0x59ec9a(0x1d7)]('@')[0x1],_0x687286=new Date()['getTime']();if(_0x481cbd){if(_0x687286-_0xd6fb3b<maxSecretAge*0x3e8)return _0x131219;else return![];}else return _0x131219;}catch(_0x1722a8){return![];}else return![];}const validToken=(_0xdd6036,_0x4daba7)=>{const _0x180e6a=_0xd00ea6,_0x217b51=devices[_0x4daba7]['ip'];if(!_0xdd6036)return{'error':_0x180e6a(0x10b)};for(let _0x44f607 of blacklist){if(_0x44f607[_0x180e6a(0x219)]==_0xdd6036)return{'error':_0x180e6a(0x148)};}let _0x5732d7;try{_0x5732d7=jwt[_0x180e6a(0x2d0)](_0xdd6036,secure[_0x180e6a(0x20c)]+_0x4daba7);}catch{return{'error':_0x180e6a(0x250)};}if(!_0x5732d7['hasOwnProperty'](_0x180e6a(0x267))&&!_0x5732d7[_0x180e6a(0x248)](_0x180e6a(0x2b6))||!_0x5732d7[_0x180e6a(0x248)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x5732d7[_0x180e6a(0x248)]('username')&&_0x5732d7[_0x180e6a(0x248)](_0x180e6a(0x267))){const {clientip:_0x44c40c}=_0x5732d7;return _0x217b51==_0x44c40c?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x5732d7[_0x180e6a(0x248)]('username')&&_0x5732d7[_0x180e6a(0x248)]('clientip')){const {username:_0x202d0c,clientip:_0x498470}=_0x5732d7;return settings[_0x180e6a(0x249)]==_0x202d0c&&_0x217b51==_0x498470?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x180e6a(0x2a4)};}}},generateLoginToken=_0x1eb685=>{const _0x41fda5=_0xd00ea6;if(_0x1eb685){const _0x2736f5=devices[_0x1eb685]['ip'];return jwt[_0x41fda5(0x1b5)]({'username':settings['bbUsername'],'clientip':_0x2736f5},secure['secret']+_0x1eb685,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x41ea4f=>{const _0x4b829b=_0xd00ea6;if(_0x41ea4f){const _0x1563c9=devices[_0x41ea4f]['ip'];return jwt[_0x4b829b(0x1b5)]({'clientip':_0x1563c9},secure[_0x4b829b(0x20c)]+_0x41ea4f,{'expiresIn':devices[_0x41ea4f]['telegramIpApproval'][_0x4b829b(0x201)]*0x3c});}else return![];},telegramIpApproved=_0x28c90c=>{const _0x2254a4=_0xd00ea6;let _0x2dea34=![];return devices[_0x28c90c][_0x2254a4(0x1cd)]&&devices[_0x28c90c]['telegramIpApproval']['expiry']!='reject'&&(_0x2dea34=devices[_0x28c90c]['telegramIpApproval'][_0x2254a4(0x267)]==devices[_0x28c90c]['ip']&&new Date()[_0x2254a4(0x1fd)]()-devices[_0x28c90c][_0x2254a4(0x1cd)][_0x2254a4(0x1d1)]<devices[_0x28c90c][_0x2254a4(0x1cd)][_0x2254a4(0x201)]*0x3c*0x3e8),_0x2dea34;},telegram2FaApproved=_0x51392d=>{const _0x5f4743=_0xd00ea6;let _0x59dada=![];return devices[_0x51392d]['telegram2FaApproval']&&devices[_0x51392d]['telegram2FaApproval'][_0x5f4743(0x201)]!=_0x5f4743(0x100)&&(_0x59dada=devices[_0x51392d][_0x5f4743(0x12b)][_0x5f4743(0x267)]==devices[_0x51392d]['ip']&&new Date()[_0x5f4743(0x1fd)]()-devices[_0x51392d][_0x5f4743(0x12b)][_0x5f4743(0x1d1)]<devices[_0x51392d]['telegram2FaApproval'][_0x5f4743(0x201)]*0x3c*0x3e8),_0x59dada;},normalizeIP=_0x4748d7=>{const _0x51cd60=_0xd00ea6;let _0x3c46cf=null,_0x2c548b=null;if(ipaddr[_0x51cd60(0x1c9)](_0x4748d7)){const _0x172c73=ipaddr[_0x51cd60(0xff)](_0x4748d7);_0x172c73[_0x51cd60(0x299)]()===_0x51cd60(0x284)?(_0x172c73['isIPv4MappedAddress']()&&(_0x3c46cf=_0x172c73[_0x51cd60(0x2ac)]()[_0x51cd60(0x279)]()),_0x2c548b=_0x172c73[_0x51cd60(0x279)]()):(_0x3c46cf=_0x172c73[_0x51cd60(0x279)](),_0x2c548b=_0x172c73[_0x51cd60(0x2a8)]()[_0x51cd60(0x279)]());}return{'show':_0x3c46cf?_0x3c46cf:_0x2c548b,'store':_0x2c548b};};function formatDate(_0x4a8755){const _0x302741=_0xd00ea6;return _0x4a8755['getFullYear']()+'/'+(_0x4a8755[_0x302741(0x1c7)]()+0x1)[_0x302741(0x279)]()[_0x302741(0x208)](0x2,'0')+'/'+_0x4a8755[_0x302741(0x209)]()[_0x302741(0x279)]()[_0x302741(0x208)](0x2,'0')+'\x20'+_0x4a8755['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x4a8755[_0x302741(0x277)]()[_0x302741(0x279)]()['padStart'](0x2,'0')+':'+_0x4a8755[_0x302741(0x137)]()[_0x302741(0x279)]()['padStart'](0x2,'0');}function sleep(_0x3edb88){return new Promise(_0x37e0e7=>setTimeout(_0x37e0e7,_0x3edb88));}