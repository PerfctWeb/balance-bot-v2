const _0x2bafc9=_0x297f;(function(_0x5b3a37,_0x93eaf){const _0x56be4f=_0x297f,_0x34559a=_0x5b3a37();while(!![]){try{const _0x148e2f=-parseInt(_0x56be4f(0x227))/0x1*(-parseInt(_0x56be4f(0x228))/0x2)+parseInt(_0x56be4f(0x236))/0x3+-parseInt(_0x56be4f(0x141))/0x4+-parseInt(_0x56be4f(0x119))/0x5+-parseInt(_0x56be4f(0x20a))/0x6+parseInt(_0x56be4f(0x221))/0x7*(parseInt(_0x56be4f(0x11b))/0x8)+-parseInt(_0x56be4f(0x1f7))/0x9*(-parseInt(_0x56be4f(0x1e7))/0xa);if(_0x148e2f===_0x93eaf)break;else _0x34559a['push'](_0x34559a['shift']());}catch(_0x20f40e){_0x34559a['push'](_0x34559a['shift']());}}}(_0x2a0e,0xae11c));const _0x3eb9b5=function(){let _0x6b2253=!![];return function(_0xd511a,_0x557325){const _0x1eb3d1=_0x6b2253?function(){const _0x27218d=_0x297f;if(_0x557325){const _0x29f4c2=_0x557325[_0x27218d(0x1c4)](_0xd511a,arguments);return _0x557325=null,_0x29f4c2;}}:function(){};return _0x6b2253=![],_0x1eb3d1;};}(),_0x623d9f=_0x3eb9b5(this,function(){const _0x3452c1=_0x297f;return _0x623d9f[_0x3452c1(0x1b0)]()['search'](_0x3452c1(0x1a5))[_0x3452c1(0x1b0)]()[_0x3452c1(0x16c)](_0x623d9f)[_0x3452c1(0x148)](_0x3452c1(0x1a5));});_0x623d9f();'use strict';process[_0x2bafc9(0x17f)][_0x2bafc9(0x116)]=0x1;const childProcess=require(_0x2bafc9(0x120)),FileSync=require(_0x2bafc9(0x18f)),fs=require('fs'),fns=require(_0x2bafc9(0x250)),low=require(_0x2bafc9(0x1c2)),path=require(_0x2bafc9(0x20b)),crypto=require('crypto'),Crypt=require(_0x2bafc9(0x215))['Crypt'],RSA=require(_0x2bafc9(0x215))['RSA'],bcrypt=require(_0x2bafc9(0x1fb)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x2bafc9(0x1f6))['default'],googleAnalytics=require(_0x2bafc9(0x235))['default'],ipaddr=require(_0x2bafc9(0x1bc)),argv=require(_0x2bafc9(0x1d0))(process[_0x2bafc9(0x21d)]['slice'](0x2))[_0x2bafc9(0x21d)],PORT=argv['port']||_0x2bafc9(0x1f3),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x2bafc9(0x12a)](PORT))return console[_0x2bafc9(0x1c8)](_0x2bafc9(0x23b)+PORT+_0x2bafc9(0x147)),process[_0x2bafc9(0x232)](0x1);const HOST=argv[_0x2bafc9(0x213)]||null,userID=argv[_0x2bafc9(0x130)]||'';let bbpath=_0x2bafc9(0x1ba),bbpath2='';const botfile=_0x2bafc9(0x192),configfile=_0x2bafc9(0x176),settingsfile=_0x2bafc9(0x173),securefile=_0x2bafc9(0x197);!fs['existsSync'](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2bafc9(0x16b)),configpath=userID?bbpath+_0x2bafc9(0x1e6)+userID+'/':bbpath+'config/',configbackuppath=configpath+_0x2bafc9(0x196);!fs['existsSync'](configpath)&&fs[_0x2bafc9(0x25a)](configpath);!fs[_0x2bafc9(0x21b)](configbackuppath)&&fs[_0x2bafc9(0x25a)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x2bafc9(0x1b5)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2bafc9(0x1e1)]({'settings':{'timeshift':0x0}})[_0x2bafc9(0x1b5)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2bafc9(0x1e1)]({'secure':{},'blacklist':[]})[_0x2bafc9(0x1b5)]();let crypt=new Crypt({'md':_0x2bafc9(0x150),'rsaStandard':_0x2bafc9(0x129)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2bafc9(0x136))[_0x2bafc9(0x234)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require('http')[_0x2bafc9(0x24f)](app);app[_0x2bafc9(0x204)](express['static'](path[_0x2bafc9(0x209)](__dirname,bbpath2,_0x2bafc9(0x153)))),app[_0x2bafc9(0x204)](express[_0x2bafc9(0x127)](path['join'](__dirname,bbpath2,'build'))),app[_0x2bafc9(0x131)]('/',function(_0x2839c5,_0x1d0a8f){const _0x56562f=_0x2bafc9;_0x1d0a8f[_0x56562f(0x11c)](path['join'](__dirname,bbpath2,_0x56562f(0x153),_0x56562f(0x210)));}),app['get'](_0x2bafc9(0x20f),function(_0x5f36cf,_0x5141ab){const _0x3cd596=_0x2bafc9;_0x5141ab[_0x3cd596(0x11c)](path[_0x3cd596(0x209)](__dirname,bbpath2,'build',_0x3cd596(0x210)));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x238),(_0x11f7ab,_0x17767c)=>{const _0x587d1f=_0x2bafc9;_0x17767c[_0x587d1f(0x11c)](path[_0x587d1f(0x209)](__dirname,bbpath2,_0x587d1f(0x1a0),_0x587d1f(0x210)));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x1d7),(_0x57b593,_0x37049c)=>{const _0x589390=_0x2bafc9;_0x37049c[_0x589390(0x11c)](path[_0x589390(0x209)](__dirname,bbpath2,_0x589390(0x1a0),'index.html'));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x194),(_0x4c4af6,_0x2d973f)=>{const _0x555311=_0x2bafc9;_0x2d973f[_0x555311(0x11c)](path[_0x555311(0x209)](__dirname,bbpath2,_0x555311(0x1a0),_0x555311(0x210)));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x1b1),(_0x3a9208,_0x35ed0a)=>{const _0x35bc64=_0x2bafc9;_0x35ed0a[_0x35bc64(0x11c)](path['join'](__dirname,bbpath2,_0x35bc64(0x1a0),_0x35bc64(0x210)));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x1d6),(_0x4c1ab6,_0x4ca13d)=>{const _0x173cb0=_0x2bafc9;_0x4ca13d[_0x173cb0(0x11c)](path['join'](__dirname,bbpath2,_0x173cb0(0x1a0),_0x173cb0(0x210)));}),app[_0x2bafc9(0x131)](_0x2bafc9(0x1fe),(_0x2057ab,_0xd1ec7b)=>{const _0x141cf1=_0x2bafc9;_0xd1ec7b[_0x141cf1(0x11c)](path[_0x141cf1(0x209)](__dirname,bbpath2,'build',_0x141cf1(0x210)));});if(HOST)http[_0x2bafc9(0x1ef)](PORT,HOST);else http[_0x2bafc9(0x1ef)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x2bafc9(0x1be),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require(_0x2bafc9(0x14e));let tgBot;if(settings[_0x2bafc9(0x17c)]&&settings[_0x2bafc9(0x17c)]!=''&&settings[_0x2bafc9(0x231)]&&settings[_0x2bafc9(0x231)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x54542a=_0x2bafc9;console[_0x54542a(0x1c8)](''),console[_0x54542a(0x1c8)](_0x54542a(0x1c6)),logging(_0x54542a(0x229)+PORT),console['log'](_0x54542a(0x1c6));if(config[_0x54542a(0x146)]!=0x0)config[_0x54542a(0x1dc)](_0x31b285=>{const _0x12ba69=_0x54542a;if(_0x31b285['status']==_0x12ba69(0x1e4)||_0x31b285['status']=='new')logging(_0x12ba69(0x1f1)+_0x31b285[_0x12ba69(0x206)]+'\x20|\x20'+_0x31b285['botname']),startBot([_0x31b285[_0x12ba69(0x206)],userID],{'cwd':bbpath},function(_0x2ed53c){if(_0x2ed53c)logging(_0x2ed53c);});else(_0x31b285[_0x12ba69(0x212)]=='disabled'||_0x31b285['status']==_0x12ba69(0x1a7))&&logging(_0x12ba69(0x126)+_0x31b285[_0x12ba69(0x206)]+'\x20|\x20'+_0x31b285[_0x12ba69(0x180)]);});else!newBot&&console[_0x54542a(0x1c8)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x54542a(0x1c8)](_0x54542a(0x1c6)),console[_0x54542a(0x1c8)]('');}function startSocket(){io['on']('connection',_0x226cc1=>{const _0x4864b0=_0x297f;let _0x5cb39c,_0x2c821a,_0xd0b928,_0x269da8,_0x5609aa;const _0x8ad4b9=_0x226cc1[_0x4864b0(0x19a)][_0x4864b0(0x1e8)][_0x4864b0(0x149)];_0x2c821a=_0x8ad4b9['match'](/bot[0-9]{3}/);if(_0x2c821a)_0xd0b928=_0x2c821a[0x0]['match'](/[0-9]{3}/);if(_0xd0b928)_0x5cb39c=_0xd0b928[0x0];else _0x5cb39c=_0x4864b0(0x175);const _0x405397=_0x226cc1[_0x4864b0(0x19a)][_0x4864b0(0x1d1)][_0x4864b0(0x1cc)];if(!_0x405397)_0x226cc1[_0x4864b0(0x11a)](_0x4864b0(0x212),{'publicKey':secure[_0x4864b0(0x134)]});else{_0x269da8=timelyDecrypt(_0x405397,![]);if(!_0x269da8)logging('Unauthorized\x20login\x20attempt\x20(public\x20key)');else{_0x5609aa=normalizeIP(_0x226cc1[_0x4864b0(0x190)][_0x4864b0(0x202)])[_0x4864b0(0x239)];if(!devices[_0x269da8])devices[_0x269da8]={'uuid':_0x269da8,'access':{'token':null}};devices[_0x269da8]['ip']=_0x5609aa;const _0x4b1362=addClient(_0x226cc1['id'],_0x269da8,_0x5cb39c);setAccess(_0x4b1362),_0x226cc1['on'](_0x4864b0(0x1bb),_0xe8e866=>{const _0x3a4035=_0x4864b0,_0x489a39=timelyDecrypt(_0xe8e866[_0x3a4035(0x156)]);if(_0x489a39){_0xe8e866={'username':_0xe8e866[_0x3a4035(0x15a)],'password':_0x489a39},devices[_0x269da8][_0x3a4035(0x167)]=validateCredentials(_0xe8e866,_0x269da8);if(devices[_0x269da8][_0x3a4035(0x167)][_0x3a4035(0x1b7)]==![]&&devices[_0x269da8][_0x3a4035(0x167)][_0x3a4035(0x226)]==_0x3a4035(0x191))_0x226cc1['emit']('status',{'access':devices[_0x269da8][_0x3a4035(0x167)]}),loginAccess2FA(_0x269da8,_0x5609aa);else{if(devices[_0x269da8]['access'][_0x3a4035(0x1b7)]==![]&&devices[_0x269da8][_0x3a4035(0x167)][_0x3a4035(0x226)]==_0x3a4035(0x225))_0x226cc1['emit'](_0x3a4035(0x212),{'access':devices[_0x269da8]['access']});else devices[_0x269da8][_0x3a4035(0x167)][_0x3a4035(0x1b7)]&&devices[_0x269da8][_0x3a4035(0x167)]['reason']==_0x3a4035(0x181)&&(getClientsWithUuid(_0x269da8)['forEach'](_0x25095b=>{setAccess(_0x25095b);}),setTokenRefresh(_0x269da8),setSessionTimeout(_0x3a4035(0x1bb),_0x269da8));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x226cc1['on']('reset-password',()=>{resetPassword();}),_0x226cc1['on'](_0x4864b0(0x19e),_0x229a24=>{removeClient(_0x226cc1['id']);});}}});}function initClient(_0x4bd03f){const _0x48bafe=_0x2bafc9;if(_0x4bd03f!=_0x48bafe(0x175)&&config[_0x48bafe(0x222)]!=''){if(pid[_0x4bd03f])pid[_0x4bd03f][_0x48bafe(0x220)]({'function':_0x48bafe(0x22d),'args':null});}}function getSocket(_0x346325){const _0x2931b8=_0x2bafc9;return io[_0x2931b8(0x18e)][_0x2931b8(0x18e)][_0x2931b8(0x131)](_0x346325);}function setAccess(_0x561c3d){const _0x33f5c7=_0x2bafc9,_0x2045e7=getSocket(_0x561c3d['id']),_0x35e3c2=_0x561c3d[_0x33f5c7(0x1cb)],_0x2cceac=_0x561c3d['bot'];devices[_0x35e3c2][_0x33f5c7(0x167)]=validateAccess(devices[_0x35e3c2]['access'][_0x33f5c7(0x122)],_0x35e3c2),_0x2045e7[_0x33f5c7(0x209)](_0x35e3c2);if(devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x1b7)]){_0x2045e7[_0x33f5c7(0x209)](_0x2cceac);if(_0x2cceac==_0x33f5c7(0x175))initializeSocketBotManager(_0x2045e7);else initializeSocketBot(_0x2045e7);initClient(_0x2cceac);}devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x122)]&&devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x226)]==_0x33f5c7(0x23e)&&setSessionTimeout(_0x33f5c7(0x200),_0x35e3c2),devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x122)]&&devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x226)]==_0x33f5c7(0x1ff)&&setSessionTimeout(_0x33f5c7(0x1bb),_0x35e3c2),_0x2045e7['emit'](_0x33f5c7(0x212),{'status':_0x561c3d[_0x33f5c7(0x1dd)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x35e3c2][_0x33f5c7(0x167)],'externalip':devices[_0x35e3c2]['ip'],'publicKey':secure[_0x33f5c7(0x134)]}),devices[_0x35e3c2][_0x33f5c7(0x167)]['allow']==![]&&devices[_0x35e3c2][_0x33f5c7(0x167)][_0x33f5c7(0x226)]=='2FA\x20required'&&temporaryAccess2FA(_0x35e3c2,devices[_0x35e3c2]['ip']);}function setSessionTimeout(_0x25d7f3,_0x11cea1){const _0x4692e6=_0x2bafc9;let _0x18ce86;if(_0x25d7f3==_0x4692e6(0x1bb))_0x18ce86=loginExpiry*0x3c*0x3e8;else _0x18ce86=devices[_0x11cea1][_0x4692e6(0x164)]['expiry']*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x11cea1]['telegramIpApproval']['timestamp']);if(devices[_0x11cea1]['pidExpireLogin'])clearTimeout(devices[_0x11cea1][_0x4692e6(0x1a1)]);devices[_0x11cea1][_0x4692e6(0x1a1)]=setTimeout(()=>{const _0x1ff34=_0x4692e6;if(devices[_0x11cea1][_0x1ff34(0x20e)])clearTimeout(devices[_0x11cea1][_0x1ff34(0x20e)]);removeSocketListeners(_0x11cea1),addBlacklist(_0x11cea1),devices[_0x11cea1][_0x1ff34(0x164)]=null,devices[_0x11cea1][_0x1ff34(0x249)]=null,devices[_0x11cea1][_0x1ff34(0x167)][_0x1ff34(0x122)]=null,devices[_0x11cea1][_0x1ff34(0x167)]=validateAccess(devices[_0x11cea1][_0x1ff34(0x167)][_0x1ff34(0x122)],_0x11cea1),!(devices[_0x11cea1][_0x1ff34(0x167)]['allow']&&devices[_0x11cea1][_0x1ff34(0x167)][_0x1ff34(0x226)]==_0x1ff34(0x13a))&&(_0x25d7f3==_0x1ff34(0x1bb)?io['to'](_0x11cea1)[_0x1ff34(0x11a)]('status',{'access':{'allow':![],'reason':_0x1ff34(0x162),'token':null}}):io['to'](_0x11cea1)[_0x1ff34(0x11a)](_0x1ff34(0x212),{'access':{'allow':![],'reason':_0x1ff34(0x1f8),'token':null}})),devices[_0x11cea1][_0x1ff34(0x167)][_0x1ff34(0x122)]=null;},_0x18ce86);}function setTokenRefresh(_0x3fb7f8){const _0x2d012d=_0x2bafc9;if(devices[_0x3fb7f8][_0x2d012d(0x20e)])clearTimeout(devices[_0x3fb7f8][_0x2d012d(0x20e)]);devices[_0x3fb7f8][_0x2d012d(0x20e)]=setTimeout(()=>{const _0x3fa135=_0x2d012d;getClientsWithUuid(_0x3fb7f8)[_0x3fa135(0x146)]!=0x0?(devices[_0x3fb7f8][_0x3fa135(0x167)]=refreshToken(_0x3fb7f8),io['to'](_0x3fb7f8)[_0x3fa135(0x11a)](_0x3fa135(0x212),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3fb7f8][_0x3fa135(0x167)],'externalip':devices[_0x3fb7f8]['ip'],'publicKey':secure[_0x3fa135(0x134)]}),setTokenRefresh(_0x3fb7f8)):clearTimeout(devices[_0x3fb7f8][_0x3fa135(0x20e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x51af12){const _0x3f899e=_0x2bafc9,_0x18d5fb=getClient(_0x51af12['id'])['uuid'];_0x51af12['emit'](_0x3f899e(0x205),config),_0x51af12[_0x3f899e(0x11a)]('settings',cleanSettings()),_0x51af12['on'](_0x3f899e(0x198),_0x2295ba=>{const _0x5dcb48=_0x3f899e;if(validateAccess(_0x2295ba,_0x18d5fb)[_0x5dcb48(0x1b7)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x51af12['on'](_0x3f899e(0x121),(_0x210f26,_0x2092ae)=>{const _0x528111=_0x3f899e;if(validateAccess(_0x2092ae,_0x18d5fb)[_0x528111(0x1b7)])toggleBot(_0x210f26[_0x528111(0x206)],_0x210f26[_0x528111(0x212)],_0x210f26[_0x528111(0x1fa)]);else logging(_0x528111(0x139));}),_0x51af12['on'](_0x3f899e(0x1e9),(_0x159520,_0x1e641b)=>{const _0x1ca18c=_0x3f899e;if(validateAccess(_0x1e641b,_0x18d5fb)[_0x1ca18c(0x1b7)])deleteBot(_0x159520);else logging(_0x1ca18c(0x13d));}),_0x51af12['on'](_0x3f899e(0x22a),(_0x538122,_0x4eabb6)=>{const _0xdbab70=_0x3f899e;if(validateAccess(_0x4eabb6,_0x18d5fb)[_0xdbab70(0x1b7)])storeSettings(_0x538122,!![]);else logging(_0xdbab70(0x1ca));}),_0x51af12['on'](_0x3f899e(0x1aa),(_0x4d574b,_0x215f49)=>{const _0x18f63d=_0x3f899e;if(validateAccess(_0x215f49,_0x18d5fb)[_0x18f63d(0x1b7)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x51af12['on'](_0x3f899e(0x1af),_0x5c730f=>{const _0x234ebc=_0x3f899e;if(validateAccess(_0x5c730f,_0x18d5fb)[_0x234ebc(0x1b7)]){if(devices[_0x18d5fb][_0x234ebc(0x20e)])clearTimeout(devices[_0x18d5fb][_0x234ebc(0x20e)]);if(devices[_0x18d5fb][_0x234ebc(0x1a1)])clearTimeout(devices[_0x18d5fb][_0x234ebc(0x1a1)]);removeSocketListeners(getClient(_0x51af12['id'])[_0x234ebc(0x1cb)]),addBlacklist(_0x18d5fb),devices[_0x18d5fb][_0x234ebc(0x164)]=null,devices[_0x18d5fb][_0x234ebc(0x249)]=null,devices[_0x18d5fb][_0x234ebc(0x167)][_0x234ebc(0x122)]=null,io['to'](getClient(_0x51af12['id'])[_0x234ebc(0x1cb)])[_0x234ebc(0x11a)](_0x234ebc(0x212),{'access':{'allow':![],'reason':_0x234ebc(0x174),'token':null}});}else logging(_0x234ebc(0x152));});}function initializeSocketBot(_0x3d102d){const _0x238908=_0x2bafc9,_0x6bd26f=getClient(_0x3d102d['id'])[_0x238908(0x1e5)],_0x188a00=getClient(_0x3d102d['id'])[_0x238908(0x1cb)];_0x3d102d['on'](_0x238908(0x193),(_0x53d5ef,_0x532bff)=>{const _0xc99864=_0x238908;if(validateAccess(_0x532bff,_0x188a00)[_0xc99864(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f][_0xc99864(0x220)]({'function':_0xc99864(0x20c),'args':_0x53d5ef});}else logging(_0xc99864(0x133));}),_0x3d102d['on'](_0x238908(0x1b2),(_0x263119,_0x15e199)=>{const _0x45485d=_0x238908;if(validateAccess(_0x15e199,_0x188a00)[_0x45485d(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f][_0x45485d(0x220)]({'function':_0x45485d(0x203),'args':_0x263119});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3d102d['on'](_0x238908(0x18c),(_0x571a36,_0x44a096)=>{const _0x4e24b0=_0x238908;if(validateAccess(_0x44a096,_0x188a00)['allow']){if(pid[_0x6bd26f])pid[_0x6bd26f][_0x4e24b0(0x220)]({'function':_0x4e24b0(0x214),'args':_0x571a36});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3d102d['on']('store-headless',(_0x24a249,_0x42ef66)=>{const _0x365824=_0x238908;if(validateAccess(_0x42ef66,_0x188a00)[_0x365824(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f][_0x365824(0x220)]({'function':_0x365824(0x24a),'args':_0x24a249});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3d102d['on'](_0x238908(0x20d),_0x18db5b=>{const _0x25b40c=_0x238908;if(validateAccess(_0x18db5b,_0x188a00)[_0x25b40c(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f]['send']({'function':_0x25b40c(0x24d),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3d102d['on']('place-order',(_0x418eba,_0x51853d)=>{const _0x5aba60=_0x238908;if(validateAccess(_0x51853d,_0x188a00)[_0x5aba60(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f][_0x5aba60(0x220)]({'function':'placeOrder','args':_0x418eba});}else logging(_0x5aba60(0x195));}),_0x3d102d['on'](_0x238908(0x1b3),_0x42ffb6=>{const _0xe93e52=_0x238908;if(validateAccess(_0x42ffb6,_0x188a00)[_0xe93e52(0x1b7)]){if(pid[_0x6bd26f])pid[_0x6bd26f][_0xe93e52(0x220)]({'function':_0xe93e52(0x14b),'args':null});}else logging(_0xe93e52(0x254));}),_0x3d102d['on'](_0x238908(0x1af),_0x522a32=>{const _0x1de002=_0x238908;if(validateAccess(_0x522a32,_0x188a00)[_0x1de002(0x1b7)]){if(devices[_0x188a00][_0x1de002(0x20e)])clearTimeout(devices[_0x188a00]['pidRefreshToken']);if(devices[_0x188a00][_0x1de002(0x1a1)])clearTimeout(devices[_0x188a00][_0x1de002(0x1a1)]);removeSocketListeners(getClient(_0x3d102d['id'])[_0x1de002(0x1cb)]),addBlacklist(_0x188a00),devices[_0x188a00][_0x1de002(0x164)]=null,devices[_0x188a00][_0x1de002(0x249)]=null,devices[_0x188a00][_0x1de002(0x167)][_0x1de002(0x122)]=null,io['to'](getClient(_0x3d102d['id'])['uuid'])[_0x1de002(0x11a)](_0x1de002(0x212),{'access':{'allow':![],'reason':_0x1de002(0x174),'token':null}});}else logging(_0x1de002(0x152));});}function removeSocketListeners(_0xd2c838){const _0x1282de=_0x2bafc9;getClientsWithUuid(_0xd2c838)[_0x1282de(0x1dc)](_0x1aff99=>{const _0x80293e=_0x1282de;getSocket(_0x1aff99['id'])[_0x80293e(0x11f)]();});}function cleanSettings(){const _0x4aac30=_0x2bafc9;let _0x6c0b92=settings;return settings[_0x4aac30(0x17c)]&&settings[_0x4aac30(0x17c)]!=''&&(_0x6c0b92={..._0x6c0b92,'telegramToken':'************'}),settings[_0x4aac30(0x1b8)]&&settings[_0x4aac30(0x1b8)]!=''&&(_0x6c0b92={..._0x6c0b92,'bbPassword':'************'}),_0x6c0b92;}function updateBB(){const _0x235c01=_0x2bafc9;process[_0x235c01(0x220)]({'update':!![]},_0x18a4eb=>{});}function startBot(_0x4715a7,_0x39b749,_0x143820){const _0x1a614f=_0x2bafc9;let _0x283397=![];const _0x3873e4=_0x4715a7[0x0];_0x39b749={..._0x39b749,'stdio':[_0x1a614f(0x1a2),_0x1a614f(0x1a2),'inherit',_0x1a614f(0x21e)]},pid[_0x3873e4]=childProcess['fork'](botfile,_0x4715a7,_0x39b749),pid[_0x3873e4]['on'](_0x1a614f(0x11e),_0x552b7e=>{const _0x5909d1=_0x1a614f;switch(Object[_0x5909d1(0x233)](_0x552b7e)[0x0]){case'botname':updateBotName(_0x3873e4,_0x552b7e[_0x5909d1(0x180)]);break;case _0x5909d1(0x212):updateStatus(_0x3873e4,_0x552b7e['status']);break;case _0x5909d1(0x1fa):updateLive(_0x3873e4,_0x552b7e['live']);break;case _0x5909d1(0x1f0):updateLive(_0x3873e4,_0x552b7e[_0x5909d1(0x1f0)]),io['to'](_0x3873e4)[_0x5909d1(0x11a)]('status',{'access':{'allow':![],'reason':_0x5909d1(0x243),'token':null}});break;case _0x5909d1(0x1d3):_0x552b7e[_0x5909d1(0x1d3)]==_0x5909d1(0x145)&&stopBot(_0x3873e4);_0x552b7e[_0x5909d1(0x1d3)]=='kill'&&toggleBot(_0x3873e4,_0x5909d1(0x16e),_0x5909d1(0x1b6));break;case _0x5909d1(0x15e):sendTelegram(_0x3873e4,_0x552b7e[_0x5909d1(0x15e)]);break;case'function':io['to'](_0x3873e4)[_0x5909d1(0x11a)](_0x552b7e['function'],_0x552b7e['args']);break;}}),pid[_0x3873e4]['on'](_0x1a614f(0x23d),function(_0x5be12c){if(_0x283397)return;_0x283397=!![],_0x143820(_0x5be12c);}),pid[_0x3873e4]['on'](_0x1a614f(0x232),function(_0xe93b2){const _0x15e07e=_0x1a614f;if(_0x283397)return;_0x283397=!![],_0x143820(null);const _0x5d3cb1=dbConfig[_0x15e07e(0x131)]('bots')['find']({'botID':_0x3873e4})['value']();_0x5d3cb1&&(_0x5d3cb1['status']==_0x15e07e(0x1e4)||_0x5d3cb1[_0x15e07e(0x212)]=='new')&&(updateLive(_0x3873e4,_0x15e07e(0x1b6)),logging(_0x15e07e(0x185)+_0x3873e4),startBot([_0x3873e4,userID],{'cwd':bbpath},function(_0x18a149){if(_0x18a149)logging(_0x18a149);}));});}function stopBot(_0x8589ac){getClientsWithBotID(_0x8589ac)['forEach'](_0x5c9637=>{const _0x257b14=_0x297f;getSocket(_0x5c9637['id'])[_0x257b14(0x19e)](!![]),removeClient(_0x5c9637['id']);});if(pid[_0x8589ac])pid[_0x8589ac]['kill']();}function addBot(){const _0x3f2f68=_0x2bafc9;let _0x3b4dab;for(let _0x389404=0x1;_0x389404<0x3e9;_0x389404++){_0x3b4dab=_0x389404[_0x3f2f68(0x1b0)]()[_0x3f2f68(0x24c)](0x3,'0');let _0x3c033e=config[_0x3f2f68(0x22c)](_0x5a805d=>_0x5a805d['botID']==_0x3b4dab);if(!_0x3c033e)break;}if(_0x3b4dab===_0x3f2f68(0x1d8)){logging(_0x3f2f68(0x216));return;}logging(_0x3f2f68(0x257)+_0x3b4dab),dbConfig[_0x3f2f68(0x131)](_0x3f2f68(0x205))['push']({'botID':_0x3b4dab,'botname':_0x3f2f68(0x13b)+_0x3b4dab,'status':'new','live':''})[_0x3f2f68(0x1b5)](),startBot([_0x3b4dab,userID],{'cwd':bbpath},function(_0x37cf26){if(_0x37cf26)logging(_0x37cf26);}),config=getConfiguration(),io['to'](_0x3f2f68(0x175))[_0x3f2f68(0x11a)](_0x3f2f68(0x205),config);}function deleteBot(_0x1defe1){const _0x13355d=_0x2bafc9;getClientsWithBotID(_0x1defe1)[_0x13355d(0x1dc)](_0x16f28a=>{const _0x148554=_0x13355d;getSocket(_0x16f28a['id'])[_0x148554(0x19e)](!![]),removeClient(_0x16f28a['id']);}),dbConfig[_0x13355d(0x131)](_0x13355d(0x205))[_0x13355d(0x211)]({'botID':_0x1defe1})[_0x13355d(0x1b5)](),logging(_0x13355d(0x253)+_0x1defe1),stopBot(_0x1defe1);try{fs[_0x13355d(0x1c3)](path[_0x13355d(0x209)](configpath,_0x13355d(0x1cf)+_0x1defe1+'-config.json')),fs['unlinkSync'](path[_0x13355d(0x209)](configpath,'bot-'+_0x1defe1+_0x13355d(0x1ea))),fs['unlinkSync'](path[_0x13355d(0x209)](configpath,'bot-'+_0x1defe1+_0x13355d(0x217))),fs[_0x13355d(0x1c3)](path[_0x13355d(0x209)](configpath,_0x13355d(0x1cf)+_0x1defe1+_0x13355d(0x22b)));}catch(_0x2ea005){if(_0x2ea005)logging(_0x13355d(0x157),_0x2ea005);}config=getConfiguration(),io['to']('botmanager')[_0x13355d(0x11a)](_0x13355d(0x205),config);}function toggleBot(_0x1e1bce,_0x5a34b7,_0x4d9d72){const _0xa3729a=_0x2bafc9;dbConfig[_0xa3729a(0x131)](_0xa3729a(0x205))[_0xa3729a(0x22c)]({'botID':_0x1e1bce})[_0xa3729a(0x163)]({'status':_0x5a34b7})['assign']({'live':_0x4d9d72})[_0xa3729a(0x1b5)]();if(_0x5a34b7==_0xa3729a(0x1e4)||_0x5a34b7==_0xa3729a(0x15c))logging(_0xa3729a(0x118)+_0x1e1bce),startBot([_0x1e1bce,userID],{'cwd':bbpath},function(_0x14df05){if(_0x14df05)logging(_0x14df05);});else(_0x5a34b7==_0xa3729a(0x16e)||_0x5a34b7==_0xa3729a(0x1a7))&&(logging(_0xa3729a(0x1df)+_0x1e1bce),stopBot(_0x1e1bce));config=getConfiguration(),io['to']('botmanager')[_0xa3729a(0x11a)]('bots',config);}function toggleStatus(_0x1d6746){const _0x43a9d0=_0x2bafc9;let _0x3da115=dbConfig[_0x43a9d0(0x131)]('bots')[_0x43a9d0(0x22c)]({'botID':_0x1d6746})[_0x43a9d0(0x1f2)](),_0x1902c4;if(_0x3da115[_0x43a9d0(0x212)]==='enabled')_0x1902c4='disabled';else{if(_0x3da115[_0x43a9d0(0x212)]===_0x43a9d0(0x15c))_0x1902c4=_0x43a9d0(0x1a7);else{if(_0x3da115[_0x43a9d0(0x212)]==='new-disabled')_0x1902c4=_0x43a9d0(0x15c);else{if(_0x3da115['status']===_0x43a9d0(0x16e))_0x1902c4=_0x43a9d0(0x1e4);}}}return _0x1902c4;}function updateStatus(_0x2d0157,_0x1bef26){const _0x4444e3=_0x2bafc9;dbConfig['get'](_0x4444e3(0x205))[_0x4444e3(0x22c)]({'botID':_0x2d0157})[_0x4444e3(0x163)]({'status':_0x1bef26})['write'](),config=getConfiguration(),io['to'](_0x4444e3(0x175))[_0x4444e3(0x11a)](_0x4444e3(0x205),config);}function updateLive(_0x493b8a,_0x41f011){const _0x4efe20=_0x2bafc9;dbConfig[_0x4efe20(0x131)](_0x4efe20(0x205))['find']({'botID':_0x493b8a})[_0x4efe20(0x163)]({'live':_0x41f011})[_0x4efe20(0x1b5)](),config=getConfiguration(),io['to'](_0x4efe20(0x175))[_0x4efe20(0x11a)](_0x4efe20(0x205),config);}function updateBotName(_0x3f1649,_0x19f927){const _0x7eb22a=_0x2bafc9;dbConfig[_0x7eb22a(0x131)](_0x7eb22a(0x205))['find']({'botID':_0x3f1649})['assign']({'botname':_0x19f927})[_0x7eb22a(0x1b5)](),config=getConfiguration(),io['to'](_0x7eb22a(0x175))[_0x7eb22a(0x11a)]('bots',config);}function telegramError(_0x4b814e){const _0x5a391e=_0x2bafc9;console[_0x5a391e(0x1c8)](getTimeStamp()+_0x5a391e(0x12f));}function validateTelegram(_0x314b32){const _0x5ecb8d=_0x2bafc9;if(_0x314b32['from']['username']!=settings['telegramUsername']&&'@'+_0x314b32[_0x5ecb8d(0x19b)]['username']!=settings['telegramUsername'])return tgBot[_0x5ecb8d(0x17d)](_0x314b32['chat']['id'],_0x5ecb8d(0x172),{'parse_mode':_0x5ecb8d(0x244)})['catch'](_0x53f101=>{telegramError(_0x53f101);}),![];return!![];}async function initTelegram(){const _0x766c4b=_0x2bafc9;if(tgBot)tgBot[_0x766c4b(0x19c)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x766c4b(0x17c)],{'polling':!![]});let _0x21490f=_0x766c4b(0x1c0);_0x21490f+='\x0a',_0x21490f+='/enable\x20-\x20enable\x20notifications\x0a',_0x21490f+=_0x766c4b(0x165),_0x21490f+=_0x766c4b(0x17e),_0x21490f+=_0x766c4b(0x154),_0x21490f+='/on\x20-\x20start\x20bot(s)\x0a',_0x21490f+=_0x766c4b(0x207),_0x21490f+=_0x766c4b(0x208),_0x21490f+=_0x766c4b(0x188);let _0x5d27e7='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5d27e7+='\x0a',_0x5d27e7+=_0x21490f,tgBot[_0x766c4b(0x179)](/\/start/,_0x597827=>{const _0x4b31b0=_0x766c4b;if(!validateTelegram(_0x597827))return;if(settings[_0x4b31b0(0x13e)]!=_0x597827['chat']['id'])updateSetting('telegramChatId',_0x597827['chat']['id']);updateSetting(_0x4b31b0(0x237),!![]),tgBot[_0x4b31b0(0x17d)](_0x597827[_0x4b31b0(0x158)]['id'],_0x5d27e7)[_0x4b31b0(0x247)](_0x6741d5=>{telegramError(_0x6741d5);});}),tgBot[_0x766c4b(0x179)](/\/enable/,_0xd337a3=>{const _0x24a921=_0x766c4b;if(!validateTelegram(_0xd337a3))return;if(settings[_0x24a921(0x13e)]!=_0xd337a3['chat']['id'])updateSetting(_0x24a921(0x13e),_0xd337a3[_0x24a921(0x158)]['id']);updateSetting(_0x24a921(0x237),!![]),tgBot['sendMessage'](_0xd337a3[_0x24a921(0x158)]['id'],'Notifications\x20enabled')['catch'](_0x325d6b=>{telegramError(_0x325d6b);});}),tgBot[_0x766c4b(0x179)](/\/config/,async _0x4798fb=>{const _0x21892c=_0x766c4b;if(!validateTelegram(_0x4798fb))return;tgBot[_0x21892c(0x12d)](_0x21892c(0x1a6)),tgBot[_0x21892c(0x17d)](_0x4798fb[_0x21892c(0x158)]['id'],_0x21892c(0x1ac),{'reply_markup':{'inline_keyboard':[[{'text':_0x21892c(0x241),'callback_data':_0x21892c(0x14d)},{'text':_0x21892c(0x1da),'callback_data':_0x21892c(0x18b)},{'text':'All','callback_data':'all'}]]}})[_0x21892c(0x247)](_0x3ea665=>{telegramError(_0x3ea665);}),tgBot['on'](_0x21892c(0x1a6),async _0x4c6ea6=>{const _0x3a4046=_0x21892c,_0x3b745e=_0x4c6ea6[_0x3a4046(0x1ee)],_0x1c7205=_0x4c6ea6['message'];tgBot[_0x3a4046(0x23c)](_0x4c6ea6['id'])[_0x3a4046(0x15f)](async()=>{const _0x4b1a16=_0x3a4046;_0x3b745e==_0x4b1a16(0x14d)&&(updateSetting(_0x4b1a16(0x117),'orders'),updateSetting(_0x4b1a16(0x237),!![]),await tgBot[_0x4b1a16(0x17d)](_0x1c7205['chat']['id'],_0x4b1a16(0x1ab))[_0x4b1a16(0x247)](_0x5c44ca=>{telegramError(_0x5c44ca);}));_0x3b745e==_0x4b1a16(0x18b)&&(updateSetting(_0x4b1a16(0x117),_0x4b1a16(0x18b)),updateSetting(_0x4b1a16(0x237),!![]),await tgBot[_0x4b1a16(0x17d)](_0x1c7205[_0x4b1a16(0x158)]['id'],_0x4b1a16(0x22e))[_0x4b1a16(0x247)](_0x115ff3=>{telegramError(_0x115ff3);}));_0x3b745e=='all'&&(updateSetting('telegramEvents',_0x4b1a16(0x256)),updateSetting(_0x4b1a16(0x237),!![]),await tgBot[_0x4b1a16(0x17d)](_0x1c7205[_0x4b1a16(0x158)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x4b1a16(0x247)](_0x59b123=>{telegramError(_0x59b123);}));if(!settings[_0x4b1a16(0x13e)])tgBot['sendMessage'](_0x1c7205[_0x4b1a16(0x158)]['id'],_0x4b1a16(0x168))['catch'](_0x4e70c8=>{telegramError(_0x4e70c8);});}),tgBot[_0x3a4046(0x12d)](_0x3a4046(0x1a6));});}),tgBot['onText'](/\/status/,_0x4edef5=>{const _0x2c07b3=_0x766c4b;if(!validateTelegram(_0x4edef5))return;let _0x42d71c='<b>Balance\x20Bot\x20status:</b>\x0a';config[_0x2c07b3(0x1dc)](_0x4869c3=>{const _0x5778ea=_0x2c07b3;_0x42d71c+='Bot\x20'+_0x4869c3[_0x5778ea(0x206)]+'\x20|\x20'+_0x4869c3[_0x5778ea(0x180)]+':\x20'+_0x4869c3['status']+_0x5778ea(0x21c)+_0x4869c3[_0x5778ea(0x1fa)]+'\x0a';}),_0x42d71c+='\x0a',_0x42d71c+=_0x2c07b3(0x18d),_0x42d71c+=!settings[_0x2c07b3(0x237)]?_0x2c07b3(0x1e3):_0x2c07b3(0x1cd),_0x42d71c+=settings[_0x2c07b3(0x237)]?settings[_0x2c07b3(0x117)]==_0x2c07b3(0x256)?_0x2c07b3(0x1d9):_0x2c07b3(0x13c)+settings[_0x2c07b3(0x117)]+'\x20only\x0a':'',tgBot[_0x2c07b3(0x17d)](_0x4edef5[_0x2c07b3(0x158)]['id'],_0x42d71c,{'parse_mode':'HTML'})[_0x2c07b3(0x247)](_0x14c62f=>{telegramError(_0x14c62f);});}),tgBot[_0x766c4b(0x179)](/\/restart/,_0x2e2a99=>{const _0x3c6038=_0x766c4b;if(!validateTelegram(_0x2e2a99))return;tgBot[_0x3c6038(0x12d)](_0x3c6038(0x1a6));const _0x1902f6=getEnabledBots();if(_0x1902f6[_0x3c6038(0x146)]==0x0)tgBot[_0x3c6038(0x17d)](_0x2e2a99[_0x3c6038(0x158)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x3c6038(0x247)](_0x37756a=>{telegramError(_0x37756a);});else{if(_0x1902f6[_0x3c6038(0x146)]>0x1)_0x1902f6[_0x3c6038(0x199)]({'botID':_0x3c6038(0x256)});let _0x2d8bea=[],_0xaae6fb=[];const _0x5b0db1=_0x1902f6[_0x3c6038(0x146)]%0x4==0x0||_0x1902f6[_0x3c6038(0x146)]%0x4==0x3||_0x1902f6[_0x3c6038(0x146)]%0x3==0x1?0x4:0x3;let _0xfb4584=0x0;_0x1902f6[_0x3c6038(0x1dc)]((_0x591d2a,_0x4b7375)=>{const _0x49d763=_0x3c6038;if(_0x4b7375%_0x5b0db1==0x0)_0xaae6fb=[];_0xaae6fb[_0x49d763(0x199)]({'text':_0x591d2a[_0x49d763(0x206)]==_0x49d763(0x256)?'All\x20bots':_0x49d763(0x13b)+_0x591d2a['botID'],'callback_data':_0x591d2a['botID']}),_0x4b7375%_0x5b0db1==0x0&&(_0x2d8bea[_0xfb4584]=_0xaae6fb,_0xfb4584++);}),tgBot[_0x3c6038(0x17d)](_0x2e2a99[_0x3c6038(0x158)]['id'],_0x3c6038(0x1de),{'reply_markup':{'inline_keyboard':_0x2d8bea}})[_0x3c6038(0x247)](_0x533a7f=>{telegramError(_0x533a7f);}),tgBot['on'](_0x3c6038(0x1a6),async _0x538a59=>{const _0x2ad978=_0x3c6038,_0x3e4572=_0x538a59['data'],_0x4930c5=_0x538a59['message'];tgBot[_0x2ad978(0x23c)](_0x538a59['id'])[_0x2ad978(0x15f)](async()=>{const _0x18a349=_0x2ad978;if(_0x3e4572==_0x18a349(0x256)){if(settings[_0x18a349(0x117)]==_0x18a349(0x14d))tgBot[_0x18a349(0x17d)](_0x4930c5[_0x18a349(0x158)]['id'],_0x18a349(0x15d))[_0x18a349(0x247)](_0x3d7916=>{telegramError(_0x3d7916);});config['forEach'](_0x396a5f=>{const _0x372ade=_0x18a349;stopBot(_0x396a5f[_0x372ade(0x206)]);});}else{if(settings[_0x18a349(0x117)]==_0x18a349(0x14d))tgBot[_0x18a349(0x17d)](_0x4930c5['chat']['id'],_0x18a349(0x224)+_0x3e4572)[_0x18a349(0x247)](_0x592ab6=>{telegramError(_0x592ab6);});stopBot(_0x3e4572);}}),tgBot[_0x2ad978(0x12d)](_0x2ad978(0x1a6));});}}),tgBot[_0x766c4b(0x179)](/\/on/,_0x430ed1=>{const _0x38951a=_0x766c4b;if(!validateTelegram(_0x430ed1))return;tgBot[_0x38951a(0x12d)](_0x38951a(0x1a6));const _0x965ed4=getDisabledBots();if(_0x965ed4[_0x38951a(0x146)]==0x0)tgBot['sendMessage'](_0x430ed1[_0x38951a(0x158)]['id'],_0x38951a(0x1a8))['catch'](_0x52df5f=>{telegramError(_0x52df5f);});else{if(_0x965ed4[_0x38951a(0x146)]>0x1)_0x965ed4['push']({'botID':'all'});let _0x3ea81a=[],_0x36b11e=[];const _0x19ff24=_0x965ed4['length']%0x4==0x0||_0x965ed4[_0x38951a(0x146)]%0x4==0x3||_0x965ed4[_0x38951a(0x146)]%0x3==0x1?0x4:0x3;let _0x23076f=0x0;_0x965ed4['forEach']((_0x13efd7,_0x1a3d96)=>{const _0x4f7331=_0x38951a;if(_0x1a3d96%_0x19ff24==0x0)_0x36b11e=[];_0x36b11e[_0x4f7331(0x199)]({'text':_0x13efd7[_0x4f7331(0x206)]==_0x4f7331(0x256)?_0x4f7331(0x1bf):_0x4f7331(0x13b)+_0x13efd7['botID'],'callback_data':_0x13efd7['botID']}),_0x1a3d96%_0x19ff24==0x0&&(_0x3ea81a[_0x23076f]=_0x36b11e,_0x23076f++);}),tgBot[_0x38951a(0x17d)](_0x430ed1[_0x38951a(0x158)]['id'],_0x38951a(0x14c),{'reply_markup':{'inline_keyboard':_0x3ea81a}})[_0x38951a(0x247)](_0x5d17b9=>{telegramError(_0x5d17b9);}),tgBot['on']('callback_query',async _0x1f0d3c=>{const _0x32991e=_0x38951a,_0x335083=_0x1f0d3c[_0x32991e(0x1ee)],_0x366486=_0x1f0d3c[_0x32991e(0x11e)];tgBot['answerCallbackQuery'](_0x1f0d3c['id'])['then'](async()=>{const _0x1e5c54=_0x32991e;if(_0x335083==_0x1e5c54(0x256)){if(settings[_0x1e5c54(0x117)]==_0x1e5c54(0x14d))tgBot[_0x1e5c54(0x17d)](_0x366486[_0x1e5c54(0x158)]['id'],_0x1e5c54(0x258))[_0x1e5c54(0x247)](_0x578a19=>{telegramError(_0x578a19);});_0x965ed4[_0x1e5c54(0x1dc)](_0x395882=>{const _0x1c46de=_0x1e5c54;if(_0x395882[_0x1c46de(0x206)]!=_0x1c46de(0x256))toggleBot(_0x395882[_0x1c46de(0x206)],toggleStatus(_0x395882[_0x1c46de(0x206)]),_0x1c46de(0x1b6));});}else{if(settings['telegramEvents']==_0x1e5c54(0x14d))tgBot[_0x1e5c54(0x17d)](_0x366486[_0x1e5c54(0x158)]['id'],_0x1e5c54(0x24e)+_0x335083)[_0x1e5c54(0x247)](_0x5a925c=>{telegramError(_0x5a925c);});toggleBot(_0x335083,toggleStatus(_0x335083),_0x1e5c54(0x1b6));}}),tgBot[_0x32991e(0x12d)](_0x32991e(0x1a6));});}}),tgBot['onText'](/\/off/,_0x5becf2=>{const _0x2462d0=_0x766c4b;if(!validateTelegram(_0x5becf2))return;tgBot[_0x2462d0(0x12d)](_0x2462d0(0x1a6));const _0x55fc1c=getEnabledBots();if(_0x55fc1c[_0x2462d0(0x146)]==0x0)tgBot[_0x2462d0(0x17d)](_0x5becf2['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x2462d0(0x247)](_0x213bf0=>{telegramError(_0x213bf0);});else{if(_0x55fc1c[_0x2462d0(0x146)]>0x1)_0x55fc1c[_0x2462d0(0x199)]({'botID':_0x2462d0(0x256)});let _0x30e6bc=[],_0x343d48=[];const _0x3f3e40=_0x55fc1c[_0x2462d0(0x146)]%0x4==0x0||_0x55fc1c[_0x2462d0(0x146)]%0x4==0x3||_0x55fc1c[_0x2462d0(0x146)]%0x3==0x1?0x4:0x3;let _0x1106d9=0x0;_0x55fc1c[_0x2462d0(0x1dc)]((_0x2f728b,_0x137671)=>{const _0x263927=_0x2462d0;if(_0x137671%_0x3f3e40==0x0)_0x343d48=[];_0x343d48[_0x263927(0x199)]({'text':_0x2f728b['botID']==_0x263927(0x256)?_0x263927(0x1bf):_0x263927(0x13b)+_0x2f728b[_0x263927(0x206)],'callback_data':_0x2f728b[_0x263927(0x206)]}),_0x137671%_0x3f3e40==0x0&&(_0x30e6bc[_0x1106d9]=_0x343d48,_0x1106d9++);}),tgBot[_0x2462d0(0x17d)](_0x5becf2[_0x2462d0(0x158)]['id'],_0x2462d0(0x223),{'reply_markup':{'inline_keyboard':_0x30e6bc}})[_0x2462d0(0x247)](_0x319b1d=>{telegramError(_0x319b1d);}),tgBot['on']('callback_query',async _0x2a87c8=>{const _0x1c348d=_0x2462d0,_0x207ff8=_0x2a87c8[_0x1c348d(0x1ee)],_0x48ffa3=_0x2a87c8['message'];tgBot['answerCallbackQuery'](_0x2a87c8['id'])['then'](async()=>{const _0xf19008=_0x1c348d;if(_0x207ff8==_0xf19008(0x256)){if(settings['telegramEvents']==_0xf19008(0x14d))tgBot[_0xf19008(0x17d)](_0x48ffa3[_0xf19008(0x158)]['id'],_0xf19008(0x182))[_0xf19008(0x247)](_0x9abc65=>{telegramError(_0x9abc65);});_0x55fc1c[_0xf19008(0x1dc)](_0x1827c0=>{const _0x569b61=_0xf19008;if(_0x1827c0['botID']!=_0x569b61(0x256))toggleBot(_0x1827c0[_0x569b61(0x206)],toggleStatus(_0x1827c0['botID']),_0x569b61(0x1b6));});}else{if(settings['telegramEvents']==_0xf19008(0x14d))tgBot[_0xf19008(0x17d)](_0x48ffa3[_0xf19008(0x158)]['id'],_0xf19008(0x1c7)+_0x207ff8)[_0xf19008(0x247)](_0x22798b=>{telegramError(_0x22798b);});toggleBot(_0x207ff8,toggleStatus(_0x207ff8),_0xf19008(0x1b6));}}),tgBot['removeListener'](_0x1c348d(0x1a6));});}}),tgBot[_0x766c4b(0x179)](/\/disable/,_0x2033cc=>{const _0x33294c=_0x766c4b;if(!validateTelegram(_0x2033cc))return;tgBot[_0x33294c(0x17d)](_0x2033cc[_0x33294c(0x158)]['id'],_0x33294c(0x155))[_0x33294c(0x247)](_0x27607c=>{telegramError(_0x27607c);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x766c4b(0x179)](/\/help/,_0x483adb=>{const _0x275c5e=_0x766c4b;if(!validateTelegram(_0x483adb))return;tgBot[_0x275c5e(0x17d)](_0x483adb[_0x275c5e(0x158)]['id'],_0x21490f)['catch'](_0x450cc0=>{telegramError(_0x450cc0);});}),tgBot['on']('polling_error',_0x5eed07=>{const _0x541470=_0x766c4b;_0x5eed07[_0x541470(0x1b0)]()[_0x541470(0x1ae)]('404\x20Not\x20Found')&&(logging(_0x541470(0x12e)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x541470(0x175))[_0x541470(0x11a)](_0x541470(0x1f5),'Invalid\x20Telegram\x20token'));}),process['once']('SIGINT',()=>{const _0x33e8d3=_0x766c4b;if(tgBot)tgBot[_0x33e8d3(0x19c)]();process[_0x33e8d3(0x232)](0x1);}),process['once'](_0x766c4b(0x259),()=>{const _0x3392fe=_0x766c4b;if(tgBot)tgBot[_0x3392fe(0x19c)]();process[_0x3392fe(0x232)](0x1);});}}function disableTelegram(){const _0x19f8a5=_0x2bafc9;tgBot&&(tgBot[_0x19f8a5(0x19c)](),tgBot=null);}function sendTelegram(_0x3ba4d9,_0x2f31a8){const _0x545ca8=_0x2bafc9;if(settings[_0x545ca8(0x237)]){if(settings[_0x545ca8(0x117)]==_0x545ca8(0x256)||(_0x2f31a8[_0x545ca8(0x255)]==_0x545ca8(0x23d)||_0x2f31a8[_0x545ca8(0x255)]==_0x545ca8(0x132))&&settings[_0x545ca8(0x117)]=='alerts'||_0x2f31a8[_0x545ca8(0x255)]==_0x545ca8(0x1a3)&&settings[_0x545ca8(0x117)]=='orders'){if(tgBot&&settings[_0x545ca8(0x13e)]){if(_0x2f31a8['showname'])tgBot[_0x545ca8(0x17d)](settings['telegramChatId'],_0x2f31a8['botname']+_0x545ca8(0x137)+_0x2f31a8[_0x545ca8(0x124)])[_0x545ca8(0x247)](_0x5c306c=>{telegramError(_0x5c306c);});else tgBot[_0x545ca8(0x17d)](settings['telegramChatId'],'Bot\x20'+_0x3ba4d9+_0x545ca8(0x137)+_0x2f31a8[_0x545ca8(0x124)])[_0x545ca8(0x247)](_0x1d69ac=>{telegramError(_0x1d69ac);});}}}}function getDeviceWithIp(_0x2d6918){return devices['find'](_0x5875dc=>_0x5875dc['ip']===_0x2d6918);}function temporaryAccess2FA(_0x30ea38,_0x353dc5){const _0x4389d1=_0x2bafc9;let _0x29455c=new Date(),_0x19a03a=![];if(lastIpApproval){if(_0x29455c-lastIpApproval<0x1388)_0x19a03a=!![];}lastIpApproval=new Date();if(_0x19a03a)return;tgBot&&settings[_0x4389d1(0x13e)]&&(tgBot[_0x4389d1(0x12d)](_0x4389d1(0x1a6)),tgBot['sendMessage'](settings[_0x4389d1(0x13e)],_0x4389d1(0x201)+normalizeIP(_0x353dc5)[_0x4389d1(0x115)]+_0x4389d1(0x23a),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x4389d1(0x123),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x4389d1(0x1c1),'callback_data':'30'},{'text':_0x4389d1(0x177),'callback_data':_0x4389d1(0x177)}]]}})[_0x4389d1(0x247)](_0x23dbe2=>{telegramError(_0x23dbe2);}),tgBot['on'](_0x4389d1(0x1a6),async _0x282b2d=>{const _0x57200b=_0x4389d1,_0x2993db=_0x282b2d['data'],_0x24f14e=_0x282b2d[_0x57200b(0x11e)];tgBot[_0x57200b(0x23c)](_0x282b2d['id'])[_0x57200b(0x15f)](async()=>{const _0x82e2a1=_0x57200b;devices[_0x30ea38]['telegramIpApproval']={'clientip':_0x353dc5,'timestamp':new Date()[_0x82e2a1(0x21f)](),'expiry':_0x2993db},_0x2993db!='reject'?(await tgBot[_0x82e2a1(0x17d)](_0x24f14e[_0x82e2a1(0x158)]['id'],_0x82e2a1(0x14f)+_0x2993db+_0x82e2a1(0x1bd),{'parse_mode':_0x82e2a1(0x244)})[_0x82e2a1(0x247)](_0x1ac98e=>{telegramError(_0x1ac98e);}),io['to'](_0x30ea38)['emit'](_0x82e2a1(0x212),{'access':{'allow':![],'reason':_0x82e2a1(0x243),'token':null}})):(await tgBot[_0x82e2a1(0x17d)](_0x24f14e['chat']['id'],_0x82e2a1(0x1ed))[_0x82e2a1(0x247)](_0x1109e4=>{telegramError(_0x1109e4);}),io['to'](_0x30ea38)[_0x82e2a1(0x11a)](_0x82e2a1(0x212),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x57200b(0x12d)](_0x57200b(0x1a6));}));}function loginAccess2FA(_0x481713,_0xd0f32){const _0x11362b=_0x2bafc9;tgBot&&settings[_0x11362b(0x13e)]&&(tgBot[_0x11362b(0x12d)](_0x11362b(0x1a6)),tgBot['sendMessage'](settings[_0x11362b(0x13e)],_0x11362b(0x14a)+normalizeIP(_0xd0f32)[_0x11362b(0x115)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x11362b(0x140),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x11362b(0x177)}]]}})[_0x11362b(0x247)](_0x3b92e0=>{telegramError(_0x3b92e0);}),tgBot['on'](_0x11362b(0x1a6),async _0x272ea5=>{const _0x2498ce=_0x11362b,_0x38145f=_0x272ea5[_0x2498ce(0x1ee)],_0x213442=_0x272ea5[_0x2498ce(0x11e)];tgBot[_0x2498ce(0x23c)](_0x272ea5['id'])[_0x2498ce(0x15f)](async()=>{const _0x20023a=_0x2498ce;devices[_0x481713][_0x20023a(0x249)]={'clientip':_0xd0f32,'timestamp':new Date()[_0x20023a(0x21f)](),'expiry':_0x38145f},_0x38145f!=_0x20023a(0x177)?(await tgBot['sendMessage'](_0x213442[_0x20023a(0x158)]['id'],'Login\x20accepted',{'parse_mode':_0x20023a(0x244)})['catch'](_0x536e57=>{telegramError(_0x536e57);}),io['to'](_0x481713)[_0x20023a(0x11a)](_0x20023a(0x212),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x20023a(0x17d)](_0x213442['chat']['id'],_0x20023a(0x251))['catch'](_0x395ea9=>{telegramError(_0x395ea9);}),io['to'](_0x481713)[_0x20023a(0x11a)](_0x20023a(0x212),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x2498ce(0x12d)](_0x2498ce(0x1a6));}));}function getConfiguration(){const _0x31ac91=_0x2bafc9;return dbConfig[_0x31ac91(0x131)](_0x31ac91(0x205))[_0x31ac91(0x183)](_0x31ac91(0x206))['value']()||[];}function getEnabledBots(){const _0x5d2ce7=_0x2bafc9;return dbConfig['get'](_0x5d2ce7(0x205))['sortBy']('botID')[_0x5d2ce7(0x1ce)]({'status':_0x5d2ce7(0x1e4)})[_0x5d2ce7(0x1f2)]()||[];}function getDisabledBots(){const _0x51ae5a=_0x2bafc9;return dbConfig[_0x51ae5a(0x131)](_0x51ae5a(0x205))[_0x51ae5a(0x183)](_0x51ae5a(0x206))[_0x51ae5a(0x1ce)]({'status':'disabled'})[_0x51ae5a(0x1f2)]()||[];}function getSettings(){const _0x10f051=_0x2bafc9;return dbSettings['get'](_0x10f051(0x1e0))['value']()||{'timeshift':0x0};}function getSecure(){const _0x5b99d0=_0x2bafc9;return dbSecure[_0x5b99d0(0x131)](_0x5b99d0(0x16d))['value']()||{};}function getBlacklist(){const _0x5cac45=_0x2bafc9;return dbSecure[_0x5cac45(0x131)](_0x5cac45(0x1c9))[_0x5cac45(0x1f2)]()||[];}function broadcastToBots(_0x3c3d9c,_0x3cc754){const _0x16d0be=_0x2bafc9;config[_0x16d0be(0x1dc)](_0xd7c56a=>{const _0x499977=_0x16d0be;if(_0xd7c56a[_0x499977(0x212)]=='enabled'&&_0xd7c56a[_0x499977(0x1fa)]==_0x499977(0x246)){if(pid[_0xd7c56a[_0x499977(0x206)]])pid[_0xd7c56a[_0x499977(0x206)]][_0x499977(0x220)]({[_0x3c3d9c]:_0x3cc754});}});}function storeSettings(_0x4f4e87,_0x4e5edb=![]){const _0x13dc74=_0x2bafc9;_0x4f4e87={...settings,..._0x4f4e87};if(_0x4e5edb&&_0x4f4e87[_0x13dc74(0x1b8)]!=_0x13dc74(0x1c5)&&_0x4f4e87[_0x13dc74(0x1b8)]!=''){const _0x4ddde7=crypt[_0x13dc74(0x230)](secure['privateKey'],_0x4f4e87[_0x13dc74(0x1b8)])[_0x13dc74(0x11e)][_0x13dc74(0x143)]('@')[0x0],_0x4ef139=bcrypt[_0x13dc74(0x166)](_0x4ddde7,saltRounds);_0x4f4e87={..._0x4f4e87,'bbPassword':_0x4ef139};}if(_0x4e5edb&&_0x4f4e87[_0x13dc74(0x17c)]!=_0x13dc74(0x1c5)&&_0x4f4e87[_0x13dc74(0x17c)]!=''){const _0x471d33=crypt['decrypt'](secure['privateKey'],_0x4f4e87[_0x13dc74(0x17c)])['message'][_0x13dc74(0x143)]('@')[0x0];_0x4f4e87={..._0x4f4e87,'telegramToken':_0x471d33};}const _0x3a817c=_0x4f4e87['telegramToken']!='************'&&_0x4f4e87[_0x13dc74(0x17c)]!=settings['telegramToken']||_0x4f4e87['telegramUsername']!=settings[_0x13dc74(0x231)],_0x24e798=_0x4f4e87[_0x13dc74(0x17c)]==''||_0x4f4e87[_0x13dc74(0x231)]=='';if(_0x3a817c)_0x4f4e87['telegramEvents']='all';for(const [_0x13bec2,_0x32ac4f]of Object['entries'](_0x4f4e87)){if(_0x13bec2==_0x13dc74(0x17c)&&_0x32ac4f=='************'){_0x4f4e87['telegramToken']=settings[_0x13dc74(0x17c)];continue;};if(_0x13bec2==_0x13dc74(0x1b8)&&_0x32ac4f==_0x13dc74(0x1c5)){_0x4f4e87['bbPassword']=settings[_0x13dc74(0x1b8)];continue;};dbSettings[_0x13dc74(0x13f)](_0x13dc74(0x142)+_0x13bec2,_0x32ac4f)[_0x13dc74(0x1b5)]();}settings=_0x4f4e87,io['to'](_0x13dc74(0x175))[_0x13dc74(0x11a)](_0x13dc74(0x1e0),cleanSettings()),broadcastToBots(_0x13dc74(0x170),settings[_0x13dc74(0x170)]);if(_0x3a817c&&!_0x24e798)initTelegram();if(_0x3a817c&&_0x24e798)disableTelegram();getAllClients()[_0x13dc74(0x1dc)](_0x53101f=>{const _0x5dde23=_0x13dc74;getSocket(_0x53101f['id'])[_0x5dde23(0x11a)](_0x5dde23(0x212),{'access':{'allow':![],'reason':_0x5dde23(0x243),'token':null}});});}function updateSetting(_0x85dac2,_0x3e5274){const _0x23840f=_0x2bafc9;dbSettings[_0x23840f(0x13f)](_0x23840f(0x142)+_0x85dac2,_0x3e5274)['write'](),settings=getSettings(),io['to'](_0x23840f(0x175))[_0x23840f(0x11a)](_0x23840f(0x1e0),cleanSettings());}function storeSecure(_0x1513b9){dbSecure['get']('secure')['push'](_0x1513b9)['write'](),secure=_0x1513b9;}function addBlacklist(_0x3140f8){const _0x2f846c=_0x2bafc9;cleanBlacklist();let _0x3aaca4;devices[_0x3140f8][_0x2f846c(0x164)]?_0x3aaca4=Math[_0x2f846c(0x1f9)](devices[_0x3140f8][_0x2f846c(0x164)][_0x2f846c(0x1fc)],loginExpiry):_0x3aaca4=loginExpiry,dbSecure[_0x2f846c(0x131)](_0x2f846c(0x1c9))[_0x2f846c(0x199)]({'expiry':new Date()[_0x2f846c(0x21f)]()+_0x3aaca4*0x3c*0x3e8,'token':devices[_0x3140f8][_0x2f846c(0x167)][_0x2f846c(0x122)]})['write'](),blacklist=dbSecure['get']('blacklist')[_0x2f846c(0x1f2)]();}function cleanBlacklist(){const _0x340313=_0x2bafc9;let _0x243e63=dbSecure[_0x340313(0x131)](_0x340313(0x1c9))[_0x340313(0x1a9)]()[_0x340313(0x1f2)](),_0xc22949=new Date()[_0x340313(0x21f)]();_0x243e63[_0x340313(0x1dc)](_0xe6e6a8=>{const _0x20976a=_0x340313;_0xe6e6a8[_0x20976a(0x1fc)]<_0xc22949&&dbSecure[_0x20976a(0x131)](_0x20976a(0x1c9))[_0x20976a(0x211)]({'expiry':_0xe6e6a8['expiry']})[_0x20976a(0x1b5)]();});}function _0x297f(_0x1fcfcf,_0x1e4b7b){const _0x550840=_0x2a0e();return _0x297f=function(_0x623d9f,_0x3eb9b5){_0x623d9f=_0x623d9f-0x115;let _0x2a0ec1=_0x550840[_0x623d9f];return _0x2a0ec1;},_0x297f(_0x1fcfcf,_0x1e4b7b);}function initStates(){const _0x1da29f=_0x2bafc9;let _0x1264c1=getConfiguration();_0x1264c1[_0x1da29f(0x1dc)](_0x3b8243=>{const _0x3dcc08=_0x1da29f;_0x3b8243[_0x3dcc08(0x1fa)]=_0x3dcc08(0x1b6);}),storeConfiguration(_0x1264c1);}function onKeys(){const _0x4c136d=new RSA();return new Promise(_0x1bd065=>{const _0x5d0fbb=_0x297f;_0x4c136d[_0x5d0fbb(0x135)]()[_0x5d0fbb(0x15f)](_0x422261=>{_0x1bd065(_0x422261);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xe6f817=_0x2bafc9;let _0xf1495f=getConfiguration(),_0x32c3ff=![];_0xf1495f[_0xe6f817(0x1dc)](_0x569de4=>{const _0x47b028=_0xe6f817;if(_0x569de4[_0x47b028(0x212)]==_0x47b028(0x246))_0x569de4[_0x47b028(0x212)]='enabled',_0x32c3ff=!![];else _0x569de4[_0x47b028(0x212)]=='stopped'&&(_0x569de4[_0x47b028(0x212)]='disabled',_0x32c3ff=!![]);});if(_0x32c3ff)storeConfiguration(_0xf1495f);let _0x283d11=getSecure();if(!_0x283d11[_0xe6f817(0x21a)](_0xe6f817(0x128))){let _0x3dedbe=await generateKeys();_0x283d11[_0xe6f817(0x134)]=_0x3dedbe['publicKey'],_0x283d11[_0xe6f817(0x178)]=_0x3dedbe['privateKey'],_0x283d11['secret']=crypto[_0xe6f817(0x1b4)](0x20)[_0xe6f817(0x1b0)](_0xe6f817(0x1ad));;storeSecure(_0x283d11);}let _0xedd420=getSettings();_0x32c3ff=![];!_0xedd420[_0xe6f817(0x21a)](_0xe6f817(0x12c))&&(_0xedd420[_0xe6f817(0x12c)]=![],_0xedd420[_0xe6f817(0x1e2)]='',_0xedd420[_0xe6f817(0x1b8)]='',_0xedd420[_0xe6f817(0x1f4)]=![],_0x32c3ff=!![]);!_0xedd420['hasOwnProperty']('whitelistEnabled')&&(_0xedd420[_0xe6f817(0x186)]=![],_0xedd420['whitelist']=[],_0xedd420['temporaryAccessAllowed']=![],_0x32c3ff=!![]);if(!_0xedd420['hasOwnProperty'](_0xe6f817(0x237))){if(_0xedd420['telegramChatId'])_0xedd420[_0xe6f817(0x237)]=!![];else _0xedd420[_0xe6f817(0x237)]=![];_0x32c3ff=!![];}if(_0x32c3ff)storeSettings(_0xedd420);}function storeConfiguration(_0xa2f3c4){const _0x1cb12e=_0x2bafc9;dbConfig['get'](_0x1cb12e(0x205))[_0x1cb12e(0x211)]()['write'](),dbConfig['get']('bots')[_0x1cb12e(0x199)](..._0xa2f3c4)['write'](),config=_0xa2f3c4;}function resetPassword(){const _0x5e0a2e=_0x2bafc9;tgBot&&settings[_0x5e0a2e(0x13e)]&&(tgBot[_0x5e0a2e(0x12d)](_0x5e0a2e(0x1a6)),tgBot[_0x5e0a2e(0x17d)](settings[_0x5e0a2e(0x13e)],_0x5e0a2e(0x245),{'parse_mode':_0x5e0a2e(0x244),'reply_markup':{'inline_keyboard':[[{'text':_0x5e0a2e(0x252),'callback_data':_0x5e0a2e(0x252)},{'text':'no','callback_data':'no'}]]}})[_0x5e0a2e(0x247)](_0x327428=>{telegramError(_0x327428);}),tgBot['on']('callback_query',async _0x29d1c7=>{const _0x2381bc=_0x5e0a2e,_0x1cfe6e=_0x29d1c7[_0x2381bc(0x1ee)],_0x31bdb3=_0x29d1c7[_0x2381bc(0x11e)];tgBot[_0x2381bc(0x23c)](_0x29d1c7['id'])[_0x2381bc(0x15f)](async()=>{const _0x1286c4=_0x2381bc;if(_0x1cfe6e!='no'){const _0x514590=0xf,_0x43ca60=_0x1286c4(0x25b),_0x31eab6=Array[_0x1286c4(0x19b)](crypto['randomFillSync'](new Uint32Array(_0x514590)))[_0x1286c4(0x16f)](_0x557307=>_0x43ca60[_0x557307%_0x43ca60['length']])['join'](''),_0x39c482=bcrypt[_0x1286c4(0x166)](_0x31eab6,saltRounds);storeSettings({'bbPassword':_0x39c482}),await tgBot[_0x1286c4(0x17d)](_0x31bdb3[_0x1286c4(0x158)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x31eab6,{'parse_mode':_0x1286c4(0x244)})['catch'](_0x283104=>{telegramError(_0x283104);});}else await tgBot['sendMessage'](_0x31bdb3[_0x1286c4(0x158)]['id'],_0x1286c4(0x18a))[_0x1286c4(0x247)](_0x296dba=>{telegramError(_0x296dba);});}),tgBot['removeListener'](_0x2381bc(0x1a6));}));}function logging(_0x344448){const _0x56152d=_0x2bafc9;console['log'](getTimeStamp()+_0x56152d(0x24b)+_0x344448);if(tgBot&&settings[_0x56152d(0x13e)]&&settings['telegramEvents']!=_0x56152d(0x14d))tgBot[_0x56152d(0x17d)](settings[_0x56152d(0x13e)],'Bot\x20Mgr\x20>\x20'+_0x344448)[_0x56152d(0x247)](_0x47b7f8=>{telegramError(_0x47b7f8);});}function getServerTime(){const _0x4575d5=_0x2bafc9,_0x4451e1=new Date();return _0x4451e1[_0x4575d5(0x242)]()+'/'+(_0x4451e1[_0x4575d5(0x1fd)]()+0x1)[_0x4575d5(0x1b0)]()[_0x4575d5(0x24c)](0x2,'0')+'/'+_0x4451e1[_0x4575d5(0x138)]()[_0x4575d5(0x1b0)]()['padStart'](0x2,'0')+'\x20'+_0x4451e1[_0x4575d5(0x12b)]()[_0x4575d5(0x1b0)]()['padStart'](0x2,'0')+':'+_0x4451e1['getMinutes']()['toString']()[_0x4575d5(0x24c)](0x2,'0')+':'+_0x4451e1['getSeconds']()[_0x4575d5(0x1b0)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4b5620=_0x2bafc9,_0x4e15b4=shiftedTime();return _0x4e15b4[_0x4b5620(0x242)]()+'/'+(_0x4e15b4[_0x4b5620(0x1fd)]()+0x1)[_0x4b5620(0x1b0)]()['padStart'](0x2,'0')+'/'+_0x4e15b4['getDate']()[_0x4b5620(0x1b0)]()[_0x4b5620(0x24c)](0x2,'0')+'\x20'+_0x4e15b4['getHours']()[_0x4b5620(0x1b0)]()['padStart'](0x2,'0')+':'+_0x4e15b4[_0x4b5620(0x151)]()[_0x4b5620(0x1b0)]()['padStart'](0x2,'0')+':'+_0x4e15b4[_0x4b5620(0x248)]()[_0x4b5620(0x1b0)]()[_0x4b5620(0x24c)](0x2,'0');}function shiftedTime(){const _0xa5861a=_0x2bafc9,_0x225129=new Date();let _0x10cee9=_0x225129;if(settings['timeshift']&&settings[_0xa5861a(0x170)]!==0x0)_0x10cee9=fns[_0xa5861a(0x218)](_0x225129,{'hours':settings[_0xa5861a(0x170)]});return _0x10cee9;}function startScheduler(){const _0x107d7d=_0x2bafc9;let _0x6ea427=new Date()[_0x107d7d(0x16a)]();_0x6ea427==0x1&&backupConfigFiles();_0x6ea427==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x323476=_0x2bafc9;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x323476(0x1dc)](_0x72a81f=>{const _0x127c09=_0x323476;if(!_0x72a81f['isDirectory']())fs['copyFileSync'](configpath+_0x72a81f[_0x127c09(0x1a4)],configbackuppath+_0x72a81f[_0x127c09(0x1a4)]);});}function triggerAnalytics(){const _0x411667=_0x2bafc9;analytics['page']({'title':_0x411667(0x1d4),'href':_0x411667(0x160),'path':'/v'+serverversion});}function validateCredentials(_0x563314,_0x513e3f){const _0x569097=_0x2bafc9;if(_0x563314[_0x569097(0x15a)]==settings['bbUsername']&&bcrypt[_0x569097(0x22f)](_0x563314[_0x569097(0x156)],settings[_0x569097(0x1b8)])){if(settings[_0x569097(0x1f4)])return{'allow':![],'reason':_0x569097(0x191),'token':null};else{const _0x1a404f=generateLoginToken(_0x513e3f);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1a404f};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x4c350a){const _0x2cbd83=_0x2bafc9,_0x2baa1d=generateLoginToken(_0x4c350a);return{'allow':!![],'reason':_0x2cbd83(0x181),'token':_0x2baa1d};}function validateAccess(_0x1708f7,_0x247bda){const _0x41fcec=_0x2bafc9;let _0x266322=devices[_0x247bda]['ip'],_0x1b08bb;const _0x1b211f=_0x54db0d=>{const _0x2d5071=_0x297f;if(settings['loginRequired']){if(settings[_0x2d5071(0x1f4)]){if(telegram2FaApproved(_0x247bda)){const _0x2b279a=generateLoginToken(_0x247bda);return{'allow':!![],'reason':_0x2d5071(0x1ff),'token':_0x2b279a};}else return{'allow':![],'reason':_0x2d5071(0x169),'token':null};}else return _0x1b08bb=validToken(_0x54db0d,_0x247bda),_0x1b08bb[_0x2d5071(0x21a)](_0x2d5071(0x132))?{'allow':!![],'reason':_0x2d5071(0x171),'token':_0x54db0d}:{'allow':![],'reason':_0x2d5071(0x169),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x41fcec(0x186)]){let _0x30bcb1=[...settings['whitelist'],_0x41fcec(0x1db),'::ffff:127.0.0.1',_0x41fcec(0x23f)];if(_0x30bcb1[_0x41fcec(0x1ae)](_0x266322))return _0x1b211f(_0x1708f7);else{_0x1b08bb=validToken(_0x1708f7,_0x247bda);if(_0x1b08bb[_0x41fcec(0x21a)](_0x41fcec(0x132)))return _0x1b211f(_0x1708f7);else{if(telegramIpApproved(_0x247bda)){const _0x1167d2=generateToken(_0x247bda);return _0x1b08bb=_0x1b211f(_0x1708f7),_0x1b08bb[_0x41fcec(0x1b7)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x1167d2}:_0x1b08bb;}else return settings[_0x41fcec(0x19d)]?{'allow':![],'reason':_0x41fcec(0x1d5),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1b211f(_0x1708f7);}function _0x2a0e(){const _0x1b75d4=['secure','disabled','map','timeshift','login\x20token\x20valid','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','bb-settings.json','logged\x20out','botmanager','bb-config.json','reject','privateKey','onText','verify','kind','telegramToken','sendMessage','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','env','botname','login\x20token\x20generated','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','sortBy','exp','restarting\x20Bot\x20','whitelistEnabled','sign','/help\x20-\x20show\x20available\x20commands\x0a','ipv6','Password\x20reset\x20rejected','alerts','store-configuration','<b>Telegram\x20bot\x20status:</b>\x0a','sockets','lowdb/adapters/FileSync','conn','2FA\x20login\x20required','bot.js','get-logs','/:bot/coins','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','backup/','bb-secure.json','add-bot','push','handshake','from','stopPolling','temporaryAccessAllowed','disconnect','isIPv4MappedAddress','build','pidExpireLogin','inherit','order','name','(((.+)+)+)+$','callback_query','new-disabled','All\x20bots\x20running\x20right\x20now','cloneDeep','update-bb','Ok,\x20will\x20send\x20order\x20notifications\x20only','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','hex','includes','logout','toString','/:bot/history','get-portfolio','cancel-loading','randomBytes','write','stopped','allow','bbPassword','timestamp','bb/','login','ipaddr.js','\x20minutes','Balance\x20Bot','All\x20bots','You\x20can\x20use\x20the\x20following\x20commands:\x0a','30\x20min','lowdb','unlinkSync','apply','************','-----------------------------------------------------------------------------------','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','log','blacklist','Unauthorized\x20attempt\x20to\x20update\x20settings','uuid','encryptedUuid','Notifications\x20enabled\x0a','filter','bot-','yargs/yargs','auth','Invalid\x20IP\x20address','stop','Balance\x20Bot\x20Server','2FA\x20required','/:bot/configuration','/:bot/performance','1000','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Alerts','::1','forEach','server','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','disabled\x20Bot\x20','settings','defaults','bbUsername','Notifications\x20disabled\x0a','enabled','bot','config/','3615890zjshTW','headers','delete-bot','-events.json','toIPv4MappedAddress','clientip','Temporary\x20access\x20rejected','data','listen','started','starting\x20bot\x20|\x20Bot\x20','value','3000','f2aRequired','notification','analytics','9ptrtJl','temporary\x20access\x20timeout','max','live','bcryptjs','expiry','getMonth','/:bot/support','2FA\x20login\x20token\x20generated','2FA','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','remoteAddress','getPortfolio','use','bots','botID','/off\x20-\x20stop\x20bot(s)\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','join','4857762xXfHBa','path','emitHistory','get-starting-balances','pidRefreshToken','/:bot','index.html','remove','status','host','storeConfiguration','hybrid-crypto-js','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','-performance.json','add','toIPv4Address','hasOwnProperty','existsSync','\x20/\x20','argv','ipc','getTime','send','77RtbAgW','apiKey','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','invalid\x20credentials','reason','160878KxzlFn','4rRNldR','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','store-settings','-results.json','find','initclient','Ok,\x20will\x20send\x20alert\x20notifications\x20only','compareSync','decrypt','telegramUsername','exit','keys','version','@analytics/google-analytics','2353419zcjjZX','telegramEnabled','/:bot/portfolio','store','</b>\x20?','Error:\x20Invalid\x20argument\x20','answerCallbackQuery','error','temporary\x20token\x20generated','127.0.0.1','Token\x20blacklisted','Orders','getFullYear','reload','HTML','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','running','catch','getSeconds','telegram2FaApproval','storeHeadless',':\x20Bot\x20Mgr\x20>\x20','padStart','getStartingBalances','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','createServer','date-fns','Login\x20rejected','yes','deleted\x20Bot\x20','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','type','all','starting\x20new\x20bot\x20|\x20Bot\x20','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','SIGTERM','mkdirSync','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','show','NTBA_FIX_319','telegramEvents','enabled\x20Bot\x20','3600200OJuyrD','emit','963768BfuPNI','sendFile','Invalid\x20username\x20or\x20IP\x20address','message','removeAllListeners','child_process','update-bot','token','5\x20min','event','Invalid\x20authentication\x20token\x20(1)','idling\x20bot\x20\x20\x20|\x20Bot\x20','static','secret','RSA-OAEP','test','getHours','loginRequired','removeListener','Invalid\x20Telegram\x20token',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','user','get','success','Unauthorized\x20attempt\x20to\x20get\x20logs','publicKey','generateKeyPairAsync','version.json','\x20>\x20','getDate','Unauthorized\x20attempt\x20to\x20update\x20bot','login\x20not\x20required','Bot\x20','Notifications\x20types:\x20','Unauthorized\x20attempt\x20to\x20delete\x20bot','telegramChatId','set','accept','2201376tGBQeR','settings.','split','User\x20has\x20been\x20validated','restart','length',',\x20must\x20be\x20a\x204\x20digit\x20number','search','referer','Allow\x20login\x20from\x20IP\x20address\x20<b>','cancelLoading','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','orders','node-telegram-bot-api','Access\x20enabled\x20for\x20','sha256','getMinutes','Unauthorized\x20attempt\x20to\x20log\x20out','build2','/restart\x20-\x20restart\x20bot(s)\x0a','Notifications\x20disabled','password','error\x20while\x20deleting\x20config\x20files:\x20','chat','parse','username','isValid','new','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','telegram','then','https://hodlerhacks.com','Invalid\x20authentication\x20token\x20(2)','access\x20timeout','assign','telegramIpApproval','/disable\x20-\x20disable\x20notifications\x0a','hashSync','access','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','login\x20required','getUTCHours','clients','constructor'];_0x2a0e=function(){return _0x1b75d4;};return _0x2a0e();}function timelyDecrypt(_0x2b8681,_0x4409ce=!![]){const _0xfbfa67=_0x2bafc9;if(_0x2b8681)try{const _0x1432f8=crypt[_0xfbfa67(0x230)](secure[_0xfbfa67(0x178)],_0x2b8681)[_0xfbfa67(0x11e)],_0xc10149=_0x1432f8[_0xfbfa67(0x143)]('@')[0x0],_0x4fcc57=_0x1432f8[_0xfbfa67(0x143)]('@')[0x1],_0x4f357d=new Date()['getTime']();if(_0x4409ce){if(_0x4f357d-_0x4fcc57<maxSecretAge*0x3e8)return _0xc10149;else return![];}else return _0xc10149;}catch(_0x1f8a07){return![];}else return![];}const validToken=(_0x4a177b,_0x45028c)=>{const _0x442122=_0x2bafc9,_0x4ad5a2=devices[_0x45028c]['ip'];if(!_0x4a177b)return{'error':'No\x20authentication\x20token'};for(let _0x276eae of blacklist){if(_0x276eae[_0x442122(0x122)]==_0x4a177b)return{'error':_0x442122(0x240)};}let _0xa1d29c;try{_0xa1d29c=jwt[_0x442122(0x17a)](_0x4a177b,secure[_0x442122(0x128)]+_0x45028c);}catch{return{'error':_0x442122(0x125)};}if(!_0xa1d29c[_0x442122(0x21a)]('clientip')&&!_0xa1d29c[_0x442122(0x21a)](_0x442122(0x15a))||!_0xa1d29c[_0x442122(0x21a)](_0x442122(0x184)))return{'error':_0x442122(0x161)};if(!_0xa1d29c[_0x442122(0x21a)](_0x442122(0x15a))&&_0xa1d29c[_0x442122(0x21a)](_0x442122(0x1ec))){const {clientip:_0x569bab}=_0xa1d29c;return _0x4ad5a2==_0x569bab?{'success':_0x442122(0x144)}:{'error':_0x442122(0x1d2)};}else{if(_0xa1d29c[_0x442122(0x21a)](_0x442122(0x15a))&&_0xa1d29c[_0x442122(0x21a)](_0x442122(0x1ec))){const {username:_0x5d7ae5,clientip:_0x6326c6}=_0xa1d29c;return settings['bbUsername']==_0x5d7ae5&&_0x4ad5a2==_0x6326c6?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x442122(0x11d)};}}},generateLoginToken=_0x588511=>{const _0x1beefc=_0x2bafc9;if(_0x588511){const _0x49bd51=devices[_0x588511]['ip'];return jwt[_0x1beefc(0x187)]({'username':settings['bbUsername'],'clientip':_0x49bd51},secure[_0x1beefc(0x128)]+_0x588511,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x7ccaf9=>{const _0x4d47be=_0x2bafc9;if(_0x7ccaf9){const _0x204572=devices[_0x7ccaf9]['ip'];return jwt['sign']({'clientip':_0x204572},secure[_0x4d47be(0x128)]+_0x7ccaf9,{'expiresIn':devices[_0x7ccaf9][_0x4d47be(0x164)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x19ed68=>{const _0x43a695=_0x2bafc9;let _0x322826=![];return devices[_0x19ed68]['telegramIpApproval']&&devices[_0x19ed68][_0x43a695(0x164)][_0x43a695(0x1fc)]!=_0x43a695(0x177)&&(_0x322826=devices[_0x19ed68][_0x43a695(0x164)][_0x43a695(0x1ec)]==devices[_0x19ed68]['ip']&&new Date()[_0x43a695(0x21f)]()-devices[_0x19ed68][_0x43a695(0x164)]['timestamp']<devices[_0x19ed68][_0x43a695(0x164)][_0x43a695(0x1fc)]*0x3c*0x3e8),_0x322826;},telegram2FaApproved=_0x3d8623=>{const _0x15a2d2=_0x2bafc9;let _0x54b839=![];return devices[_0x3d8623][_0x15a2d2(0x249)]&&devices[_0x3d8623]['telegram2FaApproval'][_0x15a2d2(0x1fc)]!=_0x15a2d2(0x177)&&(_0x54b839=devices[_0x3d8623][_0x15a2d2(0x249)]['clientip']==devices[_0x3d8623]['ip']&&new Date()[_0x15a2d2(0x21f)]()-devices[_0x3d8623]['telegram2FaApproval'][_0x15a2d2(0x1b9)]<devices[_0x3d8623][_0x15a2d2(0x249)][_0x15a2d2(0x1fc)]*0x3c*0x3e8),_0x54b839;},normalizeIP=_0x574543=>{const _0x120696=_0x2bafc9;let _0x155e54=null,_0x5231b9=null;if(ipaddr[_0x120696(0x15b)](_0x574543)){const _0x190613=ipaddr[_0x120696(0x159)](_0x574543);_0x190613[_0x120696(0x17b)]()===_0x120696(0x189)?(_0x190613[_0x120696(0x19f)]()&&(_0x155e54=_0x190613[_0x120696(0x219)]()['toString']()),_0x5231b9=_0x190613[_0x120696(0x1b0)]()):(_0x155e54=_0x190613[_0x120696(0x1b0)](),_0x5231b9=_0x190613[_0x120696(0x1eb)]()[_0x120696(0x1b0)]());}return{'show':_0x155e54?_0x155e54:_0x5231b9,'store':_0x5231b9};};