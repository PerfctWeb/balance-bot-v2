const _0x5dceab=_0x1ee0;(function(_0x28d65e,_0x296d56){const _0x4a3d36=_0x1ee0,_0xa9e6ad=_0x28d65e();while(!![]){try{const _0xe4e9d8=-parseInt(_0x4a3d36(0x214))/0x1+-parseInt(_0x4a3d36(0x373))/0x2+-parseInt(_0x4a3d36(0x1e5))/0x3+parseInt(_0x4a3d36(0x246))/0x4+-parseInt(_0x4a3d36(0x2a1))/0x5*(-parseInt(_0x4a3d36(0x232))/0x6)+parseInt(_0x4a3d36(0x338))/0x7*(parseInt(_0x4a3d36(0x278))/0x8)+-parseInt(_0x4a3d36(0x353))/0x9;if(_0xe4e9d8===_0x296d56)break;else _0xa9e6ad['push'](_0xa9e6ad['shift']());}catch(_0x47b91b){_0xa9e6ad['push'](_0xa9e6ad['shift']());}}}(_0x3ad0,0x4c7a1));const _0x5d64b7=function(){let _0x3423d9=!![];return function(_0x5b6bef,_0xfbfd3c){const _0x274227=_0x3423d9?function(){const _0x2ea296=_0x1ee0;if(_0xfbfd3c){const _0x355352=_0xfbfd3c[_0x2ea296(0x1be)](_0x5b6bef,arguments);return _0xfbfd3c=null,_0x355352;}}:function(){};return _0x3423d9=![],_0x274227;};}(),_0x28abdf=_0x5d64b7(this,function(){const _0xb9dda3=_0x1ee0;return _0x28abdf[_0xb9dda3(0x24a)]()['search']('(((.+)+)+)+$')[_0xb9dda3(0x24a)]()[_0xb9dda3(0x28f)](_0x28abdf)[_0xb9dda3(0x282)](_0xb9dda3(0x2e8));});_0x28abdf();'use strict';process[_0x5dceab(0x2bd)][_0x5dceab(0x376)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x5dceab(0x2d7)),low=require(_0x5dceab(0x238)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x5dceab(0x304)),crypto=require(_0x5dceab(0x35a)),Crypt=require(_0x5dceab(0x333))[_0x5dceab(0x336)],RSA=require(_0x5dceab(0x333))[_0x5dceab(0x22b)],bcrypt=require(_0x5dceab(0x37a)),jwt=require(_0x5dceab(0x371)),ipaddr=require(_0x5dceab(0x1d7)),argv=require(_0x5dceab(0x1b2))(process[_0x5dceab(0x2b4)][_0x5dceab(0x330)](0x2))[_0x5dceab(0x2b4)],uuidRandom=require('uuid-random'),TelegramBot=require(_0x5dceab(0x1b7)),Mixpanel=require(_0x5dceab(0x334)),axios=require('axios'),{GraphQLClient,gql}=require(_0x5dceab(0x2ee)),util=require('util'),fileUpload=require(_0x5dceab(0x1de)),{networkInterfaces}=require('os'),PORT=argv[_0x5dceab(0x3a5)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x5dceab(0x1d3)](PORT)&&(console['log'](_0x5dceab(0x2b7)+PORT+_0x5dceab(0x254)),process[_0x5dceab(0x20d)](0x1));const HOST=argv[_0x5dceab(0x1fb)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x5dceab(0x28a)],environment=require('./version.json')['environment']||'production';let bbpath='bb/',bbpath2='';const botfile='bot.js',configfile=_0x5dceab(0x343),settingsfile=_0x5dceab(0x2cb),securefile=_0x5dceab(0x398),maxBackups=0xa;let validInstallation=!![];!fs[_0x5dceab(0x1c8)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x5dceab(0x36e)+userID+'/':bbpath+_0x5dceab(0x36e),configbackuppath=configpath+_0x5dceab(0x201),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x5dceab(0x395),zippath=userID?bbpath+_0x5dceab(0x29d)+userID+'/':bbpath+_0x5dceab(0x29d),loggerfile=fs[_0x5dceab(0x29f)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+'temp/'+userID+'/':bbpath+_0x5dceab(0x35e);!fs[_0x5dceab(0x1c8)](configpath)&&fs[_0x5dceab(0x2fd)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x5dceab(0x2fd)](configbackuppath);!fs[_0x5dceab(0x1c8)](logspath)&&fs[_0x5dceab(0x2fd)](logspath);!fs[_0x5dceab(0x1c8)](zippath)&&fs['mkdirSync'](zippath);!fs[_0x5dceab(0x1c8)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x5dceab(0x1cf)]({'bots':[]})[_0x5dceab(0x27c)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5dceab(0x1cf)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x5dceab(0x25d),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x5dceab(0x1cf)]({'secure':{},'blacklist':[]})[_0x5dceab(0x27c)]();let crypt=new Crypt({'md':_0x5dceab(0x25f),'rsaStandard':_0x5dceab(0x347)});const saltRounds=0xa,mixpanel=Mixpanel[_0x5dceab(0x2f7)](_0x5dceab(0x34a),{'host':_0x5dceab(0x2b8)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x5dceab(0x261)]&&settings[_0x5dceab(0x261)]!='')initTelegram();const parseColor=(_0x1587df,_0x1c0d6a)=>{const _0x51f06d=_0x5dceab,_0x40dd50=/#[A-Z]{3}#/g;if(typeof _0x1587df==_0x51f06d(0x2ef)){!_0x1c0d6a?_0x1587df=_0x1587df[_0x51f06d(0x23b)](_0x40dd50,''):(_0x1587df=_0x1587df[_0x51f06d(0x23b)](/#BLU#/g,_0x51f06d(0x1b5)),_0x1587df=_0x1587df[_0x51f06d(0x23b)](/#RED#/g,_0x51f06d(0x211)),_0x1587df=_0x1587df['replace'](/#YEL#/g,_0x51f06d(0x346)),_0x1587df=_0x1587df[_0x51f06d(0x23b)](/#MAG#/g,_0x51f06d(0x2b3)),_0x1587df=_0x1587df[_0x51f06d(0x23b)](/#CYA#/g,_0x51f06d(0x37c)),_0x1587df=_0x1587df[_0x51f06d(0x23b)](/#RES#/g,_0x51f06d(0x1ed)));;}return _0x1587df;},logger={'screen':_0x10e841=>{const _0x3ba7bf=_0x5dceab;console[_0x3ba7bf(0x302)](parseColor(_0x10e841,!![]));},'simple':_0x44b0d3=>{const _0x23d855=_0x5dceab;console[_0x23d855(0x302)](parseColor(_0x44b0d3,!![])),loggerfile['write'](util['format'](parseColor(_0x44b0d3,![]))+'\x0a');},'full':async _0x556716=>{const _0xce1272=_0x5dceab,_0x17fe57=getTimeStamp()+_0xce1272(0x236)+_0x556716;console[_0xce1272(0x302)](parseColor(_0x17fe57,!![])),loggerfile['write'](util[_0xce1272(0x1c1)](parseColor(_0x17fe57,![]))+'\x0a');if(tgBot&&settings[_0xce1272(0x260)]&&settings[_0xce1272(0x32e)]!=_0xce1272(0x2c0))await tgBot[_0xce1272(0x1d6)](settings[_0xce1272(0x260)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x556716,![]))['catch'](_0x56ef3a=>{telegramError(_0x56ef3a);});},'debug':async(_0x56fd26,_0x384f37='')=>{const _0x4876d2=_0x5dceab,_0x300916=getTimeStamp()+_0x4876d2(0x22c)+_0x56fd26;if(debugging)console[_0x4876d2(0x302)](parseColor(_0x300916,!![]));loggerfile[_0x4876d2(0x27c)](util[_0x4876d2(0x1c1)](parseColor(_0x300916,![]))+'\x0a');if(_0x384f37){if(debugging)console['log'](_0x384f37);loggerfile[_0x4876d2(0x27c)](util[_0x4876d2(0x1c1)](_0x384f37)+'\x0a');}}};process['on']('uncaughtException',function(_0x530359){logger['simple'](_0x530359);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x5dceab(0x2f1)),app=express(),http=require(_0x5dceab(0x1dd))['createServer'](app);app[_0x5dceab(0x1e1)](fileUpload({'useTempFiles':!![]})),app[_0x5dceab(0x382)](_0x5dceab(0x1ec),async(_0x28b5a0,_0x30ae1e)=>{const _0x3538f0=_0x5dceab,_0x4f2d38=_0x28b5a0['params'][_0x3538f0(0x200)],_0x26eddb=getClientsWithBotID(_0x3538f0(0x2d6)),_0x47b646=_0x28b5a0[_0x3538f0(0x291)][_0x3538f0(0x1c0)],_0x48432e=timelyDecrypt(_0x47b646,![]),_0x51c611=_0x26eddb[_0x3538f0(0x222)](_0x2f7f90=>_0x2f7f90[_0x3538f0(0x1c0)]==_0x48432e);if(_0x51c611){const _0x3a4ed9=normalizeIP(_0x28b5a0[_0x3538f0(0x30d)]['remoteAddress'])[_0x3538f0(0x29c)],_0x8153e2=_0x28b5a0[_0x3538f0(0x291)][_0x3538f0(0x20c)];if(validateAccess(_0x8153e2,_0x48432e,_0x3a4ed9)[_0x3538f0(0x22f)])_0x4f2d38==_0x3538f0(0x268)&&await backupConfigFiles(),await zipFiles(_0x4f2d38),_0x30ae1e[_0x3538f0(0x2d3)](zippath+(_0x4f2d38+_0x3538f0(0x207)),_0x11422f=>{const _0x20211d=_0x3538f0;_0x11422f&&(logger[_0x20211d(0x263)](_0x20211d(0x30c)+_0x4f2d38),logger[_0x20211d(0x241)](_0x11422f));});else logger[_0x3538f0(0x263)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x4f2d38+_0x3538f0(0x27d));}else logger[_0x3538f0(0x263)](_0x3538f0(0x23e)+_0x4f2d38+_0x3538f0(0x2ca));}),app[_0x5dceab(0x33d)]('/upload-backup',async(_0x26c3a6,_0x965f80)=>{const _0x51b2b8=_0x5dceab,_0xc43060=getClientsWithBotID(_0x51b2b8(0x2d6)),_0x1f79a6=_0x26c3a6[_0x51b2b8(0x291)][_0x51b2b8(0x1c0)],_0x411ed0=timelyDecrypt(_0x1f79a6,![]),_0xc4610a=_0xc43060['find'](_0x4d7cf6=>_0x4d7cf6[_0x51b2b8(0x1c0)]==_0x411ed0);logger[_0x51b2b8(0x227)]('Backup\x20file\x20uploaded');if(_0xc4610a){const _0x443297=normalizeIP(_0x26c3a6[_0x51b2b8(0x30d)][_0x51b2b8(0x2a0)])['store'],_0x554097=_0x26c3a6[_0x51b2b8(0x291)]['tkn'];if(validateAccess(_0x554097,_0x411ed0,_0x443297)[_0x51b2b8(0x22f)]){if(_0x26c3a6[_0x51b2b8(0x1fc)]){const _0x2d6dbb=_0x26c3a6[_0x51b2b8(0x1fc)][_0x51b2b8(0x248)];await _0x2d6dbb['mv'](temppath+_0x2d6dbb['name']),_0x965f80[_0x51b2b8(0x2dd)]({'status':!![],'message':'File\x20uploaded'});const _0x394365=getBotsWithMode();_0x394365[_0x51b2b8(0x1e8)]>0x0?confirmRestore(temppath,_0x2d6dbb['name']):unzipFile(temppath,_0x2d6dbb[_0x51b2b8(0x23c)]);}}else logger[_0x51b2b8(0x263)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x51b2b8(0x263)](_0x51b2b8(0x327));}),app[_0x5dceab(0x1e1)](express[_0x5dceab(0x1ea)](path[_0x5dceab(0x250)](__dirname,bbpath2,_0x5dceab(0x203)))),app[_0x5dceab(0x1e1)](express[_0x5dceab(0x1ea)](path['join'](__dirname,bbpath2,_0x5dceab(0x349)))),app[_0x5dceab(0x382)]('/',function(_0xb837f7,_0x39b378){const _0x4de1e9=_0x5dceab;_0x39b378['sendFile'](path['join'](__dirname,bbpath2,_0x4de1e9(0x203),_0x4de1e9(0x242)));}),app[_0x5dceab(0x382)]('/:bot',function(_0x1a8b7e,_0x4999bc){const _0x381c99=_0x5dceab;_0x4999bc[_0x381c99(0x1c9)](path[_0x381c99(0x250)](__dirname,bbpath2,_0x381c99(0x349),_0x381c99(0x242)));}),app[_0x5dceab(0x382)](_0x5dceab(0x2ac),(_0x19d38b,_0x5aaec5)=>{const _0x586b22=_0x5dceab;_0x5aaec5[_0x586b22(0x1c9)](path['join'](__dirname,bbpath2,_0x586b22(0x349),'index.html'));}),app[_0x5dceab(0x382)](_0x5dceab(0x251),(_0x4bdc80,_0x53aab3)=>{const _0xd5b17c=_0x5dceab;_0x53aab3[_0xd5b17c(0x1c9)](path[_0xd5b17c(0x250)](__dirname,bbpath2,'build',_0xd5b17c(0x242)));}),app['get'](_0x5dceab(0x318),(_0x5a1354,_0x43cf0b)=>{const _0x3f3f71=_0x5dceab;_0x43cf0b[_0x3f3f71(0x1c9)](path[_0x3f3f71(0x250)](__dirname,bbpath2,_0x3f3f71(0x349),_0x3f3f71(0x242)));}),app[_0x5dceab(0x382)](_0x5dceab(0x25c),(_0x47e09e,_0x44dac4)=>{const _0x39ae6f=_0x5dceab;_0x44dac4[_0x39ae6f(0x1c9)](path[_0x39ae6f(0x250)](__dirname,bbpath2,_0x39ae6f(0x349),_0x39ae6f(0x242)));}),app[_0x5dceab(0x382)](_0x5dceab(0x355),(_0x2e5c41,_0x119980)=>{const _0xdf61ad=_0x5dceab;_0x119980[_0xdf61ad(0x1c9)](path[_0xdf61ad(0x250)](__dirname,bbpath2,_0xdf61ad(0x349),_0xdf61ad(0x242)));}),app[_0x5dceab(0x382)]('/:bot/support',(_0x412575,_0x5a95fb)=>{const _0x204087=_0x5dceab;_0x5a95fb[_0x204087(0x1c9)](path[_0x204087(0x250)](__dirname,bbpath2,_0x204087(0x349),_0x204087(0x242)));});if(HOST)http[_0x5dceab(0x1c3)](PORT,HOST);else http[_0x5dceab(0x1c3)](PORT);const io=require(_0x5dceab(0x275))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x128a70=_0x5dceab;let _0xd615bc=_0x128a70(0x2d5);const _0x1b808f=networkInterfaces(),_0x3888a7={};for(const _0xd3be19 of Object[_0x128a70(0x2be)](_0x1b808f)){for(const _0x31c6d0 of _0x1b808f[_0xd3be19]){if((_0x31c6d0[_0x128a70(0x2b9)]==_0x128a70(0x348)||_0x31c6d0[_0x128a70(0x2b9)]==0x4)&&!_0x31c6d0[_0x128a70(0x1ff)]){const _0x4cbc2e=ipaddr['parse'](_0x31c6d0[_0x128a70(0x247)])['range']();_0x4cbc2e!=_0x128a70(0x1b4)&&(!_0x3888a7[_0xd3be19]&&(_0x3888a7[_0xd3be19]=[]),_0x3888a7[_0xd3be19][_0x128a70(0x28e)](_0x31c6d0[_0x128a70(0x247)]),_0xd615bc=_0x31c6d0[_0x128a70(0x247)]);}}}return{'serverip':_0xd615bc,'netinterfaces':_0x3888a7};}async function startServer(){const _0x10cabe=_0x5dceab,{serverip:_0x4e3656,netinterfaces:_0x221005}=getServerIP();logger[_0x10cabe(0x241)](''),logger['simple'](_0x10cabe(0x2e5)),await logger[_0x10cabe(0x263)](_0x10cabe(0x1f2)+serverversion+_0x10cabe(0x32b)+(environment=='staging'?_0x10cabe(0x21f):'')+'\x0a'+(_0x10cabe(0x212)+PORT+_0x10cabe(0x387))+(_0x10cabe(0x255)+_0x4e3656+':'+PORT+_0x10cabe(0x272))),logger[_0x10cabe(0x241)](_0x10cabe(0x2e5));if(config[_0x10cabe(0x1e8)]!=0x0)for(const _0x460a87 of config){if(_0x460a87['status']==_0x10cabe(0x1ca)||_0x460a87[_0x10cabe(0x2ad)]==_0x10cabe(0x202))await logger['full'](_0x10cabe(0x33e)+_0x460a87[_0x10cabe(0x256)]+_0x10cabe(0x33b)+_0x460a87[_0x10cabe(0x331)]),startBot([_0x460a87[_0x10cabe(0x256)],userID],{'cwd':bbpath},function(_0x47434d){const _0xce92ce=_0x10cabe;if(_0x47434d)logger[_0xce92ce(0x263)](_0x47434d);});else(_0x460a87['status']==_0x10cabe(0x2e6)||_0x460a87['status']==_0x10cabe(0x2d4))&&await logger['full'](_0x10cabe(0x1cc)+_0x460a87[_0x10cabe(0x256)]+'\x20|\x20'+_0x460a87[_0x10cabe(0x331)]);}else!newBot&&logger[_0x10cabe(0x241)](_0x10cabe(0x219));if(newBot)addBot();logger[_0x10cabe(0x241)](_0x10cabe(0x2e5)),logger[_0x10cabe(0x241)](''),await logger[_0x10cabe(0x227)](_0x10cabe(0x1b9)+nodeversion),await logger['debug'](_0x10cabe(0x27e),_0x221005);}function startSocket(){const _0x26f031=_0x5dceab;io['on'](_0x26f031(0x26d),_0x2c09ba=>{const _0x439a54=_0x26f031;let _0xeaa25,_0x1840fe,_0x2a71af,_0x1a619e,_0x49a648;const _0x1fbd82=_0x2c09ba[_0x439a54(0x28b)]['headers'][_0x439a54(0x321)];_0x1840fe=_0x1fbd82['match'](/bot[0-9]{3}/);if(_0x1840fe)_0x2a71af=_0x1840fe[0x0][_0x439a54(0x367)](/[0-9]{3}/);if(_0x2a71af)_0xeaa25=_0x2a71af[0x0];else _0xeaa25=_0x439a54(0x2d6);const _0x1e6a1e=_0x2c09ba[_0x439a54(0x28b)][_0x439a54(0x2b2)][_0x439a54(0x2de)];if(!_0x1e6a1e)_0x2c09ba[_0x439a54(0x290)](_0x439a54(0x2ad),{'publicKey':secure[_0x439a54(0x1df)]});else{_0x1a619e=timelyDecrypt(_0x1e6a1e,![]);if(!_0x1a619e)_0x2c09ba[_0x439a54(0x290)](_0x439a54(0x2ad),{'publicKey':secure['publicKey']});else{_0x49a648=normalizeIP(_0x2c09ba['conn'][_0x439a54(0x2a0)])[_0x439a54(0x29c)];if(!devices[_0x1a619e])devices[_0x1a619e]={'uuid':_0x1a619e,'access':{'token':null}};devices[_0x1a619e]['ip']=_0x49a648;const _0x3ab699=addClient(_0x2c09ba['id'],_0x1a619e,_0xeaa25);setAccess(_0x3ab699),emitMessages(),_0x2c09ba['on'](_0x439a54(0x2c8),_0x108d5c=>{const _0x28a996=_0x439a54,_0x5df34c=timelyDecrypt(_0x108d5c[_0x28a996(0x1d8)]);if(_0x5df34c){_0x108d5c={'username':_0x108d5c[_0x28a996(0x2f3)],'password':_0x5df34c},devices[_0x1a619e][_0x28a996(0x394)]=validateCredentials(_0x108d5c,_0x1a619e);if(devices[_0x1a619e][_0x28a996(0x394)][_0x28a996(0x22f)]==![]&&devices[_0x1a619e][_0x28a996(0x394)][_0x28a996(0x359)]=='2FA\x20login\x20required')_0x2c09ba[_0x28a996(0x290)](_0x28a996(0x2ad),{'access':devices[_0x1a619e]['access']}),loginAccess2FA(_0x1a619e,_0x49a648);else{if(devices[_0x1a619e][_0x28a996(0x394)]['allow']==![]&&devices[_0x1a619e][_0x28a996(0x394)][_0x28a996(0x359)]=='invalid\x20credentials')_0x2c09ba[_0x28a996(0x290)]('status',{'access':devices[_0x1a619e][_0x28a996(0x394)]});else devices[_0x1a619e][_0x28a996(0x394)][_0x28a996(0x22f)]&&devices[_0x1a619e][_0x28a996(0x394)]['reason']==_0x28a996(0x1b3)&&(getClientsWithUuid(_0x1a619e)['forEach'](_0x30fa89=>{setAccess(_0x30fa89);}),logger[_0x28a996(0x227)]('Logged\x20in\x20user\x20...'+_0x1a619e[_0x28a996(0x330)](-0x8)),setTokenRefresh(_0x1a619e),setSessionTimeout(_0x28a996(0x2c8),_0x1a619e));}}else logger['full']('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x2c09ba['on'](_0x439a54(0x1cb),()=>{resetPassword();}),_0x2c09ba['on'](_0x439a54(0x2ea),_0x16f239=>{removeClient(_0x2c09ba['id']);}),_0xeaa25=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x4b3246){const _0x142423=_0x5dceab;if(_0x4b3246!=_0x142423(0x2d6)&&config[_0x142423(0x322)]!=''){if(pid[_0x4b3246])pid[_0x4b3246][_0x142423(0x2dd)]({'function':_0x142423(0x388),'args':null});}_0x4b3246!=_0x142423(0x2d6)&&broadcastToBots(_0x142423(0x352),JSON[_0x142423(0x397)](config));}function reloadBotManager(){const _0x14096d=_0x5dceab;getClientsWithBotID(_0x14096d(0x2d6))[_0x14096d(0x27a)](_0x4d1f28=>{const _0x45f779=_0x14096d;getSocket(_0x4d1f28['id'])[_0x45f779(0x290)](_0x45f779(0x2ad),{'access':{'allow':![],'reason':_0x45f779(0x314),'token':null}});});}function getSocket(_0x39c486){const _0x4b4f0e=_0x5dceab;return io['sockets'][_0x4b4f0e(0x34c)][_0x4b4f0e(0x382)](_0x39c486);}function setAccess(_0x5dad3e){const _0x4f93=_0x5dceab,_0x23701d=getSocket(_0x5dad3e['id']),_0x34d278=_0x5dad3e[_0x4f93(0x1c0)],_0x113199=_0x5dad3e[_0x4f93(0x1f6)];devices[_0x34d278][_0x4f93(0x394)]=validateAccess(devices[_0x34d278]['access'][_0x4f93(0x2db)],_0x34d278),logger[_0x4f93(0x227)](_0x4f93(0x20f)+devices[_0x34d278][_0x4f93(0x394)]['reason']+_0x4f93(0x284)+_0x5dad3e['id'][_0x4f93(0x330)](-0x8)+_0x4f93(0x35f)+_0x34d278[_0x4f93(0x330)](-0x8)),_0x23701d['join'](_0x34d278);if(devices[_0x34d278]['access'][_0x4f93(0x22f)]){_0x23701d[_0x4f93(0x250)](_0x113199);if(_0x113199==_0x4f93(0x2d6))initializeSocketBotManager(_0x23701d);else initializeSocketBot(_0x23701d);initClient(_0x113199);}devices[_0x34d278][_0x4f93(0x394)][_0x4f93(0x2db)]&&devices[_0x34d278]['access'][_0x4f93(0x359)]==_0x4f93(0x39a)&&setSessionTimeout(_0x4f93(0x1bd),_0x34d278),devices[_0x34d278][_0x4f93(0x394)][_0x4f93(0x2db)]&&devices[_0x34d278]['access'][_0x4f93(0x359)]==_0x4f93(0x210)&&setSessionTimeout(_0x4f93(0x2c8),_0x34d278),_0x23701d['emit'](_0x4f93(0x2ad),{'status':_0x5dad3e[_0x4f93(0x332)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x34d278][_0x4f93(0x394)],'externalip':devices[_0x34d278]['ip'],'publicKey':secure[_0x4f93(0x1df)],'userid':settings[_0x4f93(0x37f)],'validInstallation':validInstallation}),devices[_0x34d278]['access'][_0x4f93(0x22f)]==![]&&devices[_0x34d278][_0x4f93(0x394)][_0x4f93(0x359)]=='2FA\x20required'&&temporaryAccess2FA(_0x34d278,devices[_0x34d278]['ip']);}function setSessionTimeout(_0x456f62,_0x3ce241){const _0x5624d1=_0x5dceab;let _0x34bb01;if(_0x456f62==_0x5624d1(0x2c8))_0x34bb01=loginExpiry*0x3c*0x3e8;else _0x34bb01=devices[_0x3ce241][_0x5624d1(0x38c)]['expiry']*0x3c*0x3e8-(new Date()[_0x5624d1(0x309)]()-devices[_0x3ce241][_0x5624d1(0x38c)]['timestamp']);if(devices[_0x3ce241][_0x5624d1(0x372)])clearTimeout(devices[_0x3ce241][_0x5624d1(0x372)]);devices[_0x3ce241]['pidExpireLogin']=setTimeout(()=>{const _0x1ab082=_0x5624d1;if(devices[_0x3ce241]['pidRefreshToken'])clearTimeout(devices[_0x3ce241][_0x1ab082(0x354)]);removeSocketListeners(_0x3ce241),addBlacklist(_0x3ce241),devices[_0x3ce241][_0x1ab082(0x38c)]=null,devices[_0x3ce241]['telegram2FaApproval']=null,devices[_0x3ce241][_0x1ab082(0x394)][_0x1ab082(0x2db)]=null,logger[_0x1ab082(0x227)](_0x1ab082(0x2e0)+_0x3ce241[_0x1ab082(0x330)](-0x8)),devices[_0x3ce241][_0x1ab082(0x394)]=validateAccess(devices[_0x3ce241]['access'][_0x1ab082(0x2db)],_0x3ce241),!(devices[_0x3ce241]['access'][_0x1ab082(0x22f)]&&devices[_0x3ce241]['access'][_0x1ab082(0x359)]==_0x1ab082(0x1fa))&&(_0x456f62==_0x1ab082(0x2c8)?io['to'](_0x3ce241)['emit'](_0x1ab082(0x2ad),{'access':{'allow':![],'reason':_0x1ab082(0x1d5),'token':null}}):io['to'](_0x3ce241)[_0x1ab082(0x290)](_0x1ab082(0x2ad),{'access':{'allow':![],'reason':_0x1ab082(0x24b),'token':null}})),devices[_0x3ce241]['access'][_0x1ab082(0x2db)]=null;},_0x34bb01);}function setTokenRefresh(_0x15c2ab){const _0x54c93f=_0x5dceab;if(devices[_0x15c2ab][_0x54c93f(0x354)])clearTimeout(devices[_0x15c2ab][_0x54c93f(0x354)]);devices[_0x15c2ab][_0x54c93f(0x354)]=setTimeout(()=>{const _0x4142a6=_0x54c93f;getClientsWithUuid(_0x15c2ab)['length']!=0x0?(devices[_0x15c2ab][_0x4142a6(0x394)]=refreshToken(_0x15c2ab),io['to'](_0x15c2ab)[_0x4142a6(0x290)](_0x4142a6(0x2ad),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x15c2ab][_0x4142a6(0x394)],'externalip':devices[_0x15c2ab]['ip'],'publicKey':secure[_0x4142a6(0x1df)],'validInstallation':validInstallation}),setTokenRefresh(_0x15c2ab)):clearTimeout(devices[_0x15c2ab][_0x4142a6(0x354)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4fbabf){const _0x2105dc=_0x5dceab,_0x462542=getClient(_0x4fbabf['id'])[_0x2105dc(0x1c0)];_0x4fbabf[_0x2105dc(0x290)](_0x2105dc(0x352),config),_0x4fbabf[_0x2105dc(0x290)](_0x2105dc(0x2ec),cleanSettings()),_0x4fbabf['on'](_0x2105dc(0x23a),_0x1b8ca0=>{const _0x338739=_0x2105dc;if(validateAccess(_0x1b8ca0,_0x462542)['allow'])addBot();else logger[_0x338739(0x263)](_0x338739(0x38e));}),_0x4fbabf['on'](_0x2105dc(0x2c4),(_0x5386df,_0x453cbc)=>{const _0x499e68=_0x2105dc;if(validateAccess(_0x453cbc,_0x462542)[_0x499e68(0x22f)])toggleBot(_0x5386df[_0x499e68(0x256)],_0x5386df['status'],_0x5386df[_0x499e68(0x295)]);else logger['full'](_0x499e68(0x33c));}),_0x4fbabf['on'](_0x2105dc(0x298),(_0x2ea32e,_0x2a715a)=>{const _0x5092a4=_0x2105dc;if(validateAccess(_0x2a715a,_0x462542)['allow'])toggleBotMode(_0x2ea32e);else logger['full'](_0x5092a4(0x33c));}),_0x4fbabf['on'](_0x2105dc(0x1e3),(_0x2d0149,_0x4dc4d9)=>{const _0x4ecba2=_0x2105dc;if(validateAccess(_0x4dc4d9,_0x462542)[_0x4ecba2(0x22f)])deleteBot(_0x2d0149);else logger[_0x4ecba2(0x263)](_0x4ecba2(0x317));}),_0x4fbabf['on'](_0x2105dc(0x2ce),(_0x48d2cc,_0x4c475d)=>{const _0x5bc62a=_0x2105dc;if(validateAccess(_0x4c475d,_0x462542)[_0x5bc62a(0x22f)])storeSettings(_0x48d2cc,!![]);else logger[_0x5bc62a(0x263)](_0x5bc62a(0x29a));}),_0x4fbabf['on'](_0x2105dc(0x2bc),_0x5bf9ec=>{const _0x377884=_0x2105dc;if(validateAccess(_0x5bf9ec,_0x462542)[_0x377884(0x22f)])updateBB(_0x377884(0x328));else logger[_0x377884(0x263)](_0x377884(0x2a3));}),_0x4fbabf['on']('reinstall-bb',_0x54bf49=>{const _0x599f2e=_0x2105dc;if(validateAccess(_0x54bf49,_0x462542)[_0x599f2e(0x22f)])updateBB('reinstall');else logger['full']('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x4fbabf['on']('get-backup-files',_0x3a6ed7=>{const _0x2f5321=_0x2105dc;if(validateAccess(_0x3a6ed7,_0x462542)[_0x2f5321(0x22f)]){const _0x1390be=getClient(_0x4fbabf['id']);if(_0x1390be)getBackupFiles(_0x1390be[_0x2f5321(0x1c0)]);else logger[_0x2f5321(0x263)](_0x2f5321(0x1fe));}else logger[_0x2f5321(0x263)](_0x2f5321(0x271));}),_0x4fbabf['on'](_0x2105dc(0x276),(_0x39e372,_0x4b3427)=>{const _0x3e9b61=_0x2105dc;if(validateAccess(_0x4b3427,_0x462542)[_0x3e9b61(0x22f)])restoreBackupFile(_0x39e372);else logger[_0x3e9b61(0x263)](_0x3e9b61(0x32f));}),_0x4fbabf['on'](_0x2105dc(0x2c9),_0x1e2e3d=>{const _0x5de697=_0x2105dc;if(validateAccess(_0x1e2e3d,_0x462542)[_0x5de697(0x22f)])getMessages();else logger[_0x5de697(0x263)](_0x5de697(0x34e));}),_0x4fbabf['on'](_0x2105dc(0x1b1),(_0x3cea42,_0x237018)=>{const _0x5ecd1b=_0x2105dc;if(validateAccess(_0x237018,_0x462542)[_0x5ecd1b(0x22f)])confirmMessage(_0x3cea42);else logger[_0x5ecd1b(0x263)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x4fbabf['on'](_0x2105dc(0x307),_0x3d3cc4=>{const _0x5d9b09=_0x2105dc;if(validateAccess(_0x3d3cc4,_0x462542)[_0x5d9b09(0x22f)]){if(devices[_0x462542]['pidRefreshToken'])clearTimeout(devices[_0x462542]['pidRefreshToken']);if(devices[_0x462542]['pidExpireLogin'])clearTimeout(devices[_0x462542][_0x5d9b09(0x372)]);removeSocketListeners(getClient(_0x4fbabf['id'])['uuid']),addBlacklist(_0x462542),devices[_0x462542]['telegramIpApproval']=null,devices[_0x462542][_0x5d9b09(0x335)]=null,devices[_0x462542][_0x5d9b09(0x394)][_0x5d9b09(0x2db)]=null,logger[_0x5d9b09(0x227)](_0x5d9b09(0x310)+_0x462542[_0x5d9b09(0x330)](-0x8)),io['to'](getClient(_0x4fbabf['id'])[_0x5d9b09(0x1c0)])[_0x5d9b09(0x290)](_0x5d9b09(0x2ad),{'access':{'allow':![],'reason':_0x5d9b09(0x350),'token':null}});}else logger[_0x5d9b09(0x263)](_0x5d9b09(0x341));});}function initializeSocketBot(_0x5ae03a){const _0x1f8110=_0x5dceab,_0x3dca5e=getClient(_0x5ae03a['id'])[_0x1f8110(0x1f6)],_0x38c8a0=getClient(_0x5ae03a['id'])[_0x1f8110(0x1c0)];_0x5ae03a['on'](_0x1f8110(0x358),(_0x2a7723,_0x3bc33a)=>{const _0xc15100=_0x1f8110;if(validateAccess(_0x3bc33a,_0x38c8a0)[_0xc15100(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e]['send']({'function':_0xc15100(0x380),'args':_0x2a7723});}else logger[_0xc15100(0x263)](_0xc15100(0x391));}),_0x5ae03a['on'](_0x1f8110(0x37b),(_0x111deb,_0x30bfb1)=>{const _0x128cb3=_0x1f8110;if(validateAccess(_0x30bfb1,_0x38c8a0)[_0x128cb3(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e]['send']({'function':_0x128cb3(0x258),'args':_0x111deb});}else logger[_0x128cb3(0x263)](_0x128cb3(0x306));}),_0x5ae03a['on'](_0x1f8110(0x1f3),(_0x4f3e18,_0x4390f9)=>{const _0x27d9c8=_0x1f8110;if(validateAccess(_0x4390f9,_0x38c8a0)['allow']){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x27d9c8(0x2dd)]({'function':'getPortfolio','args':_0x4f3e18});}else logger[_0x27d9c8(0x263)](_0x27d9c8(0x29e));}),_0x5ae03a['on'](_0x1f8110(0x1bb),(_0x4290a2,_0x15a4ab)=>{const _0x3e6220=_0x1f8110;if(validateAccess(_0x15a4ab,_0x38c8a0)[_0x3e6220(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x3e6220(0x2dd)]({'function':_0x3e6220(0x231),'args':_0x4290a2});}else logger[_0x3e6220(0x263)](_0x3e6220(0x1d4));}),_0x5ae03a['on'](_0x1f8110(0x2d0),(_0x1463ba,_0x5ed10e)=>{const _0xd95f71=_0x1f8110;if(validateAccess(_0x5ed10e,_0x38c8a0)[_0xd95f71(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0xd95f71(0x2dd)]({'function':_0xd95f71(0x2ed),'args':_0x1463ba});}else logger[_0xd95f71(0x263)](_0xd95f71(0x1f9));}),_0x5ae03a['on'](_0x1f8110(0x3a8),(_0x507abb,_0x7a0f58)=>{const _0x37d69f=_0x1f8110;if(validateAccess(_0x7a0f58,_0x38c8a0)[_0x37d69f(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x37d69f(0x2dd)]({'function':_0x37d69f(0x27f),'args':_0x507abb});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration');}),_0x5ae03a['on'](_0x1f8110(0x1c5),_0x302ef1=>{const _0x187709=_0x1f8110;if(validateAccess(_0x302ef1,_0x38c8a0)[_0x187709(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x187709(0x2dd)]({'function':_0x187709(0x326),'args':null});}else logger[_0x187709(0x263)](_0x187709(0x3a2));}),_0x5ae03a['on'](_0x1f8110(0x2bf),_0x9c9f4a=>{const _0x387e52=_0x1f8110;if(validateAccess(_0x9c9f4a,_0x38c8a0)[_0x387e52(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x387e52(0x2dd)]({'function':'getStartingBalances','args':null});}else logger[_0x387e52(0x263)](_0x387e52(0x21a));}),_0x5ae03a['on'](_0x1f8110(0x34d),(_0x59f425,_0x607361)=>{const _0x5d5ce5=_0x1f8110;if(validateAccess(_0x607361,_0x38c8a0)[_0x5d5ce5(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x5d5ce5(0x2dd)]({'function':_0x5d5ce5(0x39f),'args':_0x59f425});}else logger[_0x5d5ce5(0x263)](_0x5d5ce5(0x360));}),_0x5ae03a['on'](_0x1f8110(0x361),_0x7ce84f=>{const _0x18066a=_0x1f8110;if(validateAccess(_0x7ce84f,_0x38c8a0)[_0x18066a(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x18066a(0x2dd)]({'function':'cancelLoading','args':null});}else logger[_0x18066a(0x263)](_0x18066a(0x1c4));}),_0x5ae03a['on'](_0x1f8110(0x2e1),_0x2f1b17=>{const _0x3c7d77=_0x1f8110;if(validateAccess(_0x2f1b17,_0x38c8a0)[_0x3c7d77(0x22f)]){if(pid[_0x3dca5e])pid[_0x3dca5e][_0x3c7d77(0x2dd)]({'function':_0x3c7d77(0x215),'args':null});}else logger[_0x3c7d77(0x263)](_0x3c7d77(0x257));}),_0x5ae03a['on'](_0x1f8110(0x2bc),_0x284884=>{const _0x3ff921=_0x1f8110;if(validateAccess(_0x284884,_0x38c8a0)['allow'])updateBB(_0x3ff921(0x328));else logger[_0x3ff921(0x263)](_0x3ff921(0x2a3));}),_0x5ae03a['on'](_0x1f8110(0x2c9),_0x1cb849=>{const _0x34cb48=_0x1f8110;if(validateAccess(_0x1cb849,_0x38c8a0)['allow'])getMessages();else logger[_0x34cb48(0x263)](_0x34cb48(0x34e));}),_0x5ae03a['on'](_0x1f8110(0x1b1),(_0x4f3218,_0x3c8057)=>{const _0x2f9da7=_0x1f8110;if(validateAccess(_0x3c8057,_0x38c8a0)[_0x2f9da7(0x22f)])confirmMessage(_0x4f3218);else logger[_0x2f9da7(0x263)](_0x2f9da7(0x319));}),_0x5ae03a['on'](_0x1f8110(0x307),_0x4b94d2=>{const _0x5947c4=_0x1f8110;if(validateAccess(_0x4b94d2,_0x38c8a0)['allow']){if(devices[_0x38c8a0][_0x5947c4(0x354)])clearTimeout(devices[_0x38c8a0][_0x5947c4(0x354)]);if(devices[_0x38c8a0]['pidExpireLogin'])clearTimeout(devices[_0x38c8a0][_0x5947c4(0x372)]);removeSocketListeners(getClient(_0x5ae03a['id'])[_0x5947c4(0x1c0)]),addBlacklist(_0x38c8a0),devices[_0x38c8a0][_0x5947c4(0x38c)]=null,devices[_0x38c8a0][_0x5947c4(0x335)]=null,devices[_0x38c8a0][_0x5947c4(0x394)]['token']=null,logger[_0x5947c4(0x227)](_0x5947c4(0x310)+_0x38c8a0[_0x5947c4(0x330)](-0x8)),io['to'](getClient(_0x5ae03a['id'])[_0x5947c4(0x1c0)])[_0x5947c4(0x290)](_0x5947c4(0x2ad),{'access':{'allow':![],'reason':_0x5947c4(0x350),'token':null}});}else logger[_0x5947c4(0x263)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x274adc){getClientsWithUuid(_0x274adc)['forEach'](_0x584379=>{const _0x5efd00=_0x1ee0;getSocket(_0x584379['id'])[_0x5efd00(0x351)]();});}function cleanSettings(){const _0x25891b=_0x5dceab;let _0x444a37=settings;return settings[_0x25891b(0x36a)]&&settings[_0x25891b(0x36a)]!=''&&(_0x444a37={..._0x444a37,'telegramToken':_0x25891b(0x357)}),settings[_0x25891b(0x1b8)]&&settings['bbPassword']!=''&&(_0x444a37={..._0x444a37,'bbPassword':_0x25891b(0x357)}),(settings[_0x25891b(0x1b8)]&&settings[_0x25891b(0x1b8)]==_0x25891b(0x1e2)||settings['telegramToken']&&settings[_0x25891b(0x36a)]==_0x25891b(0x1e2))&&(_0x444a37={..._0x444a37,'restored':{'password':settings[_0x25891b(0x1b8)]==_0x25891b(0x1e2),'telegram':settings['telegramToken']==_0x25891b(0x1e2)}}),_0x444a37;}async function updateBB(_0xcb2509){const _0x1eb672=_0x5dceab;await backupConfigFiles(),installingUpdate=!![],config[_0x1eb672(0x27a)](_0x577757=>{restartBot(_0x577757['botID']);}),logger['debug'](_0x1eb672(0x300)+_0xcb2509+_0x1eb672(0x2fe)+environment);if(_0xcb2509==_0x1eb672(0x328))process[_0x1eb672(0x2dd)]({'update':!![],'environment':environment},_0x4b7db0=>{});else _0xcb2509=='reinstall'&&process[_0x1eb672(0x2dd)]({'reinstall':!![],'environment':environment},_0x77dc3e=>{});}function startBot(_0x3a984e,_0x32615e,_0xdd5134){const _0x5750d9=_0x5dceab;if(debugging)_0x3a984e[_0x5750d9(0x28e)]('-d');let _0x158e69=![];const _0x35093a=_0x3a984e[0x0];_0x32615e={..._0x32615e,'stdio':[_0x5750d9(0x1f5),_0x5750d9(0x1f5),_0x5750d9(0x1f5),_0x5750d9(0x2c2)]},pid[_0x35093a]=childProcess[_0x5750d9(0x25b)](botfile,_0x3a984e,_0x32615e),pid[_0x35093a]['on'](_0x5750d9(0x340),_0x3f0c45=>{const _0x537934=_0x5750d9;switch(Object[_0x537934(0x2be)](_0x3f0c45)[0x0]){case _0x537934(0x331):updateBotName(_0x35093a,_0x3f0c45[_0x537934(0x331)]);break;case _0x537934(0x21d):updateBotManager();break;case _0x537934(0x2ad):updateStatus(_0x35093a,_0x3f0c45[_0x537934(0x2ad)]);break;case _0x537934(0x295):updateLive(_0x35093a,_0x3f0c45[_0x537934(0x295)]);break;case _0x537934(0x234):updateLive(_0x35093a,_0x3f0c45[_0x537934(0x234)]),io['to'](_0x35093a)[_0x537934(0x290)](_0x537934(0x2ad),{'access':{'allow':![],'reason':_0x537934(0x314),'token':null}});break;case'stop':_0x3f0c45['stop']==_0x537934(0x2a6)&&restartBot(_0x35093a);_0x3f0c45['stop']==_0x537934(0x26c)&&toggleBot(_0x35093a,_0x537934(0x2e6),'stopped');break;case _0x537934(0x225):sendTelegram(_0x35093a,_0x3f0c45[_0x537934(0x225)]);break;case _0x537934(0x230):sendTelegramMsg(_0x3f0c45[_0x537934(0x230)]);break;case _0x537934(0x36d):io['to'](_0x35093a)[_0x537934(0x290)](_0x3f0c45['function'],_0x3f0c45[_0x537934(0x286)]);break;}}),pid[_0x35093a]['on'](_0x5750d9(0x2eb),function(_0x472343){if(_0x158e69)return;_0x158e69=!![],_0xdd5134(_0x472343);}),pid[_0x35093a]['on'](_0x5750d9(0x20d),async function(_0x19a760){const _0x20dd9a=_0x5750d9;if(installingUpdate)return;if(_0x158e69)return;_0x158e69=!![],_0xdd5134(null);const _0x24714b=dbConfig['get']('bots')['find']({'botID':_0x35093a})[_0x20dd9a(0x392)]();_0x24714b&&(_0x24714b[_0x20dd9a(0x2ad)]==_0x20dd9a(0x1ca)||_0x24714b['status']==_0x20dd9a(0x202))&&(await sleep(0x3e8),updateLive(_0x35093a,_0x20dd9a(0x3a7)),logger[_0x20dd9a(0x263)](_0x20dd9a(0x36f)+_0x35093a),startBot([_0x35093a,userID],{'cwd':bbpath},function(_0x2ac663){const _0x132013=_0x20dd9a;if(_0x2ac663)logger[_0x132013(0x263)](_0x2ac663);}));});}function _0x1ee0(_0xb1d2a2,_0x4e8fb2){const _0x3214d5=_0x3ad0();return _0x1ee0=function(_0x28abdf,_0x5d64b7){_0x28abdf=_0x28abdf-0x1b0;let _0x3ad057=_0x3214d5[_0x28abdf];return _0x3ad057;},_0x1ee0(_0xb1d2a2,_0x4e8fb2);}function stopBot(_0x5437b4){const _0x3be684=_0x5dceab;getClientsWithBotID(_0x5437b4)[_0x3be684(0x27a)](_0x4e4f07=>{getSocket(_0x4e4f07['id'])['disconnect'](!![]),removeClient(_0x4e4f07['id']);}),pid[_0x5437b4]&&(pid[_0x5437b4][_0x3be684(0x26c)](),pid[_0x5437b4]=null);}function restartBot(_0x16571a){const _0x327f01=_0x5dceab;if(pid[_0x16571a])pid[_0x16571a][_0x327f01(0x26c)]();}function addBot(){const _0x3f4ff1=_0x5dceab;let _0x3ecd40;for(let _0x4f84d1=0x1;_0x4f84d1<0x3e9;_0x4f84d1++){_0x3ecd40=_0x4f84d1[_0x3f4ff1(0x24a)]()[_0x3f4ff1(0x1f7)](0x3,'0');let _0x2b0935=config[_0x3f4ff1(0x222)](_0x2c1f2a=>_0x2c1f2a[_0x3f4ff1(0x256)]==_0x3ecd40);if(!_0x2b0935)break;}if(_0x3ecd40===_0x3f4ff1(0x281)){logger[_0x3f4ff1(0x263)](_0x3f4ff1(0x30f));return;}logger[_0x3f4ff1(0x263)](_0x3f4ff1(0x385)+_0x3ecd40),dbConfig[_0x3f4ff1(0x382)](_0x3f4ff1(0x352))[_0x3f4ff1(0x28e)]({'botID':_0x3ecd40,'botname':_0x3f4ff1(0x2ba)+_0x3ecd40,'status':_0x3f4ff1(0x202),'live':''})['write'](),startBot([_0x3ecd40,userID],{'cwd':bbpath},function(_0x4e49e1){const _0x4ce87c=_0x3f4ff1;if(_0x4e49e1)logger[_0x4ce87c(0x263)](_0x4e49e1);}),config=getConfiguration(),io['to'](_0x3f4ff1(0x2d6))[_0x3f4ff1(0x290)]('bots',config),broadcastToBots(_0x3f4ff1(0x352),JSON[_0x3f4ff1(0x397)](config));}function deleteBot(_0x4efee0){const _0x2f842d=_0x5dceab;getClientsWithBotID(_0x4efee0)[_0x2f842d(0x27a)](_0x11297a=>{const _0x278b51=_0x2f842d;getSocket(_0x11297a['id'])[_0x278b51(0x2ea)](!![]),removeClient(_0x11297a['id']);}),dbConfig[_0x2f842d(0x382)](_0x2f842d(0x352))[_0x2f842d(0x2ff)]({'botID':_0x4efee0})[_0x2f842d(0x27c)](),logger[_0x2f842d(0x263)](_0x2f842d(0x285)+_0x4efee0),stopBot(_0x4efee0);try{if(fs[_0x2f842d(0x1c8)](path[_0x2f842d(0x250)](configpath,_0x2f842d(0x2a2)+_0x4efee0+'-config.json')))fs[_0x2f842d(0x229)](path[_0x2f842d(0x250)](configpath,_0x2f842d(0x2a2)+_0x4efee0+_0x2f842d(0x1db)));if(fs[_0x2f842d(0x1c8)](path[_0x2f842d(0x250)](configpath,_0x2f842d(0x2a2)+_0x4efee0+_0x2f842d(0x1e6))))fs[_0x2f842d(0x229)](path['join'](configpath,_0x2f842d(0x2a2)+_0x4efee0+_0x2f842d(0x1e6)));if(fs['existsSync'](path[_0x2f842d(0x250)](configpath,_0x2f842d(0x2a2)+_0x4efee0+_0x2f842d(0x204))))fs[_0x2f842d(0x229)](path[_0x2f842d(0x250)](configpath,'bot-'+_0x4efee0+_0x2f842d(0x204)));if(fs[_0x2f842d(0x1c8)](path[_0x2f842d(0x250)](configpath,'bot-'+_0x4efee0+'-results.json')))fs['unlinkSync'](path[_0x2f842d(0x250)](configpath,'bot-'+_0x4efee0+_0x2f842d(0x26e)));}catch(_0x2c6867){if(_0x2c6867)logger['full']('Error\x20while\x20deleting\x20config\x20files:\x20',_0x2c6867);}config=getConfiguration(),io['to'](_0x2f842d(0x2d6))[_0x2f842d(0x290)]('bots',config),broadcastToBots(_0x2f842d(0x352),JSON['stringify'](config));}function toggleBot(_0x3e5469,_0x17c2cd,_0x321855){const _0x6638a1=_0x5dceab;dbConfig[_0x6638a1(0x382)](_0x6638a1(0x352))[_0x6638a1(0x222)]({'botID':_0x3e5469})['assign']({'status':_0x17c2cd})[_0x6638a1(0x2d1)]({'live':_0x321855})[_0x6638a1(0x27c)]();if(_0x17c2cd==_0x6638a1(0x1ca)||_0x17c2cd==_0x6638a1(0x202))logger[_0x6638a1(0x263)]('Enabled\x20Bot\x20'+_0x3e5469),startBot([_0x3e5469,userID],{'cwd':bbpath},function(_0x27de31){if(_0x27de31)logger['full'](_0x27de31);});else(_0x17c2cd==_0x6638a1(0x2e6)||_0x17c2cd=='new-disabled')&&(logger[_0x6638a1(0x263)](_0x6638a1(0x38f)+_0x3e5469),stopBot(_0x3e5469));config=getConfiguration(),io['to'](_0x6638a1(0x2d6))['emit'](_0x6638a1(0x352),config),broadcastToBots(_0x6638a1(0x352),JSON[_0x6638a1(0x397)](config));}function toggleStatus(_0x47d8a0){const _0x543f05=_0x5dceab;let _0x22aa38=dbConfig['get']('bots')['find']({'botID':_0x47d8a0})['value'](),_0x27080e;if(_0x22aa38[_0x543f05(0x2ad)]===_0x543f05(0x1ca))_0x27080e=_0x543f05(0x2e6);else{if(_0x22aa38[_0x543f05(0x2ad)]===_0x543f05(0x202))_0x27080e=_0x543f05(0x2d4);else{if(_0x22aa38[_0x543f05(0x2ad)]===_0x543f05(0x2d4))_0x27080e=_0x543f05(0x202);else{if(_0x22aa38['status']===_0x543f05(0x2e6))_0x27080e='enabled';}}}return _0x27080e;}function updateStatus(_0x48283a,_0x2322d0){const _0x25222a=_0x5dceab;dbConfig[_0x25222a(0x382)](_0x25222a(0x352))[_0x25222a(0x222)]({'botID':_0x48283a})[_0x25222a(0x2d1)]({'status':_0x2322d0})[_0x25222a(0x27c)](),config=getConfiguration(),io['to'](_0x25222a(0x2d6))[_0x25222a(0x290)](_0x25222a(0x352),config),broadcastToBots(_0x25222a(0x352),JSON[_0x25222a(0x397)](config));}function updateLive(_0x2bd4a6,_0x1c6b72){const _0x209ef4=_0x5dceab;dbConfig['get'](_0x209ef4(0x352))[_0x209ef4(0x222)]({'botID':_0x2bd4a6})[_0x209ef4(0x2d1)]({'live':_0x1c6b72})[_0x209ef4(0x27c)](),config=getConfiguration(),io['to'](_0x209ef4(0x2d6))[_0x209ef4(0x290)](_0x209ef4(0x352),config),broadcastToBots(_0x209ef4(0x352),JSON[_0x209ef4(0x397)](config));}function updateBotName(_0x1429a1,_0x278dfc){const _0x34c8a2=_0x5dceab;dbConfig[_0x34c8a2(0x382)](_0x34c8a2(0x352))[_0x34c8a2(0x222)]({'botID':_0x1429a1})[_0x34c8a2(0x2d1)]({'botname':_0x278dfc})[_0x34c8a2(0x27c)](),config=getConfiguration(),io['to'](_0x34c8a2(0x2d6))['emit'](_0x34c8a2(0x352),config),broadcastToBots(_0x34c8a2(0x352),JSON['stringify'](config));}function updateBotManager(){const _0x2117b3=_0x5dceab;config=getConfiguration(),io['to'](_0x2117b3(0x2d6))[_0x2117b3(0x290)]('bots',config),broadcastToBots(_0x2117b3(0x352),JSON[_0x2117b3(0x397)](config));}function toggleBotMode(_0x45d80a){const _0x40fcb2=_0x5dceab;if(pid[_0x45d80a])pid[_0x45d80a]['send']({'function':_0x40fcb2(0x1f8),'args':null});else{const _0x1474fa=configpath+_0x40fcb2(0x2a2)+_0x45d80a+_0x40fcb2(0x1db),_0x56b14c=fs['readFileSync'](_0x1474fa),_0x586152=JSON[_0x40fcb2(0x2e4)](_0x56b14c),_0x4273c2=_0x586152[_0x40fcb2(0x1f6)][0x0][_0x40fcb2(0x39b)];_0x586152[_0x40fcb2(0x1f6)][0x0]['headless']=!_0x4273c2;const _0x28b6d5=JSON[_0x40fcb2(0x397)](_0x586152,null,0x2);fs[_0x40fcb2(0x303)](_0x1474fa,_0x28b6d5),config=getConfiguration(),io['to'](_0x40fcb2(0x2d6))[_0x40fcb2(0x290)]('bots',config),broadcastToBots(_0x40fcb2(0x352),JSON[_0x40fcb2(0x397)](config));}}function telegramError(_0x294574){const _0x2a9b32=_0x5dceab;logger[_0x2a9b32(0x241)](getTimeStamp()+_0x2a9b32(0x25e));}function validateTelegram(_0x1fc5d2){const _0x319656=_0x5dceab;if(_0x1fc5d2['from']['username']!=settings[_0x319656(0x261)]&&'@'+_0x1fc5d2[_0x319656(0x383)][_0x319656(0x2f3)]!=settings['telegramUsername'])return tgBot[_0x319656(0x1d6)](_0x1fc5d2['chat']['id'],_0x319656(0x325),{'parse_mode':_0x319656(0x31b)})[_0x319656(0x243)](_0x42ed79=>{telegramError(_0x42ed79);}),![];return!![];}async function initTelegram(){const _0x4fc951=_0x5dceab;if(tgBot)tgBot[_0x4fc951(0x2a8)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4fc951(0x36a)],{'polling':!![]});let _0x2c97f1=_0x4fc951(0x32c);_0x2c97f1+='\x0a',_0x2c97f1+=_0x4fc951(0x35c),_0x2c97f1+=_0x4fc951(0x25a),_0x2c97f1+=_0x4fc951(0x2f0),_0x2c97f1+=_0x4fc951(0x365),_0x2c97f1+='/on\x20-\x20start\x20bot(s)\x0a',_0x2c97f1+=_0x4fc951(0x208),_0x2c97f1+=_0x4fc951(0x226),_0x2c97f1+=_0x4fc951(0x344),_0x2c97f1+=_0x4fc951(0x1ce),_0x2c97f1+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x2c97f1+=_0x4fc951(0x21b),_0x2c97f1+=_0x4fc951(0x2d2),_0x2c97f1+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x2c97f1+=_0x4fc951(0x364);let _0x2ea76d=_0x4fc951(0x273);_0x2ea76d+='\x0a',_0x2ea76d+=_0x2c97f1,tgBot[_0x4fc951(0x311)](/\/start/,_0x476571=>{const _0x2c8fd7=_0x4fc951;if(!validateTelegram(_0x476571))return;if(settings[_0x2c8fd7(0x260)]!=_0x476571[_0x2c8fd7(0x221)]['id'])updateSetting(_0x2c8fd7(0x260),_0x476571[_0x2c8fd7(0x221)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x476571[_0x2c8fd7(0x221)]['id'],_0x2ea76d)['catch'](_0x3c3e67=>{telegramError(_0x3c3e67);});}),tgBot['onText'](/\/enable/,_0x5d006b=>{const _0x350d07=_0x4fc951;if(!validateTelegram(_0x5d006b))return;if(settings[_0x350d07(0x260)]!=_0x5d006b[_0x350d07(0x221)]['id'])updateSetting(_0x350d07(0x260),_0x5d006b[_0x350d07(0x221)]['id']);updateSetting(_0x350d07(0x393),!![]),tgBot[_0x350d07(0x1d6)](_0x5d006b[_0x350d07(0x221)]['id'],_0x350d07(0x370))[_0x350d07(0x243)](_0x2d1269=>{telegramError(_0x2d1269);});}),tgBot['onText'](/\/config/,async _0x313e6e=>{const _0x4756c2=_0x4fc951;if(!validateTelegram(_0x313e6e))return;tgBot['removeListener'](_0x4756c2(0x3a1)),tgBot[_0x4756c2(0x1d6)](_0x313e6e['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x4756c2(0x21c),'callback_data':_0x4756c2(0x2c0)},{'text':_0x4756c2(0x24e),'callback_data':_0x4756c2(0x2cc)},{'text':_0x4756c2(0x259),'callback_data':_0x4756c2(0x389)}]]}})['catch'](_0x1cb84a=>{telegramError(_0x1cb84a);}),tgBot['on'](_0x4756c2(0x3a1),async _0x55bd8e=>{const _0x51bd83=_0x4756c2,_0x209e3c=_0x55bd8e[_0x51bd83(0x324)],_0x4a8638=_0x55bd8e[_0x51bd83(0x340)];tgBot['answerCallbackQuery'](_0x55bd8e['id'])['then'](async()=>{const _0x45d683=_0x51bd83;_0x209e3c==_0x45d683(0x2c0)&&(updateSetting('telegramEvents',_0x45d683(0x2c0)),updateSetting(_0x45d683(0x393),!![]),await tgBot['sendMessage'](_0x4a8638[_0x45d683(0x221)]['id'],_0x45d683(0x32d))[_0x45d683(0x243)](_0x348f49=>{telegramError(_0x348f49);}));_0x209e3c=='alerts'&&(updateSetting('telegramEvents',_0x45d683(0x2cc)),updateSetting(_0x45d683(0x393),!![]),await tgBot[_0x45d683(0x1d6)](_0x4a8638[_0x45d683(0x221)]['id'],_0x45d683(0x1d9))[_0x45d683(0x243)](_0x163664=>{telegramError(_0x163664);}));_0x209e3c==_0x45d683(0x389)&&(updateSetting(_0x45d683(0x32e),_0x45d683(0x389)),updateSetting(_0x45d683(0x393),!![]),await tgBot[_0x45d683(0x1d6)](_0x4a8638[_0x45d683(0x221)]['id'],_0x45d683(0x345))['catch'](_0x52b0fb=>{telegramError(_0x52b0fb);}));if(!settings[_0x45d683(0x260)])tgBot[_0x45d683(0x1d6)](_0x4a8638[_0x45d683(0x221)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x45d683(0x243)](_0x3426a8=>{telegramError(_0x3426a8);});}),tgBot['removeListener'](_0x51bd83(0x3a1));});}),tgBot[_0x4fc951(0x311)](/\/status/,_0x4d2420=>{const _0xe80c28=_0x4fc951;if(!validateTelegram(_0x4d2420))return;const _0x35979b=getBotsWithMode();let _0x35629e=_0xe80c28(0x269);config[_0xe80c28(0x27a)](_0x4c0263=>{const _0x13a579=_0xe80c28,_0x22bd2d=_0x35979b[_0x13a579(0x222)](_0x20b64c=>_0x20b64c[_0x13a579(0x256)]==_0x4c0263[_0x13a579(0x256)])['mode'];_0x35629e+=_0x13a579(0x2ba)+_0x4c0263[_0x13a579(0x256)]+':\x20'+_0x4c0263['status']+_0x13a579(0x33b)+_0x22bd2d+'\x20|\x20'+_0x4c0263['live']+'\x0a';}),_0x35629e+='\x0a',_0x35629e+=_0xe80c28(0x266),_0x35629e+=!settings[_0xe80c28(0x393)]?_0xe80c28(0x20e):_0xe80c28(0x30e),_0x35629e+=settings[_0xe80c28(0x393)]?settings[_0xe80c28(0x32e)]==_0xe80c28(0x389)?_0xe80c28(0x218):_0xe80c28(0x2f5)+settings[_0xe80c28(0x32e)]+'\x20only\x0a':'',tgBot[_0xe80c28(0x1d6)](_0x4d2420[_0xe80c28(0x221)]['id'],_0x35629e,{'parse_mode':_0xe80c28(0x31b)})['catch'](_0x16fdfe=>{telegramError(_0x16fdfe);});}),tgBot[_0x4fc951(0x311)](/\/restart/,_0x206ec2=>{const _0x5030a8=_0x4fc951;if(!validateTelegram(_0x206ec2))return;tgBot[_0x5030a8(0x2a5)](_0x5030a8(0x3a1));const _0x4c3c2c=getEnabledBots();if(_0x4c3c2c[_0x5030a8(0x1e8)]==0x0)tgBot[_0x5030a8(0x1d6)](_0x206ec2['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x5030a8(0x243)](_0x145609=>{telegramError(_0x145609);});else{if(_0x4c3c2c[_0x5030a8(0x1e8)]>0x1)_0x4c3c2c[_0x5030a8(0x28e)]({'botID':'all'});let _0x375cc9=[],_0xd0778d=[];const _0x2dc924=_0x4c3c2c[_0x5030a8(0x1e8)]%0x4==0x0||_0x4c3c2c[_0x5030a8(0x1e8)]%0x4==0x3||_0x4c3c2c[_0x5030a8(0x1e8)]%0x3==0x1?0x4:0x3;let _0x5885b0=0x0;_0x4c3c2c[_0x5030a8(0x27a)]((_0x40f5eb,_0x364c06)=>{const _0x17d88c=_0x5030a8;if(_0x364c06%_0x2dc924==0x0)_0xd0778d=[];_0xd0778d[_0x17d88c(0x28e)]({'text':_0x40f5eb[_0x17d88c(0x256)]=='all'?_0x17d88c(0x289):_0x17d88c(0x2ba)+_0x40f5eb[_0x17d88c(0x256)],'callback_data':_0x40f5eb[_0x17d88c(0x256)]}),_0x364c06%_0x2dc924==0x0&&(_0x375cc9[_0x5885b0]=_0xd0778d,_0x5885b0++);}),tgBot[_0x5030a8(0x1d6)](_0x206ec2[_0x5030a8(0x221)]['id'],_0x5030a8(0x23d),{'reply_markup':{'inline_keyboard':_0x375cc9}})[_0x5030a8(0x243)](_0x5670be=>{telegramError(_0x5670be);}),tgBot['on'](_0x5030a8(0x3a1),async _0x1f41d1=>{const _0x13c56d=_0x5030a8,_0x39aba8=_0x1f41d1[_0x13c56d(0x324)],_0x25bc43=_0x1f41d1[_0x13c56d(0x340)];tgBot[_0x13c56d(0x3a3)](_0x1f41d1['id'])[_0x13c56d(0x2c7)](async()=>{const _0x51b9ea=_0x13c56d;_0x39aba8==_0x51b9ea(0x389)?config[_0x51b9ea(0x27a)](_0x2d3e5f=>{const _0x9b889=_0x51b9ea;restartBot(_0x2d3e5f[_0x9b889(0x256)]);}):restartBot(_0x39aba8);}),tgBot[_0x13c56d(0x2a5)]('callback_query');});}}),tgBot['onText'](/\/on/,_0xe49d9e=>{const _0x2472fa=_0x4fc951;if(!validateTelegram(_0xe49d9e))return;tgBot[_0x2472fa(0x2a5)](_0x2472fa(0x3a1));const _0x4f4dba=getDisabledBots();if(_0x4f4dba[_0x2472fa(0x1e8)]==0x0)tgBot[_0x2472fa(0x1d6)](_0xe49d9e[_0x2472fa(0x221)]['id'],_0x2472fa(0x1b0))[_0x2472fa(0x243)](_0x78d255=>{telegramError(_0x78d255);});else{if(_0x4f4dba[_0x2472fa(0x1e8)]>0x1)_0x4f4dba['push']({'botID':_0x2472fa(0x389)});let _0x3f7a9a=[],_0x535370=[];const _0x3bb506=_0x4f4dba['length']%0x4==0x0||_0x4f4dba[_0x2472fa(0x1e8)]%0x4==0x3||_0x4f4dba[_0x2472fa(0x1e8)]%0x3==0x1?0x4:0x3;let _0x1c116a=0x0;_0x4f4dba[_0x2472fa(0x27a)]((_0x58bb37,_0x333338)=>{const _0x27ef7f=_0x2472fa;if(_0x333338%_0x3bb506==0x0)_0x535370=[];_0x535370['push']({'text':_0x58bb37[_0x27ef7f(0x256)]==_0x27ef7f(0x389)?_0x27ef7f(0x289):_0x27ef7f(0x2ba)+_0x58bb37[_0x27ef7f(0x256)],'callback_data':_0x58bb37[_0x27ef7f(0x256)]}),_0x333338%_0x3bb506==0x0&&(_0x3f7a9a[_0x1c116a]=_0x535370,_0x1c116a++);}),tgBot[_0x2472fa(0x1d6)](_0xe49d9e[_0x2472fa(0x221)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3f7a9a}})[_0x2472fa(0x243)](_0x7cf975=>{telegramError(_0x7cf975);}),tgBot['on'](_0x2472fa(0x3a1),async _0xc3390=>{const _0xaebab2=_0x2472fa,_0x3adace=_0xc3390[_0xaebab2(0x324)],_0x5d40e0=_0xc3390[_0xaebab2(0x340)];tgBot[_0xaebab2(0x3a3)](_0xc3390['id'])[_0xaebab2(0x2c7)](async()=>{const _0x39b34b=_0xaebab2;_0x3adace==_0x39b34b(0x389)?(tgBot['sendMessage'](_0x5d40e0[_0x39b34b(0x221)]['id'],_0x39b34b(0x2a4))[_0x39b34b(0x243)](_0x192d5d=>{telegramError(_0x192d5d);}),_0x4f4dba[_0x39b34b(0x27a)](_0x4ae9ef=>{const _0x548175=_0x39b34b;if(_0x4ae9ef[_0x548175(0x256)]!=_0x548175(0x389))toggleBot(_0x4ae9ef['botID'],toggleStatus(_0x4ae9ef[_0x548175(0x256)]),_0x548175(0x3a7));})):(tgBot['sendMessage'](_0x5d40e0['chat']['id'],_0x39b34b(0x1d1)+_0x3adace)['catch'](_0x1a24e2=>{telegramError(_0x1a24e2);}),toggleBot(_0x3adace,toggleStatus(_0x3adace),_0x39b34b(0x3a7)));}),tgBot[_0xaebab2(0x2a5)]('callback_query');});}}),tgBot[_0x4fc951(0x311)](/\/off/,_0x2c00e5=>{const _0x22ec4f=_0x4fc951;if(!validateTelegram(_0x2c00e5))return;tgBot['removeListener'](_0x22ec4f(0x3a1));const _0x5220aa=getEnabledBots();if(_0x5220aa[_0x22ec4f(0x1e8)]==0x0)tgBot[_0x22ec4f(0x1d6)](_0x2c00e5[_0x22ec4f(0x221)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x22ec4f(0x243)](_0x502439=>{telegramError(_0x502439);});else{if(_0x5220aa[_0x22ec4f(0x1e8)]>0x1)_0x5220aa[_0x22ec4f(0x28e)]({'botID':_0x22ec4f(0x389)});let _0x58c17b=[],_0x1c8c41=[];const _0x362897=_0x5220aa[_0x22ec4f(0x1e8)]%0x4==0x0||_0x5220aa[_0x22ec4f(0x1e8)]%0x4==0x3||_0x5220aa[_0x22ec4f(0x1e8)]%0x3==0x1?0x4:0x3;let _0x48a1ad=0x0;_0x5220aa['forEach']((_0x3248cd,_0x4d53dc)=>{const _0x478cea=_0x22ec4f;if(_0x4d53dc%_0x362897==0x0)_0x1c8c41=[];_0x1c8c41[_0x478cea(0x28e)]({'text':_0x3248cd['botID']==_0x478cea(0x389)?_0x478cea(0x289):'Bot\x20'+_0x3248cd[_0x478cea(0x256)],'callback_data':_0x3248cd[_0x478cea(0x256)]}),_0x4d53dc%_0x362897==0x0&&(_0x58c17b[_0x48a1ad]=_0x1c8c41,_0x48a1ad++);}),tgBot[_0x22ec4f(0x1d6)](_0x2c00e5['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x58c17b}})[_0x22ec4f(0x243)](_0x2f1e2e=>{telegramError(_0x2f1e2e);}),tgBot['on']('callback_query',async _0x1459a8=>{const _0x3f4554=_0x22ec4f,_0x379430=_0x1459a8['data'],_0x66b32=_0x1459a8[_0x3f4554(0x340)];tgBot[_0x3f4554(0x3a3)](_0x1459a8['id'])[_0x3f4554(0x2c7)](async()=>{const _0x451a0b=_0x3f4554;_0x379430==_0x451a0b(0x389)?(tgBot[_0x451a0b(0x1d6)](_0x66b32[_0x451a0b(0x221)]['id'],_0x451a0b(0x277))[_0x451a0b(0x243)](_0x1e76df=>{telegramError(_0x1e76df);}),_0x5220aa['forEach'](_0x177b96=>{const _0x1ee9bb=_0x451a0b;if(_0x177b96['botID']!=_0x1ee9bb(0x389))toggleBot(_0x177b96['botID'],toggleStatus(_0x177b96[_0x1ee9bb(0x256)]),'stopped');})):(tgBot[_0x451a0b(0x1d6)](_0x66b32[_0x451a0b(0x221)]['id'],_0x451a0b(0x312)+_0x379430)['catch'](_0x477b64=>{telegramError(_0x477b64);}),toggleBot(_0x379430,toggleStatus(_0x379430),_0x451a0b(0x3a7)));}),tgBot['removeListener'](_0x3f4554(0x3a1));});}}),tgBot['onText'](/\/metrics/,_0xc52d18=>{const _0x4737c3=_0x4fc951;if(!validateTelegram(_0xc52d18))return;tgBot[_0x4737c3(0x2a5)](_0x4737c3(0x3a1));const _0x521182=getEnabledBots();if(_0x521182[_0x4737c3(0x1e8)]==0x0)tgBot[_0x4737c3(0x1d6)](_0xc52d18['chat']['id'],_0x4737c3(0x1e0))[_0x4737c3(0x243)](_0x14375f=>{telegramError(_0x14375f);});else{if(_0x521182[_0x4737c3(0x1e8)]>0x1){let _0x4d6818=[],_0x216ffd=[];const _0x317c33=_0x521182[_0x4737c3(0x1e8)]%0x4==0x0||_0x521182[_0x4737c3(0x1e8)]%0x4==0x3||_0x521182[_0x4737c3(0x1e8)]%0x3==0x1?0x4:0x3;let _0x232a5e=0x0;_0x521182[_0x4737c3(0x27a)]((_0x188867,_0x1bc420)=>{const _0x12ae8a=_0x4737c3;if(_0x1bc420%_0x317c33==0x0)_0x216ffd=[];_0x216ffd[_0x12ae8a(0x28e)]({'text':_0x12ae8a(0x2ba)+_0x188867[_0x12ae8a(0x256)],'callback_data':_0x188867[_0x12ae8a(0x256)]}),_0x1bc420%_0x317c33==0x0&&(_0x4d6818[_0x232a5e]=_0x216ffd,_0x232a5e++);}),tgBot['sendMessage'](_0xc52d18[_0x4737c3(0x221)]['id'],_0x4737c3(0x329),{'reply_markup':{'inline_keyboard':_0x4d6818}})[_0x4737c3(0x243)](_0x3e093c=>{telegramError(_0x3e093c);}),tgBot['on'](_0x4737c3(0x3a1),async _0x37826c=>{const _0xf3baf0=_0x4737c3,_0x3facb1=_0x37826c[_0xf3baf0(0x324)],_0x3486ac=_0x37826c[_0xf3baf0(0x340)];tgBot['answerCallbackQuery'](_0x37826c['id'])[_0xf3baf0(0x2c7)](async()=>{const _0x16300e=_0xf3baf0;if(pid[_0x3facb1])pid[_0x3facb1]['send']({'function':_0x16300e(0x3a4),'args':null});}),tgBot[_0xf3baf0(0x2a5)](_0xf3baf0(0x3a1));});}else{const _0x3ff910=_0x521182[0x0][_0x4737c3(0x256)];if(pid[_0x3ff910])pid[_0x3ff910][_0x4737c3(0x2dd)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x4fc951(0x311)](/\/portfolio/,_0x49d3a6=>{const _0x59effd=_0x4fc951;if(!validateTelegram(_0x49d3a6))return;tgBot[_0x59effd(0x2a5)]('callback_query');const _0x27d618=getEnabledBots();if(_0x27d618['length']==0x0)tgBot['sendMessage'](_0x49d3a6['chat']['id'],_0x59effd(0x1e0))[_0x59effd(0x243)](_0x409c9c=>{telegramError(_0x409c9c);});else{if(_0x27d618[_0x59effd(0x1e8)]>0x1){let _0x3abb8d=[],_0x33711d=[];const _0x57402a=_0x27d618[_0x59effd(0x1e8)]%0x4==0x0||_0x27d618['length']%0x4==0x3||_0x27d618[_0x59effd(0x1e8)]%0x3==0x1?0x4:0x3;let _0x4ba608=0x0;_0x27d618[_0x59effd(0x27a)]((_0x4f52e2,_0x47a682)=>{const _0x267990=_0x59effd;if(_0x47a682%_0x57402a==0x0)_0x33711d=[];_0x33711d[_0x267990(0x28e)]({'text':_0x267990(0x2ba)+_0x4f52e2[_0x267990(0x256)],'callback_data':_0x4f52e2['botID']}),_0x47a682%_0x57402a==0x0&&(_0x3abb8d[_0x4ba608]=_0x33711d,_0x4ba608++);}),tgBot[_0x59effd(0x1d6)](_0x49d3a6[_0x59effd(0x221)]['id'],_0x59effd(0x2e3),{'reply_markup':{'inline_keyboard':_0x3abb8d}})[_0x59effd(0x243)](_0x172769=>{telegramError(_0x172769);}),tgBot['on'](_0x59effd(0x3a1),async _0xe803b6=>{const _0x3c7abf=_0x59effd,_0x31a7ad=_0xe803b6['data'],_0x15f642=_0xe803b6[_0x3c7abf(0x340)];tgBot['answerCallbackQuery'](_0xe803b6['id'])[_0x3c7abf(0x2c7)](async()=>{const _0xd606e1=_0x3c7abf;if(pid[_0x31a7ad])pid[_0x31a7ad][_0xd606e1(0x2dd)]({'function':_0xd606e1(0x28c),'args':null});}),tgBot[_0x3c7abf(0x2a5)](_0x3c7abf(0x3a1));});}else{const _0x55f98a=_0x27d618[0x0][_0x59effd(0x256)];if(pid[_0x55f98a])pid[_0x55f98a]['send']({'function':_0x59effd(0x28c),'args':null});}}}),tgBot['onText'](/\/update/,async _0x30a42f=>{const _0x46d01b=_0x4fc951;if(!validateTelegram(_0x30a42f))return;tgBot[_0x46d01b(0x2a5)](_0x46d01b(0x3a1)),await getMessages();if(!updateAvailable)tgBot[_0x46d01b(0x1d6)](_0x30a42f[_0x46d01b(0x221)]['id'],_0x46d01b(0x24f))[_0x46d01b(0x243)](_0xe7da35=>{telegramError(_0xe7da35);});else!validInstallation?tgBot[_0x46d01b(0x1d6)](_0x30a42f[_0x46d01b(0x221)]['id'],_0x46d01b(0x2af))[_0x46d01b(0x243)](_0x3af63b=>{telegramError(_0x3af63b);}):(tgBot[_0x46d01b(0x1d6)](_0x30a42f[_0x46d01b(0x221)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x46d01b(0x366),'callback_data':_0x46d01b(0x24c)},{'text':'No','callback_data':'no'}]]}})[_0x46d01b(0x243)](_0x5a414c=>{telegramError(_0x5a414c);}),tgBot['on'](_0x46d01b(0x3a1),async _0x45e46d=>{const _0x3bc746=_0x46d01b,_0xea07ff=_0x45e46d['data'],_0x4c7890=_0x45e46d['message'];tgBot[_0x3bc746(0x3a3)](_0x45e46d['id'])[_0x3bc746(0x2c7)](async()=>{const _0x2837f3=_0x3bc746;_0xea07ff==_0x2837f3(0x24c)&&(await tgBot[_0x2837f3(0x1d6)](_0x4c7890['chat']['id'],_0x2837f3(0x377))['catch'](_0x3c9aae=>{telegramError(_0x3c9aae);}),updateBB('update')),_0xea07ff=='no'&&await tgBot[_0x2837f3(0x1d6)](_0x4c7890[_0x2837f3(0x221)]['id'],_0x2837f3(0x339))[_0x2837f3(0x243)](_0x2e491f=>{telegramError(_0x2e491f);});}),tgBot[_0x3bc746(0x2a5)]('callback_query');}));}),tgBot[_0x4fc951(0x311)](/\/reinstall/,async _0x6bbeb0=>{const _0x2a6ea7=_0x4fc951;if(!validateTelegram(_0x6bbeb0))return;tgBot[_0x2a6ea7(0x2a5)](_0x2a6ea7(0x3a1)),!validInstallation?tgBot[_0x2a6ea7(0x1d6)](_0x6bbeb0[_0x2a6ea7(0x221)]['id'],_0x2a6ea7(0x35b))[_0x2a6ea7(0x243)](_0x1d0029=>{telegramError(_0x1d0029);}):(tgBot[_0x2a6ea7(0x1d6)](_0x6bbeb0[_0x2a6ea7(0x221)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x2a6ea7(0x366),'callback_data':_0x2a6ea7(0x24c)},{'text':'No','callback_data':'no'}]]}})[_0x2a6ea7(0x243)](_0x1a2aa5=>{telegramError(_0x1a2aa5);}),tgBot['on']('callback_query',async _0x3a12d5=>{const _0x5e4e69=_0x2a6ea7,_0x1db8cd=_0x3a12d5['data'],_0x58135a=_0x3a12d5[_0x5e4e69(0x340)];tgBot[_0x5e4e69(0x3a3)](_0x3a12d5['id'])[_0x5e4e69(0x2c7)](async()=>{const _0x45f85=_0x5e4e69;_0x1db8cd==_0x45f85(0x24c)&&(await tgBot['sendMessage'](_0x58135a[_0x45f85(0x221)]['id'],'Starting\x20Balance\x20Bot\x20reinstallation')['catch'](_0x2688d2=>{telegramError(_0x2688d2);}),updateBB(_0x45f85(0x2c3))),_0x1db8cd=='no'&&await tgBot[_0x45f85(0x1d6)](_0x58135a[_0x45f85(0x221)]['id'],_0x45f85(0x362))['catch'](_0x7ce31d=>{telegramError(_0x7ce31d);});}),tgBot['removeListener'](_0x5e4e69(0x3a1));}));}),tgBot['onText'](/\/toggle/,_0x2b4a5e=>{const _0xfa294b=_0x4fc951;if(!validateTelegram(_0x2b4a5e))return;tgBot[_0xfa294b(0x2a5)]('callback_query');const _0x41eef3=getBotsWithMode();if(_0x41eef3[_0xfa294b(0x1e8)]==0x0)tgBot[_0xfa294b(0x1d6)](_0x2b4a5e[_0xfa294b(0x221)]['id'],_0xfa294b(0x1e0))[_0xfa294b(0x243)](_0x36dd79=>{telegramError(_0x36dd79);});else{let _0x31a219=[],_0x1583ad=[];const _0x333f3f=0x2;let _0x50acc6=0x0;_0x41eef3[_0xfa294b(0x27a)]((_0x48aca8,_0x174bd6)=>{const _0x386199=_0xfa294b;if(_0x174bd6%_0x333f3f==0x0)_0x1583ad=[];_0x1583ad[_0x386199(0x28e)]({'text':_0x386199(0x2ba)+_0x48aca8[_0x386199(0x256)]+'\x20('+_0x48aca8['mode']+')','callback_data':_0x48aca8[_0x386199(0x256)]}),_0x174bd6%_0x333f3f==0x0&&(_0x31a219[_0x50acc6]=_0x1583ad,_0x50acc6++);}),tgBot[_0xfa294b(0x1d6)](_0x2b4a5e[_0xfa294b(0x221)]['id'],_0xfa294b(0x1f0),{'reply_markup':{'inline_keyboard':_0x31a219}})[_0xfa294b(0x243)](_0x19c149=>{telegramError(_0x19c149);}),tgBot['on'](_0xfa294b(0x3a1),async _0x39cd2b=>{const _0x5eb86=_0xfa294b,_0x3ef19d=_0x39cd2b[_0x5eb86(0x324)],_0x1c51c7=_0x39cd2b['message'];tgBot[_0x5eb86(0x3a3)](_0x39cd2b['id'])[_0x5eb86(0x2c7)](async()=>{const _0x3a3723=_0x5eb86,_0x1fdb74=_0x41eef3[_0x3a3723(0x222)](_0x144f3b=>_0x144f3b[_0x3a3723(0x256)]==_0x3ef19d),_0x40a7b6=_0x1fdb74[_0x3a3723(0x262)]==_0x3a3723(0x244)?'manual':_0x3a3723(0x244);tgBot[_0x3a3723(0x1d6)](_0x1c51c7[_0x3a3723(0x221)]['id'],_0x3a3723(0x2c5)+_0x3ef19d+_0x3a3723(0x396)+_0x40a7b6+'\x20mode')[_0x3a3723(0x243)](_0x164f56=>{telegramError(_0x164f56);}),toggleBotMode(_0x3ef19d);}),tgBot['removeListener'](_0x5eb86(0x3a1));});}}),tgBot[_0x4fc951(0x311)](/\/names/,_0x136b2e=>{const _0x359ad7=_0x4fc951;if(!validateTelegram(_0x136b2e))return;let _0x438b7b='';config[_0x359ad7(0x27a)](_0x30c0fd=>{const _0x4ce200=_0x359ad7;_0x438b7b+='Bot\x20'+_0x30c0fd['botID']+':\x20'+_0x30c0fd[_0x4ce200(0x331)]+'\x0a';}),tgBot[_0x359ad7(0x1d6)](_0x136b2e['chat']['id'],_0x438b7b,{'parse_mode':_0x359ad7(0x31b)})[_0x359ad7(0x243)](_0x535acb=>{telegramError(_0x535acb);});}),tgBot[_0x4fc951(0x311)](/\/disable/,_0x404b32=>{const _0x9c56e4=_0x4fc951;if(!validateTelegram(_0x404b32))return;tgBot['sendMessage'](_0x404b32[_0x9c56e4(0x221)]['id'],_0x9c56e4(0x1b6))[_0x9c56e4(0x243)](_0x3a890e=>{telegramError(_0x3a890e);}),updateSetting(_0x9c56e4(0x393),![]);}),tgBot[_0x4fc951(0x311)](/\/help/,_0x588129=>{const _0x248dad=_0x4fc951;if(!validateTelegram(_0x588129))return;tgBot['sendMessage'](_0x588129['chat']['id'],_0x2c97f1)[_0x248dad(0x243)](_0x1533ee=>{telegramError(_0x1533ee);});}),tgBot['on'](_0x4fc951(0x293),_0x1c9879=>{const _0x125735=_0x4fc951;_0x1c9879[_0x125735(0x24a)]()[_0x125735(0x217)](_0x125735(0x28d))&&(logger['full'](_0x125735(0x220)),tgBot[_0x125735(0x2a8)](),tgBot=null,io['to'](_0x125735(0x2d6))[_0x125735(0x290)](_0x125735(0x320),_0x125735(0x220)));}),process[_0x4fc951(0x2d9)]('SIGINT',()=>{const _0x8a93a9=_0x4fc951;if(tgBot)tgBot[_0x8a93a9(0x2a8)]();process[_0x8a93a9(0x20d)](0x1);}),process[_0x4fc951(0x2d9)](_0x4fc951(0x39e),()=>{const _0xbd4bb7=_0x4fc951;if(tgBot)tgBot[_0xbd4bb7(0x2a8)]();process['exit'](0x1);});}}function disableTelegram(){const _0x2a08d6=_0x5dceab;tgBot&&(tgBot[_0x2a08d6(0x2a8)](),tgBot=null);}function sendTelegram(_0x3970ca,_0x337c4a){const _0x13315f=_0x5dceab;if(settings[_0x13315f(0x393)]){if(settings[_0x13315f(0x32e)]=='all'||(_0x337c4a[_0x13315f(0x200)]==_0x13315f(0x2eb)||_0x337c4a[_0x13315f(0x200)]==_0x13315f(0x2f9)||_0x337c4a[_0x13315f(0x200)]==_0x13315f(0x26b))&&settings['telegramEvents']==_0x13315f(0x2cc)||_0x337c4a[_0x13315f(0x200)]==_0x13315f(0x270)&&settings['telegramEvents']==_0x13315f(0x2c0)){if(tgBot&&settings[_0x13315f(0x260)]){if(_0x337c4a[_0x13315f(0x2a9)])tgBot['sendMessage'](settings[_0x13315f(0x260)],_0x337c4a[_0x13315f(0x331)]+_0x13315f(0x39d)+_0x337c4a['event'])[_0x13315f(0x243)](_0x2907dd=>{telegramError(_0x2907dd);});else tgBot[_0x13315f(0x1d6)](settings[_0x13315f(0x260)],_0x13315f(0x2ba)+_0x3970ca+_0x13315f(0x39d)+_0x337c4a[_0x13315f(0x1bc)])['catch'](_0x4674a4=>{telegramError(_0x4674a4);});}}}}async function sendTelegramMsg(_0x1efe16,_0x4e7670=_0x5dceab(0x31b)){const _0x1eee35=_0x5dceab;return settings[_0x1eee35(0x393)]&&tgBot&&settings['telegramChatId']?(await tgBot[_0x1eee35(0x1d6)](settings['telegramChatId'],_0x1efe16,{'parse_mode':_0x4e7670})['catch'](_0x10742e=>{telegramError(_0x10742e);}),!![]):![];}function getDeviceWithIp(_0x4424b8){return devices['find'](_0x4f989e=>_0x4f989e['ip']===_0x4424b8);}function temporaryAccess2FA(_0x256e8e,_0x571225){const _0x5ad281=_0x5dceab;let _0x57a797=new Date(),_0x24649b=![];if(lastIpApproval){if(_0x57a797-lastIpApproval<0x1388)_0x24649b=!![];}lastIpApproval=new Date();if(_0x24649b)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x5ad281(0x2a5)](_0x5ad281(0x3a1)),tgBot[_0x5ad281(0x1d6)](settings[_0x5ad281(0x260)],_0x5ad281(0x2f8)+normalizeIP(_0x571225)[_0x5ad281(0x1e4)]+'</b>\x20?',{'parse_mode':_0x5ad281(0x31b),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x5ad281(0x369),'callback_data':'15'},{'text':_0x5ad281(0x26a),'callback_data':'30'},{'text':_0x5ad281(0x368),'callback_data':_0x5ad281(0x368)}]]}})[_0x5ad281(0x243)](_0x9619ae=>{telegramError(_0x9619ae);}),tgBot['on']('callback_query',async _0x1c1ec4=>{const _0x491cb8=_0x5ad281,_0x3d58c7=_0x1c1ec4[_0x491cb8(0x324)],_0x193478=_0x1c1ec4[_0x491cb8(0x340)];tgBot[_0x491cb8(0x3a3)](_0x1c1ec4['id'])[_0x491cb8(0x2c7)](async()=>{const _0x2b2481=_0x491cb8;devices[_0x256e8e][_0x2b2481(0x38c)]={'clientip':_0x571225,'timestamp':new Date()[_0x2b2481(0x309)](),'expiry':_0x3d58c7},_0x3d58c7!=_0x2b2481(0x368)?(await tgBot['sendMessage'](_0x193478[_0x2b2481(0x221)]['id'],_0x2b2481(0x274)+_0x3d58c7+_0x2b2481(0x1d2),{'parse_mode':_0x2b2481(0x31b)})[_0x2b2481(0x243)](_0x34d47e=>{telegramError(_0x34d47e);}),io['to'](_0x256e8e)[_0x2b2481(0x290)](_0x2b2481(0x2ad),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x2b2481(0x1d6)](_0x193478[_0x2b2481(0x221)]['id'],'Temporary\x20access\x20rejected')[_0x2b2481(0x243)](_0xac18ef=>{telegramError(_0xac18ef);}),io['to'](_0x256e8e)[_0x2b2481(0x290)](_0x2b2481(0x2ad),{'access':{'allow':![],'reason':_0x2b2481(0x1fd),'token':null}}));}),tgBot[_0x491cb8(0x2a5)](_0x491cb8(0x3a1));}));}function loginAccess2FA(_0x1d37ad,_0x5dff9b){const _0x2bf630=_0x5dceab;tgBot&&settings[_0x2bf630(0x260)]&&(tgBot[_0x2bf630(0x2a5)](_0x2bf630(0x3a1)),tgBot[_0x2bf630(0x1d6)](settings[_0x2bf630(0x260)],_0x2bf630(0x209)+normalizeIP(_0x5dff9b)[_0x2bf630(0x1e4)]+'</b>\x20?',{'parse_mode':_0x2bf630(0x31b),'reply_markup':{'inline_keyboard':[[{'text':_0x2bf630(0x36b),'callback_data':loginExpiry},{'text':_0x2bf630(0x368),'callback_data':'reject'}]]}})[_0x2bf630(0x243)](_0x13264d=>{telegramError(_0x13264d);}),tgBot['on'](_0x2bf630(0x3a1),async _0x4ca4f8=>{const _0x2550cc=_0x2bf630,_0x18c4c7=_0x4ca4f8['data'],_0xa990ad=_0x4ca4f8['message'];tgBot['answerCallbackQuery'](_0x4ca4f8['id'])['then'](async()=>{const _0x22029d=_0x1ee0;devices[_0x1d37ad][_0x22029d(0x335)]={'clientip':_0x5dff9b,'timestamp':new Date()[_0x22029d(0x309)](),'expiry':_0x18c4c7},_0x18c4c7!='reject'?(await tgBot[_0x22029d(0x1d6)](_0xa990ad[_0x22029d(0x221)]['id'],_0x22029d(0x2ab),{'parse_mode':'HTML'})[_0x22029d(0x243)](_0x4d04af=>{telegramError(_0x4d04af);}),io['to'](_0x1d37ad)[_0x22029d(0x290)]('status',{'access':{'allow':![],'reason':_0x22029d(0x314),'token':null}})):(await tgBot['sendMessage'](_0xa990ad[_0x22029d(0x221)]['id'],_0x22029d(0x399))[_0x22029d(0x243)](_0x2cf235=>{telegramError(_0x2cf235);}),io['to'](_0x1d37ad)[_0x22029d(0x290)](_0x22029d(0x2ad),{'access':{'allow':![],'reason':_0x22029d(0x30a),'token':null}}));}),tgBot[_0x2550cc(0x2a5)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xe37f04=_0x5dceab;return dbConfig[_0xe37f04(0x382)]('bots')[_0xe37f04(0x363)](_0xe37f04(0x256))[_0xe37f04(0x1c2)]({'status':_0xe37f04(0x1ca)})[_0xe37f04(0x392)]()||[];}function getDisabledBots(){const _0x3ffc0a=_0x5dceab;return dbConfig[_0x3ffc0a(0x382)](_0x3ffc0a(0x352))[_0x3ffc0a(0x363)](_0x3ffc0a(0x256))['filter']({'status':_0x3ffc0a(0x2e6)})[_0x3ffc0a(0x392)]()||[];}function getBotAttributes(_0x56dfd7){const _0x1b4742=_0x5dceab;let _0x4f7bd1={};const _0x33cbdc=configpath+_0x1b4742(0x2a2)+_0x56dfd7+_0x1b4742(0x1db),_0x50bb30=fs[_0x1b4742(0x1c8)](_0x33cbdc);if(_0x50bb30){const _0x554864=fs[_0x1b4742(0x287)](_0x33cbdc);try{const _0x5063de=JSON[_0x1b4742(0x2e4)](_0x554864),_0xe2dc4=_0x5063de?_0x5063de[_0x1b4742(0x1f6)][0x0][_0x1b4742(0x39b)]:![];_0x4f7bd1[_0x1b4742(0x262)]=_0xe2dc4?_0x1b4742(0x244):_0x1b4742(0x36c),_0x4f7bd1['botname']=_0x5063de?_0x5063de[_0x1b4742(0x1f6)][0x0][_0x1b4742(0x331)]:_0x1b4742(0x2ba)+_0x56dfd7;}catch(_0x4cddec){_0x4f7bd1['mode']='manual',_0x4f7bd1[_0x1b4742(0x331)]=_0x1b4742(0x2ba)+_0x56dfd7;}}else _0x4f7bd1[_0x1b4742(0x262)]=_0x1b4742(0x36c),_0x4f7bd1['botname']=_0x1b4742(0x2ba)+_0x56dfd7;return _0x4f7bd1;}function getBotsWithMode(){const _0x38514c=_0x5dceab,_0x3f80c=dbConfig[_0x38514c(0x382)]('bots')[_0x38514c(0x363)](_0x38514c(0x256))['value']()||[];return _0x3f80c[_0x38514c(0x27a)](_0x387526=>{const _0xe2ee33=_0x38514c;let _0x5378c7=getBotAttributes(_0x387526[_0xe2ee33(0x256)]);_0x387526[_0xe2ee33(0x262)]=_0x5378c7['mode'];}),_0x3f80c;}function getBotExchanges(){const _0x2f2fe0=_0x5dceab;let _0x5f2f3b=[];const _0x24a5e2=dbConfig[_0x2f2fe0(0x382)](_0x2f2fe0(0x352))['sortBy']('botID')[_0x2f2fe0(0x392)]()||[];_0x24a5e2[_0x2f2fe0(0x27a)](_0x5796f2=>{const _0x10d193=_0x2f2fe0;if(_0x5796f2[_0x10d193(0x2ad)]==_0x10d193(0x1ca)){const _0x15fb08=configpath+_0x10d193(0x2a2)+_0x5796f2[_0x10d193(0x256)]+_0x10d193(0x1db),_0x424b1b=fs['existsSync'](_0x15fb08);let _0x42ed11;if(_0x424b1b){const _0xf01e65=fs[_0x10d193(0x287)](_0x15fb08);try{const _0x386208=JSON[_0x10d193(0x2e4)](_0xf01e65);_0x42ed11=_0x386208?_0x386208[_0x10d193(0x1f6)][0x0][_0x10d193(0x292)]:null;}catch(_0x2ad985){}}if(_0x42ed11)_0x5f2f3b[_0x10d193(0x28e)](_0x42ed11);}});const _0x1c229f=[...new Set(_0x5f2f3b)][_0x2f2fe0(0x356)]();return _0x1c229f;}async function initUser(){const _0x4fefd6=_0x5dceab;if(!settings[_0x4fefd6(0x37f)]){const _0x1aa561=uuidRandom();mixpanel[_0x4fefd6(0x316)](_0x1aa561),updateSetting(_0x4fefd6(0x37f),_0x1aa561);}}async function initSecure(){const _0x176cda=_0x5dceab;let _0x5a6dca=getSecure();if(!_0x5a6dca[_0x176cda(0x22d)](_0x176cda(0x228))){let _0x148bf2=await generateKeys();_0x5a6dca[_0x176cda(0x1df)]=_0x148bf2[_0x176cda(0x1df)],_0x5a6dca[_0x176cda(0x32a)]=_0x148bf2[_0x176cda(0x32a)],_0x5a6dca[_0x176cda(0x228)]=crypto[_0x176cda(0x31d)](0x20)[_0x176cda(0x24a)]('hex');;storeSecure(_0x5a6dca);}}function getSettings(){const _0x228a1e=_0x5dceab;return dbSettings[_0x228a1e(0x382)]('settings')[_0x228a1e(0x392)]()||{};}function getSecure(){const _0x590f7a=_0x5dceab;return dbSecure[_0x590f7a(0x382)](_0x590f7a(0x216))[_0x590f7a(0x392)]()||{};}function getBlacklist(){const _0x4781d8=_0x5dceab;return dbSecure[_0x4781d8(0x382)](_0x4781d8(0x37d))[_0x4781d8(0x392)]()||[];}function broadcastToBots(_0x1be77c,_0x2918ed){config['forEach'](_0x5e47f8=>{const _0x16a71f=_0x1ee0;if(_0x5e47f8[_0x16a71f(0x2ad)]==_0x16a71f(0x1ca)&&_0x5e47f8['live']==_0x16a71f(0x2cd)||_0x5e47f8[_0x16a71f(0x2ad)]==_0x16a71f(0x202)&&_0x5e47f8[_0x16a71f(0x295)]==_0x16a71f(0x2cd)){if(pid[_0x5e47f8[_0x16a71f(0x256)]])pid[_0x5e47f8[_0x16a71f(0x256)]][_0x16a71f(0x2dd)]({[_0x1be77c]:_0x2918ed});}});}function storeSettings(_0x48452a,_0x7814a5=![]){const _0x42d383=_0x5dceab;_0x48452a={...settings,..._0x48452a};if(_0x7814a5&&_0x48452a[_0x42d383(0x1b8)]!=_0x42d383(0x357)&&_0x48452a['bbPassword']!='***'&&_0x48452a['bbPassword']!=''){const _0x55c91c=crypt[_0x42d383(0x253)](secure['privateKey'],_0x48452a['bbPassword'])['message'][_0x42d383(0x2cf)]('@')[0x0],_0x18e9f0=bcrypt['hashSync'](_0x55c91c,saltRounds);_0x48452a={..._0x48452a,'bbPassword':_0x18e9f0};}if(_0x7814a5&&_0x48452a[_0x42d383(0x36a)]!=_0x42d383(0x357)&&_0x48452a['telegramToken']!=_0x42d383(0x1e2)&&_0x48452a['telegramToken']!=''){const _0x3ed393=crypt[_0x42d383(0x253)](secure[_0x42d383(0x32a)],_0x48452a[_0x42d383(0x36a)])[_0x42d383(0x340)][_0x42d383(0x2cf)]('@')[0x0];_0x48452a={..._0x48452a,'telegramToken':_0x3ed393};}const _0x62427a=_0x48452a[_0x42d383(0x36a)]!=_0x42d383(0x357)&&_0x48452a[_0x42d383(0x36a)]!=settings[_0x42d383(0x36a)]||_0x48452a['telegramUsername']!=settings['telegramUsername'],_0x281239=_0x48452a[_0x42d383(0x36a)]==''||_0x48452a[_0x42d383(0x261)]=='';if(_0x62427a)_0x48452a[_0x42d383(0x32e)]=_0x42d383(0x389);for(const [_0x10f617,_0x2cedca]of Object[_0x42d383(0x2df)](_0x48452a)){if(_0x10f617=='telegramToken'&&_0x2cedca=='************'){_0x48452a[_0x42d383(0x36a)]=settings['telegramToken'];continue;};if(_0x10f617=='bbPassword'&&_0x2cedca==_0x42d383(0x357)){_0x48452a['bbPassword']=settings[_0x42d383(0x1b8)];continue;};dbSettings[_0x42d383(0x265)]('settings.'+_0x10f617,_0x2cedca)['write']();}settings=_0x48452a,io['to']('botmanager')[_0x42d383(0x290)](_0x42d383(0x2ec),cleanSettings()),broadcastToBots(_0x42d383(0x342),settings['timeshift']),broadcastToBots(_0x42d383(0x279),settings['onepagemode']);if(_0x62427a&&!_0x281239)initTelegram();if(_0x62427a&&_0x281239)disableTelegram();getAllClients()[_0x42d383(0x27a)](_0x2cccff=>{const _0x328086=_0x42d383;getSocket(_0x2cccff['id'])[_0x328086(0x290)]('status',{'access':{'allow':![],'reason':_0x328086(0x314),'token':null}});});}function updateSetting(_0x196304,_0x461494){const _0x377938=_0x5dceab;dbSettings[_0x377938(0x265)](_0x377938(0x233)+_0x196304,_0x461494)[_0x377938(0x27c)](),settings=getSettings(),io['to'](_0x377938(0x2d6))[_0x377938(0x290)](_0x377938(0x2ec),cleanSettings());}function storeSecure(_0x72e958){const _0x15a702=_0x5dceab;dbSecure[_0x15a702(0x382)](_0x15a702(0x216))[_0x15a702(0x28e)](_0x72e958)['write'](),secure=_0x72e958;}function addBlacklist(_0x56e71a){const _0x46a2df=_0x5dceab;cleanBlacklist();let _0x4c5484;devices[_0x56e71a]['telegramIpApproval']?_0x4c5484=Math['max'](devices[_0x56e71a]['telegramIpApproval'][_0x46a2df(0x3a9)],loginExpiry):_0x4c5484=loginExpiry,dbSecure[_0x46a2df(0x382)](_0x46a2df(0x37d))['push']({'expiry':new Date()[_0x46a2df(0x309)]()+_0x4c5484*0x3c*0x3e8,'token':devices[_0x56e71a][_0x46a2df(0x394)][_0x46a2df(0x2db)]})[_0x46a2df(0x27c)](),blacklist=dbSecure[_0x46a2df(0x382)](_0x46a2df(0x37d))[_0x46a2df(0x392)]();}function cleanBlacklist(){const _0x24f862=_0x5dceab;let _0x55c78a=dbSecure[_0x24f862(0x382)](_0x24f862(0x37d))[_0x24f862(0x31e)]()[_0x24f862(0x392)](),_0x305500=new Date()[_0x24f862(0x309)]();_0x55c78a['forEach'](_0xbc4a42=>{const _0x293af5=_0x24f862;_0xbc4a42[_0x293af5(0x3a9)]<_0x305500&&dbSecure[_0x293af5(0x382)](_0x293af5(0x37d))[_0x293af5(0x2ff)]({'expiry':_0xbc4a42[_0x293af5(0x3a9)]})[_0x293af5(0x27c)]();});}function initStates(){const _0x5146ea=_0x5dceab;let _0x595cfe=getConfiguration();_0x595cfe[_0x5146ea(0x27a)](_0x318fcb=>{const _0x357033=_0x5146ea;_0x318fcb[_0x357033(0x295)]='stopped';}),storeConfiguration(_0x595cfe);}function onKeys(){const _0x161616=new RSA();return new Promise(_0xcd08bb=>{const _0x281a18=_0x1ee0;_0x161616[_0x281a18(0x267)]()[_0x281a18(0x2c7)](_0x3a09c5=>{_0xcd08bb(_0x3a09c5);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3cc50c=_0x5dceab;let _0x25b4c6=getSettings(),_0x2bd4c3=![];!_0x25b4c6['hasOwnProperty'](_0x3cc50c(0x34f))&&(_0x25b4c6['lastmsgtelegram']=0x0,_0x2bd4c3=!![]);!_0x25b4c6[_0x3cc50c(0x22d)](_0x3cc50c(0x1ba))&&(_0x25b4c6['lastmsgemitted']=0x0,_0x2bd4c3=!![]);!_0x25b4c6[_0x3cc50c(0x22d)](_0x3cc50c(0x26f))&&(_0x25b4c6['latestversion']=_0x3cc50c(0x25d),_0x2bd4c3=!![]);!_0x25b4c6['hasOwnProperty'](_0x3cc50c(0x279))&&(_0x25b4c6[_0x3cc50c(0x279)]=![],_0x2bd4c3=!![]);if(_0x2bd4c3)storeSettings(_0x25b4c6);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x3cc50c(0x27a)](_0x30578e=>{const _0x39ee50=_0x3cc50c;if(!_0x30578e[_0x39ee50(0x308)]()){if(!_0x30578e[_0x39ee50(0x23c)][_0x39ee50(0x30b)](_0x39ee50(0x33a)))fs['unlinkSync'](configbackuppath+_0x30578e[_0x39ee50(0x23c)]);}else fs[_0x39ee50(0x2c1)](configbackuppath+_0x30578e[_0x39ee50(0x23c)],{'recursive':!![]});});}catch(_0x37ee27){logger[_0x3cc50c(0x227)](_0x3cc50c(0x1eb),_0x37ee27);}}function storeConfiguration(_0x5460db){const _0x1f561d=_0x5dceab;dbConfig[_0x1f561d(0x382)](_0x1f561d(0x352))[_0x1f561d(0x2ff)]()['write'](),_0x5460db['forEach'](_0x259373=>{const _0x241842=_0x1f561d;delete _0x259373[_0x241842(0x262)];}),dbConfig['get'](_0x1f561d(0x352))[_0x1f561d(0x28e)](..._0x5460db)[_0x1f561d(0x27c)](),config=_0x5460db;}function resetPassword(){const _0x5ea699=_0x5dceab;tgBot&&settings[_0x5ea699(0x260)]&&(tgBot[_0x5ea699(0x2a5)](_0x5ea699(0x3a1)),tgBot[_0x5ea699(0x1d6)](settings[_0x5ea699(0x260)],_0x5ea699(0x240),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5ea699(0x24c),'callback_data':_0x5ea699(0x24c)},{'text':'no','callback_data':'no'}]]}})[_0x5ea699(0x243)](_0x5726c8=>{telegramError(_0x5726c8);}),tgBot['on']('callback_query',async _0x40ce65=>{const _0x3f1e2=_0x5ea699,_0x132827=_0x40ce65[_0x3f1e2(0x324)],_0x1fb8fb=_0x40ce65['message'];tgBot['answerCallbackQuery'](_0x40ce65['id'])[_0x3f1e2(0x2c7)](async()=>{const _0x5d40a4=_0x3f1e2;if(_0x132827!='no'){const _0x127da0=0xf,_0x3f0320=_0x5d40a4(0x39c),_0x51521b=Array[_0x5d40a4(0x383)](crypto[_0x5d40a4(0x2fa)](new Uint32Array(_0x127da0)))['map'](_0x5c3077=>_0x3f0320[_0x5c3077%_0x3f0320['length']])[_0x5d40a4(0x250)](''),_0x35c1b6=bcrypt[_0x5d40a4(0x1c6)](_0x51521b,saltRounds);storeSettings({'bbPassword':_0x35c1b6}),await tgBot[_0x5d40a4(0x1d6)](_0x1fb8fb[_0x5d40a4(0x221)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x51521b,{'parse_mode':_0x5d40a4(0x31b)})[_0x5d40a4(0x243)](_0xa6f4f5=>{telegramError(_0xa6f4f5);});}else await tgBot[_0x5d40a4(0x1d6)](_0x1fb8fb[_0x5d40a4(0x221)]['id'],_0x5d40a4(0x294))[_0x5d40a4(0x243)](_0x4b753d=>{telegramError(_0x4b753d);});}),tgBot[_0x3f1e2(0x2a5)](_0x3f1e2(0x3a1));}));}async function confirmRestore(_0x132cc3,_0x2b3a18){const _0x2d535a=_0x5dceab;io['to']('botmanager')[_0x2d535a(0x290)]('notification',_0x2d535a(0x252),_0x2d535a(0x26b)),tgBot&&settings[_0x2d535a(0x260)]&&(tgBot[_0x2d535a(0x2a5)]('callback_query'),await tgBot[_0x2d535a(0x1d6)](settings[_0x2d535a(0x260)],_0x2d535a(0x22a),{'parse_mode':_0x2d535a(0x31b),'reply_markup':{'inline_keyboard':[[{'text':_0x2d535a(0x24c),'callback_data':_0x2d535a(0x24c)},{'text':'no','callback_data':'no'}]]}})[_0x2d535a(0x243)](_0x1a3b10=>{telegramError(_0x1a3b10);}),tgBot['on']('callback_query',async _0x4385ee=>{const _0x566405=_0x2d535a,_0x289abc=_0x4385ee['data'],_0x2c3d43=_0x4385ee[_0x566405(0x340)];tgBot[_0x566405(0x3a3)](_0x4385ee['id'])[_0x566405(0x2c7)](async()=>{const _0x3fffd8=_0x566405;_0x289abc==_0x3fffd8(0x24c)?(await tgBot[_0x3fffd8(0x1d6)](_0x2c3d43['chat']['id'],_0x3fffd8(0x1e7),{'parse_mode':_0x3fffd8(0x31b)})[_0x3fffd8(0x243)](_0x5eaab5=>{telegramError(_0x5eaab5);}),unzipFile(_0x132cc3,_0x2b3a18)):(logger[_0x3fffd8(0x227)](_0x3fffd8(0x38a)),await tgBot[_0x3fffd8(0x1d6)](_0x2c3d43[_0x3fffd8(0x221)]['id'],'Restore\x20process\x20aborted')['catch'](_0x32b447=>{telegramError(_0x32b447);}));}),tgBot['removeListener']('callback_query');}));}function getServerTime(){const _0x4d898f=_0x5dceab,_0x280db4=new Date();return _0x280db4[_0x4d898f(0x301)]()+'/'+(_0x280db4[_0x4d898f(0x3a0)]()+0x1)['toString']()[_0x4d898f(0x1f7)](0x2,'0')+'/'+_0x280db4[_0x4d898f(0x1ee)]()['toString']()[_0x4d898f(0x1f7)](0x2,'0')+'\x20'+_0x280db4[_0x4d898f(0x1d0)]()[_0x4d898f(0x24a)]()[_0x4d898f(0x1f7)](0x2,'0')+':'+_0x280db4[_0x4d898f(0x35d)]()[_0x4d898f(0x24a)]()[_0x4d898f(0x1f7)](0x2,'0')+':'+_0x280db4[_0x4d898f(0x1dc)]()['toString']()[_0x4d898f(0x1f7)](0x2,'0');}function getTimeStamp(){const _0x33cb05=_0x5dceab,_0x57d3c4=shiftedTime();return _0x57d3c4[_0x33cb05(0x301)]()+'/'+(_0x57d3c4[_0x33cb05(0x3a0)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x57d3c4[_0x33cb05(0x1ee)]()[_0x33cb05(0x24a)]()['padStart'](0x2,'0')+'\x20'+_0x57d3c4[_0x33cb05(0x1d0)]()[_0x33cb05(0x24a)]()[_0x33cb05(0x1f7)](0x2,'0')+':'+_0x57d3c4['getMinutes']()[_0x33cb05(0x24a)]()['padStart'](0x2,'0')+':'+_0x57d3c4[_0x33cb05(0x1dc)]()[_0x33cb05(0x24a)]()[_0x33cb05(0x1f7)](0x2,'0');}function getCleanTimeStamp(){const _0x40bf99=_0x5dceab,_0x4862e3=shiftedTime();return _0x4862e3[_0x40bf99(0x301)]()+(_0x4862e3['getMonth']()+0x1)[_0x40bf99(0x24a)]()['padStart'](0x2,'0')+_0x4862e3[_0x40bf99(0x1ee)]()[_0x40bf99(0x24a)]()['padStart'](0x2,'0')+'-'+_0x4862e3['getHours']()[_0x40bf99(0x24a)]()['padStart'](0x2,'0')+_0x4862e3[_0x40bf99(0x35d)]()['toString']()[_0x40bf99(0x1f7)](0x2,'0')+_0x4862e3['getSeconds']()['toString']()[_0x40bf99(0x1f7)](0x2,'0');}function shiftedTime(){const _0x392faa=_0x5dceab,_0x35a564=new Date();let _0xce6926=_0x35a564;if(settings[_0x392faa(0x342)]&&settings[_0x392faa(0x342)]!==0x0)_0xce6926=fns[_0x392faa(0x1e9)](_0x35a564,{'hours':settings[_0x392faa(0x342)]});return _0xce6926;}function startScheduler(){const _0x109618=_0x5dceab,_0x5b0aa7=new Date()[_0x109618(0x2b1)](),_0x116952=shiftedTime()[_0x109618(0x1d0)]();_0x116952==0x4&&backupConfigFiles();_0x116952==0x0&&rotateLogFiles();_0x5b0aa7%0x6==0x0&&triggerAnalytics();_0x5b0aa7%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x515922){const _0x2113ae=_0x5dceab;logger[_0x2113ae(0x227)](_0x2113ae(0x2e9)+_0x515922);const _0x443adc=getBotsWithMode();_0x443adc['length']>0x0?confirmRestore(configbackuppath,_0x515922):unzipFile(configbackuppath,_0x515922);}async function getBackupFiles(_0x47b1c0=null){const _0x354f18=_0x5dceab;let _0x302164=[],_0x1fad5c=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x1fad5c['sort']((_0x4959a5,_0x5ac0c5)=>_0x4959a5[_0x354f18(0x23c)]<_0x5ac0c5[_0x354f18(0x23c)]?0x1:_0x5ac0c5['name']<_0x4959a5[_0x354f18(0x23c)]?-0x1:0x0),_0x1fad5c['forEach'](_0x6fb77f=>{const _0x419812=_0x354f18;if(!_0x6fb77f[_0x419812(0x308)]()&&_0x6fb77f[_0x419812(0x23c)][_0x419812(0x30b)](_0x419812(0x33a))&&_0x6fb77f[_0x419812(0x23c)][_0x419812(0x2f4)](_0x419812(0x207))){const _0x309542=formatDate(fs[_0x419812(0x2b5)](configbackuppath+_0x6fb77f['name'])[_0x419812(0x2da)]);_0x302164[_0x419812(0x28e)]({'name':_0x6fb77f[_0x419812(0x23c)],'mtime':_0x309542});}});if(_0x47b1c0)io['to'](_0x47b1c0)['emit'](_0x354f18(0x305),_0x302164);else return _0x302164;}async function backupConfigFiles(){const _0x52c244=_0x5dceab;await zipFiles(_0x52c244(0x381));const _0x40d35e=getCleanTimeStamp();fs[_0x52c244(0x2e7)](zippath+_0x52c244(0x23f),configbackuppath+(_0x52c244(0x33a)+_0x40d35e+_0x52c244(0x207)));let _0x290140=fs[_0x52c244(0x237)](configbackuppath,{'withFileTypes':!![]});_0x290140[_0x52c244(0x356)]((_0x19d1e6,_0x19effc)=>_0x19d1e6[_0x52c244(0x23c)]<_0x19effc[_0x52c244(0x23c)]?0x1:_0x19effc[_0x52c244(0x23c)]<_0x19d1e6[_0x52c244(0x23c)]?-0x1:0x0),_0x290140[_0x52c244(0x1e8)]>maxBackups&&fs[_0x52c244(0x229)](configbackuppath+_0x290140[_0x290140[_0x52c244(0x1e8)]-0x1][_0x52c244(0x23c)]);}function rotateLogFiles(){const _0x572a32=_0x5dceab,_0x2bdf4b=fs[_0x572a32(0x2b5)](logspath+_0x572a32(0x375)),_0x3b21e2=_0x2bdf4b[_0x572a32(0x34b)]/0x400;if(_0x3b21e2>0x64){let _0x4da3a8=fs[_0x572a32(0x237)](logspath,{'withFileTypes':!![]});_0x4da3a8[_0x572a32(0x356)]((_0x2a5eb7,_0x337529)=>_0x2a5eb7['name']<_0x337529[_0x572a32(0x23c)]?0x1:_0x337529['name']<_0x2a5eb7[_0x572a32(0x23c)]?-0x1:0x0),_0x4da3a8[_0x572a32(0x27a)](_0x52d0cf=>{const _0x4c8792=_0x572a32;if(_0x52d0cf[_0x4c8792(0x23c)]=='output-002.log')fs[_0x4c8792(0x2e7)](logspath+_0x52d0cf[_0x4c8792(0x23c)],logspath+_0x4c8792(0x299));if(_0x52d0cf[_0x4c8792(0x23c)]==_0x4c8792(0x224))fs[_0x4c8792(0x2e7)](logspath+_0x52d0cf[_0x4c8792(0x23c)],logspath+_0x4c8792(0x29b));_0x52d0cf[_0x4c8792(0x23c)]==_0x4c8792(0x375)&&(fs['copyFileSync'](logspath+_0x52d0cf[_0x4c8792(0x23c)],logspath+_0x4c8792(0x224)),fs['writeFileSync'](logspath+_0x52d0cf['name'],''));});}}async function zipFiles(_0x2f3d23){const _0x147f68=_0x5dceab;let _0x363a6e;if(_0x2f3d23=='logs')_0x363a6e=logspath;if(_0x2f3d23==_0x147f68(0x268))_0x363a6e=configpath;if(_0x2f3d23==_0x147f68(0x381))_0x363a6e=configpath;let _0x1955cd=fs[_0x147f68(0x237)](_0x363a6e,{'withFileTypes':!![]});const _0x5dd398=new require(_0x147f68(0x264))();_0x1955cd[_0x147f68(0x27a)](_0x5c2bb7=>{const _0x4af864=_0x147f68;if(!_0x5c2bb7['isDirectory']()){let _0x29890b=fs[_0x4af864(0x287)](_0x363a6e+_0x5c2bb7['name']);if(_0x2f3d23==_0x4af864(0x268)){const _0x15bc2e=/^bot-[0-9]{3}-config.json$/,_0x347d6d=_0x15bc2e[_0x4af864(0x1d3)](_0x5c2bb7[_0x4af864(0x23c)]);if(_0x347d6d){const _0x20e64f=JSON[_0x4af864(0x2e4)](_0x29890b);if(_0x20e64f[_0x4af864(0x1f6)][0x0]){_0x20e64f[_0x4af864(0x1f6)][0x0][_0x4af864(0x322)]=_0x4af864(0x1e2),_0x20e64f[_0x4af864(0x1f6)][0x0][_0x4af864(0x283)]='***';if(_0x20e64f[_0x4af864(0x1f6)][0x0][_0x4af864(0x37e)])_0x20e64f['bot'][0x0][_0x4af864(0x37e)]=_0x4af864(0x1e2);}_0x29890b=JSON[_0x4af864(0x397)](_0x20e64f,null,0x2);}if(_0x5c2bb7[_0x4af864(0x23c)]==_0x4af864(0x2cb)){const _0xeb155e=JSON[_0x4af864(0x2e4)](_0x29890b);if(_0xeb155e[_0x4af864(0x2ec)]['loginRequired'])_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x374)]=![];if(_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x1b8)])_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x1b8)]='***';if(_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x36a)])_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x36a)]=_0x4af864(0x1e2);if(_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x260)])_0xeb155e[_0x4af864(0x2ec)][_0x4af864(0x260)]=null;_0x29890b=JSON[_0x4af864(0x397)](_0xeb155e,null,0x2);}if(_0x5c2bb7['name']!=_0x4af864(0x398))_0x5dd398['file'](_0x5c2bb7['name'],_0x29890b);}else _0x5dd398[_0x4af864(0x384)](_0x5c2bb7[_0x4af864(0x23c)],_0x29890b);}});const _0x5a676a=_0x5dd398[_0x147f68(0x386)]({'base64':![],'compression':_0x147f68(0x297)});fs[_0x147f68(0x303)](zippath+(_0x2f3d23+'.zip'),_0x5a676a,_0x147f68(0x21e));}async function unzipFile(_0x38a9b6,_0x139cf0){const _0x23d26b=_0x5dceab;fs[_0x23d26b(0x237)](configpath,{'withFileTypes':!![]})[_0x23d26b(0x27a)](_0x2cc20e=>{const _0x53793a=_0x23d26b;if(!_0x2cc20e['isDirectory']())fs[_0x53793a(0x2c1)](configpath+_0x2cc20e['name']);});const _0x5279cf=fs[_0x23d26b(0x287)](_0x38a9b6+_0x139cf0,_0x23d26b(0x21e)),_0x5d98e5=new require(_0x23d26b(0x264))(_0x5279cf,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x5d98e5[_0x23d26b(0x1fc)])['forEach'](_0x4673c6=>{const _0x4806dd=_0x23d26b,_0x5d6ed8=_0x5d98e5['files'][_0x4673c6];fs[_0x4806dd(0x303)](configpath+_0x5d6ed8[_0x4806dd(0x23c)],_0x5d6ed8[_0x4806dd(0x2f6)]);}),fs[_0x23d26b(0x237)](temppath,{'withFileTypes':!![]})[_0x23d26b(0x27a)](_0x58e7d9=>{const _0x41cbf7=_0x23d26b;if(!_0x58e7d9[_0x41cbf7(0x308)]())fs[_0x41cbf7(0x2c1)](temppath+_0x58e7d9[_0x41cbf7(0x23c)]);}),logger['debug'](_0x23d26b(0x1ef)),process[_0x23d26b(0x2dd)]({'restore':!![]},_0x5539c3=>{});}async function getPublicIp(){const _0x101e15=_0x5dceab;try{const _0x2c7f6a=await axios[_0x101e15(0x382)](_0x101e15(0x379));publicip=_0x2c7f6a[_0x101e15(0x324)]['ip'];}catch(_0x530329){}}async function triggerAnalytics(){const _0x21d211=_0x5dceab;if(!publicip)await getPublicIp();const _0x1d5f93=getBotsWithMode();let _0x3beca6=0x0;_0x1d5f93[_0x21d211(0x27a)](_0x4ad33e=>{const _0x5ec24b=_0x21d211;if(_0x4ad33e['status']===_0x5ec24b(0x1ca))_0x3beca6++;});const _0x3ba786=getBotExchanges();mixpanel[_0x21d211(0x1f4)](_0x21d211(0x213),{'distinct_id':settings[_0x21d211(0x37f)],'ip':publicip,'version':serverversion,'numbots':_0x1d5f93[_0x21d211(0x1e8)],'numbotsenabled':_0x3beca6,'exchanges':_0x3ba786});}async function getMessages(){const _0xc83379=_0x5dceab,_0x4ccfc3=_0xc83379(0x3a6),_0x3ea25f=new GraphQLClient(_0x4ccfc3),_0x325a7f={'authorization':_0xc83379(0x2c6)},_0x222559=serverversion[_0xc83379(0x2cf)]('.'),_0x4c49b7=_0x222559[0x0]+'.'+_0x222559[0x1],_0x18517c=Math[_0xc83379(0x280)](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x29b803={'last':parseInt(_0x18517c),'bbm':_0x4c49b7},_0x1e4b07=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x105d8d;try{_0x105d8d=await _0x3ea25f['request'](_0x1e4b07,_0x29b803,_0x325a7f);}catch(_0x3766bf){}if(_0x105d8d&&_0x105d8d[_0xc83379(0x1bf)]){let _0x38152f=settings[_0xc83379(0x34f)];newMessages=[];for(const _0x4d6d0d of _0x105d8d['messages']){newMessages[_0xc83379(0x28e)](_0x4d6d0d);if(_0x4d6d0d[_0xc83379(0x20a)])updateSetting(_0xc83379(0x26f),_0x4d6d0d[_0xc83379(0x20a)]);let _0xf10c84=_0x4d6d0d[_0xc83379(0x20a)]?serverversion>=_0x4d6d0d[_0xc83379(0x20a)]:![];if(!_0xf10c84&&_0x4d6d0d['number']>_0x38152f){if(_0x4d6d0d[_0xc83379(0x31a)]===_0xc83379(0x2aa)||serverversion[_0xc83379(0x30b)](_0x4d6d0d[_0xc83379(0x31a)])){let _0x5aa0d9=''+_0x4d6d0d['title']+'\x0a\x0a'+_0x4d6d0d[_0xc83379(0x340)];const _0x51171f=await sendTelegramMsg(toTelegramMarkdown(_0x5aa0d9),_0xc83379(0x22e));if(_0x51171f)_0x38152f=_0x4d6d0d[_0xc83379(0x315)];}}}updateAvailable=isNewerVersion(settings[_0xc83379(0x26f)],serverversion),updateSetting('lastmsgtelegram',_0x38152f),emitMessages();}}function emitMessages(){const _0x4ece65=_0x5dceab,_0x27d49a=settings[_0x4ece65(0x1ba)];let _0x5774f9=[];newMessages['forEach'](_0x119d95=>{const _0x3ec2f7=_0x4ece65;_0x119d95['number']>_0x27d49a&&_0x5774f9[_0x3ec2f7(0x28e)](_0x119d95);}),_0x5774f9['length']>0x0&&getAllClients()[_0x4ece65(0x27a)](_0x5d3b5b=>{const _0x58b4f5=_0x4ece65;getSocket(_0x5d3b5b['id'])[_0x58b4f5(0x290)](_0x58b4f5(0x340),_0x5774f9);});}function confirmMessage(_0x411aef){const _0xb0ec37=_0x5dceab;updateSetting(_0xb0ec37(0x1ba),Number(_0x411aef));}function isNewerVersion(_0x2d5a70,_0x276b17){const _0x36b5e7=_0x5dceab,_0x193113=_0x276b17['split']('.'),_0x30b947=_0x2d5a70[_0x36b5e7(0x2cf)]('.');for(var _0x47e0a6=0x0;_0x47e0a6<_0x30b947[_0x36b5e7(0x1e8)];_0x47e0a6++){const _0x522d49=~~_0x30b947[_0x47e0a6],_0x3edaa6=~~_0x193113[_0x47e0a6];if(_0x522d49>_0x3edaa6)return!![];if(_0x522d49<_0x3edaa6)return![];}return![];}function toTelegramMarkdown(_0x44b5d9){const _0x46ade5=_0x5dceab,_0x5e881a=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x4cbace=/\*{2}(.+?)\*{2}/gim;return _0x44b5d9=_0x44b5d9[_0x46ade5(0x23b)](_0x5e881a,_0x46ade5(0x323))[_0x46ade5(0x23b)](_0x4cbace,_0x46ade5(0x31f)),_0x44b5d9;}async function validateConfigFile(){const _0x91b4ad=_0x5dceab,_0x2bcddf=dbConfig[_0x91b4ad(0x382)]('bots')[_0x91b4ad(0x363)](_0x91b4ad(0x256))['value']()||[];if(_0x2bcddf[_0x91b4ad(0x1e8)]==0x0){let _0xc13c29=0x0,_0x45e02c=[];const _0x2f5e8b=/^bot-([0-9]{3})-config.json$/,_0x1f4ae8=fs[_0x91b4ad(0x237)](configpath);_0x1f4ae8[_0x91b4ad(0x27a)](_0x1c7d38=>{const _0xca7a7e=_0x91b4ad,_0x2bb1d7=_0x2f5e8b['exec'](_0x1c7d38);if(_0x2bb1d7){const _0x3df7a1=_0x2bb1d7[0x1];let _0x523913=getBotAttributes(_0x3df7a1);_0x45e02c['push']({'botID':_0x3df7a1,'botname':_0x523913[_0xca7a7e(0x331)],'status':_0xca7a7e(0x2e6),'live':_0xca7a7e(0x3a7)}),_0xc13c29++;}}),_0xc13c29!=0x0&&(dbConfig['get']('bots')[_0x91b4ad(0x2d1)](_0x45e02c)[_0x91b4ad(0x27c)](),config=_0x45e02c,restoredConfigFile=_0xc13c29);}}async function restoreConfigNotify(_0x591663){const _0x12de31=_0x5dceab;let _0x2e8653;if(restoredConfigFile==0x1)_0x2e8653=_0x12de31(0x1f1);else _0x2e8653=_0x12de31(0x390);if(_0x591663)io['to'](_0x12de31(0x2d6))[_0x12de31(0x290)](_0x12de31(0x320),_0x2e8653);else{logger[_0x12de31(0x241)](_0x12de31(0x2e5)),logger[_0x12de31(0x241)](_0x2e8653),logger[_0x12de31(0x241)]('-----------------------------------------------------------------------------------'),logger[_0x12de31(0x241)]('');if(tgBot&&settings[_0x12de31(0x260)]&&settings[_0x12de31(0x32e)]!='orders')tgBot[_0x12de31(0x1d6)](settings['telegramChatId'],_0x12de31(0x2dc)+_0x2e8653)['catch'](_0x2fdeb7=>{telegramError(_0x2fdeb7);});}}function validateCredentials(_0x46ed2a,_0x4ecad9){const _0x214df6=_0x5dceab;if(_0x46ed2a[_0x214df6(0x2f3)]==settings[_0x214df6(0x2b6)]&&bcrypt[_0x214df6(0x223)](_0x46ed2a['password'],settings[_0x214df6(0x1b8)])){if(settings[_0x214df6(0x313)])return{'allow':![],'reason':_0x214df6(0x205),'token':null};else{const _0x391273=generateLoginToken(_0x4ecad9);return{'allow':!![],'reason':_0x214df6(0x1b3),'token':_0x391273};}}else return{'allow':![],'reason':_0x214df6(0x2bb),'token':null};}function refreshToken(_0x10fb0c){const _0x142cab=_0x5dceab,_0x1592a6=generateLoginToken(_0x10fb0c);return{'allow':!![],'reason':_0x142cab(0x1b3),'token':_0x1592a6};}function validateAccess(_0x20f198,_0x3af0ba,_0x889724){const _0x596bde=_0x5dceab,_0x2b2314=_0x889724?_0x889724:devices[_0x3af0ba]['ip'];let _0x592ce4;const _0x5201b6=_0x425675=>{const _0x1c6d63=_0x1ee0;if(settings[_0x1c6d63(0x374)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x3af0ba)){const _0x275318=generateLoginToken(_0x3af0ba);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x275318};}else return{'allow':![],'reason':_0x1c6d63(0x249),'token':null};}else return _0x592ce4=validToken(_0x425675,_0x3af0ba),_0x592ce4['hasOwnProperty'](_0x1c6d63(0x26b))?{'allow':!![],'reason':_0x1c6d63(0x235),'token':_0x425675}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x596bde(0x239)]){let _0x162cfd=[...settings[_0x596bde(0x337)],_0x596bde(0x33f),_0x596bde(0x1da),_0x596bde(0x296)];if(_0x162cfd[_0x596bde(0x217)](_0x2b2314))return _0x5201b6(_0x20f198);else{_0x592ce4=validToken(_0x20f198,_0x3af0ba);if(_0x592ce4[_0x596bde(0x22d)](_0x596bde(0x26b)))return _0x5201b6(_0x20f198);else{if(telegramIpApproved(_0x3af0ba)){const _0x18d95d=generateToken(_0x3af0ba);return _0x592ce4=_0x5201b6(_0x20f198),_0x592ce4[_0x596bde(0x22f)]?{'allow':!![],'reason':_0x596bde(0x39a),'token':_0x18d95d}:_0x592ce4;}else return settings[_0x596bde(0x206)]?{'allow':![],'reason':_0x596bde(0x2d8),'token':null}:{'allow':![],'reason':_0x596bde(0x2b0),'token':null};}}}else return _0x5201b6(_0x20f198);}function timelyDecrypt(_0x51844e,_0x1f2fc9=!![]){const _0x567c63=_0x5dceab;if(_0x51844e)try{const _0x541b32=crypt['decrypt'](secure[_0x567c63(0x32a)],_0x51844e)['message'],_0x474652=_0x541b32[_0x567c63(0x2cf)]('@')[0x0],_0x163c6a=_0x541b32[_0x567c63(0x2cf)]('@')[0x1],_0x4e2bbb=new Date()[_0x567c63(0x309)]();if(_0x1f2fc9){if(_0x4e2bbb-_0x163c6a<maxSecretAge*0x3e8)return _0x474652;else return![];}else return _0x474652;}catch(_0x1d6c7f){return![];}else return![];}const validToken=(_0x1ae20d,_0xb5a4f4)=>{const _0x366dfd=_0x5dceab,_0x49fa02=devices[_0xb5a4f4]['ip'];if(!_0x1ae20d)return{'error':_0x366dfd(0x38d)};for(let _0x568ff5 of blacklist){if(_0x568ff5['token']==_0x1ae20d)return{'error':_0x366dfd(0x2fb)};}let _0x562ad7;try{_0x562ad7=jwt[_0x366dfd(0x2ae)](_0x1ae20d,secure[_0x366dfd(0x228)]+_0xb5a4f4);}catch{return{'error':_0x366dfd(0x2a7)};}if(!_0x562ad7[_0x366dfd(0x22d)]('clientip')&&!_0x562ad7[_0x366dfd(0x22d)](_0x366dfd(0x2f3))||!_0x562ad7[_0x366dfd(0x22d)](_0x366dfd(0x38b)))return{'error':_0x366dfd(0x1c7)};if(!_0x562ad7[_0x366dfd(0x22d)](_0x366dfd(0x2f3))&&_0x562ad7[_0x366dfd(0x22d)](_0x366dfd(0x20b))){const {clientip:_0x4ac686}=_0x562ad7;return _0x49fa02==_0x4ac686?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x562ad7['hasOwnProperty'](_0x366dfd(0x2f3))&&_0x562ad7[_0x366dfd(0x22d)](_0x366dfd(0x20b))){const {username:_0x1816ac,clientip:_0x55d5be}=_0x562ad7;return settings[_0x366dfd(0x2b6)]==_0x1816ac&&_0x49fa02==_0x55d5be?{'success':_0x366dfd(0x288)}:{'error':_0x366dfd(0x2f2)};}}},generateLoginToken=_0x22aea6=>{const _0x339356=_0x5dceab;if(_0x22aea6){const _0x454144=devices[_0x22aea6]['ip'];return jwt[_0x339356(0x27b)]({'username':settings['bbUsername'],'clientip':_0x454144},secure[_0x339356(0x228)]+_0x22aea6,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x8cc5ba=>{const _0xa6f854=_0x5dceab;if(_0x8cc5ba){const _0x467da1=devices[_0x8cc5ba]['ip'];return jwt[_0xa6f854(0x27b)]({'clientip':_0x467da1},secure['secret']+_0x8cc5ba,{'expiresIn':devices[_0x8cc5ba][_0xa6f854(0x38c)][_0xa6f854(0x3a9)]*0x3c});}else return![];},telegramIpApproved=_0x539678=>{const _0x589f59=_0x5dceab;let _0xd9716f=![];return devices[_0x539678][_0x589f59(0x38c)]&&devices[_0x539678]['telegramIpApproval'][_0x589f59(0x3a9)]!=_0x589f59(0x368)&&(_0xd9716f=devices[_0x539678]['telegramIpApproval'][_0x589f59(0x20b)]==devices[_0x539678]['ip']&&new Date()[_0x589f59(0x309)]()-devices[_0x539678][_0x589f59(0x38c)]['timestamp']<devices[_0x539678][_0x589f59(0x38c)][_0x589f59(0x3a9)]*0x3c*0x3e8),_0xd9716f;},telegram2FaApproved=_0x2b0f29=>{const _0x1791a3=_0x5dceab;let _0x310696=![];return devices[_0x2b0f29][_0x1791a3(0x335)]&&devices[_0x2b0f29][_0x1791a3(0x335)][_0x1791a3(0x3a9)]!=_0x1791a3(0x368)&&(_0x310696=devices[_0x2b0f29][_0x1791a3(0x335)][_0x1791a3(0x20b)]==devices[_0x2b0f29]['ip']&&new Date()[_0x1791a3(0x309)]()-devices[_0x2b0f29]['telegram2FaApproval'][_0x1791a3(0x245)]<devices[_0x2b0f29][_0x1791a3(0x335)][_0x1791a3(0x3a9)]*0x3c*0x3e8),_0x310696;},normalizeIP=_0x3a08e1=>{const _0x15d7c1=_0x5dceab;let _0x5eb92e=null,_0x1ed6c3=null;if(ipaddr[_0x15d7c1(0x1cd)](_0x3a08e1)){const _0x447192=ipaddr['parse'](_0x3a08e1);_0x447192[_0x15d7c1(0x2fc)]()===_0x15d7c1(0x24d)?(_0x447192[_0x15d7c1(0x31c)]()&&(_0x5eb92e=_0x447192[_0x15d7c1(0x2e2)]()[_0x15d7c1(0x24a)]()),_0x1ed6c3=_0x447192[_0x15d7c1(0x24a)]()):(_0x5eb92e=_0x447192['toString'](),_0x1ed6c3=_0x447192[_0x15d7c1(0x378)]()[_0x15d7c1(0x24a)]());}return{'show':_0x5eb92e?_0x5eb92e:_0x1ed6c3,'store':_0x1ed6c3};};function _0x3ad0(){const _0xc2225b=['unlinkSync','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','RSA',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','hasOwnProperty','Markdown','allow','telegrammsg','storeConfiguration','114PdRTRq','settings.','started','login\x20token\x20valid',':\x20Bot\x20Mgr\x20>\x20','readdirSync','lowdb','whitelistEnabled','add-bot','replace','name','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20attempt\x20to\x20download\x20','backup-full.zip','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','simple','index.html','catch','auto','timestamp','2368340iIAtaA','address','backupfile','login\x20required','toString','temporary\x20access\x20timeout','yes','ipv6','Alerts','Your\x20installation\x20is\x20already\x20up\x20to\x20date','join','/:bot/performance','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','decrypt',',\x20must\x20be\x20a\x204\x20digit\x20number','=>\x20Go\x20to\x20#CYA#http://','botID','Unauthorized\x20attempt\x20to\x20show\x20configuration','deleteHistoryAlerts','All','/disable\x20-\x20disable\x20notifications\x0a','fork','/:bot/history','0.0.0',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','sha256','telegramChatId','telegramUsername','mode','full','node-zip','set','<b>Telegram\x20Bot\x20Status:</b>\x0a','generateKeyPairAsync','backup','<b>Balance\x20Bot\x20Status:</b>\x0a','30\x20min','success','kill','connection','-results.json','latestversion','order','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','#RES#\x20if\x20running\x20on\x20server','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Access\x20enabled\x20for\x20','socket.io','restore-backup-file','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','305384NctRBP','onepagemode','forEach','sign','write','\x20(1)','Network\x20Interfaces:','storeFiat','min','1000','search','apiSecret','\x20|\x20client:\x20...','Deleted\x20Bot\x20','args','readFileSync','User\x20has\x20been\x20validated','All\x20bots','node','handshake','sendPortfolioTelegram','404\x20Not\x20Found','push','constructor','emit','headers','exchange','polling_error','Password\x20reset\x20rejected','live','127.0.0.1','DEFLATE','toggle-bot-mode','output-003.log','Unauthorized\x20attempt\x20to\x20update\x20settings','output-002.log','store','zip/','Unauthorized\x20attempt\x20to\x20get\x20portfolio','createWriteStream','remoteAddress','55955yRgNhh','bot-','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','removeListener','restart','Invalid\x20authentication\x20token\x20(1)','stopPolling','showname','any','Login\x20accepted','/:bot/portfolio','status','verify','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','temporary\x20access\x20not\x20allowed','getUTCHours','auth','\x1b[35m','argv','statSync','bbUsername','Error:\x20Invalid\x20argument\x20','api-eu.mixpanel.com','family','Bot\x20','invalid\x20credentials','update-bb','env','keys','get-starting-balances','orders','rmSync','ipc','reinstall','update-bot','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','then','login','get-messages','\x20(2)','bb-settings.json','alerts','running','store-settings','split','store-headless','assign','/update\x20-\x20update\x20Balance\x20Bot\x0a','download','new-disabled','[ip-address]','botmanager','date-fns','2FA\x20required','once','mtime','token','Bot\x20Mgr\x20>\x20','send','encryptedUuid','entries','Session\x20expired\x20for\x20user\x20...','show-config','toIPv4Address','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','parse','-----------------------------------------------------------------------------------','disabled','copyFileSync','(((.+)+)+)+$','Restore\x20backup\x20file\x20','disconnect','error','settings','storeHeadless','graphql-request','string','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','express','Invalid\x20username\x20or\x20IP\x20address','username','endsWith','Notifications\x20types:\x20','_data','init','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','warning','randomFillSync','Token\x20blacklisted','kind','mkdirSync','\x20|\x20environment:\x20','remove','Starting\x20Balance\x20Bot\x20','getFullYear','log','writeFileSync','path','backup-files','Unauthorized\x20attempt\x20to\x20delete\x20alerts','logout','isDirectory','getTime','2FA\x20login\x20rejected','startsWith','Failed\x20to\x20download\x20','socket','Notifications\x20enabled\x0a','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Logged\x20out\x20user\x20...','onText','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','f2aRequired','reload','number','alias','Unauthorized\x20attempt\x20to\x20delete\x20bot','/:bot/coins','Unauthorized\x20attempt\x20to\x20confirm\x20message','bbvReceive','HTML','isIPv4MappedAddress','randomBytes','cloneDeep','*$1*','notification','referer','apiKey','$1_$2_$3','data','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','resetHistory','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','update','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','privateKey','#RES#\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Ok,\x20will\x20send\x20order\x20notifications\x20only','telegramEvents','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','slice','botname','server','hybrid-crypto-js','mixpanel','telegram2FaApproval','Crypt','whitelist','112gzzVwp','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','backup-full@','\x20|\x20','Unauthorized\x20attempt\x20to\x20update\x20bot','post','Starting\x20bot\x20|\x20Bot\x20','::1','message','Unauthorized\x20attempt\x20to\x20log\x20out','timeshift','bb-config.json','/names\x20-\x20show\x20bot\x20names\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','\x1b[33m','RSA-OAEP','IPv4','build','6b67f3d61ee94b8f5c80b4affef4c4d9','size','sockets','place-order','Unauthorized\x20attempt\x20to\x20get\x20messages','lastmsgtelegram','logged\x20out','removeAllListeners','bots','1849806MFGCgq','pidRefreshToken','/:bot/configuration','sort','************','get-logs','reason','crypto','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','/enable\x20-\x20enable\x20notifications\x0a','getMinutes','temp/','\x20|\x20user:\x20...','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','cancel-loading','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','sortBy','/help\x20-\x20show\x20available\x20commands\x0a','/restart\x20-\x20restart\x20bot(s)\x0a','Yes','match','reject','15\x20min','telegramToken','accept','manual','function','config/','Restarting\x20Bot\x20','Notifications\x20enabled','jsonwebtoken','pidExpireLogin','202340mfsgiS','loginRequired','output-000.log','NTBA_FIX_319','Starting\x20Balance\x20Bot\x20update','toIPv4MappedAddress','https://api.ipify.org?format=json','bcryptjs','delete-alerts','\x1b[36m','blacklist','apiPassword','userid','emitHistory','backup-full','get','from','file','Starting\x20new\x20bot\x20|\x20Bot\x20','generate','#RES#\x20if\x20running\x20locally\x0a','initclient','all','Restore\x20process\x20aborted','exp','telegramIpApproval','No\x20authentication\x20token','Unauthorized\x20attempt\x20to\x20add\x20bot','Disabled\x20Bot\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Unauthorized\x20attempt\x20to\x20get\x20events','value','telegramEnabled','access','logs/','\x20to\x20','stringify','bb-secure.json','Login\x20rejected','temporary\x20token\x20generated','headless','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','\x20>\x20','SIGTERM','placeOrder','getMonth','callback_query','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','answerCallbackQuery','sendMetricsTelegram','port','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','stopped','store-fiat','expiry','All\x20bots\x20running\x20right\x20now','confirm-message','yargs/yargs','login\x20token\x20generated','private','\x1b[34m','Notifications\x20disabled','node-telegram-bot-api','bbPassword','Node.js\x20v','lastmsgemitted','store-configuration','event','2FA','apply','messages','uuid','format','filter','listen','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','reset-history','hashSync','Invalid\x20authentication\x20token\x20(2)','existsSync','sendFile','enabled','reset-password','Idling\x20bot\x20\x20\x20|\x20Bot\x20','isValid','/status\x20-\x20show\x20bot(s)\x20status\x0a','defaults','getHours','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','\x20minutes','test','Unauthorized\x20attempt\x20to\x20store\x20configuration','access\x20timeout','sendMessage','ipaddr.js','password','Ok,\x20will\x20send\x20alert\x20notifications\x20only','::ffff:127.0.0.1','-config.json','getSeconds','http','express-fileupload','publicKey','No\x20bots\x20running\x20right\x20now','use','***','delete-bot','show','653541brFDNb','-events.json','Restoring\x20bot(s)\x20from\x20backup','length','add','static','Error\x20removing\x20old\x20backup\x20files:','/download/:type','\x1b[0m','getDate','Backup\x20file\x20unzipped\x20and\x20stored','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','Starting\x20#RED#Balance\x20Bot\x20v','get-portfolio','track','inherit','bot','padStart','toggleBotMode','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','login\x20not\x20required','host','files','temporary\x20access\x20rejected','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','internal','type','backup/','new','build2','-performance.json','2FA\x20login\x20required','temporaryAccessAllowed','.zip','/off\x20-\x20stop\x20bot(s)\x0a','Allow\x20login\x20from\x20IP\x20address\x20<b>','bbvNew','clientip','tkn','exit','Notifications\x20disabled\x0a','Setting\x20access:\x20','2FA\x20login\x20token\x20generated','\x1b[31m','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Server','577682AgdkyQ','showConfig','secure','includes','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Orders','updatebotmanager','binary','(staging)','Invalid\x20Telegram\x20token','chat','find','compareSync','output-001.log','telegram','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','debug','secret'];_0x3ad0=function(){return _0xc2225b;};return _0x3ad0();}function formatDate(_0x56aafe){const _0x3ccb38=_0x5dceab;return _0x56aafe[_0x3ccb38(0x301)]()+'/'+(_0x56aafe['getMonth']()+0x1)[_0x3ccb38(0x24a)]()['padStart'](0x2,'0')+'/'+_0x56aafe[_0x3ccb38(0x1ee)]()[_0x3ccb38(0x24a)]()[_0x3ccb38(0x1f7)](0x2,'0')+'\x20'+_0x56aafe[_0x3ccb38(0x1d0)]()[_0x3ccb38(0x24a)]()['padStart'](0x2,'0')+':'+_0x56aafe[_0x3ccb38(0x35d)]()[_0x3ccb38(0x24a)]()['padStart'](0x2,'0')+':'+_0x56aafe['getSeconds']()['toString']()[_0x3ccb38(0x1f7)](0x2,'0');}function sleep(_0x2346ac){return new Promise(_0x19b837=>setTimeout(_0x19b837,_0x2346ac));}