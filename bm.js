const _0x25417a=_0x6a6b;(function(_0x1cd016,_0x160d0b){const _0x3ebab3=_0x6a6b,_0x560612=_0x1cd016();while(!![]){try{const _0x4b8def=-parseInt(_0x3ebab3(0x209))/0x1*(-parseInt(_0x3ebab3(0x216))/0x2)+parseInt(_0x3ebab3(0x331))/0x3*(-parseInt(_0x3ebab3(0x2a6))/0x4)+-parseInt(_0x3ebab3(0x356))/0x5*(-parseInt(_0x3ebab3(0x2da))/0x6)+parseInt(_0x3ebab3(0x220))/0x7*(parseInt(_0x3ebab3(0x357))/0x8)+parseInt(_0x3ebab3(0x284))/0x9+-parseInt(_0x3ebab3(0x2c7))/0xa*(-parseInt(_0x3ebab3(0x20f))/0xb)+parseInt(_0x3ebab3(0x212))/0xc*(-parseInt(_0x3ebab3(0x301))/0xd);if(_0x4b8def===_0x160d0b)break;else _0x560612['push'](_0x560612['shift']());}catch(_0x303faf){_0x560612['push'](_0x560612['shift']());}}}(_0x362c,0x703dd));const _0xb1ecc5=function(){let _0x28119a=!![];return function(_0x9984d8,_0x7deec6){const _0x4358cd=_0x28119a?function(){const _0x5a2900=_0x6a6b;if(_0x7deec6){const _0xc5f16=_0x7deec6[_0x5a2900(0x208)](_0x9984d8,arguments);return _0x7deec6=null,_0xc5f16;}}:function(){};return _0x28119a=![],_0x4358cd;};}(),_0x51a58e=_0xb1ecc5(this,function(){const _0x784a1=_0x6a6b;return _0x51a58e['toString']()['search'](_0x784a1(0x1e7))[_0x784a1(0x214)]()[_0x784a1(0x28e)](_0x51a58e)['search'](_0x784a1(0x1e7));});_0x51a58e();'use strict';process[_0x25417a(0x201)][_0x25417a(0x279)]=0x1;const childProcess=require(_0x25417a(0x2e3)),fs=require('fs'),fns=require(_0x25417a(0x3e1)),low=require('lowdb'),FileSync=require(_0x25417a(0x3d4)),path=require(_0x25417a(0x27e)),crypto=require(_0x25417a(0x3f3)),Crypt=require(_0x25417a(0x366))[_0x25417a(0x28b)],RSA=require(_0x25417a(0x366))[_0x25417a(0x363)],bcrypt=require(_0x25417a(0x20b)),jwt=require(_0x25417a(0x227)),ipaddr=require('ipaddr.js'),argv=require(_0x25417a(0x3d9))(process[_0x25417a(0x1e5)]['slice'](0x2))['argv'],uuidRandom=require(_0x25417a(0x2b9)),{Telegraf,Markup}=require(_0x25417a(0x1e8)),Mixpanel=require(_0x25417a(0x381)),axios=require(_0x25417a(0x394)),{GraphQLClient,gql}=require(_0x25417a(0x26e)),util=require(_0x25417a(0x2d6)),fileUpload=require(_0x25417a(0x2d5)),{networkInterfaces}=require('os'),PORT=argv[_0x25417a(0x277)]||_0x25417a(0x35a),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x25417a(0x3e0)](_0x25417a(0x2f3)+PORT+_0x25417a(0x3da)),process[_0x25417a(0x1f9)](0x1));const HOST=argv[_0x25417a(0x30f)]||null,userID=argv[_0x25417a(0x328)]||'',debugging=argv['d']||![],nodeversion=process['versions']['node'];let bbpath=_0x25417a(0x2c5),bbpath2='';const botfile='bot.js',configfile=_0x25417a(0x2b6),settingsfile=_0x25417a(0x2ce),securefile=_0x25417a(0x27c),environment=require('./'+bbpath2+'version.json')['environment']||'production',maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);function _0x6a6b(_0x9fe4e9,_0x3bcf54){const _0x3163f4=_0x362c();return _0x6a6b=function(_0x51a58e,_0xb1ecc5){_0x51a58e=_0x51a58e-0x1e3;let _0x362cb8=_0x3163f4[_0x51a58e];return _0x362cb8;},_0x6a6b(_0x9fe4e9,_0x3bcf54);}const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x25417a(0x3c6)),configpath=userID?bbpath+_0x25417a(0x269)+userID+'/':bbpath+_0x25417a(0x269),configbackuppath=configpath+'backup/',logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x25417a(0x2be),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x25417a(0x1f5),loggerfile=fs['createWriteStream'](logspath+_0x25417a(0x2b5),{'flags':'a'}),temppath=userID?bbpath+_0x25417a(0x380)+userID+'/':bbpath+_0x25417a(0x380);!fs[_0x25417a(0x273)](configpath)&&fs[_0x25417a(0x2d1)](configpath);!fs[_0x25417a(0x273)](configbackuppath)&&fs[_0x25417a(0x2d1)](configbackuppath);!fs[_0x25417a(0x273)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs['mkdirSync'](zippath);!fs['existsSync'](temppath)&&fs[_0x25417a(0x2d1)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x25417a(0x36d)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x25417a(0x264)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x25417a(0x23a),'onepagemode':![],'marketcapApi':''}})[_0x25417a(0x36d)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x25417a(0x264)]({'secure':{},'blacklist':[]})[_0x25417a(0x36d)]();let crypt=new Crypt({'md':_0x25417a(0x38c),'rsaStandard':_0x25417a(0x1fd)});const saltRounds=0xa,mixpanel=Mixpanel[_0x25417a(0x36e)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x25417a(0x259)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x25417a(0x382)]!=''&&settings[_0x25417a(0x382)]!=_0x25417a(0x204))&&settings[_0x25417a(0x306)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x2300c2,_0xa58677)=>{const _0x252a98=_0x25417a,_0x1e71ba=/#[A-Z]{3}#/g;if(typeof _0x2300c2==_0x252a98(0x2e1)){!_0xa58677?_0x2300c2=_0x2300c2['replace'](_0x1e71ba,''):(_0x2300c2=_0x2300c2[_0x252a98(0x34b)](/#BLU#/g,_0x252a98(0x2a1)),_0x2300c2=_0x2300c2['replace'](/#RED#/g,_0x252a98(0x2d3)),_0x2300c2=_0x2300c2[_0x252a98(0x34b)](/#YEL#/g,'\x1b[33m'),_0x2300c2=_0x2300c2[_0x252a98(0x34b)](/#MAG#/g,_0x252a98(0x239)),_0x2300c2=_0x2300c2[_0x252a98(0x34b)](/#CYA#/g,_0x252a98(0x2f2)),_0x2300c2=_0x2300c2['replace'](/#RES#/g,_0x252a98(0x2c8)));;}return _0x2300c2;},logger={'screen':_0x452457=>{console['log'](parseColor(_0x452457,!![]));},'simple':_0x5e519b=>{const _0x2a0d85=_0x25417a;console[_0x2a0d85(0x3e0)](parseColor(_0x5e519b,!![])),loggerfile[_0x2a0d85(0x36d)](util['format'](parseColor(_0x5e519b,![]))+'\x0a');},'full':async _0x12e514=>{const _0xaae9ba=_0x25417a,_0x47d751=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x12e514;console['log'](parseColor(_0x47d751,!![])),loggerfile['write'](util[_0xaae9ba(0x2b8)](parseColor(_0x47d751,![]))+'\x0a');if(tgBot&&settings[_0xaae9ba(0x354)]&&settings[_0xaae9ba(0x31a)]!=_0xaae9ba(0x2a4))await sendTelegram(settings[_0xaae9ba(0x354)],_0xaae9ba(0x3af)+parseColor(_0x12e514,![]));},'debug':async(_0xbe7ee4,_0x5b162a='')=>{const _0x70fee3=_0x25417a,_0x16368e=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0xbe7ee4;if(debugging)console[_0x70fee3(0x3e0)](parseColor(_0x16368e,!![]));loggerfile[_0x70fee3(0x36d)](util[_0x70fee3(0x2b8)](parseColor(_0x16368e,![]))+'\x0a');if(_0x5b162a){if(debugging)console[_0x70fee3(0x3e0)](_0x5b162a);loggerfile[_0x70fee3(0x36d)](util[_0x70fee3(0x2b8)](_0x5b162a)+'\x0a');}}};let terminating=![];process['on'](_0x25417a(0x283),function(_0x2235e8){const _0xcaf2d9=_0x25417a;_0x2235e8[_0xcaf2d9(0x214)]()[_0xcaf2d9(0x3a9)](_0xcaf2d9(0x2ad))?(logger[_0xcaf2d9(0x26b)](_0xcaf2d9(0x34a)+_0x2235e8[_0xcaf2d9(0x277)]+_0xcaf2d9(0x3cc)),process[_0xcaf2d9(0x3a5)]({'terminate':!![]},_0x5b5fb5=>{})):logger[_0xcaf2d9(0x26b)](_0x2235e8);}),process['on'](_0x25417a(0x1f9),()=>{stopAllBots(),process['exit'](0x0);}),process['on'](_0x25417a(0x38b),()=>{const _0x360a86=_0x25417a;stopAllBots(),process[_0x360a86(0x1f9)](0x0);}),process['on']('SIGINT',()=>{const _0x202d4c=_0x25417a;stopAllBots(),process[_0x202d4c(0x1f9)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x25417a(0x2aa))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x25417a(0x342)),app=express(),http=require(_0x25417a(0x247))[_0x25417a(0x2e2)](app);app[_0x25417a(0x3de)](fileUpload({'useTempFiles':!![]})),app[_0x25417a(0x300)](_0x25417a(0x233),async(_0xbf5aaa,_0x25a6cb)=>{const _0x424f46=_0x25417a,_0x1281f9=_0xbf5aaa[_0x424f46(0x3e2)][_0x424f46(0x252)],_0x33d20e=getClientsWithBotID(_0x424f46(0x28c)),_0x5e9b1b=_0xbf5aaa[_0x424f46(0x20a)][_0x424f46(0x359)],_0x18b9e1=timelyDecrypt(_0x5e9b1b,![]),_0x10bc4c=_0x33d20e[_0x424f46(0x282)](_0x5b09e5=>_0x5b09e5[_0x424f46(0x359)]==_0x18b9e1);if(_0x10bc4c){const _0x212d38=normalizeIP(_0xbf5aaa[_0x424f46(0x289)][_0x424f46(0x3d1)])[_0x424f46(0x1ff)],_0x1b4f94=_0xbf5aaa['headers'][_0x424f46(0x20d)];if(validateAccess(_0x1b4f94,_0x18b9e1,_0x212d38)['allow'])_0x1281f9==_0x424f46(0x1f8)&&await backupConfigFiles(),await zipFiles(_0x1281f9),_0x25a6cb[_0x424f46(0x395)](zippath+(_0x1281f9+_0x424f46(0x39f)),_0x39d509=>{const _0x12fb09=_0x424f46;_0x39d509&&(logger[_0x12fb09(0x26a)](_0x12fb09(0x3c5)+_0x1281f9),logger[_0x12fb09(0x26b)](_0x39d509));});else logger[_0x424f46(0x26a)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x1281f9+_0x424f46(0x31f));}else logger[_0x424f46(0x26a)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x1281f9+_0x424f46(0x206));}),app[_0x25417a(0x21a)](_0x25417a(0x31b),async(_0x32695c,_0x1e0536)=>{const _0x4ed0b2=_0x25417a,_0x2834d2=getClientsWithBotID(_0x4ed0b2(0x28c)),_0x311bf3=_0x32695c[_0x4ed0b2(0x20a)][_0x4ed0b2(0x359)],_0x31c89c=timelyDecrypt(_0x311bf3,![]),_0x20117e=_0x2834d2[_0x4ed0b2(0x282)](_0x19c82c=>_0x19c82c[_0x4ed0b2(0x359)]==_0x31c89c);logger[_0x4ed0b2(0x203)](_0x4ed0b2(0x32f));if(_0x20117e){const _0x27909d=normalizeIP(_0x32695c[_0x4ed0b2(0x289)][_0x4ed0b2(0x3d1)])[_0x4ed0b2(0x1ff)],_0x3cab73=_0x32695c['headers'][_0x4ed0b2(0x20d)];if(validateAccess(_0x3cab73,_0x31c89c,_0x27909d)[_0x4ed0b2(0x37e)]){if(_0x32695c['files']){const _0xe17b3e=_0x32695c[_0x4ed0b2(0x35b)][_0x4ed0b2(0x358)];await _0xe17b3e['mv'](temppath+_0xe17b3e[_0x4ed0b2(0x3bf)]),_0x1e0536[_0x4ed0b2(0x3a5)]({'status':!![],'message':_0x4ed0b2(0x337)});const _0xfdadb2=getBotsWithMode();_0xfdadb2['length']>0x0?confirmRestore(temppath,_0xe17b3e[_0x4ed0b2(0x3bf)]):unzipFile(temppath,_0xe17b3e[_0x4ed0b2(0x3bf)]);}}else logger[_0x4ed0b2(0x26a)](_0x4ed0b2(0x3b6));}else logger[_0x4ed0b2(0x26a)](_0x4ed0b2(0x311));}),app[_0x25417a(0x3de)](express[_0x25417a(0x35c)](path[_0x25417a(0x30c)](__dirname,bbpath2,_0x25417a(0x2c9)))),app[_0x25417a(0x3de)](express['static'](path['join'](__dirname,bbpath2,_0x25417a(0x373)))),app['get']('/',function(_0xec82ba,_0x1f8413){const _0x2ee882=_0x25417a;_0x1f8413[_0x2ee882(0x290)](path[_0x2ee882(0x30c)](__dirname,bbpath2,_0x2ee882(0x2c9),_0x2ee882(0x253)));}),app['get'](_0x25417a(0x28a),function(_0x72af8f,_0x276e0e){const _0x5d7ae8=_0x25417a;_0x276e0e[_0x5d7ae8(0x290)](path[_0x5d7ae8(0x30c)](__dirname,bbpath2,_0x5d7ae8(0x373),_0x5d7ae8(0x253)));}),app[_0x25417a(0x300)]('/:bot/portfolio',(_0x2026cc,_0x3e7728)=>{const _0x46f95b=_0x25417a;_0x3e7728[_0x46f95b(0x290)](path['join'](__dirname,bbpath2,_0x46f95b(0x373),_0x46f95b(0x253)));}),app[_0x25417a(0x300)](_0x25417a(0x307),(_0x2787fd,_0x2c27a8)=>{const _0x4f3475=_0x25417a;_0x2c27a8['sendFile'](path[_0x4f3475(0x30c)](__dirname,bbpath2,_0x4f3475(0x373),'index.html'));}),app[_0x25417a(0x300)]('/:bot/coins',(_0x31b815,_0x2ac696)=>{const _0x3724ac=_0x25417a;_0x2ac696[_0x3724ac(0x290)](path[_0x3724ac(0x30c)](__dirname,bbpath2,_0x3724ac(0x373),_0x3724ac(0x253)));}),app[_0x25417a(0x300)](_0x25417a(0x316),(_0xedb71b,_0x5be439)=>{const _0x3b623d=_0x25417a;_0x5be439[_0x3b623d(0x290)](path['join'](__dirname,bbpath2,_0x3b623d(0x373),_0x3b623d(0x253)));}),app[_0x25417a(0x300)](_0x25417a(0x2a9),(_0x338b6e,_0x557f28)=>{const _0x4ab86d=_0x25417a;_0x557f28[_0x4ab86d(0x290)](path[_0x4ab86d(0x30c)](__dirname,bbpath2,_0x4ab86d(0x373),'index.html'));}),app[_0x25417a(0x300)]('/:bot/support',(_0x1f9097,_0xc66bcc)=>{const _0x24067e=_0x25417a;_0xc66bcc[_0x24067e(0x290)](path[_0x24067e(0x30c)](__dirname,bbpath2,_0x24067e(0x373),_0x24067e(0x253)));});if(HOST)http[_0x25417a(0x1e4)](PORT,HOST);else http[_0x25417a(0x1e4)](PORT);const io=require(_0x25417a(0x2f9))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x3e23d6=_0x25417a;let _0x3cd353=_0x3e23d6(0x372);const _0x3df190=networkInterfaces(),_0x446740={};for(const _0x119daf of Object[_0x3e23d6(0x320)](_0x3df190)){for(const _0x283c00 of _0x3df190[_0x119daf]){if((_0x283c00[_0x3e23d6(0x29f)]==_0x3e23d6(0x1ed)||_0x283c00[_0x3e23d6(0x29f)]==0x4)&&!_0x283c00[_0x3e23d6(0x350)]){const _0x51e1bc=ipaddr[_0x3e23d6(0x374)](_0x283c00[_0x3e23d6(0x29b)])[_0x3e23d6(0x267)]();_0x51e1bc!=_0x3e23d6(0x22d)&&(!_0x446740[_0x119daf]&&(_0x446740[_0x119daf]=[]),_0x446740[_0x119daf][_0x3e23d6(0x39e)](_0x283c00[_0x3e23d6(0x29b)]),_0x3cd353=_0x283c00['address']);}}}return{'serverip':_0x3cd353,'netinterfaces':_0x446740};}async function startServer(){const _0xc6cb69=_0x25417a,{serverip:_0x527bb9,netinterfaces:_0x34fdba}=getServerIP();logger[_0xc6cb69(0x26b)](''),logger[_0xc6cb69(0x26b)](_0xc6cb69(0x3f0)),await logger[_0xc6cb69(0x26a)](_0xc6cb69(0x3be)+serverversion+_0xc6cb69(0x3dc)+(environment==_0xc6cb69(0x3ab)?_0xc6cb69(0x3c1):'')+'\x0a'+(_0xc6cb69(0x244)+PORT+_0xc6cb69(0x32a))+(_0xc6cb69(0x343)+_0x527bb9+':'+PORT+_0xc6cb69(0x33f))),logger[_0xc6cb69(0x26b)](_0xc6cb69(0x3f0));if(config['length']!=0x0)for(const _0x4adf9d of config){const _0x5beacd=_0x4adf9d[_0xc6cb69(0x262)]==_0xc6cb69(0x2a8)?'a':'m';if(_0x4adf9d[_0xc6cb69(0x2fc)]==_0xc6cb69(0x29a)||_0x4adf9d[_0xc6cb69(0x2fc)]==_0xc6cb69(0x3f2))await logger[_0xc6cb69(0x26a)](_0xc6cb69(0x1ec)+_0x5beacd+_0xc6cb69(0x352)+_0x4adf9d[_0xc6cb69(0x21d)]+_0xc6cb69(0x2ef)+_0x4adf9d['botname']),startBot([_0x4adf9d[_0xc6cb69(0x21d)],userID],{'cwd':bbpath},function(_0x48ab30){const _0x18755f=_0xc6cb69;if(_0x48ab30)logger[_0x18755f(0x26a)](_0x48ab30);});else(_0x4adf9d[_0xc6cb69(0x2fc)]=='disabled'||_0x4adf9d[_0xc6cb69(0x2fc)]==_0xc6cb69(0x369))&&await logger[_0xc6cb69(0x26a)]('Idling\x20('+_0x5beacd+_0xc6cb69(0x2ff)+_0x4adf9d['botID']+'\x20|\x20'+_0x4adf9d['botname']);}else!newBot&&logger[_0xc6cb69(0x26b)](_0xc6cb69(0x292));if(newBot)addBot();logger[_0xc6cb69(0x26b)]('-----------------------------------------------------------------------------------'),logger[_0xc6cb69(0x26b)](''),await logger[_0xc6cb69(0x203)](_0xc6cb69(0x398)+nodeversion),await logger['debug'](_0xc6cb69(0x1e3),_0x34fdba);}function startSocket(){const _0x462811=_0x25417a;io['on'](_0x462811(0x26c),_0x535fd4=>{const _0x57009e=_0x462811;let _0x5439fa,_0x5ad35b,_0x2a2cbd,_0x44128b,_0xec7bb1;const _0x2a2374=_0x535fd4[_0x57009e(0x24f)][_0x57009e(0x20a)][_0x57009e(0x361)];_0x5ad35b=_0x2a2374[_0x57009e(0x304)](/bot[0-9]{3}/);if(_0x5ad35b)_0x2a2cbd=_0x5ad35b[0x0]['match'](/[0-9]{3}/);if(_0x2a2cbd)_0x5439fa=_0x2a2cbd[0x0];else _0x5439fa=_0x57009e(0x28c);const _0x46e3b6=_0x535fd4[_0x57009e(0x24f)][_0x57009e(0x37b)]['encryptedUuid'];if(!_0x46e3b6)_0x535fd4[_0x57009e(0x250)]('status',{'publicKey':secure[_0x57009e(0x2ed)]});else{_0x44128b=timelyDecrypt(_0x46e3b6,![]);if(!_0x44128b)_0x535fd4[_0x57009e(0x250)]('status',{'publicKey':secure['publicKey']});else{_0xec7bb1=normalizeIP(_0x535fd4['conn'][_0x57009e(0x3d1)])[_0x57009e(0x1ff)];if(!devices[_0x44128b])devices[_0x44128b]={'uuid':_0x44128b,'access':{'token':null}};devices[_0x44128b]['ip']=_0xec7bb1;const _0x4edc8a=addClient(_0x535fd4['id'],_0x44128b,_0x5439fa);setAccess(_0x4edc8a),emitMessages(),_0x535fd4['on'](_0x57009e(0x2cb),_0x552ef6=>{const _0x3e3d85=_0x57009e,_0x435f9b=timelyDecrypt(_0x552ef6[_0x3e3d85(0x317)],!![],_0x3e3d85(0x238));if(_0x435f9b){_0x552ef6={'username':_0x552ef6[_0x3e3d85(0x3ed)],'password':_0x435f9b},devices[_0x44128b][_0x3e3d85(0x1ee)]=validateCredentials(_0x552ef6,_0x44128b);if(devices[_0x44128b]['access'][_0x3e3d85(0x37e)]==![]&&devices[_0x44128b]['access'][_0x3e3d85(0x293)]=='2FA\x20login\x20required')_0x535fd4[_0x3e3d85(0x250)](_0x3e3d85(0x2fc),{'access':devices[_0x44128b][_0x3e3d85(0x1ee)]}),loginAccess2FA(_0x44128b,_0xec7bb1);else{if(devices[_0x44128b][_0x3e3d85(0x1ee)][_0x3e3d85(0x37e)]==![]&&devices[_0x44128b][_0x3e3d85(0x1ee)][_0x3e3d85(0x293)]==_0x3e3d85(0x38e))_0x535fd4[_0x3e3d85(0x250)](_0x3e3d85(0x2fc),{'access':devices[_0x44128b]['access']});else devices[_0x44128b][_0x3e3d85(0x1ee)][_0x3e3d85(0x37e)]&&devices[_0x44128b][_0x3e3d85(0x1ee)]['reason']==_0x3e3d85(0x330)&&(getClientsWithUuid(_0x44128b)[_0x3e3d85(0x2ca)](_0x31c034=>{setAccess(_0x31c034);}),logger[_0x3e3d85(0x203)](_0x3e3d85(0x270)+_0x44128b['slice'](-0x8)),setTokenRefresh(_0x44128b),setSessionTimeout(_0x3e3d85(0x2cb),_0x44128b));}}else logger[_0x3e3d85(0x26a)](_0x3e3d85(0x2f6));}),_0x535fd4['on']('reset-password',()=>{resetPassword();}),_0x535fd4['on'](_0x57009e(0x234),_0x4c100c=>{removeClient(_0x535fd4['id']);}),_0x5439fa==_0x57009e(0x28c)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function _0x362c(){const _0x5b7bd5=['/config\x20-\x20notification\x20types\x20to\x20receive\x0a','silentRestart','decrypt','publicKey','add-bot','\x20|\x20','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','reinstall','\x1b[36m','Error:\x20Invalid\x20argument\x20','sortBy','chat','Unauthorized\x20login\x20attempt\x20(timeout)','2FA\x20login\x20token\x20generated','/start','socket.io','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','stringify','status','launch','Telegram\x20error:',')\x20\x20\x20|\x20Bot\x20','get','41795OfaTVj','sort','toggleBotMode','match','telegramIpApproval','telegramUsername','/:bot/performance','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','inlineKeyboard','ipc','latestversion','join','deleteHistoryAlerts','Restore\x20process\x20confirmed','host','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','-performance.json','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','title','_data','/:bot/history','password','from','config_alerts','telegramEvents','/upload-backup','toggle_','Starting\x20new\x20bot\x20|\x20Bot\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','\x20(1)','keys','ipv6','number','marketcapApi','disable','reject','update','Unauthorized\x20attempt\x20to\x20delete\x20bot','user','assign','#RES#\x20if\x20running\x20locally\x0a','once','resetpw_yes','logs','\x20mode','Backup\x20file\x20uploaded','login\x20token\x20generated','1260879dhrDOo','Restarting\x20Bot\x20','whitelistEnabled','/update\x20-\x20update\x20Balance\x20Bot\x0a','close','clientip','File\x20uploaded','add','off_','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','2FA\x20required','alerts','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','randomFillSync','#RES#\x20if\x20running\x20on\x20server','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','botname','express','=>\x20Go\x20to\x20#CYA#http://','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','restore_no_','readFileSync','temporary\x20access\x20rejected','getSeconds','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','replace','action','message','apiKey','help','internal','portfolio_',')\x20|\x20Bot\x20','login2fa_','telegramChatId','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','30TDMlkj','138832AMRpsp','backupfile','uuid','3000','files','static','compareSync','temporaryAccessAllowed','getDate','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','referer','copyFileSync','RSA','backup-full@','Ok,\x20will\x20send\x20order\x20notifications\x20only','hybrid-crypto-js','generate','token','new-disabled','kill','Starting\x20Balance\x20Bot\x20reinstallation','readdirSync','write','init','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Starting\x20Balance\x20Bot\x20update','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','[ip-address]','build','parse','secret','Unauthorized\x20attempt\x20to\x20log\x20out','timestamp','notification','telegram2FaApproval','output-002.log','auth','enable','f2aRequired','allow','resetpw_no','temp/','mixpanel','telegramToken','SIGINT','bot-','lastmsgtelegram',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','bots','whitelist','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','button','SIGTERM','sha256','backup-full','invalid\x20credentials','Notifications\x20enabled\x0a','generateKeyPairAsync','loginRequired','getMinutes','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','axios','download','settings','login\x20not\x20required','Node.js\x20v','Logged\x20out\x20user\x20...','restart','<b>Balance\x20Bot\x20Status:</b>\x0a','tempaccess_5_','Setting\x20access:\x20','push','.zip','sockets','store-fiat','privateKey','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','lastmsgemitted','send','store-configuration','place-order','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','includes','login\x20required','staging','show-config','function','logout','Bot\x20Mgr\x20>\x20','Notifications\x20enabled','store-headless','Orders','Error\x20details:','bbPassword','command','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','bbvReceive','fork','update-bb','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Invalid\x20authentication\x20token\x20(1)','pidExpireLogin','Unauthorized\x20attempt\x20to\x20show\x20configuration','Starting\x20#RED#Balance\x20Bot\x20v','name','telegram','(staging)','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','CoinMarketCap\x20API\x20key\x20validated','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Failed\x20to\x20download\x20','clients','size','Notifications\x20types:\x20','restart_','config_orders','stopped','#RES#','secure','reload','sendPortfolioTelegram','inherit','remoteAddress','sendMessage','login\x20token\x20valid','lowdb/adapters/FileSync','Unauthorized\x20attempt\x20to\x20get\x20messages','showConfig','temporary\x20token\x20generated','toggle-bot-mode','yargs/yargs',',\x20must\x20be\x20a\x204\x20digit\x20number','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','#RES#\x20','storeFiat','use','verify','log','date-fns','params','cloneDeep','-results.json','logged\x20out','blacklist','accept','initclient','get-portfolio','placeOrder','apiPassword','Unauthorized\x20attempt\x20to\x20delete\x20alerts','username','No\x20authentication\x20token','\x20to\x20','-----------------------------------------------------------------------------------','start','new','crypto','2FA\x20login\x20required','Network\x20Interfaces:','listen','argv','catch','(((.+)+)+)+$','telegraf','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','Session\x20expired\x20for\x20user\x20...','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Starting\x20(','IPv4','access','binary','slice','/enable\x20-\x20enable\x20notifications\x0a','update_no','Disabled\x20Bot\x20','kind','zip/','text','getMonth','backup','exit','code','headless','Unauthorized\x20attempt\x20to\x20confirm\x20message','RSA-OAEP','5\x20min','store','started','env','metrics','debug','***','bbvNew','\x20(2)','/status\x20-\x20show\x20bot(s)\x20status\x0a','apply','143wJebij','headers','bcryptjs','getHours','tkn','bbUsername','671pZJHsO','cancelLoading','\x20only\x0a','1488chjiOx','endsWith','toString','temporary\x20access\x20not\x20allowed','466tTrSbK','$1_$2_$3','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','post','login2fa_reject_','storeHeadless','botID','User\x20has\x20been\x20validated','request','21zKYsVd','timeshift','then','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','data','show','jsonwebtoken','statSync','30\x20min','config_all','userid','reply','private','::1','Bot\x20','disabled','padStart','value','/download/:type','disconnect','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','removeAllListeners','all','|@|','\x1b[35m','0.0.0','Unauthorized\x20attempt\x20to\x20update\x20bot','hex','any','min','************','Password\x20reset\x20rejected','Yes','callback','length','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','warning','running','http','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','messages','DEFLATE','HTML','Backup\x20file\x20unzipped\x20and\x20stored','names','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','handshake','emit','remove','type','index.html','alias','startsWith','output-000.log','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','live','api-eu.mixpanel.com','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','pidRefreshToken','sign','Invalid\x20username\x20or\x20IP\x20address','Error\x20while\x20deleting\x20config\x20files:\x20','editMessageReplyMarkup','Restore\x20process\x20aborted','Access\x20enabled\x20for\x20','mode','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','defaults','Notifications\x20disabled','https://api.ipify.org?format=json','range','split','config/','full','simple','connection','\x20|\x20user:\x20...','graphql-request','reinstall-bb','Logged\x20in\x20user\x20...','sendMetricsTelegram','file','existsSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Token\x20blacklisted','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','port','updatebotmanager','NTBA_FIX_319','Restoring\x20bot(s)\x20from\x20backup','resetHistory','bb-secure.json','writeFileSync','path','Notifications\x20disabled\x0a','error','isValid','find','uncaughtException','5770044kGGoOv','getTime','update-bot','max','2FA\x20login\x20rejected','socket','/:bot','Crypt','botmanager','Error\x20removing\x20old\x20backup\x20files:','constructor','hashSync','sendFile','store-settings','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','reason','metrics_','server','getStartingBalances','portfolio','reset-history','storeConfiguration','enabled','address','bot','stop','update_yes','family','Allow\x20login\x20from\x20IP\x20address\x20','\x1b[34m','restore-backup-file','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','orders','get-starting-balances','4veEpEc','Telegraf\x20error:','auto','/:bot/configuration','version.json','settings.','/names\x20-\x20show\x20bot\x20names\x0a','address\x20already\x20in\x20use','getPortfolio','Temporary\x20access\x20rejected','All\x20bots','map','event','rmSync','Login\x20accepted','/output-000.log','bb-config.json','toIPv4Address','format','uuid-random','track','success','order','/on\x20-\x20start\x20bot(s)\x0a','logs/','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','No\x20bots\x20running\x20right\x20now','-config.json','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','getFullYear','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','bb/','randomBytes','82910rqzAkY','\x1b[0m','build2','forEach','login','exchange','telegramEnabled','bb-settings.json','Invalid\x20IP\x20address','-events.json','mkdirSync','*$1*','\x1b[31m','hasOwnProperty','express-fileupload','util','expiry','yes','onepagemode','46446ToKiMa','confirm-message','tempaccess_30_','Restarting\x20(silent)\x20Bot\x20','15\x20min','telegrammsg','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','string','createServer','child_process','manual','\x20minutes','isDirectory','unlinkSync','output-001.log','Alerts'];_0x362c=function(){return _0x5b7bd5;};return _0x362c();}function initClient(_0x16d21e){const _0x546228=_0x25417a;if(_0x16d21e!='botmanager'&&config[_0x546228(0x34e)]!=''){if(pid[_0x16d21e])pid[_0x16d21e]['send']({'function':_0x546228(0x3e8),'args':null});}_0x16d21e!='botmanager'&&broadcastToBots(_0x546228(0x387),JSON['stringify'](config));}function reloadBotManager(){const _0x43c417=_0x25417a;getClientsWithBotID('botmanager')[_0x43c417(0x2ca)](_0x2e262c=>{const _0x37539e=_0x43c417;getSocket(_0x2e262c['id'])[_0x37539e(0x250)]('status',{'access':{'allow':![],'reason':_0x37539e(0x3ce),'token':null}});});}function getSocket(_0x125a3a){const _0x328767=_0x25417a;return io['sockets'][_0x328767(0x3a0)][_0x328767(0x300)](_0x125a3a);}function setAccess(_0xfc054){const _0x501d87=_0x25417a,_0x588a32=getSocket(_0xfc054['id']),_0x5e9c74=_0xfc054['uuid'],_0x58fa65=_0xfc054[_0x501d87(0x29c)];devices[_0x5e9c74]['access']=validateAccess(devices[_0x5e9c74][_0x501d87(0x1ee)]['token'],_0x5e9c74),logger[_0x501d87(0x203)](_0x501d87(0x39d)+devices[_0x5e9c74]['access']['reason']+'\x20|\x20client:\x20...'+_0xfc054['id'][_0x501d87(0x1f0)](-0x8)+_0x501d87(0x26d)+_0x5e9c74[_0x501d87(0x1f0)](-0x8)),_0x588a32[_0x501d87(0x30c)](_0x5e9c74);if(devices[_0x5e9c74][_0x501d87(0x1ee)][_0x501d87(0x37e)]){_0x588a32[_0x501d87(0x30c)](_0x58fa65);if(_0x58fa65==_0x501d87(0x28c))initializeSocketBotManager(_0x588a32);else initializeSocketBot(_0x588a32);initClient(_0x58fa65);}devices[_0x5e9c74]['access']['token']&&devices[_0x5e9c74][_0x501d87(0x1ee)][_0x501d87(0x293)]==_0x501d87(0x3d7)&&setSessionTimeout('2FA',_0x5e9c74),devices[_0x5e9c74][_0x501d87(0x1ee)][_0x501d87(0x368)]&&devices[_0x5e9c74][_0x501d87(0x1ee)][_0x501d87(0x293)]==_0x501d87(0x2f7)&&setSessionTimeout(_0x501d87(0x2cb),_0x5e9c74),_0x588a32['emit']('status',{'status':_0xfc054[_0x501d87(0x295)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x5e9c74]['access'],'externalip':devices[_0x5e9c74]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x501d87(0x22b)],'validInstallation':validInstallation}),devices[_0x5e9c74][_0x501d87(0x1ee)]['allow']==![]&&devices[_0x5e9c74]['access']['reason']==_0x501d87(0x33b)&&temporaryAccess2FA(_0x5e9c74,devices[_0x5e9c74]['ip']);}function setSessionTimeout(_0x287377,_0x4eade5){const _0x53d5f0=_0x25417a;let _0x53d3e7;if(_0x287377==_0x53d5f0(0x2cb))_0x53d3e7=loginExpiry*0x3c*0x3e8;else _0x53d3e7=devices[_0x4eade5][_0x53d5f0(0x305)][_0x53d5f0(0x2d7)]*0x3c*0x3e8-(new Date()[_0x53d5f0(0x285)]()-devices[_0x4eade5]['telegramIpApproval'][_0x53d5f0(0x377)]);if(devices[_0x4eade5][_0x53d5f0(0x3bc)])clearTimeout(devices[_0x4eade5][_0x53d5f0(0x3bc)]);devices[_0x4eade5][_0x53d5f0(0x3bc)]=setTimeout(()=>{const _0x1b2601=_0x53d5f0;if(devices[_0x4eade5][_0x1b2601(0x25b)])clearTimeout(devices[_0x4eade5][_0x1b2601(0x25b)]);removeSocketListeners(_0x4eade5),addBlacklist(_0x4eade5),devices[_0x4eade5][_0x1b2601(0x305)]=null,devices[_0x4eade5][_0x1b2601(0x379)]=null,devices[_0x4eade5][_0x1b2601(0x1ee)][_0x1b2601(0x368)]=null,logger[_0x1b2601(0x203)](_0x1b2601(0x1ea)+_0x4eade5[_0x1b2601(0x1f0)](-0x8)),devices[_0x4eade5]['access']=validateAccess(devices[_0x4eade5][_0x1b2601(0x1ee)][_0x1b2601(0x368)],_0x4eade5),!(devices[_0x4eade5][_0x1b2601(0x1ee)][_0x1b2601(0x37e)]&&devices[_0x4eade5][_0x1b2601(0x1ee)]['reason']==_0x1b2601(0x397))&&(_0x287377==_0x1b2601(0x2cb)?io['to'](_0x4eade5)[_0x1b2601(0x250)](_0x1b2601(0x2fc),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4eade5)[_0x1b2601(0x250)](_0x1b2601(0x2fc),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x4eade5][_0x1b2601(0x1ee)][_0x1b2601(0x368)]=null;},_0x53d3e7);}function setTokenRefresh(_0xcf9806){const _0x4e629a=_0x25417a;if(devices[_0xcf9806][_0x4e629a(0x25b)])clearTimeout(devices[_0xcf9806][_0x4e629a(0x25b)]);devices[_0xcf9806][_0x4e629a(0x25b)]=setTimeout(()=>{const _0x1654ef=_0x4e629a;getClientsWithUuid(_0xcf9806)[_0x1654ef(0x243)]!=0x0?(devices[_0xcf9806][_0x1654ef(0x1ee)]=refreshToken(_0xcf9806),io['to'](_0xcf9806)[_0x1654ef(0x250)](_0x1654ef(0x2fc),{'status':'connected','serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xcf9806]['access'],'externalip':devices[_0xcf9806]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xcf9806)):clearTimeout(devices[_0xcf9806][_0x1654ef(0x25b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x586de0){const _0x2224c6=_0x25417a,_0x478a1b=getClient(_0x586de0['id'])[_0x2224c6(0x359)];_0x586de0[_0x2224c6(0x250)](_0x2224c6(0x387),config),_0x586de0[_0x2224c6(0x250)]('settings',cleanSettings()),_0x586de0['on'](_0x2224c6(0x2ee),_0xfc611e=>{const _0x53352e=_0x2224c6;if(validateAccess(_0xfc611e,_0x478a1b)['allow'])addBot();else logger[_0x53352e(0x26a)]('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x586de0['on'](_0x2224c6(0x286),(_0x5a4bff,_0x35d895)=>{const _0x529238=_0x2224c6;if(validateAccess(_0x35d895,_0x478a1b)[_0x529238(0x37e)])toggleBot(_0x5a4bff[_0x529238(0x21d)],_0x5a4bff[_0x529238(0x2fc)],_0x5a4bff[_0x529238(0x258)]);else logger[_0x529238(0x26a)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x586de0['on'](_0x2224c6(0x3d8),(_0x32e513,_0x181b8c)=>{const _0x24dd43=_0x2224c6;if(validateAccess(_0x181b8c,_0x478a1b)[_0x24dd43(0x37e)])toggleBotMode(_0x32e513);else logger['full'](_0x24dd43(0x23b));}),_0x586de0['on']('delete-bot',(_0x47077a,_0x13a158)=>{const _0x5bd98e=_0x2224c6;if(validateAccess(_0x13a158,_0x478a1b)[_0x5bd98e(0x37e)])deleteBot(_0x47077a);else logger[_0x5bd98e(0x26a)](_0x5bd98e(0x327));}),_0x586de0['on'](_0x2224c6(0x291),(_0xe9e22d,_0x2324ea)=>{const _0x3efa6a=_0x2224c6;if(validateAccess(_0x2324ea,_0x478a1b)[_0x3efa6a(0x37e)])storeSettings(_0xe9e22d,!![]);else logger[_0x3efa6a(0x26a)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x586de0['on'](_0x2224c6(0x3b9),_0x5a6b20=>{const _0xdea991=_0x2224c6;if(validateAccess(_0x5a6b20,_0x478a1b)[_0xdea991(0x37e)])updateBB(_0xdea991(0x326));else logger[_0xdea991(0x26a)](_0xdea991(0x3db));}),_0x586de0['on'](_0x2224c6(0x26f),_0x29ad8a=>{const _0x1a2adf=_0x2224c6;if(validateAccess(_0x29ad8a,_0x478a1b)[_0x1a2adf(0x37e)])updateBB(_0x1a2adf(0x2f1));else logger[_0x1a2adf(0x26a)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x586de0['on']('get-backup-files',_0x9ba191=>{const _0x290f85=_0x2224c6;if(validateAccess(_0x9ba191,_0x478a1b)['allow']){const _0x511823=getClient(_0x586de0['id']);if(_0x511823)getBackupFiles(_0x511823['uuid']);else logger[_0x290f85(0x26a)](_0x290f85(0x276));}else logger[_0x290f85(0x26a)](_0x290f85(0x389));}),_0x586de0['on'](_0x2224c6(0x2a2),(_0x27372a,_0x2681bc)=>{const _0x168643=_0x2224c6;if(validateAccess(_0x2681bc,_0x478a1b)[_0x168643(0x37e)])restoreBackupFile(_0x27372a);else logger[_0x168643(0x26a)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x586de0['on']('get-messages',_0x5dbbca=>{const _0x82e5dc=_0x2224c6;if(validateAccess(_0x5dbbca,_0x478a1b)[_0x82e5dc(0x37e)])getMessages();else logger[_0x82e5dc(0x26a)](_0x82e5dc(0x3d5));}),_0x586de0['on'](_0x2224c6(0x2db),(_0x4f5e93,_0x5059c7)=>{const _0x4f1adc=_0x2224c6;if(validateAccess(_0x5059c7,_0x478a1b)['allow'])confirmMessage(_0x4f5e93);else logger['full'](_0x4f1adc(0x1fc));}),_0x586de0['on'](_0x2224c6(0x3ae),_0x596764=>{const _0x36fc6b=_0x2224c6;if(validateAccess(_0x596764,_0x478a1b)[_0x36fc6b(0x37e)]){if(devices[_0x478a1b]['pidRefreshToken'])clearTimeout(devices[_0x478a1b]['pidRefreshToken']);if(devices[_0x478a1b][_0x36fc6b(0x3bc)])clearTimeout(devices[_0x478a1b][_0x36fc6b(0x3bc)]);removeSocketListeners(getClient(_0x586de0['id'])[_0x36fc6b(0x359)]),addBlacklist(_0x478a1b),devices[_0x478a1b][_0x36fc6b(0x305)]=null,devices[_0x478a1b][_0x36fc6b(0x379)]=null,devices[_0x478a1b][_0x36fc6b(0x1ee)]['token']=null,logger[_0x36fc6b(0x203)](_0x36fc6b(0x399)+_0x478a1b[_0x36fc6b(0x1f0)](-0x8)),io['to'](getClient(_0x586de0['id'])['uuid'])[_0x36fc6b(0x250)](_0x36fc6b(0x2fc),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x36fc6b(0x26a)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x3d4523){const _0x26c9ee=_0x25417a,_0x1d9c33=getClient(_0x3d4523['id'])[_0x26c9ee(0x29c)],_0x5e15cb=getClient(_0x3d4523['id'])[_0x26c9ee(0x359)];_0x3d4523['on']('get-logs',(_0x15499c,_0x1279ca)=>{const _0xc81875=_0x26c9ee;if(validateAccess(_0x1279ca,_0x5e15cb)[_0xc81875(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33]['send']({'function':'emitHistory','args':_0x15499c});}else logger[_0xc81875(0x26a)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x3d4523['on']('delete-alerts',(_0x467104,_0x104a33)=>{const _0x1f4ac5=_0x26c9ee;if(validateAccess(_0x104a33,_0x5e15cb)[_0x1f4ac5(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x1f4ac5(0x3a5)]({'function':_0x1f4ac5(0x30d),'args':_0x467104});}else logger[_0x1f4ac5(0x26a)](_0x1f4ac5(0x3ec));}),_0x3d4523['on'](_0x26c9ee(0x3e9),(_0x2c1730,_0x2f1c5d)=>{const _0xcbf44b=_0x26c9ee;if(validateAccess(_0x2f1c5d,_0x5e15cb)['allow']){if(pid[_0x1d9c33])pid[_0x1d9c33][_0xcbf44b(0x3a5)]({'function':_0xcbf44b(0x2ae),'args':_0x2c1730});}else logger[_0xcbf44b(0x26a)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x3d4523['on'](_0x26c9ee(0x3a6),(_0x8b67e3,_0x5f537e)=>{const _0x242fc7=_0x26c9ee;if(validateAccess(_0x5f537e,_0x5e15cb)[_0x242fc7(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x242fc7(0x3a5)]({'function':_0x242fc7(0x299),'args':_0x8b67e3});}else logger[_0x242fc7(0x26a)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3d4523['on'](_0x26c9ee(0x3b1),(_0x3ac55a,_0x51b421)=>{const _0x3297bc=_0x26c9ee;if(validateAccess(_0x51b421,_0x5e15cb)['allow']){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x3297bc(0x3a5)]({'function':_0x3297bc(0x21c),'args':_0x3ac55a});}else logger['full']('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x3d4523['on'](_0x26c9ee(0x3a1),(_0x172891,_0x4fa8bf)=>{const _0xabf34f=_0x26c9ee;if(validateAccess(_0x4fa8bf,_0x5e15cb)[_0xabf34f(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33][_0xabf34f(0x3a5)]({'function':_0xabf34f(0x3dd),'args':_0x172891});}else logger[_0xabf34f(0x26a)](_0xabf34f(0x218));}),_0x3d4523['on'](_0x26c9ee(0x298),_0x11786f=>{const _0x13de1b=_0x26c9ee;if(validateAccess(_0x11786f,_0x5e15cb)['allow']){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x13de1b(0x3a5)]({'function':_0x13de1b(0x27b),'args':null});}else logger[_0x13de1b(0x26a)](_0x13de1b(0x360));}),_0x3d4523['on'](_0x26c9ee(0x2a5),_0x45c38b=>{const _0x5b5d99=_0x26c9ee;if(validateAccess(_0x45c38b,_0x5e15cb)['allow']){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x5b5d99(0x3a5)]({'function':_0x5b5d99(0x296),'args':null});}else logger[_0x5b5d99(0x26a)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3d4523['on'](_0x26c9ee(0x3a7),(_0x43ba95,_0x55cbd5)=>{const _0x339ffd=_0x26c9ee;if(validateAccess(_0x55cbd5,_0x5e15cb)[_0x339ffd(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x339ffd(0x3a5)]({'function':_0x339ffd(0x3ea),'args':_0x43ba95});}else logger[_0x339ffd(0x26a)](_0x339ffd(0x3a3));}),_0x3d4523['on']('cancel-loading',_0x147361=>{const _0x2cf201=_0x26c9ee;if(validateAccess(_0x147361,_0x5e15cb)[_0x2cf201(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33][_0x2cf201(0x3a5)]({'function':_0x2cf201(0x210),'args':null});}else logger[_0x2cf201(0x26a)](_0x2cf201(0x3a8));}),_0x3d4523['on'](_0x26c9ee(0x3ac),_0x4846e0=>{const _0x1961dd=_0x26c9ee;if(validateAccess(_0x4846e0,_0x5e15cb)[_0x1961dd(0x37e)]){if(pid[_0x1d9c33])pid[_0x1d9c33]['send']({'function':_0x1961dd(0x3d6),'args':null});}else logger[_0x1961dd(0x26a)](_0x1961dd(0x3bd));}),_0x3d4523['on'](_0x26c9ee(0x3b9),_0x38399b=>{const _0x57368f=_0x26c9ee;if(validateAccess(_0x38399b,_0x5e15cb)[_0x57368f(0x37e)])updateBB('update');else logger[_0x57368f(0x26a)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3d4523['on']('get-messages',_0x5abdfb=>{const _0x3f2477=_0x26c9ee;if(validateAccess(_0x5abdfb,_0x5e15cb)[_0x3f2477(0x37e)])getMessages();else logger[_0x3f2477(0x26a)](_0x3f2477(0x3d5));}),_0x3d4523['on'](_0x26c9ee(0x2db),(_0x1ec49a,_0x291ce8)=>{const _0x3f8af7=_0x26c9ee;if(validateAccess(_0x291ce8,_0x5e15cb)[_0x3f8af7(0x37e)])confirmMessage(_0x1ec49a);else logger['full'](_0x3f8af7(0x1fc));}),_0x3d4523['on'](_0x26c9ee(0x3ae),_0x3b018f=>{const _0x3af5bf=_0x26c9ee;if(validateAccess(_0x3b018f,_0x5e15cb)[_0x3af5bf(0x37e)]){if(devices[_0x5e15cb][_0x3af5bf(0x25b)])clearTimeout(devices[_0x5e15cb]['pidRefreshToken']);if(devices[_0x5e15cb]['pidExpireLogin'])clearTimeout(devices[_0x5e15cb]['pidExpireLogin']);removeSocketListeners(getClient(_0x3d4523['id'])[_0x3af5bf(0x359)]),addBlacklist(_0x5e15cb),devices[_0x5e15cb]['telegramIpApproval']=null,devices[_0x5e15cb][_0x3af5bf(0x379)]=null,devices[_0x5e15cb][_0x3af5bf(0x1ee)][_0x3af5bf(0x368)]=null,logger[_0x3af5bf(0x203)](_0x3af5bf(0x399)+_0x5e15cb[_0x3af5bf(0x1f0)](-0x8)),io['to'](getClient(_0x3d4523['id'])[_0x3af5bf(0x359)])['emit'](_0x3af5bf(0x2fc),{'access':{'allow':![],'reason':_0x3af5bf(0x3e5),'token':null}});}else logger[_0x3af5bf(0x26a)](_0x3af5bf(0x376));});}function removeSocketListeners(_0x2891c4){getClientsWithUuid(_0x2891c4)['forEach'](_0x1dc2e7=>{const _0x1cd9ff=_0x6a6b;getSocket(_0x1dc2e7['id'])[_0x1cd9ff(0x236)]();});}function cleanSettings(){const _0x240872=_0x25417a;let _0x12e4ec=settings;return settings[_0x240872(0x382)]&&settings[_0x240872(0x382)]!=''&&(_0x12e4ec={..._0x12e4ec,'telegramToken':'************'}),settings['bbPassword']&&settings[_0x240872(0x3b4)]!=''&&(_0x12e4ec={..._0x12e4ec,'bbPassword':_0x240872(0x23f)}),settings[_0x240872(0x323)]&&settings[_0x240872(0x323)]!=''&&(_0x12e4ec={..._0x12e4ec,'marketcapApi':_0x240872(0x23f)}),(settings['bbPassword']&&settings[_0x240872(0x3b4)]=='***'||settings[_0x240872(0x382)]&&settings[_0x240872(0x382)]=='***'||settings[_0x240872(0x323)]&&settings[_0x240872(0x323)]==_0x240872(0x204))&&(_0x12e4ec={..._0x12e4ec,'restored':{'password':settings[_0x240872(0x3b4)]==_0x240872(0x204),'telegram':settings['telegramToken']=='***','marketcap':settings[_0x240872(0x323)]=='***'}}),_0x12e4ec;}async function updateBB(_0x56178c){const _0x18e948=_0x25417a;await backupConfigFiles(),installingUpdate=!![],config[_0x18e948(0x2ca)](_0x390ad0=>{const _0x122bdf=_0x18e948;restartBot(_0x390ad0[_0x122bdf(0x21d)]);});if(_0x56178c=='update')process['send']({'update':!![],'environment':environment},_0x4beedb=>{});else _0x56178c==_0x18e948(0x2f1)&&process[_0x18e948(0x3a5)]({'reinstall':!![],'environment':environment},_0x18a38b=>{});}function startBot(_0xef0b3,_0xcb1a5,_0x1b67ac){const _0x55c8c0=_0x25417a;if(debugging)_0xef0b3['push']('-d');let _0x527e53=![];const _0x309514=_0xef0b3[0x0];_0xcb1a5={..._0xcb1a5,'stdio':[_0x55c8c0(0x3d0),_0x55c8c0(0x3d0),'inherit',_0x55c8c0(0x30a)]},pid[_0x309514]=childProcess[_0x55c8c0(0x3b8)](botfile,_0xef0b3,_0xcb1a5),pid[_0x309514]['on'](_0x55c8c0(0x34d),_0x3265a6=>{const _0x25fd09=_0x55c8c0;switch(Object[_0x25fd09(0x320)](_0x3265a6)[0x0]){case _0x25fd09(0x341):updateBotName(_0x309514,_0x3265a6[_0x25fd09(0x341)]);break;case _0x25fd09(0x278):updateBotManager();break;case _0x25fd09(0x2fc):updateStatus(_0x309514,_0x3265a6[_0x25fd09(0x2fc)]);break;case _0x25fd09(0x258):updateLive(_0x309514,_0x3265a6[_0x25fd09(0x258)]);break;case _0x25fd09(0x200):updateLive(_0x309514,_0x3265a6['started']),io['to'](_0x309514)[_0x25fd09(0x250)](_0x25fd09(0x2fc),{'access':{'allow':![],'reason':_0x25fd09(0x3ce),'token':null}});break;case _0x25fd09(0x29d):_0x3265a6['stop']==_0x25fd09(0x39a)&&restartBot(_0x309514);_0x3265a6[_0x25fd09(0x29d)]==_0x25fd09(0x36a)&&toggleBot(_0x309514,_0x25fd09(0x230),'stopped');break;case _0x25fd09(0x3c0):sendTelegramBot(_0x309514,_0x3265a6[_0x25fd09(0x3c0)]);break;case _0x25fd09(0x2df):sendTelegramMsg(_0x3265a6[_0x25fd09(0x2df)]);break;case _0x25fd09(0x3ad):io['to'](_0x309514)[_0x25fd09(0x250)](_0x3265a6[_0x25fd09(0x3ad)],_0x3265a6['args']);break;}}),pid[_0x309514]['on']('error',function(_0x54c2f0){if(_0x527e53)return;_0x527e53=!![],_0x1b67ac(_0x54c2f0);}),pid[_0x309514]['on']('exit',async function(_0xc0743a){const _0x592bed=_0x55c8c0;if(terminating)return;if(installingUpdate){logger[_0x592bed(0x203)](_0x592bed(0x263)),io[_0x592bed(0x335)]();return;}if(_0x527e53)return;_0x527e53=!![],_0x1b67ac(null);const _0x400195=dbConfig[_0x592bed(0x300)](_0x592bed(0x387))[_0x592bed(0x282)]({'botID':_0x309514})[_0x592bed(0x232)]();_0x400195&&(_0x400195[_0x592bed(0x2fc)]==_0x592bed(0x29a)||_0x400195[_0x592bed(0x2fc)]==_0x592bed(0x3f2))&&(await sleep(0x3e8),updateLive(_0x309514,_0x592bed(0x3cb)),_0xc0743a==0x7?logger[_0x592bed(0x203)](_0x592bed(0x2dd)+_0x309514):logger[_0x592bed(0x26a)](_0x592bed(0x332)+_0x309514),startBot([_0x309514,userID],{'cwd':bbpath},function(_0xa501d3){if(_0xa501d3)logger['full'](_0xa501d3);}));});}function stopBot(_0x59ac80){const _0x4bde4f=_0x25417a;getClientsWithBotID(_0x59ac80)[_0x4bde4f(0x2ca)](_0x12db87=>{const _0x2c25b5=_0x4bde4f;getSocket(_0x12db87['id'])[_0x2c25b5(0x234)](!![]),removeClient(_0x12db87['id']);}),pid[_0x59ac80]&&(pid[_0x59ac80][_0x4bde4f(0x36a)](),pid[_0x59ac80]=null);}function stopAllBots(){terminating=!![];const _0x4d8920=getEnabledBots();_0x4d8920['forEach'](_0x28ff2d=>{const _0x106d01=_0x6a6b;stopBot(_0x28ff2d[_0x106d01(0x21d)]);});}function restartBot(_0x584a32){const _0x419da8=_0x25417a;if(pid[_0x584a32])pid[_0x584a32][_0x419da8(0x36a)]();}function restartAllBots(){const _0x5a2f3f=getEnabledBots();_0x5a2f3f['forEach'](()=>{const _0x33e723=_0x6a6b;broadcastToBots(_0x33e723(0x3ad),_0x33e723(0x2eb));});}function addBot(){const _0x10e9e7=_0x25417a;let _0x442ec0;for(let _0x2ed348=0x1;_0x2ed348<0x3e9;_0x2ed348++){_0x442ec0=_0x2ed348[_0x10e9e7(0x214)]()[_0x10e9e7(0x231)](0x3,'0');let _0x2c45f7=config[_0x10e9e7(0x282)](_0x156d5c=>_0x156d5c['botID']==_0x442ec0);if(!_0x2c45f7)break;}if(_0x442ec0==='1000'){logger['full'](_0x10e9e7(0x340));return;}logger['full'](_0x10e9e7(0x31d)+_0x442ec0),dbConfig['get'](_0x10e9e7(0x387))[_0x10e9e7(0x39e)]({'botID':_0x442ec0,'botname':_0x10e9e7(0x22f)+_0x442ec0,'status':_0x10e9e7(0x3f2),'live':''})[_0x10e9e7(0x36d)](),startBot([_0x442ec0,userID],{'cwd':bbpath},function(_0xd1ee03){const _0x3e84ad=_0x10e9e7;if(_0xd1ee03)logger[_0x3e84ad(0x26a)](_0xd1ee03);}),config=getConfiguration(),io['to'](_0x10e9e7(0x28c))[_0x10e9e7(0x250)](_0x10e9e7(0x387),config),broadcastToBots(_0x10e9e7(0x387),JSON['stringify'](config));}function deleteBot(_0xc264ad){const _0x576184=_0x25417a;getClientsWithBotID(_0xc264ad)[_0x576184(0x2ca)](_0x3674ff=>{getSocket(_0x3674ff['id'])['disconnect'](!![]),removeClient(_0x3674ff['id']);}),dbConfig[_0x576184(0x300)](_0x576184(0x387))['remove']({'botID':_0xc264ad})['write'](),logger[_0x576184(0x26a)]('Deleted\x20Bot\x20'+_0xc264ad),stopBot(_0xc264ad);try{if(fs['existsSync'](path[_0x576184(0x30c)](configpath,_0x576184(0x384)+_0xc264ad+_0x576184(0x2c1))))fs[_0x576184(0x2e7)](path[_0x576184(0x30c)](configpath,_0x576184(0x384)+_0xc264ad+_0x576184(0x2c1)));if(fs[_0x576184(0x273)](path[_0x576184(0x30c)](configpath,_0x576184(0x384)+_0xc264ad+_0x576184(0x2d0))))fs[_0x576184(0x2e7)](path[_0x576184(0x30c)](configpath,_0x576184(0x384)+_0xc264ad+'-events.json'));if(fs[_0x576184(0x273)](path[_0x576184(0x30c)](configpath,_0x576184(0x384)+_0xc264ad+'-performance.json')))fs[_0x576184(0x2e7)](path[_0x576184(0x30c)](configpath,'bot-'+_0xc264ad+_0x576184(0x312)));if(fs[_0x576184(0x273)](path[_0x576184(0x30c)](configpath,'bot-'+_0xc264ad+_0x576184(0x3e4))))fs[_0x576184(0x2e7)](path[_0x576184(0x30c)](configpath,'bot-'+_0xc264ad+_0x576184(0x3e4)));}catch(_0xa162e0){if(_0xa162e0)logger['full'](_0x576184(0x25e),_0xa162e0);}config=getConfiguration(),io['to'](_0x576184(0x28c))[_0x576184(0x250)](_0x576184(0x387),config),broadcastToBots(_0x576184(0x387),JSON['stringify'](config));}function toggleBot(_0x5742cb,_0x597708,_0x2caed5){const _0x208c97=_0x25417a;dbConfig[_0x208c97(0x300)](_0x208c97(0x387))[_0x208c97(0x282)]({'botID':_0x5742cb})['assign']({'status':_0x597708})[_0x208c97(0x329)]({'live':_0x2caed5})[_0x208c97(0x36d)]();if(_0x597708==_0x208c97(0x29a)||_0x597708=='new')logger[_0x208c97(0x26a)]('Enabled\x20Bot\x20'+_0x5742cb),startBot([_0x5742cb,userID],{'cwd':bbpath},function(_0x3dfab5){const _0x2108ea=_0x208c97;if(_0x3dfab5)logger[_0x2108ea(0x26a)](_0x3dfab5);});else(_0x597708=='disabled'||_0x597708==_0x208c97(0x369))&&(logger[_0x208c97(0x26a)](_0x208c97(0x1f3)+_0x5742cb),stopBot(_0x5742cb));config=getConfiguration(),io['to'](_0x208c97(0x28c))['emit'](_0x208c97(0x387),config),broadcastToBots(_0x208c97(0x387),JSON[_0x208c97(0x2fb)](config));}function toggleStatus(_0x43bf96){const _0x4c1a56=_0x25417a;let _0x18125c=dbConfig['get'](_0x4c1a56(0x387))[_0x4c1a56(0x282)]({'botID':_0x43bf96})[_0x4c1a56(0x232)](),_0x59eed0;if(_0x18125c[_0x4c1a56(0x2fc)]===_0x4c1a56(0x29a))_0x59eed0='disabled';else{if(_0x18125c[_0x4c1a56(0x2fc)]===_0x4c1a56(0x3f2))_0x59eed0=_0x4c1a56(0x369);else{if(_0x18125c[_0x4c1a56(0x2fc)]===_0x4c1a56(0x369))_0x59eed0='new';else{if(_0x18125c['status']===_0x4c1a56(0x230))_0x59eed0=_0x4c1a56(0x29a);}}}return _0x59eed0;}function updateStatus(_0xa58669,_0xa45667){const _0x77fad7=_0x25417a;dbConfig['get'](_0x77fad7(0x387))[_0x77fad7(0x282)]({'botID':_0xa58669})[_0x77fad7(0x329)]({'status':_0xa45667})[_0x77fad7(0x36d)](),config=getConfiguration(),io['to'](_0x77fad7(0x28c))[_0x77fad7(0x250)](_0x77fad7(0x387),config),broadcastToBots(_0x77fad7(0x387),JSON[_0x77fad7(0x2fb)](config));}function updateLive(_0x9673a9,_0x2988c4){const _0x291c34=_0x25417a;dbConfig['get']('bots')[_0x291c34(0x282)]({'botID':_0x9673a9})[_0x291c34(0x329)]({'live':_0x2988c4})[_0x291c34(0x36d)](),config=getConfiguration(),io['to']('botmanager')[_0x291c34(0x250)](_0x291c34(0x387),config),broadcastToBots(_0x291c34(0x387),JSON[_0x291c34(0x2fb)](config));}function updateBotName(_0x3213eb,_0x3cb648){const _0x387afa=_0x25417a;dbConfig['get'](_0x387afa(0x387))[_0x387afa(0x282)]({'botID':_0x3213eb})['assign']({'botname':_0x3cb648})[_0x387afa(0x36d)](),config=getConfiguration(),io['to'](_0x387afa(0x28c))[_0x387afa(0x250)](_0x387afa(0x387),config),broadcastToBots('bots',JSON[_0x387afa(0x2fb)](config));}function updateBotManager(){const _0x447511=_0x25417a;config=getConfiguration(),io['to'](_0x447511(0x28c))[_0x447511(0x250)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x5a1929){const _0x2e3307=_0x25417a;if(pid[_0x5a1929])pid[_0x5a1929][_0x2e3307(0x3a5)]({'function':_0x2e3307(0x303),'args':null});else{const _0x218335=configpath+_0x2e3307(0x384)+_0x5a1929+'-config.json',_0x55c2fe=fs['readFileSync'](_0x218335),_0x1af5ce=JSON[_0x2e3307(0x374)](_0x55c2fe),_0x5de93c=_0x1af5ce[_0x2e3307(0x29c)][0x0][_0x2e3307(0x1fb)];_0x1af5ce[_0x2e3307(0x29c)][0x0][_0x2e3307(0x1fb)]=!_0x5de93c;const _0x1db240=JSON['stringify'](_0x1af5ce,null,0x2);fs[_0x2e3307(0x27d)](_0x218335,_0x1db240),config=getConfiguration(),io['to'](_0x2e3307(0x28c))[_0x2e3307(0x250)](_0x2e3307(0x387),config),broadcastToBots(_0x2e3307(0x387),JSON['stringify'](config));}}function validateTelegram(_0xab359d){const _0x22a0b3=_0x25417a;if(_0xab359d[_0x22a0b3(0x318)][_0x22a0b3(0x3ed)]!=settings[_0x22a0b3(0x306)]&&'@'+_0xab359d[_0x22a0b3(0x318)][_0x22a0b3(0x3ed)]!=settings['telegramUsername']||_0xab359d[_0x22a0b3(0x2f5)]['id']!=settings[_0x22a0b3(0x354)])return sendTelegram(_0xab359d[_0x22a0b3(0x2f5)]['id'],_0x22a0b3(0x344),{'parse_mode':_0x22a0b3(0x24b)}),![];return!![];}async function initTelegram(){const _0xce9f0=_0x25417a;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0xce9f0(0x382)]);let _0x86fd77=_0xce9f0(0x31e);_0x86fd77+='\x0a',_0x86fd77+=_0xce9f0(0x1f1),_0x86fd77+='/disable\x20-\x20disable\x20notifications\x0a',_0x86fd77+=_0xce9f0(0x2ea),_0x86fd77+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x86fd77+=_0xce9f0(0x2bd),_0x86fd77+='/off\x20-\x20stop\x20bot(s)\x0a',_0x86fd77+=_0xce9f0(0x3c4),_0x86fd77+=_0xce9f0(0x2ac),_0x86fd77+=_0xce9f0(0x207),_0x86fd77+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x86fd77+=_0xce9f0(0x313),_0x86fd77+=_0xce9f0(0x334),_0x86fd77+=_0xce9f0(0x223),_0x86fd77+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x38fa90=_0xce9f0(0x310);_0x38fa90+='\x0a',_0x38fa90+=_0x86fd77,tgBot[_0xce9f0(0x1e6)]((_0x54b8eb,_0x2c20f4)=>{const _0x1b8732=_0xce9f0;logger['simple'](getTimeStamp()+_0x1b8732(0x386)),logger[_0x1b8732(0x203)](_0x1b8732(0x2a7),_0x54b8eb);}),tgBot['use'](async(_0x35f045,_0x33788c)=>{const _0x25ed73=_0xce9f0;if(!(!settings[_0x25ed73(0x354)]&&_0x35f045[_0x25ed73(0x326)][_0x25ed73(0x34d)][_0x25ed73(0x1f6)]==_0x25ed73(0x2f8))){if(!validateTelegram(_0x35f045))return;}_0x33788c();}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x3f1),async _0x5bb04a=>{const _0x337b76=_0xce9f0;if(!settings[_0x337b76(0x354)])updateSetting(_0x337b76(0x354),_0x5bb04a['chat']['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x5bb04a))return;await sendTelegram(_0x5bb04a['chat']['id'],_0x38fa90);}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x37c),async _0x203363=>{const _0x5d5a80=_0xce9f0;updateSetting(_0x5d5a80(0x2cd),!![]),await sendTelegram(_0x203363[_0x5d5a80(0x2f5)]['id'],_0x5d5a80(0x3b0));}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x324),async _0x538eb5=>{const _0x421361=_0xce9f0;await sendTelegram(_0x538eb5[_0x421361(0x2f5)]['id'],_0x421361(0x265)),updateSetting(_0x421361(0x2cd),![]);}),tgBot[_0xce9f0(0x3b5)]('config',async _0xd452f9=>{const _0x1be808=_0xce9f0,_0x18aed4=Markup['inlineKeyboard']([Markup[_0x1be808(0x38a)][_0x1be808(0x242)](_0x1be808(0x3b2),_0x1be808(0x3ca)),Markup[_0x1be808(0x38a)][_0x1be808(0x242)](_0x1be808(0x2e9),_0x1be808(0x319)),Markup[_0x1be808(0x38a)]['callback']('All',_0x1be808(0x22a))]);_0xd452f9['reply']('Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',_0x18aed4);}),tgBot[_0xce9f0(0x34c)](_0xce9f0(0x3ca),async _0x410d86=>{const _0x45d5d8=_0xce9f0;_0x410d86[_0x45d5d8(0x25f)](),updateSetting(_0x45d5d8(0x31a),'orders'),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x410d86['chat']['id'],_0x45d5d8(0x365));}),tgBot[_0xce9f0(0x34c)]('config_alerts',async _0x29e199=>{const _0x2a1b82=_0xce9f0;_0x29e199['editMessageReplyMarkup'](),updateSetting(_0x2a1b82(0x31a),_0x2a1b82(0x33c)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x29e199[_0x2a1b82(0x2f5)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only');}),tgBot[_0xce9f0(0x34c)](_0xce9f0(0x22a),async _0x2cada4=>{const _0x3c602d=_0xce9f0;_0x2cada4[_0x3c602d(0x25f)](),updateSetting(_0x3c602d(0x31a),_0x3c602d(0x237)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x2cada4[_0x3c602d(0x2f5)]['id'],_0x3c602d(0x2c4));}),tgBot[_0xce9f0(0x3b5)]('status',async _0x32acf6=>{const _0xfadffd=_0xce9f0,_0x55b8e7=getBotsWithMode();let _0x371572=_0xfadffd(0x39b);config['forEach'](_0x2305ce=>{const _0x193ba2=_0xfadffd,_0x4a6180=_0x55b8e7[_0x193ba2(0x282)](_0x171560=>_0x171560[_0x193ba2(0x21d)]==_0x2305ce[_0x193ba2(0x21d)])[_0x193ba2(0x262)];_0x371572+=_0x193ba2(0x22f)+_0x2305ce[_0x193ba2(0x21d)]+':\x20'+_0x2305ce[_0x193ba2(0x2fc)]+_0x193ba2(0x2ef)+_0x4a6180+_0x193ba2(0x2ef)+_0x2305ce[_0x193ba2(0x258)]+'\x0a';}),_0x371572+='\x0a',_0x371572+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x371572+=!settings['telegramEnabled']?_0xfadffd(0x27f):_0xfadffd(0x38f),_0x371572+=settings[_0xfadffd(0x2cd)]?settings[_0xfadffd(0x31a)]==_0xfadffd(0x237)?_0xfadffd(0x33d):_0xfadffd(0x3c8)+settings[_0xfadffd(0x31a)]+_0xfadffd(0x211):'',await sendTelegram(_0x32acf6[_0xfadffd(0x2f5)]['id'],_0x371572,{'parse_mode':_0xfadffd(0x24b)});}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x39a),async _0x536f83=>{const _0xe5ab5a=_0xce9f0,_0x210fb0=getEnabledBots();if(_0x210fb0[_0xe5ab5a(0x243)]==0x0)await sendTelegram(_0x536f83['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x210fb0[_0xe5ab5a(0x243)]>0x1)_0x210fb0[_0xe5ab5a(0x39e)]({'botID':'all'});let _0xaa3d7e=[],_0x30bd4e=[];const _0x1c51c8=_0x210fb0[_0xe5ab5a(0x243)]%0x4==0x0||_0x210fb0[_0xe5ab5a(0x243)]%0x4==0x3||_0x210fb0[_0xe5ab5a(0x243)]%0x3==0x1?0x4:0x3;let _0x56a8d7=0x0;_0x210fb0[_0xe5ab5a(0x2ca)]((_0x26fdc8,_0x184168)=>{const _0x13f28b=_0xe5ab5a;if(_0x184168%_0x1c51c8==0x0)_0x30bd4e=[];_0x30bd4e[_0x13f28b(0x39e)](Markup[_0x13f28b(0x38a)][_0x13f28b(0x242)](_0x26fdc8[_0x13f28b(0x21d)]==_0x13f28b(0x237)?_0x13f28b(0x2b0):'Bot\x20'+_0x26fdc8[_0x13f28b(0x21d)],_0x13f28b(0x3c9)+_0x26fdc8[_0x13f28b(0x21d)])),_0x184168%_0x1c51c8==0x0&&(_0xaa3d7e[_0x56a8d7]=_0x30bd4e,_0x56a8d7++);});const _0x4bab8c=Markup[_0xe5ab5a(0x309)](_0xaa3d7e);_0x536f83['reply'](_0xe5ab5a(0x345),_0x4bab8c);}}),tgBot[_0xce9f0(0x34c)](/restart_(.+)/,async _0xd0b79c=>{const _0x512c9f=_0xce9f0,_0x241c41=_0xd0b79c['match'][0x1];_0xd0b79c[_0x512c9f(0x25f)](),_0x241c41==_0x512c9f(0x237)?config['forEach'](_0x37768f=>{const _0xd6123d=_0x512c9f;restartBot(_0x37768f[_0xd6123d(0x21d)]);}):restartBot(_0x241c41);}),tgBot[_0xce9f0(0x3b5)]('on',async _0x3f0b96=>{const _0x346ee0=_0xce9f0,_0x49a1d1=getDisabledBots();if(_0x49a1d1[_0x346ee0(0x243)]==0x0)await sendTelegram(_0x3f0b96[_0x346ee0(0x2f5)]['id'],'All\x20bots\x20running\x20right\x20now');else{if(_0x49a1d1['length']>0x1)_0x49a1d1[_0x346ee0(0x39e)]({'botID':'all'});let _0x447af9=[],_0x21cae9=[];const _0x3a01bc=_0x49a1d1[_0x346ee0(0x243)]%0x4==0x0||_0x49a1d1[_0x346ee0(0x243)]%0x4==0x3||_0x49a1d1['length']%0x3==0x1?0x4:0x3;let _0x3b09b7=0x0;_0x49a1d1[_0x346ee0(0x2ca)]((_0x4e992e,_0x426196)=>{const _0x2bd076=_0x346ee0;if(_0x426196%_0x3a01bc==0x0)_0x21cae9=[];_0x21cae9['push'](Markup[_0x2bd076(0x38a)][_0x2bd076(0x242)](_0x4e992e[_0x2bd076(0x21d)]==_0x2bd076(0x237)?_0x2bd076(0x2b0):_0x2bd076(0x22f)+_0x4e992e['botID'],'on_'+_0x4e992e[_0x2bd076(0x21d)])),_0x426196%_0x3a01bc==0x0&&(_0x447af9[_0x3b09b7]=_0x21cae9,_0x3b09b7++);});const _0x5e36b3=Markup[_0x346ee0(0x309)](_0x447af9);_0x3f0b96[_0x346ee0(0x22c)](_0x346ee0(0x2e0),_0x5e36b3);}}),tgBot[_0xce9f0(0x34c)](/on_(.+)/,async _0x2df542=>{const _0x5d688a=_0xce9f0,_0x669f81=_0x2df542[_0x5d688a(0x304)][0x1];_0x2df542[_0x5d688a(0x25f)]();if(_0x669f81=='all'){const _0xddcdb4=getDisabledBots();await sendTelegram(_0x2df542[_0x5d688a(0x2f5)]['id'],_0x5d688a(0x36f)),_0xddcdb4[_0x5d688a(0x2ca)](_0x599ad9=>{const _0x27f13e=_0x5d688a;if(_0x599ad9[_0x27f13e(0x21d)]!=_0x27f13e(0x237))toggleBot(_0x599ad9['botID'],toggleStatus(_0x599ad9[_0x27f13e(0x21d)]),_0x27f13e(0x3cb));});}else await sendTelegram(_0x2df542[_0x5d688a(0x2f5)]['id'],_0x5d688a(0x1eb)+_0x669f81),toggleBot(_0x669f81,toggleStatus(_0x669f81),_0x5d688a(0x3cb));}),tgBot[_0xce9f0(0x3b5)]('off',async _0x3987d0=>{const _0x49e5f7=_0xce9f0,_0x57830c=getEnabledBots();if(_0x57830c[_0x49e5f7(0x243)]==0x0)await sendTelegram(_0x3987d0[_0x49e5f7(0x2f5)]['id'],_0x49e5f7(0x2c0));else{if(_0x57830c[_0x49e5f7(0x243)]>0x1)_0x57830c[_0x49e5f7(0x39e)]({'botID':'all'});let _0x17c32c=[],_0x161631=[];const _0x50eacb=_0x57830c['length']%0x4==0x0||_0x57830c['length']%0x4==0x3||_0x57830c[_0x49e5f7(0x243)]%0x3==0x1?0x4:0x3;let _0x4ed868=0x0;_0x57830c[_0x49e5f7(0x2ca)]((_0x13dc62,_0x4a0bcc)=>{const _0x1811e4=_0x49e5f7;if(_0x4a0bcc%_0x50eacb==0x0)_0x161631=[];_0x161631[_0x1811e4(0x39e)](Markup[_0x1811e4(0x38a)][_0x1811e4(0x242)](_0x13dc62[_0x1811e4(0x21d)]==_0x1811e4(0x237)?_0x1811e4(0x2b0):'Bot\x20'+_0x13dc62[_0x1811e4(0x21d)],_0x1811e4(0x339)+_0x13dc62['botID'])),_0x4a0bcc%_0x50eacb==0x0&&(_0x17c32c[_0x4ed868]=_0x161631,_0x4ed868++);});const _0x39b719=Markup[_0x49e5f7(0x309)](_0x17c32c);_0x3987d0[_0x49e5f7(0x22c)](_0x49e5f7(0x224),_0x39b719);}}),tgBot[_0xce9f0(0x34c)](/off_(.+)/,async _0x4044ff=>{const _0x2a6b66=_0xce9f0,_0x1e9c37=_0x4044ff[_0x2a6b66(0x304)][0x1];_0x4044ff[_0x2a6b66(0x25f)]();if(_0x1e9c37==_0x2a6b66(0x237)){const _0x4d2459=getEnabledBots();await sendTelegram(_0x4044ff[_0x2a6b66(0x2f5)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x4d2459[_0x2a6b66(0x2ca)](_0x5f0b61=>{const _0x86e52c=_0x2a6b66;if(_0x5f0b61['botID']!=_0x86e52c(0x237))toggleBot(_0x5f0b61[_0x86e52c(0x21d)],toggleStatus(_0x5f0b61[_0x86e52c(0x21d)]),'stopped');});}else await sendTelegram(_0x4044ff['chat']['id'],_0x2a6b66(0x3ba)+_0x1e9c37),toggleBot(_0x1e9c37,toggleStatus(_0x1e9c37),_0x2a6b66(0x3cb));}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x202),async _0x311832=>{const _0xb5c6ca=_0xce9f0,_0x161b0c=getEnabledBots();if(_0x161b0c[_0xb5c6ca(0x243)]==0x0)await sendTelegram(_0x311832['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x161b0c[_0xb5c6ca(0x243)]>0x1){let _0x32f93a=[],_0x2480cd=[];const _0x4d7369=_0x161b0c[_0xb5c6ca(0x243)]%0x4==0x0||_0x161b0c[_0xb5c6ca(0x243)]%0x4==0x3||_0x161b0c[_0xb5c6ca(0x243)]%0x3==0x1?0x4:0x3;let _0x139608=0x0;_0x161b0c[_0xb5c6ca(0x2ca)]((_0x477e9,_0x2abbea)=>{const _0x2dc384=_0xb5c6ca;if(_0x2abbea%_0x4d7369==0x0)_0x2480cd=[];_0x2480cd[_0x2dc384(0x39e)](Markup['button']['callback'](_0x2dc384(0x22f)+_0x477e9[_0x2dc384(0x21d)],_0x2dc384(0x294)+_0x477e9[_0x2dc384(0x21d)])),_0x2abbea%_0x4d7369==0x0&&(_0x32f93a[_0x139608]=_0x2480cd,_0x139608++);});const _0x491423=Markup[_0xb5c6ca(0x309)](_0x32f93a);_0x311832[_0xb5c6ca(0x22c)](_0xb5c6ca(0x257),_0x491423);}else{const _0x3ab436=_0x161b0c[0x0][_0xb5c6ca(0x21d)];if(pid[_0x3ab436])pid[_0x3ab436][_0xb5c6ca(0x3a5)]({'function':_0xb5c6ca(0x271),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0x2dcc83=>{const _0x37729c=_0xce9f0,_0x2bf7cc=_0x2dcc83[_0x37729c(0x304)][0x1];_0x2dcc83[_0x37729c(0x25f)]();if(pid[_0x2bf7cc])pid[_0x2bf7cc][_0x37729c(0x3a5)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x297),async _0x5d8da3=>{const _0x1fa992=_0xce9f0,_0x31ce51=getEnabledBots();if(_0x31ce51['length']==0x0)await sendTelegram(_0x5d8da3[_0x1fa992(0x2f5)]['id'],_0x1fa992(0x2c0));else{if(_0x31ce51[_0x1fa992(0x243)]>0x1){let _0x16ff3c=[],_0x3c0125=[];const _0x4919f0=_0x31ce51[_0x1fa992(0x243)]%0x4==0x0||_0x31ce51[_0x1fa992(0x243)]%0x4==0x3||_0x31ce51[_0x1fa992(0x243)]%0x3==0x1?0x4:0x3;let _0x33274a=0x0;_0x31ce51[_0x1fa992(0x2ca)]((_0x594135,_0x324ee9)=>{const _0x1b2b76=_0x1fa992;if(_0x324ee9%_0x4919f0==0x0)_0x3c0125=[];_0x3c0125[_0x1b2b76(0x39e)](Markup[_0x1b2b76(0x38a)][_0x1b2b76(0x242)](_0x1b2b76(0x22f)+_0x594135[_0x1b2b76(0x21d)],_0x1b2b76(0x351)+_0x594135[_0x1b2b76(0x21d)])),_0x324ee9%_0x4919f0==0x0&&(_0x16ff3c[_0x33274a]=_0x3c0125,_0x33274a++);});const _0x1c8fec=Markup['inlineKeyboard'](_0x16ff3c);_0x5d8da3['reply'](_0x1fa992(0x248),_0x1c8fec);}else{const _0x14ecd8=_0x31ce51[0x0][_0x1fa992(0x21d)];if(pid[_0x14ecd8])pid[_0x14ecd8][_0x1fa992(0x3a5)]({'function':_0x1fa992(0x3cf),'args':null});}}}),tgBot[_0xce9f0(0x34c)](/portfolio_(.+)/,async _0x5aabb0=>{const _0x131ae2=_0xce9f0,_0x247de3=_0x5aabb0[_0x131ae2(0x304)][0x1];_0x5aabb0[_0x131ae2(0x25f)]();if(pid[_0x247de3])pid[_0x247de3][_0x131ae2(0x3a5)]({'function':_0x131ae2(0x3cf),'args':null});}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x326),async _0x35bcac=>{const _0x5aaa7c=_0xce9f0;await getMessages();if(!updateAvailable)await sendTelegram(_0x35bcac[_0x5aaa7c(0x2f5)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0x35bcac[_0x5aaa7c(0x2f5)]['id'],'Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update');else{const _0x7b8235=Markup[_0x5aaa7c(0x309)]([Markup[_0x5aaa7c(0x38a)][_0x5aaa7c(0x242)]('Yes',_0x5aaa7c(0x29e)),Markup[_0x5aaa7c(0x38a)][_0x5aaa7c(0x242)]('No',_0x5aaa7c(0x1f2))]);_0x35bcac['reply'](_0x5aaa7c(0x393),_0x7b8235);}}}),tgBot['action'](/update_(.+)/,async _0x48a5ed=>{const _0x96b670=_0xce9f0,_0x419fdd=_0x48a5ed[_0x96b670(0x304)][0x1];_0x48a5ed[_0x96b670(0x25f)](),_0x419fdd=='yes'&&(await sendTelegram(_0x48a5ed['chat']['id'],_0x96b670(0x370)),updateBB(_0x96b670(0x326))),_0x419fdd=='no'&&await sendTelegram(_0x48a5ed[_0x96b670(0x2f5)]['id'],_0x96b670(0x235));}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x2f1),async _0xb76f00=>{const _0x9a4ae6=_0xce9f0;if(!validInstallation)await sendTelegram(_0xb76f00['chat']['id'],_0x9a4ae6(0x2f0));else{const _0xf062cb=Markup[_0x9a4ae6(0x309)]([Markup[_0x9a4ae6(0x38a)][_0x9a4ae6(0x242)](_0x9a4ae6(0x241),'reinstall_yes'),Markup['button'][_0x9a4ae6(0x242)]('No','reinstall_no')]);_0xb76f00[_0x9a4ae6(0x22c)](_0x9a4ae6(0x2a3),_0xf062cb);}}),tgBot[_0xce9f0(0x34c)](/reinstall_(.+)/,async _0x46edd5=>{const _0x4953ee=_0xce9f0,_0x13138e=_0x46edd5[_0x4953ee(0x304)][0x1];_0x46edd5[_0x4953ee(0x25f)](),_0x13138e==_0x4953ee(0x2d8)&&(await sendTelegram(_0x46edd5[_0x4953ee(0x2f5)]['id'],_0x4953ee(0x36b)),updateBB(_0x4953ee(0x2f1))),_0x13138e=='no'&&await sendTelegram(_0x46edd5['chat']['id'],_0x4953ee(0x2c2));}),tgBot[_0xce9f0(0x3b5)]('toggle',async _0x5282ad=>{const _0x5aa8f2=_0xce9f0,_0x94a1ed=getBotsWithMode();if(_0x94a1ed[_0x5aa8f2(0x243)]==0x0)await sendTelegram(_0x5282ad[_0x5aa8f2(0x2f5)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0x395c76=[],_0x96b0b=[];const _0x5a2254=0x2;let _0x306b93=0x0;_0x94a1ed[_0x5aa8f2(0x2ca)]((_0x29b625,_0x1a2b29)=>{const _0x560e12=_0x5aa8f2;if(_0x1a2b29%_0x5a2254==0x0)_0x96b0b=[];_0x96b0b[_0x560e12(0x39e)](Markup[_0x560e12(0x38a)]['callback'](_0x560e12(0x22f)+_0x29b625[_0x560e12(0x21d)]+'\x20('+_0x29b625[_0x560e12(0x262)]+')',_0x560e12(0x31c)+_0x29b625['botID'])),_0x1a2b29%_0x5a2254==0x0&&(_0x395c76[_0x306b93]=_0x96b0b,_0x306b93++);});const _0x5e17cd=Markup[_0x5aa8f2(0x309)](_0x395c76);_0x5282ad['reply'](_0x5aa8f2(0x355),_0x5e17cd);}}),tgBot[_0xce9f0(0x34c)](/toggle_(.+)/,async _0x449c5a=>{const _0x11efd4=_0xce9f0,_0x5f27cd=_0x449c5a['match'][0x1];_0x449c5a['editMessageReplyMarkup']();const _0x37a92b=getBotsWithMode(),_0x11ebc4=_0x37a92b[_0x11efd4(0x282)](_0x36839a=>_0x36839a[_0x11efd4(0x21d)]==_0x5f27cd),_0x495a1a=_0x11ebc4[_0x11efd4(0x262)]==_0x11efd4(0x2a8)?'manual':_0x11efd4(0x2a8);await sendTelegram(_0x449c5a['chat']['id'],_0x11efd4(0x33a)+_0x5f27cd+_0x11efd4(0x3ef)+_0x495a1a+_0x11efd4(0x32e)),toggleBotMode(_0x5f27cd);}),tgBot['command'](_0xce9f0(0x24d),async _0x11e0f1=>{const _0x4b1e38=_0xce9f0;let _0x33b0d0='';config[_0x4b1e38(0x2ca)](_0x53044a=>{const _0x4ad188=_0x4b1e38;_0x33b0d0+='Bot\x20'+_0x53044a[_0x4ad188(0x21d)]+':\x20'+_0x53044a['botname']+'\x0a';}),await sendTelegram(_0x11e0f1[_0x4b1e38(0x2f5)]['id'],_0x33b0d0,{'parse_mode':_0x4b1e38(0x24b)});}),tgBot[_0xce9f0(0x3b5)](_0xce9f0(0x34f),async _0xe2e793=>{const _0x2a1e63=_0xce9f0;await sendTelegram(_0xe2e793[_0x2a1e63(0x2f5)]['id'],_0x86fd77);}),process['once'](_0xce9f0(0x383),()=>tgBot[_0xce9f0(0x29d)]('SIGINT')),process[_0xce9f0(0x32b)](_0xce9f0(0x38b),()=>tgBot[_0xce9f0(0x29d)](_0xce9f0(0x38b))),tgBot[_0xce9f0(0x2fd)]();}}function disableTelegram(){const _0x5eaa4a=_0x25417a;tgBot&&tgBot[_0x5eaa4a(0x29d)]();}async function sendTelegram(_0x5ef5cc,_0x55b2cb,_0x3c2425){const _0x1c9b49=_0x25417a;_0x3c2425={..._0x3c2425,'disable_web_page_preview':!![]};try{await tgBot[_0x1c9b49(0x3c0)][_0x1c9b49(0x3d2)](_0x5ef5cc,_0x55b2cb,_0x3c2425);}catch(_0x390570){console[_0x1c9b49(0x3e0)](_0x1c9b49(0x2fe),_0x390570);}}async function sendTelegramBot(_0x7a9f73,_0x3ff8bd){const _0x1cb6ac=_0x25417a;if(settings[_0x1cb6ac(0x2cd)]){if(settings['telegramEvents']=='all'||(_0x3ff8bd[_0x1cb6ac(0x252)]==_0x1cb6ac(0x280)||_0x3ff8bd[_0x1cb6ac(0x252)]==_0x1cb6ac(0x245)||_0x3ff8bd[_0x1cb6ac(0x252)]==_0x1cb6ac(0x2bb))&&settings[_0x1cb6ac(0x31a)]==_0x1cb6ac(0x33c)||_0x3ff8bd['type']==_0x1cb6ac(0x2bc)&&settings[_0x1cb6ac(0x31a)]==_0x1cb6ac(0x2a4)){if(tgBot&&settings['telegramChatId']){if(_0x3ff8bd['showname'])await sendTelegram(settings[_0x1cb6ac(0x354)],_0x3ff8bd[_0x1cb6ac(0x341)]+'\x20>\x20'+_0x3ff8bd['event']);else await sendTelegram(settings[_0x1cb6ac(0x354)],_0x1cb6ac(0x22f)+_0x7a9f73+'\x20>\x20'+_0x3ff8bd[_0x1cb6ac(0x2b2)]);}}}}async function sendTelegramMsg(_0x4d0470,_0xa64782=_0x25417a(0x24b)){const _0x17a4ac=_0x25417a;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings[_0x17a4ac(0x354)],_0x4d0470,{'parse_mode':_0xa64782}),!![]):![];}function getDeviceWithIp(_0x54cf08){const _0x4792de=_0x25417a;return devices[_0x4792de(0x282)](_0x1bd916=>_0x1bd916['ip']===_0x54cf08);}async function temporaryAccess2FA(_0x4a7075,_0x20212a){const _0x2be2e2=_0x25417a;let _0x51810c=new Date(),_0x15842e=![];if(lastIpApproval){if(_0x51810c-lastIpApproval<0x1388)_0x15842e=!![];}lastIpApproval=new Date();if(_0x15842e)return;if(tgBot&&settings[_0x2be2e2(0x354)]){const _0x42990e=uuidRandom();tmpStorage[_0x42990e]={'uuid':_0x4a7075,'externalip':_0x20212a};const _0x5e7140=Markup['inlineKeyboard']([Markup[_0x2be2e2(0x38a)]['callback'](_0x2be2e2(0x1fe),_0x2be2e2(0x39c)+_0x42990e),Markup[_0x2be2e2(0x38a)]['callback'](_0x2be2e2(0x2de),'tempaccess_15_'+_0x42990e),Markup[_0x2be2e2(0x38a)][_0x2be2e2(0x242)](_0x2be2e2(0x229),_0x2be2e2(0x2dc)+_0x42990e),Markup[_0x2be2e2(0x38a)][_0x2be2e2(0x242)](_0x2be2e2(0x325),'tempaccess_reject_'+_0x42990e)]);await sendTelegram(settings[_0x2be2e2(0x354)],_0x2be2e2(0x274)+normalizeIP(_0x20212a)['show']+'\x20?',_0x5e7140),tgBot[_0x2be2e2(0x34c)](/tempaccess_(.+)_(.+)/,async _0x45f6ef=>{const _0x2ee0b8=_0x2be2e2,_0x238912=_0x45f6ef[_0x2ee0b8(0x304)][0x1],_0x774add=_0x45f6ef['match'][0x2],{uuid:_0x196a69,externalip:_0x22b2e5}=tmpStorage[_0x774add];delete tmpStorage[_0x774add],_0x45f6ef['editMessageReplyMarkup'](),devices[_0x196a69][_0x2ee0b8(0x305)]={'clientip':_0x22b2e5,'timestamp':new Date()[_0x2ee0b8(0x285)](),'expiry':_0x238912},_0x238912!=_0x2ee0b8(0x325)?(await sendTelegram(_0x45f6ef['chat']['id'],_0x2ee0b8(0x261)+_0x238912+_0x2ee0b8(0x2e5),{'parse_mode':_0x2ee0b8(0x24b)}),io['to'](_0x196a69)['emit']('status',{'access':{'allow':![],'reason':_0x2ee0b8(0x3ce),'token':null}})):(await sendTelegram(_0x45f6ef['chat']['id'],_0x2ee0b8(0x2af)),io['to'](_0x196a69)[_0x2ee0b8(0x250)](_0x2ee0b8(0x2fc),{'access':{'allow':![],'reason':_0x2ee0b8(0x348),'token':null}}));});}}async function loginAccess2FA(_0x5e357b,_0x1e6cc0){const _0x152ed2=_0x25417a;if(tgBot&&settings[_0x152ed2(0x354)]){const _0x2e6bee=uuidRandom();tmpStorage[_0x2e6bee]={'uuid':_0x5e357b,'externalip':_0x1e6cc0};const _0x367c8e=Markup[_0x152ed2(0x309)]([Markup['button'][_0x152ed2(0x242)](_0x152ed2(0x3e7),_0x152ed2(0x353)+loginExpiry+'_'+_0x2e6bee),Markup[_0x152ed2(0x38a)][_0x152ed2(0x242)](_0x152ed2(0x325),_0x152ed2(0x21b)+_0x2e6bee)]);await sendTelegram(settings[_0x152ed2(0x354)],_0x152ed2(0x2a0)+normalizeIP(_0x1e6cc0)[_0x152ed2(0x226)]+'\x20?',_0x367c8e),tgBot[_0x152ed2(0x34c)](/login2fa_(.+)_(.+)/,async _0xcaec8e=>{const _0x15e20d=_0x152ed2,_0x373918=_0xcaec8e[_0x15e20d(0x304)][0x1],_0xcb5a6f=_0xcaec8e['match'][0x2],{uuid:_0x58df8d,externalip:_0x1ee55e}=tmpStorage[_0xcb5a6f];delete tmpStorage[_0xcb5a6f],_0xcaec8e[_0x15e20d(0x25f)](),devices[_0x58df8d][_0x15e20d(0x379)]={'clientip':_0x1ee55e,'timestamp':new Date()['getTime'](),'expiry':_0x373918},_0x373918!=_0x15e20d(0x325)?(await sendTelegram(_0xcaec8e[_0x15e20d(0x2f5)]['id'],_0x15e20d(0x2b4),{'parse_mode':_0x15e20d(0x24b)}),io['to'](_0x58df8d)[_0x15e20d(0x250)](_0x15e20d(0x2fc),{'access':{'allow':![],'reason':_0x15e20d(0x3ce),'token':null}})):(await sendTelegram(_0xcaec8e[_0x15e20d(0x2f5)]['id'],'Login\x20rejected'),io['to'](_0x58df8d)[_0x15e20d(0x250)]('status',{'access':{'allow':![],'reason':_0x15e20d(0x288),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x42ef89=_0x25417a;return dbConfig[_0x42ef89(0x300)](_0x42ef89(0x387))['sortBy']('botID')['filter']({'status':_0x42ef89(0x29a)})[_0x42ef89(0x232)]()||[];}function getDisabledBots(){const _0x4bdd11=_0x25417a;return dbConfig['get'](_0x4bdd11(0x387))[_0x4bdd11(0x2f4)](_0x4bdd11(0x21d))['filter']({'status':_0x4bdd11(0x230)})['value']()||[];}function getBotAttributes(_0x19e821){const _0x197b12=_0x25417a;let _0x184fca={};const _0x4b043b=configpath+_0x197b12(0x384)+_0x19e821+'-config.json',_0xcdb79a=fs[_0x197b12(0x273)](_0x4b043b);if(_0xcdb79a){const _0x515814=fs[_0x197b12(0x347)](_0x4b043b);try{const _0xdeda1c=JSON[_0x197b12(0x374)](_0x515814),_0x3816c7=_0xdeda1c?_0xdeda1c[_0x197b12(0x29c)][0x0][_0x197b12(0x1fb)]:![];_0x184fca[_0x197b12(0x262)]=_0x3816c7?_0x197b12(0x2a8):_0x197b12(0x2e4),_0x184fca['botname']=_0xdeda1c?_0xdeda1c['bot'][0x0][_0x197b12(0x341)]:_0x197b12(0x22f)+_0x19e821;}catch(_0x1f9c0a){_0x184fca['mode']=_0x197b12(0x2e4),_0x184fca[_0x197b12(0x341)]=_0x197b12(0x22f)+_0x19e821;}}else _0x184fca['mode']=_0x197b12(0x2e4),_0x184fca[_0x197b12(0x341)]=_0x197b12(0x22f)+_0x19e821;return _0x184fca;}function getBotsWithMode(){const _0x3cf31f=_0x25417a,_0x11a498=dbConfig[_0x3cf31f(0x300)](_0x3cf31f(0x387))[_0x3cf31f(0x2f4)](_0x3cf31f(0x21d))[_0x3cf31f(0x232)]()||[];return _0x11a498[_0x3cf31f(0x2ca)](_0x5d4822=>{const _0x1a0a58=_0x3cf31f;let _0x2d5463=getBotAttributes(_0x5d4822[_0x1a0a58(0x21d)]);_0x5d4822[_0x1a0a58(0x262)]=_0x2d5463[_0x1a0a58(0x262)];}),_0x11a498;}function getBotExchanges(){const _0x45c66b=_0x25417a;let _0x5dfb73=[];const _0x1f6c22=dbConfig[_0x45c66b(0x300)]('bots')['sortBy'](_0x45c66b(0x21d))['value']()||[];_0x1f6c22[_0x45c66b(0x2ca)](_0x2afee5=>{const _0x2635ed=_0x45c66b;if(_0x2afee5[_0x2635ed(0x2fc)]==_0x2635ed(0x29a)){const _0x1c45dc=configpath+_0x2635ed(0x384)+_0x2afee5[_0x2635ed(0x21d)]+_0x2635ed(0x2c1),_0x6a7dfa=fs['existsSync'](_0x1c45dc);let _0x5f331a;if(_0x6a7dfa){const _0x23ff4e=fs['readFileSync'](_0x1c45dc);try{const _0x25a122=JSON[_0x2635ed(0x374)](_0x23ff4e);_0x5f331a=_0x25a122?_0x25a122[_0x2635ed(0x29c)][0x0][_0x2635ed(0x2cc)]:null;}catch(_0x48deff){}}if(_0x5f331a)_0x5dfb73[_0x2635ed(0x39e)](_0x5f331a);}});const _0x107368=[...new Set(_0x5dfb73)][_0x45c66b(0x302)]();return _0x107368;}async function initUser(){const _0x2b6e0a=_0x25417a;if(!settings[_0x2b6e0a(0x22b)]){const _0x5f34f3=uuidRandom();mixpanel[_0x2b6e0a(0x254)](_0x5f34f3),updateSetting(_0x2b6e0a(0x22b),_0x5f34f3);}}async function initSecure(){const _0x58b39d=_0x25417a;let _0x25f561=getSecure();if(!_0x25f561[_0x58b39d(0x2d4)](_0x58b39d(0x375))){let _0x27e91e=await generateKeys();_0x25f561[_0x58b39d(0x2ed)]=_0x27e91e['publicKey'],_0x25f561[_0x58b39d(0x3a2)]=_0x27e91e[_0x58b39d(0x3a2)],_0x25f561[_0x58b39d(0x375)]=crypto[_0x58b39d(0x2c6)](0x20)[_0x58b39d(0x214)](_0x58b39d(0x23c));;storeSecure(_0x25f561);}}function getSettings(){const _0x245f1f=_0x25417a;return dbSettings[_0x245f1f(0x300)](_0x245f1f(0x396))[_0x245f1f(0x232)]()||{};}function getSecure(){const _0xb27c3e=_0x25417a;return dbSecure['get'](_0xb27c3e(0x3cd))['value']()||{};}function getBlacklist(){const _0x3ae058=_0x25417a;return dbSecure[_0x3ae058(0x300)](_0x3ae058(0x3e6))[_0x3ae058(0x232)]()||[];}function broadcastToBots(_0x5826f4,_0x59f5e3){config['forEach'](_0x3c9079=>{const _0x1095e7=_0x6a6b;if(_0x3c9079[_0x1095e7(0x2fc)]==_0x1095e7(0x29a)&&_0x3c9079[_0x1095e7(0x258)]=='running'||_0x3c9079[_0x1095e7(0x2fc)]=='new'&&_0x3c9079[_0x1095e7(0x258)]==_0x1095e7(0x246)){if(pid[_0x3c9079[_0x1095e7(0x21d)]])pid[_0x3c9079['botID']]['send']({[_0x5826f4]:_0x59f5e3});}});}async function storeSettings(_0x36e77f,_0x27f624=![]){const _0x5aa326=_0x25417a;_0x36e77f={...settings,..._0x36e77f};if(_0x27f624&&_0x36e77f[_0x5aa326(0x3b4)]!='************'&&_0x36e77f[_0x5aa326(0x3b4)]!=_0x5aa326(0x204)&&_0x36e77f[_0x5aa326(0x3b4)]!=''){const _0xc67303=crypt['decrypt'](secure[_0x5aa326(0x3a2)],_0x36e77f[_0x5aa326(0x3b4)])[_0x5aa326(0x34d)][_0x5aa326(0x268)](_0x5aa326(0x238))[0x0],_0xb1fa38=bcrypt[_0x5aa326(0x28f)](_0xc67303,saltRounds);_0x36e77f={..._0x36e77f,'bbPassword':_0xb1fa38};}if(_0x27f624&&_0x36e77f['telegramToken']!='************'&&_0x36e77f['telegramToken']!=_0x5aa326(0x204)&&_0x36e77f[_0x5aa326(0x382)]!=''){const _0x109c54=crypt['decrypt'](secure[_0x5aa326(0x3a2)],_0x36e77f[_0x5aa326(0x382)])[_0x5aa326(0x34d)]['split']('|@|')[0x0];_0x36e77f={..._0x36e77f,'telegramToken':_0x109c54};}if(_0x27f624&&_0x36e77f[_0x5aa326(0x323)]!='************'&&_0x36e77f[_0x5aa326(0x323)]!='***'&&_0x36e77f[_0x5aa326(0x323)]!=''){const _0x3df5bc=crypt[_0x5aa326(0x2ec)](secure[_0x5aa326(0x3a2)],_0x36e77f['marketcapApi'])[_0x5aa326(0x34d)][_0x5aa326(0x268)](_0x5aa326(0x238))[0x0];_0x36e77f={..._0x36e77f,'marketcapApi':_0x3df5bc};}const _0x83cef1=_0x36e77f['telegramToken']!=_0x5aa326(0x23f)&&_0x36e77f[_0x5aa326(0x382)]!=settings[_0x5aa326(0x382)]||_0x36e77f[_0x5aa326(0x306)]!=settings[_0x5aa326(0x306)],_0x24bcce=_0x36e77f[_0x5aa326(0x382)]==''||_0x36e77f[_0x5aa326(0x306)]=='',_0x5c11c2=_0x36e77f['marketcapApi']&&_0x36e77f['marketcapApi']!=_0x5aa326(0x23f)&&_0x36e77f[_0x5aa326(0x323)]!=settings[_0x5aa326(0x382)];_0x83cef1&&(_0x36e77f[_0x5aa326(0x354)]=null,_0x36e77f['telegramEvents']=_0x5aa326(0x237));for(const [_0x3862e5,_0x37667a]of Object['entries'](_0x36e77f)){if(_0x3862e5==_0x5aa326(0x382)&&_0x37667a==_0x5aa326(0x23f)){_0x36e77f['telegramToken']=settings[_0x5aa326(0x382)];continue;};if(_0x3862e5==_0x5aa326(0x3b4)&&_0x37667a==_0x5aa326(0x23f)){_0x36e77f[_0x5aa326(0x3b4)]=settings[_0x5aa326(0x3b4)];continue;};if(_0x3862e5==_0x5aa326(0x323)&&_0x37667a==_0x5aa326(0x23f)){_0x36e77f['marketcapApi']=settings[_0x5aa326(0x323)];continue;};dbSettings['set'](_0x5aa326(0x2ab)+_0x3862e5,_0x37667a)[_0x5aa326(0x36d)]();}settings=_0x36e77f,io['to'](_0x5aa326(0x28c))[_0x5aa326(0x250)](_0x5aa326(0x396),cleanSettings()),broadcastToBots(_0x5aa326(0x221),settings[_0x5aa326(0x221)]),broadcastToBots(_0x5aa326(0x2d9),settings[_0x5aa326(0x2d9)]),broadcastToBots(_0x5aa326(0x323),settings[_0x5aa326(0x323)]);if(_0x83cef1&&!_0x24bcce)initTelegram();if(_0x83cef1&&_0x24bcce)disableTelegram();getAllClients()[_0x5aa326(0x2ca)](_0x139df9=>{const _0x2a06c8=_0x5aa326;getSocket(_0x139df9['id'])['emit'](_0x2a06c8(0x2fc),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x5c11c2&&(await sleep(0xbb8),testMarketcapApi(_0x36e77f[_0x5aa326(0x323)]));}async function testMarketcapApi(_0x37d0cc){const _0x1614be=_0x25417a,_0xcd1953=['BCT','ETH'];try{await axios[_0x1614be(0x300)](_0x1614be(0x3c2),{'headers':{'X-CMC_PRO_API_KEY':_0x37d0cc},'params':{'symbol':_0xcd1953['toString']()}});}catch(_0x2c6cc2){_0x2c6cc2[_0x1614be(0x214)]()['includes']('status\x20code\x20401')?(io['to'](_0x1614be(0x28c))[_0x1614be(0x250)](_0x1614be(0x378),_0x1614be(0x1e9)),logger['full']('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x1614be(0x28c))['emit'](_0x1614be(0x378),_0x1614be(0x219)),logger[_0x1614be(0x26a)](_0x1614be(0x219)),logger[_0x1614be(0x203)](_0x1614be(0x3b3),_0x2c6cc2['toString']()+'\x20-\x20'+_0x2c6cc2[_0x1614be(0x1fa)]));return;}logger[_0x1614be(0x203)](_0x1614be(0x3c3));}function updateSetting(_0x49cab1,_0x4a93e9){const _0x43aa70=_0x25417a;dbSettings['set'](_0x43aa70(0x2ab)+_0x49cab1,_0x4a93e9)[_0x43aa70(0x36d)](),settings=getSettings(),io['to'](_0x43aa70(0x28c))[_0x43aa70(0x250)](_0x43aa70(0x396),cleanSettings());}function storeSecure(_0x10d528){const _0x4db957=_0x25417a;dbSecure[_0x4db957(0x300)]('secure')['push'](_0x10d528)['write'](),secure=_0x10d528;}function addBlacklist(_0x2f376e){const _0x5307b3=_0x25417a;cleanBlacklist();let _0x4ce6c0;devices[_0x2f376e]['telegramIpApproval']?_0x4ce6c0=Math[_0x5307b3(0x287)](devices[_0x2f376e]['telegramIpApproval'][_0x5307b3(0x2d7)],loginExpiry):_0x4ce6c0=loginExpiry,dbSecure[_0x5307b3(0x300)](_0x5307b3(0x3e6))[_0x5307b3(0x39e)]({'expiry':new Date()['getTime']()+_0x4ce6c0*0x3c*0x3e8,'token':devices[_0x2f376e][_0x5307b3(0x1ee)][_0x5307b3(0x368)]})[_0x5307b3(0x36d)](),blacklist=dbSecure[_0x5307b3(0x300)]('blacklist')[_0x5307b3(0x232)]();}function cleanBlacklist(){const _0x37b572=_0x25417a;let _0x295e18=dbSecure[_0x37b572(0x300)](_0x37b572(0x3e6))[_0x37b572(0x3e3)]()[_0x37b572(0x232)](),_0x42112b=new Date()[_0x37b572(0x285)]();_0x295e18[_0x37b572(0x2ca)](_0x3415c5=>{const _0x79ea26=_0x37b572;_0x3415c5['expiry']<_0x42112b&&dbSecure[_0x79ea26(0x300)](_0x79ea26(0x3e6))[_0x79ea26(0x251)]({'expiry':_0x3415c5[_0x79ea26(0x2d7)]})[_0x79ea26(0x36d)]();});}function initStates(){const _0x2d645e=_0x25417a;let _0x2d2770=getConfiguration();_0x2d2770[_0x2d645e(0x2ca)](_0x19a577=>{const _0x50fe9a=_0x2d645e;_0x19a577['live']=_0x50fe9a(0x3cb);}),storeConfiguration(_0x2d2770);}function onKeys(){const _0x3c0a1b=new RSA();return new Promise(_0x12187b=>{const _0x121fdb=_0x6a6b;_0x3c0a1b[_0x121fdb(0x390)]()[_0x121fdb(0x222)](_0x7d2252=>{_0x12187b(_0x7d2252);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x9fa447=_0x25417a;let _0x560a09=getSettings(),_0x3e2c1b=![];!_0x560a09[_0x9fa447(0x2d4)](_0x9fa447(0x385))&&(_0x560a09['lastmsgtelegram']=0x0,_0x3e2c1b=!![]);!_0x560a09['hasOwnProperty'](_0x9fa447(0x3a4))&&(_0x560a09[_0x9fa447(0x3a4)]=0x0,_0x3e2c1b=!![]);!_0x560a09['hasOwnProperty']('latestversion')&&(_0x560a09[_0x9fa447(0x30b)]=_0x9fa447(0x23a),_0x3e2c1b=!![]);!_0x560a09['hasOwnProperty'](_0x9fa447(0x2d9))&&(_0x560a09[_0x9fa447(0x2d9)]=![],_0x3e2c1b=!![]);!_0x560a09[_0x9fa447(0x2d4)](_0x9fa447(0x323))&&(_0x560a09[_0x9fa447(0x323)]='',_0x3e2c1b=!![]);if(_0x3e2c1b)storeSettings(_0x560a09);try{fs[_0x9fa447(0x36c)](configbackuppath,{'withFileTypes':!![]})[_0x9fa447(0x2ca)](_0x32917e=>{const _0x25a74a=_0x9fa447;if(!_0x32917e[_0x25a74a(0x2e6)]()){if(!_0x32917e['name'][_0x25a74a(0x255)](_0x25a74a(0x364)))fs[_0x25a74a(0x2e7)](configbackuppath+_0x32917e[_0x25a74a(0x3bf)]);}else fs[_0x25a74a(0x2b3)](configbackuppath+_0x32917e[_0x25a74a(0x3bf)],{'recursive':!![]});});}catch(_0x18690b){logger['debug'](_0x9fa447(0x28d),_0x18690b);}}function storeConfiguration(_0x333dfb){const _0x472c99=_0x25417a;dbConfig[_0x472c99(0x300)](_0x472c99(0x387))['remove']()['write'](),dbConfig['get'](_0x472c99(0x387))[_0x472c99(0x39e)](..._0x333dfb)['write'](),config=_0x333dfb;}async function resetPassword(){const _0x4859f1=_0x25417a;if(tgBot&&settings[_0x4859f1(0x354)]){const _0x54402a=Markup[_0x4859f1(0x309)]([Markup[_0x4859f1(0x38a)][_0x4859f1(0x242)](_0x4859f1(0x2d8),_0x4859f1(0x32c)),Markup[_0x4859f1(0x38a)][_0x4859f1(0x242)]('no',_0x4859f1(0x37f))]);await sendTelegram(settings[_0x4859f1(0x354)],_0x4859f1(0x308),_0x54402a),tgBot[_0x4859f1(0x34c)](/resetpw_(.+)/,async _0x542907=>{const _0x45d1cf=_0x4859f1,_0x416f95=_0x542907[_0x45d1cf(0x304)][0x1];_0x542907[_0x45d1cf(0x25f)]();if(_0x416f95!='no'){const _0x4f6224=0xf,_0x28f7bc=_0x45d1cf(0x25a),_0x204400=Array[_0x45d1cf(0x318)](crypto[_0x45d1cf(0x33e)](new Uint32Array(_0x4f6224)))[_0x45d1cf(0x2b1)](_0x3cb936=>_0x28f7bc[_0x3cb936%_0x28f7bc[_0x45d1cf(0x243)]])[_0x45d1cf(0x30c)](''),_0x2aa844=bcrypt[_0x45d1cf(0x28f)](_0x204400,saltRounds);storeSettings({'bbPassword':_0x2aa844}),await sendTelegram(_0x542907[_0x45d1cf(0x2f5)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x204400,{'parse_mode':_0x45d1cf(0x24b)});}else await sendTelegram(_0x542907[_0x45d1cf(0x2f5)]['id'],_0x45d1cf(0x240));});}}async function confirmRestore(_0x3f2a77,_0x2c2c58){const _0x447ffc=_0x25417a;io['to']('botmanager')['emit']('notification',_0x447ffc(0x2fa),_0x447ffc(0x2bb));if(tgBot&&settings[_0x447ffc(0x354)]){const _0x525625=uuidRandom();tmpStorage[_0x525625]={'path':_0x3f2a77,'filename':_0x2c2c58};const _0x1f231f=Markup[_0x447ffc(0x309)]([Markup[_0x447ffc(0x38a)][_0x447ffc(0x242)]('yes','restore_yes_'+_0x525625),Markup[_0x447ffc(0x38a)][_0x447ffc(0x242)]('no',_0x447ffc(0x346)+_0x525625)]);await sendTelegram(settings['telegramChatId'],_0x447ffc(0x371),_0x1f231f),tgBot[_0x447ffc(0x34c)](/restore_(.+)_(.+)/,async _0x42e0e6=>{const _0x437a41=_0x447ffc,_0x3167d7=_0x42e0e6[_0x437a41(0x304)][0x1],_0x512bb4=_0x42e0e6['match'][0x2],{path:_0x2c0234,filename:_0x48cfba}=tmpStorage[_0x512bb4];delete tmpStorage[_0x512bb4],_0x42e0e6['editMessageReplyMarkup'](),_0x3167d7==_0x437a41(0x2d8)?(logger[_0x437a41(0x203)](_0x437a41(0x30e)),await sendTelegram(_0x42e0e6[_0x437a41(0x2f5)]['id'],_0x437a41(0x27a),{'parse_mode':'HTML'}),unzipFile(_0x2c0234,_0x48cfba)):(logger['debug'](_0x437a41(0x260)),await sendTelegram(_0x42e0e6[_0x437a41(0x2f5)]['id'],_0x437a41(0x260)));});}}function getServerTime(){const _0x49076b=_0x25417a,_0x22f5c2=new Date();return _0x22f5c2[_0x49076b(0x2c3)]()+'/'+(_0x22f5c2[_0x49076b(0x1f7)]()+0x1)[_0x49076b(0x214)]()[_0x49076b(0x231)](0x2,'0')+'/'+_0x22f5c2[_0x49076b(0x35f)]()['toString']()['padStart'](0x2,'0')+'\x20'+_0x22f5c2['getHours']()[_0x49076b(0x214)]()[_0x49076b(0x231)](0x2,'0')+':'+_0x22f5c2[_0x49076b(0x392)]()['toString']()[_0x49076b(0x231)](0x2,'0')+':'+_0x22f5c2[_0x49076b(0x349)]()[_0x49076b(0x214)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x319657=_0x25417a,_0x24eee0=shiftedTime();return _0x24eee0[_0x319657(0x2c3)]()+'/'+(_0x24eee0[_0x319657(0x1f7)]()+0x1)['toString']()[_0x319657(0x231)](0x2,'0')+'/'+_0x24eee0[_0x319657(0x35f)]()[_0x319657(0x214)]()[_0x319657(0x231)](0x2,'0')+'\x20'+_0x24eee0[_0x319657(0x20c)]()[_0x319657(0x214)]()[_0x319657(0x231)](0x2,'0')+':'+_0x24eee0['getMinutes']()[_0x319657(0x214)]()[_0x319657(0x231)](0x2,'0')+':'+_0x24eee0[_0x319657(0x349)]()[_0x319657(0x214)]()[_0x319657(0x231)](0x2,'0');}function getCleanTimeStamp(){const _0x16cee0=_0x25417a,_0x536734=shiftedTime();return _0x536734[_0x16cee0(0x2c3)]()+(_0x536734[_0x16cee0(0x1f7)]()+0x1)['toString']()[_0x16cee0(0x231)](0x2,'0')+_0x536734['getDate']()[_0x16cee0(0x214)]()[_0x16cee0(0x231)](0x2,'0')+'-'+_0x536734['getHours']()[_0x16cee0(0x214)]()[_0x16cee0(0x231)](0x2,'0')+_0x536734[_0x16cee0(0x392)]()[_0x16cee0(0x214)]()[_0x16cee0(0x231)](0x2,'0')+_0x536734[_0x16cee0(0x349)]()['toString']()[_0x16cee0(0x231)](0x2,'0');}function shiftedTime(){const _0x43a186=_0x25417a,_0x3e3a32=new Date();let _0x59f27b=_0x3e3a32;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x59f27b=fns[_0x43a186(0x338)](_0x3e3a32,{'hours':settings['timeshift']});return _0x59f27b;}async function startScheduler(){const _0x5a5934=_0x25417a,_0x469f77=new Date()['getUTCHours'](),_0x2acbfb=shiftedTime()[_0x5a5934(0x20c)]();_0x2acbfb==0x4&&backupConfigFiles(),_0x2acbfb==0x5&&restartAllBots(),_0x2acbfb==0x0&&rotateLogFiles(),_0x469f77%0x6==0x0&&triggerAnalytics(),_0x469f77%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x4d1ba5){const _0x1c29ef=_0x25417a;logger[_0x1c29ef(0x203)]('Restore\x20backup\x20file\x20'+_0x4d1ba5);const _0x1ae276=getBotsWithMode();_0x1ae276[_0x1c29ef(0x243)]>0x0?confirmRestore(configbackuppath,_0x4d1ba5):unzipFile(configbackuppath,_0x4d1ba5);}async function getBackupFiles(_0x72bcd4=null){const _0x295731=_0x25417a;let _0x6c5973=[],_0x5b1f1c=fs[_0x295731(0x36c)](configbackuppath,{'withFileTypes':!![]});_0x5b1f1c['sort']((_0x9e5d2d,_0x4b85bc)=>_0x9e5d2d['name']<_0x4b85bc[_0x295731(0x3bf)]?0x1:_0x4b85bc[_0x295731(0x3bf)]<_0x9e5d2d['name']?-0x1:0x0),_0x5b1f1c[_0x295731(0x2ca)](_0x4ed0cf=>{const _0x25b9ce=_0x295731;if(!_0x4ed0cf[_0x25b9ce(0x2e6)]()&&_0x4ed0cf[_0x25b9ce(0x3bf)][_0x25b9ce(0x255)](_0x25b9ce(0x364))&&_0x4ed0cf['name'][_0x25b9ce(0x213)](_0x25b9ce(0x39f))){const _0x3ff936=formatDate(fs[_0x25b9ce(0x228)](configbackuppath+_0x4ed0cf[_0x25b9ce(0x3bf)])['mtime']);_0x6c5973['push']({'name':_0x4ed0cf['name'],'mtime':_0x3ff936});}});if(_0x72bcd4)io['to'](_0x72bcd4)[_0x295731(0x250)]('backup-files',_0x6c5973);else return _0x6c5973;}async function backupConfigFiles(){const _0x12120c=_0x25417a;await zipFiles(_0x12120c(0x38d));const _0x5ac683=getCleanTimeStamp();fs[_0x12120c(0x362)](zippath+'backup-full.zip',configbackuppath+(_0x12120c(0x364)+_0x5ac683+_0x12120c(0x39f)));let _0x31e119=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x31e119[_0x12120c(0x302)]((_0x48fac1,_0x15cd3d)=>_0x48fac1[_0x12120c(0x3bf)]<_0x15cd3d[_0x12120c(0x3bf)]?0x1:_0x15cd3d[_0x12120c(0x3bf)]<_0x48fac1[_0x12120c(0x3bf)]?-0x1:0x0),_0x31e119[_0x12120c(0x243)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x31e119[_0x31e119[_0x12120c(0x243)]-0x1][_0x12120c(0x3bf)]);}function rotateLogFiles(){const _0x5c79ad=_0x25417a,_0x194814=fs[_0x5c79ad(0x228)](logspath+_0x5c79ad(0x256)),_0x57e53c=_0x194814[_0x5c79ad(0x3c7)]/0x400;if(_0x57e53c>0x64){let _0x4bc00c=fs[_0x5c79ad(0x36c)](logspath,{'withFileTypes':!![]});_0x4bc00c['sort']((_0x4fb8ad,_0x5ec36b)=>_0x4fb8ad[_0x5c79ad(0x3bf)]<_0x5ec36b['name']?0x1:_0x5ec36b[_0x5c79ad(0x3bf)]<_0x4fb8ad[_0x5c79ad(0x3bf)]?-0x1:0x0),_0x4bc00c[_0x5c79ad(0x2ca)](_0xed2b23=>{const _0x316ac3=_0x5c79ad;if(_0xed2b23[_0x316ac3(0x3bf)]==_0x316ac3(0x37a))fs[_0x316ac3(0x362)](logspath+_0xed2b23[_0x316ac3(0x3bf)],logspath+'output-003.log');if(_0xed2b23[_0x316ac3(0x3bf)]==_0x316ac3(0x2e8))fs['copyFileSync'](logspath+_0xed2b23['name'],logspath+_0x316ac3(0x37a));_0xed2b23[_0x316ac3(0x3bf)]==_0x316ac3(0x256)&&(fs[_0x316ac3(0x362)](logspath+_0xed2b23[_0x316ac3(0x3bf)],logspath+_0x316ac3(0x2e8)),fs[_0x316ac3(0x27d)](logspath+_0xed2b23[_0x316ac3(0x3bf)],''));});}}async function zipFiles(_0x82babb){const _0x79ae2d=_0x25417a;let _0x48cdf6;if(_0x82babb==_0x79ae2d(0x32d))_0x48cdf6=logspath;if(_0x82babb==_0x79ae2d(0x1f8))_0x48cdf6=configpath;if(_0x82babb==_0x79ae2d(0x38d))_0x48cdf6=configpath;let _0x30b37a=fs[_0x79ae2d(0x36c)](_0x48cdf6,{'withFileTypes':!![]});const _0x194c3d=new require('node-zip')();_0x30b37a['forEach'](_0x285b4e=>{const _0x5c3692=_0x79ae2d;if(!_0x285b4e[_0x5c3692(0x2e6)]()){let _0x1a63e9=fs[_0x5c3692(0x347)](_0x48cdf6+_0x285b4e[_0x5c3692(0x3bf)]);if(_0x82babb==_0x5c3692(0x1f8)){const _0xa79492=/^bot-[0-9]{3}-config.json$/,_0x2d9ade=_0xa79492['test'](_0x285b4e[_0x5c3692(0x3bf)]);if(_0x2d9ade){const _0x5881e5=JSON[_0x5c3692(0x374)](_0x1a63e9);if(_0x5881e5[_0x5c3692(0x29c)][0x0]){_0x5881e5[_0x5c3692(0x29c)][0x0][_0x5c3692(0x34e)]=_0x5c3692(0x204),_0x5881e5['bot'][0x0]['apiSecret']=_0x5c3692(0x204);if(_0x5881e5['bot'][0x0][_0x5c3692(0x3eb)])_0x5881e5[_0x5c3692(0x29c)][0x0][_0x5c3692(0x3eb)]=_0x5c3692(0x204);}_0x1a63e9=JSON[_0x5c3692(0x2fb)](_0x5881e5,null,0x2);}if(_0x285b4e[_0x5c3692(0x3bf)]=='bb-settings.json'){const _0x36cf0b=JSON[_0x5c3692(0x374)](_0x1a63e9);if(_0x36cf0b[_0x5c3692(0x396)][_0x5c3692(0x391)])_0x36cf0b[_0x5c3692(0x396)][_0x5c3692(0x391)]=![];if(_0x36cf0b[_0x5c3692(0x396)][_0x5c3692(0x3b4)])_0x36cf0b[_0x5c3692(0x396)][_0x5c3692(0x3b4)]=_0x5c3692(0x204);if(_0x36cf0b[_0x5c3692(0x396)][_0x5c3692(0x382)])_0x36cf0b[_0x5c3692(0x396)]['telegramToken']='***';if(_0x36cf0b[_0x5c3692(0x396)]['telegramChatId'])_0x36cf0b['settings'][_0x5c3692(0x354)]=null;if(_0x36cf0b[_0x5c3692(0x396)]['marketcapApi'])_0x36cf0b['settings'][_0x5c3692(0x323)]=_0x5c3692(0x204);_0x1a63e9=JSON[_0x5c3692(0x2fb)](_0x36cf0b,null,0x2);}if(_0x285b4e['name']!=_0x5c3692(0x27c))_0x194c3d[_0x5c3692(0x272)](_0x285b4e[_0x5c3692(0x3bf)],_0x1a63e9);}else _0x194c3d[_0x5c3692(0x272)](_0x285b4e[_0x5c3692(0x3bf)],_0x1a63e9);}});const _0x115572=_0x194c3d[_0x79ae2d(0x367)]({'base64':![],'compression':_0x79ae2d(0x24a)});fs[_0x79ae2d(0x27d)](zippath+(_0x82babb+_0x79ae2d(0x39f)),_0x115572,_0x79ae2d(0x1ef));}async function unzipFile(_0x5844e1,_0x2bb146){const _0x1d958d=_0x25417a;fs[_0x1d958d(0x36c)](configpath,{'withFileTypes':!![]})[_0x1d958d(0x2ca)](_0x23763e=>{const _0x472c0c=_0x1d958d;if(!_0x23763e[_0x472c0c(0x2e6)]())fs[_0x472c0c(0x2b3)](configpath+_0x23763e[_0x472c0c(0x3bf)]);});const _0x189b17=fs[_0x1d958d(0x347)](_0x5844e1+_0x2bb146,_0x1d958d(0x1ef)),_0x3939b0=new require('node-zip')(_0x189b17,{'base64':![],'checkCRC32':!![]});Object[_0x1d958d(0x320)](_0x3939b0[_0x1d958d(0x35b)])[_0x1d958d(0x2ca)](_0x3e8aef=>{const _0x27887d=_0x1d958d,_0x4c3a23=_0x3939b0[_0x27887d(0x35b)][_0x3e8aef];fs[_0x27887d(0x27d)](configpath+_0x4c3a23['name'],_0x4c3a23[_0x27887d(0x315)]);}),fs[_0x1d958d(0x36c)](temppath,{'withFileTypes':!![]})[_0x1d958d(0x2ca)](_0x42fa8d=>{const _0x5c2fd3=_0x1d958d;if(!_0x42fa8d[_0x5c2fd3(0x2e6)]())fs[_0x5c2fd3(0x2b3)](temppath+_0x42fa8d[_0x5c2fd3(0x3bf)]);}),logger[_0x1d958d(0x203)](_0x1d958d(0x24c)),process[_0x1d958d(0x3a5)]({'restore':!![]},_0x30c084=>{});}async function getPublicIp(){const _0x1f5c1a=_0x25417a;try{const _0x555986=await axios[_0x1f5c1a(0x300)](_0x1f5c1a(0x266));publicip=_0x555986[_0x1f5c1a(0x225)]['ip'];}catch(_0x4f320c){}}async function triggerAnalytics(){const _0x41ad2b=_0x25417a;if(!publicip)await getPublicIp();const _0x3f111f=getBotsWithMode();let _0x24a009=0x0;_0x3f111f['forEach'](_0x52351f=>{const _0x5d70e2=_0x6a6b;if(_0x52351f[_0x5d70e2(0x2fc)]==='enabled')_0x24a009++;});const _0xe36a2d=getBotExchanges();mixpanel[_0x41ad2b(0x2ba)]('Server',{'distinct_id':settings[_0x41ad2b(0x22b)],'ip':publicip,'version':serverversion,'numbots':_0x3f111f[_0x41ad2b(0x243)],'numbotsenabled':_0x24a009,'exchanges':_0xe36a2d,'environment':environment});}async function getMessages(){const _0x60164b=_0x25417a,_0x1a6411='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x50c0ed=new GraphQLClient(_0x1a6411),_0x2e0205={'authorization':_0x60164b(0x2bf)},_0x793cb8=serverversion[_0x60164b(0x268)]('.'),_0x1ecdf0=_0x793cb8[0x0]+'.'+_0x793cb8[0x1],_0xde0e46=Math[_0x60164b(0x23e)](settings[_0x60164b(0x385)],settings[_0x60164b(0x3a4)]),_0x4cd5ec={'last':parseInt(_0xde0e46),'bbm':_0x1ecdf0},_0x55a9f6=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x19bfbf;try{_0x19bfbf=await _0x50c0ed[_0x60164b(0x21f)](_0x55a9f6,_0x4cd5ec,_0x2e0205);}catch(_0x215ed8){}if(_0x19bfbf&&_0x19bfbf['messages']){let _0x4b6717=settings['lastmsgtelegram'];newMessages=[];for(const _0x404dc1 of _0x19bfbf[_0x60164b(0x249)]){newMessages[_0x60164b(0x39e)](_0x404dc1);let _0x4cfb6a=![];_0x404dc1[_0x60164b(0x205)]&&(updateSetting(_0x60164b(0x30b),_0x404dc1[_0x60164b(0x205)]),_0x4cfb6a=isNewerVersion(serverversion,_0x404dc1['bbvNew'])||serverversion==_0x404dc1[_0x60164b(0x205)]);if(!_0x4cfb6a&&_0x404dc1[_0x60164b(0x322)]>_0x4b6717){if(_0x404dc1['bbvReceive']===_0x60164b(0x23d)||serverversion[_0x60164b(0x255)](_0x404dc1[_0x60164b(0x3b7)])){let _0x3ca637=''+_0x404dc1[_0x60164b(0x314)]+'\x0a\x0a'+_0x404dc1[_0x60164b(0x34d)];const _0x29a052=await sendTelegramMsg(toTelegramMarkdown(_0x3ca637),'Markdown');if(_0x29a052)_0x4b6717=_0x404dc1[_0x60164b(0x322)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x60164b(0x385),_0x4b6717),emitMessages();}}function emitMessages(){const _0x263255=_0x25417a,_0x173915=settings['lastmsgemitted'];let _0x380757=[];newMessages[_0x263255(0x2ca)](_0x4edd65=>{const _0x293392=_0x263255;_0x4edd65[_0x293392(0x322)]>_0x173915&&_0x380757[_0x293392(0x39e)](_0x4edd65);}),_0x380757[_0x263255(0x243)]>0x0&&getAllClients()[_0x263255(0x2ca)](_0x5c00b2=>{const _0x573afa=_0x263255;getSocket(_0x5c00b2['id'])[_0x573afa(0x250)](_0x573afa(0x34d),_0x380757);});}function confirmMessage(_0x424d32){const _0x495f1d=_0x25417a;updateSetting(_0x495f1d(0x3a4),Number(_0x424d32));}function isNewerVersion(_0x3706c4,_0x5c3377){const _0x51bfff=_0x25417a,_0x2afdd9=_0x5c3377[_0x51bfff(0x268)]('.'),_0x66e859=_0x3706c4['split']('.');for(var _0x18e86d=0x0;_0x18e86d<_0x66e859['length'];_0x18e86d++){const _0x78e583=~~_0x66e859[_0x18e86d],_0x1c21d4=~~_0x2afdd9[_0x18e86d];if(_0x78e583>_0x1c21d4)return!![];if(_0x78e583<_0x1c21d4)return![];}return![];}function toTelegramMarkdown(_0x2b66b1){const _0x2c3bfa=_0x25417a,_0x54481f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3bb9e9=/\*{2}(.+?)\*{2}/gim;return _0x2b66b1=_0x2b66b1[_0x2c3bfa(0x34b)](_0x54481f,_0x2c3bfa(0x217))[_0x2c3bfa(0x34b)](_0x3bb9e9,_0x2c3bfa(0x2d2)),_0x2b66b1;}async function validateConfigFile(){const _0x2c1d90=_0x25417a,_0x45a8dd=dbConfig[_0x2c1d90(0x300)]('bots')[_0x2c1d90(0x2f4)](_0x2c1d90(0x21d))[_0x2c1d90(0x232)]()||[];if(_0x45a8dd['length']==0x0){let _0x36aa2f=0x0,_0xddb67b=[];const _0x44fcf0=/^bot-([0-9]{3})-config.json$/,_0x3bf24c=fs[_0x2c1d90(0x36c)](configpath);_0x3bf24c[_0x2c1d90(0x2ca)](_0x437747=>{const _0x225494=_0x2c1d90,_0x380bd7=_0x44fcf0['exec'](_0x437747);if(_0x380bd7){const _0x137f77=_0x380bd7[0x1];let _0x2b82db=getBotAttributes(_0x137f77);_0xddb67b[_0x225494(0x39e)]({'botID':_0x137f77,'botname':_0x2b82db[_0x225494(0x341)],'status':_0x225494(0x230),'live':'stopped'}),_0x36aa2f++;}}),_0x36aa2f!=0x0&&(dbConfig[_0x2c1d90(0x300)]('bots')[_0x2c1d90(0x329)](_0xddb67b)[_0x2c1d90(0x36d)](),config=_0xddb67b,restoredConfigFile=_0x36aa2f);}}async function restoreConfigNotify(_0x7b96ba){const _0x922a20=_0x25417a;let _0x525126;if(restoredConfigFile==0x1)_0x525126='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x525126=_0x922a20(0x24e);if(_0x7b96ba)io['to'](_0x922a20(0x28c))['emit'](_0x922a20(0x378),_0x525126);else{logger['simple']('-----------------------------------------------------------------------------------'),logger[_0x922a20(0x26b)](_0x525126),logger[_0x922a20(0x26b)](_0x922a20(0x3f0)),logger[_0x922a20(0x26b)]('');if(tgBot&&settings[_0x922a20(0x354)]&&settings[_0x922a20(0x31a)]!=_0x922a20(0x2a4))await sendTelegram(settings[_0x922a20(0x354)],_0x922a20(0x3af)+_0x525126);}}function validateCredentials(_0x270fed,_0x4fc015){const _0x4ce5b7=_0x25417a;if(_0x270fed[_0x4ce5b7(0x3ed)]==settings[_0x4ce5b7(0x20e)]&&bcrypt[_0x4ce5b7(0x35d)](_0x270fed[_0x4ce5b7(0x317)],settings[_0x4ce5b7(0x3b4)])){if(settings[_0x4ce5b7(0x37d)])return{'allow':![],'reason':_0x4ce5b7(0x3f4),'token':null};else{const _0x1e1c6c=generateLoginToken(_0x4fc015);return{'allow':!![],'reason':_0x4ce5b7(0x330),'token':_0x1e1c6c};}}else return{'allow':![],'reason':_0x4ce5b7(0x38e),'token':null};}function refreshToken(_0x1e833b){const _0x2f623a=_0x25417a,_0x3a64f4=generateLoginToken(_0x1e833b);return{'allow':!![],'reason':_0x2f623a(0x330),'token':_0x3a64f4};}function validateAccess(_0x22adf1,_0x47abd3,_0x11e5a0){const _0x190a02=_0x25417a,_0x1a891d=_0x11e5a0?_0x11e5a0:devices[_0x47abd3]['ip'];let _0x25c115;const _0x1c5ec0=_0x11042b=>{const _0x470d87=_0x6a6b;if(settings[_0x470d87(0x391)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x47abd3)){const _0x326f97=generateLoginToken(_0x47abd3);return{'allow':!![],'reason':_0x470d87(0x2f7),'token':_0x326f97};}else return{'allow':![],'reason':_0x470d87(0x3aa),'token':null};}else return _0x25c115=validToken(_0x11042b,_0x47abd3),_0x25c115[_0x470d87(0x2d4)](_0x470d87(0x2bb))?{'allow':!![],'reason':_0x470d87(0x3d3),'token':_0x11042b}:{'allow':![],'reason':_0x470d87(0x3aa),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x190a02(0x333)]){let _0x11d985=[...settings[_0x190a02(0x388)],_0x190a02(0x22e),'::ffff:127.0.0.1','127.0.0.1'];if(_0x11d985['includes'](_0x1a891d))return _0x1c5ec0(_0x22adf1);else{_0x25c115=validToken(_0x22adf1,_0x47abd3);if(_0x25c115['hasOwnProperty'](_0x190a02(0x2bb)))return _0x1c5ec0(_0x22adf1);else{if(telegramIpApproved(_0x47abd3)){const _0x19273c=generateToken(_0x47abd3);return _0x25c115=_0x1c5ec0(_0x22adf1),_0x25c115[_0x190a02(0x37e)]?{'allow':!![],'reason':_0x190a02(0x3d7),'token':_0x19273c}:_0x25c115;}else return settings[_0x190a02(0x35e)]?{'allow':![],'reason':_0x190a02(0x33b),'token':null}:{'allow':![],'reason':_0x190a02(0x215),'token':null};}}}else return _0x1c5ec0(_0x22adf1);}function timelyDecrypt(_0x49b2ce,_0x161224,_0x499fe0='@'){const _0x4d933a=_0x25417a;if(_0x49b2ce)try{const _0x402708=crypt[_0x4d933a(0x2ec)](secure['privateKey'],_0x49b2ce)[_0x4d933a(0x34d)],_0x481e26=_0x402708[_0x4d933a(0x268)](_0x499fe0)[0x0],_0x290f46=_0x402708['split'](_0x499fe0)[0x1],_0x234298=new Date()['getTime']();if(_0x161224){if(_0x234298-_0x290f46<maxSecretAge*0x3e8)return _0x481e26;else return![];}else return _0x481e26;}catch(_0x4d6a54){return![];}else return![];}const validToken=(_0x4fce55,_0x24a080)=>{const _0xa5e9ca=_0x25417a,_0x5f02f5=devices[_0x24a080]['ip'];if(!_0x4fce55)return{'error':_0xa5e9ca(0x3ee)};for(let _0x7dedc6 of blacklist){if(_0x7dedc6[_0xa5e9ca(0x368)]==_0x4fce55)return{'error':_0xa5e9ca(0x275)};}let _0x661fab;try{_0x661fab=jwt[_0xa5e9ca(0x3df)](_0x4fce55,secure[_0xa5e9ca(0x375)]+_0x24a080);}catch{return{'error':_0xa5e9ca(0x3bb)};}if(!_0x661fab[_0xa5e9ca(0x2d4)](_0xa5e9ca(0x336))&&!_0x661fab['hasOwnProperty'](_0xa5e9ca(0x3ed))||!_0x661fab[_0xa5e9ca(0x2d4)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x661fab['hasOwnProperty']('username')&&_0x661fab['hasOwnProperty'](_0xa5e9ca(0x336))){const {clientip:_0x4de917}=_0x661fab;return _0x5f02f5==_0x4de917?{'success':_0xa5e9ca(0x21e)}:{'error':_0xa5e9ca(0x2cf)};}else{if(_0x661fab[_0xa5e9ca(0x2d4)]('username')&&_0x661fab['hasOwnProperty'](_0xa5e9ca(0x336))){const {username:_0x17d153,clientip:_0x4554d6}=_0x661fab;return settings['bbUsername']==_0x17d153&&_0x5f02f5==_0x4554d6?{'success':_0xa5e9ca(0x21e)}:{'error':_0xa5e9ca(0x25d)};}}},generateLoginToken=_0x562402=>{const _0x4009a5=_0x25417a;if(_0x562402){const _0x242b04=devices[_0x562402]['ip'];return jwt[_0x4009a5(0x25c)]({'username':settings[_0x4009a5(0x20e)],'clientip':_0x242b04},secure[_0x4009a5(0x375)]+_0x562402,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x45b30e=>{const _0x4231e4=_0x25417a;if(_0x45b30e){const _0x33cdfd=devices[_0x45b30e]['ip'];return jwt[_0x4231e4(0x25c)]({'clientip':_0x33cdfd},secure[_0x4231e4(0x375)]+_0x45b30e,{'expiresIn':devices[_0x45b30e][_0x4231e4(0x305)][_0x4231e4(0x2d7)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x11163e=>{const _0x3e4836=_0x25417a;let _0x81644a=![];return devices[_0x11163e][_0x3e4836(0x305)]&&devices[_0x11163e][_0x3e4836(0x305)]['expiry']!=_0x3e4836(0x325)&&(_0x81644a=devices[_0x11163e]['telegramIpApproval'][_0x3e4836(0x336)]==devices[_0x11163e]['ip']&&new Date()[_0x3e4836(0x285)]()-devices[_0x11163e][_0x3e4836(0x305)][_0x3e4836(0x377)]<devices[_0x11163e][_0x3e4836(0x305)][_0x3e4836(0x2d7)]*0x3c*0x3e8),_0x81644a;},telegram2FaApproved=_0x4fa34b=>{const _0x42fd2f=_0x25417a;let _0x435745=![];return devices[_0x4fa34b]['telegram2FaApproval']&&devices[_0x4fa34b][_0x42fd2f(0x379)][_0x42fd2f(0x2d7)]!=_0x42fd2f(0x325)&&(_0x435745=devices[_0x4fa34b]['telegram2FaApproval'][_0x42fd2f(0x336)]==devices[_0x4fa34b]['ip']&&new Date()[_0x42fd2f(0x285)]()-devices[_0x4fa34b]['telegram2FaApproval'][_0x42fd2f(0x377)]<devices[_0x4fa34b][_0x42fd2f(0x379)][_0x42fd2f(0x2d7)]*0x3c*0x3e8),_0x435745;},normalizeIP=_0x39fe26=>{const _0x1bc3db=_0x25417a;let _0x1e32e5=null,_0x40be1e=null;if(ipaddr[_0x1bc3db(0x281)](_0x39fe26)){const _0x2ab356=ipaddr[_0x1bc3db(0x374)](_0x39fe26);_0x2ab356[_0x1bc3db(0x1f4)]()===_0x1bc3db(0x321)?(_0x2ab356['isIPv4MappedAddress']()&&(_0x1e32e5=_0x2ab356[_0x1bc3db(0x2b7)]()[_0x1bc3db(0x214)]()),_0x40be1e=_0x2ab356[_0x1bc3db(0x214)]()):(_0x1e32e5=_0x2ab356['toString'](),_0x40be1e=_0x2ab356['toIPv4MappedAddress']()[_0x1bc3db(0x214)]());}return{'show':_0x1e32e5?_0x1e32e5:_0x40be1e,'store':_0x40be1e};};function formatDate(_0x209c22){const _0x22cd97=_0x25417a;return _0x209c22[_0x22cd97(0x2c3)]()+'/'+(_0x209c22['getMonth']()+0x1)[_0x22cd97(0x214)]()['padStart'](0x2,'0')+'/'+_0x209c22[_0x22cd97(0x35f)]()['toString']()[_0x22cd97(0x231)](0x2,'0')+'\x20'+_0x209c22[_0x22cd97(0x20c)]()[_0x22cd97(0x214)]()[_0x22cd97(0x231)](0x2,'0')+':'+_0x209c22['getMinutes']()[_0x22cd97(0x214)]()['padStart'](0x2,'0')+':'+_0x209c22[_0x22cd97(0x349)]()[_0x22cd97(0x214)]()['padStart'](0x2,'0');}function sleep(_0x462ece){return new Promise(_0x52231c=>setTimeout(_0x52231c,_0x462ece));}