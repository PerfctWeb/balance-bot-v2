const _0x2cf2f2=_0xdf12;(function(_0xf7969c,_0x141e47){const _0x2d855a=_0xdf12,_0x4f11f6=_0xf7969c();while(!![]){try{const _0x5c61f3=-parseInt(_0x2d855a(0x345))/0x1+parseInt(_0x2d855a(0x1f8))/0x2+parseInt(_0x2d855a(0x358))/0x3+parseInt(_0x2d855a(0x321))/0x4*(parseInt(_0x2d855a(0x31d))/0x5)+-parseInt(_0x2d855a(0x218))/0x6+-parseInt(_0x2d855a(0x282))/0x7+-parseInt(_0x2d855a(0x25d))/0x8*(-parseInt(_0x2d855a(0x301))/0x9);if(_0x5c61f3===_0x141e47)break;else _0x4f11f6['push'](_0x4f11f6['shift']());}catch(_0x34af6b){_0x4f11f6['push'](_0x4f11f6['shift']());}}}(_0x1547,0x2cddd));const _0x5442b1=function(){let _0x5a30be=!![];return function(_0x3c7777,_0x265d51){const _0x46fd89=_0x5a30be?function(){const _0x4ba438=_0xdf12;if(_0x265d51){const _0x26eaf1=_0x265d51[_0x4ba438(0x2c5)](_0x3c7777,arguments);return _0x265d51=null,_0x26eaf1;}}:function(){};return _0x5a30be=![],_0x46fd89;};}(),_0xe6e47f=_0x5442b1(this,function(){const _0x213dc8=_0xdf12;return _0xe6e47f[_0x213dc8(0x289)]()[_0x213dc8(0x39c)](_0x213dc8(0x2d5))[_0x213dc8(0x289)]()[_0x213dc8(0x211)](_0xe6e47f)['search']('(((.+)+)+)+$');});_0xe6e47f();'use strict';process[_0x2cf2f2(0x1ff)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x2cf2f2(0x388)),fs=require('fs'),fns=require(_0x2cf2f2(0x2cb)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require(_0x2cf2f2(0x329)),Crypt=require('hybrid-crypto-js')[_0x2cf2f2(0x3a1)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x2cf2f2(0x22b)),jwt=require('jsonwebtoken'),ipaddr=require(_0x2cf2f2(0x3a7)),argv=require('yargs/yargs')(process[_0x2cf2f2(0x2ef)][_0x2cf2f2(0x267)](0x2))['argv'],uuidRandom=require(_0x2cf2f2(0x238)),TelegramBot=require(_0x2cf2f2(0x343)),Mixpanel=require(_0x2cf2f2(0x263)),axios=require(_0x2cf2f2(0x206)),{GraphQLClient,gql}=require(_0x2cf2f2(0x2d3)),util=require(_0x2cf2f2(0x37c)),fileUpload=require(_0x2cf2f2(0x331)),{networkInterfaces}=require('os'),PORT=argv[_0x2cf2f2(0x247)]||_0x2cf2f2(0x277),pattern=/^[0-9]{2,4}$/;!pattern[_0x2cf2f2(0x2d7)](PORT)&&(console[_0x2cf2f2(0x32a)](_0x2cf2f2(0x1ea)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x2cf2f2(0x2cc)](0x1));const HOST=argv[_0x2cf2f2(0x1f5)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process['versions'][_0x2cf2f2(0x374)];let bbpath=_0x2cf2f2(0x2e6),bbpath2='';const botfile=_0x2cf2f2(0x260),configfile=_0x2cf2f2(0x314),settingsfile=_0x2cf2f2(0x32b),securefile=_0x2cf2f2(0x272),environment=require('./'+bbpath2+_0x2cf2f2(0x2f9))[_0x2cf2f2(0x364)]||_0x2cf2f2(0x305),maxBackups=0xa;let validInstallation=!![];!fs[_0x2cf2f2(0x35b)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2cf2f2(0x2e5)),configpath=userID?bbpath+_0x2cf2f2(0x341)+userID+'/':bbpath+_0x2cf2f2(0x341),configbackuppath=configpath+_0x2cf2f2(0x2a9),logspath=userID?bbpath+_0x2cf2f2(0x2d4)+userID+'/':bbpath+_0x2cf2f2(0x2d4),zippath=userID?bbpath+_0x2cf2f2(0x205)+userID+'/':bbpath+_0x2cf2f2(0x205),loggerfile=fs[_0x2cf2f2(0x297)](logspath+_0x2cf2f2(0x27f),{'flags':'a'}),temppath=userID?bbpath+_0x2cf2f2(0x350)+userID+'/':bbpath+_0x2cf2f2(0x350);!fs[_0x2cf2f2(0x35b)](configpath)&&fs['mkdirSync'](configpath);!fs[_0x2cf2f2(0x35b)](configbackuppath)&&fs[_0x2cf2f2(0x3bd)](configbackuppath);!fs['existsSync'](logspath)&&fs[_0x2cf2f2(0x3bd)](logspath);!fs[_0x2cf2f2(0x35b)](zippath)&&fs[_0x2cf2f2(0x3bd)](zippath);!fs[_0x2cf2f2(0x35b)](temppath)&&fs[_0x2cf2f2(0x3bd)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2cf2f2(0x2f5)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2cf2f2(0x33d),'onepagemode':![]}})[_0x2cf2f2(0x23a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2cf2f2(0x2f5)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x2cf2f2(0x228),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x2cf2f2(0x392)](_0x2cf2f2(0x362),{'host':_0x2cf2f2(0x23b)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2cf2f2(0x2e9)]&&settings[_0x2cf2f2(0x2e9)]!=''&&settings[_0x2cf2f2(0x2c0)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x5ccb1e,_0x3fe6a7)=>{const _0x3bf562=_0x2cf2f2,_0x2ad881=/#[A-Z]{3}#/g;if(typeof _0x5ccb1e=='string'){!_0x3fe6a7?_0x5ccb1e=_0x5ccb1e[_0x3bf562(0x3b6)](_0x2ad881,''):(_0x5ccb1e=_0x5ccb1e[_0x3bf562(0x3b6)](/#BLU#/g,_0x3bf562(0x34a)),_0x5ccb1e=_0x5ccb1e['replace'](/#RED#/g,_0x3bf562(0x2f1)),_0x5ccb1e=_0x5ccb1e[_0x3bf562(0x3b6)](/#YEL#/g,'\x1b[33m'),_0x5ccb1e=_0x5ccb1e['replace'](/#MAG#/g,_0x3bf562(0x2d6)),_0x5ccb1e=_0x5ccb1e[_0x3bf562(0x3b6)](/#CYA#/g,'\x1b[36m'),_0x5ccb1e=_0x5ccb1e[_0x3bf562(0x3b6)](/#RES#/g,_0x3bf562(0x3a6)));;}return _0x5ccb1e;},logger={'screen':_0x372a07=>{console['log'](parseColor(_0x372a07,!![]));},'simple':_0x4e08d4=>{const _0x21e890=_0x2cf2f2;console[_0x21e890(0x32a)](parseColor(_0x4e08d4,!![])),loggerfile[_0x21e890(0x23a)](util['format'](parseColor(_0x4e08d4,![]))+'\x0a');},'full':async _0x1a5a05=>{const _0x28adef=_0x2cf2f2,_0x319d0f=getTimeStamp()+_0x28adef(0x2fb)+_0x1a5a05;console['log'](parseColor(_0x319d0f,!![])),loggerfile[_0x28adef(0x23a)](util['format'](parseColor(_0x319d0f,![]))+'\x0a');if(tgBot&&settings[_0x28adef(0x328)]&&settings['telegramEvents']!=_0x28adef(0x227))await tgBot[_0x28adef(0x38e)](settings[_0x28adef(0x328)],'Bot\x20Mgr\x20>\x20'+parseColor(_0x1a5a05,![]))[_0x28adef(0x367)](_0xf089f2=>{telegramError(_0xf089f2);});},'debug':async(_0x18cc6a,_0x1cdcf6='')=>{const _0x32964c=_0x2cf2f2,_0x181951=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x18cc6a;if(debugging)console[_0x32964c(0x32a)](parseColor(_0x181951,!![]));loggerfile[_0x32964c(0x23a)](util[_0x32964c(0x370)](parseColor(_0x181951,![]))+'\x0a');if(_0x1cdcf6){if(debugging)console[_0x32964c(0x32a)](_0x1cdcf6);loggerfile[_0x32964c(0x23a)](util[_0x32964c(0x370)](_0x1cdcf6)+'\x0a');}}};process['on'](_0x2cf2f2(0x262),function(_0x1e2448){logger['simple'](_0x1e2448);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x2cf2f2(0x2f9))[_0x2cf2f2(0x304)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];function _0xdf12(_0x45c94a,_0xa34c6d){const _0x19a47e=_0x1547();return _0xdf12=function(_0xe6e47f,_0x5442b1){_0xe6e47f=_0xe6e47f-0x1db;let _0x15470d=_0x19a47e[_0xe6e47f];return _0x15470d;},_0xdf12(_0x45c94a,_0xa34c6d);}const express=require(_0x2cf2f2(0x396)),app=express(),http=require(_0x2cf2f2(0x25b))[_0x2cf2f2(0x2e2)](app);app[_0x2cf2f2(0x36e)](fileUpload({'useTempFiles':!![]})),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x3a9),async(_0x3e4be5,_0x5c1b06)=>{const _0x3f2dbc=_0x2cf2f2,_0xf26d93=_0x3e4be5[_0x3f2dbc(0x2d8)][_0x3f2dbc(0x352)],_0x536965=getClientsWithBotID(_0x3f2dbc(0x2b2)),_0x593c0c=_0x3e4be5[_0x3f2dbc(0x34e)][_0x3f2dbc(0x356)],_0xd62d82=timelyDecrypt(_0x593c0c,![]),_0x17e283=_0x536965[_0x3f2dbc(0x33b)](_0x3e6e76=>_0x3e6e76[_0x3f2dbc(0x356)]==_0xd62d82);if(_0x17e283){const _0x2cd3b4=normalizeIP(_0x3e4be5[_0x3f2dbc(0x2a2)][_0x3f2dbc(0x3b8)])[_0x3f2dbc(0x339)],_0x589f5c=_0x3e4be5[_0x3f2dbc(0x34e)][_0x3f2dbc(0x21f)];if(validateAccess(_0x589f5c,_0xd62d82,_0x2cd3b4)[_0x3f2dbc(0x38a)])_0xf26d93==_0x3f2dbc(0x21a)&&await backupConfigFiles(),await zipFiles(_0xf26d93),_0x5c1b06[_0x3f2dbc(0x2df)](zippath+(_0xf26d93+_0x3f2dbc(0x300)),_0x15b71d=>{const _0x5529b8=_0x3f2dbc;_0x15b71d&&(logger['full'](_0x5529b8(0x276)+_0xf26d93),logger['simple'](_0x15b71d));});else logger[_0x3f2dbc(0x1f1)](_0x3f2dbc(0x3a8)+_0xf26d93+_0x3f2dbc(0x393));}else logger[_0x3f2dbc(0x1f1)](_0x3f2dbc(0x3a8)+_0xf26d93+_0x3f2dbc(0x2b4));}),app[_0x2cf2f2(0x3ba)](_0x2cf2f2(0x389),async(_0x631751,_0xc6f89c)=>{const _0x3168bd=_0x2cf2f2,_0x4cd638=getClientsWithBotID(_0x3168bd(0x2b2)),_0x31a866=_0x631751[_0x3168bd(0x34e)][_0x3168bd(0x356)],_0x312392=timelyDecrypt(_0x31a866,![]),_0x1f4f40=_0x4cd638[_0x3168bd(0x33b)](_0x909b29=>_0x909b29[_0x3168bd(0x356)]==_0x312392);logger[_0x3168bd(0x2ec)](_0x3168bd(0x27e));if(_0x1f4f40){const _0x463dbe=normalizeIP(_0x631751[_0x3168bd(0x2a2)][_0x3168bd(0x3b8)])['store'],_0xe41027=_0x631751[_0x3168bd(0x34e)][_0x3168bd(0x21f)];if(validateAccess(_0xe41027,_0x312392,_0x463dbe)[_0x3168bd(0x38a)]){if(_0x631751['files']){const _0x3cac9a=_0x631751['files']['backupfile'];await _0x3cac9a['mv'](temppath+_0x3cac9a['name']),_0xc6f89c[_0x3168bd(0x250)]({'status':!![],'message':_0x3168bd(0x232)});const _0x8f53ee=getBotsWithMode();_0x8f53ee[_0x3168bd(0x2bd)]>0x0?confirmRestore(temppath,_0x3cac9a[_0x3168bd(0x2ea)]):unzipFile(temppath,_0x3cac9a['name']);}}else logger[_0x3168bd(0x1f1)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x3168bd(0x1f1)](_0x3168bd(0x2ce));}),app['use'](express[_0x2cf2f2(0x387)](path[_0x2cf2f2(0x319)](__dirname,bbpath2,_0x2cf2f2(0x24f)))),app['use'](express[_0x2cf2f2(0x387)](path['join'](__dirname,bbpath2,_0x2cf2f2(0x25c)))),app['get']('/',function(_0x4ba528,_0xbef7ed){const _0x56da84=_0x2cf2f2;_0xbef7ed[_0x56da84(0x2be)](path[_0x56da84(0x319)](__dirname,bbpath2,_0x56da84(0x24f),'index.html'));}),app['get'](_0x2cf2f2(0x234),function(_0x54f17d,_0x29f8fa){const _0x142dad=_0x2cf2f2;_0x29f8fa[_0x142dad(0x2be)](path[_0x142dad(0x319)](__dirname,bbpath2,_0x142dad(0x25c),'index.html'));}),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x2e4),(_0x2b70cc,_0x5bf725)=>{const _0xba461=_0x2cf2f2;_0x5bf725[_0xba461(0x2be)](path[_0xba461(0x319)](__dirname,bbpath2,'build',_0xba461(0x21e)));}),app[_0x2cf2f2(0x20c)]('/:bot/performance',(_0x1b3d80,_0x220103)=>{const _0x2c4491=_0x2cf2f2;_0x220103[_0x2c4491(0x2be)](path[_0x2c4491(0x319)](__dirname,bbpath2,'build',_0x2c4491(0x21e)));}),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x1f7),(_0xc0d008,_0x5eec2d)=>{const _0x3db3e1=_0x2cf2f2;_0x5eec2d[_0x3db3e1(0x2be)](path[_0x3db3e1(0x319)](__dirname,bbpath2,_0x3db3e1(0x25c),'index.html'));}),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x365),(_0x4b8f75,_0x40edc7)=>{const _0x4d8961=_0x2cf2f2;_0x40edc7[_0x4d8961(0x2be)](path[_0x4d8961(0x319)](__dirname,bbpath2,_0x4d8961(0x25c),_0x4d8961(0x21e)));}),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x397),(_0x1875a8,_0x583f24)=>{const _0x4f3a23=_0x2cf2f2;_0x583f24['sendFile'](path['join'](__dirname,bbpath2,'build',_0x4f3a23(0x21e)));}),app[_0x2cf2f2(0x20c)](_0x2cf2f2(0x307),(_0x81d85c,_0xbff6f0)=>{const _0x54fa4a=_0x2cf2f2;_0xbff6f0['sendFile'](path[_0x54fa4a(0x319)](__dirname,bbpath2,_0x54fa4a(0x25c),_0x54fa4a(0x21e)));});if(HOST)http[_0x2cf2f2(0x278)](PORT,HOST);else http[_0x2cf2f2(0x278)](PORT);const io=require('socket.io')(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x4bf052=_0x2cf2f2;let _0x1e0ee1=_0x4bf052(0x332);const _0x1ae996=networkInterfaces(),_0xe1b594={};for(const _0x3e384e of Object[_0x4bf052(0x390)](_0x1ae996)){for(const _0x145fa6 of _0x1ae996[_0x3e384e]){if((_0x145fa6[_0x4bf052(0x38f)]==_0x4bf052(0x378)||_0x145fa6[_0x4bf052(0x38f)]==0x4)&&!_0x145fa6[_0x4bf052(0x23e)]){const _0x53df0b=ipaddr[_0x4bf052(0x340)](_0x145fa6[_0x4bf052(0x2d1)])[_0x4bf052(0x379)]();_0x53df0b!=_0x4bf052(0x270)&&(!_0xe1b594[_0x3e384e]&&(_0xe1b594[_0x3e384e]=[]),_0xe1b594[_0x3e384e][_0x4bf052(0x20b)](_0x145fa6['address']),_0x1e0ee1=_0x145fa6[_0x4bf052(0x2d1)]);}}}return{'serverip':_0x1e0ee1,'netinterfaces':_0xe1b594};}async function startServer(){const _0x134a65=_0x2cf2f2,{serverip:_0xd829a5,netinterfaces:_0x31f6c4}=getServerIP();logger['simple'](''),logger[_0x134a65(0x21c)](_0x134a65(0x316)),await logger[_0x134a65(0x1f1)](_0x134a65(0x2b6)+serverversion+_0x134a65(0x233)+(environment==_0x134a65(0x31a)?_0x134a65(0x274):'')+'\x0a'+(_0x134a65(0x1fc)+PORT+_0x134a65(0x312))+(_0x134a65(0x201)+_0xd829a5+':'+PORT+_0x134a65(0x322))),logger[_0x134a65(0x21c)](_0x134a65(0x316));if(config[_0x134a65(0x2bd)]!=0x0)for(const _0x4f0e49 of config){if(_0x4f0e49[_0x134a65(0x2fc)]==_0x134a65(0x27a)||_0x4f0e49['status']==_0x134a65(0x1e4))await logger['full'](_0x134a65(0x2a1)+_0x4f0e49[_0x134a65(0x30e)]+_0x134a65(0x237)+_0x4f0e49['botname']),startBot([_0x4f0e49['botID'],userID],{'cwd':bbpath},function(_0x280ee1){const _0x47789b=_0x134a65;if(_0x280ee1)logger[_0x47789b(0x1f1)](_0x280ee1);});else(_0x4f0e49[_0x134a65(0x2fc)]==_0x134a65(0x20a)||_0x4f0e49['status']==_0x134a65(0x244))&&await logger[_0x134a65(0x1f1)](_0x134a65(0x3c3)+_0x4f0e49[_0x134a65(0x30e)]+'\x20|\x20'+_0x4f0e49[_0x134a65(0x3af)]);}else!newBot&&logger[_0x134a65(0x21c)](_0x134a65(0x354));if(newBot)addBot();logger[_0x134a65(0x21c)](_0x134a65(0x316)),logger[_0x134a65(0x21c)](''),await logger[_0x134a65(0x2ec)](_0x134a65(0x1e5)+nodeversion),await logger[_0x134a65(0x2ec)](_0x134a65(0x3b4),_0x31f6c4);}function startSocket(){const _0x336161=_0x2cf2f2;io['on'](_0x336161(0x217),_0x37dc8b=>{const _0x2025cc=_0x336161;let _0x4c4e99,_0x4eb012,_0x6e1b5b,_0x3a85fa,_0x172ad3;const _0x3c790a=_0x37dc8b[_0x2025cc(0x3ab)][_0x2025cc(0x34e)][_0x2025cc(0x26f)];_0x4eb012=_0x3c790a[_0x2025cc(0x376)](/bot[0-9]{3}/);if(_0x4eb012)_0x6e1b5b=_0x4eb012[0x0]['match'](/[0-9]{3}/);if(_0x6e1b5b)_0x4c4e99=_0x6e1b5b[0x0];else _0x4c4e99=_0x2025cc(0x2b2);const _0xd4ba16=_0x37dc8b['handshake'][_0x2025cc(0x32e)][_0x2025cc(0x28f)];if(!_0xd4ba16)_0x37dc8b[_0x2025cc(0x2eb)](_0x2025cc(0x2fc),{'publicKey':secure[_0x2025cc(0x2aa)]});else{_0x3a85fa=timelyDecrypt(_0xd4ba16,![]);if(!_0x3a85fa)_0x37dc8b[_0x2025cc(0x2eb)](_0x2025cc(0x2fc),{'publicKey':secure['publicKey']});else{_0x172ad3=normalizeIP(_0x37dc8b[_0x2025cc(0x38d)][_0x2025cc(0x3b8)])[_0x2025cc(0x339)];if(!devices[_0x3a85fa])devices[_0x3a85fa]={'uuid':_0x3a85fa,'access':{'token':null}};devices[_0x3a85fa]['ip']=_0x172ad3;const _0x2d81d2=addClient(_0x37dc8b['id'],_0x3a85fa,_0x4c4e99);setAccess(_0x2d81d2),emitMessages(),_0x37dc8b['on']('login',_0x2ae922=>{const _0x3cd5dc=_0x2025cc,_0x5c1111=timelyDecrypt(_0x2ae922[_0x3cd5dc(0x22d)]);if(_0x5c1111){_0x2ae922={'username':_0x2ae922[_0x3cd5dc(0x383)],'password':_0x5c1111},devices[_0x3a85fa]['access']=validateCredentials(_0x2ae922,_0x3a85fa);if(devices[_0x3a85fa][_0x3cd5dc(0x338)][_0x3cd5dc(0x38a)]==![]&&devices[_0x3a85fa][_0x3cd5dc(0x338)]['reason']==_0x3cd5dc(0x1ee))_0x37dc8b[_0x3cd5dc(0x2eb)](_0x3cd5dc(0x2fc),{'access':devices[_0x3a85fa]['access']}),loginAccess2FA(_0x3a85fa,_0x172ad3);else{if(devices[_0x3a85fa][_0x3cd5dc(0x338)][_0x3cd5dc(0x38a)]==![]&&devices[_0x3a85fa][_0x3cd5dc(0x338)][_0x3cd5dc(0x31c)]==_0x3cd5dc(0x254))_0x37dc8b['emit'](_0x3cd5dc(0x2fc),{'access':devices[_0x3a85fa]['access']});else devices[_0x3a85fa]['access']['allow']&&devices[_0x3a85fa][_0x3cd5dc(0x338)][_0x3cd5dc(0x31c)]==_0x3cd5dc(0x30d)&&(getClientsWithUuid(_0x3a85fa)['forEach'](_0x4c68f4=>{setAccess(_0x4c68f4);}),logger['debug'](_0x3cd5dc(0x35c)+_0x3a85fa['slice'](-0x8)),setTokenRefresh(_0x3a85fa),setSessionTimeout(_0x3cd5dc(0x1f4),_0x3a85fa));}}else logger['full'](_0x3cd5dc(0x249));}),_0x37dc8b['on'](_0x2025cc(0x25a),()=>{resetPassword();}),_0x37dc8b['on']('disconnect',_0xf0dec6=>{removeClient(_0x37dc8b['id']);}),_0x4c4e99==_0x2025cc(0x2b2)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x311977){const _0x38ea75=_0x2cf2f2;if(_0x311977!=_0x38ea75(0x2b2)&&config[_0x38ea75(0x398)]!=''){if(pid[_0x311977])pid[_0x311977][_0x38ea75(0x250)]({'function':'initclient','args':null});}_0x311977!=_0x38ea75(0x2b2)&&broadcastToBots('bots',JSON[_0x38ea75(0x28e)](config));}function reloadBotManager(){const _0x5a39f0=_0x2cf2f2;getClientsWithBotID(_0x5a39f0(0x2b2))['forEach'](_0x519965=>{const _0x1a7ed1=_0x5a39f0;getSocket(_0x519965['id'])[_0x1a7ed1(0x2eb)]('status',{'access':{'allow':![],'reason':_0x1a7ed1(0x30a),'token':null}});});}function getSocket(_0x43532e){return io['sockets']['sockets']['get'](_0x43532e);}function setAccess(_0x592174){const _0x296d8b=_0x2cf2f2,_0x244219=getSocket(_0x592174['id']),_0x3161a3=_0x592174['uuid'],_0x457a7f=_0x592174[_0x296d8b(0x1dc)];devices[_0x3161a3][_0x296d8b(0x338)]=validateAccess(devices[_0x3161a3]['access'][_0x296d8b(0x21d)],_0x3161a3),logger[_0x296d8b(0x2ec)](_0x296d8b(0x32d)+devices[_0x3161a3][_0x296d8b(0x338)][_0x296d8b(0x31c)]+_0x296d8b(0x283)+_0x592174['id'][_0x296d8b(0x267)](-0x8)+'\x20|\x20user:\x20...'+_0x3161a3[_0x296d8b(0x267)](-0x8)),_0x244219[_0x296d8b(0x319)](_0x3161a3);if(devices[_0x3161a3]['access']['allow']){_0x244219[_0x296d8b(0x319)](_0x457a7f);if(_0x457a7f==_0x296d8b(0x2b2))initializeSocketBotManager(_0x244219);else initializeSocketBot(_0x244219);initClient(_0x457a7f);}devices[_0x3161a3][_0x296d8b(0x338)][_0x296d8b(0x21d)]&&devices[_0x3161a3]['access']['reason']==_0x296d8b(0x344)&&setSessionTimeout(_0x296d8b(0x265),_0x3161a3),devices[_0x3161a3]['access']['token']&&devices[_0x3161a3]['access'][_0x296d8b(0x31c)]==_0x296d8b(0x2ac)&&setSessionTimeout(_0x296d8b(0x1f4),_0x3161a3),_0x244219[_0x296d8b(0x2eb)](_0x296d8b(0x2fc),{'status':_0x592174[_0x296d8b(0x2cf)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3161a3][_0x296d8b(0x338)],'externalip':devices[_0x3161a3]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x296d8b(0x306)],'validInstallation':validInstallation}),devices[_0x3161a3]['access'][_0x296d8b(0x38a)]==![]&&devices[_0x3161a3][_0x296d8b(0x338)][_0x296d8b(0x31c)]=='2FA\x20required'&&temporaryAccess2FA(_0x3161a3,devices[_0x3161a3]['ip']);}function setSessionTimeout(_0x170be9,_0x2286b9){const _0x19458c=_0x2cf2f2;let _0x58a7e1;if(_0x170be9==_0x19458c(0x1f4))_0x58a7e1=loginExpiry*0x3c*0x3e8;else _0x58a7e1=devices[_0x2286b9][_0x19458c(0x281)][_0x19458c(0x1dd)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x2286b9][_0x19458c(0x281)]['timestamp']);if(devices[_0x2286b9][_0x19458c(0x2f3)])clearTimeout(devices[_0x2286b9][_0x19458c(0x2f3)]);devices[_0x2286b9][_0x19458c(0x2f3)]=setTimeout(()=>{const _0xb1eb38=_0x19458c;if(devices[_0x2286b9]['pidRefreshToken'])clearTimeout(devices[_0x2286b9][_0xb1eb38(0x264)]);removeSocketListeners(_0x2286b9),addBlacklist(_0x2286b9),devices[_0x2286b9][_0xb1eb38(0x281)]=null,devices[_0x2286b9][_0xb1eb38(0x230)]=null,devices[_0x2286b9][_0xb1eb38(0x338)][_0xb1eb38(0x21d)]=null,logger[_0xb1eb38(0x2ec)](_0xb1eb38(0x386)+_0x2286b9[_0xb1eb38(0x267)](-0x8)),devices[_0x2286b9][_0xb1eb38(0x338)]=validateAccess(devices[_0x2286b9][_0xb1eb38(0x338)][_0xb1eb38(0x21d)],_0x2286b9),!(devices[_0x2286b9][_0xb1eb38(0x338)]['allow']&&devices[_0x2286b9][_0xb1eb38(0x338)][_0xb1eb38(0x31c)]==_0xb1eb38(0x1f6))&&(_0x170be9==_0xb1eb38(0x1f4)?io['to'](_0x2286b9)[_0xb1eb38(0x2eb)]('status',{'access':{'allow':![],'reason':_0xb1eb38(0x241),'token':null}}):io['to'](_0x2286b9)[_0xb1eb38(0x2eb)]('status',{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x2286b9][_0xb1eb38(0x338)][_0xb1eb38(0x21d)]=null;},_0x58a7e1);}function setTokenRefresh(_0x36f8c4){const _0x3ee5fc=_0x2cf2f2;if(devices[_0x36f8c4][_0x3ee5fc(0x264)])clearTimeout(devices[_0x36f8c4][_0x3ee5fc(0x264)]);devices[_0x36f8c4]['pidRefreshToken']=setTimeout(()=>{const _0xb3ea9=_0x3ee5fc;getClientsWithUuid(_0x36f8c4)['length']!=0x0?(devices[_0x36f8c4][_0xb3ea9(0x338)]=refreshToken(_0x36f8c4),io['to'](_0x36f8c4)[_0xb3ea9(0x2eb)](_0xb3ea9(0x2fc),{'status':_0xb3ea9(0x351),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x36f8c4]['access'],'externalip':devices[_0x36f8c4]['ip'],'publicKey':secure[_0xb3ea9(0x2aa)],'validInstallation':validInstallation}),setTokenRefresh(_0x36f8c4)):clearTimeout(devices[_0x36f8c4]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x294b62){const _0x117966=_0x2cf2f2,_0x318551=getClient(_0x294b62['id'])[_0x117966(0x356)];_0x294b62[_0x117966(0x2eb)](_0x117966(0x31b),config),_0x294b62[_0x117966(0x2eb)]('settings',cleanSettings()),_0x294b62['on']('add-bot',_0x51932c=>{const _0x27dc46=_0x117966;if(validateAccess(_0x51932c,_0x318551)[_0x27dc46(0x38a)])addBot();else logger[_0x27dc46(0x1f1)](_0x27dc46(0x35a));}),_0x294b62['on'](_0x117966(0x34d),(_0x2939fe,_0x20de34)=>{const _0x33ff57=_0x117966;if(validateAccess(_0x20de34,_0x318551)[_0x33ff57(0x38a)])toggleBot(_0x2939fe[_0x33ff57(0x30e)],_0x2939fe['status'],_0x2939fe[_0x33ff57(0x394)]);else logger[_0x33ff57(0x1f1)](_0x33ff57(0x29b));}),_0x294b62['on'](_0x117966(0x2a0),(_0x22382b,_0x2d994b)=>{const _0x72bc98=_0x117966;if(validateAccess(_0x2d994b,_0x318551)['allow'])toggleBotMode(_0x22382b);else logger[_0x72bc98(0x1f1)](_0x72bc98(0x29b));}),_0x294b62['on'](_0x117966(0x24b),(_0x34eddd,_0x405857)=>{const _0x3d5ddb=_0x117966;if(validateAccess(_0x405857,_0x318551)['allow'])deleteBot(_0x34eddd);else logger['full'](_0x3d5ddb(0x20f));}),_0x294b62['on']('store-settings',(_0x56e976,_0xfd2ddd)=>{const _0x41cf28=_0x117966;if(validateAccess(_0xfd2ddd,_0x318551)[_0x41cf28(0x38a)])storeSettings(_0x56e976,!![]);else logger[_0x41cf28(0x1f1)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x294b62['on'](_0x117966(0x215),_0x562b85=>{const _0x2992d6=_0x117966;if(validateAccess(_0x562b85,_0x318551)['allow'])updateBB('update');else logger['full'](_0x2992d6(0x229));}),_0x294b62['on'](_0x117966(0x346),_0x45eb2f=>{const _0x15ac78=_0x117966;if(validateAccess(_0x45eb2f,_0x318551)[_0x15ac78(0x38a)])updateBB(_0x15ac78(0x1ec));else logger['full'](_0x15ac78(0x286));}),_0x294b62['on'](_0x117966(0x294),_0x4859bb=>{const _0x41c915=_0x117966;if(validateAccess(_0x4859bb,_0x318551)[_0x41c915(0x38a)]){const _0x59e626=getClient(_0x294b62['id']);if(_0x59e626)getBackupFiles(_0x59e626[_0x41c915(0x356)]);else logger[_0x41c915(0x1f1)](_0x41c915(0x327));}else logger[_0x41c915(0x1f1)](_0x41c915(0x2c1));}),_0x294b62['on'](_0x117966(0x226),(_0x53a38b,_0x5e851f)=>{const _0x18cb71=_0x117966;if(validateAccess(_0x5e851f,_0x318551)[_0x18cb71(0x38a)])restoreBackupFile(_0x53a38b);else logger[_0x18cb71(0x1f1)](_0x18cb71(0x326));}),_0x294b62['on']('get-messages',_0x30a14d=>{const _0x183a5a=_0x117966;if(validateAccess(_0x30a14d,_0x318551)['allow'])getMessages();else logger['full'](_0x183a5a(0x2f6));}),_0x294b62['on'](_0x117966(0x1f3),(_0x552c26,_0xfc716c)=>{const _0x40b0ad=_0x117966;if(validateAccess(_0xfc716c,_0x318551)[_0x40b0ad(0x38a)])confirmMessage(_0x552c26);else logger['full'](_0x40b0ad(0x3b9));}),_0x294b62['on'](_0x117966(0x269),_0x38254e=>{const _0x325c43=_0x117966;if(validateAccess(_0x38254e,_0x318551)[_0x325c43(0x38a)]){if(devices[_0x318551][_0x325c43(0x264)])clearTimeout(devices[_0x318551]['pidRefreshToken']);if(devices[_0x318551][_0x325c43(0x2f3)])clearTimeout(devices[_0x318551][_0x325c43(0x2f3)]);removeSocketListeners(getClient(_0x294b62['id'])['uuid']),addBlacklist(_0x318551),devices[_0x318551][_0x325c43(0x281)]=null,devices[_0x318551][_0x325c43(0x230)]=null,devices[_0x318551][_0x325c43(0x338)][_0x325c43(0x21d)]=null,logger[_0x325c43(0x2ec)](_0x325c43(0x298)+_0x318551[_0x325c43(0x267)](-0x8)),io['to'](getClient(_0x294b62['id'])[_0x325c43(0x356)])['emit'](_0x325c43(0x2fc),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x325c43(0x37f));});}function initializeSocketBot(_0x3ff3e3){const _0x4943e0=_0x2cf2f2,_0x24c7d4=getClient(_0x3ff3e3['id'])[_0x4943e0(0x1dc)],_0x5a63fd=getClient(_0x3ff3e3['id'])[_0x4943e0(0x356)];_0x3ff3e3['on']('get-logs',(_0x50e968,_0x3f33b3)=>{const _0xec2b71=_0x4943e0;if(validateAccess(_0x3f33b3,_0x5a63fd)[_0xec2b71(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4][_0xec2b71(0x250)]({'function':_0xec2b71(0x1de),'args':_0x50e968});}else logger[_0xec2b71(0x1f1)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x3ff3e3['on']('delete-alerts',(_0x571260,_0x376221)=>{const _0x410c30=_0x4943e0;if(validateAccess(_0x376221,_0x5a63fd)[_0x410c30(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4]['send']({'function':_0x410c30(0x284),'args':_0x571260});}else logger[_0x410c30(0x1f1)](_0x410c30(0x21b));}),_0x3ff3e3['on'](_0x4943e0(0x330),(_0x3ae0f3,_0x50a543)=>{const _0x112e04=_0x4943e0;if(validateAccess(_0x50a543,_0x5a63fd)[_0x112e04(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4]['send']({'function':_0x112e04(0x22c),'args':_0x3ae0f3});}else logger[_0x112e04(0x1f1)](_0x112e04(0x287));}),_0x3ff3e3['on'](_0x4943e0(0x2dc),(_0x760833,_0x2ffa96)=>{const _0x562e7c=_0x4943e0;if(validateAccess(_0x2ffa96,_0x5a63fd)[_0x562e7c(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4][_0x562e7c(0x250)]({'function':_0x562e7c(0x2c6),'args':_0x760833});}else logger[_0x562e7c(0x1f1)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x3ff3e3['on']('store-headless',(_0x3fef22,_0x1184bc)=>{const _0x61e4cb=_0x4943e0;if(validateAccess(_0x1184bc,_0x5a63fd)[_0x61e4cb(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4]['send']({'function':'storeHeadless','args':_0x3fef22});}else logger[_0x61e4cb(0x1f1)](_0x61e4cb(0x2f8));}),_0x3ff3e3['on'](_0x4943e0(0x37a),(_0x446401,_0x7e0d43)=>{const _0x22156c=_0x4943e0;if(validateAccess(_0x7e0d43,_0x5a63fd)['allow']){if(pid[_0x24c7d4])pid[_0x24c7d4][_0x22156c(0x250)]({'function':_0x22156c(0x1e2),'args':_0x446401});}else logger[_0x22156c(0x1f1)](_0x22156c(0x373));}),_0x3ff3e3['on'](_0x4943e0(0x2ba),_0x3f7f15=>{const _0xdd929b=_0x4943e0;if(validateAccess(_0x3f7f15,_0x5a63fd)['allow']){if(pid[_0x24c7d4])pid[_0x24c7d4][_0xdd929b(0x250)]({'function':'resetHistory','args':null});}else logger['full'](_0xdd929b(0x268));}),_0x3ff3e3['on']('get-starting-balances',_0x1f530b=>{const _0x25dd46=_0x4943e0;if(validateAccess(_0x1f530b,_0x5a63fd)['allow']){if(pid[_0x24c7d4])pid[_0x24c7d4][_0x25dd46(0x250)]({'function':_0x25dd46(0x3be),'args':null});}else logger[_0x25dd46(0x1f1)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x3ff3e3['on'](_0x4943e0(0x311),(_0x54f0d9,_0x2eeb5d)=>{const _0xb561e2=_0x4943e0;if(validateAccess(_0x2eeb5d,_0x5a63fd)[_0xb561e2(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4][_0xb561e2(0x250)]({'function':_0xb561e2(0x347),'args':_0x54f0d9});}else logger['full'](_0xb561e2(0x30f));}),_0x3ff3e3['on'](_0x4943e0(0x3b7),_0x21480d=>{const _0x530465=_0x4943e0;if(validateAccess(_0x21480d,_0x5a63fd)['allow']){if(pid[_0x24c7d4])pid[_0x24c7d4][_0x530465(0x250)]({'function':_0x530465(0x2a3),'args':null});}else logger[_0x530465(0x1f1)]('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x3ff3e3['on'](_0x4943e0(0x34b),_0x28567a=>{const _0x3c9c46=_0x4943e0;if(validateAccess(_0x28567a,_0x5a63fd)[_0x3c9c46(0x38a)]){if(pid[_0x24c7d4])pid[_0x24c7d4]['send']({'function':_0x3c9c46(0x317),'args':null});}else logger[_0x3c9c46(0x1f1)](_0x3c9c46(0x30b));}),_0x3ff3e3['on']('update-bb',_0x364633=>{const _0x1a7367=_0x4943e0;if(validateAccess(_0x364633,_0x5a63fd)['allow'])updateBB('update');else logger[_0x1a7367(0x1f1)](_0x1a7367(0x229));}),_0x3ff3e3['on'](_0x4943e0(0x38b),_0x8573ad=>{const _0x3c1211=_0x4943e0;if(validateAccess(_0x8573ad,_0x5a63fd)[_0x3c1211(0x38a)])getMessages();else logger['full'](_0x3c1211(0x2f6));}),_0x3ff3e3['on'](_0x4943e0(0x1f3),(_0x215edc,_0x58f64e)=>{const _0x396ca7=_0x4943e0;if(validateAccess(_0x58f64e,_0x5a63fd)[_0x396ca7(0x38a)])confirmMessage(_0x215edc);else logger[_0x396ca7(0x1f1)](_0x396ca7(0x3b9));}),_0x3ff3e3['on'](_0x4943e0(0x269),_0x4b2c59=>{const _0x31f2c5=_0x4943e0;if(validateAccess(_0x4b2c59,_0x5a63fd)['allow']){if(devices[_0x5a63fd]['pidRefreshToken'])clearTimeout(devices[_0x5a63fd][_0x31f2c5(0x264)]);if(devices[_0x5a63fd][_0x31f2c5(0x2f3)])clearTimeout(devices[_0x5a63fd]['pidExpireLogin']);removeSocketListeners(getClient(_0x3ff3e3['id'])[_0x31f2c5(0x356)]),addBlacklist(_0x5a63fd),devices[_0x5a63fd]['telegramIpApproval']=null,devices[_0x5a63fd]['telegram2FaApproval']=null,devices[_0x5a63fd][_0x31f2c5(0x338)]['token']=null,logger[_0x31f2c5(0x2ec)](_0x31f2c5(0x298)+_0x5a63fd[_0x31f2c5(0x267)](-0x8)),io['to'](getClient(_0x3ff3e3['id'])[_0x31f2c5(0x356)])[_0x31f2c5(0x2eb)](_0x31f2c5(0x2fc),{'access':{'allow':![],'reason':_0x31f2c5(0x2de),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x284557){const _0x1309d1=_0x2cf2f2;getClientsWithUuid(_0x284557)[_0x1309d1(0x1db)](_0x100397=>{getSocket(_0x100397['id'])['removeAllListeners']();});}function cleanSettings(){const _0x5c7fdc=_0x2cf2f2;let _0x51a14c=settings;return settings['telegramToken']&&settings[_0x5c7fdc(0x2e9)]!=''&&(_0x51a14c={..._0x51a14c,'telegramToken':_0x5c7fdc(0x303)}),settings[_0x5c7fdc(0x39a)]&&settings[_0x5c7fdc(0x39a)]!=''&&(_0x51a14c={..._0x51a14c,'bbPassword':_0x5c7fdc(0x303)}),(settings[_0x5c7fdc(0x39a)]&&settings['bbPassword']==_0x5c7fdc(0x202)||settings['telegramToken']&&settings[_0x5c7fdc(0x2e9)]=='***')&&(_0x51a14c={..._0x51a14c,'restored':{'password':settings['bbPassword']==_0x5c7fdc(0x202),'telegram':settings[_0x5c7fdc(0x2e9)]=='***'}}),_0x51a14c;}async function updateBB(_0xd39feb){const _0x3df147=_0x2cf2f2;await backupConfigFiles(),installingUpdate=!![],config[_0x3df147(0x1db)](_0x2fd8c4=>{const _0x5da468=_0x3df147;restartBot(_0x2fd8c4[_0x5da468(0x30e)]);});if(_0xd39feb==_0x3df147(0x39d))process[_0x3df147(0x250)]({'update':!![],'environment':environment},_0x112e80=>{});else _0xd39feb==_0x3df147(0x1ec)&&process[_0x3df147(0x250)]({'reinstall':!![],'environment':environment},_0x6271b6=>{});}function startBot(_0x55f665,_0x13a9dc,_0x124713){const _0x3897c3=_0x2cf2f2;if(debugging)_0x55f665[_0x3897c3(0x20b)]('-d');let _0x1ea87a=![];const _0x3e9b3a=_0x55f665[0x0];_0x13a9dc={..._0x13a9dc,'stdio':[_0x3897c3(0x214),_0x3897c3(0x214),_0x3897c3(0x214),_0x3897c3(0x1e0)]},pid[_0x3e9b3a]=childProcess['fork'](botfile,_0x55f665,_0x13a9dc),pid[_0x3e9b3a]['on'](_0x3897c3(0x1fe),_0x2bbf80=>{const _0x842798=_0x3897c3;switch(Object[_0x842798(0x390)](_0x2bbf80)[0x0]){case _0x842798(0x3af):updateBotName(_0x3e9b3a,_0x2bbf80['botname']);break;case'updatebotmanager':updateBotManager();break;case _0x842798(0x2fc):updateStatus(_0x3e9b3a,_0x2bbf80['status']);break;case _0x842798(0x394):updateLive(_0x3e9b3a,_0x2bbf80[_0x842798(0x394)]);break;case _0x842798(0x1fb):updateLive(_0x3e9b3a,_0x2bbf80[_0x842798(0x1fb)]),io['to'](_0x3e9b3a)[_0x842798(0x2eb)](_0x842798(0x2fc),{'access':{'allow':![],'reason':_0x842798(0x30a),'token':null}});break;case'stop':_0x2bbf80[_0x842798(0x357)]=='restart'&&restartBot(_0x3e9b3a);_0x2bbf80[_0x842798(0x357)]==_0x842798(0x318)&&toggleBot(_0x3e9b3a,'disabled',_0x842798(0x225));break;case _0x842798(0x355):sendTelegram(_0x3e9b3a,_0x2bbf80['telegram']);break;case _0x842798(0x200):sendTelegramMsg(_0x2bbf80[_0x842798(0x200)]);break;case _0x842798(0x366):io['to'](_0x3e9b3a)[_0x842798(0x2eb)](_0x2bbf80[_0x842798(0x366)],_0x2bbf80[_0x842798(0x29c)]);break;}}),pid[_0x3e9b3a]['on'](_0x3897c3(0x380),function(_0x55824c){if(_0x1ea87a)return;_0x1ea87a=!![],_0x124713(_0x55824c);}),pid[_0x3e9b3a]['on'](_0x3897c3(0x2cc),async function(_0x539de3){const _0x2e329c=_0x3897c3;if(installingUpdate)return;if(_0x1ea87a)return;_0x1ea87a=!![],_0x124713(null);const _0x2b10db=dbConfig[_0x2e329c(0x20c)](_0x2e329c(0x31b))['find']({'botID':_0x3e9b3a})[_0x2e329c(0x279)]();_0x2b10db&&(_0x2b10db[_0x2e329c(0x2fc)]==_0x2e329c(0x27a)||_0x2b10db[_0x2e329c(0x2fc)]==_0x2e329c(0x1e4))&&(await sleep(0x3e8),updateLive(_0x3e9b3a,'stopped'),logger[_0x2e329c(0x1f1)]('Restarting\x20Bot\x20'+_0x3e9b3a),startBot([_0x3e9b3a,userID],{'cwd':bbpath},function(_0x80e0e5){const _0x3cdd31=_0x2e329c;if(_0x80e0e5)logger[_0x3cdd31(0x1f1)](_0x80e0e5);}));});}function stopBot(_0x36ae87){const _0x1cf7d7=_0x2cf2f2;getClientsWithBotID(_0x36ae87)[_0x1cf7d7(0x1db)](_0x3d2407=>{const _0xb0424d=_0x1cf7d7;getSocket(_0x3d2407['id'])[_0xb0424d(0x2ae)](!![]),removeClient(_0x3d2407['id']);}),pid[_0x36ae87]&&(pid[_0x36ae87][_0x1cf7d7(0x318)](),pid[_0x36ae87]=null);}function restartBot(_0xdd82df){const _0x3c343a=_0x2cf2f2;if(pid[_0xdd82df])pid[_0xdd82df][_0x3c343a(0x318)]();}function addBot(){const _0x54ac01=_0x2cf2f2;let _0x362506;for(let _0xf8bf17=0x1;_0xf8bf17<0x3e9;_0xf8bf17++){_0x362506=_0xf8bf17[_0x54ac01(0x289)]()['padStart'](0x3,'0');let _0x9c9b8c=config[_0x54ac01(0x33b)](_0x48f793=>_0x48f793[_0x54ac01(0x30e)]==_0x362506);if(!_0x9c9b8c)break;}if(_0x362506==='1000'){logger[_0x54ac01(0x1f1)](_0x54ac01(0x368));return;}logger[_0x54ac01(0x1f1)](_0x54ac01(0x2e0)+_0x362506),dbConfig[_0x54ac01(0x20c)](_0x54ac01(0x31b))[_0x54ac01(0x20b)]({'botID':_0x362506,'botname':_0x54ac01(0x235)+_0x362506,'status':_0x54ac01(0x1e4),'live':''})[_0x54ac01(0x23a)](),startBot([_0x362506,userID],{'cwd':bbpath},function(_0xf7f2b8){const _0xac804b=_0x54ac01;if(_0xf7f2b8)logger[_0xac804b(0x1f1)](_0xf7f2b8);}),config=getConfiguration(),io['to']('botmanager')[_0x54ac01(0x2eb)]('bots',config),broadcastToBots('bots',JSON[_0x54ac01(0x28e)](config));}function deleteBot(_0x244ee1){const _0x50010a=_0x2cf2f2;getClientsWithBotID(_0x244ee1)[_0x50010a(0x1db)](_0x28e57f=>{getSocket(_0x28e57f['id'])['disconnect'](!![]),removeClient(_0x28e57f['id']);}),dbConfig[_0x50010a(0x20c)]('bots')['remove']({'botID':_0x244ee1})[_0x50010a(0x23a)](),logger[_0x50010a(0x1f1)](_0x50010a(0x252)+_0x244ee1),stopBot(_0x244ee1);try{if(fs[_0x50010a(0x35b)](path[_0x50010a(0x319)](configpath,_0x50010a(0x242)+_0x244ee1+'-config.json')))fs[_0x50010a(0x24c)](path['join'](configpath,_0x50010a(0x242)+_0x244ee1+_0x50010a(0x26c)));if(fs[_0x50010a(0x35b)](path['join'](configpath,_0x50010a(0x242)+_0x244ee1+_0x50010a(0x2c9))))fs['unlinkSync'](path[_0x50010a(0x319)](configpath,_0x50010a(0x242)+_0x244ee1+_0x50010a(0x2c9)));if(fs[_0x50010a(0x35b)](path[_0x50010a(0x319)](configpath,'bot-'+_0x244ee1+'-performance.json')))fs['unlinkSync'](path[_0x50010a(0x319)](configpath,_0x50010a(0x242)+_0x244ee1+_0x50010a(0x3bc)));if(fs[_0x50010a(0x35b)](path[_0x50010a(0x319)](configpath,'bot-'+_0x244ee1+'-results.json')))fs[_0x50010a(0x24c)](path[_0x50010a(0x319)](configpath,_0x50010a(0x242)+_0x244ee1+'-results.json'));}catch(_0x12a427){if(_0x12a427)logger[_0x50010a(0x1f1)]('Error\x20while\x20deleting\x20config\x20files:\x20',_0x12a427);}config=getConfiguration(),io['to'](_0x50010a(0x2b2))[_0x50010a(0x2eb)](_0x50010a(0x31b),config),broadcastToBots('bots',JSON[_0x50010a(0x28e)](config));}function toggleBot(_0x23a293,_0x59138d,_0x194941){const _0x431909=_0x2cf2f2;dbConfig['get'](_0x431909(0x31b))[_0x431909(0x33b)]({'botID':_0x23a293})[_0x431909(0x369)]({'status':_0x59138d})[_0x431909(0x369)]({'live':_0x194941})['write']();if(_0x59138d==_0x431909(0x27a)||_0x59138d==_0x431909(0x1e4))logger[_0x431909(0x1f1)](_0x431909(0x3c0)+_0x23a293),startBot([_0x23a293,userID],{'cwd':bbpath},function(_0x4e66c9){if(_0x4e66c9)logger['full'](_0x4e66c9);});else(_0x59138d==_0x431909(0x20a)||_0x59138d==_0x431909(0x244))&&(logger[_0x431909(0x1f1)](_0x431909(0x2d2)+_0x23a293),stopBot(_0x23a293));config=getConfiguration(),io['to'](_0x431909(0x2b2))[_0x431909(0x2eb)](_0x431909(0x31b),config),broadcastToBots(_0x431909(0x31b),JSON['stringify'](config));}function toggleStatus(_0x48a9dc){const _0x4fad27=_0x2cf2f2;let _0x57640f=dbConfig[_0x4fad27(0x20c)](_0x4fad27(0x31b))[_0x4fad27(0x33b)]({'botID':_0x48a9dc})[_0x4fad27(0x279)](),_0x3b5380;if(_0x57640f[_0x4fad27(0x2fc)]===_0x4fad27(0x27a))_0x3b5380=_0x4fad27(0x20a);else{if(_0x57640f[_0x4fad27(0x2fc)]===_0x4fad27(0x1e4))_0x3b5380=_0x4fad27(0x244);else{if(_0x57640f[_0x4fad27(0x2fc)]===_0x4fad27(0x244))_0x3b5380=_0x4fad27(0x1e4);else{if(_0x57640f[_0x4fad27(0x2fc)]===_0x4fad27(0x20a))_0x3b5380=_0x4fad27(0x27a);}}}return _0x3b5380;}function updateStatus(_0x30e022,_0x4fba7d){const _0x36c6ea=_0x2cf2f2;dbConfig[_0x36c6ea(0x20c)](_0x36c6ea(0x31b))[_0x36c6ea(0x33b)]({'botID':_0x30e022})['assign']({'status':_0x4fba7d})['write'](),config=getConfiguration(),io['to'](_0x36c6ea(0x2b2))['emit'](_0x36c6ea(0x31b),config),broadcastToBots(_0x36c6ea(0x31b),JSON[_0x36c6ea(0x28e)](config));}function updateLive(_0x14526c,_0x50ec37){const _0x409bd3=_0x2cf2f2;dbConfig[_0x409bd3(0x20c)]('bots')['find']({'botID':_0x14526c})['assign']({'live':_0x50ec37})[_0x409bd3(0x23a)](),config=getConfiguration(),io['to'](_0x409bd3(0x2b2))[_0x409bd3(0x2eb)](_0x409bd3(0x31b),config),broadcastToBots(_0x409bd3(0x31b),JSON[_0x409bd3(0x28e)](config));}function updateBotName(_0x1ccce9,_0x476234){const _0x22383f=_0x2cf2f2;dbConfig[_0x22383f(0x20c)]('bots')[_0x22383f(0x33b)]({'botID':_0x1ccce9})['assign']({'botname':_0x476234})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x22383f(0x2eb)](_0x22383f(0x31b),config),broadcastToBots('bots',JSON[_0x22383f(0x28e)](config));}function updateBotManager(){const _0x266da4=_0x2cf2f2;config=getConfiguration(),io['to'](_0x266da4(0x2b2))['emit'](_0x266da4(0x31b),config),broadcastToBots(_0x266da4(0x31b),JSON['stringify'](config));}function toggleBotMode(_0x54d48f){const _0x1dd4f4=_0x2cf2f2;if(pid[_0x54d48f])pid[_0x54d48f]['send']({'function':_0x1dd4f4(0x2ab),'args':null});else{const _0xe1f206=configpath+_0x1dd4f4(0x242)+_0x54d48f+_0x1dd4f4(0x26c),_0x2e170c=fs[_0x1dd4f4(0x37d)](_0xe1f206),_0x359436=JSON[_0x1dd4f4(0x340)](_0x2e170c),_0x164d71=_0x359436[_0x1dd4f4(0x1dc)][0x0][_0x1dd4f4(0x1f2)];_0x359436[_0x1dd4f4(0x1dc)][0x0]['headless']=!_0x164d71;const _0x360bf4=JSON['stringify'](_0x359436,null,0x2);fs['writeFileSync'](_0xe1f206,_0x360bf4),config=getConfiguration(),io['to'](_0x1dd4f4(0x2b2))['emit']('bots',config),broadcastToBots(_0x1dd4f4(0x31b),JSON[_0x1dd4f4(0x28e)](config));}}function telegramError(_0x19dfdb){const _0x3dcdb7=_0x2cf2f2;logger[_0x3dcdb7(0x21c)](getTimeStamp()+_0x3dcdb7(0x246));}function validateTelegram(_0x33e842){const _0x3cc164=_0x2cf2f2;if(_0x33e842[_0x3cc164(0x258)]['username']!=settings[_0x3cc164(0x2c0)]&&'@'+_0x33e842[_0x3cc164(0x258)][_0x3cc164(0x383)]!=settings[_0x3cc164(0x2c0)])return tgBot['sendMessage'](_0x33e842[_0x3cc164(0x30c)]['id'],_0x3cc164(0x256),{'parse_mode':_0x3cc164(0x1eb)})['catch'](_0x2a7be1=>{telegramError(_0x2a7be1);}),![];return!![];}async function initTelegram(){const _0x553f72=_0x2cf2f2;if(tgBot)tgBot[_0x553f72(0x292)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x553f72(0x2e9)],{'polling':!![]});let _0x14e0a2=_0x553f72(0x290);_0x14e0a2+='\x0a',_0x14e0a2+=_0x553f72(0x371),_0x14e0a2+='/disable\x20-\x20disable\x20notifications\x0a',_0x14e0a2+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x14e0a2+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x14e0a2+=_0x553f72(0x3ae),_0x14e0a2+='/off\x20-\x20stop\x20bot(s)\x0a',_0x14e0a2+=_0x553f72(0x32c),_0x14e0a2+=_0x553f72(0x2c4),_0x14e0a2+=_0x553f72(0x2d0),_0x14e0a2+=_0x553f72(0x293),_0x14e0a2+=_0x553f72(0x257),_0x14e0a2+=_0x553f72(0x23d),_0x14e0a2+=_0x553f72(0x240),_0x14e0a2+=_0x553f72(0x26a);let _0x2267b7=_0x553f72(0x33c);_0x2267b7+='\x0a',_0x2267b7+=_0x14e0a2,tgBot[_0x553f72(0x2a7)](/\/start/,_0x342955=>{const _0x273348=_0x553f72;if(!validateTelegram(_0x342955))return;if(settings['telegramChatId']!=_0x342955[_0x273348(0x30c)]['id'])updateSetting('telegramChatId',_0x342955[_0x273348(0x30c)]['id']);updateSetting(_0x273348(0x34c),!![]),tgBot[_0x273348(0x38e)](_0x342955[_0x273348(0x30c)]['id'],_0x2267b7)[_0x273348(0x367)](_0x19ad46=>{telegramError(_0x19ad46);});}),tgBot[_0x553f72(0x2a7)](/\/enable/,_0x392bf3=>{const _0x385193=_0x553f72;if(!validateTelegram(_0x392bf3))return;if(settings[_0x385193(0x328)]!=_0x392bf3[_0x385193(0x30c)]['id'])updateSetting(_0x385193(0x328),_0x392bf3['chat']['id']);updateSetting(_0x385193(0x34c),!![]),tgBot[_0x385193(0x38e)](_0x392bf3['chat']['id'],_0x385193(0x320))[_0x385193(0x367)](_0x1a001c=>{telegramError(_0x1a001c);});}),tgBot[_0x553f72(0x2a7)](/\/config/,async _0x3bbcc7=>{const _0x2ca141=_0x553f72;if(!validateTelegram(_0x3bbcc7))return;tgBot[_0x2ca141(0x22e)](_0x2ca141(0x213)),tgBot['sendMessage'](_0x3bbcc7[_0x2ca141(0x30c)]['id'],_0x2ca141(0x348),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':'orders'},{'text':_0x2ca141(0x239),'callback_data':_0x2ca141(0x310)},{'text':'All','callback_data':'all'}]]}})[_0x2ca141(0x367)](_0x5509d5=>{telegramError(_0x5509d5);}),tgBot['on'](_0x2ca141(0x213),async _0x4ecf0f=>{const _0x24e200=_0x2ca141,_0x5c4aa9=_0x4ecf0f[_0x24e200(0x2db)],_0x4753c5=_0x4ecf0f[_0x24e200(0x1fe)];tgBot[_0x24e200(0x2b0)](_0x4ecf0f['id'])[_0x24e200(0x2a8)](async()=>{const _0x15b3e1=_0x24e200;_0x5c4aa9==_0x15b3e1(0x227)&&(updateSetting('telegramEvents',_0x15b3e1(0x227)),updateSetting(_0x15b3e1(0x34c),!![]),await tgBot[_0x15b3e1(0x38e)](_0x4753c5[_0x15b3e1(0x30c)]['id'],_0x15b3e1(0x375))[_0x15b3e1(0x367)](_0x5c1ca4=>{telegramError(_0x5c1ca4);}));_0x5c4aa9==_0x15b3e1(0x310)&&(updateSetting(_0x15b3e1(0x36d),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x15b3e1(0x38e)](_0x4753c5['chat']['id'],_0x15b3e1(0x266))[_0x15b3e1(0x367)](_0x6f21ae=>{telegramError(_0x6f21ae);}));_0x5c4aa9==_0x15b3e1(0x3aa)&&(updateSetting(_0x15b3e1(0x36d),_0x15b3e1(0x3aa)),updateSetting(_0x15b3e1(0x34c),!![]),await tgBot[_0x15b3e1(0x38e)](_0x4753c5['chat']['id'],_0x15b3e1(0x315))[_0x15b3e1(0x367)](_0x1d3cbb=>{telegramError(_0x1d3cbb);}));if(!settings[_0x15b3e1(0x328)])tgBot['sendMessage'](_0x4753c5[_0x15b3e1(0x30c)]['id'],_0x15b3e1(0x2fa))[_0x15b3e1(0x367)](_0x297cda=>{telegramError(_0x297cda);});}),tgBot[_0x24e200(0x22e)](_0x24e200(0x213));});}),tgBot[_0x553f72(0x2a7)](/\/status/,_0x33070e=>{const _0x21cb95=_0x553f72;if(!validateTelegram(_0x33070e))return;const _0x233091=getBotsWithMode();let _0x3aac9c=_0x21cb95(0x216);config[_0x21cb95(0x1db)](_0xf7ba4b=>{const _0x152857=_0x21cb95,_0x535b3e=_0x233091[_0x152857(0x33b)](_0x57700d=>_0x57700d[_0x152857(0x30e)]==_0xf7ba4b[_0x152857(0x30e)])['mode'];_0x3aac9c+='Bot\x20'+_0xf7ba4b[_0x152857(0x30e)]+':\x20'+_0xf7ba4b['status']+_0x152857(0x237)+_0x535b3e+'\x20|\x20'+_0xf7ba4b['live']+'\x0a';}),_0x3aac9c+='\x0a',_0x3aac9c+=_0x21cb95(0x3a0),_0x3aac9c+=!settings[_0x21cb95(0x34c)]?'Notifications\x20disabled\x0a':_0x21cb95(0x24a),_0x3aac9c+=settings[_0x21cb95(0x34c)]?settings['telegramEvents']==_0x21cb95(0x3aa)?_0x21cb95(0x209):_0x21cb95(0x275)+settings[_0x21cb95(0x36d)]+_0x21cb95(0x3a5):'',tgBot[_0x21cb95(0x38e)](_0x33070e[_0x21cb95(0x30c)]['id'],_0x3aac9c,{'parse_mode':_0x21cb95(0x1eb)})['catch'](_0x499e11=>{telegramError(_0x499e11);});}),tgBot[_0x553f72(0x2a7)](/\/restart/,_0x4ac263=>{const _0x526402=_0x553f72;if(!validateTelegram(_0x4ac263))return;tgBot['removeListener'](_0x526402(0x213));const _0x486f1a=getEnabledBots();if(_0x486f1a[_0x526402(0x2bd)]==0x0)tgBot[_0x526402(0x38e)](_0x4ac263['chat']['id'],_0x526402(0x36f))['catch'](_0x146e7a=>{telegramError(_0x146e7a);});else{if(_0x486f1a[_0x526402(0x2bd)]>0x1)_0x486f1a[_0x526402(0x20b)]({'botID':_0x526402(0x3aa)});let _0x42768b=[],_0x47cbfd=[];const _0x34e93a=_0x486f1a[_0x526402(0x2bd)]%0x4==0x0||_0x486f1a['length']%0x4==0x3||_0x486f1a[_0x526402(0x2bd)]%0x3==0x1?0x4:0x3;let _0x399286=0x0;_0x486f1a[_0x526402(0x1db)]((_0x2e6644,_0x5e74ca)=>{const _0x98173d=_0x526402;if(_0x5e74ca%_0x34e93a==0x0)_0x47cbfd=[];_0x47cbfd['push']({'text':_0x2e6644[_0x98173d(0x30e)]==_0x98173d(0x3aa)?_0x98173d(0x2b7):'Bot\x20'+_0x2e6644[_0x98173d(0x30e)],'callback_data':_0x2e6644['botID']}),_0x5e74ca%_0x34e93a==0x0&&(_0x42768b[_0x399286]=_0x47cbfd,_0x399286++);}),tgBot['sendMessage'](_0x4ac263[_0x526402(0x30c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x42768b}})[_0x526402(0x367)](_0x471df0=>{telegramError(_0x471df0);}),tgBot['on'](_0x526402(0x213),async _0x308085=>{const _0x2236d2=_0x526402,_0x439ea8=_0x308085['data'],_0xd7e1da=_0x308085[_0x2236d2(0x1fe)];tgBot[_0x2236d2(0x2b0)](_0x308085['id'])[_0x2236d2(0x2a8)](async()=>{const _0x22033e=_0x2236d2;_0x439ea8==_0x22033e(0x3aa)?config[_0x22033e(0x1db)](_0x338ab3=>{const _0x3665e0=_0x22033e;restartBot(_0x338ab3[_0x3665e0(0x30e)]);}):restartBot(_0x439ea8);}),tgBot[_0x2236d2(0x22e)](_0x2236d2(0x213));});}}),tgBot['onText'](/\/on/,_0x43e768=>{const _0xeda992=_0x553f72;if(!validateTelegram(_0x43e768))return;tgBot['removeListener'](_0xeda992(0x213));const _0x5bacb6=getDisabledBots();if(_0x5bacb6[_0xeda992(0x2bd)]==0x0)tgBot['sendMessage'](_0x43e768[_0xeda992(0x30c)]['id'],_0xeda992(0x2ad))['catch'](_0x13587c=>{telegramError(_0x13587c);});else{if(_0x5bacb6[_0xeda992(0x2bd)]>0x1)_0x5bacb6[_0xeda992(0x20b)]({'botID':_0xeda992(0x3aa)});let _0x57d2ca=[],_0x48c777=[];const _0x5c0a53=_0x5bacb6[_0xeda992(0x2bd)]%0x4==0x0||_0x5bacb6[_0xeda992(0x2bd)]%0x4==0x3||_0x5bacb6[_0xeda992(0x2bd)]%0x3==0x1?0x4:0x3;let _0x1a857c=0x0;_0x5bacb6[_0xeda992(0x1db)]((_0x369bc5,_0x9efab3)=>{const _0x2ec141=_0xeda992;if(_0x9efab3%_0x5c0a53==0x0)_0x48c777=[];_0x48c777[_0x2ec141(0x20b)]({'text':_0x369bc5['botID']==_0x2ec141(0x3aa)?_0x2ec141(0x2b7):'Bot\x20'+_0x369bc5[_0x2ec141(0x30e)],'callback_data':_0x369bc5['botID']}),_0x9efab3%_0x5c0a53==0x0&&(_0x57d2ca[_0x1a857c]=_0x48c777,_0x1a857c++);}),tgBot[_0xeda992(0x38e)](_0x43e768[_0xeda992(0x30c)]['id'],_0xeda992(0x1f9),{'reply_markup':{'inline_keyboard':_0x57d2ca}})[_0xeda992(0x367)](_0x519ec3=>{telegramError(_0x519ec3);}),tgBot['on'](_0xeda992(0x213),async _0x4305cd=>{const _0x50fba3=_0xeda992,_0x528036=_0x4305cd[_0x50fba3(0x2db)],_0x5271ec=_0x4305cd['message'];tgBot[_0x50fba3(0x2b0)](_0x4305cd['id'])[_0x50fba3(0x2a8)](async()=>{const _0x10b249=_0x50fba3;_0x528036==_0x10b249(0x3aa)?(tgBot[_0x10b249(0x38e)](_0x5271ec[_0x10b249(0x30c)]['id'],_0x10b249(0x28d))[_0x10b249(0x367)](_0x486a9a=>{telegramError(_0x486a9a);}),_0x5bacb6[_0x10b249(0x1db)](_0x1ba86f=>{const _0x5b62fc=_0x10b249;if(_0x1ba86f[_0x5b62fc(0x30e)]!=_0x5b62fc(0x3aa))toggleBot(_0x1ba86f[_0x5b62fc(0x30e)],toggleStatus(_0x1ba86f[_0x5b62fc(0x30e)]),_0x5b62fc(0x225));})):(tgBot[_0x10b249(0x38e)](_0x5271ec[_0x10b249(0x30c)]['id'],_0x10b249(0x342)+_0x528036)['catch'](_0x1330f4=>{telegramError(_0x1330f4);}),toggleBot(_0x528036,toggleStatus(_0x528036),'stopped'));}),tgBot[_0x50fba3(0x22e)](_0x50fba3(0x213));});}}),tgBot[_0x553f72(0x2a7)](/\/off/,_0x41ebcb=>{const _0x2f3423=_0x553f72;if(!validateTelegram(_0x41ebcb))return;tgBot[_0x2f3423(0x22e)]('callback_query');const _0x5a30fb=getEnabledBots();if(_0x5a30fb[_0x2f3423(0x2bd)]==0x0)tgBot[_0x2f3423(0x38e)](_0x41ebcb[_0x2f3423(0x30c)]['id'],_0x2f3423(0x36f))[_0x2f3423(0x367)](_0x161757=>{telegramError(_0x161757);});else{if(_0x5a30fb[_0x2f3423(0x2bd)]>0x1)_0x5a30fb['push']({'botID':'all'});let _0x3ee687=[],_0x5f011d=[];const _0x40dcc9=_0x5a30fb['length']%0x4==0x0||_0x5a30fb[_0x2f3423(0x2bd)]%0x4==0x3||_0x5a30fb['length']%0x3==0x1?0x4:0x3;let _0x3c901e=0x0;_0x5a30fb[_0x2f3423(0x1db)]((_0x57d9ae,_0x4d1e2d)=>{const _0x37da78=_0x2f3423;if(_0x4d1e2d%_0x40dcc9==0x0)_0x5f011d=[];_0x5f011d[_0x37da78(0x20b)]({'text':_0x57d9ae[_0x37da78(0x30e)]==_0x37da78(0x3aa)?_0x37da78(0x2b7):_0x37da78(0x235)+_0x57d9ae['botID'],'callback_data':_0x57d9ae[_0x37da78(0x30e)]}),_0x4d1e2d%_0x40dcc9==0x0&&(_0x3ee687[_0x3c901e]=_0x5f011d,_0x3c901e++);}),tgBot[_0x2f3423(0x38e)](_0x41ebcb[_0x2f3423(0x30c)]['id'],_0x2f3423(0x231),{'reply_markup':{'inline_keyboard':_0x3ee687}})['catch'](_0x33bbb5=>{telegramError(_0x33bbb5);}),tgBot['on'](_0x2f3423(0x213),async _0x9f7fac=>{const _0x113ba9=_0x2f3423,_0x116c31=_0x9f7fac[_0x113ba9(0x2db)],_0x5d7928=_0x9f7fac[_0x113ba9(0x1fe)];tgBot[_0x113ba9(0x2b0)](_0x9f7fac['id'])['then'](async()=>{const _0x25e8bb=_0x113ba9;_0x116c31==_0x25e8bb(0x3aa)?(tgBot[_0x25e8bb(0x38e)](_0x5d7928[_0x25e8bb(0x30c)]['id'],_0x25e8bb(0x1e7))['catch'](_0x2dd3f2=>{telegramError(_0x2dd3f2);}),_0x5a30fb[_0x25e8bb(0x1db)](_0x5ce4e7=>{const _0x16245f=_0x25e8bb;if(_0x5ce4e7[_0x16245f(0x30e)]!=_0x16245f(0x3aa))toggleBot(_0x5ce4e7[_0x16245f(0x30e)],toggleStatus(_0x5ce4e7[_0x16245f(0x30e)]),_0x16245f(0x225));})):(tgBot[_0x25e8bb(0x38e)](_0x5d7928[_0x25e8bb(0x30c)]['id'],_0x25e8bb(0x2b9)+_0x116c31)[_0x25e8bb(0x367)](_0x312f6e=>{telegramError(_0x312f6e);}),toggleBot(_0x116c31,toggleStatus(_0x116c31),_0x25e8bb(0x225)));}),tgBot[_0x113ba9(0x22e)](_0x113ba9(0x213));});}}),tgBot[_0x553f72(0x2a7)](/\/metrics/,_0x39066c=>{const _0x526bed=_0x553f72;if(!validateTelegram(_0x39066c))return;tgBot['removeListener'](_0x526bed(0x213));const _0x6bd6b5=getEnabledBots();if(_0x6bd6b5[_0x526bed(0x2bd)]==0x0)tgBot[_0x526bed(0x38e)](_0x39066c[_0x526bed(0x30c)]['id'],_0x526bed(0x36f))['catch'](_0x5e4cd3=>{telegramError(_0x5e4cd3);});else{if(_0x6bd6b5[_0x526bed(0x2bd)]>0x1){let _0x5b11f9=[],_0x5c8db1=[];const _0x30a86e=_0x6bd6b5['length']%0x4==0x0||_0x6bd6b5[_0x526bed(0x2bd)]%0x4==0x3||_0x6bd6b5[_0x526bed(0x2bd)]%0x3==0x1?0x4:0x3;let _0x4d6079=0x0;_0x6bd6b5[_0x526bed(0x1db)]((_0x2b6545,_0x249b1b)=>{const _0x6b2d9e=_0x526bed;if(_0x249b1b%_0x30a86e==0x0)_0x5c8db1=[];_0x5c8db1[_0x6b2d9e(0x20b)]({'text':_0x6b2d9e(0x235)+_0x2b6545[_0x6b2d9e(0x30e)],'callback_data':_0x2b6545['botID']}),_0x249b1b%_0x30a86e==0x0&&(_0x5b11f9[_0x4d6079]=_0x5c8db1,_0x4d6079++);}),tgBot[_0x526bed(0x38e)](_0x39066c[_0x526bed(0x30c)]['id'],_0x526bed(0x35d),{'reply_markup':{'inline_keyboard':_0x5b11f9}})[_0x526bed(0x367)](_0x5c9701=>{telegramError(_0x5c9701);}),tgBot['on'](_0x526bed(0x213),async _0x5c1cdc=>{const _0x52a6f0=_0x526bed,_0x54a5a2=_0x5c1cdc[_0x52a6f0(0x2db)],_0x57c957=_0x5c1cdc[_0x52a6f0(0x1fe)];tgBot[_0x52a6f0(0x2b0)](_0x5c1cdc['id'])[_0x52a6f0(0x2a8)](async()=>{const _0x5a8419=_0x52a6f0;if(pid[_0x54a5a2])pid[_0x54a5a2][_0x5a8419(0x250)]({'function':_0x5a8419(0x353),'args':null});}),tgBot[_0x52a6f0(0x22e)]('callback_query');});}else{const _0x214659=_0x6bd6b5[0x0][_0x526bed(0x30e)];if(pid[_0x214659])pid[_0x214659][_0x526bed(0x250)]({'function':_0x526bed(0x353),'args':null});}}}),tgBot[_0x553f72(0x2a7)](/\/portfolio/,_0x436bc0=>{const _0x235088=_0x553f72;if(!validateTelegram(_0x436bc0))return;tgBot[_0x235088(0x22e)](_0x235088(0x213));const _0x58d1bf=getEnabledBots();if(_0x58d1bf['length']==0x0)tgBot['sendMessage'](_0x436bc0[_0x235088(0x30c)]['id'],_0x235088(0x36f))['catch'](_0x351aff=>{telegramError(_0x351aff);});else{if(_0x58d1bf[_0x235088(0x2bd)]>0x1){let _0x4f609e=[],_0x3fea8c=[];const _0x355375=_0x58d1bf[_0x235088(0x2bd)]%0x4==0x0||_0x58d1bf['length']%0x4==0x3||_0x58d1bf[_0x235088(0x2bd)]%0x3==0x1?0x4:0x3;let _0x411de4=0x0;_0x58d1bf[_0x235088(0x1db)]((_0x45c0d9,_0x278be7)=>{const _0x4b3d9d=_0x235088;if(_0x278be7%_0x355375==0x0)_0x3fea8c=[];_0x3fea8c[_0x4b3d9d(0x20b)]({'text':'Bot\x20'+_0x45c0d9['botID'],'callback_data':_0x45c0d9[_0x4b3d9d(0x30e)]}),_0x278be7%_0x355375==0x0&&(_0x4f609e[_0x411de4]=_0x3fea8c,_0x411de4++);}),tgBot[_0x235088(0x38e)](_0x436bc0[_0x235088(0x30c)]['id'],_0x235088(0x2a6),{'reply_markup':{'inline_keyboard':_0x4f609e}})[_0x235088(0x367)](_0x3d9edb=>{telegramError(_0x3d9edb);}),tgBot['on'](_0x235088(0x213),async _0x38a2e7=>{const _0x5f475b=_0x235088,_0x5cf3e2=_0x38a2e7[_0x5f475b(0x2db)],_0x3524e5=_0x38a2e7[_0x5f475b(0x1fe)];tgBot[_0x5f475b(0x2b0)](_0x38a2e7['id'])[_0x5f475b(0x2a8)](async()=>{const _0xba003d=_0x5f475b;if(pid[_0x5cf3e2])pid[_0x5cf3e2][_0xba003d(0x250)]({'function':'sendPortfolioTelegram','args':null});}),tgBot[_0x5f475b(0x22e)](_0x5f475b(0x213));});}else{const _0x3a1f96=_0x58d1bf[0x0]['botID'];if(pid[_0x3a1f96])pid[_0x3a1f96][_0x235088(0x250)]({'function':_0x235088(0x2bb),'args':null});}}}),tgBot[_0x553f72(0x2a7)](/\/update/,async _0x19fadf=>{const _0x28bfee=_0x553f72;if(!validateTelegram(_0x19fadf))return;tgBot[_0x28bfee(0x22e)](_0x28bfee(0x213)),await getMessages();if(!updateAvailable)tgBot[_0x28bfee(0x38e)](_0x19fadf['chat']['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date')[_0x28bfee(0x367)](_0x42b79b=>{telegramError(_0x42b79b);});else!validInstallation?tgBot[_0x28bfee(0x38e)](_0x19fadf[_0x28bfee(0x30c)]['id'],_0x28bfee(0x2b3))['catch'](_0x4d09e3=>{telegramError(_0x4d09e3);}):(tgBot[_0x28bfee(0x38e)](_0x19fadf[_0x28bfee(0x30c)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x28bfee(0x1e6),'callback_data':_0x28bfee(0x2fe)},{'text':'No','callback_data':'no'}]]}})[_0x28bfee(0x367)](_0x274efb=>{telegramError(_0x274efb);}),tgBot['on'](_0x28bfee(0x213),async _0x2a3074=>{const _0x3cb77f=_0x28bfee,_0x28c524=_0x2a3074[_0x3cb77f(0x2db)],_0x9c0463=_0x2a3074[_0x3cb77f(0x1fe)];tgBot[_0x3cb77f(0x2b0)](_0x2a3074['id'])['then'](async()=>{const _0x513fa1=_0x3cb77f;_0x28c524==_0x513fa1(0x2fe)&&(await tgBot['sendMessage'](_0x9c0463['chat']['id'],_0x513fa1(0x236))['catch'](_0x30ce5b=>{telegramError(_0x30ce5b);}),updateBB(_0x513fa1(0x39d))),_0x28c524=='no'&&await tgBot[_0x513fa1(0x38e)](_0x9c0463['chat']['id'],_0x513fa1(0x385))['catch'](_0x8d609f=>{telegramError(_0x8d609f);});}),tgBot[_0x3cb77f(0x22e)](_0x3cb77f(0x213));}));}),tgBot[_0x553f72(0x2a7)](/\/reinstall/,async _0xda11d3=>{const _0x19c976=_0x553f72;if(!validateTelegram(_0xda11d3))return;tgBot[_0x19c976(0x22e)]('callback_query'),!validInstallation?tgBot[_0x19c976(0x38e)](_0xda11d3[_0x19c976(0x30c)]['id'],_0x19c976(0x20e))['catch'](_0x1f6cbd=>{telegramError(_0x1f6cbd);}):(tgBot[_0x19c976(0x38e)](_0xda11d3[_0x19c976(0x30c)]['id'],_0x19c976(0x31f),{'reply_markup':{'inline_keyboard':[[{'text':_0x19c976(0x1e6),'callback_data':_0x19c976(0x2fe)},{'text':'No','callback_data':'no'}]]}})[_0x19c976(0x367)](_0x1aecbc=>{telegramError(_0x1aecbc);}),tgBot['on']('callback_query',async _0x483d97=>{const _0x1c618e=_0x19c976,_0x4e26ed=_0x483d97[_0x1c618e(0x2db)],_0x1653d0=_0x483d97[_0x1c618e(0x1fe)];tgBot[_0x1c618e(0x2b0)](_0x483d97['id'])[_0x1c618e(0x2a8)](async()=>{const _0xa9a093=_0x1c618e;_0x4e26ed==_0xa9a093(0x2fe)&&(await tgBot[_0xa9a093(0x38e)](_0x1653d0[_0xa9a093(0x30c)]['id'],_0xa9a093(0x2fd))['catch'](_0x13e6c5=>{telegramError(_0x13e6c5);}),updateBB(_0xa9a093(0x1ec))),_0x4e26ed=='no'&&await tgBot[_0xa9a093(0x38e)](_0x1653d0[_0xa9a093(0x30c)]['id'],_0xa9a093(0x3a3))[_0xa9a093(0x367)](_0xc40e86=>{telegramError(_0xc40e86);});}),tgBot[_0x1c618e(0x22e)](_0x1c618e(0x213));}));}),tgBot[_0x553f72(0x2a7)](/\/toggle/,_0x5c7c58=>{const _0x484d8e=_0x553f72;if(!validateTelegram(_0x5c7c58))return;tgBot[_0x484d8e(0x22e)]('callback_query');const _0x13b80d=getBotsWithMode();if(_0x13b80d[_0x484d8e(0x2bd)]==0x0)tgBot[_0x484d8e(0x38e)](_0x5c7c58['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x484d8e(0x367)](_0x503732=>{telegramError(_0x503732);});else{let _0x4a3f11=[],_0x352a33=[];const _0x31c6fd=0x2;let _0x1a2755=0x0;_0x13b80d[_0x484d8e(0x1db)]((_0x4ff19e,_0x1baa83)=>{const _0x174dbf=_0x484d8e;if(_0x1baa83%_0x31c6fd==0x0)_0x352a33=[];_0x352a33[_0x174dbf(0x20b)]({'text':_0x174dbf(0x235)+_0x4ff19e[_0x174dbf(0x30e)]+'\x20('+_0x4ff19e['mode']+')','callback_data':_0x4ff19e[_0x174dbf(0x30e)]}),_0x1baa83%_0x31c6fd==0x0&&(_0x4a3f11[_0x1a2755]=_0x352a33,_0x1a2755++);}),tgBot[_0x484d8e(0x38e)](_0x5c7c58[_0x484d8e(0x30c)]['id'],_0x484d8e(0x251),{'reply_markup':{'inline_keyboard':_0x4a3f11}})[_0x484d8e(0x367)](_0x451fce=>{telegramError(_0x451fce);}),tgBot['on'](_0x484d8e(0x213),async _0x4090f7=>{const _0x4cf6f5=_0x484d8e,_0x382807=_0x4090f7[_0x4cf6f5(0x2db)],_0x36bc2a=_0x4090f7[_0x4cf6f5(0x1fe)];tgBot[_0x4cf6f5(0x2b0)](_0x4090f7['id'])[_0x4cf6f5(0x2a8)](async()=>{const _0x3b3af7=_0x4cf6f5,_0x25ba8b=_0x13b80d[_0x3b3af7(0x33b)](_0x3c4f87=>_0x3c4f87['botID']==_0x382807),_0x5c867c=_0x25ba8b['mode']=='auto'?_0x3b3af7(0x2b8):_0x3b3af7(0x207);tgBot[_0x3b3af7(0x38e)](_0x36bc2a[_0x3b3af7(0x30c)]['id'],_0x3b3af7(0x1e1)+_0x382807+_0x3b3af7(0x382)+_0x5c867c+'\x20mode')[_0x3b3af7(0x367)](_0xa34d6=>{telegramError(_0xa34d6);}),toggleBotMode(_0x382807);}),tgBot[_0x4cf6f5(0x22e)]('callback_query');});}}),tgBot[_0x553f72(0x2a7)](/\/names/,_0x4bb279=>{const _0x2313a6=_0x553f72;if(!validateTelegram(_0x4bb279))return;let _0x27c326='';config['forEach'](_0x750ec7=>{const _0xacf521=_0xdf12;_0x27c326+=_0xacf521(0x235)+_0x750ec7[_0xacf521(0x30e)]+':\x20'+_0x750ec7[_0xacf521(0x3af)]+'\x0a';}),tgBot['sendMessage'](_0x4bb279[_0x2313a6(0x30c)]['id'],_0x27c326,{'parse_mode':_0x2313a6(0x1eb)})[_0x2313a6(0x367)](_0x3011a5=>{telegramError(_0x3011a5);});}),tgBot[_0x553f72(0x2a7)](/\/disable/,_0x2ff950=>{const _0xf8d7ff=_0x553f72;if(!validateTelegram(_0x2ff950))return;tgBot[_0xf8d7ff(0x38e)](_0x2ff950['chat']['id'],_0xf8d7ff(0x2e7))[_0xf8d7ff(0x367)](_0x328388=>{telegramError(_0x328388);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x553f72(0x2a7)](/\/help/,_0x6cf78e=>{const _0x623536=_0x553f72;if(!validateTelegram(_0x6cf78e))return;tgBot[_0x623536(0x38e)](_0x6cf78e[_0x623536(0x30c)]['id'],_0x14e0a2)[_0x623536(0x367)](_0x45797e=>{telegramError(_0x45797e);});}),tgBot['on']('polling_error',_0x31be3f=>{const _0xcb93a5=_0x553f72;_0x31be3f[_0xcb93a5(0x289)]()[_0xcb93a5(0x337)](_0xcb93a5(0x2f4))&&(logger[_0xcb93a5(0x1f1)](_0xcb93a5(0x2af)),tgBot[_0xcb93a5(0x292)](),tgBot=null,io['to'](_0xcb93a5(0x2b2))[_0xcb93a5(0x2eb)](_0xcb93a5(0x381),_0xcb93a5(0x2af)));}),process['once'](_0x553f72(0x359),()=>{const _0x52cd9b=_0x553f72;if(tgBot)tgBot[_0x52cd9b(0x292)]();process[_0x52cd9b(0x2cc)](0x1);}),process[_0x553f72(0x24d)](_0x553f72(0x3c4),()=>{const _0x4795f3=_0x553f72;if(tgBot)tgBot[_0x4795f3(0x292)]();process[_0x4795f3(0x2cc)](0x1);});}}function disableTelegram(){const _0x5af040=_0x2cf2f2;tgBot&&(tgBot[_0x5af040(0x292)](),tgBot=null);}function sendTelegram(_0x4b294a,_0xc81ddd){const _0x3c47d9=_0x2cf2f2;if(settings[_0x3c47d9(0x34c)]){if(settings[_0x3c47d9(0x36d)]==_0x3c47d9(0x3aa)||(_0xc81ddd[_0x3c47d9(0x352)]=='error'||_0xc81ddd[_0x3c47d9(0x352)]==_0x3c47d9(0x1e3)||_0xc81ddd['type']==_0x3c47d9(0x208))&&settings[_0x3c47d9(0x36d)]==_0x3c47d9(0x310)||_0xc81ddd[_0x3c47d9(0x352)]==_0x3c47d9(0x23f)&&settings[_0x3c47d9(0x36d)]==_0x3c47d9(0x227)){if(tgBot&&settings[_0x3c47d9(0x328)]){if(_0xc81ddd['showname'])tgBot[_0x3c47d9(0x38e)](settings[_0x3c47d9(0x328)],_0xc81ddd[_0x3c47d9(0x3af)]+_0x3c47d9(0x27c)+_0xc81ddd[_0x3c47d9(0x22f)])[_0x3c47d9(0x367)](_0x3b0d9d=>{telegramError(_0x3b0d9d);});else tgBot['sendMessage'](settings[_0x3c47d9(0x328)],_0x3c47d9(0x235)+_0x4b294a+_0x3c47d9(0x27c)+_0xc81ddd[_0x3c47d9(0x22f)])['catch'](_0x3a3e1e=>{telegramError(_0x3a3e1e);});}}}}async function sendTelegramMsg(_0x276f6e,_0x109411='HTML'){const _0x3cefd6=_0x2cf2f2;return settings['telegramEnabled']&&tgBot&&settings[_0x3cefd6(0x328)]?(await tgBot[_0x3cefd6(0x38e)](settings[_0x3cefd6(0x328)],_0x276f6e,{'parse_mode':_0x109411})[_0x3cefd6(0x367)](_0x35d491=>{telegramError(_0x35d491);}),!![]):![];}function getDeviceWithIp(_0x5c2809){return devices['find'](_0x52f04a=>_0x52f04a['ip']===_0x5c2809);}function temporaryAccess2FA(_0x546ce8,_0x29fb9c){const _0x3f704c=_0x2cf2f2;let _0x8c0840=new Date(),_0x5b2515=![];if(lastIpApproval){if(_0x8c0840-lastIpApproval<0x1388)_0x5b2515=!![];}lastIpApproval=new Date();if(_0x5b2515)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x3f704c(0x22e)](_0x3f704c(0x213)),tgBot[_0x3f704c(0x38e)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x29fb9c)[_0x3f704c(0x38c)]+_0x3f704c(0x3a2),{'parse_mode':_0x3f704c(0x1eb),'reply_markup':{'inline_keyboard':[[{'text':_0x3f704c(0x271),'callback_data':'5'},{'text':_0x3f704c(0x3b5),'callback_data':'15'},{'text':_0x3f704c(0x2bc),'callback_data':'30'},{'text':_0x3f704c(0x333),'callback_data':_0x3f704c(0x333)}]]}})['catch'](_0x33bdfb=>{telegramError(_0x33bdfb);}),tgBot['on'](_0x3f704c(0x213),async _0x4202aa=>{const _0x270833=_0x3f704c,_0x3a4842=_0x4202aa[_0x270833(0x2db)],_0x40b842=_0x4202aa['message'];tgBot[_0x270833(0x2b0)](_0x4202aa['id'])['then'](async()=>{const _0x42e27e=_0x270833;devices[_0x546ce8][_0x42e27e(0x281)]={'clientip':_0x29fb9c,'timestamp':new Date()[_0x42e27e(0x39f)](),'expiry':_0x3a4842},_0x3a4842!='reject'?(await tgBot[_0x42e27e(0x38e)](_0x40b842[_0x42e27e(0x30c)]['id'],_0x42e27e(0x308)+_0x3a4842+_0x42e27e(0x324),{'parse_mode':_0x42e27e(0x1eb)})[_0x42e27e(0x367)](_0x26e339=>{telegramError(_0x26e339);}),io['to'](_0x546ce8)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0x40b842[_0x42e27e(0x30c)]['id'],'Temporary\x20access\x20rejected')['catch'](_0x50ae2d=>{telegramError(_0x50ae2d);}),io['to'](_0x546ce8)['emit'](_0x42e27e(0x2fc),{'access':{'allow':![],'reason':_0x42e27e(0x2dd),'token':null}}));}),tgBot[_0x270833(0x22e)](_0x270833(0x213));}));}function loginAccess2FA(_0x464c23,_0x5bddb8){const _0x2f3aac=_0x2cf2f2;tgBot&&settings[_0x2f3aac(0x328)]&&(tgBot[_0x2f3aac(0x22e)](_0x2f3aac(0x213)),tgBot['sendMessage'](settings['telegramChatId'],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5bddb8)[_0x2f3aac(0x38c)]+_0x2f3aac(0x3a2),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2f3aac(0x336),'callback_data':loginExpiry},{'text':_0x2f3aac(0x333),'callback_data':_0x2f3aac(0x333)}]]}})[_0x2f3aac(0x367)](_0x3b9f87=>{telegramError(_0x3b9f87);}),tgBot['on'](_0x2f3aac(0x213),async _0x10a0e1=>{const _0x30c3c5=_0x2f3aac,_0x53da70=_0x10a0e1[_0x30c3c5(0x2db)],_0x3ceab4=_0x10a0e1['message'];tgBot['answerCallbackQuery'](_0x10a0e1['id'])[_0x30c3c5(0x2a8)](async()=>{const _0x49534e=_0x30c3c5;devices[_0x464c23][_0x49534e(0x230)]={'clientip':_0x5bddb8,'timestamp':new Date()[_0x49534e(0x39f)](),'expiry':_0x53da70},_0x53da70!=_0x49534e(0x333)?(await tgBot[_0x49534e(0x38e)](_0x3ceab4[_0x49534e(0x30c)]['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0x49534e(0x367)](_0x581197=>{telegramError(_0x581197);}),io['to'](_0x464c23)[_0x49534e(0x2eb)](_0x49534e(0x2fc),{'access':{'allow':![],'reason':_0x49534e(0x30a),'token':null}})):(await tgBot[_0x49534e(0x38e)](_0x3ceab4[_0x49534e(0x30c)]['id'],_0x49534e(0x36c))[_0x49534e(0x367)](_0x3e5ef1=>{telegramError(_0x3e5ef1);}),io['to'](_0x464c23)['emit'](_0x49534e(0x2fc),{'access':{'allow':![],'reason':_0x49534e(0x222),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x26c9b7=_0x2cf2f2;return dbConfig[_0x26c9b7(0x20c)](_0x26c9b7(0x31b))[_0x26c9b7(0x2a5)](_0x26c9b7(0x30e))[_0x26c9b7(0x360)]({'status':'enabled'})[_0x26c9b7(0x279)]()||[];}function getDisabledBots(){const _0x214ef5=_0x2cf2f2;return dbConfig[_0x214ef5(0x20c)](_0x214ef5(0x31b))[_0x214ef5(0x2a5)](_0x214ef5(0x30e))[_0x214ef5(0x360)]({'status':_0x214ef5(0x20a)})[_0x214ef5(0x279)]()||[];}function getBotAttributes(_0x353f9f){const _0x2bc56d=_0x2cf2f2;let _0xd1d73={};const _0x50e44b=configpath+_0x2bc56d(0x242)+_0x353f9f+_0x2bc56d(0x26c),_0x292d94=fs[_0x2bc56d(0x35b)](_0x50e44b);if(_0x292d94){const _0x43fc17=fs[_0x2bc56d(0x37d)](_0x50e44b);try{const _0x316e76=JSON['parse'](_0x43fc17),_0x13d1b2=_0x316e76?_0x316e76[_0x2bc56d(0x1dc)][0x0][_0x2bc56d(0x1f2)]:![];_0xd1d73[_0x2bc56d(0x1e9)]=_0x13d1b2?'auto':_0x2bc56d(0x2b8),_0xd1d73[_0x2bc56d(0x3af)]=_0x316e76?_0x316e76[_0x2bc56d(0x1dc)][0x0][_0x2bc56d(0x3af)]:_0x2bc56d(0x235)+_0x353f9f;}catch(_0x245cf0){_0xd1d73[_0x2bc56d(0x1e9)]=_0x2bc56d(0x2b8),_0xd1d73[_0x2bc56d(0x3af)]=_0x2bc56d(0x235)+_0x353f9f;}}else _0xd1d73[_0x2bc56d(0x1e9)]='manual',_0xd1d73[_0x2bc56d(0x3af)]=_0x2bc56d(0x235)+_0x353f9f;return _0xd1d73;}function getBotsWithMode(){const _0x4f7cfc=_0x2cf2f2,_0xe3d9d9=dbConfig[_0x4f7cfc(0x20c)](_0x4f7cfc(0x31b))[_0x4f7cfc(0x2a5)](_0x4f7cfc(0x30e))[_0x4f7cfc(0x279)]()||[];return _0xe3d9d9[_0x4f7cfc(0x1db)](_0x1ad539=>{const _0x2447bf=_0x4f7cfc;let _0x478171=getBotAttributes(_0x1ad539[_0x2447bf(0x30e)]);_0x1ad539[_0x2447bf(0x1e9)]=_0x478171['mode'];}),_0xe3d9d9;}function getBotExchanges(){const _0x3d5064=_0x2cf2f2;let _0x1045ec=[];const _0x9d9932=dbConfig[_0x3d5064(0x20c)]('bots')[_0x3d5064(0x2a5)](_0x3d5064(0x30e))[_0x3d5064(0x279)]()||[];_0x9d9932[_0x3d5064(0x1db)](_0xe0bce2=>{const _0x1d4d2f=_0x3d5064;if(_0xe0bce2[_0x1d4d2f(0x2fc)]==_0x1d4d2f(0x27a)){const _0x4ff812=configpath+_0x1d4d2f(0x242)+_0xe0bce2[_0x1d4d2f(0x30e)]+_0x1d4d2f(0x26c),_0x2486a1=fs[_0x1d4d2f(0x35b)](_0x4ff812);let _0x2ab4e9;if(_0x2486a1){const _0x3f2c3e=fs['readFileSync'](_0x4ff812);try{const _0x5127fd=JSON[_0x1d4d2f(0x340)](_0x3f2c3e);_0x2ab4e9=_0x5127fd?_0x5127fd[_0x1d4d2f(0x1dc)][0x0]['exchange']:null;}catch(_0x5e4c30){}}if(_0x2ab4e9)_0x1045ec['push'](_0x2ab4e9);}});const _0x397488=[...new Set(_0x1045ec)][_0x3d5064(0x313)]();return _0x397488;}async function initUser(){const _0x9cee29=_0x2cf2f2;if(!settings['userid']){const _0x461eb6=uuidRandom();mixpanel['alias'](_0x461eb6),updateSetting(_0x9cee29(0x306),_0x461eb6);}}async function initSecure(){const _0x39f2ef=_0x2cf2f2;let _0x25de0b=getSecure();if(!_0x25de0b[_0x39f2ef(0x31e)](_0x39f2ef(0x2ff))){let _0x2c109c=await generateKeys();_0x25de0b[_0x39f2ef(0x2aa)]=_0x2c109c[_0x39f2ef(0x2aa)],_0x25de0b['privateKey']=_0x2c109c['privateKey'],_0x25de0b[_0x39f2ef(0x2ff)]=crypto[_0x39f2ef(0x261)](0x20)[_0x39f2ef(0x289)]('hex');;storeSecure(_0x25de0b);}}function getSettings(){const _0x41af1b=_0x2cf2f2;return dbSettings['get'](_0x41af1b(0x309))[_0x41af1b(0x279)]()||{};}function getSecure(){const _0x5dccbb=_0x2cf2f2;return dbSecure['get'](_0x5dccbb(0x3ac))[_0x5dccbb(0x279)]()||{};}function getBlacklist(){const _0xf11759=_0x2cf2f2;return dbSecure[_0xf11759(0x20c)](_0xf11759(0x1e8))['value']()||[];}function broadcastToBots(_0x230349,_0x18d2bf){const _0x275b61=_0x2cf2f2;config[_0x275b61(0x1db)](_0x30b8dd=>{const _0x3724b5=_0x275b61;if(_0x30b8dd[_0x3724b5(0x2fc)]==_0x3724b5(0x27a)&&_0x30b8dd[_0x3724b5(0x394)]==_0x3724b5(0x28b)||_0x30b8dd[_0x3724b5(0x2fc)]=='new'&&_0x30b8dd[_0x3724b5(0x394)]==_0x3724b5(0x28b)){if(pid[_0x30b8dd[_0x3724b5(0x30e)]])pid[_0x30b8dd['botID']][_0x3724b5(0x250)]({[_0x230349]:_0x18d2bf});}});}function storeSettings(_0x4c01cb,_0x29586d=![]){const _0x3fd427=_0x2cf2f2;_0x4c01cb={...settings,..._0x4c01cb};if(_0x29586d&&_0x4c01cb[_0x3fd427(0x39a)]!=_0x3fd427(0x303)&&_0x4c01cb[_0x3fd427(0x39a)]!=_0x3fd427(0x202)&&_0x4c01cb[_0x3fd427(0x39a)]!=''){const _0x518cea=crypt[_0x3fd427(0x37b)](secure[_0x3fd427(0x203)],_0x4c01cb['bbPassword'])[_0x3fd427(0x1fe)][_0x3fd427(0x1ed)]('@')[0x0],_0x55b808=bcrypt['hashSync'](_0x518cea,saltRounds);_0x4c01cb={..._0x4c01cb,'bbPassword':_0x55b808};}if(_0x29586d&&_0x4c01cb['telegramToken']!='************'&&_0x4c01cb[_0x3fd427(0x2e9)]!=_0x3fd427(0x202)&&_0x4c01cb[_0x3fd427(0x2e9)]!=''){const _0x385c1f=crypt[_0x3fd427(0x37b)](secure[_0x3fd427(0x203)],_0x4c01cb['telegramToken'])[_0x3fd427(0x1fe)]['split']('@')[0x0];_0x4c01cb={..._0x4c01cb,'telegramToken':_0x385c1f};}const _0x39a38c=_0x4c01cb[_0x3fd427(0x2e9)]!='************'&&_0x4c01cb['telegramToken']!=settings[_0x3fd427(0x2e9)]||_0x4c01cb[_0x3fd427(0x2c0)]!=settings[_0x3fd427(0x2c0)],_0x307a6b=_0x4c01cb['telegramToken']==''||_0x4c01cb[_0x3fd427(0x2c0)]=='';if(_0x39a38c)_0x4c01cb['telegramEvents']=_0x3fd427(0x3aa);for(const [_0x4093c1,_0x2b9e51]of Object['entries'](_0x4c01cb)){if(_0x4093c1==_0x3fd427(0x2e9)&&_0x2b9e51==_0x3fd427(0x303)){_0x4c01cb['telegramToken']=settings[_0x3fd427(0x2e9)];continue;};if(_0x4093c1=='bbPassword'&&_0x2b9e51=='************'){_0x4c01cb['bbPassword']=settings[_0x3fd427(0x39a)];continue;};dbSettings['set'](_0x3fd427(0x2ee)+_0x4093c1,_0x2b9e51)[_0x3fd427(0x23a)]();}settings=_0x4c01cb,io['to'](_0x3fd427(0x2b2))['emit'](_0x3fd427(0x309),cleanSettings()),broadcastToBots('timeshift',settings[_0x3fd427(0x334)]),broadcastToBots(_0x3fd427(0x26b),settings[_0x3fd427(0x26b)]);if(_0x39a38c&&!_0x307a6b)initTelegram();if(_0x39a38c&&_0x307a6b)disableTelegram();getAllClients()[_0x3fd427(0x1db)](_0x18c9c3=>{const _0x5b71e7=_0x3fd427;getSocket(_0x18c9c3['id'])[_0x5b71e7(0x2eb)](_0x5b71e7(0x2fc),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x116e12,_0x389943){const _0x96373b=_0x2cf2f2;dbSettings[_0x96373b(0x2ca)](_0x96373b(0x2ee)+_0x116e12,_0x389943)[_0x96373b(0x23a)](),settings=getSettings(),io['to']('botmanager')[_0x96373b(0x2eb)](_0x96373b(0x309),cleanSettings());}function storeSecure(_0x4bbade){const _0x1a20e5=_0x2cf2f2;dbSecure['get'](_0x1a20e5(0x3ac))['push'](_0x4bbade)['write'](),secure=_0x4bbade;}function addBlacklist(_0x154f97){const _0x4a3384=_0x2cf2f2;cleanBlacklist();let _0x902ee3;devices[_0x154f97][_0x4a3384(0x281)]?_0x902ee3=Math[_0x4a3384(0x27d)](devices[_0x154f97]['telegramIpApproval'][_0x4a3384(0x1dd)],loginExpiry):_0x902ee3=loginExpiry,dbSecure[_0x4a3384(0x20c)]('blacklist')['push']({'expiry':new Date()[_0x4a3384(0x39f)]()+_0x902ee3*0x3c*0x3e8,'token':devices[_0x154f97][_0x4a3384(0x338)][_0x4a3384(0x21d)]})[_0x4a3384(0x23a)](),blacklist=dbSecure['get'](_0x4a3384(0x1e8))[_0x4a3384(0x279)]();}function cleanBlacklist(){const _0x5d6600=_0x2cf2f2;let _0x27eab5=dbSecure[_0x5d6600(0x20c)](_0x5d6600(0x1e8))[_0x5d6600(0x35e)]()[_0x5d6600(0x279)](),_0x143a9f=new Date()[_0x5d6600(0x39f)]();_0x27eab5[_0x5d6600(0x1db)](_0x5ad9f0=>{const _0x56cb38=_0x5d6600;_0x5ad9f0[_0x56cb38(0x1dd)]<_0x143a9f&&dbSecure[_0x56cb38(0x20c)](_0x56cb38(0x1e8))[_0x56cb38(0x299)]({'expiry':_0x5ad9f0[_0x56cb38(0x1dd)]})[_0x56cb38(0x23a)]();});}function initStates(){const _0x5c152f=_0x2cf2f2;let _0x5e72bc=getConfiguration();_0x5e72bc[_0x5c152f(0x1db)](_0xe28b03=>{const _0x458ae1=_0x5c152f;_0xe28b03[_0x458ae1(0x394)]=_0x458ae1(0x225);}),storeConfiguration(_0x5e72bc);}function onKeys(){const _0x162fa8=new RSA();return new Promise(_0x45f8b9=>{const _0x4ba895=_0xdf12;_0x162fa8[_0x4ba895(0x29e)]()['then'](_0x194ab2=>{_0x45f8b9(_0x194ab2);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x33679c=_0x2cf2f2;let _0x218033=getSettings(),_0x121c1d=![];!_0x218033[_0x33679c(0x31e)](_0x33679c(0x259))&&(_0x218033[_0x33679c(0x259)]=0x0,_0x121c1d=!![]);!_0x218033['hasOwnProperty'](_0x33679c(0x285))&&(_0x218033['lastmsgemitted']=0x0,_0x121c1d=!![]);!_0x218033[_0x33679c(0x31e)](_0x33679c(0x288))&&(_0x218033['latestversion']='0.0.0',_0x121c1d=!![]);!_0x218033[_0x33679c(0x31e)](_0x33679c(0x26b))&&(_0x218033[_0x33679c(0x26b)]=![],_0x121c1d=!![]);if(_0x121c1d)storeSettings(_0x218033);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x417443=>{const _0x1b1495=_0x33679c;if(!_0x417443['isDirectory']()){if(!_0x417443['name']['startsWith']('backup-full@'))fs[_0x1b1495(0x24c)](configbackuppath+_0x417443[_0x1b1495(0x2ea)]);}else fs['rmSync'](configbackuppath+_0x417443[_0x1b1495(0x2ea)],{'recursive':!![]});});}catch(_0x2d4f8b){logger['debug'](_0x33679c(0x323),_0x2d4f8b);}}function storeConfiguration(_0x3fe187){const _0x141eaf=_0x2cf2f2;dbConfig['get']('bots')[_0x141eaf(0x299)]()[_0x141eaf(0x23a)](),_0x3fe187[_0x141eaf(0x1db)](_0x2f09d6=>{const _0xe2a16e=_0x141eaf;delete _0x2f09d6[_0xe2a16e(0x1e9)];}),dbConfig['get'](_0x141eaf(0x31b))[_0x141eaf(0x20b)](..._0x3fe187)[_0x141eaf(0x23a)](),config=_0x3fe187;}function resetPassword(){const _0x4875ca=_0x2cf2f2;tgBot&&settings[_0x4875ca(0x328)]&&(tgBot[_0x4875ca(0x22e)](_0x4875ca(0x213)),tgBot[_0x4875ca(0x38e)](settings[_0x4875ca(0x328)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x4875ca(0x1eb),'reply_markup':{'inline_keyboard':[[{'text':_0x4875ca(0x2fe),'callback_data':_0x4875ca(0x2fe)},{'text':'no','callback_data':'no'}]]}})[_0x4875ca(0x367)](_0x25a41b=>{telegramError(_0x25a41b);}),tgBot['on']('callback_query',async _0x502d26=>{const _0x7b7dfb=_0x4875ca,_0x557afa=_0x502d26[_0x7b7dfb(0x2db)],_0x17f9e3=_0x502d26['message'];tgBot[_0x7b7dfb(0x2b0)](_0x502d26['id'])[_0x7b7dfb(0x2a8)](async()=>{const _0xdfe632=_0x7b7dfb;if(_0x557afa!='no'){const _0x5d76b7=0xf,_0x23bfae=_0xdfe632(0x224),_0x38ac1d=Array[_0xdfe632(0x258)](crypto['randomFillSync'](new Uint32Array(_0x5d76b7)))[_0xdfe632(0x2e1)](_0x2f5ae0=>_0x23bfae[_0x2f5ae0%_0x23bfae[_0xdfe632(0x2bd)]])[_0xdfe632(0x319)](''),_0x112e38=bcrypt[_0xdfe632(0x3bf)](_0x38ac1d,saltRounds);storeSettings({'bbPassword':_0x112e38}),await tgBot[_0xdfe632(0x38e)](_0x17f9e3[_0xdfe632(0x30c)]['id'],_0xdfe632(0x28a)+_0x38ac1d,{'parse_mode':_0xdfe632(0x1eb)})['catch'](_0x302b92=>{telegramError(_0x302b92);});}else await tgBot['sendMessage'](_0x17f9e3['chat']['id'],_0xdfe632(0x204))[_0xdfe632(0x367)](_0xe75e4b=>{telegramError(_0xe75e4b);});}),tgBot[_0x7b7dfb(0x22e)]('callback_query');}));}async function confirmRestore(_0x26f56e,_0x2ce51c){const _0x349f9d=_0x2cf2f2;io['to']('botmanager')[_0x349f9d(0x2eb)](_0x349f9d(0x381),'Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','success'),tgBot&&settings[_0x349f9d(0x328)]&&(tgBot['removeListener'](_0x349f9d(0x213)),await tgBot['sendMessage'](settings['telegramChatId'],_0x349f9d(0x223),{'parse_mode':_0x349f9d(0x1eb),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x349f9d(0x2fe)},{'text':'no','callback_data':'no'}]]}})[_0x349f9d(0x367)](_0x51419f=>{telegramError(_0x51419f);}),tgBot['on'](_0x349f9d(0x213),async _0x1faefc=>{const _0xc187a0=_0x349f9d,_0x2e3fae=_0x1faefc[_0xc187a0(0x2db)],_0x1cbf8c=_0x1faefc[_0xc187a0(0x1fe)];tgBot[_0xc187a0(0x2b0)](_0x1faefc['id'])[_0xc187a0(0x2a8)](async()=>{const _0x34587b=_0xc187a0;_0x2e3fae==_0x34587b(0x2fe)?(await tgBot[_0x34587b(0x38e)](_0x1cbf8c[_0x34587b(0x30c)]['id'],_0x34587b(0x2bf),{'parse_mode':_0x34587b(0x1eb)})['catch'](_0x4fe1d8=>{telegramError(_0x4fe1d8);}),unzipFile(_0x26f56e,_0x2ce51c)):(logger[_0x34587b(0x2ec)]('Restore\x20process\x20aborted'),await tgBot['sendMessage'](_0x1cbf8c[_0x34587b(0x30c)]['id'],_0x34587b(0x2c8))[_0x34587b(0x367)](_0x5385ef=>{telegramError(_0x5385ef);}));}),tgBot[_0xc187a0(0x22e)](_0xc187a0(0x213));}));}function _0x1547(){const _0x491730=['auto','success','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','disabled','push','get','min','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20delete\x20bot','binary','constructor','statSync','callback_query','inherit','update-bb','<b>Balance\x20Bot\x20Status:</b>\x0a','connection','1290690tQqKpR','backup-files','backup','Unauthorized\x20attempt\x20to\x20delete\x20alerts','simple','token','index.html','tkn','https://api.ipify.org?format=json','sign','2FA\x20login\x20rejected','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','stopped','restore-backup-file','orders','sha256','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Invalid\x20username\x20or\x20IP\x20address','bcryptjs','getPortfolio','password','removeListener','event','telegram2FaApproval','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','File\x20uploaded','#RES#\x20','/:bot','Bot\x20','Starting\x20Balance\x20Bot\x20update','\x20|\x20','uuid-random','Alerts','write','api-eu.mixpanel.com','output-003.log','/update\x20-\x20update\x20Balance\x20Bot\x0a','internal','order','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','access\x20timeout','bot-','login\x20token\x20valid','new-disabled','whitelistEnabled',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','port','output-001.log','Unauthorized\x20login\x20attempt\x20(timeout)','Notifications\x20enabled\x0a','delete-bot','unlinkSync','once','isValid','build2','send','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Deleted\x20Bot\x20','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','invalid\x20credentials','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','from','lastmsgtelegram','reset-password','http','build','16vZObbQ','files','getMonth','bot.js','randomBytes','uncaughtException','mixpanel','pidRefreshToken','2FA','Ok,\x20will\x20send\x20alert\x20notifications\x20only','slice','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','logout','/help\x20-\x20show\x20available\x20commands\x0a','onepagemode','-config.json','writeFileSync','copyFileSync','referer','private','5\x20min','bb-secure.json','generate','(staging)','Notifications\x20types:\x20','Failed\x20to\x20download\x20','3000','listen','value','enabled','getSeconds','\x20>\x20','max','Backup\x20file\x20uploaded','/output-000.log','apiSecret','telegramIpApproval','1789795PFKARJ','\x20|\x20client:\x20...','deleteHistoryAlerts','lastmsgemitted','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20get\x20portfolio','latestversion','toString','Password\x20has\x20been\x20reset\x20to:\x20','running','toIPv4Address','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stringify','encryptedUuid','You\x20can\x20use\x20the\x20following\x20commands:\x0a','verify','stopPolling','/metrics\x20-\x20show\x20bot\x20performance\x0a','get-backup-files','mtime','backup-full','createWriteStream','Logged\x20out\x20user\x20...','remove','getDate','Unauthorized\x20attempt\x20to\x20update\x20bot','args','isDirectory','generateKeyPairAsync','Bot\x20Mgr\x20>\x20','toggle-bot-mode','Starting\x20bot\x20|\x20Bot\x20','socket','cancelLoading','exp','sortBy','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','onText','then','backup/','publicKey','toggleBotMode','2FA\x20login\x20token\x20generated','All\x20bots\x20running\x20right\x20now','disconnect','Invalid\x20Telegram\x20token','answerCallbackQuery','loginRequired','botmanager','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','\x20(2)','backup-full@','Starting\x20#RED#Balance\x20Bot\x20v','All\x20bots','manual','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','reset-history','sendPortfolioTelegram','30\x20min','length','sendFile','Restoring\x20bot(s)\x20from\x20backup','telegramUsername','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Restore\x20backup\x20file\x20','output-002.log','/names\x20-\x20show\x20bot\x20names\x0a','apply','storeConfiguration','bbvReceive','Restore\x20process\x20aborted','-events.json','set','date-fns','exit','node-zip','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','server','/status\x20-\x20show\x20bot(s)\x20status\x0a','address','Disabled\x20Bot\x20','graphql-request','logs/','(((.+)+)+)+$','\x1b[35m','test','params','login\x20required','Invalid\x20authentication\x20token\x20(1)','data','store-configuration','temporary\x20access\x20rejected','logged\x20out','download','Starting\x20new\x20bot\x20|\x20Bot\x20','map','createServer','backup-full.zip','/:bot/portfolio','clients','bb/','Notifications\x20disabled','temporary\x20access\x20not\x20allowed','telegramToken','name','emit','debug','No\x20authentication\x20token','settings.','argv','compareSync','\x1b[31m','temporaryAccessAllowed','pidExpireLogin','404\x20Not\x20Found','defaults','Unauthorized\x20attempt\x20to\x20get\x20messages','file','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','version.json','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable',':\x20Bot\x20Mgr\x20>\x20','status','Starting\x20Balance\x20Bot\x20reinstallation','yes','secret','.zip','1603269ANHrIP','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','************','version','production','userid','/:bot/support','Access\x20enabled\x20for\x20','settings','reload','Unauthorized\x20attempt\x20to\x20show\x20configuration','chat','login\x20token\x20generated','botID','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','alerts','place-order','#RES#\x20if\x20running\x20locally\x0a','sort','bb-config.json','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','-----------------------------------------------------------------------------------','showConfig','kill','join','staging','bots','reason','5xFbMgk','hasOwnProperty','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Notifications\x20enabled','48444apAHpM','#RES#\x20if\x20running\x20on\x20server','Error\x20removing\x20old\x20backup\x20files:','\x20minutes','messages','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','telegramChatId','crypto','log','bb-settings.json','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Setting\x20access:\x20','auth','User\x20has\x20been\x20validated','get-portfolio','express-fileupload','[ip-address]','reject','timeshift','bbUsername','accept','includes','access','store','Invalid\x20IP\x20address','find','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','0.0.0','getHours','isIPv4MappedAddress','parse','config/','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','node-telegram-bot-api','temporary\x20token\x20generated','140338AwBgql','reinstall-bb','placeOrder','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','getFullYear','\x1b[34m','show-config','telegramEnabled','update-bot','headers','getMinutes','temp/','connected','type','sendMetricsTelegram','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','telegram','uuid','stop','338502UHmfuP','SIGINT','Unauthorized\x20attempt\x20to\x20add\x20bot','existsSync','Logged\x20in\x20user\x20...','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','cloneDeep','number','filter','clientip','6b67f3d61ee94b8f5c80b4affef4c4d9','title','environment','/:bot/history','function','catch','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','assign','output-000.log','getUTCHours','Login\x20rejected','telegramEvents','use','No\x20bots\x20running\x20right\x20now','format','/enable\x20-\x20enable\x20notifications\x0a','127.0.0.1','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','node','Ok,\x20will\x20send\x20order\x20notifications\x20only','match','padStart','IPv4','range','store-fiat','decrypt','util','readFileSync','apiPassword','Unauthorized\x20attempt\x20to\x20log\x20out','error','notification','\x20to\x20','username','timestamp','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Session\x20expired\x20for\x20user\x20...','static','child_process','/upload-backup','allow','get-messages','show','conn','sendMessage','family','keys','rmSync','init','\x20(1)','live','logs','express','/:bot/configuration','apiKey','DEFLATE','bbPassword','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','search','update','bbvNew','getTime','<b>Telegram\x20Bot\x20Status:</b>\x0a','Crypt','</b>\x20?','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','size','\x20only\x0a','\x1b[0m','ipaddr.js','Unauthorized\x20attempt\x20to\x20download\x20','/download/:type','all','handshake','secure','toIPv4MappedAddress','/on\x20-\x20start\x20bot(s)\x0a','botname','track','f2aRequired','_data','request','Network\x20Interfaces:','15\x20min','replace','cancel-loading','remoteAddress','Unauthorized\x20attempt\x20to\x20confirm\x20message','post','Markdown','-performance.json','mkdirSync','getStartingBalances','hashSync','Enabled\x20Bot\x20','$1_$2_$3','startsWith','Idling\x20bot\x20\x20\x20|\x20Bot\x20','SIGTERM','forEach','bot','expiry','emitHistory','*$1*','ipc','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','storeFiat','warning','new','Node.js\x20v','Yes','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','blacklist','mode','Error:\x20Invalid\x20argument\x20','HTML','reinstall','split','2FA\x20login\x20required','endsWith','2FA\x20required','full','headless','confirm-message','login','host','login\x20not\x20required','/:bot/coins','627368APcmss','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','readdirSync','started','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','ipv6','message','env','telegrammsg','=>\x20Go\x20to\x20#CYA#http://','***','privateKey','Password\x20reset\x20rejected','zip/','axios'];_0x1547=function(){return _0x491730;};return _0x1547();}function getServerTime(){const _0x20f2e5=_0x2cf2f2,_0x3b0ff0=new Date();return _0x3b0ff0[_0x20f2e5(0x349)]()+'/'+(_0x3b0ff0[_0x20f2e5(0x25f)]()+0x1)[_0x20f2e5(0x289)]()['padStart'](0x2,'0')+'/'+_0x3b0ff0[_0x20f2e5(0x29a)]()[_0x20f2e5(0x289)]()[_0x20f2e5(0x377)](0x2,'0')+'\x20'+_0x3b0ff0[_0x20f2e5(0x33e)]()[_0x20f2e5(0x289)]()[_0x20f2e5(0x377)](0x2,'0')+':'+_0x3b0ff0['getMinutes']()['toString']()[_0x20f2e5(0x377)](0x2,'0')+':'+_0x3b0ff0[_0x20f2e5(0x27b)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x320843=_0x2cf2f2,_0x3fb43c=shiftedTime();return _0x3fb43c[_0x320843(0x349)]()+'/'+(_0x3fb43c[_0x320843(0x25f)]()+0x1)['toString']()[_0x320843(0x377)](0x2,'0')+'/'+_0x3fb43c[_0x320843(0x29a)]()[_0x320843(0x289)]()[_0x320843(0x377)](0x2,'0')+'\x20'+_0x3fb43c[_0x320843(0x33e)]()[_0x320843(0x289)]()['padStart'](0x2,'0')+':'+_0x3fb43c[_0x320843(0x34f)]()['toString']()[_0x320843(0x377)](0x2,'0')+':'+_0x3fb43c['getSeconds']()['toString']()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x25896=_0x2cf2f2,_0x30509=shiftedTime();return _0x30509[_0x25896(0x349)]()+(_0x30509['getMonth']()+0x1)[_0x25896(0x289)]()[_0x25896(0x377)](0x2,'0')+_0x30509[_0x25896(0x29a)]()['toString']()[_0x25896(0x377)](0x2,'0')+'-'+_0x30509[_0x25896(0x33e)]()[_0x25896(0x289)]()['padStart'](0x2,'0')+_0x30509[_0x25896(0x34f)]()[_0x25896(0x289)]()[_0x25896(0x377)](0x2,'0')+_0x30509['getSeconds']()[_0x25896(0x289)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x5abcb4=_0x2cf2f2,_0xe5b844=new Date();let _0x4d4d10=_0xe5b844;if(settings['timeshift']&&settings[_0x5abcb4(0x334)]!==0x0)_0x4d4d10=fns['add'](_0xe5b844,{'hours':settings[_0x5abcb4(0x334)]});return _0x4d4d10;}function startScheduler(){const _0x1b20e1=_0x2cf2f2,_0x609bc4=new Date()[_0x1b20e1(0x36b)](),_0x36810e=shiftedTime()['getHours']();_0x36810e==0x4&&backupConfigFiles();_0x36810e==0x0&&rotateLogFiles();_0x609bc4%0x6==0x0&&triggerAnalytics();_0x609bc4%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0xc2a6bd){const _0xc242ee=_0x2cf2f2;logger['debug'](_0xc242ee(0x2c2)+_0xc2a6bd);const _0x15db41=getBotsWithMode();_0x15db41['length']>0x0?confirmRestore(configbackuppath,_0xc2a6bd):unzipFile(configbackuppath,_0xc2a6bd);}async function getBackupFiles(_0x460b64=null){const _0x1a6d77=_0x2cf2f2;let _0x287879=[],_0x1ef0df=fs[_0x1a6d77(0x1fa)](configbackuppath,{'withFileTypes':!![]});_0x1ef0df['sort']((_0x5eca52,_0x2590d8)=>_0x5eca52[_0x1a6d77(0x2ea)]<_0x2590d8[_0x1a6d77(0x2ea)]?0x1:_0x2590d8['name']<_0x5eca52[_0x1a6d77(0x2ea)]?-0x1:0x0),_0x1ef0df[_0x1a6d77(0x1db)](_0x1f677b=>{const _0x80ae6d=_0x1a6d77;if(!_0x1f677b[_0x80ae6d(0x29d)]()&&_0x1f677b['name']['startsWith'](_0x80ae6d(0x2b5))&&_0x1f677b['name'][_0x80ae6d(0x1ef)](_0x80ae6d(0x300))){const _0x3c3a33=formatDate(fs['statSync'](configbackuppath+_0x1f677b['name'])[_0x80ae6d(0x295)]);_0x287879[_0x80ae6d(0x20b)]({'name':_0x1f677b[_0x80ae6d(0x2ea)],'mtime':_0x3c3a33});}});if(_0x460b64)io['to'](_0x460b64)[_0x1a6d77(0x2eb)](_0x1a6d77(0x219),_0x287879);else return _0x287879;}async function backupConfigFiles(){const _0x57b3c8=_0x2cf2f2;await zipFiles(_0x57b3c8(0x296));const _0x324de0=getCleanTimeStamp();fs[_0x57b3c8(0x26e)](zippath+_0x57b3c8(0x2e3),configbackuppath+(_0x57b3c8(0x2b5)+_0x324de0+_0x57b3c8(0x300)));let _0x3048e2=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x3048e2['sort']((_0x50cfec,_0x1998f9)=>_0x50cfec[_0x57b3c8(0x2ea)]<_0x1998f9[_0x57b3c8(0x2ea)]?0x1:_0x1998f9[_0x57b3c8(0x2ea)]<_0x50cfec[_0x57b3c8(0x2ea)]?-0x1:0x0),_0x3048e2['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x3048e2[_0x3048e2[_0x57b3c8(0x2bd)]-0x1][_0x57b3c8(0x2ea)]);}function rotateLogFiles(){const _0x2be1b0=_0x2cf2f2,_0x2a9fae=fs[_0x2be1b0(0x212)](logspath+_0x2be1b0(0x36a)),_0x572256=_0x2a9fae[_0x2be1b0(0x3a4)]/0x400;if(_0x572256>0x64){let _0x4e5fce=fs['readdirSync'](logspath,{'withFileTypes':!![]});_0x4e5fce[_0x2be1b0(0x313)]((_0x374dae,_0x3453b8)=>_0x374dae[_0x2be1b0(0x2ea)]<_0x3453b8[_0x2be1b0(0x2ea)]?0x1:_0x3453b8[_0x2be1b0(0x2ea)]<_0x374dae['name']?-0x1:0x0),_0x4e5fce[_0x2be1b0(0x1db)](_0x2f855f=>{const _0xb4eec4=_0x2be1b0;if(_0x2f855f[_0xb4eec4(0x2ea)]==_0xb4eec4(0x2c3))fs[_0xb4eec4(0x26e)](logspath+_0x2f855f[_0xb4eec4(0x2ea)],logspath+_0xb4eec4(0x23c));if(_0x2f855f[_0xb4eec4(0x2ea)]=='output-001.log')fs[_0xb4eec4(0x26e)](logspath+_0x2f855f[_0xb4eec4(0x2ea)],logspath+_0xb4eec4(0x2c3));_0x2f855f[_0xb4eec4(0x2ea)]==_0xb4eec4(0x36a)&&(fs[_0xb4eec4(0x26e)](logspath+_0x2f855f[_0xb4eec4(0x2ea)],logspath+_0xb4eec4(0x248)),fs[_0xb4eec4(0x26d)](logspath+_0x2f855f[_0xb4eec4(0x2ea)],''));});}}async function zipFiles(_0x40fd12){const _0x81e232=_0x2cf2f2;let _0x16ea19;if(_0x40fd12==_0x81e232(0x395))_0x16ea19=logspath;if(_0x40fd12==_0x81e232(0x21a))_0x16ea19=configpath;if(_0x40fd12==_0x81e232(0x296))_0x16ea19=configpath;let _0x2b26e8=fs[_0x81e232(0x1fa)](_0x16ea19,{'withFileTypes':!![]});const _0x537c76=new require(_0x81e232(0x2cd))();_0x2b26e8[_0x81e232(0x1db)](_0x568b25=>{const _0x26bbab=_0x81e232;if(!_0x568b25[_0x26bbab(0x29d)]()){let _0x8f90c3=fs[_0x26bbab(0x37d)](_0x16ea19+_0x568b25[_0x26bbab(0x2ea)]);if(_0x40fd12==_0x26bbab(0x21a)){const _0x16a2a3=/^bot-[0-9]{3}-config.json$/,_0x2672bb=_0x16a2a3[_0x26bbab(0x2d7)](_0x568b25[_0x26bbab(0x2ea)]);if(_0x2672bb){const _0x65f5da=JSON[_0x26bbab(0x340)](_0x8f90c3);if(_0x65f5da[_0x26bbab(0x1dc)][0x0]){_0x65f5da[_0x26bbab(0x1dc)][0x0][_0x26bbab(0x398)]=_0x26bbab(0x202),_0x65f5da[_0x26bbab(0x1dc)][0x0][_0x26bbab(0x280)]='***';if(_0x65f5da[_0x26bbab(0x1dc)][0x0][_0x26bbab(0x37e)])_0x65f5da[_0x26bbab(0x1dc)][0x0]['apiPassword']='***';}_0x8f90c3=JSON[_0x26bbab(0x28e)](_0x65f5da,null,0x2);}if(_0x568b25[_0x26bbab(0x2ea)]==_0x26bbab(0x32b)){const _0x491cf0=JSON[_0x26bbab(0x340)](_0x8f90c3);if(_0x491cf0['settings'][_0x26bbab(0x2b1)])_0x491cf0[_0x26bbab(0x309)][_0x26bbab(0x2b1)]=![];if(_0x491cf0['settings']['bbPassword'])_0x491cf0['settings'][_0x26bbab(0x39a)]=_0x26bbab(0x202);if(_0x491cf0['settings']['telegramToken'])_0x491cf0['settings'][_0x26bbab(0x2e9)]=_0x26bbab(0x202);if(_0x491cf0[_0x26bbab(0x309)][_0x26bbab(0x328)])_0x491cf0['settings'][_0x26bbab(0x328)]=null;_0x8f90c3=JSON[_0x26bbab(0x28e)](_0x491cf0,null,0x2);}if(_0x568b25[_0x26bbab(0x2ea)]!=_0x26bbab(0x272))_0x537c76[_0x26bbab(0x2f7)](_0x568b25[_0x26bbab(0x2ea)],_0x8f90c3);}else _0x537c76['file'](_0x568b25[_0x26bbab(0x2ea)],_0x8f90c3);}});const _0xd5d358=_0x537c76[_0x81e232(0x273)]({'base64':![],'compression':_0x81e232(0x399)});fs[_0x81e232(0x26d)](zippath+(_0x40fd12+'.zip'),_0xd5d358,_0x81e232(0x210));}async function unzipFile(_0x4ad47c,_0x3ded85){const _0x9d90c7=_0x2cf2f2;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x9d90c7(0x1db)](_0x195eb7=>{const _0xafdcc1=_0x9d90c7;if(!_0x195eb7[_0xafdcc1(0x29d)]())fs[_0xafdcc1(0x391)](configpath+_0x195eb7[_0xafdcc1(0x2ea)]);});const _0x37ec26=fs[_0x9d90c7(0x37d)](_0x4ad47c+_0x3ded85,_0x9d90c7(0x210)),_0x1c12e2=new require(_0x9d90c7(0x2cd))(_0x37ec26,{'base64':![],'checkCRC32':!![]});Object[_0x9d90c7(0x390)](_0x1c12e2['files'])[_0x9d90c7(0x1db)](_0x279688=>{const _0x5bf872=_0x9d90c7,_0x156300=_0x1c12e2[_0x5bf872(0x25e)][_0x279688];fs[_0x5bf872(0x26d)](configpath+_0x156300[_0x5bf872(0x2ea)],_0x156300[_0x5bf872(0x3b2)]);}),fs[_0x9d90c7(0x1fa)](temppath,{'withFileTypes':!![]})['forEach'](_0x3a6240=>{const _0x495aad=_0x9d90c7;if(!_0x3a6240[_0x495aad(0x29d)]())fs[_0x495aad(0x391)](temppath+_0x3a6240[_0x495aad(0x2ea)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x2d6233=>{});}async function getPublicIp(){const _0x2e14d4=_0x2cf2f2;try{const _0x17e62e=await axios[_0x2e14d4(0x20c)](_0x2e14d4(0x220));publicip=_0x17e62e[_0x2e14d4(0x2db)]['ip'];}catch(_0x324679){}}async function triggerAnalytics(){const _0x515244=_0x2cf2f2;if(!publicip)await getPublicIp();const _0x1b0344=getBotsWithMode();let _0x45a41a=0x0;_0x1b0344[_0x515244(0x1db)](_0x1b7d33=>{const _0x4cfc3a=_0x515244;if(_0x1b7d33[_0x4cfc3a(0x2fc)]===_0x4cfc3a(0x27a))_0x45a41a++;});const _0x182013=getBotExchanges();mixpanel[_0x515244(0x3b0)]('Server',{'distinct_id':settings[_0x515244(0x306)],'ip':publicip,'version':serverversion,'numbots':_0x1b0344[_0x515244(0x2bd)],'numbotsenabled':_0x45a41a,'exchanges':_0x182013,'environment':environment});}async function getMessages(){const _0x1f67bf=_0x2cf2f2,_0x39be50=_0x1f67bf(0x302),_0xb994bc=new GraphQLClient(_0x39be50),_0x48697a={'authorization':_0x1f67bf(0x255)},_0xf2ba4e=serverversion[_0x1f67bf(0x1ed)]('.'),_0x44a99d=_0xf2ba4e[0x0]+'.'+_0xf2ba4e[0x1],_0x4f608e=Math[_0x1f67bf(0x20d)](settings[_0x1f67bf(0x259)],settings[_0x1f67bf(0x285)]),_0x299719={'last':parseInt(_0x4f608e),'bbm':_0x44a99d},_0x33a55f=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x21b4f2;try{_0x21b4f2=await _0xb994bc[_0x1f67bf(0x3b3)](_0x33a55f,_0x299719,_0x48697a);}catch(_0x713c0){}if(_0x21b4f2&&_0x21b4f2[_0x1f67bf(0x325)]){let _0x17a243=settings[_0x1f67bf(0x259)];newMessages=[];for(const _0x3efa58 of _0x21b4f2['messages']){newMessages[_0x1f67bf(0x20b)](_0x3efa58);let _0x20f351=![];_0x3efa58[_0x1f67bf(0x39e)]&&(updateSetting('latestversion',_0x3efa58[_0x1f67bf(0x39e)]),_0x20f351=isNewerVersion(serverversion,_0x3efa58[_0x1f67bf(0x39e)])||serverversion==_0x3efa58[_0x1f67bf(0x39e)]);if(!_0x20f351&&_0x3efa58[_0x1f67bf(0x35f)]>_0x17a243){if(_0x3efa58[_0x1f67bf(0x2c7)]==='any'||serverversion[_0x1f67bf(0x3c2)](_0x3efa58[_0x1f67bf(0x2c7)])){let _0x18ef48=''+_0x3efa58[_0x1f67bf(0x363)]+'\x0a\x0a'+_0x3efa58['message'];const _0x232fd7=await sendTelegramMsg(toTelegramMarkdown(_0x18ef48),_0x1f67bf(0x3bb));if(_0x232fd7)_0x17a243=_0x3efa58[_0x1f67bf(0x35f)];}}}updateAvailable=isNewerVersion(settings[_0x1f67bf(0x288)],serverversion),updateSetting(_0x1f67bf(0x259),_0x17a243),emitMessages();}}function emitMessages(){const _0x22aeeb=_0x2cf2f2,_0x579a7c=settings[_0x22aeeb(0x285)];let _0x1c197f=[];newMessages[_0x22aeeb(0x1db)](_0x2974f6=>{const _0x4a0ae0=_0x22aeeb;_0x2974f6[_0x4a0ae0(0x35f)]>_0x579a7c&&_0x1c197f['push'](_0x2974f6);}),_0x1c197f['length']>0x0&&getAllClients()[_0x22aeeb(0x1db)](_0x43b6ed=>{const _0xd602e8=_0x22aeeb;getSocket(_0x43b6ed['id'])['emit'](_0xd602e8(0x1fe),_0x1c197f);});}function confirmMessage(_0xe7f03c){updateSetting('lastmsgemitted',Number(_0xe7f03c));}function isNewerVersion(_0x45324b,_0x4a45cd){const _0xcce1ed=_0x2cf2f2,_0x5ad5fe=_0x4a45cd['split']('.'),_0xfb82a6=_0x45324b[_0xcce1ed(0x1ed)]('.');for(var _0x33940a=0x0;_0x33940a<_0xfb82a6['length'];_0x33940a++){const _0x3b99e0=~~_0xfb82a6[_0x33940a],_0x49e23f=~~_0x5ad5fe[_0x33940a];if(_0x3b99e0>_0x49e23f)return!![];if(_0x3b99e0<_0x49e23f)return![];}return![];}function toTelegramMarkdown(_0x1a0380){const _0x3ef010=_0x2cf2f2,_0x3c96a7=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x538fbe=/\*{2}(.+?)\*{2}/gim;return _0x1a0380=_0x1a0380[_0x3ef010(0x3b6)](_0x3c96a7,_0x3ef010(0x3c1))[_0x3ef010(0x3b6)](_0x538fbe,_0x3ef010(0x1df)),_0x1a0380;}async function validateConfigFile(){const _0x340e46=_0x2cf2f2,_0x5ad343=dbConfig[_0x340e46(0x20c)](_0x340e46(0x31b))[_0x340e46(0x2a5)]('botID')['value']()||[];if(_0x5ad343[_0x340e46(0x2bd)]==0x0){let _0x5dd7bc=0x0,_0x35b3cd=[];const _0x4b3b7e=/^bot-([0-9]{3})-config.json$/,_0xaf9483=fs['readdirSync'](configpath);_0xaf9483[_0x340e46(0x1db)](_0x5122ba=>{const _0x1faf9b=_0x340e46,_0x246241=_0x4b3b7e['exec'](_0x5122ba);if(_0x246241){const _0x15210b=_0x246241[0x1];let _0x268aa5=getBotAttributes(_0x15210b);_0x35b3cd[_0x1faf9b(0x20b)]({'botID':_0x15210b,'botname':_0x268aa5[_0x1faf9b(0x3af)],'status':_0x1faf9b(0x20a),'live':_0x1faf9b(0x225)}),_0x5dd7bc++;}}),_0x5dd7bc!=0x0&&(dbConfig[_0x340e46(0x20c)]('bots')[_0x340e46(0x369)](_0x35b3cd)[_0x340e46(0x23a)](),config=_0x35b3cd,restoredConfigFile=_0x5dd7bc);}}async function restoreConfigNotify(_0x5827f5){const _0x8ce150=_0x2cf2f2;let _0x6fc87c;if(restoredConfigFile==0x1)_0x6fc87c=_0x8ce150(0x39b);else _0x6fc87c=_0x8ce150(0x253);if(_0x5827f5)io['to'](_0x8ce150(0x2b2))[_0x8ce150(0x2eb)](_0x8ce150(0x381),_0x6fc87c);else{logger[_0x8ce150(0x21c)]('-----------------------------------------------------------------------------------'),logger[_0x8ce150(0x21c)](_0x6fc87c),logger[_0x8ce150(0x21c)](_0x8ce150(0x316)),logger[_0x8ce150(0x21c)]('');if(tgBot&&settings[_0x8ce150(0x328)]&&settings[_0x8ce150(0x36d)]!=_0x8ce150(0x227))tgBot[_0x8ce150(0x38e)](settings[_0x8ce150(0x328)],_0x8ce150(0x29f)+_0x6fc87c)[_0x8ce150(0x367)](_0x546e00=>{telegramError(_0x546e00);});}}function validateCredentials(_0x79eeb1,_0x224984){const _0x271251=_0x2cf2f2;if(_0x79eeb1[_0x271251(0x383)]==settings[_0x271251(0x335)]&&bcrypt[_0x271251(0x2f0)](_0x79eeb1[_0x271251(0x22d)],settings[_0x271251(0x39a)])){if(settings[_0x271251(0x3b1)])return{'allow':![],'reason':_0x271251(0x1ee),'token':null};else{const _0x128f5f=generateLoginToken(_0x224984);return{'allow':!![],'reason':_0x271251(0x30d),'token':_0x128f5f};}}else return{'allow':![],'reason':_0x271251(0x254),'token':null};}function refreshToken(_0x313051){const _0x57a2f0=_0x2cf2f2,_0xc37a68=generateLoginToken(_0x313051);return{'allow':!![],'reason':_0x57a2f0(0x30d),'token':_0xc37a68};}function validateAccess(_0x304102,_0x48e4f0,_0x2980a9){const _0x51c1bd=_0x2cf2f2,_0x14e297=_0x2980a9?_0x2980a9:devices[_0x48e4f0]['ip'];let _0x3cb8cd;const _0x42199c=_0x665044=>{const _0x1c5512=_0xdf12;if(settings['loginRequired']){if(settings[_0x1c5512(0x3b1)]){if(telegram2FaApproved(_0x48e4f0)){const _0x23ad0f=generateLoginToken(_0x48e4f0);return{'allow':!![],'reason':_0x1c5512(0x2ac),'token':_0x23ad0f};}else return{'allow':![],'reason':_0x1c5512(0x2d9),'token':null};}else return _0x3cb8cd=validToken(_0x665044,_0x48e4f0),_0x3cb8cd[_0x1c5512(0x31e)]('success')?{'allow':!![],'reason':_0x1c5512(0x243),'token':_0x665044}:{'allow':![],'reason':_0x1c5512(0x2d9),'token':null};}else return{'allow':!![],'reason':_0x1c5512(0x1f6),'token':null};};if(settings[_0x51c1bd(0x245)]){let _0x563ad8=[...settings['whitelist'],'::1','::ffff:127.0.0.1',_0x51c1bd(0x372)];if(_0x563ad8[_0x51c1bd(0x337)](_0x14e297))return _0x42199c(_0x304102);else{_0x3cb8cd=validToken(_0x304102,_0x48e4f0);if(_0x3cb8cd['hasOwnProperty'](_0x51c1bd(0x208)))return _0x42199c(_0x304102);else{if(telegramIpApproved(_0x48e4f0)){const _0x209dce=generateToken(_0x48e4f0);return _0x3cb8cd=_0x42199c(_0x304102),_0x3cb8cd[_0x51c1bd(0x38a)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x209dce}:_0x3cb8cd;}else return settings[_0x51c1bd(0x2f2)]?{'allow':![],'reason':_0x51c1bd(0x1f0),'token':null}:{'allow':![],'reason':_0x51c1bd(0x2e8),'token':null};}}}else return _0x42199c(_0x304102);}function timelyDecrypt(_0x51fb60,_0x272795=!![]){const _0x18afcb=_0x2cf2f2;if(_0x51fb60)try{const _0x26bad1=crypt['decrypt'](secure[_0x18afcb(0x203)],_0x51fb60)[_0x18afcb(0x1fe)],_0x2316b1=_0x26bad1[_0x18afcb(0x1ed)]('@')[0x0],_0x3507be=_0x26bad1[_0x18afcb(0x1ed)]('@')[0x1],_0x40c3c0=new Date()[_0x18afcb(0x39f)]();if(_0x272795){if(_0x40c3c0-_0x3507be<maxSecretAge*0x3e8)return _0x2316b1;else return![];}else return _0x2316b1;}catch(_0x51b156){return![];}else return![];}const validToken=(_0x3c599a,_0x3b9aec)=>{const _0x2c6097=_0x2cf2f2,_0x8d85e1=devices[_0x3b9aec]['ip'];if(!_0x3c599a)return{'error':_0x2c6097(0x2ed)};for(let _0x24357b of blacklist){if(_0x24357b['token']==_0x3c599a)return{'error':'Token\x20blacklisted'};}let _0x32645a;try{_0x32645a=jwt[_0x2c6097(0x291)](_0x3c599a,secure[_0x2c6097(0x2ff)]+_0x3b9aec);}catch{return{'error':_0x2c6097(0x2da)};}if(!_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x361))&&!_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x383))||!_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x2a4)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x383))&&_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x361))){const {clientip:_0x90ad6f}=_0x32645a;return _0x8d85e1==_0x90ad6f?{'success':_0x2c6097(0x32f)}:{'error':_0x2c6097(0x33a)};}else{if(_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x383))&&_0x32645a[_0x2c6097(0x31e)](_0x2c6097(0x361))){const {username:_0x102cc2,clientip:_0xd84c89}=_0x32645a;return settings[_0x2c6097(0x335)]==_0x102cc2&&_0x8d85e1==_0xd84c89?{'success':_0x2c6097(0x32f)}:{'error':_0x2c6097(0x22a)};}}},generateLoginToken=_0x21f206=>{const _0x4d70d8=_0x2cf2f2;if(_0x21f206){const _0x5f15a1=devices[_0x21f206]['ip'];return jwt[_0x4d70d8(0x221)]({'username':settings[_0x4d70d8(0x335)],'clientip':_0x5f15a1},secure[_0x4d70d8(0x2ff)]+_0x21f206,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1516ce=>{const _0xdae3fb=_0x2cf2f2;if(_0x1516ce){const _0x21fcdb=devices[_0x1516ce]['ip'];return jwt[_0xdae3fb(0x221)]({'clientip':_0x21fcdb},secure[_0xdae3fb(0x2ff)]+_0x1516ce,{'expiresIn':devices[_0x1516ce][_0xdae3fb(0x281)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x4a5413=>{const _0x1b48d3=_0x2cf2f2;let _0xdce460=![];return devices[_0x4a5413][_0x1b48d3(0x281)]&&devices[_0x4a5413][_0x1b48d3(0x281)][_0x1b48d3(0x1dd)]!=_0x1b48d3(0x333)&&(_0xdce460=devices[_0x4a5413][_0x1b48d3(0x281)][_0x1b48d3(0x361)]==devices[_0x4a5413]['ip']&&new Date()['getTime']()-devices[_0x4a5413][_0x1b48d3(0x281)][_0x1b48d3(0x384)]<devices[_0x4a5413][_0x1b48d3(0x281)][_0x1b48d3(0x1dd)]*0x3c*0x3e8),_0xdce460;},telegram2FaApproved=_0x3eda00=>{const _0x55f8e7=_0x2cf2f2;let _0xf3d815=![];return devices[_0x3eda00][_0x55f8e7(0x230)]&&devices[_0x3eda00][_0x55f8e7(0x230)][_0x55f8e7(0x1dd)]!='reject'&&(_0xf3d815=devices[_0x3eda00][_0x55f8e7(0x230)][_0x55f8e7(0x361)]==devices[_0x3eda00]['ip']&&new Date()[_0x55f8e7(0x39f)]()-devices[_0x3eda00][_0x55f8e7(0x230)]['timestamp']<devices[_0x3eda00][_0x55f8e7(0x230)][_0x55f8e7(0x1dd)]*0x3c*0x3e8),_0xf3d815;},normalizeIP=_0x5d5078=>{const _0xec49e6=_0x2cf2f2;let _0x448b7a=null,_0x316f62=null;if(ipaddr[_0xec49e6(0x24e)](_0x5d5078)){const _0x1f133d=ipaddr['parse'](_0x5d5078);_0x1f133d['kind']()===_0xec49e6(0x1fd)?(_0x1f133d[_0xec49e6(0x33f)]()&&(_0x448b7a=_0x1f133d[_0xec49e6(0x28c)]()[_0xec49e6(0x289)]()),_0x316f62=_0x1f133d[_0xec49e6(0x289)]()):(_0x448b7a=_0x1f133d[_0xec49e6(0x289)](),_0x316f62=_0x1f133d[_0xec49e6(0x3ad)]()[_0xec49e6(0x289)]());}return{'show':_0x448b7a?_0x448b7a:_0x316f62,'store':_0x316f62};};function formatDate(_0x1a6e26){const _0x3b0a52=_0x2cf2f2;return _0x1a6e26[_0x3b0a52(0x349)]()+'/'+(_0x1a6e26[_0x3b0a52(0x25f)]()+0x1)['toString']()[_0x3b0a52(0x377)](0x2,'0')+'/'+_0x1a6e26[_0x3b0a52(0x29a)]()[_0x3b0a52(0x289)]()[_0x3b0a52(0x377)](0x2,'0')+'\x20'+_0x1a6e26[_0x3b0a52(0x33e)]()[_0x3b0a52(0x289)]()[_0x3b0a52(0x377)](0x2,'0')+':'+_0x1a6e26[_0x3b0a52(0x34f)]()[_0x3b0a52(0x289)]()[_0x3b0a52(0x377)](0x2,'0')+':'+_0x1a6e26[_0x3b0a52(0x27b)]()['toString']()[_0x3b0a52(0x377)](0x2,'0');}function sleep(_0x4e1b12){return new Promise(_0x4e559b=>setTimeout(_0x4e559b,_0x4e1b12));}