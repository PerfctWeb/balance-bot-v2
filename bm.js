const _0x4e68de=_0x56d3;(function(_0x30edd1,_0x60b2d3){const _0x5998ac=_0x56d3,_0x4a77e0=_0x30edd1();while(!![]){try{const _0x4c5d4b=-parseInt(_0x5998ac(0x20b))/0x1*(-parseInt(_0x5998ac(0x1d3))/0x2)+-parseInt(_0x5998ac(0x2b4))/0x3+parseInt(_0x5998ac(0xfd))/0x4*(parseInt(_0x5998ac(0x135))/0x5)+-parseInt(_0x5998ac(0x16a))/0x6*(parseInt(_0x5998ac(0x1ec))/0x7)+-parseInt(_0x5998ac(0x15b))/0x8*(parseInt(_0x5998ac(0x1bf))/0x9)+-parseInt(_0x5998ac(0x1c0))/0xa+-parseInt(_0x5998ac(0x125))/0xb*(-parseInt(_0x5998ac(0x167))/0xc);if(_0x4c5d4b===_0x60b2d3)break;else _0x4a77e0['push'](_0x4a77e0['shift']());}catch(_0x50208e){_0x4a77e0['push'](_0x4a77e0['shift']());}}}(_0x5692,0x3cf8b));const _0x1ab887=function(){let _0x4b31ca=!![];return function(_0xb27ba0,_0x3d2c8b){const _0x1da110=_0x4b31ca?function(){const _0x2fc8ac=_0x56d3;if(_0x3d2c8b){const _0x1d52d5=_0x3d2c8b[_0x2fc8ac(0x278)](_0xb27ba0,arguments);return _0x3d2c8b=null,_0x1d52d5;}}:function(){};return _0x4b31ca=![],_0x1da110;};}(),_0x42f472=_0x1ab887(this,function(){const _0x114917=_0x56d3;return _0x42f472[_0x114917(0x2af)]()['search']('(((.+)+)+)+$')[_0x114917(0x2af)]()[_0x114917(0x205)](_0x42f472)[_0x114917(0x259)](_0x114917(0x2b3));});_0x42f472();'use strict';process[_0x4e68de(0x2d0)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4e68de(0x2a4)),fs=require('fs'),fns=require('date-fns'),low=require(_0x4e68de(0x2a5)),FileSync=require(_0x4e68de(0xeb)),path=require(_0x4e68de(0x14b)),crypto=require(_0x4e68de(0x1ed)),Crypt=require(_0x4e68de(0x275))[_0x4e68de(0x1cb)],RSA=require(_0x4e68de(0x275))[_0x4e68de(0x124)],bcrypt=require(_0x4e68de(0x26a)),jwt=require(_0x4e68de(0x293)),ipaddr=require('ipaddr.js'),argv=require(_0x4e68de(0x19b))(process[_0x4e68de(0xfc)][_0x4e68de(0x1fe)](0x2))['argv'],uuidRandom=require(_0x4e68de(0x176)),{Telegraf,Markup}=require(_0x4e68de(0x121)),Mixpanel=require(_0x4e68de(0x1d2)),axios=require(_0x4e68de(0x178)),{GraphQLClient,gql}=require(_0x4e68de(0x226)),util=require(_0x4e68de(0x15e)),fileUpload=require(_0x4e68de(0x2c6)),{networkInterfaces}=require('os'),PORT=argv['port']||_0x4e68de(0x29c),pattern=/^[0-9]{2,4}$/;!pattern[_0x4e68de(0x190)](PORT)&&(console[_0x4e68de(0x1af)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x4e68de(0x2b2)),process[_0x4e68de(0xfa)](0x1));const HOST=argv[_0x4e68de(0x2ac)]||null,userID=argv['user']||'',debugging=argv['d']||![],nodeversion=process[_0x4e68de(0x1aa)][_0x4e68de(0x2cc)];let bbpath=_0x4e68de(0xee),bbpath2='';const botfile=_0x4e68de(0x1f3),configfile='bb-config.json',settingsfile=_0x4e68de(0x199),securefile=_0x4e68de(0xd9),environment=require('./'+bbpath2+_0x4e68de(0x14f))[_0x4e68de(0x174)]||_0x4e68de(0x1ad),maxBackups=0xa;let validInstallation=!![];!fs[_0x4e68de(0x104)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x4e68de(0x1ab)+userID+'/':bbpath+_0x4e68de(0x1ab),configbackuppath=configpath+_0x4e68de(0x1f8),logspath=userID?bbpath+_0x4e68de(0x1ee)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+_0x4e68de(0x221)+userID+'/':bbpath+_0x4e68de(0x221),loggerfile=fs[_0x4e68de(0x201)](logspath+_0x4e68de(0x123),{'flags':'a'}),temppath=userID?bbpath+_0x4e68de(0x23e)+userID+'/':bbpath+_0x4e68de(0x23e);!fs['existsSync'](configpath)&&fs[_0x4e68de(0x177)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4e68de(0x177)](configbackuppath);!fs[_0x4e68de(0x104)](logspath)&&fs[_0x4e68de(0x177)](logspath);!fs['existsSync'](zippath)&&fs[_0x4e68de(0x177)](zippath);!fs[_0x4e68de(0x104)](temppath)&&fs[_0x4e68de(0x177)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4e68de(0x163)]({'bots':[]})[_0x4e68de(0x229)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4e68de(0x163)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![],'marketcapApi':''}})[_0x4e68de(0x229)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4e68de(0x163)]({'secure':{},'blacklist':[]})[_0x4e68de(0x229)]();let crypt=new Crypt({'md':_0x4e68de(0x21e),'rsaStandard':_0x4e68de(0x159)});const saltRounds=0xa,mixpanel=Mixpanel[_0x4e68de(0x2a2)](_0x4e68de(0x258),{'host':_0x4e68de(0x261)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x4e68de(0x132)]&&(settings[_0x4e68de(0x132)]!=''&&settings['telegramToken']!=_0x4e68de(0x2cf))&&settings[_0x4e68de(0x250)]&&settings[_0x4e68de(0x250)]!='')initTelegram();const parseColor=(_0x56c5b5,_0x383173)=>{const _0x2ce95e=_0x4e68de,_0x549e1e=/#[A-Z]{3}#/g;if(typeof _0x56c5b5=='string'){!_0x383173?_0x56c5b5=_0x56c5b5['replace'](_0x549e1e,''):(_0x56c5b5=_0x56c5b5[_0x2ce95e(0x148)](/#BLU#/g,_0x2ce95e(0x193)),_0x56c5b5=_0x56c5b5[_0x2ce95e(0x148)](/#RED#/g,_0x2ce95e(0xcb)),_0x56c5b5=_0x56c5b5[_0x2ce95e(0x148)](/#YEL#/g,'\x1b[33m'),_0x56c5b5=_0x56c5b5[_0x2ce95e(0x148)](/#MAG#/g,_0x2ce95e(0x17e)),_0x56c5b5=_0x56c5b5['replace'](/#CYA#/g,_0x2ce95e(0x2a6)),_0x56c5b5=_0x56c5b5[_0x2ce95e(0x148)](/#RES#/g,_0x2ce95e(0x158)));;}return _0x56c5b5;},logger={'screen':_0x1fbade=>{console['log'](parseColor(_0x1fbade,!![]));},'simple':_0x46194d=>{const _0xf99e06=_0x4e68de;console[_0xf99e06(0x1af)](parseColor(_0x46194d,!![])),loggerfile[_0xf99e06(0x229)](util[_0xf99e06(0x117)](parseColor(_0x46194d,![]))+'\x0a');},'full':async _0x18c6eb=>{const _0x1e0050=_0x4e68de,_0x433a3c=getTimeStamp()+_0x1e0050(0xe8)+_0x18c6eb;console[_0x1e0050(0x1af)](parseColor(_0x433a3c,!![])),loggerfile[_0x1e0050(0x229)](util['format'](parseColor(_0x433a3c,![]))+'\x0a');if(tgBot&&settings[_0x1e0050(0x26c)]&&settings[_0x1e0050(0x165)]!=_0x1e0050(0x18a))await sendTelegram(settings['telegramChatId'],_0x1e0050(0x1d1)+parseColor(_0x18c6eb,![]));},'debug':async(_0x2dad54,_0x2b3b8e='')=>{const _0x255c0c=_0x4e68de,_0x5da30d=getTimeStamp()+_0x255c0c(0x1e9)+_0x2dad54;if(debugging)console[_0x255c0c(0x1af)](parseColor(_0x5da30d,!![]));loggerfile[_0x255c0c(0x229)](util['format'](parseColor(_0x5da30d,![]))+'\x0a');if(_0x2b3b8e){if(debugging)console['log'](_0x2b3b8e);loggerfile[_0x255c0c(0x229)](util[_0x255c0c(0x117)](_0x2b3b8e)+'\x0a');}}};let terminating=![];process['on'](_0x4e68de(0x1b7),function(_0x4d4f13){const _0x500ffe=_0x4e68de;_0x4d4f13[_0x500ffe(0x2af)]()[_0x500ffe(0x2d4)](_0x500ffe(0x212))?(logger[_0x500ffe(0x2d1)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x4d4f13[_0x500ffe(0x22c)]+_0x500ffe(0x1d8)),process[_0x500ffe(0x170)]({'terminate':!![]},_0x4705ec=>{})):logger['simple'](_0x4d4f13);}),process['on'](_0x4e68de(0xfa),()=>{const _0x1366fb=_0x4e68de;stopAllBots(),process[_0x1366fb(0xfa)](0x0);}),process['on'](_0x4e68de(0x24c),()=>{const _0x22f531=_0x4e68de;stopAllBots(),process[_0x22f531(0xfa)](0x0);}),process['on'](_0x4e68de(0x166),()=>{const _0x4a8529=_0x4e68de;stopAllBots(),process[_0x4a8529(0xfa)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x4e68de(0x15c)),app=express(),http=require(_0x4e68de(0x1a1))[_0x4e68de(0x228)](app);app[_0x4e68de(0x251)](fileUpload({'useTempFiles':!![]})),app[_0x4e68de(0x2b8)]('/download/:type',async(_0x154e66,_0x4ffa25)=>{const _0x4f4dec=_0x4e68de,_0x5eafd9=_0x154e66[_0x4f4dec(0x283)][_0x4f4dec(0x1d5)],_0x1fd1ff=getClientsWithBotID('botmanager'),_0x1da7aa=_0x154e66[_0x4f4dec(0x113)][_0x4f4dec(0x1f5)],_0x3271f1=timelyDecrypt(_0x1da7aa,![]),_0x2a1a52=_0x1fd1ff['find'](_0x270015=>_0x270015['uuid']==_0x3271f1);if(_0x2a1a52){const _0x32ebe0=normalizeIP(_0x154e66[_0x4f4dec(0x133)]['remoteAddress'])[_0x4f4dec(0x280)],_0x238ac6=_0x154e66['headers'][_0x4f4dec(0x29b)];if(validateAccess(_0x238ac6,_0x3271f1,_0x32ebe0)['allow'])_0x5eafd9==_0x4f4dec(0x2c0)&&await backupConfigFiles(),await zipFiles(_0x5eafd9),_0x4ffa25[_0x4f4dec(0x144)](zippath+(_0x5eafd9+_0x4f4dec(0x23d)),_0x5b1cf0=>{const _0x1ea047=_0x4f4dec;_0x5b1cf0&&(logger[_0x1ea047(0x1ba)](_0x1ea047(0x1f1)+_0x5eafd9),logger[_0x1ea047(0x2d1)](_0x5b1cf0));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x5eafd9+_0x4f4dec(0x1b8));}else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x5eafd9+_0x4f4dec(0x214));}),app[_0x4e68de(0xf4)](_0x4e68de(0x217),async(_0x426617,_0x34b288)=>{const _0x24c1ff=_0x4e68de,_0x4d8fd5=getClientsWithBotID('botmanager'),_0xffc741=_0x426617[_0x24c1ff(0x113)][_0x24c1ff(0x1f5)],_0xd429a7=timelyDecrypt(_0xffc741,![]),_0x279295=_0x4d8fd5[_0x24c1ff(0xc8)](_0xabe66=>_0xabe66[_0x24c1ff(0x1f5)]==_0xd429a7);logger['debug'](_0x24c1ff(0x192));if(_0x279295){const _0x434e1a=normalizeIP(_0x426617['socket'][_0x24c1ff(0x22f)])[_0x24c1ff(0x280)],_0x169782=_0x426617[_0x24c1ff(0x113)][_0x24c1ff(0x29b)];if(validateAccess(_0x169782,_0xd429a7,_0x434e1a)['allow']){if(_0x426617['files']){const _0x344afc=_0x426617[_0x24c1ff(0x25b)][_0x24c1ff(0x151)];await _0x344afc['mv'](temppath+_0x344afc[_0x24c1ff(0x1ff)]),_0x34b288[_0x24c1ff(0x170)]({'status':!![],'message':'File\x20uploaded'});const _0x4687f8=getBotsWithMode();_0x4687f8[_0x24c1ff(0xd7)]>0x0?confirmRestore(temppath,_0x344afc[_0x24c1ff(0x1ff)]):unzipFile(temppath,_0x344afc[_0x24c1ff(0x1ff)]);}}else logger[_0x24c1ff(0x1ba)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x24c1ff(0x1ba)](_0x24c1ff(0x1a8));}),app['use'](express['static'](path[_0x4e68de(0x240)](__dirname,bbpath2,_0x4e68de(0x2ab)))),app[_0x4e68de(0x251)](express['static'](path[_0x4e68de(0x240)](__dirname,bbpath2,'build'))),app[_0x4e68de(0x2b8)]('/',function(_0x2cbdd8,_0x613d09){const _0x41b76b=_0x4e68de;_0x613d09['sendFile'](path['join'](__dirname,bbpath2,'build2',_0x41b76b(0x2ba)));}),app['get']('/:bot',function(_0x4c64ee,_0x2fa013){const _0x339ed3=_0x4e68de;_0x2fa013['sendFile'](path[_0x339ed3(0x240)](__dirname,bbpath2,'build',_0x339ed3(0x2ba)));}),app[_0x4e68de(0x2b8)](_0x4e68de(0x1bb),(_0xdd4332,_0x3bc6c2)=>{const _0x381a47=_0x4e68de;_0x3bc6c2['sendFile'](path['join'](__dirname,bbpath2,_0x381a47(0x142),'index.html'));}),app[_0x4e68de(0x2b8)]('/:bot/performance',(_0x384728,_0x3a93c1)=>{const _0x3c076b=_0x4e68de;_0x3a93c1[_0x3c076b(0x18b)](path[_0x3c076b(0x240)](__dirname,bbpath2,'build',_0x3c076b(0x2ba)));}),app['get']('/:bot/coins',(_0x19821d,_0x4b9706)=>{const _0x2cd5a6=_0x4e68de;_0x4b9706[_0x2cd5a6(0x18b)](path[_0x2cd5a6(0x240)](__dirname,bbpath2,'build',_0x2cd5a6(0x2ba)));}),app[_0x4e68de(0x2b8)](_0x4e68de(0x1f7),(_0x13032c,_0x240ff6)=>{const _0x26416c=_0x4e68de;_0x240ff6[_0x26416c(0x18b)](path[_0x26416c(0x240)](__dirname,bbpath2,_0x26416c(0x142),_0x26416c(0x2ba)));}),app[_0x4e68de(0x2b8)](_0x4e68de(0xd1),(_0x2403c3,_0x5397c6)=>{const _0x3e441f=_0x4e68de;_0x5397c6[_0x3e441f(0x18b)](path[_0x3e441f(0x240)](__dirname,bbpath2,_0x3e441f(0x142),_0x3e441f(0x2ba)));}),app[_0x4e68de(0x2b8)](_0x4e68de(0x2b7),(_0x13a1e0,_0x57f4c9)=>{const _0x2d82b6=_0x4e68de;_0x57f4c9[_0x2d82b6(0x18b)](path['join'](__dirname,bbpath2,_0x2d82b6(0x142),_0x2d82b6(0x2ba)));});if(HOST)http[_0x4e68de(0x23c)](PORT,HOST);else http[_0x4e68de(0x23c)](PORT);const io=require(_0x4e68de(0x140))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x32cce3=_0x4e68de;let _0x3a8f8e='[ip-address]';const _0x59fa68=networkInterfaces(),_0x50e02e={};for(const _0x4cd98a of Object['keys'](_0x59fa68)){for(const _0x566f18 of _0x59fa68[_0x4cd98a]){if((_0x566f18[_0x32cce3(0x27f)]==_0x32cce3(0x25f)||_0x566f18[_0x32cce3(0x27f)]==0x4)&&!_0x566f18[_0x32cce3(0x1e6)]){const _0x3275fd=ipaddr['parse'](_0x566f18['address'])[_0x32cce3(0x1f6)]();_0x3275fd!='private'&&(!_0x50e02e[_0x4cd98a]&&(_0x50e02e[_0x4cd98a]=[]),_0x50e02e[_0x4cd98a][_0x32cce3(0x2dc)](_0x566f18[_0x32cce3(0x295)]),_0x3a8f8e=_0x566f18[_0x32cce3(0x295)]);}}}return{'serverip':_0x3a8f8e,'netinterfaces':_0x50e02e};}async function startServer(){const _0x2e9041=_0x4e68de,{serverip:_0x155e49,netinterfaces:_0x2a42dc}=getServerIP();logger[_0x2e9041(0x2d1)](''),logger[_0x2e9041(0x2d1)]('-----------------------------------------------------------------------------------'),await logger['full'](_0x2e9041(0x146)+serverversion+_0x2e9041(0x10d)+(environment==_0x2e9041(0x16f)?_0x2e9041(0x282):'')+'\x0a'+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x2e9041(0x24f))+('=>\x20Go\x20to\x20#CYA#http://'+_0x155e49+':'+PORT+'#RES#\x20if\x20running\x20on\x20server')),logger[_0x2e9041(0x2d1)]('-----------------------------------------------------------------------------------');if(config[_0x2e9041(0xd7)]!=0x0)for(const _0x3f7dd9 of config){const _0x4cf541=_0x3f7dd9[_0x2e9041(0x22a)]==_0x2e9041(0x17c)?'a':'m';if(_0x3f7dd9['status']=='enabled'||_0x3f7dd9['status']==_0x2e9041(0x2d2))await logger[_0x2e9041(0x1ba)](_0x2e9041(0x22b)+_0x4cf541+')\x20|\x20Bot\x20'+_0x3f7dd9[_0x2e9041(0x26d)]+_0x2e9041(0x286)+_0x3f7dd9['botname']),startBot([_0x3f7dd9[_0x2e9041(0x26d)],userID],{'cwd':bbpath},function(_0x34b207){const _0x13b5e1=_0x2e9041;if(_0x34b207)logger[_0x13b5e1(0x1ba)](_0x34b207);});else(_0x3f7dd9[_0x2e9041(0x13f)]==_0x2e9041(0x272)||_0x3f7dd9[_0x2e9041(0x13f)]==_0x2e9041(0x127))&&await logger['full'](_0x2e9041(0x13d)+_0x4cf541+_0x2e9041(0x249)+_0x3f7dd9[_0x2e9041(0x26d)]+_0x2e9041(0x286)+_0x3f7dd9[_0x2e9041(0x2ce)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x2e9041(0x2d1)](_0x2e9041(0x1a5)),logger[_0x2e9041(0x2d1)](''),await logger['debug'](_0x2e9041(0x291)+nodeversion),await logger[_0x2e9041(0x231)](_0x2e9041(0x120),_0x2a42dc);}function startSocket(){const _0x3e120e=_0x4e68de;io['on'](_0x3e120e(0x1df),_0x4de3d0=>{const _0x544bd8=_0x3e120e;let _0x1618bd,_0x3b2246,_0x1e9e9c,_0x5952a1,_0x4a07b3;const _0x10264c=_0x4de3d0[_0x544bd8(0x1db)][_0x544bd8(0x113)]['referer'];_0x3b2246=_0x10264c[_0x544bd8(0x238)](/bot[0-9]{3}/);if(_0x3b2246)_0x1e9e9c=_0x3b2246[0x0][_0x544bd8(0x238)](/[0-9]{3}/);if(_0x1e9e9c)_0x1618bd=_0x1e9e9c[0x0];else _0x1618bd=_0x544bd8(0x296);const _0x24a35f=_0x4de3d0['handshake'][_0x544bd8(0x241)][_0x544bd8(0x2b5)];if(!_0x24a35f)_0x4de3d0[_0x544bd8(0x1b2)](_0x544bd8(0x13f),{'publicKey':secure[_0x544bd8(0xf6)]});else{_0x5952a1=timelyDecrypt(_0x24a35f,![]);if(!_0x5952a1)_0x4de3d0['emit'](_0x544bd8(0x13f),{'publicKey':secure['publicKey']});else{_0x4a07b3=normalizeIP(_0x4de3d0[_0x544bd8(0xe7)][_0x544bd8(0x22f)])[_0x544bd8(0x280)];if(!devices[_0x5952a1])devices[_0x5952a1]={'uuid':_0x5952a1,'access':{'token':null}};devices[_0x5952a1]['ip']=_0x4a07b3;const _0x5acaa8=addClient(_0x4de3d0['id'],_0x5952a1,_0x1618bd);setAccess(_0x5acaa8),emitMessages(),_0x4de3d0['on'](_0x544bd8(0x2c8),_0x5f57f5=>{const _0x297daa=_0x544bd8,_0xa96d2f=timelyDecrypt(_0x5f57f5[_0x297daa(0x292)],!![],_0x297daa(0xc6));if(_0xa96d2f){_0x5f57f5={'username':_0x5f57f5[_0x297daa(0x1fd)],'password':_0xa96d2f},devices[_0x5952a1]['access']=validateCredentials(_0x5f57f5,_0x5952a1);if(devices[_0x5952a1][_0x297daa(0x271)]['allow']==![]&&devices[_0x5952a1][_0x297daa(0x271)][_0x297daa(0x10a)]==_0x297daa(0x112))_0x4de3d0[_0x297daa(0x1b2)](_0x297daa(0x13f),{'access':devices[_0x5952a1][_0x297daa(0x271)]}),loginAccess2FA(_0x5952a1,_0x4a07b3);else{if(devices[_0x5952a1][_0x297daa(0x271)][_0x297daa(0x2d3)]==![]&&devices[_0x5952a1][_0x297daa(0x271)][_0x297daa(0x10a)]==_0x297daa(0xfb))_0x4de3d0[_0x297daa(0x1b2)](_0x297daa(0x13f),{'access':devices[_0x5952a1]['access']});else devices[_0x5952a1][_0x297daa(0x271)][_0x297daa(0x2d3)]&&devices[_0x5952a1][_0x297daa(0x271)][_0x297daa(0x10a)]==_0x297daa(0x2b0)&&(getClientsWithUuid(_0x5952a1)[_0x297daa(0x26f)](_0xe14bb9=>{setAccess(_0xe14bb9);}),logger[_0x297daa(0x231)](_0x297daa(0x21f)+_0x5952a1['slice'](-0x8)),setTokenRefresh(_0x5952a1),setSessionTimeout(_0x297daa(0x2c8),_0x5952a1));}}else logger[_0x297daa(0x1ba)](_0x297daa(0x143));}),_0x4de3d0['on'](_0x544bd8(0x225),()=>{resetPassword();}),_0x4de3d0['on']('disconnect',_0x24fb5e=>{removeClient(_0x4de3d0['id']);}),_0x1618bd==_0x544bd8(0x296)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x2e7999){const _0x436d2c=_0x4e68de;if(_0x2e7999!=_0x436d2c(0x296)&&config['apiKey']!=''){if(pid[_0x2e7999])pid[_0x2e7999][_0x436d2c(0x170)]({'function':'initclient','args':null});}_0x2e7999!=_0x436d2c(0x296)&&broadcastToBots(_0x436d2c(0x267),JSON[_0x436d2c(0x1c5)](config));}function reloadBotManager(){const _0x588b32=_0x4e68de;getClientsWithBotID('botmanager')[_0x588b32(0x26f)](_0xcadab3=>{const _0x33e7c1=_0x588b32;getSocket(_0xcadab3['id'])[_0x33e7c1(0x1b2)](_0x33e7c1(0x13f),{'access':{'allow':![],'reason':_0x33e7c1(0x1dc),'token':null}});});}function getSocket(_0x2651ac){const _0x3b29d5=_0x4e68de;return io[_0x3b29d5(0x26b)]['sockets'][_0x3b29d5(0x2b8)](_0x2651ac);}function setAccess(_0x435259){const _0x4b21c0=_0x4e68de,_0x5eb46c=getSocket(_0x435259['id']),_0x38db50=_0x435259[_0x4b21c0(0x1f5)],_0x5da1fc=_0x435259[_0x4b21c0(0x17a)];devices[_0x38db50]['access']=validateAccess(devices[_0x38db50][_0x4b21c0(0x271)]['token'],_0x38db50),logger[_0x4b21c0(0x231)](_0x4b21c0(0x218)+devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x10a)]+_0x4b21c0(0x1e7)+_0x435259['id'][_0x4b21c0(0x1fe)](-0x8)+_0x4b21c0(0x20d)+_0x38db50[_0x4b21c0(0x1fe)](-0x8)),_0x5eb46c[_0x4b21c0(0x240)](_0x38db50);if(devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x2d3)]){_0x5eb46c[_0x4b21c0(0x240)](_0x5da1fc);if(_0x5da1fc==_0x4b21c0(0x296))initializeSocketBotManager(_0x5eb46c);else initializeSocketBot(_0x5eb46c);initClient(_0x5da1fc);}devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x236)]&&devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x10a)]==_0x4b21c0(0xf5)&&setSessionTimeout('2FA',_0x38db50),devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x236)]&&devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x10a)]==_0x4b21c0(0x262)&&setSessionTimeout('login',_0x38db50),_0x5eb46c[_0x4b21c0(0x1b2)]('status',{'status':_0x435259[_0x4b21c0(0x111)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x38db50][_0x4b21c0(0x271)],'externalip':devices[_0x38db50]['ip'],'publicKey':secure[_0x4b21c0(0xf6)],'userid':settings[_0x4b21c0(0x153)],'validInstallation':validInstallation}),devices[_0x38db50]['access'][_0x4b21c0(0x2d3)]==![]&&devices[_0x38db50][_0x4b21c0(0x271)][_0x4b21c0(0x10a)]=='2FA\x20required'&&temporaryAccess2FA(_0x38db50,devices[_0x38db50]['ip']);}function setSessionTimeout(_0x1bd97d,_0x3535a0){const _0x571d96=_0x4e68de;let _0xa43286;if(_0x1bd97d==_0x571d96(0x2c8))_0xa43286=loginExpiry*0x3c*0x3e8;else _0xa43286=devices[_0x3535a0]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x571d96(0x1a7)]()-devices[_0x3535a0][_0x571d96(0x28b)][_0x571d96(0x224)]);if(devices[_0x3535a0][_0x571d96(0x1a6)])clearTimeout(devices[_0x3535a0][_0x571d96(0x1a6)]);devices[_0x3535a0][_0x571d96(0x1a6)]=setTimeout(()=>{const _0x359cdc=_0x571d96;if(devices[_0x3535a0][_0x359cdc(0xed)])clearTimeout(devices[_0x3535a0][_0x359cdc(0xed)]);removeSocketListeners(_0x3535a0),addBlacklist(_0x3535a0),devices[_0x3535a0]['telegramIpApproval']=null,devices[_0x3535a0]['telegram2FaApproval']=null,devices[_0x3535a0]['access'][_0x359cdc(0x236)]=null,logger[_0x359cdc(0x231)](_0x359cdc(0x14c)+_0x3535a0[_0x359cdc(0x1fe)](-0x8)),devices[_0x3535a0][_0x359cdc(0x271)]=validateAccess(devices[_0x3535a0]['access'][_0x359cdc(0x236)],_0x3535a0),!(devices[_0x3535a0]['access'][_0x359cdc(0x2d3)]&&devices[_0x3535a0][_0x359cdc(0x271)][_0x359cdc(0x10a)]==_0x359cdc(0x1d9))&&(_0x1bd97d=='login'?io['to'](_0x3535a0)[_0x359cdc(0x1b2)](_0x359cdc(0x13f),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x3535a0)[_0x359cdc(0x1b2)](_0x359cdc(0x13f),{'access':{'allow':![],'reason':_0x359cdc(0x10f),'token':null}})),devices[_0x3535a0][_0x359cdc(0x271)][_0x359cdc(0x236)]=null;},_0xa43286);}function setTokenRefresh(_0xca4152){const _0x18b346=_0x4e68de;if(devices[_0xca4152]['pidRefreshToken'])clearTimeout(devices[_0xca4152][_0x18b346(0xed)]);devices[_0xca4152][_0x18b346(0xed)]=setTimeout(()=>{const _0x5188bd=_0x18b346;getClientsWithUuid(_0xca4152)[_0x5188bd(0xd7)]!=0x0?(devices[_0xca4152]['access']=refreshToken(_0xca4152),io['to'](_0xca4152)[_0x5188bd(0x1b2)](_0x5188bd(0x13f),{'status':_0x5188bd(0x281),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0xca4152][_0x5188bd(0x271)],'externalip':devices[_0xca4152]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0xca4152)):clearTimeout(devices[_0xca4152]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x596bbc){const _0x367250=_0x4e68de,_0x47be9a=getClient(_0x596bbc['id'])['uuid'];_0x596bbc[_0x367250(0x1b2)]('bots',config),_0x596bbc[_0x367250(0x1b2)]('settings',cleanSettings()),_0x596bbc['on'](_0x367250(0x1e1),_0x5082ba=>{const _0x481e31=_0x367250;if(validateAccess(_0x5082ba,_0x47be9a)[_0x481e31(0x2d3)])addBot();else logger[_0x481e31(0x1ba)](_0x481e31(0xd6));}),_0x596bbc['on']('update-bot',(_0xcfcd7e,_0x490165)=>{const _0x5cfa5c=_0x367250;if(validateAccess(_0x490165,_0x47be9a)[_0x5cfa5c(0x2d3)])toggleBot(_0xcfcd7e[_0x5cfa5c(0x26d)],_0xcfcd7e[_0x5cfa5c(0x13f)],_0xcfcd7e[_0x5cfa5c(0xf2)]);else logger[_0x5cfa5c(0x1ba)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x596bbc['on'](_0x367250(0x206),(_0x265e69,_0x1bb79f)=>{const _0x59fdcb=_0x367250;if(validateAccess(_0x1bb79f,_0x47be9a)[_0x59fdcb(0x2d3)])toggleBotMode(_0x265e69);else logger[_0x59fdcb(0x1ba)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x596bbc['on'](_0x367250(0xcc),(_0x3887d6,_0x4f4735)=>{const _0x27aa64=_0x367250;if(validateAccess(_0x4f4735,_0x47be9a)[_0x27aa64(0x2d3)])deleteBot(_0x3887d6);else logger[_0x27aa64(0x1ba)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x596bbc['on'](_0x367250(0x1ca),(_0x1df697,_0x1013e1)=>{const _0x517321=_0x367250;if(validateAccess(_0x1013e1,_0x47be9a)[_0x517321(0x2d3)])storeSettings(_0x1df697,!![]);else logger['full'](_0x517321(0x14e));}),_0x596bbc['on'](_0x367250(0x164),_0x5ed608=>{const _0x203a07=_0x367250;if(validateAccess(_0x5ed608,_0x47be9a)[_0x203a07(0x2d3)])updateBB(_0x203a07(0x1e2));else logger[_0x203a07(0x1ba)](_0x203a07(0x1ce));}),_0x596bbc['on'](_0x367250(0x203),_0x294cf5=>{const _0x551282=_0x367250;if(validateAccess(_0x294cf5,_0x47be9a)['allow'])updateBB(_0x551282(0x1da));else logger[_0x551282(0x1ba)](_0x551282(0x235));}),_0x596bbc['on'](_0x367250(0x1f2),_0x4f6e7e=>{const _0x563137=_0x367250;if(validateAccess(_0x4f6e7e,_0x47be9a)[_0x563137(0x2d3)]){const _0x3136bc=getClient(_0x596bbc['id']);if(_0x3136bc)getBackupFiles(_0x3136bc['uuid']);else logger[_0x563137(0x1ba)](_0x563137(0x207));}else logger[_0x563137(0x1ba)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x596bbc['on'](_0x367250(0x17d),(_0x3e3940,_0x58ba02)=>{const _0x2e166e=_0x367250;if(validateAccess(_0x58ba02,_0x47be9a)['allow'])restoreBackupFile(_0x3e3940);else logger[_0x2e166e(0x1ba)](_0x2e166e(0x2db));}),_0x596bbc['on'](_0x367250(0x13b),_0x12fd63=>{const _0x1ace99=_0x367250;if(validateAccess(_0x12fd63,_0x47be9a)[_0x1ace99(0x2d3)])getMessages();else logger[_0x1ace99(0x1ba)](_0x1ace99(0x13c));}),_0x596bbc['on'](_0x367250(0x29d),(_0x2bccd5,_0x17eb7e)=>{const _0x3aee17=_0x367250;if(validateAccess(_0x17eb7e,_0x47be9a)[_0x3aee17(0x2d3)])confirmMessage(_0x2bccd5);else logger[_0x3aee17(0x1ba)](_0x3aee17(0x169));}),_0x596bbc['on'](_0x367250(0x24e),_0x2e581e=>{const _0x9fc727=_0x367250;if(validateAccess(_0x2e581e,_0x47be9a)['allow']){if(devices[_0x47be9a]['pidRefreshToken'])clearTimeout(devices[_0x47be9a][_0x9fc727(0xed)]);if(devices[_0x47be9a][_0x9fc727(0x1a6)])clearTimeout(devices[_0x47be9a]['pidExpireLogin']);removeSocketListeners(getClient(_0x596bbc['id'])[_0x9fc727(0x1f5)]),addBlacklist(_0x47be9a),devices[_0x47be9a][_0x9fc727(0x28b)]=null,devices[_0x47be9a][_0x9fc727(0xe4)]=null,devices[_0x47be9a][_0x9fc727(0x271)][_0x9fc727(0x236)]=null,logger[_0x9fc727(0x231)](_0x9fc727(0xd3)+_0x47be9a[_0x9fc727(0x1fe)](-0x8)),io['to'](getClient(_0x596bbc['id'])['uuid'])[_0x9fc727(0x1b2)](_0x9fc727(0x13f),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x9fc727(0x1ba)](_0x9fc727(0x2cb));});}function initializeSocketBot(_0x20265e){const _0xfd667b=_0x4e68de,_0xc6c064=getClient(_0x20265e['id'])['bot'],_0x2473a5=getClient(_0x20265e['id'])[_0xfd667b(0x1f5)];_0x20265e['on'](_0xfd667b(0x1a2),(_0x42997e,_0x5c7db8)=>{const _0x144928=_0xfd667b;if(validateAccess(_0x5c7db8,_0x2473a5)['allow']){if(pid[_0xc6c064])pid[_0xc6c064][_0x144928(0x170)]({'function':_0x144928(0x277),'args':_0x42997e});}else logger[_0x144928(0x1ba)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x20265e['on'](_0xfd667b(0x21b),(_0x1f5d93,_0x221ac8)=>{const _0x2c7291=_0xfd667b;if(validateAccess(_0x221ac8,_0x2473a5)[_0x2c7291(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064][_0x2c7291(0x170)]({'function':'deleteHistoryAlerts','args':_0x1f5d93});}else logger[_0x2c7291(0x1ba)](_0x2c7291(0x255));}),_0x20265e['on'](_0xfd667b(0xdf),(_0x2bb870,_0x540c09)=>{const _0x2a3b8e=_0xfd667b;if(validateAccess(_0x540c09,_0x2473a5)['allow']){if(pid[_0xc6c064])pid[_0xc6c064][_0x2a3b8e(0x170)]({'function':_0x2a3b8e(0x1a9),'args':_0x2bb870});}else logger[_0x2a3b8e(0x1ba)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x20265e['on']('store-configuration',(_0x58abb4,_0xe04bd)=>{const _0x50a77e=_0xfd667b;if(validateAccess(_0xe04bd,_0x2473a5)[_0x50a77e(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064]['send']({'function':_0x50a77e(0x2ca),'args':_0x58abb4});}else logger[_0x50a77e(0x1ba)]('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x20265e['on'](_0xfd667b(0xe0),(_0x1603e1,_0xd5e356)=>{const _0x397795=_0xfd667b;if(validateAccess(_0xd5e356,_0x2473a5)[_0x397795(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064][_0x397795(0x170)]({'function':_0x397795(0x1e8),'args':_0x1603e1});}else logger[_0x397795(0x1ba)](_0x397795(0x28f));}),_0x20265e['on']('store-fiat',(_0x4a259d,_0x5effc6)=>{const _0x1effbc=_0xfd667b;if(validateAccess(_0x5effc6,_0x2473a5)[_0x1effbc(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064][_0x1effbc(0x170)]({'function':_0x1effbc(0x14a),'args':_0x4a259d});}else logger['full'](_0x1effbc(0x11c));}),_0x20265e['on'](_0xfd667b(0x138),_0x4337b1=>{const _0x2cbf84=_0xfd667b;if(validateAccess(_0x4337b1,_0x2473a5)[_0x2cbf84(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064][_0x2cbf84(0x170)]({'function':_0x2cbf84(0x2c9),'args':null});}else logger[_0x2cbf84(0x1ba)](_0x2cbf84(0x299));}),_0x20265e['on'](_0xfd667b(0x10c),_0x59a544=>{const _0x781ec9=_0xfd667b;if(validateAccess(_0x59a544,_0x2473a5)[_0x781ec9(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064]['send']({'function':'getStartingBalances','args':null});}else logger[_0x781ec9(0x1ba)](_0x781ec9(0x287));}),_0x20265e['on'](_0xfd667b(0x245),(_0x4dfd5b,_0xc8778c)=>{const _0x1c301b=_0xfd667b;if(validateAccess(_0xc8778c,_0x2473a5)[_0x1c301b(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064]['send']({'function':_0x1c301b(0x1f0),'args':_0x4dfd5b});}else logger[_0x1c301b(0x1ba)](_0x1c301b(0x1fc));}),_0x20265e['on'](_0xfd667b(0x171),_0x507672=>{const _0xf7096b=_0xfd667b;if(validateAccess(_0x507672,_0x2473a5)[_0xf7096b(0x2d3)]){if(pid[_0xc6c064])pid[_0xc6c064][_0xf7096b(0x170)]({'function':_0xf7096b(0x1e0),'args':null});}else logger['full'](_0xf7096b(0x149));}),_0x20265e['on']('show-config',_0xc79f20=>{const _0x432fb7=_0xfd667b;if(validateAccess(_0xc79f20,_0x2473a5)['allow']){if(pid[_0xc6c064])pid[_0xc6c064][_0x432fb7(0x170)]({'function':_0x432fb7(0xd5),'args':null});}else logger[_0x432fb7(0x1ba)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x20265e['on'](_0xfd667b(0x164),_0x219996=>{const _0x2bb440=_0xfd667b;if(validateAccess(_0x219996,_0x2473a5)[_0x2bb440(0x2d3)])updateBB('update');else logger['full'](_0x2bb440(0x1ce));}),_0x20265e['on'](_0xfd667b(0x13b),_0x3d1d3b=>{const _0x20adcc=_0xfd667b;if(validateAccess(_0x3d1d3b,_0x2473a5)[_0x20adcc(0x2d3)])getMessages();else logger['full'](_0x20adcc(0x13c));}),_0x20265e['on'](_0xfd667b(0x29d),(_0x2565ec,_0x2d0ab9)=>{const _0xedd19b=_0xfd667b;if(validateAccess(_0x2d0ab9,_0x2473a5)['allow'])confirmMessage(_0x2565ec);else logger[_0xedd19b(0x1ba)](_0xedd19b(0x169));}),_0x20265e['on'](_0xfd667b(0x24e),_0x594c77=>{const _0x57c1a1=_0xfd667b;if(validateAccess(_0x594c77,_0x2473a5)[_0x57c1a1(0x2d3)]){if(devices[_0x2473a5][_0x57c1a1(0xed)])clearTimeout(devices[_0x2473a5][_0x57c1a1(0xed)]);if(devices[_0x2473a5]['pidExpireLogin'])clearTimeout(devices[_0x2473a5][_0x57c1a1(0x1a6)]);removeSocketListeners(getClient(_0x20265e['id'])['uuid']),addBlacklist(_0x2473a5),devices[_0x2473a5][_0x57c1a1(0x28b)]=null,devices[_0x2473a5][_0x57c1a1(0xe4)]=null,devices[_0x2473a5]['access']['token']=null,logger[_0x57c1a1(0x231)](_0x57c1a1(0xd3)+_0x2473a5[_0x57c1a1(0x1fe)](-0x8)),io['to'](getClient(_0x20265e['id'])[_0x57c1a1(0x1f5)])[_0x57c1a1(0x1b2)](_0x57c1a1(0x13f),{'access':{'allow':![],'reason':_0x57c1a1(0xe5),'token':null}});}else logger[_0x57c1a1(0x1ba)](_0x57c1a1(0x2cb));});}function removeSocketListeners(_0xd2ecf8){getClientsWithUuid(_0xd2ecf8)['forEach'](_0x3f5b66=>{getSocket(_0x3f5b66['id'])['removeAllListeners']();});}function cleanSettings(){const _0x4b2c46=_0x4e68de;let _0x51c582=settings;return settings[_0x4b2c46(0x132)]&&settings['telegramToken']!=''&&(_0x51c582={..._0x51c582,'telegramToken':_0x4b2c46(0x1c3)}),settings['bbPassword']&&settings[_0x4b2c46(0x256)]!=''&&(_0x51c582={..._0x51c582,'bbPassword':'************'}),settings[_0x4b2c46(0xf7)]&&settings[_0x4b2c46(0xf7)]!=''&&(_0x51c582={..._0x51c582,'marketcapApi':_0x4b2c46(0x1c3)}),(settings[_0x4b2c46(0x256)]&&settings[_0x4b2c46(0x256)]=='***'||settings[_0x4b2c46(0x132)]&&settings[_0x4b2c46(0x132)]=='***'||settings[_0x4b2c46(0xf7)]&&settings[_0x4b2c46(0xf7)]==_0x4b2c46(0x2cf))&&(_0x51c582={..._0x51c582,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x4b2c46(0x132)]=='***','marketcap':settings['marketcapApi']==_0x4b2c46(0x2cf)}}),_0x51c582;}async function updateBB(_0x5b06b0){const _0x455d6f=_0x4e68de;await backupConfigFiles(),installingUpdate=!![],config[_0x455d6f(0x26f)](_0x1eb381=>{restartBot(_0x1eb381['botID']);});if(_0x5b06b0==_0x455d6f(0x1e2))process[_0x455d6f(0x170)]({'update':!![],'environment':environment},_0x2cfc36=>{});else _0x5b06b0==_0x455d6f(0x1da)&&process[_0x455d6f(0x170)]({'reinstall':!![],'environment':environment},_0x215109=>{});}function startBot(_0x36175b,_0x3a8f9e,_0x1cbd3f){const _0x110a55=_0x4e68de;if(debugging)_0x36175b[_0x110a55(0x2dc)]('-d');let _0x21aa0d=![];const _0x1b9eef=_0x36175b[0x0];_0x3a8f9e={..._0x3a8f9e,'stdio':[_0x110a55(0x1b4),_0x110a55(0x1b4),'inherit',_0x110a55(0x1a0)]},pid[_0x1b9eef]=childProcess['fork'](botfile,_0x36175b,_0x3a8f9e),pid[_0x1b9eef]['on'](_0x110a55(0x252),_0x1555c1=>{const _0x4946bc=_0x110a55;switch(Object['keys'](_0x1555c1)[0x0]){case _0x4946bc(0x2ce):updateBotName(_0x1b9eef,_0x1555c1[_0x4946bc(0x2ce)]);break;case _0x4946bc(0x1c7):updateBotManager();break;case _0x4946bc(0x13f):updateStatus(_0x1b9eef,_0x1555c1['status']);break;case _0x4946bc(0xf2):updateLive(_0x1b9eef,_0x1555c1[_0x4946bc(0xf2)]);break;case _0x4946bc(0x15d):updateLive(_0x1b9eef,_0x1555c1[_0x4946bc(0x15d)]),io['to'](_0x1b9eef)[_0x4946bc(0x1b2)](_0x4946bc(0x13f),{'access':{'allow':![],'reason':_0x4946bc(0x1dc),'token':null}});break;case _0x4946bc(0x239):_0x1555c1[_0x4946bc(0x239)]==_0x4946bc(0x12b)&&restartBot(_0x1b9eef);_0x1555c1[_0x4946bc(0x239)]==_0x4946bc(0x297)&&toggleBot(_0x1b9eef,_0x4946bc(0x272),_0x4946bc(0x25d));break;case _0x4946bc(0x19e):sendTelegramBot(_0x1b9eef,_0x1555c1[_0x4946bc(0x19e)]);break;case _0x4946bc(0xf8):sendTelegramMsg(_0x1555c1[_0x4946bc(0xf8)]);break;case _0x4946bc(0x23a):io['to'](_0x1b9eef)[_0x4946bc(0x1b2)](_0x1555c1['function'],_0x1555c1[_0x4946bc(0x269)]);break;}}),pid[_0x1b9eef]['on'](_0x110a55(0x237),function(_0x4d242b){if(_0x21aa0d)return;_0x21aa0d=!![],_0x1cbd3f(_0x4d242b);}),pid[_0x1b9eef]['on']('exit',async function(_0x438ee5){const _0x2b619c=_0x110a55;if(terminating)return;if(installingUpdate){logger[_0x2b619c(0x231)](_0x2b619c(0x242)),io['close']();return;}if(_0x21aa0d)return;_0x21aa0d=!![],_0x1cbd3f(null);const _0xcc2be0=dbConfig[_0x2b619c(0x2b8)](_0x2b619c(0x267))[_0x2b619c(0xc8)]({'botID':_0x1b9eef})[_0x2b619c(0x29f)]();_0xcc2be0&&(_0xcc2be0[_0x2b619c(0x13f)]=='enabled'||_0xcc2be0[_0x2b619c(0x13f)]==_0x2b619c(0x2d2))&&(await sleep(0x3e8),updateLive(_0x1b9eef,'stopped'),logger['full'](_0x2b619c(0x2ae)+_0x1b9eef),startBot([_0x1b9eef,userID],{'cwd':bbpath},function(_0x1a4956){const _0x3d69bb=_0x2b619c;if(_0x1a4956)logger[_0x3d69bb(0x1ba)](_0x1a4956);}));});}function stopBot(_0x1583c5){const _0x3b7b6b=_0x4e68de;getClientsWithBotID(_0x1583c5)[_0x3b7b6b(0x26f)](_0x262a27=>{const _0x4590d6=_0x3b7b6b;getSocket(_0x262a27['id'])[_0x4590d6(0x1c1)](!![]),removeClient(_0x262a27['id']);}),pid[_0x1583c5]&&(pid[_0x1583c5][_0x3b7b6b(0x297)](),pid[_0x1583c5]=null);}function stopAllBots(){terminating=!![];const _0x75001b=getEnabledBots();_0x75001b['forEach'](_0x571fa5=>{stopBot(_0x571fa5['botID']);});}function restartBot(_0x39a977){const _0x362dcd=_0x4e68de;if(pid[_0x39a977])pid[_0x39a977][_0x362dcd(0x297)]();}function addBot(){const _0x9dfcd7=_0x4e68de;let _0x4d462e;for(let _0x205ec1=0x1;_0x205ec1<0x3e9;_0x205ec1++){_0x4d462e=_0x205ec1[_0x9dfcd7(0x2af)]()[_0x9dfcd7(0x223)](0x3,'0');let _0x455319=config['find'](_0x4876fd=>_0x4876fd['botID']==_0x4d462e);if(!_0x455319)break;}if(_0x4d462e===_0x9dfcd7(0xda)){logger[_0x9dfcd7(0x1ba)](_0x9dfcd7(0xd2));return;}logger[_0x9dfcd7(0x1ba)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x4d462e),dbConfig[_0x9dfcd7(0x2b8)](_0x9dfcd7(0x267))[_0x9dfcd7(0x2dc)]({'botID':_0x4d462e,'botname':_0x9dfcd7(0x160)+_0x4d462e,'status':_0x9dfcd7(0x2d2),'live':''})[_0x9dfcd7(0x229)](),startBot([_0x4d462e,userID],{'cwd':bbpath},function(_0xcc6f34){const _0x52cbf0=_0x9dfcd7;if(_0xcc6f34)logger[_0x52cbf0(0x1ba)](_0xcc6f34);}),config=getConfiguration(),io['to'](_0x9dfcd7(0x296))[_0x9dfcd7(0x1b2)](_0x9dfcd7(0x267),config),broadcastToBots(_0x9dfcd7(0x267),JSON[_0x9dfcd7(0x1c5)](config));}function deleteBot(_0x3975f1){const _0x16b4bf=_0x4e68de;getClientsWithBotID(_0x3975f1)[_0x16b4bf(0x26f)](_0x584c59=>{const _0x1a02c9=_0x16b4bf;getSocket(_0x584c59['id'])[_0x1a02c9(0x1c1)](!![]),removeClient(_0x584c59['id']);}),dbConfig[_0x16b4bf(0x2b8)](_0x16b4bf(0x267))['remove']({'botID':_0x3975f1})[_0x16b4bf(0x229)](),logger['full'](_0x16b4bf(0xe6)+_0x3975f1),stopBot(_0x3975f1);try{if(fs[_0x16b4bf(0x104)](path['join'](configpath,_0x16b4bf(0x2de)+_0x3975f1+_0x16b4bf(0x1bd))))fs[_0x16b4bf(0x2b6)](path[_0x16b4bf(0x240)](configpath,_0x16b4bf(0x2de)+_0x3975f1+'-config.json'));if(fs['existsSync'](path['join'](configpath,'bot-'+_0x3975f1+_0x16b4bf(0xc9))))fs[_0x16b4bf(0x2b6)](path[_0x16b4bf(0x240)](configpath,'bot-'+_0x3975f1+_0x16b4bf(0xc9)));if(fs['existsSync'](path[_0x16b4bf(0x240)](configpath,'bot-'+_0x3975f1+'-performance.json')))fs[_0x16b4bf(0x2b6)](path[_0x16b4bf(0x240)](configpath,_0x16b4bf(0x2de)+_0x3975f1+_0x16b4bf(0x13e)));if(fs['existsSync'](path['join'](configpath,'bot-'+_0x3975f1+'-results.json')))fs[_0x16b4bf(0x2b6)](path['join'](configpath,'bot-'+_0x3975f1+'-results.json'));}catch(_0x5a41a0){if(_0x5a41a0)logger['full'](_0x16b4bf(0x162),_0x5a41a0);}config=getConfiguration(),io['to'](_0x16b4bf(0x296))['emit'](_0x16b4bf(0x267),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x25fe51,_0x364bc6,_0x59815f){const _0x4129cd=_0x4e68de;dbConfig[_0x4129cd(0x2b8)]('bots')[_0x4129cd(0xc8)]({'botID':_0x25fe51})['assign']({'status':_0x364bc6})[_0x4129cd(0x145)]({'live':_0x59815f})[_0x4129cd(0x229)]();if(_0x364bc6=='enabled'||_0x364bc6==_0x4129cd(0x2d2))logger[_0x4129cd(0x1ba)](_0x4129cd(0x2c2)+_0x25fe51),startBot([_0x25fe51,userID],{'cwd':bbpath},function(_0x5e816c){const _0x2a59f0=_0x4129cd;if(_0x5e816c)logger[_0x2a59f0(0x1ba)](_0x5e816c);});else(_0x364bc6=='disabled'||_0x364bc6==_0x4129cd(0x127))&&(logger[_0x4129cd(0x1ba)](_0x4129cd(0x298)+_0x25fe51),stopBot(_0x25fe51));config=getConfiguration(),io['to'](_0x4129cd(0x296))['emit']('bots',config),broadcastToBots(_0x4129cd(0x267),JSON[_0x4129cd(0x1c5)](config));}function toggleStatus(_0xb9b0a7){const _0x379bbb=_0x4e68de;let _0x4ef4ba=dbConfig[_0x379bbb(0x2b8)](_0x379bbb(0x267))[_0x379bbb(0xc8)]({'botID':_0xb9b0a7})[_0x379bbb(0x29f)](),_0x4ec3df;if(_0x4ef4ba[_0x379bbb(0x13f)]==='enabled')_0x4ec3df=_0x379bbb(0x272);else{if(_0x4ef4ba['status']===_0x379bbb(0x2d2))_0x4ec3df=_0x379bbb(0x127);else{if(_0x4ef4ba[_0x379bbb(0x13f)]===_0x379bbb(0x127))_0x4ec3df=_0x379bbb(0x2d2);else{if(_0x4ef4ba['status']===_0x379bbb(0x272))_0x4ec3df=_0x379bbb(0x270);}}}return _0x4ec3df;}function updateStatus(_0x569b67,_0xa27532){const _0x43dca3=_0x4e68de;dbConfig[_0x43dca3(0x2b8)]('bots')[_0x43dca3(0xc8)]({'botID':_0x569b67})['assign']({'status':_0xa27532})[_0x43dca3(0x229)](),config=getConfiguration(),io['to'](_0x43dca3(0x296))[_0x43dca3(0x1b2)](_0x43dca3(0x267),config),broadcastToBots(_0x43dca3(0x267),JSON[_0x43dca3(0x1c5)](config));}function _0x56d3(_0x4be6d5,_0x54cae3){const _0x48d913=_0x5692();return _0x56d3=function(_0x42f472,_0x1ab887){_0x42f472=_0x42f472-0xc5;let _0x5692b1=_0x48d913[_0x42f472];return _0x5692b1;},_0x56d3(_0x4be6d5,_0x54cae3);}function updateLive(_0x2c55ff,_0xc41aa4){const _0x16c552=_0x4e68de;dbConfig['get'](_0x16c552(0x267))[_0x16c552(0xc8)]({'botID':_0x2c55ff})['assign']({'live':_0xc41aa4})[_0x16c552(0x229)](),config=getConfiguration(),io['to'](_0x16c552(0x296))[_0x16c552(0x1b2)](_0x16c552(0x267),config),broadcastToBots(_0x16c552(0x267),JSON[_0x16c552(0x1c5)](config));}function updateBotName(_0x341433,_0x5869bc){const _0x3b5437=_0x4e68de;dbConfig[_0x3b5437(0x2b8)](_0x3b5437(0x267))[_0x3b5437(0xc8)]({'botID':_0x341433})[_0x3b5437(0x145)]({'botname':_0x5869bc})[_0x3b5437(0x229)](),config=getConfiguration(),io['to'](_0x3b5437(0x296))[_0x3b5437(0x1b2)](_0x3b5437(0x267),config),broadcastToBots('bots',JSON[_0x3b5437(0x1c5)](config));}function updateBotManager(){const _0x1a6649=_0x4e68de;config=getConfiguration(),io['to']('botmanager')[_0x1a6649(0x1b2)]('bots',config),broadcastToBots(_0x1a6649(0x267),JSON[_0x1a6649(0x1c5)](config));}function toggleBotMode(_0x52ee4d){const _0x3d96ae=_0x4e68de;if(pid[_0x52ee4d])pid[_0x52ee4d][_0x3d96ae(0x170)]({'function':'toggleBotMode','args':null});else{const _0x4d502e=configpath+_0x3d96ae(0x2de)+_0x52ee4d+_0x3d96ae(0x1bd),_0x56a0e0=fs['readFileSync'](_0x4d502e),_0x57f6f2=JSON[_0x3d96ae(0x21d)](_0x56a0e0),_0x284cad=_0x57f6f2['bot'][0x0][_0x3d96ae(0x209)];_0x57f6f2['bot'][0x0][_0x3d96ae(0x209)]=!_0x284cad;const _0x545763=JSON['stringify'](_0x57f6f2,null,0x2);fs[_0x3d96ae(0x17b)](_0x4d502e,_0x545763),config=getConfiguration(),io['to'](_0x3d96ae(0x296))['emit'](_0x3d96ae(0x267),config),broadcastToBots(_0x3d96ae(0x267),JSON[_0x3d96ae(0x1c5)](config));}}function validateTelegram(_0x28f616){const _0x873f50=_0x4e68de;if(_0x28f616[_0x873f50(0xea)][_0x873f50(0x1fd)]!=settings[_0x873f50(0x250)]&&'@'+_0x28f616[_0x873f50(0xea)][_0x873f50(0x1fd)]!=settings['telegramUsername']||_0x28f616[_0x873f50(0x253)]['id']!=settings[_0x873f50(0x26c)])return sendTelegram(_0x28f616[_0x873f50(0x253)]['id'],_0x873f50(0x10b),{'parse_mode':_0x873f50(0x1c8)}),![];return!![];}async function initTelegram(){const _0x43fdf9=_0x4e68de;if(tgBot)tgBot[_0x43fdf9(0x239)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x2e1bc2='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x2e1bc2+='\x0a',_0x2e1bc2+=_0x43fdf9(0x233),_0x2e1bc2+='/disable\x20-\x20disable\x20notifications\x0a',_0x2e1bc2+=_0x43fdf9(0x195),_0x2e1bc2+=_0x43fdf9(0x279),_0x2e1bc2+=_0x43fdf9(0x173),_0x2e1bc2+=_0x43fdf9(0x139),_0x2e1bc2+=_0x43fdf9(0x22e),_0x2e1bc2+=_0x43fdf9(0x188),_0x2e1bc2+=_0x43fdf9(0x179),_0x2e1bc2+=_0x43fdf9(0x185),_0x2e1bc2+=_0x43fdf9(0x12a),_0x2e1bc2+=_0x43fdf9(0x2a0),_0x2e1bc2+=_0x43fdf9(0x276),_0x2e1bc2+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x293c3b='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x293c3b+='\x0a',_0x293c3b+=_0x2e1bc2,tgBot[_0x43fdf9(0x246)]((_0x150176,_0x3262b6)=>{const _0xe9ca9=_0x43fdf9;logger[_0xe9ca9(0x2d1)](getTimeStamp()+_0xe9ca9(0x28c)),logger[_0xe9ca9(0x231)](_0xe9ca9(0x1b9),_0x150176);}),tgBot[_0x43fdf9(0x251)](async(_0x2b6cdb,_0xa3a472)=>{const _0xd3b0b4=_0x43fdf9;if(!(!settings[_0xd3b0b4(0x26c)]&&_0x2b6cdb[_0xd3b0b4(0x1e2)][_0xd3b0b4(0x252)][_0xd3b0b4(0x2a8)]=='/start')){if(!validateTelegram(_0x2b6cdb))return;}_0xa3a472();}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x15a),async _0x4270b9=>{const _0x1403c1=_0x43fdf9;if(!settings[_0x1403c1(0x26c)])updateSetting(_0x1403c1(0x26c),_0x4270b9[_0x1403c1(0x253)]['id']);updateSetting(_0x1403c1(0x182),!![]);if(!validateTelegram(_0x4270b9))return;await sendTelegram(_0x4270b9[_0x1403c1(0x253)]['id'],_0x293c3b);}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x2cd),async _0x806d13=>{const _0x472fce=_0x43fdf9;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x806d13[_0x472fce(0x253)]['id'],_0x472fce(0xef));}),tgBot['command']('disable',async _0x58d172=>{const _0x20573c=_0x43fdf9;await sendTelegram(_0x58d172[_0x20573c(0x253)]['id'],'Notifications\x20disabled'),updateSetting(_0x20573c(0x182),![]);}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x184),async _0x50be71=>{const _0x1d8dc2=_0x43fdf9,_0x24e419=Markup['inlineKeyboard']([Markup[_0x1d8dc2(0x2a7)][_0x1d8dc2(0x21a)](_0x1d8dc2(0xcf),_0x1d8dc2(0x191)),Markup[_0x1d8dc2(0x2a7)][_0x1d8dc2(0x21a)](_0x1d8dc2(0x175),_0x1d8dc2(0x19f)),Markup[_0x1d8dc2(0x2a7)][_0x1d8dc2(0x21a)](_0x1d8dc2(0x16c),_0x1d8dc2(0x131))]);_0x50be71[_0x1d8dc2(0x122)](_0x1d8dc2(0x2bd),_0x24e419);}),tgBot[_0x43fdf9(0x186)](_0x43fdf9(0x191),async _0x515f0b=>{const _0x1a614f=_0x43fdf9;_0x515f0b[_0x1a614f(0x22d)](),updateSetting('telegramEvents',_0x1a614f(0x18a)),updateSetting(_0x1a614f(0x182),!![]),await sendTelegram(_0x515f0b[_0x1a614f(0x253)]['id'],_0x1a614f(0x2c7));}),tgBot[_0x43fdf9(0x186)](_0x43fdf9(0x19f),async _0x336f94=>{const _0x3b4218=_0x43fdf9;_0x336f94[_0x3b4218(0x22d)](),updateSetting(_0x3b4218(0x165),_0x3b4218(0x26e)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x336f94[_0x3b4218(0x253)]['id'],_0x3b4218(0x118));}),tgBot[_0x43fdf9(0x186)](_0x43fdf9(0x131),async _0x34a410=>{const _0x3cd264=_0x43fdf9;_0x34a410[_0x3cd264(0x22d)](),updateSetting(_0x3cd264(0x165),_0x3cd264(0x119)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x34a410[_0x3cd264(0x253)]['id'],_0x3cd264(0x141));}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x13f),async _0x562514=>{const _0x19a759=_0x43fdf9,_0x211fab=getBotsWithMode();let _0x1b1935=_0x19a759(0x1b3);config[_0x19a759(0x26f)](_0x2078d0=>{const _0x8cc1f0=_0x19a759,_0x4c1659=_0x211fab['find'](_0x45c553=>_0x45c553[_0x8cc1f0(0x26d)]==_0x2078d0[_0x8cc1f0(0x26d)])['mode'];_0x1b1935+='Bot\x20'+_0x2078d0[_0x8cc1f0(0x26d)]+':\x20'+_0x2078d0[_0x8cc1f0(0x13f)]+_0x8cc1f0(0x286)+_0x4c1659+_0x8cc1f0(0x286)+_0x2078d0[_0x8cc1f0(0xf2)]+'\x0a';}),_0x1b1935+='\x0a',_0x1b1935+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x1b1935+=!settings[_0x19a759(0x182)]?_0x19a759(0x27c):_0x19a759(0x2c1),_0x1b1935+=settings[_0x19a759(0x182)]?settings['telegramEvents']=='all'?_0x19a759(0x110):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x19a759(0x28e):'',await sendTelegram(_0x562514[_0x19a759(0x253)]['id'],_0x1b1935,{'parse_mode':_0x19a759(0x1c8)});}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x12b),async _0x33b69b=>{const _0x5429b4=_0x43fdf9,_0x1991b6=getEnabledBots();if(_0x1991b6[_0x5429b4(0xd7)]==0x0)await sendTelegram(_0x33b69b[_0x5429b4(0x253)]['id'],_0x5429b4(0x1eb));else{if(_0x1991b6[_0x5429b4(0xd7)]>0x1)_0x1991b6[_0x5429b4(0x2dc)]({'botID':_0x5429b4(0x119)});let _0x436333=[],_0x54b246=[];const _0x88bb5d=_0x1991b6['length']%0x4==0x0||_0x1991b6[_0x5429b4(0xd7)]%0x4==0x3||_0x1991b6[_0x5429b4(0xd7)]%0x3==0x1?0x4:0x3;let _0x19e50d=0x0;_0x1991b6['forEach']((_0x142b3a,_0x34baa5)=>{const _0x23b549=_0x5429b4;if(_0x34baa5%_0x88bb5d==0x0)_0x54b246=[];_0x54b246['push'](Markup[_0x23b549(0x2a7)]['callback'](_0x142b3a[_0x23b549(0x26d)]==_0x23b549(0x119)?'All\x20bots':_0x23b549(0x160)+_0x142b3a['botID'],_0x23b549(0x2d5)+_0x142b3a[_0x23b549(0x26d)])),_0x34baa5%_0x88bb5d==0x0&&(_0x436333[_0x19e50d]=_0x54b246,_0x19e50d++);});const _0x41e6b2=Markup[_0x5429b4(0x116)](_0x436333);_0x33b69b[_0x5429b4(0x122)](_0x5429b4(0x230),_0x41e6b2);}}),tgBot[_0x43fdf9(0x186)](/restart_(.+)/,async _0x445bb3=>{const _0x4f8203=_0x43fdf9,_0x13a3ab=_0x445bb3[_0x4f8203(0x238)][0x1];_0x445bb3[_0x4f8203(0x22d)](),_0x13a3ab==_0x4f8203(0x119)?config[_0x4f8203(0x26f)](_0x4252e0=>{const _0x216f17=_0x4f8203;restartBot(_0x4252e0[_0x216f17(0x26d)]);}):restartBot(_0x13a3ab);}),tgBot[_0x43fdf9(0x2dd)]('on',async _0x4976bf=>{const _0xf99cd8=_0x43fdf9,_0x4c0ac9=getDisabledBots();if(_0x4c0ac9['length']==0x0)await sendTelegram(_0x4976bf[_0xf99cd8(0x253)]['id'],_0xf99cd8(0x1b6));else{if(_0x4c0ac9[_0xf99cd8(0xd7)]>0x1)_0x4c0ac9[_0xf99cd8(0x2dc)]({'botID':'all'});let _0x15f76f=[],_0x39b1cd=[];const _0x1248aa=_0x4c0ac9[_0xf99cd8(0xd7)]%0x4==0x0||_0x4c0ac9[_0xf99cd8(0xd7)]%0x4==0x3||_0x4c0ac9['length']%0x3==0x1?0x4:0x3;let _0x543b0d=0x0;_0x4c0ac9['forEach']((_0x2de6fa,_0x24fdf7)=>{const _0x3ea1a9=_0xf99cd8;if(_0x24fdf7%_0x1248aa==0x0)_0x39b1cd=[];_0x39b1cd[_0x3ea1a9(0x2dc)](Markup[_0x3ea1a9(0x2a7)][_0x3ea1a9(0x21a)](_0x2de6fa[_0x3ea1a9(0x26d)]==_0x3ea1a9(0x119)?_0x3ea1a9(0x103):'Bot\x20'+_0x2de6fa[_0x3ea1a9(0x26d)],_0x3ea1a9(0x181)+_0x2de6fa[_0x3ea1a9(0x26d)])),_0x24fdf7%_0x1248aa==0x0&&(_0x15f76f[_0x543b0d]=_0x39b1cd,_0x543b0d++);});const _0x115c27=Markup[_0xf99cd8(0x116)](_0x15f76f);_0x4976bf[_0xf99cd8(0x122)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x115c27);}}),tgBot['action'](/on_(.+)/,async _0x184564=>{const _0x1b7106=_0x43fdf9,_0x14e022=_0x184564[_0x1b7106(0x238)][0x1];_0x184564[_0x1b7106(0x22d)]();if(_0x14e022==_0x1b7106(0x119)){const _0x22f867=getDisabledBots();await sendTelegram(_0x184564[_0x1b7106(0x253)]['id'],_0x1b7106(0x2d7)),_0x22f867[_0x1b7106(0x26f)](_0x598a9b=>{const _0x4fd530=_0x1b7106;if(_0x598a9b[_0x4fd530(0x26d)]!=_0x4fd530(0x119))toggleBot(_0x598a9b['botID'],toggleStatus(_0x598a9b[_0x4fd530(0x26d)]),_0x4fd530(0x25d));});}else await sendTelegram(_0x184564['chat']['id'],_0x1b7106(0x11f)+_0x14e022),toggleBot(_0x14e022,toggleStatus(_0x14e022),_0x1b7106(0x25d));}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0xe3),async _0x2bb6a4=>{const _0xf5374b=_0x43fdf9,_0x3d6bf6=getEnabledBots();if(_0x3d6bf6[_0xf5374b(0xd7)]==0x0)await sendTelegram(_0x2bb6a4['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x3d6bf6[_0xf5374b(0xd7)]>0x1)_0x3d6bf6[_0xf5374b(0x2dc)]({'botID':_0xf5374b(0x119)});let _0x2b2590=[],_0x2b05c7=[];const _0x20e547=_0x3d6bf6[_0xf5374b(0xd7)]%0x4==0x0||_0x3d6bf6[_0xf5374b(0xd7)]%0x4==0x3||_0x3d6bf6[_0xf5374b(0xd7)]%0x3==0x1?0x4:0x3;let _0x3377d5=0x0;_0x3d6bf6[_0xf5374b(0x26f)]((_0x315463,_0x1828b6)=>{const _0x1a7868=_0xf5374b;if(_0x1828b6%_0x20e547==0x0)_0x2b05c7=[];_0x2b05c7['push'](Markup[_0x1a7868(0x2a7)][_0x1a7868(0x21a)](_0x315463[_0x1a7868(0x26d)]=='all'?_0x1a7868(0x103):_0x1a7868(0x160)+_0x315463[_0x1a7868(0x26d)],'off_'+_0x315463[_0x1a7868(0x26d)])),_0x1828b6%_0x20e547==0x0&&(_0x2b2590[_0x3377d5]=_0x2b05c7,_0x3377d5++);});const _0x55fed3=Markup[_0xf5374b(0x116)](_0x2b2590);_0x2bb6a4[_0xf5374b(0x122)](_0xf5374b(0xdd),_0x55fed3);}}),tgBot[_0x43fdf9(0x186)](/off_(.+)/,async _0x2f4a9f=>{const _0x821bf5=_0x43fdf9,_0x33088c=_0x2f4a9f[_0x821bf5(0x238)][0x1];_0x2f4a9f['editMessageReplyMarkup']();if(_0x33088c==_0x821bf5(0x119)){const _0x126316=getEnabledBots();await sendTelegram(_0x2f4a9f[_0x821bf5(0x253)]['id'],_0x821bf5(0x20e)),_0x126316[_0x821bf5(0x26f)](_0x2ddcfc=>{const _0x54983d=_0x821bf5;if(_0x2ddcfc[_0x54983d(0x26d)]!=_0x54983d(0x119))toggleBot(_0x2ddcfc['botID'],toggleStatus(_0x2ddcfc[_0x54983d(0x26d)]),'stopped');});}else await sendTelegram(_0x2f4a9f['chat']['id'],_0x821bf5(0x289)+_0x33088c),toggleBot(_0x33088c,toggleStatus(_0x33088c),'stopped');}),tgBot['command'](_0x43fdf9(0x1c2),async _0x543504=>{const _0x5a2442=_0x43fdf9,_0x32c490=getEnabledBots();if(_0x32c490[_0x5a2442(0xd7)]==0x0)await sendTelegram(_0x543504[_0x5a2442(0x253)]['id'],_0x5a2442(0x1eb));else{if(_0x32c490['length']>0x1){let _0x3e02d8=[],_0x3fd263=[];const _0x5df1a1=_0x32c490[_0x5a2442(0xd7)]%0x4==0x0||_0x32c490['length']%0x4==0x3||_0x32c490['length']%0x3==0x1?0x4:0x3;let _0x5ab54b=0x0;_0x32c490[_0x5a2442(0x26f)]((_0x48ddeb,_0x2001d0)=>{const _0x565fe2=_0x5a2442;if(_0x2001d0%_0x5df1a1==0x0)_0x3fd263=[];_0x3fd263['push'](Markup[_0x565fe2(0x2a7)][_0x565fe2(0x21a)](_0x565fe2(0x160)+_0x48ddeb['botID'],_0x565fe2(0x12d)+_0x48ddeb[_0x565fe2(0x26d)])),_0x2001d0%_0x5df1a1==0x0&&(_0x3e02d8[_0x5ab54b]=_0x3fd263,_0x5ab54b++);});const _0x50185b=Markup[_0x5a2442(0x116)](_0x3e02d8);_0x543504['reply'](_0x5a2442(0x2a9),_0x50185b);}else{const _0xc929e9=_0x32c490[0x0][_0x5a2442(0x26d)];if(pid[_0xc929e9])pid[_0xc929e9][_0x5a2442(0x170)]({'function':_0x5a2442(0xca),'args':null});}}}),tgBot[_0x43fdf9(0x186)](/metrics_(.+)/,async _0x3adafe=>{const _0x2b0a33=_0x43fdf9,_0x2b5bf7=_0x3adafe[_0x2b0a33(0x238)][0x1];_0x3adafe[_0x2b0a33(0x22d)]();if(pid[_0x2b5bf7])pid[_0x2b5bf7][_0x2b0a33(0x170)]({'function':_0x2b0a33(0xca),'args':null});}),tgBot['command'](_0x43fdf9(0x204),async _0x35467c=>{const _0x54bf35=_0x43fdf9,_0x4b042f=getEnabledBots();if(_0x4b042f[_0x54bf35(0xd7)]==0x0)await sendTelegram(_0x35467c['chat']['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x4b042f[_0x54bf35(0xd7)]>0x1){let _0x110550=[],_0x1fbc35=[];const _0x403163=_0x4b042f[_0x54bf35(0xd7)]%0x4==0x0||_0x4b042f[_0x54bf35(0xd7)]%0x4==0x3||_0x4b042f[_0x54bf35(0xd7)]%0x3==0x1?0x4:0x3;let _0x1d4033=0x0;_0x4b042f[_0x54bf35(0x26f)]((_0x581e1b,_0x20bc37)=>{const _0x2e8e6f=_0x54bf35;if(_0x20bc37%_0x403163==0x0)_0x1fbc35=[];_0x1fbc35[_0x2e8e6f(0x2dc)](Markup[_0x2e8e6f(0x2a7)][_0x2e8e6f(0x21a)](_0x2e8e6f(0x160)+_0x581e1b[_0x2e8e6f(0x26d)],_0x2e8e6f(0x18f)+_0x581e1b[_0x2e8e6f(0x26d)])),_0x20bc37%_0x403163==0x0&&(_0x110550[_0x1d4033]=_0x1fbc35,_0x1d4033++);});const _0x5c264e=Markup[_0x54bf35(0x116)](_0x110550);_0x35467c[_0x54bf35(0x122)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x5c264e);}else{const _0x237cf8=_0x4b042f[0x0][_0x54bf35(0x26d)];if(pid[_0x237cf8])pid[_0x237cf8][_0x54bf35(0x170)]({'function':_0x54bf35(0x198),'args':null});}}}),tgBot[_0x43fdf9(0x186)](/portfolio_(.+)/,async _0x261554=>{const _0x4de956=_0x43fdf9,_0xf635c5=_0x261554[_0x4de956(0x238)][0x1];_0x261554[_0x4de956(0x22d)]();if(pid[_0xf635c5])pid[_0xf635c5]['send']({'function':_0x4de956(0x198),'args':null});}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x1e2),async _0x4338fd=>{const _0x14dc8e=_0x43fdf9;await getMessages();if(!updateAvailable)await sendTelegram(_0x4338fd[_0x14dc8e(0x253)]['id'],_0x14dc8e(0x13a));else{if(!validInstallation)await sendTelegram(_0x4338fd[_0x14dc8e(0x253)]['id'],_0x14dc8e(0x2a3));else{const _0x1103e0=Markup[_0x14dc8e(0x116)]([Markup[_0x14dc8e(0x2a7)][_0x14dc8e(0x21a)](_0x14dc8e(0x2bf),_0x14dc8e(0x244)),Markup['button'][_0x14dc8e(0x21a)]('No','update_no')]);_0x4338fd[_0x14dc8e(0x122)]('Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',_0x1103e0);}}}),tgBot[_0x43fdf9(0x186)](/update_(.+)/,async _0x43aff1=>{const _0x3f6b5d=_0x43fdf9,_0x59886f=_0x43aff1['match'][0x1];_0x43aff1[_0x3f6b5d(0x22d)](),_0x59886f==_0x3f6b5d(0x24a)&&(await sendTelegram(_0x43aff1[_0x3f6b5d(0x253)]['id'],_0x3f6b5d(0x20c)),updateBB(_0x3f6b5d(0x1e2))),_0x59886f=='no'&&await sendTelegram(_0x43aff1['chat']['id'],_0x3f6b5d(0x23f));}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x1da),async _0x393be4=>{const _0x1cfc72=_0x43fdf9;if(!validInstallation)await sendTelegram(_0x393be4['chat']['id'],'Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation');else{const _0xfd60a8=Markup[_0x1cfc72(0x116)]([Markup['button'][_0x1cfc72(0x21a)](_0x1cfc72(0x2bf),_0x1cfc72(0x1f9)),Markup[_0x1cfc72(0x2a7)][_0x1cfc72(0x21a)]('No',_0x1cfc72(0x1e5))]);_0x393be4[_0x1cfc72(0x122)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0xfd60a8);}}),tgBot[_0x43fdf9(0x186)](/reinstall_(.+)/,async _0x10f5f0=>{const _0x3cfc33=_0x43fdf9,_0x36e8ee=_0x10f5f0['match'][0x1];_0x10f5f0['editMessageReplyMarkup'](),_0x36e8ee==_0x3cfc33(0x24a)&&(await sendTelegram(_0x10f5f0[_0x3cfc33(0x253)]['id'],_0x3cfc33(0x19c)),updateBB('reinstall')),_0x36e8ee=='no'&&await sendTelegram(_0x10f5f0['chat']['id'],_0x3cfc33(0x1cc));}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x288),async _0x281ddc=>{const _0x357cc0=_0x43fdf9,_0x300f13=getBotsWithMode();if(_0x300f13[_0x357cc0(0xd7)]==0x0)await sendTelegram(_0x281ddc['chat']['id'],_0x357cc0(0x1eb));else{let _0x7fc7c7=[],_0x13e374=[];const _0x1f8d7e=0x2;let _0x5581f0=0x0;_0x300f13[_0x357cc0(0x26f)]((_0x38ad5e,_0x162b18)=>{const _0x5dc131=_0x357cc0;if(_0x162b18%_0x1f8d7e==0x0)_0x13e374=[];_0x13e374[_0x5dc131(0x2dc)](Markup[_0x5dc131(0x2a7)][_0x5dc131(0x21a)](_0x5dc131(0x160)+_0x38ad5e[_0x5dc131(0x26d)]+'\x20('+_0x38ad5e['mode']+')','toggle_'+_0x38ad5e[_0x5dc131(0x26d)])),_0x162b18%_0x1f8d7e==0x0&&(_0x7fc7c7[_0x5581f0]=_0x13e374,_0x5581f0++);});const _0x44481f=Markup[_0x357cc0(0x116)](_0x7fc7c7);_0x281ddc[_0x357cc0(0x122)](_0x357cc0(0x115),_0x44481f);}}),tgBot[_0x43fdf9(0x186)](/toggle_(.+)/,async _0x3c4c2f=>{const _0x5646ac=_0x43fdf9,_0x127427=_0x3c4c2f[_0x5646ac(0x238)][0x1];_0x3c4c2f[_0x5646ac(0x22d)]();const _0x5a4ef6=getBotsWithMode(),_0x37420e=_0x5a4ef6[_0x5646ac(0xc8)](_0x2fa78f=>_0x2fa78f[_0x5646ac(0x26d)]==_0x127427),_0x13ebfe=_0x37420e['mode']==_0x5646ac(0x17c)?_0x5646ac(0x1c9):_0x5646ac(0x17c);await sendTelegram(_0x3c4c2f[_0x5646ac(0x253)]['id'],_0x5646ac(0x1f4)+_0x127427+'\x20to\x20'+_0x13ebfe+_0x5646ac(0x2bc)),toggleBotMode(_0x127427);}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0x2d8),async _0x43c9a5=>{const _0xaa20f0=_0x43fdf9;let _0x4c86c6='';config[_0xaa20f0(0x26f)](_0x11f8bb=>{const _0x366d34=_0xaa20f0;_0x4c86c6+=_0x366d34(0x160)+_0x11f8bb[_0x366d34(0x26d)]+':\x20'+_0x11f8bb[_0x366d34(0x2ce)]+'\x0a';}),await sendTelegram(_0x43c9a5[_0xaa20f0(0x253)]['id'],_0x4c86c6,{'parse_mode':_0xaa20f0(0x1c8)});}),tgBot[_0x43fdf9(0x2dd)](_0x43fdf9(0xdc),async _0x3d3290=>{const _0x542b1f=_0x43fdf9;await sendTelegram(_0x3d3290[_0x542b1f(0x253)]['id'],_0x2e1bc2);}),process[_0x43fdf9(0x213)]('SIGINT',()=>tgBot[_0x43fdf9(0x239)](_0x43fdf9(0x166))),process[_0x43fdf9(0x213)](_0x43fdf9(0x24c),()=>tgBot['stop'](_0x43fdf9(0x24c))),tgBot['launch']();}}function disableTelegram(){const _0x54c8c8=_0x4e68de;tgBot&&tgBot[_0x54c8c8(0x239)]();}async function sendTelegram(_0x38bfdc,_0x5c3051,_0x4e5a34){const _0x922278=_0x4e68de;_0x4e5a34={..._0x4e5a34,'disable_web_page_preview':!![]};try{await tgBot[_0x922278(0x19e)][_0x922278(0x101)](_0x38bfdc,_0x5c3051,_0x4e5a34);}catch(_0x44c3a7){console[_0x922278(0x1af)](_0x922278(0x11a),_0x44c3a7);}}async function sendTelegramBot(_0xb6cdb2,_0x31a5cf){const _0x2c483f=_0x4e68de;if(settings['telegramEnabled']){if(settings[_0x2c483f(0x165)]==_0x2c483f(0x119)||(_0x31a5cf[_0x2c483f(0x1d5)]==_0x2c483f(0x237)||_0x31a5cf[_0x2c483f(0x1d5)]=='warning'||_0x31a5cf[_0x2c483f(0x1d5)]==_0x2c483f(0x2d6))&&settings[_0x2c483f(0x165)]==_0x2c483f(0x26e)||_0x31a5cf[_0x2c483f(0x1d5)]==_0x2c483f(0x11e)&&settings[_0x2c483f(0x165)]=='orders'){if(tgBot&&settings[_0x2c483f(0x26c)]){if(_0x31a5cf[_0x2c483f(0x222)])await sendTelegram(settings[_0x2c483f(0x26c)],_0x31a5cf[_0x2c483f(0x2ce)]+_0x2c483f(0x220)+_0x31a5cf[_0x2c483f(0x10e)]);else await sendTelegram(settings[_0x2c483f(0x26c)],'Bot\x20'+_0xb6cdb2+'\x20>\x20'+_0x31a5cf[_0x2c483f(0x10e)]);}}}}async function sendTelegramMsg(_0x13e07a,_0x17f8d8=_0x4e68de(0x1c8)){const _0x491522=_0x4e68de;return settings[_0x491522(0x182)]&&tgBot&&settings[_0x491522(0x26c)]?(await sendTelegram(settings[_0x491522(0x26c)],_0x13e07a,{'parse_mode':_0x17f8d8}),!![]):![];}function getDeviceWithIp(_0x51818d){const _0x2df05a=_0x4e68de;return devices[_0x2df05a(0xc8)](_0x51ad2f=>_0x51ad2f['ip']===_0x51818d);}async function temporaryAccess2FA(_0x26b78f,_0x5b758d){const _0x35fd13=_0x4e68de;let _0x26c7d4=new Date(),_0x237e9c=![];if(lastIpApproval){if(_0x26c7d4-lastIpApproval<0x1388)_0x237e9c=!![];}lastIpApproval=new Date();if(_0x237e9c)return;if(tgBot&&settings['telegramChatId']){const _0x3cf816=uuidRandom();tmpStorage[_0x3cf816]={'uuid':_0x26b78f,'externalip':_0x5b758d};const _0x3057e2=Markup[_0x35fd13(0x116)]([Markup[_0x35fd13(0x2a7)][_0x35fd13(0x21a)](_0x35fd13(0x25c),_0x35fd13(0x187)+_0x3cf816),Markup[_0x35fd13(0x2a7)][_0x35fd13(0x21a)](_0x35fd13(0x2da),_0x35fd13(0x20a)+_0x3cf816),Markup[_0x35fd13(0x2a7)][_0x35fd13(0x21a)](_0x35fd13(0x234),_0x35fd13(0x21c)+_0x3cf816),Markup[_0x35fd13(0x2a7)][_0x35fd13(0x21a)](_0x35fd13(0x2d9),_0x35fd13(0x208)+_0x3cf816)]);await sendTelegram(settings[_0x35fd13(0x26c)],_0x35fd13(0x243)+normalizeIP(_0x5b758d)[_0x35fd13(0x15f)]+'\x20?',_0x3057e2),tgBot['action'](/tempaccess_(.+)_(.+)/,async _0x4ad15d=>{const _0x232dd2=_0x35fd13,_0x3e46ad=_0x4ad15d['match'][0x1],_0x5cb691=_0x4ad15d['match'][0x2],{uuid:_0x4b81f7,externalip:_0x462ff5}=tmpStorage[_0x5cb691];delete tmpStorage[_0x5cb691],_0x4ad15d[_0x232dd2(0x22d)](),devices[_0x4b81f7][_0x232dd2(0x28b)]={'clientip':_0x462ff5,'timestamp':new Date()[_0x232dd2(0x1a7)](),'expiry':_0x3e46ad},_0x3e46ad!=_0x232dd2(0x2d9)?(await sendTelegram(_0x4ad15d['chat']['id'],_0x232dd2(0xcd)+_0x3e46ad+_0x232dd2(0x168),{'parse_mode':'HTML'}),io['to'](_0x4b81f7)[_0x232dd2(0x1b2)](_0x232dd2(0x13f),{'access':{'allow':![],'reason':_0x232dd2(0x1dc),'token':null}})):(await sendTelegram(_0x4ad15d[_0x232dd2(0x253)]['id'],_0x232dd2(0x1fa)),io['to'](_0x4b81f7)[_0x232dd2(0x1b2)](_0x232dd2(0x13f),{'access':{'allow':![],'reason':_0x232dd2(0x274),'token':null}}));});}}async function loginAccess2FA(_0x358943,_0x5db9c1){const _0x567615=_0x4e68de;if(tgBot&&settings[_0x567615(0x26c)]){const _0x4e27dd=uuidRandom();tmpStorage[_0x4e27dd]={'uuid':_0x358943,'externalip':_0x5db9c1};const _0x3258ec=Markup[_0x567615(0x116)]([Markup[_0x567615(0x2a7)][_0x567615(0x21a)]('accept',_0x567615(0x12f)+loginExpiry+'_'+_0x4e27dd),Markup['button']['callback'](_0x567615(0x2d9),'login2fa_reject_'+_0x4e27dd)]);await sendTelegram(settings[_0x567615(0x26c)],_0x567615(0x1e3)+normalizeIP(_0x5db9c1)[_0x567615(0x15f)]+'\x20?',_0x3258ec),tgBot[_0x567615(0x186)](/login2fa_(.+)_(.+)/,async _0x4b400c=>{const _0x371f6b=_0x567615,_0x1bac0d=_0x4b400c[_0x371f6b(0x238)][0x1],_0x255391=_0x4b400c[_0x371f6b(0x238)][0x2],{uuid:_0x388fc5,externalip:_0x5d5f73}=tmpStorage[_0x255391];delete tmpStorage[_0x255391],_0x4b400c[_0x371f6b(0x22d)](),devices[_0x388fc5]['telegram2FaApproval']={'clientip':_0x5d5f73,'timestamp':new Date()[_0x371f6b(0x1a7)](),'expiry':_0x1bac0d},_0x1bac0d!='reject'?(await sendTelegram(_0x4b400c['chat']['id'],'Login\x20accepted',{'parse_mode':_0x371f6b(0x1c8)}),io['to'](_0x388fc5)['emit']('status',{'access':{'allow':![],'reason':_0x371f6b(0x1dc),'token':null}})):(await sendTelegram(_0x4b400c[_0x371f6b(0x253)]['id'],_0x371f6b(0x1ea)),io['to'](_0x388fc5)[_0x371f6b(0x1b2)](_0x371f6b(0x13f),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2fb106=_0x4e68de;return dbConfig['get'](_0x2fb106(0x267))['sortBy'](_0x2fb106(0x26d))[_0x2fb106(0x266)]({'status':_0x2fb106(0x270)})[_0x2fb106(0x29f)]()||[];}function getDisabledBots(){const _0x5175fd=_0x4e68de;return dbConfig[_0x5175fd(0x2b8)]('bots')[_0x5175fd(0x264)](_0x5175fd(0x26d))['filter']({'status':_0x5175fd(0x272)})[_0x5175fd(0x29f)]()||[];}function getBotAttributes(_0x3eacb2){const _0x9341ed=_0x4e68de;let _0x19c81e={};const _0x19eb4c=configpath+_0x9341ed(0x2de)+_0x3eacb2+_0x9341ed(0x1bd),_0x3b63d3=fs[_0x9341ed(0x104)](_0x19eb4c);if(_0x3b63d3){const _0x201581=fs[_0x9341ed(0xe2)](_0x19eb4c);try{const _0x50f2e4=JSON[_0x9341ed(0x21d)](_0x201581),_0x42fab8=_0x50f2e4?_0x50f2e4['bot'][0x0]['headless']:![];_0x19c81e[_0x9341ed(0x22a)]=_0x42fab8?_0x9341ed(0x17c):'manual',_0x19c81e[_0x9341ed(0x2ce)]=_0x50f2e4?_0x50f2e4['bot'][0x0][_0x9341ed(0x2ce)]:_0x9341ed(0x160)+_0x3eacb2;}catch(_0x223e1c){_0x19c81e[_0x9341ed(0x22a)]='manual',_0x19c81e[_0x9341ed(0x2ce)]='Bot\x20'+_0x3eacb2;}}else _0x19c81e[_0x9341ed(0x22a)]=_0x9341ed(0x1c9),_0x19c81e['botname']='Bot\x20'+_0x3eacb2;return _0x19c81e;}function getBotsWithMode(){const _0x3bb426=_0x4e68de,_0x359dbb=dbConfig['get'](_0x3bb426(0x267))[_0x3bb426(0x264)]('botID')[_0x3bb426(0x29f)]()||[];return _0x359dbb[_0x3bb426(0x26f)](_0x4c5790=>{const _0x5e25bd=_0x3bb426;let _0x3a7736=getBotAttributes(_0x4c5790[_0x5e25bd(0x26d)]);_0x4c5790[_0x5e25bd(0x22a)]=_0x3a7736[_0x5e25bd(0x22a)];}),_0x359dbb;}function getBotExchanges(){const _0x4dbc20=_0x4e68de;let _0x975750=[];const _0x43a82b=dbConfig[_0x4dbc20(0x2b8)](_0x4dbc20(0x267))['sortBy'](_0x4dbc20(0x26d))[_0x4dbc20(0x29f)]()||[];_0x43a82b[_0x4dbc20(0x26f)](_0x15ae5d=>{const _0x1b87ef=_0x4dbc20;if(_0x15ae5d[_0x1b87ef(0x13f)]=='enabled'){const _0x5eb145=configpath+_0x1b87ef(0x2de)+_0x15ae5d['botID']+_0x1b87ef(0x1bd),_0x300633=fs[_0x1b87ef(0x104)](_0x5eb145);let _0x45b5ba;if(_0x300633){const _0xd80b7=fs[_0x1b87ef(0xe2)](_0x5eb145);try{const _0x48de69=JSON['parse'](_0xd80b7);_0x45b5ba=_0x48de69?_0x48de69[_0x1b87ef(0x17a)][0x0][_0x1b87ef(0x134)]:null;}catch(_0x3763df){}}if(_0x45b5ba)_0x975750[_0x1b87ef(0x2dc)](_0x45b5ba);}});const _0x30a05f=[...new Set(_0x975750)][_0x4dbc20(0x1d4)]();return _0x30a05f;}async function initUser(){const _0x51f9c1=_0x4e68de;if(!settings[_0x51f9c1(0x153)]){const _0x140661=uuidRandom();mixpanel[_0x51f9c1(0x284)](_0x140661),updateSetting('userid',_0x140661);}}async function initSecure(){const _0x1a282e=_0x4e68de;let _0x2c683f=getSecure();if(!_0x2c683f['hasOwnProperty']('secret')){let _0x3983f7=await generateKeys();_0x2c683f['publicKey']=_0x3983f7['publicKey'],_0x2c683f[_0x1a282e(0x14d)]=_0x3983f7['privateKey'],_0x2c683f[_0x1a282e(0x183)]=crypto[_0x1a282e(0x12c)](0x20)[_0x1a282e(0x2af)]('hex');;storeSecure(_0x2c683f);}}function getSettings(){const _0x2e947e=_0x4e68de;return dbSettings['get'](_0x2e947e(0x18d))['value']()||{};}function getSecure(){const _0x19db09=_0x4e68de;return dbSecure['get'](_0x19db09(0x156))[_0x19db09(0x29f)]()||{};}function getBlacklist(){const _0x1bfa3b=_0x4e68de;return dbSecure[_0x1bfa3b(0x2b8)]('blacklist')[_0x1bfa3b(0x29f)]()||[];}function broadcastToBots(_0x51a092,_0x2abb2b){config['forEach'](_0x525bf8=>{const _0x258a26=_0x56d3;if(_0x525bf8[_0x258a26(0x13f)]==_0x258a26(0x270)&&_0x525bf8['live']==_0x258a26(0x257)||_0x525bf8[_0x258a26(0x13f)]=='new'&&_0x525bf8[_0x258a26(0xf2)]==_0x258a26(0x257)){if(pid[_0x525bf8[_0x258a26(0x26d)]])pid[_0x525bf8[_0x258a26(0x26d)]][_0x258a26(0x170)]({[_0x51a092]:_0x2abb2b});}});}async function storeSettings(_0x340839,_0x52689a=![]){const _0x2866a4=_0x4e68de;_0x340839={...settings,..._0x340839};if(_0x52689a&&_0x340839['bbPassword']!=_0x2866a4(0x1c3)&&_0x340839[_0x2866a4(0x256)]!=_0x2866a4(0x2cf)&&_0x340839[_0x2866a4(0x256)]!=''){const _0x5d4a9d=crypt[_0x2866a4(0x16b)](secure[_0x2866a4(0x14d)],_0x340839[_0x2866a4(0x256)])['message'][_0x2866a4(0x273)]('|@|')[0x0],_0x16d687=bcrypt[_0x2866a4(0x129)](_0x5d4a9d,saltRounds);_0x340839={..._0x340839,'bbPassword':_0x16d687};}if(_0x52689a&&_0x340839[_0x2866a4(0x132)]!=_0x2866a4(0x1c3)&&_0x340839[_0x2866a4(0x132)]!=_0x2866a4(0x2cf)&&_0x340839[_0x2866a4(0x132)]!=''){const _0x1335eb=crypt[_0x2866a4(0x16b)](secure[_0x2866a4(0x14d)],_0x340839[_0x2866a4(0x132)])['message'][_0x2866a4(0x273)](_0x2866a4(0xc6))[0x0];_0x340839={..._0x340839,'telegramToken':_0x1335eb};}if(_0x52689a&&_0x340839[_0x2866a4(0xf7)]!=_0x2866a4(0x1c3)&&_0x340839[_0x2866a4(0xf7)]!=_0x2866a4(0x2cf)&&_0x340839['marketcapApi']!=''){const _0x1760d9=crypt[_0x2866a4(0x16b)](secure['privateKey'],_0x340839[_0x2866a4(0xf7)])[_0x2866a4(0x252)][_0x2866a4(0x273)](_0x2866a4(0xc6))[0x0];_0x340839={..._0x340839,'marketcapApi':_0x1760d9};}const _0xdb8715=_0x340839[_0x2866a4(0x132)]!=_0x2866a4(0x1c3)&&_0x340839[_0x2866a4(0x132)]!=settings[_0x2866a4(0x132)]||_0x340839[_0x2866a4(0x250)]!=settings[_0x2866a4(0x250)],_0x4df07f=_0x340839[_0x2866a4(0x132)]==''||_0x340839[_0x2866a4(0x250)]=='',_0x1ab0f7=_0x340839[_0x2866a4(0xf7)]&&_0x340839[_0x2866a4(0xf7)]!=_0x2866a4(0x1c3)&&_0x340839[_0x2866a4(0xf7)]!=settings[_0x2866a4(0x132)];_0xdb8715&&(_0x340839['telegramChatId']=null,_0x340839[_0x2866a4(0x165)]='all');for(const [_0x1669a5,_0x22160a]of Object[_0x2866a4(0x2b1)](_0x340839)){if(_0x1669a5==_0x2866a4(0x132)&&_0x22160a==_0x2866a4(0x1c3)){_0x340839[_0x2866a4(0x132)]=settings[_0x2866a4(0x132)];continue;};if(_0x1669a5==_0x2866a4(0x256)&&_0x22160a==_0x2866a4(0x1c3)){_0x340839[_0x2866a4(0x256)]=settings['bbPassword'];continue;};if(_0x1669a5==_0x2866a4(0xf7)&&_0x22160a=='************'){_0x340839[_0x2866a4(0xf7)]=settings['marketcapApi'];continue;};dbSettings[_0x2866a4(0x1a4)](_0x2866a4(0x1a3)+_0x1669a5,_0x22160a)[_0x2866a4(0x229)]();}settings=_0x340839,io['to'](_0x2866a4(0x296))['emit'](_0x2866a4(0x18d),cleanSettings()),broadcastToBots('timeshift',settings[_0x2866a4(0x1b1)]),broadcastToBots(_0x2866a4(0x219),settings[_0x2866a4(0x219)]),broadcastToBots('marketcapApi',settings[_0x2866a4(0xf7)]);if(_0xdb8715&&!_0x4df07f)initTelegram();if(_0xdb8715&&_0x4df07f)disableTelegram();getAllClients()[_0x2866a4(0x26f)](_0x398296=>{const _0x163500=_0x2866a4;getSocket(_0x398296['id'])[_0x163500(0x1b2)]('status',{'access':{'allow':![],'reason':'reload','token':null}});}),_0x1ab0f7&&(await sleep(0xbb8),testMarketcapApi(_0x340839[_0x2866a4(0xf7)]));}function _0x5692(){const _0x29687e=['test','config_orders','Backup\x20file\x20uploaded','\x1b[34m','_data','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','notification','apiKey','sendPortfolioTelegram','bb-settings.json','any','yargs/yargs','Starting\x20Balance\x20Bot\x20reinstallation','Invalid\x20authentication\x20token\x20(1)','telegram','config_alerts','ipc','http','get-logs','settings.','set','-----------------------------------------------------------------------------------','pidExpireLogin','getTime','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','getPortfolio','versions','config/','isIPv4MappedAddress','production','f2aRequired','log','logs','timeshift','emit','<b>Balance\x20Bot\x20Status:</b>\x0a','inherit','getFullYear','All\x20bots\x20running\x20right\x20now','uncaughtException','\x20(1)','Telegraf\x20error:','full','/:bot/portfolio','copyFileSync','-config.json','readdirSync','148446fVtXJf','3112010FsVgBT','disconnect','metrics','************','apiPassword','stringify','data','updatebotmanager','HTML','manual','store-settings','Crypt','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','lastmsgemitted','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','title','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','Bot\x20Mgr\x20>\x20','mixpanel','20866INGFDW','sort','type','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','generate','#RES#','login\x20not\x20required','reinstall','handshake','reload','output-000.log','resetpw_no','connection','cancelLoading','add-bot','update','Allow\x20login\x20from\x20IP\x20address\x20','file','reinstall_no','internal','\x20|\x20client:\x20...','storeHeadless',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Login\x20rejected','No\x20bots\x20running\x20right\x20now','42dllZnk','crypto','logs/','compareSync','placeOrder','Failed\x20to\x20download\x20','get-backup-files','bot.js','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','uuid','range','/:bot/history','backup/','reinstall_yes','Temporary\x20access\x20rejected','startsWith','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','username','slice','name','Backup\x20file\x20unzipped\x20and\x20stored','createWriteStream','Restore\x20process\x20confirmed','reinstall-bb','portfolio','constructor','toggle-bot-mode','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','tempaccess_reject_','headless','tempaccess_15_','34SPYqyp','Starting\x20Balance\x20Bot\x20update','\x20|\x20user:\x20...','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','size','Password\x20reset\x20rejected','restore_yes_','address\x20already\x20in\x20use','once','\x20(2)','CoinMarketCap\x20API\x20key\x20validated','code','/upload-backup','Setting\x20access:\x20','onepagemode','callback','delete-alerts','tempaccess_30_','parse','sha256','Logged\x20in\x20user\x20...','\x20>\x20','zip/','showname','padStart','timestamp','reset-password','graphql-request','lastmsgtelegram','createServer','write','mode','Starting\x20(','port','editMessageReplyMarkup','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','remoteAddress','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','debug','output-003.log','/enable\x20-\x20enable\x20notifications\x0a','30\x20min','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','token','error','match','stop','function','*$1*','listen','.zip','temp/','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','join','auth','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','update_yes','place-order','catch','randomFillSync','hasOwnProperty',')\x20\x20\x20|\x20Bot\x20','yes','rmSync','SIGTERM','temporary\x20access\x20not\x20allowed','logout','#RES#\x20if\x20running\x20locally\x0a','telegramUsername','use','message','chat','backup-files','Unauthorized\x20attempt\x20to\x20delete\x20alerts','bbPassword','running','6b67f3d61ee94b8f5c80b4affef4c4d9','search','getDate','files','5\x20min','stopped','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','IPv4','BCT','api-eu.mixpanel.com','2FA\x20login\x20token\x20generated','Invalid\x20IP\x20address','sortBy','add','filter','bots','Error\x20details:','args','bcryptjs','sockets','telegramChatId','botID','alerts','forEach','enabled','access','disabled','split','temporary\x20access\x20rejected','hybrid-crypto-js','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','emitHistory','apply','/restart\x20-\x20restart\x20bot(s)\x0a','then','blacklist','Notifications\x20disabled\x0a','generateKeyPairAsync','endsWith','family','store','connected','(staging)','params','alias','0.0.0','\x20|\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','toggle','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','clientip','telegramIpApproval',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','isDirectory','\x20only\x0a','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','track','Node.js\x20v','password','jsonwebtoken','apiSecret','address','botmanager','kill','Disabled\x20Bot\x20','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','keys','tkn','3000','confirm-message','messages','value','/update\x20-\x20update\x20Balance\x20Bot\x0a','Invalid\x20username\x20or\x20IP\x20address','init','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','child_process','lowdb','\x1b[36m','button','text','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','exp','build2','host','Password\x20has\x20been\x20reset\x20to:\x20','Restarting\x20Bot\x20','toString','login\x20token\x20generated','entries',',\x20must\x20be\x20a\x204\x20digit\x20number','(((.+)+)+)+$','805065hndYMn','encryptedUuid','unlinkSync','/:bot/support','get','expiry','index.html','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','\x20mode','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','backup-full','Yes','backup','Notifications\x20enabled\x0a','Enabled\x20Bot\x20','bbUsername','status\x20code\x20401','https://api.ipify.org?format=json','express-fileupload','Ok,\x20will\x20send\x20order\x20notifications\x20only','login','resetHistory','storeConfiguration','Unauthorized\x20attempt\x20to\x20log\x20out','node','enable','botname','***','env','simple','new','allow','includes','restart_','success','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','names','reject','15\x20min','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','push','command','bot-','toIPv4Address','|@|','number','find','-events.json','sendMetricsTelegram','\x1b[31m','delete-bot','Access\x20enabled\x20for\x20','login\x20required','Orders','statSync','/:bot/configuration','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Logged\x20out\x20user\x20...','sign','showConfig','Unauthorized\x20attempt\x20to\x20add\x20bot','length','remove','bb-secure.json','1000','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','help','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','mtime','get-portfolio','store-headless','verify','readFileSync','off','telegram2FaApproval','logged\x20out','Deleted\x20Bot\x20','conn',':\x20Bot\x20Mgr\x20>\x20','Restoring\x20bot(s)\x20from\x20backup','from','lowdb/adapters/FileSync','getHours','pidRefreshToken','bb/','Notifications\x20enabled','restore_no_','kind','live','\x20-\x20','post','temporary\x20token\x20generated','publicKey','marketcapApi','telegrammsg','::1','exit','invalid\x20credentials','argv','60JWjkRW','loginRequired','toIPv4MappedAddress','getMinutes','sendMessage','ipv6','All\x20bots','existsSync','max','cloneDeep','whitelist','binary','Token\x20blacklisted','reason','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','get-starting-balances','#RES#\x20','event','temporary\x20access\x20timeout','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','server','2FA\x20login\x20required','headers','temporaryAccessAllowed','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','inlineKeyboard','format','Ok,\x20will\x20send\x20alert\x20notifications\x20only','all','Telegram\x20error:','isValid','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','order','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Network\x20Interfaces:','telegraf','reply','/output-000.log','RSA','22SLwAFM','bbvNew','new-disabled','Server','hashSync','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','restart','randomBytes','metrics_','Restore\x20backup\x20file\x20','login2fa_','User\x20has\x20been\x20validated','config_all','telegramToken','socket','exchange','81365FNwVIj','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','output-001.log','reset-history','/off\x20-\x20stop\x20bot(s)\x0a','Your\x20installation\x20is\x20already\x20up\x20to\x20date','get-messages','Unauthorized\x20attempt\x20to\x20get\x20messages','Idling\x20(','-performance.json','status','socket.io','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','build','Unauthorized\x20login\x20attempt\x20(timeout)','download','assign','Starting\x20#RED#Balance\x20Bot\x20v','getMonth','replace','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','storeFiat','path','Session\x20expired\x20for\x20user\x20...','privateKey','Unauthorized\x20attempt\x20to\x20update\x20settings','version.json','output-002.log','backupfile','map','userid','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','getUTCHours','secure','No\x20authentication\x20token','\x1b[0m','RSA-OAEP','start','136vHLrcT','express','started','util','show','Bot\x20','backup-full.zip','Error\x20while\x20deleting\x20config\x20files:\x20','defaults','update-bb','telegramEvents','SIGINT','3225168CAzTcY','\x20minutes','Unauthorized\x20attempt\x20to\x20confirm\x20message','26652IEZhls','decrypt','All','backup-full@','latestversion','staging','send','cancel-loading','whitelistEnabled','/on\x20-\x20start\x20bot(s)\x0a','environment','Alerts','uuid-random','mkdirSync','axios','/status\x20-\x20show\x20bot(s)\x20status\x0a','bot','writeFileSync','auto','restore-backup-file','\x1b[35m','node-zip','getSeconds','on_','telegramEnabled','secret','config','/metrics\x20-\x20show\x20bot\x20performance\x0a','action','tempaccess_5_','/names\x20-\x20show\x20bot\x20names\x0a','bbvReceive','orders','sendFile','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','settings','Markdown','portfolio_'];_0x5692=function(){return _0x29687e;};return _0x5692();}async function testMarketcapApi(_0x5b7ff8){const _0x325379=_0x4e68de,_0x10425a=[_0x325379(0x260),'ETH'];try{await axios[_0x325379(0x2b8)](_0x325379(0x1d0),{'headers':{'X-CMC_PRO_API_KEY':_0x5b7ff8},'params':{'symbol':_0x10425a[_0x325379(0x2af)]()}});}catch(_0x57be82){_0x57be82[_0x325379(0x2af)]()[_0x325379(0x2d4)](_0x325379(0x2c4))?(io['to']('botmanager')['emit'](_0x325379(0x196),_0x325379(0x18c)),logger[_0x325379(0x1ba)](_0x325379(0x18c))):(io['to'](_0x325379(0x296))['emit'](_0x325379(0x196),_0x325379(0x1d6)),logger['full'](_0x325379(0x1d6)),logger['debug'](_0x325379(0x268),_0x57be82[_0x325379(0x2af)]()+_0x325379(0xf3)+_0x57be82[_0x325379(0x216)]));return;}logger[_0x325379(0x231)](_0x325379(0x215));}function updateSetting(_0x422675,_0x573af7){const _0x46b517=_0x4e68de;dbSettings[_0x46b517(0x1a4)](_0x46b517(0x1a3)+_0x422675,_0x573af7)[_0x46b517(0x229)](),settings=getSettings(),io['to']('botmanager')[_0x46b517(0x1b2)](_0x46b517(0x18d),cleanSettings());}function storeSecure(_0x4f7445){const _0x41f7bb=_0x4e68de;dbSecure[_0x41f7bb(0x2b8)](_0x41f7bb(0x156))[_0x41f7bb(0x2dc)](_0x4f7445)[_0x41f7bb(0x229)](),secure=_0x4f7445;}function addBlacklist(_0x4d1600){const _0x3732d7=_0x4e68de;cleanBlacklist();let _0x2f9718;devices[_0x4d1600][_0x3732d7(0x28b)]?_0x2f9718=Math[_0x3732d7(0x105)](devices[_0x4d1600][_0x3732d7(0x28b)][_0x3732d7(0x2b9)],loginExpiry):_0x2f9718=loginExpiry,dbSecure['get'](_0x3732d7(0x27b))[_0x3732d7(0x2dc)]({'expiry':new Date()['getTime']()+_0x2f9718*0x3c*0x3e8,'token':devices[_0x4d1600]['access'][_0x3732d7(0x236)]})[_0x3732d7(0x229)](),blacklist=dbSecure['get']('blacklist')['value']();}function cleanBlacklist(){const _0x269194=_0x4e68de;let _0x4f481e=dbSecure['get'](_0x269194(0x27b))[_0x269194(0x106)]()['value'](),_0x3b9dcf=new Date()[_0x269194(0x1a7)]();_0x4f481e[_0x269194(0x26f)](_0x23c3aa=>{const _0x61c324=_0x269194;_0x23c3aa['expiry']<_0x3b9dcf&&dbSecure[_0x61c324(0x2b8)]('blacklist')[_0x61c324(0xd8)]({'expiry':_0x23c3aa['expiry']})[_0x61c324(0x229)]();});}function initStates(){let _0x243167=getConfiguration();_0x243167['forEach'](_0xf3c4ae=>{const _0x2a4ea7=_0x56d3;_0xf3c4ae[_0x2a4ea7(0xf2)]='stopped';}),storeConfiguration(_0x243167);}function onKeys(){const _0x45c6a3=new RSA();return new Promise(_0xaf397c=>{const _0x189ee6=_0x56d3;_0x45c6a3[_0x189ee6(0x27d)]()[_0x189ee6(0x27a)](_0x4831e4=>{_0xaf397c(_0x4831e4);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3096c6=_0x4e68de;let _0xc7a3b8=getSettings(),_0x33c2b4=![];!_0xc7a3b8[_0x3096c6(0x248)](_0x3096c6(0x227))&&(_0xc7a3b8['lastmsgtelegram']=0x0,_0x33c2b4=!![]);!_0xc7a3b8['hasOwnProperty'](_0x3096c6(0x1cd))&&(_0xc7a3b8[_0x3096c6(0x1cd)]=0x0,_0x33c2b4=!![]);!_0xc7a3b8[_0x3096c6(0x248)](_0x3096c6(0x16e))&&(_0xc7a3b8[_0x3096c6(0x16e)]=_0x3096c6(0x285),_0x33c2b4=!![]);!_0xc7a3b8[_0x3096c6(0x248)](_0x3096c6(0x219))&&(_0xc7a3b8[_0x3096c6(0x219)]=![],_0x33c2b4=!![]);!_0xc7a3b8[_0x3096c6(0x248)]('marketcapApi')&&(_0xc7a3b8[_0x3096c6(0xf7)]='',_0x33c2b4=!![]);if(_0x33c2b4)storeSettings(_0xc7a3b8);try{fs[_0x3096c6(0x1be)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x5b8d85=>{const _0x250739=_0x3096c6;if(!_0x5b8d85[_0x250739(0x28d)]()){if(!_0x5b8d85[_0x250739(0x1ff)]['startsWith'](_0x250739(0x16d)))fs[_0x250739(0x2b6)](configbackuppath+_0x5b8d85['name']);}else fs[_0x250739(0x24b)](configbackuppath+_0x5b8d85[_0x250739(0x1ff)],{'recursive':!![]});});}catch(_0x2c8c56){logger[_0x3096c6(0x231)]('Error\x20removing\x20old\x20backup\x20files:',_0x2c8c56);}}function storeConfiguration(_0x182090){const _0x478584=_0x4e68de;dbConfig[_0x478584(0x2b8)](_0x478584(0x267))[_0x478584(0xd8)]()[_0x478584(0x229)](),dbConfig[_0x478584(0x2b8)](_0x478584(0x267))['push'](..._0x182090)[_0x478584(0x229)](),config=_0x182090;}async function resetPassword(){const _0x3f8ad8=_0x4e68de;if(tgBot&&settings['telegramChatId']){const _0x41cd14=Markup[_0x3f8ad8(0x116)]([Markup[_0x3f8ad8(0x2a7)][_0x3f8ad8(0x21a)](_0x3f8ad8(0x24a),'resetpw_yes'),Markup[_0x3f8ad8(0x2a7)][_0x3f8ad8(0x21a)]('no',_0x3f8ad8(0x1de))]);await sendTelegram(settings['telegramChatId'],_0x3f8ad8(0x2bb),_0x41cd14),tgBot[_0x3f8ad8(0x186)](/resetpw_(.+)/,async _0x3aae18=>{const _0x6849cf=_0x3f8ad8,_0x11deac=_0x3aae18[_0x6849cf(0x238)][0x1];_0x3aae18[_0x6849cf(0x22d)]();if(_0x11deac!='no'){const _0x5e0514=0xf,_0x332481='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x2611b1=Array[_0x6849cf(0xea)](crypto[_0x6849cf(0x247)](new Uint32Array(_0x5e0514)))[_0x6849cf(0x152)](_0xdf0ae=>_0x332481[_0xdf0ae%_0x332481[_0x6849cf(0xd7)]])[_0x6849cf(0x240)](''),_0x351e43=bcrypt[_0x6849cf(0x129)](_0x2611b1,saltRounds);storeSettings({'bbPassword':_0x351e43}),await sendTelegram(_0x3aae18[_0x6849cf(0x253)]['id'],_0x6849cf(0x2ad)+_0x2611b1,{'parse_mode':_0x6849cf(0x1c8)});}else await sendTelegram(_0x3aae18[_0x6849cf(0x253)]['id'],_0x6849cf(0x210));});}}async function confirmRestore(_0x3099bb,_0x47147e){const _0x35b527=_0x4e68de;io['to'](_0x35b527(0x296))['emit'](_0x35b527(0x196),_0x35b527(0x25e),_0x35b527(0x2d6));if(tgBot&&settings[_0x35b527(0x26c)]){const _0x26c064=uuidRandom();tmpStorage[_0x26c064]={'path':_0x3099bb,'filename':_0x47147e};const _0x4cc4ad=Markup[_0x35b527(0x116)]([Markup[_0x35b527(0x2a7)][_0x35b527(0x21a)]('yes',_0x35b527(0x211)+_0x26c064),Markup[_0x35b527(0x2a7)][_0x35b527(0x21a)]('no',_0x35b527(0xf0)+_0x26c064)]);await sendTelegram(settings[_0x35b527(0x26c)],_0x35b527(0x11d),_0x4cc4ad),tgBot[_0x35b527(0x186)](/restore_(.+)_(.+)/,async _0x3be953=>{const _0x5d6107=_0x35b527,_0x401134=_0x3be953[_0x5d6107(0x238)][0x1],_0x30537e=_0x3be953[_0x5d6107(0x238)][0x2],{path:_0x53beb1,filename:_0x423e6c}=tmpStorage[_0x30537e];delete tmpStorage[_0x30537e],_0x3be953[_0x5d6107(0x22d)](),_0x401134==_0x5d6107(0x24a)?(logger[_0x5d6107(0x231)](_0x5d6107(0x202)),await sendTelegram(_0x3be953[_0x5d6107(0x253)]['id'],_0x5d6107(0xe9),{'parse_mode':_0x5d6107(0x1c8)}),unzipFile(_0x53beb1,_0x423e6c)):(logger[_0x5d6107(0x231)]('Restore\x20process\x20aborted'),await sendTelegram(_0x3be953[_0x5d6107(0x253)]['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x23a485=_0x4e68de,_0x57fc4b=new Date();return _0x57fc4b[_0x23a485(0x1b5)]()+'/'+(_0x57fc4b[_0x23a485(0x147)]()+0x1)[_0x23a485(0x2af)]()['padStart'](0x2,'0')+'/'+_0x57fc4b[_0x23a485(0x25a)]()[_0x23a485(0x2af)]()[_0x23a485(0x223)](0x2,'0')+'\x20'+_0x57fc4b['getHours']()['toString']()[_0x23a485(0x223)](0x2,'0')+':'+_0x57fc4b['getMinutes']()[_0x23a485(0x2af)]()[_0x23a485(0x223)](0x2,'0')+':'+_0x57fc4b['getSeconds']()[_0x23a485(0x2af)]()[_0x23a485(0x223)](0x2,'0');}function getTimeStamp(){const _0x217f13=_0x4e68de,_0x11a2f1=shiftedTime();return _0x11a2f1[_0x217f13(0x1b5)]()+'/'+(_0x11a2f1[_0x217f13(0x147)]()+0x1)[_0x217f13(0x2af)]()[_0x217f13(0x223)](0x2,'0')+'/'+_0x11a2f1[_0x217f13(0x25a)]()['toString']()[_0x217f13(0x223)](0x2,'0')+'\x20'+_0x11a2f1[_0x217f13(0xec)]()[_0x217f13(0x2af)]()[_0x217f13(0x223)](0x2,'0')+':'+_0x11a2f1[_0x217f13(0x100)]()[_0x217f13(0x2af)]()[_0x217f13(0x223)](0x2,'0')+':'+_0x11a2f1['getSeconds']()[_0x217f13(0x2af)]()[_0x217f13(0x223)](0x2,'0');}function getCleanTimeStamp(){const _0x31e2b3=_0x4e68de,_0x2b5e57=shiftedTime();return _0x2b5e57[_0x31e2b3(0x1b5)]()+(_0x2b5e57['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+_0x2b5e57[_0x31e2b3(0x25a)]()[_0x31e2b3(0x2af)]()[_0x31e2b3(0x223)](0x2,'0')+'-'+_0x2b5e57[_0x31e2b3(0xec)]()[_0x31e2b3(0x2af)]()[_0x31e2b3(0x223)](0x2,'0')+_0x2b5e57[_0x31e2b3(0x100)]()[_0x31e2b3(0x2af)]()[_0x31e2b3(0x223)](0x2,'0')+_0x2b5e57[_0x31e2b3(0x180)]()[_0x31e2b3(0x2af)]()[_0x31e2b3(0x223)](0x2,'0');}function shiftedTime(){const _0x52edb1=_0x4e68de,_0x48e7c0=new Date();let _0x547691=_0x48e7c0;if(settings[_0x52edb1(0x1b1)]&&settings[_0x52edb1(0x1b1)]!==0x0)_0x547691=fns[_0x52edb1(0x265)](_0x48e7c0,{'hours':settings['timeshift']});return _0x547691;}function startScheduler(){const _0x4b5124=_0x4e68de,_0x586b3e=new Date()[_0x4b5124(0x155)](),_0x34a77d=shiftedTime()['getHours']();_0x34a77d==0x4&&backupConfigFiles();_0x34a77d==0x0&&rotateLogFiles();_0x586b3e%0x6==0x0&&triggerAnalytics();_0x586b3e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x36df28){const _0x569407=_0x4e68de;logger[_0x569407(0x231)](_0x569407(0x12e)+_0x36df28);const _0x5c919e=getBotsWithMode();_0x5c919e[_0x569407(0xd7)]>0x0?confirmRestore(configbackuppath,_0x36df28):unzipFile(configbackuppath,_0x36df28);}async function getBackupFiles(_0xf6be8e=null){const _0x1abd9b=_0x4e68de;let _0x33f7ee=[],_0xd869fc=fs[_0x1abd9b(0x1be)](configbackuppath,{'withFileTypes':!![]});_0xd869fc[_0x1abd9b(0x1d4)]((_0x96f42b,_0x3618f8)=>_0x96f42b[_0x1abd9b(0x1ff)]<_0x3618f8[_0x1abd9b(0x1ff)]?0x1:_0x3618f8[_0x1abd9b(0x1ff)]<_0x96f42b[_0x1abd9b(0x1ff)]?-0x1:0x0),_0xd869fc[_0x1abd9b(0x26f)](_0x1910f2=>{const _0x17b353=_0x1abd9b;if(!_0x1910f2[_0x17b353(0x28d)]()&&_0x1910f2[_0x17b353(0x1ff)][_0x17b353(0x1fb)](_0x17b353(0x16d))&&_0x1910f2[_0x17b353(0x1ff)][_0x17b353(0x27e)](_0x17b353(0x23d))){const _0x4facd1=formatDate(fs['statSync'](configbackuppath+_0x1910f2['name'])[_0x17b353(0xde)]);_0x33f7ee[_0x17b353(0x2dc)]({'name':_0x1910f2[_0x17b353(0x1ff)],'mtime':_0x4facd1});}});if(_0xf6be8e)io['to'](_0xf6be8e)['emit'](_0x1abd9b(0x254),_0x33f7ee);else return _0x33f7ee;}async function backupConfigFiles(){const _0x3bd469=_0x4e68de;await zipFiles('backup-full');const _0xad3ed7=getCleanTimeStamp();fs[_0x3bd469(0x1bc)](zippath+_0x3bd469(0x161),configbackuppath+(_0x3bd469(0x16d)+_0xad3ed7+'.zip'));let _0x1b0663=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x1b0663[_0x3bd469(0x1d4)]((_0xe5d346,_0x17a42c)=>_0xe5d346[_0x3bd469(0x1ff)]<_0x17a42c[_0x3bd469(0x1ff)]?0x1:_0x17a42c[_0x3bd469(0x1ff)]<_0xe5d346[_0x3bd469(0x1ff)]?-0x1:0x0),_0x1b0663[_0x3bd469(0xd7)]>maxBackups&&fs[_0x3bd469(0x2b6)](configbackuppath+_0x1b0663[_0x1b0663[_0x3bd469(0xd7)]-0x1][_0x3bd469(0x1ff)]);}function rotateLogFiles(){const _0x123caa=_0x4e68de,_0x45351e=fs[_0x123caa(0xd0)](logspath+_0x123caa(0x1dd)),_0x326ebb=_0x45351e[_0x123caa(0x20f)]/0x400;if(_0x326ebb>0x64){let _0x3c3110=fs[_0x123caa(0x1be)](logspath,{'withFileTypes':!![]});_0x3c3110[_0x123caa(0x1d4)]((_0x12335b,_0xd57a70)=>_0x12335b[_0x123caa(0x1ff)]<_0xd57a70['name']?0x1:_0xd57a70[_0x123caa(0x1ff)]<_0x12335b[_0x123caa(0x1ff)]?-0x1:0x0),_0x3c3110[_0x123caa(0x26f)](_0x2546d1=>{const _0x5aea75=_0x123caa;if(_0x2546d1[_0x5aea75(0x1ff)]==_0x5aea75(0x150))fs[_0x5aea75(0x1bc)](logspath+_0x2546d1[_0x5aea75(0x1ff)],logspath+_0x5aea75(0x232));if(_0x2546d1[_0x5aea75(0x1ff)]=='output-001.log')fs[_0x5aea75(0x1bc)](logspath+_0x2546d1[_0x5aea75(0x1ff)],logspath+_0x5aea75(0x150));_0x2546d1[_0x5aea75(0x1ff)]==_0x5aea75(0x1dd)&&(fs['copyFileSync'](logspath+_0x2546d1['name'],logspath+_0x5aea75(0x137)),fs[_0x5aea75(0x17b)](logspath+_0x2546d1['name'],''));});}}async function zipFiles(_0x5b80be){const _0x5b67ed=_0x4e68de;let _0x392a17;if(_0x5b80be==_0x5b67ed(0x1b0))_0x392a17=logspath;if(_0x5b80be==_0x5b67ed(0x2c0))_0x392a17=configpath;if(_0x5b80be==_0x5b67ed(0x2be))_0x392a17=configpath;let _0x4c4475=fs[_0x5b67ed(0x1be)](_0x392a17,{'withFileTypes':!![]});const _0x2eab14=new require(_0x5b67ed(0x17f))();_0x4c4475[_0x5b67ed(0x26f)](_0x22320f=>{const _0x55d5c5=_0x5b67ed;if(!_0x22320f[_0x55d5c5(0x28d)]()){let _0x247ada=fs[_0x55d5c5(0xe2)](_0x392a17+_0x22320f[_0x55d5c5(0x1ff)]);if(_0x5b80be==_0x55d5c5(0x2c0)){const _0x448a0a=/^bot-[0-9]{3}-config.json$/,_0x3367c3=_0x448a0a[_0x55d5c5(0x190)](_0x22320f[_0x55d5c5(0x1ff)]);if(_0x3367c3){const _0x2091dd=JSON[_0x55d5c5(0x21d)](_0x247ada);if(_0x2091dd[_0x55d5c5(0x17a)][0x0]){_0x2091dd[_0x55d5c5(0x17a)][0x0][_0x55d5c5(0x197)]=_0x55d5c5(0x2cf),_0x2091dd['bot'][0x0][_0x55d5c5(0x294)]='***';if(_0x2091dd[_0x55d5c5(0x17a)][0x0]['apiPassword'])_0x2091dd[_0x55d5c5(0x17a)][0x0][_0x55d5c5(0x1c4)]='***';}_0x247ada=JSON[_0x55d5c5(0x1c5)](_0x2091dd,null,0x2);}if(_0x22320f[_0x55d5c5(0x1ff)]==_0x55d5c5(0x199)){const _0x32f80b=JSON['parse'](_0x247ada);if(_0x32f80b['settings'][_0x55d5c5(0xfe)])_0x32f80b['settings'][_0x55d5c5(0xfe)]=![];if(_0x32f80b[_0x55d5c5(0x18d)]['bbPassword'])_0x32f80b['settings'][_0x55d5c5(0x256)]='***';if(_0x32f80b[_0x55d5c5(0x18d)][_0x55d5c5(0x132)])_0x32f80b['settings'][_0x55d5c5(0x132)]=_0x55d5c5(0x2cf);if(_0x32f80b[_0x55d5c5(0x18d)]['telegramChatId'])_0x32f80b[_0x55d5c5(0x18d)][_0x55d5c5(0x26c)]=null;if(_0x32f80b[_0x55d5c5(0x18d)][_0x55d5c5(0xf7)])_0x32f80b[_0x55d5c5(0x18d)]['marketcapApi']=_0x55d5c5(0x2cf);_0x247ada=JSON['stringify'](_0x32f80b,null,0x2);}if(_0x22320f['name']!=_0x55d5c5(0xd9))_0x2eab14[_0x55d5c5(0x1e4)](_0x22320f[_0x55d5c5(0x1ff)],_0x247ada);}else _0x2eab14['file'](_0x22320f[_0x55d5c5(0x1ff)],_0x247ada);}});const _0x368a18=_0x2eab14[_0x5b67ed(0x1d7)]({'base64':![],'compression':'DEFLATE'});fs['writeFileSync'](zippath+(_0x5b80be+'.zip'),_0x368a18,_0x5b67ed(0x108));}async function unzipFile(_0x246ed9,_0x3eedc4){const _0xc63891=_0x4e68de;fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x313e06=>{const _0x3f0a69=_0x56d3;if(!_0x313e06[_0x3f0a69(0x28d)]())fs['rmSync'](configpath+_0x313e06['name']);});const _0x387243=fs[_0xc63891(0xe2)](_0x246ed9+_0x3eedc4,_0xc63891(0x108)),_0x1a2a87=new require(_0xc63891(0x17f))(_0x387243,{'base64':![],'checkCRC32':!![]});Object[_0xc63891(0x29a)](_0x1a2a87[_0xc63891(0x25b)])[_0xc63891(0x26f)](_0x175844=>{const _0x233b6f=_0xc63891,_0x2eb8b2=_0x1a2a87[_0x233b6f(0x25b)][_0x175844];fs['writeFileSync'](configpath+_0x2eb8b2[_0x233b6f(0x1ff)],_0x2eb8b2[_0x233b6f(0x194)]);}),fs[_0xc63891(0x1be)](temppath,{'withFileTypes':!![]})[_0xc63891(0x26f)](_0x498ee2=>{const _0x107539=_0xc63891;if(!_0x498ee2[_0x107539(0x28d)]())fs[_0x107539(0x24b)](temppath+_0x498ee2['name']);}),logger['debug'](_0xc63891(0x200)),process['send']({'restore':!![]},_0x6e7bbb=>{});}async function getPublicIp(){const _0x2454d1=_0x4e68de;try{const _0xf4e052=await axios[_0x2454d1(0x2b8)](_0x2454d1(0x2c5));publicip=_0xf4e052[_0x2454d1(0x1c6)]['ip'];}catch(_0x15335c){}}async function triggerAnalytics(){const _0x5ed326=_0x4e68de;if(!publicip)await getPublicIp();const _0x3c5d95=getBotsWithMode();let _0x1ff8f1=0x0;_0x3c5d95[_0x5ed326(0x26f)](_0x3310db=>{const _0x1c00e1=_0x5ed326;if(_0x3310db[_0x1c00e1(0x13f)]==='enabled')_0x1ff8f1++;});const _0x3d9904=getBotExchanges();mixpanel[_0x5ed326(0x290)](_0x5ed326(0x128),{'distinct_id':settings[_0x5ed326(0x153)],'ip':publicip,'version':serverversion,'numbots':_0x3c5d95['length'],'numbotsenabled':_0x1ff8f1,'exchanges':_0x3d9904,'environment':environment});}async function getMessages(){const _0x3fed10=_0x4e68de,_0xdbf3f0=_0x3fed10(0x136),_0xbe82dc=new GraphQLClient(_0xdbf3f0),_0x53d429={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x254b55=serverversion[_0x3fed10(0x273)]('.'),_0x506ba7=_0x254b55[0x0]+'.'+_0x254b55[0x1],_0x57f7cc=Math['min'](settings['lastmsgtelegram'],settings['lastmsgemitted']),_0x445c57={'last':parseInt(_0x57f7cc),'bbm':_0x506ba7},_0x2c2a57=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x8b8c7f;try{_0x8b8c7f=await _0xbe82dc['request'](_0x2c2a57,_0x445c57,_0x53d429);}catch(_0x53312a){}if(_0x8b8c7f&&_0x8b8c7f[_0x3fed10(0x29e)]){let _0x4b2667=settings[_0x3fed10(0x227)];newMessages=[];for(const _0x80b83d of _0x8b8c7f[_0x3fed10(0x29e)]){newMessages['push'](_0x80b83d);let _0x24532f=![];_0x80b83d['bbvNew']&&(updateSetting('latestversion',_0x80b83d[_0x3fed10(0x126)]),_0x24532f=isNewerVersion(serverversion,_0x80b83d['bbvNew'])||serverversion==_0x80b83d[_0x3fed10(0x126)]);if(!_0x24532f&&_0x80b83d[_0x3fed10(0xc7)]>_0x4b2667){if(_0x80b83d[_0x3fed10(0x189)]===_0x3fed10(0x19a)||serverversion[_0x3fed10(0x1fb)](_0x80b83d[_0x3fed10(0x189)])){let _0x59078a=''+_0x80b83d[_0x3fed10(0x1cf)]+'\x0a\x0a'+_0x80b83d[_0x3fed10(0x252)];const _0x4c7694=await sendTelegramMsg(toTelegramMarkdown(_0x59078a),_0x3fed10(0x18e));if(_0x4c7694)_0x4b2667=_0x80b83d[_0x3fed10(0xc7)];}}}updateAvailable=isNewerVersion(settings[_0x3fed10(0x16e)],serverversion),updateSetting('lastmsgtelegram',_0x4b2667),emitMessages();}}function emitMessages(){const _0x5a1bdb=_0x4e68de,_0x304a65=settings[_0x5a1bdb(0x1cd)];let _0x4019ab=[];newMessages['forEach'](_0x44a630=>{const _0x36bcaf=_0x5a1bdb;_0x44a630[_0x36bcaf(0xc7)]>_0x304a65&&_0x4019ab[_0x36bcaf(0x2dc)](_0x44a630);}),_0x4019ab[_0x5a1bdb(0xd7)]>0x0&&getAllClients()['forEach'](_0x1716c4=>{const _0xe739e=_0x5a1bdb;getSocket(_0x1716c4['id'])[_0xe739e(0x1b2)](_0xe739e(0x252),_0x4019ab);});}function confirmMessage(_0x4c7b11){const _0x37a9ea=_0x4e68de;updateSetting(_0x37a9ea(0x1cd),Number(_0x4c7b11));}function isNewerVersion(_0x1b6eab,_0xd0b212){const _0x11a5e4=_0x4e68de,_0xc9d4a9=_0xd0b212['split']('.'),_0x4c3f6e=_0x1b6eab[_0x11a5e4(0x273)]('.');for(var _0x48ade1=0x0;_0x48ade1<_0x4c3f6e['length'];_0x48ade1++){const _0x260492=~~_0x4c3f6e[_0x48ade1],_0x5871f9=~~_0xc9d4a9[_0x48ade1];if(_0x260492>_0x5871f9)return!![];if(_0x260492<_0x5871f9)return![];}return![];}function toTelegramMarkdown(_0x552d18){const _0x1a49e3=_0x4e68de,_0x4b8d0e=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x49c228=/\*{2}(.+?)\*{2}/gim;return _0x552d18=_0x552d18[_0x1a49e3(0x148)](_0x4b8d0e,'$1_$2_$3')[_0x1a49e3(0x148)](_0x49c228,_0x1a49e3(0x23b)),_0x552d18;}async function validateConfigFile(){const _0xe5a203=_0x4e68de,_0x539b73=dbConfig[_0xe5a203(0x2b8)](_0xe5a203(0x267))['sortBy'](_0xe5a203(0x26d))[_0xe5a203(0x29f)]()||[];if(_0x539b73[_0xe5a203(0xd7)]==0x0){let _0x147c36=0x0,_0x1947d9=[];const _0x4eebd=/^bot-([0-9]{3})-config.json$/,_0x4b7c24=fs[_0xe5a203(0x1be)](configpath);_0x4b7c24[_0xe5a203(0x26f)](_0x584186=>{const _0x430f51=_0xe5a203,_0x2153ac=_0x4eebd['exec'](_0x584186);if(_0x2153ac){const _0x4fb06a=_0x2153ac[0x1];let _0x2d941d=getBotAttributes(_0x4fb06a);_0x1947d9[_0x430f51(0x2dc)]({'botID':_0x4fb06a,'botname':_0x2d941d['botname'],'status':'disabled','live':'stopped'}),_0x147c36++;}}),_0x147c36!=0x0&&(dbConfig[_0xe5a203(0x2b8)]('bots')[_0xe5a203(0x145)](_0x1947d9)['write'](),config=_0x1947d9,restoredConfigFile=_0x147c36);}}async function restoreConfigNotify(_0x18984c){const _0x26aa58=_0x4e68de;let _0x165b53;if(restoredConfigFile==0x1)_0x165b53=_0x26aa58(0xdb);else _0x165b53=_0x26aa58(0x154);if(_0x18984c)io['to'](_0x26aa58(0x296))[_0x26aa58(0x1b2)](_0x26aa58(0x196),_0x165b53);else{logger[_0x26aa58(0x2d1)](_0x26aa58(0x1a5)),logger[_0x26aa58(0x2d1)](_0x165b53),logger[_0x26aa58(0x2d1)]('-----------------------------------------------------------------------------------'),logger[_0x26aa58(0x2d1)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x26aa58(0x18a))await sendTelegram(settings['telegramChatId'],_0x26aa58(0x1d1)+_0x165b53);}}function validateCredentials(_0x41e02c,_0x517640){const _0x4341af=_0x4e68de;if(_0x41e02c[_0x4341af(0x1fd)]==settings[_0x4341af(0x2c3)]&&bcrypt[_0x4341af(0x1ef)](_0x41e02c[_0x4341af(0x292)],settings[_0x4341af(0x256)])){if(settings[_0x4341af(0x1ae)])return{'allow':![],'reason':_0x4341af(0x112),'token':null};else{const _0x71a995=generateLoginToken(_0x517640);return{'allow':!![],'reason':_0x4341af(0x2b0),'token':_0x71a995};}}else return{'allow':![],'reason':_0x4341af(0xfb),'token':null};}function refreshToken(_0x115418){const _0x10719c=_0x4e68de,_0x7f70a7=generateLoginToken(_0x115418);return{'allow':!![],'reason':_0x10719c(0x2b0),'token':_0x7f70a7};}function validateAccess(_0x5798e5,_0x332d61,_0x2d7181){const _0x29da4a=_0x4e68de,_0x4b269e=_0x2d7181?_0x2d7181:devices[_0x332d61]['ip'];let _0xa6c8c3;const _0xcd4e8b=_0x3f1d58=>{const _0x4a4910=_0x56d3;if(settings[_0x4a4910(0xfe)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x332d61)){const _0x1acd5c=generateLoginToken(_0x332d61);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x1acd5c};}else return{'allow':![],'reason':_0x4a4910(0xce),'token':null};}else return _0xa6c8c3=validToken(_0x3f1d58,_0x332d61),_0xa6c8c3[_0x4a4910(0x248)](_0x4a4910(0x2d6))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x3f1d58}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4a4910(0x1d9),'token':null};};if(settings[_0x29da4a(0x172)]){let _0x4b022a=[...settings[_0x29da4a(0x107)],_0x29da4a(0xf9),'::ffff:127.0.0.1','127.0.0.1'];if(_0x4b022a[_0x29da4a(0x2d4)](_0x4b269e))return _0xcd4e8b(_0x5798e5);else{_0xa6c8c3=validToken(_0x5798e5,_0x332d61);if(_0xa6c8c3[_0x29da4a(0x248)](_0x29da4a(0x2d6)))return _0xcd4e8b(_0x5798e5);else{if(telegramIpApproved(_0x332d61)){const _0x5584d0=generateToken(_0x332d61);return _0xa6c8c3=_0xcd4e8b(_0x5798e5),_0xa6c8c3['allow']?{'allow':!![],'reason':_0x29da4a(0xf5),'token':_0x5584d0}:_0xa6c8c3;}else return settings[_0x29da4a(0x114)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x29da4a(0x24d),'token':null};}}}else return _0xcd4e8b(_0x5798e5);}function timelyDecrypt(_0x16e086,_0x17e635,_0xb6705c='@'){const _0x4ac764=_0x4e68de;if(_0x16e086)try{const _0x193ae7=crypt[_0x4ac764(0x16b)](secure['privateKey'],_0x16e086)[_0x4ac764(0x252)],_0x2250ee=_0x193ae7[_0x4ac764(0x273)](_0xb6705c)[0x0],_0x1059c4=_0x193ae7[_0x4ac764(0x273)](_0xb6705c)[0x1],_0xb06f6c=new Date()[_0x4ac764(0x1a7)]();if(_0x17e635){if(_0xb06f6c-_0x1059c4<maxSecretAge*0x3e8)return _0x2250ee;else return![];}else return _0x2250ee;}catch(_0x714ac0){return![];}else return![];}const validToken=(_0x5befe1,_0xa08bda)=>{const _0x17888a=_0x4e68de,_0x20404a=devices[_0xa08bda]['ip'];if(!_0x5befe1)return{'error':_0x17888a(0x157)};for(let _0x84d1e6 of blacklist){if(_0x84d1e6[_0x17888a(0x236)]==_0x5befe1)return{'error':_0x17888a(0x109)};}let _0x37048d;try{_0x37048d=jwt[_0x17888a(0xe1)](_0x5befe1,secure['secret']+_0xa08bda);}catch{return{'error':_0x17888a(0x19d)};}if(!_0x37048d[_0x17888a(0x248)](_0x17888a(0x28a))&&!_0x37048d[_0x17888a(0x248)](_0x17888a(0x1fd))||!_0x37048d[_0x17888a(0x248)](_0x17888a(0x2aa)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x37048d[_0x17888a(0x248)](_0x17888a(0x1fd))&&_0x37048d[_0x17888a(0x248)]('clientip')){const {clientip:_0x40c773}=_0x37048d;return _0x20404a==_0x40c773?{'success':_0x17888a(0x130)}:{'error':_0x17888a(0x263)};}else{if(_0x37048d[_0x17888a(0x248)](_0x17888a(0x1fd))&&_0x37048d[_0x17888a(0x248)](_0x17888a(0x28a))){const {username:_0x448611,clientip:_0x2f84d1}=_0x37048d;return settings['bbUsername']==_0x448611&&_0x20404a==_0x2f84d1?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x17888a(0x2a1)};}}},generateLoginToken=_0x81b211=>{const _0x498896=_0x4e68de;if(_0x81b211){const _0x405677=devices[_0x81b211]['ip'];return jwt[_0x498896(0xd4)]({'username':settings[_0x498896(0x2c3)],'clientip':_0x405677},secure['secret']+_0x81b211,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x2ab2b3=>{const _0x29efb3=_0x4e68de;if(_0x2ab2b3){const _0x554c07=devices[_0x2ab2b3]['ip'];return jwt[_0x29efb3(0xd4)]({'clientip':_0x554c07},secure[_0x29efb3(0x183)]+_0x2ab2b3,{'expiresIn':devices[_0x2ab2b3]['telegramIpApproval'][_0x29efb3(0x2b9)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x5986cb=>{const _0xf6d154=_0x4e68de;let _0x1a6c63=![];return devices[_0x5986cb][_0xf6d154(0x28b)]&&devices[_0x5986cb][_0xf6d154(0x28b)][_0xf6d154(0x2b9)]!=_0xf6d154(0x2d9)&&(_0x1a6c63=devices[_0x5986cb]['telegramIpApproval'][_0xf6d154(0x28a)]==devices[_0x5986cb]['ip']&&new Date()[_0xf6d154(0x1a7)]()-devices[_0x5986cb]['telegramIpApproval'][_0xf6d154(0x224)]<devices[_0x5986cb]['telegramIpApproval'][_0xf6d154(0x2b9)]*0x3c*0x3e8),_0x1a6c63;},telegram2FaApproved=_0x4cda78=>{const _0x2ccd1a=_0x4e68de;let _0x48863a=![];return devices[_0x4cda78][_0x2ccd1a(0xe4)]&&devices[_0x4cda78][_0x2ccd1a(0xe4)][_0x2ccd1a(0x2b9)]!=_0x2ccd1a(0x2d9)&&(_0x48863a=devices[_0x4cda78][_0x2ccd1a(0xe4)]['clientip']==devices[_0x4cda78]['ip']&&new Date()['getTime']()-devices[_0x4cda78][_0x2ccd1a(0xe4)][_0x2ccd1a(0x224)]<devices[_0x4cda78][_0x2ccd1a(0xe4)][_0x2ccd1a(0x2b9)]*0x3c*0x3e8),_0x48863a;},normalizeIP=_0x5083ec=>{const _0x40b175=_0x4e68de;let _0x4802a0=null,_0x1fb28d=null;if(ipaddr[_0x40b175(0x11b)](_0x5083ec)){const _0x419a1c=ipaddr[_0x40b175(0x21d)](_0x5083ec);_0x419a1c[_0x40b175(0xf1)]()===_0x40b175(0x102)?(_0x419a1c[_0x40b175(0x1ac)]()&&(_0x4802a0=_0x419a1c[_0x40b175(0xc5)]()['toString']()),_0x1fb28d=_0x419a1c[_0x40b175(0x2af)]()):(_0x4802a0=_0x419a1c[_0x40b175(0x2af)](),_0x1fb28d=_0x419a1c[_0x40b175(0xff)]()['toString']());}return{'show':_0x4802a0?_0x4802a0:_0x1fb28d,'store':_0x1fb28d};};function formatDate(_0x335307){const _0x294b2b=_0x4e68de;return _0x335307[_0x294b2b(0x1b5)]()+'/'+(_0x335307['getMonth']()+0x1)[_0x294b2b(0x2af)]()[_0x294b2b(0x223)](0x2,'0')+'/'+_0x335307[_0x294b2b(0x25a)]()[_0x294b2b(0x2af)]()['padStart'](0x2,'0')+'\x20'+_0x335307[_0x294b2b(0xec)]()['toString']()[_0x294b2b(0x223)](0x2,'0')+':'+_0x335307[_0x294b2b(0x100)]()['toString']()[_0x294b2b(0x223)](0x2,'0')+':'+_0x335307[_0x294b2b(0x180)]()['toString']()[_0x294b2b(0x223)](0x2,'0');}function sleep(_0x3b9b98){return new Promise(_0x432a9b=>setTimeout(_0x432a9b,_0x3b9b98));}