const _0x4dc4cc=_0x5b27;(function(_0x4e59db,_0x47d0a8){const _0x18dde9=_0x5b27,_0xc5e895=_0x4e59db();while(!![]){try{const _0x1b7e7d=-parseInt(_0x18dde9(0x21c))/0x1+parseInt(_0x18dde9(0x225))/0x2*(parseInt(_0x18dde9(0x30f))/0x3)+-parseInt(_0x18dde9(0x311))/0x4*(parseInt(_0x18dde9(0x2e3))/0x5)+-parseInt(_0x18dde9(0x24d))/0x6+parseInt(_0x18dde9(0x288))/0x7*(-parseInt(_0x18dde9(0x2f9))/0x8)+parseInt(_0x18dde9(0x2a2))/0x9+-parseInt(_0x18dde9(0x2d9))/0xa*(-parseInt(_0x18dde9(0x284))/0xb);if(_0x1b7e7d===_0x47d0a8)break;else _0xc5e895['push'](_0xc5e895['shift']());}catch(_0x605a1a){_0xc5e895['push'](_0xc5e895['shift']());}}}(_0x9298,0xf35dd));const _0xb16bc8=function(){let _0x1265da=!![];return function(_0x10bf25,_0x280bb7){const _0x5f5bde=_0x1265da?function(){const _0x2424d2=_0x5b27;if(_0x280bb7){const _0x42a554=_0x280bb7[_0x2424d2(0x20d)](_0x10bf25,arguments);return _0x280bb7=null,_0x42a554;}}:function(){};return _0x1265da=![],_0x5f5bde;};}(),_0x42ee1b=_0xb16bc8(this,function(){const _0x990980=_0x5b27;return _0x42ee1b[_0x990980(0x24c)]()[_0x990980(0x2f2)](_0x990980(0x320))[_0x990980(0x24c)]()['constructor'](_0x42ee1b)[_0x990980(0x2f2)](_0x990980(0x320));});function _0x5b27(_0x3067f0,_0xbacd5c){const _0x6a5d9e=_0x9298();return _0x5b27=function(_0x42ee1b,_0xb16bc8){_0x42ee1b=_0x42ee1b-0x1e1;let _0x92987b=_0x6a5d9e[_0x42ee1b];return _0x92987b;},_0x5b27(_0x3067f0,_0xbacd5c);}_0x42ee1b();'use strict';process[_0x4dc4cc(0x1ed)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4dc4cc(0x218)),FileSync=require(_0x4dc4cc(0x236)),fs=require('fs'),fns=require(_0x4dc4cc(0x2bd)),low=require(_0x4dc4cc(0x2aa)),path=require('path'),crypto=require(_0x4dc4cc(0x1ec)),Crypt=require(_0x4dc4cc(0x296))[_0x4dc4cc(0x2a0)],RSA=require(_0x4dc4cc(0x296))[_0x4dc4cc(0x2c7)],bcrypt=require(_0x4dc4cc(0x273)),jwt=require('jsonwebtoken'),analyticsLib=require(_0x4dc4cc(0x205))[_0x4dc4cc(0x20b)],googleAnalytics=require(_0x4dc4cc(0x209))[_0x4dc4cc(0x20b)],ipaddr=require(_0x4dc4cc(0x1ea)),argv=require(_0x4dc4cc(0x280))(process['argv'][_0x4dc4cc(0x297)](0x2))[_0x4dc4cc(0x229)],PORT=argv['port']||_0x4dc4cc(0x2ad),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x4dc4cc(0x21a)](PORT))return console[_0x4dc4cc(0x31d)](_0x4dc4cc(0x2ee)+PORT+_0x4dc4cc(0x2f6)),process['exit'](0x1);const HOST=argv[_0x4dc4cc(0x25a)]||null,userID=argv['user']||'';let bbpath='bb/',bbpath2='';const botfile=_0x4dc4cc(0x2d1),configfile=_0x4dc4cc(0x295),settingsfile=_0x4dc4cc(0x240),securefile='bb-secure.json';!fs[_0x4dc4cc(0x256)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4dc4cc(0x28f)),configpath=userID?bbpath+_0x4dc4cc(0x2db)+userID+'/':bbpath+_0x4dc4cc(0x2db),configbackuppath=configpath+'backup/';!fs[_0x4dc4cc(0x256)](configpath)&&fs[_0x4dc4cc(0x29a)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4dc4cc(0x29a)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4dc4cc(0x238)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4dc4cc(0x238)]({'settings':{'timeshift':0x0}})[_0x4dc4cc(0x231)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x4dc4cc(0x231)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4dc4cc(0x2b1))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x4dc4cc(0x30b))[_0x4dc4cc(0x25f)](app);app['use'](express[_0x4dc4cc(0x304)](path['join'](__dirname,bbpath2,'build2'))),app['use'](express[_0x4dc4cc(0x304)](path['join'](__dirname,bbpath2,_0x4dc4cc(0x2e4)))),app[_0x4dc4cc(0x2c2)]('/',function(_0x3d6542,_0xee1340){const _0x41d57a=_0x4dc4cc;_0xee1340[_0x41d57a(0x2eb)](path['join'](__dirname,bbpath2,_0x41d57a(0x21b),_0x41d57a(0x2d2)));}),app[_0x4dc4cc(0x2c2)]('/:bot',function(_0x1dbdc5,_0x2be1ba){const _0x1e977c=_0x4dc4cc;_0x2be1ba[_0x1e977c(0x2eb)](path['join'](__dirname,bbpath2,_0x1e977c(0x2e4),_0x1e977c(0x2d2)));}),app[_0x4dc4cc(0x2c2)](_0x4dc4cc(0x241),(_0x4ba5f5,_0x3cfccc)=>{const _0x3122cc=_0x4dc4cc;_0x3cfccc[_0x3122cc(0x2eb)](path[_0x3122cc(0x2f8)](__dirname,bbpath2,_0x3122cc(0x2e4),_0x3122cc(0x2d2)));}),app[_0x4dc4cc(0x2c2)](_0x4dc4cc(0x2e1),(_0x538919,_0x67fa0f)=>{const _0x52862c=_0x4dc4cc;_0x67fa0f['sendFile'](path['join'](__dirname,bbpath2,_0x52862c(0x2e4),_0x52862c(0x2d2)));}),app[_0x4dc4cc(0x2c2)](_0x4dc4cc(0x300),(_0x474333,_0x481173)=>{const _0x161e85=_0x4dc4cc;_0x481173[_0x161e85(0x2eb)](path['join'](__dirname,bbpath2,_0x161e85(0x2e4),'index.html'));}),app[_0x4dc4cc(0x2c2)](_0x4dc4cc(0x275),(_0x3aaf72,_0x17a4f1)=>{const _0x5002c6=_0x4dc4cc;_0x17a4f1[_0x5002c6(0x2eb)](path['join'](__dirname,bbpath2,_0x5002c6(0x2e4),_0x5002c6(0x2d2)));}),app['get'](_0x4dc4cc(0x25e),(_0xf02cac,_0x438d3c)=>{const _0x4e40df=_0x4dc4cc;_0x438d3c['sendFile'](path[_0x4e40df(0x2f8)](__dirname,bbpath2,'build',_0x4e40df(0x2d2)));}),app[_0x4dc4cc(0x2c2)]('/:bot/support',(_0x2a56ed,_0x18b676)=>{const _0x1751a5=_0x4dc4cc;_0x18b676[_0x1751a5(0x2eb)](path[_0x1751a5(0x2f8)](__dirname,bbpath2,_0x1751a5(0x2e4),'index.html'));});if(HOST)http[_0x4dc4cc(0x2fd)](PORT,HOST);else http[_0x4dc4cc(0x2fd)](PORT);const io=require(_0x4dc4cc(0x1f5))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x4dc4cc(0x242)]&&settings[_0x4dc4cc(0x242)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0xce515e=_0x4dc4cc;console['log'](''),console[_0xce515e(0x31d)]('-----------------------------------------------------------------------------------'),logging(_0xce515e(0x211)+PORT),console[_0xce515e(0x31d)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0xce515e(0x221)](_0x3c8e00=>{const _0x38d9d7=_0xce515e;if(_0x3c8e00[_0x38d9d7(0x318)]==_0x38d9d7(0x244)||_0x3c8e00[_0x38d9d7(0x318)]=='new')logging(_0x38d9d7(0x31e)+_0x3c8e00['botID']+_0x38d9d7(0x1e9)+_0x3c8e00[_0x38d9d7(0x20e)]),startBot([_0x3c8e00[_0x38d9d7(0x2e7)],userID],{'cwd':bbpath},function(_0x532392){if(_0x532392)logging(_0x532392);});else(_0x3c8e00['status']==_0x38d9d7(0x2c5)||_0x3c8e00[_0x38d9d7(0x318)]=='new-disabled')&&logging(_0x38d9d7(0x22e)+_0x3c8e00[_0x38d9d7(0x2e7)]+_0x38d9d7(0x1e9)+_0x3c8e00[_0x38d9d7(0x20e)]);});else!newBot&&console[_0xce515e(0x31d)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console['log'](_0xce515e(0x1e6)),console[_0xce515e(0x31d)]('');}function startSocket(){const _0x56fffc=_0x4dc4cc;io['on'](_0x56fffc(0x24b),_0x5ba578=>{const _0x57eb5f=_0x56fffc;let _0x269a33,_0x2e3171,_0x7bc194,_0x1286cb,_0x1ba34b;const _0x137b8c=_0x5ba578[_0x57eb5f(0x2ce)][_0x57eb5f(0x31a)][_0x57eb5f(0x2de)];_0x2e3171=_0x137b8c[_0x57eb5f(0x307)](/bot[0-9]{3}/);if(_0x2e3171)_0x7bc194=_0x2e3171[0x0][_0x57eb5f(0x307)](/[0-9]{3}/);if(_0x7bc194)_0x269a33=_0x7bc194[0x0];else _0x269a33='botmanager';const _0x9c1500=_0x5ba578['handshake'][_0x57eb5f(0x329)][_0x57eb5f(0x30a)];if(!_0x9c1500)_0x5ba578[_0x57eb5f(0x254)]('status',{'publicKey':secure['publicKey']});else{_0x1286cb=timelyDecrypt(_0x9c1500,![]);if(!_0x1286cb)_0x5ba578[_0x57eb5f(0x254)](_0x57eb5f(0x318),{'publicKey':secure['publicKey']});else{_0x1ba34b=normalizeIP(_0x5ba578[_0x57eb5f(0x2e0)][_0x57eb5f(0x24a)])[_0x57eb5f(0x207)];if(!devices[_0x1286cb])devices[_0x1286cb]={'uuid':_0x1286cb,'access':{'token':null}};devices[_0x1286cb]['ip']=_0x1ba34b;const _0x5c9bfb=addClient(_0x5ba578['id'],_0x1286cb,_0x269a33);setAccess(_0x5c9bfb),_0x5ba578['on'](_0x57eb5f(0x24f),_0x44f9ee=>{const _0x1308e0=_0x57eb5f,_0x4e11d4=timelyDecrypt(_0x44f9ee[_0x1308e0(0x258)]);if(_0x4e11d4){_0x44f9ee={'username':_0x44f9ee[_0x1308e0(0x28e)],'password':_0x4e11d4},devices[_0x1286cb][_0x1308e0(0x226)]=validateCredentials(_0x44f9ee,_0x1286cb);if(devices[_0x1286cb]['access'][_0x1308e0(0x277)]==![]&&devices[_0x1286cb][_0x1308e0(0x226)][_0x1308e0(0x282)]==_0x1308e0(0x298))_0x5ba578[_0x1308e0(0x254)](_0x1308e0(0x318),{'access':devices[_0x1286cb][_0x1308e0(0x226)]}),loginAccess2FA(_0x1286cb,_0x1ba34b);else{if(devices[_0x1286cb]['access'][_0x1308e0(0x277)]==![]&&devices[_0x1286cb][_0x1308e0(0x226)][_0x1308e0(0x282)]==_0x1308e0(0x247))_0x5ba578[_0x1308e0(0x254)](_0x1308e0(0x318),{'access':devices[_0x1286cb][_0x1308e0(0x226)]});else devices[_0x1286cb][_0x1308e0(0x226)][_0x1308e0(0x277)]&&devices[_0x1286cb][_0x1308e0(0x226)]['reason']=='login\x20token\x20generated'&&(getClientsWithUuid(_0x1286cb)[_0x1308e0(0x221)](_0x40ddc0=>{setAccess(_0x40ddc0);}),setTokenRefresh(_0x1286cb),setSessionTimeout('login',_0x1286cb));}}else logging(_0x1308e0(0x1f7));}),_0x5ba578['on'](_0x57eb5f(0x276),()=>{resetPassword();}),_0x5ba578['on'](_0x57eb5f(0x274),_0x29b0cc=>{removeClient(_0x5ba578['id']);});}}});}function initClient(_0x2e6ff9){const _0x4b6000=_0x4dc4cc;if(_0x2e6ff9!=_0x4b6000(0x322)&&config[_0x4b6000(0x30e)]!=''){if(pid[_0x2e6ff9])pid[_0x2e6ff9][_0x4b6000(0x228)]({'function':_0x4b6000(0x257),'args':null});}}function getSocket(_0x3a2c64){const _0x124c02=_0x4dc4cc;return io[_0x124c02(0x293)][_0x124c02(0x293)]['get'](_0x3a2c64);}function setAccess(_0x5471cc){const _0x223db4=_0x4dc4cc,_0x4f9b02=getSocket(_0x5471cc['id']),_0x225841=_0x5471cc[_0x223db4(0x20c)],_0x593ab4=_0x5471cc[_0x223db4(0x2ef)];devices[_0x225841][_0x223db4(0x226)]=validateAccess(devices[_0x225841]['access'][_0x223db4(0x2dc)],_0x225841),_0x4f9b02[_0x223db4(0x2f8)](_0x225841);if(devices[_0x225841]['access']['allow']){_0x4f9b02['join'](_0x593ab4);if(_0x593ab4=='botmanager')initializeSocketBotManager(_0x4f9b02);else initializeSocketBot(_0x4f9b02);initClient(_0x593ab4);}devices[_0x225841][_0x223db4(0x226)][_0x223db4(0x2dc)]&&devices[_0x225841][_0x223db4(0x226)][_0x223db4(0x282)]==_0x223db4(0x326)&&setSessionTimeout(_0x223db4(0x1fd),_0x225841),devices[_0x225841]['access'][_0x223db4(0x2dc)]&&devices[_0x225841]['access'][_0x223db4(0x282)]==_0x223db4(0x1fc)&&setSessionTimeout(_0x223db4(0x24f),_0x225841),_0x4f9b02['emit'](_0x223db4(0x318),{'status':_0x5471cc[_0x223db4(0x30c)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x225841][_0x223db4(0x226)],'externalip':devices[_0x225841]['ip'],'publicKey':secure[_0x223db4(0x2ea)]}),devices[_0x225841][_0x223db4(0x226)][_0x223db4(0x277)]==![]&&devices[_0x225841][_0x223db4(0x226)][_0x223db4(0x282)]==_0x223db4(0x2f7)&&temporaryAccess2FA(_0x225841,devices[_0x225841]['ip']);}function setSessionTimeout(_0x2a720c,_0x473e53){const _0x5e2bc8=_0x4dc4cc;let _0x1cdbe1;if(_0x2a720c==_0x5e2bc8(0x24f))_0x1cdbe1=loginExpiry*0x3c*0x3e8;else _0x1cdbe1=devices[_0x473e53]['telegramIpApproval']['expiry']*0x3c*0x3e8-(new Date()[_0x5e2bc8(0x265)]()-devices[_0x473e53][_0x5e2bc8(0x314)][_0x5e2bc8(0x208)]);if(devices[_0x473e53][_0x5e2bc8(0x217)])clearTimeout(devices[_0x473e53]['pidExpireLogin']);devices[_0x473e53][_0x5e2bc8(0x217)]=setTimeout(()=>{const _0x43aa18=_0x5e2bc8;if(devices[_0x473e53][_0x43aa18(0x26a)])clearTimeout(devices[_0x473e53][_0x43aa18(0x26a)]);removeSocketListeners(_0x473e53),addBlacklist(_0x473e53),devices[_0x473e53][_0x43aa18(0x314)]=null,devices[_0x473e53][_0x43aa18(0x1f0)]=null,devices[_0x473e53]['access'][_0x43aa18(0x2dc)]=null,devices[_0x473e53]['access']=validateAccess(devices[_0x473e53][_0x43aa18(0x226)][_0x43aa18(0x2dc)],_0x473e53),!(devices[_0x473e53]['access'][_0x43aa18(0x277)]&&devices[_0x473e53]['access']['reason']==_0x43aa18(0x2b5))&&(_0x2a720c==_0x43aa18(0x24f)?io['to'](_0x473e53)[_0x43aa18(0x254)](_0x43aa18(0x318),{'access':{'allow':![],'reason':_0x43aa18(0x22d),'token':null}}):io['to'](_0x473e53)[_0x43aa18(0x254)](_0x43aa18(0x318),{'access':{'allow':![],'reason':_0x43aa18(0x219),'token':null}})),devices[_0x473e53][_0x43aa18(0x226)]['token']=null;},_0x1cdbe1);}function setTokenRefresh(_0x1bc7ae){const _0x42adcf=_0x4dc4cc;if(devices[_0x1bc7ae][_0x42adcf(0x26a)])clearTimeout(devices[_0x1bc7ae][_0x42adcf(0x26a)]);devices[_0x1bc7ae][_0x42adcf(0x26a)]=setTimeout(()=>{const _0x3cbba2=_0x42adcf;getClientsWithUuid(_0x1bc7ae)[_0x3cbba2(0x1f8)]!=0x0?(devices[_0x1bc7ae][_0x3cbba2(0x226)]=refreshToken(_0x1bc7ae),io['to'](_0x1bc7ae)[_0x3cbba2(0x254)](_0x3cbba2(0x318),{'status':_0x3cbba2(0x317),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1bc7ae]['access'],'externalip':devices[_0x1bc7ae]['ip'],'publicKey':secure[_0x3cbba2(0x2ea)]}),setTokenRefresh(_0x1bc7ae)):clearTimeout(devices[_0x1bc7ae][_0x3cbba2(0x26a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1164a2){const _0x2d43a8=_0x4dc4cc,_0x54e819=getClient(_0x1164a2['id'])[_0x2d43a8(0x20c)];_0x1164a2['emit'](_0x2d43a8(0x1f6),config),_0x1164a2['emit']('settings',cleanSettings()),_0x1164a2['on']('add-bot',_0x217d11=>{const _0x26789c=_0x2d43a8;if(validateAccess(_0x217d11,_0x54e819)['allow'])addBot();else logging(_0x26789c(0x25d));}),_0x1164a2['on']('update-bot',(_0x143465,_0x2d2050)=>{const _0xbc932e=_0x2d43a8;if(validateAccess(_0x2d2050,_0x54e819)['allow'])toggleBot(_0x143465['botID'],_0x143465[_0xbc932e(0x318)],_0x143465[_0xbc932e(0x319)]);else logging(_0xbc932e(0x2e8));}),_0x1164a2['on'](_0x2d43a8(0x2cf),(_0x8e7eff,_0x208e93)=>{const _0x2aa39e=_0x2d43a8;if(validateAccess(_0x208e93,_0x54e819)[_0x2aa39e(0x277)])deleteBot(_0x8e7eff);else logging(_0x2aa39e(0x2ab));}),_0x1164a2['on'](_0x2d43a8(0x1eb),(_0x32d9c6,_0x5f35c2)=>{const _0x22cede=_0x2d43a8;if(validateAccess(_0x5f35c2,_0x54e819)[_0x22cede(0x277)])storeSettings(_0x32d9c6,!![]);else logging(_0x22cede(0x206));}),_0x1164a2['on'](_0x2d43a8(0x287),(_0x372323,_0x41f5b4)=>{const _0xb156be=_0x2d43a8;if(validateAccess(_0x41f5b4,_0x54e819)[_0xb156be(0x277)])updateBB();else logging(_0xb156be(0x206));}),_0x1164a2['on'](_0x2d43a8(0x224),_0x5735ca=>{const _0x2b8106=_0x2d43a8;if(validateAccess(_0x5735ca,_0x54e819)[_0x2b8106(0x277)]){if(devices[_0x54e819][_0x2b8106(0x26a)])clearTimeout(devices[_0x54e819][_0x2b8106(0x26a)]);if(devices[_0x54e819]['pidExpireLogin'])clearTimeout(devices[_0x54e819][_0x2b8106(0x217)]);removeSocketListeners(getClient(_0x1164a2['id'])[_0x2b8106(0x20c)]),addBlacklist(_0x54e819),devices[_0x54e819]['telegramIpApproval']=null,devices[_0x54e819][_0x2b8106(0x1f0)]=null,devices[_0x54e819]['access']['token']=null,io['to'](getClient(_0x1164a2['id'])[_0x2b8106(0x20c)])[_0x2b8106(0x254)](_0x2b8106(0x318),{'access':{'allow':![],'reason':_0x2b8106(0x1e3),'token':null}});}else logging(_0x2b8106(0x2cc));});}function initializeSocketBot(_0x400ddc){const _0x144a56=_0x4dc4cc,_0x2b85c6=getClient(_0x400ddc['id'])[_0x144a56(0x2ef)],_0xa5153b=getClient(_0x400ddc['id'])[_0x144a56(0x20c)];_0x400ddc['on']('get-logs',(_0x39dcb2,_0x15809a)=>{const _0x103383=_0x144a56;if(validateAccess(_0x15809a,_0xa5153b)['allow']){if(pid[_0x2b85c6])pid[_0x2b85c6]['send']({'function':'emitHistory','args':_0x39dcb2});}else logging(_0x103383(0x29e));}),_0x400ddc['on'](_0x144a56(0x2dd),(_0x8de85d,_0x35fcbf)=>{const _0x3c29d6=_0x144a56;if(validateAccess(_0x35fcbf,_0xa5153b)[_0x3c29d6(0x277)]){if(pid[_0x2b85c6])pid[_0x2b85c6][_0x3c29d6(0x228)]({'function':_0x3c29d6(0x2a9),'args':_0x8de85d});}else logging(_0x3c29d6(0x26f));}),_0x400ddc['on']('store-configuration',(_0x37d3ea,_0x13ea47)=>{const _0x4c359d=_0x144a56;if(validateAccess(_0x13ea47,_0xa5153b)['allow']){if(pid[_0x2b85c6])pid[_0x2b85c6][_0x4c359d(0x228)]({'function':_0x4c359d(0x2c0),'args':_0x37d3ea});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x400ddc['on']('store-headless',(_0x3dbfac,_0x13aaad)=>{const _0x154a1d=_0x144a56;if(validateAccess(_0x13aaad,_0xa5153b)[_0x154a1d(0x277)]){if(pid[_0x2b85c6])pid[_0x2b85c6][_0x154a1d(0x228)]({'function':_0x154a1d(0x2fa),'args':_0x3dbfac});}else logging(_0x154a1d(0x272));}),_0x400ddc['on'](_0x144a56(0x2a3),_0x130e2d=>{const _0x45554e=_0x144a56;if(validateAccess(_0x130e2d,_0xa5153b)[_0x45554e(0x277)]){if(pid[_0x2b85c6])pid[_0x2b85c6][_0x45554e(0x228)]({'function':_0x45554e(0x2e6),'args':null});}else logging(_0x45554e(0x216));}),_0x400ddc['on'](_0x144a56(0x1fe),(_0x3deb0b,_0x370f79)=>{const _0x76fcad=_0x144a56;if(validateAccess(_0x370f79,_0xa5153b)[_0x76fcad(0x277)]){if(pid[_0x2b85c6])pid[_0x2b85c6][_0x76fcad(0x228)]({'function':_0x76fcad(0x323),'args':_0x3deb0b});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x400ddc['on']('cancel-loading',_0x1fad53=>{const _0xcebc02=_0x144a56;if(validateAccess(_0x1fad53,_0xa5153b)[_0xcebc02(0x277)]){if(pid[_0x2b85c6])pid[_0x2b85c6]['send']({'function':'cancelLoading','args':null});}else logging(_0xcebc02(0x2b9));}),_0x400ddc['on'](_0x144a56(0x224),_0x4437c3=>{const _0x477caf=_0x144a56;if(validateAccess(_0x4437c3,_0xa5153b)[_0x477caf(0x277)]){if(devices[_0xa5153b][_0x477caf(0x26a)])clearTimeout(devices[_0xa5153b][_0x477caf(0x26a)]);if(devices[_0xa5153b][_0x477caf(0x217)])clearTimeout(devices[_0xa5153b][_0x477caf(0x217)]);removeSocketListeners(getClient(_0x400ddc['id'])['uuid']),addBlacklist(_0xa5153b),devices[_0xa5153b][_0x477caf(0x314)]=null,devices[_0xa5153b][_0x477caf(0x1f0)]=null,devices[_0xa5153b][_0x477caf(0x226)]['token']=null,io['to'](getClient(_0x400ddc['id'])[_0x477caf(0x20c)])[_0x477caf(0x254)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x477caf(0x2cc));});}function removeSocketListeners(_0xa96b2a){getClientsWithUuid(_0xa96b2a)['forEach'](_0x3f5120=>{getSocket(_0x3f5120['id'])['removeAllListeners']();});}function cleanSettings(){const _0x307388=_0x4dc4cc;let _0x29793d=settings;return settings[_0x307388(0x1e7)]&&settings[_0x307388(0x1e7)]!=''&&(_0x29793d={..._0x29793d,'telegramToken':'************'}),settings[_0x307388(0x2b8)]&&settings[_0x307388(0x2b8)]!=''&&(_0x29793d={..._0x29793d,'bbPassword':'************'}),_0x29793d;}function updateBB(){const _0x3aa493=_0x4dc4cc;installingUpdate=!![],config[_0x3aa493(0x221)](_0x29614c=>{stopBot(_0x29614c['botID']);}),process[_0x3aa493(0x228)]({'update':!![]},_0x12aa98=>{});}function startBot(_0x11badf,_0x4fa2da,_0x5bab37){const _0x3aa2ae=_0x4dc4cc;let _0x2a9782=![];const _0x2d32eb=_0x11badf[0x0];_0x4fa2da={..._0x4fa2da,'stdio':[_0x3aa2ae(0x2c4),'inherit','inherit','ipc']},pid[_0x2d32eb]=childProcess[_0x3aa2ae(0x223)](botfile,_0x11badf,_0x4fa2da),pid[_0x2d32eb]['on'](_0x3aa2ae(0x261),_0x14bdef=>{const _0x15515e=_0x3aa2ae;switch(Object[_0x15515e(0x2d8)](_0x14bdef)[0x0]){case _0x15515e(0x20e):updateBotName(_0x2d32eb,_0x14bdef['botname']);break;case _0x15515e(0x318):updateStatus(_0x2d32eb,_0x14bdef[_0x15515e(0x318)]);break;case _0x15515e(0x319):updateLive(_0x2d32eb,_0x14bdef[_0x15515e(0x319)]);break;case _0x15515e(0x2a8):updateLive(_0x2d32eb,_0x14bdef['started']),io['to'](_0x2d32eb)[_0x15515e(0x254)](_0x15515e(0x318),{'access':{'allow':![],'reason':_0x15515e(0x23d),'token':null}});break;case _0x15515e(0x264):_0x14bdef[_0x15515e(0x264)]==_0x15515e(0x262)&&stopBot(_0x2d32eb);_0x14bdef[_0x15515e(0x264)]==_0x15515e(0x310)&&toggleBot(_0x2d32eb,_0x15515e(0x2c5),_0x15515e(0x2b6));break;case _0x15515e(0x213):sendTelegram(_0x2d32eb,_0x14bdef[_0x15515e(0x213)]);break;case _0x15515e(0x23a):io['to'](_0x2d32eb)[_0x15515e(0x254)](_0x14bdef['function'],_0x14bdef[_0x15515e(0x2da)]);break;}}),pid[_0x2d32eb]['on'](_0x3aa2ae(0x22b),function(_0x5032b9){if(_0x2a9782)return;_0x2a9782=!![],_0x5bab37(_0x5032b9);}),pid[_0x2d32eb]['on'](_0x3aa2ae(0x268),function(_0x3a5c61){const _0x4e98a4=_0x3aa2ae;if(installingUpdate)return;if(_0x2a9782)return;_0x2a9782=!![],_0x5bab37(null);const _0x18e20a=dbConfig[_0x4e98a4(0x2c2)](_0x4e98a4(0x1f6))[_0x4e98a4(0x23f)]({'botID':_0x2d32eb})[_0x4e98a4(0x2fc)]();_0x18e20a&&(_0x18e20a[_0x4e98a4(0x318)]==_0x4e98a4(0x244)||_0x18e20a[_0x4e98a4(0x318)]==_0x4e98a4(0x31b))&&(updateLive(_0x2d32eb,_0x4e98a4(0x2b6)),logging(_0x4e98a4(0x2cb)+_0x2d32eb),startBot([_0x2d32eb,userID],{'cwd':bbpath},function(_0x491f92){if(_0x491f92)logging(_0x491f92);}));});}function stopBot(_0x381aaf){const _0x14e871=_0x4dc4cc;getClientsWithBotID(_0x381aaf)['forEach'](_0x4771c3=>{getSocket(_0x4771c3['id'])['disconnect'](!![]),removeClient(_0x4771c3['id']);});if(pid[_0x381aaf])pid[_0x381aaf][_0x14e871(0x310)]();}function addBot(){const _0x42ceda=_0x4dc4cc;let _0x10b81e;for(let _0xe20814=0x1;_0xe20814<0x3e9;_0xe20814++){_0x10b81e=_0xe20814[_0x42ceda(0x24c)]()['padStart'](0x3,'0');let _0x5521f1=config['find'](_0xd805fa=>_0xd805fa[_0x42ceda(0x2e7)]==_0x10b81e);if(!_0x5521f1)break;}if(_0x10b81e==='1000'){logging(_0x42ceda(0x232));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x10b81e),dbConfig[_0x42ceda(0x2c2)]('bots')['push']({'botID':_0x10b81e,'botname':_0x42ceda(0x27c)+_0x10b81e,'status':'new','live':''})[_0x42ceda(0x231)](),startBot([_0x10b81e,userID],{'cwd':bbpath},function(_0x5923e3){if(_0x5923e3)logging(_0x5923e3);}),config=getConfiguration(),io['to']('botmanager')[_0x42ceda(0x254)]('bots',config);}function deleteBot(_0xc960ee){const _0xc9a624=_0x4dc4cc;getClientsWithBotID(_0xc960ee)[_0xc9a624(0x221)](_0x226a55=>{getSocket(_0x226a55['id'])['disconnect'](!![]),removeClient(_0x226a55['id']);}),dbConfig[_0xc9a624(0x2c2)](_0xc9a624(0x1f6))[_0xc9a624(0x327)]({'botID':_0xc960ee})['write'](),logging(_0xc9a624(0x2ca)+_0xc960ee),stopBot(_0xc960ee);try{fs[_0xc9a624(0x203)](path[_0xc9a624(0x2f8)](configpath,_0xc9a624(0x20a)+_0xc960ee+_0xc9a624(0x266))),fs[_0xc9a624(0x203)](path[_0xc9a624(0x2f8)](configpath,_0xc9a624(0x20a)+_0xc960ee+_0xc9a624(0x2ac))),fs[_0xc9a624(0x203)](path[_0xc9a624(0x2f8)](configpath,_0xc9a624(0x20a)+_0xc960ee+'-performance.json')),fs[_0xc9a624(0x203)](path[_0xc9a624(0x2f8)](configpath,_0xc9a624(0x20a)+_0xc960ee+_0xc9a624(0x309)));}catch(_0x7bb478){if(_0x7bb478)logging(_0xc9a624(0x233),_0x7bb478);}config=getConfiguration(),io['to'](_0xc9a624(0x322))[_0xc9a624(0x254)](_0xc9a624(0x1f6),config);}function toggleBot(_0x1b5fdb,_0x4d4ba3,_0x12adfc){const _0x2de6db=_0x4dc4cc;dbConfig['get']('bots')[_0x2de6db(0x23f)]({'botID':_0x1b5fdb})['assign']({'status':_0x4d4ba3})['assign']({'live':_0x12adfc})[_0x2de6db(0x231)]();if(_0x4d4ba3==_0x2de6db(0x244)||_0x4d4ba3=='new')logging(_0x2de6db(0x243)+_0x1b5fdb),startBot([_0x1b5fdb,userID],{'cwd':bbpath},function(_0x212806){if(_0x212806)logging(_0x212806);});else(_0x4d4ba3=='disabled'||_0x4d4ba3=='new-disabled')&&(logging(_0x2de6db(0x29b)+_0x1b5fdb),stopBot(_0x1b5fdb));config=getConfiguration(),io['to'](_0x2de6db(0x322))[_0x2de6db(0x254)]('bots',config);}function _0x9298(){const _0x52e650=['password','login\x20required','host','temporaryAccessAllowed','</b>\x20?','Unauthorized\x20attempt\x20to\x20add\x20bot','/:bot/configuration','createServer','\x20/\x20','message','restart','parse','stop','getTime','-config.json','split','exit','Orders','pidRefreshToken','entries','onText','/disable\x20-\x20disable\x20notifications\x0a','/off\x20-\x20stop\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','/help\x20-\x20show\x20available\x20commands\x0a','getFullYear','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','bcryptjs','disconnect','/:bot/history','reset-password','allow','Notifications\x20types:\x20','getMonth','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','No\x20bots\x20running\x20right\x20now','Bot\x20','removeListener','success','isDirectory','yargs/yargs','timeshift','reason','All\x20bots','8940701TzXoet','once','toIPv4MappedAddress','update-bb','1127NbImwF','/status\x20-\x20show\x20bot(s)\x20status\x0a','whitelistEnabled','kind','stopPolling','map','username','clients','::ffff:127.0.0.1','login\x20token\x20valid','getMinutes','sockets','getSeconds','bb-config.json','hybrid-crypto-js','slice','2FA\x20login\x20required','Invalid\x20username\x20or\x20IP\x20address','mkdirSync','disabled\x20Bot\x20','accept','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20attempt\x20to\x20get\x20logs','::1','Crypt','alerts','11731977vkwGVB','get-starting-balances','ipv6','toIPv4Address','push','show','started','getPortfolio','lowdb','Unauthorized\x20attempt\x20to\x20delete\x20bot','-events.json','3000','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','decrypt','version.json','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Invalid\x20Telegram\x20token','notification','login\x20not\x20required','stopped','telegramEvents','bbPassword','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','temporary\x20access\x20not\x20allowed','orders','5\x20min','date-fns','SIGTERM','Token\x20blacklisted','storeConfiguration','running','get','expiry','inherit','disabled','verify','RSA','set','privateKey','deleted\x20Bot\x20','restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20log\x20out','max','handshake','delete-bot','Invalid\x20authentication\x20token\x20(2)','bot.js','index.html','settings.','\x20only\x0a','15\x20min','settings','login\x20token\x20generated','keys','20WfpQjg','args','config/','token','get-portfolio','referer','Temporary\x20access\x20rejected','conn','/:bot/performance','clientip','5ZnSsts','build','temporary\x20access\x20rejected','getStartingBalances','botID','Unauthorized\x20attempt\x20to\x20update\x20bot','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','publicKey','sendFile','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','<b>Telegram\x20bot\x20status:</b>\x0a','Error:\x20Invalid\x20argument\x20','bot','generateKeyPairAsync','Notifications\x20enabled','search','404\x20Not\x20Found','sendMessage','name',',\x20must\x20be\x20a\x204\x20digit\x20number','2FA\x20required','join','46896IiFysZ','storeHeadless','new-disabled','value','listen','includes','Allow\x20login\x20from\x20IP\x20address\x20<b>','/:bot/coins','blacklist','getDate','Bot\x20Mgr\x20>\x20','static','Access\x20enabled\x20for\x20','readdirSync','match','compareSync','-results.json','encryptedUuid','http','server',':\x20Bot\x20Mgr\x20>\x20','apiKey','2138550mgXEQq','kill','4781684jJMUpn','getHours','HTML','telegramIpApproval','loginRequired','Invalid\x20IP\x20address','connected','status','live','headers','new','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','log','starting\x20bot\x20|\x20Bot\x20','hasOwnProperty','(((.+)+)+)+$','f2aRequired','botmanager','placeOrder','chat','filter','temporary\x20token\x20generated','remove','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','auth','Password\x20has\x20been\x20reset\x20to:\x20','Notifications\x20disabled\x0a','logged\x20out','isValid','Login\x20accepted','-----------------------------------------------------------------------------------','telegramToken','whitelist','\x20|\x20','ipaddr.js','store-settings','crypto','env','telegramChatId','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','telegram2FaApproval','padStart','You\x20can\x20use\x20the\x20following\x20commands:\x0a','All\x20bots\x20running\x20right\x20now','callback_query','socket.io','bots','Unauthorized\x20login\x20attempt\x20(timeout)','length','\x20>\x20','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','then','2FA\x20login\x20token\x20generated','2FA','place-order','bbUsername','telegramEnabled','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','answerCallbackQuery','unlinkSync','type','analytics','Unauthorized\x20attempt\x20to\x20update\x20settings','store','timestamp','@analytics/google-analytics','bot-','default','uuid','apply','botname','add','All','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','User\x20has\x20been\x20validated','telegram','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','reject','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','pidExpireLogin','child_process','temporary\x20access\x20timeout','test','build2','912207QqInEZ','https://hodlerhacks.com','sign','page','data','forEach','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','fork','logout','4zkuFbH','access','Ok,\x20will\x20send\x20order\x20notifications\x20only','send','argv','assign','error','cloneDeep','access\x20timeout','idling\x20bot\x20\x20\x20|\x20Bot\x20','isIPv4MappedAddress','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','write','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','error\x20while\x20deleting\x20config\x20files:\x20','No\x20authentication\x20token','all','lowdb/adapters/FileSync','30\x20min','defaults','<b>Balance\x20Bot\x20status:</b>\x0a','function','Notifications\x20enabled\x0a','sortBy','reload','copyFileSync','find','bb-settings.json','/:bot/portfolio','telegramUsername','enabled\x20Bot\x20','enabled','secret','127.0.0.1','invalid\x20credentials','************','hashSync','remoteAddress','connection','toString','1839576ZNskzU','from','login','secure','Alerts','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','event','emit','catch','existsSync','initclient'];_0x9298=function(){return _0x52e650;};return _0x9298();}function toggleStatus(_0x2ca455){const _0x38ad5e=_0x4dc4cc;let _0x24a5c6=dbConfig['get'](_0x38ad5e(0x1f6))[_0x38ad5e(0x23f)]({'botID':_0x2ca455})[_0x38ad5e(0x2fc)](),_0x10552f;if(_0x24a5c6[_0x38ad5e(0x318)]===_0x38ad5e(0x244))_0x10552f=_0x38ad5e(0x2c5);else{if(_0x24a5c6[_0x38ad5e(0x318)]==='new')_0x10552f='new-disabled';else{if(_0x24a5c6[_0x38ad5e(0x318)]===_0x38ad5e(0x2fb))_0x10552f=_0x38ad5e(0x31b);else{if(_0x24a5c6['status']==='disabled')_0x10552f=_0x38ad5e(0x244);}}}return _0x10552f;}function updateStatus(_0x2a981d,_0x1239e7){const _0x56e46b=_0x4dc4cc;dbConfig[_0x56e46b(0x2c2)](_0x56e46b(0x1f6))[_0x56e46b(0x23f)]({'botID':_0x2a981d})[_0x56e46b(0x22a)]({'status':_0x1239e7})['write'](),config=getConfiguration(),io['to'](_0x56e46b(0x322))[_0x56e46b(0x254)]('bots',config);}function updateLive(_0x1dd9a2,_0x3c1cbd){const _0x1223f5=_0x4dc4cc;dbConfig[_0x1223f5(0x2c2)](_0x1223f5(0x1f6))[_0x1223f5(0x23f)]({'botID':_0x1dd9a2})[_0x1223f5(0x22a)]({'live':_0x3c1cbd})[_0x1223f5(0x231)](),config=getConfiguration(),io['to'](_0x1223f5(0x322))[_0x1223f5(0x254)]('bots',config);}function updateBotName(_0x3dddf3,_0x2a3025){const _0x50990c=_0x4dc4cc;dbConfig[_0x50990c(0x2c2)](_0x50990c(0x1f6))[_0x50990c(0x23f)]({'botID':_0x3dddf3})[_0x50990c(0x22a)]({'botname':_0x2a3025})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x50990c(0x254)]('bots',config);}function telegramError(_0x7c10e7){const _0x12dd40=_0x4dc4cc;console[_0x12dd40(0x31d)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x5c3469){const _0x286c29=_0x4dc4cc;if(_0x5c3469[_0x286c29(0x24e)][_0x286c29(0x28e)]!=settings[_0x286c29(0x242)]&&'@'+_0x5c3469[_0x286c29(0x24e)][_0x286c29(0x28e)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x5c3469[_0x286c29(0x324)]['id'],_0x286c29(0x214),{'parse_mode':'HTML'})[_0x286c29(0x255)](_0xa2bae0=>{telegramError(_0xa2bae0);}),![];return!![];}async function initTelegram(){const _0x29b065=_0x4dc4cc;if(tgBot)tgBot[_0x29b065(0x28c)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x40e0f9=_0x29b065(0x1f2);_0x40e0f9+='\x0a',_0x40e0f9+='/enable\x20-\x20enable\x20notifications\x0a',_0x40e0f9+=_0x29b065(0x26d),_0x40e0f9+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x40e0f9+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x40e0f9+=_0x29b065(0x29d),_0x40e0f9+=_0x29b065(0x26e),_0x40e0f9+=_0x29b065(0x289),_0x40e0f9+=_0x29b065(0x270);let _0x1dc4f3=_0x29b065(0x2b2);_0x1dc4f3+='\x0a',_0x1dc4f3+=_0x40e0f9,tgBot[_0x29b065(0x26c)](/\/start/,_0x5f1777=>{const _0x44fa6e=_0x29b065;if(!validateTelegram(_0x5f1777))return;if(settings['telegramChatId']!=_0x5f1777[_0x44fa6e(0x324)]['id'])updateSetting(_0x44fa6e(0x1ee),_0x5f1777['chat']['id']);updateSetting(_0x44fa6e(0x200),!![]),tgBot[_0x44fa6e(0x2f4)](_0x5f1777[_0x44fa6e(0x324)]['id'],_0x1dc4f3)['catch'](_0x4f4b04=>{telegramError(_0x4f4b04);});}),tgBot['onText'](/\/enable/,_0x11d108=>{const _0x4bb8b9=_0x29b065;if(!validateTelegram(_0x11d108))return;if(settings[_0x4bb8b9(0x1ee)]!=_0x11d108[_0x4bb8b9(0x324)]['id'])updateSetting(_0x4bb8b9(0x1ee),_0x11d108[_0x4bb8b9(0x324)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x11d108[_0x4bb8b9(0x324)]['id'],_0x4bb8b9(0x2f1))[_0x4bb8b9(0x255)](_0x5771a9=>{telegramError(_0x5771a9);});}),tgBot[_0x29b065(0x26c)](/\/config/,async _0x540896=>{const _0x2979ba=_0x29b065;if(!validateTelegram(_0x540896))return;tgBot[_0x2979ba(0x27d)](_0x2979ba(0x1f4)),tgBot[_0x2979ba(0x2f4)](_0x540896['chat']['id'],_0x2979ba(0x2af),{'reply_markup':{'inline_keyboard':[[{'text':_0x2979ba(0x269),'callback_data':_0x2979ba(0x2bb)},{'text':_0x2979ba(0x251),'callback_data':_0x2979ba(0x2a1)},{'text':_0x2979ba(0x210),'callback_data':_0x2979ba(0x235)}]]}})[_0x2979ba(0x255)](_0x3aaab8=>{telegramError(_0x3aaab8);}),tgBot['on'](_0x2979ba(0x1f4),async _0x30c275=>{const _0x5a3791=_0x2979ba,_0x44d176=_0x30c275[_0x5a3791(0x220)],_0x484d6c=_0x30c275[_0x5a3791(0x261)];tgBot[_0x5a3791(0x202)](_0x30c275['id'])[_0x5a3791(0x1fb)](async()=>{const _0x1726c6=_0x5a3791;_0x44d176==_0x1726c6(0x2bb)&&(updateSetting('telegramEvents',_0x1726c6(0x2bb)),updateSetting(_0x1726c6(0x200),!![]),await tgBot[_0x1726c6(0x2f4)](_0x484d6c[_0x1726c6(0x324)]['id'],_0x1726c6(0x227))[_0x1726c6(0x255)](_0x4108de=>{telegramError(_0x4108de);}));_0x44d176==_0x1726c6(0x2a1)&&(updateSetting(_0x1726c6(0x2b7),'alerts'),updateSetting(_0x1726c6(0x200),!![]),await tgBot[_0x1726c6(0x2f4)](_0x484d6c[_0x1726c6(0x324)]['id'],_0x1726c6(0x2ae))[_0x1726c6(0x255)](_0xbd31a7=>{telegramError(_0xbd31a7);}));_0x44d176==_0x1726c6(0x235)&&(updateSetting(_0x1726c6(0x2b7),_0x1726c6(0x235)),updateSetting(_0x1726c6(0x200),!![]),await tgBot['sendMessage'](_0x484d6c['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x1726c6(0x255)](_0x145ece=>{telegramError(_0x145ece);}));if(!settings[_0x1726c6(0x1ee)])tgBot[_0x1726c6(0x2f4)](_0x484d6c[_0x1726c6(0x324)]['id'],_0x1726c6(0x2e9))['catch'](_0x1e7aa0=>{telegramError(_0x1e7aa0);});}),tgBot[_0x5a3791(0x27d)]('callback_query');});}),tgBot[_0x29b065(0x26c)](/\/status/,_0x1d670e=>{const _0x2a9119=_0x29b065;if(!validateTelegram(_0x1d670e))return;let _0x501d0b=_0x2a9119(0x239);config[_0x2a9119(0x221)](_0x148e63=>{const _0x523796=_0x2a9119;_0x501d0b+=_0x523796(0x27c)+_0x148e63[_0x523796(0x2e7)]+_0x523796(0x1e9)+_0x148e63['botname']+':\x20'+_0x148e63[_0x523796(0x318)]+_0x523796(0x260)+_0x148e63[_0x523796(0x319)]+'\x0a';}),_0x501d0b+='\x0a',_0x501d0b+=_0x2a9119(0x2ed),_0x501d0b+=!settings[_0x2a9119(0x200)]?_0x2a9119(0x1e2):_0x2a9119(0x23b),_0x501d0b+=settings['telegramEnabled']?settings[_0x2a9119(0x2b7)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2a9119(0x278)+settings[_0x2a9119(0x2b7)]+_0x2a9119(0x2d4):'',tgBot['sendMessage'](_0x1d670e[_0x2a9119(0x324)]['id'],_0x501d0b,{'parse_mode':_0x2a9119(0x313)})[_0x2a9119(0x255)](_0x51a44f=>{telegramError(_0x51a44f);});}),tgBot[_0x29b065(0x26c)](/\/restart/,_0x286024=>{const _0x4f44c5=_0x29b065;if(!validateTelegram(_0x286024))return;tgBot[_0x4f44c5(0x27d)](_0x4f44c5(0x1f4));const _0x2ce56a=getEnabledBots();if(_0x2ce56a[_0x4f44c5(0x1f8)]==0x0)tgBot[_0x4f44c5(0x2f4)](_0x286024[_0x4f44c5(0x324)]['id'],_0x4f44c5(0x27b))[_0x4f44c5(0x255)](_0x36b422=>{telegramError(_0x36b422);});else{if(_0x2ce56a[_0x4f44c5(0x1f8)]>0x1)_0x2ce56a[_0x4f44c5(0x2a6)]({'botID':_0x4f44c5(0x235)});let _0x4e0018=[],_0x1b0980=[];const _0x142496=_0x2ce56a[_0x4f44c5(0x1f8)]%0x4==0x0||_0x2ce56a['length']%0x4==0x3||_0x2ce56a[_0x4f44c5(0x1f8)]%0x3==0x1?0x4:0x3;let _0x5d04d8=0x0;_0x2ce56a['forEach']((_0x1550b0,_0x194538)=>{const _0x3ce1ca=_0x4f44c5;if(_0x194538%_0x142496==0x0)_0x1b0980=[];_0x1b0980[_0x3ce1ca(0x2a6)]({'text':_0x1550b0[_0x3ce1ca(0x2e7)]==_0x3ce1ca(0x235)?'All\x20bots':_0x3ce1ca(0x27c)+_0x1550b0['botID'],'callback_data':_0x1550b0[_0x3ce1ca(0x2e7)]}),_0x194538%_0x142496==0x0&&(_0x4e0018[_0x5d04d8]=_0x1b0980,_0x5d04d8++);}),tgBot[_0x4f44c5(0x2f4)](_0x286024[_0x4f44c5(0x324)]['id'],_0x4f44c5(0x328),{'reply_markup':{'inline_keyboard':_0x4e0018}})[_0x4f44c5(0x255)](_0x8e6329=>{telegramError(_0x8e6329);}),tgBot['on']('callback_query',async _0x4bca00=>{const _0x1d8c86=_0x4f44c5,_0x137681=_0x4bca00[_0x1d8c86(0x220)],_0x5a7aa4=_0x4bca00['message'];tgBot[_0x1d8c86(0x202)](_0x4bca00['id'])['then'](async()=>{const _0x4a130b=_0x1d8c86;if(_0x137681==_0x4a130b(0x235)){if(settings[_0x4a130b(0x2b7)]==_0x4a130b(0x2bb))tgBot[_0x4a130b(0x2f4)](_0x5a7aa4[_0x4a130b(0x324)]['id'],_0x4a130b(0x252))['catch'](_0x14e8a8=>{telegramError(_0x14e8a8);});config['forEach'](_0x45880a=>{stopBot(_0x45880a['botID']);});}else{if(settings[_0x4a130b(0x2b7)]==_0x4a130b(0x2bb))tgBot[_0x4a130b(0x2f4)](_0x5a7aa4[_0x4a130b(0x324)]['id'],_0x4a130b(0x1ef)+_0x137681)['catch'](_0x1ee325=>{telegramError(_0x1ee325);});stopBot(_0x137681);}}),tgBot[_0x1d8c86(0x27d)]('callback_query');});}}),tgBot[_0x29b065(0x26c)](/\/on/,_0x30c3e4=>{const _0x4c5e44=_0x29b065;if(!validateTelegram(_0x30c3e4))return;tgBot[_0x4c5e44(0x27d)](_0x4c5e44(0x1f4));const _0x2c461e=getDisabledBots();if(_0x2c461e[_0x4c5e44(0x1f8)]==0x0)tgBot[_0x4c5e44(0x2f4)](_0x30c3e4['chat']['id'],_0x4c5e44(0x1f3))[_0x4c5e44(0x255)](_0x1b960e=>{telegramError(_0x1b960e);});else{if(_0x2c461e[_0x4c5e44(0x1f8)]>0x1)_0x2c461e[_0x4c5e44(0x2a6)]({'botID':'all'});let _0x5ced93=[],_0x4aa867=[];const _0x156ac7=_0x2c461e[_0x4c5e44(0x1f8)]%0x4==0x0||_0x2c461e[_0x4c5e44(0x1f8)]%0x4==0x3||_0x2c461e[_0x4c5e44(0x1f8)]%0x3==0x1?0x4:0x3;let _0xa05bb5=0x0;_0x2c461e[_0x4c5e44(0x221)]((_0x21668f,_0x3fabb1)=>{const _0x4dbb22=_0x4c5e44;if(_0x3fabb1%_0x156ac7==0x0)_0x4aa867=[];_0x4aa867[_0x4dbb22(0x2a6)]({'text':_0x21668f[_0x4dbb22(0x2e7)]==_0x4dbb22(0x235)?_0x4dbb22(0x283):'Bot\x20'+_0x21668f['botID'],'callback_data':_0x21668f[_0x4dbb22(0x2e7)]}),_0x3fabb1%_0x156ac7==0x0&&(_0x5ced93[_0xa05bb5]=_0x4aa867,_0xa05bb5++);}),tgBot[_0x4c5e44(0x2f4)](_0x30c3e4[_0x4c5e44(0x324)]['id'],_0x4c5e44(0x201),{'reply_markup':{'inline_keyboard':_0x5ced93}})[_0x4c5e44(0x255)](_0x2b9475=>{telegramError(_0x2b9475);}),tgBot['on']('callback_query',async _0x55e4a9=>{const _0x46e5d2=_0x4c5e44,_0x5596f1=_0x55e4a9[_0x46e5d2(0x220)],_0x20e526=_0x55e4a9['message'];tgBot['answerCallbackQuery'](_0x55e4a9['id'])[_0x46e5d2(0x1fb)](async()=>{const _0x4e452f=_0x46e5d2;if(_0x5596f1==_0x4e452f(0x235)){if(settings[_0x4e452f(0x2b7)]==_0x4e452f(0x2bb))tgBot['sendMessage'](_0x20e526[_0x4e452f(0x324)]['id'],_0x4e452f(0x1fa))[_0x4e452f(0x255)](_0x1430b2=>{telegramError(_0x1430b2);});_0x2c461e['forEach'](_0x438d55=>{const _0x38460d=_0x4e452f;if(_0x438d55[_0x38460d(0x2e7)]!='all')toggleBot(_0x438d55['botID'],toggleStatus(_0x438d55[_0x38460d(0x2e7)]),_0x38460d(0x2b6));});}else{if(settings['telegramEvents']=='orders')tgBot[_0x4e452f(0x2f4)](_0x20e526[_0x4e452f(0x324)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5596f1)[_0x4e452f(0x255)](_0x29cbdd=>{telegramError(_0x29cbdd);});toggleBot(_0x5596f1,toggleStatus(_0x5596f1),_0x4e452f(0x2b6));}}),tgBot[_0x46e5d2(0x27d)](_0x46e5d2(0x1f4));});}}),tgBot['onText'](/\/off/,_0x26c010=>{const _0x55e43e=_0x29b065;if(!validateTelegram(_0x26c010))return;tgBot['removeListener']('callback_query');const _0x15d563=getEnabledBots();if(_0x15d563[_0x55e43e(0x1f8)]==0x0)tgBot[_0x55e43e(0x2f4)](_0x26c010['chat']['id'],_0x55e43e(0x27b))[_0x55e43e(0x255)](_0x314a2b=>{telegramError(_0x314a2b);});else{if(_0x15d563[_0x55e43e(0x1f8)]>0x1)_0x15d563[_0x55e43e(0x2a6)]({'botID':_0x55e43e(0x235)});let _0x461514=[],_0x2d654b=[];const _0x1ad313=_0x15d563[_0x55e43e(0x1f8)]%0x4==0x0||_0x15d563[_0x55e43e(0x1f8)]%0x4==0x3||_0x15d563[_0x55e43e(0x1f8)]%0x3==0x1?0x4:0x3;let _0x2092f7=0x0;_0x15d563[_0x55e43e(0x221)]((_0x1278e2,_0x441307)=>{const _0xf2196=_0x55e43e;if(_0x441307%_0x1ad313==0x0)_0x2d654b=[];_0x2d654b[_0xf2196(0x2a6)]({'text':_0x1278e2[_0xf2196(0x2e7)]==_0xf2196(0x235)?'All\x20bots':'Bot\x20'+_0x1278e2[_0xf2196(0x2e7)],'callback_data':_0x1278e2[_0xf2196(0x2e7)]}),_0x441307%_0x1ad313==0x0&&(_0x461514[_0x2092f7]=_0x2d654b,_0x2092f7++);}),tgBot['sendMessage'](_0x26c010[_0x55e43e(0x324)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x461514}})['catch'](_0xd4e3e4=>{telegramError(_0xd4e3e4);}),tgBot['on'](_0x55e43e(0x1f4),async _0x31f2fc=>{const _0x4a1bad=_0x55e43e,_0x14676c=_0x31f2fc[_0x4a1bad(0x220)],_0x295e44=_0x31f2fc['message'];tgBot[_0x4a1bad(0x202)](_0x31f2fc['id'])[_0x4a1bad(0x1fb)](async()=>{const _0x5c622b=_0x4a1bad;if(_0x14676c==_0x5c622b(0x235)){if(settings[_0x5c622b(0x2b7)]==_0x5c622b(0x2bb))tgBot[_0x5c622b(0x2f4)](_0x295e44[_0x5c622b(0x324)]['id'],_0x5c622b(0x2ec))[_0x5c622b(0x255)](_0x239f3b=>{telegramError(_0x239f3b);});_0x15d563[_0x5c622b(0x221)](_0x27af70=>{const _0x4d30e0=_0x5c622b;if(_0x27af70[_0x4d30e0(0x2e7)]!='all')toggleBot(_0x27af70['botID'],toggleStatus(_0x27af70[_0x4d30e0(0x2e7)]),_0x4d30e0(0x2b6));});}else{if(settings[_0x5c622b(0x2b7)]=='orders')tgBot[_0x5c622b(0x2f4)](_0x295e44['chat']['id'],_0x5c622b(0x27a)+_0x14676c)[_0x5c622b(0x255)](_0x6e5bd3=>{telegramError(_0x6e5bd3);});toggleBot(_0x14676c,toggleStatus(_0x14676c),_0x5c622b(0x2b6));}}),tgBot[_0x4a1bad(0x27d)](_0x4a1bad(0x1f4));});}}),tgBot['onText'](/\/disable/,_0x3dbcef=>{const _0x49556e=_0x29b065;if(!validateTelegram(_0x3dbcef))return;tgBot[_0x49556e(0x2f4)](_0x3dbcef[_0x49556e(0x324)]['id'],'Notifications\x20disabled')[_0x49556e(0x255)](_0x19eef5=>{telegramError(_0x19eef5);}),updateSetting(_0x49556e(0x200),![]);}),tgBot[_0x29b065(0x26c)](/\/help/,_0x571fa9=>{const _0x36eeb6=_0x29b065;if(!validateTelegram(_0x571fa9))return;tgBot[_0x36eeb6(0x2f4)](_0x571fa9[_0x36eeb6(0x324)]['id'],_0x40e0f9)[_0x36eeb6(0x255)](_0x223002=>{telegramError(_0x223002);});}),tgBot['on']('polling_error',_0x4dc4a2=>{const _0x181633=_0x29b065;_0x4dc4a2[_0x181633(0x24c)]()['includes'](_0x181633(0x2f3))&&(logging(_0x181633(0x2b3)),tgBot[_0x181633(0x28c)](),tgBot=null,io['to'](_0x181633(0x322))[_0x181633(0x254)](_0x181633(0x2b4),'Invalid\x20Telegram\x20token'));}),process[_0x29b065(0x285)]('SIGINT',()=>{const _0x136ed6=_0x29b065;if(tgBot)tgBot[_0x136ed6(0x28c)]();process['exit'](0x1);}),process[_0x29b065(0x285)](_0x29b065(0x2be),()=>{const _0x2b789d=_0x29b065;if(tgBot)tgBot[_0x2b789d(0x28c)]();process['exit'](0x1);});}}function disableTelegram(){const _0x24d462=_0x4dc4cc;tgBot&&(tgBot[_0x24d462(0x28c)](),tgBot=null);}function sendTelegram(_0x5338da,_0x17ac7d){const _0x3c8f31=_0x4dc4cc;if(settings[_0x3c8f31(0x200)]){if(settings['telegramEvents']==_0x3c8f31(0x235)||(_0x17ac7d['type']==_0x3c8f31(0x22b)||_0x17ac7d[_0x3c8f31(0x204)]==_0x3c8f31(0x27e))&&settings[_0x3c8f31(0x2b7)]==_0x3c8f31(0x2a1)||_0x17ac7d['type']=='order'&&settings[_0x3c8f31(0x2b7)]==_0x3c8f31(0x2bb)){if(tgBot&&settings['telegramChatId']){if(_0x17ac7d['showname'])tgBot[_0x3c8f31(0x2f4)](settings['telegramChatId'],_0x17ac7d[_0x3c8f31(0x20e)]+_0x3c8f31(0x1f9)+_0x17ac7d[_0x3c8f31(0x253)])[_0x3c8f31(0x255)](_0x3b79b0=>{telegramError(_0x3b79b0);});else tgBot[_0x3c8f31(0x2f4)](settings[_0x3c8f31(0x1ee)],_0x3c8f31(0x27c)+_0x5338da+_0x3c8f31(0x1f9)+_0x17ac7d['event'])[_0x3c8f31(0x255)](_0x318a48=>{telegramError(_0x318a48);});}}}}function getDeviceWithIp(_0x40cb5f){return devices['find'](_0x11978f=>_0x11978f['ip']===_0x40cb5f);}function temporaryAccess2FA(_0x47a317,_0x285d4c){const _0xc0585c=_0x4dc4cc;let _0x130761=new Date(),_0xfd5923=![];if(lastIpApproval){if(_0x130761-lastIpApproval<0x1388)_0xfd5923=!![];}lastIpApproval=new Date();if(_0xfd5923)return;tgBot&&settings[_0xc0585c(0x1ee)]&&(tgBot[_0xc0585c(0x27d)](_0xc0585c(0x1f4)),tgBot[_0xc0585c(0x2f4)](settings[_0xc0585c(0x1ee)],_0xc0585c(0x230)+normalizeIP(_0x285d4c)[_0xc0585c(0x2a7)]+_0xc0585c(0x25c),{'parse_mode':_0xc0585c(0x313),'reply_markup':{'inline_keyboard':[[{'text':_0xc0585c(0x2bc),'callback_data':'5'},{'text':_0xc0585c(0x2d5),'callback_data':'15'},{'text':_0xc0585c(0x237),'callback_data':'30'},{'text':_0xc0585c(0x215),'callback_data':_0xc0585c(0x215)}]]}})[_0xc0585c(0x255)](_0x34ed26=>{telegramError(_0x34ed26);}),tgBot['on'](_0xc0585c(0x1f4),async _0x37bd7b=>{const _0x1bec4a=_0xc0585c,_0x2514f6=_0x37bd7b[_0x1bec4a(0x220)],_0x5db07a=_0x37bd7b[_0x1bec4a(0x261)];tgBot[_0x1bec4a(0x202)](_0x37bd7b['id'])[_0x1bec4a(0x1fb)](async()=>{const _0x21261e=_0x1bec4a;devices[_0x47a317][_0x21261e(0x314)]={'clientip':_0x285d4c,'timestamp':new Date()['getTime'](),'expiry':_0x2514f6},_0x2514f6!='reject'?(await tgBot[_0x21261e(0x2f4)](_0x5db07a['chat']['id'],_0x21261e(0x305)+_0x2514f6+'\x20minutes',{'parse_mode':_0x21261e(0x313)})[_0x21261e(0x255)](_0x39a768=>{telegramError(_0x39a768);}),io['to'](_0x47a317)['emit'](_0x21261e(0x318),{'access':{'allow':![],'reason':_0x21261e(0x23d),'token':null}})):(await tgBot[_0x21261e(0x2f4)](_0x5db07a[_0x21261e(0x324)]['id'],_0x21261e(0x2df))[_0x21261e(0x255)](_0x4f55f6=>{telegramError(_0x4f55f6);}),io['to'](_0x47a317)['emit']('status',{'access':{'allow':![],'reason':_0x21261e(0x2e5),'token':null}}));}),tgBot[_0x1bec4a(0x27d)](_0x1bec4a(0x1f4));}));}function loginAccess2FA(_0x41b097,_0x37f1a4){const _0x1f2c19=_0x4dc4cc;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x1f2c19(0x1f4)),tgBot[_0x1f2c19(0x2f4)](settings[_0x1f2c19(0x1ee)],_0x1f2c19(0x2ff)+normalizeIP(_0x37f1a4)[_0x1f2c19(0x2a7)]+_0x1f2c19(0x25c),{'parse_mode':_0x1f2c19(0x313),'reply_markup':{'inline_keyboard':[[{'text':_0x1f2c19(0x29c),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x1f2c19(0x215)}]]}})[_0x1f2c19(0x255)](_0x1d9123=>{telegramError(_0x1d9123);}),tgBot['on'](_0x1f2c19(0x1f4),async _0x1a0919=>{const _0x2086a3=_0x1f2c19,_0x497fea=_0x1a0919[_0x2086a3(0x220)],_0x47af61=_0x1a0919['message'];tgBot[_0x2086a3(0x202)](_0x1a0919['id'])[_0x2086a3(0x1fb)](async()=>{const _0x80fb00=_0x2086a3;devices[_0x41b097]['telegram2FaApproval']={'clientip':_0x37f1a4,'timestamp':new Date()[_0x80fb00(0x265)](),'expiry':_0x497fea},_0x497fea!=_0x80fb00(0x215)?(await tgBot[_0x80fb00(0x2f4)](_0x47af61[_0x80fb00(0x324)]['id'],_0x80fb00(0x1e5),{'parse_mode':_0x80fb00(0x313)})[_0x80fb00(0x255)](_0x1e86b0=>{telegramError(_0x1e86b0);}),io['to'](_0x41b097)[_0x80fb00(0x254)](_0x80fb00(0x318),{'access':{'allow':![],'reason':_0x80fb00(0x23d),'token':null}})):(await tgBot[_0x80fb00(0x2f4)](_0x47af61[_0x80fb00(0x324)]['id'],'Login\x20rejected')['catch'](_0x224f25=>{telegramError(_0x224f25);}),io['to'](_0x41b097)[_0x80fb00(0x254)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x2086a3(0x27d)](_0x2086a3(0x1f4));}));}function getConfiguration(){const _0x143e30=_0x4dc4cc;return dbConfig[_0x143e30(0x2c2)](_0x143e30(0x1f6))[_0x143e30(0x23c)](_0x143e30(0x2e7))[_0x143e30(0x2fc)]()||[];}function getEnabledBots(){const _0x422f8d=_0x4dc4cc;return dbConfig[_0x422f8d(0x2c2)](_0x422f8d(0x1f6))[_0x422f8d(0x23c)]('botID')[_0x422f8d(0x325)]({'status':_0x422f8d(0x244)})[_0x422f8d(0x2fc)]()||[];}function getDisabledBots(){const _0x43e97a=_0x4dc4cc;return dbConfig['get']('bots')[_0x43e97a(0x23c)](_0x43e97a(0x2e7))[_0x43e97a(0x325)]({'status':_0x43e97a(0x2c5)})[_0x43e97a(0x2fc)]()||[];}function getSettings(){const _0x4eda1a=_0x4dc4cc;return dbSettings[_0x4eda1a(0x2c2)]('settings')[_0x4eda1a(0x2fc)]()||{'timeshift':0x0};}function getSecure(){const _0x275a05=_0x4dc4cc;return dbSecure['get'](_0x275a05(0x250))[_0x275a05(0x2fc)]()||{};}function getBlacklist(){const _0x45b8f6=_0x4dc4cc;return dbSecure['get'](_0x45b8f6(0x301))['value']()||[];}function broadcastToBots(_0x3e2195,_0x1b4b7e){const _0x110d6c=_0x4dc4cc;config[_0x110d6c(0x221)](_0x8ce228=>{const _0x48f003=_0x110d6c;if(_0x8ce228[_0x48f003(0x318)]==_0x48f003(0x244)&&_0x8ce228[_0x48f003(0x319)]==_0x48f003(0x2c1)){if(pid[_0x8ce228[_0x48f003(0x2e7)]])pid[_0x8ce228['botID']][_0x48f003(0x228)]({[_0x3e2195]:_0x1b4b7e});}});}function storeSettings(_0x513557,_0x4a2c1b=![]){const _0x1f8ba7=_0x4dc4cc;_0x513557={...settings,..._0x513557};if(_0x4a2c1b&&_0x513557[_0x1f8ba7(0x2b8)]!=_0x1f8ba7(0x248)&&_0x513557['bbPassword']!=''){const _0xfd119a=crypt[_0x1f8ba7(0x2b0)](secure[_0x1f8ba7(0x2c9)],_0x513557['bbPassword'])['message'][_0x1f8ba7(0x267)]('@')[0x0],_0x2d2454=bcrypt['hashSync'](_0xfd119a,saltRounds);_0x513557={..._0x513557,'bbPassword':_0x2d2454};}if(_0x4a2c1b&&_0x513557[_0x1f8ba7(0x1e7)]!=_0x1f8ba7(0x248)&&_0x513557[_0x1f8ba7(0x1e7)]!=''){const _0x40679c=crypt[_0x1f8ba7(0x2b0)](secure[_0x1f8ba7(0x2c9)],_0x513557[_0x1f8ba7(0x1e7)])[_0x1f8ba7(0x261)][_0x1f8ba7(0x267)]('@')[0x0];_0x513557={..._0x513557,'telegramToken':_0x40679c};}const _0x39092f=_0x513557[_0x1f8ba7(0x1e7)]!=_0x1f8ba7(0x248)&&_0x513557['telegramToken']!=settings[_0x1f8ba7(0x1e7)]||_0x513557[_0x1f8ba7(0x242)]!=settings[_0x1f8ba7(0x242)],_0x135762=_0x513557[_0x1f8ba7(0x1e7)]==''||_0x513557['telegramUsername']=='';if(_0x39092f)_0x513557['telegramEvents']='all';for(const [_0x1eccc0,_0x391cf9]of Object[_0x1f8ba7(0x26b)](_0x513557)){if(_0x1eccc0==_0x1f8ba7(0x1e7)&&_0x391cf9==_0x1f8ba7(0x248)){_0x513557[_0x1f8ba7(0x1e7)]=settings[_0x1f8ba7(0x1e7)];continue;};if(_0x1eccc0==_0x1f8ba7(0x2b8)&&_0x391cf9==_0x1f8ba7(0x248)){_0x513557[_0x1f8ba7(0x2b8)]=settings['bbPassword'];continue;};dbSettings[_0x1f8ba7(0x2c8)](_0x1f8ba7(0x2d3)+_0x1eccc0,_0x391cf9)[_0x1f8ba7(0x231)]();}settings=_0x513557,io['to'](_0x1f8ba7(0x322))[_0x1f8ba7(0x254)](_0x1f8ba7(0x2d6),cleanSettings()),broadcastToBots(_0x1f8ba7(0x281),settings[_0x1f8ba7(0x281)]);if(_0x39092f&&!_0x135762)initTelegram();if(_0x39092f&&_0x135762)disableTelegram();getAllClients()[_0x1f8ba7(0x221)](_0x3781d0=>{const _0x53390b=_0x1f8ba7;getSocket(_0x3781d0['id'])[_0x53390b(0x254)](_0x53390b(0x318),{'access':{'allow':![],'reason':_0x53390b(0x23d),'token':null}});});}function updateSetting(_0x217521,_0x1feceb){const _0xa4556d=_0x4dc4cc;dbSettings['set'](_0xa4556d(0x2d3)+_0x217521,_0x1feceb)[_0xa4556d(0x231)](),settings=getSettings(),io['to']('botmanager')[_0xa4556d(0x254)](_0xa4556d(0x2d6),cleanSettings());}function storeSecure(_0x4a4573){const _0x1a0edf=_0x4dc4cc;dbSecure[_0x1a0edf(0x2c2)](_0x1a0edf(0x250))[_0x1a0edf(0x2a6)](_0x4a4573)[_0x1a0edf(0x231)](),secure=_0x4a4573;}function addBlacklist(_0x20c387){const _0x2387a4=_0x4dc4cc;cleanBlacklist();let _0x5d55eb;devices[_0x20c387][_0x2387a4(0x314)]?_0x5d55eb=Math[_0x2387a4(0x2cd)](devices[_0x20c387][_0x2387a4(0x314)][_0x2387a4(0x2c3)],loginExpiry):_0x5d55eb=loginExpiry,dbSecure[_0x2387a4(0x2c2)](_0x2387a4(0x301))[_0x2387a4(0x2a6)]({'expiry':new Date()[_0x2387a4(0x265)]()+_0x5d55eb*0x3c*0x3e8,'token':devices[_0x20c387]['access'][_0x2387a4(0x2dc)]})[_0x2387a4(0x231)](),blacklist=dbSecure[_0x2387a4(0x2c2)]('blacklist')[_0x2387a4(0x2fc)]();}function cleanBlacklist(){const _0x38269e=_0x4dc4cc;let _0x33338e=dbSecure[_0x38269e(0x2c2)](_0x38269e(0x301))[_0x38269e(0x22c)]()[_0x38269e(0x2fc)](),_0x22cb3e=new Date()['getTime']();_0x33338e[_0x38269e(0x221)](_0x668274=>{const _0x5a775c=_0x38269e;_0x668274[_0x5a775c(0x2c3)]<_0x22cb3e&&dbSecure[_0x5a775c(0x2c2)](_0x5a775c(0x301))[_0x5a775c(0x327)]({'expiry':_0x668274['expiry']})['write']();});}function initStates(){const _0x2743a1=_0x4dc4cc;let _0x18663e=getConfiguration();_0x18663e[_0x2743a1(0x221)](_0x260cad=>{_0x260cad['live']='stopped';}),storeConfiguration(_0x18663e);}function onKeys(){const _0x1155be=new RSA();return new Promise(_0x3f472d=>{const _0x2ca96b=_0x5b27;_0x1155be[_0x2ca96b(0x2f0)]()[_0x2ca96b(0x1fb)](_0xd7e8d8=>{_0x3f472d(_0xd7e8d8);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x590851=_0x4dc4cc;let _0x2abf18=getConfiguration(),_0x31e698=![];_0x2abf18['forEach'](_0x2bf9c0=>{const _0x2d05c0=_0x5b27;if(_0x2bf9c0['status']=='running')_0x2bf9c0[_0x2d05c0(0x318)]=_0x2d05c0(0x244),_0x31e698=!![];else _0x2bf9c0['status']=='stopped'&&(_0x2bf9c0['status']=_0x2d05c0(0x2c5),_0x31e698=!![]);});if(_0x31e698)storeConfiguration(_0x2abf18);let _0x8e4e93=getSecure();if(!_0x8e4e93['hasOwnProperty'](_0x590851(0x245))){let _0xe1ccad=await generateKeys();_0x8e4e93[_0x590851(0x2ea)]=_0xe1ccad[_0x590851(0x2ea)],_0x8e4e93['privateKey']=_0xe1ccad[_0x590851(0x2c9)],_0x8e4e93[_0x590851(0x245)]=crypto['randomBytes'](0x20)['toString']('hex');;storeSecure(_0x8e4e93);}let _0x3f2b5d=getSettings();_0x31e698=![];!_0x3f2b5d[_0x590851(0x31f)](_0x590851(0x315))&&(_0x3f2b5d[_0x590851(0x315)]=![],_0x3f2b5d[_0x590851(0x1ff)]='',_0x3f2b5d[_0x590851(0x2b8)]='',_0x3f2b5d[_0x590851(0x321)]=![],_0x31e698=!![]);!_0x3f2b5d[_0x590851(0x31f)](_0x590851(0x28a))&&(_0x3f2b5d[_0x590851(0x28a)]=![],_0x3f2b5d[_0x590851(0x1e8)]=[],_0x3f2b5d[_0x590851(0x25b)]=![],_0x31e698=!![]);if(!_0x3f2b5d[_0x590851(0x31f)](_0x590851(0x200))){if(_0x3f2b5d[_0x590851(0x1ee)])_0x3f2b5d['telegramEnabled']=!![];else _0x3f2b5d[_0x590851(0x200)]=![];_0x31e698=!![];}if(_0x31e698)storeSettings(_0x3f2b5d);}function storeConfiguration(_0x5bbd9a){const _0x2032b9=_0x4dc4cc;dbConfig[_0x2032b9(0x2c2)](_0x2032b9(0x1f6))['remove']()[_0x2032b9(0x231)](),dbConfig['get'](_0x2032b9(0x1f6))[_0x2032b9(0x2a6)](..._0x5bbd9a)['write'](),config=_0x5bbd9a;}function resetPassword(){const _0x395664=_0x4dc4cc;tgBot&&settings[_0x395664(0x1ee)]&&(tgBot[_0x395664(0x27d)](_0x395664(0x1f4)),tgBot[_0x395664(0x2f4)](settings[_0x395664(0x1ee)],_0x395664(0x31c),{'parse_mode':_0x395664(0x313),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x395664(0x255)](_0x39ddc7=>{telegramError(_0x39ddc7);}),tgBot['on'](_0x395664(0x1f4),async _0x5426fd=>{const _0x2e6ad8=_0x395664,_0x2ed084=_0x5426fd['data'],_0x24070c=_0x5426fd[_0x2e6ad8(0x261)];tgBot[_0x2e6ad8(0x202)](_0x5426fd['id'])[_0x2e6ad8(0x1fb)](async()=>{const _0x41f9ba=_0x2e6ad8;if(_0x2ed084!='no'){const _0x2a1a13=0xf,_0x412443=_0x41f9ba(0x222),_0x7f43ca=Array[_0x41f9ba(0x24e)](crypto['randomFillSync'](new Uint32Array(_0x2a1a13)))[_0x41f9ba(0x28d)](_0x28f62d=>_0x412443[_0x28f62d%_0x412443[_0x41f9ba(0x1f8)]])[_0x41f9ba(0x2f8)](''),_0x4bdf57=bcrypt[_0x41f9ba(0x249)](_0x7f43ca,saltRounds);storeSettings({'bbPassword':_0x4bdf57}),await tgBot[_0x41f9ba(0x2f4)](_0x24070c[_0x41f9ba(0x324)]['id'],_0x41f9ba(0x1e1)+_0x7f43ca,{'parse_mode':_0x41f9ba(0x313)})[_0x41f9ba(0x255)](_0x674816=>{telegramError(_0x674816);});}else await tgBot['sendMessage'](_0x24070c['chat']['id'],'Password\x20reset\x20rejected')[_0x41f9ba(0x255)](_0x49f4c1=>{telegramError(_0x49f4c1);});}),tgBot[_0x2e6ad8(0x27d)](_0x2e6ad8(0x1f4));}));}function logging(_0x487697){const _0x13f1a2=_0x4dc4cc;console[_0x13f1a2(0x31d)](getTimeStamp()+_0x13f1a2(0x30d)+_0x487697);if(tgBot&&settings[_0x13f1a2(0x1ee)]&&settings[_0x13f1a2(0x2b7)]!=_0x13f1a2(0x2bb))tgBot['sendMessage'](settings[_0x13f1a2(0x1ee)],_0x13f1a2(0x303)+_0x487697)[_0x13f1a2(0x255)](_0x180c52=>{telegramError(_0x180c52);});}function getServerTime(){const _0x542d85=_0x4dc4cc,_0x497813=new Date();return _0x497813[_0x542d85(0x271)]()+'/'+(_0x497813[_0x542d85(0x279)]()+0x1)[_0x542d85(0x24c)]()['padStart'](0x2,'0')+'/'+_0x497813[_0x542d85(0x302)]()[_0x542d85(0x24c)]()[_0x542d85(0x1f1)](0x2,'0')+'\x20'+_0x497813[_0x542d85(0x312)]()[_0x542d85(0x24c)]()[_0x542d85(0x1f1)](0x2,'0')+':'+_0x497813[_0x542d85(0x292)]()[_0x542d85(0x24c)]()[_0x542d85(0x1f1)](0x2,'0')+':'+_0x497813[_0x542d85(0x294)]()[_0x542d85(0x24c)]()[_0x542d85(0x1f1)](0x2,'0');}function getTimeStamp(){const _0x40e502=_0x4dc4cc,_0x49cacf=shiftedTime();return _0x49cacf[_0x40e502(0x271)]()+'/'+(_0x49cacf[_0x40e502(0x279)]()+0x1)[_0x40e502(0x24c)]()['padStart'](0x2,'0')+'/'+_0x49cacf[_0x40e502(0x302)]()[_0x40e502(0x24c)]()[_0x40e502(0x1f1)](0x2,'0')+'\x20'+_0x49cacf[_0x40e502(0x312)]()[_0x40e502(0x24c)]()[_0x40e502(0x1f1)](0x2,'0')+':'+_0x49cacf['getMinutes']()[_0x40e502(0x24c)]()['padStart'](0x2,'0')+':'+_0x49cacf[_0x40e502(0x294)]()[_0x40e502(0x24c)]()[_0x40e502(0x1f1)](0x2,'0');}function shiftedTime(){const _0x5e02e7=_0x4dc4cc,_0x4c3974=new Date();let _0x34f628=_0x4c3974;if(settings['timeshift']&&settings[_0x5e02e7(0x281)]!==0x0)_0x34f628=fns[_0x5e02e7(0x20f)](_0x4c3974,{'hours':settings[_0x5e02e7(0x281)]});return _0x34f628;}function startScheduler(){let _0x1ea1cf=new Date()['getUTCHours']();_0x1ea1cf==0x1&&backupConfigFiles();_0x1ea1cf==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x4ae48b=_0x4dc4cc;fs[_0x4ae48b(0x306)](configpath,{'withFileTypes':!![]})['forEach'](_0x303d5f=>{const _0xe0654f=_0x4ae48b;if(!_0x303d5f[_0xe0654f(0x27f)]())fs[_0xe0654f(0x23e)](configpath+_0x303d5f['name'],configbackuppath+_0x303d5f[_0xe0654f(0x2f5)]);});}function triggerAnalytics(){const _0x1641ac=_0x4dc4cc;analytics[_0x1641ac(0x21f)]({'title':'Balance\x20Bot\x20Server','href':_0x1641ac(0x21d),'path':'/v'+serverversion});}function validateCredentials(_0x3bdc5f,_0x16fb72){const _0x3ad9cb=_0x4dc4cc;if(_0x3bdc5f[_0x3ad9cb(0x28e)]==settings[_0x3ad9cb(0x1ff)]&&bcrypt[_0x3ad9cb(0x308)](_0x3bdc5f[_0x3ad9cb(0x258)],settings[_0x3ad9cb(0x2b8)])){if(settings[_0x3ad9cb(0x321)])return{'allow':![],'reason':_0x3ad9cb(0x298),'token':null};else{const _0x28789f=generateLoginToken(_0x16fb72);return{'allow':!![],'reason':_0x3ad9cb(0x2d7),'token':_0x28789f};}}else return{'allow':![],'reason':_0x3ad9cb(0x247),'token':null};}function refreshToken(_0x211cd6){const _0x3b8956=_0x4dc4cc,_0x2fa7f6=generateLoginToken(_0x211cd6);return{'allow':!![],'reason':_0x3b8956(0x2d7),'token':_0x2fa7f6};}function validateAccess(_0x187673,_0x8f8126){const _0x3942e8=_0x4dc4cc;let _0x4c7cec=devices[_0x8f8126]['ip'],_0x593ac2;const _0xecd83e=_0x33007c=>{const _0x1d8fe0=_0x5b27;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x8f8126)){const _0x4b28cc=generateLoginToken(_0x8f8126);return{'allow':!![],'reason':_0x1d8fe0(0x1fc),'token':_0x4b28cc};}else return{'allow':![],'reason':_0x1d8fe0(0x259),'token':null};}else return _0x593ac2=validToken(_0x33007c,_0x8f8126),_0x593ac2[_0x1d8fe0(0x31f)](_0x1d8fe0(0x27e))?{'allow':!![],'reason':_0x1d8fe0(0x291),'token':_0x33007c}:{'allow':![],'reason':_0x1d8fe0(0x259),'token':null};}else return{'allow':!![],'reason':_0x1d8fe0(0x2b5),'token':null};};if(settings[_0x3942e8(0x28a)]){let _0x540c03=[...settings['whitelist'],_0x3942e8(0x29f),_0x3942e8(0x290),_0x3942e8(0x246)];if(_0x540c03[_0x3942e8(0x2fe)](_0x4c7cec))return _0xecd83e(_0x187673);else{_0x593ac2=validToken(_0x187673,_0x8f8126);if(_0x593ac2['hasOwnProperty']('success'))return _0xecd83e(_0x187673);else{if(telegramIpApproved(_0x8f8126)){const _0x5791a1=generateToken(_0x8f8126);return _0x593ac2=_0xecd83e(_0x187673),_0x593ac2[_0x3942e8(0x277)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x5791a1}:_0x593ac2;}else return settings[_0x3942e8(0x25b)]?{'allow':![],'reason':_0x3942e8(0x2f7),'token':null}:{'allow':![],'reason':_0x3942e8(0x2ba),'token':null};}}}else return _0xecd83e(_0x187673);}function timelyDecrypt(_0x2725b6,_0x17a682=!![]){const _0x1a526d=_0x4dc4cc;if(_0x2725b6)try{const _0x23e60b=crypt['decrypt'](secure[_0x1a526d(0x2c9)],_0x2725b6)['message'],_0x306015=_0x23e60b['split']('@')[0x0],_0x34c1f3=_0x23e60b[_0x1a526d(0x267)]('@')[0x1],_0x4adb92=new Date()['getTime']();if(_0x17a682){if(_0x4adb92-_0x34c1f3<maxSecretAge*0x3e8)return _0x306015;else return![];}else return _0x306015;}catch(_0x22924e){return![];}else return![];}const validToken=(_0x5abe18,_0x42be6d)=>{const _0x397036=_0x4dc4cc,_0x5b8e22=devices[_0x42be6d]['ip'];if(!_0x5abe18)return{'error':_0x397036(0x234)};for(let _0x26975b of blacklist){if(_0x26975b[_0x397036(0x2dc)]==_0x5abe18)return{'error':_0x397036(0x2bf)};}let _0x5d6714;try{_0x5d6714=jwt[_0x397036(0x2c6)](_0x5abe18,secure['secret']+_0x42be6d);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x5d6714['hasOwnProperty'](_0x397036(0x2e2))&&!_0x5d6714[_0x397036(0x31f)](_0x397036(0x28e))||!_0x5d6714[_0x397036(0x31f)]('exp'))return{'error':_0x397036(0x2d0)};if(!_0x5d6714[_0x397036(0x31f)](_0x397036(0x28e))&&_0x5d6714['hasOwnProperty'](_0x397036(0x2e2))){const {clientip:_0x9182b7}=_0x5d6714;return _0x5b8e22==_0x9182b7?{'success':_0x397036(0x212)}:{'error':_0x397036(0x316)};}else{if(_0x5d6714['hasOwnProperty'](_0x397036(0x28e))&&_0x5d6714[_0x397036(0x31f)](_0x397036(0x2e2))){const {username:_0x34c392,clientip:_0x2ad443}=_0x5d6714;return settings[_0x397036(0x1ff)]==_0x34c392&&_0x5b8e22==_0x2ad443?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x397036(0x299)};}}},generateLoginToken=_0x4f2c95=>{const _0x250682=_0x4dc4cc;if(_0x4f2c95){const _0x12a592=devices[_0x4f2c95]['ip'];return jwt['sign']({'username':settings[_0x250682(0x1ff)],'clientip':_0x12a592},secure[_0x250682(0x245)]+_0x4f2c95,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1728e2=>{const _0x419bec=_0x4dc4cc;if(_0x1728e2){const _0x25c936=devices[_0x1728e2]['ip'];return jwt[_0x419bec(0x21e)]({'clientip':_0x25c936},secure['secret']+_0x1728e2,{'expiresIn':devices[_0x1728e2][_0x419bec(0x314)][_0x419bec(0x2c3)]*0x3c});}else return![];},telegramIpApproved=_0xc58566=>{const _0x343d7d=_0x4dc4cc;let _0x30146c=![];return devices[_0xc58566][_0x343d7d(0x314)]&&devices[_0xc58566][_0x343d7d(0x314)][_0x343d7d(0x2c3)]!='reject'&&(_0x30146c=devices[_0xc58566][_0x343d7d(0x314)][_0x343d7d(0x2e2)]==devices[_0xc58566]['ip']&&new Date()[_0x343d7d(0x265)]()-devices[_0xc58566]['telegramIpApproval'][_0x343d7d(0x208)]<devices[_0xc58566][_0x343d7d(0x314)][_0x343d7d(0x2c3)]*0x3c*0x3e8),_0x30146c;},telegram2FaApproved=_0x22f40c=>{const _0x246893=_0x4dc4cc;let _0xc17dee=![];return devices[_0x22f40c]['telegram2FaApproval']&&devices[_0x22f40c][_0x246893(0x1f0)][_0x246893(0x2c3)]!=_0x246893(0x215)&&(_0xc17dee=devices[_0x22f40c][_0x246893(0x1f0)]['clientip']==devices[_0x22f40c]['ip']&&new Date()[_0x246893(0x265)]()-devices[_0x22f40c][_0x246893(0x1f0)][_0x246893(0x208)]<devices[_0x22f40c]['telegram2FaApproval'][_0x246893(0x2c3)]*0x3c*0x3e8),_0xc17dee;},normalizeIP=_0x550ab7=>{const _0x2fd190=_0x4dc4cc;let _0xc9adf5=null,_0x599267=null;if(ipaddr[_0x2fd190(0x1e4)](_0x550ab7)){const _0x2b529f=ipaddr[_0x2fd190(0x263)](_0x550ab7);_0x2b529f[_0x2fd190(0x28b)]()===_0x2fd190(0x2a4)?(_0x2b529f[_0x2fd190(0x22f)]()&&(_0xc9adf5=_0x2b529f[_0x2fd190(0x2a5)]()['toString']()),_0x599267=_0x2b529f[_0x2fd190(0x24c)]()):(_0xc9adf5=_0x2b529f['toString'](),_0x599267=_0x2b529f[_0x2fd190(0x286)]()['toString']());}return{'show':_0xc9adf5?_0xc9adf5:_0x599267,'store':_0x599267};};