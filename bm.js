const _0x37386b=_0x5c62;(function(_0x4a772f,_0x355e8b){const _0x113c65=_0x5c62,_0x31577b=_0x4a772f();while(!![]){try{const _0x503aec=-parseInt(_0x113c65(0x1fc))/0x1*(-parseInt(_0x113c65(0x216))/0x2)+parseInt(_0x113c65(0x22c))/0x3*(parseInt(_0x113c65(0x1b6))/0x4)+-parseInt(_0x113c65(0x290))/0x5+-parseInt(_0x113c65(0x2ab))/0x6*(-parseInt(_0x113c65(0x249))/0x7)+parseInt(_0x113c65(0x1ad))/0x8*(-parseInt(_0x113c65(0x193))/0x9)+parseInt(_0x113c65(0x27a))/0xa*(parseInt(_0x113c65(0x1f3))/0xb)+parseInt(_0x113c65(0x230))/0xc*(parseInt(_0x113c65(0x1f9))/0xd);if(_0x503aec===_0x355e8b)break;else _0x31577b['push'](_0x31577b['shift']());}catch(_0x56e1ca){_0x31577b['push'](_0x31577b['shift']());}}}(_0x24d8,0x55826));const _0x30e9b7=function(){let _0x276632=!![];return function(_0x535e8b,_0xf967f2){const _0x598828=_0x276632?function(){const _0x23feaa=_0x5c62;if(_0xf967f2){const _0x174155=_0xf967f2[_0x23feaa(0x1b2)](_0x535e8b,arguments);return _0xf967f2=null,_0x174155;}}:function(){};return _0x276632=![],_0x598828;};}(),_0x1049ef=_0x30e9b7(this,function(){const _0x5ceda6=_0x5c62;return _0x1049ef[_0x5ceda6(0x20a)]()['search'](_0x5ceda6(0x2a4))['toString']()[_0x5ceda6(0x187)](_0x1049ef)[_0x5ceda6(0x2a1)]('(((.+)+)+)+$');});_0x1049ef();'use strict';process['env'][_0x37386b(0x212)]=0x1;function _0x24d8(){const _0x55dfa9=['apiKey','server','catch','access','/:bot/history','-config.json','chat','padStart','sign','page','reject','copyFileSync','logout','toIPv4Address','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','remove',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','once','5\x20min','All','isValid','You\x20can\x20use\x20the\x20following\x20commands:\x0a','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','<b>Balance\x20Bot\x20Status:</b>\x0a','reload','default','f2aRequired','/help\x20-\x20show\x20available\x20commands\x0a','storeHeadless','Ok,\x20will\x20send\x20alert\x20notifications\x20only','child_process','sortBy','Invalid\x20authentication\x20token\x20(2)','existsSync','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','temporaryAccessAllowed','kind','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','loginRequired','type','parse','botmanager','privateKey','/names\x20-\x20show\x20bot\x20names\x0a','generateKeyPairAsync','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','telegram2FaApproval','telegramUsername','/:bot/support','constructor','/on\x20-\x20start\x20bot(s)\x0a','express','socket.io','sockets','mkdirSync','polling_error','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','node-telegram-bot-api','Balance\x20Bot\x20Server','stopped','UA-192771731-1','189XrRgGG','defaults','live','running','Ok,\x20will\x20send\x20order\x20notifications\x20only','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Token\x20blacklisted','Unauthorized\x20attempt\x20to\x20store\x20configuration','enabled','All\x20bots','emit','delete-alerts','pidExpireLogin','blacklist','connected','placeOrder','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','disabled','\x20>\x20','toIPv4MappedAddress','host','-----------------------------------------------------------------------------------','accept','assign','stopPolling','show','72960UuKFpw','getPortfolio','15\x20min','kill','hashSync','apply','Login\x20rejected','password','login\x20token\x20generated','28924CLcaup','Notifications\x20enabled\x0a','callback_query','update-bot','delete-bot','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','path','/restart\x20-\x20restart\x20bot(s)\x0a','send','uuid','storeConfiguration','restart','message','timeshift','store-headless','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bb/','remoteAddress','Unauthorized\x20attempt\x20to\x20delete\x20bot','initclient','logged\x20out','add-bot','Unauthorized\x20attempt\x20to\x20log\x20out','Password\x20has\x20been\x20reset\x20to:\x20','disconnect','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/status\x20-\x20show\x20bot(s)\x20status\x0a','invalid\x20credentials','jsonwebtoken','Password\x20reset\x20rejected','backup/','push','HTML','timestamp','getMinutes','Notifications\x20disabled\x0a','http','slice','telegramEvents','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','access\x20timeout','telegram','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','forEach','::ffff:127.0.0.1','filter','Unauthorized\x20attempt\x20to\x20get\x20logs','removeAllListeners','yes','getTime','sha256','readFileSync','No\x20authentication\x20token','settings.','analytics','split','-performance.json','orders','ipc','args','function','17776UkqDdl','update-bb','bot.js','add','reason','Notifications\x20types:\x20','886509ffwGpp','telegramEnabled','2FA\x20required','489kQoaTk','settings','all','login\x20required','alerts','includes','handshake','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','match','whitelist','isIPv4MappedAddress','127.0.0.1','find','argv','toString','notification','mode','config/','30\x20min','starting\x20bot\x20|\x20Bot\x20','getDate','login\x20not\x20required','NTBA_FIX_319','exit','botID','bb-config.json','78ZaRIKZ','temporary\x20token\x20generated','listen','getSeconds','createServer','name','map','version.json','cancelLoading','verify','\x20|\x20','answerCallbackQuery','/:bot','set','Unauthorized\x20attempt\x20to\x20update\x20settings','bbUsername','pidRefreshToken','Invalid\x20username\x20or\x20IP\x20address','getMonth','/enable\x20-\x20enable\x20notifications\x0a','status','onText','30PLNbQX','temporary\x20access\x20rejected','getFullYear','telegramToken','108FYkTLG','cloneDeep','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','enabled\x20Bot\x20','bot-','exp','emitHistory','started','join','Invalid\x20authentication\x20token\x20(1)','write','</b>\x20?','\x20only\x0a','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','stringify','sendMessage','inherit','use','\x20to\x20','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','store-settings','Unauthorized\x20attempt\x20to\x20delete\x20alerts','index.html','getStartingBalances','length','168742nPOvPx','RSA-OAEP','telegramChatId','yargs/yargs','clientip','store','unlinkSync','No\x20bots\x20running\x20right\x20now','login','User\x20has\x20been\x20validated','data','publicKey','get','log','Unauthorized\x20login\x20attempt\x20(timeout)','Crypt','readdirSync','expiry','new-disabled','getUTCHours','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','telegramIpApproval','hybrid-crypto-js','decrypt','static','bbPassword','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','hasOwnProperty','Orders','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Bot\x20','value','keys','Unauthorized\x20attempt\x20to\x20update\x20bot','connection','bots','whitelistEnabled','manual','lowdb/adapters/FileSync','error','user','2FA\x20login\x20token\x20generated','idling\x20bot\x20\x20\x20|\x20Bot\x20','event','SIGTERM','conn','-events.json','token','secret','1310kedNqo','build','showname','login\x20token\x20valid','lowdb','auto','then','Bot\x20Mgr\x20>\x20','/off\x20-\x20stop\x20bot(s)\x0a','date-fns','toggleclient','bb-secure.json','username','compareSync','https://hodlerhacks.com','referer','Alerts','headless','new','secure','test','entries','3201070ZYAIrN','place-order','************','headers','build2','1000','Allow\x20login\x20from\x20IP\x20address\x20<b>','botname','2FA\x20login\x20rejected','restarting\x20Bot\x20','success',',\x20must\x20be\x20a\x204\x20digit\x20number','2FA\x20login\x20required','ipv6','from','removeListener','get-portfolio','search','stop','randomBytes','(((.+)+)+)+$','allow','Login\x20accepted','Invalid\x20Telegram\x20token','getHours','/:bot/coins','bot','66MupBnE','sendFile'];_0x24d8=function(){return _0x55dfa9;};return _0x24d8();}const childProcess=require(_0x37386b(0x2cc)),FileSync=require(_0x37386b(0x26f)),fs=require('fs'),fns=require(_0x37386b(0x283)),low=require(_0x37386b(0x27e)),path=require(_0x37386b(0x1bc)),crypto=require('crypto'),Crypt=require(_0x37386b(0x25f))[_0x37386b(0x258)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x37386b(0x1d2)),analyticsLib=require(_0x37386b(0x1ec))[_0x37386b(0x2c7)],googleAnalytics=require('@analytics/google-analytics')[_0x37386b(0x2c7)],ipaddr=require('ipaddr.js'),argv=require(_0x37386b(0x24c))(process[_0x37386b(0x209)][_0x37386b(0x1db)](0x2))[_0x37386b(0x209)],PORT=argv['port']||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x37386b(0x28e)](PORT)&&(console[_0x37386b(0x256)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x37386b(0x29b)),process[_0x37386b(0x213)](0x1));const HOST=argv[_0x37386b(0x1a7)]||null,userID=argv[_0x37386b(0x271)]||'';let bbpath=_0x37386b(0x1c6),bbpath2='';const botfile=_0x37386b(0x1f5),configfile=_0x37386b(0x215),settingsfile='bb-settings.json',securefile=_0x37386b(0x285);let validInstallation=!![];!fs[_0x37386b(0x2cf)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x37386b(0x20d)+userID+'/':bbpath+_0x37386b(0x20d),configbackuppath=configpath+_0x37386b(0x1d4);!fs[_0x37386b(0x2cf)](configpath)&&fs[_0x37386b(0x18c)](configpath);!fs[_0x37386b(0x2cf)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x37386b(0x194)]({'settings':{'timeshift':0x0}})[_0x37386b(0x23a)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x37386b(0x23a)]();let crypt=new Crypt({'md':_0x37386b(0x1e8),'rsaStandard':_0x37386b(0x24a)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x37386b(0x21d))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x37386b(0x189)),app=express(),http=require(_0x37386b(0x1da))[_0x37386b(0x21a)](app);app[_0x37386b(0x241)](express[_0x37386b(0x261)](path[_0x37386b(0x238)](__dirname,bbpath2,'build2'))),app[_0x37386b(0x241)](express[_0x37386b(0x261)](path[_0x37386b(0x238)](__dirname,bbpath2,_0x37386b(0x27b)))),app[_0x37386b(0x255)]('/',function(_0x101bd9,_0x403f7d){const _0x2b0de5=_0x37386b;_0x403f7d[_0x2b0de5(0x2ac)](path[_0x2b0de5(0x238)](__dirname,bbpath2,_0x2b0de5(0x294),_0x2b0de5(0x246)));}),app[_0x37386b(0x255)](_0x37386b(0x222),function(_0x31a649,_0x162960){const _0x42b61c=_0x37386b;_0x162960[_0x42b61c(0x2ac)](path[_0x42b61c(0x238)](__dirname,bbpath2,_0x42b61c(0x27b),'index.html'));}),app[_0x37386b(0x255)]('/:bot/portfolio',(_0x3cb15a,_0x57bbe4)=>{const _0x8e488c=_0x37386b;_0x57bbe4[_0x8e488c(0x2ac)](path[_0x8e488c(0x238)](__dirname,bbpath2,_0x8e488c(0x27b),'index.html'));}),app[_0x37386b(0x255)]('/:bot/performance',(_0x10b393,_0x1009ce)=>{const _0x4506ef=_0x37386b;_0x1009ce[_0x4506ef(0x2ac)](path['join'](__dirname,bbpath2,_0x4506ef(0x27b),_0x4506ef(0x246)));}),app[_0x37386b(0x255)](_0x37386b(0x2a9),(_0x476bf6,_0x4e8731)=>{const _0x1bdb01=_0x37386b;_0x4e8731['sendFile'](path[_0x1bdb01(0x238)](__dirname,bbpath2,'build',_0x1bdb01(0x246)));}),app[_0x37386b(0x255)](_0x37386b(0x2b1),(_0x3a3413,_0x48f6f1)=>{const _0x327f91=_0x37386b;_0x48f6f1[_0x327f91(0x2ac)](path[_0x327f91(0x238)](__dirname,bbpath2,'build',_0x327f91(0x246)));}),app[_0x37386b(0x255)]('/:bot/configuration',(_0x272af5,_0x121b5d)=>{const _0x454f31=_0x37386b;_0x121b5d[_0x454f31(0x2ac)](path[_0x454f31(0x238)](__dirname,bbpath2,_0x454f31(0x27b),'index.html'));}),app[_0x37386b(0x255)](_0x37386b(0x186),(_0x477609,_0x44db8f)=>{const _0x32253f=_0x37386b;_0x44db8f[_0x32253f(0x2ac)](path['join'](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x37386b(0x218)](PORT,HOST);else http[_0x37386b(0x218)](PORT);const io=require(_0x37386b(0x18a))(http,{}),analytics=analyticsLib({'app':'Balance\x20Bot','plugins':[googleAnalytics({'trackingId':_0x37386b(0x192)})]}),TelegramBot=require(_0x37386b(0x18f));let tgBot;if(settings[_0x37386b(0x22f)]&&settings[_0x37386b(0x22f)]!=''&&settings['telegramUsername']&&settings[_0x37386b(0x185)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x265761=_0x37386b;console[_0x265761(0x256)](''),console[_0x265761(0x256)](_0x265761(0x1a8)),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console[_0x265761(0x256)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x265761(0x1e1)](_0x3ef6e9=>{const _0x3b5c6f=_0x265761;if(_0x3ef6e9[_0x3b5c6f(0x22a)]==_0x3b5c6f(0x19b)||_0x3ef6e9[_0x3b5c6f(0x22a)]==_0x3b5c6f(0x28c))logging(_0x3b5c6f(0x20f)+_0x3ef6e9[_0x3b5c6f(0x214)]+'\x20|\x20'+_0x3ef6e9[_0x3b5c6f(0x297)]),startBot([_0x3ef6e9[_0x3b5c6f(0x214)],userID],{'cwd':bbpath},function(_0x53cbd4){if(_0x53cbd4)logging(_0x53cbd4);});else(_0x3ef6e9['status']==_0x3b5c6f(0x1a4)||_0x3ef6e9[_0x3b5c6f(0x22a)]==_0x3b5c6f(0x25b))&&logging(_0x3b5c6f(0x273)+_0x3ef6e9[_0x3b5c6f(0x214)]+_0x3b5c6f(0x220)+_0x3ef6e9[_0x3b5c6f(0x297)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x265761(0x256)](_0x265761(0x1a8)),console[_0x265761(0x256)]('');}function startSocket(){const _0x55e40f=_0x37386b;io['on'](_0x55e40f(0x26b),_0x43f9fe=>{const _0x57c3c6=_0x55e40f;let _0x216c14,_0x26cd6b,_0x1c54dd,_0x4d45e7,_0x4d2bff;const _0xc7290e=_0x43f9fe[_0x57c3c6(0x202)][_0x57c3c6(0x293)][_0x57c3c6(0x289)];_0x26cd6b=_0xc7290e[_0x57c3c6(0x204)](/bot[0-9]{3}/);if(_0x26cd6b)_0x1c54dd=_0x26cd6b[0x0][_0x57c3c6(0x204)](/[0-9]{3}/);if(_0x1c54dd)_0x216c14=_0x1c54dd[0x0];else _0x216c14=_0x57c3c6(0x17f);const _0x512107=_0x43f9fe['handshake']['auth']['encryptedUuid'];if(!_0x512107)_0x43f9fe['emit'](_0x57c3c6(0x22a),{'publicKey':secure[_0x57c3c6(0x254)]});else{_0x4d45e7=timelyDecrypt(_0x512107,![]);if(!_0x4d45e7)_0x43f9fe[_0x57c3c6(0x19d)](_0x57c3c6(0x22a),{'publicKey':secure['publicKey']});else{_0x4d2bff=normalizeIP(_0x43f9fe[_0x57c3c6(0x276)][_0x57c3c6(0x1c7)])[_0x57c3c6(0x24e)];if(!devices[_0x4d45e7])devices[_0x4d45e7]={'uuid':_0x4d45e7,'access':{'token':null}};devices[_0x4d45e7]['ip']=_0x4d2bff;const _0x483494=addClient(_0x43f9fe['id'],_0x4d45e7,_0x216c14);setAccess(_0x483494),_0x43f9fe['on'](_0x57c3c6(0x251),_0x479991=>{const _0x523a9f=_0x57c3c6,_0x45e805=timelyDecrypt(_0x479991[_0x523a9f(0x1b4)]);if(_0x45e805){_0x479991={'username':_0x479991[_0x523a9f(0x286)],'password':_0x45e805},devices[_0x4d45e7][_0x523a9f(0x2b0)]=validateCredentials(_0x479991,_0x4d45e7);if(devices[_0x4d45e7][_0x523a9f(0x2b0)][_0x523a9f(0x2a5)]==![]&&devices[_0x4d45e7][_0x523a9f(0x2b0)][_0x523a9f(0x1f7)]=='2FA\x20login\x20required')_0x43f9fe[_0x523a9f(0x19d)](_0x523a9f(0x22a),{'access':devices[_0x4d45e7][_0x523a9f(0x2b0)]}),loginAccess2FA(_0x4d45e7,_0x4d2bff);else{if(devices[_0x4d45e7][_0x523a9f(0x2b0)][_0x523a9f(0x2a5)]==![]&&devices[_0x4d45e7][_0x523a9f(0x2b0)]['reason']==_0x523a9f(0x1d1))_0x43f9fe[_0x523a9f(0x19d)]('status',{'access':devices[_0x4d45e7][_0x523a9f(0x2b0)]});else devices[_0x4d45e7][_0x523a9f(0x2b0)][_0x523a9f(0x2a5)]&&devices[_0x4d45e7][_0x523a9f(0x2b0)][_0x523a9f(0x1f7)]==_0x523a9f(0x1b5)&&(getClientsWithUuid(_0x4d45e7)['forEach'](_0x41c5f7=>{setAccess(_0x41c5f7);}),setTokenRefresh(_0x4d45e7),setSessionTimeout('login',_0x4d45e7));}}else logging(_0x523a9f(0x257));}),_0x43f9fe['on']('reset-password',()=>{resetPassword();}),_0x43f9fe['on'](_0x57c3c6(0x1ce),_0x5acd67=>{removeClient(_0x43f9fe['id']);});}}});}function initClient(_0x241299){const _0x527f97=_0x37386b;if(_0x241299!=_0x527f97(0x17f)&&config[_0x527f97(0x2ad)]!=''){if(pid[_0x241299])pid[_0x241299]['send']({'function':_0x527f97(0x1c9),'args':null});}}function getSocket(_0x346251){const _0x252e3a=_0x37386b;return io[_0x252e3a(0x18b)][_0x252e3a(0x18b)][_0x252e3a(0x255)](_0x346251);}function setAccess(_0x1a16a8){const _0x219b1b=_0x37386b,_0x3c2dca=getSocket(_0x1a16a8['id']),_0x4c7e08=_0x1a16a8[_0x219b1b(0x1bf)],_0x2320e6=_0x1a16a8[_0x219b1b(0x2aa)];devices[_0x4c7e08][_0x219b1b(0x2b0)]=validateAccess(devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x278)],_0x4c7e08),_0x3c2dca[_0x219b1b(0x238)](_0x4c7e08);if(devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x2a5)]){_0x3c2dca[_0x219b1b(0x238)](_0x2320e6);if(_0x2320e6=='botmanager')initializeSocketBotManager(_0x3c2dca);else initializeSocketBot(_0x3c2dca);initClient(_0x2320e6);}devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x278)]&&devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x1f7)]==_0x219b1b(0x217)&&setSessionTimeout('2FA',_0x4c7e08),devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x278)]&&devices[_0x4c7e08]['access']['reason']==_0x219b1b(0x272)&&setSessionTimeout(_0x219b1b(0x251),_0x4c7e08),_0x3c2dca[_0x219b1b(0x19d)](_0x219b1b(0x22a),{'status':_0x1a16a8[_0x219b1b(0x2ae)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4c7e08][_0x219b1b(0x2b0)],'externalip':devices[_0x4c7e08]['ip'],'publicKey':secure[_0x219b1b(0x254)],'validInstallation':validInstallation}),devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x2a5)]==![]&&devices[_0x4c7e08][_0x219b1b(0x2b0)][_0x219b1b(0x1f7)]==_0x219b1b(0x1fb)&&temporaryAccess2FA(_0x4c7e08,devices[_0x4c7e08]['ip']);}function _0x5c62(_0x100c3d,_0x4883aa){const _0x4ea87d=_0x24d8();return _0x5c62=function(_0x1049ef,_0x30e9b7){_0x1049ef=_0x1049ef-0x17b;let _0x24d86d=_0x4ea87d[_0x1049ef];return _0x24d86d;},_0x5c62(_0x100c3d,_0x4883aa);}function setSessionTimeout(_0x4fb00a,_0x2a79ad){const _0x2bc1e2=_0x37386b;let _0x277899;if(_0x4fb00a==_0x2bc1e2(0x251))_0x277899=loginExpiry*0x3c*0x3e8;else _0x277899=devices[_0x2a79ad][_0x2bc1e2(0x25e)][_0x2bc1e2(0x25a)]*0x3c*0x3e8-(new Date()[_0x2bc1e2(0x1e7)]()-devices[_0x2a79ad]['telegramIpApproval'][_0x2bc1e2(0x1d7)]);if(devices[_0x2a79ad][_0x2bc1e2(0x19f)])clearTimeout(devices[_0x2a79ad]['pidExpireLogin']);devices[_0x2a79ad][_0x2bc1e2(0x19f)]=setTimeout(()=>{const _0x472bdf=_0x2bc1e2;if(devices[_0x2a79ad]['pidRefreshToken'])clearTimeout(devices[_0x2a79ad][_0x472bdf(0x226)]);removeSocketListeners(_0x2a79ad),addBlacklist(_0x2a79ad),devices[_0x2a79ad][_0x472bdf(0x25e)]=null,devices[_0x2a79ad][_0x472bdf(0x184)]=null,devices[_0x2a79ad][_0x472bdf(0x2b0)][_0x472bdf(0x278)]=null,devices[_0x2a79ad][_0x472bdf(0x2b0)]=validateAccess(devices[_0x2a79ad][_0x472bdf(0x2b0)][_0x472bdf(0x278)],_0x2a79ad),!(devices[_0x2a79ad][_0x472bdf(0x2b0)]['allow']&&devices[_0x2a79ad]['access']['reason']==_0x472bdf(0x211))&&(_0x4fb00a==_0x472bdf(0x251)?io['to'](_0x2a79ad)[_0x472bdf(0x19d)](_0x472bdf(0x22a),{'access':{'allow':![],'reason':_0x472bdf(0x1de),'token':null}}):io['to'](_0x2a79ad)[_0x472bdf(0x19d)](_0x472bdf(0x22a),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x2a79ad][_0x472bdf(0x2b0)][_0x472bdf(0x278)]=null;},_0x277899);}function setTokenRefresh(_0xe2a052){const _0x403bca=_0x37386b;if(devices[_0xe2a052][_0x403bca(0x226)])clearTimeout(devices[_0xe2a052]['pidRefreshToken']);devices[_0xe2a052]['pidRefreshToken']=setTimeout(()=>{const _0x27b83f=_0x403bca;getClientsWithUuid(_0xe2a052)[_0x27b83f(0x248)]!=0x0?(devices[_0xe2a052][_0x27b83f(0x2b0)]=refreshToken(_0xe2a052),io['to'](_0xe2a052)[_0x27b83f(0x19d)](_0x27b83f(0x22a),{'status':_0x27b83f(0x1a1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xe2a052][_0x27b83f(0x2b0)],'externalip':devices[_0xe2a052]['ip'],'publicKey':secure[_0x27b83f(0x254)],'validInstallation':validInstallation}),setTokenRefresh(_0xe2a052)):clearTimeout(devices[_0xe2a052][_0x27b83f(0x226)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x425d9c){const _0x37bda4=_0x37386b,_0x2bc327=getClient(_0x425d9c['id'])[_0x37bda4(0x1bf)];_0x425d9c[_0x37bda4(0x19d)]('bots',config),_0x425d9c['emit'](_0x37bda4(0x1fd),cleanSettings()),_0x425d9c['on'](_0x37bda4(0x1cb),_0x582b31=>{if(validateAccess(_0x582b31,_0x2bc327)['allow'])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x425d9c['on'](_0x37bda4(0x1b9),(_0x406b17,_0x1b2710)=>{const _0x3bd060=_0x37bda4;if(validateAccess(_0x1b2710,_0x2bc327)['allow'])toggleBot(_0x406b17[_0x3bd060(0x214)],_0x406b17[_0x3bd060(0x22a)],_0x406b17[_0x3bd060(0x195)]);else logging(_0x3bd060(0x26a));}),_0x425d9c['on'](_0x37bda4(0x1ba),(_0x3775d1,_0x5ed632)=>{const _0x458134=_0x37bda4;if(validateAccess(_0x5ed632,_0x2bc327)['allow'])deleteBot(_0x3775d1);else logging(_0x458134(0x1c8));}),_0x425d9c['on'](_0x37bda4(0x244),(_0x1da17d,_0x277c90)=>{const _0x59b1de=_0x37bda4;if(validateAccess(_0x277c90,_0x2bc327)[_0x59b1de(0x2a5)])storeSettings(_0x1da17d,!![]);else logging(_0x59b1de(0x224));}),_0x425d9c['on'](_0x37bda4(0x1f4),_0x1326f3=>{const _0x3beff1=_0x37bda4;if(validateAccess(_0x1326f3,_0x2bc327)[_0x3beff1(0x2a5)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x425d9c['on'](_0x37bda4(0x2b9),_0x5e9479=>{const _0x1b845e=_0x37bda4;if(validateAccess(_0x5e9479,_0x2bc327)[_0x1b845e(0x2a5)]){if(devices[_0x2bc327][_0x1b845e(0x226)])clearTimeout(devices[_0x2bc327][_0x1b845e(0x226)]);if(devices[_0x2bc327][_0x1b845e(0x19f)])clearTimeout(devices[_0x2bc327][_0x1b845e(0x19f)]);removeSocketListeners(getClient(_0x425d9c['id'])[_0x1b845e(0x1bf)]),addBlacklist(_0x2bc327),devices[_0x2bc327]['telegramIpApproval']=null,devices[_0x2bc327][_0x1b845e(0x184)]=null,devices[_0x2bc327][_0x1b845e(0x2b0)][_0x1b845e(0x278)]=null,io['to'](getClient(_0x425d9c['id'])[_0x1b845e(0x1bf)])[_0x1b845e(0x19d)](_0x1b845e(0x22a),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x1b845e(0x1cc));});}function initializeSocketBot(_0xe151c8){const _0x5ba59f=_0x37386b,_0x5be53f=getClient(_0xe151c8['id'])[_0x5ba59f(0x2aa)],_0x13e38b=getClient(_0xe151c8['id'])['uuid'];_0xe151c8['on']('get-logs',(_0x10eb9b,_0x3d399c)=>{const _0x1ac9c3=_0x5ba59f;if(validateAccess(_0x3d399c,_0x13e38b)[_0x1ac9c3(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0x1ac9c3(0x1be)]({'function':_0x1ac9c3(0x236),'args':_0x10eb9b});}else logging(_0x1ac9c3(0x1e4));}),_0xe151c8['on'](_0x5ba59f(0x19e),(_0x32bc91,_0x33faa6)=>{const _0x368cdb=_0x5ba59f;if(validateAccess(_0x33faa6,_0x13e38b)[_0x368cdb(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0x368cdb(0x1be)]({'function':'deleteHistoryAlerts','args':_0x32bc91});}else logging(_0x368cdb(0x245));}),_0xe151c8['on'](_0x5ba59f(0x2a0),(_0x14f4e1,_0x1bbdfc)=>{const _0xddcd81=_0x5ba59f;if(validateAccess(_0x1bbdfc,_0x13e38b)[_0xddcd81(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0xddcd81(0x1be)]({'function':_0xddcd81(0x1ae),'args':_0x14f4e1});}else logging(_0xddcd81(0x266));}),_0xe151c8['on']('store-configuration',(_0xa98fb1,_0x170fb0)=>{const _0x51bb75=_0x5ba59f;if(validateAccess(_0x170fb0,_0x13e38b)[_0x51bb75(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0x51bb75(0x1be)]({'function':_0x51bb75(0x1c0),'args':_0xa98fb1});}else logging(_0x51bb75(0x19a));}),_0xe151c8['on'](_0x5ba59f(0x1c4),(_0x219154,_0x113122)=>{const _0xca3736=_0x5ba59f;if(validateAccess(_0x113122,_0x13e38b)[_0xca3736(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f]['send']({'function':_0xca3736(0x2ca),'args':_0x219154});}else logging(_0xca3736(0x198));}),_0xe151c8['on']('get-starting-balances',_0x445f99=>{const _0x3a9c1d=_0x5ba59f;if(validateAccess(_0x445f99,_0x13e38b)[_0x3a9c1d(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0x3a9c1d(0x1be)]({'function':_0x3a9c1d(0x247),'args':null});}else logging(_0x3a9c1d(0x2bb));}),_0xe151c8['on'](_0x5ba59f(0x291),(_0x588d55,_0x3453c9)=>{const _0x495704=_0x5ba59f;if(validateAccess(_0x3453c9,_0x13e38b)[_0x495704(0x2a5)]){if(pid[_0x5be53f])pid[_0x5be53f][_0x495704(0x1be)]({'function':_0x495704(0x1a2),'args':_0x588d55});}else logging(_0x495704(0x1bb));}),_0xe151c8['on']('cancel-loading',_0x34cee2=>{const _0x418cc3=_0x5ba59f;if(validateAccess(_0x34cee2,_0x13e38b)['allow']){if(pid[_0x5be53f])pid[_0x5be53f][_0x418cc3(0x1be)]({'function':_0x418cc3(0x21e),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0xe151c8['on'](_0x5ba59f(0x2b9),_0x423b5f=>{const _0xc591e1=_0x5ba59f;if(validateAccess(_0x423b5f,_0x13e38b)[_0xc591e1(0x2a5)]){if(devices[_0x13e38b][_0xc591e1(0x226)])clearTimeout(devices[_0x13e38b][_0xc591e1(0x226)]);if(devices[_0x13e38b][_0xc591e1(0x19f)])clearTimeout(devices[_0x13e38b][_0xc591e1(0x19f)]);removeSocketListeners(getClient(_0xe151c8['id'])['uuid']),addBlacklist(_0x13e38b),devices[_0x13e38b][_0xc591e1(0x25e)]=null,devices[_0x13e38b]['telegram2FaApproval']=null,devices[_0x13e38b]['access']['token']=null,io['to'](getClient(_0xe151c8['id'])[_0xc591e1(0x1bf)])[_0xc591e1(0x19d)](_0xc591e1(0x22a),{'access':{'allow':![],'reason':_0xc591e1(0x1ca),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x2499d4){const _0x2bdc41=_0x37386b;getClientsWithUuid(_0x2499d4)[_0x2bdc41(0x1e1)](_0x188cae=>{const _0x3a7f4d=_0x2bdc41;getSocket(_0x188cae['id'])[_0x3a7f4d(0x1e5)]();});}function cleanSettings(){const _0x3b9440=_0x37386b;let _0x577dd2=settings;return settings[_0x3b9440(0x22f)]&&settings['telegramToken']!=''&&(_0x577dd2={..._0x577dd2,'telegramToken':_0x3b9440(0x292)}),settings[_0x3b9440(0x262)]&&settings['bbPassword']!=''&&(_0x577dd2={..._0x577dd2,'bbPassword':'************'}),_0x577dd2;}function updateBB(){const _0x3686a9=_0x37386b;installingUpdate=!![],config[_0x3686a9(0x1e1)](_0x383803=>{const _0x2d21d0=_0x3686a9;restartBot(_0x383803[_0x2d21d0(0x214)]);}),process[_0x3686a9(0x1be)]({'update':!![]},_0x164a2b=>{});}function startBot(_0x38064d,_0x1f0acd,_0x4d5693){const _0x44c96e=_0x37386b;let _0x308848=![];const _0x240ac4=_0x38064d[0x0];_0x1f0acd={..._0x1f0acd,'stdio':['inherit',_0x44c96e(0x240),_0x44c96e(0x240),_0x44c96e(0x1f0)]},pid[_0x240ac4]=childProcess['fork'](botfile,_0x38064d,_0x1f0acd),pid[_0x240ac4]['on'](_0x44c96e(0x1c2),_0x46a134=>{const _0x1b538a=_0x44c96e;switch(Object[_0x1b538a(0x269)](_0x46a134)[0x0]){case _0x1b538a(0x297):updateBotName(_0x240ac4,_0x46a134[_0x1b538a(0x297)]);break;case _0x1b538a(0x22a):updateStatus(_0x240ac4,_0x46a134['status']);break;case'live':updateLive(_0x240ac4,_0x46a134[_0x1b538a(0x195)]);break;case _0x1b538a(0x237):updateLive(_0x240ac4,_0x46a134[_0x1b538a(0x237)]),io['to'](_0x240ac4)[_0x1b538a(0x19d)](_0x1b538a(0x22a),{'access':{'allow':![],'reason':_0x1b538a(0x2c6),'token':null}});break;case _0x1b538a(0x2a2):_0x46a134[_0x1b538a(0x2a2)]==_0x1b538a(0x1c1)&&restartBot(_0x240ac4);_0x46a134[_0x1b538a(0x2a2)]==_0x1b538a(0x1b0)&&toggleBot(_0x240ac4,_0x1b538a(0x1a4),'stopped');break;case _0x1b538a(0x1df):sendTelegram(_0x240ac4,_0x46a134[_0x1b538a(0x1df)]);break;case _0x1b538a(0x1f2):io['to'](_0x240ac4)[_0x1b538a(0x19d)](_0x46a134[_0x1b538a(0x1f2)],_0x46a134[_0x1b538a(0x1f1)]);break;}}),pid[_0x240ac4]['on'](_0x44c96e(0x270),function(_0x1b609c){if(_0x308848)return;_0x308848=!![],_0x4d5693(_0x1b609c);}),pid[_0x240ac4]['on'](_0x44c96e(0x213),function(_0x225d9c){const _0x3c6a2c=_0x44c96e;if(installingUpdate)return;if(_0x308848)return;_0x308848=!![],_0x4d5693(null);const _0x396347=dbConfig['get'](_0x3c6a2c(0x26c))[_0x3c6a2c(0x208)]({'botID':_0x240ac4})['value']();_0x396347&&(_0x396347['status']=='enabled'||_0x396347[_0x3c6a2c(0x22a)]==_0x3c6a2c(0x28c))&&(updateLive(_0x240ac4,_0x3c6a2c(0x191)),logging(_0x3c6a2c(0x299)+_0x240ac4),startBot([_0x240ac4,userID],{'cwd':bbpath},function(_0x28c9b2){if(_0x28c9b2)logging(_0x28c9b2);}));});}function stopBot(_0x3bc151){const _0x378da1=_0x37386b;getClientsWithBotID(_0x3bc151)['forEach'](_0x449e11=>{const _0x3c75aa=_0x5c62;getSocket(_0x449e11['id'])[_0x3c75aa(0x1ce)](!![]),removeClient(_0x449e11['id']);});if(pid[_0x3bc151])pid[_0x3bc151][_0x378da1(0x1b0)]();}function restartBot(_0x524901){if(pid[_0x524901])pid[_0x524901]['kill']();}function addBot(){const _0x54f3d1=_0x37386b;let _0x56eb46;for(let _0x22fcfd=0x1;_0x22fcfd<0x3e9;_0x22fcfd++){_0x56eb46=_0x22fcfd['toString']()['padStart'](0x3,'0');let _0x4b3e21=config[_0x54f3d1(0x208)](_0x67faf0=>_0x67faf0['botID']==_0x56eb46);if(!_0x4b3e21)break;}if(_0x56eb46===_0x54f3d1(0x295)){logging(_0x54f3d1(0x243));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x56eb46),dbConfig['get']('bots')[_0x54f3d1(0x1d5)]({'botID':_0x56eb46,'botname':'Bot\x20'+_0x56eb46,'status':'new','live':''})[_0x54f3d1(0x23a)](),startBot([_0x56eb46,userID],{'cwd':bbpath},function(_0x41ecfc){if(_0x41ecfc)logging(_0x41ecfc);}),config=getConfiguration(),io['to'](_0x54f3d1(0x17f))[_0x54f3d1(0x19d)](_0x54f3d1(0x26c),config);}function deleteBot(_0x25a657){const _0x5229e5=_0x37386b;getClientsWithBotID(_0x25a657)['forEach'](_0x3c52ba=>{const _0x237087=_0x5c62;getSocket(_0x3c52ba['id'])[_0x237087(0x1ce)](!![]),removeClient(_0x3c52ba['id']);}),dbConfig[_0x5229e5(0x255)](_0x5229e5(0x26c))[_0x5229e5(0x2bc)]({'botID':_0x25a657})[_0x5229e5(0x23a)](),logging('deleted\x20Bot\x20'+_0x25a657),stopBot(_0x25a657);try{fs[_0x5229e5(0x24f)](path['join'](configpath,_0x5229e5(0x234)+_0x25a657+_0x5229e5(0x2b2))),fs[_0x5229e5(0x24f)](path['join'](configpath,_0x5229e5(0x234)+_0x25a657+_0x5229e5(0x277))),fs[_0x5229e5(0x24f)](path['join'](configpath,_0x5229e5(0x234)+_0x25a657+_0x5229e5(0x1ee))),fs[_0x5229e5(0x24f)](path['join'](configpath,_0x5229e5(0x234)+_0x25a657+'-results.json'));}catch(_0x3cadc3){if(_0x3cadc3)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x3cadc3);}config=getConfiguration(),io['to'](_0x5229e5(0x17f))['emit'](_0x5229e5(0x26c),config);}function toggleBot(_0x4e8067,_0x2330eb,_0x38f8e0){const _0x22c78c=_0x37386b;dbConfig[_0x22c78c(0x255)](_0x22c78c(0x26c))[_0x22c78c(0x208)]({'botID':_0x4e8067})['assign']({'status':_0x2330eb})[_0x22c78c(0x1aa)]({'live':_0x38f8e0})[_0x22c78c(0x23a)]();if(_0x2330eb=='enabled'||_0x2330eb==_0x22c78c(0x28c))logging(_0x22c78c(0x233)+_0x4e8067),startBot([_0x4e8067,userID],{'cwd':bbpath},function(_0x451154){if(_0x451154)logging(_0x451154);});else(_0x2330eb==_0x22c78c(0x1a4)||_0x2330eb==_0x22c78c(0x25b))&&(logging('disabled\x20Bot\x20'+_0x4e8067),stopBot(_0x4e8067));config=getConfiguration(),io['to'](_0x22c78c(0x17f))[_0x22c78c(0x19d)](_0x22c78c(0x26c),config);}function toggleStatus(_0x28f84f){const _0x2559dc=_0x37386b;let _0x548c25=dbConfig[_0x2559dc(0x255)](_0x2559dc(0x26c))[_0x2559dc(0x208)]({'botID':_0x28f84f})[_0x2559dc(0x268)](),_0x13483a;if(_0x548c25['status']==='enabled')_0x13483a=_0x2559dc(0x1a4);else{if(_0x548c25[_0x2559dc(0x22a)]==='new')_0x13483a='new-disabled';else{if(_0x548c25['status']===_0x2559dc(0x25b))_0x13483a=_0x2559dc(0x28c);else{if(_0x548c25[_0x2559dc(0x22a)]===_0x2559dc(0x1a4))_0x13483a=_0x2559dc(0x19b);}}}return _0x13483a;}function updateStatus(_0x42e9fb,_0x3113e1){const _0x4e0803=_0x37386b;dbConfig[_0x4e0803(0x255)](_0x4e0803(0x26c))[_0x4e0803(0x208)]({'botID':_0x42e9fb})[_0x4e0803(0x1aa)]({'status':_0x3113e1})[_0x4e0803(0x23a)](),config=getConfiguration(),io['to'](_0x4e0803(0x17f))['emit']('bots',config);}function updateLive(_0x35e563,_0x4df942){const _0x576acc=_0x37386b;dbConfig[_0x576acc(0x255)](_0x576acc(0x26c))[_0x576acc(0x208)]({'botID':_0x35e563})['assign']({'live':_0x4df942})[_0x576acc(0x23a)](),config=getConfiguration(),io['to'](_0x576acc(0x17f))[_0x576acc(0x19d)](_0x576acc(0x26c),config);}function updateBotName(_0x7e3130,_0x117e2c){const _0x2f6521=_0x37386b;dbConfig[_0x2f6521(0x255)]('bots')['find']({'botID':_0x7e3130})['assign']({'botname':_0x117e2c})['write'](),config=getConfiguration(),io['to'](_0x2f6521(0x17f))[_0x2f6521(0x19d)]('bots',config);}function toggleBotMode(_0x29ff46){const _0x2a948a=_0x37386b;if(pid[_0x29ff46])pid[_0x29ff46][_0x2a948a(0x1be)]({'function':_0x2a948a(0x284),'args':null});else{const _0x490248=configpath+_0x2a948a(0x234)+_0x29ff46+_0x2a948a(0x2b2),_0x1fa43e=fs[_0x2a948a(0x1e9)](_0x490248),_0x3a49e7=JSON[_0x2a948a(0x17e)](_0x1fa43e),_0x4015e1=_0x3a49e7[_0x2a948a(0x2aa)][0x0]['headless'];_0x3a49e7[_0x2a948a(0x2aa)][0x0][_0x2a948a(0x28b)]=!_0x4015e1;const _0x20107d=JSON[_0x2a948a(0x23e)](_0x3a49e7,null,0x2);fs['writeFileSync'](_0x490248,_0x20107d);}}function telegramError(_0x6c6194){const _0x115cd6=_0x37386b;console[_0x115cd6(0x256)](getTimeStamp()+_0x115cd6(0x2bd));}function validateTelegram(_0xde48b7){const _0x36b8a2=_0x37386b;if(_0xde48b7[_0x36b8a2(0x29e)][_0x36b8a2(0x286)]!=settings[_0x36b8a2(0x185)]&&'@'+_0xde48b7[_0x36b8a2(0x29e)][_0x36b8a2(0x286)]!=settings[_0x36b8a2(0x185)])return tgBot[_0x36b8a2(0x23f)](_0xde48b7['chat']['id'],_0x36b8a2(0x263),{'parse_mode':_0x36b8a2(0x1d6)})['catch'](_0x570d7d=>{telegramError(_0x570d7d);}),![];return!![];}async function initTelegram(){const _0x246b2e=_0x37386b;if(tgBot)tgBot[_0x246b2e(0x1ab)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x7b6cd2=_0x246b2e(0x2c2);_0x7b6cd2+='\x0a',_0x7b6cd2+=_0x246b2e(0x229),_0x7b6cd2+='/disable\x20-\x20disable\x20notifications\x0a',_0x7b6cd2+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x7b6cd2+=_0x246b2e(0x1bd),_0x7b6cd2+=_0x246b2e(0x188),_0x7b6cd2+=_0x246b2e(0x282),_0x7b6cd2+=_0x246b2e(0x1e0),_0x7b6cd2+=_0x246b2e(0x181),_0x7b6cd2+=_0x246b2e(0x1d0),_0x7b6cd2+=_0x246b2e(0x2c9);let _0x529b43=_0x246b2e(0x25d);_0x529b43+='\x0a',_0x529b43+=_0x7b6cd2,tgBot['onText'](/\/start/,_0x1a0b7d=>{const _0x55231=_0x246b2e;if(!validateTelegram(_0x1a0b7d))return;if(settings[_0x55231(0x24b)]!=_0x1a0b7d[_0x55231(0x2b3)]['id'])updateSetting(_0x55231(0x24b),_0x1a0b7d[_0x55231(0x2b3)]['id']);updateSetting(_0x55231(0x1fa),!![]),tgBot[_0x55231(0x23f)](_0x1a0b7d[_0x55231(0x2b3)]['id'],_0x529b43)['catch'](_0x37f61d=>{telegramError(_0x37f61d);});}),tgBot[_0x246b2e(0x22b)](/\/enable/,_0x1cf116=>{const _0x507f8c=_0x246b2e;if(!validateTelegram(_0x1cf116))return;if(settings['telegramChatId']!=_0x1cf116[_0x507f8c(0x2b3)]['id'])updateSetting('telegramChatId',_0x1cf116[_0x507f8c(0x2b3)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x507f8c(0x23f)](_0x1cf116[_0x507f8c(0x2b3)]['id'],'Notifications\x20enabled')['catch'](_0x5130a1=>{telegramError(_0x5130a1);});}),tgBot[_0x246b2e(0x22b)](/\/config/,async _0x211d85=>{const _0x362d69=_0x246b2e;if(!validateTelegram(_0x211d85))return;tgBot[_0x362d69(0x29f)](_0x362d69(0x1b8)),tgBot[_0x362d69(0x23f)](_0x211d85[_0x362d69(0x2b3)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x362d69(0x265),'callback_data':'orders'},{'text':_0x362d69(0x28a),'callback_data':_0x362d69(0x200)},{'text':_0x362d69(0x2c0),'callback_data':_0x362d69(0x1fe)}]]}})[_0x362d69(0x2af)](_0x5d001b=>{telegramError(_0x5d001b);}),tgBot['on']('callback_query',async _0x17042b=>{const _0x13ec9b=_0x362d69,_0x1f02a6=_0x17042b[_0x13ec9b(0x253)],_0x10aab6=_0x17042b[_0x13ec9b(0x1c2)];tgBot[_0x13ec9b(0x221)](_0x17042b['id'])[_0x13ec9b(0x280)](async()=>{const _0x3d5940=_0x13ec9b;_0x1f02a6=='orders'&&(updateSetting(_0x3d5940(0x1dc),_0x3d5940(0x1ef)),updateSetting('telegramEnabled',!![]),await tgBot[_0x3d5940(0x23f)](_0x10aab6[_0x3d5940(0x2b3)]['id'],_0x3d5940(0x197))['catch'](_0x3a9d8f=>{telegramError(_0x3a9d8f);}));_0x1f02a6==_0x3d5940(0x200)&&(updateSetting(_0x3d5940(0x1dc),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x3d5940(0x23f)](_0x10aab6[_0x3d5940(0x2b3)]['id'],_0x3d5940(0x2cb))[_0x3d5940(0x2af)](_0x3689fc=>{telegramError(_0x3689fc);}));_0x1f02a6==_0x3d5940(0x1fe)&&(updateSetting(_0x3d5940(0x1dc),_0x3d5940(0x1fe)),updateSetting(_0x3d5940(0x1fa),!![]),await tgBot[_0x3d5940(0x23f)](_0x10aab6['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x3d5940(0x2af)](_0x38c97f=>{telegramError(_0x38c97f);}));if(!settings[_0x3d5940(0x24b)])tgBot['sendMessage'](_0x10aab6[_0x3d5940(0x2b3)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x3d5940(0x2af)](_0x23aecd=>{telegramError(_0x23aecd);});}),tgBot['removeListener'](_0x13ec9b(0x1b8));});}),tgBot[_0x246b2e(0x22b)](/\/status/,_0x5b3fdb=>{const _0x2dce87=_0x246b2e;if(!validateTelegram(_0x5b3fdb))return;const _0x2c3a62=getBotsWithMode();let _0x11a1ca=_0x2dce87(0x2c5);config['forEach'](_0x35bb12=>{const _0x4cf685=_0x2dce87,_0x1d0b46=_0x2c3a62[_0x4cf685(0x208)](_0x350e53=>_0x350e53[_0x4cf685(0x214)]==_0x35bb12[_0x4cf685(0x214)])[_0x4cf685(0x20c)];_0x11a1ca+=_0x4cf685(0x267)+_0x35bb12['botID']+':\x20'+_0x35bb12['status']+'\x20|\x20'+_0x1d0b46+_0x4cf685(0x220)+_0x35bb12[_0x4cf685(0x195)]+'\x0a';}),_0x11a1ca+='\x0a',_0x11a1ca+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x11a1ca+=!settings[_0x2dce87(0x1fa)]?_0x2dce87(0x1d9):_0x2dce87(0x1b7),_0x11a1ca+=settings['telegramEnabled']?settings[_0x2dce87(0x1dc)]==_0x2dce87(0x1fe)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2dce87(0x1f8)+settings[_0x2dce87(0x1dc)]+_0x2dce87(0x23c):'',tgBot[_0x2dce87(0x23f)](_0x5b3fdb[_0x2dce87(0x2b3)]['id'],_0x11a1ca,{'parse_mode':'HTML'})['catch'](_0x41e0c1=>{telegramError(_0x41e0c1);});}),tgBot[_0x246b2e(0x22b)](/\/restart/,_0x3d39bc=>{const _0x35e3ce=_0x246b2e;if(!validateTelegram(_0x3d39bc))return;tgBot[_0x35e3ce(0x29f)](_0x35e3ce(0x1b8));const _0x1946fe=getEnabledBots();if(_0x1946fe['length']==0x0)tgBot['sendMessage'](_0x3d39bc['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2cc906=>{telegramError(_0x2cc906);});else{if(_0x1946fe['length']>0x1)_0x1946fe[_0x35e3ce(0x1d5)]({'botID':'all'});let _0x2c342e=[],_0x338d08=[];const _0x13f636=_0x1946fe[_0x35e3ce(0x248)]%0x4==0x0||_0x1946fe[_0x35e3ce(0x248)]%0x4==0x3||_0x1946fe[_0x35e3ce(0x248)]%0x3==0x1?0x4:0x3;let _0x537133=0x0;_0x1946fe[_0x35e3ce(0x1e1)]((_0x3694c3,_0x51ad52)=>{const _0x5902a8=_0x35e3ce;if(_0x51ad52%_0x13f636==0x0)_0x338d08=[];_0x338d08[_0x5902a8(0x1d5)]({'text':_0x3694c3['botID']==_0x5902a8(0x1fe)?_0x5902a8(0x19c):_0x5902a8(0x267)+_0x3694c3['botID'],'callback_data':_0x3694c3['botID']}),_0x51ad52%_0x13f636==0x0&&(_0x2c342e[_0x537133]=_0x338d08,_0x537133++);}),tgBot[_0x35e3ce(0x23f)](_0x3d39bc['chat']['id'],_0x35e3ce(0x1cf),{'reply_markup':{'inline_keyboard':_0x2c342e}})['catch'](_0x5b889c=>{telegramError(_0x5b889c);}),tgBot['on'](_0x35e3ce(0x1b8),async _0x29dd7b=>{const _0x18138f=_0x35e3ce,_0xe27204=_0x29dd7b[_0x18138f(0x253)],_0x251b60=_0x29dd7b['message'];tgBot[_0x18138f(0x221)](_0x29dd7b['id'])[_0x18138f(0x280)](async()=>{const _0x39a1db=_0x18138f;_0xe27204==_0x39a1db(0x1fe)?(tgBot['sendMessage'](_0x251b60[_0x39a1db(0x2b3)]['id'],_0x39a1db(0x2c4))[_0x39a1db(0x2af)](_0x28c566=>{telegramError(_0x28c566);}),config[_0x39a1db(0x1e1)](_0x2b6f3e=>{const _0x4c3f39=_0x39a1db;restartBot(_0x2b6f3e[_0x4c3f39(0x214)]);})):(tgBot[_0x39a1db(0x23f)](_0x251b60['chat']['id'],_0x39a1db(0x2d0)+_0xe27204)[_0x39a1db(0x2af)](_0x7742d3=>{telegramError(_0x7742d3);}),restartBot(_0xe27204));}),tgBot[_0x18138f(0x29f)](_0x18138f(0x1b8));});}}),tgBot[_0x246b2e(0x22b)](/\/on/,_0xf858d9=>{const _0x12e534=_0x246b2e;if(!validateTelegram(_0xf858d9))return;tgBot[_0x12e534(0x29f)](_0x12e534(0x1b8));const _0x4b29b6=getDisabledBots();if(_0x4b29b6[_0x12e534(0x248)]==0x0)tgBot['sendMessage'](_0xf858d9[_0x12e534(0x2b3)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x9171ad=>{telegramError(_0x9171ad);});else{if(_0x4b29b6['length']>0x1)_0x4b29b6[_0x12e534(0x1d5)]({'botID':'all'});let _0x2f1959=[],_0x139fe8=[];const _0x53decb=_0x4b29b6[_0x12e534(0x248)]%0x4==0x0||_0x4b29b6['length']%0x4==0x3||_0x4b29b6[_0x12e534(0x248)]%0x3==0x1?0x4:0x3;let _0x24fe31=0x0;_0x4b29b6[_0x12e534(0x1e1)]((_0x27edc4,_0x209679)=>{const _0x4bc546=_0x12e534;if(_0x209679%_0x53decb==0x0)_0x139fe8=[];_0x139fe8['push']({'text':_0x27edc4[_0x4bc546(0x214)]==_0x4bc546(0x1fe)?_0x4bc546(0x19c):'Bot\x20'+_0x27edc4[_0x4bc546(0x214)],'callback_data':_0x27edc4[_0x4bc546(0x214)]}),_0x209679%_0x53decb==0x0&&(_0x2f1959[_0x24fe31]=_0x139fe8,_0x24fe31++);}),tgBot['sendMessage'](_0xf858d9[_0x12e534(0x2b3)]['id'],_0x12e534(0x18e),{'reply_markup':{'inline_keyboard':_0x2f1959}})[_0x12e534(0x2af)](_0x12d48b=>{telegramError(_0x12d48b);}),tgBot['on']('callback_query',async _0x3bc5e7=>{const _0x3b4863=_0x12e534,_0x12fdca=_0x3bc5e7['data'],_0x2e6ea2=_0x3bc5e7[_0x3b4863(0x1c2)];tgBot['answerCallbackQuery'](_0x3bc5e7['id'])[_0x3b4863(0x280)](async()=>{const _0x387ee2=_0x3b4863;_0x12fdca==_0x387ee2(0x1fe)?(tgBot[_0x387ee2(0x23f)](_0x2e6ea2[_0x387ee2(0x2b3)]['id'],_0x387ee2(0x23d))[_0x387ee2(0x2af)](_0x5f5430=>{telegramError(_0x5f5430);}),_0x4b29b6[_0x387ee2(0x1e1)](_0x1643ed=>{const _0x5723fa=_0x387ee2;if(_0x1643ed[_0x5723fa(0x214)]!=_0x5723fa(0x1fe))toggleBot(_0x1643ed[_0x5723fa(0x214)],toggleStatus(_0x1643ed['botID']),_0x5723fa(0x191));})):(tgBot[_0x387ee2(0x23f)](_0x2e6ea2[_0x387ee2(0x2b3)]['id'],_0x387ee2(0x232)+_0x12fdca)[_0x387ee2(0x2af)](_0x48eaeb=>{telegramError(_0x48eaeb);}),toggleBot(_0x12fdca,toggleStatus(_0x12fdca),_0x387ee2(0x191)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x246b2e(0x22b)](/\/off/,_0x3b8817=>{const _0x2a9503=_0x246b2e;if(!validateTelegram(_0x3b8817))return;tgBot[_0x2a9503(0x29f)](_0x2a9503(0x1b8));const _0x4c47a7=getEnabledBots();if(_0x4c47a7[_0x2a9503(0x248)]==0x0)tgBot[_0x2a9503(0x23f)](_0x3b8817[_0x2a9503(0x2b3)]['id'],_0x2a9503(0x250))[_0x2a9503(0x2af)](_0xfce726=>{telegramError(_0xfce726);});else{if(_0x4c47a7['length']>0x1)_0x4c47a7[_0x2a9503(0x1d5)]({'botID':_0x2a9503(0x1fe)});let _0x126ac8=[],_0x3e488d=[];const _0x5bc7a0=_0x4c47a7['length']%0x4==0x0||_0x4c47a7['length']%0x4==0x3||_0x4c47a7['length']%0x3==0x1?0x4:0x3;let _0xd88e66=0x0;_0x4c47a7[_0x2a9503(0x1e1)]((_0x308690,_0x2a0219)=>{const _0x621b44=_0x2a9503;if(_0x2a0219%_0x5bc7a0==0x0)_0x3e488d=[];_0x3e488d[_0x621b44(0x1d5)]({'text':_0x308690[_0x621b44(0x214)]=='all'?'All\x20bots':_0x621b44(0x267)+_0x308690[_0x621b44(0x214)],'callback_data':_0x308690['botID']}),_0x2a0219%_0x5bc7a0==0x0&&(_0x126ac8[_0xd88e66]=_0x3e488d,_0xd88e66++);}),tgBot[_0x2a9503(0x23f)](_0x3b8817['chat']['id'],_0x2a9503(0x1dd),{'reply_markup':{'inline_keyboard':_0x126ac8}})['catch'](_0x197f22=>{telegramError(_0x197f22);}),tgBot['on']('callback_query',async _0x13e627=>{const _0x400353=_0x2a9503,_0x4f14f3=_0x13e627[_0x400353(0x253)],_0x527e6a=_0x13e627[_0x400353(0x1c2)];tgBot['answerCallbackQuery'](_0x13e627['id'])[_0x400353(0x280)](async()=>{const _0x98d68f=_0x400353;_0x4f14f3=='all'?(tgBot['sendMessage'](_0x527e6a[_0x98d68f(0x2b3)]['id'],_0x98d68f(0x1a3))[_0x98d68f(0x2af)](_0x1e3505=>{telegramError(_0x1e3505);}),_0x4c47a7['forEach'](_0x12090f=>{const _0x43cde6=_0x98d68f;if(_0x12090f['botID']!='all')toggleBot(_0x12090f[_0x43cde6(0x214)],toggleStatus(_0x12090f[_0x43cde6(0x214)]),'stopped');})):(tgBot[_0x98d68f(0x23f)](_0x527e6a[_0x98d68f(0x2b3)]['id'],_0x98d68f(0x203)+_0x4f14f3)[_0x98d68f(0x2af)](_0x52e8c6=>{telegramError(_0x52e8c6);}),toggleBot(_0x4f14f3,toggleStatus(_0x4f14f3),_0x98d68f(0x191)));}),tgBot[_0x400353(0x29f)](_0x400353(0x1b8));});}}),tgBot[_0x246b2e(0x22b)](/\/toggle/,_0x8d62fc=>{const _0x2a0ce4=_0x246b2e;if(!validateTelegram(_0x8d62fc))return;tgBot[_0x2a0ce4(0x29f)](_0x2a0ce4(0x1b8));const _0x24548d=getBotsWithMode();if(_0x24548d['length']==0x0)tgBot['sendMessage'](_0x8d62fc[_0x2a0ce4(0x2b3)]['id'],_0x2a0ce4(0x250))[_0x2a0ce4(0x2af)](_0x16d6d4=>{telegramError(_0x16d6d4);});else{let _0x49746f=[],_0x1b53a8=[];const _0x59c3a4=0x2;let _0xa346d0=0x0;_0x24548d[_0x2a0ce4(0x1e1)]((_0x351926,_0x538d7b)=>{const _0x1a104e=_0x2a0ce4;if(_0x538d7b%_0x59c3a4==0x0)_0x1b53a8=[];_0x1b53a8[_0x1a104e(0x1d5)]({'text':_0x1a104e(0x267)+_0x351926[_0x1a104e(0x214)]+'\x20('+_0x351926['mode']+')','callback_data':_0x351926[_0x1a104e(0x214)]}),_0x538d7b%_0x59c3a4==0x0&&(_0x49746f[_0xa346d0]=_0x1b53a8,_0xa346d0++);}),tgBot[_0x2a0ce4(0x23f)](_0x8d62fc[_0x2a0ce4(0x2b3)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x49746f}})[_0x2a0ce4(0x2af)](_0x884758=>{telegramError(_0x884758);}),tgBot['on'](_0x2a0ce4(0x1b8),async _0x447252=>{const _0x26d230=_0x2a0ce4,_0x81f1a3=_0x447252[_0x26d230(0x253)],_0x3bf493=_0x447252[_0x26d230(0x1c2)];tgBot['answerCallbackQuery'](_0x447252['id'])[_0x26d230(0x280)](async()=>{const _0x43d5fb=_0x26d230,_0x5823b5=_0x24548d[_0x43d5fb(0x208)](_0x494b08=>_0x494b08[_0x43d5fb(0x214)]==_0x81f1a3),_0x27be95=_0x5823b5[_0x43d5fb(0x20c)]==_0x43d5fb(0x27f)?'manual':_0x43d5fb(0x27f);tgBot[_0x43d5fb(0x23f)](_0x3bf493[_0x43d5fb(0x2b3)]['id'],_0x43d5fb(0x183)+_0x81f1a3+_0x43d5fb(0x242)+_0x27be95+'\x20mode')['catch'](_0x391ea6=>{telegramError(_0x391ea6);}),toggleBotMode(_0x81f1a3);}),tgBot[_0x26d230(0x29f)]('callback_query');});}}),tgBot['onText'](/\/names/,_0x74ffed=>{const _0x1ff87b=_0x246b2e;if(!validateTelegram(_0x74ffed))return;let _0x35296f='';config[_0x1ff87b(0x1e1)](_0x496bbe=>{const _0x26ebbf=_0x1ff87b;_0x35296f+=_0x26ebbf(0x267)+_0x496bbe[_0x26ebbf(0x214)]+':\x20'+_0x496bbe[_0x26ebbf(0x297)]+'\x0a';}),tgBot[_0x1ff87b(0x23f)](_0x74ffed[_0x1ff87b(0x2b3)]['id'],_0x35296f,{'parse_mode':_0x1ff87b(0x1d6)})['catch'](_0x5ca9a5=>{telegramError(_0x5ca9a5);});}),tgBot[_0x246b2e(0x22b)](/\/disable/,_0x2cb310=>{const _0x26e6d6=_0x246b2e;if(!validateTelegram(_0x2cb310))return;tgBot['sendMessage'](_0x2cb310[_0x26e6d6(0x2b3)]['id'],'Notifications\x20disabled')[_0x26e6d6(0x2af)](_0x39c1d9=>{telegramError(_0x39c1d9);}),updateSetting(_0x26e6d6(0x1fa),![]);}),tgBot[_0x246b2e(0x22b)](/\/help/,_0x129f41=>{const _0x1d624c=_0x246b2e;if(!validateTelegram(_0x129f41))return;tgBot['sendMessage'](_0x129f41[_0x1d624c(0x2b3)]['id'],_0x7b6cd2)[_0x1d624c(0x2af)](_0x225502=>{telegramError(_0x225502);});}),tgBot['on'](_0x246b2e(0x18d),_0x3d1f7e=>{const _0x1c6efa=_0x246b2e;_0x3d1f7e[_0x1c6efa(0x20a)]()[_0x1c6efa(0x201)]('404\x20Not\x20Found')&&(logging(_0x1c6efa(0x2a7)),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0x1c6efa(0x19d)](_0x1c6efa(0x20b),_0x1c6efa(0x2a7)));}),process[_0x246b2e(0x2be)]('SIGINT',()=>{const _0x2db33f=_0x246b2e;if(tgBot)tgBot[_0x2db33f(0x1ab)]();process[_0x2db33f(0x213)](0x1);}),process[_0x246b2e(0x2be)](_0x246b2e(0x275),()=>{const _0x26fbba=_0x246b2e;if(tgBot)tgBot[_0x26fbba(0x1ab)]();process[_0x26fbba(0x213)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x1d43bd,_0x46545c){const _0x6d5e42=_0x37386b;if(settings[_0x6d5e42(0x1fa)]){if(settings[_0x6d5e42(0x1dc)]=='all'||(_0x46545c[_0x6d5e42(0x17d)]==_0x6d5e42(0x270)||_0x46545c[_0x6d5e42(0x17d)]==_0x6d5e42(0x29a))&&settings['telegramEvents']==_0x6d5e42(0x200)||_0x46545c[_0x6d5e42(0x17d)]=='order'&&settings[_0x6d5e42(0x1dc)]==_0x6d5e42(0x1ef)){if(tgBot&&settings[_0x6d5e42(0x24b)]){if(_0x46545c[_0x6d5e42(0x27c)])tgBot['sendMessage'](settings['telegramChatId'],_0x46545c['botname']+_0x6d5e42(0x1a5)+_0x46545c[_0x6d5e42(0x274)])[_0x6d5e42(0x2af)](_0x387f0b=>{telegramError(_0x387f0b);});else tgBot[_0x6d5e42(0x23f)](settings[_0x6d5e42(0x24b)],_0x6d5e42(0x267)+_0x1d43bd+'\x20>\x20'+_0x46545c['event'])['catch'](_0x551d76=>{telegramError(_0x551d76);});}}}}function getDeviceWithIp(_0x40b4c9){const _0x19680d=_0x37386b;return devices[_0x19680d(0x208)](_0x423a2b=>_0x423a2b['ip']===_0x40b4c9);}function temporaryAccess2FA(_0x46b03b,_0x30f0ff){const _0x225f75=_0x37386b;let _0x21c3d0=new Date(),_0x53838c=![];if(lastIpApproval){if(_0x21c3d0-lastIpApproval<0x1388)_0x53838c=!![];}lastIpApproval=new Date();if(_0x53838c)return;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x225f75(0x1b8)),tgBot[_0x225f75(0x23f)](settings[_0x225f75(0x24b)],_0x225f75(0x17b)+normalizeIP(_0x30f0ff)[_0x225f75(0x1ac)]+_0x225f75(0x23b),{'parse_mode':_0x225f75(0x1d6),'reply_markup':{'inline_keyboard':[[{'text':_0x225f75(0x2bf),'callback_data':'5'},{'text':_0x225f75(0x1af),'callback_data':'15'},{'text':_0x225f75(0x20e),'callback_data':'30'},{'text':'reject','callback_data':_0x225f75(0x2b7)}]]}})[_0x225f75(0x2af)](_0x339ae9=>{telegramError(_0x339ae9);}),tgBot['on'](_0x225f75(0x1b8),async _0x62e270=>{const _0x50d3d7=_0x225f75,_0xca8e92=_0x62e270[_0x50d3d7(0x253)],_0x5bd478=_0x62e270['message'];tgBot[_0x50d3d7(0x221)](_0x62e270['id'])[_0x50d3d7(0x280)](async()=>{const _0x33bec3=_0x50d3d7;devices[_0x46b03b]['telegramIpApproval']={'clientip':_0x30f0ff,'timestamp':new Date()[_0x33bec3(0x1e7)](),'expiry':_0xca8e92},_0xca8e92!=_0x33bec3(0x2b7)?(await tgBot[_0x33bec3(0x23f)](_0x5bd478[_0x33bec3(0x2b3)]['id'],'Access\x20enabled\x20for\x20'+_0xca8e92+'\x20minutes',{'parse_mode':_0x33bec3(0x1d6)})[_0x33bec3(0x2af)](_0x5e7684=>{telegramError(_0x5e7684);}),io['to'](_0x46b03b)[_0x33bec3(0x19d)](_0x33bec3(0x22a),{'access':{'allow':![],'reason':_0x33bec3(0x2c6),'token':null}})):(await tgBot[_0x33bec3(0x23f)](_0x5bd478[_0x33bec3(0x2b3)]['id'],'Temporary\x20access\x20rejected')[_0x33bec3(0x2af)](_0x21a8c8=>{telegramError(_0x21a8c8);}),io['to'](_0x46b03b)[_0x33bec3(0x19d)](_0x33bec3(0x22a),{'access':{'allow':![],'reason':_0x33bec3(0x22d),'token':null}}));}),tgBot['removeListener'](_0x50d3d7(0x1b8));}));}function loginAccess2FA(_0x30d6a5,_0x30b706){const _0x4bfe51=_0x37386b;tgBot&&settings[_0x4bfe51(0x24b)]&&(tgBot['removeListener'](_0x4bfe51(0x1b8)),tgBot['sendMessage'](settings[_0x4bfe51(0x24b)],_0x4bfe51(0x296)+normalizeIP(_0x30b706)['show']+_0x4bfe51(0x23b),{'parse_mode':_0x4bfe51(0x1d6),'reply_markup':{'inline_keyboard':[[{'text':_0x4bfe51(0x1a9),'callback_data':loginExpiry},{'text':_0x4bfe51(0x2b7),'callback_data':_0x4bfe51(0x2b7)}]]}})[_0x4bfe51(0x2af)](_0x5c75bf=>{telegramError(_0x5c75bf);}),tgBot['on'](_0x4bfe51(0x1b8),async _0x3b6bde=>{const _0x5c28fd=_0x4bfe51,_0x47d6e6=_0x3b6bde['data'],_0x578a45=_0x3b6bde['message'];tgBot[_0x5c28fd(0x221)](_0x3b6bde['id'])[_0x5c28fd(0x280)](async()=>{const _0x2f12bc=_0x5c28fd;devices[_0x30d6a5][_0x2f12bc(0x184)]={'clientip':_0x30b706,'timestamp':new Date()[_0x2f12bc(0x1e7)](),'expiry':_0x47d6e6},_0x47d6e6!='reject'?(await tgBot[_0x2f12bc(0x23f)](_0x578a45[_0x2f12bc(0x2b3)]['id'],_0x2f12bc(0x2a6),{'parse_mode':_0x2f12bc(0x1d6)})[_0x2f12bc(0x2af)](_0x5c18ef=>{telegramError(_0x5c18ef);}),io['to'](_0x30d6a5)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x2f12bc(0x23f)](_0x578a45['chat']['id'],_0x2f12bc(0x1b3))['catch'](_0x3c80b2=>{telegramError(_0x3c80b2);}),io['to'](_0x30d6a5)[_0x2f12bc(0x19d)]('status',{'access':{'allow':![],'reason':_0x2f12bc(0x298),'token':null}}));}),tgBot['removeListener'](_0x5c28fd(0x1b8));}));}function getConfiguration(){const _0x5acdca=_0x37386b;return dbConfig['get'](_0x5acdca(0x26c))[_0x5acdca(0x2cd)]('botID')[_0x5acdca(0x268)]()||[];}function getEnabledBots(){const _0x162322=_0x37386b;return dbConfig[_0x162322(0x255)](_0x162322(0x26c))['sortBy'](_0x162322(0x214))[_0x162322(0x1e3)]({'status':_0x162322(0x19b)})[_0x162322(0x268)]()||[];}function getDisabledBots(){const _0x2b21e4=_0x37386b;return dbConfig[_0x2b21e4(0x255)](_0x2b21e4(0x26c))['sortBy'](_0x2b21e4(0x214))[_0x2b21e4(0x1e3)]({'status':'disabled'})[_0x2b21e4(0x268)]()||[];}function getBotsWithMode(){const _0x45a5d4=_0x37386b,_0x53498d=dbConfig[_0x45a5d4(0x255)]('bots')[_0x45a5d4(0x2cd)](_0x45a5d4(0x214))[_0x45a5d4(0x268)]()||[];return _0x53498d['forEach'](_0x2ac93a=>{const _0x3130b8=_0x45a5d4,_0x2c7d64=configpath+_0x3130b8(0x234)+_0x2ac93a[_0x3130b8(0x214)]+_0x3130b8(0x2b2),_0x19527d=fs['readFileSync'](_0x2c7d64),_0xb7a80c=JSON['parse'](_0x19527d)[_0x3130b8(0x2aa)][0x0][_0x3130b8(0x28b)];_0x2ac93a[_0x3130b8(0x20c)]=_0xb7a80c?_0x3130b8(0x27f):_0x3130b8(0x26e);}),_0x53498d;}function getSettings(){const _0x2cdd27=_0x37386b;return dbSettings[_0x2cdd27(0x255)]('settings')[_0x2cdd27(0x268)]()||{'timeshift':0x0};}function getSecure(){const _0x433b20=_0x37386b;return dbSecure[_0x433b20(0x255)](_0x433b20(0x28d))[_0x433b20(0x268)]()||{};}function getBlacklist(){const _0x4a83b9=_0x37386b;return dbSecure['get'](_0x4a83b9(0x1a0))[_0x4a83b9(0x268)]()||[];}function broadcastToBots(_0x5aeae7,_0x19a6e3){const _0x301803=_0x37386b;config[_0x301803(0x1e1)](_0x5f4875=>{const _0x45d616=_0x301803;if(_0x5f4875[_0x45d616(0x22a)]==_0x45d616(0x19b)&&_0x5f4875[_0x45d616(0x195)]=='running'){if(pid[_0x5f4875[_0x45d616(0x214)]])pid[_0x5f4875['botID']][_0x45d616(0x1be)]({[_0x5aeae7]:_0x19a6e3});}});}function storeSettings(_0x2ac190,_0x4c91fc=![]){const _0x32875f=_0x37386b;_0x2ac190={...settings,..._0x2ac190};if(_0x4c91fc&&_0x2ac190[_0x32875f(0x262)]!=_0x32875f(0x292)&&_0x2ac190[_0x32875f(0x262)]!=''){const _0x49247c=crypt[_0x32875f(0x260)](secure[_0x32875f(0x180)],_0x2ac190['bbPassword'])[_0x32875f(0x1c2)][_0x32875f(0x1ed)]('@')[0x0],_0xb8ffc8=bcrypt[_0x32875f(0x1b1)](_0x49247c,saltRounds);_0x2ac190={..._0x2ac190,'bbPassword':_0xb8ffc8};}if(_0x4c91fc&&_0x2ac190[_0x32875f(0x22f)]!='************'&&_0x2ac190[_0x32875f(0x22f)]!=''){const _0x17cf4a=crypt['decrypt'](secure[_0x32875f(0x180)],_0x2ac190[_0x32875f(0x22f)])[_0x32875f(0x1c2)][_0x32875f(0x1ed)]('@')[0x0];_0x2ac190={..._0x2ac190,'telegramToken':_0x17cf4a};}const _0x44d4d4=_0x2ac190[_0x32875f(0x22f)]!='************'&&_0x2ac190['telegramToken']!=settings[_0x32875f(0x22f)]||_0x2ac190[_0x32875f(0x185)]!=settings[_0x32875f(0x185)],_0x960592=_0x2ac190['telegramToken']==''||_0x2ac190['telegramUsername']=='';if(_0x44d4d4)_0x2ac190[_0x32875f(0x1dc)]=_0x32875f(0x1fe);for(const [_0x23c824,_0x2b8891]of Object[_0x32875f(0x28f)](_0x2ac190)){if(_0x23c824==_0x32875f(0x22f)&&_0x2b8891==_0x32875f(0x292)){_0x2ac190['telegramToken']=settings['telegramToken'];continue;};if(_0x23c824=='bbPassword'&&_0x2b8891=='************'){_0x2ac190[_0x32875f(0x262)]=settings[_0x32875f(0x262)];continue;};dbSettings[_0x32875f(0x223)](_0x32875f(0x1eb)+_0x23c824,_0x2b8891)[_0x32875f(0x23a)]();}settings=_0x2ac190,io['to']('botmanager')[_0x32875f(0x19d)]('settings',cleanSettings()),broadcastToBots(_0x32875f(0x1c3),settings[_0x32875f(0x1c3)]);if(_0x44d4d4&&!_0x960592)initTelegram();if(_0x44d4d4&&_0x960592)disableTelegram();getAllClients()['forEach'](_0x7e16c9=>{const _0x20cb23=_0x32875f;getSocket(_0x7e16c9['id'])[_0x20cb23(0x19d)](_0x20cb23(0x22a),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x27a75d,_0x50b663){const _0x1b4016=_0x37386b;dbSettings['set'](_0x1b4016(0x1eb)+_0x27a75d,_0x50b663)[_0x1b4016(0x23a)](),settings=getSettings(),io['to']('botmanager')[_0x1b4016(0x19d)](_0x1b4016(0x1fd),cleanSettings());}function storeSecure(_0x4cc671){const _0x4f2615=_0x37386b;dbSecure[_0x4f2615(0x255)](_0x4f2615(0x28d))[_0x4f2615(0x1d5)](_0x4cc671)['write'](),secure=_0x4cc671;}function addBlacklist(_0x4d280f){const _0x1eb2a4=_0x37386b;cleanBlacklist();let _0x1b8282;devices[_0x4d280f][_0x1eb2a4(0x25e)]?_0x1b8282=Math['max'](devices[_0x4d280f][_0x1eb2a4(0x25e)][_0x1eb2a4(0x25a)],loginExpiry):_0x1b8282=loginExpiry,dbSecure[_0x1eb2a4(0x255)](_0x1eb2a4(0x1a0))[_0x1eb2a4(0x1d5)]({'expiry':new Date()['getTime']()+_0x1b8282*0x3c*0x3e8,'token':devices[_0x4d280f][_0x1eb2a4(0x2b0)][_0x1eb2a4(0x278)]})[_0x1eb2a4(0x23a)](),blacklist=dbSecure[_0x1eb2a4(0x255)](_0x1eb2a4(0x1a0))[_0x1eb2a4(0x268)]();}function cleanBlacklist(){const _0x15be4d=_0x37386b;let _0x72027=dbSecure[_0x15be4d(0x255)]('blacklist')[_0x15be4d(0x231)]()[_0x15be4d(0x268)](),_0x3abfc4=new Date()[_0x15be4d(0x1e7)]();_0x72027['forEach'](_0x2ff968=>{const _0x2011e8=_0x15be4d;_0x2ff968[_0x2011e8(0x25a)]<_0x3abfc4&&dbSecure[_0x2011e8(0x255)](_0x2011e8(0x1a0))['remove']({'expiry':_0x2ff968[_0x2011e8(0x25a)]})[_0x2011e8(0x23a)]();});}function initStates(){const _0x3fbbf2=_0x37386b;let _0x1c2161=getConfiguration();_0x1c2161[_0x3fbbf2(0x1e1)](_0x2cb1bf=>{const _0x5b5bb2=_0x3fbbf2;_0x2cb1bf[_0x5b5bb2(0x195)]=_0x5b5bb2(0x191);}),storeConfiguration(_0x1c2161);}function onKeys(){const _0x538912=new RSA();return new Promise(_0x11bda7=>{const _0x6e976b=_0x5c62;_0x538912[_0x6e976b(0x182)]()[_0x6e976b(0x280)](_0xe70b05=>{_0x11bda7(_0xe70b05);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x4cdd44=_0x37386b;let _0x1dd006=getConfiguration(),_0x3f70e3=![];_0x1dd006[_0x4cdd44(0x1e1)](_0x2b7a33=>{const _0x46d041=_0x4cdd44;if(_0x2b7a33['status']==_0x46d041(0x196))_0x2b7a33[_0x46d041(0x22a)]=_0x46d041(0x19b),_0x3f70e3=!![];else _0x2b7a33[_0x46d041(0x22a)]=='stopped'&&(_0x2b7a33['status']=_0x46d041(0x1a4),_0x3f70e3=!![]);});if(_0x3f70e3)storeConfiguration(_0x1dd006);let _0x4f17b7=getSecure();if(!_0x4f17b7[_0x4cdd44(0x264)]('secret')){let _0x3d7ad9=await generateKeys();_0x4f17b7[_0x4cdd44(0x254)]=_0x3d7ad9[_0x4cdd44(0x254)],_0x4f17b7[_0x4cdd44(0x180)]=_0x3d7ad9[_0x4cdd44(0x180)],_0x4f17b7['secret']=crypto[_0x4cdd44(0x2a3)](0x20)[_0x4cdd44(0x20a)]('hex');;storeSecure(_0x4f17b7);}let _0x2ec1e0=getSettings();_0x3f70e3=![];!_0x2ec1e0[_0x4cdd44(0x264)](_0x4cdd44(0x17c))&&(_0x2ec1e0[_0x4cdd44(0x17c)]=![],_0x2ec1e0[_0x4cdd44(0x225)]='',_0x2ec1e0[_0x4cdd44(0x262)]='',_0x2ec1e0['f2aRequired']=![],_0x3f70e3=!![]);!_0x2ec1e0['hasOwnProperty'](_0x4cdd44(0x26d))&&(_0x2ec1e0[_0x4cdd44(0x26d)]=![],_0x2ec1e0[_0x4cdd44(0x205)]=[],_0x2ec1e0['temporaryAccessAllowed']=![],_0x3f70e3=!![]);if(!_0x2ec1e0[_0x4cdd44(0x264)](_0x4cdd44(0x1fa))){if(_0x2ec1e0[_0x4cdd44(0x24b)])_0x2ec1e0['telegramEnabled']=!![];else _0x2ec1e0[_0x4cdd44(0x1fa)]=![];_0x3f70e3=!![];}if(_0x3f70e3)storeSettings(_0x2ec1e0);}function storeConfiguration(_0x5d05e6){const _0x45dbba=_0x37386b;dbConfig[_0x45dbba(0x255)](_0x45dbba(0x26c))[_0x45dbba(0x2bc)]()[_0x45dbba(0x23a)](),dbConfig[_0x45dbba(0x255)]('bots')[_0x45dbba(0x1d5)](..._0x5d05e6)[_0x45dbba(0x23a)](),config=_0x5d05e6;}function resetPassword(){const _0x233d79=_0x37386b;tgBot&&settings[_0x233d79(0x24b)]&&(tgBot['removeListener'](_0x233d79(0x1b8)),tgBot[_0x233d79(0x23f)](settings['telegramChatId'],_0x233d79(0x1c5),{'parse_mode':_0x233d79(0x1d6),'reply_markup':{'inline_keyboard':[[{'text':_0x233d79(0x1e6),'callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})['catch'](_0x5eeb27=>{telegramError(_0x5eeb27);}),tgBot['on'](_0x233d79(0x1b8),async _0x5bcc82=>{const _0x1e05b9=_0x233d79,_0x219a8e=_0x5bcc82[_0x1e05b9(0x253)],_0x1ffe69=_0x5bcc82[_0x1e05b9(0x1c2)];tgBot[_0x1e05b9(0x221)](_0x5bcc82['id'])[_0x1e05b9(0x280)](async()=>{const _0x4800ba=_0x1e05b9;if(_0x219a8e!='no'){const _0x4f57bb=0xf,_0x3a960b=_0x4800ba(0x2c3),_0x50decb=Array[_0x4800ba(0x29e)](crypto['randomFillSync'](new Uint32Array(_0x4f57bb)))[_0x4800ba(0x21c)](_0x23157c=>_0x3a960b[_0x23157c%_0x3a960b[_0x4800ba(0x248)]])['join'](''),_0x54c891=bcrypt[_0x4800ba(0x1b1)](_0x50decb,saltRounds);storeSettings({'bbPassword':_0x54c891}),await tgBot['sendMessage'](_0x1ffe69[_0x4800ba(0x2b3)]['id'],_0x4800ba(0x1cd)+_0x50decb,{'parse_mode':'HTML'})[_0x4800ba(0x2af)](_0xfcbc4a=>{telegramError(_0xfcbc4a);});}else await tgBot['sendMessage'](_0x1ffe69['chat']['id'],_0x4800ba(0x1d3))[_0x4800ba(0x2af)](_0x255f3a=>{telegramError(_0x255f3a);});}),tgBot[_0x1e05b9(0x29f)](_0x1e05b9(0x1b8));}));}function logging(_0x384d7a){const _0x3c7280=_0x37386b;console[_0x3c7280(0x256)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x384d7a);if(tgBot&&settings[_0x3c7280(0x24b)]&&settings['telegramEvents']!=_0x3c7280(0x1ef))tgBot[_0x3c7280(0x23f)](settings['telegramChatId'],_0x3c7280(0x281)+_0x384d7a)[_0x3c7280(0x2af)](_0x1c246d=>{telegramError(_0x1c246d);});}function getServerTime(){const _0x22b115=_0x37386b,_0x2f8769=new Date();return _0x2f8769[_0x22b115(0x22e)]()+'/'+(_0x2f8769[_0x22b115(0x228)]()+0x1)['toString']()[_0x22b115(0x2b4)](0x2,'0')+'/'+_0x2f8769['getDate']()['toString']()['padStart'](0x2,'0')+'\x20'+_0x2f8769['getHours']()['toString']()[_0x22b115(0x2b4)](0x2,'0')+':'+_0x2f8769[_0x22b115(0x1d8)]()[_0x22b115(0x20a)]()[_0x22b115(0x2b4)](0x2,'0')+':'+_0x2f8769[_0x22b115(0x219)]()['toString']()[_0x22b115(0x2b4)](0x2,'0');}function getTimeStamp(){const _0xab4a7=_0x37386b,_0x15a293=shiftedTime();return _0x15a293[_0xab4a7(0x22e)]()+'/'+(_0x15a293['getMonth']()+0x1)['toString']()[_0xab4a7(0x2b4)](0x2,'0')+'/'+_0x15a293[_0xab4a7(0x210)]()[_0xab4a7(0x20a)]()[_0xab4a7(0x2b4)](0x2,'0')+'\x20'+_0x15a293[_0xab4a7(0x2a8)]()['toString']()['padStart'](0x2,'0')+':'+_0x15a293[_0xab4a7(0x1d8)]()[_0xab4a7(0x20a)]()['padStart'](0x2,'0')+':'+_0x15a293[_0xab4a7(0x219)]()['toString']()['padStart'](0x2,'0');}function shiftedTime(){const _0x46f4a6=_0x37386b,_0x1beb85=new Date();let _0x321954=_0x1beb85;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x321954=fns[_0x46f4a6(0x1f6)](_0x1beb85,{'hours':settings[_0x46f4a6(0x1c3)]});return _0x321954;}function startScheduler(){const _0x59812f=_0x37386b;let _0x265975=new Date()[_0x59812f(0x25c)]();_0x265975==0x1&&backupConfigFiles();_0x265975==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3dc12d=_0x37386b;fs[_0x3dc12d(0x259)](configpath,{'withFileTypes':!![]})['forEach'](_0x48299b=>{const _0x4e9e1d=_0x3dc12d;if(!_0x48299b['isDirectory']())fs[_0x4e9e1d(0x2b8)](configpath+_0x48299b[_0x4e9e1d(0x21b)],configbackuppath+_0x48299b[_0x4e9e1d(0x21b)]);});}function triggerAnalytics(){const _0x3ebb04=_0x37386b;analytics[_0x3ebb04(0x2b6)]({'title':_0x3ebb04(0x190),'href':_0x3ebb04(0x288),'path':'/v'+serverversion});}function validateCredentials(_0x471df0,_0x11a76d){const _0x42108b=_0x37386b;if(_0x471df0['username']==settings[_0x42108b(0x225)]&&bcrypt[_0x42108b(0x287)](_0x471df0[_0x42108b(0x1b4)],settings['bbPassword'])){if(settings[_0x42108b(0x2c8)])return{'allow':![],'reason':_0x42108b(0x29c),'token':null};else{const _0x403098=generateLoginToken(_0x11a76d);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x403098};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x19c9dc){const _0x1d8f07=_0x37386b,_0x509888=generateLoginToken(_0x19c9dc);return{'allow':!![],'reason':_0x1d8f07(0x1b5),'token':_0x509888};}function validateAccess(_0x5e480b,_0x545dcb){const _0x1b8e49=_0x37386b;let _0x24bdbb=devices[_0x545dcb]['ip'],_0x15beb3;const _0x4fc139=_0x117f71=>{const _0x463e86=_0x5c62;if(settings[_0x463e86(0x17c)]){if(settings[_0x463e86(0x2c8)]){if(telegram2FaApproved(_0x545dcb)){const _0x5e95fb=generateLoginToken(_0x545dcb);return{'allow':!![],'reason':_0x463e86(0x272),'token':_0x5e95fb};}else return{'allow':![],'reason':_0x463e86(0x1ff),'token':null};}else return _0x15beb3=validToken(_0x117f71,_0x545dcb),_0x15beb3[_0x463e86(0x264)](_0x463e86(0x29a))?{'allow':!![],'reason':_0x463e86(0x27d),'token':_0x117f71}:{'allow':![],'reason':_0x463e86(0x1ff),'token':null};}else return{'allow':!![],'reason':_0x463e86(0x211),'token':null};};if(settings[_0x1b8e49(0x26d)]){let _0x3fe323=[...settings['whitelist'],'::1',_0x1b8e49(0x1e2),_0x1b8e49(0x207)];if(_0x3fe323[_0x1b8e49(0x201)](_0x24bdbb))return _0x4fc139(_0x5e480b);else{_0x15beb3=validToken(_0x5e480b,_0x545dcb);if(_0x15beb3[_0x1b8e49(0x264)](_0x1b8e49(0x29a)))return _0x4fc139(_0x5e480b);else{if(telegramIpApproved(_0x545dcb)){const _0x59d8ff=generateToken(_0x545dcb);return _0x15beb3=_0x4fc139(_0x5e480b),_0x15beb3[_0x1b8e49(0x2a5)]?{'allow':!![],'reason':_0x1b8e49(0x217),'token':_0x59d8ff}:_0x15beb3;}else return settings[_0x1b8e49(0x2d1)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x4fc139(_0x5e480b);}function timelyDecrypt(_0x2438bc,_0x3c5ee2=!![]){const _0x4adc9f=_0x37386b;if(_0x2438bc)try{const _0xb90a31=crypt[_0x4adc9f(0x260)](secure[_0x4adc9f(0x180)],_0x2438bc)[_0x4adc9f(0x1c2)],_0x6e7b42=_0xb90a31[_0x4adc9f(0x1ed)]('@')[0x0],_0x3cf5e6=_0xb90a31[_0x4adc9f(0x1ed)]('@')[0x1],_0x3b7d93=new Date()[_0x4adc9f(0x1e7)]();if(_0x3c5ee2){if(_0x3b7d93-_0x3cf5e6<maxSecretAge*0x3e8)return _0x6e7b42;else return![];}else return _0x6e7b42;}catch(_0x37caad){return![];}else return![];}const validToken=(_0x47a103,_0x545ddc)=>{const _0x3eeb13=_0x37386b,_0x1ae00c=devices[_0x545ddc]['ip'];if(!_0x47a103)return{'error':_0x3eeb13(0x1ea)};for(let _0x1c942d of blacklist){if(_0x1c942d['token']==_0x47a103)return{'error':_0x3eeb13(0x199)};}let _0x21c0f4;try{_0x21c0f4=jwt[_0x3eeb13(0x21f)](_0x47a103,secure[_0x3eeb13(0x279)]+_0x545ddc);}catch{return{'error':_0x3eeb13(0x239)};}if(!_0x21c0f4['hasOwnProperty'](_0x3eeb13(0x24d))&&!_0x21c0f4['hasOwnProperty'](_0x3eeb13(0x286))||!_0x21c0f4[_0x3eeb13(0x264)](_0x3eeb13(0x235)))return{'error':_0x3eeb13(0x2ce)};if(!_0x21c0f4['hasOwnProperty'](_0x3eeb13(0x286))&&_0x21c0f4['hasOwnProperty'](_0x3eeb13(0x24d))){const {clientip:_0x582711}=_0x21c0f4;return _0x1ae00c==_0x582711?{'success':_0x3eeb13(0x252)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x21c0f4[_0x3eeb13(0x264)](_0x3eeb13(0x286))&&_0x21c0f4[_0x3eeb13(0x264)](_0x3eeb13(0x24d))){const {username:_0x31ec6f,clientip:_0x8d3d1c}=_0x21c0f4;return settings['bbUsername']==_0x31ec6f&&_0x1ae00c==_0x8d3d1c?{'success':_0x3eeb13(0x252)}:{'error':_0x3eeb13(0x227)};}}},generateLoginToken=_0x6fa170=>{const _0x483b73=_0x37386b;if(_0x6fa170){const _0x342bc1=devices[_0x6fa170]['ip'];return jwt[_0x483b73(0x2b5)]({'username':settings[_0x483b73(0x225)],'clientip':_0x342bc1},secure['secret']+_0x6fa170,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x1f28e0=>{const _0x29f658=_0x37386b;if(_0x1f28e0){const _0x30712d=devices[_0x1f28e0]['ip'];return jwt[_0x29f658(0x2b5)]({'clientip':_0x30712d},secure['secret']+_0x1f28e0,{'expiresIn':devices[_0x1f28e0]['telegramIpApproval'][_0x29f658(0x25a)]*0x3c});}else return![];},telegramIpApproved=_0x573e44=>{const _0x1817a=_0x37386b;let _0xec2768=![];return devices[_0x573e44][_0x1817a(0x25e)]&&devices[_0x573e44]['telegramIpApproval'][_0x1817a(0x25a)]!=_0x1817a(0x2b7)&&(_0xec2768=devices[_0x573e44][_0x1817a(0x25e)]['clientip']==devices[_0x573e44]['ip']&&new Date()[_0x1817a(0x1e7)]()-devices[_0x573e44]['telegramIpApproval'][_0x1817a(0x1d7)]<devices[_0x573e44][_0x1817a(0x25e)]['expiry']*0x3c*0x3e8),_0xec2768;},telegram2FaApproved=_0x143788=>{const _0x2447dd=_0x37386b;let _0x336676=![];return devices[_0x143788][_0x2447dd(0x184)]&&devices[_0x143788][_0x2447dd(0x184)][_0x2447dd(0x25a)]!=_0x2447dd(0x2b7)&&(_0x336676=devices[_0x143788][_0x2447dd(0x184)][_0x2447dd(0x24d)]==devices[_0x143788]['ip']&&new Date()['getTime']()-devices[_0x143788][_0x2447dd(0x184)][_0x2447dd(0x1d7)]<devices[_0x143788]['telegram2FaApproval'][_0x2447dd(0x25a)]*0x3c*0x3e8),_0x336676;},normalizeIP=_0x395210=>{const _0x2b4502=_0x37386b;let _0x25c3eb=null,_0x16b305=null;if(ipaddr[_0x2b4502(0x2c1)](_0x395210)){const _0x2b1a32=ipaddr[_0x2b4502(0x17e)](_0x395210);_0x2b1a32[_0x2b4502(0x2d2)]()===_0x2b4502(0x29d)?(_0x2b1a32[_0x2b4502(0x206)]()&&(_0x25c3eb=_0x2b1a32[_0x2b4502(0x2ba)]()[_0x2b4502(0x20a)]()),_0x16b305=_0x2b1a32[_0x2b4502(0x20a)]()):(_0x25c3eb=_0x2b1a32[_0x2b4502(0x20a)](),_0x16b305=_0x2b1a32[_0x2b4502(0x1a6)]()[_0x2b4502(0x20a)]());}return{'show':_0x25c3eb?_0x25c3eb:_0x16b305,'store':_0x16b305};};