const _0x13f62c=_0x5b23;(function(_0x211f99,_0x3e72d5){const _0x47c839=_0x5b23,_0x1b7d6e=_0x211f99();while(!![]){try{const _0xc370f4=parseInt(_0x47c839(0x2d6))/0x1+parseInt(_0x47c839(0x2ff))/0x2+parseInt(_0x47c839(0x18b))/0x3*(-parseInt(_0x47c839(0x22b))/0x4)+-parseInt(_0x47c839(0x297))/0x5*(parseInt(_0x47c839(0x242))/0x6)+parseInt(_0x47c839(0x257))/0x7*(-parseInt(_0x47c839(0x21b))/0x8)+-parseInt(_0x47c839(0x25d))/0x9*(-parseInt(_0x47c839(0x1f3))/0xa)+-parseInt(_0x47c839(0x237))/0xb;if(_0xc370f4===_0x3e72d5)break;else _0x1b7d6e['push'](_0x1b7d6e['shift']());}catch(_0x27df26){_0x1b7d6e['push'](_0x1b7d6e['shift']());}}}(_0x521f,0xf3d6c));const _0x3e1069=function(){let _0x1632ce=!![];return function(_0x54dfb0,_0x45b746){const _0x48f2b1=_0x1632ce?function(){const _0x439bb6=_0x5b23;if(_0x45b746){const _0x2e1fe1=_0x45b746[_0x439bb6(0x1da)](_0x54dfb0,arguments);return _0x45b746=null,_0x2e1fe1;}}:function(){};return _0x1632ce=![],_0x48f2b1;};}(),_0x461b86=_0x3e1069(this,function(){const _0x5bf1af=_0x5b23;return _0x461b86[_0x5bf1af(0x2ac)]()['search']('(((.+)+)+)+$')['toString']()[_0x5bf1af(0x28c)](_0x461b86)['search'](_0x5bf1af(0x275));});_0x461b86();'use strict';process[_0x13f62c(0x27c)][_0x13f62c(0x2c5)]=0x1;const childProcess=require(_0x13f62c(0x25e)),fs=require('fs'),fns=require(_0x13f62c(0x1df)),low=require(_0x13f62c(0x19c)),FileSync=require(_0x13f62c(0x273)),path=require(_0x13f62c(0x2bb)),crypto=require(_0x13f62c(0x2b0)),Crypt=require(_0x13f62c(0x2ea))['Crypt'],RSA=require(_0x13f62c(0x2ea))[_0x13f62c(0x201)],bcrypt=require(_0x13f62c(0x1b0)),jwt=require(_0x13f62c(0x1c7)),{Analytics}=require('analytics'),googleAnalyticsV3Plugin=require(_0x13f62c(0x1f1))[_0x13f62c(0x2a2)],ipaddr=require('ipaddr.js'),argv=require(_0x13f62c(0x21d))(process['argv'][_0x13f62c(0x2a6)](0x2))['argv'],uuidRandom=require(_0x13f62c(0x283)),Mixpanel=require(_0x13f62c(0x24a)),axios=require('axios'),{GraphQLClient,gql}=require(_0x13f62c(0x226)),PORT=argv[_0x13f62c(0x200)]||_0x13f62c(0x2ee),pattern=/^[0-9]{2,4}$/;!pattern[_0x13f62c(0x1e2)](PORT)&&(console[_0x13f62c(0x2ab)](_0x13f62c(0x293)+PORT+_0x13f62c(0x1db)),process[_0x13f62c(0x23d)](0x1));const HOST=argv[_0x13f62c(0x2cb)]||null,userID=argv['user']||'';let bbpath=_0x13f62c(0x1a7),bbpath2='';function _0x5b23(_0x2bb164,_0x2d01d6){const _0x2a7da0=_0x521f();return _0x5b23=function(_0x461b86,_0x3e1069){_0x461b86=_0x461b86-0x189;let _0x521fc7=_0x2a7da0[_0x461b86];return _0x521fc7;},_0x5b23(_0x2bb164,_0x2d01d6);}const botfile='bot.js',configfile=_0x13f62c(0x298),settingsfile=_0x13f62c(0x1cc),securefile='bb-secure.json';let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x13f62c(0x2b8)),configpath=userID?bbpath+_0x13f62c(0x232)+userID+'/':bbpath+_0x13f62c(0x232),configbackuppath=configpath+_0x13f62c(0x2a0);!fs[_0x13f62c(0x1d1)](configpath)&&fs[_0x13f62c(0x2e0)](configpath);!fs[_0x13f62c(0x1d1)](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x13f62c(0x29b)]({'bots':[]})[_0x13f62c(0x29e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x13f62c(0x29b)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0'}})[_0x13f62c(0x29e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x13f62c(0x29b)]({'secure':{},'blacklist':[]})[_0x13f62c(0x29e)]();let crypt=new Crypt({'md':_0x13f62c(0x1d9),'rsaStandard':_0x13f62c(0x292)});const saltRounds=0xa,mixpanel=Mixpanel[_0x13f62c(0x18a)](_0x13f62c(0x1aa),{'host':_0x13f62c(0x1e1)}),analytics=Analytics({'app':_0x13f62c(0x23e),'plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x13f62c(0x1fc)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x13f62c(0x248)),app=express(),http=require('http')[_0x13f62c(0x2af)](app);app[_0x13f62c(0x196)](express[_0x13f62c(0x1c9)](path[_0x13f62c(0x1ad)](__dirname,bbpath2,_0x13f62c(0x2fe)))),app[_0x13f62c(0x196)](express[_0x13f62c(0x1c9)](path[_0x13f62c(0x1ad)](__dirname,bbpath2,_0x13f62c(0x2d2)))),app['get']('/',function(_0x5b49ee,_0x1a4a49){const _0x34ea21=_0x13f62c;_0x1a4a49[_0x34ea21(0x1b1)](path[_0x34ea21(0x1ad)](__dirname,bbpath2,_0x34ea21(0x2fe),_0x34ea21(0x211)));}),app[_0x13f62c(0x215)](_0x13f62c(0x253),function(_0x2335ce,_0x48a9e7){const _0x393ea8=_0x13f62c;_0x48a9e7[_0x393ea8(0x1b1)](path[_0x393ea8(0x1ad)](__dirname,bbpath2,_0x393ea8(0x2d2),_0x393ea8(0x211)));}),app['get'](_0x13f62c(0x1a2),(_0x23a353,_0x544b9d)=>{const _0x412648=_0x13f62c;_0x544b9d['sendFile'](path[_0x412648(0x1ad)](__dirname,bbpath2,_0x412648(0x2d2),'index.html'));}),app[_0x13f62c(0x215)](_0x13f62c(0x27d),(_0x17c056,_0x312c17)=>{const _0x54266e=_0x13f62c;_0x312c17['sendFile'](path[_0x54266e(0x1ad)](__dirname,bbpath2,'build',_0x54266e(0x211)));}),app[_0x13f62c(0x215)](_0x13f62c(0x276),(_0x437c83,_0x4d96e7)=>{const _0x80cbd1=_0x13f62c;_0x4d96e7[_0x80cbd1(0x1b1)](path[_0x80cbd1(0x1ad)](__dirname,bbpath2,'build',_0x80cbd1(0x211)));}),app[_0x13f62c(0x215)]('/:bot/history',(_0x3d2a32,_0x270746)=>{const _0x236eba=_0x13f62c;_0x270746[_0x236eba(0x1b1)](path[_0x236eba(0x1ad)](__dirname,bbpath2,_0x236eba(0x2d2),'index.html'));}),app['get'](_0x13f62c(0x219),(_0x63d073,_0x169730)=>{const _0x1fdc66=_0x13f62c;_0x169730[_0x1fdc66(0x1b1)](path[_0x1fdc66(0x1ad)](__dirname,bbpath2,_0x1fdc66(0x2d2),_0x1fdc66(0x211)));}),app[_0x13f62c(0x215)](_0x13f62c(0x2bd),(_0x5d14d1,_0x367e93)=>{const _0x4160ea=_0x13f62c;_0x367e93[_0x4160ea(0x1b1)](path[_0x4160ea(0x1ad)](__dirname,bbpath2,_0x4160ea(0x2d2),_0x4160ea(0x211)));});if(HOST)http[_0x13f62c(0x205)](PORT,HOST);else http[_0x13f62c(0x205)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require(_0x13f62c(0x266));let tgBot;if(settings[_0x13f62c(0x296)]&&settings[_0x13f62c(0x296)]!=''&&settings[_0x13f62c(0x203)]&&settings[_0x13f62c(0x203)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x1899fc=_0x13f62c;console[_0x1899fc(0x2ab)](''),console[_0x1899fc(0x2ab)](_0x1899fc(0x1d5)),logging(_0x1899fc(0x19f)+PORT),console[_0x1899fc(0x2ab)]('-----------------------------------------------------------------------------------');if(config[_0x1899fc(0x1f5)]!=0x0)config[_0x1899fc(0x259)](_0x3d7462=>{const _0x14f63a=_0x1899fc;if(_0x3d7462[_0x14f63a(0x2c6)]=='enabled'||_0x3d7462['status']==_0x14f63a(0x207))logging(_0x14f63a(0x28a)+_0x3d7462['botID']+_0x14f63a(0x210)+_0x3d7462['botname']),startBot([_0x3d7462[_0x14f63a(0x2b3)],userID],{'cwd':bbpath},function(_0x37a819){if(_0x37a819)logging(_0x37a819);});else(_0x3d7462[_0x14f63a(0x2c6)]==_0x14f63a(0x2d9)||_0x3d7462[_0x14f63a(0x2c6)]==_0x14f63a(0x26a))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x3d7462[_0x14f63a(0x2b3)]+_0x14f63a(0x210)+_0x3d7462[_0x14f63a(0x1e9)]);});else!newBot&&console[_0x1899fc(0x2ab)](_0x1899fc(0x20d));if(newBot)addBot();console['log'](_0x1899fc(0x1d5)),console[_0x1899fc(0x2ab)]('');}function startSocket(){const _0x5df74e=_0x13f62c;io['on'](_0x5df74e(0x29c),_0x352926=>{const _0xe1916e=_0x5df74e;let _0x3a703a,_0x4d27a8,_0x38a170,_0xd810bc,_0x4629a5;const _0x5e2968=_0x352926[_0xe1916e(0x2e7)][_0xe1916e(0x2e3)]['referer'];_0x4d27a8=_0x5e2968[_0xe1916e(0x267)](/bot[0-9]{3}/);if(_0x4d27a8)_0x38a170=_0x4d27a8[0x0][_0xe1916e(0x267)](/[0-9]{3}/);if(_0x38a170)_0x3a703a=_0x38a170[0x0];else _0x3a703a=_0xe1916e(0x1f0);const _0x469188=_0x352926[_0xe1916e(0x2e7)][_0xe1916e(0x295)][_0xe1916e(0x1b6)];if(!_0x469188)_0x352926['emit'](_0xe1916e(0x2c6),{'publicKey':secure['publicKey']});else{_0xd810bc=timelyDecrypt(_0x469188,![]);if(!_0xd810bc)_0x352926[_0xe1916e(0x202)](_0xe1916e(0x2c6),{'publicKey':secure[_0xe1916e(0x1a9)]});else{_0x4629a5=normalizeIP(_0x352926['conn'][_0xe1916e(0x252)])[_0xe1916e(0x195)];if(!devices[_0xd810bc])devices[_0xd810bc]={'uuid':_0xd810bc,'access':{'token':null}};devices[_0xd810bc]['ip']=_0x4629a5;const _0x85385b=addClient(_0x352926['id'],_0xd810bc,_0x3a703a);setAccess(_0x85385b),emitMessages(),_0x352926['on'](_0xe1916e(0x1fe),_0x2c9010=>{const _0x5546bb=_0xe1916e,_0x7ed619=timelyDecrypt(_0x2c9010[_0x5546bb(0x1f6)]);if(_0x7ed619){_0x2c9010={'username':_0x2c9010['username'],'password':_0x7ed619},devices[_0xd810bc]['access']=validateCredentials(_0x2c9010,_0xd810bc);if(devices[_0xd810bc]['access'][_0x5546bb(0x2c7)]==![]&&devices[_0xd810bc][_0x5546bb(0x19a)][_0x5546bb(0x1ff)]==_0x5546bb(0x26b))_0x352926[_0x5546bb(0x202)](_0x5546bb(0x2c6),{'access':devices[_0xd810bc]['access']}),loginAccess2FA(_0xd810bc,_0x4629a5);else{if(devices[_0xd810bc][_0x5546bb(0x19a)][_0x5546bb(0x2c7)]==![]&&devices[_0xd810bc]['access'][_0x5546bb(0x1ff)]==_0x5546bb(0x277))_0x352926['emit']('status',{'access':devices[_0xd810bc]['access']});else devices[_0xd810bc]['access'][_0x5546bb(0x2c7)]&&devices[_0xd810bc]['access'][_0x5546bb(0x1ff)]==_0x5546bb(0x299)&&(getClientsWithUuid(_0xd810bc)['forEach'](_0xa8e61a=>{setAccess(_0xa8e61a);}),setTokenRefresh(_0xd810bc),setSessionTimeout('login',_0xd810bc));}}else logging(_0x5546bb(0x18c));}),_0x352926['on'](_0xe1916e(0x20b),()=>{resetPassword();}),_0x352926['on'](_0xe1916e(0x2e4),_0x176ba2=>{removeClient(_0x352926['id']);});}}});}function initClient(_0x545500){const _0x1d89ca=_0x13f62c;if(_0x545500!=_0x1d89ca(0x1f0)&&config[_0x1d89ca(0x1d8)]!=''){if(pid[_0x545500])pid[_0x545500][_0x1d89ca(0x2fb)]({'function':_0x1d89ca(0x2b4),'args':null});}}function getSocket(_0xaab67c){const _0x26804b=_0x13f62c;return io[_0x26804b(0x28d)][_0x26804b(0x28d)][_0x26804b(0x215)](_0xaab67c);}function setAccess(_0x276d99){const _0x32d463=_0x13f62c,_0x91ffd0=getSocket(_0x276d99['id']),_0x11399f=_0x276d99[_0x32d463(0x263)],_0x2a5334=_0x276d99[_0x32d463(0x1c6)];devices[_0x11399f]['access']=validateAccess(devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x264)],_0x11399f),_0x91ffd0[_0x32d463(0x1ad)](_0x11399f);if(devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x2c7)]){_0x91ffd0['join'](_0x2a5334);if(_0x2a5334==_0x32d463(0x1f0))initializeSocketBotManager(_0x91ffd0);else initializeSocketBot(_0x91ffd0);initClient(_0x2a5334);}devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x264)]&&devices[_0x11399f][_0x32d463(0x19a)]['reason']==_0x32d463(0x22d)&&setSessionTimeout('2FA',_0x11399f),devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x264)]&&devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x1ff)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x32d463(0x1fe),_0x11399f),_0x91ffd0[_0x32d463(0x202)]('status',{'status':_0x276d99[_0x32d463(0x285)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x11399f][_0x32d463(0x19a)],'externalip':devices[_0x11399f]['ip'],'publicKey':secure[_0x32d463(0x1a9)],'userid':settings[_0x32d463(0x26c)],'validInstallation':validInstallation}),devices[_0x11399f][_0x32d463(0x19a)][_0x32d463(0x2c7)]==![]&&devices[_0x11399f][_0x32d463(0x19a)]['reason']==_0x32d463(0x23c)&&temporaryAccess2FA(_0x11399f,devices[_0x11399f]['ip']);}function setSessionTimeout(_0x3f3862,_0x5838cc){const _0x160a5e=_0x13f62c;let _0x566fff;if(_0x3f3862=='login')_0x566fff=loginExpiry*0x3c*0x3e8;else _0x566fff=devices[_0x5838cc][_0x160a5e(0x2bc)]['expiry']*0x3c*0x3e8-(new Date()[_0x160a5e(0x27e)]()-devices[_0x5838cc][_0x160a5e(0x2bc)][_0x160a5e(0x2d5)]);if(devices[_0x5838cc][_0x160a5e(0x238)])clearTimeout(devices[_0x5838cc][_0x160a5e(0x238)]);devices[_0x5838cc][_0x160a5e(0x238)]=setTimeout(()=>{const _0x16bec5=_0x160a5e;if(devices[_0x5838cc][_0x16bec5(0x1f8)])clearTimeout(devices[_0x5838cc][_0x16bec5(0x1f8)]);removeSocketListeners(_0x5838cc),addBlacklist(_0x5838cc),devices[_0x5838cc][_0x16bec5(0x2bc)]=null,devices[_0x5838cc][_0x16bec5(0x284)]=null,devices[_0x5838cc]['access'][_0x16bec5(0x264)]=null,devices[_0x5838cc][_0x16bec5(0x19a)]=validateAccess(devices[_0x5838cc][_0x16bec5(0x19a)][_0x16bec5(0x264)],_0x5838cc),!(devices[_0x5838cc]['access'][_0x16bec5(0x2c7)]&&devices[_0x5838cc][_0x16bec5(0x19a)][_0x16bec5(0x1ff)]==_0x16bec5(0x218))&&(_0x3f3862==_0x16bec5(0x1fe)?io['to'](_0x5838cc)[_0x16bec5(0x202)]('status',{'access':{'allow':![],'reason':_0x16bec5(0x20f),'token':null}}):io['to'](_0x5838cc)[_0x16bec5(0x202)](_0x16bec5(0x2c6),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x5838cc][_0x16bec5(0x19a)][_0x16bec5(0x264)]=null;},_0x566fff);}function setTokenRefresh(_0x2ea9f7){const _0x6c3ca5=_0x13f62c;if(devices[_0x2ea9f7][_0x6c3ca5(0x1f8)])clearTimeout(devices[_0x2ea9f7][_0x6c3ca5(0x1f8)]);devices[_0x2ea9f7][_0x6c3ca5(0x1f8)]=setTimeout(()=>{const _0xa0a581=_0x6c3ca5;getClientsWithUuid(_0x2ea9f7)[_0xa0a581(0x1f5)]!=0x0?(devices[_0x2ea9f7][_0xa0a581(0x19a)]=refreshToken(_0x2ea9f7),io['to'](_0x2ea9f7)[_0xa0a581(0x202)](_0xa0a581(0x2c6),{'status':_0xa0a581(0x24b),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2ea9f7][_0xa0a581(0x19a)],'externalip':devices[_0x2ea9f7]['ip'],'publicKey':secure[_0xa0a581(0x1a9)],'validInstallation':validInstallation}),setTokenRefresh(_0x2ea9f7)):clearTimeout(devices[_0x2ea9f7][_0xa0a581(0x1f8)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2cf1e9){const _0x3ad5b8=_0x13f62c,_0x40ce91=getClient(_0x2cf1e9['id'])['uuid'];_0x2cf1e9['emit'](_0x3ad5b8(0x1b5),config),_0x2cf1e9[_0x3ad5b8(0x202)](_0x3ad5b8(0x2c2),cleanSettings()),_0x2cf1e9['on'](_0x3ad5b8(0x1ce),_0x4adf18=>{const _0x1a8f1b=_0x3ad5b8;if(validateAccess(_0x4adf18,_0x40ce91)['allow'])addBot();else logging(_0x1a8f1b(0x1a0));}),_0x2cf1e9['on']('update-bot',(_0x58d579,_0x388853)=>{const _0x594791=_0x3ad5b8;if(validateAccess(_0x388853,_0x40ce91)[_0x594791(0x2c7)])toggleBot(_0x58d579[_0x594791(0x2b3)],_0x58d579[_0x594791(0x2c6)],_0x58d579[_0x594791(0x220)]);else logging(_0x594791(0x22a));}),_0x2cf1e9['on'](_0x3ad5b8(0x1ab),(_0x7f1004,_0xb94541)=>{const _0x1df921=_0x3ad5b8;if(validateAccess(_0xb94541,_0x40ce91)[_0x1df921(0x2c7)])toggleBotMode(_0x7f1004);else logging(_0x1df921(0x22a));}),_0x2cf1e9['on'](_0x3ad5b8(0x217),(_0x1f54bc,_0x45096e)=>{const _0x4d08d1=_0x3ad5b8;if(validateAccess(_0x45096e,_0x40ce91)[_0x4d08d1(0x2c7)])deleteBot(_0x1f54bc);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x2cf1e9['on'](_0x3ad5b8(0x2a7),(_0xfacf48,_0x451a20)=>{const _0xd9def3=_0x3ad5b8;if(validateAccess(_0x451a20,_0x40ce91)[_0xd9def3(0x2c7)])storeSettings(_0xfacf48,!![]);else logging(_0xd9def3(0x2fa));}),_0x2cf1e9['on'](_0x3ad5b8(0x26f),_0x17b381=>{const _0x241b6e=_0x3ad5b8;if(validateAccess(_0x17b381,_0x40ce91)['allow'])updateBB();else logging(_0x241b6e(0x1eb));}),_0x2cf1e9['on']('get-messages',_0x126272=>{const _0x514612=_0x3ad5b8;if(validateAccess(_0x126272,_0x40ce91)[_0x514612(0x2c7)])getMessages();else logging(_0x514612(0x2d7));}),_0x2cf1e9['on'](_0x3ad5b8(0x236),(_0x3ec0c1,_0x922dee)=>{const _0x191187=_0x3ad5b8;if(validateAccess(_0x922dee,_0x40ce91)[_0x191187(0x2c7)])confirmMessage(_0x3ec0c1);else logging(_0x191187(0x20c));}),_0x2cf1e9['on'](_0x3ad5b8(0x1b2),_0x307ce1=>{const _0x58f10b=_0x3ad5b8;if(validateAccess(_0x307ce1,_0x40ce91)[_0x58f10b(0x2c7)]){if(devices[_0x40ce91][_0x58f10b(0x1f8)])clearTimeout(devices[_0x40ce91]['pidRefreshToken']);if(devices[_0x40ce91][_0x58f10b(0x238)])clearTimeout(devices[_0x40ce91][_0x58f10b(0x238)]);removeSocketListeners(getClient(_0x2cf1e9['id'])[_0x58f10b(0x263)]),addBlacklist(_0x40ce91),devices[_0x40ce91]['telegramIpApproval']=null,devices[_0x40ce91][_0x58f10b(0x284)]=null,devices[_0x40ce91]['access'][_0x58f10b(0x264)]=null,io['to'](getClient(_0x2cf1e9['id'])[_0x58f10b(0x263)])[_0x58f10b(0x202)](_0x58f10b(0x2c6),{'access':{'allow':![],'reason':_0x58f10b(0x1f4),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x5f5d28){const _0x4d2862=_0x13f62c,_0xa53438=getClient(_0x5f5d28['id'])[_0x4d2862(0x1c6)],_0x53ba96=getClient(_0x5f5d28['id'])[_0x4d2862(0x263)];_0x5f5d28['on'](_0x4d2862(0x1d4),(_0x414354,_0x2038ba)=>{const _0x2b5753=_0x4d2862;if(validateAccess(_0x2038ba,_0x53ba96)[_0x2b5753(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438][_0x2b5753(0x2fb)]({'function':_0x2b5753(0x24d),'args':_0x414354});}else logging(_0x2b5753(0x1ca));}),_0x5f5d28['on'](_0x4d2862(0x241),(_0x5c3f7f,_0x245b26)=>{const _0x458711=_0x4d2862;if(validateAccess(_0x245b26,_0x53ba96)[_0x458711(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438]['send']({'function':_0x458711(0x1fd),'args':_0x5c3f7f});}else logging('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x5f5d28['on']('get-portfolio',(_0x4e767d,_0x5e941d)=>{const _0x30fc0f=_0x4d2862;if(validateAccess(_0x5e941d,_0x53ba96)['allow']){if(pid[_0xa53438])pid[_0xa53438][_0x30fc0f(0x2fb)]({'function':'getPortfolio','args':_0x4e767d});}else logging(_0x30fc0f(0x1ee));}),_0x5f5d28['on']('store-configuration',(_0x3bdc13,_0x555213)=>{const _0x31976c=_0x4d2862;if(validateAccess(_0x555213,_0x53ba96)[_0x31976c(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438][_0x31976c(0x2fb)]({'function':_0x31976c(0x2b1),'args':_0x3bdc13});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x5f5d28['on']('store-headless',(_0x39f12e,_0x362cb5)=>{const _0x3efb66=_0x4d2862;if(validateAccess(_0x362cb5,_0x53ba96)[_0x3efb66(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438][_0x3efb66(0x2fb)]({'function':_0x3efb66(0x2db),'args':_0x39f12e});}else logging(_0x3efb66(0x27f));}),_0x5f5d28['on'](_0x4d2862(0x2e9),_0x5195cc=>{const _0x46ebab=_0x4d2862;if(validateAccess(_0x5195cc,_0x53ba96)[_0x46ebab(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438][_0x46ebab(0x2fb)]({'function':_0x46ebab(0x271),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x5f5d28['on'](_0x4d2862(0x2c3),(_0xc88ad,_0x2c5fa2)=>{const _0x9bcf13=_0x4d2862;if(validateAccess(_0x2c5fa2,_0x53ba96)[_0x9bcf13(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438]['send']({'function':_0x9bcf13(0x233),'args':_0xc88ad});}else logging(_0x9bcf13(0x2b7));}),_0x5f5d28['on']('cancel-loading',_0x295406=>{const _0x4647c6=_0x4d2862;if(validateAccess(_0x295406,_0x53ba96)[_0x4647c6(0x2c7)]){if(pid[_0xa53438])pid[_0xa53438]['send']({'function':_0x4647c6(0x19e),'args':null});}else logging(_0x4647c6(0x2e5));}),_0x5f5d28['on'](_0x4d2862(0x26f),_0x5f39d5=>{const _0x33b398=_0x4d2862;if(validateAccess(_0x5f39d5,_0x53ba96)[_0x33b398(0x2c7)])updateBB();else logging(_0x33b398(0x1eb));}),_0x5f5d28['on'](_0x4d2862(0x1cd),_0x3ed9dc=>{const _0x49f603=_0x4d2862;if(validateAccess(_0x3ed9dc,_0x53ba96)[_0x49f603(0x2c7)])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5f5d28['on'](_0x4d2862(0x236),(_0x1464e2,_0x54cf79)=>{const _0x25f08e=_0x4d2862;if(validateAccess(_0x54cf79,_0x53ba96)[_0x25f08e(0x2c7)])confirmMessage(_0x1464e2);else logging(_0x25f08e(0x20c));}),_0x5f5d28['on']('logout',_0x59e11a=>{const _0x4dd279=_0x4d2862;if(validateAccess(_0x59e11a,_0x53ba96)[_0x4dd279(0x2c7)]){if(devices[_0x53ba96][_0x4dd279(0x1f8)])clearTimeout(devices[_0x53ba96][_0x4dd279(0x1f8)]);if(devices[_0x53ba96][_0x4dd279(0x238)])clearTimeout(devices[_0x53ba96][_0x4dd279(0x238)]);removeSocketListeners(getClient(_0x5f5d28['id'])[_0x4dd279(0x263)]),addBlacklist(_0x53ba96),devices[_0x53ba96][_0x4dd279(0x2bc)]=null,devices[_0x53ba96][_0x4dd279(0x284)]=null,devices[_0x53ba96][_0x4dd279(0x19a)][_0x4dd279(0x264)]=null,io['to'](getClient(_0x5f5d28['id'])[_0x4dd279(0x263)])['emit'](_0x4dd279(0x2c6),{'access':{'allow':![],'reason':_0x4dd279(0x1f4),'token':null}});}else logging(_0x4dd279(0x2c9));});}function removeSocketListeners(_0x4f0b23){const _0x438c9b=_0x13f62c;getClientsWithUuid(_0x4f0b23)[_0x438c9b(0x259)](_0x51add9=>{const _0x196785=_0x438c9b;getSocket(_0x51add9['id'])[_0x196785(0x1e6)]();});}function cleanSettings(){const _0xa2d698=_0x13f62c;let _0xbea393=settings;return settings['telegramToken']&&settings[_0xa2d698(0x296)]!=''&&(_0xbea393={..._0xbea393,'telegramToken':_0xa2d698(0x1c5)}),settings['bbPassword']&&settings[_0xa2d698(0x2dc)]!=''&&(_0xbea393={..._0xbea393,'bbPassword':_0xa2d698(0x1c5)}),_0xbea393;}function updateBB(){const _0x5a7675=_0x13f62c;installingUpdate=!![],config['forEach'](_0x2defcd=>{const _0x13a70e=_0x5b23;restartBot(_0x2defcd[_0x13a70e(0x2b3)]);}),process[_0x5a7675(0x2fb)]({'update':!![]},_0x395b61=>{});}function startBot(_0x7235c7,_0x4503c6,_0x5d8b4a){const _0x3f1857=_0x13f62c;let _0x13cf4f=![];const _0x3229de=_0x7235c7[0x0];_0x4503c6={..._0x4503c6,'stdio':['inherit','inherit','inherit',_0x3f1857(0x1d0)]},pid[_0x3229de]=childProcess['fork'](botfile,_0x7235c7,_0x4503c6),pid[_0x3229de]['on'](_0x3f1857(0x2ad),_0xf81799=>{const _0x10d49f=_0x3f1857;switch(Object[_0x10d49f(0x2ec)](_0xf81799)[0x0]){case _0x10d49f(0x1e9):updateBotName(_0x3229de,_0xf81799[_0x10d49f(0x1e9)]);break;case _0x10d49f(0x224):updateBotManager();break;case'status':updateStatus(_0x3229de,_0xf81799['status']);break;case _0x10d49f(0x220):updateLive(_0x3229de,_0xf81799[_0x10d49f(0x220)]);break;case _0x10d49f(0x291):updateLive(_0x3229de,_0xf81799[_0x10d49f(0x291)]),io['to'](_0x3229de)[_0x10d49f(0x202)](_0x10d49f(0x2c6),{'access':{'allow':![],'reason':_0x10d49f(0x2d0),'token':null}});break;case _0x10d49f(0x254):_0xf81799['stop']==_0x10d49f(0x228)&&restartBot(_0x3229de);_0xf81799[_0x10d49f(0x254)]==_0x10d49f(0x258)&&toggleBot(_0x3229de,'disabled',_0x10d49f(0x189));break;case _0x10d49f(0x247):sendTelegram(_0x3229de,_0xf81799[_0x10d49f(0x247)]);break;case _0x10d49f(0x243):sendTelegramMsg(_0xf81799['telegrammsg']);break;case'function':io['to'](_0x3229de)[_0x10d49f(0x202)](_0xf81799[_0x10d49f(0x1c1)],_0xf81799[_0x10d49f(0x1ba)]);break;}}),pid[_0x3229de]['on']('error',function(_0x3472d0){if(_0x13cf4f)return;_0x13cf4f=!![],_0x5d8b4a(_0x3472d0);}),pid[_0x3229de]['on'](_0x3f1857(0x23d),function(_0x579639){const _0x127688=_0x3f1857;if(installingUpdate)return;if(_0x13cf4f)return;_0x13cf4f=!![],_0x5d8b4a(null);const _0x2176de=dbConfig[_0x127688(0x215)](_0x127688(0x1b5))['find']({'botID':_0x3229de})[_0x127688(0x2b5)]();_0x2176de&&(_0x2176de[_0x127688(0x2c6)]==_0x127688(0x287)||_0x2176de['status']==_0x127688(0x207))&&(updateLive(_0x3229de,_0x127688(0x189)),logging('restarting\x20Bot\x20'+_0x3229de),startBot([_0x3229de,userID],{'cwd':bbpath},function(_0x2eb30){if(_0x2eb30)logging(_0x2eb30);}));});}function stopBot(_0x31595d){const _0x3e74b1=_0x13f62c;getClientsWithBotID(_0x31595d)[_0x3e74b1(0x259)](_0x51b8de=>{const _0x2e2b94=_0x3e74b1;getSocket(_0x51b8de['id'])[_0x2e2b94(0x2e4)](!![]),removeClient(_0x51b8de['id']);}),pid[_0x31595d]&&(pid[_0x31595d][_0x3e74b1(0x258)](),pid[_0x31595d]=null);}function restartBot(_0x4acb24){const _0x555771=_0x13f62c;if(pid[_0x4acb24])pid[_0x4acb24][_0x555771(0x258)]();}function addBot(){const _0x32699a=_0x13f62c;let _0x5a7a50;for(let _0x4a4a64=0x1;_0x4a4a64<0x3e9;_0x4a4a64++){_0x5a7a50=_0x4a4a64[_0x32699a(0x2ac)]()['padStart'](0x3,'0');let _0x12849f=config[_0x32699a(0x1bd)](_0x299f61=>_0x299f61['botID']==_0x5a7a50);if(!_0x12849f)break;}if(_0x5a7a50===_0x32699a(0x1ae)){logging(_0x32699a(0x1c2));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x5a7a50),dbConfig[_0x32699a(0x215)](_0x32699a(0x1b5))['push']({'botID':_0x5a7a50,'botname':'Bot\x20'+_0x5a7a50,'status':_0x32699a(0x207),'live':''})[_0x32699a(0x29e)](),startBot([_0x5a7a50,userID],{'cwd':bbpath},function(_0x40a342){if(_0x40a342)logging(_0x40a342);}),config=getConfiguration(),io['to'](_0x32699a(0x1f0))['emit']('bots',config);}function deleteBot(_0x238ee1){const _0x546c0=_0x13f62c;getClientsWithBotID(_0x238ee1)['forEach'](_0x275bc3=>{const _0x2568a8=_0x5b23;getSocket(_0x275bc3['id'])[_0x2568a8(0x2e4)](!![]),removeClient(_0x275bc3['id']);}),dbConfig[_0x546c0(0x215)]('bots')[_0x546c0(0x29a)]({'botID':_0x238ee1})['write'](),logging('deleted\x20Bot\x20'+_0x238ee1),stopBot(_0x238ee1);try{fs[_0x546c0(0x22c)](path['join'](configpath,'bot-'+_0x238ee1+'-config.json')),fs['unlinkSync'](path['join'](configpath,_0x546c0(0x1de)+_0x238ee1+_0x546c0(0x2cc))),fs[_0x546c0(0x22c)](path[_0x546c0(0x1ad)](configpath,_0x546c0(0x1de)+_0x238ee1+_0x546c0(0x2f4))),fs[_0x546c0(0x22c)](path['join'](configpath,_0x546c0(0x1de)+_0x238ee1+'-results.json'));}catch(_0x4ef25f){if(_0x4ef25f)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x4ef25f);}config=getConfiguration(),io['to']('botmanager')['emit']('bots',config);}function toggleBot(_0x2d14d8,_0x1e7f37,_0x1352ac){const _0x9f23c8=_0x13f62c;dbConfig[_0x9f23c8(0x215)](_0x9f23c8(0x1b5))[_0x9f23c8(0x1bd)]({'botID':_0x2d14d8})[_0x9f23c8(0x191)]({'status':_0x1e7f37})['assign']({'live':_0x1352ac})[_0x9f23c8(0x29e)]();if(_0x1e7f37==_0x9f23c8(0x287)||_0x1e7f37==_0x9f23c8(0x207))logging(_0x9f23c8(0x1c3)+_0x2d14d8),startBot([_0x2d14d8,userID],{'cwd':bbpath},function(_0x12724c){if(_0x12724c)logging(_0x12724c);});else(_0x1e7f37==_0x9f23c8(0x2d9)||_0x1e7f37==_0x9f23c8(0x26a))&&(logging('disabled\x20Bot\x20'+_0x2d14d8),stopBot(_0x2d14d8));config=getConfiguration(),io['to'](_0x9f23c8(0x1f0))[_0x9f23c8(0x202)](_0x9f23c8(0x1b5),config);}function toggleStatus(_0x29c859){const _0x1642f7=_0x13f62c;let _0x587082=dbConfig[_0x1642f7(0x215)]('bots')[_0x1642f7(0x1bd)]({'botID':_0x29c859})['value'](),_0x3a1f4e;if(_0x587082[_0x1642f7(0x2c6)]==='enabled')_0x3a1f4e='disabled';else{if(_0x587082[_0x1642f7(0x2c6)]===_0x1642f7(0x207))_0x3a1f4e='new-disabled';else{if(_0x587082[_0x1642f7(0x2c6)]==='new-disabled')_0x3a1f4e=_0x1642f7(0x207);else{if(_0x587082[_0x1642f7(0x2c6)]===_0x1642f7(0x2d9))_0x3a1f4e='enabled';}}}return _0x3a1f4e;}function updateStatus(_0x20baf2,_0x385ea2){const _0x1fe12f=_0x13f62c;dbConfig[_0x1fe12f(0x215)](_0x1fe12f(0x1b5))[_0x1fe12f(0x1bd)]({'botID':_0x20baf2})['assign']({'status':_0x385ea2})['write'](),config=getConfiguration(),io['to'](_0x1fe12f(0x1f0))[_0x1fe12f(0x202)](_0x1fe12f(0x1b5),config);}function updateLive(_0x56e210,_0x408f2a){const _0x9a331d=_0x13f62c;dbConfig[_0x9a331d(0x215)]('bots')['find']({'botID':_0x56e210})[_0x9a331d(0x191)]({'live':_0x408f2a})['write'](),config=getConfiguration(),io['to'](_0x9a331d(0x1f0))[_0x9a331d(0x202)]('bots',config);}function updateBotName(_0x1ee5b1,_0x4b6e89){const _0x48c560=_0x13f62c;dbConfig['get'](_0x48c560(0x1b5))[_0x48c560(0x1bd)]({'botID':_0x1ee5b1})['assign']({'botname':_0x4b6e89})[_0x48c560(0x29e)](),config=getConfiguration(),io['to'](_0x48c560(0x1f0))[_0x48c560(0x202)](_0x48c560(0x1b5),config);}function updateBotManager(){const _0x14955a=_0x13f62c;config=getConfiguration(),io['to']('botmanager')[_0x14955a(0x202)](_0x14955a(0x1b5),config);}function toggleBotMode(_0x4a9d65){const _0x2dc9e9=_0x13f62c;if(pid[_0x4a9d65])pid[_0x4a9d65][_0x2dc9e9(0x2fb)]({'function':_0x2dc9e9(0x2ae),'args':null});else{const _0x25af1e=configpath+_0x2dc9e9(0x1de)+_0x4a9d65+_0x2dc9e9(0x282),_0x44ef5e=fs['readFileSync'](_0x25af1e),_0x4b0438=JSON[_0x2dc9e9(0x208)](_0x44ef5e),_0x56d39e=_0x4b0438[_0x2dc9e9(0x1c6)][0x0][_0x2dc9e9(0x2dd)];_0x4b0438['bot'][0x0][_0x2dc9e9(0x2dd)]=!_0x56d39e;const _0xa6594d=JSON[_0x2dc9e9(0x2a1)](_0x4b0438,null,0x2);fs['writeFileSync'](_0x25af1e,_0xa6594d),config=getConfiguration(),io['to']('botmanager')['emit'](_0x2dc9e9(0x1b5),config);}}function telegramError(_0x3be586){const _0x4d525f=_0x13f62c;console[_0x4d525f(0x2ab)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x1d6eea){const _0x5813ea=_0x13f62c;if(_0x1d6eea['from'][_0x5813ea(0x1e5)]!=settings[_0x5813ea(0x203)]&&'@'+_0x1d6eea[_0x5813ea(0x2e1)][_0x5813ea(0x1e5)]!=settings[_0x5813ea(0x203)])return tgBot['sendMessage'](_0x1d6eea['chat']['id'],_0x5813ea(0x21e),{'parse_mode':_0x5813ea(0x281)})[_0x5813ea(0x1a8)](_0x14406d=>{telegramError(_0x14406d);}),![];return!![];}async function initTelegram(){const _0xc994b=_0x13f62c;if(tgBot)tgBot[_0xc994b(0x2e2)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0xc994b(0x296)],{'polling':!![]});let _0x52d6d8=_0xc994b(0x1fa);_0x52d6d8+='\x0a',_0x52d6d8+='/enable\x20-\x20enable\x20notifications\x0a',_0x52d6d8+=_0xc994b(0x280),_0x52d6d8+=_0xc994b(0x268),_0x52d6d8+=_0xc994b(0x1cf),_0x52d6d8+=_0xc994b(0x244),_0x52d6d8+='/off\x20-\x20stop\x20bot(s)\x0a',_0x52d6d8+=_0xc994b(0x1ec),_0x52d6d8+=_0xc994b(0x255),_0x52d6d8+=_0xc994b(0x261),_0x52d6d8+=_0xc994b(0x29f),_0x52d6d8+=_0xc994b(0x2a4),_0x52d6d8+=_0xc994b(0x246);let _0x57313d=_0xc994b(0x1ed);_0x57313d+='\x0a',_0x57313d+=_0x52d6d8,tgBot[_0xc994b(0x2f2)](/\/start/,_0xfd0a41=>{const _0x22c92e=_0xc994b;if(!validateTelegram(_0xfd0a41))return;if(settings['telegramChatId']!=_0xfd0a41['chat']['id'])updateSetting(_0x22c92e(0x1bf),_0xfd0a41[_0x22c92e(0x1d2)]['id']);updateSetting(_0x22c92e(0x1a1),!![]),tgBot[_0x22c92e(0x214)](_0xfd0a41[_0x22c92e(0x1d2)]['id'],_0x57313d)[_0x22c92e(0x1a8)](_0x3d43c8=>{telegramError(_0x3d43c8);});}),tgBot[_0xc994b(0x2f2)](/\/enable/,_0x51e82f=>{const _0x337edd=_0xc994b;if(!validateTelegram(_0x51e82f))return;if(settings['telegramChatId']!=_0x51e82f['chat']['id'])updateSetting(_0x337edd(0x1bf),_0x51e82f[_0x337edd(0x1d2)]['id']);updateSetting(_0x337edd(0x1a1),!![]),tgBot['sendMessage'](_0x51e82f[_0x337edd(0x1d2)]['id'],'Notifications\x20enabled')['catch'](_0x4a6bcc=>{telegramError(_0x4a6bcc);});}),tgBot['onText'](/\/config/,async _0x2fbb8f=>{const _0xbf0f32=_0xc994b;if(!validateTelegram(_0x2fbb8f))return;tgBot['removeListener'](_0xbf0f32(0x192)),tgBot['sendMessage'](_0x2fbb8f['chat']['id'],_0xbf0f32(0x2e6),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0xbf0f32(0x262)},{'text':'Alerts','callback_data':'alerts'},{'text':_0xbf0f32(0x1f2),'callback_data':_0xbf0f32(0x18f)}]]}})[_0xbf0f32(0x1a8)](_0x3d4109=>{telegramError(_0x3d4109);}),tgBot['on'](_0xbf0f32(0x192),async _0x5a1cdf=>{const _0x5759c5=_0xbf0f32,_0x54b358=_0x5a1cdf[_0x5759c5(0x2df)],_0x1c06ab=_0x5a1cdf[_0x5759c5(0x2ad)];tgBot[_0x5759c5(0x1af)](_0x5a1cdf['id'])['then'](async()=>{const _0x5c223f=_0x5759c5;_0x54b358==_0x5c223f(0x262)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x5c223f(0x1a1),!![]),await tgBot['sendMessage'](_0x1c06ab[_0x5c223f(0x1d2)]['id'],_0x5c223f(0x1dc))[_0x5c223f(0x1a8)](_0x38b0c5=>{telegramError(_0x38b0c5);}));_0x54b358=='alerts'&&(updateSetting('telegramEvents',_0x5c223f(0x2d3)),updateSetting(_0x5c223f(0x1a1),!![]),await tgBot[_0x5c223f(0x214)](_0x1c06ab[_0x5c223f(0x1d2)]['id'],_0x5c223f(0x1e7))['catch'](_0x3b94bf=>{telegramError(_0x3b94bf);}));_0x54b358==_0x5c223f(0x18f)&&(updateSetting('telegramEvents',_0x5c223f(0x18f)),updateSetting('telegramEnabled',!![]),await tgBot[_0x5c223f(0x214)](_0x1c06ab[_0x5c223f(0x1d2)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x5a7715=>{telegramError(_0x5a7715);}));if(!settings['telegramChatId'])tgBot[_0x5c223f(0x214)](_0x1c06ab[_0x5c223f(0x1d2)]['id'],_0x5c223f(0x198))[_0x5c223f(0x1a8)](_0x527dc6=>{telegramError(_0x527dc6);});}),tgBot['removeListener'](_0x5759c5(0x192));});}),tgBot[_0xc994b(0x2f2)](/\/status/,_0x159cbb=>{const _0xaab951=_0xc994b;if(!validateTelegram(_0x159cbb))return;const _0x390e36=getBotsWithMode();let _0x8b5a6e=_0xaab951(0x1ef);config[_0xaab951(0x259)](_0x406679=>{const _0x373e91=_0xaab951,_0x537897=_0x390e36['find'](_0x2a3e49=>_0x2a3e49[_0x373e91(0x2b3)]==_0x406679[_0x373e91(0x2b3)])['mode'];_0x8b5a6e+='Bot\x20'+_0x406679[_0x373e91(0x2b3)]+':\x20'+_0x406679[_0x373e91(0x2c6)]+'\x20|\x20'+_0x537897+_0x373e91(0x210)+_0x406679['live']+'\x0a';}),_0x8b5a6e+='\x0a',_0x8b5a6e+=_0xaab951(0x29d),_0x8b5a6e+=!settings[_0xaab951(0x1a1)]?_0xaab951(0x2ba):_0xaab951(0x1a6),_0x8b5a6e+=settings[_0xaab951(0x1a1)]?settings[_0xaab951(0x27a)]==_0xaab951(0x18f)?_0xaab951(0x204):_0xaab951(0x1cb)+settings['telegramEvents']+'\x20only\x0a':'',tgBot[_0xaab951(0x214)](_0x159cbb[_0xaab951(0x1d2)]['id'],_0x8b5a6e,{'parse_mode':_0xaab951(0x281)})[_0xaab951(0x1a8)](_0x266453=>{telegramError(_0x266453);});}),tgBot[_0xc994b(0x2f2)](/\/restart/,_0x1183e2=>{const _0x5956f9=_0xc994b;if(!validateTelegram(_0x1183e2))return;tgBot[_0x5956f9(0x209)](_0x5956f9(0x192));const _0x4936d3=getEnabledBots();if(_0x4936d3[_0x5956f9(0x1f5)]==0x0)tgBot[_0x5956f9(0x214)](_0x1183e2['chat']['id'],_0x5956f9(0x1d7))[_0x5956f9(0x1a8)](_0x5985e8=>{telegramError(_0x5985e8);});else{if(_0x4936d3[_0x5956f9(0x1f5)]>0x1)_0x4936d3[_0x5956f9(0x1f7)]({'botID':_0x5956f9(0x18f)});let _0x485c54=[],_0x20e65=[];const _0x29a5fd=_0x4936d3['length']%0x4==0x0||_0x4936d3['length']%0x4==0x3||_0x4936d3[_0x5956f9(0x1f5)]%0x3==0x1?0x4:0x3;let _0x555a87=0x0;_0x4936d3['forEach']((_0x5df96c,_0x5dc1c4)=>{const _0x39bf0b=_0x5956f9;if(_0x5dc1c4%_0x29a5fd==0x0)_0x20e65=[];_0x20e65[_0x39bf0b(0x1f7)]({'text':_0x5df96c[_0x39bf0b(0x2b3)]=='all'?'All\x20bots':_0x39bf0b(0x2fc)+_0x5df96c['botID'],'callback_data':_0x5df96c[_0x39bf0b(0x2b3)]}),_0x5dc1c4%_0x29a5fd==0x0&&(_0x485c54[_0x555a87]=_0x20e65,_0x555a87++);}),tgBot[_0x5956f9(0x214)](_0x1183e2[_0x5956f9(0x1d2)]['id'],_0x5956f9(0x2de),{'reply_markup':{'inline_keyboard':_0x485c54}})[_0x5956f9(0x1a8)](_0x30e269=>{telegramError(_0x30e269);}),tgBot['on']('callback_query',async _0x591691=>{const _0x2e4120=_0x5956f9,_0x137243=_0x591691[_0x2e4120(0x2df)],_0x249c37=_0x591691[_0x2e4120(0x2ad)];tgBot[_0x2e4120(0x1af)](_0x591691['id'])[_0x2e4120(0x2b6)](async()=>{const _0x513b99=_0x2e4120;_0x137243==_0x513b99(0x18f)?config['forEach'](_0x118e2f=>{const _0x4f4e6f=_0x513b99;restartBot(_0x118e2f[_0x4f4e6f(0x2b3)]);}):restartBot(_0x137243);}),tgBot['removeListener'](_0x2e4120(0x192));});}}),tgBot['onText'](/\/on/,_0x1c7487=>{const _0x81bf9a=_0xc994b;if(!validateTelegram(_0x1c7487))return;tgBot['removeListener'](_0x81bf9a(0x192));const _0x3a255f=getDisabledBots();if(_0x3a255f[_0x81bf9a(0x1f5)]==0x0)tgBot[_0x81bf9a(0x214)](_0x1c7487[_0x81bf9a(0x1d2)]['id'],_0x81bf9a(0x2b2))[_0x81bf9a(0x1a8)](_0x3d7c7b=>{telegramError(_0x3d7c7b);});else{if(_0x3a255f[_0x81bf9a(0x1f5)]>0x1)_0x3a255f['push']({'botID':_0x81bf9a(0x18f)});let _0x861087=[],_0x2dc62d=[];const _0x88c9e6=_0x3a255f[_0x81bf9a(0x1f5)]%0x4==0x0||_0x3a255f[_0x81bf9a(0x1f5)]%0x4==0x3||_0x3a255f[_0x81bf9a(0x1f5)]%0x3==0x1?0x4:0x3;let _0x3877d6=0x0;_0x3a255f[_0x81bf9a(0x259)]((_0x4e3906,_0x215e7a)=>{const _0x1cc34c=_0x81bf9a;if(_0x215e7a%_0x88c9e6==0x0)_0x2dc62d=[];_0x2dc62d[_0x1cc34c(0x1f7)]({'text':_0x4e3906[_0x1cc34c(0x2b3)]==_0x1cc34c(0x18f)?_0x1cc34c(0x26d):_0x1cc34c(0x2fc)+_0x4e3906[_0x1cc34c(0x2b3)],'callback_data':_0x4e3906[_0x1cc34c(0x2b3)]}),_0x215e7a%_0x88c9e6==0x0&&(_0x861087[_0x3877d6]=_0x2dc62d,_0x3877d6++);}),tgBot[_0x81bf9a(0x214)](_0x1c7487[_0x81bf9a(0x1d2)]['id'],_0x81bf9a(0x2f0),{'reply_markup':{'inline_keyboard':_0x861087}})[_0x81bf9a(0x1a8)](_0x21c0cb=>{telegramError(_0x21c0cb);}),tgBot['on'](_0x81bf9a(0x192),async _0x476dfd=>{const _0x35385f=_0x81bf9a,_0x1109fc=_0x476dfd[_0x35385f(0x2df)],_0x5db327=_0x476dfd[_0x35385f(0x2ad)];tgBot[_0x35385f(0x1af)](_0x476dfd['id'])['then'](async()=>{const _0x5bc8f8=_0x35385f;_0x1109fc==_0x5bc8f8(0x18f)?(tgBot[_0x5bc8f8(0x214)](_0x5db327['chat']['id'],_0x5bc8f8(0x1b3))['catch'](_0x2b9d81=>{telegramError(_0x2b9d81);}),_0x3a255f[_0x5bc8f8(0x259)](_0x39444d=>{const _0x29b1d3=_0x5bc8f8;if(_0x39444d['botID']!=_0x29b1d3(0x18f))toggleBot(_0x39444d[_0x29b1d3(0x2b3)],toggleStatus(_0x39444d['botID']),_0x29b1d3(0x189));})):(tgBot[_0x5bc8f8(0x214)](_0x5db327['chat']['id'],_0x5bc8f8(0x274)+_0x1109fc)[_0x5bc8f8(0x1a8)](_0x238689=>{telegramError(_0x238689);}),toggleBot(_0x1109fc,toggleStatus(_0x1109fc),_0x5bc8f8(0x189)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0xc994b(0x2f2)](/\/off/,_0x4d3787=>{const _0x3b2ab9=_0xc994b;if(!validateTelegram(_0x4d3787))return;tgBot['removeListener']('callback_query');const _0x14e8c0=getEnabledBots();if(_0x14e8c0['length']==0x0)tgBot['sendMessage'](_0x4d3787[_0x3b2ab9(0x1d2)]['id'],_0x3b2ab9(0x1d7))[_0x3b2ab9(0x1a8)](_0x5c689d=>{telegramError(_0x5c689d);});else{if(_0x14e8c0[_0x3b2ab9(0x1f5)]>0x1)_0x14e8c0[_0x3b2ab9(0x1f7)]({'botID':_0x3b2ab9(0x18f)});let _0x19fa19=[],_0x589136=[];const _0x32c1da=_0x14e8c0['length']%0x4==0x0||_0x14e8c0[_0x3b2ab9(0x1f5)]%0x4==0x3||_0x14e8c0[_0x3b2ab9(0x1f5)]%0x3==0x1?0x4:0x3;let _0x33c7fa=0x0;_0x14e8c0['forEach']((_0x567929,_0x4d864e)=>{const _0x2ed6b3=_0x3b2ab9;if(_0x4d864e%_0x32c1da==0x0)_0x589136=[];_0x589136['push']({'text':_0x567929[_0x2ed6b3(0x2b3)]==_0x2ed6b3(0x18f)?_0x2ed6b3(0x26d):_0x2ed6b3(0x2fc)+_0x567929[_0x2ed6b3(0x2b3)],'callback_data':_0x567929[_0x2ed6b3(0x2b3)]}),_0x4d864e%_0x32c1da==0x0&&(_0x19fa19[_0x33c7fa]=_0x589136,_0x33c7fa++);}),tgBot[_0x3b2ab9(0x214)](_0x4d3787[_0x3b2ab9(0x1d2)]['id'],_0x3b2ab9(0x2b9),{'reply_markup':{'inline_keyboard':_0x19fa19}})[_0x3b2ab9(0x1a8)](_0x811d26=>{telegramError(_0x811d26);}),tgBot['on'](_0x3b2ab9(0x192),async _0x386d51=>{const _0x17cb9a=_0x3b2ab9,_0x4ad929=_0x386d51['data'],_0xa81e1f=_0x386d51[_0x17cb9a(0x2ad)];tgBot[_0x17cb9a(0x1af)](_0x386d51['id'])[_0x17cb9a(0x2b6)](async()=>{const _0x4f05d7=_0x17cb9a;_0x4ad929==_0x4f05d7(0x18f)?(tgBot['sendMessage'](_0xa81e1f[_0x4f05d7(0x1d2)]['id'],_0x4f05d7(0x193))[_0x4f05d7(0x1a8)](_0x6db3ac=>{telegramError(_0x6db3ac);}),_0x14e8c0[_0x4f05d7(0x259)](_0x238ec6=>{const _0x5960f4=_0x4f05d7;if(_0x238ec6[_0x5960f4(0x2b3)]!=_0x5960f4(0x18f))toggleBot(_0x238ec6[_0x5960f4(0x2b3)],toggleStatus(_0x238ec6[_0x5960f4(0x2b3)]),'stopped');})):(tgBot['sendMessage'](_0xa81e1f[_0x4f05d7(0x1d2)]['id'],_0x4f05d7(0x1d6)+_0x4ad929)[_0x4f05d7(0x1a8)](_0x4326d3=>{telegramError(_0x4326d3);}),toggleBot(_0x4ad929,toggleStatus(_0x4ad929),_0x4f05d7(0x189)));}),tgBot[_0x17cb9a(0x209)](_0x17cb9a(0x192));});}}),tgBot[_0xc994b(0x2f2)](/\/portfolio/,_0x2bbbe4=>{const _0x4d76ee=_0xc994b;if(!validateTelegram(_0x2bbbe4))return;tgBot[_0x4d76ee(0x209)]('callback_query');const _0x1ef0bc=getEnabledBots();if(_0x1ef0bc['length']==0x0)tgBot[_0x4d76ee(0x214)](_0x2bbbe4['chat']['id'],_0x4d76ee(0x1d7))['catch'](_0x56fdf2=>{telegramError(_0x56fdf2);});else{if(_0x1ef0bc[_0x4d76ee(0x1f5)]>0x1){let _0x11eb82=[],_0x1deb4a=[];const _0x39f754=_0x1ef0bc['length']%0x4==0x0||_0x1ef0bc[_0x4d76ee(0x1f5)]%0x4==0x3||_0x1ef0bc['length']%0x3==0x1?0x4:0x3;let _0x1bb08f=0x0;_0x1ef0bc[_0x4d76ee(0x259)]((_0x511dd4,_0x38ea92)=>{const _0x31363e=_0x4d76ee;if(_0x38ea92%_0x39f754==0x0)_0x1deb4a=[];_0x1deb4a[_0x31363e(0x1f7)]({'text':_0x31363e(0x2fc)+_0x511dd4['botID'],'callback_data':_0x511dd4[_0x31363e(0x2b3)]}),_0x38ea92%_0x39f754==0x0&&(_0x11eb82[_0x1bb08f]=_0x1deb4a,_0x1bb08f++);}),tgBot[_0x4d76ee(0x214)](_0x2bbbe4[_0x4d76ee(0x1d2)]['id'],_0x4d76ee(0x2a9),{'reply_markup':{'inline_keyboard':_0x11eb82}})[_0x4d76ee(0x1a8)](_0x3a9fb0=>{telegramError(_0x3a9fb0);}),tgBot['on']('callback_query',async _0x4718b0=>{const _0x4cbf44=_0x4d76ee,_0x2692c2=_0x4718b0['data'],_0x3d961d=_0x4718b0[_0x4cbf44(0x2ad)];tgBot[_0x4cbf44(0x1af)](_0x4718b0['id'])[_0x4cbf44(0x2b6)](async()=>{const _0xfa74d2=_0x4cbf44;if(pid[_0x2692c2])pid[_0x2692c2][_0xfa74d2(0x2fb)]({'function':_0xfa74d2(0x286),'args':null});}),tgBot[_0x4cbf44(0x209)]('callback_query');});}else{const _0x227abc=_0x1ef0bc[0x0][_0x4d76ee(0x2b3)];if(pid[_0x227abc])pid[_0x227abc][_0x4d76ee(0x2fb)]({'function':_0x4d76ee(0x286),'args':null});}}}),tgBot[_0xc994b(0x2f2)](/\/update/,async _0x26c978=>{const _0x176d9b=_0xc994b;if(!validateTelegram(_0x26c978))return;tgBot[_0x176d9b(0x209)](_0x176d9b(0x192)),await getMessages();if(!updateAvailable)tgBot[_0x176d9b(0x214)](_0x26c978['chat']['id'],_0x176d9b(0x288))[_0x176d9b(0x1a8)](_0x12de3c=>{telegramError(_0x12de3c);});else!validInstallation?tgBot['sendMessage'](_0x26c978[_0x176d9b(0x1d2)]['id'],_0x176d9b(0x1bc))['catch'](_0x44c70b=>{telegramError(_0x44c70b);}):(tgBot[_0x176d9b(0x214)](_0x26c978[_0x176d9b(0x1d2)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x176d9b(0x2f8),'callback_data':_0x176d9b(0x2c1)},{'text':'No','callback_data':'no'}]]}})[_0x176d9b(0x1a8)](_0x502240=>{telegramError(_0x502240);}),tgBot['on'](_0x176d9b(0x192),async _0x5bd78b=>{const _0x2e44bc=_0x176d9b,_0x52a0c1=_0x5bd78b['data'],_0x11d1f0=_0x5bd78b['message'];tgBot['answerCallbackQuery'](_0x5bd78b['id'])['then'](async()=>{const _0x52a151=_0x5b23;_0x52a0c1==_0x52a151(0x2c1)&&(await tgBot[_0x52a151(0x214)](_0x11d1f0[_0x52a151(0x1d2)]['id'],_0x52a151(0x2ef))[_0x52a151(0x1a8)](_0x134624=>{telegramError(_0x134624);}),updateBB());_0x52a0c1=='no'&&await tgBot[_0x52a151(0x214)](_0x11d1f0[_0x52a151(0x1d2)]['id'],_0x52a151(0x21a))[_0x52a151(0x1a8)](_0x5b3e88=>{telegramError(_0x5b3e88);});if(!settings[_0x52a151(0x1bf)])tgBot[_0x52a151(0x214)](_0x11d1f0['chat']['id'],_0x52a151(0x198))['catch'](_0x5d5ba0=>{telegramError(_0x5d5ba0);});}),tgBot[_0x2e44bc(0x209)](_0x2e44bc(0x192));}));}),tgBot['onText'](/\/toggle/,_0x490759=>{const _0x8612cb=_0xc994b;if(!validateTelegram(_0x490759))return;tgBot[_0x8612cb(0x209)](_0x8612cb(0x192));const _0x3550bf=getBotsWithMode();if(_0x3550bf[_0x8612cb(0x1f5)]==0x0)tgBot['sendMessage'](_0x490759['chat']['id'],_0x8612cb(0x1d7))[_0x8612cb(0x1a8)](_0x2fed9f=>{telegramError(_0x2fed9f);});else{let _0x2616bb=[],_0xa0427f=[];const _0x37ac75=0x2;let _0x370839=0x0;_0x3550bf[_0x8612cb(0x259)]((_0x19308d,_0x426b9f)=>{const _0x261b36=_0x8612cb;if(_0x426b9f%_0x37ac75==0x0)_0xa0427f=[];_0xa0427f[_0x261b36(0x1f7)]({'text':_0x261b36(0x2fc)+_0x19308d[_0x261b36(0x2b3)]+'\x20('+_0x19308d['mode']+')','callback_data':_0x19308d[_0x261b36(0x2b3)]}),_0x426b9f%_0x37ac75==0x0&&(_0x2616bb[_0x370839]=_0xa0427f,_0x370839++);}),tgBot[_0x8612cb(0x214)](_0x490759[_0x8612cb(0x1d2)]['id'],_0x8612cb(0x1be),{'reply_markup':{'inline_keyboard':_0x2616bb}})['catch'](_0x4977ec=>{telegramError(_0x4977ec);}),tgBot['on'](_0x8612cb(0x192),async _0x386fa4=>{const _0x2587c9=_0x8612cb,_0xbc7ad8=_0x386fa4[_0x2587c9(0x2df)],_0x513f14=_0x386fa4[_0x2587c9(0x2ad)];tgBot['answerCallbackQuery'](_0x386fa4['id'])[_0x2587c9(0x2b6)](async()=>{const _0x382970=_0x2587c9,_0x2a10af=_0x3550bf[_0x382970(0x1bd)](_0x462530=>_0x462530[_0x382970(0x2b3)]==_0xbc7ad8),_0x4cda5b=_0x2a10af['mode']==_0x382970(0x249)?'manual':_0x382970(0x249);tgBot[_0x382970(0x214)](_0x513f14[_0x382970(0x1d2)]['id'],_0x382970(0x2f7)+_0xbc7ad8+_0x382970(0x2d4)+_0x4cda5b+_0x382970(0x1b7))[_0x382970(0x1a8)](_0x46b48f=>{telegramError(_0x46b48f);}),toggleBotMode(_0xbc7ad8);}),tgBot[_0x2587c9(0x209)](_0x2587c9(0x192));});}}),tgBot['onText'](/\/names/,_0x201e09=>{const _0x596352=_0xc994b;if(!validateTelegram(_0x201e09))return;let _0x21995d='';config[_0x596352(0x259)](_0x4e11dc=>{const _0x416146=_0x596352;_0x21995d+=_0x416146(0x2fc)+_0x4e11dc[_0x416146(0x2b3)]+':\x20'+_0x4e11dc[_0x416146(0x1e9)]+'\x0a';}),tgBot['sendMessage'](_0x201e09[_0x596352(0x1d2)]['id'],_0x21995d,{'parse_mode':'HTML'})[_0x596352(0x1a8)](_0x4e7f2f=>{telegramError(_0x4e7f2f);});}),tgBot[_0xc994b(0x2f2)](/\/disable/,_0xc27680=>{const _0x4e044f=_0xc994b;if(!validateTelegram(_0xc27680))return;tgBot[_0x4e044f(0x214)](_0xc27680['chat']['id'],_0x4e044f(0x21c))[_0x4e044f(0x1a8)](_0x2ff820=>{telegramError(_0x2ff820);}),updateSetting('telegramEnabled',![]);}),tgBot[_0xc994b(0x2f2)](/\/help/,_0xab7cf7=>{const _0x16f10c=_0xc994b;if(!validateTelegram(_0xab7cf7))return;tgBot[_0x16f10c(0x214)](_0xab7cf7[_0x16f10c(0x1d2)]['id'],_0x52d6d8)[_0x16f10c(0x1a8)](_0x621774=>{telegramError(_0x621774);});}),tgBot['on'](_0xc994b(0x1a4),_0x1eb9ad=>{const _0x19be88=_0xc994b;_0x1eb9ad['toString']()['includes'](_0x19be88(0x2f3))&&(logging(_0x19be88(0x265)),tgBot[_0x19be88(0x2e2)](),tgBot=null,io['to'](_0x19be88(0x1f0))[_0x19be88(0x202)](_0x19be88(0x1a5),_0x19be88(0x265)));}),process[_0xc994b(0x250)](_0xc994b(0x289),()=>{const _0x37dec1=_0xc994b;if(tgBot)tgBot[_0x37dec1(0x2e2)]();process[_0x37dec1(0x23d)](0x1);}),process[_0xc994b(0x250)]('SIGTERM',()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){const _0x1c038b=_0x13f62c;tgBot&&(tgBot[_0x1c038b(0x2e2)](),tgBot=null);}function sendTelegram(_0x588016,_0xde87b1){const _0x25a86a=_0x13f62c;if(settings['telegramEnabled']){if(settings[_0x25a86a(0x27a)]==_0x25a86a(0x18f)||(_0xde87b1[_0x25a86a(0x20e)]==_0x25a86a(0x270)||_0xde87b1[_0x25a86a(0x20e)]==_0x25a86a(0x1e0))&&settings[_0x25a86a(0x27a)]==_0x25a86a(0x2d3)||_0xde87b1[_0x25a86a(0x20e)]==_0x25a86a(0x278)&&settings[_0x25a86a(0x27a)]==_0x25a86a(0x262)){if(tgBot&&settings[_0x25a86a(0x1bf)]){if(_0xde87b1['showname'])tgBot['sendMessage'](settings[_0x25a86a(0x1bf)],_0xde87b1[_0x25a86a(0x1e9)]+'\x20>\x20'+_0xde87b1['event'])['catch'](_0x13edca=>{telegramError(_0x13edca);});else tgBot['sendMessage'](settings[_0x25a86a(0x1bf)],_0x25a86a(0x2fc)+_0x588016+_0x25a86a(0x25f)+_0xde87b1[_0x25a86a(0x1b8)])[_0x25a86a(0x1a8)](_0x562052=>{telegramError(_0x562052);});}}}}async function sendTelegramMsg(_0x5ca920,_0x4ab2b7='HTML'){const _0x487f24=_0x13f62c;return settings['telegramEnabled']&&tgBot&&settings['telegramChatId']?(await tgBot[_0x487f24(0x214)](settings['telegramChatId'],_0x5ca920,{'parse_mode':_0x4ab2b7})['catch'](_0x514ca8=>{telegramError(_0x514ca8);}),!![]):![];}function getDeviceWithIp(_0x1a3b83){const _0x4684cb=_0x13f62c;return devices[_0x4684cb(0x1bd)](_0x1e3af3=>_0x1e3af3['ip']===_0x1a3b83);}function temporaryAccess2FA(_0x77c03,_0x3df0ee){const _0x484b5d=_0x13f62c;let _0x25923e=new Date(),_0x48754b=![];if(lastIpApproval){if(_0x25923e-lastIpApproval<0x1388)_0x48754b=!![];}lastIpApproval=new Date();if(_0x48754b)return;tgBot&&settings[_0x484b5d(0x1bf)]&&(tgBot[_0x484b5d(0x209)](_0x484b5d(0x192)),tgBot[_0x484b5d(0x214)](settings[_0x484b5d(0x1bf)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3df0ee)['show']+_0x484b5d(0x25c),{'parse_mode':_0x484b5d(0x281),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x484b5d(0x216),'callback_data':'15'},{'text':_0x484b5d(0x251),'callback_data':'30'},{'text':_0x484b5d(0x1e3),'callback_data':'reject'}]]}})[_0x484b5d(0x1a8)](_0x1b32fd=>{telegramError(_0x1b32fd);}),tgBot['on']('callback_query',async _0x9b3455=>{const _0x54c3d5=_0x484b5d,_0xf3e09a=_0x9b3455['data'],_0x4de68a=_0x9b3455[_0x54c3d5(0x2ad)];tgBot[_0x54c3d5(0x1af)](_0x9b3455['id'])[_0x54c3d5(0x2b6)](async()=>{const _0x19d281=_0x54c3d5;devices[_0x77c03][_0x19d281(0x2bc)]={'clientip':_0x3df0ee,'timestamp':new Date()['getTime'](),'expiry':_0xf3e09a},_0xf3e09a!='reject'?(await tgBot['sendMessage'](_0x4de68a[_0x19d281(0x1d2)]['id'],_0x19d281(0x1f9)+_0xf3e09a+_0x19d281(0x212),{'parse_mode':_0x19d281(0x281)})['catch'](_0x44f34f=>{telegramError(_0x44f34f);}),io['to'](_0x77c03)[_0x19d281(0x202)](_0x19d281(0x2c6),{'access':{'allow':![],'reason':_0x19d281(0x2d0),'token':null}})):(await tgBot[_0x19d281(0x214)](_0x4de68a[_0x19d281(0x1d2)]['id'],_0x19d281(0x2da))[_0x19d281(0x1a8)](_0x41255a=>{telegramError(_0x41255a);}),io['to'](_0x77c03)[_0x19d281(0x202)](_0x19d281(0x2c6),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot['removeListener'](_0x54c3d5(0x192));}));}function loginAccess2FA(_0x5236c7,_0x7a4c75){const _0x3fdd06=_0x13f62c;tgBot&&settings[_0x3fdd06(0x1bf)]&&(tgBot['removeListener'](_0x3fdd06(0x192)),tgBot['sendMessage'](settings[_0x3fdd06(0x1bf)],_0x3fdd06(0x2ca)+normalizeIP(_0x7a4c75)[_0x3fdd06(0x1ac)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3fdd06(0x1e3),'callback_data':_0x3fdd06(0x1e3)}]]}})[_0x3fdd06(0x1a8)](_0x214375=>{telegramError(_0x214375);}),tgBot['on']('callback_query',async _0x2aefa0=>{const _0x2d7d55=_0x3fdd06,_0x18efe8=_0x2aefa0[_0x2d7d55(0x2df)],_0x4e80b2=_0x2aefa0['message'];tgBot[_0x2d7d55(0x1af)](_0x2aefa0['id'])[_0x2d7d55(0x2b6)](async()=>{const _0x462085=_0x2d7d55;devices[_0x5236c7][_0x462085(0x284)]={'clientip':_0x7a4c75,'timestamp':new Date()[_0x462085(0x27e)](),'expiry':_0x18efe8},_0x18efe8!=_0x462085(0x1e3)?(await tgBot[_0x462085(0x214)](_0x4e80b2['chat']['id'],_0x462085(0x221),{'parse_mode':'HTML'})['catch'](_0x3da949=>{telegramError(_0x3da949);}),io['to'](_0x5236c7)[_0x462085(0x202)](_0x462085(0x2c6),{'access':{'allow':![],'reason':_0x462085(0x2d0),'token':null}})):(await tgBot[_0x462085(0x214)](_0x4e80b2[_0x462085(0x1d2)]['id'],_0x462085(0x2d8))[_0x462085(0x1a8)](_0x30fa87=>{telegramError(_0x30fa87);}),io['to'](_0x5236c7)[_0x462085(0x202)]('status',{'access':{'allow':![],'reason':_0x462085(0x2c0),'token':null}}));}),tgBot[_0x2d7d55(0x209)](_0x2d7d55(0x192));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x48a32a=_0x13f62c;return dbConfig[_0x48a32a(0x215)](_0x48a32a(0x1b5))[_0x48a32a(0x25a)]('botID')['filter']({'status':_0x48a32a(0x287)})[_0x48a32a(0x2b5)]()||[];}function _0x521f(){const _0x4f361e=['auto','mixpanel','connected','split','emitHistory','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Invalid\x20IP\x20address','once','30\x20min','remoteAddress','/:bot','stop','/names\x20-\x20show\x20bot\x20names\x0a','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','14TcgyMI','kill','forEach','sortBy','lastmsgemitted','</b>\x20?','45VvXpfD','child_process','\x20>\x20','Markdown','/status\x20-\x20show\x20bot(s)\x20status\x0a','orders','uuid','token','Invalid\x20Telegram\x20token','node-telegram-bot-api','match','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','bbvReceive','new-disabled','2FA\x20login\x20required','userid','All\x20bots','compareSync','update-bb','error','getStartingBalances','isIPv4MappedAddress','lowdb/adapters/FileSync','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','(((.+)+)+)+$','/:bot/coins','invalid\x20credentials','order','entries','telegramEvents','whitelist','env','/:bot/performance','getTime','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','/disable\x20-\x20disable\x20notifications\x0a','HTML','-config.json','uuid-random','telegram2FaApproval','server','sendPortfolioTelegram','enabled','Your\x20installation\x20is\x20already\x20up\x20to\x20date','SIGINT','starting\x20bot\x20|\x20Bot\x20','set','constructor','sockets','Invalid\x20username\x20or\x20IP\x20address','lastmsgtelegram','getFullYear','started','RSA-OAEP','Error:\x20Invalid\x20argument\x20','No\x20authentication\x20token','auth','telegramToken','473495oHILhq','bb-config.json','login\x20token\x20generated','remove','defaults','connection','<b>Telegram\x20Bot\x20Status:</b>\x0a','write','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','backup/','stringify','default','map','/update\x20-\x20update\x20Balance\x20Bot\x0a','latestversion','slice','store-settings','decrypt','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','Token\x20blacklisted','log','toString','message','toggleBotMode','createServer','crypto','storeConfiguration','All\x20bots\x20running\x20right\x20now','botID','initclient','value','then','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','clients','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Notifications\x20disabled\x0a','path','telegramIpApproval','/:bot/support','https://hodlerhacks.com','loginRequired','2FA\x20login\x20rejected','yes','settings','place-order','randomFillSync','NTBA_FIX_319','status','allow','ipv6','Unauthorized\x20attempt\x20to\x20log\x20out','Allow\x20login\x20from\x20IP\x20address\x20<b>','host','-events.json','secret','copyFileSync','Password\x20reset\x20rejected','reload','blacklist','build','alerts','\x20to\x20','timestamp','1774370JndvgY','Unauthorized\x20attempt\x20to\x20get\x20messages','Login\x20rejected','disabled','Temporary\x20access\x20rejected','storeHeadless','bbPassword','headless','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','data','mkdirSync','from','stopPolling','headers','disconnect','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','handshake','mode','get-starting-balances','hybrid-crypto-js','::1','keys','alias','3000','Starting\x20Balance\x20Bot\x20update','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','includes','onText','404\x20Not\x20Found','-performance.json','f2aRequired','running','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Yes','readFileSync','Unauthorized\x20attempt\x20to\x20update\x20settings','send','Bot\x20','startsWith','build2','1273104OdysWt','min','stopped','init','598926YeRSZj','Unauthorized\x20login\x20attempt\x20(timeout)','isValid','sign','all','readdirSync','assign','callback_query','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','timeshift','store','use','request','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','messages','access','getMinutes','lowdb','getMonth','cancelLoading','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','Unauthorized\x20attempt\x20to\x20add\x20bot','telegramEnabled','/:bot/portfolio','exp','polling_error','notification','Notifications\x20enabled\x0a','bb/','catch','publicKey','6b67f3d61ee94b8f5c80b4affef4c4d9','toggle-bot-mode','show','join','1000','answerCallbackQuery','bcryptjs','sendFile','logout','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','getHours','bots','encryptedUuid','\x20mode','event','replace','args','getUTCHours','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','find','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','telegramChatId','toIPv4MappedAddress','function','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','enabled\x20Bot\x20','expiry','************','bot','jsonwebtoken','padStart','static','Unauthorized\x20attempt\x20to\x20get\x20logs','Notifications\x20types:\x20','bb-settings.json','get-messages','add-bot','/restart\x20-\x20restart\x20bot(s)\x0a','ipc','existsSync','chat','randomBytes','get-logs','-----------------------------------------------------------------------------------','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','No\x20bots\x20running\x20right\x20now','apiKey','sha256','apply',',\x20must\x20be\x20a\x204\x20digit\x20number','Ok,\x20will\x20send\x20order\x20notifications\x20only','hashSync','bot-','date-fns','success','api-eu.mixpanel.com','test','reject','filter','username','removeAllListeners','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Invalid\x20authentication\x20token\x20(1)','botname','bbUsername','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Unauthorized\x20attempt\x20to\x20get\x20portfolio','<b>Balance\x20Bot\x20Status:</b>\x0a','botmanager','@analytics/google-analytics-v3','All','3452050vzrUHa','logged\x20out','length','password','push','pidRefreshToken','Access\x20enabled\x20for\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','number','version','deleteHistoryAlerts','login','reason','port','RSA','emit','telegramUsername','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','listen','isDirectory','new','parse','removeListener',':\x20Bot\x20Mgr\x20>\x20','reset-password','Unauthorized\x20attempt\x20to\x20confirm\x20message','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','type','access\x20timeout','\x20|\x20','index.html','\x20minutes','secure','sendMessage','get','15\x20min','delete-bot','login\x20not\x20required','/:bot/configuration','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','6250952Hbvmnv','Notifications\x20disabled','yargs/yargs','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','any','live','Login\x20accepted','page','login\x20required','updatebotmanager','Server','graphql-request','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','restart','name','Unauthorized\x20attempt\x20to\x20update\x20bot','24vfkzQF','unlinkSync','temporary\x20token\x20generated','*$1*','::ffff:127.0.0.1','clientip','hasOwnProperty','config/','placeOrder','track','$1_$2_$3','confirm-message','3111834ogeNwZ','pidExpireLogin','generateKeyPairAsync','getDate','temporary\x20access\x20not\x20allowed','2FA\x20required','exit','Balance\x20Bot','bbvNew','privateKey','delete-alerts','6tqfmOn','telegrammsg','/on\x20-\x20start\x20bot(s)\x0a','User\x20has\x20been\x20validated','/help\x20-\x20show\x20available\x20commands\x0a','telegram','express'];_0x521f=function(){return _0x4f361e;};return _0x521f();}function getDisabledBots(){const _0x3db6d7=_0x13f62c;return dbConfig[_0x3db6d7(0x215)]('bots')[_0x3db6d7(0x25a)](_0x3db6d7(0x2b3))[_0x3db6d7(0x1e4)]({'status':'disabled'})['value']()||[];}function getBotsWithMode(){const _0xf98a2b=_0x13f62c,_0x361193=dbConfig[_0xf98a2b(0x215)](_0xf98a2b(0x1b5))[_0xf98a2b(0x25a)](_0xf98a2b(0x2b3))[_0xf98a2b(0x2b5)]()||[];return _0x361193['forEach'](_0xc34cdc=>{const _0x2c6050=_0xf98a2b,_0x590b94=configpath+'bot-'+_0xc34cdc['botID']+'-config.json',_0x4e6140=fs[_0x2c6050(0x1d1)](_0x590b94);if(_0x4e6140){const _0x31a0f0=fs[_0x2c6050(0x2f9)](_0x590b94);try{const _0x5d15e3=JSON[_0x2c6050(0x208)](_0x31a0f0),_0x5691bb=_0x5d15e3?_0x5d15e3[_0x2c6050(0x1c6)][0x0][_0x2c6050(0x2dd)]:![];_0xc34cdc[_0x2c6050(0x2e8)]=_0x5691bb?_0x2c6050(0x249):'manual';}catch(_0x1d7a03){_0xc34cdc['mode']='manual';}}else _0xc34cdc[_0x2c6050(0x2e8)]='manual';}),_0x361193;}async function initUser(){const _0xa6e4c4=_0x13f62c;if(!settings[_0xa6e4c4(0x26c)]){const _0x25f78a=uuidRandom();mixpanel[_0xa6e4c4(0x2ed)](_0x25f78a),updateSetting(_0xa6e4c4(0x26c),_0x25f78a);}}async function initSecure(){const _0x4adff2=_0x13f62c;let _0x69ff1f=getSecure();if(!_0x69ff1f[_0x4adff2(0x231)](_0x4adff2(0x2cd))){let _0x551672=await generateKeys();_0x69ff1f[_0x4adff2(0x1a9)]=_0x551672[_0x4adff2(0x1a9)],_0x69ff1f['privateKey']=_0x551672[_0x4adff2(0x240)],_0x69ff1f[_0x4adff2(0x2cd)]=crypto[_0x4adff2(0x1d3)](0x20)[_0x4adff2(0x2ac)]('hex');;storeSecure(_0x69ff1f);}}function getSettings(){const _0x46286d=_0x13f62c;return dbSettings[_0x46286d(0x215)]('settings')[_0x46286d(0x2b5)]()||{};}function getSecure(){const _0x19565f=_0x13f62c;return dbSecure['get'](_0x19565f(0x213))[_0x19565f(0x2b5)]()||{};}function getBlacklist(){const _0x4ef1a2=_0x13f62c;return dbSecure[_0x4ef1a2(0x215)](_0x4ef1a2(0x2d1))['value']()||[];}function broadcastToBots(_0x582d49,_0x3c7be1){const _0x1aad96=_0x13f62c;config[_0x1aad96(0x259)](_0xd2f0ba=>{const _0xab247a=_0x1aad96;if(_0xd2f0ba[_0xab247a(0x2c6)]==_0xab247a(0x287)&&_0xd2f0ba[_0xab247a(0x220)]==_0xab247a(0x2f6)){if(pid[_0xd2f0ba['botID']])pid[_0xd2f0ba[_0xab247a(0x2b3)]][_0xab247a(0x2fb)]({[_0x582d49]:_0x3c7be1});}});}function storeSettings(_0x5c6c17,_0x58b5d5=![]){const _0x179028=_0x13f62c;_0x5c6c17={...settings,..._0x5c6c17};if(_0x58b5d5&&_0x5c6c17[_0x179028(0x2dc)]!=_0x179028(0x1c5)&&_0x5c6c17[_0x179028(0x2dc)]!=''){const _0x6e7843=crypt[_0x179028(0x2a8)](secure['privateKey'],_0x5c6c17['bbPassword'])[_0x179028(0x2ad)][_0x179028(0x24c)]('@')[0x0],_0x5b44fa=bcrypt[_0x179028(0x1dd)](_0x6e7843,saltRounds);_0x5c6c17={..._0x5c6c17,'bbPassword':_0x5b44fa};}if(_0x58b5d5&&_0x5c6c17['telegramToken']!=_0x179028(0x1c5)&&_0x5c6c17['telegramToken']!=''){const _0x3e594b=crypt[_0x179028(0x2a8)](secure[_0x179028(0x240)],_0x5c6c17[_0x179028(0x296)])['message'][_0x179028(0x24c)]('@')[0x0];_0x5c6c17={..._0x5c6c17,'telegramToken':_0x3e594b};}const _0x3d39c4=_0x5c6c17[_0x179028(0x296)]!=_0x179028(0x1c5)&&_0x5c6c17[_0x179028(0x296)]!=settings[_0x179028(0x296)]||_0x5c6c17['telegramUsername']!=settings[_0x179028(0x203)],_0x320c42=_0x5c6c17[_0x179028(0x296)]==''||_0x5c6c17[_0x179028(0x203)]=='';if(_0x3d39c4)_0x5c6c17['telegramEvents']='all';for(const [_0x3c5496,_0x40e38e]of Object[_0x179028(0x279)](_0x5c6c17)){if(_0x3c5496==_0x179028(0x296)&&_0x40e38e==_0x179028(0x1c5)){_0x5c6c17[_0x179028(0x296)]=settings[_0x179028(0x296)];continue;};if(_0x3c5496==_0x179028(0x2dc)&&_0x40e38e=='************'){_0x5c6c17[_0x179028(0x2dc)]=settings[_0x179028(0x2dc)];continue;};dbSettings[_0x179028(0x28b)]('settings.'+_0x3c5496,_0x40e38e)[_0x179028(0x29e)]();}settings=_0x5c6c17,io['to'](_0x179028(0x1f0))['emit'](_0x179028(0x2c2),cleanSettings()),broadcastToBots(_0x179028(0x194),settings['timeshift']);if(_0x3d39c4&&!_0x320c42)initTelegram();if(_0x3d39c4&&_0x320c42)disableTelegram();getAllClients()[_0x179028(0x259)](_0x24bcf4=>{const _0x6b3668=_0x179028;getSocket(_0x24bcf4['id'])[_0x6b3668(0x202)](_0x6b3668(0x2c6),{'access':{'allow':![],'reason':_0x6b3668(0x2d0),'token':null}});});}function updateSetting(_0x2f2b1e,_0x21eb82){const _0x5e9fee=_0x13f62c;dbSettings[_0x5e9fee(0x28b)]('settings.'+_0x2f2b1e,_0x21eb82)['write'](),settings=getSettings(),io['to'](_0x5e9fee(0x1f0))[_0x5e9fee(0x202)](_0x5e9fee(0x2c2),cleanSettings());}function storeSecure(_0x522ed2){const _0x4a2e10=_0x13f62c;dbSecure[_0x4a2e10(0x215)]('secure')[_0x4a2e10(0x1f7)](_0x522ed2)[_0x4a2e10(0x29e)](),secure=_0x522ed2;}function addBlacklist(_0x337dc2){const _0x3a43b8=_0x13f62c;cleanBlacklist();let _0x3ece8b;devices[_0x337dc2][_0x3a43b8(0x2bc)]?_0x3ece8b=Math['max'](devices[_0x337dc2][_0x3a43b8(0x2bc)][_0x3a43b8(0x1c4)],loginExpiry):_0x3ece8b=loginExpiry,dbSecure[_0x3a43b8(0x215)](_0x3a43b8(0x2d1))[_0x3a43b8(0x1f7)]({'expiry':new Date()[_0x3a43b8(0x27e)]()+_0x3ece8b*0x3c*0x3e8,'token':devices[_0x337dc2][_0x3a43b8(0x19a)]['token']})[_0x3a43b8(0x29e)](),blacklist=dbSecure[_0x3a43b8(0x215)](_0x3a43b8(0x2d1))['value']();}function cleanBlacklist(){const _0x388435=_0x13f62c;let _0x5d8c8e=dbSecure[_0x388435(0x215)]('blacklist')['cloneDeep']()[_0x388435(0x2b5)](),_0x4871cb=new Date()['getTime']();_0x5d8c8e[_0x388435(0x259)](_0x276ab9=>{const _0x3a051a=_0x388435;_0x276ab9['expiry']<_0x4871cb&&dbSecure[_0x3a051a(0x215)]('blacklist')['remove']({'expiry':_0x276ab9['expiry']})[_0x3a051a(0x29e)]();});}function initStates(){let _0x1fd285=getConfiguration();_0x1fd285['forEach'](_0x1b3fc4=>{const _0x486ac7=_0x5b23;_0x1b3fc4['live']=_0x486ac7(0x189);}),storeConfiguration(_0x1fd285);}function onKeys(){const _0x4ccd37=new RSA();return new Promise(_0x4e63e3=>{const _0x16b1d2=_0x5b23;_0x4ccd37[_0x16b1d2(0x239)]()[_0x16b1d2(0x2b6)](_0x4f0dc6=>{_0x4e63e3(_0x4f0dc6);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x3644e0=_0x13f62c;let _0x13b5d2=getSettings(),_0xa0604f=![];!_0x13b5d2[_0x3644e0(0x231)](_0x3644e0(0x28f))&&(_0x13b5d2[_0x3644e0(0x28f)]=0x0,_0xa0604f=!![]);!_0x13b5d2[_0x3644e0(0x231)](_0x3644e0(0x25b))&&(_0x13b5d2['lastmsgemitted']=0x0,_0xa0604f=!![]);!_0x13b5d2[_0x3644e0(0x231)]('latestversion')&&(_0x13b5d2['latestversion']='0.0.0',_0xa0604f=!![]);if(_0xa0604f)storeSettings(_0x13b5d2);}function storeConfiguration(_0x52a3c5){const _0x42b3fc=_0x13f62c;dbConfig[_0x42b3fc(0x215)]('bots')['remove']()[_0x42b3fc(0x29e)](),_0x52a3c5['forEach'](_0x31ca0e=>{const _0x119964=_0x42b3fc;delete _0x31ca0e[_0x119964(0x2e8)];}),dbConfig[_0x42b3fc(0x215)](_0x42b3fc(0x1b5))[_0x42b3fc(0x1f7)](..._0x52a3c5)[_0x42b3fc(0x29e)](),config=_0x52a3c5;}function resetPassword(){const _0x964270=_0x13f62c;tgBot&&settings[_0x964270(0x1bf)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x964270(0x214)](settings['telegramChatId'],_0x964270(0x256),{'parse_mode':_0x964270(0x281),'reply_markup':{'inline_keyboard':[[{'text':_0x964270(0x2c1),'callback_data':_0x964270(0x2c1)},{'text':'no','callback_data':'no'}]]}})[_0x964270(0x1a8)](_0x331a71=>{telegramError(_0x331a71);}),tgBot['on'](_0x964270(0x192),async _0x5ec1c0=>{const _0x1712b4=_0x964270,_0x1bca23=_0x5ec1c0['data'],_0x11b552=_0x5ec1c0[_0x1712b4(0x2ad)];tgBot['answerCallbackQuery'](_0x5ec1c0['id'])[_0x1712b4(0x2b6)](async()=>{const _0x162d27=_0x1712b4;if(_0x1bca23!='no'){const _0x5cd6c7=0xf,_0x8cd9f9='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x399bd9=Array['from'](crypto[_0x162d27(0x2c4)](new Uint32Array(_0x5cd6c7)))[_0x162d27(0x2a3)](_0x387392=>_0x8cd9f9[_0x387392%_0x8cd9f9[_0x162d27(0x1f5)]])[_0x162d27(0x1ad)](''),_0x2c5e82=bcrypt['hashSync'](_0x399bd9,saltRounds);storeSettings({'bbPassword':_0x2c5e82}),await tgBot[_0x162d27(0x214)](_0x11b552[_0x162d27(0x1d2)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x399bd9,{'parse_mode':_0x162d27(0x281)})[_0x162d27(0x1a8)](_0x3394a9=>{telegramError(_0x3394a9);});}else await tgBot[_0x162d27(0x214)](_0x11b552[_0x162d27(0x1d2)]['id'],_0x162d27(0x2cf))[_0x162d27(0x1a8)](_0x169aea=>{telegramError(_0x169aea);});}),tgBot['removeListener'](_0x1712b4(0x192));}));}function logging(_0x2b8f66){const _0x307d3a=_0x13f62c;console[_0x307d3a(0x2ab)](getTimeStamp()+_0x307d3a(0x20a)+_0x2b8f66);if(tgBot&&settings[_0x307d3a(0x1bf)]&&settings[_0x307d3a(0x27a)]!=_0x307d3a(0x262))tgBot['sendMessage'](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x2b8f66)['catch'](_0x40d577=>{telegramError(_0x40d577);});}function getServerTime(){const _0x3a8f07=_0x13f62c,_0x4abbaa=new Date();return _0x4abbaa[_0x3a8f07(0x290)]()+'/'+(_0x4abbaa[_0x3a8f07(0x19d)]()+0x1)[_0x3a8f07(0x2ac)]()[_0x3a8f07(0x1c8)](0x2,'0')+'/'+_0x4abbaa[_0x3a8f07(0x23a)]()[_0x3a8f07(0x2ac)]()[_0x3a8f07(0x1c8)](0x2,'0')+'\x20'+_0x4abbaa[_0x3a8f07(0x1b4)]()['toString']()[_0x3a8f07(0x1c8)](0x2,'0')+':'+_0x4abbaa[_0x3a8f07(0x19b)]()[_0x3a8f07(0x2ac)]()[_0x3a8f07(0x1c8)](0x2,'0')+':'+_0x4abbaa['getSeconds']()['toString']()[_0x3a8f07(0x1c8)](0x2,'0');}function getTimeStamp(){const _0x2a24ac=_0x13f62c,_0x581623=shiftedTime();return _0x581623[_0x2a24ac(0x290)]()+'/'+(_0x581623['getMonth']()+0x1)[_0x2a24ac(0x2ac)]()[_0x2a24ac(0x1c8)](0x2,'0')+'/'+_0x581623[_0x2a24ac(0x23a)]()['toString']()[_0x2a24ac(0x1c8)](0x2,'0')+'\x20'+_0x581623[_0x2a24ac(0x1b4)]()['toString']()[_0x2a24ac(0x1c8)](0x2,'0')+':'+_0x581623[_0x2a24ac(0x19b)]()[_0x2a24ac(0x2ac)]()['padStart'](0x2,'0')+':'+_0x581623['getSeconds']()[_0x2a24ac(0x2ac)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x15adb0=_0x13f62c,_0x3b9d17=new Date();let _0xbf7a4b=_0x3b9d17;if(settings[_0x15adb0(0x194)]&&settings[_0x15adb0(0x194)]!==0x0)_0xbf7a4b=fns['add'](_0x3b9d17,{'hours':settings['timeshift']});return _0xbf7a4b;}function startScheduler(){const _0x175368=_0x13f62c;let _0x528687=new Date()[_0x175368(0x1bb)]();_0x528687==0x1&&backupConfigFiles();_0x528687==0x9&&triggerAnalytics();_0x528687%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x9f9afe=_0x13f62c;fs[_0x9f9afe(0x190)](configpath,{'withFileTypes':!![]})[_0x9f9afe(0x259)](_0x566a2a=>{const _0x3263c4=_0x9f9afe;if(!_0x566a2a[_0x3263c4(0x206)]())fs[_0x3263c4(0x2ce)](configpath+_0x566a2a[_0x3263c4(0x229)],configbackuppath+_0x566a2a[_0x3263c4(0x229)]);});}async function getPublicIp(){const _0x4bad4f=_0x13f62c;try{const _0x2ce456=await axios[_0x4bad4f(0x215)]('https://api.ipify.org?format=json');publicip=_0x2ce456[_0x4bad4f(0x2df)]['ip'];}catch(_0x5dd4f5){}}async function triggerAnalytics(_0x39dcf3=![]){const _0xd9b2ac=_0x13f62c;if(!publicip)await getPublicIp();const _0x22f88e=getBotsWithMode();let _0x5b9b40=0x0;_0x22f88e['forEach'](_0x103769=>{const _0x6b64a6=_0x5b23;if(_0x103769['status']===_0x6b64a6(0x287))_0x5b9b40++;}),mixpanel[_0xd9b2ac(0x234)](_0xd9b2ac(0x225),{'distinct_id':settings[_0xd9b2ac(0x26c)],'ip':publicip,'version':serverversion,'numbots':_0x22f88e[_0xd9b2ac(0x1f5)],'numbotsenabled':_0x5b9b40}),!_0x39dcf3&&analytics[_0xd9b2ac(0x222)]({'title':'Balance\x20Bot\x20Server','href':_0xd9b2ac(0x2be),'path':'/v'+serverversion});}async function getMessages(){const _0x225a6a=_0x13f62c,_0x2c7ebc=_0x225a6a(0x227),_0x5195bd=new GraphQLClient(_0x2c7ebc),_0xd95478={'authorization':_0x225a6a(0x24e)},_0xb80cfd=serverversion[_0x225a6a(0x24c)]('.'),_0x2797e3=_0xb80cfd[0x0]+'.'+_0xb80cfd[0x1],_0x231090=Math[_0x225a6a(0x300)](settings[_0x225a6a(0x28f)],settings[_0x225a6a(0x25b)]),_0x264364={'last':parseInt(_0x231090),'bbm':_0x2797e3},_0x3d36df=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x31b1a7;try{_0x31b1a7=await _0x5195bd[_0x225a6a(0x197)](_0x3d36df,_0x264364,_0xd95478);}catch(_0x2b20e6){}if(_0x31b1a7&&_0x31b1a7[_0x225a6a(0x199)]){let _0x142e4f=settings[_0x225a6a(0x28f)];newMessages=[];for(const _0x596fa of _0x31b1a7[_0x225a6a(0x199)]){newMessages['push'](_0x596fa);if(_0x596fa[_0x225a6a(0x23f)])updateSetting(_0x225a6a(0x2a5),_0x596fa[_0x225a6a(0x23f)]);let _0x2e24da=_0x596fa[_0x225a6a(0x23f)]?serverversion>=_0x596fa[_0x225a6a(0x23f)]:![];if(!_0x2e24da&&_0x596fa[_0x225a6a(0x1fb)]>_0x142e4f){if(_0x596fa['bbvReceive']===_0x225a6a(0x21f)||serverversion[_0x225a6a(0x2fd)](_0x596fa[_0x225a6a(0x269)])){let _0x8086e7=''+_0x596fa['title']+'\x0a\x0a'+_0x596fa['message'];const _0xf6c53d=await sendTelegramMsg(toTelegramMarkdown(_0x8086e7),_0x225a6a(0x260));if(_0xf6c53d)_0x142e4f=_0x596fa['number'];}}}updateAvailable=isNewerVersion(settings[_0x225a6a(0x2a5)],serverversion),updateSetting(_0x225a6a(0x28f),_0x142e4f),emitMessages();}}function emitMessages(){const _0x13f648=_0x13f62c,_0x55ed4e=settings[_0x13f648(0x25b)];let _0x287033=[];newMessages[_0x13f648(0x259)](_0x39ef13=>{const _0x2e783c=_0x13f648;_0x39ef13[_0x2e783c(0x1fb)]>_0x55ed4e&&_0x287033[_0x2e783c(0x1f7)](_0x39ef13);}),_0x287033[_0x13f648(0x1f5)]>0x0&&getAllClients()[_0x13f648(0x259)](_0x5408b6=>{const _0x2fb7a7=_0x13f648;getSocket(_0x5408b6['id'])[_0x2fb7a7(0x202)]('message',_0x287033);});}function confirmMessage(_0x3597a9){const _0x3d00d8=_0x13f62c;updateSetting(_0x3d00d8(0x25b),Number(_0x3597a9));}function isNewerVersion(_0x2f1a6a,_0x6be0c){const _0xcdf001=_0x13f62c,_0x78ad2a=_0x6be0c['split']('.'),_0x1328a5=_0x2f1a6a['split']('.');for(var _0x219339=0x0;_0x219339<_0x1328a5[_0xcdf001(0x1f5)];_0x219339++){const _0x220aee=~~_0x1328a5[_0x219339],_0x537887=~~_0x78ad2a[_0x219339];if(_0x220aee>_0x537887)return!![];if(_0x220aee<_0x537887)return![];}return![];}function toTelegramMarkdown(_0x1707f4){const _0x2531be=_0x13f62c,_0x264415=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0xd6b4ec=/\*{2}(.+?)\*{2}/gim;return _0x1707f4=_0x1707f4[_0x2531be(0x1b9)](_0x264415,_0x2531be(0x235))['replace'](_0xd6b4ec,_0x2531be(0x22e)),_0x1707f4;}function validateCredentials(_0x1749c4,_0x2ea580){const _0x37ebae=_0x13f62c;if(_0x1749c4[_0x37ebae(0x1e5)]==settings['bbUsername']&&bcrypt[_0x37ebae(0x26e)](_0x1749c4[_0x37ebae(0x1f6)],settings['bbPassword'])){if(settings[_0x37ebae(0x2f5)])return{'allow':![],'reason':_0x37ebae(0x26b),'token':null};else{const _0x10352e=generateLoginToken(_0x2ea580);return{'allow':!![],'reason':_0x37ebae(0x299),'token':_0x10352e};}}else return{'allow':![],'reason':_0x37ebae(0x277),'token':null};}function refreshToken(_0x44d143){const _0x592533=_0x13f62c,_0x5e34a8=generateLoginToken(_0x44d143);return{'allow':!![],'reason':_0x592533(0x299),'token':_0x5e34a8};}function validateAccess(_0x6b318d,_0x30a96e){const _0x1bbccd=_0x13f62c;let _0x2c392d=devices[_0x30a96e]['ip'],_0x59896c;const _0x4e43ed=_0x2c0930=>{const _0x20b219=_0x5b23;if(settings[_0x20b219(0x2bf)]){if(settings[_0x20b219(0x2f5)]){if(telegram2FaApproved(_0x30a96e)){const _0xfd892e=generateLoginToken(_0x30a96e);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0xfd892e};}else return{'allow':![],'reason':_0x20b219(0x223),'token':null};}else return _0x59896c=validToken(_0x2c0930,_0x30a96e),_0x59896c[_0x20b219(0x231)](_0x20b219(0x1e0))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x2c0930}:{'allow':![],'reason':_0x20b219(0x223),'token':null};}else return{'allow':!![],'reason':_0x20b219(0x218),'token':null};};if(settings['whitelistEnabled']){let _0x21107b=[...settings[_0x1bbccd(0x27b)],_0x1bbccd(0x2eb),_0x1bbccd(0x22f),'127.0.0.1'];if(_0x21107b[_0x1bbccd(0x2f1)](_0x2c392d))return _0x4e43ed(_0x6b318d);else{_0x59896c=validToken(_0x6b318d,_0x30a96e);if(_0x59896c[_0x1bbccd(0x231)]('success'))return _0x4e43ed(_0x6b318d);else{if(telegramIpApproved(_0x30a96e)){const _0x3f6624=generateToken(_0x30a96e);return _0x59896c=_0x4e43ed(_0x6b318d),_0x59896c['allow']?{'allow':!![],'reason':_0x1bbccd(0x22d),'token':_0x3f6624}:_0x59896c;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x1bbccd(0x23b),'token':null};}}}else return _0x4e43ed(_0x6b318d);}function timelyDecrypt(_0x2b473b,_0x887a5e=!![]){const _0x50093f=_0x13f62c;if(_0x2b473b)try{const _0x25b1d2=crypt[_0x50093f(0x2a8)](secure['privateKey'],_0x2b473b)[_0x50093f(0x2ad)],_0x72a0ac=_0x25b1d2['split']('@')[0x0],_0xb02894=_0x25b1d2[_0x50093f(0x24c)]('@')[0x1],_0xd211ca=new Date()[_0x50093f(0x27e)]();if(_0x887a5e){if(_0xd211ca-_0xb02894<maxSecretAge*0x3e8)return _0x72a0ac;else return![];}else return _0x72a0ac;}catch(_0x52100d){return![];}else return![];}const validToken=(_0x142d76,_0x2bb512)=>{const _0x1eb67=_0x13f62c,_0x395bcf=devices[_0x2bb512]['ip'];if(!_0x142d76)return{'error':_0x1eb67(0x294)};for(let _0x5b446e of blacklist){if(_0x5b446e['token']==_0x142d76)return{'error':_0x1eb67(0x2aa)};}let _0x15e368;try{_0x15e368=jwt['verify'](_0x142d76,secure['secret']+_0x2bb512);}catch{return{'error':_0x1eb67(0x1e8)};}if(!_0x15e368[_0x1eb67(0x231)](_0x1eb67(0x230))&&!_0x15e368[_0x1eb67(0x231)](_0x1eb67(0x1e5))||!_0x15e368['hasOwnProperty'](_0x1eb67(0x1a3)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x15e368['hasOwnProperty'](_0x1eb67(0x1e5))&&_0x15e368[_0x1eb67(0x231)](_0x1eb67(0x230))){const {clientip:_0x287590}=_0x15e368;return _0x395bcf==_0x287590?{'success':_0x1eb67(0x245)}:{'error':_0x1eb67(0x24f)};}else{if(_0x15e368[_0x1eb67(0x231)](_0x1eb67(0x1e5))&&_0x15e368[_0x1eb67(0x231)]('clientip')){const {username:_0x58d043,clientip:_0x23920f}=_0x15e368;return settings[_0x1eb67(0x1ea)]==_0x58d043&&_0x395bcf==_0x23920f?{'success':_0x1eb67(0x245)}:{'error':_0x1eb67(0x28e)};}}},generateLoginToken=_0x27adf9=>{const _0x3a334a=_0x13f62c;if(_0x27adf9){const _0x25e0dd=devices[_0x27adf9]['ip'];return jwt[_0x3a334a(0x18e)]({'username':settings['bbUsername'],'clientip':_0x25e0dd},secure[_0x3a334a(0x2cd)]+_0x27adf9,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x2bef46=>{const _0x473410=_0x13f62c;if(_0x2bef46){const _0x446dd8=devices[_0x2bef46]['ip'];return jwt['sign']({'clientip':_0x446dd8},secure['secret']+_0x2bef46,{'expiresIn':devices[_0x2bef46][_0x473410(0x2bc)][_0x473410(0x1c4)]*0x3c});}else return![];},telegramIpApproved=_0x203a5c=>{const _0xaf249f=_0x13f62c;let _0x12d435=![];return devices[_0x203a5c][_0xaf249f(0x2bc)]&&devices[_0x203a5c][_0xaf249f(0x2bc)]['expiry']!='reject'&&(_0x12d435=devices[_0x203a5c][_0xaf249f(0x2bc)][_0xaf249f(0x230)]==devices[_0x203a5c]['ip']&&new Date()['getTime']()-devices[_0x203a5c][_0xaf249f(0x2bc)][_0xaf249f(0x2d5)]<devices[_0x203a5c][_0xaf249f(0x2bc)][_0xaf249f(0x1c4)]*0x3c*0x3e8),_0x12d435;},telegram2FaApproved=_0x3f66fc=>{const _0x4ec9cc=_0x13f62c;let _0x23889c=![];return devices[_0x3f66fc][_0x4ec9cc(0x284)]&&devices[_0x3f66fc]['telegram2FaApproval']['expiry']!=_0x4ec9cc(0x1e3)&&(_0x23889c=devices[_0x3f66fc][_0x4ec9cc(0x284)][_0x4ec9cc(0x230)]==devices[_0x3f66fc]['ip']&&new Date()['getTime']()-devices[_0x3f66fc][_0x4ec9cc(0x284)][_0x4ec9cc(0x2d5)]<devices[_0x3f66fc][_0x4ec9cc(0x284)][_0x4ec9cc(0x1c4)]*0x3c*0x3e8),_0x23889c;},normalizeIP=_0x2bab95=>{const _0x4ad2f9=_0x13f62c;let _0xccfe78=null,_0x53ea8c=null;if(ipaddr[_0x4ad2f9(0x18d)](_0x2bab95)){const _0x2f9506=ipaddr[_0x4ad2f9(0x208)](_0x2bab95);_0x2f9506['kind']()===_0x4ad2f9(0x2c8)?(_0x2f9506[_0x4ad2f9(0x272)]()&&(_0xccfe78=_0x2f9506['toIPv4Address']()[_0x4ad2f9(0x2ac)]()),_0x53ea8c=_0x2f9506[_0x4ad2f9(0x2ac)]()):(_0xccfe78=_0x2f9506[_0x4ad2f9(0x2ac)](),_0x53ea8c=_0x2f9506[_0x4ad2f9(0x1c0)]()[_0x4ad2f9(0x2ac)]());}return{'show':_0xccfe78?_0xccfe78:_0x53ea8c,'store':_0x53ea8c};};function sleep(_0x17ec0a){return new Promise(_0xa2831c=>setTimeout(_0xa2831c,_0x17ec0a));}