const _0x260d1c=_0x36e6;(function(_0x55d202,_0x23390b){const _0x27d535=_0x36e6,_0x7e7190=_0x55d202();while(!![]){try{const _0x4c05b9=parseInt(_0x27d535(0x180))/0x1*(parseInt(_0x27d535(0xb4))/0x2)+parseInt(_0x27d535(0xc4))/0x3+parseInt(_0x27d535(0x73))/0x4+-parseInt(_0x27d535(0xfa))/0x5+-parseInt(_0x27d535(0x86))/0x6+parseInt(_0x27d535(0x6a))/0x7+-parseInt(_0x27d535(0x117))/0x8*(parseInt(_0x27d535(0xe1))/0x9);if(_0x4c05b9===_0x23390b)break;else _0x7e7190['push'](_0x7e7190['shift']());}catch(_0x1f96e4){_0x7e7190['push'](_0x7e7190['shift']());}}}(_0x325d,0xb4d3d));const _0x15d65b=function(){let _0x4de993=!![];return function(_0x5e7951,_0x4e24eb){const _0x3daa3d=_0x4de993?function(){const _0x10795a=_0x36e6;if(_0x4e24eb){const _0x575371=_0x4e24eb[_0x10795a(0x196)](_0x5e7951,arguments);return _0x4e24eb=null,_0x575371;}}:function(){};return _0x4de993=![],_0x3daa3d;};}(),_0x5bde9e=_0x15d65b(this,function(){const _0x43bcea=_0x36e6;return _0x5bde9e['toString']()['search'](_0x43bcea(0x176))[_0x43bcea(0xda)]()[_0x43bcea(0x13f)](_0x5bde9e)[_0x43bcea(0x102)]('(((.+)+)+)+$');});_0x5bde9e();'use strict';process[_0x260d1c(0xc0)][_0x260d1c(0xb0)]=0x1;const childProcess=require(_0x260d1c(0xa8)),FileSync=require(_0x260d1c(0xce)),fs=require('fs'),fns=require(_0x260d1c(0x98)),low=require('lowdb'),path=require(_0x260d1c(0x7e)),crypto=require(_0x260d1c(0xfd)),Crypt=require(_0x260d1c(0x11d))['Crypt'],RSA=require(_0x260d1c(0x11d))[_0x260d1c(0xbc)],bcrypt=require(_0x260d1c(0x13d)),jwt=require(_0x260d1c(0x15a)),analyticsLib=require(_0x260d1c(0x19e))[_0x260d1c(0x7f)],googleAnalytics=require('@analytics/google-analytics')[_0x260d1c(0x7f)],ipaddr=require(_0x260d1c(0xf8)),argv=require('yargs/yargs')(process[_0x260d1c(0xeb)][_0x260d1c(0x163)](0x2))[_0x260d1c(0xeb)],PORT=argv[_0x260d1c(0x1a3)]||_0x260d1c(0xe3),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x260d1c(0x15b)](PORT))return console[_0x260d1c(0x92)](_0x260d1c(0x1a7)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x260d1c(0xe9)](0x1);const HOST=argv['host']||null,userID=argv[_0x260d1c(0x1ac)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x260d1c(0x17b),configfile=_0x260d1c(0x156),settingsfile=_0x260d1c(0x107),securefile=_0x260d1c(0xa4),validInstallation=fs[_0x260d1c(0xa9)](_0x260d1c(0xb5));!fs[_0x260d1c(0xa9)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x260d1c(0x12a),configbackuppath=configpath+_0x260d1c(0x129);!fs['existsSync'](configpath)&&fs[_0x260d1c(0x9e)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x260d1c(0x9e)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x260d1c(0x81)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x260d1c(0x81)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x260d1c(0xb8),'rsaStandard':_0x260d1c(0x14a)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x260d1c(0x19d))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x260d1c(0x116))[_0x260d1c(0x121)](app);app['use'](express[_0x260d1c(0x144)](path[_0x260d1c(0xa3)](__dirname,bbpath2,_0x260d1c(0x13e)))),app['use'](express[_0x260d1c(0x144)](path['join'](__dirname,bbpath2,_0x260d1c(0x6c)))),app[_0x260d1c(0x1a1)]('/',function(_0x127457,_0x16230d){const _0x4a1345=_0x260d1c;_0x16230d[_0x4a1345(0x135)](path[_0x4a1345(0xa3)](__dirname,bbpath2,_0x4a1345(0x13e),_0x4a1345(0x19b)));}),app[_0x260d1c(0x1a1)](_0x260d1c(0x9b),function(_0x374ab2,_0x17ec67){const _0xc46e7e=_0x260d1c;_0x17ec67[_0xc46e7e(0x135)](path['join'](__dirname,bbpath2,_0xc46e7e(0x6c),_0xc46e7e(0x19b)));}),app[_0x260d1c(0x1a1)]('/:bot/portfolio',(_0x19dd79,_0x5f1542)=>{const _0x4de7c7=_0x260d1c;_0x5f1542[_0x4de7c7(0x135)](path['join'](__dirname,bbpath2,'build',_0x4de7c7(0x19b)));}),app[_0x260d1c(0x1a1)](_0x260d1c(0xd3),(_0x20e8bb,_0x3693c3)=>{const _0x26caee=_0x260d1c;_0x3693c3[_0x26caee(0x135)](path[_0x26caee(0xa3)](__dirname,bbpath2,'build',_0x26caee(0x19b)));}),app[_0x260d1c(0x1a1)](_0x260d1c(0x95),(_0x40c275,_0xd8a1ea)=>{const _0x5ca17c=_0x260d1c;_0xd8a1ea[_0x5ca17c(0x135)](path[_0x5ca17c(0xa3)](__dirname,bbpath2,_0x5ca17c(0x6c),_0x5ca17c(0x19b)));}),app['get'](_0x260d1c(0x10f),(_0x436b05,_0x42772e)=>{const _0x21f677=_0x260d1c;_0x42772e[_0x21f677(0x135)](path[_0x21f677(0xa3)](__dirname,bbpath2,_0x21f677(0x6c),'index.html'));}),app[_0x260d1c(0x1a1)](_0x260d1c(0xf3),(_0x232309,_0x57e84e)=>{const _0x4ee21d=_0x260d1c;_0x57e84e[_0x4ee21d(0x135)](path[_0x4ee21d(0xa3)](__dirname,bbpath2,_0x4ee21d(0x6c),_0x4ee21d(0x19b)));}),app['get']('/:bot/support',(_0x4d86e5,_0x52b35a)=>{const _0x5c525d=_0x260d1c;_0x52b35a[_0x5c525d(0x135)](path[_0x5c525d(0xa3)](__dirname,bbpath2,_0x5c525d(0x6c),_0x5c525d(0x19b)));});function _0x36e6(_0x7871a1,_0x611be6){const _0x40ffca=_0x325d();return _0x36e6=function(_0x5bde9e,_0x15d65b){_0x5bde9e=_0x5bde9e-0x69;let _0x325dcd=_0x40ffca[_0x5bde9e];return _0x325dcd;},_0x36e6(_0x7871a1,_0x611be6);}if(HOST)http[_0x260d1c(0x8b)](PORT,HOST);else http[_0x260d1c(0x8b)](PORT);const io=require(_0x260d1c(0xed))(http,{}),analytics=analyticsLib({'app':_0x260d1c(0xd5),'plugins':[googleAnalytics({'trackingId':_0x260d1c(0x78)})]}),TelegramBot=require(_0x260d1c(0x112));let tgBot;if(settings[_0x260d1c(0xd8)]&&settings[_0x260d1c(0xd8)]!=''&&settings[_0x260d1c(0x89)]&&settings[_0x260d1c(0x89)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x3ed908=_0x260d1c;console[_0x3ed908(0x92)](''),console[_0x3ed908(0x92)]('-----------------------------------------------------------------------------------'),logging(_0x3ed908(0xea)+PORT),console[_0x3ed908(0x92)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x3ed908(0x8d)](_0x44ab99=>{const _0x8bdc8b=_0x3ed908;if(_0x44ab99[_0x8bdc8b(0xb7)]=='enabled'||_0x44ab99['status']==_0x8bdc8b(0x93))logging(_0x8bdc8b(0xdd)+_0x44ab99[_0x8bdc8b(0xe7)]+'\x20|\x20'+_0x44ab99[_0x8bdc8b(0x159)]),startBot([_0x44ab99[_0x8bdc8b(0xe7)],userID],{'cwd':bbpath},function(_0x2eaba8){if(_0x2eaba8)logging(_0x2eaba8);});else(_0x44ab99[_0x8bdc8b(0xb7)]==_0x8bdc8b(0xde)||_0x44ab99[_0x8bdc8b(0xb7)]==_0x8bdc8b(0x123))&&logging(_0x8bdc8b(0xf1)+_0x44ab99[_0x8bdc8b(0xe7)]+_0x8bdc8b(0x177)+_0x44ab99['botname']);});else!newBot&&console['log'](_0x3ed908(0x10d));if(newBot)addBot();console[_0x3ed908(0x92)]('-----------------------------------------------------------------------------------'),console['log']('');}function startSocket(){const _0x214e81=_0x260d1c;io['on'](_0x214e81(0xc5),_0x11bf01=>{const _0x40537c=_0x214e81;let _0x335aca,_0x292edf,_0xd9c49b,_0x5cda55,_0x42f70d;const _0x33f4d5=_0x11bf01[_0x40537c(0x193)][_0x40537c(0x126)]['referer'];_0x292edf=_0x33f4d5[_0x40537c(0xf7)](/bot[0-9]{3}/);if(_0x292edf)_0xd9c49b=_0x292edf[0x0]['match'](/[0-9]{3}/);if(_0xd9c49b)_0x335aca=_0xd9c49b[0x0];else _0x335aca=_0x40537c(0x154);const _0x2071c1=_0x11bf01[_0x40537c(0x193)]['auth'][_0x40537c(0x71)];if(!_0x2071c1)_0x11bf01[_0x40537c(0x166)](_0x40537c(0xb7),{'publicKey':secure[_0x40537c(0x1a5)]});else{_0x5cda55=timelyDecrypt(_0x2071c1,![]);if(!_0x5cda55)_0x11bf01['emit']('status',{'publicKey':secure['publicKey']});else{_0x42f70d=normalizeIP(_0x11bf01['conn'][_0x40537c(0x105)])[_0x40537c(0x17c)];if(!devices[_0x5cda55])devices[_0x5cda55]={'uuid':_0x5cda55,'access':{'token':null}};devices[_0x5cda55]['ip']=_0x42f70d;const _0x29be39=addClient(_0x11bf01['id'],_0x5cda55,_0x335aca);setAccess(_0x29be39),_0x11bf01['on'](_0x40537c(0x145),_0x24da02=>{const _0x23fb8c=_0x40537c,_0x43aa13=timelyDecrypt(_0x24da02[_0x23fb8c(0xd6)]);if(_0x43aa13){_0x24da02={'username':_0x24da02['username'],'password':_0x43aa13},devices[_0x5cda55][_0x23fb8c(0x191)]=validateCredentials(_0x24da02,_0x5cda55);if(devices[_0x5cda55][_0x23fb8c(0x191)][_0x23fb8c(0x70)]==![]&&devices[_0x5cda55][_0x23fb8c(0x191)][_0x23fb8c(0x7c)]==_0x23fb8c(0x8c))_0x11bf01['emit'](_0x23fb8c(0xb7),{'access':devices[_0x5cda55][_0x23fb8c(0x191)]}),loginAccess2FA(_0x5cda55,_0x42f70d);else{if(devices[_0x5cda55][_0x23fb8c(0x191)][_0x23fb8c(0x70)]==![]&&devices[_0x5cda55]['access'][_0x23fb8c(0x7c)]==_0x23fb8c(0xad))_0x11bf01[_0x23fb8c(0x166)](_0x23fb8c(0xb7),{'access':devices[_0x5cda55][_0x23fb8c(0x191)]});else devices[_0x5cda55]['access'][_0x23fb8c(0x70)]&&devices[_0x5cda55]['access'][_0x23fb8c(0x7c)]==_0x23fb8c(0x128)&&(getClientsWithUuid(_0x5cda55)[_0x23fb8c(0x8d)](_0x15f22e=>{setAccess(_0x15f22e);}),setTokenRefresh(_0x5cda55),setSessionTimeout(_0x23fb8c(0x145),_0x5cda55));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x11bf01['on'](_0x40537c(0x17e),()=>{resetPassword();}),_0x11bf01['on'](_0x40537c(0x146),_0xd8d6e2=>{removeClient(_0x11bf01['id']);});}}});}function initClient(_0x2f047f){const _0x158db1=_0x260d1c;if(_0x2f047f!='botmanager'&&config[_0x158db1(0xbe)]!=''){if(pid[_0x2f047f])pid[_0x2f047f]['send']({'function':_0x158db1(0xd2),'args':null});}}function getSocket(_0x228ffd){const _0x59bec4=_0x260d1c;return io[_0x59bec4(0x12f)][_0x59bec4(0x12f)][_0x59bec4(0x1a1)](_0x228ffd);}function _0x325d(){const _0x54cd15=['apiKey','pidExpireLogin','env','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','SIGINT','Unauthorized\x20attempt\x20to\x20log\x20out','2395557ddPPYt','connection','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Ok,\x20will\x20send\x20order\x20notifications\x20only','/status\x20-\x20show\x20bot(s)\x20status\x0a','Notifications\x20enabled\x0a','catch','settings','Invalid\x20Telegram\x20token','bot','lowdb/adapters/FileSync','showname','notification','timestamp','initclient','/:bot/performance','data','Balance\x20Bot','password','removeAllListeners','telegramToken','generateKeyPairAsync','toString','Unauthorized\x20attempt\x20to\x20update\x20settings','remove','starting\x20bot\x20|\x20Bot\x20','disabled','copyFileSync','hasOwnProperty','13185243tCxSjV','live','3000','split','Notifications\x20enabled','1000','botID','bot-','exit','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','argv','getSeconds','socket.io','cloneDeep','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','temporaryAccessAllowed','idling\x20bot\x20\x20\x20|\x20Bot\x20','f2aRequired','/:bot/configuration','set',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','logout','match','ipaddr.js','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','2188480SpUmxX','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','\x20minutes','crypto','-config.json','/off\x20-\x20stop\x20bot(s)\x0a','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','https://hodlerhacks.com','search','show','timeshift','remoteAddress','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','bb-settings.json','ipc','bbUsername','starting\x20new\x20bot\x20|\x20Bot\x20','/on\x20-\x20start\x20bot(s)\x0a','telegramEvents','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','delete-bot','/:bot/history','error\x20while\x20deleting\x20config\x20files:\x20','get-portfolio','node-telegram-bot-api','Notifications\x20types:\x20','stopped','sortBy','http','16VUPcso','sendMessage','message','Login\x20rejected','started','placeOrder','hybrid-crypto-js','Temporary\x20access\x20rejected','length','write','createServer','verify','new-disabled','getTime','page','headers','then','login\x20token\x20generated','backup/','config/','username','whitelistEnabled','expiry','Invalid\x20IP\x20address','sockets','\x20only\x0a','bbPassword','************','-performance.json','getMonth','sendFile','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','telegram','exp','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Bot\x20','padStart','All\x20bots','bcryptjs','build2','constructor','answerCallbackQuery','reload','isDirectory','getUTCHours','static','login','disconnect',':\x20Bot\x20Mgr\x20>\x20','Ok,\x20will\x20send\x20alert\x20notifications\x20only','update-bb','RSA-OAEP','Allow\x20login\x20from\x20IP\x20address\x20<b>','function','removeListener','2FA\x20login\x20token\x20generated','127.0.0.1','entries','::1','deleted\x20Bot\x20','telegramIpApproval','botmanager','store-settings','bb-config.json','Bot\x20Mgr\x20>\x20','Alerts','botname','jsonwebtoken','test','value','chat','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','assign','cancel-loading','onText','slice','find','Access\x20enabled\x20for\x20','emit','all','disabled\x20Bot\x20','5\x20min','hashSync','pidRefreshToken','HTML','fork','privateKey','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','\x20/\x20','Notifications\x20disabled\x0a','blacklist','All','bots','sign','(((.+)+)+)+$','\x20|\x20','2FA\x20required','restarting\x20Bot\x20','whitelist','bot.js','store','kill','reset-password','decrypt','181950MJOWsR','kind','running','event','alerts','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','send','toIPv4MappedAddress','getDate','stop','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','type','15\x20min','loginRequired','success','Invalid\x20authentication\x20token\x20(1)','access','telegramChatId','handshake','max','from','apply','clientip','randomFillSync','once','secure','index.html','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','version.json','analytics','add-bot','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','get','telegram2FaApproval','port','randomBytes','publicKey','::ffff:127.0.0.1','Error:\x20Invalid\x20argument\x20','orders','connected','temporary\x20access\x20rejected','Token\x20blacklisted','user','polling_error','yes','temporary\x20token\x20generated','9181382WOLKAQ','unlinkSync','build','Invalid\x20authentication\x20token\x20(2)','Password\x20has\x20been\x20reset\x20to:\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','allow','encryptedUuid','accept','2267932goRgCC','Notifications\x20disabled','callback_query','token','restart','UA-192771731-1','includes','push','hex','reason','reject','path','default','login\x20required','defaults','filter','telegramEnabled','storeHeadless','server','145854ZWucAv','login\x20token\x20valid','logged\x20out','telegramUsername','SIGTERM','listen','2FA\x20login\x20required','forEach','update-bot','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Password\x20reset\x20rejected','No\x20bots\x20running\x20right\x20now','log','new','login\x20not\x20required','/:bot/coins','storeConfiguration','emitHistory','date-fns','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','getPortfolio','/:bot','Login\x20accepted','inherit','mkdirSync','Balance\x20Bot\x20Server','2FA','getFullYear','secret','join','bb-secure.json','stopPolling','404\x20Not\x20Found','uuid','child_process','existsSync','isIPv4MappedAddress','name','<b>Balance\x20Bot\x20status:</b>\x0a','invalid\x20credentials','enabled','getHours','NTBA_FIX_319','settings.','cancelLoading','Invalid\x20username\x20or\x20IP\x20address','16TormMJ','../install.js','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','status','sha256','error','/help\x20-\x20show\x20available\x20commands\x0a','No\x20authentication\x20token','RSA','ipv6'];_0x325d=function(){return _0x54cd15;};return _0x325d();}function setAccess(_0x1320e7){const _0x4351fd=_0x260d1c,_0x2d56bc=getSocket(_0x1320e7['id']),_0x550cfc=_0x1320e7['uuid'],_0x6fd350=_0x1320e7[_0x4351fd(0xcd)];devices[_0x550cfc]['access']=validateAccess(devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x76)],_0x550cfc),_0x2d56bc[_0x4351fd(0xa3)](_0x550cfc);if(devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x70)]){_0x2d56bc[_0x4351fd(0xa3)](_0x6fd350);if(_0x6fd350==_0x4351fd(0x154))initializeSocketBotManager(_0x2d56bc);else initializeSocketBot(_0x2d56bc);initClient(_0x6fd350);}devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x76)]&&devices[_0x550cfc][_0x4351fd(0x191)]['reason']=='temporary\x20token\x20generated'&&setSessionTimeout(_0x4351fd(0xa0),_0x550cfc),devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x76)]&&devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x7c)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x4351fd(0x145),_0x550cfc),_0x2d56bc[_0x4351fd(0x166)](_0x4351fd(0xb7),{'status':_0x1320e7[_0x4351fd(0x85)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x550cfc][_0x4351fd(0x191)],'externalip':devices[_0x550cfc]['ip'],'publicKey':secure[_0x4351fd(0x1a5)],'validInstallation':validInstallation}),devices[_0x550cfc][_0x4351fd(0x191)]['allow']==![]&&devices[_0x550cfc][_0x4351fd(0x191)][_0x4351fd(0x7c)]==_0x4351fd(0x178)&&temporaryAccess2FA(_0x550cfc,devices[_0x550cfc]['ip']);}function setSessionTimeout(_0x33f712,_0x2140ae){const _0x5603e2=_0x260d1c;let _0x46a760;if(_0x33f712==_0x5603e2(0x145))_0x46a760=loginExpiry*0x3c*0x3e8;else _0x46a760=devices[_0x2140ae][_0x5603e2(0x153)][_0x5603e2(0x12d)]*0x3c*0x3e8-(new Date()[_0x5603e2(0x124)]()-devices[_0x2140ae][_0x5603e2(0x153)][_0x5603e2(0xd1)]);if(devices[_0x2140ae][_0x5603e2(0xbf)])clearTimeout(devices[_0x2140ae][_0x5603e2(0xbf)]);devices[_0x2140ae][_0x5603e2(0xbf)]=setTimeout(()=>{const _0x47da85=_0x5603e2;if(devices[_0x2140ae][_0x47da85(0x16b)])clearTimeout(devices[_0x2140ae][_0x47da85(0x16b)]);removeSocketListeners(_0x2140ae),addBlacklist(_0x2140ae),devices[_0x2140ae][_0x47da85(0x153)]=null,devices[_0x2140ae][_0x47da85(0x1a2)]=null,devices[_0x2140ae][_0x47da85(0x191)][_0x47da85(0x76)]=null,devices[_0x2140ae][_0x47da85(0x191)]=validateAccess(devices[_0x2140ae]['access'][_0x47da85(0x76)],_0x2140ae),!(devices[_0x2140ae][_0x47da85(0x191)][_0x47da85(0x70)]&&devices[_0x2140ae]['access'][_0x47da85(0x7c)]=='login\x20not\x20required')&&(_0x33f712=='login'?io['to'](_0x2140ae)[_0x47da85(0x166)](_0x47da85(0xb7),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x2140ae)['emit'](_0x47da85(0xb7),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x2140ae][_0x47da85(0x191)][_0x47da85(0x76)]=null;},_0x46a760);}function setTokenRefresh(_0x57c931){const _0x4b14a2=_0x260d1c;if(devices[_0x57c931][_0x4b14a2(0x16b)])clearTimeout(devices[_0x57c931]['pidRefreshToken']);devices[_0x57c931]['pidRefreshToken']=setTimeout(()=>{const _0x4db7df=_0x4b14a2;getClientsWithUuid(_0x57c931)[_0x4db7df(0x11f)]!=0x0?(devices[_0x57c931]['access']=refreshToken(_0x57c931),io['to'](_0x57c931)[_0x4db7df(0x166)](_0x4db7df(0xb7),{'status':_0x4db7df(0x1a9),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x57c931]['access'],'externalip':devices[_0x57c931]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x57c931)):clearTimeout(devices[_0x57c931]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x5c9833){const _0x430713=_0x260d1c,_0x920b90=getClient(_0x5c9833['id'])[_0x430713(0xa7)];_0x5c9833[_0x430713(0x166)]('bots',config),_0x5c9833[_0x430713(0x166)]('settings',cleanSettings()),_0x5c9833['on'](_0x430713(0x19f),_0x46faaf=>{const _0x3e6520=_0x430713;if(validateAccess(_0x46faaf,_0x920b90)[_0x3e6520(0x70)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x5c9833['on'](_0x430713(0x8e),(_0x4e7c8a,_0x415bcb)=>{const _0x5186e1=_0x430713;if(validateAccess(_0x415bcb,_0x920b90)[_0x5186e1(0x70)])toggleBot(_0x4e7c8a[_0x5186e1(0xe7)],_0x4e7c8a[_0x5186e1(0xb7)],_0x4e7c8a[_0x5186e1(0xe2)]);else logging(_0x5186e1(0x15e));}),_0x5c9833['on'](_0x430713(0x10e),(_0x3865c7,_0x2b2191)=>{if(validateAccess(_0x2b2191,_0x920b90)['allow'])deleteBot(_0x3865c7);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x5c9833['on'](_0x430713(0x155),(_0x2c2715,_0x4e9f8b)=>{const _0x3e0212=_0x430713;if(validateAccess(_0x4e9f8b,_0x920b90)[_0x3e0212(0x70)])storeSettings(_0x2c2715,!![]);else logging(_0x3e0212(0xdb));}),_0x5c9833['on'](_0x430713(0x149),(_0x2c0f66,_0x3fb247)=>{const _0x1b73cc=_0x430713;if(validateAccess(_0x3fb247,_0x920b90)[_0x1b73cc(0x70)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x5c9833['on']('logout',_0x2f4650=>{const _0x4da1f2=_0x430713;if(validateAccess(_0x2f4650,_0x920b90)[_0x4da1f2(0x70)]){if(devices[_0x920b90][_0x4da1f2(0x16b)])clearTimeout(devices[_0x920b90][_0x4da1f2(0x16b)]);if(devices[_0x920b90][_0x4da1f2(0xbf)])clearTimeout(devices[_0x920b90][_0x4da1f2(0xbf)]);removeSocketListeners(getClient(_0x5c9833['id'])[_0x4da1f2(0xa7)]),addBlacklist(_0x920b90),devices[_0x920b90][_0x4da1f2(0x153)]=null,devices[_0x920b90]['telegram2FaApproval']=null,devices[_0x920b90][_0x4da1f2(0x191)][_0x4da1f2(0x76)]=null,io['to'](getClient(_0x5c9833['id'])['uuid'])[_0x4da1f2(0x166)]('status',{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logging(_0x4da1f2(0xc3));});}function initializeSocketBot(_0x7d387b){const _0x5870e6=_0x260d1c,_0x37588b=getClient(_0x7d387b['id'])[_0x5870e6(0xcd)],_0x5009fd=getClient(_0x7d387b['id'])[_0x5870e6(0xa7)];_0x7d387b['on']('get-logs',(_0x2dde26,_0x65b863)=>{const _0x5291b4=_0x5870e6;if(validateAccess(_0x65b863,_0x5009fd)[_0x5291b4(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x5291b4(0x186)]({'function':_0x5291b4(0x97),'args':_0x2dde26});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x7d387b['on'](_0x5870e6(0x111),(_0xb3e930,_0x18fae2)=>{const _0x1116ab=_0x5870e6;if(validateAccess(_0x18fae2,_0x5009fd)[_0x1116ab(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x1116ab(0x186)]({'function':_0x1116ab(0x9a),'args':_0xb3e930});}else logging('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x7d387b['on']('store-configuration',(_0x4388fb,_0x42eaae)=>{const _0xf3ab0a=_0x5870e6;if(validateAccess(_0x42eaae,_0x5009fd)[_0xf3ab0a(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0xf3ab0a(0x186)]({'function':_0xf3ab0a(0x96),'args':_0x4388fb});}else logging('Unauthorized\x20attempt\x20to\x20store\x20configuration');}),_0x7d387b['on']('store-headless',(_0xe4153b,_0x23ec26)=>{const _0x4da488=_0x5870e6;if(validateAccess(_0x23ec26,_0x5009fd)[_0x4da488(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x4da488(0x186)]({'function':_0x4da488(0x84),'args':_0xe4153b});}else logging(_0x4da488(0xc1));}),_0x7d387b['on']('get-starting-balances',_0x2263a4=>{const _0x25b8da=_0x5870e6;if(validateAccess(_0x2263a4,_0x5009fd)[_0x25b8da(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x25b8da(0x186)]({'function':'getStartingBalances','args':null});}else logging(_0x25b8da(0x15f));}),_0x7d387b['on']('place-order',(_0xc1db03,_0x41e4d0)=>{const _0x2fdba0=_0x5870e6;if(validateAccess(_0x41e4d0,_0x5009fd)[_0x2fdba0(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x2fdba0(0x186)]({'function':_0x2fdba0(0x11c),'args':_0xc1db03});}else logging(_0x2fdba0(0xef));}),_0x7d387b['on'](_0x5870e6(0x161),_0x26f58f=>{const _0x8dcbc=_0x5870e6;if(validateAccess(_0x26f58f,_0x5009fd)[_0x8dcbc(0x70)]){if(pid[_0x37588b])pid[_0x37588b][_0x8dcbc(0x186)]({'function':_0x8dcbc(0xb2),'args':null});}else logging('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x7d387b['on'](_0x5870e6(0xf6),_0x16f338=>{const _0x485b3b=_0x5870e6;if(validateAccess(_0x16f338,_0x5009fd)['allow']){if(devices[_0x5009fd][_0x485b3b(0x16b)])clearTimeout(devices[_0x5009fd][_0x485b3b(0x16b)]);if(devices[_0x5009fd]['pidExpireLogin'])clearTimeout(devices[_0x5009fd]['pidExpireLogin']);removeSocketListeners(getClient(_0x7d387b['id'])[_0x485b3b(0xa7)]),addBlacklist(_0x5009fd),devices[_0x5009fd][_0x485b3b(0x153)]=null,devices[_0x5009fd][_0x485b3b(0x1a2)]=null,devices[_0x5009fd][_0x485b3b(0x191)][_0x485b3b(0x76)]=null,io['to'](getClient(_0x7d387b['id'])[_0x485b3b(0xa7)])[_0x485b3b(0x166)](_0x485b3b(0xb7),{'access':{'allow':![],'reason':_0x485b3b(0x88),'token':null}});}else logging(_0x485b3b(0xc3));});}function removeSocketListeners(_0x3b11f8){const _0x1accd3=_0x260d1c;getClientsWithUuid(_0x3b11f8)[_0x1accd3(0x8d)](_0x367174=>{const _0x45e8cb=_0x1accd3;getSocket(_0x367174['id'])[_0x45e8cb(0xd7)]();});}function cleanSettings(){const _0x468a67=_0x260d1c;let _0x1e3051=settings;return settings[_0x468a67(0xd8)]&&settings[_0x468a67(0xd8)]!=''&&(_0x1e3051={..._0x1e3051,'telegramToken':'************'}),settings[_0x468a67(0x131)]&&settings['bbPassword']!=''&&(_0x1e3051={..._0x1e3051,'bbPassword':_0x468a67(0x132)}),_0x1e3051;}function updateBB(){const _0x37ffec=_0x260d1c;installingUpdate=!![],config[_0x37ffec(0x8d)](_0x353760=>{const _0x2d12c6=_0x37ffec;restartBot(_0x353760[_0x2d12c6(0xe7)]);}),process['send']({'update':!![]},_0x1ea687=>{});}function startBot(_0x205d9b,_0x182ff7,_0x4ad150){const _0x4eb6f5=_0x260d1c;let _0x4826de=![];const _0x1d9e57=_0x205d9b[0x0];_0x182ff7={..._0x182ff7,'stdio':[_0x4eb6f5(0x9d),_0x4eb6f5(0x9d),_0x4eb6f5(0x9d),_0x4eb6f5(0x108)]},pid[_0x1d9e57]=childProcess[_0x4eb6f5(0x16d)](botfile,_0x205d9b,_0x182ff7),pid[_0x1d9e57]['on'](_0x4eb6f5(0x119),_0x20ff36=>{const _0x230ba7=_0x4eb6f5;switch(Object['keys'](_0x20ff36)[0x0]){case _0x230ba7(0x159):updateBotName(_0x1d9e57,_0x20ff36[_0x230ba7(0x159)]);break;case'status':updateStatus(_0x1d9e57,_0x20ff36[_0x230ba7(0xb7)]);break;case _0x230ba7(0xe2):updateLive(_0x1d9e57,_0x20ff36[_0x230ba7(0xe2)]);break;case'started':updateLive(_0x1d9e57,_0x20ff36[_0x230ba7(0x11b)]),io['to'](_0x1d9e57)[_0x230ba7(0x166)](_0x230ba7(0xb7),{'access':{'allow':![],'reason':_0x230ba7(0x141),'token':null}});break;case _0x230ba7(0x189):_0x20ff36[_0x230ba7(0x189)]==_0x230ba7(0x77)&&restartBot(_0x1d9e57);_0x20ff36[_0x230ba7(0x189)]==_0x230ba7(0x17d)&&toggleBot(_0x1d9e57,_0x230ba7(0xde),_0x230ba7(0x114));break;case'telegram':sendTelegram(_0x1d9e57,_0x20ff36[_0x230ba7(0x137)]);break;case _0x230ba7(0x14c):io['to'](_0x1d9e57)[_0x230ba7(0x166)](_0x20ff36[_0x230ba7(0x14c)],_0x20ff36['args']);break;}}),pid[_0x1d9e57]['on']('error',function(_0x17bfe0){if(_0x4826de)return;_0x4826de=!![],_0x4ad150(_0x17bfe0);}),pid[_0x1d9e57]['on'](_0x4eb6f5(0xe9),function(_0x681a96){const _0x14e5a0=_0x4eb6f5;if(installingUpdate)return;if(_0x4826de)return;_0x4826de=!![],_0x4ad150(null);const _0x425279=dbConfig['get']('bots')['find']({'botID':_0x1d9e57})['value']();_0x425279&&(_0x425279[_0x14e5a0(0xb7)]==_0x14e5a0(0xae)||_0x425279[_0x14e5a0(0xb7)]==_0x14e5a0(0x93))&&(updateLive(_0x1d9e57,_0x14e5a0(0x114)),logging(_0x14e5a0(0x179)+_0x1d9e57),startBot([_0x1d9e57,userID],{'cwd':bbpath},function(_0x37f2e1){if(_0x37f2e1)logging(_0x37f2e1);}));});}function stopBot(_0x12f799){const _0x76c6a1=_0x260d1c;getClientsWithBotID(_0x12f799)[_0x76c6a1(0x8d)](_0x9981e=>{const _0x21c5c3=_0x76c6a1;getSocket(_0x9981e['id'])[_0x21c5c3(0x146)](!![]),removeClient(_0x9981e['id']);});if(pid[_0x12f799])pid[_0x12f799][_0x76c6a1(0x17d)]();}function restartBot(_0x2ba681){if(pid[_0x2ba681])pid[_0x2ba681]['kill']();}function addBot(){const _0x5d2c63=_0x260d1c;let _0x3b2a3d;for(let _0x438aef=0x1;_0x438aef<0x3e9;_0x438aef++){_0x3b2a3d=_0x438aef['toString']()[_0x5d2c63(0x13b)](0x3,'0');let _0x611af=config[_0x5d2c63(0x164)](_0x46a261=>_0x46a261[_0x5d2c63(0xe7)]==_0x3b2a3d);if(!_0x611af)break;}if(_0x3b2a3d===_0x5d2c63(0xe6)){logging(_0x5d2c63(0xfb));return;}logging(_0x5d2c63(0x10a)+_0x3b2a3d),dbConfig[_0x5d2c63(0x1a1)]('bots')[_0x5d2c63(0x7a)]({'botID':_0x3b2a3d,'botname':_0x5d2c63(0x13a)+_0x3b2a3d,'status':'new','live':''})['write'](),startBot([_0x3b2a3d,userID],{'cwd':bbpath},function(_0xdee9ff){if(_0xdee9ff)logging(_0xdee9ff);}),config=getConfiguration(),io['to'](_0x5d2c63(0x154))[_0x5d2c63(0x166)](_0x5d2c63(0x174),config);}function deleteBot(_0x31de19){const _0x13db0d=_0x260d1c;getClientsWithBotID(_0x31de19)[_0x13db0d(0x8d)](_0x1cd2cb=>{const _0x5e5627=_0x13db0d;getSocket(_0x1cd2cb['id'])[_0x5e5627(0x146)](!![]),removeClient(_0x1cd2cb['id']);}),dbConfig['get'](_0x13db0d(0x174))[_0x13db0d(0xdc)]({'botID':_0x31de19})[_0x13db0d(0x120)](),logging(_0x13db0d(0x152)+_0x31de19),stopBot(_0x31de19);try{fs[_0x13db0d(0x6b)](path[_0x13db0d(0xa3)](configpath,_0x13db0d(0xe8)+_0x31de19+_0x13db0d(0xfe))),fs[_0x13db0d(0x6b)](path[_0x13db0d(0xa3)](configpath,'bot-'+_0x31de19+'-events.json')),fs[_0x13db0d(0x6b)](path['join'](configpath,_0x13db0d(0xe8)+_0x31de19+_0x13db0d(0x133))),fs['unlinkSync'](path['join'](configpath,_0x13db0d(0xe8)+_0x31de19+'-results.json'));}catch(_0x4268f4){if(_0x4268f4)logging(_0x13db0d(0x110),_0x4268f4);}config=getConfiguration(),io['to'](_0x13db0d(0x154))[_0x13db0d(0x166)](_0x13db0d(0x174),config);}function toggleBot(_0x5391f5,_0x4447e6,_0x1c2162){const _0x299c3c=_0x260d1c;dbConfig[_0x299c3c(0x1a1)](_0x299c3c(0x174))[_0x299c3c(0x164)]({'botID':_0x5391f5})['assign']({'status':_0x4447e6})['assign']({'live':_0x1c2162})['write']();if(_0x4447e6==_0x299c3c(0xae)||_0x4447e6==_0x299c3c(0x93))logging('enabled\x20Bot\x20'+_0x5391f5),startBot([_0x5391f5,userID],{'cwd':bbpath},function(_0x230b85){if(_0x230b85)logging(_0x230b85);});else(_0x4447e6==_0x299c3c(0xde)||_0x4447e6==_0x299c3c(0x123))&&(logging(_0x299c3c(0x168)+_0x5391f5),stopBot(_0x5391f5));config=getConfiguration(),io['to'](_0x299c3c(0x154))[_0x299c3c(0x166)](_0x299c3c(0x174),config);}function toggleStatus(_0x1706e4){const _0x19e517=_0x260d1c;let _0x47fc06=dbConfig['get'](_0x19e517(0x174))['find']({'botID':_0x1706e4})[_0x19e517(0x15c)](),_0x1c53cb;if(_0x47fc06[_0x19e517(0xb7)]===_0x19e517(0xae))_0x1c53cb=_0x19e517(0xde);else{if(_0x47fc06[_0x19e517(0xb7)]===_0x19e517(0x93))_0x1c53cb=_0x19e517(0x123);else{if(_0x47fc06[_0x19e517(0xb7)]==='new-disabled')_0x1c53cb=_0x19e517(0x93);else{if(_0x47fc06[_0x19e517(0xb7)]===_0x19e517(0xde))_0x1c53cb=_0x19e517(0xae);}}}return _0x1c53cb;}function updateStatus(_0x5beee1,_0x1675bb){const _0x40680c=_0x260d1c;dbConfig[_0x40680c(0x1a1)](_0x40680c(0x174))[_0x40680c(0x164)]({'botID':_0x5beee1})['assign']({'status':_0x1675bb})[_0x40680c(0x120)](),config=getConfiguration(),io['to'](_0x40680c(0x154))[_0x40680c(0x166)]('bots',config);}function updateLive(_0x5df051,_0x3b68ad){const _0x2776c1=_0x260d1c;dbConfig['get']('bots')[_0x2776c1(0x164)]({'botID':_0x5df051})[_0x2776c1(0x160)]({'live':_0x3b68ad})[_0x2776c1(0x120)](),config=getConfiguration(),io['to'](_0x2776c1(0x154))[_0x2776c1(0x166)](_0x2776c1(0x174),config);}function updateBotName(_0x118c2f,_0x281fea){const _0x4d351b=_0x260d1c;dbConfig[_0x4d351b(0x1a1)](_0x4d351b(0x174))[_0x4d351b(0x164)]({'botID':_0x118c2f})[_0x4d351b(0x160)]({'botname':_0x281fea})[_0x4d351b(0x120)](),config=getConfiguration(),io['to'](_0x4d351b(0x154))[_0x4d351b(0x166)]('bots',config);}function telegramError(_0x3cb1e8){const _0x28a736=_0x260d1c;console['log'](getTimeStamp()+_0x28a736(0xf5));}function validateTelegram(_0x226d39){const _0x4d6e3d=_0x260d1c;if(_0x226d39[_0x4d6e3d(0x195)][_0x4d6e3d(0x12b)]!=settings[_0x4d6e3d(0x89)]&&'@'+_0x226d39['from']['username']!=settings['telegramUsername'])return tgBot['sendMessage'](_0x226d39['chat']['id'],_0x4d6e3d(0xf9),{'parse_mode':_0x4d6e3d(0x16c)})[_0x4d6e3d(0xca)](_0x3e1fb0=>{telegramError(_0x3e1fb0);}),![];return!![];}async function initTelegram(){const _0x4c522b=_0x260d1c;if(tgBot)tgBot[_0x4c522b(0xa5)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x4c522b(0xd8)],{'polling':!![]});let _0x1ff5b7=_0x4c522b(0x6f);_0x1ff5b7+='\x0a',_0x1ff5b7+='/enable\x20-\x20enable\x20notifications\x0a',_0x1ff5b7+='/disable\x20-\x20disable\x20notifications\x0a',_0x1ff5b7+=_0x4c522b(0x1a0),_0x1ff5b7+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x1ff5b7+=_0x4c522b(0x10b),_0x1ff5b7+=_0x4c522b(0xff),_0x1ff5b7+=_0x4c522b(0xc8),_0x1ff5b7+=_0x4c522b(0xba);let _0x568c72=_0x4c522b(0x100);_0x568c72+='\x0a',_0x568c72+=_0x1ff5b7,tgBot[_0x4c522b(0x162)](/\/start/,_0xa1d3b8=>{const _0x4c75a1=_0x4c522b;if(!validateTelegram(_0xa1d3b8))return;if(settings[_0x4c75a1(0x192)]!=_0xa1d3b8['chat']['id'])updateSetting(_0x4c75a1(0x192),_0xa1d3b8[_0x4c75a1(0x15d)]['id']);updateSetting(_0x4c75a1(0x83),!![]),tgBot[_0x4c75a1(0x118)](_0xa1d3b8[_0x4c75a1(0x15d)]['id'],_0x568c72)[_0x4c75a1(0xca)](_0x24a7b8=>{telegramError(_0x24a7b8);});}),tgBot[_0x4c522b(0x162)](/\/enable/,_0x5e9aef=>{const _0x41ab7c=_0x4c522b;if(!validateTelegram(_0x5e9aef))return;if(settings[_0x41ab7c(0x192)]!=_0x5e9aef['chat']['id'])updateSetting(_0x41ab7c(0x192),_0x5e9aef[_0x41ab7c(0x15d)]['id']);updateSetting(_0x41ab7c(0x83),!![]),tgBot[_0x41ab7c(0x118)](_0x5e9aef[_0x41ab7c(0x15d)]['id'],_0x41ab7c(0xe5))[_0x41ab7c(0xca)](_0x2e6fa9=>{telegramError(_0x2e6fa9);});}),tgBot[_0x4c522b(0x162)](/\/config/,async _0x3583e7=>{const _0x1592bf=_0x4c522b;if(!validateTelegram(_0x3583e7))return;tgBot[_0x1592bf(0x14d)](_0x1592bf(0x75)),tgBot[_0x1592bf(0x118)](_0x3583e7['chat']['id'],_0x1592bf(0x136),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x1592bf(0x1a8)},{'text':_0x1592bf(0x158),'callback_data':_0x1592bf(0x184)},{'text':_0x1592bf(0x173),'callback_data':_0x1592bf(0x167)}]]}})[_0x1592bf(0xca)](_0x24b4c7=>{telegramError(_0x24b4c7);}),tgBot['on'](_0x1592bf(0x75),async _0x487558=>{const _0x1aeed5=_0x1592bf,_0x1013cd=_0x487558[_0x1aeed5(0xd4)],_0x55952e=_0x487558[_0x1aeed5(0x119)];tgBot[_0x1aeed5(0x140)](_0x487558['id'])[_0x1aeed5(0x127)](async()=>{const _0x135498=_0x1aeed5;_0x1013cd==_0x135498(0x1a8)&&(updateSetting(_0x135498(0x10c),'orders'),updateSetting(_0x135498(0x83),!![]),await tgBot['sendMessage'](_0x55952e[_0x135498(0x15d)]['id'],_0x135498(0xc7))['catch'](_0x1dd7e4=>{telegramError(_0x1dd7e4);}));_0x1013cd==_0x135498(0x184)&&(updateSetting(_0x135498(0x10c),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x55952e[_0x135498(0x15d)]['id'],_0x135498(0x148))[_0x135498(0xca)](_0x57679f=>{telegramError(_0x57679f);}));_0x1013cd=='all'&&(updateSetting(_0x135498(0x10c),_0x135498(0x167)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x55952e[_0x135498(0x15d)]['id'],_0x135498(0x8f))[_0x135498(0xca)](_0x1b75e4=>{telegramError(_0x1b75e4);}));if(!settings['telegramChatId'])tgBot[_0x135498(0x118)](_0x55952e[_0x135498(0x15d)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x135498(0xca)](_0x1e9d05=>{telegramError(_0x1e9d05);});}),tgBot[_0x1aeed5(0x14d)](_0x1aeed5(0x75));});}),tgBot[_0x4c522b(0x162)](/\/status/,_0x32398a=>{const _0x2448b2=_0x4c522b;if(!validateTelegram(_0x32398a))return;let _0x4c34ed=_0x2448b2(0xac);config[_0x2448b2(0x8d)](_0x3fc39d=>{const _0x1aefac=_0x2448b2;_0x4c34ed+=_0x1aefac(0x13a)+_0x3fc39d['botID']+_0x1aefac(0x177)+_0x3fc39d[_0x1aefac(0x159)]+':\x20'+_0x3fc39d['status']+_0x1aefac(0x170)+_0x3fc39d['live']+'\x0a';}),_0x4c34ed+='\x0a',_0x4c34ed+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x4c34ed+=!settings['telegramEnabled']?_0x2448b2(0x171):_0x2448b2(0xc9),_0x4c34ed+=settings[_0x2448b2(0x83)]?settings[_0x2448b2(0x10c)]=='all'?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x2448b2(0x113)+settings[_0x2448b2(0x10c)]+_0x2448b2(0x130):'',tgBot['sendMessage'](_0x32398a['chat']['id'],_0x4c34ed,{'parse_mode':_0x2448b2(0x16c)})[_0x2448b2(0xca)](_0x1832c3=>{telegramError(_0x1832c3);});}),tgBot[_0x4c522b(0x162)](/\/restart/,_0x22d215=>{const _0x22a39b=_0x4c522b;if(!validateTelegram(_0x22d215))return;tgBot[_0x22a39b(0x14d)](_0x22a39b(0x75));const _0x1eaf61=getEnabledBots();if(_0x1eaf61[_0x22a39b(0x11f)]==0x0)tgBot[_0x22a39b(0x118)](_0x22d215[_0x22a39b(0x15d)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x22a39b(0xca)](_0x37b1dc=>{telegramError(_0x37b1dc);});else{if(_0x1eaf61['length']>0x1)_0x1eaf61[_0x22a39b(0x7a)]({'botID':_0x22a39b(0x167)});let _0x4b699d=[],_0x5f086c=[];const _0x1a1767=_0x1eaf61[_0x22a39b(0x11f)]%0x4==0x0||_0x1eaf61[_0x22a39b(0x11f)]%0x4==0x3||_0x1eaf61[_0x22a39b(0x11f)]%0x3==0x1?0x4:0x3;let _0xc7edb1=0x0;_0x1eaf61[_0x22a39b(0x8d)]((_0x36b069,_0x3e4573)=>{const _0x1b63c6=_0x22a39b;if(_0x3e4573%_0x1a1767==0x0)_0x5f086c=[];_0x5f086c[_0x1b63c6(0x7a)]({'text':_0x36b069[_0x1b63c6(0xe7)]==_0x1b63c6(0x167)?_0x1b63c6(0x13c):_0x1b63c6(0x13a)+_0x36b069['botID'],'callback_data':_0x36b069['botID']}),_0x3e4573%_0x1a1767==0x0&&(_0x4b699d[_0xc7edb1]=_0x5f086c,_0xc7edb1++);}),tgBot[_0x22a39b(0x118)](_0x22d215[_0x22a39b(0x15d)]['id'],_0x22a39b(0xb6),{'reply_markup':{'inline_keyboard':_0x4b699d}})[_0x22a39b(0xca)](_0x4be4ac=>{telegramError(_0x4be4ac);}),tgBot['on'](_0x22a39b(0x75),async _0x2b9999=>{const _0x46ae29=_0x22a39b,_0x552d00=_0x2b9999['data'],_0x229ab2=_0x2b9999[_0x46ae29(0x119)];tgBot[_0x46ae29(0x140)](_0x2b9999['id'])[_0x46ae29(0x127)](async()=>{const _0x44514c=_0x46ae29;if(_0x552d00==_0x44514c(0x167)){if(settings['telegramEvents']=='orders')tgBot[_0x44514c(0x118)](_0x229ab2[_0x44514c(0x15d)]['id'],_0x44514c(0x19c))['catch'](_0x5247d6=>{telegramError(_0x5247d6);});config[_0x44514c(0x8d)](_0xcfe15b=>{const _0x289d15=_0x44514c;restartBot(_0xcfe15b[_0x289d15(0xe7)]);});}else{if(settings[_0x44514c(0x10c)]==_0x44514c(0x1a8))tgBot['sendMessage'](_0x229ab2[_0x44514c(0x15d)]['id'],_0x44514c(0x139)+_0x552d00)[_0x44514c(0xca)](_0x58a590=>{telegramError(_0x58a590);});restartBot(_0x552d00);}}),tgBot['removeListener'](_0x46ae29(0x75));});}}),tgBot[_0x4c522b(0x162)](/\/on/,_0x526dde=>{const _0x40e648=_0x4c522b;if(!validateTelegram(_0x526dde))return;tgBot['removeListener'](_0x40e648(0x75));const _0x2721cd=getDisabledBots();if(_0x2721cd[_0x40e648(0x11f)]==0x0)tgBot[_0x40e648(0x118)](_0x526dde[_0x40e648(0x15d)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x40e648(0xca)](_0x454fb3=>{telegramError(_0x454fb3);});else{if(_0x2721cd['length']>0x1)_0x2721cd['push']({'botID':_0x40e648(0x167)});let _0x387e63=[],_0x375c30=[];const _0x54dc96=_0x2721cd['length']%0x4==0x0||_0x2721cd[_0x40e648(0x11f)]%0x4==0x3||_0x2721cd[_0x40e648(0x11f)]%0x3==0x1?0x4:0x3;let _0x317393=0x0;_0x2721cd['forEach']((_0x28fc80,_0x55b9c3)=>{const _0x1b4948=_0x40e648;if(_0x55b9c3%_0x54dc96==0x0)_0x375c30=[];_0x375c30['push']({'text':_0x28fc80[_0x1b4948(0xe7)]==_0x1b4948(0x167)?_0x1b4948(0x13c):_0x1b4948(0x13a)+_0x28fc80[_0x1b4948(0xe7)],'callback_data':_0x28fc80['botID']}),_0x55b9c3%_0x54dc96==0x0&&(_0x387e63[_0x317393]=_0x375c30,_0x317393++);}),tgBot[_0x40e648(0x118)](_0x526dde[_0x40e648(0x15d)]['id'],_0x40e648(0x18a),{'reply_markup':{'inline_keyboard':_0x387e63}})[_0x40e648(0xca)](_0x22b43b=>{telegramError(_0x22b43b);}),tgBot['on'](_0x40e648(0x75),async _0x216f51=>{const _0x4af224=_0x40e648,_0x38f42e=_0x216f51['data'],_0x16e889=_0x216f51[_0x4af224(0x119)];tgBot[_0x4af224(0x140)](_0x216f51['id'])[_0x4af224(0x127)](async()=>{const _0x3b7636=_0x4af224;if(_0x38f42e==_0x3b7636(0x167)){if(settings[_0x3b7636(0x10c)]==_0x3b7636(0x1a8))tgBot[_0x3b7636(0x118)](_0x16e889[_0x3b7636(0x15d)]['id'],_0x3b7636(0x106))['catch'](_0x498940=>{telegramError(_0x498940);});_0x2721cd[_0x3b7636(0x8d)](_0xc03f11=>{const _0x22c97c=_0x3b7636;if(_0xc03f11[_0x22c97c(0xe7)]!=_0x22c97c(0x167))toggleBot(_0xc03f11[_0x22c97c(0xe7)],toggleStatus(_0xc03f11[_0x22c97c(0xe7)]),_0x22c97c(0x114));});}else{if(settings[_0x3b7636(0x10c)]==_0x3b7636(0x1a8))tgBot[_0x3b7636(0x118)](_0x16e889[_0x3b7636(0x15d)]['id'],_0x3b7636(0x18b)+_0x38f42e)[_0x3b7636(0xca)](_0x337ce5=>{telegramError(_0x337ce5);});toggleBot(_0x38f42e,toggleStatus(_0x38f42e),'stopped');}}),tgBot[_0x4af224(0x14d)](_0x4af224(0x75));});}}),tgBot[_0x4c522b(0x162)](/\/off/,_0x55dc1b=>{const _0x235496=_0x4c522b;if(!validateTelegram(_0x55dc1b))return;tgBot[_0x235496(0x14d)](_0x235496(0x75));const _0x434d0c=getEnabledBots();if(_0x434d0c[_0x235496(0x11f)]==0x0)tgBot[_0x235496(0x118)](_0x55dc1b[_0x235496(0x15d)]['id'],_0x235496(0x91))[_0x235496(0xca)](_0x22de6b=>{telegramError(_0x22de6b);});else{if(_0x434d0c[_0x235496(0x11f)]>0x1)_0x434d0c[_0x235496(0x7a)]({'botID':_0x235496(0x167)});let _0x15aaec=[],_0x33aafe=[];const _0x4493f0=_0x434d0c[_0x235496(0x11f)]%0x4==0x0||_0x434d0c[_0x235496(0x11f)]%0x4==0x3||_0x434d0c['length']%0x3==0x1?0x4:0x3;let _0x4ff395=0x0;_0x434d0c[_0x235496(0x8d)]((_0x330c98,_0x21b3a8)=>{const _0x31ff58=_0x235496;if(_0x21b3a8%_0x4493f0==0x0)_0x33aafe=[];_0x33aafe['push']({'text':_0x330c98[_0x31ff58(0xe7)]==_0x31ff58(0x167)?'All\x20bots':_0x31ff58(0x13a)+_0x330c98['botID'],'callback_data':_0x330c98[_0x31ff58(0xe7)]}),_0x21b3a8%_0x4493f0==0x0&&(_0x15aaec[_0x4ff395]=_0x33aafe,_0x4ff395++);}),tgBot[_0x235496(0x118)](_0x55dc1b[_0x235496(0x15d)]['id'],_0x235496(0xc6),{'reply_markup':{'inline_keyboard':_0x15aaec}})[_0x235496(0xca)](_0x30a060=>{telegramError(_0x30a060);}),tgBot['on'](_0x235496(0x75),async _0x25ace0=>{const _0x1baeeb=_0x235496,_0x56589c=_0x25ace0[_0x1baeeb(0xd4)],_0x6743c4=_0x25ace0[_0x1baeeb(0x119)];tgBot['answerCallbackQuery'](_0x25ace0['id'])['then'](async()=>{const _0x23dbb1=_0x1baeeb;if(_0x56589c==_0x23dbb1(0x167)){if(settings[_0x23dbb1(0x10c)]=='orders')tgBot['sendMessage'](_0x6743c4[_0x23dbb1(0x15d)]['id'],_0x23dbb1(0x16f))[_0x23dbb1(0xca)](_0x12b8ba=>{telegramError(_0x12b8ba);});_0x434d0c[_0x23dbb1(0x8d)](_0xd17eac=>{const _0x295812=_0x23dbb1;if(_0xd17eac[_0x295812(0xe7)]!=_0x295812(0x167))toggleBot(_0xd17eac[_0x295812(0xe7)],toggleStatus(_0xd17eac[_0x295812(0xe7)]),'stopped');});}else{if(settings[_0x23dbb1(0x10c)]=='orders')tgBot['sendMessage'](_0x6743c4['chat']['id'],_0x23dbb1(0x185)+_0x56589c)[_0x23dbb1(0xca)](_0x55e457=>{telegramError(_0x55e457);});toggleBot(_0x56589c,toggleStatus(_0x56589c),'stopped');}}),tgBot[_0x1baeeb(0x14d)](_0x1baeeb(0x75));});}}),tgBot['onText'](/\/disable/,_0x1f852c=>{const _0x462b99=_0x4c522b;if(!validateTelegram(_0x1f852c))return;tgBot['sendMessage'](_0x1f852c['chat']['id'],_0x462b99(0x74))[_0x462b99(0xca)](_0x30d07d=>{telegramError(_0x30d07d);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x4c522b(0x162)](/\/help/,_0x384822=>{const _0x45cdf4=_0x4c522b;if(!validateTelegram(_0x384822))return;tgBot[_0x45cdf4(0x118)](_0x384822[_0x45cdf4(0x15d)]['id'],_0x1ff5b7)[_0x45cdf4(0xca)](_0x598631=>{telegramError(_0x598631);});}),tgBot['on'](_0x4c522b(0x1ad),_0x2ce9ed=>{const _0x33b65f=_0x4c522b;_0x2ce9ed[_0x33b65f(0xda)]()[_0x33b65f(0x79)](_0x33b65f(0xa6))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0x33b65f(0x154))[_0x33b65f(0x166)](_0x33b65f(0xd0),_0x33b65f(0xcc)));}),process[_0x4c522b(0x199)](_0x4c522b(0xc2),()=>{const _0xb2c54e=_0x4c522b;if(tgBot)tgBot['stopPolling']();process[_0xb2c54e(0xe9)](0x1);}),process['once'](_0x4c522b(0x8a),()=>{const _0x3025e2=_0x4c522b;if(tgBot)tgBot[_0x3025e2(0xa5)]();process[_0x3025e2(0xe9)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x32041c,_0x8caafa){const _0x54e1d1=_0x260d1c;if(settings[_0x54e1d1(0x83)]){if(settings['telegramEvents']==_0x54e1d1(0x167)||(_0x8caafa['type']==_0x54e1d1(0xb9)||_0x8caafa['type']==_0x54e1d1(0x18f))&&settings['telegramEvents']==_0x54e1d1(0x184)||_0x8caafa[_0x54e1d1(0x18c)]=='order'&&settings[_0x54e1d1(0x10c)]==_0x54e1d1(0x1a8)){if(tgBot&&settings[_0x54e1d1(0x192)]){if(_0x8caafa[_0x54e1d1(0xcf)])tgBot[_0x54e1d1(0x118)](settings[_0x54e1d1(0x192)],_0x8caafa[_0x54e1d1(0x159)]+'\x20>\x20'+_0x8caafa['event'])[_0x54e1d1(0xca)](_0x233eaa=>{telegramError(_0x233eaa);});else tgBot[_0x54e1d1(0x118)](settings[_0x54e1d1(0x192)],_0x54e1d1(0x13a)+_0x32041c+'\x20>\x20'+_0x8caafa[_0x54e1d1(0x183)])[_0x54e1d1(0xca)](_0x5cb678=>{telegramError(_0x5cb678);});}}}}function getDeviceWithIp(_0x1d9558){const _0x265e4b=_0x260d1c;return devices[_0x265e4b(0x164)](_0x5a77a3=>_0x5a77a3['ip']===_0x1d9558);}function temporaryAccess2FA(_0x1abbb9,_0x3e0d19){const _0x297c21=_0x260d1c;let _0x4ed3b7=new Date(),_0x431a84=![];if(lastIpApproval){if(_0x4ed3b7-lastIpApproval<0x1388)_0x431a84=!![];}lastIpApproval=new Date();if(_0x431a84)return;tgBot&&settings['telegramChatId']&&(tgBot[_0x297c21(0x14d)](_0x297c21(0x75)),tgBot[_0x297c21(0x118)](settings[_0x297c21(0x192)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x3e0d19)[_0x297c21(0x103)]+'</b>\x20?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x297c21(0x169),'callback_data':'5'},{'text':_0x297c21(0x18d),'callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':'reject','callback_data':'reject'}]]}})[_0x297c21(0xca)](_0x57bb4a=>{telegramError(_0x57bb4a);}),tgBot['on'](_0x297c21(0x75),async _0x1902ac=>{const _0x51590f=_0x297c21,_0x2dbcab=_0x1902ac[_0x51590f(0xd4)],_0x73eb6b=_0x1902ac[_0x51590f(0x119)];tgBot[_0x51590f(0x140)](_0x1902ac['id'])['then'](async()=>{const _0x131613=_0x51590f;devices[_0x1abbb9][_0x131613(0x153)]={'clientip':_0x3e0d19,'timestamp':new Date()['getTime'](),'expiry':_0x2dbcab},_0x2dbcab!='reject'?(await tgBot[_0x131613(0x118)](_0x73eb6b[_0x131613(0x15d)]['id'],_0x131613(0x165)+_0x2dbcab+_0x131613(0xfc),{'parse_mode':'HTML'})[_0x131613(0xca)](_0xf680cc=>{telegramError(_0xf680cc);}),io['to'](_0x1abbb9)[_0x131613(0x166)](_0x131613(0xb7),{'access':{'allow':![],'reason':_0x131613(0x141),'token':null}})):(await tgBot[_0x131613(0x118)](_0x73eb6b['chat']['id'],_0x131613(0x11e))['catch'](_0x5d1621=>{telegramError(_0x5d1621);}),io['to'](_0x1abbb9)[_0x131613(0x166)](_0x131613(0xb7),{'access':{'allow':![],'reason':_0x131613(0x1aa),'token':null}}));}),tgBot[_0x51590f(0x14d)](_0x51590f(0x75));}));}function loginAccess2FA(_0x57c730,_0x2c4f73){const _0x19691f=_0x260d1c;tgBot&&settings[_0x19691f(0x192)]&&(tgBot[_0x19691f(0x14d)](_0x19691f(0x75)),tgBot[_0x19691f(0x118)](settings['telegramChatId'],_0x19691f(0x14b)+normalizeIP(_0x2c4f73)[_0x19691f(0x103)]+'</b>\x20?',{'parse_mode':_0x19691f(0x16c),'reply_markup':{'inline_keyboard':[[{'text':_0x19691f(0x72),'callback_data':loginExpiry},{'text':_0x19691f(0x7d),'callback_data':_0x19691f(0x7d)}]]}})[_0x19691f(0xca)](_0x62430e=>{telegramError(_0x62430e);}),tgBot['on']('callback_query',async _0x558330=>{const _0x47d9d7=_0x19691f,_0x4ad6e6=_0x558330[_0x47d9d7(0xd4)],_0x54d440=_0x558330[_0x47d9d7(0x119)];tgBot[_0x47d9d7(0x140)](_0x558330['id'])[_0x47d9d7(0x127)](async()=>{const _0x33b8b2=_0x47d9d7;devices[_0x57c730][_0x33b8b2(0x1a2)]={'clientip':_0x2c4f73,'timestamp':new Date()[_0x33b8b2(0x124)](),'expiry':_0x4ad6e6},_0x4ad6e6!=_0x33b8b2(0x7d)?(await tgBot[_0x33b8b2(0x118)](_0x54d440[_0x33b8b2(0x15d)]['id'],_0x33b8b2(0x9c),{'parse_mode':_0x33b8b2(0x16c)})[_0x33b8b2(0xca)](_0x4541db=>{telegramError(_0x4541db);}),io['to'](_0x57c730)[_0x33b8b2(0x166)]('status',{'access':{'allow':![],'reason':_0x33b8b2(0x141),'token':null}})):(await tgBot[_0x33b8b2(0x118)](_0x54d440[_0x33b8b2(0x15d)]['id'],_0x33b8b2(0x11a))[_0x33b8b2(0xca)](_0x321b8f=>{telegramError(_0x321b8f);}),io['to'](_0x57c730)[_0x33b8b2(0x166)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x47d9d7(0x14d)](_0x47d9d7(0x75));}));}function getConfiguration(){const _0x3538b6=_0x260d1c;return dbConfig[_0x3538b6(0x1a1)](_0x3538b6(0x174))[_0x3538b6(0x115)]('botID')['value']()||[];}function getEnabledBots(){const _0x5d42ae=_0x260d1c;return dbConfig[_0x5d42ae(0x1a1)]('bots')[_0x5d42ae(0x115)](_0x5d42ae(0xe7))[_0x5d42ae(0x82)]({'status':'enabled'})[_0x5d42ae(0x15c)]()||[];}function getDisabledBots(){const _0x29ee7a=_0x260d1c;return dbConfig[_0x29ee7a(0x1a1)]('bots')[_0x29ee7a(0x115)](_0x29ee7a(0xe7))[_0x29ee7a(0x82)]({'status':_0x29ee7a(0xde)})[_0x29ee7a(0x15c)]()||[];}function getSettings(){const _0x52d594=_0x260d1c;return dbSettings['get'](_0x52d594(0xcb))[_0x52d594(0x15c)]()||{'timeshift':0x0};}function getSecure(){const _0x30fa92=_0x260d1c;return dbSecure['get'](_0x30fa92(0x19a))['value']()||{};}function getBlacklist(){const _0x2806be=_0x260d1c;return dbSecure[_0x2806be(0x1a1)](_0x2806be(0x172))[_0x2806be(0x15c)]()||[];}function broadcastToBots(_0x4dfb3b,_0x52373c){const _0x30861b=_0x260d1c;config[_0x30861b(0x8d)](_0x3f4723=>{const _0x479296=_0x30861b;if(_0x3f4723[_0x479296(0xb7)]==_0x479296(0xae)&&_0x3f4723[_0x479296(0xe2)]=='running'){if(pid[_0x3f4723[_0x479296(0xe7)]])pid[_0x3f4723[_0x479296(0xe7)]][_0x479296(0x186)]({[_0x4dfb3b]:_0x52373c});}});}function storeSettings(_0x1d2af8,_0x4f7ce4=![]){const _0x2221fc=_0x260d1c;_0x1d2af8={...settings,..._0x1d2af8};if(_0x4f7ce4&&_0x1d2af8[_0x2221fc(0x131)]!=_0x2221fc(0x132)&&_0x1d2af8['bbPassword']!=''){const _0x1315ca=crypt[_0x2221fc(0x17f)](secure['privateKey'],_0x1d2af8[_0x2221fc(0x131)])[_0x2221fc(0x119)][_0x2221fc(0xe4)]('@')[0x0],_0x3f75e1=bcrypt[_0x2221fc(0x16a)](_0x1315ca,saltRounds);_0x1d2af8={..._0x1d2af8,'bbPassword':_0x3f75e1};}if(_0x4f7ce4&&_0x1d2af8[_0x2221fc(0xd8)]!=_0x2221fc(0x132)&&_0x1d2af8[_0x2221fc(0xd8)]!=''){const _0x116cd0=crypt['decrypt'](secure[_0x2221fc(0x16e)],_0x1d2af8['telegramToken'])[_0x2221fc(0x119)][_0x2221fc(0xe4)]('@')[0x0];_0x1d2af8={..._0x1d2af8,'telegramToken':_0x116cd0};}const _0x9b447f=_0x1d2af8[_0x2221fc(0xd8)]!=_0x2221fc(0x132)&&_0x1d2af8[_0x2221fc(0xd8)]!=settings[_0x2221fc(0xd8)]||_0x1d2af8[_0x2221fc(0x89)]!=settings['telegramUsername'],_0x3aebec=_0x1d2af8[_0x2221fc(0xd8)]==''||_0x1d2af8[_0x2221fc(0x89)]=='';if(_0x9b447f)_0x1d2af8[_0x2221fc(0x10c)]=_0x2221fc(0x167);for(const [_0x2a7828,_0x45067e]of Object[_0x2221fc(0x150)](_0x1d2af8)){if(_0x2a7828=='telegramToken'&&_0x45067e==_0x2221fc(0x132)){_0x1d2af8[_0x2221fc(0xd8)]=settings[_0x2221fc(0xd8)];continue;};if(_0x2a7828==_0x2221fc(0x131)&&_0x45067e==_0x2221fc(0x132)){_0x1d2af8[_0x2221fc(0x131)]=settings[_0x2221fc(0x131)];continue;};dbSettings['set'](_0x2221fc(0xb1)+_0x2a7828,_0x45067e)[_0x2221fc(0x120)]();}settings=_0x1d2af8,io['to']('botmanager')[_0x2221fc(0x166)](_0x2221fc(0xcb),cleanSettings()),broadcastToBots(_0x2221fc(0x104),settings[_0x2221fc(0x104)]);if(_0x9b447f&&!_0x3aebec)initTelegram();if(_0x9b447f&&_0x3aebec)disableTelegram();getAllClients()[_0x2221fc(0x8d)](_0xec66d1=>{const _0x16b8fe=_0x2221fc;getSocket(_0xec66d1['id'])[_0x16b8fe(0x166)](_0x16b8fe(0xb7),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x1faecd,_0x307987){const _0x3eb10a=_0x260d1c;dbSettings[_0x3eb10a(0xf4)](_0x3eb10a(0xb1)+_0x1faecd,_0x307987)[_0x3eb10a(0x120)](),settings=getSettings(),io['to']('botmanager')[_0x3eb10a(0x166)](_0x3eb10a(0xcb),cleanSettings());}function storeSecure(_0x3e67aa){const _0x22df3c=_0x260d1c;dbSecure[_0x22df3c(0x1a1)](_0x22df3c(0x19a))[_0x22df3c(0x7a)](_0x3e67aa)[_0x22df3c(0x120)](),secure=_0x3e67aa;}function addBlacklist(_0x2f84bd){const _0x1a71a9=_0x260d1c;cleanBlacklist();let _0xfb8b14;devices[_0x2f84bd]['telegramIpApproval']?_0xfb8b14=Math[_0x1a71a9(0x194)](devices[_0x2f84bd]['telegramIpApproval'][_0x1a71a9(0x12d)],loginExpiry):_0xfb8b14=loginExpiry,dbSecure[_0x1a71a9(0x1a1)](_0x1a71a9(0x172))[_0x1a71a9(0x7a)]({'expiry':new Date()['getTime']()+_0xfb8b14*0x3c*0x3e8,'token':devices[_0x2f84bd][_0x1a71a9(0x191)][_0x1a71a9(0x76)]})[_0x1a71a9(0x120)](),blacklist=dbSecure[_0x1a71a9(0x1a1)](_0x1a71a9(0x172))[_0x1a71a9(0x15c)]();}function cleanBlacklist(){const _0x4dbaef=_0x260d1c;let _0x1ad0b6=dbSecure[_0x4dbaef(0x1a1)](_0x4dbaef(0x172))[_0x4dbaef(0xee)]()[_0x4dbaef(0x15c)](),_0x1a7a40=new Date()['getTime']();_0x1ad0b6[_0x4dbaef(0x8d)](_0x1b4b62=>{const _0x2e1e3e=_0x4dbaef;_0x1b4b62[_0x2e1e3e(0x12d)]<_0x1a7a40&&dbSecure[_0x2e1e3e(0x1a1)](_0x2e1e3e(0x172))['remove']({'expiry':_0x1b4b62['expiry']})[_0x2e1e3e(0x120)]();});}function initStates(){const _0x577a21=_0x260d1c;let _0xef10f0=getConfiguration();_0xef10f0[_0x577a21(0x8d)](_0x3a7dd9=>{const _0x3f6f2e=_0x577a21;_0x3a7dd9['live']=_0x3f6f2e(0x114);}),storeConfiguration(_0xef10f0);}function onKeys(){const _0x45bd3a=new RSA();return new Promise(_0x291e10=>{const _0x4918ea=_0x36e6;_0x45bd3a[_0x4918ea(0xd9)]()[_0x4918ea(0x127)](_0x4aac60=>{_0x291e10(_0x4aac60);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x518e3f=_0x260d1c;let _0x159ecc=getConfiguration(),_0x58c91e=![];_0x159ecc[_0x518e3f(0x8d)](_0x369861=>{const _0x3fd77a=_0x518e3f;if(_0x369861['status']==_0x3fd77a(0x182))_0x369861[_0x3fd77a(0xb7)]=_0x3fd77a(0xae),_0x58c91e=!![];else _0x369861['status']==_0x3fd77a(0x114)&&(_0x369861[_0x3fd77a(0xb7)]=_0x3fd77a(0xde),_0x58c91e=!![]);});if(_0x58c91e)storeConfiguration(_0x159ecc);let _0x5cab43=getSecure();if(!_0x5cab43[_0x518e3f(0xe0)](_0x518e3f(0xa2))){let _0x27e664=await generateKeys();_0x5cab43[_0x518e3f(0x1a5)]=_0x27e664[_0x518e3f(0x1a5)],_0x5cab43[_0x518e3f(0x16e)]=_0x27e664[_0x518e3f(0x16e)],_0x5cab43['secret']=crypto[_0x518e3f(0x1a4)](0x20)[_0x518e3f(0xda)](_0x518e3f(0x7b));;storeSecure(_0x5cab43);}let _0x2bbdeb=getSettings();_0x58c91e=![];!_0x2bbdeb['hasOwnProperty'](_0x518e3f(0x18e))&&(_0x2bbdeb['loginRequired']=![],_0x2bbdeb[_0x518e3f(0x109)]='',_0x2bbdeb[_0x518e3f(0x131)]='',_0x2bbdeb['f2aRequired']=![],_0x58c91e=!![]);!_0x2bbdeb[_0x518e3f(0xe0)]('whitelistEnabled')&&(_0x2bbdeb[_0x518e3f(0x12c)]=![],_0x2bbdeb[_0x518e3f(0x17a)]=[],_0x2bbdeb[_0x518e3f(0xf0)]=![],_0x58c91e=!![]);if(!_0x2bbdeb[_0x518e3f(0xe0)](_0x518e3f(0x83))){if(_0x2bbdeb[_0x518e3f(0x192)])_0x2bbdeb['telegramEnabled']=!![];else _0x2bbdeb[_0x518e3f(0x83)]=![];_0x58c91e=!![];}if(_0x58c91e)storeSettings(_0x2bbdeb);}function storeConfiguration(_0x19ef90){const _0x4e7687=_0x260d1c;dbConfig['get'](_0x4e7687(0x174))['remove']()[_0x4e7687(0x120)](),dbConfig[_0x4e7687(0x1a1)](_0x4e7687(0x174))[_0x4e7687(0x7a)](..._0x19ef90)[_0x4e7687(0x120)](),config=_0x19ef90;}function resetPassword(){const _0x10e954=_0x260d1c;tgBot&&settings[_0x10e954(0x192)]&&(tgBot[_0x10e954(0x14d)](_0x10e954(0x75)),tgBot[_0x10e954(0x118)](settings[_0x10e954(0x192)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x10e954(0x1ae),'callback_data':_0x10e954(0x1ae)},{'text':'no','callback_data':'no'}]]}})[_0x10e954(0xca)](_0x54c3b9=>{telegramError(_0x54c3b9);}),tgBot['on'](_0x10e954(0x75),async _0x3da465=>{const _0x2eb6d7=_0x10e954,_0x4b918f=_0x3da465['data'],_0x5c51ab=_0x3da465[_0x2eb6d7(0x119)];tgBot[_0x2eb6d7(0x140)](_0x3da465['id'])['then'](async()=>{const _0x416c3e=_0x2eb6d7;if(_0x4b918f!='no'){const _0x3a8bde=0xf,_0x26bc0a=_0x416c3e(0x99),_0x2dae73=Array[_0x416c3e(0x195)](crypto[_0x416c3e(0x198)](new Uint32Array(_0x3a8bde)))['map'](_0x4e1303=>_0x26bc0a[_0x4e1303%_0x26bc0a[_0x416c3e(0x11f)]])[_0x416c3e(0xa3)](''),_0x231304=bcrypt[_0x416c3e(0x16a)](_0x2dae73,saltRounds);storeSettings({'bbPassword':_0x231304}),await tgBot[_0x416c3e(0x118)](_0x5c51ab[_0x416c3e(0x15d)]['id'],_0x416c3e(0x6e)+_0x2dae73,{'parse_mode':_0x416c3e(0x16c)})[_0x416c3e(0xca)](_0x26805e=>{telegramError(_0x26805e);});}else await tgBot[_0x416c3e(0x118)](_0x5c51ab[_0x416c3e(0x15d)]['id'],_0x416c3e(0x90))[_0x416c3e(0xca)](_0x4e5ff0=>{telegramError(_0x4e5ff0);});}),tgBot[_0x2eb6d7(0x14d)](_0x2eb6d7(0x75));}));}function logging(_0x1c2561){const _0xd55ca4=_0x260d1c;console[_0xd55ca4(0x92)](getTimeStamp()+_0xd55ca4(0x147)+_0x1c2561);if(tgBot&&settings[_0xd55ca4(0x192)]&&settings['telegramEvents']!=_0xd55ca4(0x1a8))tgBot['sendMessage'](settings['telegramChatId'],_0xd55ca4(0x157)+_0x1c2561)[_0xd55ca4(0xca)](_0x30d42b=>{telegramError(_0x30d42b);});}function getServerTime(){const _0x3b9bf8=_0x260d1c,_0x55ae92=new Date();return _0x55ae92['getFullYear']()+'/'+(_0x55ae92[_0x3b9bf8(0x134)]()+0x1)[_0x3b9bf8(0xda)]()[_0x3b9bf8(0x13b)](0x2,'0')+'/'+_0x55ae92[_0x3b9bf8(0x188)]()[_0x3b9bf8(0xda)]()[_0x3b9bf8(0x13b)](0x2,'0')+'\x20'+_0x55ae92[_0x3b9bf8(0xaf)]()['toString']()[_0x3b9bf8(0x13b)](0x2,'0')+':'+_0x55ae92['getMinutes']()['toString']()[_0x3b9bf8(0x13b)](0x2,'0')+':'+_0x55ae92[_0x3b9bf8(0xec)]()[_0x3b9bf8(0xda)]()[_0x3b9bf8(0x13b)](0x2,'0');}function getTimeStamp(){const _0x2ee497=_0x260d1c,_0x2635bd=shiftedTime();return _0x2635bd[_0x2ee497(0xa1)]()+'/'+(_0x2635bd['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2635bd[_0x2ee497(0x188)]()[_0x2ee497(0xda)]()[_0x2ee497(0x13b)](0x2,'0')+'\x20'+_0x2635bd[_0x2ee497(0xaf)]()['toString']()['padStart'](0x2,'0')+':'+_0x2635bd['getMinutes']()[_0x2ee497(0xda)]()[_0x2ee497(0x13b)](0x2,'0')+':'+_0x2635bd[_0x2ee497(0xec)]()['toString']()[_0x2ee497(0x13b)](0x2,'0');}function shiftedTime(){const _0x1fdb31=_0x260d1c,_0x8db74f=new Date();let _0x26ddb7=_0x8db74f;if(settings[_0x1fdb31(0x104)]&&settings[_0x1fdb31(0x104)]!==0x0)_0x26ddb7=fns['add'](_0x8db74f,{'hours':settings[_0x1fdb31(0x104)]});return _0x26ddb7;}function startScheduler(){const _0x3a355a=_0x260d1c;let _0x5f2051=new Date()[_0x3a355a(0x143)]();_0x5f2051==0x1&&backupConfigFiles();_0x5f2051==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3266e8=_0x260d1c;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3266e8(0x8d)](_0x140f03=>{const _0x1bab6c=_0x3266e8;if(!_0x140f03[_0x1bab6c(0x142)]())fs[_0x1bab6c(0xdf)](configpath+_0x140f03[_0x1bab6c(0xab)],configbackuppath+_0x140f03[_0x1bab6c(0xab)]);});}function triggerAnalytics(){const _0x33fc6c=_0x260d1c;analytics[_0x33fc6c(0x125)]({'title':_0x33fc6c(0x9f),'href':_0x33fc6c(0x101),'path':'/v'+serverversion});}function validateCredentials(_0x4bbfad,_0x3eabc5){const _0xab0bb=_0x260d1c;if(_0x4bbfad[_0xab0bb(0x12b)]==settings['bbUsername']&&bcrypt['compareSync'](_0x4bbfad[_0xab0bb(0xd6)],settings[_0xab0bb(0x131)])){if(settings[_0xab0bb(0xf2)])return{'allow':![],'reason':_0xab0bb(0x8c),'token':null};else{const _0x96414e=generateLoginToken(_0x3eabc5);return{'allow':!![],'reason':_0xab0bb(0x128),'token':_0x96414e};}}else return{'allow':![],'reason':_0xab0bb(0xad),'token':null};}function refreshToken(_0x10ac69){const _0xb69d84=_0x260d1c,_0x2a74dd=generateLoginToken(_0x10ac69);return{'allow':!![],'reason':_0xb69d84(0x128),'token':_0x2a74dd};}function validateAccess(_0x101ad3,_0x2df612){const _0x1882b2=_0x260d1c;let _0x4a9798=devices[_0x2df612]['ip'],_0x5b9448;const _0x106040=_0x2943c8=>{const _0x3710e9=_0x36e6;if(settings[_0x3710e9(0x18e)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x2df612)){const _0x124f3b=generateLoginToken(_0x2df612);return{'allow':!![],'reason':_0x3710e9(0x14e),'token':_0x124f3b};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5b9448=validToken(_0x2943c8,_0x2df612),_0x5b9448['hasOwnProperty']('success')?{'allow':!![],'reason':_0x3710e9(0x87),'token':_0x2943c8}:{'allow':![],'reason':_0x3710e9(0x80),'token':null};}else return{'allow':!![],'reason':_0x3710e9(0x94),'token':null};};if(settings['whitelistEnabled']){let _0x4b2a52=[...settings[_0x1882b2(0x17a)],_0x1882b2(0x151),_0x1882b2(0x1a6),_0x1882b2(0x14f)];if(_0x4b2a52[_0x1882b2(0x79)](_0x4a9798))return _0x106040(_0x101ad3);else{_0x5b9448=validToken(_0x101ad3,_0x2df612);if(_0x5b9448['hasOwnProperty'](_0x1882b2(0x18f)))return _0x106040(_0x101ad3);else{if(telegramIpApproved(_0x2df612)){const _0x7885d7=generateToken(_0x2df612);return _0x5b9448=_0x106040(_0x101ad3),_0x5b9448['allow']?{'allow':!![],'reason':_0x1882b2(0x69),'token':_0x7885d7}:_0x5b9448;}else return settings[_0x1882b2(0xf0)]?{'allow':![],'reason':_0x1882b2(0x178),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x106040(_0x101ad3);}function timelyDecrypt(_0xf77972,_0x54e24e=!![]){const _0x23e45d=_0x260d1c;if(_0xf77972)try{const _0x26acab=crypt[_0x23e45d(0x17f)](secure[_0x23e45d(0x16e)],_0xf77972)[_0x23e45d(0x119)],_0x5c8e79=_0x26acab['split']('@')[0x0],_0x4e0b5f=_0x26acab[_0x23e45d(0xe4)]('@')[0x1],_0x3f19f7=new Date()[_0x23e45d(0x124)]();if(_0x54e24e){if(_0x3f19f7-_0x4e0b5f<maxSecretAge*0x3e8)return _0x5c8e79;else return![];}else return _0x5c8e79;}catch(_0x4793bb){return![];}else return![];}const validToken=(_0x436de0,_0x2f13d3)=>{const _0x19e976=_0x260d1c,_0x4e0873=devices[_0x2f13d3]['ip'];if(!_0x436de0)return{'error':_0x19e976(0xbb)};for(let _0xc1f71b of blacklist){if(_0xc1f71b[_0x19e976(0x76)]==_0x436de0)return{'error':_0x19e976(0x1ab)};}let _0x43e8cb;try{_0x43e8cb=jwt[_0x19e976(0x122)](_0x436de0,secure['secret']+_0x2f13d3);}catch{return{'error':_0x19e976(0x190)};}if(!_0x43e8cb['hasOwnProperty'](_0x19e976(0x197))&&!_0x43e8cb['hasOwnProperty'](_0x19e976(0x12b))||!_0x43e8cb[_0x19e976(0xe0)](_0x19e976(0x138)))return{'error':_0x19e976(0x6d)};if(!_0x43e8cb[_0x19e976(0xe0)]('username')&&_0x43e8cb[_0x19e976(0xe0)](_0x19e976(0x197))){const {clientip:_0x58a9a4}=_0x43e8cb;return _0x4e0873==_0x58a9a4?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x19e976(0x12e)};}else{if(_0x43e8cb[_0x19e976(0xe0)](_0x19e976(0x12b))&&_0x43e8cb['hasOwnProperty'](_0x19e976(0x197))){const {username:_0x6b2b6a,clientip:_0x318562}=_0x43e8cb;return settings[_0x19e976(0x109)]==_0x6b2b6a&&_0x4e0873==_0x318562?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x19e976(0xb3)};}}},generateLoginToken=_0x399183=>{const _0x4e48cb=_0x260d1c;if(_0x399183){const _0x3cbf22=devices[_0x399183]['ip'];return jwt[_0x4e48cb(0x175)]({'username':settings[_0x4e48cb(0x109)],'clientip':_0x3cbf22},secure[_0x4e48cb(0xa2)]+_0x399183,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3004fe=>{const _0x4f677c=_0x260d1c;if(_0x3004fe){const _0x2ad017=devices[_0x3004fe]['ip'];return jwt['sign']({'clientip':_0x2ad017},secure[_0x4f677c(0xa2)]+_0x3004fe,{'expiresIn':devices[_0x3004fe][_0x4f677c(0x153)][_0x4f677c(0x12d)]*0x3c});}else return![];},telegramIpApproved=_0x45825c=>{const _0x37ee6e=_0x260d1c;let _0x199e38=![];return devices[_0x45825c][_0x37ee6e(0x153)]&&devices[_0x45825c][_0x37ee6e(0x153)][_0x37ee6e(0x12d)]!=_0x37ee6e(0x7d)&&(_0x199e38=devices[_0x45825c][_0x37ee6e(0x153)][_0x37ee6e(0x197)]==devices[_0x45825c]['ip']&&new Date()[_0x37ee6e(0x124)]()-devices[_0x45825c][_0x37ee6e(0x153)][_0x37ee6e(0xd1)]<devices[_0x45825c][_0x37ee6e(0x153)][_0x37ee6e(0x12d)]*0x3c*0x3e8),_0x199e38;},telegram2FaApproved=_0x80050a=>{const _0x4606bf=_0x260d1c;let _0x28804b=![];return devices[_0x80050a][_0x4606bf(0x1a2)]&&devices[_0x80050a]['telegram2FaApproval'][_0x4606bf(0x12d)]!=_0x4606bf(0x7d)&&(_0x28804b=devices[_0x80050a]['telegram2FaApproval']['clientip']==devices[_0x80050a]['ip']&&new Date()['getTime']()-devices[_0x80050a][_0x4606bf(0x1a2)][_0x4606bf(0xd1)]<devices[_0x80050a][_0x4606bf(0x1a2)][_0x4606bf(0x12d)]*0x3c*0x3e8),_0x28804b;},normalizeIP=_0x4a5068=>{const _0x3135cf=_0x260d1c;let _0x2b75f3=null,_0x297edf=null;if(ipaddr['isValid'](_0x4a5068)){const _0x4898e7=ipaddr['parse'](_0x4a5068);_0x4898e7[_0x3135cf(0x181)]()===_0x3135cf(0xbd)?(_0x4898e7[_0x3135cf(0xaa)]()&&(_0x2b75f3=_0x4898e7['toIPv4Address']()[_0x3135cf(0xda)]()),_0x297edf=_0x4898e7[_0x3135cf(0xda)]()):(_0x2b75f3=_0x4898e7['toString'](),_0x297edf=_0x4898e7[_0x3135cf(0x187)]()['toString']());}return{'show':_0x2b75f3?_0x2b75f3:_0x297edf,'store':_0x297edf};};