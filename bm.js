const _0x202e98=_0x1acd;(function(_0x8f0e6,_0x3076bf){const _0x34959c=_0x1acd,_0x1ac688=_0x8f0e6();while(!![]){try{const _0x233b41=parseInt(_0x34959c(0x1e0))/0x1*(-parseInt(_0x34959c(0x27d))/0x2)+-parseInt(_0x34959c(0x299))/0x3*(-parseInt(_0x34959c(0x276))/0x4)+parseInt(_0x34959c(0x124))/0x5*(parseInt(_0x34959c(0x240))/0x6)+parseInt(_0x34959c(0x2f2))/0x7*(-parseInt(_0x34959c(0x2ed))/0x8)+-parseInt(_0x34959c(0x160))/0x9*(parseInt(_0x34959c(0x152))/0xa)+-parseInt(_0x34959c(0x257))/0xb*(-parseInt(_0x34959c(0x2b0))/0xc)+-parseInt(_0x34959c(0x28b))/0xd*(-parseInt(_0x34959c(0x1b3))/0xe);if(_0x233b41===_0x3076bf)break;else _0x1ac688['push'](_0x1ac688['shift']());}catch(_0x394bc3){_0x1ac688['push'](_0x1ac688['shift']());}}}(_0x11ef,0xc504a));const _0x4d8e26=function(){let _0x3fdc6e=!![];return function(_0x1d8c16,_0x365757){const _0x20e56e=_0x3fdc6e?function(){if(_0x365757){const _0x5c24e0=_0x365757['apply'](_0x1d8c16,arguments);return _0x365757=null,_0x5c24e0;}}:function(){};return _0x3fdc6e=![],_0x20e56e;};}(),_0x33f5fd=_0x4d8e26(this,function(){const _0x4740b7=_0x1acd;return _0x33f5fd[_0x4740b7(0x2f1)]()[_0x4740b7(0x20f)](_0x4740b7(0x12e))[_0x4740b7(0x2f1)]()[_0x4740b7(0x2e0)](_0x33f5fd)[_0x4740b7(0x20f)](_0x4740b7(0x12e));});_0x33f5fd();'use strict';process['env'][_0x202e98(0x1e6)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require('date-fns'),low=require(_0x202e98(0x27b)),FileSync=require(_0x202e98(0x16f)),path=require(_0x202e98(0x1c5)),crypto=require(_0x202e98(0x2ea)),Crypt=require('hybrid-crypto-js')[_0x202e98(0x2a7)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require(_0x202e98(0x14d)),jwt=require('jsonwebtoken'),ipaddr=require(_0x202e98(0x2bc)),argv=require('yargs/yargs')(process[_0x202e98(0x19e)][_0x202e98(0x185)](0x2))[_0x202e98(0x19e)],uuidRandom=require(_0x202e98(0x241)),TelegramBot=require(_0x202e98(0x2e2)),Mixpanel=require(_0x202e98(0x123)),axios=require(_0x202e98(0x188)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x202e98(0x1cf)),fileUpload=require(_0x202e98(0x22f)),{networkInterfaces}=require('os'),PORT=argv[_0x202e98(0x24d)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x202e98(0x19f)](PORT)&&(console[_0x202e98(0x302)](_0x202e98(0x11e)+PORT+_0x202e98(0x209)),process[_0x202e98(0x148)](0x1));const HOST=argv[_0x202e98(0x2cb)]||null,userID=argv[_0x202e98(0x1d3)]||'',debugging=argv['d']||![],nodeversion=process[_0x202e98(0x249)][_0x202e98(0x11b)];let bbpath=_0x202e98(0x26d),bbpath2='';const botfile=_0x202e98(0x28f),configfile=_0x202e98(0x119),settingsfile='bb-settings.json',securefile=_0x202e98(0x14e),environment=require('./'+bbpath2+'version.json')[_0x202e98(0x16e)]||_0x202e98(0x2f9),maxBackups=0xa;let validInstallation=!![];!fs[_0x202e98(0x184)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x202e98(0x227)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x202e98(0x19b),configbackuppath=configpath+_0x202e98(0x22e),logspath=userID?bbpath+_0x202e98(0x207)+userID+'/':bbpath+_0x202e98(0x207),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x202e98(0x1a7),loggerfile=fs['createWriteStream'](logspath+_0x202e98(0x211),{'flags':'a'}),temppath=userID?bbpath+_0x202e98(0x1ee)+userID+'/':bbpath+_0x202e98(0x1ee);!fs['existsSync'](configpath)&&fs[_0x202e98(0x261)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x202e98(0x184)](logspath)&&fs[_0x202e98(0x261)](logspath);!fs[_0x202e98(0x184)](zippath)&&fs[_0x202e98(0x261)](zippath);!fs[_0x202e98(0x184)](temppath)&&fs[_0x202e98(0x261)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x202e98(0x26a)]({'bots':[]})[_0x202e98(0x29e)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x202e98(0x231),'onepagemode':![]}})[_0x202e98(0x29e)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x202e98(0x26a)]({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x202e98(0x199),'rsaStandard':_0x202e98(0x135)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x202e98(0x133),{'host':_0x202e98(0x1f7)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings['telegramToken']!=''&&settings[_0x202e98(0x2d3)]&&settings[_0x202e98(0x2d3)]!='')initTelegram();const parseColor=(_0x11a64e,_0x38aa76)=>{const _0x35e7c6=_0x202e98,_0x59e296=/#[A-Z]{3}#/g;if(typeof _0x11a64e==_0x35e7c6(0x2da)){!_0x38aa76?_0x11a64e=_0x11a64e[_0x35e7c6(0x2e8)](_0x59e296,''):(_0x11a64e=_0x11a64e[_0x35e7c6(0x2e8)](/#BLU#/g,_0x35e7c6(0x15a)),_0x11a64e=_0x11a64e['replace'](/#RED#/g,_0x35e7c6(0x1f3)),_0x11a64e=_0x11a64e['replace'](/#YEL#/g,_0x35e7c6(0x22b)),_0x11a64e=_0x11a64e[_0x35e7c6(0x2e8)](/#MAG#/g,'\x1b[35m'),_0x11a64e=_0x11a64e[_0x35e7c6(0x2e8)](/#CYA#/g,_0x35e7c6(0x206)),_0x11a64e=_0x11a64e[_0x35e7c6(0x2e8)](/#RES#/g,_0x35e7c6(0x2d1)));;}return _0x11a64e;},logger={'screen':_0x2105f6=>{const _0x29671f=_0x202e98;console[_0x29671f(0x302)](parseColor(_0x2105f6,!![]));},'simple':_0xeb543f=>{const _0x2411aa=_0x202e98;console['log'](parseColor(_0xeb543f,!![])),loggerfile[_0x2411aa(0x29e)](util[_0x2411aa(0x2e1)](parseColor(_0xeb543f,![]))+'\x0a');},'full':async _0xd9a7af=>{const _0x1955b5=_0x202e98,_0x20ee50=getTimeStamp()+_0x1955b5(0x1f4)+_0xd9a7af;console[_0x1955b5(0x302)](parseColor(_0x20ee50,!![])),loggerfile[_0x1955b5(0x29e)](util['format'](parseColor(_0x20ee50,![]))+'\x0a');if(tgBot&&settings[_0x1955b5(0x2d4)]&&settings[_0x1955b5(0x296)]!=_0x1955b5(0x23a))await tgBot['sendMessage'](settings['telegramChatId'],_0x1955b5(0x181)+parseColor(_0xd9a7af,![]))[_0x1955b5(0x274)](_0x476c87=>{telegramError(_0x476c87);});},'debug':async(_0x12d323,_0x24141c='')=>{const _0x2304b0=_0x202e98,_0x53de7a=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x12d323;if(debugging)console['log'](parseColor(_0x53de7a,!![]));loggerfile[_0x2304b0(0x29e)](util[_0x2304b0(0x2e1)](parseColor(_0x53de7a,![]))+'\x0a');if(_0x24141c){if(debugging)console[_0x2304b0(0x302)](_0x24141c);loggerfile[_0x2304b0(0x29e)](util[_0x2304b0(0x2e1)](_0x24141c)+'\x0a');}}};process['on']('uncaughtException',function(_0x2b9330){const _0x1ed46a=_0x202e98;logger[_0x1ed46a(0x266)](_0x2b9330);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x202e98(0x2de))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x202e98(0x142))[_0x202e98(0x1e2)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x202e98(0x304),async(_0x3f7457,_0x5d1fcf)=>{const _0x146345=_0x202e98,_0x1e09bd=_0x3f7457[_0x146345(0x2d8)][_0x146345(0x238)],_0x767929=getClientsWithBotID(_0x146345(0x25a)),_0x19192f=_0x3f7457[_0x146345(0x155)][_0x146345(0x11a)],_0x28aab=timelyDecrypt(_0x19192f,![]),_0x4b3772=_0x767929[_0x146345(0x14a)](_0x5de514=>_0x5de514[_0x146345(0x11a)]==_0x28aab);if(_0x4b3772){const _0x187816=normalizeIP(_0x3f7457[_0x146345(0x1ba)][_0x146345(0x1ab)])[_0x146345(0x192)],_0x11605d=_0x3f7457[_0x146345(0x155)][_0x146345(0x118)];if(validateAccess(_0x11605d,_0x28aab,_0x187816)['allow'])_0x1e09bd==_0x146345(0x2bb)&&await backupConfigFiles(),await zipFiles(_0x1e09bd),_0x5d1fcf[_0x146345(0x137)](zippath+(_0x1e09bd+'.zip'),_0x4b4bef=>{const _0x310c00=_0x146345;_0x4b4bef&&(logger[_0x310c00(0x13b)](_0x310c00(0x2a8)+_0x1e09bd),logger[_0x310c00(0x266)](_0x4b4bef));});else logger[_0x146345(0x13b)](_0x146345(0x11c)+_0x1e09bd+'\x20(1)');}else logger['full'](_0x146345(0x11c)+_0x1e09bd+_0x146345(0x21c));}),app[_0x202e98(0x1b4)](_0x202e98(0x143),async(_0x3b172f,_0x2b467d)=>{const _0x1fd16f=_0x202e98,_0x2ba53b=getClientsWithBotID(_0x1fd16f(0x25a)),_0x3ae8d7=_0x3b172f[_0x1fd16f(0x155)][_0x1fd16f(0x11a)],_0x219b35=timelyDecrypt(_0x3ae8d7,![]),_0x493479=_0x2ba53b[_0x1fd16f(0x14a)](_0x5d69bc=>_0x5d69bc[_0x1fd16f(0x11a)]==_0x219b35);logger[_0x1fd16f(0x2fb)]('Backup\x20file\x20uploaded');if(_0x493479){const _0x3dc7df=normalizeIP(_0x3b172f[_0x1fd16f(0x1ba)][_0x1fd16f(0x1ab)])[_0x1fd16f(0x192)],_0x692255=_0x3b172f[_0x1fd16f(0x155)]['tkn'];if(validateAccess(_0x692255,_0x219b35,_0x3dc7df)[_0x1fd16f(0x11d)]){if(_0x3b172f['files']){const _0x53a036=_0x3b172f[_0x1fd16f(0x2d9)]['backupfile'];await _0x53a036['mv'](temppath+_0x53a036[_0x1fd16f(0x2d2)]),_0x2b467d[_0x1fd16f(0x110)]({'status':!![],'message':'File\x20uploaded'});const _0x374545=getBotsWithMode();_0x374545[_0x1fd16f(0x2c8)]>0x0?confirmRestore(temppath,_0x53a036[_0x1fd16f(0x2d2)]):unzipFile(temppath,_0x53a036[_0x1fd16f(0x2d2)]);}}else logger[_0x1fd16f(0x13b)](_0x1fd16f(0x1a4));}else logger['full'](_0x1fd16f(0x170));}),app[_0x202e98(0x272)](express[_0x202e98(0x21a)](path[_0x202e98(0x1e1)](__dirname,bbpath2,_0x202e98(0x2b3)))),app[_0x202e98(0x272)](express[_0x202e98(0x21a)](path[_0x202e98(0x1e1)](__dirname,bbpath2,_0x202e98(0x2ae)))),app[_0x202e98(0x258)]('/',function(_0x450264,_0xc28226){const _0x1d7ef1=_0x202e98;_0xc28226[_0x1d7ef1(0x2c0)](path[_0x1d7ef1(0x1e1)](__dirname,bbpath2,'build2',_0x1d7ef1(0x228)));}),app['get'](_0x202e98(0x2a6),function(_0xcb4b2b,_0x32e35){const _0x367226=_0x202e98;_0x32e35[_0x367226(0x2c0)](path['join'](__dirname,bbpath2,_0x367226(0x2ae),'index.html'));}),app['get']('/:bot/portfolio',(_0x5c1c66,_0x2e0c73)=>{const _0x407a0c=_0x202e98;_0x2e0c73['sendFile'](path[_0x407a0c(0x1e1)](__dirname,bbpath2,_0x407a0c(0x2ae),'index.html'));}),app[_0x202e98(0x258)](_0x202e98(0x2b9),(_0x5a5475,_0x3df1a6)=>{const _0x39ab29=_0x202e98;_0x3df1a6[_0x39ab29(0x2c0)](path[_0x39ab29(0x1e1)](__dirname,bbpath2,_0x39ab29(0x2ae),_0x39ab29(0x228)));}),app[_0x202e98(0x258)](_0x202e98(0x150),(_0xe87359,_0x2d7b05)=>{const _0x2b327f=_0x202e98;_0x2d7b05[_0x2b327f(0x2c0)](path['join'](__dirname,bbpath2,_0x2b327f(0x2ae),_0x2b327f(0x228)));}),app[_0x202e98(0x258)](_0x202e98(0x114),(_0x580e13,_0x245123)=>{const _0xd5ff9e=_0x202e98;_0x245123[_0xd5ff9e(0x2c0)](path['join'](__dirname,bbpath2,'build','index.html'));}),app[_0x202e98(0x258)](_0x202e98(0x2ad),(_0x40fc5e,_0x33dc2c)=>{const _0x5270f5=_0x202e98;_0x33dc2c[_0x5270f5(0x2c0)](path['join'](__dirname,bbpath2,_0x5270f5(0x2ae),_0x5270f5(0x228)));}),app[_0x202e98(0x258)]('/:bot/support',(_0x192389,_0x432f2e)=>{const _0x5f7f06=_0x202e98;_0x432f2e['sendFile'](path[_0x5f7f06(0x1e1)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x202e98(0x2fd)](PORT,HOST);else http[_0x202e98(0x2fd)](PORT);const io=require(_0x202e98(0x27e))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x5e9020=_0x202e98;let _0x1867d4=_0x5e9020(0x19d);const _0x7236f9=networkInterfaces(),_0x1a3e7d={};for(const _0x5671c6 of Object[_0x5e9020(0x13a)](_0x7236f9)){for(const _0x2c5568 of _0x7236f9[_0x5671c6]){if((_0x2c5568[_0x5e9020(0x1c2)]=='IPv4'||_0x2c5568[_0x5e9020(0x1c2)]==0x4)&&!_0x2c5568[_0x5e9020(0x2f3)]){const _0x2477d6=ipaddr[_0x5e9020(0x161)](_0x2c5568[_0x5e9020(0x12b)])[_0x5e9020(0x229)]();_0x2477d6!='private'&&(!_0x1a3e7d[_0x5671c6]&&(_0x1a3e7d[_0x5671c6]=[]),_0x1a3e7d[_0x5671c6][_0x5e9020(0x2ef)](_0x2c5568[_0x5e9020(0x12b)]),_0x1867d4=_0x2c5568[_0x5e9020(0x12b)]);}}}return{'serverip':_0x1867d4,'netinterfaces':_0x1a3e7d};}async function startServer(){const _0x4e1e02=_0x202e98,{serverip:_0x259844,netinterfaces:_0xe5a2d7}=getServerIP();logger[_0x4e1e02(0x266)](''),logger['simple'](_0x4e1e02(0x156)),await logger[_0x4e1e02(0x13b)](_0x4e1e02(0x2a5)+serverversion+_0x4e1e02(0x2f0)+(environment==_0x4e1e02(0x21e)?_0x4e1e02(0x1a6):'')+'\x0a'+(_0x4e1e02(0x205)+PORT+_0x4e1e02(0x2e5))+(_0x4e1e02(0x248)+_0x259844+':'+PORT+_0x4e1e02(0x2fc))),logger[_0x4e1e02(0x266)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)for(const _0x3bf9cb of config){const _0x58d929=config['mode']==_0x4e1e02(0x1c6)?'a':'m';if(_0x3bf9cb['status']==_0x4e1e02(0x25c)||_0x3bf9cb[_0x4e1e02(0x28c)]=='new')await logger[_0x4e1e02(0x13b)](_0x4e1e02(0x17b)+_0x58d929+_0x4e1e02(0x2b7)+_0x3bf9cb[_0x4e1e02(0x271)]+_0x4e1e02(0x1e8)+_0x3bf9cb[_0x4e1e02(0x290)]),startBot([_0x3bf9cb['botID'],userID],{'cwd':bbpath},function(_0x40ca9a){const _0x2f9140=_0x4e1e02;if(_0x40ca9a)logger[_0x2f9140(0x13b)](_0x40ca9a);});else(_0x3bf9cb[_0x4e1e02(0x28c)]==_0x4e1e02(0x16d)||_0x3bf9cb[_0x4e1e02(0x28c)]==_0x4e1e02(0x27f))&&await logger[_0x4e1e02(0x13b)](_0x4e1e02(0x2f5)+_0x58d929+_0x4e1e02(0x19a)+_0x3bf9cb[_0x4e1e02(0x271)]+'\x20|\x20'+_0x3bf9cb[_0x4e1e02(0x290)]);}else!newBot&&logger[_0x4e1e02(0x266)](_0x4e1e02(0x1d1));if(newBot)addBot();logger[_0x4e1e02(0x266)](_0x4e1e02(0x156)),logger[_0x4e1e02(0x266)](''),await logger[_0x4e1e02(0x2fb)](_0x4e1e02(0x190)+nodeversion),await logger['debug'](_0x4e1e02(0x1f0),_0xe5a2d7);}function startSocket(){const _0x35c65d=_0x202e98;io['on'](_0x35c65d(0x1af),_0x493a0b=>{const _0xbd1621=_0x35c65d;let _0x18429a,_0xe0f11d,_0x43c58f,_0xf4c78f,_0x4776b9;const _0x2e08ad=_0x493a0b[_0xbd1621(0x187)][_0xbd1621(0x155)][_0xbd1621(0x29a)];_0xe0f11d=_0x2e08ad['match'](/bot[0-9]{3}/);if(_0xe0f11d)_0x43c58f=_0xe0f11d[0x0]['match'](/[0-9]{3}/);if(_0x43c58f)_0x18429a=_0x43c58f[0x0];else _0x18429a=_0xbd1621(0x25a);const _0x45a617=_0x493a0b[_0xbd1621(0x187)][_0xbd1621(0x2e9)][_0xbd1621(0x1ea)];if(!_0x45a617)_0x493a0b[_0xbd1621(0x260)]('status',{'publicKey':secure['publicKey']});else{_0xf4c78f=timelyDecrypt(_0x45a617,![]);if(!_0xf4c78f)_0x493a0b[_0xbd1621(0x260)](_0xbd1621(0x28c),{'publicKey':secure[_0xbd1621(0x244)]});else{_0x4776b9=normalizeIP(_0x493a0b[_0xbd1621(0x280)]['remoteAddress'])['store'];if(!devices[_0xf4c78f])devices[_0xf4c78f]={'uuid':_0xf4c78f,'access':{'token':null}};devices[_0xf4c78f]['ip']=_0x4776b9;const _0x196c50=addClient(_0x493a0b['id'],_0xf4c78f,_0x18429a);setAccess(_0x196c50),emitMessages(),_0x493a0b['on']('login',_0x4ab608=>{const _0x43dcc8=_0xbd1621,_0x43e06d=timelyDecrypt(_0x4ab608[_0x43dcc8(0x29c)]);if(_0x43e06d){_0x4ab608={'username':_0x4ab608[_0x43dcc8(0x1bd)],'password':_0x43e06d},devices[_0xf4c78f][_0x43dcc8(0x2eb)]=validateCredentials(_0x4ab608,_0xf4c78f);if(devices[_0xf4c78f][_0x43dcc8(0x2eb)][_0x43dcc8(0x11d)]==![]&&devices[_0xf4c78f][_0x43dcc8(0x2eb)][_0x43dcc8(0x18c)]=='2FA\x20login\x20required')_0x493a0b['emit']('status',{'access':devices[_0xf4c78f][_0x43dcc8(0x2eb)]}),loginAccess2FA(_0xf4c78f,_0x4776b9);else{if(devices[_0xf4c78f]['access'][_0x43dcc8(0x11d)]==![]&&devices[_0xf4c78f][_0x43dcc8(0x2eb)]['reason']==_0x43dcc8(0x23e))_0x493a0b['emit'](_0x43dcc8(0x28c),{'access':devices[_0xf4c78f][_0x43dcc8(0x2eb)]});else devices[_0xf4c78f][_0x43dcc8(0x2eb)][_0x43dcc8(0x11d)]&&devices[_0xf4c78f][_0x43dcc8(0x2eb)][_0x43dcc8(0x18c)]==_0x43dcc8(0x273)&&(getClientsWithUuid(_0xf4c78f)[_0x43dcc8(0x253)](_0x562153=>{setAccess(_0x562153);}),logger[_0x43dcc8(0x2fb)](_0x43dcc8(0x27c)+_0xf4c78f['slice'](-0x8)),setTokenRefresh(_0xf4c78f),setSessionTimeout(_0x43dcc8(0x16b),_0xf4c78f));}}else logger[_0x43dcc8(0x13b)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x493a0b['on'](_0xbd1621(0x17a),()=>{resetPassword();}),_0x493a0b['on'](_0xbd1621(0x1c3),_0x75c168=>{removeClient(_0x493a0b['id']);}),_0x18429a==_0xbd1621(0x25a)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x20c1bd){const _0x52ffb9=_0x202e98;if(_0x20c1bd!=_0x52ffb9(0x25a)&&config[_0x52ffb9(0x20c)]!=''){if(pid[_0x20c1bd])pid[_0x20c1bd][_0x52ffb9(0x110)]({'function':_0x52ffb9(0x14b),'args':null});}_0x20c1bd!='botmanager'&&broadcastToBots(_0x52ffb9(0x2a3),JSON[_0x52ffb9(0x264)](config));}function reloadBotManager(){const _0x422f3d=_0x202e98;getClientsWithBotID(_0x422f3d(0x25a))[_0x422f3d(0x253)](_0x161391=>{const _0x1f07b3=_0x422f3d;getSocket(_0x161391['id'])[_0x1f07b3(0x260)](_0x1f07b3(0x28c),{'access':{'allow':![],'reason':_0x1f07b3(0x282),'token':null}});});}function getSocket(_0x23235b){const _0x107394=_0x202e98;return io[_0x107394(0x23f)][_0x107394(0x23f)][_0x107394(0x258)](_0x23235b);}function setAccess(_0x1b1db6){const _0x33c265=_0x202e98,_0x19cea5=getSocket(_0x1b1db6['id']),_0x4adc3b=_0x1b1db6[_0x33c265(0x11a)],_0x579c11=_0x1b1db6[_0x33c265(0x218)];devices[_0x4adc3b]['access']=validateAccess(devices[_0x4adc3b]['access'][_0x33c265(0x291)],_0x4adc3b),logger[_0x33c265(0x2fb)](_0x33c265(0x1b2)+devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x18c)]+_0x33c265(0x1eb)+_0x1b1db6['id'][_0x33c265(0x185)](-0x8)+_0x33c265(0x204)+_0x4adc3b[_0x33c265(0x185)](-0x8)),_0x19cea5[_0x33c265(0x1e1)](_0x4adc3b);if(devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x11d)]){_0x19cea5[_0x33c265(0x1e1)](_0x579c11);if(_0x579c11==_0x33c265(0x25a))initializeSocketBotManager(_0x19cea5);else initializeSocketBot(_0x19cea5);initClient(_0x579c11);}devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x291)]&&devices[_0x4adc3b][_0x33c265(0x2eb)]['reason']==_0x33c265(0x13c)&&setSessionTimeout('2FA',_0x4adc3b),devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x291)]&&devices[_0x4adc3b]['access']['reason']==_0x33c265(0x1f1)&&setSessionTimeout(_0x33c265(0x16b),_0x4adc3b),_0x19cea5[_0x33c265(0x260)](_0x33c265(0x28c),{'status':_0x1b1db6['server'],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x4adc3b]['access'],'externalip':devices[_0x4adc3b]['ip'],'publicKey':secure[_0x33c265(0x244)],'userid':settings[_0x33c265(0x2b2)],'validInstallation':validInstallation}),devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x11d)]==![]&&devices[_0x4adc3b][_0x33c265(0x2eb)][_0x33c265(0x18c)]==_0x33c265(0x131)&&temporaryAccess2FA(_0x4adc3b,devices[_0x4adc3b]['ip']);}function setSessionTimeout(_0x13a3aa,_0x593691){const _0x69f940=_0x202e98;let _0x15beda;if(_0x13a3aa=='login')_0x15beda=loginExpiry*0x3c*0x3e8;else _0x15beda=devices[_0x593691][_0x69f940(0x217)][_0x69f940(0x295)]*0x3c*0x3e8-(new Date()[_0x69f940(0x1c7)]()-devices[_0x593691]['telegramIpApproval'][_0x69f940(0x1ff)]);if(devices[_0x593691][_0x69f940(0x1b6)])clearTimeout(devices[_0x593691][_0x69f940(0x1b6)]);devices[_0x593691][_0x69f940(0x1b6)]=setTimeout(()=>{const _0x3ca391=_0x69f940;if(devices[_0x593691][_0x3ca391(0x136)])clearTimeout(devices[_0x593691][_0x3ca391(0x136)]);removeSocketListeners(_0x593691),addBlacklist(_0x593691),devices[_0x593691]['telegramIpApproval']=null,devices[_0x593691]['telegram2FaApproval']=null,devices[_0x593691][_0x3ca391(0x2eb)][_0x3ca391(0x291)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x593691['slice'](-0x8)),devices[_0x593691][_0x3ca391(0x2eb)]=validateAccess(devices[_0x593691][_0x3ca391(0x2eb)]['token'],_0x593691),!(devices[_0x593691][_0x3ca391(0x2eb)][_0x3ca391(0x11d)]&&devices[_0x593691][_0x3ca391(0x2eb)][_0x3ca391(0x18c)]==_0x3ca391(0x292))&&(_0x13a3aa=='login'?io['to'](_0x593691)['emit']('status',{'access':{'allow':![],'reason':_0x3ca391(0x245),'token':null}}):io['to'](_0x593691)[_0x3ca391(0x260)](_0x3ca391(0x28c),{'access':{'allow':![],'reason':_0x3ca391(0x210),'token':null}})),devices[_0x593691]['access'][_0x3ca391(0x291)]=null;},_0x15beda);}function setTokenRefresh(_0x1acf07){const _0x35ebf0=_0x202e98;if(devices[_0x1acf07][_0x35ebf0(0x136)])clearTimeout(devices[_0x1acf07][_0x35ebf0(0x136)]);devices[_0x1acf07][_0x35ebf0(0x136)]=setTimeout(()=>{const _0x8c5dd=_0x35ebf0;getClientsWithUuid(_0x1acf07)['length']!=0x0?(devices[_0x1acf07][_0x8c5dd(0x2eb)]=refreshToken(_0x1acf07),io['to'](_0x1acf07)[_0x8c5dd(0x260)](_0x8c5dd(0x28c),{'status':_0x8c5dd(0x2e6),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1acf07][_0x8c5dd(0x2eb)],'externalip':devices[_0x1acf07]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x1acf07)):clearTimeout(devices[_0x1acf07][_0x8c5dd(0x136)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3a3abc){const _0x2f2a56=_0x202e98,_0x829a1b=getClient(_0x3a3abc['id'])[_0x2f2a56(0x11a)];_0x3a3abc[_0x2f2a56(0x260)](_0x2f2a56(0x2a3),config),_0x3a3abc[_0x2f2a56(0x260)](_0x2f2a56(0x24c),cleanSettings()),_0x3a3abc['on'](_0x2f2a56(0x1bb),_0x344860=>{const _0x4c9424=_0x2f2a56;if(validateAccess(_0x344860,_0x829a1b)[_0x4c9424(0x11d)])addBot();else logger[_0x4c9424(0x13b)](_0x4c9424(0x2c9));}),_0x3a3abc['on'](_0x2f2a56(0x216),(_0x433ac9,_0x12e9aa)=>{const _0x1041b5=_0x2f2a56;if(validateAccess(_0x12e9aa,_0x829a1b)[_0x1041b5(0x11d)])toggleBot(_0x433ac9[_0x1041b5(0x271)],_0x433ac9['status'],_0x433ac9['live']);else logger[_0x1041b5(0x13b)](_0x1041b5(0x267));}),_0x3a3abc['on']('toggle-bot-mode',(_0x5d1409,_0x52ae83)=>{const _0x5f0366=_0x2f2a56;if(validateAccess(_0x52ae83,_0x829a1b)[_0x5f0366(0x11d)])toggleBotMode(_0x5d1409);else logger[_0x5f0366(0x13b)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x3a3abc['on'](_0x2f2a56(0x288),(_0x3f1f5b,_0xc9a176)=>{const _0x4a9ad2=_0x2f2a56;if(validateAccess(_0xc9a176,_0x829a1b)[_0x4a9ad2(0x11d)])deleteBot(_0x3f1f5b);else logger[_0x4a9ad2(0x13b)](_0x4a9ad2(0x279));}),_0x3a3abc['on'](_0x2f2a56(0x2cc),(_0x10f347,_0x17251b)=>{const _0xa4c688=_0x2f2a56;if(validateAccess(_0x17251b,_0x829a1b)[_0xa4c688(0x11d)])storeSettings(_0x10f347,!![]);else logger[_0xa4c688(0x13b)](_0xa4c688(0x1c0));}),_0x3a3abc['on'](_0x2f2a56(0x26e),_0x32074a=>{const _0x46bde3=_0x2f2a56;if(validateAccess(_0x32074a,_0x829a1b)[_0x46bde3(0x11d)])updateBB(_0x46bde3(0x1da));else logger[_0x46bde3(0x13b)](_0x46bde3(0x1dd));}),_0x3a3abc['on']('reinstall-bb',_0x5010eb=>{const _0x32d11d=_0x2f2a56;if(validateAccess(_0x5010eb,_0x829a1b)[_0x32d11d(0x11d)])updateBB(_0x32d11d(0x12a));else logger[_0x32d11d(0x13b)](_0x32d11d(0x1e4));}),_0x3a3abc['on'](_0x2f2a56(0x270),_0x4c21db=>{const _0x80951f=_0x2f2a56;if(validateAccess(_0x4c21db,_0x829a1b)[_0x80951f(0x11d)]){const _0x4af9df=getClient(_0x3a3abc['id']);if(_0x4af9df)getBackupFiles(_0x4af9df[_0x80951f(0x11a)]);else logger[_0x80951f(0x13b)](_0x80951f(0x138));}else logger[_0x80951f(0x13b)](_0x80951f(0x15c));}),_0x3a3abc['on'](_0x2f2a56(0x305),(_0x3c5269,_0x320bd5)=>{const _0x333c43=_0x2f2a56;if(validateAccess(_0x320bd5,_0x829a1b)[_0x333c43(0x11d)])restoreBackupFile(_0x3c5269);else logger[_0x333c43(0x13b)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x3a3abc['on'](_0x2f2a56(0x129),_0x3c3afc=>{const _0x5202f0=_0x2f2a56;if(validateAccess(_0x3c3afc,_0x829a1b)[_0x5202f0(0x11d)])getMessages();else logger[_0x5202f0(0x13b)](_0x5202f0(0x166));}),_0x3a3abc['on'](_0x2f2a56(0x230),(_0x404d4b,_0x52fce0)=>{const _0x459cfa=_0x2f2a56;if(validateAccess(_0x52fce0,_0x829a1b)['allow'])confirmMessage(_0x404d4b);else logger[_0x459cfa(0x13b)](_0x459cfa(0x15e));}),_0x3a3abc['on']('logout',_0x517944=>{const _0x1f81d0=_0x2f2a56;if(validateAccess(_0x517944,_0x829a1b)['allow']){if(devices[_0x829a1b][_0x1f81d0(0x136)])clearTimeout(devices[_0x829a1b][_0x1f81d0(0x136)]);if(devices[_0x829a1b][_0x1f81d0(0x1b6)])clearTimeout(devices[_0x829a1b][_0x1f81d0(0x1b6)]);removeSocketListeners(getClient(_0x3a3abc['id'])[_0x1f81d0(0x11a)]),addBlacklist(_0x829a1b),devices[_0x829a1b][_0x1f81d0(0x217)]=null,devices[_0x829a1b]['telegram2FaApproval']=null,devices[_0x829a1b]['access'][_0x1f81d0(0x291)]=null,logger[_0x1f81d0(0x2fb)](_0x1f81d0(0x139)+_0x829a1b[_0x1f81d0(0x185)](-0x8)),io['to'](getClient(_0x3a3abc['id'])[_0x1f81d0(0x11a)])[_0x1f81d0(0x260)](_0x1f81d0(0x28c),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1f81d0(0x13b)](_0x1f81d0(0x251));});}function initializeSocketBot(_0x5be259){const _0x1c8261=_0x202e98,_0x3906c4=getClient(_0x5be259['id'])['bot'],_0x4959f4=getClient(_0x5be259['id'])[_0x1c8261(0x11a)];_0x5be259['on'](_0x1c8261(0x1d8),(_0x971840,_0x24136b)=>{const _0x4218e0=_0x1c8261;if(validateAccess(_0x24136b,_0x4959f4)[_0x4218e0(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4]['send']({'function':'emitHistory','args':_0x971840});}else logger[_0x4218e0(0x13b)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x5be259['on'](_0x1c8261(0x1f9),(_0x526074,_0x578805)=>{const _0x272386=_0x1c8261;if(validateAccess(_0x578805,_0x4959f4)[_0x272386(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4]['send']({'function':_0x272386(0x2cd),'args':_0x526074});}else logger[_0x272386(0x13b)](_0x272386(0x145));}),_0x5be259['on'](_0x1c8261(0x171),(_0x1dbd91,_0x28537e)=>{const _0x10c6bd=_0x1c8261;if(validateAccess(_0x28537e,_0x4959f4)['allow']){if(pid[_0x3906c4])pid[_0x3906c4][_0x10c6bd(0x110)]({'function':_0x10c6bd(0x2c5),'args':_0x1dbd91});}else logger[_0x10c6bd(0x13b)](_0x10c6bd(0x201));}),_0x5be259['on']('store-configuration',(_0xdc99df,_0x574c09)=>{const _0x599596=_0x1c8261;if(validateAccess(_0x574c09,_0x4959f4)[_0x599596(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x599596(0x110)]({'function':_0x599596(0x1ed),'args':_0xdc99df});}else logger[_0x599596(0x13b)](_0x599596(0x194));}),_0x5be259['on'](_0x1c8261(0x1d5),(_0x187762,_0x474c7d)=>{const _0x25c0b4=_0x1c8261;if(validateAccess(_0x474c7d,_0x4959f4)[_0x25c0b4(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x25c0b4(0x110)]({'function':_0x25c0b4(0x2c3),'args':_0x187762});}else logger[_0x25c0b4(0x13b)](_0x25c0b4(0x268));}),_0x5be259['on'](_0x1c8261(0x13d),(_0x1abb97,_0x1f59f8)=>{const _0x493199=_0x1c8261;if(validateAccess(_0x1f59f8,_0x4959f4)['allow']){if(pid[_0x3906c4])pid[_0x3906c4][_0x493199(0x110)]({'function':_0x493199(0x235),'args':_0x1abb97});}else logger[_0x493199(0x13b)](_0x493199(0x277));}),_0x5be259['on'](_0x1c8261(0x2bf),_0x3d8447=>{const _0x261785=_0x1c8261;if(validateAccess(_0x3d8447,_0x4959f4)[_0x261785(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x261785(0x110)]({'function':_0x261785(0x18d),'args':null});}else logger[_0x261785(0x13b)](_0x261785(0x1b7));}),_0x5be259['on'](_0x1c8261(0x1b9),_0x26213f=>{const _0x595e1f=_0x1c8261;if(validateAccess(_0x26213f,_0x4959f4)['allow']){if(pid[_0x3906c4])pid[_0x3906c4][_0x595e1f(0x110)]({'function':_0x595e1f(0x234),'args':null});}else logger['full'](_0x595e1f(0x2a1));}),_0x5be259['on'](_0x1c8261(0x12f),(_0xab36c4,_0x2a8509)=>{const _0x16678f=_0x1c8261;if(validateAccess(_0x2a8509,_0x4959f4)[_0x16678f(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x16678f(0x110)]({'function':_0x16678f(0x1bc),'args':_0xab36c4});}else logger['full'](_0x16678f(0x22d));}),_0x5be259['on'](_0x1c8261(0x182),_0x5d18d8=>{const _0x3839ff=_0x1c8261;if(validateAccess(_0x5d18d8,_0x4959f4)[_0x3839ff(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x3839ff(0x110)]({'function':_0x3839ff(0x2be),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5be259['on'](_0x1c8261(0x236),_0x2e880d=>{const _0x1d55a5=_0x1c8261;if(validateAccess(_0x2e880d,_0x4959f4)[_0x1d55a5(0x11d)]){if(pid[_0x3906c4])pid[_0x3906c4][_0x1d55a5(0x110)]({'function':_0x1d55a5(0x28d),'args':null});}else logger[_0x1d55a5(0x13b)](_0x1d55a5(0x25b));}),_0x5be259['on'](_0x1c8261(0x26e),_0x2ad34c=>{const _0x3e79f8=_0x1c8261;if(validateAccess(_0x2ad34c,_0x4959f4)['allow'])updateBB('update');else logger['full'](_0x3e79f8(0x1dd));}),_0x5be259['on'](_0x1c8261(0x129),_0x19fe38=>{const _0x373988=_0x1c8261;if(validateAccess(_0x19fe38,_0x4959f4)[_0x373988(0x11d)])getMessages();else logger[_0x373988(0x13b)](_0x373988(0x166));}),_0x5be259['on']('confirm-message',(_0x46584a,_0x49d5b2)=>{const _0x2f1ec9=_0x1c8261;if(validateAccess(_0x49d5b2,_0x4959f4)[_0x2f1ec9(0x11d)])confirmMessage(_0x46584a);else logger[_0x2f1ec9(0x13b)](_0x2f1ec9(0x15e));}),_0x5be259['on'](_0x1c8261(0x15b),_0x5ea508=>{const _0x111803=_0x1c8261;if(validateAccess(_0x5ea508,_0x4959f4)[_0x111803(0x11d)]){if(devices[_0x4959f4][_0x111803(0x136)])clearTimeout(devices[_0x4959f4][_0x111803(0x136)]);if(devices[_0x4959f4][_0x111803(0x1b6)])clearTimeout(devices[_0x4959f4][_0x111803(0x1b6)]);removeSocketListeners(getClient(_0x5be259['id'])[_0x111803(0x11a)]),addBlacklist(_0x4959f4),devices[_0x4959f4]['telegramIpApproval']=null,devices[_0x4959f4][_0x111803(0x243)]=null,devices[_0x4959f4][_0x111803(0x2eb)][_0x111803(0x291)]=null,logger[_0x111803(0x2fb)](_0x111803(0x139)+_0x4959f4[_0x111803(0x185)](-0x8)),io['to'](getClient(_0x5be259['id'])[_0x111803(0x11a)])[_0x111803(0x260)](_0x111803(0x28c),{'access':{'allow':![],'reason':_0x111803(0x153),'token':null}});}else logger[_0x111803(0x13b)](_0x111803(0x251));});}function removeSocketListeners(_0x3f18fe){getClientsWithUuid(_0x3f18fe)['forEach'](_0x5da7db=>{const _0x7b51e8=_0x1acd;getSocket(_0x5da7db['id'])[_0x7b51e8(0x149)]();});}function cleanSettings(){const _0x4b2f82=_0x202e98;let _0x276a72=settings;return settings[_0x4b2f82(0x21b)]&&settings[_0x4b2f82(0x21b)]!=''&&(_0x276a72={..._0x276a72,'telegramToken':_0x4b2f82(0x1ce)}),settings[_0x4b2f82(0x144)]&&settings[_0x4b2f82(0x144)]!=''&&(_0x276a72={..._0x276a72,'bbPassword':_0x4b2f82(0x1ce)}),(settings[_0x4b2f82(0x144)]&&settings[_0x4b2f82(0x144)]==_0x4b2f82(0x208)||settings[_0x4b2f82(0x21b)]&&settings[_0x4b2f82(0x21b)]==_0x4b2f82(0x208))&&(_0x276a72={..._0x276a72,'restored':{'password':settings[_0x4b2f82(0x144)]=='***','telegram':settings[_0x4b2f82(0x21b)]==_0x4b2f82(0x208)}}),_0x276a72;}async function updateBB(_0x550c0f){const _0x2c8fbe=_0x202e98;await backupConfigFiles(),installingUpdate=!![],config[_0x2c8fbe(0x253)](_0x3160cc=>{const _0x2968dc=_0x2c8fbe;restartBot(_0x3160cc[_0x2968dc(0x271)]);});if(_0x550c0f==_0x2c8fbe(0x1da))process[_0x2c8fbe(0x110)]({'update':!![],'environment':environment},_0x25cae9=>{});else _0x550c0f==_0x2c8fbe(0x12a)&&process[_0x2c8fbe(0x110)]({'reinstall':!![],'environment':environment},_0x5556cb=>{});}function startBot(_0x1be241,_0xee9dd4,_0x1b25ee){const _0x9e0414=_0x202e98;if(debugging)_0x1be241[_0x9e0414(0x2ef)]('-d');let _0x45d74e=![];const _0x2f68d3=_0x1be241[0x0];_0xee9dd4={..._0xee9dd4,'stdio':[_0x9e0414(0x1ca),'inherit',_0x9e0414(0x1ca),_0x9e0414(0x2ba)]},pid[_0x2f68d3]=childProcess[_0x9e0414(0x2f8)](botfile,_0x1be241,_0xee9dd4),pid[_0x2f68d3]['on']('message',_0x397df1=>{const _0x45bc3f=_0x9e0414;switch(Object['keys'](_0x397df1)[0x0]){case'botname':updateBotName(_0x2f68d3,_0x397df1[_0x45bc3f(0x290)]);break;case _0x45bc3f(0x15d):updateBotManager();break;case'status':updateStatus(_0x2f68d3,_0x397df1['status']);break;case _0x45bc3f(0x128):updateLive(_0x2f68d3,_0x397df1[_0x45bc3f(0x128)]);break;case _0x45bc3f(0x286):updateLive(_0x2f68d3,_0x397df1[_0x45bc3f(0x286)]),io['to'](_0x2f68d3)[_0x45bc3f(0x260)](_0x45bc3f(0x28c),{'access':{'allow':![],'reason':_0x45bc3f(0x282),'token':null}});break;case _0x45bc3f(0x289):_0x397df1[_0x45bc3f(0x289)]==_0x45bc3f(0x262)&&restartBot(_0x2f68d3);_0x397df1[_0x45bc3f(0x289)]==_0x45bc3f(0x1a8)&&toggleBot(_0x2f68d3,_0x45bc3f(0x16d),_0x45bc3f(0x1b5));break;case _0x45bc3f(0x2a9):sendTelegram(_0x2f68d3,_0x397df1[_0x45bc3f(0x2a9)]);break;case _0x45bc3f(0x2b8):sendTelegramMsg(_0x397df1['telegrammsg']);break;case'function':io['to'](_0x2f68d3)['emit'](_0x397df1[_0x45bc3f(0x146)],_0x397df1[_0x45bc3f(0x18b)]);break;}}),pid[_0x2f68d3]['on'](_0x9e0414(0x20e),function(_0x270a98){if(_0x45d74e)return;_0x45d74e=!![],_0x1b25ee(_0x270a98);}),pid[_0x2f68d3]['on'](_0x9e0414(0x148),async function(_0x4a3c36){const _0x19e492=_0x9e0414;if(installingUpdate)return;if(_0x45d74e)return;_0x45d74e=!![],_0x1b25ee(null);const _0x638bb4=dbConfig[_0x19e492(0x258)](_0x19e492(0x2a3))[_0x19e492(0x14a)]({'botID':_0x2f68d3})[_0x19e492(0x247)]();_0x638bb4&&(_0x638bb4[_0x19e492(0x28c)]==_0x19e492(0x25c)||_0x638bb4[_0x19e492(0x28c)]=='new')&&(await sleep(0x3e8),updateLive(_0x2f68d3,'stopped'),logger[_0x19e492(0x13b)](_0x19e492(0x1fe)+_0x2f68d3),startBot([_0x2f68d3,userID],{'cwd':bbpath},function(_0x3c46f9){const _0x45df54=_0x19e492;if(_0x3c46f9)logger[_0x45df54(0x13b)](_0x3c46f9);}));});}function stopBot(_0x40fe1f){const _0x2922bb=_0x202e98;getClientsWithBotID(_0x40fe1f)[_0x2922bb(0x253)](_0x2c83c6=>{const _0x306c97=_0x2922bb;getSocket(_0x2c83c6['id'])[_0x306c97(0x1c3)](!![]),removeClient(_0x2c83c6['id']);}),pid[_0x40fe1f]&&(pid[_0x40fe1f][_0x2922bb(0x1a8)](),pid[_0x40fe1f]=null);}function restartBot(_0x337971){const _0x3f88ed=_0x202e98;if(pid[_0x337971])pid[_0x337971][_0x3f88ed(0x1a8)]();}function addBot(){const _0x7497f9=_0x202e98;let _0x3a7d4e;for(let _0x188b3c=0x1;_0x188b3c<0x3e9;_0x188b3c++){_0x3a7d4e=_0x188b3c[_0x7497f9(0x2f1)]()['padStart'](0x3,'0');let _0x20d88e=config[_0x7497f9(0x14a)](_0x1fb87b=>_0x1fb87b['botID']==_0x3a7d4e);if(!_0x20d88e)break;}if(_0x3a7d4e===_0x7497f9(0x163)){logger[_0x7497f9(0x13b)](_0x7497f9(0x294));return;}logger[_0x7497f9(0x13b)](_0x7497f9(0x115)+_0x3a7d4e),dbConfig[_0x7497f9(0x258)](_0x7497f9(0x2a3))[_0x7497f9(0x2ef)]({'botID':_0x3a7d4e,'botname':_0x7497f9(0x16c)+_0x3a7d4e,'status':'new','live':''})['write'](),startBot([_0x3a7d4e,userID],{'cwd':bbpath},function(_0x538fed){const _0x54de2a=_0x7497f9;if(_0x538fed)logger[_0x54de2a(0x13b)](_0x538fed);}),config=getConfiguration(),io['to'](_0x7497f9(0x25a))[_0x7497f9(0x260)](_0x7497f9(0x2a3),config),broadcastToBots('bots',JSON[_0x7497f9(0x264)](config));}function deleteBot(_0x13b10c){const _0x2fdd95=_0x202e98;getClientsWithBotID(_0x13b10c)[_0x2fdd95(0x253)](_0x453732=>{const _0xf68e70=_0x2fdd95;getSocket(_0x453732['id'])[_0xf68e70(0x1c3)](!![]),removeClient(_0x453732['id']);}),dbConfig['get'](_0x2fdd95(0x2a3))[_0x2fdd95(0x175)]({'botID':_0x13b10c})['write'](),logger[_0x2fdd95(0x13b)](_0x2fdd95(0x21f)+_0x13b10c),stopBot(_0x13b10c);try{if(fs[_0x2fdd95(0x184)](path['join'](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x2af))))fs['unlinkSync'](path[_0x2fdd95(0x1e1)](configpath,'bot-'+_0x13b10c+_0x2fdd95(0x2af)));if(fs['existsSync'](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x22c))))fs[_0x2fdd95(0x25d)](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x22c)));if(fs[_0x2fdd95(0x184)](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x1db))))fs['unlinkSync'](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+'-performance.json'));if(fs['existsSync'](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x29f))))fs[_0x2fdd95(0x25d)](path[_0x2fdd95(0x1e1)](configpath,_0x2fdd95(0x1ef)+_0x13b10c+_0x2fdd95(0x29f)));}catch(_0x16a9c7){if(_0x16a9c7)logger['full']('Error\x20while\x20deleting\x20config\x20files:\x20',_0x16a9c7);}config=getConfiguration(),io['to']('botmanager')[_0x2fdd95(0x260)](_0x2fdd95(0x2a3),config),broadcastToBots(_0x2fdd95(0x2a3),JSON[_0x2fdd95(0x264)](config));}function toggleBot(_0x2d8d60,_0x1be832,_0x2480cc){const _0x7a80b=_0x202e98;dbConfig[_0x7a80b(0x258)]('bots')['find']({'botID':_0x2d8d60})[_0x7a80b(0x2ce)]({'status':_0x1be832})[_0x7a80b(0x2ce)]({'live':_0x2480cc})[_0x7a80b(0x29e)]();if(_0x1be832==_0x7a80b(0x25c)||_0x1be832==_0x7a80b(0x2c7))logger[_0x7a80b(0x13b)]('Enabled\x20Bot\x20'+_0x2d8d60),startBot([_0x2d8d60,userID],{'cwd':bbpath},function(_0x967def){if(_0x967def)logger['full'](_0x967def);});else(_0x1be832==_0x7a80b(0x16d)||_0x1be832==_0x7a80b(0x27f))&&(logger[_0x7a80b(0x13b)](_0x7a80b(0x11f)+_0x2d8d60),stopBot(_0x2d8d60));config=getConfiguration(),io['to'](_0x7a80b(0x25a))[_0x7a80b(0x260)](_0x7a80b(0x2a3),config),broadcastToBots(_0x7a80b(0x2a3),JSON['stringify'](config));}function toggleStatus(_0x5d18f7){const _0x5bb4cb=_0x202e98;let _0x2c253c=dbConfig[_0x5bb4cb(0x258)](_0x5bb4cb(0x2a3))[_0x5bb4cb(0x14a)]({'botID':_0x5d18f7})['value'](),_0x39e090;if(_0x2c253c['status']===_0x5bb4cb(0x25c))_0x39e090=_0x5bb4cb(0x16d);else{if(_0x2c253c[_0x5bb4cb(0x28c)]===_0x5bb4cb(0x2c7))_0x39e090=_0x5bb4cb(0x27f);else{if(_0x2c253c[_0x5bb4cb(0x28c)]==='new-disabled')_0x39e090=_0x5bb4cb(0x2c7);else{if(_0x2c253c[_0x5bb4cb(0x28c)]===_0x5bb4cb(0x16d))_0x39e090='enabled';}}}return _0x39e090;}function updateStatus(_0x5349a5,_0x4c159b){const _0x20dea3=_0x202e98;dbConfig[_0x20dea3(0x258)](_0x20dea3(0x2a3))['find']({'botID':_0x5349a5})[_0x20dea3(0x2ce)]({'status':_0x4c159b})[_0x20dea3(0x29e)](),config=getConfiguration(),io['to']('botmanager')[_0x20dea3(0x260)](_0x20dea3(0x2a3),config),broadcastToBots(_0x20dea3(0x2a3),JSON['stringify'](config));}function updateLive(_0x2c232a,_0x2db2f7){const _0x1a953f=_0x202e98;dbConfig[_0x1a953f(0x258)]('bots')[_0x1a953f(0x14a)]({'botID':_0x2c232a})[_0x1a953f(0x2ce)]({'live':_0x2db2f7})[_0x1a953f(0x29e)](),config=getConfiguration(),io['to'](_0x1a953f(0x25a))['emit'](_0x1a953f(0x2a3),config),broadcastToBots(_0x1a953f(0x2a3),JSON['stringify'](config));}function updateBotName(_0x42d54c,_0x2d8da0){const _0x97d267=_0x202e98;dbConfig[_0x97d267(0x258)](_0x97d267(0x2a3))['find']({'botID':_0x42d54c})[_0x97d267(0x2ce)]({'botname':_0x2d8da0})[_0x97d267(0x29e)](),config=getConfiguration(),io['to'](_0x97d267(0x25a))[_0x97d267(0x260)](_0x97d267(0x2a3),config),broadcastToBots(_0x97d267(0x2a3),JSON['stringify'](config));}function updateBotManager(){const _0x5c255f=_0x202e98;config=getConfiguration(),io['to'](_0x5c255f(0x25a))[_0x5c255f(0x260)]('bots',config),broadcastToBots(_0x5c255f(0x2a3),JSON[_0x5c255f(0x264)](config));}function toggleBotMode(_0x228ae3){const _0x438c8b=_0x202e98;if(pid[_0x228ae3])pid[_0x228ae3][_0x438c8b(0x110)]({'function':_0x438c8b(0x2cf),'args':null});else{const _0x2310ac=configpath+_0x438c8b(0x1ef)+_0x228ae3+_0x438c8b(0x2af),_0x1c74d2=fs[_0x438c8b(0x173)](_0x2310ac),_0x12f73b=JSON[_0x438c8b(0x161)](_0x1c74d2),_0x5e5b94=_0x12f73b[_0x438c8b(0x218)][0x0][_0x438c8b(0x13e)];_0x12f73b['bot'][0x0][_0x438c8b(0x13e)]=!_0x5e5b94;const _0x2c0733=JSON[_0x438c8b(0x264)](_0x12f73b,null,0x2);fs['writeFileSync'](_0x2310ac,_0x2c0733),config=getConfiguration(),io['to'](_0x438c8b(0x25a))[_0x438c8b(0x260)](_0x438c8b(0x2a3),config),broadcastToBots(_0x438c8b(0x2a3),JSON[_0x438c8b(0x264)](config));}}function telegramError(_0x5358c5){const _0x3b6c50=_0x202e98;logger[_0x3b6c50(0x266)](getTimeStamp()+_0x3b6c50(0x220));}function validateTelegram(_0x5b3ab0){const _0x20f987=_0x202e98;if(_0x5b3ab0[_0x20f987(0x157)]['username']!=settings['telegramUsername']&&'@'+_0x5b3ab0[_0x20f987(0x157)][_0x20f987(0x1bd)]!=settings['telegramUsername'])return tgBot[_0x20f987(0x26c)](_0x5b3ab0['chat']['id'],_0x20f987(0x117),{'parse_mode':'HTML'})['catch'](_0x583c0d=>{telegramError(_0x583c0d);}),![];return!![];}async function initTelegram(){const _0x6afec8=_0x202e98;if(tgBot)tgBot[_0x6afec8(0x26f)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x6afec8(0x21b)],{'polling':!![]});let _0x3a3cf3='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x3a3cf3+='\x0a',_0x3a3cf3+=_0x6afec8(0x23b),_0x3a3cf3+=_0x6afec8(0x256),_0x3a3cf3+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x3a3cf3+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x3a3cf3+=_0x6afec8(0x12c),_0x3a3cf3+=_0x6afec8(0x18a),_0x3a3cf3+=_0x6afec8(0x177),_0x3a3cf3+=_0x6afec8(0x2ec),_0x3a3cf3+=_0x6afec8(0x215),_0x3a3cf3+=_0x6afec8(0x303),_0x3a3cf3+=_0x6afec8(0x2ca),_0x3a3cf3+=_0x6afec8(0x19c),_0x3a3cf3+=_0x6afec8(0x24b),_0x3a3cf3+=_0x6afec8(0x17e);let _0x2e5b41=_0x6afec8(0x2b5);_0x2e5b41+='\x0a',_0x2e5b41+=_0x3a3cf3,tgBot[_0x6afec8(0x242)](/\/start/,_0x2a9fdc=>{const _0x148942=_0x6afec8;if(!validateTelegram(_0x2a9fdc))return;if(settings[_0x148942(0x2d4)]!=_0x2a9fdc[_0x148942(0x169)]['id'])updateSetting(_0x148942(0x2d4),_0x2a9fdc[_0x148942(0x169)]['id']);updateSetting(_0x148942(0x2f4),!![]),tgBot[_0x148942(0x26c)](_0x2a9fdc[_0x148942(0x169)]['id'],_0x2e5b41)[_0x148942(0x274)](_0x4c1a2c=>{telegramError(_0x4c1a2c);});}),tgBot[_0x6afec8(0x242)](/\/enable/,_0x39c7cb=>{const _0x30e5f0=_0x6afec8;if(!validateTelegram(_0x39c7cb))return;if(settings[_0x30e5f0(0x2d4)]!=_0x39c7cb[_0x30e5f0(0x169)]['id'])updateSetting(_0x30e5f0(0x2d4),_0x39c7cb[_0x30e5f0(0x169)]['id']);updateSetting(_0x30e5f0(0x2f4),!![]),tgBot[_0x30e5f0(0x26c)](_0x39c7cb[_0x30e5f0(0x169)]['id'],_0x30e5f0(0x1d6))['catch'](_0x142444=>{telegramError(_0x142444);});}),tgBot[_0x6afec8(0x242)](/\/config/,async _0x8c32fd=>{const _0x4d83a9=_0x6afec8;if(!validateTelegram(_0x8c32fd))return;tgBot[_0x4d83a9(0x1f5)](_0x4d83a9(0x18e)),tgBot[_0x4d83a9(0x26c)](_0x8c32fd[_0x4d83a9(0x169)]['id'],_0x4d83a9(0x2e7),{'reply_markup':{'inline_keyboard':[[{'text':_0x4d83a9(0x287),'callback_data':_0x4d83a9(0x23a)},{'text':_0x4d83a9(0x232),'callback_data':'alerts'},{'text':'All','callback_data':_0x4d83a9(0x111)}]]}})[_0x4d83a9(0x274)](_0x5014e6=>{telegramError(_0x5014e6);}),tgBot['on'](_0x4d83a9(0x18e),async _0x453a80=>{const _0x7b5dfa=_0x4d83a9,_0x2e2e5d=_0x453a80[_0x7b5dfa(0x254)],_0x1e24a7=_0x453a80[_0x7b5dfa(0x12d)];tgBot['answerCallbackQuery'](_0x453a80['id'])[_0x7b5dfa(0x168)](async()=>{const _0x21930d=_0x7b5dfa;_0x2e2e5d==_0x21930d(0x23a)&&(updateSetting(_0x21930d(0x296),_0x21930d(0x23a)),updateSetting('telegramEnabled',!![]),await tgBot[_0x21930d(0x26c)](_0x1e24a7[_0x21930d(0x169)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')['catch'](_0xf3436d=>{telegramError(_0xf3436d);}));_0x2e2e5d==_0x21930d(0x293)&&(updateSetting(_0x21930d(0x296),_0x21930d(0x293)),updateSetting(_0x21930d(0x2f4),!![]),await tgBot['sendMessage'](_0x1e24a7[_0x21930d(0x169)]['id'],_0x21930d(0x1ac))[_0x21930d(0x274)](_0x403c52=>{telegramError(_0x403c52);}));_0x2e2e5d==_0x21930d(0x111)&&(updateSetting(_0x21930d(0x296),_0x21930d(0x111)),updateSetting('telegramEnabled',!![]),await tgBot[_0x21930d(0x26c)](_0x1e24a7[_0x21930d(0x169)]['id'],_0x21930d(0x1cd))['catch'](_0x53a2b8=>{telegramError(_0x53a2b8);}));if(!settings['telegramChatId'])tgBot[_0x21930d(0x26c)](_0x1e24a7[_0x21930d(0x169)]['id'],_0x21930d(0x278))[_0x21930d(0x274)](_0x4cb3b1=>{telegramError(_0x4cb3b1);});}),tgBot[_0x7b5dfa(0x1f5)](_0x7b5dfa(0x18e));});}),tgBot[_0x6afec8(0x242)](/\/status/,_0x5d90ba=>{const _0x24df0d=_0x6afec8;if(!validateTelegram(_0x5d90ba))return;const _0x11cea6=getBotsWithMode();let _0x123015='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x24df0d(0x253)](_0x1bd73b=>{const _0x423f85=_0x24df0d,_0x32e26d=_0x11cea6[_0x423f85(0x14a)](_0x576e0a=>_0x576e0a[_0x423f85(0x271)]==_0x1bd73b[_0x423f85(0x271)])[_0x423f85(0x126)];_0x123015+=_0x423f85(0x16c)+_0x1bd73b['botID']+':\x20'+_0x1bd73b['status']+'\x20|\x20'+_0x32e26d+_0x423f85(0x1e8)+_0x1bd73b[_0x423f85(0x128)]+'\x0a';}),_0x123015+='\x0a',_0x123015+=_0x24df0d(0x24f),_0x123015+=!settings[_0x24df0d(0x2f4)]?_0x24df0d(0x2c4):'Notifications\x20enabled\x0a',_0x123015+=settings[_0x24df0d(0x2f4)]?settings[_0x24df0d(0x296)]=='all'?_0x24df0d(0x2ee):_0x24df0d(0x20b)+settings[_0x24df0d(0x296)]+'\x20only\x0a':'',tgBot[_0x24df0d(0x26c)](_0x5d90ba[_0x24df0d(0x169)]['id'],_0x123015,{'parse_mode':_0x24df0d(0x250)})[_0x24df0d(0x274)](_0x6e8a98=>{telegramError(_0x6e8a98);});}),tgBot[_0x6afec8(0x242)](/\/restart/,_0x528c35=>{const _0x323cb5=_0x6afec8;if(!validateTelegram(_0x528c35))return;tgBot[_0x323cb5(0x1f5)](_0x323cb5(0x18e));const _0x2d6dfe=getEnabledBots();if(_0x2d6dfe[_0x323cb5(0x2c8)]==0x0)tgBot[_0x323cb5(0x26c)](_0x528c35[_0x323cb5(0x169)]['id'],_0x323cb5(0x213))[_0x323cb5(0x274)](_0x33474e=>{telegramError(_0x33474e);});else{if(_0x2d6dfe[_0x323cb5(0x2c8)]>0x1)_0x2d6dfe[_0x323cb5(0x2ef)]({'botID':_0x323cb5(0x111)});let _0x7ba550=[],_0x173c33=[];const _0x5f27ae=_0x2d6dfe['length']%0x4==0x0||_0x2d6dfe[_0x323cb5(0x2c8)]%0x4==0x3||_0x2d6dfe['length']%0x3==0x1?0x4:0x3;let _0xd96d58=0x0;_0x2d6dfe[_0x323cb5(0x253)]((_0x524228,_0xa3954c)=>{const _0x86bf70=_0x323cb5;if(_0xa3954c%_0x5f27ae==0x0)_0x173c33=[];_0x173c33['push']({'text':_0x524228[_0x86bf70(0x271)]=='all'?'All\x20bots':_0x86bf70(0x16c)+_0x524228['botID'],'callback_data':_0x524228[_0x86bf70(0x271)]}),_0xa3954c%_0x5f27ae==0x0&&(_0x7ba550[_0xd96d58]=_0x173c33,_0xd96d58++);}),tgBot[_0x323cb5(0x26c)](_0x528c35[_0x323cb5(0x169)]['id'],_0x323cb5(0x226),{'reply_markup':{'inline_keyboard':_0x7ba550}})['catch'](_0x48a957=>{telegramError(_0x48a957);}),tgBot['on']('callback_query',async _0x4a8962=>{const _0x2e531b=_0x323cb5,_0x360ed6=_0x4a8962['data'],_0x2f8d68=_0x4a8962[_0x2e531b(0x12d)];tgBot[_0x2e531b(0x195)](_0x4a8962['id'])[_0x2e531b(0x168)](async()=>{const _0x42c0f8=_0x2e531b;_0x360ed6==_0x42c0f8(0x111)?config[_0x42c0f8(0x253)](_0x133de8=>{restartBot(_0x133de8['botID']);}):restartBot(_0x360ed6);}),tgBot[_0x2e531b(0x1f5)](_0x2e531b(0x18e));});}}),tgBot['onText'](/\/on/,_0x12e5f2=>{const _0x16e7ee=_0x6afec8;if(!validateTelegram(_0x12e5f2))return;tgBot[_0x16e7ee(0x1f5)](_0x16e7ee(0x18e));const _0x366867=getDisabledBots();if(_0x366867[_0x16e7ee(0x2c8)]==0x0)tgBot[_0x16e7ee(0x26c)](_0x12e5f2[_0x16e7ee(0x169)]['id'],_0x16e7ee(0x1b8))[_0x16e7ee(0x274)](_0x13662d=>{telegramError(_0x13662d);});else{if(_0x366867['length']>0x1)_0x366867[_0x16e7ee(0x2ef)]({'botID':'all'});let _0x19c97f=[],_0x470652=[];const _0x3412e5=_0x366867['length']%0x4==0x0||_0x366867[_0x16e7ee(0x2c8)]%0x4==0x3||_0x366867[_0x16e7ee(0x2c8)]%0x3==0x1?0x4:0x3;let _0x2a97a2=0x0;_0x366867[_0x16e7ee(0x253)]((_0x9f1eac,_0x6a30fc)=>{const _0x3c608d=_0x16e7ee;if(_0x6a30fc%_0x3412e5==0x0)_0x470652=[];_0x470652[_0x3c608d(0x2ef)]({'text':_0x9f1eac[_0x3c608d(0x271)]=='all'?_0x3c608d(0x14c):_0x3c608d(0x16c)+_0x9f1eac[_0x3c608d(0x271)],'callback_data':_0x9f1eac[_0x3c608d(0x271)]}),_0x6a30fc%_0x3412e5==0x0&&(_0x19c97f[_0x2a97a2]=_0x470652,_0x2a97a2++);}),tgBot[_0x16e7ee(0x26c)](_0x12e5f2[_0x16e7ee(0x169)]['id'],_0x16e7ee(0x120),{'reply_markup':{'inline_keyboard':_0x19c97f}})['catch'](_0x54fec8=>{telegramError(_0x54fec8);}),tgBot['on'](_0x16e7ee(0x18e),async _0xccfc7b=>{const _0x23d5ef=_0x16e7ee,_0x1045c0=_0xccfc7b[_0x23d5ef(0x254)],_0x2ff314=_0xccfc7b[_0x23d5ef(0x12d)];tgBot['answerCallbackQuery'](_0xccfc7b['id'])[_0x23d5ef(0x168)](async()=>{const _0x5967d1=_0x23d5ef;_0x1045c0==_0x5967d1(0x111)?(tgBot['sendMessage'](_0x2ff314['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x5967d1(0x274)](_0x23fd89=>{telegramError(_0x23fd89);}),_0x366867[_0x5967d1(0x253)](_0x57389f=>{const _0x30e3cf=_0x5967d1;if(_0x57389f['botID']!=_0x30e3cf(0x111))toggleBot(_0x57389f[_0x30e3cf(0x271)],toggleStatus(_0x57389f[_0x30e3cf(0x271)]),_0x30e3cf(0x1b5));})):(tgBot[_0x5967d1(0x26c)](_0x2ff314[_0x5967d1(0x169)]['id'],_0x5967d1(0x130)+_0x1045c0)['catch'](_0x579b93=>{telegramError(_0x579b93);}),toggleBot(_0x1045c0,toggleStatus(_0x1045c0),_0x5967d1(0x1b5)));}),tgBot[_0x23d5ef(0x1f5)](_0x23d5ef(0x18e));});}}),tgBot[_0x6afec8(0x242)](/\/off/,_0x12c456=>{const _0x4611d1=_0x6afec8;if(!validateTelegram(_0x12c456))return;tgBot['removeListener'](_0x4611d1(0x18e));const _0x101210=getEnabledBots();if(_0x101210[_0x4611d1(0x2c8)]==0x0)tgBot['sendMessage'](_0x12c456[_0x4611d1(0x169)]['id'],_0x4611d1(0x213))[_0x4611d1(0x274)](_0x355256=>{telegramError(_0x355256);});else{if(_0x101210[_0x4611d1(0x2c8)]>0x1)_0x101210[_0x4611d1(0x2ef)]({'botID':_0x4611d1(0x111)});let _0x11dce7=[],_0x41703e=[];const _0x394c31=_0x101210[_0x4611d1(0x2c8)]%0x4==0x0||_0x101210[_0x4611d1(0x2c8)]%0x4==0x3||_0x101210['length']%0x3==0x1?0x4:0x3;let _0x1e4097=0x0;_0x101210[_0x4611d1(0x253)]((_0x52a367,_0x58389b)=>{const _0x5b71a1=_0x4611d1;if(_0x58389b%_0x394c31==0x0)_0x41703e=[];_0x41703e['push']({'text':_0x52a367['botID']=='all'?_0x5b71a1(0x14c):_0x5b71a1(0x16c)+_0x52a367[_0x5b71a1(0x271)],'callback_data':_0x52a367[_0x5b71a1(0x271)]}),_0x58389b%_0x394c31==0x0&&(_0x11dce7[_0x1e4097]=_0x41703e,_0x1e4097++);}),tgBot['sendMessage'](_0x12c456[_0x4611d1(0x169)]['id'],_0x4611d1(0x164),{'reply_markup':{'inline_keyboard':_0x11dce7}})[_0x4611d1(0x274)](_0x147b34=>{telegramError(_0x147b34);}),tgBot['on'](_0x4611d1(0x18e),async _0x159494=>{const _0x46ff8d=_0x4611d1,_0x1de8a7=_0x159494['data'],_0x460c58=_0x159494['message'];tgBot[_0x46ff8d(0x195)](_0x159494['id'])[_0x46ff8d(0x168)](async()=>{const _0x40cee2=_0x46ff8d;_0x1de8a7==_0x40cee2(0x111)?(tgBot['sendMessage'](_0x460c58[_0x40cee2(0x169)]['id'],_0x40cee2(0x300))[_0x40cee2(0x274)](_0x4f67e8=>{telegramError(_0x4f67e8);}),_0x101210['forEach'](_0x3ef8d4=>{const _0x274968=_0x40cee2;if(_0x3ef8d4[_0x274968(0x271)]!=_0x274968(0x111))toggleBot(_0x3ef8d4[_0x274968(0x271)],toggleStatus(_0x3ef8d4[_0x274968(0x271)]),_0x274968(0x1b5));})):(tgBot[_0x40cee2(0x26c)](_0x460c58['chat']['id'],_0x40cee2(0x17d)+_0x1de8a7)['catch'](_0x3be233=>{telegramError(_0x3be233);}),toggleBot(_0x1de8a7,toggleStatus(_0x1de8a7),_0x40cee2(0x1b5)));}),tgBot['removeListener'](_0x46ff8d(0x18e));});}}),tgBot[_0x6afec8(0x242)](/\/metrics/,_0x2543fc=>{const _0x304b7c=_0x6afec8;if(!validateTelegram(_0x2543fc))return;tgBot[_0x304b7c(0x1f5)](_0x304b7c(0x18e));const _0x5e2503=getEnabledBots();if(_0x5e2503['length']==0x0)tgBot['sendMessage'](_0x2543fc[_0x304b7c(0x169)]['id'],_0x304b7c(0x213))[_0x304b7c(0x274)](_0x4f02a3=>{telegramError(_0x4f02a3);});else{if(_0x5e2503['length']>0x1){let _0x243875=[],_0x157e25=[];const _0x345ef4=_0x5e2503[_0x304b7c(0x2c8)]%0x4==0x0||_0x5e2503['length']%0x4==0x3||_0x5e2503[_0x304b7c(0x2c8)]%0x3==0x1?0x4:0x3;let _0x4d67b1=0x0;_0x5e2503[_0x304b7c(0x253)]((_0x209459,_0x224466)=>{const _0x5c14c7=_0x304b7c;if(_0x224466%_0x345ef4==0x0)_0x157e25=[];_0x157e25[_0x5c14c7(0x2ef)]({'text':_0x5c14c7(0x16c)+_0x209459[_0x5c14c7(0x271)],'callback_data':_0x209459[_0x5c14c7(0x271)]}),_0x224466%_0x345ef4==0x0&&(_0x243875[_0x4d67b1]=_0x157e25,_0x4d67b1++);}),tgBot['sendMessage'](_0x2543fc[_0x304b7c(0x169)]['id'],_0x304b7c(0x1bf),{'reply_markup':{'inline_keyboard':_0x243875}})[_0x304b7c(0x274)](_0x67263c=>{telegramError(_0x67263c);}),tgBot['on'](_0x304b7c(0x18e),async _0x5ce90b=>{const _0x574946=_0x304b7c,_0x779b1a=_0x5ce90b['data'],_0x3204bf=_0x5ce90b[_0x574946(0x12d)];tgBot[_0x574946(0x195)](_0x5ce90b['id'])[_0x574946(0x168)](async()=>{const _0x56f703=_0x574946;if(pid[_0x779b1a])pid[_0x779b1a][_0x56f703(0x110)]({'function':'sendMetricsTelegram','args':null});}),tgBot['removeListener']('callback_query');});}else{const _0x2a3fc3=_0x5e2503[0x0][_0x304b7c(0x271)];if(pid[_0x2a3fc3])pid[_0x2a3fc3]['send']({'function':_0x304b7c(0x127),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x188454=>{const _0x2a02b9=_0x6afec8;if(!validateTelegram(_0x188454))return;tgBot[_0x2a02b9(0x1f5)](_0x2a02b9(0x18e));const _0x473f1d=getEnabledBots();if(_0x473f1d[_0x2a02b9(0x2c8)]==0x0)tgBot[_0x2a02b9(0x26c)](_0x188454[_0x2a02b9(0x169)]['id'],_0x2a02b9(0x213))[_0x2a02b9(0x274)](_0x1bf8b2=>{telegramError(_0x1bf8b2);});else{if(_0x473f1d[_0x2a02b9(0x2c8)]>0x1){let _0x26ff6a=[],_0x40b62e=[];const _0x2f753f=_0x473f1d[_0x2a02b9(0x2c8)]%0x4==0x0||_0x473f1d[_0x2a02b9(0x2c8)]%0x4==0x3||_0x473f1d['length']%0x3==0x1?0x4:0x3;let _0x3a4078=0x0;_0x473f1d[_0x2a02b9(0x253)]((_0x5294e0,_0x55e6e2)=>{const _0x20b293=_0x2a02b9;if(_0x55e6e2%_0x2f753f==0x0)_0x40b62e=[];_0x40b62e['push']({'text':'Bot\x20'+_0x5294e0[_0x20b293(0x271)],'callback_data':_0x5294e0[_0x20b293(0x271)]}),_0x55e6e2%_0x2f753f==0x0&&(_0x26ff6a[_0x3a4078]=_0x40b62e,_0x3a4078++);}),tgBot[_0x2a02b9(0x26c)](_0x188454[_0x2a02b9(0x169)]['id'],_0x2a02b9(0x2ab),{'reply_markup':{'inline_keyboard':_0x26ff6a}})[_0x2a02b9(0x274)](_0x3ccfb4=>{telegramError(_0x3ccfb4);}),tgBot['on'](_0x2a02b9(0x18e),async _0x55098b=>{const _0x20a437=_0x2a02b9,_0x1009a8=_0x55098b[_0x20a437(0x254)],_0x399985=_0x55098b['message'];tgBot[_0x20a437(0x195)](_0x55098b['id'])['then'](async()=>{const _0x498aff=_0x20a437;if(pid[_0x1009a8])pid[_0x1009a8][_0x498aff(0x110)]({'function':_0x498aff(0x172),'args':null});}),tgBot[_0x20a437(0x1f5)](_0x20a437(0x18e));});}else{const _0x2d3353=_0x473f1d[0x0][_0x2a02b9(0x271)];if(pid[_0x2d3353])pid[_0x2d3353][_0x2a02b9(0x110)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x6afec8(0x242)](/\/update/,async _0xbf1b6a=>{const _0x2d1aa8=_0x6afec8;if(!validateTelegram(_0xbf1b6a))return;tgBot[_0x2d1aa8(0x1f5)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x2d1aa8(0x26c)](_0xbf1b6a['chat']['id'],_0x2d1aa8(0x233))[_0x2d1aa8(0x274)](_0x9c54d2=>{telegramError(_0x9c54d2);});else!validInstallation?tgBot['sendMessage'](_0xbf1b6a['chat']['id'],_0x2d1aa8(0x1ad))[_0x2d1aa8(0x274)](_0x4055a6=>{telegramError(_0x4055a6);}):(tgBot[_0x2d1aa8(0x26c)](_0xbf1b6a[_0x2d1aa8(0x169)]['id'],_0x2d1aa8(0x14f),{'reply_markup':{'inline_keyboard':[[{'text':_0x2d1aa8(0x22a),'callback_data':_0x2d1aa8(0x2a4)},{'text':'No','callback_data':'no'}]]}})[_0x2d1aa8(0x274)](_0x87a7d8=>{telegramError(_0x87a7d8);}),tgBot['on'](_0x2d1aa8(0x18e),async _0x24ccc8=>{const _0x42fc7b=_0x2d1aa8,_0x3f41c3=_0x24ccc8[_0x42fc7b(0x254)],_0x2d0252=_0x24ccc8['message'];tgBot[_0x42fc7b(0x195)](_0x24ccc8['id'])['then'](async()=>{const _0x20af64=_0x42fc7b;_0x3f41c3=='yes'&&(await tgBot['sendMessage'](_0x2d0252[_0x20af64(0x169)]['id'],_0x20af64(0x1c1))[_0x20af64(0x274)](_0x558ea8=>{telegramError(_0x558ea8);}),updateBB('update')),_0x3f41c3=='no'&&await tgBot['sendMessage'](_0x2d0252['chat']['id'],_0x20af64(0x2f6))[_0x20af64(0x274)](_0x575d41=>{telegramError(_0x575d41);});}),tgBot['removeListener'](_0x42fc7b(0x18e));}));}),tgBot['onText'](/\/reinstall/,async _0x122315=>{const _0x1a0d1a=_0x6afec8;if(!validateTelegram(_0x122315))return;tgBot[_0x1a0d1a(0x1f5)](_0x1a0d1a(0x18e)),!validInstallation?tgBot[_0x1a0d1a(0x26c)](_0x122315[_0x1a0d1a(0x169)]['id'],_0x1a0d1a(0x151))[_0x1a0d1a(0x274)](_0x5a3395=>{telegramError(_0x5a3395);}):(tgBot[_0x1a0d1a(0x26c)](_0x122315[_0x1a0d1a(0x169)]['id'],_0x1a0d1a(0x116),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x1a0d1a(0x2a4)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x147f79=>{telegramError(_0x147f79);}),tgBot['on'](_0x1a0d1a(0x18e),async _0x44da99=>{const _0x2f78a9=_0x1a0d1a,_0x4c48de=_0x44da99['data'],_0x34189c=_0x44da99[_0x2f78a9(0x12d)];tgBot[_0x2f78a9(0x195)](_0x44da99['id'])[_0x2f78a9(0x168)](async()=>{const _0x15f4fd=_0x2f78a9;_0x4c48de==_0x15f4fd(0x2a4)&&(await tgBot[_0x15f4fd(0x26c)](_0x34189c[_0x15f4fd(0x169)]['id'],_0x15f4fd(0x239))[_0x15f4fd(0x274)](_0x161fe4=>{telegramError(_0x161fe4);}),updateBB(_0x15f4fd(0x12a))),_0x4c48de=='no'&&await tgBot[_0x15f4fd(0x26c)](_0x34189c[_0x15f4fd(0x169)]['id'],_0x15f4fd(0x259))['catch'](_0x3201f6=>{telegramError(_0x3201f6);});}),tgBot[_0x2f78a9(0x1f5)]('callback_query');}));}),tgBot[_0x6afec8(0x242)](/\/toggle/,_0x599747=>{const _0xd4ab5c=_0x6afec8;if(!validateTelegram(_0x599747))return;tgBot[_0xd4ab5c(0x1f5)](_0xd4ab5c(0x18e));const _0x41e735=getBotsWithMode();if(_0x41e735[_0xd4ab5c(0x2c8)]==0x0)tgBot[_0xd4ab5c(0x26c)](_0x599747[_0xd4ab5c(0x169)]['id'],_0xd4ab5c(0x213))[_0xd4ab5c(0x274)](_0xc03f85=>{telegramError(_0xc03f85);});else{let _0x47bc12=[],_0x4154d6=[];const _0x58abb6=0x2;let _0x50496f=0x0;_0x41e735[_0xd4ab5c(0x253)]((_0x47ce43,_0x1b353d)=>{const _0x4c3300=_0xd4ab5c;if(_0x1b353d%_0x58abb6==0x0)_0x4154d6=[];_0x4154d6[_0x4c3300(0x2ef)]({'text':_0x4c3300(0x16c)+_0x47ce43[_0x4c3300(0x271)]+'\x20('+_0x47ce43['mode']+')','callback_data':_0x47ce43[_0x4c3300(0x271)]}),_0x1b353d%_0x58abb6==0x0&&(_0x47bc12[_0x50496f]=_0x4154d6,_0x50496f++);}),tgBot[_0xd4ab5c(0x26c)](_0x599747['chat']['id'],_0xd4ab5c(0x1cb),{'reply_markup':{'inline_keyboard':_0x47bc12}})['catch'](_0x41e258=>{telegramError(_0x41e258);}),tgBot['on'](_0xd4ab5c(0x18e),async _0x1cb429=>{const _0x24abe7=_0xd4ab5c,_0x160587=_0x1cb429[_0x24abe7(0x254)],_0x52ed7c=_0x1cb429[_0x24abe7(0x12d)];tgBot[_0x24abe7(0x195)](_0x1cb429['id'])[_0x24abe7(0x168)](async()=>{const _0x5e1923=_0x24abe7,_0x8ddc4=_0x41e735[_0x5e1923(0x14a)](_0x202d0e=>_0x202d0e[_0x5e1923(0x271)]==_0x160587),_0xb87464=_0x8ddc4['mode']==_0x5e1923(0x1c6)?_0x5e1923(0x202):'auto';tgBot[_0x5e1923(0x26c)](_0x52ed7c[_0x5e1923(0x169)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x160587+'\x20to\x20'+_0xb87464+_0x5e1923(0x2b1))[_0x5e1923(0x274)](_0xe24cd8=>{telegramError(_0xe24cd8);}),toggleBotMode(_0x160587);}),tgBot[_0x24abe7(0x1f5)](_0x24abe7(0x18e));});}}),tgBot[_0x6afec8(0x242)](/\/names/,_0x2bd0fb=>{const _0x367310=_0x6afec8;if(!validateTelegram(_0x2bd0fb))return;let _0x5b1543='';config[_0x367310(0x253)](_0x5193d0=>{const _0x478e92=_0x367310;_0x5b1543+=_0x478e92(0x16c)+_0x5193d0[_0x478e92(0x271)]+':\x20'+_0x5193d0[_0x478e92(0x290)]+'\x0a';}),tgBot[_0x367310(0x26c)](_0x2bd0fb['chat']['id'],_0x5b1543,{'parse_mode':_0x367310(0x250)})[_0x367310(0x274)](_0x17838b=>{telegramError(_0x17838b);});}),tgBot[_0x6afec8(0x242)](/\/disable/,_0x363415=>{const _0x4285a9=_0x6afec8;if(!validateTelegram(_0x363415))return;tgBot[_0x4285a9(0x26c)](_0x363415[_0x4285a9(0x169)]['id'],'Notifications\x20disabled')[_0x4285a9(0x274)](_0x3c3001=>{telegramError(_0x3c3001);}),updateSetting(_0x4285a9(0x2f4),![]);}),tgBot[_0x6afec8(0x242)](/\/help/,_0x4d1dc2=>{const _0x6f3905=_0x6afec8;if(!validateTelegram(_0x4d1dc2))return;tgBot[_0x6f3905(0x26c)](_0x4d1dc2[_0x6f3905(0x169)]['id'],_0x3a3cf3)[_0x6f3905(0x274)](_0x549a2e=>{telegramError(_0x549a2e);});}),tgBot['on']('polling_error',_0x55f8bf=>{const _0x1a62de=_0x6afec8;_0x55f8bf[_0x1a62de(0x2f1)]()[_0x1a62de(0x15f)](_0x1a62de(0x1e7))&&(logger[_0x1a62de(0x13b)]('Invalid\x20Telegram\x20token'),tgBot[_0x1a62de(0x26f)](),tgBot=null,io['to'](_0x1a62de(0x25a))[_0x1a62de(0x260)](_0x1a62de(0x200),_0x1a62de(0x1e9)));}),process[_0x6afec8(0x203)]('SIGINT',()=>{const _0x4322c7=_0x6afec8;if(tgBot)tgBot[_0x4322c7(0x26f)]();process[_0x4322c7(0x148)](0x1);}),process['once'](_0x6afec8(0x159),()=>{const _0x2ce6fa=_0x6afec8;if(tgBot)tgBot[_0x2ce6fa(0x26f)]();process[_0x2ce6fa(0x148)](0x1);});}}function disableTelegram(){const _0x3b18d4=_0x202e98;tgBot&&(tgBot[_0x3b18d4(0x26f)](),tgBot=null);}function sendTelegram(_0x192c21,_0x9b9564){const _0xff62b2=_0x202e98;if(settings[_0xff62b2(0x2f4)]){if(settings[_0xff62b2(0x296)]==_0xff62b2(0x111)||(_0x9b9564[_0xff62b2(0x238)]==_0xff62b2(0x20e)||_0x9b9564[_0xff62b2(0x238)]=='warning'||_0x9b9564['type']==_0xff62b2(0x193))&&settings[_0xff62b2(0x296)]==_0xff62b2(0x293)||_0x9b9564[_0xff62b2(0x238)]=='order'&&settings['telegramEvents']==_0xff62b2(0x23a)){if(tgBot&&settings['telegramChatId']){if(_0x9b9564[_0xff62b2(0x281)])tgBot[_0xff62b2(0x26c)](settings[_0xff62b2(0x2d4)],_0x9b9564[_0xff62b2(0x290)]+_0xff62b2(0x1d0)+_0x9b9564[_0xff62b2(0x1ec)])[_0xff62b2(0x274)](_0x2edfdd=>{telegramError(_0x2edfdd);});else tgBot[_0xff62b2(0x26c)](settings['telegramChatId'],_0xff62b2(0x16c)+_0x192c21+'\x20>\x20'+_0x9b9564[_0xff62b2(0x1ec)])[_0xff62b2(0x274)](_0x59bec3=>{telegramError(_0x59bec3);});}}}}async function sendTelegramMsg(_0x43f7e9,_0x3bbb95=_0x202e98(0x250)){const _0x38f95f=_0x202e98;return settings[_0x38f95f(0x2f4)]&&tgBot&&settings[_0x38f95f(0x2d4)]?(await tgBot[_0x38f95f(0x26c)](settings[_0x38f95f(0x2d4)],_0x43f7e9,{'parse_mode':_0x3bbb95})[_0x38f95f(0x274)](_0x2dd6d7=>{telegramError(_0x2dd6d7);}),!![]):![];}function getDeviceWithIp(_0xf6c9e){const _0x37dd02=_0x202e98;return devices[_0x37dd02(0x14a)](_0x55e618=>_0x55e618['ip']===_0xf6c9e);}function temporaryAccess2FA(_0x2af193,_0x53ec38){const _0x2eaa44=_0x202e98;let _0x18f9d0=new Date(),_0x4e745b=![];if(lastIpApproval){if(_0x18f9d0-lastIpApproval<0x1388)_0x4e745b=!![];}lastIpApproval=new Date();if(_0x4e745b)return;tgBot&&settings[_0x2eaa44(0x2d4)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x2eaa44(0x26c)](settings['telegramChatId'],_0x2eaa44(0x1e5)+normalizeIP(_0x53ec38)[_0x2eaa44(0x1aa)]+_0x2eaa44(0x255),{'parse_mode':_0x2eaa44(0x250),'reply_markup':{'inline_keyboard':[[{'text':_0x2eaa44(0x2db),'callback_data':'5'},{'text':_0x2eaa44(0x212),'callback_data':'15'},{'text':_0x2eaa44(0x219),'callback_data':'30'},{'text':_0x2eaa44(0x2df),'callback_data':_0x2eaa44(0x2df)}]]}})['catch'](_0x46fcc5=>{telegramError(_0x46fcc5);}),tgBot['on'](_0x2eaa44(0x18e),async _0x565b06=>{const _0x59cf9b=_0x2eaa44,_0x1d6c2b=_0x565b06[_0x59cf9b(0x254)],_0x482bc9=_0x565b06[_0x59cf9b(0x12d)];tgBot['answerCallbackQuery'](_0x565b06['id'])[_0x59cf9b(0x168)](async()=>{const _0x4862c4=_0x59cf9b;devices[_0x2af193][_0x4862c4(0x217)]={'clientip':_0x53ec38,'timestamp':new Date()[_0x4862c4(0x1c7)](),'expiry':_0x1d6c2b},_0x1d6c2b!=_0x4862c4(0x2df)?(await tgBot[_0x4862c4(0x26c)](_0x482bc9[_0x4862c4(0x169)]['id'],_0x4862c4(0x24a)+_0x1d6c2b+_0x4862c4(0x140),{'parse_mode':_0x4862c4(0x250)})['catch'](_0x4e35b2=>{telegramError(_0x4e35b2);}),io['to'](_0x2af193)[_0x4862c4(0x260)](_0x4862c4(0x28c),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x4862c4(0x26c)](_0x482bc9[_0x4862c4(0x169)]['id'],_0x4862c4(0x23d))[_0x4862c4(0x274)](_0x35d559=>{telegramError(_0x35d559);}),io['to'](_0x2af193)[_0x4862c4(0x260)](_0x4862c4(0x28c),{'access':{'allow':![],'reason':_0x4862c4(0x167),'token':null}}));}),tgBot[_0x59cf9b(0x1f5)]('callback_query');}));}function loginAccess2FA(_0xba67c9,_0x93de55){const _0x59e839=_0x202e98;tgBot&&settings[_0x59e839(0x2d4)]&&(tgBot[_0x59e839(0x1f5)](_0x59e839(0x18e)),tgBot['sendMessage'](settings[_0x59e839(0x2d4)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x93de55)['show']+_0x59e839(0x255),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x59e839(0x18f),'callback_data':loginExpiry},{'text':_0x59e839(0x2df),'callback_data':_0x59e839(0x2df)}]]}})['catch'](_0x3728a9=>{telegramError(_0x3728a9);}),tgBot['on']('callback_query',async _0x2f4862=>{const _0x57ad36=_0x59e839,_0x263500=_0x2f4862[_0x57ad36(0x254)],_0x1bd814=_0x2f4862[_0x57ad36(0x12d)];tgBot[_0x57ad36(0x195)](_0x2f4862['id'])[_0x57ad36(0x168)](async()=>{const _0x940a43=_0x57ad36;devices[_0xba67c9][_0x940a43(0x243)]={'clientip':_0x93de55,'timestamp':new Date()[_0x940a43(0x1c7)](),'expiry':_0x263500},_0x263500!=_0x940a43(0x2df)?(await tgBot[_0x940a43(0x26c)](_0x1bd814['chat']['id'],_0x940a43(0x28e),{'parse_mode':_0x940a43(0x250)})[_0x940a43(0x274)](_0x1cb8d4=>{telegramError(_0x1cb8d4);}),io['to'](_0xba67c9)[_0x940a43(0x260)](_0x940a43(0x28c),{'access':{'allow':![],'reason':_0x940a43(0x282),'token':null}})):(await tgBot[_0x940a43(0x26c)](_0x1bd814[_0x940a43(0x169)]['id'],'Login\x20rejected')[_0x940a43(0x274)](_0x4633e0=>{telegramError(_0x4633e0);}),io['to'](_0xba67c9)[_0x940a43(0x260)](_0x940a43(0x28c),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x57ad36(0x1f5)](_0x57ad36(0x18e));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x26438e=_0x202e98;return dbConfig[_0x26438e(0x258)]('bots')[_0x26438e(0x24e)](_0x26438e(0x271))[_0x26438e(0x1d4)]({'status':'enabled'})[_0x26438e(0x247)]()||[];}function getDisabledBots(){const _0x378452=_0x202e98;return dbConfig[_0x378452(0x258)](_0x378452(0x2a3))[_0x378452(0x24e)](_0x378452(0x271))['filter']({'status':_0x378452(0x16d)})[_0x378452(0x247)]()||[];}function getBotAttributes(_0x59cb5d){const _0x5c7822=_0x202e98;let _0x476b30={};const _0x322711=configpath+_0x5c7822(0x1ef)+_0x59cb5d+_0x5c7822(0x2af),_0x920ddb=fs[_0x5c7822(0x184)](_0x322711);if(_0x920ddb){const _0x294a04=fs[_0x5c7822(0x173)](_0x322711);try{const _0x35251d=JSON[_0x5c7822(0x161)](_0x294a04),_0x15f40d=_0x35251d?_0x35251d[_0x5c7822(0x218)][0x0][_0x5c7822(0x13e)]:![];_0x476b30['mode']=_0x15f40d?_0x5c7822(0x1c6):_0x5c7822(0x202),_0x476b30[_0x5c7822(0x290)]=_0x35251d?_0x35251d['bot'][0x0][_0x5c7822(0x290)]:_0x5c7822(0x16c)+_0x59cb5d;}catch(_0x35dfa9){_0x476b30[_0x5c7822(0x126)]=_0x5c7822(0x202),_0x476b30[_0x5c7822(0x290)]=_0x5c7822(0x16c)+_0x59cb5d;}}else _0x476b30[_0x5c7822(0x126)]=_0x5c7822(0x202),_0x476b30[_0x5c7822(0x290)]=_0x5c7822(0x16c)+_0x59cb5d;return _0x476b30;}function getBotsWithMode(){const _0x1a7767=_0x202e98,_0x19c4b2=dbConfig[_0x1a7767(0x258)](_0x1a7767(0x2a3))[_0x1a7767(0x24e)](_0x1a7767(0x271))['value']()||[];return _0x19c4b2[_0x1a7767(0x253)](_0xd9b84e=>{const _0x170a5b=_0x1a7767;let _0x3dbfa1=getBotAttributes(_0xd9b84e['botID']);_0xd9b84e[_0x170a5b(0x126)]=_0x3dbfa1[_0x170a5b(0x126)];}),_0x19c4b2;}function getBotExchanges(){const _0x43b023=_0x202e98;let _0x441a9c=[];const _0x50d57e=dbConfig['get'](_0x43b023(0x2a3))[_0x43b023(0x24e)](_0x43b023(0x271))[_0x43b023(0x247)]()||[];_0x50d57e[_0x43b023(0x253)](_0x5cf024=>{const _0x1f96a4=_0x43b023;if(_0x5cf024['status']=='enabled'){const _0x7f4963=configpath+'bot-'+_0x5cf024[_0x1f96a4(0x271)]+'-config.json',_0x5d194e=fs[_0x1f96a4(0x184)](_0x7f4963);let _0x1f0d22;if(_0x5d194e){const _0x15dc43=fs['readFileSync'](_0x7f4963);try{const _0x18fb0a=JSON[_0x1f96a4(0x161)](_0x15dc43);_0x1f0d22=_0x18fb0a?_0x18fb0a[_0x1f96a4(0x218)][0x0][_0x1f96a4(0x2e4)]:null;}catch(_0x5611d2){}}if(_0x1f0d22)_0x441a9c[_0x1f96a4(0x2ef)](_0x1f0d22);}});const _0xe14643=[...new Set(_0x441a9c)][_0x43b023(0x1cc)]();return _0xe14643;}async function initUser(){const _0xfcb41e=_0x202e98;if(!settings['userid']){const _0x2b58eb=uuidRandom();mixpanel[_0xfcb41e(0x285)](_0x2b58eb),updateSetting(_0xfcb41e(0x2b2),_0x2b58eb);}}async function initSecure(){const _0x2492ea=_0x202e98;let _0x6d7683=getSecure();if(!_0x6d7683['hasOwnProperty'](_0x2492ea(0x121))){let _0x5e98b4=await generateKeys();_0x6d7683[_0x2492ea(0x244)]=_0x5e98b4[_0x2492ea(0x244)],_0x6d7683[_0x2492ea(0x2d6)]=_0x5e98b4[_0x2492ea(0x2d6)],_0x6d7683[_0x2492ea(0x121)]=crypto['randomBytes'](0x20)['toString'](_0x2492ea(0x189));;storeSecure(_0x6d7683);}}function getSettings(){const _0x209826=_0x202e98;return dbSettings[_0x209826(0x258)]('settings')['value']()||{};}function getSecure(){const _0x3c3dcd=_0x202e98;return dbSecure[_0x3c3dcd(0x258)](_0x3c3dcd(0x221))[_0x3c3dcd(0x247)]()||{};}function _0x11ef(){const _0x5cc080=['temporary\x20token\x20generated','store-fiat','headless','temporary\x20access\x20not\x20allowed','\x20minutes','sign','http','/upload-backup','bbPassword','Unauthorized\x20attempt\x20to\x20delete\x20alerts','function','any','exit','removeAllListeners','find','initclient','All\x20bots','bcryptjs','bb-secure.json','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','/:bot/coins','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','11171330glIuGJ','logged\x20out','logs','headers','-----------------------------------------------------------------------------------','from','Server','SIGTERM','\x1b[34m','logout','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','updatebotmanager','Unauthorized\x20attempt\x20to\x20confirm\x20message','includes','9aHXJmd','parse','decrypt','1000','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','copyFileSync','Unauthorized\x20attempt\x20to\x20get\x20messages','temporary\x20access\x20rejected','then','chat','hashSync','login','Bot\x20','disabled','environment','lowdb/adapters/FileSync','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','get-portfolio','sendPortfolioTelegram','readFileSync','exp','remove','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','User\x20has\x20been\x20validated','Restoring\x20bot(s)\x20from\x20backup','reset-password','Starting\x20(','getMonth','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/help\x20-\x20show\x20available\x20commands\x0a','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','clientip','Bot\x20Mgr\x20>\x20','cancel-loading','settings.','existsSync','slice','output-001.log','handshake','axios','hex','/off\x20-\x20stop\x20bot(s)\x0a','args','reason','resetHistory','callback_query','accept','Node.js\x20v','messages','store','success','Unauthorized\x20attempt\x20to\x20store\x20configuration','answerCallbackQuery','title','output-000.log','getHours','sha256',')\x20\x20\x20|\x20Bot\x20','config/','/update\x20-\x20update\x20Balance\x20Bot\x0a','[ip-address]','argv','test','getUTCHours','writeFileSync','isDirectory','toIPv4Address','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','2FA\x20login\x20required','(staging)','zip/','kill','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','show','remoteAddress','Ok,\x20will\x20send\x20alert\x20notifications\x20only','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','Invalid\x20IP\x20address','connection','No\x20authentication\x20token','output-003.log','Setting\x20access:\x20','3577952SaItVG','post','stopped','pidExpireLogin','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','All\x20bots\x20running\x20right\x20now','get-starting-balances','socket','add-bot','placeOrder','username','statSync','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','Unauthorized\x20attempt\x20to\x20update\x20settings','Starting\x20Balance\x20Bot\x20update','family','disconnect','Invalid\x20username\x20or\x20IP\x20address','path','auto','getTime','Invalid\x20authentication\x20token\x20(1)','f2aRequired','inherit','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','sort','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','************','util','\x20>\x20','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','apiPassword','user','filter','store-headless','Notifications\x20enabled','::ffff:127.0.0.1','get-logs','lastmsgtelegram','update','-performance.json','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','getMinutes','https://api.ipify.org?format=json','1JWuQbY','join','createServer','compareSync','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','NTBA_FIX_319','404\x20Not\x20Found','\x20|\x20','Invalid\x20Telegram\x20token','encryptedUuid','\x20|\x20client:\x20...','event','storeConfiguration','temp/','bot-','Network\x20Interfaces:','2FA\x20login\x20token\x20generated','padStart','\x1b[31m',':\x20Bot\x20Mgr\x20>\x20','removeListener','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','api-eu.mixpanel.com','lastmsgemitted','delete-alerts','bbUsername','Restore\x20process\x20aborted','output-002.log','rmSync','Restarting\x20Bot\x20','timestamp','notification','Unauthorized\x20attempt\x20to\x20get\x20portfolio','manual','once','\x20|\x20user:\x20...','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','\x1b[36m','logs/','***',',\x20must\x20be\x20a\x204\x20digit\x20number','binary','Notifications\x20types:\x20','apiKey','DEFLATE','error','search','temporary\x20access\x20timeout','/output-000.log','15\x20min','No\x20bots\x20running\x20right\x20now','login\x20token\x20valid','/status\x20-\x20show\x20bot(s)\x20status\x0a','update-bot','telegramIpApproval','bot','30\x20min','static','telegramToken','\x20(2)','hasOwnProperty','staging','Deleted\x20Bot\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','secure','node-zip','login\x20required','bbvNew','map','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','clients','index.html','range','Yes','\x1b[33m','-events.json','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','backup/','express-fileupload','confirm-message','0.0.0','Alerts','Your\x20installation\x20is\x20already\x20up\x20to\x20date','getStartingBalances','storeFiat','show-config','.zip','type','Starting\x20Balance\x20Bot\x20reinstallation','orders','/enable\x20-\x20enable\x20notifications\x0a','bb-settings.json','Temporary\x20access\x20rejected','invalid\x20credentials','sockets','159798yceEPa','uuid-random','onText','telegram2FaApproval','publicKey','access\x20timeout','backup-full.zip','value','=>\x20Go\x20to\x20#CYA#http://','versions','Access\x20enabled\x20for\x20','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','settings','port','sortBy','<b>Telegram\x20Bot\x20Status:</b>\x0a','HTML','Unauthorized\x20attempt\x20to\x20log\x20out','getDate','forEach','data','</b>\x20?','/disable\x20-\x20disable\x20notifications\x0a','7766gapysn','get','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','botmanager','Unauthorized\x20attempt\x20to\x20show\x20configuration','enabled','unlinkSync','_data','backup-full','emit','mkdirSync','restart','backup-full@','stringify','loginRequired','simple','Unauthorized\x20attempt\x20to\x20update\x20bot','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','defaults','generateKeyPairAsync','sendMessage','bb/','update-bb','stopPolling','get-backup-files','botID','use','login\x20token\x20generated','catch','$1_$2_$3','17236nekjfI','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','Unauthorized\x20attempt\x20to\x20delete\x20bot','track','lowdb','Logged\x20in\x20user\x20...','615958LzZfDk','socket.io','new-disabled','conn','showname','reload','startsWith','*$1*','alias','started','Orders','delete-bot','stop','running','104PKKxxU','status','showConfig','Login\x20accepted','bot.js','botname','token','login\x20not\x20required','alerts','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','expiry','telegramEvents','whitelist','onepagemode','264mcfqci','referer','Token\x20blacklisted','password','Markdown','write','-results.json','Restore\x20backup\x20file\x20','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','bbvReceive','bots','yes','Starting\x20#RED#Balance\x20Bot\x20v','/:bot','Crypt','Failed\x20to\x20download\x20','telegram','file','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','cloneDeep','/:bot/configuration','build','-config.json','9288uKJLAy','\x20mode','userid','build2','isValid','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','apiSecret',')\x20|\x20Bot\x20','telegrammsg','/:bot/performance','ipc','backup','ipaddr.js','127.0.0.1','cancelLoading','reset-history','sendFile','Error\x20removing\x20old\x20backup\x20files:','ipv6','storeHeadless','Notifications\x20disabled\x0a','getPortfolio','getSeconds','new','length','Unauthorized\x20attempt\x20to\x20add\x20bot','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','host','store-settings','deleteHistoryAlerts','assign','toggleBotMode','size','\x1b[0m','name','telegramUsername','telegramChatId','split','privateKey','mtime','params','files','string','5\x20min','blacklist','getFullYear','version.json','reject','constructor','format','node-telegram-bot-api','latestversion','exchange','#RES#\x20if\x20running\x20locally\x0a','connected','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','replace','auth','crypto','access','/names\x20-\x20show\x20bot\x20names\x0a','2891496mQrbQe','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','push','#RES#\x20','toString','21XlToAY','internal','telegramEnabled','Idling\x20(','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','readdirSync','fork','production','min','debug','#RES#\x20if\x20running\x20on\x20server','listen','timeshift','Password\x20has\x20been\x20reset\x20to:\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','log','/metrics\x20-\x20show\x20bot\x20performance\x0a','/download/:type','restore-backup-file','send','all','set','number','/:bot/history','Starting\x20new\x20bot\x20|\x20Bot\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','tkn','bb-config.json','uuid','node','Unauthorized\x20attempt\x20to\x20download\x20','allow','Error:\x20Invalid\x20argument\x20','Disabled\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','secret','exec','mixpanel','65gTIUqM','endsWith','mode','sendMetricsTelegram','live','get-messages','reinstall','address','/on\x20-\x20start\x20bot(s)\x0a','message','(((.+)+)+)+$','place-order','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','2FA\x20required','::1','6b67f3d61ee94b8f5c80b4affef4c4d9','toIPv4MappedAddress','RSA-OAEP','pidRefreshToken','download','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Logged\x20out\x20user\x20...','keys','full'];_0x11ef=function(){return _0x5cc080;};return _0x11ef();}function getBlacklist(){const _0x4e68af=_0x202e98;return dbSecure[_0x4e68af(0x258)](_0x4e68af(0x2dc))[_0x4e68af(0x247)]()||[];}function broadcastToBots(_0x3f1da0,_0x492a1){const _0x4a6bdd=_0x202e98;config[_0x4a6bdd(0x253)](_0x415c7a=>{const _0x5bfc7f=_0x4a6bdd;if(_0x415c7a[_0x5bfc7f(0x28c)]=='enabled'&&_0x415c7a[_0x5bfc7f(0x128)]==_0x5bfc7f(0x28a)||_0x415c7a[_0x5bfc7f(0x28c)]=='new'&&_0x415c7a[_0x5bfc7f(0x128)]==_0x5bfc7f(0x28a)){if(pid[_0x415c7a[_0x5bfc7f(0x271)]])pid[_0x415c7a['botID']]['send']({[_0x3f1da0]:_0x492a1});}});}function storeSettings(_0x58f138,_0x2491ca=![]){const _0x34c95b=_0x202e98;_0x58f138={...settings,..._0x58f138};if(_0x2491ca&&_0x58f138[_0x34c95b(0x144)]!=_0x34c95b(0x1ce)&&_0x58f138[_0x34c95b(0x144)]!=_0x34c95b(0x208)&&_0x58f138[_0x34c95b(0x144)]!=''){const _0x27f86e=crypt['decrypt'](secure[_0x34c95b(0x2d6)],_0x58f138[_0x34c95b(0x144)])['message'][_0x34c95b(0x2d5)]('@')[0x0],_0x268840=bcrypt[_0x34c95b(0x16a)](_0x27f86e,saltRounds);_0x58f138={..._0x58f138,'bbPassword':_0x268840};}if(_0x2491ca&&_0x58f138[_0x34c95b(0x21b)]!=_0x34c95b(0x1ce)&&_0x58f138[_0x34c95b(0x21b)]!=_0x34c95b(0x208)&&_0x58f138[_0x34c95b(0x21b)]!=''){const _0x54799d=crypt['decrypt'](secure[_0x34c95b(0x2d6)],_0x58f138[_0x34c95b(0x21b)])[_0x34c95b(0x12d)][_0x34c95b(0x2d5)]('@')[0x0];_0x58f138={..._0x58f138,'telegramToken':_0x54799d};}const _0xc341f6=_0x58f138[_0x34c95b(0x21b)]!='************'&&_0x58f138[_0x34c95b(0x21b)]!=settings[_0x34c95b(0x21b)]||_0x58f138['telegramUsername']!=settings[_0x34c95b(0x2d3)],_0x256a03=_0x58f138[_0x34c95b(0x21b)]==''||_0x58f138['telegramUsername']=='';if(_0xc341f6)_0x58f138[_0x34c95b(0x296)]=_0x34c95b(0x111);for(const [_0xc79810,_0x33f9d3]of Object['entries'](_0x58f138)){if(_0xc79810==_0x34c95b(0x21b)&&_0x33f9d3=='************'){_0x58f138[_0x34c95b(0x21b)]=settings[_0x34c95b(0x21b)];continue;};if(_0xc79810==_0x34c95b(0x144)&&_0x33f9d3=='************'){_0x58f138[_0x34c95b(0x144)]=settings[_0x34c95b(0x144)];continue;};dbSettings[_0x34c95b(0x112)](_0x34c95b(0x183)+_0xc79810,_0x33f9d3)[_0x34c95b(0x29e)]();}settings=_0x58f138,io['to']('botmanager')[_0x34c95b(0x260)](_0x34c95b(0x24c),cleanSettings()),broadcastToBots(_0x34c95b(0x2fe),settings['timeshift']),broadcastToBots(_0x34c95b(0x298),settings['onepagemode']);if(_0xc341f6&&!_0x256a03)initTelegram();if(_0xc341f6&&_0x256a03)disableTelegram();getAllClients()[_0x34c95b(0x253)](_0x384ea6=>{const _0x32c4ec=_0x34c95b;getSocket(_0x384ea6['id'])[_0x32c4ec(0x260)](_0x32c4ec(0x28c),{'access':{'allow':![],'reason':_0x32c4ec(0x282),'token':null}});});}function updateSetting(_0x3077f8,_0x429ee5){const _0x5883bf=_0x202e98;dbSettings[_0x5883bf(0x112)]('settings.'+_0x3077f8,_0x429ee5)[_0x5883bf(0x29e)](),settings=getSettings(),io['to'](_0x5883bf(0x25a))['emit'](_0x5883bf(0x24c),cleanSettings());}function storeSecure(_0x25debc){const _0x5b4a80=_0x202e98;dbSecure[_0x5b4a80(0x258)](_0x5b4a80(0x221))[_0x5b4a80(0x2ef)](_0x25debc)['write'](),secure=_0x25debc;}function addBlacklist(_0x466754){const _0x51bc4f=_0x202e98;cleanBlacklist();let _0x4e375a;devices[_0x466754][_0x51bc4f(0x217)]?_0x4e375a=Math['max'](devices[_0x466754][_0x51bc4f(0x217)][_0x51bc4f(0x295)],loginExpiry):_0x4e375a=loginExpiry,dbSecure['get'](_0x51bc4f(0x2dc))['push']({'expiry':new Date()[_0x51bc4f(0x1c7)]()+_0x4e375a*0x3c*0x3e8,'token':devices[_0x466754][_0x51bc4f(0x2eb)][_0x51bc4f(0x291)]})[_0x51bc4f(0x29e)](),blacklist=dbSecure[_0x51bc4f(0x258)]('blacklist')[_0x51bc4f(0x247)]();}function cleanBlacklist(){const _0x1568bb=_0x202e98;let _0x2bad25=dbSecure['get']('blacklist')[_0x1568bb(0x2ac)]()[_0x1568bb(0x247)](),_0x3acd07=new Date()[_0x1568bb(0x1c7)]();_0x2bad25[_0x1568bb(0x253)](_0xe9598f=>{const _0xa9b4ea=_0x1568bb;_0xe9598f[_0xa9b4ea(0x295)]<_0x3acd07&&dbSecure[_0xa9b4ea(0x258)]('blacklist')[_0xa9b4ea(0x175)]({'expiry':_0xe9598f[_0xa9b4ea(0x295)]})['write']();});}function initStates(){const _0x453c27=_0x202e98;let _0x175b15=getConfiguration();_0x175b15[_0x453c27(0x253)](_0x1cc17f=>{const _0x41b593=_0x453c27;_0x1cc17f['live']=_0x41b593(0x1b5);}),storeConfiguration(_0x175b15);}function onKeys(){const _0x5be3f7=new RSA();return new Promise(_0x5c8d6a=>{const _0x1b6356=_0x1acd;_0x5be3f7[_0x1b6356(0x26b)]()[_0x1b6356(0x168)](_0x2ff0ef=>{_0x5c8d6a(_0x2ff0ef);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xe7da38=_0x202e98;let _0xb8da0e=getSettings(),_0x249298=![];!_0xb8da0e[_0xe7da38(0x21d)](_0xe7da38(0x1d9))&&(_0xb8da0e[_0xe7da38(0x1d9)]=0x0,_0x249298=!![]);!_0xb8da0e[_0xe7da38(0x21d)](_0xe7da38(0x1f8))&&(_0xb8da0e[_0xe7da38(0x1f8)]=0x0,_0x249298=!![]);!_0xb8da0e[_0xe7da38(0x21d)](_0xe7da38(0x2e3))&&(_0xb8da0e[_0xe7da38(0x2e3)]='0.0.0',_0x249298=!![]);!_0xb8da0e[_0xe7da38(0x21d)](_0xe7da38(0x298))&&(_0xb8da0e[_0xe7da38(0x298)]=![],_0x249298=!![]);if(_0x249298)storeSettings(_0xb8da0e);try{fs[_0xe7da38(0x2f7)](configbackuppath,{'withFileTypes':!![]})[_0xe7da38(0x253)](_0x5cf28c=>{const _0x4c78cd=_0xe7da38;if(!_0x5cf28c[_0x4c78cd(0x1a2)]()){if(!_0x5cf28c[_0x4c78cd(0x2d2)][_0x4c78cd(0x283)](_0x4c78cd(0x263)))fs[_0x4c78cd(0x25d)](configbackuppath+_0x5cf28c['name']);}else fs[_0x4c78cd(0x1fd)](configbackuppath+_0x5cf28c[_0x4c78cd(0x2d2)],{'recursive':!![]});});}catch(_0xb389d4){logger[_0xe7da38(0x2fb)](_0xe7da38(0x2c1),_0xb389d4);}}function storeConfiguration(_0x42d015){const _0xf00e2e=_0x202e98;dbConfig[_0xf00e2e(0x258)](_0xf00e2e(0x2a3))[_0xf00e2e(0x175)]()[_0xf00e2e(0x29e)](),_0x42d015[_0xf00e2e(0x253)](_0xd8431c=>{const _0x1b5a58=_0xf00e2e;delete _0xd8431c[_0x1b5a58(0x126)];}),dbConfig[_0xf00e2e(0x258)]('bots')[_0xf00e2e(0x2ef)](..._0x42d015)[_0xf00e2e(0x29e)](),config=_0x42d015;}function resetPassword(){const _0x3c039e=_0x202e98;tgBot&&settings[_0x3c039e(0x2d4)]&&(tgBot[_0x3c039e(0x1f5)]('callback_query'),tgBot[_0x3c039e(0x26c)](settings[_0x3c039e(0x2d4)],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x3c039e(0x2a4),'callback_data':_0x3c039e(0x2a4)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x4a2e69=>{telegramError(_0x4a2e69);}),tgBot['on']('callback_query',async _0x150b1f=>{const _0x1ddeb8=_0x3c039e,_0x1d9a44=_0x150b1f[_0x1ddeb8(0x254)],_0x28a53b=_0x150b1f[_0x1ddeb8(0x12d)];tgBot[_0x1ddeb8(0x195)](_0x150b1f['id'])[_0x1ddeb8(0x168)](async()=>{const _0x541203=_0x1ddeb8;if(_0x1d9a44!='no'){const _0x43a1c5=0xf,_0x59892b='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x3f36c3=Array[_0x541203(0x157)](crypto['randomFillSync'](new Uint32Array(_0x43a1c5)))[_0x541203(0x225)](_0x448eba=>_0x59892b[_0x448eba%_0x59892b[_0x541203(0x2c8)]])[_0x541203(0x1e1)](''),_0x3a1f24=bcrypt[_0x541203(0x16a)](_0x3f36c3,saltRounds);storeSettings({'bbPassword':_0x3a1f24}),await tgBot[_0x541203(0x26c)](_0x28a53b['chat']['id'],_0x541203(0x2ff)+_0x3f36c3,{'parse_mode':_0x541203(0x250)})[_0x541203(0x274)](_0x3ec17b=>{telegramError(_0x3ec17b);});}else await tgBot[_0x541203(0x26c)](_0x28a53b['chat']['id'],'Password\x20reset\x20rejected')[_0x541203(0x274)](_0x3d8457=>{telegramError(_0x3d8457);});}),tgBot[_0x1ddeb8(0x1f5)](_0x1ddeb8(0x18e));}));}async function confirmRestore(_0x7a609b,_0x1b86cd){const _0x5ac724=_0x202e98;io['to']('botmanager')['emit'](_0x5ac724(0x200),_0x5ac724(0x176),_0x5ac724(0x193)),tgBot&&settings['telegramChatId']&&(tgBot[_0x5ac724(0x1f5)](_0x5ac724(0x18e)),await tgBot[_0x5ac724(0x26c)](settings[_0x5ac724(0x2d4)],_0x5ac724(0x1f6),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x5ac724(0x2a4),'callback_data':_0x5ac724(0x2a4)},{'text':'no','callback_data':'no'}]]}})[_0x5ac724(0x274)](_0xb112f1=>{telegramError(_0xb112f1);}),tgBot['on'](_0x5ac724(0x18e),async _0x498d16=>{const _0x13d521=_0x5ac724,_0x2a15cf=_0x498d16[_0x13d521(0x254)],_0x585068=_0x498d16['message'];tgBot[_0x13d521(0x195)](_0x498d16['id'])[_0x13d521(0x168)](async()=>{const _0xbe6687=_0x13d521;_0x2a15cf=='yes'?(await tgBot[_0xbe6687(0x26c)](_0x585068[_0xbe6687(0x169)]['id'],_0xbe6687(0x179),{'parse_mode':_0xbe6687(0x250)})[_0xbe6687(0x274)](_0x2a1818=>{telegramError(_0x2a1818);}),unzipFile(_0x7a609b,_0x1b86cd)):(logger[_0xbe6687(0x2fb)](_0xbe6687(0x1fb)),await tgBot[_0xbe6687(0x26c)](_0x585068[_0xbe6687(0x169)]['id'],_0xbe6687(0x1fb))['catch'](_0x37e7f2=>{telegramError(_0x37e7f2);}));}),tgBot[_0x13d521(0x1f5)]('callback_query');}));}function getServerTime(){const _0x1d8c1f=_0x202e98,_0x2f4146=new Date();return _0x2f4146[_0x1d8c1f(0x2dd)]()+'/'+(_0x2f4146[_0x1d8c1f(0x17c)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x2f4146['getDate']()[_0x1d8c1f(0x2f1)]()[_0x1d8c1f(0x1f2)](0x2,'0')+'\x20'+_0x2f4146['getHours']()[_0x1d8c1f(0x2f1)]()[_0x1d8c1f(0x1f2)](0x2,'0')+':'+_0x2f4146[_0x1d8c1f(0x1de)]()[_0x1d8c1f(0x2f1)]()[_0x1d8c1f(0x1f2)](0x2,'0')+':'+_0x2f4146['getSeconds']()[_0x1d8c1f(0x2f1)]()[_0x1d8c1f(0x1f2)](0x2,'0');}function getTimeStamp(){const _0x388a28=_0x202e98,_0x536306=shiftedTime();return _0x536306[_0x388a28(0x2dd)]()+'/'+(_0x536306[_0x388a28(0x17c)]()+0x1)[_0x388a28(0x2f1)]()[_0x388a28(0x1f2)](0x2,'0')+'/'+_0x536306[_0x388a28(0x252)]()[_0x388a28(0x2f1)]()[_0x388a28(0x1f2)](0x2,'0')+'\x20'+_0x536306['getHours']()[_0x388a28(0x2f1)]()['padStart'](0x2,'0')+':'+_0x536306[_0x388a28(0x1de)]()[_0x388a28(0x2f1)]()['padStart'](0x2,'0')+':'+_0x536306['getSeconds']()[_0x388a28(0x2f1)]()[_0x388a28(0x1f2)](0x2,'0');}function getCleanTimeStamp(){const _0x700492=_0x202e98,_0x1cf8b9=shiftedTime();return _0x1cf8b9[_0x700492(0x2dd)]()+(_0x1cf8b9[_0x700492(0x17c)]()+0x1)[_0x700492(0x2f1)]()[_0x700492(0x1f2)](0x2,'0')+_0x1cf8b9[_0x700492(0x252)]()[_0x700492(0x2f1)]()[_0x700492(0x1f2)](0x2,'0')+'-'+_0x1cf8b9[_0x700492(0x198)]()[_0x700492(0x2f1)]()[_0x700492(0x1f2)](0x2,'0')+_0x1cf8b9['getMinutes']()[_0x700492(0x2f1)]()['padStart'](0x2,'0')+_0x1cf8b9[_0x700492(0x2c6)]()['toString']()[_0x700492(0x1f2)](0x2,'0');}function shiftedTime(){const _0x88f95c=_0x202e98,_0x1e637a=new Date();let _0xd66c43=_0x1e637a;if(settings[_0x88f95c(0x2fe)]&&settings[_0x88f95c(0x2fe)]!==0x0)_0xd66c43=fns['add'](_0x1e637a,{'hours':settings[_0x88f95c(0x2fe)]});return _0xd66c43;}function startScheduler(){const _0x2df922=_0x202e98,_0x54646d=new Date()[_0x2df922(0x1a0)](),_0x5da704=shiftedTime()[_0x2df922(0x198)]();_0x5da704==0x4&&backupConfigFiles();_0x5da704==0x0&&rotateLogFiles();_0x54646d%0x6==0x0&&triggerAnalytics();_0x54646d%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x44ca73){const _0x231127=_0x202e98;logger[_0x231127(0x2fb)](_0x231127(0x2a0)+_0x44ca73);const _0x2dee2a=getBotsWithMode();_0x2dee2a[_0x231127(0x2c8)]>0x0?confirmRestore(configbackuppath,_0x44ca73):unzipFile(configbackuppath,_0x44ca73);}async function getBackupFiles(_0xaf388f=null){const _0x3c41c4=_0x202e98;let _0x639909=[],_0x5f5b3f=fs[_0x3c41c4(0x2f7)](configbackuppath,{'withFileTypes':!![]});_0x5f5b3f['sort']((_0x1686a0,_0x53c989)=>_0x1686a0[_0x3c41c4(0x2d2)]<_0x53c989[_0x3c41c4(0x2d2)]?0x1:_0x53c989['name']<_0x1686a0['name']?-0x1:0x0),_0x5f5b3f[_0x3c41c4(0x253)](_0x15d003=>{const _0x1fc23c=_0x3c41c4;if(!_0x15d003['isDirectory']()&&_0x15d003['name'][_0x1fc23c(0x283)](_0x1fc23c(0x263))&&_0x15d003[_0x1fc23c(0x2d2)][_0x1fc23c(0x125)](_0x1fc23c(0x237))){const _0x22a059=formatDate(fs['statSync'](configbackuppath+_0x15d003[_0x1fc23c(0x2d2)])[_0x1fc23c(0x2d7)]);_0x639909[_0x1fc23c(0x2ef)]({'name':_0x15d003[_0x1fc23c(0x2d2)],'mtime':_0x22a059});}});if(_0xaf388f)io['to'](_0xaf388f)[_0x3c41c4(0x260)]('backup-files',_0x639909);else return _0x639909;}async function backupConfigFiles(){const _0x5ddd54=_0x202e98;await zipFiles('backup-full');const _0x2f18b5=getCleanTimeStamp();fs[_0x5ddd54(0x165)](zippath+_0x5ddd54(0x246),configbackuppath+('backup-full@'+_0x2f18b5+_0x5ddd54(0x237)));let _0x2a8983=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x2a8983[_0x5ddd54(0x1cc)]((_0x19c112,_0x438d74)=>_0x19c112['name']<_0x438d74[_0x5ddd54(0x2d2)]?0x1:_0x438d74[_0x5ddd54(0x2d2)]<_0x19c112[_0x5ddd54(0x2d2)]?-0x1:0x0),_0x2a8983[_0x5ddd54(0x2c8)]>maxBackups&&fs[_0x5ddd54(0x25d)](configbackuppath+_0x2a8983[_0x2a8983[_0x5ddd54(0x2c8)]-0x1]['name']);}function rotateLogFiles(){const _0x2f304d=_0x202e98,_0x1671e7=fs[_0x2f304d(0x1be)](logspath+_0x2f304d(0x197)),_0x3203ef=_0x1671e7[_0x2f304d(0x2d0)]/0x400;if(_0x3203ef>0x64){let _0x3d667c=fs[_0x2f304d(0x2f7)](logspath,{'withFileTypes':!![]});_0x3d667c[_0x2f304d(0x1cc)]((_0xeeea58,_0x35c41e)=>_0xeeea58[_0x2f304d(0x2d2)]<_0x35c41e[_0x2f304d(0x2d2)]?0x1:_0x35c41e[_0x2f304d(0x2d2)]<_0xeeea58[_0x2f304d(0x2d2)]?-0x1:0x0),_0x3d667c[_0x2f304d(0x253)](_0x599944=>{const _0x47f853=_0x2f304d;if(_0x599944['name']==_0x47f853(0x1fc))fs['copyFileSync'](logspath+_0x599944[_0x47f853(0x2d2)],logspath+_0x47f853(0x1b1));if(_0x599944['name']==_0x47f853(0x186))fs['copyFileSync'](logspath+_0x599944[_0x47f853(0x2d2)],logspath+_0x47f853(0x1fc));_0x599944[_0x47f853(0x2d2)]==_0x47f853(0x197)&&(fs[_0x47f853(0x165)](logspath+_0x599944['name'],logspath+_0x47f853(0x186)),fs['writeFileSync'](logspath+_0x599944[_0x47f853(0x2d2)],''));});}}function _0x1acd(_0xf1deae,_0x2a8de2){const _0x5cfd97=_0x11ef();return _0x1acd=function(_0x33f5fd,_0x4d8e26){_0x33f5fd=_0x33f5fd-0x110;let _0x11ef60=_0x5cfd97[_0x33f5fd];return _0x11ef60;},_0x1acd(_0xf1deae,_0x2a8de2);}async function zipFiles(_0xf53774){const _0x2f5304=_0x202e98;let _0x1e468d;if(_0xf53774==_0x2f5304(0x154))_0x1e468d=logspath;if(_0xf53774==_0x2f5304(0x2bb))_0x1e468d=configpath;if(_0xf53774==_0x2f5304(0x25f))_0x1e468d=configpath;let _0x42c375=fs[_0x2f5304(0x2f7)](_0x1e468d,{'withFileTypes':!![]});const _0x36b754=new require(_0x2f5304(0x222))();_0x42c375['forEach'](_0x1861fb=>{const _0x29e269=_0x2f5304;if(!_0x1861fb[_0x29e269(0x1a2)]()){let _0x4ae317=fs[_0x29e269(0x173)](_0x1e468d+_0x1861fb[_0x29e269(0x2d2)]);if(_0xf53774=='backup'){const _0x205fc3=/^bot-[0-9]{3}-config.json$/,_0x6ddcff=_0x205fc3[_0x29e269(0x19f)](_0x1861fb[_0x29e269(0x2d2)]);if(_0x6ddcff){const _0x238545=JSON[_0x29e269(0x161)](_0x4ae317);if(_0x238545[_0x29e269(0x218)][0x0]){_0x238545[_0x29e269(0x218)][0x0]['apiKey']='***',_0x238545['bot'][0x0][_0x29e269(0x2b6)]=_0x29e269(0x208);if(_0x238545[_0x29e269(0x218)][0x0][_0x29e269(0x1d2)])_0x238545['bot'][0x0][_0x29e269(0x1d2)]='***';}_0x4ae317=JSON[_0x29e269(0x264)](_0x238545,null,0x2);}if(_0x1861fb[_0x29e269(0x2d2)]==_0x29e269(0x23c)){const _0x1a1fd5=JSON[_0x29e269(0x161)](_0x4ae317);if(_0x1a1fd5[_0x29e269(0x24c)]['loginRequired'])_0x1a1fd5[_0x29e269(0x24c)][_0x29e269(0x265)]=![];if(_0x1a1fd5[_0x29e269(0x24c)][_0x29e269(0x144)])_0x1a1fd5[_0x29e269(0x24c)]['bbPassword']=_0x29e269(0x208);if(_0x1a1fd5['settings']['telegramToken'])_0x1a1fd5[_0x29e269(0x24c)][_0x29e269(0x21b)]='***';if(_0x1a1fd5['settings'][_0x29e269(0x2d4)])_0x1a1fd5[_0x29e269(0x24c)][_0x29e269(0x2d4)]=null;_0x4ae317=JSON[_0x29e269(0x264)](_0x1a1fd5,null,0x2);}if(_0x1861fb[_0x29e269(0x2d2)]!=_0x29e269(0x14e))_0x36b754['file'](_0x1861fb[_0x29e269(0x2d2)],_0x4ae317);}else _0x36b754[_0x29e269(0x2aa)](_0x1861fb[_0x29e269(0x2d2)],_0x4ae317);}});const _0x1c8618=_0x36b754['generate']({'base64':![],'compression':_0x2f5304(0x20d)});fs[_0x2f5304(0x1a1)](zippath+(_0xf53774+_0x2f5304(0x237)),_0x1c8618,_0x2f5304(0x20a));}async function unzipFile(_0x44f88d,_0x2217f8){const _0x2c0e54=_0x202e98;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x2c0e54(0x253)](_0x18f1ca=>{const _0x38d712=_0x2c0e54;if(!_0x18f1ca[_0x38d712(0x1a2)]())fs[_0x38d712(0x1fd)](configpath+_0x18f1ca[_0x38d712(0x2d2)]);});const _0x44b8d8=fs[_0x2c0e54(0x173)](_0x44f88d+_0x2217f8,_0x2c0e54(0x20a)),_0x4ad563=new require('node-zip')(_0x44b8d8,{'base64':![],'checkCRC32':!![]});Object[_0x2c0e54(0x13a)](_0x4ad563[_0x2c0e54(0x2d9)])['forEach'](_0x449580=>{const _0x53ddb7=_0x2c0e54,_0x57c149=_0x4ad563['files'][_0x449580];fs['writeFileSync'](configpath+_0x57c149[_0x53ddb7(0x2d2)],_0x57c149[_0x53ddb7(0x25e)]);}),fs[_0x2c0e54(0x2f7)](temppath,{'withFileTypes':!![]})[_0x2c0e54(0x253)](_0x593a84=>{const _0x388781=_0x2c0e54;if(!_0x593a84[_0x388781(0x1a2)]())fs[_0x388781(0x1fd)](temppath+_0x593a84[_0x388781(0x2d2)]);}),logger[_0x2c0e54(0x2fb)]('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x29e8aa=>{});}async function getPublicIp(){const _0x21f3ae=_0x202e98;try{const _0x1329ab=await axios['get'](_0x21f3ae(0x1df));publicip=_0x1329ab[_0x21f3ae(0x254)]['ip'];}catch(_0x3d0c2b){}}async function triggerAnalytics(){const _0x3da009=_0x202e98;if(!publicip)await getPublicIp();const _0x131567=getBotsWithMode();let _0x14e9b0=0x0;_0x131567['forEach'](_0x44fec8=>{const _0x1d9487=_0x1acd;if(_0x44fec8[_0x1d9487(0x28c)]===_0x1d9487(0x25c))_0x14e9b0++;});const _0x14b22b=getBotExchanges();mixpanel[_0x3da009(0x27a)](_0x3da009(0x158),{'distinct_id':settings[_0x3da009(0x2b2)],'ip':publicip,'version':serverversion,'numbots':_0x131567['length'],'numbotsenabled':_0x14e9b0,'exchanges':_0x14b22b,'environment':environment});}async function getMessages(){const _0x14c944=_0x202e98,_0x3dae02=_0x14c944(0x17f),_0x25d809=new GraphQLClient(_0x3dae02),_0x4c4e4a={'authorization':_0x14c944(0x269)},_0x250d5d=serverversion[_0x14c944(0x2d5)]('.'),_0x399ea1=_0x250d5d[0x0]+'.'+_0x250d5d[0x1],_0x2c3334=Math[_0x14c944(0x2fa)](settings[_0x14c944(0x1d9)],settings['lastmsgemitted']),_0x263743={'last':parseInt(_0x2c3334),'bbm':_0x399ea1},_0x56f3f6=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x165886;try{_0x165886=await _0x25d809['request'](_0x56f3f6,_0x263743,_0x4c4e4a);}catch(_0x1233b4){}if(_0x165886&&_0x165886[_0x14c944(0x191)]){let _0x23d664=settings[_0x14c944(0x1d9)];newMessages=[];for(const _0x56078d of _0x165886[_0x14c944(0x191)]){newMessages[_0x14c944(0x2ef)](_0x56078d);let _0x2d1af1=![];_0x56078d['bbvNew']&&(updateSetting(_0x14c944(0x2e3),_0x56078d[_0x14c944(0x224)]),_0x2d1af1=isNewerVersion(serverversion,_0x56078d[_0x14c944(0x224)])||serverversion==_0x56078d[_0x14c944(0x224)]);if(!_0x2d1af1&&_0x56078d[_0x14c944(0x113)]>_0x23d664){if(_0x56078d[_0x14c944(0x2a2)]===_0x14c944(0x147)||serverversion[_0x14c944(0x283)](_0x56078d['bbvReceive'])){let _0xe80005=''+_0x56078d[_0x14c944(0x196)]+'\x0a\x0a'+_0x56078d[_0x14c944(0x12d)];const _0x3e5f9d=await sendTelegramMsg(toTelegramMarkdown(_0xe80005),_0x14c944(0x29d));if(_0x3e5f9d)_0x23d664=_0x56078d[_0x14c944(0x113)];}}}updateAvailable=isNewerVersion(settings[_0x14c944(0x2e3)],serverversion),updateSetting('lastmsgtelegram',_0x23d664),emitMessages();}}function emitMessages(){const _0x161252=_0x202e98,_0x1372ee=settings[_0x161252(0x1f8)];let _0x1ecd66=[];newMessages[_0x161252(0x253)](_0x32a8d7=>{const _0x4eef23=_0x161252;_0x32a8d7['number']>_0x1372ee&&_0x1ecd66[_0x4eef23(0x2ef)](_0x32a8d7);}),_0x1ecd66['length']>0x0&&getAllClients()[_0x161252(0x253)](_0x2554d5=>{const _0x4fe991=_0x161252;getSocket(_0x2554d5['id'])['emit'](_0x4fe991(0x12d),_0x1ecd66);});}function confirmMessage(_0x49e773){const _0x5a8084=_0x202e98;updateSetting(_0x5a8084(0x1f8),Number(_0x49e773));}function isNewerVersion(_0x1b473e,_0x5f4b30){const _0x2f5cf1=_0x202e98,_0x226c93=_0x5f4b30[_0x2f5cf1(0x2d5)]('.'),_0x871828=_0x1b473e[_0x2f5cf1(0x2d5)]('.');for(var _0x5d4463=0x0;_0x5d4463<_0x871828[_0x2f5cf1(0x2c8)];_0x5d4463++){const _0xc67eb=~~_0x871828[_0x5d4463],_0x48f4fa=~~_0x226c93[_0x5d4463];if(_0xc67eb>_0x48f4fa)return!![];if(_0xc67eb<_0x48f4fa)return![];}return![];}function toTelegramMarkdown(_0x5b64fc){const _0x212714=_0x202e98,_0xcf8a9d=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5f10cf=/\*{2}(.+?)\*{2}/gim;return _0x5b64fc=_0x5b64fc[_0x212714(0x2e8)](_0xcf8a9d,_0x212714(0x275))[_0x212714(0x2e8)](_0x5f10cf,_0x212714(0x284)),_0x5b64fc;}async function validateConfigFile(){const _0x1cc0eb=_0x202e98,_0x13080d=dbConfig[_0x1cc0eb(0x258)](_0x1cc0eb(0x2a3))[_0x1cc0eb(0x24e)](_0x1cc0eb(0x271))[_0x1cc0eb(0x247)]()||[];if(_0x13080d[_0x1cc0eb(0x2c8)]==0x0){let _0x223f44=0x0,_0x31807c=[];const _0x2a6dc7=/^bot-([0-9]{3})-config.json$/,_0x41df9c=fs['readdirSync'](configpath);_0x41df9c[_0x1cc0eb(0x253)](_0x2e26fc=>{const _0x99965=_0x1cc0eb,_0x1eaed6=_0x2a6dc7[_0x99965(0x122)](_0x2e26fc);if(_0x1eaed6){const _0x2073bc=_0x1eaed6[0x1];let _0x48eae1=getBotAttributes(_0x2073bc);_0x31807c[_0x99965(0x2ef)]({'botID':_0x2073bc,'botname':_0x48eae1[_0x99965(0x290)],'status':_0x99965(0x16d),'live':_0x99965(0x1b5)}),_0x223f44++;}}),_0x223f44!=0x0&&(dbConfig['get'](_0x1cc0eb(0x2a3))[_0x1cc0eb(0x2ce)](_0x31807c)[_0x1cc0eb(0x29e)](),config=_0x31807c,restoredConfigFile=_0x223f44);}}async function restoreConfigNotify(_0x1541f1){const _0x2f46cc=_0x202e98;let _0x160791;if(restoredConfigFile==0x1)_0x160791=_0x2f46cc(0x1a9);else _0x160791=_0x2f46cc(0x301);if(_0x1541f1)io['to']('botmanager')[_0x2f46cc(0x260)](_0x2f46cc(0x200),_0x160791);else{logger[_0x2f46cc(0x266)](_0x2f46cc(0x156)),logger[_0x2f46cc(0x266)](_0x160791),logger[_0x2f46cc(0x266)](_0x2f46cc(0x156)),logger[_0x2f46cc(0x266)]('');if(tgBot&&settings[_0x2f46cc(0x2d4)]&&settings[_0x2f46cc(0x296)]!=_0x2f46cc(0x23a))tgBot[_0x2f46cc(0x26c)](settings['telegramChatId'],_0x2f46cc(0x181)+_0x160791)['catch'](_0x84a89c=>{telegramError(_0x84a89c);});}}function validateCredentials(_0x32fc7a,_0x28aac8){const _0x2e691d=_0x202e98;if(_0x32fc7a[_0x2e691d(0x1bd)]==settings[_0x2e691d(0x1fa)]&&bcrypt[_0x2e691d(0x1e3)](_0x32fc7a['password'],settings['bbPassword'])){if(settings[_0x2e691d(0x1c9)])return{'allow':![],'reason':_0x2e691d(0x1a5),'token':null};else{const _0x13fa86=generateLoginToken(_0x28aac8);return{'allow':!![],'reason':_0x2e691d(0x273),'token':_0x13fa86};}}else return{'allow':![],'reason':_0x2e691d(0x23e),'token':null};}function refreshToken(_0x5c41a5){const _0x1d39bb=_0x202e98,_0x433552=generateLoginToken(_0x5c41a5);return{'allow':!![],'reason':_0x1d39bb(0x273),'token':_0x433552};}function validateAccess(_0x2a7768,_0x3771b9,_0x516b47){const _0xaf0d97=_0x202e98,_0x32d957=_0x516b47?_0x516b47:devices[_0x3771b9]['ip'];let _0xa022cb;const _0x3d97fa=_0x3b83d2=>{const _0x5652ed=_0x1acd;if(settings['loginRequired']){if(settings['f2aRequired']){if(telegram2FaApproved(_0x3771b9)){const _0x330b07=generateLoginToken(_0x3771b9);return{'allow':!![],'reason':_0x5652ed(0x1f1),'token':_0x330b07};}else return{'allow':![],'reason':_0x5652ed(0x223),'token':null};}else return _0xa022cb=validToken(_0x3b83d2,_0x3771b9),_0xa022cb[_0x5652ed(0x21d)](_0x5652ed(0x193))?{'allow':!![],'reason':_0x5652ed(0x214),'token':_0x3b83d2}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x5652ed(0x292),'token':null};};if(settings['whitelistEnabled']){let _0x301e93=[...settings[_0xaf0d97(0x297)],_0xaf0d97(0x132),_0xaf0d97(0x1d7),_0xaf0d97(0x2bd)];if(_0x301e93[_0xaf0d97(0x15f)](_0x32d957))return _0x3d97fa(_0x2a7768);else{_0xa022cb=validToken(_0x2a7768,_0x3771b9);if(_0xa022cb[_0xaf0d97(0x21d)]('success'))return _0x3d97fa(_0x2a7768);else{if(telegramIpApproved(_0x3771b9)){const _0x4a8a47=generateToken(_0x3771b9);return _0xa022cb=_0x3d97fa(_0x2a7768),_0xa022cb[_0xaf0d97(0x11d)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x4a8a47}:_0xa022cb;}else return settings[_0xaf0d97(0x1dc)]?{'allow':![],'reason':_0xaf0d97(0x131),'token':null}:{'allow':![],'reason':_0xaf0d97(0x13f),'token':null};}}}else return _0x3d97fa(_0x2a7768);}function timelyDecrypt(_0x170a3b,_0x4a5bd7=!![]){const _0x2421ba=_0x202e98;if(_0x170a3b)try{const _0x299bc7=crypt[_0x2421ba(0x162)](secure[_0x2421ba(0x2d6)],_0x170a3b)['message'],_0x21bd7e=_0x299bc7['split']('@')[0x0],_0x43af08=_0x299bc7[_0x2421ba(0x2d5)]('@')[0x1],_0x48aca8=new Date()[_0x2421ba(0x1c7)]();if(_0x4a5bd7){if(_0x48aca8-_0x43af08<maxSecretAge*0x3e8)return _0x21bd7e;else return![];}else return _0x21bd7e;}catch(_0x55cc8b){return![];}else return![];}const validToken=(_0x19c17f,_0x1679d1)=>{const _0x954d96=_0x202e98,_0x396f72=devices[_0x1679d1]['ip'];if(!_0x19c17f)return{'error':_0x954d96(0x1b0)};for(let _0x32a12a of blacklist){if(_0x32a12a[_0x954d96(0x291)]==_0x19c17f)return{'error':_0x954d96(0x29b)};}let _0x51abd8;try{_0x51abd8=jwt['verify'](_0x19c17f,secure[_0x954d96(0x121)]+_0x1679d1);}catch{return{'error':_0x954d96(0x1c8)};}if(!_0x51abd8['hasOwnProperty'](_0x954d96(0x180))&&!_0x51abd8[_0x954d96(0x21d)](_0x954d96(0x1bd))||!_0x51abd8[_0x954d96(0x21d)](_0x954d96(0x174)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x51abd8[_0x954d96(0x21d)](_0x954d96(0x1bd))&&_0x51abd8['hasOwnProperty'](_0x954d96(0x180))){const {clientip:_0xbb084d}=_0x51abd8;return _0x396f72==_0xbb084d?{'success':_0x954d96(0x178)}:{'error':_0x954d96(0x1ae)};}else{if(_0x51abd8['hasOwnProperty'](_0x954d96(0x1bd))&&_0x51abd8[_0x954d96(0x21d)](_0x954d96(0x180))){const {username:_0xe54b29,clientip:_0x4cda60}=_0x51abd8;return settings[_0x954d96(0x1fa)]==_0xe54b29&&_0x396f72==_0x4cda60?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x954d96(0x1c4)};}}},generateLoginToken=_0x215751=>{const _0x2d1c47=_0x202e98;if(_0x215751){const _0x317c8a=devices[_0x215751]['ip'];return jwt['sign']({'username':settings[_0x2d1c47(0x1fa)],'clientip':_0x317c8a},secure[_0x2d1c47(0x121)]+_0x215751,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xcc8ce7=>{const _0x1c3c31=_0x202e98;if(_0xcc8ce7){const _0x402fa3=devices[_0xcc8ce7]['ip'];return jwt[_0x1c3c31(0x141)]({'clientip':_0x402fa3},secure[_0x1c3c31(0x121)]+_0xcc8ce7,{'expiresIn':devices[_0xcc8ce7][_0x1c3c31(0x217)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x43881a=>{const _0x41109d=_0x202e98;let _0x52bc10=![];return devices[_0x43881a][_0x41109d(0x217)]&&devices[_0x43881a][_0x41109d(0x217)][_0x41109d(0x295)]!=_0x41109d(0x2df)&&(_0x52bc10=devices[_0x43881a]['telegramIpApproval'][_0x41109d(0x180)]==devices[_0x43881a]['ip']&&new Date()['getTime']()-devices[_0x43881a][_0x41109d(0x217)]['timestamp']<devices[_0x43881a]['telegramIpApproval'][_0x41109d(0x295)]*0x3c*0x3e8),_0x52bc10;},telegram2FaApproved=_0x2f8274=>{const _0x2acfa0=_0x202e98;let _0x100297=![];return devices[_0x2f8274][_0x2acfa0(0x243)]&&devices[_0x2f8274][_0x2acfa0(0x243)]['expiry']!='reject'&&(_0x100297=devices[_0x2f8274][_0x2acfa0(0x243)][_0x2acfa0(0x180)]==devices[_0x2f8274]['ip']&&new Date()[_0x2acfa0(0x1c7)]()-devices[_0x2f8274]['telegram2FaApproval']['timestamp']<devices[_0x2f8274][_0x2acfa0(0x243)][_0x2acfa0(0x295)]*0x3c*0x3e8),_0x100297;},normalizeIP=_0x3d72ba=>{const _0x546f8a=_0x202e98;let _0x4a4c40=null,_0x3b88bb=null;if(ipaddr[_0x546f8a(0x2b4)](_0x3d72ba)){const _0x2346e4=ipaddr[_0x546f8a(0x161)](_0x3d72ba);_0x2346e4['kind']()===_0x546f8a(0x2c2)?(_0x2346e4['isIPv4MappedAddress']()&&(_0x4a4c40=_0x2346e4[_0x546f8a(0x1a3)]()[_0x546f8a(0x2f1)]()),_0x3b88bb=_0x2346e4[_0x546f8a(0x2f1)]()):(_0x4a4c40=_0x2346e4[_0x546f8a(0x2f1)](),_0x3b88bb=_0x2346e4[_0x546f8a(0x134)]()[_0x546f8a(0x2f1)]());}return{'show':_0x4a4c40?_0x4a4c40:_0x3b88bb,'store':_0x3b88bb};};function formatDate(_0x5e7360){const _0x495d7a=_0x202e98;return _0x5e7360[_0x495d7a(0x2dd)]()+'/'+(_0x5e7360['getMonth']()+0x1)[_0x495d7a(0x2f1)]()[_0x495d7a(0x1f2)](0x2,'0')+'/'+_0x5e7360[_0x495d7a(0x252)]()[_0x495d7a(0x2f1)]()[_0x495d7a(0x1f2)](0x2,'0')+'\x20'+_0x5e7360[_0x495d7a(0x198)]()[_0x495d7a(0x2f1)]()[_0x495d7a(0x1f2)](0x2,'0')+':'+_0x5e7360['getMinutes']()[_0x495d7a(0x2f1)]()[_0x495d7a(0x1f2)](0x2,'0')+':'+_0x5e7360[_0x495d7a(0x2c6)]()['toString']()[_0x495d7a(0x1f2)](0x2,'0');}function sleep(_0xe3720a){return new Promise(_0x17cebb=>setTimeout(_0x17cebb,_0xe3720a));}