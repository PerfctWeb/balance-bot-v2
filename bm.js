const _0x29178c=_0x35dc;(function(_0x49bcda,_0x504b0f){const _0x3ed2c5=_0x35dc,_0x114470=_0x49bcda();while(!![]){try{const _0x1c3b23=-parseInt(_0x3ed2c5(0x2fb))/0x1*(parseInt(_0x3ed2c5(0x289))/0x2)+-parseInt(_0x3ed2c5(0x1fb))/0x3+-parseInt(_0x3ed2c5(0x2ab))/0x4*(-parseInt(_0x3ed2c5(0x2d3))/0x5)+parseInt(_0x3ed2c5(0x22d))/0x6*(-parseInt(_0x3ed2c5(0x2fe))/0x7)+parseInt(_0x3ed2c5(0x274))/0x8*(parseInt(_0x3ed2c5(0x2bb))/0x9)+-parseInt(_0x3ed2c5(0x209))/0xa*(parseInt(_0x3ed2c5(0x235))/0xb)+parseInt(_0x3ed2c5(0x300))/0xc;if(_0x1c3b23===_0x504b0f)break;else _0x114470['push'](_0x114470['shift']());}catch(_0x183d8c){_0x114470['push'](_0x114470['shift']());}}}(_0x1241,0x30dbb));const _0x5ac053=function(){let _0x588d50=!![];return function(_0x55eac2,_0x982062){const _0x500c5d=_0x588d50?function(){const _0x2ab484=_0x35dc;if(_0x982062){const _0xc04b7c=_0x982062[_0x2ab484(0x276)](_0x55eac2,arguments);return _0x982062=null,_0xc04b7c;}}:function(){};return _0x588d50=![],_0x500c5d;};}(),_0x4e9247=_0x5ac053(this,function(){const _0xeba8a1=_0x35dc;return _0x4e9247[_0xeba8a1(0x1e2)]()[_0xeba8a1(0x228)](_0xeba8a1(0x2b5))[_0xeba8a1(0x1e2)]()[_0xeba8a1(0x21c)](_0x4e9247)[_0xeba8a1(0x228)](_0xeba8a1(0x2b5));});_0x4e9247();'use strict';process[_0x29178c(0x2b0)]['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x29178c(0x335)),low=require(_0x29178c(0x243)),FileSync=require(_0x29178c(0x259)),path=require('path'),crypto=require(_0x29178c(0x21b)),Crypt=require(_0x29178c(0x255))['Crypt'],RSA=require(_0x29178c(0x255))[_0x29178c(0x21d)],bcrypt=require(_0x29178c(0x2bc)),jwt=require(_0x29178c(0x1cd)),ipaddr=require(_0x29178c(0x237)),argv=require(_0x29178c(0x264))(process[_0x29178c(0x1f7)][_0x29178c(0x2f7)](0x2))[_0x29178c(0x1f7)],uuidRandom=require('uuid-random'),TelegramBot=require(_0x29178c(0x280)),Mixpanel=require(_0x29178c(0x1ab)),axios=require(_0x29178c(0x2e9)),{GraphQLClient,gql}=require(_0x29178c(0x1d3)),util=require(_0x29178c(0x26b)),fileUpload=require(_0x29178c(0x214)),PORT=argv[_0x29178c(0x2dd)]||_0x29178c(0x2c4),pattern=/^[0-9]{2,4}$/;!pattern[_0x29178c(0x2cc)](PORT)&&(console['log'](_0x29178c(0x22e)+PORT+_0x29178c(0x251)),process[_0x29178c(0x224)](0x1));const HOST=argv[_0x29178c(0x2fa)]||null,userID=argv[_0x29178c(0x231)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x29178c(0x22a),configfile=_0x29178c(0x242),settingsfile=_0x29178c(0x2c6),securefile=_0x29178c(0x19d);let validInstallation=!![];!fs[_0x29178c(0x1e8)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+_0x29178c(0x18e)+userID+'/':bbpath+_0x29178c(0x18e),configbackuppath=configpath+_0x29178c(0x2d7),logspath=userID?bbpath+'logs/'+userID+'/':bbpath+_0x29178c(0x225),zippath=userID?bbpath+_0x29178c(0x20f)+userID+'/':bbpath+_0x29178c(0x20f),loggerfile=fs[_0x29178c(0x275)](logspath+_0x29178c(0x2f8),{'flags':'a'}),temppath=userID?bbpath+_0x29178c(0x28b)+userID+'/':bbpath+_0x29178c(0x28b);!fs[_0x29178c(0x1e8)](configpath)&&fs[_0x29178c(0x336)](configpath);!fs[_0x29178c(0x1e8)](configbackuppath)&&fs[_0x29178c(0x336)](configbackuppath);!fs[_0x29178c(0x1e8)](logspath)&&fs[_0x29178c(0x336)](logspath);!fs[_0x29178c(0x1e8)](zippath)&&fs[_0x29178c(0x336)](zippath);!fs[_0x29178c(0x1e8)](temppath)&&fs[_0x29178c(0x336)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x29178c(0x24c)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x29178c(0x24c)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x29178c(0x320)}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x29178c(0x24c)]({'secure':{},'blacklist':[]})[_0x29178c(0x30b)]();let crypt=new Crypt({'md':_0x29178c(0x2c1),'rsaStandard':_0x29178c(0x21a)});const saltRounds=0xa,mixpanel=Mixpanel[_0x29178c(0x208)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x29178c(0x19b)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x29178c(0x25c)]&&settings[_0x29178c(0x25c)]!=''&&settings[_0x29178c(0x30d)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x3553fe=>{const _0x970126=_0x29178c;console[_0x970126(0x27a)](_0x3553fe);},'simple':_0x1e6b2e=>{const _0x45e184=_0x29178c;console['log'](_0x1e6b2e),loggerfile[_0x45e184(0x30b)](util[_0x45e184(0x1c1)](_0x1e6b2e)+'\x0a');},'full':async _0x8c818e=>{const _0x228c12=_0x29178c,_0x15d798=getTimeStamp()+_0x228c12(0x24f)+_0x8c818e;console[_0x228c12(0x27a)](_0x15d798),loggerfile['write'](util[_0x228c12(0x1c1)](_0x15d798)+'\x0a');if(tgBot&&settings[_0x228c12(0x322)]&&settings[_0x228c12(0x216)]!=_0x228c12(0x2ef))await tgBot[_0x228c12(0x2da)](settings['telegramChatId'],_0x228c12(0x1d4)+_0x8c818e)[_0x228c12(0x1ec)](_0x405082=>{telegramError(_0x405082);});}};process['on'](_0x29178c(0x2a5),function(_0x222688){const _0x56ca96=_0x29178c;logger[_0x56ca96(0x254)](_0x222688);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x29178c(0x1a3))[_0x29178c(0x1e7)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x29178c(0x207)),app=express(),http=require(_0x29178c(0x291))[_0x29178c(0x1a1)](app);app['use'](fileUpload({'useTempFiles':!![]})),app[_0x29178c(0x32d)](_0x29178c(0x1b3),async(_0x558e22,_0x201db7)=>{const _0x575c6a=_0x29178c,_0x1d8990=_0x558e22[_0x575c6a(0x223)][_0x575c6a(0x32b)],_0x552b64=getClientsWithBotID(_0x575c6a(0x2a7)),_0x358fd=_0x558e22['headers'][_0x575c6a(0x2cb)],_0x28396d=timelyDecrypt(_0x358fd,![]),_0x26b2d4=_0x552b64[_0x575c6a(0x25e)](_0x16b33d=>_0x16b33d['uuid']==_0x28396d);if(_0x26b2d4){const _0x1fd092=normalizeIP(_0x558e22[_0x575c6a(0x29a)]['remoteAddress'])[_0x575c6a(0x2f4)],_0x143e8b=_0x558e22['headers']['tkn'];if(validateAccess(_0x143e8b,_0x28396d,_0x1fd092)[_0x575c6a(0x29f)])await zipFiles(_0x1d8990),_0x201db7[_0x575c6a(0x282)](zippath+(_0x1d8990+_0x575c6a(0x238)),_0x4169b8=>{const _0x6a252c=_0x575c6a;_0x4169b8&&(logger[_0x6a252c(0x206)](_0x6a252c(0x1cf)+_0x1d8990),logger[_0x6a252c(0x254)](_0x4169b8));});else logger['full'](_0x575c6a(0x2e3)+_0x1d8990+_0x575c6a(0x1e6));}else logger[_0x575c6a(0x206)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x1d8990+_0x575c6a(0x2d0));}),app[_0x29178c(0x2e2)]('/upload-backup',async(_0x23b960,_0x388614)=>{const _0x480449=_0x29178c,_0x3bfd6c=getClientsWithBotID(_0x480449(0x2a7)),_0x44d534=_0x23b960['headers'][_0x480449(0x2cb)],_0x25fd56=timelyDecrypt(_0x44d534,![]),_0xd9ab38=_0x3bfd6c[_0x480449(0x25e)](_0x4692c5=>_0x4692c5['uuid']==_0x25fd56);if(_0xd9ab38){const _0x1d966f=normalizeIP(_0x23b960[_0x480449(0x29a)][_0x480449(0x23e)])[_0x480449(0x2f4)],_0x14481b=_0x23b960[_0x480449(0x2c2)][_0x480449(0x1b0)];if(validateAccess(_0x14481b,_0x25fd56,_0x1d966f)[_0x480449(0x29f)]){if(_0x23b960['files']){const _0x4daf13=_0x23b960[_0x480449(0x265)][_0x480449(0x196)];await _0x4daf13['mv'](temppath+_0x4daf13[_0x480449(0x323)]),_0x388614['send']({'status':!![],'message':_0x480449(0x1bd)}),confirmRestore(temppath,_0x4daf13[_0x480449(0x323)]);}}else logger['full'](_0x480449(0x299));}else logger[_0x480449(0x206)](_0x480449(0x315));}),app[_0x29178c(0x2d1)](express['static'](path[_0x29178c(0x2b1)](__dirname,bbpath2,_0x29178c(0x286)))),app['use'](express['static'](path[_0x29178c(0x2b1)](__dirname,bbpath2,_0x29178c(0x247)))),app[_0x29178c(0x32d)]('/',function(_0x500b49,_0x4368e7){const _0x586164=_0x29178c;_0x4368e7[_0x586164(0x2e8)](path[_0x586164(0x2b1)](__dirname,bbpath2,'build2','index.html'));}),app['get']('/:bot',function(_0x504e6f,_0x330ac6){const _0x587d50=_0x29178c;_0x330ac6['sendFile'](path['join'](__dirname,bbpath2,'build',_0x587d50(0x30f)));}),app['get'](_0x29178c(0x30e),(_0x4ef53c,_0x89c94f)=>{const _0x49f501=_0x29178c;_0x89c94f['sendFile'](path[_0x49f501(0x2b1)](__dirname,bbpath2,_0x49f501(0x247),_0x49f501(0x30f)));}),app[_0x29178c(0x32d)]('/:bot/performance',(_0x4f4e73,_0x26c971)=>{const _0x4dc414=_0x29178c;_0x26c971['sendFile'](path[_0x4dc414(0x2b1)](__dirname,bbpath2,_0x4dc414(0x247),_0x4dc414(0x30f)));}),app['get'](_0x29178c(0x326),(_0x5e2ef2,_0x2509e4)=>{const _0x228cc8=_0x29178c;_0x2509e4[_0x228cc8(0x2e8)](path[_0x228cc8(0x2b1)](__dirname,bbpath2,'build',_0x228cc8(0x30f)));}),app[_0x29178c(0x32d)](_0x29178c(0x305),(_0x1a67e2,_0x39619d)=>{const _0x191453=_0x29178c;_0x39619d[_0x191453(0x2e8)](path[_0x191453(0x2b1)](__dirname,bbpath2,_0x191453(0x247),_0x191453(0x30f)));}),app[_0x29178c(0x32d)](_0x29178c(0x1b9),(_0x5515d2,_0x303d01)=>{const _0x486e18=_0x29178c;_0x303d01[_0x486e18(0x2e8)](path[_0x486e18(0x2b1)](__dirname,bbpath2,_0x486e18(0x247),_0x486e18(0x30f)));}),app[_0x29178c(0x32d)]('/:bot/support',(_0x3e9c39,_0x4033df)=>{const _0x38cfe0=_0x29178c;_0x4033df[_0x38cfe0(0x2e8)](path[_0x38cfe0(0x2b1)](__dirname,bbpath2,'build',_0x38cfe0(0x30f)));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x29178c(0x25b))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x37ee4d=_0x29178c;logger['simple'](''),logger[_0x37ee4d(0x254)](_0x37ee4d(0x20b)),await logger[_0x37ee4d(0x206)]('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),logger[_0x37ee4d(0x254)](_0x37ee4d(0x20b));if(config[_0x37ee4d(0x1d7)]!=0x0)for(const _0x13cb80 of config){if(_0x13cb80[_0x37ee4d(0x1c5)]=='enabled'||_0x13cb80[_0x37ee4d(0x1c5)]==_0x37ee4d(0x256))await logger['full'](_0x37ee4d(0x2fc)+_0x13cb80[_0x37ee4d(0x222)]+'\x20|\x20'+_0x13cb80[_0x37ee4d(0x2bf)]),startBot([_0x13cb80[_0x37ee4d(0x222)],userID],{'cwd':bbpath},function(_0x477df0){if(_0x477df0)logger['full'](_0x477df0);});else(_0x13cb80[_0x37ee4d(0x1c5)]=='disabled'||_0x13cb80[_0x37ee4d(0x1c5)]==_0x37ee4d(0x2de))&&await logger[_0x37ee4d(0x206)](_0x37ee4d(0x2c8)+_0x13cb80[_0x37ee4d(0x222)]+_0x37ee4d(0x2f6)+_0x13cb80[_0x37ee4d(0x2bf)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x37ee4d(0x254)](_0x37ee4d(0x20b)),logger['simple']('');}function _0x1241(){const _0x384991=['whitelist','mixpanel','getDate','add-bot','getMinutes','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','tkn','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','cancel-loading','/download/:type','get-starting-balances','Unauthorized\x20attempt\x20to\x20get\x20logs','auth','get-portfolio','*$1*','/:bot/configuration','expiry','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','userid','File\x20uploaded','warning','referer','reload','format','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','blacklist','manual','status','login','remove','apiKey','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','once','hex','bbPassword','jsonwebtoken','Notifications\x20enabled\x0a','Failed\x20to\x20download\x20','clientip','logout','backup','graphql-request','Bot\x20Mgr\x20>\x20','filter','Invalid\x20authentication\x20token\x20(1)','length','reason','\x20mode','Notifications\x20types:\x20','sendPortfolioTelegram','Notifications\x20disabled\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Bot\x20','push','isDirectory','User\x20has\x20been\x20validated','toString','/disable\x20-\x20disable\x20notifications\x0a','emitHistory','Alerts','\x20(1)','version','existsSync','stopPolling','readdirSync','whitelistEnabled','catch','************','store-headless','max','callback_query','::ffff:127.0.0.1','deleteHistoryAlerts','error','<b>Balance\x20Bot\x20Status:</b>\x0a','enabled\x20Bot\x20','timestamp','argv','polling_error','disconnect','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','373251xmPjlX','temporary\x20token\x20generated','bbvReceive','telegrammsg','match','Unauthorized\x20attempt\x20to\x20log\x20out','mode','forEach',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','telegram','full','express','init','10wBNOSO','isIPv4MappedAddress','-----------------------------------------------------------------------------------','Unauthorized\x20attempt\x20to\x20confirm\x20message','map','/status\x20-\x20show\x20bot(s)\x20status\x0a','zip/','chat','settings.','decrypt','$1_$2_$3','express-fileupload','\x20minutes','telegramEvents','Notifications\x20disabled','readFileSync','You\x20can\x20use\x20the\x20following\x20commands:\x0a','RSA-OAEP','crypto','constructor','RSA','access','randomBytes','loginRequired','/restart\x20-\x20restart\x20bot(s)\x0a','botID','params','exit','logs/','bbvNew','2FA\x20login\x20required','search','enabled','bot.js','Your\x20installation\x20is\x20already\x20up\x20to\x20date','No\x20bots\x20running\x20right\x20now','6qWTfbq','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','assign','user','temporary\x20access\x20rejected','Login\x20accepted','updatebotmanager','2552946PmAgKw','min','ipaddr.js','.zip','answerCallbackQuery','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','token','output-000.log','parse','remoteAddress','messages','replace','/enable\x20-\x20enable\x20notifications\x0a','bb-config.json','lowdb','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','stop','login\x20required','build','get-messages','randomFillSync','All','keys','defaults','running','username',':\x20Bot\x20Mgr\x20>\x20','removeAllListeners',',\x20must\x20be\x20a\x204\x20digit\x20number','then','Access\x20enabled\x20for\x20','simple','hybrid-crypto-js','new','kind','getMonth','lowdb/adapters/FileSync','telegramIpApproval','socket.io','telegramToken','Restore\x20process\x20aborted','find','30\x20min','publicKey','Allow\x20login\x20from\x20IP\x20address\x20<b>','stringify','all','yargs/yargs','files','storeConfiguration','<b>Telegram\x20Bot\x20Status:</b>\x0a','unlinkSync','invalid\x20credentials','store-settings','util','HTML','/update\x20-\x20update\x20Balance\x20Bot\x0a','pidRefreshToken','secure','login\x20token\x20generated','isValid','No\x20authentication\x20token','login\x20not\x20required','258872pIVIhd','createWriteStream','apply','disabled','2FA\x20login\x20rejected','2FA\x20required','log','inherit','yes','access\x20timeout','getTime','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','node-telegram-bot-api','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','download','accept','toIPv4MappedAddress','padStart','build2','message','event','2680BTrmdJ','error\x20while\x20deleting\x20config\x20files:\x20','temp/','telegram2FaApproval','showname','place-order','getSeconds','reject','http','send','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','SIGTERM','toggle-bot-mode','exec','hasOwnProperty','Unauthorized\x20attempt\x20to\x20delete\x20bot','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','socket','/on\x20-\x20start\x20bot(s)\x0a','writeFileSync','size','split','allow','ipc','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','logged\x20out','2FA','headless','uncaughtException','DEFLATE','botmanager','Invalid\x20Telegram\x20token','Starting\x20Balance\x20Bot\x20update','number','31940Dlkpws','store-configuration','/off\x20-\x20stop\x20bot(s)\x0a','notification','/names\x20-\x20show\x20bot\x20names\x0a','env','join','hashSync','confirm-message','-config.json','(((.+)+)+)+$','bot','data','pidExpireLogin','node-zip','getUTCHours','9EgOGXt','bcryptjs','\x20>\x20','value','botname','getHours','sha256','headers','\x20to\x20','3000','\x20only\x0a','bb-settings.json','exp','idling\x20bot\x20\x20\x20|\x20Bot\x20','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Invalid\x20authentication\x20token\x20(2)','uuid','test','handshake','_data','placeOrder','\x20(2)','use','request','185ymzGTr','emit','404\x20Not\x20Found','getPortfolio','backup/','output-002.log','cloneDeep','sendMessage','Unauthorized\x20attempt\x20to\x20update\x20settings','All\x20bots\x20running\x20right\x20now','port','new-disabled','Unauthorized\x20attempt\x20to\x20add\x20bot','show','alerts','post','Unauthorized\x20attempt\x20to\x20download\x20','f2aRequired','live','reset-password','1000','sendFile','axios','output-001.log','secret','getFullYear','Unauthorized\x20attempt\x20to\x20store\x20configuration','timeshift','orders','</b>\x20?','Notifications\x20enabled','sign','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','store','track','\x20|\x20','slice','/output-000.log','success','host','68DjLjks','starting\x20bot\x20|\x20Bot\x20','kill','2702119pouqeH','toggleBotMode','8471508DjBoDd','onText','Unauthorized\x20attempt\x20to\x20delete\x20alerts','restarting\x20Bot\x20','127.0.0.1','/:bot/history','conn','stopped','order','bots','add','write','Unauthorized\x20attempt\x20to\x20get\x20portfolio','telegramUsername','/:bot/portfolio','index.html','Yes','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','generate','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','bbUsername','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','2FA\x20login\x20token\x20generated','settings','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','https://api.ipify.org?format=json','Unauthorized\x20attempt\x20to\x20update\x20bot','5\x20min','title','includes','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','privateKey','0.0.0','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','telegramChatId','name','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','compareSync','/:bot/coins','set','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','telegramEnabled','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','type','bot-','get','removeListener','Unauthorized\x20login\x20attempt\x20(timeout)','update-bot','rmSync','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','apiSecret','SIGINT','date-fns','mkdirSync','copyFileSync','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','config/','storeHeadless','All\x20bots','Orders','Password\x20has\x20been\x20reset\x20to:\x20','from','***','sortBy','backupfile','latestversion','started','lastmsgtelegram','15\x20min','api-eu.mixpanel.com','lastmsgemitted','bb-secure.json','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','sockets','password','createServer','update-bb','version.json','-results.json','starting\x20new\x20bot\x20|\x20Bot\x20','connected','auto','delete-bot','deleted\x20Bot\x20'];_0x1241=function(){return _0x384991;};return _0x1241();}function startSocket(){io['on']('connection',_0x3926e2=>{const _0x4b7809=_0x35dc;let _0x765731,_0x5e7147,_0x32c689,_0x2a0c42,_0x12d237;const _0x18f42c=_0x3926e2[_0x4b7809(0x2cd)][_0x4b7809(0x2c2)][_0x4b7809(0x1bf)];_0x5e7147=_0x18f42c[_0x4b7809(0x1ff)](/bot[0-9]{3}/);if(_0x5e7147)_0x32c689=_0x5e7147[0x0]['match'](/[0-9]{3}/);if(_0x32c689)_0x765731=_0x32c689[0x0];else _0x765731=_0x4b7809(0x2a7);const _0x4d6a06=_0x3926e2['handshake'][_0x4b7809(0x1b6)]['encryptedUuid'];if(!_0x4d6a06)_0x3926e2[_0x4b7809(0x2d4)](_0x4b7809(0x1c5),{'publicKey':secure[_0x4b7809(0x260)]});else{_0x2a0c42=timelyDecrypt(_0x4d6a06,![]);if(!_0x2a0c42)_0x3926e2[_0x4b7809(0x2d4)](_0x4b7809(0x1c5),{'publicKey':secure[_0x4b7809(0x260)]});else{_0x12d237=normalizeIP(_0x3926e2[_0x4b7809(0x306)][_0x4b7809(0x23e)])[_0x4b7809(0x2f4)];if(!devices[_0x2a0c42])devices[_0x2a0c42]={'uuid':_0x2a0c42,'access':{'token':null}};devices[_0x2a0c42]['ip']=_0x12d237;const _0x26c1c3=addClient(_0x3926e2['id'],_0x2a0c42,_0x765731);setAccess(_0x26c1c3),emitMessages(),_0x3926e2['on']('login',_0x4e6487=>{const _0x5a6f6d=_0x4b7809,_0x5b2b64=timelyDecrypt(_0x4e6487['password']);if(_0x5b2b64){_0x4e6487={'username':_0x4e6487[_0x5a6f6d(0x24e)],'password':_0x5b2b64},devices[_0x2a0c42][_0x5a6f6d(0x21e)]=validateCredentials(_0x4e6487,_0x2a0c42);if(devices[_0x2a0c42][_0x5a6f6d(0x21e)]['allow']==![]&&devices[_0x2a0c42][_0x5a6f6d(0x21e)][_0x5a6f6d(0x1d8)]==_0x5a6f6d(0x227))_0x3926e2[_0x5a6f6d(0x2d4)]('status',{'access':devices[_0x2a0c42][_0x5a6f6d(0x21e)]}),loginAccess2FA(_0x2a0c42,_0x12d237);else{if(devices[_0x2a0c42][_0x5a6f6d(0x21e)][_0x5a6f6d(0x29f)]==![]&&devices[_0x2a0c42]['access'][_0x5a6f6d(0x1d8)]=='invalid\x20credentials')_0x3926e2['emit'](_0x5a6f6d(0x1c5),{'access':devices[_0x2a0c42]['access']});else devices[_0x2a0c42]['access'][_0x5a6f6d(0x29f)]&&devices[_0x2a0c42][_0x5a6f6d(0x21e)]['reason']==_0x5a6f6d(0x270)&&(getClientsWithUuid(_0x2a0c42)[_0x5a6f6d(0x202)](_0xb81728=>{setAccess(_0xb81728);}),setTokenRefresh(_0x2a0c42),setSessionTimeout('login',_0x2a0c42));}}else logger[_0x5a6f6d(0x206)](_0x5a6f6d(0x32f));}),_0x3926e2['on'](_0x4b7809(0x2e6),()=>{resetPassword();}),_0x3926e2['on']('disconnect',_0x5e3cde=>{removeClient(_0x3926e2['id']);}),_0x765731=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x1cf473){const _0x2a0f8e=_0x29178c;if(_0x1cf473!=_0x2a0f8e(0x2a7)&&config['apiKey']!=''){if(pid[_0x1cf473])pid[_0x1cf473][_0x2a0f8e(0x292)]({'function':'initclient','args':null});}}function reloadBotManager(){const _0xee9eba=_0x29178c;getClientsWithBotID(_0xee9eba(0x2a7))[_0xee9eba(0x202)](_0x4d88c5=>{const _0x416bac=_0xee9eba;getSocket(_0x4d88c5['id'])[_0x416bac(0x2d4)](_0x416bac(0x1c5),{'access':{'allow':![],'reason':'reload','token':null}});});}function getSocket(_0x12fc3a){const _0x5ebf16=_0x29178c;return io[_0x5ebf16(0x19f)]['sockets'][_0x5ebf16(0x32d)](_0x12fc3a);}function setAccess(_0x1a486a){const _0x3da107=_0x29178c,_0x2df2d4=getSocket(_0x1a486a['id']),_0x5ed7f9=_0x1a486a[_0x3da107(0x2cb)],_0x21596f=_0x1a486a['bot'];devices[_0x5ed7f9][_0x3da107(0x21e)]=validateAccess(devices[_0x5ed7f9][_0x3da107(0x21e)]['token'],_0x5ed7f9),_0x2df2d4[_0x3da107(0x2b1)](_0x5ed7f9);if(devices[_0x5ed7f9][_0x3da107(0x21e)][_0x3da107(0x29f)]){_0x2df2d4[_0x3da107(0x2b1)](_0x21596f);if(_0x21596f=='botmanager')initializeSocketBotManager(_0x2df2d4);else initializeSocketBot(_0x2df2d4);initClient(_0x21596f);}devices[_0x5ed7f9][_0x3da107(0x21e)]['token']&&devices[_0x5ed7f9][_0x3da107(0x21e)][_0x3da107(0x1d8)]==_0x3da107(0x1fc)&&setSessionTimeout(_0x3da107(0x2a3),_0x5ed7f9),devices[_0x5ed7f9][_0x3da107(0x21e)][_0x3da107(0x23b)]&&devices[_0x5ed7f9][_0x3da107(0x21e)][_0x3da107(0x1d8)]==_0x3da107(0x316)&&setSessionTimeout(_0x3da107(0x1c6),_0x5ed7f9),_0x2df2d4['emit'](_0x3da107(0x1c5),{'status':_0x1a486a['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5ed7f9][_0x3da107(0x21e)],'externalip':devices[_0x5ed7f9]['ip'],'publicKey':secure[_0x3da107(0x260)],'userid':settings[_0x3da107(0x1bc)],'validInstallation':validInstallation}),devices[_0x5ed7f9]['access'][_0x3da107(0x29f)]==![]&&devices[_0x5ed7f9][_0x3da107(0x21e)][_0x3da107(0x1d8)]==_0x3da107(0x279)&&temporaryAccess2FA(_0x5ed7f9,devices[_0x5ed7f9]['ip']);}function setSessionTimeout(_0x1c3b6f,_0x52df6a){const _0x4a133e=_0x29178c;let _0x163b25;if(_0x1c3b6f==_0x4a133e(0x1c6))_0x163b25=loginExpiry*0x3c*0x3e8;else _0x163b25=devices[_0x52df6a][_0x4a133e(0x25a)][_0x4a133e(0x1ba)]*0x3c*0x3e8-(new Date()[_0x4a133e(0x27e)]()-devices[_0x52df6a][_0x4a133e(0x25a)]['timestamp']);if(devices[_0x52df6a][_0x4a133e(0x2b8)])clearTimeout(devices[_0x52df6a][_0x4a133e(0x2b8)]);devices[_0x52df6a][_0x4a133e(0x2b8)]=setTimeout(()=>{const _0x4c5fd5=_0x4a133e;if(devices[_0x52df6a][_0x4c5fd5(0x26e)])clearTimeout(devices[_0x52df6a][_0x4c5fd5(0x26e)]);removeSocketListeners(_0x52df6a),addBlacklist(_0x52df6a),devices[_0x52df6a][_0x4c5fd5(0x25a)]=null,devices[_0x52df6a][_0x4c5fd5(0x28c)]=null,devices[_0x52df6a][_0x4c5fd5(0x21e)][_0x4c5fd5(0x23b)]=null,devices[_0x52df6a][_0x4c5fd5(0x21e)]=validateAccess(devices[_0x52df6a]['access']['token'],_0x52df6a),!(devices[_0x52df6a][_0x4c5fd5(0x21e)][_0x4c5fd5(0x29f)]&&devices[_0x52df6a][_0x4c5fd5(0x21e)][_0x4c5fd5(0x1d8)]==_0x4c5fd5(0x273))&&(_0x1c3b6f==_0x4c5fd5(0x1c6)?io['to'](_0x52df6a)[_0x4c5fd5(0x2d4)](_0x4c5fd5(0x1c5),{'access':{'allow':![],'reason':_0x4c5fd5(0x27d),'token':null}}):io['to'](_0x52df6a)[_0x4c5fd5(0x2d4)](_0x4c5fd5(0x1c5),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x52df6a][_0x4c5fd5(0x21e)][_0x4c5fd5(0x23b)]=null;},_0x163b25);}function setTokenRefresh(_0x4bf102){const _0x4f9fcd=_0x29178c;if(devices[_0x4bf102][_0x4f9fcd(0x26e)])clearTimeout(devices[_0x4bf102][_0x4f9fcd(0x26e)]);devices[_0x4bf102]['pidRefreshToken']=setTimeout(()=>{const _0x3fa8e7=_0x4f9fcd;getClientsWithUuid(_0x4bf102)[_0x3fa8e7(0x1d7)]!=0x0?(devices[_0x4bf102]['access']=refreshToken(_0x4bf102),io['to'](_0x4bf102)[_0x3fa8e7(0x2d4)](_0x3fa8e7(0x1c5),{'status':_0x3fa8e7(0x1a6),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4bf102]['access'],'externalip':devices[_0x4bf102]['ip'],'publicKey':secure[_0x3fa8e7(0x260)],'validInstallation':validInstallation}),setTokenRefresh(_0x4bf102)):clearTimeout(devices[_0x4bf102][_0x3fa8e7(0x26e)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4b77c9){const _0x19baa8=_0x29178c,_0x1f9c80=getClient(_0x4b77c9['id'])[_0x19baa8(0x2cb)];_0x4b77c9['emit'](_0x19baa8(0x309),config),_0x4b77c9[_0x19baa8(0x2d4)](_0x19baa8(0x317),cleanSettings()),_0x4b77c9['on'](_0x19baa8(0x1ad),_0x46f3e9=>{const _0x258049=_0x19baa8;if(validateAccess(_0x46f3e9,_0x1f9c80)[_0x258049(0x29f)])addBot();else logger[_0x258049(0x206)](_0x258049(0x2df));}),_0x4b77c9['on'](_0x19baa8(0x330),(_0x3ceaed,_0x4f56f8)=>{const _0x32d993=_0x19baa8;if(validateAccess(_0x4f56f8,_0x1f9c80)[_0x32d993(0x29f)])toggleBot(_0x3ceaed['botID'],_0x3ceaed[_0x32d993(0x1c5)],_0x3ceaed[_0x32d993(0x2e5)]);else logger[_0x32d993(0x206)](_0x32d993(0x31a));}),_0x4b77c9['on'](_0x19baa8(0x295),(_0x5dea84,_0x3fbdf1)=>{const _0xfb10be=_0x19baa8;if(validateAccess(_0x3fbdf1,_0x1f9c80)[_0xfb10be(0x29f)])toggleBotMode(_0x5dea84);else logger[_0xfb10be(0x206)](_0xfb10be(0x31a));}),_0x4b77c9['on'](_0x19baa8(0x1a8),(_0x1106f7,_0x1c01cd)=>{const _0x187ec8=_0x19baa8;if(validateAccess(_0x1c01cd,_0x1f9c80)[_0x187ec8(0x29f)])deleteBot(_0x1106f7);else logger[_0x187ec8(0x206)](_0x187ec8(0x298));}),_0x4b77c9['on'](_0x19baa8(0x26a),(_0x305fee,_0x28e831)=>{const _0x5d4061=_0x19baa8;if(validateAccess(_0x28e831,_0x1f9c80)['allow'])storeSettings(_0x305fee,!![]);else logger[_0x5d4061(0x206)](_0x5d4061(0x2db));}),_0x4b77c9['on'](_0x19baa8(0x1a2),_0x573493=>{const _0x2ceb5b=_0x19baa8;if(validateAccess(_0x573493,_0x1f9c80)[_0x2ceb5b(0x29f)])updateBB();else logger[_0x2ceb5b(0x206)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4b77c9['on'](_0x19baa8(0x248),_0x5b3888=>{const _0x579b7e=_0x19baa8;if(validateAccess(_0x5b3888,_0x1f9c80)[_0x579b7e(0x29f)])getMessages();else logger[_0x579b7e(0x206)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x4b77c9['on'](_0x19baa8(0x2b3),(_0x2913a6,_0x2b5423)=>{const _0x1701c9=_0x19baa8;if(validateAccess(_0x2b5423,_0x1f9c80)['allow'])confirmMessage(_0x2913a6);else logger[_0x1701c9(0x206)](_0x1701c9(0x20c));}),_0x4b77c9['on']('logout',_0x532ff5=>{const _0x26feaa=_0x19baa8;if(validateAccess(_0x532ff5,_0x1f9c80)[_0x26feaa(0x29f)]){if(devices[_0x1f9c80][_0x26feaa(0x26e)])clearTimeout(devices[_0x1f9c80][_0x26feaa(0x26e)]);if(devices[_0x1f9c80][_0x26feaa(0x2b8)])clearTimeout(devices[_0x1f9c80][_0x26feaa(0x2b8)]);removeSocketListeners(getClient(_0x4b77c9['id'])[_0x26feaa(0x2cb)]),addBlacklist(_0x1f9c80),devices[_0x1f9c80][_0x26feaa(0x25a)]=null,devices[_0x1f9c80]['telegram2FaApproval']=null,devices[_0x1f9c80][_0x26feaa(0x21e)][_0x26feaa(0x23b)]=null,io['to'](getClient(_0x4b77c9['id'])[_0x26feaa(0x2cb)])[_0x26feaa(0x2d4)](_0x26feaa(0x1c5),{'access':{'allow':![],'reason':_0x26feaa(0x2a2),'token':null}});}else logger[_0x26feaa(0x206)](_0x26feaa(0x200));});}function initializeSocketBot(_0x5c540a){const _0x49d729=_0x29178c,_0x22cc99=getClient(_0x5c540a['id'])['bot'],_0x5a2fd3=getClient(_0x5c540a['id'])[_0x49d729(0x2cb)];_0x5c540a['on']('get-logs',(_0x2b2dde,_0x136259)=>{const _0x411b4a=_0x49d729;if(validateAccess(_0x136259,_0x5a2fd3)[_0x411b4a(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99]['send']({'function':_0x411b4a(0x1e4),'args':_0x2b2dde});}else logger[_0x411b4a(0x206)](_0x411b4a(0x1b5));}),_0x5c540a['on']('delete-alerts',(_0xe8e5b3,_0x16e224)=>{const _0x4801ab=_0x49d729;if(validateAccess(_0x16e224,_0x5a2fd3)[_0x4801ab(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99][_0x4801ab(0x292)]({'function':_0x4801ab(0x1f2),'args':_0xe8e5b3});}else logger[_0x4801ab(0x206)](_0x4801ab(0x302));}),_0x5c540a['on'](_0x49d729(0x1b7),(_0x59b9ae,_0x8ded35)=>{const _0x4258e7=_0x49d729;if(validateAccess(_0x8ded35,_0x5a2fd3)[_0x4258e7(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99][_0x4258e7(0x292)]({'function':_0x4258e7(0x2d6),'args':_0x59b9ae});}else logger[_0x4258e7(0x206)](_0x4258e7(0x30c));}),_0x5c540a['on'](_0x49d729(0x2ac),(_0x151936,_0xa56fe)=>{const _0x18726c=_0x49d729;if(validateAccess(_0xa56fe,_0x5a2fd3)[_0x18726c(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99][_0x18726c(0x292)]({'function':_0x18726c(0x266),'args':_0x151936});}else logger[_0x18726c(0x206)](_0x18726c(0x2ed));}),_0x5c540a['on'](_0x49d729(0x1ee),(_0x1d2b14,_0x1d9bc7)=>{const _0x49ee04=_0x49d729;if(validateAccess(_0x1d9bc7,_0x5a2fd3)[_0x49ee04(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99]['send']({'function':_0x49ee04(0x18f),'args':_0x1d2b14});}else logger[_0x49ee04(0x206)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x5c540a['on'](_0x49d729(0x1b4),_0x2e3967=>{const _0x352b45=_0x49d729;if(validateAccess(_0x2e3967,_0x5a2fd3)[_0x352b45(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99][_0x352b45(0x292)]({'function':'getStartingBalances','args':null});}else logger['full'](_0x352b45(0x204));}),_0x5c540a['on'](_0x49d729(0x28e),(_0x5e08c4,_0x16f03d)=>{const _0x52562f=_0x49d729;if(validateAccess(_0x16f03d,_0x5a2fd3)[_0x52562f(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99][_0x52562f(0x292)]({'function':_0x52562f(0x2cf),'args':_0x5e08c4});}else logger[_0x52562f(0x206)](_0x52562f(0x1c2));}),_0x5c540a['on'](_0x49d729(0x1b2),_0x1a221d=>{const _0x9de244=_0x49d729;if(validateAccess(_0x1a221d,_0x5a2fd3)[_0x9de244(0x29f)]){if(pid[_0x22cc99])pid[_0x22cc99]['send']({'function':'cancelLoading','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x5c540a['on'](_0x49d729(0x1a2),_0x4e4f11=>{const _0x255cb5=_0x49d729;if(validateAccess(_0x4e4f11,_0x5a2fd3)[_0x255cb5(0x29f)])updateBB();else logger['full'](_0x255cb5(0x22f));}),_0x5c540a['on'](_0x49d729(0x248),_0x4e7c7d=>{const _0x55ac4b=_0x49d729;if(validateAccess(_0x4e7c7d,_0x5a2fd3)[_0x55ac4b(0x29f)])getMessages();else logger[_0x55ac4b(0x206)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x5c540a['on'](_0x49d729(0x2b3),(_0x181467,_0x4bc712)=>{const _0x473961=_0x49d729;if(validateAccess(_0x4bc712,_0x5a2fd3)[_0x473961(0x29f)])confirmMessage(_0x181467);else logger[_0x473961(0x206)](_0x473961(0x20c));}),_0x5c540a['on'](_0x49d729(0x1d1),_0x386674=>{const _0x372d2d=_0x49d729;if(validateAccess(_0x386674,_0x5a2fd3)[_0x372d2d(0x29f)]){if(devices[_0x5a2fd3][_0x372d2d(0x26e)])clearTimeout(devices[_0x5a2fd3][_0x372d2d(0x26e)]);if(devices[_0x5a2fd3][_0x372d2d(0x2b8)])clearTimeout(devices[_0x5a2fd3][_0x372d2d(0x2b8)]);removeSocketListeners(getClient(_0x5c540a['id'])[_0x372d2d(0x2cb)]),addBlacklist(_0x5a2fd3),devices[_0x5a2fd3][_0x372d2d(0x25a)]=null,devices[_0x5a2fd3][_0x372d2d(0x28c)]=null,devices[_0x5a2fd3][_0x372d2d(0x21e)][_0x372d2d(0x23b)]=null,io['to'](getClient(_0x5c540a['id'])[_0x372d2d(0x2cb)])[_0x372d2d(0x2d4)]('status',{'access':{'allow':![],'reason':_0x372d2d(0x2a2),'token':null}});}else logger['full']('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x1e651b){const _0x82660a=_0x29178c;getClientsWithUuid(_0x1e651b)[_0x82660a(0x202)](_0x1dfd29=>{const _0x1c64e2=_0x82660a;getSocket(_0x1dfd29['id'])[_0x1c64e2(0x250)]();});}function cleanSettings(){const _0x5d5ce7=_0x29178c;let _0x51082b=settings;return settings[_0x5d5ce7(0x25c)]&&settings[_0x5d5ce7(0x25c)]!=''&&(_0x51082b={..._0x51082b,'telegramToken':_0x5d5ce7(0x1ed)}),settings[_0x5d5ce7(0x1cc)]&&settings['bbPassword']!=''&&(_0x51082b={..._0x51082b,'bbPassword':_0x5d5ce7(0x1ed)}),(settings[_0x5d5ce7(0x1cc)]&&settings['bbPassword']=='***'||settings[_0x5d5ce7(0x25c)]&&settings['telegramToken']==_0x5d5ce7(0x194))&&(_0x51082b={..._0x51082b,'restored':{'password':settings[_0x5d5ce7(0x1cc)]==_0x5d5ce7(0x194),'telegram':settings[_0x5d5ce7(0x25c)]==_0x5d5ce7(0x194)}}),_0x51082b;}function updateBB(){const _0x1f7943=_0x29178c;installingUpdate=!![],config['forEach'](_0x388382=>{restartBot(_0x388382['botID']);}),process[_0x1f7943(0x292)]({'update':!![]},_0x306cbe=>{});}function startBot(_0x374bfc,_0x38fe4f,_0x43466b){const _0x810147=_0x29178c;let _0x735b8e=![];const _0x248c00=_0x374bfc[0x0];_0x38fe4f={..._0x38fe4f,'stdio':[_0x810147(0x27b),_0x810147(0x27b),_0x810147(0x27b),_0x810147(0x2a0)]},pid[_0x248c00]=childProcess['fork'](botfile,_0x374bfc,_0x38fe4f),pid[_0x248c00]['on'](_0x810147(0x287),_0x3a184b=>{const _0x3efb54=_0x810147;switch(Object[_0x3efb54(0x24b)](_0x3a184b)[0x0]){case'botname':updateBotName(_0x248c00,_0x3a184b['botname']);break;case _0x3efb54(0x234):updateBotManager();break;case _0x3efb54(0x1c5):updateStatus(_0x248c00,_0x3a184b['status']);break;case _0x3efb54(0x2e5):updateLive(_0x248c00,_0x3a184b[_0x3efb54(0x2e5)]);break;case _0x3efb54(0x198):updateLive(_0x248c00,_0x3a184b['started']),io['to'](_0x248c00)[_0x3efb54(0x2d4)](_0x3efb54(0x1c5),{'access':{'allow':![],'reason':_0x3efb54(0x1c0),'token':null}});break;case _0x3efb54(0x245):_0x3a184b['stop']=='restart'&&restartBot(_0x248c00);_0x3a184b[_0x3efb54(0x245)]==_0x3efb54(0x2fd)&&toggleBot(_0x248c00,_0x3efb54(0x277),'stopped');break;case _0x3efb54(0x205):sendTelegram(_0x248c00,_0x3a184b[_0x3efb54(0x205)]);break;case _0x3efb54(0x1fe):sendTelegramMsg(_0x3a184b[_0x3efb54(0x1fe)]);break;case'function':io['to'](_0x248c00)['emit'](_0x3a184b['function'],_0x3a184b['args']);break;}}),pid[_0x248c00]['on'](_0x810147(0x1f3),function(_0x164a57){if(_0x735b8e)return;_0x735b8e=!![],_0x43466b(_0x164a57);}),pid[_0x248c00]['on'](_0x810147(0x224),async function(_0x4985a4){const _0xc9579a=_0x810147;if(installingUpdate)return;if(_0x735b8e)return;_0x735b8e=!![],_0x43466b(null);const _0xdabfc8=dbConfig[_0xc9579a(0x32d)](_0xc9579a(0x309))[_0xc9579a(0x25e)]({'botID':_0x248c00})[_0xc9579a(0x2be)]();_0xdabfc8&&(_0xdabfc8[_0xc9579a(0x1c5)]=='enabled'||_0xdabfc8['status']==_0xc9579a(0x256))&&(await sleep(0x3e8),updateLive(_0x248c00,_0xc9579a(0x307)),logger[_0xc9579a(0x206)](_0xc9579a(0x303)+_0x248c00),startBot([_0x248c00,userID],{'cwd':bbpath},function(_0xfa7939){const _0xc726d7=_0xc9579a;if(_0xfa7939)logger[_0xc726d7(0x206)](_0xfa7939);}));});}function _0x35dc(_0x36e08b,_0x23b0f7){const _0x483365=_0x1241();return _0x35dc=function(_0x4e9247,_0x5ac053){_0x4e9247=_0x4e9247-0x18d;let _0x1241ae=_0x483365[_0x4e9247];return _0x1241ae;},_0x35dc(_0x36e08b,_0x23b0f7);}function stopBot(_0x34dce1){const _0x26c61b=_0x29178c;getClientsWithBotID(_0x34dce1)[_0x26c61b(0x202)](_0x39d591=>{const _0xe84a1e=_0x26c61b;getSocket(_0x39d591['id'])[_0xe84a1e(0x1f9)](!![]),removeClient(_0x39d591['id']);}),pid[_0x34dce1]&&(pid[_0x34dce1][_0x26c61b(0x2fd)](),pid[_0x34dce1]=null);}function restartBot(_0x3fd8f5){const _0x9fd12f=_0x29178c;if(pid[_0x3fd8f5])pid[_0x3fd8f5][_0x9fd12f(0x2fd)]();}function addBot(){const _0x4fb754=_0x29178c;let _0x5465ce;for(let _0x4a96f6=0x1;_0x4a96f6<0x3e9;_0x4a96f6++){_0x5465ce=_0x4a96f6[_0x4fb754(0x1e2)]()[_0x4fb754(0x285)](0x3,'0');let _0x28db9d=config[_0x4fb754(0x25e)](_0x5abd8c=>_0x5abd8c[_0x4fb754(0x222)]==_0x5465ce);if(!_0x28db9d)break;}if(_0x5465ce===_0x4fb754(0x2e7)){logger['full'](_0x4fb754(0x328));return;}logger[_0x4fb754(0x206)](_0x4fb754(0x1a5)+_0x5465ce),dbConfig[_0x4fb754(0x32d)]('bots')[_0x4fb754(0x1df)]({'botID':_0x5465ce,'botname':'Bot\x20'+_0x5465ce,'status':'new','live':''})[_0x4fb754(0x30b)](),startBot([_0x5465ce,userID],{'cwd':bbpath},function(_0x2d321f){const _0x1b4505=_0x4fb754;if(_0x2d321f)logger[_0x1b4505(0x206)](_0x2d321f);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4fb754(0x309),config);}function deleteBot(_0x2b82e6){const _0x2f5782=_0x29178c;getClientsWithBotID(_0x2b82e6)['forEach'](_0x33b9dd=>{const _0x139d7c=_0x35dc;getSocket(_0x33b9dd['id'])[_0x139d7c(0x1f9)](!![]),removeClient(_0x33b9dd['id']);}),dbConfig[_0x2f5782(0x32d)](_0x2f5782(0x309))[_0x2f5782(0x1c7)]({'botID':_0x2b82e6})[_0x2f5782(0x30b)](),logger['full'](_0x2f5782(0x1a9)+_0x2b82e6),stopBot(_0x2b82e6);try{fs['unlinkSync'](path['join'](configpath,'bot-'+_0x2b82e6+_0x2f5782(0x2b4))),fs[_0x2f5782(0x268)](path[_0x2f5782(0x2b1)](configpath,'bot-'+_0x2b82e6+'-events.json')),fs[_0x2f5782(0x268)](path[_0x2f5782(0x2b1)](configpath,_0x2f5782(0x32c)+_0x2b82e6+'-performance.json')),fs[_0x2f5782(0x268)](path['join'](configpath,'bot-'+_0x2b82e6+_0x2f5782(0x1a4)));}catch(_0x239208){if(_0x239208)logger['full'](_0x2f5782(0x28a),_0x239208);}config=getConfiguration(),io['to'](_0x2f5782(0x2a7))[_0x2f5782(0x2d4)]('bots',config);}function toggleBot(_0x57bfc6,_0x1186a9,_0xc2db74){const _0x3b785b=_0x29178c;dbConfig[_0x3b785b(0x32d)]('bots')[_0x3b785b(0x25e)]({'botID':_0x57bfc6})[_0x3b785b(0x230)]({'status':_0x1186a9})['assign']({'live':_0xc2db74})[_0x3b785b(0x30b)]();if(_0x1186a9==_0x3b785b(0x229)||_0x1186a9==_0x3b785b(0x256))logger[_0x3b785b(0x206)](_0x3b785b(0x1f5)+_0x57bfc6),startBot([_0x57bfc6,userID],{'cwd':bbpath},function(_0x20aff4){const _0x22ade2=_0x3b785b;if(_0x20aff4)logger[_0x22ade2(0x206)](_0x20aff4);});else(_0x1186a9=='disabled'||_0x1186a9==_0x3b785b(0x2de))&&(logger[_0x3b785b(0x206)]('disabled\x20Bot\x20'+_0x57bfc6),stopBot(_0x57bfc6));config=getConfiguration(),io['to'](_0x3b785b(0x2a7))[_0x3b785b(0x2d4)]('bots',config);}function toggleStatus(_0x156b4f){const _0x525eaa=_0x29178c;let _0x1c2a44=dbConfig['get'](_0x525eaa(0x309))[_0x525eaa(0x25e)]({'botID':_0x156b4f})[_0x525eaa(0x2be)](),_0x2e952f;if(_0x1c2a44[_0x525eaa(0x1c5)]===_0x525eaa(0x229))_0x2e952f=_0x525eaa(0x277);else{if(_0x1c2a44['status']===_0x525eaa(0x256))_0x2e952f=_0x525eaa(0x2de);else{if(_0x1c2a44['status']===_0x525eaa(0x2de))_0x2e952f=_0x525eaa(0x256);else{if(_0x1c2a44[_0x525eaa(0x1c5)]===_0x525eaa(0x277))_0x2e952f=_0x525eaa(0x229);}}}return _0x2e952f;}function updateStatus(_0xaffa60,_0x26f2c5){const _0x48c26b=_0x29178c;dbConfig['get'](_0x48c26b(0x309))['find']({'botID':_0xaffa60})['assign']({'status':_0x26f2c5})[_0x48c26b(0x30b)](),config=getConfiguration(),io['to'](_0x48c26b(0x2a7))['emit']('bots',config);}function updateLive(_0x42859d,_0x52c193){const _0x6d0578=_0x29178c;dbConfig[_0x6d0578(0x32d)]('bots')['find']({'botID':_0x42859d})[_0x6d0578(0x230)]({'live':_0x52c193})[_0x6d0578(0x30b)](),config=getConfiguration(),io['to'](_0x6d0578(0x2a7))[_0x6d0578(0x2d4)]('bots',config);}function updateBotName(_0x25d9d7,_0x419e68){const _0x364dac=_0x29178c;dbConfig[_0x364dac(0x32d)]('bots')[_0x364dac(0x25e)]({'botID':_0x25d9d7})[_0x364dac(0x230)]({'botname':_0x419e68})['write'](),config=getConfiguration(),io['to'](_0x364dac(0x2a7))[_0x364dac(0x2d4)]('bots',config);}function updateBotManager(){const _0x25ab79=_0x29178c;config=getConfiguration(),io['to'](_0x25ab79(0x2a7))[_0x25ab79(0x2d4)](_0x25ab79(0x309),config);}function toggleBotMode(_0x4651fb){const _0x2b7f29=_0x29178c;if(pid[_0x4651fb])pid[_0x4651fb][_0x2b7f29(0x292)]({'function':_0x2b7f29(0x2ff),'args':null});else{const _0x3e2593=configpath+_0x2b7f29(0x32c)+_0x4651fb+_0x2b7f29(0x2b4),_0x39f071=fs[_0x2b7f29(0x218)](_0x3e2593),_0x182360=JSON['parse'](_0x39f071),_0x133e1f=_0x182360[_0x2b7f29(0x2b6)][0x0][_0x2b7f29(0x2a4)];_0x182360[_0x2b7f29(0x2b6)][0x0][_0x2b7f29(0x2a4)]=!_0x133e1f;const _0x3b7991=JSON[_0x2b7f29(0x262)](_0x182360,null,0x2);fs[_0x2b7f29(0x29c)](_0x3e2593,_0x3b7991),config=getConfiguration(),io['to'](_0x2b7f29(0x2a7))[_0x2b7f29(0x2d4)]('bots',config);}}function telegramError(_0x174de0){const _0x209a2f=_0x29178c;logger[_0x209a2f(0x254)](getTimeStamp()+_0x209a2f(0x203));}function validateTelegram(_0x583b43){const _0x3da7cf=_0x29178c;if(_0x583b43[_0x3da7cf(0x193)]['username']!=settings[_0x3da7cf(0x30d)]&&'@'+_0x583b43['from'][_0x3da7cf(0x24e)]!=settings[_0x3da7cf(0x30d)])return tgBot[_0x3da7cf(0x2da)](_0x583b43['chat']['id'],_0x3da7cf(0x1c9),{'parse_mode':_0x3da7cf(0x26c)})['catch'](_0x4417d8=>{telegramError(_0x4417d8);}),![];return!![];}async function initTelegram(){const _0x363768=_0x29178c;if(tgBot)tgBot[_0x363768(0x1e9)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x2ee950=_0x363768(0x219);_0x2ee950+='\x0a',_0x2ee950+=_0x363768(0x241),_0x2ee950+=_0x363768(0x1e3),_0x2ee950+=_0x363768(0x1fa),_0x2ee950+=_0x363768(0x221),_0x2ee950+=_0x363768(0x29b),_0x2ee950+=_0x363768(0x2ad),_0x2ee950+=_0x363768(0x1bb),_0x2ee950+=_0x363768(0x2af),_0x2ee950+=_0x363768(0x20e),_0x2ee950+=_0x363768(0x2f3),_0x2ee950+=_0x363768(0x26d),_0x2ee950+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x3edd02=_0x363768(0x313);_0x3edd02+='\x0a',_0x3edd02+=_0x2ee950,tgBot[_0x363768(0x301)](/\/start/,_0x4926e4=>{const _0x46676d=_0x363768;if(!validateTelegram(_0x4926e4))return;if(settings[_0x46676d(0x322)]!=_0x4926e4['chat']['id'])updateSetting(_0x46676d(0x322),_0x4926e4[_0x46676d(0x210)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x46676d(0x2da)](_0x4926e4[_0x46676d(0x210)]['id'],_0x3edd02)['catch'](_0x1a3474=>{telegramError(_0x1a3474);});}),tgBot['onText'](/\/enable/,_0x1d30f6=>{const _0x47470d=_0x363768;if(!validateTelegram(_0x1d30f6))return;if(settings[_0x47470d(0x322)]!=_0x1d30f6[_0x47470d(0x210)]['id'])updateSetting(_0x47470d(0x322),_0x1d30f6[_0x47470d(0x210)]['id']);updateSetting(_0x47470d(0x329),!![]),tgBot[_0x47470d(0x2da)](_0x1d30f6[_0x47470d(0x210)]['id'],_0x47470d(0x2f1))['catch'](_0x14e3a5=>{telegramError(_0x14e3a5);});}),tgBot[_0x363768(0x301)](/\/config/,async _0x12416a=>{const _0x92763a=_0x363768;if(!validateTelegram(_0x12416a))return;tgBot[_0x92763a(0x32e)](_0x92763a(0x1f0)),tgBot[_0x92763a(0x2da)](_0x12416a[_0x92763a(0x210)]['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x92763a(0x191),'callback_data':_0x92763a(0x2ef)},{'text':_0x92763a(0x1e5),'callback_data':'alerts'},{'text':_0x92763a(0x24a),'callback_data':_0x92763a(0x263)}]]}})[_0x92763a(0x1ec)](_0x2fda86=>{telegramError(_0x2fda86);}),tgBot['on']('callback_query',async _0x51dd13=>{const _0x27660b=_0x92763a,_0x30d118=_0x51dd13['data'],_0x5740ae=_0x51dd13[_0x27660b(0x287)];tgBot['answerCallbackQuery'](_0x51dd13['id'])['then'](async()=>{const _0x545693=_0x27660b;_0x30d118==_0x545693(0x2ef)&&(updateSetting(_0x545693(0x216),_0x545693(0x2ef)),updateSetting('telegramEnabled',!![]),await tgBot[_0x545693(0x2da)](_0x5740ae['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x545693(0x1ec)](_0x4b3dd8=>{telegramError(_0x4b3dd8);}));_0x30d118==_0x545693(0x2e1)&&(updateSetting('telegramEvents',_0x545693(0x2e1)),updateSetting(_0x545693(0x329),!![]),await tgBot[_0x545693(0x2da)](_0x5740ae[_0x545693(0x210)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x545693(0x1ec)](_0x3b924b=>{telegramError(_0x3b924b);}));_0x30d118==_0x545693(0x263)&&(updateSetting(_0x545693(0x216),_0x545693(0x263)),updateSetting(_0x545693(0x329),!![]),await tgBot['sendMessage'](_0x5740ae['chat']['id'],_0x545693(0x1dd))[_0x545693(0x1ec)](_0x572065=>{telegramError(_0x572065);}));if(!settings[_0x545693(0x322)])tgBot[_0x545693(0x2da)](_0x5740ae[_0x545693(0x210)]['id'],_0x545693(0x23a))[_0x545693(0x1ec)](_0x4fa3cb=>{telegramError(_0x4fa3cb);});}),tgBot[_0x27660b(0x32e)](_0x27660b(0x1f0));});}),tgBot[_0x363768(0x301)](/\/status/,_0x34dd61=>{const _0x49ba2c=_0x363768;if(!validateTelegram(_0x34dd61))return;const _0x207dd0=getBotsWithMode();let _0x42b9f0=_0x49ba2c(0x1f4);config[_0x49ba2c(0x202)](_0x27e28b=>{const _0x109277=_0x49ba2c,_0x284510=_0x207dd0['find'](_0x19d404=>_0x19d404[_0x109277(0x222)]==_0x27e28b[_0x109277(0x222)])[_0x109277(0x201)];_0x42b9f0+=_0x109277(0x1de)+_0x27e28b[_0x109277(0x222)]+':\x20'+_0x27e28b[_0x109277(0x1c5)]+'\x20|\x20'+_0x284510+_0x109277(0x2f6)+_0x27e28b[_0x109277(0x2e5)]+'\x0a';}),_0x42b9f0+='\x0a',_0x42b9f0+=_0x49ba2c(0x267),_0x42b9f0+=!settings[_0x49ba2c(0x329)]?_0x49ba2c(0x1dc):_0x49ba2c(0x1ce),_0x42b9f0+=settings[_0x49ba2c(0x329)]?settings['telegramEvents']=='all'?_0x49ba2c(0x27f):_0x49ba2c(0x1da)+settings['telegramEvents']+_0x49ba2c(0x2c5):'',tgBot[_0x49ba2c(0x2da)](_0x34dd61[_0x49ba2c(0x210)]['id'],_0x42b9f0,{'parse_mode':_0x49ba2c(0x26c)})[_0x49ba2c(0x1ec)](_0x39eab3=>{telegramError(_0x39eab3);});}),tgBot[_0x363768(0x301)](/\/restart/,_0x2fb233=>{const _0x451e85=_0x363768;if(!validateTelegram(_0x2fb233))return;tgBot['removeListener']('callback_query');const _0x2b5219=getEnabledBots();if(_0x2b5219[_0x451e85(0x1d7)]==0x0)tgBot['sendMessage'](_0x2fb233[_0x451e85(0x210)]['id'],_0x451e85(0x22c))[_0x451e85(0x1ec)](_0x3f27b1=>{telegramError(_0x3f27b1);});else{if(_0x2b5219['length']>0x1)_0x2b5219[_0x451e85(0x1df)]({'botID':_0x451e85(0x263)});let _0x16e424=[],_0xad82b0=[];const _0x29d2ab=_0x2b5219[_0x451e85(0x1d7)]%0x4==0x0||_0x2b5219[_0x451e85(0x1d7)]%0x4==0x3||_0x2b5219['length']%0x3==0x1?0x4:0x3;let _0x4dd7d0=0x0;_0x2b5219[_0x451e85(0x202)]((_0x74c621,_0x4a14bf)=>{const _0x205ff5=_0x451e85;if(_0x4a14bf%_0x29d2ab==0x0)_0xad82b0=[];_0xad82b0[_0x205ff5(0x1df)]({'text':_0x74c621[_0x205ff5(0x222)]==_0x205ff5(0x263)?_0x205ff5(0x190):_0x205ff5(0x1de)+_0x74c621[_0x205ff5(0x222)],'callback_data':_0x74c621[_0x205ff5(0x222)]}),_0x4a14bf%_0x29d2ab==0x0&&(_0x16e424[_0x4dd7d0]=_0xad82b0,_0x4dd7d0++);}),tgBot[_0x451e85(0x2da)](_0x2fb233[_0x451e85(0x210)]['id'],_0x451e85(0x31e),{'reply_markup':{'inline_keyboard':_0x16e424}})[_0x451e85(0x1ec)](_0x3f0a9c=>{telegramError(_0x3f0a9c);}),tgBot['on'](_0x451e85(0x1f0),async _0x2696f8=>{const _0x553480=_0x451e85,_0x210231=_0x2696f8[_0x553480(0x2b7)],_0x409b71=_0x2696f8[_0x553480(0x287)];tgBot[_0x553480(0x239)](_0x2696f8['id'])[_0x553480(0x252)](async()=>{const _0xb4e1e5=_0x553480;_0x210231==_0xb4e1e5(0x263)?config[_0xb4e1e5(0x202)](_0x3cce92=>{const _0x47b45b=_0xb4e1e5;restartBot(_0x3cce92[_0x47b45b(0x222)]);}):restartBot(_0x210231);}),tgBot[_0x553480(0x32e)](_0x553480(0x1f0));});}}),tgBot[_0x363768(0x301)](/\/on/,_0x210d60=>{const _0x3d5324=_0x363768;if(!validateTelegram(_0x210d60))return;tgBot[_0x3d5324(0x32e)]('callback_query');const _0x3c6f20=getDisabledBots();if(_0x3c6f20[_0x3d5324(0x1d7)]==0x0)tgBot[_0x3d5324(0x2da)](_0x210d60[_0x3d5324(0x210)]['id'],_0x3d5324(0x2dc))['catch'](_0x4b34fe=>{telegramError(_0x4b34fe);});else{if(_0x3c6f20[_0x3d5324(0x1d7)]>0x1)_0x3c6f20['push']({'botID':'all'});let _0x22b1e4=[],_0x11c91c=[];const _0x2556cc=_0x3c6f20[_0x3d5324(0x1d7)]%0x4==0x0||_0x3c6f20[_0x3d5324(0x1d7)]%0x4==0x3||_0x3c6f20[_0x3d5324(0x1d7)]%0x3==0x1?0x4:0x3;let _0x2885e2=0x0;_0x3c6f20[_0x3d5324(0x202)]((_0x41d6a4,_0x34400f)=>{const _0x228a1c=_0x3d5324;if(_0x34400f%_0x2556cc==0x0)_0x11c91c=[];_0x11c91c[_0x228a1c(0x1df)]({'text':_0x41d6a4[_0x228a1c(0x222)]==_0x228a1c(0x263)?_0x228a1c(0x190):_0x228a1c(0x1de)+_0x41d6a4['botID'],'callback_data':_0x41d6a4['botID']}),_0x34400f%_0x2556cc==0x0&&(_0x22b1e4[_0x2885e2]=_0x11c91c,_0x2885e2++);}),tgBot[_0x3d5324(0x2da)](_0x210d60[_0x3d5324(0x210)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x22b1e4}})[_0x3d5324(0x1ec)](_0x12e6be=>{telegramError(_0x12e6be);}),tgBot['on']('callback_query',async _0x4ae39a=>{const _0x5dbcf4=_0x3d5324,_0x22cd94=_0x4ae39a[_0x5dbcf4(0x2b7)],_0x124990=_0x4ae39a[_0x5dbcf4(0x287)];tgBot[_0x5dbcf4(0x239)](_0x4ae39a['id'])['then'](async()=>{const _0x1ae09a=_0x5dbcf4;_0x22cd94==_0x1ae09a(0x263)?(tgBot[_0x1ae09a(0x2da)](_0x124990[_0x1ae09a(0x210)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')['catch'](_0x20c24b=>{telegramError(_0x20c24b);}),_0x3c6f20[_0x1ae09a(0x202)](_0x231712=>{const _0x4a4a00=_0x1ae09a;if(_0x231712['botID']!=_0x4a4a00(0x263))toggleBot(_0x231712[_0x4a4a00(0x222)],toggleStatus(_0x231712[_0x4a4a00(0x222)]),'stopped');})):(tgBot[_0x1ae09a(0x2da)](_0x124990[_0x1ae09a(0x210)]['id'],_0x1ae09a(0x318)+_0x22cd94)[_0x1ae09a(0x1ec)](_0x43565a=>{telegramError(_0x43565a);}),toggleBot(_0x22cd94,toggleStatus(_0x22cd94),_0x1ae09a(0x307)));}),tgBot['removeListener'](_0x5dbcf4(0x1f0));});}}),tgBot[_0x363768(0x301)](/\/off/,_0x2587b0=>{const _0x4b5f5c=_0x363768;if(!validateTelegram(_0x2587b0))return;tgBot['removeListener'](_0x4b5f5c(0x1f0));const _0x7f000f=getEnabledBots();if(_0x7f000f[_0x4b5f5c(0x1d7)]==0x0)tgBot[_0x4b5f5c(0x2da)](_0x2587b0[_0x4b5f5c(0x210)]['id'],_0x4b5f5c(0x22c))[_0x4b5f5c(0x1ec)](_0x325d6b=>{telegramError(_0x325d6b);});else{if(_0x7f000f['length']>0x1)_0x7f000f[_0x4b5f5c(0x1df)]({'botID':_0x4b5f5c(0x263)});let _0xcadd99=[],_0x217b1e=[];const _0x10e145=_0x7f000f[_0x4b5f5c(0x1d7)]%0x4==0x0||_0x7f000f['length']%0x4==0x3||_0x7f000f['length']%0x3==0x1?0x4:0x3;let _0x53e77b=0x0;_0x7f000f[_0x4b5f5c(0x202)]((_0x23cb08,_0x5666d8)=>{const _0x3078fb=_0x4b5f5c;if(_0x5666d8%_0x10e145==0x0)_0x217b1e=[];_0x217b1e[_0x3078fb(0x1df)]({'text':_0x23cb08[_0x3078fb(0x222)]==_0x3078fb(0x263)?_0x3078fb(0x190):_0x3078fb(0x1de)+_0x23cb08[_0x3078fb(0x222)],'callback_data':_0x23cb08['botID']}),_0x5666d8%_0x10e145==0x0&&(_0xcadd99[_0x53e77b]=_0x217b1e,_0x53e77b++);}),tgBot[_0x4b5f5c(0x2da)](_0x2587b0[_0x4b5f5c(0x210)]['id'],_0x4b5f5c(0x311),{'reply_markup':{'inline_keyboard':_0xcadd99}})[_0x4b5f5c(0x1ec)](_0x2d1626=>{telegramError(_0x2d1626);}),tgBot['on'](_0x4b5f5c(0x1f0),async _0x109249=>{const _0x68cd19=_0x4b5f5c,_0x541bc6=_0x109249[_0x68cd19(0x2b7)],_0x4b9e8e=_0x109249['message'];tgBot[_0x68cd19(0x239)](_0x109249['id'])['then'](async()=>{const _0x4feb7e=_0x68cd19;_0x541bc6==_0x4feb7e(0x263)?(tgBot[_0x4feb7e(0x2da)](_0x4b9e8e[_0x4feb7e(0x210)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x4feb7e(0x1ec)](_0x517b70=>{telegramError(_0x517b70);}),_0x7f000f['forEach'](_0xe0ea75=>{const _0x316932=_0x4feb7e;if(_0xe0ea75[_0x316932(0x222)]!=_0x316932(0x263))toggleBot(_0xe0ea75[_0x316932(0x222)],toggleStatus(_0xe0ea75[_0x316932(0x222)]),_0x316932(0x307));})):(tgBot[_0x4feb7e(0x2da)](_0x4b9e8e[_0x4feb7e(0x210)]['id'],_0x4feb7e(0x19e)+_0x541bc6)[_0x4feb7e(0x1ec)](_0x2a3dfb=>{telegramError(_0x2a3dfb);}),toggleBot(_0x541bc6,toggleStatus(_0x541bc6),_0x4feb7e(0x307)));}),tgBot[_0x68cd19(0x32e)]('callback_query');});}}),tgBot['onText'](/\/portfolio/,_0x54ba1f=>{const _0x189cc0=_0x363768;if(!validateTelegram(_0x54ba1f))return;tgBot['removeListener'](_0x189cc0(0x1f0));const _0x5103cd=getEnabledBots();if(_0x5103cd[_0x189cc0(0x1d7)]==0x0)tgBot[_0x189cc0(0x2da)](_0x54ba1f['chat']['id'],_0x189cc0(0x22c))['catch'](_0xc1125a=>{telegramError(_0xc1125a);});else{if(_0x5103cd[_0x189cc0(0x1d7)]>0x1){let _0x32fc22=[],_0x579f54=[];const _0x4db311=_0x5103cd[_0x189cc0(0x1d7)]%0x4==0x0||_0x5103cd[_0x189cc0(0x1d7)]%0x4==0x3||_0x5103cd[_0x189cc0(0x1d7)]%0x3==0x1?0x4:0x3;let _0xd45707=0x0;_0x5103cd[_0x189cc0(0x202)]((_0x6c6508,_0x1688a8)=>{const _0xf0faf4=_0x189cc0;if(_0x1688a8%_0x4db311==0x0)_0x579f54=[];_0x579f54['push']({'text':_0xf0faf4(0x1de)+_0x6c6508[_0xf0faf4(0x222)],'callback_data':_0x6c6508[_0xf0faf4(0x222)]}),_0x1688a8%_0x4db311==0x0&&(_0x32fc22[_0xd45707]=_0x579f54,_0xd45707++);}),tgBot[_0x189cc0(0x2da)](_0x54ba1f[_0x189cc0(0x210)]['id'],_0x189cc0(0x321),{'reply_markup':{'inline_keyboard':_0x32fc22}})[_0x189cc0(0x1ec)](_0xcde8ad=>{telegramError(_0xcde8ad);}),tgBot['on'](_0x189cc0(0x1f0),async _0x38881f=>{const _0x2ac76e=_0x189cc0,_0x83bfba=_0x38881f[_0x2ac76e(0x2b7)],_0x5596cb=_0x38881f[_0x2ac76e(0x287)];tgBot[_0x2ac76e(0x239)](_0x38881f['id'])[_0x2ac76e(0x252)](async()=>{const _0x35aea2=_0x2ac76e;if(pid[_0x83bfba])pid[_0x83bfba][_0x35aea2(0x292)]({'function':_0x35aea2(0x1db),'args':null});}),tgBot['removeListener']('callback_query');});}else{const _0xdcefda=_0x5103cd[0x0][_0x189cc0(0x222)];if(pid[_0xdcefda])pid[_0xdcefda][_0x189cc0(0x292)]({'function':_0x189cc0(0x1db),'args':null});}}}),tgBot['onText'](/\/update/,async _0x2355ef=>{const _0x3814a4=_0x363768;if(!validateTelegram(_0x2355ef))return;tgBot[_0x3814a4(0x32e)]('callback_query'),await getMessages();if(!updateAvailable)tgBot[_0x3814a4(0x2da)](_0x2355ef['chat']['id'],_0x3814a4(0x22b))[_0x3814a4(0x1ec)](_0x5ecf16=>{telegramError(_0x5ecf16);});else!validInstallation?tgBot[_0x3814a4(0x2da)](_0x2355ef[_0x3814a4(0x210)]['id'],_0x3814a4(0x2a1))[_0x3814a4(0x1ec)](_0x4c3d2d=>{telegramError(_0x4c3d2d);}):(tgBot['sendMessage'](_0x2355ef[_0x3814a4(0x210)]['id'],_0x3814a4(0x18d),{'reply_markup':{'inline_keyboard':[[{'text':_0x3814a4(0x310),'callback_data':'yes'},{'text':'No','callback_data':'no'}]]}})[_0x3814a4(0x1ec)](_0x458abf=>{telegramError(_0x458abf);}),tgBot['on'](_0x3814a4(0x1f0),async _0x7d4246=>{const _0x8dcc74=_0x3814a4,_0x46a094=_0x7d4246[_0x8dcc74(0x2b7)],_0x19f5e0=_0x7d4246[_0x8dcc74(0x287)];tgBot[_0x8dcc74(0x239)](_0x7d4246['id'])[_0x8dcc74(0x252)](async()=>{const _0xa07472=_0x8dcc74;_0x46a094=='yes'&&(await tgBot[_0xa07472(0x2da)](_0x19f5e0[_0xa07472(0x210)]['id'],_0xa07472(0x2a9))[_0xa07472(0x1ec)](_0x55ea63=>{telegramError(_0x55ea63);}),updateBB());_0x46a094=='no'&&await tgBot[_0xa07472(0x2da)](_0x19f5e0[_0xa07472(0x210)]['id'],_0xa07472(0x32a))[_0xa07472(0x1ec)](_0x5c0dca=>{telegramError(_0x5c0dca);});if(!settings[_0xa07472(0x322)])tgBot['sendMessage'](_0x19f5e0[_0xa07472(0x210)]['id'],_0xa07472(0x23a))[_0xa07472(0x1ec)](_0xd7e7bc=>{telegramError(_0xd7e7bc);});}),tgBot[_0x8dcc74(0x32e)]('callback_query');}));}),tgBot[_0x363768(0x301)](/\/toggle/,_0x2f7538=>{const _0x40bc4a=_0x363768;if(!validateTelegram(_0x2f7538))return;tgBot[_0x40bc4a(0x32e)](_0x40bc4a(0x1f0));const _0xbb8fe2=getBotsWithMode();if(_0xbb8fe2[_0x40bc4a(0x1d7)]==0x0)tgBot[_0x40bc4a(0x2da)](_0x2f7538[_0x40bc4a(0x210)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x40bc4a(0x1ec)](_0x2a9c68=>{telegramError(_0x2a9c68);});else{let _0x3d2dd2=[],_0x41a29f=[];const _0x5a800b=0x2;let _0xf3e6d2=0x0;_0xbb8fe2['forEach']((_0x1ae301,_0x3b3998)=>{const _0x2180d1=_0x40bc4a;if(_0x3b3998%_0x5a800b==0x0)_0x41a29f=[];_0x41a29f[_0x2180d1(0x1df)]({'text':_0x2180d1(0x1de)+_0x1ae301[_0x2180d1(0x222)]+'\x20('+_0x1ae301[_0x2180d1(0x201)]+')','callback_data':_0x1ae301[_0x2180d1(0x222)]}),_0x3b3998%_0x5a800b==0x0&&(_0x3d2dd2[_0xf3e6d2]=_0x41a29f,_0xf3e6d2++);}),tgBot[_0x40bc4a(0x2da)](_0x2f7538[_0x40bc4a(0x210)]['id'],_0x40bc4a(0x1af),{'reply_markup':{'inline_keyboard':_0x3d2dd2}})['catch'](_0x13c66d=>{telegramError(_0x13c66d);}),tgBot['on'](_0x40bc4a(0x1f0),async _0x6f9605=>{const _0x3bdb03=_0x40bc4a,_0x226f5c=_0x6f9605[_0x3bdb03(0x2b7)],_0x54a10c=_0x6f9605[_0x3bdb03(0x287)];tgBot[_0x3bdb03(0x239)](_0x6f9605['id'])[_0x3bdb03(0x252)](async()=>{const _0x20fce9=_0x3bdb03,_0x3c4f2b=_0xbb8fe2['find'](_0x2e27a2=>_0x2e27a2[_0x20fce9(0x222)]==_0x226f5c),_0x3d6db6=_0x3c4f2b['mode']=='auto'?_0x20fce9(0x1c4):'auto';tgBot[_0x20fce9(0x2da)](_0x54a10c[_0x20fce9(0x210)]['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x226f5c+_0x20fce9(0x2c3)+_0x3d6db6+_0x20fce9(0x1d9))[_0x20fce9(0x1ec)](_0x324903=>{telegramError(_0x324903);}),toggleBotMode(_0x226f5c);}),tgBot[_0x3bdb03(0x32e)](_0x3bdb03(0x1f0));});}}),tgBot[_0x363768(0x301)](/\/names/,_0x20751e=>{const _0x1aec22=_0x363768;if(!validateTelegram(_0x20751e))return;let _0x160eee='';config[_0x1aec22(0x202)](_0x313a33=>{const _0x2c4b90=_0x1aec22;_0x160eee+=_0x2c4b90(0x1de)+_0x313a33[_0x2c4b90(0x222)]+':\x20'+_0x313a33[_0x2c4b90(0x2bf)]+'\x0a';}),tgBot[_0x1aec22(0x2da)](_0x20751e[_0x1aec22(0x210)]['id'],_0x160eee,{'parse_mode':_0x1aec22(0x26c)})[_0x1aec22(0x1ec)](_0x880c4c=>{telegramError(_0x880c4c);});}),tgBot[_0x363768(0x301)](/\/disable/,_0x3b61f3=>{const _0x808efa=_0x363768;if(!validateTelegram(_0x3b61f3))return;tgBot[_0x808efa(0x2da)](_0x3b61f3[_0x808efa(0x210)]['id'],_0x808efa(0x217))[_0x808efa(0x1ec)](_0x23259d=>{telegramError(_0x23259d);}),updateSetting(_0x808efa(0x329),![]);}),tgBot[_0x363768(0x301)](/\/help/,_0x4d9bd0=>{const _0x26fba5=_0x363768;if(!validateTelegram(_0x4d9bd0))return;tgBot[_0x26fba5(0x2da)](_0x4d9bd0['chat']['id'],_0x2ee950)['catch'](_0x50fe2e=>{telegramError(_0x50fe2e);});}),tgBot['on'](_0x363768(0x1f8),_0x50e4c0=>{const _0x2e0c03=_0x363768;_0x50e4c0['toString']()[_0x2e0c03(0x31d)](_0x2e0c03(0x2d5))&&(logger['full'](_0x2e0c03(0x2a8)),tgBot[_0x2e0c03(0x1e9)](),tgBot=null,io['to'](_0x2e0c03(0x2a7))[_0x2e0c03(0x2d4)]('notification',_0x2e0c03(0x2a8)));}),process[_0x363768(0x1ca)](_0x363768(0x334),()=>{const _0x4a7cc7=_0x363768;if(tgBot)tgBot['stopPolling']();process[_0x4a7cc7(0x224)](0x1);}),process[_0x363768(0x1ca)](_0x363768(0x294),()=>{const _0x34e785=_0x363768;if(tgBot)tgBot[_0x34e785(0x1e9)]();process[_0x34e785(0x224)](0x1);});}}function disableTelegram(){const _0xe47d28=_0x29178c;tgBot&&(tgBot[_0xe47d28(0x1e9)](),tgBot=null);}function sendTelegram(_0x4586c6,_0x1f7d82){const _0x592fe5=_0x29178c;if(settings[_0x592fe5(0x329)]){if(settings[_0x592fe5(0x216)]=='all'||(_0x1f7d82['type']==_0x592fe5(0x1f3)||_0x1f7d82[_0x592fe5(0x32b)]==_0x592fe5(0x1be)||_0x1f7d82['type']==_0x592fe5(0x2f9))&&settings[_0x592fe5(0x216)]==_0x592fe5(0x2e1)||_0x1f7d82[_0x592fe5(0x32b)]==_0x592fe5(0x308)&&settings[_0x592fe5(0x216)]==_0x592fe5(0x2ef)){if(tgBot&&settings[_0x592fe5(0x322)]){if(_0x1f7d82[_0x592fe5(0x28d)])tgBot['sendMessage'](settings['telegramChatId'],_0x1f7d82[_0x592fe5(0x2bf)]+'\x20>\x20'+_0x1f7d82['event'])[_0x592fe5(0x1ec)](_0x5064a5=>{telegramError(_0x5064a5);});else tgBot[_0x592fe5(0x2da)](settings[_0x592fe5(0x322)],_0x592fe5(0x1de)+_0x4586c6+_0x592fe5(0x2bd)+_0x1f7d82[_0x592fe5(0x288)])[_0x592fe5(0x1ec)](_0x6da8b5=>{telegramError(_0x6da8b5);});}}}}async function sendTelegramMsg(_0xf2272f,_0x3bd54b='HTML'){const _0x391446=_0x29178c;return settings[_0x391446(0x329)]&&tgBot&&settings['telegramChatId']?(await tgBot['sendMessage'](settings[_0x391446(0x322)],_0xf2272f,{'parse_mode':_0x3bd54b})[_0x391446(0x1ec)](_0x4d1807=>{telegramError(_0x4d1807);}),!![]):![];}function getDeviceWithIp(_0x74a40c){return devices['find'](_0x277d53=>_0x277d53['ip']===_0x74a40c);}function temporaryAccess2FA(_0x1fba20,_0xc16651){const _0x301eb4=_0x29178c;let _0x2ea364=new Date(),_0x3c666d=![];if(lastIpApproval){if(_0x2ea364-lastIpApproval<0x1388)_0x3c666d=!![];}lastIpApproval=new Date();if(_0x3c666d)return;tgBot&&settings[_0x301eb4(0x322)]&&(tgBot['removeListener'](_0x301eb4(0x1f0)),tgBot['sendMessage'](settings[_0x301eb4(0x322)],_0x301eb4(0x1b1)+normalizeIP(_0xc16651)[_0x301eb4(0x2e0)]+'</b>\x20?',{'parse_mode':_0x301eb4(0x26c),'reply_markup':{'inline_keyboard':[[{'text':_0x301eb4(0x31b),'callback_data':'5'},{'text':_0x301eb4(0x19a),'callback_data':'15'},{'text':_0x301eb4(0x25f),'callback_data':'30'},{'text':_0x301eb4(0x290),'callback_data':_0x301eb4(0x290)}]]}})[_0x301eb4(0x1ec)](_0x20ef22=>{telegramError(_0x20ef22);}),tgBot['on']('callback_query',async _0x48cee9=>{const _0x3db745=_0x301eb4,_0x46a5dc=_0x48cee9[_0x3db745(0x2b7)],_0x1c2148=_0x48cee9[_0x3db745(0x287)];tgBot[_0x3db745(0x239)](_0x48cee9['id'])['then'](async()=>{const _0x394437=_0x3db745;devices[_0x1fba20][_0x394437(0x25a)]={'clientip':_0xc16651,'timestamp':new Date()['getTime'](),'expiry':_0x46a5dc},_0x46a5dc!=_0x394437(0x290)?(await tgBot[_0x394437(0x2da)](_0x1c2148['chat']['id'],_0x394437(0x253)+_0x46a5dc+_0x394437(0x215),{'parse_mode':_0x394437(0x26c)})['catch'](_0x27bf37=>{telegramError(_0x27bf37);}),io['to'](_0x1fba20)[_0x394437(0x2d4)](_0x394437(0x1c5),{'access':{'allow':![],'reason':_0x394437(0x1c0),'token':null}})):(await tgBot[_0x394437(0x2da)](_0x1c2148[_0x394437(0x210)]['id'],'Temporary\x20access\x20rejected')[_0x394437(0x1ec)](_0x1645e5=>{telegramError(_0x1645e5);}),io['to'](_0x1fba20)[_0x394437(0x2d4)](_0x394437(0x1c5),{'access':{'allow':![],'reason':_0x394437(0x232),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function loginAccess2FA(_0x580421,_0x3eebf9){const _0x5f7c6c=_0x29178c;tgBot&&settings[_0x5f7c6c(0x322)]&&(tgBot[_0x5f7c6c(0x32e)]('callback_query'),tgBot[_0x5f7c6c(0x2da)](settings[_0x5f7c6c(0x322)],_0x5f7c6c(0x261)+normalizeIP(_0x3eebf9)[_0x5f7c6c(0x2e0)]+_0x5f7c6c(0x2f0),{'parse_mode':_0x5f7c6c(0x26c),'reply_markup':{'inline_keyboard':[[{'text':_0x5f7c6c(0x283),'callback_data':loginExpiry},{'text':_0x5f7c6c(0x290),'callback_data':_0x5f7c6c(0x290)}]]}})[_0x5f7c6c(0x1ec)](_0x2f1f1a=>{telegramError(_0x2f1f1a);}),tgBot['on']('callback_query',async _0x27cf40=>{const _0x4e4f6a=_0x5f7c6c,_0x352260=_0x27cf40[_0x4e4f6a(0x2b7)],_0x106e8f=_0x27cf40[_0x4e4f6a(0x287)];tgBot[_0x4e4f6a(0x239)](_0x27cf40['id'])[_0x4e4f6a(0x252)](async()=>{const _0x2801ce=_0x4e4f6a;devices[_0x580421]['telegram2FaApproval']={'clientip':_0x3eebf9,'timestamp':new Date()[_0x2801ce(0x27e)](),'expiry':_0x352260},_0x352260!=_0x2801ce(0x290)?(await tgBot[_0x2801ce(0x2da)](_0x106e8f[_0x2801ce(0x210)]['id'],_0x2801ce(0x233),{'parse_mode':'HTML'})['catch'](_0x172cc3=>{telegramError(_0x172cc3);}),io['to'](_0x580421)[_0x2801ce(0x2d4)](_0x2801ce(0x1c5),{'access':{'allow':![],'reason':_0x2801ce(0x1c0),'token':null}})):(await tgBot['sendMessage'](_0x106e8f[_0x2801ce(0x210)]['id'],'Login\x20rejected')[_0x2801ce(0x1ec)](_0x3e9854=>{telegramError(_0x3e9854);}),io['to'](_0x580421)[_0x2801ce(0x2d4)](_0x2801ce(0x1c5),{'access':{'allow':![],'reason':_0x2801ce(0x278),'token':null}}));}),tgBot[_0x4e4f6a(0x32e)](_0x4e4f6a(0x1f0));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x41ae84=_0x29178c;return dbConfig['get'](_0x41ae84(0x309))['sortBy']('botID')['filter']({'status':_0x41ae84(0x229)})['value']()||[];}function getDisabledBots(){const _0x92f4f3=_0x29178c;return dbConfig[_0x92f4f3(0x32d)]('bots')[_0x92f4f3(0x195)](_0x92f4f3(0x222))[_0x92f4f3(0x1d5)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0xf8ccb2){const _0x5a5fa5=_0x29178c;let _0x4d975c={};const _0x5a85e0=configpath+_0x5a5fa5(0x32c)+_0xf8ccb2+_0x5a5fa5(0x2b4),_0x82aa12=fs[_0x5a5fa5(0x1e8)](_0x5a85e0);if(_0x82aa12){const _0x52230a=fs[_0x5a5fa5(0x218)](_0x5a85e0);try{const _0x95365e=JSON[_0x5a5fa5(0x23d)](_0x52230a),_0x25ee7e=_0x95365e?_0x95365e[_0x5a5fa5(0x2b6)][0x0][_0x5a5fa5(0x2a4)]:![];_0x4d975c[_0x5a5fa5(0x201)]=_0x25ee7e?_0x5a5fa5(0x1a7):_0x5a5fa5(0x1c4),_0x4d975c[_0x5a5fa5(0x2bf)]=_0x95365e?_0x95365e[_0x5a5fa5(0x2b6)][0x0][_0x5a5fa5(0x2bf)]:_0x5a5fa5(0x1de)+_0xf8ccb2;}catch(_0x1e97b4){_0x4d975c[_0x5a5fa5(0x201)]=_0x5a5fa5(0x1c4),_0x4d975c[_0x5a5fa5(0x2bf)]=_0x5a5fa5(0x1de)+_0xf8ccb2;}}else _0x4d975c[_0x5a5fa5(0x201)]='manual',_0x4d975c[_0x5a5fa5(0x2bf)]=_0x5a5fa5(0x1de)+_0xf8ccb2;return _0x4d975c;}function getBotsWithMode(){const _0x4327a4=_0x29178c,_0x2ebf16=dbConfig[_0x4327a4(0x32d)](_0x4327a4(0x309))[_0x4327a4(0x195)](_0x4327a4(0x222))[_0x4327a4(0x2be)]()||[];return _0x2ebf16[_0x4327a4(0x202)](_0x38cf78=>{const _0x3ea520=_0x4327a4;let _0x113e9c=getBotAttributes(_0x38cf78[_0x3ea520(0x222)]);_0x38cf78[_0x3ea520(0x201)]=_0x113e9c[_0x3ea520(0x201)];}),_0x2ebf16;}async function initUser(){const _0x4714c9=_0x29178c;if(!settings['userid']){const _0x3855a3=uuidRandom();mixpanel['alias'](_0x3855a3),updateSetting(_0x4714c9(0x1bc),_0x3855a3);}}async function initSecure(){const _0x2e4273=_0x29178c;let _0x31f4d2=getSecure();if(!_0x31f4d2[_0x2e4273(0x297)](_0x2e4273(0x2eb))){let _0x5b138f=await generateKeys();_0x31f4d2['publicKey']=_0x5b138f[_0x2e4273(0x260)],_0x31f4d2['privateKey']=_0x5b138f['privateKey'],_0x31f4d2[_0x2e4273(0x2eb)]=crypto[_0x2e4273(0x21f)](0x20)[_0x2e4273(0x1e2)](_0x2e4273(0x1cb));;storeSecure(_0x31f4d2);}}function getSettings(){const _0x164ebc=_0x29178c;return dbSettings['get'](_0x164ebc(0x317))[_0x164ebc(0x2be)]()||{};}function getSecure(){const _0x2188e8=_0x29178c;return dbSecure[_0x2188e8(0x32d)](_0x2188e8(0x26f))[_0x2188e8(0x2be)]()||{};}function getBlacklist(){const _0x1f18b4=_0x29178c;return dbSecure[_0x1f18b4(0x32d)](_0x1f18b4(0x1c3))[_0x1f18b4(0x2be)]()||[];}function broadcastToBots(_0x58c865,_0xf83899){config['forEach'](_0x6b547b=>{const _0x5cb537=_0x35dc;if(_0x6b547b[_0x5cb537(0x1c5)]=='enabled'&&_0x6b547b['live']==_0x5cb537(0x24d)){if(pid[_0x6b547b[_0x5cb537(0x222)]])pid[_0x6b547b[_0x5cb537(0x222)]][_0x5cb537(0x292)]({[_0x58c865]:_0xf83899});}});}function storeSettings(_0x2e0dda,_0x3b1424=![]){const _0x5e3467=_0x29178c;_0x2e0dda={...settings,..._0x2e0dda};if(_0x3b1424&&_0x2e0dda[_0x5e3467(0x1cc)]!=_0x5e3467(0x1ed)&&_0x2e0dda[_0x5e3467(0x1cc)]!=_0x5e3467(0x194)&&_0x2e0dda[_0x5e3467(0x1cc)]!=''){const _0x1475ad=crypt[_0x5e3467(0x212)](secure[_0x5e3467(0x31f)],_0x2e0dda[_0x5e3467(0x1cc)])['message']['split']('@')[0x0],_0x369306=bcrypt[_0x5e3467(0x2b2)](_0x1475ad,saltRounds);_0x2e0dda={..._0x2e0dda,'bbPassword':_0x369306};}if(_0x3b1424&&_0x2e0dda[_0x5e3467(0x25c)]!='************'&&_0x2e0dda[_0x5e3467(0x25c)]!=_0x5e3467(0x194)&&_0x2e0dda[_0x5e3467(0x25c)]!=''){const _0x3bcf6c=crypt[_0x5e3467(0x212)](secure[_0x5e3467(0x31f)],_0x2e0dda[_0x5e3467(0x25c)])[_0x5e3467(0x287)][_0x5e3467(0x29e)]('@')[0x0];_0x2e0dda={..._0x2e0dda,'telegramToken':_0x3bcf6c};}const _0x376379=_0x2e0dda[_0x5e3467(0x25c)]!='************'&&_0x2e0dda[_0x5e3467(0x25c)]!=settings[_0x5e3467(0x25c)]||_0x2e0dda[_0x5e3467(0x30d)]!=settings['telegramUsername'],_0x2de43d=_0x2e0dda[_0x5e3467(0x25c)]==''||_0x2e0dda[_0x5e3467(0x30d)]=='';if(_0x376379)_0x2e0dda[_0x5e3467(0x216)]=_0x5e3467(0x263);for(const [_0x218dad,_0x23aa44]of Object['entries'](_0x2e0dda)){if(_0x218dad==_0x5e3467(0x25c)&&_0x23aa44==_0x5e3467(0x1ed)){_0x2e0dda[_0x5e3467(0x25c)]=settings['telegramToken'];continue;};if(_0x218dad==_0x5e3467(0x1cc)&&_0x23aa44==_0x5e3467(0x1ed)){_0x2e0dda['bbPassword']=settings[_0x5e3467(0x1cc)];continue;};dbSettings[_0x5e3467(0x327)]('settings.'+_0x218dad,_0x23aa44)['write']();}settings=_0x2e0dda,io['to'](_0x5e3467(0x2a7))[_0x5e3467(0x2d4)](_0x5e3467(0x317),cleanSettings()),broadcastToBots(_0x5e3467(0x2ee),settings[_0x5e3467(0x2ee)]);if(_0x376379&&!_0x2de43d)initTelegram();if(_0x376379&&_0x2de43d)disableTelegram();getAllClients()[_0x5e3467(0x202)](_0x47d5d5=>{const _0x4517cb=_0x5e3467;getSocket(_0x47d5d5['id'])[_0x4517cb(0x2d4)](_0x4517cb(0x1c5),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x1a45ec,_0xcda9f0){const _0x382f47=_0x29178c;dbSettings[_0x382f47(0x327)](_0x382f47(0x211)+_0x1a45ec,_0xcda9f0)[_0x382f47(0x30b)](),settings=getSettings(),io['to'](_0x382f47(0x2a7))['emit'](_0x382f47(0x317),cleanSettings());}function storeSecure(_0x530aeb){const _0x32d442=_0x29178c;dbSecure[_0x32d442(0x32d)]('secure')[_0x32d442(0x1df)](_0x530aeb)[_0x32d442(0x30b)](),secure=_0x530aeb;}function addBlacklist(_0xd6197d){const _0x41e6f2=_0x29178c;cleanBlacklist();let _0x53ced6;devices[_0xd6197d][_0x41e6f2(0x25a)]?_0x53ced6=Math[_0x41e6f2(0x1ef)](devices[_0xd6197d][_0x41e6f2(0x25a)]['expiry'],loginExpiry):_0x53ced6=loginExpiry,dbSecure['get']('blacklist')[_0x41e6f2(0x1df)]({'expiry':new Date()[_0x41e6f2(0x27e)]()+_0x53ced6*0x3c*0x3e8,'token':devices[_0xd6197d][_0x41e6f2(0x21e)][_0x41e6f2(0x23b)]})['write'](),blacklist=dbSecure[_0x41e6f2(0x32d)](_0x41e6f2(0x1c3))['value']();}function cleanBlacklist(){const _0x610f6d=_0x29178c;let _0x1f4e1e=dbSecure[_0x610f6d(0x32d)](_0x610f6d(0x1c3))[_0x610f6d(0x2d9)]()[_0x610f6d(0x2be)](),_0xf1b1d6=new Date()[_0x610f6d(0x27e)]();_0x1f4e1e[_0x610f6d(0x202)](_0x1a649d=>{const _0x5ed926=_0x610f6d;_0x1a649d[_0x5ed926(0x1ba)]<_0xf1b1d6&&dbSecure['get'](_0x5ed926(0x1c3))[_0x5ed926(0x1c7)]({'expiry':_0x1a649d[_0x5ed926(0x1ba)]})[_0x5ed926(0x30b)]();});}function initStates(){let _0x35ca61=getConfiguration();_0x35ca61['forEach'](_0x66c960=>{const _0x511b8d=_0x35dc;_0x66c960[_0x511b8d(0x2e5)]='stopped';}),storeConfiguration(_0x35ca61);}function onKeys(){const _0x3be8d2=new RSA();return new Promise(_0x334eb9=>{const _0x5b0c21=_0x35dc;_0x3be8d2['generateKeyPairAsync']()[_0x5b0c21(0x252)](_0x4fdd06=>{_0x334eb9(_0x4fdd06);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x57028a=_0x29178c;let _0x2e4003=getSettings(),_0x2b06ce=![];!_0x2e4003['hasOwnProperty'](_0x57028a(0x199))&&(_0x2e4003['lastmsgtelegram']=0x0,_0x2b06ce=!![]);!_0x2e4003[_0x57028a(0x297)](_0x57028a(0x19c))&&(_0x2e4003['lastmsgemitted']=0x0,_0x2b06ce=!![]);!_0x2e4003['hasOwnProperty'](_0x57028a(0x197))&&(_0x2e4003[_0x57028a(0x197)]=_0x57028a(0x320),_0x2b06ce=!![]);if(_0x2b06ce)storeSettings(_0x2e4003);}function storeConfiguration(_0x27d65e){const _0x5ea320=_0x29178c;dbConfig[_0x5ea320(0x32d)](_0x5ea320(0x309))['remove']()['write'](),_0x27d65e[_0x5ea320(0x202)](_0x1d7fd2=>{const _0x28dbfb=_0x5ea320;delete _0x1d7fd2[_0x28dbfb(0x201)];}),dbConfig[_0x5ea320(0x32d)](_0x5ea320(0x309))['push'](..._0x27d65e)[_0x5ea320(0x30b)](),config=_0x27d65e;}function resetPassword(){const _0x3f1665=_0x29178c;tgBot&&settings[_0x3f1665(0x322)]&&(tgBot[_0x3f1665(0x32e)](_0x3f1665(0x1f0)),tgBot['sendMessage'](settings[_0x3f1665(0x322)],_0x3f1665(0x2c9),{'parse_mode':_0x3f1665(0x26c),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x3f1665(0x27c)},{'text':'no','callback_data':'no'}]]}})[_0x3f1665(0x1ec)](_0x4e0f07=>{telegramError(_0x4e0f07);}),tgBot['on'](_0x3f1665(0x1f0),async _0x375b74=>{const _0x47ebb2=_0x3f1665,_0x2492e6=_0x375b74[_0x47ebb2(0x2b7)],_0x2c16c9=_0x375b74[_0x47ebb2(0x287)];tgBot[_0x47ebb2(0x239)](_0x375b74['id'])['then'](async()=>{const _0x1df2d8=_0x47ebb2;if(_0x2492e6!='no'){const _0x464063=0xf,_0x348eeb=_0x1df2d8(0x244),_0x30e91a=Array[_0x1df2d8(0x193)](crypto[_0x1df2d8(0x249)](new Uint32Array(_0x464063)))[_0x1df2d8(0x20d)](_0x4884b9=>_0x348eeb[_0x4884b9%_0x348eeb['length']])[_0x1df2d8(0x2b1)](''),_0x307051=bcrypt[_0x1df2d8(0x2b2)](_0x30e91a,saltRounds);storeSettings({'bbPassword':_0x307051}),await tgBot[_0x1df2d8(0x2da)](_0x2c16c9[_0x1df2d8(0x210)]['id'],_0x1df2d8(0x192)+_0x30e91a,{'parse_mode':_0x1df2d8(0x26c)})[_0x1df2d8(0x1ec)](_0x403ecc=>{telegramError(_0x403ecc);});}else await tgBot[_0x1df2d8(0x2da)](_0x2c16c9[_0x1df2d8(0x210)]['id'],'Password\x20reset\x20rejected')[_0x1df2d8(0x1ec)](_0x45d119=>{telegramError(_0x45d119);});}),tgBot[_0x47ebb2(0x32e)](_0x47ebb2(0x1f0));}));}async function confirmRestore(_0x217b19,_0x5ede5e){const _0x4901a6=_0x29178c;tgBot&&settings[_0x4901a6(0x322)]&&(tgBot['removeListener']('callback_query'),await tgBot['sendMessage'](settings['telegramChatId'],_0x4901a6(0x281),{'parse_mode':_0x4901a6(0x26c),'reply_markup':{'inline_keyboard':[[{'text':_0x4901a6(0x27c),'callback_data':_0x4901a6(0x27c)},{'text':'no','callback_data':'no'}]]}})[_0x4901a6(0x1ec)](_0x343e90=>{telegramError(_0x343e90);}),tgBot['on']('callback_query',async _0x47684f=>{const _0x496a30=_0x4901a6,_0x70f05c=_0x47684f[_0x496a30(0x2b7)],_0x4496fc=_0x47684f['message'];tgBot[_0x496a30(0x239)](_0x47684f['id'])[_0x496a30(0x252)](async()=>{const _0x155465=_0x496a30;_0x70f05c!='no'?(await tgBot[_0x155465(0x2da)](_0x4496fc[_0x155465(0x210)]['id'],'Restoring\x20bot(s)\x20from\x20backup\x20-\x20Bot\x20Manager\x20will\x20restart\x20once\x20finished',{'parse_mode':_0x155465(0x26c)})[_0x155465(0x1ec)](_0x3f285f=>{telegramError(_0x3f285f);}),unzipFile(_0x217b19,_0x5ede5e)):await tgBot['sendMessage'](_0x4496fc[_0x155465(0x210)]['id'],_0x155465(0x25d))[_0x155465(0x1ec)](_0x3d2981=>{telegramError(_0x3d2981);});}),tgBot[_0x496a30(0x32e)](_0x496a30(0x1f0));}));}function getServerTime(){const _0xcc29fb=_0x29178c,_0x5c3ff9=new Date();return _0x5c3ff9[_0xcc29fb(0x2ec)]()+'/'+(_0x5c3ff9[_0xcc29fb(0x258)]()+0x1)[_0xcc29fb(0x1e2)]()['padStart'](0x2,'0')+'/'+_0x5c3ff9[_0xcc29fb(0x1ac)]()['toString']()[_0xcc29fb(0x285)](0x2,'0')+'\x20'+_0x5c3ff9['getHours']()[_0xcc29fb(0x1e2)]()['padStart'](0x2,'0')+':'+_0x5c3ff9[_0xcc29fb(0x1ae)]()[_0xcc29fb(0x1e2)]()[_0xcc29fb(0x285)](0x2,'0')+':'+_0x5c3ff9[_0xcc29fb(0x28f)]()[_0xcc29fb(0x1e2)]()[_0xcc29fb(0x285)](0x2,'0');}function getTimeStamp(){const _0x59d76a=_0x29178c,_0x486847=shiftedTime();return _0x486847[_0x59d76a(0x2ec)]()+'/'+(_0x486847[_0x59d76a(0x258)]()+0x1)[_0x59d76a(0x1e2)]()[_0x59d76a(0x285)](0x2,'0')+'/'+_0x486847[_0x59d76a(0x1ac)]()[_0x59d76a(0x1e2)]()[_0x59d76a(0x285)](0x2,'0')+'\x20'+_0x486847['getHours']()['toString']()[_0x59d76a(0x285)](0x2,'0')+':'+_0x486847[_0x59d76a(0x1ae)]()[_0x59d76a(0x1e2)]()[_0x59d76a(0x285)](0x2,'0')+':'+_0x486847[_0x59d76a(0x28f)]()[_0x59d76a(0x1e2)]()[_0x59d76a(0x285)](0x2,'0');}function shiftedTime(){const _0x324b1c=_0x29178c,_0x421a7e=new Date();let _0x40c66f=_0x421a7e;if(settings[_0x324b1c(0x2ee)]&&settings[_0x324b1c(0x2ee)]!==0x0)_0x40c66f=fns[_0x324b1c(0x30a)](_0x421a7e,{'hours':settings[_0x324b1c(0x2ee)]});return _0x40c66f;}function startScheduler(){const _0x12a902=_0x29178c,_0x59bf46=new Date()[_0x12a902(0x2ba)](),_0x2b409d=shiftedTime()[_0x12a902(0x2c0)]();_0x2b409d==0x4&&backupConfigFiles();_0x2b409d==0x0&&rotateLogFiles();_0x59bf46%0x6==0x0&&triggerAnalytics();_0x59bf46%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x11850d=_0x29178c;fs[_0x11850d(0x1ea)](configpath,{'withFileTypes':!![]})[_0x11850d(0x202)](_0x5aaab9=>{const _0x15f541=_0x11850d;if(!_0x5aaab9[_0x15f541(0x1e0)]())fs[_0x15f541(0x337)](configpath+_0x5aaab9[_0x15f541(0x323)],configbackuppath+_0x5aaab9['name']);});}function rotateLogFiles(){const _0x592539=_0x29178c,_0x45b05e=fs['statSync'](logspath+_0x592539(0x23c)),_0x32a983=_0x45b05e[_0x592539(0x29d)]/0x400;if(_0x32a983>0x32){let _0x36cd02=fs[_0x592539(0x1ea)](logspath,{'withFileTypes':!![]});_0x36cd02['sort']((_0x2d867e,_0x21375a)=>_0x2d867e[_0x592539(0x323)]<_0x21375a[_0x592539(0x323)]?0x1:_0x21375a[_0x592539(0x323)]<_0x2d867e[_0x592539(0x323)]?-0x1:0x0),_0x36cd02[_0x592539(0x202)](_0xbc6532=>{const _0x24d1bb=_0x592539;if(_0xbc6532[_0x24d1bb(0x323)]==_0x24d1bb(0x2d8))fs[_0x24d1bb(0x337)](logspath+_0xbc6532[_0x24d1bb(0x323)],logspath+'output-003.log');if(_0xbc6532[_0x24d1bb(0x323)]==_0x24d1bb(0x2ea))fs[_0x24d1bb(0x337)](logspath+_0xbc6532[_0x24d1bb(0x323)],logspath+_0x24d1bb(0x2d8));_0xbc6532[_0x24d1bb(0x323)]==_0x24d1bb(0x23c)&&(fs[_0x24d1bb(0x337)](logspath+_0xbc6532[_0x24d1bb(0x323)],logspath+_0x24d1bb(0x2ea)),fs[_0x24d1bb(0x29c)](logspath+_0xbc6532[_0x24d1bb(0x323)],''));});}}async function zipFiles(_0x4ba6a7){const _0xf32d52=_0x29178c;let _0x43f333;if(_0x4ba6a7=='logs')_0x43f333=logspath;if(_0x4ba6a7==_0xf32d52(0x1d2))_0x43f333=configpath;let _0x2311a0=fs[_0xf32d52(0x1ea)](_0x43f333,{'withFileTypes':!![]});const _0x5de61b=new require(_0xf32d52(0x2b9))();_0x2311a0[_0xf32d52(0x202)](_0x30dfb2=>{const _0xce7b89=_0xf32d52;if(!_0x30dfb2[_0xce7b89(0x1e0)]()){let _0x558f8f=fs['readFileSync'](_0x43f333+_0x30dfb2['name']);const _0x251fbe=/^bot-[0-9]{3}-config.json$/,_0x31c0c1=_0x251fbe[_0xce7b89(0x2cc)](_0x30dfb2['name']);if(_0x31c0c1){const _0x23fff2=JSON[_0xce7b89(0x23d)](_0x558f8f);_0x23fff2['bot'][0x0][_0xce7b89(0x1c8)]=_0xce7b89(0x194),_0x23fff2[_0xce7b89(0x2b6)][0x0][_0xce7b89(0x333)]='***',_0x558f8f=JSON[_0xce7b89(0x262)](_0x23fff2,null,0x2);}if(_0x30dfb2[_0xce7b89(0x323)]==_0xce7b89(0x2c6)){const _0x55cdd6=JSON[_0xce7b89(0x23d)](_0x558f8f);if(_0x55cdd6[_0xce7b89(0x317)]['loginRequired'])_0x55cdd6[_0xce7b89(0x317)][_0xce7b89(0x220)]=![];if(_0x55cdd6[_0xce7b89(0x317)]['bbPassword'])_0x55cdd6[_0xce7b89(0x317)][_0xce7b89(0x1cc)]=_0xce7b89(0x194);if(_0x55cdd6[_0xce7b89(0x317)][_0xce7b89(0x25c)])_0x55cdd6['settings'][_0xce7b89(0x25c)]=_0xce7b89(0x194);if(_0x55cdd6[_0xce7b89(0x317)][_0xce7b89(0x322)])_0x55cdd6[_0xce7b89(0x317)]['telegramChatId']=null;_0x558f8f=JSON[_0xce7b89(0x262)](_0x55cdd6,null,0x2);}if(_0x30dfb2[_0xce7b89(0x323)]!=_0xce7b89(0x19d))_0x5de61b['file'](_0x30dfb2[_0xce7b89(0x323)],_0x558f8f);}});const _0x2439b6=_0x5de61b[_0xf32d52(0x312)]({'base64':![],'compression':_0xf32d52(0x2a6)});fs[_0xf32d52(0x29c)](zippath+(_0x4ba6a7+'.zip'),_0x2439b6,'binary');}async function unzipFile(_0x560668,_0x51e545){const _0x4fc229=_0x29178c;await backupConfigFiles(),fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x4fc229(0x202)](_0x27172c=>{const _0x2f4963=_0x4fc229;if(!_0x27172c[_0x2f4963(0x1e0)]())fs[_0x2f4963(0x331)](configpath+_0x27172c[_0x2f4963(0x323)]);});const _0x3deee8=fs[_0x4fc229(0x218)](_0x560668+_0x51e545,'binary'),_0x28ab9d=new require(_0x4fc229(0x2b9))(_0x3deee8,{'base64':![],'checkCRC32':!![]});Object['keys'](_0x28ab9d[_0x4fc229(0x265)])[_0x4fc229(0x202)](_0x17fbae=>{const _0x1b894f=_0x4fc229,_0x39c101=_0x28ab9d[_0x1b894f(0x265)][_0x17fbae];fs['writeFileSync'](configpath+_0x39c101[_0x1b894f(0x323)],_0x39c101[_0x1b894f(0x2ce)]);}),fs[_0x4fc229(0x1ea)](temppath,{'withFileTypes':!![]})[_0x4fc229(0x202)](_0x486643=>{const _0x54f12e=_0x4fc229;if(!_0x486643[_0x54f12e(0x1e0)]())fs[_0x54f12e(0x331)](temppath+_0x486643[_0x54f12e(0x323)]);}),process[_0x4fc229(0x292)]({'restore':!![]},_0x10e00f=>{});}async function getPublicIp(){const _0x30d0d5=_0x29178c;try{const _0x33fecb=await axios[_0x30d0d5(0x32d)](_0x30d0d5(0x319));publicip=_0x33fecb[_0x30d0d5(0x2b7)]['ip'];}catch(_0x2adfb2){}}async function triggerAnalytics(){const _0xba0bb5=_0x29178c;if(!publicip)await getPublicIp();const _0x3a4dc9=getBotsWithMode();let _0x40cb1f=0x0;_0x3a4dc9[_0xba0bb5(0x202)](_0x114b9e=>{const _0x45a4ec=_0xba0bb5;if(_0x114b9e[_0x45a4ec(0x1c5)]===_0x45a4ec(0x229))_0x40cb1f++;}),mixpanel[_0xba0bb5(0x2f5)]('Server',{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x3a4dc9[_0xba0bb5(0x1d7)],'numbotsenabled':_0x40cb1f});}async function getMessages(){const _0x6be8da=_0x29178c,_0x270bb0='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x36fa22=new GraphQLClient(_0x270bb0),_0x572c91={'authorization':_0x6be8da(0x324)},_0xa8339a=serverversion[_0x6be8da(0x29e)]('.'),_0x4c6b00=_0xa8339a[0x0]+'.'+_0xa8339a[0x1],_0x324a29=Math[_0x6be8da(0x236)](settings[_0x6be8da(0x199)],settings[_0x6be8da(0x19c)]),_0x2c501e={'last':parseInt(_0x324a29),'bbm':_0x4c6b00},_0xacba6c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x33a761;try{_0x33a761=await _0x36fa22[_0x6be8da(0x2d2)](_0xacba6c,_0x2c501e,_0x572c91);}catch(_0x5525fb){}if(_0x33a761&&_0x33a761[_0x6be8da(0x23f)]){let _0xa4265a=settings['lastmsgtelegram'];newMessages=[];for(const _0x68090c of _0x33a761[_0x6be8da(0x23f)]){newMessages[_0x6be8da(0x1df)](_0x68090c);if(_0x68090c[_0x6be8da(0x226)])updateSetting('latestversion',_0x68090c['bbvNew']);let _0x34b845=_0x68090c[_0x6be8da(0x226)]?serverversion>=_0x68090c['bbvNew']:![];if(!_0x34b845&&_0x68090c[_0x6be8da(0x2aa)]>_0xa4265a){if(_0x68090c['bbvReceive']==='any'||serverversion['startsWith'](_0x68090c[_0x6be8da(0x1fd)])){let _0x91bd26=''+_0x68090c[_0x6be8da(0x31c)]+'\x0a\x0a'+_0x68090c[_0x6be8da(0x287)];const _0x118abc=await sendTelegramMsg(toTelegramMarkdown(_0x91bd26),'Markdown');if(_0x118abc)_0xa4265a=_0x68090c[_0x6be8da(0x2aa)];}}}updateAvailable=isNewerVersion(settings[_0x6be8da(0x197)],serverversion),updateSetting('lastmsgtelegram',_0xa4265a),emitMessages();}}function emitMessages(){const _0x20e8fa=_0x29178c,_0x7fa858=settings['lastmsgemitted'];let _0x58de73=[];newMessages['forEach'](_0x3ac7d4=>{const _0xec85ce=_0x35dc;_0x3ac7d4[_0xec85ce(0x2aa)]>_0x7fa858&&_0x58de73['push'](_0x3ac7d4);}),_0x58de73['length']>0x0&&getAllClients()[_0x20e8fa(0x202)](_0x455ce1=>{const _0x3b640f=_0x20e8fa;getSocket(_0x455ce1['id'])[_0x3b640f(0x2d4)](_0x3b640f(0x287),_0x58de73);});}function confirmMessage(_0x1340d0){const _0x255af3=_0x29178c;updateSetting(_0x255af3(0x19c),Number(_0x1340d0));}function isNewerVersion(_0x3bd76d,_0x1a4b11){const _0x56e453=_0x29178c,_0x45f0b6=_0x1a4b11['split']('.'),_0x122d0e=_0x3bd76d['split']('.');for(var _0x10d605=0x0;_0x10d605<_0x122d0e[_0x56e453(0x1d7)];_0x10d605++){const _0x5a62a8=~~_0x122d0e[_0x10d605],_0x5e63a7=~~_0x45f0b6[_0x10d605];if(_0x5a62a8>_0x5e63a7)return!![];if(_0x5a62a8<_0x5e63a7)return![];}return![];}function toTelegramMarkdown(_0x4e6324){const _0x4dd189=_0x29178c,_0x5ab2ba=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x3c81a0=/\*{2}(.+?)\*{2}/gim;return _0x4e6324=_0x4e6324[_0x4dd189(0x240)](_0x5ab2ba,_0x4dd189(0x213))[_0x4dd189(0x240)](_0x3c81a0,_0x4dd189(0x1b8)),_0x4e6324;}async function validateConfigFile(){const _0x43bf13=_0x29178c,_0x2e91a6=dbConfig[_0x43bf13(0x32d)](_0x43bf13(0x309))[_0x43bf13(0x195)]('botID')[_0x43bf13(0x2be)]()||[];if(_0x2e91a6[_0x43bf13(0x1d7)]==0x0){let _0x71aa14=0x0,_0x1e2156=[];const _0xa28df0=/^bot-([0-9]{3})-config.json$/,_0x4c32fb=fs['readdirSync'](configpath);_0x4c32fb['forEach'](_0x1f4711=>{const _0x9840ab=_0x43bf13,_0x2a0465=_0xa28df0[_0x9840ab(0x296)](_0x1f4711);if(_0x2a0465){const _0x2f6de0=_0x2a0465[0x1];let _0x5b0191=getBotAttributes(_0x2f6de0);_0x1e2156['push']({'botID':_0x2f6de0,'botname':_0x5b0191[_0x9840ab(0x2bf)],'status':_0x9840ab(0x277),'live':_0x9840ab(0x307)}),_0x71aa14++;}}),_0x71aa14!=0x0&&(dbConfig[_0x43bf13(0x32d)](_0x43bf13(0x309))['assign'](_0x1e2156)[_0x43bf13(0x30b)](),config=_0x1e2156,restoredConfigFile=_0x71aa14);}}async function restoreConfigNotify(_0x1649c8){const _0x416b89=_0x29178c;let _0x1bcf10;if(restoredConfigFile==0x1)_0x1bcf10=_0x416b89(0x293);else _0x1bcf10=_0x416b89(0x332);if(_0x1649c8)io['to'](_0x416b89(0x2a7))['emit'](_0x416b89(0x2ae),_0x1bcf10);else{logger[_0x416b89(0x254)](_0x416b89(0x20b)),logger[_0x416b89(0x254)](_0x1bcf10),logger[_0x416b89(0x254)](_0x416b89(0x20b)),logger[_0x416b89(0x254)]('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x416b89(0x2ef))tgBot[_0x416b89(0x2da)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x1bcf10)[_0x416b89(0x1ec)](_0x28010e=>{telegramError(_0x28010e);});}}function validateCredentials(_0x399aa4,_0x567fe9){const _0x109e17=_0x29178c;if(_0x399aa4['username']==settings['bbUsername']&&bcrypt[_0x109e17(0x325)](_0x399aa4[_0x109e17(0x1a0)],settings[_0x109e17(0x1cc)])){if(settings[_0x109e17(0x2e4)])return{'allow':![],'reason':_0x109e17(0x227),'token':null};else{const _0x1722ab=generateLoginToken(_0x567fe9);return{'allow':!![],'reason':_0x109e17(0x270),'token':_0x1722ab};}}else return{'allow':![],'reason':_0x109e17(0x269),'token':null};}function refreshToken(_0x23e9bd){const _0x2dc0ca=_0x29178c,_0x23c377=generateLoginToken(_0x23e9bd);return{'allow':!![],'reason':_0x2dc0ca(0x270),'token':_0x23c377};}function validateAccess(_0x1c3316,_0x5e337e,_0x1fbcf6){const _0x2b9b87=_0x29178c,_0x364521=_0x1fbcf6?_0x1fbcf6:devices[_0x5e337e]['ip'];let _0x589930;const _0x1ecb05=_0x432587=>{const _0x24cb37=_0x35dc;if(settings[_0x24cb37(0x220)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x5e337e)){const _0x3f726c=generateLoginToken(_0x5e337e);return{'allow':!![],'reason':_0x24cb37(0x316),'token':_0x3f726c};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x589930=validToken(_0x432587,_0x5e337e),_0x589930['hasOwnProperty'](_0x24cb37(0x2f9))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x432587}:{'allow':![],'reason':_0x24cb37(0x246),'token':null};}else return{'allow':!![],'reason':_0x24cb37(0x273),'token':null};};if(settings[_0x2b9b87(0x1eb)]){let _0x2746b5=[...settings[_0x2b9b87(0x1aa)],'::1',_0x2b9b87(0x1f1),_0x2b9b87(0x304)];if(_0x2746b5[_0x2b9b87(0x31d)](_0x364521))return _0x1ecb05(_0x1c3316);else{_0x589930=validToken(_0x1c3316,_0x5e337e);if(_0x589930[_0x2b9b87(0x297)]('success'))return _0x1ecb05(_0x1c3316);else{if(telegramIpApproved(_0x5e337e)){const _0x550243=generateToken(_0x5e337e);return _0x589930=_0x1ecb05(_0x1c3316),_0x589930[_0x2b9b87(0x29f)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x550243}:_0x589930;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x2b9b87(0x279),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1ecb05(_0x1c3316);}function timelyDecrypt(_0x38e341,_0xb6c1e5=!![]){const _0x55f1f0=_0x29178c;if(_0x38e341)try{const _0x330850=crypt[_0x55f1f0(0x212)](secure[_0x55f1f0(0x31f)],_0x38e341)[_0x55f1f0(0x287)],_0x2a8345=_0x330850[_0x55f1f0(0x29e)]('@')[0x0],_0x32860d=_0x330850['split']('@')[0x1],_0x4296f8=new Date()[_0x55f1f0(0x27e)]();if(_0xb6c1e5){if(_0x4296f8-_0x32860d<maxSecretAge*0x3e8)return _0x2a8345;else return![];}else return _0x2a8345;}catch(_0x483f27){return![];}else return![];}const validToken=(_0x43241a,_0x2eeacf)=>{const _0x30bf64=_0x29178c,_0x359233=devices[_0x2eeacf]['ip'];if(!_0x43241a)return{'error':_0x30bf64(0x272)};for(let _0x16a231 of blacklist){if(_0x16a231['token']==_0x43241a)return{'error':'Token\x20blacklisted'};}let _0x4cd756;try{_0x4cd756=jwt['verify'](_0x43241a,secure['secret']+_0x2eeacf);}catch{return{'error':_0x30bf64(0x1d6)};}if(!_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x1d0))&&!_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x24e))||!_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x2c7)))return{'error':_0x30bf64(0x2ca)};if(!_0x4cd756['hasOwnProperty']('username')&&_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x1d0))){const {clientip:_0x4ceb6a}=_0x4cd756;return _0x359233==_0x4ceb6a?{'success':_0x30bf64(0x1e1)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x24e))&&_0x4cd756[_0x30bf64(0x297)](_0x30bf64(0x1d0))){const {username:_0xe45d85,clientip:_0x3240d4}=_0x4cd756;return settings[_0x30bf64(0x314)]==_0xe45d85&&_0x359233==_0x3240d4?{'success':_0x30bf64(0x1e1)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x8af259=>{const _0x30cfa7=_0x29178c;if(_0x8af259){const _0x1a1275=devices[_0x8af259]['ip'];return jwt[_0x30cfa7(0x2f2)]({'username':settings['bbUsername'],'clientip':_0x1a1275},secure[_0x30cfa7(0x2eb)]+_0x8af259,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x4fdf36=>{const _0x253a61=_0x29178c;if(_0x4fdf36){const _0x5646b1=devices[_0x4fdf36]['ip'];return jwt[_0x253a61(0x2f2)]({'clientip':_0x5646b1},secure[_0x253a61(0x2eb)]+_0x4fdf36,{'expiresIn':devices[_0x4fdf36][_0x253a61(0x25a)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x337c2d=>{const _0x1f6ca1=_0x29178c;let _0x2e4622=![];return devices[_0x337c2d][_0x1f6ca1(0x25a)]&&devices[_0x337c2d][_0x1f6ca1(0x25a)][_0x1f6ca1(0x1ba)]!=_0x1f6ca1(0x290)&&(_0x2e4622=devices[_0x337c2d][_0x1f6ca1(0x25a)][_0x1f6ca1(0x1d0)]==devices[_0x337c2d]['ip']&&new Date()[_0x1f6ca1(0x27e)]()-devices[_0x337c2d][_0x1f6ca1(0x25a)][_0x1f6ca1(0x1f6)]<devices[_0x337c2d][_0x1f6ca1(0x25a)][_0x1f6ca1(0x1ba)]*0x3c*0x3e8),_0x2e4622;},telegram2FaApproved=_0x2a9a77=>{const _0x72f9fe=_0x29178c;let _0x375e44=![];return devices[_0x2a9a77][_0x72f9fe(0x28c)]&&devices[_0x2a9a77][_0x72f9fe(0x28c)][_0x72f9fe(0x1ba)]!='reject'&&(_0x375e44=devices[_0x2a9a77][_0x72f9fe(0x28c)][_0x72f9fe(0x1d0)]==devices[_0x2a9a77]['ip']&&new Date()['getTime']()-devices[_0x2a9a77][_0x72f9fe(0x28c)][_0x72f9fe(0x1f6)]<devices[_0x2a9a77][_0x72f9fe(0x28c)][_0x72f9fe(0x1ba)]*0x3c*0x3e8),_0x375e44;},normalizeIP=_0x448ec4=>{const _0x307397=_0x29178c;let _0x3a1e58=null,_0x4b4a54=null;if(ipaddr[_0x307397(0x271)](_0x448ec4)){const _0x4f7924=ipaddr[_0x307397(0x23d)](_0x448ec4);_0x4f7924[_0x307397(0x257)]()==='ipv6'?(_0x4f7924[_0x307397(0x20a)]()&&(_0x3a1e58=_0x4f7924['toIPv4Address']()[_0x307397(0x1e2)]()),_0x4b4a54=_0x4f7924[_0x307397(0x1e2)]()):(_0x3a1e58=_0x4f7924['toString'](),_0x4b4a54=_0x4f7924[_0x307397(0x284)]()['toString']());}return{'show':_0x3a1e58?_0x3a1e58:_0x4b4a54,'store':_0x4b4a54};};function sleep(_0x5b88a2){return new Promise(_0x167853=>setTimeout(_0x167853,_0x5b88a2));}