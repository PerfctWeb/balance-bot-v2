const _0x2474d0=_0x5283;(function(_0x1b9260,_0x46600f){const _0x5ecece=_0x5283,_0x3df735=_0x1b9260();while(!![]){try{const _0x33f94c=-parseInt(_0x5ecece(0x295))/0x1*(parseInt(_0x5ecece(0x2d0))/0x2)+parseInt(_0x5ecece(0x240))/0x3+-parseInt(_0x5ecece(0x281))/0x4+parseInt(_0x5ecece(0x22e))/0x5*(parseInt(_0x5ecece(0x29e))/0x6)+-parseInt(_0x5ecece(0x2d3))/0x7*(parseInt(_0x5ecece(0x29b))/0x8)+parseInt(_0x5ecece(0x191))/0x9+-parseInt(_0x5ecece(0x1eb))/0xa*(parseInt(_0x5ecece(0x1d8))/0xb);if(_0x33f94c===_0x46600f)break;else _0x3df735['push'](_0x3df735['shift']());}catch(_0x171303){_0x3df735['push'](_0x3df735['shift']());}}}(_0x4f65,0xce6a9));const _0x438288=function(){let _0x45a3b0=!![];return function(_0x2e8a0f,_0x382ac4){const _0x5e5008=_0x45a3b0?function(){const _0x2b2aeb=_0x5283;if(_0x382ac4){const _0x55c491=_0x382ac4[_0x2b2aeb(0x294)](_0x2e8a0f,arguments);return _0x382ac4=null,_0x55c491;}}:function(){};return _0x45a3b0=![],_0x5e5008;};}(),_0x26ac4f=_0x438288(this,function(){const _0x4532bd=_0x5283;return _0x26ac4f[_0x4532bd(0x175)]()[_0x4532bd(0x178)](_0x4532bd(0x1e3))[_0x4532bd(0x175)]()[_0x4532bd(0x1b6)](_0x26ac4f)[_0x4532bd(0x178)](_0x4532bd(0x1e3));});_0x26ac4f();'use strict';process[_0x2474d0(0x172)][_0x2474d0(0x149)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x2474d0(0x2a5)),low=require(_0x2474d0(0x217)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x2474d0(0x2a4)),crypto=require(_0x2474d0(0x2d4)),Crypt=require(_0x2474d0(0x1b3))[_0x2474d0(0x180)],RSA=require(_0x2474d0(0x1b3))[_0x2474d0(0x269)],bcrypt=require('bcryptjs'),jwt=require(_0x2474d0(0x1dc)),ipaddr=require('ipaddr.js'),argv=require(_0x2474d0(0x182))(process['argv'][_0x2474d0(0x293)](0x2))['argv'],uuidRandom=require(_0x2474d0(0x15c)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x2474d0(0x2aa)),axios=require(_0x2474d0(0x20a)),{GraphQLClient,gql}=require('graphql-request'),util=require(_0x2474d0(0x29d)),fileUpload=require('express-fileupload'),PORT=argv[_0x2474d0(0x1d3)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x2474d0(0x1a8)](PORT)&&(console[_0x2474d0(0x1ee)](_0x2474d0(0x272)+PORT+_0x2474d0(0x2b4)),process[_0x2474d0(0x243)](0x1));const HOST=argv['host']||null,userID=argv[_0x2474d0(0x2bb)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x2474d0(0x27f),configfile='bb-config.json',settingsfile=_0x2474d0(0x1e7),securefile=_0x2474d0(0x242);let validInstallation=!![];!fs[_0x2474d0(0x18c)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x2474d0(0x14c),configbackuppath=configpath+_0x2474d0(0x194),logspath=userID?bbpath+_0x2474d0(0x28d)+userID+'/':bbpath+_0x2474d0(0x28d),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x2474d0(0x224),loggerfile=fs['createWriteStream'](logspath+_0x2474d0(0x21c),{'flags':'a'}),temppath=userID?bbpath+_0x2474d0(0x229)+userID+'/':bbpath+'temp/';!fs[_0x2474d0(0x18c)](configpath)&&fs[_0x2474d0(0x241)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x2474d0(0x241)](configbackuppath);!fs['existsSync'](logspath)&&fs['mkdirSync'](logspath);!fs[_0x2474d0(0x18c)](zippath)&&fs[_0x2474d0(0x241)](zippath);!fs[_0x2474d0(0x18c)](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2474d0(0x1f7)]({'bots':[]})[_0x2474d0(0x1c3)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2474d0(0x267)}})[_0x2474d0(0x1c3)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x2474d0(0x218),'rsaStandard':_0x2474d0(0x190)});const saltRounds=0xa,mixpanel=Mixpanel['init']('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x2474d0(0x1de)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x2474d0(0x1c0)]!=''&&settings['telegramUsername']&&settings[_0x2474d0(0x1e0)]!='')initTelegram();const logger={'screen':_0x22f232=>{console['log'](_0x22f232);},'simple':_0x10e3de=>{const _0x5c1347=_0x2474d0;console[_0x5c1347(0x1ee)](_0x10e3de),loggerfile[_0x5c1347(0x1c3)](util[_0x5c1347(0x1cc)](_0x10e3de)+'\x0a');},'full':async _0x79a363=>{const _0x5ab6f0=_0x2474d0,_0xcba449=getTimeStamp()+_0x5ab6f0(0x220)+_0x79a363;console[_0x5ab6f0(0x1ee)](_0xcba449),loggerfile[_0x5ab6f0(0x1c3)](util[_0x5ab6f0(0x1cc)](_0xcba449)+'\x0a');if(tgBot&&settings[_0x5ab6f0(0x16f)]&&settings[_0x5ab6f0(0x19a)]!='orders')await tgBot[_0x5ab6f0(0x2d1)](settings[_0x5ab6f0(0x16f)],_0x5ab6f0(0x18d)+_0x79a363)[_0x5ab6f0(0x14b)](_0x210238=>{telegramError(_0x210238);});}};process['on']('uncaughtException',function(_0x1d9020){const _0x2b36d3=_0x2474d0;logger[_0x2b36d3(0x273)](_0x1d9020);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x2474d0(0x2ce)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require('express'),app=express(),http=require(_0x2474d0(0x216))[_0x2474d0(0x1a6)](app);app['use'](fileUpload({'useTempFiles':!![]})),app['get'](_0x2474d0(0x2cd),async(_0x33a4cf,_0x5d1525)=>{const _0x56b570=_0x2474d0,_0x1ddc7f=_0x33a4cf[_0x56b570(0x17b)][_0x56b570(0x16c)],_0x2699dd=getClientsWithBotID(_0x56b570(0x14f)),_0x25f985=_0x33a4cf[_0x56b570(0x19e)][_0x56b570(0x2bc)],_0xa770d=timelyDecrypt(_0x25f985,![]),_0x92f626=_0x2699dd['find'](_0x5a10ed=>_0x5a10ed[_0x56b570(0x2bc)]==_0xa770d);if(_0x92f626){const _0x1ba396=normalizeIP(_0x33a4cf[_0x56b570(0x151)][_0x56b570(0x238)])[_0x56b570(0x13d)],_0x40189d=_0x33a4cf[_0x56b570(0x19e)][_0x56b570(0x200)];if(validateAccess(_0x40189d,_0xa770d,_0x1ba396)[_0x56b570(0x1e9)])await zipFiles(_0x1ddc7f),_0x5d1525[_0x56b570(0x208)](zippath+(_0x1ddc7f+_0x56b570(0x173)),_0x5a7edd=>{const _0x1c6283=_0x56b570;_0x5a7edd&&(logger['full'](_0x1c6283(0x221)+_0x1ddc7f),logger[_0x1c6283(0x273)](_0x5a7edd));});else logger[_0x56b570(0x165)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x1ddc7f+_0x56b570(0x215));}else logger[_0x56b570(0x165)](_0x56b570(0x2c4)+_0x1ddc7f+_0x56b570(0x262));}),app[_0x2474d0(0x219)]('/upload-backup',async(_0x8dc508,_0xa88613)=>{const _0x1fcc5f=_0x2474d0,_0x58a2d7=getClientsWithBotID(_0x1fcc5f(0x14f)),_0x157d4f=_0x8dc508[_0x1fcc5f(0x19e)]['uuid'],_0xb8ce14=timelyDecrypt(_0x157d4f,![]),_0x46315c=_0x58a2d7['find'](_0x5803d3=>_0x5803d3[_0x1fcc5f(0x2bc)]==_0xb8ce14);if(_0x46315c){const _0x1587e7=normalizeIP(_0x8dc508[_0x1fcc5f(0x151)][_0x1fcc5f(0x238)])[_0x1fcc5f(0x13d)],_0x2e671e=_0x8dc508[_0x1fcc5f(0x19e)][_0x1fcc5f(0x200)];if(validateAccess(_0x2e671e,_0xb8ce14,_0x1587e7)[_0x1fcc5f(0x1e9)]){if(_0x8dc508['files']){const _0x87db1c=_0x8dc508[_0x1fcc5f(0x1c4)]['backupfile'];await _0x87db1c['mv'](temppath+_0x87db1c[_0x1fcc5f(0x1fb)]),_0xa88613[_0x1fcc5f(0x2af)]({'status':!![],'message':_0x1fcc5f(0x210)}),confirmRestore(temppath,_0x87db1c['name']);}}else logger[_0x1fcc5f(0x165)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger['full'](_0x1fcc5f(0x239));}),app[_0x2474d0(0x2ac)](express['static'](path[_0x2474d0(0x278)](__dirname,bbpath2,_0x2474d0(0x2b2)))),app[_0x2474d0(0x2ac)](express['static'](path['join'](__dirname,bbpath2,'build'))),app['get']('/',function(_0x4a4657,_0x1ff3b2){const _0x5f1b9a=_0x2474d0;_0x1ff3b2[_0x5f1b9a(0x26a)](path[_0x5f1b9a(0x278)](__dirname,bbpath2,_0x5f1b9a(0x2b2),_0x5f1b9a(0x250)));}),app[_0x2474d0(0x192)](_0x2474d0(0x287),function(_0x675163,_0x3b96fa){const _0x50df7c=_0x2474d0;_0x3b96fa[_0x50df7c(0x26a)](path[_0x50df7c(0x278)](__dirname,bbpath2,_0x50df7c(0x2a6),'index.html'));}),app[_0x2474d0(0x192)](_0x2474d0(0x1ba),(_0x59c058,_0x486643)=>{const _0x182451=_0x2474d0;_0x486643['sendFile'](path[_0x182451(0x278)](__dirname,bbpath2,_0x182451(0x2a6),_0x182451(0x250)));}),app[_0x2474d0(0x192)]('/:bot/performance',(_0x3ecafe,_0x19ba7c)=>{const _0x7b65fe=_0x2474d0;_0x19ba7c[_0x7b65fe(0x26a)](path['join'](__dirname,bbpath2,'build',_0x7b65fe(0x250)));}),app[_0x2474d0(0x192)](_0x2474d0(0x2d9),(_0x436349,_0x1027a2)=>{const _0x536fb2=_0x2474d0;_0x1027a2[_0x536fb2(0x26a)](path['join'](__dirname,bbpath2,_0x536fb2(0x2a6),_0x536fb2(0x250)));}),app['get'](_0x2474d0(0x1b5),(_0x3fac8c,_0x572d38)=>{const _0xc7d28f=_0x2474d0;_0x572d38[_0xc7d28f(0x26a)](path[_0xc7d28f(0x278)](__dirname,bbpath2,'build',_0xc7d28f(0x250)));}),app[_0x2474d0(0x192)](_0x2474d0(0x1d9),(_0x278f88,_0x4055a5)=>{const _0x2a3041=_0x2474d0;_0x4055a5[_0x2a3041(0x26a)](path[_0x2a3041(0x278)](__dirname,bbpath2,'build',_0x2a3041(0x250)));}),app[_0x2474d0(0x192)](_0x2474d0(0x15a),(_0x463cfd,_0x4fa56c)=>{const _0x414853=_0x2474d0;_0x4fa56c[_0x414853(0x26a)](path[_0x414853(0x278)](__dirname,bbpath2,'build',_0x414853(0x250)));});if(HOST)http['listen'](PORT,HOST);else http[_0x2474d0(0x228)](PORT);const io=require(_0x2474d0(0x143))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0xb18d72=_0x2474d0;logger['simple'](''),logger[_0xb18d72(0x273)](_0xb18d72(0x157)),await logger['full'](_0xb18d72(0x29a)+PORT),logger[_0xb18d72(0x273)](_0xb18d72(0x157));if(config[_0xb18d72(0x202)]!=0x0)for(const _0x1e4f9a of config){if(_0x1e4f9a[_0xb18d72(0x14e)]==_0xb18d72(0x162)||_0x1e4f9a[_0xb18d72(0x14e)]==_0xb18d72(0x197))await logger['full'](_0xb18d72(0x2b8)+_0x1e4f9a['botID']+'\x20|\x20'+_0x1e4f9a[_0xb18d72(0x27b)]),startBot([_0x1e4f9a[_0xb18d72(0x22d)],userID],{'cwd':bbpath},function(_0x397802){const _0xa27d51=_0xb18d72;if(_0x397802)logger[_0xa27d51(0x165)](_0x397802);});else(_0x1e4f9a[_0xb18d72(0x14e)]=='disabled'||_0x1e4f9a['status']=='new-disabled')&&await logger[_0xb18d72(0x165)](_0xb18d72(0x1c2)+_0x1e4f9a[_0xb18d72(0x22d)]+_0xb18d72(0x207)+_0x1e4f9a[_0xb18d72(0x27b)]);}else!newBot&&logger[_0xb18d72(0x273)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0xb18d72(0x273)](_0xb18d72(0x157)),logger[_0xb18d72(0x273)]('');}function startSocket(){const _0x3cc77d=_0x2474d0;io['on'](_0x3cc77d(0x1aa),_0x422e66=>{const _0x445469=_0x3cc77d;let _0xf35723,_0x10f5e1,_0x4e0ece,_0xe10c5e,_0x28f0bb;const _0x55ea5a=_0x422e66[_0x445469(0x2c3)][_0x445469(0x19e)]['referer'];_0x10f5e1=_0x55ea5a['match'](/bot[0-9]{3}/);if(_0x10f5e1)_0x4e0ece=_0x10f5e1[0x0][_0x445469(0x1cb)](/[0-9]{3}/);if(_0x4e0ece)_0xf35723=_0x4e0ece[0x0];else _0xf35723=_0x445469(0x14f);const _0x16620c=_0x422e66[_0x445469(0x2c3)][_0x445469(0x1b0)][_0x445469(0x249)];if(!_0x16620c)_0x422e66[_0x445469(0x2be)]('status',{'publicKey':secure[_0x445469(0x2ad)]});else{_0xe10c5e=timelyDecrypt(_0x16620c,![]);if(!_0xe10c5e)_0x422e66[_0x445469(0x2be)](_0x445469(0x14e),{'publicKey':secure[_0x445469(0x2ad)]});else{_0x28f0bb=normalizeIP(_0x422e66[_0x445469(0x2ba)]['remoteAddress'])['store'];if(!devices[_0xe10c5e])devices[_0xe10c5e]={'uuid':_0xe10c5e,'access':{'token':null}};devices[_0xe10c5e]['ip']=_0x28f0bb;const _0x5b1e58=addClient(_0x422e66['id'],_0xe10c5e,_0xf35723);setAccess(_0x5b1e58),emitMessages(),_0x422e66['on']('login',_0x18c914=>{const _0x8cb8a3=_0x445469,_0x40d60f=timelyDecrypt(_0x18c914[_0x8cb8a3(0x260)]);if(_0x40d60f){_0x18c914={'username':_0x18c914[_0x8cb8a3(0x26d)],'password':_0x40d60f},devices[_0xe10c5e][_0x8cb8a3(0x24d)]=validateCredentials(_0x18c914,_0xe10c5e);if(devices[_0xe10c5e][_0x8cb8a3(0x24d)][_0x8cb8a3(0x1e9)]==![]&&devices[_0xe10c5e]['access'][_0x8cb8a3(0x2c2)]==_0x8cb8a3(0x20c))_0x422e66[_0x8cb8a3(0x2be)]('status',{'access':devices[_0xe10c5e][_0x8cb8a3(0x24d)]}),loginAccess2FA(_0xe10c5e,_0x28f0bb);else{if(devices[_0xe10c5e][_0x8cb8a3(0x24d)]['allow']==![]&&devices[_0xe10c5e]['access'][_0x8cb8a3(0x2c2)]=='invalid\x20credentials')_0x422e66['emit'](_0x8cb8a3(0x14e),{'access':devices[_0xe10c5e][_0x8cb8a3(0x24d)]});else devices[_0xe10c5e][_0x8cb8a3(0x24d)][_0x8cb8a3(0x1e9)]&&devices[_0xe10c5e][_0x8cb8a3(0x24d)][_0x8cb8a3(0x2c2)]==_0x8cb8a3(0x277)&&(getClientsWithUuid(_0xe10c5e)[_0x8cb8a3(0x1d4)](_0x2e7aeb=>{setAccess(_0x2e7aeb);}),setTokenRefresh(_0xe10c5e),setSessionTimeout(_0x8cb8a3(0x1ef),_0xe10c5e));}}else logger[_0x8cb8a3(0x165)](_0x8cb8a3(0x2b7));}),_0x422e66['on'](_0x445469(0x158),()=>{resetPassword();}),_0x422e66['on'](_0x445469(0x2c1),_0x4855a7=>{removeClient(_0x422e66['id']);}),_0xf35723==_0x445469(0x14f)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x160812){const _0x3b78d4=_0x2474d0;if(_0x160812!='botmanager'&&config['apiKey']!=''){if(pid[_0x160812])pid[_0x160812][_0x3b78d4(0x2af)]({'function':_0x3b78d4(0x244),'args':null});}}function reloadBotManager(){const _0x3d9e44=_0x2474d0;getClientsWithBotID(_0x3d9e44(0x14f))[_0x3d9e44(0x1d4)](_0x378e93=>{const _0x318217=_0x3d9e44;getSocket(_0x378e93['id'])[_0x318217(0x2be)](_0x318217(0x14e),{'access':{'allow':![],'reason':_0x318217(0x1a4),'token':null}});});}function getSocket(_0x5c8cbe){const _0x4c7176=_0x2474d0;return io[_0x4c7176(0x144)][_0x4c7176(0x144)][_0x4c7176(0x192)](_0x5c8cbe);}function setAccess(_0x1cc443){const _0x22dd1e=_0x2474d0,_0x17eb83=getSocket(_0x1cc443['id']),_0x2400a2=_0x1cc443[_0x22dd1e(0x2bc)],_0x208758=_0x1cc443[_0x22dd1e(0x1b7)];devices[_0x2400a2][_0x22dd1e(0x24d)]=validateAccess(devices[_0x2400a2]['access'][_0x22dd1e(0x1a7)],_0x2400a2),_0x17eb83[_0x22dd1e(0x278)](_0x2400a2);if(devices[_0x2400a2][_0x22dd1e(0x24d)]['allow']){_0x17eb83[_0x22dd1e(0x278)](_0x208758);if(_0x208758==_0x22dd1e(0x14f))initializeSocketBotManager(_0x17eb83);else initializeSocketBot(_0x17eb83);initClient(_0x208758);}devices[_0x2400a2][_0x22dd1e(0x24d)][_0x22dd1e(0x1a7)]&&devices[_0x2400a2][_0x22dd1e(0x24d)][_0x22dd1e(0x2c2)]==_0x22dd1e(0x1b1)&&setSessionTimeout(_0x22dd1e(0x1f9),_0x2400a2),devices[_0x2400a2][_0x22dd1e(0x24d)][_0x22dd1e(0x1a7)]&&devices[_0x2400a2][_0x22dd1e(0x24d)][_0x22dd1e(0x2c2)]==_0x22dd1e(0x236)&&setSessionTimeout(_0x22dd1e(0x1ef),_0x2400a2),_0x17eb83[_0x22dd1e(0x2be)]('status',{'status':_0x1cc443['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2400a2]['access'],'externalip':devices[_0x2400a2]['ip'],'publicKey':secure[_0x22dd1e(0x2ad)],'userid':settings[_0x22dd1e(0x280)],'validInstallation':validInstallation}),devices[_0x2400a2][_0x22dd1e(0x24d)]['allow']==![]&&devices[_0x2400a2][_0x22dd1e(0x24d)][_0x22dd1e(0x2c2)]==_0x22dd1e(0x2cc)&&temporaryAccess2FA(_0x2400a2,devices[_0x2400a2]['ip']);}function setSessionTimeout(_0x38bd6e,_0x52e0bc){const _0x194d71=_0x2474d0;let _0x118ddb;if(_0x38bd6e==_0x194d71(0x1ef))_0x118ddb=loginExpiry*0x3c*0x3e8;else _0x118ddb=devices[_0x52e0bc][_0x194d71(0x1d6)][_0x194d71(0x253)]*0x3c*0x3e8-(new Date()[_0x194d71(0x268)]()-devices[_0x52e0bc][_0x194d71(0x1d6)]['timestamp']);if(devices[_0x52e0bc][_0x194d71(0x2da)])clearTimeout(devices[_0x52e0bc][_0x194d71(0x2da)]);devices[_0x52e0bc][_0x194d71(0x2da)]=setTimeout(()=>{const _0x378d45=_0x194d71;if(devices[_0x52e0bc][_0x378d45(0x27a)])clearTimeout(devices[_0x52e0bc][_0x378d45(0x27a)]);removeSocketListeners(_0x52e0bc),addBlacklist(_0x52e0bc),devices[_0x52e0bc]['telegramIpApproval']=null,devices[_0x52e0bc][_0x378d45(0x13c)]=null,devices[_0x52e0bc][_0x378d45(0x24d)]['token']=null,devices[_0x52e0bc]['access']=validateAccess(devices[_0x52e0bc]['access']['token'],_0x52e0bc),!(devices[_0x52e0bc][_0x378d45(0x24d)]['allow']&&devices[_0x52e0bc][_0x378d45(0x24d)][_0x378d45(0x2c2)]=='login\x20not\x20required')&&(_0x38bd6e==_0x378d45(0x1ef)?io['to'](_0x52e0bc)[_0x378d45(0x2be)]('status',{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x52e0bc)[_0x378d45(0x2be)]('status',{'access':{'allow':![],'reason':_0x378d45(0x19b),'token':null}})),devices[_0x52e0bc]['access'][_0x378d45(0x1a7)]=null;},_0x118ddb);}function setTokenRefresh(_0x35cec6){const _0x5f53ad=_0x2474d0;if(devices[_0x35cec6]['pidRefreshToken'])clearTimeout(devices[_0x35cec6][_0x5f53ad(0x27a)]);devices[_0x35cec6]['pidRefreshToken']=setTimeout(()=>{const _0x58e33f=_0x5f53ad;getClientsWithUuid(_0x35cec6)[_0x58e33f(0x202)]!=0x0?(devices[_0x35cec6][_0x58e33f(0x24d)]=refreshToken(_0x35cec6),io['to'](_0x35cec6)[_0x58e33f(0x2be)](_0x58e33f(0x14e),{'status':_0x58e33f(0x199),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x35cec6][_0x58e33f(0x24d)],'externalip':devices[_0x35cec6]['ip'],'publicKey':secure[_0x58e33f(0x2ad)],'validInstallation':validInstallation}),setTokenRefresh(_0x35cec6)):clearTimeout(devices[_0x35cec6][_0x58e33f(0x27a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3d9ff4){const _0x52f5d8=_0x2474d0,_0x355bb1=getClient(_0x3d9ff4['id'])[_0x52f5d8(0x2bc)];_0x3d9ff4[_0x52f5d8(0x2be)]('bots',config),_0x3d9ff4[_0x52f5d8(0x2be)](_0x52f5d8(0x15b),cleanSettings()),_0x3d9ff4['on'](_0x52f5d8(0x1f4),_0x4c2239=>{const _0x259401=_0x52f5d8;if(validateAccess(_0x4c2239,_0x355bb1)[_0x259401(0x1e9)])addBot();else logger[_0x259401(0x165)](_0x259401(0x1fa));}),_0x3d9ff4['on'](_0x52f5d8(0x213),(_0x20120a,_0x218910)=>{const _0x4e8ce3=_0x52f5d8;if(validateAccess(_0x218910,_0x355bb1)[_0x4e8ce3(0x1e9)])toggleBot(_0x20120a['botID'],_0x20120a[_0x4e8ce3(0x14e)],_0x20120a['live']);else logger[_0x4e8ce3(0x165)](_0x4e8ce3(0x15f));}),_0x3d9ff4['on'](_0x52f5d8(0x297),(_0x4be898,_0x209045)=>{const _0x4c0406=_0x52f5d8;if(validateAccess(_0x209045,_0x355bb1)['allow'])toggleBotMode(_0x4be898);else logger[_0x4c0406(0x165)](_0x4c0406(0x15f));}),_0x3d9ff4['on'](_0x52f5d8(0x247),(_0x63938f,_0x5bff33)=>{const _0x44b309=_0x52f5d8;if(validateAccess(_0x5bff33,_0x355bb1)[_0x44b309(0x1e9)])deleteBot(_0x63938f);else logger[_0x44b309(0x165)](_0x44b309(0x1cd));}),_0x3d9ff4['on'](_0x52f5d8(0x168),(_0xc32bd3,_0x5c824a)=>{const _0x566ee9=_0x52f5d8;if(validateAccess(_0x5c824a,_0x355bb1)[_0x566ee9(0x1e9)])storeSettings(_0xc32bd3,!![]);else logger[_0x566ee9(0x165)]('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x3d9ff4['on'](_0x52f5d8(0x227),_0x38aa02=>{const _0x3de3c2=_0x52f5d8;if(validateAccess(_0x38aa02,_0x355bb1)[_0x3de3c2(0x1e9)])updateBB();else logger[_0x3de3c2(0x165)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x3d9ff4['on'](_0x52f5d8(0x1cf),_0x3ee668=>{const _0x4076f3=_0x52f5d8;if(validateAccess(_0x3ee668,_0x355bb1)[_0x4076f3(0x1e9)])getMessages();else logger[_0x4076f3(0x165)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x3d9ff4['on'](_0x52f5d8(0x2ca),(_0x262b49,_0x511acb)=>{const _0x36490c=_0x52f5d8;if(validateAccess(_0x511acb,_0x355bb1)[_0x36490c(0x1e9)])confirmMessage(_0x262b49);else logger[_0x36490c(0x165)](_0x36490c(0x20e));}),_0x3d9ff4['on']('logout',_0xdec728=>{const _0x333ac8=_0x52f5d8;if(validateAccess(_0xdec728,_0x355bb1)[_0x333ac8(0x1e9)]){if(devices[_0x355bb1][_0x333ac8(0x27a)])clearTimeout(devices[_0x355bb1]['pidRefreshToken']);if(devices[_0x355bb1][_0x333ac8(0x2da)])clearTimeout(devices[_0x355bb1]['pidExpireLogin']);removeSocketListeners(getClient(_0x3d9ff4['id'])[_0x333ac8(0x2bc)]),addBlacklist(_0x355bb1),devices[_0x355bb1][_0x333ac8(0x1d6)]=null,devices[_0x355bb1][_0x333ac8(0x13c)]=null,devices[_0x355bb1][_0x333ac8(0x24d)]['token']=null,io['to'](getClient(_0x3d9ff4['id'])[_0x333ac8(0x2bc)])[_0x333ac8(0x2be)]('status',{'access':{'allow':![],'reason':_0x333ac8(0x29c),'token':null}});}else logger[_0x333ac8(0x165)](_0x333ac8(0x174));});}function initializeSocketBot(_0x34b404){const _0x14ce3b=_0x2474d0,_0x53c223=getClient(_0x34b404['id'])[_0x14ce3b(0x1b7)],_0x307c8b=getClient(_0x34b404['id'])['uuid'];_0x34b404['on'](_0x14ce3b(0x20f),(_0x5ee703,_0x1c1267)=>{const _0x512615=_0x14ce3b;if(validateAccess(_0x1c1267,_0x307c8b)[_0x512615(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223][_0x512615(0x2af)]({'function':_0x512615(0x275),'args':_0x5ee703});}else logger[_0x512615(0x165)]('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x34b404['on'](_0x14ce3b(0x18e),(_0x12c065,_0x560c0d)=>{const _0x33bbdf=_0x14ce3b;if(validateAccess(_0x560c0d,_0x307c8b)[_0x33bbdf(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223][_0x33bbdf(0x2af)]({'function':_0x33bbdf(0x1ff),'args':_0x12c065});}else logger[_0x33bbdf(0x165)](_0x33bbdf(0x195));}),_0x34b404['on']('get-portfolio',(_0x112382,_0x5878ba)=>{const _0x20904e=_0x14ce3b;if(validateAccess(_0x5878ba,_0x307c8b)[_0x20904e(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223][_0x20904e(0x2af)]({'function':'getPortfolio','args':_0x112382});}else logger[_0x20904e(0x165)](_0x20904e(0x271));}),_0x34b404['on'](_0x14ce3b(0x26c),(_0x1a776d,_0x267f5e)=>{const _0x355430=_0x14ce3b;if(validateAccess(_0x267f5e,_0x307c8b)[_0x355430(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223][_0x355430(0x2af)]({'function':'storeConfiguration','args':_0x1a776d});}else logger[_0x355430(0x165)](_0x355430(0x2d2));}),_0x34b404['on'](_0x14ce3b(0x156),(_0xbb272a,_0x1a681a)=>{const _0x25cdab=_0x14ce3b;if(validateAccess(_0x1a681a,_0x307c8b)['allow']){if(pid[_0x53c223])pid[_0x53c223][_0x25cdab(0x2af)]({'function':_0x25cdab(0x28c),'args':_0xbb272a});}else logger[_0x25cdab(0x165)](_0x25cdab(0x188));}),_0x34b404['on'](_0x14ce3b(0x1f3),_0x169cbc=>{const _0x7e8d33=_0x14ce3b;if(validateAccess(_0x169cbc,_0x307c8b)[_0x7e8d33(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223]['send']({'function':_0x7e8d33(0x1c6),'args':null});}else logger[_0x7e8d33(0x165)](_0x7e8d33(0x189));}),_0x34b404['on'](_0x14ce3b(0x245),(_0x260a52,_0x2020af)=>{const _0x5ab2c6=_0x14ce3b;if(validateAccess(_0x2020af,_0x307c8b)[_0x5ab2c6(0x1e9)]){if(pid[_0x53c223])pid[_0x53c223][_0x5ab2c6(0x2af)]({'function':_0x5ab2c6(0x22f),'args':_0x260a52});}else logger['full'](_0x5ab2c6(0x1bb));}),_0x34b404['on'](_0x14ce3b(0x263),_0x2399cc=>{const _0x309bbd=_0x14ce3b;if(validateAccess(_0x2399cc,_0x307c8b)['allow']){if(pid[_0x53c223])pid[_0x53c223][_0x309bbd(0x2af)]({'function':'cancelLoading','args':null});}else logger[_0x309bbd(0x165)](_0x309bbd(0x1bd));}),_0x34b404['on'](_0x14ce3b(0x227),_0x5e4c93=>{const _0x21d951=_0x14ce3b;if(validateAccess(_0x5e4c93,_0x307c8b)['allow'])updateBB();else logger['full'](_0x21d951(0x1fd));}),_0x34b404['on']('get-messages',_0x1ca73b=>{const _0x241532=_0x14ce3b;if(validateAccess(_0x1ca73b,_0x307c8b)[_0x241532(0x1e9)])getMessages();else logger[_0x241532(0x165)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x34b404['on'](_0x14ce3b(0x2ca),(_0x35f150,_0x266025)=>{const _0xd6d143=_0x14ce3b;if(validateAccess(_0x266025,_0x307c8b)[_0xd6d143(0x1e9)])confirmMessage(_0x35f150);else logger['full'](_0xd6d143(0x20e));}),_0x34b404['on'](_0x14ce3b(0x187),_0x19dd31=>{const _0x2b402f=_0x14ce3b;if(validateAccess(_0x19dd31,_0x307c8b)[_0x2b402f(0x1e9)]){if(devices[_0x307c8b][_0x2b402f(0x27a)])clearTimeout(devices[_0x307c8b][_0x2b402f(0x27a)]);if(devices[_0x307c8b]['pidExpireLogin'])clearTimeout(devices[_0x307c8b]['pidExpireLogin']);removeSocketListeners(getClient(_0x34b404['id'])[_0x2b402f(0x2bc)]),addBlacklist(_0x307c8b),devices[_0x307c8b][_0x2b402f(0x1d6)]=null,devices[_0x307c8b]['telegram2FaApproval']=null,devices[_0x307c8b]['access'][_0x2b402f(0x1a7)]=null,io['to'](getClient(_0x34b404['id'])[_0x2b402f(0x2bc)])[_0x2b402f(0x2be)]('status',{'access':{'allow':![],'reason':_0x2b402f(0x29c),'token':null}});}else logger[_0x2b402f(0x165)](_0x2b402f(0x174));});}function removeSocketListeners(_0x45a61e){const _0x49dbee=_0x2474d0;getClientsWithUuid(_0x45a61e)[_0x49dbee(0x1d4)](_0x19eff8=>{const _0x30fe9a=_0x49dbee;getSocket(_0x19eff8['id'])[_0x30fe9a(0x19d)]();});}function cleanSettings(){const _0x2bf8de=_0x2474d0;let _0x4491fb=settings;return settings['telegramToken']&&settings[_0x2bf8de(0x1c0)]!=''&&(_0x4491fb={..._0x4491fb,'telegramToken':_0x2bf8de(0x203)}),settings['bbPassword']&&settings[_0x2bf8de(0x161)]!=''&&(_0x4491fb={..._0x4491fb,'bbPassword':_0x2bf8de(0x203)}),(settings[_0x2bf8de(0x161)]&&settings[_0x2bf8de(0x161)]=='***'||settings['telegramToken']&&settings['telegramToken']=='***')&&(_0x4491fb={..._0x4491fb,'restored':{'password':settings[_0x2bf8de(0x161)]=='***','telegram':settings[_0x2bf8de(0x1c0)]==_0x2bf8de(0x289)}}),_0x4491fb;}function updateBB(){const _0xcdb510=_0x2474d0;installingUpdate=!![],config[_0xcdb510(0x1d4)](_0x5dfe42=>{const _0x155c6c=_0xcdb510;restartBot(_0x5dfe42[_0x155c6c(0x22d)]);}),process['send']({'update':!![]},_0x1de6d2=>{});}function startBot(_0x297d58,_0x56509b,_0x560af5){const _0x11d67e=_0x2474d0;let _0x46ba2e=![];const _0x15bff0=_0x297d58[0x0];_0x56509b={..._0x56509b,'stdio':[_0x11d67e(0x142),'inherit',_0x11d67e(0x142),_0x11d67e(0x2c0)]},pid[_0x15bff0]=childProcess[_0x11d67e(0x146)](botfile,_0x297d58,_0x56509b),pid[_0x15bff0]['on'](_0x11d67e(0x291),_0x2244f6=>{const _0x47f87=_0x11d67e;switch(Object['keys'](_0x2244f6)[0x0]){case _0x47f87(0x27b):updateBotName(_0x15bff0,_0x2244f6[_0x47f87(0x27b)]);break;case _0x47f87(0x1c7):updateBotManager();break;case _0x47f87(0x14e):updateStatus(_0x15bff0,_0x2244f6[_0x47f87(0x14e)]);break;case'live':updateLive(_0x15bff0,_0x2244f6[_0x47f87(0x28b)]);break;case _0x47f87(0x177):updateLive(_0x15bff0,_0x2244f6[_0x47f87(0x177)]),io['to'](_0x15bff0)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case _0x47f87(0x22c):_0x2244f6[_0x47f87(0x22c)]=='restart'&&restartBot(_0x15bff0);_0x2244f6[_0x47f87(0x22c)]=='kill'&&toggleBot(_0x15bff0,_0x47f87(0x23b),_0x47f87(0x169));break;case _0x47f87(0x205):sendTelegram(_0x15bff0,_0x2244f6[_0x47f87(0x205)]);break;case _0x47f87(0x25e):sendTelegramMsg(_0x2244f6[_0x47f87(0x25e)]);break;case'function':io['to'](_0x15bff0)['emit'](_0x2244f6[_0x47f87(0x171)],_0x2244f6['args']);break;}}),pid[_0x15bff0]['on'](_0x11d67e(0x1fc),function(_0x35ffc6){if(_0x46ba2e)return;_0x46ba2e=!![],_0x560af5(_0x35ffc6);}),pid[_0x15bff0]['on'](_0x11d67e(0x243),async function(_0x169c56){const _0x57b8ae=_0x11d67e;if(installingUpdate)return;if(_0x46ba2e)return;_0x46ba2e=!![],_0x560af5(null);const _0x49b138=dbConfig[_0x57b8ae(0x192)](_0x57b8ae(0x148))[_0x57b8ae(0x1d2)]({'botID':_0x15bff0})[_0x57b8ae(0x23f)]();_0x49b138&&(_0x49b138['status']=='enabled'||_0x49b138['status']==_0x57b8ae(0x197))&&(await sleep(0x3e8),updateLive(_0x15bff0,_0x57b8ae(0x169)),logger[_0x57b8ae(0x165)](_0x57b8ae(0x164)+_0x15bff0),startBot([_0x15bff0,userID],{'cwd':bbpath},function(_0x4e56c7){const _0x3e7a21=_0x57b8ae;if(_0x4e56c7)logger[_0x3e7a21(0x165)](_0x4e56c7);}));});}function stopBot(_0x333b85){const _0x2d1492=_0x2474d0;getClientsWithBotID(_0x333b85)[_0x2d1492(0x1d4)](_0xdc334a=>{const _0x377455=_0x2d1492;getSocket(_0xdc334a['id'])[_0x377455(0x2c1)](!![]),removeClient(_0xdc334a['id']);}),pid[_0x333b85]&&(pid[_0x333b85]['kill'](),pid[_0x333b85]=null);}function restartBot(_0x4ae8bf){const _0x498fe3=_0x2474d0;if(pid[_0x4ae8bf])pid[_0x4ae8bf][_0x498fe3(0x2bf)]();}function addBot(){const _0xcdfb19=_0x2474d0;let _0xfcc32a;for(let _0x185f03=0x1;_0x185f03<0x3e9;_0x185f03++){_0xfcc32a=_0x185f03[_0xcdfb19(0x175)]()[_0xcdfb19(0x17a)](0x3,'0');let _0x596273=config['find'](_0x54a391=>_0x54a391[_0xcdfb19(0x22d)]==_0xfcc32a);if(!_0x596273)break;}if(_0xfcc32a===_0xcdfb19(0x21a)){logger[_0xcdfb19(0x165)](_0xcdfb19(0x212));return;}logger[_0xcdfb19(0x165)](_0xcdfb19(0x1fe)+_0xfcc32a),dbConfig[_0xcdfb19(0x192)](_0xcdfb19(0x148))[_0xcdfb19(0x1b9)]({'botID':_0xfcc32a,'botname':_0xcdfb19(0x170)+_0xfcc32a,'status':'new','live':''})[_0xcdfb19(0x1c3)](),startBot([_0xfcc32a,userID],{'cwd':bbpath},function(_0x154a27){const _0x238f46=_0xcdfb19;if(_0x154a27)logger[_0x238f46(0x165)](_0x154a27);}),config=getConfiguration(),io['to'](_0xcdfb19(0x14f))[_0xcdfb19(0x2be)](_0xcdfb19(0x148),config);}function deleteBot(_0x4ee795){const _0x1d7aeb=_0x2474d0;getClientsWithBotID(_0x4ee795)[_0x1d7aeb(0x1d4)](_0x3c46aa=>{const _0x443388=_0x1d7aeb;getSocket(_0x3c46aa['id'])[_0x443388(0x2c1)](!![]),removeClient(_0x3c46aa['id']);}),dbConfig[_0x1d7aeb(0x192)](_0x1d7aeb(0x148))['remove']({'botID':_0x4ee795})[_0x1d7aeb(0x1c3)](),logger['full'](_0x1d7aeb(0x230)+_0x4ee795),stopBot(_0x4ee795);try{fs[_0x1d7aeb(0x2a7)](path[_0x1d7aeb(0x278)](configpath,_0x1d7aeb(0x292)+_0x4ee795+'-config.json')),fs[_0x1d7aeb(0x2a7)](path[_0x1d7aeb(0x278)](configpath,_0x1d7aeb(0x292)+_0x4ee795+_0x1d7aeb(0x1f1))),fs['unlinkSync'](path['join'](configpath,_0x1d7aeb(0x292)+_0x4ee795+_0x1d7aeb(0x1ad))),fs['unlinkSync'](path[_0x1d7aeb(0x278)](configpath,_0x1d7aeb(0x292)+_0x4ee795+_0x1d7aeb(0x231)));}catch(_0xc8f293){if(_0xc8f293)logger[_0x1d7aeb(0x165)](_0x1d7aeb(0x2a8),_0xc8f293);}config=getConfiguration(),io['to'](_0x1d7aeb(0x14f))[_0x1d7aeb(0x2be)](_0x1d7aeb(0x148),config);}function toggleBot(_0x18162f,_0x55768b,_0x2b1b0f){const _0x5c972b=_0x2474d0;dbConfig['get'](_0x5c972b(0x148))[_0x5c972b(0x1d2)]({'botID':_0x18162f})[_0x5c972b(0x296)]({'status':_0x55768b})[_0x5c972b(0x296)]({'live':_0x2b1b0f})[_0x5c972b(0x1c3)]();if(_0x55768b=='enabled'||_0x55768b=='new')logger[_0x5c972b(0x165)](_0x5c972b(0x286)+_0x18162f),startBot([_0x18162f,userID],{'cwd':bbpath},function(_0x1fbe6b){const _0x2200d9=_0x5c972b;if(_0x1fbe6b)logger[_0x2200d9(0x165)](_0x1fbe6b);});else(_0x55768b==_0x5c972b(0x23b)||_0x55768b==_0x5c972b(0x19c))&&(logger['full'](_0x5c972b(0x1ac)+_0x18162f),stopBot(_0x18162f));config=getConfiguration(),io['to']('botmanager')[_0x5c972b(0x2be)](_0x5c972b(0x148),config);}function toggleStatus(_0x32bac1){const _0x1e5afc=_0x2474d0;let _0x1a5aeb=dbConfig['get'](_0x1e5afc(0x148))[_0x1e5afc(0x1d2)]({'botID':_0x32bac1})[_0x1e5afc(0x23f)](),_0x5e8da1;if(_0x1a5aeb['status']===_0x1e5afc(0x162))_0x5e8da1=_0x1e5afc(0x23b);else{if(_0x1a5aeb['status']==='new')_0x5e8da1=_0x1e5afc(0x19c);else{if(_0x1a5aeb[_0x1e5afc(0x14e)]===_0x1e5afc(0x19c))_0x5e8da1=_0x1e5afc(0x197);else{if(_0x1a5aeb[_0x1e5afc(0x14e)]===_0x1e5afc(0x23b))_0x5e8da1=_0x1e5afc(0x162);}}}return _0x5e8da1;}function updateStatus(_0x14d660,_0x11aa43){const _0x7d9c21=_0x2474d0;dbConfig[_0x7d9c21(0x192)]('bots')[_0x7d9c21(0x1d2)]({'botID':_0x14d660})[_0x7d9c21(0x296)]({'status':_0x11aa43})['write'](),config=getConfiguration(),io['to']('botmanager')['emit'](_0x7d9c21(0x148),config);}function updateLive(_0x3dde74,_0x2e1c3a){const _0x2957cd=_0x2474d0;dbConfig[_0x2957cd(0x192)](_0x2957cd(0x148))[_0x2957cd(0x1d2)]({'botID':_0x3dde74})[_0x2957cd(0x296)]({'live':_0x2e1c3a})[_0x2957cd(0x1c3)](),config=getConfiguration(),io['to'](_0x2957cd(0x14f))[_0x2957cd(0x2be)](_0x2957cd(0x148),config);}function updateBotName(_0x1d3436,_0xfa2550){const _0x4f6d4a=_0x2474d0;dbConfig[_0x4f6d4a(0x192)](_0x4f6d4a(0x148))[_0x4f6d4a(0x1d2)]({'botID':_0x1d3436})[_0x4f6d4a(0x296)]({'botname':_0xfa2550})[_0x4f6d4a(0x1c3)](),config=getConfiguration(),io['to'](_0x4f6d4a(0x14f))[_0x4f6d4a(0x2be)](_0x4f6d4a(0x148),config);}function updateBotManager(){const _0x576e7e=_0x2474d0;config=getConfiguration(),io['to']('botmanager')[_0x576e7e(0x2be)](_0x576e7e(0x148),config);}function toggleBotMode(_0x94d706){const _0x340415=_0x2474d0;if(pid[_0x94d706])pid[_0x94d706][_0x340415(0x2af)]({'function':_0x340415(0x265),'args':null});else{const _0x5d85ff=configpath+_0x340415(0x292)+_0x94d706+_0x340415(0x23d),_0x2b57c1=fs[_0x340415(0x2b5)](_0x5d85ff),_0x56c348=JSON['parse'](_0x2b57c1),_0x593327=_0x56c348[_0x340415(0x1b7)][0x0][_0x340415(0x1f5)];_0x56c348[_0x340415(0x1b7)][0x0][_0x340415(0x1f5)]=!_0x593327;const _0x3fb680=JSON['stringify'](_0x56c348,null,0x2);fs[_0x340415(0x1e4)](_0x5d85ff,_0x3fb680),config=getConfiguration(),io['to'](_0x340415(0x14f))[_0x340415(0x2be)]('bots',config);}}function telegramError(_0x39b88b){const _0x3f144d=_0x2474d0;logger[_0x3f144d(0x273)](getTimeStamp()+_0x3f144d(0x222));}function validateTelegram(_0x36460e){const _0x3ce2b2=_0x2474d0;if(_0x36460e[_0x3ce2b2(0x26e)]['username']!=settings[_0x3ce2b2(0x1e0)]&&'@'+_0x36460e[_0x3ce2b2(0x26e)][_0x3ce2b2(0x26d)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x36460e['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x3ce2b2(0x1d5)})['catch'](_0x31af94=>{telegramError(_0x31af94);}),![];return!![];}async function initTelegram(){const _0x3b4552=_0x2474d0;if(tgBot)tgBot[_0x3b4552(0x209)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x3b4552(0x1c0)],{'polling':!![]});let _0x4edaad=_0x3b4552(0x2ab);_0x4edaad+='\x0a',_0x4edaad+=_0x3b4552(0x1e5),_0x4edaad+='/disable\x20-\x20disable\x20notifications\x0a',_0x4edaad+=_0x3b4552(0x1b8),_0x4edaad+=_0x3b4552(0x14d),_0x4edaad+=_0x3b4552(0x152),_0x4edaad+=_0x3b4552(0x1b4),_0x4edaad+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x4edaad+=_0x3b4552(0x183),_0x4edaad+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x4edaad+=_0x3b4552(0x285),_0x4edaad+=_0x3b4552(0x225),_0x4edaad+='/help\x20-\x20show\x20available\x20commands\x0a';let _0xda0d03=_0x3b4552(0x232);_0xda0d03+='\x0a',_0xda0d03+=_0x4edaad,tgBot[_0x3b4552(0x266)](/\/start/,_0x35b5c2=>{const _0xa44607=_0x3b4552;if(!validateTelegram(_0x35b5c2))return;if(settings[_0xa44607(0x16f)]!=_0x35b5c2['chat']['id'])updateSetting(_0xa44607(0x16f),_0x35b5c2[_0xa44607(0x298)]['id']);updateSetting(_0xa44607(0x1df),!![]),tgBot['sendMessage'](_0x35b5c2[_0xa44607(0x298)]['id'],_0xda0d03)[_0xa44607(0x14b)](_0x294fd2=>{telegramError(_0x294fd2);});}),tgBot[_0x3b4552(0x266)](/\/enable/,_0x54cd9c=>{const _0x44db83=_0x3b4552;if(!validateTelegram(_0x54cd9c))return;if(settings['telegramChatId']!=_0x54cd9c[_0x44db83(0x298)]['id'])updateSetting(_0x44db83(0x16f),_0x54cd9c[_0x44db83(0x298)]['id']);updateSetting(_0x44db83(0x1df),!![]),tgBot[_0x44db83(0x2d1)](_0x54cd9c[_0x44db83(0x298)]['id'],'Notifications\x20enabled')[_0x44db83(0x14b)](_0x2bc2ff=>{telegramError(_0x2bc2ff);});}),tgBot['onText'](/\/config/,async _0x9c09a6=>{const _0x3fb3f4=_0x3b4552;if(!validateTelegram(_0x9c09a6))return;tgBot[_0x3fb3f4(0x13e)]('callback_query'),tgBot['sendMessage'](_0x9c09a6[_0x3fb3f4(0x298)]['id'],_0x3fb3f4(0x246),{'reply_markup':{'inline_keyboard':[[{'text':_0x3fb3f4(0x259),'callback_data':_0x3fb3f4(0x234)},{'text':_0x3fb3f4(0x270),'callback_data':_0x3fb3f4(0x290)},{'text':_0x3fb3f4(0x258),'callback_data':'all'}]]}})[_0x3fb3f4(0x14b)](_0x203699=>{telegramError(_0x203699);}),tgBot['on'](_0x3fb3f4(0x237),async _0x14de28=>{const _0x2b5cdf=_0x3fb3f4,_0x3e9cda=_0x14de28[_0x2b5cdf(0x17e)],_0x1dcd3d=_0x14de28[_0x2b5cdf(0x291)];tgBot[_0x2b5cdf(0x1f0)](_0x14de28['id'])[_0x2b5cdf(0x147)](async()=>{const _0xffcf31=_0x2b5cdf;_0x3e9cda==_0xffcf31(0x234)&&(updateSetting('telegramEvents',_0xffcf31(0x234)),updateSetting(_0xffcf31(0x1df),!![]),await tgBot[_0xffcf31(0x2d1)](_0x1dcd3d[_0xffcf31(0x298)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0xffcf31(0x14b)](_0x4d94ab=>{telegramError(_0x4d94ab);}));_0x3e9cda==_0xffcf31(0x290)&&(updateSetting('telegramEvents',_0xffcf31(0x290)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x1dcd3d[_0xffcf31(0x298)]['id'],_0xffcf31(0x16e))[_0xffcf31(0x14b)](_0x864b22=>{telegramError(_0x864b22);}));_0x3e9cda==_0xffcf31(0x24b)&&(updateSetting(_0xffcf31(0x19a),_0xffcf31(0x24b)),updateSetting(_0xffcf31(0x1df),!![]),await tgBot[_0xffcf31(0x2d1)](_0x1dcd3d[_0xffcf31(0x298)]['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')['catch'](_0x6e6b1b=>{telegramError(_0x6e6b1b);}));if(!settings['telegramChatId'])tgBot[_0xffcf31(0x2d1)](_0x1dcd3d['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0xffcf31(0x14b)](_0x3438d3=>{telegramError(_0x3438d3);});}),tgBot[_0x2b5cdf(0x13e)]('callback_query');});}),tgBot[_0x3b4552(0x266)](/\/status/,_0x48e16d=>{const _0x5e30e7=_0x3b4552;if(!validateTelegram(_0x48e16d))return;const _0xc47c39=getBotsWithMode();let _0x4ad543=_0x5e30e7(0x226);config[_0x5e30e7(0x1d4)](_0x1ce610=>{const _0x4a48ab=_0x5e30e7,_0x32289e=_0xc47c39[_0x4a48ab(0x1d2)](_0x9b7618=>_0x9b7618[_0x4a48ab(0x22d)]==_0x1ce610['botID'])[_0x4a48ab(0x288)];_0x4ad543+=_0x4a48ab(0x170)+_0x1ce610[_0x4a48ab(0x22d)]+':\x20'+_0x1ce610['status']+'\x20|\x20'+_0x32289e+'\x20|\x20'+_0x1ce610[_0x4a48ab(0x28b)]+'\x0a';}),_0x4ad543+='\x0a',_0x4ad543+=_0x5e30e7(0x204),_0x4ad543+=!settings['telegramEnabled']?_0x5e30e7(0x1c8):'Notifications\x20enabled\x0a',_0x4ad543+=settings[_0x5e30e7(0x1df)]?settings[_0x5e30e7(0x19a)]==_0x5e30e7(0x24b)?_0x5e30e7(0x2b0):_0x5e30e7(0x198)+settings['telegramEvents']+'\x20only\x0a':'',tgBot['sendMessage'](_0x48e16d[_0x5e30e7(0x298)]['id'],_0x4ad543,{'parse_mode':_0x5e30e7(0x1d5)})[_0x5e30e7(0x14b)](_0x1f2454=>{telegramError(_0x1f2454);});}),tgBot['onText'](/\/restart/,_0x3130c5=>{const _0xab2e25=_0x3b4552;if(!validateTelegram(_0x3130c5))return;tgBot[_0xab2e25(0x13e)](_0xab2e25(0x237));const _0x24e49c=getEnabledBots();if(_0x24e49c[_0xab2e25(0x202)]==0x0)tgBot[_0xab2e25(0x2d1)](_0x3130c5['chat']['id'],_0xab2e25(0x18f))[_0xab2e25(0x14b)](_0xc00da8=>{telegramError(_0xc00da8);});else{if(_0x24e49c[_0xab2e25(0x202)]>0x1)_0x24e49c['push']({'botID':_0xab2e25(0x24b)});let _0x175fe=[],_0x22d645=[];const _0x2cb858=_0x24e49c[_0xab2e25(0x202)]%0x4==0x0||_0x24e49c[_0xab2e25(0x202)]%0x4==0x3||_0x24e49c[_0xab2e25(0x202)]%0x3==0x1?0x4:0x3;let _0x348bed=0x0;_0x24e49c['forEach']((_0x2537ce,_0x3f3fde)=>{const _0x5568d2=_0xab2e25;if(_0x3f3fde%_0x2cb858==0x0)_0x22d645=[];_0x22d645[_0x5568d2(0x1b9)]({'text':_0x2537ce[_0x5568d2(0x22d)]==_0x5568d2(0x24b)?'All\x20bots':_0x5568d2(0x170)+_0x2537ce[_0x5568d2(0x22d)],'callback_data':_0x2537ce[_0x5568d2(0x22d)]}),_0x3f3fde%_0x2cb858==0x0&&(_0x175fe[_0x348bed]=_0x22d645,_0x348bed++);}),tgBot['sendMessage'](_0x3130c5['chat']['id'],_0xab2e25(0x2b6),{'reply_markup':{'inline_keyboard':_0x175fe}})[_0xab2e25(0x14b)](_0x9560bd=>{telegramError(_0x9560bd);}),tgBot['on'](_0xab2e25(0x237),async _0x22adf0=>{const _0x453bd2=_0xab2e25,_0x6d05c9=_0x22adf0[_0x453bd2(0x17e)],_0x4f291a=_0x22adf0[_0x453bd2(0x291)];tgBot[_0x453bd2(0x1f0)](_0x22adf0['id'])['then'](async()=>{const _0x144185=_0x453bd2;_0x6d05c9==_0x144185(0x24b)?config[_0x144185(0x1d4)](_0x483f90=>{const _0x1514d4=_0x144185;restartBot(_0x483f90[_0x1514d4(0x22d)]);}):restartBot(_0x6d05c9);}),tgBot[_0x453bd2(0x13e)]('callback_query');});}}),tgBot['onText'](/\/on/,_0x2340b9=>{const _0x267c0a=_0x3b4552;if(!validateTelegram(_0x2340b9))return;tgBot[_0x267c0a(0x13e)](_0x267c0a(0x237));const _0x3ca935=getDisabledBots();if(_0x3ca935[_0x267c0a(0x202)]==0x0)tgBot['sendMessage'](_0x2340b9[_0x267c0a(0x298)]['id'],_0x267c0a(0x1ec))[_0x267c0a(0x14b)](_0x3046f7=>{telegramError(_0x3046f7);});else{if(_0x3ca935['length']>0x1)_0x3ca935['push']({'botID':'all'});let _0x3b476b=[],_0x1e5b94=[];const _0x5f5aab=_0x3ca935[_0x267c0a(0x202)]%0x4==0x0||_0x3ca935[_0x267c0a(0x202)]%0x4==0x3||_0x3ca935[_0x267c0a(0x202)]%0x3==0x1?0x4:0x3;let _0x44bb03=0x0;_0x3ca935['forEach']((_0x4d5134,_0x59a129)=>{const _0x2162e1=_0x267c0a;if(_0x59a129%_0x5f5aab==0x0)_0x1e5b94=[];_0x1e5b94[_0x2162e1(0x1b9)]({'text':_0x4d5134[_0x2162e1(0x22d)]==_0x2162e1(0x24b)?_0x2162e1(0x283):_0x2162e1(0x170)+_0x4d5134[_0x2162e1(0x22d)],'callback_data':_0x4d5134['botID']}),_0x59a129%_0x5f5aab==0x0&&(_0x3b476b[_0x44bb03]=_0x1e5b94,_0x44bb03++);}),tgBot[_0x267c0a(0x2d1)](_0x2340b9[_0x267c0a(0x298)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x3b476b}})[_0x267c0a(0x14b)](_0x396e18=>{telegramError(_0x396e18);}),tgBot['on'](_0x267c0a(0x237),async _0x389c68=>{const _0x31f767=_0x267c0a,_0x4508fb=_0x389c68[_0x31f767(0x17e)],_0x32db3d=_0x389c68[_0x31f767(0x291)];tgBot[_0x31f767(0x1f0)](_0x389c68['id'])['then'](async()=>{const _0x483e5d=_0x31f767;_0x4508fb==_0x483e5d(0x24b)?(tgBot['sendMessage'](_0x32db3d['chat']['id'],_0x483e5d(0x1bf))[_0x483e5d(0x14b)](_0x26d04e=>{telegramError(_0x26d04e);}),_0x3ca935[_0x483e5d(0x1d4)](_0x16a059=>{const _0x267ec2=_0x483e5d;if(_0x16a059[_0x267ec2(0x22d)]!=_0x267ec2(0x24b))toggleBot(_0x16a059['botID'],toggleStatus(_0x16a059[_0x267ec2(0x22d)]),'stopped');})):(tgBot[_0x483e5d(0x2d1)](_0x32db3d['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4508fb)['catch'](_0x1b5a07=>{telegramError(_0x1b5a07);}),toggleBot(_0x4508fb,toggleStatus(_0x4508fb),_0x483e5d(0x169)));}),tgBot[_0x31f767(0x13e)](_0x31f767(0x237));});}}),tgBot[_0x3b4552(0x266)](/\/off/,_0x3f7283=>{const _0x4ba7e1=_0x3b4552;if(!validateTelegram(_0x3f7283))return;tgBot[_0x4ba7e1(0x13e)](_0x4ba7e1(0x237));const _0x2f5087=getEnabledBots();if(_0x2f5087[_0x4ba7e1(0x202)]==0x0)tgBot[_0x4ba7e1(0x2d1)](_0x3f7283[_0x4ba7e1(0x298)]['id'],_0x4ba7e1(0x18f))['catch'](_0x25dfc7=>{telegramError(_0x25dfc7);});else{if(_0x2f5087[_0x4ba7e1(0x202)]>0x1)_0x2f5087[_0x4ba7e1(0x1b9)]({'botID':'all'});let _0xd042f1=[],_0x258388=[];const _0x2be73e=_0x2f5087[_0x4ba7e1(0x202)]%0x4==0x0||_0x2f5087[_0x4ba7e1(0x202)]%0x4==0x3||_0x2f5087[_0x4ba7e1(0x202)]%0x3==0x1?0x4:0x3;let _0x9b031=0x0;_0x2f5087[_0x4ba7e1(0x1d4)]((_0x91e10a,_0xae1329)=>{const _0x3ef434=_0x4ba7e1;if(_0xae1329%_0x2be73e==0x0)_0x258388=[];_0x258388['push']({'text':_0x91e10a['botID']==_0x3ef434(0x24b)?_0x3ef434(0x283):_0x3ef434(0x170)+_0x91e10a['botID'],'callback_data':_0x91e10a['botID']}),_0xae1329%_0x2be73e==0x0&&(_0xd042f1[_0x9b031]=_0x258388,_0x9b031++);}),tgBot[_0x4ba7e1(0x2d1)](_0x3f7283[_0x4ba7e1(0x298)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0xd042f1}})[_0x4ba7e1(0x14b)](_0x4f4293=>{telegramError(_0x4f4293);}),tgBot['on'](_0x4ba7e1(0x237),async _0x454932=>{const _0x171d01=_0x4ba7e1,_0x2daea8=_0x454932[_0x171d01(0x17e)],_0x1bcf5a=_0x454932[_0x171d01(0x291)];tgBot[_0x171d01(0x1f0)](_0x454932['id'])['then'](async()=>{const _0xd8d463=_0x171d01;_0x2daea8==_0xd8d463(0x24b)?(tgBot[_0xd8d463(0x2d1)](_0x1bcf5a[_0xd8d463(0x298)]['id'],_0xd8d463(0x279))['catch'](_0x12926f=>{telegramError(_0x12926f);}),_0x2f5087[_0xd8d463(0x1d4)](_0x34a069=>{const _0xd777d2=_0xd8d463;if(_0x34a069['botID']!=_0xd777d2(0x24b))toggleBot(_0x34a069[_0xd777d2(0x22d)],toggleStatus(_0x34a069[_0xd777d2(0x22d)]),_0xd777d2(0x169));})):(tgBot[_0xd8d463(0x2d1)](_0x1bcf5a['chat']['id'],_0xd8d463(0x274)+_0x2daea8)[_0xd8d463(0x14b)](_0x419e63=>{telegramError(_0x419e63);}),toggleBot(_0x2daea8,toggleStatus(_0x2daea8),_0xd8d463(0x169)));}),tgBot['removeListener'](_0x171d01(0x237));});}}),tgBot[_0x3b4552(0x266)](/\/portfolio/,_0x9593a5=>{const _0xf98175=_0x3b4552;if(!validateTelegram(_0x9593a5))return;tgBot[_0xf98175(0x13e)](_0xf98175(0x237));const _0x13e2cc=getEnabledBots();if(_0x13e2cc[_0xf98175(0x202)]==0x0)tgBot[_0xf98175(0x2d1)](_0x9593a5[_0xf98175(0x298)]['id'],_0xf98175(0x18f))[_0xf98175(0x14b)](_0x393936=>{telegramError(_0x393936);});else{if(_0x13e2cc[_0xf98175(0x202)]>0x1){let _0x38b843=[],_0x4771cf=[];const _0x3ad62b=_0x13e2cc['length']%0x4==0x0||_0x13e2cc[_0xf98175(0x202)]%0x4==0x3||_0x13e2cc[_0xf98175(0x202)]%0x3==0x1?0x4:0x3;let _0x1dd195=0x0;_0x13e2cc[_0xf98175(0x1d4)]((_0xadf90c,_0x1b7806)=>{const _0x91adf7=_0xf98175;if(_0x1b7806%_0x3ad62b==0x0)_0x4771cf=[];_0x4771cf[_0x91adf7(0x1b9)]({'text':_0x91adf7(0x170)+_0xadf90c['botID'],'callback_data':_0xadf90c[_0x91adf7(0x22d)]}),_0x1b7806%_0x3ad62b==0x0&&(_0x38b843[_0x1dd195]=_0x4771cf,_0x1dd195++);}),tgBot[_0xf98175(0x2d1)](_0x9593a5[_0xf98175(0x298)]['id'],_0xf98175(0x1ed),{'reply_markup':{'inline_keyboard':_0x38b843}})[_0xf98175(0x14b)](_0x446eaf=>{telegramError(_0x446eaf);}),tgBot['on']('callback_query',async _0x311393=>{const _0x5c62d3=_0xf98175,_0x28a208=_0x311393['data'],_0x464936=_0x311393['message'];tgBot[_0x5c62d3(0x1f0)](_0x311393['id'])[_0x5c62d3(0x147)](async()=>{if(pid[_0x28a208])pid[_0x28a208]['send']({'function':'sendPortfolioTelegram','args':null});}),tgBot['removeListener']('callback_query');});}else{const _0xa8eee=_0x13e2cc[0x0]['botID'];if(pid[_0xa8eee])pid[_0xa8eee][_0xf98175(0x2af)]({'function':_0xf98175(0x2a9),'args':null});}}}),tgBot[_0x3b4552(0x266)](/\/update/,async _0x4fd9e9=>{const _0x1a5a30=_0x3b4552;if(!validateTelegram(_0x4fd9e9))return;tgBot['removeListener'](_0x1a5a30(0x237)),await getMessages();if(!updateAvailable)tgBot[_0x1a5a30(0x2d1)](_0x4fd9e9[_0x1a5a30(0x298)]['id'],_0x1a5a30(0x23a))[_0x1a5a30(0x14b)](_0x21140a=>{telegramError(_0x21140a);});else!validInstallation?tgBot[_0x1a5a30(0x2d1)](_0x4fd9e9['chat']['id'],_0x1a5a30(0x2b1))['catch'](_0x56f7c0=>{telegramError(_0x56f7c0);}):(tgBot['sendMessage'](_0x4fd9e9[_0x1a5a30(0x298)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x1a5a30(0x23c),'callback_data':_0x1a5a30(0x25d)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x401c62=>{telegramError(_0x401c62);}),tgBot['on'](_0x1a5a30(0x237),async _0x4a9ac5=>{const _0x4dbfad=_0x1a5a30,_0x249a00=_0x4a9ac5[_0x4dbfad(0x17e)],_0x44775d=_0x4a9ac5[_0x4dbfad(0x291)];tgBot[_0x4dbfad(0x1f0)](_0x4a9ac5['id'])[_0x4dbfad(0x147)](async()=>{const _0x5904b8=_0x4dbfad;_0x249a00==_0x5904b8(0x25d)&&(await tgBot['sendMessage'](_0x44775d[_0x5904b8(0x298)]['id'],_0x5904b8(0x235))['catch'](_0x5ae9ea=>{telegramError(_0x5ae9ea);}),updateBB());_0x249a00=='no'&&await tgBot['sendMessage'](_0x44775d[_0x5904b8(0x298)]['id'],_0x5904b8(0x2d7))[_0x5904b8(0x14b)](_0x77d633=>{telegramError(_0x77d633);});if(!settings[_0x5904b8(0x16f)])tgBot['sendMessage'](_0x44775d[_0x5904b8(0x298)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0xece86d=>{telegramError(_0xece86d);});}),tgBot[_0x4dbfad(0x13e)](_0x4dbfad(0x237));}));}),tgBot[_0x3b4552(0x266)](/\/toggle/,_0x10f87b=>{const _0x10788c=_0x3b4552;if(!validateTelegram(_0x10f87b))return;tgBot['removeListener'](_0x10788c(0x237));const _0x270194=getBotsWithMode();if(_0x270194['length']==0x0)tgBot[_0x10788c(0x2d1)](_0x10f87b[_0x10788c(0x298)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x10788c(0x14b)](_0x33c839=>{telegramError(_0x33c839);});else{let _0x43c1e0=[],_0x85e34c=[];const _0x298fbe=0x2;let _0x2b7b96=0x0;_0x270194[_0x10788c(0x1d4)]((_0x394163,_0xdbd7df)=>{const _0x343b81=_0x10788c;if(_0xdbd7df%_0x298fbe==0x0)_0x85e34c=[];_0x85e34c[_0x343b81(0x1b9)]({'text':_0x343b81(0x170)+_0x394163[_0x343b81(0x22d)]+'\x20('+_0x394163[_0x343b81(0x288)]+')','callback_data':_0x394163['botID']}),_0xdbd7df%_0x298fbe==0x0&&(_0x43c1e0[_0x2b7b96]=_0x85e34c,_0x2b7b96++);}),tgBot[_0x10788c(0x2d1)](_0x10f87b[_0x10788c(0x298)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x43c1e0}})['catch'](_0x3a7d40=>{telegramError(_0x3a7d40);}),tgBot['on'](_0x10788c(0x237),async _0x5167cf=>{const _0x392090=_0x10788c,_0x58f4de=_0x5167cf['data'],_0xa833b4=_0x5167cf[_0x392090(0x291)];tgBot['answerCallbackQuery'](_0x5167cf['id'])[_0x392090(0x147)](async()=>{const _0x180882=_0x392090,_0x19b5dd=_0x270194[_0x180882(0x1d2)](_0x1fd8fa=>_0x1fd8fa[_0x180882(0x22d)]==_0x58f4de),_0x161361=_0x19b5dd[_0x180882(0x288)]==_0x180882(0x2d5)?'manual':_0x180882(0x2d5);tgBot['sendMessage'](_0xa833b4['chat']['id'],'Bot\x20Mgr\x20>\x20toggling\x20Bot\x20'+_0x58f4de+'\x20to\x20'+_0x161361+_0x180882(0x252))['catch'](_0x4e7536=>{telegramError(_0x4e7536);}),toggleBotMode(_0x58f4de);}),tgBot['removeListener'](_0x392090(0x237));});}}),tgBot['onText'](/\/names/,_0xfd18cb=>{const _0x493149=_0x3b4552;if(!validateTelegram(_0xfd18cb))return;let _0x22109c='';config[_0x493149(0x1d4)](_0x362548=>{const _0x519cb8=_0x493149;_0x22109c+='Bot\x20'+_0x362548[_0x519cb8(0x22d)]+':\x20'+_0x362548[_0x519cb8(0x27b)]+'\x0a';}),tgBot[_0x493149(0x2d1)](_0xfd18cb['chat']['id'],_0x22109c,{'parse_mode':'HTML'})[_0x493149(0x14b)](_0x2bbedd=>{telegramError(_0x2bbedd);});}),tgBot[_0x3b4552(0x266)](/\/disable/,_0x1521c6=>{const _0x3fc2a5=_0x3b4552;if(!validateTelegram(_0x1521c6))return;tgBot[_0x3fc2a5(0x2d1)](_0x1521c6[_0x3fc2a5(0x298)]['id'],_0x3fc2a5(0x1a9))[_0x3fc2a5(0x14b)](_0x323159=>{telegramError(_0x323159);}),updateSetting(_0x3fc2a5(0x1df),![]);}),tgBot[_0x3b4552(0x266)](/\/help/,_0x31a5a1=>{const _0x433d4d=_0x3b4552;if(!validateTelegram(_0x31a5a1))return;tgBot[_0x433d4d(0x2d1)](_0x31a5a1[_0x433d4d(0x298)]['id'],_0x4edaad)[_0x433d4d(0x14b)](_0x519450=>{telegramError(_0x519450);});}),tgBot['on'](_0x3b4552(0x18a),_0x1a24fb=>{const _0x5c0732=_0x3b4552;_0x1a24fb[_0x5c0732(0x175)]()['includes']('404\x20Not\x20Found')&&(logger['full'](_0x5c0732(0x2a1)),tgBot[_0x5c0732(0x209)](),tgBot=null,io['to'](_0x5c0732(0x14f))[_0x5c0732(0x2be)](_0x5c0732(0x1ab),'Invalid\x20Telegram\x20token'));}),process['once'](_0x3b4552(0x24f),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);}),process[_0x3b4552(0x140)]('SIGTERM',()=>{const _0x37e967=_0x3b4552;if(tgBot)tgBot[_0x37e967(0x209)]();process[_0x37e967(0x243)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x364856,_0x1c392e){const _0x15bf1d=_0x2474d0;if(settings['telegramEnabled']){if(settings['telegramEvents']==_0x15bf1d(0x24b)||(_0x1c392e[_0x15bf1d(0x16c)]==_0x15bf1d(0x1fc)||_0x1c392e[_0x15bf1d(0x16c)]==_0x15bf1d(0x184)||_0x1c392e['type']==_0x15bf1d(0x1c1))&&settings[_0x15bf1d(0x19a)]==_0x15bf1d(0x290)||_0x1c392e[_0x15bf1d(0x16c)]==_0x15bf1d(0x2a0)&&settings[_0x15bf1d(0x19a)]==_0x15bf1d(0x234)){if(tgBot&&settings['telegramChatId']){if(_0x1c392e[_0x15bf1d(0x2c9)])tgBot['sendMessage'](settings[_0x15bf1d(0x16f)],_0x1c392e['botname']+_0x15bf1d(0x1e6)+_0x1c392e[_0x15bf1d(0x21f)])[_0x15bf1d(0x14b)](_0x37e70c=>{telegramError(_0x37e70c);});else tgBot[_0x15bf1d(0x2d1)](settings['telegramChatId'],_0x15bf1d(0x170)+_0x364856+'\x20>\x20'+_0x1c392e['event'])[_0x15bf1d(0x14b)](_0x2ccdeb=>{telegramError(_0x2ccdeb);});}}}}async function sendTelegramMsg(_0x15109b,_0x144c36=_0x2474d0(0x1d5)){const _0x209ff9=_0x2474d0;return settings[_0x209ff9(0x1df)]&&tgBot&&settings[_0x209ff9(0x16f)]?(await tgBot[_0x209ff9(0x2d1)](settings[_0x209ff9(0x16f)],_0x15109b,{'parse_mode':_0x144c36})['catch'](_0x3ef2f6=>{telegramError(_0x3ef2f6);}),!![]):![];}function getDeviceWithIp(_0x241f0b){const _0x360295=_0x2474d0;return devices[_0x360295(0x1d2)](_0x27c4fb=>_0x27c4fb['ip']===_0x241f0b);}function temporaryAccess2FA(_0x4ebf59,_0x2f653f){const _0x4ed999=_0x2474d0;let _0xf346fc=new Date(),_0x302ba0=![];if(lastIpApproval){if(_0xf346fc-lastIpApproval<0x1388)_0x302ba0=!![];}lastIpApproval=new Date();if(_0x302ba0)return;tgBot&&settings[_0x4ed999(0x16f)]&&(tgBot[_0x4ed999(0x13e)]('callback_query'),tgBot[_0x4ed999(0x2d1)](settings[_0x4ed999(0x16f)],_0x4ed999(0x1d0)+normalizeIP(_0x2f653f)[_0x4ed999(0x2cb)]+'</b>\x20?',{'parse_mode':_0x4ed999(0x1d5),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x4ed999(0x15e),'callback_data':'15'},{'text':_0x4ed999(0x2c5),'callback_data':'30'},{'text':_0x4ed999(0x1d1),'callback_data':'reject'}]]}})[_0x4ed999(0x14b)](_0x2b166f=>{telegramError(_0x2b166f);}),tgBot['on']('callback_query',async _0x5b5561=>{const _0x35b1e4=_0x4ed999,_0x541656=_0x5b5561[_0x35b1e4(0x17e)],_0x37cffb=_0x5b5561[_0x35b1e4(0x291)];tgBot[_0x35b1e4(0x1f0)](_0x5b5561['id'])[_0x35b1e4(0x147)](async()=>{const _0x490719=_0x35b1e4;devices[_0x4ebf59][_0x490719(0x1d6)]={'clientip':_0x2f653f,'timestamp':new Date()[_0x490719(0x268)](),'expiry':_0x541656},_0x541656!=_0x490719(0x1d1)?(await tgBot[_0x490719(0x2d1)](_0x37cffb['chat']['id'],_0x490719(0x185)+_0x541656+_0x490719(0x1be),{'parse_mode':_0x490719(0x1d5)})[_0x490719(0x14b)](_0x3290f7=>{telegramError(_0x3290f7);}),io['to'](_0x4ebf59)[_0x490719(0x2be)](_0x490719(0x14e),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x490719(0x2d1)](_0x37cffb[_0x490719(0x298)]['id'],_0x490719(0x2c8))[_0x490719(0x14b)](_0x5b03c6=>{telegramError(_0x5b03c6);}),io['to'](_0x4ebf59)[_0x490719(0x2be)](_0x490719(0x14e),{'access':{'allow':![],'reason':_0x490719(0x1a3),'token':null}}));}),tgBot['removeListener'](_0x35b1e4(0x237));}));}function loginAccess2FA(_0x38afb8,_0x5aa4d0){const _0x2f6ed6=_0x2474d0;tgBot&&settings[_0x2f6ed6(0x16f)]&&(tgBot[_0x2f6ed6(0x13e)](_0x2f6ed6(0x237)),tgBot[_0x2f6ed6(0x2d1)](settings[_0x2f6ed6(0x16f)],_0x2f6ed6(0x1ea)+normalizeIP(_0x5aa4d0)[_0x2f6ed6(0x2cb)]+_0x2f6ed6(0x181),{'parse_mode':_0x2f6ed6(0x1d5),'reply_markup':{'inline_keyboard':[[{'text':_0x2f6ed6(0x17c),'callback_data':loginExpiry},{'text':_0x2f6ed6(0x1d1),'callback_data':_0x2f6ed6(0x1d1)}]]}})[_0x2f6ed6(0x14b)](_0x4ff9d5=>{telegramError(_0x4ff9d5);}),tgBot['on'](_0x2f6ed6(0x237),async _0x30c341=>{const _0x2cb000=_0x2f6ed6,_0x1de3af=_0x30c341[_0x2cb000(0x17e)],_0x377e12=_0x30c341[_0x2cb000(0x291)];tgBot['answerCallbackQuery'](_0x30c341['id'])['then'](async()=>{const _0x5a16a6=_0x2cb000;devices[_0x38afb8][_0x5a16a6(0x13c)]={'clientip':_0x5aa4d0,'timestamp':new Date()[_0x5a16a6(0x268)](),'expiry':_0x1de3af},_0x1de3af!=_0x5a16a6(0x1d1)?(await tgBot[_0x5a16a6(0x2d1)](_0x377e12[_0x5a16a6(0x298)]['id'],_0x5a16a6(0x160),{'parse_mode':_0x5a16a6(0x1d5)})[_0x5a16a6(0x14b)](_0x3369ec=>{telegramError(_0x3369ec);}),io['to'](_0x38afb8)[_0x5a16a6(0x2be)]('status',{'access':{'allow':![],'reason':_0x5a16a6(0x1a4),'token':null}})):(await tgBot[_0x5a16a6(0x2d1)](_0x377e12['chat']['id'],_0x5a16a6(0x1b2))['catch'](_0x588571=>{telegramError(_0x588571);}),io['to'](_0x38afb8)[_0x5a16a6(0x2be)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x2cb000(0x13e)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4dd2a7=_0x2474d0;return dbConfig[_0x4dd2a7(0x192)](_0x4dd2a7(0x148))[_0x4dd2a7(0x2cf)]('botID')['filter']({'status':_0x4dd2a7(0x162)})[_0x4dd2a7(0x23f)]()||[];}function getDisabledBots(){const _0x7d5800=_0x2474d0;return dbConfig['get'](_0x7d5800(0x148))[_0x7d5800(0x2cf)]('botID')[_0x7d5800(0x25a)]({'status':'disabled'})['value']()||[];}function getBotAttributes(_0x1e3fc2){const _0x566647=_0x2474d0;let _0x259997={};const _0x182b4e=configpath+_0x566647(0x292)+_0x1e3fc2+'-config.json',_0x5c60d9=fs['existsSync'](_0x182b4e);if(_0x5c60d9){const _0x3cf90a=fs[_0x566647(0x2b5)](_0x182b4e);try{const _0x3f51d7=JSON[_0x566647(0x254)](_0x3cf90a),_0x1ebd4d=_0x3f51d7?_0x3f51d7[_0x566647(0x1b7)][0x0][_0x566647(0x1f5)]:![];_0x259997['mode']=_0x1ebd4d?_0x566647(0x2d5):_0x566647(0x14a),_0x259997[_0x566647(0x27b)]=_0x3f51d7?_0x3f51d7['bot'][0x0]['botname']:'Bot\x20'+_0x1e3fc2;}catch(_0x2fa192){_0x259997['mode']=_0x566647(0x14a),_0x259997[_0x566647(0x27b)]='Bot\x20'+_0x1e3fc2;}}else _0x259997[_0x566647(0x288)]=_0x566647(0x14a),_0x259997['botname']='Bot\x20'+_0x1e3fc2;return _0x259997;}function getBotsWithMode(){const _0x26ba44=_0x2474d0,_0x35f093=dbConfig[_0x26ba44(0x192)](_0x26ba44(0x148))[_0x26ba44(0x2cf)](_0x26ba44(0x22d))[_0x26ba44(0x23f)]()||[];return _0x35f093[_0x26ba44(0x1d4)](_0xa194d=>{const _0x388290=_0x26ba44;let _0x4a7ac8=getBotAttributes(_0xa194d[_0x388290(0x22d)]);_0xa194d[_0x388290(0x288)]=_0x4a7ac8[_0x388290(0x288)];}),_0x35f093;}async function initUser(){const _0x1a4035=_0x2474d0;if(!settings[_0x1a4035(0x280)]){const _0x3421d5=uuidRandom();mixpanel['alias'](_0x3421d5),updateSetting('userid',_0x3421d5);}}async function initSecure(){const _0x18a511=_0x2474d0;let _0x370c4c=getSecure();if(!_0x370c4c[_0x18a511(0x1e1)](_0x18a511(0x26b))){let _0x3abf6c=await generateKeys();_0x370c4c[_0x18a511(0x2ad)]=_0x3abf6c['publicKey'],_0x370c4c['privateKey']=_0x3abf6c[_0x18a511(0x276)],_0x370c4c['secret']=crypto[_0x18a511(0x25b)](0x20)[_0x18a511(0x175)](_0x18a511(0x2db));;storeSecure(_0x370c4c);}}function getSettings(){const _0xa3bf6f=_0x2474d0;return dbSettings[_0xa3bf6f(0x192)](_0xa3bf6f(0x15b))[_0xa3bf6f(0x23f)]()||{};}function getSecure(){const _0x187aa8=_0x2474d0;return dbSecure[_0x187aa8(0x192)](_0x187aa8(0x25f))[_0x187aa8(0x23f)]()||{};}function getBlacklist(){const _0x419f2c=_0x2474d0;return dbSecure[_0x419f2c(0x192)](_0x419f2c(0x27e))[_0x419f2c(0x23f)]()||[];}function broadcastToBots(_0x2b2aa6,_0x7ff7ff){const _0x3ea2a3=_0x2474d0;config[_0x3ea2a3(0x1d4)](_0x179a2c=>{const _0x4da5f1=_0x3ea2a3;if(_0x179a2c[_0x4da5f1(0x14e)]=='enabled'&&_0x179a2c[_0x4da5f1(0x28b)]=='running'){if(pid[_0x179a2c['botID']])pid[_0x179a2c['botID']][_0x4da5f1(0x2af)]({[_0x2b2aa6]:_0x7ff7ff});}});}function storeSettings(_0x28e580,_0x59b27c=![]){const _0x517ada=_0x2474d0;_0x28e580={...settings,..._0x28e580};if(_0x59b27c&&_0x28e580[_0x517ada(0x161)]!=_0x517ada(0x203)&&_0x28e580[_0x517ada(0x161)]!=_0x517ada(0x289)&&_0x28e580[_0x517ada(0x161)]!=''){const _0x2160e9=crypt[_0x517ada(0x166)](secure[_0x517ada(0x276)],_0x28e580['bbPassword'])[_0x517ada(0x291)][_0x517ada(0x1f2)]('@')[0x0],_0x1aeac7=bcrypt[_0x517ada(0x1db)](_0x2160e9,saltRounds);_0x28e580={..._0x28e580,'bbPassword':_0x1aeac7};}if(_0x59b27c&&_0x28e580[_0x517ada(0x1c0)]!=_0x517ada(0x203)&&_0x28e580[_0x517ada(0x1c0)]!='***'&&_0x28e580['telegramToken']!=''){const _0x329030=crypt[_0x517ada(0x166)](secure[_0x517ada(0x276)],_0x28e580[_0x517ada(0x1c0)])[_0x517ada(0x291)][_0x517ada(0x1f2)]('@')[0x0];_0x28e580={..._0x28e580,'telegramToken':_0x329030};}const _0x574ae0=_0x28e580['telegramToken']!=_0x517ada(0x203)&&_0x28e580['telegramToken']!=settings[_0x517ada(0x1c0)]||_0x28e580[_0x517ada(0x1e0)]!=settings[_0x517ada(0x1e0)],_0x4945b8=_0x28e580[_0x517ada(0x1c0)]==''||_0x28e580[_0x517ada(0x1e0)]=='';if(_0x574ae0)_0x28e580[_0x517ada(0x19a)]=_0x517ada(0x24b);for(const [_0x38b577,_0x29f919]of Object[_0x517ada(0x155)](_0x28e580)){if(_0x38b577==_0x517ada(0x1c0)&&_0x29f919=='************'){_0x28e580[_0x517ada(0x1c0)]=settings[_0x517ada(0x1c0)];continue;};if(_0x38b577==_0x517ada(0x161)&&_0x29f919==_0x517ada(0x203)){_0x28e580[_0x517ada(0x161)]=settings[_0x517ada(0x161)];continue;};dbSettings[_0x517ada(0x1f6)](_0x517ada(0x1ca)+_0x38b577,_0x29f919)[_0x517ada(0x1c3)]();}settings=_0x28e580,io['to'](_0x517ada(0x14f))['emit'](_0x517ada(0x15b),cleanSettings()),broadcastToBots(_0x517ada(0x1bc),settings[_0x517ada(0x1bc)]);if(_0x574ae0&&!_0x4945b8)initTelegram();if(_0x574ae0&&_0x4945b8)disableTelegram();getAllClients()[_0x517ada(0x1d4)](_0x50bd3a=>{const _0x10f84f=_0x517ada;getSocket(_0x50bd3a['id'])[_0x10f84f(0x2be)]('status',{'access':{'allow':![],'reason':_0x10f84f(0x1a4),'token':null}});});}function updateSetting(_0x2be9b9,_0x3f9838){const _0x1a13f2=_0x2474d0;dbSettings[_0x1a13f2(0x1f6)](_0x1a13f2(0x1ca)+_0x2be9b9,_0x3f9838)[_0x1a13f2(0x1c3)](),settings=getSettings(),io['to'](_0x1a13f2(0x14f))['emit']('settings',cleanSettings());}function storeSecure(_0x345a02){const _0x3948e3=_0x2474d0;dbSecure[_0x3948e3(0x192)]('secure')[_0x3948e3(0x1b9)](_0x345a02)[_0x3948e3(0x1c3)](),secure=_0x345a02;}function addBlacklist(_0x3cae9e){const _0x2e83ef=_0x2474d0;cleanBlacklist();let _0x2643c5;devices[_0x3cae9e][_0x2e83ef(0x1d6)]?_0x2643c5=Math['max'](devices[_0x3cae9e][_0x2e83ef(0x1d6)][_0x2e83ef(0x253)],loginExpiry):_0x2643c5=loginExpiry,dbSecure[_0x2e83ef(0x192)]('blacklist')[_0x2e83ef(0x1b9)]({'expiry':new Date()[_0x2e83ef(0x268)]()+_0x2643c5*0x3c*0x3e8,'token':devices[_0x3cae9e][_0x2e83ef(0x24d)][_0x2e83ef(0x1a7)]})['write'](),blacklist=dbSecure['get'](_0x2e83ef(0x27e))[_0x2e83ef(0x23f)]();}function cleanBlacklist(){const _0x3bacc2=_0x2474d0;let _0x55b840=dbSecure[_0x3bacc2(0x192)](_0x3bacc2(0x27e))[_0x3bacc2(0x28f)]()[_0x3bacc2(0x23f)](),_0x44307e=new Date()[_0x3bacc2(0x268)]();_0x55b840[_0x3bacc2(0x1d4)](_0x3a99f6=>{const _0xeb4a49=_0x3bacc2;_0x3a99f6['expiry']<_0x44307e&&dbSecure[_0xeb4a49(0x192)]('blacklist')['remove']({'expiry':_0x3a99f6[_0xeb4a49(0x253)]})['write']();});}function initStates(){const _0xbb24cb=_0x2474d0;let _0x1768ee=getConfiguration();_0x1768ee[_0xbb24cb(0x1d4)](_0x32ab5d=>{const _0x1423fa=_0xbb24cb;_0x32ab5d[_0x1423fa(0x28b)]=_0x1423fa(0x169);}),storeConfiguration(_0x1768ee);}function onKeys(){const _0x45f740=new RSA();return new Promise(_0x35a60e=>{const _0x3ae07f=_0x5283;_0x45f740[_0x3ae07f(0x150)]()['then'](_0xa06722=>{_0x35a60e(_0xa06722);});});}function _0x5283(_0x3dc26c,_0x50b446){const _0x508e1a=_0x4f65();return _0x5283=function(_0x26ac4f,_0x438288){_0x26ac4f=_0x26ac4f-0x13c;let _0x4f6552=_0x508e1a[_0x26ac4f];return _0x4f6552;},_0x5283(_0x3dc26c,_0x50b446);}function _0x4f65(){const _0x3eafeb=['sendMessage','Unauthorized\x20attempt\x20to\x20store\x20configuration','4361AUAEAO','crypto','auto','Password\x20reset\x20rejected','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','size','/:bot/coins','pidExpireLogin','hex','latestversion','telegram2FaApproval','store','removeListener','Invalid\x20username\x20or\x20IP\x20address','once','track','inherit','socket.io','sockets','output-003.log','fork','then','bots','NTBA_FIX_319','manual','catch','config/','/restart\x20-\x20restart\x20bot(s)\x0a','status','botmanager','generateKeyPairAsync','socket','/on\x20-\x20start\x20bot(s)\x0a','kind','timestamp','entries','store-headless','-----------------------------------------------------------------------------------','reset-password','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','/:bot/support','settings','uuid-random','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','15\x20min','Unauthorized\x20attempt\x20to\x20update\x20bot','Login\x20accepted','bbPassword','enabled','Password\x20has\x20been\x20reset\x20to:\x20','restarting\x20Bot\x20','full','decrypt','isValid','store-settings','stopped','login\x20required','lastmsgemitted','type','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','Ok,\x20will\x20send\x20alert\x20notifications\x20only','telegramChatId','Bot\x20','function','env','.zip','Unauthorized\x20attempt\x20to\x20log\x20out','toString','Server','started','search','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','padStart','params','accept','rmSync','data','Markdown','Crypt','</b>\x20?','yargs/yargs','/names\x20-\x20show\x20bot\x20names\x0a','warning','Access\x20enabled\x20for\x20','clientip','logout','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','polling_error','messages','existsSync','Bot\x20Mgr\x20>\x20','delete-alerts','No\x20bots\x20running\x20right\x20now','RSA-OAEP','12891474dQHImw','get','getMonth','backup/','Unauthorized\x20attempt\x20to\x20delete\x20alerts','bbUsername','new','Notifications\x20types:\x20','connected','telegramEvents','temporary\x20access\x20timeout','new-disabled','removeAllListeners','headers','file','whitelistEnabled','toIPv4MappedAddress','binary','temporary\x20access\x20rejected','reload','getUTCHours','createServer','token','test','Notifications\x20disabled','connection','notification','disabled\x20Bot\x20','-performance.json','getFullYear','verify','auth','temporary\x20token\x20generated','Login\x20rejected','hybrid-crypto-js','/off\x20-\x20stop\x20bot(s)\x0a','/:bot/history','constructor','bot','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','push','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','timeshift','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','\x20minutes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','telegramToken','success','idling\x20bot\x20\x20\x20|\x20Bot\x20','write','files','temporaryAccessAllowed','getStartingBalances','updatebotmanager','Notifications\x20disabled\x0a','getDate','settings.','match','format','Unauthorized\x20attempt\x20to\x20delete\x20bot','User\x20has\x20been\x20validated','get-messages','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','reject','find','port','forEach','HTML','telegramIpApproval','statSync','33bswGNF','/:bot/configuration','*$1*','hashSync','jsonwebtoken','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','api-eu.mixpanel.com','telegramEnabled','telegramUsername','hasOwnProperty','ipv6','(((.+)+)+)+$','writeFileSync','/enable\x20-\x20enable\x20notifications\x0a','\x20>\x20','bb-settings.json','https://api.ipify.org?format=json','allow','Allow\x20login\x20from\x20IP\x20address\x20<b>','173560wxyEUh','All\x20bots\x20running\x20right\x20now','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','log','login','answerCallbackQuery','-events.json','split','get-starting-balances','add-bot','headless','set','defaults','output-002.log','2FA','Unauthorized\x20attempt\x20to\x20add\x20bot','name','error','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','starting\x20new\x20bot\x20|\x20Bot\x20','deleteHistoryAlerts','tkn','generate','length','************','<b>Telegram\x20Bot\x20Status:</b>\x0a','telegram','node-zip','\x20|\x20','download','stopPolling','axios','isDirectory','2FA\x20login\x20required','replace','Unauthorized\x20attempt\x20to\x20confirm\x20message','get-logs','File\x20uploaded','exec','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','update-bot','Invalid\x20authentication\x20token\x20(2)','\x20(1)','http','lowdb','sha256','post','1000','Token\x20blacklisted','/output-000.log','getSeconds','Invalid\x20authentication\x20token\x20(1)','event',':\x20Bot\x20Mgr\x20>\x20','Failed\x20to\x20download\x20',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','output-001.log','zip/','/update\x20-\x20update\x20Balance\x20Bot\x0a','<b>Balance\x20Bot\x20Status:</b>\x0a','update-bb','listen','temp/','No\x20authentication\x20token','includes','stop','botID','25ySgmaM','placeOrder','deleted\x20Bot\x20','-results.json','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','DEFLATE','orders','Starting\x20Balance\x20Bot\x20update','2FA\x20login\x20token\x20generated','callback_query','remoteAddress','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','Your\x20installation\x20is\x20already\x20up\x20to\x20date','disabled','Yes','-config.json','exp','value','3616848luqejr','mkdirSync','bb-secure.json','exit','initclient','place-order','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','delete-bot','stringify','encryptedUuid','min','all','getHours','access','_data','SIGINT','index.html','apiSecret','\x20mode','expiry','parse','$1_$2_$3','Restore\x20process\x20aborted','isIPv4MappedAddress','All','Orders','filter','randomBytes','bbvNew','yes','telegrammsg','secure','password','lastmsgtelegram','\x20(2)','cancel-loading','startsWith','toggleBotMode','onText','0.0.0','getTime','RSA','sendFile','secret','store-configuration','username','from','toIPv4Address','Alerts','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Error:\x20Invalid\x20argument\x20','simple','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','emitHistory','privateKey','login\x20token\x20generated','join','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','pidRefreshToken','botname','number','f2aRequired','blacklist','bot.js','userid','2579452JAcipC','copyFileSync','All\x20bots','sign','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','enabled\x20Bot\x20','/:bot','mode','***','login\x20not\x20required','live','storeHeadless','logs/','loginRequired','cloneDeep','alerts','message','bot-','slice','apply','1515201zDNByq','assign','toggle-bot-mode','chat','Invalid\x20IP\x20address','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','13504xmKpxH','logged\x20out','util','1765482sDKEhy','logs','order','Invalid\x20Telegram\x20token','randomFillSync','getMinutes','path','date-fns','build','unlinkSync','error\x20while\x20deleting\x20config\x20files:\x20','sendPortfolioTelegram','mixpanel','You\x20can\x20use\x20the\x20following\x20commands:\x0a','use','publicKey','::1','send','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','build2','backup',',\x20must\x20be\x20a\x204\x20digit\x20number','readFileSync','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Unauthorized\x20login\x20attempt\x20(timeout)','starting\x20bot\x20|\x20Bot\x20','compareSync','conn','user','uuid','Restoring\x20bot(s)\x20from\x20backup\x20-\x20Bot\x20Manager\x20will\x20restart\x20once\x20finished','emit','kill','ipc','disconnect','reason','handshake','Unauthorized\x20attempt\x20to\x20download\x20','30\x20min','readdirSync','whitelist','Temporary\x20access\x20rejected','showname','confirm-message','show','2FA\x20required','/download/:type','version','sortBy','2uVdqDE'];_0x4f65=function(){return _0x3eafeb;};return _0x4f65();}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0xbec5c2=_0x2474d0;let _0x1d02ec=getSettings(),_0x169842=![];!_0x1d02ec[_0xbec5c2(0x1e1)]('lastmsgtelegram')&&(_0x1d02ec[_0xbec5c2(0x261)]=0x0,_0x169842=!![]);!_0x1d02ec[_0xbec5c2(0x1e1)](_0xbec5c2(0x16b))&&(_0x1d02ec[_0xbec5c2(0x16b)]=0x0,_0x169842=!![]);!_0x1d02ec['hasOwnProperty'](_0xbec5c2(0x2dc))&&(_0x1d02ec['latestversion']=_0xbec5c2(0x267),_0x169842=!![]);if(_0x169842)storeSettings(_0x1d02ec);}function storeConfiguration(_0x2b33de){const _0x3c023f=_0x2474d0;dbConfig['get'](_0x3c023f(0x148))['remove']()['write'](),_0x2b33de[_0x3c023f(0x1d4)](_0xdb21d7=>{delete _0xdb21d7['mode'];}),dbConfig['get'](_0x3c023f(0x148))[_0x3c023f(0x1b9)](..._0x2b33de)[_0x3c023f(0x1c3)](),config=_0x2b33de;}function resetPassword(){const _0x4ff6e5=_0x2474d0;tgBot&&settings[_0x4ff6e5(0x16f)]&&(tgBot[_0x4ff6e5(0x13e)](_0x4ff6e5(0x237)),tgBot[_0x4ff6e5(0x2d1)](settings[_0x4ff6e5(0x16f)],_0x4ff6e5(0x1dd),{'parse_mode':_0x4ff6e5(0x1d5),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0x4ff6e5(0x14b)](_0x1f4e85=>{telegramError(_0x1f4e85);}),tgBot['on']('callback_query',async _0x3c8458=>{const _0x141c59=_0x4ff6e5,_0x524f7b=_0x3c8458[_0x141c59(0x17e)],_0x1f3c7c=_0x3c8458[_0x141c59(0x291)];tgBot['answerCallbackQuery'](_0x3c8458['id'])[_0x141c59(0x147)](async()=>{const _0x4ab4aa=_0x141c59;if(_0x524f7b!='no'){const _0x521d4c=0xf,_0x30aeec=_0x4ab4aa(0x179),_0x19b558=Array[_0x4ab4aa(0x26e)](crypto[_0x4ab4aa(0x2a2)](new Uint32Array(_0x521d4c)))['map'](_0x530105=>_0x30aeec[_0x530105%_0x30aeec[_0x4ab4aa(0x202)]])[_0x4ab4aa(0x278)](''),_0x4fce76=bcrypt['hashSync'](_0x19b558,saltRounds);storeSettings({'bbPassword':_0x4fce76}),await tgBot[_0x4ab4aa(0x2d1)](_0x1f3c7c[_0x4ab4aa(0x298)]['id'],_0x4ab4aa(0x163)+_0x19b558,{'parse_mode':'HTML'})[_0x4ab4aa(0x14b)](_0x41dcde=>{telegramError(_0x41dcde);});}else await tgBot['sendMessage'](_0x1f3c7c[_0x4ab4aa(0x298)]['id'],_0x4ab4aa(0x2d6))[_0x4ab4aa(0x14b)](_0x1b6ad2=>{telegramError(_0x1b6ad2);});}),tgBot[_0x141c59(0x13e)]('callback_query');}));}async function confirmRestore(_0x33ef49,_0xb2ec8e){const _0xcff592=_0x2474d0;tgBot&&settings[_0xcff592(0x16f)]&&(tgBot[_0xcff592(0x13e)](_0xcff592(0x237)),await tgBot[_0xcff592(0x2d1)](settings[_0xcff592(0x16f)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':_0xcff592(0x1d5),'reply_markup':{'inline_keyboard':[[{'text':_0xcff592(0x25d),'callback_data':_0xcff592(0x25d)},{'text':'no','callback_data':'no'}]]}})[_0xcff592(0x14b)](_0x2c4fb8=>{telegramError(_0x2c4fb8);}),tgBot['on'](_0xcff592(0x237),async _0x1301f4=>{const _0x29f66c=_0xcff592,_0x2bbbd6=_0x1301f4[_0x29f66c(0x17e)],_0x6c9e1=_0x1301f4[_0x29f66c(0x291)];tgBot['answerCallbackQuery'](_0x1301f4['id'])[_0x29f66c(0x147)](async()=>{const _0x47348f=_0x29f66c;_0x2bbbd6!='no'?(await tgBot[_0x47348f(0x2d1)](_0x6c9e1['chat']['id'],_0x47348f(0x2bd),{'parse_mode':_0x47348f(0x1d5)})[_0x47348f(0x14b)](_0x552925=>{telegramError(_0x552925);}),unzipFile(_0x33ef49,_0xb2ec8e)):await tgBot['sendMessage'](_0x6c9e1[_0x47348f(0x298)]['id'],_0x47348f(0x256))[_0x47348f(0x14b)](_0x54f3cf=>{telegramError(_0x54f3cf);});}),tgBot[_0x29f66c(0x13e)]('callback_query');}));}function getServerTime(){const _0x4d924c=_0x2474d0,_0x589dc1=new Date();return _0x589dc1[_0x4d924c(0x1ae)]()+'/'+(_0x589dc1[_0x4d924c(0x193)]()+0x1)[_0x4d924c(0x175)]()[_0x4d924c(0x17a)](0x2,'0')+'/'+_0x589dc1[_0x4d924c(0x1c9)]()[_0x4d924c(0x175)]()[_0x4d924c(0x17a)](0x2,'0')+'\x20'+_0x589dc1[_0x4d924c(0x24c)]()[_0x4d924c(0x175)]()['padStart'](0x2,'0')+':'+_0x589dc1[_0x4d924c(0x2a3)]()[_0x4d924c(0x175)]()['padStart'](0x2,'0')+':'+_0x589dc1[_0x4d924c(0x21d)]()['toString']()[_0x4d924c(0x17a)](0x2,'0');}function getTimeStamp(){const _0x2800aa=_0x2474d0,_0x540ba1=shiftedTime();return _0x540ba1[_0x2800aa(0x1ae)]()+'/'+(_0x540ba1[_0x2800aa(0x193)]()+0x1)['toString']()[_0x2800aa(0x17a)](0x2,'0')+'/'+_0x540ba1[_0x2800aa(0x1c9)]()['toString']()[_0x2800aa(0x17a)](0x2,'0')+'\x20'+_0x540ba1[_0x2800aa(0x24c)]()[_0x2800aa(0x175)]()[_0x2800aa(0x17a)](0x2,'0')+':'+_0x540ba1[_0x2800aa(0x2a3)]()[_0x2800aa(0x175)]()[_0x2800aa(0x17a)](0x2,'0')+':'+_0x540ba1['getSeconds']()[_0x2800aa(0x175)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x1c528c=_0x2474d0,_0x42f36d=new Date();let _0x5456b1=_0x42f36d;if(settings[_0x1c528c(0x1bc)]&&settings[_0x1c528c(0x1bc)]!==0x0)_0x5456b1=fns['add'](_0x42f36d,{'hours':settings[_0x1c528c(0x1bc)]});return _0x5456b1;}function startScheduler(){const _0xd431bd=_0x2474d0,_0x3b8a9a=new Date()[_0xd431bd(0x1a5)](),_0x5b8495=shiftedTime()['getHours']();_0x5b8495==0x4&&backupConfigFiles();_0x5b8495==0x0&&rotateLogFiles();_0x3b8a9a%0x6==0x0&&triggerAnalytics();_0x3b8a9a%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function backupConfigFiles(){const _0x5804cb=_0x2474d0;fs[_0x5804cb(0x2c6)](configpath,{'withFileTypes':!![]})[_0x5804cb(0x1d4)](_0x289e8b=>{const _0x36172e=_0x5804cb;if(!_0x289e8b[_0x36172e(0x20b)]())fs[_0x36172e(0x282)](configpath+_0x289e8b['name'],configbackuppath+_0x289e8b[_0x36172e(0x1fb)]);});}function rotateLogFiles(){const _0x5a1d0f=_0x2474d0,_0x1b7c83=fs[_0x5a1d0f(0x1d7)](logspath+'output-000.log'),_0x516ba9=_0x1b7c83[_0x5a1d0f(0x2d8)]/0x400;if(_0x516ba9>0x32){let _0x151d8c=fs[_0x5a1d0f(0x2c6)](logspath,{'withFileTypes':!![]});_0x151d8c['sort']((_0x12a536,_0x4453cf)=>_0x12a536[_0x5a1d0f(0x1fb)]<_0x4453cf[_0x5a1d0f(0x1fb)]?0x1:_0x4453cf['name']<_0x12a536[_0x5a1d0f(0x1fb)]?-0x1:0x0),_0x151d8c['forEach'](_0x28cefd=>{const _0x317480=_0x5a1d0f;if(_0x28cefd[_0x317480(0x1fb)]==_0x317480(0x1f8))fs[_0x317480(0x282)](logspath+_0x28cefd[_0x317480(0x1fb)],logspath+_0x317480(0x145));if(_0x28cefd[_0x317480(0x1fb)]==_0x317480(0x223))fs[_0x317480(0x282)](logspath+_0x28cefd[_0x317480(0x1fb)],logspath+'output-002.log');_0x28cefd[_0x317480(0x1fb)]=='output-000.log'&&(fs[_0x317480(0x282)](logspath+_0x28cefd[_0x317480(0x1fb)],logspath+'output-001.log'),fs[_0x317480(0x1e4)](logspath+_0x28cefd['name'],''));});}}async function zipFiles(_0x4b43c2){const _0x2e2f57=_0x2474d0;let _0x3c6008;if(_0x4b43c2==_0x2e2f57(0x29f))_0x3c6008=logspath;if(_0x4b43c2==_0x2e2f57(0x2b3))_0x3c6008=configpath;let _0x1ca5c0=fs[_0x2e2f57(0x2c6)](_0x3c6008,{'withFileTypes':!![]});const _0x16c549=new require('node-zip')();_0x1ca5c0['forEach'](_0x1abd50=>{const _0x165f52=_0x2e2f57;if(!_0x1abd50['isDirectory']()){let _0x1da358=fs[_0x165f52(0x2b5)](_0x3c6008+_0x1abd50[_0x165f52(0x1fb)]);const _0x2860b8=/^bot-[0-9]{3}-config.json$/,_0xff2f75=_0x2860b8['test'](_0x1abd50[_0x165f52(0x1fb)]);if(_0xff2f75){const _0x4cd538=JSON[_0x165f52(0x254)](_0x1da358);_0x4cd538[_0x165f52(0x1b7)][0x0]['apiKey']='***',_0x4cd538[_0x165f52(0x1b7)][0x0][_0x165f52(0x251)]=_0x165f52(0x289),_0x1da358=JSON[_0x165f52(0x248)](_0x4cd538,null,0x2);}if(_0x1abd50[_0x165f52(0x1fb)]==_0x165f52(0x1e7)){const _0xc5eacc=JSON[_0x165f52(0x254)](_0x1da358);if(_0xc5eacc[_0x165f52(0x15b)]['loginRequired'])_0xc5eacc[_0x165f52(0x15b)][_0x165f52(0x28e)]=![];if(_0xc5eacc[_0x165f52(0x15b)]['bbPassword'])_0xc5eacc[_0x165f52(0x15b)][_0x165f52(0x161)]='***';if(_0xc5eacc[_0x165f52(0x15b)][_0x165f52(0x1c0)])_0xc5eacc[_0x165f52(0x15b)]['telegramToken']=_0x165f52(0x289);if(_0xc5eacc['settings']['telegramChatId'])_0xc5eacc[_0x165f52(0x15b)][_0x165f52(0x16f)]=null;_0x1da358=JSON[_0x165f52(0x248)](_0xc5eacc,null,0x2);}if(_0x1abd50['name']!=_0x165f52(0x242))_0x16c549[_0x165f52(0x19f)](_0x1abd50['name'],_0x1da358);}});const _0x5f304f=_0x16c549[_0x2e2f57(0x201)]({'base64':![],'compression':_0x2e2f57(0x233)});fs[_0x2e2f57(0x1e4)](zippath+(_0x4b43c2+_0x2e2f57(0x173)),_0x5f304f,'binary');}async function unzipFile(_0xf1abbb,_0x5a7610){const _0x44c031=_0x2474d0;await backupConfigFiles(),fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x44c031(0x1d4)](_0x441e3e=>{const _0x5afff4=_0x44c031;if(!_0x441e3e[_0x5afff4(0x20b)]())fs[_0x5afff4(0x17d)](configpath+_0x441e3e['name']);});const _0x1bfd3c=fs[_0x44c031(0x2b5)](_0xf1abbb+_0x5a7610,_0x44c031(0x1a2)),_0xa9b2e4=new require(_0x44c031(0x206))(_0x1bfd3c,{'base64':![],'checkCRC32':!![]});Object['keys'](_0xa9b2e4[_0x44c031(0x1c4)])[_0x44c031(0x1d4)](_0x45d477=>{const _0x2afea7=_0x44c031,_0x501ffe=_0xa9b2e4[_0x2afea7(0x1c4)][_0x45d477];fs[_0x2afea7(0x1e4)](configpath+_0x501ffe[_0x2afea7(0x1fb)],_0x501ffe[_0x2afea7(0x24e)]);}),fs[_0x44c031(0x2c6)](temppath,{'withFileTypes':!![]})[_0x44c031(0x1d4)](_0x3bf507=>{const _0x555bc4=_0x44c031;if(!_0x3bf507['isDirectory']())fs[_0x555bc4(0x17d)](temppath+_0x3bf507[_0x555bc4(0x1fb)]);}),process[_0x44c031(0x2af)]({'restore':!![]},_0x13edbe=>{});}async function getPublicIp(){const _0x25253c=_0x2474d0;try{const _0x1d9c9e=await axios[_0x25253c(0x192)](_0x25253c(0x1e8));publicip=_0x1d9c9e[_0x25253c(0x17e)]['ip'];}catch(_0x10ebeb){}}async function triggerAnalytics(){const _0x34911b=_0x2474d0;if(!publicip)await getPublicIp();const _0x140ba3=getBotsWithMode();let _0x1fe3dc=0x0;_0x140ba3['forEach'](_0x4ca626=>{const _0x405ee7=_0x5283;if(_0x4ca626[_0x405ee7(0x14e)]===_0x405ee7(0x162))_0x1fe3dc++;}),mixpanel[_0x34911b(0x141)](_0x34911b(0x176),{'distinct_id':settings[_0x34911b(0x280)],'ip':publicip,'version':serverversion,'numbots':_0x140ba3['length'],'numbotsenabled':_0x1fe3dc});}async function getMessages(){const _0x59ee32=_0x2474d0,_0x2a656e='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0xf7b12f=new GraphQLClient(_0x2a656e),_0x1b590c={'authorization':_0x59ee32(0x16d)},_0xb0da1a=serverversion['split']('.'),_0x208443=_0xb0da1a[0x0]+'.'+_0xb0da1a[0x1],_0x21647d=Math[_0x59ee32(0x24a)](settings[_0x59ee32(0x261)],settings['lastmsgemitted']),_0x2b1995={'last':parseInt(_0x21647d),'bbm':_0x208443},_0xad4c9a=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4be1a2;try{_0x4be1a2=await _0xf7b12f['request'](_0xad4c9a,_0x2b1995,_0x1b590c);}catch(_0x473ae1){}if(_0x4be1a2&&_0x4be1a2[_0x59ee32(0x18b)]){let _0x24597f=settings[_0x59ee32(0x261)];newMessages=[];for(const _0x26be2f of _0x4be1a2['messages']){newMessages[_0x59ee32(0x1b9)](_0x26be2f);if(_0x26be2f[_0x59ee32(0x25c)])updateSetting(_0x59ee32(0x2dc),_0x26be2f[_0x59ee32(0x25c)]);let _0x3b6cae=_0x26be2f['bbvNew']?serverversion>=_0x26be2f['bbvNew']:![];if(!_0x3b6cae&&_0x26be2f[_0x59ee32(0x27c)]>_0x24597f){if(_0x26be2f['bbvReceive']==='any'||serverversion[_0x59ee32(0x264)](_0x26be2f['bbvReceive'])){let _0x3f3aeb=''+_0x26be2f['title']+'\x0a\x0a'+_0x26be2f['message'];const _0x2f3b7d=await sendTelegramMsg(toTelegramMarkdown(_0x3f3aeb),_0x59ee32(0x17f));if(_0x2f3b7d)_0x24597f=_0x26be2f['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x59ee32(0x261),_0x24597f),emitMessages();}}function emitMessages(){const _0x2b2eb8=_0x2474d0,_0x5808e2=settings[_0x2b2eb8(0x16b)];let _0x928ca7=[];newMessages[_0x2b2eb8(0x1d4)](_0x345fc4=>{const _0x28921b=_0x2b2eb8;_0x345fc4[_0x28921b(0x27c)]>_0x5808e2&&_0x928ca7[_0x28921b(0x1b9)](_0x345fc4);}),_0x928ca7[_0x2b2eb8(0x202)]>0x0&&getAllClients()['forEach'](_0x5658ee=>{const _0x1d5b27=_0x2b2eb8;getSocket(_0x5658ee['id'])[_0x1d5b27(0x2be)](_0x1d5b27(0x291),_0x928ca7);});}function confirmMessage(_0x30ebd8){const _0x28238a=_0x2474d0;updateSetting(_0x28238a(0x16b),Number(_0x30ebd8));}function isNewerVersion(_0x1078ec,_0x27adcd){const _0x49e39b=_0x2474d0,_0x4ace64=_0x27adcd[_0x49e39b(0x1f2)]('.'),_0x47dc86=_0x1078ec['split']('.');for(var _0x724f2d=0x0;_0x724f2d<_0x47dc86[_0x49e39b(0x202)];_0x724f2d++){const _0x3e6c14=~~_0x47dc86[_0x724f2d],_0x38c427=~~_0x4ace64[_0x724f2d];if(_0x3e6c14>_0x38c427)return!![];if(_0x3e6c14<_0x38c427)return![];}return![];}function toTelegramMarkdown(_0x3ee7dc){const _0x12d22=_0x2474d0,_0x8f0685=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x16c0f4=/\*{2}(.+?)\*{2}/gim;return _0x3ee7dc=_0x3ee7dc['replace'](_0x8f0685,_0x12d22(0x255))[_0x12d22(0x20d)](_0x16c0f4,_0x12d22(0x1da)),_0x3ee7dc;}async function validateConfigFile(){const _0x2439b7=_0x2474d0,_0x456e8e=dbConfig[_0x2439b7(0x192)](_0x2439b7(0x148))['sortBy'](_0x2439b7(0x22d))[_0x2439b7(0x23f)]()||[];if(_0x456e8e['length']==0x0){let _0x18c74b=0x0,_0x3b7c4f=[];const _0x1f499c=/^bot-([0-9]{3})-config.json$/,_0x20c0ff=fs[_0x2439b7(0x2c6)](configpath);_0x20c0ff['forEach'](_0x51caa5=>{const _0x5c20e5=_0x2439b7,_0x100b47=_0x1f499c[_0x5c20e5(0x211)](_0x51caa5);if(_0x100b47){const _0x32c895=_0x100b47[0x1];let _0x14d07c=getBotAttributes(_0x32c895);_0x3b7c4f[_0x5c20e5(0x1b9)]({'botID':_0x32c895,'botname':_0x14d07c[_0x5c20e5(0x27b)],'status':_0x5c20e5(0x23b),'live':_0x5c20e5(0x169)}),_0x18c74b++;}}),_0x18c74b!=0x0&&(dbConfig[_0x2439b7(0x192)](_0x2439b7(0x148))['assign'](_0x3b7c4f)['write'](),config=_0x3b7c4f,restoredConfigFile=_0x18c74b);}}async function restoreConfigNotify(_0x38e0c5){const _0x242b1a=_0x2474d0;let _0x516ab5;if(restoredConfigFile==0x1)_0x516ab5=_0x242b1a(0x159);else _0x516ab5=_0x242b1a(0x15d);if(_0x38e0c5)io['to'](_0x242b1a(0x14f))[_0x242b1a(0x2be)](_0x242b1a(0x1ab),_0x516ab5);else{logger['simple'](_0x242b1a(0x157)),logger[_0x242b1a(0x273)](_0x516ab5),logger[_0x242b1a(0x273)]('-----------------------------------------------------------------------------------'),logger[_0x242b1a(0x273)]('');if(tgBot&&settings[_0x242b1a(0x16f)]&&settings[_0x242b1a(0x19a)]!=_0x242b1a(0x234))tgBot[_0x242b1a(0x2d1)](settings['telegramChatId'],'Bot\x20Mgr\x20>\x20'+_0x516ab5)[_0x242b1a(0x14b)](_0x307891=>{telegramError(_0x307891);});}}function validateCredentials(_0x44bc45,_0x15a2a6){const _0x1159a1=_0x2474d0;if(_0x44bc45['username']==settings[_0x1159a1(0x196)]&&bcrypt[_0x1159a1(0x2b9)](_0x44bc45['password'],settings[_0x1159a1(0x161)])){if(settings[_0x1159a1(0x27d)])return{'allow':![],'reason':_0x1159a1(0x20c),'token':null};else{const _0x3d91df=generateLoginToken(_0x15a2a6);return{'allow':!![],'reason':_0x1159a1(0x277),'token':_0x3d91df};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x11862b){const _0x375a21=_0x2474d0,_0x4f116b=generateLoginToken(_0x11862b);return{'allow':!![],'reason':_0x375a21(0x277),'token':_0x4f116b};}function validateAccess(_0x11bade,_0x350ed8,_0x1e31f2){const _0x192896=_0x2474d0,_0xac0579=_0x1e31f2?_0x1e31f2:devices[_0x350ed8]['ip'];let _0x5ce8ab;const _0x529d19=_0x4e1316=>{const _0x9a5386=_0x5283;if(settings[_0x9a5386(0x28e)]){if(settings[_0x9a5386(0x27d)]){if(telegram2FaApproved(_0x350ed8)){const _0x345f40=generateLoginToken(_0x350ed8);return{'allow':!![],'reason':_0x9a5386(0x236),'token':_0x345f40};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x5ce8ab=validToken(_0x4e1316,_0x350ed8),_0x5ce8ab['hasOwnProperty'](_0x9a5386(0x1c1))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x4e1316}:{'allow':![],'reason':_0x9a5386(0x16a),'token':null};}else return{'allow':!![],'reason':_0x9a5386(0x28a),'token':null};};if(settings[_0x192896(0x1a0)]){let _0x244fb4=[...settings[_0x192896(0x2c7)],_0x192896(0x2ae),'::ffff:127.0.0.1','127.0.0.1'];if(_0x244fb4[_0x192896(0x22b)](_0xac0579))return _0x529d19(_0x11bade);else{_0x5ce8ab=validToken(_0x11bade,_0x350ed8);if(_0x5ce8ab[_0x192896(0x1e1)](_0x192896(0x1c1)))return _0x529d19(_0x11bade);else{if(telegramIpApproved(_0x350ed8)){const _0x55342a=generateToken(_0x350ed8);return _0x5ce8ab=_0x529d19(_0x11bade),_0x5ce8ab[_0x192896(0x1e9)]?{'allow':!![],'reason':_0x192896(0x1b1),'token':_0x55342a}:_0x5ce8ab;}else return settings[_0x192896(0x1c5)]?{'allow':![],'reason':_0x192896(0x2cc),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x529d19(_0x11bade);}function timelyDecrypt(_0x1ef5fc,_0x14c133=!![]){const _0x43a770=_0x2474d0;if(_0x1ef5fc)try{const _0x2c0eb0=crypt[_0x43a770(0x166)](secure[_0x43a770(0x276)],_0x1ef5fc)[_0x43a770(0x291)],_0x28e59a=_0x2c0eb0[_0x43a770(0x1f2)]('@')[0x0],_0x229cc9=_0x2c0eb0['split']('@')[0x1],_0x4f3aa1=new Date()[_0x43a770(0x268)]();if(_0x14c133){if(_0x4f3aa1-_0x229cc9<maxSecretAge*0x3e8)return _0x28e59a;else return![];}else return _0x28e59a;}catch(_0x25d03c){return![];}else return![];}const validToken=(_0x124b0e,_0x4ee31a)=>{const _0x1c6c9a=_0x2474d0,_0x28bfbc=devices[_0x4ee31a]['ip'];if(!_0x124b0e)return{'error':_0x1c6c9a(0x22a)};for(let _0x5ed011 of blacklist){if(_0x5ed011['token']==_0x124b0e)return{'error':_0x1c6c9a(0x21b)};}let _0x1ee330;try{_0x1ee330=jwt[_0x1c6c9a(0x1af)](_0x124b0e,secure[_0x1c6c9a(0x26b)]+_0x4ee31a);}catch{return{'error':_0x1c6c9a(0x21e)};}if(!_0x1ee330[_0x1c6c9a(0x1e1)]('clientip')&&!_0x1ee330[_0x1c6c9a(0x1e1)]('username')||!_0x1ee330[_0x1c6c9a(0x1e1)](_0x1c6c9a(0x23e)))return{'error':_0x1c6c9a(0x214)};if(!_0x1ee330[_0x1c6c9a(0x1e1)](_0x1c6c9a(0x26d))&&_0x1ee330['hasOwnProperty']('clientip')){const {clientip:_0x3122cf}=_0x1ee330;return _0x28bfbc==_0x3122cf?{'success':_0x1c6c9a(0x1ce)}:{'error':_0x1c6c9a(0x299)};}else{if(_0x1ee330[_0x1c6c9a(0x1e1)](_0x1c6c9a(0x26d))&&_0x1ee330[_0x1c6c9a(0x1e1)](_0x1c6c9a(0x186))){const {username:_0x53f98e,clientip:_0x526fde}=_0x1ee330;return settings['bbUsername']==_0x53f98e&&_0x28bfbc==_0x526fde?{'success':_0x1c6c9a(0x1ce)}:{'error':_0x1c6c9a(0x13f)};}}},generateLoginToken=_0x25d49d=>{const _0x4ab333=_0x2474d0;if(_0x25d49d){const _0x1a4696=devices[_0x25d49d]['ip'];return jwt[_0x4ab333(0x284)]({'username':settings[_0x4ab333(0x196)],'clientip':_0x1a4696},secure[_0x4ab333(0x26b)]+_0x25d49d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x3fc534=>{const _0x3fd335=_0x2474d0;if(_0x3fc534){const _0x5a18aa=devices[_0x3fc534]['ip'];return jwt[_0x3fd335(0x284)]({'clientip':_0x5a18aa},secure[_0x3fd335(0x26b)]+_0x3fc534,{'expiresIn':devices[_0x3fc534][_0x3fd335(0x1d6)][_0x3fd335(0x253)]*0x3c});}else return![];},telegramIpApproved=_0x1b54a6=>{const _0x7c7b19=_0x2474d0;let _0x46282d=![];return devices[_0x1b54a6][_0x7c7b19(0x1d6)]&&devices[_0x1b54a6][_0x7c7b19(0x1d6)][_0x7c7b19(0x253)]!=_0x7c7b19(0x1d1)&&(_0x46282d=devices[_0x1b54a6][_0x7c7b19(0x1d6)]['clientip']==devices[_0x1b54a6]['ip']&&new Date()[_0x7c7b19(0x268)]()-devices[_0x1b54a6][_0x7c7b19(0x1d6)][_0x7c7b19(0x154)]<devices[_0x1b54a6]['telegramIpApproval'][_0x7c7b19(0x253)]*0x3c*0x3e8),_0x46282d;},telegram2FaApproved=_0x125bc9=>{const _0x3dd66e=_0x2474d0;let _0x33d179=![];return devices[_0x125bc9][_0x3dd66e(0x13c)]&&devices[_0x125bc9][_0x3dd66e(0x13c)][_0x3dd66e(0x253)]!='reject'&&(_0x33d179=devices[_0x125bc9][_0x3dd66e(0x13c)][_0x3dd66e(0x186)]==devices[_0x125bc9]['ip']&&new Date()[_0x3dd66e(0x268)]()-devices[_0x125bc9][_0x3dd66e(0x13c)]['timestamp']<devices[_0x125bc9]['telegram2FaApproval'][_0x3dd66e(0x253)]*0x3c*0x3e8),_0x33d179;},normalizeIP=_0x3f397d=>{const _0x25ff2d=_0x2474d0;let _0xf6482f=null,_0x128161=null;if(ipaddr[_0x25ff2d(0x167)](_0x3f397d)){const _0x1600b5=ipaddr[_0x25ff2d(0x254)](_0x3f397d);_0x1600b5[_0x25ff2d(0x153)]()===_0x25ff2d(0x1e2)?(_0x1600b5[_0x25ff2d(0x257)]()&&(_0xf6482f=_0x1600b5[_0x25ff2d(0x26f)]()[_0x25ff2d(0x175)]()),_0x128161=_0x1600b5[_0x25ff2d(0x175)]()):(_0xf6482f=_0x1600b5[_0x25ff2d(0x175)](),_0x128161=_0x1600b5[_0x25ff2d(0x1a1)]()[_0x25ff2d(0x175)]());}return{'show':_0xf6482f?_0xf6482f:_0x128161,'store':_0x128161};};function sleep(_0x179b59){return new Promise(_0x7c8293=>setTimeout(_0x7c8293,_0x179b59));}