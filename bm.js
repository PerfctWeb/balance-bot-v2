const _0x4c8cd1=_0x538c;(function(_0x51a7a0,_0x7d773f){const _0x1d6701=_0x538c,_0x37d1d9=_0x51a7a0();while(!![]){try{const _0x5be267=parseInt(_0x1d6701(0x7b))/0x1*(parseInt(_0x1d6701(0x103))/0x2)+parseInt(_0x1d6701(0x1b9))/0x3*(parseInt(_0x1d6701(0xfb))/0x4)+parseInt(_0x1d6701(0x16b))/0x5*(-parseInt(_0x1d6701(0x1c0))/0x6)+parseInt(_0x1d6701(0x18a))/0x7+parseInt(_0x1d6701(0xdb))/0x8*(parseInt(_0x1d6701(0xc0))/0x9)+parseInt(_0x1d6701(0x183))/0xa+-parseInt(_0x1d6701(0xdd))/0xb;if(_0x5be267===_0x7d773f)break;else _0x37d1d9['push'](_0x37d1d9['shift']());}catch(_0x297720){_0x37d1d9['push'](_0x37d1d9['shift']());}}}(_0x4d30,0x98322));const _0x36707a=function(){let _0x6bcc18=!![];return function(_0x1c1293,_0x2e8699){const _0x247437=_0x6bcc18?function(){const _0x3cb97a=_0x538c;if(_0x2e8699){const _0x3d8239=_0x2e8699[_0x3cb97a(0x150)](_0x1c1293,arguments);return _0x2e8699=null,_0x3d8239;}}:function(){};return _0x6bcc18=![],_0x247437;};}(),_0x30757a=_0x36707a(this,function(){const _0x3f228a=_0x538c;return _0x30757a[_0x3f228a(0x125)]()['search'](_0x3f228a(0x10b))[_0x3f228a(0x125)]()[_0x3f228a(0x1ad)](_0x30757a)[_0x3f228a(0x132)](_0x3f228a(0x10b));});_0x30757a();'use strict';process[_0x4c8cd1(0x131)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x4c8cd1(0xa2)),FileSync=require('lowdb/adapters/FileSync'),fs=require('fs'),fns=require(_0x4c8cd1(0xf1)),low=require(_0x4c8cd1(0x8b)),path=require(_0x4c8cd1(0x10f)),crypto=require(_0x4c8cd1(0x17f)),Crypt=require(_0x4c8cd1(0x143))[_0x4c8cd1(0xc7)],RSA=require(_0x4c8cd1(0x143))[_0x4c8cd1(0x1b1)],bcrypt=require('bcryptjs'),jwt=require(_0x4c8cd1(0x9d)),analyticsLib=require(_0x4c8cd1(0x154))[_0x4c8cd1(0x111)],googleAnalytics=require(_0x4c8cd1(0x1ba))['default'],ipaddr=require(_0x4c8cd1(0x1af)),argv=require(_0x4c8cd1(0xb2))(process[_0x4c8cd1(0x7a)][_0x4c8cd1(0x93)](0x2))['argv'],PORT=argv['port']||_0x4c8cd1(0x133),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x4c8cd1(0x186)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x4c8cd1(0x1c4)),process[_0x4c8cd1(0x11a)](0x1));const HOST=argv[_0x4c8cd1(0x156)]||null,userID=argv[_0x4c8cd1(0x13a)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x4c8cd1(0x1b4),configfile=_0x4c8cd1(0x7e),settingsfile=_0x4c8cd1(0xd3),securefile=_0x4c8cd1(0x11c);let validInstallation=!![];!fs[_0x4c8cd1(0x182)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4c8cd1(0x112)),configpath=userID?bbpath+_0x4c8cd1(0xef)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/';!fs['existsSync'](configpath)&&fs[_0x4c8cd1(0x75)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4c8cd1(0x75)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4c8cd1(0x192)]({'bots':[]})[_0x4c8cd1(0xaf)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4c8cd1(0x192)]({'settings':{'timeshift':0x0}})[_0x4c8cd1(0xaf)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x4c8cd1(0xaf)]();let crypt=new Crypt({'md':_0x4c8cd1(0xb3),'rsaStandard':_0x4c8cd1(0xd8)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x4c8cd1(0x136))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x4c8cd1(0x1cc)),app=express(),http=require('http')[_0x4c8cd1(0x91)](app);app[_0x4c8cd1(0x187)](express[_0x4c8cd1(0x106)](path[_0x4c8cd1(0x73)](__dirname,bbpath2,_0x4c8cd1(0x170)))),app['use'](express[_0x4c8cd1(0x106)](path['join'](__dirname,bbpath2,_0x4c8cd1(0x1c2)))),app[_0x4c8cd1(0x160)]('/',function(_0x374000,_0x3e4efa){const _0xe99dbe=_0x4c8cd1;_0x3e4efa[_0xe99dbe(0x12b)](path[_0xe99dbe(0x73)](__dirname,bbpath2,_0xe99dbe(0x170),'index.html'));}),app[_0x4c8cd1(0x160)]('/:bot',function(_0x12b486,_0x52df29){const _0x4a7b07=_0x4c8cd1;_0x52df29['sendFile'](path[_0x4a7b07(0x73)](__dirname,bbpath2,'build',_0x4a7b07(0x1a5)));}),app['get']('/:bot/portfolio',(_0x1741d4,_0x110ddb)=>{const _0x19d574=_0x4c8cd1;_0x110ddb[_0x19d574(0x12b)](path[_0x19d574(0x73)](__dirname,bbpath2,'build',_0x19d574(0x1a5)));}),app[_0x4c8cd1(0x160)](_0x4c8cd1(0x107),(_0xa20466,_0x4ad228)=>{const _0x2bdbff=_0x4c8cd1;_0x4ad228[_0x2bdbff(0x12b)](path[_0x2bdbff(0x73)](__dirname,bbpath2,'build',_0x2bdbff(0x1a5)));}),app[_0x4c8cd1(0x160)](_0x4c8cd1(0xf9),(_0x2779bb,_0x533395)=>{const _0x3b8974=_0x4c8cd1;_0x533395[_0x3b8974(0x12b)](path[_0x3b8974(0x73)](__dirname,bbpath2,_0x3b8974(0x1c2),_0x3b8974(0x1a5)));}),app[_0x4c8cd1(0x160)](_0x4c8cd1(0x19a),(_0x59b2f8,_0x2244ab)=>{const _0x49b22b=_0x4c8cd1;_0x2244ab[_0x49b22b(0x12b)](path['join'](__dirname,bbpath2,_0x49b22b(0x1c2),_0x49b22b(0x1a5)));}),app['get'](_0x4c8cd1(0xce),(_0x532433,_0x41635a)=>{const _0x4c190d=_0x4c8cd1;_0x41635a['sendFile'](path['join'](__dirname,bbpath2,_0x4c190d(0x1c2),'index.html'));}),app[_0x4c8cd1(0x160)](_0x4c8cd1(0x128),(_0x55a73b,_0xb2e917)=>{const _0x48f5f8=_0x4c8cd1;_0xb2e917[_0x48f5f8(0x12b)](path[_0x48f5f8(0x73)](__dirname,bbpath2,_0x48f5f8(0x1c2),_0x48f5f8(0x1a5)));});if(HOST)http[_0x4c8cd1(0xb9)](PORT,HOST);else http[_0x4c8cd1(0xb9)](PORT);const io=require(_0x4c8cd1(0x159))(http,{}),analytics=analyticsLib({'app':_0x4c8cd1(0x130),'plugins':[googleAnalytics({'trackingId':'UA-192771731-1'})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0x4c8cd1(0x173)]&&settings[_0x4c8cd1(0x173)]!=''&&settings['telegramUsername']&&settings['telegramUsername']!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x571579=_0x4c8cd1;console[_0x571579(0x186)](''),console[_0x571579(0x186)](_0x571579(0xab)),logging(_0x571579(0x140)+PORT),console[_0x571579(0x186)](_0x571579(0xab));if(config[_0x571579(0x86)]!=0x0)config[_0x571579(0xd6)](_0x3da425=>{const _0x4673de=_0x571579;if(_0x3da425[_0x4673de(0x15b)]==_0x4673de(0x161)||_0x3da425['status']==_0x4673de(0x92))logging(_0x4673de(0x104)+_0x3da425[_0x4673de(0x120)]+_0x4673de(0x15d)+_0x3da425[_0x4673de(0x14a)]),startBot([_0x3da425[_0x4673de(0x120)],userID],{'cwd':bbpath},function(_0x23683b){if(_0x23683b)logging(_0x23683b);});else(_0x3da425['status']==_0x4673de(0xd5)||_0x3da425[_0x4673de(0x15b)]==_0x4673de(0xc6))&&logging(_0x4673de(0x17a)+_0x3da425['botID']+_0x4673de(0x15d)+_0x3da425['botname']);});else!newBot&&console[_0x571579(0x186)](_0x571579(0xf2));if(newBot)addBot();console['log'](_0x571579(0xab)),console[_0x571579(0x186)]('');}function startSocket(){const _0x139ff5=_0x4c8cd1;io['on'](_0x139ff5(0x1c5),_0x44955e=>{const _0x1ff9df=_0x139ff5;let _0x390d69,_0x3048ed,_0x5e97e8,_0x53cb02,_0x40362c;const _0xac57e4=_0x44955e[_0x1ff9df(0x1b3)]['headers'][_0x1ff9df(0x1d1)];_0x3048ed=_0xac57e4['match'](/bot[0-9]{3}/);if(_0x3048ed)_0x5e97e8=_0x3048ed[0x0][_0x1ff9df(0xc5)](/[0-9]{3}/);if(_0x5e97e8)_0x390d69=_0x5e97e8[0x0];else _0x390d69=_0x1ff9df(0x15a);const _0x1d5310=_0x44955e[_0x1ff9df(0x1b3)]['auth'][_0x1ff9df(0x142)];if(!_0x1d5310)_0x44955e[_0x1ff9df(0x96)](_0x1ff9df(0x15b),{'publicKey':secure['publicKey']});else{_0x53cb02=timelyDecrypt(_0x1d5310,![]);if(!_0x53cb02)_0x44955e[_0x1ff9df(0x96)]('status',{'publicKey':secure[_0x1ff9df(0x12e)]});else{_0x40362c=normalizeIP(_0x44955e[_0x1ff9df(0xff)]['remoteAddress'])[_0x1ff9df(0xa8)];if(!devices[_0x53cb02])devices[_0x53cb02]={'uuid':_0x53cb02,'access':{'token':null}};devices[_0x53cb02]['ip']=_0x40362c;const _0x3cf12c=addClient(_0x44955e['id'],_0x53cb02,_0x390d69);setAccess(_0x3cf12c),_0x44955e['on']('login',_0x1ee4c4=>{const _0x1c1257=_0x1ff9df,_0x99e1f=timelyDecrypt(_0x1ee4c4['password']);if(_0x99e1f){_0x1ee4c4={'username':_0x1ee4c4[_0x1c1257(0xfd)],'password':_0x99e1f},devices[_0x53cb02][_0x1c1257(0xe4)]=validateCredentials(_0x1ee4c4,_0x53cb02);if(devices[_0x53cb02]['access']['allow']==![]&&devices[_0x53cb02]['access'][_0x1c1257(0x74)]==_0x1c1257(0xcb))_0x44955e[_0x1c1257(0x96)](_0x1c1257(0x15b),{'access':devices[_0x53cb02][_0x1c1257(0xe4)]}),loginAccess2FA(_0x53cb02,_0x40362c);else{if(devices[_0x53cb02][_0x1c1257(0xe4)]['allow']==![]&&devices[_0x53cb02][_0x1c1257(0xe4)]['reason']==_0x1c1257(0x114))_0x44955e['emit']('status',{'access':devices[_0x53cb02][_0x1c1257(0xe4)]});else devices[_0x53cb02][_0x1c1257(0xe4)][_0x1c1257(0xd9)]&&devices[_0x53cb02]['access'][_0x1c1257(0x74)]==_0x1c1257(0x1a4)&&(getClientsWithUuid(_0x53cb02)[_0x1c1257(0xd6)](_0x19a33b=>{setAccess(_0x19a33b);}),setTokenRefresh(_0x53cb02),setSessionTimeout('login',_0x53cb02));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x44955e['on'](_0x1ff9df(0x1a8),()=>{resetPassword();}),_0x44955e['on'](_0x1ff9df(0x11d),_0x12cc4e=>{removeClient(_0x44955e['id']);});}}});}function initClient(_0x2304c3){const _0x179b4a=_0x4c8cd1;if(_0x2304c3!=_0x179b4a(0x15a)&&config['apiKey']!=''){if(pid[_0x2304c3])pid[_0x2304c3]['send']({'function':_0x179b4a(0x165),'args':null});}}function getSocket(_0x53c03a){const _0x446fea=_0x4c8cd1;return io[_0x446fea(0x101)][_0x446fea(0x101)]['get'](_0x53c03a);}function setAccess(_0x50caea){const _0x39b7a0=_0x4c8cd1,_0x5c5108=getSocket(_0x50caea['id']),_0xaf878b=_0x50caea[_0x39b7a0(0x105)],_0x57c4d2=_0x50caea[_0x39b7a0(0x10e)];devices[_0xaf878b][_0x39b7a0(0xe4)]=validateAccess(devices[_0xaf878b]['access'][_0x39b7a0(0x175)],_0xaf878b),_0x5c5108['join'](_0xaf878b);if(devices[_0xaf878b][_0x39b7a0(0xe4)][_0x39b7a0(0xd9)]){_0x5c5108['join'](_0x57c4d2);if(_0x57c4d2=='botmanager')initializeSocketBotManager(_0x5c5108);else initializeSocketBot(_0x5c5108);initClient(_0x57c4d2);}devices[_0xaf878b]['access'][_0x39b7a0(0x175)]&&devices[_0xaf878b][_0x39b7a0(0xe4)][_0x39b7a0(0x74)]==_0x39b7a0(0x1bd)&&setSessionTimeout(_0x39b7a0(0x198),_0xaf878b),devices[_0xaf878b][_0x39b7a0(0xe4)][_0x39b7a0(0x175)]&&devices[_0xaf878b]['access'][_0x39b7a0(0x74)]==_0x39b7a0(0xfe)&&setSessionTimeout(_0x39b7a0(0x79),_0xaf878b),_0x5c5108[_0x39b7a0(0x96)](_0x39b7a0(0x15b),{'status':_0x50caea[_0x39b7a0(0x9c)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xaf878b][_0x39b7a0(0xe4)],'externalip':devices[_0xaf878b]['ip'],'publicKey':secure[_0x39b7a0(0x12e)],'validInstallation':validInstallation}),devices[_0xaf878b]['access'][_0x39b7a0(0xd9)]==![]&&devices[_0xaf878b][_0x39b7a0(0xe4)][_0x39b7a0(0x74)]=='2FA\x20required'&&temporaryAccess2FA(_0xaf878b,devices[_0xaf878b]['ip']);}function setSessionTimeout(_0x48fd86,_0x4fe959){const _0x56b6d4=_0x4c8cd1;let _0x122438;if(_0x48fd86==_0x56b6d4(0x79))_0x122438=loginExpiry*0x3c*0x3e8;else _0x122438=devices[_0x4fe959][_0x56b6d4(0x7f)][_0x56b6d4(0x1bb)]*0x3c*0x3e8-(new Date()[_0x56b6d4(0x14b)]()-devices[_0x4fe959][_0x56b6d4(0x7f)]['timestamp']);if(devices[_0x4fe959][_0x56b6d4(0x162)])clearTimeout(devices[_0x4fe959]['pidExpireLogin']);devices[_0x4fe959][_0x56b6d4(0x162)]=setTimeout(()=>{const _0x29e494=_0x56b6d4;if(devices[_0x4fe959][_0x29e494(0x129)])clearTimeout(devices[_0x4fe959][_0x29e494(0x129)]);removeSocketListeners(_0x4fe959),addBlacklist(_0x4fe959),devices[_0x4fe959][_0x29e494(0x7f)]=null,devices[_0x4fe959][_0x29e494(0x1a1)]=null,devices[_0x4fe959][_0x29e494(0xe4)]['token']=null,devices[_0x4fe959][_0x29e494(0xe4)]=validateAccess(devices[_0x4fe959][_0x29e494(0xe4)][_0x29e494(0x175)],_0x4fe959),!(devices[_0x4fe959][_0x29e494(0xe4)]['allow']&&devices[_0x4fe959][_0x29e494(0xe4)][_0x29e494(0x74)]=='login\x20not\x20required')&&(_0x48fd86=='login'?io['to'](_0x4fe959)['emit'](_0x29e494(0x15b),{'access':{'allow':![],'reason':_0x29e494(0xe1),'token':null}}):io['to'](_0x4fe959)[_0x29e494(0x96)](_0x29e494(0x15b),{'access':{'allow':![],'reason':_0x29e494(0x100),'token':null}})),devices[_0x4fe959][_0x29e494(0xe4)][_0x29e494(0x175)]=null;},_0x122438);}function setTokenRefresh(_0x1cd468){const _0x35f505=_0x4c8cd1;if(devices[_0x1cd468]['pidRefreshToken'])clearTimeout(devices[_0x1cd468][_0x35f505(0x129)]);devices[_0x1cd468]['pidRefreshToken']=setTimeout(()=>{const _0x13a4b5=_0x35f505;getClientsWithUuid(_0x1cd468)[_0x13a4b5(0x86)]!=0x0?(devices[_0x1cd468][_0x13a4b5(0xe4)]=refreshToken(_0x1cd468),io['to'](_0x1cd468)['emit'](_0x13a4b5(0x15b),{'status':_0x13a4b5(0x196),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1cd468][_0x13a4b5(0xe4)],'externalip':devices[_0x1cd468]['ip'],'publicKey':secure[_0x13a4b5(0x12e)],'validInstallation':validInstallation}),setTokenRefresh(_0x1cd468)):clearTimeout(devices[_0x1cd468]['pidRefreshToken']);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2d45c6){const _0x12ac74=_0x4c8cd1,_0x5cfcc1=getClient(_0x2d45c6['id'])[_0x12ac74(0x105)];_0x2d45c6[_0x12ac74(0x96)](_0x12ac74(0x1c6),config),_0x2d45c6[_0x12ac74(0x96)](_0x12ac74(0x195),cleanSettings()),_0x2d45c6['on'](_0x12ac74(0xea),_0x152e8d=>{const _0x229a73=_0x12ac74;if(validateAccess(_0x152e8d,_0x5cfcc1)[_0x229a73(0xd9)])addBot();else logging(_0x229a73(0x97));}),_0x2d45c6['on'](_0x12ac74(0x185),(_0x448279,_0x1bd97c)=>{const _0xc98990=_0x12ac74;if(validateAccess(_0x1bd97c,_0x5cfcc1)[_0xc98990(0xd9)])toggleBot(_0x448279[_0xc98990(0x120)],_0x448279[_0xc98990(0x15b)],_0x448279['live']);else logging(_0xc98990(0xfa));}),_0x2d45c6['on'](_0x12ac74(0x184),(_0x23fffe,_0x14cdca)=>{const _0x5dd929=_0x12ac74;if(validateAccess(_0x14cdca,_0x5cfcc1)[_0x5dd929(0xd9)])toggleBotMode(_0x23fffe);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x2d45c6['on'](_0x12ac74(0xcc),(_0x57ecee,_0x42e803)=>{if(validateAccess(_0x42e803,_0x5cfcc1)['allow'])deleteBot(_0x57ecee);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x2d45c6['on'](_0x12ac74(0x17d),(_0x7b516,_0x1c3381)=>{const _0x33178e=_0x12ac74;if(validateAccess(_0x1c3381,_0x5cfcc1)[_0x33178e(0xd9)])storeSettings(_0x7b516,!![]);else logging(_0x33178e(0x166));}),_0x2d45c6['on'](_0x12ac74(0x8c),_0x93f693=>{const _0x1d645f=_0x12ac74;if(validateAccess(_0x93f693,_0x5cfcc1)[_0x1d645f(0xd9)])updateBB();else logging(_0x1d645f(0x176));}),_0x2d45c6['on'](_0x12ac74(0x145),_0x5a17be=>{const _0x263566=_0x12ac74;if(validateAccess(_0x5a17be,_0x5cfcc1)['allow']){if(devices[_0x5cfcc1][_0x263566(0x129)])clearTimeout(devices[_0x5cfcc1]['pidRefreshToken']);if(devices[_0x5cfcc1][_0x263566(0x162)])clearTimeout(devices[_0x5cfcc1]['pidExpireLogin']);removeSocketListeners(getClient(_0x2d45c6['id'])['uuid']),addBlacklist(_0x5cfcc1),devices[_0x5cfcc1]['telegramIpApproval']=null,devices[_0x5cfcc1][_0x263566(0x1a1)]=null,devices[_0x5cfcc1]['access']['token']=null,io['to'](getClient(_0x2d45c6['id'])[_0x263566(0x105)])[_0x263566(0x96)](_0x263566(0x15b),{'access':{'allow':![],'reason':_0x263566(0x87),'token':null}});}else logging(_0x263566(0x153));});}function initializeSocketBot(_0x1f6b23){const _0x2afd1e=_0x4c8cd1,_0x250533=getClient(_0x1f6b23['id'])[_0x2afd1e(0x10e)],_0x2a6832=getClient(_0x1f6b23['id'])['uuid'];_0x1f6b23['on']('get-logs',(_0x166d96,_0x2a01c1)=>{const _0xe2a05=_0x2afd1e;if(validateAccess(_0x2a01c1,_0x2a6832)[_0xe2a05(0xd9)]){if(pid[_0x250533])pid[_0x250533][_0xe2a05(0x179)]({'function':_0xe2a05(0xf7),'args':_0x166d96});}else logging(_0xe2a05(0x19e));}),_0x1f6b23['on'](_0x2afd1e(0x127),(_0x49e953,_0x5d9ac4)=>{const _0x5d5708=_0x2afd1e;if(validateAccess(_0x5d9ac4,_0x2a6832)['allow']){if(pid[_0x250533])pid[_0x250533][_0x5d5708(0x179)]({'function':'deleteHistoryAlerts','args':_0x49e953});}else logging(_0x5d5708(0x8d));}),_0x1f6b23['on'](_0x2afd1e(0x18e),(_0x2fad41,_0x3cb9dc)=>{const _0x4af5f1=_0x2afd1e;if(validateAccess(_0x3cb9dc,_0x2a6832)[_0x4af5f1(0xd9)]){if(pid[_0x250533])pid[_0x250533]['send']({'function':_0x4af5f1(0x1cb),'args':_0x2fad41});}else logging(_0x4af5f1(0x124));}),_0x1f6b23['on'](_0x2afd1e(0x1b2),(_0x21d784,_0x3c3187)=>{const _0x3daef0=_0x2afd1e;if(validateAccess(_0x3c3187,_0x2a6832)[_0x3daef0(0xd9)]){if(pid[_0x250533])pid[_0x250533][_0x3daef0(0x179)]({'function':_0x3daef0(0x99),'args':_0x21d784});}else logging(_0x3daef0(0x1a3));}),_0x1f6b23['on'](_0x2afd1e(0x19d),(_0x2486e2,_0x3d6c61)=>{const _0x4ab315=_0x2afd1e;if(validateAccess(_0x3d6c61,_0x2a6832)['allow']){if(pid[_0x250533])pid[_0x250533][_0x4ab315(0x179)]({'function':_0x4ab315(0x113),'args':_0x2486e2});}else logging('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x1f6b23['on']('get-starting-balances',_0x5c5249=>{const _0x5c1cc4=_0x2afd1e;if(validateAccess(_0x5c5249,_0x2a6832)[_0x5c1cc4(0xd9)]){if(pid[_0x250533])pid[_0x250533][_0x5c1cc4(0x179)]({'function':_0x5c1cc4(0x95),'args':null});}else logging(_0x5c1cc4(0x19b));}),_0x1f6b23['on'](_0x2afd1e(0x8a),(_0x403cc7,_0xac1308)=>{const _0x3f0052=_0x2afd1e;if(validateAccess(_0xac1308,_0x2a6832)[_0x3f0052(0xd9)]){if(pid[_0x250533])pid[_0x250533][_0x3f0052(0x179)]({'function':_0x3f0052(0x9f),'args':_0x403cc7});}else logging('Unauthorized\x20attempt\x20to\x20place\x20market\x20order');}),_0x1f6b23['on'](_0x2afd1e(0x1c3),_0xa54625=>{const _0x500935=_0x2afd1e;if(validateAccess(_0xa54625,_0x2a6832)[_0x500935(0xd9)]){if(pid[_0x250533])pid[_0x250533]['send']({'function':_0x500935(0x11f),'args':null});}else logging(_0x500935(0x102));}),_0x1f6b23['on'](_0x2afd1e(0x145),_0x5b6fc2=>{const _0xc8e1e=_0x2afd1e;if(validateAccess(_0x5b6fc2,_0x2a6832)[_0xc8e1e(0xd9)]){if(devices[_0x2a6832][_0xc8e1e(0x129)])clearTimeout(devices[_0x2a6832][_0xc8e1e(0x129)]);if(devices[_0x2a6832]['pidExpireLogin'])clearTimeout(devices[_0x2a6832][_0xc8e1e(0x162)]);removeSocketListeners(getClient(_0x1f6b23['id'])['uuid']),addBlacklist(_0x2a6832),devices[_0x2a6832][_0xc8e1e(0x7f)]=null,devices[_0x2a6832]['telegram2FaApproval']=null,devices[_0x2a6832]['access'][_0xc8e1e(0x175)]=null,io['to'](getClient(_0x1f6b23['id'])[_0xc8e1e(0x105)])[_0xc8e1e(0x96)](_0xc8e1e(0x15b),{'access':{'allow':![],'reason':_0xc8e1e(0x87),'token':null}});}else logging(_0xc8e1e(0x153));});}function removeSocketListeners(_0x52a117){const _0x4b0f42=_0x4c8cd1;getClientsWithUuid(_0x52a117)[_0x4b0f42(0xd6)](_0xee725c=>{const _0x16f4d0=_0x4b0f42;getSocket(_0xee725c['id'])[_0x16f4d0(0x1b6)]();});}function cleanSettings(){const _0x47a96d=_0x4c8cd1;let _0x4284e7=settings;return settings['telegramToken']&&settings[_0x47a96d(0x173)]!=''&&(_0x4284e7={..._0x4284e7,'telegramToken':'************'}),settings[_0x47a96d(0x78)]&&settings[_0x47a96d(0x78)]!=''&&(_0x4284e7={..._0x4284e7,'bbPassword':_0x47a96d(0x1aa)}),_0x4284e7;}function updateBB(){const _0x1f4e56=_0x4c8cd1;installingUpdate=!![],config[_0x1f4e56(0xd6)](_0x260027=>{restartBot(_0x260027['botID']);}),process[_0x1f4e56(0x179)]({'update':!![]},_0xfdd5cb=>{});}function startBot(_0xf39105,_0x1f7bd8,_0x339e02){const _0x4e25fc=_0x4c8cd1;let _0xc926ec=![];const _0x48e61d=_0xf39105[0x0];_0x1f7bd8={..._0x1f7bd8,'stdio':[_0x4e25fc(0x139),_0x4e25fc(0x139),_0x4e25fc(0x139),_0x4e25fc(0x126)]},pid[_0x48e61d]=childProcess[_0x4e25fc(0x17b)](botfile,_0xf39105,_0x1f7bd8),pid[_0x48e61d]['on'](_0x4e25fc(0x90),_0x26f9a6=>{const _0x222e0d=_0x4e25fc;switch(Object[_0x222e0d(0x181)](_0x26f9a6)[0x0]){case _0x222e0d(0x14a):updateBotName(_0x48e61d,_0x26f9a6[_0x222e0d(0x14a)]);break;case'updatebotmanager':updateBotManager();break;case _0x222e0d(0x15b):updateStatus(_0x48e61d,_0x26f9a6[_0x222e0d(0x15b)]);break;case _0x222e0d(0x141):updateLive(_0x48e61d,_0x26f9a6[_0x222e0d(0x141)]);break;case _0x222e0d(0x98):updateLive(_0x48e61d,_0x26f9a6[_0x222e0d(0x98)]),io['to'](_0x48e61d)[_0x222e0d(0x96)](_0x222e0d(0x15b),{'access':{'allow':![],'reason':_0x222e0d(0xfc),'token':null}});break;case _0x222e0d(0xee):_0x26f9a6[_0x222e0d(0xee)]=='restart'&&restartBot(_0x48e61d);_0x26f9a6[_0x222e0d(0xee)]==_0x222e0d(0x158)&&toggleBot(_0x48e61d,_0x222e0d(0xd5),_0x222e0d(0x1a0));break;case _0x222e0d(0xd0):sendTelegram(_0x48e61d,_0x26f9a6[_0x222e0d(0xd0)]);break;case _0x222e0d(0x164):sendTelegramMsg(_0x26f9a6['telegrammsg']);break;case _0x222e0d(0xb4):io['to'](_0x48e61d)[_0x222e0d(0x96)](_0x26f9a6['function'],_0x26f9a6['args']);break;}}),pid[_0x48e61d]['on'](_0x4e25fc(0x10c),function(_0x4447d9){if(_0xc926ec)return;_0xc926ec=!![],_0x339e02(_0x4447d9);}),pid[_0x48e61d]['on'](_0x4e25fc(0x11a),function(_0x468d59){const _0x6e79fc=_0x4e25fc;if(installingUpdate)return;if(_0xc926ec)return;_0xc926ec=!![],_0x339e02(null);const _0x2bfe07=dbConfig['get'](_0x6e79fc(0x1c6))[_0x6e79fc(0xec)]({'botID':_0x48e61d})[_0x6e79fc(0x188)]();_0x2bfe07&&(_0x2bfe07[_0x6e79fc(0x15b)]==_0x6e79fc(0x161)||_0x2bfe07['status']=='new')&&(updateLive(_0x48e61d,'stopped'),logging(_0x6e79fc(0x8f)+_0x48e61d),startBot([_0x48e61d,userID],{'cwd':bbpath},function(_0x1fd4d6){if(_0x1fd4d6)logging(_0x1fd4d6);}));});}function _0x4d30(){const _0x157e9c=['toggle-bot-mode','update-bot','log','use','value','chat','4179105SGCDbO','2FA\x20required','all','getHours','get-portfolio','yes','headless','Invalid\x20Telegram\x20token','defaults','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','settings','connected','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','2FA','Alerts','/:bot/history','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','User\x20has\x20been\x20validated','store-headless','Unauthorized\x20attempt\x20to\x20get\x20logs','sign','stopped','telegram2FaApproval','page','Unauthorized\x20attempt\x20to\x20store\x20configuration','login\x20token\x20generated','index.html','temporaryAccessAllowed','push','reset-password','decrypt','************','privateKey','stopPolling','constructor','split','ipaddr.js','https://hodlerhacks.com','RSA','store-configuration','handshake','bot.js','Invalid\x20authentication\x20token\x20(2)','removeAllListeners','readdirSync','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','535611Pbpspi','@analytics/google-analytics','expiry','getFullYear','temporary\x20token\x20generated','-events.json','writeFileSync','6VEvKme','isDirectory','build','cancel-loading',',\x20must\x20be\x20a\x204\x20digit\x20number','connection','bots','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','assign','alerts','<b>Balance\x20Bot\x20Status:</b>\x0a','getPortfolio','express','compareSync','\x20>\x20','show','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','referer','join','reason','mkdirSync','enabled\x20Bot\x20','verify','bbPassword','login','argv','1AfBDcI','Login\x20accepted','randomBytes','bb-config.json','telegramIpApproval','exp','timestamp','</b>\x20?','toIPv4MappedAddress','-config.json','\x20minutes','length','logged\x20out','timeshift','callback_query','place-order','lowdb','update-bb','Unauthorized\x20attempt\x20to\x20delete\x20alerts','add','restarting\x20Bot\x20','message','createServer','new','slice','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','getStartingBalances','emit','Unauthorized\x20attempt\x20to\x20add\x20bot','started','storeConfiguration','telegramChatId','All','server','jsonwebtoken','No\x20bots\x20running\x20right\x20now','placeOrder','filter','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','child_process','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','readFileSync','telegramUsername','entries','clientip','store','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','order','-----------------------------------------------------------------------------------','temporary\x20access\x20rejected','HTML','error\x20while\x20deleting\x20config\x20files:\x20','write','map','Invalid\x20IP\x20address','yargs/yargs','sha256','function','sortBy','-performance.json','cloneDeep','f2aRequired','listen','removeListener','\x20only\x0a','padStart','Login\x20rejected','parse','set','1665891nLJInC','login\x20required','randomFillSync','showname','Temporary\x20access\x20rejected','match','new-disabled','Crypt','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','All\x20bots','SIGTERM','2FA\x20login\x20required','delete-bot','reject','/:bot/configuration','success','telegram','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','temporary\x20access\x20not\x20allowed','bb-settings.json','from','disabled','forEach','orders','RSA-OAEP','allow','catch','48jADRTd','30\x20min','26003186Xtytlv','secret','name','::1','access\x20timeout','15\x20min','Notifications\x20disabled\x0a','access','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','hasOwnProperty','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','/status\x20-\x20show\x20bot(s)\x20status\x0a','add-bot','hashSync','find','includes','stop','config/','loginRequired','date-fns','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Notifications\x20types:\x20','Allow\x20login\x20from\x20IP\x20address\x20<b>','Notifications\x20enabled\x0a','emitHistory','password','/:bot/coins','Unauthorized\x20attempt\x20to\x20update\x20bot','4VlXzmj','reload','username','2FA\x20login\x20token\x20generated','conn','temporary\x20access\x20timeout','sockets','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','1438546qoicwe','starting\x20bot\x20|\x20Bot\x20','uuid','static','/:bot/performance','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','running','getUTCHours','(((.+)+)+)+$','error','/help\x20-\x20show\x20available\x20commands\x0a','bot','path','type','default','clients','storeHeadless','invalid\x20credentials','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','5\x20min','getMonth','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','/restart\x20-\x20restart\x20bot(s)\x0a','exit','secure','bb-secure.json','disconnect','bot-','cancelLoading','botID','kind','hex',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','Unauthorized\x20attempt\x20to\x20get\x20portfolio','toString','ipc','delete-alerts','/:bot/support','pidRefreshToken','telegramEnabled','sendFile','blacklist','sendMessage','publicKey','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','Balance\x20Bot','env','search','3000','max','auto','version.json','mode','Access\x20enabled\x20for\x20','inherit','user','Ok,\x20will\x20send\x20order\x20notifications\x20only','telegramEvents','isValid','then','1000','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','live','encryptedUuid','hybrid-crypto-js','whitelist','logout','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Notifications\x20enabled','data','Bot\x20','botname','getTime','answerCallbackQuery','disabled\x20Bot\x20','unlinkSync','Notifications\x20disabled','apply','whitelistEnabled','\x20to\x20','Unauthorized\x20attempt\x20to\x20log\x20out','analytics','getMinutes','host',':\x20Bot\x20Mgr\x20>\x20','kill','socket.io','botmanager','status','bbUsername','\x20|\x20','once','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','get','enabled','pidExpireLogin','sendPortfolioTelegram','telegrammsg','initclient','Unauthorized\x20attempt\x20to\x20update\x20settings','login\x20token\x20valid','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/disable\x20-\x20disable\x20notifications\x0a','login\x20not\x20required','2858790Rvtiaw','Token\x20blacklisted','/off\x20-\x20stop\x20bot(s)\x0a','event','onText','build2','\x20mode','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','telegramToken','settings.','token','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','remove','getSeconds','send','idling\x20bot\x20\x20\x20|\x20Bot\x20','fork','/on\x20-\x20start\x20bot(s)\x0a','store-settings','manual','crypto','getDate','keys','existsSync','9536590XHNvLm'];_0x4d30=function(){return _0x157e9c;};return _0x4d30();}function stopBot(_0xba780a){const _0x16dd81=_0x4c8cd1;getClientsWithBotID(_0xba780a)[_0x16dd81(0xd6)](_0x24fb97=>{getSocket(_0x24fb97['id'])['disconnect'](!![]),removeClient(_0x24fb97['id']);}),pid[_0xba780a]&&(pid[_0xba780a][_0x16dd81(0x158)](),pid[_0xba780a]=null);}function restartBot(_0x4a11ed){const _0x575334=_0x4c8cd1;if(pid[_0x4a11ed])pid[_0x4a11ed][_0x575334(0x158)]();}function addBot(){const _0x5c1859=_0x4c8cd1;let _0x14a3d9;for(let _0x4cbb18=0x1;_0x4cbb18<0x3e9;_0x4cbb18++){_0x14a3d9=_0x4cbb18[_0x5c1859(0x125)]()['padStart'](0x3,'0');let _0x39ab9d=config[_0x5c1859(0xec)](_0x1287ce=>_0x1287ce[_0x5c1859(0x120)]==_0x14a3d9);if(!_0x39ab9d)break;}if(_0x14a3d9===_0x5c1859(0x13f)){logging(_0x5c1859(0xf3));return;}logging('starting\x20new\x20bot\x20|\x20Bot\x20'+_0x14a3d9),dbConfig[_0x5c1859(0x160)](_0x5c1859(0x1c6))[_0x5c1859(0x1a7)]({'botID':_0x14a3d9,'botname':'Bot\x20'+_0x14a3d9,'status':_0x5c1859(0x92),'live':''})[_0x5c1859(0xaf)](),startBot([_0x14a3d9,userID],{'cwd':bbpath},function(_0x4fe278){if(_0x4fe278)logging(_0x4fe278);}),config=getConfiguration(),io['to'](_0x5c1859(0x15a))['emit']('bots',config);}function deleteBot(_0x35d506){const _0x207d16=_0x4c8cd1;getClientsWithBotID(_0x35d506)[_0x207d16(0xd6)](_0xa2727d=>{getSocket(_0xa2727d['id'])['disconnect'](!![]),removeClient(_0xa2727d['id']);}),dbConfig[_0x207d16(0x160)](_0x207d16(0x1c6))[_0x207d16(0x177)]({'botID':_0x35d506})['write'](),logging('deleted\x20Bot\x20'+_0x35d506),stopBot(_0x35d506);try{fs['unlinkSync'](path[_0x207d16(0x73)](configpath,'bot-'+_0x35d506+'-config.json')),fs['unlinkSync'](path[_0x207d16(0x73)](configpath,'bot-'+_0x35d506+_0x207d16(0x1be))),fs[_0x207d16(0x14e)](path[_0x207d16(0x73)](configpath,_0x207d16(0x11e)+_0x35d506+_0x207d16(0xb6))),fs[_0x207d16(0x14e)](path[_0x207d16(0x73)](configpath,_0x207d16(0x11e)+_0x35d506+'-results.json'));}catch(_0x325348){if(_0x325348)logging(_0x207d16(0xae),_0x325348);}config=getConfiguration(),io['to'](_0x207d16(0x15a))['emit'](_0x207d16(0x1c6),config);}function toggleBot(_0x3b48be,_0x2e2748,_0x51f8fb){const _0x2f72bc=_0x4c8cd1;dbConfig[_0x2f72bc(0x160)](_0x2f72bc(0x1c6))['find']({'botID':_0x3b48be})[_0x2f72bc(0x1c8)]({'status':_0x2e2748})['assign']({'live':_0x51f8fb})[_0x2f72bc(0xaf)]();if(_0x2e2748==_0x2f72bc(0x161)||_0x2e2748=='new')logging(_0x2f72bc(0x76)+_0x3b48be),startBot([_0x3b48be,userID],{'cwd':bbpath},function(_0x6296ae){if(_0x6296ae)logging(_0x6296ae);});else(_0x2e2748==_0x2f72bc(0xd5)||_0x2e2748==_0x2f72bc(0xc6))&&(logging(_0x2f72bc(0x14d)+_0x3b48be),stopBot(_0x3b48be));config=getConfiguration(),io['to'](_0x2f72bc(0x15a))[_0x2f72bc(0x96)](_0x2f72bc(0x1c6),config);}function toggleStatus(_0xf2307c){const _0x3e2c27=_0x4c8cd1;let _0x12802a=dbConfig['get'](_0x3e2c27(0x1c6))['find']({'botID':_0xf2307c})[_0x3e2c27(0x188)](),_0x5f4119;if(_0x12802a[_0x3e2c27(0x15b)]===_0x3e2c27(0x161))_0x5f4119='disabled';else{if(_0x12802a[_0x3e2c27(0x15b)]==='new')_0x5f4119=_0x3e2c27(0xc6);else{if(_0x12802a['status']===_0x3e2c27(0xc6))_0x5f4119=_0x3e2c27(0x92);else{if(_0x12802a[_0x3e2c27(0x15b)]===_0x3e2c27(0xd5))_0x5f4119=_0x3e2c27(0x161);}}}return _0x5f4119;}function _0x538c(_0x309d55,_0x199c9f){const _0xbbe087=_0x4d30();return _0x538c=function(_0x30757a,_0x36707a){_0x30757a=_0x30757a-0x73;let _0x4d30ba=_0xbbe087[_0x30757a];return _0x4d30ba;},_0x538c(_0x309d55,_0x199c9f);}function updateStatus(_0x4c49ae,_0x263a41){const _0x48e3cc=_0x4c8cd1;dbConfig[_0x48e3cc(0x160)](_0x48e3cc(0x1c6))[_0x48e3cc(0xec)]({'botID':_0x4c49ae})[_0x48e3cc(0x1c8)]({'status':_0x263a41})[_0x48e3cc(0xaf)](),config=getConfiguration(),io['to'](_0x48e3cc(0x15a))[_0x48e3cc(0x96)](_0x48e3cc(0x1c6),config);}function updateLive(_0x200e13,_0x319e4e){const _0x17bdc3=_0x4c8cd1;dbConfig[_0x17bdc3(0x160)](_0x17bdc3(0x1c6))[_0x17bdc3(0xec)]({'botID':_0x200e13})[_0x17bdc3(0x1c8)]({'live':_0x319e4e})[_0x17bdc3(0xaf)](),config=getConfiguration(),io['to'](_0x17bdc3(0x15a))[_0x17bdc3(0x96)](_0x17bdc3(0x1c6),config);}function updateBotName(_0x4941db,_0xfa0613){const _0x1090f9=_0x4c8cd1;dbConfig[_0x1090f9(0x160)]('bots')[_0x1090f9(0xec)]({'botID':_0x4941db})[_0x1090f9(0x1c8)]({'botname':_0xfa0613})[_0x1090f9(0xaf)](),config=getConfiguration(),io['to'](_0x1090f9(0x15a))[_0x1090f9(0x96)]('bots',config);}function updateBotManager(){const _0x5dd3e2=_0x4c8cd1;config=getConfiguration(),io['to'](_0x5dd3e2(0x15a))[_0x5dd3e2(0x96)]('bots',config);}function toggleBotMode(_0x5a0f6f){const _0x30df3c=_0x4c8cd1;if(pid[_0x5a0f6f])pid[_0x5a0f6f][_0x30df3c(0x179)]({'function':'toggleBotMode','args':null});else{const _0x144cce=configpath+_0x30df3c(0x11e)+_0x5a0f6f+'-config.json',_0x4b4ae2=fs[_0x30df3c(0xa4)](_0x144cce),_0x200484=JSON['parse'](_0x4b4ae2),_0x119e68=_0x200484[_0x30df3c(0x10e)][0x0][_0x30df3c(0x190)];_0x200484[_0x30df3c(0x10e)][0x0]['headless']=!_0x119e68;const _0x722f0b=JSON['stringify'](_0x200484,null,0x2);fs[_0x30df3c(0x1bf)](_0x144cce,_0x722f0b),config=getConfiguration(),io['to'](_0x30df3c(0x15a))[_0x30df3c(0x96)](_0x30df3c(0x1c6),config);}}function telegramError(_0x1673e2){const _0xb06eb8=_0x4c8cd1;console['log'](getTimeStamp()+_0xb06eb8(0x123));}function validateTelegram(_0x526bf5){const _0x2f9ac1=_0x4c8cd1;if(_0x526bf5[_0x2f9ac1(0xd4)][_0x2f9ac1(0xfd)]!=settings[_0x2f9ac1(0xa5)]&&'@'+_0x526bf5['from'][_0x2f9ac1(0xfd)]!=settings[_0x2f9ac1(0xa5)])return tgBot[_0x2f9ac1(0x12d)](_0x526bf5[_0x2f9ac1(0x189)]['id'],_0x2f9ac1(0x1c7),{'parse_mode':_0x2f9ac1(0xad)})[_0x2f9ac1(0xda)](_0x57055b=>{telegramError(_0x57055b);}),![];return!![];}async function initTelegram(){const _0x27af8c=_0x4c8cd1;if(tgBot)tgBot[_0x27af8c(0x1ac)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x27af8c(0x173)],{'polling':!![]});let _0x55eae7=_0x27af8c(0x193);_0x55eae7+='\x0a',_0x55eae7+='/enable\x20-\x20enable\x20notifications\x0a',_0x55eae7+=_0x27af8c(0x169),_0x55eae7+=_0x27af8c(0x12f),_0x55eae7+=_0x27af8c(0x119),_0x55eae7+=_0x27af8c(0x17c),_0x55eae7+=_0x27af8c(0x16d),_0x55eae7+=_0x27af8c(0xe6),_0x55eae7+='/names\x20-\x20show\x20bot\x20names\x0a',_0x55eae7+=_0x27af8c(0xe9),_0x55eae7+='/portfolio\x20-\x20show\x20bot\x20portfolio\x0a',_0x55eae7+=_0x27af8c(0x10d);let _0x1e4764=_0x27af8c(0x115);_0x1e4764+='\x0a',_0x1e4764+=_0x55eae7,tgBot[_0x27af8c(0x16f)](/\/start/,_0xa0a441=>{const _0x12fc6c=_0x27af8c;if(!validateTelegram(_0xa0a441))return;if(settings['telegramChatId']!=_0xa0a441[_0x12fc6c(0x189)]['id'])updateSetting(_0x12fc6c(0x9a),_0xa0a441['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0xa0a441[_0x12fc6c(0x189)]['id'],_0x1e4764)[_0x12fc6c(0xda)](_0x1a2225=>{telegramError(_0x1a2225);});}),tgBot[_0x27af8c(0x16f)](/\/enable/,_0x192e66=>{const _0xa61a69=_0x27af8c;if(!validateTelegram(_0x192e66))return;if(settings[_0xa61a69(0x9a)]!=_0x192e66[_0xa61a69(0x189)]['id'])updateSetting(_0xa61a69(0x9a),_0x192e66[_0xa61a69(0x189)]['id']);updateSetting(_0xa61a69(0x12a),!![]),tgBot['sendMessage'](_0x192e66[_0xa61a69(0x189)]['id'],_0xa61a69(0x147))[_0xa61a69(0xda)](_0x25f393=>{telegramError(_0x25f393);});}),tgBot[_0x27af8c(0x16f)](/\/config/,async _0x129614=>{const _0x209c8a=_0x27af8c;if(!validateTelegram(_0x129614))return;tgBot[_0x209c8a(0xba)](_0x209c8a(0x89)),tgBot[_0x209c8a(0x12d)](_0x129614[_0x209c8a(0x189)]['id'],_0x209c8a(0xd1),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x209c8a(0xd7)},{'text':_0x209c8a(0x199),'callback_data':_0x209c8a(0x1c9)},{'text':_0x209c8a(0x9b),'callback_data':_0x209c8a(0x18c)}]]}})[_0x209c8a(0xda)](_0x3d32d8=>{telegramError(_0x3d32d8);}),tgBot['on']('callback_query',async _0x22bc84=>{const _0x25eec6=_0x209c8a,_0x55f3eb=_0x22bc84[_0x25eec6(0x148)],_0x43fa3b=_0x22bc84[_0x25eec6(0x90)];tgBot[_0x25eec6(0x14c)](_0x22bc84['id'])[_0x25eec6(0x13e)](async()=>{const _0x1ad378=_0x25eec6;_0x55f3eb==_0x1ad378(0xd7)&&(updateSetting(_0x1ad378(0x13c),_0x1ad378(0xd7)),updateSetting(_0x1ad378(0x12a),!![]),await tgBot['sendMessage'](_0x43fa3b['chat']['id'],_0x1ad378(0x13b))[_0x1ad378(0xda)](_0x4cb473=>{telegramError(_0x4cb473);}));_0x55f3eb==_0x1ad378(0x1c9)&&(updateSetting(_0x1ad378(0x13c),_0x1ad378(0x1c9)),updateSetting(_0x1ad378(0x12a),!![]),await tgBot[_0x1ad378(0x12d)](_0x43fa3b[_0x1ad378(0x189)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x1ad378(0xda)](_0x31e7fe=>{telegramError(_0x31e7fe);}));_0x55f3eb==_0x1ad378(0x18c)&&(updateSetting(_0x1ad378(0x13c),_0x1ad378(0x18c)),updateSetting('telegramEnabled',!![]),await tgBot['sendMessage'](_0x43fa3b[_0x1ad378(0x189)]['id'],_0x1ad378(0x146))[_0x1ad378(0xda)](_0x522413=>{telegramError(_0x522413);}));if(!settings[_0x1ad378(0x9a)])tgBot[_0x1ad378(0x12d)](_0x43fa3b[_0x1ad378(0x189)]['id'],_0x1ad378(0xc8))['catch'](_0x158674=>{telegramError(_0x158674);});}),tgBot[_0x25eec6(0xba)](_0x25eec6(0x89));});}),tgBot[_0x27af8c(0x16f)](/\/status/,_0xba81ec=>{const _0x4934af=_0x27af8c;if(!validateTelegram(_0xba81ec))return;const _0x52db0f=getBotsWithMode();let _0x22fb77=_0x4934af(0x1ca);config[_0x4934af(0xd6)](_0x1348a5=>{const _0x2adff1=_0x4934af,_0x46d607=_0x52db0f['find'](_0x12f020=>_0x12f020[_0x2adff1(0x120)]==_0x1348a5['botID'])[_0x2adff1(0x137)];_0x22fb77+=_0x2adff1(0x149)+_0x1348a5[_0x2adff1(0x120)]+':\x20'+_0x1348a5[_0x2adff1(0x15b)]+'\x20|\x20'+_0x46d607+_0x2adff1(0x15d)+_0x1348a5['live']+'\x0a';}),_0x22fb77+='\x0a',_0x22fb77+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x22fb77+=!settings[_0x4934af(0x12a)]?_0x4934af(0xe3):_0x4934af(0xf6),_0x22fb77+=settings[_0x4934af(0x12a)]?settings[_0x4934af(0x13c)]==_0x4934af(0x18c)?_0x4934af(0xa1):_0x4934af(0xf4)+settings[_0x4934af(0x13c)]+_0x4934af(0xbb):'',tgBot[_0x4934af(0x12d)](_0xba81ec['chat']['id'],_0x22fb77,{'parse_mode':'HTML'})[_0x4934af(0xda)](_0x1096b9=>{telegramError(_0x1096b9);});}),tgBot[_0x27af8c(0x16f)](/\/restart/,_0x4cbc4f=>{const _0x9e091a=_0x27af8c;if(!validateTelegram(_0x4cbc4f))return;tgBot[_0x9e091a(0xba)](_0x9e091a(0x89));const _0x47f8e0=getEnabledBots();if(_0x47f8e0[_0x9e091a(0x86)]==0x0)tgBot[_0x9e091a(0x12d)](_0x4cbc4f[_0x9e091a(0x189)]['id'],_0x9e091a(0x9e))[_0x9e091a(0xda)](_0x150250=>{telegramError(_0x150250);});else{if(_0x47f8e0[_0x9e091a(0x86)]>0x1)_0x47f8e0[_0x9e091a(0x1a7)]({'botID':_0x9e091a(0x18c)});let _0x4b2c0f=[],_0x173338=[];const _0x2d0f94=_0x47f8e0[_0x9e091a(0x86)]%0x4==0x0||_0x47f8e0[_0x9e091a(0x86)]%0x4==0x3||_0x47f8e0[_0x9e091a(0x86)]%0x3==0x1?0x4:0x3;let _0x3feb90=0x0;_0x47f8e0['forEach']((_0x449123,_0x5c8860)=>{const _0x35250f=_0x9e091a;if(_0x5c8860%_0x2d0f94==0x0)_0x173338=[];_0x173338[_0x35250f(0x1a7)]({'text':_0x449123[_0x35250f(0x120)]==_0x35250f(0x18c)?_0x35250f(0xc9):_0x35250f(0x149)+_0x449123['botID'],'callback_data':_0x449123[_0x35250f(0x120)]}),_0x5c8860%_0x2d0f94==0x0&&(_0x4b2c0f[_0x3feb90]=_0x173338,_0x3feb90++);}),tgBot[_0x9e091a(0x12d)](_0x4cbc4f['chat']['id'],_0x9e091a(0x168),{'reply_markup':{'inline_keyboard':_0x4b2c0f}})[_0x9e091a(0xda)](_0x30c1d4=>{telegramError(_0x30c1d4);}),tgBot['on']('callback_query',async _0x5ad552=>{const _0x18fe8b=_0x9e091a,_0x193cb8=_0x5ad552['data'],_0x491dbf=_0x5ad552['message'];tgBot[_0x18fe8b(0x14c)](_0x5ad552['id'])[_0x18fe8b(0x13e)](async()=>{const _0xbd3ace=_0x18fe8b;_0x193cb8==_0xbd3ace(0x18c)?(tgBot[_0xbd3ace(0x12d)](_0x491dbf[_0xbd3ace(0x189)]['id'],_0xbd3ace(0x118))[_0xbd3ace(0xda)](_0x469427=>{telegramError(_0x469427);}),config['forEach'](_0x55e1b3=>{const _0x59212a=_0xbd3ace;restartBot(_0x55e1b3[_0x59212a(0x120)]);})):(tgBot['sendMessage'](_0x491dbf[_0xbd3ace(0x189)]['id'],_0xbd3ace(0x197)+_0x193cb8)[_0xbd3ace(0xda)](_0x3a798f=>{telegramError(_0x3a798f);}),restartBot(_0x193cb8));}),tgBot[_0x18fe8b(0xba)]('callback_query');});}}),tgBot[_0x27af8c(0x16f)](/\/on/,_0x1ab66c=>{const _0x486e23=_0x27af8c;if(!validateTelegram(_0x1ab66c))return;tgBot[_0x486e23(0xba)](_0x486e23(0x89));const _0x81468b=getDisabledBots();if(_0x81468b[_0x486e23(0x86)]==0x0)tgBot['sendMessage'](_0x1ab66c[_0x486e23(0x189)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x486e23(0xda)](_0x3bad90=>{telegramError(_0x3bad90);});else{if(_0x81468b[_0x486e23(0x86)]>0x1)_0x81468b['push']({'botID':_0x486e23(0x18c)});let _0x18d097=[],_0x3f4a62=[];const _0x503729=_0x81468b[_0x486e23(0x86)]%0x4==0x0||_0x81468b[_0x486e23(0x86)]%0x4==0x3||_0x81468b[_0x486e23(0x86)]%0x3==0x1?0x4:0x3;let _0x2dcf4f=0x0;_0x81468b[_0x486e23(0xd6)]((_0x24e9ac,_0x466c5b)=>{const _0x541fe1=_0x486e23;if(_0x466c5b%_0x503729==0x0)_0x3f4a62=[];_0x3f4a62[_0x541fe1(0x1a7)]({'text':_0x24e9ac[_0x541fe1(0x120)]==_0x541fe1(0x18c)?'All\x20bots':_0x541fe1(0x149)+_0x24e9ac[_0x541fe1(0x120)],'callback_data':_0x24e9ac['botID']}),_0x466c5b%_0x503729==0x0&&(_0x18d097[_0x2dcf4f]=_0x3f4a62,_0x2dcf4f++);}),tgBot[_0x486e23(0x12d)](_0x1ab66c[_0x486e23(0x189)]['id'],_0x486e23(0x1d0),{'reply_markup':{'inline_keyboard':_0x18d097}})['catch'](_0x5d30e4=>{telegramError(_0x5d30e4);}),tgBot['on'](_0x486e23(0x89),async _0x5e2c9a=>{const _0x560123=_0x486e23,_0xcebdfa=_0x5e2c9a[_0x560123(0x148)],_0x1f2645=_0x5e2c9a['message'];tgBot[_0x560123(0x14c)](_0x5e2c9a['id'])[_0x560123(0x13e)](async()=>{const _0x3364ff=_0x560123;_0xcebdfa=='all'?(tgBot[_0x3364ff(0x12d)](_0x1f2645[_0x3364ff(0x189)]['id'],_0x3364ff(0x15f))[_0x3364ff(0xda)](_0x4d9124=>{telegramError(_0x4d9124);}),_0x81468b[_0x3364ff(0xd6)](_0x11abd0=>{const _0x165dee=_0x3364ff;if(_0x11abd0['botID']!='all')toggleBot(_0x11abd0['botID'],toggleStatus(_0x11abd0[_0x165dee(0x120)]),'stopped');})):(tgBot[_0x3364ff(0x12d)](_0x1f2645[_0x3364ff(0x189)]['id'],_0x3364ff(0xe5)+_0xcebdfa)['catch'](_0x128878=>{telegramError(_0x128878);}),toggleBot(_0xcebdfa,toggleStatus(_0xcebdfa),'stopped'));}),tgBot[_0x560123(0xba)]('callback_query');});}}),tgBot['onText'](/\/off/,_0x53bbec=>{const _0xefcf36=_0x27af8c;if(!validateTelegram(_0x53bbec))return;tgBot[_0xefcf36(0xba)]('callback_query');const _0x429902=getEnabledBots();if(_0x429902['length']==0x0)tgBot['sendMessage'](_0x53bbec['chat']['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x2e45c2=>{telegramError(_0x2e45c2);});else{if(_0x429902[_0xefcf36(0x86)]>0x1)_0x429902[_0xefcf36(0x1a7)]({'botID':'all'});let _0x40aa1d=[],_0x132692=[];const _0x381107=_0x429902[_0xefcf36(0x86)]%0x4==0x0||_0x429902[_0xefcf36(0x86)]%0x4==0x3||_0x429902['length']%0x3==0x1?0x4:0x3;let _0x2c80ab=0x0;_0x429902[_0xefcf36(0xd6)]((_0x1ac2d5,_0x3b5e5f)=>{const _0x1000ea=_0xefcf36;if(_0x3b5e5f%_0x381107==0x0)_0x132692=[];_0x132692[_0x1000ea(0x1a7)]({'text':_0x1ac2d5[_0x1000ea(0x120)]==_0x1000ea(0x18c)?'All\x20bots':'Bot\x20'+_0x1ac2d5[_0x1000ea(0x120)],'callback_data':_0x1ac2d5[_0x1000ea(0x120)]}),_0x3b5e5f%_0x381107==0x0&&(_0x40aa1d[_0x2c80ab]=_0x132692,_0x2c80ab++);}),tgBot['sendMessage'](_0x53bbec[_0xefcf36(0x189)]['id'],_0xefcf36(0xa3),{'reply_markup':{'inline_keyboard':_0x40aa1d}})[_0xefcf36(0xda)](_0x5d80d4=>{telegramError(_0x5d80d4);}),tgBot['on']('callback_query',async _0x39d5f1=>{const _0x32faa3=_0xefcf36,_0x4d41d6=_0x39d5f1[_0x32faa3(0x148)],_0x228ac7=_0x39d5f1[_0x32faa3(0x90)];tgBot['answerCallbackQuery'](_0x39d5f1['id'])['then'](async()=>{const _0x227917=_0x32faa3;_0x4d41d6==_0x227917(0x18c)?(tgBot[_0x227917(0x12d)](_0x228ac7[_0x227917(0x189)]['id'],_0x227917(0x194))['catch'](_0x51dc21=>{telegramError(_0x51dc21);}),_0x429902[_0x227917(0xd6)](_0x5eae09=>{const _0xea60c7=_0x227917;if(_0x5eae09[_0xea60c7(0x120)]!=_0xea60c7(0x18c))toggleBot(_0x5eae09['botID'],toggleStatus(_0x5eae09[_0xea60c7(0x120)]),_0xea60c7(0x1a0));})):(tgBot[_0x227917(0x12d)](_0x228ac7[_0x227917(0x189)]['id'],_0x227917(0xe8)+_0x4d41d6)[_0x227917(0xda)](_0x3ac245=>{telegramError(_0x3ac245);}),toggleBot(_0x4d41d6,toggleStatus(_0x4d41d6),_0x227917(0x1a0)));}),tgBot[_0x32faa3(0xba)](_0x32faa3(0x89));});}}),tgBot[_0x27af8c(0x16f)](/\/portfolio/,_0x18f1f0=>{const _0x53fa71=_0x27af8c;if(!validateTelegram(_0x18f1f0))return;tgBot['removeListener'](_0x53fa71(0x89));const _0x532d85=getEnabledBots();if(_0x532d85[_0x53fa71(0x86)]==0x0)tgBot[_0x53fa71(0x12d)](_0x18f1f0[_0x53fa71(0x189)]['id'],_0x53fa71(0x9e))[_0x53fa71(0xda)](_0x376246=>{telegramError(_0x376246);});else{if(_0x532d85['length']>0x1){let _0x5d81b9=[],_0x4d4d4e=[];const _0x31bb0e=_0x532d85['length']%0x4==0x0||_0x532d85[_0x53fa71(0x86)]%0x4==0x3||_0x532d85[_0x53fa71(0x86)]%0x3==0x1?0x4:0x3;let _0x198b53=0x0;_0x532d85['forEach']((_0x2b6bf0,_0xe93f77)=>{const _0x1608d3=_0x53fa71;if(_0xe93f77%_0x31bb0e==0x0)_0x4d4d4e=[];_0x4d4d4e[_0x1608d3(0x1a7)]({'text':_0x1608d3(0x149)+_0x2b6bf0['botID'],'callback_data':_0x2b6bf0[_0x1608d3(0x120)]}),_0xe93f77%_0x31bb0e==0x0&&(_0x5d81b9[_0x198b53]=_0x4d4d4e,_0x198b53++);}),tgBot[_0x53fa71(0x12d)](_0x18f1f0['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',{'reply_markup':{'inline_keyboard':_0x5d81b9}})[_0x53fa71(0xda)](_0x2a0c6d=>{telegramError(_0x2a0c6d);}),tgBot['on']('callback_query',async _0x10d406=>{const _0x834613=_0x53fa71,_0x5a7d7a=_0x10d406[_0x834613(0x148)],_0x4f154d=_0x10d406[_0x834613(0x90)];tgBot[_0x834613(0x14c)](_0x10d406['id'])[_0x834613(0x13e)](async()=>{const _0x454922=_0x834613;if(pid[_0x5a7d7a])pid[_0x5a7d7a]['send']({'function':_0x454922(0x163),'args':null});}),tgBot[_0x834613(0xba)](_0x834613(0x89));});}else{const _0x25a91c=_0x532d85[0x0][_0x53fa71(0x120)];if(pid[_0x25a91c])pid[_0x25a91c]['send']({'function':_0x53fa71(0x163),'args':null});}}}),tgBot[_0x27af8c(0x16f)](/\/toggle/,_0x310913=>{const _0x447ad3=_0x27af8c;if(!validateTelegram(_0x310913))return;tgBot['removeListener'](_0x447ad3(0x89));const _0x438144=getBotsWithMode();if(_0x438144[_0x447ad3(0x86)]==0x0)tgBot['sendMessage'](_0x310913['chat']['id'],_0x447ad3(0x9e))[_0x447ad3(0xda)](_0x5469f5=>{telegramError(_0x5469f5);});else{let _0x587c0f=[],_0x34bfda=[];const _0x440c26=0x2;let _0x7a3ac3=0x0;_0x438144[_0x447ad3(0xd6)]((_0x21fc3c,_0x58d6c5)=>{const _0x4d2ca7=_0x447ad3;if(_0x58d6c5%_0x440c26==0x0)_0x34bfda=[];_0x34bfda[_0x4d2ca7(0x1a7)]({'text':'Bot\x20'+_0x21fc3c['botID']+'\x20('+_0x21fc3c[_0x4d2ca7(0x137)]+')','callback_data':_0x21fc3c[_0x4d2ca7(0x120)]}),_0x58d6c5%_0x440c26==0x0&&(_0x587c0f[_0x7a3ac3]=_0x34bfda,_0x7a3ac3++);}),tgBot['sendMessage'](_0x310913[_0x447ad3(0x189)]['id'],_0x447ad3(0x94),{'reply_markup':{'inline_keyboard':_0x587c0f}})['catch'](_0x28f8fe=>{telegramError(_0x28f8fe);}),tgBot['on']('callback_query',async _0x9a4704=>{const _0x2ce13a=_0x447ad3,_0x4b4a9b=_0x9a4704[_0x2ce13a(0x148)],_0x5bb211=_0x9a4704[_0x2ce13a(0x90)];tgBot['answerCallbackQuery'](_0x9a4704['id'])[_0x2ce13a(0x13e)](async()=>{const _0x1ea64d=_0x2ce13a,_0xa2684e=_0x438144[_0x1ea64d(0xec)](_0x416609=>_0x416609[_0x1ea64d(0x120)]==_0x4b4a9b),_0x3d8b23=_0xa2684e[_0x1ea64d(0x137)]==_0x1ea64d(0x135)?'manual':_0x1ea64d(0x135);tgBot[_0x1ea64d(0x12d)](_0x5bb211[_0x1ea64d(0x189)]['id'],_0x1ea64d(0x1b8)+_0x4b4a9b+_0x1ea64d(0x152)+_0x3d8b23+_0x1ea64d(0x171))[_0x1ea64d(0xda)](_0x314921=>{telegramError(_0x314921);}),toggleBotMode(_0x4b4a9b);}),tgBot[_0x2ce13a(0xba)](_0x2ce13a(0x89));});}}),tgBot[_0x27af8c(0x16f)](/\/names/,_0x11a3bb=>{const _0x2c9f45=_0x27af8c;if(!validateTelegram(_0x11a3bb))return;let _0x14e0ec='';config[_0x2c9f45(0xd6)](_0x597b79=>{const _0x3038b5=_0x2c9f45;_0x14e0ec+='Bot\x20'+_0x597b79[_0x3038b5(0x120)]+':\x20'+_0x597b79[_0x3038b5(0x14a)]+'\x0a';}),tgBot['sendMessage'](_0x11a3bb[_0x2c9f45(0x189)]['id'],_0x14e0ec,{'parse_mode':_0x2c9f45(0xad)})['catch'](_0x2af1be=>{telegramError(_0x2af1be);});}),tgBot[_0x27af8c(0x16f)](/\/disable/,_0x339d3a=>{const _0x262c70=_0x27af8c;if(!validateTelegram(_0x339d3a))return;tgBot[_0x262c70(0x12d)](_0x339d3a[_0x262c70(0x189)]['id'],_0x262c70(0x14f))[_0x262c70(0xda)](_0x444d38=>{telegramError(_0x444d38);}),updateSetting(_0x262c70(0x12a),![]);}),tgBot[_0x27af8c(0x16f)](/\/help/,_0x3f4a78=>{const _0xedd14a=_0x27af8c;if(!validateTelegram(_0x3f4a78))return;tgBot[_0xedd14a(0x12d)](_0x3f4a78['chat']['id'],_0x55eae7)[_0xedd14a(0xda)](_0x71f8aa=>{telegramError(_0x71f8aa);});}),tgBot['on']('polling_error',_0xce4372=>{const _0x3fb87f=_0x27af8c;_0xce4372[_0x3fb87f(0x125)]()[_0x3fb87f(0xed)]('404\x20Not\x20Found')&&(logging(_0x3fb87f(0x191)),tgBot[_0x3fb87f(0x1ac)](),tgBot=null,io['to']('botmanager')[_0x3fb87f(0x96)]('notification',_0x3fb87f(0x191)));}),process['once']('SIGINT',()=>{const _0x3bd520=_0x27af8c;if(tgBot)tgBot[_0x3bd520(0x1ac)]();process[_0x3bd520(0x11a)](0x1);}),process[_0x27af8c(0x15e)](_0x27af8c(0xca),()=>{if(tgBot)tgBot['stopPolling']();process['exit'](0x1);});}}function disableTelegram(){const _0x312ae1=_0x4c8cd1;tgBot&&(tgBot[_0x312ae1(0x1ac)](),tgBot=null);}function sendTelegram(_0x3fe625,_0x4e29cf){const _0x55a552=_0x4c8cd1;if(settings[_0x55a552(0x12a)]){if(settings[_0x55a552(0x13c)]=='all'||(_0x4e29cf[_0x55a552(0x110)]==_0x55a552(0x10c)||_0x4e29cf['type']==_0x55a552(0xcf))&&settings['telegramEvents']=='alerts'||_0x4e29cf[_0x55a552(0x110)]==_0x55a552(0xaa)&&settings[_0x55a552(0x13c)]==_0x55a552(0xd7)){if(tgBot&&settings[_0x55a552(0x9a)]){if(_0x4e29cf[_0x55a552(0xc3)])tgBot[_0x55a552(0x12d)](settings[_0x55a552(0x9a)],_0x4e29cf[_0x55a552(0x14a)]+_0x55a552(0x1ce)+_0x4e29cf[_0x55a552(0x16e)])['catch'](_0x257985=>{telegramError(_0x257985);});else tgBot['sendMessage'](settings[_0x55a552(0x9a)],_0x55a552(0x149)+_0x3fe625+_0x55a552(0x1ce)+_0x4e29cf['event'])['catch'](_0x761fbc=>{telegramError(_0x761fbc);});}}}}function sendTelegramMsg(_0x52117d){const _0x186476=_0x4c8cd1;settings['telegramEnabled']&&(tgBot&&settings[_0x186476(0x9a)]&&tgBot[_0x186476(0x12d)](settings[_0x186476(0x9a)],_0x52117d)['catch'](_0x1c014b=>{telegramError(_0x1c014b);}));}function getDeviceWithIp(_0x134e5f){const _0x4e62b2=_0x4c8cd1;return devices[_0x4e62b2(0xec)](_0x599e56=>_0x599e56['ip']===_0x134e5f);}function temporaryAccess2FA(_0x22a266,_0x1b8e47){const _0x56f69b=_0x4c8cd1;let _0x142e96=new Date(),_0x82fc35=![];if(lastIpApproval){if(_0x142e96-lastIpApproval<0x1388)_0x82fc35=!![];}lastIpApproval=new Date();if(_0x82fc35)return;tgBot&&settings[_0x56f69b(0x9a)]&&(tgBot[_0x56f69b(0xba)]('callback_query'),tgBot[_0x56f69b(0x12d)](settings['telegramChatId'],_0x56f69b(0x108)+normalizeIP(_0x1b8e47)[_0x56f69b(0x1cf)]+_0x56f69b(0x82),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x56f69b(0x116),'callback_data':'5'},{'text':_0x56f69b(0xe2),'callback_data':'15'},{'text':_0x56f69b(0xdc),'callback_data':'30'},{'text':_0x56f69b(0xcd),'callback_data':_0x56f69b(0xcd)}]]}})[_0x56f69b(0xda)](_0x176cc8=>{telegramError(_0x176cc8);}),tgBot['on'](_0x56f69b(0x89),async _0x5167e9=>{const _0x4ad7bb=_0x56f69b,_0x31d18a=_0x5167e9[_0x4ad7bb(0x148)],_0x42b359=_0x5167e9[_0x4ad7bb(0x90)];tgBot[_0x4ad7bb(0x14c)](_0x5167e9['id'])[_0x4ad7bb(0x13e)](async()=>{const _0x3ca09c=_0x4ad7bb;devices[_0x22a266][_0x3ca09c(0x7f)]={'clientip':_0x1b8e47,'timestamp':new Date()['getTime'](),'expiry':_0x31d18a},_0x31d18a!='reject'?(await tgBot[_0x3ca09c(0x12d)](_0x42b359[_0x3ca09c(0x189)]['id'],_0x3ca09c(0x138)+_0x31d18a+_0x3ca09c(0x85),{'parse_mode':_0x3ca09c(0xad)})['catch'](_0x49b0ef=>{telegramError(_0x49b0ef);}),io['to'](_0x22a266)[_0x3ca09c(0x96)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x3ca09c(0x12d)](_0x42b359[_0x3ca09c(0x189)]['id'],_0x3ca09c(0xc4))[_0x3ca09c(0xda)](_0x342bfd=>{telegramError(_0x342bfd);}),io['to'](_0x22a266)[_0x3ca09c(0x96)](_0x3ca09c(0x15b),{'access':{'allow':![],'reason':_0x3ca09c(0xac),'token':null}}));}),tgBot[_0x4ad7bb(0xba)](_0x4ad7bb(0x89));}));}function loginAccess2FA(_0x82bbe1,_0x302af4){const _0x3c521e=_0x4c8cd1;tgBot&&settings[_0x3c521e(0x9a)]&&(tgBot['removeListener'](_0x3c521e(0x89)),tgBot[_0x3c521e(0x12d)](settings[_0x3c521e(0x9a)],_0x3c521e(0xf5)+normalizeIP(_0x302af4)['show']+_0x3c521e(0x82),{'parse_mode':_0x3c521e(0xad),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x3c521e(0xcd),'callback_data':'reject'}]]}})['catch'](_0x5f35a2=>{telegramError(_0x5f35a2);}),tgBot['on'](_0x3c521e(0x89),async _0x2262d9=>{const _0x40ec6d=_0x3c521e,_0x3b4540=_0x2262d9[_0x40ec6d(0x148)],_0x2351e5=_0x2262d9[_0x40ec6d(0x90)];tgBot[_0x40ec6d(0x14c)](_0x2262d9['id'])[_0x40ec6d(0x13e)](async()=>{const _0xd8f5b9=_0x40ec6d;devices[_0x82bbe1][_0xd8f5b9(0x1a1)]={'clientip':_0x302af4,'timestamp':new Date()[_0xd8f5b9(0x14b)](),'expiry':_0x3b4540},_0x3b4540!=_0xd8f5b9(0xcd)?(await tgBot[_0xd8f5b9(0x12d)](_0x2351e5['chat']['id'],_0xd8f5b9(0x7c),{'parse_mode':'HTML'})['catch'](_0x43ba00=>{telegramError(_0x43ba00);}),io['to'](_0x82bbe1)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0xd8f5b9(0x12d)](_0x2351e5[_0xd8f5b9(0x189)]['id'],_0xd8f5b9(0xbd))[_0xd8f5b9(0xda)](_0x3415e3=>{telegramError(_0x3415e3);}),io['to'](_0x82bbe1)[_0xd8f5b9(0x96)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x40ec6d(0xba)]('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x5ce5ed=_0x4c8cd1;return dbConfig['get'](_0x5ce5ed(0x1c6))['sortBy']('botID')[_0x5ce5ed(0xa0)]({'status':_0x5ce5ed(0x161)})[_0x5ce5ed(0x188)]()||[];}function getDisabledBots(){const _0x5b6ce7=_0x4c8cd1;return dbConfig['get'](_0x5b6ce7(0x1c6))[_0x5b6ce7(0xb5)](_0x5b6ce7(0x120))['filter']({'status':_0x5b6ce7(0xd5)})[_0x5b6ce7(0x188)]()||[];}function getBotsWithMode(){const _0x5a6a96=_0x4c8cd1,_0x2335bb=dbConfig[_0x5a6a96(0x160)](_0x5a6a96(0x1c6))['sortBy'](_0x5a6a96(0x120))[_0x5a6a96(0x188)]()||[];return _0x2335bb['forEach'](_0x409ff5=>{const _0x9e7b64=_0x5a6a96,_0x545e82=configpath+'bot-'+_0x409ff5[_0x9e7b64(0x120)]+_0x9e7b64(0x84),_0x53bf1f=fs[_0x9e7b64(0x182)](_0x545e82);if(_0x53bf1f){const _0x3dff28=fs[_0x9e7b64(0xa4)](_0x545e82);try{const _0xce744f=JSON[_0x9e7b64(0xbe)](_0x3dff28),_0x1802dc=_0xce744f?_0xce744f[_0x9e7b64(0x10e)][0x0][_0x9e7b64(0x190)]:![];_0x409ff5[_0x9e7b64(0x137)]=_0x1802dc?_0x9e7b64(0x135):_0x9e7b64(0x17e);}catch(_0x50de88){_0x409ff5[_0x9e7b64(0x137)]='manual';}}else _0x409ff5[_0x9e7b64(0x137)]=_0x9e7b64(0x17e);}),_0x2335bb;}function getSettings(){const _0x5c3977=_0x4c8cd1;return dbSettings[_0x5c3977(0x160)](_0x5c3977(0x195))[_0x5c3977(0x188)]()||{'timeshift':0x0};}function getSecure(){const _0x54fb5a=_0x4c8cd1;return dbSecure[_0x54fb5a(0x160)]('secure')[_0x54fb5a(0x188)]()||{};}function getBlacklist(){const _0x2fb99a=_0x4c8cd1;return dbSecure['get'](_0x2fb99a(0x12c))[_0x2fb99a(0x188)]()||[];}function broadcastToBots(_0x541109,_0x25f3bf){const _0x24cea0=_0x4c8cd1;config[_0x24cea0(0xd6)](_0x524594=>{const _0x1414bd=_0x24cea0;if(_0x524594['status']==_0x1414bd(0x161)&&_0x524594[_0x1414bd(0x141)]==_0x1414bd(0x109)){if(pid[_0x524594[_0x1414bd(0x120)]])pid[_0x524594['botID']]['send']({[_0x541109]:_0x25f3bf});}});}function storeSettings(_0x2e42be,_0x569f74=![]){const _0x23570d=_0x4c8cd1;_0x2e42be={...settings,..._0x2e42be};if(_0x569f74&&_0x2e42be[_0x23570d(0x78)]!=_0x23570d(0x1aa)&&_0x2e42be['bbPassword']!=''){const _0x4d7784=crypt[_0x23570d(0x1a9)](secure[_0x23570d(0x1ab)],_0x2e42be[_0x23570d(0x78)])[_0x23570d(0x90)][_0x23570d(0x1ae)]('@')[0x0],_0x3f1d5d=bcrypt[_0x23570d(0xeb)](_0x4d7784,saltRounds);_0x2e42be={..._0x2e42be,'bbPassword':_0x3f1d5d};}if(_0x569f74&&_0x2e42be[_0x23570d(0x173)]!=_0x23570d(0x1aa)&&_0x2e42be[_0x23570d(0x173)]!=''){const _0xfc14c9=crypt[_0x23570d(0x1a9)](secure[_0x23570d(0x1ab)],_0x2e42be[_0x23570d(0x173)])[_0x23570d(0x90)][_0x23570d(0x1ae)]('@')[0x0];_0x2e42be={..._0x2e42be,'telegramToken':_0xfc14c9};}const _0x59c1d6=_0x2e42be[_0x23570d(0x173)]!=_0x23570d(0x1aa)&&_0x2e42be['telegramToken']!=settings[_0x23570d(0x173)]||_0x2e42be[_0x23570d(0xa5)]!=settings['telegramUsername'],_0x210fa0=_0x2e42be['telegramToken']==''||_0x2e42be['telegramUsername']=='';if(_0x59c1d6)_0x2e42be[_0x23570d(0x13c)]=_0x23570d(0x18c);for(const [_0x4586c1,_0x1d6df4]of Object[_0x23570d(0xa6)](_0x2e42be)){if(_0x4586c1==_0x23570d(0x173)&&_0x1d6df4==_0x23570d(0x1aa)){_0x2e42be[_0x23570d(0x173)]=settings[_0x23570d(0x173)];continue;};if(_0x4586c1=='bbPassword'&&_0x1d6df4=='************'){_0x2e42be[_0x23570d(0x78)]=settings['bbPassword'];continue;};dbSettings[_0x23570d(0xbf)](_0x23570d(0x174)+_0x4586c1,_0x1d6df4)[_0x23570d(0xaf)]();}settings=_0x2e42be,io['to']('botmanager')[_0x23570d(0x96)](_0x23570d(0x195),cleanSettings()),broadcastToBots(_0x23570d(0x88),settings[_0x23570d(0x88)]);if(_0x59c1d6&&!_0x210fa0)initTelegram();if(_0x59c1d6&&_0x210fa0)disableTelegram();getAllClients()[_0x23570d(0xd6)](_0x2b93ed=>{const _0x556607=_0x23570d;getSocket(_0x2b93ed['id'])[_0x556607(0x96)]('status',{'access':{'allow':![],'reason':_0x556607(0xfc),'token':null}});});}function updateSetting(_0x2ad260,_0x4242e0){const _0x20a0de=_0x4c8cd1;dbSettings[_0x20a0de(0xbf)]('settings.'+_0x2ad260,_0x4242e0)[_0x20a0de(0xaf)](),settings=getSettings(),io['to'](_0x20a0de(0x15a))[_0x20a0de(0x96)](_0x20a0de(0x195),cleanSettings());}function storeSecure(_0x205ff1){const _0x42acef=_0x4c8cd1;dbSecure[_0x42acef(0x160)](_0x42acef(0x11b))[_0x42acef(0x1a7)](_0x205ff1)[_0x42acef(0xaf)](),secure=_0x205ff1;}function addBlacklist(_0x2ab199){const _0x172de8=_0x4c8cd1;cleanBlacklist();let _0x5dcc56;devices[_0x2ab199][_0x172de8(0x7f)]?_0x5dcc56=Math[_0x172de8(0x134)](devices[_0x2ab199][_0x172de8(0x7f)]['expiry'],loginExpiry):_0x5dcc56=loginExpiry,dbSecure[_0x172de8(0x160)](_0x172de8(0x12c))[_0x172de8(0x1a7)]({'expiry':new Date()[_0x172de8(0x14b)]()+_0x5dcc56*0x3c*0x3e8,'token':devices[_0x2ab199][_0x172de8(0xe4)]['token']})['write'](),blacklist=dbSecure[_0x172de8(0x160)](_0x172de8(0x12c))[_0x172de8(0x188)]();}function cleanBlacklist(){const _0xc23eb0=_0x4c8cd1;let _0x335eaa=dbSecure['get'](_0xc23eb0(0x12c))[_0xc23eb0(0xb7)]()[_0xc23eb0(0x188)](),_0x367ab6=new Date()[_0xc23eb0(0x14b)]();_0x335eaa[_0xc23eb0(0xd6)](_0x418c36=>{const _0xcbf087=_0xc23eb0;_0x418c36[_0xcbf087(0x1bb)]<_0x367ab6&&dbSecure[_0xcbf087(0x160)](_0xcbf087(0x12c))['remove']({'expiry':_0x418c36[_0xcbf087(0x1bb)]})['write']();});}function initStates(){const _0x198ad5=_0x4c8cd1;let _0xced7a6=getConfiguration();_0xced7a6[_0x198ad5(0xd6)](_0x57bd18=>{const _0x4984e5=_0x198ad5;_0x57bd18['live']=_0x4984e5(0x1a0);}),storeConfiguration(_0xced7a6);}function onKeys(){const _0x18942b=new RSA();return new Promise(_0x1e7d2b=>{const _0xc58d83=_0x538c;_0x18942b['generateKeyPairAsync']()[_0xc58d83(0x13e)](_0x4958f6=>{_0x1e7d2b(_0x4958f6);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x10c54e=_0x4c8cd1;let _0x304732=getConfiguration(),_0x3eb8fb=![];_0x304732[_0x10c54e(0xd6)](_0x141dd7=>{const _0x2d61dd=_0x10c54e;if(_0x141dd7['status']==_0x2d61dd(0x109))_0x141dd7['status']=_0x2d61dd(0x161),_0x3eb8fb=!![];else _0x141dd7[_0x2d61dd(0x15b)]=='stopped'&&(_0x141dd7[_0x2d61dd(0x15b)]=_0x2d61dd(0xd5),_0x3eb8fb=!![]);});if(_0x3eb8fb)storeConfiguration(_0x304732);let _0x3ea3ca=getSecure();if(!_0x3ea3ca[_0x10c54e(0xe7)](_0x10c54e(0xde))){let _0x22081f=await generateKeys();_0x3ea3ca[_0x10c54e(0x12e)]=_0x22081f['publicKey'],_0x3ea3ca[_0x10c54e(0x1ab)]=_0x22081f['privateKey'],_0x3ea3ca['secret']=crypto[_0x10c54e(0x7d)](0x20)['toString'](_0x10c54e(0x122));;storeSecure(_0x3ea3ca);}let _0x13cc34=getSettings();_0x3eb8fb=![];!_0x13cc34[_0x10c54e(0xe7)]('loginRequired')&&(_0x13cc34[_0x10c54e(0xf0)]=![],_0x13cc34[_0x10c54e(0x15c)]='',_0x13cc34[_0x10c54e(0x78)]='',_0x13cc34[_0x10c54e(0xb8)]=![],_0x3eb8fb=!![]);!_0x13cc34[_0x10c54e(0xe7)](_0x10c54e(0x151))&&(_0x13cc34['whitelistEnabled']=![],_0x13cc34[_0x10c54e(0x144)]=[],_0x13cc34[_0x10c54e(0x1a6)]=![],_0x3eb8fb=!![]);if(!_0x13cc34[_0x10c54e(0xe7)](_0x10c54e(0x12a))){if(_0x13cc34[_0x10c54e(0x9a)])_0x13cc34[_0x10c54e(0x12a)]=!![];else _0x13cc34[_0x10c54e(0x12a)]=![];_0x3eb8fb=!![];}if(_0x3eb8fb)storeSettings(_0x13cc34);}function storeConfiguration(_0x510e45){const _0x1dbbc5=_0x4c8cd1;dbConfig[_0x1dbbc5(0x160)](_0x1dbbc5(0x1c6))[_0x1dbbc5(0x177)]()[_0x1dbbc5(0xaf)](),_0x510e45[_0x1dbbc5(0xd6)](_0x304ee2=>{const _0x5d4ba4=_0x1dbbc5;delete _0x304ee2[_0x5d4ba4(0x137)];}),dbConfig[_0x1dbbc5(0x160)](_0x1dbbc5(0x1c6))[_0x1dbbc5(0x1a7)](..._0x510e45)[_0x1dbbc5(0xaf)](),config=_0x510e45;}function resetPassword(){const _0x5ca280=_0x4c8cd1;tgBot&&settings[_0x5ca280(0x9a)]&&(tgBot[_0x5ca280(0xba)](_0x5ca280(0x89)),tgBot[_0x5ca280(0x12d)](settings['telegramChatId'],_0x5ca280(0x172),{'parse_mode':_0x5ca280(0xad),'reply_markup':{'inline_keyboard':[[{'text':_0x5ca280(0x18f),'callback_data':_0x5ca280(0x18f)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x3f3c6b=>{telegramError(_0x3f3c6b);}),tgBot['on']('callback_query',async _0x3a1a7f=>{const _0x288c17=_0x5ca280,_0x2caa56=_0x3a1a7f['data'],_0x4af689=_0x3a1a7f[_0x288c17(0x90)];tgBot[_0x288c17(0x14c)](_0x3a1a7f['id'])['then'](async()=>{const _0x326bf3=_0x288c17;if(_0x2caa56!='no'){const _0x58b3e6=0xf,_0x5244de=_0x326bf3(0xa9),_0x11d24f=Array[_0x326bf3(0xd4)](crypto[_0x326bf3(0xc2)](new Uint32Array(_0x58b3e6)))[_0x326bf3(0xb0)](_0x2f9680=>_0x5244de[_0x2f9680%_0x5244de[_0x326bf3(0x86)]])[_0x326bf3(0x73)](''),_0x58bfc7=bcrypt[_0x326bf3(0xeb)](_0x11d24f,saltRounds);storeSettings({'bbPassword':_0x58bfc7}),await tgBot[_0x326bf3(0x12d)](_0x4af689[_0x326bf3(0x189)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x11d24f,{'parse_mode':'HTML'})['catch'](_0x3d3273=>{telegramError(_0x3d3273);});}else await tgBot['sendMessage'](_0x4af689[_0x326bf3(0x189)]['id'],'Password\x20reset\x20rejected')[_0x326bf3(0xda)](_0x6f59d3=>{telegramError(_0x6f59d3);});}),tgBot['removeListener'](_0x288c17(0x89));}));}function logging(_0x58d79b){const _0x189973=_0x4c8cd1;console[_0x189973(0x186)](getTimeStamp()+_0x189973(0x157)+_0x58d79b);if(tgBot&&settings[_0x189973(0x9a)]&&settings[_0x189973(0x13c)]!='orders')tgBot['sendMessage'](settings[_0x189973(0x9a)],'Bot\x20Mgr\x20>\x20'+_0x58d79b)[_0x189973(0xda)](_0xd832a1=>{telegramError(_0xd832a1);});}function getServerTime(){const _0x3e2a71=_0x4c8cd1,_0x2c240f=new Date();return _0x2c240f[_0x3e2a71(0x1bc)]()+'/'+(_0x2c240f['getMonth']()+0x1)[_0x3e2a71(0x125)]()[_0x3e2a71(0xbc)](0x2,'0')+'/'+_0x2c240f[_0x3e2a71(0x180)]()[_0x3e2a71(0x125)]()['padStart'](0x2,'0')+'\x20'+_0x2c240f[_0x3e2a71(0x18d)]()['toString']()[_0x3e2a71(0xbc)](0x2,'0')+':'+_0x2c240f[_0x3e2a71(0x155)]()[_0x3e2a71(0x125)]()[_0x3e2a71(0xbc)](0x2,'0')+':'+_0x2c240f[_0x3e2a71(0x178)]()[_0x3e2a71(0x125)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0xb58557=_0x4c8cd1,_0x44c4a0=shiftedTime();return _0x44c4a0[_0xb58557(0x1bc)]()+'/'+(_0x44c4a0[_0xb58557(0x117)]()+0x1)['toString']()[_0xb58557(0xbc)](0x2,'0')+'/'+_0x44c4a0['getDate']()[_0xb58557(0x125)]()[_0xb58557(0xbc)](0x2,'0')+'\x20'+_0x44c4a0['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x44c4a0[_0xb58557(0x155)]()[_0xb58557(0x125)]()[_0xb58557(0xbc)](0x2,'0')+':'+_0x44c4a0[_0xb58557(0x178)]()[_0xb58557(0x125)]()[_0xb58557(0xbc)](0x2,'0');}function shiftedTime(){const _0x13ad92=_0x4c8cd1,_0xe7543b=new Date();let _0x263d66=_0xe7543b;if(settings[_0x13ad92(0x88)]&&settings[_0x13ad92(0x88)]!==0x0)_0x263d66=fns[_0x13ad92(0x8e)](_0xe7543b,{'hours':settings[_0x13ad92(0x88)]});return _0x263d66;}function startScheduler(){const _0x213be2=_0x4c8cd1;let _0x1c797b=new Date()[_0x213be2(0x10a)]();_0x1c797b==0x1&&backupConfigFiles();_0x1c797b==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x68fc11=_0x4c8cd1;fs[_0x68fc11(0x1b7)](configpath,{'withFileTypes':!![]})[_0x68fc11(0xd6)](_0x3ca5a1=>{const _0x28da72=_0x68fc11;if(!_0x3ca5a1[_0x28da72(0x1c1)]())fs['copyFileSync'](configpath+_0x3ca5a1[_0x28da72(0xdf)],configbackuppath+_0x3ca5a1[_0x28da72(0xdf)]);});}function triggerAnalytics(){const _0x489168=_0x4c8cd1;analytics[_0x489168(0x1a2)]({'title':'Balance\x20Bot\x20Server','href':_0x489168(0x1b0),'path':'/v'+serverversion});}function validateCredentials(_0x1a7f6c,_0x3e81e1){const _0x30f68d=_0x4c8cd1;if(_0x1a7f6c[_0x30f68d(0xfd)]==settings[_0x30f68d(0x15c)]&&bcrypt[_0x30f68d(0x1cd)](_0x1a7f6c[_0x30f68d(0xf8)],settings[_0x30f68d(0x78)])){if(settings[_0x30f68d(0xb8)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x320b12=generateLoginToken(_0x3e81e1);return{'allow':!![],'reason':_0x30f68d(0x1a4),'token':_0x320b12};}}else return{'allow':![],'reason':_0x30f68d(0x114),'token':null};}function refreshToken(_0x450135){const _0xcec1fd=generateLoginToken(_0x450135);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0xcec1fd};}function validateAccess(_0x5eac4f,_0x5b75a2){const _0x453b58=_0x4c8cd1;let _0x39079e=devices[_0x5b75a2]['ip'],_0x5420ce;const _0x21dd74=_0x4c6098=>{const _0x37c399=_0x538c;if(settings[_0x37c399(0xf0)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x5b75a2)){const _0x5ad19a=generateLoginToken(_0x5b75a2);return{'allow':!![],'reason':_0x37c399(0xfe),'token':_0x5ad19a};}else return{'allow':![],'reason':_0x37c399(0xc1),'token':null};}else return _0x5420ce=validToken(_0x4c6098,_0x5b75a2),_0x5420ce['hasOwnProperty'](_0x37c399(0xcf))?{'allow':!![],'reason':_0x37c399(0x167),'token':_0x4c6098}:{'allow':![],'reason':_0x37c399(0xc1),'token':null};}else return{'allow':!![],'reason':_0x37c399(0x16a),'token':null};};if(settings[_0x453b58(0x151)]){let _0x115602=[...settings['whitelist'],_0x453b58(0xe0),'::ffff:127.0.0.1','127.0.0.1'];if(_0x115602[_0x453b58(0xed)](_0x39079e))return _0x21dd74(_0x5eac4f);else{_0x5420ce=validToken(_0x5eac4f,_0x5b75a2);if(_0x5420ce[_0x453b58(0xe7)](_0x453b58(0xcf)))return _0x21dd74(_0x5eac4f);else{if(telegramIpApproved(_0x5b75a2)){const _0x1293cf=generateToken(_0x5b75a2);return _0x5420ce=_0x21dd74(_0x5eac4f),_0x5420ce[_0x453b58(0xd9)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x1293cf}:_0x5420ce;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x453b58(0x18b),'token':null}:{'allow':![],'reason':_0x453b58(0xd2),'token':null};}}}else return _0x21dd74(_0x5eac4f);}function timelyDecrypt(_0xc091c3,_0x5e14ba=!![]){const _0x391e08=_0x4c8cd1;if(_0xc091c3)try{const _0x44ca9a=crypt[_0x391e08(0x1a9)](secure['privateKey'],_0xc091c3)[_0x391e08(0x90)],_0x4a9a31=_0x44ca9a[_0x391e08(0x1ae)]('@')[0x0],_0x3894de=_0x44ca9a[_0x391e08(0x1ae)]('@')[0x1],_0x5233e3=new Date()[_0x391e08(0x14b)]();if(_0x5e14ba){if(_0x5233e3-_0x3894de<maxSecretAge*0x3e8)return _0x4a9a31;else return![];}else return _0x4a9a31;}catch(_0x43d743){return![];}else return![];}const validToken=(_0x3b5a6a,_0x1bf944)=>{const _0x24333f=_0x4c8cd1,_0x1e364a=devices[_0x1bf944]['ip'];if(!_0x3b5a6a)return{'error':'No\x20authentication\x20token'};for(let _0x2c537c of blacklist){if(_0x2c537c['token']==_0x3b5a6a)return{'error':_0x24333f(0x16c)};}let _0x91e5cb;try{_0x91e5cb=jwt[_0x24333f(0x77)](_0x3b5a6a,secure[_0x24333f(0xde)]+_0x1bf944);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x91e5cb[_0x24333f(0xe7)](_0x24333f(0xa7))&&!_0x91e5cb['hasOwnProperty'](_0x24333f(0xfd))||!_0x91e5cb[_0x24333f(0xe7)](_0x24333f(0x80)))return{'error':_0x24333f(0x1b5)};if(!_0x91e5cb[_0x24333f(0xe7)]('username')&&_0x91e5cb['hasOwnProperty']('clientip')){const {clientip:_0x20d7cd}=_0x91e5cb;return _0x1e364a==_0x20d7cd?{'success':_0x24333f(0x19c)}:{'error':_0x24333f(0xb1)};}else{if(_0x91e5cb[_0x24333f(0xe7)](_0x24333f(0xfd))&&_0x91e5cb[_0x24333f(0xe7)](_0x24333f(0xa7))){const {username:_0x1bb1bb,clientip:_0x42f36a}=_0x91e5cb;return settings[_0x24333f(0x15c)]==_0x1bb1bb&&_0x1e364a==_0x42f36a?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x28433d=>{const _0x4829d8=_0x4c8cd1;if(_0x28433d){const _0x91ed31=devices[_0x28433d]['ip'];return jwt['sign']({'username':settings[_0x4829d8(0x15c)],'clientip':_0x91ed31},secure[_0x4829d8(0xde)]+_0x28433d,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x18eb3b=>{const _0x2ecfb4=_0x4c8cd1;if(_0x18eb3b){const _0x3677a1=devices[_0x18eb3b]['ip'];return jwt[_0x2ecfb4(0x19f)]({'clientip':_0x3677a1},secure['secret']+_0x18eb3b,{'expiresIn':devices[_0x18eb3b][_0x2ecfb4(0x7f)][_0x2ecfb4(0x1bb)]*0x3c});}else return![];},telegramIpApproved=_0x38f1ae=>{const _0x31eaf4=_0x4c8cd1;let _0x512764=![];return devices[_0x38f1ae]['telegramIpApproval']&&devices[_0x38f1ae][_0x31eaf4(0x7f)][_0x31eaf4(0x1bb)]!=_0x31eaf4(0xcd)&&(_0x512764=devices[_0x38f1ae][_0x31eaf4(0x7f)]['clientip']==devices[_0x38f1ae]['ip']&&new Date()[_0x31eaf4(0x14b)]()-devices[_0x38f1ae][_0x31eaf4(0x7f)][_0x31eaf4(0x81)]<devices[_0x38f1ae]['telegramIpApproval'][_0x31eaf4(0x1bb)]*0x3c*0x3e8),_0x512764;},telegram2FaApproved=_0x1a7b51=>{const _0x546359=_0x4c8cd1;let _0x50665d=![];return devices[_0x1a7b51][_0x546359(0x1a1)]&&devices[_0x1a7b51][_0x546359(0x1a1)]['expiry']!=_0x546359(0xcd)&&(_0x50665d=devices[_0x1a7b51][_0x546359(0x1a1)][_0x546359(0xa7)]==devices[_0x1a7b51]['ip']&&new Date()[_0x546359(0x14b)]()-devices[_0x1a7b51][_0x546359(0x1a1)][_0x546359(0x81)]<devices[_0x1a7b51][_0x546359(0x1a1)]['expiry']*0x3c*0x3e8),_0x50665d;},normalizeIP=_0x4ac8df=>{const _0x22df45=_0x4c8cd1;let _0x473383=null,_0x480c40=null;if(ipaddr[_0x22df45(0x13d)](_0x4ac8df)){const _0x448984=ipaddr[_0x22df45(0xbe)](_0x4ac8df);_0x448984[_0x22df45(0x121)]()==='ipv6'?(_0x448984['isIPv4MappedAddress']()&&(_0x473383=_0x448984['toIPv4Address']()['toString']()),_0x480c40=_0x448984['toString']()):(_0x473383=_0x448984[_0x22df45(0x125)](),_0x480c40=_0x448984[_0x22df45(0x83)]()[_0x22df45(0x125)]());}return{'show':_0x473383?_0x473383:_0x480c40,'store':_0x480c40};};