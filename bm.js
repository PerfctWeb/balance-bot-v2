const _0x4f0a15=_0x5ac2;(function(_0x44c806,_0x1bba84){const _0x487e0b=_0x5ac2,_0x3fa191=_0x44c806();while(!![]){try{const _0x51202b=-parseInt(_0x487e0b(0x19d))/0x1*(parseInt(_0x487e0b(0x214))/0x2)+-parseInt(_0x487e0b(0x271))/0x3*(-parseInt(_0x487e0b(0x15e))/0x4)+parseInt(_0x487e0b(0x184))/0x5+-parseInt(_0x487e0b(0x229))/0x6*(-parseInt(_0x487e0b(0x104))/0x7)+parseInt(_0x487e0b(0x1bb))/0x8+-parseInt(_0x487e0b(0x218))/0x9+-parseInt(_0x487e0b(0x16c))/0xa*(parseInt(_0x487e0b(0x122))/0xb);if(_0x51202b===_0x1bba84)break;else _0x3fa191['push'](_0x3fa191['shift']());}catch(_0x22c44a){_0x3fa191['push'](_0x3fa191['shift']());}}}(_0x37b5,0xdda93));const _0x3c32de=function(){let _0x34ddb4=!![];return function(_0x2fb6c4,_0x4102e6){const _0x445415=_0x34ddb4?function(){if(_0x4102e6){const _0x380da5=_0x4102e6['apply'](_0x2fb6c4,arguments);return _0x4102e6=null,_0x380da5;}}:function(){};return _0x34ddb4=![],_0x445415;};}(),_0x4deb4=_0x3c32de(this,function(){const _0x4ce4ca=_0x5ac2;return _0x4deb4[_0x4ce4ca(0x223)]()[_0x4ce4ca(0x20f)](_0x4ce4ca(0x2b3))['toString']()['constructor'](_0x4deb4)[_0x4ce4ca(0x20f)](_0x4ce4ca(0x2b3));});_0x4deb4();'use strict';process[_0x4f0a15(0x114)][_0x4f0a15(0x18f)]=0x1;const childProcess=require(_0x4f0a15(0x26b)),fs=require('fs'),fns=require(_0x4f0a15(0x154)),low=require('lowdb'),FileSync=require(_0x4f0a15(0x2b7)),path=require(_0x4f0a15(0x18c)),crypto=require(_0x4f0a15(0x103)),Crypt=require('hybrid-crypto-js')['Crypt'],RSA=require(_0x4f0a15(0x233))[_0x4f0a15(0x26d)],bcrypt=require(_0x4f0a15(0x173)),jwt=require(_0x4f0a15(0x2a0)),ipaddr=require('ipaddr.js'),argv=require(_0x4f0a15(0x231))(process['argv']['slice'](0x2))[_0x4f0a15(0x169)],uuidRandom=require(_0x4f0a15(0x119)),TelegramBot=require('node-telegram-bot-api'),Mixpanel=require(_0x4f0a15(0x250)),axios=require(_0x4f0a15(0x29b)),{GraphQLClient,gql}=require(_0x4f0a15(0x26f)),util=require(_0x4f0a15(0x275)),fileUpload=require(_0x4f0a15(0x1e7)),PORT=argv[_0x4f0a15(0x21d)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x4f0a15(0x243)](PORT)&&(console[_0x4f0a15(0x2a9)](_0x4f0a15(0x259)+PORT+_0x4f0a15(0x143)),process[_0x4f0a15(0x1d9)](0x1));const HOST=argv[_0x4f0a15(0x216)]||null,userID=argv[_0x4f0a15(0x26e)]||'',debugging=argv['d']||![];let bbpath=_0x4f0a15(0x2a3),bbpath2='';const botfile=_0x4f0a15(0x10a),configfile=_0x4f0a15(0x2b1),settingsfile=_0x4f0a15(0x142),securefile=_0x4f0a15(0x163),maxBackups=0xa;let validInstallation=!![];!fs[_0x4f0a15(0x133)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x4f0a15(0x19a)),configpath=userID?bbpath+_0x4f0a15(0x124)+userID+'/':bbpath+_0x4f0a15(0x124),configbackuppath=configpath+_0x4f0a15(0x282),logspath=userID?bbpath+_0x4f0a15(0x186)+userID+'/':bbpath+_0x4f0a15(0x186),zippath=userID?bbpath+_0x4f0a15(0x252)+userID+'/':bbpath+_0x4f0a15(0x252),loggerfile=fs[_0x4f0a15(0x198)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x4f0a15(0x19e)+userID+'/':bbpath+'temp/';!fs[_0x4f0a15(0x133)](configpath)&&fs[_0x4f0a15(0x2a5)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x4f0a15(0x2a5)](configbackuppath);!fs[_0x4f0a15(0x133)](logspath)&&fs[_0x4f0a15(0x2a5)](logspath);!fs[_0x4f0a15(0x133)](zippath)&&fs[_0x4f0a15(0x2a5)](zippath);!fs[_0x4f0a15(0x133)](temppath)&&fs[_0x4f0a15(0x2a5)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x4f0a15(0x226)]({'bots':[]})[_0x4f0a15(0x245)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x4f0a15(0x226)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x4f0a15(0x269)}})[_0x4f0a15(0x245)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x4f0a15(0x226)]({'secure':{},'blacklist':[]})[_0x4f0a15(0x245)]();let crypt=new Crypt({'md':_0x4f0a15(0x12b),'rsaStandard':_0x4f0a15(0x204)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x4f0a15(0x255),{'host':_0x4f0a15(0x100)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x4f0a15(0x157)]&&settings[_0x4f0a15(0x157)]!=''&&settings[_0x4f0a15(0x131)]&&settings['telegramUsername']!='')initTelegram();const logger={'screen':_0x205b51=>{const _0x2d144a=_0x4f0a15;console[_0x2d144a(0x2a9)](_0x205b51);},'simple':_0x2d309a=>{const _0x5cfdf4=_0x4f0a15;console[_0x5cfdf4(0x2a9)](_0x2d309a),loggerfile[_0x5cfdf4(0x245)](util[_0x5cfdf4(0x1d3)](_0x2d309a)+'\x0a');},'full':async _0x55bccc=>{const _0x235400=_0x4f0a15,_0x4dc2d0=getTimeStamp()+_0x235400(0x23f)+_0x55bccc;console[_0x235400(0x2a9)](_0x4dc2d0),loggerfile[_0x235400(0x245)](util[_0x235400(0x1d3)](_0x4dc2d0)+'\x0a');if(tgBot&&settings[_0x235400(0x10f)]&&settings[_0x235400(0x1b6)]!=_0x235400(0x136))await tgBot['sendMessage'](settings[_0x235400(0x10f)],_0x235400(0x21a)+_0x55bccc)[_0x235400(0x13b)](_0x13c237=>{telegramError(_0x13c237);});},'debug':async(_0x4ba54f,_0xe9cc6d='')=>{const _0x34f385=_0x4f0a15,_0x5cddc4=getTimeStamp()+_0x34f385(0x17a)+_0x4ba54f;if(debugging)console[_0x34f385(0x2a9)](_0x5cddc4);loggerfile[_0x34f385(0x245)](util[_0x34f385(0x1d3)](_0x5cddc4)+'\x0a');if(_0xe9cc6d){if(debugging)console[_0x34f385(0x2a9)](_0xe9cc6d);loggerfile[_0x34f385(0x245)](util['format'](_0xe9cc6d)+'\x0a');}}};process['on'](_0x4f0a15(0x24d),function(_0x1fce95){const _0xb638a0=_0x4f0a15;logger[_0xb638a0(0x24b)](_0x1fce95);});let restoredConfigFile=0x0,newBot=![],pid=[];function _0x37b5(){const _0x509112=['express','blacklist','sha256','binary','auto','type','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','yes','telegramUsername','getDate','existsSync','Notifications\x20disabled','reset-password','orders','warning','new-disabled','get','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','catch','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','botname','parse','isValid','Allow\x20login\x20from\x20IP\x20address\x20<b>','keys','bb-settings.json',',\x20must\x20be\x20a\x204\x20digit\x20number','request','Unauthorized\x20attempt\x20to\x20download\x20','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','30\x20min','Starting\x20Balance\x20Bot\x20reinstallation','Login\x20rejected','error','function','***','/:bot/history','access','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','password','removeListener','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','get-starting-balances','date-fns','sendMetricsTelegram','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','telegramToken','hasOwnProperty','sendMessage','Backup\x20file\x20unzipped\x20and\x20stored','exec','mode','remove','8kcavJf','add','encryptedUuid','slice','reason','bb-secure.json','readFileSync','get-logs','All','apiSecret','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','argv','pidExpireLogin','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','10Lsfzlo','live','storeConfiguration','-performance.json','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Notifications\x20enabled\x0a','rmSync','bcryptjs','-----------------------------------------------------------------------------------','isDirectory','/off\x20-\x20stop\x20bot(s)\x0a','storeHeadless','userid','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','output-002.log','length','download','Logged\x20out\x20user\x20...','showname','apiKey','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','1878375yXHFli','debug','logs/','once','find','success','accept','\x20>\x20','path','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','bots','NTBA_FIX_319','Notifications\x20enabled','add-bot','set','stopped','sort','/update\x20-\x20update\x20Balance\x20Bot\x0a','login\x20token\x20generated','You\x20can\x20use\x20the\x20following\x20commands:\x0a','createWriteStream','getMinutes','clients','f2aRequired','Markdown','42079nDGFYS','temp/','delete-alerts','toggleBotMode','update-bb','get-messages','callback_query','2FA\x20required','build','index.html','connection','\x20|\x20','Invalid\x20username\x20or\x20IP\x20address','hashSync','post','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','socket','Invalid\x20Telegram\x20token','/on\x20-\x20start\x20bot(s)\x0a','Unauthorized\x20login\x20attempt\x20(timeout)','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','stopPolling','Notifications\x20disabled\x0a','send','backup-full','telegramEvents','Bot\x20','get-portfolio','store-configuration','Password\x20reset\x20rejected','13900744SpZORK','telegramEnabled','loginRequired','ipc','temporary\x20access\x20not\x20allowed','toggle-bot-mode','::1','entries','2FA\x20login\x20token\x20generated','-results.json','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','initclient','HTML','Token\x20blacklisted','\x20(1)','-events.json','*$1*','toIPv4MappedAddress','restart','replace','Setting\x20access:\x20','answerCallbackQuery','/metrics\x20-\x20show\x20bot\x20performance\x0a','alerts','format','lastmsgemitted','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','assign','placeOrder','Restore\x20process\x20aborted','exit','status','params','ipv6','enabled','/upload-backup','Orders','\x20(2)','getFullYear','/status\x20-\x20show\x20bot(s)\x20status\x0a','Server','onText','update',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','express-fileupload','show','server','max','Unauthorized\x20attempt\x20to\x20log\x20out','</b>\x20?','messages','starting\x20bot\x20|\x20Bot\x20','file','all','Session\x20expired\x20for\x20user\x20...','/:bot/support','/disable\x20-\x20disable\x20notifications\x0a','startsWith','randomBytes','from','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Unauthorized\x20attempt\x20to\x20store\x20configuration','\x20only\x0a','Unauthorized\x20attempt\x20to\x20show\x20configuration','order','cloneDeep','bbvNew','Ok,\x20will\x20send\x20alert\x20notifications\x20only','then','value','track','Unauthorized\x20attempt\x20to\x20add\x20bot','backup','RSA-OAEP','node-zip','/names\x20-\x20show\x20bot\x20names\x0a','::ffff:127.0.0.1','\x20mode','new','\x20to\x20','generateKeyPairAsync','reload','store','reinstall','search','disconnect','reset-history','Backup\x20file\x20uploaded','User\x20has\x20been\x20validated','54XWlfTD','stringify','host','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','6389244lzTjCf','<b>Telegram\x20Bot\x20Status:</b>\x0a','Bot\x20Mgr\x20>\x20','manual','sendFile','port','emit','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','pidRefreshToken','notification','15\x20min','toString','map','login','defaults','Notifications\x20types:\x20','logged\x20out','6687402eLrsni','update-bot','removeAllListeners','logs','/help\x20-\x20show\x20available\x20commands\x0a','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','disabled','bbvReceive','yargs/yargs','forEach','hybrid-crypto-js','polling_error','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','telegram','temporary\x20access\x20timeout','timeshift','show-config','Alerts','whitelist','2FA\x20login\x20rejected','deleted\x20Bot\x20','getMonth',':\x20Bot\x20Mgr\x20>\x20','store-fiat','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','test','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','write','.zip','botmanager','referer','username','includes','simple','inherit','uncaughtException','logout','statSync','mixpanel','Unauthorized\x20attempt\x20to\x20confirm\x20message','zip/','error\x20while\x20deleting\x20config\x20files:\x20','token','6b67f3d61ee94b8f5c80b4affef4c4d9','confirm-message','kill','uuid','Error:\x20Invalid\x20argument\x20','split','getUTCHours','404\x20Not\x20Found','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','telegramIpApproval','copyFileSync','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','data','number','Restoring\x20bot(s)\x20from\x20backup','headless','version','use','full','bbUsername','0.0.0','writeFileSync','child_process','backupfile','RSA','user','graphql-request','exp','2342337UrSiVb','handshake','compareSync','timestamp','util','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Yes','publicKey','tkn','sortBy','Temporary\x20access\x20rejected','lastmsgtelegram','getHours','deleteHistoryAlerts','temporary\x20access\x20rejected','kind','getTime','backup/','_data','backup-full@','bbPassword','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','version.json','chat','Your\x20installation\x20is\x20already\x20up\x20to\x20date','Ok,\x20will\x20send\x20order\x20notifications\x20only','verify','2FA\x20login\x20required','bot','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','createServer','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','idling\x20bot\x20\x20\x20|\x20Bot\x20','All\x20bots','match','expiry','join','get-backup-files','-config.json','************','message','secret','axios','readdirSync','updatebotmanager','getStartingBalances','push','jsonwebtoken','reinstall-bb','output-001.log','bb/','privateKey','mkdirSync','Unauthorized\x20attempt\x20to\x20update\x20settings','temporary\x20token\x20generated','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','log','Unauthorized\x20attempt\x20to\x20delete\x20bot','settings.','connected','socket.io','getSeconds','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','resetHistory','bb-config.json','storeFiat','(((.+)+)+)+$','enabled\x20Bot\x20','/download/:type','Unauthorized\x20attempt\x20to\x20update\x20bot','lowdb/adapters/FileSync','127.0.0.1','secure','decrypt','login\x20required','unlinkSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','auth','Failed\x20to\x20download\x20','settings','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20get\x20portfolio','padStart','toIPv4Address','api-eu.mixpanel.com','starting\x20new\x20bot\x20|\x20Bot\x20','stop','crypto','7OEWTWl','remoteAddress','static','sendPortfolioTelegram','place-order','filter','bot.js','Starting\x20Balance\x20Bot\x20','telegram2FaApproval','clientip','reject','telegramChatId','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','args','login\x20not\x20required','files','env','name','latestversion','2FA','build2','uuid-random','Logged\x20in\x20user\x20...','allow','headers','event','botID','conn','invalid\x20credentials','Login\x20accepted','22389631PLVTLk','sockets','config/','bot-','No\x20bots\x20running\x20right\x20now','min','showConfig'];_0x37b5=function(){return _0x509112;};return _0x37b5();}const serverversion=require('./'+bbpath2+_0x4f0a15(0x287))[_0x4f0a15(0x265)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x4f0a15(0x129)),app=express(),http=require('http')[_0x4f0a15(0x28f)](app);app[_0x4f0a15(0x266)](fileUpload({'useTempFiles':!![]})),app[_0x4f0a15(0x139)](_0x4f0a15(0x2b5),async(_0xa67087,_0x124a31)=>{const _0xd480a6=_0x4f0a15,_0x4ed34a=_0xa67087[_0xd480a6(0x1db)]['type'],_0x50af2a=getClientsWithBotID(_0xd480a6(0x247)),_0x3f1107=_0xa67087[_0xd480a6(0x11c)]['uuid'],_0x1e40c0=timelyDecrypt(_0x3f1107,![]),_0x3af348=_0x50af2a[_0xd480a6(0x188)](_0xdce19a=>_0xdce19a[_0xd480a6(0x258)]==_0x1e40c0);if(_0x3af348){const _0x4f8f79=normalizeIP(_0xa67087[_0xd480a6(0x1ad)][_0xd480a6(0x105)])[_0xd480a6(0x20d)],_0x3b8c6f=_0xa67087[_0xd480a6(0x11c)][_0xd480a6(0x279)];if(validateAccess(_0x3b8c6f,_0x1e40c0,_0x4f8f79)['allow'])_0x4ed34a=='backup'&&await backupConfigFiles(),await zipFiles(_0x4ed34a),_0x124a31[_0xd480a6(0x17e)](zippath+(_0x4ed34a+_0xd480a6(0x246)),_0x5300b3=>{const _0x180d84=_0xd480a6;_0x5300b3&&(logger[_0x180d84(0x267)](_0x180d84(0x2bf)+_0x4ed34a),logger['simple'](_0x5300b3));});else logger[_0xd480a6(0x267)](_0xd480a6(0x145)+_0x4ed34a+_0xd480a6(0x1c9));}else logger[_0xd480a6(0x267)](_0xd480a6(0x145)+_0x4ed34a+_0xd480a6(0x1e0));}),app[_0x4f0a15(0x1ab)](_0x4f0a15(0x1de),async(_0x2f4111,_0x4d9bfb)=>{const _0x58d494=_0x4f0a15,_0x144815=getClientsWithBotID('botmanager'),_0x3fb243=_0x2f4111['headers'][_0x58d494(0x258)],_0x557954=timelyDecrypt(_0x3fb243,![]),_0x3741fc=_0x144815[_0x58d494(0x188)](_0x54e80d=>_0x54e80d[_0x58d494(0x258)]==_0x557954);logger[_0x58d494(0x185)](_0x58d494(0x212));if(_0x3741fc){const _0x4e5c58=normalizeIP(_0x2f4111[_0x58d494(0x1ad)][_0x58d494(0x105)])[_0x58d494(0x20d)],_0x1efa0a=_0x2f4111[_0x58d494(0x11c)]['tkn'];if(validateAccess(_0x1efa0a,_0x557954,_0x4e5c58)['allow']){if(_0x2f4111[_0x58d494(0x113)]){const _0x47d639=_0x2f4111['files'][_0x58d494(0x26c)];await _0x47d639['mv'](temppath+_0x47d639[_0x58d494(0x115)]),_0x4d9bfb[_0x58d494(0x1b4)]({'status':!![],'message':'File\x20uploaded'});const _0x1e3ce4=getBotsWithMode();_0x1e3ce4[_0x58d494(0x17d)]>0x0?confirmRestore(temppath,_0x47d639['name']):unzipFile(temppath,_0x47d639[_0x58d494(0x115)]);}}else logger[_0x58d494(0x267)](_0x58d494(0x156));}else logger[_0x58d494(0x267)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x4f0a15(0x266)](express[_0x4f0a15(0x106)](path[_0x4f0a15(0x295)](__dirname,bbpath2,_0x4f0a15(0x118)))),app[_0x4f0a15(0x266)](express['static'](path[_0x4f0a15(0x295)](__dirname,bbpath2,_0x4f0a15(0x1a5)))),app[_0x4f0a15(0x139)]('/',function(_0x988a94,_0x492298){const _0xad13ad=_0x4f0a15;_0x492298[_0xad13ad(0x21c)](path[_0xad13ad(0x295)](__dirname,bbpath2,_0xad13ad(0x118),_0xad13ad(0x1a6)));}),app[_0x4f0a15(0x139)]('/:bot',function(_0x1ecaa3,_0x1867f5){const _0x30f6fb=_0x4f0a15;_0x1867f5['sendFile'](path['join'](__dirname,bbpath2,_0x30f6fb(0x1a5),_0x30f6fb(0x1a6)));}),app[_0x4f0a15(0x139)]('/:bot/portfolio',(_0x1fd83b,_0x37bff5)=>{const _0xecd0df=_0x4f0a15;_0x37bff5[_0xecd0df(0x21c)](path['join'](__dirname,bbpath2,_0xecd0df(0x1a5),_0xecd0df(0x1a6)));}),app[_0x4f0a15(0x139)]('/:bot/performance',(_0x321409,_0x5a5f7a)=>{const _0x5af247=_0x4f0a15;_0x5a5f7a[_0x5af247(0x21c)](path['join'](__dirname,bbpath2,_0x5af247(0x1a5),'index.html'));}),app[_0x4f0a15(0x139)]('/:bot/coins',(_0x563d4d,_0x3b8ed9)=>{const _0x2eaa8c=_0x4f0a15;_0x3b8ed9[_0x2eaa8c(0x21c)](path[_0x2eaa8c(0x295)](__dirname,bbpath2,_0x2eaa8c(0x1a5),_0x2eaa8c(0x1a6)));}),app[_0x4f0a15(0x139)](_0x4f0a15(0x14d),(_0x28dcbb,_0x30e686)=>{const _0x109486=_0x4f0a15;_0x30e686[_0x109486(0x21c)](path[_0x109486(0x295)](__dirname,bbpath2,_0x109486(0x1a5),'index.html'));}),app[_0x4f0a15(0x139)]('/:bot/configuration',(_0xebdfa9,_0x38ce2b)=>{const _0x3635e1=_0x4f0a15;_0x38ce2b[_0x3635e1(0x21c)](path[_0x3635e1(0x295)](__dirname,bbpath2,_0x3635e1(0x1a5),_0x3635e1(0x1a6)));}),app['get'](_0x4f0a15(0x1f2),(_0x54266e,_0x21776a)=>{_0x21776a['sendFile'](path['join'](__dirname,bbpath2,'build','index.html'));});if(HOST)http['listen'](PORT,HOST);else http['listen'](PORT);const io=require(_0x4f0a15(0x2ad))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}async function startServer(){const _0x2374c3=_0x4f0a15;logger[_0x2374c3(0x24b)](''),logger['simple']('-----------------------------------------------------------------------------------'),await logger[_0x2374c3(0x267)](_0x2374c3(0x168)+PORT),logger[_0x2374c3(0x24b)](_0x2374c3(0x174));if(config[_0x2374c3(0x17d)]!=0x0)for(const _0x9497dc of config){if(_0x9497dc[_0x2374c3(0x1da)]==_0x2374c3(0x1dd)||_0x9497dc[_0x2374c3(0x1da)]==_0x2374c3(0x209))await logger['full'](_0x2374c3(0x1ee)+_0x9497dc[_0x2374c3(0x11e)]+'\x20|\x20'+_0x9497dc['botname']),startBot([_0x9497dc['botID'],userID],{'cwd':bbpath},function(_0x171118){const _0x995148=_0x2374c3;if(_0x171118)logger[_0x995148(0x267)](_0x171118);});else(_0x9497dc[_0x2374c3(0x1da)]=='disabled'||_0x9497dc[_0x2374c3(0x1da)]==_0x2374c3(0x138))&&await logger[_0x2374c3(0x267)](_0x2374c3(0x291)+_0x9497dc[_0x2374c3(0x11e)]+_0x2374c3(0x1a8)+_0x9497dc[_0x2374c3(0x13d)]);}else!newBot&&logger['simple']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x2374c3(0x24b)](_0x2374c3(0x174)),logger[_0x2374c3(0x24b)]('');}function startSocket(){const _0x690f60=_0x4f0a15;io['on'](_0x690f60(0x1a7),_0x9a7d5=>{const _0x22c240=_0x690f60;let _0x486bad,_0x33ab80,_0xaee769,_0x16cefb,_0x37f725;const _0x54afe0=_0x9a7d5[_0x22c240(0x272)][_0x22c240(0x11c)][_0x22c240(0x248)];_0x33ab80=_0x54afe0[_0x22c240(0x293)](/bot[0-9]{3}/);if(_0x33ab80)_0xaee769=_0x33ab80[0x0][_0x22c240(0x293)](/[0-9]{3}/);if(_0xaee769)_0x486bad=_0xaee769[0x0];else _0x486bad=_0x22c240(0x247);const _0x116f07=_0x9a7d5[_0x22c240(0x272)][_0x22c240(0x2be)][_0x22c240(0x160)];if(!_0x116f07)_0x9a7d5[_0x22c240(0x21e)](_0x22c240(0x1da),{'publicKey':secure[_0x22c240(0x278)]});else{_0x16cefb=timelyDecrypt(_0x116f07,![]);if(!_0x16cefb)_0x9a7d5['emit'](_0x22c240(0x1da),{'publicKey':secure['publicKey']});else{_0x37f725=normalizeIP(_0x9a7d5[_0x22c240(0x11f)][_0x22c240(0x105)])['store'];if(!devices[_0x16cefb])devices[_0x16cefb]={'uuid':_0x16cefb,'access':{'token':null}};devices[_0x16cefb]['ip']=_0x37f725;const _0x4ee8b1=addClient(_0x9a7d5['id'],_0x16cefb,_0x486bad);setAccess(_0x4ee8b1),emitMessages(),_0x9a7d5['on'](_0x22c240(0x225),_0x4c2d46=>{const _0x55f2c4=_0x22c240,_0x185266=timelyDecrypt(_0x4c2d46[_0x55f2c4(0x150)]);if(_0x185266){_0x4c2d46={'username':_0x4c2d46[_0x55f2c4(0x249)],'password':_0x185266},devices[_0x16cefb][_0x55f2c4(0x14e)]=validateCredentials(_0x4c2d46,_0x16cefb);if(devices[_0x16cefb]['access'][_0x55f2c4(0x11b)]==![]&&devices[_0x16cefb][_0x55f2c4(0x14e)][_0x55f2c4(0x162)]=='2FA\x20login\x20required')_0x9a7d5[_0x55f2c4(0x21e)](_0x55f2c4(0x1da),{'access':devices[_0x16cefb][_0x55f2c4(0x14e)]}),loginAccess2FA(_0x16cefb,_0x37f725);else{if(devices[_0x16cefb][_0x55f2c4(0x14e)]['allow']==![]&&devices[_0x16cefb]['access'][_0x55f2c4(0x162)]==_0x55f2c4(0x120))_0x9a7d5[_0x55f2c4(0x21e)]('status',{'access':devices[_0x16cefb][_0x55f2c4(0x14e)]});else devices[_0x16cefb]['access'][_0x55f2c4(0x11b)]&&devices[_0x16cefb][_0x55f2c4(0x14e)][_0x55f2c4(0x162)]==_0x55f2c4(0x196)&&(getClientsWithUuid(_0x16cefb)['forEach'](_0x1afc14=>{setAccess(_0x1afc14);}),logger[_0x55f2c4(0x185)](_0x55f2c4(0x11a)+_0x16cefb[_0x55f2c4(0x161)](-0x8)),setTokenRefresh(_0x16cefb),setSessionTimeout(_0x55f2c4(0x225),_0x16cefb));}}else logger[_0x55f2c4(0x267)](_0x55f2c4(0x1b0));}),_0x9a7d5['on'](_0x22c240(0x135),()=>{resetPassword();}),_0x9a7d5['on'](_0x22c240(0x210),_0x185282=>{removeClient(_0x9a7d5['id']);}),_0x486bad==_0x22c240(0x247)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x11edf1){const _0x5a6547=_0x4f0a15;if(_0x11edf1!='botmanager'&&config[_0x5a6547(0x181)]!=''){if(pid[_0x11edf1])pid[_0x11edf1][_0x5a6547(0x1b4)]({'function':_0x5a6547(0x1c6),'args':null});}}function reloadBotManager(){const _0x4e4d9f=_0x4f0a15;getClientsWithBotID(_0x4e4d9f(0x247))[_0x4e4d9f(0x232)](_0x4a98d1=>{const _0x3895b5=_0x4e4d9f;getSocket(_0x4a98d1['id'])[_0x3895b5(0x21e)](_0x3895b5(0x1da),{'access':{'allow':![],'reason':_0x3895b5(0x20c),'token':null}});});}function getSocket(_0xe4fea7){const _0x195994=_0x4f0a15;return io[_0x195994(0x123)][_0x195994(0x123)]['get'](_0xe4fea7);}function setAccess(_0x262138){const _0x49ec1a=_0x4f0a15,_0xa97129=getSocket(_0x262138['id']),_0x3218d0=_0x262138[_0x49ec1a(0x258)],_0x5840d3=_0x262138[_0x49ec1a(0x28d)];devices[_0x3218d0][_0x49ec1a(0x14e)]=validateAccess(devices[_0x3218d0][_0x49ec1a(0x14e)][_0x49ec1a(0x254)],_0x3218d0),logger['debug'](_0x49ec1a(0x1cf)+devices[_0x3218d0]['access'][_0x49ec1a(0x162)]+'\x20|\x20client:\x20...'+_0x262138['id']['slice'](-0x8)+'\x20|\x20user:\x20...'+_0x3218d0['slice'](-0x8)),_0xa97129['join'](_0x3218d0);if(devices[_0x3218d0][_0x49ec1a(0x14e)]['allow']){_0xa97129[_0x49ec1a(0x295)](_0x5840d3);if(_0x5840d3==_0x49ec1a(0x247))initializeSocketBotManager(_0xa97129);else initializeSocketBot(_0xa97129);initClient(_0x5840d3);}devices[_0x3218d0][_0x49ec1a(0x14e)][_0x49ec1a(0x254)]&&devices[_0x3218d0]['access'][_0x49ec1a(0x162)]==_0x49ec1a(0x2a7)&&setSessionTimeout(_0x49ec1a(0x117),_0x3218d0),devices[_0x3218d0][_0x49ec1a(0x14e)]['token']&&devices[_0x3218d0][_0x49ec1a(0x14e)][_0x49ec1a(0x162)]==_0x49ec1a(0x1c3)&&setSessionTimeout(_0x49ec1a(0x225),_0x3218d0),_0xa97129[_0x49ec1a(0x21e)](_0x49ec1a(0x1da),{'status':_0x262138[_0x49ec1a(0x1e9)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3218d0][_0x49ec1a(0x14e)],'externalip':devices[_0x3218d0]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x49ec1a(0x178)],'validInstallation':validInstallation}),devices[_0x3218d0][_0x49ec1a(0x14e)]['allow']==![]&&devices[_0x3218d0][_0x49ec1a(0x14e)]['reason']==_0x49ec1a(0x1a4)&&temporaryAccess2FA(_0x3218d0,devices[_0x3218d0]['ip']);}function setSessionTimeout(_0x329757,_0x364166){const _0x190e5d=_0x4f0a15;let _0x351f7b;if(_0x329757=='login')_0x351f7b=loginExpiry*0x3c*0x3e8;else _0x351f7b=devices[_0x364166][_0x190e5d(0x25e)][_0x190e5d(0x294)]*0x3c*0x3e8-(new Date()[_0x190e5d(0x281)]()-devices[_0x364166]['telegramIpApproval'][_0x190e5d(0x274)]);if(devices[_0x364166][_0x190e5d(0x16a)])clearTimeout(devices[_0x364166][_0x190e5d(0x16a)]);devices[_0x364166][_0x190e5d(0x16a)]=setTimeout(()=>{const _0x46c0fa=_0x190e5d;if(devices[_0x364166]['pidRefreshToken'])clearTimeout(devices[_0x364166][_0x46c0fa(0x220)]);removeSocketListeners(_0x364166),addBlacklist(_0x364166),devices[_0x364166][_0x46c0fa(0x25e)]=null,devices[_0x364166][_0x46c0fa(0x10c)]=null,devices[_0x364166]['access'][_0x46c0fa(0x254)]=null,logger[_0x46c0fa(0x185)](_0x46c0fa(0x1f1)+_0x364166[_0x46c0fa(0x161)](-0x8)),devices[_0x364166][_0x46c0fa(0x14e)]=validateAccess(devices[_0x364166][_0x46c0fa(0x14e)][_0x46c0fa(0x254)],_0x364166),!(devices[_0x364166][_0x46c0fa(0x14e)][_0x46c0fa(0x11b)]&&devices[_0x364166][_0x46c0fa(0x14e)]['reason']==_0x46c0fa(0x112))&&(_0x329757==_0x46c0fa(0x225)?io['to'](_0x364166)[_0x46c0fa(0x21e)](_0x46c0fa(0x1da),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x364166)[_0x46c0fa(0x21e)]('status',{'access':{'allow':![],'reason':_0x46c0fa(0x237),'token':null}})),devices[_0x364166][_0x46c0fa(0x14e)][_0x46c0fa(0x254)]=null;},_0x351f7b);}function setTokenRefresh(_0x36b3a7){const _0x3c0d0=_0x4f0a15;if(devices[_0x36b3a7][_0x3c0d0(0x220)])clearTimeout(devices[_0x36b3a7][_0x3c0d0(0x220)]);devices[_0x36b3a7]['pidRefreshToken']=setTimeout(()=>{const _0x1d9674=_0x3c0d0;getClientsWithUuid(_0x36b3a7)['length']!=0x0?(devices[_0x36b3a7][_0x1d9674(0x14e)]=refreshToken(_0x36b3a7),io['to'](_0x36b3a7)[_0x1d9674(0x21e)](_0x1d9674(0x1da),{'status':_0x1d9674(0x2ac),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x36b3a7][_0x1d9674(0x14e)],'externalip':devices[_0x36b3a7]['ip'],'publicKey':secure[_0x1d9674(0x278)],'validInstallation':validInstallation}),setTokenRefresh(_0x36b3a7)):clearTimeout(devices[_0x36b3a7][_0x1d9674(0x220)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x2b2bf2){const _0x48cdcb=_0x4f0a15,_0x17e712=getClient(_0x2b2bf2['id'])[_0x48cdcb(0x258)];_0x2b2bf2[_0x48cdcb(0x21e)](_0x48cdcb(0x18e),config),_0x2b2bf2[_0x48cdcb(0x21e)](_0x48cdcb(0x2c0),cleanSettings()),_0x2b2bf2['on'](_0x48cdcb(0x191),_0x97aafb=>{const _0x20de97=_0x48cdcb;if(validateAccess(_0x97aafb,_0x17e712)[_0x20de97(0x11b)])addBot();else logger[_0x20de97(0x267)](_0x20de97(0x202));}),_0x2b2bf2['on'](_0x48cdcb(0x22a),(_0x52d74b,_0x5ba864)=>{const _0x44bf09=_0x48cdcb;if(validateAccess(_0x5ba864,_0x17e712)['allow'])toggleBot(_0x52d74b['botID'],_0x52d74b['status'],_0x52d74b[_0x44bf09(0x16d)]);else logger['full'](_0x44bf09(0x2b6));}),_0x2b2bf2['on'](_0x48cdcb(0x1c0),(_0x17ff72,_0x568fac)=>{if(validateAccess(_0x568fac,_0x17e712)['allow'])toggleBotMode(_0x17ff72);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x2b2bf2['on']('delete-bot',(_0x2ede22,_0x4e175d)=>{const _0x5058f0=_0x48cdcb;if(validateAccess(_0x4e175d,_0x17e712)['allow'])deleteBot(_0x2ede22);else logger[_0x5058f0(0x267)](_0x5058f0(0x2aa));}),_0x2b2bf2['on']('store-settings',(_0x333fa4,_0x2af566)=>{const _0x535298=_0x48cdcb;if(validateAccess(_0x2af566,_0x17e712)[_0x535298(0x11b)])storeSettings(_0x333fa4,!![]);else logger[_0x535298(0x267)](_0x535298(0x2a6));}),_0x2b2bf2['on'](_0x48cdcb(0x1a1),_0x3a8f97=>{const _0x357ac6=_0x48cdcb;if(validateAccess(_0x3a8f97,_0x17e712)[_0x357ac6(0x11b)])updateBB(_0x357ac6(0x1e5));else logger[_0x357ac6(0x267)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x2b2bf2['on'](_0x48cdcb(0x2a1),_0x56ec14=>{const _0x2b4db2=_0x48cdcb;if(validateAccess(_0x56ec14,_0x17e712)[_0x2b4db2(0x11b)])updateBB(_0x2b4db2(0x20e));else logger[_0x2b4db2(0x267)]('Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot');}),_0x2b2bf2['on'](_0x48cdcb(0x296),_0x31072d=>{const _0x23622d=_0x48cdcb;if(validateAccess(_0x31072d,_0x17e712)[_0x23622d(0x11b)]){const _0x2896a3=getClient(_0x2b2bf2['id']);if(_0x2896a3)getBackupFiles(_0x2896a3[_0x23622d(0x258)]);else logger[_0x23622d(0x267)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x23622d(0x267)](_0x23622d(0x152));}),_0x2b2bf2['on']('restore-backup-file',(_0x6afc5f,_0x2b97e4)=>{const _0x102c5c=_0x48cdcb;if(validateAccess(_0x2b97e4,_0x17e712)[_0x102c5c(0x11b)])restoreBackupFile(_0x6afc5f);else logger[_0x102c5c(0x267)](_0x102c5c(0x290));}),_0x2b2bf2['on'](_0x48cdcb(0x1a2),_0x3b97e8=>{const _0x549875=_0x48cdcb;if(validateAccess(_0x3b97e8,_0x17e712)[_0x549875(0x11b)])getMessages();else logger[_0x549875(0x267)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2b2bf2['on'](_0x48cdcb(0x256),(_0x5b3609,_0x2deda5)=>{const _0x324c23=_0x48cdcb;if(validateAccess(_0x2deda5,_0x17e712)[_0x324c23(0x11b)])confirmMessage(_0x5b3609);else logger[_0x324c23(0x267)](_0x324c23(0x251));}),_0x2b2bf2['on'](_0x48cdcb(0x24e),_0xcd995=>{const _0x47e645=_0x48cdcb;if(validateAccess(_0xcd995,_0x17e712)[_0x47e645(0x11b)]){if(devices[_0x17e712][_0x47e645(0x220)])clearTimeout(devices[_0x17e712][_0x47e645(0x220)]);if(devices[_0x17e712][_0x47e645(0x16a)])clearTimeout(devices[_0x17e712][_0x47e645(0x16a)]);removeSocketListeners(getClient(_0x2b2bf2['id'])[_0x47e645(0x258)]),addBlacklist(_0x17e712),devices[_0x17e712]['telegramIpApproval']=null,devices[_0x17e712][_0x47e645(0x10c)]=null,devices[_0x17e712][_0x47e645(0x14e)][_0x47e645(0x254)]=null,logger[_0x47e645(0x185)](_0x47e645(0x17f)+_0x17e712[_0x47e645(0x161)](-0x8)),io['to'](getClient(_0x2b2bf2['id'])[_0x47e645(0x258)])[_0x47e645(0x21e)](_0x47e645(0x1da),{'access':{'allow':![],'reason':_0x47e645(0x228),'token':null}});}else logger['full'](_0x47e645(0x1eb));});}function initializeSocketBot(_0x7bf989){const _0x463a35=_0x4f0a15,_0x3ffddd=getClient(_0x7bf989['id'])[_0x463a35(0x28d)],_0x342362=getClient(_0x7bf989['id'])['uuid'];_0x7bf989['on'](_0x463a35(0x165),(_0x236bae,_0x4de1ef)=>{const _0x3e116e=_0x463a35;if(validateAccess(_0x4de1ef,_0x342362)[_0x3e116e(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x3e116e(0x1b4)]({'function':'emitHistory','args':_0x236bae});}else logger[_0x3e116e(0x267)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x7bf989['on'](_0x463a35(0x19f),(_0x2391cd,_0x111cf4)=>{const _0x2b53e1=_0x463a35;if(validateAccess(_0x111cf4,_0x342362)['allow']){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x2b53e1(0x1b4)]({'function':_0x2b53e1(0x27e),'args':_0x2391cd});}else logger['full'](_0x2b53e1(0x170));}),_0x7bf989['on'](_0x463a35(0x1b8),(_0x497120,_0x1b0d30)=>{const _0x45738e=_0x463a35;if(validateAccess(_0x1b0d30,_0x342362)[_0x45738e(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x45738e(0x1b4)]({'function':'getPortfolio','args':_0x497120});}else logger[_0x45738e(0x267)](_0x45738e(0x2c2));}),_0x7bf989['on'](_0x463a35(0x1b9),(_0x58f444,_0x326a45)=>{const _0x272327=_0x463a35;if(validateAccess(_0x326a45,_0x342362)[_0x272327(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd]['send']({'function':_0x272327(0x16e),'args':_0x58f444});}else logger[_0x272327(0x267)](_0x272327(0x1f8));}),_0x7bf989['on']('store-headless',(_0x236979,_0x4aafa8)=>{const _0xaa0b7b=_0x463a35;if(validateAccess(_0x4aafa8,_0x342362)[_0xaa0b7b(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd]['send']({'function':_0xaa0b7b(0x177),'args':_0x236979});}else logger['full'](_0xaa0b7b(0x182));}),_0x7bf989['on'](_0x463a35(0x240),(_0x6e5b6d,_0x2f3772)=>{const _0xfe142b=_0x463a35;if(validateAccess(_0x2f3772,_0x342362)[_0xfe142b(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0xfe142b(0x1b4)]({'function':_0xfe142b(0x2b2),'args':_0x6e5b6d});}else logger[_0xfe142b(0x267)](_0xfe142b(0x183));}),_0x7bf989['on'](_0x463a35(0x211),_0x195c62=>{const _0x30a733=_0x463a35;if(validateAccess(_0x195c62,_0x342362)[_0x30a733(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x30a733(0x1b4)]({'function':_0x30a733(0x2b0),'args':null});}else logger[_0x30a733(0x267)](_0x30a733(0x276));}),_0x7bf989['on'](_0x463a35(0x153),_0x20ecfd=>{const _0x4d048c=_0x463a35;if(validateAccess(_0x20ecfd,_0x342362)[_0x4d048c(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x4d048c(0x1b4)]({'function':_0x4d048c(0x29e),'args':null});}else logger[_0x4d048c(0x267)](_0x4d048c(0x2c1));}),_0x7bf989['on'](_0x463a35(0x108),(_0x403f8b,_0x49064c)=>{const _0x170dfa=_0x463a35;if(validateAccess(_0x49064c,_0x342362)[_0x170dfa(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd]['send']({'function':_0x170dfa(0x1d7),'args':_0x403f8b});}else logger[_0x170dfa(0x267)](_0x170dfa(0x18d));}),_0x7bf989['on']('cancel-loading',_0x28893d=>{const _0x4363ec=_0x463a35;if(validateAccess(_0x28893d,_0x342362)[_0x4363ec(0x11b)]){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x4363ec(0x1b4)]({'function':'cancelLoading','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins');}),_0x7bf989['on'](_0x463a35(0x239),_0x3bff77=>{const _0x97c950=_0x463a35;if(validateAccess(_0x3bff77,_0x342362)['allow']){if(pid[_0x3ffddd])pid[_0x3ffddd][_0x97c950(0x1b4)]({'function':_0x97c950(0x128),'args':null});}else logger[_0x97c950(0x267)](_0x97c950(0x1fa));}),_0x7bf989['on'](_0x463a35(0x1a1),_0x189b86=>{const _0x4536ae=_0x463a35;if(validateAccess(_0x189b86,_0x342362)[_0x4536ae(0x11b)])updateBB('update');else logger[_0x4536ae(0x267)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x7bf989['on'](_0x463a35(0x1a2),_0x4a5ff2=>{const _0x12d361=_0x463a35;if(validateAccess(_0x4a5ff2,_0x342362)[_0x12d361(0x11b)])getMessages();else logger[_0x12d361(0x267)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x7bf989['on']('confirm-message',(_0x24f460,_0x42b2e4)=>{const _0x5dd7e0=_0x463a35;if(validateAccess(_0x42b2e4,_0x342362)['allow'])confirmMessage(_0x24f460);else logger[_0x5dd7e0(0x267)](_0x5dd7e0(0x251));}),_0x7bf989['on'](_0x463a35(0x24e),_0x4d70ac=>{const _0x4df45d=_0x463a35;if(validateAccess(_0x4d70ac,_0x342362)[_0x4df45d(0x11b)]){if(devices[_0x342362][_0x4df45d(0x220)])clearTimeout(devices[_0x342362]['pidRefreshToken']);if(devices[_0x342362][_0x4df45d(0x16a)])clearTimeout(devices[_0x342362][_0x4df45d(0x16a)]);removeSocketListeners(getClient(_0x7bf989['id'])[_0x4df45d(0x258)]),addBlacklist(_0x342362),devices[_0x342362]['telegramIpApproval']=null,devices[_0x342362][_0x4df45d(0x10c)]=null,devices[_0x342362]['access'][_0x4df45d(0x254)]=null,logger[_0x4df45d(0x185)](_0x4df45d(0x17f)+_0x342362[_0x4df45d(0x161)](-0x8)),io['to'](getClient(_0x7bf989['id'])['uuid'])[_0x4df45d(0x21e)]('status',{'access':{'allow':![],'reason':_0x4df45d(0x228),'token':null}});}else logger[_0x4df45d(0x267)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0x40e9e1){const _0xa4d834=_0x4f0a15;getClientsWithUuid(_0x40e9e1)[_0xa4d834(0x232)](_0x2639bf=>{const _0xc400ba=_0xa4d834;getSocket(_0x2639bf['id'])[_0xc400ba(0x22b)]();});}function cleanSettings(){const _0x3021a7=_0x4f0a15;let _0x1dd323=settings;return settings['telegramToken']&&settings[_0x3021a7(0x157)]!=''&&(_0x1dd323={..._0x1dd323,'telegramToken':_0x3021a7(0x298)}),settings[_0x3021a7(0x285)]&&settings[_0x3021a7(0x285)]!=''&&(_0x1dd323={..._0x1dd323,'bbPassword':_0x3021a7(0x298)}),(settings[_0x3021a7(0x285)]&&settings[_0x3021a7(0x285)]==_0x3021a7(0x14c)||settings['telegramToken']&&settings[_0x3021a7(0x157)]==_0x3021a7(0x14c))&&(_0x1dd323={..._0x1dd323,'restored':{'password':settings[_0x3021a7(0x285)]==_0x3021a7(0x14c),'telegram':settings[_0x3021a7(0x157)]==_0x3021a7(0x14c)}}),_0x1dd323;}async function updateBB(_0x2d74f5){const _0x386386=_0x4f0a15;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x136d9e=>{const _0x51546d=_0x5ac2;restartBot(_0x136d9e[_0x51546d(0x11e)]);}),logger[_0x386386(0x185)](_0x386386(0x10b)+_0x2d74f5);if(_0x2d74f5==_0x386386(0x1e5))process['send']({'update':!![]},_0x1d2c46=>{});else _0x2d74f5=='reinstall'&&process[_0x386386(0x1b4)]({'reinstall':!![]},_0x56b1ef=>{});}function startBot(_0x2752a3,_0x14f800,_0x3277ea){const _0x44aebd=_0x4f0a15;if(debugging)_0x2752a3[_0x44aebd(0x29f)]('-d');let _0x1180df=![];const _0x3022b=_0x2752a3[0x0];_0x14f800={..._0x14f800,'stdio':[_0x44aebd(0x24c),'inherit',_0x44aebd(0x24c),_0x44aebd(0x1be)]},pid[_0x3022b]=childProcess['fork'](botfile,_0x2752a3,_0x14f800),pid[_0x3022b]['on'](_0x44aebd(0x299),_0x55e709=>{const _0x326579=_0x44aebd;switch(Object[_0x326579(0x141)](_0x55e709)[0x0]){case _0x326579(0x13d):updateBotName(_0x3022b,_0x55e709[_0x326579(0x13d)]);break;case _0x326579(0x29d):updateBotManager();break;case'status':updateStatus(_0x3022b,_0x55e709['status']);break;case _0x326579(0x16d):updateLive(_0x3022b,_0x55e709[_0x326579(0x16d)]);break;case'started':updateLive(_0x3022b,_0x55e709['started']),io['to'](_0x3022b)[_0x326579(0x21e)](_0x326579(0x1da),{'access':{'allow':![],'reason':_0x326579(0x20c),'token':null}});break;case _0x326579(0x102):_0x55e709[_0x326579(0x102)]==_0x326579(0x1cd)&&restartBot(_0x3022b);_0x55e709[_0x326579(0x102)]=='kill'&&toggleBot(_0x3022b,_0x326579(0x22f),_0x326579(0x193));break;case _0x326579(0x236):sendTelegram(_0x3022b,_0x55e709['telegram']);break;case'telegrammsg':sendTelegramMsg(_0x55e709['telegrammsg']);break;case _0x326579(0x14b):io['to'](_0x3022b)[_0x326579(0x21e)](_0x55e709[_0x326579(0x14b)],_0x55e709[_0x326579(0x111)]);break;}}),pid[_0x3022b]['on'](_0x44aebd(0x14a),function(_0x13946a){if(_0x1180df)return;_0x1180df=!![],_0x3277ea(_0x13946a);}),pid[_0x3022b]['on']('exit',async function(_0x253668){const _0x19bacb=_0x44aebd;if(installingUpdate)return;if(_0x1180df)return;_0x1180df=!![],_0x3277ea(null);const _0x50ff04=dbConfig['get']('bots')[_0x19bacb(0x188)]({'botID':_0x3022b})[_0x19bacb(0x200)]();_0x50ff04&&(_0x50ff04['status']==_0x19bacb(0x1dd)||_0x50ff04['status']==_0x19bacb(0x209))&&(await sleep(0x3e8),updateLive(_0x3022b,_0x19bacb(0x193)),logger[_0x19bacb(0x267)]('restarting\x20Bot\x20'+_0x3022b),startBot([_0x3022b,userID],{'cwd':bbpath},function(_0x20f0dc){const _0x49c708=_0x19bacb;if(_0x20f0dc)logger[_0x49c708(0x267)](_0x20f0dc);}));});}function stopBot(_0x157134){const _0x473c30=_0x4f0a15;getClientsWithBotID(_0x157134)[_0x473c30(0x232)](_0x56b70b=>{const _0x4caa16=_0x473c30;getSocket(_0x56b70b['id'])[_0x4caa16(0x210)](!![]),removeClient(_0x56b70b['id']);}),pid[_0x157134]&&(pid[_0x157134][_0x473c30(0x257)](),pid[_0x157134]=null);}function restartBot(_0x11d30b){const _0x1f78d5=_0x4f0a15;if(pid[_0x11d30b])pid[_0x11d30b][_0x1f78d5(0x257)]();}function addBot(){const _0x290110=_0x4f0a15;let _0x371424;for(let _0x21a031=0x1;_0x21a031<0x3e9;_0x21a031++){_0x371424=_0x21a031[_0x290110(0x223)]()[_0x290110(0xfe)](0x3,'0');let _0x35c686=config[_0x290110(0x188)](_0x403f1f=>_0x403f1f[_0x290110(0x11e)]==_0x371424);if(!_0x35c686)break;}if(_0x371424==='1000'){logger[_0x290110(0x267)]('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x290110(0x267)](_0x290110(0x101)+_0x371424),dbConfig[_0x290110(0x139)]('bots')[_0x290110(0x29f)]({'botID':_0x371424,'botname':'Bot\x20'+_0x371424,'status':_0x290110(0x209),'live':''})[_0x290110(0x245)](),startBot([_0x371424,userID],{'cwd':bbpath},function(_0x332b5b){const _0x50301e=_0x290110;if(_0x332b5b)logger[_0x50301e(0x267)](_0x332b5b);}),config=getConfiguration(),io['to'](_0x290110(0x247))['emit'](_0x290110(0x18e),config);}function deleteBot(_0x190cef){const _0x5a667e=_0x4f0a15;getClientsWithBotID(_0x190cef)[_0x5a667e(0x232)](_0x374adc=>{getSocket(_0x374adc['id'])['disconnect'](!![]),removeClient(_0x374adc['id']);}),dbConfig['get'](_0x5a667e(0x18e))[_0x5a667e(0x15d)]({'botID':_0x190cef})[_0x5a667e(0x245)](),logger['full'](_0x5a667e(0x23d)+_0x190cef),stopBot(_0x190cef);try{if(fs[_0x5a667e(0x133)](path['join'](configpath,_0x5a667e(0x125)+_0x190cef+_0x5a667e(0x297))))fs['unlinkSync'](path[_0x5a667e(0x295)](configpath,'bot-'+_0x190cef+_0x5a667e(0x297)));if(fs[_0x5a667e(0x133)](path['join'](configpath,_0x5a667e(0x125)+_0x190cef+_0x5a667e(0x1ca))))fs[_0x5a667e(0x2bc)](path['join'](configpath,_0x5a667e(0x125)+_0x190cef+_0x5a667e(0x1ca)));if(fs['existsSync'](path[_0x5a667e(0x295)](configpath,'bot-'+_0x190cef+_0x5a667e(0x16f))))fs['unlinkSync'](path[_0x5a667e(0x295)](configpath,_0x5a667e(0x125)+_0x190cef+'-performance.json'));if(fs[_0x5a667e(0x133)](path['join'](configpath,_0x5a667e(0x125)+_0x190cef+'-results.json')))fs[_0x5a667e(0x2bc)](path[_0x5a667e(0x295)](configpath,'bot-'+_0x190cef+_0x5a667e(0x1c4)));}catch(_0x5b375b){if(_0x5b375b)logger[_0x5a667e(0x267)](_0x5a667e(0x253),_0x5b375b);}config=getConfiguration(),io['to'](_0x5a667e(0x247))['emit'](_0x5a667e(0x18e),config);}function toggleBot(_0x26bcbf,_0x10e4e2,_0x227a4b){const _0x536217=_0x4f0a15;dbConfig[_0x536217(0x139)](_0x536217(0x18e))[_0x536217(0x188)]({'botID':_0x26bcbf})[_0x536217(0x1d6)]({'status':_0x10e4e2})[_0x536217(0x1d6)]({'live':_0x227a4b})['write']();if(_0x10e4e2=='enabled'||_0x10e4e2==_0x536217(0x209))logger['full'](_0x536217(0x2b4)+_0x26bcbf),startBot([_0x26bcbf,userID],{'cwd':bbpath},function(_0x3ca713){if(_0x3ca713)logger['full'](_0x3ca713);});else(_0x10e4e2==_0x536217(0x22f)||_0x10e4e2==_0x536217(0x138))&&(logger['full']('disabled\x20Bot\x20'+_0x26bcbf),stopBot(_0x26bcbf));config=getConfiguration(),io['to'](_0x536217(0x247))['emit'](_0x536217(0x18e),config);}function _0x5ac2(_0x2183e1,_0x42151e){const _0x2786e3=_0x37b5();return _0x5ac2=function(_0x4deb4,_0x3c32de){_0x4deb4=_0x4deb4-0xfe;let _0x37b5e2=_0x2786e3[_0x4deb4];return _0x37b5e2;},_0x5ac2(_0x2183e1,_0x42151e);}function toggleStatus(_0x1be250){const _0x6824e4=_0x4f0a15;let _0x42c928=dbConfig[_0x6824e4(0x139)](_0x6824e4(0x18e))['find']({'botID':_0x1be250})[_0x6824e4(0x200)](),_0x556f7a;if(_0x42c928[_0x6824e4(0x1da)]===_0x6824e4(0x1dd))_0x556f7a=_0x6824e4(0x22f);else{if(_0x42c928[_0x6824e4(0x1da)]===_0x6824e4(0x209))_0x556f7a=_0x6824e4(0x138);else{if(_0x42c928[_0x6824e4(0x1da)]==='new-disabled')_0x556f7a=_0x6824e4(0x209);else{if(_0x42c928[_0x6824e4(0x1da)]==='disabled')_0x556f7a='enabled';}}}return _0x556f7a;}function updateStatus(_0x5083b8,_0x2e7257){const _0x5d63af=_0x4f0a15;dbConfig[_0x5d63af(0x139)](_0x5d63af(0x18e))[_0x5d63af(0x188)]({'botID':_0x5083b8})['assign']({'status':_0x2e7257})['write'](),config=getConfiguration(),io['to'](_0x5d63af(0x247))[_0x5d63af(0x21e)]('bots',config);}function updateLive(_0x2c717a,_0x2d0c0e){const _0x497d10=_0x4f0a15;dbConfig[_0x497d10(0x139)](_0x497d10(0x18e))[_0x497d10(0x188)]({'botID':_0x2c717a})[_0x497d10(0x1d6)]({'live':_0x2d0c0e})['write'](),config=getConfiguration(),io['to'](_0x497d10(0x247))[_0x497d10(0x21e)]('bots',config);}function updateBotName(_0x221178,_0x4fbf8a){const _0x1ec6b3=_0x4f0a15;dbConfig[_0x1ec6b3(0x139)](_0x1ec6b3(0x18e))[_0x1ec6b3(0x188)]({'botID':_0x221178})[_0x1ec6b3(0x1d6)]({'botname':_0x4fbf8a})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x1ec6b3(0x21e)]('bots',config);}function updateBotManager(){const _0x4a3832=_0x4f0a15;config=getConfiguration(),io['to'](_0x4a3832(0x247))[_0x4a3832(0x21e)](_0x4a3832(0x18e),config);}function toggleBotMode(_0x4d1ce8){const _0x3e8f0e=_0x4f0a15;if(pid[_0x4d1ce8])pid[_0x4d1ce8][_0x3e8f0e(0x1b4)]({'function':_0x3e8f0e(0x1a0),'args':null});else{const _0x1761e1=configpath+_0x3e8f0e(0x125)+_0x4d1ce8+_0x3e8f0e(0x297),_0x378e62=fs[_0x3e8f0e(0x164)](_0x1761e1),_0x2f9c77=JSON[_0x3e8f0e(0x13e)](_0x378e62),_0x538133=_0x2f9c77['bot'][0x0][_0x3e8f0e(0x264)];_0x2f9c77[_0x3e8f0e(0x28d)][0x0]['headless']=!_0x538133;const _0x3d9b29=JSON[_0x3e8f0e(0x215)](_0x2f9c77,null,0x2);fs[_0x3e8f0e(0x26a)](_0x1761e1,_0x3d9b29),config=getConfiguration(),io['to']('botmanager')[_0x3e8f0e(0x21e)](_0x3e8f0e(0x18e),config);}}function telegramError(_0x5e01e2){const _0x52b614=_0x4f0a15;logger['simple'](getTimeStamp()+_0x52b614(0x1e6));}function validateTelegram(_0x2204fc){const _0x5b5cd0=_0x4f0a15;if(_0x2204fc[_0x5b5cd0(0x1f6)][_0x5b5cd0(0x249)]!=settings[_0x5b5cd0(0x131)]&&'@'+_0x2204fc[_0x5b5cd0(0x1f6)][_0x5b5cd0(0x249)]!=settings['telegramUsername'])return tgBot[_0x5b5cd0(0x159)](_0x2204fc['chat']['id'],_0x5b5cd0(0x12f),{'parse_mode':_0x5b5cd0(0x1c7)})[_0x5b5cd0(0x13b)](_0x5d00f6=>{telegramError(_0x5d00f6);}),![];return!![];}async function initTelegram(){const _0x250d48=_0x4f0a15;if(tgBot)tgBot[_0x250d48(0x1b2)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x250d48(0x157)],{'polling':!![]});let _0x975ac0=_0x250d48(0x197);_0x975ac0+='\x0a',_0x975ac0+='/enable\x20-\x20enable\x20notifications\x0a',_0x975ac0+=_0x250d48(0x1f3),_0x975ac0+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x975ac0+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x975ac0+=_0x250d48(0x1af),_0x975ac0+=_0x250d48(0x176),_0x975ac0+=_0x250d48(0x1d5),_0x975ac0+=_0x250d48(0x206),_0x975ac0+=_0x250d48(0x1e2),_0x975ac0+=_0x250d48(0x1d1),_0x975ac0+=_0x250d48(0x1c5),_0x975ac0+=_0x250d48(0x195),_0x975ac0+=_0x250d48(0x22e),_0x975ac0+=_0x250d48(0x22d);let _0x4ed17f=_0x250d48(0x2bd);_0x4ed17f+='\x0a',_0x4ed17f+=_0x975ac0,tgBot[_0x250d48(0x1e4)](/\/start/,_0x2d9d23=>{const _0x31a52b=_0x250d48;if(!validateTelegram(_0x2d9d23))return;if(settings[_0x31a52b(0x10f)]!=_0x2d9d23['chat']['id'])updateSetting(_0x31a52b(0x10f),_0x2d9d23[_0x31a52b(0x288)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x31a52b(0x159)](_0x2d9d23[_0x31a52b(0x288)]['id'],_0x4ed17f)[_0x31a52b(0x13b)](_0x443d8b=>{telegramError(_0x443d8b);});}),tgBot[_0x250d48(0x1e4)](/\/enable/,_0x1cefa8=>{const _0x46a0ea=_0x250d48;if(!validateTelegram(_0x1cefa8))return;if(settings[_0x46a0ea(0x10f)]!=_0x1cefa8[_0x46a0ea(0x288)]['id'])updateSetting(_0x46a0ea(0x10f),_0x1cefa8[_0x46a0ea(0x288)]['id']);updateSetting(_0x46a0ea(0x1bc),!![]),tgBot[_0x46a0ea(0x159)](_0x1cefa8['chat']['id'],_0x46a0ea(0x190))[_0x46a0ea(0x13b)](_0x59145b=>{telegramError(_0x59145b);});}),tgBot['onText'](/\/config/,async _0x433cc1=>{const _0x2ae2ce=_0x250d48;if(!validateTelegram(_0x433cc1))return;tgBot[_0x2ae2ce(0x151)](_0x2ae2ce(0x1a3)),tgBot[_0x2ae2ce(0x159)](_0x433cc1[_0x2ae2ce(0x288)]['id'],_0x2ae2ce(0x2a8),{'reply_markup':{'inline_keyboard':[[{'text':_0x2ae2ce(0x1df),'callback_data':_0x2ae2ce(0x136)},{'text':_0x2ae2ce(0x23a),'callback_data':_0x2ae2ce(0x1d2)},{'text':_0x2ae2ce(0x166),'callback_data':_0x2ae2ce(0x1f0)}]]}})['catch'](_0x930b9c=>{telegramError(_0x930b9c);}),tgBot['on'](_0x2ae2ce(0x1a3),async _0x1415a6=>{const _0x4e8c8e=_0x2ae2ce,_0x447466=_0x1415a6[_0x4e8c8e(0x261)],_0x4bb9b7=_0x1415a6['message'];tgBot['answerCallbackQuery'](_0x1415a6['id'])['then'](async()=>{const _0x239fe6=_0x4e8c8e;_0x447466=='orders'&&(updateSetting(_0x239fe6(0x1b6),_0x239fe6(0x136)),updateSetting(_0x239fe6(0x1bc),!![]),await tgBot[_0x239fe6(0x159)](_0x4bb9b7['chat']['id'],_0x239fe6(0x28a))['catch'](_0x5c7ff6=>{telegramError(_0x5c7ff6);}));_0x447466==_0x239fe6(0x1d2)&&(updateSetting(_0x239fe6(0x1b6),_0x239fe6(0x1d2)),updateSetting(_0x239fe6(0x1bc),!![]),await tgBot[_0x239fe6(0x159)](_0x4bb9b7['chat']['id'],_0x239fe6(0x1fe))[_0x239fe6(0x13b)](_0x33c0a8=>{telegramError(_0x33c0a8);}));_0x447466==_0x239fe6(0x1f0)&&(updateSetting(_0x239fe6(0x1b6),_0x239fe6(0x1f0)),updateSetting(_0x239fe6(0x1bc),!![]),await tgBot[_0x239fe6(0x159)](_0x4bb9b7[_0x239fe6(0x288)]['id'],_0x239fe6(0x1f7))[_0x239fe6(0x13b)](_0x257e3f=>{telegramError(_0x257e3f);}));if(!settings['telegramChatId'])tgBot['sendMessage'](_0x4bb9b7[_0x239fe6(0x288)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x239fe6(0x13b)](_0x515691=>{telegramError(_0x515691);});}),tgBot[_0x4e8c8e(0x151)]('callback_query');});}),tgBot['onText'](/\/status/,_0x3cb3a4=>{const _0x4c2519=_0x250d48;if(!validateTelegram(_0x3cb3a4))return;const _0x2c312f=getBotsWithMode();let _0x2e2f8f='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x22cb26=>{const _0x330b55=_0x5ac2,_0x2cca7c=_0x2c312f['find'](_0x342cea=>_0x342cea[_0x330b55(0x11e)]==_0x22cb26['botID'])[_0x330b55(0x15c)];_0x2e2f8f+=_0x330b55(0x1b7)+_0x22cb26['botID']+':\x20'+_0x22cb26[_0x330b55(0x1da)]+_0x330b55(0x1a8)+_0x2cca7c+_0x330b55(0x1a8)+_0x22cb26[_0x330b55(0x16d)]+'\x0a';}),_0x2e2f8f+='\x0a',_0x2e2f8f+=_0x4c2519(0x219),_0x2e2f8f+=!settings[_0x4c2519(0x1bc)]?_0x4c2519(0x1b3):_0x4c2519(0x171),_0x2e2f8f+=settings['telegramEnabled']?settings['telegramEvents']==_0x4c2519(0x1f0)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':_0x4c2519(0x227)+settings[_0x4c2519(0x1b6)]+_0x4c2519(0x1f9):'',tgBot['sendMessage'](_0x3cb3a4['chat']['id'],_0x2e2f8f,{'parse_mode':'HTML'})['catch'](_0x42d175=>{telegramError(_0x42d175);});}),tgBot[_0x250d48(0x1e4)](/\/restart/,_0x33dd7e=>{const _0x34a631=_0x250d48;if(!validateTelegram(_0x33dd7e))return;tgBot[_0x34a631(0x151)](_0x34a631(0x1a3));const _0x284689=getEnabledBots();if(_0x284689['length']==0x0)tgBot[_0x34a631(0x159)](_0x33dd7e[_0x34a631(0x288)]['id'],_0x34a631(0x126))[_0x34a631(0x13b)](_0x2dc8fc=>{telegramError(_0x2dc8fc);});else{if(_0x284689[_0x34a631(0x17d)]>0x1)_0x284689[_0x34a631(0x29f)]({'botID':_0x34a631(0x1f0)});let _0x4ab209=[],_0x5545ff=[];const _0xdd792c=_0x284689[_0x34a631(0x17d)]%0x4==0x0||_0x284689[_0x34a631(0x17d)]%0x4==0x3||_0x284689[_0x34a631(0x17d)]%0x3==0x1?0x4:0x3;let _0x19b628=0x0;_0x284689[_0x34a631(0x232)]((_0xbf21d9,_0x556154)=>{const _0x2cd43a=_0x34a631;if(_0x556154%_0xdd792c==0x0)_0x5545ff=[];_0x5545ff['push']({'text':_0xbf21d9[_0x2cd43a(0x11e)]=='all'?_0x2cd43a(0x292):'Bot\x20'+_0xbf21d9[_0x2cd43a(0x11e)],'callback_data':_0xbf21d9[_0x2cd43a(0x11e)]}),_0x556154%_0xdd792c==0x0&&(_0x4ab209[_0x19b628]=_0x5545ff,_0x19b628++);}),tgBot[_0x34a631(0x159)](_0x33dd7e[_0x34a631(0x288)]['id'],_0x34a631(0x217),{'reply_markup':{'inline_keyboard':_0x4ab209}})[_0x34a631(0x13b)](_0x33d23e=>{telegramError(_0x33d23e);}),tgBot['on'](_0x34a631(0x1a3),async _0x216131=>{const _0x4327e3=_0x34a631,_0x1f6bf5=_0x216131[_0x4327e3(0x261)],_0x39c08a=_0x216131[_0x4327e3(0x299)];tgBot[_0x4327e3(0x1d0)](_0x216131['id'])['then'](async()=>{const _0x4c4fe9=_0x4327e3;_0x1f6bf5==_0x4c4fe9(0x1f0)?config[_0x4c4fe9(0x232)](_0x39fb4c=>{restartBot(_0x39fb4c['botID']);}):restartBot(_0x1f6bf5);}),tgBot[_0x4327e3(0x151)]('callback_query');});}}),tgBot[_0x250d48(0x1e4)](/\/on/,_0x2ba8d2=>{const _0x362e7b=_0x250d48;if(!validateTelegram(_0x2ba8d2))return;tgBot[_0x362e7b(0x151)](_0x362e7b(0x1a3));const _0x25985e=getDisabledBots();if(_0x25985e[_0x362e7b(0x17d)]==0x0)tgBot[_0x362e7b(0x159)](_0x2ba8d2[_0x362e7b(0x288)]['id'],'All\x20bots\x20running\x20right\x20now')['catch'](_0x115344=>{telegramError(_0x115344);});else{if(_0x25985e['length']>0x1)_0x25985e[_0x362e7b(0x29f)]({'botID':_0x362e7b(0x1f0)});let _0x174acd=[],_0x2c7985=[];const _0x16d9ce=_0x25985e['length']%0x4==0x0||_0x25985e[_0x362e7b(0x17d)]%0x4==0x3||_0x25985e[_0x362e7b(0x17d)]%0x3==0x1?0x4:0x3;let _0x24d2e4=0x0;_0x25985e['forEach']((_0x38f277,_0x55ba7d)=>{const _0x362490=_0x362e7b;if(_0x55ba7d%_0x16d9ce==0x0)_0x2c7985=[];_0x2c7985[_0x362490(0x29f)]({'text':_0x38f277['botID']==_0x362490(0x1f0)?_0x362490(0x292):_0x362490(0x1b7)+_0x38f277['botID'],'callback_data':_0x38f277[_0x362490(0x11e)]}),_0x55ba7d%_0x16d9ce==0x0&&(_0x174acd[_0x24d2e4]=_0x2c7985,_0x24d2e4++);}),tgBot['sendMessage'](_0x2ba8d2[_0x362e7b(0x288)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x174acd}})[_0x362e7b(0x13b)](_0x4af0b9=>{telegramError(_0x4af0b9);}),tgBot['on']('callback_query',async _0x5f1f91=>{const _0x4cf146=_0x362e7b,_0x3f1c9e=_0x5f1f91[_0x4cf146(0x261)],_0x3c4d5f=_0x5f1f91[_0x4cf146(0x299)];tgBot[_0x4cf146(0x1d0)](_0x5f1f91['id'])[_0x4cf146(0x1ff)](async()=>{const _0x213de7=_0x4cf146;_0x3f1c9e==_0x213de7(0x1f0)?(tgBot['sendMessage'](_0x3c4d5f[_0x213de7(0x288)]['id'],_0x213de7(0x286))['catch'](_0x41e383=>{telegramError(_0x41e383);}),_0x25985e['forEach'](_0x577249=>{const _0x2c5846=_0x213de7;if(_0x577249[_0x2c5846(0x11e)]!='all')toggleBot(_0x577249[_0x2c5846(0x11e)],toggleStatus(_0x577249[_0x2c5846(0x11e)]),_0x2c5846(0x193));})):(tgBot[_0x213de7(0x159)](_0x3c4d5f[_0x213de7(0x288)]['id'],_0x213de7(0x21f)+_0x3f1c9e)[_0x213de7(0x13b)](_0x6b673e=>{telegramError(_0x6b673e);}),toggleBot(_0x3f1c9e,toggleStatus(_0x3f1c9e),_0x213de7(0x193)));}),tgBot[_0x4cf146(0x151)](_0x4cf146(0x1a3));});}}),tgBot[_0x250d48(0x1e4)](/\/off/,_0x4f7b8e=>{const _0x38d883=_0x250d48;if(!validateTelegram(_0x4f7b8e))return;tgBot['removeListener'](_0x38d883(0x1a3));const _0x3a4521=getEnabledBots();if(_0x3a4521[_0x38d883(0x17d)]==0x0)tgBot['sendMessage'](_0x4f7b8e['chat']['id'],_0x38d883(0x126))[_0x38d883(0x13b)](_0x4f0a76=>{telegramError(_0x4f0a76);});else{if(_0x3a4521[_0x38d883(0x17d)]>0x1)_0x3a4521[_0x38d883(0x29f)]({'botID':_0x38d883(0x1f0)});let _0x20da42=[],_0x1c1437=[];const _0x460b29=_0x3a4521[_0x38d883(0x17d)]%0x4==0x0||_0x3a4521[_0x38d883(0x17d)]%0x4==0x3||_0x3a4521[_0x38d883(0x17d)]%0x3==0x1?0x4:0x3;let _0x3ff1b0=0x0;_0x3a4521[_0x38d883(0x232)]((_0x526015,_0x110d63)=>{const _0x180ee6=_0x38d883;if(_0x110d63%_0x460b29==0x0)_0x1c1437=[];_0x1c1437[_0x180ee6(0x29f)]({'text':_0x526015[_0x180ee6(0x11e)]=='all'?_0x180ee6(0x292):'Bot\x20'+_0x526015[_0x180ee6(0x11e)],'callback_data':_0x526015[_0x180ee6(0x11e)]}),_0x110d63%_0x460b29==0x0&&(_0x20da42[_0x3ff1b0]=_0x1c1437,_0x3ff1b0++);}),tgBot['sendMessage'](_0x4f7b8e[_0x38d883(0x288)]['id'],_0x38d883(0x17b),{'reply_markup':{'inline_keyboard':_0x20da42}})[_0x38d883(0x13b)](_0x197ab2=>{telegramError(_0x197ab2);}),tgBot['on'](_0x38d883(0x1a3),async _0x1482f1=>{const _0x372c20=_0x38d883,_0x15e090=_0x1482f1[_0x372c20(0x261)],_0x2e0fe1=_0x1482f1[_0x372c20(0x299)];tgBot['answerCallbackQuery'](_0x1482f1['id'])[_0x372c20(0x1ff)](async()=>{const _0x102381=_0x372c20;_0x15e090==_0x102381(0x1f0)?(tgBot['sendMessage'](_0x2e0fe1[_0x102381(0x288)]['id'],_0x102381(0x13a))[_0x102381(0x13b)](_0x5245e5=>{telegramError(_0x5245e5);}),_0x3a4521[_0x102381(0x232)](_0x2211fb=>{const _0x3328d1=_0x102381;if(_0x2211fb['botID']!=_0x3328d1(0x1f0))toggleBot(_0x2211fb[_0x3328d1(0x11e)],toggleStatus(_0x2211fb[_0x3328d1(0x11e)]),_0x3328d1(0x193));})):(tgBot['sendMessage'](_0x2e0fe1['chat']['id'],_0x102381(0x110)+_0x15e090)[_0x102381(0x13b)](_0x4ade6c=>{telegramError(_0x4ade6c);}),toggleBot(_0x15e090,toggleStatus(_0x15e090),_0x102381(0x193)));}),tgBot['removeListener']('callback_query');});}}),tgBot[_0x250d48(0x1e4)](/\/metrics/,_0x5ea451=>{const _0x559a07=_0x250d48;if(!validateTelegram(_0x5ea451))return;tgBot[_0x559a07(0x151)](_0x559a07(0x1a3));const _0x3e6f55=getEnabledBots();if(_0x3e6f55[_0x559a07(0x17d)]==0x0)tgBot[_0x559a07(0x159)](_0x5ea451[_0x559a07(0x288)]['id'],_0x559a07(0x126))['catch'](_0x1ee686=>{telegramError(_0x1ee686);});else{if(_0x3e6f55[_0x559a07(0x17d)]>0x1){let _0x11caa5=[],_0x4ab111=[];const _0x520428=_0x3e6f55['length']%0x4==0x0||_0x3e6f55['length']%0x4==0x3||_0x3e6f55['length']%0x3==0x1?0x4:0x3;let _0x564e35=0x0;_0x3e6f55[_0x559a07(0x232)]((_0x3abf2d,_0x1c707c)=>{const _0x553652=_0x559a07;if(_0x1c707c%_0x520428==0x0)_0x4ab111=[];_0x4ab111[_0x553652(0x29f)]({'text':'Bot\x20'+_0x3abf2d[_0x553652(0x11e)],'callback_data':_0x3abf2d['botID']}),_0x1c707c%_0x520428==0x0&&(_0x11caa5[_0x564e35]=_0x4ab111,_0x564e35++);}),tgBot[_0x559a07(0x159)](_0x5ea451[_0x559a07(0x288)]['id'],_0x559a07(0x13c),{'reply_markup':{'inline_keyboard':_0x11caa5}})[_0x559a07(0x13b)](_0x5d9ca0=>{telegramError(_0x5d9ca0);}),tgBot['on']('callback_query',async _0x452099=>{const _0x445d0a=_0x559a07,_0x4ca374=_0x452099[_0x445d0a(0x261)],_0x52c46d=_0x452099[_0x445d0a(0x299)];tgBot[_0x445d0a(0x1d0)](_0x452099['id'])[_0x445d0a(0x1ff)](async()=>{const _0x2a2618=_0x445d0a;if(pid[_0x4ca374])pid[_0x4ca374][_0x2a2618(0x1b4)]({'function':_0x2a2618(0x155),'args':null});}),tgBot['removeListener'](_0x445d0a(0x1a3));});}else{const _0x4d6c74=_0x3e6f55[0x0][_0x559a07(0x11e)];if(pid[_0x4d6c74])pid[_0x4d6c74][_0x559a07(0x1b4)]({'function':_0x559a07(0x155),'args':null});}}}),tgBot[_0x250d48(0x1e4)](/\/portfolio/,_0x5c26a4=>{const _0x2a9030=_0x250d48;if(!validateTelegram(_0x5c26a4))return;tgBot['removeListener']('callback_query');const _0x5eab4c=getEnabledBots();if(_0x5eab4c[_0x2a9030(0x17d)]==0x0)tgBot[_0x2a9030(0x159)](_0x5c26a4['chat']['id'],_0x2a9030(0x126))[_0x2a9030(0x13b)](_0x26babc=>{telegramError(_0x26babc);});else{if(_0x5eab4c[_0x2a9030(0x17d)]>0x1){let _0x43a2ae=[],_0x53a4d5=[];const _0x57b28e=_0x5eab4c['length']%0x4==0x0||_0x5eab4c[_0x2a9030(0x17d)]%0x4==0x3||_0x5eab4c[_0x2a9030(0x17d)]%0x3==0x1?0x4:0x3;let _0x49ebea=0x0;_0x5eab4c[_0x2a9030(0x232)]((_0x14f6a4,_0x50d4c6)=>{const _0x4e5982=_0x2a9030;if(_0x50d4c6%_0x57b28e==0x0)_0x53a4d5=[];_0x53a4d5[_0x4e5982(0x29f)]({'text':_0x4e5982(0x1b7)+_0x14f6a4[_0x4e5982(0x11e)],'callback_data':_0x14f6a4[_0x4e5982(0x11e)]}),_0x50d4c6%_0x57b28e==0x0&&(_0x43a2ae[_0x49ebea]=_0x53a4d5,_0x49ebea++);}),tgBot['sendMessage'](_0x5c26a4['chat']['id'],_0x2a9030(0x235),{'reply_markup':{'inline_keyboard':_0x43a2ae}})[_0x2a9030(0x13b)](_0x1b2667=>{telegramError(_0x1b2667);}),tgBot['on']('callback_query',async _0x588170=>{const _0x1a6a6f=_0x2a9030,_0x12c64a=_0x588170[_0x1a6a6f(0x261)],_0x4f87dc=_0x588170['message'];tgBot['answerCallbackQuery'](_0x588170['id'])[_0x1a6a6f(0x1ff)](async()=>{const _0x866e2=_0x1a6a6f;if(pid[_0x12c64a])pid[_0x12c64a]['send']({'function':_0x866e2(0x107),'args':null});}),tgBot[_0x1a6a6f(0x151)](_0x1a6a6f(0x1a3));});}else{const _0x3c1fb7=_0x5eab4c[0x0][_0x2a9030(0x11e)];if(pid[_0x3c1fb7])pid[_0x3c1fb7][_0x2a9030(0x1b4)]({'function':_0x2a9030(0x107),'args':null});}}}),tgBot['onText'](/\/update/,async _0x107206=>{const _0x154786=_0x250d48;if(!validateTelegram(_0x107206))return;tgBot[_0x154786(0x151)](_0x154786(0x1a3)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x107206[_0x154786(0x288)]['id'],_0x154786(0x289))['catch'](_0x23999b=>{telegramError(_0x23999b);});else!validInstallation?tgBot['sendMessage'](_0x107206[_0x154786(0x288)]['id'],_0x154786(0x179))[_0x154786(0x13b)](_0x18c824=>{telegramError(_0x18c824);}):(tgBot['sendMessage'](_0x107206[_0x154786(0x288)]['id'],_0x154786(0x16b),{'reply_markup':{'inline_keyboard':[[{'text':_0x154786(0x277),'callback_data':_0x154786(0x130)},{'text':'No','callback_data':'no'}]]}})[_0x154786(0x13b)](_0x21936f=>{telegramError(_0x21936f);}),tgBot['on'](_0x154786(0x1a3),async _0x2989a0=>{const _0x5f027b=_0x154786,_0x1b9e5d=_0x2989a0[_0x5f027b(0x261)],_0x5eebb7=_0x2989a0['message'];tgBot[_0x5f027b(0x1d0)](_0x2989a0['id'])[_0x5f027b(0x1ff)](async()=>{const _0x126081=_0x5f027b;_0x1b9e5d==_0x126081(0x130)&&(await tgBot['sendMessage'](_0x5eebb7[_0x126081(0x288)]['id'],'Starting\x20Balance\x20Bot\x20update')[_0x126081(0x13b)](_0x576bb4=>{telegramError(_0x576bb4);}),updateBB('update')),_0x1b9e5d=='no'&&await tgBot[_0x126081(0x159)](_0x5eebb7[_0x126081(0x288)]['id'],_0x126081(0x1ac))[_0x126081(0x13b)](_0x245027=>{telegramError(_0x245027);});}),tgBot[_0x5f027b(0x151)](_0x5f027b(0x1a3));}));}),tgBot[_0x250d48(0x1e4)](/\/reinstall/,async _0x442cb2=>{const _0x320509=_0x250d48;if(!validateTelegram(_0x442cb2))return;tgBot['removeListener']('callback_query'),!validInstallation?tgBot['sendMessage'](_0x442cb2['chat']['id'],_0x320509(0x242))[_0x320509(0x13b)](_0x489ec9=>{telegramError(_0x489ec9);}):(tgBot[_0x320509(0x159)](_0x442cb2['chat']['id'],_0x320509(0x28e),{'reply_markup':{'inline_keyboard':[[{'text':_0x320509(0x277),'callback_data':_0x320509(0x130)},{'text':'No','callback_data':'no'}]]}})[_0x320509(0x13b)](_0x45e3c1=>{telegramError(_0x45e3c1);}),tgBot['on'](_0x320509(0x1a3),async _0x3e4457=>{const _0x2d01f9=_0x320509,_0x16b4dc=_0x3e4457[_0x2d01f9(0x261)],_0x298f86=_0x3e4457[_0x2d01f9(0x299)];tgBot[_0x2d01f9(0x1d0)](_0x3e4457['id'])[_0x2d01f9(0x1ff)](async()=>{const _0x936008=_0x2d01f9;_0x16b4dc==_0x936008(0x130)&&(await tgBot['sendMessage'](_0x298f86[_0x936008(0x288)]['id'],_0x936008(0x148))[_0x936008(0x13b)](_0x35d88b=>{telegramError(_0x35d88b);}),updateBB(_0x936008(0x20e))),_0x16b4dc=='no'&&await tgBot['sendMessage'](_0x298f86[_0x936008(0x288)]['id'],_0x936008(0x244))[_0x936008(0x13b)](_0x21c601=>{telegramError(_0x21c601);});}),tgBot[_0x2d01f9(0x151)]('callback_query');}));}),tgBot[_0x250d48(0x1e4)](/\/toggle/,_0x166e3b=>{const _0x5aa2c8=_0x250d48;if(!validateTelegram(_0x166e3b))return;tgBot['removeListener']('callback_query');const _0x1e5462=getBotsWithMode();if(_0x1e5462['length']==0x0)tgBot[_0x5aa2c8(0x159)](_0x166e3b[_0x5aa2c8(0x288)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5aa2c8(0x13b)](_0xc96a26=>{telegramError(_0xc96a26);});else{let _0x4ccd97=[],_0x7221c2=[];const _0x4db775=0x2;let _0x383271=0x0;_0x1e5462[_0x5aa2c8(0x232)]((_0x190314,_0x4b924f)=>{const _0x3b1909=_0x5aa2c8;if(_0x4b924f%_0x4db775==0x0)_0x7221c2=[];_0x7221c2['push']({'text':_0x3b1909(0x1b7)+_0x190314[_0x3b1909(0x11e)]+'\x20('+_0x190314[_0x3b1909(0x15c)]+')','callback_data':_0x190314[_0x3b1909(0x11e)]}),_0x4b924f%_0x4db775==0x0&&(_0x4ccd97[_0x383271]=_0x7221c2,_0x383271++);}),tgBot['sendMessage'](_0x166e3b[_0x5aa2c8(0x288)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x4ccd97}})[_0x5aa2c8(0x13b)](_0x240365=>{telegramError(_0x240365);}),tgBot['on'](_0x5aa2c8(0x1a3),async _0x2d72e6=>{const _0x365b6e=_0x5aa2c8,_0x1992c7=_0x2d72e6[_0x365b6e(0x261)],_0x4ec6eb=_0x2d72e6[_0x365b6e(0x299)];tgBot[_0x365b6e(0x1d0)](_0x2d72e6['id'])[_0x365b6e(0x1ff)](async()=>{const _0x21e557=_0x365b6e,_0x428867=_0x1e5462[_0x21e557(0x188)](_0x86e191=>_0x86e191[_0x21e557(0x11e)]==_0x1992c7),_0x337cd6=_0x428867[_0x21e557(0x15c)]==_0x21e557(0x12d)?'manual':_0x21e557(0x12d);tgBot[_0x21e557(0x159)](_0x4ec6eb[_0x21e557(0x288)]['id'],_0x21e557(0x241)+_0x1992c7+_0x21e557(0x20a)+_0x337cd6+_0x21e557(0x208))['catch'](_0x3e210d=>{telegramError(_0x3e210d);}),toggleBotMode(_0x1992c7);}),tgBot['removeListener'](_0x365b6e(0x1a3));});}}),tgBot[_0x250d48(0x1e4)](/\/names/,_0x1212ef=>{const _0x2de3ad=_0x250d48;if(!validateTelegram(_0x1212ef))return;let _0x30c98e='';config[_0x2de3ad(0x232)](_0xba5ea2=>{const _0xce3c0d=_0x2de3ad;_0x30c98e+=_0xce3c0d(0x1b7)+_0xba5ea2[_0xce3c0d(0x11e)]+':\x20'+_0xba5ea2[_0xce3c0d(0x13d)]+'\x0a';}),tgBot[_0x2de3ad(0x159)](_0x1212ef['chat']['id'],_0x30c98e,{'parse_mode':_0x2de3ad(0x1c7)})[_0x2de3ad(0x13b)](_0x3484f0=>{telegramError(_0x3484f0);});}),tgBot[_0x250d48(0x1e4)](/\/disable/,_0x2d01a1=>{const _0x2ce5b9=_0x250d48;if(!validateTelegram(_0x2d01a1))return;tgBot[_0x2ce5b9(0x159)](_0x2d01a1['chat']['id'],_0x2ce5b9(0x134))[_0x2ce5b9(0x13b)](_0x5c2e68=>{telegramError(_0x5c2e68);}),updateSetting(_0x2ce5b9(0x1bc),![]);}),tgBot['onText'](/\/help/,_0x5617b5=>{const _0x8f2a8f=_0x250d48;if(!validateTelegram(_0x5617b5))return;tgBot['sendMessage'](_0x5617b5[_0x8f2a8f(0x288)]['id'],_0x975ac0)[_0x8f2a8f(0x13b)](_0x58a37a=>{telegramError(_0x58a37a);});}),tgBot['on'](_0x250d48(0x234),_0x20d19c=>{const _0x18e3dc=_0x250d48;_0x20d19c[_0x18e3dc(0x223)]()[_0x18e3dc(0x24a)](_0x18e3dc(0x25c))&&(logger[_0x18e3dc(0x267)]('Invalid\x20Telegram\x20token'),tgBot[_0x18e3dc(0x1b2)](),tgBot=null,io['to'](_0x18e3dc(0x247))['emit'](_0x18e3dc(0x221),_0x18e3dc(0x1ae)));}),process[_0x250d48(0x187)]('SIGINT',()=>{const _0x1140e2=_0x250d48;if(tgBot)tgBot[_0x1140e2(0x1b2)]();process[_0x1140e2(0x1d9)](0x1);}),process[_0x250d48(0x187)]('SIGTERM',()=>{const _0x4ba810=_0x250d48;if(tgBot)tgBot[_0x4ba810(0x1b2)]();process[_0x4ba810(0x1d9)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0x1aa293,_0x2a41fb){const _0x1941b1=_0x4f0a15;if(settings[_0x1941b1(0x1bc)]){if(settings[_0x1941b1(0x1b6)]==_0x1941b1(0x1f0)||(_0x2a41fb[_0x1941b1(0x12e)]=='error'||_0x2a41fb[_0x1941b1(0x12e)]==_0x1941b1(0x137)||_0x2a41fb[_0x1941b1(0x12e)]==_0x1941b1(0x189))&&settings[_0x1941b1(0x1b6)]==_0x1941b1(0x1d2)||_0x2a41fb['type']==_0x1941b1(0x1fb)&&settings[_0x1941b1(0x1b6)]==_0x1941b1(0x136)){if(tgBot&&settings['telegramChatId']){if(_0x2a41fb[_0x1941b1(0x180)])tgBot[_0x1941b1(0x159)](settings[_0x1941b1(0x10f)],_0x2a41fb[_0x1941b1(0x13d)]+'\x20>\x20'+_0x2a41fb['event'])[_0x1941b1(0x13b)](_0x1b33b1=>{telegramError(_0x1b33b1);});else tgBot[_0x1941b1(0x159)](settings['telegramChatId'],'Bot\x20'+_0x1aa293+_0x1941b1(0x18b)+_0x2a41fb[_0x1941b1(0x11d)])[_0x1941b1(0x13b)](_0x4d9f66=>{telegramError(_0x4d9f66);});}}}}async function sendTelegramMsg(_0x4d27e2,_0x100a2f=_0x4f0a15(0x1c7)){const _0x17bd0b=_0x4f0a15;return settings[_0x17bd0b(0x1bc)]&&tgBot&&settings[_0x17bd0b(0x10f)]?(await tgBot[_0x17bd0b(0x159)](settings['telegramChatId'],_0x4d27e2,{'parse_mode':_0x100a2f})[_0x17bd0b(0x13b)](_0x3abf4d=>{telegramError(_0x3abf4d);}),!![]):![];}function getDeviceWithIp(_0x4f38c1){const _0x207e23=_0x4f0a15;return devices[_0x207e23(0x188)](_0x337bc6=>_0x337bc6['ip']===_0x4f38c1);}function temporaryAccess2FA(_0x13c6f9,_0x20d9c1){const _0x5138b7=_0x4f0a15;let _0x28fe3e=new Date(),_0x4206e9=![];if(lastIpApproval){if(_0x28fe3e-lastIpApproval<0x1388)_0x4206e9=!![];}lastIpApproval=new Date();if(_0x4206e9)return;tgBot&&settings[_0x5138b7(0x10f)]&&(tgBot[_0x5138b7(0x151)](_0x5138b7(0x1a3)),tgBot[_0x5138b7(0x159)](settings[_0x5138b7(0x10f)],_0x5138b7(0x260)+normalizeIP(_0x20d9c1)[_0x5138b7(0x1e8)]+_0x5138b7(0x1ec),{'parse_mode':_0x5138b7(0x1c7),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x5138b7(0x222),'callback_data':'15'},{'text':_0x5138b7(0x147),'callback_data':'30'},{'text':_0x5138b7(0x10e),'callback_data':'reject'}]]}})['catch'](_0x1c0b0a=>{telegramError(_0x1c0b0a);}),tgBot['on'](_0x5138b7(0x1a3),async _0x1b4085=>{const _0x102bde=_0x5138b7,_0x1af326=_0x1b4085[_0x102bde(0x261)],_0x3ae39a=_0x1b4085[_0x102bde(0x299)];tgBot[_0x102bde(0x1d0)](_0x1b4085['id'])[_0x102bde(0x1ff)](async()=>{const _0x5641fc=_0x102bde;devices[_0x13c6f9][_0x5641fc(0x25e)]={'clientip':_0x20d9c1,'timestamp':new Date()[_0x5641fc(0x281)](),'expiry':_0x1af326},_0x1af326!=_0x5641fc(0x10e)?(await tgBot[_0x5641fc(0x159)](_0x3ae39a[_0x5641fc(0x288)]['id'],'Access\x20enabled\x20for\x20'+_0x1af326+'\x20minutes',{'parse_mode':'HTML'})['catch'](_0x4b3241=>{telegramError(_0x4b3241);}),io['to'](_0x13c6f9)[_0x5641fc(0x21e)](_0x5641fc(0x1da),{'access':{'allow':![],'reason':_0x5641fc(0x20c),'token':null}})):(await tgBot['sendMessage'](_0x3ae39a[_0x5641fc(0x288)]['id'],_0x5641fc(0x27b))[_0x5641fc(0x13b)](_0x44dda0=>{telegramError(_0x44dda0);}),io['to'](_0x13c6f9)[_0x5641fc(0x21e)](_0x5641fc(0x1da),{'access':{'allow':![],'reason':_0x5641fc(0x27f),'token':null}}));}),tgBot[_0x102bde(0x151)](_0x102bde(0x1a3));}));}function loginAccess2FA(_0x36db16,_0x1b9e50){const _0x1816ef=_0x4f0a15;tgBot&&settings[_0x1816ef(0x10f)]&&(tgBot[_0x1816ef(0x151)]('callback_query'),tgBot['sendMessage'](settings[_0x1816ef(0x10f)],_0x1816ef(0x140)+normalizeIP(_0x1b9e50)[_0x1816ef(0x1e8)]+_0x1816ef(0x1ec),{'parse_mode':_0x1816ef(0x1c7),'reply_markup':{'inline_keyboard':[[{'text':_0x1816ef(0x18a),'callback_data':loginExpiry},{'text':_0x1816ef(0x10e),'callback_data':_0x1816ef(0x10e)}]]}})['catch'](_0x1e7269=>{telegramError(_0x1e7269);}),tgBot['on']('callback_query',async _0x7a4207=>{const _0x2c54ab=_0x1816ef,_0x326efc=_0x7a4207[_0x2c54ab(0x261)],_0x21a273=_0x7a4207[_0x2c54ab(0x299)];tgBot[_0x2c54ab(0x1d0)](_0x7a4207['id'])[_0x2c54ab(0x1ff)](async()=>{const _0x1717cb=_0x2c54ab;devices[_0x36db16][_0x1717cb(0x10c)]={'clientip':_0x1b9e50,'timestamp':new Date()['getTime'](),'expiry':_0x326efc},_0x326efc!=_0x1717cb(0x10e)?(await tgBot[_0x1717cb(0x159)](_0x21a273['chat']['id'],_0x1717cb(0x121),{'parse_mode':_0x1717cb(0x1c7)})['catch'](_0x516cf2=>{telegramError(_0x516cf2);}),io['to'](_0x36db16)['emit'](_0x1717cb(0x1da),{'access':{'allow':![],'reason':_0x1717cb(0x20c),'token':null}})):(await tgBot[_0x1717cb(0x159)](_0x21a273[_0x1717cb(0x288)]['id'],_0x1717cb(0x149))['catch'](_0x1b7c3f=>{telegramError(_0x1b7c3f);}),io['to'](_0x36db16)[_0x1717cb(0x21e)]('status',{'access':{'allow':![],'reason':_0x1717cb(0x23c),'token':null}}));}),tgBot['removeListener']('callback_query');}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x51432b=_0x4f0a15;return dbConfig[_0x51432b(0x139)](_0x51432b(0x18e))[_0x51432b(0x27a)](_0x51432b(0x11e))[_0x51432b(0x109)]({'status':_0x51432b(0x1dd)})[_0x51432b(0x200)]()||[];}function getDisabledBots(){const _0x1f24bc=_0x4f0a15;return dbConfig[_0x1f24bc(0x139)](_0x1f24bc(0x18e))[_0x1f24bc(0x27a)](_0x1f24bc(0x11e))[_0x1f24bc(0x109)]({'status':'disabled'})[_0x1f24bc(0x200)]()||[];}function getBotAttributes(_0x560b5d){const _0x1d8ea9=_0x4f0a15;let _0x5173ef={};const _0x2a0729=configpath+'bot-'+_0x560b5d+_0x1d8ea9(0x297),_0x321d13=fs[_0x1d8ea9(0x133)](_0x2a0729);if(_0x321d13){const _0x3ef0ef=fs[_0x1d8ea9(0x164)](_0x2a0729);try{const _0x11832f=JSON[_0x1d8ea9(0x13e)](_0x3ef0ef),_0x367f8d=_0x11832f?_0x11832f[_0x1d8ea9(0x28d)][0x0][_0x1d8ea9(0x264)]:![];_0x5173ef['mode']=_0x367f8d?_0x1d8ea9(0x12d):'manual',_0x5173ef['botname']=_0x11832f?_0x11832f[_0x1d8ea9(0x28d)][0x0][_0x1d8ea9(0x13d)]:_0x1d8ea9(0x1b7)+_0x560b5d;}catch(_0x2cbd2d){_0x5173ef[_0x1d8ea9(0x15c)]=_0x1d8ea9(0x21b),_0x5173ef[_0x1d8ea9(0x13d)]=_0x1d8ea9(0x1b7)+_0x560b5d;}}else _0x5173ef['mode']=_0x1d8ea9(0x21b),_0x5173ef['botname']=_0x1d8ea9(0x1b7)+_0x560b5d;return _0x5173ef;}function getBotsWithMode(){const _0xb6cb93=_0x4f0a15,_0x169415=dbConfig['get']('bots')[_0xb6cb93(0x27a)]('botID')[_0xb6cb93(0x200)]()||[];return _0x169415[_0xb6cb93(0x232)](_0x5124ae=>{const _0x204374=_0xb6cb93;let _0x52842d=getBotAttributes(_0x5124ae[_0x204374(0x11e)]);_0x5124ae[_0x204374(0x15c)]=_0x52842d[_0x204374(0x15c)];}),_0x169415;}function getBotExchanges(){const _0x7a3b7=_0x4f0a15;let _0x526e6c=[];const _0x15bb6b=dbConfig['get'](_0x7a3b7(0x18e))[_0x7a3b7(0x27a)](_0x7a3b7(0x11e))['value']()||[];_0x15bb6b[_0x7a3b7(0x232)](_0x287edc=>{const _0x1b3c94=_0x7a3b7;if(_0x287edc[_0x1b3c94(0x1da)]==_0x1b3c94(0x1dd)){const _0x3be9da=configpath+'bot-'+_0x287edc['botID']+_0x1b3c94(0x297),_0x49585a=fs['existsSync'](_0x3be9da);let _0x3b19a4;if(_0x49585a){const _0x25182e=fs[_0x1b3c94(0x164)](_0x3be9da);try{const _0x43df9d=JSON[_0x1b3c94(0x13e)](_0x25182e);_0x3b19a4=_0x43df9d?_0x43df9d[_0x1b3c94(0x28d)][0x0]['exchange']:null;}catch(_0x1350f5){}}if(_0x3b19a4)_0x526e6c[_0x1b3c94(0x29f)](_0x3b19a4);}});const _0x163eb5=[...new Set(_0x526e6c)][_0x7a3b7(0x194)]();return _0x163eb5;}async function initUser(){const _0x32f8bb=_0x4f0a15;if(!settings[_0x32f8bb(0x178)]){const _0x21b33d=uuidRandom();mixpanel['alias'](_0x21b33d),updateSetting(_0x32f8bb(0x178),_0x21b33d);}}async function initSecure(){const _0xb21e4=_0x4f0a15;let _0x3a7710=getSecure();if(!_0x3a7710[_0xb21e4(0x158)](_0xb21e4(0x29a))){let _0x2ac509=await generateKeys();_0x3a7710[_0xb21e4(0x278)]=_0x2ac509[_0xb21e4(0x278)],_0x3a7710['privateKey']=_0x2ac509[_0xb21e4(0x2a4)],_0x3a7710[_0xb21e4(0x29a)]=crypto[_0xb21e4(0x1f5)](0x20)['toString']('hex');;storeSecure(_0x3a7710);}}function getSettings(){const _0x507feb=_0x4f0a15;return dbSettings['get'](_0x507feb(0x2c0))[_0x507feb(0x200)]()||{};}function getSecure(){const _0x449048=_0x4f0a15;return dbSecure[_0x449048(0x139)](_0x449048(0x2b9))[_0x449048(0x200)]()||{};}function getBlacklist(){const _0xea9780=_0x4f0a15;return dbSecure['get']('blacklist')[_0xea9780(0x200)]()||[];}function broadcastToBots(_0x307958,_0x5d633c){const _0x193b53=_0x4f0a15;config[_0x193b53(0x232)](_0x329025=>{const _0x3335b3=_0x193b53;if(_0x329025[_0x3335b3(0x1da)]==_0x3335b3(0x1dd)&&_0x329025['live']=='running'){if(pid[_0x329025[_0x3335b3(0x11e)]])pid[_0x329025['botID']][_0x3335b3(0x1b4)]({[_0x307958]:_0x5d633c});}});}function storeSettings(_0x46117e,_0x3f7af4=![]){const _0x448325=_0x4f0a15;_0x46117e={...settings,..._0x46117e};if(_0x3f7af4&&_0x46117e[_0x448325(0x285)]!=_0x448325(0x298)&&_0x46117e[_0x448325(0x285)]!=_0x448325(0x14c)&&_0x46117e[_0x448325(0x285)]!=''){const _0xf7e9e6=crypt[_0x448325(0x2ba)](secure[_0x448325(0x2a4)],_0x46117e[_0x448325(0x285)])['message'][_0x448325(0x25a)]('@')[0x0],_0x1fdce4=bcrypt[_0x448325(0x1aa)](_0xf7e9e6,saltRounds);_0x46117e={..._0x46117e,'bbPassword':_0x1fdce4};}if(_0x3f7af4&&_0x46117e[_0x448325(0x157)]!='************'&&_0x46117e[_0x448325(0x157)]!='***'&&_0x46117e[_0x448325(0x157)]!=''){const _0x3e5e45=crypt[_0x448325(0x2ba)](secure[_0x448325(0x2a4)],_0x46117e['telegramToken'])[_0x448325(0x299)][_0x448325(0x25a)]('@')[0x0];_0x46117e={..._0x46117e,'telegramToken':_0x3e5e45};}const _0xa2ab59=_0x46117e['telegramToken']!='************'&&_0x46117e[_0x448325(0x157)]!=settings[_0x448325(0x157)]||_0x46117e[_0x448325(0x131)]!=settings[_0x448325(0x131)],_0x425a35=_0x46117e[_0x448325(0x157)]==''||_0x46117e[_0x448325(0x131)]=='';if(_0xa2ab59)_0x46117e[_0x448325(0x1b6)]=_0x448325(0x1f0);for(const [_0x56f3b3,_0x107947]of Object[_0x448325(0x1c2)](_0x46117e)){if(_0x56f3b3=='telegramToken'&&_0x107947=='************'){_0x46117e[_0x448325(0x157)]=settings[_0x448325(0x157)];continue;};if(_0x56f3b3==_0x448325(0x285)&&_0x107947=='************'){_0x46117e[_0x448325(0x285)]=settings['bbPassword'];continue;};dbSettings[_0x448325(0x192)](_0x448325(0x2ab)+_0x56f3b3,_0x107947)[_0x448325(0x245)]();}settings=_0x46117e,io['to'](_0x448325(0x247))[_0x448325(0x21e)](_0x448325(0x2c0),cleanSettings()),broadcastToBots(_0x448325(0x238),settings[_0x448325(0x238)]);if(_0xa2ab59&&!_0x425a35)initTelegram();if(_0xa2ab59&&_0x425a35)disableTelegram();getAllClients()['forEach'](_0x11bbe6=>{const _0x36c6f2=_0x448325;getSocket(_0x11bbe6['id'])['emit'](_0x36c6f2(0x1da),{'access':{'allow':![],'reason':_0x36c6f2(0x20c),'token':null}});});}function updateSetting(_0x443214,_0xc2d77f){const _0x4177e3=_0x4f0a15;dbSettings[_0x4177e3(0x192)]('settings.'+_0x443214,_0xc2d77f)['write'](),settings=getSettings(),io['to'](_0x4177e3(0x247))[_0x4177e3(0x21e)]('settings',cleanSettings());}function storeSecure(_0x21b362){const _0x48743e=_0x4f0a15;dbSecure[_0x48743e(0x139)](_0x48743e(0x2b9))['push'](_0x21b362)[_0x48743e(0x245)](),secure=_0x21b362;}function addBlacklist(_0x566168){const _0x24b159=_0x4f0a15;cleanBlacklist();let _0x15376b;devices[_0x566168][_0x24b159(0x25e)]?_0x15376b=Math[_0x24b159(0x1ea)](devices[_0x566168][_0x24b159(0x25e)]['expiry'],loginExpiry):_0x15376b=loginExpiry,dbSecure[_0x24b159(0x139)](_0x24b159(0x12a))['push']({'expiry':new Date()[_0x24b159(0x281)]()+_0x15376b*0x3c*0x3e8,'token':devices[_0x566168]['access'][_0x24b159(0x254)]})[_0x24b159(0x245)](),blacklist=dbSecure[_0x24b159(0x139)](_0x24b159(0x12a))[_0x24b159(0x200)]();}function cleanBlacklist(){const _0x1f288f=_0x4f0a15;let _0x5f3c6c=dbSecure['get']('blacklist')[_0x1f288f(0x1fc)]()['value'](),_0x3b5689=new Date()[_0x1f288f(0x281)]();_0x5f3c6c[_0x1f288f(0x232)](_0x146d02=>{const _0x507c1a=_0x1f288f;_0x146d02['expiry']<_0x3b5689&&dbSecure[_0x507c1a(0x139)](_0x507c1a(0x12a))[_0x507c1a(0x15d)]({'expiry':_0x146d02[_0x507c1a(0x294)]})[_0x507c1a(0x245)]();});}function initStates(){const _0xa0f847=_0x4f0a15;let _0x3a2625=getConfiguration();_0x3a2625[_0xa0f847(0x232)](_0x4e12ae=>{const _0x311efa=_0xa0f847;_0x4e12ae['live']=_0x311efa(0x193);}),storeConfiguration(_0x3a2625);}function onKeys(){const _0x17bbc6=new RSA();return new Promise(_0x447e30=>{const _0x14fd6f=_0x5ac2;_0x17bbc6[_0x14fd6f(0x20b)]()[_0x14fd6f(0x1ff)](_0x18773b=>{_0x447e30(_0x18773b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x452f58=_0x4f0a15;let _0x5add16=getSettings(),_0x3154ab=![];!_0x5add16[_0x452f58(0x158)](_0x452f58(0x27c))&&(_0x5add16['lastmsgtelegram']=0x0,_0x3154ab=!![]);!_0x5add16[_0x452f58(0x158)](_0x452f58(0x1d4))&&(_0x5add16[_0x452f58(0x1d4)]=0x0,_0x3154ab=!![]);!_0x5add16[_0x452f58(0x158)](_0x452f58(0x116))&&(_0x5add16[_0x452f58(0x116)]=_0x452f58(0x269),_0x3154ab=!![]);if(_0x3154ab)storeSettings(_0x5add16);}function storeConfiguration(_0x373fdc){const _0x1cb90a=_0x4f0a15;dbConfig[_0x1cb90a(0x139)](_0x1cb90a(0x18e))[_0x1cb90a(0x15d)]()['write'](),_0x373fdc[_0x1cb90a(0x232)](_0x1fd235=>{const _0x3baa7e=_0x1cb90a;delete _0x1fd235[_0x3baa7e(0x15c)];}),dbConfig[_0x1cb90a(0x139)](_0x1cb90a(0x18e))[_0x1cb90a(0x29f)](..._0x373fdc)[_0x1cb90a(0x245)](),config=_0x373fdc;}function resetPassword(){const _0x1fefc0=_0x4f0a15;tgBot&&settings[_0x1fefc0(0x10f)]&&(tgBot[_0x1fefc0(0x151)](_0x1fefc0(0x1a3)),tgBot['sendMessage'](settings['telegramChatId'],'Do\x20you\x20want\x20to\x20reset\x20your\x20password?',{'parse_mode':_0x1fefc0(0x1c7),'reply_markup':{'inline_keyboard':[[{'text':_0x1fefc0(0x130),'callback_data':_0x1fefc0(0x130)},{'text':'no','callback_data':'no'}]]}})[_0x1fefc0(0x13b)](_0x442a0a=>{telegramError(_0x442a0a);}),tgBot['on'](_0x1fefc0(0x1a3),async _0xd02097=>{const _0x758229=_0x1fefc0,_0x13c6f2=_0xd02097[_0x758229(0x261)],_0x594b7c=_0xd02097[_0x758229(0x299)];tgBot['answerCallbackQuery'](_0xd02097['id'])['then'](async()=>{const _0xe4b18c=_0x758229;if(_0x13c6f2!='no'){const _0x389e24=0xf,_0xde48e2=_0xe4b18c(0x14f),_0x1e054c=Array[_0xe4b18c(0x1f6)](crypto['randomFillSync'](new Uint32Array(_0x389e24)))[_0xe4b18c(0x224)](_0x7cea93=>_0xde48e2[_0x7cea93%_0xde48e2[_0xe4b18c(0x17d)]])['join'](''),_0x4c9422=bcrypt['hashSync'](_0x1e054c,saltRounds);storeSettings({'bbPassword':_0x4c9422}),await tgBot['sendMessage'](_0x594b7c[_0xe4b18c(0x288)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x1e054c,{'parse_mode':_0xe4b18c(0x1c7)})[_0xe4b18c(0x13b)](_0x344994=>{telegramError(_0x344994);});}else await tgBot['sendMessage'](_0x594b7c[_0xe4b18c(0x288)]['id'],_0xe4b18c(0x1ba))[_0xe4b18c(0x13b)](_0x2f7311=>{telegramError(_0x2f7311);});}),tgBot['removeListener']('callback_query');}));}async function confirmRestore(_0x547a2d,_0x3d48ae){const _0xc56e17=_0x4f0a15;io['to'](_0xc56e17(0x247))['emit'](_0xc56e17(0x221),_0xc56e17(0x146),_0xc56e17(0x189)),tgBot&&settings[_0xc56e17(0x10f)]&&(tgBot[_0xc56e17(0x151)](_0xc56e17(0x1a3)),await tgBot[_0xc56e17(0x159)](settings[_0xc56e17(0x10f)],_0xc56e17(0x1b1),{'parse_mode':_0xc56e17(0x1c7),'reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':'yes'},{'text':'no','callback_data':'no'}]]}})[_0xc56e17(0x13b)](_0x15b8fd=>{telegramError(_0x15b8fd);}),tgBot['on'](_0xc56e17(0x1a3),async _0xd3c961=>{const _0x2ed42f=_0xc56e17,_0x49481e=_0xd3c961['data'],_0x5422db=_0xd3c961[_0x2ed42f(0x299)];tgBot['answerCallbackQuery'](_0xd3c961['id'])[_0x2ed42f(0x1ff)](async()=>{const _0xf5acb=_0x2ed42f;_0x49481e==_0xf5acb(0x130)?(await tgBot['sendMessage'](_0x5422db[_0xf5acb(0x288)]['id'],_0xf5acb(0x263),{'parse_mode':'HTML'})[_0xf5acb(0x13b)](_0x3ee897=>{telegramError(_0x3ee897);}),unzipFile(_0x547a2d,_0x3d48ae)):(logger['debug'](_0xf5acb(0x1d8)),await tgBot[_0xf5acb(0x159)](_0x5422db[_0xf5acb(0x288)]['id'],_0xf5acb(0x1d8))[_0xf5acb(0x13b)](_0xf0bb17=>{telegramError(_0xf0bb17);}));}),tgBot['removeListener'](_0x2ed42f(0x1a3));}));}function getServerTime(){const _0x5dee16=_0x4f0a15,_0x3c324e=new Date();return _0x3c324e['getFullYear']()+'/'+(_0x3c324e['getMonth']()+0x1)[_0x5dee16(0x223)]()[_0x5dee16(0xfe)](0x2,'0')+'/'+_0x3c324e[_0x5dee16(0x132)]()[_0x5dee16(0x223)]()['padStart'](0x2,'0')+'\x20'+_0x3c324e[_0x5dee16(0x27d)]()[_0x5dee16(0x223)]()[_0x5dee16(0xfe)](0x2,'0')+':'+_0x3c324e['getMinutes']()[_0x5dee16(0x223)]()[_0x5dee16(0xfe)](0x2,'0')+':'+_0x3c324e[_0x5dee16(0x2ae)]()['toString']()['padStart'](0x2,'0');}function getTimeStamp(){const _0x45ae6a=_0x4f0a15,_0x2f5f2e=shiftedTime();return _0x2f5f2e[_0x45ae6a(0x1e1)]()+'/'+(_0x2f5f2e[_0x45ae6a(0x23e)]()+0x1)[_0x45ae6a(0x223)]()[_0x45ae6a(0xfe)](0x2,'0')+'/'+_0x2f5f2e[_0x45ae6a(0x132)]()[_0x45ae6a(0x223)]()[_0x45ae6a(0xfe)](0x2,'0')+'\x20'+_0x2f5f2e[_0x45ae6a(0x27d)]()[_0x45ae6a(0x223)]()['padStart'](0x2,'0')+':'+_0x2f5f2e[_0x45ae6a(0x199)]()[_0x45ae6a(0x223)]()[_0x45ae6a(0xfe)](0x2,'0')+':'+_0x2f5f2e[_0x45ae6a(0x2ae)]()[_0x45ae6a(0x223)]()[_0x45ae6a(0xfe)](0x2,'0');}function getCleanTimeStamp(){const _0x581ee8=_0x4f0a15,_0x11f8ea=shiftedTime();return _0x11f8ea['getFullYear']()+(_0x11f8ea[_0x581ee8(0x23e)]()+0x1)['toString']()['padStart'](0x2,'0')+_0x11f8ea['getDate']()[_0x581ee8(0x223)]()['padStart'](0x2,'0')+'-'+_0x11f8ea[_0x581ee8(0x27d)]()['toString']()['padStart'](0x2,'0')+_0x11f8ea[_0x581ee8(0x199)]()[_0x581ee8(0x223)]()['padStart'](0x2,'0')+_0x11f8ea['getSeconds']()['toString']()[_0x581ee8(0xfe)](0x2,'0');}function shiftedTime(){const _0x308088=_0x4f0a15,_0x4ebf16=new Date();let _0xc6a84f=_0x4ebf16;if(settings['timeshift']&&settings['timeshift']!==0x0)_0xc6a84f=fns[_0x308088(0x15f)](_0x4ebf16,{'hours':settings[_0x308088(0x238)]});return _0xc6a84f;}function startScheduler(){const _0x1e22d4=_0x4f0a15,_0x101e14=new Date()[_0x1e22d4(0x25b)](),_0x291da9=shiftedTime()['getHours']();_0x291da9==0x4&&backupConfigFiles();_0x291da9==0x0&&rotateLogFiles();_0x101e14%0x6==0x0&&triggerAnalytics();_0x101e14%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x395716){const _0x10b9b=_0x4f0a15;logger['debug']('Restore\x20backup\x20file\x20'+_0x395716);const _0x83f99=getBotsWithMode();_0x83f99[_0x10b9b(0x17d)]>0x0?confirmRestore(configbackuppath,_0x395716):unzipFile(configbackuppath,_0x395716);}async function getBackupFiles(_0x2a84a6=null){const _0x30e802=_0x4f0a15;let _0x1a8ec5=[],_0x55fb8f=fs[_0x30e802(0x29c)](configbackuppath,{'withFileTypes':!![]});_0x55fb8f[_0x30e802(0x194)]((_0x10d2ab,_0x5dc682)=>_0x10d2ab[_0x30e802(0x115)]<_0x5dc682['name']?0x1:_0x5dc682[_0x30e802(0x115)]<_0x10d2ab['name']?-0x1:0x0),_0x55fb8f[_0x30e802(0x232)](_0x495d6e=>{const _0xacce3e=_0x30e802;if(!_0x495d6e[_0xacce3e(0x175)]()&&_0x495d6e[_0xacce3e(0x115)][_0xacce3e(0x1f4)](_0xacce3e(0x284))&&_0x495d6e[_0xacce3e(0x115)]['endsWith']('.zip')){const _0x5cde50=formatDate(fs[_0xacce3e(0x24f)](configbackuppath+_0x495d6e[_0xacce3e(0x115)])['mtime']);_0x1a8ec5[_0xacce3e(0x29f)]({'name':_0x495d6e[_0xacce3e(0x115)],'mtime':_0x5cde50});}});if(_0x2a84a6)io['to'](_0x2a84a6)[_0x30e802(0x21e)]('backup-files',_0x1a8ec5);else return _0x1a8ec5;}async function backupConfigFiles(){const _0x394388=_0x4f0a15;await zipFiles(_0x394388(0x1b5));const _0x3bae82=getCleanTimeStamp();fs[_0x394388(0x25f)](zippath+'backup-full.zip',configbackuppath+(_0x394388(0x284)+_0x3bae82+_0x394388(0x246)));let _0x150638=fs[_0x394388(0x29c)](configbackuppath,{'withFileTypes':!![]});_0x150638[_0x394388(0x194)]((_0x17c194,_0xbf6f50)=>_0x17c194[_0x394388(0x115)]<_0xbf6f50['name']?0x1:_0xbf6f50['name']<_0x17c194['name']?-0x1:0x0),_0x150638[_0x394388(0x17d)]>maxBackups&&fs['unlinkSync'](configbackuppath+_0x150638[maxBackups]['name']);}function rotateLogFiles(){const _0x591e37=_0x4f0a15,_0x57597d=fs[_0x591e37(0x24f)](logspath+'output-000.log'),_0x5ad4a4=_0x57597d['size']/0x400;if(_0x5ad4a4>0x64){let _0x1fc502=fs[_0x591e37(0x29c)](logspath,{'withFileTypes':!![]});_0x1fc502[_0x591e37(0x194)]((_0x13f1b4,_0x5677c0)=>_0x13f1b4[_0x591e37(0x115)]<_0x5677c0['name']?0x1:_0x5677c0[_0x591e37(0x115)]<_0x13f1b4['name']?-0x1:0x0),_0x1fc502['forEach'](_0x37fef3=>{const _0x236d52=_0x591e37;if(_0x37fef3[_0x236d52(0x115)]==_0x236d52(0x17c))fs[_0x236d52(0x25f)](logspath+_0x37fef3[_0x236d52(0x115)],logspath+'output-003.log');if(_0x37fef3[_0x236d52(0x115)]==_0x236d52(0x2a2))fs['copyFileSync'](logspath+_0x37fef3['name'],logspath+'output-002.log');_0x37fef3[_0x236d52(0x115)]=='output-000.log'&&(fs['copyFileSync'](logspath+_0x37fef3['name'],logspath+'output-001.log'),fs[_0x236d52(0x26a)](logspath+_0x37fef3[_0x236d52(0x115)],''));});}}async function zipFiles(_0x25ee91){const _0x566422=_0x4f0a15;let _0x448593;if(_0x25ee91==_0x566422(0x22c))_0x448593=logspath;if(_0x25ee91==_0x566422(0x203))_0x448593=configpath;if(_0x25ee91==_0x566422(0x1b5))_0x448593=configpath;let _0x3412e2=fs[_0x566422(0x29c)](_0x448593,{'withFileTypes':!![]});const _0x426dfa=new require('node-zip')();_0x3412e2[_0x566422(0x232)](_0x327568=>{const _0x4c594a=_0x566422;if(!_0x327568[_0x4c594a(0x175)]()){let _0x99a9b7=fs[_0x4c594a(0x164)](_0x448593+_0x327568[_0x4c594a(0x115)]);if(_0x25ee91==_0x4c594a(0x203)){const _0x444255=/^bot-[0-9]{3}-config.json$/,_0x128258=_0x444255['test'](_0x327568[_0x4c594a(0x115)]);if(_0x128258){const _0x2da0f5=JSON['parse'](_0x99a9b7);_0x2da0f5[_0x4c594a(0x28d)][0x0]&&(_0x2da0f5[_0x4c594a(0x28d)][0x0][_0x4c594a(0x181)]=_0x4c594a(0x14c),_0x2da0f5['bot'][0x0][_0x4c594a(0x167)]=_0x4c594a(0x14c)),_0x99a9b7=JSON[_0x4c594a(0x215)](_0x2da0f5,null,0x2);}if(_0x327568[_0x4c594a(0x115)]==_0x4c594a(0x142)){const _0x5c4750=JSON['parse'](_0x99a9b7);if(_0x5c4750['settings'][_0x4c594a(0x1bd)])_0x5c4750[_0x4c594a(0x2c0)]['loginRequired']=![];if(_0x5c4750[_0x4c594a(0x2c0)]['bbPassword'])_0x5c4750[_0x4c594a(0x2c0)][_0x4c594a(0x285)]=_0x4c594a(0x14c);if(_0x5c4750[_0x4c594a(0x2c0)]['telegramToken'])_0x5c4750[_0x4c594a(0x2c0)]['telegramToken']=_0x4c594a(0x14c);if(_0x5c4750[_0x4c594a(0x2c0)]['telegramChatId'])_0x5c4750[_0x4c594a(0x2c0)][_0x4c594a(0x10f)]=null;_0x99a9b7=JSON[_0x4c594a(0x215)](_0x5c4750,null,0x2);}if(_0x327568[_0x4c594a(0x115)]!=_0x4c594a(0x163))_0x426dfa[_0x4c594a(0x1ef)](_0x327568['name'],_0x99a9b7);}else _0x426dfa[_0x4c594a(0x1ef)](_0x327568[_0x4c594a(0x115)],_0x99a9b7);}});const _0x5d3a30=_0x426dfa['generate']({'base64':![],'compression':'DEFLATE'});fs[_0x566422(0x26a)](zippath+(_0x25ee91+'.zip'),_0x5d3a30,_0x566422(0x12c));}async function unzipFile(_0x24fd72,_0x244758){const _0x31f53e=_0x4f0a15;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x31f53e(0x232)](_0x7b5f98=>{const _0x497757=_0x31f53e;if(!_0x7b5f98['isDirectory']())fs[_0x497757(0x172)](configpath+_0x7b5f98[_0x497757(0x115)]);});const _0x13de0b=fs[_0x31f53e(0x164)](_0x24fd72+_0x244758,_0x31f53e(0x12c)),_0x40aaa0=new require(_0x31f53e(0x205))(_0x13de0b,{'base64':![],'checkCRC32':!![]});Object[_0x31f53e(0x141)](_0x40aaa0['files'])[_0x31f53e(0x232)](_0x5cb9fd=>{const _0xf82fc5=_0x31f53e,_0x316685=_0x40aaa0[_0xf82fc5(0x113)][_0x5cb9fd];fs['writeFileSync'](configpath+_0x316685['name'],_0x316685[_0xf82fc5(0x283)]);}),fs[_0x31f53e(0x29c)](temppath,{'withFileTypes':!![]})[_0x31f53e(0x232)](_0x2d93d7=>{const _0x25ab04=_0x31f53e;if(!_0x2d93d7[_0x25ab04(0x175)]())fs[_0x25ab04(0x172)](temppath+_0x2d93d7[_0x25ab04(0x115)]);}),logger[_0x31f53e(0x185)](_0x31f53e(0x15a)),process[_0x31f53e(0x1b4)]({'restore':!![]},_0x2cce97=>{});}async function getPublicIp(){const _0x415fe6=_0x4f0a15;try{const _0x5f1c33=await axios[_0x415fe6(0x139)]('https://api.ipify.org?format=json');publicip=_0x5f1c33[_0x415fe6(0x261)]['ip'];}catch(_0x1584f4){}}async function triggerAnalytics(){const _0x108c90=_0x4f0a15;if(!publicip)await getPublicIp();const _0x51d52c=getBotsWithMode();let _0x310040=0x0;_0x51d52c[_0x108c90(0x232)](_0x3aaf51=>{const _0x5f275f=_0x108c90;if(_0x3aaf51[_0x5f275f(0x1da)]===_0x5f275f(0x1dd))_0x310040++;});const _0x34cf49=getBotExchanges();mixpanel[_0x108c90(0x201)](_0x108c90(0x1e3),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x51d52c[_0x108c90(0x17d)],'numbotsenabled':_0x310040,'exchanges':_0x34cf49});}async function getMessages(){const _0x3bdf55=_0x4f0a15,_0x1202b6=_0x3bdf55(0x25d),_0x4126b0=new GraphQLClient(_0x1202b6),_0x1bd3a9={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x31e785=serverversion[_0x3bdf55(0x25a)]('.'),_0x4bff60=_0x31e785[0x0]+'.'+_0x31e785[0x1],_0x1e8ecb=Math[_0x3bdf55(0x127)](settings[_0x3bdf55(0x27c)],settings['lastmsgemitted']),_0x5e58ed={'last':parseInt(_0x1e8ecb),'bbm':_0x4bff60},_0x5b7ef4=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x511788;try{_0x511788=await _0x4126b0[_0x3bdf55(0x144)](_0x5b7ef4,_0x5e58ed,_0x1bd3a9);}catch(_0x3751a7){}if(_0x511788&&_0x511788[_0x3bdf55(0x1ed)]){let _0x2a52db=settings[_0x3bdf55(0x27c)];newMessages=[];for(const _0x839ff0 of _0x511788[_0x3bdf55(0x1ed)]){newMessages[_0x3bdf55(0x29f)](_0x839ff0);if(_0x839ff0[_0x3bdf55(0x1fd)])updateSetting(_0x3bdf55(0x116),_0x839ff0[_0x3bdf55(0x1fd)]);let _0x2f3e3f=_0x839ff0[_0x3bdf55(0x1fd)]?serverversion>=_0x839ff0[_0x3bdf55(0x1fd)]:![];if(!_0x2f3e3f&&_0x839ff0['number']>_0x2a52db){if(_0x839ff0[_0x3bdf55(0x230)]==='any'||serverversion['startsWith'](_0x839ff0[_0x3bdf55(0x230)])){let _0x314e6f=''+_0x839ff0['title']+'\x0a\x0a'+_0x839ff0[_0x3bdf55(0x299)];const _0x17c2e6=await sendTelegramMsg(toTelegramMarkdown(_0x314e6f),_0x3bdf55(0x19c));if(_0x17c2e6)_0x2a52db=_0x839ff0[_0x3bdf55(0x262)];}}}updateAvailable=isNewerVersion(settings[_0x3bdf55(0x116)],serverversion),updateSetting(_0x3bdf55(0x27c),_0x2a52db),emitMessages();}}function emitMessages(){const _0x36b2e5=_0x4f0a15,_0x30745d=settings['lastmsgemitted'];let _0x382d8f=[];newMessages[_0x36b2e5(0x232)](_0x27a349=>{_0x27a349['number']>_0x30745d&&_0x382d8f['push'](_0x27a349);}),_0x382d8f[_0x36b2e5(0x17d)]>0x0&&getAllClients()[_0x36b2e5(0x232)](_0x5aba15=>{const _0x188bf5=_0x36b2e5;getSocket(_0x5aba15['id'])[_0x188bf5(0x21e)](_0x188bf5(0x299),_0x382d8f);});}function confirmMessage(_0x28b077){const _0x3b92a3=_0x4f0a15;updateSetting(_0x3b92a3(0x1d4),Number(_0x28b077));}function isNewerVersion(_0x2f1c9b,_0x6f0920){const _0x20e0a0=_0x4f0a15,_0x2af138=_0x6f0920[_0x20e0a0(0x25a)]('.'),_0x278650=_0x2f1c9b[_0x20e0a0(0x25a)]('.');for(var _0x318c2a=0x0;_0x318c2a<_0x278650[_0x20e0a0(0x17d)];_0x318c2a++){const _0x16812a=~~_0x278650[_0x318c2a],_0x542299=~~_0x2af138[_0x318c2a];if(_0x16812a>_0x542299)return!![];if(_0x16812a<_0x542299)return![];}return![];}function toTelegramMarkdown(_0x5b4004){const _0x3c5607=_0x4f0a15,_0x1285fd=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x486ebe=/\*{2}(.+?)\*{2}/gim;return _0x5b4004=_0x5b4004[_0x3c5607(0x1ce)](_0x1285fd,'$1_$2_$3')[_0x3c5607(0x1ce)](_0x486ebe,_0x3c5607(0x1cb)),_0x5b4004;}async function validateConfigFile(){const _0xfe36a6=_0x4f0a15,_0x584bfb=dbConfig['get'](_0xfe36a6(0x18e))[_0xfe36a6(0x27a)](_0xfe36a6(0x11e))[_0xfe36a6(0x200)]()||[];if(_0x584bfb[_0xfe36a6(0x17d)]==0x0){let _0x339e83=0x0,_0x4dec8d=[];const _0x3af097=/^bot-([0-9]{3})-config.json$/,_0x3e4848=fs[_0xfe36a6(0x29c)](configpath);_0x3e4848['forEach'](_0x11e14b=>{const _0x15d22f=_0xfe36a6,_0x3b69ea=_0x3af097[_0x15d22f(0x15b)](_0x11e14b);if(_0x3b69ea){const _0x3490b9=_0x3b69ea[0x1];let _0x46e030=getBotAttributes(_0x3490b9);_0x4dec8d[_0x15d22f(0x29f)]({'botID':_0x3490b9,'botname':_0x46e030[_0x15d22f(0x13d)],'status':_0x15d22f(0x22f),'live':_0x15d22f(0x193)}),_0x339e83++;}}),_0x339e83!=0x0&&(dbConfig[_0xfe36a6(0x139)]('bots')['assign'](_0x4dec8d)[_0xfe36a6(0x245)](),config=_0x4dec8d,restoredConfigFile=_0x339e83);}}async function restoreConfigNotify(_0x3a1075){const _0x40d227=_0x4f0a15;let _0xd20a2f;if(restoredConfigFile==0x1)_0xd20a2f=_0x40d227(0x2af);else _0xd20a2f='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x3a1075)io['to'](_0x40d227(0x247))['emit'](_0x40d227(0x221),_0xd20a2f);else{logger[_0x40d227(0x24b)]('-----------------------------------------------------------------------------------'),logger['simple'](_0xd20a2f),logger[_0x40d227(0x24b)](_0x40d227(0x174)),logger[_0x40d227(0x24b)]('');if(tgBot&&settings[_0x40d227(0x10f)]&&settings[_0x40d227(0x1b6)]!=_0x40d227(0x136))tgBot[_0x40d227(0x159)](settings['telegramChatId'],_0x40d227(0x21a)+_0xd20a2f)[_0x40d227(0x13b)](_0x9905af=>{telegramError(_0x9905af);});}}function validateCredentials(_0x55b4a3,_0x8e6ee1){const _0x2349e8=_0x4f0a15;if(_0x55b4a3[_0x2349e8(0x249)]==settings[_0x2349e8(0x268)]&&bcrypt[_0x2349e8(0x273)](_0x55b4a3[_0x2349e8(0x150)],settings[_0x2349e8(0x285)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x2349e8(0x28c),'token':null};else{const _0x8165f=generateLoginToken(_0x8e6ee1);return{'allow':!![],'reason':_0x2349e8(0x196),'token':_0x8165f};}}else return{'allow':![],'reason':_0x2349e8(0x120),'token':null};}function refreshToken(_0x5e8b8b){const _0xb9ddc4=_0x4f0a15,_0x5766f7=generateLoginToken(_0x5e8b8b);return{'allow':!![],'reason':_0xb9ddc4(0x196),'token':_0x5766f7};}function validateAccess(_0x2e1e06,_0x5c1e5a,_0x512805){const _0x1785e8=_0x4f0a15,_0xa32c7c=_0x512805?_0x512805:devices[_0x5c1e5a]['ip'];let _0x6b6c08;const _0xc4b43d=_0x1d2ee2=>{const _0x4130a1=_0x5ac2;if(settings[_0x4130a1(0x1bd)]){if(settings[_0x4130a1(0x19b)]){if(telegram2FaApproved(_0x5c1e5a)){const _0x2c5016=generateLoginToken(_0x5c1e5a);return{'allow':!![],'reason':_0x4130a1(0x1c3),'token':_0x2c5016};}else return{'allow':![],'reason':_0x4130a1(0x2bb),'token':null};}else return _0x6b6c08=validToken(_0x1d2ee2,_0x5c1e5a),_0x6b6c08[_0x4130a1(0x158)](_0x4130a1(0x189))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x1d2ee2}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':_0x4130a1(0x112),'token':null};};if(settings['whitelistEnabled']){let _0x4f7fa1=[...settings[_0x1785e8(0x23b)],_0x1785e8(0x1c1),_0x1785e8(0x207),_0x1785e8(0x2b8)];if(_0x4f7fa1[_0x1785e8(0x24a)](_0xa32c7c))return _0xc4b43d(_0x2e1e06);else{_0x6b6c08=validToken(_0x2e1e06,_0x5c1e5a);if(_0x6b6c08['hasOwnProperty'](_0x1785e8(0x189)))return _0xc4b43d(_0x2e1e06);else{if(telegramIpApproved(_0x5c1e5a)){const _0x39e6c0=generateToken(_0x5c1e5a);return _0x6b6c08=_0xc4b43d(_0x2e1e06),_0x6b6c08[_0x1785e8(0x11b)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x39e6c0}:_0x6b6c08;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x1785e8(0x1a4),'token':null}:{'allow':![],'reason':_0x1785e8(0x1bf),'token':null};}}}else return _0xc4b43d(_0x2e1e06);}function timelyDecrypt(_0x353a0f,_0x2b890d=!![]){const _0x42191a=_0x4f0a15;if(_0x353a0f)try{const _0x5057ac=crypt[_0x42191a(0x2ba)](secure['privateKey'],_0x353a0f)['message'],_0x273d7e=_0x5057ac[_0x42191a(0x25a)]('@')[0x0],_0x260796=_0x5057ac[_0x42191a(0x25a)]('@')[0x1],_0x35a3ab=new Date()['getTime']();if(_0x2b890d){if(_0x35a3ab-_0x260796<maxSecretAge*0x3e8)return _0x273d7e;else return![];}else return _0x273d7e;}catch(_0x4869c2){return![];}else return![];}const validToken=(_0x4b2336,_0x5b3d44)=>{const _0x30db8e=_0x4f0a15,_0x1a943b=devices[_0x5b3d44]['ip'];if(!_0x4b2336)return{'error':'No\x20authentication\x20token'};for(let _0x519cae of blacklist){if(_0x519cae[_0x30db8e(0x254)]==_0x4b2336)return{'error':_0x30db8e(0x1c8)};}let _0x29ab32;try{_0x29ab32=jwt[_0x30db8e(0x28b)](_0x4b2336,secure['secret']+_0x5b3d44);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x29ab32['hasOwnProperty'](_0x30db8e(0x10d))&&!_0x29ab32[_0x30db8e(0x158)](_0x30db8e(0x249))||!_0x29ab32['hasOwnProperty'](_0x30db8e(0x270)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x29ab32['hasOwnProperty'](_0x30db8e(0x249))&&_0x29ab32[_0x30db8e(0x158)]('clientip')){const {clientip:_0x4f8ced}=_0x29ab32;return _0x1a943b==_0x4f8ced?{'success':_0x30db8e(0x213)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x29ab32['hasOwnProperty'](_0x30db8e(0x249))&&_0x29ab32['hasOwnProperty'](_0x30db8e(0x10d))){const {username:_0x4033ba,clientip:_0x3c98cc}=_0x29ab32;return settings[_0x30db8e(0x268)]==_0x4033ba&&_0x1a943b==_0x3c98cc?{'success':_0x30db8e(0x213)}:{'error':_0x30db8e(0x1a9)};}}},generateLoginToken=_0x5dd1a4=>{const _0x184e31=_0x4f0a15;if(_0x5dd1a4){const _0x188439=devices[_0x5dd1a4]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x188439},secure[_0x184e31(0x29a)]+_0x5dd1a4,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x124241=>{const _0x208261=_0x4f0a15;if(_0x124241){const _0x492391=devices[_0x124241]['ip'];return jwt['sign']({'clientip':_0x492391},secure['secret']+_0x124241,{'expiresIn':devices[_0x124241][_0x208261(0x25e)][_0x208261(0x294)]*0x3c});}else return![];},telegramIpApproved=_0x2d4a9f=>{const _0x49228b=_0x4f0a15;let _0x464d83=![];return devices[_0x2d4a9f][_0x49228b(0x25e)]&&devices[_0x2d4a9f][_0x49228b(0x25e)][_0x49228b(0x294)]!=_0x49228b(0x10e)&&(_0x464d83=devices[_0x2d4a9f]['telegramIpApproval'][_0x49228b(0x10d)]==devices[_0x2d4a9f]['ip']&&new Date()[_0x49228b(0x281)]()-devices[_0x2d4a9f][_0x49228b(0x25e)][_0x49228b(0x274)]<devices[_0x2d4a9f][_0x49228b(0x25e)][_0x49228b(0x294)]*0x3c*0x3e8),_0x464d83;},telegram2FaApproved=_0x17e28a=>{const _0x128288=_0x4f0a15;let _0x5670e3=![];return devices[_0x17e28a][_0x128288(0x10c)]&&devices[_0x17e28a][_0x128288(0x10c)][_0x128288(0x294)]!='reject'&&(_0x5670e3=devices[_0x17e28a]['telegram2FaApproval'][_0x128288(0x10d)]==devices[_0x17e28a]['ip']&&new Date()[_0x128288(0x281)]()-devices[_0x17e28a][_0x128288(0x10c)][_0x128288(0x274)]<devices[_0x17e28a][_0x128288(0x10c)][_0x128288(0x294)]*0x3c*0x3e8),_0x5670e3;},normalizeIP=_0x245ec4=>{const _0x78f181=_0x4f0a15;let _0xb445c2=null,_0x444452=null;if(ipaddr[_0x78f181(0x13f)](_0x245ec4)){const _0x276795=ipaddr[_0x78f181(0x13e)](_0x245ec4);_0x276795[_0x78f181(0x280)]()===_0x78f181(0x1dc)?(_0x276795['isIPv4MappedAddress']()&&(_0xb445c2=_0x276795[_0x78f181(0xff)]()[_0x78f181(0x223)]()),_0x444452=_0x276795[_0x78f181(0x223)]()):(_0xb445c2=_0x276795[_0x78f181(0x223)](),_0x444452=_0x276795[_0x78f181(0x1cc)]()[_0x78f181(0x223)]());}return{'show':_0xb445c2?_0xb445c2:_0x444452,'store':_0x444452};};function formatDate(_0x568de4){const _0x8f2741=_0x4f0a15;return _0x568de4[_0x8f2741(0x1e1)]()+'/'+(_0x568de4[_0x8f2741(0x23e)]()+0x1)[_0x8f2741(0x223)]()['padStart'](0x2,'0')+'/'+_0x568de4[_0x8f2741(0x132)]()[_0x8f2741(0x223)]()[_0x8f2741(0xfe)](0x2,'0')+'\x20'+_0x568de4[_0x8f2741(0x27d)]()[_0x8f2741(0x223)]()[_0x8f2741(0xfe)](0x2,'0')+':'+_0x568de4[_0x8f2741(0x199)]()[_0x8f2741(0x223)]()[_0x8f2741(0xfe)](0x2,'0')+':'+_0x568de4[_0x8f2741(0x2ae)]()[_0x8f2741(0x223)]()[_0x8f2741(0xfe)](0x2,'0');}function sleep(_0x234856){return new Promise(_0x112bb1=>setTimeout(_0x112bb1,_0x234856));}