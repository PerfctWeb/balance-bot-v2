const _0x414357=_0x1d21;(function(_0x303ccd,_0x182ad8){const _0x8191aa=_0x1d21,_0x3429b9=_0x303ccd();while(!![]){try{const _0x4cf41a=-parseInt(_0x8191aa(0x21f))/0x1+parseInt(_0x8191aa(0xe5))/0x2*(-parseInt(_0x8191aa(0x1cd))/0x3)+parseInt(_0x8191aa(0x20f))/0x4*(parseInt(_0x8191aa(0x194))/0x5)+-parseInt(_0x8191aa(0x11b))/0x6+parseInt(_0x8191aa(0x215))/0x7+parseInt(_0x8191aa(0x14d))/0x8*(parseInt(_0x8191aa(0x225))/0x9)+-parseInt(_0x8191aa(0x223))/0xa;if(_0x4cf41a===_0x182ad8)break;else _0x3429b9['push'](_0x3429b9['shift']());}catch(_0x19636d){_0x3429b9['push'](_0x3429b9['shift']());}}}(_0x53d5,0xe4564));const _0x169b55=function(){let _0x1c8d82=!![];return function(_0x4c0563,_0x5f11b8){const _0x24884c=_0x1c8d82?function(){if(_0x5f11b8){const _0xc60b3b=_0x5f11b8['apply'](_0x4c0563,arguments);return _0x5f11b8=null,_0xc60b3b;}}:function(){};return _0x1c8d82=![],_0x24884c;};}(),_0xe6bf6d=_0x169b55(this,function(){const _0x4d12fc=_0x1d21;return _0xe6bf6d[_0x4d12fc(0xe3)]()[_0x4d12fc(0xf0)](_0x4d12fc(0xbc))[_0x4d12fc(0xe3)]()[_0x4d12fc(0x251)](_0xe6bf6d)[_0x4d12fc(0xf0)]('(((.+)+)+)+$');});_0xe6bf6d();'use strict';process[_0x414357(0x1dd)][_0x414357(0xc6)]=0x1;const childProcess=require(_0x414357(0x1fd)),fs=require('fs'),fns=require(_0x414357(0xe7)),low=require(_0x414357(0x13d)),FileSync=require(_0x414357(0xd3)),path=require(_0x414357(0x229)),crypto=require('crypto'),Crypt=require(_0x414357(0x1f2))['Crypt'],RSA=require(_0x414357(0x1f2))[_0x414357(0x132)],bcrypt=require(_0x414357(0x1ee)),jwt=require(_0x414357(0x10f)),ipaddr=require(_0x414357(0x1e5)),argv=require('yargs/yargs')(process[_0x414357(0x152)][_0x414357(0xa6)](0x2))[_0x414357(0x152)],uuidRandom=require(_0x414357(0x208)),TelegramBot=require(_0x414357(0x205)),Mixpanel=require(_0x414357(0x25d)),axios=require(_0x414357(0x144)),{GraphQLClient,gql}=require(_0x414357(0x1ed)),util=require(_0x414357(0x156)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x414357(0x15f)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x414357(0x146)](PORT)&&(console[_0x414357(0xad)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x414357(0xfa)),process['exit'](0x1));const HOST=argv['host']||null,userID=argv[_0x414357(0xe0)]||'',debugging=argv['d']||![],nodeversion=process[_0x414357(0x1e4)]['node'];let bbpath='bb/',bbpath2='';function _0x1d21(_0x479188,_0x5ed0d6){const _0x566bd2=_0x53d5();return _0x1d21=function(_0xe6bf6d,_0x169b55){_0xe6bf6d=_0xe6bf6d-0x84;let _0x53d5ba=_0x566bd2[_0xe6bf6d];return _0x53d5ba;},_0x1d21(_0x479188,_0x5ed0d6);}const botfile=_0x414357(0x20a),configfile=_0x414357(0xdc),settingsfile=_0x414357(0x182),securefile=_0x414357(0x17a),maxBackups=0xa;let validInstallation=!![];!fs[_0x414357(0x1e7)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x414357(0x1d5)),configpath=userID?bbpath+_0x414357(0xdd)+userID+'/':bbpath+'config/',configbackuppath=configpath+'backup/',logspath=userID?bbpath+_0x414357(0x97)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x414357(0x14b)+userID+'/':bbpath+_0x414357(0x14b);!fs[_0x414357(0x1e7)](configpath)&&fs[_0x414357(0x129)](configpath);!fs[_0x414357(0x1e7)](configbackuppath)&&fs[_0x414357(0x129)](configbackuppath);!fs[_0x414357(0x1e7)](logspath)&&fs[_0x414357(0x129)](logspath);!fs['existsSync'](zippath)&&fs['mkdirSync'](zippath);!fs[_0x414357(0x1e7)](temppath)&&fs[_0x414357(0x129)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x414357(0xb4)]({'bots':[]})['write']();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x414357(0xb4)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x414357(0xf5),'onepagemode':![]}})[_0x414357(0xac)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x414357(0x138),'rsaStandard':_0x414357(0x1fe)});const saltRounds=0xa,mixpanel=Mixpanel[_0x414357(0x196)](_0x414357(0x1ff),{'host':_0x414357(0xaf)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x414357(0x85)]&&settings['telegramToken']!=''&&settings[_0x414357(0x1c2)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x432f4f,_0x5369d6)=>{const _0x50091a=_0x414357,_0x4c7c80=/#[A-Z]{3}#/g;if(typeof _0x432f4f=='string'){!_0x5369d6?_0x432f4f=_0x432f4f[_0x50091a(0x212)](_0x4c7c80,''):(_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#BLU#/g,'\x1b[34m'),_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#RED#/g,'\x1b[31m'),_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#YEL#/g,_0x50091a(0x22e)),_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#MAG#/g,_0x50091a(0x21c)),_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#CYA#/g,_0x50091a(0x222)),_0x432f4f=_0x432f4f[_0x50091a(0x212)](/#RES#/g,'\x1b[0m'));;}return _0x432f4f;},logger={'screen':_0x124575=>{const _0x158a21=_0x414357;console[_0x158a21(0xad)](parseColor(_0x124575,!![]));},'simple':_0x48e2c6=>{const _0x1fa4f2=_0x414357;console[_0x1fa4f2(0xad)](parseColor(_0x48e2c6,!![])),loggerfile[_0x1fa4f2(0xac)](util[_0x1fa4f2(0x143)](parseColor(_0x48e2c6,![]))+'\x0a');},'full':async _0x3c5465=>{const _0x383cb0=_0x414357,_0x364985=getTimeStamp()+_0x383cb0(0x135)+_0x3c5465;console[_0x383cb0(0xad)](parseColor(_0x364985,!![])),loggerfile['write'](util['format'](parseColor(_0x364985,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x383cb0(0x242)]!=_0x383cb0(0x16f))await tgBot[_0x383cb0(0x218)](settings[_0x383cb0(0x13a)],_0x383cb0(0x227)+parseColor(_0x3c5465,![]))[_0x383cb0(0x186)](_0x381c57=>{telegramError(_0x381c57);});},'debug':async(_0x5b1bb1,_0x37f6ea='')=>{const _0x29ec73=_0x414357,_0x1a9929=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x5b1bb1;if(debugging)console[_0x29ec73(0xad)](parseColor(_0x1a9929,!![]));loggerfile[_0x29ec73(0xac)](util['format'](parseColor(_0x1a9929,![]))+'\x0a');if(_0x37f6ea){if(debugging)console[_0x29ec73(0xad)](_0x37f6ea);loggerfile[_0x29ec73(0xac)](util[_0x29ec73(0x143)](_0x37f6ea)+'\x0a');}}};process['on'](_0x414357(0x11f),function(_0x5c31c2){logger['simple'](_0x5c31c2);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x414357(0x155)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x414357(0x101)),app=express(),http=require(_0x414357(0x224))['createServer'](app);app[_0x414357(0x18d)](fileUpload({'useTempFiles':!![]})),app['get'](_0x414357(0x248),async(_0x166bd6,_0x2596ac)=>{const _0x39a169=_0x414357,_0x3adf39=_0x166bd6[_0x39a169(0xce)][_0x39a169(0x17c)],_0x514492=getClientsWithBotID(_0x39a169(0xb7)),_0x181d33=_0x166bd6[_0x39a169(0x1e6)][_0x39a169(0x217)],_0x3b4d34=timelyDecrypt(_0x181d33,![]),_0x2dc90d=_0x514492[_0x39a169(0x21e)](_0x37aec5=>_0x37aec5[_0x39a169(0x217)]==_0x3b4d34);if(_0x2dc90d){const _0x326291=normalizeIP(_0x166bd6[_0x39a169(0x197)]['remoteAddress'])[_0x39a169(0x134)],_0x504712=_0x166bd6[_0x39a169(0x1e6)][_0x39a169(0x140)];if(validateAccess(_0x504712,_0x3b4d34,_0x326291)[_0x39a169(0x18c)])_0x3adf39=='backup'&&await backupConfigFiles(),await zipFiles(_0x3adf39),_0x2596ac[_0x39a169(0xcb)](zippath+(_0x3adf39+_0x39a169(0x1bd)),_0x13883d=>{const _0x4d499e=_0x39a169;_0x13883d&&(logger[_0x4d499e(0x219)]('Failed\x20to\x20download\x20'+_0x3adf39),logger[_0x4d499e(0x1f9)](_0x13883d));});else logger['full']('Unauthorized\x20attempt\x20to\x20download\x20'+_0x3adf39+_0x39a169(0x247));}else logger[_0x39a169(0x219)](_0x39a169(0x22b)+_0x3adf39+_0x39a169(0xbd));}),app[_0x414357(0x1aa)](_0x414357(0x1d7),async(_0x334628,_0x3cba9e)=>{const _0x370b45=_0x414357,_0x1b5f84=getClientsWithBotID(_0x370b45(0xb7)),_0x1e5824=_0x334628['headers'][_0x370b45(0x217)],_0x2b04c0=timelyDecrypt(_0x1e5824,![]),_0x233848=_0x1b5f84[_0x370b45(0x21e)](_0x26cce1=>_0x26cce1[_0x370b45(0x217)]==_0x2b04c0);logger[_0x370b45(0xae)]('Backup\x20file\x20uploaded');if(_0x233848){const _0x43b905=normalizeIP(_0x334628[_0x370b45(0x197)][_0x370b45(0x89)])[_0x370b45(0x134)],_0x587dca=_0x334628[_0x370b45(0x1e6)][_0x370b45(0x140)];if(validateAccess(_0x587dca,_0x2b04c0,_0x43b905)[_0x370b45(0x18c)]){if(_0x334628[_0x370b45(0xf8)]){const _0x502d83=_0x334628[_0x370b45(0xf8)][_0x370b45(0x258)];await _0x502d83['mv'](temppath+_0x502d83[_0x370b45(0x114)]),_0x3cba9e['send']({'status':!![],'message':_0x370b45(0x231)});const _0x4efded=getBotsWithMode();_0x4efded[_0x370b45(0x17d)]>0x0?confirmRestore(temppath,_0x502d83[_0x370b45(0x114)]):unzipFile(temppath,_0x502d83[_0x370b45(0x114)]);}}else logger[_0x370b45(0x219)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)');}else logger[_0x370b45(0x219)](_0x370b45(0x1a2));}),app[_0x414357(0x18d)](express['static'](path[_0x414357(0x112)](__dirname,bbpath2,_0x414357(0x10e)))),app[_0x414357(0x18d)](express[_0x414357(0xfe)](path[_0x414357(0x112)](__dirname,bbpath2,_0x414357(0x19d)))),app[_0x414357(0x142)]('/',function(_0xe938f5,_0x5b2607){const _0x5d0dbf=_0x414357;_0x5b2607[_0x5d0dbf(0x20e)](path[_0x5d0dbf(0x112)](__dirname,bbpath2,_0x5d0dbf(0x10e),_0x5d0dbf(0x120)));}),app[_0x414357(0x142)](_0x414357(0x1d4),function(_0x50222e,_0x5a3478){const _0x183f63=_0x414357;_0x5a3478[_0x183f63(0x20e)](path[_0x183f63(0x112)](__dirname,bbpath2,_0x183f63(0x19d),_0x183f63(0x120)));}),app[_0x414357(0x142)](_0x414357(0x1b7),(_0x17650b,_0x1c1433)=>{const _0x530af0=_0x414357;_0x1c1433[_0x530af0(0x20e)](path[_0x530af0(0x112)](__dirname,bbpath2,'build',_0x530af0(0x120)));}),app['get'](_0x414357(0x203),(_0x12b659,_0x3ee971)=>{const _0x1d0fae=_0x414357;_0x3ee971['sendFile'](path[_0x1d0fae(0x112)](__dirname,bbpath2,_0x1d0fae(0x19d),_0x1d0fae(0x120)));}),app[_0x414357(0x142)]('/:bot/coins',(_0x188216,_0x1fd82d)=>{const _0x2064a8=_0x414357;_0x1fd82d[_0x2064a8(0x20e)](path['join'](__dirname,bbpath2,'build',_0x2064a8(0x120)));}),app['get'](_0x414357(0x199),(_0x3d9168,_0x4dc098)=>{const _0xce5d12=_0x414357;_0x4dc098[_0xce5d12(0x20e)](path[_0xce5d12(0x112)](__dirname,bbpath2,_0xce5d12(0x19d),_0xce5d12(0x120)));}),app['get'](_0x414357(0xd6),(_0x1a0bc9,_0x3563ba)=>{const _0x2d4e31=_0x414357;_0x3563ba[_0x2d4e31(0x20e)](path['join'](__dirname,bbpath2,_0x2d4e31(0x19d),_0x2d4e31(0x120)));}),app[_0x414357(0x142)]('/:bot/support',(_0x26f195,_0x4f6447)=>{const _0x21ae7b=_0x414357;_0x4f6447['sendFile'](path[_0x21ae7b(0x112)](__dirname,bbpath2,_0x21ae7b(0x19d),_0x21ae7b(0x120)));});if(HOST)http['listen'](PORT,HOST);else http[_0x414357(0x226)](PORT);const io=require(_0x414357(0x187))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x210b41=_0x414357;let _0x357cdb=_0x210b41(0x1fc);const _0x492a15=networkInterfaces(),_0x465163={};for(const _0x45eb16 of Object['keys'](_0x492a15)){for(const _0x5ac654 of _0x492a15[_0x45eb16]){if((_0x5ac654[_0x210b41(0x16d)]==_0x210b41(0x126)||_0x5ac654['family']==0x4)&&!_0x5ac654[_0x210b41(0x1e8)]){const _0x38a3dd=ipaddr['parse'](_0x5ac654['address'])[_0x210b41(0x19e)]();_0x38a3dd!=_0x210b41(0x174)&&(!_0x465163[_0x45eb16]&&(_0x465163[_0x45eb16]=[]),_0x465163[_0x45eb16]['push'](_0x5ac654['address']),_0x357cdb=_0x5ac654[_0x210b41(0x13c)]);}}}return{'serverip':_0x357cdb,'netinterfaces':_0x465163};}async function startServer(){const _0x5aeac5=_0x414357,{serverip:_0x132a53,netinterfaces:_0x2f4cca}=getServerIP();logger[_0x5aeac5(0x1f9)](''),logger[_0x5aeac5(0x1f9)](_0x5aeac5(0x151)),await logger['full'](_0x5aeac5(0x167)+serverversion+_0x5aeac5(0x254)+('=>\x20Go\x20to\x20#CYA#http://127.0.0.1:'+PORT+_0x5aeac5(0x214))+(_0x5aeac5(0x201)+_0x132a53+':'+PORT+_0x5aeac5(0x1d1))),logger[_0x5aeac5(0x1f9)](_0x5aeac5(0x151));if(config[_0x5aeac5(0x17d)]!=0x0)for(const _0x198a0b of config){if(_0x198a0b[_0x5aeac5(0x1a3)]==_0x5aeac5(0x1fb)||_0x198a0b[_0x5aeac5(0x1a3)]=='new')await logger[_0x5aeac5(0x219)]('Starting\x20bot\x20|\x20Bot\x20'+_0x198a0b[_0x5aeac5(0x1f8)]+'\x20|\x20'+_0x198a0b[_0x5aeac5(0xd1)]),startBot([_0x198a0b['botID'],userID],{'cwd':bbpath},function(_0x32ce9d){const _0x19d8a8=_0x5aeac5;if(_0x32ce9d)logger[_0x19d8a8(0x219)](_0x32ce9d);});else(_0x198a0b[_0x5aeac5(0x1a3)]==_0x5aeac5(0x1b3)||_0x198a0b[_0x5aeac5(0x1a3)]=='new-disabled')&&await logger[_0x5aeac5(0x219)](_0x5aeac5(0x1a4)+_0x198a0b[_0x5aeac5(0x1f8)]+'\x20|\x20'+_0x198a0b[_0x5aeac5(0xd1)]);}else!newBot&&logger[_0x5aeac5(0x1f9)](_0x5aeac5(0x195));if(newBot)addBot();logger[_0x5aeac5(0x1f9)](_0x5aeac5(0x151)),logger[_0x5aeac5(0x1f9)](''),await logger[_0x5aeac5(0xae)](_0x5aeac5(0xf7)+nodeversion),await logger[_0x5aeac5(0xae)](_0x5aeac5(0x96),_0x2f4cca);}function startSocket(){const _0x5542cd=_0x414357;io['on'](_0x5542cd(0xd2),_0x1c2598=>{const _0x29c3b8=_0x5542cd;let _0x3435dd,_0x40f869,_0x5a4127,_0x246259,_0x144a20;const _0x3bf434=_0x1c2598[_0x29c3b8(0x23d)][_0x29c3b8(0x1e6)][_0x29c3b8(0x239)];_0x40f869=_0x3bf434[_0x29c3b8(0x15a)](/bot[0-9]{3}/);if(_0x40f869)_0x5a4127=_0x40f869[0x0]['match'](/[0-9]{3}/);if(_0x5a4127)_0x3435dd=_0x5a4127[0x0];else _0x3435dd='botmanager';const _0x234db2=_0x1c2598[_0x29c3b8(0x23d)]['auth']['encryptedUuid'];if(!_0x234db2)_0x1c2598[_0x29c3b8(0x1a9)](_0x29c3b8(0x1a3),{'publicKey':secure[_0x29c3b8(0x139)]});else{_0x246259=timelyDecrypt(_0x234db2,![]);if(!_0x246259)_0x1c2598[_0x29c3b8(0x1a9)]('status',{'publicKey':secure[_0x29c3b8(0x139)]});else{_0x144a20=normalizeIP(_0x1c2598[_0x29c3b8(0xcf)][_0x29c3b8(0x89)])[_0x29c3b8(0x134)];if(!devices[_0x246259])devices[_0x246259]={'uuid':_0x246259,'access':{'token':null}};devices[_0x246259]['ip']=_0x144a20;const _0x230e4f=addClient(_0x1c2598['id'],_0x246259,_0x3435dd);setAccess(_0x230e4f),emitMessages(),_0x1c2598['on']('login',_0x434754=>{const _0x4a7405=_0x29c3b8,_0x41e573=timelyDecrypt(_0x434754[_0x4a7405(0xb8)]);if(_0x41e573){_0x434754={'username':_0x434754['username'],'password':_0x41e573},devices[_0x246259]['access']=validateCredentials(_0x434754,_0x246259);if(devices[_0x246259]['access'][_0x4a7405(0x18c)]==![]&&devices[_0x246259][_0x4a7405(0xb9)][_0x4a7405(0x1c1)]=='2FA\x20login\x20required')_0x1c2598[_0x4a7405(0x1a9)]('status',{'access':devices[_0x246259][_0x4a7405(0xb9)]}),loginAccess2FA(_0x246259,_0x144a20);else{if(devices[_0x246259][_0x4a7405(0xb9)][_0x4a7405(0x18c)]==![]&&devices[_0x246259]['access']['reason']==_0x4a7405(0x1b6))_0x1c2598[_0x4a7405(0x1a9)](_0x4a7405(0x1a3),{'access':devices[_0x246259][_0x4a7405(0xb9)]});else devices[_0x246259]['access'][_0x4a7405(0x18c)]&&devices[_0x246259]['access']['reason']==_0x4a7405(0x12e)&&(getClientsWithUuid(_0x246259)[_0x4a7405(0xe1)](_0x3ab523=>{setAccess(_0x3ab523);}),logger['debug'](_0x4a7405(0x25b)+_0x246259['slice'](-0x8)),setTokenRefresh(_0x246259),setSessionTimeout(_0x4a7405(0x23a),_0x246259));}}else logger['full'](_0x4a7405(0xc4));}),_0x1c2598['on'](_0x29c3b8(0x22c),()=>{resetPassword();}),_0x1c2598['on'](_0x29c3b8(0x17b),_0xf60dd1=>{removeClient(_0x1c2598['id']);}),_0x3435dd==_0x29c3b8(0xb7)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x40cae1){const _0x1648f1=_0x414357;if(_0x40cae1!=_0x1648f1(0xb7)&&config[_0x1648f1(0x164)]!=''){if(pid[_0x40cae1])pid[_0x40cae1][_0x1648f1(0x173)]({'function':_0x1648f1(0xc8),'args':null});}_0x40cae1!=_0x1648f1(0xb7)&&broadcastToBots('bots',JSON[_0x1648f1(0x1a8)](config));}function reloadBotManager(){const _0x2c2aa6=_0x414357;getClientsWithBotID(_0x2c2aa6(0xb7))['forEach'](_0x572d3d=>{const _0x2e5811=_0x2c2aa6;getSocket(_0x572d3d['id'])['emit'](_0x2e5811(0x1a3),{'access':{'allow':![],'reason':_0x2e5811(0x1eb),'token':null}});});}function getSocket(_0x58c987){const _0x5ab372=_0x414357;return io[_0x5ab372(0x1c6)][_0x5ab372(0x1c6)][_0x5ab372(0x142)](_0x58c987);}function setAccess(_0x5a1ca3){const _0xffe0ab=_0x414357,_0x4deb76=getSocket(_0x5a1ca3['id']),_0x1fe3ea=_0x5a1ca3[_0xffe0ab(0x217)],_0x4b9835=_0x5a1ca3[_0xffe0ab(0x14f)];devices[_0x1fe3ea][_0xffe0ab(0xb9)]=validateAccess(devices[_0x1fe3ea][_0xffe0ab(0xb9)]['token'],_0x1fe3ea),logger[_0xffe0ab(0xae)](_0xffe0ab(0x191)+devices[_0x1fe3ea][_0xffe0ab(0xb9)][_0xffe0ab(0x1c1)]+_0xffe0ab(0x179)+_0x5a1ca3['id'][_0xffe0ab(0xa6)](-0x8)+'\x20|\x20user:\x20...'+_0x1fe3ea[_0xffe0ab(0xa6)](-0x8)),_0x4deb76[_0xffe0ab(0x112)](_0x1fe3ea);if(devices[_0x1fe3ea][_0xffe0ab(0xb9)][_0xffe0ab(0x18c)]){_0x4deb76[_0xffe0ab(0x112)](_0x4b9835);if(_0x4b9835=='botmanager')initializeSocketBotManager(_0x4deb76);else initializeSocketBot(_0x4deb76);initClient(_0x4b9835);}devices[_0x1fe3ea]['access']['token']&&devices[_0x1fe3ea]['access']['reason']==_0xffe0ab(0x1be)&&setSessionTimeout(_0xffe0ab(0x171),_0x1fe3ea),devices[_0x1fe3ea][_0xffe0ab(0xb9)][_0xffe0ab(0x125)]&&devices[_0x1fe3ea]['access'][_0xffe0ab(0x1c1)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x1fe3ea),_0x4deb76['emit']('status',{'status':_0x5a1ca3[_0xffe0ab(0x1a5)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x1fe3ea][_0xffe0ab(0xb9)],'externalip':devices[_0x1fe3ea]['ip'],'publicKey':secure[_0xffe0ab(0x139)],'userid':settings[_0xffe0ab(0xff)],'validInstallation':validInstallation}),devices[_0x1fe3ea][_0xffe0ab(0xb9)][_0xffe0ab(0x18c)]==![]&&devices[_0x1fe3ea][_0xffe0ab(0xb9)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x1fe3ea,devices[_0x1fe3ea]['ip']);}function setSessionTimeout(_0x29c55f,_0x3eaac6){const _0x5821d7=_0x414357;let _0x3ed56e;if(_0x29c55f==_0x5821d7(0x23a))_0x3ed56e=loginExpiry*0x3c*0x3e8;else _0x3ed56e=devices[_0x3eaac6][_0x5821d7(0x19a)][_0x5821d7(0x169)]*0x3c*0x3e8-(new Date()[_0x5821d7(0x23c)]()-devices[_0x3eaac6][_0x5821d7(0x19a)][_0x5821d7(0xc3)]);if(devices[_0x3eaac6]['pidExpireLogin'])clearTimeout(devices[_0x3eaac6][_0x5821d7(0x236)]);devices[_0x3eaac6][_0x5821d7(0x236)]=setTimeout(()=>{const _0x1a78ee=_0x5821d7;if(devices[_0x3eaac6][_0x1a78ee(0x147)])clearTimeout(devices[_0x3eaac6]['pidRefreshToken']);removeSocketListeners(_0x3eaac6),addBlacklist(_0x3eaac6),devices[_0x3eaac6][_0x1a78ee(0x19a)]=null,devices[_0x3eaac6][_0x1a78ee(0x1ef)]=null,devices[_0x3eaac6]['access']['token']=null,logger['debug'](_0x1a78ee(0x157)+_0x3eaac6[_0x1a78ee(0xa6)](-0x8)),devices[_0x3eaac6][_0x1a78ee(0xb9)]=validateAccess(devices[_0x3eaac6]['access']['token'],_0x3eaac6),!(devices[_0x3eaac6][_0x1a78ee(0xb9)][_0x1a78ee(0x18c)]&&devices[_0x3eaac6]['access'][_0x1a78ee(0x1c1)]==_0x1a78ee(0x16a))&&(_0x29c55f==_0x1a78ee(0x23a)?io['to'](_0x3eaac6)[_0x1a78ee(0x1a9)](_0x1a78ee(0x1a3),{'access':{'allow':![],'reason':_0x1a78ee(0x1ab),'token':null}}):io['to'](_0x3eaac6)[_0x1a78ee(0x1a9)](_0x1a78ee(0x1a3),{'access':{'allow':![],'reason':_0x1a78ee(0xbe),'token':null}})),devices[_0x3eaac6][_0x1a78ee(0xb9)][_0x1a78ee(0x125)]=null;},_0x3ed56e);}function setTokenRefresh(_0xa39e11){const _0x2a8c16=_0x414357;if(devices[_0xa39e11]['pidRefreshToken'])clearTimeout(devices[_0xa39e11][_0x2a8c16(0x147)]);devices[_0xa39e11][_0x2a8c16(0x147)]=setTimeout(()=>{const _0x1c031b=_0x2a8c16;getClientsWithUuid(_0xa39e11)[_0x1c031b(0x17d)]!=0x0?(devices[_0xa39e11][_0x1c031b(0xb9)]=refreshToken(_0xa39e11),io['to'](_0xa39e11)[_0x1c031b(0x1a9)](_0x1c031b(0x1a3),{'status':'connected','serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0xa39e11][_0x1c031b(0xb9)],'externalip':devices[_0xa39e11]['ip'],'publicKey':secure[_0x1c031b(0x139)],'validInstallation':validInstallation}),setTokenRefresh(_0xa39e11)):clearTimeout(devices[_0xa39e11][_0x1c031b(0x147)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x826445){const _0x4a26de=_0x414357,_0x39a7d5=getClient(_0x826445['id'])['uuid'];_0x826445[_0x4a26de(0x1a9)](_0x4a26de(0x16e),config),_0x826445['emit'](_0x4a26de(0xb2),cleanSettings()),_0x826445['on'](_0x4a26de(0x159),_0x53b7b1=>{const _0x3e698f=_0x4a26de;if(validateAccess(_0x53b7b1,_0x39a7d5)[_0x3e698f(0x18c)])addBot();else logger[_0x3e698f(0x219)](_0x3e698f(0xc7));}),_0x826445['on'](_0x4a26de(0x99),(_0x11435d,_0x86ee49)=>{const _0x305613=_0x4a26de;if(validateAccess(_0x86ee49,_0x39a7d5)[_0x305613(0x18c)])toggleBot(_0x11435d[_0x305613(0x1f8)],_0x11435d['status'],_0x11435d[_0x305613(0x1de)]);else logger[_0x305613(0x219)](_0x305613(0xc1));}),_0x826445['on'](_0x4a26de(0x180),(_0x46c8b1,_0xefa03d)=>{const _0x5e75ad=_0x4a26de;if(validateAccess(_0xefa03d,_0x39a7d5)[_0x5e75ad(0x18c)])toggleBotMode(_0x46c8b1);else logger[_0x5e75ad(0x219)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x826445['on']('delete-bot',(_0xd67d9f,_0x4f21b5)=>{const _0x58aaac=_0x4a26de;if(validateAccess(_0x4f21b5,_0x39a7d5)[_0x58aaac(0x18c)])deleteBot(_0xd67d9f);else logger[_0x58aaac(0x219)]('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x826445['on'](_0x4a26de(0x200),(_0x578b79,_0x633c77)=>{const _0x2da911=_0x4a26de;if(validateAccess(_0x633c77,_0x39a7d5)[_0x2da911(0x18c)])storeSettings(_0x578b79,!![]);else logger[_0x2da911(0x219)](_0x2da911(0x86));}),_0x826445['on'](_0x4a26de(0xa5),_0x47dc9d=>{const _0x5b58a2=_0x4a26de;if(validateAccess(_0x47dc9d,_0x39a7d5)[_0x5b58a2(0x18c)])updateBB(_0x5b58a2(0xe6));else logger[_0x5b58a2(0x219)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x826445['on'](_0x4a26de(0x95),_0x495c04=>{const _0x153efb=_0x4a26de;if(validateAccess(_0x495c04,_0x39a7d5)['allow'])updateBB('reinstall');else logger[_0x153efb(0x219)](_0x153efb(0x91));}),_0x826445['on'](_0x4a26de(0xbb),_0x38caf6=>{const _0x358d2f=_0x4a26de;if(validateAccess(_0x38caf6,_0x39a7d5)['allow']){const _0x2ea0ed=getClient(_0x826445['id']);if(_0x2ea0ed)getBackupFiles(_0x2ea0ed[_0x358d2f(0x217)]);else logger[_0x358d2f(0x219)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x358d2f(0x219)]('Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}),_0x826445['on'](_0x4a26de(0x10b),(_0x5a3c20,_0x99652d)=>{const _0x1cf173=_0x4a26de;if(validateAccess(_0x99652d,_0x39a7d5)[_0x1cf173(0x18c)])restoreBackupFile(_0x5a3c20);else logger[_0x1cf173(0x219)]('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x826445['on'](_0x4a26de(0x141),_0x4d3a82=>{const _0x58f18d=_0x4a26de;if(validateAccess(_0x4d3a82,_0x39a7d5)[_0x58f18d(0x18c)])getMessages();else logger[_0x58f18d(0x219)](_0x58f18d(0x153));}),_0x826445['on'](_0x4a26de(0x1f0),(_0x3001d9,_0x54c044)=>{const _0x58ad8e=_0x4a26de;if(validateAccess(_0x54c044,_0x39a7d5)[_0x58ad8e(0x18c)])confirmMessage(_0x3001d9);else logger[_0x58ad8e(0x219)](_0x58ad8e(0x11c));}),_0x826445['on'](_0x4a26de(0xca),_0x4afecb=>{const _0x5abfd5=_0x4a26de;if(validateAccess(_0x4afecb,_0x39a7d5)['allow']){if(devices[_0x39a7d5][_0x5abfd5(0x147)])clearTimeout(devices[_0x39a7d5][_0x5abfd5(0x147)]);if(devices[_0x39a7d5]['pidExpireLogin'])clearTimeout(devices[_0x39a7d5][_0x5abfd5(0x236)]);removeSocketListeners(getClient(_0x826445['id'])[_0x5abfd5(0x217)]),addBlacklist(_0x39a7d5),devices[_0x39a7d5][_0x5abfd5(0x19a)]=null,devices[_0x39a7d5][_0x5abfd5(0x1ef)]=null,devices[_0x39a7d5][_0x5abfd5(0xb9)][_0x5abfd5(0x125)]=null,logger[_0x5abfd5(0xae)](_0x5abfd5(0x252)+_0x39a7d5[_0x5abfd5(0xa6)](-0x8)),io['to'](getClient(_0x826445['id'])[_0x5abfd5(0x217)])['emit'](_0x5abfd5(0x1a3),{'access':{'allow':![],'reason':_0x5abfd5(0xb6),'token':null}});}else logger[_0x5abfd5(0x219)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x2590ce){const _0x204540=_0x414357,_0x10c529=getClient(_0x2590ce['id'])[_0x204540(0x14f)],_0x18c400=getClient(_0x2590ce['id'])['uuid'];_0x2590ce['on'](_0x204540(0x88),(_0x4e67d3,_0x346fe7)=>{const _0x4b4944=_0x204540;if(validateAccess(_0x346fe7,_0x18c400)[_0x4b4944(0x18c)]){if(pid[_0x10c529])pid[_0x10c529]['send']({'function':_0x4b4944(0x18e),'args':_0x4e67d3});}else logger[_0x4b4944(0x219)](_0x4b4944(0xa0));}),_0x2590ce['on']('delete-alerts',(_0x2d64f3,_0x8ca72e)=>{const _0x58b4a6=_0x204540;if(validateAccess(_0x8ca72e,_0x18c400)['allow']){if(pid[_0x10c529])pid[_0x10c529]['send']({'function':_0x58b4a6(0x14e),'args':_0x2d64f3});}else logger[_0x58b4a6(0x219)]('Unauthorized\x20attempt\x20to\x20delete\x20alerts');}),_0x2590ce['on']('get-portfolio',(_0xfa5800,_0x18ce8a)=>{const _0x38d566=_0x204540;if(validateAccess(_0x18ce8a,_0x18c400)[_0x38d566(0x18c)]){if(pid[_0x10c529])pid[_0x10c529][_0x38d566(0x173)]({'function':_0x38d566(0x216),'args':_0xfa5800});}else logger[_0x38d566(0x219)](_0x38d566(0x24d));}),_0x2590ce['on']('store-configuration',(_0x23d5a5,_0x4fc488)=>{const _0x449235=_0x204540;if(validateAccess(_0x4fc488,_0x18c400)['allow']){if(pid[_0x10c529])pid[_0x10c529]['send']({'function':_0x449235(0x168),'args':_0x23d5a5});}else logger[_0x449235(0x219)](_0x449235(0xd0));}),_0x2590ce['on'](_0x204540(0xba),(_0x5445c7,_0x3e811c)=>{const _0x157af5=_0x204540;if(validateAccess(_0x3e811c,_0x18c400)['allow']){if(pid[_0x10c529])pid[_0x10c529][_0x157af5(0x173)]({'function':_0x157af5(0x240),'args':_0x5445c7});}else logger[_0x157af5(0x219)](_0x157af5(0xfb));}),_0x2590ce['on'](_0x204540(0x22a),(_0x3f9e9e,_0x576f87)=>{const _0x3d08af=_0x204540;if(validateAccess(_0x576f87,_0x18c400)['allow']){if(pid[_0x10c529])pid[_0x10c529][_0x3d08af(0x173)]({'function':_0x3d08af(0x253),'args':_0x3f9e9e});}else logger['full'](_0x3d08af(0x175));}),_0x2590ce['on'](_0x204540(0x1a0),_0x5e9cee=>{const _0x5cc254=_0x204540;if(validateAccess(_0x5e9cee,_0x18c400)[_0x5cc254(0x18c)]){if(pid[_0x10c529])pid[_0x10c529][_0x5cc254(0x173)]({'function':'resetHistory','args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x2590ce['on']('get-starting-balances',_0x29567=>{const _0x1624a8=_0x204540;if(validateAccess(_0x29567,_0x18c400)[_0x1624a8(0x18c)]){if(pid[_0x10c529])pid[_0x10c529][_0x1624a8(0x173)]({'function':'getStartingBalances','args':null});}else logger[_0x1624a8(0x219)]('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x2590ce['on'](_0x204540(0x198),(_0xa19023,_0x267bad)=>{const _0x5825ec=_0x204540;if(validateAccess(_0x267bad,_0x18c400)[_0x5825ec(0x18c)]){if(pid[_0x10c529])pid[_0x10c529][_0x5825ec(0x173)]({'function':'placeOrder','args':_0xa19023});}else logger[_0x5825ec(0x219)](_0x5825ec(0xe8));}),_0x2590ce['on'](_0x204540(0x124),_0x5c1da7=>{const _0x3cabd5=_0x204540;if(validateAccess(_0x5c1da7,_0x18c400)[_0x3cabd5(0x18c)]){if(pid[_0x10c529])pid[_0x10c529]['send']({'function':'cancelLoading','args':null});}else logger[_0x3cabd5(0x219)](_0x3cabd5(0x165));}),_0x2590ce['on']('show-config',_0x2fc95d=>{const _0x13b7c1=_0x204540;if(validateAccess(_0x2fc95d,_0x18c400)[_0x13b7c1(0x18c)]){if(pid[_0x10c529])pid[_0x10c529][_0x13b7c1(0x173)]({'function':_0x13b7c1(0x15d),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x2590ce['on'](_0x204540(0xa5),_0x373fc3=>{const _0x15a996=_0x204540;if(validateAccess(_0x373fc3,_0x18c400)['allow'])updateBB(_0x15a996(0xe6));else logger[_0x15a996(0x219)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x2590ce['on'](_0x204540(0x141),_0x11d2d6=>{const _0x4f4533=_0x204540;if(validateAccess(_0x11d2d6,_0x18c400)['allow'])getMessages();else logger[_0x4f4533(0x219)](_0x4f4533(0x153));}),_0x2590ce['on']('confirm-message',(_0x10005d,_0x5b6ad9)=>{const _0x2addf0=_0x204540;if(validateAccess(_0x5b6ad9,_0x18c400)[_0x2addf0(0x18c)])confirmMessage(_0x10005d);else logger[_0x2addf0(0x219)]('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x2590ce['on'](_0x204540(0xca),_0x3cc1fa=>{const _0x5366a2=_0x204540;if(validateAccess(_0x3cc1fa,_0x18c400)[_0x5366a2(0x18c)]){if(devices[_0x18c400][_0x5366a2(0x147)])clearTimeout(devices[_0x18c400]['pidRefreshToken']);if(devices[_0x18c400][_0x5366a2(0x236)])clearTimeout(devices[_0x18c400]['pidExpireLogin']);removeSocketListeners(getClient(_0x2590ce['id'])[_0x5366a2(0x217)]),addBlacklist(_0x18c400),devices[_0x18c400][_0x5366a2(0x19a)]=null,devices[_0x18c400]['telegram2FaApproval']=null,devices[_0x18c400][_0x5366a2(0xb9)][_0x5366a2(0x125)]=null,logger[_0x5366a2(0xae)]('Logged\x20out\x20user\x20...'+_0x18c400[_0x5366a2(0xa6)](-0x8)),io['to'](getClient(_0x2590ce['id'])['uuid'])[_0x5366a2(0x1a9)](_0x5366a2(0x1a3),{'access':{'allow':![],'reason':_0x5366a2(0xb6),'token':null}});}else logger[_0x5366a2(0x219)](_0x5366a2(0xd9));});}function removeSocketListeners(_0x33a026){const _0x1085c6=_0x414357;getClientsWithUuid(_0x33a026)[_0x1085c6(0xe1)](_0x45395f=>{const _0x2b1b99=_0x1085c6;getSocket(_0x45395f['id'])[_0x2b1b99(0xf9)]();});}function cleanSettings(){const _0x2cc0ca=_0x414357;let _0x543eda=settings;return settings[_0x2cc0ca(0x85)]&&settings['telegramToken']!=''&&(_0x543eda={..._0x543eda,'telegramToken':_0x2cc0ca(0x123)}),settings[_0x2cc0ca(0x166)]&&settings['bbPassword']!=''&&(_0x543eda={..._0x543eda,'bbPassword':_0x2cc0ca(0x123)}),(settings['bbPassword']&&settings[_0x2cc0ca(0x166)]=='***'||settings[_0x2cc0ca(0x85)]&&settings[_0x2cc0ca(0x85)]==_0x2cc0ca(0x8d))&&(_0x543eda={..._0x543eda,'restored':{'password':settings[_0x2cc0ca(0x166)]==_0x2cc0ca(0x8d),'telegram':settings[_0x2cc0ca(0x85)]=='***'}}),_0x543eda;}async function updateBB(_0x4bec5e){const _0x123493=_0x414357;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x3018a7=>{const _0x85bdf6=_0x1d21;restartBot(_0x3018a7[_0x85bdf6(0x1f8)]);}),logger[_0x123493(0xae)](_0x123493(0xf1)+_0x4bec5e);if(_0x4bec5e=='update')process['send']({'update':!![]},_0x4bb05e=>{});else _0x4bec5e==_0x123493(0xb1)&&process[_0x123493(0x173)]({'reinstall':!![]},_0x4af252=>{});}function startBot(_0x101c86,_0x41c0e7,_0x65af6c){const _0xf3f4c1=_0x414357;if(debugging)_0x101c86[_0xf3f4c1(0x23b)]('-d');let _0x236f25=![];const _0x4776da=_0x101c86[0x0];_0x41c0e7={..._0x41c0e7,'stdio':['inherit',_0xf3f4c1(0xa9),_0xf3f4c1(0xa9),_0xf3f4c1(0x1d8)]},pid[_0x4776da]=childProcess['fork'](botfile,_0x101c86,_0x41c0e7),pid[_0x4776da]['on']('message',_0x556a8d=>{const _0x183e96=_0xf3f4c1;switch(Object[_0x183e96(0x1ea)](_0x556a8d)[0x0]){case _0x183e96(0xd1):updateBotName(_0x4776da,_0x556a8d[_0x183e96(0xd1)]);break;case _0x183e96(0x1c5):updateBotManager();break;case'status':updateStatus(_0x4776da,_0x556a8d['status']);break;case _0x183e96(0x1de):updateLive(_0x4776da,_0x556a8d['live']);break;case _0x183e96(0x1f5):updateLive(_0x4776da,_0x556a8d[_0x183e96(0x1f5)]),io['to'](_0x4776da)[_0x183e96(0x1a9)](_0x183e96(0x1a3),{'access':{'allow':![],'reason':_0x183e96(0x1eb),'token':null}});break;case _0x183e96(0x1ae):_0x556a8d[_0x183e96(0x1ae)]=='restart'&&restartBot(_0x4776da);_0x556a8d['stop']==_0x183e96(0xc2)&&toggleBot(_0x4776da,_0x183e96(0x1b3),_0x183e96(0x243));break;case _0x183e96(0x1e2):sendTelegram(_0x4776da,_0x556a8d[_0x183e96(0x1e2)]);break;case _0x183e96(0x13f):sendTelegramMsg(_0x556a8d['telegrammsg']);break;case _0x183e96(0x1bf):io['to'](_0x4776da)['emit'](_0x556a8d[_0x183e96(0x1bf)],_0x556a8d[_0x183e96(0x202)]);break;}}),pid[_0x4776da]['on']('error',function(_0xda7626){if(_0x236f25)return;_0x236f25=!![],_0x65af6c(_0xda7626);}),pid[_0x4776da]['on'](_0xf3f4c1(0x18f),async function(_0x1a86db){const _0x2afbbe=_0xf3f4c1;if(installingUpdate)return;if(_0x236f25)return;_0x236f25=!![],_0x65af6c(null);const _0x66bd22=dbConfig[_0x2afbbe(0x142)](_0x2afbbe(0x16e))[_0x2afbbe(0x21e)]({'botID':_0x4776da})[_0x2afbbe(0x245)]();_0x66bd22&&(_0x66bd22[_0x2afbbe(0x1a3)]=='enabled'||_0x66bd22['status']==_0x2afbbe(0xeb))&&(await sleep(0x3e8),updateLive(_0x4776da,'stopped'),logger[_0x2afbbe(0x219)](_0x2afbbe(0x17e)+_0x4776da),startBot([_0x4776da,userID],{'cwd':bbpath},function(_0x5245d0){const _0x299dd3=_0x2afbbe;if(_0x5245d0)logger[_0x299dd3(0x219)](_0x5245d0);}));});}function stopBot(_0x2ff9d7){const _0x2b7406=_0x414357;getClientsWithBotID(_0x2ff9d7)[_0x2b7406(0xe1)](_0x10910e=>{getSocket(_0x10910e['id'])['disconnect'](!![]),removeClient(_0x10910e['id']);}),pid[_0x2ff9d7]&&(pid[_0x2ff9d7][_0x2b7406(0xc2)](),pid[_0x2ff9d7]=null);}function restartBot(_0x337302){const _0x196558=_0x414357;if(pid[_0x337302])pid[_0x337302][_0x196558(0xc2)]();}function addBot(){const _0x4ff77b=_0x414357;let _0x5227bf;for(let _0x253e74=0x1;_0x253e74<0x3e9;_0x253e74++){_0x5227bf=_0x253e74['toString']()['padStart'](0x3,'0');let _0x4b7c54=config[_0x4ff77b(0x21e)](_0x9f776f=>_0x9f776f['botID']==_0x5227bf);if(!_0x4b7c54)break;}if(_0x5227bf===_0x4ff77b(0x1d9)){logger[_0x4ff77b(0x219)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x4ff77b(0x219)](_0x4ff77b(0x154)+_0x5227bf),dbConfig[_0x4ff77b(0x142)](_0x4ff77b(0x16e))[_0x4ff77b(0x23b)]({'botID':_0x5227bf,'botname':_0x4ff77b(0xcd)+_0x5227bf,'status':_0x4ff77b(0xeb),'live':''})[_0x4ff77b(0xac)](),startBot([_0x5227bf,userID],{'cwd':bbpath},function(_0x488faa){if(_0x488faa)logger['full'](_0x488faa);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4ff77b(0x16e),config),broadcastToBots(_0x4ff77b(0x16e),JSON[_0x4ff77b(0x1a8)](config));}function deleteBot(_0x5bff51){const _0x33aec8=_0x414357;getClientsWithBotID(_0x5bff51)[_0x33aec8(0xe1)](_0x43ab38=>{const _0x305bea=_0x33aec8;getSocket(_0x43ab38['id'])[_0x305bea(0x17b)](!![]),removeClient(_0x43ab38['id']);}),dbConfig['get']('bots')[_0x33aec8(0x1f3)]({'botID':_0x5bff51})[_0x33aec8(0xac)](),logger[_0x33aec8(0x219)](_0x33aec8(0x100)+_0x5bff51),stopBot(_0x5bff51);try{if(fs[_0x33aec8(0x1e7)](path[_0x33aec8(0x112)](configpath,_0x33aec8(0x130)+_0x5bff51+_0x33aec8(0x162))))fs[_0x33aec8(0x11d)](path[_0x33aec8(0x112)](configpath,'bot-'+_0x5bff51+_0x33aec8(0x162)));if(fs['existsSync'](path[_0x33aec8(0x112)](configpath,_0x33aec8(0x130)+_0x5bff51+'-events.json')))fs[_0x33aec8(0x11d)](path[_0x33aec8(0x112)](configpath,'bot-'+_0x5bff51+'-events.json'));if(fs['existsSync'](path[_0x33aec8(0x112)](configpath,_0x33aec8(0x130)+_0x5bff51+_0x33aec8(0xef))))fs[_0x33aec8(0x11d)](path['join'](configpath,_0x33aec8(0x130)+_0x5bff51+_0x33aec8(0xef)));if(fs['existsSync'](path[_0x33aec8(0x112)](configpath,'bot-'+_0x5bff51+_0x33aec8(0x10a))))fs[_0x33aec8(0x11d)](path[_0x33aec8(0x112)](configpath,_0x33aec8(0x130)+_0x5bff51+_0x33aec8(0x10a)));}catch(_0x488717){if(_0x488717)logger[_0x33aec8(0x219)](_0x33aec8(0x1d3),_0x488717);}config=getConfiguration(),io['to'](_0x33aec8(0xb7))[_0x33aec8(0x1a9)](_0x33aec8(0x16e),config),broadcastToBots(_0x33aec8(0x16e),JSON[_0x33aec8(0x1a8)](config));}function toggleBot(_0x142234,_0x32690f,_0x12e8f7){const _0x3c7f85=_0x414357;dbConfig[_0x3c7f85(0x142)](_0x3c7f85(0x16e))[_0x3c7f85(0x21e)]({'botID':_0x142234})[_0x3c7f85(0x16c)]({'status':_0x32690f})[_0x3c7f85(0x16c)]({'live':_0x12e8f7})['write']();if(_0x32690f=='enabled'||_0x32690f==_0x3c7f85(0xeb))logger['full']('Enabled\x20Bot\x20'+_0x142234),startBot([_0x142234,userID],{'cwd':bbpath},function(_0x495b79){if(_0x495b79)logger['full'](_0x495b79);});else(_0x32690f==_0x3c7f85(0x1b3)||_0x32690f==_0x3c7f85(0xa8))&&(logger['full'](_0x3c7f85(0x238)+_0x142234),stopBot(_0x142234));config=getConfiguration(),io['to'](_0x3c7f85(0xb7))[_0x3c7f85(0x1a9)](_0x3c7f85(0x16e),config),broadcastToBots(_0x3c7f85(0x16e),JSON['stringify'](config));}function toggleStatus(_0x4f4329){const _0x21a76b=_0x414357;let _0xb25665=dbConfig[_0x21a76b(0x142)]('bots')[_0x21a76b(0x21e)]({'botID':_0x4f4329})[_0x21a76b(0x245)](),_0x33c841;if(_0xb25665[_0x21a76b(0x1a3)]===_0x21a76b(0x1fb))_0x33c841=_0x21a76b(0x1b3);else{if(_0xb25665[_0x21a76b(0x1a3)]===_0x21a76b(0xeb))_0x33c841='new-disabled';else{if(_0xb25665[_0x21a76b(0x1a3)]===_0x21a76b(0xa8))_0x33c841=_0x21a76b(0xeb);else{if(_0xb25665[_0x21a76b(0x1a3)]===_0x21a76b(0x1b3))_0x33c841=_0x21a76b(0x1fb);}}}return _0x33c841;}function updateStatus(_0x4ba3ef,_0x4e023f){const _0x212442=_0x414357;dbConfig['get'](_0x212442(0x16e))[_0x212442(0x21e)]({'botID':_0x4ba3ef})[_0x212442(0x16c)]({'status':_0x4e023f})[_0x212442(0xac)](),config=getConfiguration(),io['to'](_0x212442(0xb7))['emit'](_0x212442(0x16e),config),broadcastToBots(_0x212442(0x16e),JSON[_0x212442(0x1a8)](config));}function updateLive(_0x34f38b,_0x5f0b95){const _0x3bd098=_0x414357;dbConfig[_0x3bd098(0x142)](_0x3bd098(0x16e))['find']({'botID':_0x34f38b})[_0x3bd098(0x16c)]({'live':_0x5f0b95})[_0x3bd098(0xac)](),config=getConfiguration(),io['to']('botmanager')[_0x3bd098(0x1a9)](_0x3bd098(0x16e),config),broadcastToBots(_0x3bd098(0x16e),JSON[_0x3bd098(0x1a8)](config));}function updateBotName(_0x2ffbb4,_0xb15747){const _0x5ab839=_0x414357;dbConfig['get'](_0x5ab839(0x16e))[_0x5ab839(0x21e)]({'botID':_0x2ffbb4})[_0x5ab839(0x16c)]({'botname':_0xb15747})[_0x5ab839(0xac)](),config=getConfiguration(),io['to'](_0x5ab839(0xb7))[_0x5ab839(0x1a9)](_0x5ab839(0x16e),config),broadcastToBots(_0x5ab839(0x16e),JSON[_0x5ab839(0x1a8)](config));}function updateBotManager(){const _0x4e55c4=_0x414357;config=getConfiguration(),io['to'](_0x4e55c4(0xb7))[_0x4e55c4(0x1a9)](_0x4e55c4(0x16e),config),broadcastToBots(_0x4e55c4(0x16e),JSON[_0x4e55c4(0x1a8)](config));}function toggleBotMode(_0x4798bf){const _0x164e1e=_0x414357;if(pid[_0x4798bf])pid[_0x4798bf]['send']({'function':_0x164e1e(0x9a),'args':null});else{const _0x82e1e0=configpath+_0x164e1e(0x130)+_0x4798bf+_0x164e1e(0x162),_0x3ec2b1=fs[_0x164e1e(0x1e0)](_0x82e1e0),_0x3f1451=JSON[_0x164e1e(0x9b)](_0x3ec2b1),_0x134db7=_0x3f1451[_0x164e1e(0x14f)][0x0][_0x164e1e(0x8f)];_0x3f1451[_0x164e1e(0x14f)][0x0][_0x164e1e(0x8f)]=!_0x134db7;const _0xe8995c=JSON[_0x164e1e(0x1a8)](_0x3f1451,null,0x2);fs['writeFileSync'](_0x82e1e0,_0xe8995c),config=getConfiguration(),io['to']('botmanager')['emit'](_0x164e1e(0x16e),config),broadcastToBots(_0x164e1e(0x16e),JSON[_0x164e1e(0x1a8)](config));}}function telegramError(_0x42d4c4){const _0x4c40af=_0x414357;logger[_0x4c40af(0x1f9)](getTimeStamp()+_0x4c40af(0x1b2));}function validateTelegram(_0x43ea9a){const _0x20a939=_0x414357;if(_0x43ea9a[_0x20a939(0xf6)]['username']!=settings['telegramUsername']&&'@'+_0x43ea9a['from'][_0x20a939(0x12f)]!=settings[_0x20a939(0x1c2)])return tgBot[_0x20a939(0x218)](_0x43ea9a[_0x20a939(0x22d)]['id'],_0x20a939(0x228),{'parse_mode':'HTML'})[_0x20a939(0x186)](_0x33a7e2=>{telegramError(_0x33a7e2);}),![];return!![];}async function initTelegram(){const _0x62cc72=_0x414357;if(tgBot)tgBot[_0x62cc72(0x1ce)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x62cc72(0x85)],{'polling':!![]});let _0x1298ae=_0x62cc72(0x25a);_0x1298ae+='\x0a',_0x1298ae+=_0x62cc72(0xbf),_0x1298ae+=_0x62cc72(0x14c),_0x1298ae+=_0x62cc72(0x11e),_0x1298ae+=_0x62cc72(0x87),_0x1298ae+=_0x62cc72(0x8b),_0x1298ae+=_0x62cc72(0x11a),_0x1298ae+=_0x62cc72(0x128),_0x1298ae+=_0x62cc72(0xda),_0x1298ae+=_0x62cc72(0x12b),_0x1298ae+=_0x62cc72(0x12c),_0x1298ae+=_0x62cc72(0x94),_0x1298ae+=_0x62cc72(0x193),_0x1298ae+=_0x62cc72(0xb0),_0x1298ae+='/help\x20-\x20show\x20available\x20commands\x0a';let _0x20b92f=_0x62cc72(0x160);_0x20b92f+='\x0a',_0x20b92f+=_0x1298ae,tgBot[_0x62cc72(0x10d)](/\/start/,_0x475ca9=>{const _0x1455a3=_0x62cc72;if(!validateTelegram(_0x475ca9))return;if(settings[_0x1455a3(0x13a)]!=_0x475ca9['chat']['id'])updateSetting('telegramChatId',_0x475ca9[_0x1455a3(0x22d)]['id']);updateSetting(_0x1455a3(0x158),!![]),tgBot[_0x1455a3(0x218)](_0x475ca9[_0x1455a3(0x22d)]['id'],_0x20b92f)['catch'](_0x369724=>{telegramError(_0x369724);});}),tgBot[_0x62cc72(0x10d)](/\/enable/,_0x21fc65=>{const _0x15b8ca=_0x62cc72;if(!validateTelegram(_0x21fc65))return;if(settings[_0x15b8ca(0x13a)]!=_0x21fc65['chat']['id'])updateSetting('telegramChatId',_0x21fc65['chat']['id']);updateSetting(_0x15b8ca(0x158),!![]),tgBot[_0x15b8ca(0x218)](_0x21fc65[_0x15b8ca(0x22d)]['id'],_0x15b8ca(0x161))['catch'](_0x3fc4c7=>{telegramError(_0x3fc4c7);});}),tgBot[_0x62cc72(0x10d)](/\/config/,async _0x3ab301=>{const _0x37b28c=_0x62cc72;if(!validateTelegram(_0x3ab301))return;tgBot[_0x37b28c(0x256)](_0x37b28c(0x1df)),tgBot[_0x37b28c(0x218)](_0x3ab301[_0x37b28c(0x22d)]['id'],_0x37b28c(0x93),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x37b28c(0x16f)},{'text':_0x37b28c(0x1f4),'callback_data':_0x37b28c(0x234)},{'text':_0x37b28c(0xde),'callback_data':'all'}]]}})[_0x37b28c(0x186)](_0x137a0e=>{telegramError(_0x137a0e);}),tgBot['on'](_0x37b28c(0x1df),async _0x58f230=>{const _0xce8ace=_0x37b28c,_0x29f1f0=_0x58f230[_0xce8ace(0x1a6)],_0x4822f6=_0x58f230['message'];tgBot[_0xce8ace(0x9f)](_0x58f230['id'])[_0xce8ace(0xee)](async()=>{const _0x427a25=_0xce8ace;_0x29f1f0==_0x427a25(0x16f)&&(updateSetting(_0x427a25(0x242),'orders'),updateSetting(_0x427a25(0x158),!![]),await tgBot[_0x427a25(0x218)](_0x4822f6['chat']['id'],_0x427a25(0xea))[_0x427a25(0x186)](_0xcbea27=>{telegramError(_0xcbea27);}));_0x29f1f0==_0x427a25(0x234)&&(updateSetting('telegramEvents',_0x427a25(0x234)),updateSetting(_0x427a25(0x158),!![]),await tgBot[_0x427a25(0x218)](_0x4822f6[_0x427a25(0x22d)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')['catch'](_0x2759bb=>{telegramError(_0x2759bb);}));_0x29f1f0=='all'&&(updateSetting('telegramEvents','all'),updateSetting('telegramEnabled',!![]),await tgBot[_0x427a25(0x218)](_0x4822f6['chat']['id'],_0x427a25(0x1ac))['catch'](_0x1b4bf3=>{telegramError(_0x1b4bf3);}));if(!settings[_0x427a25(0x13a)])tgBot[_0x427a25(0x218)](_0x4822f6[_0x427a25(0x22d)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x427a25(0x186)](_0x55398f=>{telegramError(_0x55398f);});}),tgBot[_0xce8ace(0x256)]('callback_query');});}),tgBot[_0x62cc72(0x10d)](/\/status/,_0x22af32=>{const _0x1bfe9b=_0x62cc72;if(!validateTelegram(_0x22af32))return;const _0x1fed44=getBotsWithMode();let _0x4bc9ff=_0x1bfe9b(0x1a7);config[_0x1bfe9b(0xe1)](_0x23dba1=>{const _0x112f4c=_0x1bfe9b,_0x21b057=_0x1fed44[_0x112f4c(0x21e)](_0x3d2c75=>_0x3d2c75[_0x112f4c(0x1f8)]==_0x23dba1['botID'])[_0x112f4c(0x1c3)];_0x4bc9ff+=_0x112f4c(0xcd)+_0x23dba1['botID']+':\x20'+_0x23dba1[_0x112f4c(0x1a3)]+_0x112f4c(0xb3)+_0x21b057+_0x112f4c(0xb3)+_0x23dba1[_0x112f4c(0x1de)]+'\x0a';}),_0x4bc9ff+='\x0a',_0x4bc9ff+=_0x1bfe9b(0xd8),_0x4bc9ff+=!settings[_0x1bfe9b(0x158)]?_0x1bfe9b(0x104):_0x1bfe9b(0x133),_0x4bc9ff+=settings['telegramEnabled']?settings[_0x1bfe9b(0x242)]==_0x1bfe9b(0xb5)?'Notifications\x20types:\x20orders\x20and\x20alerts\x0a':'Notifications\x20types:\x20'+settings['telegramEvents']+_0x1bfe9b(0x204):'',tgBot[_0x1bfe9b(0x218)](_0x22af32[_0x1bfe9b(0x22d)]['id'],_0x4bc9ff,{'parse_mode':_0x1bfe9b(0x1d6)})[_0x1bfe9b(0x186)](_0x341ab6=>{telegramError(_0x341ab6);});}),tgBot[_0x62cc72(0x10d)](/\/restart/,_0x248596=>{const _0x28a6b4=_0x62cc72;if(!validateTelegram(_0x248596))return;tgBot['removeListener'](_0x28a6b4(0x1df));const _0x3ab78b=getEnabledBots();if(_0x3ab78b[_0x28a6b4(0x17d)]==0x0)tgBot[_0x28a6b4(0x218)](_0x248596[_0x28a6b4(0x22d)]['id'],_0x28a6b4(0x115))['catch'](_0x392b75=>{telegramError(_0x392b75);});else{if(_0x3ab78b['length']>0x1)_0x3ab78b[_0x28a6b4(0x23b)]({'botID':_0x28a6b4(0xb5)});let _0x52c6c6=[],_0x146686=[];const _0x5a6406=_0x3ab78b['length']%0x4==0x0||_0x3ab78b['length']%0x4==0x3||_0x3ab78b[_0x28a6b4(0x17d)]%0x3==0x1?0x4:0x3;let _0xcc6500=0x0;_0x3ab78b[_0x28a6b4(0xe1)]((_0x1bc3b7,_0x55b026)=>{const _0x796d79=_0x28a6b4;if(_0x55b026%_0x5a6406==0x0)_0x146686=[];_0x146686['push']({'text':_0x1bc3b7['botID']==_0x796d79(0xb5)?_0x796d79(0x15c):'Bot\x20'+_0x1bc3b7[_0x796d79(0x1f8)],'callback_data':_0x1bc3b7['botID']}),_0x55b026%_0x5a6406==0x0&&(_0x52c6c6[_0xcc6500]=_0x146686,_0xcc6500++);}),tgBot[_0x28a6b4(0x218)](_0x248596[_0x28a6b4(0x22d)]['id'],_0x28a6b4(0xdf),{'reply_markup':{'inline_keyboard':_0x52c6c6}})[_0x28a6b4(0x186)](_0x330a1c=>{telegramError(_0x330a1c);}),tgBot['on'](_0x28a6b4(0x1df),async _0x23eecc=>{const _0x1e387d=_0x28a6b4,_0xd51f08=_0x23eecc['data'],_0x92419d=_0x23eecc[_0x1e387d(0x1d0)];tgBot[_0x1e387d(0x9f)](_0x23eecc['id'])[_0x1e387d(0xee)](async()=>{const _0x4c7d25=_0x1e387d;_0xd51f08==_0x4c7d25(0xb5)?config[_0x4c7d25(0xe1)](_0x106dc9=>{const _0x17b9e3=_0x4c7d25;restartBot(_0x106dc9[_0x17b9e3(0x1f8)]);}):restartBot(_0xd51f08);}),tgBot[_0x1e387d(0x256)]('callback_query');});}}),tgBot[_0x62cc72(0x10d)](/\/on/,_0x50d90a=>{const _0x36c54e=_0x62cc72;if(!validateTelegram(_0x50d90a))return;tgBot[_0x36c54e(0x256)]('callback_query');const _0x2aa31d=getDisabledBots();if(_0x2aa31d[_0x36c54e(0x17d)]==0x0)tgBot[_0x36c54e(0x218)](_0x50d90a[_0x36c54e(0x22d)]['id'],_0x36c54e(0x220))[_0x36c54e(0x186)](_0x15bb7a=>{telegramError(_0x15bb7a);});else{if(_0x2aa31d[_0x36c54e(0x17d)]>0x1)_0x2aa31d[_0x36c54e(0x23b)]({'botID':_0x36c54e(0xb5)});let _0x1de8fe=[],_0x1255dd=[];const _0x60a5b8=_0x2aa31d[_0x36c54e(0x17d)]%0x4==0x0||_0x2aa31d['length']%0x4==0x3||_0x2aa31d[_0x36c54e(0x17d)]%0x3==0x1?0x4:0x3;let _0x290405=0x0;_0x2aa31d['forEach']((_0x1eac03,_0x2d4853)=>{const _0x4f9855=_0x36c54e;if(_0x2d4853%_0x60a5b8==0x0)_0x1255dd=[];_0x1255dd['push']({'text':_0x1eac03[_0x4f9855(0x1f8)]==_0x4f9855(0xb5)?_0x4f9855(0x15c):_0x4f9855(0xcd)+_0x1eac03[_0x4f9855(0x1f8)],'callback_data':_0x1eac03[_0x4f9855(0x1f8)]}),_0x2d4853%_0x60a5b8==0x0&&(_0x1de8fe[_0x290405]=_0x1255dd,_0x290405++);}),tgBot[_0x36c54e(0x218)](_0x50d90a['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x1de8fe}})['catch'](_0x38b0e5=>{telegramError(_0x38b0e5);}),tgBot['on'](_0x36c54e(0x1df),async _0x38087b=>{const _0x3048ef=_0x36c54e,_0x52ae30=_0x38087b[_0x3048ef(0x1a6)],_0x1d1a8c=_0x38087b[_0x3048ef(0x1d0)];tgBot['answerCallbackQuery'](_0x38087b['id'])['then'](async()=>{const _0x5ee2fe=_0x3048ef;_0x52ae30==_0x5ee2fe(0xb5)?(tgBot[_0x5ee2fe(0x218)](_0x1d1a8c[_0x5ee2fe(0x22d)]['id'],_0x5ee2fe(0x185))[_0x5ee2fe(0x186)](_0x2cf8df=>{telegramError(_0x2cf8df);}),_0x2aa31d[_0x5ee2fe(0xe1)](_0x138fac=>{const _0x47542f=_0x5ee2fe;if(_0x138fac[_0x47542f(0x1f8)]!=_0x47542f(0xb5))toggleBot(_0x138fac['botID'],toggleStatus(_0x138fac[_0x47542f(0x1f8)]),_0x47542f(0x243));})):(tgBot[_0x5ee2fe(0x218)](_0x1d1a8c[_0x5ee2fe(0x22d)]['id'],_0x5ee2fe(0x92)+_0x52ae30)[_0x5ee2fe(0x186)](_0x3d31e9=>{telegramError(_0x3d31e9);}),toggleBot(_0x52ae30,toggleStatus(_0x52ae30),_0x5ee2fe(0x243)));}),tgBot[_0x3048ef(0x256)](_0x3048ef(0x1df));});}}),tgBot[_0x62cc72(0x10d)](/\/off/,_0x1d3c6b=>{const _0x5e4dde=_0x62cc72;if(!validateTelegram(_0x1d3c6b))return;tgBot['removeListener'](_0x5e4dde(0x1df));const _0x678caa=getEnabledBots();if(_0x678caa[_0x5e4dde(0x17d)]==0x0)tgBot[_0x5e4dde(0x218)](_0x1d3c6b[_0x5e4dde(0x22d)]['id'],_0x5e4dde(0x115))['catch'](_0x575e90=>{telegramError(_0x575e90);});else{if(_0x678caa['length']>0x1)_0x678caa['push']({'botID':_0x5e4dde(0xb5)});let _0x517b42=[],_0x335717=[];const _0x4ee5fd=_0x678caa[_0x5e4dde(0x17d)]%0x4==0x0||_0x678caa['length']%0x4==0x3||_0x678caa['length']%0x3==0x1?0x4:0x3;let _0x18daa8=0x0;_0x678caa['forEach']((_0x25c341,_0x232374)=>{const _0x2bab87=_0x5e4dde;if(_0x232374%_0x4ee5fd==0x0)_0x335717=[];_0x335717[_0x2bab87(0x23b)]({'text':_0x25c341[_0x2bab87(0x1f8)]==_0x2bab87(0xb5)?_0x2bab87(0x15c):_0x2bab87(0xcd)+_0x25c341[_0x2bab87(0x1f8)],'callback_data':_0x25c341['botID']}),_0x232374%_0x4ee5fd==0x0&&(_0x517b42[_0x18daa8]=_0x335717,_0x18daa8++);}),tgBot['sendMessage'](_0x1d3c6b[_0x5e4dde(0x22d)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x517b42}})[_0x5e4dde(0x186)](_0x5471de=>{telegramError(_0x5471de);}),tgBot['on']('callback_query',async _0x862500=>{const _0x16c667=_0x5e4dde,_0x428636=_0x862500[_0x16c667(0x1a6)],_0xd97c05=_0x862500[_0x16c667(0x1d0)];tgBot['answerCallbackQuery'](_0x862500['id'])['then'](async()=>{const _0x18eb78=_0x16c667;_0x428636==_0x18eb78(0xb5)?(tgBot[_0x18eb78(0x218)](_0xd97c05['chat']['id'],_0x18eb78(0x145))[_0x18eb78(0x186)](_0x1fd406=>{telegramError(_0x1fd406);}),_0x678caa[_0x18eb78(0xe1)](_0x4e3570=>{const _0x58bf23=_0x18eb78;if(_0x4e3570['botID']!=_0x58bf23(0xb5))toggleBot(_0x4e3570[_0x58bf23(0x1f8)],toggleStatus(_0x4e3570[_0x58bf23(0x1f8)]),_0x58bf23(0x243));})):(tgBot[_0x18eb78(0x218)](_0xd97c05['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x428636)[_0x18eb78(0x186)](_0x29859f=>{telegramError(_0x29859f);}),toggleBot(_0x428636,toggleStatus(_0x428636),_0x18eb78(0x243)));}),tgBot[_0x16c667(0x256)](_0x16c667(0x1df));});}}),tgBot[_0x62cc72(0x10d)](/\/metrics/,_0x5df79c=>{const _0x32b0ed=_0x62cc72;if(!validateTelegram(_0x5df79c))return;tgBot[_0x32b0ed(0x256)](_0x32b0ed(0x1df));const _0x57aad8=getEnabledBots();if(_0x57aad8[_0x32b0ed(0x17d)]==0x0)tgBot[_0x32b0ed(0x218)](_0x5df79c[_0x32b0ed(0x22d)]['id'],_0x32b0ed(0x115))[_0x32b0ed(0x186)](_0x2b9f8c=>{telegramError(_0x2b9f8c);});else{if(_0x57aad8[_0x32b0ed(0x17d)]>0x1){let _0x2f1131=[],_0x1e6968=[];const _0x20cd87=_0x57aad8['length']%0x4==0x0||_0x57aad8[_0x32b0ed(0x17d)]%0x4==0x3||_0x57aad8[_0x32b0ed(0x17d)]%0x3==0x1?0x4:0x3;let _0x4b278a=0x0;_0x57aad8['forEach']((_0xd38181,_0x54c813)=>{const _0x4d094d=_0x32b0ed;if(_0x54c813%_0x20cd87==0x0)_0x1e6968=[];_0x1e6968[_0x4d094d(0x23b)]({'text':'Bot\x20'+_0xd38181[_0x4d094d(0x1f8)],'callback_data':_0xd38181[_0x4d094d(0x1f8)]}),_0x54c813%_0x20cd87==0x0&&(_0x2f1131[_0x4b278a]=_0x1e6968,_0x4b278a++);}),tgBot[_0x32b0ed(0x218)](_0x5df79c['chat']['id'],_0x32b0ed(0x148),{'reply_markup':{'inline_keyboard':_0x2f1131}})[_0x32b0ed(0x186)](_0x223516=>{telegramError(_0x223516);}),tgBot['on']('callback_query',async _0x52ccc4=>{const _0x77a448=_0x32b0ed,_0x1784b1=_0x52ccc4[_0x77a448(0x1a6)],_0x2163d0=_0x52ccc4[_0x77a448(0x1d0)];tgBot[_0x77a448(0x9f)](_0x52ccc4['id'])['then'](async()=>{const _0x160f22=_0x77a448;if(pid[_0x1784b1])pid[_0x1784b1]['send']({'function':_0x160f22(0x209),'args':null});}),tgBot['removeListener'](_0x77a448(0x1df));});}else{const _0x1871ea=_0x57aad8[0x0][_0x32b0ed(0x1f8)];if(pid[_0x1871ea])pid[_0x1871ea][_0x32b0ed(0x173)]({'function':_0x32b0ed(0x209),'args':null});}}}),tgBot[_0x62cc72(0x10d)](/\/portfolio/,_0x369d81=>{const _0x136dad=_0x62cc72;if(!validateTelegram(_0x369d81))return;tgBot['removeListener'](_0x136dad(0x1df));const _0x461c65=getEnabledBots();if(_0x461c65[_0x136dad(0x17d)]==0x0)tgBot['sendMessage'](_0x369d81[_0x136dad(0x22d)]['id'],_0x136dad(0x115))[_0x136dad(0x186)](_0x24e04f=>{telegramError(_0x24e04f);});else{if(_0x461c65[_0x136dad(0x17d)]>0x1){let _0x507573=[],_0x563973=[];const _0x23c4b5=_0x461c65[_0x136dad(0x17d)]%0x4==0x0||_0x461c65[_0x136dad(0x17d)]%0x4==0x3||_0x461c65[_0x136dad(0x17d)]%0x3==0x1?0x4:0x3;let _0x23718f=0x0;_0x461c65[_0x136dad(0xe1)]((_0x58c93a,_0x33046a)=>{const _0x1ce2d0=_0x136dad;if(_0x33046a%_0x23c4b5==0x0)_0x563973=[];_0x563973[_0x1ce2d0(0x23b)]({'text':_0x1ce2d0(0xcd)+_0x58c93a['botID'],'callback_data':_0x58c93a[_0x1ce2d0(0x1f8)]}),_0x33046a%_0x23c4b5==0x0&&(_0x507573[_0x23718f]=_0x563973,_0x23718f++);}),tgBot[_0x136dad(0x218)](_0x369d81[_0x136dad(0x22d)]['id'],_0x136dad(0xe4),{'reply_markup':{'inline_keyboard':_0x507573}})[_0x136dad(0x186)](_0x21ee79=>{telegramError(_0x21ee79);}),tgBot['on'](_0x136dad(0x1df),async _0x265d23=>{const _0x17f7c1=_0x136dad,_0x483ea3=_0x265d23[_0x17f7c1(0x1a6)],_0x35c534=_0x265d23['message'];tgBot[_0x17f7c1(0x9f)](_0x265d23['id'])['then'](async()=>{const _0x21858e=_0x17f7c1;if(pid[_0x483ea3])pid[_0x483ea3][_0x21858e(0x173)]({'function':_0x21858e(0x19f),'args':null});}),tgBot['removeListener'](_0x17f7c1(0x1df));});}else{const _0xc71efd=_0x461c65[0x0][_0x136dad(0x1f8)];if(pid[_0xc71efd])pid[_0xc71efd]['send']({'function':_0x136dad(0x19f),'args':null});}}}),tgBot[_0x62cc72(0x10d)](/\/update/,async _0x1aa138=>{const _0x5beca6=_0x62cc72;if(!validateTelegram(_0x1aa138))return;tgBot[_0x5beca6(0x256)](_0x5beca6(0x1df)),await getMessages();if(!updateAvailable)tgBot['sendMessage'](_0x1aa138[_0x5beca6(0x22d)]['id'],_0x5beca6(0x1e9))['catch'](_0x3aaa4e=>{telegramError(_0x3aaa4e);});else!validInstallation?tgBot['sendMessage'](_0x1aa138[_0x5beca6(0x22d)]['id'],_0x5beca6(0x207))[_0x5beca6(0x186)](_0x38991b=>{telegramError(_0x38991b);}):(tgBot[_0x5beca6(0x218)](_0x1aa138[_0x5beca6(0x22d)]['id'],_0x5beca6(0x1ad),{'reply_markup':{'inline_keyboard':[[{'text':'Yes','callback_data':_0x5beca6(0x233)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x456df6=>{telegramError(_0x456df6);}),tgBot['on'](_0x5beca6(0x1df),async _0x5cb25f=>{const _0x287d8f=_0x5beca6,_0x827a41=_0x5cb25f[_0x287d8f(0x1a6)],_0x8f4db2=_0x5cb25f[_0x287d8f(0x1d0)];tgBot[_0x287d8f(0x9f)](_0x5cb25f['id'])['then'](async()=>{const _0x4818f5=_0x287d8f;_0x827a41==_0x4818f5(0x233)&&(await tgBot[_0x4818f5(0x218)](_0x8f4db2[_0x4818f5(0x22d)]['id'],'Starting\x20Balance\x20Bot\x20update')['catch'](_0x5bd921=>{telegramError(_0x5bd921);}),updateBB(_0x4818f5(0xe6))),_0x827a41=='no'&&await tgBot[_0x4818f5(0x218)](_0x8f4db2[_0x4818f5(0x22d)]['id'],_0x4818f5(0xf4))[_0x4818f5(0x186)](_0x4b9b04=>{telegramError(_0x4b9b04);});}),tgBot[_0x287d8f(0x256)](_0x287d8f(0x1df));}));}),tgBot[_0x62cc72(0x10d)](/\/reinstall/,async _0x547022=>{const _0x193d19=_0x62cc72;if(!validateTelegram(_0x547022))return;tgBot[_0x193d19(0x256)](_0x193d19(0x1df)),!validInstallation?tgBot[_0x193d19(0x218)](_0x547022[_0x193d19(0x22d)]['id'],_0x193d19(0xa3))[_0x193d19(0x186)](_0xce8af1=>{telegramError(_0xce8af1);}):(tgBot[_0x193d19(0x218)](_0x547022[_0x193d19(0x22d)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x193d19(0x184),'callback_data':_0x193d19(0x233)},{'text':'No','callback_data':'no'}]]}})[_0x193d19(0x186)](_0x88d0f=>{telegramError(_0x88d0f);}),tgBot['on'](_0x193d19(0x1df),async _0x370b3c=>{const _0x2d033b=_0x193d19,_0x1ea11b=_0x370b3c[_0x2d033b(0x1a6)],_0x148817=_0x370b3c[_0x2d033b(0x1d0)];tgBot[_0x2d033b(0x9f)](_0x370b3c['id'])[_0x2d033b(0xee)](async()=>{const _0xd7c9b5=_0x2d033b;_0x1ea11b=='yes'&&(await tgBot['sendMessage'](_0x148817[_0xd7c9b5(0x22d)]['id'],_0xd7c9b5(0x9d))['catch'](_0x1a89fd=>{telegramError(_0x1a89fd);}),updateBB(_0xd7c9b5(0xb1))),_0x1ea11b=='no'&&await tgBot[_0xd7c9b5(0x218)](_0x148817[_0xd7c9b5(0x22d)]['id'],_0xd7c9b5(0x8c))[_0xd7c9b5(0x186)](_0x536877=>{telegramError(_0x536877);});}),tgBot[_0x2d033b(0x256)](_0x2d033b(0x1df));}));}),tgBot[_0x62cc72(0x10d)](/\/toggle/,_0x5acbca=>{const _0x4c7d7b=_0x62cc72;if(!validateTelegram(_0x5acbca))return;tgBot[_0x4c7d7b(0x256)](_0x4c7d7b(0x1df));const _0x56e48d=getBotsWithMode();if(_0x56e48d[_0x4c7d7b(0x17d)]==0x0)tgBot['sendMessage'](_0x5acbca[_0x4c7d7b(0x22d)]['id'],_0x4c7d7b(0x115))[_0x4c7d7b(0x186)](_0x1045ba=>{telegramError(_0x1045ba);});else{let _0x3e9593=[],_0x2464f5=[];const _0x317a46=0x2;let _0x4dad02=0x0;_0x56e48d[_0x4c7d7b(0xe1)]((_0x46569f,_0x42a97a)=>{const _0x3d7e6d=_0x4c7d7b;if(_0x42a97a%_0x317a46==0x0)_0x2464f5=[];_0x2464f5[_0x3d7e6d(0x23b)]({'text':_0x3d7e6d(0xcd)+_0x46569f[_0x3d7e6d(0x1f8)]+'\x20('+_0x46569f[_0x3d7e6d(0x1c3)]+')','callback_data':_0x46569f[_0x3d7e6d(0x1f8)]}),_0x42a97a%_0x317a46==0x0&&(_0x3e9593[_0x4dad02]=_0x2464f5,_0x4dad02++);}),tgBot[_0x4c7d7b(0x218)](_0x5acbca[_0x4c7d7b(0x22d)]['id'],_0x4c7d7b(0x21a),{'reply_markup':{'inline_keyboard':_0x3e9593}})[_0x4c7d7b(0x186)](_0x3c3882=>{telegramError(_0x3c3882);}),tgBot['on'](_0x4c7d7b(0x1df),async _0x51610d=>{const _0x154f6d=_0x4c7d7b,_0x586263=_0x51610d[_0x154f6d(0x1a6)],_0x50c36b=_0x51610d[_0x154f6d(0x1d0)];tgBot['answerCallbackQuery'](_0x51610d['id'])[_0x154f6d(0xee)](async()=>{const _0x43f7c4=_0x154f6d,_0x4ca08b=_0x56e48d[_0x43f7c4(0x21e)](_0x5276ab=>_0x5276ab['botID']==_0x586263),_0x3019ca=_0x4ca08b[_0x43f7c4(0x1c3)]==_0x43f7c4(0x20b)?_0x43f7c4(0xec):_0x43f7c4(0x20b);tgBot['sendMessage'](_0x50c36b[_0x43f7c4(0x22d)]['id'],_0x43f7c4(0x108)+_0x586263+_0x43f7c4(0x259)+_0x3019ca+_0x43f7c4(0x19b))['catch'](_0x3aa1a8=>{telegramError(_0x3aa1a8);}),toggleBotMode(_0x586263);}),tgBot[_0x154f6d(0x256)](_0x154f6d(0x1df));});}}),tgBot['onText'](/\/names/,_0xdb8485=>{const _0x52831f=_0x62cc72;if(!validateTelegram(_0xdb8485))return;let _0x397c3d='';config[_0x52831f(0xe1)](_0x555fb4=>{const _0x52d8af=_0x52831f;_0x397c3d+=_0x52d8af(0xcd)+_0x555fb4[_0x52d8af(0x1f8)]+':\x20'+_0x555fb4[_0x52d8af(0xd1)]+'\x0a';}),tgBot[_0x52831f(0x218)](_0xdb8485['chat']['id'],_0x397c3d,{'parse_mode':'HTML'})[_0x52831f(0x186)](_0x1b040c=>{telegramError(_0x1b040c);});}),tgBot[_0x62cc72(0x10d)](/\/disable/,_0x6ebcee=>{const _0x49e776=_0x62cc72;if(!validateTelegram(_0x6ebcee))return;tgBot[_0x49e776(0x218)](_0x6ebcee[_0x49e776(0x22d)]['id'],_0x49e776(0x1af))[_0x49e776(0x186)](_0x21dd58=>{telegramError(_0x21dd58);}),updateSetting(_0x49e776(0x158),![]);}),tgBot[_0x62cc72(0x10d)](/\/help/,_0x23c800=>{const _0x273089=_0x62cc72;if(!validateTelegram(_0x23c800))return;tgBot[_0x273089(0x218)](_0x23c800['chat']['id'],_0x1298ae)[_0x273089(0x186)](_0x41ea8d=>{telegramError(_0x41ea8d);});}),tgBot['on'](_0x62cc72(0x12d),_0x3dec80=>{const _0x165d7c=_0x62cc72;_0x3dec80[_0x165d7c(0xe3)]()[_0x165d7c(0x172)]('404\x20Not\x20Found')&&(logger[_0x165d7c(0x219)](_0x165d7c(0x102)),tgBot['stopPolling'](),tgBot=null,io['to'](_0x165d7c(0xb7))['emit']('notification',_0x165d7c(0x102)));}),process[_0x62cc72(0x24e)]('SIGINT',()=>{const _0xce37cb=_0x62cc72;if(tgBot)tgBot['stopPolling']();process[_0xce37cb(0x18f)](0x1);}),process[_0x62cc72(0x24e)](_0x62cc72(0x18a),()=>{const _0x2e4c98=_0x62cc72;if(tgBot)tgBot[_0x2e4c98(0x1ce)]();process['exit'](0x1);});}}function disableTelegram(){const _0x5a2af8=_0x414357;tgBot&&(tgBot[_0x5a2af8(0x1ce)](),tgBot=null);}function sendTelegram(_0x5933a6,_0x247b6a){const _0x209eaf=_0x414357;if(settings[_0x209eaf(0x158)]){if(settings[_0x209eaf(0x242)]==_0x209eaf(0xb5)||(_0x247b6a[_0x209eaf(0x17c)]=='error'||_0x247b6a[_0x209eaf(0x17c)]==_0x209eaf(0x24a)||_0x247b6a[_0x209eaf(0x17c)]==_0x209eaf(0x127))&&settings[_0x209eaf(0x242)]==_0x209eaf(0x234)||_0x247b6a[_0x209eaf(0x17c)]=='order'&&settings[_0x209eaf(0x242)]==_0x209eaf(0x16f)){if(tgBot&&settings[_0x209eaf(0x13a)]){if(_0x247b6a[_0x209eaf(0x22f)])tgBot[_0x209eaf(0x218)](settings[_0x209eaf(0x13a)],_0x247b6a['botname']+_0x209eaf(0x90)+_0x247b6a[_0x209eaf(0x24f)])['catch'](_0x4ddeaa=>{telegramError(_0x4ddeaa);});else tgBot['sendMessage'](settings[_0x209eaf(0x13a)],'Bot\x20'+_0x5933a6+_0x209eaf(0x90)+_0x247b6a[_0x209eaf(0x24f)])[_0x209eaf(0x186)](_0x2a4e56=>{telegramError(_0x2a4e56);});}}}}async function sendTelegramMsg(_0x25d108,_0x5c5a9e=_0x414357(0x1d6)){const _0x4d5ff6=_0x414357;return settings['telegramEnabled']&&tgBot&&settings[_0x4d5ff6(0x13a)]?(await tgBot['sendMessage'](settings['telegramChatId'],_0x25d108,{'parse_mode':_0x5c5a9e})[_0x4d5ff6(0x186)](_0x22e963=>{telegramError(_0x22e963);}),!![]):![];}function getDeviceWithIp(_0xbb3e2f){const _0x306c90=_0x414357;return devices[_0x306c90(0x21e)](_0x582dc3=>_0x582dc3['ip']===_0xbb3e2f);}function temporaryAccess2FA(_0x5dfa4a,_0x27533e){const _0x43267f=_0x414357;let _0x55ed13=new Date(),_0x556752=![];if(lastIpApproval){if(_0x55ed13-lastIpApproval<0x1388)_0x556752=!![];}lastIpApproval=new Date();if(_0x556752)return;tgBot&&settings[_0x43267f(0x13a)]&&(tgBot[_0x43267f(0x256)](_0x43267f(0x1df)),tgBot[_0x43267f(0x218)](settings[_0x43267f(0x13a)],_0x43267f(0x250)+normalizeIP(_0x27533e)['show']+_0x43267f(0x1dc),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x43267f(0xe2),'callback_data':'5'},{'text':_0x43267f(0xab),'callback_data':'15'},{'text':_0x43267f(0x113),'callback_data':'30'},{'text':_0x43267f(0xed),'callback_data':_0x43267f(0xed)}]]}})['catch'](_0x3145f9=>{telegramError(_0x3145f9);}),tgBot['on'](_0x43267f(0x1df),async _0x4653a1=>{const _0x40955=_0x43267f,_0x4e82fa=_0x4653a1[_0x40955(0x1a6)],_0x332c24=_0x4653a1[_0x40955(0x1d0)];tgBot['answerCallbackQuery'](_0x4653a1['id'])[_0x40955(0xee)](async()=>{const _0x2b6662=_0x40955;devices[_0x5dfa4a][_0x2b6662(0x19a)]={'clientip':_0x27533e,'timestamp':new Date()['getTime'](),'expiry':_0x4e82fa},_0x4e82fa!='reject'?(await tgBot[_0x2b6662(0x218)](_0x332c24[_0x2b6662(0x22d)]['id'],_0x2b6662(0xe9)+_0x4e82fa+_0x2b6662(0x1c0),{'parse_mode':_0x2b6662(0x1d6)})[_0x2b6662(0x186)](_0x19669e=>{telegramError(_0x19669e);}),io['to'](_0x5dfa4a)['emit'](_0x2b6662(0x1a3),{'access':{'allow':![],'reason':_0x2b6662(0x1eb),'token':null}})):(await tgBot[_0x2b6662(0x218)](_0x332c24[_0x2b6662(0x22d)]['id'],_0x2b6662(0x1ec))[_0x2b6662(0x186)](_0x36cbc3=>{telegramError(_0x36cbc3);}),io['to'](_0x5dfa4a)[_0x2b6662(0x1a9)]('status',{'access':{'allow':![],'reason':_0x2b6662(0x1cc),'token':null}}));}),tgBot['removeListener'](_0x40955(0x1df));}));}function loginAccess2FA(_0x277beb,_0x5513f8){const _0x1be7c4=_0x414357;tgBot&&settings[_0x1be7c4(0x13a)]&&(tgBot[_0x1be7c4(0x256)](_0x1be7c4(0x1df)),tgBot[_0x1be7c4(0x218)](settings[_0x1be7c4(0x13a)],'Allow\x20login\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x5513f8)[_0x1be7c4(0xf3)]+_0x1be7c4(0x1dc),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x1be7c4(0xed),'callback_data':_0x1be7c4(0xed)}]]}})['catch'](_0x4c58ca=>{telegramError(_0x4c58ca);}),tgBot['on'](_0x1be7c4(0x1df),async _0x8fc468=>{const _0x1b42a4=_0x1be7c4,_0x337af6=_0x8fc468[_0x1b42a4(0x1a6)],_0xe729a9=_0x8fc468[_0x1b42a4(0x1d0)];tgBot[_0x1b42a4(0x9f)](_0x8fc468['id'])['then'](async()=>{const _0x35182a=_0x1b42a4;devices[_0x277beb][_0x35182a(0x1ef)]={'clientip':_0x5513f8,'timestamp':new Date()['getTime'](),'expiry':_0x337af6},_0x337af6!='reject'?(await tgBot['sendMessage'](_0xe729a9[_0x35182a(0x22d)]['id'],_0x35182a(0x15b),{'parse_mode':_0x35182a(0x1d6)})[_0x35182a(0x186)](_0x5c8929=>{telegramError(_0x5c8929);}),io['to'](_0x277beb)[_0x35182a(0x1a9)](_0x35182a(0x1a3),{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0xe729a9['chat']['id'],_0x35182a(0xf2))['catch'](_0x34dc70=>{telegramError(_0x34dc70);}),io['to'](_0x277beb)['emit'](_0x35182a(0x1a3),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x1b42a4(0x256)](_0x1b42a4(0x1df));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4a71d5=_0x414357;return dbConfig['get']('bots')['sortBy'](_0x4a71d5(0x1f8))[_0x4a71d5(0x189)]({'status':_0x4a71d5(0x1fb)})['value']()||[];}function getDisabledBots(){const _0x39a0dd=_0x414357;return dbConfig[_0x39a0dd(0x142)]('bots')['sortBy'](_0x39a0dd(0x1f8))[_0x39a0dd(0x189)]({'status':_0x39a0dd(0x1b3)})['value']()||[];}function getBotAttributes(_0x40f7b0){const _0x55e72b=_0x414357;let _0x57b536={};const _0x243b9c=configpath+_0x55e72b(0x130)+_0x40f7b0+'-config.json',_0x267d8a=fs[_0x55e72b(0x1e7)](_0x243b9c);if(_0x267d8a){const _0x2b512a=fs[_0x55e72b(0x1e0)](_0x243b9c);try{const _0x52447a=JSON[_0x55e72b(0x9b)](_0x2b512a),_0x2132ec=_0x52447a?_0x52447a[_0x55e72b(0x14f)][0x0]['headless']:![];_0x57b536[_0x55e72b(0x1c3)]=_0x2132ec?_0x55e72b(0x20b):_0x55e72b(0xec),_0x57b536[_0x55e72b(0xd1)]=_0x52447a?_0x52447a[_0x55e72b(0x14f)][0x0][_0x55e72b(0xd1)]:_0x55e72b(0xcd)+_0x40f7b0;}catch(_0x35d5df){_0x57b536[_0x55e72b(0x1c3)]=_0x55e72b(0xec),_0x57b536[_0x55e72b(0xd1)]='Bot\x20'+_0x40f7b0;}}else _0x57b536['mode']=_0x55e72b(0xec),_0x57b536[_0x55e72b(0xd1)]=_0x55e72b(0xcd)+_0x40f7b0;return _0x57b536;}function getBotsWithMode(){const _0x18056b=_0x414357,_0x43e121=dbConfig[_0x18056b(0x142)](_0x18056b(0x16e))[_0x18056b(0x183)]('botID')['value']()||[];return _0x43e121[_0x18056b(0xe1)](_0x1abe90=>{const _0x2874f4=_0x18056b;let _0x321313=getBotAttributes(_0x1abe90['botID']);_0x1abe90[_0x2874f4(0x1c3)]=_0x321313[_0x2874f4(0x1c3)];}),_0x43e121;}function getBotExchanges(){const _0x1ca687=_0x414357;let _0x1d74f9=[];const _0x468d67=dbConfig['get'](_0x1ca687(0x16e))['sortBy'](_0x1ca687(0x1f8))[_0x1ca687(0x245)]()||[];_0x468d67['forEach'](_0x488f6c=>{const _0x4a49d9=_0x1ca687;if(_0x488f6c[_0x4a49d9(0x1a3)]=='enabled'){const _0x5311f5=configpath+_0x4a49d9(0x130)+_0x488f6c[_0x4a49d9(0x1f8)]+_0x4a49d9(0x162),_0x3f4090=fs[_0x4a49d9(0x1e7)](_0x5311f5);let _0x314ce0;if(_0x3f4090){const _0x57dd72=fs['readFileSync'](_0x5311f5);try{const _0x21e441=JSON[_0x4a49d9(0x9b)](_0x57dd72);_0x314ce0=_0x21e441?_0x21e441['bot'][0x0][_0x4a49d9(0x13b)]:null;}catch(_0x10095e){}}if(_0x314ce0)_0x1d74f9['push'](_0x314ce0);}});const _0x10a3fe=[...new Set(_0x1d74f9)][_0x1ca687(0x150)]();return _0x10a3fe;}async function initUser(){const _0x3bd1a2=_0x414357;if(!settings[_0x3bd1a2(0xff)]){const _0x56dd2f=uuidRandom();mixpanel[_0x3bd1a2(0x14a)](_0x56dd2f),updateSetting(_0x3bd1a2(0xff),_0x56dd2f);}}async function initSecure(){const _0x598858=_0x414357;let _0x4157a5=getSecure();if(!_0x4157a5[_0x598858(0x1cb)](_0x598858(0x1db))){let _0x5b49f1=await generateKeys();_0x4157a5[_0x598858(0x139)]=_0x5b49f1[_0x598858(0x139)],_0x4157a5[_0x598858(0xa1)]=_0x5b49f1['privateKey'],_0x4157a5[_0x598858(0x1db)]=crypto[_0x598858(0xa4)](0x20)['toString'](_0x598858(0x188));;storeSecure(_0x4157a5);}}function getSettings(){const _0x5e52a2=_0x414357;return dbSettings[_0x5e52a2(0x142)](_0x5e52a2(0xb2))[_0x5e52a2(0x245)]()||{};}function getSecure(){const _0x482f69=_0x414357;return dbSecure[_0x482f69(0x142)](_0x482f69(0xdb))[_0x482f69(0x245)]()||{};}function getBlacklist(){const _0x216f47=_0x414357;return dbSecure[_0x216f47(0x142)](_0x216f47(0x213))['value']()||[];}function broadcastToBots(_0x4eff21,_0x2dfeb2){const _0x1e248f=_0x414357;config[_0x1e248f(0xe1)](_0x528da4=>{const _0x224804=_0x1e248f;if(_0x528da4[_0x224804(0x1a3)]=='enabled'&&_0x528da4['live']==_0x224804(0x1b5)||_0x528da4['status']==_0x224804(0xeb)&&_0x528da4[_0x224804(0x1de)]==_0x224804(0x1b5)){if(pid[_0x528da4[_0x224804(0x1f8)]])pid[_0x528da4[_0x224804(0x1f8)]][_0x224804(0x173)]({[_0x4eff21]:_0x2dfeb2});}});}function storeSettings(_0x44b6eb,_0x351ffb=![]){const _0x3c265e=_0x414357;_0x44b6eb={...settings,..._0x44b6eb};if(_0x351ffb&&_0x44b6eb[_0x3c265e(0x166)]!='************'&&_0x44b6eb[_0x3c265e(0x166)]!='***'&&_0x44b6eb[_0x3c265e(0x166)]!=''){const _0x811005=crypt[_0x3c265e(0x110)](secure['privateKey'],_0x44b6eb[_0x3c265e(0x166)])['message'][_0x3c265e(0x211)]('@')[0x0],_0x33331a=bcrypt[_0x3c265e(0x25c)](_0x811005,saltRounds);_0x44b6eb={..._0x44b6eb,'bbPassword':_0x33331a};}if(_0x351ffb&&_0x44b6eb[_0x3c265e(0x85)]!='************'&&_0x44b6eb[_0x3c265e(0x85)]!=_0x3c265e(0x8d)&&_0x44b6eb[_0x3c265e(0x85)]!=''){const _0x4ad3e5=crypt['decrypt'](secure['privateKey'],_0x44b6eb['telegramToken'])['message'][_0x3c265e(0x211)]('@')[0x0];_0x44b6eb={..._0x44b6eb,'telegramToken':_0x4ad3e5};}const _0x496385=_0x44b6eb[_0x3c265e(0x85)]!='************'&&_0x44b6eb[_0x3c265e(0x85)]!=settings[_0x3c265e(0x85)]||_0x44b6eb[_0x3c265e(0x1c2)]!=settings['telegramUsername'],_0x504633=_0x44b6eb[_0x3c265e(0x85)]==''||_0x44b6eb['telegramUsername']=='';if(_0x496385)_0x44b6eb[_0x3c265e(0x242)]=_0x3c265e(0xb5);for(const [_0x24ca2e,_0x34b234]of Object[_0x3c265e(0x1da)](_0x44b6eb)){if(_0x24ca2e==_0x3c265e(0x85)&&_0x34b234==_0x3c265e(0x123)){_0x44b6eb[_0x3c265e(0x85)]=settings[_0x3c265e(0x85)];continue;};if(_0x24ca2e=='bbPassword'&&_0x34b234==_0x3c265e(0x123)){_0x44b6eb['bbPassword']=settings[_0x3c265e(0x166)];continue;};dbSettings[_0x3c265e(0x117)](_0x3c265e(0x1cf)+_0x24ca2e,_0x34b234)[_0x3c265e(0xac)]();}settings=_0x44b6eb,io['to'](_0x3c265e(0xb7))[_0x3c265e(0x1a9)]('settings',cleanSettings()),broadcastToBots(_0x3c265e(0xd5),settings[_0x3c265e(0xd5)]),broadcastToBots(_0x3c265e(0x109),settings['onepagemode']);if(_0x496385&&!_0x504633)initTelegram();if(_0x496385&&_0x504633)disableTelegram();getAllClients()[_0x3c265e(0xe1)](_0x2401da=>{const _0x4cf500=_0x3c265e;getSocket(_0x2401da['id'])[_0x4cf500(0x1a9)](_0x4cf500(0x1a3),{'access':{'allow':![],'reason':_0x4cf500(0x1eb),'token':null}});});}function updateSetting(_0x477f23,_0x2f758d){const _0x390ea6=_0x414357;dbSettings[_0x390ea6(0x117)](_0x390ea6(0x1cf)+_0x477f23,_0x2f758d)[_0x390ea6(0xac)](),settings=getSettings(),io['to'](_0x390ea6(0xb7))[_0x390ea6(0x1a9)]('settings',cleanSettings());}function storeSecure(_0x545489){const _0x1f7168=_0x414357;dbSecure[_0x1f7168(0x142)](_0x1f7168(0xdb))[_0x1f7168(0x23b)](_0x545489)[_0x1f7168(0xac)](),secure=_0x545489;}function addBlacklist(_0x16532f){const _0x21d704=_0x414357;cleanBlacklist();let _0x2b70e0;devices[_0x16532f][_0x21d704(0x19a)]?_0x2b70e0=Math['max'](devices[_0x16532f][_0x21d704(0x19a)][_0x21d704(0x169)],loginExpiry):_0x2b70e0=loginExpiry,dbSecure['get'](_0x21d704(0x213))[_0x21d704(0x23b)]({'expiry':new Date()[_0x21d704(0x23c)]()+_0x2b70e0*0x3c*0x3e8,'token':devices[_0x16532f]['access'][_0x21d704(0x125)]})[_0x21d704(0xac)](),blacklist=dbSecure[_0x21d704(0x142)]('blacklist')[_0x21d704(0x245)]();}function cleanBlacklist(){const _0x311a81=_0x414357;let _0x11d1f0=dbSecure[_0x311a81(0x142)](_0x311a81(0x213))[_0x311a81(0x20c)]()[_0x311a81(0x245)](),_0x592da6=new Date()[_0x311a81(0x23c)]();_0x11d1f0[_0x311a81(0xe1)](_0x402f10=>{const _0x234246=_0x311a81;_0x402f10[_0x234246(0x169)]<_0x592da6&&dbSecure[_0x234246(0x142)](_0x234246(0x213))['remove']({'expiry':_0x402f10['expiry']})['write']();});}function initStates(){let _0x1c9597=getConfiguration();_0x1c9597['forEach'](_0x33cd2c=>{const _0x2ad316=_0x1d21;_0x33cd2c['live']=_0x2ad316(0x243);}),storeConfiguration(_0x1c9597);}function onKeys(){const _0x3bc920=new RSA();return new Promise(_0x43d8c9=>{const _0xe0361=_0x1d21;_0x3bc920[_0xe0361(0x122)]()[_0xe0361(0xee)](_0x292c9b=>{_0x43d8c9(_0x292c9b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x426da8=_0x414357;let _0x4d1063=getSettings(),_0x4a4296=![];!_0x4d1063[_0x426da8(0x1cb)]('lastmsgtelegram')&&(_0x4d1063[_0x426da8(0x1bb)]=0x0,_0x4a4296=!![]);!_0x4d1063[_0x426da8(0x1cb)](_0x426da8(0x170))&&(_0x4d1063[_0x426da8(0x170)]=0x0,_0x4a4296=!![]);!_0x4d1063[_0x426da8(0x1cb)](_0x426da8(0x118))&&(_0x4d1063[_0x426da8(0x118)]=_0x426da8(0xf5),_0x4a4296=!![]);!_0x4d1063['hasOwnProperty'](_0x426da8(0x109))&&(_0x4d1063[_0x426da8(0x109)]=![],_0x4a4296=!![]);if(_0x4a4296)storeSettings(_0x4d1063);try{fs[_0x426da8(0x121)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x2051cd=>{const _0x15c785=_0x426da8;if(!_0x2051cd[_0x15c785(0x178)]()){if(!_0x2051cd[_0x15c785(0x114)][_0x15c785(0x10c)](_0x15c785(0x192)))fs[_0x15c785(0x11d)](configbackuppath+_0x2051cd['name']);}else fs[_0x15c785(0x237)](configbackuppath+_0x2051cd[_0x15c785(0x114)],{'recursive':!![]});});}catch(_0x31ad88){logger[_0x426da8(0xae)](_0x426da8(0x9e),_0x31ad88);}}function storeConfiguration(_0x24cd56){const _0x4a76fb=_0x414357;dbConfig[_0x4a76fb(0x142)](_0x4a76fb(0x16e))[_0x4a76fb(0x1f3)]()[_0x4a76fb(0xac)](),_0x24cd56[_0x4a76fb(0xe1)](_0x5d5839=>{delete _0x5d5839['mode'];}),dbConfig[_0x4a76fb(0x142)](_0x4a76fb(0x16e))[_0x4a76fb(0x23b)](..._0x24cd56)['write'](),config=_0x24cd56;}function resetPassword(){const _0xa6703a=_0x414357;tgBot&&settings['telegramChatId']&&(tgBot[_0xa6703a(0x256)](_0xa6703a(0x1df)),tgBot[_0xa6703a(0x218)](settings[_0xa6703a(0x13a)],_0xa6703a(0x23f),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0xa6703a(0x233),'callback_data':_0xa6703a(0x233)},{'text':'no','callback_data':'no'}]]}})[_0xa6703a(0x186)](_0x4a426e=>{telegramError(_0x4a426e);}),tgBot['on']('callback_query',async _0x33894a=>{const _0x3e058e=_0xa6703a,_0x1d88c5=_0x33894a[_0x3e058e(0x1a6)],_0x35cf4a=_0x33894a[_0x3e058e(0x1d0)];tgBot[_0x3e058e(0x9f)](_0x33894a['id'])[_0x3e058e(0xee)](async()=>{const _0xfa7a94=_0x3e058e;if(_0x1d88c5!='no'){const _0x3d9497=0xf,_0x3dc1c5=_0xfa7a94(0x1bc),_0x143e26=Array[_0xfa7a94(0xf6)](crypto[_0xfa7a94(0x105)](new Uint32Array(_0x3d9497)))[_0xfa7a94(0x163)](_0x16c233=>_0x3dc1c5[_0x16c233%_0x3dc1c5[_0xfa7a94(0x17d)]])[_0xfa7a94(0x112)](''),_0x4bc037=bcrypt['hashSync'](_0x143e26,saltRounds);storeSettings({'bbPassword':_0x4bc037}),await tgBot[_0xfa7a94(0x218)](_0x35cf4a['chat']['id'],_0xfa7a94(0x235)+_0x143e26,{'parse_mode':_0xfa7a94(0x1d6)})[_0xfa7a94(0x186)](_0x750653=>{telegramError(_0x750653);});}else await tgBot[_0xfa7a94(0x218)](_0x35cf4a[_0xfa7a94(0x22d)]['id'],_0xfa7a94(0x1f7))[_0xfa7a94(0x186)](_0x4d718b=>{telegramError(_0x4d718b);});}),tgBot[_0x3e058e(0x256)](_0x3e058e(0x1df));}));}async function confirmRestore(_0x510433,_0x2c71cb){const _0x58d0b4=_0x414357;io['to'](_0x58d0b4(0xb7))[_0x58d0b4(0x1a9)](_0x58d0b4(0xcc),_0x58d0b4(0x1d2),_0x58d0b4(0x127)),tgBot&&settings[_0x58d0b4(0x13a)]&&(tgBot[_0x58d0b4(0x256)](_0x58d0b4(0x1df)),await tgBot[_0x58d0b4(0x218)](settings[_0x58d0b4(0x13a)],_0x58d0b4(0x9c),{'parse_mode':_0x58d0b4(0x1d6),'reply_markup':{'inline_keyboard':[[{'text':_0x58d0b4(0x233),'callback_data':_0x58d0b4(0x233)},{'text':'no','callback_data':'no'}]]}})[_0x58d0b4(0x186)](_0x320734=>{telegramError(_0x320734);}),tgBot['on'](_0x58d0b4(0x1df),async _0x20d274=>{const _0x4ea563=_0x58d0b4,_0x4055d9=_0x20d274[_0x4ea563(0x1a6)],_0x47402f=_0x20d274[_0x4ea563(0x1d0)];tgBot[_0x4ea563(0x9f)](_0x20d274['id'])[_0x4ea563(0xee)](async()=>{const _0x1d9f6b=_0x4ea563;_0x4055d9=='yes'?(await tgBot['sendMessage'](_0x47402f[_0x1d9f6b(0x22d)]['id'],_0x1d9f6b(0xd4),{'parse_mode':_0x1d9f6b(0x1d6)})[_0x1d9f6b(0x186)](_0x4dc7ab=>{telegramError(_0x4dc7ab);}),unzipFile(_0x510433,_0x2c71cb)):(logger[_0x1d9f6b(0xae)]('Restore\x20process\x20aborted'),await tgBot[_0x1d9f6b(0x218)](_0x47402f[_0x1d9f6b(0x22d)]['id'],_0x1d9f6b(0x8e))[_0x1d9f6b(0x186)](_0x3b4b19=>{telegramError(_0x3b4b19);}));}),tgBot[_0x4ea563(0x256)](_0x4ea563(0x1df));}));}function getServerTime(){const _0x4e11b3=_0x414357,_0x12b91d=new Date();return _0x12b91d[_0x4e11b3(0xa2)]()+'/'+(_0x12b91d[_0x4e11b3(0x1b4)]()+0x1)['toString']()[_0x4e11b3(0xc0)](0x2,'0')+'/'+_0x12b91d['getDate']()['toString']()[_0x4e11b3(0xc0)](0x2,'0')+'\x20'+_0x12b91d['getHours']()[_0x4e11b3(0xe3)]()[_0x4e11b3(0xc0)](0x2,'0')+':'+_0x12b91d[_0x4e11b3(0x13e)]()[_0x4e11b3(0xe3)]()['padStart'](0x2,'0')+':'+_0x12b91d[_0x4e11b3(0xd7)]()[_0x4e11b3(0xe3)]()[_0x4e11b3(0xc0)](0x2,'0');}function getTimeStamp(){const _0x4f2ec1=_0x414357,_0x1391cc=shiftedTime();return _0x1391cc[_0x4f2ec1(0xa2)]()+'/'+(_0x1391cc[_0x4f2ec1(0x1b4)]()+0x1)[_0x4f2ec1(0xe3)]()[_0x4f2ec1(0xc0)](0x2,'0')+'/'+_0x1391cc[_0x4f2ec1(0x98)]()[_0x4f2ec1(0xe3)]()[_0x4f2ec1(0xc0)](0x2,'0')+'\x20'+_0x1391cc['getHours']()[_0x4f2ec1(0xe3)]()[_0x4f2ec1(0xc0)](0x2,'0')+':'+_0x1391cc[_0x4f2ec1(0x13e)]()[_0x4f2ec1(0xe3)]()['padStart'](0x2,'0')+':'+_0x1391cc[_0x4f2ec1(0xd7)]()[_0x4f2ec1(0xe3)]()[_0x4f2ec1(0xc0)](0x2,'0');}function getCleanTimeStamp(){const _0x2fd0b8=_0x414357,_0x597b96=shiftedTime();return _0x597b96[_0x2fd0b8(0xa2)]()+(_0x597b96[_0x2fd0b8(0x1b4)]()+0x1)[_0x2fd0b8(0xe3)]()[_0x2fd0b8(0xc0)](0x2,'0')+_0x597b96[_0x2fd0b8(0x98)]()[_0x2fd0b8(0xe3)]()['padStart'](0x2,'0')+'-'+_0x597b96[_0x2fd0b8(0x181)]()[_0x2fd0b8(0xe3)]()[_0x2fd0b8(0xc0)](0x2,'0')+_0x597b96[_0x2fd0b8(0x13e)]()[_0x2fd0b8(0xe3)]()[_0x2fd0b8(0xc0)](0x2,'0')+_0x597b96[_0x2fd0b8(0xd7)]()[_0x2fd0b8(0xe3)]()['padStart'](0x2,'0');}function shiftedTime(){const _0x27a7a8=_0x414357,_0x1de752=new Date();let _0x500be7=_0x1de752;if(settings[_0x27a7a8(0xd5)]&&settings[_0x27a7a8(0xd5)]!==0x0)_0x500be7=fns['add'](_0x1de752,{'hours':settings[_0x27a7a8(0xd5)]});return _0x500be7;}function startScheduler(){const _0x13a5f3=_0x414357,_0x10419=new Date()[_0x13a5f3(0x230)](),_0x5a4c9b=shiftedTime()[_0x13a5f3(0x181)]();_0x5a4c9b==0x4&&backupConfigFiles();_0x5a4c9b==0x0&&rotateLogFiles();_0x10419%0x6==0x0&&triggerAnalytics();_0x10419%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x456484){const _0x1a4554=_0x414357;logger[_0x1a4554(0xae)](_0x1a4554(0x106)+_0x456484);const _0x32d1ca=getBotsWithMode();_0x32d1ca[_0x1a4554(0x17d)]>0x0?confirmRestore(configbackuppath,_0x456484):unzipFile(configbackuppath,_0x456484);}async function getBackupFiles(_0x3512b1=null){const _0x3e783e=_0x414357;let _0x26275b=[],_0x2245b8=fs[_0x3e783e(0x121)](configbackuppath,{'withFileTypes':!![]});_0x2245b8[_0x3e783e(0x150)]((_0x27c48e,_0x5dcb20)=>_0x27c48e['name']<_0x5dcb20[_0x3e783e(0x114)]?0x1:_0x5dcb20[_0x3e783e(0x114)]<_0x27c48e[_0x3e783e(0x114)]?-0x1:0x0),_0x2245b8[_0x3e783e(0xe1)](_0x2c472f=>{const _0x11a629=_0x3e783e;if(!_0x2c472f['isDirectory']()&&_0x2c472f[_0x11a629(0x114)][_0x11a629(0x10c)]('backup-full@')&&_0x2c472f[_0x11a629(0x114)][_0x11a629(0x244)](_0x11a629(0x1bd))){const _0x4a507f=formatDate(fs[_0x11a629(0x24b)](configbackuppath+_0x2c472f[_0x11a629(0x114)])[_0x11a629(0x136)]);_0x26275b[_0x11a629(0x23b)]({'name':_0x2c472f[_0x11a629(0x114)],'mtime':_0x4a507f});}});if(_0x3512b1)io['to'](_0x3512b1)['emit']('backup-files',_0x26275b);else return _0x26275b;}async function backupConfigFiles(){const _0x4227ae=_0x414357;await zipFiles(_0x4227ae(0x20d));const _0x2e2a77=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x4227ae(0x249),configbackuppath+('backup-full@'+_0x2e2a77+_0x4227ae(0x1bd)));let _0x3de660=fs[_0x4227ae(0x121)](configbackuppath,{'withFileTypes':!![]});_0x3de660[_0x4227ae(0x150)]((_0x33da2c,_0xf53836)=>_0x33da2c[_0x4227ae(0x114)]<_0xf53836[_0x4227ae(0x114)]?0x1:_0xf53836[_0x4227ae(0x114)]<_0x33da2c[_0x4227ae(0x114)]?-0x1:0x0),_0x3de660[_0x4227ae(0x17d)]>maxBackups&&fs[_0x4227ae(0x11d)](configbackuppath+_0x3de660[_0x3de660['length']-0x1][_0x4227ae(0x114)]);}function rotateLogFiles(){const _0x307340=_0x414357,_0x1fb282=fs[_0x307340(0x24b)](logspath+_0x307340(0xfd)),_0x253168=_0x1fb282[_0x307340(0x1f1)]/0x400;if(_0x253168>0x64){let _0xe91f0d=fs[_0x307340(0x121)](logspath,{'withFileTypes':!![]});_0xe91f0d[_0x307340(0x150)]((_0x577f70,_0x5bffe1)=>_0x577f70[_0x307340(0x114)]<_0x5bffe1[_0x307340(0x114)]?0x1:_0x5bffe1[_0x307340(0x114)]<_0x577f70[_0x307340(0x114)]?-0x1:0x0),_0xe91f0d[_0x307340(0xe1)](_0x182f3f=>{const _0x2ad7a2=_0x307340;if(_0x182f3f[_0x2ad7a2(0x114)]==_0x2ad7a2(0x119))fs[_0x2ad7a2(0x21b)](logspath+_0x182f3f[_0x2ad7a2(0x114)],logspath+'output-003.log');if(_0x182f3f[_0x2ad7a2(0x114)]=='output-001.log')fs[_0x2ad7a2(0x21b)](logspath+_0x182f3f[_0x2ad7a2(0x114)],logspath+'output-002.log');_0x182f3f[_0x2ad7a2(0x114)]==_0x2ad7a2(0xfd)&&(fs['copyFileSync'](logspath+_0x182f3f[_0x2ad7a2(0x114)],logspath+_0x2ad7a2(0x1e3)),fs[_0x2ad7a2(0x116)](logspath+_0x182f3f[_0x2ad7a2(0x114)],''));});}}async function zipFiles(_0x2940a3){const _0x3ff829=_0x414357;let _0x1a7c4b;if(_0x2940a3=='logs')_0x1a7c4b=logspath;if(_0x2940a3==_0x3ff829(0x221))_0x1a7c4b=configpath;if(_0x2940a3==_0x3ff829(0x20d))_0x1a7c4b=configpath;let _0x3ad869=fs[_0x3ff829(0x121)](_0x1a7c4b,{'withFileTypes':!![]});const _0x25b5ef=new require(_0x3ff829(0x21d))();_0x3ad869[_0x3ff829(0xe1)](_0x1f4e90=>{const _0x3e99ec=_0x3ff829;if(!_0x1f4e90[_0x3e99ec(0x178)]()){let _0x410fde=fs['readFileSync'](_0x1a7c4b+_0x1f4e90[_0x3e99ec(0x114)]);if(_0x2940a3=='backup'){const _0x2eda3e=/^bot-[0-9]{3}-config.json$/,_0x24aaa2=_0x2eda3e[_0x3e99ec(0x146)](_0x1f4e90[_0x3e99ec(0x114)]);if(_0x24aaa2){const _0x4ea1f7=JSON['parse'](_0x410fde);if(_0x4ea1f7[_0x3e99ec(0x14f)][0x0]){_0x4ea1f7['bot'][0x0][_0x3e99ec(0x164)]=_0x3e99ec(0x8d),_0x4ea1f7['bot'][0x0][_0x3e99ec(0x246)]=_0x3e99ec(0x8d);if(_0x4ea1f7[_0x3e99ec(0x14f)][0x0]['apiPassword'])_0x4ea1f7[_0x3e99ec(0x14f)][0x0][_0x3e99ec(0x1c7)]=_0x3e99ec(0x8d);}_0x410fde=JSON['stringify'](_0x4ea1f7,null,0x2);}if(_0x1f4e90[_0x3e99ec(0x114)]==_0x3e99ec(0x182)){const _0x55240c=JSON[_0x3e99ec(0x9b)](_0x410fde);if(_0x55240c[_0x3e99ec(0xb2)][_0x3e99ec(0xc5)])_0x55240c[_0x3e99ec(0xb2)]['loginRequired']=![];if(_0x55240c[_0x3e99ec(0xb2)][_0x3e99ec(0x166)])_0x55240c['settings'][_0x3e99ec(0x166)]='***';if(_0x55240c['settings'][_0x3e99ec(0x85)])_0x55240c[_0x3e99ec(0xb2)][_0x3e99ec(0x85)]='***';if(_0x55240c[_0x3e99ec(0xb2)][_0x3e99ec(0x13a)])_0x55240c[_0x3e99ec(0xb2)][_0x3e99ec(0x13a)]=null;_0x410fde=JSON[_0x3e99ec(0x1a8)](_0x55240c,null,0x2);}if(_0x1f4e90[_0x3e99ec(0x114)]!='bb-secure.json')_0x25b5ef[_0x3e99ec(0x1a1)](_0x1f4e90[_0x3e99ec(0x114)],_0x410fde);}else _0x25b5ef[_0x3e99ec(0x1a1)](_0x1f4e90['name'],_0x410fde);}});const _0x128bd5=_0x25b5ef['generate']({'base64':![],'compression':_0x3ff829(0x24c)});fs[_0x3ff829(0x116)](zippath+(_0x2940a3+_0x3ff829(0x1bd)),_0x128bd5,'binary');}function _0x53d5(){const _0x40d4e2=['removeAllListeners',',\x20must\x20be\x20a\x204\x20digit\x20number','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','temporary\x20access\x20not\x20allowed','output-000.log','static','userid','Deleted\x20Bot\x20','express','Invalid\x20Telegram\x20token','messages','Notifications\x20disabled\x0a','randomFillSync','Restore\x20backup\x20file\x20','toIPv4MappedAddress','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','onepagemode','-results.json','restore-backup-file','startsWith','onText','build2','jsonwebtoken','decrypt','binary','join','30\x20min','name','No\x20bots\x20running\x20right\x20now','writeFileSync','set','latestversion','output-002.log','/off\x20-\x20stop\x20bot(s)\x0a','710208iCoyLt','Unauthorized\x20attempt\x20to\x20confirm\x20message','unlinkSync','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','uncaughtException','index.html','readdirSync','generateKeyPairAsync','************','cancel-loading','token','IPv4','success','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','mkdirSync','Backup\x20file\x20unzipped\x20and\x20stored','/status\x20-\x20show\x20bot(s)\x20status\x0a','/metrics\x20-\x20show\x20bot\x20performance\x0a','polling_error','login\x20token\x20generated','username','bot-','bbvReceive','RSA','Notifications\x20enabled\x0a','store',':\x20Bot\x20Mgr\x20>\x20','mtime','Invalid\x20IP\x20address','sha256','publicKey','telegramChatId','exchange','address','lowdb','getMinutes','telegrammsg','tkn','get-messages','get','format','axios','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','test','pidRefreshToken','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','*$1*','alias','temp/','/disable\x20-\x20disable\x20notifications\x0a','8mJXmqt','deleteHistoryAlerts','bot','sort','-----------------------------------------------------------------------------------','argv','Unauthorized\x20attempt\x20to\x20get\x20messages','Starting\x20new\x20bot\x20|\x20Bot\x20','version','util','Session\x20expired\x20for\x20user\x20...','telegramEnabled','add-bot','match','Login\x20accepted','All\x20bots','showConfig','toIPv4Address','port','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','Notifications\x20enabled','-config.json','map','apiKey','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','bbPassword','Starting\x20#RED#Balance\x20Bot\x20v','storeConfiguration','expiry','login\x20not\x20required','User\x20has\x20been\x20validated','assign','family','bots','orders','lastmsgemitted','2FA','includes','send','private','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','clientip','request','isDirectory','\x20|\x20client:\x20...','bb-secure.json','disconnect','type','length','Restarting\x20Bot\x20','127.0.0.1','toggle-bot-mode','getHours','bb-settings.json','sortBy','Yes','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','catch','socket.io','hex','filter','SIGTERM','Token\x20blacklisted','allow','use','emitHistory','exit','exec','Setting\x20access:\x20','backup-full@','/update\x20-\x20update\x20Balance\x20Bot\x0a','2739470sfgCmC','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','init','socket','place-order','/:bot/history','telegramIpApproval','\x20mode','login\x20required','build','range','sendPortfolioTelegram','reset-history','file','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','status','Idling\x20bot\x20\x20\x20|\x20Bot\x20','server','data','<b>Balance\x20Bot\x20Status:</b>\x0a','stringify','emit','post','access\x20timeout','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','stop','Notifications\x20disabled','_data','isIPv4MappedAddress',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','disabled','getMonth','running','invalid\x20credentials','/:bot/portfolio','2FA\x20required','min','track','lastmsgtelegram','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','.zip','temporary\x20token\x20generated','function','\x20minutes','reason','telegramUsername','mode','title','updatebotmanager','sockets','apiPassword','2FA\x20login\x20required','f2aRequired','number','hasOwnProperty','temporary\x20access\x20rejected','4262223EGoRlp','stopPolling','settings.','message','#RES#\x20if\x20running\x20on\x20server','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','Error\x20while\x20deleting\x20config\x20files:\x20','/:bot','clients','HTML','/upload-backup','ipc','1000','entries','secret','</b>\x20?','env','live','callback_query','readFileSync','Server','telegram','output-001.log','versions','ipaddr.js','headers','existsSync','internal','Your\x20installation\x20is\x20already\x20up\x20to\x20date','keys','reload','Temporary\x20access\x20rejected','graphql-request','bcryptjs','telegram2FaApproval','confirm-message','size','hybrid-crypto-js','remove','Alerts','started','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','Password\x20reset\x20rejected','botID','simple','Invalid\x20authentication\x20token\x20(1)','enabled','[ip-address]','child_process','RSA-OAEP','6b67f3d61ee94b8f5c80b4affef4c4d9','store-settings','=>\x20Go\x20to\x20#CYA#http://','args','/:bot/performance','\x20only\x0a','node-telegram-bot-api','isValid','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','uuid-random','sendMetricsTelegram','bot.js','auto','cloneDeep','backup-full','sendFile','12GPTpke','bbUsername','split','replace','blacklist','#RES#\x20if\x20running\x20locally\x0a','9221268hQDQeC','getPortfolio','uuid','sendMessage','full','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','copyFileSync','\x1b[35m','node-zip','find','351535YhoSTu','All\x20bots\x20running\x20right\x20now','backup','\x1b[36m','9814160TNlYcx','http','7616898pACmEB','listen','Bot\x20Mgr\x20>\x20','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','path','store-fiat','Unauthorized\x20attempt\x20to\x20download\x20','reset-password','chat','\x1b[33m','showname','getUTCHours','File\x20uploaded','whitelistEnabled','yes','alerts','Password\x20has\x20been\x20reset\x20to:\x20','pidExpireLogin','rmSync','Disabled\x20Bot\x20','referer','login','push','getTime','handshake','exp','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','storeHeadless','bbvNew','telegramEvents','stopped','endsWith','value','apiSecret','\x20(1)','/download/:type','backup-full.zip','warning','statSync','DEFLATE','Unauthorized\x20attempt\x20to\x20get\x20portfolio','once','event','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','constructor','Logged\x20out\x20user\x20...','storeFiat','#RES#\x0a','2FA\x20login\x20token\x20generated','removeListener','::ffff:127.0.0.1','backupfile','\x20to\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','Logged\x20in\x20user\x20...','hashSync','mixpanel','temporaryAccessAllowed','telegramToken','Unauthorized\x20attempt\x20to\x20update\x20settings','/restart\x20-\x20restart\x20bot(s)\x0a','get-logs','remoteAddress','compareSync','/on\x20-\x20start\x20bot(s)\x0a','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','***','Restore\x20process\x20aborted','headless','\x20>\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','reinstall-bb','Network\x20Interfaces:','logs/','getDate','update-bot','toggleBotMode','parse','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','Starting\x20Balance\x20Bot\x20reinstallation','Error\x20removing\x20old\x20backup\x20files:','answerCallbackQuery','Unauthorized\x20attempt\x20to\x20get\x20events','privateKey','getFullYear','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','randomBytes','update-bb','slice','login\x20token\x20valid','new-disabled','inherit','ipv6','15\x20min','write','log','debug','api-eu.mixpanel.com','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','reinstall','settings','\x20|\x20','defaults','all','logged\x20out','botmanager','password','access','store-headless','get-backup-files','(((.+)+)+)+$','\x20(2)','temporary\x20access\x20timeout','/enable\x20-\x20enable\x20notifications\x0a','padStart','Unauthorized\x20attempt\x20to\x20update\x20bot','kill','timestamp','Unauthorized\x20login\x20attempt\x20(timeout)','loginRequired','NTBA_FIX_319','Unauthorized\x20attempt\x20to\x20add\x20bot','initclient','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','logout','download','notification','Bot\x20','params','conn','Unauthorized\x20attempt\x20to\x20store\x20configuration','botname','connection','lowdb/adapters/FileSync','Restoring\x20bot(s)\x20from\x20backup','timeshift','/:bot/configuration','getSeconds','<b>Telegram\x20Bot\x20Status:</b>\x0a','Unauthorized\x20attempt\x20to\x20log\x20out','/names\x20-\x20show\x20bot\x20names\x0a','secure','bb-config.json','config/','All','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','user','forEach','5\x20min','toString','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','2PYhnpr','update','date-fns','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Access\x20enabled\x20for\x20','Ok,\x20will\x20send\x20order\x20notifications\x20only','new','manual','reject','then','-performance.json','search','Starting\x20Balance\x20Bot\x20','Login\x20rejected','show','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','0.0.0','from','Node.js\x20v','files'];_0x53d5=function(){return _0x40d4e2;};return _0x53d5();}async function unzipFile(_0x258e92,_0x18c6f4){const _0x3beacb=_0x414357;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x3beacb(0xe1)](_0x31b31d=>{const _0x251a84=_0x3beacb;if(!_0x31b31d[_0x251a84(0x178)]())fs[_0x251a84(0x237)](configpath+_0x31b31d[_0x251a84(0x114)]);});const _0x4e7002=fs['readFileSync'](_0x258e92+_0x18c6f4,_0x3beacb(0x111)),_0x1ed7b9=new require('node-zip')(_0x4e7002,{'base64':![],'checkCRC32':!![]});Object[_0x3beacb(0x1ea)](_0x1ed7b9['files'])[_0x3beacb(0xe1)](_0x1d114c=>{const _0x218dca=_0x3beacb,_0x381b51=_0x1ed7b9['files'][_0x1d114c];fs[_0x218dca(0x116)](configpath+_0x381b51[_0x218dca(0x114)],_0x381b51[_0x218dca(0x1b0)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x549dae=>{const _0x3d5b4b=_0x3beacb;if(!_0x549dae[_0x3d5b4b(0x178)]())fs[_0x3d5b4b(0x237)](temppath+_0x549dae[_0x3d5b4b(0x114)]);}),logger[_0x3beacb(0xae)](_0x3beacb(0x12a)),process['send']({'restore':!![]},_0x3ba52b=>{});}async function getPublicIp(){const _0x4dd58e=_0x414357;try{const _0x53d1c6=await axios[_0x4dd58e(0x142)]('https://api.ipify.org?format=json');publicip=_0x53d1c6['data']['ip'];}catch(_0x504e75){}}async function triggerAnalytics(){const _0x5d869d=_0x414357;if(!publicip)await getPublicIp();const _0x5e8609=getBotsWithMode();let _0x33f9c0=0x0;_0x5e8609['forEach'](_0x316491=>{const _0x232e4a=_0x1d21;if(_0x316491[_0x232e4a(0x1a3)]===_0x232e4a(0x1fb))_0x33f9c0++;});const _0x50d996=getBotExchanges();mixpanel[_0x5d869d(0x1ba)](_0x5d869d(0x1e1),{'distinct_id':settings[_0x5d869d(0xff)],'ip':publicip,'version':serverversion,'numbots':_0x5e8609[_0x5d869d(0x17d)],'numbotsenabled':_0x33f9c0,'exchanges':_0x50d996});}async function getMessages(){const _0x30d14a=_0x414357,_0x16a609='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x3c7d6d=new GraphQLClient(_0x16a609),_0x40c3f9={'authorization':_0x30d14a(0xc9)},_0x2b0d8e=serverversion[_0x30d14a(0x211)]('.'),_0x3952bf=_0x2b0d8e[0x0]+'.'+_0x2b0d8e[0x1],_0x9c0922=Math[_0x30d14a(0x1b9)](settings['lastmsgtelegram'],settings[_0x30d14a(0x170)]),_0x3667d4={'last':parseInt(_0x9c0922),'bbm':_0x3952bf},_0x1013bb=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x3e066c;try{_0x3e066c=await _0x3c7d6d[_0x30d14a(0x177)](_0x1013bb,_0x3667d4,_0x40c3f9);}catch(_0x2c38a5){}if(_0x3e066c&&_0x3e066c[_0x30d14a(0x103)]){let _0x25a604=settings[_0x30d14a(0x1bb)];newMessages=[];for(const _0x1ccbea of _0x3e066c[_0x30d14a(0x103)]){newMessages['push'](_0x1ccbea);if(_0x1ccbea[_0x30d14a(0x241)])updateSetting(_0x30d14a(0x118),_0x1ccbea[_0x30d14a(0x241)]);let _0x1d935e=_0x1ccbea[_0x30d14a(0x241)]?serverversion>=_0x1ccbea['bbvNew']:![];if(!_0x1d935e&&_0x1ccbea['number']>_0x25a604){if(_0x1ccbea[_0x30d14a(0x131)]==='any'||serverversion[_0x30d14a(0x10c)](_0x1ccbea[_0x30d14a(0x131)])){let _0x37cb37=''+_0x1ccbea[_0x30d14a(0x1c4)]+'\x0a\x0a'+_0x1ccbea[_0x30d14a(0x1d0)];const _0x2b4948=await sendTelegramMsg(toTelegramMarkdown(_0x37cb37),'Markdown');if(_0x2b4948)_0x25a604=_0x1ccbea['number'];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x30d14a(0x1bb),_0x25a604),emitMessages();}}function emitMessages(){const _0x54c429=_0x414357,_0x48ce04=settings[_0x54c429(0x170)];let _0x484382=[];newMessages[_0x54c429(0xe1)](_0x25b656=>{const _0x4abdc4=_0x54c429;_0x25b656[_0x4abdc4(0x1ca)]>_0x48ce04&&_0x484382[_0x4abdc4(0x23b)](_0x25b656);}),_0x484382['length']>0x0&&getAllClients()[_0x54c429(0xe1)](_0x531717=>{getSocket(_0x531717['id'])['emit']('message',_0x484382);});}function confirmMessage(_0x10f644){const _0x373476=_0x414357;updateSetting(_0x373476(0x170),Number(_0x10f644));}function isNewerVersion(_0x42a777,_0x261831){const _0x8a3ade=_0x414357,_0x2172e1=_0x261831[_0x8a3ade(0x211)]('.'),_0x2359a6=_0x42a777[_0x8a3ade(0x211)]('.');for(var _0x32dbc5=0x0;_0x32dbc5<_0x2359a6[_0x8a3ade(0x17d)];_0x32dbc5++){const _0x2f9f75=~~_0x2359a6[_0x32dbc5],_0x3563dc=~~_0x2172e1[_0x32dbc5];if(_0x2f9f75>_0x3563dc)return!![];if(_0x2f9f75<_0x3563dc)return![];}return![];}function toTelegramMarkdown(_0x20ebeb){const _0x42e768=_0x414357,_0x34c910=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x52742a=/\*{2}(.+?)\*{2}/gim;return _0x20ebeb=_0x20ebeb[_0x42e768(0x212)](_0x34c910,'$1_$2_$3')[_0x42e768(0x212)](_0x52742a,_0x42e768(0x149)),_0x20ebeb;}async function validateConfigFile(){const _0x4c8027=_0x414357,_0x2cda11=dbConfig['get']('bots')['sortBy'](_0x4c8027(0x1f8))['value']()||[];if(_0x2cda11[_0x4c8027(0x17d)]==0x0){let _0x30b48e=0x0,_0x5dffdf=[];const _0x14f3e9=/^bot-([0-9]{3})-config.json$/,_0x315bfb=fs[_0x4c8027(0x121)](configpath);_0x315bfb[_0x4c8027(0xe1)](_0x319064=>{const _0x15bd7f=_0x4c8027,_0x27df59=_0x14f3e9[_0x15bd7f(0x190)](_0x319064);if(_0x27df59){const _0x1de385=_0x27df59[0x1];let _0x4d5bf8=getBotAttributes(_0x1de385);_0x5dffdf[_0x15bd7f(0x23b)]({'botID':_0x1de385,'botname':_0x4d5bf8[_0x15bd7f(0xd1)],'status':_0x15bd7f(0x1b3),'live':_0x15bd7f(0x243)}),_0x30b48e++;}}),_0x30b48e!=0x0&&(dbConfig[_0x4c8027(0x142)](_0x4c8027(0x16e))[_0x4c8027(0x16c)](_0x5dffdf)['write'](),config=_0x5dffdf,restoredConfigFile=_0x30b48e);}}async function restoreConfigNotify(_0xb569d5){const _0x3b7d16=_0x414357;let _0x1d65d8;if(restoredConfigFile==0x1)_0x1d65d8='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x1d65d8=_0x3b7d16(0x1f6);if(_0xb569d5)io['to'](_0x3b7d16(0xb7))[_0x3b7d16(0x1a9)](_0x3b7d16(0xcc),_0x1d65d8);else{logger[_0x3b7d16(0x1f9)](_0x3b7d16(0x151)),logger[_0x3b7d16(0x1f9)](_0x1d65d8),logger[_0x3b7d16(0x1f9)](_0x3b7d16(0x151)),logger[_0x3b7d16(0x1f9)]('');if(tgBot&&settings[_0x3b7d16(0x13a)]&&settings[_0x3b7d16(0x242)]!='orders')tgBot[_0x3b7d16(0x218)](settings[_0x3b7d16(0x13a)],_0x3b7d16(0x227)+_0x1d65d8)['catch'](_0x392e70=>{telegramError(_0x392e70);});}}function validateCredentials(_0x4ef029,_0x1dbee7){const _0x420bf6=_0x414357;if(_0x4ef029[_0x420bf6(0x12f)]==settings[_0x420bf6(0x210)]&&bcrypt[_0x420bf6(0x8a)](_0x4ef029[_0x420bf6(0xb8)],settings[_0x420bf6(0x166)])){if(settings[_0x420bf6(0x1c9)])return{'allow':![],'reason':_0x420bf6(0x1c8),'token':null};else{const _0x5d8361=generateLoginToken(_0x1dbee7);return{'allow':!![],'reason':_0x420bf6(0x12e),'token':_0x5d8361};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x3ca8b4){const _0x1be04f=generateLoginToken(_0x3ca8b4);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1be04f};}function validateAccess(_0x4277d5,_0x1c63ab,_0x3fdf62){const _0x1dfc69=_0x414357,_0x44ed65=_0x3fdf62?_0x3fdf62:devices[_0x1c63ab]['ip'];let _0x38afc8;const _0x5f058f=_0xea2c6a=>{const _0xb714c2=_0x1d21;if(settings[_0xb714c2(0xc5)]){if(settings[_0xb714c2(0x1c9)]){if(telegram2FaApproved(_0x1c63ab)){const _0x2595ac=generateLoginToken(_0x1c63ab);return{'allow':!![],'reason':_0xb714c2(0x255),'token':_0x2595ac};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x38afc8=validToken(_0xea2c6a,_0x1c63ab),_0x38afc8[_0xb714c2(0x1cb)](_0xb714c2(0x127))?{'allow':!![],'reason':_0xb714c2(0xa7),'token':_0xea2c6a}:{'allow':![],'reason':_0xb714c2(0x19c),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x1dfc69(0x232)]){let _0x415114=[...settings['whitelist'],'::1',_0x1dfc69(0x257),_0x1dfc69(0x17f)];if(_0x415114['includes'](_0x44ed65))return _0x5f058f(_0x4277d5);else{_0x38afc8=validToken(_0x4277d5,_0x1c63ab);if(_0x38afc8[_0x1dfc69(0x1cb)](_0x1dfc69(0x127)))return _0x5f058f(_0x4277d5);else{if(telegramIpApproved(_0x1c63ab)){const _0x2843fd=generateToken(_0x1c63ab);return _0x38afc8=_0x5f058f(_0x4277d5),_0x38afc8['allow']?{'allow':!![],'reason':_0x1dfc69(0x1be),'token':_0x2843fd}:_0x38afc8;}else return settings[_0x1dfc69(0x84)]?{'allow':![],'reason':_0x1dfc69(0x1b8),'token':null}:{'allow':![],'reason':_0x1dfc69(0xfc),'token':null};}}}else return _0x5f058f(_0x4277d5);}function timelyDecrypt(_0x1b5735,_0x372cd5=!![]){const _0x4a814f=_0x414357;if(_0x1b5735)try{const _0xd838a3=crypt['decrypt'](secure[_0x4a814f(0xa1)],_0x1b5735)[_0x4a814f(0x1d0)],_0x26c0b0=_0xd838a3[_0x4a814f(0x211)]('@')[0x0],_0x3693c1=_0xd838a3[_0x4a814f(0x211)]('@')[0x1],_0x506fac=new Date()[_0x4a814f(0x23c)]();if(_0x372cd5){if(_0x506fac-_0x3693c1<maxSecretAge*0x3e8)return _0x26c0b0;else return![];}else return _0x26c0b0;}catch(_0x4f9b52){return![];}else return![];}const validToken=(_0x28a729,_0x2dc940)=>{const _0x55287c=_0x414357,_0x5ccea1=devices[_0x2dc940]['ip'];if(!_0x28a729)return{'error':'No\x20authentication\x20token'};for(let _0x5acd04 of blacklist){if(_0x5acd04['token']==_0x28a729)return{'error':_0x55287c(0x18b)};}let _0x250722;try{_0x250722=jwt['verify'](_0x28a729,secure[_0x55287c(0x1db)]+_0x2dc940);}catch{return{'error':_0x55287c(0x1fa)};}if(!_0x250722[_0x55287c(0x1cb)](_0x55287c(0x176))&&!_0x250722[_0x55287c(0x1cb)](_0x55287c(0x12f))||!_0x250722[_0x55287c(0x1cb)](_0x55287c(0x23e)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x250722[_0x55287c(0x1cb)](_0x55287c(0x12f))&&_0x250722[_0x55287c(0x1cb)](_0x55287c(0x176))){const {clientip:_0x55c750}=_0x250722;return _0x5ccea1==_0x55c750?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x55287c(0x137)};}else{if(_0x250722[_0x55287c(0x1cb)](_0x55287c(0x12f))&&_0x250722[_0x55287c(0x1cb)](_0x55287c(0x176))){const {username:_0x47b66a,clientip:_0x1414ec}=_0x250722;return settings[_0x55287c(0x210)]==_0x47b66a&&_0x5ccea1==_0x1414ec?{'success':_0x55287c(0x16b)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x52b45c=>{const _0x162ae6=_0x414357;if(_0x52b45c){const _0x399499=devices[_0x52b45c]['ip'];return jwt['sign']({'username':settings[_0x162ae6(0x210)],'clientip':_0x399499},secure[_0x162ae6(0x1db)]+_0x52b45c,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x5bbcf9=>{const _0x438fb8=_0x414357;if(_0x5bbcf9){const _0x55e4bd=devices[_0x5bbcf9]['ip'];return jwt['sign']({'clientip':_0x55e4bd},secure[_0x438fb8(0x1db)]+_0x5bbcf9,{'expiresIn':devices[_0x5bbcf9][_0x438fb8(0x19a)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x6dd10c=>{const _0xd19a78=_0x414357;let _0x3e7c30=![];return devices[_0x6dd10c][_0xd19a78(0x19a)]&&devices[_0x6dd10c]['telegramIpApproval'][_0xd19a78(0x169)]!=_0xd19a78(0xed)&&(_0x3e7c30=devices[_0x6dd10c][_0xd19a78(0x19a)][_0xd19a78(0x176)]==devices[_0x6dd10c]['ip']&&new Date()['getTime']()-devices[_0x6dd10c][_0xd19a78(0x19a)][_0xd19a78(0xc3)]<devices[_0x6dd10c][_0xd19a78(0x19a)][_0xd19a78(0x169)]*0x3c*0x3e8),_0x3e7c30;},telegram2FaApproved=_0x2e74ff=>{const _0x3f7e4f=_0x414357;let _0x492deb=![];return devices[_0x2e74ff][_0x3f7e4f(0x1ef)]&&devices[_0x2e74ff][_0x3f7e4f(0x1ef)][_0x3f7e4f(0x169)]!=_0x3f7e4f(0xed)&&(_0x492deb=devices[_0x2e74ff]['telegram2FaApproval'][_0x3f7e4f(0x176)]==devices[_0x2e74ff]['ip']&&new Date()['getTime']()-devices[_0x2e74ff]['telegram2FaApproval'][_0x3f7e4f(0xc3)]<devices[_0x2e74ff][_0x3f7e4f(0x1ef)]['expiry']*0x3c*0x3e8),_0x492deb;},normalizeIP=_0x8f30f=>{const _0x4f1699=_0x414357;let _0x4df29a=null,_0x53cc5d=null;if(ipaddr[_0x4f1699(0x206)](_0x8f30f)){const _0x2857cd=ipaddr['parse'](_0x8f30f);_0x2857cd['kind']()===_0x4f1699(0xaa)?(_0x2857cd[_0x4f1699(0x1b1)]()&&(_0x4df29a=_0x2857cd[_0x4f1699(0x15e)]()[_0x4f1699(0xe3)]()),_0x53cc5d=_0x2857cd['toString']()):(_0x4df29a=_0x2857cd['toString'](),_0x53cc5d=_0x2857cd[_0x4f1699(0x107)]()['toString']());}return{'show':_0x4df29a?_0x4df29a:_0x53cc5d,'store':_0x53cc5d};};function formatDate(_0x5442bb){const _0x514b56=_0x414357;return _0x5442bb['getFullYear']()+'/'+(_0x5442bb[_0x514b56(0x1b4)]()+0x1)['toString']()['padStart'](0x2,'0')+'/'+_0x5442bb[_0x514b56(0x98)]()[_0x514b56(0xe3)]()[_0x514b56(0xc0)](0x2,'0')+'\x20'+_0x5442bb[_0x514b56(0x181)]()[_0x514b56(0xe3)]()[_0x514b56(0xc0)](0x2,'0')+':'+_0x5442bb[_0x514b56(0x13e)]()['toString']()[_0x514b56(0xc0)](0x2,'0')+':'+_0x5442bb['getSeconds']()[_0x514b56(0xe3)]()[_0x514b56(0xc0)](0x2,'0');}function sleep(_0x2b44de){return new Promise(_0x64b335=>setTimeout(_0x64b335,_0x2b44de));}