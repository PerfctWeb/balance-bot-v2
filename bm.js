const _0x51d6d2=_0x1401;(function(_0x1fc1ea,_0x32d60d){const _0x1e7779=_0x1401,_0x246c58=_0x1fc1ea();while(!![]){try{const _0x2f31ab=parseInt(_0x1e7779(0x1fb))/0x1+parseInt(_0x1e7779(0x25b))/0x2*(-parseInt(_0x1e7779(0x1d2))/0x3)+-parseInt(_0x1e7779(0x2da))/0x4+parseInt(_0x1e7779(0x1df))/0x5+-parseInt(_0x1e7779(0x281))/0x6+parseInt(_0x1e7779(0x331))/0x7*(parseInt(_0x1e7779(0x30e))/0x8)+parseInt(_0x1e7779(0x25e))/0x9*(-parseInt(_0x1e7779(0x31d))/0xa);if(_0x2f31ab===_0x32d60d)break;else _0x246c58['push'](_0x246c58['shift']());}catch(_0x20323e){_0x246c58['push'](_0x246c58['shift']());}}}(_0x2878,0x28f2f));const _0x39099a=function(){let _0x3d700a=!![];return function(_0x5895c6,_0x3aa671){const _0xd40ad0=_0x3d700a?function(){if(_0x3aa671){const _0x5187e4=_0x3aa671['apply'](_0x5895c6,arguments);return _0x3aa671=null,_0x5187e4;}}:function(){};return _0x3d700a=![],_0xd40ad0;};}(),_0x24fd2d=_0x39099a(this,function(){const _0x3d3e17=_0x1401;return _0x24fd2d[_0x3d3e17(0x2ca)]()[_0x3d3e17(0x21d)](_0x3d3e17(0x208))[_0x3d3e17(0x2ca)]()[_0x3d3e17(0x2cd)](_0x24fd2d)[_0x3d3e17(0x21d)]('(((.+)+)+)+$');});_0x24fd2d();'use strict';process[_0x51d6d2(0x295)][_0x51d6d2(0x333)]=0x1;const childProcess=require(_0x51d6d2(0x230)),fs=require('fs'),fns=require(_0x51d6d2(0x245)),low=require('lowdb'),FileSync=require(_0x51d6d2(0x2c2)),path=require(_0x51d6d2(0x28b)),crypto=require(_0x51d6d2(0x22c)),Crypt=require(_0x51d6d2(0x280))[_0x51d6d2(0x1d1)],RSA=require(_0x51d6d2(0x280))[_0x51d6d2(0x378)],bcrypt=require('bcryptjs'),jwt=require(_0x51d6d2(0x313)),ipaddr=require('ipaddr.js'),argv=require(_0x51d6d2(0x22f))(process[_0x51d6d2(0x30c)]['slice'](0x2))[_0x51d6d2(0x30c)],uuidRandom=require(_0x51d6d2(0x380)),TelegramBot=require(_0x51d6d2(0x31c)),Mixpanel=require(_0x51d6d2(0x316)),axios=require(_0x51d6d2(0x1c4)),{GraphQLClient,gql}=require(_0x51d6d2(0x263)),util=require(_0x51d6d2(0x2e9)),fileUpload=require(_0x51d6d2(0x35c)),{networkInterfaces}=require('os'),PORT=argv[_0x51d6d2(0x215)]||_0x51d6d2(0x257),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x51d6d2(0x1db)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x51d6d2(0x1f0)),process['exit'](0x1));const HOST=argv[_0x51d6d2(0x2ba)]||null,userID=argv[_0x51d6d2(0x321)]||'',debugging=argv['d']||![],nodeversion=process['versions']['node'];let bbpath=_0x51d6d2(0x342),bbpath2='';const botfile='bot.js',configfile=_0x51d6d2(0x290),settingsfile=_0x51d6d2(0x256),securefile=_0x51d6d2(0x37c),environment=require('./'+bbpath2+_0x51d6d2(0x32b))[_0x51d6d2(0x234)]||_0x51d6d2(0x1ba),maxBackups=0xa;let validInstallation=!![];!fs['existsSync'](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+'clients'),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x51d6d2(0x30d),configbackuppath=configpath+_0x51d6d2(0x350),logspath=userID?bbpath+_0x51d6d2(0x24f)+userID+'/':bbpath+_0x51d6d2(0x24f),zippath=userID?bbpath+_0x51d6d2(0x35e)+userID+'/':bbpath+'zip/',loggerfile=fs[_0x51d6d2(0x205)](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x51d6d2(0x228)+userID+'/':bbpath+_0x51d6d2(0x228);!fs['existsSync'](configpath)&&fs[_0x51d6d2(0x343)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x51d6d2(0x1e0)](logspath)&&fs[_0x51d6d2(0x343)](logspath);!fs[_0x51d6d2(0x1e0)](zippath)&&fs[_0x51d6d2(0x343)](zippath);!fs['existsSync'](temppath)&&fs['mkdirSync'](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x51d6d2(0x339)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings['defaults']({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0','onepagemode':![]}})[_0x51d6d2(0x339)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})[_0x51d6d2(0x339)]();let crypt=new Crypt({'md':_0x51d6d2(0x1cf),'rsaStandard':_0x51d6d2(0x2d5)});const saltRounds=0xa,mixpanel=Mixpanel[_0x51d6d2(0x1c5)](_0x51d6d2(0x285),{'host':_0x51d6d2(0x1e2)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&settings[_0x51d6d2(0x370)]!=''&&settings['telegramUsername']&&settings[_0x51d6d2(0x238)]!='')initTelegram();const parseColor=(_0x56cb99,_0x4b73b8)=>{const _0x3fe0d6=_0x51d6d2,_0x5abf7d=/#[A-Z]{3}#/g;if(typeof _0x56cb99=='string'){!_0x4b73b8?_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](_0x5abf7d,''):(_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#BLU#/g,_0x3fe0d6(0x34f)),_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#RED#/g,_0x3fe0d6(0x2cb)),_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#YEL#/g,_0x3fe0d6(0x30f)),_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#MAG#/g,_0x3fe0d6(0x32f)),_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#CYA#/g,'\x1b[36m'),_0x56cb99=_0x56cb99[_0x3fe0d6(0x203)](/#RES#/g,_0x3fe0d6(0x37a)));;}return _0x56cb99;},logger={'screen':_0x2405cc=>{console['log'](parseColor(_0x2405cc,!![]));},'simple':_0x38e9a1=>{const _0x5f34a0=_0x51d6d2;console[_0x5f34a0(0x1db)](parseColor(_0x38e9a1,!![])),loggerfile['write'](util[_0x5f34a0(0x294)](parseColor(_0x38e9a1,![]))+'\x0a');},'full':async _0x39b45f=>{const _0x5cb4cd=_0x51d6d2,_0x51a1f0=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x39b45f;console[_0x5cb4cd(0x1db)](parseColor(_0x51a1f0,!![])),loggerfile[_0x5cb4cd(0x339)](util[_0x5cb4cd(0x294)](parseColor(_0x51a1f0,![]))+'\x0a');if(tgBot&&settings[_0x5cb4cd(0x319)]&&settings[_0x5cb4cd(0x2b2)]!='orders')await tgBot[_0x5cb4cd(0x2c9)](settings[_0x5cb4cd(0x319)],_0x5cb4cd(0x1a5)+parseColor(_0x39b45f,![]))[_0x5cb4cd(0x1be)](_0x1c3ed6=>{telegramError(_0x1c3ed6);});},'debug':async(_0x2bb905,_0x318f51='')=>{const _0x470640=_0x51d6d2,_0x4da3a3=getTimeStamp()+_0x470640(0x1b9)+_0x2bb905;if(debugging)console[_0x470640(0x1db)](parseColor(_0x4da3a3,!![]));loggerfile[_0x470640(0x339)](util[_0x470640(0x294)](parseColor(_0x4da3a3,![]))+'\x0a');if(_0x318f51){if(debugging)console[_0x470640(0x1db)](_0x318f51);loggerfile[_0x470640(0x339)](util['format'](_0x318f51)+'\x0a');}}};process['on'](_0x51d6d2(0x353),function(_0x198a24){const _0x4c202b=_0x51d6d2;logger[_0x4c202b(0x2fa)](_0x198a24);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x51d6d2(0x32b))[_0x51d6d2(0x2c7)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x51d6d2(0x2b1)),app=express(),http=require(_0x51d6d2(0x31b))[_0x51d6d2(0x301)](app);app[_0x51d6d2(0x1f3)](fileUpload({'useTempFiles':!![]})),app['get'](_0x51d6d2(0x1b1),async(_0x44f6aa,_0x556b89)=>{const _0x1e54cf=_0x51d6d2,_0x26259c=_0x44f6aa[_0x1e54cf(0x362)][_0x1e54cf(0x305)],_0x107d5e=getClientsWithBotID(_0x1e54cf(0x2a8)),_0x346cb9=_0x44f6aa[_0x1e54cf(0x318)][_0x1e54cf(0x328)],_0x444a7c=timelyDecrypt(_0x346cb9,![]),_0x71bc4d=_0x107d5e[_0x1e54cf(0x224)](_0x325099=>_0x325099['uuid']==_0x444a7c);if(_0x71bc4d){const _0x334fd5=normalizeIP(_0x44f6aa[_0x1e54cf(0x2eb)][_0x1e54cf(0x25d)])[_0x1e54cf(0x1bc)],_0x2ca596=_0x44f6aa['headers'][_0x1e54cf(0x340)];if(validateAccess(_0x2ca596,_0x444a7c,_0x334fd5)[_0x1e54cf(0x248)])_0x26259c==_0x1e54cf(0x246)&&await backupConfigFiles(),await zipFiles(_0x26259c),_0x556b89[_0x1e54cf(0x1b2)](zippath+(_0x26259c+_0x1e54cf(0x213)),_0x508260=>{const _0x50b680=_0x1e54cf;_0x508260&&(logger[_0x50b680(0x249)](_0x50b680(0x341)+_0x26259c),logger[_0x50b680(0x2fa)](_0x508260));});else logger['full'](_0x1e54cf(0x2d6)+_0x26259c+_0x1e54cf(0x211));}else logger[_0x1e54cf(0x249)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x26259c+_0x1e54cf(0x1ff));}),app[_0x51d6d2(0x2dd)](_0x51d6d2(0x221),async(_0x1e3555,_0x3a34a7)=>{const _0x8e6d8=_0x51d6d2,_0x48f190=getClientsWithBotID(_0x8e6d8(0x2a8)),_0x295371=_0x1e3555[_0x8e6d8(0x318)][_0x8e6d8(0x328)],_0x23b3b6=timelyDecrypt(_0x295371,![]),_0x30d8a3=_0x48f190[_0x8e6d8(0x224)](_0x4e6b56=>_0x4e6b56[_0x8e6d8(0x328)]==_0x23b3b6);logger['debug'](_0x8e6d8(0x2a4));if(_0x30d8a3){const _0x4ebe95=normalizeIP(_0x1e3555[_0x8e6d8(0x2eb)][_0x8e6d8(0x25d)])[_0x8e6d8(0x1bc)],_0x3eed03=_0x1e3555[_0x8e6d8(0x318)][_0x8e6d8(0x340)];if(validateAccess(_0x3eed03,_0x23b3b6,_0x4ebe95)[_0x8e6d8(0x248)]){if(_0x1e3555['files']){const _0x540890=_0x1e3555[_0x8e6d8(0x217)]['backupfile'];await _0x540890['mv'](temppath+_0x540890[_0x8e6d8(0x1f2)]),_0x3a34a7[_0x8e6d8(0x2db)]({'status':!![],'message':_0x8e6d8(0x20f)});const _0xc400f5=getBotsWithMode();_0xc400f5[_0x8e6d8(0x329)]>0x0?confirmRestore(temppath,_0x540890[_0x8e6d8(0x1f2)]):unzipFile(temppath,_0x540890[_0x8e6d8(0x1f2)]);}}else logger[_0x8e6d8(0x249)](_0x8e6d8(0x376));}else logger[_0x8e6d8(0x249)](_0x8e6d8(0x276));}),app[_0x51d6d2(0x1f3)](express[_0x51d6d2(0x288)](path[_0x51d6d2(0x2d1)](__dirname,bbpath2,_0x51d6d2(0x381)))),app[_0x51d6d2(0x1f3)](express[_0x51d6d2(0x288)](path[_0x51d6d2(0x2d1)](__dirname,bbpath2,_0x51d6d2(0x364)))),app['get']('/',function(_0x1fbe58,_0x1c5261){const _0x433043=_0x51d6d2;_0x1c5261['sendFile'](path[_0x433043(0x2d1)](__dirname,bbpath2,'build2',_0x433043(0x336)));}),app[_0x51d6d2(0x32a)]('/:bot',function(_0x3b48e0,_0x312ad9){const _0x21f94e=_0x51d6d2;_0x312ad9[_0x21f94e(0x1bb)](path[_0x21f94e(0x2d1)](__dirname,bbpath2,_0x21f94e(0x364),_0x21f94e(0x336)));}),app[_0x51d6d2(0x32a)](_0x51d6d2(0x33b),(_0x500b5a,_0x49524e)=>{const _0x10731b=_0x51d6d2;_0x49524e[_0x10731b(0x1bb)](path['join'](__dirname,bbpath2,_0x10731b(0x364),_0x10731b(0x336)));}),app[_0x51d6d2(0x32a)]('/:bot/performance',(_0x2e7ec4,_0x4dd693)=>{const _0x41a2cd=_0x51d6d2;_0x4dd693[_0x41a2cd(0x1bb)](path[_0x41a2cd(0x2d1)](__dirname,bbpath2,_0x41a2cd(0x364),_0x41a2cd(0x336)));}),app[_0x51d6d2(0x32a)](_0x51d6d2(0x307),(_0x120d87,_0x4302cf)=>{const _0x2dfcd3=_0x51d6d2;_0x4302cf[_0x2dfcd3(0x1bb)](path[_0x2dfcd3(0x2d1)](__dirname,bbpath2,'build',_0x2dfcd3(0x336)));}),app[_0x51d6d2(0x32a)](_0x51d6d2(0x260),(_0x69a112,_0x34514b)=>{const _0x462815=_0x51d6d2;_0x34514b[_0x462815(0x1bb)](path['join'](__dirname,bbpath2,_0x462815(0x364),_0x462815(0x336)));}),app[_0x51d6d2(0x32a)](_0x51d6d2(0x326),(_0x4910ce,_0x735196)=>{const _0x3a6855=_0x51d6d2;_0x735196[_0x3a6855(0x1bb)](path[_0x3a6855(0x2d1)](__dirname,bbpath2,_0x3a6855(0x364),_0x3a6855(0x336)));}),app[_0x51d6d2(0x32a)](_0x51d6d2(0x309),(_0x4b86e0,_0x226aca)=>{const _0x5c9fd3=_0x51d6d2;_0x226aca['sendFile'](path[_0x5c9fd3(0x2d1)](__dirname,bbpath2,'build','index.html'));});if(HOST)http[_0x51d6d2(0x21e)](PORT,HOST);else http['listen'](PORT);const io=require(_0x51d6d2(0x1a9))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x2a49eb=_0x51d6d2;let _0x203782='[ip-address]';const _0x4257b7=networkInterfaces(),_0x28fdb3={};for(const _0x162d03 of Object[_0x2a49eb(0x255)](_0x4257b7)){for(const _0x97d0d6 of _0x4257b7[_0x162d03]){if((_0x97d0d6['family']==_0x2a49eb(0x2b7)||_0x97d0d6['family']==0x4)&&!_0x97d0d6[_0x2a49eb(0x332)]){const _0x1ad69e=ipaddr[_0x2a49eb(0x1e7)](_0x97d0d6['address'])['range']();_0x1ad69e!='private'&&(!_0x28fdb3[_0x162d03]&&(_0x28fdb3[_0x162d03]=[]),_0x28fdb3[_0x162d03]['push'](_0x97d0d6[_0x2a49eb(0x1e9)]),_0x203782=_0x97d0d6[_0x2a49eb(0x1e9)]);}}}return{'serverip':_0x203782,'netinterfaces':_0x28fdb3};}async function startServer(){const _0x546c87=_0x51d6d2,{serverip:_0x36deec,netinterfaces:_0x350250}=getServerIP();logger[_0x546c87(0x2fa)](''),logger[_0x546c87(0x2fa)](_0x546c87(0x1bf)),await logger[_0x546c87(0x249)](_0x546c87(0x2e5)+serverversion+_0x546c87(0x1b8)+(environment==_0x546c87(0x1f4)?_0x546c87(0x2df):'')+'\x0a'+(_0x546c87(0x1d6)+PORT+_0x546c87(0x356))+(_0x546c87(0x2f2)+_0x36deec+':'+PORT+_0x546c87(0x293))),logger[_0x546c87(0x2fa)](_0x546c87(0x1bf));if(config[_0x546c87(0x329)]!=0x0)for(const _0x32f582 of config){if(_0x32f582[_0x546c87(0x2e0)]==_0x546c87(0x2d7)||_0x32f582[_0x546c87(0x2e0)]=='new')await logger['full'](_0x546c87(0x27f)+_0x32f582[_0x546c87(0x1cd)]+_0x546c87(0x31a)+_0x32f582[_0x546c87(0x220)]),startBot([_0x32f582[_0x546c87(0x1cd)],userID],{'cwd':bbpath},function(_0x4c1824){const _0x475d47=_0x546c87;if(_0x4c1824)logger[_0x475d47(0x249)](_0x4c1824);});else(_0x32f582[_0x546c87(0x2e0)]==_0x546c87(0x363)||_0x32f582[_0x546c87(0x2e0)]==_0x546c87(0x351))&&await logger[_0x546c87(0x249)]('Idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0x32f582['botID']+'\x20|\x20'+_0x32f582[_0x546c87(0x220)]);}else!newBot&&logger['simple'](_0x546c87(0x314));if(newBot)addBot();logger[_0x546c87(0x2fa)]('-----------------------------------------------------------------------------------'),logger[_0x546c87(0x2fa)](''),await logger[_0x546c87(0x2ec)](_0x546c87(0x2a2)+nodeversion),await logger[_0x546c87(0x2ec)](_0x546c87(0x2bc),_0x350250);}function startSocket(){const _0xd64fb6=_0x51d6d2;io['on'](_0xd64fb6(0x264),_0x9febe=>{const _0x4c6f38=_0xd64fb6;let _0x2f78ef,_0x1c7aff,_0xec2558,_0x438330,_0x1ac1ce;const _0x132cf8=_0x9febe[_0x4c6f38(0x2aa)][_0x4c6f38(0x318)][_0x4c6f38(0x346)];_0x1c7aff=_0x132cf8['match'](/bot[0-9]{3}/);if(_0x1c7aff)_0xec2558=_0x1c7aff[0x0]['match'](/[0-9]{3}/);if(_0xec2558)_0x2f78ef=_0xec2558[0x0];else _0x2f78ef='botmanager';const _0x2d0e21=_0x9febe[_0x4c6f38(0x2aa)]['auth'][_0x4c6f38(0x303)];if(!_0x2d0e21)_0x9febe[_0x4c6f38(0x2e7)]('status',{'publicKey':secure['publicKey']});else{_0x438330=timelyDecrypt(_0x2d0e21,![]);if(!_0x438330)_0x9febe[_0x4c6f38(0x2e7)](_0x4c6f38(0x2e0),{'publicKey':secure[_0x4c6f38(0x1a0)]});else{_0x1ac1ce=normalizeIP(_0x9febe[_0x4c6f38(0x2fe)][_0x4c6f38(0x25d)])['store'];if(!devices[_0x438330])devices[_0x438330]={'uuid':_0x438330,'access':{'token':null}};devices[_0x438330]['ip']=_0x1ac1ce;const _0x4f9338=addClient(_0x9febe['id'],_0x438330,_0x2f78ef);setAccess(_0x4f9338),emitMessages(),_0x9febe['on']('login',_0x2d6f85=>{const _0x55c5d6=_0x4c6f38,_0x2a789e=timelyDecrypt(_0x2d6f85[_0x55c5d6(0x308)]);if(_0x2a789e){_0x2d6f85={'username':_0x2d6f85[_0x55c5d6(0x1b4)],'password':_0x2a789e},devices[_0x438330]['access']=validateCredentials(_0x2d6f85,_0x438330);if(devices[_0x438330]['access'][_0x55c5d6(0x248)]==![]&&devices[_0x438330][_0x55c5d6(0x226)][_0x55c5d6(0x1c3)]=='2FA\x20login\x20required')_0x9febe[_0x55c5d6(0x2e7)](_0x55c5d6(0x2e0),{'access':devices[_0x438330][_0x55c5d6(0x226)]}),loginAccess2FA(_0x438330,_0x1ac1ce);else{if(devices[_0x438330][_0x55c5d6(0x226)]['allow']==![]&&devices[_0x438330][_0x55c5d6(0x226)]['reason']==_0x55c5d6(0x274))_0x9febe[_0x55c5d6(0x2e7)](_0x55c5d6(0x2e0),{'access':devices[_0x438330][_0x55c5d6(0x226)]});else devices[_0x438330][_0x55c5d6(0x226)][_0x55c5d6(0x248)]&&devices[_0x438330][_0x55c5d6(0x226)][_0x55c5d6(0x1c3)]==_0x55c5d6(0x22e)&&(getClientsWithUuid(_0x438330)[_0x55c5d6(0x35b)](_0x4d8b77=>{setAccess(_0x4d8b77);}),logger['debug'](_0x55c5d6(0x361)+_0x438330[_0x55c5d6(0x2c6)](-0x8)),setTokenRefresh(_0x438330),setSessionTimeout(_0x55c5d6(0x1c0),_0x438330));}}else logger[_0x55c5d6(0x249)](_0x55c5d6(0x2bf));}),_0x9febe['on'](_0x4c6f38(0x271),()=>{resetPassword();}),_0x9febe['on'](_0x4c6f38(0x2a3),_0x189ebb=>{removeClient(_0x9febe['id']);}),_0x2f78ef==_0x4c6f38(0x2a8)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x553be7){const _0x59ad5e=_0x51d6d2;if(_0x553be7!=_0x59ad5e(0x2a8)&&config['apiKey']!=''){if(pid[_0x553be7])pid[_0x553be7][_0x59ad5e(0x2db)]({'function':'initclient','args':null});}_0x553be7!=_0x59ad5e(0x2a8)&&broadcastToBots(_0x59ad5e(0x1ea),JSON[_0x59ad5e(0x269)](config));}function reloadBotManager(){const _0x50bd94=_0x51d6d2;getClientsWithBotID(_0x50bd94(0x2a8))[_0x50bd94(0x35b)](_0x2ef059=>{const _0x9b9cef=_0x50bd94;getSocket(_0x2ef059['id'])[_0x9b9cef(0x2e7)](_0x9b9cef(0x2e0),{'access':{'allow':![],'reason':_0x9b9cef(0x1af),'token':null}});});}function _0x2878(){const _0x16e490=['use','staging','includes','Invalid\x20IP\x20address','All\x20bots\x20running\x20right\x20now','15\x20min','get-logs','readFileSync','110905rEOaFj','Alerts','</b>\x20?','\x20>\x20','\x20(2)','emitHistory','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','output-003.log','replace','Enabled\x20Bot\x20','createWriteStream','getUTCHours','add-bot','(((.+)+)+)+$','randomFillSync','removeListener','settings.','telegramEnabled','Unauthorized\x20attempt\x20to\x20get\x20messages','whitelist','File\x20uploaded','getFullYear','\x20(1)','secret','.zip','any','port','reinstall-bb','files','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','bot-','timeshift','sign','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','search','listen','pidRefreshToken','botname','/upload-backup','connected','accept','find','telegramIpApproval','access','2FA\x20login\x20rejected','temp/','confirm-message','callback_query','\x20mode','crypto','logout','login\x20token\x20generated','yargs/yargs','child_process','Orders','error','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','environment','1000','Unauthorized\x20attempt\x20to\x20delete\x20bot','bbvNew','telegramUsername','sort','getStartingBalances','Server','endsWith','2FA\x20login\x20required','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','sockets','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reset-history','telegrammsg','output-002.log','userid','date-fns','backup','ipv6','allow','full','Unauthorized\x20attempt\x20to\x20update\x20settings','node-zip','expiry','store-settings','generateKeyPairAsync','logs/','started','<b>Telegram\x20Bot\x20Status:</b>\x0a','pidExpireLogin','sendPortfolioTelegram','sortBy','keys','bb-settings.json','3000','Bot\x20','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','20066xdLTrv','************','remoteAddress','3915gyDCFR','live','/:bot/history','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','No\x20authentication\x20token','graphql-request','connection','\x20|\x20client:\x20...','cancel-loading','2FA\x20login\x20token\x20generated','exchange','stringify','toggleBotMode','auto','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','binary','reject','title','blacklist','reset-password','yes','copyFileSync','invalid\x20credentials','whitelistEnabled','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','temporary\x20access\x20timeout','orders','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','settings','HTML','push','delete-alerts','padStart','Starting\x20bot\x20|\x20Bot\x20','hybrid-crypto-js','1140840cRBndn','temporary\x20access\x20rejected','2FA','toIPv4Address','6b67f3d61ee94b8f5c80b4affef4c4d9','alerts','Backup\x20file\x20unzipped\x20and\x20stored','static','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','path','fork','show','lastmsgemitted','getSeconds','bb-config.json','Restore\x20process\x20aborted','backup-full.zip','#RES#\x20if\x20running\x20on\x20server','format','env','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','stop','success','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','compareSync','isIPv4MappedAddress','Disabled\x20Bot\x20','event','/restart\x20-\x20restart\x20bot(s)\x0a','readdirSync','Unauthorized\x20attempt\x20to\x20add\x20bot','/names\x20-\x20show\x20bot\x20names\x0a','Node.js\x20v','disconnect','Backup\x20file\x20uploaded','set','get-messages','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','botmanager','manual','handshake','messages','/help\x20-\x20show\x20available\x20commands\x0a','restore-backup-file','No\x20bots\x20running\x20right\x20now','writeFileSync','Access\x20enabled\x20for\x20','express','telegramEvents','\x20|\x20user:\x20...','2FA\x20required','-performance.json','Error\x20while\x20deleting\x20config\x20files:\x20','IPv4','backup-full@','<b>Balance\x20Bot\x20Status:</b>\x0a','host','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Network\x20Interfaces:','min','rmSync','Unauthorized\x20login\x20attempt\x20(timeout)','ipc','delete-bot','lowdb/adapters/FileSync','store-fiat','Allow\x20login\x20from\x20IP\x20address\x20<b>','file','slice','version','Session\x20expired\x20for\x20user\x20...','sendMessage','toString','\x1b[31m','all','constructor','/on\x20-\x20start\x20bot(s)\x0a','headless','lastmsgtelegram','join','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','cancelLoading','SIGINT','RSA-OAEP','Unauthorized\x20attempt\x20to\x20download\x20','enabled','telegram2FaApproval','backup-files','486324oZbBOJ','send','from','post','map','(staging)','status','*$1*','filter','/metrics\x20-\x20show\x20bot\x20performance\x0a','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Starting\x20#RED#Balance\x20Bot\x20v','getTime','emit','answerCallbackQuery','util','split','socket','debug','/disable\x20-\x20disable\x20notifications\x0a','hashSync','storeFiat','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Token\x20blacklisted','=>\x20Go\x20to\x20#CYA#http://','randomBytes','placeOrder','server','/off\x20-\x20stop\x20bot(s)\x0a','Starting\x20Balance\x20Bot\x20update','number','onText','simple','updatebotmanager','Unauthorized\x20attempt\x20to\x20log\x20out','temporary\x20token\x20generated','conn','entries','-events.json','createServer','logged\x20out','encryptedUuid','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','type','chat','/:bot/coins','password','/:bot/support','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','argv','config/','8XmERLR','\x1b[33m','https://api.ipify.org?format=json','onepagemode','toIPv4MappedAddress','jsonwebtoken','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','order','mixpanel','Password\x20reset\x20rejected','headers','telegramChatId','\x20|\x20','http','node-telegram-bot-api','1940lxDzUG','404\x20Not\x20Found','removeAllListeners','running','user','bbvReceive','30\x20min','sendMetricsTelegram','stopPolling','/:bot/configuration','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','uuid','length','get','version.json','apiPassword','/status\x20-\x20show\x20bot(s)\x20status\x0a','\x20to\x20','\x1b[35m','notification','1058855SXnoOr','internal','NTBA_FIX_319','backup-full','Restarting\x20Bot\x20','index.html','latestversion','startsWith','write','getHours','/:bot/portfolio','Your\x20installation\x20is\x20already\x20up\x20to\x20date','getPortfolio','reinstall','hasOwnProperty','tkn','Failed\x20to\x20download\x20','bb/','mkdirSync','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','getDate','referer','telegram','then','SIGTERM','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','secure','Unauthorized\x20attempt\x20to\x20store\x20configuration','bbPassword','-results.json','\x1b[34m','backup/','new-disabled','data','uncaughtException','Notifications\x20disabled\x0a','***','#RES#\x20if\x20running\x20locally\x0a','login\x20token\x20valid','Unauthorized\x20attempt\x20to\x20update\x20bot','https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master','kill','forEach','express-fileupload','Unauthorized\x20attempt\x20to\x20show\x20configuration','zip/','get-starting-balances','value','Logged\x20in\x20user\x20...','params','disabled','build','get-portfolio','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','/update\x20-\x20update\x20Balance\x20Bot\x0a','Markdown','timestamp','bbUsername','output-001.log','toggle-bot-mode','\x20minutes','DEFLATE','show-config','telegramToken','track','getMinutes','Temporary\x20access\x20rejected','Yes','loginRequired','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','verify','RSA','token','\x1b[0m','Ok,\x20will\x20send\x20order\x20notifications\x20only','bb-secure.json','update','exit','_data','uuid-random','build2','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Invalid\x20username\x20or\x20IP\x20address','0.0.0','publicKey','statSync','Unauthorized\x20attempt\x20to\x20delete\x20alerts','-config.json','/enable\x20-\x20enable\x20notifications\x0a','Bot\x20Mgr\x20>\x20','Unauthorized\x20attempt\x20to\x20get\x20events','mtime','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','socket.io','once','get-backup-files','bot','::1','size','reload','resetHistory','/download/:type','download','request','username','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','showConfig','update-bb','#RES#\x20',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','production','sendFile','store','Deleted\x20Bot\x20','catch','-----------------------------------------------------------------------------------','login','store-headless','max','reason','axios','init','message','function','isDirectory','inherit','new','assign','Notifications\x20types:\x20','botID','remove','sha256','cloneDeep','Crypt','6BLraGf','Restore\x20backup\x20file\x20','logs','getMonth','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','stopped','mode','privateKey','output-000.log','log','All','unlinkSync','All\x20bots','1608670zAEkcD','existsSync','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','api-eu.mixpanel.com','apiSecret','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','temporary\x20access\x20not\x20allowed','decrypt','parse','Ok,\x20will\x20send\x20alert\x20notifications\x20only','address','bots','polling_error','clientip','exec','Restoring\x20bot(s)\x20from\x20backup','Unauthorized\x20attempt\x20to\x20confirm\x20message',',\x20must\x20be\x20a\x204\x20digit\x20number','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','name'];_0x2878=function(){return _0x16e490;};return _0x2878();}function getSocket(_0x49b191){const _0x50fb5f=_0x51d6d2;return io['sockets'][_0x50fb5f(0x23f)][_0x50fb5f(0x32a)](_0x49b191);}function setAccess(_0x1ac7e6){const _0x45dded=_0x51d6d2,_0x226d33=getSocket(_0x1ac7e6['id']),_0x496079=_0x1ac7e6[_0x45dded(0x328)],_0x43734c=_0x1ac7e6['bot'];devices[_0x496079][_0x45dded(0x226)]=validateAccess(devices[_0x496079][_0x45dded(0x226)][_0x45dded(0x379)],_0x496079),logger[_0x45dded(0x2ec)]('Setting\x20access:\x20'+devices[_0x496079][_0x45dded(0x226)][_0x45dded(0x1c3)]+_0x45dded(0x265)+_0x1ac7e6['id'][_0x45dded(0x2c6)](-0x8)+_0x45dded(0x2b3)+_0x496079['slice'](-0x8)),_0x226d33[_0x45dded(0x2d1)](_0x496079);if(devices[_0x496079][_0x45dded(0x226)][_0x45dded(0x248)]){_0x226d33[_0x45dded(0x2d1)](_0x43734c);if(_0x43734c=='botmanager')initializeSocketBotManager(_0x226d33);else initializeSocketBot(_0x226d33);initClient(_0x43734c);}devices[_0x496079][_0x45dded(0x226)][_0x45dded(0x379)]&&devices[_0x496079]['access'][_0x45dded(0x1c3)]==_0x45dded(0x2fd)&&setSessionTimeout(_0x45dded(0x283),_0x496079),devices[_0x496079]['access'][_0x45dded(0x379)]&&devices[_0x496079]['access'][_0x45dded(0x1c3)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout('login',_0x496079),_0x226d33[_0x45dded(0x2e7)](_0x45dded(0x2e0),{'status':_0x1ac7e6[_0x45dded(0x2f5)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x496079][_0x45dded(0x226)],'externalip':devices[_0x496079]['ip'],'publicKey':secure['publicKey'],'userid':settings[_0x45dded(0x244)],'validInstallation':validInstallation}),devices[_0x496079][_0x45dded(0x226)]['allow']==![]&&devices[_0x496079][_0x45dded(0x226)]['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x496079,devices[_0x496079]['ip']);}function setSessionTimeout(_0xe6645e,_0x399528){const _0x5409b7=_0x51d6d2;let _0x57c8a5;if(_0xe6645e==_0x5409b7(0x1c0))_0x57c8a5=loginExpiry*0x3c*0x3e8;else _0x57c8a5=devices[_0x399528][_0x5409b7(0x225)][_0x5409b7(0x24c)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x399528][_0x5409b7(0x225)]['timestamp']);if(devices[_0x399528][_0x5409b7(0x252)])clearTimeout(devices[_0x399528][_0x5409b7(0x252)]);devices[_0x399528]['pidExpireLogin']=setTimeout(()=>{const _0x250841=_0x5409b7;if(devices[_0x399528][_0x250841(0x21f)])clearTimeout(devices[_0x399528][_0x250841(0x21f)]);removeSocketListeners(_0x399528),addBlacklist(_0x399528),devices[_0x399528][_0x250841(0x225)]=null,devices[_0x399528]['telegram2FaApproval']=null,devices[_0x399528][_0x250841(0x226)][_0x250841(0x379)]=null,logger[_0x250841(0x2ec)](_0x250841(0x2c8)+_0x399528[_0x250841(0x2c6)](-0x8)),devices[_0x399528][_0x250841(0x226)]=validateAccess(devices[_0x399528][_0x250841(0x226)][_0x250841(0x379)],_0x399528),!(devices[_0x399528][_0x250841(0x226)][_0x250841(0x248)]&&devices[_0x399528][_0x250841(0x226)][_0x250841(0x1c3)]=='login\x20not\x20required')&&(_0xe6645e==_0x250841(0x1c0)?io['to'](_0x399528)['emit'](_0x250841(0x2e0),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x399528)['emit'](_0x250841(0x2e0),{'access':{'allow':![],'reason':_0x250841(0x277),'token':null}})),devices[_0x399528][_0x250841(0x226)][_0x250841(0x379)]=null;},_0x57c8a5);}function setTokenRefresh(_0x1318c3){const _0x41d6c8=_0x51d6d2;if(devices[_0x1318c3]['pidRefreshToken'])clearTimeout(devices[_0x1318c3][_0x41d6c8(0x21f)]);devices[_0x1318c3][_0x41d6c8(0x21f)]=setTimeout(()=>{const _0x281107=_0x41d6c8;getClientsWithUuid(_0x1318c3)[_0x281107(0x329)]!=0x0?(devices[_0x1318c3][_0x281107(0x226)]=refreshToken(_0x1318c3),io['to'](_0x1318c3)['emit'](_0x281107(0x2e0),{'status':_0x281107(0x222),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1318c3][_0x281107(0x226)],'externalip':devices[_0x1318c3]['ip'],'publicKey':secure[_0x281107(0x1a0)],'validInstallation':validInstallation}),setTokenRefresh(_0x1318c3)):clearTimeout(devices[_0x1318c3][_0x281107(0x21f)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x59db55){const _0x16a70c=_0x51d6d2,_0x3d2213=getClient(_0x59db55['id'])[_0x16a70c(0x328)];_0x59db55[_0x16a70c(0x2e7)]('bots',config),_0x59db55[_0x16a70c(0x2e7)](_0x16a70c(0x27a),cleanSettings()),_0x59db55['on'](_0x16a70c(0x207),_0x436cbd=>{const _0x2d92f5=_0x16a70c;if(validateAccess(_0x436cbd,_0x3d2213)[_0x2d92f5(0x248)])addBot();else logger[_0x2d92f5(0x249)](_0x2d92f5(0x2a0));}),_0x59db55['on']('update-bot',(_0x36e5fb,_0x421a83)=>{const _0x12f7b6=_0x16a70c;if(validateAccess(_0x421a83,_0x3d2213)[_0x12f7b6(0x248)])toggleBot(_0x36e5fb[_0x12f7b6(0x1cd)],_0x36e5fb[_0x12f7b6(0x2e0)],_0x36e5fb[_0x12f7b6(0x25f)]);else logger[_0x12f7b6(0x249)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x59db55['on'](_0x16a70c(0x36c),(_0x1bc9fc,_0x300cae)=>{const _0x5b10c=_0x16a70c;if(validateAccess(_0x300cae,_0x3d2213)[_0x5b10c(0x248)])toggleBotMode(_0x1bc9fc);else logger[_0x5b10c(0x249)](_0x5b10c(0x358));}),_0x59db55['on'](_0x16a70c(0x2c1),(_0x444654,_0x48376e)=>{const _0x17802a=_0x16a70c;if(validateAccess(_0x48376e,_0x3d2213)[_0x17802a(0x248)])deleteBot(_0x444654);else logger[_0x17802a(0x249)](_0x17802a(0x236));}),_0x59db55['on'](_0x16a70c(0x24d),(_0x5b5ac3,_0x37d3ea)=>{const _0x218c2d=_0x16a70c;if(validateAccess(_0x37d3ea,_0x3d2213)[_0x218c2d(0x248)])storeSettings(_0x5b5ac3,!![]);else logger['full'](_0x218c2d(0x24a));}),_0x59db55['on'](_0x16a70c(0x1b7),_0x4b3ce7=>{const _0x21c5d4=_0x16a70c;if(validateAccess(_0x4b3ce7,_0x3d2213)[_0x21c5d4(0x248)])updateBB(_0x21c5d4(0x37d));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x59db55['on'](_0x16a70c(0x216),_0x294a52=>{const _0x168fe3=_0x16a70c;if(validateAccess(_0x294a52,_0x3d2213)[_0x168fe3(0x248)])updateBB('reinstall');else logger[_0x168fe3(0x249)](_0x168fe3(0x304));}),_0x59db55['on'](_0x16a70c(0x1ab),_0x5f4536=>{const _0x87028e=_0x16a70c;if(validateAccess(_0x5f4536,_0x3d2213)[_0x87028e(0x248)]){const _0x27f7c7=getClient(_0x59db55['id']);if(_0x27f7c7)getBackupFiles(_0x27f7c7[_0x87028e(0x328)]);else logger[_0x87028e(0x249)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x87028e(0x249)](_0x87028e(0x382));}),_0x59db55['on'](_0x16a70c(0x2ad),(_0x42034c,_0x35ebe9)=>{const _0x4b9843=_0x16a70c;if(validateAccess(_0x35ebe9,_0x3d2213)[_0x4b9843(0x248)])restoreBackupFile(_0x42034c);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x59db55['on'](_0x16a70c(0x2a6),_0x5a1317=>{const _0x29f0b0=_0x16a70c;if(validateAccess(_0x5a1317,_0x3d2213)[_0x29f0b0(0x248)])getMessages();else logger[_0x29f0b0(0x249)](_0x29f0b0(0x20d));}),_0x59db55['on'](_0x16a70c(0x229),(_0x393eac,_0x1fe9b8)=>{const _0x504eb2=_0x16a70c;if(validateAccess(_0x1fe9b8,_0x3d2213)[_0x504eb2(0x248)])confirmMessage(_0x393eac);else logger[_0x504eb2(0x249)](_0x504eb2(0x1ef));}),_0x59db55['on'](_0x16a70c(0x22d),_0x35b224=>{const _0xaa187a=_0x16a70c;if(validateAccess(_0x35b224,_0x3d2213)['allow']){if(devices[_0x3d2213][_0xaa187a(0x21f)])clearTimeout(devices[_0x3d2213][_0xaa187a(0x21f)]);if(devices[_0x3d2213][_0xaa187a(0x252)])clearTimeout(devices[_0x3d2213][_0xaa187a(0x252)]);removeSocketListeners(getClient(_0x59db55['id'])[_0xaa187a(0x328)]),addBlacklist(_0x3d2213),devices[_0x3d2213]['telegramIpApproval']=null,devices[_0x3d2213][_0xaa187a(0x2d8)]=null,devices[_0x3d2213][_0xaa187a(0x226)][_0xaa187a(0x379)]=null,logger[_0xaa187a(0x2ec)]('Logged\x20out\x20user\x20...'+_0x3d2213[_0xaa187a(0x2c6)](-0x8)),io['to'](getClient(_0x59db55['id'])['uuid'])[_0xaa187a(0x2e7)](_0xaa187a(0x2e0),{'access':{'allow':![],'reason':_0xaa187a(0x302),'token':null}});}else logger['full'](_0xaa187a(0x2fc));});}function initializeSocketBot(_0x202424){const _0x4e681f=_0x51d6d2,_0x5b84ad=getClient(_0x202424['id'])[_0x4e681f(0x1ac)],_0x1d35d6=getClient(_0x202424['id'])['uuid'];_0x202424['on'](_0x4e681f(0x1f9),(_0x360a64,_0x40b49a)=>{const _0x315a95=_0x4e681f;if(validateAccess(_0x40b49a,_0x1d35d6)['allow']){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x315a95(0x2db)]({'function':_0x315a95(0x200),'args':_0x360a64});}else logger['full'](_0x315a95(0x1a6));}),_0x202424['on'](_0x4e681f(0x27d),(_0x20e008,_0x4a9ac6)=>{const _0x2f6d9d=_0x4e681f;if(validateAccess(_0x4a9ac6,_0x1d35d6)['allow']){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x2f6d9d(0x2db)]({'function':'deleteHistoryAlerts','args':_0x20e008});}else logger['full'](_0x2f6d9d(0x1a2));}),_0x202424['on'](_0x4e681f(0x365),(_0x4071bc,_0x14c086)=>{const _0x35e7c7=_0x4e681f;if(validateAccess(_0x14c086,_0x1d35d6)[_0x35e7c7(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x35e7c7(0x2db)]({'function':_0x35e7c7(0x33d),'args':_0x4071bc});}else logger[_0x35e7c7(0x249)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x202424['on']('store-configuration',(_0x22f114,_0x2066c8)=>{const _0xd0c19c=_0x4e681f;if(validateAccess(_0x2066c8,_0x1d35d6)[_0xd0c19c(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad]['send']({'function':'storeConfiguration','args':_0x22f114});}else logger[_0xd0c19c(0x249)](_0xd0c19c(0x34c));}),_0x202424['on'](_0x4e681f(0x1c1),(_0x56a070,_0x31a5a7)=>{const _0x5d5e52=_0x4e681f;if(validateAccess(_0x31a5a7,_0x1d35d6)[_0x5d5e52(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x5d5e52(0x2db)]({'function':'storeHeadless','args':_0x56a070});}else logger[_0x5d5e52(0x249)](_0x5d5e52(0x26c));}),_0x202424['on'](_0x4e681f(0x2c3),(_0x4417e8,_0x27a308)=>{const _0x3876fe=_0x4e681f;if(validateAccess(_0x27a308,_0x1d35d6)[_0x3876fe(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x3876fe(0x2db)]({'function':_0x3876fe(0x2ef),'args':_0x4417e8});}else logger[_0x3876fe(0x249)](_0x3876fe(0x1e4));}),_0x202424['on'](_0x4e681f(0x241),_0x12d0a6=>{const _0x1d73a3=_0x4e681f;if(validateAccess(_0x12d0a6,_0x1d35d6)[_0x1d73a3(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x1d73a3(0x2db)]({'function':_0x1d73a3(0x1b0),'args':null});}else logger[_0x1d73a3(0x249)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x202424['on'](_0x4e681f(0x35f),_0x304474=>{const _0x40cc9f=_0x4e681f;if(validateAccess(_0x304474,_0x1d35d6)[_0x40cc9f(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x40cc9f(0x2db)]({'function':_0x40cc9f(0x23a),'args':null});}else logger['full'](_0x40cc9f(0x2d2));}),_0x202424['on']('place-order',(_0x4172fb,_0x562822)=>{const _0x2b884a=_0x4e681f;if(validateAccess(_0x562822,_0x1d35d6)[_0x2b884a(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x2b884a(0x2db)]({'function':_0x2b884a(0x2f4),'args':_0x4172fb});}else logger[_0x2b884a(0x249)](_0x2b884a(0x28a));}),_0x202424['on'](_0x4e681f(0x266),_0x5c2012=>{const _0x5a39c1=_0x4e681f;if(validateAccess(_0x5c2012,_0x1d35d6)[_0x5a39c1(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad]['send']({'function':_0x5a39c1(0x2d3),'args':null});}else logger[_0x5a39c1(0x249)](_0x5a39c1(0x327));}),_0x202424['on'](_0x4e681f(0x36f),_0x2f49af=>{const _0x161c48=_0x4e681f;if(validateAccess(_0x2f49af,_0x1d35d6)[_0x161c48(0x248)]){if(pid[_0x5b84ad])pid[_0x5b84ad][_0x161c48(0x2db)]({'function':_0x161c48(0x1b6),'args':null});}else logger[_0x161c48(0x249)](_0x161c48(0x35d));}),_0x202424['on'](_0x4e681f(0x1b7),_0x32337e=>{const _0x5a98d2=_0x4e681f;if(validateAccess(_0x32337e,_0x1d35d6)[_0x5a98d2(0x248)])updateBB(_0x5a98d2(0x37d));else logger[_0x5a98d2(0x249)](_0x5a98d2(0x218));}),_0x202424['on'](_0x4e681f(0x2a6),_0x3b7a92=>{const _0x2a21c2=_0x4e681f;if(validateAccess(_0x3b7a92,_0x1d35d6)[_0x2a21c2(0x248)])getMessages();else logger[_0x2a21c2(0x249)]('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x202424['on'](_0x4e681f(0x229),(_0x4cc628,_0x4ab13d)=>{const _0x177ee0=_0x4e681f;if(validateAccess(_0x4ab13d,_0x1d35d6)[_0x177ee0(0x248)])confirmMessage(_0x4cc628);else logger[_0x177ee0(0x249)](_0x177ee0(0x1ef));}),_0x202424['on'](_0x4e681f(0x22d),_0x4c7597=>{const _0x5c4257=_0x4e681f;if(validateAccess(_0x4c7597,_0x1d35d6)[_0x5c4257(0x248)]){if(devices[_0x1d35d6][_0x5c4257(0x21f)])clearTimeout(devices[_0x1d35d6][_0x5c4257(0x21f)]);if(devices[_0x1d35d6][_0x5c4257(0x252)])clearTimeout(devices[_0x1d35d6]['pidExpireLogin']);removeSocketListeners(getClient(_0x202424['id'])[_0x5c4257(0x328)]),addBlacklist(_0x1d35d6),devices[_0x1d35d6]['telegramIpApproval']=null,devices[_0x1d35d6]['telegram2FaApproval']=null,devices[_0x1d35d6]['access'][_0x5c4257(0x379)]=null,logger[_0x5c4257(0x2ec)]('Logged\x20out\x20user\x20...'+_0x1d35d6['slice'](-0x8)),io['to'](getClient(_0x202424['id'])[_0x5c4257(0x328)])['emit'](_0x5c4257(0x2e0),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x5c4257(0x249)](_0x5c4257(0x2fc));});}function removeSocketListeners(_0x538bea){const _0x424599=_0x51d6d2;getClientsWithUuid(_0x538bea)[_0x424599(0x35b)](_0x2b0657=>{const _0x7b74fc=_0x424599;getSocket(_0x2b0657['id'])[_0x7b74fc(0x31f)]();});}function cleanSettings(){const _0x908afe=_0x51d6d2;let _0xee6183=settings;return settings[_0x908afe(0x370)]&&settings[_0x908afe(0x370)]!=''&&(_0xee6183={..._0xee6183,'telegramToken':_0x908afe(0x25c)}),settings['bbPassword']&&settings[_0x908afe(0x34d)]!=''&&(_0xee6183={..._0xee6183,'bbPassword':_0x908afe(0x25c)}),(settings['bbPassword']&&settings[_0x908afe(0x34d)]==_0x908afe(0x355)||settings['telegramToken']&&settings[_0x908afe(0x370)]==_0x908afe(0x355))&&(_0xee6183={..._0xee6183,'restored':{'password':settings['bbPassword']=='***','telegram':settings[_0x908afe(0x370)]=='***'}}),_0xee6183;}async function updateBB(_0x530195){const _0x2fb3fc=_0x51d6d2;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x3f4e9f=>{const _0x542e54=_0x1401;restartBot(_0x3f4e9f[_0x542e54(0x1cd)]);});if(_0x530195==_0x2fb3fc(0x37d))process[_0x2fb3fc(0x2db)]({'update':!![],'environment':environment},_0xec1bd0=>{});else _0x530195=='reinstall'&&process[_0x2fb3fc(0x2db)]({'reinstall':!![],'environment':environment},_0x52b4c6=>{});}function startBot(_0x20a598,_0x38e4c4,_0x3ffbe2){const _0x1b195e=_0x51d6d2;if(debugging)_0x20a598[_0x1b195e(0x27c)]('-d');let _0x452737=![];const _0x12f4b0=_0x20a598[0x0];_0x38e4c4={..._0x38e4c4,'stdio':[_0x1b195e(0x1c9),_0x1b195e(0x1c9),_0x1b195e(0x1c9),_0x1b195e(0x2c0)]},pid[_0x12f4b0]=childProcess[_0x1b195e(0x28c)](botfile,_0x20a598,_0x38e4c4),pid[_0x12f4b0]['on']('message',_0xe8fd9b=>{const _0x402173=_0x1b195e;switch(Object[_0x402173(0x255)](_0xe8fd9b)[0x0]){case'botname':updateBotName(_0x12f4b0,_0xe8fd9b['botname']);break;case _0x402173(0x2fb):updateBotManager();break;case _0x402173(0x2e0):updateStatus(_0x12f4b0,_0xe8fd9b['status']);break;case _0x402173(0x25f):updateLive(_0x12f4b0,_0xe8fd9b[_0x402173(0x25f)]);break;case _0x402173(0x250):updateLive(_0x12f4b0,_0xe8fd9b[_0x402173(0x250)]),io['to'](_0x12f4b0)[_0x402173(0x2e7)]('status',{'access':{'allow':![],'reason':_0x402173(0x1af),'token':null}});break;case _0x402173(0x297):_0xe8fd9b[_0x402173(0x297)]=='restart'&&restartBot(_0x12f4b0);_0xe8fd9b['stop']==_0x402173(0x35a)&&toggleBot(_0x12f4b0,'disabled',_0x402173(0x1d7));break;case'telegram':sendTelegram(_0x12f4b0,_0xe8fd9b[_0x402173(0x347)]);break;case _0x402173(0x242):sendTelegramMsg(_0xe8fd9b[_0x402173(0x242)]);break;case'function':io['to'](_0x12f4b0)[_0x402173(0x2e7)](_0xe8fd9b[_0x402173(0x1c7)],_0xe8fd9b['args']);break;}}),pid[_0x12f4b0]['on']('error',function(_0x2877ad){if(_0x452737)return;_0x452737=!![],_0x3ffbe2(_0x2877ad);}),pid[_0x12f4b0]['on'](_0x1b195e(0x37e),async function(_0x1d79e6){const _0x50cebf=_0x1b195e;if(installingUpdate)return;if(_0x452737)return;_0x452737=!![],_0x3ffbe2(null);const _0x31f740=dbConfig[_0x50cebf(0x32a)](_0x50cebf(0x1ea))[_0x50cebf(0x224)]({'botID':_0x12f4b0})[_0x50cebf(0x360)]();_0x31f740&&(_0x31f740[_0x50cebf(0x2e0)]==_0x50cebf(0x2d7)||_0x31f740[_0x50cebf(0x2e0)]==_0x50cebf(0x1ca))&&(await sleep(0x3e8),updateLive(_0x12f4b0,'stopped'),logger[_0x50cebf(0x249)](_0x50cebf(0x335)+_0x12f4b0),startBot([_0x12f4b0,userID],{'cwd':bbpath},function(_0x2cb646){if(_0x2cb646)logger['full'](_0x2cb646);}));});}function stopBot(_0x22ada6){const _0x3f4793=_0x51d6d2;getClientsWithBotID(_0x22ada6)[_0x3f4793(0x35b)](_0x52fdea=>{const _0x7ddacf=_0x3f4793;getSocket(_0x52fdea['id'])[_0x7ddacf(0x2a3)](!![]),removeClient(_0x52fdea['id']);}),pid[_0x22ada6]&&(pid[_0x22ada6]['kill'](),pid[_0x22ada6]=null);}function restartBot(_0x5e01fe){if(pid[_0x5e01fe])pid[_0x5e01fe]['kill']();}function addBot(){const _0x43411d=_0x51d6d2;let _0x57766e;for(let _0x25bf3b=0x1;_0x25bf3b<0x3e9;_0x25bf3b++){_0x57766e=_0x25bf3b[_0x43411d(0x2ca)]()[_0x43411d(0x27e)](0x3,'0');let _0x745fd0=config[_0x43411d(0x224)](_0x26f10f=>_0x26f10f['botID']==_0x57766e);if(!_0x745fd0)break;}if(_0x57766e===_0x43411d(0x235)){logger[_0x43411d(0x249)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x43411d(0x249)]('Starting\x20new\x20bot\x20|\x20Bot\x20'+_0x57766e),dbConfig[_0x43411d(0x32a)](_0x43411d(0x1ea))[_0x43411d(0x27c)]({'botID':_0x57766e,'botname':'Bot\x20'+_0x57766e,'status':'new','live':''})[_0x43411d(0x339)](),startBot([_0x57766e,userID],{'cwd':bbpath},function(_0x116d5b){const _0x265e54=_0x43411d;if(_0x116d5b)logger[_0x265e54(0x249)](_0x116d5b);}),config=getConfiguration(),io['to'](_0x43411d(0x2a8))[_0x43411d(0x2e7)](_0x43411d(0x1ea),config),broadcastToBots(_0x43411d(0x1ea),JSON[_0x43411d(0x269)](config));}function deleteBot(_0x2b0195){const _0x455ea9=_0x51d6d2;getClientsWithBotID(_0x2b0195)[_0x455ea9(0x35b)](_0x187ca0=>{const _0x3c4ff3=_0x455ea9;getSocket(_0x187ca0['id'])[_0x3c4ff3(0x2a3)](!![]),removeClient(_0x187ca0['id']);}),dbConfig['get'](_0x455ea9(0x1ea))[_0x455ea9(0x1ce)]({'botID':_0x2b0195})[_0x455ea9(0x339)](),logger[_0x455ea9(0x249)](_0x455ea9(0x1bd)+_0x2b0195),stopBot(_0x2b0195);try{if(fs['existsSync'](path[_0x455ea9(0x2d1)](configpath,_0x455ea9(0x219)+_0x2b0195+_0x455ea9(0x1a3))))fs[_0x455ea9(0x1dd)](path[_0x455ea9(0x2d1)](configpath,'bot-'+_0x2b0195+'-config.json'));if(fs[_0x455ea9(0x1e0)](path[_0x455ea9(0x2d1)](configpath,_0x455ea9(0x219)+_0x2b0195+'-events.json')))fs['unlinkSync'](path[_0x455ea9(0x2d1)](configpath,_0x455ea9(0x219)+_0x2b0195+_0x455ea9(0x300)));if(fs[_0x455ea9(0x1e0)](path['join'](configpath,'bot-'+_0x2b0195+_0x455ea9(0x2b5))))fs[_0x455ea9(0x1dd)](path['join'](configpath,_0x455ea9(0x219)+_0x2b0195+_0x455ea9(0x2b5)));if(fs[_0x455ea9(0x1e0)](path[_0x455ea9(0x2d1)](configpath,_0x455ea9(0x219)+_0x2b0195+'-results.json')))fs[_0x455ea9(0x1dd)](path[_0x455ea9(0x2d1)](configpath,_0x455ea9(0x219)+_0x2b0195+_0x455ea9(0x34e)));}catch(_0x28ad5a){if(_0x28ad5a)logger['full'](_0x455ea9(0x2b6),_0x28ad5a);}config=getConfiguration(),io['to'](_0x455ea9(0x2a8))[_0x455ea9(0x2e7)](_0x455ea9(0x1ea),config),broadcastToBots(_0x455ea9(0x1ea),JSON[_0x455ea9(0x269)](config));}function toggleBot(_0x5956a9,_0x491d25,_0x130fc4){const _0x480dd4=_0x51d6d2;dbConfig[_0x480dd4(0x32a)](_0x480dd4(0x1ea))['find']({'botID':_0x5956a9})[_0x480dd4(0x1cb)]({'status':_0x491d25})[_0x480dd4(0x1cb)]({'live':_0x130fc4})[_0x480dd4(0x339)]();if(_0x491d25=='enabled'||_0x491d25==_0x480dd4(0x1ca))logger['full'](_0x480dd4(0x204)+_0x5956a9),startBot([_0x5956a9,userID],{'cwd':bbpath},function(_0x38db9a){const _0x4e808=_0x480dd4;if(_0x38db9a)logger[_0x4e808(0x249)](_0x38db9a);});else(_0x491d25==_0x480dd4(0x363)||_0x491d25==_0x480dd4(0x351))&&(logger[_0x480dd4(0x249)](_0x480dd4(0x29c)+_0x5956a9),stopBot(_0x5956a9));config=getConfiguration(),io['to'](_0x480dd4(0x2a8))[_0x480dd4(0x2e7)]('bots',config),broadcastToBots(_0x480dd4(0x1ea),JSON[_0x480dd4(0x269)](config));}function toggleStatus(_0xedad34){const _0x13df7d=_0x51d6d2;let _0x4d644c=dbConfig[_0x13df7d(0x32a)](_0x13df7d(0x1ea))[_0x13df7d(0x224)]({'botID':_0xedad34})['value'](),_0x4789e1;if(_0x4d644c[_0x13df7d(0x2e0)]===_0x13df7d(0x2d7))_0x4789e1=_0x13df7d(0x363);else{if(_0x4d644c['status']===_0x13df7d(0x1ca))_0x4789e1=_0x13df7d(0x351);else{if(_0x4d644c[_0x13df7d(0x2e0)]==='new-disabled')_0x4789e1='new';else{if(_0x4d644c[_0x13df7d(0x2e0)]===_0x13df7d(0x363))_0x4789e1=_0x13df7d(0x2d7);}}}return _0x4789e1;}function updateStatus(_0x20e871,_0x50b9e2){const _0x2f2e92=_0x51d6d2;dbConfig[_0x2f2e92(0x32a)](_0x2f2e92(0x1ea))[_0x2f2e92(0x224)]({'botID':_0x20e871})[_0x2f2e92(0x1cb)]({'status':_0x50b9e2})[_0x2f2e92(0x339)](),config=getConfiguration(),io['to'](_0x2f2e92(0x2a8))[_0x2f2e92(0x2e7)](_0x2f2e92(0x1ea),config),broadcastToBots(_0x2f2e92(0x1ea),JSON[_0x2f2e92(0x269)](config));}function updateLive(_0x37da2b,_0x4b82a0){const _0x1fe672=_0x51d6d2;dbConfig[_0x1fe672(0x32a)](_0x1fe672(0x1ea))[_0x1fe672(0x224)]({'botID':_0x37da2b})[_0x1fe672(0x1cb)]({'live':_0x4b82a0})[_0x1fe672(0x339)](),config=getConfiguration(),io['to'](_0x1fe672(0x2a8))[_0x1fe672(0x2e7)](_0x1fe672(0x1ea),config),broadcastToBots(_0x1fe672(0x1ea),JSON[_0x1fe672(0x269)](config));}function updateBotName(_0x5395bb,_0x2dc930){const _0xcd2815=_0x51d6d2;dbConfig[_0xcd2815(0x32a)](_0xcd2815(0x1ea))[_0xcd2815(0x224)]({'botID':_0x5395bb})['assign']({'botname':_0x2dc930})[_0xcd2815(0x339)](),config=getConfiguration(),io['to'](_0xcd2815(0x2a8))['emit'](_0xcd2815(0x1ea),config),broadcastToBots(_0xcd2815(0x1ea),JSON['stringify'](config));}function updateBotManager(){const _0x4026c2=_0x51d6d2;config=getConfiguration(),io['to'](_0x4026c2(0x2a8))[_0x4026c2(0x2e7)](_0x4026c2(0x1ea),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBotMode(_0x1e3649){const _0x5bf4f1=_0x51d6d2;if(pid[_0x1e3649])pid[_0x1e3649][_0x5bf4f1(0x2db)]({'function':_0x5bf4f1(0x26a),'args':null});else{const _0x419da2=configpath+_0x5bf4f1(0x219)+_0x1e3649+_0x5bf4f1(0x1a3),_0x4926b8=fs[_0x5bf4f1(0x1fa)](_0x419da2),_0x313ae9=JSON[_0x5bf4f1(0x1e7)](_0x4926b8),_0x163e9f=_0x313ae9['bot'][0x0][_0x5bf4f1(0x2cf)];_0x313ae9[_0x5bf4f1(0x1ac)][0x0][_0x5bf4f1(0x2cf)]=!_0x163e9f;const _0x6e523f=JSON[_0x5bf4f1(0x269)](_0x313ae9,null,0x2);fs[_0x5bf4f1(0x2af)](_0x419da2,_0x6e523f),config=getConfiguration(),io['to']('botmanager')[_0x5bf4f1(0x2e7)]('bots',config),broadcastToBots('bots',JSON[_0x5bf4f1(0x269)](config));}}function telegramError(_0x1d0308){const _0x43469e=_0x51d6d2;logger[_0x43469e(0x2fa)](getTimeStamp()+_0x43469e(0x25a));}function validateTelegram(_0x58610c){const _0x4c7516=_0x51d6d2;if(_0x58610c['from'][_0x4c7516(0x1b4)]!=settings['telegramUsername']&&'@'+_0x58610c[_0x4c7516(0x2dc)][_0x4c7516(0x1b4)]!=settings['telegramUsername'])return tgBot['sendMessage'](_0x58610c['chat']['id'],_0x4c7516(0x2a7),{'parse_mode':_0x4c7516(0x27b)})[_0x4c7516(0x1be)](_0x281de2=>{telegramError(_0x281de2);}),![];return!![];}async function initTelegram(){const _0x1d1ac9=_0x51d6d2;if(tgBot)tgBot[_0x1d1ac9(0x325)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1d1ac9(0x370)],{'polling':!![]});let _0x5371b9='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x5371b9+='\x0a',_0x5371b9+=_0x1d1ac9(0x1a4),_0x5371b9+=_0x1d1ac9(0x2ed),_0x5371b9+=_0x1d1ac9(0x1a8),_0x5371b9+=_0x1d1ac9(0x29e),_0x5371b9+=_0x1d1ac9(0x2ce),_0x5371b9+=_0x1d1ac9(0x2f6),_0x5371b9+=_0x1d1ac9(0x23e),_0x5371b9+=_0x1d1ac9(0x2a1),_0x5371b9+=_0x1d1ac9(0x32d),_0x5371b9+=_0x1d1ac9(0x2e3),_0x5371b9+=_0x1d1ac9(0x1f1),_0x5371b9+=_0x1d1ac9(0x367),_0x5371b9+='/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a',_0x5371b9+=_0x1d1ac9(0x2ac);let _0x7bce85=_0x1d1ac9(0x344);_0x7bce85+='\x0a',_0x7bce85+=_0x5371b9,tgBot['onText'](/\/start/,_0x4060f3=>{const _0x2f9d7a=_0x1d1ac9;if(!validateTelegram(_0x4060f3))return;if(settings[_0x2f9d7a(0x319)]!=_0x4060f3[_0x2f9d7a(0x306)]['id'])updateSetting(_0x2f9d7a(0x319),_0x4060f3['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2f9d7a(0x2c9)](_0x4060f3['chat']['id'],_0x7bce85)['catch'](_0x4bb2f0=>{telegramError(_0x4bb2f0);});}),tgBot[_0x1d1ac9(0x2f9)](/\/enable/,_0x4370fa=>{const _0x3f0efc=_0x1d1ac9;if(!validateTelegram(_0x4370fa))return;if(settings[_0x3f0efc(0x319)]!=_0x4370fa[_0x3f0efc(0x306)]['id'])updateSetting(_0x3f0efc(0x319),_0x4370fa['chat']['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x3f0efc(0x2c9)](_0x4370fa[_0x3f0efc(0x306)]['id'],'Notifications\x20enabled')['catch'](_0x2df521=>{telegramError(_0x2df521);});}),tgBot[_0x1d1ac9(0x2f9)](/\/config/,async _0x3c3185=>{const _0x4e0fc7=_0x1d1ac9;if(!validateTelegram(_0x3c3185))return;tgBot['removeListener'](_0x4e0fc7(0x22a)),tgBot[_0x4e0fc7(0x2c9)](_0x3c3185['chat']['id'],'Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?',{'reply_markup':{'inline_keyboard':[[{'text':_0x4e0fc7(0x231),'callback_data':_0x4e0fc7(0x278)},{'text':_0x4e0fc7(0x1fc),'callback_data':_0x4e0fc7(0x286)},{'text':_0x4e0fc7(0x1dc),'callback_data':'all'}]]}})[_0x4e0fc7(0x1be)](_0x2564b5=>{telegramError(_0x2564b5);}),tgBot['on'](_0x4e0fc7(0x22a),async _0x129fce=>{const _0x317bc5=_0x4e0fc7,_0x22c49a=_0x129fce[_0x317bc5(0x352)],_0xd83f44=_0x129fce[_0x317bc5(0x1c6)];tgBot[_0x317bc5(0x2e8)](_0x129fce['id'])[_0x317bc5(0x348)](async()=>{const _0x436d39=_0x317bc5;_0x22c49a==_0x436d39(0x278)&&(updateSetting(_0x436d39(0x2b2),'orders'),updateSetting(_0x436d39(0x20c),!![]),await tgBot[_0x436d39(0x2c9)](_0xd83f44[_0x436d39(0x306)]['id'],_0x436d39(0x37b))['catch'](_0x55a728=>{telegramError(_0x55a728);}));_0x22c49a==_0x436d39(0x286)&&(updateSetting(_0x436d39(0x2b2),_0x436d39(0x286)),updateSetting(_0x436d39(0x20c),!![]),await tgBot[_0x436d39(0x2c9)](_0xd83f44[_0x436d39(0x306)]['id'],_0x436d39(0x1e8))['catch'](_0x59ce74=>{telegramError(_0x59ce74);}));_0x22c49a==_0x436d39(0x2cc)&&(updateSetting(_0x436d39(0x2b2),_0x436d39(0x2cc)),updateSetting(_0x436d39(0x20c),!![]),await tgBot['sendMessage'](_0xd83f44[_0x436d39(0x306)]['id'],_0x436d39(0x233))[_0x436d39(0x1be)](_0x1c693e=>{telegramError(_0x1c693e);}));if(!settings[_0x436d39(0x319)])tgBot[_0x436d39(0x2c9)](_0xd83f44[_0x436d39(0x306)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x436d39(0x1be)](_0x2ce93a=>{telegramError(_0x2ce93a);});}),tgBot['removeListener'](_0x317bc5(0x22a));});}),tgBot['onText'](/\/status/,_0x382301=>{const _0x29547a=_0x1d1ac9;if(!validateTelegram(_0x382301))return;const _0x1564d1=getBotsWithMode();let _0xd59e56=_0x29547a(0x2b9);config[_0x29547a(0x35b)](_0x3fb157=>{const _0x388eaf=_0x29547a,_0x31ddb5=_0x1564d1[_0x388eaf(0x224)](_0x5c000d=>_0x5c000d[_0x388eaf(0x1cd)]==_0x3fb157['botID'])[_0x388eaf(0x1d8)];_0xd59e56+=_0x388eaf(0x258)+_0x3fb157[_0x388eaf(0x1cd)]+':\x20'+_0x3fb157['status']+_0x388eaf(0x31a)+_0x31ddb5+_0x388eaf(0x31a)+_0x3fb157[_0x388eaf(0x25f)]+'\x0a';}),_0xd59e56+='\x0a',_0xd59e56+=_0x29547a(0x251),_0xd59e56+=!settings[_0x29547a(0x20c)]?_0x29547a(0x354):'Notifications\x20enabled\x0a',_0xd59e56+=settings[_0x29547a(0x20c)]?settings['telegramEvents']==_0x29547a(0x2cc)?_0x29547a(0x279):_0x29547a(0x1cc)+settings[_0x29547a(0x2b2)]+'\x20only\x0a':'',tgBot[_0x29547a(0x2c9)](_0x382301[_0x29547a(0x306)]['id'],_0xd59e56,{'parse_mode':'HTML'})[_0x29547a(0x1be)](_0x2830cf=>{telegramError(_0x2830cf);});}),tgBot[_0x1d1ac9(0x2f9)](/\/restart/,_0x4db9cd=>{const _0x5c0c88=_0x1d1ac9;if(!validateTelegram(_0x4db9cd))return;tgBot[_0x5c0c88(0x20a)](_0x5c0c88(0x22a));const _0x568df7=getEnabledBots();if(_0x568df7['length']==0x0)tgBot[_0x5c0c88(0x2c9)](_0x4db9cd[_0x5c0c88(0x306)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x5c0c88(0x1be)](_0x8b3bae=>{telegramError(_0x8b3bae);});else{if(_0x568df7[_0x5c0c88(0x329)]>0x1)_0x568df7[_0x5c0c88(0x27c)]({'botID':_0x5c0c88(0x2cc)});let _0x598c2c=[],_0x5ca3c4=[];const _0x29860b=_0x568df7[_0x5c0c88(0x329)]%0x4==0x0||_0x568df7[_0x5c0c88(0x329)]%0x4==0x3||_0x568df7[_0x5c0c88(0x329)]%0x3==0x1?0x4:0x3;let _0x571cf5=0x0;_0x568df7[_0x5c0c88(0x35b)]((_0x5dac6d,_0x2afc5b)=>{const _0xbb3483=_0x5c0c88;if(_0x2afc5b%_0x29860b==0x0)_0x5ca3c4=[];_0x5ca3c4[_0xbb3483(0x27c)]({'text':_0x5dac6d[_0xbb3483(0x1cd)]=='all'?_0xbb3483(0x1de):'Bot\x20'+_0x5dac6d[_0xbb3483(0x1cd)],'callback_data':_0x5dac6d['botID']}),_0x2afc5b%_0x29860b==0x0&&(_0x598c2c[_0x571cf5]=_0x5ca3c4,_0x571cf5++);}),tgBot['sendMessage'](_0x4db9cd['chat']['id'],_0x5c0c88(0x1e1),{'reply_markup':{'inline_keyboard':_0x598c2c}})['catch'](_0x5e9a6d=>{telegramError(_0x5e9a6d);}),tgBot['on'](_0x5c0c88(0x22a),async _0x2447e5=>{const _0x46e52c=_0x5c0c88,_0x3c2a2c=_0x2447e5[_0x46e52c(0x352)],_0x4ac9ad=_0x2447e5[_0x46e52c(0x1c6)];tgBot[_0x46e52c(0x2e8)](_0x2447e5['id'])[_0x46e52c(0x348)](async()=>{const _0x141cc7=_0x46e52c;_0x3c2a2c==_0x141cc7(0x2cc)?config[_0x141cc7(0x35b)](_0x2e425a=>{restartBot(_0x2e425a['botID']);}):restartBot(_0x3c2a2c);}),tgBot[_0x46e52c(0x20a)](_0x46e52c(0x22a));});}}),tgBot[_0x1d1ac9(0x2f9)](/\/on/,_0x44140b=>{const _0x245b58=_0x1d1ac9;if(!validateTelegram(_0x44140b))return;tgBot[_0x245b58(0x20a)](_0x245b58(0x22a));const _0x2f028a=getDisabledBots();if(_0x2f028a[_0x245b58(0x329)]==0x0)tgBot[_0x245b58(0x2c9)](_0x44140b[_0x245b58(0x306)]['id'],_0x245b58(0x1f7))[_0x245b58(0x1be)](_0x4b735d=>{telegramError(_0x4b735d);});else{if(_0x2f028a[_0x245b58(0x329)]>0x1)_0x2f028a[_0x245b58(0x27c)]({'botID':_0x245b58(0x2cc)});let _0x2f8367=[],_0x1de5db=[];const _0x24a361=_0x2f028a['length']%0x4==0x0||_0x2f028a[_0x245b58(0x329)]%0x4==0x3||_0x2f028a[_0x245b58(0x329)]%0x3==0x1?0x4:0x3;let _0x27e047=0x0;_0x2f028a['forEach']((_0x3878cb,_0x18481e)=>{const _0x3726cb=_0x245b58;if(_0x18481e%_0x24a361==0x0)_0x1de5db=[];_0x1de5db[_0x3726cb(0x27c)]({'text':_0x3878cb[_0x3726cb(0x1cd)]==_0x3726cb(0x2cc)?_0x3726cb(0x1de):_0x3726cb(0x258)+_0x3878cb[_0x3726cb(0x1cd)],'callback_data':_0x3878cb[_0x3726cb(0x1cd)]}),_0x18481e%_0x24a361==0x0&&(_0x2f8367[_0x27e047]=_0x1de5db,_0x27e047++);}),tgBot[_0x245b58(0x2c9)](_0x44140b[_0x245b58(0x306)]['id'],_0x245b58(0x240),{'reply_markup':{'inline_keyboard':_0x2f8367}})[_0x245b58(0x1be)](_0x1266cf=>{telegramError(_0x1266cf);}),tgBot['on'](_0x245b58(0x22a),async _0x386910=>{const _0x49ce2d=_0x245b58,_0x372c61=_0x386910[_0x49ce2d(0x352)],_0x33cd23=_0x386910[_0x49ce2d(0x1c6)];tgBot[_0x49ce2d(0x2e8)](_0x386910['id'])[_0x49ce2d(0x348)](async()=>{const _0x47820d=_0x49ce2d;_0x372c61==_0x47820d(0x2cc)?(tgBot['sendMessage'](_0x33cd23[_0x47820d(0x306)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0x47820d(0x1be)](_0x51d1bd=>{telegramError(_0x51d1bd);}),_0x2f028a[_0x47820d(0x35b)](_0x2cbbed=>{const _0xbe3c98=_0x47820d;if(_0x2cbbed[_0xbe3c98(0x1cd)]!=_0xbe3c98(0x2cc))toggleBot(_0x2cbbed[_0xbe3c98(0x1cd)],toggleStatus(_0x2cbbed['botID']),_0xbe3c98(0x1d7));})):(tgBot[_0x47820d(0x2c9)](_0x33cd23[_0x47820d(0x306)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x372c61)[_0x47820d(0x1be)](_0x43a624=>{telegramError(_0x43a624);}),toggleBot(_0x372c61,toggleStatus(_0x372c61),_0x47820d(0x1d7)));}),tgBot[_0x49ce2d(0x20a)](_0x49ce2d(0x22a));});}}),tgBot['onText'](/\/off/,_0x5742d2=>{const _0x5870d6=_0x1d1ac9;if(!validateTelegram(_0x5742d2))return;tgBot['removeListener'](_0x5870d6(0x22a));const _0x2a9d99=getEnabledBots();if(_0x2a9d99[_0x5870d6(0x329)]==0x0)tgBot['sendMessage'](_0x5742d2[_0x5870d6(0x306)]['id'],_0x5870d6(0x2ae))['catch'](_0x11a466=>{telegramError(_0x11a466);});else{if(_0x2a9d99['length']>0x1)_0x2a9d99['push']({'botID':_0x5870d6(0x2cc)});let _0x21b1dd=[],_0x481f0b=[];const _0x11f88a=_0x2a9d99[_0x5870d6(0x329)]%0x4==0x0||_0x2a9d99[_0x5870d6(0x329)]%0x4==0x3||_0x2a9d99[_0x5870d6(0x329)]%0x3==0x1?0x4:0x3;let _0x2473e6=0x0;_0x2a9d99[_0x5870d6(0x35b)]((_0x235365,_0x156126)=>{const _0xe409e7=_0x5870d6;if(_0x156126%_0x11f88a==0x0)_0x481f0b=[];_0x481f0b[_0xe409e7(0x27c)]({'text':_0x235365['botID']=='all'?_0xe409e7(0x1de):_0xe409e7(0x258)+_0x235365[_0xe409e7(0x1cd)],'callback_data':_0x235365[_0xe409e7(0x1cd)]}),_0x156126%_0x11f88a==0x0&&(_0x21b1dd[_0x2473e6]=_0x481f0b,_0x2473e6++);}),tgBot[_0x5870d6(0x2c9)](_0x5742d2[_0x5870d6(0x306)]['id'],_0x5870d6(0x2f0),{'reply_markup':{'inline_keyboard':_0x21b1dd}})['catch'](_0x5af973=>{telegramError(_0x5af973);}),tgBot['on']('callback_query',async _0x1d6116=>{const _0x83994a=_0x5870d6,_0x255014=_0x1d6116[_0x83994a(0x352)],_0x3493fd=_0x1d6116['message'];tgBot[_0x83994a(0x2e8)](_0x1d6116['id'])[_0x83994a(0x348)](async()=>{const _0x3934cf=_0x83994a;_0x255014==_0x3934cf(0x2cc)?(tgBot[_0x3934cf(0x2c9)](_0x3493fd['chat']['id'],_0x3934cf(0x30b))[_0x3934cf(0x1be)](_0x51e4bc=>{telegramError(_0x51e4bc);}),_0x2a9d99[_0x3934cf(0x35b)](_0x1ac003=>{const _0x37eae7=_0x3934cf;if(_0x1ac003['botID']!=_0x37eae7(0x2cc))toggleBot(_0x1ac003['botID'],toggleStatus(_0x1ac003['botID']),_0x37eae7(0x1d7));})):(tgBot[_0x3934cf(0x2c9)](_0x3493fd['chat']['id'],_0x3934cf(0x34a)+_0x255014)['catch'](_0xce427e=>{telegramError(_0xce427e);}),toggleBot(_0x255014,toggleStatus(_0x255014),_0x3934cf(0x1d7)));}),tgBot['removeListener'](_0x83994a(0x22a));});}}),tgBot['onText'](/\/metrics/,_0x19a56a=>{const _0xa9f91e=_0x1d1ac9;if(!validateTelegram(_0x19a56a))return;tgBot[_0xa9f91e(0x20a)]('callback_query');const _0x402b3b=getEnabledBots();if(_0x402b3b[_0xa9f91e(0x329)]==0x0)tgBot[_0xa9f91e(0x2c9)](_0x19a56a['chat']['id'],_0xa9f91e(0x2ae))['catch'](_0x392975=>{telegramError(_0x392975);});else{if(_0x402b3b['length']>0x1){let _0x488d07=[],_0x180b59=[];const _0x4b232f=_0x402b3b[_0xa9f91e(0x329)]%0x4==0x0||_0x402b3b[_0xa9f91e(0x329)]%0x4==0x3||_0x402b3b['length']%0x3==0x1?0x4:0x3;let _0x3ebd01=0x0;_0x402b3b[_0xa9f91e(0x35b)]((_0x197f02,_0x8669c1)=>{const _0x2387ad=_0xa9f91e;if(_0x8669c1%_0x4b232f==0x0)_0x180b59=[];_0x180b59[_0x2387ad(0x27c)]({'text':_0x2387ad(0x258)+_0x197f02['botID'],'callback_data':_0x197f02[_0x2387ad(0x1cd)]}),_0x8669c1%_0x4b232f==0x0&&(_0x488d07[_0x3ebd01]=_0x180b59,_0x3ebd01++);}),tgBot[_0xa9f91e(0x2c9)](_0x19a56a['chat']['id'],'For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',{'reply_markup':{'inline_keyboard':_0x488d07}})['catch'](_0x10e4de=>{telegramError(_0x10e4de);}),tgBot['on'](_0xa9f91e(0x22a),async _0x266f8e=>{const _0x330516=_0xa9f91e,_0x5a4d53=_0x266f8e[_0x330516(0x352)],_0x445a52=_0x266f8e[_0x330516(0x1c6)];tgBot[_0x330516(0x2e8)](_0x266f8e['id'])[_0x330516(0x348)](async()=>{const _0x29776d=_0x330516;if(pid[_0x5a4d53])pid[_0x5a4d53][_0x29776d(0x2db)]({'function':_0x29776d(0x324),'args':null});}),tgBot[_0x330516(0x20a)](_0x330516(0x22a));});}else{const _0x1b2236=_0x402b3b[0x0][_0xa9f91e(0x1cd)];if(pid[_0x1b2236])pid[_0x1b2236]['send']({'function':_0xa9f91e(0x324),'args':null});}}}),tgBot['onText'](/\/portfolio/,_0x1beb8d=>{const _0x652ac9=_0x1d1ac9;if(!validateTelegram(_0x1beb8d))return;tgBot[_0x652ac9(0x20a)](_0x652ac9(0x22a));const _0x116779=getEnabledBots();if(_0x116779['length']==0x0)tgBot[_0x652ac9(0x2c9)](_0x1beb8d['chat']['id'],_0x652ac9(0x2ae))['catch'](_0x14ffb5=>{telegramError(_0x14ffb5);});else{if(_0x116779[_0x652ac9(0x329)]>0x1){let _0x2fa865=[],_0x1b2a34=[];const _0x361380=_0x116779[_0x652ac9(0x329)]%0x4==0x0||_0x116779[_0x652ac9(0x329)]%0x4==0x3||_0x116779[_0x652ac9(0x329)]%0x3==0x1?0x4:0x3;let _0x43607c=0x0;_0x116779[_0x652ac9(0x35b)]((_0x83c883,_0xb408e9)=>{const _0x6eab1e=_0x652ac9;if(_0xb408e9%_0x361380==0x0)_0x1b2a34=[];_0x1b2a34[_0x6eab1e(0x27c)]({'text':'Bot\x20'+_0x83c883[_0x6eab1e(0x1cd)],'callback_data':_0x83c883['botID']}),_0xb408e9%_0x361380==0x0&&(_0x2fa865[_0x43607c]=_0x1b2a34,_0x43607c++);}),tgBot[_0x652ac9(0x2c9)](_0x1beb8d[_0x652ac9(0x306)]['id'],_0x652ac9(0x299),{'reply_markup':{'inline_keyboard':_0x2fa865}})[_0x652ac9(0x1be)](_0x58cef8=>{telegramError(_0x58cef8);}),tgBot['on']('callback_query',async _0x46cda0=>{const _0x2e0237=_0x652ac9,_0x5482d4=_0x46cda0[_0x2e0237(0x352)],_0x3dff02=_0x46cda0[_0x2e0237(0x1c6)];tgBot['answerCallbackQuery'](_0x46cda0['id'])[_0x2e0237(0x348)](async()=>{const _0x431521=_0x2e0237;if(pid[_0x5482d4])pid[_0x5482d4][_0x431521(0x2db)]({'function':_0x431521(0x253),'args':null});}),tgBot[_0x2e0237(0x20a)](_0x2e0237(0x22a));});}else{const _0xf94d29=_0x116779[0x0][_0x652ac9(0x1cd)];if(pid[_0xf94d29])pid[_0xf94d29]['send']({'function':_0x652ac9(0x253),'args':null});}}}),tgBot[_0x1d1ac9(0x2f9)](/\/update/,async _0x1b7a5b=>{const _0x288c66=_0x1d1ac9;if(!validateTelegram(_0x1b7a5b))return;tgBot['removeListener'](_0x288c66(0x22a)),await getMessages();if(!updateAvailable)tgBot[_0x288c66(0x2c9)](_0x1b7a5b['chat']['id'],_0x288c66(0x33c))[_0x288c66(0x1be)](_0x4d3787=>{telegramError(_0x4d3787);});else!validInstallation?tgBot[_0x288c66(0x2c9)](_0x1b7a5b['chat']['id'],_0x288c66(0x261))['catch'](_0x29d9a3=>{telegramError(_0x29d9a3);}):(tgBot[_0x288c66(0x2c9)](_0x1b7a5b[_0x288c66(0x306)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x288c66(0x374),'callback_data':_0x288c66(0x272)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x543c80=>{telegramError(_0x543c80);}),tgBot['on']('callback_query',async _0x430bec=>{const _0x172db2=_0x288c66,_0x2452f0=_0x430bec['data'],_0x242182=_0x430bec[_0x172db2(0x1c6)];tgBot[_0x172db2(0x2e8)](_0x430bec['id'])[_0x172db2(0x348)](async()=>{const _0x941be8=_0x172db2;_0x2452f0==_0x941be8(0x272)&&(await tgBot[_0x941be8(0x2c9)](_0x242182[_0x941be8(0x306)]['id'],_0x941be8(0x2f7))[_0x941be8(0x1be)](_0x2cac25=>{telegramError(_0x2cac25);}),updateBB(_0x941be8(0x37d))),_0x2452f0=='no'&&await tgBot[_0x941be8(0x2c9)](_0x242182[_0x941be8(0x306)]['id'],_0x941be8(0x30a))[_0x941be8(0x1be)](_0x5981ea=>{telegramError(_0x5981ea);});}),tgBot[_0x172db2(0x20a)](_0x172db2(0x22a));}));}),tgBot['onText'](/\/reinstall/,async _0x453d6f=>{const _0x405e47=_0x1d1ac9;if(!validateTelegram(_0x453d6f))return;tgBot['removeListener'](_0x405e47(0x22a)),!validInstallation?tgBot[_0x405e47(0x2c9)](_0x453d6f[_0x405e47(0x306)]['id'],_0x405e47(0x289))[_0x405e47(0x1be)](_0x401c73=>{telegramError(_0x401c73);}):(tgBot['sendMessage'](_0x453d6f[_0x405e47(0x306)]['id'],_0x405e47(0x201),{'reply_markup':{'inline_keyboard':[[{'text':_0x405e47(0x374),'callback_data':_0x405e47(0x272)},{'text':'No','callback_data':'no'}]]}})['catch'](_0x2f3178=>{telegramError(_0x2f3178);}),tgBot['on'](_0x405e47(0x22a),async _0x55489e=>{const _0x1ea447=_0x405e47,_0x2f46fb=_0x55489e[_0x1ea447(0x352)],_0x4d0f64=_0x55489e['message'];tgBot[_0x1ea447(0x2e8)](_0x55489e['id'])[_0x1ea447(0x348)](async()=>{const _0x5df61b=_0x1ea447;_0x2f46fb=='yes'&&(await tgBot[_0x5df61b(0x2c9)](_0x4d0f64['chat']['id'],'Starting\x20Balance\x20Bot\x20reinstallation')['catch'](_0x718aa4=>{telegramError(_0x718aa4);}),updateBB(_0x5df61b(0x33e))),_0x2f46fb=='no'&&await tgBot[_0x5df61b(0x2c9)](_0x4d0f64[_0x5df61b(0x306)]['id'],'Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled')[_0x5df61b(0x1be)](_0x2acac5=>{telegramError(_0x2acac5);});}),tgBot[_0x1ea447(0x20a)](_0x1ea447(0x22a));}));}),tgBot[_0x1d1ac9(0x2f9)](/\/toggle/,_0x15f5f4=>{const _0x1e1ef0=_0x1d1ac9;if(!validateTelegram(_0x15f5f4))return;tgBot[_0x1e1ef0(0x20a)](_0x1e1ef0(0x22a));const _0x14d7ff=getBotsWithMode();if(_0x14d7ff[_0x1e1ef0(0x329)]==0x0)tgBot[_0x1e1ef0(0x2c9)](_0x15f5f4[_0x1e1ef0(0x306)]['id'],_0x1e1ef0(0x2ae))[_0x1e1ef0(0x1be)](_0x3b561e=>{telegramError(_0x3b561e);});else{let _0x3b7ea8=[],_0x1446af=[];const _0x26ecfc=0x2;let _0x5537aa=0x0;_0x14d7ff[_0x1e1ef0(0x35b)]((_0x88d6eb,_0x1c6ba2)=>{const _0x5ad168=_0x1e1ef0;if(_0x1c6ba2%_0x26ecfc==0x0)_0x1446af=[];_0x1446af['push']({'text':_0x5ad168(0x258)+_0x88d6eb['botID']+'\x20('+_0x88d6eb[_0x5ad168(0x1d8)]+')','callback_data':_0x88d6eb[_0x5ad168(0x1cd)]}),_0x1c6ba2%_0x26ecfc==0x0&&(_0x3b7ea8[_0x5537aa]=_0x1446af,_0x5537aa++);}),tgBot[_0x1e1ef0(0x2c9)](_0x15f5f4[_0x1e1ef0(0x306)]['id'],_0x1e1ef0(0x2bb),{'reply_markup':{'inline_keyboard':_0x3b7ea8}})['catch'](_0x54b682=>{telegramError(_0x54b682);}),tgBot['on'](_0x1e1ef0(0x22a),async _0x36c878=>{const _0x195b7b=_0x1e1ef0,_0x146148=_0x36c878[_0x195b7b(0x352)],_0x1f80e2=_0x36c878[_0x195b7b(0x1c6)];tgBot['answerCallbackQuery'](_0x36c878['id'])[_0x195b7b(0x348)](async()=>{const _0x499fd9=_0x195b7b,_0x1f8562=_0x14d7ff['find'](_0x3eea0f=>_0x3eea0f[_0x499fd9(0x1cd)]==_0x146148),_0x1dbc4a=_0x1f8562['mode']=='auto'?'manual':_0x499fd9(0x26b);tgBot[_0x499fd9(0x2c9)](_0x1f80e2[_0x499fd9(0x306)]['id'],_0x499fd9(0x366)+_0x146148+_0x499fd9(0x32e)+_0x1dbc4a+_0x499fd9(0x22b))[_0x499fd9(0x1be)](_0x463817=>{telegramError(_0x463817);}),toggleBotMode(_0x146148);}),tgBot[_0x195b7b(0x20a)](_0x195b7b(0x22a));});}}),tgBot[_0x1d1ac9(0x2f9)](/\/names/,_0x4a7598=>{const _0x4a0fc1=_0x1d1ac9;if(!validateTelegram(_0x4a7598))return;let _0xa63e25='';config[_0x4a0fc1(0x35b)](_0x207671=>{const _0x3479e8=_0x4a0fc1;_0xa63e25+=_0x3479e8(0x258)+_0x207671[_0x3479e8(0x1cd)]+':\x20'+_0x207671[_0x3479e8(0x220)]+'\x0a';}),tgBot[_0x4a0fc1(0x2c9)](_0x4a7598[_0x4a0fc1(0x306)]['id'],_0xa63e25,{'parse_mode':_0x4a0fc1(0x27b)})[_0x4a0fc1(0x1be)](_0x250b68=>{telegramError(_0x250b68);});}),tgBot[_0x1d1ac9(0x2f9)](/\/disable/,_0x5259ba=>{const _0x232922=_0x1d1ac9;if(!validateTelegram(_0x5259ba))return;tgBot[_0x232922(0x2c9)](_0x5259ba['chat']['id'],'Notifications\x20disabled')['catch'](_0x2c15a9=>{telegramError(_0x2c15a9);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x1d1ac9(0x2f9)](/\/help/,_0x17cd04=>{const _0xdc3a39=_0x1d1ac9;if(!validateTelegram(_0x17cd04))return;tgBot[_0xdc3a39(0x2c9)](_0x17cd04[_0xdc3a39(0x306)]['id'],_0x5371b9)[_0xdc3a39(0x1be)](_0x813e0f=>{telegramError(_0x813e0f);});}),tgBot['on'](_0x1d1ac9(0x1eb),_0x29ef43=>{const _0xc1badf=_0x1d1ac9;_0x29ef43['toString']()[_0xc1badf(0x1f5)](_0xc1badf(0x31e))&&(logger[_0xc1badf(0x249)]('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to']('botmanager')[_0xc1badf(0x2e7)](_0xc1badf(0x330),'Invalid\x20Telegram\x20token'));}),process[_0x1d1ac9(0x1aa)](_0x1d1ac9(0x2d4),()=>{const _0x170682=_0x1d1ac9;if(tgBot)tgBot['stopPolling']();process[_0x170682(0x37e)](0x1);}),process['once'](_0x1d1ac9(0x349),()=>{const _0x4ddc1f=_0x1d1ac9;if(tgBot)tgBot[_0x4ddc1f(0x325)]();process[_0x4ddc1f(0x37e)](0x1);});}}function disableTelegram(){const _0x5e431a=_0x51d6d2;tgBot&&(tgBot[_0x5e431a(0x325)](),tgBot=null);}function sendTelegram(_0x4d88f2,_0x23bd87){const _0x46288a=_0x51d6d2;if(settings[_0x46288a(0x20c)]){if(settings[_0x46288a(0x2b2)]==_0x46288a(0x2cc)||(_0x23bd87[_0x46288a(0x305)]==_0x46288a(0x232)||_0x23bd87[_0x46288a(0x305)]=='warning'||_0x23bd87[_0x46288a(0x305)]==_0x46288a(0x298))&&settings[_0x46288a(0x2b2)]==_0x46288a(0x286)||_0x23bd87['type']==_0x46288a(0x315)&&settings[_0x46288a(0x2b2)]==_0x46288a(0x278)){if(tgBot&&settings[_0x46288a(0x319)]){if(_0x23bd87['showname'])tgBot['sendMessage'](settings[_0x46288a(0x319)],_0x23bd87[_0x46288a(0x220)]+_0x46288a(0x1fe)+_0x23bd87['event'])['catch'](_0x48daba=>{telegramError(_0x48daba);});else tgBot['sendMessage'](settings[_0x46288a(0x319)],'Bot\x20'+_0x4d88f2+_0x46288a(0x1fe)+_0x23bd87[_0x46288a(0x29d)])[_0x46288a(0x1be)](_0xab6c87=>{telegramError(_0xab6c87);});}}}}async function sendTelegramMsg(_0x37a54e,_0x28e285=_0x51d6d2(0x27b)){const _0x4d8f81=_0x51d6d2;return settings[_0x4d8f81(0x20c)]&&tgBot&&settings[_0x4d8f81(0x319)]?(await tgBot[_0x4d8f81(0x2c9)](settings[_0x4d8f81(0x319)],_0x37a54e,{'parse_mode':_0x28e285})[_0x4d8f81(0x1be)](_0x4e9712=>{telegramError(_0x4e9712);}),!![]):![];}function getDeviceWithIp(_0x375558){return devices['find'](_0xdd239e=>_0xdd239e['ip']===_0x375558);}function temporaryAccess2FA(_0x1b929c,_0x4ee346){const _0x304215=_0x51d6d2;let _0xae8d2f=new Date(),_0x2ca9f4=![];if(lastIpApproval){if(_0xae8d2f-lastIpApproval<0x1388)_0x2ca9f4=!![];}lastIpApproval=new Date();if(_0x2ca9f4)return;tgBot&&settings[_0x304215(0x319)]&&(tgBot[_0x304215(0x20a)](_0x304215(0x22a)),tgBot[_0x304215(0x2c9)](settings[_0x304215(0x319)],_0x304215(0x21c)+normalizeIP(_0x4ee346)[_0x304215(0x28d)]+'</b>\x20?',{'parse_mode':_0x304215(0x27b),'reply_markup':{'inline_keyboard':[[{'text':'5\x20min','callback_data':'5'},{'text':_0x304215(0x1f8),'callback_data':'15'},{'text':_0x304215(0x323),'callback_data':'30'},{'text':_0x304215(0x26e),'callback_data':_0x304215(0x26e)}]]}})[_0x304215(0x1be)](_0x3842ee=>{telegramError(_0x3842ee);}),tgBot['on']('callback_query',async _0x101e81=>{const _0x23604c=_0x304215,_0x34cd66=_0x101e81[_0x23604c(0x352)],_0x311030=_0x101e81[_0x23604c(0x1c6)];tgBot[_0x23604c(0x2e8)](_0x101e81['id'])[_0x23604c(0x348)](async()=>{const _0x193563=_0x23604c;devices[_0x1b929c][_0x193563(0x225)]={'clientip':_0x4ee346,'timestamp':new Date()[_0x193563(0x2e6)](),'expiry':_0x34cd66},_0x34cd66!=_0x193563(0x26e)?(await tgBot['sendMessage'](_0x311030[_0x193563(0x306)]['id'],_0x193563(0x2b0)+_0x34cd66+_0x193563(0x36d),{'parse_mode':'HTML'})['catch'](_0x3477d0=>{telegramError(_0x3477d0);}),io['to'](_0x1b929c)[_0x193563(0x2e7)](_0x193563(0x2e0),{'access':{'allow':![],'reason':_0x193563(0x1af),'token':null}})):(await tgBot[_0x193563(0x2c9)](_0x311030[_0x193563(0x306)]['id'],_0x193563(0x373))[_0x193563(0x1be)](_0x222495=>{telegramError(_0x222495);}),io['to'](_0x1b929c)['emit'](_0x193563(0x2e0),{'access':{'allow':![],'reason':_0x193563(0x282),'token':null}}));}),tgBot[_0x23604c(0x20a)](_0x23604c(0x22a));}));}function loginAccess2FA(_0x6283ba,_0x44d440){const _0x58b529=_0x51d6d2;tgBot&&settings[_0x58b529(0x319)]&&(tgBot[_0x58b529(0x20a)](_0x58b529(0x22a)),tgBot[_0x58b529(0x2c9)](settings[_0x58b529(0x319)],_0x58b529(0x2c4)+normalizeIP(_0x44d440)[_0x58b529(0x28d)]+_0x58b529(0x1fd),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x58b529(0x223),'callback_data':loginExpiry},{'text':_0x58b529(0x26e),'callback_data':_0x58b529(0x26e)}]]}})[_0x58b529(0x1be)](_0x3bf418=>{telegramError(_0x3bf418);}),tgBot['on'](_0x58b529(0x22a),async _0x6aca2e=>{const _0x3f9675=_0x58b529,_0x8db612=_0x6aca2e['data'],_0x22ee7a=_0x6aca2e[_0x3f9675(0x1c6)];tgBot[_0x3f9675(0x2e8)](_0x6aca2e['id'])[_0x3f9675(0x348)](async()=>{const _0x33b570=_0x3f9675;devices[_0x6283ba][_0x33b570(0x2d8)]={'clientip':_0x44d440,'timestamp':new Date()[_0x33b570(0x2e6)](),'expiry':_0x8db612},_0x8db612!=_0x33b570(0x26e)?(await tgBot[_0x33b570(0x2c9)](_0x22ee7a['chat']['id'],'Login\x20accepted',{'parse_mode':'HTML'})[_0x33b570(0x1be)](_0x13276d=>{telegramError(_0x13276d);}),io['to'](_0x6283ba)[_0x33b570(0x2e7)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x33b570(0x2c9)](_0x22ee7a['chat']['id'],'Login\x20rejected')[_0x33b570(0x1be)](_0x35a4d6=>{telegramError(_0x35a4d6);}),io['to'](_0x6283ba)['emit'](_0x33b570(0x2e0),{'access':{'allow':![],'reason':_0x33b570(0x227),'token':null}}));}),tgBot[_0x3f9675(0x20a)](_0x3f9675(0x22a));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x2c40e4=_0x51d6d2;return dbConfig[_0x2c40e4(0x32a)]('bots')[_0x2c40e4(0x254)]('botID')[_0x2c40e4(0x2e2)]({'status':_0x2c40e4(0x2d7)})[_0x2c40e4(0x360)]()||[];}function getDisabledBots(){const _0x396569=_0x51d6d2;return dbConfig[_0x396569(0x32a)]('bots')[_0x396569(0x254)]('botID')[_0x396569(0x2e2)]({'status':_0x396569(0x363)})[_0x396569(0x360)]()||[];}function _0x1401(_0x282031,_0x320df4){const _0x1187ea=_0x2878();return _0x1401=function(_0x24fd2d,_0x39099a){_0x24fd2d=_0x24fd2d-0x19e;let _0x287820=_0x1187ea[_0x24fd2d];return _0x287820;},_0x1401(_0x282031,_0x320df4);}function getBotAttributes(_0x30c59e){const _0x2370e7=_0x51d6d2;let _0x582e69={};const _0x5b88f3=configpath+_0x2370e7(0x219)+_0x30c59e+_0x2370e7(0x1a3),_0x48ea61=fs['existsSync'](_0x5b88f3);if(_0x48ea61){const _0x11b843=fs[_0x2370e7(0x1fa)](_0x5b88f3);try{const _0x266d73=JSON['parse'](_0x11b843),_0x558b35=_0x266d73?_0x266d73['bot'][0x0]['headless']:![];_0x582e69['mode']=_0x558b35?_0x2370e7(0x26b):'manual',_0x582e69['botname']=_0x266d73?_0x266d73[_0x2370e7(0x1ac)][0x0]['botname']:_0x2370e7(0x258)+_0x30c59e;}catch(_0x291f3e){_0x582e69['mode']=_0x2370e7(0x2a9),_0x582e69[_0x2370e7(0x220)]='Bot\x20'+_0x30c59e;}}else _0x582e69[_0x2370e7(0x1d8)]='manual',_0x582e69['botname']=_0x2370e7(0x258)+_0x30c59e;return _0x582e69;}function getBotsWithMode(){const _0x1f04b9=_0x51d6d2,_0x25a340=dbConfig[_0x1f04b9(0x32a)](_0x1f04b9(0x1ea))['sortBy'](_0x1f04b9(0x1cd))[_0x1f04b9(0x360)]()||[];return _0x25a340[_0x1f04b9(0x35b)](_0x46d7ed=>{const _0x4396fd=_0x1f04b9;let _0x1e297a=getBotAttributes(_0x46d7ed[_0x4396fd(0x1cd)]);_0x46d7ed['mode']=_0x1e297a[_0x4396fd(0x1d8)];}),_0x25a340;}function getBotExchanges(){const _0x1f5a26=_0x51d6d2;let _0x5d4280=[];const _0xbc64a6=dbConfig[_0x1f5a26(0x32a)](_0x1f5a26(0x1ea))[_0x1f5a26(0x254)](_0x1f5a26(0x1cd))['value']()||[];_0xbc64a6[_0x1f5a26(0x35b)](_0x2c1267=>{const _0x2c480b=_0x1f5a26;if(_0x2c1267[_0x2c480b(0x2e0)]==_0x2c480b(0x2d7)){const _0xf2f68c=configpath+_0x2c480b(0x219)+_0x2c1267[_0x2c480b(0x1cd)]+_0x2c480b(0x1a3),_0x53d75c=fs[_0x2c480b(0x1e0)](_0xf2f68c);let _0x39ea4e;if(_0x53d75c){const _0x425f33=fs[_0x2c480b(0x1fa)](_0xf2f68c);try{const _0x42f539=JSON['parse'](_0x425f33);_0x39ea4e=_0x42f539?_0x42f539['bot'][0x0][_0x2c480b(0x268)]:null;}catch(_0x163be8){}}if(_0x39ea4e)_0x5d4280[_0x2c480b(0x27c)](_0x39ea4e);}});const _0x3fa183=[...new Set(_0x5d4280)]['sort']();return _0x3fa183;}async function initUser(){const _0x48c915=_0x51d6d2;if(!settings[_0x48c915(0x244)]){const _0x41c04d=uuidRandom();mixpanel['alias'](_0x41c04d),updateSetting(_0x48c915(0x244),_0x41c04d);}}async function initSecure(){const _0x5f1175=_0x51d6d2;let _0x58f525=getSecure();if(!_0x58f525[_0x5f1175(0x33f)](_0x5f1175(0x212))){let _0x220f62=await generateKeys();_0x58f525['publicKey']=_0x220f62[_0x5f1175(0x1a0)],_0x58f525[_0x5f1175(0x1d9)]=_0x220f62[_0x5f1175(0x1d9)],_0x58f525['secret']=crypto[_0x5f1175(0x2f3)](0x20)[_0x5f1175(0x2ca)]('hex');;storeSecure(_0x58f525);}}function getSettings(){const _0x549bb1=_0x51d6d2;return dbSettings['get'](_0x549bb1(0x27a))[_0x549bb1(0x360)]()||{};}function getSecure(){const _0x1a41e5=_0x51d6d2;return dbSecure[_0x1a41e5(0x32a)]('secure')['value']()||{};}function getBlacklist(){const _0x185668=_0x51d6d2;return dbSecure[_0x185668(0x32a)](_0x185668(0x270))[_0x185668(0x360)]()||[];}function broadcastToBots(_0x211b59,_0x3f90c6){const _0x213325=_0x51d6d2;config[_0x213325(0x35b)](_0x511b69=>{const _0x324088=_0x213325;if(_0x511b69[_0x324088(0x2e0)]==_0x324088(0x2d7)&&_0x511b69[_0x324088(0x25f)]==_0x324088(0x320)||_0x511b69['status']==_0x324088(0x1ca)&&_0x511b69['live']=='running'){if(pid[_0x511b69['botID']])pid[_0x511b69[_0x324088(0x1cd)]][_0x324088(0x2db)]({[_0x211b59]:_0x3f90c6});}});}function storeSettings(_0x16391d,_0x69a66b=![]){const _0x5f36c6=_0x51d6d2;_0x16391d={...settings,..._0x16391d};if(_0x69a66b&&_0x16391d['bbPassword']!=_0x5f36c6(0x25c)&&_0x16391d[_0x5f36c6(0x34d)]!='***'&&_0x16391d[_0x5f36c6(0x34d)]!=''){const _0x5ef088=crypt['decrypt'](secure[_0x5f36c6(0x1d9)],_0x16391d[_0x5f36c6(0x34d)])[_0x5f36c6(0x1c6)][_0x5f36c6(0x2ea)]('@')[0x0],_0x422d68=bcrypt['hashSync'](_0x5ef088,saltRounds);_0x16391d={..._0x16391d,'bbPassword':_0x422d68};}if(_0x69a66b&&_0x16391d[_0x5f36c6(0x370)]!=_0x5f36c6(0x25c)&&_0x16391d[_0x5f36c6(0x370)]!=_0x5f36c6(0x355)&&_0x16391d[_0x5f36c6(0x370)]!=''){const _0x53e2b7=crypt[_0x5f36c6(0x1e6)](secure[_0x5f36c6(0x1d9)],_0x16391d['telegramToken'])[_0x5f36c6(0x1c6)][_0x5f36c6(0x2ea)]('@')[0x0];_0x16391d={..._0x16391d,'telegramToken':_0x53e2b7};}const _0x162ae9=_0x16391d[_0x5f36c6(0x370)]!=_0x5f36c6(0x25c)&&_0x16391d['telegramToken']!=settings['telegramToken']||_0x16391d[_0x5f36c6(0x238)]!=settings['telegramUsername'],_0x4a59ae=_0x16391d['telegramToken']==''||_0x16391d['telegramUsername']=='';if(_0x162ae9)_0x16391d[_0x5f36c6(0x2b2)]='all';for(const [_0x10de4c,_0x48d90a]of Object[_0x5f36c6(0x2ff)](_0x16391d)){if(_0x10de4c==_0x5f36c6(0x370)&&_0x48d90a==_0x5f36c6(0x25c)){_0x16391d[_0x5f36c6(0x370)]=settings[_0x5f36c6(0x370)];continue;};if(_0x10de4c==_0x5f36c6(0x34d)&&_0x48d90a==_0x5f36c6(0x25c)){_0x16391d[_0x5f36c6(0x34d)]=settings['bbPassword'];continue;};dbSettings['set']('settings.'+_0x10de4c,_0x48d90a)['write']();}settings=_0x16391d,io['to'](_0x5f36c6(0x2a8))[_0x5f36c6(0x2e7)](_0x5f36c6(0x27a),cleanSettings()),broadcastToBots(_0x5f36c6(0x21a),settings[_0x5f36c6(0x21a)]),broadcastToBots(_0x5f36c6(0x311),settings[_0x5f36c6(0x311)]);if(_0x162ae9&&!_0x4a59ae)initTelegram();if(_0x162ae9&&_0x4a59ae)disableTelegram();getAllClients()[_0x5f36c6(0x35b)](_0x1ef43d=>{const _0x7f9c4d=_0x5f36c6;getSocket(_0x1ef43d['id'])[_0x7f9c4d(0x2e7)](_0x7f9c4d(0x2e0),{'access':{'allow':![],'reason':_0x7f9c4d(0x1af),'token':null}});});}function updateSetting(_0x5cba87,_0x20c0c3){const _0x245a11=_0x51d6d2;dbSettings[_0x245a11(0x2a5)](_0x245a11(0x20b)+_0x5cba87,_0x20c0c3)[_0x245a11(0x339)](),settings=getSettings(),io['to'](_0x245a11(0x2a8))[_0x245a11(0x2e7)](_0x245a11(0x27a),cleanSettings());}function storeSecure(_0x4788fd){const _0x6ed6ee=_0x51d6d2;dbSecure[_0x6ed6ee(0x32a)](_0x6ed6ee(0x34b))[_0x6ed6ee(0x27c)](_0x4788fd)['write'](),secure=_0x4788fd;}function addBlacklist(_0x530335){const _0x20b7c6=_0x51d6d2;cleanBlacklist();let _0x26624d;devices[_0x530335]['telegramIpApproval']?_0x26624d=Math[_0x20b7c6(0x1c2)](devices[_0x530335][_0x20b7c6(0x225)][_0x20b7c6(0x24c)],loginExpiry):_0x26624d=loginExpiry,dbSecure[_0x20b7c6(0x32a)]('blacklist')[_0x20b7c6(0x27c)]({'expiry':new Date()[_0x20b7c6(0x2e6)]()+_0x26624d*0x3c*0x3e8,'token':devices[_0x530335]['access'][_0x20b7c6(0x379)]})[_0x20b7c6(0x339)](),blacklist=dbSecure[_0x20b7c6(0x32a)](_0x20b7c6(0x270))[_0x20b7c6(0x360)]();}function cleanBlacklist(){const _0x1bc75f=_0x51d6d2;let _0x4aab98=dbSecure[_0x1bc75f(0x32a)]('blacklist')[_0x1bc75f(0x1d0)]()[_0x1bc75f(0x360)](),_0x165ea1=new Date()[_0x1bc75f(0x2e6)]();_0x4aab98[_0x1bc75f(0x35b)](_0x336fc6=>{const _0x3cb87c=_0x1bc75f;_0x336fc6[_0x3cb87c(0x24c)]<_0x165ea1&&dbSecure[_0x3cb87c(0x32a)]('blacklist')['remove']({'expiry':_0x336fc6[_0x3cb87c(0x24c)]})[_0x3cb87c(0x339)]();});}function initStates(){const _0x9062ca=_0x51d6d2;let _0x4d213c=getConfiguration();_0x4d213c[_0x9062ca(0x35b)](_0xcbbf41=>{const _0x16ad17=_0x9062ca;_0xcbbf41[_0x16ad17(0x25f)]=_0x16ad17(0x1d7);}),storeConfiguration(_0x4d213c);}function onKeys(){const _0x5f48e8=new RSA();return new Promise(_0x1ddde8=>{const _0x237e79=_0x1401;_0x5f48e8[_0x237e79(0x24e)]()[_0x237e79(0x348)](_0x380fb9=>{_0x1ddde8(_0x380fb9);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x48c6f1=_0x51d6d2;let _0x92fd8c=getSettings(),_0x2a3bda=![];!_0x92fd8c[_0x48c6f1(0x33f)](_0x48c6f1(0x2d0))&&(_0x92fd8c[_0x48c6f1(0x2d0)]=0x0,_0x2a3bda=!![]);!_0x92fd8c[_0x48c6f1(0x33f)](_0x48c6f1(0x28e))&&(_0x92fd8c[_0x48c6f1(0x28e)]=0x0,_0x2a3bda=!![]);!_0x92fd8c['hasOwnProperty'](_0x48c6f1(0x337))&&(_0x92fd8c[_0x48c6f1(0x337)]=_0x48c6f1(0x19f),_0x2a3bda=!![]);!_0x92fd8c[_0x48c6f1(0x33f)]('onepagemode')&&(_0x92fd8c[_0x48c6f1(0x311)]=![],_0x2a3bda=!![]);if(_0x2a3bda)storeSettings(_0x92fd8c);try{fs[_0x48c6f1(0x29f)](configbackuppath,{'withFileTypes':!![]})[_0x48c6f1(0x35b)](_0x5ad0cb=>{const _0x8b9d85=_0x48c6f1;if(!_0x5ad0cb[_0x8b9d85(0x1c8)]()){if(!_0x5ad0cb[_0x8b9d85(0x1f2)]['startsWith'](_0x8b9d85(0x2b8)))fs[_0x8b9d85(0x1dd)](configbackuppath+_0x5ad0cb[_0x8b9d85(0x1f2)]);}else fs[_0x8b9d85(0x2be)](configbackuppath+_0x5ad0cb[_0x8b9d85(0x1f2)],{'recursive':!![]});});}catch(_0x3dda0e){logger[_0x48c6f1(0x2ec)]('Error\x20removing\x20old\x20backup\x20files:',_0x3dda0e);}}function storeConfiguration(_0x586712){const _0x4a670c=_0x51d6d2;dbConfig[_0x4a670c(0x32a)](_0x4a670c(0x1ea))[_0x4a670c(0x1ce)]()['write'](),_0x586712[_0x4a670c(0x35b)](_0x4b5eb4=>{const _0x42b968=_0x4a670c;delete _0x4b5eb4[_0x42b968(0x1d8)];}),dbConfig[_0x4a670c(0x32a)](_0x4a670c(0x1ea))[_0x4a670c(0x27c)](..._0x586712)[_0x4a670c(0x339)](),config=_0x586712;}function resetPassword(){const _0x45026c=_0x51d6d2;tgBot&&settings[_0x45026c(0x319)]&&(tgBot['removeListener']('callback_query'),tgBot[_0x45026c(0x2c9)](settings['telegramChatId'],_0x45026c(0x2e4),{'parse_mode':_0x45026c(0x27b),'reply_markup':{'inline_keyboard':[[{'text':_0x45026c(0x272),'callback_data':_0x45026c(0x272)},{'text':'no','callback_data':'no'}]]}})[_0x45026c(0x1be)](_0x18448a=>{telegramError(_0x18448a);}),tgBot['on'](_0x45026c(0x22a),async _0x3b0852=>{const _0xc2f048=_0x45026c,_0x4c6cb0=_0x3b0852['data'],_0x3d422d=_0x3b0852[_0xc2f048(0x1c6)];tgBot['answerCallbackQuery'](_0x3b0852['id'])['then'](async()=>{const _0x475b2f=_0xc2f048;if(_0x4c6cb0!='no'){const _0xe665f2=0xf,_0xc8b975=_0x475b2f(0x259),_0x4f2dcd=Array['from'](crypto[_0x475b2f(0x209)](new Uint32Array(_0xe665f2)))[_0x475b2f(0x2de)](_0x583ed0=>_0xc8b975[_0x583ed0%_0xc8b975[_0x475b2f(0x329)]])[_0x475b2f(0x2d1)](''),_0x443151=bcrypt[_0x475b2f(0x2ee)](_0x4f2dcd,saltRounds);storeSettings({'bbPassword':_0x443151}),await tgBot[_0x475b2f(0x2c9)](_0x3d422d['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4f2dcd,{'parse_mode':_0x475b2f(0x27b)})[_0x475b2f(0x1be)](_0x1bf869=>{telegramError(_0x1bf869);});}else await tgBot['sendMessage'](_0x3d422d[_0x475b2f(0x306)]['id'],_0x475b2f(0x317))['catch'](_0x14046c=>{telegramError(_0x14046c);});}),tgBot[_0xc2f048(0x20a)]('callback_query');}));}async function confirmRestore(_0x22aed1,_0xf32e41){const _0x160e0a=_0x51d6d2;io['to'](_0x160e0a(0x2a8))['emit'](_0x160e0a(0x330),_0x160e0a(0x296),_0x160e0a(0x298)),tgBot&&settings[_0x160e0a(0x319)]&&(tgBot['removeListener']('callback_query'),await tgBot[_0x160e0a(0x2c9)](settings[_0x160e0a(0x319)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x160e0a(0x272),'callback_data':_0x160e0a(0x272)},{'text':'no','callback_data':'no'}]]}})['catch'](_0x1ee6dd=>{telegramError(_0x1ee6dd);}),tgBot['on'](_0x160e0a(0x22a),async _0x2d6691=>{const _0x13807f=_0x160e0a,_0x5508af=_0x2d6691[_0x13807f(0x352)],_0xe3b01=_0x2d6691[_0x13807f(0x1c6)];tgBot['answerCallbackQuery'](_0x2d6691['id'])[_0x13807f(0x348)](async()=>{const _0x515199=_0x13807f;_0x5508af==_0x515199(0x272)?(await tgBot[_0x515199(0x2c9)](_0xe3b01[_0x515199(0x306)]['id'],_0x515199(0x1ee),{'parse_mode':_0x515199(0x27b)})[_0x515199(0x1be)](_0x47a299=>{telegramError(_0x47a299);}),unzipFile(_0x22aed1,_0xf32e41)):(logger['debug'](_0x515199(0x291)),await tgBot[_0x515199(0x2c9)](_0xe3b01[_0x515199(0x306)]['id'],_0x515199(0x291))[_0x515199(0x1be)](_0x137471=>{telegramError(_0x137471);}));}),tgBot[_0x13807f(0x20a)](_0x13807f(0x22a));}));}function getServerTime(){const _0x2a5c46=_0x51d6d2,_0x18273e=new Date();return _0x18273e['getFullYear']()+'/'+(_0x18273e[_0x2a5c46(0x1d5)]()+0x1)[_0x2a5c46(0x2ca)]()['padStart'](0x2,'0')+'/'+_0x18273e[_0x2a5c46(0x345)]()['toString']()[_0x2a5c46(0x27e)](0x2,'0')+'\x20'+_0x18273e[_0x2a5c46(0x33a)]()[_0x2a5c46(0x2ca)]()['padStart'](0x2,'0')+':'+_0x18273e[_0x2a5c46(0x372)]()[_0x2a5c46(0x2ca)]()[_0x2a5c46(0x27e)](0x2,'0')+':'+_0x18273e[_0x2a5c46(0x28f)]()[_0x2a5c46(0x2ca)]()[_0x2a5c46(0x27e)](0x2,'0');}function getTimeStamp(){const _0x2dd44b=_0x51d6d2,_0x59b215=shiftedTime();return _0x59b215['getFullYear']()+'/'+(_0x59b215[_0x2dd44b(0x1d5)]()+0x1)[_0x2dd44b(0x2ca)]()['padStart'](0x2,'0')+'/'+_0x59b215[_0x2dd44b(0x345)]()[_0x2dd44b(0x2ca)]()[_0x2dd44b(0x27e)](0x2,'0')+'\x20'+_0x59b215[_0x2dd44b(0x33a)]()['toString']()[_0x2dd44b(0x27e)](0x2,'0')+':'+_0x59b215[_0x2dd44b(0x372)]()[_0x2dd44b(0x2ca)]()[_0x2dd44b(0x27e)](0x2,'0')+':'+_0x59b215[_0x2dd44b(0x28f)]()[_0x2dd44b(0x2ca)]()['padStart'](0x2,'0');}function getCleanTimeStamp(){const _0x58ebf0=_0x51d6d2,_0x5b7e9f=shiftedTime();return _0x5b7e9f[_0x58ebf0(0x210)]()+(_0x5b7e9f[_0x58ebf0(0x1d5)]()+0x1)['toString']()[_0x58ebf0(0x27e)](0x2,'0')+_0x5b7e9f['getDate']()[_0x58ebf0(0x2ca)]()['padStart'](0x2,'0')+'-'+_0x5b7e9f['getHours']()['toString']()[_0x58ebf0(0x27e)](0x2,'0')+_0x5b7e9f['getMinutes']()[_0x58ebf0(0x2ca)]()['padStart'](0x2,'0')+_0x5b7e9f[_0x58ebf0(0x28f)]()['toString']()[_0x58ebf0(0x27e)](0x2,'0');}function shiftedTime(){const _0x259020=_0x51d6d2,_0x51d0a7=new Date();let _0x2399d5=_0x51d0a7;if(settings[_0x259020(0x21a)]&&settings[_0x259020(0x21a)]!==0x0)_0x2399d5=fns['add'](_0x51d0a7,{'hours':settings[_0x259020(0x21a)]});return _0x2399d5;}function startScheduler(){const _0x3002f6=_0x51d6d2,_0x1c1741=new Date()[_0x3002f6(0x206)](),_0x46e997=shiftedTime()[_0x3002f6(0x33a)]();_0x46e997==0x4&&backupConfigFiles();_0x46e997==0x0&&rotateLogFiles();_0x1c1741%0x6==0x0&&triggerAnalytics();_0x1c1741%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x3a5d4c){const _0x348f26=_0x51d6d2;logger[_0x348f26(0x2ec)](_0x348f26(0x1d3)+_0x3a5d4c);const _0x269cf4=getBotsWithMode();_0x269cf4[_0x348f26(0x329)]>0x0?confirmRestore(configbackuppath,_0x3a5d4c):unzipFile(configbackuppath,_0x3a5d4c);}async function getBackupFiles(_0x5d7487=null){const _0x11d51e=_0x51d6d2;let _0x55fad5=[],_0x1b7d0a=fs[_0x11d51e(0x29f)](configbackuppath,{'withFileTypes':!![]});_0x1b7d0a['sort']((_0x1a4448,_0x2381a6)=>_0x1a4448['name']<_0x2381a6['name']?0x1:_0x2381a6[_0x11d51e(0x1f2)]<_0x1a4448[_0x11d51e(0x1f2)]?-0x1:0x0),_0x1b7d0a[_0x11d51e(0x35b)](_0x28fa97=>{const _0x29e9d1=_0x11d51e;if(!_0x28fa97['isDirectory']()&&_0x28fa97['name']['startsWith'](_0x29e9d1(0x2b8))&&_0x28fa97[_0x29e9d1(0x1f2)][_0x29e9d1(0x23c)](_0x29e9d1(0x213))){const _0x598ce6=formatDate(fs[_0x29e9d1(0x1a1)](configbackuppath+_0x28fa97[_0x29e9d1(0x1f2)])[_0x29e9d1(0x1a7)]);_0x55fad5[_0x29e9d1(0x27c)]({'name':_0x28fa97[_0x29e9d1(0x1f2)],'mtime':_0x598ce6});}});if(_0x5d7487)io['to'](_0x5d7487)[_0x11d51e(0x2e7)](_0x11d51e(0x2d9),_0x55fad5);else return _0x55fad5;}async function backupConfigFiles(){const _0x38cb70=_0x51d6d2;await zipFiles('backup-full');const _0x41110c=getCleanTimeStamp();fs[_0x38cb70(0x273)](zippath+_0x38cb70(0x292),configbackuppath+(_0x38cb70(0x2b8)+_0x41110c+_0x38cb70(0x213)));let _0x363ccb=fs[_0x38cb70(0x29f)](configbackuppath,{'withFileTypes':!![]});_0x363ccb[_0x38cb70(0x239)]((_0x5e6b88,_0x49436f)=>_0x5e6b88['name']<_0x49436f[_0x38cb70(0x1f2)]?0x1:_0x49436f[_0x38cb70(0x1f2)]<_0x5e6b88[_0x38cb70(0x1f2)]?-0x1:0x0),_0x363ccb['length']>maxBackups&&fs[_0x38cb70(0x1dd)](configbackuppath+_0x363ccb[_0x363ccb[_0x38cb70(0x329)]-0x1][_0x38cb70(0x1f2)]);}function rotateLogFiles(){const _0x21290b=_0x51d6d2,_0x10a5cc=fs[_0x21290b(0x1a1)](logspath+_0x21290b(0x1da)),_0x4311bf=_0x10a5cc[_0x21290b(0x1ae)]/0x400;if(_0x4311bf>0x64){let _0x155a26=fs[_0x21290b(0x29f)](logspath,{'withFileTypes':!![]});_0x155a26['sort']((_0x22e1d1,_0x9b072a)=>_0x22e1d1[_0x21290b(0x1f2)]<_0x9b072a['name']?0x1:_0x9b072a['name']<_0x22e1d1[_0x21290b(0x1f2)]?-0x1:0x0),_0x155a26[_0x21290b(0x35b)](_0x4a4359=>{const _0xe99b57=_0x21290b;if(_0x4a4359[_0xe99b57(0x1f2)]==_0xe99b57(0x243))fs[_0xe99b57(0x273)](logspath+_0x4a4359[_0xe99b57(0x1f2)],logspath+_0xe99b57(0x202));if(_0x4a4359[_0xe99b57(0x1f2)]==_0xe99b57(0x36b))fs[_0xe99b57(0x273)](logspath+_0x4a4359[_0xe99b57(0x1f2)],logspath+_0xe99b57(0x243));_0x4a4359[_0xe99b57(0x1f2)]==_0xe99b57(0x1da)&&(fs[_0xe99b57(0x273)](logspath+_0x4a4359['name'],logspath+_0xe99b57(0x36b)),fs[_0xe99b57(0x2af)](logspath+_0x4a4359[_0xe99b57(0x1f2)],''));});}}async function zipFiles(_0x1ce725){const _0x140ffd=_0x51d6d2;let _0x3fdc76;if(_0x1ce725==_0x140ffd(0x1d4))_0x3fdc76=logspath;if(_0x1ce725=='backup')_0x3fdc76=configpath;if(_0x1ce725==_0x140ffd(0x334))_0x3fdc76=configpath;let _0x62a9a9=fs[_0x140ffd(0x29f)](_0x3fdc76,{'withFileTypes':!![]});const _0x2592cd=new require(_0x140ffd(0x24b))();_0x62a9a9['forEach'](_0x4ead98=>{const _0x14a4d9=_0x140ffd;if(!_0x4ead98[_0x14a4d9(0x1c8)]()){let _0x508529=fs[_0x14a4d9(0x1fa)](_0x3fdc76+_0x4ead98['name']);if(_0x1ce725==_0x14a4d9(0x246)){const _0xdff251=/^bot-[0-9]{3}-config.json$/,_0x409025=_0xdff251['test'](_0x4ead98[_0x14a4d9(0x1f2)]);if(_0x409025){const _0x30d837=JSON['parse'](_0x508529);if(_0x30d837['bot'][0x0]){_0x30d837[_0x14a4d9(0x1ac)][0x0]['apiKey']=_0x14a4d9(0x355),_0x30d837[_0x14a4d9(0x1ac)][0x0][_0x14a4d9(0x1e3)]=_0x14a4d9(0x355);if(_0x30d837[_0x14a4d9(0x1ac)][0x0][_0x14a4d9(0x32c)])_0x30d837['bot'][0x0][_0x14a4d9(0x32c)]=_0x14a4d9(0x355);}_0x508529=JSON['stringify'](_0x30d837,null,0x2);}if(_0x4ead98[_0x14a4d9(0x1f2)]==_0x14a4d9(0x256)){const _0x76664=JSON[_0x14a4d9(0x1e7)](_0x508529);if(_0x76664[_0x14a4d9(0x27a)][_0x14a4d9(0x375)])_0x76664[_0x14a4d9(0x27a)][_0x14a4d9(0x375)]=![];if(_0x76664['settings'][_0x14a4d9(0x34d)])_0x76664[_0x14a4d9(0x27a)][_0x14a4d9(0x34d)]=_0x14a4d9(0x355);if(_0x76664[_0x14a4d9(0x27a)][_0x14a4d9(0x370)])_0x76664['settings']['telegramToken']=_0x14a4d9(0x355);if(_0x76664[_0x14a4d9(0x27a)][_0x14a4d9(0x319)])_0x76664['settings'][_0x14a4d9(0x319)]=null;_0x508529=JSON[_0x14a4d9(0x269)](_0x76664,null,0x2);}if(_0x4ead98[_0x14a4d9(0x1f2)]!=_0x14a4d9(0x37c))_0x2592cd['file'](_0x4ead98[_0x14a4d9(0x1f2)],_0x508529);}else _0x2592cd[_0x14a4d9(0x2c5)](_0x4ead98[_0x14a4d9(0x1f2)],_0x508529);}});const _0x2fc4cd=_0x2592cd['generate']({'base64':![],'compression':_0x140ffd(0x36e)});fs[_0x140ffd(0x2af)](zippath+(_0x1ce725+_0x140ffd(0x213)),_0x2fc4cd,_0x140ffd(0x26d));}async function unzipFile(_0x2da72a,_0x409a10){const _0x5dbacf=_0x51d6d2;fs[_0x5dbacf(0x29f)](configpath,{'withFileTypes':!![]})[_0x5dbacf(0x35b)](_0x307c16=>{const _0x412a75=_0x5dbacf;if(!_0x307c16['isDirectory']())fs[_0x412a75(0x2be)](configpath+_0x307c16[_0x412a75(0x1f2)]);});const _0x2527ae=fs[_0x5dbacf(0x1fa)](_0x2da72a+_0x409a10,_0x5dbacf(0x26d)),_0x30781a=new require(_0x5dbacf(0x24b))(_0x2527ae,{'base64':![],'checkCRC32':!![]});Object[_0x5dbacf(0x255)](_0x30781a[_0x5dbacf(0x217)])[_0x5dbacf(0x35b)](_0x431d4e=>{const _0x5dd59e=_0x5dbacf,_0x57c026=_0x30781a[_0x5dd59e(0x217)][_0x431d4e];fs[_0x5dd59e(0x2af)](configpath+_0x57c026[_0x5dd59e(0x1f2)],_0x57c026[_0x5dd59e(0x37f)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x58136b=>{const _0x5d98cf=_0x5dbacf;if(!_0x58136b[_0x5d98cf(0x1c8)]())fs[_0x5d98cf(0x2be)](temppath+_0x58136b[_0x5d98cf(0x1f2)]);}),logger[_0x5dbacf(0x2ec)](_0x5dbacf(0x287)),process[_0x5dbacf(0x2db)]({'restore':!![]},_0x254495=>{});}async function getPublicIp(){const _0x4cd833=_0x51d6d2;try{const _0x4edacd=await axios['get'](_0x4cd833(0x310));publicip=_0x4edacd[_0x4cd833(0x352)]['ip'];}catch(_0x595d57){}}async function triggerAnalytics(){const _0x56cd6a=_0x51d6d2;if(!publicip)await getPublicIp();const _0x440a0b=getBotsWithMode();let _0x5949b9=0x0;_0x440a0b[_0x56cd6a(0x35b)](_0x46b481=>{const _0x5c3e7c=_0x56cd6a;if(_0x46b481['status']===_0x5c3e7c(0x2d7))_0x5949b9++;});const _0x2f19cc=getBotExchanges();mixpanel[_0x56cd6a(0x371)](_0x56cd6a(0x23b),{'distinct_id':settings[_0x56cd6a(0x244)],'ip':publicip,'version':serverversion,'numbots':_0x440a0b['length'],'numbotsenabled':_0x5949b9,'exchanges':_0x2f19cc,'environment':environment});}async function getMessages(){const _0x3620fc=_0x51d6d2,_0x43e174=_0x3620fc(0x359),_0x16b189=new GraphQLClient(_0x43e174),_0x274c5e={'authorization':_0x3620fc(0x1b5)},_0x397da7=serverversion[_0x3620fc(0x2ea)]('.'),_0x32e4fc=_0x397da7[0x0]+'.'+_0x397da7[0x1],_0x4a553d=Math[_0x3620fc(0x2bd)](settings[_0x3620fc(0x2d0)],settings['lastmsgemitted']),_0x511a0c={'last':parseInt(_0x4a553d),'bbm':_0x32e4fc},_0x447ef3=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x152225;try{_0x152225=await _0x16b189[_0x3620fc(0x1b3)](_0x447ef3,_0x511a0c,_0x274c5e);}catch(_0x2adf76){}if(_0x152225&&_0x152225[_0x3620fc(0x2ab)]){let _0x1c72d6=settings[_0x3620fc(0x2d0)];newMessages=[];for(const _0x528c08 of _0x152225[_0x3620fc(0x2ab)]){newMessages['push'](_0x528c08);let _0x339e8e=![];_0x528c08[_0x3620fc(0x237)]&&(updateSetting(_0x3620fc(0x337),_0x528c08[_0x3620fc(0x237)]),_0x339e8e=isNewerVersion(serverversion,_0x528c08[_0x3620fc(0x237)])||serverversion==_0x528c08[_0x3620fc(0x237)]);if(!_0x339e8e&&_0x528c08[_0x3620fc(0x2f8)]>_0x1c72d6){if(_0x528c08[_0x3620fc(0x322)]===_0x3620fc(0x214)||serverversion[_0x3620fc(0x338)](_0x528c08[_0x3620fc(0x322)])){let _0x597605=''+_0x528c08[_0x3620fc(0x26f)]+'\x0a\x0a'+_0x528c08[_0x3620fc(0x1c6)];const _0x418dd3=await sendTelegramMsg(toTelegramMarkdown(_0x597605),_0x3620fc(0x368));if(_0x418dd3)_0x1c72d6=_0x528c08[_0x3620fc(0x2f8)];}}}updateAvailable=isNewerVersion(settings['latestversion'],serverversion),updateSetting(_0x3620fc(0x2d0),_0x1c72d6),emitMessages();}}function emitMessages(){const _0x233ccc=_0x51d6d2,_0x3e2ab7=settings[_0x233ccc(0x28e)];let _0x2fac71=[];newMessages['forEach'](_0x5c7e27=>{const _0x2d8e8d=_0x233ccc;_0x5c7e27[_0x2d8e8d(0x2f8)]>_0x3e2ab7&&_0x2fac71['push'](_0x5c7e27);}),_0x2fac71[_0x233ccc(0x329)]>0x0&&getAllClients()[_0x233ccc(0x35b)](_0x29e025=>{const _0x3df947=_0x233ccc;getSocket(_0x29e025['id'])['emit'](_0x3df947(0x1c6),_0x2fac71);});}function confirmMessage(_0x434f2e){updateSetting('lastmsgemitted',Number(_0x434f2e));}function isNewerVersion(_0x16ca08,_0x3be3f0){const _0x35852a=_0x51d6d2,_0xacb82e=_0x3be3f0[_0x35852a(0x2ea)]('.'),_0x3a5cdb=_0x16ca08[_0x35852a(0x2ea)]('.');for(var _0x59e7ec=0x0;_0x59e7ec<_0x3a5cdb['length'];_0x59e7ec++){const _0x5bbc93=~~_0x3a5cdb[_0x59e7ec],_0x2692b6=~~_0xacb82e[_0x59e7ec];if(_0x5bbc93>_0x2692b6)return!![];if(_0x5bbc93<_0x2692b6)return![];}return![];}function toTelegramMarkdown(_0x188be1){const _0x2b9440=_0x51d6d2,_0x25e938=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x5b380f=/\*{2}(.+?)\*{2}/gim;return _0x188be1=_0x188be1[_0x2b9440(0x203)](_0x25e938,'$1_$2_$3')['replace'](_0x5b380f,_0x2b9440(0x2e1)),_0x188be1;}async function validateConfigFile(){const _0x29b1b0=_0x51d6d2,_0x36a3e2=dbConfig[_0x29b1b0(0x32a)](_0x29b1b0(0x1ea))[_0x29b1b0(0x254)](_0x29b1b0(0x1cd))[_0x29b1b0(0x360)]()||[];if(_0x36a3e2[_0x29b1b0(0x329)]==0x0){let _0x29c982=0x0,_0x49b09a=[];const _0x3f1f09=/^bot-([0-9]{3})-config.json$/,_0x36a7b7=fs[_0x29b1b0(0x29f)](configpath);_0x36a7b7['forEach'](_0x50289e=>{const _0x5b1596=_0x29b1b0,_0x2f0698=_0x3f1f09[_0x5b1596(0x1ed)](_0x50289e);if(_0x2f0698){const _0xcc81a2=_0x2f0698[0x1];let _0x4294a6=getBotAttributes(_0xcc81a2);_0x49b09a[_0x5b1596(0x27c)]({'botID':_0xcc81a2,'botname':_0x4294a6[_0x5b1596(0x220)],'status':'disabled','live':_0x5b1596(0x1d7)}),_0x29c982++;}}),_0x29c982!=0x0&&(dbConfig[_0x29b1b0(0x32a)]('bots')[_0x29b1b0(0x1cb)](_0x49b09a)[_0x29b1b0(0x339)](),config=_0x49b09a,restoredConfigFile=_0x29c982);}}async function restoreConfigNotify(_0x496316){const _0x5c6dcf=_0x51d6d2;let _0x4def09;if(restoredConfigFile==0x1)_0x4def09='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x4def09='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x496316)io['to'](_0x5c6dcf(0x2a8))[_0x5c6dcf(0x2e7)](_0x5c6dcf(0x330),_0x4def09);else{logger[_0x5c6dcf(0x2fa)]('-----------------------------------------------------------------------------------'),logger[_0x5c6dcf(0x2fa)](_0x4def09),logger['simple'](_0x5c6dcf(0x1bf)),logger[_0x5c6dcf(0x2fa)]('');if(tgBot&&settings[_0x5c6dcf(0x319)]&&settings[_0x5c6dcf(0x2b2)]!=_0x5c6dcf(0x278))tgBot[_0x5c6dcf(0x2c9)](settings[_0x5c6dcf(0x319)],_0x5c6dcf(0x1a5)+_0x4def09)['catch'](_0x24295a=>{telegramError(_0x24295a);});}}function validateCredentials(_0x323a24,_0x18d82c){const _0x409ec8=_0x51d6d2;if(_0x323a24[_0x409ec8(0x1b4)]==settings[_0x409ec8(0x36a)]&&bcrypt[_0x409ec8(0x29a)](_0x323a24[_0x409ec8(0x308)],settings[_0x409ec8(0x34d)])){if(settings['f2aRequired'])return{'allow':![],'reason':_0x409ec8(0x23d),'token':null};else{const _0x2fc170=generateLoginToken(_0x18d82c);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2fc170};}}else return{'allow':![],'reason':_0x409ec8(0x274),'token':null};}function refreshToken(_0x1fc73b){const _0x51348f=_0x51d6d2,_0x286ea5=generateLoginToken(_0x1fc73b);return{'allow':!![],'reason':_0x51348f(0x22e),'token':_0x286ea5};}function validateAccess(_0x1497c2,_0x5ba32a,_0x315b3b){const _0x1b68d1=_0x51d6d2,_0x5bed6b=_0x315b3b?_0x315b3b:devices[_0x5ba32a]['ip'];let _0x3d74e1;const _0x19cc89=_0x34409d=>{const _0x38f346=_0x1401;if(settings[_0x38f346(0x375)]){if(settings['f2aRequired']){if(telegram2FaApproved(_0x5ba32a)){const _0x4e48c1=generateLoginToken(_0x5ba32a);return{'allow':!![],'reason':_0x38f346(0x267),'token':_0x4e48c1};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x3d74e1=validToken(_0x34409d,_0x5ba32a),_0x3d74e1[_0x38f346(0x33f)](_0x38f346(0x298))?{'allow':!![],'reason':_0x38f346(0x357),'token':_0x34409d}:{'allow':![],'reason':'login\x20required','token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x1b68d1(0x275)]){let _0x2431f8=[...settings[_0x1b68d1(0x20e)],_0x1b68d1(0x1ad),'::ffff:127.0.0.1','127.0.0.1'];if(_0x2431f8[_0x1b68d1(0x1f5)](_0x5bed6b))return _0x19cc89(_0x1497c2);else{_0x3d74e1=validToken(_0x1497c2,_0x5ba32a);if(_0x3d74e1['hasOwnProperty']('success'))return _0x19cc89(_0x1497c2);else{if(telegramIpApproved(_0x5ba32a)){const _0x3cf5b3=generateToken(_0x5ba32a);return _0x3d74e1=_0x19cc89(_0x1497c2),_0x3d74e1['allow']?{'allow':!![],'reason':_0x1b68d1(0x2fd),'token':_0x3cf5b3}:_0x3d74e1;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x1b68d1(0x2b4),'token':null}:{'allow':![],'reason':_0x1b68d1(0x1e5),'token':null};}}}else return _0x19cc89(_0x1497c2);}function timelyDecrypt(_0x2e7063,_0x2f50aa=!![]){const _0x144220=_0x51d6d2;if(_0x2e7063)try{const _0x2e5ba6=crypt[_0x144220(0x1e6)](secure[_0x144220(0x1d9)],_0x2e7063)['message'],_0x336ce7=_0x2e5ba6[_0x144220(0x2ea)]('@')[0x0],_0x4383d5=_0x2e5ba6[_0x144220(0x2ea)]('@')[0x1],_0x3f758e=new Date()[_0x144220(0x2e6)]();if(_0x2f50aa){if(_0x3f758e-_0x4383d5<maxSecretAge*0x3e8)return _0x336ce7;else return![];}else return _0x336ce7;}catch(_0xd137cd){return![];}else return![];}const validToken=(_0x48e1ba,_0x113631)=>{const _0x50c3df=_0x51d6d2,_0x5e805d=devices[_0x113631]['ip'];if(!_0x48e1ba)return{'error':_0x50c3df(0x262)};for(let _0x396290 of blacklist){if(_0x396290[_0x50c3df(0x379)]==_0x48e1ba)return{'error':_0x50c3df(0x2f1)};}let _0x3a0c80;try{_0x3a0c80=jwt[_0x50c3df(0x377)](_0x48e1ba,secure[_0x50c3df(0x212)]+_0x113631);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x3a0c80[_0x50c3df(0x33f)](_0x50c3df(0x1ec))&&!_0x3a0c80[_0x50c3df(0x33f)]('username')||!_0x3a0c80[_0x50c3df(0x33f)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3a0c80[_0x50c3df(0x33f)]('username')&&_0x3a0c80[_0x50c3df(0x33f)](_0x50c3df(0x1ec))){const {clientip:_0x2d67df}=_0x3a0c80;return _0x5e805d==_0x2d67df?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x50c3df(0x1f6)};}else{if(_0x3a0c80['hasOwnProperty']('username')&&_0x3a0c80[_0x50c3df(0x33f)]('clientip')){const {username:_0x585d68,clientip:_0x4a0b3b}=_0x3a0c80;return settings['bbUsername']==_0x585d68&&_0x5e805d==_0x4a0b3b?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x50c3df(0x19e)};}}},generateLoginToken=_0x189274=>{const _0x2f686b=_0x51d6d2;if(_0x189274){const _0x1d7404=devices[_0x189274]['ip'];return jwt[_0x2f686b(0x21b)]({'username':settings[_0x2f686b(0x36a)],'clientip':_0x1d7404},secure[_0x2f686b(0x212)]+_0x189274,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0xe0630c=>{const _0x5232e2=_0x51d6d2;if(_0xe0630c){const _0x23d1bb=devices[_0xe0630c]['ip'];return jwt['sign']({'clientip':_0x23d1bb},secure[_0x5232e2(0x212)]+_0xe0630c,{'expiresIn':devices[_0xe0630c][_0x5232e2(0x225)][_0x5232e2(0x24c)]*0x3c});}else return![];},telegramIpApproved=_0x584796=>{const _0x13fc51=_0x51d6d2;let _0x41b763=![];return devices[_0x584796][_0x13fc51(0x225)]&&devices[_0x584796][_0x13fc51(0x225)]['expiry']!=_0x13fc51(0x26e)&&(_0x41b763=devices[_0x584796][_0x13fc51(0x225)][_0x13fc51(0x1ec)]==devices[_0x584796]['ip']&&new Date()[_0x13fc51(0x2e6)]()-devices[_0x584796]['telegramIpApproval'][_0x13fc51(0x369)]<devices[_0x584796][_0x13fc51(0x225)]['expiry']*0x3c*0x3e8),_0x41b763;},telegram2FaApproved=_0x4e7d09=>{const _0x11c29f=_0x51d6d2;let _0x11e5d9=![];return devices[_0x4e7d09][_0x11c29f(0x2d8)]&&devices[_0x4e7d09][_0x11c29f(0x2d8)][_0x11c29f(0x24c)]!=_0x11c29f(0x26e)&&(_0x11e5d9=devices[_0x4e7d09][_0x11c29f(0x2d8)]['clientip']==devices[_0x4e7d09]['ip']&&new Date()['getTime']()-devices[_0x4e7d09][_0x11c29f(0x2d8)][_0x11c29f(0x369)]<devices[_0x4e7d09][_0x11c29f(0x2d8)][_0x11c29f(0x24c)]*0x3c*0x3e8),_0x11e5d9;},normalizeIP=_0x59fed5=>{const _0x42be68=_0x51d6d2;let _0x126b2e=null,_0x3b29d9=null;if(ipaddr['isValid'](_0x59fed5)){const _0x3af44f=ipaddr[_0x42be68(0x1e7)](_0x59fed5);_0x3af44f['kind']()===_0x42be68(0x247)?(_0x3af44f[_0x42be68(0x29b)]()&&(_0x126b2e=_0x3af44f[_0x42be68(0x284)]()['toString']()),_0x3b29d9=_0x3af44f['toString']()):(_0x126b2e=_0x3af44f[_0x42be68(0x2ca)](),_0x3b29d9=_0x3af44f[_0x42be68(0x312)]()[_0x42be68(0x2ca)]());}return{'show':_0x126b2e?_0x126b2e:_0x3b29d9,'store':_0x3b29d9};};function formatDate(_0x378ef7){const _0x2353ed=_0x51d6d2;return _0x378ef7[_0x2353ed(0x210)]()+'/'+(_0x378ef7['getMonth']()+0x1)[_0x2353ed(0x2ca)]()[_0x2353ed(0x27e)](0x2,'0')+'/'+_0x378ef7[_0x2353ed(0x345)]()[_0x2353ed(0x2ca)]()[_0x2353ed(0x27e)](0x2,'0')+'\x20'+_0x378ef7[_0x2353ed(0x33a)]()[_0x2353ed(0x2ca)]()[_0x2353ed(0x27e)](0x2,'0')+':'+_0x378ef7[_0x2353ed(0x372)]()[_0x2353ed(0x2ca)]()[_0x2353ed(0x27e)](0x2,'0')+':'+_0x378ef7[_0x2353ed(0x28f)]()[_0x2353ed(0x2ca)]()['padStart'](0x2,'0');}function sleep(_0x3fbb99){return new Promise(_0x1ad3c5=>setTimeout(_0x1ad3c5,_0x3fbb99));}