const _0x3208b0=_0x5711;(function(_0x5371e2,_0x5d9686){const _0x2430dd=_0x5711,_0xa15ed=_0x5371e2();while(!![]){try{const _0x98c8e2=parseInt(_0x2430dd(0x160))/0x1*(parseInt(_0x2430dd(0x182))/0x2)+-parseInt(_0x2430dd(0x19e))/0x3*(parseInt(_0x2430dd(0x195))/0x4)+parseInt(_0x2430dd(0x175))/0x5*(-parseInt(_0x2430dd(0x1a6))/0x6)+-parseInt(_0x2430dd(0x163))/0x7+-parseInt(_0x2430dd(0x207))/0x8*(parseInt(_0x2430dd(0x17b))/0x9)+parseInt(_0x2430dd(0x237))/0xa*(-parseInt(_0x2430dd(0x253))/0xb)+-parseInt(_0x2430dd(0x23a))/0xc*(-parseInt(_0x2430dd(0x13f))/0xd);if(_0x98c8e2===_0x5d9686)break;else _0xa15ed['push'](_0xa15ed['shift']());}catch(_0x52b843){_0xa15ed['push'](_0xa15ed['shift']());}}}(_0x573d,0xa0183));const _0x2df7c1=function(){let _0x494a02=!![];return function(_0x25a0d1,_0x171dad){const _0x2c4c47=_0x494a02?function(){if(_0x171dad){const _0x7dbb6f=_0x171dad['apply'](_0x25a0d1,arguments);return _0x171dad=null,_0x7dbb6f;}}:function(){};return _0x494a02=![],_0x2c4c47;};}(),_0x4a1a46=_0x2df7c1(this,function(){const _0x533f9a=_0x5711;return _0x4a1a46[_0x533f9a(0x230)]()[_0x533f9a(0x115)](_0x533f9a(0x268))[_0x533f9a(0x230)]()[_0x533f9a(0x26b)](_0x4a1a46)[_0x533f9a(0x115)](_0x533f9a(0x268));});_0x4a1a46();'use strict';process['env']['NTBA_FIX_319']=0x1;const childProcess=require('child_process'),FileSync=require(_0x3208b0(0x196)),fs=require('fs'),fns=require(_0x3208b0(0x1d5)),low=require(_0x3208b0(0x1dc)),path=require(_0x3208b0(0x23d)),crypto=require('crypto'),Crypt=require(_0x3208b0(0x1d8))['Crypt'],RSA=require(_0x3208b0(0x1d8))[_0x3208b0(0x20c)],bcrypt=require(_0x3208b0(0x1fd)),jwt=require(_0x3208b0(0x23e)),analyticsLib=require('analytics')[_0x3208b0(0x1fe)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x3208b0(0x251)),argv=require('yargs/yargs')(process['argv'][_0x3208b0(0x1dd)](0x2))[_0x3208b0(0x1f8)],PORT=argv[_0x3208b0(0x154)]||_0x3208b0(0x140),pattern=/^[0-9]{2,4}$/;!pattern[_0x3208b0(0x179)](PORT)&&(console[_0x3208b0(0x14a)]('Error:\x20Invalid\x20argument\x20'+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x3208b0(0x249)](0x1));const HOST=argv[_0x3208b0(0x1f4)]||null,userID=argv[_0x3208b0(0x18b)]||'';let bbpath=_0x3208b0(0x137),bbpath2='';const botfile=_0x3208b0(0x206),configfile='bb-config.json',settingsfile=_0x3208b0(0x252),securefile=_0x3208b0(0x149);let validInstallation=!![];!fs[_0x3208b0(0x1df)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x3208b0(0x18c)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x3208b0(0x1d4),configbackuppath=configpath+_0x3208b0(0x12e);!fs[_0x3208b0(0x1df)](configpath)&&fs['mkdirSync'](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig['defaults']({'bots':[]})[_0x3208b0(0x13b)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x3208b0(0x18a)]({'settings':{'timeshift':0x0}})[_0x3208b0(0x13b)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x3208b0(0x18a)]({'secure':{},'blacklist':[]})[_0x3208b0(0x13b)]();let crypt=new Crypt({'md':'sha256','rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x3208b0(0x1b6))[_0x3208b0(0x1ea)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require(_0x3208b0(0x19c)),app=express(),http=require('http')[_0x3208b0(0x17d)](app);app['use'](express[_0x3208b0(0x246)](path[_0x3208b0(0x174)](__dirname,bbpath2,_0x3208b0(0x122)))),app[_0x3208b0(0x238)](express[_0x3208b0(0x246)](path[_0x3208b0(0x174)](__dirname,bbpath2,'build'))),app['get']('/',function(_0x89b0d3,_0x24f85f){const _0x460384=_0x3208b0;_0x24f85f[_0x460384(0x144)](path[_0x460384(0x174)](__dirname,bbpath2,_0x460384(0x122),_0x460384(0x264)));}),app[_0x3208b0(0x1fb)](_0x3208b0(0x1a5),function(_0xc11ea6,_0x2841d5){const _0x3402aa=_0x3208b0;_0x2841d5[_0x3402aa(0x144)](path[_0x3402aa(0x174)](__dirname,bbpath2,_0x3402aa(0x184),_0x3402aa(0x264)));}),app[_0x3208b0(0x1fb)]('/:bot/portfolio',(_0x2ae20a,_0xecd46f)=>{const _0x557f89=_0x3208b0;_0xecd46f[_0x557f89(0x144)](path[_0x557f89(0x174)](__dirname,bbpath2,_0x557f89(0x184),_0x557f89(0x264)));}),app['get'](_0x3208b0(0x1cd),(_0x59090c,_0x576baf)=>{const _0x2844fd=_0x3208b0;_0x576baf[_0x2844fd(0x144)](path[_0x2844fd(0x174)](__dirname,bbpath2,_0x2844fd(0x184),'index.html'));}),app[_0x3208b0(0x1fb)]('/:bot/coins',(_0xd402ca,_0x168f7a)=>{const _0x5f5665=_0x3208b0;_0x168f7a[_0x5f5665(0x144)](path[_0x5f5665(0x174)](__dirname,bbpath2,_0x5f5665(0x184),_0x5f5665(0x264)));}),app[_0x3208b0(0x1fb)](_0x3208b0(0x1e8),(_0x59a317,_0x3c0310)=>{const _0x4d21a6=_0x3208b0;_0x3c0310[_0x4d21a6(0x144)](path[_0x4d21a6(0x174)](__dirname,bbpath2,_0x4d21a6(0x184),_0x4d21a6(0x264)));}),app[_0x3208b0(0x1fb)](_0x3208b0(0x242),(_0x25d869,_0x3e8892)=>{const _0x5c4642=_0x3208b0;_0x3e8892[_0x5c4642(0x144)](path[_0x5c4642(0x174)](__dirname,bbpath2,_0x5c4642(0x184),_0x5c4642(0x264)));}),app[_0x3208b0(0x1fb)](_0x3208b0(0x164),(_0x590a02,_0x55f23d)=>{const _0x45868f=_0x3208b0;_0x55f23d[_0x45868f(0x144)](path['join'](__dirname,bbpath2,_0x45868f(0x184),'index.html'));});if(HOST)http['listen'](PORT,HOST);else http[_0x3208b0(0x147)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x3208b0(0x1c6),'plugins':[googleAnalytics({'trackingId':_0x3208b0(0x1ae)})]}),TelegramBot=require(_0x3208b0(0x210));let tgBot;if(settings[_0x3208b0(0x1d9)]&&settings[_0x3208b0(0x1d9)]!=''&&settings[_0x3208b0(0x183)]&&settings[_0x3208b0(0x183)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x11d0ad=_0x3208b0;console[_0x11d0ad(0x14a)](''),console[_0x11d0ad(0x14a)]('-----------------------------------------------------------------------------------'),logging(_0x11d0ad(0x1e9)+PORT),console[_0x11d0ad(0x14a)]('-----------------------------------------------------------------------------------');if(config['length']!=0x0)config[_0x11d0ad(0x1cf)](_0xd42300=>{const _0x83fa0e=_0x11d0ad;if(_0xd42300['status']==_0x83fa0e(0x1c9)||_0xd42300[_0x83fa0e(0x248)]==_0x83fa0e(0x22f))logging(_0x83fa0e(0x23f)+_0xd42300[_0x83fa0e(0x13e)]+_0x83fa0e(0x1db)+_0xd42300[_0x83fa0e(0x257)]),startBot([_0xd42300[_0x83fa0e(0x13e)],userID],{'cwd':bbpath},function(_0x252596){if(_0x252596)logging(_0x252596);});else(_0xd42300['status']==_0x83fa0e(0x1bd)||_0xd42300['status']==_0x83fa0e(0x1ce))&&logging('idling\x20bot\x20\x20\x20|\x20Bot\x20'+_0xd42300[_0x83fa0e(0x13e)]+'\x20|\x20'+_0xd42300[_0x83fa0e(0x257)]);});else!newBot&&console[_0x11d0ad(0x14a)](_0x11d0ad(0x228));if(newBot)addBot();console['log'](_0x11d0ad(0x138)),console['log']('');}function startSocket(){io['on']('connection',_0x23f5eb=>{const _0x5a7a41=_0x5711;let _0x16fc75,_0x3d3266,_0x9ea68,_0x2c27a4,_0x382368;const _0x3fd638=_0x23f5eb[_0x5a7a41(0x1af)][_0x5a7a41(0x1a3)]['referer'];_0x3d3266=_0x3fd638[_0x5a7a41(0x25b)](/bot[0-9]{3}/);if(_0x3d3266)_0x9ea68=_0x3d3266[0x0][_0x5a7a41(0x25b)](/[0-9]{3}/);if(_0x9ea68)_0x16fc75=_0x9ea68[0x0];else _0x16fc75=_0x5a7a41(0x241);const _0x38a853=_0x23f5eb[_0x5a7a41(0x1af)]['auth'][_0x5a7a41(0x116)];if(!_0x38a853)_0x23f5eb[_0x5a7a41(0x1e6)](_0x5a7a41(0x248),{'publicKey':secure['publicKey']});else{_0x2c27a4=timelyDecrypt(_0x38a853,![]);if(!_0x2c27a4)_0x23f5eb[_0x5a7a41(0x1e6)](_0x5a7a41(0x248),{'publicKey':secure[_0x5a7a41(0x11b)]});else{_0x382368=normalizeIP(_0x23f5eb[_0x5a7a41(0x190)][_0x5a7a41(0x1f2)])['store'];if(!devices[_0x2c27a4])devices[_0x2c27a4]={'uuid':_0x2c27a4,'access':{'token':null}};devices[_0x2c27a4]['ip']=_0x382368;const _0x4dd585=addClient(_0x23f5eb['id'],_0x2c27a4,_0x16fc75);setAccess(_0x4dd585),_0x23f5eb['on'](_0x5a7a41(0x16b),_0x18b01d=>{const _0x55b79f=_0x5a7a41,_0x441008=timelyDecrypt(_0x18b01d[_0x55b79f(0x243)]);if(_0x441008){_0x18b01d={'username':_0x18b01d[_0x55b79f(0x19a)],'password':_0x441008},devices[_0x2c27a4]['access']=validateCredentials(_0x18b01d,_0x2c27a4);if(devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x20f)]==![]&&devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x1b8)]=='2FA\x20login\x20required')_0x23f5eb[_0x55b79f(0x1e6)](_0x55b79f(0x248),{'access':devices[_0x2c27a4][_0x55b79f(0x1a4)]}),loginAccess2FA(_0x2c27a4,_0x382368);else{if(devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x20f)]==![]&&devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x1b8)]==_0x55b79f(0x22a))_0x23f5eb[_0x55b79f(0x1e6)](_0x55b79f(0x248),{'access':devices[_0x2c27a4]['access']});else devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x20f)]&&devices[_0x2c27a4][_0x55b79f(0x1a4)][_0x55b79f(0x1b8)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x2c27a4)[_0x55b79f(0x1cf)](_0x53576c=>{setAccess(_0x53576c);}),setTokenRefresh(_0x2c27a4),setSessionTimeout(_0x55b79f(0x16b),_0x2c27a4));}}else logging(_0x55b79f(0x1a8));}),_0x23f5eb['on']('reset-password',()=>{resetPassword();}),_0x23f5eb['on'](_0x5a7a41(0x187),_0x4ba26c=>{removeClient(_0x23f5eb['id']);});}}});}function initClient(_0x181d15){const _0x1051f3=_0x3208b0;if(_0x181d15!=_0x1051f3(0x241)&&config[_0x1051f3(0x12a)]!=''){if(pid[_0x181d15])pid[_0x181d15]['send']({'function':_0x1051f3(0x181),'args':null});}}function getSocket(_0x30b1c9){const _0x356a5e=_0x3208b0;return io[_0x356a5e(0x1d2)][_0x356a5e(0x1d2)][_0x356a5e(0x1fb)](_0x30b1c9);}function setAccess(_0x2e805a){const _0x55fdc3=_0x3208b0,_0x20ae11=getSocket(_0x2e805a['id']),_0x590479=_0x2e805a[_0x55fdc3(0x256)],_0x2e62cd=_0x2e805a['bot'];devices[_0x590479][_0x55fdc3(0x1a4)]=validateAccess(devices[_0x590479][_0x55fdc3(0x1a4)][_0x55fdc3(0x245)],_0x590479),_0x20ae11['join'](_0x590479);if(devices[_0x590479][_0x55fdc3(0x1a4)][_0x55fdc3(0x20f)]){_0x20ae11[_0x55fdc3(0x174)](_0x2e62cd);if(_0x2e62cd=='botmanager')initializeSocketBotManager(_0x20ae11);else initializeSocketBot(_0x20ae11);initClient(_0x2e62cd);}devices[_0x590479][_0x55fdc3(0x1a4)][_0x55fdc3(0x245)]&&devices[_0x590479]['access'][_0x55fdc3(0x1b8)]==_0x55fdc3(0x188)&&setSessionTimeout(_0x55fdc3(0x254),_0x590479),devices[_0x590479]['access'][_0x55fdc3(0x245)]&&devices[_0x590479][_0x55fdc3(0x1a4)][_0x55fdc3(0x1b8)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x55fdc3(0x16b),_0x590479),_0x20ae11[_0x55fdc3(0x1e6)](_0x55fdc3(0x248),{'status':_0x2e805a[_0x55fdc3(0x18f)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x590479][_0x55fdc3(0x1a4)],'externalip':devices[_0x590479]['ip'],'publicKey':secure[_0x55fdc3(0x11b)],'validInstallation':validInstallation}),devices[_0x590479]['access'][_0x55fdc3(0x20f)]==![]&&devices[_0x590479]['access'][_0x55fdc3(0x1b8)]==_0x55fdc3(0x117)&&temporaryAccess2FA(_0x590479,devices[_0x590479]['ip']);}function setSessionTimeout(_0x1ee373,_0x39db5f){const _0x13ac77=_0x3208b0;let _0x30b69c;if(_0x1ee373==_0x13ac77(0x16b))_0x30b69c=loginExpiry*0x3c*0x3e8;else _0x30b69c=devices[_0x39db5f][_0x13ac77(0x20a)][_0x13ac77(0x1de)]*0x3c*0x3e8-(new Date()[_0x13ac77(0x148)]()-devices[_0x39db5f]['telegramIpApproval'][_0x13ac77(0x223)]);if(devices[_0x39db5f]['pidExpireLogin'])clearTimeout(devices[_0x39db5f][_0x13ac77(0x157)]);devices[_0x39db5f][_0x13ac77(0x157)]=setTimeout(()=>{const _0x47fcbc=_0x13ac77;if(devices[_0x39db5f][_0x47fcbc(0x23b)])clearTimeout(devices[_0x39db5f]['pidRefreshToken']);removeSocketListeners(_0x39db5f),addBlacklist(_0x39db5f),devices[_0x39db5f][_0x47fcbc(0x20a)]=null,devices[_0x39db5f]['telegram2FaApproval']=null,devices[_0x39db5f]['access'][_0x47fcbc(0x245)]=null,devices[_0x39db5f][_0x47fcbc(0x1a4)]=validateAccess(devices[_0x39db5f][_0x47fcbc(0x1a4)][_0x47fcbc(0x245)],_0x39db5f),!(devices[_0x39db5f][_0x47fcbc(0x1a4)][_0x47fcbc(0x20f)]&&devices[_0x39db5f][_0x47fcbc(0x1a4)][_0x47fcbc(0x1b8)]=='login\x20not\x20required')&&(_0x1ee373==_0x47fcbc(0x16b)?io['to'](_0x39db5f)[_0x47fcbc(0x1e6)](_0x47fcbc(0x248),{'access':{'allow':![],'reason':_0x47fcbc(0x21a),'token':null}}):io['to'](_0x39db5f)[_0x47fcbc(0x1e6)](_0x47fcbc(0x248),{'access':{'allow':![],'reason':_0x47fcbc(0x15b),'token':null}})),devices[_0x39db5f][_0x47fcbc(0x1a4)][_0x47fcbc(0x245)]=null;},_0x30b69c);}function setTokenRefresh(_0x234836){const _0x2dbaf9=_0x3208b0;if(devices[_0x234836]['pidRefreshToken'])clearTimeout(devices[_0x234836][_0x2dbaf9(0x23b)]);devices[_0x234836][_0x2dbaf9(0x23b)]=setTimeout(()=>{const _0x113806=_0x2dbaf9;getClientsWithUuid(_0x234836)['length']!=0x0?(devices[_0x234836][_0x113806(0x1a4)]=refreshToken(_0x234836),io['to'](_0x234836)[_0x113806(0x1e6)](_0x113806(0x248),{'status':_0x113806(0x170),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x234836][_0x113806(0x1a4)],'externalip':devices[_0x234836]['ip'],'publicKey':secure['publicKey'],'validInstallation':validInstallation}),setTokenRefresh(_0x234836)):clearTimeout(devices[_0x234836][_0x113806(0x23b)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x3e20ac){const _0x51a677=_0x3208b0,_0x31a92f=getClient(_0x3e20ac['id'])[_0x51a677(0x256)];_0x3e20ac[_0x51a677(0x1e6)](_0x51a677(0x180),config),_0x3e20ac[_0x51a677(0x1e6)](_0x51a677(0x19b),cleanSettings()),_0x3e20ac['on'](_0x51a677(0x197),_0x26836f=>{const _0x1303fd=_0x51a677;if(validateAccess(_0x26836f,_0x31a92f)[_0x1303fd(0x20f)])addBot();else logging('Unauthorized\x20attempt\x20to\x20add\x20bot');}),_0x3e20ac['on']('update-bot',(_0x47b256,_0x9a339d)=>{const _0x877c60=_0x51a677;if(validateAccess(_0x9a339d,_0x31a92f)[_0x877c60(0x20f)])toggleBot(_0x47b256['botID'],_0x47b256[_0x877c60(0x248)],_0x47b256['live']);else logging(_0x877c60(0x17c));}),_0x3e20ac['on'](_0x51a677(0x21d),(_0x41b494,_0xcf86f8)=>{const _0x14d47d=_0x51a677;if(validateAccess(_0xcf86f8,_0x31a92f)[_0x14d47d(0x20f)])toggleBotMode(_0x41b494);else logging(_0x14d47d(0x17c));}),_0x3e20ac['on'](_0x51a677(0x1b0),(_0x594d21,_0x26a818)=>{const _0x525f91=_0x51a677;if(validateAccess(_0x26a818,_0x31a92f)[_0x525f91(0x20f)])deleteBot(_0x594d21);else logging('Unauthorized\x20attempt\x20to\x20delete\x20bot');}),_0x3e20ac['on'](_0x51a677(0x1e1),(_0x13b42e,_0x3e9919)=>{const _0x22ec8c=_0x51a677;if(validateAccess(_0x3e9919,_0x31a92f)[_0x22ec8c(0x20f)])storeSettings(_0x13b42e,!![]);else logging(_0x22ec8c(0x11a));}),_0x3e20ac['on'](_0x51a677(0x1d1),_0x1d8faf=>{const _0x4594bf=_0x51a677;if(validateAccess(_0x1d8faf,_0x31a92f)[_0x4594bf(0x20f)])updateBB();else logging(_0x4594bf(0x16d));}),_0x3e20ac['on'](_0x51a677(0x25c),_0x27a632=>{const _0x34878b=_0x51a677;if(validateAccess(_0x27a632,_0x31a92f)['allow']){if(devices[_0x31a92f][_0x34878b(0x23b)])clearTimeout(devices[_0x31a92f][_0x34878b(0x23b)]);if(devices[_0x31a92f][_0x34878b(0x157)])clearTimeout(devices[_0x31a92f]['pidExpireLogin']);removeSocketListeners(getClient(_0x3e20ac['id'])[_0x34878b(0x256)]),addBlacklist(_0x31a92f),devices[_0x31a92f][_0x34878b(0x20a)]=null,devices[_0x31a92f]['telegram2FaApproval']=null,devices[_0x31a92f][_0x34878b(0x1a4)][_0x34878b(0x245)]=null,io['to'](getClient(_0x3e20ac['id'])[_0x34878b(0x256)])['emit'](_0x34878b(0x248),{'access':{'allow':![],'reason':_0x34878b(0x21b),'token':null}});}else logging(_0x34878b(0x1a0));});}function initializeSocketBot(_0x5b2426){const _0x1a2688=_0x3208b0,_0x226c3a=getClient(_0x5b2426['id'])[_0x1a2688(0x12d)],_0x125fef=getClient(_0x5b2426['id'])[_0x1a2688(0x256)];_0x5b2426['on'](_0x1a2688(0x1a9),(_0x405936,_0xe4b9d6)=>{const _0x576eaa=_0x1a2688;if(validateAccess(_0xe4b9d6,_0x125fef)[_0x576eaa(0x20f)]){if(pid[_0x226c3a])pid[_0x226c3a][_0x576eaa(0x224)]({'function':_0x576eaa(0x12c),'args':_0x405936});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x5b2426['on']('delete-alerts',(_0x3b6445,_0x2c62c3)=>{const _0x553ce0=_0x1a2688;if(validateAccess(_0x2c62c3,_0x125fef)[_0x553ce0(0x20f)]){if(pid[_0x226c3a])pid[_0x226c3a][_0x553ce0(0x224)]({'function':_0x553ce0(0x262),'args':_0x3b6445});}else logging(_0x553ce0(0x1ee));}),_0x5b2426['on'](_0x1a2688(0x173),(_0x41da95,_0x1d0763)=>{const _0x1be155=_0x1a2688;if(validateAccess(_0x1d0763,_0x125fef)[_0x1be155(0x20f)]){if(pid[_0x226c3a])pid[_0x226c3a][_0x1be155(0x224)]({'function':_0x1be155(0x135),'args':_0x41da95});}else logging(_0x1be155(0x13a));}),_0x5b2426['on']('store-configuration',(_0x42de36,_0x4e1f76)=>{const _0x336b67=_0x1a2688;if(validateAccess(_0x4e1f76,_0x125fef)['allow']){if(pid[_0x226c3a])pid[_0x226c3a][_0x336b67(0x224)]({'function':_0x336b67(0x1bf),'args':_0x42de36});}else logging(_0x336b67(0x142));}),_0x5b2426['on'](_0x1a2688(0x1c8),(_0x5b5ab8,_0x36363b)=>{const _0x5eb4e5=_0x1a2688;if(validateAccess(_0x36363b,_0x125fef)['allow']){if(pid[_0x226c3a])pid[_0x226c3a][_0x5eb4e5(0x224)]({'function':'storeHeadless','args':_0x5b5ab8});}else logging(_0x5eb4e5(0x20e));}),_0x5b2426['on'](_0x1a2688(0x150),_0x580f19=>{const _0x9b7933=_0x1a2688;if(validateAccess(_0x580f19,_0x125fef)['allow']){if(pid[_0x226c3a])pid[_0x226c3a][_0x9b7933(0x224)]({'function':_0x9b7933(0x263),'args':null});}else logging(_0x9b7933(0x1c1));}),_0x5b2426['on']('place-order',(_0x4a8f4c,_0x103e91)=>{const _0x1ecd37=_0x1a2688;if(validateAccess(_0x103e91,_0x125fef)['allow']){if(pid[_0x226c3a])pid[_0x226c3a][_0x1ecd37(0x224)]({'function':_0x1ecd37(0x1b9),'args':_0x4a8f4c});}else logging(_0x1ecd37(0x24e));}),_0x5b2426['on'](_0x1a2688(0x132),_0xfe3206=>{const _0x4f28ac=_0x1a2688;if(validateAccess(_0xfe3206,_0x125fef)[_0x4f28ac(0x20f)]){if(pid[_0x226c3a])pid[_0x226c3a]['send']({'function':_0x4f28ac(0x232),'args':null});}else logging(_0x4f28ac(0x16e));}),_0x5b2426['on']('logout',_0x665900=>{const _0x236f80=_0x1a2688;if(validateAccess(_0x665900,_0x125fef)[_0x236f80(0x20f)]){if(devices[_0x125fef][_0x236f80(0x23b)])clearTimeout(devices[_0x125fef]['pidRefreshToken']);if(devices[_0x125fef][_0x236f80(0x157)])clearTimeout(devices[_0x125fef]['pidExpireLogin']);removeSocketListeners(getClient(_0x5b2426['id'])['uuid']),addBlacklist(_0x125fef),devices[_0x125fef]['telegramIpApproval']=null,devices[_0x125fef][_0x236f80(0x1bc)]=null,devices[_0x125fef][_0x236f80(0x1a4)][_0x236f80(0x245)]=null,io['to'](getClient(_0x5b2426['id'])[_0x236f80(0x256)])[_0x236f80(0x1e6)](_0x236f80(0x248),{'access':{'allow':![],'reason':_0x236f80(0x21b),'token':null}});}else logging(_0x236f80(0x1a0));});}function removeSocketListeners(_0x234fe7){const _0x524fc0=_0x3208b0;getClientsWithUuid(_0x234fe7)[_0x524fc0(0x1cf)](_0x3099dc=>{const _0x527113=_0x524fc0;getSocket(_0x3099dc['id'])[_0x527113(0x209)]();});}function cleanSettings(){const _0x1ae626=_0x3208b0;let _0x35580d=settings;return settings['telegramToken']&&settings[_0x1ae626(0x1d9)]!=''&&(_0x35580d={..._0x35580d,'telegramToken':_0x1ae626(0x14b)}),settings[_0x1ae626(0x19f)]&&settings[_0x1ae626(0x19f)]!=''&&(_0x35580d={..._0x35580d,'bbPassword':_0x1ae626(0x14b)}),_0x35580d;}function updateBB(){const _0x484afd=_0x3208b0;installingUpdate=!![],config['forEach'](_0xb61eed=>{restartBot(_0xb61eed['botID']);}),process[_0x484afd(0x224)]({'update':!![]},_0xe2e667=>{});}function startBot(_0x2edabb,_0x275d6c,_0x1c3c9f){const _0xebaec9=_0x3208b0;let _0x326bd3=![];const _0x2669f0=_0x2edabb[0x0];_0x275d6c={..._0x275d6c,'stdio':['inherit',_0xebaec9(0x225),_0xebaec9(0x225),_0xebaec9(0x124)]},pid[_0x2669f0]=childProcess[_0xebaec9(0x222)](botfile,_0x2edabb,_0x275d6c),pid[_0x2669f0]['on'](_0xebaec9(0x236),_0x17a8cc=>{const _0x7b5d1f=_0xebaec9;switch(Object['keys'](_0x17a8cc)[0x0]){case'botname':updateBotName(_0x2669f0,_0x17a8cc['botname']);break;case _0x7b5d1f(0x1f6):updateBotManager();break;case _0x7b5d1f(0x248):updateStatus(_0x2669f0,_0x17a8cc[_0x7b5d1f(0x248)]);break;case _0x7b5d1f(0x25a):updateLive(_0x2669f0,_0x17a8cc[_0x7b5d1f(0x25a)]);break;case'started':updateLive(_0x2669f0,_0x17a8cc[_0x7b5d1f(0x13d)]),io['to'](_0x2669f0)[_0x7b5d1f(0x1e6)](_0x7b5d1f(0x248),{'access':{'allow':![],'reason':_0x7b5d1f(0x259),'token':null}});break;case _0x7b5d1f(0x17f):_0x17a8cc[_0x7b5d1f(0x17f)]=='restart'&&restartBot(_0x2669f0);_0x17a8cc[_0x7b5d1f(0x17f)]==_0x7b5d1f(0x1f3)&&toggleBot(_0x2669f0,_0x7b5d1f(0x1bd),_0x7b5d1f(0x1f7));break;case _0x7b5d1f(0x145):sendTelegram(_0x2669f0,_0x17a8cc[_0x7b5d1f(0x145)]);break;case _0x7b5d1f(0x215):io['to'](_0x2669f0)['emit'](_0x17a8cc[_0x7b5d1f(0x215)],_0x17a8cc[_0x7b5d1f(0x226)]);break;}}),pid[_0x2669f0]['on'](_0xebaec9(0x211),function(_0x3e972a){if(_0x326bd3)return;_0x326bd3=!![],_0x1c3c9f(_0x3e972a);}),pid[_0x2669f0]['on'](_0xebaec9(0x249),function(_0x459727){const _0x47504e=_0xebaec9;if(installingUpdate)return;if(_0x326bd3)return;_0x326bd3=!![],_0x1c3c9f(null);const _0x2299be=dbConfig['get']('bots')[_0x47504e(0x200)]({'botID':_0x2669f0})[_0x47504e(0x133)]();_0x2299be&&(_0x2299be[_0x47504e(0x248)]==_0x47504e(0x1c9)||_0x2299be[_0x47504e(0x248)]==_0x47504e(0x22f))&&(updateLive(_0x2669f0,_0x47504e(0x1f7)),logging(_0x47504e(0x1e2)+_0x2669f0),startBot([_0x2669f0,userID],{'cwd':bbpath},function(_0x4857ce){if(_0x4857ce)logging(_0x4857ce);}));});}function stopBot(_0x128ca8){const _0x10cd54=_0x3208b0;getClientsWithBotID(_0x128ca8)['forEach'](_0x2350d1=>{const _0x1cb17f=_0x5711;getSocket(_0x2350d1['id'])[_0x1cb17f(0x187)](!![]),removeClient(_0x2350d1['id']);}),pid[_0x128ca8]&&(pid[_0x128ca8][_0x10cd54(0x1f3)](),pid[_0x128ca8]=null);}function restartBot(_0x107707){const _0x40284a=_0x3208b0;if(pid[_0x107707])pid[_0x107707][_0x40284a(0x1f3)]();}function addBot(){const _0x4ae72b=_0x3208b0;let _0x5d4ddb;for(let _0x22eb29=0x1;_0x22eb29<0x3e9;_0x22eb29++){_0x5d4ddb=_0x22eb29[_0x4ae72b(0x230)]()[_0x4ae72b(0x258)](0x3,'0');let _0x240786=config[_0x4ae72b(0x200)](_0xbffff0=>_0xbffff0[_0x4ae72b(0x13e)]==_0x5d4ddb);if(!_0x240786)break;}if(_0x5d4ddb===_0x4ae72b(0x24b)){logging(_0x4ae72b(0x21f));return;}logging(_0x4ae72b(0x12b)+_0x5d4ddb),dbConfig[_0x4ae72b(0x1fb)](_0x4ae72b(0x180))['push']({'botID':_0x5d4ddb,'botname':_0x4ae72b(0x141)+_0x5d4ddb,'status':'new','live':''})[_0x4ae72b(0x13b)](),startBot([_0x5d4ddb,userID],{'cwd':bbpath},function(_0x28a00e){if(_0x28a00e)logging(_0x28a00e);}),config=getConfiguration(),io['to'](_0x4ae72b(0x241))['emit'](_0x4ae72b(0x180),config);}function deleteBot(_0x1b0726){const _0x47d731=_0x3208b0;getClientsWithBotID(_0x1b0726)[_0x47d731(0x1cf)](_0x1b6b9c=>{getSocket(_0x1b6b9c['id'])['disconnect'](!![]),removeClient(_0x1b6b9c['id']);}),dbConfig[_0x47d731(0x1fb)](_0x47d731(0x180))[_0x47d731(0x203)]({'botID':_0x1b0726})[_0x47d731(0x13b)](),logging('deleted\x20Bot\x20'+_0x1b0726),stopBot(_0x1b0726);try{fs[_0x47d731(0x14f)](path[_0x47d731(0x174)](configpath,'bot-'+_0x1b0726+_0x47d731(0x192))),fs[_0x47d731(0x14f)](path[_0x47d731(0x174)](configpath,'bot-'+_0x1b0726+_0x47d731(0x1e0))),fs[_0x47d731(0x14f)](path['join'](configpath,_0x47d731(0x193)+_0x1b0726+_0x47d731(0x1c2))),fs['unlinkSync'](path[_0x47d731(0x174)](configpath,'bot-'+_0x1b0726+_0x47d731(0x129)));}catch(_0x294b52){if(_0x294b52)logging(_0x47d731(0x1a1),_0x294b52);}config=getConfiguration(),io['to'](_0x47d731(0x241))[_0x47d731(0x1e6)]('bots',config);}function toggleBot(_0x4abf7b,_0x44b3b0,_0x211a6b){const _0x372302=_0x3208b0;dbConfig['get']('bots')['find']({'botID':_0x4abf7b})['assign']({'status':_0x44b3b0})['assign']({'live':_0x211a6b})[_0x372302(0x13b)]();if(_0x44b3b0==_0x372302(0x1c9)||_0x44b3b0==_0x372302(0x22f))logging(_0x372302(0x1b7)+_0x4abf7b),startBot([_0x4abf7b,userID],{'cwd':bbpath},function(_0x34af28){if(_0x34af28)logging(_0x34af28);});else(_0x44b3b0==_0x372302(0x1bd)||_0x44b3b0==_0x372302(0x1ce))&&(logging(_0x372302(0x1ab)+_0x4abf7b),stopBot(_0x4abf7b));config=getConfiguration(),io['to'](_0x372302(0x241))[_0x372302(0x1e6)]('bots',config);}function toggleStatus(_0x4041f3){const _0xbfac8b=_0x3208b0;let _0x496796=dbConfig[_0xbfac8b(0x1fb)]('bots')[_0xbfac8b(0x200)]({'botID':_0x4041f3})[_0xbfac8b(0x133)](),_0x1fb0f9;if(_0x496796[_0xbfac8b(0x248)]===_0xbfac8b(0x1c9))_0x1fb0f9=_0xbfac8b(0x1bd);else{if(_0x496796[_0xbfac8b(0x248)]===_0xbfac8b(0x22f))_0x1fb0f9=_0xbfac8b(0x1ce);else{if(_0x496796[_0xbfac8b(0x248)]===_0xbfac8b(0x1ce))_0x1fb0f9=_0xbfac8b(0x22f);else{if(_0x496796[_0xbfac8b(0x248)]==='disabled')_0x1fb0f9=_0xbfac8b(0x1c9);}}}return _0x1fb0f9;}function updateStatus(_0x276270,_0x559a60){const _0x3ba4b6=_0x3208b0;dbConfig[_0x3ba4b6(0x1fb)](_0x3ba4b6(0x180))[_0x3ba4b6(0x200)]({'botID':_0x276270})[_0x3ba4b6(0x231)]({'status':_0x559a60})['write'](),config=getConfiguration(),io['to']('botmanager')[_0x3ba4b6(0x1e6)](_0x3ba4b6(0x180),config);}function updateLive(_0x596362,_0x2603e4){const _0x48a59d=_0x3208b0;dbConfig['get']('bots')['find']({'botID':_0x596362})[_0x48a59d(0x231)]({'live':_0x2603e4})[_0x48a59d(0x13b)](),config=getConfiguration(),io['to'](_0x48a59d(0x241))['emit'](_0x48a59d(0x180),config);}function updateBotName(_0x44f67a,_0x2ec347){const _0x153971=_0x3208b0;dbConfig[_0x153971(0x1fb)](_0x153971(0x180))['find']({'botID':_0x44f67a})[_0x153971(0x231)]({'botname':_0x2ec347})[_0x153971(0x13b)](),config=getConfiguration(),io['to']('botmanager')[_0x153971(0x1e6)](_0x153971(0x180),config);}function updateBotManager(){const _0x2bfa4d=_0x3208b0;config=getConfiguration(),io['to']('botmanager')[_0x2bfa4d(0x1e6)](_0x2bfa4d(0x180),config);}function toggleBotMode(_0x4e1351){const _0x927eaf=_0x3208b0;if(pid[_0x4e1351])pid[_0x4e1351]['send']({'function':_0x927eaf(0x1ba),'args':null});else{const _0x1d259d=configpath+_0x927eaf(0x193)+_0x4e1351+'-config.json',_0x4f76de=fs[_0x927eaf(0x178)](_0x1d259d),_0xfc79=JSON[_0x927eaf(0x1f1)](_0x4f76de),_0x2d5a3f=_0xfc79[_0x927eaf(0x12d)][0x0][_0x927eaf(0x15d)];_0xfc79[_0x927eaf(0x12d)][0x0]['headless']=!_0x2d5a3f;const _0xd770db=JSON['stringify'](_0xfc79,null,0x2);fs[_0x927eaf(0x185)](_0x1d259d,_0xd770db),config=getConfiguration(),io['to'](_0x927eaf(0x241))['emit'](_0x927eaf(0x180),config);}}function telegramError(_0x17d533){const _0x35dc8e=_0x3208b0;console[_0x35dc8e(0x14a)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed');}function validateTelegram(_0x1f78fd){const _0x46f4c3=_0x3208b0;if(_0x1f78fd[_0x46f4c3(0x247)]['username']!=settings[_0x46f4c3(0x183)]&&'@'+_0x1f78fd[_0x46f4c3(0x247)][_0x46f4c3(0x19a)]!=settings[_0x46f4c3(0x183)])return tgBot['sendMessage'](_0x1f78fd[_0x46f4c3(0x22c)]['id'],_0x46f4c3(0x176),{'parse_mode':'HTML'})['catch'](_0x358ca2=>{telegramError(_0x358ca2);}),![];return!![];}async function initTelegram(){const _0x26727e=_0x3208b0;if(tgBot)tgBot[_0x26727e(0x208)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x26727e(0x1d9)],{'polling':!![]});let _0x133db3=_0x26727e(0x15a);_0x133db3+='\x0a',_0x133db3+='/enable\x20-\x20enable\x20notifications\x0a',_0x133db3+=_0x26727e(0x235),_0x133db3+=_0x26727e(0x171),_0x133db3+=_0x26727e(0x167),_0x133db3+=_0x26727e(0x21c),_0x133db3+=_0x26727e(0x1b5),_0x133db3+=_0x26727e(0x250),_0x133db3+=_0x26727e(0x118),_0x133db3+=_0x26727e(0x20b),_0x133db3+=_0x26727e(0x1f0);let _0x591bb3=_0x26727e(0x1ca);_0x591bb3+='\x0a',_0x591bb3+=_0x133db3,tgBot[_0x26727e(0x126)](/\/start/,_0x22a522=>{const _0x38f5fc=_0x26727e;if(!validateTelegram(_0x22a522))return;if(settings[_0x38f5fc(0x217)]!=_0x22a522['chat']['id'])updateSetting('telegramChatId',_0x22a522[_0x38f5fc(0x22c)]['id']);updateSetting(_0x38f5fc(0x1c5),!![]),tgBot[_0x38f5fc(0x14e)](_0x22a522['chat']['id'],_0x591bb3)[_0x38f5fc(0x1ad)](_0x9e6a8c=>{telegramError(_0x9e6a8c);});}),tgBot['onText'](/\/enable/,_0x88a2d9=>{const _0x10e41c=_0x26727e;if(!validateTelegram(_0x88a2d9))return;if(settings[_0x10e41c(0x217)]!=_0x88a2d9[_0x10e41c(0x22c)]['id'])updateSetting(_0x10e41c(0x217),_0x88a2d9['chat']['id']);updateSetting(_0x10e41c(0x1c5),!![]),tgBot[_0x10e41c(0x14e)](_0x88a2d9['chat']['id'],_0x10e41c(0x189))[_0x10e41c(0x1ad)](_0x3548b2=>{telegramError(_0x3548b2);});}),tgBot[_0x26727e(0x126)](/\/config/,async _0x160c92=>{const _0x2063ce=_0x26727e;if(!validateTelegram(_0x160c92))return;tgBot['removeListener'](_0x2063ce(0x1f5)),tgBot[_0x2063ce(0x14e)](_0x160c92[_0x2063ce(0x22c)]['id'],_0x2063ce(0x1aa),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x2063ce(0x261)},{'text':_0x2063ce(0x229),'callback_data':_0x2063ce(0x156)},{'text':_0x2063ce(0x128),'callback_data':_0x2063ce(0x227)}]]}})[_0x2063ce(0x1ad)](_0x4f8783=>{telegramError(_0x4f8783);}),tgBot['on'](_0x2063ce(0x1f5),async _0x522955=>{const _0x2551f4=_0x2063ce,_0x537ea5=_0x522955[_0x2551f4(0x1a2)],_0x25a4d8=_0x522955['message'];tgBot[_0x2551f4(0x11f)](_0x522955['id'])['then'](async()=>{const _0x41239d=_0x2551f4;_0x537ea5==_0x41239d(0x261)&&(updateSetting(_0x41239d(0x1b4),_0x41239d(0x261)),updateSetting(_0x41239d(0x1c5),!![]),await tgBot[_0x41239d(0x14e)](_0x25a4d8['chat']['id'],_0x41239d(0x17e))[_0x41239d(0x1ad)](_0xd35a3a=>{telegramError(_0xd35a3a);}));_0x537ea5==_0x41239d(0x156)&&(updateSetting(_0x41239d(0x1b4),_0x41239d(0x156)),updateSetting(_0x41239d(0x1c5),!![]),await tgBot[_0x41239d(0x14e)](_0x25a4d8[_0x41239d(0x22c)]['id'],_0x41239d(0x18e))[_0x41239d(0x1ad)](_0x1b27d3=>{telegramError(_0x1b27d3);}));_0x537ea5==_0x41239d(0x227)&&(updateSetting('telegramEvents','all'),updateSetting(_0x41239d(0x1c5),!![]),await tgBot['sendMessage'](_0x25a4d8[_0x41239d(0x22c)]['id'],_0x41239d(0x201))[_0x41239d(0x1ad)](_0x369341=>{telegramError(_0x369341);}));if(!settings[_0x41239d(0x217)])tgBot['sendMessage'](_0x25a4d8[_0x41239d(0x22c)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x4d744e=>{telegramError(_0x4d744e);});}),tgBot[_0x2551f4(0x1d6)]('callback_query');});}),tgBot[_0x26727e(0x126)](/\/status/,_0x48daa6=>{const _0x4bde1f=_0x26727e;if(!validateTelegram(_0x48daa6))return;const _0x36c6ea=getBotsWithMode();let _0x3bd365='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x1e8d7c=>{const _0x52ece2=_0x5711,_0x24c7d7=_0x36c6ea[_0x52ece2(0x200)](_0x2e9770=>_0x2e9770[_0x52ece2(0x13e)]==_0x1e8d7c[_0x52ece2(0x13e)])['mode'];_0x3bd365+=_0x52ece2(0x141)+_0x1e8d7c[_0x52ece2(0x13e)]+':\x20'+_0x1e8d7c[_0x52ece2(0x248)]+_0x52ece2(0x1db)+_0x24c7d7+'\x20|\x20'+_0x1e8d7c[_0x52ece2(0x25a)]+'\x0a';}),_0x3bd365+='\x0a',_0x3bd365+='<b>Telegram\x20Bot\x20Status:</b>\x0a',_0x3bd365+=!settings['telegramEnabled']?_0x4bde1f(0x1ed):_0x4bde1f(0x1fa),_0x3bd365+=settings[_0x4bde1f(0x1c5)]?settings['telegramEvents']==_0x4bde1f(0x227)?_0x4bde1f(0x1ef):_0x4bde1f(0x159)+settings['telegramEvents']+_0x4bde1f(0x16a):'',tgBot[_0x4bde1f(0x14e)](_0x48daa6[_0x4bde1f(0x22c)]['id'],_0x3bd365,{'parse_mode':'HTML'})[_0x4bde1f(0x1ad)](_0x3243d7=>{telegramError(_0x3243d7);});}),tgBot[_0x26727e(0x126)](/\/restart/,_0x2204fb=>{const _0x2cf05a=_0x26727e;if(!validateTelegram(_0x2204fb))return;tgBot[_0x2cf05a(0x1d6)](_0x2cf05a(0x1f5));const _0xf7625b=getEnabledBots();if(_0xf7625b[_0x2cf05a(0x158)]==0x0)tgBot['sendMessage'](_0x2204fb[_0x2cf05a(0x22c)]['id'],_0x2cf05a(0x1d0))[_0x2cf05a(0x1ad)](_0x15c481=>{telegramError(_0x15c481);});else{if(_0xf7625b[_0x2cf05a(0x158)]>0x1)_0xf7625b['push']({'botID':_0x2cf05a(0x227)});let _0x3d7567=[],_0x58bd6f=[];const _0x56c48d=_0xf7625b[_0x2cf05a(0x158)]%0x4==0x0||_0xf7625b['length']%0x4==0x3||_0xf7625b[_0x2cf05a(0x158)]%0x3==0x1?0x4:0x3;let _0x1bf333=0x0;_0xf7625b[_0x2cf05a(0x1cf)]((_0x3ffe7a,_0x2282c6)=>{const _0x48cb35=_0x2cf05a;if(_0x2282c6%_0x56c48d==0x0)_0x58bd6f=[];_0x58bd6f[_0x48cb35(0x169)]({'text':_0x3ffe7a[_0x48cb35(0x13e)]=='all'?'All\x20bots':_0x48cb35(0x141)+_0x3ffe7a[_0x48cb35(0x13e)],'callback_data':_0x3ffe7a['botID']}),_0x2282c6%_0x56c48d==0x0&&(_0x3d7567[_0x1bf333]=_0x58bd6f,_0x1bf333++);}),tgBot[_0x2cf05a(0x14e)](_0x2204fb[_0x2cf05a(0x22c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x3d7567}})[_0x2cf05a(0x1ad)](_0xb7e183=>{telegramError(_0xb7e183);}),tgBot['on'](_0x2cf05a(0x1f5),async _0x8b771b=>{const _0x28dec1=_0x2cf05a,_0x4820e7=_0x8b771b[_0x28dec1(0x1a2)],_0xdac094=_0x8b771b[_0x28dec1(0x236)];tgBot[_0x28dec1(0x11f)](_0x8b771b['id'])[_0x28dec1(0x1ac)](async()=>{const _0x1f6694=_0x28dec1;_0x4820e7==_0x1f6694(0x227)?(tgBot['sendMessage'](_0xdac094[_0x1f6694(0x22c)]['id'],_0x1f6694(0x15c))[_0x1f6694(0x1ad)](_0x34199d=>{telegramError(_0x34199d);}),config[_0x1f6694(0x1cf)](_0x164170=>{const _0x2c7aa6=_0x1f6694;restartBot(_0x164170[_0x2c7aa6(0x13e)]);})):(tgBot['sendMessage'](_0xdac094[_0x1f6694(0x22c)]['id'],_0x1f6694(0x20d)+_0x4820e7)['catch'](_0x2c4f77=>{telegramError(_0x2c4f77);}),restartBot(_0x4820e7));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/on/,_0x1a0582=>{const _0x26f64a=_0x26727e;if(!validateTelegram(_0x1a0582))return;tgBot['removeListener'](_0x26f64a(0x1f5));const _0x525e57=getDisabledBots();if(_0x525e57[_0x26f64a(0x158)]==0x0)tgBot['sendMessage'](_0x1a0582['chat']['id'],_0x26f64a(0x234))[_0x26f64a(0x1ad)](_0x5dacde=>{telegramError(_0x5dacde);});else{if(_0x525e57[_0x26f64a(0x158)]>0x1)_0x525e57['push']({'botID':_0x26f64a(0x227)});let _0x5683f7=[],_0x4f1b5e=[];const _0x22d8f5=_0x525e57[_0x26f64a(0x158)]%0x4==0x0||_0x525e57[_0x26f64a(0x158)]%0x4==0x3||_0x525e57[_0x26f64a(0x158)]%0x3==0x1?0x4:0x3;let _0x194080=0x0;_0x525e57[_0x26f64a(0x1cf)]((_0x344da1,_0x133682)=>{const _0x814f54=_0x26f64a;if(_0x133682%_0x22d8f5==0x0)_0x4f1b5e=[];_0x4f1b5e['push']({'text':_0x344da1[_0x814f54(0x13e)]==_0x814f54(0x227)?_0x814f54(0x166):_0x814f54(0x141)+_0x344da1['botID'],'callback_data':_0x344da1[_0x814f54(0x13e)]}),_0x133682%_0x22d8f5==0x0&&(_0x5683f7[_0x194080]=_0x4f1b5e,_0x194080++);}),tgBot[_0x26f64a(0x14e)](_0x1a0582['chat']['id'],_0x26f64a(0x233),{'reply_markup':{'inline_keyboard':_0x5683f7}})[_0x26f64a(0x1ad)](_0x3f3093=>{telegramError(_0x3f3093);}),tgBot['on'](_0x26f64a(0x1f5),async _0x54e260=>{const _0xe29388=_0x26f64a,_0x4495c2=_0x54e260[_0xe29388(0x1a2)],_0xbaf865=_0x54e260[_0xe29388(0x236)];tgBot['answerCallbackQuery'](_0x54e260['id'])[_0xe29388(0x1ac)](async()=>{const _0x55f7b7=_0xe29388;_0x4495c2==_0x55f7b7(0x227)?(tgBot[_0x55f7b7(0x14e)](_0xbaf865['chat']['id'],_0x55f7b7(0x14d))[_0x55f7b7(0x1ad)](_0x15361f=>{telegramError(_0x15361f);}),_0x525e57[_0x55f7b7(0x1cf)](_0x43b364=>{const _0x523789=_0x55f7b7;if(_0x43b364[_0x523789(0x13e)]!=_0x523789(0x227))toggleBot(_0x43b364['botID'],toggleStatus(_0x43b364[_0x523789(0x13e)]),_0x523789(0x1f7));})):(tgBot['sendMessage'](_0xbaf865[_0x55f7b7(0x22c)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x4495c2)[_0x55f7b7(0x1ad)](_0x53fc08=>{telegramError(_0x53fc08);}),toggleBot(_0x4495c2,toggleStatus(_0x4495c2),_0x55f7b7(0x1f7)));}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/off/,_0x3e162d=>{const _0x108c1c=_0x26727e;if(!validateTelegram(_0x3e162d))return;tgBot[_0x108c1c(0x1d6)](_0x108c1c(0x1f5));const _0x454c6e=getEnabledBots();if(_0x454c6e[_0x108c1c(0x158)]==0x0)tgBot[_0x108c1c(0x14e)](_0x3e162d['chat']['id'],_0x108c1c(0x1d0))[_0x108c1c(0x1ad)](_0x2bad0e=>{telegramError(_0x2bad0e);});else{if(_0x454c6e[_0x108c1c(0x158)]>0x1)_0x454c6e[_0x108c1c(0x169)]({'botID':_0x108c1c(0x227)});let _0x5f283d=[],_0x14ec79=[];const _0x4211db=_0x454c6e[_0x108c1c(0x158)]%0x4==0x0||_0x454c6e[_0x108c1c(0x158)]%0x4==0x3||_0x454c6e['length']%0x3==0x1?0x4:0x3;let _0x9230a6=0x0;_0x454c6e[_0x108c1c(0x1cf)]((_0x146248,_0x46b17d)=>{const _0x4de71e=_0x108c1c;if(_0x46b17d%_0x4211db==0x0)_0x14ec79=[];_0x14ec79[_0x4de71e(0x169)]({'text':_0x146248[_0x4de71e(0x13e)]==_0x4de71e(0x227)?_0x4de71e(0x166):_0x4de71e(0x141)+_0x146248[_0x4de71e(0x13e)],'callback_data':_0x146248[_0x4de71e(0x13e)]}),_0x46b17d%_0x4211db==0x0&&(_0x5f283d[_0x9230a6]=_0x14ec79,_0x9230a6++);}),tgBot['sendMessage'](_0x3e162d[_0x108c1c(0x22c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5f283d}})[_0x108c1c(0x1ad)](_0x96c10a=>{telegramError(_0x96c10a);}),tgBot['on']('callback_query',async _0x96b5c5=>{const _0x1c7e8c=_0x108c1c,_0x1c9265=_0x96b5c5['data'],_0x56a2af=_0x96b5c5[_0x1c7e8c(0x236)];tgBot[_0x1c7e8c(0x11f)](_0x96b5c5['id'])[_0x1c7e8c(0x1ac)](async()=>{const _0x3fb194=_0x1c7e8c;_0x1c9265==_0x3fb194(0x227)?(tgBot['sendMessage'](_0x56a2af[_0x3fb194(0x22c)]['id'],_0x3fb194(0x239))[_0x3fb194(0x1ad)](_0x2e4287=>{telegramError(_0x2e4287);}),_0x454c6e[_0x3fb194(0x1cf)](_0x3b0ae7=>{const _0xfe1d39=_0x3fb194;if(_0x3b0ae7[_0xfe1d39(0x13e)]!=_0xfe1d39(0x227))toggleBot(_0x3b0ae7[_0xfe1d39(0x13e)],toggleStatus(_0x3b0ae7[_0xfe1d39(0x13e)]),_0xfe1d39(0x1f7));})):(tgBot[_0x3fb194(0x14e)](_0x56a2af[_0x3fb194(0x22c)]['id'],_0x3fb194(0x214)+_0x1c9265)['catch'](_0x2edf38=>{telegramError(_0x2edf38);}),toggleBot(_0x1c9265,toggleStatus(_0x1c9265),_0x3fb194(0x1f7)));}),tgBot[_0x1c7e8c(0x1d6)]('callback_query');});}}),tgBot[_0x26727e(0x126)](/\/toggle/,_0x1e66c2=>{const _0x2c57fc=_0x26727e;if(!validateTelegram(_0x1e66c2))return;tgBot[_0x2c57fc(0x1d6)]('callback_query');const _0x163188=getBotsWithMode();if(_0x163188[_0x2c57fc(0x158)]==0x0)tgBot[_0x2c57fc(0x14e)](_0x1e66c2[_0x2c57fc(0x22c)]['id'],_0x2c57fc(0x1d0))[_0x2c57fc(0x1ad)](_0x4b590f=>{telegramError(_0x4b590f);});else{let _0x785ca8=[],_0x5ca2cd=[];const _0x3fb192=0x2;let _0x5dff6c=0x0;_0x163188[_0x2c57fc(0x1cf)]((_0x1706c1,_0x13d2d8)=>{const _0x4dd2f1=_0x2c57fc;if(_0x13d2d8%_0x3fb192==0x0)_0x5ca2cd=[];_0x5ca2cd[_0x4dd2f1(0x169)]({'text':_0x4dd2f1(0x141)+_0x1706c1[_0x4dd2f1(0x13e)]+'\x20('+_0x1706c1[_0x4dd2f1(0x265)]+')','callback_data':_0x1706c1[_0x4dd2f1(0x13e)]}),_0x13d2d8%_0x3fb192==0x0&&(_0x785ca8[_0x5dff6c]=_0x5ca2cd,_0x5dff6c++);}),tgBot[_0x2c57fc(0x14e)](_0x1e66c2[_0x2c57fc(0x22c)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x785ca8}})[_0x2c57fc(0x1ad)](_0x443a48=>{telegramError(_0x443a48);}),tgBot['on'](_0x2c57fc(0x1f5),async _0x2c418f=>{const _0x391a00=_0x2c57fc,_0x2e4b45=_0x2c418f['data'],_0x4ecdff=_0x2c418f['message'];tgBot[_0x391a00(0x11f)](_0x2c418f['id'])[_0x391a00(0x1ac)](async()=>{const _0x48dee6=_0x391a00,_0x21e8d8=_0x163188['find'](_0x3a9018=>_0x3a9018[_0x48dee6(0x13e)]==_0x2e4b45),_0x366d44=_0x21e8d8['mode']==_0x48dee6(0x218)?'manual':_0x48dee6(0x218);tgBot[_0x48dee6(0x14e)](_0x4ecdff[_0x48dee6(0x22c)]['id'],_0x48dee6(0x11d)+_0x2e4b45+_0x48dee6(0x1e7)+_0x366d44+_0x48dee6(0x204))[_0x48dee6(0x1ad)](_0x378a6a=>{telegramError(_0x378a6a);}),toggleBotMode(_0x2e4b45);}),tgBot[_0x391a00(0x1d6)](_0x391a00(0x1f5));});}}),tgBot[_0x26727e(0x126)](/\/names/,_0xbf4ffe=>{const _0x7301b0=_0x26727e;if(!validateTelegram(_0xbf4ffe))return;let _0x50aee7='';config['forEach'](_0x1127d3=>{const _0x51ae28=_0x5711;_0x50aee7+='Bot\x20'+_0x1127d3[_0x51ae28(0x13e)]+':\x20'+_0x1127d3[_0x51ae28(0x257)]+'\x0a';}),tgBot[_0x7301b0(0x14e)](_0xbf4ffe[_0x7301b0(0x22c)]['id'],_0x50aee7,{'parse_mode':_0x7301b0(0x26a)})[_0x7301b0(0x1ad)](_0x39ce36=>{telegramError(_0x39ce36);});}),tgBot[_0x26727e(0x126)](/\/disable/,_0x45a279=>{const _0x49e4a6=_0x26727e;if(!validateTelegram(_0x45a279))return;tgBot[_0x49e4a6(0x14e)](_0x45a279['chat']['id'],_0x49e4a6(0x130))[_0x49e4a6(0x1ad)](_0x2da28a=>{telegramError(_0x2da28a);}),updateSetting(_0x49e4a6(0x1c5),![]);}),tgBot[_0x26727e(0x126)](/\/help/,_0x22f84a=>{const _0x510164=_0x26727e;if(!validateTelegram(_0x22f84a))return;tgBot[_0x510164(0x14e)](_0x22f84a['chat']['id'],_0x133db3)['catch'](_0x25510b=>{telegramError(_0x25510b);});}),tgBot['on'](_0x26727e(0x151),_0x23249c=>{const _0x417ae5=_0x26727e;_0x23249c[_0x417ae5(0x230)]()['includes'](_0x417ae5(0x15f))&&(logging(_0x417ae5(0x22e)),tgBot[_0x417ae5(0x208)](),tgBot=null,io['to']('botmanager')['emit'](_0x417ae5(0x24a),_0x417ae5(0x22e)));}),process[_0x26727e(0x1eb)]('SIGINT',()=>{const _0x41174b=_0x26727e;if(tgBot)tgBot[_0x41174b(0x208)]();process['exit'](0x1);}),process[_0x26727e(0x1eb)]('SIGTERM',()=>{const _0x184cd6=_0x26727e;if(tgBot)tgBot[_0x184cd6(0x208)]();process[_0x184cd6(0x249)](0x1);});}}function disableTelegram(){const _0x27cbd3=_0x3208b0;tgBot&&(tgBot[_0x27cbd3(0x208)](),tgBot=null);}function sendTelegram(_0xea19ec,_0xb68f9e){const _0x1b56ce=_0x3208b0;if(settings[_0x1b56ce(0x1c5)]){if(settings[_0x1b56ce(0x1b4)]==_0x1b56ce(0x227)||(_0xb68f9e[_0x1b56ce(0x168)]==_0x1b56ce(0x211)||_0xb68f9e[_0x1b56ce(0x168)]==_0x1b56ce(0x131))&&settings[_0x1b56ce(0x1b4)]==_0x1b56ce(0x156)||_0xb68f9e[_0x1b56ce(0x168)]==_0x1b56ce(0x139)&&settings['telegramEvents']==_0x1b56ce(0x261)){if(tgBot&&settings[_0x1b56ce(0x217)]){if(_0xb68f9e[_0x1b56ce(0x17a)])tgBot[_0x1b56ce(0x14e)](settings[_0x1b56ce(0x217)],_0xb68f9e[_0x1b56ce(0x257)]+_0x1b56ce(0x1f9)+_0xb68f9e[_0x1b56ce(0x255)])['catch'](_0x5088ee=>{telegramError(_0x5088ee);});else tgBot[_0x1b56ce(0x14e)](settings['telegramChatId'],_0x1b56ce(0x141)+_0xea19ec+_0x1b56ce(0x1f9)+_0xb68f9e[_0x1b56ce(0x255)])[_0x1b56ce(0x1ad)](_0x14ea95=>{telegramError(_0x14ea95);});}}}}function getDeviceWithIp(_0x50b282){const _0x4a80ce=_0x3208b0;return devices[_0x4a80ce(0x200)](_0x552d1a=>_0x552d1a['ip']===_0x50b282);}function temporaryAccess2FA(_0x4a2c59,_0x353026){const _0x110329=_0x3208b0;let _0x17878c=new Date(),_0x741fdf=![];if(lastIpApproval){if(_0x17878c-lastIpApproval<0x1388)_0x741fdf=!![];}lastIpApproval=new Date();if(_0x741fdf)return;tgBot&&settings[_0x110329(0x217)]&&(tgBot[_0x110329(0x1d6)](_0x110329(0x1f5)),tgBot[_0x110329(0x14e)](settings[_0x110329(0x217)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x353026)[_0x110329(0x1c0)]+_0x110329(0x1d3),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x110329(0x266),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':'30\x20min','callback_data':'30'},{'text':_0x110329(0x199),'callback_data':'reject'}]]}})['catch'](_0x20188a=>{telegramError(_0x20188a);}),tgBot['on'](_0x110329(0x1f5),async _0x1f862f=>{const _0x14c1f1=_0x110329,_0x408b9d=_0x1f862f['data'],_0x30320d=_0x1f862f[_0x14c1f1(0x236)];tgBot[_0x14c1f1(0x11f)](_0x1f862f['id'])[_0x14c1f1(0x1ac)](async()=>{const _0x159d1d=_0x14c1f1;devices[_0x4a2c59][_0x159d1d(0x20a)]={'clientip':_0x353026,'timestamp':new Date()[_0x159d1d(0x148)](),'expiry':_0x408b9d},_0x408b9d!=_0x159d1d(0x199)?(await tgBot['sendMessage'](_0x30320d[_0x159d1d(0x22c)]['id'],_0x159d1d(0x123)+_0x408b9d+_0x159d1d(0x221),{'parse_mode':_0x159d1d(0x26a)})[_0x159d1d(0x1ad)](_0x5150db=>{telegramError(_0x5150db);}),io['to'](_0x4a2c59)[_0x159d1d(0x1e6)](_0x159d1d(0x248),{'access':{'allow':![],'reason':_0x159d1d(0x259),'token':null}})):(await tgBot['sendMessage'](_0x30320d[_0x159d1d(0x22c)]['id'],_0x159d1d(0x155))['catch'](_0x41ad88=>{telegramError(_0x41ad88);}),io['to'](_0x4a2c59)[_0x159d1d(0x1e6)]('status',{'access':{'allow':![],'reason':_0x159d1d(0x191),'token':null}}));}),tgBot[_0x14c1f1(0x1d6)](_0x14c1f1(0x1f5));}));}function loginAccess2FA(_0x3b1ca3,_0x56bb38){const _0x5e1a15=_0x3208b0;tgBot&&settings['telegramChatId']&&(tgBot[_0x5e1a15(0x1d6)](_0x5e1a15(0x1f5)),tgBot[_0x5e1a15(0x14e)](settings['telegramChatId'],_0x5e1a15(0x162)+normalizeIP(_0x56bb38)[_0x5e1a15(0x1c0)]+_0x5e1a15(0x1d3),{'parse_mode':_0x5e1a15(0x26a),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':_0x5e1a15(0x199),'callback_data':_0x5e1a15(0x199)}]]}})[_0x5e1a15(0x1ad)](_0x28b8b4=>{telegramError(_0x28b8b4);}),tgBot['on']('callback_query',async _0x585de9=>{const _0x308473=_0x5e1a15,_0x497a4d=_0x585de9[_0x308473(0x1a2)],_0x3d1e3e=_0x585de9['message'];tgBot[_0x308473(0x11f)](_0x585de9['id'])['then'](async()=>{const _0x15a11b=_0x308473;devices[_0x3b1ca3][_0x15a11b(0x1bc)]={'clientip':_0x56bb38,'timestamp':new Date()['getTime'](),'expiry':_0x497a4d},_0x497a4d!='reject'?(await tgBot[_0x15a11b(0x14e)](_0x3d1e3e[_0x15a11b(0x22c)]['id'],_0x15a11b(0x260),{'parse_mode':_0x15a11b(0x26a)})[_0x15a11b(0x1ad)](_0x17ecd1=>{telegramError(_0x17ecd1);}),io['to'](_0x3b1ca3)[_0x15a11b(0x1e6)](_0x15a11b(0x248),{'access':{'allow':![],'reason':_0x15a11b(0x259),'token':null}})):(await tgBot[_0x15a11b(0x14e)](_0x3d1e3e[_0x15a11b(0x22c)]['id'],_0x15a11b(0x177))[_0x15a11b(0x1ad)](_0x52a957=>{telegramError(_0x52a957);}),io['to'](_0x3b1ca3)[_0x15a11b(0x1e6)](_0x15a11b(0x248),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));}),tgBot[_0x308473(0x1d6)](_0x308473(0x1f5));}));}function _0x5711(_0x3aa78d,_0x2b6a9a){const _0x1fffe3=_0x573d();return _0x5711=function(_0x4a1a46,_0x2df7c1){_0x4a1a46=_0x4a1a46-0x115;let _0x573d78=_0x1fffe3[_0x4a1a46];return _0x573d78;},_0x5711(_0x3aa78d,_0x2b6a9a);}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x34a469=_0x3208b0;return dbConfig['get'](_0x34a469(0x180))[_0x34a469(0x15e)](_0x34a469(0x13e))['filter']({'status':'enabled'})[_0x34a469(0x133)]()||[];}function getDisabledBots(){const _0x562c6c=_0x3208b0;return dbConfig[_0x562c6c(0x1fb)](_0x562c6c(0x180))[_0x562c6c(0x15e)](_0x562c6c(0x13e))[_0x562c6c(0x1be)]({'status':_0x562c6c(0x1bd)})[_0x562c6c(0x133)]()||[];}function getBotsWithMode(){const _0x4e8f93=_0x3208b0,_0x3d875b=dbConfig['get'](_0x4e8f93(0x180))['sortBy']('botID')[_0x4e8f93(0x133)]()||[];return _0x3d875b[_0x4e8f93(0x1cf)](_0x20b05d=>{const _0x4c7b97=_0x4e8f93,_0x3d293f=configpath+'bot-'+_0x20b05d[_0x4c7b97(0x13e)]+_0x4c7b97(0x192),_0x1fdfd3=fs['existsSync'](_0x3d293f);if(_0x1fdfd3){const _0x41f759=fs[_0x4c7b97(0x178)](_0x3d293f);try{const _0x152c82=JSON['parse'](_0x41f759),_0xe3eeb8=_0x152c82?_0x152c82[_0x4c7b97(0x12d)][0x0][_0x4c7b97(0x15d)]:![];_0x20b05d[_0x4c7b97(0x265)]=_0xe3eeb8?'auto':_0x4c7b97(0x11e);}catch(_0x143faf){_0x20b05d[_0x4c7b97(0x265)]=_0x4c7b97(0x11e);}}else _0x20b05d[_0x4c7b97(0x265)]=_0x4c7b97(0x11e);}),_0x3d875b;}function getSettings(){const _0x278ffe=_0x3208b0;return dbSettings[_0x278ffe(0x1fb)](_0x278ffe(0x19b))['value']()||{'timeshift':0x0};}function getSecure(){const _0x425a99=_0x3208b0;return dbSecure[_0x425a99(0x1fb)](_0x425a99(0x24c))['value']()||{};}function getBlacklist(){const _0x823d4=_0x3208b0;return dbSecure[_0x823d4(0x1fb)](_0x823d4(0x13c))[_0x823d4(0x133)]()||[];}function broadcastToBots(_0x1b895e,_0x1cfdee){config['forEach'](_0x39b0c8=>{const _0x5ca16a=_0x5711;if(_0x39b0c8[_0x5ca16a(0x248)]==_0x5ca16a(0x1c9)&&_0x39b0c8['live']==_0x5ca16a(0x23c)){if(pid[_0x39b0c8['botID']])pid[_0x39b0c8[_0x5ca16a(0x13e)]][_0x5ca16a(0x224)]({[_0x1b895e]:_0x1cfdee});}});}function storeSettings(_0x4c0788,_0x3b0520=![]){const _0x5261ae=_0x3208b0;_0x4c0788={...settings,..._0x4c0788};if(_0x3b0520&&_0x4c0788[_0x5261ae(0x19f)]!=_0x5261ae(0x14b)&&_0x4c0788[_0x5261ae(0x19f)]!=''){const _0x58db0f=crypt['decrypt'](secure['privateKey'],_0x4c0788[_0x5261ae(0x19f)])[_0x5261ae(0x236)][_0x5261ae(0x16f)]('@')[0x0],_0x5ca87c=bcrypt[_0x5261ae(0x220)](_0x58db0f,saltRounds);_0x4c0788={..._0x4c0788,'bbPassword':_0x5ca87c};}if(_0x3b0520&&_0x4c0788[_0x5261ae(0x1d9)]!=_0x5261ae(0x14b)&&_0x4c0788['telegramToken']!=''){const _0x2ee934=crypt[_0x5261ae(0x120)](secure[_0x5261ae(0x25f)],_0x4c0788[_0x5261ae(0x1d9)])['message'][_0x5261ae(0x16f)]('@')[0x0];_0x4c0788={..._0x4c0788,'telegramToken':_0x2ee934};}const _0x3350e7=_0x4c0788[_0x5261ae(0x1d9)]!=_0x5261ae(0x14b)&&_0x4c0788[_0x5261ae(0x1d9)]!=settings[_0x5261ae(0x1d9)]||_0x4c0788[_0x5261ae(0x183)]!=settings[_0x5261ae(0x183)],_0x30402c=_0x4c0788[_0x5261ae(0x1d9)]==''||_0x4c0788[_0x5261ae(0x183)]=='';if(_0x3350e7)_0x4c0788[_0x5261ae(0x1b4)]=_0x5261ae(0x227);for(const [_0xb1125e,_0x125364]of Object[_0x5261ae(0x1da)](_0x4c0788)){if(_0xb1125e=='telegramToken'&&_0x125364==_0x5261ae(0x14b)){_0x4c0788[_0x5261ae(0x1d9)]=settings[_0x5261ae(0x1d9)];continue;};if(_0xb1125e==_0x5261ae(0x19f)&&_0x125364=='************'){_0x4c0788['bbPassword']=settings['bbPassword'];continue;};dbSettings[_0x5261ae(0x11c)]('settings.'+_0xb1125e,_0x125364)[_0x5261ae(0x13b)]();}settings=_0x4c0788,io['to'](_0x5261ae(0x241))['emit'](_0x5261ae(0x19b),cleanSettings()),broadcastToBots('timeshift',settings['timeshift']);if(_0x3350e7&&!_0x30402c)initTelegram();if(_0x3350e7&&_0x30402c)disableTelegram();getAllClients()[_0x5261ae(0x1cf)](_0x78075d=>{const _0x23d6cc=_0x5261ae;getSocket(_0x78075d['id'])[_0x23d6cc(0x1e6)](_0x23d6cc(0x248),{'access':{'allow':![],'reason':_0x23d6cc(0x259),'token':null}});});}function updateSetting(_0xb5052a,_0x4d60cc){const _0x550e52=_0x3208b0;dbSettings['set'](_0x550e52(0x216)+_0xb5052a,_0x4d60cc)[_0x550e52(0x13b)](),settings=getSettings(),io['to'](_0x550e52(0x241))[_0x550e52(0x1e6)](_0x550e52(0x19b),cleanSettings());}function _0x573d(){const _0x239a3c=['conn','temporary\x20access\x20rejected','-config.json','bot-','temporaryAccessAllowed','124gwNuME','lowdb/adapters/FileSync','add-bot','::ffff:127.0.0.1','reject','username','settings','express','ipv6','10107qDXJMm','bbPassword','Unauthorized\x20attempt\x20to\x20log\x20out','error\x20while\x20deleting\x20config\x20files:\x20','data','headers','access','/:bot','50334wuWHGJ','127.0.0.1','Unauthorized\x20login\x20attempt\x20(timeout)','get-logs','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','disabled\x20Bot\x20','then','catch','UA-192771731-1','handshake','delete-bot','hex','isValid','map','telegramEvents','/off\x20-\x20stop\x20bot(s)\x0a','version.json','enabled\x20Bot\x20','reason','placeOrder','toggleBotMode','hasOwnProperty','telegram2FaApproval','disabled','filter','storeConfiguration','show','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','-performance.json','getMinutes','name','telegramEnabled','Balance\x20Bot','readdirSync','store-headless','enabled','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','::1','getMonth','/:bot/performance','new-disabled','forEach','No\x20bots\x20running\x20right\x20now','update-bb','sockets','</b>\x20?','config/','date-fns','removeListener','2FA\x20login\x20token\x20generated','hybrid-crypto-js','telegramToken','entries','\x20|\x20','lowdb','slice','expiry','existsSync','-events.json','store-settings','restarting\x20Bot\x20','includes','Invalid\x20IP\x20address','page','emit','\x20to\x20','/:bot/history','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','version','once','clientip','Notifications\x20disabled\x0a','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','/help\x20-\x20show\x20available\x20commands\x0a','parse','remoteAddress','kill','host','callback_query','updatebotmanager','stopped','argv','\x20>\x20','Notifications\x20enabled\x0a','get','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','bcryptjs','default','bbUsername','find','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','generateKeyPairAsync','remove','\x20mode','login\x20token\x20generated','bot.js','80lrlUOR','stopPolling','removeAllListeners','telegramIpApproval','/status\x20-\x20show\x20bot(s)\x20status\x0a','RSA','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','allow','node-telegram-bot-api','error','isIPv4MappedAddress','cloneDeep','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','function','settings.','telegramChatId','auto','toIPv4MappedAddress','access\x20timeout','logged\x20out','/on\x20-\x20start\x20bot(s)\x0a','toggle-bot-mode','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','hashSync','\x20minutes','fork','timestamp','send','inherit','args','all','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Alerts','invalid\x20credentials','sign','chat','Password\x20reset\x20rejected','Invalid\x20Telegram\x20token','new','toString','assign','cancelLoading','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','All\x20bots\x20running\x20right\x20now','/disable\x20-\x20disable\x20notifications\x0a','message','30atQbxj','use','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','15564SYOQNS','pidRefreshToken','running','path','jsonwebtoken','starting\x20bot\x20|\x20Bot\x20','Token\x20blacklisted','botmanager','/:bot/configuration','password','Invalid\x20authentication\x20token\x20(1)','token','static','from','status','exit','notification','1000','secure','isDirectory','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','f2aRequired','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','ipaddr.js','bb-settings.json','2682757WxZTAv','2FA','event','uuid','botname','padStart','reload','live','match','logout','getSeconds','yes','privateKey','Login\x20accepted','orders','deleteHistoryAlerts','getStartingBalances','index.html','mode','5\x20min','secret','(((.+)+)+)+$','login\x20required','HTML','constructor','search','encryptedUuid','2FA\x20required','/names\x20-\x20show\x20bot\x20names\x0a','Password\x20has\x20been\x20reset\x20to:\x20','Unauthorized\x20attempt\x20to\x20update\x20settings','publicKey','set','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','manual','answerCallbackQuery','decrypt','getHours','build2','Access\x20enabled\x20for\x20','ipc','max','onText','randomFillSync','All','-results.json','apiKey','starting\x20new\x20bot\x20|\x20Bot\x20','emitHistory','bot','backup/','randomBytes','Notifications\x20disabled','success','cancel-loading','value','kind','getPortfolio','toIPv4Address','bb/','-----------------------------------------------------------------------------------','order','Unauthorized\x20attempt\x20to\x20get\x20portfolio','write','blacklist','started','botID','18850zBekno','3000','Bot\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','timeshift','sendFile','telegram','whitelistEnabled','listen','getTime','bb-secure.json','log','************','loginRequired','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','sendMessage','unlinkSync','get-starting-balances','polling_error','copyFileSync','whitelist','port','Temporary\x20access\x20rejected','alerts','pidExpireLogin','length','Notifications\x20types:\x20','You\x20can\x20use\x20the\x20following\x20commands:\x0a','temporary\x20access\x20timeout','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','headless','sortBy','404\x20Not\x20Found','1GQGzln','getDate','Allow\x20login\x20from\x20IP\x20address\x20<b>','7900403AVHSyR','/:bot/support','No\x20authentication\x20token','All\x20bots','/restart\x20-\x20restart\x20bot(s)\x0a','type','push','\x20only\x0a','login','User\x20has\x20been\x20validated','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','split','connected','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','getFullYear','get-portfolio','join','35OmNGYK','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','Login\x20rejected','readFileSync','test','showname','147789SfQMSU','Unauthorized\x20attempt\x20to\x20update\x20bot','createServer','Ok,\x20will\x20send\x20order\x20notifications\x20only','stop','bots','initclient','1925518nLSoul','telegramUsername','build','writeFileSync','https://hodlerhacks.com','disconnect','temporary\x20token\x20generated','Notifications\x20enabled','defaults','user','clients','getUTCHours','Ok,\x20will\x20send\x20alert\x20notifications\x20only','server'];_0x573d=function(){return _0x239a3c;};return _0x573d();}function storeSecure(_0x18f6a7){const _0x5e294f=_0x3208b0;dbSecure[_0x5e294f(0x1fb)](_0x5e294f(0x24c))[_0x5e294f(0x169)](_0x18f6a7)[_0x5e294f(0x13b)](),secure=_0x18f6a7;}function addBlacklist(_0x5837fa){const _0x636766=_0x3208b0;cleanBlacklist();let _0x3b271d;devices[_0x5837fa][_0x636766(0x20a)]?_0x3b271d=Math[_0x636766(0x125)](devices[_0x5837fa][_0x636766(0x20a)][_0x636766(0x1de)],loginExpiry):_0x3b271d=loginExpiry,dbSecure['get'](_0x636766(0x13c))[_0x636766(0x169)]({'expiry':new Date()[_0x636766(0x148)]()+_0x3b271d*0x3c*0x3e8,'token':devices[_0x5837fa]['access'][_0x636766(0x245)]})['write'](),blacklist=dbSecure['get'](_0x636766(0x13c))[_0x636766(0x133)]();}function cleanBlacklist(){const _0x18a9c4=_0x3208b0;let _0x59aa63=dbSecure[_0x18a9c4(0x1fb)]('blacklist')[_0x18a9c4(0x213)]()[_0x18a9c4(0x133)](),_0x58c2a4=new Date()['getTime']();_0x59aa63[_0x18a9c4(0x1cf)](_0x5e4938=>{const _0x524058=_0x18a9c4;_0x5e4938[_0x524058(0x1de)]<_0x58c2a4&&dbSecure[_0x524058(0x1fb)](_0x524058(0x13c))['remove']({'expiry':_0x5e4938['expiry']})[_0x524058(0x13b)]();});}function initStates(){let _0x503abd=getConfiguration();_0x503abd['forEach'](_0x2c57f2=>{_0x2c57f2['live']='stopped';}),storeConfiguration(_0x503abd);}function onKeys(){const _0x431342=new RSA();return new Promise(_0x582122=>{const _0x5cc29f=_0x5711;_0x431342[_0x5cc29f(0x202)]()[_0x5cc29f(0x1ac)](_0x3963f9=>{_0x582122(_0x3963f9);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x25482c=_0x3208b0;let _0xe8a6a=getConfiguration(),_0x26b87c=![];_0xe8a6a[_0x25482c(0x1cf)](_0x3bf28d=>{const _0x5c3bde=_0x25482c;if(_0x3bf28d[_0x5c3bde(0x248)]=='running')_0x3bf28d[_0x5c3bde(0x248)]=_0x5c3bde(0x1c9),_0x26b87c=!![];else _0x3bf28d[_0x5c3bde(0x248)]=='stopped'&&(_0x3bf28d[_0x5c3bde(0x248)]=_0x5c3bde(0x1bd),_0x26b87c=!![]);});if(_0x26b87c)storeConfiguration(_0xe8a6a);let _0x2318c0=getSecure();if(!_0x2318c0[_0x25482c(0x1bb)](_0x25482c(0x267))){let _0x121975=await generateKeys();_0x2318c0[_0x25482c(0x11b)]=_0x121975['publicKey'],_0x2318c0[_0x25482c(0x25f)]=_0x121975['privateKey'],_0x2318c0['secret']=crypto[_0x25482c(0x12f)](0x20)[_0x25482c(0x230)](_0x25482c(0x1b1));;storeSecure(_0x2318c0);}let _0x16b066=getSettings();_0x26b87c=![];!_0x16b066[_0x25482c(0x1bb)]('loginRequired')&&(_0x16b066['loginRequired']=![],_0x16b066[_0x25482c(0x1ff)]='',_0x16b066[_0x25482c(0x19f)]='',_0x16b066[_0x25482c(0x24f)]=![],_0x26b87c=!![]);!_0x16b066[_0x25482c(0x1bb)](_0x25482c(0x146))&&(_0x16b066[_0x25482c(0x146)]=![],_0x16b066[_0x25482c(0x153)]=[],_0x16b066[_0x25482c(0x194)]=![],_0x26b87c=!![]);if(!_0x16b066['hasOwnProperty']('telegramEnabled')){if(_0x16b066[_0x25482c(0x217)])_0x16b066[_0x25482c(0x1c5)]=!![];else _0x16b066[_0x25482c(0x1c5)]=![];_0x26b87c=!![];}if(_0x26b87c)storeSettings(_0x16b066);}function storeConfiguration(_0x5ccc58){const _0x8dc687=_0x3208b0;dbConfig[_0x8dc687(0x1fb)](_0x8dc687(0x180))['remove']()[_0x8dc687(0x13b)](),_0x5ccc58[_0x8dc687(0x1cf)](_0x593ca0=>{const _0x31acec=_0x8dc687;delete _0x593ca0[_0x31acec(0x265)];}),dbConfig[_0x8dc687(0x1fb)](_0x8dc687(0x180))['push'](..._0x5ccc58)[_0x8dc687(0x13b)](),config=_0x5ccc58;}function resetPassword(){const _0x77967d=_0x3208b0;tgBot&&settings[_0x77967d(0x217)]&&(tgBot['removeListener'](_0x77967d(0x1f5)),tgBot[_0x77967d(0x14e)](settings['telegramChatId'],_0x77967d(0x21e),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':'yes','callback_data':_0x77967d(0x25e)},{'text':'no','callback_data':'no'}]]}})[_0x77967d(0x1ad)](_0x324a5b=>{telegramError(_0x324a5b);}),tgBot['on']('callback_query',async _0x3d2dba=>{const _0x5db77b=_0x77967d,_0x492b8a=_0x3d2dba[_0x5db77b(0x1a2)],_0x2fb9eb=_0x3d2dba['message'];tgBot[_0x5db77b(0x11f)](_0x3d2dba['id'])['then'](async()=>{const _0x8f4ff2=_0x5db77b;if(_0x492b8a!='no'){const _0x2a7397=0xf,_0x30bd37=_0x8f4ff2(0x1fc),_0x5b51a2=Array[_0x8f4ff2(0x247)](crypto[_0x8f4ff2(0x127)](new Uint32Array(_0x2a7397)))[_0x8f4ff2(0x1b3)](_0x2e3f67=>_0x30bd37[_0x2e3f67%_0x30bd37[_0x8f4ff2(0x158)]])[_0x8f4ff2(0x174)](''),_0x1cff38=bcrypt[_0x8f4ff2(0x220)](_0x5b51a2,saltRounds);storeSettings({'bbPassword':_0x1cff38}),await tgBot[_0x8f4ff2(0x14e)](_0x2fb9eb[_0x8f4ff2(0x22c)]['id'],_0x8f4ff2(0x119)+_0x5b51a2,{'parse_mode':_0x8f4ff2(0x26a)})['catch'](_0x55bbf5=>{telegramError(_0x55bbf5);});}else await tgBot[_0x8f4ff2(0x14e)](_0x2fb9eb[_0x8f4ff2(0x22c)]['id'],_0x8f4ff2(0x22d))[_0x8f4ff2(0x1ad)](_0x3af4f1=>{telegramError(_0x3af4f1);});}),tgBot[_0x5db77b(0x1d6)]('callback_query');}));}function logging(_0x2997bf){const _0x3ed478=_0x3208b0;console[_0x3ed478(0x14a)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20'+_0x2997bf);if(tgBot&&settings[_0x3ed478(0x217)]&&settings['telegramEvents']!='orders')tgBot[_0x3ed478(0x14e)](settings[_0x3ed478(0x217)],'Bot\x20Mgr\x20>\x20'+_0x2997bf)['catch'](_0x1b7409=>{telegramError(_0x1b7409);});}function getServerTime(){const _0x3e975a=_0x3208b0,_0x334a7c=new Date();return _0x334a7c['getFullYear']()+'/'+(_0x334a7c['getMonth']()+0x1)['toString']()[_0x3e975a(0x258)](0x2,'0')+'/'+_0x334a7c[_0x3e975a(0x161)]()['toString']()[_0x3e975a(0x258)](0x2,'0')+'\x20'+_0x334a7c[_0x3e975a(0x121)]()[_0x3e975a(0x230)]()[_0x3e975a(0x258)](0x2,'0')+':'+_0x334a7c[_0x3e975a(0x1c3)]()['toString']()[_0x3e975a(0x258)](0x2,'0')+':'+_0x334a7c[_0x3e975a(0x25d)]()[_0x3e975a(0x230)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x4caaff=_0x3208b0,_0x1eebb4=shiftedTime();return _0x1eebb4[_0x4caaff(0x172)]()+'/'+(_0x1eebb4[_0x4caaff(0x1cc)]()+0x1)[_0x4caaff(0x230)]()[_0x4caaff(0x258)](0x2,'0')+'/'+_0x1eebb4[_0x4caaff(0x161)]()[_0x4caaff(0x230)]()[_0x4caaff(0x258)](0x2,'0')+'\x20'+_0x1eebb4['getHours']()[_0x4caaff(0x230)]()[_0x4caaff(0x258)](0x2,'0')+':'+_0x1eebb4[_0x4caaff(0x1c3)]()[_0x4caaff(0x230)]()['padStart'](0x2,'0')+':'+_0x1eebb4[_0x4caaff(0x25d)]()[_0x4caaff(0x230)]()[_0x4caaff(0x258)](0x2,'0');}function shiftedTime(){const _0x34d77d=_0x3208b0,_0x6162b6=new Date();let _0x3592ae=_0x6162b6;if(settings['timeshift']&&settings['timeshift']!==0x0)_0x3592ae=fns['add'](_0x6162b6,{'hours':settings[_0x34d77d(0x143)]});return _0x3592ae;}function startScheduler(){const _0x304a5d=_0x3208b0;let _0x98b4c5=new Date()[_0x304a5d(0x18d)]();_0x98b4c5==0x1&&backupConfigFiles();_0x98b4c5==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x3e1d84=_0x3208b0;fs[_0x3e1d84(0x1c7)](configpath,{'withFileTypes':!![]})[_0x3e1d84(0x1cf)](_0x593fd4=>{const _0x37dddd=_0x3e1d84;if(!_0x593fd4[_0x37dddd(0x24d)]())fs[_0x37dddd(0x152)](configpath+_0x593fd4[_0x37dddd(0x1c4)],configbackuppath+_0x593fd4[_0x37dddd(0x1c4)]);});}function triggerAnalytics(){const _0x4b4e84=_0x3208b0;analytics[_0x4b4e84(0x1e5)]({'title':'Balance\x20Bot\x20Server','href':_0x4b4e84(0x186),'path':'/v'+serverversion});}function validateCredentials(_0x45a22a,_0x425ce0){const _0x5e1057=_0x3208b0;if(_0x45a22a[_0x5e1057(0x19a)]==settings[_0x5e1057(0x1ff)]&&bcrypt['compareSync'](_0x45a22a[_0x5e1057(0x243)],settings[_0x5e1057(0x19f)])){if(settings[_0x5e1057(0x24f)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x5b6d61=generateLoginToken(_0x425ce0);return{'allow':!![],'reason':_0x5e1057(0x205),'token':_0x5b6d61};}}else return{'allow':![],'reason':_0x5e1057(0x22a),'token':null};}function refreshToken(_0x32a166){const _0x560078=_0x3208b0,_0x2cb8fa=generateLoginToken(_0x32a166);return{'allow':!![],'reason':_0x560078(0x205),'token':_0x2cb8fa};}function validateAccess(_0x1fda07,_0x51f660){const _0x3472ce=_0x3208b0;let _0x344034=devices[_0x51f660]['ip'],_0x41be73;const _0x12e86a=_0x53dfd2=>{const _0x51e33a=_0x5711;if(settings[_0x51e33a(0x14c)]){if(settings[_0x51e33a(0x24f)]){if(telegram2FaApproved(_0x51f660)){const _0x5c643c=generateLoginToken(_0x51f660);return{'allow':!![],'reason':_0x51e33a(0x1d7),'token':_0x5c643c};}else return{'allow':![],'reason':_0x51e33a(0x269),'token':null};}else return _0x41be73=validToken(_0x53dfd2,_0x51f660),_0x41be73[_0x51e33a(0x1bb)](_0x51e33a(0x131))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x53dfd2}:{'allow':![],'reason':_0x51e33a(0x269),'token':null};}else return{'allow':!![],'reason':'login\x20not\x20required','token':null};};if(settings[_0x3472ce(0x146)]){let _0x5c7cb1=[...settings[_0x3472ce(0x153)],_0x3472ce(0x1cb),_0x3472ce(0x198),_0x3472ce(0x1a7)];if(_0x5c7cb1[_0x3472ce(0x1e3)](_0x344034))return _0x12e86a(_0x1fda07);else{_0x41be73=validToken(_0x1fda07,_0x51f660);if(_0x41be73['hasOwnProperty'](_0x3472ce(0x131)))return _0x12e86a(_0x1fda07);else{if(telegramIpApproved(_0x51f660)){const _0x473d4a=generateToken(_0x51f660);return _0x41be73=_0x12e86a(_0x1fda07),_0x41be73['allow']?{'allow':!![],'reason':_0x3472ce(0x188),'token':_0x473d4a}:_0x41be73;}else return settings[_0x3472ce(0x194)]?{'allow':![],'reason':_0x3472ce(0x117),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x12e86a(_0x1fda07);}function timelyDecrypt(_0x36ba77,_0xcc6ab6=!![]){const _0x473220=_0x3208b0;if(_0x36ba77)try{const _0x2dfe7c=crypt[_0x473220(0x120)](secure[_0x473220(0x25f)],_0x36ba77)[_0x473220(0x236)],_0x394013=_0x2dfe7c[_0x473220(0x16f)]('@')[0x0],_0x2847b3=_0x2dfe7c[_0x473220(0x16f)]('@')[0x1],_0xeea969=new Date()[_0x473220(0x148)]();if(_0xcc6ab6){if(_0xeea969-_0x2847b3<maxSecretAge*0x3e8)return _0x394013;else return![];}else return _0x394013;}catch(_0x7fc9d1){return![];}else return![];}const validToken=(_0x5d32d1,_0x4d9d17)=>{const _0x3e1283=_0x3208b0,_0x23c892=devices[_0x4d9d17]['ip'];if(!_0x5d32d1)return{'error':_0x3e1283(0x165)};for(let _0x29845c of blacklist){if(_0x29845c[_0x3e1283(0x245)]==_0x5d32d1)return{'error':_0x3e1283(0x240)};}let _0x494835;try{_0x494835=jwt['verify'](_0x5d32d1,secure[_0x3e1283(0x267)]+_0x4d9d17);}catch{return{'error':_0x3e1283(0x244)};}if(!_0x494835[_0x3e1283(0x1bb)]('clientip')&&!_0x494835[_0x3e1283(0x1bb)](_0x3e1283(0x19a))||!_0x494835[_0x3e1283(0x1bb)]('exp'))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x494835['hasOwnProperty'](_0x3e1283(0x19a))&&_0x494835['hasOwnProperty'](_0x3e1283(0x1ec))){const {clientip:_0x1eb655}=_0x494835;return _0x23c892==_0x1eb655?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3e1283(0x1e4)};}else{if(_0x494835[_0x3e1283(0x1bb)](_0x3e1283(0x19a))&&_0x494835['hasOwnProperty'](_0x3e1283(0x1ec))){const {username:_0x57f0c5,clientip:_0x5e352a}=_0x494835;return settings[_0x3e1283(0x1ff)]==_0x57f0c5&&_0x23c892==_0x5e352a?{'success':_0x3e1283(0x16c)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xc8760f=>{const _0x4b5bcb=_0x3208b0;if(_0xc8760f){const _0xefabca=devices[_0xc8760f]['ip'];return jwt[_0x4b5bcb(0x22b)]({'username':settings[_0x4b5bcb(0x1ff)],'clientip':_0xefabca},secure[_0x4b5bcb(0x267)]+_0xc8760f,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x36eb0a=>{const _0xbb537b=_0x3208b0;if(_0x36eb0a){const _0x14c584=devices[_0x36eb0a]['ip'];return jwt[_0xbb537b(0x22b)]({'clientip':_0x14c584},secure[_0xbb537b(0x267)]+_0x36eb0a,{'expiresIn':devices[_0x36eb0a][_0xbb537b(0x20a)][_0xbb537b(0x1de)]*0x3c});}else return![];},telegramIpApproved=_0x9d4dde=>{const _0x5e76c4=_0x3208b0;let _0x39e683=![];return devices[_0x9d4dde][_0x5e76c4(0x20a)]&&devices[_0x9d4dde][_0x5e76c4(0x20a)][_0x5e76c4(0x1de)]!='reject'&&(_0x39e683=devices[_0x9d4dde][_0x5e76c4(0x20a)]['clientip']==devices[_0x9d4dde]['ip']&&new Date()[_0x5e76c4(0x148)]()-devices[_0x9d4dde][_0x5e76c4(0x20a)][_0x5e76c4(0x223)]<devices[_0x9d4dde]['telegramIpApproval'][_0x5e76c4(0x1de)]*0x3c*0x3e8),_0x39e683;},telegram2FaApproved=_0x292c74=>{const _0x3f31c9=_0x3208b0;let _0x3ddb01=![];return devices[_0x292c74][_0x3f31c9(0x1bc)]&&devices[_0x292c74]['telegram2FaApproval'][_0x3f31c9(0x1de)]!=_0x3f31c9(0x199)&&(_0x3ddb01=devices[_0x292c74]['telegram2FaApproval'][_0x3f31c9(0x1ec)]==devices[_0x292c74]['ip']&&new Date()[_0x3f31c9(0x148)]()-devices[_0x292c74][_0x3f31c9(0x1bc)][_0x3f31c9(0x223)]<devices[_0x292c74][_0x3f31c9(0x1bc)][_0x3f31c9(0x1de)]*0x3c*0x3e8),_0x3ddb01;},normalizeIP=_0x422051=>{const _0x3f5251=_0x3208b0;let _0x58087d=null,_0x3b37aa=null;if(ipaddr[_0x3f5251(0x1b2)](_0x422051)){const _0x2317b6=ipaddr['parse'](_0x422051);_0x2317b6[_0x3f5251(0x134)]()===_0x3f5251(0x19d)?(_0x2317b6[_0x3f5251(0x212)]()&&(_0x58087d=_0x2317b6[_0x3f5251(0x136)]()[_0x3f5251(0x230)]()),_0x3b37aa=_0x2317b6[_0x3f5251(0x230)]()):(_0x58087d=_0x2317b6[_0x3f5251(0x230)](),_0x3b37aa=_0x2317b6[_0x3f5251(0x219)]()[_0x3f5251(0x230)]());}return{'show':_0x58087d?_0x58087d:_0x3b37aa,'store':_0x3b37aa};};