const _0x49a76d=_0x2842;(function(_0x13152c,_0x27c6af){const _0xe0bf9=_0x2842,_0x1458c2=_0x13152c();while(!![]){try{const _0x2e2dfe=parseInt(_0xe0bf9(0x190))/0x1*(-parseInt(_0xe0bf9(0x160))/0x2)+parseInt(_0xe0bf9(0x166))/0x3+-parseInt(_0xe0bf9(0x219))/0x4*(parseInt(_0xe0bf9(0xb1))/0x5)+-parseInt(_0xe0bf9(0x162))/0x6+parseInt(_0xe0bf9(0xcf))/0x7+parseInt(_0xe0bf9(0x213))/0x8+parseInt(_0xe0bf9(0xb6))/0x9;if(_0x2e2dfe===_0x27c6af)break;else _0x1458c2['push'](_0x1458c2['shift']());}catch(_0x25a1e1){_0x1458c2['push'](_0x1458c2['shift']());}}}(_0x136f,0x5b4ec));function _0x2842(_0x220eb2,_0x232e20){const _0x58d1ba=_0x136f();return _0x2842=function(_0x27b815,_0x14e054){_0x27b815=_0x27b815-0xb0;let _0x136f8c=_0x58d1ba[_0x27b815];return _0x136f8c;},_0x2842(_0x220eb2,_0x232e20);}const _0x14e054=function(){let _0x96d240=!![];return function(_0x4ebc48,_0x30c608){const _0x988edb=_0x96d240?function(){const _0xd0d52a=_0x2842;if(_0x30c608){const _0x4b934a=_0x30c608[_0xd0d52a(0x149)](_0x4ebc48,arguments);return _0x30c608=null,_0x4b934a;}}:function(){};return _0x96d240=![],_0x988edb;};}(),_0x27b815=_0x14e054(this,function(){const _0x3cb496=_0x2842;return _0x27b815[_0x3cb496(0xf7)]()[_0x3cb496(0xd6)](_0x3cb496(0x217))[_0x3cb496(0xf7)]()['constructor'](_0x27b815)[_0x3cb496(0xd6)](_0x3cb496(0x217));});_0x27b815();'use strict';process[_0x49a76d(0x1d1)][_0x49a76d(0x182)]=0x1;const childProcess=require('child_process'),fs=require('fs'),fns=require(_0x49a76d(0x15b)),low=require('lowdb'),FileSync=require('lowdb/adapters/FileSync'),path=require('path'),crypto=require('crypto'),Crypt=require(_0x49a76d(0x1e0))[_0x49a76d(0x214)],RSA=require(_0x49a76d(0x1e0))['RSA'],bcrypt=require(_0x49a76d(0x188)),jwt=require(_0x49a76d(0x17f)),{Analytics}=require(_0x49a76d(0x13c)),googleAnalyticsV3Plugin=require(_0x49a76d(0xf5))[_0x49a76d(0x1cd)],ipaddr=require(_0x49a76d(0x19f)),argv=require('yargs/yargs')(process['argv'][_0x49a76d(0xc2)](0x2))[_0x49a76d(0x1ec)],uuidRandom=require('uuid-random'),Mixpanel=require(_0x49a76d(0x1ff)),axios=require(_0x49a76d(0x21b)),{GraphQLClient,gql}=require('graphql-request'),PORT=argv[_0x49a76d(0x1fe)]||_0x49a76d(0x155),pattern=/^[0-9]{2,4}$/;!pattern['test'](PORT)&&(console[_0x49a76d(0x1fb)](_0x49a76d(0x12e)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1));const HOST=argv['host']||null,userID=argv[_0x49a76d(0xbe)]||'';let bbpath='bb/',bbpath2='';const botfile=_0x49a76d(0x107),configfile='bb-config.json',settingsfile=_0x49a76d(0x1fd),securefile=_0x49a76d(0x11a);let validInstallation=!![];!fs[_0x49a76d(0x113)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x49a76d(0x20a)),configpath=userID?bbpath+_0x49a76d(0xcc)+userID+'/':bbpath+_0x49a76d(0xcc),configbackuppath=configpath+'backup/';!fs[_0x49a76d(0x113)](configpath)&&fs[_0x49a76d(0x14b)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0x49a76d(0x14b)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x49a76d(0xff)]({'bots':[]})[_0x49a76d(0xed)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x49a76d(0xff)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':'0.0.0'}})[_0x49a76d(0xed)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x49a76d(0xff)]({'secure':{},'blacklist':[]})[_0x49a76d(0xed)]();let crypt=new Crypt({'md':_0x49a76d(0x175),'rsaStandard':_0x49a76d(0x1c0)});const saltRounds=0xa,mixpanel=Mixpanel[_0x49a76d(0xd1)](_0x49a76d(0x215),{'host':_0x49a76d(0x183)}),analytics=Analytics({'app':_0x49a76d(0x19a),'plugins':[googleAnalyticsV3Plugin({'trackingId':'UA-192771731-1'})]});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x49a76d(0xf1))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x49a76d(0x1e8)),app=express(),http=require(_0x49a76d(0xfe))[_0x49a76d(0x16f)](app);app['use'](express['static'](path[_0x49a76d(0xba)](__dirname,bbpath2,_0x49a76d(0x222)))),app[_0x49a76d(0x220)](express[_0x49a76d(0x19d)](path[_0x49a76d(0xba)](__dirname,bbpath2,_0x49a76d(0xb0)))),app[_0x49a76d(0x18b)]('/',function(_0x5dcb24,_0x5e6838){const _0x14d82f=_0x49a76d;_0x5e6838[_0x14d82f(0x1bc)](path[_0x14d82f(0xba)](__dirname,bbpath2,'build2',_0x14d82f(0x1f7)));}),app['get'](_0x49a76d(0x216),function(_0x5e4e9a,_0x272463){const _0x1ba854=_0x49a76d;_0x272463[_0x1ba854(0x1bc)](path[_0x1ba854(0xba)](__dirname,bbpath2,_0x1ba854(0xb0),_0x1ba854(0x1f7)));}),app[_0x49a76d(0x18b)](_0x49a76d(0x161),(_0x4bc134,_0x1ed00f)=>{const _0x29a602=_0x49a76d;_0x1ed00f[_0x29a602(0x1bc)](path['join'](__dirname,bbpath2,'build',_0x29a602(0x1f7)));}),app['get'](_0x49a76d(0x1c5),(_0x4fb4d2,_0x233fdb)=>{const _0x54ddf1=_0x49a76d;_0x233fdb[_0x54ddf1(0x1bc)](path[_0x54ddf1(0xba)](__dirname,bbpath2,_0x54ddf1(0xb0),'index.html'));}),app[_0x49a76d(0x18b)](_0x49a76d(0x208),(_0x23f904,_0x1ecabc)=>{const _0x45ad1e=_0x49a76d;_0x1ecabc[_0x45ad1e(0x1bc)](path[_0x45ad1e(0xba)](__dirname,bbpath2,_0x45ad1e(0xb0),_0x45ad1e(0x1f7)));}),app[_0x49a76d(0x18b)](_0x49a76d(0x176),(_0x49627b,_0x1e94b9)=>{const _0x2c5790=_0x49a76d;_0x1e94b9[_0x2c5790(0x1bc)](path['join'](__dirname,bbpath2,_0x2c5790(0xb0),_0x2c5790(0x1f7)));}),app[_0x49a76d(0x18b)]('/:bot/configuration',(_0x331b0e,_0xd64eb)=>{const _0x1b9fe2=_0x49a76d;_0xd64eb[_0x1b9fe2(0x1bc)](path['join'](__dirname,bbpath2,_0x1b9fe2(0xb0),'index.html'));}),app[_0x49a76d(0x18b)](_0x49a76d(0x1b7),(_0xf9c33d,_0x23a303)=>{const _0x3a4627=_0x49a76d;_0x23a303[_0x3a4627(0x1bc)](path[_0x3a4627(0xba)](__dirname,bbpath2,_0x3a4627(0xb0),_0x3a4627(0x1f7)));});if(HOST)http[_0x49a76d(0x221)](PORT,HOST);else http[_0x49a76d(0x221)](PORT);const io=require('socket.io')(http,{}),TelegramBot=require(_0x49a76d(0x138));let tgBot;if(settings[_0x49a76d(0x164)]&&settings[_0x49a76d(0x164)]!=''&&settings[_0x49a76d(0x108)]&&settings[_0x49a76d(0x108)]!='')initTelegram();init();async function init(){await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),startServer(),startSocket(),startScheduler(),triggerAnalytics(!![]),getMessages();}function startServer(){const _0x464d4a=_0x49a76d;console[_0x464d4a(0x1fb)](''),console['log'](_0x464d4a(0x102)),logging(_0x464d4a(0xf2)+PORT),console[_0x464d4a(0x1fb)]('-----------------------------------------------------------------------------------');if(config[_0x464d4a(0x128)]!=0x0)config[_0x464d4a(0xe0)](_0x16ba2f=>{const _0x3d8dc7=_0x464d4a;if(_0x16ba2f[_0x3d8dc7(0x159)]=='enabled'||_0x16ba2f[_0x3d8dc7(0x159)]==_0x3d8dc7(0x15d))logging(_0x3d8dc7(0xcb)+_0x16ba2f[_0x3d8dc7(0x1c7)]+_0x3d8dc7(0x1f2)+_0x16ba2f[_0x3d8dc7(0x187)]),startBot([_0x16ba2f[_0x3d8dc7(0x1c7)],userID],{'cwd':bbpath},function(_0x195744){if(_0x195744)logging(_0x195744);});else(_0x16ba2f['status']==_0x3d8dc7(0x118)||_0x16ba2f[_0x3d8dc7(0x159)]=='new-disabled')&&logging(_0x3d8dc7(0xd7)+_0x16ba2f[_0x3d8dc7(0x1c7)]+'\x20|\x20'+_0x16ba2f[_0x3d8dc7(0x187)]);});else!newBot&&console['log'](_0x464d4a(0x1ca));if(newBot)addBot();console[_0x464d4a(0x1fb)](_0x464d4a(0x102)),console[_0x464d4a(0x1fb)]('');}function startSocket(){io['on']('connection',_0x13efb3=>{const _0x2d2b07=_0x2842;let _0x5c4db7,_0x48f7ec,_0x54fa4c,_0x5250ab,_0x3f9ac5;const _0x24da3c=_0x13efb3[_0x2d2b07(0x13f)]['headers'][_0x2d2b07(0x1e4)];_0x48f7ec=_0x24da3c['match'](/bot[0-9]{3}/);if(_0x48f7ec)_0x54fa4c=_0x48f7ec[0x0]['match'](/[0-9]{3}/);if(_0x54fa4c)_0x5c4db7=_0x54fa4c[0x0];else _0x5c4db7=_0x2d2b07(0xd4);const _0x2b4d87=_0x13efb3[_0x2d2b07(0x13f)][_0x2d2b07(0xf6)]['encryptedUuid'];if(!_0x2b4d87)_0x13efb3[_0x2d2b07(0xb9)](_0x2d2b07(0x159),{'publicKey':secure[_0x2d2b07(0x137)]});else{_0x5250ab=timelyDecrypt(_0x2b4d87,![]);if(!_0x5250ab)_0x13efb3[_0x2d2b07(0xb9)](_0x2d2b07(0x159),{'publicKey':secure[_0x2d2b07(0x137)]});else{_0x3f9ac5=normalizeIP(_0x13efb3[_0x2d2b07(0x1ea)]['remoteAddress'])['store'];if(!devices[_0x5250ab])devices[_0x5250ab]={'uuid':_0x5250ab,'access':{'token':null}};devices[_0x5250ab]['ip']=_0x3f9ac5;const _0x45934f=addClient(_0x13efb3['id'],_0x5250ab,_0x5c4db7);setAccess(_0x45934f),emitMessages(),_0x13efb3['on'](_0x2d2b07(0x1a2),_0x5eeb1c=>{const _0x3d07b7=_0x2d2b07,_0x2719c2=timelyDecrypt(_0x5eeb1c[_0x3d07b7(0x18c)]);if(_0x2719c2){_0x5eeb1c={'username':_0x5eeb1c[_0x3d07b7(0x15c)],'password':_0x2719c2},devices[_0x5250ab]['access']=validateCredentials(_0x5eeb1c,_0x5250ab);if(devices[_0x5250ab]['access'][_0x3d07b7(0x110)]==![]&&devices[_0x5250ab][_0x3d07b7(0xc7)]['reason']==_0x3d07b7(0x101))_0x13efb3[_0x3d07b7(0xb9)](_0x3d07b7(0x159),{'access':devices[_0x5250ab][_0x3d07b7(0xc7)]}),loginAccess2FA(_0x5250ab,_0x3f9ac5);else{if(devices[_0x5250ab][_0x3d07b7(0xc7)]['allow']==![]&&devices[_0x5250ab]['access'][_0x3d07b7(0x1ee)]==_0x3d07b7(0xda))_0x13efb3[_0x3d07b7(0xb9)](_0x3d07b7(0x159),{'access':devices[_0x5250ab]['access']});else devices[_0x5250ab][_0x3d07b7(0xc7)][_0x3d07b7(0x110)]&&devices[_0x5250ab][_0x3d07b7(0xc7)][_0x3d07b7(0x1ee)]==_0x3d07b7(0x195)&&(getClientsWithUuid(_0x5250ab)[_0x3d07b7(0xe0)](_0x2a973d=>{setAccess(_0x2a973d);}),setTokenRefresh(_0x5250ab),setSessionTimeout(_0x3d07b7(0x1a2),_0x5250ab));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x13efb3['on'](_0x2d2b07(0x1b2),()=>{resetPassword();}),_0x13efb3['on'](_0x2d2b07(0x1e2),_0x3257da=>{removeClient(_0x13efb3['id']);});}}});}function initClient(_0x45f883){const _0x1d2ac5=_0x49a76d;if(_0x45f883!=_0x1d2ac5(0xd4)&&config[_0x1d2ac5(0x206)]!=''){if(pid[_0x45f883])pid[_0x45f883][_0x1d2ac5(0x196)]({'function':_0x1d2ac5(0x203),'args':null});}}function getSocket(_0x516861){const _0x5b6783=_0x49a76d;return io[_0x5b6783(0x181)][_0x5b6783(0x181)]['get'](_0x516861);}function setAccess(_0x59e9fc){const _0x2e0193=_0x49a76d,_0x4363b5=getSocket(_0x59e9fc['id']),_0x5ac65f=_0x59e9fc['uuid'],_0x473753=_0x59e9fc[_0x2e0193(0x193)];devices[_0x5ac65f][_0x2e0193(0xc7)]=validateAccess(devices[_0x5ac65f][_0x2e0193(0xc7)][_0x2e0193(0xd8)],_0x5ac65f),_0x4363b5['join'](_0x5ac65f);if(devices[_0x5ac65f][_0x2e0193(0xc7)][_0x2e0193(0x110)]){_0x4363b5[_0x2e0193(0xba)](_0x473753);if(_0x473753==_0x2e0193(0xd4))initializeSocketBotManager(_0x4363b5);else initializeSocketBot(_0x4363b5);initClient(_0x473753);}devices[_0x5ac65f]['access']['token']&&devices[_0x5ac65f]['access'][_0x2e0193(0x1ee)]==_0x2e0193(0x111)&&setSessionTimeout(_0x2e0193(0x200),_0x5ac65f),devices[_0x5ac65f]['access'][_0x2e0193(0xd8)]&&devices[_0x5ac65f][_0x2e0193(0xc7)][_0x2e0193(0x1ee)]==_0x2e0193(0x199)&&setSessionTimeout(_0x2e0193(0x1a2),_0x5ac65f),_0x4363b5[_0x2e0193(0xb9)](_0x2e0193(0x159),{'status':_0x59e9fc[_0x2e0193(0x115)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x5ac65f][_0x2e0193(0xc7)],'externalip':devices[_0x5ac65f]['ip'],'publicKey':secure[_0x2e0193(0x137)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x5ac65f][_0x2e0193(0xc7)]['allow']==![]&&devices[_0x5ac65f][_0x2e0193(0xc7)][_0x2e0193(0x1ee)]==_0x2e0193(0x1e5)&&temporaryAccess2FA(_0x5ac65f,devices[_0x5ac65f]['ip']);}function setSessionTimeout(_0x43a8cb,_0x4e8966){const _0x4143a7=_0x49a76d;let _0x24cc60;if(_0x43a8cb=='login')_0x24cc60=loginExpiry*0x3c*0x3e8;else _0x24cc60=devices[_0x4e8966][_0x4143a7(0x10d)][_0x4143a7(0x131)]*0x3c*0x3e8-(new Date()[_0x4143a7(0x1c1)]()-devices[_0x4e8966][_0x4143a7(0x10d)][_0x4143a7(0xce)]);if(devices[_0x4e8966]['pidExpireLogin'])clearTimeout(devices[_0x4e8966]['pidExpireLogin']);devices[_0x4e8966][_0x4143a7(0xb8)]=setTimeout(()=>{const _0x5d5f6e=_0x4143a7;if(devices[_0x4e8966][_0x5d5f6e(0x1ba)])clearTimeout(devices[_0x4e8966][_0x5d5f6e(0x1ba)]);removeSocketListeners(_0x4e8966),addBlacklist(_0x4e8966),devices[_0x4e8966][_0x5d5f6e(0x10d)]=null,devices[_0x4e8966]['telegram2FaApproval']=null,devices[_0x4e8966][_0x5d5f6e(0xc7)]['token']=null,devices[_0x4e8966]['access']=validateAccess(devices[_0x4e8966][_0x5d5f6e(0xc7)][_0x5d5f6e(0xd8)],_0x4e8966),!(devices[_0x4e8966]['access']['allow']&&devices[_0x4e8966][_0x5d5f6e(0xc7)][_0x5d5f6e(0x1ee)]==_0x5d5f6e(0x18a))&&(_0x43a8cb==_0x5d5f6e(0x1a2)?io['to'](_0x4e8966)[_0x5d5f6e(0xb9)](_0x5d5f6e(0x159),{'access':{'allow':![],'reason':_0x5d5f6e(0x148),'token':null}}):io['to'](_0x4e8966)[_0x5d5f6e(0xb9)]('status',{'access':{'allow':![],'reason':_0x5d5f6e(0xd9),'token':null}})),devices[_0x4e8966][_0x5d5f6e(0xc7)][_0x5d5f6e(0xd8)]=null;},_0x24cc60);}function setTokenRefresh(_0x3a410d){const _0x204671=_0x49a76d;if(devices[_0x3a410d][_0x204671(0x1ba)])clearTimeout(devices[_0x3a410d][_0x204671(0x1ba)]);devices[_0x3a410d][_0x204671(0x1ba)]=setTimeout(()=>{const _0x325cba=_0x204671;getClientsWithUuid(_0x3a410d)[_0x325cba(0x128)]!=0x0?(devices[_0x3a410d][_0x325cba(0xc7)]=refreshToken(_0x3a410d),io['to'](_0x3a410d)[_0x325cba(0xb9)](_0x325cba(0x159),{'status':_0x325cba(0x210),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x3a410d]['access'],'externalip':devices[_0x3a410d]['ip'],'publicKey':secure[_0x325cba(0x137)],'validInstallation':validInstallation}),setTokenRefresh(_0x3a410d)):clearTimeout(devices[_0x3a410d][_0x325cba(0x1ba)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x1897a7){const _0x43274d=_0x49a76d,_0x56db33=getClient(_0x1897a7['id'])['uuid'];_0x1897a7['emit']('bots',config),_0x1897a7[_0x43274d(0xb9)](_0x43274d(0x136),cleanSettings()),_0x1897a7['on'](_0x43274d(0x14c),_0x22118e=>{const _0x6793e1=_0x43274d;if(validateAccess(_0x22118e,_0x56db33)['allow'])addBot();else logging(_0x6793e1(0xc0));}),_0x1897a7['on']('update-bot',(_0x33b8ef,_0x1eb4d2)=>{const _0x58e6d3=_0x43274d;if(validateAccess(_0x1eb4d2,_0x56db33)[_0x58e6d3(0x110)])toggleBot(_0x33b8ef['botID'],_0x33b8ef[_0x58e6d3(0x159)],_0x33b8ef[_0x58e6d3(0x1d3)]);else logging('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x1897a7['on'](_0x43274d(0x126),(_0x26a060,_0x4991f2)=>{const _0x3b72c1=_0x43274d;if(validateAccess(_0x4991f2,_0x56db33)['allow'])toggleBotMode(_0x26a060);else logging(_0x3b72c1(0xfd));}),_0x1897a7['on'](_0x43274d(0x186),(_0x27eeee,_0x13d135)=>{const _0x378850=_0x43274d;if(validateAccess(_0x13d135,_0x56db33)['allow'])deleteBot(_0x27eeee);else logging(_0x378850(0x201));}),_0x1897a7['on']('store-settings',(_0x2e9bd9,_0xfcba95)=>{const _0xe48c62=_0x43274d;if(validateAccess(_0xfcba95,_0x56db33)[_0xe48c62(0x110)])storeSettings(_0x2e9bd9,!![]);else logging(_0xe48c62(0x1f6));}),_0x1897a7['on'](_0x43274d(0x212),_0x33b958=>{const _0x5cfe28=_0x43274d;if(validateAccess(_0x33b958,_0x56db33)[_0x5cfe28(0x110)])updateBB();else logging(_0x5cfe28(0xc1));}),_0x1897a7['on'](_0x43274d(0xb5),_0x5c9cea=>{const _0x35a50f=_0x43274d;if(validateAccess(_0x5c9cea,_0x56db33)[_0x35a50f(0x110)])getMessages();else logging(_0x35a50f(0x158));}),_0x1897a7['on'](_0x43274d(0x1db),(_0x842168,_0x304e46)=>{const _0x41a846=_0x43274d;if(validateAccess(_0x304e46,_0x56db33)[_0x41a846(0x110)])confirmMessage(_0x842168);else logging('Unauthorized\x20attempt\x20to\x20confirm\x20message');}),_0x1897a7['on'](_0x43274d(0x1f5),_0x342e31=>{const _0x22708c=_0x43274d;if(validateAccess(_0x342e31,_0x56db33)['allow']){if(devices[_0x56db33][_0x22708c(0x1ba)])clearTimeout(devices[_0x56db33]['pidRefreshToken']);if(devices[_0x56db33][_0x22708c(0xb8)])clearTimeout(devices[_0x56db33]['pidExpireLogin']);removeSocketListeners(getClient(_0x1897a7['id'])[_0x22708c(0x174)]),addBlacklist(_0x56db33),devices[_0x56db33][_0x22708c(0x10d)]=null,devices[_0x56db33][_0x22708c(0x1af)]=null,devices[_0x56db33]['access'][_0x22708c(0xd8)]=null,io['to'](getClient(_0x1897a7['id'])['uuid'])['emit'](_0x22708c(0x159),{'access':{'allow':![],'reason':_0x22708c(0x100),'token':null}});}else logging(_0x22708c(0x191));});}function initializeSocketBot(_0x2f3426){const _0x2e38c0=_0x49a76d,_0x4546ef=getClient(_0x2f3426['id'])[_0x2e38c0(0x193)],_0x203ce8=getClient(_0x2f3426['id'])[_0x2e38c0(0x174)];_0x2f3426['on']('get-logs',(_0x45a6da,_0x2c9f01)=>{const _0x2f7e8b=_0x2e38c0;if(validateAccess(_0x2c9f01,_0x203ce8)[_0x2f7e8b(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x2f7e8b(0x196)]({'function':_0x2f7e8b(0x157),'args':_0x45a6da});}else logging(_0x2f7e8b(0x1d0));}),_0x2f3426['on'](_0x2e38c0(0x11b),(_0x53e8bc,_0x28f788)=>{const _0x46cc6c=_0x2e38c0;if(validateAccess(_0x28f788,_0x203ce8)[_0x46cc6c(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef]['send']({'function':_0x46cc6c(0xdb),'args':_0x53e8bc});}else logging(_0x46cc6c(0xb2));}),_0x2f3426['on'](_0x2e38c0(0x1a4),(_0xa19d4e,_0x1c91b3)=>{const _0x3fdc9c=_0x2e38c0;if(validateAccess(_0x1c91b3,_0x203ce8)[_0x3fdc9c(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x3fdc9c(0x196)]({'function':'getPortfolio','args':_0xa19d4e});}else logging(_0x3fdc9c(0x1ac));}),_0x2f3426['on']('store-configuration',(_0x5877a0,_0x3811c9)=>{const _0x21cb6c=_0x2e38c0;if(validateAccess(_0x3811c9,_0x203ce8)[_0x21cb6c(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x21cb6c(0x196)]({'function':'storeConfiguration','args':_0x5877a0});}else logging(_0x21cb6c(0x134));}),_0x2f3426['on'](_0x2e38c0(0x202),(_0x2136b3,_0x5a0d7c)=>{const _0xd966c4=_0x2e38c0;if(validateAccess(_0x5a0d7c,_0x203ce8)[_0xd966c4(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0xd966c4(0x196)]({'function':'storeHeadless','args':_0x2136b3});}else logging(_0xd966c4(0x18d));}),_0x2f3426['on']('get-starting-balances',_0x83464b=>{const _0x121bac=_0x2e38c0;if(validateAccess(_0x83464b,_0x203ce8)[_0x121bac(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x121bac(0x196)]({'function':_0x121bac(0xc6),'args':null});}else logging(_0x121bac(0x1aa));}),_0x2f3426['on'](_0x2e38c0(0xdc),(_0x179d44,_0x9ce61e)=>{const _0x1f15e8=_0x2e38c0;if(validateAccess(_0x9ce61e,_0x203ce8)[_0x1f15e8(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x1f15e8(0x196)]({'function':'placeOrder','args':_0x179d44});}else logging(_0x1f15e8(0x17b));}),_0x2f3426['on']('cancel-loading',_0x4868f3=>{const _0x401fe2=_0x2e38c0;if(validateAccess(_0x4868f3,_0x203ce8)[_0x401fe2(0x110)]){if(pid[_0x4546ef])pid[_0x4546ef][_0x401fe2(0x196)]({'function':_0x401fe2(0x10f),'args':null});}else logging(_0x401fe2(0xd2));}),_0x2f3426['on'](_0x2e38c0(0x212),_0x4ac299=>{const _0x276aef=_0x2e38c0;if(validateAccess(_0x4ac299,_0x203ce8)['allow'])updateBB();else logging(_0x276aef(0xc1));}),_0x2f3426['on']('get-messages',_0x2ad365=>{if(validateAccess(_0x2ad365,_0x203ce8)['allow'])getMessages();else logging('Unauthorized\x20attempt\x20to\x20get\x20messages');}),_0x2f3426['on']('confirm-message',(_0x3807e1,_0x83652d)=>{const _0x5bd912=_0x2e38c0;if(validateAccess(_0x83652d,_0x203ce8)[_0x5bd912(0x110)])confirmMessage(_0x3807e1);else logging(_0x5bd912(0x172));}),_0x2f3426['on'](_0x2e38c0(0x1f5),_0x55b9a5=>{const _0x10d81b=_0x2e38c0;if(validateAccess(_0x55b9a5,_0x203ce8)[_0x10d81b(0x110)]){if(devices[_0x203ce8][_0x10d81b(0x1ba)])clearTimeout(devices[_0x203ce8][_0x10d81b(0x1ba)]);if(devices[_0x203ce8][_0x10d81b(0xb8)])clearTimeout(devices[_0x203ce8][_0x10d81b(0xb8)]);removeSocketListeners(getClient(_0x2f3426['id'])[_0x10d81b(0x174)]),addBlacklist(_0x203ce8),devices[_0x203ce8]['telegramIpApproval']=null,devices[_0x203ce8][_0x10d81b(0x1af)]=null,devices[_0x203ce8]['access'][_0x10d81b(0xd8)]=null,io['to'](getClient(_0x2f3426['id'])[_0x10d81b(0x174)])[_0x10d81b(0xb9)](_0x10d81b(0x159),{'access':{'allow':![],'reason':_0x10d81b(0x100),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function removeSocketListeners(_0xb3247e){const _0x3f37df=_0x49a76d;getClientsWithUuid(_0xb3247e)[_0x3f37df(0xe0)](_0x204516=>{getSocket(_0x204516['id'])['removeAllListeners']();});}function cleanSettings(){const _0x177cd8=_0x49a76d;let _0x197bcf=settings;return settings[_0x177cd8(0x164)]&&settings[_0x177cd8(0x164)]!=''&&(_0x197bcf={..._0x197bcf,'telegramToken':_0x177cd8(0x147)}),settings[_0x177cd8(0x14e)]&&settings[_0x177cd8(0x14e)]!=''&&(_0x197bcf={..._0x197bcf,'bbPassword':_0x177cd8(0x147)}),_0x197bcf;}function updateBB(){const _0x3045f3=_0x49a76d;installingUpdate=!![],config[_0x3045f3(0xe0)](_0x43cba6=>{const _0x17db09=_0x3045f3;restartBot(_0x43cba6[_0x17db09(0x1c7)]);}),process[_0x3045f3(0x196)]({'update':!![]},_0x2b2b91=>{});}function startBot(_0x3b568f,_0xcdffd,_0x3df84c){const _0x580c13=_0x49a76d;let _0x2d3042=![];const _0x57395b=_0x3b568f[0x0];_0xcdffd={..._0xcdffd,'stdio':[_0x580c13(0x197),_0x580c13(0x197),_0x580c13(0x197),_0x580c13(0x1f8)]},pid[_0x57395b]=childProcess[_0x580c13(0xde)](botfile,_0x3b568f,_0xcdffd),pid[_0x57395b]['on'](_0x580c13(0x1b6),_0x5dd8f8=>{const _0x6b0a29=_0x580c13;switch(Object['keys'](_0x5dd8f8)[0x0]){case _0x6b0a29(0x187):updateBotName(_0x57395b,_0x5dd8f8['botname']);break;case _0x6b0a29(0x1d8):updateBotManager();break;case'status':updateStatus(_0x57395b,_0x5dd8f8[_0x6b0a29(0x159)]);break;case _0x6b0a29(0x1d3):updateLive(_0x57395b,_0x5dd8f8[_0x6b0a29(0x1d3)]);break;case _0x6b0a29(0xc4):updateLive(_0x57395b,_0x5dd8f8[_0x6b0a29(0xc4)]),io['to'](_0x57395b)[_0x6b0a29(0xb9)](_0x6b0a29(0x159),{'access':{'allow':![],'reason':_0x6b0a29(0x109),'token':null}});break;case _0x6b0a29(0x1d5):_0x5dd8f8['stop']==_0x6b0a29(0x1b5)&&restartBot(_0x57395b);_0x5dd8f8['stop']==_0x6b0a29(0x211)&&toggleBot(_0x57395b,_0x6b0a29(0x118),'stopped');break;case'telegram':sendTelegram(_0x57395b,_0x5dd8f8[_0x6b0a29(0x141)]);break;case _0x6b0a29(0x20f):sendTelegramMsg(_0x5dd8f8[_0x6b0a29(0x20f)]);break;case _0x6b0a29(0x150):io['to'](_0x57395b)[_0x6b0a29(0xb9)](_0x5dd8f8['function'],_0x5dd8f8[_0x6b0a29(0x14f)]);break;}}),pid[_0x57395b]['on'](_0x580c13(0x129),function(_0x16ed74){if(_0x2d3042)return;_0x2d3042=!![],_0x3df84c(_0x16ed74);}),pid[_0x57395b]['on']('exit',function(_0x3077ec){const _0x25f3da=_0x580c13;if(installingUpdate)return;if(_0x2d3042)return;_0x2d3042=!![],_0x3df84c(null);const _0x2e2b62=dbConfig[_0x25f3da(0x18b)](_0x25f3da(0x1b9))[_0x25f3da(0x143)]({'botID':_0x57395b})['value']();_0x2e2b62&&(_0x2e2b62[_0x25f3da(0x159)]==_0x25f3da(0x165)||_0x2e2b62[_0x25f3da(0x159)]==_0x25f3da(0x15d))&&(updateLive(_0x57395b,'stopped'),logging('restarting\x20Bot\x20'+_0x57395b),startBot([_0x57395b,userID],{'cwd':bbpath},function(_0x5a4430){if(_0x5a4430)logging(_0x5a4430);}));});}function stopBot(_0x1caf3){const _0x3d2efb=_0x49a76d;getClientsWithBotID(_0x1caf3)['forEach'](_0x3528ac=>{getSocket(_0x3528ac['id'])['disconnect'](!![]),removeClient(_0x3528ac['id']);}),pid[_0x1caf3]&&(pid[_0x1caf3][_0x3d2efb(0x211)](),pid[_0x1caf3]=null);}function restartBot(_0x28390c){const _0x1b82c6=_0x49a76d;if(pid[_0x28390c])pid[_0x28390c][_0x1b82c6(0x211)]();}function addBot(){const _0x4f7047=_0x49a76d;let _0x2e3cd3;for(let _0x1846db=0x1;_0x1846db<0x3e9;_0x1846db++){_0x2e3cd3=_0x1846db[_0x4f7047(0xf7)]()[_0x4f7047(0xeb)](0x3,'0');let _0x5d45fc=config[_0x4f7047(0x143)](_0x3da721=>_0x3da721[_0x4f7047(0x1c7)]==_0x2e3cd3);if(!_0x5d45fc)break;}if(_0x2e3cd3===_0x4f7047(0x1fa)){logging(_0x4f7047(0x1e9));return;}logging(_0x4f7047(0x1a8)+_0x2e3cd3),dbConfig[_0x4f7047(0x18b)](_0x4f7047(0x1b9))[_0x4f7047(0x1f1)]({'botID':_0x2e3cd3,'botname':_0x4f7047(0xd0)+_0x2e3cd3,'status':_0x4f7047(0x15d),'live':''})['write'](),startBot([_0x2e3cd3,userID],{'cwd':bbpath},function(_0x5e51f0){if(_0x5e51f0)logging(_0x5e51f0);}),config=getConfiguration(),io['to'](_0x4f7047(0xd4))['emit'](_0x4f7047(0x1b9),config);}function deleteBot(_0x3239dc){const _0x3fec8c=_0x49a76d;getClientsWithBotID(_0x3239dc)[_0x3fec8c(0xe0)](_0x1997a2=>{const _0x1fa7a7=_0x3fec8c;getSocket(_0x1997a2['id'])[_0x1fa7a7(0x1e2)](!![]),removeClient(_0x1997a2['id']);}),dbConfig[_0x3fec8c(0x18b)]('bots')['remove']({'botID':_0x3239dc})['write'](),logging(_0x3fec8c(0x1d9)+_0x3239dc),stopBot(_0x3239dc);try{fs[_0x3fec8c(0x140)](path[_0x3fec8c(0xba)](configpath,_0x3fec8c(0x19e)+_0x3239dc+_0x3fec8c(0x10e))),fs['unlinkSync'](path['join'](configpath,_0x3fec8c(0x19e)+_0x3239dc+'-events.json')),fs[_0x3fec8c(0x140)](path[_0x3fec8c(0xba)](configpath,_0x3fec8c(0x19e)+_0x3239dc+_0x3fec8c(0x13a))),fs[_0x3fec8c(0x140)](path[_0x3fec8c(0xba)](configpath,_0x3fec8c(0x19e)+_0x3239dc+_0x3fec8c(0x178)));}catch(_0x58af34){if(_0x58af34)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x58af34);}config=getConfiguration(),io['to'](_0x3fec8c(0xd4))[_0x3fec8c(0xb9)](_0x3fec8c(0x1b9),config);}function toggleBot(_0x2a76f3,_0x2adbe7,_0x52ad2a){const _0x35794c=_0x49a76d;dbConfig[_0x35794c(0x18b)](_0x35794c(0x1b9))[_0x35794c(0x143)]({'botID':_0x2a76f3})[_0x35794c(0x1a5)]({'status':_0x2adbe7})['assign']({'live':_0x52ad2a})[_0x35794c(0xed)]();if(_0x2adbe7=='enabled'||_0x2adbe7==_0x35794c(0x15d))logging(_0x35794c(0x10a)+_0x2a76f3),startBot([_0x2a76f3,userID],{'cwd':bbpath},function(_0x3fd5ac){if(_0x3fd5ac)logging(_0x3fd5ac);});else(_0x2adbe7==_0x35794c(0x118)||_0x2adbe7==_0x35794c(0x170))&&(logging('disabled\x20Bot\x20'+_0x2a76f3),stopBot(_0x2a76f3));config=getConfiguration(),io['to']('botmanager')[_0x35794c(0xb9)](_0x35794c(0x1b9),config);}function toggleStatus(_0x475d14){const _0x55eb56=_0x49a76d;let _0x9b1adf=dbConfig[_0x55eb56(0x18b)]('bots')[_0x55eb56(0x143)]({'botID':_0x475d14})[_0x55eb56(0x103)](),_0x2b9c76;if(_0x9b1adf[_0x55eb56(0x159)]===_0x55eb56(0x165))_0x2b9c76=_0x55eb56(0x118);else{if(_0x9b1adf[_0x55eb56(0x159)]==='new')_0x2b9c76=_0x55eb56(0x170);else{if(_0x9b1adf['status']===_0x55eb56(0x170))_0x2b9c76='new';else{if(_0x9b1adf[_0x55eb56(0x159)]===_0x55eb56(0x118))_0x2b9c76=_0x55eb56(0x165);}}}return _0x2b9c76;}function updateStatus(_0x24bb1c,_0x4829fd){const _0x5527dd=_0x49a76d;dbConfig[_0x5527dd(0x18b)](_0x5527dd(0x1b9))['find']({'botID':_0x24bb1c})[_0x5527dd(0x1a5)]({'status':_0x4829fd})[_0x5527dd(0xed)](),config=getConfiguration(),io['to'](_0x5527dd(0xd4))[_0x5527dd(0xb9)]('bots',config);}function updateLive(_0x115565,_0x3b259a){const _0x45dea4=_0x49a76d;dbConfig[_0x45dea4(0x18b)](_0x45dea4(0x1b9))['find']({'botID':_0x115565})['assign']({'live':_0x3b259a})[_0x45dea4(0xed)](),config=getConfiguration(),io['to'](_0x45dea4(0xd4))[_0x45dea4(0xb9)](_0x45dea4(0x1b9),config);}function updateBotName(_0x5bac0a,_0x5e693f){const _0x3b3192=_0x49a76d;dbConfig['get']('bots')[_0x3b3192(0x143)]({'botID':_0x5bac0a})['assign']({'botname':_0x5e693f})['write'](),config=getConfiguration(),io['to'](_0x3b3192(0xd4))[_0x3b3192(0xb9)](_0x3b3192(0x1b9),config);}function updateBotManager(){const _0x5d02a1=_0x49a76d;config=getConfiguration(),io['to'](_0x5d02a1(0xd4))[_0x5d02a1(0xb9)]('bots',config);}function toggleBotMode(_0x221a40){const _0x47aa2c=_0x49a76d;if(pid[_0x221a40])pid[_0x221a40][_0x47aa2c(0x196)]({'function':_0x47aa2c(0xdd),'args':null});else{const _0x455839=configpath+_0x47aa2c(0x19e)+_0x221a40+_0x47aa2c(0x10e),_0x1b83e6=fs['readFileSync'](_0x455839),_0x36d255=JSON[_0x47aa2c(0xec)](_0x1b83e6),_0x32f032=_0x36d255[_0x47aa2c(0x193)][0x0][_0x47aa2c(0xcd)];_0x36d255[_0x47aa2c(0x193)][0x0][_0x47aa2c(0xcd)]=!_0x32f032;const _0x2f34c4=JSON['stringify'](_0x36d255,null,0x2);fs['writeFileSync'](_0x455839,_0x2f34c4),config=getConfiguration(),io['to'](_0x47aa2c(0xd4))['emit'](_0x47aa2c(0x1b9),config);}}function telegramError(_0x3d31d0){const _0x500212=_0x49a76d;console[_0x500212(0x1fb)](getTimeStamp()+_0x500212(0xe4));}function validateTelegram(_0x3e6962){const _0x2e10ca=_0x49a76d;if(_0x3e6962[_0x2e10ca(0x14a)][_0x2e10ca(0x15c)]!=settings[_0x2e10ca(0x108)]&&'@'+_0x3e6962['from'][_0x2e10ca(0x15c)]!=settings['telegramUsername'])return tgBot[_0x2e10ca(0x12c)](_0x3e6962[_0x2e10ca(0x16a)]['id'],_0x2e10ca(0x16c),{'parse_mode':_0x2e10ca(0xfb)})[_0x2e10ca(0xe1)](_0xe95c97=>{telegramError(_0xe95c97);}),![];return!![];}async function initTelegram(){const _0x1c1636=_0x49a76d;if(tgBot)tgBot[_0x1c1636(0x20d)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x1c1636(0x164)],{'polling':!![]});let _0x4dff82=_0x1c1636(0x1a3);_0x4dff82+='\x0a',_0x4dff82+=_0x1c1636(0x1ae),_0x4dff82+=_0x1c1636(0x1f9),_0x4dff82+=_0x1c1636(0x13b),_0x4dff82+=_0x1c1636(0x21d),_0x4dff82+=_0x1c1636(0x1e7),_0x4dff82+=_0x1c1636(0xd3),_0x4dff82+=_0x1c1636(0xe9),_0x4dff82+=_0x1c1636(0xf9),_0x4dff82+=_0x1c1636(0x17e),_0x4dff82+=_0x1c1636(0x1b4),_0x4dff82+=_0x1c1636(0xf4),_0x4dff82+=_0x1c1636(0x10c);let _0x5500f5='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x5500f5+='\x0a',_0x5500f5+=_0x4dff82,tgBot[_0x1c1636(0x133)](/\/start/,_0x330b2e=>{const _0x2d72a9=_0x1c1636;if(!validateTelegram(_0x330b2e))return;if(settings[_0x2d72a9(0xfc)]!=_0x330b2e[_0x2d72a9(0x16a)]['id'])updateSetting('telegramChatId',_0x330b2e[_0x2d72a9(0x16a)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x2d72a9(0x12c)](_0x330b2e[_0x2d72a9(0x16a)]['id'],_0x5500f5)[_0x2d72a9(0xe1)](_0x2af09c=>{telegramError(_0x2af09c);});}),tgBot[_0x1c1636(0x133)](/\/enable/,_0x21921c=>{const _0x2c5ca6=_0x1c1636;if(!validateTelegram(_0x21921c))return;if(settings['telegramChatId']!=_0x21921c[_0x2c5ca6(0x16a)]['id'])updateSetting('telegramChatId',_0x21921c[_0x2c5ca6(0x16a)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x21921c[_0x2c5ca6(0x16a)]['id'],_0x2c5ca6(0x1d4))[_0x2c5ca6(0xe1)](_0x346ab1=>{telegramError(_0x346ab1);});}),tgBot[_0x1c1636(0x133)](/\/config/,async _0x313356=>{const _0x4e1809=_0x1c1636;if(!validateTelegram(_0x313356))return;tgBot[_0x4e1809(0x184)]('callback_query'),tgBot[_0x4e1809(0x12c)](_0x313356['chat']['id'],_0x4e1809(0x12d),{'reply_markup':{'inline_keyboard':[[{'text':'Orders','callback_data':_0x4e1809(0x1b8)},{'text':_0x4e1809(0x21c),'callback_data':'alerts'},{'text':_0x4e1809(0x189),'callback_data':_0x4e1809(0x21f)}]]}})['catch'](_0x380200=>{telegramError(_0x380200);}),tgBot['on'](_0x4e1809(0x1bb),async _0x3b8da6=>{const _0x3ba5ec=_0x4e1809,_0x5aa97c=_0x3b8da6[_0x3ba5ec(0x151)],_0x1b6dfa=_0x3b8da6['message'];tgBot[_0x3ba5ec(0x19b)](_0x3b8da6['id'])[_0x3ba5ec(0x173)](async()=>{const _0x3c06c5=_0x3ba5ec;_0x5aa97c==_0x3c06c5(0x1b8)&&(updateSetting(_0x3c06c5(0x1ce),_0x3c06c5(0x1b8)),updateSetting(_0x3c06c5(0x146),!![]),await tgBot[_0x3c06c5(0x12c)](_0x1b6dfa[_0x3c06c5(0x16a)]['id'],_0x3c06c5(0x127))['catch'](_0x3b1eec=>{telegramError(_0x3b1eec);}));_0x5aa97c==_0x3c06c5(0x112)&&(updateSetting(_0x3c06c5(0x1ce),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x3c06c5(0x12c)](_0x1b6dfa['chat']['id'],_0x3c06c5(0x1bf))['catch'](_0x3ffd1f=>{telegramError(_0x3ffd1f);}));_0x5aa97c==_0x3c06c5(0x21f)&&(updateSetting(_0x3c06c5(0x1ce),_0x3c06c5(0x21f)),updateSetting(_0x3c06c5(0x146),!![]),await tgBot[_0x3c06c5(0x12c)](_0x1b6dfa['chat']['id'],_0x3c06c5(0x163))[_0x3c06c5(0xe1)](_0x177545=>{telegramError(_0x177545);}));if(!settings[_0x3c06c5(0xfc)])tgBot['sendMessage'](_0x1b6dfa[_0x3c06c5(0x16a)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x3c06c5(0xe1)](_0x27175d=>{telegramError(_0x27175d);});}),tgBot[_0x3ba5ec(0x184)]('callback_query');});}),tgBot[_0x1c1636(0x133)](/\/status/,_0x45617a=>{const _0x5eadf4=_0x1c1636;if(!validateTelegram(_0x45617a))return;const _0x551057=getBotsWithMode();let _0x937fc5='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x5eadf4(0xe0)](_0x19978e=>{const _0x328708=_0x5eadf4,_0x51f24c=_0x551057[_0x328708(0x143)](_0x2ac4a6=>_0x2ac4a6[_0x328708(0x1c7)]==_0x19978e['botID'])[_0x328708(0x1b3)];_0x937fc5+=_0x328708(0xd0)+_0x19978e['botID']+':\x20'+_0x19978e[_0x328708(0x159)]+_0x328708(0x1f2)+_0x51f24c+_0x328708(0x1f2)+_0x19978e['live']+'\x0a';}),_0x937fc5+='\x0a',_0x937fc5+=_0x5eadf4(0x132),_0x937fc5+=!settings[_0x5eadf4(0x146)]?_0x5eadf4(0x21a):_0x5eadf4(0x154),_0x937fc5+=settings[_0x5eadf4(0x146)]?settings[_0x5eadf4(0x1ce)]==_0x5eadf4(0x21f)?_0x5eadf4(0x105):_0x5eadf4(0x125)+settings[_0x5eadf4(0x1ce)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x45617a['chat']['id'],_0x937fc5,{'parse_mode':_0x5eadf4(0xfb)})[_0x5eadf4(0xe1)](_0x145fec=>{telegramError(_0x145fec);});}),tgBot['onText'](/\/restart/,_0x58fb99=>{const _0x4f8c8f=_0x1c1636;if(!validateTelegram(_0x58fb99))return;tgBot[_0x4f8c8f(0x184)](_0x4f8c8f(0x1bb));const _0xe90997=getEnabledBots();if(_0xe90997[_0x4f8c8f(0x128)]==0x0)tgBot[_0x4f8c8f(0x12c)](_0x58fb99['chat']['id'],'No\x20bots\x20running\x20right\x20now')[_0x4f8c8f(0xe1)](_0x48d56f=>{telegramError(_0x48d56f);});else{if(_0xe90997[_0x4f8c8f(0x128)]>0x1)_0xe90997[_0x4f8c8f(0x1f1)]({'botID':'all'});let _0x26366f=[],_0x470811=[];const _0x1a8695=_0xe90997[_0x4f8c8f(0x128)]%0x4==0x0||_0xe90997['length']%0x4==0x3||_0xe90997[_0x4f8c8f(0x128)]%0x3==0x1?0x4:0x3;let _0x3c76ba=0x0;_0xe90997[_0x4f8c8f(0xe0)]((_0x1f86f1,_0x3dc131)=>{const _0x37cd7d=_0x4f8c8f;if(_0x3dc131%_0x1a8695==0x0)_0x470811=[];_0x470811[_0x37cd7d(0x1f1)]({'text':_0x1f86f1[_0x37cd7d(0x1c7)]==_0x37cd7d(0x21f)?_0x37cd7d(0x1c8):_0x37cd7d(0xd0)+_0x1f86f1[_0x37cd7d(0x1c7)],'callback_data':_0x1f86f1[_0x37cd7d(0x1c7)]}),_0x3dc131%_0x1a8695==0x0&&(_0x26366f[_0x3c76ba]=_0x470811,_0x3c76ba++);}),tgBot['sendMessage'](_0x58fb99['chat']['id'],_0x4f8c8f(0x139),{'reply_markup':{'inline_keyboard':_0x26366f}})[_0x4f8c8f(0xe1)](_0x38ed60=>{telegramError(_0x38ed60);}),tgBot['on'](_0x4f8c8f(0x1bb),async _0x34217e=>{const _0x2fb178=_0x4f8c8f,_0x2b5ce8=_0x34217e[_0x2fb178(0x151)],_0x3dd9ed=_0x34217e['message'];tgBot[_0x2fb178(0x19b)](_0x34217e['id'])[_0x2fb178(0x173)](async()=>{const _0x29c86a=_0x2fb178;_0x2b5ce8=='all'?config[_0x29c86a(0xe0)](_0x5a4157=>{restartBot(_0x5a4157['botID']);}):restartBot(_0x2b5ce8);}),tgBot[_0x2fb178(0x184)](_0x2fb178(0x1bb));});}}),tgBot['onText'](/\/on/,_0x3ad92d=>{const _0x5812b2=_0x1c1636;if(!validateTelegram(_0x3ad92d))return;tgBot[_0x5812b2(0x184)]('callback_query');const _0xbe741c=getDisabledBots();if(_0xbe741c[_0x5812b2(0x128)]==0x0)tgBot[_0x5812b2(0x12c)](_0x3ad92d[_0x5812b2(0x16a)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x5812b2(0xe1)](_0x487aa6=>{telegramError(_0x487aa6);});else{if(_0xbe741c[_0x5812b2(0x128)]>0x1)_0xbe741c['push']({'botID':_0x5812b2(0x21f)});let _0x20f5a3=[],_0x3b8b77=[];const _0x47403f=_0xbe741c[_0x5812b2(0x128)]%0x4==0x0||_0xbe741c[_0x5812b2(0x128)]%0x4==0x3||_0xbe741c[_0x5812b2(0x128)]%0x3==0x1?0x4:0x3;let _0x436889=0x0;_0xbe741c[_0x5812b2(0xe0)]((_0x48b172,_0x131fe1)=>{const _0x1e4b43=_0x5812b2;if(_0x131fe1%_0x47403f==0x0)_0x3b8b77=[];_0x3b8b77['push']({'text':_0x48b172[_0x1e4b43(0x1c7)]==_0x1e4b43(0x21f)?_0x1e4b43(0x1c8):_0x1e4b43(0xd0)+_0x48b172[_0x1e4b43(0x1c7)],'callback_data':_0x48b172['botID']}),_0x131fe1%_0x47403f==0x0&&(_0x20f5a3[_0x436889]=_0x3b8b77,_0x436889++);}),tgBot[_0x5812b2(0x12c)](_0x3ad92d[_0x5812b2(0x16a)]['id'],_0x5812b2(0x17a),{'reply_markup':{'inline_keyboard':_0x20f5a3}})[_0x5812b2(0xe1)](_0x1ba797=>{telegramError(_0x1ba797);}),tgBot['on'](_0x5812b2(0x1bb),async _0x19de44=>{const _0x46af90=_0x5812b2,_0x1b93d8=_0x19de44[_0x46af90(0x151)],_0x470a8e=_0x19de44[_0x46af90(0x1b6)];tgBot[_0x46af90(0x19b)](_0x19de44['id'])[_0x46af90(0x173)](async()=>{const _0xdea4ff=_0x46af90;_0x1b93d8==_0xdea4ff(0x21f)?(tgBot[_0xdea4ff(0x12c)](_0x470a8e[_0xdea4ff(0x16a)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0xdea4ff(0xe1)](_0x5e6dd8=>{telegramError(_0x5e6dd8);}),_0xbe741c[_0xdea4ff(0xe0)](_0x1fe77d=>{const _0x185dab=_0xdea4ff;if(_0x1fe77d['botID']!=_0x185dab(0x21f))toggleBot(_0x1fe77d['botID'],toggleStatus(_0x1fe77d[_0x185dab(0x1c7)]),_0x185dab(0x180));})):(tgBot[_0xdea4ff(0x12c)](_0x470a8e[_0xdea4ff(0x16a)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x1b93d8)[_0xdea4ff(0xe1)](_0x9d1223=>{telegramError(_0x9d1223);}),toggleBot(_0x1b93d8,toggleStatus(_0x1b93d8),'stopped'));}),tgBot[_0x46af90(0x184)](_0x46af90(0x1bb));});}}),tgBot[_0x1c1636(0x133)](/\/off/,_0x23bc7e=>{const _0x14aa28=_0x1c1636;if(!validateTelegram(_0x23bc7e))return;tgBot[_0x14aa28(0x184)]('callback_query');const _0x9bb4fe=getEnabledBots();if(_0x9bb4fe[_0x14aa28(0x128)]==0x0)tgBot['sendMessage'](_0x23bc7e[_0x14aa28(0x16a)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x14aa28(0xe1)](_0x112903=>{telegramError(_0x112903);});else{if(_0x9bb4fe['length']>0x1)_0x9bb4fe[_0x14aa28(0x1f1)]({'botID':_0x14aa28(0x21f)});let _0x4b1d9d=[],_0x15c564=[];const _0x33f9ba=_0x9bb4fe['length']%0x4==0x0||_0x9bb4fe['length']%0x4==0x3||_0x9bb4fe[_0x14aa28(0x128)]%0x3==0x1?0x4:0x3;let _0x73385c=0x0;_0x9bb4fe[_0x14aa28(0xe0)]((_0x3d7818,_0x48e35d)=>{const _0x402055=_0x14aa28;if(_0x48e35d%_0x33f9ba==0x0)_0x15c564=[];_0x15c564[_0x402055(0x1f1)]({'text':_0x3d7818[_0x402055(0x1c7)]==_0x402055(0x21f)?_0x402055(0x1c8):_0x402055(0xd0)+_0x3d7818[_0x402055(0x1c7)],'callback_data':_0x3d7818[_0x402055(0x1c7)]}),_0x48e35d%_0x33f9ba==0x0&&(_0x4b1d9d[_0x73385c]=_0x15c564,_0x73385c++);}),tgBot[_0x14aa28(0x12c)](_0x23bc7e[_0x14aa28(0x16a)]['id'],_0x14aa28(0x12a),{'reply_markup':{'inline_keyboard':_0x4b1d9d}})[_0x14aa28(0xe1)](_0x54f652=>{telegramError(_0x54f652);}),tgBot['on'](_0x14aa28(0x1bb),async _0x19a7cb=>{const _0x37cffa=_0x14aa28,_0x55d88f=_0x19a7cb[_0x37cffa(0x151)],_0x23fe0c=_0x19a7cb[_0x37cffa(0x1b6)];tgBot[_0x37cffa(0x19b)](_0x19a7cb['id'])[_0x37cffa(0x173)](async()=>{const _0x5e8f7b=_0x37cffa;_0x55d88f==_0x5e8f7b(0x21f)?(tgBot[_0x5e8f7b(0x12c)](_0x23fe0c[_0x5e8f7b(0x16a)]['id'],_0x5e8f7b(0x10b))[_0x5e8f7b(0xe1)](_0x11c798=>{telegramError(_0x11c798);}),_0x9bb4fe[_0x5e8f7b(0xe0)](_0x5d7011=>{const _0x497f19=_0x5e8f7b;if(_0x5d7011[_0x497f19(0x1c7)]!=_0x497f19(0x21f))toggleBot(_0x5d7011[_0x497f19(0x1c7)],toggleStatus(_0x5d7011[_0x497f19(0x1c7)]),'stopped');})):(tgBot[_0x5e8f7b(0x12c)](_0x23fe0c[_0x5e8f7b(0x16a)]['id'],_0x5e8f7b(0x116)+_0x55d88f)[_0x5e8f7b(0xe1)](_0xb0ea87=>{telegramError(_0xb0ea87);}),toggleBot(_0x55d88f,toggleStatus(_0x55d88f),_0x5e8f7b(0x180)));}),tgBot[_0x37cffa(0x184)](_0x37cffa(0x1bb));});}}),tgBot[_0x1c1636(0x133)](/\/portfolio/,_0x3a5094=>{const _0x7d08a6=_0x1c1636;if(!validateTelegram(_0x3a5094))return;tgBot[_0x7d08a6(0x184)](_0x7d08a6(0x1bb));const _0x5a7aee=getEnabledBots();if(_0x5a7aee['length']==0x0)tgBot[_0x7d08a6(0x12c)](_0x3a5094[_0x7d08a6(0x16a)]['id'],'No\x20bots\x20running\x20right\x20now')['catch'](_0x3e979e=>{telegramError(_0x3e979e);});else{if(_0x5a7aee[_0x7d08a6(0x128)]>0x1){let _0x3ecd56=[],_0xe6d93c=[];const _0x34853c=_0x5a7aee[_0x7d08a6(0x128)]%0x4==0x0||_0x5a7aee[_0x7d08a6(0x128)]%0x4==0x3||_0x5a7aee[_0x7d08a6(0x128)]%0x3==0x1?0x4:0x3;let _0x55e4cc=0x0;_0x5a7aee[_0x7d08a6(0xe0)]((_0x579baf,_0x4714e4)=>{const _0x316452=_0x7d08a6;if(_0x4714e4%_0x34853c==0x0)_0xe6d93c=[];_0xe6d93c[_0x316452(0x1f1)]({'text':_0x316452(0xd0)+_0x579baf[_0x316452(0x1c7)],'callback_data':_0x579baf[_0x316452(0x1c7)]}),_0x4714e4%_0x34853c==0x0&&(_0x3ecd56[_0x55e4cc]=_0xe6d93c,_0x55e4cc++);}),tgBot['sendMessage'](_0x3a5094['chat']['id'],_0x7d08a6(0x168),{'reply_markup':{'inline_keyboard':_0x3ecd56}})['catch'](_0x1d6c3=>{telegramError(_0x1d6c3);}),tgBot['on'](_0x7d08a6(0x1bb),async _0x3ae2d6=>{const _0x4d0d04=_0x7d08a6,_0x20cdea=_0x3ae2d6[_0x4d0d04(0x151)],_0x4a558f=_0x3ae2d6['message'];tgBot['answerCallbackQuery'](_0x3ae2d6['id'])[_0x4d0d04(0x173)](async()=>{const _0x10e33e=_0x4d0d04;if(pid[_0x20cdea])pid[_0x20cdea][_0x10e33e(0x196)]({'function':_0x10e33e(0xea),'args':null});}),tgBot[_0x4d0d04(0x184)](_0x4d0d04(0x1bb));});}else{const _0x1c31c4=_0x5a7aee[0x0][_0x7d08a6(0x1c7)];if(pid[_0x1c31c4])pid[_0x1c31c4][_0x7d08a6(0x196)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x1c1636(0x133)](/\/update/,async _0x23d738=>{const _0x54e0cd=_0x1c1636;if(!validateTelegram(_0x23d738))return;tgBot[_0x54e0cd(0x184)](_0x54e0cd(0x1bb)),await getMessages();if(!updateAvailable)tgBot[_0x54e0cd(0x12c)](_0x23d738[_0x54e0cd(0x16a)]['id'],_0x54e0cd(0x1c6))[_0x54e0cd(0xe1)](_0x592ab5=>{telegramError(_0x592ab5);});else!validInstallation?tgBot[_0x54e0cd(0x12c)](_0x23d738[_0x54e0cd(0x16a)]['id'],_0x54e0cd(0x209))[_0x54e0cd(0xe1)](_0x54f337=>{telegramError(_0x54f337);}):(tgBot['sendMessage'](_0x23d738[_0x54e0cd(0x16a)]['id'],'Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?',{'reply_markup':{'inline_keyboard':[[{'text':_0x54e0cd(0x17c),'callback_data':_0x54e0cd(0x13d)},{'text':'No','callback_data':'no'}]]}})[_0x54e0cd(0xe1)](_0x1d9a4b=>{telegramError(_0x1d9a4b);}),tgBot['on'](_0x54e0cd(0x1bb),async _0xba02c5=>{const _0x57b2c9=_0x54e0cd,_0x7eb625=_0xba02c5[_0x57b2c9(0x151)],_0x41e7a7=_0xba02c5[_0x57b2c9(0x1b6)];tgBot[_0x57b2c9(0x19b)](_0xba02c5['id'])[_0x57b2c9(0x173)](async()=>{const _0x531d7f=_0x57b2c9;_0x7eb625==_0x531d7f(0x13d)&&(await tgBot[_0x531d7f(0x12c)](_0x41e7a7['chat']['id'],_0x531d7f(0x1dc))['catch'](_0x340804=>{telegramError(_0x340804);}),updateBB());_0x7eb625=='no'&&await tgBot[_0x531d7f(0x12c)](_0x41e7a7[_0x531d7f(0x16a)]['id'],'Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later')[_0x531d7f(0xe1)](_0x14cdca=>{telegramError(_0x14cdca);});if(!settings[_0x531d7f(0xfc)])tgBot[_0x531d7f(0x12c)](_0x41e7a7[_0x531d7f(0x16a)]['id'],_0x531d7f(0xd5))[_0x531d7f(0xe1)](_0x4cd389=>{telegramError(_0x4cd389);});}),tgBot[_0x57b2c9(0x184)](_0x57b2c9(0x1bb));}));}),tgBot['onText'](/\/toggle/,_0x9d4a6=>{const _0x1c8c62=_0x1c1636;if(!validateTelegram(_0x9d4a6))return;tgBot[_0x1c8c62(0x184)](_0x1c8c62(0x1bb));const _0x57ec95=getBotsWithMode();if(_0x57ec95['length']==0x0)tgBot[_0x1c8c62(0x12c)](_0x9d4a6['chat']['id'],_0x1c8c62(0xbc))[_0x1c8c62(0xe1)](_0x49bdb6=>{telegramError(_0x49bdb6);});else{let _0x204efc=[],_0x465184=[];const _0xea1676=0x2;let _0x3e66f2=0x0;_0x57ec95[_0x1c8c62(0xe0)]((_0x195eb8,_0x557e19)=>{const _0x7fc8e7=_0x1c8c62;if(_0x557e19%_0xea1676==0x0)_0x465184=[];_0x465184[_0x7fc8e7(0x1f1)]({'text':_0x7fc8e7(0xd0)+_0x195eb8[_0x7fc8e7(0x1c7)]+'\x20('+_0x195eb8[_0x7fc8e7(0x1b3)]+')','callback_data':_0x195eb8[_0x7fc8e7(0x1c7)]}),_0x557e19%_0xea1676==0x0&&(_0x204efc[_0x3e66f2]=_0x465184,_0x3e66f2++);}),tgBot[_0x1c8c62(0x12c)](_0x9d4a6[_0x1c8c62(0x16a)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',{'reply_markup':{'inline_keyboard':_0x204efc}})['catch'](_0x58b37=>{telegramError(_0x58b37);}),tgBot['on']('callback_query',async _0xefc1ce=>{const _0x565da5=_0x1c8c62,_0xb9b9df=_0xefc1ce[_0x565da5(0x151)],_0x43cf9d=_0xefc1ce['message'];tgBot[_0x565da5(0x19b)](_0xefc1ce['id'])[_0x565da5(0x173)](async()=>{const _0x45c923=_0x565da5,_0x1c17c9=_0x57ec95[_0x45c923(0x143)](_0x263e94=>_0x263e94[_0x45c923(0x1c7)]==_0xb9b9df),_0x2d3153=_0x1c17c9[_0x45c923(0x1b3)]==_0x45c923(0x169)?_0x45c923(0x185):'auto';tgBot[_0x45c923(0x12c)](_0x43cf9d[_0x45c923(0x16a)]['id'],_0x45c923(0xbd)+_0xb9b9df+_0x45c923(0x144)+_0x2d3153+_0x45c923(0x20b))['catch'](_0x35ab43=>{telegramError(_0x35ab43);}),toggleBotMode(_0xb9b9df);}),tgBot[_0x565da5(0x184)]('callback_query');});}}),tgBot[_0x1c1636(0x133)](/\/names/,_0x35a2b8=>{const _0x2b3e52=_0x1c1636;if(!validateTelegram(_0x35a2b8))return;let _0x9bed2f='';config['forEach'](_0x14a044=>{const _0x57c387=_0x2842;_0x9bed2f+=_0x57c387(0xd0)+_0x14a044[_0x57c387(0x1c7)]+':\x20'+_0x14a044[_0x57c387(0x187)]+'\x0a';}),tgBot[_0x2b3e52(0x12c)](_0x35a2b8['chat']['id'],_0x9bed2f,{'parse_mode':_0x2b3e52(0xfb)})[_0x2b3e52(0xe1)](_0x115014=>{telegramError(_0x115014);});}),tgBot[_0x1c1636(0x133)](/\/disable/,_0x23de74=>{const _0x517bbe=_0x1c1636;if(!validateTelegram(_0x23de74))return;tgBot[_0x517bbe(0x12c)](_0x23de74[_0x517bbe(0x16a)]['id'],'Notifications\x20disabled')[_0x517bbe(0xe1)](_0x538726=>{telegramError(_0x538726);}),updateSetting(_0x517bbe(0x146),![]);}),tgBot[_0x1c1636(0x133)](/\/help/,_0x3b9870=>{const _0x3c022b=_0x1c1636;if(!validateTelegram(_0x3b9870))return;tgBot[_0x3c022b(0x12c)](_0x3b9870[_0x3c022b(0x16a)]['id'],_0x4dff82)['catch'](_0x1f2bd5=>{telegramError(_0x1f2bd5);});}),tgBot['on'](_0x1c1636(0x1c9),_0x4dcb15=>{const _0x9dfd09=_0x1c1636;_0x4dcb15[_0x9dfd09(0xf7)]()['includes'](_0x9dfd09(0xc9))&&(logging(_0x9dfd09(0xb3)),tgBot[_0x9dfd09(0x20d)](),tgBot=null,io['to'](_0x9dfd09(0xd4))[_0x9dfd09(0xb9)](_0x9dfd09(0x1a7),_0x9dfd09(0xb3)));}),process[_0x1c1636(0x14d)](_0x1c1636(0xe5),()=>{const _0x1c02d5=_0x1c1636;if(tgBot)tgBot[_0x1c02d5(0x20d)]();process['exit'](0x1);}),process['once'](_0x1c1636(0xe3),()=>{const _0x1ae1b4=_0x1c1636;if(tgBot)tgBot['stopPolling']();process[_0x1ae1b4(0x12f)](0x1);});}}function disableTelegram(){tgBot&&(tgBot['stopPolling'](),tgBot=null);}function sendTelegram(_0xba6c6a,_0x6537f1){const _0x25af1f=_0x49a76d;if(settings[_0x25af1f(0x146)]){if(settings[_0x25af1f(0x1ce)]==_0x25af1f(0x21f)||(_0x6537f1[_0x25af1f(0x1b1)]==_0x25af1f(0x129)||_0x6537f1[_0x25af1f(0x1b1)]==_0x25af1f(0x20c))&&settings[_0x25af1f(0x1ce)]==_0x25af1f(0x112)||_0x6537f1['type']==_0x25af1f(0x1cc)&&settings[_0x25af1f(0x1ce)]==_0x25af1f(0x1b8)){if(tgBot&&settings[_0x25af1f(0xfc)]){if(_0x6537f1['showname'])tgBot['sendMessage'](settings['telegramChatId'],_0x6537f1[_0x25af1f(0x187)]+'\x20>\x20'+_0x6537f1[_0x25af1f(0x1c2)])[_0x25af1f(0xe1)](_0x507a26=>{telegramError(_0x507a26);});else tgBot['sendMessage'](settings[_0x25af1f(0xfc)],_0x25af1f(0xd0)+_0xba6c6a+_0x25af1f(0xef)+_0x6537f1[_0x25af1f(0x1c2)])[_0x25af1f(0xe1)](_0x29b78c=>{telegramError(_0x29b78c);});}}}}async function sendTelegramMsg(_0x401963,_0x480924=_0x49a76d(0xfb)){const _0x45fbf8=_0x49a76d;return settings[_0x45fbf8(0x146)]&&tgBot&&settings[_0x45fbf8(0xfc)]?(await tgBot[_0x45fbf8(0x12c)](settings[_0x45fbf8(0xfc)],_0x401963,{'parse_mode':_0x480924})[_0x45fbf8(0xe1)](_0x24825b=>{telegramError(_0x24825b);}),!![]):![];}function getDeviceWithIp(_0x9f8b2a){const _0x509c26=_0x49a76d;return devices[_0x509c26(0x143)](_0x5a9548=>_0x5a9548['ip']===_0x9f8b2a);}function temporaryAccess2FA(_0x21abb4,_0x326055){const _0x13560c=_0x49a76d;let _0x3eb34b=new Date(),_0x65e7b3=![];if(lastIpApproval){if(_0x3eb34b-lastIpApproval<0x1388)_0x65e7b3=!![];}lastIpApproval=new Date();if(_0x65e7b3)return;tgBot&&settings[_0x13560c(0xfc)]&&(tgBot['removeListener'](_0x13560c(0x1bb)),tgBot[_0x13560c(0x12c)](settings[_0x13560c(0xfc)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x326055)[_0x13560c(0x207)]+'</b>\x20?',{'parse_mode':_0x13560c(0xfb),'reply_markup':{'inline_keyboard':[[{'text':_0x13560c(0x1ef),'callback_data':'5'},{'text':_0x13560c(0x156),'callback_data':'15'},{'text':_0x13560c(0x1ab),'callback_data':'30'},{'text':_0x13560c(0x1c3),'callback_data':_0x13560c(0x1c3)}]]}})[_0x13560c(0xe1)](_0x2af1f6=>{telegramError(_0x2af1f6);}),tgBot['on']('callback_query',async _0x22f9ae=>{const _0x71980e=_0x13560c,_0x2ea07a=_0x22f9ae[_0x71980e(0x151)],_0x548ed7=_0x22f9ae[_0x71980e(0x1b6)];tgBot['answerCallbackQuery'](_0x22f9ae['id'])[_0x71980e(0x173)](async()=>{const _0x233e7d=_0x71980e;devices[_0x21abb4][_0x233e7d(0x10d)]={'clientip':_0x326055,'timestamp':new Date()[_0x233e7d(0x1c1)](),'expiry':_0x2ea07a},_0x2ea07a!=_0x233e7d(0x1c3)?(await tgBot[_0x233e7d(0x12c)](_0x548ed7['chat']['id'],_0x233e7d(0x1cb)+_0x2ea07a+_0x233e7d(0xe2),{'parse_mode':_0x233e7d(0xfb)})[_0x233e7d(0xe1)](_0x4da3e1=>{telegramError(_0x4da3e1);}),io['to'](_0x21abb4)[_0x233e7d(0xb9)](_0x233e7d(0x159),{'access':{'allow':![],'reason':_0x233e7d(0x109),'token':null}})):(await tgBot[_0x233e7d(0x12c)](_0x548ed7[_0x233e7d(0x16a)]['id'],_0x233e7d(0x1de))[_0x233e7d(0xe1)](_0xec097a=>{telegramError(_0xec097a);}),io['to'](_0x21abb4)[_0x233e7d(0xb9)](_0x233e7d(0x159),{'access':{'allow':![],'reason':'temporary\x20access\x20rejected','token':null}}));}),tgBot[_0x71980e(0x184)](_0x71980e(0x1bb));}));}function loginAccess2FA(_0x33009b,_0x2ba039){const _0x3ae6be=_0x49a76d;tgBot&&settings[_0x3ae6be(0xfc)]&&(tgBot[_0x3ae6be(0x184)](_0x3ae6be(0x1bb)),tgBot[_0x3ae6be(0x12c)](settings[_0x3ae6be(0xfc)],_0x3ae6be(0x11d)+normalizeIP(_0x2ba039)[_0x3ae6be(0x207)]+_0x3ae6be(0x11c),{'parse_mode':_0x3ae6be(0xfb),'reply_markup':{'inline_keyboard':[[{'text':_0x3ae6be(0x218),'callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x3ae6be(0xe1)](_0x17a36b=>{telegramError(_0x17a36b);}),tgBot['on'](_0x3ae6be(0x1bb),async _0x86f9ed=>{const _0x18010f=_0x3ae6be,_0x107663=_0x86f9ed['data'],_0x34880d=_0x86f9ed['message'];tgBot[_0x18010f(0x19b)](_0x86f9ed['id'])['then'](async()=>{const _0x3ace8f=_0x18010f;devices[_0x33009b]['telegram2FaApproval']={'clientip':_0x2ba039,'timestamp':new Date()[_0x3ace8f(0x1c1)](),'expiry':_0x107663},_0x107663!=_0x3ace8f(0x1c3)?(await tgBot[_0x3ace8f(0x12c)](_0x34880d[_0x3ace8f(0x16a)]['id'],_0x3ace8f(0x1da),{'parse_mode':_0x3ace8f(0xfb)})['catch'](_0x549917=>{telegramError(_0x549917);}),io['to'](_0x33009b)['emit']('status',{'access':{'allow':![],'reason':_0x3ace8f(0x109),'token':null}})):(await tgBot[_0x3ace8f(0x12c)](_0x34880d[_0x3ace8f(0x16a)]['id'],_0x3ace8f(0x15e))[_0x3ace8f(0xe1)](_0x4422e1=>{telegramError(_0x4422e1);}),io['to'](_0x33009b)['emit']('status',{'access':{'allow':![],'reason':_0x3ace8f(0x15f),'token':null}}));}),tgBot[_0x18010f(0x184)](_0x18010f(0x1bb));}));}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0xe15188=_0x49a76d;return dbConfig[_0xe15188(0x18b)]('bots')[_0xe15188(0x205)](_0xe15188(0x1c7))[_0xe15188(0xe7)]({'status':_0xe15188(0x165)})[_0xe15188(0x103)]()||[];}function getDisabledBots(){const _0x4e615b=_0x49a76d;return dbConfig[_0x4e615b(0x18b)](_0x4e615b(0x1b9))[_0x4e615b(0x205)](_0x4e615b(0x1c7))[_0x4e615b(0xe7)]({'status':_0x4e615b(0x118)})[_0x4e615b(0x103)]()||[];}function getBotsWithMode(){const _0x1fb189=_0x49a76d,_0x3a2098=dbConfig[_0x1fb189(0x18b)](_0x1fb189(0x1b9))[_0x1fb189(0x205)](_0x1fb189(0x1c7))[_0x1fb189(0x103)]()||[];return _0x3a2098[_0x1fb189(0xe0)](_0x62b6f7=>{const _0x528f33=_0x1fb189,_0x4aacdd=configpath+_0x528f33(0x19e)+_0x62b6f7[_0x528f33(0x1c7)]+_0x528f33(0x10e),_0x33eb28=fs[_0x528f33(0x113)](_0x4aacdd);if(_0x33eb28){const _0x3c11a3=fs[_0x528f33(0x122)](_0x4aacdd);try{const _0x359c80=JSON['parse'](_0x3c11a3),_0x56472c=_0x359c80?_0x359c80['bot'][0x0][_0x528f33(0xcd)]:![];_0x62b6f7[_0x528f33(0x1b3)]=_0x56472c?'auto':_0x528f33(0x185);}catch(_0x118b9c){_0x62b6f7[_0x528f33(0x1b3)]='manual';}}else _0x62b6f7[_0x528f33(0x1b3)]=_0x528f33(0x185);}),_0x3a2098;}async function initUser(){const _0x53d149=_0x49a76d;if(!settings['userid']){const _0x5bd741=uuidRandom();mixpanel[_0x53d149(0x153)](_0x5bd741),updateSetting(_0x53d149(0x1f4),_0x5bd741);}}async function initSecure(){const _0x5eb09e=_0x49a76d;let _0x3ea81b=getSecure();if(!_0x3ea81b[_0x5eb09e(0x1e6)](_0x5eb09e(0x1ad))){let _0x2874b0=await generateKeys();_0x3ea81b['publicKey']=_0x2874b0[_0x5eb09e(0x137)],_0x3ea81b[_0x5eb09e(0x1c4)]=_0x2874b0['privateKey'],_0x3ea81b[_0x5eb09e(0x1ad)]=crypto[_0x5eb09e(0x142)](0x20)[_0x5eb09e(0xf7)](_0x5eb09e(0x1dd));;storeSecure(_0x3ea81b);}}function getSettings(){const _0x37f39c=_0x49a76d;return dbSettings['get'](_0x37f39c(0x136))['value']()||{};}function getSecure(){const _0x347005=_0x49a76d;return dbSecure['get'](_0x347005(0x124))[_0x347005(0x103)]()||{};}function getBlacklist(){const _0xc6338b=_0x49a76d;return dbSecure[_0xc6338b(0x18b)]('blacklist')[_0xc6338b(0x103)]()||[];}function broadcastToBots(_0x43a734,_0x139299){const _0x3844b0=_0x49a76d;config[_0x3844b0(0xe0)](_0x494763=>{const _0x1dc791=_0x3844b0;if(_0x494763['status']==_0x1dc791(0x165)&&_0x494763[_0x1dc791(0x1d3)]=='running'){if(pid[_0x494763['botID']])pid[_0x494763[_0x1dc791(0x1c7)]][_0x1dc791(0x196)]({[_0x43a734]:_0x139299});}});}function storeSettings(_0xf55397,_0x10e784=![]){const _0x55725c=_0x49a76d;_0xf55397={...settings,..._0xf55397};if(_0x10e784&&_0xf55397[_0x55725c(0x14e)]!=_0x55725c(0x147)&&_0xf55397[_0x55725c(0x14e)]!=''){const _0x138cfa=crypt[_0x55725c(0xf0)](secure[_0x55725c(0x1c4)],_0xf55397[_0x55725c(0x14e)])[_0x55725c(0x1b6)]['split']('@')[0x0],_0x19d5d3=bcrypt['hashSync'](_0x138cfa,saltRounds);_0xf55397={..._0xf55397,'bbPassword':_0x19d5d3};}if(_0x10e784&&_0xf55397[_0x55725c(0x164)]!=_0x55725c(0x147)&&_0xf55397[_0x55725c(0x164)]!=''){const _0x3116cf=crypt[_0x55725c(0xf0)](secure[_0x55725c(0x1c4)],_0xf55397[_0x55725c(0x164)])[_0x55725c(0x1b6)][_0x55725c(0x20e)]('@')[0x0];_0xf55397={..._0xf55397,'telegramToken':_0x3116cf};}const _0xdd9758=_0xf55397[_0x55725c(0x164)]!='************'&&_0xf55397[_0x55725c(0x164)]!=settings[_0x55725c(0x164)]||_0xf55397[_0x55725c(0x108)]!=settings[_0x55725c(0x108)],_0x44d096=_0xf55397['telegramToken']==''||_0xf55397[_0x55725c(0x108)]=='';if(_0xdd9758)_0xf55397[_0x55725c(0x1ce)]=_0x55725c(0x21f);for(const [_0x37f780,_0x3ae592]of Object[_0x55725c(0x135)](_0xf55397)){if(_0x37f780==_0x55725c(0x164)&&_0x3ae592=='************'){_0xf55397[_0x55725c(0x164)]=settings[_0x55725c(0x164)];continue;};if(_0x37f780=='bbPassword'&&_0x3ae592=='************'){_0xf55397['bbPassword']=settings[_0x55725c(0x14e)];continue;};dbSettings[_0x55725c(0x120)](_0x55725c(0x1f0)+_0x37f780,_0x3ae592)[_0x55725c(0xed)]();}settings=_0xf55397,io['to'](_0x55725c(0xd4))[_0x55725c(0xb9)](_0x55725c(0x136),cleanSettings()),broadcastToBots(_0x55725c(0xe8),settings[_0x55725c(0xe8)]);if(_0xdd9758&&!_0x44d096)initTelegram();if(_0xdd9758&&_0x44d096)disableTelegram();getAllClients()[_0x55725c(0xe0)](_0x4dc028=>{const _0x131274=_0x55725c;getSocket(_0x4dc028['id'])['emit'](_0x131274(0x159),{'access':{'allow':![],'reason':_0x131274(0x109),'token':null}});});}function updateSetting(_0x183f22,_0x540bc8){const _0x5c3ad3=_0x49a76d;dbSettings['set'](_0x5c3ad3(0x1f0)+_0x183f22,_0x540bc8)[_0x5c3ad3(0xed)](),settings=getSettings(),io['to'](_0x5c3ad3(0xd4))['emit'](_0x5c3ad3(0x136),cleanSettings());}function storeSecure(_0x5c6980){const _0x286e3c=_0x49a76d;dbSecure[_0x286e3c(0x18b)]('secure')['push'](_0x5c6980)[_0x286e3c(0xed)](),secure=_0x5c6980;}function addBlacklist(_0x229156){const _0xe32ea8=_0x49a76d;cleanBlacklist();let _0x2ef366;devices[_0x229156][_0xe32ea8(0x10d)]?_0x2ef366=Math[_0xe32ea8(0x11e)](devices[_0x229156][_0xe32ea8(0x10d)][_0xe32ea8(0x131)],loginExpiry):_0x2ef366=loginExpiry,dbSecure[_0xe32ea8(0x18b)]('blacklist')[_0xe32ea8(0x1f1)]({'expiry':new Date()[_0xe32ea8(0x1c1)]()+_0x2ef366*0x3c*0x3e8,'token':devices[_0x229156]['access']['token']})[_0xe32ea8(0xed)](),blacklist=dbSecure[_0xe32ea8(0x18b)](_0xe32ea8(0x204))[_0xe32ea8(0x103)]();}function cleanBlacklist(){const _0x241962=_0x49a76d;let _0x2a7891=dbSecure['get'](_0x241962(0x204))[_0x241962(0x104)]()[_0x241962(0x103)](),_0x541061=new Date()['getTime']();_0x2a7891[_0x241962(0xe0)](_0x422d70=>{const _0x2cb189=_0x241962;_0x422d70[_0x2cb189(0x131)]<_0x541061&&dbSecure['get'](_0x2cb189(0x204))[_0x2cb189(0x19c)]({'expiry':_0x422d70[_0x2cb189(0x131)]})[_0x2cb189(0xed)]();});}function initStates(){const _0x12c77c=_0x49a76d;let _0x598eb5=getConfiguration();_0x598eb5[_0x12c77c(0xe0)](_0x914d53=>{const _0x32fd60=_0x12c77c;_0x914d53[_0x32fd60(0x1d3)]='stopped';}),storeConfiguration(_0x598eb5);}function onKeys(){const _0x32c676=new RSA();return new Promise(_0x4e96e0=>{const _0x12caef=_0x2842;_0x32c676[_0x12caef(0x121)]()[_0x12caef(0x173)](_0x440f0a=>{_0x4e96e0(_0x440f0a);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x450996=_0x49a76d;let _0x70c3e=getSettings(),_0x22446e=![];!_0x70c3e[_0x450996(0x1e6)](_0x450996(0x117))&&(_0x70c3e[_0x450996(0x117)]=0x0,_0x22446e=!![]);!_0x70c3e[_0x450996(0x1e6)](_0x450996(0x194))&&(_0x70c3e[_0x450996(0x194)]=0x0,_0x22446e=!![]);!_0x70c3e[_0x450996(0x1e6)](_0x450996(0x1a9))&&(_0x70c3e[_0x450996(0x1a9)]=_0x450996(0x119),_0x22446e=!![]);if(_0x22446e)storeSettings(_0x70c3e);}function storeConfiguration(_0x22fb59){const _0x349a4e=_0x49a76d;dbConfig['get'](_0x349a4e(0x1b9))[_0x349a4e(0x19c)]()['write'](),_0x22fb59[_0x349a4e(0xe0)](_0x44ec42=>{delete _0x44ec42['mode'];}),dbConfig[_0x349a4e(0x18b)]('bots')[_0x349a4e(0x1f1)](..._0x22fb59)[_0x349a4e(0xed)](),config=_0x22fb59;}function resetPassword(){const _0x4cc648=_0x49a76d;tgBot&&settings['telegramChatId']&&(tgBot['removeListener'](_0x4cc648(0x1bb)),tgBot['sendMessage'](settings[_0x4cc648(0xfc)],_0x4cc648(0xf8),{'parse_mode':_0x4cc648(0xfb),'reply_markup':{'inline_keyboard':[[{'text':_0x4cc648(0x13d),'callback_data':_0x4cc648(0x13d)},{'text':'no','callback_data':'no'}]]}})[_0x4cc648(0xe1)](_0x528a99=>{telegramError(_0x528a99);}),tgBot['on'](_0x4cc648(0x1bb),async _0xd89241=>{const _0x2f09e1=_0x4cc648,_0x3e7d8a=_0xd89241['data'],_0x58f5b4=_0xd89241[_0x2f09e1(0x1b6)];tgBot[_0x2f09e1(0x19b)](_0xd89241['id'])[_0x2f09e1(0x173)](async()=>{const _0x48beb6=_0x2f09e1;if(_0x3e7d8a!='no'){const _0x3bccee=0xf,_0x24fddb=_0x48beb6(0x18f),_0x21af9c=Array[_0x48beb6(0x14a)](crypto[_0x48beb6(0x11f)](new Uint32Array(_0x3bccee)))[_0x48beb6(0x16d)](_0x96a7f2=>_0x24fddb[_0x96a7f2%_0x24fddb[_0x48beb6(0x128)]])[_0x48beb6(0xba)](''),_0x1aa409=bcrypt[_0x48beb6(0x1d7)](_0x21af9c,saltRounds);storeSettings({'bbPassword':_0x1aa409}),await tgBot[_0x48beb6(0x12c)](_0x58f5b4['chat']['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x21af9c,{'parse_mode':_0x48beb6(0xfb)})['catch'](_0x2cb687=>{telegramError(_0x2cb687);});}else await tgBot['sendMessage'](_0x58f5b4[_0x48beb6(0x16a)]['id'],_0x48beb6(0x1d6))['catch'](_0x1797ee=>{telegramError(_0x1797ee);});}),tgBot['removeListener'](_0x2f09e1(0x1bb));}));}function logging(_0x430b2f){const _0x1ff4d5=_0x49a76d;console[_0x1ff4d5(0x1fb)](getTimeStamp()+_0x1ff4d5(0x1bd)+_0x430b2f);if(tgBot&&settings[_0x1ff4d5(0xfc)]&&settings[_0x1ff4d5(0x1ce)]!=_0x1ff4d5(0x1b8))tgBot[_0x1ff4d5(0x12c)](settings[_0x1ff4d5(0xfc)],_0x1ff4d5(0x1a6)+_0x430b2f)['catch'](_0x398372=>{telegramError(_0x398372);});}function getServerTime(){const _0x26fa35=_0x49a76d,_0x222449=new Date();return _0x222449['getFullYear']()+'/'+(_0x222449[_0x26fa35(0xdf)]()+0x1)['toString']()[_0x26fa35(0xeb)](0x2,'0')+'/'+_0x222449[_0x26fa35(0x12b)]()[_0x26fa35(0xf7)]()[_0x26fa35(0xeb)](0x2,'0')+'\x20'+_0x222449[_0x26fa35(0x1cf)]()[_0x26fa35(0xf7)]()[_0x26fa35(0xeb)](0x2,'0')+':'+_0x222449[_0x26fa35(0x1a0)]()['toString']()[_0x26fa35(0xeb)](0x2,'0')+':'+_0x222449[_0x26fa35(0x192)]()[_0x26fa35(0xf7)]()[_0x26fa35(0xeb)](0x2,'0');}function getTimeStamp(){const _0x4eaddc=_0x49a76d,_0x509057=shiftedTime();return _0x509057[_0x4eaddc(0x123)]()+'/'+(_0x509057[_0x4eaddc(0xdf)]()+0x1)[_0x4eaddc(0xf7)]()['padStart'](0x2,'0')+'/'+_0x509057['getDate']()[_0x4eaddc(0xf7)]()[_0x4eaddc(0xeb)](0x2,'0')+'\x20'+_0x509057[_0x4eaddc(0x1cf)]()['toString']()['padStart'](0x2,'0')+':'+_0x509057['getMinutes']()['toString']()[_0x4eaddc(0xeb)](0x2,'0')+':'+_0x509057[_0x4eaddc(0x192)]()['toString']()[_0x4eaddc(0xeb)](0x2,'0');}function shiftedTime(){const _0x516b2f=_0x49a76d,_0xbcfa17=new Date();let _0x2ff172=_0xbcfa17;if(settings[_0x516b2f(0xe8)]&&settings[_0x516b2f(0xe8)]!==0x0)_0x2ff172=fns[_0x516b2f(0xc8)](_0xbcfa17,{'hours':settings['timeshift']});return _0x2ff172;}function startScheduler(){const _0x1c14f4=_0x49a76d;let _0x279a8a=new Date()[_0x1c14f4(0x1a1)]();_0x279a8a==0x1&&backupConfigFiles();_0x279a8a==0x9&&triggerAnalytics();_0x279a8a%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x50f585=_0x49a76d;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x50f585(0xe0)](_0x38dbc8=>{const _0x41079e=_0x50f585;if(!_0x38dbc8[_0x41079e(0x1f3)]())fs[_0x41079e(0x167)](configpath+_0x38dbc8[_0x41079e(0x152)],configbackuppath+_0x38dbc8['name']);});}async function getPublicIp(){const _0x491fb0=_0x49a76d;try{const _0x5a9c17=await axios[_0x491fb0(0x18b)](_0x491fb0(0xc5));publicip=_0x5a9c17['data']['ip'];}catch(_0x4fcea0){}}async function triggerAnalytics(_0x569c04=![]){const _0x3919e7=_0x49a76d;if(!publicip)await getPublicIp();const _0x2f9912=getBotsWithMode();let _0x4c63aa=0x0;_0x2f9912['forEach'](_0x597d69=>{const _0x3e7cbf=_0x2842;if(_0x597d69[_0x3e7cbf(0x159)]===_0x3e7cbf(0x165))_0x4c63aa++;}),mixpanel['track']('Server',{'distinct_id':settings[_0x3919e7(0x1f4)],'ip':publicip,'version':serverversion,'numbots':_0x2f9912[_0x3919e7(0x128)],'numbotsenabled':_0x4c63aa}),!_0x569c04&&analytics[_0x3919e7(0x1fc)]({'title':_0x3919e7(0x171),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}async function getMessages(){const _0x25d80e=_0x49a76d,_0x4d03e4='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x12d03d=new GraphQLClient(_0x4d03e4),_0x1b8972={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x2dc5de=serverversion['split']('.'),_0xc921=_0x2dc5de[0x0]+'.'+_0x2dc5de[0x1],_0x321ef0=Math[_0x25d80e(0x18e)](settings[_0x25d80e(0x117)],settings[_0x25d80e(0x194)]),_0x534728={'last':parseInt(_0x321ef0),'bbm':_0xc921},_0x31f832=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x29ca19;try{_0x29ca19=await _0x12d03d['request'](_0x31f832,_0x534728,_0x1b8972);}catch(_0x4e449c){}if(_0x29ca19&&_0x29ca19[_0x25d80e(0xbb)]){let _0x4a9710=settings['lastmsgtelegram'];newMessages=[];for(const _0x3b562b of _0x29ca19[_0x25d80e(0xbb)]){newMessages[_0x25d80e(0x1f1)](_0x3b562b);if(_0x3b562b['bbvNew'])updateSetting(_0x25d80e(0x1a9),_0x3b562b['bbvNew']);let _0xb98e6c=_0x3b562b[_0x25d80e(0xb4)]?serverversion>=_0x3b562b[_0x25d80e(0xb4)]:![];if(!_0xb98e6c&&_0x3b562b[_0x25d80e(0x1be)]>_0x4a9710){if(_0x3b562b['bbvReceive']==='any'||serverversion[_0x25d80e(0xb7)](_0x3b562b[_0x25d80e(0x179)])){let _0x32ddc0=''+_0x3b562b[_0x25d80e(0xc3)]+'\x0a\x0a'+_0x3b562b[_0x25d80e(0x1b6)];const _0x2d22c2=await sendTelegramMsg(toTelegramMarkdown(_0x32ddc0),'Markdown');if(_0x2d22c2)_0x4a9710=_0x3b562b['number'];}}}updateAvailable=isNewerVersion(settings[_0x25d80e(0x1a9)],serverversion),updateSetting(_0x25d80e(0x117),_0x4a9710),emitMessages();}}function emitMessages(){const _0x9fddf8=_0x49a76d,_0x257030=settings['lastmsgemitted'];let _0x539701=[];newMessages['forEach'](_0x4121ee=>{const _0x5d2df0=_0x2842;_0x4121ee['number']>_0x257030&&_0x539701[_0x5d2df0(0x1f1)](_0x4121ee);}),_0x539701['length']>0x0&&getAllClients()[_0x9fddf8(0xe0)](_0x16b494=>{const _0x4f08b9=_0x9fddf8;getSocket(_0x16b494['id'])[_0x4f08b9(0xb9)](_0x4f08b9(0x1b6),_0x539701);});}function confirmMessage(_0x19c317){updateSetting('lastmsgemitted',Number(_0x19c317));}function isNewerVersion(_0x476655,_0x478d42){const _0x37b7e1=_0x49a76d,_0x4e7805=_0x478d42[_0x37b7e1(0x20e)]('.'),_0x4f9b2a=_0x476655[_0x37b7e1(0x20e)]('.');for(var _0xc2d0f9=0x0;_0xc2d0f9<_0x4f9b2a[_0x37b7e1(0x128)];_0xc2d0f9++){const _0x432b22=~~_0x4f9b2a[_0xc2d0f9],_0x50ea69=~~_0x4e7805[_0xc2d0f9];if(_0x432b22>_0x50ea69)return!![];if(_0x432b22<_0x50ea69)return![];}return![];}function toTelegramMarkdown(_0x198a0a){const _0x184d80=_0x49a76d,_0x662265=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x19ffdd=/\*{2}(.+?)\*{2}/gim;return _0x198a0a=_0x198a0a['replace'](_0x662265,'$1_$2_$3')[_0x184d80(0x16b)](_0x19ffdd,'*$1*'),_0x198a0a;}function _0x136f(){const _0x45244f=['Invalid\x20authentication\x20token\x20(2)','2FA\x20login\x20token\x20generated','Balance\x20Bot','answerCallbackQuery','remove','static','bot-','ipaddr.js','getMinutes','getUTCHours','login','You\x20can\x20use\x20the\x20following\x20commands:\x0a','get-portfolio','assign','Bot\x20Mgr\x20>\x20','notification','starting\x20new\x20bot\x20|\x20Bot\x20','latestversion','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','30\x20min','Unauthorized\x20attempt\x20to\x20get\x20portfolio','secret','/enable\x20-\x20enable\x20notifications\x0a','telegram2FaApproval','Invalid\x20authentication\x20token\x20(1)','type','reset-password','mode','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','restart','message','/:bot/support','orders','bots','pidRefreshToken','callback_query','sendFile',':\x20Bot\x20Mgr\x20>\x20','number','Ok,\x20will\x20send\x20alert\x20notifications\x20only','RSA-OAEP','getTime','event','reject','privateKey','/:bot/performance','Your\x20installation\x20is\x20already\x20up\x20to\x20date','botID','All\x20bots','polling_error','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Access\x20enabled\x20for\x20','order','default','telegramEvents','getHours','Unauthorized\x20attempt\x20to\x20get\x20logs','env','whitelist','live','Notifications\x20enabled','stop','Password\x20reset\x20rejected','hashSync','updatebotmanager','deleted\x20Bot\x20','Login\x20accepted','confirm-message','Starting\x20Balance\x20Bot\x20update','hex','Temporary\x20access\x20rejected','toIPv4Address','hybrid-crypto-js','kind','disconnect','127.0.0.1','referer','2FA\x20required','hasOwnProperty','/on\x20-\x20start\x20bot(s)\x0a','express','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','conn','sign','argv','temporary\x20access\x20not\x20allowed','reason','5\x20min','settings.','push','\x20|\x20','isDirectory','userid','logout','Unauthorized\x20attempt\x20to\x20update\x20settings','index.html','ipc','/disable\x20-\x20disable\x20notifications\x0a','1000','log','page','bb-settings.json','port','mixpanel','2FA','Unauthorized\x20attempt\x20to\x20delete\x20bot','store-headless','initclient','blacklist','sortBy','apiKey','show','/:bot/coins','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','clients','\x20mode','success','stopPolling','split','telegrammsg','connected','kill','update-bb','402304Vpdisf','Crypt','6b67f3d61ee94b8f5c80b4affef4c4d9','/:bot','(((.+)+)+)+$','accept','12YkLUBg','Notifications\x20disabled\x0a','axios','Alerts','/restart\x20-\x20restart\x20bot(s)\x0a','temporaryAccessAllowed','all','use','listen','build2','build','652755RfITnQ','Unauthorized\x20attempt\x20to\x20delete\x20alerts','Invalid\x20Telegram\x20token','bbvNew','get-messages','11053926gByjyP','startsWith','pidExpireLogin','emit','join','messages','No\x20bots\x20running\x20right\x20now','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','user','User\x20has\x20been\x20validated','Unauthorized\x20attempt\x20to\x20add\x20bot','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','slice','title','started','https://api.ipify.org?format=json','getStartingBalances','access','add','404\x20Not\x20Found','clientip','starting\x20bot\x20|\x20Bot\x20','config/','headless','timestamp','367892xentzI','Bot\x20','init','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/off\x20-\x20stop\x20bot(s)\x0a','botmanager','Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable','search','idling\x20bot\x20\x20\x20|\x20Bot\x20','token','temporary\x20access\x20timeout','invalid\x20credentials','deleteHistoryAlerts','place-order','toggleBotMode','fork','getMonth','forEach','catch','\x20minutes','SIGTERM',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','SIGINT','isIPv4MappedAddress','filter','timeshift','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','sendPortfolioTelegram','padStart','parse','write','isValid','\x20>\x20','decrypt','version.json','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','exp','/update\x20-\x20update\x20Balance\x20Bot\x0a','@analytics/google-analytics-v3','auth','toString','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','/names\x20-\x20show\x20bot\x20names\x0a','login\x20required','HTML','telegramChatId','Unauthorized\x20attempt\x20to\x20update\x20bot','http','defaults','logged\x20out','2FA\x20login\x20required','-----------------------------------------------------------------------------------','value','cloneDeep','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','f2aRequired','bot.js','telegramUsername','reload','enabled\x20Bot\x20','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','/help\x20-\x20show\x20available\x20commands\x0a','telegramIpApproval','-config.json','cancelLoading','allow','temporary\x20token\x20generated','alerts','existsSync','includes','server','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','lastmsgtelegram','disabled','0.0.0','bb-secure.json','delete-alerts','</b>\x20?','Allow\x20login\x20from\x20IP\x20address\x20<b>','max','randomFillSync','set','generateKeyPairAsync','readFileSync','getFullYear','secure','Notifications\x20types:\x20','toggle-bot-mode','Ok,\x20will\x20send\x20order\x20notifications\x20only','length','error','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','getDate','sendMessage','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','Error:\x20Invalid\x20argument\x20','exit','loginRequired','expiry','<b>Telegram\x20Bot\x20Status:</b>\x0a','onText','Unauthorized\x20attempt\x20to\x20store\x20configuration','entries','settings','publicKey','node-telegram-bot-api','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','-performance.json','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','analytics','yes','::1','handshake','unlinkSync','telegram','randomBytes','find','\x20to\x20','Token\x20blacklisted','telegramEnabled','************','access\x20timeout','apply','from','mkdirSync','add-bot','once','bbPassword','args','function','data','name','alias','Notifications\x20enabled\x0a','3000','15\x20min','emitHistory','Unauthorized\x20attempt\x20to\x20get\x20messages','status','Invalid\x20username\x20or\x20IP\x20address','date-fns','username','new','Login\x20rejected','2FA\x20login\x20rejected','257074ceyFDh','/:bot/portfolio','3356664geHKnf','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','telegramToken','enabled','1910160YfJMZK','copyFileSync','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','auto','chat','replace','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','map','compareSync','createServer','new-disabled','Balance\x20Bot\x20Server','Unauthorized\x20attempt\x20to\x20confirm\x20message','then','uuid','sha256','/:bot/history','toIPv4MappedAddress','-results.json','bbvReceive','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','Yes','bbUsername','/status\x20-\x20show\x20bot(s)\x20status\x0a','jsonwebtoken','stopped','sockets','NTBA_FIX_319','api-eu.mixpanel.com','removeListener','manual','delete-bot','botname','bcryptjs','All','login\x20not\x20required','get','password','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','min','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','5ULQFuS','Unauthorized\x20attempt\x20to\x20log\x20out','getSeconds','bot','lastmsgemitted','login\x20token\x20generated','send','inherit'];_0x136f=function(){return _0x45244f;};return _0x136f();}function validateCredentials(_0x5c9746,_0x3a8cde){const _0x23f0f4=_0x49a76d;if(_0x5c9746[_0x23f0f4(0x15c)]==settings[_0x23f0f4(0x17d)]&&bcrypt[_0x23f0f4(0x16e)](_0x5c9746[_0x23f0f4(0x18c)],settings['bbPassword'])){if(settings[_0x23f0f4(0x106)])return{'allow':![],'reason':_0x23f0f4(0x101),'token':null};else{const _0x5b967b=generateLoginToken(_0x3a8cde);return{'allow':!![],'reason':_0x23f0f4(0x195),'token':_0x5b967b};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x5856b3){const _0x1510dc=generateLoginToken(_0x5856b3);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1510dc};}function validateAccess(_0x4197cf,_0x4190e0){const _0x4d9f03=_0x49a76d;let _0x524ffd=devices[_0x4190e0]['ip'],_0x31e47d;const _0x1f7d5e=_0x31e9dd=>{const _0x53f352=_0x2842;if(settings[_0x53f352(0x130)]){if(settings[_0x53f352(0x106)]){if(telegram2FaApproved(_0x4190e0)){const _0x3036d5=generateLoginToken(_0x4190e0);return{'allow':!![],'reason':_0x53f352(0x199),'token':_0x3036d5};}else return{'allow':![],'reason':_0x53f352(0xfa),'token':null};}else return _0x31e47d=validToken(_0x31e9dd,_0x4190e0),_0x31e47d[_0x53f352(0x1e6)](_0x53f352(0x20c))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x31e9dd}:{'allow':![],'reason':_0x53f352(0xfa),'token':null};}else return{'allow':!![],'reason':_0x53f352(0x18a),'token':null};};if(settings['whitelistEnabled']){let _0x65f08c=[...settings[_0x4d9f03(0x1d2)],_0x4d9f03(0x13e),'::ffff:127.0.0.1',_0x4d9f03(0x1e3)];if(_0x65f08c[_0x4d9f03(0x114)](_0x524ffd))return _0x1f7d5e(_0x4197cf);else{_0x31e47d=validToken(_0x4197cf,_0x4190e0);if(_0x31e47d[_0x4d9f03(0x1e6)](_0x4d9f03(0x20c)))return _0x1f7d5e(_0x4197cf);else{if(telegramIpApproved(_0x4190e0)){const _0x528f2e=generateToken(_0x4190e0);return _0x31e47d=_0x1f7d5e(_0x4197cf),_0x31e47d['allow']?{'allow':!![],'reason':_0x4d9f03(0x111),'token':_0x528f2e}:_0x31e47d;}else return settings[_0x4d9f03(0x21e)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x4d9f03(0x1ed),'token':null};}}}else return _0x1f7d5e(_0x4197cf);}function timelyDecrypt(_0x156436,_0xda1824=!![]){const _0x7d2949=_0x49a76d;if(_0x156436)try{const _0x378ce3=crypt['decrypt'](secure['privateKey'],_0x156436)['message'],_0x4664f0=_0x378ce3[_0x7d2949(0x20e)]('@')[0x0],_0x20ed28=_0x378ce3[_0x7d2949(0x20e)]('@')[0x1],_0x555ff0=new Date()[_0x7d2949(0x1c1)]();if(_0xda1824){if(_0x555ff0-_0x20ed28<maxSecretAge*0x3e8)return _0x4664f0;else return![];}else return _0x4664f0;}catch(_0x5c52c0){return![];}else return![];}const validToken=(_0x46f432,_0x153cad)=>{const _0x3d154c=_0x49a76d,_0x2ec835=devices[_0x153cad]['ip'];if(!_0x46f432)return{'error':'No\x20authentication\x20token'};for(let _0xf1927d of blacklist){if(_0xf1927d['token']==_0x46f432)return{'error':_0x3d154c(0x145)};}let _0x16b3c3;try{_0x16b3c3=jwt['verify'](_0x46f432,secure[_0x3d154c(0x1ad)]+_0x153cad);}catch{return{'error':_0x3d154c(0x1b0)};}if(!_0x16b3c3[_0x3d154c(0x1e6)](_0x3d154c(0xca))&&!_0x16b3c3['hasOwnProperty'](_0x3d154c(0x15c))||!_0x16b3c3[_0x3d154c(0x1e6)](_0x3d154c(0xf3)))return{'error':_0x3d154c(0x198)};if(!_0x16b3c3[_0x3d154c(0x1e6)](_0x3d154c(0x15c))&&_0x16b3c3['hasOwnProperty']('clientip')){const {clientip:_0xfa7ee6}=_0x16b3c3;return _0x2ec835==_0xfa7ee6?{'success':_0x3d154c(0xbf)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x16b3c3[_0x3d154c(0x1e6)]('username')&&_0x16b3c3[_0x3d154c(0x1e6)]('clientip')){const {username:_0x14db54,clientip:_0xcebc41}=_0x16b3c3;return settings[_0x3d154c(0x17d)]==_0x14db54&&_0x2ec835==_0xcebc41?{'success':_0x3d154c(0xbf)}:{'error':_0x3d154c(0x15a)};}}},generateLoginToken=_0x75ec5c=>{const _0x29c0cc=_0x49a76d;if(_0x75ec5c){const _0x12ba80=devices[_0x75ec5c]['ip'];return jwt[_0x29c0cc(0x1eb)]({'username':settings[_0x29c0cc(0x17d)],'clientip':_0x12ba80},secure[_0x29c0cc(0x1ad)]+_0x75ec5c,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x253600=>{const _0x2c82e8=_0x49a76d;if(_0x253600){const _0x15d795=devices[_0x253600]['ip'];return jwt['sign']({'clientip':_0x15d795},secure['secret']+_0x253600,{'expiresIn':devices[_0x253600][_0x2c82e8(0x10d)][_0x2c82e8(0x131)]*0x3c});}else return![];},telegramIpApproved=_0x11c3ed=>{const _0x337726=_0x49a76d;let _0x43d57c=![];return devices[_0x11c3ed][_0x337726(0x10d)]&&devices[_0x11c3ed][_0x337726(0x10d)][_0x337726(0x131)]!=_0x337726(0x1c3)&&(_0x43d57c=devices[_0x11c3ed]['telegramIpApproval']['clientip']==devices[_0x11c3ed]['ip']&&new Date()[_0x337726(0x1c1)]()-devices[_0x11c3ed]['telegramIpApproval']['timestamp']<devices[_0x11c3ed][_0x337726(0x10d)][_0x337726(0x131)]*0x3c*0x3e8),_0x43d57c;},telegram2FaApproved=_0x419f9f=>{const _0x3249a0=_0x49a76d;let _0x1f11bb=![];return devices[_0x419f9f][_0x3249a0(0x1af)]&&devices[_0x419f9f][_0x3249a0(0x1af)][_0x3249a0(0x131)]!='reject'&&(_0x1f11bb=devices[_0x419f9f][_0x3249a0(0x1af)][_0x3249a0(0xca)]==devices[_0x419f9f]['ip']&&new Date()['getTime']()-devices[_0x419f9f]['telegram2FaApproval'][_0x3249a0(0xce)]<devices[_0x419f9f][_0x3249a0(0x1af)][_0x3249a0(0x131)]*0x3c*0x3e8),_0x1f11bb;},normalizeIP=_0x3b0b77=>{const _0x260040=_0x49a76d;let _0x3a89e7=null,_0x18277d=null;if(ipaddr[_0x260040(0xee)](_0x3b0b77)){const _0x4f3d9a=ipaddr['parse'](_0x3b0b77);_0x4f3d9a[_0x260040(0x1e1)]()==='ipv6'?(_0x4f3d9a[_0x260040(0xe6)]()&&(_0x3a89e7=_0x4f3d9a[_0x260040(0x1df)]()[_0x260040(0xf7)]()),_0x18277d=_0x4f3d9a[_0x260040(0xf7)]()):(_0x3a89e7=_0x4f3d9a[_0x260040(0xf7)](),_0x18277d=_0x4f3d9a[_0x260040(0x177)]()[_0x260040(0xf7)]());}return{'show':_0x3a89e7?_0x3a89e7:_0x18277d,'store':_0x18277d};};function sleep(_0x5c9ffd){return new Promise(_0x487957=>setTimeout(_0x487957,_0x5c9ffd));}