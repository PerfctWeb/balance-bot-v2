const _0x5744aa=_0x1cc7;(function(_0x4d12b3,_0x4a009b){const _0x312b69=_0x1cc7,_0x1a5fa0=_0x4d12b3();while(!![]){try{const _0x5b251b=parseInt(_0x312b69(0x25b))/0x1*(-parseInt(_0x312b69(0x27a))/0x2)+parseInt(_0x312b69(0x19f))/0x3*(parseInt(_0x312b69(0x223))/0x4)+-parseInt(_0x312b69(0x298))/0x5*(-parseInt(_0x312b69(0x22c))/0x6)+-parseInt(_0x312b69(0x1d4))/0x7*(-parseInt(_0x312b69(0x27d))/0x8)+parseInt(_0x312b69(0x1fc))/0x9+-parseInt(_0x312b69(0x1d3))/0xa*(-parseInt(_0x312b69(0x275))/0xb)+-parseInt(_0x312b69(0x19d))/0xc*(parseInt(_0x312b69(0x1ba))/0xd);if(_0x5b251b===_0x4a009b)break;else _0x1a5fa0['push'](_0x1a5fa0['shift']());}catch(_0x362265){_0x1a5fa0['push'](_0x1a5fa0['shift']());}}}(_0x4e71,0xe3c02));const _0x45f7fd=function(){let _0x4a0a56=!![];return function(_0x26df26,_0x1e9937){const _0x465e0a=_0x4a0a56?function(){const _0x47a476=_0x1cc7;if(_0x1e9937){const _0x54484d=_0x1e9937[_0x47a476(0x209)](_0x26df26,arguments);return _0x1e9937=null,_0x54484d;}}:function(){};return _0x4a0a56=![],_0x465e0a;};}(),_0x343d48=_0x45f7fd(this,function(){const _0x1ca9c1=_0x1cc7;return _0x343d48[_0x1ca9c1(0x1ed)]()[_0x1ca9c1(0x239)](_0x1ca9c1(0x22f))[_0x1ca9c1(0x1ed)]()[_0x1ca9c1(0x1eb)](_0x343d48)[_0x1ca9c1(0x239)]('(((.+)+)+)+$');});_0x343d48();'use strict';process['env'][_0x5744aa(0x18c)]=0x1;const childProcess=require(_0x5744aa(0x22d)),FileSync=require(_0x5744aa(0x1b9)),fs=require('fs'),fns=require(_0x5744aa(0x1cb)),low=require('lowdb'),path=require('path'),crypto=require(_0x5744aa(0x265)),Crypt=require(_0x5744aa(0x169))[_0x5744aa(0x218)],RSA=require('hybrid-crypto-js')['RSA'],bcrypt=require('bcryptjs'),jwt=require(_0x5744aa(0x26a)),analyticsLib=require(_0x5744aa(0x155))[_0x5744aa(0x240)],googleAnalytics=require(_0x5744aa(0x205))[_0x5744aa(0x240)],ipaddr=require(_0x5744aa(0x1df)),argv=require(_0x5744aa(0x17e))(process[_0x5744aa(0x19a)][_0x5744aa(0x177)](0x2))[_0x5744aa(0x19a)],PORT=argv[_0x5744aa(0x1ea)]||_0x5744aa(0x1f0),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console[_0x5744aa(0x16c)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x5744aa(0x28c)),process[_0x5744aa(0x1aa)](0x1);const HOST=argv[_0x5744aa(0x261)]||null,userID=argv['user']||'';let bbpath=_0x5744aa(0x251),bbpath2='';const botfile=_0x5744aa(0x23d),configfile='bb-config.json',settingsfile=_0x5744aa(0x25d),securefile=_0x5744aa(0x1af),validInstallation=fs['existsSync'](_0x5744aa(0x21b));!fs[_0x5744aa(0x190)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x5744aa(0x19e)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x5744aa(0x256),configbackuppath=configpath+_0x5744aa(0x295);!fs[_0x5744aa(0x190)](configpath)&&fs[_0x5744aa(0x204)](configpath);!fs['existsSync'](configbackuppath)&&fs['mkdirSync'](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);function _0x4e71(){const _0x3e66ab=['getPortfolio','bb-secure.json','Bot\x20Mgr\x20>\x20','f2aRequired','stopped','find','\x20>\x20','entries','pidRefreshToken','logout','Password\x20reset\x20rejected','lowdb/adapters/FileSync','39evqLMC','sign','version.json','Notifications\x20enabled','show','getTime','yes','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','\x20|\x20','stopPolling','storeConfiguration','callback_query','remove','disabled\x20Bot\x20','2FA\x20login\x20token\x20generated','Invalid\x20Telegram\x20token','ipv6','date-fns','name','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','removeListener','delete-alerts','hex','sendMessage','/:bot/portfolio','610bKVIAV','528087fkhsmZ','botmanager','Unauthorized\x20attempt\x20to\x20get\x20logs','args','add','Notifications\x20types:\x20','clientip','function','new','Token\x20blacklisted','length','ipaddr.js','live','Invalid\x20authentication\x20token\x20(2)','chat','uuid','onText','parse','Unauthorized\x20attempt\x20to\x20get\x20portfolio','build','all','2FA','port','constructor','Unauthorized\x20attempt\x20to\x20log\x20out','toString','Temporary\x20access\x20rejected','placeOrder','3000','telegramChatId','get','Unauthorized\x20login\x20attempt\x20(timeout)','from','set','randomFillSync','store-settings','/:bot/history','apiKey','randomBytes','-events.json','3216375kcLxrN','reject','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','static','-performance.json','secure','login\x20token\x20generated','reset-password','mkdirSync','@analytics/google-analytics','sha256','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','apply','All\x20bots\x20running\x20right\x20now','telegram2FaApproval','toIPv4MappedAddress','headers','defaults','bots','ipc','Orders','copyFileSync','place-order','login\x20required','index.html','starting\x20new\x20bot\x20|\x20Bot\x20','getUTCHours','Crypt','HTML','bot-','../install.js','decrypt','restarting\x20Bot\x20','restart','inherit','hasOwnProperty','build2','pidExpireLogin','12DHRMii','store-configuration','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','temporary\x20access\x20timeout','send','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','http','telegramUsername','page','12918HHvsUi','child_process','store-headless','(((.+)+)+)+$','All\x20bots','</b>\x20?','enabled\x20Bot\x20','https://hodlerhacks.com','exp','compareSync','::1','password','Access\x20enabled\x20for\x20','search','sortBy','/:bot/performance','new-disabled','bot.js','/disable\x20-\x20disable\x20notifications\x0a','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','default','/enable\x20-\x20enable\x20notifications\x0a','2FA\x20required','User\x20has\x20been\x20validated','2FA\x20login\x20rejected','getMinutes','2FA\x20login\x20required','type','15\x20min','Notifications\x20disabled\x0a','expiry','telegramIpApproval','delete-bot','temporaryAccessAllowed','login\x20not\x20required','************','starting\x20bot\x20|\x20Bot\x20','bb/','catch','telegramToken','SIGTERM','unlinkSync','config/','kill','error','success','privateKey','281511kartOT','/status\x20-\x20show\x20bot(s)\x20status\x0a','bb-settings.json','timestamp','cancel-loading','disabled','host','match','includes','No\x20authentication\x20token','crypto','temporary\x20access\x20rejected','createServer','stop','value','jsonwebtoken','update-bot','forEach','polling_error','cloneDeep','version','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/:bot','idling\x20bot\x20\x20\x20|\x20Bot\x20','listen','telegramEnabled','328581clmrdt',':\x20Bot\x20Mgr\x20>\x20','fork','Invalid\x20IP\x20address','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','6cXRYkc','kind','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','72YuxvNG','/restart\x20-\x20restart\x20bot(s)\x0a','5\x20min','sendFile','timeshift','30\x20min','::ffff:127.0.0.1','username','allow','removeAllListeners','Bot\x20','whitelist','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','initclient','auth',',\x20must\x20be\x20a\x204\x20digit\x20number','disconnect','token','404\x20Not\x20Found',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','telegram','Allow\x20login\x20from\x20IP\x20address\x20<b>','login','getFullYear','backup/','settings','settings.','2920lasFyI','1000','blacklist','isDirectory','reason','running','analytics','filter','notification','Balance\x20Bot','cancelLoading','/help\x20-\x20show\x20available\x20commands\x0a','-----------------------------------------------------------------------------------','bot','message','then','logged\x20out','Ok,\x20will\x20send\x20order\x20notifications\x20only','publicKey','get-portfolio','getSeconds','emit','Unauthorized\x20attempt\x20to\x20store\x20configuration','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','/on\x20-\x20start\x20bot(s)\x0a','started','hybrid-crypto-js','enabled','once','log','access','whitelistEnabled','<b>Balance\x20Bot\x20status:</b>\x0a','deleted\x20Bot\x20','UA-192771731-1','-config.json','alerts','orders','telegramEvents','map','slice','Notifications\x20enabled\x0a','node-telegram-bot-api','handshake','Unauthorized\x20attempt\x20to\x20delete\x20alerts','get-starting-balances','order','yargs/yargs','join','botname','bbUsername','Unauthorized\x20attempt\x20to\x20add\x20bot','-results.json','temporary\x20token\x20generated','connection','data','/:bot/support','Unauthorized\x20attempt\x20to\x20update\x20settings','write','hashSync','Notifications\x20disabled','NTBA_FIX_319','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','Unauthorized\x20attempt\x20to\x20delete\x20bot','add-bot','existsSync','push','getMonth','split','deleteHistoryAlerts','secret','use','loginRequired','All','padStart','argv','/:bot/coins','RSA-OAEP','15462420RRXrsv','clients','1527177xvJclm','status','sockets','Unauthorized\x20attempt\x20to\x20update\x20bot','getHours','connected','bbPassword','/off\x20-\x20stop\x20bot(s)\x0a','botID','assign','No\x20bots\x20running\x20right\x20now','exit','answerCallbackQuery','emitHistory','Login\x20rejected'];_0x4e71=function(){return _0x3e66ab;};return _0x4e71();}dbConfig[_0x5744aa(0x20e)]({'bots':[]})[_0x5744aa(0x189)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x5744aa(0x20e)]({'settings':{'timeshift':0x0}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure['defaults']({'secure':{},'blacklist':[]})['write']();let crypt=new Crypt({'md':_0x5744aa(0x206),'rsaStandard':_0x5744aa(0x19c)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x5744aa(0x1bc))[_0x5744aa(0x26f)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![];oneTimeMigration(),cleanBlacklist();const express=require('express'),app=express(),http=require(_0x5744aa(0x229))[_0x5744aa(0x267)](app);app[_0x5744aa(0x196)](express[_0x5744aa(0x1ff)](path[_0x5744aa(0x17f)](__dirname,bbpath2,_0x5744aa(0x221)))),app['use'](express[_0x5744aa(0x1ff)](path['join'](__dirname,bbpath2,'build'))),app[_0x5744aa(0x1f2)]('/',function(_0x57ea6b,_0x41fde1){const _0x539cbf=_0x5744aa;_0x41fde1[_0x539cbf(0x280)](path[_0x539cbf(0x17f)](__dirname,bbpath2,_0x539cbf(0x221),_0x539cbf(0x215)));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x271),function(_0x35b845,_0x5bb59f){const _0x515908=_0x5744aa;_0x5bb59f[_0x515908(0x280)](path[_0x515908(0x17f)](__dirname,bbpath2,'build',_0x515908(0x215)));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x1d2),(_0x476e7b,_0x5afad0)=>{const _0x2710f0=_0x5744aa;_0x5afad0[_0x2710f0(0x280)](path[_0x2710f0(0x17f)](__dirname,bbpath2,'build','index.html'));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x23b),(_0x48d4dc,_0xbbd994)=>{const _0x46711b=_0x5744aa;_0xbbd994[_0x46711b(0x280)](path[_0x46711b(0x17f)](__dirname,bbpath2,'build','index.html'));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x19b),(_0x44e281,_0x25bb8c)=>{const _0x1fbc45=_0x5744aa;_0x25bb8c['sendFile'](path[_0x1fbc45(0x17f)](__dirname,bbpath2,_0x1fbc45(0x1e7),_0x1fbc45(0x215)));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x1f8),(_0x15ba3b,_0x6bf6dc)=>{const _0x53ad7f=_0x5744aa;_0x6bf6dc[_0x53ad7f(0x280)](path[_0x53ad7f(0x17f)](__dirname,bbpath2,'build','index.html'));}),app[_0x5744aa(0x1f2)]('/:bot/configuration',(_0x53379a,_0xfbc70)=>{const _0x60f0f9=_0x5744aa;_0xfbc70[_0x60f0f9(0x280)](path[_0x60f0f9(0x17f)](__dirname,bbpath2,_0x60f0f9(0x1e7),'index.html'));}),app[_0x5744aa(0x1f2)](_0x5744aa(0x187),(_0x2e3eaa,_0x1f3d86)=>{const _0x59165a=_0x5744aa;_0x1f3d86[_0x59165a(0x280)](path[_0x59165a(0x17f)](__dirname,bbpath2,'build',_0x59165a(0x215)));});if(HOST)http[_0x5744aa(0x273)](PORT,HOST);else http[_0x5744aa(0x273)](PORT);const io=require('socket.io')(http,{}),analytics=analyticsLib({'app':_0x5744aa(0x158),'plugins':[googleAnalytics({'trackingId':_0x5744aa(0x171)})]}),TelegramBot=require(_0x5744aa(0x179));let tgBot;if(settings['telegramToken']&&settings[_0x5744aa(0x253)]!=''&&settings[_0x5744aa(0x22a)]&&settings[_0x5744aa(0x22a)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x391051=_0x5744aa;console[_0x391051(0x16c)](''),console[_0x391051(0x16c)]('-----------------------------------------------------------------------------------'),logging('Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:'+PORT),console['log'](_0x391051(0x15b));if(config[_0x391051(0x1de)]!=0x0)config[_0x391051(0x26c)](_0x5ab5f4=>{const _0x54f5ac=_0x391051;if(_0x5ab5f4['status']=='enabled'||_0x5ab5f4[_0x54f5ac(0x1a0)]=='new')logging(_0x54f5ac(0x250)+_0x5ab5f4[_0x54f5ac(0x1a7)]+_0x54f5ac(0x1c2)+_0x5ab5f4[_0x54f5ac(0x180)]),startBot([_0x5ab5f4[_0x54f5ac(0x1a7)],userID],{'cwd':bbpath},function(_0x21e590){if(_0x21e590)logging(_0x21e590);});else(_0x5ab5f4[_0x54f5ac(0x1a0)]==_0x54f5ac(0x260)||_0x5ab5f4['status']==_0x54f5ac(0x23c))&&logging(_0x54f5ac(0x272)+_0x5ab5f4[_0x54f5ac(0x1a7)]+_0x54f5ac(0x1c2)+_0x5ab5f4[_0x54f5ac(0x180)]);});else!newBot&&console['log']('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();console[_0x391051(0x16c)](_0x391051(0x15b)),console[_0x391051(0x16c)]('');}function startSocket(){const _0x2a0075=_0x5744aa;io['on'](_0x2a0075(0x185),_0x455dd0=>{const _0x36bc8f=_0x2a0075;let _0x420ddf,_0x387811,_0x2ff549,_0x583fac,_0x2e2384;const _0x371669=_0x455dd0['handshake'][_0x36bc8f(0x20d)]['referer'];_0x387811=_0x371669[_0x36bc8f(0x262)](/bot[0-9]{3}/);if(_0x387811)_0x2ff549=_0x387811[0x0][_0x36bc8f(0x262)](/[0-9]{3}/);if(_0x2ff549)_0x420ddf=_0x2ff549[0x0];else _0x420ddf='botmanager';const _0x2be5b6=_0x455dd0[_0x36bc8f(0x17a)][_0x36bc8f(0x28b)]['encryptedUuid'];if(!_0x2be5b6)_0x455dd0[_0x36bc8f(0x164)](_0x36bc8f(0x1a0),{'publicKey':secure[_0x36bc8f(0x161)]});else{_0x583fac=timelyDecrypt(_0x2be5b6,![]);if(!_0x583fac)_0x455dd0[_0x36bc8f(0x164)](_0x36bc8f(0x1a0),{'publicKey':secure[_0x36bc8f(0x161)]});else{_0x2e2384=normalizeIP(_0x455dd0['conn']['remoteAddress'])['store'];if(!devices[_0x583fac])devices[_0x583fac]={'uuid':_0x583fac,'access':{'token':null}};devices[_0x583fac]['ip']=_0x2e2384;const _0x1e3b2a=addClient(_0x455dd0['id'],_0x583fac,_0x420ddf);setAccess(_0x1e3b2a),_0x455dd0['on'](_0x36bc8f(0x293),_0x191bbc=>{const _0x182601=_0x36bc8f,_0x136896=timelyDecrypt(_0x191bbc[_0x182601(0x237)]);if(_0x136896){_0x191bbc={'username':_0x191bbc[_0x182601(0x284)],'password':_0x136896},devices[_0x583fac]['access']=validateCredentials(_0x191bbc,_0x583fac);if(devices[_0x583fac]['access'][_0x182601(0x285)]==![]&&devices[_0x583fac]['access']['reason']==_0x182601(0x246))_0x455dd0[_0x182601(0x164)](_0x182601(0x1a0),{'access':devices[_0x583fac][_0x182601(0x16d)]}),loginAccess2FA(_0x583fac,_0x2e2384);else{if(devices[_0x583fac][_0x182601(0x16d)][_0x182601(0x285)]==![]&&devices[_0x583fac][_0x182601(0x16d)][_0x182601(0x153)]=='invalid\x20credentials')_0x455dd0[_0x182601(0x164)](_0x182601(0x1a0),{'access':devices[_0x583fac]['access']});else devices[_0x583fac]['access']['allow']&&devices[_0x583fac][_0x182601(0x16d)][_0x182601(0x153)]==_0x182601(0x202)&&(getClientsWithUuid(_0x583fac)[_0x182601(0x26c)](_0x2b2a25=>{setAccess(_0x2b2a25);}),setTokenRefresh(_0x583fac),setSessionTimeout(_0x182601(0x293),_0x583fac));}}else logging(_0x182601(0x1f3));}),_0x455dd0['on'](_0x36bc8f(0x203),()=>{resetPassword();}),_0x455dd0['on'](_0x36bc8f(0x28d),_0x3ef097=>{removeClient(_0x455dd0['id']);});}}});}function initClient(_0x106427){const _0x9f752c=_0x5744aa;if(_0x106427!=_0x9f752c(0x1d5)&&config[_0x9f752c(0x1f9)]!=''){if(pid[_0x106427])pid[_0x106427][_0x9f752c(0x227)]({'function':_0x9f752c(0x28a),'args':null});}}function getSocket(_0x26b779){const _0x269c4f=_0x5744aa;return io[_0x269c4f(0x1a1)][_0x269c4f(0x1a1)][_0x269c4f(0x1f2)](_0x26b779);}function setAccess(_0x29edec){const _0x40aee9=_0x5744aa,_0x8ef20f=getSocket(_0x29edec['id']),_0x4476e1=_0x29edec[_0x40aee9(0x1e3)],_0x3186a4=_0x29edec[_0x40aee9(0x15c)];devices[_0x4476e1][_0x40aee9(0x16d)]=validateAccess(devices[_0x4476e1][_0x40aee9(0x16d)][_0x40aee9(0x28e)],_0x4476e1),_0x8ef20f[_0x40aee9(0x17f)](_0x4476e1);if(devices[_0x4476e1]['access'][_0x40aee9(0x285)]){_0x8ef20f[_0x40aee9(0x17f)](_0x3186a4);if(_0x3186a4==_0x40aee9(0x1d5))initializeSocketBotManager(_0x8ef20f);else initializeSocketBot(_0x8ef20f);initClient(_0x3186a4);}devices[_0x4476e1]['access']['token']&&devices[_0x4476e1][_0x40aee9(0x16d)][_0x40aee9(0x153)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x40aee9(0x1e9),_0x4476e1),devices[_0x4476e1][_0x40aee9(0x16d)][_0x40aee9(0x28e)]&&devices[_0x4476e1][_0x40aee9(0x16d)][_0x40aee9(0x153)]==_0x40aee9(0x1c8)&&setSessionTimeout('login',_0x4476e1),_0x8ef20f[_0x40aee9(0x164)](_0x40aee9(0x1a0),{'status':_0x29edec['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x4476e1]['access'],'externalip':devices[_0x4476e1]['ip'],'publicKey':secure[_0x40aee9(0x161)],'validInstallation':validInstallation}),devices[_0x4476e1]['access'][_0x40aee9(0x285)]==![]&&devices[_0x4476e1][_0x40aee9(0x16d)][_0x40aee9(0x153)]==_0x40aee9(0x242)&&temporaryAccess2FA(_0x4476e1,devices[_0x4476e1]['ip']);}function setSessionTimeout(_0x521d93,_0x4514ab){const _0x2297fb=_0x5744aa;let _0x1d324e;if(_0x521d93==_0x2297fb(0x293))_0x1d324e=loginExpiry*0x3c*0x3e8;else _0x1d324e=devices[_0x4514ab][_0x2297fb(0x24b)][_0x2297fb(0x24a)]*0x3c*0x3e8-(new Date()['getTime']()-devices[_0x4514ab][_0x2297fb(0x24b)]['timestamp']);if(devices[_0x4514ab][_0x2297fb(0x222)])clearTimeout(devices[_0x4514ab]['pidExpireLogin']);devices[_0x4514ab][_0x2297fb(0x222)]=setTimeout(()=>{const _0x317d39=_0x2297fb;if(devices[_0x4514ab][_0x317d39(0x1b6)])clearTimeout(devices[_0x4514ab][_0x317d39(0x1b6)]);removeSocketListeners(_0x4514ab),addBlacklist(_0x4514ab),devices[_0x4514ab][_0x317d39(0x24b)]=null,devices[_0x4514ab][_0x317d39(0x20b)]=null,devices[_0x4514ab]['access'][_0x317d39(0x28e)]=null,devices[_0x4514ab][_0x317d39(0x16d)]=validateAccess(devices[_0x4514ab][_0x317d39(0x16d)]['token'],_0x4514ab),!(devices[_0x4514ab][_0x317d39(0x16d)][_0x317d39(0x285)]&&devices[_0x4514ab][_0x317d39(0x16d)][_0x317d39(0x153)]=='login\x20not\x20required')&&(_0x521d93=='login'?io['to'](_0x4514ab)[_0x317d39(0x164)](_0x317d39(0x1a0),{'access':{'allow':![],'reason':'access\x20timeout','token':null}}):io['to'](_0x4514ab)[_0x317d39(0x164)](_0x317d39(0x1a0),{'access':{'allow':![],'reason':_0x317d39(0x226),'token':null}})),devices[_0x4514ab][_0x317d39(0x16d)][_0x317d39(0x28e)]=null;},_0x1d324e);}function setTokenRefresh(_0x2a73e3){const _0x350bbe=_0x5744aa;if(devices[_0x2a73e3]['pidRefreshToken'])clearTimeout(devices[_0x2a73e3]['pidRefreshToken']);devices[_0x2a73e3][_0x350bbe(0x1b6)]=setTimeout(()=>{const _0x442e59=_0x350bbe;getClientsWithUuid(_0x2a73e3)['length']!=0x0?(devices[_0x2a73e3][_0x442e59(0x16d)]=refreshToken(_0x2a73e3),io['to'](_0x2a73e3)[_0x442e59(0x164)](_0x442e59(0x1a0),{'status':_0x442e59(0x1a4),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2a73e3]['access'],'externalip':devices[_0x2a73e3]['ip'],'publicKey':secure[_0x442e59(0x161)],'validInstallation':validInstallation}),setTokenRefresh(_0x2a73e3)):clearTimeout(devices[_0x2a73e3][_0x442e59(0x1b6)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x24e205){const _0x1842ee=_0x5744aa,_0x315e78=getClient(_0x24e205['id'])['uuid'];_0x24e205[_0x1842ee(0x164)](_0x1842ee(0x20f),config),_0x24e205[_0x1842ee(0x164)](_0x1842ee(0x296),cleanSettings()),_0x24e205['on'](_0x1842ee(0x18f),_0x126839=>{const _0x3e543c=_0x1842ee;if(validateAccess(_0x126839,_0x315e78)[_0x3e543c(0x285)])addBot();else logging(_0x3e543c(0x182));}),_0x24e205['on'](_0x1842ee(0x26b),(_0x555d58,_0x513f26)=>{const _0x1a091b=_0x1842ee;if(validateAccess(_0x513f26,_0x315e78)[_0x1a091b(0x285)])toggleBot(_0x555d58[_0x1a091b(0x1a7)],_0x555d58[_0x1a091b(0x1a0)],_0x555d58['live']);else logging(_0x1a091b(0x1a2));}),_0x24e205['on'](_0x1842ee(0x24c),(_0x1a296a,_0x56d89e)=>{const _0x4c8442=_0x1842ee;if(validateAccess(_0x56d89e,_0x315e78)['allow'])deleteBot(_0x1a296a);else logging(_0x4c8442(0x18e));}),_0x24e205['on'](_0x1842ee(0x1f7),(_0x2217ec,_0x168364)=>{const _0xf7cb7b=_0x1842ee;if(validateAccess(_0x168364,_0x315e78)[_0xf7cb7b(0x285)])storeSettings(_0x2217ec,!![]);else logging(_0xf7cb7b(0x188));}),_0x24e205['on']('update-bb',(_0x5ae1b1,_0x21fc5a)=>{const _0x480166=_0x1842ee;if(validateAccess(_0x21fc5a,_0x315e78)[_0x480166(0x285)])updateBB();else logging('Unauthorized\x20attempt\x20to\x20update\x20settings');}),_0x24e205['on'](_0x1842ee(0x1b7),_0x47ff8e=>{const _0x3c71e7=_0x1842ee;if(validateAccess(_0x47ff8e,_0x315e78)[_0x3c71e7(0x285)]){if(devices[_0x315e78][_0x3c71e7(0x1b6)])clearTimeout(devices[_0x315e78][_0x3c71e7(0x1b6)]);if(devices[_0x315e78][_0x3c71e7(0x222)])clearTimeout(devices[_0x315e78][_0x3c71e7(0x222)]);removeSocketListeners(getClient(_0x24e205['id'])[_0x3c71e7(0x1e3)]),addBlacklist(_0x315e78),devices[_0x315e78][_0x3c71e7(0x24b)]=null,devices[_0x315e78][_0x3c71e7(0x20b)]=null,devices[_0x315e78][_0x3c71e7(0x16d)][_0x3c71e7(0x28e)]=null,io['to'](getClient(_0x24e205['id'])[_0x3c71e7(0x1e3)])['emit'](_0x3c71e7(0x1a0),{'access':{'allow':![],'reason':_0x3c71e7(0x15f),'token':null}});}else logging(_0x3c71e7(0x1ec));});}function initializeSocketBot(_0x4d78e5){const _0x5eec4c=_0x5744aa,_0x436f68=getClient(_0x4d78e5['id'])['bot'],_0x44fa7a=getClient(_0x4d78e5['id'])['uuid'];_0x4d78e5['on']('get-logs',(_0x457df6,_0x55db94)=>{const _0x44164a=_0x1cc7;if(validateAccess(_0x55db94,_0x44fa7a)[_0x44164a(0x285)]){if(pid[_0x436f68])pid[_0x436f68]['send']({'function':_0x44164a(0x1ac),'args':_0x457df6});}else logging(_0x44164a(0x1d6));}),_0x4d78e5['on'](_0x5eec4c(0x1cf),(_0x1ecdbf,_0x1c2f83)=>{const _0x190b28=_0x5eec4c;if(validateAccess(_0x1c2f83,_0x44fa7a)[_0x190b28(0x285)]){if(pid[_0x436f68])pid[_0x436f68][_0x190b28(0x227)]({'function':_0x190b28(0x194),'args':_0x1ecdbf});}else logging(_0x190b28(0x17b));}),_0x4d78e5['on'](_0x5eec4c(0x162),(_0x4c58a6,_0x15c5eb)=>{const _0x202be7=_0x5eec4c;if(validateAccess(_0x15c5eb,_0x44fa7a)[_0x202be7(0x285)]){if(pid[_0x436f68])pid[_0x436f68][_0x202be7(0x227)]({'function':_0x202be7(0x1ae),'args':_0x4c58a6});}else logging(_0x202be7(0x1e6));}),_0x4d78e5['on'](_0x5eec4c(0x224),(_0x4817ff,_0x506132)=>{const _0x58e659=_0x5eec4c;if(validateAccess(_0x506132,_0x44fa7a)[_0x58e659(0x285)]){if(pid[_0x436f68])pid[_0x436f68][_0x58e659(0x227)]({'function':_0x58e659(0x1c4),'args':_0x4817ff});}else logging(_0x58e659(0x165));}),_0x4d78e5['on'](_0x5eec4c(0x22e),(_0x484ed9,_0x38cfa3)=>{const _0xada2c5=_0x5eec4c;if(validateAccess(_0x38cfa3,_0x44fa7a)[_0xada2c5(0x285)]){if(pid[_0x436f68])pid[_0x436f68]['send']({'function':'storeHeadless','args':_0x484ed9});}else logging(_0xada2c5(0x207));}),_0x4d78e5['on'](_0x5eec4c(0x17c),_0x12b7ac=>{const _0x2c4761=_0x5eec4c;if(validateAccess(_0x12b7ac,_0x44fa7a)[_0x2c4761(0x285)]){if(pid[_0x436f68])pid[_0x436f68][_0x2c4761(0x227)]({'function':'getStartingBalances','args':null});}else logging(_0x2c4761(0x18d));}),_0x4d78e5['on'](_0x5eec4c(0x213),(_0x1e0b48,_0x41cdd9)=>{const _0x11b04f=_0x5eec4c;if(validateAccess(_0x41cdd9,_0x44fa7a)[_0x11b04f(0x285)]){if(pid[_0x436f68])pid[_0x436f68]['send']({'function':_0x11b04f(0x1ef),'args':_0x1e0b48});}else logging(_0x11b04f(0x1fe));}),_0x4d78e5['on'](_0x5eec4c(0x25f),_0x40b2ee=>{const _0x347750=_0x5eec4c;if(validateAccess(_0x40b2ee,_0x44fa7a)['allow']){if(pid[_0x436f68])pid[_0x436f68][_0x347750(0x227)]({'function':_0x347750(0x159),'args':null});}else logging(_0x347750(0x270));}),_0x4d78e5['on'](_0x5eec4c(0x1b7),_0x42d3f4=>{const _0x4ecb46=_0x5eec4c;if(validateAccess(_0x42d3f4,_0x44fa7a)[_0x4ecb46(0x285)]){if(devices[_0x44fa7a]['pidRefreshToken'])clearTimeout(devices[_0x44fa7a][_0x4ecb46(0x1b6)]);if(devices[_0x44fa7a][_0x4ecb46(0x222)])clearTimeout(devices[_0x44fa7a]['pidExpireLogin']);removeSocketListeners(getClient(_0x4d78e5['id'])['uuid']),addBlacklist(_0x44fa7a),devices[_0x44fa7a][_0x4ecb46(0x24b)]=null,devices[_0x44fa7a]['telegram2FaApproval']=null,devices[_0x44fa7a][_0x4ecb46(0x16d)][_0x4ecb46(0x28e)]=null,io['to'](getClient(_0x4d78e5['id'])[_0x4ecb46(0x1e3)])[_0x4ecb46(0x164)](_0x4ecb46(0x1a0),{'access':{'allow':![],'reason':_0x4ecb46(0x15f),'token':null}});}else logging(_0x4ecb46(0x1ec));});}function removeSocketListeners(_0x1adea9){const _0x411069=_0x5744aa;getClientsWithUuid(_0x1adea9)[_0x411069(0x26c)](_0x3c8adf=>{const _0x5a79df=_0x411069;getSocket(_0x3c8adf['id'])[_0x5a79df(0x286)]();});}function cleanSettings(){const _0x24d1e9=_0x5744aa;let _0x370eec=settings;return settings[_0x24d1e9(0x253)]&&settings[_0x24d1e9(0x253)]!=''&&(_0x370eec={..._0x370eec,'telegramToken':'************'}),settings[_0x24d1e9(0x1a5)]&&settings['bbPassword']!=''&&(_0x370eec={..._0x370eec,'bbPassword':_0x24d1e9(0x24f)}),_0x370eec;}function updateBB(){const _0x3c81fc=_0x5744aa;installingUpdate=!![],config[_0x3c81fc(0x26c)](_0x46bc4a=>{const _0xf0b00f=_0x3c81fc;restartBot(_0x46bc4a[_0xf0b00f(0x1a7)]);}),process[_0x3c81fc(0x227)]({'update':!![]},_0x5595ee=>{});}function startBot(_0x10e968,_0x256645,_0x469985){const _0x1bdde6=_0x5744aa;let _0x56ded4=![];const _0x5aae56=_0x10e968[0x0];_0x256645={..._0x256645,'stdio':['inherit',_0x1bdde6(0x21f),_0x1bdde6(0x21f),_0x1bdde6(0x210)]},pid[_0x5aae56]=childProcess[_0x1bdde6(0x277)](botfile,_0x10e968,_0x256645),pid[_0x5aae56]['on'](_0x1bdde6(0x15d),_0xbe5b8b=>{const _0x76f287=_0x1bdde6;switch(Object['keys'](_0xbe5b8b)[0x0]){case _0x76f287(0x180):updateBotName(_0x5aae56,_0xbe5b8b['botname']);break;case _0x76f287(0x1a0):updateStatus(_0x5aae56,_0xbe5b8b[_0x76f287(0x1a0)]);break;case'live':updateLive(_0x5aae56,_0xbe5b8b[_0x76f287(0x1e0)]);break;case _0x76f287(0x168):updateLive(_0x5aae56,_0xbe5b8b[_0x76f287(0x168)]),io['to'](_0x5aae56)[_0x76f287(0x164)]('status',{'access':{'allow':![],'reason':'reload','token':null}});break;case'stop':_0xbe5b8b[_0x76f287(0x268)]==_0x76f287(0x21e)&&restartBot(_0x5aae56);_0xbe5b8b[_0x76f287(0x268)]=='kill'&&toggleBot(_0x5aae56,_0x76f287(0x260),_0x76f287(0x1b2));break;case _0x76f287(0x291):sendTelegram(_0x5aae56,_0xbe5b8b['telegram']);break;case _0x76f287(0x1db):io['to'](_0x5aae56)[_0x76f287(0x164)](_0xbe5b8b[_0x76f287(0x1db)],_0xbe5b8b[_0x76f287(0x1d7)]);break;}}),pid[_0x5aae56]['on'](_0x1bdde6(0x258),function(_0x5e8607){if(_0x56ded4)return;_0x56ded4=!![],_0x469985(_0x5e8607);}),pid[_0x5aae56]['on'](_0x1bdde6(0x1aa),function(_0x4822f7){const _0x201804=_0x1bdde6;if(installingUpdate)return;if(_0x56ded4)return;_0x56ded4=!![],_0x469985(null);const _0x5c15fd=dbConfig[_0x201804(0x1f2)]('bots')[_0x201804(0x1b3)]({'botID':_0x5aae56})['value']();_0x5c15fd&&(_0x5c15fd[_0x201804(0x1a0)]=='enabled'||_0x5c15fd[_0x201804(0x1a0)]=='new')&&(updateLive(_0x5aae56,_0x201804(0x1b2)),logging(_0x201804(0x21d)+_0x5aae56),startBot([_0x5aae56,userID],{'cwd':bbpath},function(_0x5d67c4){if(_0x5d67c4)logging(_0x5d67c4);}));});}function stopBot(_0x5c5749){const _0x41192a=_0x5744aa;getClientsWithBotID(_0x5c5749)['forEach'](_0x49c0c2=>{const _0x58b179=_0x1cc7;getSocket(_0x49c0c2['id'])[_0x58b179(0x28d)](!![]),removeClient(_0x49c0c2['id']);});if(pid[_0x5c5749])pid[_0x5c5749][_0x41192a(0x257)]();}function restartBot(_0x28ce93){if(pid[_0x28ce93])pid[_0x28ce93]['kill']();}function addBot(){const _0x97e4a6=_0x5744aa;let _0x1afc5f;for(let _0x40d6d5=0x1;_0x40d6d5<0x3e9;_0x40d6d5++){_0x1afc5f=_0x40d6d5[_0x97e4a6(0x1ed)]()[_0x97e4a6(0x199)](0x3,'0');let _0x22d1fa=config[_0x97e4a6(0x1b3)](_0x586679=>_0x586679[_0x97e4a6(0x1a7)]==_0x1afc5f);if(!_0x22d1fa)break;}if(_0x1afc5f===_0x97e4a6(0x299)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x97e4a6(0x216)+_0x1afc5f),dbConfig[_0x97e4a6(0x1f2)]('bots')[_0x97e4a6(0x191)]({'botID':_0x1afc5f,'botname':_0x97e4a6(0x287)+_0x1afc5f,'status':'new','live':''})[_0x97e4a6(0x189)](),startBot([_0x1afc5f,userID],{'cwd':bbpath},function(_0x45300e){if(_0x45300e)logging(_0x45300e);}),config=getConfiguration(),io['to'](_0x97e4a6(0x1d5))[_0x97e4a6(0x164)](_0x97e4a6(0x20f),config);}function deleteBot(_0x47e491){const _0x56b3c3=_0x5744aa;getClientsWithBotID(_0x47e491)[_0x56b3c3(0x26c)](_0x676211=>{getSocket(_0x676211['id'])['disconnect'](!![]),removeClient(_0x676211['id']);}),dbConfig[_0x56b3c3(0x1f2)]('bots')[_0x56b3c3(0x1c6)]({'botID':_0x47e491})[_0x56b3c3(0x189)](),logging(_0x56b3c3(0x170)+_0x47e491),stopBot(_0x47e491);try{fs[_0x56b3c3(0x255)](path[_0x56b3c3(0x17f)](configpath,_0x56b3c3(0x21a)+_0x47e491+_0x56b3c3(0x172))),fs[_0x56b3c3(0x255)](path[_0x56b3c3(0x17f)](configpath,_0x56b3c3(0x21a)+_0x47e491+_0x56b3c3(0x1fb))),fs[_0x56b3c3(0x255)](path[_0x56b3c3(0x17f)](configpath,_0x56b3c3(0x21a)+_0x47e491+_0x56b3c3(0x200))),fs[_0x56b3c3(0x255)](path[_0x56b3c3(0x17f)](configpath,_0x56b3c3(0x21a)+_0x47e491+_0x56b3c3(0x183)));}catch(_0x53543c){if(_0x53543c)logging('error\x20while\x20deleting\x20config\x20files:\x20',_0x53543c);}config=getConfiguration(),io['to'](_0x56b3c3(0x1d5))['emit'](_0x56b3c3(0x20f),config);}function toggleBot(_0x348cbd,_0x2c02d2,_0x2870a4){const _0x40f678=_0x5744aa;dbConfig[_0x40f678(0x1f2)](_0x40f678(0x20f))[_0x40f678(0x1b3)]({'botID':_0x348cbd})['assign']({'status':_0x2c02d2})['assign']({'live':_0x2870a4})['write']();if(_0x2c02d2==_0x40f678(0x16a)||_0x2c02d2==_0x40f678(0x1dc))logging(_0x40f678(0x232)+_0x348cbd),startBot([_0x348cbd,userID],{'cwd':bbpath},function(_0x4fe621){if(_0x4fe621)logging(_0x4fe621);});else(_0x2c02d2==_0x40f678(0x260)||_0x2c02d2==_0x40f678(0x23c))&&(logging(_0x40f678(0x1c7)+_0x348cbd),stopBot(_0x348cbd));config=getConfiguration(),io['to']('botmanager')[_0x40f678(0x164)]('bots',config);}function toggleStatus(_0x2ca4f6){const _0x3d46cb=_0x5744aa;let _0x5c5ed0=dbConfig[_0x3d46cb(0x1f2)](_0x3d46cb(0x20f))[_0x3d46cb(0x1b3)]({'botID':_0x2ca4f6})[_0x3d46cb(0x269)](),_0x22445e;if(_0x5c5ed0[_0x3d46cb(0x1a0)]===_0x3d46cb(0x16a))_0x22445e=_0x3d46cb(0x260);else{if(_0x5c5ed0[_0x3d46cb(0x1a0)]===_0x3d46cb(0x1dc))_0x22445e=_0x3d46cb(0x23c);else{if(_0x5c5ed0[_0x3d46cb(0x1a0)]===_0x3d46cb(0x23c))_0x22445e=_0x3d46cb(0x1dc);else{if(_0x5c5ed0[_0x3d46cb(0x1a0)]===_0x3d46cb(0x260))_0x22445e=_0x3d46cb(0x16a);}}}return _0x22445e;}function updateStatus(_0x15696c,_0x415fa9){const _0x5ca947=_0x5744aa;dbConfig[_0x5ca947(0x1f2)](_0x5ca947(0x20f))[_0x5ca947(0x1b3)]({'botID':_0x15696c})[_0x5ca947(0x1a8)]({'status':_0x415fa9})[_0x5ca947(0x189)](),config=getConfiguration(),io['to'](_0x5ca947(0x1d5))[_0x5ca947(0x164)]('bots',config);}function updateLive(_0x2cec85,_0x50d875){const _0x39a09d=_0x5744aa;dbConfig['get'](_0x39a09d(0x20f))[_0x39a09d(0x1b3)]({'botID':_0x2cec85})[_0x39a09d(0x1a8)]({'live':_0x50d875})[_0x39a09d(0x189)](),config=getConfiguration(),io['to']('botmanager')[_0x39a09d(0x164)](_0x39a09d(0x20f),config);}function updateBotName(_0x23c3e0,_0x41e881){const _0x4514c1=_0x5744aa;dbConfig[_0x4514c1(0x1f2)](_0x4514c1(0x20f))[_0x4514c1(0x1b3)]({'botID':_0x23c3e0})[_0x4514c1(0x1a8)]({'botname':_0x41e881})['write'](),config=getConfiguration(),io['to'](_0x4514c1(0x1d5))[_0x4514c1(0x164)](_0x4514c1(0x20f),config);}function telegramError(_0xa6b58e){const _0x4c2e27=_0x5744aa;console[_0x4c2e27(0x16c)](getTimeStamp()+_0x4c2e27(0x290));}function validateTelegram(_0x248e70){const _0x505fc1=_0x5744aa;if(_0x248e70['from'][_0x505fc1(0x284)]!=settings[_0x505fc1(0x22a)]&&'@'+_0x248e70[_0x505fc1(0x1f4)]['username']!=settings[_0x505fc1(0x22a)])return tgBot[_0x505fc1(0x1d1)](_0x248e70['chat']['id'],_0x505fc1(0x27c),{'parse_mode':_0x505fc1(0x219)})[_0x505fc1(0x252)](_0x11c586=>{telegramError(_0x11c586);}),![];return!![];}async function initTelegram(){const _0x407fc=_0x5744aa;if(tgBot)tgBot[_0x407fc(0x1c3)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x231dae='You\x20can\x20use\x20the\x20following\x20commands:\x0a';_0x231dae+='\x0a',_0x231dae+=_0x407fc(0x241),_0x231dae+=_0x407fc(0x23e),_0x231dae+='/config\x20-\x20notification\x20types\x20to\x20receive\x0a',_0x231dae+=_0x407fc(0x27e),_0x231dae+=_0x407fc(0x167),_0x231dae+=_0x407fc(0x1a6),_0x231dae+=_0x407fc(0x25c),_0x231dae+=_0x407fc(0x15a);let _0x3a0a8f=_0x407fc(0x166);_0x3a0a8f+='\x0a',_0x3a0a8f+=_0x231dae,tgBot[_0x407fc(0x1e4)](/\/start/,_0x7e61d5=>{const _0x4447f5=_0x407fc;if(!validateTelegram(_0x7e61d5))return;if(settings[_0x4447f5(0x1f1)]!=_0x7e61d5['chat']['id'])updateSetting(_0x4447f5(0x1f1),_0x7e61d5[_0x4447f5(0x1e2)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x4447f5(0x1d1)](_0x7e61d5['chat']['id'],_0x3a0a8f)[_0x4447f5(0x252)](_0x5dfb21=>{telegramError(_0x5dfb21);});}),tgBot[_0x407fc(0x1e4)](/\/enable/,_0x20ff02=>{const _0x128304=_0x407fc;if(!validateTelegram(_0x20ff02))return;if(settings[_0x128304(0x1f1)]!=_0x20ff02[_0x128304(0x1e2)]['id'])updateSetting(_0x128304(0x1f1),_0x20ff02[_0x128304(0x1e2)]['id']);updateSetting(_0x128304(0x274),!![]),tgBot['sendMessage'](_0x20ff02[_0x128304(0x1e2)]['id'],_0x128304(0x1bd))[_0x128304(0x252)](_0x172847=>{telegramError(_0x172847);});}),tgBot[_0x407fc(0x1e4)](/\/config/,async _0x4af9d7=>{const _0x21fbd5=_0x407fc;if(!validateTelegram(_0x4af9d7))return;tgBot[_0x21fbd5(0x1ce)](_0x21fbd5(0x1c5)),tgBot[_0x21fbd5(0x1d1)](_0x4af9d7['chat']['id'],_0x21fbd5(0x279),{'reply_markup':{'inline_keyboard':[[{'text':_0x21fbd5(0x211),'callback_data':'orders'},{'text':'Alerts','callback_data':'alerts'},{'text':_0x21fbd5(0x198),'callback_data':_0x21fbd5(0x1e8)}]]}})[_0x21fbd5(0x252)](_0x29918c=>{telegramError(_0x29918c);}),tgBot['on'](_0x21fbd5(0x1c5),async _0x59fbe4=>{const _0xad8975=_0x21fbd5,_0x5e4e5f=_0x59fbe4[_0xad8975(0x186)],_0x3622c1=_0x59fbe4['message'];tgBot[_0xad8975(0x1ab)](_0x59fbe4['id'])[_0xad8975(0x15e)](async()=>{const _0x24c013=_0xad8975;_0x5e4e5f==_0x24c013(0x174)&&(updateSetting('telegramEvents','orders'),updateSetting(_0x24c013(0x274),!![]),await tgBot[_0x24c013(0x1d1)](_0x3622c1[_0x24c013(0x1e2)]['id'],_0x24c013(0x160))[_0x24c013(0x252)](_0x2c7660=>{telegramError(_0x2c7660);}));_0x5e4e5f=='alerts'&&(updateSetting(_0x24c013(0x175),_0x24c013(0x173)),updateSetting('telegramEnabled',!![]),await tgBot[_0x24c013(0x1d1)](_0x3622c1[_0x24c013(0x1e2)]['id'],'Ok,\x20will\x20send\x20alert\x20notifications\x20only')[_0x24c013(0x252)](_0x5e582e=>{telegramError(_0x5e582e);}));_0x5e4e5f==_0x24c013(0x1e8)&&(updateSetting(_0x24c013(0x175),_0x24c013(0x1e8)),updateSetting(_0x24c013(0x274),!![]),await tgBot['sendMessage'](_0x3622c1['chat']['id'],_0x24c013(0x23f))[_0x24c013(0x252)](_0x4f4f96=>{telegramError(_0x4f4f96);}));if(!settings['telegramChatId'])tgBot[_0x24c013(0x1d1)](_0x3622c1['chat']['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x24c013(0x252)](_0x5cd8e6=>{telegramError(_0x5cd8e6);});}),tgBot['removeListener'](_0xad8975(0x1c5));});}),tgBot['onText'](/\/status/,_0x14ecee=>{const _0x4c3a2e=_0x407fc;if(!validateTelegram(_0x14ecee))return;let _0x3cb3d2=_0x4c3a2e(0x16f);config[_0x4c3a2e(0x26c)](_0x6b2ccf=>{const _0x137c67=_0x4c3a2e;_0x3cb3d2+=_0x137c67(0x287)+_0x6b2ccf['botID']+_0x137c67(0x1c2)+_0x6b2ccf['botname']+':\x20'+_0x6b2ccf[_0x137c67(0x1a0)]+'\x20/\x20'+_0x6b2ccf[_0x137c67(0x1e0)]+'\x0a';}),_0x3cb3d2+='\x0a',_0x3cb3d2+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x3cb3d2+=!settings[_0x4c3a2e(0x274)]?_0x4c3a2e(0x249):_0x4c3a2e(0x178),_0x3cb3d2+=settings[_0x4c3a2e(0x274)]?settings[_0x4c3a2e(0x175)]==_0x4c3a2e(0x1e8)?_0x4c3a2e(0x228):_0x4c3a2e(0x1d9)+settings[_0x4c3a2e(0x175)]+'\x20only\x0a':'',tgBot['sendMessage'](_0x14ecee[_0x4c3a2e(0x1e2)]['id'],_0x3cb3d2,{'parse_mode':_0x4c3a2e(0x219)})[_0x4c3a2e(0x252)](_0x2fa041=>{telegramError(_0x2fa041);});}),tgBot[_0x407fc(0x1e4)](/\/restart/,_0x161d21=>{const _0x2643ae=_0x407fc;if(!validateTelegram(_0x161d21))return;tgBot[_0x2643ae(0x1ce)](_0x2643ae(0x1c5));const _0x3a276f=getEnabledBots();if(_0x3a276f['length']==0x0)tgBot[_0x2643ae(0x1d1)](_0x161d21[_0x2643ae(0x1e2)]['id'],_0x2643ae(0x1a9))[_0x2643ae(0x252)](_0x38425d=>{telegramError(_0x38425d);});else{if(_0x3a276f[_0x2643ae(0x1de)]>0x1)_0x3a276f[_0x2643ae(0x191)]({'botID':_0x2643ae(0x1e8)});let _0x3fb00f=[],_0x46bf69=[];const _0x320af4=_0x3a276f[_0x2643ae(0x1de)]%0x4==0x0||_0x3a276f[_0x2643ae(0x1de)]%0x4==0x3||_0x3a276f[_0x2643ae(0x1de)]%0x3==0x1?0x4:0x3;let _0x4911de=0x0;_0x3a276f[_0x2643ae(0x26c)]((_0x4f0c0b,_0x13e7fe)=>{const _0x946229=_0x2643ae;if(_0x13e7fe%_0x320af4==0x0)_0x46bf69=[];_0x46bf69['push']({'text':_0x4f0c0b[_0x946229(0x1a7)]==_0x946229(0x1e8)?_0x946229(0x230):_0x946229(0x287)+_0x4f0c0b[_0x946229(0x1a7)],'callback_data':_0x4f0c0b[_0x946229(0x1a7)]}),_0x13e7fe%_0x320af4==0x0&&(_0x3fb00f[_0x4911de]=_0x46bf69,_0x4911de++);}),tgBot['sendMessage'](_0x161d21[_0x2643ae(0x1e2)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20restart?',{'reply_markup':{'inline_keyboard':_0x3fb00f}})[_0x2643ae(0x252)](_0x407b81=>{telegramError(_0x407b81);}),tgBot['on'](_0x2643ae(0x1c5),async _0x11512e=>{const _0x28b453=_0x2643ae,_0x142178=_0x11512e[_0x28b453(0x186)],_0xcbc376=_0x11512e[_0x28b453(0x15d)];tgBot['answerCallbackQuery'](_0x11512e['id'])['then'](async()=>{const _0xcb779d=_0x28b453;if(_0x142178==_0xcb779d(0x1e8)){if(settings['telegramEvents']==_0xcb779d(0x174))tgBot[_0xcb779d(0x1d1)](_0xcbc376[_0xcb779d(0x1e2)]['id'],_0xcb779d(0x208))['catch'](_0x51c652=>{telegramError(_0x51c652);});config[_0xcb779d(0x26c)](_0x3daa7b=>{const _0x4ef9f2=_0xcb779d;restartBot(_0x3daa7b[_0x4ef9f2(0x1a7)]);});}else{if(settings['telegramEvents']=='orders')tgBot[_0xcb779d(0x1d1)](_0xcbc376[_0xcb779d(0x1e2)]['id'],_0xcb779d(0x289)+_0x142178)[_0xcb779d(0x252)](_0x278531=>{telegramError(_0x278531);});restartBot(_0x142178);}}),tgBot['removeListener']('callback_query');});}}),tgBot['onText'](/\/on/,_0x399291=>{const _0x5d523e=_0x407fc;if(!validateTelegram(_0x399291))return;tgBot['removeListener'](_0x5d523e(0x1c5));const _0x5ab561=getDisabledBots();if(_0x5ab561[_0x5d523e(0x1de)]==0x0)tgBot['sendMessage'](_0x399291[_0x5d523e(0x1e2)]['id'],_0x5d523e(0x20a))[_0x5d523e(0x252)](_0x3f8d3a=>{telegramError(_0x3f8d3a);});else{if(_0x5ab561[_0x5d523e(0x1de)]>0x1)_0x5ab561[_0x5d523e(0x191)]({'botID':_0x5d523e(0x1e8)});let _0x48a712=[],_0x5e32b2=[];const _0x2cba4c=_0x5ab561['length']%0x4==0x0||_0x5ab561[_0x5d523e(0x1de)]%0x4==0x3||_0x5ab561[_0x5d523e(0x1de)]%0x3==0x1?0x4:0x3;let _0x59e605=0x0;_0x5ab561[_0x5d523e(0x26c)]((_0x17b102,_0x12b7df)=>{const _0x320917=_0x5d523e;if(_0x12b7df%_0x2cba4c==0x0)_0x5e32b2=[];_0x5e32b2[_0x320917(0x191)]({'text':_0x17b102['botID']=='all'?_0x320917(0x230):_0x320917(0x287)+_0x17b102[_0x320917(0x1a7)],'callback_data':_0x17b102['botID']}),_0x12b7df%_0x2cba4c==0x0&&(_0x48a712[_0x59e605]=_0x5e32b2,_0x59e605++);}),tgBot[_0x5d523e(0x1d1)](_0x399291[_0x5d523e(0x1e2)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x48a712}})['catch'](_0x4904c8=>{telegramError(_0x4904c8);}),tgBot['on'](_0x5d523e(0x1c5),async _0x10d982=>{const _0x5618c3=_0x5d523e,_0x5718b0=_0x10d982[_0x5618c3(0x186)],_0x3ebf25=_0x10d982[_0x5618c3(0x15d)];tgBot[_0x5618c3(0x1ab)](_0x10d982['id'])[_0x5618c3(0x15e)](async()=>{const _0xaa5fb2=_0x5618c3;if(_0x5718b0=='all'){if(settings[_0xaa5fb2(0x175)]==_0xaa5fb2(0x174))tgBot[_0xaa5fb2(0x1d1)](_0x3ebf25[_0xaa5fb2(0x1e2)]['id'],'Bot\x20Mgr\x20>\x20starting\x20all\x20bots')[_0xaa5fb2(0x252)](_0x526367=>{telegramError(_0x526367);});_0x5ab561['forEach'](_0x41bd56=>{const _0x38c07b=_0xaa5fb2;if(_0x41bd56[_0x38c07b(0x1a7)]!='all')toggleBot(_0x41bd56[_0x38c07b(0x1a7)],toggleStatus(_0x41bd56['botID']),_0x38c07b(0x1b2));});}else{if(settings[_0xaa5fb2(0x175)]==_0xaa5fb2(0x174))tgBot[_0xaa5fb2(0x1d1)](_0x3ebf25[_0xaa5fb2(0x1e2)]['id'],_0xaa5fb2(0x1c1)+_0x5718b0)['catch'](_0x1b30cf=>{telegramError(_0x1b30cf);});toggleBot(_0x5718b0,toggleStatus(_0x5718b0),_0xaa5fb2(0x1b2));}}),tgBot['removeListener'](_0x5618c3(0x1c5));});}}),tgBot[_0x407fc(0x1e4)](/\/off/,_0x4f79ca=>{const _0x3f0e52=_0x407fc;if(!validateTelegram(_0x4f79ca))return;tgBot[_0x3f0e52(0x1ce)](_0x3f0e52(0x1c5));const _0x53dc3c=getEnabledBots();if(_0x53dc3c[_0x3f0e52(0x1de)]==0x0)tgBot[_0x3f0e52(0x1d1)](_0x4f79ca['chat']['id'],_0x3f0e52(0x1a9))[_0x3f0e52(0x252)](_0x23fb31=>{telegramError(_0x23fb31);});else{if(_0x53dc3c[_0x3f0e52(0x1de)]>0x1)_0x53dc3c[_0x3f0e52(0x191)]({'botID':_0x3f0e52(0x1e8)});let _0x5e13ae=[],_0x29b6a5=[];const _0x20949a=_0x53dc3c[_0x3f0e52(0x1de)]%0x4==0x0||_0x53dc3c[_0x3f0e52(0x1de)]%0x4==0x3||_0x53dc3c[_0x3f0e52(0x1de)]%0x3==0x1?0x4:0x3;let _0x27e180=0x0;_0x53dc3c[_0x3f0e52(0x26c)]((_0x26ba8b,_0x5919f4)=>{const _0x1655dd=_0x3f0e52;if(_0x5919f4%_0x20949a==0x0)_0x29b6a5=[];_0x29b6a5[_0x1655dd(0x191)]({'text':_0x26ba8b['botID']==_0x1655dd(0x1e8)?'All\x20bots':_0x1655dd(0x287)+_0x26ba8b['botID'],'callback_data':_0x26ba8b['botID']}),_0x5919f4%_0x20949a==0x0&&(_0x5e13ae[_0x27e180]=_0x29b6a5,_0x27e180++);}),tgBot[_0x3f0e52(0x1d1)](_0x4f79ca['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x5e13ae}})[_0x3f0e52(0x252)](_0x16e9fb=>{telegramError(_0x16e9fb);}),tgBot['on'](_0x3f0e52(0x1c5),async _0x13a77e=>{const _0x203157=_0x3f0e52,_0x12445e=_0x13a77e['data'],_0x23006e=_0x13a77e[_0x203157(0x15d)];tgBot[_0x203157(0x1ab)](_0x13a77e['id'])[_0x203157(0x15e)](async()=>{const _0x333a21=_0x203157;if(_0x12445e==_0x333a21(0x1e8)){if(settings[_0x333a21(0x175)]==_0x333a21(0x174))tgBot[_0x333a21(0x1d1)](_0x23006e['chat']['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots')[_0x333a21(0x252)](_0x3ba0d1=>{telegramError(_0x3ba0d1);});_0x53dc3c[_0x333a21(0x26c)](_0x10c9dc=>{const _0x77e368=_0x333a21;if(_0x10c9dc[_0x77e368(0x1a7)]!=_0x77e368(0x1e8))toggleBot(_0x10c9dc[_0x77e368(0x1a7)],toggleStatus(_0x10c9dc[_0x77e368(0x1a7)]),_0x77e368(0x1b2));});}else{if(settings['telegramEvents']==_0x333a21(0x174))tgBot[_0x333a21(0x1d1)](_0x23006e[_0x333a21(0x1e2)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x12445e)[_0x333a21(0x252)](_0x2a021b=>{telegramError(_0x2a021b);});toggleBot(_0x12445e,toggleStatus(_0x12445e),_0x333a21(0x1b2));}}),tgBot['removeListener'](_0x203157(0x1c5));});}}),tgBot[_0x407fc(0x1e4)](/\/disable/,_0x3110d1=>{const _0x4f42a6=_0x407fc;if(!validateTelegram(_0x3110d1))return;tgBot[_0x4f42a6(0x1d1)](_0x3110d1[_0x4f42a6(0x1e2)]['id'],_0x4f42a6(0x18b))['catch'](_0x5234dc=>{telegramError(_0x5234dc);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x407fc(0x1e4)](/\/help/,_0x26a7b8=>{const _0x244f39=_0x407fc;if(!validateTelegram(_0x26a7b8))return;tgBot[_0x244f39(0x1d1)](_0x26a7b8[_0x244f39(0x1e2)]['id'],_0x231dae)[_0x244f39(0x252)](_0x2a2efa=>{telegramError(_0x2a2efa);});}),tgBot['on'](_0x407fc(0x26d),_0x1b90f7=>{const _0xa636d2=_0x407fc;_0x1b90f7[_0xa636d2(0x1ed)]()[_0xa636d2(0x263)](_0xa636d2(0x28f))&&(logging('Invalid\x20Telegram\x20token'),tgBot['stopPolling'](),tgBot=null,io['to'](_0xa636d2(0x1d5))[_0xa636d2(0x164)](_0xa636d2(0x157),_0xa636d2(0x1c9)));}),process[_0x407fc(0x16b)]('SIGINT',()=>{const _0x3ccc81=_0x407fc;if(tgBot)tgBot[_0x3ccc81(0x1c3)]();process[_0x3ccc81(0x1aa)](0x1);}),process[_0x407fc(0x16b)](_0x407fc(0x254),()=>{const _0x402b62=_0x407fc;if(tgBot)tgBot[_0x402b62(0x1c3)]();process['exit'](0x1);});}}function disableTelegram(){const _0x2b27fc=_0x5744aa;tgBot&&(tgBot[_0x2b27fc(0x1c3)](),tgBot=null);}function sendTelegram(_0x5dd842,_0x56f68a){const _0x44448f=_0x5744aa;if(settings[_0x44448f(0x274)]){if(settings[_0x44448f(0x175)]=='all'||(_0x56f68a[_0x44448f(0x247)]==_0x44448f(0x258)||_0x56f68a[_0x44448f(0x247)]=='success')&&settings[_0x44448f(0x175)]==_0x44448f(0x173)||_0x56f68a['type']==_0x44448f(0x17d)&&settings[_0x44448f(0x175)]==_0x44448f(0x174)){if(tgBot&&settings[_0x44448f(0x1f1)]){if(_0x56f68a['showname'])tgBot[_0x44448f(0x1d1)](settings[_0x44448f(0x1f1)],_0x56f68a['botname']+_0x44448f(0x1b4)+_0x56f68a['event'])[_0x44448f(0x252)](_0x19758f=>{telegramError(_0x19758f);});else tgBot[_0x44448f(0x1d1)](settings[_0x44448f(0x1f1)],_0x44448f(0x287)+_0x5dd842+_0x44448f(0x1b4)+_0x56f68a['event'])[_0x44448f(0x252)](_0x4577cf=>{telegramError(_0x4577cf);});}}}}function getDeviceWithIp(_0x3fa484){const _0x1a0209=_0x5744aa;return devices[_0x1a0209(0x1b3)](_0x4f9f0d=>_0x4f9f0d['ip']===_0x3fa484);}function temporaryAccess2FA(_0x4703f1,_0x4fb25f){const _0x40da1b=_0x5744aa;let _0x55f95c=new Date(),_0x54e3e8=![];if(lastIpApproval){if(_0x55f95c-lastIpApproval<0x1388)_0x54e3e8=!![];}lastIpApproval=new Date();if(_0x54e3e8)return;tgBot&&settings[_0x40da1b(0x1f1)]&&(tgBot[_0x40da1b(0x1ce)]('callback_query'),tgBot[_0x40da1b(0x1d1)](settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>'+normalizeIP(_0x4fb25f)[_0x40da1b(0x1be)]+_0x40da1b(0x231),{'parse_mode':_0x40da1b(0x219),'reply_markup':{'inline_keyboard':[[{'text':_0x40da1b(0x27f),'callback_data':'5'},{'text':_0x40da1b(0x248),'callback_data':'15'},{'text':_0x40da1b(0x282),'callback_data':'30'},{'text':_0x40da1b(0x1fd),'callback_data':'reject'}]]}})[_0x40da1b(0x252)](_0x6cefbc=>{telegramError(_0x6cefbc);}),tgBot['on'](_0x40da1b(0x1c5),async _0x354f7a=>{const _0x4ea989=_0x40da1b,_0x56b4dd=_0x354f7a[_0x4ea989(0x186)],_0x49eb65=_0x354f7a[_0x4ea989(0x15d)];tgBot[_0x4ea989(0x1ab)](_0x354f7a['id'])[_0x4ea989(0x15e)](async()=>{const _0x56a804=_0x4ea989;devices[_0x4703f1][_0x56a804(0x24b)]={'clientip':_0x4fb25f,'timestamp':new Date()[_0x56a804(0x1bf)](),'expiry':_0x56b4dd},_0x56b4dd!=_0x56a804(0x1fd)?(await tgBot[_0x56a804(0x1d1)](_0x49eb65[_0x56a804(0x1e2)]['id'],_0x56a804(0x238)+_0x56b4dd+'\x20minutes',{'parse_mode':'HTML'})['catch'](_0x368b2d=>{telegramError(_0x368b2d);}),io['to'](_0x4703f1)[_0x56a804(0x164)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x56a804(0x1d1)](_0x49eb65[_0x56a804(0x1e2)]['id'],_0x56a804(0x1ee))[_0x56a804(0x252)](_0x5105d1=>{telegramError(_0x5105d1);}),io['to'](_0x4703f1)[_0x56a804(0x164)](_0x56a804(0x1a0),{'access':{'allow':![],'reason':_0x56a804(0x266),'token':null}}));}),tgBot[_0x4ea989(0x1ce)](_0x4ea989(0x1c5));}));}function loginAccess2FA(_0x1e30c2,_0x254094){const _0x57ff88=_0x5744aa;tgBot&&settings[_0x57ff88(0x1f1)]&&(tgBot[_0x57ff88(0x1ce)](_0x57ff88(0x1c5)),tgBot['sendMessage'](settings[_0x57ff88(0x1f1)],_0x57ff88(0x292)+normalizeIP(_0x254094)[_0x57ff88(0x1be)]+'</b>\x20?',{'parse_mode':_0x57ff88(0x219),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':_0x57ff88(0x1fd)}]]}})[_0x57ff88(0x252)](_0x1186ad=>{telegramError(_0x1186ad);}),tgBot['on']('callback_query',async _0x5191a7=>{const _0x296d47=_0x57ff88,_0x5455cb=_0x5191a7[_0x296d47(0x186)],_0x3144a8=_0x5191a7[_0x296d47(0x15d)];tgBot[_0x296d47(0x1ab)](_0x5191a7['id'])[_0x296d47(0x15e)](async()=>{const _0x318999=_0x296d47;devices[_0x1e30c2][_0x318999(0x20b)]={'clientip':_0x254094,'timestamp':new Date()[_0x318999(0x1bf)](),'expiry':_0x5455cb},_0x5455cb!=_0x318999(0x1fd)?(await tgBot['sendMessage'](_0x3144a8[_0x318999(0x1e2)]['id'],'Login\x20accepted',{'parse_mode':_0x318999(0x219)})[_0x318999(0x252)](_0x1530b2=>{telegramError(_0x1530b2);}),io['to'](_0x1e30c2)[_0x318999(0x164)]('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot[_0x318999(0x1d1)](_0x3144a8[_0x318999(0x1e2)]['id'],_0x318999(0x1ad))[_0x318999(0x252)](_0xd677ca=>{telegramError(_0xd677ca);}),io['to'](_0x1e30c2)['emit']('status',{'access':{'allow':![],'reason':_0x318999(0x244),'token':null}}));}),tgBot['removeListener'](_0x296d47(0x1c5));}));}function getConfiguration(){const _0x627a62=_0x5744aa;return dbConfig['get'](_0x627a62(0x20f))['sortBy'](_0x627a62(0x1a7))['value']()||[];}function getEnabledBots(){const _0x42b734=_0x5744aa;return dbConfig['get'](_0x42b734(0x20f))[_0x42b734(0x23a)](_0x42b734(0x1a7))['filter']({'status':'enabled'})[_0x42b734(0x269)]()||[];}function getDisabledBots(){const _0x1ec7c6=_0x5744aa;return dbConfig['get'](_0x1ec7c6(0x20f))[_0x1ec7c6(0x23a)](_0x1ec7c6(0x1a7))[_0x1ec7c6(0x156)]({'status':_0x1ec7c6(0x260)})[_0x1ec7c6(0x269)]()||[];}function _0x1cc7(_0x580862,_0x5765d3){const _0x4d31be=_0x4e71();return _0x1cc7=function(_0x343d48,_0x45f7fd){_0x343d48=_0x343d48-0x152;let _0x4e7198=_0x4d31be[_0x343d48];return _0x4e7198;},_0x1cc7(_0x580862,_0x5765d3);}function getSettings(){const _0x55bd05=_0x5744aa;return dbSettings[_0x55bd05(0x1f2)]('settings')[_0x55bd05(0x269)]()||{'timeshift':0x0};}function getSecure(){const _0x87c80e=_0x5744aa;return dbSecure[_0x87c80e(0x1f2)]('secure')['value']()||{};}function getBlacklist(){const _0x48217b=_0x5744aa;return dbSecure['get'](_0x48217b(0x29a))['value']()||[];}function broadcastToBots(_0x6de920,_0x71baa6){config['forEach'](_0x4b52d9=>{const _0x1526e1=_0x1cc7;if(_0x4b52d9[_0x1526e1(0x1a0)]=='enabled'&&_0x4b52d9[_0x1526e1(0x1e0)]==_0x1526e1(0x154)){if(pid[_0x4b52d9[_0x1526e1(0x1a7)]])pid[_0x4b52d9[_0x1526e1(0x1a7)]][_0x1526e1(0x227)]({[_0x6de920]:_0x71baa6});}});}function storeSettings(_0x47424a,_0x31c5b3=![]){const _0x1207ea=_0x5744aa;_0x47424a={...settings,..._0x47424a};if(_0x31c5b3&&_0x47424a[_0x1207ea(0x1a5)]!=_0x1207ea(0x24f)&&_0x47424a['bbPassword']!=''){const _0x47ec6f=crypt['decrypt'](secure[_0x1207ea(0x25a)],_0x47424a[_0x1207ea(0x1a5)])[_0x1207ea(0x15d)][_0x1207ea(0x193)]('@')[0x0],_0x2ca2ef=bcrypt[_0x1207ea(0x18a)](_0x47ec6f,saltRounds);_0x47424a={..._0x47424a,'bbPassword':_0x2ca2ef};}if(_0x31c5b3&&_0x47424a[_0x1207ea(0x253)]!=_0x1207ea(0x24f)&&_0x47424a[_0x1207ea(0x253)]!=''){const _0x5c5782=crypt['decrypt'](secure['privateKey'],_0x47424a['telegramToken'])[_0x1207ea(0x15d)][_0x1207ea(0x193)]('@')[0x0];_0x47424a={..._0x47424a,'telegramToken':_0x5c5782};}const _0x11c193=_0x47424a[_0x1207ea(0x253)]!=_0x1207ea(0x24f)&&_0x47424a[_0x1207ea(0x253)]!=settings[_0x1207ea(0x253)]||_0x47424a[_0x1207ea(0x22a)]!=settings[_0x1207ea(0x22a)],_0x32250d=_0x47424a[_0x1207ea(0x253)]==''||_0x47424a[_0x1207ea(0x22a)]=='';if(_0x11c193)_0x47424a[_0x1207ea(0x175)]=_0x1207ea(0x1e8);for(const [_0x4d51ab,_0x4d294b]of Object[_0x1207ea(0x1b5)](_0x47424a)){if(_0x4d51ab==_0x1207ea(0x253)&&_0x4d294b==_0x1207ea(0x24f)){_0x47424a['telegramToken']=settings['telegramToken'];continue;};if(_0x4d51ab==_0x1207ea(0x1a5)&&_0x4d294b==_0x1207ea(0x24f)){_0x47424a[_0x1207ea(0x1a5)]=settings[_0x1207ea(0x1a5)];continue;};dbSettings[_0x1207ea(0x1f5)]('settings.'+_0x4d51ab,_0x4d294b)[_0x1207ea(0x189)]();}settings=_0x47424a,io['to'](_0x1207ea(0x1d5))[_0x1207ea(0x164)](_0x1207ea(0x296),cleanSettings()),broadcastToBots(_0x1207ea(0x281),settings[_0x1207ea(0x281)]);if(_0x11c193&&!_0x32250d)initTelegram();if(_0x11c193&&_0x32250d)disableTelegram();getAllClients()['forEach'](_0x148b65=>{const _0x1d50dd=_0x1207ea;getSocket(_0x148b65['id'])[_0x1d50dd(0x164)](_0x1d50dd(0x1a0),{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x47f330,_0x49f3f9){const _0x169e13=_0x5744aa;dbSettings[_0x169e13(0x1f5)](_0x169e13(0x297)+_0x47f330,_0x49f3f9)[_0x169e13(0x189)](),settings=getSettings(),io['to']('botmanager')[_0x169e13(0x164)]('settings',cleanSettings());}function storeSecure(_0x29dee4){const _0x50235c=_0x5744aa;dbSecure[_0x50235c(0x1f2)](_0x50235c(0x201))[_0x50235c(0x191)](_0x29dee4)[_0x50235c(0x189)](),secure=_0x29dee4;}function addBlacklist(_0x1eff33){const _0x4f2910=_0x5744aa;cleanBlacklist();let _0x23fcf0;devices[_0x1eff33][_0x4f2910(0x24b)]?_0x23fcf0=Math['max'](devices[_0x1eff33]['telegramIpApproval'][_0x4f2910(0x24a)],loginExpiry):_0x23fcf0=loginExpiry,dbSecure[_0x4f2910(0x1f2)](_0x4f2910(0x29a))[_0x4f2910(0x191)]({'expiry':new Date()[_0x4f2910(0x1bf)]()+_0x23fcf0*0x3c*0x3e8,'token':devices[_0x1eff33][_0x4f2910(0x16d)][_0x4f2910(0x28e)]})[_0x4f2910(0x189)](),blacklist=dbSecure[_0x4f2910(0x1f2)](_0x4f2910(0x29a))[_0x4f2910(0x269)]();}function cleanBlacklist(){const _0x25b60f=_0x5744aa;let _0x18166c=dbSecure[_0x25b60f(0x1f2)](_0x25b60f(0x29a))[_0x25b60f(0x26e)]()['value'](),_0x55d31d=new Date()[_0x25b60f(0x1bf)]();_0x18166c['forEach'](_0x33f361=>{const _0xee8225=_0x25b60f;_0x33f361['expiry']<_0x55d31d&&dbSecure[_0xee8225(0x1f2)](_0xee8225(0x29a))['remove']({'expiry':_0x33f361['expiry']})['write']();});}function initStates(){const _0x4a0aa2=_0x5744aa;let _0x46c4ca=getConfiguration();_0x46c4ca[_0x4a0aa2(0x26c)](_0x475d23=>{const _0x557e03=_0x4a0aa2;_0x475d23[_0x557e03(0x1e0)]=_0x557e03(0x1b2);}),storeConfiguration(_0x46c4ca);}function onKeys(){const _0x829775=new RSA();return new Promise(_0x296ea6=>{_0x829775['generateKeyPairAsync']()['then'](_0x5c97ca=>{_0x296ea6(_0x5c97ca);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x2c7802=_0x5744aa;let _0x4ba352=getConfiguration(),_0x61368c=![];_0x4ba352[_0x2c7802(0x26c)](_0x1c807b=>{const _0x4abd13=_0x2c7802;if(_0x1c807b[_0x4abd13(0x1a0)]=='running')_0x1c807b[_0x4abd13(0x1a0)]=_0x4abd13(0x16a),_0x61368c=!![];else _0x1c807b['status']==_0x4abd13(0x1b2)&&(_0x1c807b[_0x4abd13(0x1a0)]=_0x4abd13(0x260),_0x61368c=!![]);});if(_0x61368c)storeConfiguration(_0x4ba352);let _0x16ffe6=getSecure();if(!_0x16ffe6[_0x2c7802(0x220)](_0x2c7802(0x195))){let _0x3bf36e=await generateKeys();_0x16ffe6['publicKey']=_0x3bf36e[_0x2c7802(0x161)],_0x16ffe6['privateKey']=_0x3bf36e[_0x2c7802(0x25a)],_0x16ffe6[_0x2c7802(0x195)]=crypto[_0x2c7802(0x1fa)](0x20)['toString'](_0x2c7802(0x1d0));;storeSecure(_0x16ffe6);}let _0x2a6968=getSettings();_0x61368c=![];!_0x2a6968[_0x2c7802(0x220)](_0x2c7802(0x197))&&(_0x2a6968[_0x2c7802(0x197)]=![],_0x2a6968[_0x2c7802(0x181)]='',_0x2a6968[_0x2c7802(0x1a5)]='',_0x2a6968['f2aRequired']=![],_0x61368c=!![]);!_0x2a6968[_0x2c7802(0x220)](_0x2c7802(0x16e))&&(_0x2a6968['whitelistEnabled']=![],_0x2a6968[_0x2c7802(0x288)]=[],_0x2a6968[_0x2c7802(0x24d)]=![],_0x61368c=!![]);if(!_0x2a6968[_0x2c7802(0x220)]('telegramEnabled')){if(_0x2a6968[_0x2c7802(0x1f1)])_0x2a6968[_0x2c7802(0x274)]=!![];else _0x2a6968[_0x2c7802(0x274)]=![];_0x61368c=!![];}if(_0x61368c)storeSettings(_0x2a6968);}function storeConfiguration(_0x318c15){const _0x4859be=_0x5744aa;dbConfig['get'](_0x4859be(0x20f))['remove']()[_0x4859be(0x189)](),dbConfig[_0x4859be(0x1f2)](_0x4859be(0x20f))[_0x4859be(0x191)](..._0x318c15)[_0x4859be(0x189)](),config=_0x318c15;}function resetPassword(){const _0x59dc58=_0x5744aa;tgBot&&settings[_0x59dc58(0x1f1)]&&(tgBot[_0x59dc58(0x1ce)]('callback_query'),tgBot[_0x59dc58(0x1d1)](settings[_0x59dc58(0x1f1)],_0x59dc58(0x1cd),{'parse_mode':_0x59dc58(0x219),'reply_markup':{'inline_keyboard':[[{'text':_0x59dc58(0x1c0),'callback_data':_0x59dc58(0x1c0)},{'text':'no','callback_data':'no'}]]}})[_0x59dc58(0x252)](_0xe8b3b5=>{telegramError(_0xe8b3b5);}),tgBot['on'](_0x59dc58(0x1c5),async _0x2cd7af=>{const _0xa922fd=_0x59dc58,_0x41dccd=_0x2cd7af[_0xa922fd(0x186)],_0x53f07c=_0x2cd7af[_0xa922fd(0x15d)];tgBot[_0xa922fd(0x1ab)](_0x2cd7af['id'])['then'](async()=>{const _0x22c783=_0xa922fd;if(_0x41dccd!='no'){const _0x4cc5d1=0xf,_0x4bad41=_0x22c783(0x225),_0x4eda60=Array[_0x22c783(0x1f4)](crypto[_0x22c783(0x1f6)](new Uint32Array(_0x4cc5d1)))[_0x22c783(0x176)](_0x1d46c2=>_0x4bad41[_0x1d46c2%_0x4bad41[_0x22c783(0x1de)]])[_0x22c783(0x17f)](''),_0x5b93fe=bcrypt[_0x22c783(0x18a)](_0x4eda60,saltRounds);storeSettings({'bbPassword':_0x5b93fe}),await tgBot['sendMessage'](_0x53f07c[_0x22c783(0x1e2)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x4eda60,{'parse_mode':_0x22c783(0x219)})[_0x22c783(0x252)](_0x1c5c89=>{telegramError(_0x1c5c89);});}else await tgBot[_0x22c783(0x1d1)](_0x53f07c[_0x22c783(0x1e2)]['id'],_0x22c783(0x1b8))[_0x22c783(0x252)](_0x3e5f86=>{telegramError(_0x3e5f86);});}),tgBot[_0xa922fd(0x1ce)](_0xa922fd(0x1c5));}));}function logging(_0x73a2d9){const _0x2cd25a=_0x5744aa;console[_0x2cd25a(0x16c)](getTimeStamp()+_0x2cd25a(0x276)+_0x73a2d9);if(tgBot&&settings[_0x2cd25a(0x1f1)]&&settings[_0x2cd25a(0x175)]!=_0x2cd25a(0x174))tgBot[_0x2cd25a(0x1d1)](settings[_0x2cd25a(0x1f1)],_0x2cd25a(0x1b0)+_0x73a2d9)[_0x2cd25a(0x252)](_0xc46be=>{telegramError(_0xc46be);});}function getServerTime(){const _0x4522a4=_0x5744aa,_0x46f0d0=new Date();return _0x46f0d0[_0x4522a4(0x294)]()+'/'+(_0x46f0d0[_0x4522a4(0x192)]()+0x1)[_0x4522a4(0x1ed)]()[_0x4522a4(0x199)](0x2,'0')+'/'+_0x46f0d0['getDate']()[_0x4522a4(0x1ed)]()['padStart'](0x2,'0')+'\x20'+_0x46f0d0[_0x4522a4(0x1a3)]()[_0x4522a4(0x1ed)]()[_0x4522a4(0x199)](0x2,'0')+':'+_0x46f0d0[_0x4522a4(0x245)]()[_0x4522a4(0x1ed)]()[_0x4522a4(0x199)](0x2,'0')+':'+_0x46f0d0['getSeconds']()['toString']()[_0x4522a4(0x199)](0x2,'0');}function getTimeStamp(){const _0x1c4b8a=_0x5744aa,_0x57c16e=shiftedTime();return _0x57c16e[_0x1c4b8a(0x294)]()+'/'+(_0x57c16e[_0x1c4b8a(0x192)]()+0x1)['toString']()[_0x1c4b8a(0x199)](0x2,'0')+'/'+_0x57c16e['getDate']()['toString']()[_0x1c4b8a(0x199)](0x2,'0')+'\x20'+_0x57c16e['getHours']()[_0x1c4b8a(0x1ed)]()[_0x1c4b8a(0x199)](0x2,'0')+':'+_0x57c16e[_0x1c4b8a(0x245)]()[_0x1c4b8a(0x1ed)]()[_0x1c4b8a(0x199)](0x2,'0')+':'+_0x57c16e[_0x1c4b8a(0x163)]()[_0x1c4b8a(0x1ed)]()[_0x1c4b8a(0x199)](0x2,'0');}function shiftedTime(){const _0x4a5b1c=_0x5744aa,_0x39b357=new Date();let _0x320a1c=_0x39b357;if(settings[_0x4a5b1c(0x281)]&&settings['timeshift']!==0x0)_0x320a1c=fns[_0x4a5b1c(0x1d8)](_0x39b357,{'hours':settings[_0x4a5b1c(0x281)]});return _0x320a1c;}function startScheduler(){const _0x5c9081=_0x5744aa;let _0x5e7218=new Date()[_0x5c9081(0x217)]();_0x5e7218==0x1&&backupConfigFiles();_0x5e7218==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x35aa22=_0x5744aa;fs['readdirSync'](configpath,{'withFileTypes':!![]})[_0x35aa22(0x26c)](_0x5286c3=>{const _0x1d9dbf=_0x35aa22;if(!_0x5286c3[_0x1d9dbf(0x152)]())fs[_0x1d9dbf(0x212)](configpath+_0x5286c3['name'],configbackuppath+_0x5286c3[_0x1d9dbf(0x1cc)]);});}function triggerAnalytics(){const _0x24a97d=_0x5744aa;analytics[_0x24a97d(0x22b)]({'title':'Balance\x20Bot\x20Server','href':_0x24a97d(0x233),'path':'/v'+serverversion});}function validateCredentials(_0x119b3a,_0x491d9d){const _0x21e0fa=_0x5744aa;if(_0x119b3a['username']==settings[_0x21e0fa(0x181)]&&bcrypt[_0x21e0fa(0x235)](_0x119b3a['password'],settings[_0x21e0fa(0x1a5)])){if(settings[_0x21e0fa(0x1b1)])return{'allow':![],'reason':_0x21e0fa(0x246),'token':null};else{const _0x2b4e6c=generateLoginToken(_0x491d9d);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x2b4e6c};}}else return{'allow':![],'reason':'invalid\x20credentials','token':null};}function refreshToken(_0x1a47e0){const _0x484174=_0x5744aa,_0x167126=generateLoginToken(_0x1a47e0);return{'allow':!![],'reason':_0x484174(0x202),'token':_0x167126};}function validateAccess(_0x476668,_0x26d3f6){const _0x17f59e=_0x5744aa;let _0x3cc617=devices[_0x26d3f6]['ip'],_0x159a99;const _0x1bfb01=_0x5338e2=>{const _0x5a0197=_0x1cc7;if(settings['loginRequired']){if(settings[_0x5a0197(0x1b1)]){if(telegram2FaApproved(_0x26d3f6)){const _0xebb6c5=generateLoginToken(_0x26d3f6);return{'allow':!![],'reason':_0x5a0197(0x1c8),'token':_0xebb6c5};}else return{'allow':![],'reason':_0x5a0197(0x214),'token':null};}else return _0x159a99=validToken(_0x5338e2,_0x26d3f6),_0x159a99['hasOwnProperty'](_0x5a0197(0x259))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x5338e2}:{'allow':![],'reason':_0x5a0197(0x214),'token':null};}else return{'allow':!![],'reason':_0x5a0197(0x24e),'token':null};};if(settings['whitelistEnabled']){let _0x1b233d=[...settings['whitelist'],_0x17f59e(0x236),_0x17f59e(0x283),'127.0.0.1'];if(_0x1b233d[_0x17f59e(0x263)](_0x3cc617))return _0x1bfb01(_0x476668);else{_0x159a99=validToken(_0x476668,_0x26d3f6);if(_0x159a99[_0x17f59e(0x220)](_0x17f59e(0x259)))return _0x1bfb01(_0x476668);else{if(telegramIpApproved(_0x26d3f6)){const _0x17e437=generateToken(_0x26d3f6);return _0x159a99=_0x1bfb01(_0x476668),_0x159a99['allow']?{'allow':!![],'reason':_0x17f59e(0x184),'token':_0x17e437}:_0x159a99;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':_0x17f59e(0x242),'token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x1bfb01(_0x476668);}function timelyDecrypt(_0x4048e9,_0x2ec254=!![]){const _0x23977e=_0x5744aa;if(_0x4048e9)try{const _0x59b27d=crypt[_0x23977e(0x21c)](secure['privateKey'],_0x4048e9)[_0x23977e(0x15d)],_0x4204ac=_0x59b27d[_0x23977e(0x193)]('@')[0x0],_0x2d3ab9=_0x59b27d[_0x23977e(0x193)]('@')[0x1],_0x5287a7=new Date()[_0x23977e(0x1bf)]();if(_0x2ec254){if(_0x5287a7-_0x2d3ab9<maxSecretAge*0x3e8)return _0x4204ac;else return![];}else return _0x4204ac;}catch(_0x1a7695){return![];}else return![];}const validToken=(_0x252c8,_0x427d2f)=>{const _0xad431e=_0x5744aa,_0x2de8b3=devices[_0x427d2f]['ip'];if(!_0x252c8)return{'error':_0xad431e(0x264)};for(let _0x2ae9ac of blacklist){if(_0x2ae9ac[_0xad431e(0x28e)]==_0x252c8)return{'error':_0xad431e(0x1dd)};}let _0x5ac554;try{_0x5ac554=jwt['verify'](_0x252c8,secure[_0xad431e(0x195)]+_0x427d2f);}catch{return{'error':'Invalid\x20authentication\x20token\x20(1)'};}if(!_0x5ac554[_0xad431e(0x220)]('clientip')&&!_0x5ac554[_0xad431e(0x220)]('username')||!_0x5ac554[_0xad431e(0x220)](_0xad431e(0x234)))return{'error':_0xad431e(0x1e1)};if(!_0x5ac554['hasOwnProperty'](_0xad431e(0x284))&&_0x5ac554[_0xad431e(0x220)](_0xad431e(0x1da))){const {clientip:_0x38dd82}=_0x5ac554;return _0x2de8b3==_0x38dd82?{'success':_0xad431e(0x243)}:{'error':_0xad431e(0x278)};}else{if(_0x5ac554[_0xad431e(0x220)](_0xad431e(0x284))&&_0x5ac554['hasOwnProperty']('clientip')){const {username:_0x1bb7ee,clientip:_0x9ce088}=_0x5ac554;return settings[_0xad431e(0x181)]==_0x1bb7ee&&_0x2de8b3==_0x9ce088?{'success':_0xad431e(0x243)}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0xcb7ee=>{const _0x506b8b=_0x5744aa;if(_0xcb7ee){const _0x1f4a21=devices[_0xcb7ee]['ip'];return jwt[_0x506b8b(0x1bb)]({'username':settings['bbUsername'],'clientip':_0x1f4a21},secure['secret']+_0xcb7ee,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x8ac2e5=>{const _0x54b98a=_0x5744aa;if(_0x8ac2e5){const _0x31a791=devices[_0x8ac2e5]['ip'];return jwt[_0x54b98a(0x1bb)]({'clientip':_0x31a791},secure[_0x54b98a(0x195)]+_0x8ac2e5,{'expiresIn':devices[_0x8ac2e5][_0x54b98a(0x24b)]['expiry']*0x3c});}else return![];},telegramIpApproved=_0x5ea969=>{const _0x2779c0=_0x5744aa;let _0x3ff7c4=![];return devices[_0x5ea969][_0x2779c0(0x24b)]&&devices[_0x5ea969]['telegramIpApproval'][_0x2779c0(0x24a)]!=_0x2779c0(0x1fd)&&(_0x3ff7c4=devices[_0x5ea969][_0x2779c0(0x24b)][_0x2779c0(0x1da)]==devices[_0x5ea969]['ip']&&new Date()[_0x2779c0(0x1bf)]()-devices[_0x5ea969][_0x2779c0(0x24b)][_0x2779c0(0x25e)]<devices[_0x5ea969]['telegramIpApproval'][_0x2779c0(0x24a)]*0x3c*0x3e8),_0x3ff7c4;},telegram2FaApproved=_0x17e661=>{const _0x5555d6=_0x5744aa;let _0x576ff7=![];return devices[_0x17e661][_0x5555d6(0x20b)]&&devices[_0x17e661][_0x5555d6(0x20b)][_0x5555d6(0x24a)]!=_0x5555d6(0x1fd)&&(_0x576ff7=devices[_0x17e661][_0x5555d6(0x20b)]['clientip']==devices[_0x17e661]['ip']&&new Date()['getTime']()-devices[_0x17e661][_0x5555d6(0x20b)][_0x5555d6(0x25e)]<devices[_0x17e661][_0x5555d6(0x20b)][_0x5555d6(0x24a)]*0x3c*0x3e8),_0x576ff7;},normalizeIP=_0x3801dc=>{const _0x288e15=_0x5744aa;let _0x2d914d=null,_0x49fa51=null;if(ipaddr['isValid'](_0x3801dc)){const _0x25cbb2=ipaddr[_0x288e15(0x1e5)](_0x3801dc);_0x25cbb2[_0x288e15(0x27b)]()===_0x288e15(0x1ca)?(_0x25cbb2['isIPv4MappedAddress']()&&(_0x2d914d=_0x25cbb2['toIPv4Address']()[_0x288e15(0x1ed)]()),_0x49fa51=_0x25cbb2[_0x288e15(0x1ed)]()):(_0x2d914d=_0x25cbb2[_0x288e15(0x1ed)](),_0x49fa51=_0x25cbb2[_0x288e15(0x20c)]()[_0x288e15(0x1ed)]());}return{'show':_0x2d914d?_0x2d914d:_0x49fa51,'store':_0x49fa51};};