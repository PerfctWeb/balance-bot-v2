const _0x17f565=_0x265a;(function(_0xd10b74,_0x1fb701){const _0x1d86cf=_0x265a,_0x267477=_0xd10b74();while(!![]){try{const _0x25c139=-parseInt(_0x1d86cf(0x258))/0x1+-parseInt(_0x1d86cf(0x304))/0x2*(-parseInt(_0x1d86cf(0x301))/0x3)+parseInt(_0x1d86cf(0x32e))/0x4+parseInt(_0x1d86cf(0x2e2))/0x5*(-parseInt(_0x1d86cf(0x279))/0x6)+parseInt(_0x1d86cf(0x1dc))/0x7+parseInt(_0x1d86cf(0x1db))/0x8*(-parseInt(_0x1d86cf(0x30b))/0x9)+-parseInt(_0x1d86cf(0x1c7))/0xa*(-parseInt(_0x1d86cf(0x30a))/0xb);if(_0x25c139===_0x1fb701)break;else _0x267477['push'](_0x267477['shift']());}catch(_0x2f61a3){_0x267477['push'](_0x267477['shift']());}}}(_0x3570,0xb4cf9));const _0x586551=function(){let _0x311b4b=!![];return function(_0x5854ed,_0x28bc54){const _0x1b3476=_0x311b4b?function(){const _0x2160b7=_0x265a;if(_0x28bc54){const _0x39f549=_0x28bc54[_0x2160b7(0x267)](_0x5854ed,arguments);return _0x28bc54=null,_0x39f549;}}:function(){};return _0x311b4b=![],_0x1b3476;};}(),_0x5581d6=_0x586551(this,function(){const _0x6e8102=_0x265a;return _0x5581d6[_0x6e8102(0x2e8)]()[_0x6e8102(0x314)](_0x6e8102(0x24e))[_0x6e8102(0x2e8)]()[_0x6e8102(0x31e)](_0x5581d6)[_0x6e8102(0x314)](_0x6e8102(0x24e));});_0x5581d6();'use strict';process[_0x17f565(0x33b)]['NTBA_FIX_319']=0x1;const childProcess=require(_0x17f565(0x1ca)),fs=require('fs'),fns=require(_0x17f565(0x1a7)),low=require(_0x17f565(0x205)),FileSync=require(_0x17f565(0x2be)),path=require(_0x17f565(0x1d7)),crypto=require('crypto'),Crypt=require(_0x17f565(0x19d))[_0x17f565(0x2f3)],RSA=require(_0x17f565(0x19d))[_0x17f565(0x35c)],bcrypt=require(_0x17f565(0x376)),jwt=require(_0x17f565(0x20c)),ipaddr=require('ipaddr.js'),argv=require(_0x17f565(0x3a6))(process[_0x17f565(0x274)][_0x17f565(0x388)](0x2))['argv'],uuidRandom=require(_0x17f565(0x204)),{Telegraf,Markup}=require(_0x17f565(0x1e4)),Mixpanel=require(_0x17f565(0x261)),axios=require(_0x17f565(0x2bb)),{GraphQLClient,gql}=require('graphql-request'),util=require('util'),fileUpload=require(_0x17f565(0x247)),{networkInterfaces}=require('os'),PORT=argv[_0x17f565(0x2c5)]||'3000',pattern=/^[0-9]{2,4}$/;!pattern[_0x17f565(0x220)](PORT)&&(console[_0x17f565(0x27d)](_0x17f565(0x225)+PORT+_0x17f565(0x262)),process['exit'](0x1));const HOST=argv[_0x17f565(0x326)]||null,userID=argv[_0x17f565(0x1ec)]||'',debugging=argv['d']||![],nodeversion=process[_0x17f565(0x351)][_0x17f565(0x29b)];let bbpath=_0x17f565(0x23c),bbpath2='';const botfile=_0x17f565(0x1e6),configfile=_0x17f565(0x3a0),settingsfile=_0x17f565(0x224),securefile='bb-secure.json',environment=require('./'+bbpath2+_0x17f565(0x35f))[_0x17f565(0x2e9)]||_0x17f565(0x28d),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x17f565(0x290)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x17f565(0x2b0)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x17f565(0x309),configbackuppath=configpath+_0x17f565(0x21a),logspath=userID?bbpath+_0x17f565(0x38b)+userID+'/':bbpath+'logs/',zippath=userID?bbpath+'zip/'+userID+'/':bbpath+'zip/',loggerfile=fs[_0x17f565(0x235)](logspath+_0x17f565(0x380),{'flags':'a'}),temppath=userID?bbpath+_0x17f565(0x236)+userID+'/':bbpath+_0x17f565(0x236);!fs['existsSync'](configpath)&&fs[_0x17f565(0x1ba)](configpath);!fs[_0x17f565(0x290)](configbackuppath)&&fs[_0x17f565(0x1ba)](configbackuppath);!fs[_0x17f565(0x290)](logspath)&&fs['mkdirSync'](logspath);!fs['existsSync'](zippath)&&fs[_0x17f565(0x1ba)](zippath);!fs['existsSync'](temppath)&&fs[_0x17f565(0x1ba)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x17f565(0x1a1)]({'bots':[]})[_0x17f565(0x333)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x17f565(0x1a1)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x17f565(0x2f7),'onepagemode':![],'marketcapApi':''}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x17f565(0x1a1)]({'secure':{},'blacklist':[]})[_0x17f565(0x333)]();let crypt=new Crypt({'md':_0x17f565(0x1d8),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa,mixpanel=Mixpanel[_0x17f565(0x2af)]('6b67f3d61ee94b8f5c80b4affef4c4d9',{'host':_0x17f565(0x1b2)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings['telegramToken']&&(settings[_0x17f565(0x1ac)]!=''&&settings[_0x17f565(0x1ac)]!=_0x17f565(0x3b3))&&settings['telegramUsername']&&settings[_0x17f565(0x210)]!='')initTelegram();const parseColor=(_0x4fae40,_0x5b648e)=>{const _0x44049a=_0x17f565,_0x19b6d1=/#[A-Z]{3}#/g;if(typeof _0x4fae40==_0x44049a(0x278)){!_0x5b648e?_0x4fae40=_0x4fae40[_0x44049a(0x233)](_0x19b6d1,''):(_0x4fae40=_0x4fae40['replace'](/#BLU#/g,_0x44049a(0x22f)),_0x4fae40=_0x4fae40['replace'](/#RED#/g,_0x44049a(0x245)),_0x4fae40=_0x4fae40[_0x44049a(0x233)](/#YEL#/g,_0x44049a(0x3a5)),_0x4fae40=_0x4fae40[_0x44049a(0x233)](/#MAG#/g,_0x44049a(0x21b)),_0x4fae40=_0x4fae40[_0x44049a(0x233)](/#CYA#/g,'\x1b[36m'),_0x4fae40=_0x4fae40[_0x44049a(0x233)](/#RES#/g,_0x44049a(0x36a)));;}return _0x4fae40;},logger={'screen':_0x343315=>{console['log'](parseColor(_0x343315,!![]));},'simple':_0x22a878=>{const _0x507f0c=_0x17f565;console[_0x507f0c(0x27d)](parseColor(_0x22a878,!![])),loggerfile[_0x507f0c(0x333)](util[_0x507f0c(0x260)](parseColor(_0x22a878,![]))+'\x0a');},'full':async _0xd8ee06=>{const _0x1db7c8=_0x17f565,_0x10d326=getTimeStamp()+_0x1db7c8(0x1aa)+_0xd8ee06;console[_0x1db7c8(0x27d)](parseColor(_0x10d326,!![])),loggerfile[_0x1db7c8(0x333)](util[_0x1db7c8(0x260)](parseColor(_0x10d326,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings[_0x1db7c8(0x271)]!='orders')await sendTelegram(settings['telegramChatId'],_0x1db7c8(0x1e0)+parseColor(_0xd8ee06,![]));},'debug':async(_0xacf2e0,_0x2312a0='')=>{const _0x232255=_0x17f565,_0x374305=getTimeStamp()+_0x232255(0x300)+_0xacf2e0;if(debugging)console[_0x232255(0x27d)](parseColor(_0x374305,!![]));loggerfile[_0x232255(0x333)](util[_0x232255(0x260)](parseColor(_0x374305,![]))+'\x0a');if(_0x2312a0){if(debugging)console[_0x232255(0x27d)](_0x2312a0);loggerfile[_0x232255(0x333)](util[_0x232255(0x260)](_0x2312a0)+'\x0a');}}};let terminating=![];process['on'](_0x17f565(0x339),function(_0x5026f2){const _0x52c8ee=_0x17f565;_0x5026f2[_0x52c8ee(0x2e8)]()[_0x52c8ee(0x343)](_0x52c8ee(0x37f))?(logger[_0x52c8ee(0x1cc)]('#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20'+_0x5026f2[_0x52c8ee(0x2c5)]+_0x52c8ee(0x39e)),process['send']({'terminate':!![]},_0x297abf=>{})):logger['simple'](_0x5026f2);}),process['on']('exit',()=>{const _0xcc92c1=_0x17f565;stopAllBots(),process[_0xcc92c1(0x36c)](0x0);}),process['on'](_0x17f565(0x2c9),()=>{const _0x3f65c6=_0x17f565;stopAllBots(),process[_0x3f65c6(0x36c)](0x0);}),process['on']('SIGINT',()=>{const _0xbff42=_0x17f565;stopAllBots(),process[_0xbff42(0x36c)](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x17f565(0x35f))['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x17f565(0x39a)),app=express(),http=require(_0x17f565(0x358))[_0x17f565(0x1f6)](app);app[_0x17f565(0x295)](fileUpload({'useTempFiles':!![]})),app[_0x17f565(0x1f9)](_0x17f565(0x29f),async(_0x32efae,_0x2b0d07)=>{const _0x3edec3=_0x17f565,_0x2b650d=_0x32efae[_0x3edec3(0x22a)][_0x3edec3(0x306)],_0x297d72=getClientsWithBotID(_0x3edec3(0x2a3)),_0x27a1b3=_0x32efae[_0x3edec3(0x3af)][_0x3edec3(0x2c6)],_0x52902b=timelyDecrypt(_0x27a1b3,![]),_0x1f6d0b=_0x297d72['find'](_0x595fe3=>_0x595fe3['uuid']==_0x52902b);if(_0x1f6d0b){const _0x265189=normalizeIP(_0x32efae[_0x3edec3(0x2a5)][_0x3edec3(0x394)])['store'],_0x3dcba6=_0x32efae[_0x3edec3(0x3af)][_0x3edec3(0x338)];if(validateAccess(_0x3dcba6,_0x52902b,_0x265189)[_0x3edec3(0x345)])_0x2b650d=='backup'&&await backupConfigFiles(),await zipFiles(_0x2b650d),_0x2b0d07[_0x3edec3(0x1dd)](zippath+(_0x2b650d+_0x3edec3(0x226)),_0x3a5f98=>{const _0x5be32e=_0x3edec3;_0x3a5f98&&(logger['full'](_0x5be32e(0x37b)+_0x2b650d),logger['simple'](_0x3a5f98));});else logger[_0x3edec3(0x337)](_0x3edec3(0x2a1)+_0x2b650d+_0x3edec3(0x3a3));}else logger[_0x3edec3(0x337)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x2b650d+'\x20(2)');}),app['post'](_0x17f565(0x1a0),async(_0x19fd19,_0x3f2887)=>{const _0x51e7ce=_0x17f565,_0x384a4c=getClientsWithBotID(_0x51e7ce(0x2a3)),_0x3ebbac=_0x19fd19[_0x51e7ce(0x3af)]['uuid'],_0x2d7915=timelyDecrypt(_0x3ebbac,![]),_0x949c86=_0x384a4c[_0x51e7ce(0x328)](_0x27d070=>_0x27d070[_0x51e7ce(0x2c6)]==_0x2d7915);logger[_0x51e7ce(0x19f)](_0x51e7ce(0x202));if(_0x949c86){const _0x19517e=normalizeIP(_0x19fd19['socket'][_0x51e7ce(0x394)])[_0x51e7ce(0x32b)],_0x488cf2=_0x19fd19[_0x51e7ce(0x3af)]['tkn'];if(validateAccess(_0x488cf2,_0x2d7915,_0x19517e)['allow']){if(_0x19fd19[_0x51e7ce(0x341)]){const _0xc13678=_0x19fd19['files'][_0x51e7ce(0x1f7)];await _0xc13678['mv'](temppath+_0xc13678[_0x51e7ce(0x2fe)]),_0x3f2887[_0x51e7ce(0x2b3)]({'status':!![],'message':_0x51e7ce(0x239)});const _0x289360=getBotsWithMode();_0x289360[_0x51e7ce(0x1c9)]>0x0?confirmRestore(temppath,_0xc13678[_0x51e7ce(0x2fe)]):unzipFile(temppath,_0xc13678[_0x51e7ce(0x2fe)]);}}else logger[_0x51e7ce(0x337)](_0x51e7ce(0x24b));}else logger[_0x51e7ce(0x337)](_0x51e7ce(0x3ab));}),app['use'](express[_0x17f565(0x363)](path[_0x17f565(0x259)](__dirname,bbpath2,'build2'))),app[_0x17f565(0x295)](express[_0x17f565(0x363)](path['join'](__dirname,bbpath2,_0x17f565(0x294)))),app[_0x17f565(0x1f9)]('/',function(_0x4b97ba,_0x4e0bab){const _0x230e2b=_0x17f565;_0x4e0bab['sendFile'](path[_0x230e2b(0x259)](__dirname,bbpath2,'build2',_0x230e2b(0x3aa)));}),app['get'](_0x17f565(0x1bb),function(_0x4b8b87,_0x102f50){const _0x45feba=_0x17f565;_0x102f50['sendFile'](path['join'](__dirname,bbpath2,_0x45feba(0x294),'index.html'));}),app[_0x17f565(0x1f9)](_0x17f565(0x2fb),(_0x30d24a,_0x26d40)=>{const _0x1391c1=_0x17f565;_0x26d40[_0x1391c1(0x35a)](path[_0x1391c1(0x259)](__dirname,bbpath2,_0x1391c1(0x294),_0x1391c1(0x3aa)));}),app[_0x17f565(0x1f9)](_0x17f565(0x2d3),(_0xca830a,_0x2af584)=>{const _0x2e4fa9=_0x17f565;_0x2af584[_0x2e4fa9(0x35a)](path[_0x2e4fa9(0x259)](__dirname,bbpath2,_0x2e4fa9(0x294),_0x2e4fa9(0x3aa)));}),app['get'](_0x17f565(0x266),(_0x440505,_0x56fdb9)=>{const _0x3a4219=_0x17f565;_0x56fdb9['sendFile'](path[_0x3a4219(0x259)](__dirname,bbpath2,_0x3a4219(0x294),_0x3a4219(0x3aa)));}),app[_0x17f565(0x1f9)]('/:bot/history',(_0x24d474,_0x10e5c6)=>{const _0x414edb=_0x17f565;_0x10e5c6[_0x414edb(0x35a)](path[_0x414edb(0x259)](__dirname,bbpath2,_0x414edb(0x294),_0x414edb(0x3aa)));}),app[_0x17f565(0x1f9)](_0x17f565(0x3b6),(_0x1f4a68,_0x24b5fd)=>{const _0x5d2a6c=_0x17f565;_0x24b5fd[_0x5d2a6c(0x35a)](path[_0x5d2a6c(0x259)](__dirname,bbpath2,_0x5d2a6c(0x294),_0x5d2a6c(0x3aa)));}),app[_0x17f565(0x1f9)](_0x17f565(0x353),(_0x3e95de,_0x4200eb)=>{const _0x210b24=_0x17f565;_0x4200eb[_0x210b24(0x35a)](path[_0x210b24(0x259)](__dirname,bbpath2,'build',_0x210b24(0x3aa)));});if(HOST)http[_0x17f565(0x31c)](PORT,HOST);else http[_0x17f565(0x31c)](PORT);const io=require(_0x17f565(0x2ee))(http,{});init();function _0x265a(_0x4e9fcf,_0x3b97b1){const _0x5dd876=_0x3570();return _0x265a=function(_0x5581d6,_0x586551){_0x5581d6=_0x5581d6-0x19c;let _0x3570a2=_0x5dd876[_0x5581d6];return _0x3570a2;},_0x265a(_0x4e9fcf,_0x3b97b1);}async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x42e922=_0x17f565;let _0x49f584='[ip-address]';const _0x4b0fd4=networkInterfaces(),_0x54e9a8={};for(const _0x32ac1b of Object[_0x42e922(0x1f3)](_0x4b0fd4)){for(const _0x4afb02 of _0x4b0fd4[_0x32ac1b]){if((_0x4afb02[_0x42e922(0x2d4)]==_0x42e922(0x367)||_0x4afb02['family']==0x4)&&!_0x4afb02[_0x42e922(0x1da)]){const _0x280889=ipaddr[_0x42e922(0x20d)](_0x4afb02[_0x42e922(0x2aa)])[_0x42e922(0x215)]();_0x280889!='private'&&(!_0x54e9a8[_0x32ac1b]&&(_0x54e9a8[_0x32ac1b]=[]),_0x54e9a8[_0x32ac1b][_0x42e922(0x2ef)](_0x4afb02['address']),_0x49f584=_0x4afb02[_0x42e922(0x2aa)]);}}}return{'serverip':_0x49f584,'netinterfaces':_0x54e9a8};}async function startServer(){const _0x5edb3a=_0x17f565,{serverip:_0x268cad,netinterfaces:_0x38c97e}=getServerIP();logger[_0x5edb3a(0x1cc)](''),logger[_0x5edb3a(0x1cc)]('-----------------------------------------------------------------------------------'),await logger[_0x5edb3a(0x337)](_0x5edb3a(0x1e7)+serverversion+'#RES#\x20'+(environment==_0x5edb3a(0x2f2)?'(staging)':'')+'\x0a'+(_0x5edb3a(0x321)+PORT+_0x5edb3a(0x218))+(_0x5edb3a(0x2ba)+_0x268cad+':'+PORT+_0x5edb3a(0x287))),logger[_0x5edb3a(0x1cc)](_0x5edb3a(0x3b2));if(config[_0x5edb3a(0x1c9)]!=0x0)for(const _0x59b6b0 of config){const _0x88be2b=_0x59b6b0[_0x5edb3a(0x201)]==_0x5edb3a(0x2fc)?'a':'m';if(_0x59b6b0[_0x5edb3a(0x1f5)]==_0x5edb3a(0x1cb)||_0x59b6b0[_0x5edb3a(0x1f5)]==_0x5edb3a(0x2d8))await logger[_0x5edb3a(0x337)]('Starting\x20('+_0x88be2b+_0x5edb3a(0x2a6)+_0x59b6b0[_0x5edb3a(0x253)]+'\x20|\x20'+_0x59b6b0[_0x5edb3a(0x19c)]),startBot([_0x59b6b0['botID'],userID],{'cwd':bbpath},function(_0x58cbd2){const _0x36e408=_0x5edb3a;if(_0x58cbd2)logger[_0x36e408(0x337)](_0x58cbd2);});else(_0x59b6b0[_0x5edb3a(0x1f5)]==_0x5edb3a(0x20f)||_0x59b6b0[_0x5edb3a(0x1f5)]==_0x5edb3a(0x3a8))&&await logger['full'](_0x5edb3a(0x2f0)+_0x88be2b+_0x5edb3a(0x246)+_0x59b6b0[_0x5edb3a(0x253)]+_0x5edb3a(0x216)+_0x59b6b0['botname']);}else!newBot&&logger[_0x5edb3a(0x1cc)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger['simple'](_0x5edb3a(0x3b2)),logger[_0x5edb3a(0x1cc)](''),await logger['debug'](_0x5edb3a(0x30c)+nodeversion),await logger[_0x5edb3a(0x19f)](_0x5edb3a(0x310),_0x38c97e);}function startSocket(){const _0x449c06=_0x17f565;io['on'](_0x449c06(0x327),_0x4b838f=>{const _0x331ec3=_0x449c06;let _0x399b1e,_0x1cedb1,_0x3ea438,_0x1b31a5,_0x123914;const _0x2e9ce4=_0x4b838f[_0x331ec3(0x1d5)][_0x331ec3(0x3af)][_0x331ec3(0x2e6)];_0x1cedb1=_0x2e9ce4[_0x331ec3(0x1d4)](/bot[0-9]{3}/);if(_0x1cedb1)_0x3ea438=_0x1cedb1[0x0]['match'](/[0-9]{3}/);if(_0x3ea438)_0x399b1e=_0x3ea438[0x0];else _0x399b1e=_0x331ec3(0x2a3);const _0xe97f67=_0x4b838f['handshake'][_0x331ec3(0x1b7)][_0x331ec3(0x31a)];if(!_0xe97f67)_0x4b838f[_0x331ec3(0x255)]('status',{'publicKey':secure[_0x331ec3(0x21e)]});else{_0x1b31a5=timelyDecrypt(_0xe97f67,![]);if(!_0x1b31a5)_0x4b838f[_0x331ec3(0x255)]('status',{'publicKey':secure['publicKey']});else{_0x123914=normalizeIP(_0x4b838f[_0x331ec3(0x234)][_0x331ec3(0x394)])[_0x331ec3(0x32b)];if(!devices[_0x1b31a5])devices[_0x1b31a5]={'uuid':_0x1b31a5,'access':{'token':null}};devices[_0x1b31a5]['ip']=_0x123914;const _0x393fee=addClient(_0x4b838f['id'],_0x1b31a5,_0x399b1e);setAccess(_0x393fee),emitMessages(),_0x4b838f['on']('login',_0x1d9580=>{const _0x41e7b3=_0x331ec3,_0x4452ba=timelyDecrypt(_0x1d9580[_0x41e7b3(0x389)],!![],'|@|');if(_0x4452ba){_0x1d9580={'username':_0x1d9580[_0x41e7b3(0x24d)],'password':_0x4452ba},devices[_0x1b31a5][_0x41e7b3(0x1f4)]=validateCredentials(_0x1d9580,_0x1b31a5);if(devices[_0x1b31a5][_0x41e7b3(0x1f4)][_0x41e7b3(0x345)]==![]&&devices[_0x1b31a5][_0x41e7b3(0x1f4)][_0x41e7b3(0x355)]==_0x41e7b3(0x25b))_0x4b838f[_0x41e7b3(0x255)]('status',{'access':devices[_0x1b31a5][_0x41e7b3(0x1f4)]}),loginAccess2FA(_0x1b31a5,_0x123914);else{if(devices[_0x1b31a5][_0x41e7b3(0x1f4)][_0x41e7b3(0x345)]==![]&&devices[_0x1b31a5][_0x41e7b3(0x1f4)][_0x41e7b3(0x355)]==_0x41e7b3(0x349))_0x4b838f['emit'](_0x41e7b3(0x1f5),{'access':devices[_0x1b31a5][_0x41e7b3(0x1f4)]});else devices[_0x1b31a5][_0x41e7b3(0x1f4)]['allow']&&devices[_0x1b31a5][_0x41e7b3(0x1f4)][_0x41e7b3(0x355)]==_0x41e7b3(0x22b)&&(getClientsWithUuid(_0x1b31a5)[_0x41e7b3(0x377)](_0x189ec4=>{setAccess(_0x189ec4);}),logger[_0x41e7b3(0x19f)](_0x41e7b3(0x2ec)+_0x1b31a5[_0x41e7b3(0x388)](-0x8)),setTokenRefresh(_0x1b31a5),setSessionTimeout('login',_0x1b31a5));}}else logger[_0x41e7b3(0x337)]('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x4b838f['on']('reset-password',()=>{resetPassword();}),_0x4b838f['on'](_0x331ec3(0x322),_0xe8a8a2=>{removeClient(_0x4b838f['id']);}),_0x399b1e==_0x331ec3(0x2a3)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x3caa00){const _0x47888e=_0x17f565;if(_0x3caa00!=_0x47888e(0x2a3)&&config[_0x47888e(0x25f)]!=''){if(pid[_0x3caa00])pid[_0x3caa00][_0x47888e(0x2b3)]({'function':_0x47888e(0x21d),'args':null});}_0x3caa00!=_0x47888e(0x2a3)&&broadcastToBots(_0x47888e(0x1e2),JSON[_0x47888e(0x1c3)](config));}function reloadBotManager(){const _0x4697d8=_0x17f565;getClientsWithBotID(_0x4697d8(0x2a3))['forEach'](_0x42df53=>{const _0x41677d=_0x4697d8;getSocket(_0x42df53['id'])['emit'](_0x41677d(0x1f5),{'access':{'allow':![],'reason':_0x41677d(0x1ef),'token':null}});});}function getSocket(_0x1696b9){const _0x35a51c=_0x17f565;return io[_0x35a51c(0x213)][_0x35a51c(0x213)][_0x35a51c(0x1f9)](_0x1696b9);}function setAccess(_0x5a9c37){const _0x3f09a7=_0x17f565,_0x156518=getSocket(_0x5a9c37['id']),_0x477d88=_0x5a9c37[_0x3f09a7(0x2c6)],_0x317e5c=_0x5a9c37[_0x3f09a7(0x3a1)];devices[_0x477d88][_0x3f09a7(0x1f4)]=validateAccess(devices[_0x477d88]['access'][_0x3f09a7(0x2ad)],_0x477d88),logger[_0x3f09a7(0x19f)]('Setting\x20access:\x20'+devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x355)]+_0x3f09a7(0x2b8)+_0x5a9c37['id'][_0x3f09a7(0x388)](-0x8)+_0x3f09a7(0x393)+_0x477d88[_0x3f09a7(0x388)](-0x8)),_0x156518[_0x3f09a7(0x259)](_0x477d88);if(devices[_0x477d88]['access'][_0x3f09a7(0x345)]){_0x156518[_0x3f09a7(0x259)](_0x317e5c);if(_0x317e5c==_0x3f09a7(0x2a3))initializeSocketBotManager(_0x156518);else initializeSocketBot(_0x156518);initClient(_0x317e5c);}devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x2ad)]&&devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x355)]==_0x3f09a7(0x22d)&&setSessionTimeout(_0x3f09a7(0x33d),_0x477d88),devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x2ad)]&&devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x355)]==_0x3f09a7(0x1d3)&&setSessionTimeout(_0x3f09a7(0x2c8),_0x477d88),_0x156518['emit'](_0x3f09a7(0x1f5),{'status':_0x5a9c37[_0x3f09a7(0x228)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x477d88][_0x3f09a7(0x1f4)],'externalip':devices[_0x477d88]['ip'],'publicKey':secure[_0x3f09a7(0x21e)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x345)]==![]&&devices[_0x477d88][_0x3f09a7(0x1f4)][_0x3f09a7(0x355)]==_0x3f09a7(0x1b0)&&temporaryAccess2FA(_0x477d88,devices[_0x477d88]['ip']);}function setSessionTimeout(_0x22c518,_0x377057){const _0x1e6ea9=_0x17f565;let _0x284ba0;if(_0x22c518==_0x1e6ea9(0x2c8))_0x284ba0=loginExpiry*0x3c*0x3e8;else _0x284ba0=devices[_0x377057][_0x1e6ea9(0x305)][_0x1e6ea9(0x31f)]*0x3c*0x3e8-(new Date()[_0x1e6ea9(0x357)]()-devices[_0x377057][_0x1e6ea9(0x305)][_0x1e6ea9(0x379)]);if(devices[_0x377057]['pidExpireLogin'])clearTimeout(devices[_0x377057][_0x1e6ea9(0x1a4)]);devices[_0x377057][_0x1e6ea9(0x1a4)]=setTimeout(()=>{const _0x3267f4=_0x1e6ea9;if(devices[_0x377057][_0x3267f4(0x1ab)])clearTimeout(devices[_0x377057][_0x3267f4(0x1ab)]);removeSocketListeners(_0x377057),addBlacklist(_0x377057),devices[_0x377057]['telegramIpApproval']=null,devices[_0x377057][_0x3267f4(0x2f1)]=null,devices[_0x377057]['access'][_0x3267f4(0x2ad)]=null,logger['debug']('Session\x20expired\x20for\x20user\x20...'+_0x377057[_0x3267f4(0x388)](-0x8)),devices[_0x377057][_0x3267f4(0x1f4)]=validateAccess(devices[_0x377057]['access'][_0x3267f4(0x2ad)],_0x377057),!(devices[_0x377057][_0x3267f4(0x1f4)][_0x3267f4(0x345)]&&devices[_0x377057][_0x3267f4(0x1f4)]['reason']=='login\x20not\x20required')&&(_0x22c518==_0x3267f4(0x2c8)?io['to'](_0x377057)[_0x3267f4(0x255)](_0x3267f4(0x1f5),{'access':{'allow':![],'reason':_0x3267f4(0x34f),'token':null}}):io['to'](_0x377057)[_0x3267f4(0x255)](_0x3267f4(0x1f5),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x377057][_0x3267f4(0x1f4)]['token']=null;},_0x284ba0);}function setTokenRefresh(_0x49a8b2){const _0x527fa2=_0x17f565;if(devices[_0x49a8b2][_0x527fa2(0x1ab)])clearTimeout(devices[_0x49a8b2][_0x527fa2(0x1ab)]);devices[_0x49a8b2][_0x527fa2(0x1ab)]=setTimeout(()=>{const _0x3f43a7=_0x527fa2;getClientsWithUuid(_0x49a8b2)[_0x3f43a7(0x1c9)]!=0x0?(devices[_0x49a8b2][_0x3f43a7(0x1f4)]=refreshToken(_0x49a8b2),io['to'](_0x49a8b2)[_0x3f43a7(0x255)](_0x3f43a7(0x1f5),{'status':_0x3f43a7(0x30d),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x49a8b2][_0x3f43a7(0x1f4)],'externalip':devices[_0x49a8b2]['ip'],'publicKey':secure[_0x3f43a7(0x21e)],'validInstallation':validInstallation}),setTokenRefresh(_0x49a8b2)):clearTimeout(devices[_0x49a8b2][_0x3f43a7(0x1ab)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4e227f){const _0x1fef6b=_0x17f565,_0x5c99e8=getClient(_0x4e227f['id'])[_0x1fef6b(0x2c6)];_0x4e227f[_0x1fef6b(0x255)](_0x1fef6b(0x1e2),config),_0x4e227f[_0x1fef6b(0x255)](_0x1fef6b(0x1a6),cleanSettings()),_0x4e227f['on'](_0x1fef6b(0x2d1),_0x15efd3=>{const _0x226d55=_0x1fef6b;if(validateAccess(_0x15efd3,_0x5c99e8)['allow'])addBot();else logger['full'](_0x226d55(0x34d));}),_0x4e227f['on']('update-bot',(_0x381bb6,_0x4bc3aa)=>{const _0x52aa5a=_0x1fef6b;if(validateAccess(_0x4bc3aa,_0x5c99e8)[_0x52aa5a(0x345)])toggleBot(_0x381bb6[_0x52aa5a(0x253)],_0x381bb6[_0x52aa5a(0x1f5)],_0x381bb6[_0x52aa5a(0x1b3)]);else logger['full'](_0x52aa5a(0x1b5));}),_0x4e227f['on'](_0x1fef6b(0x1a2),(_0x4aa9bf,_0x1f2d84)=>{const _0x513b55=_0x1fef6b;if(validateAccess(_0x1f2d84,_0x5c99e8)['allow'])toggleBotMode(_0x4aa9bf);else logger[_0x513b55(0x337)]('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4e227f['on'](_0x1fef6b(0x288),(_0x5e7d20,_0x4b1fbb)=>{const _0x554276=_0x1fef6b;if(validateAccess(_0x4b1fbb,_0x5c99e8)[_0x554276(0x345)])deleteBot(_0x5e7d20);else logger[_0x554276(0x337)](_0x554276(0x39c));}),_0x4e227f['on']('store-settings',(_0x4b2572,_0x577890)=>{const _0x3a944a=_0x1fef6b;if(validateAccess(_0x577890,_0x5c99e8)[_0x3a944a(0x345)])storeSettings(_0x4b2572,!![]);else logger[_0x3a944a(0x337)](_0x3a944a(0x34b));}),_0x4e227f['on']('update-bb',_0xa12b5b=>{const _0x5d8bc9=_0x1fef6b;if(validateAccess(_0xa12b5b,_0x5c99e8)[_0x5d8bc9(0x345)])updateBB('update');else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4e227f['on'](_0x1fef6b(0x25c),_0x271fd6=>{const _0x13a9f7=_0x1fef6b;if(validateAccess(_0x271fd6,_0x5c99e8)[_0x13a9f7(0x345)])updateBB(_0x13a9f7(0x299));else logger[_0x13a9f7(0x337)](_0x13a9f7(0x23f));}),_0x4e227f['on']('get-backup-files',_0x2e823e=>{const _0x49c0f1=_0x1fef6b;if(validateAccess(_0x2e823e,_0x5c99e8)[_0x49c0f1(0x345)]){const _0x362381=getClient(_0x4e227f['id']);if(_0x362381)getBackupFiles(_0x362381['uuid']);else logger[_0x49c0f1(0x337)](_0x49c0f1(0x29e));}else logger['full'](_0x49c0f1(0x2d6));}),_0x4e227f['on'](_0x1fef6b(0x2c7),(_0x4dfa2d,_0x398109)=>{const _0x2cc7fb=_0x1fef6b;if(validateAccess(_0x398109,_0x5c99e8)['allow'])restoreBackupFile(_0x4dfa2d);else logger[_0x2cc7fb(0x337)](_0x2cc7fb(0x232));}),_0x4e227f['on']('get-messages',_0x4bb0ac=>{const _0x5e13e2=_0x1fef6b;if(validateAccess(_0x4bb0ac,_0x5c99e8)[_0x5e13e2(0x345)])getMessages();else logger[_0x5e13e2(0x337)](_0x5e13e2(0x23a));}),_0x4e227f['on'](_0x1fef6b(0x2e5),(_0x135c48,_0x326511)=>{const _0x523fa9=_0x1fef6b;if(validateAccess(_0x326511,_0x5c99e8)[_0x523fa9(0x345)])confirmMessage(_0x135c48);else logger[_0x523fa9(0x337)](_0x523fa9(0x249));}),_0x4e227f['on'](_0x1fef6b(0x22c),_0x5aff52=>{const _0x5d7175=_0x1fef6b;if(validateAccess(_0x5aff52,_0x5c99e8)[_0x5d7175(0x345)]){if(devices[_0x5c99e8][_0x5d7175(0x1ab)])clearTimeout(devices[_0x5c99e8][_0x5d7175(0x1ab)]);if(devices[_0x5c99e8][_0x5d7175(0x1a4)])clearTimeout(devices[_0x5c99e8][_0x5d7175(0x1a4)]);removeSocketListeners(getClient(_0x4e227f['id'])[_0x5d7175(0x2c6)]),addBlacklist(_0x5c99e8),devices[_0x5c99e8]['telegramIpApproval']=null,devices[_0x5c99e8]['telegram2FaApproval']=null,devices[_0x5c99e8][_0x5d7175(0x1f4)]['token']=null,logger['debug'](_0x5d7175(0x2ca)+_0x5c99e8[_0x5d7175(0x388)](-0x8)),io['to'](getClient(_0x4e227f['id'])[_0x5d7175(0x2c6)])['emit'](_0x5d7175(0x1f5),{'access':{'allow':![],'reason':_0x5d7175(0x2c4),'token':null}});}else logger[_0x5d7175(0x337)](_0x5d7175(0x3a7));});}function initializeSocketBot(_0x26e4c6){const _0xc6b923=_0x17f565,_0x4daba3=getClient(_0x26e4c6['id'])['bot'],_0xec7969=getClient(_0x26e4c6['id'])[_0xc6b923(0x2c6)];_0x26e4c6['on'](_0xc6b923(0x2e3),(_0x393e44,_0x31f31b)=>{const _0x2d24b9=_0xc6b923;if(validateAccess(_0x31f31b,_0xec7969)[_0x2d24b9(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3]['send']({'function':_0x2d24b9(0x391),'args':_0x393e44});}else logger[_0x2d24b9(0x337)](_0x2d24b9(0x1f0));}),_0x26e4c6['on'](_0xc6b923(0x1b4),(_0x185c07,_0x16a007)=>{const _0x212f4c=_0xc6b923;if(validateAccess(_0x16a007,_0xec7969)[_0x212f4c(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3]['send']({'function':_0x212f4c(0x387),'args':_0x185c07});}else logger['full'](_0x212f4c(0x21c));}),_0x26e4c6['on'](_0xc6b923(0x3a4),(_0x3ad705,_0x1d948d)=>{const _0x5d57ac=_0xc6b923;if(validateAccess(_0x1d948d,_0xec7969)['allow']){if(pid[_0x4daba3])pid[_0x4daba3][_0x5d57ac(0x2b3)]({'function':_0x5d57ac(0x360),'args':_0x3ad705});}else logger[_0x5d57ac(0x337)](_0x5d57ac(0x281));}),_0x26e4c6['on'](_0xc6b923(0x320),(_0x3b29a2,_0x2bb69c)=>{const _0x586c81=_0xc6b923;if(validateAccess(_0x2bb69c,_0xec7969)['allow']){if(pid[_0x4daba3])pid[_0x4daba3][_0x586c81(0x2b3)]({'function':_0x586c81(0x364),'args':_0x3b29a2});}else logger[_0x586c81(0x337)](_0x586c81(0x34a));}),_0x26e4c6['on'](_0xc6b923(0x392),(_0x54154b,_0x4af93e)=>{const _0x6a31d6=_0xc6b923;if(validateAccess(_0x4af93e,_0xec7969)[_0x6a31d6(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3][_0x6a31d6(0x2b3)]({'function':_0x6a31d6(0x207),'args':_0x54154b});}else logger[_0x6a31d6(0x337)]('Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration');}),_0x26e4c6['on']('store-fiat',(_0x18b048,_0x47317b)=>{const _0x482670=_0xc6b923;if(validateAccess(_0x47317b,_0xec7969)[_0x482670(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3]['send']({'function':'storeFiat','args':_0x18b048});}else logger[_0x482670(0x337)](_0x482670(0x29d));}),_0x26e4c6['on'](_0xc6b923(0x37d),_0x45cabc=>{const _0x6fe9fb=_0xc6b923;if(validateAccess(_0x45cabc,_0xec7969)[_0x6fe9fb(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3][_0x6fe9fb(0x2b3)]({'function':_0x6fe9fb(0x33c),'args':null});}else logger[_0x6fe9fb(0x337)]('Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history');}),_0x26e4c6['on'](_0xc6b923(0x24a),_0x477e06=>{const _0x11a02a=_0xc6b923;if(validateAccess(_0x477e06,_0xec7969)[_0x11a02a(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3][_0x11a02a(0x2b3)]({'function':_0x11a02a(0x291),'args':null});}else logger['full']('Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances');}),_0x26e4c6['on'](_0xc6b923(0x2b2),(_0x45bb02,_0x2e44e3)=>{const _0xc930f1=_0xc6b923;if(validateAccess(_0x2e44e3,_0xec7969)['allow']){if(pid[_0x4daba3])pid[_0x4daba3][_0xc930f1(0x2b3)]({'function':_0xc930f1(0x25d),'args':_0x45bb02});}else logger[_0xc930f1(0x337)](_0xc930f1(0x33e));}),_0x26e4c6['on'](_0xc6b923(0x396),_0x2ac124=>{const _0x45e2ef=_0xc6b923;if(validateAccess(_0x2ac124,_0xec7969)[_0x45e2ef(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3][_0x45e2ef(0x2b3)]({'function':_0x45e2ef(0x37c),'args':null});}else logger[_0x45e2ef(0x337)](_0x45e2ef(0x317));}),_0x26e4c6['on']('show-config',_0x7106b9=>{const _0x2f13a2=_0xc6b923;if(validateAccess(_0x7106b9,_0xec7969)[_0x2f13a2(0x345)]){if(pid[_0x4daba3])pid[_0x4daba3][_0x2f13a2(0x2b3)]({'function':_0x2f13a2(0x36d),'args':null});}else logger['full'](_0x2f13a2(0x1c5));}),_0x26e4c6['on']('update-bb',_0xea14de=>{const _0x5cdb6e=_0xc6b923;if(validateAccess(_0xea14de,_0xec7969)[_0x5cdb6e(0x345)])updateBB(_0x5cdb6e(0x2da));else logger[_0x5cdb6e(0x337)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x26e4c6['on']('get-messages',_0x578aa4=>{const _0x4f41ec=_0xc6b923;if(validateAccess(_0x578aa4,_0xec7969)[_0x4f41ec(0x345)])getMessages();else logger['full'](_0x4f41ec(0x23a));}),_0x26e4c6['on'](_0xc6b923(0x2e5),(_0x1852bf,_0x432e45)=>{const _0x6adff7=_0xc6b923;if(validateAccess(_0x432e45,_0xec7969)[_0x6adff7(0x345)])confirmMessage(_0x1852bf);else logger[_0x6adff7(0x337)](_0x6adff7(0x249));}),_0x26e4c6['on'](_0xc6b923(0x22c),_0x5143ca=>{const _0x4022d2=_0xc6b923;if(validateAccess(_0x5143ca,_0xec7969)[_0x4022d2(0x345)]){if(devices[_0xec7969][_0x4022d2(0x1ab)])clearTimeout(devices[_0xec7969][_0x4022d2(0x1ab)]);if(devices[_0xec7969][_0x4022d2(0x1a4)])clearTimeout(devices[_0xec7969][_0x4022d2(0x1a4)]);removeSocketListeners(getClient(_0x26e4c6['id'])['uuid']),addBlacklist(_0xec7969),devices[_0xec7969][_0x4022d2(0x305)]=null,devices[_0xec7969][_0x4022d2(0x2f1)]=null,devices[_0xec7969][_0x4022d2(0x1f4)][_0x4022d2(0x2ad)]=null,logger[_0x4022d2(0x19f)](_0x4022d2(0x2ca)+_0xec7969['slice'](-0x8)),io['to'](getClient(_0x26e4c6['id'])[_0x4022d2(0x2c6)])[_0x4022d2(0x255)](_0x4022d2(0x1f5),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger['full'](_0x4022d2(0x3a7));});}function removeSocketListeners(_0x4a6791){const _0x19b563=_0x17f565;getClientsWithUuid(_0x4a6791)[_0x19b563(0x377)](_0x1ce282=>{const _0x31887c=_0x19b563;getSocket(_0x1ce282['id'])[_0x31887c(0x2c3)]();});}function cleanSettings(){const _0x5b2541=_0x17f565;let _0xfe5469=settings;return settings[_0x5b2541(0x1ac)]&&settings[_0x5b2541(0x1ac)]!=''&&(_0xfe5469={..._0xfe5469,'telegramToken':_0x5b2541(0x21f)}),settings['bbPassword']&&settings['bbPassword']!=''&&(_0xfe5469={..._0xfe5469,'bbPassword':_0x5b2541(0x21f)}),settings[_0x5b2541(0x36f)]&&settings[_0x5b2541(0x36f)]!=''&&(_0xfe5469={..._0xfe5469,'marketcapApi':_0x5b2541(0x21f)}),(settings[_0x5b2541(0x335)]&&settings[_0x5b2541(0x335)]==_0x5b2541(0x3b3)||settings['telegramToken']&&settings[_0x5b2541(0x1ac)]==_0x5b2541(0x3b3)||settings[_0x5b2541(0x36f)]&&settings[_0x5b2541(0x36f)]=='***')&&(_0xfe5469={..._0xfe5469,'restored':{'password':settings[_0x5b2541(0x335)]==_0x5b2541(0x3b3),'telegram':settings[_0x5b2541(0x1ac)]==_0x5b2541(0x3b3),'marketcap':settings[_0x5b2541(0x36f)]==_0x5b2541(0x3b3)}}),_0xfe5469;}async function updateBB(_0x158892){const _0x2245e8=_0x17f565;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0xaf0ea8=>{const _0x264347=_0x265a;restartBot(_0xaf0ea8[_0x264347(0x253)]);});if(_0x158892==_0x2245e8(0x2da))process[_0x2245e8(0x2b3)]({'update':!![],'environment':environment},_0x59fdcb=>{});else _0x158892==_0x2245e8(0x299)&&process['send']({'reinstall':!![],'environment':environment},_0x404391=>{});}function startBot(_0x48f7d4,_0x18e67b,_0x115f37){const _0x328199=_0x17f565;if(debugging)_0x48f7d4[_0x328199(0x2ef)]('-d');let _0x34ba04=![];const _0xf5a787=_0x48f7d4[0x0];_0x18e67b={..._0x18e67b,'stdio':[_0x328199(0x2cf),_0x328199(0x2cf),_0x328199(0x2cf),_0x328199(0x1bd)]},pid[_0xf5a787]=childProcess[_0x328199(0x346)](botfile,_0x48f7d4,_0x18e67b),pid[_0xf5a787]['on']('message',_0x174c1e=>{const _0xf98365=_0x328199;switch(Object['keys'](_0x174c1e)[0x0]){case _0xf98365(0x19c):updateBotName(_0xf5a787,_0x174c1e['botname']);break;case _0xf98365(0x1e5):updateBotManager();break;case _0xf98365(0x1f5):updateStatus(_0xf5a787,_0x174c1e[_0xf98365(0x1f5)]);break;case'live':updateLive(_0xf5a787,_0x174c1e[_0xf98365(0x1b3)]);break;case _0xf98365(0x221):updateLive(_0xf5a787,_0x174c1e[_0xf98365(0x221)]),io['to'](_0xf5a787)[_0xf98365(0x255)](_0xf98365(0x1f5),{'access':{'allow':![],'reason':_0xf98365(0x1ef),'token':null}});break;case _0xf98365(0x283):_0x174c1e[_0xf98365(0x283)]==_0xf98365(0x340)&&restartBot(_0xf5a787);_0x174c1e[_0xf98365(0x283)]==_0xf98365(0x2bf)&&toggleBot(_0xf5a787,_0xf98365(0x20f),_0xf98365(0x399));break;case _0xf98365(0x2f6):sendTelegramBot(_0xf5a787,_0x174c1e[_0xf98365(0x2f6)]);break;case _0xf98365(0x1c1):sendTelegramMsg(_0x174c1e[_0xf98365(0x1c1)]);break;case _0xf98365(0x2ae):io['to'](_0xf5a787)['emit'](_0x174c1e[_0xf98365(0x2ae)],_0x174c1e[_0xf98365(0x272)]);break;}}),pid[_0xf5a787]['on'](_0x328199(0x241),function(_0x4e848b){if(_0x34ba04)return;_0x34ba04=!![],_0x115f37(_0x4e848b);}),pid[_0xf5a787]['on']('exit',async function(_0x649c7c){const _0x2659fe=_0x328199;if(terminating)return;if(installingUpdate){logger[_0x2659fe(0x19f)]('Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process'),io[_0x2659fe(0x34e)]();return;}if(_0x34ba04)return;_0x34ba04=!![],_0x115f37(null);const _0x288ca4=dbConfig[_0x2659fe(0x1f9)]('bots')[_0x2659fe(0x328)]({'botID':_0xf5a787})[_0x2659fe(0x296)]();_0x288ca4&&(_0x288ca4[_0x2659fe(0x1f5)]==_0x2659fe(0x1cb)||_0x288ca4['status']==_0x2659fe(0x2d8))&&(await sleep(0x3e8),updateLive(_0xf5a787,_0x2659fe(0x399)),logger[_0x2659fe(0x337)](_0x2659fe(0x24f)+_0xf5a787),startBot([_0xf5a787,userID],{'cwd':bbpath},function(_0x2a267e){const _0x295c1d=_0x2659fe;if(_0x2a267e)logger[_0x295c1d(0x337)](_0x2a267e);}));});}function stopBot(_0x3bc6d6){const _0x39488c=_0x17f565;getClientsWithBotID(_0x3bc6d6)[_0x39488c(0x377)](_0x3b2697=>{getSocket(_0x3b2697['id'])['disconnect'](!![]),removeClient(_0x3b2697['id']);}),pid[_0x3bc6d6]&&(pid[_0x3bc6d6][_0x39488c(0x2bf)](),pid[_0x3bc6d6]=null);}function stopAllBots(){terminating=!![];const _0x53315f=getEnabledBots();_0x53315f['forEach'](_0x338fd0=>{const _0x11ddb5=_0x265a;stopBot(_0x338fd0[_0x11ddb5(0x253)]);});}function restartBot(_0x59284f){const _0x3b3064=_0x17f565;if(pid[_0x59284f])pid[_0x59284f][_0x3b3064(0x2bf)]();}function addBot(){const _0x185a39=_0x17f565;let _0x2a8253;for(let _0x16142e=0x1;_0x16142e<0x3e9;_0x16142e++){_0x2a8253=_0x16142e['toString']()[_0x185a39(0x37a)](0x3,'0');let _0x9c6506=config[_0x185a39(0x328)](_0xa4a5ef=>_0xa4a5ef[_0x185a39(0x253)]==_0x2a8253);if(!_0x9c6506)break;}if(_0x2a8253==='1000'){logger[_0x185a39(0x337)](_0x185a39(0x284));return;}logger['full'](_0x185a39(0x375)+_0x2a8253),dbConfig[_0x185a39(0x1f9)](_0x185a39(0x1e2))[_0x185a39(0x2ef)]({'botID':_0x2a8253,'botname':_0x185a39(0x2d2)+_0x2a8253,'status':'new','live':''})[_0x185a39(0x333)](),startBot([_0x2a8253,userID],{'cwd':bbpath},function(_0x118861){const _0xd5637a=_0x185a39;if(_0x118861)logger[_0xd5637a(0x337)](_0x118861);}),config=getConfiguration(),io['to'](_0x185a39(0x2a3))[_0x185a39(0x255)](_0x185a39(0x1e2),config),broadcastToBots(_0x185a39(0x1e2),JSON['stringify'](config));}function deleteBot(_0x3aec6e){const _0x1b40c6=_0x17f565;getClientsWithBotID(_0x3aec6e)['forEach'](_0x4a1f3a=>{const _0x322a94=_0x265a;getSocket(_0x4a1f3a['id'])[_0x322a94(0x322)](!![]),removeClient(_0x4a1f3a['id']);}),dbConfig[_0x1b40c6(0x1f9)](_0x1b40c6(0x1e2))['remove']({'botID':_0x3aec6e})[_0x1b40c6(0x333)](),logger[_0x1b40c6(0x337)](_0x1b40c6(0x282)+_0x3aec6e),stopBot(_0x3aec6e);try{if(fs['existsSync'](path['join'](configpath,'bot-'+_0x3aec6e+_0x1b40c6(0x2ff))))fs[_0x1b40c6(0x36e)](path[_0x1b40c6(0x259)](configpath,_0x1b40c6(0x23d)+_0x3aec6e+'-config.json'));if(fs[_0x1b40c6(0x290)](path[_0x1b40c6(0x259)](configpath,_0x1b40c6(0x23d)+_0x3aec6e+'-events.json')))fs[_0x1b40c6(0x36e)](path[_0x1b40c6(0x259)](configpath,_0x1b40c6(0x23d)+_0x3aec6e+'-events.json'));if(fs[_0x1b40c6(0x290)](path['join'](configpath,_0x1b40c6(0x23d)+_0x3aec6e+'-performance.json')))fs[_0x1b40c6(0x36e)](path[_0x1b40c6(0x259)](configpath,'bot-'+_0x3aec6e+_0x1b40c6(0x2b9)));if(fs['existsSync'](path[_0x1b40c6(0x259)](configpath,_0x1b40c6(0x23d)+_0x3aec6e+_0x1b40c6(0x27c))))fs[_0x1b40c6(0x36e)](path[_0x1b40c6(0x259)](configpath,_0x1b40c6(0x23d)+_0x3aec6e+_0x1b40c6(0x27c)));}catch(_0x318095){if(_0x318095)logger[_0x1b40c6(0x337)](_0x1b40c6(0x30e),_0x318095);}config=getConfiguration(),io['to'](_0x1b40c6(0x2a3))['emit'](_0x1b40c6(0x1e2),config),broadcastToBots(_0x1b40c6(0x1e2),JSON['stringify'](config));}function toggleBot(_0x577b3f,_0x4f47c9,_0x3461fb){const _0x51cf50=_0x17f565;dbConfig[_0x51cf50(0x1f9)]('bots')[_0x51cf50(0x328)]({'botID':_0x577b3f})[_0x51cf50(0x276)]({'status':_0x4f47c9})['assign']({'live':_0x3461fb})['write']();if(_0x4f47c9==_0x51cf50(0x1cb)||_0x4f47c9=='new')logger[_0x51cf50(0x337)](_0x51cf50(0x1a3)+_0x577b3f),startBot([_0x577b3f,userID],{'cwd':bbpath},function(_0x38e787){const _0x3d251f=_0x51cf50;if(_0x38e787)logger[_0x3d251f(0x337)](_0x38e787);});else(_0x4f47c9=='disabled'||_0x4f47c9==_0x51cf50(0x3a8))&&(logger[_0x51cf50(0x337)](_0x51cf50(0x277)+_0x577b3f),stopBot(_0x577b3f));config=getConfiguration(),io['to']('botmanager')['emit'](_0x51cf50(0x1e2),config),broadcastToBots(_0x51cf50(0x1e2),JSON[_0x51cf50(0x1c3)](config));}function toggleStatus(_0x44d6a8){const _0x70d218=_0x17f565;let _0x4658d2=dbConfig[_0x70d218(0x1f9)](_0x70d218(0x1e2))[_0x70d218(0x328)]({'botID':_0x44d6a8})[_0x70d218(0x296)](),_0x56b836;if(_0x4658d2['status']==='enabled')_0x56b836=_0x70d218(0x20f);else{if(_0x4658d2[_0x70d218(0x1f5)]===_0x70d218(0x2d8))_0x56b836='new-disabled';else{if(_0x4658d2['status']===_0x70d218(0x3a8))_0x56b836=_0x70d218(0x2d8);else{if(_0x4658d2[_0x70d218(0x1f5)]===_0x70d218(0x20f))_0x56b836='enabled';}}}return _0x56b836;}function updateStatus(_0x4b61d9,_0x5a6249){const _0x4bed13=_0x17f565;dbConfig[_0x4bed13(0x1f9)]('bots')[_0x4bed13(0x328)]({'botID':_0x4b61d9})[_0x4bed13(0x276)]({'status':_0x5a6249})['write'](),config=getConfiguration(),io['to'](_0x4bed13(0x2a3))[_0x4bed13(0x255)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function updateLive(_0xa55fdf,_0x2a5668){const _0x42b20d=_0x17f565;dbConfig[_0x42b20d(0x1f9)](_0x42b20d(0x1e2))[_0x42b20d(0x328)]({'botID':_0xa55fdf})['assign']({'live':_0x2a5668})[_0x42b20d(0x333)](),config=getConfiguration(),io['to']('botmanager')[_0x42b20d(0x255)](_0x42b20d(0x1e2),config),broadcastToBots(_0x42b20d(0x1e2),JSON[_0x42b20d(0x1c3)](config));}function updateBotName(_0x5bd785,_0x4a8a31){const _0x146f45=_0x17f565;dbConfig['get'](_0x146f45(0x1e2))['find']({'botID':_0x5bd785})[_0x146f45(0x276)]({'botname':_0x4a8a31})['write'](),config=getConfiguration(),io['to'](_0x146f45(0x2a3))['emit'](_0x146f45(0x1e2),config),broadcastToBots(_0x146f45(0x1e2),JSON[_0x146f45(0x1c3)](config));}function updateBotManager(){const _0x218e4e=_0x17f565;config=getConfiguration(),io['to'](_0x218e4e(0x2a3))[_0x218e4e(0x255)]('bots',config),broadcastToBots(_0x218e4e(0x1e2),JSON[_0x218e4e(0x1c3)](config));}function toggleBotMode(_0x40552f){const _0x544192=_0x17f565;if(pid[_0x40552f])pid[_0x40552f]['send']({'function':_0x544192(0x398),'args':null});else{const _0xd418ea=configpath+'bot-'+_0x40552f+_0x544192(0x2ff),_0x36c224=fs['readFileSync'](_0xd418ea),_0x299a93=JSON[_0x544192(0x20d)](_0x36c224),_0x10ed70=_0x299a93[_0x544192(0x3a1)][0x0]['headless'];_0x299a93[_0x544192(0x3a1)][0x0][_0x544192(0x32f)]=!_0x10ed70;const _0x31e3b3=JSON[_0x544192(0x1c3)](_0x299a93,null,0x2);fs[_0x544192(0x1de)](_0xd418ea,_0x31e3b3),config=getConfiguration(),io['to']('botmanager')[_0x544192(0x255)]('bots',config),broadcastToBots(_0x544192(0x1e2),JSON['stringify'](config));}}function validateTelegram(_0x21729f){const _0x3da4ee=_0x17f565;if(_0x21729f[_0x3da4ee(0x38d)][_0x3da4ee(0x24d)]!=settings[_0x3da4ee(0x210)]&&'@'+_0x21729f['from'][_0x3da4ee(0x24d)]!=settings[_0x3da4ee(0x210)]||_0x21729f[_0x3da4ee(0x28e)]['id']!=settings['telegramChatId'])return sendTelegram(_0x21729f['chat']['id'],_0x3da4ee(0x2f9),{'parse_mode':'HTML'}),![];return!![];}async function initTelegram(){const _0x3076dc=_0x17f565;if(tgBot)tgBot['stop'](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings[_0x3076dc(0x1ac)]);let _0x16084b=_0x3076dc(0x2e7);_0x16084b+='\x0a',_0x16084b+=_0x3076dc(0x2dc),_0x16084b+='/disable\x20-\x20disable\x20notifications\x0a',_0x16084b+=_0x3076dc(0x229),_0x16084b+=_0x3076dc(0x1d1),_0x16084b+=_0x3076dc(0x1e9),_0x16084b+=_0x3076dc(0x368),_0x16084b+=_0x3076dc(0x331),_0x16084b+=_0x3076dc(0x26f),_0x16084b+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x16084b+=_0x3076dc(0x2b4),_0x16084b+=_0x3076dc(0x318),_0x16084b+=_0x3076dc(0x3b0),_0x16084b+=_0x3076dc(0x2cb),_0x16084b+=_0x3076dc(0x264);let _0x6e7edf=_0x3076dc(0x2fd);_0x6e7edf+='\x0a',_0x6e7edf+=_0x16084b,tgBot[_0x3076dc(0x1c4)]((_0x244088,_0x5aec00)=>{const _0x3c4c33=_0x3076dc;logger[_0x3c4c33(0x1cc)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x3c4c33(0x19f)](_0x3c4c33(0x203),_0x244088);}),tgBot[_0x3076dc(0x295)](async(_0x241079,_0xf47e97)=>{const _0x1682c9=_0x3076dc;if(!(!settings[_0x1682c9(0x36b)]&&_0x241079[_0x1682c9(0x2da)][_0x1682c9(0x2f4)]['text']==_0x1682c9(0x34c))){if(!validateTelegram(_0x241079))return;}_0xf47e97();}),tgBot['command'](_0x3076dc(0x2eb),async _0x45d39f=>{const _0x2ba08a=_0x3076dc;if(!settings['telegramChatId'])updateSetting('telegramChatId',_0x45d39f[_0x2ba08a(0x28e)]['id']);updateSetting('telegramEnabled',!![]);if(!validateTelegram(_0x45d39f))return;await sendTelegram(_0x45d39f[_0x2ba08a(0x28e)]['id'],_0x6e7edf);}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x1f1),async _0x18b423=>{const _0x2a7ec0=_0x3076dc;updateSetting('telegramEnabled',!![]),await sendTelegram(_0x18b423[_0x2a7ec0(0x28e)]['id'],_0x2a7ec0(0x323));}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x1e3),async _0x59f80a=>{const _0x256622=_0x3076dc;await sendTelegram(_0x59f80a[_0x256622(0x28e)]['id'],_0x256622(0x372)),updateSetting(_0x256622(0x342),![]);}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x1c8),async _0x329547=>{const _0x3ed282=_0x3076dc,_0x3adb4f=Markup[_0x3ed282(0x31b)]([Markup[_0x3ed282(0x28b)][_0x3ed282(0x1c2)](_0x3ed282(0x1ed),_0x3ed282(0x1df)),Markup[_0x3ed282(0x28b)][_0x3ed282(0x1c2)]('Alerts',_0x3ed282(0x1be)),Markup['button'][_0x3ed282(0x1c2)](_0x3ed282(0x28c),'config_all')]);_0x329547[_0x3ed282(0x280)](_0x3ed282(0x330),_0x3adb4f);}),tgBot[_0x3076dc(0x2d9)](_0x3076dc(0x1df),async _0x587956=>{const _0x5b407f=_0x3076dc;_0x587956[_0x5b407f(0x32c)](),updateSetting('telegramEvents',_0x5b407f(0x2f5)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x587956['chat']['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only');}),tgBot['action'](_0x3076dc(0x1be),async _0x1cbdeb=>{const _0x3dfd05=_0x3076dc;_0x1cbdeb['editMessageReplyMarkup'](),updateSetting(_0x3dfd05(0x271),_0x3dfd05(0x329)),updateSetting(_0x3dfd05(0x342),!![]),await sendTelegram(_0x1cbdeb[_0x3dfd05(0x28e)]['id'],_0x3dfd05(0x1eb));}),tgBot['action'](_0x3076dc(0x28f),async _0x127a2e=>{const _0x1262c9=_0x3076dc;_0x127a2e['editMessageReplyMarkup'](),updateSetting(_0x1262c9(0x271),'all'),updateSetting(_0x1262c9(0x342),!![]),await sendTelegram(_0x127a2e[_0x1262c9(0x28e)]['id'],_0x1262c9(0x2ab));}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x1f5),async _0x1828c1=>{const _0x2e3994=_0x3076dc,_0x3750f6=getBotsWithMode();let _0x2b86d8=_0x2e3994(0x26d);config[_0x2e3994(0x377)](_0x3d09bf=>{const _0x882587=_0x2e3994,_0x5d87a9=_0x3750f6[_0x882587(0x328)](_0x35a121=>_0x35a121[_0x882587(0x253)]==_0x3d09bf[_0x882587(0x253)])[_0x882587(0x201)];_0x2b86d8+=_0x882587(0x2d2)+_0x3d09bf[_0x882587(0x253)]+':\x20'+_0x3d09bf[_0x882587(0x1f5)]+_0x882587(0x216)+_0x5d87a9+_0x882587(0x216)+_0x3d09bf['live']+'\x0a';}),_0x2b86d8+='\x0a',_0x2b86d8+=_0x2e3994(0x211),_0x2b86d8+=!settings['telegramEnabled']?_0x2e3994(0x217):_0x2e3994(0x251),_0x2b86d8+=settings['telegramEnabled']?settings[_0x2e3994(0x271)]==_0x2e3994(0x2fa)?_0x2e3994(0x39d):_0x2e3994(0x240)+settings[_0x2e3994(0x271)]+_0x2e3994(0x312):'',await sendTelegram(_0x1828c1[_0x2e3994(0x28e)]['id'],_0x2b86d8,{'parse_mode':_0x2e3994(0x1e1)});}),tgBot['command']('restart',async _0x95d426=>{const _0x264e0e=_0x3076dc,_0x5e7e83=getEnabledBots();if(_0x5e7e83[_0x264e0e(0x1c9)]==0x0)await sendTelegram(_0x95d426[_0x264e0e(0x28e)]['id'],_0x264e0e(0x26e));else{if(_0x5e7e83['length']>0x1)_0x5e7e83[_0x264e0e(0x2ef)]({'botID':_0x264e0e(0x2fa)});let _0x1b2992=[],_0x3fd240=[];const _0x469225=_0x5e7e83['length']%0x4==0x0||_0x5e7e83[_0x264e0e(0x1c9)]%0x4==0x3||_0x5e7e83[_0x264e0e(0x1c9)]%0x3==0x1?0x4:0x3;let _0x58d98a=0x0;_0x5e7e83['forEach']((_0x353267,_0x421c7d)=>{const _0x41f3cd=_0x264e0e;if(_0x421c7d%_0x469225==0x0)_0x3fd240=[];_0x3fd240[_0x41f3cd(0x2ef)](Markup['button'][_0x41f3cd(0x1c2)](_0x353267[_0x41f3cd(0x253)]=='all'?_0x41f3cd(0x1d9):_0x41f3cd(0x2d2)+_0x353267[_0x41f3cd(0x253)],_0x41f3cd(0x27a)+_0x353267['botID'])),_0x421c7d%_0x469225==0x0&&(_0x1b2992[_0x58d98a]=_0x3fd240,_0x58d98a++);});const _0x336c22=Markup[_0x264e0e(0x31b)](_0x1b2992);_0x95d426['reply'](_0x264e0e(0x1a5),_0x336c22);}}),tgBot[_0x3076dc(0x2d9)](/restart_(.+)/,async _0x2940ed=>{const _0xd83e17=_0x3076dc,_0x1a66cb=_0x2940ed[_0xd83e17(0x1d4)][0x1];_0x2940ed[_0xd83e17(0x32c)](),_0x1a66cb==_0xd83e17(0x2fa)?config[_0xd83e17(0x377)](_0x4b3b66=>{restartBot(_0x4b3b66['botID']);}):restartBot(_0x1a66cb);}),tgBot[_0x3076dc(0x1ae)]('on',async _0x5ea57f=>{const _0x1d3f90=_0x3076dc,_0xfcc43c=getDisabledBots();if(_0xfcc43c[_0x1d3f90(0x1c9)]==0x0)await sendTelegram(_0x5ea57f[_0x1d3f90(0x28e)]['id'],_0x1d3f90(0x243));else{if(_0xfcc43c[_0x1d3f90(0x1c9)]>0x1)_0xfcc43c[_0x1d3f90(0x2ef)]({'botID':_0x1d3f90(0x2fa)});let _0x1744a5=[],_0x57eb8c=[];const _0xf4563d=_0xfcc43c['length']%0x4==0x0||_0xfcc43c[_0x1d3f90(0x1c9)]%0x4==0x3||_0xfcc43c['length']%0x3==0x1?0x4:0x3;let _0x445bc6=0x0;_0xfcc43c[_0x1d3f90(0x377)]((_0x5d6ca1,_0x12dff7)=>{const _0x19ec1c=_0x1d3f90;if(_0x12dff7%_0xf4563d==0x0)_0x57eb8c=[];_0x57eb8c[_0x19ec1c(0x2ef)](Markup[_0x19ec1c(0x28b)][_0x19ec1c(0x1c2)](_0x5d6ca1[_0x19ec1c(0x253)]==_0x19ec1c(0x2fa)?_0x19ec1c(0x1d9):_0x19ec1c(0x2d2)+_0x5d6ca1[_0x19ec1c(0x253)],_0x19ec1c(0x313)+_0x5d6ca1['botID'])),_0x12dff7%_0xf4563d==0x0&&(_0x1744a5[_0x445bc6]=_0x57eb8c,_0x445bc6++);});const _0x2b827b=Markup[_0x1d3f90(0x31b)](_0x1744a5);_0x5ea57f[_0x1d3f90(0x280)]('Which\x20bot\x20do\x20you\x20want\x20to\x20start?',_0x2b827b);}}),tgBot['action'](/on_(.+)/,async _0xa082ab=>{const _0x4b36ca=_0x3076dc,_0x31aa08=_0xa082ab['match'][0x1];_0xa082ab[_0x4b36ca(0x32c)]();if(_0x31aa08==_0x4b36ca(0x2fa)){const _0x288c95=getDisabledBots();await sendTelegram(_0xa082ab['chat']['id'],_0x4b36ca(0x35b)),_0x288c95[_0x4b36ca(0x377)](_0x3ba52a=>{const _0xc91bfd=_0x4b36ca;if(_0x3ba52a[_0xc91bfd(0x253)]!=_0xc91bfd(0x2fa))toggleBot(_0x3ba52a['botID'],toggleStatus(_0x3ba52a[_0xc91bfd(0x253)]),_0xc91bfd(0x399));});}else await sendTelegram(_0xa082ab[_0x4b36ca(0x28e)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x31aa08),toggleBot(_0x31aa08,toggleStatus(_0x31aa08),_0x4b36ca(0x399));}),tgBot[_0x3076dc(0x1ae)]('off',async _0x1a8527=>{const _0x208c5a=_0x3076dc,_0x443f8e=getEnabledBots();if(_0x443f8e[_0x208c5a(0x1c9)]==0x0)await sendTelegram(_0x1a8527['chat']['id'],_0x208c5a(0x26e));else{if(_0x443f8e[_0x208c5a(0x1c9)]>0x1)_0x443f8e[_0x208c5a(0x2ef)]({'botID':_0x208c5a(0x2fa)});let _0x1286b4=[],_0x57146a=[];const _0x1f8dd6=_0x443f8e[_0x208c5a(0x1c9)]%0x4==0x0||_0x443f8e[_0x208c5a(0x1c9)]%0x4==0x3||_0x443f8e[_0x208c5a(0x1c9)]%0x3==0x1?0x4:0x3;let _0x5c1f78=0x0;_0x443f8e[_0x208c5a(0x377)]((_0x5d2722,_0x4942c5)=>{const _0x6f9496=_0x208c5a;if(_0x4942c5%_0x1f8dd6==0x0)_0x57146a=[];_0x57146a['push'](Markup[_0x6f9496(0x28b)][_0x6f9496(0x1c2)](_0x5d2722['botID']==_0x6f9496(0x2fa)?_0x6f9496(0x1d9):_0x6f9496(0x2d2)+_0x5d2722[_0x6f9496(0x253)],'off_'+_0x5d2722[_0x6f9496(0x253)])),_0x4942c5%_0x1f8dd6==0x0&&(_0x1286b4[_0x5c1f78]=_0x57146a,_0x5c1f78++);});const _0x172a76=Markup['inlineKeyboard'](_0x1286b4);_0x1a8527[_0x208c5a(0x280)](_0x208c5a(0x354),_0x172a76);}}),tgBot[_0x3076dc(0x2d9)](/off_(.+)/,async _0x15c7de=>{const _0x280015=_0x3076dc,_0x566f31=_0x15c7de['match'][0x1];_0x15c7de[_0x280015(0x32c)]();if(_0x566f31=='all'){const _0x4946a1=getEnabledBots();await sendTelegram(_0x15c7de[_0x280015(0x28e)]['id'],_0x280015(0x2bd)),_0x4946a1[_0x280015(0x377)](_0x28c943=>{const _0x143062=_0x280015;if(_0x28c943[_0x143062(0x253)]!=_0x143062(0x2fa))toggleBot(_0x28c943[_0x143062(0x253)],toggleStatus(_0x28c943[_0x143062(0x253)]),_0x143062(0x399));});}else await sendTelegram(_0x15c7de[_0x280015(0x28e)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20Bot\x20'+_0x566f31),toggleBot(_0x566f31,toggleStatus(_0x566f31),_0x280015(0x399));}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x242),async _0x4ea4a8=>{const _0x16dd7a=_0x3076dc,_0x4bd44b=getEnabledBots();if(_0x4bd44b['length']==0x0)await sendTelegram(_0x4ea4a8['chat']['id'],_0x16dd7a(0x26e));else{if(_0x4bd44b[_0x16dd7a(0x1c9)]>0x1){let _0x3d95ed=[],_0x32a5a4=[];const _0x68ae74=_0x4bd44b[_0x16dd7a(0x1c9)]%0x4==0x0||_0x4bd44b[_0x16dd7a(0x1c9)]%0x4==0x3||_0x4bd44b['length']%0x3==0x1?0x4:0x3;let _0x480528=0x0;_0x4bd44b['forEach']((_0x53c382,_0x5a868f)=>{const _0x3e29ca=_0x16dd7a;if(_0x5a868f%_0x68ae74==0x0)_0x32a5a4=[];_0x32a5a4['push'](Markup[_0x3e29ca(0x28b)][_0x3e29ca(0x1c2)]('Bot\x20'+_0x53c382['botID'],_0x3e29ca(0x270)+_0x53c382[_0x3e29ca(0x253)])),_0x5a868f%_0x68ae74==0x0&&(_0x3d95ed[_0x480528]=_0x32a5a4,_0x480528++);});const _0x53e254=Markup[_0x16dd7a(0x31b)](_0x3d95ed);_0x4ea4a8[_0x16dd7a(0x280)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x53e254);}else{const _0x3987ba=_0x4bd44b[0x0][_0x16dd7a(0x253)];if(pid[_0x3987ba])pid[_0x3987ba][_0x16dd7a(0x2b3)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x3076dc(0x2d9)](/metrics_(.+)/,async _0x4786c1=>{const _0x4a7a17=_0x3076dc,_0xdfef9=_0x4786c1[_0x4a7a17(0x1d4)][0x1];_0x4786c1[_0x4a7a17(0x32c)]();if(pid[_0xdfef9])pid[_0xdfef9][_0x4a7a17(0x2b3)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x1bf),async _0x1800e7=>{const _0x30110d=_0x3076dc,_0x478f55=getEnabledBots();if(_0x478f55[_0x30110d(0x1c9)]==0x0)await sendTelegram(_0x1800e7[_0x30110d(0x28e)]['id'],_0x30110d(0x26e));else{if(_0x478f55[_0x30110d(0x1c9)]>0x1){let _0x9397c1=[],_0x3fecea=[];const _0x31197a=_0x478f55[_0x30110d(0x1c9)]%0x4==0x0||_0x478f55[_0x30110d(0x1c9)]%0x4==0x3||_0x478f55[_0x30110d(0x1c9)]%0x3==0x1?0x4:0x3;let _0x26b12d=0x0;_0x478f55[_0x30110d(0x377)]((_0x48eae3,_0x5de94f)=>{const _0x261ff7=_0x30110d;if(_0x5de94f%_0x31197a==0x0)_0x3fecea=[];_0x3fecea['push'](Markup['button']['callback'](_0x261ff7(0x2d2)+_0x48eae3['botID'],'portfolio_'+_0x48eae3[_0x261ff7(0x253)])),_0x5de94f%_0x31197a==0x0&&(_0x9397c1[_0x26b12d]=_0x3fecea,_0x26b12d++);});const _0x15bd07=Markup['inlineKeyboard'](_0x9397c1);_0x1800e7[_0x30110d(0x280)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x15bd07);}else{const _0x40571b=_0x478f55[0x0]['botID'];if(pid[_0x40571b])pid[_0x40571b][_0x30110d(0x2b3)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x3076dc(0x2d9)](/portfolio_(.+)/,async _0x4c8b22=>{const _0x19d8f2=_0x3076dc,_0x59c578=_0x4c8b22[_0x19d8f2(0x1d4)][0x1];_0x4c8b22[_0x19d8f2(0x32c)]();if(pid[_0x59c578])pid[_0x59c578][_0x19d8f2(0x2b3)]({'function':_0x19d8f2(0x383),'args':null});}),tgBot[_0x3076dc(0x1ae)]('update',async _0x2bad5a=>{const _0x9b9743=_0x3076dc;await getMessages();if(!updateAvailable)await sendTelegram(_0x2bad5a['chat']['id'],_0x9b9743(0x19e));else{if(!validInstallation)await sendTelegram(_0x2bad5a[_0x9b9743(0x28e)]['id'],_0x9b9743(0x384));else{const _0x4d6faf=Markup[_0x9b9743(0x31b)]([Markup[_0x9b9743(0x28b)][_0x9b9743(0x1c2)]('Yes','update_yes'),Markup['button'][_0x9b9743(0x1c2)]('No',_0x9b9743(0x200))]);_0x2bad5a[_0x9b9743(0x280)](_0x9b9743(0x29c),_0x4d6faf);}}}),tgBot[_0x3076dc(0x2d9)](/update_(.+)/,async _0x3a903b=>{const _0xac6ad9=_0x3076dc,_0x1fd968=_0x3a903b[_0xac6ad9(0x1d4)][0x1];_0x3a903b[_0xac6ad9(0x32c)](),_0x1fd968==_0xac6ad9(0x2a9)&&(await sendTelegram(_0x3a903b[_0xac6ad9(0x28e)]['id'],_0xac6ad9(0x26b)),updateBB(_0xac6ad9(0x2da))),_0x1fd968=='no'&&await sendTelegram(_0x3a903b['chat']['id'],_0xac6ad9(0x352));}),tgBot['command']('reinstall',async _0xaaa6d6=>{const _0x2433a1=_0x3076dc;if(!validInstallation)await sendTelegram(_0xaaa6d6[_0x2433a1(0x28e)]['id'],_0x2433a1(0x1b8));else{const _0xec450a=Markup[_0x2433a1(0x31b)]([Markup[_0x2433a1(0x28b)]['callback']('Yes',_0x2433a1(0x2a4)),Markup[_0x2433a1(0x28b)][_0x2433a1(0x1c2)]('No','reinstall_no')]);_0xaaa6d6[_0x2433a1(0x280)](_0x2433a1(0x26c),_0xec450a);}}),tgBot[_0x3076dc(0x2d9)](/reinstall_(.+)/,async _0x38dd91=>{const _0x54d504=_0x3076dc,_0x30f259=_0x38dd91[_0x54d504(0x1d4)][0x1];_0x38dd91[_0x54d504(0x32c)](),_0x30f259==_0x54d504(0x2a9)&&(await sendTelegram(_0x38dd91[_0x54d504(0x28e)]['id'],_0x54d504(0x20a)),updateBB(_0x54d504(0x299))),_0x30f259=='no'&&await sendTelegram(_0x38dd91[_0x54d504(0x28e)]['id'],_0x54d504(0x303));}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x359),async _0xef6035=>{const _0x290f3a=_0x3076dc,_0x40a6d1=getBotsWithMode();if(_0x40a6d1[_0x290f3a(0x1c9)]==0x0)await sendTelegram(_0xef6035['chat']['id'],_0x290f3a(0x26e));else{let _0x797787=[],_0x4caa5e=[];const _0x199120=0x2;let _0x2e4e12=0x0;_0x40a6d1[_0x290f3a(0x377)]((_0x50d7d8,_0x440c20)=>{const _0x436bef=_0x290f3a;if(_0x440c20%_0x199120==0x0)_0x4caa5e=[];_0x4caa5e[_0x436bef(0x2ef)](Markup[_0x436bef(0x28b)][_0x436bef(0x1c2)]('Bot\x20'+_0x50d7d8[_0x436bef(0x253)]+'\x20('+_0x50d7d8[_0x436bef(0x201)]+')',_0x436bef(0x370)+_0x50d7d8['botID'])),_0x440c20%_0x199120==0x0&&(_0x797787[_0x2e4e12]=_0x4caa5e,_0x2e4e12++);});const _0x5503b0=Markup[_0x290f3a(0x31b)](_0x797787);_0xef6035[_0x290f3a(0x280)](_0x290f3a(0x39b),_0x5503b0);}}),tgBot[_0x3076dc(0x2d9)](/toggle_(.+)/,async _0x58a7a4=>{const _0x1167e5=_0x3076dc,_0x59a626=_0x58a7a4[_0x1167e5(0x1d4)][0x1];_0x58a7a4[_0x1167e5(0x32c)]();const _0x1cf0ea=getBotsWithMode(),_0x2594a7=_0x1cf0ea[_0x1167e5(0x328)](_0x4fc309=>_0x4fc309[_0x1167e5(0x253)]==_0x59a626),_0x251bdd=_0x2594a7[_0x1167e5(0x201)]==_0x1167e5(0x2fc)?_0x1167e5(0x30f):'auto';await sendTelegram(_0x58a7a4[_0x1167e5(0x28e)]['id'],_0x1167e5(0x319)+_0x59a626+_0x1167e5(0x2d7)+_0x251bdd+_0x1167e5(0x231)),toggleBotMode(_0x59a626);}),tgBot[_0x3076dc(0x1ae)](_0x3076dc(0x32d),async _0x5a6b19=>{const _0x2fe78d=_0x3076dc;let _0x302aa8='';config[_0x2fe78d(0x377)](_0x4de572=>{const _0x473a40=_0x2fe78d;_0x302aa8+=_0x473a40(0x2d2)+_0x4de572[_0x473a40(0x253)]+':\x20'+_0x4de572[_0x473a40(0x19c)]+'\x0a';}),await sendTelegram(_0x5a6b19[_0x2fe78d(0x28e)]['id'],_0x302aa8,{'parse_mode':_0x2fe78d(0x1e1)});}),tgBot[_0x3076dc(0x1ae)]('help',async _0x3f955e=>{await sendTelegram(_0x3f955e['chat']['id'],_0x16084b);}),process[_0x3076dc(0x1b6)](_0x3076dc(0x24c),()=>tgBot[_0x3076dc(0x283)](_0x3076dc(0x24c))),process[_0x3076dc(0x1b6)](_0x3076dc(0x2c9),()=>tgBot[_0x3076dc(0x283)](_0x3076dc(0x2c9))),tgBot[_0x3076dc(0x275)]();}}function disableTelegram(){const _0x5b9fd8=_0x17f565;tgBot&&tgBot[_0x5b9fd8(0x283)]();}async function sendTelegram(_0x3910d4,_0x125f25,_0xf1e91b){const _0x1e8cf8=_0x17f565;_0xf1e91b={..._0xf1e91b,'disable_web_page_preview':!![]};try{await tgBot[_0x1e8cf8(0x2f6)][_0x1e8cf8(0x263)](_0x3910d4,_0x125f25,_0xf1e91b);}catch(_0x49aa67){console[_0x1e8cf8(0x27d)]('Telegram\x20error:',_0x49aa67);}}async function sendTelegramBot(_0x17cdbe,_0x5b9ab9){const _0x55437b=_0x17f565;if(settings[_0x55437b(0x342)]){if(settings[_0x55437b(0x271)]==_0x55437b(0x2fa)||(_0x5b9ab9['type']==_0x55437b(0x241)||_0x5b9ab9['type']==_0x55437b(0x2e1)||_0x5b9ab9['type']=='success')&&settings['telegramEvents']==_0x55437b(0x329)||_0x5b9ab9[_0x55437b(0x306)]==_0x55437b(0x397)&&settings['telegramEvents']==_0x55437b(0x2f5)){if(tgBot&&settings[_0x55437b(0x36b)]){if(_0x5b9ab9[_0x55437b(0x1a9)])await sendTelegram(settings[_0x55437b(0x36b)],_0x5b9ab9[_0x55437b(0x19c)]+'\x20>\x20'+_0x5b9ab9[_0x55437b(0x1fe)]);else await sendTelegram(settings[_0x55437b(0x36b)],'Bot\x20'+_0x17cdbe+_0x55437b(0x373)+_0x5b9ab9[_0x55437b(0x1fe)]);}}}}async function sendTelegramMsg(_0x46a5b7,_0x16e63d=_0x17f565(0x1e1)){const _0x315df2=_0x17f565;return settings[_0x315df2(0x342)]&&tgBot&&settings['telegramChatId']?(await sendTelegram(settings['telegramChatId'],_0x46a5b7,{'parse_mode':_0x16e63d}),!![]):![];}function getDeviceWithIp(_0x42a551){const _0xf1d19a=_0x17f565;return devices[_0xf1d19a(0x328)](_0x4d4a57=>_0x4d4a57['ip']===_0x42a551);}async function temporaryAccess2FA(_0x35f2df,_0x38657c){const _0x4e564f=_0x17f565;let _0x1850cb=new Date(),_0x30bd4c=![];if(lastIpApproval){if(_0x1850cb-lastIpApproval<0x1388)_0x30bd4c=!![];}lastIpApproval=new Date();if(_0x30bd4c)return;if(tgBot&&settings['telegramChatId']){const _0x55fdf8=uuidRandom();tmpStorage[_0x55fdf8]={'uuid':_0x35f2df,'externalip':_0x38657c};const _0x25ad83=Markup[_0x4e564f(0x31b)]([Markup[_0x4e564f(0x28b)][_0x4e564f(0x1c2)]('5\x20min',_0x4e564f(0x208)+_0x55fdf8),Markup[_0x4e564f(0x28b)][_0x4e564f(0x1c2)](_0x4e564f(0x1fc),'tempaccess_15_'+_0x55fdf8),Markup[_0x4e564f(0x28b)]['callback']('30\x20min',_0x4e564f(0x1ad)+_0x55fdf8),Markup[_0x4e564f(0x28b)]['callback']('reject','tempaccess_reject_'+_0x55fdf8)]);await sendTelegram(settings['telegramChatId'],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x38657c)[_0x4e564f(0x350)]+'\x20?',_0x25ad83),tgBot[_0x4e564f(0x2d9)](/tempaccess_(.+)_(.+)/,async _0xcf8225=>{const _0x2302d8=_0x4e564f,_0x383a3c=_0xcf8225[_0x2302d8(0x1d4)][0x1],_0x3e0534=_0xcf8225[_0x2302d8(0x1d4)][0x2],{uuid:_0xc00b34,externalip:_0x34f403}=tmpStorage[_0x3e0534];delete tmpStorage[_0x3e0534],_0xcf8225[_0x2302d8(0x32c)](),devices[_0xc00b34][_0x2302d8(0x305)]={'clientip':_0x34f403,'timestamp':new Date()[_0x2302d8(0x357)](),'expiry':_0x383a3c},_0x383a3c!=_0x2302d8(0x371)?(await sendTelegram(_0xcf8225[_0x2302d8(0x28e)]['id'],_0x2302d8(0x3a2)+_0x383a3c+_0x2302d8(0x2cd),{'parse_mode':_0x2302d8(0x1e1)}),io['to'](_0xc00b34)[_0x2302d8(0x255)](_0x2302d8(0x1f5),{'access':{'allow':![],'reason':_0x2302d8(0x1ef),'token':null}})):(await sendTelegram(_0xcf8225[_0x2302d8(0x28e)]['id'],_0x2302d8(0x1ea)),io['to'](_0xc00b34)[_0x2302d8(0x255)](_0x2302d8(0x1f5),{'access':{'allow':![],'reason':_0x2302d8(0x378),'token':null}}));});}}async function loginAccess2FA(_0x10a7df,_0x27f69e){const _0x552a86=_0x17f565;if(tgBot&&settings[_0x552a86(0x36b)]){const _0x19b5c3=uuidRandom();tmpStorage[_0x19b5c3]={'uuid':_0x10a7df,'externalip':_0x27f69e};const _0xd0a892=Markup['inlineKeyboard']([Markup['button'][_0x552a86(0x1c2)]('accept',_0x552a86(0x382)+loginExpiry+'_'+_0x19b5c3),Markup[_0x552a86(0x28b)][_0x552a86(0x1c2)](_0x552a86(0x371),_0x552a86(0x27f)+_0x19b5c3)]);await sendTelegram(settings[_0x552a86(0x36b)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x27f69e)['show']+'\x20?',_0xd0a892),tgBot[_0x552a86(0x2d9)](/login2fa_(.+)_(.+)/,async _0x1225cf=>{const _0x5adf25=_0x552a86,_0x59e41b=_0x1225cf[_0x5adf25(0x1d4)][0x1],_0x4bb033=_0x1225cf['match'][0x2],{uuid:_0x526233,externalip:_0x2016e8}=tmpStorage[_0x4bb033];delete tmpStorage[_0x4bb033],_0x1225cf[_0x5adf25(0x32c)](),devices[_0x526233][_0x5adf25(0x2f1)]={'clientip':_0x2016e8,'timestamp':new Date()[_0x5adf25(0x357)](),'expiry':_0x59e41b},_0x59e41b!=_0x5adf25(0x371)?(await sendTelegram(_0x1225cf[_0x5adf25(0x28e)]['id'],'Login\x20accepted',{'parse_mode':'HTML'}),io['to'](_0x526233)[_0x5adf25(0x255)](_0x5adf25(0x1f5),{'access':{'allow':![],'reason':_0x5adf25(0x1ef),'token':null}})):(await sendTelegram(_0x1225cf['chat']['id'],_0x5adf25(0x1d0)),io['to'](_0x526233)[_0x5adf25(0x255)](_0x5adf25(0x1f5),{'access':{'allow':![],'reason':_0x5adf25(0x2f8),'token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x55481c=_0x17f565;return dbConfig[_0x55481c(0x1f9)]('bots')[_0x55481c(0x390)](_0x55481c(0x253))['filter']({'status':_0x55481c(0x1cb)})[_0x55481c(0x296)]()||[];}function getDisabledBots(){const _0x1e1f4d=_0x17f565;return dbConfig[_0x1e1f4d(0x1f9)](_0x1e1f4d(0x1e2))[_0x1e1f4d(0x390)](_0x1e1f4d(0x253))[_0x1e1f4d(0x26a)]({'status':_0x1e1f4d(0x20f)})[_0x1e1f4d(0x296)]()||[];}function getBotAttributes(_0x3b2c64){const _0x501d22=_0x17f565;let _0xd4280d={};const _0x3bf1de=configpath+_0x501d22(0x23d)+_0x3b2c64+'-config.json',_0x33e117=fs[_0x501d22(0x290)](_0x3bf1de);if(_0x33e117){const _0x4076f1=fs[_0x501d22(0x316)](_0x3bf1de);try{const _0x4062e6=JSON[_0x501d22(0x20d)](_0x4076f1),_0x4e9641=_0x4062e6?_0x4062e6[_0x501d22(0x3a1)][0x0][_0x501d22(0x32f)]:![];_0xd4280d[_0x501d22(0x201)]=_0x4e9641?_0x501d22(0x2fc):_0x501d22(0x30f),_0xd4280d[_0x501d22(0x19c)]=_0x4062e6?_0x4062e6[_0x501d22(0x3a1)][0x0][_0x501d22(0x19c)]:'Bot\x20'+_0x3b2c64;}catch(_0x3362c2){_0xd4280d[_0x501d22(0x201)]='manual',_0xd4280d[_0x501d22(0x19c)]=_0x501d22(0x2d2)+_0x3b2c64;}}else _0xd4280d[_0x501d22(0x201)]=_0x501d22(0x30f),_0xd4280d[_0x501d22(0x19c)]='Bot\x20'+_0x3b2c64;return _0xd4280d;}function getBotsWithMode(){const _0x2cc42f=_0x17f565,_0x50a6de=dbConfig[_0x2cc42f(0x1f9)](_0x2cc42f(0x1e2))[_0x2cc42f(0x390)](_0x2cc42f(0x253))[_0x2cc42f(0x296)]()||[];return _0x50a6de[_0x2cc42f(0x377)](_0x1dacdf=>{const _0x304e70=_0x2cc42f;let _0x63cfda=getBotAttributes(_0x1dacdf['botID']);_0x1dacdf['mode']=_0x63cfda[_0x304e70(0x201)];}),_0x50a6de;}function getBotExchanges(){const _0x134336=_0x17f565;let _0x45c6f1=[];const _0x2d886b=dbConfig[_0x134336(0x1f9)](_0x134336(0x1e2))[_0x134336(0x390)](_0x134336(0x253))[_0x134336(0x296)]()||[];_0x2d886b['forEach'](_0x5b7715=>{const _0x3e4fb4=_0x134336;if(_0x5b7715[_0x3e4fb4(0x1f5)]==_0x3e4fb4(0x1cb)){const _0x315e69=configpath+_0x3e4fb4(0x23d)+_0x5b7715[_0x3e4fb4(0x253)]+_0x3e4fb4(0x2ff),_0x1b6f35=fs[_0x3e4fb4(0x290)](_0x315e69);let _0x531dee;if(_0x1b6f35){const _0x2c07c5=fs['readFileSync'](_0x315e69);try{const _0x4a2215=JSON[_0x3e4fb4(0x20d)](_0x2c07c5);_0x531dee=_0x4a2215?_0x4a2215['bot'][0x0][_0x3e4fb4(0x3a9)]:null;}catch(_0x11e0fa){}}if(_0x531dee)_0x45c6f1[_0x3e4fb4(0x2ef)](_0x531dee);}});const _0x461ab5=[...new Set(_0x45c6f1)]['sort']();return _0x461ab5;}async function initUser(){const _0x337cd8=_0x17f565;if(!settings['userid']){const _0x5c1679=uuidRandom();mixpanel[_0x337cd8(0x3ae)](_0x5c1679),updateSetting(_0x337cd8(0x336),_0x5c1679);}}async function initSecure(){const _0x4d8612=_0x17f565;let _0x2858a8=getSecure();if(!_0x2858a8[_0x4d8612(0x1fa)](_0x4d8612(0x3b4))){let _0x35cff6=await generateKeys();_0x2858a8[_0x4d8612(0x21e)]=_0x35cff6['publicKey'],_0x2858a8[_0x4d8612(0x2df)]=_0x35cff6['privateKey'],_0x2858a8['secret']=crypto[_0x4d8612(0x2b1)](0x20)[_0x4d8612(0x2e8)](_0x4d8612(0x2c0));;storeSecure(_0x2858a8);}}function getSettings(){const _0x2a610c=_0x17f565;return dbSettings[_0x2a610c(0x1f9)](_0x2a610c(0x1a6))[_0x2a610c(0x296)]()||{};}function getSecure(){const _0x4d55e5=_0x17f565;return dbSecure[_0x4d55e5(0x1f9)]('secure')[_0x4d55e5(0x296)]()||{};}function getBlacklist(){const _0x5b29f1=_0x17f565;return dbSecure[_0x5b29f1(0x1f9)](_0x5b29f1(0x381))['value']()||[];}function broadcastToBots(_0x2bac74,_0x497b00){const _0x276ecf=_0x17f565;config[_0x276ecf(0x377)](_0xa889e0=>{const _0x2740bc=_0x276ecf;if(_0xa889e0[_0x2740bc(0x1f5)]=='enabled'&&_0xa889e0[_0x2740bc(0x1b3)]=='running'||_0xa889e0[_0x2740bc(0x1f5)]==_0x2740bc(0x2d8)&&_0xa889e0[_0x2740bc(0x1b3)]==_0x2740bc(0x252)){if(pid[_0xa889e0[_0x2740bc(0x253)]])pid[_0xa889e0[_0x2740bc(0x253)]][_0x2740bc(0x2b3)]({[_0x2bac74]:_0x497b00});}});}async function storeSettings(_0x4a5d3b,_0x1ef6d6=![]){const _0x3900a4=_0x17f565;_0x4a5d3b={...settings,..._0x4a5d3b};if(_0x1ef6d6&&_0x4a5d3b['bbPassword']!=_0x3900a4(0x21f)&&_0x4a5d3b[_0x3900a4(0x335)]!='***'&&_0x4a5d3b[_0x3900a4(0x335)]!=''){const _0x4c7805=crypt[_0x3900a4(0x2e4)](secure['privateKey'],_0x4a5d3b[_0x3900a4(0x335)])['message']['split'](_0x3900a4(0x293))[0x0],_0x34312a=bcrypt['hashSync'](_0x4c7805,saltRounds);_0x4a5d3b={..._0x4a5d3b,'bbPassword':_0x34312a};}if(_0x1ef6d6&&_0x4a5d3b['telegramToken']!='************'&&_0x4a5d3b[_0x3900a4(0x1ac)]!=_0x3900a4(0x3b3)&&_0x4a5d3b[_0x3900a4(0x1ac)]!=''){const _0xa7b89a=crypt[_0x3900a4(0x2e4)](secure[_0x3900a4(0x2df)],_0x4a5d3b[_0x3900a4(0x1ac)])[_0x3900a4(0x2f4)]['split'](_0x3900a4(0x293))[0x0];_0x4a5d3b={..._0x4a5d3b,'telegramToken':_0xa7b89a};}if(_0x1ef6d6&&_0x4a5d3b[_0x3900a4(0x36f)]!=_0x3900a4(0x21f)&&_0x4a5d3b['marketcapApi']!=_0x3900a4(0x3b3)&&_0x4a5d3b[_0x3900a4(0x36f)]!=''){const _0x11a420=crypt[_0x3900a4(0x2e4)](secure[_0x3900a4(0x2df)],_0x4a5d3b[_0x3900a4(0x36f)])['message']['split'](_0x3900a4(0x293))[0x0];_0x4a5d3b={..._0x4a5d3b,'marketcapApi':_0x11a420};}const _0x3df585=_0x4a5d3b['telegramToken']!=_0x3900a4(0x21f)&&_0x4a5d3b['telegramToken']!=settings[_0x3900a4(0x1ac)]||_0x4a5d3b['telegramUsername']!=settings[_0x3900a4(0x210)],_0x8cbc1c=_0x4a5d3b[_0x3900a4(0x1ac)]==''||_0x4a5d3b[_0x3900a4(0x210)]=='',_0x12eba0=_0x4a5d3b[_0x3900a4(0x36f)]&&_0x4a5d3b['marketcapApi']!=_0x3900a4(0x21f)&&_0x4a5d3b[_0x3900a4(0x36f)]!=settings['telegramToken'];_0x3df585&&(_0x4a5d3b[_0x3900a4(0x36b)]=null,_0x4a5d3b[_0x3900a4(0x271)]=_0x3900a4(0x2fa));for(const [_0x8f8988,_0x37bea7]of Object[_0x3900a4(0x230)](_0x4a5d3b)){if(_0x8f8988=='telegramToken'&&_0x37bea7=='************'){_0x4a5d3b[_0x3900a4(0x1ac)]=settings[_0x3900a4(0x1ac)];continue;};if(_0x8f8988=='bbPassword'&&_0x37bea7=='************'){_0x4a5d3b['bbPassword']=settings[_0x3900a4(0x335)];continue;};if(_0x8f8988==_0x3900a4(0x36f)&&_0x37bea7==_0x3900a4(0x21f)){_0x4a5d3b[_0x3900a4(0x36f)]=settings[_0x3900a4(0x36f)];continue;};dbSettings[_0x3900a4(0x38f)]('settings.'+_0x8f8988,_0x37bea7)[_0x3900a4(0x333)]();}settings=_0x4a5d3b,io['to'](_0x3900a4(0x2a3))['emit'](_0x3900a4(0x1a6),cleanSettings()),broadcastToBots(_0x3900a4(0x273),settings['timeshift']),broadcastToBots(_0x3900a4(0x35d),settings['onepagemode']),broadcastToBots(_0x3900a4(0x36f),settings[_0x3900a4(0x36f)]);if(_0x3df585&&!_0x8cbc1c)initTelegram();if(_0x3df585&&_0x8cbc1c)disableTelegram();getAllClients()[_0x3900a4(0x377)](_0x1e6191=>{const _0x8986e7=_0x3900a4;getSocket(_0x1e6191['id'])[_0x8986e7(0x255)](_0x8986e7(0x1f5),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x12eba0&&(await sleep(0xbb8),testMarketcapApi(_0x4a5d3b[_0x3900a4(0x36f)]));}async function testMarketcapApi(_0x4e6537){const _0x1b594c=_0x17f565,_0xcb503f=['BCT',_0x1b594c(0x223)];try{await axios[_0x1b594c(0x1f9)](_0x1b594c(0x315),{'headers':{'X-CMC_PRO_API_KEY':_0x4e6537},'params':{'symbol':_0xcb503f[_0x1b594c(0x2e8)]()}});}catch(_0x4a729f){_0x4a729f[_0x1b594c(0x2e8)]()['includes'](_0x1b594c(0x347))?(io['to'](_0x1b594c(0x2a3))[_0x1b594c(0x255)](_0x1b594c(0x2de),_0x1b594c(0x307)),logger[_0x1b594c(0x337)](_0x1b594c(0x307))):(io['to'](_0x1b594c(0x2a3))[_0x1b594c(0x255)]('notification',_0x1b594c(0x285)),logger[_0x1b594c(0x337)](_0x1b594c(0x285)),logger[_0x1b594c(0x19f)]('Error\x20details:',_0x4a729f[_0x1b594c(0x2e8)]()+_0x1b594c(0x33a)+_0x4a729f[_0x1b594c(0x297)]));return;}logger['debug'](_0x1b594c(0x35e));}function updateSetting(_0x1220e1,_0x180e17){const _0x3cff84=_0x17f565;dbSettings[_0x3cff84(0x38f)]('settings.'+_0x1220e1,_0x180e17)[_0x3cff84(0x333)](),settings=getSettings(),io['to']('botmanager')[_0x3cff84(0x255)]('settings',cleanSettings());}function storeSecure(_0x30ab5c){const _0xecb431=_0x17f565;dbSecure[_0xecb431(0x1f9)]('secure')[_0xecb431(0x2ef)](_0x30ab5c)[_0xecb431(0x333)](),secure=_0x30ab5c;}function addBlacklist(_0x32d325){const _0x45790d=_0x17f565;cleanBlacklist();let _0x34e014;devices[_0x32d325]['telegramIpApproval']?_0x34e014=Math[_0x45790d(0x1f2)](devices[_0x32d325][_0x45790d(0x305)][_0x45790d(0x31f)],loginExpiry):_0x34e014=loginExpiry,dbSecure[_0x45790d(0x1f9)](_0x45790d(0x381))['push']({'expiry':new Date()[_0x45790d(0x357)]()+_0x34e014*0x3c*0x3e8,'token':devices[_0x32d325][_0x45790d(0x1f4)][_0x45790d(0x2ad)]})['write'](),blacklist=dbSecure[_0x45790d(0x1f9)](_0x45790d(0x381))[_0x45790d(0x296)]();}function cleanBlacklist(){const _0x38dc6f=_0x17f565;let _0x4ea613=dbSecure['get'](_0x38dc6f(0x381))[_0x38dc6f(0x257)]()[_0x38dc6f(0x296)](),_0x5b329e=new Date()['getTime']();_0x4ea613[_0x38dc6f(0x377)](_0x58fa0b=>{const _0x222b03=_0x38dc6f;_0x58fa0b[_0x222b03(0x31f)]<_0x5b329e&&dbSecure[_0x222b03(0x1f9)](_0x222b03(0x381))[_0x222b03(0x348)]({'expiry':_0x58fa0b[_0x222b03(0x31f)]})['write']();});}function initStates(){const _0x2182d9=_0x17f565;let _0x3c2b20=getConfiguration();_0x3c2b20[_0x2182d9(0x377)](_0x2f3c6e=>{const _0x5b7d3c=_0x2182d9;_0x2f3c6e[_0x5b7d3c(0x1b3)]='stopped';}),storeConfiguration(_0x3c2b20);}function onKeys(){const _0x51f0b8=new RSA();return new Promise(_0xfe6a7=>{const _0x4e4c1d=_0x265a;_0x51f0b8[_0x4e4c1d(0x3ad)]()[_0x4e4c1d(0x248)](_0xe1def5=>{_0xfe6a7(_0xe1def5);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x553374=_0x17f565;let _0x12a9a9=getSettings(),_0x1f2fd3=![];!_0x12a9a9['hasOwnProperty']('lastmsgtelegram')&&(_0x12a9a9[_0x553374(0x2db)]=0x0,_0x1f2fd3=!![]);!_0x12a9a9[_0x553374(0x1fa)](_0x553374(0x2ac))&&(_0x12a9a9[_0x553374(0x2ac)]=0x0,_0x1f2fd3=!![]);!_0x12a9a9['hasOwnProperty']('latestversion')&&(_0x12a9a9['latestversion']=_0x553374(0x2f7),_0x1f2fd3=!![]);!_0x12a9a9[_0x553374(0x1fa)](_0x553374(0x35d))&&(_0x12a9a9['onepagemode']=![],_0x1f2fd3=!![]);!_0x12a9a9[_0x553374(0x1fa)](_0x553374(0x36f))&&(_0x12a9a9['marketcapApi']='',_0x1f2fd3=!![]);if(_0x1f2fd3)storeSettings(_0x12a9a9);try{fs['readdirSync'](configbackuppath,{'withFileTypes':!![]})[_0x553374(0x377)](_0x2a816f=>{const _0x361dc0=_0x553374;if(!_0x2a816f[_0x361dc0(0x214)]()){if(!_0x2a816f[_0x361dc0(0x2fe)]['startsWith'](_0x361dc0(0x292)))fs[_0x361dc0(0x36e)](configbackuppath+_0x2a816f[_0x361dc0(0x2fe)]);}else fs[_0x361dc0(0x286)](configbackuppath+_0x2a816f['name'],{'recursive':!![]});});}catch(_0x210a6b){logger[_0x553374(0x19f)](_0x553374(0x366),_0x210a6b);}}function storeConfiguration(_0x2c0b2a){const _0x357b45=_0x17f565;dbConfig['get']('bots')[_0x357b45(0x348)]()[_0x357b45(0x333)](),dbConfig['get'](_0x357b45(0x1e2))['push'](..._0x2c0b2a)[_0x357b45(0x333)](),config=_0x2c0b2a;}async function resetPassword(){const _0x4fdcfe=_0x17f565;if(tgBot&&settings[_0x4fdcfe(0x36b)]){const _0x5c5350=Markup['inlineKeyboard']([Markup[_0x4fdcfe(0x28b)][_0x4fdcfe(0x1c2)](_0x4fdcfe(0x2a9),_0x4fdcfe(0x365)),Markup[_0x4fdcfe(0x28b)][_0x4fdcfe(0x1c2)]('no',_0x4fdcfe(0x23b))]);await sendTelegram(settings[_0x4fdcfe(0x36b)],_0x4fdcfe(0x20e),_0x5c5350),tgBot[_0x4fdcfe(0x2d9)](/resetpw_(.+)/,async _0x1442f5=>{const _0x2e9d48=_0x4fdcfe,_0x193105=_0x1442f5[_0x2e9d48(0x1d4)][0x1];_0x1442f5[_0x2e9d48(0x32c)]();if(_0x193105!='no'){const _0x2941d0=0xf,_0x19ebbc=_0x2e9d48(0x31d),_0x22e871=Array[_0x2e9d48(0x38d)](crypto[_0x2e9d48(0x2d5)](new Uint32Array(_0x2941d0)))[_0x2e9d48(0x32a)](_0x9f30af=>_0x19ebbc[_0x9f30af%_0x19ebbc[_0x2e9d48(0x1c9)]])['join'](''),_0x146532=bcrypt[_0x2e9d48(0x2a7)](_0x22e871,saltRounds);storeSettings({'bbPassword':_0x146532}),await sendTelegram(_0x1442f5[_0x2e9d48(0x28e)]['id'],_0x2e9d48(0x38e)+_0x22e871,{'parse_mode':_0x2e9d48(0x1e1)});}else await sendTelegram(_0x1442f5[_0x2e9d48(0x28e)]['id'],_0x2e9d48(0x1fb));});}}async function confirmRestore(_0xa123db,_0xf72422){const _0x362f64=_0x17f565;io['to'](_0x362f64(0x2a3))[_0x362f64(0x255)]('notification',_0x362f64(0x325),_0x362f64(0x289));if(tgBot&&settings[_0x362f64(0x36b)]){const _0x159896=uuidRandom();tmpStorage[_0x159896]={'path':_0xa123db,'filename':_0xf72422};const _0x201776=Markup[_0x362f64(0x31b)]([Markup[_0x362f64(0x28b)]['callback'](_0x362f64(0x2a9),'restore_yes_'+_0x159896),Markup['button'][_0x362f64(0x1c2)]('no',_0x362f64(0x2b6)+_0x159896)]);await sendTelegram(settings[_0x362f64(0x36b)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0x201776),tgBot[_0x362f64(0x2d9)](/restore_(.+)_(.+)/,async _0x995a3a=>{const _0x5bc31f=_0x362f64,_0x3ce6d3=_0x995a3a['match'][0x1],_0x314b51=_0x995a3a[_0x5bc31f(0x1d4)][0x2],{path:_0x50cf56,filename:_0x319b4d}=tmpStorage[_0x314b51];delete tmpStorage[_0x314b51],_0x995a3a[_0x5bc31f(0x32c)](),_0x3ce6d3==_0x5bc31f(0x2a9)?(logger['debug'](_0x5bc31f(0x38c)),await sendTelegram(_0x995a3a[_0x5bc31f(0x28e)]['id'],_0x5bc31f(0x1f8),{'parse_mode':_0x5bc31f(0x1e1)}),unzipFile(_0x50cf56,_0x319b4d)):(logger[_0x5bc31f(0x19f)](_0x5bc31f(0x238)),await sendTelegram(_0x995a3a['chat']['id'],'Restore\x20process\x20aborted'));});}}function getServerTime(){const _0x23f638=_0x17f565,_0xc033ca=new Date();return _0xc033ca[_0x23f638(0x2b5)]()+'/'+(_0xc033ca[_0x23f638(0x1a8)]()+0x1)[_0x23f638(0x2e8)]()[_0x23f638(0x37a)](0x2,'0')+'/'+_0xc033ca[_0x23f638(0x385)]()[_0x23f638(0x2e8)]()[_0x23f638(0x37a)](0x2,'0')+'\x20'+_0xc033ca['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0xc033ca[_0x23f638(0x1b1)]()['toString']()[_0x23f638(0x37a)](0x2,'0')+':'+_0xc033ca['getSeconds']()['toString']()[_0x23f638(0x37a)](0x2,'0');}function getTimeStamp(){const _0xc32c3e=_0x17f565,_0x5b7556=shiftedTime();return _0x5b7556['getFullYear']()+'/'+(_0x5b7556[_0xc32c3e(0x1a8)]()+0x1)[_0xc32c3e(0x2e8)]()[_0xc32c3e(0x37a)](0x2,'0')+'/'+_0x5b7556['getDate']()['toString']()[_0xc32c3e(0x37a)](0x2,'0')+'\x20'+_0x5b7556[_0xc32c3e(0x324)]()[_0xc32c3e(0x2e8)]()[_0xc32c3e(0x37a)](0x2,'0')+':'+_0x5b7556[_0xc32c3e(0x1b1)]()[_0xc32c3e(0x2e8)]()['padStart'](0x2,'0')+':'+_0x5b7556[_0xc32c3e(0x2ed)]()[_0xc32c3e(0x2e8)]()[_0xc32c3e(0x37a)](0x2,'0');}function getCleanTimeStamp(){const _0x104fbc=_0x17f565,_0x313db3=shiftedTime();return _0x313db3[_0x104fbc(0x2b5)]()+(_0x313db3[_0x104fbc(0x1a8)]()+0x1)['toString']()['padStart'](0x2,'0')+_0x313db3[_0x104fbc(0x385)]()[_0x104fbc(0x2e8)]()[_0x104fbc(0x37a)](0x2,'0')+'-'+_0x313db3['getHours']()['toString']()['padStart'](0x2,'0')+_0x313db3[_0x104fbc(0x1b1)]()['toString']()['padStart'](0x2,'0')+_0x313db3['getSeconds']()[_0x104fbc(0x2e8)]()[_0x104fbc(0x37a)](0x2,'0');}function shiftedTime(){const _0x58f1c4=_0x17f565,_0xd1a491=new Date();let _0x3cc22e=_0xd1a491;if(settings[_0x58f1c4(0x273)]&&settings['timeshift']!==0x0)_0x3cc22e=fns[_0x58f1c4(0x1d2)](_0xd1a491,{'hours':settings[_0x58f1c4(0x273)]});return _0x3cc22e;}async function startScheduler(){const _0x4cc7be=_0x17f565,_0x3822c2=new Date()['getUTCHours'](),_0x4e3890=shiftedTime()[_0x4cc7be(0x324)]();_0x4e3890==0x4&&backupConfigFiles(),_0x4e3890==0x0&&rotateLogFiles(),_0x3822c2%0x6==0x0&&triggerAnalytics(),_0x3822c2%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x2110d4){const _0x4ec3af=_0x17f565;logger[_0x4ec3af(0x19f)](_0x4ec3af(0x23e)+_0x2110d4);const _0x2b800e=getBotsWithMode();_0x2b800e[_0x4ec3af(0x1c9)]>0x0?confirmRestore(configbackuppath,_0x2110d4):unzipFile(configbackuppath,_0x2110d4);}async function getBackupFiles(_0x5f9e79=null){const _0x1075a3=_0x17f565;let _0x419370=[],_0x33c704=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x33c704[_0x1075a3(0x1ff)]((_0x517aa2,_0x4b940b)=>_0x517aa2[_0x1075a3(0x2fe)]<_0x4b940b[_0x1075a3(0x2fe)]?0x1:_0x4b940b[_0x1075a3(0x2fe)]<_0x517aa2[_0x1075a3(0x2fe)]?-0x1:0x0),_0x33c704[_0x1075a3(0x377)](_0x11cc69=>{const _0x1c14e8=_0x1075a3;if(!_0x11cc69['isDirectory']()&&_0x11cc69[_0x1c14e8(0x2fe)][_0x1c14e8(0x1ce)](_0x1c14e8(0x292))&&_0x11cc69[_0x1c14e8(0x2fe)][_0x1c14e8(0x1c6)](_0x1c14e8(0x226))){const _0x5d6c95=formatDate(fs[_0x1c14e8(0x2c2)](configbackuppath+_0x11cc69[_0x1c14e8(0x2fe)])['mtime']);_0x419370[_0x1c14e8(0x2ef)]({'name':_0x11cc69[_0x1c14e8(0x2fe)],'mtime':_0x5d6c95});}});if(_0x5f9e79)io['to'](_0x5f9e79)['emit'](_0x1075a3(0x1af),_0x419370);else return _0x419370;}async function backupConfigFiles(){const _0x1923a5=_0x17f565;await zipFiles(_0x1923a5(0x209));const _0x56e936=getCleanTimeStamp();fs[_0x1923a5(0x244)](zippath+_0x1923a5(0x369),configbackuppath+('backup-full@'+_0x56e936+_0x1923a5(0x226)));let _0x420d51=fs[_0x1923a5(0x38a)](configbackuppath,{'withFileTypes':!![]});_0x420d51[_0x1923a5(0x1ff)]((_0x5a4ac4,_0x572d2e)=>_0x5a4ac4[_0x1923a5(0x2fe)]<_0x572d2e[_0x1923a5(0x2fe)]?0x1:_0x572d2e['name']<_0x5a4ac4[_0x1923a5(0x2fe)]?-0x1:0x0),_0x420d51['length']>maxBackups&&fs[_0x1923a5(0x36e)](configbackuppath+_0x420d51[_0x420d51[_0x1923a5(0x1c9)]-0x1][_0x1923a5(0x2fe)]);}function rotateLogFiles(){const _0x47e1d0=_0x17f565,_0x296742=fs[_0x47e1d0(0x2c2)](logspath+'output-000.log'),_0x4b86f4=_0x296742[_0x47e1d0(0x1cd)]/0x400;if(_0x4b86f4>0x64){let _0x35a73a=fs[_0x47e1d0(0x38a)](logspath,{'withFileTypes':!![]});_0x35a73a[_0x47e1d0(0x1ff)]((_0x297e79,_0x43e392)=>_0x297e79['name']<_0x43e392[_0x47e1d0(0x2fe)]?0x1:_0x43e392['name']<_0x297e79['name']?-0x1:0x0),_0x35a73a[_0x47e1d0(0x377)](_0x20dbb6=>{const _0x258842=_0x47e1d0;if(_0x20dbb6[_0x258842(0x2fe)]=='output-002.log')fs[_0x258842(0x244)](logspath+_0x20dbb6[_0x258842(0x2fe)],logspath+_0x258842(0x334));if(_0x20dbb6['name']==_0x258842(0x362))fs[_0x258842(0x244)](logspath+_0x20dbb6[_0x258842(0x2fe)],logspath+_0x258842(0x265));_0x20dbb6[_0x258842(0x2fe)]==_0x258842(0x2cc)&&(fs[_0x258842(0x244)](logspath+_0x20dbb6[_0x258842(0x2fe)],logspath+_0x258842(0x362)),fs[_0x258842(0x1de)](logspath+_0x20dbb6[_0x258842(0x2fe)],''));});}}async function zipFiles(_0x28bbcb){const _0x2aa055=_0x17f565;let _0x1eb66c;if(_0x28bbcb==_0x2aa055(0x2dd))_0x1eb66c=logspath;if(_0x28bbcb==_0x2aa055(0x254))_0x1eb66c=configpath;if(_0x28bbcb==_0x2aa055(0x209))_0x1eb66c=configpath;let _0x2ee3e8=fs['readdirSync'](_0x1eb66c,{'withFileTypes':!![]});const _0x622aba=new require(_0x2aa055(0x27e))();_0x2ee3e8[_0x2aa055(0x377)](_0x3bb480=>{const _0x5cc145=_0x2aa055;if(!_0x3bb480[_0x5cc145(0x214)]()){let _0x546ffb=fs[_0x5cc145(0x316)](_0x1eb66c+_0x3bb480[_0x5cc145(0x2fe)]);if(_0x28bbcb=='backup'){const _0x33ea41=/^bot-[0-9]{3}-config.json$/,_0x4050b7=_0x33ea41['test'](_0x3bb480[_0x5cc145(0x2fe)]);if(_0x4050b7){const _0x3b4219=JSON[_0x5cc145(0x20d)](_0x546ffb);if(_0x3b4219[_0x5cc145(0x3a1)][0x0]){_0x3b4219[_0x5cc145(0x3a1)][0x0]['apiKey']=_0x5cc145(0x3b3),_0x3b4219[_0x5cc145(0x3a1)][0x0][_0x5cc145(0x2a2)]=_0x5cc145(0x3b3);if(_0x3b4219[_0x5cc145(0x3a1)][0x0][_0x5cc145(0x1c0)])_0x3b4219[_0x5cc145(0x3a1)][0x0][_0x5cc145(0x1c0)]='***';}_0x546ffb=JSON[_0x5cc145(0x1c3)](_0x3b4219,null,0x2);}if(_0x3bb480[_0x5cc145(0x2fe)]=='bb-settings.json'){const _0x1d9ad7=JSON[_0x5cc145(0x20d)](_0x546ffb);if(_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x2b7)])_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x2b7)]=![];if(_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x335)])_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x335)]=_0x5cc145(0x3b3);if(_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x1ac)])_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x1ac)]=_0x5cc145(0x3b3);if(_0x1d9ad7[_0x5cc145(0x1a6)]['telegramChatId'])_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x36b)]=null;if(_0x1d9ad7['settings'][_0x5cc145(0x36f)])_0x1d9ad7[_0x5cc145(0x1a6)][_0x5cc145(0x36f)]=_0x5cc145(0x3b3);_0x546ffb=JSON[_0x5cc145(0x1c3)](_0x1d9ad7,null,0x2);}if(_0x3bb480[_0x5cc145(0x2fe)]!=_0x5cc145(0x1d6))_0x622aba['file'](_0x3bb480['name'],_0x546ffb);}else _0x622aba[_0x5cc145(0x237)](_0x3bb480[_0x5cc145(0x2fe)],_0x546ffb);}});const _0x76aae9=_0x622aba[_0x2aa055(0x222)]({'base64':![],'compression':'DEFLATE'});fs[_0x2aa055(0x1de)](zippath+(_0x28bbcb+'.zip'),_0x76aae9,_0x2aa055(0x302));}async function unzipFile(_0x397f0e,_0xe038a3){const _0x102d95=_0x17f565;fs[_0x102d95(0x38a)](configpath,{'withFileTypes':!![]})[_0x102d95(0x377)](_0x1d833b=>{const _0x44aaef=_0x102d95;if(!_0x1d833b[_0x44aaef(0x214)]())fs[_0x44aaef(0x286)](configpath+_0x1d833b[_0x44aaef(0x2fe)]);});const _0x55efdb=fs['readFileSync'](_0x397f0e+_0xe038a3,_0x102d95(0x302)),_0x37470f=new require('node-zip')(_0x55efdb,{'base64':![],'checkCRC32':!![]});Object[_0x102d95(0x1f3)](_0x37470f[_0x102d95(0x341)])[_0x102d95(0x377)](_0x5edcf5=>{const _0x1e2376=_0x102d95,_0x4fda55=_0x37470f[_0x1e2376(0x341)][_0x5edcf5];fs['writeFileSync'](configpath+_0x4fda55['name'],_0x4fda55[_0x1e2376(0x2c1)]);}),fs[_0x102d95(0x38a)](temppath,{'withFileTypes':!![]})[_0x102d95(0x377)](_0xf872a8=>{const _0x3774e5=_0x102d95;if(!_0xf872a8[_0x3774e5(0x214)]())fs[_0x3774e5(0x286)](temppath+_0xf872a8[_0x3774e5(0x2fe)]);}),logger['debug']('Backup\x20file\x20unzipped\x20and\x20stored'),process['send']({'restore':!![]},_0x3a2791=>{});}async function getPublicIp(){const _0x1a1b61=_0x17f565;try{const _0x1cb2a1=await axios[_0x1a1b61(0x1f9)](_0x1a1b61(0x27b));publicip=_0x1cb2a1[_0x1a1b61(0x356)]['ip'];}catch(_0x36e082){}}function _0x3570(){const _0x4047ee=['backupfile','Restoring\x20bot(s)\x20from\x20backup','get','hasOwnProperty','Password\x20reset\x20rejected','15\x20min','exp','event','sort','update_no','mode','Backup\x20file\x20uploaded','Telegraf\x20error:','uuid-random','lowdb','isIPv4MappedAddress','storeHeadless','tempaccess_5_','backup-full','Starting\x20Balance\x20Bot\x20reinstallation','$1_$2_$3','jsonwebtoken','parse','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','disabled','telegramUsername','<b>Telegram\x20Bot\x20Status:</b>\x0a','*$1*','sockets','isDirectory','range','\x20|\x20','Notifications\x20disabled\x0a','#RES#\x20if\x20running\x20locally\x0a','Invalid\x20IP\x20address','backup/','\x1b[35m','Unauthorized\x20attempt\x20to\x20delete\x20alerts','initclient','publicKey','************','test','started','generate','ETH','bb-settings.json','Error:\x20Invalid\x20argument\x20','.zip','Invalid\x20authentication\x20token\x20(2)','server','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','params','login\x20token\x20generated','logout','temporary\x20token\x20generated','number','\x1b[34m','entries','\x20mode','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','replace','conn','createWriteStream','temp/','file','Restore\x20process\x20aborted','File\x20uploaded','Unauthorized\x20attempt\x20to\x20get\x20messages','resetpw_no','bb/','bot-','Restore\x20backup\x20file\x20','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Notifications\x20types:\x20','error','metrics','All\x20bots\x20running\x20right\x20now','copyFileSync','\x1b[31m',')\x20\x20\x20|\x20Bot\x20','express-fileupload','then','Unauthorized\x20attempt\x20to\x20confirm\x20message','get-starting-balances','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','SIGINT','username','(((.+)+)+)+$','Restarting\x20Bot\x20','clientip','Notifications\x20enabled\x0a','running','botID','backup','emit','title','cloneDeep','240106pBTkRr','join','f2aRequired','2FA\x20login\x20required','reinstall-bb','placeOrder','any','apiKey','format','mixpanel',',\x20must\x20be\x20a\x204\x20digit\x20number','sendMessage','/help\x20-\x20show\x20available\x20commands\x0a','output-002.log','/:bot/coins','apply','No\x20authentication\x20token','login\x20not\x20required','filter','Starting\x20Balance\x20Bot\x20update','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','<b>Balance\x20Bot\x20Status:</b>\x0a','No\x20bots\x20running\x20right\x20now','/names\x20-\x20show\x20bot\x20names\x0a','metrics_','telegramEvents','args','timeshift','argv','launch','assign','Disabled\x20Bot\x20','string','3791478pERQmK','restart_','https://api.ipify.org?format=json','-results.json','log','node-zip','login2fa_reject_','reply','Unauthorized\x20attempt\x20to\x20get\x20portfolio','Deleted\x20Bot\x20','stop','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','rmSync','#RES#\x20if\x20running\x20on\x20server','delete-bot','success','temporary\x20access\x20not\x20allowed','button','All','production','chat','config_all','existsSync','getStartingBalances','backup-full@','|@|','build','use','value','code','bbUsername','reinstall','track','node','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','/download/:type','Invalid\x20authentication\x20token\x20(1)','Unauthorized\x20attempt\x20to\x20download\x20','apiSecret','botmanager','reinstall_yes','socket',')\x20|\x20Bot\x20','hashSync','kind','yes','address','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','lastmsgemitted','token','function','init','clients','randomBytes','place-order','send','/metrics\x20-\x20show\x20bot\x20performance\x0a','getFullYear','restore_no_','loginRequired','\x20|\x20client:\x20...','-performance.json','=>\x20Go\x20to\x20#CYA#http://','axios','bbvReceive','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','lowdb/adapters/FileSync','kill','hex','_data','statSync','removeAllListeners','logged\x20out','port','uuid','restore-backup-file','login','SIGTERM','Logged\x20out\x20user\x20...','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','output-000.log','\x20minutes','Invalid\x20username\x20or\x20IP\x20address','inherit','compareSync','add-bot','Bot\x20','/:bot/performance','family','randomFillSync','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','\x20to\x20','new','action','update','lastmsgtelegram','/enable\x20-\x20enable\x20notifications\x0a','logs','notification','privateKey','messages','warning','10gmWezY','get-logs','decrypt','confirm-message','referer','You\x20can\x20use\x20the\x20following\x20commands:\x0a','toString','environment','whitelist','start','Logged\x20in\x20user\x20...','getSeconds','socket.io','push','Idling\x20(','telegram2FaApproval','staging','Crypt','message','orders','telegram','0.0.0','2FA\x20login\x20rejected','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','all','/:bot/portfolio','auto','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','name','-config.json',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','9VYPWOo','binary','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','511514USHiKA','telegramIpApproval','type','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','toIPv4Address','config/','11jsGujH','9891FVSZgh','Node.js\x20v','connected','Error\x20while\x20deleting\x20config\x20files:\x20','manual','Network\x20Interfaces:','request','\x20only\x0a','on_','search','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','readFileSync','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','encryptedUuid','inlineKeyboard','listen','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','constructor','expiry','store-configuration','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','disconnect','Notifications\x20enabled','getHours','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','host','connection','find','alerts','map','store','editMessageReplyMarkup','names','3058244zUvsKi','headless','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','write','output-003.log','bbPassword','userid','full','tkn','uncaughtException','\x20-\x20','env','resetHistory','2FA','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','::1','restart','files','telegramEnabled','includes','login\x20required','allow','fork','status\x20code\x20401','remove','invalid\x20credentials','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20update\x20settings','/start','Unauthorized\x20attempt\x20to\x20add\x20bot','close','access\x20timeout','show','versions','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','/:bot/support','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','reason','data','getTime','http','toggle','sendFile','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','RSA','onepagemode','CoinMarketCap\x20API\x20key\x20validated','version.json','getPortfolio','verify','output-001.log','static','storeConfiguration','resetpw_yes','Error\x20removing\x20old\x20backup\x20files:','IPv4','/off\x20-\x20stop\x20bot(s)\x0a','backup-full.zip','\x1b[0m','telegramChatId','exit','showConfig','unlinkSync','marketcapApi','toggle_','reject','Notifications\x20disabled','\x20>\x20','latestversion','Starting\x20new\x20bot\x20|\x20Bot\x20','bcryptjs','forEach','temporary\x20access\x20rejected','timestamp','padStart','Failed\x20to\x20download\x20','cancelLoading','reset-history','sign','address\x20already\x20in\x20use','/output-000.log','blacklist','login2fa_','sendPortfolioTelegram','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','getDate','User\x20has\x20been\x20validated','deleteHistoryAlerts','slice','password','readdirSync','logs/','Restore\x20process\x20confirmed','from','Password\x20has\x20been\x20reset\x20to:\x20','set','sortBy','emitHistory','store-headless','\x20|\x20user:\x20...','remoteAddress','127.0.0.1','cancel-loading','order','toggleBotMode','stopped','express','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','Unauthorized\x20attempt\x20to\x20delete\x20bot','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','#RES#','whitelistEnabled','bb-config.json','bot','Access\x20enabled\x20for\x20','\x20(1)','get-portfolio','\x1b[33m','yargs/yargs','Unauthorized\x20attempt\x20to\x20log\x20out','new-disabled','exchange','index.html','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','bbvNew','generateKeyPairAsync','alias','headers','/update\x20-\x20update\x20Balance\x20Bot\x0a','::ffff:127.0.0.1','-----------------------------------------------------------------------------------','***','secret','split','/:bot/configuration','botname','hybrid-crypto-js','Your\x20installation\x20is\x20already\x20up\x20to\x20date','debug','/upload-backup','defaults','toggle-bot-mode','Enabled\x20Bot\x20','pidExpireLogin','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','settings','date-fns','getMonth','showname',':\x20Bot\x20Mgr\x20>\x20','pidRefreshToken','telegramToken','tempaccess_30_','command','backup-files','2FA\x20required','getMinutes','api-eu.mixpanel.com','live','delete-alerts','Unauthorized\x20attempt\x20to\x20update\x20bot','once','auth','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','toIPv4MappedAddress','mkdirSync','/:bot','exec','ipc','config_alerts','portfolio','apiPassword','telegrammsg','callback','stringify','catch','Unauthorized\x20attempt\x20to\x20show\x20configuration','endsWith','4326310yIjYmX','config','length','child_process','enabled','simple','size','startsWith','ipv6','Login\x20rejected','/restart\x20-\x20restart\x20bot(s)\x0a','add','2FA\x20login\x20token\x20generated','match','handshake','bb-secure.json','path','sha256','All\x20bots','internal','7376rSCRoG','9053436zfJZvL','download','writeFileSync','config_orders','Bot\x20Mgr\x20>\x20','HTML','bots','disable','telegraf','updatebotmanager','bot.js','Starting\x20#RED#Balance\x20Bot\x20v','Markdown','/on\x20-\x20start\x20bot(s)\x0a','Temporary\x20access\x20rejected','Ok,\x20will\x20send\x20alert\x20notifications\x20only','user','Orders','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','reload','Unauthorized\x20attempt\x20to\x20get\x20events','enable','max','keys','access','status','createServer'];_0x3570=function(){return _0x4047ee;};return _0x3570();}async function triggerAnalytics(){const _0x31bbec=_0x17f565;if(!publicip)await getPublicIp();const _0x2c2abd=getBotsWithMode();let _0x493e1d=0x0;_0x2c2abd[_0x31bbec(0x377)](_0x3ec6f6=>{const _0x888b60=_0x31bbec;if(_0x3ec6f6[_0x888b60(0x1f5)]==='enabled')_0x493e1d++;});const _0x5cd775=getBotExchanges();mixpanel[_0x31bbec(0x29a)]('Server',{'distinct_id':settings[_0x31bbec(0x336)],'ip':publicip,'version':serverversion,'numbots':_0x2c2abd['length'],'numbotsenabled':_0x493e1d,'exchanges':_0x5cd775,'environment':environment});}async function getMessages(){const _0x5f2c1d=_0x17f565,_0x3ca632='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x5b3b77=new GraphQLClient(_0x3ca632),_0x1c61cb={'authorization':'Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U'},_0x3a3030=serverversion[_0x5f2c1d(0x3b5)]('.'),_0x5ca645=_0x3a3030[0x0]+'.'+_0x3a3030[0x1],_0x1c2de2=Math['min'](settings[_0x5f2c1d(0x2db)],settings[_0x5f2c1d(0x2ac)]),_0x3dd065={'last':parseInt(_0x1c2de2),'bbm':_0x5ca645},_0x4f5761=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x4447cd;try{_0x4447cd=await _0x5b3b77[_0x5f2c1d(0x311)](_0x4f5761,_0x3dd065,_0x1c61cb);}catch(_0x13f2f5){}if(_0x4447cd&&_0x4447cd[_0x5f2c1d(0x2e0)]){let _0x321283=settings[_0x5f2c1d(0x2db)];newMessages=[];for(const _0x26cd3f of _0x4447cd[_0x5f2c1d(0x2e0)]){newMessages[_0x5f2c1d(0x2ef)](_0x26cd3f);let _0x5ef3c6=![];_0x26cd3f['bbvNew']&&(updateSetting(_0x5f2c1d(0x374),_0x26cd3f[_0x5f2c1d(0x3ac)]),_0x5ef3c6=isNewerVersion(serverversion,_0x26cd3f[_0x5f2c1d(0x3ac)])||serverversion==_0x26cd3f[_0x5f2c1d(0x3ac)]);if(!_0x5ef3c6&&_0x26cd3f[_0x5f2c1d(0x22e)]>_0x321283){if(_0x26cd3f[_0x5f2c1d(0x2bc)]===_0x5f2c1d(0x25e)||serverversion[_0x5f2c1d(0x1ce)](_0x26cd3f['bbvReceive'])){let _0x40e5d5=''+_0x26cd3f[_0x5f2c1d(0x256)]+'\x0a\x0a'+_0x26cd3f['message'];const _0x1b81f7=await sendTelegramMsg(toTelegramMarkdown(_0x40e5d5),_0x5f2c1d(0x1e8));if(_0x1b81f7)_0x321283=_0x26cd3f[_0x5f2c1d(0x22e)];}}}updateAvailable=isNewerVersion(settings[_0x5f2c1d(0x374)],serverversion),updateSetting('lastmsgtelegram',_0x321283),emitMessages();}}function emitMessages(){const _0x35032d=_0x17f565,_0x5cc51c=settings[_0x35032d(0x2ac)];let _0x3a78cd=[];newMessages['forEach'](_0x1fe7ba=>{const _0x375348=_0x35032d;_0x1fe7ba[_0x375348(0x22e)]>_0x5cc51c&&_0x3a78cd['push'](_0x1fe7ba);}),_0x3a78cd[_0x35032d(0x1c9)]>0x0&&getAllClients()[_0x35032d(0x377)](_0x728383=>{const _0x5b15ee=_0x35032d;getSocket(_0x728383['id'])['emit'](_0x5b15ee(0x2f4),_0x3a78cd);});}function confirmMessage(_0x5078e0){const _0x26ea31=_0x17f565;updateSetting(_0x26ea31(0x2ac),Number(_0x5078e0));}function isNewerVersion(_0x4fe42c,_0x5dfb93){const _0xde4c00=_0x17f565,_0x20a24e=_0x5dfb93[_0xde4c00(0x3b5)]('.'),_0x541e4b=_0x4fe42c['split']('.');for(var _0x4ba6d3=0x0;_0x4ba6d3<_0x541e4b[_0xde4c00(0x1c9)];_0x4ba6d3++){const _0x4941d5=~~_0x541e4b[_0x4ba6d3],_0x573558=~~_0x20a24e[_0x4ba6d3];if(_0x4941d5>_0x573558)return!![];if(_0x4941d5<_0x573558)return![];}return![];}function toTelegramMarkdown(_0x3cafe1){const _0xbcc76=_0x17f565,_0x36741f=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x252508=/\*{2}(.+?)\*{2}/gim;return _0x3cafe1=_0x3cafe1[_0xbcc76(0x233)](_0x36741f,_0xbcc76(0x20b))[_0xbcc76(0x233)](_0x252508,_0xbcc76(0x212)),_0x3cafe1;}async function validateConfigFile(){const _0x3d80a7=_0x17f565,_0x16954f=dbConfig[_0x3d80a7(0x1f9)](_0x3d80a7(0x1e2))['sortBy'](_0x3d80a7(0x253))['value']()||[];if(_0x16954f['length']==0x0){let _0x1f7672=0x0,_0x2dd632=[];const _0x189d49=/^bot-([0-9]{3})-config.json$/,_0x367f46=fs['readdirSync'](configpath);_0x367f46['forEach'](_0x3c5176=>{const _0xac02e1=_0x3d80a7,_0x163bea=_0x189d49[_0xac02e1(0x1bc)](_0x3c5176);if(_0x163bea){const _0x2fe1d1=_0x163bea[0x1];let _0x156e0=getBotAttributes(_0x2fe1d1);_0x2dd632[_0xac02e1(0x2ef)]({'botID':_0x2fe1d1,'botname':_0x156e0['botname'],'status':_0xac02e1(0x20f),'live':_0xac02e1(0x399)}),_0x1f7672++;}}),_0x1f7672!=0x0&&(dbConfig[_0x3d80a7(0x1f9)](_0x3d80a7(0x1e2))[_0x3d80a7(0x276)](_0x2dd632)[_0x3d80a7(0x333)](),config=_0x2dd632,restoredConfigFile=_0x1f7672);}}async function restoreConfigNotify(_0x430766){const _0x1f8ec8=_0x17f565;let _0xb32031;if(restoredConfigFile==0x1)_0xb32031=_0x1f8ec8(0x1ee);else _0xb32031=_0x1f8ec8(0x332);if(_0x430766)io['to'](_0x1f8ec8(0x2a3))['emit'](_0x1f8ec8(0x2de),_0xb32031);else{logger[_0x1f8ec8(0x1cc)](_0x1f8ec8(0x3b2)),logger[_0x1f8ec8(0x1cc)](_0xb32031),logger[_0x1f8ec8(0x1cc)](_0x1f8ec8(0x3b2)),logger[_0x1f8ec8(0x1cc)]('');if(tgBot&&settings[_0x1f8ec8(0x36b)]&&settings[_0x1f8ec8(0x271)]!='orders')await sendTelegram(settings[_0x1f8ec8(0x36b)],_0x1f8ec8(0x1e0)+_0xb32031);}}function validateCredentials(_0x302f25,_0x2e4204){const _0x4d481d=_0x17f565;if(_0x302f25['username']==settings['bbUsername']&&bcrypt[_0x4d481d(0x2d0)](_0x302f25[_0x4d481d(0x389)],settings[_0x4d481d(0x335)])){if(settings[_0x4d481d(0x25a)])return{'allow':![],'reason':_0x4d481d(0x25b),'token':null};else{const _0xa7ae96=generateLoginToken(_0x2e4204);return{'allow':!![],'reason':_0x4d481d(0x22b),'token':_0xa7ae96};}}else return{'allow':![],'reason':_0x4d481d(0x349),'token':null};}function refreshToken(_0x463f9c){const _0x4414a9=_0x17f565,_0x43e92d=generateLoginToken(_0x463f9c);return{'allow':!![],'reason':_0x4414a9(0x22b),'token':_0x43e92d};}function validateAccess(_0x5c27e5,_0x58b7ff,_0x5f2541){const _0x288ada=_0x17f565,_0x5f1116=_0x5f2541?_0x5f2541:devices[_0x58b7ff]['ip'];let _0x37fd4d;const _0x59bd48=_0x2ca406=>{const _0x2c688c=_0x265a;if(settings[_0x2c688c(0x2b7)]){if(settings[_0x2c688c(0x25a)]){if(telegram2FaApproved(_0x58b7ff)){const _0x37ee50=generateLoginToken(_0x58b7ff);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x37ee50};}else return{'allow':![],'reason':_0x2c688c(0x344),'token':null};}else return _0x37fd4d=validToken(_0x2ca406,_0x58b7ff),_0x37fd4d[_0x2c688c(0x1fa)](_0x2c688c(0x289))?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x2ca406}:{'allow':![],'reason':_0x2c688c(0x344),'token':null};}else return{'allow':!![],'reason':_0x2c688c(0x269),'token':null};};if(settings[_0x288ada(0x39f)]){let _0x6a5ad0=[...settings[_0x288ada(0x2ea)],_0x288ada(0x33f),_0x288ada(0x3b1),_0x288ada(0x395)];if(_0x6a5ad0[_0x288ada(0x343)](_0x5f1116))return _0x59bd48(_0x5c27e5);else{_0x37fd4d=validToken(_0x5c27e5,_0x58b7ff);if(_0x37fd4d['hasOwnProperty'](_0x288ada(0x289)))return _0x59bd48(_0x5c27e5);else{if(telegramIpApproved(_0x58b7ff)){const _0x3b7c59=generateToken(_0x58b7ff);return _0x37fd4d=_0x59bd48(_0x5c27e5),_0x37fd4d[_0x288ada(0x345)]?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0x3b7c59}:_0x37fd4d;}else return settings['temporaryAccessAllowed']?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':_0x288ada(0x28a),'token':null};}}}else return _0x59bd48(_0x5c27e5);}function timelyDecrypt(_0x4e8f64,_0x417844,_0x55e894='@'){const _0x33db19=_0x17f565;if(_0x4e8f64)try{const _0xb17e77=crypt[_0x33db19(0x2e4)](secure['privateKey'],_0x4e8f64)['message'],_0x449c16=_0xb17e77[_0x33db19(0x3b5)](_0x55e894)[0x0],_0x4f0a8f=_0xb17e77['split'](_0x55e894)[0x1],_0x559887=new Date()[_0x33db19(0x357)]();if(_0x417844){if(_0x559887-_0x4f0a8f<maxSecretAge*0x3e8)return _0x449c16;else return![];}else return _0x449c16;}catch(_0x4237f6){return![];}else return![];}const validToken=(_0x38e532,_0x434e4b)=>{const _0x1775ef=_0x17f565,_0x3fada7=devices[_0x434e4b]['ip'];if(!_0x38e532)return{'error':_0x1775ef(0x268)};for(let _0x4a2c06 of blacklist){if(_0x4a2c06[_0x1775ef(0x2ad)]==_0x38e532)return{'error':'Token\x20blacklisted'};}let _0x5a76f8;try{_0x5a76f8=jwt[_0x1775ef(0x361)](_0x38e532,secure[_0x1775ef(0x3b4)]+_0x434e4b);}catch{return{'error':_0x1775ef(0x2a0)};}if(!_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x250))&&!_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x24d))||!_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x1fd)))return{'error':_0x1775ef(0x227)};if(!_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x24d))&&_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x250))){const {clientip:_0x53dd8c}=_0x5a76f8;return _0x3fada7==_0x53dd8c?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x1775ef(0x219)};}else{if(_0x5a76f8[_0x1775ef(0x1fa)](_0x1775ef(0x24d))&&_0x5a76f8['hasOwnProperty']('clientip')){const {username:_0x519b61,clientip:_0x4d1d73}=_0x5a76f8;return settings[_0x1775ef(0x298)]==_0x519b61&&_0x3fada7==_0x4d1d73?{'success':_0x1775ef(0x386)}:{'error':_0x1775ef(0x2ce)};}}},generateLoginToken=_0xc1b114=>{const _0x40b694=_0x17f565;if(_0xc1b114){const _0x17b9c9=devices[_0xc1b114]['ip'];return jwt[_0x40b694(0x37e)]({'username':settings[_0x40b694(0x298)],'clientip':_0x17b9c9},secure['secret']+_0xc1b114,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x2a79d3=>{const _0x263731=_0x17f565;if(_0x2a79d3){const _0x37c8b1=devices[_0x2a79d3]['ip'];return jwt[_0x263731(0x37e)]({'clientip':_0x37c8b1},secure['secret']+_0x2a79d3,{'expiresIn':devices[_0x2a79d3][_0x263731(0x305)]['expiry']*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x4bced3=>{const _0x34fd79=_0x17f565;let _0x12b1ed=![];return devices[_0x4bced3]['telegramIpApproval']&&devices[_0x4bced3]['telegramIpApproval']['expiry']!=_0x34fd79(0x371)&&(_0x12b1ed=devices[_0x4bced3][_0x34fd79(0x305)][_0x34fd79(0x250)]==devices[_0x4bced3]['ip']&&new Date()['getTime']()-devices[_0x4bced3][_0x34fd79(0x305)][_0x34fd79(0x379)]<devices[_0x4bced3][_0x34fd79(0x305)]['expiry']*0x3c*0x3e8),_0x12b1ed;},telegram2FaApproved=_0x4fde21=>{const _0x12e1a4=_0x17f565;let _0x32591c=![];return devices[_0x4fde21][_0x12e1a4(0x2f1)]&&devices[_0x4fde21][_0x12e1a4(0x2f1)]['expiry']!=_0x12e1a4(0x371)&&(_0x32591c=devices[_0x4fde21][_0x12e1a4(0x2f1)][_0x12e1a4(0x250)]==devices[_0x4fde21]['ip']&&new Date()['getTime']()-devices[_0x4fde21][_0x12e1a4(0x2f1)]['timestamp']<devices[_0x4fde21][_0x12e1a4(0x2f1)][_0x12e1a4(0x31f)]*0x3c*0x3e8),_0x32591c;},normalizeIP=_0x523961=>{const _0x259bc5=_0x17f565;let _0x3022c9=null,_0x431ab7=null;if(ipaddr['isValid'](_0x523961)){const _0x2606b3=ipaddr['parse'](_0x523961);_0x2606b3[_0x259bc5(0x2a8)]()===_0x259bc5(0x1cf)?(_0x2606b3[_0x259bc5(0x206)]()&&(_0x3022c9=_0x2606b3[_0x259bc5(0x308)]()[_0x259bc5(0x2e8)]()),_0x431ab7=_0x2606b3[_0x259bc5(0x2e8)]()):(_0x3022c9=_0x2606b3[_0x259bc5(0x2e8)](),_0x431ab7=_0x2606b3[_0x259bc5(0x1b9)]()[_0x259bc5(0x2e8)]());}return{'show':_0x3022c9?_0x3022c9:_0x431ab7,'store':_0x431ab7};};function formatDate(_0x3e70bf){const _0x269462=_0x17f565;return _0x3e70bf[_0x269462(0x2b5)]()+'/'+(_0x3e70bf['getMonth']()+0x1)[_0x269462(0x2e8)]()['padStart'](0x2,'0')+'/'+_0x3e70bf['getDate']()[_0x269462(0x2e8)]()[_0x269462(0x37a)](0x2,'0')+'\x20'+_0x3e70bf[_0x269462(0x324)]()[_0x269462(0x2e8)]()[_0x269462(0x37a)](0x2,'0')+':'+_0x3e70bf[_0x269462(0x1b1)]()[_0x269462(0x2e8)]()['padStart'](0x2,'0')+':'+_0x3e70bf[_0x269462(0x2ed)]()[_0x269462(0x2e8)]()[_0x269462(0x37a)](0x2,'0');}function sleep(_0x28fbd8){return new Promise(_0x46b691=>setTimeout(_0x46b691,_0x28fbd8));}