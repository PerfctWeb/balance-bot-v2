const _0x248fcd=_0x3c6f;(function(_0x363690,_0x48e008){const _0x6a56be=_0x3c6f,_0x19f497=_0x363690();while(!![]){try{const _0x4a6ba2=parseInt(_0x6a56be(0xa8))/0x1*(-parseInt(_0x6a56be(0xff))/0x2)+-parseInt(_0x6a56be(0x130))/0x3+parseInt(_0x6a56be(0x23c))/0x4*(parseInt(_0x6a56be(0x127))/0x5)+parseInt(_0x6a56be(0xac))/0x6+parseInt(_0x6a56be(0x81))/0x7*(parseInt(_0x6a56be(0x181))/0x8)+-parseInt(_0x6a56be(0x218))/0x9+-parseInt(_0x6a56be(0x106))/0xa*(parseInt(_0x6a56be(0x129))/0xb);if(_0x4a6ba2===_0x48e008)break;else _0x19f497['push'](_0x19f497['shift']());}catch(_0x3ca6f5){_0x19f497['push'](_0x19f497['shift']());}}}(_0x1986,0x670b7));const _0x123f44=function(){let _0x3410ee=!![];return function(_0x523ef7,_0x57e10d){const _0x26da8a=_0x3410ee?function(){const _0x4ca662=_0x3c6f;if(_0x57e10d){const _0x21fdb5=_0x57e10d[_0x4ca662(0x177)](_0x523ef7,arguments);return _0x57e10d=null,_0x21fdb5;}}:function(){};return _0x3410ee=![],_0x26da8a;};}(),_0x5af342=_0x123f44(this,function(){const _0x48e510=_0x3c6f;return _0x5af342[_0x48e510(0x1d7)]()[_0x48e510(0x194)]('(((.+)+)+)+$')[_0x48e510(0x1d7)]()[_0x48e510(0xd8)](_0x5af342)[_0x48e510(0x194)]('(((.+)+)+)+$');});_0x5af342();'use strict';process[_0x248fcd(0x1aa)][_0x248fcd(0x182)]=0x1;const childProcess=require(_0x248fcd(0x9a)),fs=require('fs'),fns=require(_0x248fcd(0x1ea)),low=require(_0x248fcd(0xf2)),FileSync=require(_0x248fcd(0x97)),path=require('path'),crypto=require(_0x248fcd(0x14e)),Crypt=require(_0x248fcd(0xd3))[_0x248fcd(0x1ba)],RSA=require('hybrid-crypto-js')[_0x248fcd(0x192)],bcrypt=require(_0x248fcd(0x243)),jwt=require(_0x248fcd(0x1b1)),ipaddr=require(_0x248fcd(0x207)),argv=require(_0x248fcd(0x118))(process['argv'][_0x248fcd(0xcf)](0x2))[_0x248fcd(0x1ed)],uuidRandom=require(_0x248fcd(0x201)),{Telegraf,Markup}=require(_0x248fcd(0xbf)),Mixpanel=require(_0x248fcd(0x23b)),axios=require(_0x248fcd(0x1b2)),{GraphQLClient,gql}=require(_0x248fcd(0x24a)),util=require(_0x248fcd(0x11a)),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),PORT=argv[_0x248fcd(0x26a)]||_0x248fcd(0x12b),pattern=/^[0-9]{2,4}$/;!pattern[_0x248fcd(0x1d2)](PORT)&&(console[_0x248fcd(0x150)]('Error:\x20Invalid\x20argument\x20'+PORT+_0x248fcd(0x172)),process[_0x248fcd(0x1ef)](0x1));const HOST=argv[_0x248fcd(0x1e1)]||null,userID=argv[_0x248fcd(0x1f4)]||'',debugging=argv['d']||![],nodeversion=process[_0x248fcd(0xce)][_0x248fcd(0x205)];let bbpath=_0x248fcd(0x21b),bbpath2='';const botfile=_0x248fcd(0x259),configfile=_0x248fcd(0x1a7),settingsfile='bb-settings.json',securefile=_0x248fcd(0x14a),environment=require('./'+bbpath2+'version.json')[_0x248fcd(0x10e)]||_0x248fcd(0x26b),maxBackups=0xa;let validInstallation=!![];!fs[_0x248fcd(0x1d4)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x248fcd(0x1c4)),configpath=userID?bbpath+'config/'+userID+'/':bbpath+_0x248fcd(0x151),configbackuppath=configpath+_0x248fcd(0xdb),logspath=userID?bbpath+_0x248fcd(0x1de)+userID+'/':bbpath+_0x248fcd(0x1de),zippath=userID?bbpath+_0x248fcd(0x86)+userID+'/':bbpath+_0x248fcd(0x86),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x248fcd(0x14f)+userID+'/':bbpath+_0x248fcd(0x14f);function _0x3c6f(_0x501473,_0x240203){const _0x338a93=_0x1986();return _0x3c6f=function(_0x5af342,_0x123f44){_0x5af342=_0x5af342-0x72;let _0x198614=_0x338a93[_0x5af342];return _0x198614;},_0x3c6f(_0x501473,_0x240203);}!fs['existsSync'](configpath)&&fs[_0x248fcd(0x123)](configpath);!fs[_0x248fcd(0x1d4)](configbackuppath)&&fs[_0x248fcd(0x123)](configbackuppath);!fs[_0x248fcd(0x1d4)](logspath)&&fs[_0x248fcd(0x123)](logspath);!fs[_0x248fcd(0x1d4)](zippath)&&fs[_0x248fcd(0x123)](zippath);!fs[_0x248fcd(0x1d4)](temppath)&&fs[_0x248fcd(0x123)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x248fcd(0x17b)]({'bots':[]})[_0x248fcd(0x1a5)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x248fcd(0x17b)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x248fcd(0xf1),'onepagemode':![]}})['write']();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x248fcd(0x17b)]({'secure':{},'blacklist':[]})[_0x248fcd(0x1a5)]();let crypt=new Crypt({'md':_0x248fcd(0x21d),'rsaStandard':_0x248fcd(0x131)});const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x248fcd(0x186),{'host':_0x248fcd(0x80)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x248fcd(0x1ae)]&&(settings[_0x248fcd(0x1ae)]!=''&&settings[_0x248fcd(0x1ae)]!=_0x248fcd(0x19c))&&settings[_0x248fcd(0x22a)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x50523d,_0xfe1551)=>{const _0x3de14b=_0x248fcd,_0x203525=/#[A-Z]{3}#/g;if(typeof _0x50523d==_0x3de14b(0x14b)){!_0xfe1551?_0x50523d=_0x50523d[_0x3de14b(0x235)](_0x203525,''):(_0x50523d=_0x50523d['replace'](/#BLU#/g,_0x3de14b(0x149)),_0x50523d=_0x50523d[_0x3de14b(0x235)](/#RED#/g,_0x3de14b(0x15f)),_0x50523d=_0x50523d['replace'](/#YEL#/g,_0x3de14b(0x84)),_0x50523d=_0x50523d[_0x3de14b(0x235)](/#MAG#/g,_0x3de14b(0x19e)),_0x50523d=_0x50523d[_0x3de14b(0x235)](/#CYA#/g,_0x3de14b(0x258)),_0x50523d=_0x50523d['replace'](/#RES#/g,_0x3de14b(0x73)));;}return _0x50523d;},logger={'screen':_0x1ab254=>{const _0xca372a=_0x248fcd;console[_0xca372a(0x150)](parseColor(_0x1ab254,!![]));},'simple':_0x5a57c5=>{const _0xae874f=_0x248fcd;console[_0xae874f(0x150)](parseColor(_0x5a57c5,!![])),loggerfile[_0xae874f(0x1a5)](util[_0xae874f(0x21e)](parseColor(_0x5a57c5,![]))+'\x0a');},'full':async _0x27588c=>{const _0x4a9d08=_0x248fcd,_0x346b47=getTimeStamp()+_0x4a9d08(0x11c)+_0x27588c;console[_0x4a9d08(0x150)](parseColor(_0x346b47,!![])),loggerfile[_0x4a9d08(0x1a5)](util[_0x4a9d08(0x21e)](parseColor(_0x346b47,![]))+'\x0a');if(tgBot&&settings[_0x4a9d08(0xca)]&&settings[_0x4a9d08(0x190)]!=_0x4a9d08(0x77))await sendTelegram(settings['telegramChatId'],_0x4a9d08(0x175)+parseColor(_0x27588c,![]));},'debug':async(_0xd2e893,_0x1fb872='')=>{const _0x51743a=_0x248fcd,_0xb7cc25=getTimeStamp()+_0x51743a(0x234)+_0xd2e893;if(debugging)console[_0x51743a(0x150)](parseColor(_0xb7cc25,!![]));loggerfile[_0x51743a(0x1a5)](util[_0x51743a(0x21e)](parseColor(_0xb7cc25,![]))+'\x0a');if(_0x1fb872){if(debugging)console[_0x51743a(0x150)](_0x1fb872);loggerfile[_0x51743a(0x1a5)](util[_0x51743a(0x21e)](_0x1fb872)+'\x0a');}}};let terminating=![];process['on'](_0x248fcd(0x203),function(_0x6d8a62){logger['simple'](_0x6d8a62);}),process['on'](_0x248fcd(0x1ef),()=>{stopAllBots();}),process['on'](_0x248fcd(0x12a),()=>{stopAllBots();});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+_0x248fcd(0x262))[_0x248fcd(0xe8)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x248fcd(0x9f)),app=express(),http=require('http')[_0x248fcd(0xa4)](app);app[_0x248fcd(0x229)](fileUpload({'useTempFiles':!![]})),app['get'](_0x248fcd(0x138),async(_0x1fb149,_0x41f4f6)=>{const _0x471ac9=_0x248fcd,_0x57f525=_0x1fb149[_0x471ac9(0x24e)][_0x471ac9(0x23f)],_0x427d64=getClientsWithBotID(_0x471ac9(0x18e)),_0x548df7=_0x1fb149[_0x471ac9(0x1f2)][_0x471ac9(0x107)],_0x4ffcea=timelyDecrypt(_0x548df7,![]),_0xb66652=_0x427d64[_0x471ac9(0x125)](_0x4247d2=>_0x4247d2['uuid']==_0x4ffcea);if(_0xb66652){const _0x3f79ec=normalizeIP(_0x1fb149['socket'][_0x471ac9(0x1d6)])[_0x471ac9(0x219)],_0x1003ed=_0x1fb149[_0x471ac9(0x1f2)][_0x471ac9(0x11e)];if(validateAccess(_0x1003ed,_0x4ffcea,_0x3f79ec)[_0x471ac9(0x132)])_0x57f525==_0x471ac9(0x170)&&await backupConfigFiles(),await zipFiles(_0x57f525),_0x41f4f6[_0x471ac9(0xb5)](zippath+(_0x57f525+_0x471ac9(0x20d)),_0x24b0d6=>{const _0x3dc0d3=_0x471ac9;_0x24b0d6&&(logger['full'](_0x3dc0d3(0x202)+_0x57f525),logger['simple'](_0x24b0d6));});else logger[_0x471ac9(0x1f8)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x57f525+'\x20(1)');}else logger[_0x471ac9(0x1f8)](_0x471ac9(0xcb)+_0x57f525+'\x20(2)');}),app[_0x248fcd(0x16b)]('/upload-backup',async(_0x4b8aa2,_0xca7d16)=>{const _0x1de420=_0x248fcd,_0x10ace1=getClientsWithBotID(_0x1de420(0x18e)),_0xbdbd63=_0x4b8aa2[_0x1de420(0x1f2)][_0x1de420(0x107)],_0x1be008=timelyDecrypt(_0xbdbd63,![]),_0x1e588e=_0x10ace1[_0x1de420(0x125)](_0x1a77a3=>_0x1a77a3[_0x1de420(0x107)]==_0x1be008);logger[_0x1de420(0x144)](_0x1de420(0x239));if(_0x1e588e){const _0x5a8487=normalizeIP(_0x4b8aa2['socket']['remoteAddress'])[_0x1de420(0x219)],_0x944fee=_0x4b8aa2['headers'][_0x1de420(0x11e)];if(validateAccess(_0x944fee,_0x1be008,_0x5a8487)[_0x1de420(0x132)]){if(_0x4b8aa2[_0x1de420(0xa9)]){const _0x1ec47e=_0x4b8aa2[_0x1de420(0xa9)]['backupfile'];await _0x1ec47e['mv'](temppath+_0x1ec47e[_0x1de420(0xc8)]),_0xca7d16[_0x1de420(0x10c)]({'status':!![],'message':'File\x20uploaded'});const _0x366297=getBotsWithMode();_0x366297[_0x1de420(0x166)]>0x0?confirmRestore(temppath,_0x1ec47e[_0x1de420(0xc8)]):unzipFile(temppath,_0x1ec47e['name']);}}else logger[_0x1de420(0x1f8)](_0x1de420(0x1ad));}else logger[_0x1de420(0x1f8)](_0x1de420(0x22f));}),app[_0x248fcd(0x229)](express[_0x248fcd(0x1ff)](path[_0x248fcd(0x174)](__dirname,bbpath2,_0x248fcd(0x16a)))),app[_0x248fcd(0x229)](express[_0x248fcd(0x1ff)](path[_0x248fcd(0x174)](__dirname,bbpath2,_0x248fcd(0x23e)))),app[_0x248fcd(0x145)]('/',function(_0x4f447b,_0x107afa){const _0x42a91e=_0x248fcd;_0x107afa['sendFile'](path[_0x42a91e(0x174)](__dirname,bbpath2,_0x42a91e(0x16a),'index.html'));}),app[_0x248fcd(0x145)]('/:bot',function(_0x42baea,_0x433ae9){const _0x47c9fe=_0x248fcd;_0x433ae9[_0x47c9fe(0x196)](path[_0x47c9fe(0x174)](__dirname,bbpath2,_0x47c9fe(0x23e),'index.html'));}),app[_0x248fcd(0x145)]('/:bot/portfolio',(_0xf2fed6,_0x2b4214)=>{const _0x5daa66=_0x248fcd;_0x2b4214[_0x5daa66(0x196)](path['join'](__dirname,bbpath2,_0x5daa66(0x23e),'index.html'));}),app['get'](_0x248fcd(0x261),(_0x3a75d8,_0x18724a)=>{const _0x333f21=_0x248fcd;_0x18724a[_0x333f21(0x196)](path[_0x333f21(0x174)](__dirname,bbpath2,_0x333f21(0x23e),'index.html'));}),app[_0x248fcd(0x145)](_0x248fcd(0xf9),(_0x318c0d,_0x1c1f2a)=>{const _0x5eb26d=_0x248fcd;_0x1c1f2a[_0x5eb26d(0x196)](path[_0x5eb26d(0x174)](__dirname,bbpath2,'build','index.html'));}),app[_0x248fcd(0x145)](_0x248fcd(0xfb),(_0x3049d0,_0x171a6d)=>{const _0x3d85c9=_0x248fcd;_0x171a6d[_0x3d85c9(0x196)](path[_0x3d85c9(0x174)](__dirname,bbpath2,_0x3d85c9(0x23e),'index.html'));}),app[_0x248fcd(0x145)](_0x248fcd(0x1c2),(_0x13f4b7,_0x59bf61)=>{const _0x33248b=_0x248fcd;_0x59bf61[_0x33248b(0x196)](path[_0x33248b(0x174)](__dirname,bbpath2,'build',_0x33248b(0x7b)));}),app[_0x248fcd(0x145)](_0x248fcd(0x1d8),(_0x422f60,_0x4059e4)=>{const _0x1825cd=_0x248fcd;_0x4059e4[_0x1825cd(0x196)](path[_0x1825cd(0x174)](__dirname,bbpath2,'build',_0x1825cd(0x7b)));});if(HOST)http[_0x248fcd(0x16d)](PORT,HOST);else http[_0x248fcd(0x16d)](PORT);const io=require(_0x248fcd(0xae))(http,{});init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0xc522c9=_0x248fcd;let _0x2b17af=_0xc522c9(0x135);const _0x3684bd=networkInterfaces(),_0x3a0c50={};for(const _0x3f28f5 of Object['keys'](_0x3684bd)){for(const _0x54d766 of _0x3684bd[_0x3f28f5]){if((_0x54d766[_0xc522c9(0x200)]==_0xc522c9(0x163)||_0x54d766[_0xc522c9(0x200)]==0x4)&&!_0x54d766[_0xc522c9(0x264)]){const _0x15c84f=ipaddr[_0xc522c9(0x25a)](_0x54d766[_0xc522c9(0xe9)])['range']();_0x15c84f!='private'&&(!_0x3a0c50[_0x3f28f5]&&(_0x3a0c50[_0x3f28f5]=[]),_0x3a0c50[_0x3f28f5][_0xc522c9(0x231)](_0x54d766[_0xc522c9(0xe9)]),_0x2b17af=_0x54d766[_0xc522c9(0xe9)]);}}}return{'serverip':_0x2b17af,'netinterfaces':_0x3a0c50};}async function startServer(){const _0x89091d=_0x248fcd,{serverip:_0x415485,netinterfaces:_0x3b1882}=getServerIP();logger['simple'](''),logger[_0x89091d(0x168)](_0x89091d(0x7e)),await logger[_0x89091d(0x1f8)](_0x89091d(0x1cb)+serverversion+'#RES#\x20'+(environment==_0x89091d(0x1c6)?'(staging)':'')+'\x0a'+(_0x89091d(0x13e)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x89091d(0xe0)+_0x415485+':'+PORT+_0x89091d(0x1eb))),logger['simple'](_0x89091d(0x7e));if(config['length']!=0x0)for(const _0xed9e60 of config){const _0x33f2ca=_0xed9e60['mode']==_0x89091d(0xc6)?'a':'m';if(_0xed9e60['status']=='enabled'||_0xed9e60[_0x89091d(0x164)]==_0x89091d(0x122))await logger['full'](_0x89091d(0x25b)+_0x33f2ca+_0x89091d(0x206)+_0xed9e60['botID']+'\x20|\x20'+_0xed9e60[_0x89091d(0xdc)]),startBot([_0xed9e60[_0x89091d(0x1a3)],userID],{'cwd':bbpath},function(_0x4d6856){const _0x5b3d8e=_0x89091d;if(_0x4d6856)logger[_0x5b3d8e(0x1f8)](_0x4d6856);});else(_0xed9e60[_0x89091d(0x164)]==_0x89091d(0xfd)||_0xed9e60[_0x89091d(0x164)]==_0x89091d(0xc7))&&await logger[_0x89091d(0x1f8)](_0x89091d(0xed)+_0x33f2ca+')\x20\x20\x20|\x20Bot\x20'+_0xed9e60['botID']+'\x20|\x20'+_0xed9e60[_0x89091d(0xdc)]);}else!newBot&&logger[_0x89091d(0x168)]('>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!');if(newBot)addBot();logger[_0x89091d(0x168)](_0x89091d(0x7e)),logger[_0x89091d(0x168)](''),await logger['debug'](_0x89091d(0x111)+nodeversion),await logger[_0x89091d(0x144)]('Network\x20Interfaces:',_0x3b1882);}function startSocket(){const _0x5c7668=_0x248fcd;io['on'](_0x5c7668(0x10f),_0x5333c8=>{const _0x2ac456=_0x5c7668;let _0x4ce8e3,_0x12bcb4,_0x5b33b1,_0x27f6ae,_0x579421;const _0x1e450f=_0x5333c8[_0x2ac456(0xf5)]['headers'][_0x2ac456(0xb3)];_0x12bcb4=_0x1e450f['match'](/bot[0-9]{3}/);if(_0x12bcb4)_0x5b33b1=_0x12bcb4[0x0][_0x2ac456(0x9b)](/[0-9]{3}/);if(_0x5b33b1)_0x4ce8e3=_0x5b33b1[0x0];else _0x4ce8e3=_0x2ac456(0x18e);const _0xe3d0fd=_0x5333c8[_0x2ac456(0xf5)][_0x2ac456(0x12d)]['encryptedUuid'];if(!_0xe3d0fd)_0x5333c8[_0x2ac456(0x17d)](_0x2ac456(0x164),{'publicKey':secure[_0x2ac456(0x25e)]});else{_0x27f6ae=timelyDecrypt(_0xe3d0fd,![]);if(!_0x27f6ae)_0x5333c8[_0x2ac456(0x17d)]('status',{'publicKey':secure[_0x2ac456(0x25e)]});else{_0x579421=normalizeIP(_0x5333c8[_0x2ac456(0x1b0)][_0x2ac456(0x1d6)])[_0x2ac456(0x219)];if(!devices[_0x27f6ae])devices[_0x27f6ae]={'uuid':_0x27f6ae,'access':{'token':null}};devices[_0x27f6ae]['ip']=_0x579421;const _0x215e59=addClient(_0x5333c8['id'],_0x27f6ae,_0x4ce8e3);setAccess(_0x215e59),emitMessages(),_0x5333c8['on'](_0x2ac456(0x191),_0x115c69=>{const _0x2deb1e=_0x2ac456,_0x58b6ce=timelyDecrypt(_0x115c69[_0x2deb1e(0x247)]);if(_0x58b6ce){_0x115c69={'username':_0x115c69[_0x2deb1e(0x1c5)],'password':_0x58b6ce},devices[_0x27f6ae][_0x2deb1e(0x1cf)]=validateCredentials(_0x115c69,_0x27f6ae);if(devices[_0x27f6ae][_0x2deb1e(0x1cf)][_0x2deb1e(0x132)]==![]&&devices[_0x27f6ae][_0x2deb1e(0x1cf)]['reason']==_0x2deb1e(0x199))_0x5333c8[_0x2deb1e(0x17d)](_0x2deb1e(0x164),{'access':devices[_0x27f6ae]['access']}),loginAccess2FA(_0x27f6ae,_0x579421);else{if(devices[_0x27f6ae]['access'][_0x2deb1e(0x132)]==![]&&devices[_0x27f6ae][_0x2deb1e(0x1cf)][_0x2deb1e(0x1e7)]==_0x2deb1e(0x124))_0x5333c8[_0x2deb1e(0x17d)](_0x2deb1e(0x164),{'access':devices[_0x27f6ae][_0x2deb1e(0x1cf)]});else devices[_0x27f6ae][_0x2deb1e(0x1cf)]['allow']&&devices[_0x27f6ae][_0x2deb1e(0x1cf)][_0x2deb1e(0x1e7)]=='login\x20token\x20generated'&&(getClientsWithUuid(_0x27f6ae)[_0x2deb1e(0x83)](_0x1d26da=>{setAccess(_0x1d26da);}),logger[_0x2deb1e(0x144)](_0x2deb1e(0x13c)+_0x27f6ae[_0x2deb1e(0xcf)](-0x8)),setTokenRefresh(_0x27f6ae),setSessionTimeout('login',_0x27f6ae));}}else logger['full'](_0x2deb1e(0x227));}),_0x5333c8['on']('reset-password',()=>{resetPassword();}),_0x5333c8['on']('disconnect',_0x22b5a7=>{removeClient(_0x5333c8['id']);}),_0x4ce8e3==_0x2ac456(0x18e)&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x145f03){const _0x5133f2=_0x248fcd;if(_0x145f03!='botmanager'&&config['apiKey']!=''){if(pid[_0x145f03])pid[_0x145f03][_0x5133f2(0x10c)]({'function':_0x5133f2(0x1be),'args':null});}_0x145f03!=_0x5133f2(0x18e)&&broadcastToBots(_0x5133f2(0xfa),JSON[_0x5133f2(0xd5)](config));}function reloadBotManager(){const _0x4103f1=_0x248fcd;getClientsWithBotID(_0x4103f1(0x18e))[_0x4103f1(0x83)](_0x4a8fa8=>{const _0x44b6e7=_0x4103f1;getSocket(_0x4a8fa8['id'])[_0x44b6e7(0x17d)](_0x44b6e7(0x164),{'access':{'allow':![],'reason':_0x44b6e7(0x1fc),'token':null}});});}function getSocket(_0x58643b){const _0x14804e=_0x248fcd;return io[_0x14804e(0xbb)]['sockets'][_0x14804e(0x145)](_0x58643b);}function setAccess(_0xe618f7){const _0x1d011e=_0x248fcd,_0x449496=getSocket(_0xe618f7['id']),_0x1410ea=_0xe618f7['uuid'],_0x34b0a4=_0xe618f7['bot'];devices[_0x1410ea][_0x1d011e(0x1cf)]=validateAccess(devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x19b)],_0x1410ea),logger[_0x1d011e(0x144)](_0x1d011e(0x19d)+devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x1e7)]+'\x20|\x20client:\x20...'+_0xe618f7['id'][_0x1d011e(0xcf)](-0x8)+_0x1d011e(0x22d)+_0x1410ea[_0x1d011e(0xcf)](-0x8)),_0x449496['join'](_0x1410ea);if(devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x132)]){_0x449496[_0x1d011e(0x174)](_0x34b0a4);if(_0x34b0a4==_0x1d011e(0x18e))initializeSocketBotManager(_0x449496);else initializeSocketBot(_0x449496);initClient(_0x34b0a4);}devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x19b)]&&devices[_0x1410ea]['access']['reason']==_0x1d011e(0x11b)&&setSessionTimeout(_0x1d011e(0x169),_0x1410ea),devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x19b)]&&devices[_0x1410ea][_0x1d011e(0x1cf)]['reason']==_0x1d011e(0x238)&&setSessionTimeout(_0x1d011e(0x191),_0x1410ea),_0x449496[_0x1d011e(0x17d)](_0x1d011e(0x164),{'status':_0xe618f7[_0x1d011e(0x1e4)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x1410ea][_0x1d011e(0x1cf)],'externalip':devices[_0x1410ea]['ip'],'publicKey':secure[_0x1d011e(0x25e)],'userid':settings[_0x1d011e(0x162)],'validInstallation':validInstallation}),devices[_0x1410ea][_0x1d011e(0x1cf)][_0x1d011e(0x132)]==![]&&devices[_0x1410ea][_0x1d011e(0x1cf)]['reason']==_0x1d011e(0xe7)&&temporaryAccess2FA(_0x1410ea,devices[_0x1410ea]['ip']);}function setSessionTimeout(_0x33bd3a,_0x2cbf22){const _0x47a4da=_0x248fcd;let _0x54a46d;if(_0x33bd3a=='login')_0x54a46d=loginExpiry*0x3c*0x3e8;else _0x54a46d=devices[_0x2cbf22]['telegramIpApproval'][_0x47a4da(0x8a)]*0x3c*0x3e8-(new Date()[_0x47a4da(0x1d0)]()-devices[_0x2cbf22][_0x47a4da(0x7d)][_0x47a4da(0x253)]);if(devices[_0x2cbf22][_0x47a4da(0x160)])clearTimeout(devices[_0x2cbf22][_0x47a4da(0x160)]);devices[_0x2cbf22][_0x47a4da(0x160)]=setTimeout(()=>{const _0x243c74=_0x47a4da;if(devices[_0x2cbf22][_0x243c74(0x114)])clearTimeout(devices[_0x2cbf22][_0x243c74(0x114)]);removeSocketListeners(_0x2cbf22),addBlacklist(_0x2cbf22),devices[_0x2cbf22]['telegramIpApproval']=null,devices[_0x2cbf22]['telegram2FaApproval']=null,devices[_0x2cbf22][_0x243c74(0x1cf)][_0x243c74(0x19b)]=null,logger[_0x243c74(0x144)](_0x243c74(0x1f7)+_0x2cbf22[_0x243c74(0xcf)](-0x8)),devices[_0x2cbf22][_0x243c74(0x1cf)]=validateAccess(devices[_0x2cbf22]['access'][_0x243c74(0x19b)],_0x2cbf22),!(devices[_0x2cbf22][_0x243c74(0x1cf)][_0x243c74(0x132)]&&devices[_0x2cbf22]['access'][_0x243c74(0x1e7)]==_0x243c74(0x1c7))&&(_0x33bd3a==_0x243c74(0x191)?io['to'](_0x2cbf22)[_0x243c74(0x17d)](_0x243c74(0x164),{'access':{'allow':![],'reason':_0x243c74(0xbc),'token':null}}):io['to'](_0x2cbf22)['emit'](_0x243c74(0x164),{'access':{'allow':![],'reason':_0x243c74(0xd7),'token':null}})),devices[_0x2cbf22][_0x243c74(0x1cf)][_0x243c74(0x19b)]=null;},_0x54a46d);}function setTokenRefresh(_0x156097){const _0x98d7f0=_0x248fcd;if(devices[_0x156097][_0x98d7f0(0x114)])clearTimeout(devices[_0x156097][_0x98d7f0(0x114)]);devices[_0x156097][_0x98d7f0(0x114)]=setTimeout(()=>{const _0x330fa7=_0x98d7f0;getClientsWithUuid(_0x156097)[_0x330fa7(0x166)]!=0x0?(devices[_0x156097][_0x330fa7(0x1cf)]=refreshToken(_0x156097),io['to'](_0x156097)[_0x330fa7(0x17d)]('status',{'status':_0x330fa7(0xf0),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x156097]['access'],'externalip':devices[_0x156097]['ip'],'publicKey':secure[_0x330fa7(0x25e)],'validInstallation':validInstallation}),setTokenRefresh(_0x156097)):clearTimeout(devices[_0x156097][_0x330fa7(0x114)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x31d20a){const _0x85e603=_0x248fcd,_0x22b1db=getClient(_0x31d20a['id'])[_0x85e603(0x107)];_0x31d20a[_0x85e603(0x17d)](_0x85e603(0xfa),config),_0x31d20a[_0x85e603(0x17d)](_0x85e603(0xf7),cleanSettings()),_0x31d20a['on'](_0x85e603(0x254),_0x4a2609=>{const _0x56c5fd=_0x85e603;if(validateAccess(_0x4a2609,_0x22b1db)[_0x56c5fd(0x132)])addBot();else logger[_0x56c5fd(0x1f8)](_0x56c5fd(0xbe));}),_0x31d20a['on'](_0x85e603(0x233),(_0x11d8ea,_0x1fa994)=>{const _0x3e551c=_0x85e603;if(validateAccess(_0x1fa994,_0x22b1db)[_0x3e551c(0x132)])toggleBot(_0x11d8ea['botID'],_0x11d8ea[_0x3e551c(0x164)],_0x11d8ea[_0x3e551c(0xb0)]);else logger['full'](_0x3e551c(0x18f));}),_0x31d20a['on']('toggle-bot-mode',(_0x5c3da5,_0x3ff2a4)=>{const _0xc7cd8d=_0x85e603;if(validateAccess(_0x3ff2a4,_0x22b1db)[_0xc7cd8d(0x132)])toggleBotMode(_0x5c3da5);else logger[_0xc7cd8d(0x1f8)](_0xc7cd8d(0x18f));}),_0x31d20a['on'](_0x85e603(0x13b),(_0x54fe2c,_0x561ecd)=>{const _0x14b2c5=_0x85e603;if(validateAccess(_0x561ecd,_0x22b1db)[_0x14b2c5(0x132)])deleteBot(_0x54fe2c);else logger[_0x14b2c5(0x1f8)](_0x14b2c5(0xd0));}),_0x31d20a['on'](_0x85e603(0x136),(_0x59561d,_0x42999b)=>{const _0x25c34c=_0x85e603;if(validateAccess(_0x42999b,_0x22b1db)[_0x25c34c(0x132)])storeSettings(_0x59561d,!![]);else logger['full'](_0x25c34c(0x25c));}),_0x31d20a['on'](_0x85e603(0x22c),_0x339905=>{const _0x259418=_0x85e603;if(validateAccess(_0x339905,_0x22b1db)[_0x259418(0x132)])updateBB(_0x259418(0x214));else logger[_0x259418(0x1f8)](_0x259418(0x20f));}),_0x31d20a['on'](_0x85e603(0x1a8),_0x5ca7e8=>{const _0x2038de=_0x85e603;if(validateAccess(_0x5ca7e8,_0x22b1db)[_0x2038de(0x132)])updateBB(_0x2038de(0x109));else logger[_0x2038de(0x1f8)](_0x2038de(0x21c));}),_0x31d20a['on']('get-backup-files',_0x1c26c5=>{const _0x35b0cb=_0x85e603;if(validateAccess(_0x1c26c5,_0x22b1db)[_0x35b0cb(0x132)]){const _0xd431e8=getClient(_0x31d20a['id']);if(_0xd431e8)getBackupFiles(_0xd431e8['uuid']);else logger[_0x35b0cb(0x1f8)](_0x35b0cb(0x104));}else logger[_0x35b0cb(0x1f8)](_0x35b0cb(0x1da));}),_0x31d20a['on'](_0x85e603(0x14c),(_0x39999d,_0x3e52d5)=>{const _0x394814=_0x85e603;if(validateAccess(_0x3e52d5,_0x22b1db)[_0x394814(0x132)])restoreBackupFile(_0x39999d);else logger[_0x394814(0x1f8)](_0x394814(0x242));}),_0x31d20a['on'](_0x85e603(0x88),_0x15d374=>{const _0x9ba3aa=_0x85e603;if(validateAccess(_0x15d374,_0x22b1db)[_0x9ba3aa(0x132)])getMessages();else logger['full'](_0x9ba3aa(0x134));}),_0x31d20a['on'](_0x85e603(0x12e),(_0x1967fd,_0x5cd876)=>{const _0x47addc=_0x85e603;if(validateAccess(_0x5cd876,_0x22b1db)[_0x47addc(0x132)])confirmMessage(_0x1967fd);else logger['full'](_0x47addc(0xb4));}),_0x31d20a['on']('logout',_0x9e1438=>{const _0x185e73=_0x85e603;if(validateAccess(_0x9e1438,_0x22b1db)[_0x185e73(0x132)]){if(devices[_0x22b1db][_0x185e73(0x114)])clearTimeout(devices[_0x22b1db][_0x185e73(0x114)]);if(devices[_0x22b1db][_0x185e73(0x160)])clearTimeout(devices[_0x22b1db][_0x185e73(0x160)]);removeSocketListeners(getClient(_0x31d20a['id'])[_0x185e73(0x107)]),addBlacklist(_0x22b1db),devices[_0x22b1db][_0x185e73(0x7d)]=null,devices[_0x22b1db][_0x185e73(0x1b6)]=null,devices[_0x22b1db]['access']['token']=null,logger[_0x185e73(0x144)](_0x185e73(0x13f)+_0x22b1db[_0x185e73(0xcf)](-0x8)),io['to'](getClient(_0x31d20a['id'])[_0x185e73(0x107)])['emit'](_0x185e73(0x164),{'access':{'allow':![],'reason':_0x185e73(0x1f9),'token':null}});}else logger[_0x185e73(0x1f8)](_0x185e73(0x226));});}function initializeSocketBot(_0x517bb7){const _0x4366c8=_0x248fcd,_0x1e1505=getClient(_0x517bb7['id'])['bot'],_0x3969fd=getClient(_0x517bb7['id'])[_0x4366c8(0x107)];_0x517bb7['on'](_0x4366c8(0x15c),(_0x3e3888,_0x5075d6)=>{const _0x3946c8=_0x4366c8;if(validateAccess(_0x5075d6,_0x3969fd)[_0x3946c8(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505]['send']({'function':'emitHistory','args':_0x3e3888});}else logger[_0x3946c8(0x1f8)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x517bb7['on'](_0x4366c8(0x1bc),(_0x455783,_0x1d5710)=>{const _0x362811=_0x4366c8;if(validateAccess(_0x1d5710,_0x3969fd)['allow']){if(pid[_0x1e1505])pid[_0x1e1505]['send']({'function':'deleteHistoryAlerts','args':_0x455783});}else logger[_0x362811(0x1f8)](_0x362811(0xe6));}),_0x517bb7['on'](_0x4366c8(0x176),(_0x592919,_0x214bad)=>{const _0x4f7f17=_0x4366c8;if(validateAccess(_0x214bad,_0x3969fd)['allow']){if(pid[_0x1e1505])pid[_0x1e1505][_0x4f7f17(0x10c)]({'function':_0x4f7f17(0x1ca),'args':_0x592919});}else logger[_0x4f7f17(0x1f8)](_0x4f7f17(0x251));}),_0x517bb7['on']('store-configuration',(_0x5e07aa,_0x55b3be)=>{const _0x2c040a=_0x4366c8;if(validateAccess(_0x55b3be,_0x3969fd)[_0x2c040a(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505][_0x2c040a(0x10c)]({'function':_0x2c040a(0x8f),'args':_0x5e07aa});}else logger[_0x2c040a(0x1f8)](_0x2c040a(0xe3));}),_0x517bb7['on']('store-headless',(_0x106ec2,_0x4dadf8)=>{const _0x478d50=_0x4366c8;if(validateAccess(_0x4dadf8,_0x3969fd)[_0x478d50(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505][_0x478d50(0x10c)]({'function':_0x478d50(0xbd),'args':_0x106ec2});}else logger[_0x478d50(0x1f8)](_0x478d50(0x110));}),_0x517bb7['on'](_0x4366c8(0x1f0),(_0x1b0d82,_0x3202f9)=>{const _0x360f43=_0x4366c8;if(validateAccess(_0x3202f9,_0x3969fd)[_0x360f43(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505][_0x360f43(0x10c)]({'function':_0x360f43(0x1e5),'args':_0x1b0d82});}else logger[_0x360f43(0x1f8)](_0x360f43(0x94));}),_0x517bb7['on'](_0x4366c8(0x95),_0x3fbe23=>{const _0x5717cf=_0x4366c8;if(validateAccess(_0x3fbe23,_0x3969fd)['allow']){if(pid[_0x1e1505])pid[_0x1e1505][_0x5717cf(0x10c)]({'function':_0x5717cf(0x85),'args':null});}else logger['full'](_0x5717cf(0x193));}),_0x517bb7['on'](_0x4366c8(0x112),_0x5687e9=>{const _0x1d4940=_0x4366c8;if(validateAccess(_0x5687e9,_0x3969fd)[_0x1d4940(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505]['send']({'function':'getStartingBalances','args':null});}else logger['full'](_0x1d4940(0x126));}),_0x517bb7['on'](_0x4366c8(0x120),(_0x3b87f2,_0x4aded2)=>{const _0x202875=_0x4366c8;if(validateAccess(_0x4aded2,_0x3969fd)[_0x202875(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505][_0x202875(0x10c)]({'function':_0x202875(0x91),'args':_0x3b87f2});}else logger['full'](_0x202875(0x87));}),_0x517bb7['on'](_0x4366c8(0x1cd),_0xd9a9e3=>{const _0xfef87c=_0x4366c8;if(validateAccess(_0xd9a9e3,_0x3969fd)['allow']){if(pid[_0x1e1505])pid[_0x1e1505]['send']({'function':_0xfef87c(0xb8),'args':null});}else logger[_0xfef87c(0x1f8)](_0xfef87c(0x1b3));}),_0x517bb7['on'](_0x4366c8(0x156),_0x5099e1=>{const _0x3071cf=_0x4366c8;if(validateAccess(_0x5099e1,_0x3969fd)[_0x3071cf(0x132)]){if(pid[_0x1e1505])pid[_0x1e1505]['send']({'function':_0x3071cf(0x141),'args':null});}else logger[_0x3071cf(0x1f8)](_0x3071cf(0x154));}),_0x517bb7['on']('update-bb',_0xcece1a=>{const _0x3f6551=_0x4366c8;if(validateAccess(_0xcece1a,_0x3969fd)['allow'])updateBB(_0x3f6551(0x214));else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x517bb7['on'](_0x4366c8(0x88),_0xa0ec78=>{const _0x453bfc=_0x4366c8;if(validateAccess(_0xa0ec78,_0x3969fd)[_0x453bfc(0x132)])getMessages();else logger[_0x453bfc(0x1f8)](_0x453bfc(0x134));}),_0x517bb7['on'](_0x4366c8(0x12e),(_0x334917,_0x2359c7)=>{const _0x9d7a72=_0x4366c8;if(validateAccess(_0x2359c7,_0x3969fd)[_0x9d7a72(0x132)])confirmMessage(_0x334917);else logger[_0x9d7a72(0x1f8)](_0x9d7a72(0xb4));}),_0x517bb7['on'](_0x4366c8(0x209),_0x12574f=>{const _0x17de59=_0x4366c8;if(validateAccess(_0x12574f,_0x3969fd)['allow']){if(devices[_0x3969fd][_0x17de59(0x114)])clearTimeout(devices[_0x3969fd][_0x17de59(0x114)]);if(devices[_0x3969fd][_0x17de59(0x160)])clearTimeout(devices[_0x3969fd][_0x17de59(0x160)]);removeSocketListeners(getClient(_0x517bb7['id'])[_0x17de59(0x107)]),addBlacklist(_0x3969fd),devices[_0x3969fd][_0x17de59(0x7d)]=null,devices[_0x3969fd][_0x17de59(0x1b6)]=null,devices[_0x3969fd][_0x17de59(0x1cf)]['token']=null,logger[_0x17de59(0x144)]('Logged\x20out\x20user\x20...'+_0x3969fd[_0x17de59(0xcf)](-0x8)),io['to'](getClient(_0x517bb7['id'])[_0x17de59(0x107)])['emit'](_0x17de59(0x164),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x17de59(0x1f8)](_0x17de59(0x226));});}function removeSocketListeners(_0x5525a0){const _0x9adb3=_0x248fcd;getClientsWithUuid(_0x5525a0)[_0x9adb3(0x83)](_0x2a8dda=>{const _0x3adc60=_0x9adb3;getSocket(_0x2a8dda['id'])[_0x3adc60(0x217)]();});}function cleanSettings(){const _0x77693d=_0x248fcd;let _0x5302cd=settings;return settings[_0x77693d(0x1ae)]&&settings['telegramToken']!=''&&(_0x5302cd={..._0x5302cd,'telegramToken':'************'}),settings[_0x77693d(0x8e)]&&settings[_0x77693d(0x8e)]!=''&&(_0x5302cd={..._0x5302cd,'bbPassword':_0x77693d(0x236)}),(settings[_0x77693d(0x8e)]&&settings[_0x77693d(0x8e)]==_0x77693d(0x19c)||settings[_0x77693d(0x1ae)]&&settings['telegramToken']==_0x77693d(0x19c))&&(_0x5302cd={..._0x5302cd,'restored':{'password':settings[_0x77693d(0x8e)]==_0x77693d(0x19c),'telegram':settings[_0x77693d(0x1ae)]==_0x77693d(0x19c)}}),_0x5302cd;}async function updateBB(_0x332ab5){const _0x1cd5cb=_0x248fcd;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x457af1=>{const _0x325ba4=_0x3c6f;restartBot(_0x457af1[_0x325ba4(0x1a3)]);});if(_0x332ab5==_0x1cd5cb(0x214))process['send']({'update':!![],'environment':environment},_0x34eb42=>{});else _0x332ab5==_0x1cd5cb(0x109)&&process[_0x1cd5cb(0x10c)]({'reinstall':!![],'environment':environment},_0x3bd0b5=>{});}function startBot(_0x2e3b3d,_0x4510f9,_0x1bb56c){const _0x51a495=_0x248fcd;if(debugging)_0x2e3b3d['push']('-d');let _0x5ed4a3=![];const _0xb1d909=_0x2e3b3d[0x0];_0x4510f9={..._0x4510f9,'stdio':['inherit','inherit',_0x51a495(0x158),'ipc']},pid[_0xb1d909]=childProcess['fork'](botfile,_0x2e3b3d,_0x4510f9),pid[_0xb1d909]['on'](_0x51a495(0x10a),_0x15ffd3=>{const _0x22e646=_0x51a495;switch(Object[_0x22e646(0x249)](_0x15ffd3)[0x0]){case _0x22e646(0xdc):updateBotName(_0xb1d909,_0x15ffd3[_0x22e646(0xdc)]);break;case'updatebotmanager':updateBotManager();break;case _0x22e646(0x164):updateStatus(_0xb1d909,_0x15ffd3[_0x22e646(0x164)]);break;case _0x22e646(0xb0):updateLive(_0xb1d909,_0x15ffd3[_0x22e646(0xb0)]);break;case _0x22e646(0x1a4):updateLive(_0xb1d909,_0x15ffd3[_0x22e646(0x1a4)]),io['to'](_0xb1d909)[_0x22e646(0x17d)]('status',{'access':{'allow':![],'reason':_0x22e646(0x1fc),'token':null}});break;case'stop':_0x15ffd3[_0x22e646(0x1d3)]=='restart'&&restartBot(_0xb1d909);_0x15ffd3[_0x22e646(0x1d3)]==_0x22e646(0x10b)&&toggleBot(_0xb1d909,_0x22e646(0xfd),_0x22e646(0x128));break;case'telegram':sendTelegramBot(_0xb1d909,_0x15ffd3['telegram']);break;case _0x22e646(0x197):sendTelegramMsg(_0x15ffd3[_0x22e646(0x197)]);break;case _0x22e646(0x21f):io['to'](_0xb1d909)[_0x22e646(0x17d)](_0x15ffd3[_0x22e646(0x21f)],_0x15ffd3['args']);break;}}),pid[_0xb1d909]['on'](_0x51a495(0x75),function(_0x5a1f13){if(_0x5ed4a3)return;_0x5ed4a3=!![],_0x1bb56c(_0x5a1f13);}),pid[_0xb1d909]['on']('exit',async function(_0x113a68){const _0x15e014=_0x51a495;if(terminating)return;if(installingUpdate){logger[_0x15e014(0x144)](_0x15e014(0x15b)),io[_0x15e014(0xc5)]();return;}if(_0x5ed4a3)return;_0x5ed4a3=!![],_0x1bb56c(null);const _0x4e6514=dbConfig[_0x15e014(0x145)](_0x15e014(0xfa))[_0x15e014(0x125)]({'botID':_0xb1d909})['value']();_0x4e6514&&(_0x4e6514[_0x15e014(0x164)]==_0x15e014(0xec)||_0x4e6514[_0x15e014(0x164)]==_0x15e014(0x122))&&(await sleep(0x3e8),updateLive(_0xb1d909,_0x15e014(0x128)),logger['full']('Restarting\x20Bot\x20'+_0xb1d909),startBot([_0xb1d909,userID],{'cwd':bbpath},function(_0x1daf3f){const _0x5b4bf4=_0x15e014;if(_0x1daf3f)logger[_0x5b4bf4(0x1f8)](_0x1daf3f);}));});}function stopBot(_0x119b59){const _0x58ca8a=_0x248fcd;getClientsWithBotID(_0x119b59)[_0x58ca8a(0x83)](_0x236217=>{const _0xf57ece=_0x58ca8a;getSocket(_0x236217['id'])[_0xf57ece(0x173)](!![]),removeClient(_0x236217['id']);}),pid[_0x119b59]&&(pid[_0x119b59][_0x58ca8a(0x10b)](),pid[_0x119b59]=null);}function stopAllBots(){terminating=!![];const _0x425545=getEnabledBots();_0x425545['forEach'](_0x2da721=>{const _0x18fb02=_0x3c6f;stopBot(_0x2da721[_0x18fb02(0x1a3)]);});}function restartBot(_0x5f598b){const _0x2d951f=_0x248fcd;if(pid[_0x5f598b])pid[_0x5f598b][_0x2d951f(0x10b)]();}function addBot(){const _0x4fc08f=_0x248fcd;let _0x3445e0;for(let _0xec2af7=0x1;_0xec2af7<0x3e9;_0xec2af7++){_0x3445e0=_0xec2af7[_0x4fc08f(0x1d7)]()[_0x4fc08f(0x9d)](0x3,'0');let _0x5dcee9=config['find'](_0x16b88b=>_0x16b88b[_0x4fc08f(0x1a3)]==_0x3445e0);if(!_0x5dcee9)break;}if(_0x3445e0===_0x4fc08f(0x13d)){logger[_0x4fc08f(0x1f8)]('The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logger[_0x4fc08f(0x1f8)](_0x4fc08f(0x155)+_0x3445e0),dbConfig[_0x4fc08f(0x145)](_0x4fc08f(0xfa))[_0x4fc08f(0x231)]({'botID':_0x3445e0,'botname':'Bot\x20'+_0x3445e0,'status':_0x4fc08f(0x122),'live':''})[_0x4fc08f(0x1a5)](),startBot([_0x3445e0,userID],{'cwd':bbpath},function(_0x5880e5){const _0x1b7299=_0x4fc08f;if(_0x5880e5)logger[_0x1b7299(0x1f8)](_0x5880e5);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x4fc08f(0xfa),config),broadcastToBots('bots',JSON[_0x4fc08f(0xd5)](config));}function deleteBot(_0x1322c9){const _0x4d5fe1=_0x248fcd;getClientsWithBotID(_0x1322c9)[_0x4d5fe1(0x83)](_0x6a63c3=>{const _0x559ae3=_0x4d5fe1;getSocket(_0x6a63c3['id'])[_0x559ae3(0x173)](!![]),removeClient(_0x6a63c3['id']);}),dbConfig['get'](_0x4d5fe1(0xfa))['remove']({'botID':_0x1322c9})[_0x4d5fe1(0x1a5)](),logger[_0x4d5fe1(0x1f8)]('Deleted\x20Bot\x20'+_0x1322c9),stopBot(_0x1322c9);try{if(fs[_0x4d5fe1(0x1d4)](path[_0x4d5fe1(0x174)](configpath,'bot-'+_0x1322c9+'-config.json')))fs[_0x4d5fe1(0x10d)](path['join'](configpath,_0x4d5fe1(0xa2)+_0x1322c9+_0x4d5fe1(0x108)));if(fs['existsSync'](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+'-events.json')))fs[_0x4d5fe1(0x10d)](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+'-events.json'));if(fs[_0x4d5fe1(0x1d4)](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+_0x4d5fe1(0x1f6))))fs[_0x4d5fe1(0x10d)](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+_0x4d5fe1(0x1f6)));if(fs[_0x4d5fe1(0x1d4)](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+_0x4d5fe1(0xd6))))fs['unlinkSync'](path[_0x4d5fe1(0x174)](configpath,_0x4d5fe1(0xa2)+_0x1322c9+'-results.json'));}catch(_0x39387d){if(_0x39387d)logger['full'](_0x4d5fe1(0x1db),_0x39387d);}config=getConfiguration(),io['to'](_0x4d5fe1(0x18e))[_0x4d5fe1(0x17d)](_0x4d5fe1(0xfa),config),broadcastToBots(_0x4d5fe1(0xfa),JSON['stringify'](config));}function toggleBot(_0x4db7a2,_0x3fee17,_0x58a3e2){const _0x107d57=_0x248fcd;dbConfig[_0x107d57(0x145)](_0x107d57(0xfa))['find']({'botID':_0x4db7a2})[_0x107d57(0x246)]({'status':_0x3fee17})[_0x107d57(0x246)]({'live':_0x58a3e2})['write']();if(_0x3fee17==_0x107d57(0xec)||_0x3fee17==_0x107d57(0x122))logger[_0x107d57(0x1f8)](_0x107d57(0x12f)+_0x4db7a2),startBot([_0x4db7a2,userID],{'cwd':bbpath},function(_0x21619f){const _0xa96299=_0x107d57;if(_0x21619f)logger[_0xa96299(0x1f8)](_0x21619f);});else(_0x3fee17==_0x107d57(0xfd)||_0x3fee17==_0x107d57(0xc7))&&(logger[_0x107d57(0x1f8)](_0x107d57(0xb6)+_0x4db7a2),stopBot(_0x4db7a2));config=getConfiguration(),io['to'](_0x107d57(0x18e))[_0x107d57(0x17d)](_0x107d57(0xfa),config),broadcastToBots('bots',JSON[_0x107d57(0xd5)](config));}function toggleStatus(_0x3265e4){const _0x26e76d=_0x248fcd;let _0x3519f4=dbConfig[_0x26e76d(0x145)](_0x26e76d(0xfa))[_0x26e76d(0x125)]({'botID':_0x3265e4})[_0x26e76d(0x11f)](),_0x5d38b4;if(_0x3519f4['status']===_0x26e76d(0xec))_0x5d38b4='disabled';else{if(_0x3519f4[_0x26e76d(0x164)]===_0x26e76d(0x122))_0x5d38b4=_0x26e76d(0xc7);else{if(_0x3519f4['status']===_0x26e76d(0xc7))_0x5d38b4=_0x26e76d(0x122);else{if(_0x3519f4[_0x26e76d(0x164)]==='disabled')_0x5d38b4=_0x26e76d(0xec);}}}return _0x5d38b4;}function updateStatus(_0x1fad7b,_0x1ee948){const _0x56fab6=_0x248fcd;dbConfig['get'](_0x56fab6(0xfa))[_0x56fab6(0x125)]({'botID':_0x1fad7b})[_0x56fab6(0x246)]({'status':_0x1ee948})['write'](),config=getConfiguration(),io['to'](_0x56fab6(0x18e))[_0x56fab6(0x17d)]('bots',config),broadcastToBots('bots',JSON[_0x56fab6(0xd5)](config));}function updateLive(_0x3069b1,_0x2888cd){const _0x184fd1=_0x248fcd;dbConfig[_0x184fd1(0x145)]('bots')[_0x184fd1(0x125)]({'botID':_0x3069b1})[_0x184fd1(0x246)]({'live':_0x2888cd})['write'](),config=getConfiguration(),io['to'](_0x184fd1(0x18e))[_0x184fd1(0x17d)]('bots',config),broadcastToBots('bots',JSON['stringify'](config));}function updateBotName(_0x4cde7c,_0x52f676){const _0x58bf5c=_0x248fcd;dbConfig[_0x58bf5c(0x145)](_0x58bf5c(0xfa))['find']({'botID':_0x4cde7c})[_0x58bf5c(0x246)]({'botname':_0x52f676})[_0x58bf5c(0x1a5)](),config=getConfiguration(),io['to']('botmanager')[_0x58bf5c(0x17d)](_0x58bf5c(0xfa),config),broadcastToBots(_0x58bf5c(0xfa),JSON[_0x58bf5c(0xd5)](config));}function updateBotManager(){const _0x3f39f7=_0x248fcd;config=getConfiguration(),io['to'](_0x3f39f7(0x18e))['emit'](_0x3f39f7(0xfa),config),broadcastToBots(_0x3f39f7(0xfa),JSON['stringify'](config));}function toggleBotMode(_0xa5692a){const _0x3e8415=_0x248fcd;if(pid[_0xa5692a])pid[_0xa5692a][_0x3e8415(0x10c)]({'function':'toggleBotMode','args':null});else{const _0x41410d=configpath+_0x3e8415(0xa2)+_0xa5692a+_0x3e8415(0x108),_0x36822b=fs[_0x3e8415(0x17c)](_0x41410d),_0x5d93d1=JSON[_0x3e8415(0x25a)](_0x36822b),_0x42ad67=_0x5d93d1[_0x3e8415(0x1b9)][0x0][_0x3e8415(0x20c)];_0x5d93d1[_0x3e8415(0x1b9)][0x0][_0x3e8415(0x20c)]=!_0x42ad67;const _0x232173=JSON['stringify'](_0x5d93d1,null,0x2);fs[_0x3e8415(0x20a)](_0x41410d,_0x232173),config=getConfiguration(),io['to']('botmanager')[_0x3e8415(0x17d)](_0x3e8415(0xfa),config),broadcastToBots(_0x3e8415(0xfa),JSON[_0x3e8415(0xd5)](config));}}function validateTelegram(_0x40a18c){const _0x38e594=_0x248fcd;if(_0x40a18c[_0x38e594(0x180)][_0x38e594(0x1c5)]!=settings[_0x38e594(0x22a)]&&'@'+_0x40a18c[_0x38e594(0x180)][_0x38e594(0x1c5)]!=settings['telegramUsername']||_0x40a18c[_0x38e594(0x216)]['id']!=settings[_0x38e594(0xca)])return sendTelegram(_0x40a18c[_0x38e594(0x216)]['id'],_0x38e594(0x1a1),{'parse_mode':_0x38e594(0x152)}),![];return!![];}async function initTelegram(){const _0x5d3d6b=_0x248fcd;if(tgBot)tgBot[_0x5d3d6b(0x1d3)](),tgBot=null,initTelegram();else{tgBot=new Telegraf(settings['telegramToken']);let _0x2d3320=_0x5d3d6b(0x1cc);_0x2d3320+='\x0a',_0x2d3320+=_0x5d3d6b(0xc9),_0x2d3320+=_0x5d3d6b(0x1ee),_0x2d3320+=_0x5d3d6b(0x1a9),_0x2d3320+=_0x5d3d6b(0x15a),_0x2d3320+=_0x5d3d6b(0x1fd),_0x2d3320+='/off\x20-\x20stop\x20bot(s)\x0a',_0x2d3320+='/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a',_0x2d3320+='/names\x20-\x20show\x20bot\x20names\x0a',_0x2d3320+=_0x5d3d6b(0x179),_0x2d3320+=_0x5d3d6b(0x1c9),_0x2d3320+=_0x5d3d6b(0x195),_0x2d3320+=_0x5d3d6b(0x1c0),_0x2d3320+=_0x5d3d6b(0x230),_0x2d3320+=_0x5d3d6b(0x1c1);let _0x2461ce=_0x5d3d6b(0x248);_0x2461ce+='\x0a',_0x2461ce+=_0x2d3320,tgBot['catch']((_0x2e8f2d,_0x3b077e)=>{const _0x288a56=_0x5d3d6b;logger[_0x288a56(0x168)](getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured'),logger[_0x288a56(0x144)](_0x288a56(0x1b7),_0x2e8f2d);}),tgBot['use'](async(_0x5c2de8,_0x28aa87)=>{const _0x3fa6c4=_0x5d3d6b;if(!(!settings[_0x3fa6c4(0xca)]&&_0x5c2de8[_0x3fa6c4(0x214)]['message'][_0x3fa6c4(0x133)]=='/start')){if(!validateTelegram(_0x5c2de8))return;}_0x28aa87();}),tgBot['command'](_0x5d3d6b(0xc0),async _0x545145=>{const _0xf11860=_0x5d3d6b;if(!settings[_0xf11860(0xca)])updateSetting(_0xf11860(0xca),_0x545145[_0xf11860(0x216)]['id']);updateSetting(_0xf11860(0x245),!![]);if(!validateTelegram(_0x545145))return;await sendTelegram(_0x545145['chat']['id'],_0x2461ce);}),tgBot[_0x5d3d6b(0x18b)]('enable',async _0x2512bc=>{const _0x5de4ab=_0x5d3d6b;updateSetting(_0x5de4ab(0x245),!![]),await sendTelegram(_0x2512bc[_0x5de4ab(0x216)]['id'],_0x5de4ab(0x265));}),tgBot[_0x5d3d6b(0x18b)]('disable',async _0x19fc4f=>{const _0x82858f=_0x5d3d6b;await sendTelegram(_0x19fc4f[_0x82858f(0x216)]['id'],_0x82858f(0x19f)),updateSetting(_0x82858f(0x245),![]);}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0xa6),async _0x4deb69=>{const _0x16b12f=_0x5d3d6b,_0x400d0a=Markup[_0x16b12f(0x1ec)]([Markup['button']['callback'](_0x16b12f(0xee),_0x16b12f(0xd1)),Markup[_0x16b12f(0x143)]['callback']('Alerts',_0x16b12f(0x1ab)),Markup[_0x16b12f(0x143)][_0x16b12f(0xc3)](_0x16b12f(0x161),_0x16b12f(0x1dc))]);_0x4deb69[_0x16b12f(0x8c)](_0x16b12f(0x1bf),_0x400d0a);}),tgBot[_0x5d3d6b(0xc4)]('config_orders',async _0x4de8f2=>{const _0x46cba5=_0x5d3d6b;_0x4de8f2['editMessageReplyMarkup'](),updateSetting(_0x46cba5(0x190),_0x46cba5(0x77)),updateSetting('telegramEnabled',!![]),await sendTelegram(_0x4de8f2[_0x46cba5(0x216)]['id'],_0x46cba5(0x188));}),tgBot['action'](_0x5d3d6b(0x1ab),async _0x4cd5d7=>{const _0x245f99=_0x5d3d6b;_0x4cd5d7[_0x245f99(0x237)](),updateSetting('telegramEvents',_0x245f99(0x1e2)),updateSetting(_0x245f99(0x245),!![]),await sendTelegram(_0x4cd5d7[_0x245f99(0x216)]['id'],_0x245f99(0x221));}),tgBot['action'](_0x5d3d6b(0x1dc),async _0x522e7b=>{const _0x5dea4d=_0x5d3d6b;_0x522e7b['editMessageReplyMarkup'](),updateSetting(_0x5dea4d(0x190),'all'),updateSetting(_0x5dea4d(0x245),!![]),await sendTelegram(_0x522e7b[_0x5dea4d(0x216)]['id'],_0x5dea4d(0x157));}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x164),async _0x90b631=>{const _0x477d9b=_0x5d3d6b,_0x82edb5=getBotsWithMode();let _0x354779='<b>Balance\x20Bot\x20Status:</b>\x0a';config[_0x477d9b(0x83)](_0x38705e=>{const _0x437d4c=_0x477d9b,_0x287eb6=_0x82edb5[_0x437d4c(0x125)](_0xe2a99b=>_0xe2a99b[_0x437d4c(0x1a3)]==_0x38705e[_0x437d4c(0x1a3)])[_0x437d4c(0x116)];_0x354779+=_0x437d4c(0xa3)+_0x38705e['botID']+':\x20'+_0x38705e['status']+'\x20|\x20'+_0x287eb6+'\x20|\x20'+_0x38705e[_0x437d4c(0xb0)]+'\x0a';}),_0x354779+='\x0a',_0x354779+=_0x477d9b(0x24d),_0x354779+=!settings['telegramEnabled']?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x354779+=settings[_0x477d9b(0x245)]?settings[_0x477d9b(0x190)]==_0x477d9b(0x115)?_0x477d9b(0xe5):'Notifications\x20types:\x20'+settings['telegramEvents']+_0x477d9b(0x210):'',await sendTelegram(_0x90b631[_0x477d9b(0x216)]['id'],_0x354779,{'parse_mode':_0x477d9b(0x152)});}),tgBot[_0x5d3d6b(0x18b)]('restart',async _0xb9028=>{const _0x53d51f=_0x5d3d6b,_0x461e5a=getEnabledBots();if(_0x461e5a[_0x53d51f(0x166)]==0x0)await sendTelegram(_0xb9028[_0x53d51f(0x216)]['id'],_0x53d51f(0x256));else{if(_0x461e5a[_0x53d51f(0x166)]>0x1)_0x461e5a[_0x53d51f(0x231)]({'botID':'all'});let _0x403e74=[],_0x1f22f8=[];const _0x4efb7c=_0x461e5a['length']%0x4==0x0||_0x461e5a[_0x53d51f(0x166)]%0x4==0x3||_0x461e5a[_0x53d51f(0x166)]%0x3==0x1?0x4:0x3;let _0xfbbfe9=0x0;_0x461e5a['forEach']((_0x566650,_0x585f40)=>{const _0x4604de=_0x53d51f;if(_0x585f40%_0x4efb7c==0x0)_0x1f22f8=[];_0x1f22f8[_0x4604de(0x231)](Markup[_0x4604de(0x143)][_0x4604de(0xc3)](_0x566650[_0x4604de(0x1a3)]==_0x4604de(0x115)?_0x4604de(0x1a0):_0x4604de(0xa3)+_0x566650['botID'],_0x4604de(0xe4)+_0x566650[_0x4604de(0x1a3)])),_0x585f40%_0x4efb7c==0x0&&(_0x403e74[_0xfbbfe9]=_0x1f22f8,_0xfbbfe9++);});const _0x3876c5=Markup[_0x53d51f(0x1ec)](_0x403e74);_0xb9028['reply'](_0x53d51f(0xcd),_0x3876c5);}}),tgBot[_0x5d3d6b(0xc4)](/restart_(.+)/,async _0x53f4b2=>{const _0xa6f00f=_0x5d3d6b,_0x40d6d9=_0x53f4b2[_0xa6f00f(0x9b)][0x1];_0x53f4b2[_0xa6f00f(0x237)](),_0x40d6d9==_0xa6f00f(0x115)?config[_0xa6f00f(0x83)](_0x46ef45=>{restartBot(_0x46ef45['botID']);}):restartBot(_0x40d6d9);}),tgBot[_0x5d3d6b(0x18b)]('on',async _0x21bf9b=>{const _0xbc6b33=_0x5d3d6b,_0x59498c=getDisabledBots();if(_0x59498c[_0xbc6b33(0x166)]==0x0)await sendTelegram(_0x21bf9b[_0xbc6b33(0x216)]['id'],_0xbc6b33(0x1e6));else{if(_0x59498c[_0xbc6b33(0x166)]>0x1)_0x59498c[_0xbc6b33(0x231)]({'botID':_0xbc6b33(0x115)});let _0x5b3e8c=[],_0x239a28=[];const _0x41db67=_0x59498c[_0xbc6b33(0x166)]%0x4==0x0||_0x59498c[_0xbc6b33(0x166)]%0x4==0x3||_0x59498c['length']%0x3==0x1?0x4:0x3;let _0x666061=0x0;_0x59498c['forEach']((_0xae407e,_0x41bdde)=>{const _0x3a5605=_0xbc6b33;if(_0x41bdde%_0x41db67==0x0)_0x239a28=[];_0x239a28[_0x3a5605(0x231)](Markup[_0x3a5605(0x143)]['callback'](_0xae407e[_0x3a5605(0x1a3)]==_0x3a5605(0x115)?'All\x20bots':'Bot\x20'+_0xae407e[_0x3a5605(0x1a3)],_0x3a5605(0x78)+_0xae407e['botID'])),_0x41bdde%_0x41db67==0x0&&(_0x5b3e8c[_0x666061]=_0x239a28,_0x666061++);});const _0xf36f42=Markup['inlineKeyboard'](_0x5b3e8c);_0x21bf9b[_0xbc6b33(0x8c)](_0xbc6b33(0x92),_0xf36f42);}}),tgBot['action'](/on_(.+)/,async _0x57b1c0=>{const _0xd482ef=_0x5d3d6b,_0x5a2ad5=_0x57b1c0['match'][0x1];_0x57b1c0[_0xd482ef(0x237)]();if(_0x5a2ad5=='all'){const _0x37b08e=getDisabledBots();await sendTelegram(_0x57b1c0['chat']['id'],_0xd482ef(0x76)),_0x37b08e[_0xd482ef(0x83)](_0x1d228d=>{const _0x15f5a5=_0xd482ef;if(_0x1d228d[_0x15f5a5(0x1a3)]!=_0x15f5a5(0x115))toggleBot(_0x1d228d['botID'],toggleStatus(_0x1d228d[_0x15f5a5(0x1a3)]),_0x15f5a5(0x128));});}else await sendTelegram(_0x57b1c0[_0xd482ef(0x216)]['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x5a2ad5),toggleBot(_0x5a2ad5,toggleStatus(_0x5a2ad5),_0xd482ef(0x128));}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x184),async _0x173000=>{const _0x2ea032=_0x5d3d6b,_0x429186=getEnabledBots();if(_0x429186[_0x2ea032(0x166)]==0x0)await sendTelegram(_0x173000[_0x2ea032(0x216)]['id'],_0x2ea032(0x256));else{if(_0x429186[_0x2ea032(0x166)]>0x1)_0x429186['push']({'botID':_0x2ea032(0x115)});let _0x50641e=[],_0x175698=[];const _0x556c79=_0x429186[_0x2ea032(0x166)]%0x4==0x0||_0x429186[_0x2ea032(0x166)]%0x4==0x3||_0x429186[_0x2ea032(0x166)]%0x3==0x1?0x4:0x3;let _0x231ea7=0x0;_0x429186[_0x2ea032(0x83)]((_0x23e8b8,_0x3bd85d)=>{const _0x208ed5=_0x2ea032;if(_0x3bd85d%_0x556c79==0x0)_0x175698=[];_0x175698[_0x208ed5(0x231)](Markup[_0x208ed5(0x143)][_0x208ed5(0xc3)](_0x23e8b8[_0x208ed5(0x1a3)]==_0x208ed5(0x115)?'All\x20bots':_0x208ed5(0xa3)+_0x23e8b8[_0x208ed5(0x1a3)],'off_'+_0x23e8b8[_0x208ed5(0x1a3)])),_0x3bd85d%_0x556c79==0x0&&(_0x50641e[_0x231ea7]=_0x175698,_0x231ea7++);});const _0xeb9155=Markup[_0x2ea032(0x1ec)](_0x50641e);_0x173000[_0x2ea032(0x8c)](_0x2ea032(0x22e),_0xeb9155);}}),tgBot[_0x5d3d6b(0xc4)](/off_(.+)/,async _0x92bfeb=>{const _0x3d7241=_0x5d3d6b,_0x517a61=_0x92bfeb[_0x3d7241(0x9b)][0x1];_0x92bfeb['editMessageReplyMarkup']();if(_0x517a61=='all'){const _0x15bbda=getEnabledBots();await sendTelegram(_0x92bfeb[_0x3d7241(0x216)]['id'],'Bot\x20Mgr\x20>\x20stopping\x20all\x20bots'),_0x15bbda[_0x3d7241(0x83)](_0x4643cc=>{const _0x510d3b=_0x3d7241;if(_0x4643cc[_0x510d3b(0x1a3)]!=_0x510d3b(0x115))toggleBot(_0x4643cc[_0x510d3b(0x1a3)],toggleStatus(_0x4643cc[_0x510d3b(0x1a3)]),_0x510d3b(0x128));});}else await sendTelegram(_0x92bfeb[_0x3d7241(0x216)]['id'],_0x3d7241(0x241)+_0x517a61),toggleBot(_0x517a61,toggleStatus(_0x517a61),_0x3d7241(0x128));}),tgBot[_0x5d3d6b(0x18b)]('metrics',async _0x3e49cd=>{const _0x11631e=_0x5d3d6b,_0x1a7694=getEnabledBots();if(_0x1a7694[_0x11631e(0x166)]==0x0)await sendTelegram(_0x3e49cd[_0x11631e(0x216)]['id'],_0x11631e(0x256));else{if(_0x1a7694[_0x11631e(0x166)]>0x1){let _0xf7b93e=[],_0x68e5a4=[];const _0x5b023d=_0x1a7694[_0x11631e(0x166)]%0x4==0x0||_0x1a7694['length']%0x4==0x3||_0x1a7694[_0x11631e(0x166)]%0x3==0x1?0x4:0x3;let _0x50e67d=0x0;_0x1a7694['forEach']((_0x4bc44b,_0x3289c3)=>{const _0x1528cb=_0x11631e;if(_0x3289c3%_0x5b023d==0x0)_0x68e5a4=[];_0x68e5a4[_0x1528cb(0x231)](Markup['button'][_0x1528cb(0xc3)](_0x1528cb(0xa3)+_0x4bc44b['botID'],_0x1528cb(0x17a)+_0x4bc44b[_0x1528cb(0x1a3)])),_0x3289c3%_0x5b023d==0x0&&(_0xf7b93e[_0x50e67d]=_0x68e5a4,_0x50e67d++);});const _0x47c339=Markup[_0x11631e(0x1ec)](_0xf7b93e);_0x3e49cd[_0x11631e(0x8c)]('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?',_0x47c339);}else{const _0x1ff3ca=_0x1a7694[0x0][_0x11631e(0x1a3)];if(pid[_0x1ff3ca])pid[_0x1ff3ca][_0x11631e(0x10c)]({'function':'sendMetricsTelegram','args':null});}}}),tgBot[_0x5d3d6b(0xc4)](/metrics_(.+)/,async _0x234260=>{const _0x24ab21=_0x5d3d6b,_0x381966=_0x234260[_0x24ab21(0x9b)][0x1];_0x234260[_0x24ab21(0x237)]();if(pid[_0x381966])pid[_0x381966][_0x24ab21(0x10c)]({'function':'sendMetricsTelegram','args':null});}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x222),async _0x1b00d8=>{const _0x38d5e6=_0x5d3d6b,_0x1e75e1=getEnabledBots();if(_0x1e75e1['length']==0x0)await sendTelegram(_0x1b00d8[_0x38d5e6(0x216)]['id'],_0x38d5e6(0x256));else{if(_0x1e75e1['length']>0x1){let _0x18de42=[],_0x20c413=[];const _0x25a9a0=_0x1e75e1[_0x38d5e6(0x166)]%0x4==0x0||_0x1e75e1['length']%0x4==0x3||_0x1e75e1['length']%0x3==0x1?0x4:0x3;let _0x3015b4=0x0;_0x1e75e1[_0x38d5e6(0x83)]((_0x355da8,_0x25b91b)=>{const _0x28ac4c=_0x38d5e6;if(_0x25b91b%_0x25a9a0==0x0)_0x20c413=[];_0x20c413[_0x28ac4c(0x231)](Markup['button'][_0x28ac4c(0xc3)](_0x28ac4c(0xa3)+_0x355da8[_0x28ac4c(0x1a3)],_0x28ac4c(0x263)+_0x355da8[_0x28ac4c(0x1a3)])),_0x25b91b%_0x25a9a0==0x0&&(_0x18de42[_0x3015b4]=_0x20c413,_0x3015b4++);});const _0x4a6a06=Markup[_0x38d5e6(0x1ec)](_0x18de42);_0x1b00d8[_0x38d5e6(0x8c)](_0x38d5e6(0xc1),_0x4a6a06);}else{const _0x2d91ca=_0x1e75e1[0x0][_0x38d5e6(0x1a3)];if(pid[_0x2d91ca])pid[_0x2d91ca][_0x38d5e6(0x10c)]({'function':_0x38d5e6(0x1e9),'args':null});}}}),tgBot[_0x5d3d6b(0xc4)](/portfolio_(.+)/,async _0x2da502=>{const _0x11a53e=_0x5d3d6b,_0x4496ff=_0x2da502['match'][0x1];_0x2da502['editMessageReplyMarkup']();if(pid[_0x4496ff])pid[_0x4496ff][_0x11a53e(0x10c)]({'function':_0x11a53e(0x1e9),'args':null});}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x214),async _0xed6b7c=>{const _0x57287b=_0x5d3d6b;await getMessages();if(!updateAvailable)await sendTelegram(_0xed6b7c[_0x57287b(0x216)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0xed6b7c[_0x57287b(0x216)]['id'],_0x57287b(0x140));else{const _0x3d3611=Markup[_0x57287b(0x1ec)]([Markup[_0x57287b(0x143)][_0x57287b(0xc3)](_0x57287b(0x1f5),_0x57287b(0x1fa)),Markup[_0x57287b(0x143)][_0x57287b(0xc3)]('No',_0x57287b(0x15d))]);_0xed6b7c[_0x57287b(0x8c)](_0x57287b(0x1bb),_0x3d3611);}}}),tgBot['action'](/update_(.+)/,async _0x23b660=>{const _0x4b0e54=_0x5d3d6b,_0x5ac0ac=_0x23b660['match'][0x1];_0x23b660[_0x4b0e54(0x237)](),_0x5ac0ac=='yes'&&(await sendTelegram(_0x23b660[_0x4b0e54(0x216)]['id'],_0x4b0e54(0xd9)),updateBB(_0x4b0e54(0x214))),_0x5ac0ac=='no'&&await sendTelegram(_0x23b660[_0x4b0e54(0x216)]['id'],_0x4b0e54(0x137));}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x109),async _0xfdf5d2=>{const _0x173aac=_0x5d3d6b;if(!validInstallation)await sendTelegram(_0xfdf5d2[_0x173aac(0x216)]['id'],_0x173aac(0x148));else{const _0x438082=Markup[_0x173aac(0x1ec)]([Markup[_0x173aac(0x143)][_0x173aac(0xc3)](_0x173aac(0x1f5),_0x173aac(0x1c3)),Markup[_0x173aac(0x143)]['callback']('No',_0x173aac(0x1ac))]);_0xfdf5d2[_0x173aac(0x8c)]('Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?',_0x438082);}}),tgBot['action'](/reinstall_(.+)/,async _0x4d317a=>{const _0x592f85=_0x5d3d6b,_0x2b4c15=_0x4d317a[_0x592f85(0x9b)][0x1];_0x4d317a[_0x592f85(0x237)](),_0x2b4c15==_0x592f85(0x225)&&(await sendTelegram(_0x4d317a[_0x592f85(0x216)]['id'],_0x592f85(0x16f)),updateBB(_0x592f85(0x109))),_0x2b4c15=='no'&&await sendTelegram(_0x4d317a[_0x592f85(0x216)]['id'],_0x592f85(0x18d));}),tgBot[_0x5d3d6b(0x18b)]('toggle',async _0x999c5a=>{const _0x2cba2e=_0x5d3d6b,_0x57ff65=getBotsWithMode();if(_0x57ff65[_0x2cba2e(0x166)]==0x0)await sendTelegram(_0x999c5a['chat']['id'],_0x2cba2e(0x256));else{let _0x209ed7=[],_0x270a7f=[];const _0x35fd64=0x2;let _0xaa9146=0x0;_0x57ff65['forEach']((_0x43a48d,_0x541547)=>{const _0xdc3e0d=_0x2cba2e;if(_0x541547%_0x35fd64==0x0)_0x270a7f=[];_0x270a7f[_0xdc3e0d(0x231)](Markup[_0xdc3e0d(0x143)][_0xdc3e0d(0xc3)](_0xdc3e0d(0xa3)+_0x43a48d[_0xdc3e0d(0x1a3)]+'\x20('+_0x43a48d[_0xdc3e0d(0x116)]+')',_0xdc3e0d(0x119)+_0x43a48d[_0xdc3e0d(0x1a3)])),_0x541547%_0x35fd64==0x0&&(_0x209ed7[_0xaa9146]=_0x270a7f,_0xaa9146++);});const _0x4fd867=Markup[_0x2cba2e(0x1ec)](_0x209ed7);_0x999c5a[_0x2cba2e(0x8c)]('Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?',_0x4fd867);}}),tgBot['action'](/toggle_(.+)/,async _0x4c57b7=>{const _0x52814d=_0x5d3d6b,_0x1849b4=_0x4c57b7['match'][0x1];_0x4c57b7[_0x52814d(0x237)]();const _0x4bcbd5=getBotsWithMode(),_0x18c7d1=_0x4bcbd5[_0x52814d(0x125)](_0x354b01=>_0x354b01['botID']==_0x1849b4),_0x580f80=_0x18c7d1[_0x52814d(0x116)]==_0x52814d(0xc6)?_0x52814d(0x72):_0x52814d(0xc6);await sendTelegram(_0x4c57b7['chat']['id'],_0x52814d(0xcc)+_0x1849b4+_0x52814d(0x11d)+_0x580f80+_0x52814d(0x25f)),toggleBotMode(_0x1849b4);}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x113),async _0xdba4d=>{const _0x3c9be0=_0x5d3d6b;let _0x107a4e='';config[_0x3c9be0(0x83)](_0x3d209e=>{const _0x5d5b90=_0x3c9be0;_0x107a4e+=_0x5d5b90(0xa3)+_0x3d209e[_0x5d5b90(0x1a3)]+':\x20'+_0x3d209e[_0x5d5b90(0xdc)]+'\x0a';}),await sendTelegram(_0xdba4d['chat']['id'],_0x107a4e,{'parse_mode':_0x3c9be0(0x152)});}),tgBot[_0x5d3d6b(0x18b)](_0x5d3d6b(0x90),async _0x2e1bf8=>{const _0x16d677=_0x5d3d6b;await sendTelegram(_0x2e1bf8[_0x16d677(0x216)]['id'],_0x2d3320);}),process[_0x5d3d6b(0x20b)](_0x5d3d6b(0x12a),()=>tgBot[_0x5d3d6b(0x1d3)](_0x5d3d6b(0x12a))),process[_0x5d3d6b(0x20b)](_0x5d3d6b(0x16e),()=>tgBot[_0x5d3d6b(0x1d3)](_0x5d3d6b(0x16e))),tgBot[_0x5d3d6b(0x244)]();}}function disableTelegram(){const _0x21feae=_0x248fcd;tgBot&&tgBot[_0x21feae(0x1d3)]();}async function sendTelegram(_0x287544,_0x231fe2,_0x2db6f8){const _0x22ab40=_0x248fcd;try{await tgBot[_0x22ab40(0xc2)][_0x22ab40(0x215)](_0x287544,_0x231fe2,_0x2db6f8);}catch(_0x3424fe){console[_0x22ab40(0x150)](_0x22ab40(0xab),_0x3424fe);}}async function sendTelegramBot(_0x1d9fe9,_0x596caa){const _0x3bad83=_0x248fcd;if(settings[_0x3bad83(0x245)]){if(settings[_0x3bad83(0x190)]==_0x3bad83(0x115)||(_0x596caa[_0x3bad83(0x23f)]=='error'||_0x596caa[_0x3bad83(0x23f)]==_0x3bad83(0x105)||_0x596caa['type']=='success')&&settings['telegramEvents']=='alerts'||_0x596caa[_0x3bad83(0x23f)]==_0x3bad83(0x223)&&settings['telegramEvents']=='orders'){if(tgBot&&settings[_0x3bad83(0xca)]){if(_0x596caa[_0x3bad83(0x1e3)])await sendTelegram(settings['telegramChatId'],_0x596caa[_0x3bad83(0xdc)]+_0x3bad83(0x211)+_0x596caa['event']);else await sendTelegram(settings['telegramChatId'],'Bot\x20'+_0x1d9fe9+_0x3bad83(0x211)+_0x596caa['event']);}}}}async function sendTelegramMsg(_0x2f712c,_0x3429b6='HTML'){const _0x55f8bf=_0x248fcd;return settings['telegramEnabled']&&tgBot&&settings[_0x55f8bf(0xca)]?(await sendTelegram(settings[_0x55f8bf(0xca)],_0x2f712c,{'parse_mode':_0x3429b6}),!![]):![];}function getDeviceWithIp(_0x482a35){return devices['find'](_0x15e47a=>_0x15e47a['ip']===_0x482a35);}async function temporaryAccess2FA(_0x552f36,_0x435e83){const _0xfe0e47=_0x248fcd;let _0x591619=new Date(),_0x23f3eb=![];if(lastIpApproval){if(_0x591619-lastIpApproval<0x1388)_0x23f3eb=!![];}lastIpApproval=new Date();if(_0x23f3eb)return;if(tgBot&&settings['telegramChatId']){const _0x58e250=Markup['inlineKeyboard']([Markup[_0xfe0e47(0x143)]['callback']('5\x20min',_0xfe0e47(0xba)),Markup[_0xfe0e47(0x143)][_0xfe0e47(0xc3)](_0xfe0e47(0x252),'tempaccess_15'),Markup[_0xfe0e47(0x143)]['callback'](_0xfe0e47(0x204),_0xfe0e47(0x14d)),Markup['button']['callback'](_0xfe0e47(0x1dd),'tempaccess_reject')]);await sendTelegram(settings[_0xfe0e47(0xca)],'Allow\x20temporary\x20access\x20from\x20IP\x20address\x20'+normalizeIP(_0x435e83)[_0xfe0e47(0x1e8)]+'\x20?',_0x58e250),tgBot['action'](/tempaccess_(.+)/,async _0x46e9e0=>{const _0x350527=_0xfe0e47,_0x492531=_0x46e9e0[_0x350527(0x9b)][0x1];_0x46e9e0[_0x350527(0x237)](),devices[_0x552f36][_0x350527(0x7d)]={'clientip':_0x435e83,'timestamp':new Date()['getTime'](),'expiry':_0x492531},_0x492531!=_0x350527(0x1dd)?(await sendTelegram(_0x46e9e0[_0x350527(0x216)]['id'],_0x350527(0x20e)+_0x492531+_0x350527(0x18a),{'parse_mode':_0x350527(0x152)}),io['to'](_0x552f36)[_0x350527(0x17d)](_0x350527(0x164),{'access':{'allow':![],'reason':_0x350527(0x1fc),'token':null}})):(await sendTelegram(_0x46e9e0[_0x350527(0x216)]['id'],'Temporary\x20access\x20rejected'),io['to'](_0x552f36)[_0x350527(0x17d)]('status',{'access':{'allow':![],'reason':_0x350527(0xf6),'token':null}}));});}}async function loginAccess2FA(_0x538718,_0x3e5618){const _0x43cae6=_0x248fcd;if(tgBot&&settings[_0x43cae6(0xca)]){const _0x3308e8=Markup[_0x43cae6(0x1ec)]([Markup[_0x43cae6(0x143)][_0x43cae6(0xc3)](_0x43cae6(0x208),_0x43cae6(0xf8)+loginExpiry),Markup['button'][_0x43cae6(0xc3)](_0x43cae6(0x1dd),'login2fa_reject')]);await sendTelegram(settings[_0x43cae6(0xca)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x3e5618)['show']+'\x20?',_0x3308e8),tgBot['action'](/login2fa_(.+)/,async _0x151b5e=>{const _0x2e03f9=_0x43cae6,_0x56e51d=_0x151b5e[_0x2e03f9(0x9b)][0x1];_0x151b5e[_0x2e03f9(0x237)](),devices[_0x538718][_0x2e03f9(0x1b6)]={'clientip':_0x3e5618,'timestamp':new Date()['getTime'](),'expiry':_0x56e51d},_0x56e51d!='reject'?(await sendTelegram(_0x151b5e[_0x2e03f9(0x216)]['id'],_0x2e03f9(0x1a6),{'parse_mode':'HTML'}),io['to'](_0x538718)[_0x2e03f9(0x17d)](_0x2e03f9(0x164),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x151b5e['chat']['id'],_0x2e03f9(0x21a)),io['to'](_0x538718)[_0x2e03f9(0x17d)]('status',{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x3df3bc=_0x248fcd;return dbConfig[_0x3df3bc(0x145)](_0x3df3bc(0xfa))[_0x3df3bc(0x183)]('botID')[_0x3df3bc(0x8b)]({'status':_0x3df3bc(0xec)})[_0x3df3bc(0x11f)]()||[];}function getDisabledBots(){const _0x5e83d9=_0x248fcd;return dbConfig[_0x5e83d9(0x145)]('bots')[_0x5e83d9(0x183)]('botID')[_0x5e83d9(0x8b)]({'status':_0x5e83d9(0xfd)})[_0x5e83d9(0x11f)]()||[];}function getBotAttributes(_0x5b79dc){const _0x420b02=_0x248fcd;let _0x44a07b={};const _0x3e7729=configpath+'bot-'+_0x5b79dc+_0x420b02(0x108),_0x62ccdd=fs[_0x420b02(0x1d4)](_0x3e7729);if(_0x62ccdd){const _0x46fa11=fs[_0x420b02(0x17c)](_0x3e7729);try{const _0x5d224d=JSON[_0x420b02(0x25a)](_0x46fa11),_0x11356d=_0x5d224d?_0x5d224d[_0x420b02(0x1b9)][0x0][_0x420b02(0x20c)]:![];_0x44a07b[_0x420b02(0x116)]=_0x11356d?'auto':_0x420b02(0x72),_0x44a07b[_0x420b02(0xdc)]=_0x5d224d?_0x5d224d['bot'][0x0][_0x420b02(0xdc)]:'Bot\x20'+_0x5b79dc;}catch(_0x404fdd){_0x44a07b[_0x420b02(0x116)]=_0x420b02(0x72),_0x44a07b[_0x420b02(0xdc)]=_0x420b02(0xa3)+_0x5b79dc;}}else _0x44a07b[_0x420b02(0x116)]=_0x420b02(0x72),_0x44a07b[_0x420b02(0xdc)]='Bot\x20'+_0x5b79dc;return _0x44a07b;}function getBotsWithMode(){const _0x19a329=_0x248fcd,_0x3985f0=dbConfig[_0x19a329(0x145)](_0x19a329(0xfa))[_0x19a329(0x183)](_0x19a329(0x1a3))[_0x19a329(0x11f)]()||[];return _0x3985f0[_0x19a329(0x83)](_0x4ffed4=>{const _0x3dacc7=_0x19a329;let _0x51c682=getBotAttributes(_0x4ffed4[_0x3dacc7(0x1a3)]);_0x4ffed4[_0x3dacc7(0x116)]=_0x51c682[_0x3dacc7(0x116)];}),_0x3985f0;}function getBotExchanges(){const _0x50727b=_0x248fcd;let _0xfff8d9=[];const _0x286b19=dbConfig[_0x50727b(0x145)](_0x50727b(0xfa))['sortBy']('botID')[_0x50727b(0x11f)]()||[];_0x286b19[_0x50727b(0x83)](_0x57f426=>{const _0x5941e7=_0x50727b;if(_0x57f426[_0x5941e7(0x164)]=='enabled'){const _0x208470=configpath+_0x5941e7(0xa2)+_0x57f426['botID']+_0x5941e7(0x108),_0x48baa0=fs[_0x5941e7(0x1d4)](_0x208470);let _0x18038e;if(_0x48baa0){const _0xd00f3c=fs[_0x5941e7(0x17c)](_0x208470);try{const _0x1c892e=JSON[_0x5941e7(0x25a)](_0xd00f3c);_0x18038e=_0x1c892e?_0x1c892e[_0x5941e7(0x1b9)][0x0]['exchange']:null;}catch(_0x3ecd6f){}}if(_0x18038e)_0xfff8d9[_0x5941e7(0x231)](_0x18038e);}});const _0x26a8fb=[...new Set(_0xfff8d9)][_0x50727b(0x1ce)]();return _0x26a8fb;}async function initUser(){const _0x373237=_0x248fcd;if(!settings['userid']){const _0x3451e1=uuidRandom();mixpanel[_0x373237(0x17e)](_0x3451e1),updateSetting(_0x373237(0x162),_0x3451e1);}}async function initSecure(){const _0x214f62=_0x248fcd;let _0x1e49ea=getSecure();if(!_0x1e49ea['hasOwnProperty'](_0x214f62(0x187))){let _0x5e4be8=await generateKeys();_0x1e49ea[_0x214f62(0x25e)]=_0x5e4be8[_0x214f62(0x25e)],_0x1e49ea[_0x214f62(0x139)]=_0x5e4be8[_0x214f62(0x139)],_0x1e49ea[_0x214f62(0x187)]=crypto[_0x214f62(0xda)](0x20)[_0x214f62(0x1d7)]('hex');;storeSecure(_0x1e49ea);}}function getSettings(){const _0x292ac=_0x248fcd;return dbSettings[_0x292ac(0x145)](_0x292ac(0xf7))[_0x292ac(0x11f)]()||{};}function getSecure(){const _0x31aa0d=_0x248fcd;return dbSecure[_0x31aa0d(0x145)](_0x31aa0d(0xa5))[_0x31aa0d(0x11f)]()||{};}function getBlacklist(){const _0x1a2e94=_0x248fcd;return dbSecure['get'](_0x1a2e94(0x82))[_0x1a2e94(0x11f)]()||[];}function broadcastToBots(_0x464e31,_0x4b3047){const _0x441270=_0x248fcd;config[_0x441270(0x83)](_0x451c63=>{const _0xedba9f=_0x441270;if(_0x451c63[_0xedba9f(0x164)]==_0xedba9f(0xec)&&_0x451c63[_0xedba9f(0xb0)]==_0xedba9f(0x1bd)||_0x451c63[_0xedba9f(0x164)]==_0xedba9f(0x122)&&_0x451c63[_0xedba9f(0xb0)]=='running'){if(pid[_0x451c63[_0xedba9f(0x1a3)]])pid[_0x451c63[_0xedba9f(0x1a3)]][_0xedba9f(0x10c)]({[_0x464e31]:_0x4b3047});}});}function storeSettings(_0x1de0fd,_0x3859d2=![]){const _0x596b52=_0x248fcd;_0x1de0fd={...settings,..._0x1de0fd};if(_0x3859d2&&_0x1de0fd['bbPassword']!=_0x596b52(0x236)&&_0x1de0fd[_0x596b52(0x8e)]!='***'&&_0x1de0fd[_0x596b52(0x8e)]!=''){const _0x5bc45e=crypt[_0x596b52(0x171)](secure[_0x596b52(0x139)],_0x1de0fd['bbPassword'])[_0x596b52(0x10a)][_0x596b52(0x212)]('@')[0x0],_0x841233=bcrypt['hashSync'](_0x5bc45e,saltRounds);_0x1de0fd={..._0x1de0fd,'bbPassword':_0x841233};}if(_0x3859d2&&_0x1de0fd[_0x596b52(0x1ae)]!=_0x596b52(0x236)&&_0x1de0fd[_0x596b52(0x1ae)]!=_0x596b52(0x19c)&&_0x1de0fd[_0x596b52(0x1ae)]!=''){const _0x23e1a1=crypt['decrypt'](secure[_0x596b52(0x139)],_0x1de0fd[_0x596b52(0x1ae)])[_0x596b52(0x10a)][_0x596b52(0x212)]('@')[0x0];_0x1de0fd={..._0x1de0fd,'telegramToken':_0x23e1a1};}const _0x3dda55=_0x1de0fd[_0x596b52(0x1ae)]!='************'&&_0x1de0fd[_0x596b52(0x1ae)]!=settings[_0x596b52(0x1ae)]||_0x1de0fd[_0x596b52(0x22a)]!=settings[_0x596b52(0x22a)],_0x3c9ac6=_0x1de0fd[_0x596b52(0x1ae)]==''||_0x1de0fd[_0x596b52(0x22a)]=='';_0x3dda55&&(_0x1de0fd['telegramChatId']=null,_0x1de0fd['telegramEvents']='all');for(const [_0x1549e1,_0xacee7a]of Object['entries'](_0x1de0fd)){if(_0x1549e1==_0x596b52(0x1ae)&&_0xacee7a==_0x596b52(0x236)){_0x1de0fd['telegramToken']=settings[_0x596b52(0x1ae)];continue;};if(_0x1549e1==_0x596b52(0x8e)&&_0xacee7a=='************'){_0x1de0fd[_0x596b52(0x8e)]=settings[_0x596b52(0x8e)];continue;};dbSettings[_0x596b52(0xde)](_0x596b52(0xb1)+_0x1549e1,_0xacee7a)[_0x596b52(0x1a5)]();}settings=_0x1de0fd,io['to']('botmanager')[_0x596b52(0x17d)]('settings',cleanSettings()),broadcastToBots('timeshift',settings[_0x596b52(0x167)]),broadcastToBots(_0x596b52(0x7f),settings[_0x596b52(0x7f)]);if(_0x3dda55&&!_0x3c9ac6)initTelegram();if(_0x3dda55&&_0x3c9ac6)disableTelegram();getAllClients()[_0x596b52(0x83)](_0x2e0447=>{const _0x3f42a6=_0x596b52;getSocket(_0x2e0447['id'])['emit']('status',{'access':{'allow':![],'reason':_0x3f42a6(0x1fc),'token':null}});});}function updateSetting(_0x16f606,_0xba7f8e){const _0x25dfea=_0x248fcd;dbSettings['set'](_0x25dfea(0xb1)+_0x16f606,_0xba7f8e)[_0x25dfea(0x1a5)](),settings=getSettings(),io['to'](_0x25dfea(0x18e))[_0x25dfea(0x17d)](_0x25dfea(0xf7),cleanSettings());}function storeSecure(_0x536a28){const _0x5d0cca=_0x248fcd;dbSecure[_0x5d0cca(0x145)](_0x5d0cca(0xa5))[_0x5d0cca(0x231)](_0x536a28)[_0x5d0cca(0x1a5)](),secure=_0x536a28;}function addBlacklist(_0x8204dd){const _0x470647=_0x248fcd;cleanBlacklist();let _0x411dee;devices[_0x8204dd][_0x470647(0x7d)]?_0x411dee=Math[_0x470647(0x102)](devices[_0x8204dd][_0x470647(0x7d)][_0x470647(0x8a)],loginExpiry):_0x411dee=loginExpiry,dbSecure[_0x470647(0x145)](_0x470647(0x82))['push']({'expiry':new Date()[_0x470647(0x1d0)]()+_0x411dee*0x3c*0x3e8,'token':devices[_0x8204dd][_0x470647(0x1cf)][_0x470647(0x19b)]})['write'](),blacklist=dbSecure[_0x470647(0x145)](_0x470647(0x82))[_0x470647(0x11f)]();}function cleanBlacklist(){const _0x47e718=_0x248fcd;let _0x1791d2=dbSecure['get'](_0x47e718(0x82))[_0x47e718(0xad)]()['value'](),_0x2b2353=new Date()['getTime']();_0x1791d2[_0x47e718(0x83)](_0xa10fa7=>{const _0x2016db=_0x47e718;_0xa10fa7['expiry']<_0x2b2353&&dbSecure['get'](_0x2016db(0x82))[_0x2016db(0x74)]({'expiry':_0xa10fa7[_0x2016db(0x8a)]})[_0x2016db(0x1a5)]();});}function initStates(){const _0x5704fe=_0x248fcd;let _0x411304=getConfiguration();_0x411304[_0x5704fe(0x83)](_0xdd7912=>{const _0x42b8ab=_0x5704fe;_0xdd7912['live']=_0x42b8ab(0x128);}),storeConfiguration(_0x411304);}function onKeys(){const _0x3b1293=new RSA();return new Promise(_0x103fac=>{const _0x42623b=_0x3c6f;_0x3b1293[_0x42623b(0x100)]()[_0x42623b(0x1fe)](_0x192d47=>{_0x103fac(_0x192d47);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1c45e7=_0x248fcd;let _0x47f2fb=getSettings(),_0x5316c1=![];!_0x47f2fb['hasOwnProperty'](_0x1c45e7(0x1c8))&&(_0x47f2fb[_0x1c45e7(0x1c8)]=0x0,_0x5316c1=!![]);!_0x47f2fb[_0x1c45e7(0x266)]('lastmsgemitted')&&(_0x47f2fb[_0x1c45e7(0x198)]=0x0,_0x5316c1=!![]);!_0x47f2fb['hasOwnProperty'](_0x1c45e7(0xa1))&&(_0x47f2fb[_0x1c45e7(0xa1)]='0.0.0',_0x5316c1=!![]);!_0x47f2fb[_0x1c45e7(0x266)]('onepagemode')&&(_0x47f2fb[_0x1c45e7(0x7f)]=![],_0x5316c1=!![]);if(_0x5316c1)storeSettings(_0x47f2fb);try{fs[_0x1c45e7(0x153)](configbackuppath,{'withFileTypes':!![]})['forEach'](_0x372fa5=>{const _0x392c25=_0x1c45e7;if(!_0x372fa5[_0x392c25(0xe2)]()){if(!_0x372fa5['name'][_0x392c25(0x1d9)](_0x392c25(0x1d5)))fs[_0x392c25(0x10d)](configbackuppath+_0x372fa5[_0x392c25(0xc8)]);}else fs['rmSync'](configbackuppath+_0x372fa5[_0x392c25(0xc8)],{'recursive':!![]});});}catch(_0x3b544f){logger[_0x1c45e7(0x144)](_0x1c45e7(0x99),_0x3b544f);}}function storeConfiguration(_0x1ffe63){const _0x3bc5d8=_0x248fcd;dbConfig['get'](_0x3bc5d8(0xfa))[_0x3bc5d8(0x74)]()[_0x3bc5d8(0x1a5)](),dbConfig['get']('bots')[_0x3bc5d8(0x231)](..._0x1ffe63)[_0x3bc5d8(0x1a5)](),config=_0x1ffe63;}async function resetPassword(){const _0x16a1eb=_0x248fcd;if(tgBot&&settings['telegramChatId']){const _0xc38888=Markup[_0x16a1eb(0x1ec)]([Markup[_0x16a1eb(0x143)]['callback']('yes',_0x16a1eb(0xfc)),Markup[_0x16a1eb(0x143)]['callback']('no',_0x16a1eb(0xa7))]);await sendTelegram(settings[_0x16a1eb(0xca)],_0x16a1eb(0x146),_0xc38888),tgBot[_0x16a1eb(0xc4)](/resetpw_(.+)/,async _0x121086=>{const _0x489722=_0x16a1eb,_0x51ef82=_0x121086['match'][0x1];_0x121086['editMessageReplyMarkup']();if(_0x51ef82!='no'){const _0x42c004=0xf,_0x1e3904=_0x489722(0x25d),_0x59ab69=Array[_0x489722(0x180)](crypto['randomFillSync'](new Uint32Array(_0x42c004)))[_0x489722(0x1d1)](_0xa637d2=>_0x1e3904[_0xa637d2%_0x1e3904[_0x489722(0x166)]])[_0x489722(0x174)](''),_0x13bbf1=bcrypt[_0x489722(0x240)](_0x59ab69,saltRounds);storeSettings({'bbPassword':_0x13bbf1}),await sendTelegram(_0x121086[_0x489722(0x216)]['id'],_0x489722(0x23d)+_0x59ab69,{'parse_mode':_0x489722(0x152)});}else await sendTelegram(_0x121086[_0x489722(0x216)]['id'],_0x489722(0xb9));});}}async function confirmRestore(_0x74de5c,_0x1a3db8){const _0x386b15=_0x248fcd;io['to'](_0x386b15(0x18e))[_0x386b15(0x17d)](_0x386b15(0x269),_0x386b15(0x24c),_0x386b15(0x165));if(tgBot&&settings[_0x386b15(0xca)]){const _0xf63586=Markup[_0x386b15(0x1ec)]([Markup[_0x386b15(0x143)]['callback'](_0x386b15(0x225),_0x386b15(0x17f)),Markup[_0x386b15(0x143)]['callback']('no',_0x386b15(0x96))]);await sendTelegram(settings[_0x386b15(0xca)],'Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)',_0xf63586),tgBot[_0x386b15(0xc4)](/restore_(.+)/,async _0x4136e9=>{const _0x4d0c16=_0x386b15,_0x7df5f0=_0x4136e9[_0x4d0c16(0x9b)][0x1];_0x4136e9[_0x4d0c16(0x237)](),_0x7df5f0=='yes'?(logger[_0x4d0c16(0x144)](_0x4d0c16(0x189)),await sendTelegram(_0x4136e9[_0x4d0c16(0x216)]['id'],'Restoring\x20bot(s)\x20from\x20backup',{'parse_mode':_0x4d0c16(0x152)}),unzipFile(_0x74de5c,_0x1a3db8)):(logger[_0x4d0c16(0x144)]('Restore\x20process\x20aborted'),await sendTelegram(_0x4136e9['chat']['id'],_0x4d0c16(0x257)));});}}function getServerTime(){const _0x2244e3=_0x248fcd,_0x1f5bbc=new Date();return _0x1f5bbc[_0x2244e3(0x159)]()+'/'+(_0x1f5bbc['getMonth']()+0x1)['toString']()[_0x2244e3(0x9d)](0x2,'0')+'/'+_0x1f5bbc[_0x2244e3(0x24f)]()['toString']()[_0x2244e3(0x9d)](0x2,'0')+'\x20'+_0x1f5bbc[_0x2244e3(0x79)]()['toString']()[_0x2244e3(0x9d)](0x2,'0')+':'+_0x1f5bbc[_0x2244e3(0x23a)]()[_0x2244e3(0x1d7)]()['padStart'](0x2,'0')+':'+_0x1f5bbc[_0x2244e3(0x93)]()[_0x2244e3(0x1d7)]()['padStart'](0x2,'0');}function getTimeStamp(){const _0x36807d=_0x248fcd,_0x2b2d98=shiftedTime();return _0x2b2d98[_0x36807d(0x159)]()+'/'+(_0x2b2d98[_0x36807d(0x16c)]()+0x1)[_0x36807d(0x1d7)]()[_0x36807d(0x9d)](0x2,'0')+'/'+_0x2b2d98[_0x36807d(0x24f)]()[_0x36807d(0x1d7)]()[_0x36807d(0x9d)](0x2,'0')+'\x20'+_0x2b2d98[_0x36807d(0x79)]()[_0x36807d(0x1d7)]()[_0x36807d(0x9d)](0x2,'0')+':'+_0x2b2d98[_0x36807d(0x23a)]()[_0x36807d(0x1d7)]()[_0x36807d(0x9d)](0x2,'0')+':'+_0x2b2d98[_0x36807d(0x93)]()[_0x36807d(0x1d7)]()[_0x36807d(0x9d)](0x2,'0');}function getCleanTimeStamp(){const _0x4daa2c=_0x248fcd,_0x4dc2ae=shiftedTime();return _0x4dc2ae[_0x4daa2c(0x159)]()+(_0x4dc2ae[_0x4daa2c(0x16c)]()+0x1)[_0x4daa2c(0x1d7)]()[_0x4daa2c(0x9d)](0x2,'0')+_0x4dc2ae[_0x4daa2c(0x24f)]()[_0x4daa2c(0x1d7)]()[_0x4daa2c(0x9d)](0x2,'0')+'-'+_0x4dc2ae['getHours']()[_0x4daa2c(0x1d7)]()[_0x4daa2c(0x9d)](0x2,'0')+_0x4dc2ae[_0x4daa2c(0x23a)]()['toString']()[_0x4daa2c(0x9d)](0x2,'0')+_0x4dc2ae[_0x4daa2c(0x93)]()[_0x4daa2c(0x1d7)]()[_0x4daa2c(0x9d)](0x2,'0');}function shiftedTime(){const _0x2652f7=_0x248fcd,_0xf7af8d=new Date();let _0x593a74=_0xf7af8d;if(settings[_0x2652f7(0x167)]&&settings['timeshift']!==0x0)_0x593a74=fns['add'](_0xf7af8d,{'hours':settings[_0x2652f7(0x167)]});return _0x593a74;}function startScheduler(){const _0x393bea=_0x248fcd,_0x14a59e=new Date()[_0x393bea(0x268)](),_0x51b6bc=shiftedTime()[_0x393bea(0x79)]();_0x51b6bc==0x4&&backupConfigFiles();_0x51b6bc==0x0&&rotateLogFiles();_0x14a59e%0x6==0x0&&triggerAnalytics();_0x14a59e%0x6==0x0&&getMessages();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}async function restoreBackupFile(_0x562166){const _0x5adcf6=_0x248fcd;logger['debug'](_0x5adcf6(0xfe)+_0x562166);const _0x4a9444=getBotsWithMode();_0x4a9444[_0x5adcf6(0x166)]>0x0?confirmRestore(configbackuppath,_0x562166):unzipFile(configbackuppath,_0x562166);}function _0x1986(){const _0x20b9a2=['=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','Logged\x20out\x20user\x20...','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','showConfig','output-000.log','button','debug','get','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','bbvNew','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','\x1b[34m','bb-secure.json','string','restore-backup-file','tempaccess_30','crypto','temp/','log','config/','HTML','readdirSync','Unauthorized\x20attempt\x20to\x20show\x20configuration','Starting\x20new\x20bot\x20|\x20Bot\x20','show-config','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','inherit','getFullYear','/restart\x20-\x20restart\x20bot(s)\x0a','Stopping\x20Bot\x20Manager\x20and\x20starting\x20update\x20process','get-logs','update_no','bbUsername','\x1b[31m','pidExpireLogin','All','userid','IPv4','status','success','length','timeshift','simple','2FA','build2','post','getMonth','listen','SIGTERM','Starting\x20Balance\x20Bot\x20reinstallation','backup','decrypt',',\x20must\x20be\x20a\x204\x20digit\x20number','disconnect','join','Bot\x20Mgr\x20>\x20','get-portfolio','apply','loginRequired','/status\x20-\x20show\x20bot(s)\x20status\x0a','metrics_','defaults','readFileSync','emit','alias','restore_yes','from','8lXHsUm','NTBA_FIX_319','sortBy','off','Backup\x20file\x20unzipped\x20and\x20stored','6b67f3d61ee94b8f5c80b4affef4c4d9','secret','Ok,\x20will\x20send\x20order\x20notifications\x20only','Restore\x20process\x20confirmed','\x20minutes','command','node-zip','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','botmanager','Unauthorized\x20attempt\x20to\x20update\x20bot','telegramEvents','login','RSA','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','search','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','sendFile','telegrammsg','lastmsgemitted','2FA\x20login\x20required','Server','token','***','Setting\x20access:\x20','\x1b[35m','Notifications\x20disabled','All\x20bots','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','::ffff:127.0.0.1','botID','started','write','Login\x20accepted','bb-config.json','reinstall-bb','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','env','config_alerts','reinstall_no','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','telegramToken','track','conn','jsonwebtoken','axios','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','data','messages','telegram2FaApproval','Telegraf\x20error:','includes','bot','Crypt','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','delete-alerts','running','initclient','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','/update\x20-\x20update\x20Balance\x20Bot\x0a','/help\x20-\x20show\x20available\x20commands\x0a','/:bot/configuration','reinstall_yes','clients','username','staging','login\x20not\x20required','lastmsgtelegram','/metrics\x20-\x20show\x20bot\x20performance\x0a','getPortfolio','Starting\x20#RED#Balance\x20Bot\x20v','You\x20can\x20use\x20the\x20following\x20commands:\x0a','cancel-loading','sort','access','getTime','map','test','stop','existsSync','backup-full@','remoteAddress','toString','/:bot/support','startsWith','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Error\x20while\x20deleting\x20config\x20files:\x20','config_all','reject','logs/','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run','$1_$2_$3','host','alerts','showname','server','storeFiat','All\x20bots\x20running\x20right\x20now','reason','show','sendPortfolioTelegram','date-fns','#RES#\x20if\x20running\x20on\x20server','inlineKeyboard','argv','/disable\x20-\x20disable\x20notifications\x0a','exit','store-fiat','Invalid\x20authentication\x20token\x20(1)','headers','apiPassword','user','Yes','-performance.json','Session\x20expired\x20for\x20user\x20...','full','logged\x20out','update_yes','logs','reload','/on\x20-\x20start\x20bot(s)\x0a','then','static','family','uuid-random','Failed\x20to\x20download\x20','uncaughtException','30\x20min','node',')\x20|\x20Bot\x20','ipaddr.js','accept','logout','writeFileSync','once','headless','.zip','Access\x20enabled\x20for\x20','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','\x20only\x0a','\x20>\x20','split','output-002.log','update','sendMessage','chat','removeAllListeners','610434FxxUCZ','store','Login\x20rejected','bb/','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','sha256','format','function','endsWith','Ok,\x20will\x20send\x20alert\x20notifications\x20only','portfolio','order','isIPv4MappedAddress','yes','Unauthorized\x20attempt\x20to\x20log\x20out','Unauthorized\x20login\x20attempt\x20(timeout)','rmSync','use','telegramUsername','sign','update-bb','\x20|\x20user:\x20...','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','push','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','update-bot',':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20','replace','************','editMessageReplyMarkup','2FA\x20login\x20token\x20generated','Backup\x20file\x20uploaded','getMinutes','mixpanel','88ymwbaJ','Password\x20has\x20been\x20reset\x20to:\x20','build','type','hashSync','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file','bcryptjs','launch','telegramEnabled','assign','password','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','keys','graphql-request','verify','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','<b>Telegram\x20Bot\x20Status:</b>\x0a','params','getDate','Invalid\x20authentication\x20token\x20(2)','Unauthorized\x20attempt\x20to\x20get\x20portfolio','15\x20min','timestamp','add-bot','No\x20authentication\x20token','No\x20bots\x20running\x20right\x20now','Restore\x20process\x20aborted','\x1b[36m','bot.js','parse','Starting\x20(','Unauthorized\x20attempt\x20to\x20update\x20settings','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','publicKey','\x20mode','any','/:bot/performance','version.json','portfolio_','internal','Notifications\x20enabled','hasOwnProperty','login\x20required','getUTCHours','notification','port','production','manual','\x1b[0m','remove','error','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','orders','on_','getHours','number','index.html','backup-full.zip','telegramIpApproval','-----------------------------------------------------------------------------------','onepagemode','api-eu.mixpanel.com','5369287FgCrRF','blacklist','forEach','\x1b[33m','resetHistory','zip/','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','get-messages','User\x20has\x20been\x20validated','expiry','filter','reply','mtime','bbPassword','storeConfiguration','help','placeOrder','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','getSeconds','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','reset-history','restore_no','lowdb/adapters/FileSync','apiSecret','Error\x20removing\x20old\x20backup\x20files:','child_process','match','*$1*','padStart','127.0.0.1','express','bbvReceive','latestversion','bot-','Bot\x20','createServer','secure','config','resetpw_no','9518pvGqQH','files','DEFLATE','Telegram\x20error:','45984gYeLKd','cloneDeep','socket.io','apiKey','live','settings.','clientip','referer','Unauthorized\x20attempt\x20to\x20confirm\x20message','download','Disabled\x20Bot\x20','min','cancelLoading','Password\x20reset\x20rejected','tempaccess_5','sockets','access\x20timeout','storeHeadless','Unauthorized\x20attempt\x20to\x20add\x20bot','telegraf','start','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?','telegram','callback','action','close','auto','new-disabled','name','/enable\x20-\x20enable\x20notifications\x0a','telegramChatId','Unauthorized\x20attempt\x20to\x20download\x20','Bot\x20Mgr\x20>\x20toggling\x20Bot\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','versions','slice','Unauthorized\x20attempt\x20to\x20delete\x20bot','config_orders','bb-settings.json','hybrid-crypto-js','::1','stringify','-results.json','temporary\x20access\x20timeout','constructor','Starting\x20Balance\x20Bot\x20update','randomBytes','backup/','botname','f2aRequired','set','statSync','=>\x20Go\x20to\x20#CYA#http://','backup-full','isDirectory','Unauthorized\x20attempt\x20to\x20store\x20configuration','restart_','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','Unauthorized\x20attempt\x20to\x20delete\x20alerts','2FA\x20required','version','address','https://api.ipify.org?format=json','_data','enabled','Idling\x20(','Orders','size','connected','0.0.0','lowdb','temporaryAccessAllowed','copyFileSync','handshake','temporary\x20access\x20rejected','settings','login2fa_','/:bot/coins','bots','/:bot/history','resetpw_yes','disabled','Restore\x20backup\x20file\x20','2ktlQxe','generateKeyPairAsync','generate','max','toIPv4MappedAddress','Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files','warning','20wUSBcS','uuid','-config.json','reinstall','message','kill','send','unlinkSync','environment','connection','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Node.js\x20v','get-starting-balances','names','pidRefreshToken','all','mode','exec','yargs/yargs','toggle_','util','temporary\x20token\x20generated',':\x20Bot\x20Mgr\x20>\x20','\x20to\x20','tkn','value','place-order','Invalid\x20username\x20or\x20IP\x20address','new','mkdirSync','invalid\x20credentials','find','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','43900DmyhNv','stopped','1478301YkTaLb','SIGINT','3000','output-001.log','auth','confirm-message','Enabled\x20Bot\x20','599004oddZos','RSA-OAEP','allow','text','Unauthorized\x20attempt\x20to\x20get\x20messages','[ip-address]','store-settings','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','/download/:type','privateKey','compareSync','delete-bot','Logged\x20in\x20user\x20...','1000'];_0x1986=function(){return _0x20b9a2;};return _0x1986();}async function getBackupFiles(_0x335457=null){const _0x2e1a12=_0x248fcd;let _0xe026ff=[],_0x11c6ff=fs['readdirSync'](configbackuppath,{'withFileTypes':!![]});_0x11c6ff[_0x2e1a12(0x1ce)]((_0x4a47f6,_0xd1e9fd)=>_0x4a47f6[_0x2e1a12(0xc8)]<_0xd1e9fd['name']?0x1:_0xd1e9fd[_0x2e1a12(0xc8)]<_0x4a47f6[_0x2e1a12(0xc8)]?-0x1:0x0),_0x11c6ff[_0x2e1a12(0x83)](_0x909657=>{const _0x5ffada=_0x2e1a12;if(!_0x909657[_0x5ffada(0xe2)]()&&_0x909657[_0x5ffada(0xc8)]['startsWith'](_0x5ffada(0x1d5))&&_0x909657[_0x5ffada(0xc8)][_0x5ffada(0x220)](_0x5ffada(0x20d))){const _0x31316e=formatDate(fs[_0x5ffada(0xdf)](configbackuppath+_0x909657[_0x5ffada(0xc8)])[_0x5ffada(0x8d)]);_0xe026ff['push']({'name':_0x909657[_0x5ffada(0xc8)],'mtime':_0x31316e});}});if(_0x335457)io['to'](_0x335457)[_0x2e1a12(0x17d)]('backup-files',_0xe026ff);else return _0xe026ff;}async function backupConfigFiles(){const _0x123d35=_0x248fcd;await zipFiles(_0x123d35(0xe1));const _0x10af39=getCleanTimeStamp();fs['copyFileSync'](zippath+_0x123d35(0x7c),configbackuppath+('backup-full@'+_0x10af39+_0x123d35(0x20d)));let _0x4c0c55=fs[_0x123d35(0x153)](configbackuppath,{'withFileTypes':!![]});_0x4c0c55[_0x123d35(0x1ce)]((_0x519846,_0x5aefbf)=>_0x519846[_0x123d35(0xc8)]<_0x5aefbf[_0x123d35(0xc8)]?0x1:_0x5aefbf[_0x123d35(0xc8)]<_0x519846[_0x123d35(0xc8)]?-0x1:0x0),_0x4c0c55[_0x123d35(0x166)]>maxBackups&&fs[_0x123d35(0x10d)](configbackuppath+_0x4c0c55[_0x4c0c55[_0x123d35(0x166)]-0x1][_0x123d35(0xc8)]);}function rotateLogFiles(){const _0x5008ae=_0x248fcd,_0x1a4dc6=fs[_0x5008ae(0xdf)](logspath+_0x5008ae(0x142)),_0x25011f=_0x1a4dc6[_0x5008ae(0xef)]/0x400;if(_0x25011f>0x64){let _0x3d46f8=fs[_0x5008ae(0x153)](logspath,{'withFileTypes':!![]});_0x3d46f8[_0x5008ae(0x1ce)]((_0x2058df,_0x58e4cd)=>_0x2058df[_0x5008ae(0xc8)]<_0x58e4cd[_0x5008ae(0xc8)]?0x1:_0x58e4cd[_0x5008ae(0xc8)]<_0x2058df[_0x5008ae(0xc8)]?-0x1:0x0),_0x3d46f8[_0x5008ae(0x83)](_0x4b0e98=>{const _0x5b6789=_0x5008ae;if(_0x4b0e98[_0x5b6789(0xc8)]==_0x5b6789(0x213))fs[_0x5b6789(0xf4)](logspath+_0x4b0e98[_0x5b6789(0xc8)],logspath+'output-003.log');if(_0x4b0e98[_0x5b6789(0xc8)]=='output-001.log')fs[_0x5b6789(0xf4)](logspath+_0x4b0e98[_0x5b6789(0xc8)],logspath+'output-002.log');_0x4b0e98[_0x5b6789(0xc8)]=='output-000.log'&&(fs[_0x5b6789(0xf4)](logspath+_0x4b0e98[_0x5b6789(0xc8)],logspath+_0x5b6789(0x12c)),fs[_0x5b6789(0x20a)](logspath+_0x4b0e98[_0x5b6789(0xc8)],''));});}}async function zipFiles(_0x3d690a){const _0x322a10=_0x248fcd;let _0xfd3a58;if(_0x3d690a==_0x322a10(0x1fb))_0xfd3a58=logspath;if(_0x3d690a=='backup')_0xfd3a58=configpath;if(_0x3d690a==_0x322a10(0xe1))_0xfd3a58=configpath;let _0x256198=fs['readdirSync'](_0xfd3a58,{'withFileTypes':!![]});const _0x346303=new require('node-zip')();_0x256198[_0x322a10(0x83)](_0xe8719b=>{const _0x2ea16d=_0x322a10;if(!_0xe8719b[_0x2ea16d(0xe2)]()){let _0x42aec0=fs[_0x2ea16d(0x17c)](_0xfd3a58+_0xe8719b['name']);if(_0x3d690a==_0x2ea16d(0x170)){const _0x5e8c50=/^bot-[0-9]{3}-config.json$/,_0x5b900d=_0x5e8c50['test'](_0xe8719b[_0x2ea16d(0xc8)]);if(_0x5b900d){const _0x5dd9d7=JSON[_0x2ea16d(0x25a)](_0x42aec0);if(_0x5dd9d7[_0x2ea16d(0x1b9)][0x0]){_0x5dd9d7[_0x2ea16d(0x1b9)][0x0][_0x2ea16d(0xaf)]=_0x2ea16d(0x19c),_0x5dd9d7[_0x2ea16d(0x1b9)][0x0][_0x2ea16d(0x98)]=_0x2ea16d(0x19c);if(_0x5dd9d7[_0x2ea16d(0x1b9)][0x0][_0x2ea16d(0x1f3)])_0x5dd9d7[_0x2ea16d(0x1b9)][0x0][_0x2ea16d(0x1f3)]=_0x2ea16d(0x19c);}_0x42aec0=JSON[_0x2ea16d(0xd5)](_0x5dd9d7,null,0x2);}if(_0xe8719b[_0x2ea16d(0xc8)]==_0x2ea16d(0xd2)){const _0x356788=JSON[_0x2ea16d(0x25a)](_0x42aec0);if(_0x356788[_0x2ea16d(0xf7)][_0x2ea16d(0x178)])_0x356788[_0x2ea16d(0xf7)][_0x2ea16d(0x178)]=![];if(_0x356788['settings'][_0x2ea16d(0x8e)])_0x356788[_0x2ea16d(0xf7)]['bbPassword']=_0x2ea16d(0x19c);if(_0x356788[_0x2ea16d(0xf7)]['telegramToken'])_0x356788['settings'][_0x2ea16d(0x1ae)]=_0x2ea16d(0x19c);if(_0x356788[_0x2ea16d(0xf7)]['telegramChatId'])_0x356788['settings'][_0x2ea16d(0xca)]=null;_0x42aec0=JSON[_0x2ea16d(0xd5)](_0x356788,null,0x2);}if(_0xe8719b[_0x2ea16d(0xc8)]!=_0x2ea16d(0x14a))_0x346303['file'](_0xe8719b['name'],_0x42aec0);}else _0x346303['file'](_0xe8719b[_0x2ea16d(0xc8)],_0x42aec0);}});const _0x4e27ca=_0x346303[_0x322a10(0x101)]({'base64':![],'compression':_0x322a10(0xaa)});fs[_0x322a10(0x20a)](zippath+(_0x3d690a+_0x322a10(0x20d)),_0x4e27ca,'binary');}async function unzipFile(_0x537044,_0x2a2422){const _0xc67f1f=_0x248fcd;fs[_0xc67f1f(0x153)](configpath,{'withFileTypes':!![]})[_0xc67f1f(0x83)](_0x625a7d=>{const _0x5c7f8e=_0xc67f1f;if(!_0x625a7d['isDirectory']())fs[_0x5c7f8e(0x228)](configpath+_0x625a7d[_0x5c7f8e(0xc8)]);});const _0x4497bc=fs[_0xc67f1f(0x17c)](_0x537044+_0x2a2422,'binary'),_0x4766aa=new require(_0xc67f1f(0x18c))(_0x4497bc,{'base64':![],'checkCRC32':!![]});Object[_0xc67f1f(0x249)](_0x4766aa[_0xc67f1f(0xa9)])[_0xc67f1f(0x83)](_0x228044=>{const _0x5ca237=_0xc67f1f,_0x19ff3a=_0x4766aa[_0x5ca237(0xa9)][_0x228044];fs['writeFileSync'](configpath+_0x19ff3a[_0x5ca237(0xc8)],_0x19ff3a[_0x5ca237(0xeb)]);}),fs['readdirSync'](temppath,{'withFileTypes':!![]})['forEach'](_0x5608ea=>{const _0x2ef8fd=_0xc67f1f;if(!_0x5608ea[_0x2ef8fd(0xe2)]())fs['rmSync'](temppath+_0x5608ea[_0x2ef8fd(0xc8)]);}),logger[_0xc67f1f(0x144)](_0xc67f1f(0x185)),process[_0xc67f1f(0x10c)]({'restore':!![]},_0x493dd9=>{});}async function getPublicIp(){const _0x29fdc6=_0x248fcd;try{const _0x550694=await axios[_0x29fdc6(0x145)](_0x29fdc6(0xea));publicip=_0x550694[_0x29fdc6(0x1b4)]['ip'];}catch(_0x541ef4){}}async function triggerAnalytics(){const _0x28e942=_0x248fcd;if(!publicip)await getPublicIp();const _0x4b0dd0=getBotsWithMode();let _0x399771=0x0;_0x4b0dd0[_0x28e942(0x83)](_0x3751de=>{const _0x344b53=_0x28e942;if(_0x3751de[_0x344b53(0x164)]==='enabled')_0x399771++;});const _0x2c5106=getBotExchanges();mixpanel[_0x28e942(0x1af)](_0x28e942(0x19a),{'distinct_id':settings[_0x28e942(0x162)],'ip':publicip,'version':serverversion,'numbots':_0x4b0dd0['length'],'numbotsenabled':_0x399771,'exchanges':_0x2c5106,'environment':environment});}async function getMessages(){const _0x143494=_0x248fcd,_0xa39002='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x47bf4d=new GraphQLClient(_0xa39002),_0x173abb={'authorization':_0x143494(0x232)},_0xf927cb=serverversion[_0x143494(0x212)]('.'),_0x15a7e0=_0xf927cb[0x0]+'.'+_0xf927cb[0x1],_0x3bb1e8=Math[_0x143494(0xb7)](settings[_0x143494(0x1c8)],settings['lastmsgemitted']),_0x5ea2a9={'last':parseInt(_0x3bb1e8),'bbm':_0x15a7e0},_0x4ba436=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x59e39c;try{_0x59e39c=await _0x47bf4d['request'](_0x4ba436,_0x5ea2a9,_0x173abb);}catch(_0x275d42){}if(_0x59e39c&&_0x59e39c[_0x143494(0x1b5)]){let _0x4942ff=settings[_0x143494(0x1c8)];newMessages=[];for(const _0x3b745b of _0x59e39c['messages']){newMessages[_0x143494(0x231)](_0x3b745b);let _0x9e32b=![];_0x3b745b[_0x143494(0x147)]&&(updateSetting(_0x143494(0xa1),_0x3b745b[_0x143494(0x147)]),_0x9e32b=isNewerVersion(serverversion,_0x3b745b[_0x143494(0x147)])||serverversion==_0x3b745b[_0x143494(0x147)]);if(!_0x9e32b&&_0x3b745b['number']>_0x4942ff){if(_0x3b745b[_0x143494(0xa0)]===_0x143494(0x260)||serverversion[_0x143494(0x1d9)](_0x3b745b[_0x143494(0xa0)])){let _0x48741e=''+_0x3b745b['title']+'\x0a\x0a'+_0x3b745b['message'];const _0xed66c6=await sendTelegramMsg(toTelegramMarkdown(_0x48741e),'Markdown');if(_0xed66c6)_0x4942ff=_0x3b745b[_0x143494(0x7a)];}}}updateAvailable=isNewerVersion(settings[_0x143494(0xa1)],serverversion),updateSetting(_0x143494(0x1c8),_0x4942ff),emitMessages();}}function emitMessages(){const _0x152333=_0x248fcd,_0x4fcd39=settings[_0x152333(0x198)];let _0x383e19=[];newMessages[_0x152333(0x83)](_0x2277f5=>{const _0x474cc6=_0x152333;_0x2277f5[_0x474cc6(0x7a)]>_0x4fcd39&&_0x383e19['push'](_0x2277f5);}),_0x383e19[_0x152333(0x166)]>0x0&&getAllClients()['forEach'](_0x605377=>{getSocket(_0x605377['id'])['emit']('message',_0x383e19);});}function confirmMessage(_0x5c5066){updateSetting('lastmsgemitted',Number(_0x5c5066));}function isNewerVersion(_0xcc6f7e,_0x40948e){const _0x5c594f=_0x248fcd,_0x19e559=_0x40948e[_0x5c594f(0x212)]('.'),_0x331672=_0xcc6f7e[_0x5c594f(0x212)]('.');for(var _0xdca9a=0x0;_0xdca9a<_0x331672[_0x5c594f(0x166)];_0xdca9a++){const _0x2b0ba3=~~_0x331672[_0xdca9a],_0x35ab65=~~_0x19e559[_0xdca9a];if(_0x2b0ba3>_0x35ab65)return!![];if(_0x2b0ba3<_0x35ab65)return![];}return![];}function toTelegramMarkdown(_0x5810c5){const _0x4f15f7=_0x248fcd,_0x11fd94=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x9bbb7f=/\*{2}(.+?)\*{2}/gim;return _0x5810c5=_0x5810c5['replace'](_0x11fd94,_0x4f15f7(0x1e0))[_0x4f15f7(0x235)](_0x9bbb7f,_0x4f15f7(0x9c)),_0x5810c5;}async function validateConfigFile(){const _0x1fbda6=_0x248fcd,_0x4d8748=dbConfig['get']('bots')[_0x1fbda6(0x183)](_0x1fbda6(0x1a3))['value']()||[];if(_0x4d8748[_0x1fbda6(0x166)]==0x0){let _0x438013=0x0,_0x4aa374=[];const _0x688c80=/^bot-([0-9]{3})-config.json$/,_0x140db0=fs['readdirSync'](configpath);_0x140db0['forEach'](_0x5bffd1=>{const _0x11b7e0=_0x1fbda6,_0x55944b=_0x688c80[_0x11b7e0(0x117)](_0x5bffd1);if(_0x55944b){const _0x21ac24=_0x55944b[0x1];let _0x36b355=getBotAttributes(_0x21ac24);_0x4aa374[_0x11b7e0(0x231)]({'botID':_0x21ac24,'botname':_0x36b355[_0x11b7e0(0xdc)],'status':_0x11b7e0(0xfd),'live':_0x11b7e0(0x128)}),_0x438013++;}}),_0x438013!=0x0&&(dbConfig[_0x1fbda6(0x145)](_0x1fbda6(0xfa))['assign'](_0x4aa374)[_0x1fbda6(0x1a5)](),config=_0x4aa374,restoredConfigFile=_0x438013);}}async function restoreConfigNotify(_0x34898d){const _0x22d142=_0x248fcd;let _0x169f43;if(restoredConfigFile==0x1)_0x169f43=_0x22d142(0x1df);else _0x169f43='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run';if(_0x34898d)io['to'](_0x22d142(0x18e))[_0x22d142(0x17d)](_0x22d142(0x269),_0x169f43);else{logger[_0x22d142(0x168)]('-----------------------------------------------------------------------------------'),logger[_0x22d142(0x168)](_0x169f43),logger[_0x22d142(0x168)](_0x22d142(0x7e)),logger[_0x22d142(0x168)]('');if(tgBot&&settings['telegramChatId']&&settings[_0x22d142(0x190)]!=_0x22d142(0x77))await sendTelegram(settings[_0x22d142(0xca)],'Bot\x20Mgr\x20>\x20'+_0x169f43);}}function validateCredentials(_0x17c1c3,_0x59d365){const _0x5bb046=_0x248fcd;if(_0x17c1c3[_0x5bb046(0x1c5)]==settings[_0x5bb046(0x15e)]&&bcrypt[_0x5bb046(0x13a)](_0x17c1c3['password'],settings[_0x5bb046(0x8e)])){if(settings[_0x5bb046(0xdd)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x9029d1=generateLoginToken(_0x59d365);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x9029d1};}}else return{'allow':![],'reason':_0x5bb046(0x124),'token':null};}function refreshToken(_0x1a4016){const _0x77d17c=generateLoginToken(_0x1a4016);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x77d17c};}function validateAccess(_0x3c40df,_0x281744,_0xd55c88){const _0x3a98ab=_0x248fcd,_0x3c725e=_0xd55c88?_0xd55c88:devices[_0x281744]['ip'];let _0x74d2e3;const _0x2fdb44=_0x351f06=>{const _0x43928a=_0x3c6f;if(settings[_0x43928a(0x178)]){if(settings[_0x43928a(0xdd)]){if(telegram2FaApproved(_0x281744)){const _0x22a590=generateLoginToken(_0x281744);return{'allow':!![],'reason':'2FA\x20login\x20token\x20generated','token':_0x22a590};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x74d2e3=validToken(_0x351f06,_0x281744),_0x74d2e3[_0x43928a(0x266)]('success')?{'allow':!![],'reason':'login\x20token\x20valid','token':_0x351f06}:{'allow':![],'reason':_0x43928a(0x267),'token':null};}else return{'allow':!![],'reason':_0x43928a(0x1c7),'token':null};};if(settings['whitelistEnabled']){let _0xcd1570=[...settings['whitelist'],_0x3a98ab(0xd4),_0x3a98ab(0x1a2),_0x3a98ab(0x9e)];if(_0xcd1570[_0x3a98ab(0x1b8)](_0x3c725e))return _0x2fdb44(_0x3c40df);else{_0x74d2e3=validToken(_0x3c40df,_0x281744);if(_0x74d2e3['hasOwnProperty'](_0x3a98ab(0x165)))return _0x2fdb44(_0x3c40df);else{if(telegramIpApproved(_0x281744)){const _0x1b750b=generateToken(_0x281744);return _0x74d2e3=_0x2fdb44(_0x3c40df),_0x74d2e3[_0x3a98ab(0x132)]?{'allow':!![],'reason':_0x3a98ab(0x11b),'token':_0x1b750b}:_0x74d2e3;}else return settings[_0x3a98ab(0xf3)]?{'allow':![],'reason':'2FA\x20required','token':null}:{'allow':![],'reason':'temporary\x20access\x20not\x20allowed','token':null};}}}else return _0x2fdb44(_0x3c40df);}function timelyDecrypt(_0x2a5247,_0x17819b=!![]){const _0x49d71c=_0x248fcd;if(_0x2a5247)try{const _0x5b2ad1=crypt[_0x49d71c(0x171)](secure['privateKey'],_0x2a5247)[_0x49d71c(0x10a)],_0x3cc5b3=_0x5b2ad1['split']('@')[0x0],_0x3d9d45=_0x5b2ad1[_0x49d71c(0x212)]('@')[0x1],_0x2bd631=new Date()['getTime']();if(_0x17819b){if(_0x2bd631-_0x3d9d45<maxSecretAge*0x3e8)return _0x3cc5b3;else return![];}else return _0x3cc5b3;}catch(_0x37b6e3){return![];}else return![];}const validToken=(_0x4bf1d4,_0x46c81d)=>{const _0x46826a=_0x248fcd,_0x5190ba=devices[_0x46c81d]['ip'];if(!_0x4bf1d4)return{'error':_0x46826a(0x255)};for(let _0x2f6572 of blacklist){if(_0x2f6572[_0x46826a(0x19b)]==_0x4bf1d4)return{'error':'Token\x20blacklisted'};}let _0x590de1;try{_0x590de1=jwt[_0x46826a(0x24b)](_0x4bf1d4,secure[_0x46826a(0x187)]+_0x46c81d);}catch{return{'error':_0x46826a(0x1f1)};}if(!_0x590de1[_0x46826a(0x266)]('clientip')&&!_0x590de1['hasOwnProperty']('username')||!_0x590de1[_0x46826a(0x266)]('exp'))return{'error':_0x46826a(0x250)};if(!_0x590de1['hasOwnProperty'](_0x46826a(0x1c5))&&_0x590de1[_0x46826a(0x266)](_0x46826a(0xb2))){const {clientip:_0x279cd9}=_0x590de1;return _0x5190ba==_0x279cd9?{'success':_0x46826a(0x89)}:{'error':'Invalid\x20IP\x20address'};}else{if(_0x590de1[_0x46826a(0x266)](_0x46826a(0x1c5))&&_0x590de1[_0x46826a(0x266)](_0x46826a(0xb2))){const {username:_0x4d30f0,clientip:_0x11052b}=_0x590de1;return settings[_0x46826a(0x15e)]==_0x4d30f0&&_0x5190ba==_0x11052b?{'success':_0x46826a(0x89)}:{'error':_0x46826a(0x121)};}}},generateLoginToken=_0xb1c527=>{const _0x22b913=_0x248fcd;if(_0xb1c527){const _0x2f9d04=devices[_0xb1c527]['ip'];return jwt[_0x22b913(0x22b)]({'username':settings[_0x22b913(0x15e)],'clientip':_0x2f9d04},secure['secret']+_0xb1c527,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x32e3f1=>{const _0x428d1d=_0x248fcd;if(_0x32e3f1){const _0x12c9f1=devices[_0x32e3f1]['ip'];return jwt[_0x428d1d(0x22b)]({'clientip':_0x12c9f1},secure[_0x428d1d(0x187)]+_0x32e3f1,{'expiresIn':devices[_0x32e3f1][_0x428d1d(0x7d)][_0x428d1d(0x8a)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x54d004=>{const _0x142e28=_0x248fcd;let _0x14b564=![];return devices[_0x54d004][_0x142e28(0x7d)]&&devices[_0x54d004]['telegramIpApproval']['expiry']!=_0x142e28(0x1dd)&&(_0x14b564=devices[_0x54d004][_0x142e28(0x7d)]['clientip']==devices[_0x54d004]['ip']&&new Date()[_0x142e28(0x1d0)]()-devices[_0x54d004][_0x142e28(0x7d)][_0x142e28(0x253)]<devices[_0x54d004][_0x142e28(0x7d)]['expiry']*0x3c*0x3e8),_0x14b564;},telegram2FaApproved=_0x24e2c5=>{const _0x6f7c12=_0x248fcd;let _0x587ee9=![];return devices[_0x24e2c5][_0x6f7c12(0x1b6)]&&devices[_0x24e2c5][_0x6f7c12(0x1b6)][_0x6f7c12(0x8a)]!=_0x6f7c12(0x1dd)&&(_0x587ee9=devices[_0x24e2c5]['telegram2FaApproval'][_0x6f7c12(0xb2)]==devices[_0x24e2c5]['ip']&&new Date()[_0x6f7c12(0x1d0)]()-devices[_0x24e2c5][_0x6f7c12(0x1b6)]['timestamp']<devices[_0x24e2c5]['telegram2FaApproval']['expiry']*0x3c*0x3e8),_0x587ee9;},normalizeIP=_0x16bd00=>{const _0x35306b=_0x248fcd;let _0x407cf5=null,_0x4247d5=null;if(ipaddr['isValid'](_0x16bd00)){const _0x509a7b=ipaddr[_0x35306b(0x25a)](_0x16bd00);_0x509a7b['kind']()==='ipv6'?(_0x509a7b[_0x35306b(0x224)]()&&(_0x407cf5=_0x509a7b['toIPv4Address']()['toString']()),_0x4247d5=_0x509a7b[_0x35306b(0x1d7)]()):(_0x407cf5=_0x509a7b['toString'](),_0x4247d5=_0x509a7b[_0x35306b(0x103)]()[_0x35306b(0x1d7)]());}return{'show':_0x407cf5?_0x407cf5:_0x4247d5,'store':_0x4247d5};};function formatDate(_0x590100){const _0x465af0=_0x248fcd;return _0x590100[_0x465af0(0x159)]()+'/'+(_0x590100[_0x465af0(0x16c)]()+0x1)['toString']()[_0x465af0(0x9d)](0x2,'0')+'/'+_0x590100[_0x465af0(0x24f)]()[_0x465af0(0x1d7)]()[_0x465af0(0x9d)](0x2,'0')+'\x20'+_0x590100['getHours']()['toString']()['padStart'](0x2,'0')+':'+_0x590100[_0x465af0(0x23a)]()[_0x465af0(0x1d7)]()[_0x465af0(0x9d)](0x2,'0')+':'+_0x590100['getSeconds']()[_0x465af0(0x1d7)]()[_0x465af0(0x9d)](0x2,'0');}function sleep(_0x58de34){return new Promise(_0x2ce701=>setTimeout(_0x2ce701,_0x58de34));}