const _0xb2a776=_0x33d5;(function(_0x10bca9,_0x16c888){const _0xdf3102=_0x33d5,_0x99cd17=_0x10bca9();while(!![]){try{const _0x2b96ed=-parseInt(_0xdf3102(0x24c))/0x1+parseInt(_0xdf3102(0x207))/0x2+parseInt(_0xdf3102(0x2b2))/0x3*(parseInt(_0xdf3102(0x1da))/0x4)+parseInt(_0xdf3102(0x240))/0x5+parseInt(_0xdf3102(0x224))/0x6+-parseInt(_0xdf3102(0x1a9))/0x7*(-parseInt(_0xdf3102(0x1c3))/0x8)+-parseInt(_0xdf3102(0x294))/0x9;if(_0x2b96ed===_0x16c888)break;else _0x99cd17['push'](_0x99cd17['shift']());}catch(_0x550d22){_0x99cd17['push'](_0x99cd17['shift']());}}}(_0x29fb,0x1f0e2));const _0x561414=function(){let _0x3b4388=!![];return function(_0xac5100,_0x56bdd1){const _0x5122e5=_0x3b4388?function(){const _0x3c592e=_0x33d5;if(_0x56bdd1){const _0x46fad5=_0x56bdd1[_0x3c592e(0x22d)](_0xac5100,arguments);return _0x56bdd1=null,_0x46fad5;}}:function(){};return _0x3b4388=![],_0x5122e5;};}(),_0x66e788=_0x561414(this,function(){const _0x251284=_0x33d5;return _0x66e788[_0x251284(0x1bb)]()['search'](_0x251284(0x1e7))[_0x251284(0x1bb)]()['constructor'](_0x66e788)[_0x251284(0x277)](_0x251284(0x1e7));});_0x66e788();'use strict';process[_0xb2a776(0x20a)][_0xb2a776(0x2a4)]=0x1;const childProcess=require(_0xb2a776(0x1b9)),FileSync=require(_0xb2a776(0x24d)),fs=require('fs'),fns=require(_0xb2a776(0x280)),low=require(_0xb2a776(0x25e)),path=require(_0xb2a776(0x2e0)),crypto=require(_0xb2a776(0x299)),Crypt=require(_0xb2a776(0x2c6))['Crypt'],RSA=require(_0xb2a776(0x2c6))[_0xb2a776(0x24e)],bcrypt=require(_0xb2a776(0x283)),jwt=require(_0xb2a776(0x2c3)),analyticsLib=require(_0xb2a776(0x233))[_0xb2a776(0x290)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require('ipaddr.js'),argv=require(_0xb2a776(0x20c))(process[_0xb2a776(0x1eb)][_0xb2a776(0x2d8)](0x2))[_0xb2a776(0x1eb)],PORT=argv[_0xb2a776(0x2c0)]||_0xb2a776(0x20f),pattern=/^[0-9]{2,4}$/;if(!pattern['test'](PORT))return console['log']('Error:\x20Invalid\x20argument\x20'+PORT+_0xb2a776(0x1e4)),process['exit'](0x1);const HOST=argv['host']||null,userID=argv[_0xb2a776(0x19b)]||'';let bbpath=_0xb2a776(0x247),bbpath2='';const botfile='bot.js',configfile=_0xb2a776(0x1fd),settingsfile=_0xb2a776(0x243),securefile=_0xb2a776(0x237);!fs[_0xb2a776(0x257)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0xb2a776(0x2a7)),configpath=userID?bbpath+_0xb2a776(0x245)+userID+'/':bbpath+_0xb2a776(0x245),configbackuppath=configpath+_0xb2a776(0x2a8);!fs[_0xb2a776(0x257)](configpath)&&fs[_0xb2a776(0x273)](configpath);!fs['existsSync'](configbackuppath)&&fs[_0xb2a776(0x273)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0xb2a776(0x202)]({'bots':[]})[_0xb2a776(0x29f)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0xb2a776(0x202)]({'settings':{'timeshift':0x0}})[_0xb2a776(0x29f)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0xb2a776(0x202)]({'secure':{},'blacklist':[]})[_0xb2a776(0x29f)]();let crypt=new Crypt({'md':_0xb2a776(0x23a),'rsaStandard':'RSA-OAEP'});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0xb2a776(0x2d3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0xb2a776(0x241)),app=express(),http=require(_0xb2a776(0x27b))[_0xb2a776(0x2dd)](app);app[_0xb2a776(0x1b1)](express[_0xb2a776(0x235)](path['join'](__dirname,bbpath2,_0xb2a776(0x266)))),app[_0xb2a776(0x1b1)](express[_0xb2a776(0x235)](path['join'](__dirname,bbpath2,'build'))),app['get']('/',function(_0x56f3e7,_0xe330de){const _0x3bb2ab=_0xb2a776;_0xe330de[_0x3bb2ab(0x242)](path[_0x3bb2ab(0x2c1)](__dirname,bbpath2,_0x3bb2ab(0x266),_0x3bb2ab(0x2a3)));}),app[_0xb2a776(0x2e6)]('/:bot',function(_0x48d8c0,_0x235b46){const _0x208f86=_0xb2a776;_0x235b46['sendFile'](path[_0x208f86(0x2c1)](__dirname,bbpath2,_0x208f86(0x230),_0x208f86(0x2a3)));}),app[_0xb2a776(0x2e6)](_0xb2a776(0x2d6),(_0x11f715,_0x2c5b1d)=>{const _0x58d3c7=_0xb2a776;_0x2c5b1d[_0x58d3c7(0x242)](path['join'](__dirname,bbpath2,_0x58d3c7(0x230),_0x58d3c7(0x2a3)));}),app[_0xb2a776(0x2e6)](_0xb2a776(0x1a3),(_0x2dccba,_0x484b31)=>{const _0x4351f6=_0xb2a776;_0x484b31['sendFile'](path[_0x4351f6(0x2c1)](__dirname,bbpath2,'build',_0x4351f6(0x2a3)));}),app[_0xb2a776(0x2e6)](_0xb2a776(0x216),(_0x23f943,_0x525711)=>{const _0x5f10d4=_0xb2a776;_0x525711[_0x5f10d4(0x242)](path[_0x5f10d4(0x2c1)](__dirname,bbpath2,_0x5f10d4(0x230),_0x5f10d4(0x2a3)));}),app[_0xb2a776(0x2e6)]('/:bot/history',(_0x21b96b,_0x892d26)=>{const _0x43b495=_0xb2a776;_0x892d26[_0x43b495(0x242)](path[_0x43b495(0x2c1)](__dirname,bbpath2,_0x43b495(0x230),_0x43b495(0x2a3)));}),app[_0xb2a776(0x2e6)](_0xb2a776(0x278),(_0x3db5cb,_0x74f7fe)=>{const _0x5a1a77=_0xb2a776;_0x74f7fe[_0x5a1a77(0x242)](path[_0x5a1a77(0x2c1)](__dirname,bbpath2,_0x5a1a77(0x230),'index.html'));}),app[_0xb2a776(0x2e6)](_0xb2a776(0x1e5),(_0x186c64,_0xc61d36)=>{const _0x4f8836=_0xb2a776;_0xc61d36[_0x4f8836(0x242)](path[_0x4f8836(0x2c1)](__dirname,bbpath2,_0x4f8836(0x230),_0x4f8836(0x2a3)));});if(HOST)http[_0xb2a776(0x2dc)](PORT,HOST);else http['listen'](PORT);const io=require(_0xb2a776(0x21a))(http,{}),analytics=analyticsLib({'app':_0xb2a776(0x2d9),'plugins':[googleAnalytics({'trackingId':_0xb2a776(0x22c)})]}),TelegramBot=require('node-telegram-bot-api');let tgBot;if(settings[_0xb2a776(0x2ca)]&&settings[_0xb2a776(0x2ca)]!=''&&settings[_0xb2a776(0x196)]&&settings[_0xb2a776(0x196)]!='')initTelegram();initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x29c5dd=_0xb2a776;console[_0x29c5dd(0x220)](''),console[_0x29c5dd(0x220)]('-----------------------------------------------------------------------------------'),logging(_0x29c5dd(0x1a6)+PORT),console['log'](_0x29c5dd(0x2c8));if(config[_0x29c5dd(0x20d)]!=0x0)config[_0x29c5dd(0x217)](_0x36e498=>{const _0x1d01c7=_0x29c5dd;if(_0x36e498['status']==_0x1d01c7(0x259)||_0x36e498['status']==_0x1d01c7(0x260))logging(_0x1d01c7(0x1dd)+_0x36e498[_0x1d01c7(0x25c)]+_0x1d01c7(0x287)+_0x36e498[_0x1d01c7(0x2d4)]),startBot([_0x36e498[_0x1d01c7(0x25c)],userID],{'cwd':bbpath},function(_0x34566e){if(_0x34566e)logging(_0x34566e);});else(_0x36e498['status']=='disabled'||_0x36e498[_0x1d01c7(0x1f2)]=='new-disabled')&&logging(_0x1d01c7(0x28c)+_0x36e498[_0x1d01c7(0x25c)]+_0x1d01c7(0x287)+_0x36e498[_0x1d01c7(0x2d4)]);});else!newBot&&console[_0x29c5dd(0x220)](_0x29c5dd(0x254));if(newBot)addBot();console[_0x29c5dd(0x220)]('-----------------------------------------------------------------------------------'),console[_0x29c5dd(0x220)]('');}function startSocket(){const _0x541cc4=_0xb2a776;io['on'](_0x541cc4(0x1e0),_0x51ac96=>{const _0x586929=_0x541cc4;let _0xe21662,_0x2a238f,_0x493065,_0x936a2d,_0x30cfdf;const _0xb2cb8b=_0x51ac96[_0x586929(0x2a1)]['headers'][_0x586929(0x289)];_0x2a238f=_0xb2cb8b[_0x586929(0x1d3)](/bot[0-9]{3}/);if(_0x2a238f)_0x493065=_0x2a238f[0x0][_0x586929(0x1d3)](/[0-9]{3}/);if(_0x493065)_0xe21662=_0x493065[0x0];else _0xe21662=_0x586929(0x1bd);const _0x283d7a=_0x51ac96[_0x586929(0x2a1)][_0x586929(0x212)][_0x586929(0x195)];if(!_0x283d7a)_0x51ac96['emit'](_0x586929(0x1f2),{'publicKey':secure[_0x586929(0x27d)]});else{_0x936a2d=timelyDecrypt(_0x283d7a,![]);if(!_0x936a2d)logging(_0x586929(0x1a1));else{_0x30cfdf=normalizeIP(_0x51ac96[_0x586929(0x219)]['remoteAddress'])[_0x586929(0x25b)];if(!devices[_0x936a2d])devices[_0x936a2d]={'uuid':_0x936a2d,'access':{'token':null}};devices[_0x936a2d]['ip']=_0x30cfdf;const _0x978456=addClient(_0x51ac96['id'],_0x936a2d,_0xe21662);setAccess(_0x978456),_0x51ac96['on'](_0x586929(0x28f),_0x319dcd=>{const _0x5551af=_0x586929,_0x5cb549=timelyDecrypt(_0x319dcd[_0x5551af(0x2df)]);if(_0x5cb549){_0x319dcd={'username':_0x319dcd[_0x5551af(0x201)],'password':_0x5cb549},devices[_0x936a2d][_0x5551af(0x261)]=validateCredentials(_0x319dcd,_0x936a2d);if(devices[_0x936a2d][_0x5551af(0x261)][_0x5551af(0x2c5)]==![]&&devices[_0x936a2d][_0x5551af(0x261)]['reason']==_0x5551af(0x2b6))_0x51ac96[_0x5551af(0x1ac)](_0x5551af(0x1f2),{'access':devices[_0x936a2d]['access']}),loginAccess2FA(_0x936a2d,_0x30cfdf);else{if(devices[_0x936a2d][_0x5551af(0x261)]['allow']==![]&&devices[_0x936a2d][_0x5551af(0x261)][_0x5551af(0x2b3)]=='invalid\x20credentials')_0x51ac96[_0x5551af(0x1ac)](_0x5551af(0x1f2),{'access':devices[_0x936a2d][_0x5551af(0x261)]});else devices[_0x936a2d][_0x5551af(0x261)][_0x5551af(0x2c5)]&&devices[_0x936a2d]['access'][_0x5551af(0x2b3)]==_0x5551af(0x26a)&&(getClientsWithUuid(_0x936a2d)[_0x5551af(0x217)](_0xa12c72=>{setAccess(_0xa12c72);}),setTokenRefresh(_0x936a2d),setSessionTimeout('login',_0x936a2d));}}else logging(_0x5551af(0x1fe));}),_0x51ac96['on'](_0x586929(0x1f4),()=>{resetPassword();}),_0x51ac96['on'](_0x586929(0x205),_0x1daec7=>{removeClient(_0x51ac96['id']);});}}});}function initClient(_0x486ffd){const _0x265047=_0xb2a776;if(_0x486ffd!=_0x265047(0x1bd)&&config[_0x265047(0x198)]!=''){if(pid[_0x486ffd])pid[_0x486ffd]['send']({'function':_0x265047(0x23b),'args':null});}}function getSocket(_0x41e687){const _0x3cb3e6=_0xb2a776;return io['sockets']['sockets'][_0x3cb3e6(0x2e6)](_0x41e687);}function setAccess(_0x2143a8){const _0x1e7da7=_0xb2a776,_0xc46907=getSocket(_0x2143a8['id']),_0x2e8f8f=_0x2143a8[_0x1e7da7(0x293)],_0x36a0ba=_0x2143a8[_0x1e7da7(0x1ed)];devices[_0x2e8f8f][_0x1e7da7(0x261)]=validateAccess(devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x21b)],_0x2e8f8f),_0xc46907['join'](_0x2e8f8f);if(devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x2c5)]){_0xc46907['join'](_0x36a0ba);if(_0x36a0ba=='botmanager')initializeSocketBotManager(_0xc46907);else initializeSocketBot(_0xc46907);initClient(_0x36a0ba);}devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x21b)]&&devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x2b3)]=='temporary\x20token\x20generated'&&setSessionTimeout(_0x1e7da7(0x19a),_0x2e8f8f),devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x21b)]&&devices[_0x2e8f8f]['access'][_0x1e7da7(0x2b3)]==_0x1e7da7(0x2cc)&&setSessionTimeout(_0x1e7da7(0x28f),_0x2e8f8f),_0xc46907['emit'](_0x1e7da7(0x1f2),{'status':_0x2143a8['server'],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2e8f8f][_0x1e7da7(0x261)],'externalip':devices[_0x2e8f8f]['ip'],'publicKey':secure[_0x1e7da7(0x27d)]}),devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x2c5)]==![]&&devices[_0x2e8f8f][_0x1e7da7(0x261)][_0x1e7da7(0x2b3)]==_0x1e7da7(0x2c9)&&temporaryAccess2FA(_0x2e8f8f,devices[_0x2e8f8f]['ip']);}function setSessionTimeout(_0x4481f0,_0x39b362){const _0x452dd5=_0xb2a776;let _0x304bdd;if(_0x4481f0==_0x452dd5(0x28f))_0x304bdd=loginExpiry*0x3c*0x3e8;else _0x304bdd=devices[_0x39b362][_0x452dd5(0x199)][_0x452dd5(0x1c8)]*0x3c*0x3e8-(new Date()[_0x452dd5(0x2bc)]()-devices[_0x39b362]['telegramIpApproval'][_0x452dd5(0x2a9)]);if(devices[_0x39b362]['pidExpireLogin'])clearTimeout(devices[_0x39b362][_0x452dd5(0x1cc)]);devices[_0x39b362][_0x452dd5(0x1cc)]=setTimeout(()=>{const _0x234357=_0x452dd5;if(devices[_0x39b362][_0x234357(0x275)])clearTimeout(devices[_0x39b362][_0x234357(0x275)]);removeSocketListeners(_0x39b362),addBlacklist(_0x39b362),devices[_0x39b362][_0x234357(0x199)]=null,devices[_0x39b362][_0x234357(0x2bb)]=null,devices[_0x39b362][_0x234357(0x261)][_0x234357(0x21b)]=null,devices[_0x39b362][_0x234357(0x261)]=validateAccess(devices[_0x39b362][_0x234357(0x261)][_0x234357(0x21b)],_0x39b362),!(devices[_0x39b362]['access']['allow']&&devices[_0x39b362][_0x234357(0x261)]['reason']==_0x234357(0x29d))&&(_0x4481f0==_0x234357(0x28f)?io['to'](_0x39b362)[_0x234357(0x1ac)](_0x234357(0x1f2),{'access':{'allow':![],'reason':_0x234357(0x2ae),'token':null}}):io['to'](_0x39b362)[_0x234357(0x1ac)](_0x234357(0x1f2),{'access':{'allow':![],'reason':_0x234357(0x2d0),'token':null}})),devices[_0x39b362][_0x234357(0x261)]['token']=null;},_0x304bdd);}function setTokenRefresh(_0x19846e){const _0x247235=_0xb2a776;if(devices[_0x19846e]['pidRefreshToken'])clearTimeout(devices[_0x19846e][_0x247235(0x275)]);devices[_0x19846e][_0x247235(0x275)]=setTimeout(()=>{const _0x401c5f=_0x247235;getClientsWithUuid(_0x19846e)[_0x401c5f(0x20d)]!=0x0?(devices[_0x19846e][_0x401c5f(0x261)]=refreshToken(_0x19846e),io['to'](_0x19846e)[_0x401c5f(0x1ac)](_0x401c5f(0x1f2),{'status':_0x401c5f(0x2d1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x19846e][_0x401c5f(0x261)],'externalip':devices[_0x19846e]['ip'],'publicKey':secure[_0x401c5f(0x27d)]}),setTokenRefresh(_0x19846e)):clearTimeout(devices[_0x19846e][_0x401c5f(0x275)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x34a464){const _0xca6653=_0xb2a776,_0x36a7f3=getClient(_0x34a464['id'])[_0xca6653(0x293)];_0x34a464['emit'](_0xca6653(0x2c7),config),_0x34a464[_0xca6653(0x1ac)](_0xca6653(0x1ea),cleanSettings()),_0x34a464['on'](_0xca6653(0x29e),_0x1acb36=>{const _0x557ca9=_0xca6653;if(validateAccess(_0x1acb36,_0x36a7f3)['allow'])addBot();else logging(_0x557ca9(0x1a8));}),_0x34a464['on'](_0xca6653(0x1ca),(_0x68aecd,_0x17e237)=>{const _0x4d65e6=_0xca6653;if(validateAccess(_0x17e237,_0x36a7f3)[_0x4d65e6(0x2c5)])toggleBot(_0x68aecd[_0x4d65e6(0x25c)],_0x68aecd[_0x4d65e6(0x1f2)],_0x68aecd[_0x4d65e6(0x1de)]);else logging(_0x4d65e6(0x1c1));}),_0x34a464['on'](_0xca6653(0x2e4),(_0x173b87,_0x4b36f0)=>{const _0x30e061=_0xca6653;if(validateAccess(_0x4b36f0,_0x36a7f3)['allow'])deleteBot(_0x173b87);else logging(_0x30e061(0x29a));}),_0x34a464['on'](_0xca6653(0x1f0),(_0x40b538,_0x25dbe3)=>{const _0x285e4e=_0xca6653;if(validateAccess(_0x25dbe3,_0x36a7f3)[_0x285e4e(0x2c5)])storeSettings(_0x40b538,!![]);else logging(_0x285e4e(0x215));}),_0x34a464['on'](_0xca6653(0x29c),(_0x175982,_0x4cee66)=>{const _0x41d1f=_0xca6653;if(validateAccess(_0x4cee66,_0x36a7f3)[_0x41d1f(0x2c5)])updateBB();else logging(_0x41d1f(0x215));}),_0x34a464['on']('logout',_0x13a19f=>{const _0x1de1bf=_0xca6653;if(validateAccess(_0x13a19f,_0x36a7f3)[_0x1de1bf(0x2c5)]){if(devices[_0x36a7f3]['pidRefreshToken'])clearTimeout(devices[_0x36a7f3][_0x1de1bf(0x275)]);if(devices[_0x36a7f3]['pidExpireLogin'])clearTimeout(devices[_0x36a7f3][_0x1de1bf(0x1cc)]);removeSocketListeners(getClient(_0x34a464['id'])[_0x1de1bf(0x293)]),addBlacklist(_0x36a7f3),devices[_0x36a7f3]['telegramIpApproval']=null,devices[_0x36a7f3]['telegram2FaApproval']=null,devices[_0x36a7f3][_0x1de1bf(0x261)][_0x1de1bf(0x21b)]=null,io['to'](getClient(_0x34a464['id'])[_0x1de1bf(0x293)])['emit'](_0x1de1bf(0x1f2),{'access':{'allow':![],'reason':_0x1de1bf(0x26d),'token':null}});}else logging('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x439eee){const _0x5dcffc=_0xb2a776,_0x3ebd13=getClient(_0x439eee['id'])[_0x5dcffc(0x1ed)],_0x28ae28=getClient(_0x439eee['id'])[_0x5dcffc(0x293)];_0x439eee['on'](_0x5dcffc(0x1a2),(_0x99912b,_0x10bc00)=>{const _0xb953f4=_0x5dcffc;if(validateAccess(_0x10bc00,_0x28ae28)[_0xb953f4(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13]['send']({'function':_0xb953f4(0x2de),'args':_0x99912b});}else logging(_0xb953f4(0x1c0));}),_0x439eee['on']('get-portfolio',(_0x20e37c,_0x2dcf7f)=>{const _0x54f010=_0x5dcffc;if(validateAccess(_0x2dcf7f,_0x28ae28)[_0x54f010(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13][_0x54f010(0x1c5)]({'function':_0x54f010(0x27f),'args':_0x20e37c});}else logging(_0x54f010(0x1be));}),_0x439eee['on'](_0x5dcffc(0x265),(_0x3a26f6,_0xe460d2)=>{const _0x5bbb07=_0x5dcffc;if(validateAccess(_0xe460d2,_0x28ae28)[_0x5bbb07(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13][_0x5bbb07(0x1c5)]({'function':'storeConfiguration','args':_0x3a26f6});}else logging(_0x5bbb07(0x1ef));}),_0x439eee['on'](_0x5dcffc(0x2d7),(_0x27229c,_0x4aebe8)=>{const _0x447deb=_0x5dcffc;if(validateAccess(_0x4aebe8,_0x28ae28)[_0x447deb(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13]['send']({'function':_0x447deb(0x222),'args':_0x27229c});}else logging(_0x447deb(0x1e9));}),_0x439eee['on']('get-starting-balances',_0x14e2fd=>{const _0x2a4e8a=_0x5dcffc;if(validateAccess(_0x14e2fd,_0x28ae28)[_0x2a4e8a(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13]['send']({'function':_0x2a4e8a(0x2af),'args':null});}else logging(_0x2a4e8a(0x2da));}),_0x439eee['on'](_0x5dcffc(0x1d0),(_0x4207ff,_0x16bce5)=>{const _0x4c66f3=_0x5dcffc;if(validateAccess(_0x16bce5,_0x28ae28)[_0x4c66f3(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13][_0x4c66f3(0x1c5)]({'function':_0x4c66f3(0x1fc),'args':_0x4207ff});}else logging(_0x4c66f3(0x28b));}),_0x439eee['on'](_0x5dcffc(0x204),_0x258626=>{const _0x509a6f=_0x5dcffc;if(validateAccess(_0x258626,_0x28ae28)[_0x509a6f(0x2c5)]){if(pid[_0x3ebd13])pid[_0x3ebd13][_0x509a6f(0x1c5)]({'function':'cancelLoading','args':null});}else logging(_0x509a6f(0x2a5));}),_0x439eee['on'](_0x5dcffc(0x1df),_0x488b25=>{const _0x122dc5=_0x5dcffc;if(validateAccess(_0x488b25,_0x28ae28)[_0x122dc5(0x2c5)]){if(devices[_0x28ae28][_0x122dc5(0x275)])clearTimeout(devices[_0x28ae28][_0x122dc5(0x275)]);if(devices[_0x28ae28]['pidExpireLogin'])clearTimeout(devices[_0x28ae28]['pidExpireLogin']);removeSocketListeners(getClient(_0x439eee['id'])[_0x122dc5(0x293)]),addBlacklist(_0x28ae28),devices[_0x28ae28][_0x122dc5(0x199)]=null,devices[_0x28ae28]['telegram2FaApproval']=null,devices[_0x28ae28][_0x122dc5(0x261)]['token']=null,io['to'](getClient(_0x439eee['id'])[_0x122dc5(0x293)])['emit']('status',{'access':{'allow':![],'reason':_0x122dc5(0x26d),'token':null}});}else logging(_0x122dc5(0x26f));});}function removeSocketListeners(_0x232f32){const _0x483df9=_0xb2a776;getClientsWithUuid(_0x232f32)[_0x483df9(0x217)](_0x223497=>{const _0xdec5f2=_0x483df9;getSocket(_0x223497['id'])[_0xdec5f2(0x28a)]();});}function cleanSettings(){const _0x4510af=_0xb2a776;let _0x26c496=settings;return settings[_0x4510af(0x2ca)]&&settings[_0x4510af(0x2ca)]!=''&&(_0x26c496={..._0x26c496,'telegramToken':_0x4510af(0x1e8)}),settings['bbPassword']&&settings[_0x4510af(0x1fa)]!=''&&(_0x26c496={..._0x26c496,'bbPassword':_0x4510af(0x1e8)}),_0x26c496;}function updateBB(){process['send']({'update':!![]},_0x28ae74=>{});}function startBot(_0x1cd67a,_0x297c7e,_0x3395cb){const _0x1e5074=_0xb2a776;let _0x401f9c=![];const _0x3240f5=_0x1cd67a[0x0];_0x297c7e={..._0x297c7e,'stdio':[_0x1e5074(0x2a0),_0x1e5074(0x2a0),_0x1e5074(0x2a0),_0x1e5074(0x1ab)]},pid[_0x3240f5]=childProcess['fork'](botfile,_0x1cd67a,_0x297c7e),pid[_0x3240f5]['on'](_0x1e5074(0x2e5),_0x2b1d65=>{const _0x5b2780=_0x1e5074;switch(Object[_0x5b2780(0x281)](_0x2b1d65)[0x0]){case _0x5b2780(0x2d4):updateBotName(_0x3240f5,_0x2b1d65[_0x5b2780(0x2d4)]);break;case _0x5b2780(0x1f2):updateStatus(_0x3240f5,_0x2b1d65[_0x5b2780(0x1f2)]);break;case _0x5b2780(0x1de):updateLive(_0x3240f5,_0x2b1d65[_0x5b2780(0x1de)]);break;case _0x5b2780(0x26e):updateLive(_0x3240f5,_0x2b1d65[_0x5b2780(0x26e)]),io['to'](_0x3240f5)[_0x5b2780(0x1ac)]('status',{'access':{'allow':![],'reason':_0x5b2780(0x250),'token':null}});break;case _0x5b2780(0x2e8):_0x2b1d65[_0x5b2780(0x2e8)]==_0x5b2780(0x208)&&stopBot(_0x3240f5);_0x2b1d65[_0x5b2780(0x2e8)]==_0x5b2780(0x203)&&toggleBot(_0x3240f5,_0x5b2780(0x2ad),_0x5b2780(0x1c7));break;case'telegram':sendTelegram(_0x3240f5,_0x2b1d65[_0x5b2780(0x1d8)]);break;case _0x5b2780(0x213):io['to'](_0x3240f5)[_0x5b2780(0x1ac)](_0x2b1d65['function'],_0x2b1d65['args']);break;}}),pid[_0x3240f5]['on']('error',function(_0x484dde){if(_0x401f9c)return;_0x401f9c=!![],_0x3395cb(_0x484dde);}),pid[_0x3240f5]['on'](_0x1e5074(0x256),function(_0x1da26a){const _0x102989=_0x1e5074;if(_0x401f9c)return;_0x401f9c=!![],_0x3395cb(null);const _0x4496c3=dbConfig['get'](_0x102989(0x2c7))[_0x102989(0x1c6)]({'botID':_0x3240f5})['value']();_0x4496c3&&(_0x4496c3['status']==_0x102989(0x259)||_0x4496c3[_0x102989(0x1f2)]==_0x102989(0x260))&&(updateLive(_0x3240f5,_0x102989(0x1c7)),logging(_0x102989(0x1e3)+_0x3240f5),startBot([_0x3240f5,userID],{'cwd':bbpath},function(_0x505c29){if(_0x505c29)logging(_0x505c29);}));});}function stopBot(_0xe828a4){const _0x1690ad=_0xb2a776;getClientsWithBotID(_0xe828a4)[_0x1690ad(0x217)](_0x4f1c01=>{const _0x31907f=_0x1690ad;getSocket(_0x4f1c01['id'])[_0x31907f(0x205)](!![]),removeClient(_0x4f1c01['id']);});if(pid[_0xe828a4])pid[_0xe828a4][_0x1690ad(0x203)]();}function addBot(){const _0x5189f7=_0xb2a776;let _0x7cff8;for(let _0x4eca30=0x1;_0x4eca30<0x3e9;_0x4eca30++){_0x7cff8=_0x4eca30[_0x5189f7(0x1bb)]()[_0x5189f7(0x1db)](0x3,'0');let _0x34060f=config[_0x5189f7(0x1c6)](_0x419c8b=>_0x419c8b['botID']==_0x7cff8);if(!_0x34060f)break;}if(_0x7cff8===_0x5189f7(0x291)){logging(_0x5189f7(0x1a7));return;}logging(_0x5189f7(0x21f)+_0x7cff8),dbConfig[_0x5189f7(0x2e6)](_0x5189f7(0x2c7))[_0x5189f7(0x1b5)]({'botID':_0x7cff8,'botname':'Bot\x20'+_0x7cff8,'status':_0x5189f7(0x260),'live':''})[_0x5189f7(0x29f)](),startBot([_0x7cff8,userID],{'cwd':bbpath},function(_0x4732ed){if(_0x4732ed)logging(_0x4732ed);}),config=getConfiguration(),io['to'](_0x5189f7(0x1bd))[_0x5189f7(0x1ac)](_0x5189f7(0x2c7),config);}function deleteBot(_0x1b59f4){const _0x210c3f=_0xb2a776;getClientsWithBotID(_0x1b59f4)[_0x210c3f(0x217)](_0x3e5c50=>{getSocket(_0x3e5c50['id'])['disconnect'](!![]),removeClient(_0x3e5c50['id']);}),dbConfig['get'](_0x210c3f(0x2c7))[_0x210c3f(0x1d6)]({'botID':_0x1b59f4})['write'](),logging(_0x210c3f(0x2b7)+_0x1b59f4),stopBot(_0x1b59f4);try{fs['unlinkSync'](path[_0x210c3f(0x2c1)](configpath,_0x210c3f(0x274)+_0x1b59f4+_0x210c3f(0x2ac))),fs[_0x210c3f(0x24f)](path[_0x210c3f(0x2c1)](configpath,_0x210c3f(0x274)+_0x1b59f4+_0x210c3f(0x2b1))),fs[_0x210c3f(0x24f)](path[_0x210c3f(0x2c1)](configpath,_0x210c3f(0x274)+_0x1b59f4+'-performance.json')),fs[_0x210c3f(0x24f)](path[_0x210c3f(0x2c1)](configpath,_0x210c3f(0x274)+_0x1b59f4+_0x210c3f(0x2bd)));}catch(_0x56ff9d){if(_0x56ff9d)logging(_0x210c3f(0x25d),_0x56ff9d);}config=getConfiguration(),io['to'](_0x210c3f(0x1bd))['emit'](_0x210c3f(0x2c7),config);}function toggleBot(_0x2c51ab,_0x2be526,_0x1c22aa){const _0x6119f2=_0xb2a776;dbConfig[_0x6119f2(0x2e6)](_0x6119f2(0x2c7))['find']({'botID':_0x2c51ab})[_0x6119f2(0x279)]({'status':_0x2be526})[_0x6119f2(0x279)]({'live':_0x1c22aa})[_0x6119f2(0x29f)]();if(_0x2be526==_0x6119f2(0x259)||_0x2be526=='new')logging(_0x6119f2(0x211)+_0x2c51ab),startBot([_0x2c51ab,userID],{'cwd':bbpath},function(_0x348420){if(_0x348420)logging(_0x348420);});else(_0x2be526==_0x6119f2(0x2ad)||_0x2be526=='new-disabled')&&(logging('disabled\x20Bot\x20'+_0x2c51ab),stopBot(_0x2c51ab));config=getConfiguration(),io['to']('botmanager')['emit'](_0x6119f2(0x2c7),config);}function toggleStatus(_0x49ce60){const _0x5c8db4=_0xb2a776;let _0x45fe71=dbConfig['get'](_0x5c8db4(0x2c7))[_0x5c8db4(0x1c6)]({'botID':_0x49ce60})[_0x5c8db4(0x1d7)](),_0x193979;if(_0x45fe71[_0x5c8db4(0x1f2)]===_0x5c8db4(0x259))_0x193979=_0x5c8db4(0x2ad);else{if(_0x45fe71['status']===_0x5c8db4(0x260))_0x193979=_0x5c8db4(0x25a);else{if(_0x45fe71[_0x5c8db4(0x1f2)]==='new-disabled')_0x193979='new';else{if(_0x45fe71[_0x5c8db4(0x1f2)]===_0x5c8db4(0x2ad))_0x193979=_0x5c8db4(0x259);}}}return _0x193979;}function updateStatus(_0x180cf5,_0x3a643d){const _0x3cfd1d=_0xb2a776;dbConfig['get'](_0x3cfd1d(0x2c7))[_0x3cfd1d(0x1c6)]({'botID':_0x180cf5})[_0x3cfd1d(0x279)]({'status':_0x3a643d})['write'](),config=getConfiguration(),io['to'](_0x3cfd1d(0x1bd))['emit'](_0x3cfd1d(0x2c7),config);}function updateLive(_0x5d6af3,_0x5fcfcb){const _0x4f0518=_0xb2a776;dbConfig[_0x4f0518(0x2e6)](_0x4f0518(0x2c7))[_0x4f0518(0x1c6)]({'botID':_0x5d6af3})['assign']({'live':_0x5fcfcb})[_0x4f0518(0x29f)](),config=getConfiguration(),io['to'](_0x4f0518(0x1bd))['emit'](_0x4f0518(0x2c7),config);}function updateBotName(_0x15956a,_0x5dd4a9){const _0x45231d=_0xb2a776;dbConfig['get']('bots')[_0x45231d(0x1c6)]({'botID':_0x15956a})['assign']({'botname':_0x5dd4a9})[_0x45231d(0x29f)](),config=getConfiguration(),io['to'](_0x45231d(0x1bd))[_0x45231d(0x1ac)]('bots',config);}function telegramError(_0x1d53ac){const _0x3fb09a=_0xb2a776;console['log'](getTimeStamp()+_0x3fb09a(0x234));}function validateTelegram(_0x352ef0){const _0x42fc55=_0xb2a776;if(_0x352ef0[_0x42fc55(0x251)][_0x42fc55(0x201)]!=settings[_0x42fc55(0x196)]&&'@'+_0x352ef0[_0x42fc55(0x251)][_0x42fc55(0x201)]!=settings[_0x42fc55(0x196)])return tgBot[_0x42fc55(0x209)](_0x352ef0[_0x42fc55(0x1ba)]['id'],_0x42fc55(0x253),{'parse_mode':_0x42fc55(0x20b)})[_0x42fc55(0x1f6)](_0x1111b9=>{telegramError(_0x1111b9);}),![];return!![];}async function initTelegram(){const _0x2f8341=_0xb2a776;if(tgBot)tgBot[_0x2f8341(0x2bf)](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings['telegramToken'],{'polling':!![]});let _0x183386=_0x2f8341(0x269);_0x183386+='\x0a',_0x183386+='/enable\x20-\x20enable\x20notifications\x0a',_0x183386+=_0x2f8341(0x29b),_0x183386+=_0x2f8341(0x2ce),_0x183386+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x183386+=_0x2f8341(0x1b6),_0x183386+=_0x2f8341(0x19e),_0x183386+=_0x2f8341(0x1e6),_0x183386+=_0x2f8341(0x2c4);let _0x1f8bc5='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0x1f8bc5+='\x0a',_0x1f8bc5+=_0x183386,tgBot['onText'](/\/start/,_0x432789=>{const _0x5e826c=_0x2f8341;if(!validateTelegram(_0x432789))return;if(settings['telegramChatId']!=_0x432789[_0x5e826c(0x1ba)]['id'])updateSetting(_0x5e826c(0x227),_0x432789[_0x5e826c(0x1ba)]['id']);updateSetting('telegramEnabled',!![]),tgBot[_0x5e826c(0x209)](_0x432789['chat']['id'],_0x1f8bc5)[_0x5e826c(0x1f6)](_0x1177cf=>{telegramError(_0x1177cf);});}),tgBot['onText'](/\/enable/,_0x167942=>{const _0x4c7ce8=_0x2f8341;if(!validateTelegram(_0x167942))return;if(settings[_0x4c7ce8(0x227)]!=_0x167942[_0x4c7ce8(0x1ba)]['id'])updateSetting(_0x4c7ce8(0x227),_0x167942[_0x4c7ce8(0x1ba)]['id']);updateSetting(_0x4c7ce8(0x239),!![]),tgBot[_0x4c7ce8(0x209)](_0x167942[_0x4c7ce8(0x1ba)]['id'],'Notifications\x20enabled')['catch'](_0x270632=>{telegramError(_0x270632);});}),tgBot[_0x2f8341(0x2b5)](/\/config/,async _0x5b1eca=>{const _0x9aafed=_0x2f8341;if(!validateTelegram(_0x5b1eca))return;tgBot[_0x9aafed(0x25f)](_0x9aafed(0x268)),tgBot[_0x9aafed(0x209)](_0x5b1eca[_0x9aafed(0x1ba)]['id'],_0x9aafed(0x244),{'reply_markup':{'inline_keyboard':[[{'text':_0x9aafed(0x263),'callback_data':'orders'},{'text':_0x9aafed(0x252),'callback_data':'alerts'},{'text':_0x9aafed(0x223),'callback_data':_0x9aafed(0x24b)}]]}})[_0x9aafed(0x1f6)](_0x46bf95=>{telegramError(_0x46bf95);}),tgBot['on'](_0x9aafed(0x268),async _0x6086e3=>{const _0x393ba3=_0x9aafed,_0x461ff4=_0x6086e3[_0x393ba3(0x22a)],_0x2aa725=_0x6086e3[_0x393ba3(0x2e5)];tgBot[_0x393ba3(0x19c)](_0x6086e3['id'])[_0x393ba3(0x206)](async()=>{const _0x59574a=_0x393ba3;_0x461ff4==_0x59574a(0x1d9)&&(updateSetting(_0x59574a(0x249),_0x59574a(0x1d9)),updateSetting(_0x59574a(0x239),!![]),await tgBot[_0x59574a(0x209)](_0x2aa725[_0x59574a(0x1ba)]['id'],_0x59574a(0x238))[_0x59574a(0x1f6)](_0x17e523=>{telegramError(_0x17e523);}));_0x461ff4==_0x59574a(0x298)&&(updateSetting(_0x59574a(0x249),'alerts'),updateSetting(_0x59574a(0x239),!![]),await tgBot[_0x59574a(0x209)](_0x2aa725[_0x59574a(0x1ba)]['id'],_0x59574a(0x27c))[_0x59574a(0x1f6)](_0x18baf9=>{telegramError(_0x18baf9);}));_0x461ff4==_0x59574a(0x24b)&&(updateSetting(_0x59574a(0x249),'all'),updateSetting(_0x59574a(0x239),!![]),await tgBot[_0x59574a(0x209)](_0x2aa725['chat']['id'],'Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications')[_0x59574a(0x1f6)](_0xd20f32=>{telegramError(_0xd20f32);}));if(!settings[_0x59574a(0x227)])tgBot[_0x59574a(0x209)](_0x2aa725[_0x59574a(0x1ba)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')[_0x59574a(0x1f6)](_0x4cfccf=>{telegramError(_0x4cfccf);});}),tgBot[_0x393ba3(0x25f)](_0x393ba3(0x268));});}),tgBot[_0x2f8341(0x2b5)](/\/status/,_0x540b29=>{const _0x9f5739=_0x2f8341;if(!validateTelegram(_0x540b29))return;let _0x102ddc='<b>Balance\x20Bot\x20status:</b>\x0a';config['forEach'](_0x12fa91=>{const _0x2c4b4b=_0x33d5;_0x102ddc+='Bot\x20'+_0x12fa91[_0x2c4b4b(0x25c)]+_0x2c4b4b(0x287)+_0x12fa91['botname']+':\x20'+_0x12fa91[_0x2c4b4b(0x1f2)]+'\x20/\x20'+_0x12fa91[_0x2c4b4b(0x1de)]+'\x0a';}),_0x102ddc+='\x0a',_0x102ddc+=_0x9f5739(0x2a6),_0x102ddc+=!settings[_0x9f5739(0x239)]?_0x9f5739(0x255):'Notifications\x20enabled\x0a',_0x102ddc+=settings['telegramEnabled']?settings['telegramEvents']==_0x9f5739(0x24b)?_0x9f5739(0x1a4):_0x9f5739(0x1d5)+settings['telegramEvents']+_0x9f5739(0x218):'',tgBot[_0x9f5739(0x209)](_0x540b29['chat']['id'],_0x102ddc,{'parse_mode':_0x9f5739(0x20b)})[_0x9f5739(0x1f6)](_0x40fa60=>{telegramError(_0x40fa60);});}),tgBot[_0x2f8341(0x2b5)](/\/restart/,_0x2f054f=>{const _0x4a10b8=_0x2f8341;if(!validateTelegram(_0x2f054f))return;tgBot[_0x4a10b8(0x25f)](_0x4a10b8(0x268));const _0x23baee=getEnabledBots();if(_0x23baee[_0x4a10b8(0x20d)]==0x0)tgBot[_0x4a10b8(0x209)](_0x2f054f['chat']['id'],_0x4a10b8(0x214))['catch'](_0x1cf328=>{telegramError(_0x1cf328);});else{if(_0x23baee['length']>0x1)_0x23baee['push']({'botID':'all'});let _0x5abc0b=[],_0x5a91b2=[];const _0xce33dc=_0x23baee[_0x4a10b8(0x20d)]%0x4==0x0||_0x23baee['length']%0x4==0x3||_0x23baee[_0x4a10b8(0x20d)]%0x3==0x1?0x4:0x3;let _0xb4d2c1=0x0;_0x23baee[_0x4a10b8(0x217)]((_0x219989,_0x4abf38)=>{const _0x1297df=_0x4a10b8;if(_0x4abf38%_0xce33dc==0x0)_0x5a91b2=[];_0x5a91b2[_0x1297df(0x1b5)]({'text':_0x219989['botID']=='all'?_0x1297df(0x258):_0x1297df(0x1b7)+_0x219989[_0x1297df(0x25c)],'callback_data':_0x219989[_0x1297df(0x25c)]}),_0x4abf38%_0xce33dc==0x0&&(_0x5abc0b[_0xb4d2c1]=_0x5a91b2,_0xb4d2c1++);}),tgBot[_0x4a10b8(0x209)](_0x2f054f[_0x4a10b8(0x1ba)]['id'],_0x4a10b8(0x19d),{'reply_markup':{'inline_keyboard':_0x5abc0b}})[_0x4a10b8(0x1f6)](_0x2ecc0a=>{telegramError(_0x2ecc0a);}),tgBot['on'](_0x4a10b8(0x268),async _0xfe72dd=>{const _0x7f1a51=_0x4a10b8,_0x4b8e73=_0xfe72dd[_0x7f1a51(0x22a)],_0x50ea1a=_0xfe72dd[_0x7f1a51(0x2e5)];tgBot[_0x7f1a51(0x19c)](_0xfe72dd['id'])[_0x7f1a51(0x206)](async()=>{const _0x51f225=_0x7f1a51;if(_0x4b8e73=='all'){if(settings['telegramEvents']==_0x51f225(0x1d9))tgBot[_0x51f225(0x209)](_0x50ea1a[_0x51f225(0x1ba)]['id'],_0x51f225(0x232))[_0x51f225(0x1f6)](_0x5e50ba=>{telegramError(_0x5e50ba);});config[_0x51f225(0x217)](_0x479b00=>{stopBot(_0x479b00['botID']);});}else{if(settings[_0x51f225(0x249)]==_0x51f225(0x1d9))tgBot[_0x51f225(0x209)](_0x50ea1a[_0x51f225(0x1ba)]['id'],_0x51f225(0x297)+_0x4b8e73)[_0x51f225(0x1f6)](_0x371a36=>{telegramError(_0x371a36);});stopBot(_0x4b8e73);}}),tgBot[_0x7f1a51(0x25f)](_0x7f1a51(0x268));});}}),tgBot[_0x2f8341(0x2b5)](/\/on/,_0x50e421=>{const _0x5aaf53=_0x2f8341;if(!validateTelegram(_0x50e421))return;tgBot['removeListener'](_0x5aaf53(0x268));const _0x429e92=getDisabledBots();if(_0x429e92[_0x5aaf53(0x20d)]==0x0)tgBot[_0x5aaf53(0x209)](_0x50e421[_0x5aaf53(0x1ba)]['id'],'All\x20bots\x20running\x20right\x20now')[_0x5aaf53(0x1f6)](_0xb09ba3=>{telegramError(_0xb09ba3);});else{if(_0x429e92['length']>0x1)_0x429e92[_0x5aaf53(0x1b5)]({'botID':_0x5aaf53(0x24b)});let _0x52505f=[],_0xdc6499=[];const _0x435e5a=_0x429e92['length']%0x4==0x0||_0x429e92[_0x5aaf53(0x20d)]%0x4==0x3||_0x429e92[_0x5aaf53(0x20d)]%0x3==0x1?0x4:0x3;let _0x4483ec=0x0;_0x429e92[_0x5aaf53(0x217)]((_0x450613,_0x5ef858)=>{const _0x37ce7d=_0x5aaf53;if(_0x5ef858%_0x435e5a==0x0)_0xdc6499=[];_0xdc6499['push']({'text':_0x450613[_0x37ce7d(0x25c)]==_0x37ce7d(0x24b)?_0x37ce7d(0x258):_0x37ce7d(0x1b7)+_0x450613[_0x37ce7d(0x25c)],'callback_data':_0x450613[_0x37ce7d(0x25c)]}),_0x5ef858%_0x435e5a==0x0&&(_0x52505f[_0x4483ec]=_0xdc6499,_0x4483ec++);}),tgBot[_0x5aaf53(0x209)](_0x50e421[_0x5aaf53(0x1ba)]['id'],_0x5aaf53(0x1f3),{'reply_markup':{'inline_keyboard':_0x52505f}})[_0x5aaf53(0x1f6)](_0x354eff=>{telegramError(_0x354eff);}),tgBot['on']('callback_query',async _0x6aa7e3=>{const _0x15e3ab=_0x5aaf53,_0x24ef26=_0x6aa7e3[_0x15e3ab(0x22a)],_0x68a9a=_0x6aa7e3[_0x15e3ab(0x2e5)];tgBot['answerCallbackQuery'](_0x6aa7e3['id'])[_0x15e3ab(0x206)](async()=>{const _0x107db3=_0x15e3ab;if(_0x24ef26==_0x107db3(0x24b)){if(settings[_0x107db3(0x249)]==_0x107db3(0x1d9))tgBot[_0x107db3(0x209)](_0x68a9a[_0x107db3(0x1ba)]['id'],_0x107db3(0x264))[_0x107db3(0x1f6)](_0x496d99=>{telegramError(_0x496d99);});_0x429e92[_0x107db3(0x217)](_0x4a0df1=>{const _0x49bb9f=_0x107db3;if(_0x4a0df1[_0x49bb9f(0x25c)]!=_0x49bb9f(0x24b))toggleBot(_0x4a0df1[_0x49bb9f(0x25c)],toggleStatus(_0x4a0df1['botID']),_0x49bb9f(0x1c7));});}else{if(settings[_0x107db3(0x249)]==_0x107db3(0x1d9))tgBot[_0x107db3(0x209)](_0x68a9a['chat']['id'],'Bot\x20Mgr\x20>\x20starting\x20Bot\x20'+_0x24ef26)['catch'](_0x3ca73a=>{telegramError(_0x3ca73a);});toggleBot(_0x24ef26,toggleStatus(_0x24ef26),_0x107db3(0x1c7));}}),tgBot['removeListener'](_0x15e3ab(0x268));});}}),tgBot[_0x2f8341(0x2b5)](/\/off/,_0x25bcf4=>{const _0x567683=_0x2f8341;if(!validateTelegram(_0x25bcf4))return;tgBot['removeListener'](_0x567683(0x268));const _0x51b0ff=getEnabledBots();if(_0x51b0ff[_0x567683(0x20d)]==0x0)tgBot['sendMessage'](_0x25bcf4[_0x567683(0x1ba)]['id'],_0x567683(0x214))['catch'](_0x2606e2=>{telegramError(_0x2606e2);});else{if(_0x51b0ff[_0x567683(0x20d)]>0x1)_0x51b0ff[_0x567683(0x1b5)]({'botID':'all'});let _0x591e3f=[],_0x3ab911=[];const _0x4243c6=_0x51b0ff[_0x567683(0x20d)]%0x4==0x0||_0x51b0ff[_0x567683(0x20d)]%0x4==0x3||_0x51b0ff['length']%0x3==0x1?0x4:0x3;let _0xf1bbbc=0x0;_0x51b0ff[_0x567683(0x217)]((_0x548041,_0x4718aa)=>{const _0x5f122b=_0x567683;if(_0x4718aa%_0x4243c6==0x0)_0x3ab911=[];_0x3ab911['push']({'text':_0x548041['botID']=='all'?'All\x20bots':_0x5f122b(0x1b7)+_0x548041[_0x5f122b(0x25c)],'callback_data':_0x548041['botID']}),_0x4718aa%_0x4243c6==0x0&&(_0x591e3f[_0xf1bbbc]=_0x3ab911,_0xf1bbbc++);}),tgBot['sendMessage'](_0x25bcf4[_0x567683(0x1ba)]['id'],_0x567683(0x288),{'reply_markup':{'inline_keyboard':_0x591e3f}})[_0x567683(0x1f6)](_0x24a227=>{telegramError(_0x24a227);}),tgBot['on'](_0x567683(0x268),async _0x25be05=>{const _0xeb6795=_0x567683,_0x11adb1=_0x25be05[_0xeb6795(0x22a)],_0x2df21b=_0x25be05[_0xeb6795(0x2e5)];tgBot[_0xeb6795(0x19c)](_0x25be05['id'])[_0xeb6795(0x206)](async()=>{const _0x2deb3b=_0xeb6795;if(_0x11adb1==_0x2deb3b(0x24b)){if(settings[_0x2deb3b(0x249)]==_0x2deb3b(0x1d9))tgBot[_0x2deb3b(0x209)](_0x2df21b[_0x2deb3b(0x1ba)]['id'],_0x2deb3b(0x1ee))[_0x2deb3b(0x1f6)](_0x235c68=>{telegramError(_0x235c68);});_0x51b0ff['forEach'](_0x32df4f=>{const _0x479d78=_0x2deb3b;if(_0x32df4f['botID']!='all')toggleBot(_0x32df4f[_0x479d78(0x25c)],toggleStatus(_0x32df4f[_0x479d78(0x25c)]),_0x479d78(0x1c7));});}else{if(settings[_0x2deb3b(0x249)]=='orders')tgBot[_0x2deb3b(0x209)](_0x2df21b[_0x2deb3b(0x1ba)]['id'],_0x2deb3b(0x286)+_0x11adb1)[_0x2deb3b(0x1f6)](_0x479f59=>{telegramError(_0x479f59);});toggleBot(_0x11adb1,toggleStatus(_0x11adb1),_0x2deb3b(0x1c7));}}),tgBot[_0xeb6795(0x25f)](_0xeb6795(0x268));});}}),tgBot[_0x2f8341(0x2b5)](/\/disable/,_0x2ee8bd=>{const _0x525b44=_0x2f8341;if(!validateTelegram(_0x2ee8bd))return;tgBot[_0x525b44(0x209)](_0x2ee8bd['chat']['id'],_0x525b44(0x2aa))[_0x525b44(0x1f6)](_0x216fef=>{telegramError(_0x216fef);}),updateSetting(_0x525b44(0x239),![]);}),tgBot[_0x2f8341(0x2b5)](/\/help/,_0x43e996=>{const _0x40d5da=_0x2f8341;if(!validateTelegram(_0x43e996))return;tgBot['sendMessage'](_0x43e996[_0x40d5da(0x1ba)]['id'],_0x183386)[_0x40d5da(0x1f6)](_0x100d64=>{telegramError(_0x100d64);});}),tgBot['on'](_0x2f8341(0x226),_0x11c204=>{const _0x5b2593=_0x2f8341;_0x11c204[_0x5b2593(0x1bb)]()[_0x5b2593(0x2b9)](_0x5b2593(0x1c4))&&(logging(_0x5b2593(0x2ab)),tgBot[_0x5b2593(0x2bf)](),tgBot=null,io['to'](_0x5b2593(0x1bd))[_0x5b2593(0x1ac)](_0x5b2593(0x2d2),_0x5b2593(0x2ab)));}),process[_0x2f8341(0x2cf)](_0x2f8341(0x1c2),()=>{const _0x590223=_0x2f8341;if(tgBot)tgBot[_0x590223(0x2bf)]();process[_0x590223(0x256)](0x1);}),process['once'](_0x2f8341(0x1ae),()=>{const _0x28d883=_0x2f8341;if(tgBot)tgBot['stopPolling']();process[_0x28d883(0x256)](0x1);});}}function disableTelegram(){const _0x2c08ac=_0xb2a776;tgBot&&(tgBot[_0x2c08ac(0x2bf)](),tgBot=null);}function sendTelegram(_0x19d264,_0x25895c){const _0x1de54f=_0xb2a776;if(settings[_0x1de54f(0x239)]){if(settings[_0x1de54f(0x249)]==_0x1de54f(0x24b)||(_0x25895c['type']==_0x1de54f(0x22f)||_0x25895c[_0x1de54f(0x296)]==_0x1de54f(0x221))&&settings[_0x1de54f(0x249)]=='alerts'||_0x25895c[_0x1de54f(0x296)]==_0x1de54f(0x1b4)&&settings[_0x1de54f(0x249)]=='orders'){if(tgBot&&settings[_0x1de54f(0x227)]){if(_0x25895c[_0x1de54f(0x2be)])tgBot[_0x1de54f(0x209)](settings[_0x1de54f(0x227)],_0x25895c['botname']+_0x1de54f(0x285)+_0x25895c[_0x1de54f(0x22e)])[_0x1de54f(0x1f6)](_0x2c7213=>{telegramError(_0x2c7213);});else tgBot['sendMessage'](settings['telegramChatId'],_0x1de54f(0x1b7)+_0x19d264+_0x1de54f(0x285)+_0x25895c[_0x1de54f(0x22e)])[_0x1de54f(0x1f6)](_0x1b8823=>{telegramError(_0x1b8823);});}}}}function getDeviceWithIp(_0x115d4b){const _0x1a3905=_0xb2a776;return devices[_0x1a3905(0x1c6)](_0x18107e=>_0x18107e['ip']===_0x115d4b);}function temporaryAccess2FA(_0x12bf2b,_0x455e63){const _0x18cf71=_0xb2a776;let _0x10e32f=new Date(),_0xf0bc47=![];if(lastIpApproval){if(_0x10e32f-lastIpApproval<0x1388)_0xf0bc47=!![];}lastIpApproval=new Date();if(_0xf0bc47)return;tgBot&&settings[_0x18cf71(0x227)]&&(tgBot[_0x18cf71(0x25f)](_0x18cf71(0x268)),tgBot[_0x18cf71(0x209)](settings[_0x18cf71(0x227)],_0x18cf71(0x1af)+normalizeIP(_0x455e63)['show']+_0x18cf71(0x23f),{'parse_mode':_0x18cf71(0x20b),'reply_markup':{'inline_keyboard':[[{'text':_0x18cf71(0x1ce),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x18cf71(0x2b0),'callback_data':'30'},{'text':_0x18cf71(0x1b2),'callback_data':'reject'}]]}})[_0x18cf71(0x1f6)](_0x6dc079=>{telegramError(_0x6dc079);}),tgBot['on']('callback_query',async _0x40ae2d=>{const _0x9c4141=_0x18cf71,_0x5d4407=_0x40ae2d[_0x9c4141(0x22a)],_0xdd3f2=_0x40ae2d['message'];tgBot[_0x9c4141(0x19c)](_0x40ae2d['id'])['then'](async()=>{const _0xc68a3a=_0x9c4141;devices[_0x12bf2b][_0xc68a3a(0x199)]={'clientip':_0x455e63,'timestamp':new Date()[_0xc68a3a(0x2bc)](),'expiry':_0x5d4407},_0x5d4407!=_0xc68a3a(0x1b2)?(await tgBot[_0xc68a3a(0x209)](_0xdd3f2[_0xc68a3a(0x1ba)]['id'],_0xc68a3a(0x200)+_0x5d4407+_0xc68a3a(0x1ff),{'parse_mode':_0xc68a3a(0x20b)})['catch'](_0x22310d=>{telegramError(_0x22310d);}),io['to'](_0x12bf2b)['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}})):(await tgBot['sendMessage'](_0xdd3f2[_0xc68a3a(0x1ba)]['id'],_0xc68a3a(0x1d2))['catch'](_0x917103=>{telegramError(_0x917103);}),io['to'](_0x12bf2b)[_0xc68a3a(0x1ac)](_0xc68a3a(0x1f2),{'access':{'allow':![],'reason':_0xc68a3a(0x2c2),'token':null}}));}),tgBot['removeListener'](_0x9c4141(0x268));}));}function loginAccess2FA(_0x2ecffd,_0x1ff547){const _0x19d457=_0xb2a776;tgBot&&settings[_0x19d457(0x227)]&&(tgBot[_0x19d457(0x25f)]('callback_query'),tgBot[_0x19d457(0x209)](settings['telegramChatId'],_0x19d457(0x197)+normalizeIP(_0x1ff547)[_0x19d457(0x24a)]+'</b>\x20?',{'parse_mode':_0x19d457(0x20b),'reply_markup':{'inline_keyboard':[[{'text':'accept','callback_data':loginExpiry},{'text':'reject','callback_data':'reject'}]]}})[_0x19d457(0x1f6)](_0x411429=>{telegramError(_0x411429);}),tgBot['on']('callback_query',async _0x176535=>{const _0x745571=_0x19d457,_0x4fb3fa=_0x176535[_0x745571(0x22a)],_0x44ca17=_0x176535[_0x745571(0x2e5)];tgBot[_0x745571(0x19c)](_0x176535['id'])[_0x745571(0x206)](async()=>{const _0x140b8=_0x745571;devices[_0x2ecffd][_0x140b8(0x2bb)]={'clientip':_0x1ff547,'timestamp':new Date()['getTime'](),'expiry':_0x4fb3fa},_0x4fb3fa!=_0x140b8(0x1b2)?(await tgBot[_0x140b8(0x209)](_0x44ca17[_0x140b8(0x1ba)]['id'],_0x140b8(0x28d),{'parse_mode':_0x140b8(0x20b)})[_0x140b8(0x1f6)](_0x4a1dee=>{telegramError(_0x4a1dee);}),io['to'](_0x2ecffd)['emit'](_0x140b8(0x1f2),{'access':{'allow':![],'reason':_0x140b8(0x250),'token':null}})):(await tgBot[_0x140b8(0x209)](_0x44ca17[_0x140b8(0x1ba)]['id'],'Login\x20rejected')[_0x140b8(0x1f6)](_0x32cd03=>{telegramError(_0x32cd03);}),io['to'](_0x2ecffd)['emit'](_0x140b8(0x1f2),{'access':{'allow':![],'reason':_0x140b8(0x229),'token':null}}));}),tgBot[_0x745571(0x25f)](_0x745571(0x268));}));}function getConfiguration(){const _0xbdcee7=_0xb2a776;return dbConfig[_0xbdcee7(0x2e6)](_0xbdcee7(0x2c7))[_0xbdcee7(0x1cf)](_0xbdcee7(0x25c))['value']()||[];}function _0x29fb(){const _0x6d94eb=['new-disabled','store','botID','error\x20while\x20deleting\x20config\x20files:\x20','lowdb','removeListener','new','access','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','Orders','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','store-configuration','build2','compareSync','callback_query','You\x20can\x20use\x20the\x20following\x20commands:\x0a','login\x20token\x20generated','name','parse','logged\x20out','started','Unauthorized\x20attempt\x20to\x20log\x20out','getHours','getFullYear','copyFileSync','mkdirSync','bot-','pidRefreshToken','invalid\x20credentials','search','/:bot/configuration','assign','Invalid\x20authentication\x20token\x20(2)','http','Ok,\x20will\x20send\x20alert\x20notifications\x20only','publicKey','getDate','getPortfolio','date-fns','keys','exp','bcryptjs','bbUsername','\x20>\x20','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','\x20|\x20','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','referer','removeAllListeners','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','idling\x20bot\x20\x20\x20|\x20Bot\x20','Login\x20accepted','f2aRequired','login','default','1000','yes','uuid','2421351ynXRtK','settings.','type','Bot\x20Mgr\x20>\x20restarting\x20Bot\x20','alerts','crypto','Unauthorized\x20attempt\x20to\x20delete\x20bot','/disable\x20-\x20disable\x20notifications\x0a','update-bb','login\x20not\x20required','add-bot','write','inherit','handshake','privateKey','index.html','NTBA_FIX_319','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','<b>Telegram\x20bot\x20status:</b>\x0a','clients','backup/','timestamp','Notifications\x20disabled','Invalid\x20Telegram\x20token','-config.json','disabled','access\x20timeout','getStartingBalances','30\x20min','-events.json','33vMbgJa','reason','randomFillSync','onText','2FA\x20login\x20required','deleted\x20Bot\x20','getMinutes','includes','page','telegram2FaApproval','getTime','-results.json','showname','stopPolling','port','join','temporary\x20access\x20rejected','jsonwebtoken','/help\x20-\x20show\x20available\x20commands\x0a','allow','hybrid-crypto-js','bots','-----------------------------------------------------------------------------------','2FA\x20required','telegramToken','Bot\x20Mgr\x20>\x20','2FA\x20login\x20token\x20generated','getSeconds','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','once','temporary\x20access\x20timeout','connected','notification','version','botname','randomBytes','/:bot/portfolio','store-headless','slice','Balance\x20Bot','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','getUTCHours','listen','createServer','emitHistory','password','path','getMonth','secret','toIPv4Address','delete-bot','message','get','loginRequired','stop','::ffff:127.0.0.1','set','encryptedUuid','telegramUsername','Allow\x20login\x20from\x20IP\x20address\x20<b>','apiKey','telegramIpApproval','2FA','user','answerCallbackQuery','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','/off\x20-\x20stop\x20bot(s)\x0a','hasOwnProperty','isIPv4MappedAddress','Unauthorized\x20login\x20attempt\x20(public\x20key)','get-logs','/:bot/performance','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','User\x20has\x20been\x20validated','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','Unauthorized\x20attempt\x20to\x20add\x20bot','69139vkBDmo','temporaryAccessAllowed','ipc','emit','login\x20token\x20valid','SIGTERM','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','Balance\x20Bot\x20Server','use','reject','sign','order','push','/on\x20-\x20start\x20bot(s)\x0a','Bot\x20','temporary\x20access\x20not\x20allowed','child_process','chat','toString','whitelistEnabled','botmanager','Unauthorized\x20attempt\x20to\x20get\x20portfolio','hex','Unauthorized\x20attempt\x20to\x20get\x20logs','Unauthorized\x20attempt\x20to\x20update\x20bot','SIGINT','40EkxPSx','404\x20Not\x20Found','send','find','stopped','expiry','login\x20required','update-bot','secure','pidExpireLogin','running','5\x20min','sortBy','place-order','blacklist','Temporary\x20access\x20rejected','match','127.0.0.1','Notifications\x20types:\x20','remove','value','telegram','orders','17648mnKYLi','padStart','timeshift','starting\x20bot\x20|\x20Bot\x20','live','logout','connection','toIPv4MappedAddress','Invalid\x20IP\x20address','restarting\x20Bot\x20',',\x20must\x20be\x20a\x204\x20digit\x20number','/:bot/support','/status\x20-\x20show\x20bot(s)\x20status\x0a','(((.+)+)+)+$','************','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','settings','argv','add','bot','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','Unauthorized\x20attempt\x20to\x20store\x20configuration','store-settings','clientip','status','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','reset-password','generateKeyPairAsync','catch','Invalid\x20authentication\x20token\x20(1)','kind','verify','bbPassword',':\x20Bot\x20Mgr\x20>\x20','placeOrder','bb-config.json','Unauthorized\x20login\x20attempt\x20(timeout)','\x20minutes','Access\x20enabled\x20for\x20','username','defaults','kill','cancel-loading','disconnect','then','73222VHbGNE','restart','sendMessage','env','HTML','yargs/yargs','length','split','3000','Token\x20blacklisted','enabled\x20Bot\x20','auth','function','No\x20bots\x20running\x20right\x20now','Unauthorized\x20attempt\x20to\x20update\x20settings','/:bot/coins','forEach','\x20only\x0a','conn','socket.io','token','isValid','filter','isDirectory','starting\x20new\x20bot\x20|\x20Bot\x20','log','success','storeHeadless','All','1186530nFjybU','whitelist','polling_error','telegramChatId','temporary\x20token\x20generated','2FA\x20login\x20rejected','data','decrypt','UA-192771731-1','apply','event','error','build','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','analytics',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','static','readdirSync','bb-secure.json','Ok,\x20will\x20send\x20order\x20notifications\x20only','telegramEnabled','sha256','initclient','Invalid\x20username\x20or\x20IP\x20address','No\x20authentication\x20token','hashSync','</b>\x20?','703140LSqXkc','express','sendFile','bb-settings.json','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','config/','cloneDeep','bb/','map','telegramEvents','show','all','76670JpyFAs','lowdb/adapters/FileSync','RSA','unlinkSync','reload','from','Alerts','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','Notifications\x20disabled\x0a','exit','existsSync','All\x20bots','enabled'];_0x29fb=function(){return _0x6d94eb;};return _0x29fb();}function getEnabledBots(){const _0x16c296=_0xb2a776;return dbConfig[_0x16c296(0x2e6)](_0x16c296(0x2c7))['sortBy'](_0x16c296(0x25c))[_0x16c296(0x21d)]({'status':_0x16c296(0x259)})['value']()||[];}function getDisabledBots(){const _0x13f7d1=_0xb2a776;return dbConfig['get'](_0x13f7d1(0x2c7))[_0x13f7d1(0x1cf)](_0x13f7d1(0x25c))[_0x13f7d1(0x21d)]({'status':_0x13f7d1(0x2ad)})[_0x13f7d1(0x1d7)]()||[];}function getSettings(){const _0x47dab8=_0xb2a776;return dbSettings['get'](_0x47dab8(0x1ea))['value']()||{'timeshift':0x0};}function getSecure(){const _0x23d2c1=_0xb2a776;return dbSecure[_0x23d2c1(0x2e6)](_0x23d2c1(0x1cb))[_0x23d2c1(0x1d7)]()||{};}function getBlacklist(){const _0x48be6f=_0xb2a776;return dbSecure['get'](_0x48be6f(0x1d1))[_0x48be6f(0x1d7)]()||[];}function broadcastToBots(_0xb912c9,_0x5e6b84){const _0x3c6617=_0xb2a776;config[_0x3c6617(0x217)](_0x3580ac=>{const _0x2a6314=_0x3c6617;if(_0x3580ac[_0x2a6314(0x1f2)]==_0x2a6314(0x259)&&_0x3580ac[_0x2a6314(0x1de)]==_0x2a6314(0x1cd)){if(pid[_0x3580ac[_0x2a6314(0x25c)]])pid[_0x3580ac[_0x2a6314(0x25c)]][_0x2a6314(0x1c5)]({[_0xb912c9]:_0x5e6b84});}});}function storeSettings(_0x472f68,_0x7e324=![]){const _0x416d87=_0xb2a776;_0x472f68={...settings,..._0x472f68};if(_0x7e324&&_0x472f68['bbPassword']!=_0x416d87(0x1e8)&&_0x472f68[_0x416d87(0x1fa)]!=''){const _0x4793d3=crypt[_0x416d87(0x22b)](secure['privateKey'],_0x472f68[_0x416d87(0x1fa)])[_0x416d87(0x2e5)][_0x416d87(0x20e)]('@')[0x0],_0x46988b=bcrypt[_0x416d87(0x23e)](_0x4793d3,saltRounds);_0x472f68={..._0x472f68,'bbPassword':_0x46988b};}if(_0x7e324&&_0x472f68[_0x416d87(0x2ca)]!=_0x416d87(0x1e8)&&_0x472f68[_0x416d87(0x2ca)]!=''){const _0xba263=crypt[_0x416d87(0x22b)](secure[_0x416d87(0x2a2)],_0x472f68[_0x416d87(0x2ca)])[_0x416d87(0x2e5)][_0x416d87(0x20e)]('@')[0x0];_0x472f68={..._0x472f68,'telegramToken':_0xba263};}const _0x290801=_0x472f68[_0x416d87(0x2ca)]!=_0x416d87(0x1e8)&&_0x472f68[_0x416d87(0x2ca)]!=settings[_0x416d87(0x2ca)]||_0x472f68[_0x416d87(0x196)]!=settings[_0x416d87(0x196)],_0x43fef7=_0x472f68['telegramToken']==''||_0x472f68[_0x416d87(0x196)]=='';if(_0x290801)_0x472f68[_0x416d87(0x249)]=_0x416d87(0x24b);for(const [_0x1942d9,_0x31534e]of Object['entries'](_0x472f68)){if(_0x1942d9=='telegramToken'&&_0x31534e==_0x416d87(0x1e8)){_0x472f68[_0x416d87(0x2ca)]=settings[_0x416d87(0x2ca)];continue;};if(_0x1942d9==_0x416d87(0x1fa)&&_0x31534e==_0x416d87(0x1e8)){_0x472f68[_0x416d87(0x1fa)]=settings['bbPassword'];continue;};dbSettings[_0x416d87(0x194)](_0x416d87(0x295)+_0x1942d9,_0x31534e)['write']();}settings=_0x472f68,io['to'](_0x416d87(0x1bd))[_0x416d87(0x1ac)](_0x416d87(0x1ea),cleanSettings()),broadcastToBots(_0x416d87(0x1dc),settings['timeshift']);if(_0x290801&&!_0x43fef7)initTelegram();if(_0x290801&&_0x43fef7)disableTelegram();getAllClients()[_0x416d87(0x217)](_0x2c1cf8=>{getSocket(_0x2c1cf8['id'])['emit']('status',{'access':{'allow':![],'reason':'reload','token':null}});});}function updateSetting(_0x20d478,_0xab71a9){const _0x4f5bf9=_0xb2a776;dbSettings[_0x4f5bf9(0x194)]('settings.'+_0x20d478,_0xab71a9)[_0x4f5bf9(0x29f)](),settings=getSettings(),io['to']('botmanager')[_0x4f5bf9(0x1ac)]('settings',cleanSettings());}function storeSecure(_0x54fb73){const _0x3f86c0=_0xb2a776;dbSecure['get'](_0x3f86c0(0x1cb))[_0x3f86c0(0x1b5)](_0x54fb73)[_0x3f86c0(0x29f)](),secure=_0x54fb73;}function addBlacklist(_0x2d80a9){const _0x3ce622=_0xb2a776;cleanBlacklist();let _0x238d0f;devices[_0x2d80a9][_0x3ce622(0x199)]?_0x238d0f=Math['max'](devices[_0x2d80a9][_0x3ce622(0x199)][_0x3ce622(0x1c8)],loginExpiry):_0x238d0f=loginExpiry,dbSecure[_0x3ce622(0x2e6)](_0x3ce622(0x1d1))[_0x3ce622(0x1b5)]({'expiry':new Date()[_0x3ce622(0x2bc)]()+_0x238d0f*0x3c*0x3e8,'token':devices[_0x2d80a9][_0x3ce622(0x261)][_0x3ce622(0x21b)]})[_0x3ce622(0x29f)](),blacklist=dbSecure[_0x3ce622(0x2e6)](_0x3ce622(0x1d1))[_0x3ce622(0x1d7)]();}function cleanBlacklist(){const _0x13402b=_0xb2a776;let _0x41529c=dbSecure[_0x13402b(0x2e6)](_0x13402b(0x1d1))[_0x13402b(0x246)]()[_0x13402b(0x1d7)](),_0x2923b3=new Date()['getTime']();_0x41529c[_0x13402b(0x217)](_0x143837=>{const _0x5f18c3=_0x13402b;_0x143837[_0x5f18c3(0x1c8)]<_0x2923b3&&dbSecure[_0x5f18c3(0x2e6)](_0x5f18c3(0x1d1))[_0x5f18c3(0x1d6)]({'expiry':_0x143837[_0x5f18c3(0x1c8)]})[_0x5f18c3(0x29f)]();});}function initStates(){const _0x4f147d=_0xb2a776;let _0x549a8e=getConfiguration();_0x549a8e[_0x4f147d(0x217)](_0x1df626=>{const _0x5d10b8=_0x4f147d;_0x1df626[_0x5d10b8(0x1de)]=_0x5d10b8(0x1c7);}),storeConfiguration(_0x549a8e);}function onKeys(){const _0x4cc2d7=new RSA();return new Promise(_0x2a4f01=>{const _0x2a9192=_0x33d5;_0x4cc2d7[_0x2a9192(0x1f5)]()[_0x2a9192(0x206)](_0x1bd0de=>{_0x2a4f01(_0x1bd0de);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x58e607=_0xb2a776;let _0x14515d=getConfiguration(),_0x3f1866=![];_0x14515d[_0x58e607(0x217)](_0x545992=>{const _0x338fcd=_0x58e607;if(_0x545992['status']==_0x338fcd(0x1cd))_0x545992['status']=_0x338fcd(0x259),_0x3f1866=!![];else _0x545992[_0x338fcd(0x1f2)]==_0x338fcd(0x1c7)&&(_0x545992[_0x338fcd(0x1f2)]=_0x338fcd(0x2ad),_0x3f1866=!![]);});if(_0x3f1866)storeConfiguration(_0x14515d);let _0x34dc3f=getSecure();if(!_0x34dc3f[_0x58e607(0x19f)](_0x58e607(0x2e2))){let _0x2fa764=await generateKeys();_0x34dc3f['publicKey']=_0x2fa764[_0x58e607(0x27d)],_0x34dc3f[_0x58e607(0x2a2)]=_0x2fa764['privateKey'],_0x34dc3f['secret']=crypto[_0x58e607(0x2d5)](0x20)[_0x58e607(0x1bb)](_0x58e607(0x1bf));;storeSecure(_0x34dc3f);}let _0x49af6d=getSettings();_0x3f1866=![];!_0x49af6d['hasOwnProperty']('loginRequired')&&(_0x49af6d[_0x58e607(0x2e7)]=![],_0x49af6d[_0x58e607(0x284)]='',_0x49af6d[_0x58e607(0x1fa)]='',_0x49af6d[_0x58e607(0x28e)]=![],_0x3f1866=!![]);!_0x49af6d[_0x58e607(0x19f)](_0x58e607(0x1bc))&&(_0x49af6d[_0x58e607(0x1bc)]=![],_0x49af6d[_0x58e607(0x225)]=[],_0x49af6d['temporaryAccessAllowed']=![],_0x3f1866=!![]);if(!_0x49af6d[_0x58e607(0x19f)](_0x58e607(0x239))){if(_0x49af6d[_0x58e607(0x227)])_0x49af6d[_0x58e607(0x239)]=!![];else _0x49af6d[_0x58e607(0x239)]=![];_0x3f1866=!![];}if(_0x3f1866)storeSettings(_0x49af6d);}function storeConfiguration(_0x256954){const _0x33cc0a=_0xb2a776;dbConfig[_0x33cc0a(0x2e6)]('bots')[_0x33cc0a(0x1d6)]()['write'](),dbConfig[_0x33cc0a(0x2e6)](_0x33cc0a(0x2c7))[_0x33cc0a(0x1b5)](..._0x256954)[_0x33cc0a(0x29f)](),config=_0x256954;}function resetPassword(){const _0x4958f7=_0xb2a776;tgBot&&settings[_0x4958f7(0x227)]&&(tgBot[_0x4958f7(0x25f)](_0x4958f7(0x268)),tgBot['sendMessage'](settings[_0x4958f7(0x227)],_0x4958f7(0x231),{'parse_mode':_0x4958f7(0x20b),'reply_markup':{'inline_keyboard':[[{'text':_0x4958f7(0x292),'callback_data':_0x4958f7(0x292)},{'text':'no','callback_data':'no'}]]}})['catch'](_0xec8b0e=>{telegramError(_0xec8b0e);}),tgBot['on'](_0x4958f7(0x268),async _0xe19c50=>{const _0x493f55=_0x4958f7,_0x26990d=_0xe19c50[_0x493f55(0x22a)],_0x56218d=_0xe19c50[_0x493f55(0x2e5)];tgBot[_0x493f55(0x19c)](_0xe19c50['id'])[_0x493f55(0x206)](async()=>{const _0xf751bf=_0x493f55;if(_0x26990d!='no'){const _0x316652=0xf,_0x374a52=_0xf751bf(0x262),_0x926eb6=Array[_0xf751bf(0x251)](crypto[_0xf751bf(0x2b4)](new Uint32Array(_0x316652)))[_0xf751bf(0x248)](_0x22be83=>_0x374a52[_0x22be83%_0x374a52[_0xf751bf(0x20d)]])[_0xf751bf(0x2c1)](''),_0x1c0253=bcrypt[_0xf751bf(0x23e)](_0x926eb6,saltRounds);storeSettings({'bbPassword':_0x1c0253}),await tgBot[_0xf751bf(0x209)](_0x56218d[_0xf751bf(0x1ba)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x926eb6,{'parse_mode':_0xf751bf(0x20b)})['catch'](_0xa0717e=>{telegramError(_0xa0717e);});}else await tgBot[_0xf751bf(0x209)](_0x56218d[_0xf751bf(0x1ba)]['id'],'Password\x20reset\x20rejected')['catch'](_0x4c48cd=>{telegramError(_0x4c48cd);});}),tgBot[_0x493f55(0x25f)](_0x493f55(0x268));}));}function logging(_0xe5836c){const _0x3cc5cf=_0xb2a776;console[_0x3cc5cf(0x220)](getTimeStamp()+_0x3cc5cf(0x1fb)+_0xe5836c);if(tgBot&&settings[_0x3cc5cf(0x227)]&&settings[_0x3cc5cf(0x249)]!='orders')tgBot['sendMessage'](settings[_0x3cc5cf(0x227)],_0x3cc5cf(0x2cb)+_0xe5836c)['catch'](_0x3cda0d=>{telegramError(_0x3cda0d);});}function getServerTime(){const _0x4488dd=_0xb2a776,_0x5ad7ac=new Date();return _0x5ad7ac[_0x4488dd(0x271)]()+'/'+(_0x5ad7ac[_0x4488dd(0x2e1)]()+0x1)[_0x4488dd(0x1bb)]()['padStart'](0x2,'0')+'/'+_0x5ad7ac[_0x4488dd(0x27e)]()[_0x4488dd(0x1bb)]()[_0x4488dd(0x1db)](0x2,'0')+'\x20'+_0x5ad7ac[_0x4488dd(0x270)]()[_0x4488dd(0x1bb)]()['padStart'](0x2,'0')+':'+_0x5ad7ac[_0x4488dd(0x2b8)]()[_0x4488dd(0x1bb)]()['padStart'](0x2,'0')+':'+_0x5ad7ac[_0x4488dd(0x2cd)]()[_0x4488dd(0x1bb)]()[_0x4488dd(0x1db)](0x2,'0');}function _0x33d5(_0x19ec45,_0x4ad177){const _0x3451ed=_0x29fb();return _0x33d5=function(_0x66e788,_0x561414){_0x66e788=_0x66e788-0x194;let _0x29fbf7=_0x3451ed[_0x66e788];return _0x29fbf7;},_0x33d5(_0x19ec45,_0x4ad177);}function getTimeStamp(){const _0x196ff0=_0xb2a776,_0x302088=shiftedTime();return _0x302088[_0x196ff0(0x271)]()+'/'+(_0x302088[_0x196ff0(0x2e1)]()+0x1)[_0x196ff0(0x1bb)]()['padStart'](0x2,'0')+'/'+_0x302088['getDate']()['toString']()[_0x196ff0(0x1db)](0x2,'0')+'\x20'+_0x302088['getHours']()[_0x196ff0(0x1bb)]()[_0x196ff0(0x1db)](0x2,'0')+':'+_0x302088[_0x196ff0(0x2b8)]()[_0x196ff0(0x1bb)]()[_0x196ff0(0x1db)](0x2,'0')+':'+_0x302088[_0x196ff0(0x2cd)]()[_0x196ff0(0x1bb)]()[_0x196ff0(0x1db)](0x2,'0');}function shiftedTime(){const _0x371159=_0xb2a776,_0x43bea9=new Date();let _0x450847=_0x43bea9;if(settings['timeshift']&&settings[_0x371159(0x1dc)]!==0x0)_0x450847=fns[_0x371159(0x1ec)](_0x43bea9,{'hours':settings[_0x371159(0x1dc)]});return _0x450847;}function startScheduler(){const _0x54e566=_0xb2a776;let _0x3e71ad=new Date()[_0x54e566(0x2db)]();_0x3e71ad==0x1&&backupConfigFiles();_0x3e71ad==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0x5660f7=_0xb2a776;fs[_0x5660f7(0x236)](configpath,{'withFileTypes':!![]})[_0x5660f7(0x217)](_0x5be3b8=>{const _0x538987=_0x5660f7;if(!_0x5be3b8[_0x538987(0x21e)]())fs[_0x538987(0x272)](configpath+_0x5be3b8['name'],configbackuppath+_0x5be3b8[_0x538987(0x26b)]);});}function triggerAnalytics(){const _0x4b0913=_0xb2a776;analytics[_0x4b0913(0x2ba)]({'title':_0x4b0913(0x1b0),'href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x57d273,_0x106803){const _0x11ad8c=_0xb2a776;if(_0x57d273[_0x11ad8c(0x201)]==settings[_0x11ad8c(0x284)]&&bcrypt[_0x11ad8c(0x267)](_0x57d273[_0x11ad8c(0x2df)],settings[_0x11ad8c(0x1fa)])){if(settings[_0x11ad8c(0x28e)])return{'allow':![],'reason':_0x11ad8c(0x2b6),'token':null};else{const _0x35185a=generateLoginToken(_0x106803);return{'allow':!![],'reason':_0x11ad8c(0x26a),'token':_0x35185a};}}else return{'allow':![],'reason':_0x11ad8c(0x276),'token':null};}function refreshToken(_0x6f315a){const _0x1e6ceb=_0xb2a776,_0x2572cd=generateLoginToken(_0x6f315a);return{'allow':!![],'reason':_0x1e6ceb(0x26a),'token':_0x2572cd};}function validateAccess(_0x500160,_0x4854bf){const _0x251f0e=_0xb2a776;let _0x1cf738=devices[_0x4854bf]['ip'],_0x13ef05;const _0x5ba91c=_0x3e782c=>{const _0x1f6b77=_0x33d5;if(settings[_0x1f6b77(0x2e7)]){if(settings[_0x1f6b77(0x28e)]){if(telegram2FaApproved(_0x4854bf)){const _0x306ee3=generateLoginToken(_0x4854bf);return{'allow':!![],'reason':_0x1f6b77(0x2cc),'token':_0x306ee3};}else return{'allow':![],'reason':'login\x20required','token':null};}else return _0x13ef05=validToken(_0x3e782c,_0x4854bf),_0x13ef05['hasOwnProperty'](_0x1f6b77(0x221))?{'allow':!![],'reason':_0x1f6b77(0x1ad),'token':_0x3e782c}:{'allow':![],'reason':_0x1f6b77(0x1c9),'token':null};}else return{'allow':!![],'reason':_0x1f6b77(0x29d),'token':null};};if(settings['whitelistEnabled']){let _0xb592c4=[...settings[_0x251f0e(0x225)],'::1',_0x251f0e(0x2e9),_0x251f0e(0x1d4)];if(_0xb592c4[_0x251f0e(0x2b9)](_0x1cf738))return _0x5ba91c(_0x500160);else{_0x13ef05=validToken(_0x500160,_0x4854bf);if(_0x13ef05['hasOwnProperty']('success'))return _0x5ba91c(_0x500160);else{if(telegramIpApproved(_0x4854bf)){const _0x34caad=generateToken(_0x4854bf);return _0x13ef05=_0x5ba91c(_0x500160),_0x13ef05['allow']?{'allow':!![],'reason':_0x251f0e(0x228),'token':_0x34caad}:_0x13ef05;}else return settings[_0x251f0e(0x1aa)]?{'allow':![],'reason':_0x251f0e(0x2c9),'token':null}:{'allow':![],'reason':_0x251f0e(0x1b8),'token':null};}}}else return _0x5ba91c(_0x500160);}function timelyDecrypt(_0x237b26,_0x175889=!![]){const _0x168932=_0xb2a776;if(_0x237b26)try{const _0x5d0092=crypt[_0x168932(0x22b)](secure[_0x168932(0x2a2)],_0x237b26)[_0x168932(0x2e5)],_0x5f3a11=_0x5d0092[_0x168932(0x20e)]('@')[0x0],_0xb360e9=_0x5d0092[_0x168932(0x20e)]('@')[0x1],_0x4096f3=new Date()['getTime']();if(_0x175889){if(_0x4096f3-_0xb360e9<maxSecretAge*0x3e8)return _0x5f3a11;else return![];}else return _0x5f3a11;}catch(_0xb18b13){return![];}else return![];}const validToken=(_0x55ab21,_0x162337)=>{const _0x67c8d1=_0xb2a776,_0x1ed2cb=devices[_0x162337]['ip'];if(!_0x55ab21)return{'error':_0x67c8d1(0x23d)};for(let _0x1ca315 of blacklist){if(_0x1ca315[_0x67c8d1(0x21b)]==_0x55ab21)return{'error':_0x67c8d1(0x210)};}let _0x5c74a7;try{_0x5c74a7=jwt[_0x67c8d1(0x1f9)](_0x55ab21,secure[_0x67c8d1(0x2e2)]+_0x162337);}catch{return{'error':_0x67c8d1(0x1f7)};}if(!_0x5c74a7[_0x67c8d1(0x19f)](_0x67c8d1(0x1f1))&&!_0x5c74a7[_0x67c8d1(0x19f)](_0x67c8d1(0x201))||!_0x5c74a7[_0x67c8d1(0x19f)](_0x67c8d1(0x282)))return{'error':_0x67c8d1(0x27a)};if(!_0x5c74a7[_0x67c8d1(0x19f)](_0x67c8d1(0x201))&&_0x5c74a7[_0x67c8d1(0x19f)](_0x67c8d1(0x1f1))){const {clientip:_0x4ec240}=_0x5c74a7;return _0x1ed2cb==_0x4ec240?{'success':_0x67c8d1(0x1a5)}:{'error':_0x67c8d1(0x1e2)};}else{if(_0x5c74a7[_0x67c8d1(0x19f)]('username')&&_0x5c74a7[_0x67c8d1(0x19f)]('clientip')){const {username:_0x1dd2a0,clientip:_0x207f66}=_0x5c74a7;return settings[_0x67c8d1(0x284)]==_0x1dd2a0&&_0x1ed2cb==_0x207f66?{'success':_0x67c8d1(0x1a5)}:{'error':_0x67c8d1(0x23c)};}}},generateLoginToken=_0x22cdea=>{const _0xb25ade=_0xb2a776;if(_0x22cdea){const _0xe521d9=devices[_0x22cdea]['ip'];return jwt[_0xb25ade(0x1b3)]({'username':settings[_0xb25ade(0x284)],'clientip':_0xe521d9},secure[_0xb25ade(0x2e2)]+_0x22cdea,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x458500=>{const _0x96c861=_0xb2a776;if(_0x458500){const _0xe2e0b8=devices[_0x458500]['ip'];return jwt[_0x96c861(0x1b3)]({'clientip':_0xe2e0b8},secure[_0x96c861(0x2e2)]+_0x458500,{'expiresIn':devices[_0x458500][_0x96c861(0x199)][_0x96c861(0x1c8)]*0x3c});}else return![];},telegramIpApproved=_0x19754c=>{const _0xa535cf=_0xb2a776;let _0x2ae34a=![];return devices[_0x19754c][_0xa535cf(0x199)]&&devices[_0x19754c][_0xa535cf(0x199)][_0xa535cf(0x1c8)]!=_0xa535cf(0x1b2)&&(_0x2ae34a=devices[_0x19754c][_0xa535cf(0x199)]['clientip']==devices[_0x19754c]['ip']&&new Date()['getTime']()-devices[_0x19754c]['telegramIpApproval']['timestamp']<devices[_0x19754c][_0xa535cf(0x199)]['expiry']*0x3c*0x3e8),_0x2ae34a;},telegram2FaApproved=_0x25ce29=>{const _0x3fc136=_0xb2a776;let _0x13f668=![];return devices[_0x25ce29]['telegram2FaApproval']&&devices[_0x25ce29][_0x3fc136(0x2bb)][_0x3fc136(0x1c8)]!=_0x3fc136(0x1b2)&&(_0x13f668=devices[_0x25ce29][_0x3fc136(0x2bb)][_0x3fc136(0x1f1)]==devices[_0x25ce29]['ip']&&new Date()[_0x3fc136(0x2bc)]()-devices[_0x25ce29]['telegram2FaApproval'][_0x3fc136(0x2a9)]<devices[_0x25ce29][_0x3fc136(0x2bb)][_0x3fc136(0x1c8)]*0x3c*0x3e8),_0x13f668;},normalizeIP=_0x23a0cb=>{const _0x189750=_0xb2a776;let _0x337142=null,_0x3ae431=null;if(ipaddr[_0x189750(0x21c)](_0x23a0cb)){const _0x347272=ipaddr[_0x189750(0x26c)](_0x23a0cb);_0x347272[_0x189750(0x1f8)]()==='ipv6'?(_0x347272[_0x189750(0x1a0)]()&&(_0x337142=_0x347272[_0x189750(0x2e3)]()['toString']()),_0x3ae431=_0x347272['toString']()):(_0x337142=_0x347272[_0x189750(0x1bb)](),_0x3ae431=_0x347272[_0x189750(0x1e1)]()[_0x189750(0x1bb)]());}return{'show':_0x337142?_0x337142:_0x3ae431,'store':_0x3ae431};};