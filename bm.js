const _0x549061=_0x94b2;(function(_0x339f11,_0x1e0221){const _0x2bb53d=_0x94b2,_0x21507b=_0x339f11();while(!![]){try{const _0xab09da=-parseInt(_0x2bb53d(0x18d))/0x1+-parseInt(_0x2bb53d(0xd1))/0x2*(parseInt(_0x2bb53d(0x1dd))/0x3)+parseInt(_0x2bb53d(0xd5))/0x4*(-parseInt(_0x2bb53d(0x1bf))/0x5)+parseInt(_0x2bb53d(0xe9))/0x6*(parseInt(_0x2bb53d(0x204))/0x7)+parseInt(_0x2bb53d(0x13b))/0x8*(parseInt(_0x2bb53d(0x14f))/0x9)+-parseInt(_0x2bb53d(0x16e))/0xa*(-parseInt(_0x2bb53d(0x1ca))/0xb)+parseInt(_0x2bb53d(0x202))/0xc*(parseInt(_0x2bb53d(0x1cc))/0xd);if(_0xab09da===_0x1e0221)break;else _0x21507b['push'](_0x21507b['shift']());}catch(_0xe6ce8d){_0x21507b['push'](_0x21507b['shift']());}}}(_0xdb19,0x98fcd));const _0x2d1ece=function(){let _0x317b52=!![];return function(_0x3e8a29,_0x1d18cc){const _0x44a89d=_0x317b52?function(){const _0xf227af=_0x94b2;if(_0x1d18cc){const _0x8bde51=_0x1d18cc[_0xf227af(0x10e)](_0x3e8a29,arguments);return _0x1d18cc=null,_0x8bde51;}}:function(){};return _0x317b52=![],_0x44a89d;};}(),_0x32436d=_0x2d1ece(this,function(){const _0x2a6961=_0x94b2;return _0x32436d['toString']()[_0x2a6961(0xe8)]('(((.+)+)+)+$')['toString']()[_0x2a6961(0x179)](_0x32436d)[_0x2a6961(0xe8)](_0x2a6961(0x1a8));});_0x32436d();'use strict';process['env'][_0x549061(0xf4)]=0x1;const childProcess=require(_0x549061(0x1fb)),FileSync=require(_0x549061(0x20a)),fs=require('fs'),fns=require(_0x549061(0x132)),low=require(_0x549061(0x186)),path=require(_0x549061(0x1f3)),crypto=require(_0x549061(0x1f2)),Crypt=require(_0x549061(0xfe))[_0x549061(0x140)],RSA=require(_0x549061(0xfe))[_0x549061(0x119)],bcrypt=require(_0x549061(0x16b)),jwt=require(_0x549061(0x141)),analyticsLib=require(_0x549061(0x15a))[_0x549061(0x15f)],googleAnalytics=require('@analytics/google-analytics')['default'],ipaddr=require(_0x549061(0x21a)),argv=require(_0x549061(0x142))(process[_0x549061(0x120)][_0x549061(0x1a1)](0x2))[_0x549061(0x120)],PORT=argv[_0x549061(0x181)]||_0x549061(0x1e5),pattern=/^[0-9]{2,4}$/;if(!pattern[_0x549061(0x157)](PORT))return console[_0x549061(0x106)](_0x549061(0x147)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process['exit'](0x1);const HOST=argv['host']||null,userID=argv[_0x549061(0xda)]||'';let bbpath=_0x549061(0x19d),bbpath2='';const botfile=_0x549061(0x12b),configfile=_0x549061(0x212),settingsfile='bb-settings.json',securefile=_0x549061(0x21e);!fs[_0x549061(0x116)](bbpath+botfile)&&(bbpath='');const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x549061(0x10d)),configpath=userID?bbpath+_0x549061(0xd9)+userID+'/':bbpath+_0x549061(0xd9),configbackuppath=configpath+'backup/';!fs[_0x549061(0x116)](configpath)&&fs[_0x549061(0x136)](configpath);!fs[_0x549061(0x116)](configbackuppath)&&fs[_0x549061(0x136)](configbackuppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x549061(0xed)]({'bots':[]})[_0x549061(0xfb)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x549061(0xed)]({'settings':{'timeshift':0x0}})[_0x549061(0xfb)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x549061(0xed)]({'secure':{},'blacklist':[]})[_0x549061(0xfb)]();let crypt=new Crypt({'md':_0x549061(0x21d),'rsaStandard':_0x549061(0x104)});const saltRounds=0xa;let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')['version'],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let devices=[],lastIpApproval,pidScheduler;oneTimeMigration(),cleanBlacklist();const express=require(_0x549061(0x16c)),app=express(),http=require(_0x549061(0x11d))[_0x549061(0xd3)](app);app['use'](express[_0x549061(0x1ea)](path['join'](__dirname,bbpath2,_0x549061(0x213)))),app[_0x549061(0x1d1)](express[_0x549061(0x1ea)](path[_0x549061(0xf9)](__dirname,bbpath2,'build'))),app[_0x549061(0x1d3)]('/',function(_0x305432,_0x5a7b4a){const _0xbccaa5=_0x549061;_0x5a7b4a[_0xbccaa5(0x10c)](path[_0xbccaa5(0xf9)](__dirname,bbpath2,_0xbccaa5(0x213),_0xbccaa5(0x193)));}),app[_0x549061(0x1d3)](_0x549061(0x1fe),function(_0xd517bf,_0x106a5f){const _0x9cf51c=_0x549061;_0x106a5f[_0x9cf51c(0x10c)](path['join'](__dirname,bbpath2,_0x9cf51c(0x1e2),_0x9cf51c(0x193)));}),app[_0x549061(0x1d3)](_0x549061(0xdd),(_0x5ac5c8,_0x49aa17)=>{const _0x2d5a19=_0x549061;_0x49aa17[_0x2d5a19(0x10c)](path[_0x2d5a19(0xf9)](__dirname,bbpath2,_0x2d5a19(0x1e2),'index.html'));}),app[_0x549061(0x1d3)](_0x549061(0x1af),(_0x15219b,_0x263dc9)=>{const _0x2105d3=_0x549061;_0x263dc9[_0x2105d3(0x10c)](path[_0x2105d3(0xf9)](__dirname,bbpath2,'build',_0x2105d3(0x193)));}),app['get'](_0x549061(0x1be),(_0x1b47ed,_0x331b56)=>{const _0x54a4eb=_0x549061;_0x331b56[_0x54a4eb(0x10c)](path[_0x54a4eb(0xf9)](__dirname,bbpath2,_0x54a4eb(0x1e2),_0x54a4eb(0x193)));}),app['get'](_0x549061(0x1df),(_0x3d965b,_0x5aecfb)=>{const _0x7591b2=_0x549061;_0x5aecfb['sendFile'](path[_0x7591b2(0xf9)](__dirname,bbpath2,'build',_0x7591b2(0x193)));}),app[_0x549061(0x1d3)](_0x549061(0x113),(_0x26de54,_0xde377d)=>{const _0x172e1c=_0x549061;_0xde377d['sendFile'](path['join'](__dirname,bbpath2,_0x172e1c(0x1e2),_0x172e1c(0x193)));}),app[_0x549061(0x1d3)](_0x549061(0x1b8),(_0x3733ae,_0xffdfc2)=>{const _0x3a8c7e=_0x549061;_0xffdfc2['sendFile'](path[_0x3a8c7e(0xf9)](__dirname,bbpath2,_0x3a8c7e(0x1e2),_0x3a8c7e(0x193)));});if(HOST)http[_0x549061(0x1d5)](PORT,HOST);else http['listen'](PORT);const io=require(_0x549061(0x1ee))(http,{}),analytics=analyticsLib({'app':_0x549061(0x1c7),'plugins':[googleAnalytics({'trackingId':_0x549061(0x17b)})]}),TelegramBot=require(_0x549061(0x18a));let tgBot;if(settings[_0x549061(0x1b0)]&&settings[_0x549061(0x1b0)]!=''&&settings[_0x549061(0x177)]&&settings[_0x549061(0x177)]!='')initTelegram();function _0xdb19(){const _0xd9c785=['::1','getMinutes','sendFile','clients','apply','2FA\x20login\x20required','forEach','stopPolling','get-logs','/:bot/configuration','success','Bot\x20Mgr\x20>\x20stopping\x20Bot\x20','existsSync','Ok,\x20will\x20send\x20alert\x20notifications\x20only','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','RSA','toIPv4MappedAddress','starting\x20new\x20bot\x20|\x20Bot\x20','5\x20min','http','error\x20while\x20deleting\x20config\x20files:\x20',':\x20Bot\x20Mgr\x20>\x20','argv','/off\x20-\x20stop\x20bot(s)\x0a','30\x20min','getPortfolio','token','placeOrder','match','stop','blacklist','readdirSync','includes','bot.js','Notifications\x20enabled\x0a','Invalid\x20IP\x20address','store','Bot\x20Mgr\x20>\x20starting\x20all\x20bots','Alerts','message','date-fns','login\x20token\x20valid','-events.json','Invalid\x20authentication\x20token\x20(1)','mkdirSync','\x20|\x20','referer','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','Unauthorized\x20attempt\x20to\x20delete\x20bot','1896VvNunh','<b>Balance\x20Bot\x20status:</b>\x0a','1000','get-portfolio','No\x20bots\x20running\x20right\x20now','Crypt','jsonwebtoken','yargs/yargs','disabled\x20Bot\x20','Notifications\x20disabled\x0a','Orders','-performance.json','Error:\x20Invalid\x20argument\x20','Unauthorized\x20attempt\x20to\x20store\x20configuration','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','Password\x20reset\x20rejected','verify','max','Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings','HTML','44856bygKYT','expiry','Bot\x20Mgr\x20>\x20restarting\x20all\x20bots','set','show','sign','running','127.0.0.1','test','secret','answerCallbackQuery','analytics','store-settings','enabled','Token\x20blacklisted','temporary\x20token\x20generated','default','\x20/\x20','getSeconds','Temporary\x20access\x20rejected','getMonth','initclient','ipv6','login\x20required','Unauthorized\x20attempt\x20to\x20log\x20out','telegramEvents','started','Unauthorized\x20attempt\x20to\x20add\x20bot','bcryptjs','express','find','442670TRWeTi','split','remoteAddress','connection','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','getFullYear','error','whitelist','inherit','telegramUsername','all','constructor','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','UA-192771731-1','reject','add','cloneDeep','live','restart','port','botname','2FA\x20login\x20rejected','Notifications\x20enabled','randomFillSync','lowdb','pidRefreshToken','getHours','hashSync','node-telegram-bot-api','2FA\x20login\x20token\x20generated','idling\x20bot\x20\x20\x20|\x20Bot\x20','986917VpbpSt','store-headless','Unauthorized\x20login\x20attempt\x20(public\x20key)','temporary\x20access\x20not\x20allowed','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','password','index.html','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','\x20>\x20','handshake','username','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','Login\x20rejected','kind','Unauthorized\x20attempt\x20to\x20get\x20portfolio','reload','bb/','onText','bbPassword','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','slice','/help\x20-\x20show\x20available\x20commands\x0a','telegramIpApproval','removeListener','notification','access\x20timeout','Bot\x20Mgr\x20>\x20starting\x20Bot\x20','(((.+)+)+)+$','telegram2FaApproval','generateKeyPairAsync','send','bbUsername','login\x20not\x20required','/restart\x20-\x20restart\x20bot(s)\x0a','/:bot/performance','telegramToken','connected','function','All',':\x20Bot\x20Mgr\x20>\x20Sending\x20Telegram\x20message\x20failed','emitHistory','sortBy','pidExpireLogin','/:bot/support','auth','server','clientip','invalid\x20credentials','0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$','/:bot/coins','415azqaNw','Notifications\x20types:\x20','Invalid\x20Telegram\x20token','remove','botmanager','whitelistEnabled','ipc','toString','Balance\x20Bot','catch','bot-','231TBoUOe','storeHeadless','39bxwvhO','push','Notifications\x20disabled','User\x20has\x20been\x20validated','delete-bot','use','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','get','Bot\x20Manager\x20started\x20|\x20open:\x20http://[ip-address]:','listen','status','unlinkSync','SIGINT','stopped','Allow\x20login\x20from\x20IP\x20address\x20<b>','temporary\x20access\x20rejected','page','276501nlUgkg','yes','/:bot/history','botID','2FA\x20required','build','loginRequired','privateKey','3000','new-disabled','Unauthorized\x20attempt\x20to\x20update\x20settings','login\x20token\x20generated','\x20only\x0a','static','type','/on\x20-\x20start\x20bot(s)\x0a','telegramChatId','socket.io','Login\x20accepted','headers','copyFileSync','crypto','path','parse','-results.json','map','bot','-----------------------------------------------------------------------------------','isIPv4MappedAddress','All\x20bots\x20running\x20right\x20now','child_process','get-starting-balances','starting\x20bot\x20|\x20Bot\x20','/:bot','getUTCHours','polling_error','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20<b>','4181268SIfkTt','************','21DMbdfd','getDate','then','login','toIPv4Address','temporaryAccessAllowed','lowdb/adapters/FileSync','f2aRequired','bots','filter','name','assign','value','disabled','bb-config.json','build2','\x20minutes','padStart','accept','disconnect','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','callback_query','ipaddr.js','timeshift','allow','sha256','bb-secure.json','telegram','-config.json','sendMessage','settings','reason','24gzKWeT','length','createServer','/disable\x20-\x20disable\x20notifications\x0a','41956LKrNsT','logged\x20out','keys','exp','config/','user','orders','emit','/:bot/portfolio','Unauthorized\x20attempt\x20to\x20update\x20bot','apiKey','SIGTERM','access','new','from','settings.','You\x20can\x20use\x20the\x20following\x20commands:\x0a','encryptedUuid','chat','search','868026xaSzCH','timestamp','getTime','Bot\x20Mgr\x20>\x20stopping\x20all\x20bots','defaults','hasOwnProperty','randomBytes','</b>\x20?','telegramEnabled','data','uuid','NTBA_FIX_319','cancel-loading','exit','Bot\x20','publicKey','join','alerts','write','decrypt','Bot\x20Mgr\x20>\x20','hybrid-crypto-js','conn','logout','reset-password','cancelLoading','event','RSA-OAEP','order','log','args','All\x20bots','2FA'];_0xdb19=function(){return _0xd9c785;};return _0xdb19();}initStates(),startServer(),startSocket(),startScheduler();function startServer(){const _0x135b14=_0x549061;console[_0x135b14(0x106)](''),console[_0x135b14(0x106)](_0x135b14(0x1f8)),logging(_0x135b14(0x1d4)+PORT),console[_0x135b14(0x106)](_0x135b14(0x1f8));if(config[_0x135b14(0xd2)]!=0x0)config[_0x135b14(0x110)](_0xc4cd04=>{const _0x4c1449=_0x135b14;if(_0xc4cd04[_0x4c1449(0x1d6)]==_0x4c1449(0x15c)||_0xc4cd04[_0x4c1449(0x1d6)]==_0x4c1449(0xe2))logging(_0x4c1449(0x1fd)+_0xc4cd04[_0x4c1449(0x1e0)]+_0x4c1449(0x137)+_0xc4cd04['botname']),startBot([_0xc4cd04[_0x4c1449(0x1e0)],userID],{'cwd':bbpath},function(_0x50064d){if(_0x50064d)logging(_0x50064d);});else(_0xc4cd04[_0x4c1449(0x1d6)]=='disabled'||_0xc4cd04[_0x4c1449(0x1d6)]==_0x4c1449(0x1e6))&&logging(_0x4c1449(0x18c)+_0xc4cd04[_0x4c1449(0x1e0)]+_0x4c1449(0x137)+_0xc4cd04[_0x4c1449(0x182)]);});else!newBot&&console['log'](_0x135b14(0x118));if(newBot)addBot();console[_0x135b14(0x106)](_0x135b14(0x1f8)),console[_0x135b14(0x106)]('');}function startSocket(){const _0xaf11d=_0x549061;io['on'](_0xaf11d(0x171),_0x765bca=>{const _0x47cb6a=_0xaf11d;let _0xbb2bc0,_0x5cdc12,_0x716aab,_0x2254e0,_0x5936ba;const _0x42c837=_0x765bca[_0x47cb6a(0x196)][_0x47cb6a(0x1f0)][_0x47cb6a(0x138)];_0x5cdc12=_0x42c837[_0x47cb6a(0x126)](/bot[0-9]{3}/);if(_0x5cdc12)_0x716aab=_0x5cdc12[0x0][_0x47cb6a(0x126)](/[0-9]{3}/);if(_0x716aab)_0xbb2bc0=_0x716aab[0x0];else _0xbb2bc0=_0x47cb6a(0x1c3);const _0x1d6e5b=_0x765bca[_0x47cb6a(0x196)][_0x47cb6a(0x1b9)][_0x47cb6a(0xe6)];if(!_0x1d6e5b)_0x765bca[_0x47cb6a(0xdc)]('status',{'publicKey':secure[_0x47cb6a(0xf8)]});else{_0x2254e0=timelyDecrypt(_0x1d6e5b,![]);if(!_0x2254e0)logging(_0x47cb6a(0x18f)),_0x765bca[_0x47cb6a(0xdc)](_0x47cb6a(0x1d6),{'publicKey':secure[_0x47cb6a(0xf8)]});else{_0x5936ba=normalizeIP(_0x765bca[_0x47cb6a(0xff)][_0x47cb6a(0x170)])[_0x47cb6a(0x12e)];if(!devices[_0x2254e0])devices[_0x2254e0]={'uuid':_0x2254e0,'access':{'token':null}};devices[_0x2254e0]['ip']=_0x5936ba;const _0x1f8415=addClient(_0x765bca['id'],_0x2254e0,_0xbb2bc0);setAccess(_0x1f8415),_0x765bca['on'](_0x47cb6a(0x207),_0x3da8b5=>{const _0x380b6b=_0x47cb6a,_0x52d6c1=timelyDecrypt(_0x3da8b5[_0x380b6b(0x192)]);if(_0x52d6c1){_0x3da8b5={'username':_0x3da8b5[_0x380b6b(0x197)],'password':_0x52d6c1},devices[_0x2254e0][_0x380b6b(0xe1)]=validateCredentials(_0x3da8b5,_0x2254e0);if(devices[_0x2254e0]['access'][_0x380b6b(0x21c)]==![]&&devices[_0x2254e0][_0x380b6b(0xe1)]['reason']==_0x380b6b(0x10f))_0x765bca[_0x380b6b(0xdc)](_0x380b6b(0x1d6),{'access':devices[_0x2254e0][_0x380b6b(0xe1)]}),loginAccess2FA(_0x2254e0,_0x5936ba);else{if(devices[_0x2254e0][_0x380b6b(0xe1)][_0x380b6b(0x21c)]==![]&&devices[_0x2254e0][_0x380b6b(0xe1)][_0x380b6b(0xd0)]==_0x380b6b(0x1bc))_0x765bca[_0x380b6b(0xdc)](_0x380b6b(0x1d6),{'access':devices[_0x2254e0][_0x380b6b(0xe1)]});else devices[_0x2254e0]['access']['allow']&&devices[_0x2254e0][_0x380b6b(0xe1)][_0x380b6b(0xd0)]==_0x380b6b(0x1e8)&&(getClientsWithUuid(_0x2254e0)[_0x380b6b(0x110)](_0x311559=>{setAccess(_0x311559);}),setTokenRefresh(_0x2254e0),setSessionTimeout(_0x380b6b(0x207),_0x2254e0));}}else logging('Unauthorized\x20login\x20attempt\x20(timeout)');}),_0x765bca['on'](_0x47cb6a(0x101),()=>{resetPassword();}),_0x765bca['on'](_0x47cb6a(0x217),_0x530d8a=>{removeClient(_0x765bca['id']);});}}});}function initClient(_0x533745){const _0x57de9a=_0x549061;if(_0x533745!=_0x57de9a(0x1c3)&&config[_0x57de9a(0xdf)]!=''){if(pid[_0x533745])pid[_0x533745][_0x57de9a(0x1ab)]({'function':_0x57de9a(0x164),'args':null});}}function getSocket(_0x5a8580){const _0x43c35b=_0x549061;return io['sockets']['sockets'][_0x43c35b(0x1d3)](_0x5a8580);}function setAccess(_0x115728){const _0x5a6e15=_0x549061,_0xce1e3c=getSocket(_0x115728['id']),_0x527f18=_0x115728[_0x5a6e15(0xf3)],_0x2a4ac2=_0x115728[_0x5a6e15(0x1f7)];devices[_0x527f18][_0x5a6e15(0xe1)]=validateAccess(devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0x124)],_0x527f18),_0xce1e3c[_0x5a6e15(0xf9)](_0x527f18);if(devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0x21c)]){_0xce1e3c['join'](_0x2a4ac2);if(_0x2a4ac2=='botmanager')initializeSocketBotManager(_0xce1e3c);else initializeSocketBot(_0xce1e3c);initClient(_0x2a4ac2);}devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0x124)]&&devices[_0x527f18]['access'][_0x5a6e15(0xd0)]==_0x5a6e15(0x15e)&&setSessionTimeout(_0x5a6e15(0x109),_0x527f18),devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0x124)]&&devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0xd0)]=='2FA\x20login\x20token\x20generated'&&setSessionTimeout(_0x5a6e15(0x207),_0x527f18),_0xce1e3c[_0x5a6e15(0xdc)](_0x5a6e15(0x1d6),{'status':_0x115728[_0x5a6e15(0x1ba)],'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x527f18][_0x5a6e15(0xe1)],'externalip':devices[_0x527f18]['ip'],'publicKey':secure[_0x5a6e15(0xf8)]}),devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0x21c)]==![]&&devices[_0x527f18][_0x5a6e15(0xe1)][_0x5a6e15(0xd0)]=='2FA\x20required'&&temporaryAccess2FA(_0x527f18,devices[_0x527f18]['ip']);}function setSessionTimeout(_0x5efe52,_0x393137){const _0x359076=_0x549061;let _0x4fe91c;if(_0x5efe52=='login')_0x4fe91c=loginExpiry*0x3c*0x3e8;else _0x4fe91c=devices[_0x393137]['telegramIpApproval'][_0x359076(0x150)]*0x3c*0x3e8-(new Date()[_0x359076(0xeb)]()-devices[_0x393137][_0x359076(0x1a3)][_0x359076(0xea)]);if(devices[_0x393137]['pidExpireLogin'])clearTimeout(devices[_0x393137][_0x359076(0x1b7)]);devices[_0x393137][_0x359076(0x1b7)]=setTimeout(()=>{const _0x287993=_0x359076;if(devices[_0x393137][_0x287993(0x187)])clearTimeout(devices[_0x393137][_0x287993(0x187)]);removeSocketListeners(_0x393137),addBlacklist(_0x393137),devices[_0x393137][_0x287993(0x1a3)]=null,devices[_0x393137][_0x287993(0x1a9)]=null,devices[_0x393137][_0x287993(0xe1)][_0x287993(0x124)]=null,devices[_0x393137][_0x287993(0xe1)]=validateAccess(devices[_0x393137][_0x287993(0xe1)][_0x287993(0x124)],_0x393137),!(devices[_0x393137][_0x287993(0xe1)][_0x287993(0x21c)]&&devices[_0x393137]['access']['reason']==_0x287993(0x1ad))&&(_0x5efe52==_0x287993(0x207)?io['to'](_0x393137)['emit'](_0x287993(0x1d6),{'access':{'allow':![],'reason':_0x287993(0x1a6),'token':null}}):io['to'](_0x393137)[_0x287993(0xdc)](_0x287993(0x1d6),{'access':{'allow':![],'reason':'temporary\x20access\x20timeout','token':null}})),devices[_0x393137][_0x287993(0xe1)]['token']=null;},_0x4fe91c);}function setTokenRefresh(_0x2a8602){const _0x477de6=_0x549061;if(devices[_0x2a8602][_0x477de6(0x187)])clearTimeout(devices[_0x2a8602][_0x477de6(0x187)]);devices[_0x2a8602]['pidRefreshToken']=setTimeout(()=>{const _0x523328=_0x477de6;getClientsWithUuid(_0x2a8602)['length']!=0x0?(devices[_0x2a8602][_0x523328(0xe1)]=refreshToken(_0x2a8602),io['to'](_0x2a8602)[_0x523328(0xdc)](_0x523328(0x1d6),{'status':_0x523328(0x1b1),'serverversion':serverversion,'servertime':getServerTime(),'access':devices[_0x2a8602][_0x523328(0xe1)],'externalip':devices[_0x2a8602]['ip'],'publicKey':secure['publicKey']}),setTokenRefresh(_0x2a8602)):clearTimeout(devices[_0x2a8602][_0x523328(0x187)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x11c584){const _0x76aeff=_0x549061,_0x13139c=getClient(_0x11c584['id'])[_0x76aeff(0xf3)];_0x11c584['emit'](_0x76aeff(0x20c),config),_0x11c584[_0x76aeff(0xdc)](_0x76aeff(0x222),cleanSettings()),_0x11c584['on']('add-bot',_0x88d028=>{const _0x397f63=_0x76aeff;if(validateAccess(_0x88d028,_0x13139c)[_0x397f63(0x21c)])addBot();else logging(_0x397f63(0x16a));}),_0x11c584['on']('update-bot',(_0x412334,_0x413a18)=>{const _0x4d6221=_0x76aeff;if(validateAccess(_0x413a18,_0x13139c)[_0x4d6221(0x21c)])toggleBot(_0x412334[_0x4d6221(0x1e0)],_0x412334[_0x4d6221(0x1d6)],_0x412334['live']);else logging(_0x4d6221(0xde));}),_0x11c584['on'](_0x76aeff(0x1d0),(_0x4f09e7,_0x11866f)=>{const _0x5b7093=_0x76aeff;if(validateAccess(_0x11866f,_0x13139c)['allow'])deleteBot(_0x4f09e7);else logging(_0x5b7093(0x13a));}),_0x11c584['on'](_0x76aeff(0x15b),(_0x24ddc2,_0x23f1db)=>{const _0xe8ab1=_0x76aeff;if(validateAccess(_0x23f1db,_0x13139c)[_0xe8ab1(0x21c)])storeSettings(_0x24ddc2,!![]);else logging(_0xe8ab1(0x1e7));}),_0x11c584['on']('update-bb',(_0x480c57,_0x157abe)=>{const _0xc66b46=_0x76aeff;if(validateAccess(_0x157abe,_0x13139c)[_0xc66b46(0x21c)])updateBB();else logging(_0xc66b46(0x1e7));}),_0x11c584['on'](_0x76aeff(0x100),_0x2e83db=>{const _0x5e7258=_0x76aeff;if(validateAccess(_0x2e83db,_0x13139c)['allow']){if(devices[_0x13139c]['pidRefreshToken'])clearTimeout(devices[_0x13139c][_0x5e7258(0x187)]);if(devices[_0x13139c][_0x5e7258(0x1b7)])clearTimeout(devices[_0x13139c][_0x5e7258(0x1b7)]);removeSocketListeners(getClient(_0x11c584['id'])[_0x5e7258(0xf3)]),addBlacklist(_0x13139c),devices[_0x13139c][_0x5e7258(0x1a3)]=null,devices[_0x13139c][_0x5e7258(0x1a9)]=null,devices[_0x13139c]['access'][_0x5e7258(0x124)]=null,io['to'](getClient(_0x11c584['id'])[_0x5e7258(0xf3)])[_0x5e7258(0xdc)]('status',{'access':{'allow':![],'reason':_0x5e7258(0xd6),'token':null}});}else logging(_0x5e7258(0x167));});}function initializeSocketBot(_0x5e7cc9){const _0x25f3af=_0x549061,_0x5775c2=getClient(_0x5e7cc9['id'])[_0x25f3af(0x1f7)],_0x9a1c3b=getClient(_0x5e7cc9['id'])['uuid'];_0x5e7cc9['on'](_0x25f3af(0x112),(_0x67251e,_0x21c986)=>{const _0x44c384=_0x25f3af;if(validateAccess(_0x21c986,_0x9a1c3b)[_0x44c384(0x21c)]){if(pid[_0x5775c2])pid[_0x5775c2][_0x44c384(0x1ab)]({'function':_0x44c384(0x1b5),'args':_0x67251e});}else logging('Unauthorized\x20attempt\x20to\x20get\x20logs');}),_0x5e7cc9['on'](_0x25f3af(0x13e),(_0x203630,_0xea0ce0)=>{const _0x186c3e=_0x25f3af;if(validateAccess(_0xea0ce0,_0x9a1c3b)['allow']){if(pid[_0x5775c2])pid[_0x5775c2]['send']({'function':_0x186c3e(0x123),'args':_0x203630});}else logging(_0x186c3e(0x19b));}),_0x5e7cc9['on']('store-configuration',(_0x215e20,_0x2e3aa2)=>{const _0x3e863a=_0x25f3af;if(validateAccess(_0x2e3aa2,_0x9a1c3b)[_0x3e863a(0x21c)]){if(pid[_0x5775c2])pid[_0x5775c2][_0x3e863a(0x1ab)]({'function':'storeConfiguration','args':_0x215e20});}else logging(_0x3e863a(0x148));}),_0x5e7cc9['on'](_0x25f3af(0x18e),(_0x380820,_0x2a73f3)=>{const _0x13da5e=_0x25f3af;if(validateAccess(_0x2a73f3,_0x9a1c3b)['allow']){if(pid[_0x5775c2])pid[_0x5775c2][_0x13da5e(0x1ab)]({'function':_0x13da5e(0x1cb),'args':_0x380820});}else logging(_0x13da5e(0x139));}),_0x5e7cc9['on'](_0x25f3af(0x1fc),_0x1fcc17=>{const _0x2e0f2f=_0x25f3af;if(validateAccess(_0x1fcc17,_0x9a1c3b)[_0x2e0f2f(0x21c)]){if(pid[_0x5775c2])pid[_0x5775c2]['send']({'function':'getStartingBalances','args':null});}else logging(_0x2e0f2f(0x191));}),_0x5e7cc9['on']('place-order',(_0x1a7c0c,_0x2fc27c)=>{const _0x54bf03=_0x25f3af;if(validateAccess(_0x2fc27c,_0x9a1c3b)[_0x54bf03(0x21c)]){if(pid[_0x5775c2])pid[_0x5775c2]['send']({'function':_0x54bf03(0x125),'args':_0x1a7c0c});}else logging(_0x54bf03(0x17a));}),_0x5e7cc9['on'](_0x25f3af(0xf5),_0x51d247=>{const _0x1ae2f4=_0x25f3af;if(validateAccess(_0x51d247,_0x9a1c3b)[_0x1ae2f4(0x21c)]){if(pid[_0x5775c2])pid[_0x5775c2][_0x1ae2f4(0x1ab)]({'function':_0x1ae2f4(0x102),'args':null});}else logging(_0x1ae2f4(0x172));}),_0x5e7cc9['on'](_0x25f3af(0x100),_0x1a6758=>{const _0x20d58b=_0x25f3af;if(validateAccess(_0x1a6758,_0x9a1c3b)[_0x20d58b(0x21c)]){if(devices[_0x9a1c3b][_0x20d58b(0x187)])clearTimeout(devices[_0x9a1c3b]['pidRefreshToken']);if(devices[_0x9a1c3b][_0x20d58b(0x1b7)])clearTimeout(devices[_0x9a1c3b][_0x20d58b(0x1b7)]);removeSocketListeners(getClient(_0x5e7cc9['id'])[_0x20d58b(0xf3)]),addBlacklist(_0x9a1c3b),devices[_0x9a1c3b][_0x20d58b(0x1a3)]=null,devices[_0x9a1c3b][_0x20d58b(0x1a9)]=null,devices[_0x9a1c3b][_0x20d58b(0xe1)][_0x20d58b(0x124)]=null,io['to'](getClient(_0x5e7cc9['id'])[_0x20d58b(0xf3)])[_0x20d58b(0xdc)]('status',{'access':{'allow':![],'reason':_0x20d58b(0xd6),'token':null}});}else logging(_0x20d58b(0x167));});}function removeSocketListeners(_0x484d6a){const _0x3b7c7a=_0x549061;getClientsWithUuid(_0x484d6a)[_0x3b7c7a(0x110)](_0x4d8c36=>{getSocket(_0x4d8c36['id'])['removeAllListeners']();});}function cleanSettings(){const _0x23b4fd=_0x549061;let _0x238746=settings;return settings['telegramToken']&&settings['telegramToken']!=''&&(_0x238746={..._0x238746,'telegramToken':_0x23b4fd(0x203)}),settings[_0x23b4fd(0x19f)]&&settings[_0x23b4fd(0x19f)]!=''&&(_0x238746={..._0x238746,'bbPassword':_0x23b4fd(0x203)}),_0x238746;}function updateBB(){const _0x261c16=_0x549061;process[_0x261c16(0x1ab)]({'update':!![]},_0x5f5615=>{});}function startBot(_0x556341,_0xdc6953,_0x2ff40f){const _0x17fb0e=_0x549061;let _0x32abb0=![];const _0x32693f=_0x556341[0x0];_0xdc6953={..._0xdc6953,'stdio':[_0x17fb0e(0x176),'inherit',_0x17fb0e(0x176),_0x17fb0e(0x1c5)]},pid[_0x32693f]=childProcess['fork'](botfile,_0x556341,_0xdc6953),pid[_0x32693f]['on'](_0x17fb0e(0x131),_0x34d1fb=>{const _0xf4a012=_0x17fb0e;switch(Object[_0xf4a012(0xd7)](_0x34d1fb)[0x0]){case'botname':updateBotName(_0x32693f,_0x34d1fb['botname']);break;case _0xf4a012(0x1d6):updateStatus(_0x32693f,_0x34d1fb[_0xf4a012(0x1d6)]);break;case _0xf4a012(0x17f):updateLive(_0x32693f,_0x34d1fb[_0xf4a012(0x17f)]);break;case _0xf4a012(0x169):updateLive(_0x32693f,_0x34d1fb[_0xf4a012(0x169)]),io['to'](_0x32693f)['emit'](_0xf4a012(0x1d6),{'access':{'allow':![],'reason':_0xf4a012(0x19c),'token':null}});break;case _0xf4a012(0x127):_0x34d1fb[_0xf4a012(0x127)]==_0xf4a012(0x180)&&stopBot(_0x32693f);_0x34d1fb[_0xf4a012(0x127)]=='kill'&&toggleBot(_0x32693f,_0xf4a012(0x211),_0xf4a012(0x1d9));break;case'telegram':sendTelegram(_0x32693f,_0x34d1fb[_0xf4a012(0x21f)]);break;case _0xf4a012(0x1b2):io['to'](_0x32693f)[_0xf4a012(0xdc)](_0x34d1fb[_0xf4a012(0x1b2)],_0x34d1fb[_0xf4a012(0x107)]);break;}}),pid[_0x32693f]['on'](_0x17fb0e(0x174),function(_0x47cb0e){if(_0x32abb0)return;_0x32abb0=!![],_0x2ff40f(_0x47cb0e);}),pid[_0x32693f]['on']('exit',function(_0x40beed){const _0x1f29b7=_0x17fb0e;if(_0x32abb0)return;_0x32abb0=!![],_0x2ff40f(null);const _0x3c71f1=dbConfig[_0x1f29b7(0x1d3)](_0x1f29b7(0x20c))[_0x1f29b7(0x16d)]({'botID':_0x32693f})[_0x1f29b7(0x210)]();_0x3c71f1&&(_0x3c71f1[_0x1f29b7(0x1d6)]=='enabled'||_0x3c71f1[_0x1f29b7(0x1d6)]==_0x1f29b7(0xe2))&&(updateLive(_0x32693f,_0x1f29b7(0x1d9)),logging('restarting\x20Bot\x20'+_0x32693f),startBot([_0x32693f,userID],{'cwd':bbpath},function(_0x47c35d){if(_0x47c35d)logging(_0x47c35d);}));});}function stopBot(_0x20868d){const _0x314c04=_0x549061;getClientsWithBotID(_0x20868d)[_0x314c04(0x110)](_0x4f6ddb=>{getSocket(_0x4f6ddb['id'])['disconnect'](!![]),removeClient(_0x4f6ddb['id']);});if(pid[_0x20868d])pid[_0x20868d]['kill']();}function addBot(){const _0x4f4eb5=_0x549061;let _0x183ea3;for(let _0x809b77=0x1;_0x809b77<0x3e9;_0x809b77++){_0x183ea3=_0x809b77[_0x4f4eb5(0x1c6)]()[_0x4f4eb5(0x215)](0x3,'0');let _0x3fd80e=config[_0x4f4eb5(0x16d)](_0x10d03d=>_0x10d03d[_0x4f4eb5(0x1e0)]==_0x183ea3);if(!_0x3fd80e)break;}if(_0x183ea3===_0x4f4eb5(0x13d)){logging('the\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached');return;}logging(_0x4f4eb5(0x11b)+_0x183ea3),dbConfig[_0x4f4eb5(0x1d3)](_0x4f4eb5(0x20c))[_0x4f4eb5(0x1cd)]({'botID':_0x183ea3,'botname':'Bot\x20'+_0x183ea3,'status':_0x4f4eb5(0xe2),'live':''})[_0x4f4eb5(0xfb)](),startBot([_0x183ea3,userID],{'cwd':bbpath},function(_0xd43aaf){if(_0xd43aaf)logging(_0xd43aaf);}),config=getConfiguration(),io['to'](_0x4f4eb5(0x1c3))[_0x4f4eb5(0xdc)](_0x4f4eb5(0x20c),config);}function deleteBot(_0x19a23c){const _0x235b37=_0x549061;getClientsWithBotID(_0x19a23c)[_0x235b37(0x110)](_0xc881b9=>{const _0x58dd33=_0x235b37;getSocket(_0xc881b9['id'])[_0x58dd33(0x217)](!![]),removeClient(_0xc881b9['id']);}),dbConfig['get']('bots')[_0x235b37(0x1c2)]({'botID':_0x19a23c})[_0x235b37(0xfb)](),logging('deleted\x20Bot\x20'+_0x19a23c),stopBot(_0x19a23c);try{fs[_0x235b37(0x1d7)](path[_0x235b37(0xf9)](configpath,_0x235b37(0x1c9)+_0x19a23c+_0x235b37(0x220))),fs[_0x235b37(0x1d7)](path['join'](configpath,_0x235b37(0x1c9)+_0x19a23c+_0x235b37(0x134))),fs[_0x235b37(0x1d7)](path[_0x235b37(0xf9)](configpath,_0x235b37(0x1c9)+_0x19a23c+_0x235b37(0x146))),fs[_0x235b37(0x1d7)](path[_0x235b37(0xf9)](configpath,_0x235b37(0x1c9)+_0x19a23c+_0x235b37(0x1f5)));}catch(_0x2c1d90){if(_0x2c1d90)logging(_0x235b37(0x11e),_0x2c1d90);}config=getConfiguration(),io['to'](_0x235b37(0x1c3))[_0x235b37(0xdc)](_0x235b37(0x20c),config);}function toggleBot(_0x246dae,_0x4c152d,_0x4057cc){const _0x2adcc0=_0x549061;dbConfig[_0x2adcc0(0x1d3)](_0x2adcc0(0x20c))['find']({'botID':_0x246dae})['assign']({'status':_0x4c152d})['assign']({'live':_0x4057cc})[_0x2adcc0(0xfb)]();if(_0x4c152d==_0x2adcc0(0x15c)||_0x4c152d==_0x2adcc0(0xe2))logging('enabled\x20Bot\x20'+_0x246dae),startBot([_0x246dae,userID],{'cwd':bbpath},function(_0x35e468){if(_0x35e468)logging(_0x35e468);});else(_0x4c152d==_0x2adcc0(0x211)||_0x4c152d==_0x2adcc0(0x1e6))&&(logging(_0x2adcc0(0x143)+_0x246dae),stopBot(_0x246dae));config=getConfiguration(),io['to'](_0x2adcc0(0x1c3))[_0x2adcc0(0xdc)]('bots',config);}function toggleStatus(_0x434362){const _0x45664e=_0x549061;let _0x2d8491=dbConfig[_0x45664e(0x1d3)]('bots')['find']({'botID':_0x434362})[_0x45664e(0x210)](),_0x159b41;if(_0x2d8491['status']===_0x45664e(0x15c))_0x159b41=_0x45664e(0x211);else{if(_0x2d8491[_0x45664e(0x1d6)]===_0x45664e(0xe2))_0x159b41=_0x45664e(0x1e6);else{if(_0x2d8491['status']==='new-disabled')_0x159b41=_0x45664e(0xe2);else{if(_0x2d8491[_0x45664e(0x1d6)]===_0x45664e(0x211))_0x159b41=_0x45664e(0x15c);}}}return _0x159b41;}function updateStatus(_0x35cb48,_0x434078){const _0x252c8a=_0x549061;dbConfig[_0x252c8a(0x1d3)](_0x252c8a(0x20c))[_0x252c8a(0x16d)]({'botID':_0x35cb48})[_0x252c8a(0x20f)]({'status':_0x434078})[_0x252c8a(0xfb)](),config=getConfiguration(),io['to'](_0x252c8a(0x1c3))[_0x252c8a(0xdc)](_0x252c8a(0x20c),config);}function updateLive(_0x174b85,_0x96220f){const _0x568d81=_0x549061;dbConfig[_0x568d81(0x1d3)](_0x568d81(0x20c))[_0x568d81(0x16d)]({'botID':_0x174b85})[_0x568d81(0x20f)]({'live':_0x96220f})['write'](),config=getConfiguration(),io['to'](_0x568d81(0x1c3))[_0x568d81(0xdc)](_0x568d81(0x20c),config);}function updateBotName(_0x2d5e51,_0x47ce0f){const _0x5a490=_0x549061;dbConfig[_0x5a490(0x1d3)](_0x5a490(0x20c))[_0x5a490(0x16d)]({'botID':_0x2d5e51})[_0x5a490(0x20f)]({'botname':_0x47ce0f})[_0x5a490(0xfb)](),config=getConfiguration(),io['to']('botmanager')[_0x5a490(0xdc)]('bots',config);}function telegramError(_0x295a1f){const _0x6ae7d3=_0x549061;console['log'](getTimeStamp()+_0x6ae7d3(0x1b4));}function validateTelegram(_0x2d0774){const _0x22038b=_0x549061;if(_0x2d0774['from'][_0x22038b(0x197)]!=settings[_0x22038b(0x177)]&&'@'+_0x2d0774[_0x22038b(0xe3)]['username']!=settings[_0x22038b(0x177)])return tgBot['sendMessage'](_0x2d0774['chat']['id'],_0x22038b(0x14d),{'parse_mode':'HTML'})['catch'](_0xa985d7=>{telegramError(_0xa985d7);}),![];return!![];}async function initTelegram(){const _0x5d95cd=_0x549061;if(tgBot)tgBot['stopPolling'](),tgBot=null,initTelegram();else{tgBot=new TelegramBot(settings[_0x5d95cd(0x1b0)],{'polling':!![]});let _0x136001=_0x5d95cd(0xe5);_0x136001+='\x0a',_0x136001+='/enable\x20-\x20enable\x20notifications\x0a',_0x136001+=_0x5d95cd(0xd4),_0x136001+=_0x5d95cd(0x194),_0x136001+=_0x5d95cd(0x1ae),_0x136001+=_0x5d95cd(0x1ec),_0x136001+=_0x5d95cd(0x121),_0x136001+='/status\x20-\x20show\x20bot(s)\x20status\x0a',_0x136001+=_0x5d95cd(0x1a2);let _0xcbd0bf='Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a';_0xcbd0bf+='\x0a',_0xcbd0bf+=_0x136001,tgBot[_0x5d95cd(0x19e)](/\/start/,_0x106349=>{const _0x5cbb33=_0x5d95cd;if(!validateTelegram(_0x106349))return;if(settings[_0x5cbb33(0x1ed)]!=_0x106349['chat']['id'])updateSetting(_0x5cbb33(0x1ed),_0x106349[_0x5cbb33(0xe7)]['id']);updateSetting(_0x5cbb33(0xf1),!![]),tgBot['sendMessage'](_0x106349[_0x5cbb33(0xe7)]['id'],_0xcbd0bf)[_0x5cbb33(0x1c8)](_0x2ccb03=>{telegramError(_0x2ccb03);});}),tgBot[_0x5d95cd(0x19e)](/\/enable/,_0x25efab=>{const _0x142bd3=_0x5d95cd;if(!validateTelegram(_0x25efab))return;if(settings[_0x142bd3(0x1ed)]!=_0x25efab[_0x142bd3(0xe7)]['id'])updateSetting(_0x142bd3(0x1ed),_0x25efab[_0x142bd3(0xe7)]['id']);updateSetting('telegramEnabled',!![]),tgBot['sendMessage'](_0x25efab['chat']['id'],_0x142bd3(0x184))[_0x142bd3(0x1c8)](_0x53102a=>{telegramError(_0x53102a);});}),tgBot[_0x5d95cd(0x19e)](/\/config/,async _0xf625f2=>{const _0x5e5b75=_0x5d95cd;if(!validateTelegram(_0xf625f2))return;tgBot[_0x5e5b75(0x1a4)]('callback_query'),tgBot[_0x5e5b75(0x221)](_0xf625f2[_0x5e5b75(0xe7)]['id'],_0x5e5b75(0x1a0),{'reply_markup':{'inline_keyboard':[[{'text':_0x5e5b75(0x145),'callback_data':'orders'},{'text':_0x5e5b75(0x130),'callback_data':_0x5e5b75(0xfa)},{'text':_0x5e5b75(0x1b3),'callback_data':_0x5e5b75(0x178)}]]}})[_0x5e5b75(0x1c8)](_0x4d674a=>{telegramError(_0x4d674a);}),tgBot['on'](_0x5e5b75(0x219),async _0x34d2ab=>{const _0x3c6c1b=_0x5e5b75,_0x335a1f=_0x34d2ab[_0x3c6c1b(0xf2)],_0x103ec4=_0x34d2ab['message'];tgBot[_0x3c6c1b(0x159)](_0x34d2ab['id'])[_0x3c6c1b(0x206)](async()=>{const _0x4967f7=_0x3c6c1b;_0x335a1f==_0x4967f7(0xdb)&&(updateSetting(_0x4967f7(0x168),'orders'),updateSetting(_0x4967f7(0xf1),!![]),await tgBot[_0x4967f7(0x221)](_0x103ec4[_0x4967f7(0xe7)]['id'],'Ok,\x20will\x20send\x20order\x20notifications\x20only')[_0x4967f7(0x1c8)](_0x3db0b6=>{telegramError(_0x3db0b6);}));_0x335a1f=='alerts'&&(updateSetting(_0x4967f7(0x168),'alerts'),updateSetting('telegramEnabled',!![]),await tgBot[_0x4967f7(0x221)](_0x103ec4[_0x4967f7(0xe7)]['id'],_0x4967f7(0x117))[_0x4967f7(0x1c8)](_0x527fc3=>{telegramError(_0x527fc3);}));_0x335a1f=='all'&&(updateSetting(_0x4967f7(0x168),'all'),updateSetting(_0x4967f7(0xf1),!![]),await tgBot[_0x4967f7(0x221)](_0x103ec4['chat']['id'],_0x4967f7(0x218))[_0x4967f7(0x1c8)](_0x1016cf=>{telegramError(_0x1016cf);}));if(!settings['telegramChatId'])tgBot[_0x4967f7(0x221)](_0x103ec4[_0x4967f7(0xe7)]['id'],'Note:\x20notifications\x20are\x20currently\x20disabled\x20-\x20to\x20enable\x20notifications,\x20type\x20/enable')['catch'](_0x2b1c71=>{telegramError(_0x2b1c71);});}),tgBot[_0x3c6c1b(0x1a4)](_0x3c6c1b(0x219));});}),tgBot['onText'](/\/status/,_0x399600=>{const _0x22df05=_0x5d95cd;if(!validateTelegram(_0x399600))return;let _0x3c8ab5=_0x22df05(0x13c);config[_0x22df05(0x110)](_0x2a47d7=>{const _0x3934b4=_0x22df05;_0x3c8ab5+=_0x3934b4(0xf7)+_0x2a47d7[_0x3934b4(0x1e0)]+'\x20|\x20'+_0x2a47d7[_0x3934b4(0x182)]+':\x20'+_0x2a47d7['status']+_0x3934b4(0x160)+_0x2a47d7[_0x3934b4(0x17f)]+'\x0a';}),_0x3c8ab5+='\x0a',_0x3c8ab5+='<b>Telegram\x20bot\x20status:</b>\x0a',_0x3c8ab5+=!settings[_0x22df05(0xf1)]?_0x22df05(0x144):_0x22df05(0x12c),_0x3c8ab5+=settings['telegramEnabled']?settings['telegramEvents']==_0x22df05(0x178)?_0x22df05(0x1d2):_0x22df05(0x1c0)+settings[_0x22df05(0x168)]+_0x22df05(0x1e9):'',tgBot[_0x22df05(0x221)](_0x399600[_0x22df05(0xe7)]['id'],_0x3c8ab5,{'parse_mode':_0x22df05(0x14e)})[_0x22df05(0x1c8)](_0x4d9f3e=>{telegramError(_0x4d9f3e);});}),tgBot['onText'](/\/restart/,_0x2fc9c2=>{const _0x129c16=_0x5d95cd;if(!validateTelegram(_0x2fc9c2))return;tgBot[_0x129c16(0x1a4)]('callback_query');const _0x2bb5de=getEnabledBots();if(_0x2bb5de[_0x129c16(0xd2)]==0x0)tgBot[_0x129c16(0x221)](_0x2fc9c2[_0x129c16(0xe7)]['id'],_0x129c16(0x13f))['catch'](_0x5a2567=>{telegramError(_0x5a2567);});else{if(_0x2bb5de[_0x129c16(0xd2)]>0x1)_0x2bb5de[_0x129c16(0x1cd)]({'botID':_0x129c16(0x178)});let _0x34e0f8=[],_0x419a8=[];const _0x1a4c81=_0x2bb5de[_0x129c16(0xd2)]%0x4==0x0||_0x2bb5de[_0x129c16(0xd2)]%0x4==0x3||_0x2bb5de[_0x129c16(0xd2)]%0x3==0x1?0x4:0x3;let _0x4156bb=0x0;_0x2bb5de[_0x129c16(0x110)]((_0x24c2a5,_0x3b9372)=>{const _0x4fa035=_0x129c16;if(_0x3b9372%_0x1a4c81==0x0)_0x419a8=[];_0x419a8[_0x4fa035(0x1cd)]({'text':_0x24c2a5[_0x4fa035(0x1e0)]==_0x4fa035(0x178)?_0x4fa035(0x108):_0x4fa035(0xf7)+_0x24c2a5[_0x4fa035(0x1e0)],'callback_data':_0x24c2a5['botID']}),_0x3b9372%_0x1a4c81==0x0&&(_0x34e0f8[_0x4156bb]=_0x419a8,_0x4156bb++);}),tgBot['sendMessage'](_0x2fc9c2[_0x129c16(0xe7)]['id'],_0x129c16(0x198),{'reply_markup':{'inline_keyboard':_0x34e0f8}})[_0x129c16(0x1c8)](_0x35233e=>{telegramError(_0x35233e);}),tgBot['on'](_0x129c16(0x219),async _0x6f03b1=>{const _0x557cc3=_0x129c16,_0x58e00c=_0x6f03b1[_0x557cc3(0xf2)],_0x47239d=_0x6f03b1[_0x557cc3(0x131)];tgBot[_0x557cc3(0x159)](_0x6f03b1['id'])[_0x557cc3(0x206)](async()=>{const _0x134205=_0x557cc3;if(_0x58e00c=='all'){if(settings[_0x134205(0x168)]=='orders')tgBot[_0x134205(0x221)](_0x47239d[_0x134205(0xe7)]['id'],_0x134205(0x151))['catch'](_0x1d37ae=>{telegramError(_0x1d37ae);});config[_0x134205(0x110)](_0x5022a6=>{const _0x154db3=_0x134205;stopBot(_0x5022a6[_0x154db3(0x1e0)]);});}else{if(settings[_0x134205(0x168)]==_0x134205(0xdb))tgBot[_0x134205(0x221)](_0x47239d[_0x134205(0xe7)]['id'],'Bot\x20Mgr\x20>\x20restarting\x20Bot\x20'+_0x58e00c)[_0x134205(0x1c8)](_0x2423f0=>{telegramError(_0x2423f0);});stopBot(_0x58e00c);}}),tgBot[_0x557cc3(0x1a4)](_0x557cc3(0x219));});}}),tgBot['onText'](/\/on/,_0x29f6d6=>{const _0x595d6c=_0x5d95cd;if(!validateTelegram(_0x29f6d6))return;tgBot[_0x595d6c(0x1a4)](_0x595d6c(0x219));const _0x37bbe8=getDisabledBots();if(_0x37bbe8[_0x595d6c(0xd2)]==0x0)tgBot[_0x595d6c(0x221)](_0x29f6d6[_0x595d6c(0xe7)]['id'],_0x595d6c(0x1fa))[_0x595d6c(0x1c8)](_0x326de8=>{telegramError(_0x326de8);});else{if(_0x37bbe8[_0x595d6c(0xd2)]>0x1)_0x37bbe8[_0x595d6c(0x1cd)]({'botID':_0x595d6c(0x178)});let _0x47b897=[],_0x522c9b=[];const _0x4fbd4c=_0x37bbe8[_0x595d6c(0xd2)]%0x4==0x0||_0x37bbe8[_0x595d6c(0xd2)]%0x4==0x3||_0x37bbe8[_0x595d6c(0xd2)]%0x3==0x1?0x4:0x3;let _0x421b02=0x0;_0x37bbe8[_0x595d6c(0x110)]((_0xaf6429,_0x308aca)=>{const _0x552510=_0x595d6c;if(_0x308aca%_0x4fbd4c==0x0)_0x522c9b=[];_0x522c9b['push']({'text':_0xaf6429[_0x552510(0x1e0)]==_0x552510(0x178)?_0x552510(0x108):'Bot\x20'+_0xaf6429[_0x552510(0x1e0)],'callback_data':_0xaf6429['botID']}),_0x308aca%_0x4fbd4c==0x0&&(_0x47b897[_0x421b02]=_0x522c9b,_0x421b02++);}),tgBot[_0x595d6c(0x221)](_0x29f6d6[_0x595d6c(0xe7)]['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20start?',{'reply_markup':{'inline_keyboard':_0x47b897}})[_0x595d6c(0x1c8)](_0x36b1f9=>{telegramError(_0x36b1f9);}),tgBot['on']('callback_query',async _0xa8fe99=>{const _0x451247=_0x595d6c,_0x1f509d=_0xa8fe99[_0x451247(0xf2)],_0x1d6171=_0xa8fe99['message'];tgBot[_0x451247(0x159)](_0xa8fe99['id'])[_0x451247(0x206)](async()=>{const _0x93bccf=_0x451247;if(_0x1f509d==_0x93bccf(0x178)){if(settings[_0x93bccf(0x168)]==_0x93bccf(0xdb))tgBot['sendMessage'](_0x1d6171[_0x93bccf(0xe7)]['id'],_0x93bccf(0x12f))[_0x93bccf(0x1c8)](_0x2f5d4b=>{telegramError(_0x2f5d4b);});_0x37bbe8[_0x93bccf(0x110)](_0x661c63=>{const _0x64b952=_0x93bccf;if(_0x661c63[_0x64b952(0x1e0)]!='all')toggleBot(_0x661c63[_0x64b952(0x1e0)],toggleStatus(_0x661c63['botID']),_0x64b952(0x1d9));});}else{if(settings[_0x93bccf(0x168)]==_0x93bccf(0xdb))tgBot[_0x93bccf(0x221)](_0x1d6171[_0x93bccf(0xe7)]['id'],_0x93bccf(0x1a7)+_0x1f509d)[_0x93bccf(0x1c8)](_0x1d654d=>{telegramError(_0x1d654d);});toggleBot(_0x1f509d,toggleStatus(_0x1f509d),'stopped');}}),tgBot[_0x451247(0x1a4)](_0x451247(0x219));});}}),tgBot['onText'](/\/off/,_0x56786d=>{const _0x56d833=_0x5d95cd;if(!validateTelegram(_0x56786d))return;tgBot[_0x56d833(0x1a4)](_0x56d833(0x219));const _0x3bb22a=getEnabledBots();if(_0x3bb22a[_0x56d833(0xd2)]==0x0)tgBot[_0x56d833(0x221)](_0x56786d[_0x56d833(0xe7)]['id'],'No\x20bots\x20running\x20right\x20now')[_0x56d833(0x1c8)](_0x1eb893=>{telegramError(_0x1eb893);});else{if(_0x3bb22a[_0x56d833(0xd2)]>0x1)_0x3bb22a[_0x56d833(0x1cd)]({'botID':'all'});let _0x469e2e=[],_0x2dbc68=[];const _0x37d2fb=_0x3bb22a[_0x56d833(0xd2)]%0x4==0x0||_0x3bb22a['length']%0x4==0x3||_0x3bb22a['length']%0x3==0x1?0x4:0x3;let _0xee9d5b=0x0;_0x3bb22a[_0x56d833(0x110)]((_0x1bbb08,_0x11b9ec)=>{const _0x141a8c=_0x56d833;if(_0x11b9ec%_0x37d2fb==0x0)_0x2dbc68=[];_0x2dbc68[_0x141a8c(0x1cd)]({'text':_0x1bbb08[_0x141a8c(0x1e0)]==_0x141a8c(0x178)?_0x141a8c(0x108):'Bot\x20'+_0x1bbb08[_0x141a8c(0x1e0)],'callback_data':_0x1bbb08[_0x141a8c(0x1e0)]}),_0x11b9ec%_0x37d2fb==0x0&&(_0x469e2e[_0xee9d5b]=_0x2dbc68,_0xee9d5b++);}),tgBot[_0x56d833(0x221)](_0x56786d['chat']['id'],'Which\x20bot\x20do\x20you\x20want\x20to\x20stop?',{'reply_markup':{'inline_keyboard':_0x469e2e}})['catch'](_0x48636c=>{telegramError(_0x48636c);}),tgBot['on']('callback_query',async _0x31bdd5=>{const _0x2af19a=_0x56d833,_0x11ebb4=_0x31bdd5[_0x2af19a(0xf2)],_0x34bdfe=_0x31bdd5[_0x2af19a(0x131)];tgBot[_0x2af19a(0x159)](_0x31bdd5['id'])['then'](async()=>{const _0x18dbef=_0x2af19a;if(_0x11ebb4==_0x18dbef(0x178)){if(settings[_0x18dbef(0x168)]==_0x18dbef(0xdb))tgBot[_0x18dbef(0x221)](_0x34bdfe['chat']['id'],_0x18dbef(0xec))['catch'](_0x4e7c7e=>{telegramError(_0x4e7c7e);});_0x3bb22a['forEach'](_0x220e16=>{const _0x266f00=_0x18dbef;if(_0x220e16[_0x266f00(0x1e0)]!=_0x266f00(0x178))toggleBot(_0x220e16['botID'],toggleStatus(_0x220e16['botID']),_0x266f00(0x1d9));});}else{if(settings[_0x18dbef(0x168)]==_0x18dbef(0xdb))tgBot[_0x18dbef(0x221)](_0x34bdfe[_0x18dbef(0xe7)]['id'],_0x18dbef(0x115)+_0x11ebb4)[_0x18dbef(0x1c8)](_0x160a88=>{telegramError(_0x160a88);});toggleBot(_0x11ebb4,toggleStatus(_0x11ebb4),_0x18dbef(0x1d9));}}),tgBot[_0x2af19a(0x1a4)]('callback_query');});}}),tgBot['onText'](/\/disable/,_0x448624=>{const _0x54384e=_0x5d95cd;if(!validateTelegram(_0x448624))return;tgBot[_0x54384e(0x221)](_0x448624[_0x54384e(0xe7)]['id'],_0x54384e(0x1ce))[_0x54384e(0x1c8)](_0x1c9691=>{telegramError(_0x1c9691);}),updateSetting('telegramEnabled',![]);}),tgBot[_0x5d95cd(0x19e)](/\/help/,_0x159292=>{const _0x528e84=_0x5d95cd;if(!validateTelegram(_0x159292))return;tgBot[_0x528e84(0x221)](_0x159292[_0x528e84(0xe7)]['id'],_0x136001)[_0x528e84(0x1c8)](_0x1ec1e7=>{telegramError(_0x1ec1e7);});}),tgBot['on'](_0x5d95cd(0x200),_0x54f2c4=>{const _0x3d60bf=_0x5d95cd;_0x54f2c4[_0x3d60bf(0x1c6)]()[_0x3d60bf(0x12a)]('404\x20Not\x20Found')&&(logging(_0x3d60bf(0x1c1)),tgBot[_0x3d60bf(0x111)](),tgBot=null,io['to'](_0x3d60bf(0x1c3))[_0x3d60bf(0xdc)](_0x3d60bf(0x1a5),_0x3d60bf(0x1c1)));}),process['once'](_0x5d95cd(0x1d8),()=>{const _0x3434ed=_0x5d95cd;if(tgBot)tgBot[_0x3434ed(0x111)]();process[_0x3434ed(0xf6)](0x1);}),process['once'](_0x5d95cd(0xe0),()=>{const _0x4fe434=_0x5d95cd;if(tgBot)tgBot[_0x4fe434(0x111)]();process[_0x4fe434(0xf6)](0x1);});}}function disableTelegram(){const _0x974514=_0x549061;tgBot&&(tgBot[_0x974514(0x111)](),tgBot=null);}function sendTelegram(_0x49157a,_0x9fb00d){const _0x9aaf67=_0x549061;if(settings[_0x9aaf67(0xf1)]){if(settings[_0x9aaf67(0x168)]==_0x9aaf67(0x178)||(_0x9fb00d[_0x9aaf67(0x1eb)]==_0x9aaf67(0x174)||_0x9fb00d['type']==_0x9aaf67(0x114))&&settings[_0x9aaf67(0x168)]==_0x9aaf67(0xfa)||_0x9fb00d[_0x9aaf67(0x1eb)]==_0x9aaf67(0x105)&&settings['telegramEvents']==_0x9aaf67(0xdb)){if(tgBot&&settings[_0x9aaf67(0x1ed)]){if(_0x9fb00d['showname'])tgBot[_0x9aaf67(0x221)](settings[_0x9aaf67(0x1ed)],_0x9fb00d[_0x9aaf67(0x182)]+_0x9aaf67(0x195)+_0x9fb00d[_0x9aaf67(0x103)])['catch'](_0x585f5c=>{telegramError(_0x585f5c);});else tgBot[_0x9aaf67(0x221)](settings[_0x9aaf67(0x1ed)],'Bot\x20'+_0x49157a+_0x9aaf67(0x195)+_0x9fb00d['event'])['catch'](_0x1677e1=>{telegramError(_0x1677e1);});}}}}function getDeviceWithIp(_0x1d3eb9){const _0x571a3e=_0x549061;return devices[_0x571a3e(0x16d)](_0x4fad3a=>_0x4fad3a['ip']===_0x1d3eb9);}function temporaryAccess2FA(_0x5ceab5,_0x1bb106){const _0x449424=_0x549061;let _0x2a6ac2=new Date(),_0x519a08=![];if(lastIpApproval){if(_0x2a6ac2-lastIpApproval<0x1388)_0x519a08=!![];}lastIpApproval=new Date();if(_0x519a08)return;tgBot&&settings[_0x449424(0x1ed)]&&(tgBot[_0x449424(0x1a4)](_0x449424(0x219)),tgBot[_0x449424(0x221)](settings[_0x449424(0x1ed)],_0x449424(0x201)+normalizeIP(_0x1bb106)[_0x449424(0x153)]+_0x449424(0xf0),{'parse_mode':_0x449424(0x14e),'reply_markup':{'inline_keyboard':[[{'text':_0x449424(0x11c),'callback_data':'5'},{'text':'15\x20min','callback_data':'15'},{'text':_0x449424(0x122),'callback_data':'30'},{'text':_0x449424(0x17c),'callback_data':_0x449424(0x17c)}]]}})[_0x449424(0x1c8)](_0x3f6dc7=>{telegramError(_0x3f6dc7);}),tgBot['on'](_0x449424(0x219),async _0x3bf2b7=>{const _0x5400ea=_0x449424,_0x101d49=_0x3bf2b7[_0x5400ea(0xf2)],_0x3f907c=_0x3bf2b7[_0x5400ea(0x131)];tgBot['answerCallbackQuery'](_0x3bf2b7['id'])[_0x5400ea(0x206)](async()=>{const _0xd96aa2=_0x5400ea;devices[_0x5ceab5][_0xd96aa2(0x1a3)]={'clientip':_0x1bb106,'timestamp':new Date()[_0xd96aa2(0xeb)](),'expiry':_0x101d49},_0x101d49!='reject'?(await tgBot['sendMessage'](_0x3f907c[_0xd96aa2(0xe7)]['id'],'Access\x20enabled\x20for\x20'+_0x101d49+_0xd96aa2(0x214),{'parse_mode':_0xd96aa2(0x14e)})[_0xd96aa2(0x1c8)](_0x2ae0ed=>{telegramError(_0x2ae0ed);}),io['to'](_0x5ceab5)['emit'](_0xd96aa2(0x1d6),{'access':{'allow':![],'reason':_0xd96aa2(0x19c),'token':null}})):(await tgBot[_0xd96aa2(0x221)](_0x3f907c[_0xd96aa2(0xe7)]['id'],_0xd96aa2(0x162))[_0xd96aa2(0x1c8)](_0x34cfd3=>{telegramError(_0x34cfd3);}),io['to'](_0x5ceab5)['emit']('status',{'access':{'allow':![],'reason':_0xd96aa2(0x1db),'token':null}}));}),tgBot[_0x5400ea(0x1a4)](_0x5400ea(0x219));}));}function loginAccess2FA(_0x59fc92,_0x4381dd){const _0x2cae94=_0x549061;tgBot&&settings[_0x2cae94(0x1ed)]&&(tgBot[_0x2cae94(0x1a4)]('callback_query'),tgBot[_0x2cae94(0x221)](settings['telegramChatId'],_0x2cae94(0x1da)+normalizeIP(_0x4381dd)[_0x2cae94(0x153)]+_0x2cae94(0xf0),{'parse_mode':_0x2cae94(0x14e),'reply_markup':{'inline_keyboard':[[{'text':_0x2cae94(0x216),'callback_data':loginExpiry},{'text':'reject','callback_data':_0x2cae94(0x17c)}]]}})[_0x2cae94(0x1c8)](_0x506835=>{telegramError(_0x506835);}),tgBot['on'](_0x2cae94(0x219),async _0x392677=>{const _0x5d20a0=_0x2cae94,_0x28cfde=_0x392677[_0x5d20a0(0xf2)],_0x504731=_0x392677[_0x5d20a0(0x131)];tgBot[_0x5d20a0(0x159)](_0x392677['id'])[_0x5d20a0(0x206)](async()=>{const _0xb3eca7=_0x5d20a0;devices[_0x59fc92][_0xb3eca7(0x1a9)]={'clientip':_0x4381dd,'timestamp':new Date()[_0xb3eca7(0xeb)](),'expiry':_0x28cfde},_0x28cfde!=_0xb3eca7(0x17c)?(await tgBot[_0xb3eca7(0x221)](_0x504731[_0xb3eca7(0xe7)]['id'],_0xb3eca7(0x1ef),{'parse_mode':_0xb3eca7(0x14e)})[_0xb3eca7(0x1c8)](_0x362ac=>{telegramError(_0x362ac);}),io['to'](_0x59fc92)[_0xb3eca7(0xdc)](_0xb3eca7(0x1d6),{'access':{'allow':![],'reason':_0xb3eca7(0x19c),'token':null}})):(await tgBot[_0xb3eca7(0x221)](_0x504731['chat']['id'],_0xb3eca7(0x199))['catch'](_0x2495ed=>{telegramError(_0x2495ed);}),io['to'](_0x59fc92)['emit'](_0xb3eca7(0x1d6),{'access':{'allow':![],'reason':_0xb3eca7(0x183),'token':null}}));}),tgBot[_0x5d20a0(0x1a4)](_0x5d20a0(0x219));}));}function getConfiguration(){const _0x46b9fe=_0x549061;return dbConfig[_0x46b9fe(0x1d3)](_0x46b9fe(0x20c))[_0x46b9fe(0x1b6)](_0x46b9fe(0x1e0))[_0x46b9fe(0x210)]()||[];}function getEnabledBots(){const _0x3921ce=_0x549061;return dbConfig[_0x3921ce(0x1d3)]('bots')[_0x3921ce(0x1b6)](_0x3921ce(0x1e0))[_0x3921ce(0x20d)]({'status':'enabled'})[_0x3921ce(0x210)]()||[];}function getDisabledBots(){const _0x381a1a=_0x549061;return dbConfig[_0x381a1a(0x1d3)](_0x381a1a(0x20c))[_0x381a1a(0x1b6)](_0x381a1a(0x1e0))[_0x381a1a(0x20d)]({'status':'disabled'})[_0x381a1a(0x210)]()||[];}function getSettings(){const _0x6674de=_0x549061;return dbSettings['get'](_0x6674de(0x222))[_0x6674de(0x210)]()||{'timeshift':0x0};}function getSecure(){const _0x453057=_0x549061;return dbSecure[_0x453057(0x1d3)]('secure')[_0x453057(0x210)]()||{};}function getBlacklist(){const _0x43b4c0=_0x549061;return dbSecure[_0x43b4c0(0x1d3)](_0x43b4c0(0x128))['value']()||[];}function broadcastToBots(_0x52aeb5,_0x510887){const _0x57efe2=_0x549061;config[_0x57efe2(0x110)](_0x131a9c=>{const _0x2bda2c=_0x57efe2;if(_0x131a9c[_0x2bda2c(0x1d6)]==_0x2bda2c(0x15c)&&_0x131a9c[_0x2bda2c(0x17f)]==_0x2bda2c(0x155)){if(pid[_0x131a9c[_0x2bda2c(0x1e0)]])pid[_0x131a9c['botID']][_0x2bda2c(0x1ab)]({[_0x52aeb5]:_0x510887});}});}function storeSettings(_0xa9fbb8,_0x572eef=![]){const _0xc1823c=_0x549061;_0xa9fbb8={...settings,..._0xa9fbb8};if(_0x572eef&&_0xa9fbb8['bbPassword']!=_0xc1823c(0x203)&&_0xa9fbb8[_0xc1823c(0x19f)]!=''){const _0x458a2e=crypt['decrypt'](secure['privateKey'],_0xa9fbb8['bbPassword'])['message'][_0xc1823c(0x16f)]('@')[0x0],_0x1e0a8f=bcrypt[_0xc1823c(0x189)](_0x458a2e,saltRounds);_0xa9fbb8={..._0xa9fbb8,'bbPassword':_0x1e0a8f};}if(_0x572eef&&_0xa9fbb8['telegramToken']!=_0xc1823c(0x203)&&_0xa9fbb8[_0xc1823c(0x1b0)]!=''){const _0x211689=crypt[_0xc1823c(0xfc)](secure[_0xc1823c(0x1e4)],_0xa9fbb8['telegramToken'])[_0xc1823c(0x131)]['split']('@')[0x0];_0xa9fbb8={..._0xa9fbb8,'telegramToken':_0x211689};}const _0x2ff8cf=_0xa9fbb8[_0xc1823c(0x1b0)]!=_0xc1823c(0x203)&&_0xa9fbb8[_0xc1823c(0x1b0)]!=settings[_0xc1823c(0x1b0)]||_0xa9fbb8['telegramUsername']!=settings['telegramUsername'],_0x2dd87f=_0xa9fbb8[_0xc1823c(0x1b0)]==''||_0xa9fbb8[_0xc1823c(0x177)]=='';if(_0x2ff8cf)_0xa9fbb8[_0xc1823c(0x168)]=_0xc1823c(0x178);for(const [_0x4954b2,_0x27a197]of Object['entries'](_0xa9fbb8)){if(_0x4954b2==_0xc1823c(0x1b0)&&_0x27a197==_0xc1823c(0x203)){_0xa9fbb8['telegramToken']=settings[_0xc1823c(0x1b0)];continue;};if(_0x4954b2=='bbPassword'&&_0x27a197=='************'){_0xa9fbb8[_0xc1823c(0x19f)]=settings[_0xc1823c(0x19f)];continue;};dbSettings[_0xc1823c(0x152)](_0xc1823c(0xe4)+_0x4954b2,_0x27a197)[_0xc1823c(0xfb)]();}settings=_0xa9fbb8,io['to'](_0xc1823c(0x1c3))[_0xc1823c(0xdc)]('settings',cleanSettings()),broadcastToBots(_0xc1823c(0x21b),settings[_0xc1823c(0x21b)]);if(_0x2ff8cf&&!_0x2dd87f)initTelegram();if(_0x2ff8cf&&_0x2dd87f)disableTelegram();getAllClients()[_0xc1823c(0x110)](_0x14f73f=>{const _0x263d98=_0xc1823c;getSocket(_0x14f73f['id'])['emit'](_0x263d98(0x1d6),{'access':{'allow':![],'reason':_0x263d98(0x19c),'token':null}});});}function _0x94b2(_0x22ff1b,_0x9de7ac){const _0x346c90=_0xdb19();return _0x94b2=function(_0x32436d,_0x2d1ece){_0x32436d=_0x32436d-0xd0;let _0xdb1964=_0x346c90[_0x32436d];return _0xdb1964;},_0x94b2(_0x22ff1b,_0x9de7ac);}function updateSetting(_0x140f7b,_0x369cf6){const _0x55d44d=_0x549061;dbSettings['set'](_0x55d44d(0xe4)+_0x140f7b,_0x369cf6)['write'](),settings=getSettings(),io['to'](_0x55d44d(0x1c3))['emit'](_0x55d44d(0x222),cleanSettings());}function storeSecure(_0x3f2967){const _0x1aaf8e=_0x549061;dbSecure[_0x1aaf8e(0x1d3)]('secure')[_0x1aaf8e(0x1cd)](_0x3f2967)[_0x1aaf8e(0xfb)](),secure=_0x3f2967;}function addBlacklist(_0x53e0f3){const _0x1ec9a6=_0x549061;cleanBlacklist();let _0x32691b;devices[_0x53e0f3][_0x1ec9a6(0x1a3)]?_0x32691b=Math[_0x1ec9a6(0x14c)](devices[_0x53e0f3][_0x1ec9a6(0x1a3)]['expiry'],loginExpiry):_0x32691b=loginExpiry,dbSecure['get']('blacklist')[_0x1ec9a6(0x1cd)]({'expiry':new Date()['getTime']()+_0x32691b*0x3c*0x3e8,'token':devices[_0x53e0f3][_0x1ec9a6(0xe1)][_0x1ec9a6(0x124)]})[_0x1ec9a6(0xfb)](),blacklist=dbSecure['get']('blacklist')[_0x1ec9a6(0x210)]();}function cleanBlacklist(){const _0x47e598=_0x549061;let _0x552b8c=dbSecure[_0x47e598(0x1d3)](_0x47e598(0x128))[_0x47e598(0x17e)]()[_0x47e598(0x210)](),_0x52462e=new Date()[_0x47e598(0xeb)]();_0x552b8c[_0x47e598(0x110)](_0x111cd5=>{const _0xda7231=_0x47e598;_0x111cd5[_0xda7231(0x150)]<_0x52462e&&dbSecure[_0xda7231(0x1d3)](_0xda7231(0x128))[_0xda7231(0x1c2)]({'expiry':_0x111cd5[_0xda7231(0x150)]})[_0xda7231(0xfb)]();});}function initStates(){const _0x3dde7e=_0x549061;let _0x13601e=getConfiguration();_0x13601e[_0x3dde7e(0x110)](_0x3190c4=>{const _0x48bb18=_0x3dde7e;_0x3190c4[_0x48bb18(0x17f)]='stopped';}),storeConfiguration(_0x13601e);}function onKeys(){const _0x11cf64=new RSA();return new Promise(_0x516f2a=>{const _0x54c1a9=_0x94b2;_0x11cf64[_0x54c1a9(0x1aa)]()[_0x54c1a9(0x206)](_0x3f344b=>{_0x516f2a(_0x3f344b);});});}async function generateKeys(){return await onKeys();}async function oneTimeMigration(){const _0x1af7d1=_0x549061;let _0x57778c=getConfiguration(),_0x1c3614=![];_0x57778c[_0x1af7d1(0x110)](_0x551127=>{const _0x5d1b16=_0x1af7d1;if(_0x551127[_0x5d1b16(0x1d6)]==_0x5d1b16(0x155))_0x551127['status']=_0x5d1b16(0x15c),_0x1c3614=!![];else _0x551127[_0x5d1b16(0x1d6)]=='stopped'&&(_0x551127[_0x5d1b16(0x1d6)]=_0x5d1b16(0x211),_0x1c3614=!![]);});if(_0x1c3614)storeConfiguration(_0x57778c);let _0x1db992=getSecure();if(!_0x1db992[_0x1af7d1(0xee)]('secret')){let _0x1f82f0=await generateKeys();_0x1db992[_0x1af7d1(0xf8)]=_0x1f82f0[_0x1af7d1(0xf8)],_0x1db992[_0x1af7d1(0x1e4)]=_0x1f82f0[_0x1af7d1(0x1e4)],_0x1db992[_0x1af7d1(0x158)]=crypto[_0x1af7d1(0xef)](0x20)[_0x1af7d1(0x1c6)]('hex');;storeSecure(_0x1db992);}let _0x5f1bd7=getSettings();_0x1c3614=![];!_0x5f1bd7['hasOwnProperty'](_0x1af7d1(0x1e3))&&(_0x5f1bd7['loginRequired']=![],_0x5f1bd7[_0x1af7d1(0x1ac)]='',_0x5f1bd7[_0x1af7d1(0x19f)]='',_0x5f1bd7[_0x1af7d1(0x20b)]=![],_0x1c3614=!![]);!_0x5f1bd7[_0x1af7d1(0xee)](_0x1af7d1(0x1c4))&&(_0x5f1bd7[_0x1af7d1(0x1c4)]=![],_0x5f1bd7[_0x1af7d1(0x175)]=[],_0x5f1bd7[_0x1af7d1(0x209)]=![],_0x1c3614=!![]);if(!_0x5f1bd7[_0x1af7d1(0xee)](_0x1af7d1(0xf1))){if(_0x5f1bd7[_0x1af7d1(0x1ed)])_0x5f1bd7[_0x1af7d1(0xf1)]=!![];else _0x5f1bd7[_0x1af7d1(0xf1)]=![];_0x1c3614=!![];}if(_0x1c3614)storeSettings(_0x5f1bd7);}function storeConfiguration(_0x1c2fdd){const _0xe52c89=_0x549061;dbConfig[_0xe52c89(0x1d3)](_0xe52c89(0x20c))[_0xe52c89(0x1c2)]()[_0xe52c89(0xfb)](),dbConfig[_0xe52c89(0x1d3)]('bots')['push'](..._0x1c2fdd)[_0xe52c89(0xfb)](),config=_0x1c2fdd;}function resetPassword(){const _0x2af721=_0x549061;tgBot&&settings[_0x2af721(0x1ed)]&&(tgBot['removeListener'](_0x2af721(0x219)),tgBot['sendMessage'](settings[_0x2af721(0x1ed)],_0x2af721(0x149),{'parse_mode':'HTML','reply_markup':{'inline_keyboard':[[{'text':_0x2af721(0x1de),'callback_data':_0x2af721(0x1de)},{'text':'no','callback_data':'no'}]]}})[_0x2af721(0x1c8)](_0x50eaa2=>{telegramError(_0x50eaa2);}),tgBot['on'](_0x2af721(0x219),async _0x5dfc6f=>{const _0x3debef=_0x2af721,_0x4302cb=_0x5dfc6f[_0x3debef(0xf2)],_0x2f736b=_0x5dfc6f[_0x3debef(0x131)];tgBot[_0x3debef(0x159)](_0x5dfc6f['id'])[_0x3debef(0x206)](async()=>{const _0x5bf2ca=_0x3debef;if(_0x4302cb!='no'){const _0x46fd46=0xf,_0x42be05=_0x5bf2ca(0x1bd),_0x35ea82=Array['from'](crypto[_0x5bf2ca(0x185)](new Uint32Array(_0x46fd46)))[_0x5bf2ca(0x1f6)](_0x270050=>_0x42be05[_0x270050%_0x42be05['length']])[_0x5bf2ca(0xf9)](''),_0x41b4cd=bcrypt[_0x5bf2ca(0x189)](_0x35ea82,saltRounds);storeSettings({'bbPassword':_0x41b4cd}),await tgBot[_0x5bf2ca(0x221)](_0x2f736b[_0x5bf2ca(0xe7)]['id'],'Password\x20has\x20been\x20reset\x20to:\x20'+_0x35ea82,{'parse_mode':_0x5bf2ca(0x14e)})[_0x5bf2ca(0x1c8)](_0x47f96d=>{telegramError(_0x47f96d);});}else await tgBot[_0x5bf2ca(0x221)](_0x2f736b[_0x5bf2ca(0xe7)]['id'],_0x5bf2ca(0x14a))[_0x5bf2ca(0x1c8)](_0x45a33d=>{telegramError(_0x45a33d);});}),tgBot[_0x3debef(0x1a4)](_0x3debef(0x219));}));}function logging(_0xced05f){const _0x2ad844=_0x549061;console[_0x2ad844(0x106)](getTimeStamp()+_0x2ad844(0x11f)+_0xced05f);if(tgBot&&settings[_0x2ad844(0x1ed)]&&settings['telegramEvents']!=_0x2ad844(0xdb))tgBot[_0x2ad844(0x221)](settings[_0x2ad844(0x1ed)],_0x2ad844(0xfd)+_0xced05f)[_0x2ad844(0x1c8)](_0x318196=>{telegramError(_0x318196);});}function getServerTime(){const _0x28c0a6=_0x549061,_0x2ea15a=new Date();return _0x2ea15a[_0x28c0a6(0x173)]()+'/'+(_0x2ea15a['getMonth']()+0x1)['toString']()[_0x28c0a6(0x215)](0x2,'0')+'/'+_0x2ea15a[_0x28c0a6(0x205)]()[_0x28c0a6(0x1c6)]()[_0x28c0a6(0x215)](0x2,'0')+'\x20'+_0x2ea15a[_0x28c0a6(0x188)]()[_0x28c0a6(0x1c6)]()[_0x28c0a6(0x215)](0x2,'0')+':'+_0x2ea15a[_0x28c0a6(0x10b)]()[_0x28c0a6(0x1c6)]()[_0x28c0a6(0x215)](0x2,'0')+':'+_0x2ea15a[_0x28c0a6(0x161)]()[_0x28c0a6(0x1c6)]()[_0x28c0a6(0x215)](0x2,'0');}function getTimeStamp(){const _0x426d58=_0x549061,_0x431637=shiftedTime();return _0x431637['getFullYear']()+'/'+(_0x431637[_0x426d58(0x163)]()+0x1)[_0x426d58(0x1c6)]()[_0x426d58(0x215)](0x2,'0')+'/'+_0x431637[_0x426d58(0x205)]()[_0x426d58(0x1c6)]()[_0x426d58(0x215)](0x2,'0')+'\x20'+_0x431637[_0x426d58(0x188)]()[_0x426d58(0x1c6)]()['padStart'](0x2,'0')+':'+_0x431637['getMinutes']()['toString']()[_0x426d58(0x215)](0x2,'0')+':'+_0x431637[_0x426d58(0x161)]()[_0x426d58(0x1c6)]()[_0x426d58(0x215)](0x2,'0');}function shiftedTime(){const _0x26fd4b=_0x549061,_0x333d90=new Date();let _0x2e5d95=_0x333d90;if(settings[_0x26fd4b(0x21b)]&&settings[_0x26fd4b(0x21b)]!==0x0)_0x2e5d95=fns[_0x26fd4b(0x17d)](_0x333d90,{'hours':settings[_0x26fd4b(0x21b)]});return _0x2e5d95;}function startScheduler(){const _0x10cfb8=_0x549061;let _0x22db83=new Date()[_0x10cfb8(0x1ff)]();_0x22db83==0x1&&backupConfigFiles();_0x22db83==0x9&&triggerAnalytics();if(pidScheduler)clearTimeout(pidScheduler);pidScheduler=setTimeout(()=>{startScheduler();},0x3c*0x3c*0x3e8);}function backupConfigFiles(){const _0xb92854=_0x549061;fs[_0xb92854(0x129)](configpath,{'withFileTypes':!![]})[_0xb92854(0x110)](_0x4a0b23=>{const _0x4572de=_0xb92854;if(!_0x4a0b23['isDirectory']())fs[_0x4572de(0x1f1)](configpath+_0x4a0b23[_0x4572de(0x20e)],configbackuppath+_0x4a0b23[_0x4572de(0x20e)]);});}function triggerAnalytics(){const _0x1d287c=_0x549061;analytics[_0x1d287c(0x1dc)]({'title':'Balance\x20Bot\x20Server','href':'https://hodlerhacks.com','path':'/v'+serverversion});}function validateCredentials(_0x42ff3f,_0x4cc01d){const _0x2d3b16=_0x549061;if(_0x42ff3f[_0x2d3b16(0x197)]==settings['bbUsername']&&bcrypt['compareSync'](_0x42ff3f[_0x2d3b16(0x192)],settings[_0x2d3b16(0x19f)])){if(settings[_0x2d3b16(0x20b)])return{'allow':![],'reason':_0x2d3b16(0x10f),'token':null};else{const _0xf372fa=generateLoginToken(_0x4cc01d);return{'allow':!![],'reason':_0x2d3b16(0x1e8),'token':_0xf372fa};}}else return{'allow':![],'reason':_0x2d3b16(0x1bc),'token':null};}function refreshToken(_0x18d8d7){const _0x34a47f=generateLoginToken(_0x18d8d7);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x34a47f};}function validateAccess(_0x2978ff,_0x40c3cd){const _0x392c12=_0x549061;let _0x27b5a0=devices[_0x40c3cd]['ip'],_0x5f5551;const _0x1e778c=_0x22687f=>{const _0x4592cf=_0x94b2;if(settings[_0x4592cf(0x1e3)]){if(settings[_0x4592cf(0x20b)]){if(telegram2FaApproved(_0x40c3cd)){const _0x2688af=generateLoginToken(_0x40c3cd);return{'allow':!![],'reason':_0x4592cf(0x18b),'token':_0x2688af};}else return{'allow':![],'reason':_0x4592cf(0x166),'token':null};}else return _0x5f5551=validToken(_0x22687f,_0x40c3cd),_0x5f5551[_0x4592cf(0xee)](_0x4592cf(0x114))?{'allow':!![],'reason':_0x4592cf(0x133),'token':_0x22687f}:{'allow':![],'reason':_0x4592cf(0x166),'token':null};}else return{'allow':!![],'reason':_0x4592cf(0x1ad),'token':null};};if(settings[_0x392c12(0x1c4)]){let _0x30a382=[...settings['whitelist'],_0x392c12(0x10a),'::ffff:127.0.0.1',_0x392c12(0x156)];if(_0x30a382[_0x392c12(0x12a)](_0x27b5a0))return _0x1e778c(_0x2978ff);else{_0x5f5551=validToken(_0x2978ff,_0x40c3cd);if(_0x5f5551[_0x392c12(0xee)](_0x392c12(0x114)))return _0x1e778c(_0x2978ff);else{if(telegramIpApproved(_0x40c3cd)){const _0x200bbc=generateToken(_0x40c3cd);return _0x5f5551=_0x1e778c(_0x2978ff),_0x5f5551[_0x392c12(0x21c)]?{'allow':!![],'reason':_0x392c12(0x15e),'token':_0x200bbc}:_0x5f5551;}else return settings[_0x392c12(0x209)]?{'allow':![],'reason':_0x392c12(0x1e1),'token':null}:{'allow':![],'reason':_0x392c12(0x190),'token':null};}}}else return _0x1e778c(_0x2978ff);}function timelyDecrypt(_0x219f0d,_0x492909=!![]){const _0x272897=_0x549061;if(_0x219f0d)try{const _0x523cb7=crypt[_0x272897(0xfc)](secure['privateKey'],_0x219f0d)['message'],_0x5f0bc8=_0x523cb7[_0x272897(0x16f)]('@')[0x0],_0x216196=_0x523cb7[_0x272897(0x16f)]('@')[0x1],_0x38db12=new Date()[_0x272897(0xeb)]();if(_0x492909){if(_0x38db12-_0x216196<maxSecretAge*0x3e8)return _0x5f0bc8;else return![];}else return _0x5f0bc8;}catch(_0x4f3634){return![];}else return![];}const validToken=(_0x501df4,_0x28358d)=>{const _0x910112=_0x549061,_0x7410b3=devices[_0x28358d]['ip'];if(!_0x501df4)return{'error':'No\x20authentication\x20token'};for(let _0x2fd617 of blacklist){if(_0x2fd617[_0x910112(0x124)]==_0x501df4)return{'error':_0x910112(0x15d)};}let _0x3f2370;try{_0x3f2370=jwt[_0x910112(0x14b)](_0x501df4,secure[_0x910112(0x158)]+_0x28358d);}catch{return{'error':_0x910112(0x135)};}if(!_0x3f2370[_0x910112(0xee)](_0x910112(0x1bb))&&!_0x3f2370[_0x910112(0xee)]('username')||!_0x3f2370[_0x910112(0xee)](_0x910112(0xd8)))return{'error':'Invalid\x20authentication\x20token\x20(2)'};if(!_0x3f2370[_0x910112(0xee)]('username')&&_0x3f2370[_0x910112(0xee)](_0x910112(0x1bb))){const {clientip:_0x36a08c}=_0x3f2370;return _0x7410b3==_0x36a08c?{'success':_0x910112(0x1cf)}:{'error':_0x910112(0x12d)};}else{if(_0x3f2370[_0x910112(0xee)](_0x910112(0x197))&&_0x3f2370[_0x910112(0xee)]('clientip')){const {username:_0x48c6dc,clientip:_0x4252fc}=_0x3f2370;return settings['bbUsername']==_0x48c6dc&&_0x7410b3==_0x4252fc?{'success':'User\x20has\x20been\x20validated'}:{'error':'Invalid\x20username\x20or\x20IP\x20address'};}}},generateLoginToken=_0x2a8d33=>{const _0x3be1a3=_0x549061;if(_0x2a8d33){const _0x1055c3=devices[_0x2a8d33]['ip'];return jwt['sign']({'username':settings[_0x3be1a3(0x1ac)],'clientip':_0x1055c3},secure[_0x3be1a3(0x158)]+_0x2a8d33,{'expiresIn':tokenRefresh*0x3c});}else return![];},generateToken=_0x42a793=>{const _0xe8ff36=_0x549061;if(_0x42a793){const _0x4190ce=devices[_0x42a793]['ip'];return jwt[_0xe8ff36(0x154)]({'clientip':_0x4190ce},secure[_0xe8ff36(0x158)]+_0x42a793,{'expiresIn':devices[_0x42a793][_0xe8ff36(0x1a3)][_0xe8ff36(0x150)]*0x3c});}else return![];},telegramIpApproved=_0xad8327=>{const _0x46eb89=_0x549061;let _0x501cc3=![];return devices[_0xad8327][_0x46eb89(0x1a3)]&&devices[_0xad8327][_0x46eb89(0x1a3)][_0x46eb89(0x150)]!=_0x46eb89(0x17c)&&(_0x501cc3=devices[_0xad8327][_0x46eb89(0x1a3)][_0x46eb89(0x1bb)]==devices[_0xad8327]['ip']&&new Date()[_0x46eb89(0xeb)]()-devices[_0xad8327]['telegramIpApproval'][_0x46eb89(0xea)]<devices[_0xad8327][_0x46eb89(0x1a3)]['expiry']*0x3c*0x3e8),_0x501cc3;},telegram2FaApproved=_0xe52eef=>{const _0x523a95=_0x549061;let _0x490785=![];return devices[_0xe52eef][_0x523a95(0x1a9)]&&devices[_0xe52eef][_0x523a95(0x1a9)][_0x523a95(0x150)]!=_0x523a95(0x17c)&&(_0x490785=devices[_0xe52eef]['telegram2FaApproval'][_0x523a95(0x1bb)]==devices[_0xe52eef]['ip']&&new Date()['getTime']()-devices[_0xe52eef]['telegram2FaApproval']['timestamp']<devices[_0xe52eef][_0x523a95(0x1a9)]['expiry']*0x3c*0x3e8),_0x490785;},normalizeIP=_0xda1797=>{const _0x29d104=_0x549061;let _0x16d889=null,_0x34d506=null;if(ipaddr['isValid'](_0xda1797)){const _0x1574b1=ipaddr[_0x29d104(0x1f4)](_0xda1797);_0x1574b1[_0x29d104(0x19a)]()===_0x29d104(0x165)?(_0x1574b1[_0x29d104(0x1f9)]()&&(_0x16d889=_0x1574b1[_0x29d104(0x208)]()[_0x29d104(0x1c6)]()),_0x34d506=_0x1574b1['toString']()):(_0x16d889=_0x1574b1[_0x29d104(0x1c6)](),_0x34d506=_0x1574b1[_0x29d104(0x11a)]()['toString']());}return{'show':_0x16d889?_0x16d889:_0x34d506,'store':_0x34d506};};